# StackOverflow 问答 12555000-12555999

# java - 无法使用带有数据库数据的字符串来设置 TextView 的文本

> ID：12555000
> 
> 赞同：0
> 
> 时间：2012-09-23T18:22:57.820
> 
> 标签：java, android, string, textview, settext

我有一个 TextView 和一个字符串 randomWord。当应用程序启动时，我打开我的数据库并调用方法 db.open() 打开它，然后调用 db.randomize() 方法调用 randomize() 方法并查询数据库以获取随机条目并将其作为字符串返回。此后我只想 MyTextView.setText (randomWord); 但是当应用程序运行时，什么都没有显示。我试图在 setText （“whatever”）中进行硬编码，并显示出来。

所以我想我在随机化或其他方面做错了，因为我没有从数据库中得到一个字。

这就是我尝试做的事情：

```
 db.open();
        db.randomize(generatedWord);
        //text = new SpannableString(generatedWord);
        //text.setSpan(new ForegroundColorSpan(Color.WHITE), 0, text.length(), 0);  
        wordHolder.setText("" + generatedWord);
        db.close(); 
```

这是我的随机方法：

```
 public Cursor randomize(String word) {
            @SuppressWarnings("unused")
            Cursor cursor;
            return cursor =  this.db.query("tblnames ORDER BY RANDOM() LIMIT 1", new String[] { "*" }, null, null, null, null, null);
        } 
```

我的数据库有两列：“_id”和“word”

```
"create table tblnames (_id integer primary key autoincrement, "
     + "words text not null);" 
```

是否必须这样做，我没有在 randomize() 中的某处指定 _id 和单词？

另外：我尝试了 setText (generatedWord) 和 setText (" +generatedWord)；另外：运行时没有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T19:35:34.347

你没有用你的`randomize()`方法返回一个字符串。

这应该会给你想要的效果

```
db.open();
//text = new SpannableString(generatedWord);
//text.setSpan(new ForegroundColorSpan(Color.WHITE), 0, text.length(), 0);  
wordHolder.setText(db.randomize());
db.close(); 
```

在您的数据库中，您需要从游标返回所需列的字符串值，而不是游标本身。 [http://developer.android.com/reference/android/database/Cursor.html#getString(int](http://developer.android.com/reference/android/database/Cursor.html#getString(int) )

```
public String randomize() {
    Cursor cursor;
    cursor =  this.db.query("tblnames ORDER BY RANDOM() LIMIT 1", new String[] { "*" }, null, null, null, null, null);
    if(cursor.moveToFirst()) {
        return cursor.getString(cursor.getColumnIndexOrThrow( "word" ));
    }
    return "";
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-24T21:19:37.440

显示单词的解决方案：我找到了StringBuilder，而不是可扩展的字符串（隐藏和显示randomWord的一部分），连同indexOf和userinput，我能够在用户猜测后输入正确的字母。像这样：

```
public void guess()
    {
        char guess = userInput.getText().charAt(0);
        StringBuilder builder = new StringBuilder(hiddenWord);
        String j = ""+guess;
        int index = randomedWord.indexOf(guess);

        if (randomedWord.contains(j))
        {
            while (index >= 0) 
            {
                builder.setCharAt(index*2, guess);
                index = randomedWord.indexOf(guess, index + 1);
                hiddenWord = builder.toString().trim();
                wordHolder.setText(hiddenWord);
                if (!(hiddenWord.toString().contains("_".toString())) )
                {
                    winner();
                }
            }   
        }
        else 
        {
            showImages();
        }
    } 
```

随机字的解决方案（生成它）：看看詹姆斯的回答，我已经在我的数据库上返回了游标本身，而不是我想要的列的字符串值，这是正确的方法

```
db.open();
wordHolder.setText(db.randomize());
db.close();

public String randomize() {
    Cursor cursor;
    cursor =  this.db.query("tblnames ORDER BY RANDOM() LIMIT 1", new String[] { "*" }, null, null, null, null, null);
    if(cursor.moveToFirst()) {
        return cursor.getString(cursor.getColumnIndexOrThrow( "word" ));
    }
    return "";
} 
```

完整代码：

// MainActivity.java

```
package com.emanuelolsson.simplehangman;

import database.DBAdapter;
import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;

public class HangMan extends Activity {

    // DECLARE NEEDED VARIABLES  
    private Button newGameButton, enterLetterButton;
    private EditText userInput;
    private TextView wordHolder;
    private ImageView imageOne, imageTwo, imageThree, imageFour, imageFive, imageSix, imageSeven, imageEight, winner, hanged;
    private String hiddenWord, randomedWord;
    private int count = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_hang_man);
        DBAdapter db = new DBAdapter(this);

        // ASSIGN OBJECTS
        newGameButton = (Button) findViewById(R.id.newGame);
        enterLetterButton = (Button) findViewById(R.id.enter);
        wordHolder = (TextView) findViewById(R.id.wordHolder);
        userInput = (EditText) findViewById(R.id.userInput);
        imageOne = (ImageView) findViewById(R.id.imageView1);
        imageTwo = (ImageView) findViewById(R.id.imageView2);
        imageThree = (ImageView) findViewById(R.id.imageView3);
        imageFour = (ImageView) findViewById(R.id.imageView4);
        imageFive = (ImageView) findViewById(R.id.imageView5);
        imageSix = (ImageView) findViewById(R.id.imageView6);
        imageSeven = (ImageView) findViewById(R.id.imageView7);
        imageEight = (ImageView) findViewById(R.id.imageView8);
        winner = (ImageView) findViewById(R.id.winner);
        hanged = (ImageView) findViewById(R.id.hanged);
        imageOne.setVisibility(View.INVISIBLE);
        imageTwo.setVisibility(View.INVISIBLE);
        imageThree.setVisibility(View.INVISIBLE);
        imageFour.setVisibility(View.INVISIBLE);
        imageFive.setVisibility(View.INVISIBLE);
        imageSix.setVisibility(View.INVISIBLE);
        imageSeven.setVisibility(View.INVISIBLE);
        imageEight.setVisibility(View.INVISIBLE);
        winner.setVisibility(View.INVISIBLE);
        hanged.setVisibility(View.INVISIBLE);
        wordHolder.setVisibility(View.VISIBLE);

        // ADD LISTENERS
        newGameButton.setOnClickListener(new OnClickListener(){
            public void onClick(View arg0) {

                newGame();

            }
        });

        enterLetterButton.setOnClickListener(new OnClickListener(){
            public void onClick(View arg0) {

                if (!(userInput.getText().toString().isEmpty()) )
                {
                    guess();
                } else if (userInput.getText().toString().isEmpty())
                {
                    Toast toast = Toast.makeText(getApplicationContext(), "You need to insert a letter", Toast.LENGTH_SHORT);
                    toast.show();
                }
            }
        });
        db.open();
        db.fill();
        randomedWord = db.randomize();
        invWord();
        wordHolder.setText(hiddenWord);
        db.clear();
        db.close();
    }

    public void newGame() {
        DBAdapter db = new DBAdapter(this);
        count = 0;
        imageOne.setVisibility(View.INVISIBLE);
        imageTwo.setVisibility(View.INVISIBLE);
        imageThree.setVisibility(View.INVISIBLE);
        imageFour.setVisibility(View.INVISIBLE);
        imageFive.setVisibility(View.INVISIBLE);
        imageSix.setVisibility(View.INVISIBLE);
        imageSeven.setVisibility(View.INVISIBLE);
        imageEight.setVisibility(View.INVISIBLE);
        winner.setVisibility(View.INVISIBLE);
        hanged.setVisibility(View.INVISIBLE);

        db.open();
        db.fill();
        randomedWord = db.randomize();
        invWord();
        wordHolder.setText(hiddenWord);
        db.clear();
        db.close();
    }

    public void invWord() 
    {
        hiddenWord = randomedWord;
        hiddenWord = hiddenWord.replaceAll(".", "_" +" ");
    }

    public void guess()
    {
        char guess = userInput.getText().charAt(0);
        StringBuilder builder = new StringBuilder(hiddenWord);
        String j = ""+guess;
        int index = randomedWord.indexOf(guess);

        if (randomedWord.contains(j))
        {
            while (index >= 0) 
            {
                builder.setCharAt(index*2, guess);
                index = randomedWord.indexOf(guess, index + 1);
                hiddenWord = builder.toString().trim();
                wordHolder.setText(hiddenWord);
                if (!(hiddenWord.toString().contains("_".toString())) )
                {
                    winner();
                }
            }   
        }
        else 
        {
            showImages();
        }
    }

    private void winner()
    {
        imageOne.setVisibility(View.INVISIBLE);
        imageTwo.setVisibility(View.INVISIBLE);
        imageThree.setVisibility(View.INVISIBLE);
        imageFour.setVisibility(View.INVISIBLE);
        imageFive.setVisibility(View.INVISIBLE);
        imageSix.setVisibility(View.INVISIBLE);
        imageSeven.setVisibility(View.INVISIBLE);
        imageEight.setVisibility(View.INVISIBLE);
        winner.setVisibility(View.VISIBLE);
    }
    private void showImages() {

        count ++;

        if (count == 1) 
        {
            imageOne.setVisibility(View.VISIBLE);
        }
        else if (count == 2)
        {
            imageTwo.setVisibility(View.VISIBLE);
        }
        else if (count == 3) 
        {
            imageThree.setVisibility(View.VISIBLE);
        }
        else if (count == 4)
        {
            imageFour.setVisibility(View.VISIBLE);
        }
        else if (count == 5) 
        {
            imageFive.setVisibility(View.VISIBLE);
        }
        else if (count == 6)
        {
            imageSix.setVisibility(View.VISIBLE);
        }
        else if (count == 7) 
        {
            imageSeven.setVisibility(View.VISIBLE);
        }
        else if (count == 8)
        {   
            gameEnd();
        }

    }

    private void gameEnd() 
    {

        imageOne.setVisibility(View.INVISIBLE);
        imageTwo.setVisibility(View.INVISIBLE);
        imageThree.setVisibility(View.INVISIBLE);
        imageFour.setVisibility(View.INVISIBLE);
        imageFive.setVisibility(View.INVISIBLE);
        imageSix.setVisibility(View.INVISIBLE);
        imageSeven.setVisibility(View.INVISIBLE);
        imageEight.setVisibility(View.VISIBLE);
        hanged.setVisibility(View.VISIBLE);
        wordHolder.setText(randomedWord);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_hang_man, menu);
        return true;
    }
} 
```

// XML

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="43dp"
        android:contentDescription="@string/picOne"
        android:src="@drawable/one" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="43dp"
        android:contentDescription="@string/picTwo"
        android:src="@drawable/two" />

    <ImageView
        android:id="@+id/imageView3"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="43dp"
        android:contentDescription="@string/picThree"
        android:src="@drawable/three" />

    <ImageView
        android:id="@+id/imageView4"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="43dp"
        android:contentDescription="@string/picFour"
        android:src="@drawable/four" />

    <ImageView
        android:id="@+id/imageView5"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="43dp"
        android:contentDescription="@string/picFive"
        android:src="@drawable/five" />

    <ImageView
        android:id="@+id/imageView6"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="43dp"
        android:contentDescription="@string/picSix"
        android:src="@drawable/six" />

    <ImageView
        android:id="@+id/imageView7"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="43dp"
        android:contentDescription="@string/picSeven"
        android:src="@drawable/seven" />

    <ImageView
        android:id="@+id/imageView8"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="43dp"
        android:contentDescription="@string/picEight"
        android:src="@drawable/eight" />

    <ImageView
        android:id="@+id/winner"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:layout_alignTop="@+id/imageView1"
        android:layout_centerHorizontal="true"
        android:contentDescription="@string/winner"
        android:src="@drawable/winner" />

    <ImageView
        android:id="@+id/hanged"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:layout_alignTop="@+id/imageView1"
        android:layout_centerHorizontal="true"
        android:contentDescription="@string/hanged"
        android:src="@drawable/hanged" />

    <TextView
        android:id="@+id/wordHolder"
        android:layout_width="175dp"
        android:layout_height="40dp"
        android:layout_centerInParent="true"
        android:layout_alignTop="@+id/imageView1"
        android:layout_marginTop="134dp"
        android:layout_marginLeft="50dp"
        android:ems="10"
        android:textSize="30dp" />

    <Button
        android:id="@+id/newGame"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/wordHolder"
        android:layout_centerVertical="true"
        android:text="@string/newGame" />

    <Button
        android:id="@+id/enter"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/newGame"
        android:layout_alignBottom="@+id/newGame"
        android:layout_toLeftOf="@+id/newGame"
        android:text="@string/enter" />

    <EditText
        android:id="@+id/userInput"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:layout_alignBaseline="@+id/enter"
        android:layout_alignBottom="@+id/enter"
        android:layout_toLeftOf="@+id/enter"
        android:ems="10"
        android:inputType="text"
        android:textSize="20dp" >

        <requestFocus />
    </EditText>

    <ImageView
        android:id="@+id/imageView9"
        android:layout_width="250dp"
        android:layout_height="60dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:contentDescription="@+id/header"
        android:src="@drawable/header" />

</RelativeLayout> 
```

# php - Smarty的模板继承和img src属性

> ID：12555001
> 
> 赞同：0
> 
> 时间：2012-09-23T18:23:13.413
> 
> 标签：php, smarty, image, src

有没有办法让 Smarty在使用模板继承时将**src** & **href属性值转换为正确的 URL**

例子：

**文件：web/tpl/layout.tpl**

```
<img src="../img/logo.png" />
{block name=content}{/block} 
```

**文件：index.tpl**

```
{extends file="web/tpl/layout"}
{block name=content} home page content here{/block} 
```

**文件：dir/index.tpl**

```
{extends file="../web/tpl/layout"}
{block name=content} an other page content here{/block} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T18:28:23.060

我认为你应该定义你的基本 url 并在你的 src 和 href 中使用它：

```
<img src="{$baseurl}/img/logo.png" />
{block name=content}{/block} 
```

# meteor - 如何对 Meteor 模板不支持的 DOM 事件做出反应？

> ID：12555011
> 
> 赞同：2
> 
> 时间：2012-09-23T18:24:06.307
> 
> 标签：meteor

目前，meteor[支持有限数量的事件](http://docs.meteor.com/#eventmaps)，我们可以从模板定义中做出反应。我想要一种方法来对超出此预定义列表的事件做出反应。我希望可以自由地将任何事件，甚至自定义事件添加到模板中的可能事件列表中。

我的一个想法是在某处设置一个 jquery 事件处理程序来侦听不受支持的事件并让它设置一个会话变量：

```
$(form).submit( ->
    Session.set('formSubmitted', true) 
```

然后在渲染模板时使用该会话变量：

```
Template.confirmation.submitted = ->
    return Session.get('formSubmitted') 
```

```
<template name="confirmation">
    {{#if submitted}}
        <!-- do whatever -->
    {{/if}}
</template> 
```

但这只是一种解决方法，并不能真正解决问题。有没有真正的流星方式来做到这一点？这是我可以用新的[Spark](https://github.com/meteor/meteor/wiki/Spark)实现做的事情吗？

**注意：**请忽略我在这里使用提交事件的事实。我知道我可以将点击事件绑定到提交按钮，但这不是重点。

**注意 2：**[这个问题](https://stackoverflow.com/questions/10646570/how-to-handle-custom-jquery-events-in-meteor)的公认答案也只是一种解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:57:53.157

`rendered`回调是我用来执行此操作的。

[http://docs.meteor.com/#template_rendered](http://docs.meteor.com/#template_rendered)

回调为您提供模板实例，您应该使用它来查找所需的 dom 元素：http: [//docs.meteor.com/#template_inst](http://docs.meteor.com/#template_inst)

下面未经测试的示例；）

```
Template.foo.rendered = ->
  $(this.find("form")).submit ->
    Session.set 'formSubmitted', true 
```

我认为使用 Session 变量而不是切换视图是一个口味问题。

我在会话中存储了一个应用程序状态，它可以切换模板。此外，主干包对于提供一些有意义的 url 非常有用。

# objective-c - 将 NSWindow 拖到高于菜单栏的位置

> ID：12555014
> 
> 赞同：2
> 
> 时间：2012-09-23T18:24:22.303
> 
> 标签：objective-c, macos, cocoa, nswindow

我制作了一个名为[Uberlayer](http://twelvetwenty.nl/apps/uberlayer)的应用程序。用户可以使用这个单一用途的 Mac 应用程序将图像叠加在其他应用程序之上。

我正在使用[`setMovableByWindowBackground`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html)它的背景来拖动整个窗口。

我想做一点改进，因为应用程序现在不能将窗口拖到高于菜单栏的位置，这可能有点烦人。对于普通窗口，我可以想象将它锁定到菜单栏是一件好事，但对于这个用例来说，能够将它拖得更高是一件好事。

任何人都知道如何更改此默认窗口行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T20:09:23.007

而是使用这样的`-setMovableByWindowBackground:`覆盖`-mouseDown:`事件：

```
- (void)mouseDown:(NSEvent *)event
{
    NSPoint originalMouseLocation = [window convertBaseToScreen:[event locationInWindow]];
    NSRect originalFrame = [window frame];

    while (YES)
    {
        NSEvent *newEvent = [window nextEventMatchingMask:(NSLeftMouseDraggedMask | NSLeftMouseUpMask)];

        if ([newEvent type] == NSLeftMouseUp)
        {
            break;
        }

        NSPoint newMouseLocation = [window convertBaseToScreen:[newEvent locationInWindow]];
        NSPoint delta = NSMakePoint(
                                    newMouseLocation.x - originalMouseLocation.x,
                                    newMouseLocation.y - originalMouseLocation.y);

        NSRect newFrame = originalFrame;

        newFrame.origin.x += delta.x;
        newFrame.origin.y += delta.y;

        [window setFrame:newFrame display:YES animate:NO];
    }
} 
```

** 不要忘记隐藏窗口的标题栏（选择**窗口**-> 转到**Attributes Inspector** -> 取消选中**标题栏**），因为它的窗口不能高于菜单栏。或者其他解决方案是创建无边框窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-04T09:05:28.863

我只是添加到贾斯汀的答案。您需要在使用 Justin 的`-mouseDown:`代码时设置其级别。

```
[window setLevel:NSMainMenuWindowLevel]; 
```

如果窗口的级别低于`NSMainMenuWindowLevel`它将无法工作。`NSStatusWindowLevel`如果您希望窗口位于状态栏上方，您可以将其设置为。

# jsf-2 - 禁用 oam.Flash.RENDERMAP.TOKEN

> ID：12555020
> 
> 赞同：4
> 
> 时间：2012-09-23T18:24:51.960
> 
> 标签：jsf-2, websphere, myfaces, flash-scope

我正在使用 Apache MyFaces 2.0。我注意到`oam.Flash.RENDERMAP.TOKEN`为每个视图创建了一个 cookie，即使我没有使用 Flash 范围并且我已经设置了`org.apache.myfaces.DISABLE_FLASH_SCOPE=true`.

如何删除`oam.Flash.RENDERMAP.TOKEN`cookie？这是 WebSphere 特定问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T08:31:46.243

这是旧线程，但我花了一段时间才找到答案，所以我把它留给其他人......应该是：

```
org.apache.myfaces.FLASH_SCOPE_DISABLED 
```

不是 DISABLE_FLASH_SCOPE。所以详细地说，添加：

```
<context-param>
    <param-name>org.apache.myfaces.FLASH_SCOPE_DISABLED</param-name>
    <param-value>true</param-value>
</context-param> 
```

到您的 web.xml。

从 2.0.5 开始运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:31:38.827

WebSphere Fix Pack V8.0.0.6 修复了该问题。参考[http://www-01.ibm.com/support/docview.wss?rs=180&uid=swg1PM73173](http://www-01.ibm.com/support/docview.wss?rs=180&uid=swg1PM73173)

# java - Tomcat 7 很多异常

> ID：12555024
> 
> 赞同：0
> 
> 时间：2012-09-23T18:25:09.620
> 
> 标签：java, eclipse, spring, tomcat, web

我的 Tomcat 7 有问题。当我尝试通过 Eclipse 启动应用程序时，Tomcat 抛出异常。App很简单，就是“Hello World”。

```
 java.lang.ExceptionInInitializerError
    at org.springframework.context.support.AbstractRefreshableApplicationContext.createBeanFactory(AbstractRefreshableApplicationContext.java:195)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:128)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:527)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:441)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:383)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.NullPointerException
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.<clinit>(DefaultListableBeanFactory.java:109)
    ... 17 more

Sep 23, 2012 8:14:52 PM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
java.lang.ExceptionInInitializerError
    at org.springframework.context.support.AbstractRefreshableApplicationContext.createBeanFactory(AbstractRefreshableApplicationContext.java:195)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:128)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:527)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:441)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:383)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.NullPointerException
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.<clinit>(DefaultListableBeanFactory.java:109)
    ... 17 more

Sep 23, 2012 8:14:52 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error listenerStart
Sep 23, 2012 8:14:52 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/MVC_TEST] startup failed due to previous errors
Sep 23, 2012 8:14:52 PM org.apache.catalina.core.ApplicationContext log
INFO: Closing Spring root WebApplicationContext
Sep 23, 2012 8:14:52 PM org.springframework.context.support.AbstractApplicationContext doClose
INFO: Closing Root WebApplicationContext: startup date [Sun Sep 23 20:14:52 CEST 2012]; root of context hierarchy
Sep 23, 2012 8:14:52 PM org.springframework.context.support.AbstractApplicationContext doClose
WARNING: Exception thrown from ApplicationListener handling ContextClosedEvent
java.lang.IllegalStateException: ApplicationEventMulticaster not initialized - call 'refresh' before multicasting events via the context: Root WebApplicationContext: startup date [Sun Sep 23 20:14:52 CEST 2012]; root of context hierarchy
    at org.springframework.context.support.AbstractApplicationContext.getApplicationEventMulticaster(AbstractApplicationContext.java:337)
    at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:324)
    at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1030)
    at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:993)
    at org.springframework.web.context.ContextLoader.closeWebApplicationContext(ContextLoader.java:548)
    at org.springframework.web.context.ContextLoaderListener.contextDestroyed(ContextLoaderListener.java:142)
    at org.apache.catalina.core.StandardContext.listenerStop(StandardContext.java:4831)
    at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:5478)
    at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:160)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)

Sep 23, 2012 8:14:52 PM org.springframework.context.support.AbstractApplicationContext doClose
WARNING: Exception thrown from LifecycleProcessor on context close
java.lang.IllegalStateException: LifecycleProcessor not initialized - call 'refresh' before invoking lifecycle methods via the context: Root WebApplicationContext: startup date [Sun Sep 23 20:14:52 CEST 2012]; root of context hierarchy
    at org.springframework.context.support.AbstractApplicationContext.getLifecycleProcessor(AbstractApplicationContext.java:350)
    at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1038)
    at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:993)
    at org.springframework.web.context.ContextLoader.closeWebApplicationContext(ContextLoader.java:548)
    at org.springframework.web.context.ContextLoaderListener.contextDestroyed(ContextLoaderListener.java:142)
    at org.apache.catalina.core.StandardContext.listenerStop(StandardContext.java:4831)
    at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:5478)
    at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:160)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)

Sep 23, 2012 8:14:52 PM org.apache.catalina.core.StandardContext listenerStop
SEVERE: Exception sending context destroyed event to listener instance of class org.springframework.web.context.ContextLoaderListener
java.lang.IllegalStateException: BeanFactory not initialized or already closed - call 'refresh' before accessing beans via the ApplicationContext
    at org.springframework.context.support.AbstractRefreshableApplicationContext.getBeanFactory(AbstractRefreshableApplicationContext.java:172)
    at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1071)
    at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1045)
    at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:993)
    at org.springframework.web.context.ContextLoader.closeWebApplicationContext(ContextLoader.java:548)
    at org.springframework.web.context.ContextLoaderListener.contextDestroyed(ContextLoaderListener.java:142)
    at org.apache.catalina.core.StandardContext.listenerStop(StandardContext.java:4831)
    at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:5478)
    at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:160)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)

Sep 23, 2012 8:14:52 PM org.apache.coyote.AbstractProtocol start 
```

在 Tomcat 类路径中，我包括：

> servlet-api.jar org.springframework.web.* org.springframework.orm.* org.springframework.context.* org.springframework.beans.*
> 
> 并在用户条目 bootstrap.jar tools.jar tomcat-jul.jar

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T02:07:46.057

您显示的[链接](http://www.mkyong.com/spring3/spring-3-mvc-hello-world-example/)使用 Maven。在这种情况下，错误是您必须将 Maven 依赖项添加到 Eclipse 中的部署程序集。

```
Right click on your project -> properties -> Deployment Assembly -> Add -> Java Build Path Entries -> Maven dependencies -> Finish. 
```

这应该解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T19:11:00.577

由于您使用的是 Spring，因此错误是由启动 Spring 应用程序上下文的问题引起的。通常，您只需要查看第一个错误：其他错误是由这个错误引起的。

在您的情况下，由于以下异常，应用程序上下文无法初始化。这意味着 Spring 应用程序上下文根本无法初始化。

```
Caused by: java.lang.NullPointerException
at org.springframework.beans.factory.support.DefaultListableBeanFactory.<clinit>(DefaultListableBeanFactory.java:109) 
```

检查您的 web.xml 文件是否指向正确的 Spring 配置文件。如果您不确定，请发布文件的相关部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T19:10:33.027

如果您添加了所有必要的 jar，问题可能出在 web.xml 中。你那里有 ContextLoaderListener 吗？以另一种方式，您可以将 XML 命名空间添加到“HelloWorld”不需要的 Spring 上下文中。如果您需要更多帮助，请添加 SpringConfig 文件和您的 web.xml

# c# - 如何以报表格式打印文本字段数据？

> ID：12555028
> 
> 赞同：0
> 
> 时间：2012-09-23T18:25:37.060
> 
> 标签：c#, winforms

我正在使用 win forms C# 开发一个简单的应用程序，其中简单的文本字段从用户那里接收数据。
现在我想以报告格式打印该字段数据，记住我没有使用任何数据库。
我怎样才能做到这一点？如果它太简单了，我很抱歉，我只是一个初学者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T18:41:11.927

您可以使用 Microsoft 报告。数据源不必是数据库，您可以使用解决方案中的对象。有用的链接：

*   [对象数据源](http://www.gotreportviewer.com/objectdatasources/index.html)
*   [基本信息](http://www.gotreportviewer.com/)

# android - 使用触摸事件在 Android 中反向地理编码

> ID：12555032
> 
> 赞同：1
> 
> 时间：2012-09-23T18:26:26.650
> 
> 标签：android, android-emulator

我已经通过这个堆栈溢出和其他具有反向地理编码的相关文章浏览了几篇文章。

我打算从触摸事件中找到具有给定纬度和经度的地方的名称。我从触摸事件中获得了纬度和经度，但我无法从该地理坐标中获得地址，它通过异常而不是在尝试区域中，

**这是代码：**

```
public boolean onTouchEvent(MotionEvent event, MapView mapView)
{
     //---when user lifts his finger---
        //---when user lifts his finger---
         if (event.getAction() == 1) {
         GeoPoint p = mapView.getProjection().fromPixels(
         (int) event.getX(),
         (int) event.getY());
                  Toast.makeText(getBaseContext(),
         p.getLatitudeE6() / 1E6 + "," +
         p.getLongitudeE6() /1E6 ,
         Toast.LENGTH_SHORT).show();

         Geocoder geoCoder = new Geocoder(getBaseContext(), Locale.getDefault());
         try {
         List<Address> addresses = geoCoder.getFromLocation(p.getLatitudeE6() / 1E6, p.getLongitudeE6() / 1E6, 1);

         String strCompleteAddress= "";
         if (addresses.size() > 0)
         {
         for (int i=0; i<addresses.get(0).getMaxAddressLineIndex();i++)
        strCompleteAddress+= addresses.get(0).getAddressLine(i) + "\n";
         }
         Log.i("MyLocTAG => ", strCompleteAddress);
         Toast.makeText(getBaseContext(), strCompleteAddress,            Toast.LENGTH_LONG).show();
         }
         catch (IOException e) {

         e.printStackTrace();
         Toast.makeText(getBaseContext(), "exception", Toast.LENGTH_LONG).show();
         }
         return true;
         }
         else
         return false;
     }
} 
```

请让我找到解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T15:31:51.643

所以模拟器 2.2 有与反向地理编码相关的错误。所以我们需要下载2.1这样的版本并尝试。它将提供所需的结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T18:40:50.820

你得到什么例外？你的应用程序有**INTERNET 权限**吗？我很确定你需要这个才能让 Geocoder 工作（因为它通过 Internet 调用 Google 服务）。

# java - 单个线程中的多个 Runnable -java

> ID：12555038
> 
> 赞同：-1
> 
> 时间：2012-09-23T18:26:50.020
> 
> 标签：java, multithreading, concurrency, runnable

我正在尝试拥有一堆可以一次启动的可运行线程。就像是

```
First(new Thread() {
    public void run() {
        //do something

    }
}); 
```

我想做的事是不可能的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-23T19:29:40.837

您可以使用单线程执行器

```
ExecutorService service = Executors.newSingleThreadedPool();

service.submit(runnable1);
service.submit(runnable2);
service.submit(runnable3); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T20:12:53.407

> 我想在一个线程中有多个可运行文件。他们会在不同的时间做不同的事情。

这对我来说听起来像是一个糟糕的设计。如果你的班级在不同的时间做不同的事情，那么它应该分成不同的班级。

如果您正在谈论重新使用相同的后台*线程*来做不同的事情，那么我会使用一个单线程池，如@Peter 的回答：

```
private ExecutorService threadPool = Executors.newSingleThreadedPool();
...
threadPool.submit(new First());
threadPool.submit(new Second());
threadPool.submit(new Third());
...
// when you are done submitting, always shutdown your pool
threadPool.shutdown(); 
```

、`First`和`Second`类`Third`将实现`Runnable`. 如果他们需要共享一些状态，他们可以接受构造函数参数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-23T18:35:17.523

是的，只有多个私有方法：

```
public class FirstCaller {

   private void method1() { }
   private void method2() { }
   private void method3() { }

    public void someMethod() {
        First(new Thread() {
           public void run() {
                //do something
                method1();
                method2();
                method3();
            }
        });
    }
} 
```

或者正如 Ted Hopp 指出的那样

```
public class FirstCaller {
        public void someMethod() {
            new First(new Thread() {
               private void method1() { }
               private void method2() { }
               private void method3() { }

               public void run() {
                    //do something
                    method1();
                    method2();
                    method3();
                }
            });
        }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-23T18:53:53.983

您是否尝试在单个线程中按顺序执行多个可运行文件？一个接一个地？

```
public class MultiRunnable implements Runnable {

    private Runnable runnable1;
    private Runnable runnable2;

    public MultiRunnable(Runnable runnable1, Runnable runnable2) {
        this.runnable1 = runnable1;
        this.runnable2 = runnable2;
    }

    @Override
    public void run() {
        runnable1.run();
        runnable2.run();
    }
} 
```

然后你可以打电话`(new Thread(new MultiRunnable(... , ...))).start();`

这将首先执行第一个 Runnable，完成后将执行第二个。

* * *

或推广到更多 Runnables：

```
import java.util.Arrays;
import java.util.List;

public class MultiRunnable implements Runnable {

    private List<Runnable> runnables;

    public MultiRunnable(Runnable... runnables) {
        this.runnables = Arrays.asList(runnables);
    }
    public MultiRunnable(List<Runnable> runnables) {
        this.runnables = runnables;
    }

    @Override
    public void run() {
        for(Runnable runnable : runnables)
            runnable.run();
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-23T18:44:33.697

如果你想同时启动几个线程`CountDownLatch`是你所需要的。在此处查看示例：[http](http://www.javamex.com/tutorials/threads/CountDownLatch.shtml) ://www.javamex.com/tutorials/threads/CountDownLatch.shtml 。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-23T19:39:07.783

最简单的做法是定义几个`Thread`子类实例并根据您要执行的操作调用适当的实例。

但是，如果您确实需要一个在不同情况下表现不同的单个`Thread`对象，您可以定义一个`Thread`具有状态变量的子类来控制它的作用。

```
class MyThread extends Thread {
    public enum Action { A, B, C }
    private Action mAction;
    public void run() {
        if (mAction == null) {
            throw new IllegalStateException("Action must be specified");
        }
        switch (mAction) {
        case A:
            methodA();
            break;
        case B:
            methodB();
            break;
        case C:
            methodC();
            break;
        }
    }
    public void setAction(Action action) {
        if (action == null) {
            throw new IllegalArgumentException("Action cannot be null");
        }
        mAction = action;
    }
    private void methodA() { ... }
    private void methodB() { ... }
    private void methodC() { ... }
} 
```

然后，您可以创建线程并在调用之前调用`start()`，`setAction`传递其中一个`Action`值。

作为状态变量的替代方案，该`run()`方法可以检查外部变量以确定动作的选择。这是否有意义（以及是否会更好）取决于您的应用程序。

# c# - 来自 HttpWebResponse 的 GetElementById

> ID：12555040
> 
> 赞同：0
> 
> 时间：2012-09-23T18:26:57.493
> 
> 标签：c#, .net, web-scraping

最近我对网页抓取感到“有趣”。我想使用的网站没有 API，所以我别无选择，我必须这样做。

我遇到的问题之一是阅读 HTML 树的元素（我的意思是标签、内部文本和类似的东西）。我使用`HttpWebRequest`and`HttpWebResponse`向服务器发送*GET/POST*请求。

让`webResponse`我可以通过这种方式阅读 HTML 源代码：

```
StreamReader sr = new StreamReader(webResponse.GetResponseStream(), Encoding.UTF8);
string sourceCode = sr.ReadToEnd(); 
```

我需要的是`value`这个`input`标签：

```
<form action="/file.php" method="post">
    <input name="abc" id="abc" type="hidden" value="some_random_value" />
</form> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T18:30:23.277

一种方法是使用 HTML Parser 解析 HTML，然后使用 XPath 简单地选择所需的元素。

这比尝试从包含 HTML 的字符串中正则表达式相关代码要干净得多。

[http://htmlagilitypack.codeplex.com/](http://htmlagilitypack.codeplex.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T19:34:25.680

我会使用[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)

```
string html = @"<form action=""/file.php"" method=""post"">
                <input name=""abc"" id=""abc"" type=""hidden"" value=""some_random_value"" />
                </form>";
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(html);

//Xpath
var value1 = doc.DocumentNode.SelectSingleNode("//input[@id='abc']")
                             .Attributes["value"].Value;

//Linq
var value2 = doc.DocumentNode.Descendants("input")
                .First(i => i.Attributes["id"] != null && 
                            i.Attributes["id"].Value == "abc")
                .Attributes["value"].Value; 
```

# dart - 将元素插入 DOM 而不是使用 dart:html 追加

> ID：12555041
> 
> 赞同：5
> 
> 时间：2012-09-23T18:27:01.283
> 
> 标签：dart

dart:html 中的基础`Element`对象有一个属性`elements`，它是`List<E>`. 该`add`方法将元素附加到 DOM。我想在 DOM 中添加或插入一个元素。没有实现其中的插入方法`ElementList`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T19:44:23.310

所以假设你有这个 HTML 片段：

```
<body>
    <div id='test'></div>
</body> 
```

您可以这样做以在 div 之前插入一个元素：

```
// Get the sibling that we want to insert before.
final el = query('#test');

// From the parent element, we call insertBefore, referencing the
// sibling that we want to insert the new element before.
document.body.insertBefore(new Element.tag('p'), el); 
```

现在您的 HTML 将是：

```
<body>
    <p></p>
    <div id='test'></div>
</body> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-23T19:51:01.600

除了约翰的答案。您还可以使用以下语法：

```
final el = query('#test');

// If you want an element
el.insertAdjacentElement('beforebegin', new Element.tag('p'));
// If you want to insert HTML tags
el.insertAdjacentHTML('beforebegin', '<p>Hello</p>');
// Insert just text
el.insertAdjacentText('beforebegin', 'Hello there'); 
```

您可以使用位置参数：*beforebegin*，*afterbegin*，*beforeend*，*afterend*它将把它放在另一个元素的开头之前，就在元素的开头，就在元素的末尾，或者就在元素的末尾，分别。

# javascript - 我对 HTTP Polling、Long Polling、HTTP Streaming 和 WebSockets 的理解

> ID：12555043
> 
> 赞同：142
> 
> 时间：2012-09-23T18:27:13.297
> 
> 标签：javascript, web-applications, websocket, comet, http-streaming

我在 SO 和网络上阅读了很多关于我的问题标题中的关键字的帖子，并从中学到了很多东西。我阅读的一些问题与具体的实施挑战有关，而另一些则侧重于一般概念。我只是想确保我理解所有概念以及为什么技术 X 比技术 Y 发明的原因等等。所以这里是：

**Http Polling：**基本上是 AJAX，使用 XmlHttpRequest。

**Http Long Polling：** AJAX，但除非服务器有更新，否则服务器会保留响应，一旦服务器有更新，它就会发送它，然后客户端可以发送另一个请求。缺点是需要来回发送的额外标头数据会导致额外开销。

**Http Streaming：**类似于长轮询，但服务器响应带有“Transfer Encoding: chunked”的标头，因此我们不需要在每次服务器发送一些数据时发起新请求（从而节省额外的标头开销）。这里的缺点是我们必须“理解”并弄清楚数据的结构，以区分服务器发送的多个块。

**Java Applet、Flash、Silverlight：**它们提供了通过 tcp/ip 连接到套接字服务器的能力，但由于它们是插件，开发人员不想依赖它们。

**WebSockets：**它们是新的 API，它试图通过以下方式解决上述方法的缺点：

*   与 Java Applets、Flash 或 Silverlight 等插件相比，WebSockets 的唯一优势是 WebSockets 原生内置于浏览器中，不依赖于插件。
*   WebSockets 相对于 http 流的唯一优势是您不必努力“理解”和解析接收到的数据。
*   与长轮询相比，WebSockets 的唯一优势是消除了额外的标头大小以及为请求打开和关闭套接字连接。

我还缺少其他任何重大差异吗？如果我重新询问或将 SO 上的许多问题合并为一个问题，我很抱歉，但我只想从 SO 和网络上关于这些概念的所有信息中完全理解。

谢谢！

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-09-23T20:57:25.277

与您确定的差异相比，差异更多。

双工/定向：

*   单向：HTTP 轮询、长轮询、流式传输。
*   双向：WebSockets、插件网络

按照延迟增加的顺序（近似值）：

*   网络套接字
*   插件网络
*   HTTP 流式传输
*   HTTP长轮询
*   HTTP 轮询

CORS（跨域支持）：

*   WebSockets：是的
*   插件网络：通过策略请求 Flash（不确定其他）
*   HTTP *（最近的一些支持）

本机二进制数据（类型化数组、blob）：

*   WebSockets：是的
*   插件网络：不使用 Flash（需要跨 ExternalInterface 进行 URL 编码）
*   HTTP *：最近提议启用二进制类型支持

降低效率的带宽：

*   插件网络：Flash 套接字是原始的，除了初始策略请求
*   WebSockets：连接建立握手和每帧几个字节
*   HTTP 流式传输（重用服务器连接）
*   HTTP 长轮询：每条消息的连接
*   HTTP 轮询：每条消息都连接 + 没有数据消息

移动设备支持：

*   WebSocket：iOS 4.2 及更高版本。一些 Android 通过 Flash 仿真或使用[Firefox for Android](https://play.google.com/store/apps/details?id=org.mozilla.firefox&hl=en)或[Google Chrome for Android](https://play.google.com/store/apps/details?id=com.android.chrome&feature=search_result#?t=W251bGwsMSwyLDEsImNvbS5hbmRyb2lkLmNocm9tZSJd)，它们都提供原生 WebSocket 支持。
*   插件网络：一些Android。不在 iOS 上
*   HTTP *：大部分是的

Javascript 使用复杂度（从最简单到最复杂）。诚然，复杂性度量有些主观。

*   网络套接字
*   HTTP 轮询
*   插件网络
*   HTTP 长轮询，流式传输

另请注意，有一个 W3C 提议标准化 HTTP 流，称为[Server-Sent Events](http://www.w3.org/TR/eventsource/)。它目前还处于发展的早期阶段，旨在提供一个标准的 Javascript API，其简单性与 WebSockets 相当。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-24T06:47:41.987

其他人的一些很好的答案涵盖了很多领域。这里有一点额外的。

> 与 Java Applets、Flash 或 Silverlight 等插件相比，WebSockets 的唯一优势是 WebSockets 原生内置于浏览器中，不依赖于插件。

如果您的意思是您可以使用 Java Applet、Flash 或 Silverlight 来建立套接字连接，那么是的，这是可能的。但是，由于限制，您不会经常看到它在现实世界中部署。

例如，中介可以并且确实关闭了该流量。WebSocket 标准旨在与现有的 HTTP 基础设施兼容，因此不太容易受到防火墙和代理等中介的干扰。

此外，WebSocket 无需专用端口即可使用端口 80 和 443，这再次归功于协议设计尽可能与现有 HTTP 基础设施兼容。

这些套接字替代方案（Java、Flash 和 Silverlight）很难在跨域架构中安全使用。因此，经常尝试跨域使用它们的人们会容忍不安全感，而不是努力安全地做到这一点。

他们还可能需要打开额外的“非标准”端口（管理员不愿意这样做）或需要管理的策略文件。

简而言之，使用 Java、Flash 或 Silverlight 进行套接字连接存在很多问题，以至于您不会经常看到它部署在严肃的体系结构中。Flash 和 Java 拥有这种能力可能至少有 10 年了，但它并不普遍。

WebSocket 标准能够以一种新的方法开始，牢记这些限制，并希望从中吸取一些教训。

当无法建立 WebSocket 连接时（例如在旧浏览器中运行或中介干扰时），一些 WebSocket 实现使用 Flash（或者可能是 Silverlight 和/或 Java）作为它们的后备。

虽然针对这些情况的某种后备策略是明智的，甚至是必要的，但大多数使用 Flash 等的人都会遭受上述缺点的困扰。不一定要那样——有一些变通方法可以使用 Flash、Silverlight 等实现安全的跨域连接——但大多数实现不会这样做，因为这并不容易。

例如，如果您依赖 WebSocket 进行跨域连接，那将可以正常工作。但是，如果您随后在旧浏览器或受干扰的防火墙/代理中运行并依赖 Flash，例如，作为您的后备，您会发现很难进行相同的跨域连接。当然，除非您不关心安全性。

这意味着很难拥有适用于本地和非本地连接的单一统一架构，除非您准备投入大量工作或使用做得很好的框架。在理想的架构中，您不会注意到连接是否是本机的。您的安全设置在这两种情况下都可以使用；您的集群设置仍然有效；您的容量规划仍然有效；等等。

> WebSockets 相对于 http 流的唯一优势是您不必努力“理解”和解析接收到的数据。

这不像打开一个 HTTP 流并在您的数据流中等待几分钟、几小时或更长时间那样简单。不同的客户行为不同，您必须对其进行管理。例如，一些客户端会缓冲数据，直到达到某个阈值才将其释放给应用程序。更糟糕的是，有些在连接关闭之前不会将数据传递给应用程序。

因此，如果您要向客户端发送多条消息，例如，客户端应用程序可能在收到 50 条消息的数据之前不会接收数据。这不是太实时。

虽然当 WebSocket 不可用时 HTTP 流式传输可能是一个可行的替代方案，但它不是万能药。它需要很好的理解才能在现实世界条件下的 Web 荒地中以稳健的方式工作。

> 我还缺少其他任何重大差异吗？

还有一件事还没有人提到，所以我会提出来。

WebSocket 协议被设计为高级协议的传输层。虽然您可以直接通过 WebSocket 连接发送 JSON 消息或其他什么，但它也可以携带标准或自定义协议。

例如，您可以通过 WebSocket 执行 AMQP 或 XMPP，就像人们已经完成的那样。因此，客户端可以从 AMQP 代理接收消息，就好像它直接连接到代理本身（在某些情况下确实如此）。

或者，如果您有一个带有一些自定义协议的现有服务器，您可以通过 WebSocket 传输它，从而将该后端服务器扩展到 Web。通常，已锁定在企业中的现有应用程序可以使用 WebSocket 扩大其范围，而无需更改任何后端基础架构。

（当然，您希望能够安全地完成所有这些操作，因此请咨询供应商或 WebSocket 提供商。）

有些人将 WebSocket 称为 Web 的 TCP。因为就像 TCP 传输更高级别的协议一样，WebSocket 也是如此，但在某种程度上与 Web 基础设施兼容。

因此，虽然总是可以直接通过 WebSocket 发送 JSON（或其他）消息，但还应该考虑现有协议。因为对于很多你想做的事情，可能已经有一个协议已经被考虑过了。

> 如果我重新询问或将 SO 上的许多问题合并为一个问题，我很抱歉，但我只想从 SO 和网络上关于这些概念的所有信息中完全理解。

这是一个很好的问题，答案都非常丰富！

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-24T16:26:33.097

> 如果我可以再问一件事：我在某处的一篇文章中看到，http 流也可能被代理缓存，而 websockets 则没有。这意味着什么？

（StackOverflow 限制了评论响应的大小，所以我不得不在这里回答而不是内联。）

那是个很好的观点。要理解这一点，请考虑一个传统的 HTTP 场景......假设浏览器打开了一个网页，因此它请求[http://example.com](http://example.com)。服务器使用包含页面 HTML 的 HTTP 进行响应。然后浏览器看到页面中有资源，所以它开始请求 CSS 文件、JavaScript 文件，当然还有图片。它们都是静态文件，对于请求它们的*所有客户端都是相同的。*

一些代理会缓存静态资源，以便其他客户端的后续请求可以从代理获取这些静态资源，而不必一路回到中央 Web 服务器来获取它们。这是缓存，它是从中央服务卸载请求和处理的好策略。

所以客户端 #1 请求[http://example.com/images/logo.gif](http://example.com/images/logo.gif)，比如说。该请求通过代理一直到达中央 Web 服务器，该服务器提供 logo.gif。当 logo.gif 通过代理时，代理将保存该图像并将其与地址[http://example.com/images/logo.gif](http://example.com/images/logo.gif)相关联。

当客户端 #2 出现并请求[http://example.com/images/logo.gif](http://example.com/images/logo.gif)时，代理可以返回图像，无需与中心的 Web 服务器进行通信。这为最终用户提供了更快的响应，这总是很棒，但这也意味着中心的负载更少。这可以转化为降低硬件成本、降低网络成本等。所以这是一件好事。

在 web 服务器上更新 logo.gif 时会出现问题。代理将继续提供旧图像，而不知道有新图像。这会导致整个过期，因此代理只会在图像“过期”之前将图像缓存一小段时间，并且下一个请求会通过代理到达 Web 服务器，然后刷新代理的缓存。还有更高级的解决方案，中央服务器可以推送到已知的缓存，等等，事情会变得非常复杂。

这与您的问题有什么关系？

您询问了服务器将 HTTP 流式传输到客户端的 HTTP 流式传输。但是流式 HTTP 就像常规 HTTP 一样，只是您不会停止发送数据。如果 Web 服务器提供图像，它会向最终结束的客户端发送 HTTP：您已经发送了整个图像。如果你想发送数据，它是完全一样的，但是服务器只是发送了很长时间（比如它是一个巨大的图像），甚至永远不会完成。

从代理的角度来看，它无法区分用于静态资源（如图像）的 HTTP 或来自 HTTP 流的数据。在这两种情况下，客户端都向服务器发出了请求。代理记住了该请求以及响应。下次该请求进入时，代理会提供相同的响应。

因此，如果您的客户请求股票价格并得到响应，那么下一个客户可能会发出相同的请求并获取缓存数据。可能不是你想要的！如果您要求股票价格，您需要最新数据，对吗？

所以这是个问题。

有一些技巧和解决方法可以处理这样的问题，这是真的。显然，您可以让 HTTP 流式传输工作，因为它现在正在使用中。这对最终用户来说都是透明的，但开发和维护这些架构的人必须跳过障碍并付出代价。它导致架构过于复杂，这意味着更多的维护、更多的硬件、更多的复杂性和更多的成本。这也意味着，当开发人员应该只关注应用程序、GUI 和业务逻辑时，他们通常不得不关心他们不应该关心的事情——他们不应该关心底层通信。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-23T19:20:23.900

HTTP 将客户端与服务器的连接数限制为 2（尽管这可以通过使用子域来缓解），并且众所周知 IE 会急切地执行此操作。Firefox 和 Chrome 允许更多（虽然我不记得我的头顶到底有多少）。这似乎不是一个大问题，但如果您不断使用 1 个连接进行实时更新，则所有其他请求都必须通过其他 HTTP 连接成为瓶颈。还有一个问题是来自客户端的更多开放连接会给服务器带来更多负载。

WebSockets 是一种基于 TCP 的协议，因此不受这种 HTTP 级别的连接限制的影响（当然，浏览器支持并不统一）。

# android - android：弹出菜单，弹出对话框

> ID：12555044
> 
> 赞同：0
> 
> 时间：2012-09-23T18:27:17.717
> 
> 标签：android, menu, popup

我想问一下如何设置布局，当用户连续按下一个按钮时，按钮旁边会出现一个弹出菜单，让用户选择编辑或删除该行？

另外，我想问一下如何进行布局，以便当用户按下添加按钮时，会弹出一个类似于 AlertDialog 的弹出对话框？在弹出对话框中，用户可以输入 4 个编辑文本？

可以修改 AlertDialog 以接受用户输入，即 EditTexts 吗？

有代码可以参考吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T19:13:36.773

拥有编辑/删除按钮的一种简单方法是在布局中已经拥有该按钮，但将其可见性设置为`View.INVISIBLE`不可见。当按下另一个按钮时，只需将编辑/删除按钮的可见性更改为`View.VISIBLE`.

对于自定义对话框，使用`AlertDialog.Builder`并`setView()`在对话框中使用您的自定义布局。

[http://developer.android.com/reference/android/app/AlertDialog.Builder.html#setView(android.view.View](http://developer.android.com/reference/android/app/AlertDialog.Builder.html#setView(android.view.View) )

这是带有一些示例代码的博客文章：

[http://android-coding.blogspot.com/2011/05/create-custom-dialog-using.html](http://android-coding.blogspot.com/2011/05/create-custom-dialog-using.html)

# c# - 便携式图书馆中的计时器

> ID：12555049
> 
> 赞同：33
> 
> 时间：2012-09-23T18:28:00.673
> 
> 标签：c#, timer, microsoft-metro, portable-class-library

我在便携式库/Windows Store 中找不到计时器。（针对 .net 4.5 和 Windows Store aka Metro）

有没有人知道如何创建某种计时事件？

我需要某种秒表，所以它应该每秒刷新一次左右

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-08T21:55:25.493

**更新：**我们在 Visual Studio 2013 中修复了这个问题。面向 Store (Windows 8.1) 和 .NET Framework 4.5.1 项目的可移植库现在可以引用 Timer。

这是我们的实现细节泄露给用户的不幸案例。当您仅针对 .NET 4.5 和 Windows 应用商店应用程序时，我们实际上会让您针对不同的东西进行构建，而不是针对低级平台（.NET 4、SL 4/5、Phone 7.x）。我们尝试将这两个视为相同，但下面的有限更改开始泄漏（例如 Timer 和 Reflection）。我们在这里介绍了其中的一些内容：http: [//channel9.msdn.com/Shows/Going+Deep/NET-45-David-Kean-and-Marcea-Trofin-Portable-Libraries](http://channel9.msdn.com/Shows/Going+Deep/NET-45-David-Kean-and-Marcea-Trofin-Portable-Libraries)。

我们将在未来的版本中解决这个问题。在那之前，您有几个解决方法：

1) 使用 Task.Delay 实现您自己的 Timer 版本，这是我们在内部使用的快速副本：

```
internal delegate void TimerCallback(object state);

internal sealed class Timer : CancellationTokenSource, IDisposable
{
    internal Timer(TimerCallback callback, object state, int dueTime, int period)
    {
        Contract.Assert(period == -1, "This stub implementation only supports dueTime.");
        Task.Delay(dueTime, Token).ContinueWith((t, s) =>
        {
            var tuple = (Tuple<TimerCallback, object>)s;
            tuple.Item1(tuple.Item2);
        }, Tuple.Create(callback, state), CancellationToken.None,
            TaskContinuationOptions.ExecuteSynchronously | TaskContinuationOptions.OnlyOnRanToCompletion,
            TaskScheduler.Default);
    }

    public new void Dispose() { base.Cancel(); }
} 
```

2) 将您的项目降级到 .NET 4.0 和 Windows Store 应用程序，这将使您能够访问 Timer。

3) 创建一个针对 .NET 4.0 和 Windows Store 应用程序的新项目，并将需要计时器的代码放入其中。然后从 .NET 4.5 和 Windows Store 应用程序项目中引用它。

作为旁注，我已经在 PclContrib 网站上为自己提交了一个工作项以添加计时器支持：[http](http://pclcontrib.codeplex.com/workitem/12513) ://pclcontrib.codeplex.com/workitem/12513 。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-21T17:21:23.277

根据 David Kean 的建议 #3，这是我的 hacky Timer 适配器 - 将其放入针对 .net 4.0 的 PCL 库中，并从 4.5 引用它：

```
 public class PCLTimer
    {
        private Timer _timer;

        private Action _action;

        public PCLTimer(Action action, TimeSpan dueTime, TimeSpan period)
        {
            _action = action;

            _timer = new Timer(PCLTimerCallback, null, dueTime, period);           
        }

        private void PCLTimerCallback(object state)
        {
            _action.Invoke();
        }

        public bool Change(TimeSpan dueTime, TimeSpan period)
        {
            return _timer.Change(dueTime, period);
        }
    } 
```

然后要使用它，您可以从 4.5 PCL 库中执行此操作：

```
 private void TimeEvent()
    {            
        //place your timer callback code here
    }

    public void SetupTimer()
    {            
        //set up timer to run every second
        PCLTimer _pageTimer = new PCLTimer(new Action(TimeEvent), TimeSpan.FromMilliseconds(-1), TimeSpan.FromSeconds(1));

        //timer starts one second from now
        _pageTimer.Change(TimeSpan.FromSeconds(1), TimeSpan.FromSeconds(1));

    } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-01-13T15:42:04.770

David Kean 建议 #1 的实施：

```
public delegate void TimerCallback(object state);

public sealed class Timer : CancellationTokenSource, IDisposable
{
    public Timer(TimerCallback callback, object state, int dueTime, int period)
    {
        Task.Delay(dueTime, Token).ContinueWith(async (t, s) =>
        {
            var tuple = (Tuple<TimerCallback, object>) s;

            while (true)
            {
                if (IsCancellationRequested)
                    break;
                Task.Run(() => tuple.Item1(tuple.Item2));
                await Task.Delay(period);
            }

        }, Tuple.Create(callback, state), CancellationToken.None,
            TaskContinuationOptions.ExecuteSynchronously | TaskContinuationOptions.OnlyOnRanToCompletion,
            TaskScheduler.Default);
    }

    public new void Dispose() { base.Cancel(); }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-05-09T14:27:02.960

I improved Ivan Leonenko answer by including a new parameter, which queue calls to you callback if the period is less than the callback run time. And replaced the legacy TimerCallback with an action. And finally, use our cancel token in the last delay, and used ConfigureAwait to increase concurrency, as the callback can be executed on any thread.

```
internal sealed class Timer : CancellationTokenSource
{
    internal Timer(Action<object> callback, object state, int millisecondsDueTime, int millisecondsPeriod, bool waitForCallbackBeforeNextPeriod = false)
    {
        //Contract.Assert(period == -1, "This stub implementation only supports dueTime.");

        Task.Delay(millisecondsDueTime, Token).ContinueWith(async (t, s) =>
        {
            var tuple = (Tuple<Action<object>, object>) s;

            while (!IsCancellationRequested)
            {
                if (waitForCallbackBeforeNextPeriod)
                    tuple.Item1(tuple.Item2);
                else
                    Task.Run(() => tuple.Item1(tuple.Item2));

                await Task.Delay(millisecondsPeriod, Token).ConfigureAwait(false);
            }

        }, Tuple.Create(callback, state), CancellationToken.None, TaskContinuationOptions.ExecuteSynchronously | TaskContinuationOptions.OnlyOnRanToCompletion, TaskScheduler.Default);
    }

    protected override void Dispose(bool disposing)
    {
        if(disposing)
            Cancel();

        base.Dispose(disposing);
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-07-16T18:49:09.867

您可以使用 PCL 库创建计时器接口，然后使用 W8S 计时器在第二个 W8S 库中创建该接口的实现。

然后您可以使用依赖注入将 W8S 库注入 PCL 类。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-01-21T02:59:33.267

我最终`Observable.Timer`来自 Reactive Extensions (Rx)。Rx 已经包含在项目中，因此额外的参考不是问题。

这是一个每秒触发的计时器：

```
IDisposable timer = Observable.Timer(TimeSpan.FromSeconds(1), TimeSpan.FromSeconds(1))
    .Subscribe(_ => /* your useful code here */);

// unsubscribe/stop when timer is no longer needed
timer.Dispose(); 
```

`System.Reactive.Linq.Observable`类在 PCL 友好的[`Rx-Linq`](https://www.nuget.org/packages/Rx-Linq/)NuGet 包中。

# struts2 - Struts2 复选框预选

> ID：12555052
> 
> 赞同：2
> 
> 时间：2012-09-23T18:28:11.673
> 
> 标签：struts2

我正在迭代器中创建复选框。下面是我的代码，

```
<s:iterator value="contacts" var="contact">
    <tr>
       <td>
        <s:checkbox name="selectContactsCheckBox" fieldValue="%{#contact.contactid}" value="%{defaultContacts.contains(contact.contactid)}" theme="simple"/>
       </td>
       <td>${contact.fullname}</td>
       <td>${contact.mobile}</td>
       <td>${contact.organization}</td>
       <td>${contact.department}</td>
    </tr>
</s:iterator> 
```

此代码创建复选框并且工作正常。但我想使用动作集合预先选择此复选框。

下面是我的动作类中的一个方法，

```
public List<String> getDefaultContacts() {
    return Arrays.asList(this.selectedContacts);
} 
```

假设如果我在列表中有 100 个联系人并且如果 getDefaultConatacs() 只返回 5 个字符串，那么我想选择这 5 个复选框

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T19:21:25.210

如果我使用下面的行（值属性检查联系人ID是否在列表中可用）

```
<s:checkbox name="selectContactsCheckBox" 
            fieldValue="%{contactid}"
            value="%{contactid in defaultContacts}" 
            theme="simple">
</s:checkbox> 
```

# spring - JPA 的 EntityManager 或 Hibernate 的 HibernateTemplate with Spring

> ID：12555055
> 
> 赞同：0
> 
> 时间：2012-09-23T18:28:30.003
> 
> 标签：spring, hibernate, jpa

我决定使用 Spring、Hibernate 和 Restlet 来创建 Web 服务。我对这三种技术都很陌生。我的问题是：我如何决定是使用 JPA`EntityManager`还是 Hibernate `HibernateTemplate`？

JPA 的 EntityManager 的代码片段：

```
protected EntityManager entityManager;

@PersistenceContext
public void setEngityManager(EntityManager entityManger) {
    this.entityManager = entityManager;
} 
```

Hibernate 的 HibernateTemplate 的代码片段：

```
private SessionFactory sessionFactory;
private HibernateTemplate hibernateTemplate;

@Autowired
public void setSessionFactory(SessionFactory sessionFactory) {
    this.sessionFactory = sessionFactory;
    this.hibernateTemplate = new HibernateTemplate(sessionFactory);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T18:31:20.803

如果你是喜欢 的人`interface-based-implementation`，那么 JPA 是接口定义，而 Hibernate 是实现之一。我们决定在我们的项目中使用 JPA 语义（有一个非常长期的计划，可能用类似且轻量级的东西来替换 Hibernate）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-01T13:20:33.993

如果`hibernate`以后还想坚持，那用不着`EntityManagerFactory`，可以继续用`SessionFactory`。并且只需使用基于 java 的配置或 xml 为此注入定义。它必须在`application context`. 但是将来如果您可能想转移到不同的 jpa 提供商，例如 toplink 等，那么您应该使用 EntityManagerFactory，因为它允许您从各种提供商那里获得实现。因为提供者实现了 jpa 规范。因此，将来您只需要在应用程序上下文中进行不同的配置，您就应该能够使用它。

# algorithm - 用于生成旋律的算法？

> ID：12555056
> 
> 赞同：1
> 
> 时间：2012-09-23T18:28:30.447
> 
> 标签：algorithm

我正在做一个小程序来生成随机旋律。到目前为止，我有一个带有频率的音符数组，程序从数组中选择一个随机元素并播放它的频率。问题是旋律“听起来很糟糕”：就好像你坐在钢琴前随机弹奏一样。我需要一种算法来生成旋律，包括频率和时间等等。我不需要任何复杂的东西，只需制作一个听起来不错的旋律。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T18:38:51.293

使用现有音乐（MIDI？）来训练马尔科夫模型或[马尔科夫链](http://en.wikipedia.org/wiki/Markov_chain) 。您可能希望将输入移调到相同的键，例如 C 大调、A 小调。音高*持续时间可能必须被编码（枚举）成一维 (x*7*5, or x*12*5) 。[x := 输入范围内的八度音阶数，5=持续时间，1 到 1/16th ] 循环和变化的额外奖励，但这会更难......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T18:31:39.540

如果您希望音乐“轻快”且从不不和谐，请使用五声音阶（即像弹钢琴的黑键）

例如：音高选择：

`C#,D#,F#,G# or A#`

音高范围：3 到 5 个八度音程（因为向上或向下八度音程基本上是您的基本频率的频率加倍或减半）

注意持续时间：

范围从`16th`到`Whole Note`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T22:46:54.957

其他人已经尝试过这个。您可能想阅读 Richard MacDuff 的文章“音乐和分形景观”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T18:31:31.280

尝试从相同的音阶演奏音符:) C 大调、D 小调左右;) 甚至是五声音阶。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-19T18:13:09.097

导入 java.io。*;
导入 javax.sound.sampled。*;
类我{
公共静态无效主（字符串[]参数）{
     int fij = 128；整数 tw=64；int fd=2048;
     整数秒=128；字符串 fo="Me.wav"; 诠释何=8；
     if(args.length==5){ fij=4*Integer.parseInt(args[0]);
          tw=4*Integer.parseInt(args[1]); fd=4*Integer.parseInt(args[2]);
          ho=4+Integer.parseInt(args[3]); fo=args[4];
     }          
     double[] pcm_datadrd = new double[44100*secs];
     双[] pcm_datadr = 新双[44100]；
     for (int i=0; i<pcm_datadr.length; i++) {
          pcm_datadr[i]=( 64*Math.sin((i/1837.5*(i*i/128))*Math.PI*2)/( 1+(Math.cos((4096) +64))+(i/256)) );
     }
     for(int x=0;x<(secs-1);x++){
     for (int i=0;i<pcm_datadr.length;i++) {
          pcm_datadrd[((int)(44100*x)+i)] = (double)
          ( 128*Math.sin((i/1837.5*(i*i/256))*Math.PI*2)/(1+(Math.cos((4096) +64))+((双）i/256）））；
          }     
     }
     字节[] pcm_data = 新字节[44100*secs];
     for (int i=0; i<pcm_data.length; i++) {
          double fup=1+(fij*i/pcm_data.length);
          pcm_data[i]=(byte)(pcm_datadrd[i]+(64*Math.sin((i/tw *fup* Math.cos(3+(i/fd))))+
          32*Math.sin(5+( i/ho*fd)*Math.cos(i/(fd+tw)))));
     }
     AudioFormat frmt = new AudioFormat(44100, 8, 1, true, true);
     AudioInputStream ais = new AudioInputStream(
          new ByteArrayInputStream(pcm_data), frmt, pcm_data.length / frmt.getFrameSize()
     );
     尝试 {
     AudioSystem.write(ais, AudioFileFormat.Type.WAVE, new File(fo));
     }catch(Exception e) { e.printStackTrace(); }
     }
}

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-01-19T17:33:50.367

> ABBA 'k vind't voor de kleintjes zielig die me laten MMA je, je vergeetk wat en huilt ook weet ik tranen

最好不要随机创建一个由随机音符组成的块 A 和 B 随机音符和做 (ABBA)+ 或 (AB)AB* 而是更好地应用量子理论的概念（自然界中的一切都是相互作用的，就像我们在这里看到的房子规则一样）在世界上的每一所房子里），正如你现在所理解的。

因此，就像一个元胞自动机，“生命游戏”，您可以每一步演奏您的“真实”音符，让“y 轴”表示音符编号和（请计算）音符的持续时间（沿'x轴'）

出于随机原因，此声音的示例：http: [//simple.ogena.net/Steel_Drum-Slap_Bas.mp3](http://simple.ogena.net/Steel_Drum-Slap_Bas.mp3) 来自生成的源： [http ://simple.ogena.net/Steel_Drum-Slap_Bas.mid](http://simple.ogena.net/Steel_Drum-Slap_Bas.mid)

# android - 使用 ADT 和 Android SDK 时的 Eclipse 编辑器问题

> ID：12555062
> 
> 赞同：-3
> 
> 时间：2012-09-23T18:29:16.790
> 
> 标签：android, eclipse

我希望你能忍受我和我的问题。如果有人能回答他们，我真的很感激。好吧，一切都在这里。

第一：我正在使用 Eclipse 3.6,2 helios，我正在通过 Lynda.com 视频学习 Andriod 开发。我被困在第2.4集。

第二：当我在可视化编辑器中时（您可以在 Res 文件夹 > 布局文件夹中访问它），我拖放按钮图标。

第三：这是问题开始的地方：

在 java 文件中，我尝试引用 UI 组件但不行。而不是得到
`Button b = findViewById(R.id.button);`

在java文件中我得到这个：

`Button b = findViewById(R.id.menu_settings);`

我也不能使用`setOnClickListener`方法。

我正在使用最新的 ADT 插件和 Android SDK。请帮忙，我真的很想学习Android开发。我也无法获得对 UI 组件的引用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T18:45:26.240

检查您在 Eclipse 中如何命名包以及它们在清单文件中的引用方式。例如，如果您的清单文件中有这个：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.mycompany.android.myapp"
  android:versionCode="3"
  android:configChanges="orientation|keyboardHidden|keyboard"
  android:versionName="1.0.2"> 
```

并且您在 com.mycompany.android.myapp.ui 包中有一个类，那么您可能必须导入 com.mycompany.android.myapp.R

换句话说，您可能有一个“根”包，并且该包中的类应该能够在没有导入的情况下访问 R 引用，但其他包必须导入它。此外，在您构建项目之前，R 文件中的新引用将不可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T20:29:03.910

在 Res>Layout>activity_main.xml

而不是图形布局更改选项卡到 activity_main.xml。

在 xml 代码中找到这个

```
<Button
    android:id="@+id/button1" ==> make sure id assigned
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Button" /> 
```

如果设置了 id，请尝试清理项目（Eclipse > Project > Clean ...）

并确保在你的java文件中你没有导入这个

```
import android.R; //delete this! 
```

那么你可以使用：

```
Button BT= (Button) findViewById(R.id.button1); 
```

# c++ - 在头文件中包含指令？

> ID：12555066
> 
> 赞同：3
> 
> 时间：2012-09-23T18:29:57.850
> 
> 标签：c++, include, c-preprocessor

> **可能重复：**
> [在 C++ 中应该将“包含”放在哪里](https://stackoverflow.com/questions/2297567/where-should-include-be-put-in-c)

`#include`显然，关于是否将指令放入 C++ 头文件（或者，作为替代方案，`#include`仅放入 cpp 文件），有两种“思想流派” 。有人说没问题，有人说只会出问题。有谁知道这个讨论是否已经得出结论什么是首选？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T18:31:22.003

我不知道任何关于此的思想流派。当需要它们时将它们放在标题中，否则转发声明并将它们放在`.cpp`需要它们的文件中。在不需要的地方包含标题没有任何好处。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T18:48:33.717

我发现有效的是遵循一些简单的规则：

*   标头应该是自给自足的，即，它们应声明需要为其命名的类，并为它们使用的任何定义包含标头。
*   标头应尽可能减少依赖关系，而不会违反前一点。

获得第一点是相当容易的：首先从实现它声明的源代码中包含标题。但是，将第二点完全正确并非易事，而且我认为它需要工具支持才能完全正确。但是，一些不必要的依赖项通常并没有那么糟糕。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-23T18:32:19.967

根据经验，只要需要对它们进行完整定义，就不会在标题中包含标题。大多数情况下，您在头文件中使用类的指针，因此在此处转发声明它们就可以了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-23T18:53:30.370

我认为这个问题很久以前就解决了：标题应该是自包含的（这不应该依赖于用户之前包含其他标题 - 这方面已经解决了很长时间，以至于有些人甚至不知道有对此进行了辩论，但您的*put 仅包含在 .cpp 中*似乎暗示了这一点）但很少（即，当声明足以实现自包含时，不应包含定义）。

自包含的原因是维护：如果一个头被修改并且现在依赖于新的东西，你必须跟踪它用于包含新依赖的所有地方。顺便说一句，确保自包含的标准技巧是在 .cpp 中首先包含为 .cpp 中定义的事物提供声明的标头。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-23T18:38:20.007

这些与其说是宗教学派，不如说是学派。实际上，这两种方法都有其优点和缺点，并且要使任何一种方法成功，都需要遵循某些实践。但是这些方法中只有一种会“扩展到”大型项目。

在标头中不包含标头的优点是编译速度更快。然而，这种优势并不来自只读取一次的标头，因为即使您在标头中包含标头，智能编译器也可以解决这个问题。速度优势来自于您只包含给定源文件严格必需的那些标头。另一个优点是，如果我们查看源文件，我们可以准确地看到它的依赖项是什么：头文件的平面列表清楚地向我们提供了这一点。

然而，这种做法很难维持，尤其是在有很多程序员的大型项目中。当您想使用 module 时，这很不方便`foo`，但您不能只是`#include "foo.h"`：您需要包含 35 个其他标头。

最终发生的事情是这样的：程序员不会浪费时间去发现他们只需要添加模块的确切的、最小的标题集`foo`。为了节省时间，他们将转到一些与他们正在处理的源文件类似的示例源文件，然后剪切并粘贴所有`#include`指令。然后他们将尝试编译它，如果它没有构建，那么他们将从`#include`其他地方剪切并粘贴更多指令，并重复此操作直到它工作。

最终结果是，您会一点一点地失去编译速度更快的优势，因为您的文件现在包含不必要的头文件。此外，`#include`指令列表不再显示真正的依赖关系。此外，当您现在进行增量编译时，由于这些错误的依赖关系，您编译的内容超出了必要的范围。

一旦每个源文件都包含几乎每个头文件，您还不如拥有一个`everything.h`包含所有头文件的大文件，然后`#include "everything.h"`在每个源文件中。

因此，这种仅包含特定标头的做法最好留给由少数开发人员仔细维护的小型项目，这些开发人员有足够的时间手动维护最小包含依赖项的道德，或者编写工具来寻找不必要的`#include`指令。

# javascript - 无法在 Firefox 中获取隐藏 div 的高度

> ID：12555067
> 
> 赞同：0
> 
> 时间：2012-09-23T18:29:58.783
> 
> 标签：javascript

我正在尝试使用 javascript 获取 Netscape 和 Firefox 中最初隐藏的 div 元素的高度（它在 IE 中运行良好）。我尝试使用 MyElement.scrollHeight、MyElement.offetHeight、MyElement.style.height 和许多不同的方法来设置元素最初可见、获取高度然后再次隐藏它。我一直得到 0 的值。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T18:39:28.610

如果我错了（我可能是），请纠正我，但通过一些研究，带有 display: none 的元素没有高度。

要获取高度，您需要取消隐藏它们，获取高度，然后重新隐藏它们。过去出现过类似的问题，如下所示：

[jQuery：高度（）/宽度（）和“显示：无”](https://stackoverflow.com/questions/3632120/jquery-height-width-and-displaynone)

[jQuery：获取 jQuery 中隐藏元素的高度](https://stackoverflow.com/questions/2345784/jquery-get-height-of-hidden-element-in-jquery)

（两个 jQuery 示例，但你明白了）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T18:40:01.527

Netscape 中的隐藏元素不可访问。

您可以使用屏幕外的 div 样式孔设置该位置。例如，将其移至左上角的 -9999。然后你可以访问它的属性，如高度和宽度。

您还可以看到该元素并获取您的属性并再次隐藏它，但这并不常见，因为您的元素将显示一点点，用户可能会觉得在屏幕上跳跃。
您应该通过将样式设置为“绝对”并将“顶部”设置为 -9999px 或更多（取决于您的项目高度）来定位它，然后使用 DOM 和您想要的任何东西来获取元素的高度和宽度......

# javascript - 后退按钮随机工作

> ID：12555071
> 
> 赞同：1
> 
> 时间：2012-09-23T18:30:26.933
> 
> 标签：javascript, android, cordova

我的 phonegap 应用程序基本上有两个“页面”，实际上只是一个 div，其内容由 innerHTML 更改。返回键是指在“主页”（div id= `num`）按下时退出应用程序，在第二页（div id=）按下时返回主页`readout`，以复制正常的android习惯。我定义了一个布尔值`home`来跟踪它在哪个页面上并`onBackKeyDown()`做不同的事情：

```
function onBackKeyDown() {
            if(home==true){
                navigator.notification.alert(
            'Bye!',  // message
            'Quitting',            // title
            'oops')
                navigator.app.exitApp();
            }
            else {
                resetAll();}
        } 
```

然而，页面上后退键的行为`readout`会根据特定功能`dispatch()`是否已运行而发生变化。如果尚未运行，则返回键将立即退出应用程序（不会触发`onBackKeyDown()`，因为我在该功能退出应用程序时添加了额外的警报）

`dispatch()`似乎与`home`后退键没有任何关系，所以我不知道问题出在哪里。`home`当我在萤火虫中尝试时，似乎一直都是正确的。这是`dispatch`：

```
function dispatch()
        {
            navigator.notification.vibrate(50);

            d= new Date();
            times[i]=d.getTime();

            if(i==0)
            {
                 document.getElementById('output').innerHTML = 'Calculating...';
                 document.getElementById('avDisTime').innerHTML ='Calculating...';
            }

            else
            {
                var avTime=getAverageTime(times);

                var throughput=passengers*3600000/avTime;

                document.getElementById('output').innerHTML = throughput.toFixed(0) + ' pph';

                document.getElementById('avDisTime').innerHTML =(avTime/1000).toFixed(0)+' seconds';
            }

            return false;
        } 
```

这[是整个页面](http://pastebin.com/1mUAsQDU)。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:47:56.627

问题可能是您在触发 onBackKeyDown() 函数时覆盖了默认的后退按钮行为。不管 dispatch() 函数有什么问题，尝试在 onBackKeyDown() 函数中添加这一行。

```
document.removeEventListener("backbutton", onBackKeyDown, false); 
```

它恢复了应用程序的默认后退按钮行为。

# error-handling - 捕获快递中的所有错误不起作用

> ID：12555074
> 
> 赞同：3
> 
> 时间：2012-09-23T18:30:45.353
> 
> 标签：error-handling, express

我想为所有未单独处理的错误提供一个 error.ejs 文件。

[当我从 mongoose user.save() http://expressjs.com/guide.html#error-handling](http://expressjs.com/guide.html#error-handling)收到重复键错误时，此代码不会执行任何操作

应用程序.js

```
app.use(function(err, req, res, next){
  res.status(500);
  res.render('error', { error: "Woops, we encountered an error..." });
}); 
```

路线/index.js

```
user.save(function(err){
    if ( err ) throw err;
}); 
```

下面的例子给了我这个错误： Caught exception: [ReferenceError: next is not defined]

```
user.save(function(err){
    if ( err ) next(err);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T11:56:28.807

你的片段

```
user.save(function(err){
    if ( err ) next(err);
}); 
```

大概是在具有功能（ req, res ）的路线内吗？

您需要做的是对该功能的“下一个”

```
function MyRoute( req, res, next ) {
  user.save(function(err){
    if ( err ) 
      return next(err);

    // carry on here doing whatever
  });
}

app.get('/some/route', MyRoute); 
```

# ckeditor - 在 Rails Admin 中使用 Cloudinary、Carrierwave、Ckeditor 时出现问题

> ID：12555075
> 
> 赞同：0
> 
> 时间：2012-09-23T18:31:17.740
> 
> 标签：ckeditor, carrierwave, rails-admin, cloudinary

我正在尝试将 Ckeditor 与 Rails Admin 一起使用，我在其中使用 Carrierwave 和云存储作为 Cloudinary。完成所有我可以看到的设置后，CKeditor 能够将文件保存在本地存储中，然后它会创建一个 Cloudinary URL，其中应该实际存储图像。但问题是图像没有从该本地文件夹上传到 Cloudinary，而我的简单文件上传工作正常，没有任何问题。

我在这里遇到的另一个问题是 - 当我使用 Cloudinary 时，存储名称应该是什么？至于文件和 Amazon S3，我们有文件和 s3 的名称。

请回复。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T16:40:35.783

Cloudinary 的 Ruby GEM 包含一个用于 CarrierWave 的插件，我们的许多客户都在使用该插件。我们不知道 Ckeditor 的特殊问题（但我们尚未对其进行测试）。

当您使用 Cloudinary 的 CarrierWave 插件时，只需添加`include Cloudinary::CarrierWave`到您的上传器类。它将 Cloudinary 定义为存储引擎和图像处理服务（两者都是基于云的）。只需在您的上传器类中**注释掉**该行。`storage :file`所有图像都将直接上传到 Cloudinary，所有转换后的版本都将使用 Cloudinary URL 生成。

请查看文档页面中的示例上传器代码：http: [//cloudinary.com/documentation/rails_integration#carrierwave_upload](http://cloudinary.com/documentation/rails_integration#carrierwave_upload)

如果问题仍然存在，如果您可以共享您的上传程序代码，我们会帮助您确保正确定义它，这将有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-08T19:29:03.693

我也有ckeditor的问题。编辑您`CkeditorAttachmentFileUploader`的外观与此类似：

```
class CkeditorAttachmentFileUploader < CarrierWave::Uploader::Base
  include Ckeditor::Backend::CarrierWave
  include Cloudinary::CarrierWave

  [:extract_content_type, :extract_size, :extract_dimensions].each do |method|
    define_method :"#{method}_with_cloudinary" do
      send(:"#{method}_without_cloudinary") if self.file.is_a?(CarrierWave::SanitizedFile)
      {}
    end
    alias_method :"#{method}_without_cloudinary", method
    alias_method method, :"#{method}_with_cloudinary"
  end

  def extension_white_list
    Ckeditor.attachment_file_types
  end
end 
```

之后，您会发现另一个错误。我发现在[Ckeditor::AssetResponse#asset_url](https://github.com/galetahub/ckeditor/blob/master/lib/ckeditor/asset_response.rb#L89) 方法中，`asset`对象没有重新加载，所以`asset.content_url`总是 nil 从而导致错误。我这样修复它：

```
class Ckeditor::Picture < Ckeditor::Asset
  ...
  def url_content
    url(:content) || begin
      if persisted?
        reload
        url(:content)
      end
    end
  end
end 
```

`Ckeditor::AttachmentFile`如果你有它，同样适用于课堂。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T02:04:22.050

确保删除对 CarrierWave.config.storage = :file 的所有引用

如果上传不起作用，则需要在几个地方执行此操作：

在 /config/initializers/carrierwave_init.rb 中删除所有引用：

```
config.storage = :file 
```

在您的上传者中删除和引用排序：

```
storage :file 
```

# javascript - 显示、隐藏、然后重新显示布局会中断事件

> ID：12555090
> 
> 赞同：7
> 
> 时间：2012-09-23T18:32:58.860
> 
> 标签：javascript, backbone.js, marionette, backbone-events, backbone-views

无法显示、隐藏和重新显示 Marionette 布局。我相信这个问题也适用于常规的 Backbone Views 和 Marionette ItemViews。

总之，我有一个父视图。初始化时，它会创建两个子布局，用作选项卡内容。问题是，当显示来自一个选项卡的选项卡内容时，会显示来自另一个选项卡的内容，当再次显示原始选项卡内容时，事件不再起作用。

子布局是在`initialize`父布局的函数中创建并重新使用的，因为当导航移回它们时需要保留它们的状态。

这是一个[示例应用程序](http://s3.amazonaws.com/bsldm/public_files/marionette-show-hide/index.html)，它演示了我在说什么：

[![在此处输入图像描述](../Images/967b3f3e1b4f4f45bd324f6181d38525.png)](http://s3.amazonaws.com/bsldm/public_files/marionette-show-hide/index.html)

这是显示损坏事件的视频：[视频链接](http://s3.amazonaws.com/bsldm/public_files/marionette-show-hide/files/so_question_marionette_tabs.swf)

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T22:16:15.343

问题是您没有创建子布局的新实例，而只是重新使用您在主布局中启动的那个。因此，当您更改您所在区域的内容时，事件将作为 Marionette 视图的 close() 函数的一部分解除绑定。

你应该像这样改变你的初始化函数：

```
initialize: function(){
    _.bindAll(this);
    // CREATE SUB LAYOUTS
   this.tab1Layout = B.tab1Layout;
   this.tab2Layout = B.tab2Layout;
}, 
```

并以这种方式调用布局：

```
// EVENT HANDLERS
on_show_tab_1_click: function(event){
    this.content.show(new this.tab1Layout());
},
on_show_tab_2_click: function(event){
    this.content.show(new this.tab2Layout());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T20:54:18.467

如果您不想在每次选项卡更改时重新初始化选项卡视图，您可以手动调用 view.delegateEvents() ：

```
// views[] is array of initialized tab views
// Swap from displaying views[0] to views[1]
currentTabIndex = 1
this.myRegion.show(views[currentTabIndex])
views[currentTabIndex].delegateEvents() 
```

为了保留状态，另一种选择是渲染两个选项卡并简单地隐藏非活动选项卡区域：

```
// Assume both regions have initialised views, tab2Region is hidden, 
// tab1Region is shown.
// Swap between tabs:
this.tab1Region.$el.hide()
this.tab2Region.$el.show() 
```

# c++ - 文件传输 - 数据包轮次

> ID：12555091
> 
> 赞同：1
> 
> 时间：2012-09-23T18:33:07.673
> 
> 标签：c++, sockets, networking, winsock, packet

我基本上使用的是一个 20,480 字节的缓冲区，它是一个数据包结构。这是结构：

```
struct PACKET
{
    DWORD Header;
    char data[20480];
    bool eof;
}; 
```

我正在做的是一次读取 20,480 字节的文件并发送它，直到所有文件都发送完毕。我正在对一个 3MB 的文件进行测试，发送了大约 150 轮。

这是代码：

```
PACKET sc;
sc.Header = 0xB;
ifstream file("test.pdf", ios::ate | ios::binary | ios::in);
    DWORD fileSize = file.tellg();
    file.seekg(0, ios::beg)

    int counter = 20480;
    int rounds = fileSize / 20480 + 1; 
```

和发送循环：

```
while (rounds != 0)
{
    sc.eof = false;

    file.read(sc.data, sizeof(sc.data));

    send(Slick.client, (char*)&sc, sizeof(sc), 0);

    file.seekg(counter + 1);
    counter = counter + 20480;

    rounds--;
    Sleep(1);

       if (rounds == 0) sc.eof = true;

    cout << "Left to send: " << rounds << endl;
}
file.close();
cout << "All data was sent!" << endl; 
```

我在另一边使用异步套接字，所以我的问题是有时它会收到 140 个数据包，有时会收到 130、147、148 等，并且文件总是损坏。我究竟做错了什么？

* * *

这是另一面：

```
case PACKET_FILE:
                    {
                        if (isOpen == false)
                        {
                            isOpen = true;
                            file.open("tester.pdf", ios::binary | ios::out | ios::app);
                            file.write(pack.data, sizeof(pack.data));
                        }
                        else
                        {
                            if (pack.eof == true)
                            {

                                file.write(pack.data, sizeof(pack.data));
                                file.close();
                                MessageBox(NULL, "File Received", "LOL", MB_OK);
                                break;
                            }
                                file.write(pack.data, sizeof(pack.data));
                        }
                        countz++;
                        char bue[10];
                        itoa(countz, bue, 10);
                        SendMessage(hlabelPackets, WM_SETTEXT, NULL, (LPARAM)(bue));
                        break;
                    } 
```

请帮忙，这没有意义...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T21:30:48.757

看起来问题在于套接字的设置。如果您使用 UDP，您将无法保证交付，并且它们不一定会按照您发送它们的顺序到达。

此外，即使到达文件末尾，您似乎也总是发送 20480 字节。这可能会导致接收端的文件最后出现垃圾。

# wcf - 创建 WCF 后无法定义端点

> ID：12555092
> 
> 赞同：0
> 
> 时间：2012-09-23T18:33:17.787
> 
> 标签：wcf, ssis

我想学习 WCF，所以我决定尝试创建一些使用它的应用程序。那么我想到的是我有 2 个数据库，我还想创建一个 SSIS 自定义数据源扩展，它调用 Web 服务并将数据（从一个数据库）传递到 SSIS ADO.Net 数据源（进入第二个数据库） .

现在我使用 SQL Server 创建了 2 个数据库，每个数据库都有一个表。然后我在 Visual Studio 中添加了一个连接，然后指定了服务器实例。（没有创建任何 .mdf 文件）。我在 Web.Config 文件中添加了这个 connectionString

```
 <connectionStrings>
    <add name="dbconnection" connectionString=" 
         Data Source = SARE-VAIO;
         Integrated Security = true; 
         Initial Catalog = Database1"/>
  </connectionStrings> 
```

当我编写基本上用数据填充 Database1 的服务时，我想定义端点，但是当我单击“编辑 WCF 配置”时，它显示“未定义服务”？我在这里做错了什么？我想创建一个无错误服务，以便能够将其用作 SSIS 包中的源。

PS。我的服务有一个 basicHttpsBinding

更新：我将 VS 2012 与 .Net Framework 4.5 一起使用

更新 2：我现在跳过了端点定义，继续测试和部署我的 WCF。当我调用该服务时，它说以下错误

```
 Failed to invoke the service. Possible causes: The service is offline or inaccessible; 
  the client-side configuration does not match the proxy; the existing proxy is invalid. 
  Refer to the stack trace for more detail. You can try to recover by starting a new proxy, 
  restoring to default configuration, or refreshing the service. 
```

这是我的 web.config 文件

```
 <?xml version="1.0"?>
  <configuration>
    <connectionStrings>
      <add name="dbconnection" connectionString="Data Source = SARE-VAIO; Integrated        Security = true; Initial Catalog = Database1"/>
    </connectionStrings>
    <appSettings>
      <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
    </appSettings>
    <system.web>
      <compilation debug="false" targetFramework="4.5" />
      <httpRuntime targetFramework="4.5"/>
    </system.web>
    <system.serviceModel>
      <behaviors>
        <serviceBehaviors>
          <behavior>
            <!-- To avoid disclosing metadata information, set the values below to false before deployment -->
            <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
            <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
            <serviceDebug includeExceptionDetailInFaults="false"/>
          </behavior>
        </serviceBehaviors>
      </behaviors>
      <protocolMapping>
          <add binding="basicHttpsBinding" scheme="https" />
      </protocolMapping>    
      <serviceHostingEnvironment aspNetCompatibilityEnabled="true"       multipleSiteBindingsEnabled="true" />
    </system.serviceModel>
    <system.webServer>
      <modules runAllManagedModulesForAllRequests="true"/>

      <directoryBrowse enabled="true"/>
    </system.webServer>

  </configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:00:31.200

回答您的问题

(1) 为什么 WCF 配置编辑器显示“未定义服务”错误：您的 web.config 没有明确定义任何服务和端点（注意：当您在 IIS 中托管它时，由于默认端点，您仍然会添加一些端点功能。但配置编辑器工具仅显示明确定义的端点）。这就是配置编辑器工具显示此消息的原因。但是您可以使用该工具来添加服务和端点。

(2) 部署服务后查看服务是否启动成功。您可以通过浏览元数据 URL 来执行此操作（您的配置已启用元数据）。确保您的服务 WSDL 帮助页面和 WSDL 显示正常。如果不先解决这个问题。

(3) 如果您在 IIS 中托管默认 https 端点后正在寻找它，请确保您的 IIS 配置了带有 SSL 证书的 https 绑定。

希望这可以帮助！

谢谢！

# javascript - 防止 html 输入类型文件显示打开的对话框

> ID：12555093
> 
> 赞同：3
> 
> 时间：2012-09-23T18:33:33.250
> 
> 标签：javascript, html, input-type-file

长话短说，我需要能够防止来自`input type="file"`. 换句话说，当用户单击“浏览”或“选择文件”时，我不想显示系统的打开对话框。我已经让替换对话框工作了，但系统的打开对话框仍然出现。

以下是我目前正在尝试实现的示例。（PS：我使用的是 Chrome 21）

```
<html>
<head>

<script type="text/javascript">
<!--

 file_onclick = function()
 {
  // Show custom dialog instead...
  event.stopPropagation(); // Doesn't work
  return false; // Neither does this
 };

//-->
</script>

</head>
<body>
  <input type="file" onclick="javascript: file_onclick();" />
</body>
</html> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T18:35:59.007

怎么样

```
<input type="file" onclick="return false" /> 
```

或者如果您需要该`file_onclick`功能

```
<html>
<head>

<script type="text/javascript">
<!--

 file_onclick = function()
 {
  // Show custom dialog instead...
  return false; 
 };

//-->
</script>

</head>
<body>
  <input type="file" onclick="return file_onclick();" />
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T21:06:56.630

知道了。我需要禁用标签，然后使用该`setTimeout`方法重新启用它。

```
<html>
<head>

<script type="text/javascript">
<!--

 file_onclick = function(o)
 {
  // Show custom dialog instead...

  o.disabled = true;
  setTimeout(function() { o.disabled = false; }, 1);
 };

//-->
</script>

</head>
<body>
  <input type="file" onclick="javascript: file_onclick(this);" />
</body>
</html> 
```

# mysql - Mysql防止插入不满足插入触发条件

> ID：12555094
> 
> 赞同：0
> 
> 时间：2012-09-23T18:33:36.450
> 
> 标签：mysql

我正在尝试设置触发器，以便在不满足条件时不会发生插入。

我认为下面是这样做的方法，但我不确定

我收到一个错误 /* SQL 错误 (1407): Bad SQLSTATE: '45000' */

谁能让我知道为什么我会收到此错误以及如果在 mysql 中不满足条件，我可以防止插入的最佳方法。

```
DELIMITER $$
SHOW WARNINGS$$
USE `warrington_central`$$ 

CREATE TRIGGER before_insert_image_comment_section_check
BEFORE INSERT ON image_comment FOR EACH ROW
BEGIN

 DECLARE error_msg varchar(255);
IF New.section != (SELECT id from section where section = "image")
    THEN SET    error_msg = "Cannot insert a comment into this section as it is the wrong section type";
    SIGNAL SQLSTATE '45000 'SET MESSAGE_TEXT = error_msg;

END IF;

END
$$

SHOW WARNINGS$$ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T18:38:46.597

SQLSTATE 必须是 5 个字符的字符串，除非之前使用[DECLARE ... CONDITION](http://dev.mysql.com/doc/refman/5.5/en/declare-condition.html)声明；

```
SIGNAL SQLSTATE '45000 'SET MESSAGE_TEXT = error_msg; 
```

您正在尝试将 SQLSTATE 设置为 6 个字符长的 '45000 '（注意空格）。修复间距，您应该不会再看到该消息（它也反映在您的错误消息中，但空格有点难以看到）

# nginx - ubuntu 12.04 上的 Chef build-essential 食谱出错

> ID：12555096
> 
> 赞同：4
> 
> 时间：2012-09-23T18:33:43.190
> 
> 标签：nginx, chef-infra

我正在尝试使用厨师配置 nginx/unicorn ruby​​ 应用程序服务器。我遇到的问题是依赖于 build-essential cookbook，它在运行时会导致输出：

```
================================================================================
Error executing action `install` on resource 'package[build-essential]'
================================================================================

Chef::Exceptions::Exec
----------------------
apt-get -q -y install build-essential=11.5ubuntu2 returned 100, expected 0 
```

我对厨师还是很陌生，不知道为什么会这样。有任何想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-23T18:35:10.643

我一发布这个消息，我就想到 apt 可能没有先更新。果然，我需要安装 apt cookbook 并在 nginx 之前的运行列表中。这解决了问题。

# .net - 查询 Wikipedia Web API

> ID：12555099
> 
> 赞同：2
> 
> 时间：2012-09-23T18:34:11.540
> 
> 标签：.net, json, json.net, wikipedia-api

这是我正在尝试的两个示例查询（在应用程序中，我使用 JSON 作为输出数据，但这有助于格式化）：

强制失败：[胡言乱语](http://en.wikipedia.org/w/api.php?action=query&prop=extracts&exintro=1&titles=ghjgjhvmjhmvjhmv&format=jsonfm)

尝试：[堆栈溢出](http://en.wikipedia.org/w/api.php?action=query&prop=extracts&exintro=1&titles=Stack%20Overflow&format=jsonfm)

运行它确实会拉回数据，并且我知道我正在寻找的区域在 jObject["query"]["pages"] 中。所以我注意到在失败中，页面名称/属性/无论是“-1”并且查询有效的内容都会为您提供该主题的唯一 ID。

这是我目前拥有的代码：

```
JObject excerpt = JObject.Parse(reader.ReadToEnd());
if ((string) excerpt["query"]["pages"] == "-1")
    return null;
result.Excerpt = (string)excerpt["query"]["pages"]["extract"]; 
```

它在 if 检查中失败了，我很确定它最终也会在 Excerpt 中失败。

1.  如何检查“页面”中的项目以查看它是否称为“-1”？

2.  事先不知道页面的pageid，如何进入查询成功的item？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:41:37.940

如果您在 JSON.NET 中有一个 JSON 字典，则可以将其视为属性的集合 ( `JProperty`)。您可以在该集合上使用 LINQ 方法`Single()`来从中获取唯一的属性。我认为检查页面是否确实丢失的更好方法是检查其`missing`属性（或者，检查它是否具有`excerpt`）。整个代码可能如下所示：

```
private static string GetExtract(string json)
{
    var excerpt = JObject.Parse(json);
    var pageProperty = (JProperty)excerpt["query"]["pages"].Single();

    var page = (JObject)pageProperty.Value;

    if (page["missing"] != null)
        return null;

    return (string)page["extract"];
} 
```

但就个人而言，在这种情况下，我更喜欢使用 XML 而不是 JSON。使用 XML，该方法看起来像（它比 JSON 版本长，但也更简单，我认为这是一个优点）：

```
private static string GetExtractXml(string xml)
{
    var document = XDocument.Parse(xml);

    var page = document
        .Element("api")
        .Element("query")
        .Element("pages")
        .Elements("page")
        .Single();

    if (page.Attribute("missing") != null)
        return null;

    return (string)page.Element("extract");
} 
```

# c# - 根据 propertyvaluechange 事件创建 undo/redo 命令

> ID：12555105
> 
> 赞同：1
> 
> 时间：2012-09-23T18:34:59.037
> 
> 标签：c#, propertygrid

我想创建`undo/redo command`可以为某些属性设置新/旧值的。我`propertygrid`用来操纵属性值。我尝试使用`PropertyValueChanged event`.

我的尝试：

```
private void pg_PropertyValueChanged(object s, PropertyValueChangedEventArgs e)
{
    var item = propertyGrid.SelectedObject;
    var propertyName = e.ChangedItem.PropertyDescriptor.Name;
    PropertyInfo pi = item.GetType().GetProperty(propertyName);

    var oldValue = e.OldValue;
    var newValue = propertyInfo.GetValue(item, null);

    //create command here
} 
```

如果属性的父级是`propertyGrid.SelectedObject`. 但如果我有课：

```
Class A {
    public Size Size {get;set;}
} 
```

它有时不起作用。示例：`propertyGrid.SelectedObject`is `Class A`, `propertyName`is `Width`, `Width`is not `Class A`property, it is `Size`property, 所以我得到了异常。

我该如何解决这个问题？如何创造`undo/redo command`这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T19:45:13.397

下面的工作吗？

```
private void pg_PropertyValueChanged(object s, PropertyValueChangedEventArgs e)
{
  var item = e.ChangedItem;
  var propertyName = item.PropertyDescriptor.Name;
  PropertyInfo pi = item.GetType().GetProperty(propertyName);

  var oldValue = e.OldValue;
  var newValue = propertyInfo.GetValue(item, null);

  //create command here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-08T00:38:52.923

在属性网格中查找数据的类名：

```
e.ChangedItem.PropertyDescriptor.ComponentType.Name 
```

然后记录包括类名在内的undo信息。因此，当用户撤消更改时，您知道需要撤消哪个类。

```
private void pg_PropertyValueChanged(object s, PropertyValueChangedEventArgs e)
{
        string className = e.ChangedItem.PropertyDescriptor.ComponentType.Name;
        string propertyName = e.ChangedItem.PropertyDescriptor.Name;

        var oldValue = e.OldValue;
        var newValue = e.ChangedItem.Value;

        //Record the above variables in your undo class
        //Something like
        RedoClass.AddToUndoList(className,propertyName,oldValue);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-29T11:29:07.640

通常这对我有用：

```
private void prg_PropertyValueChanged(object s, PropertyValueChangedEventArgs e)
{
    var item = e.ChangedItem;
    var propertyName = item.PropertyDescriptor.Name;
    PropertyInfo pi = prg.SelectedObject.GetType().GetProperty(propertyName);

    var oldValue = e.OldValue;
    pi.SetValue(prg.SelectedObject, oldValue, null);
} 
```

其中 prg 是 PropertyGrid 的名称

# android - Android 布局，有 4 个正方形，每个正方形内有一个按钮

> ID：12555106
> 
> 赞同：2
> 
> 时间：2012-09-23T18:35:01.970
> 
> 标签：android, android-layout

我想创建 4 个正方形，在每个正方形中我想创建一个小按钮。正方形必须可见并且必须有边框。

我知道如何将 4 个按钮创建为一个正方形，但我不知道如何在每个正方形周围创建一个边框。但我想独立于尺寸，现在按钮非常大......

我的例子

```
<?xml version="1.0" encoding="utf-8"?>
<ViewFlipper xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="fill_parent" android:layout_width="fill_parent">
    <RelativeLayout android:id="@+id/magaLoginLayout"
        android:layout_height="fill_parent" android:layout_width="fill_parent">
        <Button android:text="@+id/Button01" android:id="@+id/Button01"
            android:layout_width="160dip" android:layout_height="160dip" android:layout_marginTop="20dip"></Button>
        <Button android:text="@+id/Button03" android:layout_below="@+id/Button01" android:id="@+id/Button03"
            android:layout_alignLeft="@+id/Button01" android:layout_height="160dip" android:layout_width="160dip"></Button>
        <Button android:text="@+id/Button04" android:layout_below="@+id/Button01" android:id="@+id/Button04"
            android:layout_toRightOf="@+id/Button03" android:layout_height="160dip" android:layout_width="160dip"></Button>
        <Button android:text="@+id/Button02" android:id="@+id/Button02" android:layout_width="wrap_content"
            android:layout_toRightOf="@+id/Button01" android:layout_alignTop="@+id/Button01" android:layout_alignParentRight="true" android:layout_height="160dip"></Button>

</RelativeLayout> 
```

![在此处输入图像描述](../Images/0611b7dd481941bc1f1c42d862401e17.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-23T18:52:44.497

你想创建像这个截图一样的布局吗？

![这是我的名为 Call & Sms Blocker 的应用程序的布局。](../Images/ce32271134979d8bc5b86e3c83dcdfef.png)

此布局的代码：

1.  main_screen.xml

    ```
     <?xml version="1.0" encoding="utf-8"?>
      <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
           android:layout_width="match_parent"
           android:layout_height="match_parent"
           android:background="@drawable/bgimage2" >

       <TextView
         android:id="@+id/textView1"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_alignParentTop="true"
         android:layout_centerHorizontal="true"
         android:layout_marginTop="29dp"
         android:text="Call & SMS Blocker" 
         android:textAppearance="?android:attr/textAppearanceLarge"
         android:textSize="40dp"
         android:textStyle="bold" /> 

      <Button 
       android:id="@+id/blocked_sms"
       android:layout_width="162dp" 
       android:layout_height="162dp"
       android:layout_marginLeft="50dp"
       android:layout_marginTop="120dp"
       android:background="@drawable/buttoneffects" 
       android:focusable="true" 
       android:textColor="#000000" 
       android:textStyle="bold" /> 

     <ImageButton
      android:id="@+id/imagebutton1" 
      style="?android:attr/buttonStyleSmall" 
      android:layout_width="50dp" 
      android:layout_height="50dp"
      android:layout_alignTop="@+id/blocked_sms" 
      android:layout_centerHorizontal="true" 
      android:layout_marginTop="136dp" 
      android:background="@drawable/buttoneffectpower" /> 

      <Button 
         android:id="@+id/blocked_calls"
         android:layout_width="162dp" 
         android:layout_height="162dp" 
         android:layout_alignBaseline="@+id/blocked_sms"
         android:layout_alignBottom="@+id/blocked_sms"
         android:layout_alignParentRight="true" 
         android:layout_marginRight="50dp"
         android:background="@drawable/buttoneffectssecond" 
         android:focusable="true" android:text="Blocked Calls"
         android:textColor="#000000" 
         android:textStyle="bold" /> 

      <Button 
         android:id="@+id/settings" 
         android:layout_width="162dp" 
         android:layout_height="162dp" 
         android:layout_alignLeft="@+id/blocked_calls"
         android:layout_below="@+id/imagebutton1" 
         android:layout_marginRight="50dp"
         android:background="@drawable/buttoneffectfourth" 
         android:focusable="true" android:text="Settings" 
         android:textColor="#000000" android:textStyle="bold" /> 

     <Button 
      android:id="@+id/blacklist" 
      android:layout_width="162dp" 
      android:layout_height="162dp" 
      android:layout_alignBaseline="@+id/settings"
       android:layout_alignBottom="@+id/settings" 
      android:layout_marginLeft="50dp" 
       android:layout_toLeftOf="@+id/imagebutton1"
      android:background="@drawable/buttoneffectthird" 
      android:focusable="true" 
      android:text="Blacklist" 
      android:textColor="#000000" 
      android:textStyle="bold" /> 

      <Button 
        android:id="@+id/help" 
        android:layout_width="150dp" 
        android:layout_height="70dp" 
        android:layout_alignLeft="@+id/blocked_sms"
     android:layout_alignParentBottom="true" 
     android:layout_marginBottom="69dp"
     android:background="@drawable/buttoneffectsimple" 
     android:focusable="true" 
     android:text="Help" 
     android:textColor="#000000" 
     android:textStyle="bold" /> 

       <Button 
      android:id="@+id/block_last_number" 
      android:layout_width="330dp" 
      android:layout_height="70dp" 
      android:layout_above="@+id/help" 
      android:layout_alignLeft="@+id/help" 
      android:layout_alignRight="@+id/settings" 
      android:layout_marginBottom="27dp"
      android:background="@drawable/buttoneffectsimple" 
      android:focusable="true" 
      android:text="Block Last Number" 
      android:textColor="#000000" 
      android:textStyle="bold" /> 

       <Button 
     android:id="@+id/aboutus" 
     android:layout_width="150dp" 
     android:layout_height="70dp" 
     android:layout_alignBaseline="@+id/help" 
     android:layout_alignBottom="@+id/help"
     android:layout_alignRight="@+id/block_last_number"
     android:background="@drawable/buttoneffectsimple" 
     android:focusable="true" 
     android:text="About Us" 
     android:textColor="#000000" 
     android:textStyle="bold" /> 

    </RelativeLayout> 
    ```

按钮效果代码（xml文件布局）：

```
 <Selector>
        <item android:drawable="@drawable/blockedsms"><shape>
        <solid android:color="#fff" />

        <stroke android:width="1px" android:color="#444" />

        <corners android:radius="6dp" />

        <gradient android:angle="270" android:endColor="#10000000"
           android:startColor="#10FFFFFF" />

        <corners android:bottomRightRadius="50dp" />
    </shape></item>

       </selector> 
```

现在在其他 xml 按钮效果布局中，您必须更改

```
 <corners android:bottomLeftRadius 
      <corners android:topRightRadius
      <corners android:topLeftRadius

      and so on...... 
```

希望！这会有所帮助。干杯！！！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-23T19:35:20.093

由于对您问题的评论似乎回答了边框部分，因此这是对布局部分的回答：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TableRow
        android:id="@+id/TableRow01"
        android:layout_width="wrap_content"
        android:layout_height="0dp"
        android:layout_weight="1" >

        <Button
            android:id="@+id/Button02"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_margin="20dp"
            android:layout_weight="1"
            android:text="Button" />

        <Button
            android:id="@+id/Button01"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_margin="20dp"
            android:layout_weight="1"
            android:text="Button" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="0dp"
        android:layout_weight="1" >

        <Button
            android:id="@+id/button2"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_margin="20dp"
            android:layout_weight="1"
            android:text="Button" />

        <Button
            android:id="@+id/button1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_margin="20dp"
            android:layout_weight="1"
            android:text="Button" />
    </TableRow>

</TableLayout> 
```

这种布局将独立于屏幕的大小以及它是处于横向还是纵向模式。在按钮周围定义自己的边距；-)

要使用评论中的边框，只需添加：

```
android:background="@drawable/back" 
```

到按钮。back 是您创建的形状的名称。

# python - python中的多元线性回归而不拟合原点？

> ID：12555107
> 
> 赞同：0
> 
> 时间：2012-09-23T18:35:02.707
> 
> 标签：python, numpy, regression

[我在http://rosettacode.org/wiki/Multiple_regression#Python](http://rosettacode.org/wiki/Multiple_regression#Python)上找到了这段代码，它在 python 中进行了多元线性回归。以下代码中的打印 b 为您提供 x1、...、xN 的系数。但是，此代码通过原点拟合线（即生成的模型不包括常数）。

我想做的只是完全相同的事情，除了我不想通过原点拟合线，我需要生成模型中的常数。

任何想法，如果这是一个小的修改来做到这一点？我已经搜索并找到了大量关于 python 中的多重回归的文档，除了它们对于我需要的内容来说冗长且过于复杂。这段代码完美无缺，除了我只需要一个适合截距而不是原点的模型。

```
import numpy as np
from numpy.random import random

n=100
k=10
y = np.mat(random((1,n)))
X = np.mat(random((k,n)))

b = y * X.T * np.linalg.inv(X*X.T)
print(b) 
```

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T19:26:21.630

您只需要在 X 中添加一行全为 1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T19:11:57.897

无论如何，也许更稳定的方法是使用最小二乘算法。这也可以在几行中在 numpy 中完成。阅读[有关 numpy.linalg.lstsq 的文档](http://docs.scipy.org/doc/numpy/reference/generated/numpy.linalg.lstsq.html)。

在这里您可以找到一个示例实现：

[http://glowingpython.blogspot.de/2012/03/linear-regression-with-numpy.html](http://glowingpython.blogspot.de/2012/03/linear-regression-with-numpy.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T02:42:39.763

你写出来的`b = y * X.T * np.linalg.inv(X * X.T)`，是正规方程的解，它给出了与多线性模型的最小二乘拟合。swang 的回答是正确的（以及 EMS 的详细说明）——您需要在 X 中添加一行 1。如果您想了解它为什么在理论上有效，请记住您正在发现`b_i`这样

```
y_j = sum_i b_i x_{ij}. 
```

通过添加一行 1，您正在设置`x_{(k+1)j} = 1`all `j`，这意味着您正在找到 b_i 使得：

```
y_j = (sum_i b_i x_{ij}) + b_{k+1} 
```

因为`k+1`st`x_ij`项总是等于 1。因此，`b_{k+1}`是您的截距项。

# shell - awk 和 sed 文本操作（从特定组中提取大多数负值）

> ID：12555113
> 
> 赞同：1
> 
> 时间：2012-09-23T18:35:17.843
> 
> 标签：shell, sed, awk

我确实有需要在 awk、sed 和 shell 中解决的文本操作问题。
我的文字如下所示：

```
>Sample_1
    100                                                            101
    aaattattacaaaaataattacaaattattacaaaaagaattattacaaaaagaattacaaaa
-1.60   .(((((((.....)))))))...........................................  []
>Sample_2
    1                                35
    aattattacaaaaagaattattacaaaaagaatta
0.00    ...................................  _
>Sample_3
    1                                     123
    gctcacacctgtaatcccagcactttgggaggctgagg
-27.80  ((((.....))))......((((((.(((...))))))).)[][][[][]]
-26.40  (((((.((...(((((..((((((....)).........  [[][]][]
-25.80  ((((.....)))).....((((((...............  [][][][[][]]
    123                                  145
    ctgaggcaggcagatcacgaggtcacgagatcaa
-26.20  (((.....))))))  [][][[][]]
-25.90  ....((((..((....))  [][[][]]
-25.70  ..(((..((....))..(())  [[][]][[][]]
    145                                 256
    gtaatcccagcactttgggaggctgaggcaggcaga
0.00    ...........................................  _
    256                                 342
-25.00  ..((....((((.....((((((...)))....))...  [[][]]
-24.00  ..((.((((.((((())...  [[][][]]
-23.70  .((((((...(((((..((..  [[][]][] 
```

我想要：

1.  提取样品名称 ( `>Sample_1`);
2.  提取样本名称之后的数值（它是 0 或负值）；
3.  从负值组（例如`-27.80;-26.40;-25.80`）中提取最先出现的数字（它是最负值）。

完美的输出如下所示：

```
>Sample_1  
-1.60  
>Sample_2  
0.00  
>Sample_3  
-27.80  
-26.20  
0.00  
-25.00 
```

我尝试在 awk 打印 $1、grepping '>'、0 & 负值时执行此操作，但无法将列分成组 & 并提取最负值。

```
awk '{print $1}' file | egrep -i '>|0.00|-' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T19:12:59.003

`sed`你用and标记了你的问题`awk`，但如果你对 Perl 没问题，你可以写：

```
#!/usr/bin/perl -w

use warnings;
use strict;

my $min = undef;

while(<>)
{
  if(m/^(-?\d+\.\d+)/)
  {
    if(! defined($min) || $1 < $min)
      { $min = $1; }
  }
  else
  {
    if(defined $min)
    {
      print "$min\n";
      $min = undef;
    }
    if(m/^>/)
      { print; }
  }
}

if(defined $min)
  { print "$min\n"; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T19:52:32.583

```
awk '/^[0-]/ && new_group {print $1} {new_group = (/^[ \t]/)} /^>/' file 
```

# android - android gridview 单元格大小

> ID：12555116
> 
> 赞同：2
> 
> 时间：2012-09-23T18:35:33.693
> 
> 标签：android, listview, gridview, adapter

在我的 gridview 中，所有单元格最初呈现为矩形，但第二次查看时它们是方形的。

我必须有逻辑才能使它们成方形，但我希望它们在第一次加载时是方形的

我的问题是我不明白为什么视图最初是矩形或任何特定比例！

我的 XML 文件都设置为填充父级，我什至放入了一个方形占位符图像，试图强制视图呈现为方形

有什么关于gridview的我应该知道的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:02:52.763

答案是在 gridview 单元格中扩展我的 ImageView，并`@Override`在`onMeasure`那里动态生成正方形比例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T20:10:08.723

1.  创建一个自定义数组适配器。（java）

请参阅（[在带有标题的图像列表中显示图形而不是字符串](https://stackoverflow.com/questions/12531991/showing-graphical-instead-of-strings-in-an-imagelist-with-title/)）

2.  在自定义数组 adpater xml 文件（单元格）中编写如下内容：

    ```
    <?xml version="1.0" encoding="utf-8"?>
      <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="50dp"
        android:layout_height="50dp" > 
        <ImageView
          android:id="@+id/iv_caarow"
          android:src="@drawable/icon"
          android:layout_width="match_parent"
          android:layout_height="match_parent" />
      </RelativeLayout> 
    ```

android:layout_width="50dp"，你可以像这样设置单元格大小。

# java - 如何设置 Google 日历 Java 应用程序

> ID：12555117
> 
> 赞同：4
> 
> 时间：2012-09-23T18:35:34.930
> 
> 标签：java, jar, classpath, google-calendar-api

我正在按照 Google 的分步[配置说明](https://developers.google.com/google-apps/calendar/instantiate)进行操作，但由于某种原因，我找不到他们要求我导入的一些包。我的应用程序无法找到的软件包是（或我的 IDE 抱怨的行）：

```
import com.google.api.client.auth.oauth2.draft10.AccessTokenResponse;
import com.google.api.client.googleapis.auth.oauth2.draft10.GoogleAccessProtectedResource;
import com.google.api.client.googleapis.auth.oauth2.draft10.GoogleAccessTokenRequest.GoogleAuthorizationCodeGrant;
import com.google.api.client.googleapis.auth.oauth2.draft10.GoogleAuthorizationRequestUrl; 
```

我似乎找不到装这些的罐子。我的类路径包含：

```
//The Google Calendar Client API:
google-api-services-calendar-v3-rev16-1.8.0-beta.jar

//And of course the Google API Core:
commons-logging-1.1.1.jar
google-api-client-1.11.0-beta.jar
google-api-client-1.11.0-beta.jar.properties
google-api-client-android-1.11.0-beta.jar
google-api-client-android-1.11.0-beta.jar.properties
google-api-client-android2-1.11.0-beta.jar
google-api-client-android2-1.11.0-beta.jar.properties
google-api-client-appengine-1.11.0-beta.jar
google-api-client-java6-1.11.0-beta.jar
google-http-client-1.11.0-beta.jar
google-http-client-1.11.0-beta.jar.properties
google-http-client-android-1.11.0-beta.jar
google-http-client-android-1.11.0-beta.jar.properties
google-http-client-android2-1.11.0-beta.jar
google-http-client-android2-1.11.0-beta.jar.properties
google-http-client-android3-1.11.0-beta.jar
google-http-client-android3-1.11.0-beta.jar.properties
google-http-client-appengine-1.11.0-beta.jar
google-http-client-gson-1.11.0-beta.jar
google-http-client-gson-1.11.0-beta.jar.properties
google-http-client-jackson-1.11.0-beta.jar
google-http-client-jackson-1.11.0-beta.jar.properties
google-http-client-jackson2-1.11.0-beta.jar
google-http-client-jackson2-1.11.0-beta.jar.properties
google-oauth-client-1.11.0-beta.jar
google-oauth-client-1.11.0-beta.jar.properties
google-oauth-client-appengine-1.11.0-beta.jar
google-oauth-client-java6-1.11.0-beta.jar
google-oauth-client-jetty-1.11.0-beta.jar
google-oauth-client-servlet-1.11.0-beta.jar
gson-2.1.jar
gson-2.1.jar.properties
guava-11.0.1.jar
guava-11.0.1.jar.properties
httpclient-4.0.3.jar
httpcore-4.0.1.jar
jackson-core-2.0.5.jar
jackson-core-2.0.5.jar.properties
jackson-core-asl-1.9.9.jar
jackson-core-asl-1.9.9.jar.properties
jdo2-api-2.3-eb.jar
jetty-6.1.26.jar
jetty-util-6.1.26.jar
jsr305-1.3.9.jar
transaction-api-1.1.jar
xpp3-1.1.4c.jar 
```

我不确定我缺少什么，但我需要这些库来继续本教程。如果需要更多信息，我很乐意提供。我是 Google Calendar API 的新手。任何帮助表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-17T09:54:12.297

遗憾的是，截至目前，Google 尚未更新[Java 配置源代码](https://developers.google.com/google-apps/calendar/instantiate)。您不需要这些类，正如其他人在评论中指出的那样，它们已被弃用。

将“draft10”进口替换为：

```
import com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeFlow;
import com.google.api.client.googleapis.auth.oauth2.GoogleCredential;
import com.google.api.client.googleapis.auth.oauth2.GoogleTokenResponse;
import com.google.api.services.calendar.CalendarScopes; 
```

然后，将授权代码（从注释“Step 1: Authorize -->”开始）替换为：

```
GoogleAuthorizationCodeFlow flow = new GoogleAuthorizationCodeFlow.Builder(
                httpTransport, jsonFactory, clientId, clientSecret,
            Arrays.asList(CalendarScopes.CALENDAR)).setAccessType("online")
                .setApprovalPrompt("auto").build();

String url = flow.newAuthorizationUrl().setRedirectUri(redirectUrl).build();
System.out.println("Please open the following URL in your browser then type the authorization code:");

System.out.println("  " + url);
BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
String code = br.readLine();

GoogleTokenResponse response = flow.newTokenRequest(code)
                .setRedirectUri(redirectUrl).execute();
GoogleCredential credential = new GoogleCredential()
                .setFromTokenResponse(response);

// Create a new authorized API client
Calendar service = new Calendar.Builder(httpTransport, jsonFactory,
                credential).build(); 
```

我遇到了同样的问题，发现[驱动器示例代码](https://developers.google.com/drive/v3/web/quickstart/java#step_3_set_up_the_sample)是最新的。我猜到了我的方式，并使它工作。[此处](http://code.google.com/p/google-api-java-client/wiki/OAuth2#Authorization_Code_Flow)描述了“授权代码流程” 。

# php - $.post 数据没有被发送或接收？

> ID：12555122
> 
> 赞同：-1
> 
> 时间：2012-09-23T18:36:07.650
> 
> 标签：php, jquery

每当我加载我的外部 PHP 页面 (loadTextBox.php) 时，我的变量 $verb_value 永远不会被设置（总是命中死线）。这是否意味着我的 JQuery $.post 没有正确发送数据或我的外部 PHP 页面没有正确接收数据？有什么想法可以解决这个问题吗？**我知道这很容易发生 SQL 注入，但稍后我将通过使用白名单来关注这一点。**

主索引页面片段：

```
function loadDoc() 
{
$(document).on('change', '#verb', function() 
    {
        var val = this.value;
        $.post("loadTextBox.php", {verb_value: val}, function(data) 
        {
            $("#textbox").val(data.first);
            $("#textbox2").val(data.second);
            $("#textbox3").val(data.third);
            $("#textbox4").val(data.fourth);
            $("#textbox5").val(data.fifth);
            $("#textbox6").val(data.sixth);
        }, "json");
    });
} 
```

loadTextBox.php 片段：

```
$file_absolute = "---Placeholder for correct file path---";
include_once($file_absolute);
$mysql = new mysqli($db_host, $db_username, $db_password, $db_name);
$verb_value = $_POST["verb_value"];

if(!$verb_value)
  die("The value was not set"); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-23T21:07:10.400

解决方案非常简单。将“更改”一词更改为“单击”可以使一切正常运行。

# php - 有没有办法在使用 now() 更新时间戳后返回时间戳

> ID：12555123
> 
> 赞同：0
> 
> 时间：2012-09-23T18:36:28.730
> 
> 标签：php, mysql

我有这样的查询：

```
UPDATE orders SET order_state = $state_id, order_confirmed = now() WHERE order_id = $id LIMIT 1 
```

我只是想知道 php 或 sql 中是否有一个函数返回更新的时间戳，类似于插入 id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T18:39:34.333

怎么样

```
SELECT now() FROM orders LIMIT 1 
```

或者

```
SELECT now() FROM dual 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T18:41:42.677

为避免第二次查询，请使用 php`DateTime Object`并格式化它，而不是 Mysql 的`NOW()`

```
$now = new DateTime;
    UPDATE orders SET order_state = $state_id, order_confirmed = $now->format('Y-m-d H:i:s') WHERE order_id = $id LIMIT 1 
```

# c - 在 C 中存储变量

> ID：12555125
> 
> 赞同：0
> 
> 时间：2012-09-23T18:36:36.927
> 
> 标签：c, variables, types, char, int

我在 C 中的基本概念方面遇到了一些挑战。非常有必要提供帮助。我继续并用代码的解释以及我试图在那里提出的问题对代码进行了注释。

```
void main (void)
{
  printf("%x", (unsigned)((char) (0x0FF))); //I want to store just 0xFF;
  /* Purpose of the next if-statement is to check if the unsigned char which is 255
   * be the same as the unsigned int which is also 255\. How come the console doesn't print
   * out "sup"? Ideally it is supposed to print "sup" since 0xFF==0x000000FF.
   */
  if(((unsigned)(char) (0x0FF))==((int)(0x000000FF))) 
     printf("%s","sup");
} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-23T18:40:13.793

你把括号弄错了，

```
if(((unsigned)(char) (0x0FF))==((int)(0x000000FF))) 
```

对左操作数执行两次强制转换，首先是`char`，通常^((1))导致 -1，然后将该值强制转换为`unsigned int`，通常^((2))导致 2^32-1 = 4294967295。

^((1))如果`char`是有符号的，8 位宽，使用二进制补码，并且只取最低有效字节即可完成转换，这与大多数托管实现的情况一样。如果`char`是无符号的，或宽于 8 位，则结果将为 255。

^((2))如果转换为`char`-1 并且`unsigned int`是 32 位宽。

# php - urlencode 和 rawurlencode 有什么区别？

> ID：12555128
> 
> 赞同：9
> 
> 时间：2012-09-23T18:37:08.273
> 
> 标签：php, security

我阅读了参考问题[urlencode vs rawurlencode?](https://stackoverflow.com/questions/996139/php-urlencode-vs-rawurlencode) 顺便说一句，我应该使用`rawurlencode`

例如

> 如果与其他系统的互操作性很重要，那么似乎 rawurlencode 是要走的路。

但是当时为什么`urlencode`发明呢？这是否意味着这个功能没有用？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-23T18:48:47.293

这取决于你追求什么。它们之间的主要区别当然是它们编码的标准，还有空格。

`urlencode`编码方式与编码表单数据的方式相同

`urlencode`将空格编码为`+`符号，同时`rawurlencode`将它们编码为`%20`.

因此，在处理表单数据时，最好使用 urlencode（因为表单也将空格编码为 + 符号）。否则，我认为 rawurlencode 是一个更明智的选择。

例如，您可能想模仿通过 URL 提交的表单数据，您可以使用 urlencode。

# twitter - Bower、Grunt 和 zsh：找不到命令：

> ID：12555129
> 
> 赞同：20
> 
> 时间：2012-09-23T18:37:15.823
> 
> 标签：twitter, zsh, npm, gruntjs

我已经安装了 Grunt & Bower 并且我正在使用 ZSH。

当我输入`bower --help`或`grunt anything`我得到`zsh: command not found: bower`或`zsh: command not found: grunt`我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-08T16:51:53.527

添加`/usr/local/share/npm/bin/`到您的`$PATH environment`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-09-06T16:21:38.413

我无法让上述工作。问题是我刚刚重新安装了我的 Mac 并忘记重新安装 grunt。

您可以通过返回 bash`bash -l`并运行`grunt`.

如果 grunt 抛出同样的错误，你可以通过运行安装 grunt：

```
sudo npm install -g grunt-cli 
```

运行`zsh`以返回 zshell。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-29T05:47:24.657

安装的时候是全局安装的吗？

```
npm install -g bower 
```

试试看。如果没有，也尝试添加 sudo

```
sudo npm install -g bower 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-04T09:04:39.167

当您安装 grunt (bower) 时，终端会告诉您目录。对于使用 ZSH shell 的用户，请将其添加到 .zshrc：

```
export PATH=/usr/you/directory/npm/bin:$PATH, 
```

我发现它使用：

```
/lib/node_modules
export PATH=/usr/lib/node_modules/npm/bin:$PATH 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-10T23:16:39.527

我用`yarn`而不是`npm`：

```
yarn add grunt grunt-cli
yarn grunt 
```

它对我有用。希望它会帮助别人:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-08T08:15:40.690

如果您使用的是 GNOME 终端（Ubuntu Unity 和 Gnome 中的默认设置），请尝试[https://askubuntu.com/questions/279180/nvm-command-not-found-issue](https://askubuntu.com/questions/279180/nvm-command-not-found-issue)的答案。

# php - 如何使用 Shell 将 GET 变量传递给 php 文件？

> ID：12555137
> 
> 赞同：3
> 
> 时间：2012-09-23T18:39:05.747
> 
> 标签：php, shell

> **可能重复：**
> [PHP 在 linux 命令提示符下传递 $_GET](https://stackoverflow.com/questions/4186392/php-passing-get-in-linux-command-prompt)

我想用 Shell 脚本执行 php 文件，但我不知道如何传递 GET 变量。

此脚本“php script.php?var=data”不起作用，因为 Shell 找不到文件“script.php?var=data”。

那么，你知道我如何传递我的变量吗？如果真的不可能使用 GET 变量，我可以通过其他方式传递变量并在我的 php 脚本中使用它吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-23T18:43:49.333

如果您通过命令行（例如`php your_script.php`）执行脚本，您将无法使用这些`$_GET`参数，正如您所遇到的那样。

但是，您可以使用 PHP 的 CLI，它可以为您提供[`$argv`](http://php.net/manual/en/reserved.variables.argv.php)数组。

要使用它，您将像这样调用您的脚本：

```
php your_script.php variable1 "variable #2" 
```

在您的脚本中，您可以通过以下方式访问变量：

```
<?php

$variable1 = $argv[1];
$variable2 = $argv[2];

?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T19:38:50.530

我的想法是编写某种包装脚本来提供给 /usr/bin/php 并给出一串参数以从中获取数据。毫无疑问，这是一个 hack，可能不是一个好的，但它应该可以完成工作。

```
<?php
/** Wrapper.php
 **
 ** Description: Adds the $_GET hash to a shell-ran PHP script
 **
 ** Usage:       $ php Wrapper.php <yourscript.php> arg1=val1 arg2=val2 ...
**/

//Grab the filenames from the argument list
$scriptWrapperFilename = array_shift($argv); // argv[0]
$scriptToRunFilename = array_shift($argv); // argv[1]

// Set some restrictions
if (php_sapi_name() !== "cli")
    die(" * This should only be ran from the shell prompt!\n");

// define the $_GET hash in global scope
$_GET;

// walk the rest and pack the $_GET hash
foreach ($argv as $arg) {
    // drop the argument if it's not a key/val pair
    if(strpos($arg, "=") === false)
        continue;

    list($key, $value) = split("=", $arg);

    // pack the $_GET variable
    $_GET[$key] = $arg;
}

// get and require the PHP file we're trying to run
if (is_file($scriptToRunFilename))
    require_once $scriptToRunFilename;
else
    die(" * Could not open `$scriptToRunFilename' for inclusion.\n");

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T18:45:10.660

PHP CLI 采用命令结构中的变量，例如：

```
php woop.php --path=/home/meow/cat.avi 
```

然后，您可以使用[http://php.net/manual/en/function.getopt.php](http://php.net/manual/en/function.getopt.php)之类的东西在 PHP 脚本中获取该选项：

```
getopt('path') 
```

或者您可以直接获取它们 form `argv`。

作为@GBD 所说的替代方案，您也可以使用 bash 脚本来获取您网站的页面。

# php - SplTempFileObject 和 imagick

> ID：12555139
> 
> 赞同：0
> 
> 时间：2012-09-23T18:39:16.017
> 
> 标签：php, imagick

我正在使用 MySQL 数据库来保存一些字体。我需要使用自定义字体系列文本创建图像。我正在使用 SplTempFileObject 处理 setFont 方法，但这是 imagick 所说的：

```
Fatal error: Uncaught exception 'ImagickDrawException' with message 'The given font is not found in the ImageMagick configuration and the file ($_SERVER['DOCUMENT_ROOT]php:/temp) is not accessible' 
```

（当然 $_SERVER['DOCUMENT_ROOT'] 是真正的价值，我只是替换它）:)

任何解决方案或者我必须在文件系统中保存字体？

这是代码：

```
 $image = new \Imagick();
 $draw = new \ImagickDraw();

 $temp = new \SplTempFileObject();
 $temp->fwrite($font->getFile()->getContent());

 $image->newImage(550, 50, "black");
 $draw->setFont($temp); 
```

$font 是来自数据库的数据。我认为问题是因为 ImagickDraw::setFont() 相对于 DOC ROOT 搜索字体。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-10T11:01:43.520

该问题是由使用内存缓存的 SplTempFileObject 引起的，默认情况下最多缓存 2MB。 `\SplTempFileObject->getFileName()`will return`php://temp` `\SplTempFileObject->getFileInfo()`将返回一个空对象/文件指针 `\SplTempFileObject->getRealPath()`将始终返回一个空字符串！

如果您希望 PHP 在文件系统中写入一个真实文件，则必须提供内存限制`0`作为构造参数，但您仍然不会得到有效的`SplFileInfo`路径名或文件名，除了`php://temp/maxmemory:0`

是的：这很奇怪，与创建临时文件的“简单界面”相去甚远。

详情请查看[http://php.net/manual/spltempfileobject.construct.php](http://php.net/manual/spltempfileobject.construct.php)

返回，使用旧的`tempfile()`或`tempnam()`. 我的解决方案：

代替 `$file = new \SplTempFileObject();`

我用 `$file = new \SplFileObject(tempnam(sys_get_temp_dir(), rand()), 'w+');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T19:20:14.463

我认为您的问题来自您的寻址错误。当您说`"/".$temp->getFileName()`您没有根据文档获得路径时。因此，由于您没有路径，因此您的前导“/”表示“从服务器根目录”。不酷。

您可以使用[getRealPath](http://php.net/manual/fr/splfileinfo.getrealpath.php)做您想做的事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-12T05:43:29.713

Like others have said, there's a bug with `\SplTempFileObject` where even if you do pass `0` into the constructor, you still have a file that's in memory and therefore doesn't have a filepath/realpath.

I've built a tiny, simple PHP7+ class for this:

```
interface TemporaryFile {
    public function handle(\Closure $closure) : void;
    public function write(string $contents): void;
    public function getContents() : string;
    public function chmod(int $mode): void;
    public function getUri() : string; // aka realpath
    public function close() : void;
}

class IO
{
    /**
     * @return TemporaryFile
     */
    public static function getTemporaryFile() : TemporaryFile {
        return new class implements TemporaryFile {
            private $handle;

            public function __construct()
            {
                $this->handle = tmpfile();
            }

            public function handle(\Closure $closure) : void {
                $closure($this->handle);
            }

            public function getContents() : string {
                // according to PHP docs file_get_contents has much better performance
                // http://php.net/manual/en/function.fread.php
                return file_get_contents($this->getUri());
            }

            public function getUri() : string {
                return stream_get_meta_data($this->handle)['uri'];
            }

            public function close() : void {
                if (is_resource($this->handle))
                    fclose($this->handle);
            }

            public function write(string $contents): void
            {
                fwrite($this->handle, $contents);
            }

            public function chmod(int $mode): void
            {
                chmod($this->getUri(), $mode);
            }

            public function __destruct() {
                $this->close();
            }
        };
    }
} 
```

To use it, just do this:

```
$file = IO::getTemporaryFile();
$file->write('foo');
var_dump($file->getContents()); // string(3) "foo" 
```

You can see the aforementioned example in a working state here: [https://3v4l.org/LYfan#output](https://3v4l.org/LYfan#output)

And then you have a temporary file that's gonna self the destruct after the process is finished or the class is dereferenced.

# c# - 如何过滤两列的数据集

> ID：12555141
> 
> 赞同：-1
> 
> 时间：2012-09-23T18:39:22.493
> 
> 标签：c#, dataset

我有与网格绑定的数据表，如下表1

```
Id Type Desc 
1  A    ABC 
2  A    XYZ 
1  B    QRS 
3  B    123 
```

基于用户选择的网格行下表正在生成。表2

```
Id  Type
1   A
1   B
2   A 
```

第二张桌子可以增长到第一张桌子。

我必须根据选择的网格（或输出为表 2）从表 1 中找出过滤后的行

我有以下问题

1.  我应该从网格的行选择中创建第二个表 2 以过滤表 1
2.  如果是，那么如何用这两个表进行过滤
3.  如果没有问题1的答案，那么最好的方法是什么。

我正在使用 dEV eX GRID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T19:16:22.240

您可以使用数据视图并正确设置 RowFilter 属性以使用第二个表的过滤器值过滤您的第一个数据表，例如：

```
dataView.RowFilter = "Id IN (1, 2) AND Type = A"

for sure you have to make it dynamic so you can scan each row and 
```

使您的 rowFilter 为 id = 1 和 type = A 或 id = 2 和 type = A 等...这里有一个链接来了解如何使用它： [http ://www.csharp-examples.net/dataview-rowfilter/](http://www.csharp-examples.net/dataview-rowfilter/)

# jquery - 将文本框数据添加到 url

> ID：12555145
> 
> 赞同：1
> 
> 时间：2012-09-23T18:39:37.530
> 
> 标签：jquery, text

我可能遗漏了一些基本的东西，但是我在 html 中有一个文本框，我希望用户向其中添加一些文本，当他们单击一个按钮时，它会添加到 url：

例如

```
<form id="discount_code" action='' method='get'>
    <input type='text' name='code' id='code' placeholder='Enter a discount code..'></>
    <input type="button" class='small-button' id='useCode' value='Use Code' onClick="parent.location='www.url.com?id=32&code=< TEXT ENTERED HERE >'" />
</form> 
```

有什么办法可以让它与 jQuery 更改事件或类似事件一起使用？我搜索并发现了许多类似的建议，但似乎没有任何效果。我需要它以 GET 格式传递给 url。它还最好需要在有人粘贴文本的情况下工作。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T18:49:36.393

GET 将自动将参数放在标题中。

因此，如果您将表单的操作更改为 www.url.com，如下所示：

```
<form id="discount_code" action='//www.url.com' method='get'> 
<input type='text' name='code' id='code' placeholder='Enter a discount code..' />         
<input type="button" class='small-button' id='useCode' value='Use Code' /> 
</form> 
```

..这应该将任何放入代码中的内容附加到 URL 中。至于放入 id，您可以创建一个隐藏元素或其他类似的输入：

```
<form id="discount_code" action='//www.url.com' method='get'> 
<input type='text' name='code' id='code' placeholder='Enter a discount code..' /> 
<input type='hidden' name='id' value='23' />        
<input type="button" class='small-button' id='useCode' value='Use Code' /> 
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T18:42:18.643

您错过了网址前面的 http://。当您使用 www 启动 url 时，浏览器假定它与当前 url 相关。

```
<form id="discount_code" action='' method='get'> 
<input type='text' name='code' id='code' placeholder='Enter a discount code..' />
<input type="button" class='small-button' id='useCode' value='Use Code' onClick="parent.location='http://www.url.com?id=32&code=< TEXT ENTERED HERE >'" /> </form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T18:46:36.350

```
$(function(){
    $('#useCode').click(function(){
        var code = encodeURI($('#code').val())
        parent.location = 'http://www.url.com?id=32&code=' + code;
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T18:48:53.753

```
$("#discount_code").submit(function(e){
  var data = $(this).serialize();
  e.preventDefault();

  top.location = 'http://example.com/?code='+data.code;
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-23T18:50:47.393

您可以获取 url，添加文本框值，然后像这样重定向到新的 url。该页面将刷新。

```
 var url = document.URL;
    window.location = url + $('#textboxID').val();​ 
```

# android - 对特定控件之外的触摸事件做出反应

> ID：12555159
> 
> 赞同：2
> 
> 时间：2012-09-23T18:41:16.010
> 
> 标签：android, touch

在`ListFragement`我想在用户长按项目后在项目旁边显示其他编辑选项。

`ArrayAdapter`在自定义（内部）中使用以下代码可以正常工作`getView`：

```
rowView.setOnLongClickListener(new View.OnLongClickListener() {
    public boolean onLongClick(View v) {
        //Show the edit controls
        View editArea = rowView.findViewById(R.id.editArea);
        editArea.setVisibility(View.VISIBLE);

        //Don't raise additional events for this touch
        return true;
    }
}); 
```

但是，我的问题是使用哪个事件来隐藏那些额外的编辑控件。

理想情况下，当显示编辑控件时，应该忽略它们之外的任何触摸以支持隐藏它们（有点像打开对话框并且用户单击它旁边的某个位置时）。

我尝试`dispatchTouchEvent`在我的 MainActivity 中覆盖 -`ACTION_DOWN`但是，如果我通常拦截所有事件，我的编辑控件在点击被分派给它们之前被隐藏（当然）。
是否有可能检测到用户触摸了哪个控件而尚未调度事件？

如果我拦截所有`ACTION_UP`s，则当用户结束长按时删除编辑控件。而且我试图避免特定是否`ACTION_UP`属于长触摸，因为这会产生一些非常混乱的代码。

有什么想法要听哪个事件吗？
或者你知道任何更好的替代方法来实现我的目标吗？

# javascript - 更改 DIV 背景图像不起作用

> ID：12555160
> 
> 赞同：0
> 
> 时间：2012-09-23T18:41:19.427
> 
> 标签：javascript, css, html

我有这样的功能：

```
function div_id( parent , child ) {
    var children = document.getElementById(parent).childNodes;
    for (var i=0; i < children.length; i++) {
        if (children[i].id == child ) {
            return children[i];
            break;
        }
    }
    return null;
} 
```

我的 div 设置如下：

```
<div id="table_seats_box">
    <div id="table_seat_0">
        <div id="table_seat_0_d"></div>
        <div id="table_seat_0_player_name"></div>
        <div id="table_seat_0_portrait">
           <div id="table_seat_0_card_0"><div id="table_seat_0_card_1"></div></div>
           <div id="table_seat_0_chips"></div>
           <div id="table_seat_0_status"></div>
        </div>
    </div>
</div> 
```

我的代码是这样的：

```
var t_s_p = "table_seat_" + player_table_position;
var t_s_p_p = "table_seat_" + player_table_position + "_portrait";
var children = div_id ( t_s_p , t_s_p_p );
children.style.backgroundImage = "url(images/class/" + image_id + ".png)"; 
```

但它似乎并没有改变背景图像。难道我做错了什么？w、h 和可见性在 css 上都很好。谢谢您的帮助。

*编辑*修复了“）”，但仍然无法正常工作。

仅供参考：图像只是一个数字

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T18:48:37.127

您没有关闭`url(`左括号，请将您的`backgroundImage`定义更改为：

```
children.style.backgroundImage = "url(images/class/" + image_id + ".png)"; 
```

**注意：**您可以选择简化您的`div_id`功能：

```
function div_id(parent, child) {
    return document.getElementById(parent).querySelector("#" + child); /*IE8+, all other modern browsers*/
} 
```

# scala - 如何递归地平衡括号

> ID：12555162
> 
> 赞同：4
> 
> 时间：2012-09-23T18:41:40.267
> 
> 标签：scala, recursion

我正在编写一些代码来平衡括号，[这个问题](https://stackoverflow.com/questions/2711032/basic-recursion-check-balanced-parenthesis)被证明对算法最有用。

我用我的第一语言 (PHP) 实现了它，但我正在学习 Scala 并尝试转换代码。

这是我的PHP代码：

```
function balanced($string) {
  return isBalanced($string, "");
}

function isBalanced($chars, $stack) {
  if (!strlen($chars))
    return empty($stack);

  switch ($chars[0]) {
    case '(':
      // prepend stack with '(', move to next character
      return isBalanced(substr($chars, 1), $chars[0] . $stack);
    case ')':
      // if '(' seen previously, shift stack, move to next character
      return !empty($stack) && isBalanced(substr($chars, 1), substr($stack, 1));
    default:
      // do nothing to stack, move to next character
      return isBalanced(substr($chars, 1), $stack);
  }
} 
```

我已经测试过了，它有效。但是，当我将它转换为 Scala 时，它在平衡字符串上失败了。

我的斯卡拉代码：

```
object Main {
  def balance(chars: List[Char]): Boolean = {
    def balanced(chars: List[Char], stack: String): Boolean = {
      if (chars.isEmpty)
        stack.isEmpty
      else if (chars.head == ')')
        balanced(chars.tail, chars.head + stack)
      else if (chars.head == '(')
        !stack.isEmpty && balanced(chars.tail, stack.tail)
      else
        balanced(chars.tail, stack)
    }

    balanced(chars, "")
  }
} 
```

我很欣赏这不是最好的 Scala 代码，但我才刚刚开始。一些测试：

```
balance("(if (0) false (x))".toList) - fails
balance("profit and loss (P&L).\n(cashflow)".toList) - fails
balance(":)".toList) - passes
balance(")(()".toList) - passes 
```

PHP 等价物通过了所有这些测试。我在 Scala 实现中做错了什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-23T21:59:20.537

值得一提的是，这里有一个更惯用的 Scala 实现：

```
def balance(chars: List[Char]): Boolean = {
  @tailrec def balanced(chars: List[Char], open: Int): Boolean = 
    chars match {
      case      Nil => open == 0
      case '(' :: t => balanced(t, open + 1)
      case ')' :: t => open > 0 && balanced(t, open - 1)
      case   _ :: t => balanced(t, open)
    }

  balanced(chars, 0)
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-24T13:16:38.517

[为了完整起见，我从另一个 SO question](https://stackoverflow.com/a/12524755/122075)中找到了一个更简洁的“scala-esque”实现：

```
def balance(chars: List[Char]): Boolean = chars.foldLeft(0){
  case (0, ')') => return false
  case (x, ')') => x - 1
  case (x, '(') => x + 1
  case (x, _  ) => x
} == 0 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-23T11:18:24.370

与 Aaron Novstrup 的回答相同，但使用“if else”。我也参加了同一门课程，但到目前为止，我们只学习了 if/else。

```
def balance(chars: List[Char]): Boolean = {
    def balanced(chars: List[Char], open: Int): Boolean = 
      if (chars.isEmpty) open == 0
      else if (chars.head == '(') balanced(chars.tail, open + 1)
      else if (chars.head == ')') open > 0 && balanced(chars.tail, open - 1)
      else balanced(chars.tail, open)
    balanced(chars, 0)
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-09-23T18:47:15.970

您混淆了`(`和的情况`)`。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-07-14T08:51:32.767

您可以使用递归以有效的方式解决您的问题，而不是使用 Switch case。

以下是我在递归的帮助下实现相同目标的代码。对于我的方法，您需要将字符串转换为 List。

代码 ：

```
object Balance {

  def main(args: Array[String]): Unit = {
    var paranthesis = "(234(3(2)s)d)" // Use your string here
    println(bal(paranthesis.toList)) // converting the string to List 
  }

  def bal(chars: List[Char]): Boolean ={
   // var check  = 0
    def fun(chars: List[Char],numOfOpenParan: Int): Boolean = {
      if(chars.isEmpty){
        numOfOpenParan == 0
      }
      else{
        val h = chars.head

        val n = 
          if(h == '(') numOfOpenParan + 1
          else if (h == ')') numOfOpenParan - 1
          else numOfOpenParan 

       // check  = check + n
        if (n >= 0) fun(chars.tail,n)
        else false 
      }
    }
    fun(chars,0)
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-19T08:22:08.090

我的解决方案

```
def balance(chars: List[Char]): Boolean = {
 var braceStack = new Stack[Char]()

def scanItems(strList:List[Char]):Boolean = {
   if(strList.isEmpty)
       braceStack.isEmpty
   else{
      var item = strList.head
      item match {
        case '(' => braceStack.push(item)
                    scanItems(strList.tail)
        case ')'=> if(braceStack.isEmpty){
                        false
                    }
                    else {
                      braceStack.pop
                      scanItems(strList.tail)
                    }
        case _ => scanItems(strList.tail)
      }
    }
 }

 scanItems(chars) 
```

}

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-22T15:42:48.270

```
 val myStack = new Stack[Char]

  def balance(chars: List[Char]): Boolean = {
    def processParanthesis(x: Char, a: List[Char]): Stack[Char] = {
      if (x == '(') {
        myStack.push('(');
      } else if (x == ')') {
        if (!myStack.empty())
          myStack.pop();
        else
          myStack.push(')');
      }
      if (a.length == 0)
        return myStack;
      else
        return processParanthesis(a.head, a.tail);
    }
    return processParanthesis(chars.head, chars.tail).empty();
  } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-20T05:57:25.440

添加到 Vigneshwaran 的答案（包括评论和过滤不必要的字母以避免额外的递归调用）：

```
def balance(chars: List[Char]): Boolean = {
  @scala.annotation.tailrec
  def recurs_balance(chars: List[Char], openings: Int): Boolean = {
    if (chars.isEmpty) openings == 0
    else if (chars.head == '(') recurs_balance(chars.tail, openings + 1)
    else openings > 0 && recurs_balance(chars.tail, openings - 1)
  }

  recurs_balance(chars.filter(x => x == '(' || x == ')'), 0)
} 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2012-09-25T17:50:58.930

看来我们上的是同一门课。我的解决方案：

```
def balance(chars: List[Char]): Boolean = 
doBalance(chars, 0) == 0;
def doBalance(chars: List[Char], parenthesisOpenCount: Int): Int =
if(parenthesisOpenCount <0) -100;
else
if(chars.isEmpty) parenthesisOpenCount
else
  chars.head match {
  case '(' => return doBalance(chars.tail, parenthesisOpenCount+1) 
  case ')' => return doBalance(chars.tail, parenthesisOpenCount-1)
  case _ => return doBalance(chars.tail, parenthesisOpenCount)
} 
```

# java - 使用 Spring AsyncTaskExecutor 更新 DB 好不好？

> ID：12555164
> 
> 赞同：1
> 
> 时间：2012-09-23T18:41:46.257
> 
> 标签：java, spring, asynchronous

我正在尝试从 UI 进行 AJAX 调用。这应该只是启动一个异步过程来根据几个条件更新数据库。好用吗：

1.  Spring AsyncTaskExecutor
2.  未来任务
3.  扳机

或者还有其他更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T01:02:27.957

在不知道您的要求的情况下很难说，但是......：

如果您计划扩展我会使用：

*   如果数据很重要（即您不想删除操作）并且您希望支持其他语言（如 Python），则使用**RabbitMQ**或**Redis**等持久事务队列。
*   或**Akka**，如果您不关心删除操作/消息。

TaskExecutor aka Java ExecutorService 的问题在于它本质上是一个可变的内存 JVM 队列（传递给它的可调用/可运行对象可以具有状态并且可以是可变的）。或者更好的说法是队列中的消息自己运行。

如果您的服务器出现故障并且消息在队列中，则使用 E​​xecutorService 可以对消息说再见。当然，消息不能与其他进程共享。

**另一方面，**Akka**和**RabbitMQ而不是 ExecutorService 提供了更好的抽象，并且更容易扩展，因为它本质上是基于“事件”的。**消息的行为与数据分离。**

 **在不知道您的数据库的情况下，我只能猜测“触发器”将是一个坏主意。

**我认为这是一个重要的问题，因为如果你在所有地方都做错了（将行为和状态结合起来进行异步），那么进行切换可能会非常困难。****

# opengl - glGetProgramiv 的值不正确（程序，GL_ACTIVE_UNIFORM_MAX_LENGTH，outParam）

> ID：12555165
> 
> 赞同：1
> 
> 时间：2012-09-23T18:41:53.810
> 
> 标签：opengl, glsl

我需要统一名称的最大长度。即：给定一个带有制服的用过的程序`uniform test`，`uniform myuniform`应该`glGetProgramiv(program, GL_ACTIVE_UNIFORM_MAX_LENGTH, outParam)`得到10的输出（对于“myuniform”）。

我有一个非常简单的测试着色器，设置了 1 个定义的统一：`uniform float time`

`glGetProgramiv(program, GL_ACTIVE_UNIFORM_MAX_LENGTH, outParam)`返回 5，即 的长度`time`。如果我将“时间”更改为其他内容，它会返回更改后的长度（例如：更改为“计时器”会返回 6）。

`glGetProgramiv`with`GL_ACTIVE_UNIFORMS`告诉我有 2 套制服。它报告的第二个制服是 gl_ModelViewProjectionMatrix。

我对它在列表中包含 gl_ModelViewProjectionMatrix 很好 - 我在着色器中使用它，但是当与其他返回值结合使用时会出现问题。如果 glGetProgramiv 包含在列表中，为什么不返回“gl_ModelViewProjectionMatrix”的长度？我需要我的应用程序的属性和变量的全名，但由于我的最大长度为 5，`glGetActiveUniform`因此返回了一个不可接受的统一名称“gl_M”。

最大名称长度应该包括 MVP 矩阵，或者名称列表不应该。将名称包含在列表中但不包含在最大名称长度计算中是没有意义的。

这只发生在我身上吗？我用谷歌找不到任何关于它的东西。我可以放弃对最大长度的查询并始终使用非常大的缓冲区，但我以前见过一些非常长的变量名，因此缓冲区必须很大才能保证没有错误。无论如何，这不是一个真正的解决方案。

此测试对属性正常工作。我使用 gl_Vertex 并且没有其他属性。系统正确报告了 1 个当前属性，长度为 10，名称为 gl_Vertex。如果我完全移除我的时间制服，那么 MVP 矩阵将成为唯一使用的制服，系统会报告 1 个当前制服，最大名称长度为 0，因此使用返回的最大长度获取其名称将一无所获。

为了完整起见，我包括下面的代码。该代码使用 Java 编写，并使用 JOGL 访问 OpenGL 绑定。为了突出相关区域，我删除了与此问题无关的行，主要是 GUI 更新，包括实际显示此处获得的值的 GUI 部分。如上所述，我还删除了获取属性的部分，因为它工作正常。

仅供对 Java 主义持谨慎态度的 C 人参考：将 Buffer ( `IntBuffer`, `ByteBuffer`, ) 想象为`FloatBuffer`指针、`buffer.get()`like`buffer[n++]`和. 我还在 C 和 C++ 中使用 OpenGL，所以如果这里的 GLSL 专家更喜欢，我可以用 C 重写它。`buffer = IntBuffer.allocate(n)``malloc()`

有什么建议么？

```
// add options to panelShaderParameters
public void updateShaderParameters(GLAutoDrawable surface)
{
    GL2 gl = surface.getGL().getGL2();

    IntBuffer outParam = IntBuffer.allocate(1);
    int numParameters = 0,
        maxNameLength = 0;

    IntBuffer size = null,
        type = null;
    ByteBuffer name = null;

    gl.glGetProgramiv(shader.getName(), GL2.GL_ACTIVE_UNIFORMS, outParam);
    numParameters = outParam.get();
    outParam = IntBuffer.allocate(1);
    gl.glGetProgramiv(shader.getName(), GL2.GL_ACTIVE_UNIFORM_MAX_LENGTH, outParam);
    maxNameLength = outParam.get();

    for(int i = 0; i < numParameters; i += 1)
    {
        size = IntBuffer.allocate(1);
        type = IntBuffer.allocate(1);
        name = ByteBuffer.allocate(maxNameLength);
        gl.glGetActiveUniform(shader.getName(), i, maxNameLength, (IntBuffer)null, size, type, name);
        byte[] nameBuffer = new byte[maxNameLength];
        name.position(0);
        name.get(nameBuffer);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T19:24:06.330

您发现了一个驱动程序错误。您可以尝试报告它（[这个论坛是一个可以看到它的地方](http://www.opengl.org/discussion_boards/forumdisplay.php/17-OpenGL-drivers)），但您无法使其正常工作。所以只是解决它。

而不是只有一个最大尺寸，只需依次询问每个制服的长度是多少。在 C/C++ 中，您可以通过将缓冲区的 NULL 传递给[`glGetActiveUniformName`](http://www.opengl.org/wiki/GLAPI/glGetActiveUniformName)：

```
GLsizei length;
glGetActiveUniformName(program, index, 1000 /*large number*/, &length, NULL);
//Use length to allocate a buffer of the appropriate size. 
```

我不知道这将如何使用 JOGL。也许您应该切换到 LWJGL，它[对该函数有更合理的 Java 实现。](http://www.lwjgl.org/javadoc/org/lwjgl/opengl/GL31.html#glGetActiveUniformName%28int,%20int,%20int%29)

此外，停止将字符串存储为字节数组。将它们转换为正确的 Java 字符串（使用 LWJGL 的另一个原因）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:55:46.567

我们确实遇到了这个问题，我已经看到其他人在这里描述过它：

[http://www.opengl.org/discussion_boards/showthread.php/179117-Driver-bug-causing-incorrect-glGetProgramiv-output](http://www.opengl.org/discussion_boards/showthread.php/179117-Driver-bug-causing-incorrect-glGetProgramiv-output)

就我而言，问题是在各种 GPU 型号中从 nvidia 295.40 驱动程序升级到 304.64 后出现的。在上面的那个论坛中，报告了英特尔驱动程序的错误 ¿ 您使用的是哪个驱动程序 Ludowijk ？

我想也许以“gl_”开头的内置属性不考虑用于最大名称长度计算，但即使这是真的，恕我直言，这种行为应该被视为一个错误。

感谢 Nicol 提出解决方法的想法。

# regex - 在 FINDSTR 中使用子模式

> ID：12555169
> 
> 赞同：5
> 
> 时间：2012-09-23T18:42:21.863
> 
> 标签：regex, windows, batch-file, cmd, findstr

我必须检查存储在变量中的字符串的有效性，我不能使用外部 CLI 实用程序（grep、awk 等），所以我选择了 FINDSTR。该字符串具有以下格式（在正则表达式中）：

```
([1-9][0-9]*:".*"(|".*")*) 
```

我不知道如何检查子模式（|。“*”）。目前我的代码是：

```
((ECHO.) | (SET /P "=(11:"a"|"b"|"c")") | (FINDSTR /R /C:"^([1-9][0-9]*:".*")$")) 
```

问候。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T18:16:22.470

Mat M 关于 FINDSTR 的限制是正确的。FINDSTR 正则表达式支持非常原始且非标准。在命令行中键入`HELP FINDSTR`或`FINDSTR /?`以获得支持的简要概要。有关详细说明，请参阅[Windows FINDSTR 命令有哪些未记录的功能和限制？](https://stackoverflow.com/q/8844868/1012053)

我喜欢 Harry Johnston 的评论 - 使用 VBScript 或 JavaScript 创建解决方案非常容易。我认为这将是一个更好的选择。

但是，这是一个本地批处理解决方案。我已经合并了关于 OP 在对 Mat M 的回答的评论中声明的子模式数量的额外规则。

解决方案非常棘手。由于管道的工作方式，在将 ECHO 输出传送到 FINDSTR 时，特殊字符可能会导致问题。管道的每一侧都在其自己的 CMD 会话中执行。特殊字符必须被引用、转义两次或仅通过延迟扩展公开。我选择使用延迟扩展，但`!`字符必须转义两次以确保延迟扩展发生在正确的时间。

解析可变数量的子模式的最简单方法是用换行符替换分隔符并使用 FOR /F 迭代每个子模式。

我的代码的上半部分是一个脆弱的编码工具，可以方便地迭代和测试一组字符串。它不能与任何字符串`<space>` `;` `,` `=` `<tab>` `*`或`?`字符串中的任何一个一起正常工作。此外，每个字符串中的引号必须保持平衡。

但更重要的验证例程可以处理 var 变量中的任何字符串。

```
@echo off
setlocal
set LF=^

::Above 2 blank lines are critical for creating a linefeed variable. Do not remove

set test=a

for %%S in (
  "(3:"a"|"c"|"c")"
  "(11:"a"|"b"|"c"|"d"|"esdf"|"f"|"g"|"h"|"i"|"j"|"k")"
  "(4:"a"|"b"|"c")"
  "(10:"a"|"b"|"c"|"d"|"esdf"|"f"|"g"|"h"|"i"|"j"|"k")"
  "(3:"a"|"b"|"c""
  "(3:"a"|"b^|c")"
  "(3:"a"|"b"|c)"
  "(3:"a"|"b"||"c")"
  "(3:"a"|"b"|;|"c")"
) do (
  set "var=%%~S"
  call :validate
)
exit /b

:validate
setlocal enableDelayedExpansion
cmd /v:on /c echo ^^^!var^^^!|findstr /r /c:"^([1-9][0-9]*:.*)$" >nul || (call :invalid  FINDSTR fail& exit /b)
if "!var:||=!" neq "!var!" (call :invalid double pipe fail& exit /b)
for /f "delims=(:" %%N in ("!var!") do set "expectedCount=%%N"
set "str=!var:*:=!"
set "str=!str:~0,-1!"
set foundCount=0
for %%A in ("!LF!") do for /f eol^=^%LF%%LF%^ delims^=  %%B in ("!str:|=%%~A!") do (
  if %%B neq "%%~B" (call :invalid sub-pattern fail& exit /b)
  set /a foundCount+=1
)
if %foundCount% neq %expectedCount% (call :invalid count fail& exit /b)
echo Valid: !var!
exit /b
:invalid
echo Invalid - %*: !var!
exit /b 
```

这是运行批处理脚本后的结果

```
Valid: (3:"a"|"c"|"c")
Valid: (11:"a"|"b"|"c"|"d"|"esdf"|"f"|"g"|"h"|"i"|"j"|"k")
Invalid - count fail: (4:"a"|"b"|"c")
Invalid - count fail: (10:"a"|"b"|"c"|"d"|"esdf"|"f"|"g"|"h"|"i"|"j"|"k")
Invalid - FINDSTR fail: (3:"a"|"b"|"c"
Invalid - sub-pattern fail: (3:"a"|"b|c")
Invalid - sub-pattern fail: (3:"a"|"b"|c)
Invalid - double pipe fail: (3:"a"|"b"||"c")
Invalid - sub-pattern fail: (3:"a"|"b"|;|"c") 
```

**更新**

`:validate`通过将延迟扩展的启用推迟到`CMD /V:ON`管道之后，可以稍微简化该例程。这意味着我不再需要担心`!`管道左侧的双重转义。

```
:validate
cmd /v:on /c echo !var!|findstr /r /c:"^([1-9][0-9]*:.*)$" >nul || (call :invalid  FINDSTR fail& exit /b)
setlocal enableDelayedExpansion
... remainder unchanged 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T23:11:39.443

据我所知，**findstr**无法对正则表达式进行分组，所以`(|".*")*`是禁止的。如果你知道你有多少块并且你像这样复制你的代码

```
FINDSTR /R /C:"^([1-9][0-9]*:\"..*\"|\"..*\"|\"..*\")$" 
```

这样，如果您确定块的数量是恒定的，`""`如果需要有空的，那么您可以检查它。

表达式中的双引号将被忽略，除非您在它们前面加上 \。
该 `..*`构造旨在替换`.+`: 一个或多个字符。

# c# - SQLite 与 c# Metro app CRUD 操作语法？

> ID：12555170
> 
> 赞同：0
> 
> 时间：2012-09-23T18:42:25.410
> 
> 标签：c#, sqlite, xaml, microsoft-metro

我制作了一个 Windows 8 Metro 应用程序。我将 SQLite 用于数据库目的。我在某处读到要插入数据库的内容，请使用以下命令：

```
 db.Insert(new Person() { FirstName = "Tim", LastName = "Heuer" }); 
```

现在我需要删除和更新的语法

我试过这个但错误来了：

```
db.Delete(new Tasks() { Title = "dixit" }); 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:14:50.770

你可以使用这个：

```
 var db = new SQLite.SQLiteAsyncConnection(DBPath);

        // Empty the Customer and Project tables 
        var customers = await db.Table<Customer>().ToListAsync();
        foreach (Customer customer in customers)
        {
            await db.DeleteAsync(customer);
        } 
```

# php - 在 wordpress 中自定义继续阅读

> ID：12555173
> 
> 赞同：-1
> 
> 时间：2012-09-23T18:42:51.717
> 
> 标签：php, css, wordpress, styles

这是function.php中继续阅读的代码

```
<?php the_content( __( 'Continue reading <span class="meta-nav">&rarr;</span>', 'twentyten' ) ); ?> 
```

它有一个名为 meta-nav 的类，我试图找到该类并对其进行更改，但找不到。哪里是？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T23:04:15.827

“它不起作用”或“它没有改变”告诉我们什么。如果您希望得到某个问题的具体答案，请添加具体的详细信息 - 可能是以指向您网站的链接的形式。

如果您需要覆盖 CSS 中的某些元素，如果似乎没有任何效果，请使用 !important 规则：

```
.meta-nav {
color:red !important;
font-size:3em !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T19:01:34.337

当一个好的主题作者在模板中的元素上创建类时，不一定要为它们设置样式。给出类来描述元素的语义——内容是什么。

因此，您不一定会从 CSS 中的 HTML 输出中找到所有类。

但是，如果您想为`class="meta-nav"`元素设置样式，您需要在样式表中添加一个 .meta-nav 块，如下所示：

```
.meta-nav {
    /* Your styles here */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T18:49:20.010

您可以更改主题文件夹中 style.css 文件中任何元素的样式。只需添加：

```
.meta-nav {
    color: red;
    font-size: 3em;
    /* any styling you want! */
} 
```

# java - 无法在 logcat 中获取连接工厂客户端

> ID：12555174
> 
> 赞同：1
> 
> 时间：2012-09-23T18:42:54.613
> 
> 标签：java, android, gps, maps

我正在使用**HTC Explorer**测试我的应用程序

一切都很好，直到我更改代码以显示我当前的位置。该应用程序有效，但在 Logcat 上登录以下错误：**无法获取连接工厂客户端**

这是我的 MainActivity.java 代码

```
package com.example.com.draft1;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;

import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.view.Menu;
import android.view.MenuItem;
import android.support.v4.app.NavUtils;
import android.view.KeyEvent;
import android.widget.Toast;

import com.google.android.maps.MapController;

import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;

public class MainActivity extends MapActivity {

private LocationManager lm;
public LocationListener locationListener;

 // locationListener location =new MyLocationListener();

MapView mapView;
MapController mc;

GeoPoint p;

String coordinates[] = {"41.146064", "-80.642861"};
double lat=Double.parseDouble(coordinates[0]);
double lng=Double.parseDouble(coordinates[1]);

@Override
public void onCreate(Bundle savedInstanceState) {

    lm=(LocationManager)getSystemService(Context.LOCATION_SERVICE);

    locationListener =new MyLocationListener();

    lm.requestLocationUpdates(LocationManager.GPS_PROVIDER,0,0,locationListener);

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    p=new GeoPoint((int)(lat*1E6),(int)(lng*1E6));
    mapView=(MapView)findViewById(R.id.mapView);

    mc=mapView.getController();
    mc.setCenter(p);

    //mc.setZoom(13);
    //mapView.invalidate();

    //myMapController.setCenter(new GeoPoint((int)(lat*1E6),(int)(lng*1E6)));
}

private class MyLocationListener implements LocationListener 
{

@Override
public void onLocationChanged(Location loc) {

    p=new GeoPoint((int)(loc.getLatitude()*1E6),(int)(loc.getLongitude()*1E6));

    if(loc!= null) {
        Toast.makeText(getBaseContext(),"Location : lat"+loc.getLatitude()+" Long "+loc.getLongitude(),Toast.LENGTH_SHORT).show();

    }

    mc.animateTo(p);

    }

    @Override
    public void onProviderDisabled(String provider) {

    }

    @Override 
    public void onProviderEnabled(String provider) {

    }

    @Override 
    public void onStatusChanged(String provider,int status,Bundle extras) {

    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
@Override
protected boolean isRouteDisplayed() 

{
    //adssad

    return false;

}

} 
```

为什么会发生这种情况？

任何可能的解决方案？

我真的很感激这方面的帮助

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T02:58:43.047

似乎是谷歌的随机错误。开始自己工作：|

# symfony1 - Symfony 1.4，不再调用函数 create

> ID：12555175
> 
> 赞同：1
> 
> 时间：2012-09-23T18:42:54.417
> 
> 标签：symfony1, symfony-1.4

我创建了一个表格来允许人们注册，它工作得很好，但几周过去了，它不再工作了。

我有带有索引功能的模块铭文：

```
public function executeIndex(sfWebRequest $request)
{
    $this->form = new InscriptionForm();
} 
```

在 indexSuccess.php 中，我有：

```
<?php include_partial('form', array('form' => $form)) ?> 
```

我的部分形式是这样的：

```
<form action="<?php echo url_for('Inscription/'.($form->getObject()->isNew() ? 'create' : 'update').(!$form->getObject()->isNew() ? '?id='.$form->getObject()->getId() : '')) ?>" method="post" <?php $form->isMultipart() and print 'enctype="multipart/form-data" ' ?>>
... // All my input for the inscription Form
</form> 
```

和创建功能：

```
public function executeCreate(sfWebRequest $request)
  {
    $this->forward404Unless($request->isMethod(sfRequest::POST));

    $this->form = new InscriptionForm();

    $this->processForm($request, $this->form);
  } 
```

我的表单显示正确，但如果我提交表单，则不再调用 create 函数。

```
$form->getObject()->isNew() 
```

返回真。

更新案例有效，只是创建无效。我没有错误，只是在配置-> 请求中，我有：

```
parameterHolder:
  action: index
  module: Inscription 
```

好像我的表单调用操作索引而不是创建。我现在正在寻找几个小时，但我无法得到原因。

**编辑：**

当我提交表单时，我得到了这个：

```
options:
  path_info_key: PATH_INFO
  path_info_array: SERVER
  http_port: null
  https_port: null
  default_format: null
  logging: '1'
  relative_url_root: null
  formats: { txt: text/plain, js: [application/javascript, application/x-javascript, text/javascript], css: text/css, json: [application/json, application/x-json], xml: [text/xml, application/xml, application/x-xml], rdf: application/rdf+xml, atom: application/atom+xml }
  no_script_name: false
parameterHolder:
  action: index
  module: Inscription
  sf_guard_user: { id: '', _csrf_token: 2a4bd03a7c7cb1cfd8a41653fddabcc3, username: '', email_address: admin, password: admin, password_confirmation: '', Informations: { sexe_id: '1', date_naissance: { month: '', day: '', year: '' }, id: '', token: '0', etat_id: '2' }, Avatar: { id: '', valide: '0' } }
attributeHolder:
  sf_route: 'sfRoute Object()' 
```

这就像未调用创建函数！

在我的日志中，我有：

```
#   type    message
1    sfPatternRouting   Connect sfRoute "sf_guard_signin" (/guard/login)
2    sfPatternRouting   Connect sfRoute "sf_guard_signout" (/guard/logout)
3    sfPatternRouting   Match route "sf_guard_signin" (/:module) for /Inscription     with parameters array ( 'module' => 'Inscription', 'action' => 'index',)
4    sfFilterChain  Executing filter "sfRenderingFilter"
5    sfFilterChain  Executing filter "sfExecutionFilter"
6    InscriptionActions Call "InscriptionActions->executeIndex()"
7    sfPHPView  Set component "sf_twitter_bootstrap_permanent_slot" (/)
8    sfPHPView  Render "sf_app_dir\modules/Inscription/templates/indexSuccess.php"
9    sfPartialView  Render "sf_app_dir\modules/Inscription/templates/_form.php"
10   sfPHPView  Decorate content with "sf_app_dir\templates/layout.php"
11   sfPHPView  Render "sf_app_dir\templates/layout.php"
12   sfWebResponse  Send status "HTTP/1.1 200 OK"
13   sfWebResponse  Send header "Content-Type: text/html; charset=utf-8" 
```

通常，当我提交表单时，它会检查 InscriptionForm 中的值，但我可以设置我想要的每个值；不再有控制，索引函数再次调用索引。

# r - 条件均值陈述

> ID：12555179
> 
> 赞同：6
> 
> 时间：2012-09-23T18:43:52.013
> 
> 标签：r, conditional-statements, mean

我有一个名为的数据集`bwght`，其中包含变量`cigs`（每天抽的雪茄）

当我使用： 计算`cigs`数据集中的平均值时，我得到一个数字 2.08。`bwght``mean(bwght$cigs)`

样本中的 1388 名女性中只有 212 名吸烟（1176 名不吸烟）：

`summary(bwght$cigs>0)`给出结果：

```
Mode      FALSE    TRUE    NA's 
logical    1176     212       0 
```

我被要求找出`cigs`吸烟女性的平均值（212）。

我很难找到正确的语法来排除我尝试过的非吸烟者 = 0：

*   `mean(bwght$cigs| bwght$cigs>0)`

*   `mean(bwght$cigs>0 | bwght$cigs=TRUE)`

*   `if (bwght$cigs > 0){ sum(bwght$cigs) }`

*   `x <-as.numeric(bwght$cigs, rm="0"); mean(x)`

但似乎没有任何效果！谁能帮帮我吗？？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-25T16:48:26.490

如果你想排除非吸烟者，你有几个选择。最简单的可能是这样的：

```
mean(bwght[bwght$cigs>0,"cigs"]) 
```

对于数据框，第一个变量是行，下一个是列。因此，您可以使用子集`dataframe[1,2]`获取第一行，第二列。您还可以在行选择中使用逻辑。通过`bwght$cigs>0`用作第一个元素，您将子集化为仅具有`cigs`不为零的行。

由于以下原因，您的其他人无法正常工作：

```
mean(bwght$cigs| bwght$cigs>0) 
```

这实际上是一个合乎逻辑的比较。您要求 TRUE / FALSE 结果`bwght$cigs OR bwght$cigs>0`，然后取其平均值。我不完全确定，但我认为 R 甚至不能将类型化的数据视为`mean()`函数的逻辑。

```
mean(bwght$cigs>0 | bwght$cigs=TRUE) 
```

同样的问题。您使用`|`符号，它返回一个逻辑，而 R 试图取逻辑的平均值。

```
if(bwght$cigs > 0){sum(bwght$cigs)} 
```

有没有机会，您最初是一名 SAS 程序员？这看起来像我一开始的打字方式。基本上，`if()`在 R 中的工作方式与在 SAS 中的工作方式不同。在该示例中，您使用`bwght$cigs > 0`的是 if 条件，这将不起作用，因为 R 只会查看由 bwght$cigs > 0 产生的向量的第一个元素。R 处理与 SAS 不同的循环 - 查看 lapply 等函数，轻拍，等等。

```
x <-as.numeric(bwght$cigs, rm="0")
mean(x) 
```

老实说，我不知道这会做什么。如果`rm="0"`没有引号，它可能会起作用......？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-15T03:56:27.017

```
mean(bwght[bwght$cigs>0,"cigs"]) 
```

我发现语句失败，返回“参数不是数字或逻辑：返回 NA”

转换为矩阵解决了这个问题：

```
mean(data.matrix(bwght[bwght$cigs>0,"cigs"])) 
```

# c# - Mono- 使用 Mono.texteditor 小部件

> ID：12555181
> 
> 赞同：1
> 
> 时间：2012-09-23T18:44:18.003
> 
> 标签：c#, text, mono, text-editor

我正在搞乱 Mono，并试图让语法突出显示的文本编辑器工作。

我正在尝试使用 Mono.TextEditor。我已经引用了它，并且我的项目已构建，但运行时总是出现以下错误：

```
Unhandled Exception: System.TypeLoadException: A type load exception has occurred.
[ERROR] FATAL UNHANDLED EXCEPTION: System.TypeLoadException: A type load exception has    occurred.
The application was terminated by a signal: SIGHUP 
```

我不知道是什么导致了问题。如果我尝试使用 GUI 构建器加载 Mono.TexeEditor 组件，或者我只是使用如下代码创建它，这并不重要：

```
using System;
using Gtk;
using Mono.TextEditor; 

public partial class MainWindow: Gtk.Window
{   
    Mono.TextEditor.TextEditor textEditor = new Mono.TextEditor.TextEditor();
public MainWindow (): base (Gtk.WindowType.Toplevel)
{
    Build ();
    textEditor.ShowAll();
}

protected void OnDeleteEvent (object sender, DeleteEventArgs a)
{
    Application.Quit ();
    a.RetVal = true;
}
} 
```

任何帮助将不胜感激。说到 Mono，我有点不习惯，所以请耐心等待，如果这是一个愚蠢的问题，请原谅我。

编辑：如果相关的话，我在 Linux Mint 上。

# requirejs - 使用 JsTestDriver + RequireJS + QUnit 进行测试

> ID：12555182
> 
> 赞同：3
> 
> 时间：2012-09-23T18:44:28.997
> 
> 标签：requirejs, qunit, js-test-driver

经过大量搜索和相当多的试验，在我看来，所选的工具组合只是没有它。我很想弄错。

好吧，技术堆栈如标题中所述。扩大，

1.  所有“类”的骨干
2.  RequireJS 加载和管理 Backbone 实体之间的依赖关系
3.  QUnit（测试也是 RequireJS 模块）
4.  用于命令行自动化的 JsTestDriver

**设置和代码片段**

*jsTestDriver.conf*

```
server: http://localhost:48080
basepath: path/to/JSTestDriver/
load:
  - lib/qunit/qunit-1.10.0.js
  - lib/qunit/equiv.js
  - lib/qunit/QUnitAdapter.js
  - lib/requirejs/require.js
test:
  - test/tests.js
serve:
  - lib/jquery/jquery-1.7.1.js
  - test/components/ComponentOneTest.js 
```

*测试.js*

```
require({  
    baseUrl : '/test',
    shim : {
        'fixture.object' : ['jquery'],
        'fixture.string' : ['jquery'],
        'fixture.dom' : ['jquery', 'fixture.string'],
        'fixtures' : ['fixture.object', 'fixture.string', 'fixture.dom'],
        'equiv' : ['qunit'],
        'qunit.adapter' : ['qunit', 'equiv']
    },
    paths: {  
        'text' : 'lib/requirejs/text',
        'jquery' : 'lib/jquery/jquery-1.7.1',
        'backbone' : 'lib/backbone/amd/backbone',
        'underscore' : 'lib/underscore/amd/underscore',
        'fixture.dom' : 'lib/fixture/jquery.dom.fixture',
        'fixture.string' : 'lib/fixture/jquery.lang.string',
        'fixture.object' : 'lib/fixture/jquery.lang.object',
        'fixtures' : 'fixture/fixtures',
        'qunit' : 'lib/qunit/qunit-1.10.0',
        'equiv' : 'lib/qunit/equiv',
        'qunit.adapter' : 'lib/qunit/QUnitAdapter'
    }
}, [], function() {
    module('Module 1', {});

    test('test 1', 1, function() {
        ok(true, 'passed');
    });

    asyncTest('test 2', 1, function() {
        start();
        ok(true, 'passed');

    });
}); 
```

*服务器启动命令（来自 JSTD JAR 所在的同一目录）*

```
java -jar JsTestDriver-1.3.4.b.jar --port 48080 
```

*测试运行命令（来自 JSTD JAR 所在的同一目录）*

```
java -jar JsTestDriver-1.3.4.b.jar --runnerMode PROFILE --reset --dryRunFor all --tests all 
```

**什么有效？**

第一个是同步测试。

**什么不起作用？**

第二，异步测试不起作用并超时。

**错误**

*铬控制台*

```
Uncaught TypeError: Cannot read property 'all' of undefined qunit-1.10.0.js:1102
done qunit-1.10.0.js:1102
process qunit-1.10.0.js:1285
(anonymous function) qunit-1.10.0.js:383 
```

*安慰*

```
setting runnermode PROFILE
Chrome: Reset
Chrome: Reset
Chrome 22.0.1229.64: 1 tests [
Module 1 (/test/test/tests.js)
        test test 1
        test test 2]
.F
Total 2 tests (Passed: 1; Fails: 1; Errors: 0) (30025.00 ms)
  Chrome 22.0.1229.64 Windows: Run 2 tests (Passed: 1; Fails: 1; Errors 0) (30025.00 ms)
    Module 1.test test 2 failed (30023.00 ms): Error: Callback '#1' expired after 30000 ms during test step 'start()'
      Error: Callback '#1' expired after 30000 ms during test step 'start()'

Sep 23, 2012 8:36:44 PM com.google.jstestdriver.ActionRunner runActions
INFO: 
```

**笔记**

我确实从[这里](https://github.com/exnor/QUnit-to-JsTestDriver-adapter)下载了最新的 QUnit 适配器。我还尝试了一堆其他的，据说可以工作的适配器，但无济于事。

**问题**

这甚至可能吗？如果是这样，有人会那么好心地阐明这个问题吗？

谢谢你。

**更新（08.04.14）**：

[业力](http://karma-runner.github.io/0.12/index.html)。就这些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:39:55.170

在异步测试中，将一组简单的语句一个接一个地执行是没有意义的。异步测试主要用于如果我们不想在测试中执行耗时任务时停止和启动测试，例如超时或 ajax 调用。为了模仿这一点，我们可以改变

```
asyncTest('test 2', 1, function() {
    start();
    ok(true, 'passed');
}); 
```

至

```
asyncTest('test 2', 1, function() {        
    setTimeout(function(){
        ok(true, 'passed');
        start();
    },2000);    
}); 
```

这将像一个魅力！

# eclipse - eclipse LogCat 有什么替代品吗？

> ID：12555186
> 
> 赞同：1
> 
> 时间：2012-09-23T18:44:52.213
> 
> 标签：eclipse, logcat

也许我被 Visual Studio 调试器宠坏了，但 eclipse 的 LogCat 对我来说似乎真的很丑陋。

1.  没有太多描述性的例外
2.  有时很难找到异常
3.  丑陋的界面浪费我的时间

如果我错了，请告诉我一些很好的 LogCat 教程，它证明它可以加快我的工作，如果没有的话 - LogCat 有什么替代品（也许是插件）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T06:29:23.647

Intellij IDEA 是一个不错的选择，加上 logback。现在阅读日志对我来说更容易一些。

# java - Android 在 FragmentPagerAdapter 中更改片段顺序

> ID：12555191
> 
> 赞同：2
> 
> 时间：2012-09-23T18:45:29.853
> 
> 标签：java, android, android-fragments, android-viewpager, fragmentpageradapter

我在 FragmentPagerAdapter 中有大约 20 个片段，其中包含一个从中选择片段的列表，因此没有片段的重新创建。

```
private List<TitledFragment> fragments;

public SectionsPagerAdapter(FragmentManager fm) {
    super(fm);

    this.fragments = new ArrayList<TitledFragment>();
}

@Override
public Fragment getItem(int i) {
    return fragments.get(i).getFragment();
}

@Override
public int getCount() {
    return fragments.size();
}

@Override
public CharSequence getPageTitle(int position) {
   return fragments.get(position).getTitle();
}

public synchronized List<TitledFragment> getFragments() {
    return fragments;
}

public synchronized void addFragment(TitledFragment fragment) {
    fragments.add(fragment);
    notifyDataSetChanged();
} 
```

FragmentPagerAdapter 设置为 ViewPager 的适配器，然后我重新排序片段（洗牌只是为了测试）

```
Collections.shuffle(mSectionsPagerAdapter.getFragments());
mSectionsPagerAdapter.notifyDataSetChanged(); 
```

并且由于某种原因，只有标题的顺序被更改，即使它为 getItem 返回不同的片段，因为顺序不同。为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T01:29:56.087

您还需要覆盖[`getItemPosition()`](http://developer.android.com/reference/android/support/v4/view/PagerAdapter.html#getItemPosition%28java.lang.Object%29). 默认情况下，此函数始终返回`POSITION_UNCHANGED`，因此当您调用 时`notifyDataSetChanged()`，适配器假定所有片段仍位于同一位置。（它不会`getItem()`再次调用，因为它认为所有必要的片段都已创建。）你的 new`getItemPosition()`应该在洗牌后返回每个片段的新位置。

一个简单的技巧是总是返回`POSITION_NONE`，然后适配器将丢弃所有现有的片段，并在调用时在正确的位置重新创建它们`getItem()`。当然，这样做效率不高，并且还有一个额外的缺点，即正在查看的当前片段可能会发生变化。但是，由于在重新排序片段时可能存在一些错误 - 请参阅[我的问题](https://stackoverflow.com/questions/12510404/reorder-pages-in-fragmentstatepageradapter-using-getitempositionobject-object)- 该`POSITION_NONE`方法可能是最安全的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-28T21:05:14.087

接受的答案是非最佳答案。`POSITION_NONE`从just 中返回`int getItemPosition(Object)`会破坏任何高效片段管理的希望，需要重新实例化所有片段。它也忽略了另一个问题。FragmentPageAdapter 在 FragmentManager 中保存了 Fragment 的缓存副本，并在实例化新的 Fragment 时查找这些副本。如果它发现它认为是匹配的片段，`public Fragment getItem(int)`则不调用该方法并使用缓存的副本。

例如，假设页面 0 和 1 被加载，在 FragmentManager 中会有标记为 0 和 1 的缓存片段。现在在索引 0 处插入了一个页面（不要忘记调用`notifyDataSetChanged()`），旧索引 0 变为 1 并且 1 变为 2（这是使用方法发出的信号`public int FragmentPageAdapter.getItemPosition(Object)`）。对于第 0 项，返回 POSITION_NONE（因为它是新位置），因此`public Object instantiateItem(ViewGroup, int)`为位置 0 调用该方法：

```
public Object instantiateItem(ViewGroup container, int position) {
    if (mCurTransaction == null) {
        mCurTransaction = mFragmentManager.beginTransaction();
    }

    final long itemId = getItemId(position);

    // Do we already have this fragment?
    String name = makeFragmentName(container.getId(), itemId);
    Fragment fragment = mFragmentManager.findFragmentByTag(name);
    if (fragment != null) {
        if (DEBUG) Log.v(TAG, "Attaching item #" + itemId + ": f=" + fragment);
        mCurTransaction.attach(fragment);
    } else {
        fragment = getItem(position);
        ... 
```

看看会发生什么，找到了位置 0 的缓存片段，并且您想要在位置 1 中的片段现在在位置 0，您想要在位置 2 中的片段现在在位置 1 并且在位置 2 您得到一个新片段返回FragmentPageAdapter.getItem(int) 是位置 1 的副本。

如何解决这个问题？我看到了很多关于 SO 的建议，包括：

1.  始终从 FragmentPageAdapter.getItemPosition() [https://stackoverflow.com/a/7386616/2351246](https://stackoverflow.com/a/7386616/2351246)返回 POSITION_NONE - 这个答案忽略了效率和内存管理（如果不清除缓存的片段，最终将无法工作）
2.  跟踪片段标签[https://stackoverflow.com/a/12104399/2351246](https://stackoverflow.com/a/12104399/2351246)，这依赖于可能改变的实现细节。
3.  最糟糕的是，通过对 FragmentPageAdapter 实现[https://stackoverflow.com/a/13925130/2351246](https://stackoverflow.com/a/13925130/2351246)进行逆向工程来使用魔法，这太可怕了。

无需破坏内存管理或跟踪`FragmentPagerAdapter`. 所有答案中缺少的细节是想要**重新排序片段**的 FragmentPagerAdapter 还必须实现该方法`public long getItemId(int position)`：

```
 @Override
    public long getItemId(int position) {
        return System.identityHashCode(fragments.get(position));
    } 
```

这提供了一个非基于位置的 ID，即使它移动页面，它也可用于在 FragmentManager 缓存中查找正确的片段。

# mysql - 使用mysql返回一个字段和所有行的总和

> ID：12555195
> 
> 赞同：2
> 
> 时间：2012-09-23T18:46:17.953
> 
> 标签：mysql

我有一张桌子

```
id      admission       amount          paid_date 

12      0001            1750            2012-09-23
13      0002            1750            2012-09-23
14      0010            1750            2012-09-23 
```

我使用了以下查询

```
SELECT *, (SELECT SUM(amount) ) 
FROM gains
WHERE  `paid_date`  LIKE '%2012-09-23%'
ORDER BY `paid_date` 
```

但我的输出是

```
id      admission       amount          paid_date     (SELECT SUM(amount) ) 

12      0001            1750            2012-09-23          5250 
```

是否可以使用一个查询分别获取所有 3 条记录和金额的总和？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T18:56:24.130

```
SELECT *, 
      (SELECT SUM(amount) 
       FROM gains
       WHERE  `paid_date` LIKE '%2012-09-23%') as sum_amount
FROM gains
WHERE  `paid_date`  LIKE '%2012-09-23%'
group by admission
ORDER BY `paid_date` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T19:01:42.287

```
SELECT *, (SELECT SUM(amount) ) 
FROM gains
WHERE  `paid_date`  LIKE '%2012-09-23%'
GROUP BY admission 
```

# ios - iOS SDK 上的 Mac OS X 类似工作表

> ID：12555198
> 
> 赞同：0
> 
> 时间：2012-09-23T18:46:21.703
> 
> 标签：ios, macos, sdk, cocoa-sheet

现在我正在构建一个想要呈现 ViewController 的应用程序。我想知道是否有任何控件可以像 iPad 上的 os x 表一样显示它。如果没有可用的控制，我将如何实现这样的目标？

谢谢，维林德博拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T08:45:59.550

OSX 表是模态窗口。

如果你真的需要 ios 中的模态窗口，那么你需要创建一个自定义视图，通过 modalViewControllers 将其加载为模态视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T19:24:26.043

iOS 上最接近的等效界面称为[popover](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/Popovers.html)。但它并不完全相同——请务必仔细阅读与之相关的 UI 指南，因为弹出视图并不适用于 Mac OS X 上的所有情况。

# jquery - JQuery 和 Ajax：显示/隐藏 div

> ID：12555202
> 
> 赞同：7
> 
> 时间：2012-09-23T18:47:01.947
> 
> 标签：jquery, ajax, html, hide, show

我有这个[例子](http://www.vuotoaperdere.org/jqueryajax.htm)。

当我单击时，通过 Ajax 加载动态内容。在加载的页面中有一个链接，可以关闭 div。它可以工作，但是当 div 关闭时（使用 hide()），单击链接不会重新打开加载的页面。

为什么？如何创建一个按钮，显示/隐藏加载了 Ajax 的 div？

**调用页面：**

```
<script type="text/javascript">
function getAjax(divdett,pageload) {
$(function(){$(divdett).load(pageload);});}
</script>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>click</title>
</head>
<body>
<a href="javascript:getAjax('#siteloader','jquery_divajax.htm');">click</a>
<div id="siteloader"></div>
</body> 
```

**包含页面：**

```
<script type="text/javascript">
function delAjax(divdett) {
$(divdett).hide();
}
</script>
OK!
<a id="#chiudi" href="#" onclick="delAjax('#siteloader');">chiudi</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-17T08:07:22.747

我认为它不起作用，因为 HTML DOM 已经加载。对于动态绑定，您需要使用函数`.bind()`或`.live()`（[bind() 的文档](https://api.jquery.com/bind/)）。

例如：

```
$( "#foo" ).bind( "click", function() {
  $( this ).hide(); // or show();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T18:49:01.803

在您的“关闭”按钮中，您调用`hide()`.

将您的功能更改`getAjax`为：

```
function getAjax(divdett,pageload) {
$(function(){$(divdett).load(pageload).show();});} 
```

我刚刚添加`.show()`以确保 div 是可见的，即使它之前已被隐藏。

请注意，我尊重原始构造，但这太复杂了：`$(function`当您可以简单地做时无需调用

```
function getAjax(divdett,pageload) {
$(divdett).load(pageload).show();} 
```

如果您只想有一个按钮，您可以删除第二个文件中的一个并将 getAjax 函数更改为

```
function getAjax(divdett,pageload) {
     var div = $(divdett);
     if (div.is(':visible')) div.hide();
     else div.load(pageload).show();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-17T06:12:01.623

好吧，我的回答可能会对您有所帮助...为您提供场景...

您可以使用 if else 来响应 ajax 请求

```
$.ajax(
            {
                url:"ChkLogin.php",
                type:"POST",
                dataType: 'json',
                data: {usernm: unm, passwrd: pass },
                success:function(myoutput)
                {                   
                    $(":hidden").val(myoutput.srno);
                    if(myoutput.flag=="1")
                    {                                       
                        window.location="chat.php";
                    }
                    else
                    {
                        $("#msg").html("Invalid Login");
                    }
                }

            }); 
```

> 是 1 中的响应，然后执行此操作，否则执行此操作

喜欢....

```
if(myoutput.flag=="1")
                    {                                       
                        $("#div").hide(4000);
                    }
                    else
                    {
                        $("#div").show(4000);
                    } 
```

> 这里 4000 是隐藏或显示 DIV 所需的毫秒（毫秒）] 希望这会对您有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T19:07:06.070

我会使用一种不显眼的方法，将 html 与 javascript (jQuery) 代码分开，就像@dystroy 很好指出的那样，只需在发出 ajax 请求之前显示 div 以确保它是可见的：

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
    <title>click</title>

    <script type="text/javascript">
        $(function() {
            $('#clickme').on('click', function(event) {
                $('#siteloader').show().load('jquery_divajax.htm');
                event.preventDefault();
            });

            $('#siteloader').on('click', '#chiudi', function(event) {
                $('#siteloader').hide();
                event.preventDefault();
            });
        });
    </script>
</head>

<body>
    <a id="clickme" href="">click</a>
    <div id="siteloader"></div>
</body> 
```

# javascript - Phantomjs 不执行 page.evaluate 函数中的函数

> ID：12555203
> 
> 赞同：15
> 
> 时间：2012-09-23T18:47:04.263
> 
> 标签：javascript, node.js, phantomjs

我正在使用 PhantomJS 节点模块 ( [https://github.com/sgentle/phantomjs-node](https://github.com/sgentle/phantomjs-node) ) 抓取 Facebook 页面，但是当我尝试评估该页面时，它不会评估我传递给它的函数。在独立脚本中执行它并使用 Node 解释器运行它可以工作。Express.js 应用程序中的相同代码不起作用。

这是我的代码

```
facebookScraper.prototype.scrapeFeed = function (url, cb) {
    f = ':scrapeFeed:';

    var evaluator = function (s) {
        var posts = [];

        for (var i = 0; i < FEED_ITEMS; i++) {
            log.info(__filename+f+' iterating step ' + i);
            log.info(__filename+f+util.inspect(document, false, null));
        }

        return {
            news: posts
        };
    }

    phantom.create(function (ph) {
        ph.createPage(function (page) {
            log.fine(__filename+f+' opening url ' + url);
            page.open(url, function (status) {
                log.fine(__filename+f+' opened site? ' + status);
                setTimeout(function() {
                    page.evaluate(evaluator, function (result) {
                        log.info(__filename+f+'Scraped feed: ' + util.inspect(result, false, null));
                        cb(result, ph);
                    });
                }, 5000);
            });
        });
    });
}; 
```

我得到的输出：

```
{"level":"fine","message":"PATH/fb_regular.js:scrapeFeed: opening url <URL> ","timestamp":"2012-09-23T18:35:10.151Z"}
{"level":"fine","message":"PATH/fb_regular.js:scrapeFeed: opened site? success","timestamp":"2012-09-23T18:35:12.682Z"}
{"level":"info","message":"PATH/fb_regular.js:scrapeFeed: Scraped feed: null","timestamp":"2012-09-23T18:35:12.687Z"} 
```

因此，如您所见，它使用 null 参数调用幻像回调函数（评估函数中的第二个参数），但它不执行第一个参数（我的评估器函数，它打印迭代步骤 X）。

任何人都知道问题是什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-23T19:36:02.207

我不确定您使用的是什么版本的 PhantomJS，但是对于 1.6+ 版本的文档，在评估脚本中记录会将结果记录在包含的页面中。它不会登录到您的控制台。为此，您必须将日志记录绑定到 onConsoleMessage 事件的页面：

```
 page.onConsoleMessage = function (msg) { console.log(msg); }; 
```

至于结果不可用： page.evaluate 函数接受这样的参数 - 第一个是要执行的函数，其余的作为输入传递给该函数。结果直接返回：

```
 var title = page.evaluate(function (s) {
    return document.querySelector(s).innerText;
 }, 'title');
 console.log(title); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-29T09:46:29.953

`evaluate`在沙盒模式下运行，这意味着包含环境中定义的所有变量都不可用，包括`cb`甚至`phantom`您可能定义的对象或任何函数。

您可以将信息显式隧道传输到沙箱中，作为`evaluate`.

```
page.evaluate(function(cb){...},  cb); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-07-07T07:33:58.677

PhantomJS 的`page.evaluate()`功能是 DOM 上下文（页面上下文）的大门。只能通过此函数访问 DOM。由于该函数是沙盒化的，因此您不能使用在其外部定义的变量，它们必须显式传入。[但是（文档](http://phantomjs.org/api/webpage/method/evaluate.html)）可以传入和传出的内容有限制：

> **注意：**函数的参数和返回值`evaluate`必须是简单的原始对象。经验法则：如果它可以通过 JSON 序列化，那就没问题了。
> 
> **闭包、函数、DOM 节点等将*不起作用*！**

[phantomjs-node](https://github.com/sgentle/phantomjs-node)是 PhantomJS 和 node.js 之间的桥梁，因此其 API 与 PhantomJS 本身略有不同。在 PhantomJS 中同步的函数不会在 phantomjs-node 中返回任何内容，而是在传入结果的地方进行回调。回调在外部上下文中执行并且没有沙盒。

参数可以通过这种方式传递：

```
page.evaluate(function(arg1, arg2){
    // use arg1 and arg2 in the page
    // return `result`
}, function(result){
    // use `result` in the node context
}, "some arg1", "another arg"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-28T16:29:33.850

以下内容对我评估页面有用：

```
page.evaluate(function(s) {
  return document.querySelector(s)
}, 'body').then(res => {
  console.log(res)
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-06T14:48:51.807

有人有一个评估块，里面只有一个 console.log 行，它从不执行，它并不总是沙盒问题。

查看链接：[在 PhantomJS 我不能包含 jQuery，没有 jQuery 我不能发布表单数据](https://stackoverflow.com/questions/15847123/on-phantomjs-page-evaluate-dont-execute)

# ios - 如何在表格视图中实现搜索（使用 FRC）

> ID：12555208
> 
> 赞同：3
> 
> 时间：2012-09-23T18:47:33.010
> 
> 标签：ios, cocoa-touch, uitableview, uisearchdisplaycontroller

基础很简单：只需`<UISearchBarDelegate,UISearchDisplayDelegate>`在表视图控制器中实现。这是[一个足够的教程](http://timroadley.com/2012/03/05/core-data-basics-part-7-search-bars/)。

诀窍是要意识到有两个控制器：一个表格视图控制器和一个搜索显示控制器。每个控制器都有自己的表格视图。因此有两个表视图在起作用：普通表视图和搜索显示表视图。当委托方法有一个 UITableView 参数时，区分传入哪个表视图，并相应地做不同的事情。

除了以上基础知识，数据结构成为我的主要挑战。更具体地说，如何过滤和存储搜索结果？我们有三个选择：

**一个。**

*   一个用于普通表视图的 FRC

*   创建一个数组属性来存储结果

*   用于`filteredArrayWithPredicate`过滤获取的对象（数组）

*   为 FRC 指定缓存以将获取的对象存储在内存中以提高性能

**B.**

*   一个用于普通表视图的 FRC

*   修改 FRC 的谓词来做过滤。Apple doc 指示执行此操作的 3 个步骤：

    1.  删除 FRC 缓存（最好不要一开始就使用）
    2.  更改谓词
    3.  调用 performFetch

**C。**

两个 FRC，每个表视图一个。[此热门帖子](https://stackoverflow.com/questions/4471289/how-to-filter-nsfetchedresultscontroller-coredata-with-uisearchdisplaycontroll)的已接受答案中提供了详细的实现

* * *

**我认为A是正确的方法。**我的理由包括：

A 把所有的工作都做好了。它只需要对具有 FRC 属性的表视图控制器进行微不足道的更改。更具体地说，只需在每个委托方法中区分两个表视图，并添加一个 NSArray 属性来存储获取结果。当然，还要添加过滤代码。

B 有一个潜在的缺点：FRC 委托方法会混淆正在使用哪个获取请求？是在搜索之前，还是在搜索期间，还是在搜索之后？尽管可能有解决方案，但如果解决方案 A 有效，我认为不值得花时间。

第二个缺点是，如果我们想要动态更改搜索结果。用户在搜索栏中输入的每个字母都会导致 FRC 执行 Fetch，这是相当昂贵的。

C 通过使用两个 FRC 避免了 B 的第一个缺点，但出于完全相同的原因它遭受了第二个缺点。

**其他需要考虑的事项：**

*   在后台队列中进行过滤。因此，当用户在搜索栏中输入内容时，无论您的过滤成本多么昂贵，屏幕都不会被屏蔽。

*   创建一个辅助方法来区分两个表视图。在相关的委托方法中调用辅助方法，可以使代码更简洁。

以上是我对在表格视图中实现搜索的理解。如有错误，请帮忙指出。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T04:08:02.107

我认为关于 UITableViews 和 FRC 存在一些概念上的错误。FRC 只是一个从 Core Data 获取数据的类，它与 MOC 一起确保它保持数据完整性，即使您有多个同时访问同一个数据库的选项卡，每个选项卡都进行自己的更新。在幕后，有一些流程正在发挥作用，以确保一个选项卡中的更新反映在所有其他选项卡中。我实际上要说的是，如果您绕过推荐的方法，就会产生后果。

performFetch 输出可以存储在缓存中，如果由于某种原因需要执行 [tableview reloadData]，则跳过获取；您当然可以通过编程让 tableview 从多个来源获取其数据，但我认为没有任何理由这样做。如果多个来源的唯一原因是在搜索之前跟踪结果，那么应该有一种方法来重置谓词，以便 FRC 获取所有（当前）记录。在我的应用程序中，将所有或所有记录放在搜索栏中，会导致谓词 1=1 获取所有记录。同样，这在单个视图应用程序中可能不是那么相关，但是具有多个并发更新的选项卡式应用程序将需要这样做以确保数据是最新的。

# php - PHP 验证并将信息存储到会话变量中

> ID：12555212
> 
> 赞同：3
> 
> 时间：2012-09-23T18:47:48.560
> 
> 标签：php, html, validation, session

我在 html 中设置了 2 个文本框和一个下拉选项列表。我正在尝试使用 php 来验证这些文本框是否已填写。如果单击提交按钮（'btnCalculate'），则进行验证，如果文本框中没有任何内容，则会在其旁边弹出错误消息（'pamountErrorMsg，irateErrorMsg'）。如果在文本框中输入了内容，浏览器会将信息保存到 Session["pamount"] 或 "irate" 中。我无法验证空白文本框并将变量添加到 Session 中，然后才能在下一页中使用它们。现在它根本没有验证任何东西。我的语法有什么问题（如果有的话）？

正在考虑只使用 "php?$pamount = $_SESSION["pamount"]; ?>" 来创建我需要读取会话变量的变量，对吗？

**PHP**

```
session_start();    // start PHP session! 

header('Cache-Control: no-cache');
header('Pragma: no-cache');

$pamountErrorMsg = "";
$irateErrorMsg = "";

$btnCalculate = $_GET['btnCalculate'];
$irate = $_GET['irate'];
$pamount = $_GET['pamount'];    
    $y2d = $_GET['y2d'];
if(isset($btnCalculate))
{
    if(strlen(trim($pamount)) <= 0)
    {
        $pamountErrorMsg = "Principal Amount cannot be empty";
        $irateErrorMsg = "";
    }
    else if(strlen(trim($irate)) <= 0)
    {
        $irateErrorMsg = "The interest rate cannot be empty";
        $pamountErrorMsg = "";
    }
    else
    {
        $_SESSION["pamount"] = $_GET["pamount"];
        $_SESSION["irate"] = $_GET["irate"];
                    $_SESSION["y2d"] = $_GET["y2d"];
        header("Location: Lab3DisclamerZCL.php");
        exit( );
    }
}
?> 
```

**HTML**

```
<form method='get' action="Result.php">
<table>
    <tr>
        <td>
        Principal Amount
        </td>
        <td>
        <input type='text' class='input' name='pamount' size='30' />
        </td>
        <td class='error'>
        <?php echo $pamountErrorMsg; ?>
        </td>
    </tr>
    <tr>
        <td>
        Interest Rate (%)
        </td>
        <td>
        <input type='text' class='input' name='irate' size='30' />
        </td>
        <td class='error'>
        <?php echo $irateErrorMsg; ?>
        </td>
    </tr>
    <tr>
        <td>
        Years to Deposite
        </td>
        <td>
        <select name='y2d' selected='5'>
                <option value='1'>1</option>
                <option value='2'>2</option>
                <option value='3'>3</option>
                <option value='4'>4</option>
                <option value='5' selected='selected'>5</option>
                <option value='6'>6</option>
                <option value='7'>7</option>
                <option value='8'>8</option>
                <option value='9'>9</option>
                <option value='10'>10</option>
        </td>
    </tr>
        <tr>
            <td>&nbsp;</td>
            <td>
                <input type='submit' class='button' name='btnCalculate' value='Calculate'/>&nbsp;&nbsp;
                <input type='reset' class='button' name='btnReset' value='Reset' />

            </td>
        </tr>
</table>
    </form> 
```

**我的 Result.php**（*进行中*）

```
<?php error_reporting(E_ALL); ?>
<?php 
session_start();    // retrieve PHP session! 
header('Cache-Control: no-cache');
header('Pragma: no-cache');
if (!isset($_SESSION["name"]))
{
    header("Location: Calculator.php");
    exit( );
}
        if(!isset($_SESSION["pamount"]))
{
    $pamount = $_SESSION["pamount"];
}
if(!isset($_SESSION["irate"]))
{
    $irate = $_SESSION["irate"];
}
if(!isset($_SESSION["pamount"]))
{
    $y2d = $_SESSION["y2d"];
}
?> 
<html>
<head>
<title>Results</title>
<link rel = "stylesheet" type = "text/css" href = "style.css" />
</head>
<body>
<h3 class="distinct">Thank you <?php echo $_SESSION["name"]?>, for using out deposite calculation tool.</h3>
<p>Following is the results of calculation </p>
<form action='Result.php' method='post'>
<table>
                 <?php

                 $pamount = $_SESSION["pamount"];
                 $irate = $_SESSION["irate"];
                 $y2d = $_SESSION["y2d"];
                $runningPrincipal = $pamount;

                for($i = 1; $i <= $y2d; ++$i)
                {
                    $interest = $runningPrincipal * $irate * 0.01;

                    printf("<tr><td>%s</td><td>\$%.2f</td><td>\$%.2f</td></tr>", $i, $runningPrincipal, $interest);

                    $runningPrincipal += $interest;

                }
                ?>
                </table>
                </form>
<?php session_destroy();?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T20:37:02.947

您需要在给出 HTML 表单的同一页面上进行验证，即 Calculator.php。成功验证后，您会将输入的值分配给会话变量，并重定向到 Result.php，您可以在其中进行计算并显示结果。

# css - CSS：让 div 正确重叠？

> ID：12555213
> 
> 赞同：0
> 
> 时间：2012-09-23T18:47:52.600
> 
> 标签：css, html, positioning

这个问题可以在[http://dev.breinwijzer.be/agenda-2012](http://dev.breinwijzer.be/agenda-2012)看到。

我有一系列共享 drupal 生成的类的 div `.views-row`。这些 div 需要垂直增长。他们中的大多数人都这样做，但最近添加在顶部的那些重叠。这是我到目前为止所尝试的：

我试过`min-height`了，但这只会使 div 的高度穿过页面。现在我只留下了一个组合，`min-height`显然`height`因为它们是 div，它们被显示为块，所以我不需要改变任何我认为的东西。

在另一个网站上，我遇到了某人的解决方案，使用`clear:both`and的组合`overflow:auto`。这种组合实际上并没有显示滚动条，而是显示了尊重彼此高度的 div，因为它。但这次不是，这次我们在进行这种组合时会看到滚动条。

显然没有`position:absolute;`——为什么会有呢？

所以我真的没有想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T18:54:14.827

问题是你的 HTML，而不是你的 CSS。

![通过检查元素的 HTML 屏幕截图](../Images/421db16a6f0d34d841563c3f1e33ab9b.png)

您的第一个“views-row”包含其余的行，这些应该在它之外。如您所见，所选块及其下方的块不应包含在该父级中，它们应该是该元素的兄弟。

为了进一步提供帮助，我需要看看你是如何输出 HTML 的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T18:55:23.107

我不确定这是否是有意的，但都`.views-row`在第一个里面。[http://cl.ly/image/1X1x2b170O0m](http://cl.ly/image/1X1x2b170O0m)

首先尝试验证您的网站并修复 html 问题：尤其是与省略的结束标签相关的问题 - 没有结束标签的打开元素。

# ubuntu - 在 Juno 中安装 Eclipse 颜色主题插件的“权限被拒绝”

> ID：12555216
> 
> 赞同：0
> 
> 时间：2012-09-23T18:48:08.693
> 
> 标签：ubuntu, eclipse-plugin

我运行 Ubuntu 12.04 并成功安装了 Eclipse Juno 及其随附的 SDK。我将文件夹放入 /opt 目录。

我想安装流行的 Eclipse 插件 Eclipse Color Theme，但我遇到了这个错误消息。[http://i.stack.imgur.com/q8ywd.png](http://i.stack.imgur.com/q8ywd.png)

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T19:17:10.240

您没有 /opt 的写入权限。您可以使用以下命令来授予自己所有权。

```
sudo chown -R USER_NAME /opt/ECLIPSE_DIRECTORY 
```

当然，您必须将 USER_NAME 替换为您的用户名或组，并将 ECLIPSE_DIRECTORY 替换为 Eclipse 的根目录。如果您有 /opt/eclipse 并且您的名字是“Jack”，那么命令将是

# jquery - 找出实例名称并销毁并切换到源模式

> ID：12555221
> 
> 赞同：2
> 
> 时间：2012-09-23T18:48:45.460
> 
> 标签：jquery, replace, ckeditor, instance, destroy

我有三个问题要问 ckeditor

1.  如何找出 ckeditor 实例的名称？

2.  我想销毁实例并在没有ckeditor的情况下切换回正常状态。在此[线程](https://stackoverflow.com/questions/3613215/how-to-properly-destroy-ckeditor-instance)中是一个示例，但它不知道我的实例的名称。

3.  如何在源代码模式和所见即所得模式之间切换所有编辑器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T17:26:45.703

1.  实例存储在`CKEDITOR.instances`对象中。你可以遍历这个对象并找到你想要的任何东西。实例以 textarea 的 id 属性命名：

    `<textarea id="foo" ... </textarea>`将创建`CKEDITOR.instances.foo`实例。

    您可以使用`CKEDITOR.instances.foo.element`and `CKEDITOR.instances.foo.element.$`（本机 DOM 元素）访问您的文本区域。

    如果没有指定 id，例如当你用`ckeditor`类替换 editors 时，后续名称如下：`editor1, editor2, ... , editorN`

2.  一旦你知道了 id（见：1.），你可以简单地这样做：

    ```
    if ( CKEDITOR.instances.foo ) 
        CKEDITOR.instances.foo.destroy();
    CKEDITOR.replace( 'foo' ); 
    ```

3.  `CKEDITOR.instances.foo.execCommand( 'source' )`

# javascript - 如果我正在编码将用作查询字符串参数的 URI：encodeURI 或 encodeURIComponent

> ID：12555230
> 
> 赞同：7
> 
> 时间：2012-09-23T18:49:34.180
> 
> 标签：javascript

来自旧帖子：[我应该使用 encodeURI 还是 encodeURIComponent 来编码 URL？](https://stackoverflow.com/questions/4540753/encodeuri-or-encodeuricomponent)， 它说：

```
encodeURI assumes that the input is a complete URI that might have some 
characters which need encoding in it.

encodeURIComponent will encode everything with special meaning, so 
you use it for components of URIs such as 
```

如果我需要将`URI`as 查询字符串参数编码怎么办？

例如

```
var url = "http://example.com/?next=" + encodeURI(url) 

or

var url = "http://example.com/?next=" + encodeURIComponent(url) 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-29T05:31:52.987

如果要对查询字符串进行编码，请使用`encodeURIComponent`. 原因很简单：在其他几个字符中，它会编码正斜杠和不会编码的 amersand `encodeURI`。

**编码URI组件**

什么用途？假设您要对 URL 进行编码并将其传递到查询字符串中，这将使您可以对所有字符进行编码，从而得到如下内容：

```
encodeURIComponent('http://abc.com/my page.html?name=bob&foo=bar') 
```

得到结果

```
"http%3A%2F%2Fabc.com%2Fmy%20page.html%3Fname%3Dbob%26foo%3Dbar" 
```

您现在可以像这样安全地将其作为查询字符串传递：

```
http://mysite.com/foo=http%3A%2F%2Fabc.com%2Fmy%20page.html%3Fname%3Dbob%26foo%3Dbar 
```

请注意两个 URL 如何具有查询字符串参数`foo`，但这没关系，因为编码的 URL 具有该编码。整个`foo`参数为

```
http%3A%2F%2Fabc.com%2Fmy%20page.html%3Fname%3Dbob%26foo%3Dbar 
```

`foo=bar`与第二个编码的 URL 中的没有冲突。

**编码URI**

现在，如果您想对已有的完整 URL 进行编码，请使用`encodeURI`.

```
encodeURI('http://abc.com/my page.html?name=bob&foo=bar') 
```

会给你

```
"http://abc.com/my%20page.html?name=bob&foo=bar" 
```

请注意这如何使 URL 保持有效，并且在这种情况下仅对空间进行编码。如果你在上面运行`encodeURIComponent`，你会得到你在我的第一个例子中看到的一团糟。

**编码了哪些字符？**

正如 yabol 在您的第一篇文章中评论的那样，此页面向您展示了[encodeURI、encodeURIComponent 和 escape: lower ASCII characters 之间的区别](http://www.javascripter.net/faq/escape-encodeuri-lower-ascii.htm)。您特别注意到它对以下不`encodeURIComponent`编码的字符进行了编码：`encodeURI`

```
chr     encodeURI(chr)  encodeURIComponent(chr)
 +           +               %2B
 /           /               %2F
 @           @               %40
 #           #               %23
 $           $               %24
 &           &               %26
 ,           ,               %2C
 :           :               %3A
 ;           ;               %3B
 =           =               %3D
 ?           ?               %3F 
```

**你的问题**

您使用是正确的，`encodeURIComponent`因为您正在为查询字符串编码 URL。这可以追溯到我的第一个例子。如果您的查询字符串 URL（您正在编码的那个）有一个查询字符串，您希望它成为 的一部分`next`，而不是您的主 URL 的一部分。

**错误的**

```
"http://example.com/?next=" + encodeURI('http://abc.com/my page.html?name=bob&foo=bar')
"http://example.com/?next=http://abc.com/my%20page.html?name=bob&foo=bar" 
```

您的 example.com url 有两个查询字符串参数：`next`和`foo`

**对**

```
"http://example.com/?next=" + encodeURIComponent('http://abc.com/my page.html?foo=bar')
"http://example.com/?next=http%3A%2F%2Fabc.com%2Fmy%20page.html%3Fname%3Dbob%26foo%3Dbar" 
```

您的 example.com url 仅包含一个查询字符串参数：`next`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T04:15:17.010

如果您需要将 编码`URI`为查询字符串参数，那么您绝对应该使用 (2)

```
var url = "http://example.com/?next=" + encodeURIComponent(query_url); 
```

以谷歌翻译器为例，每当你在翻译部分输入地址时，地址都会被转换为一个 URI 组件，然后传递给谷歌服务器

如果需要将任何 URL 用作组件，那么`encodeURIComponent(String);`是您的最佳选择

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T18:53:19.643

您链接的问题中的第二个答案已经很清楚地说明了这一点：“如果您正在编码一个字符串以放入 URL 组件（查询字符串参数），您应该调用 encodeURIComponent.

如果要对现有 URL 进行编码，请调用 encodeURI。”

因此，在您的示例中， encodeURIComponent 是正确的。

# javascript - 如何在javascript中定义输入ID？

> ID：12555238
> 
> 赞同：2
> 
> 时间：2012-09-23T18:50:17.707
> 
> 标签：javascript

嗨，我不擅长 javascript。这是我的 ajax 搜索自动建议代码的一部分，我需要用来自输入的文本替换“单词”文本。我怎样才能做到这一点？

```
<input type="text" id="selectedInput"/><ul id="list"></ul>    
<script>    
var keyword = "word";  (wrong code)      
url: "http://itunes.apple.com/search?term=" + keyword + "&entity=musicTrack",
.. 
```

见[http://jsfiddle.net/coladeu/Qhj5N/3/](http://jsfiddle.net/coladeu/Qhj5N/3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T18:53:53.507

这将获得文本框中的值。

`var keyword = document.getElementById('selectedInput').value;`

**编辑：**

仅供参考，同样的事情可以使用 jQuery 完成：

`$('#selectedInput').val();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T18:56:51.500

你可以使用`$('#selectedInput').val()`这里是一个例子

[http://jsfiddle.net/Qhj5N/4/](http://jsfiddle.net/Qhj5N/4/)

# java - 如果在字符串中找不到特定字符，如何减去 -1

> ID：12555239
> 
> 赞同：0
> 
> 时间：2012-09-23T18:50:32.667
> 
> 标签：java, string, char

我需要一些关于如何编程的提示，这种方法适用于刽子手游戏`guessCh`，是用户猜到`secretCh`的字母，而是密码中的字母，它们一次来自一个`while() loop`。但是我需要的是，而不是仅仅`if (guessCh != secretCh)`因为秘密词由几个字母组成，所以它会从秘密词中的所有字母中减去不应该减去的点，而不是仅仅因为它不起作用。只有在任何字母/或秘密单词中都`guessCh`找不到字符时，它才应该减去-1。`secretCh`

我似乎被困住了，我知道这很简单......但是给我一个骨头。我已经花了很多时间在这上面。

```
private void nTurns(char guessCh, char secretCh) {
    //Create an array that stores already used letters
    if (guessCh != secretCh) {
        nTurnsLeft--;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T18:54:33.273

您可以对您的秘密中找到的字符进行 ArrayList 处理。然后使用 `.contains(Char c)`ArrayList 中的方法

一个例子：

```
ArrayList<Char> secret = new ArrayList<Char>();
secret.add('w');
secret.add('o');
secret.add('r');
secret.add('l');
secret.add('d');

if(secret.contains(new Char('x')) {
    System.out.println("Found");
} else {
    System.out.println("Not Found");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T19:08:22.997

我想这可能是作业，所以gtgaxiola的回答可能是老师不想看到的。以下是如何在普通字符数组上实现等效的 .contains() ，因此您不必在当前代码中进行太多更改。

```
 char[] secretCh = new char[]{'s', 'e', 'c', 'r', 'e', 't'};
    char guessCh = 'e';

    boolean found = false;
    for(int i = 0; i < secretCh.length; i++) { // loop through each character in the secretCh array
        if (secretCh[i] == guessCh) {
            found = true;
            break;
        }
    }
    if (found)
        System.out.println("guessCh is a letter in the secret word."); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-23T19:14:18.943

String 对象已经内置了这个功能。

你真正需要的是这样的：

```
if(secretStr.indexOf(guessCh) < 0) nTurnsLeft--; 
```

indexOf 返回字符串 secretStr 中字符guessCh 的位置索引。如果未找到guessCh，则indexOf 返回-1；

# c# - BAL 中的依赖注入而不添加对 DAL 的项目引用

> ID：12555241
> 
> 赞同：1
> 
> 时间：2012-09-23T18:50:35.233
> 
> 标签：c#, entity-framework, dependency-injection, domain-driven-design, ninject

这与[此处](https://stackoverflow.com/questions/12538693/how-to-avoid-having-bal-dependent-on-dal-due-to-di-container-binding-requirement)发布的问题有关。我的核心项目有以下 .

```
public interface IRepository<T> : IDisposable  
{  
    IQueryable<T> All { get; }  
    IQueryable<T> AllIncluding(params Expression<Func<T, object>>[] includeProperties);  
    TEntity Find(int id);  
    void InsertOrUpdate(T entity);  
    void Delete(int id);  
    void Save();  
}  

public class Customer  
{  
    public int Id { get; set; }  
    public string FirstName { get; set; }  
    public string LastName { get; set; }   
} 
```

DAL 有 CustomerContext 和 CustomerRepository。该项目依赖于实体框架。

```
public class CustomerContext : DbContext
{
    public DbSet<Customer> Customers { get; set; }
}

public class CustomerRepository : IRepository<Customer>
{

} 
```

接下来是我的 BAL。这是一个类库项目。我需要对客户存储库执行一些操作，但我想在不直接添加对 DAL 的依赖的情况下执行此操作。我正在尝试使用 ninject 通过 DI 进行操作。我正在 IRepository 和 CustomerRepository 之间设置绑定，如下所示。

```
var Kernel = new StandardKernel();  
Kernel.Bind<IRepository>().To<CustomerRepository>(); 
```

1.  假设我有一个 UI 应用程序，它将从 BAL 调用一些 API。上面用于将 IRepository 绑定到 CustomerRepository 的代码到底应该放在哪里？有没有办法通过 App.config 进行这种绑定？

2.  如您所见，如果我将它放在 BAL 中的某个位置，那么我将不得不添加对 DAL 项目的引用，因为我使用的是在 DAL 层中定义的 CustomerRepository。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T06:43:10.127

首先：不要使用暴露`IQueryable<TEntity>`.

1.  您在编写单元测试时是否尝试过模拟它们？
2.  它们就是我们所说的泄漏抽象。

你的问题：

> 假设我有一个 UI 应用程序，它将从 BAL 调用一些 API。上面用于将 IRepository 绑定到 CustomerRepository 的代码到底应该放在哪里？有没有办法通过 App.config 进行这种绑定？

为什么不能从 UI 项目中向 DAL 添加依赖项？它还将简化安装，因为在您发布项目和/或创建安装包时会自动包含 DAL。

> 如您所见，如果我将它放在 BAL 中的某个位置，那么我将不得不添加对 DAL 项目的引用，因为我使用的是在 DAL 层中定义的 CustomerRepository。

不要在 BAL 中创建引用或配置。UI 项目是根。因此，应将任何配置添加到其中。

我通常在每个项目中创建一个组合根，然后从我的启动项目中调用每个程序集的根。这意味着启动项目只需要知道我们得到了哪些项目，而不需要知道它们包含什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T19:04:41.330

你永远不会在低层设置你的容器。相反，您在层次结构的某处有一个**组合根。**对于桌面应用程序，这`Main`是一个不错的选择。在 Web 应用程序中，它将`Global.asax`是`Application_Start`.

# facebook - 在 .NET 中获取 Facebook 用户 ID

> ID：12555245
> 
> 赞同：0
> 
> 时间：2012-09-23T18:51:13.150
> 
> 标签：facebook, facebook-c#-sdk

我试图将 Facebook 用户 ID 保存在我的数据库中，但出现此错误：

> System.NullReferenceException：对象引用未设置为对象的实例。

我使用 Newtonsoft.Json.Linq 和方法`SelectToken`来获得`"registration.id"`

这是代码：

```
string FB_ID= o.SelectToken("registration.id").ToString();
string FB_Firstname = o.SelectToken("registration.first_name").ToString(); 
string FB_Lastname = o.SelectToken("registration.last_name").ToString(); 
```

我可以成功获取用户的名字和姓氏，但字符串 FB_ID 给了我未设置为对象错误**实例的对象引用。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:51:17.690

I do not know which FB library you are using (Facebook C# SDK does not have a SelectToken method)... but Facebook uses "uid" instead of "id".

So... you might need to use:

```
string FB_ID= o.SelectToken("registration.uid").ToString(); 
```

Hope it helps.

# sql - 如何使用来自其他两个表的数据填充新表？

> ID：12555246
> 
> 赞同：3
> 
> 时间：2012-09-23T18:51:17.793
> 
> 标签：sql, sql-server

我有一个需要更改的数据库。原始数据库由 3 个表组成。现在需要用一张桌子来扩展它。

新表的数据来自原数据库的两个表。我可以创建表，但我不能用数据填充它。原来的表是：

```
create table Accommodatie
(plaatscode       varchar(3)  not null,
 accommodatienr   numeric(3)  not null,
 accommodatiename varchar(25) not null,
 adres            varchar(25) not null,
 plaatsnaam       varchar(20) not null,
 land             varchar(20) not null,
 email            varchar(30) null,
 internet         varchar(30) null,
 contactpersoon   varchar(25) null,
 primary key (plaatscode, accommodatienr));

create table Vervoer
(vervoercode    numeric(5)   not null,
 plaatscode     varchar(3)   not null,
 stedenadviseur varchar(20)  not null,
 vervoersoort   varchar(12)  not null,
 maatschappij   varchar(15)  not null,
 omschrijving   varchar(50)  not null,
 overstap       varchar(30)  null,
 primary key (vervoercode));

create table Vervoerprijs
(vervoercode  numeric(5)    not null,
 seizoen      varchar(6)    not null,
 prijs        numeric(6,2)  not null,
 plaatscode   varchar(3)    not null,
 primary key (vervoercode, seizoen),
 foreign key (vervoercode) references Vervoer(vervoercode)); 
```

新表如下所示：

```
CREATE TABLE Plaatscode
(   plaatscode      varchar(3)  not null,
    stedenadviseur  varchar(20) not null,
    land            varchar(20) not null,
    PRIMARY KEY (plaatscode)); 
```

对于我需要的新表`plaatscode`和`land`from表。`Accommodatie``vervoerscode``vervoer`

你能帮我建立一个查询来填充新表吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T19:11:31.760

如果您要做的只是填充新表，则以下内容应该有效：

```
INSERT INTO Plaatscode
(
  plaatscode,
  stedenadviseur,
  land
)
SELECT
a.plaatscode, v.stedenadviseur, a.land
FROM Accommodatie a
INNER JOIN Vervoer
ON a.plaatscode = v.plaatscode 
```

# c - 来自 fork() 的 pid 永远不会去父母，只有孩子

> ID：12555247
> 
> 赞同：1
> 
> 时间：2012-09-23T18:51:18.797
> 
> 标签：c, process, fork, parent

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/wait.h>

#include "structs.h"
#include "server.h"
#include "client.h"

int main(void)
{

  pid_t pid;
  int mypipe[2];
  int otherPipe[2];

  if(pipe(mypipe))
    {
      printf("Error in making a pipe");
    }
  if(pipe(otherPipe))
    {
      printf("Error creating another pipe");
    }
  if((pid=fork()) == -1)
    {
      perror("fork");
      exit(1);
    }
  printf("Child ID: %d" , pid);
  if(pid == 0)
    {
      close(mypipe[1]);
      close(otherPipe[0]);
      client *c = new client(mypipe[0], otherPipe[1]);
      wait(NULL);
      //c->startProgram();
      //return EXIT_SUCCESS;
    }
  else
    {
      printf("Yo");
    close(mypipe[0]);
    close(otherPipe[1]);
    server s;
    s.fdIn = otherPipe[0];
    s.fdOut = mypipe[1];
    s.startServer();
    //wait(NULL);
    //return EXIT_SUCCESS;
    }
} 
```

以上是我的代码。子进程运行良好（如果我明显删除了该评论），但是 else 永远不会被执行（或者我在终端中遗漏了什么？）。

这是输出的屏幕截图：http: [//i.imgur.com/dUWn8.png](http://i.imgur.com/dUWn8.png)

关于为什么它不去其他/父母地点的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T18:55:44.210

难道是因为`stdio`被缓冲了？`printf`在ing 子 ID后尝试刷新输出。或添加一个`\n`. 或`fprintf`ing 到`stderr`.

*编辑*：只是为了澄清。我的猜测不是它没有到​​达父母的原因，因为它是你看不到预期输出的原因。

# mips - 两个浮点二维数组的乘法

> ID：12555256
> 
> 赞同：0
> 
> 时间：2012-09-23T18:53:06.747
> 
> 标签：mips

我有两个 3x3 浮点数组。我将它们存储为两个一维数组并编写了以下代码来将它们相乘（这里，s3 是输出矩阵）：- MULTIP1: li $t8,4 # $s7 具有数组 s2 的地址，$s4 具有数组 arr
la的地址$t9,s3 里 $t1,0 里 $t2,1 里 $t3,0 里 $t4,1

```
LOOP1:
 beq $t4,$t8,MULTIP2    #multip2 is the next segment of program
 li $t2,1
ENTER1:
beq $t2,$t8,UP1
li $t0,1
LOOP2:
  beq $t0,$t8,UP2
ENTER2:
  lwc1 $f22,0($s7)
  lwc1 $f24,0($s4)
  mul.s $f8,$f22,$f24
  add.s $f10,$f10,$f8
  swc1 $f10,0($t9)

  addi $s7,$s7,4
  addi $s4,$s4,12
  addi $t0,$t0,1
  j LOOP2
UP2:
  l.s  $f10,zero
  addi $t9,$t9,4
  addi $t1,$t1,4     #update column of second matrix
  la $s7,s2
  add $s7,$s7,$t3
  la $s4,arr
  add $s4,$s4,$t1
  addi $t2,$t2,1
  j ENTER1
UP1:

  addi $t3,$t3,12
  la   $s7,s2
  add  $s7,$s7,$t3  #update row of first matrix
  la   $s4,arr
  addi $t4,$t4,1
  j LOOP1 
```

这段代码只正确给出了预期输出矩阵的第一行……其余的都搞砸了……请帮忙！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T19:40:00.733

*   这不只是两个 3x3 矩阵的点积吗？
*   2 个 3x3 矩阵的点积得到一个 3x3 矩阵
*   假设 2 个 3x3 矩阵：A 和 B。
*   矩阵 C 的乘积，其中 C = AB 如下：

    A = [a11, a12, a13] [a21, a22, a23] [a31, a32, a33]

    B = [b11, b12, b13] [b21, b22, b23] [b31, b32, b33]

    C = [c11, c12, c13] [c21, c22, c23] [c31, c32, c33]

    c11 = a11*b11+a12*b21+a13*b31 c12 = a11*b12+a12*b22+a13*b23 c13 = a11*b13+a12*b23+a13*b32 c21 = a21*b11+a22*b21+a23 *b31 c22 = a21*b12+a22*b22+a23*b32 c23 = a21*b13+a22*b23+a23*b33 c31 = a31*b11+a32*b21+a33*b31 c32 = a31*b12+b32*b22 +a33*b32 c33 = a31*b13+a32*b23+a33*b33

# jquery - 在 jQuery 中设置 -webkit-scrollbar-thumb 可见性

> ID：12555258
> 
> 赞同：5
> 
> 时间：2012-09-23T18:53:15.187
> 
> 标签：jquery, css, webkit, scrollbar

我尝试通过 jquery 设置滚动条拇指的可见性，如下所示：

```
$('-webkit-scrollbar-thumb').css('visibility', 'hidden') 
```

但它实际上并没有做任何事情。这是我的 CSS 定义：

```
::-webkit-scrollbar-thumb {
    -webkit-border-radius: 10px;
    background: rgba(150, 150, 150, 0.8); 
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.5); 
    border-radius: 2;
    margin: 5px;
} 
```

我不能通过隐藏溢出来禁用滚动，因为我仍然需要启用滚动，我只需要通过 javascript 隐藏滚动条拇指。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-23T19:12:19.550

您不能使用 jQuery 查询 html 伪元素。
您需要对此类规则使用解决方法：在 css 中指定 2 个不同的规则：

```
/*normal*/
::-webkit-scrollbar-thumb {
    /*...*/
}

/*hidden*/
.hide-scrollbar ::-webkit-scrollbar-thumb{
    visibility : hidden;
} 
```

然后通过从根节点 (html) 添加/删除类来启用/禁用它们：

```
$('html').addClass('hide-scrollbar');
// now the second rule is active and the scrollbar is hidden 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-23T19:08:27.523

您可以使用纯 JavaScript 来执行此操作：

```
document.styleSheets[2].addRule("::-webkit-scrollbar-thumb", "visibility: hidden;"); 
```

为了能够选择正确的样式表，请给它一个标题（使用您的or标记`title`中的属性），然后执行以下操作：`link``style`

```
for(var i = 0; i < document.styleSheets.length; i ++) {
    var cursheet = document.styleSheets[i];
    if(cursheet.title == 'mystylesheet') {
        cursheet.addRule("::-webkit-scrollbar-thumb", "visibility: hidden;");
    }
} ​ 
```

# java - 摆动对象数组返回空指针异常

> ID：12555261
> 
> 赞同：-1
> 
> 时间：2012-09-23T18:53:33.740
> 
> 标签：java, arrays, swing, nullpointerexception

这是我的片段。它返回一个空指针异常。jlabel1 已经设置并正在工作

```
JLabel j[]=new JLabel[10];
i=0;    
j[i]=new JLabel();
j[i].setText("1");
this.add(j[i]); 
```

编辑（来自评论）

```
JLabel j[]=new JLabel[50]; 
try { 
  Rectangle bounds = jLabel1.getBounds(); 
  j[i].setText("1"); 
  this.add(j[i]); 
  j[i].setBounds(jLabel1.getX(),jLabel1.getY()+50 ,jLabel1.getHeight(),jLabel1.getWidth()); } catch(Exception e) { 
  System.out.println(e.toString()); 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T18:57:09.967

评论太短了。尝试发布[SSCCE](http://sscce.org)

这似乎对我有用：

```
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class Test {

    protected void initUI() {
        final JFrame frame = new JFrame();
        frame.setTitle("Test JLabel");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        class TestPanel extends JPanel {
            int i;

            public TestPanel() {
                JLabel j[] = new JLabel[10];
                i = 0;
                j[i] = new JLabel();
                j[i].setText("1");
                this.add(j[i]);
            }
        }
        frame.add(new TestPanel());
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test().initUI();
            }
        });
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T19:27:24.907

问题是你忘记了

```
j[i] = new JLabel(); 
```

在您在评论中发布的片段中（尽管它包含在您的问题中）。

A`NullPointerException`通常很容易调试，因为您只需遵循堆栈跟踪即可发现`null`. 如有疑问，您只需在该行上放置一个断点并使用调试器。

要获取堆栈跟踪，您可以使用`e.printStackTrace()`或简单地删除该`try catch`块（因为简单地`try catch`为所有异常设置一个块是不好的做法）

# ios - 将斑马线添加到项目 Xcode 4.5

> ID：12555263
> 
> 赞同：0
> 
> 时间：2012-09-23T18:53:41.527
> 
> 标签：ios, xcode, static-libraries

我已经从主干下载了最新版本的 xcrossing，我成功添加到我的项目并正确创建了依赖项。如果我单独构建库，一切运行顺利，但如果我尝试构建我的项目，我会在 Counted.h 标头中收到此错误

> “找不到词法或预处理器问题‘iostream’文件”

寻找答案我发现导入 c++ 标头的文件应该具有 .mm 扩展名。使用它的类是.mm。我还进行了搜索以检查是否有另一个文件在使用它，但没有。
我真的不知道该怎么办。

有什么可以帮助我的猜测吗？
**更新**
产生问题的标头是 ZXingWigdetController.h 和 QRCodeReader.h，如果将它们导入使用 qrcode 的类的标头中，我会收到错误消息：

> “找不到词法或预处理器问题‘iostream’文件”

如果我在实现文件中使用 qrcode 和 QRCodeReader 的类的标题中导入 ZXingWidgetController ，则会收到错误消息：
![在此处输入图像描述](../Images/3cddd3a1a0407235d6ab179d7b1c9ed7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T07:33:19.337

看看 CocoaPods 网站 cocoapods.org。

多年来，我一直试图将 ZXing 添加到我的项目中。最后，我使用了 cocoapods，它没有任何问题。

根据要求编辑答案...

答案就是将 armv7s 添加到 Architectures 下的 ZXingWidget 项目和 Architectures 中的 ZXingWidget 库中。

不过，每个人都应该得到 CocoaPods。它真的是一个了不起的工具。我使用的所有框架都通过它。

# php - 使用xml数据在php中创建表

> ID：12555267
> 
> 赞同：0
> 
> 时间：2012-09-23T18:54:11.110
> 
> 标签：php, html, xml

我需要在表中创建结果表。

```
<?php
$string = '<?xml version="1.0" encoding="utf-8"?>
<books>
<book isbn="978-1594489501">
<title>book Title 1</title>
<author>Author 1</author>
<publisher>publisher 1</publisher>
<price>price 1</price>
<genre>English 1</genre>
</book>
<book isbn="978-1594489502">
<title>book Title 2</title>
<author>Author 2</author>
<publisher>publisher 2</publisher>
<price>price 2</price>
<genre>English 2</genre>
</book>
</books>';
$xml = new SimpleXMLElement($string);
$string = 'book';
$result = $xml->xpath("//book[contains(translate(title,
'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'), '".strtoupper($string)."')]"); 
foreach($result as $one){
echo "<table border='1' width='500'>\n";
echo "<tr><th>Title</th><td>$one->title</td></tr>\n";
echo "<tr><th>Author</th><td>$one->author</td></tr>\n";
echo "<tr><th>Publisher</th><td>$one->publisher</td></tr>\n";
echo "<tr><th>Price</th><td>$one->price</td></tr>\n";
echo "<tr><th>Genre</th><td>$one->genre</td></tr>\n";
echo "</table>\n";  
}
?> 
```

在 HTML 代码中像这样

```

                结果 1
                标题：标题 1   
                作者：作者1     
                发布：发布 1     
                价格：价格1     
                类型：英语1

                结果 2                     
                标题：标题 2   
                作者：作者2     
                发布：发布2     
                价格：价格2     
                类型：英语2

                结果 3                
                标题：标题 3   
                作者：作者3     
                发布：发布 3     
                价格：价格3     
                类型：英语3

                结果 4                
                标题：标题 4   
                作者：作者4     
                发布：发布4     
                价格：价格4     
                类型：英语4

                结果 5                 
                标题：标题 5   
                作者：作者5     
                发布：发布5     
                价格：价格5     
                类型：英语5

                结果 6                
                标题：标题 6   
                作者：作者6     
                发布：发布6     
                价格：价格6     
                类型：英语6

            回答 #1

赞同：0

时间：2012-09-25T08:48:32.247

您必须使用以下内容：

```
echo '<table border="1" bordercolor="FFCC00" style="background-color:FFFFCC" width="600" cellpadding="3" cellspacing="3">';
echo '<tr>';
$i = 1;
foreach($result as $one){
    echo '<td>';
    echo '<table>';
    echo '<tr><th>Result </th><td>'.$i.'</td></tr>';
    echo '<tr><th>Title: </th><td>'.$i.'</td></tr>';
    echo '<tr><th>Author: </th><td>'.$i.'</td></tr>';
    echo '<tr><th>Publish: </th><td>'.$i.'</td></tr>';
    echo '<tr><th>Price: </th><td>'.$i.'</td></tr>';
    echo '<tr><th>Genre: </th><td>'.$i.'</td></tr>';
    echo '</table>';
    echo '</td>';
    if ($i%3==0) echo '</tr><tr>';
}
echo '</table>'; 
```

            回答 #2

赞同：0

时间：2012-09-23T18:57:27.087

我一直使用 xml2array 进行一些简单的 XML 到 PHP 数组的转换。

[http://www.bin-co.com/php/scripts/xml2array/](http://www.bin-co.com/php/scripts/xml2array/)

它有很多选项，并且非常易于使用。我不知道它对其他库的效率如何，但它总是为我完成小项目的工作。

            回答 #3

赞同：0

时间：2012-09-23T19:02:04.953

像这样的东西？

```
 echo "<table border='1' width='500'>\n";

    foreach($result as $one){

        echo "
        <tr>
            <th>Title</th>
            <th>Author</th>
            <th>Publisher</th>
            <th>Price</th>
            <th>Genre</th>
        </tr>";

        echo "<tr>";
        echo "<td>$one->title</td>";
        echo "<td>$one->author</td>";
        echo "<td>$one->publisher</td>";
        echo "<td>$one->price</td>";
        echo "<td>$one->genre</td>";
        echo "</tr>";

    }

    echo "</table>\n"; 
```

```

# php - PHP输出反斜杠

> ID：12555269
> 
> 赞同：-1
> 
> 时间：2012-09-23T18:54:16.460
> 
> 标签：php, mysql, html

> **可能重复：**
> [为什么将转义字符添加到隐藏输入的值](https://stackoverflow.com/questions/1038980/why-are-escape-characters-being-added-to-the-value-of-the-hidden-input)

我正在从数据库中的表中查询用户帖子。当我输出它们时，如果它们包含撇号，则会在撇号之前插入一个反斜杠。

为什么要这样做？我能做些什么来解决这个问题？

例子：

```
I'm hiking in Colorado's Mountains.

I\'m hiking in Colorado\'s Mountains. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T19:06:08.460

两个可能的原因：

原因一：

您在服务器上启用了魔术引号。要测试魔术引号，只需使用以下代码：

```
if(get_magic_quotes_gpc()){
    echo 'Magic quotes are enabled...';
} 
```

如果启用了魔术引号，您需要禁用它们（并向您的网络主机投诉）。PHP 手册有[一个页面专门用于禁用魔术引号](http://php.net/manual/en/security.magicquotes.disabling.php)。

原因二：

您（或您的输入函数之一）正在使用 addlashes() 作为对 SQL 注入的保护。这是不安全的。准备好的语句（使用 PDO 或 mysqli）是唯一可接受的防止 SQL 注入的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T18:56:24.140

它很可能会转义字符（由于 mysql_real_escape_string）或类似的东西。您可以使用`stripslashes()`函数来删除斜杠，尽管我建议在数据上使用`htmlentities()`或`htmlspecialchars()`来增加一些安全性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T18:56:34.197

您可以使用[http://php.net/manual/en/function.mysql-escape-string.php](http://php.net/manual/en/function.mysql-escape-string.php)。考虑使用[http://php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)它有方法 prepare 准备 sql 语句，它通常更好，它的 OOP。（我猜你正在使用 mysql_* 函数）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T18:57:34.103

我认为你应该看看[addlashes](http://php.net/manual/en/function.addslashes.php)和[stripslashes](http://php.net/manual/en/function.stripslashes.php)

例子

```
$text = "I\'m hiking in Colorado\'s Mountains." ;
echo stripslashes($text); 
```

输出

```
I'm hiking in Colorado's Mountains. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-23T19:06:20.937

您需要验证以下 PHP 配置设置：

*   [magic_quotes_runtime](http://www.php.net/manual/en/info.configuration.php#ini.magic-quotes-runtime)

> 此功能自 PHP 5.3.0 起已弃用，自 PHP 5.4.0 起已移除。

我的建议：将你的 PHP 版本升级到 5.4.x，这个问题就会消失，你会从许多其他新功能中受益。

# jquery - jquery - 获取多维命名输入的属性

> ID：12555275
> 
> 赞同：0
> 
> 时间：2012-09-23T18:54:53.803
> 
> 标签：jquery, multidimensional-array, pattern-matching

我有以下输入字段，我试图弄清楚如何增加特定括号值的值......

我将如何增加特定的括号值（即，title[0][subtitle][3] 变为 title[0][subtitle][4]）？

我已经设法通过硬编码一个值来使其部分工作......下面的代码基本上可以满足我的需求，除了我无法弄清楚如何动态存储和增加该特定值......

（也发布在 jsfiddle 上：http: [//jsfiddle.net/492bD/](http://jsfiddle.net/492bD/)）...

```
<input type="text" class="form-text" value="" name="title[0][subtitle][0]">
<button id="clickme">Click me</button>
​
$('#clickme').live('click', function() { 
var lastSubTitle = $('input.form-text').attr('name');
var newSubTitle = lastSubTitle.replace(/^(.*\[[0-9]+\].*)(\[[0-9]+\])(.*)$/, '$1[20]$3');
alert(newSubTitle);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T19:05:32.813

是否有某些原因您不想只使用两个（或更多）属性并分别递增它们？

```
<input type="text" class="form-text" value="" data-title="0" data-subtitle="0">
<button id="clickme">Click me</button>
​
$('#clickme').live('click', function() {
    var formText$ = $('input.form-text');
    formText$.attr('data-subtitle', +formText$.attr('data-subtitle') + 1); 
    alert(formText$.attr('data-subtitle'));
});​ 
```

如果您需要`name`具有该特定格式的值，则可以`name`在递增数据后设置属性。

```
formText$.attr('name', 'title[' + formText$.attr('data-title') +
                       '][subtitle][' + formText$.attr('data-subtitle') + ']'); 
```

你可以在[http://jsfiddle.net/tMcxH/1/](http://jsfiddle.net/tMcxH/1/)看到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T19:12:07.860

您可以在不参考复杂的正则表达式的情况下做到这一点，这是使用字符串函数完成的解决方案：

```
lastSubTitle = "title[0][subtitle][0]";
var n = lastSubTitle.substr(0, lastSubTitle.length -1);
var f = n.substr(n.lastIndexOf('[')+1);
var value = parseInt(f,10);
value++;
lastSubTitle = lastSubTitle.substr(0, n.lastIndexOf('[')+1) + value + ']';

alert(lastSubTitle); // alerts "title[0][subtitle][1]" 
```

应该这样做。

# javascript - Javascript全局变量值未更新

> ID：12555277
> 
> 赞同：0
> 
> 时间：2012-09-23T18:55:20.833
> 
> 标签：javascript

我有两个 html 页面，两个 javascript 函数。

**page1.html**

```
<a href="page2.html" onclick="ex1()">link1</a> 
```

**page2.html**

```
<a href="#" onclick="ex2()">link2</a> 
```

**jscript1.js**

```
var abc;
function ex1() {
    abc='some text';
    console.log(abc);

}
function ex2() {
    console.log(abc);
} 
```

在控制台中，我正在进入函数`undefined`内部。`ex2()`我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T18:56:13.697

您将转到另一个页面，其中未定义您的 abc 变量。

您需要将变量从一个页面持久化到另一个页面。

一种解决方案是使用 localStorage ：

```
function ex1() {
    localStorage['abc']='some text';
    console.log(localStorage['abc']);

}
function ex2() {
    console.log(localStorage['abc']);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T18:59:16.057

您是否尝试在页面之间传递值（page1.html -> page2.html）？如果是这样，它将无法正常工作，因为每次页面加载都会“重置”脚本......

您可以使用 cookie(s) 或 localStorage 来传递变量 - cookie 对跨浏览器更友好（本地存储在旧版浏览器中不起作用，Firefox 会询问用户权限）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T18:59:20.487

您正在更改页面，这意味着您正在加载一个新的执行环境。

旧变量丢失。您需要将它们转移到 URL 中的新页面，或者通过 cookie 或存储。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T19:01:16.570

如果它们不包含在常见的 html 或 jsp 或 php 中，很快就会出现。然后再次启动变量`abc`。变量的范围仅限于页面内，不能重定向到其他页面。

# html - HTML 5 - 锚点不适用于 ios Safari

> ID：12555282
> 
> 赞同：2
> 
> 时间：2012-09-23T18:55:54.427
> 
> 标签：html, ios, safari, anchor

我有一个固定的导航栏，它通过锚链接到页面上的区域——我使用了 HTML 5“部分”而不是常规的“div”，但不确定这是否有任何区别。当使用带有任何主要浏览器的桌面时，这些锚链接可以像在 android 平板电脑上一样正常工作，但是当使用 ios 设备时它们没有响应，我一直在寻找另一种为 ios 做锚的方法，但没有最终修复。

如果有一个或一种解决方法，谁能给我指出一个可行的替代方案？

谢谢，约翰

示例代码：

```
<section id="headbar">

        <section class="container">
            <a href="#headbar" title="logo"><img src="images/logo.png" alt="our logo"></a>

            <ul id="nav">
            <li><a href="#tour" title="Learn more" class="current">Tour</a></li>
            <li><a href="#faq" title="Frequently asked questions">FAQs</a></li>
            <li><a href="#terms" title="Contact us">Contact</a></li>
            <li class="last"><a href="#terms" title="Read our terms">Terms</a></li>
            </ul><!-- End of #nav -->
        </section>

</section> 
```

CSS：

```
.container          { width: 960px; margin: auto; }
#headbar            { background: url(../images/headbarbg.png) repeat-x scroll 0 0 transparent; height: 92px; position: fixed; width: 100%; z-index: 3000; }
/* Nav */
ul#nav              { list-style: none; float: right; }
ul#nav li           { float: left; padding: 0; font-size: 18px; width: auto; margin: 12px 15px 0 15px; }
ul#nav li a         { display:block; color:#ffffff; text-decoration:none; } 
```

以及它们链接到的内容是如何编码的：

```
<section id="tour">
    <section class="container">
    <h2>title here</2>
<p>lots of text</p>
    </section>
</section> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-03T18:50:59.723

我确定我读到 html 5 锚必须有 id 和 name

```
<section id="tour" name="tour">
</section> 
```

# ruby-on-rails - 表单路径未在视图中正确显示定义的路径 - rails 3

> ID：12555284
> 
> 赞同：0
> 
> 时间：2012-09-23T18:55:59.267
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

所以假设我有一个作者模型 Authors has_many Books

出于所有意图和目的，假设我有一个完全随机的控制器，比如带有动作索引的 XYZ。

索引视图 - 显示单个作者（在此示例中很难定义 - 可以说它类似于`@author = Author.find(1)`

好的，在这里的视图中，我们有一个表单，用于向作者添加新书。

路线看起来像这样：

```
resources author do
   resources book
end 
```

添加书籍的表单如下所示：

（@book = Book.new）

```
<%= form_for new_author_book_path(:author, @book) do |reg_form| %> 
```

但是，当我查看 HTML 时，表单显示其发布到`action="/XYZ/index"`

当我提交表单时，它显然不起作用..

这里到底发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T19:33:58.097

Your `form_for` should look more like:

```
<%= form_for [@author, @book] do |reg_form| %> 
```

Controller:

```
@author = Author.find(1)
@book = @author.books.build 
```

The `new_author_book_path` helper is a GET request (i.e. authors/1/books/new)

# ruby-on-rails - rails auto_link 用于用户发表的评论？

> ID：12555288
> 
> 赞同：0
> 
> 时间：2012-09-23T18:56:22.687
> 
> 标签：ruby-on-rails, hyperlink, comments

我一直在四处寻找，但找不到我要找的东西。

我想使用 rails auto_link gem 来扫描我的用户发布的评论中的有效链接，并将它们链接到单独的选项卡。任何人都可以推荐一个关于我如何使用上述宝石实现这一目标的好资源吗？

如果我理解正确， auto_link 只能在视图中访问？也许，有更好的方法来做我想做的事，任何资源都会非常有帮助。

我正在使用 simple_form 供用户发表评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T21:50:21.363

Auto_link 文档应该是一个很好的起点。

[https://github.com/tenderlove/rails_autolink](https://github.com/tenderlove/rails_autolink)

我没有使用过 auto_link，所以我不确定它是否只在视图中可用，但即便如此，为什么会出现问题？您是否尝试将链接标签保存在数据库中？

# ruby-on-rails - Ruby on Rails 中的自联接

> ID：12555294
> 
> 赞同：0
> 
> 时间：2012-09-23T18:56:33.713
> 
> 标签：ruby-on-rails, ruby, activerecord, join

正如我已经[提到](https://stackoverflow.com/questions/12554579/unable-to-join-self-joins-tables-in-rails)的，我有一个名为`Category`

```
class Category < ActiveRecord::Base
  belongs_to :parent, :class_name => "Category"
  has_many :children,  :class_name => "Category", :foreign_key => "parent_id"
  has_many :products
  attr_accessible :description, :title, :parent

end 
```

我需要选择具有特定标题的特定**父级的所有****子级：** `Categories` **`Category`**

 **```
Category.where(:category=>{'parents_categories'=>{:title=>'tea'}}) #wrong 
```

它没有按我的需要工作。实际上，它根本不起作用：

```
Category Load (0.5ms)  SELECT `categories`.* FROM `categories` WHERE `parent`.`title` = 'tea'
ActiveRecord::StatementInvalid: Mysql2::Error: Unknown column 'parent.title' in 'where clause': SELECT `categories`.* FROM `categories`  WHERE `parent`.`title` = 'tea' 
```

我做了一项研究，但一无所获。我该如何解决？

**更新**：我需要在`Category`模型中创建一个范围，这将允许我拨打电话：（`Category.of_tea`确切地说）并将返回属于标题为“ ”的**父级的所有****子**类别。 **`Category``tea`**

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T19:13:53.747

将范围添加到您的类别，然后在您的父对象上使用它：

```
class Category < ActiveRecord::Base
  belongs_to :parent, :class_name => "Category"
  has_many :children,  :class_name => "Category", :foreign_key => "parent_id"
  has_many :products
  attr_accessible :description, :title, :parent

  scope: with_title, lambda{|text| where(title: text) }

end

category = Category.find(65) #you know, or whatever
tea_categories = category.children.with_title("tea") 
```****

# java - 代码在 PC 上工作，而不是在手机上

> ID：12555298
> 
> 赞同：0
> 
> 时间：2012-09-23T18:56:44.010
> 
> 标签：java, android, jcifs

我正在尝试使用 jCIFS 库从 Windows 共享中获取文件列表。我从 jCIFS 站点的示例中获得了以下代码。

```
try {
    String p = "smb://domain.tld/path/to/the/folder/";
    NtlmPasswordAuthentication auth = new NtlmPasswordAuthentication("domain", "username", "password");

    SmbFile file;
    SmbFile[] files = new SmbFile[0];

    file = new SmbFile(p, auth);

    long t1 = System.currentTimeMillis();
    try {
        files = file.listFiles();
    } catch (Exception e) {
        e.printStackTrace();
    }
    long t2 = System.currentTimeMillis() - t1;

    for( int i = 0; i < files.length; i++ ) {
        System.out.println(files[i].getName() );
    }
    System.out.println();
    System.out.println( files.length + " files in " + t2 + "ms" );
} catch(Exception e) {
    e.printStackTrace();
} 
```

如果我为 PC 创建一个新项目并将其复制到 main 方法中，这将需要很长时间（大约 12 秒，为什么？）但它会返回文件列表而没有任何错误。如果我在我的 Android Activity 中复制完全相同的代码，则会导致错误：

```
09-23 21:49:08.605: E/AndroidRuntime(32659): FATAL EXCEPTION: main
09-23 21:49:08.605: E/AndroidRuntime(32659): java.lang.ExceptionInInitializerError
09-23 21:49:08.605: E/AndroidRuntime(32659):    at jcifs.smb.SmbFile.getFirstAddress(SmbFile.java:864)
09-23 21:49:08.605: E/AndroidRuntime(32659):    at jcifs.smb.SmbFile.connect(SmbFile.java:951)
09-23 21:49:08.605: E/AndroidRuntime(32659):    at jcifs.smb.SmbFile.connect0(SmbFile.java:880)
09-23 21:49:08.605: E/AndroidRuntime(32659):    at jcifs.smb.SmbFile.resolveDfs(SmbFile.java:669)
09-23 21:49:08.605: E/AndroidRuntime(32659):    at jcifs.smb.SmbFile.send(SmbFile.java:773)
09-23 21:49:08.605: E/AndroidRuntime(32659):    at jcifs.smb.SmbFile.doFindFirstNext(SmbFile.java:1986)
09-23 21:49:08.605: E/AndroidRuntime(32659):    at jcifs.smb.SmbFile.doEnum(SmbFile.java:1738)
09-23 21:49:08.605: E/AndroidRuntime(32659):    at jcifs.smb.SmbFile.listFiles(SmbFile.java:1715)
09-23 21:49:08.605: E/AndroidRuntime(32659):    at jcifs.smb.SmbFile.listFiles(SmbFile.java:1648)
09-23 21:49:08.605: E/AndroidRuntime(32659):    at fi.peltoset.mikko.mpsharepoint.SharedFiles.onCreate(SharedFiles.java:46)
09-23 21:49:08.605: E/AndroidRuntime(32659):    at android.app.Activity.performCreate(Activity.java:4543)
09-23 21:49:08.605: E/AndroidRuntime(32659):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1071)
09-23 21:49:08.605: E/AndroidRuntime(32659):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2181)
09-23 21:49:08.605: E/AndroidRuntime(32659):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2260)
09-23 21:49:08.605: E/AndroidRuntime(32659):    at android.app.ActivityThread.access$600(ActivityThread.java:139)
09-23 21:49:08.605: E/AndroidRuntime(32659):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1277)
09-23 21:49:08.605: E/AndroidRuntime(32659):    at android.os.Handler.dispatchMessage(Handler.java:99)
09-23 21:49:08.605: E/AndroidRuntime(32659):    at android.os.Looper.loop(Looper.java:156)
09-23 21:49:08.605: E/AndroidRuntime(32659):    at android.app.ActivityThread.main(ActivityThread.java:5045)
09-23 21:49:08.605: E/AndroidRuntime(32659):    at java.lang.reflect.Method.invokeNative(Native Method)
09-23 21:49:08.605: E/AndroidRuntime(32659):    at java.lang.reflect.Method.invoke(Method.java:511)
09-23 21:49:08.605: E/AndroidRuntime(32659):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-23 21:49:08.605: E/AndroidRuntime(32659):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-23 21:49:08.605: E/AndroidRuntime(32659):    at dalvik.system.NativeStart.main(Native Method)
09-23 21:49:08.605: E/AndroidRuntime(32659): Caused by: java.lang.ExceptionInInitializerError
09-23 21:49:08.605: E/AndroidRuntime(32659):    at jcifs.UniAddress.<clinit>(UniAddress.java:62)
09-23 21:49:08.605: E/AndroidRuntime(32659):    ... 24 more
09-23 21:49:08.605: E/AndroidRuntime(32659): Caused by: android.os.NetworkOnMainThreadException
09-23 21:49:08.605: E/AndroidRuntime(32659):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1190)
09-23 21:49:08.605: E/AndroidRuntime(32659):    at java.net.InetAddress.lookupHostByName(InetAddress.java:394)
09-23 21:49:08.605: E/AndroidRuntime(32659):    at java.net.InetAddress.getLocalHost(InetAddress.java:374)
09-23 21:49:08.605: E/AndroidRuntime(32659):    at jcifs.netbios.NbtAddress.<clinit>(NbtAddress.java:187)
09-23 21:49:08.605: E/AndroidRuntime(32659):    ... 25 more 
```

我已通过添加授予应用程序使用 Internet 的权限

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

进入清单文件。

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T18:59:09.420

```
Caused by: android.os.NetworkOnMainThreadException 
```

SMB 是网络访问。您正在 UI 线程上执行此操作。在 Android 3+ 中，您不能。分离一个工作线程，或使用`AsyncTask`.

# c++ - 传递模板参数时 MSVC++ 编译器错误 C2923

> ID：12555300
> 
> 赞同：1
> 
> 时间：2012-09-23T18:56:49.890
> 
> 标签：c++, visual-studio-2010, templates, boost, boost-multi-index

我有`multi_index_container`一个`struct Person`：

```
struct Person {
    std::string firstName;
    std::string lastName;
    int id;
    bool operator <(const Person& rhs) const {return id < rhs.id;}
};

//index tags
struct BaseIndexTag {};
struct FirstName : BaseIndexTag {};
struct LastName : BaseIndexTag {};
struct ID : BaseIndexTag {};

namespace bmi = boost::multi_index;

typedef boost::multi_index_container<
    Person, 
    bmi::indexed_by<
    //PinsConnection operator < ordering
    bmi::ordered_unique<bmi::tag<ID>, bmi::identity<Person> >,
    //order by first name
    bmi::ordered_non_unique<bmi::tag<FirstName>, bmi::member<Person, std::string, &Person::firstName> >,
    //Order by last name
    bmi::ordered_non_unique<bmi::tag<LastName>, bmi::member<Person, std::string, &Person::lastName> >
    >
> PersonMultiSet; 
```

和 boost 的包装类`iterator_adaptor`：

```
template <
typename I      //Internal iterator type
, typename C    //Container class
>   
class IteratorAdaptor : public boost::iterator_adaptor <
    IteratorAdaptor<I,C>,               //Derived
    I,                                  //Base      
    boost::use_default,                 //Value
    boost::forward_traversal_tag>       //Traversal
{
private:
    friend class boost::iterator_core_access;
    friend C;
public:
    IteratorAdaptor()
        : typename IteratorAdaptor<I,C>::iterator_adaptor_() {}
    explicit IteratorAdaptor(I& b)
        : typename IteratorAdaptor<I,C>::iterator_adaptor_(b) {}
}; 
```

最后，我为 编写了一个包装类`PersonMultiSet`，以便向该类的用户公开一个干净的接口并避免 boost`multi_index_container`有点繁琐的接口：

```
class PersonContainer {
public:
    typedef IteratorAdaptor<PersonMultiSet::index<ID>::type::iterator, PersonContainer> IDIterator;
    typedef IteratorAdaptor<PersonMultiSet::index<ID>::type::const_iterator, PersonContainer> IDConstIterator;
    typedef IteratorAdaptor<PersonMultiSet::index<FirstName>::type::iterator, PersonContainer> FirstNameIterator;
    typedef IteratorAdaptor<PersonMultiSet::index<FirstName>::type::const_iterator, PersonContainer> FirstNameConstIterator;
    typedef IteratorAdaptor<PersonMultiSet::index<LastName>::type::iterator, PersonContainer> LastNameIterator;
    typedef IteratorAdaptor<PersonMultiSet::index<LastName>::type::const_iterator, PersonContainer> LastNameConstIterator;
    template <typename T> //tag
    void foo(IteratorAdaptor<PersonMultiSet::index<T>::type::iterator, PersonContainer> &it)
    {
        //...
    }
private:
    PersonMultiSet people;
}; 
```

在 VS2010 下编译此代码会在函数 foo 的声明中产生以下错误：

```
1>  main.cpp
1>main.cpp(70): warning C4346: 'boost::multi_index::multi_index_container<Value,IndexSpecifierList>::index<T>::boost::multi_index::multi_index_container<Value1,IndexSpecifierList1,Allocator1>::index<Tag>::type::iterator' : dependent name is not a type
1>          with
1>          [
1>              Value=Person,
1>              IndexSpecifierList=boost::multi_index::indexed_by<boost::multi_index::ordered_unique<boost::multi_index::tag<ID>,boost::multi_index::identity<Person>>,boost::multi_index::ordered_non_unique<boost::multi_index::tag<FirstName>,boost::multi_index::member<Person,std::string,pointer-to-member(0x0)>>,boost::multi_index::ordered_non_unique<boost::multi_index::tag<LastName>,boost::multi_index::member<Person,std::string,pointer-to-member(0x20)>>>
1>          ]
1>          prefix with 'typename' to indicate a type
1>main.cpp(70): error C2923: 'IteratorAdaptor' : 'boost::multi_index::multi_index_container<Value,IndexSpecifierList>::index<T>::boost::multi_index::multi_index_container<Value1,IndexSpecifierList1,Allocator1>::index<Tag>::type::iterator' is not a valid template type argument for parameter 'I'
1>          with
1>          [
1>              Value=Person,
1>              IndexSpecifierList=boost::multi_index::indexed_by<boost::multi_index::ordered_unique<boost::multi_index::tag<ID>,boost::multi_index::identity<Person>>,boost::multi_index::ordered_non_unique<boost::multi_index::tag<FirstName>,boost::multi_index::member<Person,std::string,pointer-to-member(0x0)>>,boost::multi_index::ordered_non_unique<boost::multi_index::tag<LastName>,boost::multi_index::member<Person,std::string,pointer-to-member(0x20)>>>
1>          ]
1>
1>Build FAILED. 
```

似乎编译器不允许`IteratorAdaptor<PersonMultiSet::index<T>::type::iterator`在第一次使用时确定类型（我什至在尝试实例化`PersonContainer`或调用 foo 之前就收到了这个错误）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T19:09:47.440

编译器会提示您出了什么问题：

> 带有“typename”的前缀表示类型

因此，您需要`typename`在“有问题的”参数之前添加。

```
void foo(IteratorAdaptor<PersonMultiSet::index<T>::type::iterator, 
                         PersonContainer> &it) 
```

一定是：

```
//                         vvvvvvvv
void foo( IteratorAdaptor< typename PersonMultiSet::index<T>::type::iterator,
                           PersonContainer> &it) 
```

# .net - unity xml 配置通用接口

> ID：12555308
> 
> 赞同：0
> 
> 时间：2012-09-23T18:58:23.227
> 
> 标签：.net, configuration, unity-container

我正在使用 Unity 进行构造函数注入。通过运行时 API 的构造函数注入成功，代码如下：

```
{
using ContractImplementations;
using Contracts;
using DataAccess;
using DataModel.Entities;
using DataModel.Interfaces;

using Microsoft.Practices.Unity;

using Unity.Wcf;

/// <summary>
/// The wcf service factory.
/// </summary>
public class WcfServiceFactory : UnityServiceHostFactory
{
    #region Methods
    /// <summary>
    /// Configure container.
    /// </summary>
    /// <param name="container">
    /// The container.
    /// </param>
    protected override void ConfigureContainer(IUnityContainer container)
    {
        container
           .RegisterType<IGaugeModelbaseService, GaugeModelbaseService>()
           .RegisterType<IContractMapper, ContractMapper>(new HierarchicalLifetimeManager())
           .RegisterType<IGenericRepository<GaugeModel>, GenericSqlRepository<GaugeModel>>(new HierarchicalLifetimeManager());
    }

    #endregion
} 
```

}

由于与 AppFabric 和 EntLib 集成，但是我必须在 XML 配置中配置容器。问题：统一文档对注册泛型类型的主题不清楚。根据文档，我必须这样做：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<namespace name="Design.ModelbaseSvc" />
<assembly name="Design.ModelbaseSvc" />
<namespace name="Design.ContractImplementations" />
<assembly name="Design.ContractImplementations" />
<namespace name="Design.DataModel" />
<assembly name="Design.DataModel" />
<namespace name="Design.DataAccess" />
<assembly name="Design.DataAcces" />

<container>
  <register type="IGaugeModelbaseService" mapTo="GaugeModelbaseService">
    <interceptor type="InterfaceInterceptor" />
  </register>
  <register type="IContractMapper" mapTo="ContractMapper">
    <lifetime type="hierarchical" />
  </register>
  <register type="IGenericRepository'1[Design.DataModel.Entities.GaugeModel, Design.DataModel]" mapTo="GenericSqlRepository'1[Design.DataModel.Entities.GaugeModel, Design.DataModel]">       
    <lifetime type="hierarchical" />
  </register>
</container> 
```

我不明白我做错了什么，但这不起作用： - XML 编辑器在使用括号“[]”时出错 - 浏览 svc 文件会出现以下错误：

> 无法解析类型名称或别名 IGenericRepository'1[Design.DataModel.Entities.GaugeModel, Design.DataModel]。请检查您的配置文件并验证此类型名称。

我尝试了其他几个，最终导致脑死亡。请帮忙。

谢谢

弗兰斯·范霍文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:15:20.747

对于每种类型[，您必须指定程序集和完整的命名空间](http://msdn.microsoft.com/en-us/library/ff660933%28v=pandp.20%29.aspx)，或者您可以使用[别名](http://msdn.microsoft.com/en-us/library/ff660914%28v=pandp.20%29.aspx#config_aliases)。

对于泛型类型，如果您不使用别名，则必须使用双方括号：

```
<register 
      type="MyNameSpace.IGenericRepository'1[[Design.DataModel.Entities.GaugeModel, Design.DataModel]], MyAssembly"       
     mapTo="MyNameSpace.GenericSqlRepository'1[[Design.DataModel.Entities.GaugeModel, Design.DataModel]], MyAssembly">       
    <lifetime type="hierarchical" />
</register> 
```

# sql - 添加属性和更新值 XML 列 sqlserver2008

> ID：12555309
> 
> 赞同：2
> 
> 时间：2012-09-23T18:58:32.637
> 
> 标签：sql, xml, sql-server-2008

我在 stackoverflow 上看到了几个答案，但我找不到我要找的东西。我已经检查了[这个问题](https://stackoverflow.com/questions/7428587/compare-xml-data-in-sql)以及[这个](https://stackoverflow.com/questions/7194279/add-modify-xml-column-with-attributes-from-another-column-value-return-results?rq=1)页面和其他一些页面，但无法找到解决方案。

这是我的测试数据。实际上，此代码位于表的 XML 列中。

```
<product id=152>
    <name>tractor</name>
    <category weight=5600 invoice="A600"/>
</product>
<product id=731>
    <name>excavadora</name>
    <category weight=12340 invoice="B300"/>
</product> 
```

我需要的是更新以前的 XML 执行两个操作：

*   在类别节点上添加新属性
*   能够更新该新属性值，尝试修改权重但无法做到

我认为解决方案应该在查询中使用 .modify 和 .value 关键字，但不知道如何。

我正在使用 SQL Server 2008 express。我已经看到查询可以帮助获得答案，但我真的没有任何工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T02:15:18.343

这是一个针对您的具体情况的示例。它将 ID 152 的权重替换为值 54321。

```
DECLARE
    @x xml,
    @ProductID int,
    @CategoryWeight int

SELECT @x = '
    <Product ID="152"> 
        <Category Weight="5600" Invoice="A600" /> 
    </Product>
    <Product ID="731">
        <Category Weight="12340" Invoice="B300" />        
    </Product>'

SELECT
   @ProductID = 152,
   @CategoryWeight = 54321

SET @x.modify('
    replace value of (
        /Product[@ID=sql:variable("@ProductID")]/Category/@Weight
    )[1]
    with sql:variable("@CategoryWeight")
')

SELECT @x 
```

请注意，您可以根据需要将 sql:variable("") 片段替换为实际值。熟悉这个例子，插入应该是小菜一碟。：） 祝你好运！

# jquery - 使用 jQuery & Maximage2 作为一个简单的幻灯片

> ID：12555320
> 
> 赞同：0
> 
> 时间：2012-09-23T18:59:39.160
> 
> 标签：jquery, html, css, photos

我一直在写一个非常简单的幻灯片放映，从 flickr 中提取照片并使用箭头键循环播放它们。

我在这里工作（使用箭头键滚动）：http: [//jsbin.com/esoveh/1/](http://jsbin.com/esoveh/1/)但现在我尝试将其添加到我的 octopress 网站中，我得到了主要部分后面的图片。我试图弄清楚这一点，我所能看到的只是图像有一个位置：绝对设置和一个 z-index，而其余内容没有绝对定位，但这可能是一个错误的线索。

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T19:57:35.993

我试图为元素周围的 div 赋予 100 的 z-index，并显示图片。所以你可以给那个 div (id="flicr") 一个样式元素，或者在你的 css 文件中添加它：

```
#flicr
{
    z-index:100;
} 
```

# cocos2d-iphone - Cocos2d游戏层运行时卡顿，替换场景后平滑

> ID：12555321
> 
> 赞同：0
> 
> 时间：2012-09-23T18:59:51.560
> 
> 标签：cocos2d-iphone, box2d, ccsprite, cclayer

我的游戏场景是使用 replaceScene 从关卡选择场景运行的，并传入关卡编号。游戏层从 plist 加载数据，然后在世界空间中创建对象（具有 box2d 主体的 CCSprite 子类）。播放关卡时，英雄角色保持在屏幕中央 - 我调整图层位置以执行此操作，同时根据移动速度放大和缩小图层比例。

例如：

```
CGPoint layerPosition = ccp(((screenSize.width / 2) - ourHero.position.x) * sceneScale, ((screenSize.height / 2) - ourHero.position.y) * sceneScale);
[self setPosition:layerPosition];
[self setScale:sceneScale]; 
```

问题是，第一次运行关卡时，当速度增加并且图层缩小时（不仅仅是开始时的几秒钟），移动通常会很不稳定。但是，如果用户重新启动关卡（按钮执行 replaceScene），替换关卡的移动非常平滑，即使是在速度上也是如此。

我正在使用批处理节点并将精灵图像存储在帧缓存中。我已经尝试在关卡选择场景中设置帧缓存和预加载声音，但这没有任何区别。我曾尝试清除关卡之间的缓存以查看是否可以使重新启动的关卡表现出相同的行为，但这并没有做任何事情。

谁能建议可能导致这种情况的原因以及我如何能够消除它。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T19:31:17.560

可能的解决方案：

在 init/onEnter 中加载所有纹理和精灵表。如果无法一次加载所有内容，请使用线程加载。对于音频/音乐，您可以在声音引擎中使用 preLoad 调用。

[这是我的线程](https://stackoverflow.com/questions/12345556/cocos2d-continuously-scrolling-tile-based-game-strange-flash-only-in-device)。我也面临同样的问题。最后通过使用单独的线程进行加载来解决。

# python - 如何向现有 DataFrame 添加新列？

> ID：12555323
> 
> 赞同：1222
> 
> 时间：2012-09-23T19:00:01.430
> 
> 标签：python, pandas, dataframe, chained-assignment

我有以下索引DataFrame，其中命名的列和行不是连续的数字：

```
 a         b         c         d
2  0.671399  0.101208 -0.181532  0.241273
3  0.446172 -0.243316  0.051767  1.577318
5  0.614758  0.075793 -0.451460 -0.012493 
```

我想`'e'`在现有数据框中添加一个新列 , 并且不想更改数据框中的任何内容（即，新列始终与 DataFrame 具有相同的长度）。

```
0   -0.335485
1   -1.166658
2   -0.385571
dtype: float64 
```

如何`e`在上面的示例中添加列？

* * *

## 回答 #1

> 赞同：1252
> 
> 时间：2012-09-23T19:24:45.883

**编辑 2017**

正如评论和@Alexander 所指出的，目前将 Series 的值添​​加为 DataFrame 的新列的最佳方法可能是使用[**`assign`**](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.assign.html)：

```
df1 = df1.assign(e=pd.Series(np.random.randn(sLength)).values) 
```

* * *

**编辑 2015 年**
有人报告`SettingWithCopyWarning`使用此代码获得了。
但是，该代码仍然可以在当前的 pandas 0.16.1 版本中完美运行。

```
>>> sLength = len(df1['a'])
>>> df1
          a         b         c         d
6 -0.269221 -0.026476  0.997517  1.294385
8  0.917438  0.847941  0.034235 -0.448948

>>> df1['e'] = pd.Series(np.random.randn(sLength), index=df1.index)
>>> df1
          a         b         c         d         e
6 -0.269221 -0.026476  0.997517  1.294385  1.757167
8  0.917438  0.847941  0.034235 -0.448948  2.228131

>>> pd.version.short_version
'0.16.1' 
```

目的`SettingWithCopyWarning`是通知 Dataframe 副本上可能无效的分配。它不一定说你做错了（它可能会触发误报），但从 0.13.0 开始，它让你知道有更合适的方法用于相同目的。然后，如果您收到警告，请遵循其建议：*尝试使用 .loc[row_index,col_indexer] = value 代替*

```
>>> df1.loc[:,'f'] = pd.Series(np.random.randn(sLength), index=df1.index)
>>> df1
          a         b         c         d         e         f
6 -0.269221 -0.026476  0.997517  1.294385  1.757167 -0.050927
8  0.917438  0.847941  0.034235 -0.448948  2.228131  0.006109
>>> 
```

事实上，这是目前[熊猫文档中描述的更有效的方法](http://pandas.pydata.org/pandas-docs/stable/indexing.html#indexing-view-versus-copy)

* * *

原答案：

使用原始 df1 索引创建系列：

```
df1['e'] = pd.Series(np.random.randn(sLength), index=df1.index) 
```

* * *

## 回答 #2

> 赞同：298
> 
> 时间：2012-12-12T16:04:31.217

这是添加新列的简单方法：`df['e'] = e`

* * *

## 回答 #3

> 赞同：201
> 
> 时间：2016-02-14T00:49:58.643

> 我想在现有数据框中添加一个新列“e”，并且不要更改数据框中的任何内容。（该系列的长度始终与数据框相同。）

我假设 中的索引值`e`与`df1`.

启动名为 的新列`e`并为其分配系列值的最简单方法`e`：

```
df['e'] = e.values 
```

**分配（熊猫 0.16.0+）**

从 Pandas 0.16.0 开始，您还可以使用[`assign`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.assign.html)，它将新列分配给 DataFrame 并返回一个新对象（副本），其中包含除新列之外的所有原始列。

```
df1 = df1.assign(e=e.values) 
```

根据[此示例](https://stackoverflow.com/questions/42101382/pandas-dataframe-assign-arguments)（其中还包括`assign`函数的源代码），您还可以包含多个列：

```
df = pd.DataFrame({'a': [1, 2], 'b': [3, 4]})
>>> df.assign(mean_a=df.a.mean(), mean_b=df.b.mean())
   a  b  mean_a  mean_b
0  1  3     1.5     3.5
1  2  4     1.5     3.5 
```

在您的示例中：

```
np.random.seed(0)
df1 = pd.DataFrame(np.random.randn(10, 4), columns=['a', 'b', 'c', 'd'])
mask = df1.applymap(lambda x: x <-0.7)
df1 = df1[-mask.any(axis=1)]
sLength = len(df1['a'])
e = pd.Series(np.random.randn(sLength))

>>> df1
          a         b         c         d
0  1.764052  0.400157  0.978738  2.240893
2 -0.103219  0.410599  0.144044  1.454274
3  0.761038  0.121675  0.443863  0.333674
7  1.532779  1.469359  0.154947  0.378163
9  1.230291  1.202380 -0.387327 -0.302303

>>> e
0   -1.048553
1   -1.420018
2   -1.706270
3    1.950775
4   -0.509652
dtype: float64

df1 = df1.assign(e=e.values)

>>> df1
          a         b         c         d         e
0  1.764052  0.400157  0.978738  2.240893 -1.048553
2 -0.103219  0.410599  0.144044  1.454274 -1.420018
3  0.761038  0.121675  0.443863  0.333674 -1.706270
7  1.532779  1.469359  0.154947  0.378163  1.950775
9  1.230291  1.202380 -0.387327 -0.302303 -0.509652 
```

[可在此处](http://pandas.pydata.org/pandas-docs/stable/whatsnew/v0.16.0.html#dataframe-assign)找到首次引入此新功能时的说明。

* * *

## 回答 #4

> 赞同：72
> 
> 时间：2017-04-03T08:59:22.753

# 超级简单的列分配

pandas 数据框被实现为列的有序字典。

这意味着`__getitem__` `[]`不仅可以用于获取某个列，`__setitem__` `[] =`还可以用于分配新列。

例如，这个数据框可以通过简单地使用`[]`访问器来添加一个列

```
 size      name color
0    big      rose   red
1  small    violet  blue
2  small     tulip   red
3  small  harebell  blue

df['protected'] = ['no', 'no', 'no', 'yes']

    size      name color protected
0    big      rose   red        no
1  small    violet  blue        no
2  small     tulip   red        no
3  small  harebell  blue       yes 
```

请注意，即使数据帧的索引关闭，这也有效。

```
df.index = [3,2,1,0]
df['protected'] = ['no', 'no', 'no', 'yes']
    size      name color protected
3    big      rose   red        no
2  small    violet  blue        no
1  small     tulip   red        no
0  small  harebell  blue       yes 
```

### []= 是要走的路，但要小心！

但是，如果您有 a`pd.Series`并尝试将其分配给索引关闭的数据框，您将遇到麻烦。参见示例：

```
df['protected'] = pd.Series(['no', 'no', 'no', 'yes'])
    size      name color protected
3    big      rose   red       yes
2  small    violet  blue        no
1  small     tulip   red        no
0  small  harebell  blue        no 
```

这是因为`pd.Series`默认情况下 a 具有从 0 到 n 枚举的索引。熊猫`[] =`方法**试图** *变得“聪明”*

## 究竟发生了什么。

当您使用该`[] =`方法时，pandas 会使用左侧数据帧的索引和右侧系列的索引悄悄地执行外部连接或外部合并。`df['column'] = series`

### 边注

这很快就会导致认知失调，因为该方法试图根据输入做很多不同的事情，除非你*只知道*pandas 是如何工作`[]=`的，否则无法预测结果。因此，我建议不要使用in 代码库，但在笔记本中探索数据时，这很好。*`[]=`*

 *## 绕过问题

如果您有一个`pd.Series`并且希望它从上到下分配，或者如果您正在编写生产代码并且您不确定索引顺序，那么为此类问题进行保护是值得的。

您可以将 a 向下转换`pd.Series`为 a`np.ndarray`或 a `list`，这样就可以了。

```
df['protected'] = pd.Series(['no', 'no', 'no', 'yes']).values 
```

或者

```
df['protected'] = list(pd.Series(['no', 'no', 'no', 'yes'])) 
```

**但这不是很明确。**

一些编码员可能会说“嘿，这看起来多余，我会优化它”。

### 显式方式

将 的索引设置为`pd.Series`的索引`df`是显式的。

```
df['protected'] = pd.Series(['no', 'no', 'no', 'yes'], index=df.index) 
```

或者更现实地说，您可能已经有一个`pd.Series`可用的。

```
protected_series = pd.Series(['no', 'no', 'no', 'yes'])
protected_series.index = df.index

3     no
2     no
1     no
0    yes 
```

现在可以分配

```
df['protected'] = protected_series

    size      name color protected
3    big      rose   red        no
2  small    violet  blue        no
1  small     tulip   red        no
0  small  harebell  blue       yes 
```

## 替代方式`df.reset_index()`

由于索引不协调是问题所在，如果您觉得数据帧的索引不*应该*决定事情，您可以简单地删除索引，这应该更快，但它不是很干净，因为您的函数现在*可能*做两件事。

```
df.reset_index(drop=True)
protected_series.reset_index(drop=True)
df['protected'] = protected_series

    size      name color protected
0    big      rose   red        no
1  small    violet  blue        no
2  small     tulip   red        no
3  small  harebell  blue       yes 
```

## 注意事项`df.assign`

虽然`df.assign`更明确地说明您在做什么，但它实际上具有与上述所有相同的问题`[]=`

```
df.assign(protected=pd.Series(['no', 'no', 'no', 'yes']))
    size      name color protected
3    big      rose   red       yes
2  small    violet  blue        no
1  small     tulip   red        no
0  small  harebell  blue        no 
```

请注意`df.assign`，您的列没有被调用`self`。它会导致错误。这很`df.assign` **臭**，因为函数中有这类伪影。

```
df.assign(self=pd.Series(['no', 'no', 'no', 'yes'])
TypeError: assign() got multiple values for keyword argument 'self' 
```

你可能会说，“好吧，那我就不用了`self`”。但是谁知道这个函数将来会如何改变以支持新的论点。也许您的列名将成为熊猫新更新中的参数，从而导致升级问题。

* * *

## 回答 #5

> 赞同：60
> 
> 时间：2016-07-21T17:35:37.920

似乎在最近的 Pandas 版本中，要走的路是使用[df.assign](http://pandas.pydata.org/pandas-docs/stable/dsintro.html#assigning-new-columns-in-method-chains)：

`df1 = df1.assign(e=np.random.randn(sLength))`

它不产生`SettingWithCopyWarning`。

* * *

## 回答 #6

> 赞同：59
> 
> 时间：2012-09-23T19:22:27.897

直接通过[NumPy](http://en.wikipedia.org/wiki/NumPy)执行此操作将是最有效的：

```
df1['e'] = np.random.randn(sLength) 
```

* * *

请注意，我最初的（非常旧的）建议是使用`map`（速度要慢得多）：

```
df1['e'] = df1['a'].map(lambda x: np.random.random()) 
```

* * *

## 回答 #7

> 赞同：41
> 
> 时间：2018-09-08T05:17:14.107

最简单的方法：-

```
data['new_col'] = list_of_values

data.loc[ : , 'new_col'] = list_of_values 
```

这样，您可以在 pandas 对象中设置新值时避免所谓的链式索引。[点击这里进一步阅读](https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy)。

* * *

## 回答 #8

> 赞同：26
> 
> 时间：2017-10-13T16:53:18.343

如果您想将整个新列设置为初始基值（例如`None`），您可以这样做：`df1['e'] = None`

这实际上会将“对象”类型分配给单元格。因此，稍后您可以自由地将复杂的数据类型（如列表）放入单个单元格中。

* * *

## 回答 #9

> 赞同：25
> 
> 时间：2015-06-11T09:45:04.733

我得到了`SettingWithCopyWarning`dreaded ，并且没有通过使用 iloc 语法来修复它。我的 DataFrame 是由 read_sql 从 ODBC 源创建的。使用上面lowtech的建议，以下内容对我有用：

```
df.insert(len(df.columns), 'e', pd.Series(np.random.randn(sLength),  index=df.index)) 
```

这可以很好地在最后插入列。我不知道它是否是最有效的，但我不喜欢警告信息。我认为有更好的解决方案，但我找不到，我认为这取决于索引的某些方面。
*注意*。这只能工作一次，如果尝试覆盖现有列，则会给出错误消息。
**注意**如上所述，从 0.16.0 开始分配是最好的解决方案。请参阅文档[http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.assign.html#pandas.DataFrame.assign](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.assign.html#pandas.DataFrame.assign) 适用于不覆盖中间值的数据流类型。

* * *

## 回答 #10

> 赞同：18
> 
> 时间：2017-06-05T00:53:20.883

1.  首先创建一个`list_of_e`具有相关数据的python。
2.  用这个： `df['e'] = list_of_e`

* * *

## 回答 #11

> 赞同：15
> 
> 时间：2017-11-03T10:05:58.697

如果您尝试添加的列是系列变量，则只需：

```
df["new_columns_name"]=series_variable_name #this will do it for you 
```

即使您要替换现有列，这也很有效。只需键入与要替换的列相同的 new_columns_name。它只会用新的系列数据覆盖现有列数据。

* * *

## 回答 #12

> 赞同：15
> 
> 时间：2019-11-28T06:12:52.680

创建一个空列

```
df['i'] = None 
```

* * *

## 回答 #13

> 赞同：13
> 
> 时间：2017-04-07T01:38:37.433

如果数据框和 Series 对象具有***相同的 index***，`pandas.concat`也适用于：

```
import pandas as pd
df
#          a            b           c           d
#0  0.671399     0.101208   -0.181532    0.241273
#1  0.446172    -0.243316    0.051767    1.577318
#2  0.614758     0.075793   -0.451460   -0.012493

e = pd.Series([-0.335485, -1.166658, -0.385571])    
e
#0   -0.335485
#1   -1.166658
#2   -0.385571
#dtype: float64

# here we need to give the series object a name which converts to the new  column name 
# in the result
df = pd.concat([df, e.rename("e")], axis=1)
df

#          a            b           c           d           e
#0  0.671399     0.101208   -0.181532    0.241273   -0.335485
#1  0.446172    -0.243316    0.051767    1.577318   -1.166658
#2  0.614758     0.075793   -0.451460   -0.012493   -0.385571 
```

如果它们没有相同的索引：

```
e.index = df.index
df = pd.concat([df, e.rename("e")], axis=1) 
```

* * *

## 回答 #14

> 赞同：13
> 
> 时间：2017-04-12T11:22:03.093

**万无一失：**

```
df.loc[:, 'NewCol'] = 'New_Val' 
```

例子：

```
df = pd.DataFrame(data=np.random.randn(20, 4), columns=['A', 'B', 'C', 'D'])

df

           A         B         C         D
0  -0.761269  0.477348  1.170614  0.752714
1   1.217250 -0.930860 -0.769324 -0.408642
2  -0.619679 -1.227659 -0.259135  1.700294
3  -0.147354  0.778707  0.479145  2.284143
4  -0.529529  0.000571  0.913779  1.395894
5   2.592400  0.637253  1.441096 -0.631468
6   0.757178  0.240012 -0.553820  1.177202
7  -0.986128 -1.313843  0.788589 -0.707836
8   0.606985 -2.232903 -1.358107 -2.855494
9  -0.692013  0.671866  1.179466 -1.180351
10 -1.093707 -0.530600  0.182926 -1.296494
11 -0.143273 -0.503199 -1.328728  0.610552
12 -0.923110 -1.365890 -1.366202 -1.185999
13 -2.026832  0.273593 -0.440426 -0.627423
14 -0.054503 -0.788866 -0.228088 -0.404783
15  0.955298 -1.430019  1.434071 -0.088215
16 -0.227946  0.047462  0.373573 -0.111675
17  1.627912  0.043611  1.743403 -0.012714
18  0.693458  0.144327  0.329500 -0.655045
19  0.104425  0.037412  0.450598 -0.923387

df.drop([3, 5, 8, 10, 18], inplace=True)

df

           A         B         C         D
0  -0.761269  0.477348  1.170614  0.752714
1   1.217250 -0.930860 -0.769324 -0.408642
2  -0.619679 -1.227659 -0.259135  1.700294
4  -0.529529  0.000571  0.913779  1.395894
6   0.757178  0.240012 -0.553820  1.177202
7  -0.986128 -1.313843  0.788589 -0.707836
9  -0.692013  0.671866  1.179466 -1.180351
11 -0.143273 -0.503199 -1.328728  0.610552
12 -0.923110 -1.365890 -1.366202 -1.185999
13 -2.026832  0.273593 -0.440426 -0.627423
14 -0.054503 -0.788866 -0.228088 -0.404783
15  0.955298 -1.430019  1.434071 -0.088215
16 -0.227946  0.047462  0.373573 -0.111675
17  1.627912  0.043611  1.743403 -0.012714
19  0.104425  0.037412  0.450598 -0.923387

df.loc[:, 'NewCol'] = 0

df
           A         B         C         D  NewCol
0  -0.761269  0.477348  1.170614  0.752714       0
1   1.217250 -0.930860 -0.769324 -0.408642       0
2  -0.619679 -1.227659 -0.259135  1.700294       0
4  -0.529529  0.000571  0.913779  1.395894       0
6   0.757178  0.240012 -0.553820  1.177202       0
7  -0.986128 -1.313843  0.788589 -0.707836       0
9  -0.692013  0.671866  1.179466 -1.180351       0
11 -0.143273 -0.503199 -1.328728  0.610552       0
12 -0.923110 -1.365890 -1.366202 -1.185999       0
13 -2.026832  0.273593 -0.440426 -0.627423       0
14 -0.054503 -0.788866 -0.228088 -0.404783       0
15  0.955298 -1.430019  1.434071 -0.088215       0
16 -0.227946  0.047462  0.373573 -0.111675       0
17  1.627912  0.043611  1.743403 -0.012714       0
19  0.104425  0.037412  0.450598 -0.923387       0 
```

* * *

## 回答 #15

> 赞同：11
> 
> 时间：2015-02-20T17:32:19.777

不过要注意的一件事是，如果你这样做

```
df1['e'] = Series(np.random.randn(sLength), index=df1.index) 
```

这实际上是df1.index 上的**左连接。**所以如果你想有一个**外**连接效果，我可能不完美的解决方案是创建一个索引值覆盖你的数据域的数据框，然后使用上面的代码。例如，

```
data = pd.DataFrame(index=all_possible_values)
df1['e'] = Series(np.random.randn(sLength), index=df1.index) 
```

* * *

## 回答 #16

> 赞同：10
> 
> 时间：2019-04-07T15:12:59.997

要在数据框中的给定位置（0 <= loc <= 列数）插入新列，只需使用 Dataframe.insert：

```
DataFrame.insert(loc, column, value) 
```

因此，如果您想在名为***df***的数据框的末尾添加列***e***，您可以使用：

 *```
e = [-0.335485, -1.166658, -0.385571]    
DataFrame.insert(loc=len(df.columns), column='e', value=e) 
```

***value***可以是一个系列、一个整数（在这种情况下，所有单元格都被这个值填充）或类似数组的结构

[https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.insert.html](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.insert.html)

* * *

## 回答 #17

> 赞同：8
> 
> 时间：2015-10-22T14:21:45.547

让我补充一下，就像[hum3](https://stackoverflow.com/users/3649456/hum3)一样，`.loc`没有解决`SettingWithCopyWarning`，我不得不求助于`df.insert()`. 在我的情况下，误报是由“假”链索引生成的 ，新列`dict['a']['e']`在哪里，并且是来自字典的 DataFrame。`'e'``dict['a']`

另请注意，如果您知道自己在做什么，则可以使用 `pd.options.mode.chained_assignment = None` 而不是使用此处给出的其他解决方案之一来切换警告。

* * *

## 回答 #18

> 赞同：7
> 
> 时间：2015-06-14T23:57:36.900

在分配新列之前，如果您有索引数据，则需要对索引进行排序。至少在我的情况下，我必须：

```
data.set_index(['index_column'], inplace=True)
"if index is unsorted, assignment of a new column will fail"        
data.sort_index(inplace = True)
data.loc['index_value1', 'column_y'] = np.random.randn(data.loc['index_value1', 'column_x'].shape[0]) 
```

* * *

## 回答 #19

> 赞同：6
> 
> 时间：2016-11-08T06:55:37.740

向现有数据框添加新列“e”

```
 df1.loc[:,'e'] = Series(np.random.randn(sLength)) 
```

* * *

## 回答 #20

> 赞同：6
> 
> 时间：2017-01-13T18:34:54.283

我一直在寻找一种将`numpy.nan`s 列添加到数据框中的通用方法，而不会变得愚蠢`SettingWithCopyWarning`。

从以下：

*   这里的答案
*   [这个](https://stackoverflow.com/q/6976658/943773)关于将变量作为关键字参数传递的问题
*   [这种](https://stackoverflow.com/a/22414429/943773)用于在线生成`numpy`NaN 数组的方法

我想出了这个：

```
col = 'column_name'
df = df.assign(**{col:numpy.full(len(df), numpy.nan)}) 
```

* * *

## 回答 #21

> 赞同：5
> 
> 时间：2017-03-14T21:49:44.400

[为了完整起见-使用DataFrame.eval()](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.eval.html)方法的另一种解决方案：

数据：

```
In [44]: e
Out[44]:
0    1.225506
1   -1.033944
2   -0.498953
3   -0.373332
4    0.615030
5   -0.622436
dtype: float64

In [45]: df1
Out[45]:
          a         b         c         d
0 -0.634222 -0.103264  0.745069  0.801288
4  0.782387 -0.090279  0.757662 -0.602408
5 -0.117456  2.124496  1.057301  0.765466
7  0.767532  0.104304 -0.586850  1.051297
8 -0.103272  0.958334  1.163092  1.182315
9 -0.616254  0.296678 -0.112027  0.679112 
```

解决方案：

```
In [46]: df1.eval("e = @e.values", inplace=True)

In [47]: df1
Out[47]:
          a         b         c         d         e
0 -0.634222 -0.103264  0.745069  0.801288  1.225506
4  0.782387 -0.090279  0.757662 -0.602408 -1.033944
5 -0.117456  2.124496  1.057301  0.765466 -0.498953
7  0.767532  0.104304 -0.586850  1.051297 -0.373332
8 -0.103272  0.958334  1.163092  1.182315  0.615030
9 -0.616254  0.296678 -0.112027  0.679112 -0.622436 
```

* * *

## 回答 #22

> 赞同：5
> 
> 时间：2020-11-27T08:26:56.687

如果您只需要创建一个新的空列，那么最短的解决方案是：

```
df.loc[:, 'e'] = pd.Series() 
```

* * *

## 回答 #23

> 赞同：4
> 
> 时间：2015-10-06T01:18:52.413

以下是我所做的......但我对熊猫和真正的Python很陌生，所以没有承诺。

```
df = pd.DataFrame([[1, 2], [3, 4], [5,6]], columns=list('AB'))

newCol = [3,5,7]
newName = 'C'

values = np.insert(df.values,df.shape[1],newCol,axis=1)
header = df.columns.values.tolist()
header.append(newName)

df = pd.DataFrame(values,columns=header) 
```

* * *

## 回答 #24

> 赞同：4
> 
> 时间：2021-01-24T04:27:37.627

如果我们想为 df 中新列的所有行分配一个缩放器值，例如：10：

```
df = df.assign(new_col=lambda x:10)  # x is each row passed in to the lambda func 
```

df 现在将在所有行中具有 value=10 的新列“new_col”。

* * *

## 回答 #25

> 赞同：3
> 
> 时间：2016-03-07T03:28:54.820

如果你得到`SettingWithCopyWarning`，一个简单的解决方法是复制你试图添加一列的 DataFrame。

```
df = df.copy()
df['col_name'] = values 
```

* * *

## 回答 #26

> 赞同：3
> 
> 时间：2020-10-04T02:30:47.160

```
x=pd.DataFrame([1,2,3,4,5])

y=pd.DataFrame([5,4,3,2,1])

z=pd.concat([x,y],axis=1) 
```

[![在此处输入图像描述](../Images/41e9fc1dbde254c27cbf0c2b00c20f7e.png)](https://i.stack.imgur.com/Hu5To.jpg)

* * *

## 回答 #27

> 赞同：2
> 
> 时间：2020-06-19T12:24:35.580

这是向 pandas 数据框添加新列的特殊情况。在这里，我基于数据框的现有列数据添加了一个新功能/列。

因此，让我们的 dataFrame 包含列“feature_1”、“feature_2”、“probability_score”，我们必须根据“probability_score”列中的数据添加一个新的“predicted_class”列。

我将使用 python 中的 map() 函数，并定义一个我自己的函数，该函数将实现有关如何为我的 dataFrame 中的每一行赋予特定 class_label 的逻辑。

```
data = pd.read_csv('data.csv')

def myFunction(x):
   //implement your logic here

   if so and so:
        return a
   return b

variable_1 = data['probability_score']
predicted_class = variable_1.map(myFunction)

data['predicted_class'] = predicted_class

// check dataFrame, new column is included based on an existing column data for each row
data.head() 
```

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2021-11-08T08:58:41.567

```
import pandas as pd

# Define a dictionary containing data
data = {'a': [0,0,0.671399,0.446172,0,0.614758],
    'b': [0,0,0.101208,-0.243316,0,0.075793],
    'c': [0,0,-0.181532,0.051767,0,-0.451460],
    'd': [0,0,0.241273,1.577318,0,-0.012493]}

# Convert the dictionary into DataFrame
df = pd.DataFrame(data)

# Declare a list that is to be converted into a column
col_e = [-0.335485,-1.166658,-0.385571,0,0,0]

df['e'] = col_e

# add column 'e'
df['e'] = col_e

# Observe the result
df 
```

[![编码](../Images/d4221de1482cbb89c68c0ad082aec325.png)](https://i.stack.imgur.com/huVhM.jpg)

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2021-03-02T21:09:51.727

每当您将 Series 对象作为新列添加到现有 DF 时，您需要确保它们都具有相同的索引。然后将其添加到 DF

```
e_series = pd.Series([-0.335485, -1.166658,-0.385571])
print(e_series)
e_series.index = d_f.index
d_f['e'] = e_series
d_f 
```

[![在此处输入图像描述](../Images/5a191ca3788b742f58bc2118fde4a42c.png)](https://i.stack.imgur.com/Xrbei.png)

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2021-08-12T05:33:40.943

**您可以通过for 循环**插入新列，如下所示：

```
for label,row in your_dframe.iterrows():
      your_dframe.loc[label,"new_column_length"]=len(row["any_of_column_in_your_dframe"]) 
```

示例代码在这里：

```
import pandas as pd

data = {
  "any_of_column_in_your_dframe" : ["ersingulbahar","yagiz","TS"],
  "calories": [420, 380, 390],
  "duration": [50, 40, 45]
}

#load data into a DataFrame object:
your_dframe = pd.DataFrame(data)

for label,row in your_dframe.iterrows():
      your_dframe.loc[label,"new_column_length"]=len(row["any_of_column_in_your_dframe"])

print(your_dframe) 
```

输出在这里：

| any_of_column_in_your_dframe | 卡路里 | 期间 | 新列长度 |
| --- | --- | --- | --- |
| 厄辛古尔巴哈尔 | 420 | 50 | 13.0 |
| 亚吉兹 | 380 | 40 | 5.0 |
| TS | 390 | 45 | 2.0 |

不是：你也可以这样使用：

```
your_dframe["new_column_length"]=your_dframe["any_of_column_in_your_dframe"].apply(len) 
```

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2021-09-15T07:54:01.243

向现有数据框添加新列的简单方法是：

```
new_cols = ['a' , 'b' , 'c' , 'd']

for col in new_cols:
    df[f'{col}'] = 0 #assiging 0 for the placeholder

print(df.columns) 
```**

# java - Java 作业（使用 for 循环填充数组）

> ID：12555334
> 
> 赞同：1
> 
> 时间：2012-09-23T19:01:57.037
> 
> 标签：java, methods, for-loop

我只是在我的 Java 的第二个学期，所以可能有一个非常简单的解决方案来解决我的问题，但由于这个原因，我一直在拉头发几个小时。以下代码用于收集用户输入并将实例的信息存储在数组中。

没有机会为专辑名称输入任何内容。输出如下。

> 输入 5 首歌曲
> 
> 标题：title
> 作者：author1
> 译者：int1
> 发行年份：2000
> 专辑： 文件名：//为什么不收集输入并将文件名：放在下一行。

如果有人能指出我正确的方向，我将不胜感激。我包括了以下两种方法，以防它们与我的问题有关。感谢您的任何帮助，您可以提供。

```
 public static void main(String[] args){

    Scanner kybd = new Scanner(System.in);

    Song[] songTest = new Song[5];

    System.out.println("Enter 5 songs\n");

    //TEST
    for(Song x:songTest)
    {
        x = new Song();
        System.out.print("Title: ");
        x.setTitle(kybd.nextLine());
        System.out.print("Author: ");
        x.setAuthor(kybd.nextLine());
        System.out.print("Interpreter: ");
        x.setInterpreter(kybd.nextLine());
        System.out.print("Year released: ");
        x.setYearReleased(kybd.nextInt());
        System.out.print("Album: ");
        x.setAlbum(kybd.nextLine()); //this doesn't allow for input.  it prints "File name:" and skips the user input for an album name.  Also, when I comment out Year released, the problem goes away.
        System.out.print("File name: ");
        x.setFileName(kybd.nextLine());
        System.out.print(x);
        System.out.println();
    }

public void setYearReleased(int y)
{
    if (y>0 && y<2013)
        this.yearReleased = y;
    else
    {
        System.out.print ("This song is not that old");
        this.yearReleased = -5;
    }
}

    public void setAlbum(String a)
{
    this.album = a;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T19:09:08.593

您需要做一个`kybd.nextLine()`after`kybd.nextInt()`以便以下内容`kybd.nextLine()`不会捕获按 enter 时使用的换行符`nextInt()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T19:09:36.463

```
x.setYearReleased(kybd.nextInt()); 
```

不会对行尾字符做任何事情，并且会保持在行上，给出您看到的行为。一个快速的解决方法可能是`ktbd.nextLine();`在此之后添加另一个以跳过下一个 int 之后的任何其他内容。

```
System.out.print("Year released: ");
x.setYearReleased(kybd.nextInt());
kybd.nextLine()
System.out.print("Album: ");
x.setAlbum(kybd.nextLine()); 
```

# asp.net-mvc - 自定义 ModelBinder 错误

> ID：12555337
> 
> 赞同：-1
> 
> 时间：2012-09-23T19:02:29.440
> 
> 标签：asp.net-mvc

我编写自定义 ModelBinder，这是我的代码

```
 using System;
using System.Web.Mvc;

namespace GetOrganized.Code
{
    public class DateModelBinder : IModelBinder
    {
        #region IModelBinder Members

        public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
        {
            if (bindingContext == null)
            {
                throw new ArgumentException("bindingContext");
            }
            DateTime theDate = default(DateTime);

            var day = FormPostedData<int>(bindingContext, "day");
            var month = FormPostedData<int>(bindingContext, "month");
            var year = FormPostedData<int>(bindingContext, "year");

            return CreateDateOrDefault(year, month, day, theDate);
        }

        #endregion

        private static T FormPostedData<T>(ModelBindingContext context, string id)
        {
            if (string.IsNullOrEmpty(id))
                return default(T);
            string key = string.Format("{0}.{1}", context.ModelName, id);
            ValueProviderResult result = context.ValueProvider.GetValue(key);
            if (result == null && context.FallbackToEmptyPrefix)
            {
                result = context.ValueProvider.GetValue(id);
                if (result == null)
                {
                    return default(T);
                }
            }
            context.ModelState.SetModelValue(id, result);
            T valueToReturn = default(T);
            try
            {
                if (result != null) valueToReturn = (T) result.ConvertTo(typeof (T));
            }
            catch
            {
            }
            return valueToReturn;
        }

        private DateTime CreateDateOrDefault(Int32 year, Int32 month, Int32 day, DateTime? defaultDate)
        {
            DateTime theDate = defaultDate ?? default(DateTime);
            try
            {
                theDate = new DateTime(year, month, day);
            }
            catch
            {
            }
            return theDate;
        }
    }
} 
```

这是我的模特

```
 using System;
using System.Collections.Generic;
using System.Web.Mvc;
using GetOrganized.Code;

namespace GetOrganized.Models
{
    [ModelBinder(typeof (DateModelBinder))] 
    public class Todo
    {
        public bool Completed { get; set; }
        public string Title { get; set; }
        public Topic Topic { get; set; }
        public string Outcome { get; set; }
        public DateTime Date { get; set; }

        public DateTime DefualtDate
        {
            get { return DateTime.Now; }
        }

        public TimeSpan DifferenceDate { get; set; }
    }
} 
```

但我得到错误

参数字典包含“GetOrganized.Controllers.TodoController”中方法“System.Web.Mvc.ActionResult Create(GetOrganized.Models.Todo)”的参数“todo”的无效条目。字典包含“System.DateTime”类型的值，但参数需要“GetOrganized.Models.Todo”类型的值。参数名称：参数请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T20:36:12.573

您的自定义模型绑定器返回`DateTime`对象而不是`Todo`实例。

# jquery - 如何使用 minify 和 GZip 压缩文件？

> ID：12555342
> 
> 赞同：1
> 
> 时间：2012-09-23T19:03:14.137
> 
> 标签：jquery, html, css, gzip

[我已经使用这个站点](http://www.zbugs.com/minify-gzip-compress-css-javascript-online)压缩和 Gzip 了我的样式和 js 文件现在我有分别具有名称`style.min.css`和的文件`jquery.min.js`。让我知道如何链接这些文件以减少页面负载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T19:16:56.180

您必须将这些文件的内容编码设置为 gzip 以便浏览器正确读取，在您的 .htaccess 文件中尝试此操作

```
<filesMatch "\.min\.(js|css)$">
<ifModule mod_headers.c>
Header set Content-Encoding "gzip"
</ifModule>
</filesMatch> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T19:06:12.187

将这些行放在您的 head 标签内。

```
<link href="style.min.css" rel="stylesheet" media="screen" />
<script src="jquery.min.js"></script> 
```

# ruby - 为什么 YAML::Load 有效，但使用 require 的相对路径无效

> ID：12555344
> 
> 赞同：2
> 
> 时间：2012-09-23T19:03:50.567
> 
> 标签：ruby

我有一个 /scripts 文件夹，其中包含我的项目的一些 ruby​​ 脚本。

```
/scripts
/scripts/app/models.rb
/scripts/config/config.yml
/scripts/lib
/scripts/lib/myapp/test.rb 
```

在我的 test.rb 中，我有以下代码可以正确加载 config.yml 文件：

```
env = ENV['ENV'] || 'development'
config = YAML::load(File.open('config/config.yml'))[env] 
```

现在在 test.rb 文件的顶部，我正在尝试加载与 ActiveRecord 一起使用的 models.rb 文件，但出现错误：

```
require File.join(File.dirname(__FILE__), "../../", 'models') 
```

错误：

1.9.1/rubygems/custom_require.rb:36:in `require': 无法加载此类文件 -- lib/myapp/../../models (LoadError)

我试过：

```
require 'app/models' 
```

那也没有用。

我在做什么错，为什么 config.yml 文件加载正确？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-23T20:53:50.320

File.open 使用显式路径，但需要尝试在 PATH 中搜索。Ruby >= 1.9.2 不会将当前目录添加到搜索路径 - 因此您需要明确指定它

```
require File.join(File.dirname(__FILE__), "./../../app", 'models') 
```

或使用 require_relative

```
require_relative '../../app/models' 
```

或者，您可以将当前目录添加到搜索路径（不推荐，出于安全考虑，这已从 ruby​​ 中删除）

```
$: << '.' 
```

# ruby-on-rails - 如何为帖子建模投票和反对票？

> ID：12555345
> 
> 赞同：0
> 
> 时间：2012-09-23T19:04:17.270
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个允许用户发布的应用程序。每个帖子都可以被赞成和反对。每个用户还具有根据其帖子的赞成票和反对票计算的声誉。现在，我在两个地方跟踪每个帖子的赞成票和反对票。首先，有我的帖子表：

```
 create_table "posts", :force => true do |t|
    t.integer  "user_id"
    t.text     "content"
    t.integer  "upvotes",    :default => 0
    t.integer  "downvotes",  :default => 0
    t.datetime "created_at",                :null => false
    t.datetime "updated_at",                :null => false
  end 
```

我还使用单独的“投票”表跟踪每个投票，以便我知道哪个用户已经对帖子进行了投票（0 票是没有投票，1 票是反对票，2 票是赞成票):

```
create_table "votes", :force => true do |t|
    t.integer  "user_id"
    t.integer  "post_id"
    t.integer  "vote",       :default => 0
    t.datetime "created_at",                :null => false
    t.datetime "updated_at",                :null => false
  end 
```

我最初在两个不同的表中跟踪帖子投票，以便更有效地查询特定帖子的投票数，例如：

```
post_reputation = post.upvotes - post.downvotes 
```

但是，我现在认为这是一种不好的做法，我应该删除“帖子”表上的“赞成票”和“反对票”列，以免重复投票数据。然后我会计算帖子声誉做这样的事情：

```
def calculate_post_reputation(post_id)
  some_post = Post.find(post_id)
  vote_count = 0
  some_post.votes.each do |vote|
    if vote.vote.to_i == 2
      vote_count += 1
    elsif vote.vote.to_i == 1
      vote_count -= 1
    end
   end
  vote_count
end 
```

保留“upvotes”和“downvotes”列还是删除它们并使用“votes”表来计算帖子声誉更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T19:16:48.443

我会考虑（伪代码）：

```
Models:

class User < ActiveRecord::Base
  has_many :votes
  has_many :posts, :through => votes

class Post < ActiveRecord::Base
  has_many :votes
  has_many :users, :though => :votes

class Vote < ActiveRecord::Base
  belongs_to :user
  belongs_to :post
  attr_accessor :direction
  UP='Up'
  DOWN='Down'
  DIRECTIONS=[UP,DOWN]
  validates_inclusion_of :direction, in: [DIRECTIONS]
  scope :up_votes where(:direction => UP) 
  scope :down_votes where(:direction => DOWN) 
```

然后使用`Post.votes.up_votes.count`和`Post.votes.down_votes.count`表示赞成或反对票的数量。

您概述的方法是我过去在 SQL 中处理它的方法，上面是一种更 Rails 风格的方法。您需要添加适当的数据库迁移。

# android - 如何将对象变量用作全局/公共变量 Android

> ID：12555346
> 
> 赞同：0
> 
> 时间：2012-09-23T19:04:36.320
> 
> 标签：android, variables, object, webview, global

当最终用户单击选项菜单中的“item1”时，我想在 mywebview 中加载一个 url

这是我的代码：

```
package com.exemple.test;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.webkit.WebSettings;
import android.app.AlertDialog;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        WebView myWebView = (WebView) findViewById(R.id.webview);
        myWebView.setWebViewClient(new WebViewClient());
        WebSettings webSettings = myWebView.getSettings();
        webSettings.setJavaScriptEnabled(true);
        myWebView.loadUrl("http://m.google.com");
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // Handle item selection
        switch (item.getItemId()) {
            case R.id.item1:
                //AlertDialog alertDialog = new AlertDialog.Builder(this).create();
                //alertDialog.setTitle("Reset...");
                //alertDialog.setMessage("Are you sure?");
                //alertDialog.show();
                myWebView.loadUrl("http://m.google.com");
                return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    }
} 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T19:05:57.833

只是改变

```
WebView myWebView = (WebView) findViewById(R.id.webview); 
```

到

```
myWebView = (WebView) findViewById(R.id.webview); 
```

并将以下内容添加为类变量：

```
WebView myWebView; 
```

所以你的最终代码变成：

```
public class MainActivity extends Activity {

    WebView myWebView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        myWebView = (WebView) findViewById(R.id.webview);
        myWebView.setWebViewClient(new WebViewClient());
        WebSettings webSettings = myWebView.getSettings();
        webSettings.setJavaScriptEnabled(true);
        myWebView.loadUrl("http://m.google.info"); //You may want to comment this out, as you said you wanted to load it only when the user clicked
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // Handle item selection
        switch (item.getItemId()) {
            case R.id.item1:
                //AlertDialog alertDialog = new AlertDialog.Builder(this).create();
                //alertDialog.setTitle("Reset...");
                //alertDialog.setMessage("Are you sure?");
                //alertDialog.show();
                myWebView.loadUrl("http://m.google.com");
                return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    }
} 
```

# php - PHP错误处理和异常处理？

> ID：12555348
> 
> 赞同：1
> 
> 时间：2012-09-23T19:04:59.330
> 
> 标签：php, exception-handling, error-handling

我一直在做一些关于 php 错误处理和异常处理的研究。

例如，要处理用户错误，最好使用`set_error_handler()`用户错误。示例代码：

```
// Destinations
define("ADMIN_EMAIL", "nobody@stanford.edu"); 
define("LOG_FILE", "/my/home/errors.log");

// Destination types
define("DEST_EMAIL", "1");
define("DEST_LOGFILE", "3");

/**
* my_error_handler($errno, $errstr, $errfile, $errline)
*
* Author(s): thanosb, ddonahue
* Date: May 11, 2008
* 
* custom error handler
*
* Parameters:
*  $errno:   Error level
*  $errstr:  Error message
*  $errfile: File in which the error was raised
*  $errline: Line at which the error occurred
*/

function my_error_handler($errno, $errstr, $errfile, $errline)
{  
 switch ($errno) {
 case E_USER_ERROR:
  // Send an e-mail to the administrator
  error_log("Error: $errstr \n Fatal error on line $errline in file $errfile \n", DEST_EMAIL, ADMIN_EMAIL);

  // Write the error to our log file
  error_log("Error: $errstr \n Fatal error on line $errline in file $errfile \n", DEST_LOGFILE, LOG_FILE);
  break;

case E_USER_WARNING:
  // Write the error to our log file
  error_log("Warning: $errstr \n in $errfile on line $errline \n", DEST_LOGFILE, LOG_FILE);
  break;

case E_USER_NOTICE:
  // Write the error to our log file
  error_log("Notice: $errstr \n in $errfile on line $errline \n", DEST_LOGFILE, LOG_FILE);
  break;

default:
  // Write the error to our log file
  error_log("Unknown error [#$errno]: $errstr \n in $errfile on line $errline \n", DEST_LOGFILE, LOG_FILE);
  break;
}

// Don't execute PHP's internal error handler
return TRUE;
}

// Use set_error_handler() to tell PHP to use our method
$old_error_handler = set_error_handler("my_error_handler"); 
```

代码位于[http://www.stanford.edu/dept/its/communications/webservices/wiki/index.php/How_to_perform_error_handling_in_PHP](http://www.stanford.edu/dept/its/communications/webservices/wiki/index.php/How_to_perform_error_handling_in_PHP)。

然后对于致命错误：

```
register_shutdown_function('handleShutdown');

function handleShutdown() {
    $error = error_get_last();
    if($error !== NULL){
        $info = "[SHUTDOWN] file:".$error['file']." | ln:".$error['line']." |    msg:".$error['message'] .PHP_EOL;
        yourPrintOrMailFunction($info);
    }
    else{
        yourPrintOrMailFunction("SHUTDOWN");
    }
} 
```

在[How do I catch a PHP Fatal Error](https://stackoverflow.com/questions/277224/how-do-i-catch-a-php-fatal-error)中找到的代码。

据我所知，这似乎基本上涵盖了脚本中可能发生的所有错误（作为一个非常笼统的陈述 - 很难预测所有错误）。在开发一个类的时候，想了想，似乎建议在内部使用异常来处理它们。

我的问题是这些示例是否通常被认为适合处理生产环境中的错误，或者是否有任何明显不正确或缺乏的地方。

无论如何，这些函数是附加到所有文件还是在一个类中设置？

任何帮助表示赞赏。

编辑：我还想补充一点，如果遇到某个错误，我将如何停止脚本。显然，`exit()`还是`die()`有诀窍，但有什么更合适的做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T19:10:58.233

> 我的问题是这些示例是否通常被认为适合处理生产环境中的错误，或者是否有任何明显不正确或缺乏的地方。

是的。您只需要确保捕获所有生成的异常。我还想提醒您，如果您的脚本中存在语法错误，或者您的服务器配置错误，php 可能会输出未处理的错误，因为它们是编译时错误。

> 在任何情况下，这些函数是附加到所有文件还是在一个类中设置？

一旦您注册了它们（使用 set_error_handler），它们就会应用于脚本中调用的每个文件，除非您的文件之一重新定义了处理程序。

并停止脚本，退出是好方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T19:11:15.410

有一些方法可以将所有错误作为异常处理，这很好，我已经在一两个项目上这样做了，我对结果很满意。

但是请注意这一点，即使是警告和通知也会变得致命（因为如果没有被捕获，异常是致命的）。此外，语法错误不会作为异常处理，因为它们不是运行时错误，而是编译时错误（意味着您的脚本从未编译过，也没有运行任何代码行）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T19:20:17.383

> 我的问题是这些示例是否通常被认为适合处理生产环境中的错误，或者是否有任何明显不正确或缺乏的地方。

`PHP Errors`是的..它们很好，您只需要更好的存储错误，尤其是在使用多台服务器时

`Exceptions`我认为这还不够……它们需要根据类型进行处理，例如 Database 、 Network 等。

# asp.net - 如何访问 loginview 中的控件（在 asp.net - c# 中）？

> ID：12555349
> 
> 赞同：0
> 
> 时间：2012-09-23T19:05:20.423
> 
> 标签：asp.net, master-pages, loginview

我有一个 loginview ，位于母版页中。在登录控件的登录模式下，我有一个超链接。我想访问超链接，但我得到错误（对象不是参考...）

我的代码是：

```
HyperLink hp = FindControl("LoginView1_").FindControl("hpMng") as HyperLink; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T19:25:15.197

该`FindControl`方法仅搜索您要查找的控件集合下的控件。它不会进行完整的递归搜索。

在你的情况下，你可以做这样的事情，因为你在同一页面上（MasterPage）

```
 var h = this.login.FindControl("link") as HyperLink;

        this.msg.Text = h.Text; 
```

请记住，如果`HyperLink`控件在其中，则`LoggedInTemplate`它仅在用户**登录**时可用。如果`HyperLink`控件在该控件中，则`AnonymousTemplate`该控件将仅在用户**尚未登录应用程序**时可用。考虑到这一点以避免*空引用异常*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T19:20:13.920

对我来说，它工作正常。你登录后试试？显然，如果您在 de 中声明了控件`LoggedInTemplate`并且没有登录，则控件将不会被渲染。

```
?FindControl("HeadLoginView").FindControl("hpMng")
{Text = "aaa"}
    System.Web.UI.WebControls.HyperLink: {Text = "aaa"} 
```

# android - 如何测试安卓应用程序？

> ID：12555351
> 
> 赞同：1
> 
> 时间：2012-09-23T19:05:37.647
> 
> 标签：android, avd

如何测试安卓应用程序？我配置了 AVD 模拟器，测试没有错误，但是当我在平板电脑上运行时 - 在应用程序启动时 - 退出并出现错误。我不知道该怎么办

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T19:14:29.870

您是否阅读过[http://developer.android.com/tools/debugging/index.html](http://developer.android.com/tools/debugging/index.html)上的 android 调试文档？

您可以在平板电脑的 Android 系统设置中打开 USB 调试，并直接从设备上的 Eclipse 调试您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T22:13:06.490

看看*Androidd Developers*官方[测试](http://developer.android.com/tools/testing/index.html)页面。

在那里，你会找到一个[测试基础](http://developer.android.com/tools/testing/testing_android.html)章节，它将教你如何处理框架。此外，我猜还有一个分步[测试教程](http://developer.android.com/tools/testing/activity_test.html)，对您非常有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-23T10:22:45.323

您可能需要检查应用程序的兼容性。该应用程序可能与您的平板电脑版本不兼容。

尝试使用更多模拟器，如 Android Wear 和 TV

使用更多 API 版本进行测试，例如 16、18、19 等。

也可以使用许多屏幕尺寸进行测试。，

# java - Reduce Hadoop 中的分布式缓存

> ID：12555352
> 
> 赞同：1
> 
> 时间：2012-09-23T19:05:48.130
> 
> 标签：java, hadoop, mapreduce, distributed-cache

我想在reducer1的内存中保存文件A，在reducer2的内存中保存文件B。这可能在hadoop中使用分布式缓存技术吗？或者，还有其他方法可以实现吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T02:23:39.070

是的，如果文件非常小，您可以将这些文件设置在分布式缓存中。按照此链接[http://developer.yahoo.com/hadoop/tutorial/module5.html#auxdata](http://developer.yahoo.com/hadoop/tutorial/module5.html#auxdata)。它可能对你有用。

如果您考虑这部分代码，则取决于您要在哪个减速器中处理哪个文件。

```
Path [] cacheFiles = DistributedCache.getLocalCacheFiles(conf);
      if (null != cacheFiles && cacheFiles.length > 0) {
        for (Path cachePath : cacheFiles) {
          if (cachePath.getName().equals(stopwordCacheName)) {
            loadStopWords(cachePath);
            break;
          }
        } 
```

看看有没有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T03:59:10.800

问题（它是 Hadoop 的一个基本问题）是任务跟踪器为每个任务启动新的 JVM 进程 - 否定内存缓存的任何好处。您可以将任务跟踪器配置为在同一个 VM 中运行 - 但许多 Hadoop 内部使用 System.exit() 以及许多 Hadoop 作业......使得这样的配置毫无意义。

您可以将 GridGain 集群与 Hadoop 集群共同部署，并通过同一物理主机上的两个 JVM（即 GridGain 和 Hadoop 的任务跟踪器 JVM）之间的快速环回连接使用 GridGain 进行内存缓存 - 这是由我们的几个客户完成的.

# zend-framework2 - Zend Framework 2.0 是否遗漏了 1.12 中包含的 amazon s3 库函数？

> ID：12555356
> 
> 赞同：5
> 
> 时间：2012-09-23T19:06:01.983
> 
> 标签：zend-framework2

我找不到这个的等价物

[http://framework.zend.com/manual/1.12/en/zend.service.amazon.s3.html](http://framework.zend.com/manual/1.12/en/zend.service.amazon.s3.html)

在 2.0 版本的文档中。我还注意到 2.0 最小版本为 2.5MB，而 1.12 最小版本为 8.7MB，而完整的 1.12 版本约为 30MB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:50:55.417

ZF2 默认不为 S3 或任何其他 AWS 服务提供内置库。[自2012 年 7 月起](https://github.com/zendframework/zf2/pull/1941)， Zend\Service 组件已从存储库中删除，其中一些仍然在单独的存储库中维护。

但好消息是亚马逊在 2013 年 3 月宣布了他们自己[的 ZF2 的 AWS-SDK 模块](https://aws.amazon.com/releasenotes/2169500296594435)。它还有一个[github 链接](https://github.com/aws/aws-sdk-php-zf2)。[目前它处于非常早期的阶段，看起来像是亚马逊官方 PHP SDK](https://github.com/aws/aws-sdk-php)的 ZF2 友好包装器，它很有希望。

有关这种情况的更多详细信息，[请阅读此处的 RFC](http://framework.zend.com/wiki/display/ZFDEV2/RFC+-+Service+Components)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T22:20:41.900

我尝试使用类似的东西：`use Zend\Service\Amazon\S3\S3`在我的项目中，因为我使用了 Zend Framework 2，但它没有用！

我不认为它在 Zend Framework 2.1 中不再可用。显然它在 Zend Framework 2.0 中可用：http: [//framework.zend.com/issues/browse/ZF2-268](http://framework.zend.com/issues/browse/ZF2-268)但您可以使用`ZendServiceAmazon`它可能会完成这项工作： http: [//framework.zend.com/manual/2.1 /en/modules/zendservice.amazon.html](http://framework.zend.com/manual/2.1/en/modules/zendservice.amazon.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-11T09:19:18.753

看： http: [//framework.zend.com/downloads/composer](http://framework.zend.com/downloads/composer)

“从 Zend Framework 2 开始，您现在可以使用依赖管理工具 Composer 安装 Zend Framework 或其任何单个组件及其依赖项。包由我们的专用包存储库提供，网址为[https://packages.zendframework.com/](https://packages.zendframework.com/) ”

# hadoop - 插入 Hive 表

> ID：12555357
> 
> 赞同：0
> 
> 时间：2012-09-23T19:06:05.600
> 
> 标签：hadoop, insert, hive, logfiles

我是hadoop的新手。请帮帮我。

我有一个不断更新的日志文件，我需要将此日志文件存储到 hive 中的表中。是否可以在需要时或定期将日志文件中生成的新行添加到此表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:53:50.203

Hive 支持插入语句，所以应该可以。同时 - 我不会推荐这种使用 hive 的方式。我会假设我们谈论的是严重的日志流 - 否则我们不会使用 Hive。
当我们简单地将附加文件复制到定义为 Hive 的外部表的某个 HDFS 目录时，Hive 在数据加载速度方面具有优势
所以我建议使用日志轮换（或其他技术）每 X 分钟或 Y MB 创建新文件，然后简单地复制他们进入HDFS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:43:48.463

Hive 并不能很好地支持这一点。我建议考虑使用 Flume 将日志文件存储到 HDFS 中，然后让 Hive 表简单地指向该位置并使用适当的 SerDe 来访问它。

要么这样，要么轮换日志文件，并且仅在完全完成写入后将其存储到 Hive 中。

# maven - maven javadoc java.lang.ClassCastException

> ID：12555361
> 
> 赞同：1
> 
> 时间：2012-09-23T19:06:38.643
> 
> 标签：maven, javadoc, jdk1.6

我正在使用 maven3.0.4 和 JDK1.6 但是当我尝试 site:run 并尝试查看我得到的 java doc

```
java.lang.ClassCastException: com.sun.tools.javadoc.ClassDocImpl cannot be cast to com.sun.javadoc.AnnotationTypeDoc 
```

我在堆栈溢出中看到了其他问题。

[一](https://stackoverflow.com/questions/5314738/javadoc-annotations-from-third-party-libraries)、[二](https://stackoverflow.com/questions/44853/why-am-i-getting-a-classcastexception-when-generating-javadocs)、[三](https://stackoverflow.com/questions/8598324/mvn-javadocjavadoc-failing-on-just-one-of-my-module-project?lq=1)

但我不清楚如何解决这个问题，我是 Maven 新手，我正在使用 Eclipse indigo。我为我所有的 spring 服务 bean 使用注释。（第三个链接说，这是 JDK 问题，建议升级到 java1.7，我不能这样做）所以在我的 POM 文件中，如何在 javadoc 报告插件中设置类路径（对于我所有的依赖项） .

我的 POM 看起来像

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>org.hmil</groupId>
<artifactId>sam</artifactId>
<version>0.0.1-SNAPSHOT</version>
<packaging>war</packaging>
<name>SAM</name>
<description>Sales And Marketing System</description>

<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.5.1</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>

        </plugin>
    </plugins>
    <defaultGoal>install</defaultGoal>
</build>
<reporting>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-javadoc-plugin</artifactId>
            <version>2.7</version>          
        </plugin> 
```

...

# facebook-javascript-sdk - 禁用沙盒模式后，Facebook 应用程序基本设置中出现应用程序域错误。

> ID：12555363
> 
> 赞同：0
> 
> 时间：2012-09-23T19:07:00.267
> 
> 标签：facebook-javascript-sdk, sandbox

我正在努力让 fb.logInStatus 工作，并且我提出了一个以前有人回答过的问题，该问题建议禁用沙盒模式。我这样做了，然后在 facbook 应用程序设置页面上出现错误，显示错误

```
App Domains: `http://localhost:80/controllers/index.php` should not contain protocol information. 
```

为什么在禁用沙盒模式下突然拒绝“http”？这意味着什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T04:41:19.920

如果您填写“应用程序域”字段，它应该包含一个与您的“网站”或“Facebook 上的应用程序”网址匹配的域 - 例如，它应该是“something.com”，没有协议标识符，也没有路径。只是域。

除了沙盒模式下的测试目的外，这不适用于 localhost。（如果代码在您的机器上，它将如何对任何其他用户起作用？）

# c#-4.0 - 使用同一个误用的数据库表实现多个类

> ID：12555371
> 
> 赞同：1
> 
> 时间：2012-09-23T19:08:41.407
> 
> 标签：c#-4.0

可能是初级开发人员提出的一个愚蠢而简单的问题。

我有一个数据库，其中同一张表用于多种用途。现在我想使用这个表实现多个类。每个类的功能都是相同的，只是变量名必须不同（为了便于阅读和理解）。

这可能吗？

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T00:51:58.233

是的，为什么不？这就是函数和参数的意义：D

# .htaccess - 将链接从根目录重定向到子目录中的新站点

> ID：12555372
> 
> 赞同：0
> 
> 时间：2012-09-23T19:08:42.623
> 
> 标签：.htaccess, redirect, migration

我最近将我的网站更改为 Wordpress，以便更轻松、更直观地进行编辑，但这给我带来了重定向链接的问题，我知道这些链接存在于论坛帖子等以及链接图像等中。

我现在还不想删除旧的站点文件，以防万一我需要它们的东西，但我不希望来访者看到它们。

我可以去添加重定向到我能想到的 htaccess 文件的链接，但这太耗时了，转移到 Wordpress 的主要原因之一是因为网站已经变得很大，无法手动执行操作，所以有很多潜在的链接。

我的旧结构的一个例子是 mysite.com/index.html ， mysite.com/index_2.php ， mysite.com/contact/ 等...

我的新站点结构是 mysite.com/index.html 、 mysite.com/guests 、 mysite.com/guests/contact/ 等...

因此，除了登录页面 (index.html) 和几个资源目录之外的所有内容的新链接都将位于来宾目录中。

是否有任何简单（或耗时较少）的方法可以在需要时以搜索引擎友好的方式将流量引导到来宾目录但仍允许访问特定的根文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:01:16.320

也许这个 WordPress 插件可以帮助你

[http://wordpress.org/extend/plugins/redirection/](http://wordpress.org/extend/plugins/redirection/)

# php - 页面上的浮动标签？

> ID：12555374
> 
> 赞同：0
> 
> 时间：2012-09-23T19:09:20.793
> 
> 标签：php, javascript

我正在寻找创建一个简单的页面选项卡...的东西。

问题是，我什至不知道他们的正确术语。我说的是那些粘在窗口一侧的小标签，它们通常用于支持窗口。

这是一个例子：[http](http://www.livechatinc.com/) ://www.livechatinc.com/ （右下）

有人可以给我一个代码吗？我会适当地修改它。我只想要一个链接到另一个页面的简单图像。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T19:15:23.527

实际上，这是一个 html 问题，您可以像这样修复左下角的块：

html：

```
<div id="stick"><img src="myimg" /></div> 
```

CSS：

```
#stick{
width:100px;
height:50px;
position:fixed;
top:100%;
left:100px;
margin-top:-50px;
margin-left:-100px
} 
```

那是你想做的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T19:17:11.023

你必须使用 jquery + css 结合技术来做到这一点

你也可以使用插件这里是一个插件 [http://net.tutsplus.com/tutorials/javascript-ajax/create-a-tabbed-interface-using-jquery/](http://net.tutsplus.com/tutorials/javascript-ajax/create-a-tabbed-interface-using-jquery/)

# jquery - 从 jQuery.ajax 调用运行 javascript

> ID：12555378
> 
> 赞同：1
> 
> 时间：2012-09-23T19:09:44.663
> 
> 标签：jquery

我正在学习 jQuery，所以我正在尝试编写这个简单的演示。我尝试了多种方法，并且在发布此问题之前已经在这里和其他地方进行了搜索。

我知道 $.ajax 会生成一个我熟悉的 xmlhttpRequest。在这种情况下，我认为如果我将它发送到我可以计算结果的 PHP 文件中它会起作用。不幸的是，当我在浏览器中打开 tryjquery.html 时，页面只在我的“div”块中显示“error”一词。提前感谢您的帮助。

这是我的代码：

在 tryjquery.html 中，我有一个脚本部分调用它：

```
Calculator.addRemote(1,5,function(result){
$('div').html(result);
}); 
```

计算器是这个对象：

```
function Calculator(){
this.addRemote = addRemote;
}

that = Calculator;
that.addRemote = function (a, b, completedHandler){

var post = $.ajax({
    url: "/Calculator/Add",
    data: {a: a, b: b},
    type: "POST"
});

   post.done(function (result) {
   completedHandler(result);  
   });  

   post.fail(function () {  
   completedHandler('error');  
   });  
} 
```

...和 ​​/Calculator/Add 是这个 php 代码：

```
<?php
$a = $_GET['a'];
$b = $_GET['b'];
$r = $a + $b;
echo "result=".$r.";";
?> 
```

# wordpress - 如何将 Wordpress 管理员访问权限限制在一台或两台机器上

> ID：12555381
> 
> 赞同：0
> 
> 时间：2012-09-23T19:10:46.130
> 
> 标签：wordpress, ssl

如何限制和限制对 wordpress Admin 的访问（即使在登录后），仅限于一台或两台机器。如何“手动”创建存在于一台计算机上的证书，以检查对我的管理页面的访问权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T19:15:57.537

您可以在 /wp-admin 文件夹中创建一个`.htaccess`文件，以通过 IP 或主机名限制访问。在`.htaccess`文件中，添加以下内容：

```
<LIMIT GET>
order deny,allow
deny from all
allow from [xxx.xxx.xxx.xxx]
allow from [host.domain.com]
</LIMIT> 
```

您还可以创建一个`.htpasswd`文件以使用 Wordpress 身份验证之外的 BASIC 身份验证。通过运行创建文件：

```
htpasswd -c .htpasswd [username] 
```

其中 [username] 是您要创建的用户名，它会提示输入密码。要添加其他用户，请省略`-c`（此标志创建一个新文件）。创建 .htpasswd 文件后，在文件中引用它，`.htaccess`如下所示：

```
<LIMIT GET>
AuthType Basic
AuthName "Wordpress Admin"
AuthUserFile /path/to/authfile/.htpasswd
Require valid-user
</LIMIT> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T19:31:41.867

您可以使用客户端证书身份验证来限制对站点该部分的访问。（为了可用性，最好通过重新协商，在目录/位置指令中请求证书，而不是针对整个主机。）

客户端证书的 CA 不必与服务器证书的 CA 相关，因此您可以拥有自己的小型 CA。（有一些工具可以帮助您解决这个问题，例如 OpenSSL`CA.pl`或 TinyCA。）

您需要为要允许这些连接的浏览器颁发证书。您还可以将某些主题 DN 映射到某些用户名（使用`FakeBasicAuth`身份验证）并将其用于授权。这里有例子：[http ://httpd.apache.org/docs/2.2/ssl/ssl_howto.html#accesscontrol](http://httpd.apache.org/docs/2.2/ssl/ssl_howto.html#accesscontrol)

您可以让这些浏览器上的私钥的使用不受密码保护（尽管这通常不是一个好主意），因此使用这些机器的任何人都可以通过这种方式访问​​（如果您正在尝试这样做）。用密码保护它们当然更好（例如 Firefox 中的主安全密码），这样您就知道它也是机器的正确用户。您可能需要为此查看 IE 的不可导出私钥选项，以便即使合法用户也无法导出私钥（至少没有一定程度的困难）。

# magento - 从错误日志中了解堆栈跟踪？（马金托）

> ID：12555383
> 
> 赞同：1
> 
> 时间：2012-09-23T19:10:55.037
> 
> 标签：magento

我一直在寻找有关如何阅读和理解堆栈跟踪的指南。在这种情况下，人们在尝试填写和发送联系表时会遇到错误。而且我真的很难解决这个问题，当我无法破译堆栈时，这并不容易。（这是一个magento 1.6.2 安装）

电子邮件正在发送，但联系表格告诉用户存在问题，因此我们从人们一次又一次地尝试中得到很多重复。

```
exception 'Zend_Mail_Transport_Exception' with message 'Unable to send mail. mail(/var/www/site.dk/logs/php-maillog.log): failed to open stream: Permission denied' in /var/www/site.dk/public_html/lib/Zend/Mail/Transport/Sendmail.php:137
Stack trace: 
#0 /var/www/site.dk/public_html/lib/Zend/Mail/Transport/Abstract.php(348):      Zend_Mail_Transport_Sendmail->_sendMail()
#1 /var/www/site.dk/public_html/lib/Zend/Mail.php(1194): Zend_Mail_Transport_Abstract->send(Object(Zend_Mail))
#2 /var/www/site.dk/public_html/app/code/core/Mage/Core/Model/Email/Template.php(409): Zend_Mail->send()
#3 /var/www/site.dk/public_html/app/code/core/Mage/Core/Model/Email/Template.php(462): Mage_Core_Model_Email_Template->send('email@email.com', NULL, Array)
#4 /var/www/site.dk/public_html/app/code/core/Mage/Contacts/controllers/IndexController.php(104): Mage_Core_Model_Email_Template->sendTransactional('1', 'general', 'email@email.com', NULL, Array)
#5 /var/www/site.dk/public_html/app/code/local/Mage/Core/Controller/Varien/Action.php(420): Mage_Contacts_IndexController->postAction()
#6 /var/www/site.dk/public_html/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('post')
#7 /var/www/site.dk/public_html/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#8 /var/www/site.dk/public_html/app/code/local/Mage/Core/Model/App.php(348): Mage_Core_Controller_Varien_Front->dispatch()
#9 /var/www/site.dk/public_html/app/Mage.php(640): Mage_Core_Model_App->run(Array)
#10 /var/www/site.dk/public_html/shop/index.php(80): Mage::run('store...', 'store')
#11 {main} 
```

sendmail.php 中的片段

```
public function _sendMail()
{
    if ($this->parameters === null) {
        set_error_handler(array($this, '_handleMailErrors'));
        $result = mail(
            $this->recipients,
            $this->_mail->getSubject(),
            $this->body,
            $this->header);
        restore_error_handler();
    } else {
        if(!is_string($this->parameters)) {
            /**
             * @see Zend_Mail_Transport_Exception
             * 
             * Exception is thrown here because
             * $parameters is a public property
             */
            #require_once 'Zend/Mail/Transport/Exception.php';
            throw new Zend_Mail_Transport_Exception(
                'Parameters were set but are not a string'
            );
        }

        set_error_handler(array($this, '_handleMailErrors'));
        $result = mail(
            $this->recipients,
            $this->_mail->getSubject(),
            $this->body,
            $this->header,
            $this->parameters);
        restore_error_handler();
    }

    if ($this->_errstr !== null || !$result) {
        /**
         * @see Zend_Mail_Transport_Exception
         */
        #require_once 'Zend/Mail/Transport/Exception.php';
       (137) throw new Zend_Mail_Transport_Exception('Unable to send mail. ' . $this->_errstr);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T21:09:53.853

我打算把它写成评论，但评论框太长了。

如果我们逐行查看堆栈跟踪，您将开始了解发生了什么：

```
exception 'Zend_Mail_Transport_Exception' with message 'Unable to send mail. mail(/var/www/site.dk/logs/php-maillog.log): failed to open stream: Permission denied' in /var/www/site.dk/public_html/lib/Zend/Mail/Transport/Sendmail.php:137 
```

首先，异常类型，它`Zend_Mail_Transport_Exception`会让我们知道从哪里开始寻找。在这种情况下，这是在 Zend_Mail 代码中某处发生的错误。

其次，消息`'Unable to send mail. mail(/var/www/site.dk/logs/php-maillog.log): failed to open stream: Permission denied'`。对我来说，这似乎很清楚，当 php-maillog.log 试图打开时，我们得到了一个权限被拒绝的错误。这是什么原因造成的？这就是你必须确定的。

第三，向我们展示了异常实际发生的位置`/var/www/site.dk/public_html/lib/Zend/Mail/Transport/Sendmail.php:137`。因此，正如您所指出的，它发生在 Sendmail.php 的第 137 行。

堆栈跟踪的其余部分是 PHP 获取错误的路径。也就是说，哪个函数调用了什么来达到您看到异常的地步。这是从要添加到堆栈中的最后一件事报告的，回到第一件事，因此您几乎可以通过函数调用向后跟踪您的代码。

在这种情况下，您可以看到第 348 行的代码`/var/www/site.dk/public_html/lib/Zend/Mail/Transport/Abstract.php`调用了异常的 _sendMail 函数……第 348 行的代码被第 1194 行的代码调用，`/var/www/site.dk/public_html/lib/Zend/Mail.php`依此类推。

**TL：博士？**

`/var/www/site.dk/logs/php-maillog.log`Magento 在打开文件时遇到问题。是否为该文件正确设置了权限？目录是否`/var/www/site.dk/logs/`存在？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-28T08:06:36.637

**解决方案 1**

首先使用以下命令找到没有电子邮件的订单

```
 SELECT *
 FROM `sales_flat_order`
 WHERE `customer_email` IS NULL 
```

现在我建议更新该订单

```
UPDATE `sales_flat_order` SET `customer_email` = '*******@yahoo.com' WHERE `sales_flat_order`.`entity_id` =YOUR_ORDER_ID ; 
```

现在在 core_email_queue 中找到这个订单

```
select * from `core_email_queue` WHERE entity_id='YOUR_ORDER_ID'; ///Note this is not order number. 
////you can get order id from the url of admin of order 
```

如果您也发送自己订购副本，则应该有 2 个条目

现在在 core_email_queue_recipients 中找到对应的

```
select * from `core_email_queue_recipients` WHERE message_id='MESSAGE_ID_FROM_core_email_queue'
select * from `core_email_queue_recipients` WHERE message_id='MESSAGE_ID_FROM_core_email_queue' 
```

如果 core_email_queue_recipients 中没有 message_id，则应将其从 core_email_queue 中删除

**解决方案 2：快速和肮脏的一个**

我没有尝试过的其他快速而肮脏的解决方案，但您可以先在测试服务器上尝试是

```
TRUNCATE core_email_queue_recipients;
TRUNCATE core_email_queue; 
```

[http://webdevelopmentsupport.net/2015/10/28/magento-order-email-not-sent-but-cron-job-running-exception-zend_mail_transport_exception-with-message-missing-to-header-in-varwwwhtmlshoplibzendmailtransportsendmail- php182/](http://webdevelopmentsupport.net/2015/10/28/magento-order-email-not-sent-but-cron-job-running-exception-zend_mail_transport_exception-with-message-missing-to-header-in-varwwwhtmlshoplibzendmailtransportsendmail-php182/)

# java - 基于 String 的简单 Java 类型

> ID：12555388
> 
> 赞同：1
> 
> 时间：2012-09-23T19:11:32.860
> 
> 标签：java

我想要一种基于 String 生成类型安全类型的简单方法。

我有很多地方我通常只使用一个字符串来保存不透明的 UID（示例），我想远离这个。

`java.lang.String`是最终的。理想情况下，我希望扩展`String`，但我知道我不能这样做。我最好的选择是什么？

我知道我可以使用封装，但如果可能的话，我正在寻找更有效的东西。

*更新*：我想要一个有意义的类型名称，即不仅仅是到处都是 UUID。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T19:25:44.463

因为`String`是声明`final`的，我认为封装是你唯一能做的事情。为了提供某种程度的插件兼容性，您可以将您的类声明为实现`CharSequence`。

```
public class TypeSafeStringBase implements CharSequence {
    protected final String mString;
    protected TypeSafeStringBase(String string) {
        mString = string;
    }
    @Override
    public char charAt(int index) {
        return mString.charAt(index);
    }
    @Override
    public int length() {
        return mString.length();
    }
    @Override
    public CharSequence subSequence(int start, int end) {
        return mString.subSequence(start, end);
    }
    @Override
    public String toString() {
        return mString;
    }
}

public class ParamName extends TypeSafeStringBase {
    ParamName(String string) {
        super(string);
    }
}

public class Prompt extends TypeSafeStringBase {
    Prompt(String string) {
        super(string);
    }
}

// etc. 
```

您可能还考虑声明要实现的基类`Serializable`和（或每个子类`Comparable<String>`的类型安全）。`Comparable`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T19:21:21.830

字符串继承自[CharSequence](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/CharSequence.html)

如果更改引用类型 CharSequence，您可以使用 StringBuilder 或任何其他可变 CharSequence。

希望能帮助到你。

# tfs - 使用 Team Build 2010 运行 xUnit 测试

> ID：12555390
> 
> 赞同：2
> 
> 时间：2012-09-23T19:12:00.043
> 
> 标签：tfs, continuous-integration, tfsbuild, xunit.net

我需要**配置 Team Build Server (TFS 2010) 来运行 xUnit 测试**以及 MSTests。我发现的一些信息是下一个网址：

[http://weblogs.asp.net/mehfuzh/archive/2009/08/25/configuring-team-build-using-xunit.aspx](http://weblogs.asp.net/mehfuzh/archive/2009/08/25/configuring-team-build-using-xunit.aspx)

[http://msmvps.com/blogs/mehfuz/archive/2009/09/05/configuring-team-build-using-xunit-from-client-update.aspx](http://msmvps.com/blogs/mehfuz/archive/2009/09/05/configuring-team-build-using-xunit-from-client-update.aspx)

网络上的每个帖子都说我需要修改/配置团队构建服务器或`TeamBuildTypes`目录（顺便说一句。我在团队资源管理器中看不到它）。但我的问题是 Team buid 在公司网络中，我无法以我的方式配置它。

所以，**我的问题**是：是否有能力配置团队 Build 2010 以连续运行 xUnit 测试？如何仅从客户端配置它以运行 xUnit 测试？

我会很感激这方面的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T19:21:38.773

这些文章谈论的是 TFS 2008 而不是 2010。在 TFS 2010 中，构建技术发生了显着变化。

您要做的是自定义将存在于源代码管理的 BuildProcessTemplates 目录中的 TFS 构建工作流文件 (DefaultTemplate.xaml)。

您需要添加一个 InvokeProcess 活动，该活动将执行适当的命令行命令来为您运行 xUnit。

以下是一些可能对您有所帮助的链接：

[http://geekswithblogs.net/jakob/archive/2012/02/01/handling-warnings-and-errors-with-invokeprocess-in-tfs-2010-build.aspx](http://geekswithblogs.net/jakob/archive/2012/02/01/handling-warnings-and-errors-with-invokeprocess-in-tfs-2010-build.aspx)

[http://www.ewaldhofman.nl/post/2010/04/20/Customize-Team-Build-2010-e28093-Part-1-Introduction.aspx](http://www.ewaldhofman.nl/post/2010/04/20/Customize-Team-Build-2010-e28093-Part-1-Introduction.aspx)

# yii - 我应该把 yii 框架和受保护的文件放在哪里？

> ID：12555398
> 
> 赞同：0
> 
> 时间：2012-09-23T19:12:55.067
> 
> 标签：yii

我正在玩 yii，但我不确定将框架文件放在哪里。在我的共享主机上，我有 /home/username 文件夹，其中当然包含 public_html。Yii 应用程序文件应该进入 public_html，但是框架呢？它也应该放在 public_html 中还是应该放在 /home/username 中？那还能用吗？受保护的文件夹呢？我应该将它与 public_html 中的所有其他应用程序文件一起保留，还是应该将它也移到其他地方？

解决这个问题的常用方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T05:48:42.313

大多数网络服务器最酷的一点是，让您的实际代码比公共代码高一级不是问题。我使用的通常是这样的：

```
 pubic_html/        <- your /home/user/public_html
     mysite.com/
       public/        <- The web site root (for apache config)
       protected/     <- Your actual code
       dependencies/  <- Framework and other libraries you use
       db/            <- All database delta scripts 
```

如果您的多个站点使用相同的库，您也可以选择将它们放在一个公共位置并向其添加符号链接，这样您就不会用多个副本耗尽您的服务器配额。我认为如果您使用的是 Apache，您必须为此启用 FollowSymlinks 选项。

IMO 限制对 public/ 文件夹公开可用的内容是一件好事。考虑到您的实际代码文件夹无法从外部世界访问，它增加了一点额外的保护。

编辑：正如我在上面的评论中提到的：如果您的主机只允许一个站点并且它预先链接到 public_html 您可以考虑使用另一种结构来拆分所有内容：

```
 protected_html/
       code/          <- Your actual code
       dependencies/  <- Framework and other libraries you use
       db/            <- All database delta scripts

   pubic_html/        <- your /home/user/public_html and website root. 
```

Yii 非常通用，允许对此进行配置，配置文件被假定在 protected/config 文件夹下，任何更高级别的都被认为是模型/控制器的位置等等。在 Rolands 回答从其他位置包含 Yii 和修改包含您的配置文件之间应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T19:18:26.453

我通常将它们放在 /home/username 中，这样可以确保没有人可以直接访问框架。然后一旦放置在那里，编辑 public_html 中的 index.php 文件以指向框架目录

```
$yii=dirname(__FILE__).'/../../yii-1.1.12.b600af/framework/yii.php'; 
```

您也可以将框架放在 public_html 文件夹中，然后只需在框架文件夹中添加一个 .htaccess 文件，其中包含以下`deny from all`假设在 apache 中启用了覆盖所有，这也将确保没有人可以从浏览器访问该目录。

因此，只要有可能，您不需要直接从浏览器访问的文件和文件夹总是将它们放在 public_html 文件夹之外，以提高安全性，假设禁用 apache 中的全部覆盖

# android - 如何限制 Android Intent 或增加安全性

> ID：12555399
> 
> 赞同：6
> 
> 时间：2012-09-23T19:12:56.523
> 
> 标签：android, security, android-intent

我在我的应用程序中的一个活动中添加了一个意图过滤器，以便其他应用程序可以通过我的应用程序访问某些数据（来自云）。但是，一些用户可能有隐私问题，并且可能对他们的数据被使用不太满意。但是，其他应用程序可以插入我的应用程序，以将其设置等备份到云中。

现在，我需要某种安全机制来限制哪些应用程序可以访问我的应用程序，以便我可以禁止恶意应用程序等。虽然无法识别恶意应用程序，但我希望通过只允许某些“受信任”来进行某种访问控制包名。但是我找不到如何做到这一点。

另一种选择是添加权限要求，但这可能会被更多用户忽略。虽然那将是用户的错（如果我不添加权限那将是我的错），但最近应用程序因暴露用户内容而受到了很多抨击。

第三个选项是每次某些应用访问我的时提示用户。但是我没有包名，所以我不知道意图来自哪里。此外，我的应用程序会自动执行来自云端的某些传输，因此用户可能会“设置并忘记”意图。

我仅仅依靠意图在两个不同的应用程序之间传输一些命令。我知道我必须自己实施保护措施，但如果 Google 已经有一些流程，我不想重新发明轮子。如果没有，我将不得不实现自己的身份验证流程或类似的东西。

编辑：我是个菜鸟，所以我用词太松散了。试图使问题变得更好。

关于应用程序的更多信息。它自动从/向云服务下载/上传。通过发送意图，另一个应用程序可以指定要下载或上传的文件。我不希望在用户不知情的情况下发生这种情况，所以当意图出现并接受数据时我会提示他。而且，该应用程序可以设置定期转账。虽然现在已经提示用户两次（一次是关于权限，一次是在意图进入时），但他无权抱怨。但这是可以接受的做法，还是我需要以某种方式更多地保护它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T23:40:27.333

> 我在我的应用中添加了一个意图过滤器

不，你没有。您已将 an 添加`<intent-filter>`到 an`<activity>`或 a`<service>`或 a `<provider>`，但未添加到 an `<application>`。

> 现在，我需要某种安全机制来限制哪些应用程序可以访问我的，这样我就可以禁止恶意应用程序等。

确切地说，您打算如何识别“恶意应用程序”？

> 我的首选选项是我可以通过使用包名称过滤意图来启用来自某些“受信任的提供者”的意图。但是我找不到如何做到这一点。

这是不支持的。

> 另一种选择是添加权限要求，但这可能会被更多用户忽略。

如果用户“忽略”了一项许可要求，他们就没有理由抱怨“隐私问题”。

> 但是我没有包名，所以我不知道意图来自哪里。

在某些情况下，尤里的建议会奏效。

> 当涉及到意图时，我有哪些安全选择

Android中没有这样的概念。`Intent`s 没有“安全性”，就像整数有“安全性”一样。活动、服务和广播接收器代表您的代码，您的代码可以实施安全措施来保护所述代码。

> 或者这是 IPC 的错误方法？

由于您没有说明您正在为 IPC 做什么（`Intent`显然它涉及对象除外），因此无法回答这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T21:31:22.493

我认为您应该查看`Binder.getCallingUid`获取调用进程的 UID（然后是其包名）或`Binder.getCallingPid`获取调用进程的 PID 并从该 pid[发现](https://stackoverflow.com/questions/12318687/pid-for-the-process-that-sent-an-intent)调用进程的包名的函数。请注意，多个包可以使用相同的 UID（如果它们仅使用相同的证书签名）并且多个包可以共享一个进程（但它们也应该具有相同的 UID）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-21T18:40:14.917

如果允许向您的应用发送意图的唯一应用也是您控制的应用，您可以`<permission>`为您的应用创建一个，并将其安全级别设置为“签名”。这将限制对使用相同签名密钥签名的应用程序的访问。

```
<manifest ...>
    ...
    <permission name="com.thedesolatesoul.myapp.MY_ACCESS"
        android:permissionLevel="signature"
        android:label="@string/my_access_label"
        android:description="@string/my_access_description"
        />
</manifest> 
```

那么唯一可以向您的应用发送意图的应用是那些`<uses-permission>`在其清单中具有适当条目*并由*相同密钥签名的应用。

# ruby-on-rails - Ruby StringIO 错误 _dump_data - Ruby on Rails

> ID：12555401
> 
> 赞同：1
> 
> 时间：2012-09-23T19:13:08.190
> 
> 标签：ruby-on-rails, ruby, evernote

我有一个无法解决的奇怪问题。我在 Rails 应用程序中使用 oAuth 和 Evernote API。我有 2 个用于此 atm 的控制器。

回调控制器
[http://paste.codebasehq.com/pastes/sazk9j2lmnjfqvtio4](http://paste.codebasehq.com/pastes/sazk9j2lmnjfqvtio4)

BoardsController
[http://paste.codebasehq.com/pastes/yx2ymolh15wz3v0ctg](http://paste.codebasehq.com/pastes/yx2ymolh15wz3v0ctg)

连接工作正常，我可以在控制器中获取我的笔记本列表并使用`raise`. 当我注释掉 raise 我得到这个错误：

```
no _dump_data is defined for class StringIO 
```

`@notebooks`是一个数组，这是来自的输出`raise`

```
["theonramp's notebook", "another notebook"] 
```

我觉得很好，所以我很茫然。我已经搜索了这个错误的高低，但一无所获。这就是错误的全部内容，相当无益。

其他任何人都会遇到此错误。

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:18:35.787

原来 Rails 不喜欢 NoteStore 保存在会话中。我将它移出并用 before_filter 调用它，一切都很好。

# javascript - getElementByID 工作，但 jQuery 的选择器不是

> ID：12555403
> 
> 赞同：0
> 
> 时间：2012-09-23T19:13:34.030
> 
> 标签：javascript, jquery

这让我发疯。我正在尝试在 jQuery 中按 ID 选择一个 DOM 元素并将其删除。尽管我尽了最大的努力，jQuery 仍然给我 Uncaught Error: Syntax error, unrecognized expression: #li-/media/photos/KObtu.jpg

但是这个 id 确实存在于我的 DOM 中。所以我决定从图片中删除 jQuery 并使用普通的 ol' javascript。这很好用，但我不知道为什么。

```
function DeletePhoto() {
    //Remove a photo from the server when the delete button is clicked
    $("#personal-photo-list .delete").click( function() {
        var photoId = $(this).attr("id").split("-")[1];
        $.post("profile/DeletePhoto/", { "photo": photoId }, function(jsonObject){
            $("#li-" + photoId).remove(); //What I actually want to call. Does not work
            $("#li-/media/photos/KObtu.jpg").remove(); //I thought maybe using a variable was throwing things off.  This does not work either
            document.getElementById("li-/media/photos/KObtu.jpg").innerHTML="dsfsdfsdfsdf"; //The exact same id as the statements above. This command successfully replaces the text in the <li> tag
    });
}); 
```

}

如果有人好奇，这里是 HTML 的片段：

```
<li id="li-/media/photos/KObtu.jpg">
                <img src="/media/photos/KObtu.jpg"> 
                <p> Uploaded on Sept. 23, 2012 | <a href="javascript:void(0)" id="a-/media/photos/KObtu.jpg" class="delete"> Delete </a> </p>
</li> 
```

非常感谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T19:39:12.117

从[文档](http://api.jquery.com/category/selectors/)中：

> 如果您希望使用任何元字符（例如`!"#$%&'()*+,./:;<=>?@[\]^`{|}~`）作为名称的文字部分，则必须使用两个反斜杠转义该字符：`\\`.

`/`是一个元字符，所以你必须转义它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T19:15:57.187

您的 LI id 使用连字符（破折号），但您的 jquery 选择器使用下划线

编辑：或者，你可以使用类似的东西：

```
$(this).parents("li").remove(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T19:54:32.130

尝试使用 $("[id='personal-photo-list'] .delete") 或 $("[id='li-/media/photos/KObtu.jpg']") 。工作 jsFiddle [http://jsfiddle.net/42Vyq/1/](http://jsfiddle.net/42Vyq/1/)

jQuery API： [http ://api.jquery.com/attribute-equals-selector/](http://api.jquery.com/attribute-equals-selector/)

当天才开发人员使用类名“user.email”时，我遇到了一些问题

# c - 为什么只打印输入的第二个值？

> ID：12555405
> 
> 赞同：1
> 
> 时间：2012-09-23T19:13:39.503
> 
> 标签：c, printf, scanf

```
#include <stdio.h>
#include <math.h>
#include <stdlib.h>

int main(void)
{
    char wunit[2]; // weight unit
    char hunit[2]; // height unit

    double weight, height;

    printf("Enter the body weight: ");
    scanf("%lf%s", &weight, &wunit); // input weight and unit eg. 150lb

    printf("Enter the height: "); 
    scanf("%lf%s", &height, &hunit); // input height and unit eg. 5.65 ft

    printf("The height unit: %s\n", hunit);
    printf("The weight unit: %s", wunit);

    return 0;
} 
```

此代码仅打印出身高单位，而不是体重单位。我能做些什么来修复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T19:16:47.823

您没有为这两个字符串留出太多空间：每个字符串只有 2`char`个。请注意，C 字符串还需要空格以用于以空字符结尾的字符来标记字符串的结尾。

使用空终止字符，您的两个字符串每个只能正确包含一个字符。当您输入例如“lb”和“ft”时，您正在使用数组边界之外的数据。将数组的大小更改为（至少）3，并查看代码是否正确打印出两个单位：

```
char wunit[3]; // weight unit
char hunit[3]; // height unit 
```

您的代码适用于更大的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T19:16:39.520

您`\n`在最后一条`printf()`语句中缺少 a ，并且由于 stdout 可能已缓冲，因此它仅在行尾写入屏幕。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T19:19:41.007

使用`%s`in`scanf`总是一个坏主意，出于同样的原因，`gets`它总是一个坏主意。您必须指定一个固定的缓冲区大小；你的 2 小得离谱，但更一般地说，你无法控制输入流中有多少个字符，所以你的程序很容易受到缓冲区溢出的影响。

解决此问题的一些方法：

*   带有一定长度的前缀`%s`，即“ `%2s`”。这将对复制的字符数量设置最大长度。

*   用于`fgets`将整行读入字符串缓冲区（具有任意最大值），然后您希望使用 读取的值有一些界限`%s`。你甚至可以用`sscanf`它来做。

*   使用类似`readline`which 将分配任意数量的字符来读取该行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-23T19:19:45.400

因为您试图在 2 个字符数组中包含两个字符串。字符串应该总是以 '\0' 结尾，所以你应该这样做：

```
char wunit[3]; // weight unit
char hunit[3]; // height unit 
```

例如，wunit 数组将具有： ['l', 'b', 0]

# php - Greasemonkey 脚本将 javascript 变量与另一个页面的内容进行比较？

> ID：12555408
> 
> 赞同：1
> 
> 时间：2012-09-23T19:13:54.613
> 
> 标签：php, javascript, compare, greasemonkey

Greasemonkey 脚本是否可以将以下脚本的变量与来自另一个站点的成员列表进行比较，如果不匹配任何人`Name`，则使其运行脚本的其他部分？`Name`

```
//alert(Name);
var postHistory = "http://"+regionSlice+".targetforum.com/board/search.php?do=process&searchuser="+Name+"&exactname=1&showposts=1";

var avatar = "http://othersite.com/forum/avatar/" +regionSlice+ "." + Name + ".png"; // creates an avatar

// Replace the old Avatar
$('.user_icon', this).attr('src', avatar);
$('.user_icon', this).wrap('<a href="' + postHistory + '" class="link"></a>');
$('.user_icon', this).attr('width', '80');
$('.user_icon', this).attr('height', '80');
$('.user_icon', this).attr('style', 'position:relative; TOP:7px'); 
```

`Name`如果此代码在不匹配任何记录的情况下将在下面执行，那将是完美的。

```
var postHistory = "http://"+regionSlice+".targetforum.com/board/search.php?do=process&searchuser="+Name+"&exactname=1&showposts=1";
var avatar = "http://othersite.com/forum/avatar/" +regionSlice+ "." + Name + ".png"; // creates an avatar
var noAvatar = "http://other.com/forum/avatar/questionmark.png";

// Replace the old Avatar
    $('.user_icon', this).attr('src', noAvatar);
    $('.user_icon', this).wrap('<a href="' + postHistory + '" class="link"></a>');
    $('.user_icon', this).attr('width', '80');
    $('.user_icon', this).attr('height', '80');
    $('.user_icon', this).attr('style', 'position:relative; TOP:7px'); 
```

* * *

othersite.com/forum/members.php 上的成员列表：

```
<?php
    $con = mysql_connect("host","user","pass");
    if (!$con)
    {
        die('Could not connect: ' . mysql_error());
    }
    mysql_select_db("database", $con);

    $result = mysql_query("SELECT username FROM users ORDER BY ID");

    echo "<table border='0'>
<tr>
<th>UserName</th>
</tr>";

    while($row = mysql_fetch_array($result))
    {
        echo "<tr>";
        echo "<td>" . $row['username'] . "</td>";
        echo "</tr>";
    }
        echo "</table>";

mysql_close($con);
?> 
```

* * *

这是该页面的示例部分。该部分在一页中出现 1 到 10 次，因此`Name`将检查 1 到 10 次。“Vortexer”是一个例子，`Name`下面两行是`user_icon`.

```
<div id="edit4767039" style="padding:0px 0px 6px 0px">
  <a name="4767039">&nbsp;</a>

  <div class="forum_post post_frame" id="post4767039">
    <div class="post_hidden_message">
       Comment below rating threshold, click <a href="#">here</a> to show it.
    </div>
    <table>
    <tr>
      <td class="left" valign="top" id="currentPost">
        <div class="avatar_top">
          <div class="avatar" style="padding-top:10px;">

            <big>Vortexer</big>
            <a class="photo">

              <img class="user_icon" src="theme/img/unknown_icon.jpg"/>
              <span class="left_orb">??</span>
              <span class="right_orb"><img src="http://irrelevantserver.com/forum/ui/avatar_right_orb_blue.png" alt=""/></span>
            </a>
            <small>Senior Member</small>
          </div>
          <center>
          <a href="//articles/The_Code" target="_blank"><span class="sca_icon" style="align: center"><img src="http://irrelevantserver.com/images/community/community site/SCA_badge.png" alt="This user has accepted the code, click for more information"/></a></span>
          </center>
        </div>
      </td>
      <td class="right" valign="top">
        <table class="right_table">
        <tr>
          <td>
            <div class="message_header">
              <!-- status icon and date -->
              <span>1 Day Ago</span>
              <!-- / status icon and date -->
            </div>
            <div class="post_content" id="post_message_4767039">
              <p>This is forum post content</p>
            </div>
            <div class="message_footer">
              <div class="r_block">
                <span class="post_rating">
                <span class="rating_positive">+3</span>
                </span>
                <a href="ratepost.php?postid=4767039&vote=-1" rel="nofollow" class="vote_down_button">
                  <img src="http://irrelevantserver.com/forum/ui/thumbs_down.png" alt=""/>
                </a>
                <a href="ratepost.php?postid=4767039&vote=1" rel="nofollow" class="vote_up_button">
                  <img src="http://irrelevantserver.com/forum/ui/thumbs_up.png" alt=""/>
                </a>
                <a href="newreply.php?do=newreply&amp;p=4767039" class="quick-reply" rel="nofollow"><img src="http://irrelevantserver.com/forum/ui/message_quote_icon.png" alt="Reply With Quote"/></a>
                <a href="editpost.php?do=editpost&amp;p=4767039" name="vB::QuickEdit::4767039"><img src="http://irrelevantserver.com/forum/ui/edit_icon.png" alt="Edit/Delete Message" class="edit_button"/></a>
              </div>
            </div>
          </td>
        </tr>
        </table>
      </td>
    </tr>
    </table>
  </div>
</div> 
```

使用以下代码获取名称：

```
// Replace everypost's avatar
$('.forum_post').each(function(index) {
    name = $('big', this).html();
    //alert($('big', this).html());
    var Name1 = name.replace("\<font ", "");
    var Name2 = Name1.replace("color\=\"\#c98f1a\"\>", "");
    var Name3 = Name2.replace("color=\"green\"\>", "");
    var Name4 = Name3.replace("color=\"red\"\>", "");
    var Name = Name4.replace("</font>", ""); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:57:54.957

是的，您可以与`Name`从另一个网页上抓取的内容进行比较。由于它看起来是跨域的，因此您必须使用它[`GM_xmlhttpRequest`](http://wiki.greasespot.net/GM_xmlhttpRequest)来执行此操作。

从***members.php***的外观来看，它返回如下表：

```
<table>
    <tr><th>UserName</th></tr>
    <tr><td>User A</td></tr>
    <tr><td>User B</td></tr>
    <tr><td>User C</td></tr>
    <tr><td>User D</td></tr>
</table> 
```

**没有别的了。**
（如果它***确实***返回了其他内容，则需要调整以下代码中的选择器。）
我[在 jsFiddle 制作了该 HTML 的模型](http://fiddle.jshell.net/TDcDV/show/)。

如果你安装这个 Greasemonkey 脚本，你可以看到它读取了用户名：

```
// ==UserScript==
// @name        _Parse simple AJAX page scrape/fetch
// @include     http://stackoverflow.com/*
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @grant       GM_xmlhttpRequest
// ==/UserScript==

GM_xmlhttpRequest ( {
    method:     'GET',
    url:        'http://fiddle.jshell.net/TDcDV/show/',
    onload:     getUsernamesFromAjax
} );

function getUsernamesFromAjax (respObject) {
    var respDoc     = $(respObject.responseText);
    var userNameTDs = respDoc.find ("td");
    var userNames   = userNameTDs.map ( function () {
        return this.textContent;
    } ).get ();

    alert ("The usernames are: " + userNames);
} 
```

（警报，“ `The usernames are: User A,User B,User C,User D`”。）

* * *

* * *

现在，至于`Name`与数据相比，问题尚不清楚。

1.  **`Name`来自哪里？**
2.  有多个`Name`值吗？如果是这样，哪个`.user_icon`节点与哪个相关`Name`？

链接或[粘贴](http://pastebin.com/)到整个页面。

* * *

**更新：**
根据新信息，您希望脚本执行以下操作：

1.  将头像替换为“进行中”图像（“throbber”），让用户知道我们正在等待 AJAX 结果。
    （AJAX 可能需要几秒钟。）

2.  向外部站点发起 AJAX 请求以获取成员列表。

3.  当 AJAX 返回成员列表时：

    1.  对于成员列表中的名称，替换其头像。
    2.  对于不在成员列表中的名称，将其头像替换为“无头像”图像。

这是**一个完整的脚本**。
安装脚本，然后**访问[jsbin.com/awaxap/1](http://jsbin.com/awaxap/1)以查看它的运行情况。**

```
// ==UserScript==
// @name      _Replace avatars for matching names
// @include   http://jsbin.com/awaxap/*
// @include   http://YOUR_SERVER.COM/YOUR_PATH/*
// @require   http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @resource  waitImg  http://i.cdn.turner.com/money/.element/img/1.0/misc/throbber.gif
// @grant     GM_xmlhttpRequest
// @grant     GM_getResourceURL
// ==/UserScript==

//--- Replace avatars with an "In progress" image.
var waitImgSrc  = GM_getResourceURL ("waitImg");
$("div.forum_post div.avatar img.user_icon").attr ('src',  waitImgSrc);

//--- Fetch the member list.
GM_xmlhttpRequest ( {
    method:     'GET',
    url:        'http://fiddle.jshell.net/TDcDV/show/',
    onload:     changeUserIconsOfMembers
} );

//--- Replace avatars based on name match.
function changeUserIconsOfMembers (respObject) {
    var respDoc     = $(respObject.responseText);
    var userNameTDs = respDoc.find ("td");
    var userNames   = userNameTDs.map ( function () {
        return $.trim (this.textContent.toLowerCase () );
    } ).get ();

    //--- Replace every post's avatar.
    $('div.forum_post').each ( function (index) {
        //-- text() automatically strips out any <font> cruft, if present.
        var Name        = $('div.avatar big', this). text ();
        //-- Standardize name for comparison.
        Name            = $.trim (Name).toLowerCase ();

        var regionSlice = "";   // where's this come from?
        var postHistory = "http://" + regionSlice
                        + ".targetforum.com/board/search.php?do=process&searchuser="
                        + Name + "&exactname=1&showposts=1"
                        ;
        var avatar      = "http://othersite.com/forum/avatar/" + regionSlice
                        + "." + Name + ".png"
                        ; // creates an avatar

        avatar  = "http://i.stack.imgur.com/Nrzn7.jpg"; // Temp avatar upgrade. ;)

        //--- Was the username not found?
        if (userNames.indexOf (Name) === -1 ) {
            avatar      = "http://other.com/forum/avatar/questionmark.png";
            avatar  = "http://i.stack.imgur.com/BbOsC.gif"; // Temp avatar upgrade. ;)
        }

        //--- Replace the old Avatar and give it a link to history.
        var userIcon    = $('div.avatar img.user_icon', this);
        userIcon.attr ( {
            src:        avatar,
            width:      '80',
            height:     '80',
            style:      'position:relative; TOP:7px;'
        } );
        userIcon.wrap ('<a href="' + postHistory + '" class="link"></a>');
    } );
} 
```

请注意，未找到用户“Vortexer”，但找到了“用户 B”。

# java - Transformer#transform(Source, Result) 抛出 FileNotFoundException？

> ID：12555409
> 
> 赞同：0
> 
> 时间：2012-09-23T19:13:56.273
> 
> 标签：java, xml, filenotfoundexception, transformer

我正在尝试使用 输出我的 XML 文档`Transformer.transform(Source, Result)`，但它不会导出文档，只会抛出`FileNotFoundException`. 我正在尝试`/WebContent/samples/users.xml`使用 Apache Tomcat 将其导出到我的项目中。在 Google 上做了一些工作后，我在[bugs.sun.com](http://bugs.sun.com)上的所谓“错误”上找到[了这个](http://bugs.sun.com/view_bug.do?bug_id=5077403)页面。

这是我的代码的选择：

```
Document doc = newDocument();
Element rootElement = doc.createElement("homeworkManager");

Element sampleUserElement = doc.createElement("user");
// (set username and password)

Element sampleHomeworkElement1 = doc.createElement("homework");
// (set homework attributes)

sampleUserElement.appendChild(sampleHomeworkElement1);
rootElement.appendChild(sampleUserElement);
doc.appendChild(rootElement);

// HomeworkManager.getRealPath(String) is the same as  HttpSession.getServletContext().getRealPath(String)
File output = new File(HomeworkManager.instance().getRealPath("/") + "/samples/users.xml");

Transformer transformer = TransformerFactory.newInstance().newTransformer();
transformer.setOutputProperty(OutputKeys.INDENT, "yes");
transformer.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "2");

transformer.transform(new DOMSource(doc), new StreamResult(output));  // EXCEPTION THROWN HERE 
```

这是堆栈跟踪：

```
javax.xml.transform.TransformerException: java.io.FileNotFoundException: ...\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\Homework Manager\samples\users.xml (The system cannot find the path specified)
at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.getOutputHandler(TransformerImpl.java:493)
at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:302)
at net.dean.homeworkmanager.UserManager.createSampleXMLFile(UserManager.java:215)
at org.apache.jsp.index_jsp._jspService(index_jsp.java:91)
at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722)

Caused by: java.io.FileNotFoundException: (...)\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\Homework Manager\samples\users.xml (The system cannot find the path specified)
at java.io.FileOutputStream.open(Native Method)
at java.io.FileOutputStream.<init>(FileOutputStream.java:212)
at java.io.FileOutputStream.<init>(FileOutputStream.java:104)
at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.getOutputHandler(TransformerImpl.java:466)
... 25 more 
```

如您所知，我很困惑。任何建议将不胜感激。

**编辑**：这只发生在 Web 项目上。我可以使用完全相同的代码在桌面应用程序上导出我的文档。

**编辑 2**：即使我创建了目录*和* `users.xml`，文件也不会被修改。相反，它是在`(...)\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\Homework Manager\samples\users.xml`

# mysql - 用于地理过滤的正确 mysql 结构

> ID：12555410
> 
> 赞同：0
> 
> 时间：2012-09-23T19:14:12.873
> 
> 标签：mysql

我们正在重新整理我们的房屋租赁数据库，并获得以下关注。我们有不同的 API，从住宅和公寓来和着陆。从 apis 我们主要只有 Country->Region->City(or Village) 结构。此外，我们还有 1 个额外国家/地区的公寓，我们有 Region->City->City Part->Street Structure

所以我们做了2个mysql方案。你能批评一下，也许暗示一个更好的方法吗？ ![第一个方案](../Images/6de94bb7d929495d1faa03a5fce98e36.png)

第二个

![第二种方案](../Images/80d3d17f1ea87d1c5dcb5643f0935618.png)

你能否批评一下，也许给一个更好的方法来做数据库，这将导致更好的性能，更少的连接等？我们不是 mysql 专家 :(((

图片很小，无法在此处查看，因此链接

[第一方案图片大一](http://gevork.ru/1.png)

[方案二 大图](http://gevork.ru/2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-09T05:30:39.817

整个架构是错误的！您对数据库规范化了解多少？您的架构至少不符合第三范式的要求。举个例子：

你有国家：

```
-CountryName1
-CountryName2
-CountryName3 
```

你有地区：

```
-RegionOfCountry1_a
 ...
-RegionOfCountry3_a 
```

你有城市：

```
-City_1_Of_Country1_Region_a
 ...
-City_3_Of_Country3_Region_a 
```

在树视图中的示例数据将是：

```
-CountryName1
|_ -RegionOfCountry1_a
    |_ -CityOf_Country1_Region_a
       |_ -City_1_Of_Country1_Region_a
       |_ -City_2_Of_Country1_Region_a
       |_ -City_3_Of_Country1_Region_a
    |_ -CityOf_Country1_Region_b
       |_ -City_1_Of_Country1_Region_b
       |_ -City_2_Of_Country1_Region_b
       |_ -City_3_Of_Country1_Region_b
    |_ -CityOf_Country1_Region_c
       |_ -City_1_Of_Country1_Region_c
       |_ -City_2_Of_Country1_Region_c
       |_ -City_3_Of_Country1_Region_c
|_ -RegionOfCountry1_b
    |_ -CityOf_Country2_Region_a
       |_ -City_1_Of_Country2_Region_a
    |_ -CityOf_Country2_Region_b
       |_ -City_1_Of_Country2_Region_b
    |_ -CityOf_Country2_Region_c
       |_ -City_1_Of_Country2_Region_c
|_ -RegionOfCountry1_c
    |_ -CityOf_Country2_Region_a
       |_ -City_1_Of_Country2_Region_c
...
-CountryName2
|_ -SecondCountry
       |_ -MegaCityCountry3
...
-CountryName3
|_ -MegaRegionCountry3
       |_ -MegaCityCountry3 
```

您的**房屋**表具有外键约束**（country_id、city_id、region_id）**，它“链接”到这 3 个表。它提供了创建错误记录的可能性，例如：

```
*name = "MyHouse with address data from a far galaxy"
country_id = CountryName**1**
region_id = RegionOfSecondCountry (from CountrName**2**)
city_id = MegaCityCountry3 (from -CountryName**3**)* 
```

这意味着下一步：你不知道规范化要求或者你不预测传递依赖

尝试下一步

```
----------------
Table "**houses**"
----------------
id
houseNumber
description
*fk_city_id*
---------------- 
```

*fk_city_id 对**城市**.id 的引用：*

```
----------------
table "**cities**"
----------------
id
name
*fk_region_id*
---------------- 
```

*fk_region_id 对**区域**.id 的引用：*

```
----------------
table "**regions**"
----------------
id
name
*fk_country_id*
---------------- 
```

*fk_country_id 对**国家**.id 的引用：*

```
----------------
table "**countries**"
----------------
id
name
---------------- 
```

PS >>对不起我的英语不好

# asp.net - 有什么方法可以模拟一个已实现的类

> ID：12555415
> 
> 赞同：0
> 
> 时间：2012-09-23T19:14:42.733
> 
> 标签：asp.net, unit-testing, mocking, webformsmvp

我想对MVP**演示**者类进行**单元测试。**但它与**服务**的交互不是通过接口（它使用具体类）。现在我想知道是否有**模拟**服务类而不必改变结构？

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T19:19:00.273

在 C#/VB.NET 中模拟的常用方法是使用特定场景所需的实现覆盖虚拟方法。因此，接口是最常用的方法，因为它的所有方法都是抽象的。

您是否有理由不愿意将服务依赖项更改为接口？另一种方法是将要测试的方法设置为虚拟的，这样您就可以在模拟中覆盖它们，但我不建议这样做，因为它有点脏。

单元测试的重点只是测试一个特定的单元，因此依赖于实现而不是接口真的很重要。******

# php - 加密存储的图像

> ID：12555418
> 
> 赞同：3
> 
> 时间：2012-09-23T19:15:34.790
> 
> 标签：php

我正在准备一个需要以加密格式存储图像的项目。图像将在 0.5mb 和 5mb 之间，并且必须保持原始质量。

我正在考虑使用 base64 对它们进行编码，但是我需要使用一些东西来加密它们（SHA1？）并将它们保存为服务器上的文件。

谁能给我建议？我可以将加密图像存储在哪种文件中？

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-23T20:45:15.193

操作并非微不足道；您不仅需要加密数据，还需要防止服务器被盗或闯入；如果需要更改密钥，您还需要考虑会发生什么。

要加密图像，您最好的选择可能是使用*对称*算法的**mcrypt 。**有几个关于如何做到这一点的教程。请参阅[使用 PHP 加密 AES-256 文件的最佳方法是什么？](https://stackoverflow.com/questions/8188662/what-is-the-best-way-to-encrypt-files-in-aes-256-with-php).

 *您需要做的是提供图像并即时解密，而无需将其存储在明文中。

现在的问题是在哪里保存密码。最好的整体解决方案是为每个用户提供一个秘密加密密钥，在用户登记时随机生成；并且密钥本身使用用户密码进行了*非对称加密。*您可以使用`phpseclib`RSA 来执行此操作。相同的加密密钥*也*以管理密码不对称存储。

所以工作流程是：

1.  用户登录（并提供他的密码）
2.  系统将密码哈希与存储的哈希进行比较并授予访问权限（您将使用诸如 bcrypt 之类的东西：请参阅[Is there a bruteforce-proof hashing algorithm?](https://stackoverflow.com/questions/2771487/is-there-a-bruteforce-proof-hashing-algorithm)）
3.  系统还解码加密字符串并将其存储在临时会话中（会话*的持久性可能是一个需要解决的问题！*）
4.  他现在可以访问该用户的所有图像

加密图像： - 如果用户上传图像，则在上传时加密密钥在会话中可用。使用它:-) - 如果图像以其他方式上传，则在数据库中设置“已加密/仍待加密”标志，并尽快（管理员登录/用户登录）所有待处理的加密执行操作。

然后将图像存储为加密文件（“001823040.bin”）。除了在数据库中，没有参考，它属于哪个用户；并且不知道用户（因此是加密密钥），图像是不可恢复的。

要提供图像，您只需将标题设置为图像类型，然后开始解码文件并将其以明文形式输出到用户的浏览器。

从攻击者的角度来看，只有图像是没有用的，因为它们是加密的。用户数据库是无用的，因为加密密钥本身是加密的。窃取或暴力破解一个用户的密码只能访问该用户的加密密钥，这与所有其他用户不同，然后仍然需要查找*哪些*图像属于该用户。

如果您需要更改用户的密码，您仍然可以使用管理密码恢复加密密钥，并使用用户的新密码对其进行非对称加密。**这不能自动完成**，因为这意味着将现在最重要的管理员密码以明文形式存储在系统上；所以所有忘记密码的用户都排成一排，早上管理员收到“有75人等待密码恢复”的通知，提供密码，然后全部解锁。

这很尴尬，但不幸的是，所有其他解决方案都依赖于**在本地以明文形式提供的密码**，其中安全妥协将使系统完全开放。

（有时您可以通过设置*第二个*小型、非常有限（因此不那么容易受到攻击）的服务器来充当加密托管服务来解决此限制；但维护起来要复杂得多）。

# 多用户/密码场景

您在一个表中有资源 A，并且*有几个*用户 U1、U2、... Un 可以访问该资源。这意味着用户 U1 必须能够访问资源 A 的解密密钥。

您可以通过存储 UserAccessToResource 表来做到这一点：

```
user_id         -- the user ID
resource_id     -- the resource ID
encryption      -- resource decryption key, encrypted with the user's encryption **key** 
```

要授予用户 U1 和资源 A 的访问权限，您必须自己有权访问资源 A*以及*U1 的加密密钥。那是：

*   管理员访问用户表并恢复 UserKeyEncryptedWithAdminKey。
*   作为管理员，他可以解密 UserKey。
*   以同样的方式访问 ResourceTable[A].ResourceKeyEncryptedWithAdminKey
*   他使用 UserKey 加密 ResourceKey 并存储到 UserAccessToResource

用户 U5 过来并可以快速验证 (5, 42, ??) 是否存在于 UserAccessToResource 表中，因此他知道他*可以*访问该资源。检索行，并解密 ResourceKey。*他现在可以访问 Resource[42] 并使用 ResourceKey对其*进行解密（但不能使用其他资源，因为它们具有不同的随机 ResourceKey）。

在这一切中，前端从未访问（除非编程错误）到 ResourceKey（或 UserKey）的实际值。API 类似于`DecryptResource(UserId, UserPass, ResourceId)` 并返回一个解密的资源。

当然，UserAccessToResource 可以包含任意数量的用户或资源——它是多对多的。对于每一个，都必须存储一个加密的密钥（比如 AES 条目的 32 个十六进制字节）。

# 丢失密码场景

不幸的是，这个操作*不能自动完成*。用户发送请求，但除非管理员登录，否则**无法访问**他的密钥。所以他必须等待。

当管理员登录时，系统能够访问 PasswordRecovery 表并找到用户的不完整记录。它访问用户表并检索 UserKeyEncryptedWithAdminKey。

它现在生成一个随机密钥，并使用使用该随机密钥加密的 UserKey 完成 PasswordRecovery 表中的记录。另一列包含使用相同随机密钥加密的“Squeamish Ossifrage”字样。他向用户 123 发送一封安全电子邮件，提供随机密钥。

用户 123 向系统提供随机密钥。管理员不再登录，但系统*可以*检查一旦解密，第二个表字段确实是“Squeamish Ossifrage”。然后假设第一个字段是解密的 UserKey。系统向 User123 请求新密码，并将新的 UserKeyEncryptedWithUserPass 存储到 Users 表中，清除 PasswordRecovery 中的条目。只更新了一条记录。用户 123 拥有的所有资源密钥仍然使用用户 123 的密钥加密，该密钥没有更改，仍然是管理员在创建帐户时随机生成的。

下一次登录，用户提供密码并解锁系统。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-23T20:07:11.663

我必须做一个类似的任务，将上传到我的应用程序中的文件加密存储在服务器中，然后当用户从应用程序中需要该文件时，在发送到浏览器之前解密它们。

我必须这样做，因为我的应用程序处理的是我国法律要求加密存储的特殊类型的数据（家庭暴力）。所以我理解 OP 的情况，并不是他出于技术原因需要对它们进行加密，而是为了遵守法律。

我所做的是在服务器上安装 OpenSSL，这样我就可以使用它对文件进行 AES-256 加密，您可以使用`system()`它从 php.ini 执行命令。

加密的命令是：

```
echo MyPassword | openssl.exe aes-256-cbc -pass stdin -salt -in somefile.pdf -out somefile.pdf 
```

和解密：

```
echo MyPassword | openssl.exe aes-256-cbc -pass stdin -d -in somefile.pdf -out decriptedfile.pdf 
```

此命令采用任何原始文件（无论格式如何），并且在解密时会重新创建相同的文件，因此无需进行 base64 编码或类似的操作，您提供给它们的内容它们会返回给您。

如果您迁移服务器，请参阅[windows 上的 openssl aes-256 加密文件无法在 linux 上解密，](https://stackoverflow.com/questions/4745029/openssl-aes-256-encrypted-file-on-windows-cant-be-decrypted-on-linux)以了解可能的警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T21:15:28.760

您实际上可以使用此功能执行此操作，例如： http: [//php.net/manual/en/function.openssl-encrypt.php](http://php.net/manual/en/function.openssl-encrypt.php)*

# android - 如何从位图中获取 Uri 对象

> ID：12555420
> 
> 赞同：27
> 
> 时间：2012-09-23T19:15:45.603
> 
> 标签：android, bitmap, uri

在某个点击事件中，我要求用户添加图像。所以我提供了两种选择：

1.  从图库中添加。
2.  单击相机中的新图像。

我的目标是保留与这些图像相关的“uri”列表。

如果用户选择画廊，那么我会得到图像 uri（这很简单）。但是如果他选择相机，那么在拍照后，我会得到那张照片的 Bitmap 对象。

现在如何将该 Bitmap 对象转换为 uri，或者换句话说，如何获取该位图对象的相对 Uri 对象？

谢谢。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-04-23T11:18:20.217

我的项目中有同样的问题，所以我按照简单的方法（[点击这里](http://colinyeoh.wordpress.com/2012/05/18/android-getting-image-uri-from-bitmap/)）从位图中获取 Uri。

```
public Uri getImageUri(Context inContext, Bitmap inImage) {
  ByteArrayOutputStream bytes = new ByteArrayOutputStream();
  inImage.compress(Bitmap.CompressFormat.JPEG, 100, bytes);
  String path = MediaStore.Images.Media.insertImage(inContext.getContentResolver(), inImage, "Title", null);
  return Uri.parse(path);
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-04-22T15:33:37.570

```
Images.Media.insertImage(inContext.getContentResolver(), inImage, "Title", null); 
```

上面提到的行使用位图创建缩略图，这可能会在您的 android 设备中消耗一些额外的空间。

此方法可以帮助您从位图中获取 Uri，而不会消耗一些额外的内存。

```
public Uri bitmapToUriConverter(Bitmap mBitmap) {
   Uri uri = null;
   try {
    final BitmapFactory.Options options = new BitmapFactory.Options();
    // Calculate inSampleSize
    options.inSampleSize = calculateInSampleSize(options, 100, 100);

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;
    Bitmap newBitmap = Bitmap.createScaledBitmap(mBitmap, 200, 200,
            true);
    File file = new File(getActivity().getFilesDir(), "Image"
            + new Random().nextInt() + ".jpeg");
    FileOutputStream out = getActivity().openFileOutput(file.getName(),
            Context.MODE_WORLD_READABLE);
    newBitmap.compress(Bitmap.CompressFormat.JPEG, 100, out);
    out.flush();
    out.close();
    //get absolute path
    String realPath = file.getAbsolutePath();
    File f = new File(realPath);
    uri = Uri.fromFile(f);

  } catch (Exception e) {
    Log.e("Your Error Message", e.getMessage());
  }
return uri;
}

public static int calculateInSampleSize(
        BitmapFactory.Options options, int reqWidth, int reqHeight) {
    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 1;

    if (height > reqHeight || width > reqWidth) {

        final int halfHeight = height / 2;
        final int halfWidth = width / 2;

        // Calculate the largest inSampleSize value that is a power of 2 and keeps both
        // height and width larger than the requested height and width.
        while ((halfHeight / inSampleSize) >= reqHeight
                && (halfWidth / inSampleSize) >= reqWidth) {
            inSampleSize *= 2;
        }
    }

    return inSampleSize;
} 
```

有关更多详细信息，请转到[有效加载大型位图](https://developer.android.com/topic/performance/graphics/load-bitmap)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-06T17:38:25.380

这对我有用。例如，以位图的形式从视频中获取缩略图。然后我们可以将位图对象转换为uri对象。

```
String videoPath = mVideoUri.getEncodedPath();
System.out.println(videoPath); //prints to console the path of the saved video
Bitmap thumb = ThumbnailUtils.createVideoThumbnail(videoPath, MediaStore.Images.Thumbnails.MINI_KIND);

 Uri thumbUri = getImageUri(this, thumb); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T11:15:07.187

尝试使用以下代码。可能对您有帮助：

```
new AsyncTask<Void, Integer, Void>() {
            protected void onPreExecute() {
            };

            @Override
            protected Void doInBackground(Void... arg0) {
                imageAdapter.images.clear();
                initializeVideoAndImage();
                return null;
            }

            protected void onProgressUpdate(Integer... integers) {
                imageAdapter.notifyDataSetChanged();
            }

            public void initializeVideoAndImage() {
                final String[] columns = { MediaStore.Images.Media.DATA, MediaStore.Images.Thumbnails._ID };
                String orderBy = MediaStore.Images.Media._ID;
                Cursor imageCursor = managedQuery(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, columns, null, null, orderBy);

                final String[] videocolumns = { MediaStore.Video.Thumbnails._ID, MediaStore.Video.Media.DATA };
                orderBy = MediaStore.Video.Media._ID;
                Cursor videoCursor = managedQuery(MediaStore.Video.Media.EXTERNAL_CONTENT_URI, videocolumns, null, null, orderBy);
                int i = 0;
                int image_column_index = 0;

                if (imageCursor != null) {
                    image_column_index = imageCursor.getColumnIndex(MediaStore.Images.Media._ID);
                    int count = imageCursor.getCount();
                    for (i = 0; i < count; i++) {
                        imageCursor.moveToPosition(i);
                        int id = imageCursor.getInt(image_column_index);
                        ImageItem imageItem = new ImageItem();
                        imageItem.id = id;
                        imageAdapter.images.add(imageItem);

                    }
                }

                if (videoCursor != null) {
                    image_column_index = videoCursor.getColumnIndex(MediaStore.Video.Media._ID);
                    int count = videoCursor.getCount();
                    for (i = 0; i < count; i++) {
                        videoCursor.moveToPosition(i);
                        int id = videoCursor.getInt(image_column_index);
                        ImageItem imageItem = new ImageItem();
                        imageItem.id = id;
                        imageAdapter.images.add(imageItem);
                    }
                }
                publishProgress(i);
                if (imageCursor != null) {
                    image_column_index = imageCursor.getColumnIndex(MediaStore.Images.Media._ID);
                    int count = imageCursor.getCount();
                    for (i = 0; i < count; i++) {
                        imageCursor.moveToPosition(i);
                        int id = imageCursor.getInt(image_column_index);
                        int dataColumnIndex = imageCursor.getColumnIndex(MediaStore.Images.Media.DATA);
                        ImageItem imageItem = imageAdapter.images.get(i);
                        Bitmap img = MediaStore.Images.Thumbnails.getThumbnail(getApplicationContext().getContentResolver(), id, MediaStore.Images.Thumbnails.MICRO_KIND, null);
                        int column_index = imageCursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
                        imageItem.imagePath = imageCursor.getString(column_index);
                        imageItem.videoPath = "";
                        try {
                            File imageFile = new File(Environment.getExternalStorageDirectory(), "image" + i);
                            imageFile.createNewFile();
                            ByteArrayOutputStream bos = new ByteArrayOutputStream();

                            if (bos != null && img != null) {
                                img.compress(Bitmap.CompressFormat.PNG, 100, bos);
                            }
                            byte[] bitmapData = bos.toByteArray();
                            FileOutputStream fos = new FileOutputStream(imageFile);
                            fos.write(bitmapData);
                            fos.close();
                            imageItem.thumbNailPath = imageFile.getAbsolutePath();
                            try {
                                boolean cancelled = isCancelled();
                                // if async task is not cancelled, update the
                                // progress
                                if (!cancelled) {
                                    publishProgress(i);
                                    SystemClock.sleep(100);

                                }

                            } catch (Exception e) {
                                Log.e("Error", e.toString());
                            }
                            // publishProgress();
                        } catch (IOException e) {
                            e.printStackTrace();
                        }
                        // imageAdapter.images.add(imageItem);
                    }
                }
                imageCursor.close();

                if (videoCursor != null) {
                    image_column_index = videoCursor.getColumnIndex(MediaStore.Video.Media._ID);
                    int count = videoCursor.getCount() + i;
                    for (int j = 0; i < count; i++, j++) {
                        videoCursor.moveToPosition(j);
                        int id = videoCursor.getInt(image_column_index);
                        int column_index = videoCursor.getColumnIndexOrThrow(MediaStore.Video.Media.DATA);
                        ImageItem imageItem = imageAdapter.images.get(i);
                        imageItem.imagePath = videoCursor.getString(column_index);
                        imageItem.videoPath = imageItem.imagePath;
                        System.out.println("External : " + imageItem.videoPath);
                        try {
                            File imageFile = new File(Environment.getExternalStorageDirectory(), "imageV" + i);
                            imageFile.createNewFile();
                            ByteArrayOutputStream bos = new ByteArrayOutputStream();
                            MediaMetadataRetriever mediaVideo = new MediaMetadataRetriever();
                            mediaVideo.setDataSource(imageItem.videoPath);
                            Bitmap videoFiles = mediaVideo.getFrameAtTime();
                            videoFiles = ThumbnailUtils.extractThumbnail(videoFiles, 96, 96);
                            if (bos != null && videoFiles != null) {
                                videoFiles.compress(Bitmap.CompressFormat.JPEG, 100, bos);

                            }
                            byte[] bitmapData = bos.toByteArray();
                            FileOutputStream fos = new FileOutputStream(imageFile);
                            fos.write(bitmapData);
                            fos.close();
                            imageItem.imagePath = imageFile.getAbsolutePath();
                            imageItem.thumbNailPath = imageFile.getAbsolutePath();
                            try {
                                boolean cancelled = isCancelled();
                                // if async task is not cancelled, update the
                                // progress
                                if (!cancelled) {
                                    publishProgress(i);
                                    SystemClock.sleep(100);

                                }

                            } catch (Exception e) {
                                Log.e("Error", e.toString());
                            }
                        } catch (IOException e) {
                            e.printStackTrace();
                        }

                    }
                }
                videoCursor.close();
            }

            protected void onPostExecute(Void result) {
                imageAdapter.notifyDataSetChanged();
            };

        }.execute();

    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T11:12:33.813

[我从我在评论中提到](https://stackoverflow.com/questions/7636697/get-path-and-filename-from-camera-intent-result/9067155#9067155)的帖子中尝试了以下代码片段。它对我来说工作正常。

```
/**
 * Gets the last image id from the media store
 * 
 * @return
 */
private int getLastImageId() {
    final String[] imageColumns = { MediaStore.Images.Media._ID,
            MediaStore.Images.Media.DATA };
    final String imageOrderBy = MediaStore.Images.Media._ID + " DESC";
    Cursor imageCursor = managedQuery(
            MediaStore.Images.Media.EXTERNAL_CONTENT_URI, imageColumns,
            null, null, imageOrderBy);
    if (imageCursor.moveToFirst()) {
        int id = imageCursor.getInt(imageCursor
                .getColumnIndex(MediaStore.Images.Media._ID));
        String fullPath = imageCursor.getString(imageCursor
                .getColumnIndex(MediaStore.Images.Media.DATA));
        Log.d(getClass().getSimpleName(), "getLastImageId::id " + id);
        Log.d(getClass().getSimpleName(), "getLastImageId::path "
                + fullPath);
        imageCursor.close();
        return id;
    } else {
        return 0;
    }
} 
```

在 logcat 中输出：

```
09-24 16:36:24.500: getLastImageId::id 70
09-24 16:36:24.500: getLastImageId::path /mnt/sdcard/DCIM/Camera/2012-09-24 16.36.20.jpg 
```

此外，我在上面的代码片段中没有看到任何硬编码的名称。希望这可以帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-01T06:42:01.103

注意：如果您使用的是 android 6.0 或更高版本路径将给出空值。所以你必须添加权限 `<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />`

```
public void onClicked(View view){
        Bitmap bitmap=getBitmapFromView(scrollView,scrollView.getChildAt(0).getHeight(),scrollView.getChildAt(0).getWidth());
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        bitmap.compress(Bitmap.CompressFormat.JPEG,90,baos);
        String path = MediaStore.Images.Media.insertImage(getContentResolver(),bitmap,"title",null);
        Intent intent = new Intent(Intent.ACTION_SEND);
        intent.setType("image/jpeg");
        intent.putExtra(Intent.EXTRA_STREAM,Uri.parse(path));
        startActivity(Intent.createChooser(intent,"Share Screenshot Using"));
    } 
```

# android - 在一个类中扩展 ArrayAdapter 和 Activity？

> ID：12555422
> 
> 赞同：0
> 
> 时间：2012-09-23T19:15:56.497
> 
> 标签：android, class

我有一个小但非常不切实际的问题:)。我正在为我的 CustomArrayAdapter 扩展 ArrayAdapter 类，但我现在还想在这个类中启动一个新的 Activity。问题是，我想扩展它，但它不接受它。谷歌还表示这在 android 中是不可能的，我必须扩展我的应用程序。唯一的问题是，我该如何调用该方法呢？对象.startActivity ??

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T19:29:31.163

我认为您要实现的是[多重继承](http://www.javaworld.com/javaqa/2002-07/02-qa-0719-multinheritance.html)，而 Java 语言不支持这一点。

你可以试试这样的事情。

```
public class MyActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.your_activity_layout);
        .....
        MyCustomAdapter adapter = new MyCustomAdapter();
        .....
    }

    class MyCustomAdapter extends ArrayAdapter {
        // your adapter implementation.
    }
} 
```

希望这可以帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T20:16:11.960

我知道，我试过这样做：

```
CustomArrayAdapter myAdapter= new CustomArrayAdapter(this, questions);
gv.setAdapter(myAdapter);

gv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
            myDbHelper.close();
            Intent i = new Intent("com.bgdroid.quizapp.ANSWER");
            startActivityForResult(i,0);
            // TODO Auto-generated method stub

            }
}); 
```

这里的问题：关于视图的信息来自数据库条目。我无法调用 v.getId() 并在具有此 ID 的下一个 Activity 中获取数据库信息，因为有很多项目（60，所以 id 1 到 60）但按级别显示。（id 1-20 是 1 级，id 20-40 是 2 级，...）

通过输入这个，我意识到我现在可以获取 id，将其传递给下一个活动并执行如下操作： v.getItem() + (itemsPerLevel * (currentLevel - 1)) 。

你们认为这是最好的解决方案吗？很抱歉解释得很困难:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T19:56:54.863

您不应该从 ArrayAdapter 启动 Activity。你想什么时候开始？您可以通过在您正在使用的 GroupView 上设置 ItemClickListener 来处理对列表项的单击。

```
ListView view = (ListView)findViewById(R.id.listview);
view.setAdapter(new CustomArrayAdapter(getApplicationContext(), array));
view.setOnItemClickListener(new OnItemClickListener(){
@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    startActivity(intent);

}
}; 
```

# performance - NHibernate 性能和一对多关系

> ID：12555425
> 
> 赞同：0
> 
> 时间：2012-09-23T19:16:10.180
> 
> 标签：performance, nhibernate, fluent-nhibernate

假设我有以下案例。有两个表`Counterparties`和`Events`。一个交易对手可以有 0 个、1 个或多个相关事件。

我想获取最新事件的交易对手列表以显示 id DataGrid，所以我创建了：

两个实体：

```
public class Counterparty
{
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }

    public virtual IList<Event> Events { get; set; }

    public Counterparty()
    {
        Events = new List<Event>();
    }
} 

public class Event
{
    public virtual int Id { get; set; }
    public virtual DateTime EventDate { get; set; }
    public virtual string Description { get; set; }
    public virtual Counterparty Counterparty { get; set; }
} 
```

两个映射：

```
public class CounterpartyMap : ClassMap<Counteparty>
{
    public CounterpartyMap()
    {
        Id(x => x.Id);
        Map(x => x.Name);
        HasMany<Event>(x => x.Events);
    }
}

public class EventMap : ClassMap<Event>
{
    public Event()
    {
        Id(x => x.Id);
        Map(x => x.EventDate);
        Map(x => x.Description);
        Reference(x => x.Counterparty);
    }
} 
```

`Counterparty`包含最新的帮助类`Event`

```
public class LastestCounterpartyEvent
{
    public Counterparty Counterparty { get; set; }
    public ScoringResult ScoringResult  { get; set; }
} 
```

最后是负责创建具有最新事件的所有对手列表的方法：

```
 public IList<LastestCounterpartyEvent> All()
    {
        // Added line of code responsible for data loading
        var allCounterparties = DataContext.Session.QueryOver<Counterparty>().List();
        return allCounterparties.Select(Prepare).ToList();
    }

    private LastestCounterpartyEvent Prepare(Counterparty counterparty)
    {
        var lastestCounterpartyEvent = new LastestCounterpartyEvent {Counterparty = counterparty};
        if (counterparty.Events.Count > 0)
            lastestCounterpartyEvent.Event = 
                counterparty.Events.OrderByDescending(x => x.EventDate).First();

        return lastestCounterpartyEvent;
    } 
```

预兆是不可接受的，因为 30 个交易对手和 10 个事件的数据处理需要 5 秒。

我想 NHiberante 在检查最新事件时会为每个交易对手执行单独的数据库查询。

问题是：我能做些什么来提高性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:48:14.830

您很可能需要添加`.Fetch.Subselect()`到`HasMany()`映射中。更多信息请点击[此处](http://nhforge.org/doc/nh/en/index.html#performance-fetching)。但这只是一个猜测，请显示加载数据以获得更好答案的代码。

您还应该将您的集合标记为反向（`.Inverse()`on `HasMany()`），否则您将在插入新事件时遇到问题。

# iphone - 在两个视图之间切换时出现一些泄漏

> ID：12555433
> 
> 赞同：1
> 
> 时间：2012-09-23T19:16:59.600
> 
> 标签：iphone, ios, memory-leaks, pushviewcontroller, navigationcontroller

我使用导航控制器在 rootView 上推送和弹出 addColorView。根据 Leaks 工具，当视图被推送时（三个可变数组和两个可变字典）带有一个负责任的框架 [UITableView _setupTableViewCommon] 当这个视图被弹出时，另外两个对象被泄露（UIGobblerGestureRecognizer 对象和一个可变数组）

```
- (void) addButtonPressed {

    NSLog(@"addButtonPressed");
    AddColorViewController *addColorViewController = [[[AddColorViewController alloc] init] autorelease];
    [self.navigationController pushViewController:addColorViewController animated:YES]; // <-- The Leaks tool points right here
} 
```

问题是我应该在哪里寻找实际的泄漏？UIGobblerGestureRecognizer 到底是什么？

编辑 1：AddColorViewController.m 中的 viewDidLoad 方法：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.listOfLabels = [[[NSArray alloc] initWithObjects:@"Name", @"Red", @"Green", @"Blue", nil] autorelease];
    self.navigationItem.title = @"New";

    [self.tableView initWithFrame:self.view.frame style:UITableViewStyleGrouped];
    UIBarButtonItem *homeButton = [[UIBarButtonItem alloc] initWithTitle:@"Home" style:UIBarButtonItemStylePlain target: self action:@selector(homeButtonPressed)];
    UIBarButtonItem *saveButton = [[UIBarButtonItem alloc] initWithTitle:@"Save" style:UIBarButtonItemStylePlain target:self action:@selector(saveButtonPressed)];

    self.navigationItem.leftBarButtonItem = homeButton;
    self.navigationItem.rightBarButtonItem = saveButton;

    [homeButton release];
    [saveButton release];
} 
```

...

```
- (UITableViewCell *) tableView: (UITableView *) tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
        cell.accessoryType = UITableViewCellAccessoryNone;

        UITextField *textField = [[UITextField alloc] init];

        if ([indexPath row] == 0) {
            textField.frame = CGRectMake(220, 10, 170, 30);
            textField.placeholder = @"color";
            textField.keyboardType = UIKeyboardTypeDefault;
        }
        else {
            textField.frame = CGRectMake(220, 10, 80, 30);
            textField.placeholder = @"0..255";
            textField.keyboardType = UIKeyboardTypeNumberPad;
        }

        textField.delegate = self;
        textField.tag = [indexPath row] + 1; 
        textField.adjustsFontSizeToFitWidth = YES;
        textField.textColor = [UIColor blackColor];
        textField.textAlignment = UITextAlignmentLeft;

        [cell addSubview:textField];
        [textField release];
    }

    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    cell.textLabel.text = [self.listOfLabels objectAtIndex:indexPath.row];
    return cell;
} 
```

# mysql - 如何进行这个特定的 MySQL 查询？

> ID：12555439
> 
> 赞同：2
> 
> 时间：2012-09-23T19:17:28.117
> 
> 标签：mysql, sql

我有两张桌子，`users`和`messages`。

`users`具有字段`userId`(int) 和`username`(string) 并 `messages`具有字段`userId`(int) 和`message`.

我有用户名，并想获取与该用户名相关的所有消息`userId`。

连接函数在这种情况下是否有效（如果可以，如何？），还是我必须进行两个单独的查询？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T19:20:00.740

```
SELECT       m.*
FROM         messages m
  INNER JOIN users u
  ON         m.userId = u.userId
WHERE        u.username = 'UsernameHere'; 
```

使用 an从表`INNER JOIN`中引用表（按列匹配 [引用] 它们）`user``messages``userId`

可以在此处找到查询示例：[http ://www.sqlfiddle.com/#!8/bc3ce/3/0](http://www.sqlfiddle.com/#!8/bc3ce/3/0)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T19:21:28.673

```
SELECT U.userId, M.message
FROM users AS U INNER JOIN messages AS M ON U.userId = M.userId
WHERE U.username = 'UserName' 
```

只需将您想要的用户名插入 WHERE 子句。

# c++ - 否则使用 unique_ptr 作为所有权和原始指针？

> ID：12555441
> 
> 赞同：8
> 
> 时间：2012-09-23T19:17:29.333
> 
> 标签：c++, c++11, unique-ptr, ownership

我正在使用 C++11 编写一些代码。我有

```
class X { /* */ };

class A {
    std::vector<X*> va_x;
};

class B {
    std::vector<X*> vb_x;
    std::vector<A> vb_a;
}; 
```

我的类 A 中的“va_x”的 X*s 指向的对象也被我的类 B 中的“vb_x”的 X*s 所指向。

现在我想使用智能指针。对我来说，显然 B 类拥有 X* 指向的对象的所有权（特别是因为我的 A 实例属于 B）

所以我应该在 B 中为 X 使用 unique_ptr：

```
class B {
    std::vector<unique_ptr<X>> vb_x;
    std::vector<A> vb_a;
}; 
```

我的问题是，我应该为A班做些什么？我应该保留原始指针吗？通过这样做，在我的单元测试中，我必须承认它会导致尴尬的事情（imo），例如（不要担心封装，这不是重点）：

```
unique_ptr<X> x(new X());
A a;
a.va_x.push_back(&(*x)); //awkward, but what else can I do?

A.vb_a.push_back(a); //ok
B.vb_x.push_back(move(x)); //ok 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-23T19:35:05.593

您可以使用`x.get()`，它将返回内部指针。

除此之外，是的，使用原始指针来处理非拥有引用是要走的路，另请参阅[这个问题](https://stackoverflow.com/q/8706192/500104)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-06-08T01:05:07.340

正如 Xeo 在他的回答中所说，解决方案通常是使用`x.get()`.

有一个在需要访问时`FILE`使用的示例：`x.get()`

```
void file_deleter(FILE *f)
{
    fclose(f);
}

[...]

{
    std::unique_ptr<FILE, decltype(&file_deleter)>
                       f(fopen("/tmp/test.tmp", "rw"), &file_deleter);

    // read/write use f.get() as in:
    fread(buf, 1, sizeof(buf), f.get());
    fwrite(buf, 1, sizeof(buf), f.get());

    // fclose() gets called in the deleter, no need to do anything
} 
```

但是，在您的情况下，您需要使用`x.release()`.

```
A a;
{
    unique_ptr<X> x(new X());
    a.va_x.push_back(&(*x)); // this is wrong
}
// here a[0] is a dangling pointer 
```

将`&(*x)`获取原始指针并在`a`向量中进行复制。但是，在`unique_ptr<>`超出范围时，该指针将被删除。所以在 之后`}`，向量中的指针`a`不再好（尽管它可能会工作一段时间。）

传输裸指针的正确方法是使用如下`release()`函数：

```
 a.va_x.push_back(x.release()); // this works 
```

在那一行之后，指针仅在`a`向量中。它是从唯一指针中释放出来的，其想法是调用者现在负责管理该资源。

**重要提示：**可能`push_back()`会抛出 ( `bad_alloc`)，如果发生这种情况，资源将丢失。为避免该问题（如果您的软件捕获`bad_alloc`并继续运行），您需要首先在向量中保留空间，如下所示：

```
 a.va_x.reserve(a.va_x.size() + 1);  // malloc() happens here
    a.va_x.push_back(x.release());      // no `bad_alloc` possible here 
```

这样，`bad_alloc`当资源仍然附加到时，就会在该语句上发生，并且`unique_ptr`在发生异常时不会泄漏它。

综上所述，您可能需要一个`shared_ptr`代替。这些可以毫无困难地复制。A`unique_ptr`更多的是用于分配一次资源，然后忘记一个函数返回或删除一个对象。当涉及（许多）副本时， a`shared_ptr`更有意义。

```
class X
{
    typedef std::shared_ptr<X> pointer_t;
    [...]
}

class A
{
    std::vector<X::pointer_t> va_x;
}

X::pointer_t x(new X());
A a;
a.va_x.push_back(x); // much cleaner and the pointer is still managed 
```

# python - 对列表中的所有元素进行平方

> ID：12555443
> 
> 赞同：19
> 
> 时间：2012-09-23T19:17:31.320
> 
> 标签：python, arrays, return

我被告知

编写一个函数 square(a)，它接受一个数字数组 a，并返回一个包含每个平方值的数组。

起初，我有

```
def square(a):
    for i in a: print i**2 
```

但这不起作用，因为我正在打印，并且没有像我被问到的那样返回。所以我尝试了

```
 def square(a):
        for i in a: return i**2 
```

但这只会平方我数组的最后一个数字。我怎样才能让它平方整个列表？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-23T19:22:35.900

您可以使用列表理解：

```
def square(list):
    return [i ** 2 for i in list] 
```

或者你可以`map`：

```
def square(list):
    return map(lambda x: x ** 2, list) 
```

或者你可以使用发电机。它不会返回列表，但您仍然可以遍历它，并且由于您不必分配整个新列表，因此它可能比其他选项更节省空间：

```
def square(list):
    for i in list:
        yield i ** 2 
```

或者你可以做无聊的老`for`循环，虽然这不像一些 Python 程序员喜欢的那样惯用：

```
def square(list):
    ret = []
    for i in list:
        ret.append(i ** 2)
    return ret 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-09-23T19:19:42.620

**使用列表推导（这是纯 Python 的方式）：**

```
>>> l = [1, 2, 3, 4]
>>> [i**2 for i in l]
[1, 4, 9, 16] 
```

或者[numpy](http://numpy.scipy.org/)（一个成熟的模块）：

```
>>> numpy.array([1, 2, 3, 4])**2
array([ 1,  4,  9, 16]) 
```

在`numpy`中，默认情况下，数组上的数学运算是按元素执行的。这就是为什么你可以`**2`在那里放置一个完整的数组。

其他可能的解决方案将`map`基于 -，但在这种情况下，我真的会选择列表理解。它是 Pythonic :) 并且`map`需要`lambda`s的基于解决方案的解决方案[比 LC 慢](https://stackoverflow.com/questions/1247486/python-list-comprehension-vs-map)。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-11-09T20:43:02.903

```
import numpy as np
a = [2 ,3, 4]
np.square(a) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-23T19:24:15.107

使用 numpy。

```
import numpy as np
b = list(np.array(a)**2) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-23T19:20:31.217

```
def square(a):
    squares = []
    for i in a:
        squares.append(i**2)
    return squares 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-20T19:31:17.580

另一种地图解决方案：

```
def square(a):
    return map(pow, a, [2]*len(a)) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-08T16:06:55.780

你可以做

```
square_list =[i**2 for i in start_list] 
```

返回

```
[25, 9, 1, 4, 16] 
```

或者，如果列表已经有值

```
square_list.extend([i**2 for i in start_list]) 
```

这会产生一个如下所示的列表：

```
[25, 9, 1, 4, 16] 
```

*注意*：你不想做

```
square_list.append([i**2 for i in start_list]) 
```

因为它实际上是在原始列表中添加了一个列表，例如：

```
[_original_, _list_, _data_, [25, 9, 1, 4, 16]] 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-12-15T05:51:38.453

```
def square(a):
    squares = []
    for i in a:
        squares.append(i**2)
    return squares 
```

那么我将如何使用上述函数计算 1-20 的数字平方

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2021-05-19T08:02:49.170

```
n = int(input())

final_list = [n**2 for n in range(1, n+1)]

print(final_list) 
```

# c# - 使用 C# 连接到 ASPX 网站的 MYSQL 数据库

> ID：12555449
> 
> 赞同：0
> 
> 时间：2012-09-23T19:17:37.763
> 
> 标签：c#, asp.net, mysql, database, connection

谁能写一个简单的例子来说明如何从我的 ASPX 网站连接到我的数据库？我刚开始使用 ASP，所以请保持简单。

MysqlDB 名称：ASP
类：Database.cs

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T19:32:07.123

也许这会有所帮助

首先，您需要包含一些参考资料，您可以在此链接下载它们：http: [//dev.mysql.com/downloads/connector/net/](http://dev.mysql.com/downloads/connector/net/)

这是代码：

```
using MySql.Data.MysqlClient;

namespace OwnNameSpace
{
  public class Database
  {
    MySqlConnection connect;
    string connection = "Data Source=localhost;Database=ASP;User ID=(your ID)";
//constructor
public Database()
{
}

  // this if want to select something in your db
  public MySqlDataReader Select(string query)
  {

      connect = new MySqlConnection(connection);
      connect.Close();
      MySqlCommand command = connect.CreateCommand();
      command.CommandText = query;
      connect.Open();
      MySqlDataReader reader;
      return reader = command.ExecuteReader();
  }

  // this if want to insert/delete or update 
  public Boolean Modify(string query)
  {

      connect = new MySqlConnection(connection);
      MySqlCommand command = connect.CreateCommand();
      command.CommandText = query;
      connect.Open();
      try
      {
         command.ExecuteNonQuery();
         return true;
      }
      catch
      {
        return false;
      }

   }

 }
} 
```

# android - Android透明SurfaceView清除为黑色

> ID：12555451
> 
> 赞同：2
> 
> 时间：2012-09-23T19:18:04.050
> 
> 标签：android, canvas, transparency

我想在 ImageView 上放置一个透明的 SurfaceView。我在 SurfaceView 子类构造函数中有以下内容

```
setZOrderOnTop(true);    // necessary
SurfaceHolder h = getHolder();
h.setFormat(PixelFormat.TRANSPARENT); 
```

我在 onDraw() 函数的开头也有这个

```
canvas.drawColor( 0, PorterDuff.Mode.CLEAR ); 
```

然而，我得到的只是一个黑色背景，它阻挡了图像。

有任何想法吗？

PS，我也试过这个而不是drawColor（），但无济于事

```
Paint paint = new Paint();
paint.setXfermode(new PorterDuffXfermode(Mode.CLEAR));
canvas.drawPaint(paint);
paint.setXfermode(new PorterDuffXfermode(Mode.SRC)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-25T20:59:20.313

我知道，这篇文章已经有一年了，但是你将颜色设置为 0，它代表黑色。利用

```
canvas.drawColor( Color.TRANSPARENT, PorterDuff.Mode.CLEAR ); 
```

使其透明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T19:51:03.790

SurfaceViews 不能以这种方式透明。如果您使用的是 API 11 或更高版本，请尝试使用 SurfaceTexture，或者在其他情况下绘制到常规视图中。

SurfaceView 是一种特殊情况，它以一种针对性能进行优化的特殊方式来协调表面合成。如果为它进行了配置，您可以在视图层次结构中的 SurfaceView 顶部绘制内容，但不能将 SurfaceView 的内容与其后面的内容混合。

# php - PHP setcookie() 奇怪的行为

> ID：12555452
> 
> 赞同：1
> 
> 时间：2012-09-23T19:18:21.460
> 
> 标签：php, mysql, cookies

quys，我的 PHP 应用程序有问题。

我有 2 页用于登录和注册。两个页面都使用公共`cookies`类。一切正常，除了一件事：`setcookie()`只在`/signin`页面上工作（cookie 值进入数据库，出现 cookie 'rwt'）。

在注册页面上，cookie 值进入数据库，但`setcookie()`不起作用。

请帮忙。

PS这是唯一的问题，一切都可以在本地主机上运行，​​但不能在生产域上运行

PPS`$DBH`是 PDO 变量，它包含正确的数据库信息。

**登录页面**

```
$cookie = new Cookies($DBH);
 ........

if ($signin->remember=="yes") {
    $cookie->account_set($signin->user);
} 
```

**注册页面**

```
 $cookie = new Cookies($DBH);
   .........
   ........

if ($signup->check_availability()) {

    $signup->save();

    $cookie->account_set($signup->user);

    header("Location:/");

} else {
    $msgText = "This username already exists";
    echo "<div class=\"orangeMsg\">$msgText</div>";
} 
```

班级`cookies`

```
 class Cookies
        {
            private $_DBH, $cookie_domain;  
            function __construct(PDO $DBH)
            {
                $this->_DBH=$DBH;
                $this->cookie_domain=$_SERVER['HTTP_HOST'];

            }
            public function account_set($value)
            {
                $cookie_value=uniquestr();
                // function from common.func.php
                $this->_DBH->query("UPDATE accounts SET cookie='$cookie_value' WHERE user='$value'");
                setcookie('rwt', $cookie_value, time()+60*60*24*7 , '/', $this->cookie_domain);
            }
            public function account_unset($value)
            {
                if (isset($_COOKIE['rwt'])) {
                    $cookie_value=$_COOKIE['rwt'];
                    setcookie("rwt", $cookie_value, time()-2592000, '/', $this->cookie_domain);
                    $this->_DBH->query("UPDATE accounts SET cookie=DEFAULT WHERE user='$value'");
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T19:24:52.933

我的经验是，设置 cookie 和发送 HTTP 回复的组合`200 OK`很容易很麻烦。您的方法可能很容易适用于某些浏览器，但不适用于其他浏览器。`setcookie()` **您可以通过使用before** 来提高此工作的机会`header('Location ...')`，（因为某些浏览器在遇到标头时似乎停止解释标`Location`头）但这仍然不能保证。

一种解决方法是使用一次性 GET 参数重定向到您的目标位置并在那里设置 cookie。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T19:21:19.937

您应该*始终*在通话`exit`后直接`header('Location: ...')`拨打电话。否则，您的脚本将继续运行直到结束，结果可能会出现一些意外行为。

我的猜测是，您稍后会在注册脚本中以某种方式取消设置 cookie。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T14:19:15.243

***解决方案***

这是我的代码中的一个错误，它在本地服务器上工作真的很奇怪。

***错误解释***

我有`if () {..}`与`if () {..} else {..}`注册过程相关的逻辑块。这很愚蠢，但我希望它们彼此相关。

> 将逻辑更改为`if () {..} elseif () {..} else {..}`已解决问题

我为这种蹩脚的错误道歉。

# c++ - 为什么我的 rand() 数字显示为 0？

> ID：12555453
> 
> 赞同：0
> 
> 时间：2012-09-23T19:18:25.023
> 
> 标签：c++, visual-studio-2010

这是我正在制作的一个类的函数成员，它不会导致任何语法错误，只会导致语义错误。它应该生成的随机数为 0。

```
int Warrior::attack()
{

int hit = 0;

 switch (weapon)
{

case 6:
     hit = rand() % (5 - 1 + 1) + 1; 
     break;

case 7:
     hit = rand() % (10 - 4 + 1) + 4;
     break;

case 8:
     hit = rand() % (15 - 9 + 1) + 9;
     break;

case 9:
     hit = rand() % (20 - 14 + 1) + 14;
     break;

case 10:
      hit = rand() % (25 - 19 + 1) + 19;
      break;
 }

std::cout<< "You hit " << hit <<"!\n";

 return hit;
} 
```

请帮忙！谢谢你~武士刀

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T19:21:45.413

这可能是缺少`default`switch 语句，即`weapon`没有触发任何`switch`子句。

尝试：

```
 switch (weapon)
{

case 6:
     hit = rand() % (5 - 1 + 1) + 1; 
     break;

case 7:
     hit = rand() % (10 - 4 + 1) + 4;
     break;

case 8:
     hit = rand() % (15 - 9 + 1) + 9;
     break;

case 9:
     hit = rand() % (20 - 14 + 1) + 14;
     break;

case 10:
      hit = rand() % (25 - 19 + 1) + 19;
      break;
default:
      throw std::exception("switch statement failed");
 } 
```

# c - Eclipse CDT 自定义 Makefile

> ID：12555455
> 
> 赞同：3
> 
> 时间：2012-09-23T19:18:52.190
> 
> 标签：c, eclipse, makefile

我有一个 C 项目，我正在尝试使用我自己的 makefile。在 C/C++ 构建设置中，我未选中“使用默认构建命令”，我也更改`make`为`make -f ${ProjDriPath}/GNUmakefile`

制作文件是`GNUmakefile`. 我收到以下消息：

> make: ***没有规则来制作目标`/GNUmakefile'。停止。

该命令最初是“make”并且复选框被选中，但是当我在 Eclipse 中构建时，我收到一条关于多个主要功能的错误消息。我在项目中有几个源文件，每个文件都是单独编译的。所以这就是我尝试更改 Eclipse 设置的原因。“make”命令从终端运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T19:58:35.300

> 我将“make”更改为“make -f ${ProjDriPath}/GNUmakefile”
> 
> 我收到以下消息“make: * No rule to make target `/GNUmakefile'. Stop.”

我强烈怀疑你

*   没有设置环境变量`ProjDirPath`，或者
*   已复制粘贴`make`上面的命令，并且仅在该命令中有错字`ProjDriPath`，但在环境变量中没有。

在未设置环境变量的情况下，它扩展为一个空字符串，并进行搜索`/GNUmakefile`，当然根目录中不存在。然后`make`没有规则来创建它，并报告该消息。

# c++ - C++ - 使用开关的用户输入和输出？

> ID：12555458
> 
> 赞同：-4
> 
> 时间：2012-09-23T19:19:05.943
> 
> 标签：c++, input, switch-statement

因此，我正在尝试创建一个程序，该程序本质上会根据用户的选择要求用户提供各种输入和输出。我正在使用 switch 方法以及 cin 来执行此操作。出于某种原因，它不允许我编译。谁能提供有关我在这里做错了什么的见解？谢谢！

```
 #include <iostream>
          using namespace std;
     int main()
     {
     cout << "Welcome to my countertop store.\n" << "Before running this program you will need        the depth and 
     length of the block, which edges are to be finished and 
     the style, as well as the grade to be used 
     and the finish.\n";

     cout << "Please enter the depth of the counter: ";
     cin << counterDEPTH;
     cout << "Please enter the length of the counter: ";
     cin << counterLENGTH;
     cout << "Number of long edges to be finished: ";
     cin << longEDGES;
     cout << "Number of short edges to be finished: ";
     cin << shortEDGES;
     cout << "Please choose a grade: \n";
     switch (grade)
       {
    case Marble:
        double cost = 92.99;
    case Granite:
        double cost = 78.99;
    case Quartz:
        double cost = 56.99;
    case Quartite:
        double cost = 39.99;
}
     cout << "Selected grade: " & grade;
     cout << "Would you like it polished (y/n)? ";
     switch (polished)
       {
              case Yes:
    double newcost = cost;
    double newcost = (.15 * newcost);
              case No:
    double newcost = 0.00;
    }
     cout << "Cost Information\n";
     cout << "Stone Cost: " & cost;
     cout << "Polishing Cost: " & newcost;
     cout << "Edge Cost: " & (longEdges * shortEdges * 4.99);
     cout << "Total: " & cost+newcost+(longEdges * shortEdges * 4.99); 
     return 0;
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T19:27:29.977

首先，您需要声明几乎所有的变量。C 和 C++ 都要求在使用变量之前声明它们，因此到目前为止几乎所有的语句都是非法的。

仅仅看一眼你的节目，似乎还有许多其他问题也可能破坏它。在这一点上，如果您尝试自己使用编译器的输出进行调试，它将更加有用，因为我确信到目前为止我发现的所有错误都会被任何编译器发现。

如果您仍然遇到问题，则需要提出更具体的问题，最好是与编译器的输出\错误消息一起提出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T19:26:35.780

这是你所有的代码吗？您需要声明要存储用户输入的变量。此外，Yes/No/Marble/Granite/Quartz/Quartite 也没有在任何地方定义。

```
#include <iostream>
using namespace std;
int main()
{
cout << "Welcome to my countertop store.\n" << "Before running this program you will need        the depth and 
length of the block, which edges are to be finished and 
the style, as well as the grade to be used 
and the finish.\n";

double counterDEPTH, counterLENGTH, longEDGES, shortEDGES;

cout << "Please enter the depth of the counter: ";
cin >> counterDEPTH; 
```

您的 switch 语句也需要中断。

```
case Marble:
    double cost = 92.99;
    break;
case Granite:
    double cost = 78.99;
    break; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T19:28:44.070

1.  `cin`将语句更改为 have `>>`，例如

    cin >> 计数器深度；

2.  在每个语句块的`break;`末尾添加。`case``switch`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T19:24:03.200

```
cin << counterDEPTH; 
```

将其更改为

```
cin >> counterDEPTH; 
```

并类似地改变其他人

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-23T19:24:42.817

你已经写了`cin`和。必须使用.`cout``<<``cin``>>`

# java - JLabel 不显示 .gif 动画

> ID：12555459
> 
> 赞同：2
> 
> 时间：2012-09-23T19:19:07.280
> 
> 标签：java, swing, jlabel, gif, bufferedimage

我正在尝试将“.gif”图像放在标签上。图像加载，但它是静态的（无动画）。任何猜测为什么？以及如何解决？

我正在使用的代码：

```
BufferedImage img1=ImageIO.read(TCPServer.class.getResource("filecopy.gif"));
JLabel filetransferpic = new JLabel(new ImageIcon(img1)); 
```

注意：我不想使用..

```
JLabel filetransferpic = new JLabel(new ImageIcon("G:\\filecopy.gif")); 
```

..方法。因为在这种方法中，我必须提供驱动器路径并将图像放在驱动器中。我想要项目文件夹“src”中的图像。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-23T19:38:54.320

在您的示例中，您使用的是`BufferedImage`. 相反，请使用`ImageIcon`，如下所示：

```
ImageIcon gifImage = new ImageIcon(new URL("file:/Path/To/file.gif"));
JLabel yourLabel = new JLabel(gifImage); 
```

这应该是动画的。但请记住，构造函数 URL(String) 会抛出一个`MalformedURLException`; 确保抓住它。

# maven - 如何将 Maven 原型添加到 Github？

> ID：12555460
> 
> 赞同：3
> 
> 时间：2012-09-23T19:19:15.493
> 
> 标签：maven, github, maven-3

我已经使用 Maven 开发了我的自定义项目，我想将它分享给社区。是否可以将其放在 GitHub 上以便可以从那里下载（并在 create-archetype 命令中使用）。谢谢马克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T06:11:29.730

这篇文章可能会提供一点帮助：[http ://cemerick.com/2010/08/24/hosting-maven-repos-on-github/](http://cemerick.com/2010/08/24/hosting-maven-repos-on-github/)

对的，这是可能的。所有工件和原型目录都可以放在那里。人们必须将它作为存储库添加到他们的项目中，但它会起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T19:19:17.050

您可以使用以下答案中的步骤自动上传项目的 Maven 工件作为部署过程的一部分：[https ://stackoverflow.com/a/14013645/82156](https://stackoverflow.com/a/14013645/82156)

# php - 换行 php 和 html 不起作用

> ID：12555468
> 
> 赞同：0
> 
> 时间：2012-09-23T19:19:56.723
> 
> 标签：php, html, css, newline

我已经尝试了所有方法，似乎每次使用`"\n" or <br> or <br />`. 我试过`<pre></pre>`了，但它破坏了设计。

我应该在哪里放置东西？

它看起来像左边，但我需要它像右边一样，相互组织

![在此处输入图像描述](../Images/b76f0ec132af4cbdcb777fb1ee3489b2.png)

```
<li><a href="portfolio.php">portfolio</a>
        <ul>
        <?php   
        $query_nav = mysql_query("SELECT * FROM `nav` ");
        while ($query_row_nav = mysql_fetch_assoc($query_nav))
        {
        ?>
        <li>
        <?php
        $meer = $query_row_nav['title'];
        //$desc_inject = '';
        //$sub_string = substr($desc_inject, 0, 200);                             
        echo /*$sub_string." " . '' . */'<a href="applink.php?id='.$query_row_nav["id"].'">' . $meer .'</a>';
        ?>
        </li>
        <?php
        }
        ?>
        </ul>
    </li> 
```

CSS

```
 /* Main Nav */ 

#navigation{
    background: #231f20; 
    font-size: 1.143em; 
    height: 50px; 
    line-height: 30px; 
    margin-top: 57px;
    margin-right: 2px;
    text-align: center; 
    width: 1010px;  
    border-radius: 5px; 
    -moz-border-radius: 5px; 
    -webkit-border-radius: 5px;
}

#navigation ul, #navigation li { 
    list-style:none; 
    padding:0; 
    margin:0; 
    display:inline; 
    }

#navigation ul li{ 
    float:left;
    position:relative; 
    }

#navigation ul li a{
    display: inline-block;
    padding:10px 30px; 
    margin:1px; 
    font-size:18px; 
    white-space:nowrap; 
    border-radius:3px; 
    text-decoration: none; 
    height: 30px; 
    text-decoration: none; 
}
#navigation ul ul{ 
    position:absolute; 
    top:-99999px; 
    left:0;
    opacity: 0;
    -webkit-transition: opacity .5s ease-in-out;
    -moz-transition: opacity .5s ease-in-out;
    -o-transition: opacity .5s ease-in-out;
    z-index:497; 
    background:#333; 
    padding: 2px; 
    border:1px solid #231f20; 
    border-top:none; 
    box-shadow:#111 0 3px 4px; 
    border-bottom-left-radius:6px; 
    border-bottom-right-radius:6px; 
}
#navigation ul ul ul { 
    position:absolute; 
    top:-99999px; 
    left:100%; 
    opacity: 0; 
    -webkit-transition: opacity .5s ease-in-out;
    -moz-transition: opacity .5s ease-in-out;
    -o-transition: opacity .5s ease-in-out;
    border-radius:6px;
    border:1px solid #231f20;
}
#navigation ul li:hover>ul{ 
    opacity: 1; 
    position:absolute; 
    top:99%; left:0; 
    }
#navigation ul ul li:hover>ul{ 
    position:absolute; 
    top:0; 
    left:100%; 
    opacity: 1; 
    z-index:497; 
    background:#231f20; 
    }

#navigation li:first-child a { 
    border-top-left-radius: 3px; 
    -moz-border-radius-topleft: 3px; 
    -webkit-border-top-left-radius: 3px;  
    border-bottom-left-radius: 3px; 
    -moz-border-radius-bottomleft: 3px; 
    -webkit-border-bottom-left-radius: 3px; 
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T19:29:48.787

你可以改变一些选择器：

```
#navigation ul, #navigation li 
```

到

```
#navigation ul, #navigation > ul > li 
```

和

```
#navigation ul li 
```

到

```
#navigation > ul > li 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T19:26:17.450

删除浮动：左；

```
#navigation ul li{ 
    position:relative; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T19:26:47.480

你的问题是

```
#navigation ul li{ 
    float:left;
    position:relative; 
} 
```

消除`float:left;`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-23T19:32:27.467

尝试删除`display:inline`并`display:block;`改用。参见示例[http://www.w3schools.com/cssref/playit.asp?filename=playcss_display&preval=inline](http://www.w3schools.com/cssref/playit.asp?filename=playcss_display&preval=inline)

```
#navigation ul, #navigation li { 

list-style:none; 
padding:0; 
margin:0; 
display:block;
} 
```

并将其删除`display: inline-block;`并更改为 display: block;

```
#navigation ul li a{
    display: block;
    padding:10px 30px; 
    margin:1px; 
    font-size:18px; 
    white-space:nowrap; 
    border-radius:3px; 
    text-decoration: none; 
    height: 30px; 
    text-decoration: none; 
} 
```

# java - 如何在能够暂停/恢复的同时以固定间隔从线程获取字符串值？

> ID：12555472
> 
> 赞同：3
> 
> 时间：2012-09-23T19:20:12.060
> 
> 标签：java, multithreading, swing, resume, callable

我制作了一个小型摇摆应用程序供我个人使用。此应用程序连接到互联网，检索文本文件，在 jTextArea 中显示其内容并将文本文件保存在本地（在我的硬盘中）。到现在为止还挺好。

现在我想以固定的定期间隔（比如每 30 秒后）接收这个文本文件。我可以通过 for/while 循环（和 thread.sleep 方法）来做到这一点，但我知道这不是正确的方法，因为它不允许我暂停/恢复接收。我尝试使用“线程”和“可调用”解决我的问题，但无法成功。（我对这些了解不多）

您能指导我如何从线程中收集字符串值吗？我在使用 Callable/Future 做正确的事吗？（请参阅我的代码）。我应该能够暂停/恢复文本收集。

（在暂停和恢复我的软件期间，我将进行一些手动文本编辑并将其保存到磁盘。但我可以处理。）

下面是我尝试过的代码。

```
public class AmybactUI extends javax.swing.JFrame {

    public AmybactUI() {
        initComponents();
    }
    private void initComponents()  { .... }

    public static void main(String args[]) throws Exception {

    //    (Look and feel setting code here)

        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new AmybactUI().setVisible(true);
            }
        });

        ScheduledExecutorService executor = Executors.newSingleThreadScheduledExecutor();
        List<Future<String>> results = executor.invokeAll(Arrays.asList(new GetScore()), 30, TimeUnit.SECONDS);
        for (Future<String> result : results) {
            if (!result.isCancelled()) {
                   jTextAreaOnlineScore.append(result.get()+"\n");
                   jTextAreaOnlineScore.setCaretPosition(jTextAreaOnlineScore.getDocument().getLength());
                } else {
                    System.out.println("Task timed out.");
                }
                executor.shutdown();
            }            
    }

    // Variables declaration - do not modify                     
    private javax.swing.ButtonGroup buttonGroup1;
    private javax.swing.JButton jButtonSaveSMS;
    private javax.swing.JLabel jLabelTitle;
    private javax.swing.JMenuBar jMenuBar;
    private javax.swing.JMenu jMenuFile;
    private javax.swing.JMenu jMenuHelp;
    private javax.swing.JMenuItem jMenuItemAbout;
    private javax.swing.JMenuItem jMenuItemExit;
    private javax.swing.JMenuItem jMenuItemOptions;
    private javax.swing.JMenu jMenuTools;
    private javax.swing.JPanel jPanel;
    private static javax.swing.JRadioButton jRadioButtonOffline;
    public static javax.swing.JRadioButton jRadioButtonOnline;
    private javax.swing.JScrollPane jScrollPane;
    public static javax.swing.JTextArea jTextAreaOnlineScore;
    private javax.swing.JTextField jTextFieldCustomSMS;
    // End of variables declaration                   
}

class GetScore implements Callable<String> {
    public String call() throws Exception {        
        Calendar cal = Calendar.getInstance();
        SimpleDateFormat sdf = new SimpleDateFormat("HH:mm:ss");
        String nextLine;
        String myString = "";
        String myTryString;
        URL url;
        URLConnection urlConn;
        InputStreamReader inStream;
        BufferedReader buff;
        FileWriter fustream;
        BufferedWriter bfout;  
        try {
//         (some code here which connects to internet and gets my text)
            } else {
              break;
            }
         }
            bfout.write(myString);
            bfout.close();           
        } catch(MalformedURLException e) {
            System.out.println("Please check the URL:" + e.toString());
        } catch(IOException  e1) {
            System.out.println("Can't read from the Internet: " + e1.toString());
        }
        Thread.sleep(4000);
        return (""+sdf.format(cal.getTime())+myString);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T19:34:37.363

实际上，您不需要使用 Futures 来获得结果。请执行下列操作：

*   将 GetScore 设为 Runnable
*   将 TextArea 传递给 GetScore 的构造函数
*   当 GetScore.run 方法将被执行时，使用 textArea.setText 方法，或者使用[SwingUtilities.invokeLater](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingUtilities.html)

像：

```
 SwingUtilities.invokeLater(new Runnable() {
     public void run() {
        textArea.setText(text);
     }
 ); 
```

# c# - 硬件锁定许可：我应该使用哪些硬件？

> ID：12555477
> 
> 赞同：5
> 
> 时间：2012-09-23T19:20:23.713
> 
> 标签：c#, licensing, wmi, hardware

我最近实现了一个带有模糊匹配的硬件锁定许可系统，以处理硬件的变化而无需重新激活，但我需要更多的硬件来匹配以更安全/创建更可靠的模糊匹配。

现在我正在匹配以下内容：

*   物理mac地址
*   硬盘序列号
*   RAM 部件号/制造商/尺寸
*   处理器 ID

在这种情况下，还有哪些其他特定于机器的不变硬件序列号可以很好地使用，并且可以从 C# 轻松检索。

检索此类硬件信息的代码示例也将受到赞赏。

**澄清**

当我说“不变”时，我的意思是硬件序列或不直接修改机器中的硬件就不会改变的信息。（IE，不会自行改变，也不会通过软件改变）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T19:25:32.420

在一家从事这种硬件指纹识别的公司工作过，我可以告诉你，商业替代品通常相当可靠，但在某些合法的情况下它们都会失败。

请注意，该领域的一些专利得到了非常积极的执行。一些提出硬件锁定算法的大型成功公司（如微软）已被成功起诉。如果你在你所做的事情上非常成功，那很可能会发生在你身上。

如果您觉得需要硬件锁定，请选择一家可以让您轻松为那些对其系统执行合法升级而最终打破模糊匹配规则的客户提供客户服务的公司。并且，准备好快速有效地提供该服务。

对于大多数用例，我会警告不要硬件锁定。它对您的软件设置了限制，这往往会妨碍您的合法客户使用该软件的合法愿望。

**更新**

除了您列出的指标之外，还有一些指标可以使用。我没有研究过哪些特别容易从 C# 获得，因为我在这个级别处理的大部分代码都是可移植的 C++，并根据需要带有一些特定于平台的程序集。

*   BIOS 校验和
*   处理器的数量和类型（处理器 ID 不适用于所有处理器）
*   显卡细节（经常升级的部分，但提供了一点额外的熵）
*   连接的显示器数量、屏幕分辨率、品牌（经常变化，但又增加了一点熵）。
*   安装的字体不寻常且差异很大（例如，忽略您从 Office 获得的字体等）
*   *所有*已安装网卡的 Mac 地址（例如 WiFi、有线）
*   *所有*已安装 HD的序列号
*   枚举其他设备（例如 DVD、CD、内置读卡器）

请记住，笔记本电脑插入扩展坞，可能会获得许多额外的端口、新显示器等......

# php - 文本过滤器，多个匹配项

> ID：12555483
> 
> 赞同：1
> 
> 时间：2012-09-23T19:21:14.050
> 
> 标签：php, regex, drupal-7

如何使此过滤器适用于同一文本中的多个匹配项？

```
function _embed_link($text, $filter, $format) {
  if (preg_match_all("/\[(.*?)\|(node|term)\:(\d+)\]/i", $text, $params)) {
    foreach ($params[0] as $key => $param) {
      $args = array(
        $params[0][$key],
        $params[1][$key],
        $params[2][$key],
        $params[3][$key],
      );
      $markup = _embed_link_process($args);
      $text = preg_replace("/\[(.*?)\|(node|term)\:(\d+)\]/", $markup, $text, 1);
    }
  }

  return $text;
} 
```

这是返回链接的函数

```
function _embed_link_process($params = array()) {
  $output = '';

  if ($params[2] == 'node') {
    // Find node by it's id
    $node = node_load($params[3]);
    $output .= render(l($params[1], 'node/'. $node->nid, array(
      'attributes' => array(
        'class' => array('embed-link', 'embed-link-node', 'embed-link-node-'. $node->nid),
      ),
    )));
  }

  if ($params[2] == 'term') {
    $term = taxonomy_term_load($params[3]);;
    $output .= render(l($params[1], 'taxonomy/term/'. $term->tid, array(
      'attributes' => array(
        'class' => array('embed-link', 'embed-link-term', 'embed-link-term-'. $term->tid),
      ),
    )));
  }

  return $output;
} 
```

使用过滤器的示例文本：

> Ut [单击此处|节点：4] enim ad minim veniam, quis [单击此处|术语：42] nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat。Duis aute irure dolor in reprehenderit in voluptate velit esse cillum [单击此处|术语：1] dolore eu fugiat nulla pariatur。Exceptioneur sint occaecat cupidatat non proident, sunt in culpa [单击此处|节点：42] qui officia deserunt mollit anim id est labourum。

目标是让每个 [...] 被正确的链接取代。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T19:53:58.360

请参阅 的[文档`preg_replace`](http://php.net/manual/de/function.preg-replace.php)。

最后一个参数 ( `1`) 明确表示您只想替换第一个匹配项。删除它，所有出现的地方都应该被替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T20:06:40.127

修改函数 _embed_link 以使用 preg_match_all

```
function _embed_link($text, $filter, $format) {
  if (preg_match_all("/\[(.*?)\|(node|term)\:(\d+)\]/i", $text, $params)) {
    foreach ($params[0] as $key => $param) {
      // $param => [Click here|node:4]
      $param_arr  = array (
        $params[0][$key], // [Click here|node:4]
        $params[1][$key], // Click here
        $params[2][$key], // node
        $params[3][$key], // 4
      );
      $markup = _embed_link_process($param_arr);
      $text = str_replace($param, $markup, $text);
    }
  }

  return $text;
} 
```

# objective-c - UITableViews 和异步数据

> ID：12555494
> 
> 赞同：0
> 
> 时间：2012-09-23T19:22:36.847
> 
> 标签：objective-c, ios, multithreading, uitableview, afnetworking

我正在使用某种 UI，您可以假设它是一个`UITableView`（请不要建议`UITableView`框架，因为我使用的不是一个`UITableView`但功能非常相似。

我正在使用`AFNetworking`异步下载图像，并将图像存储到数组中。在该`cellForRowAtIndexPath`方法中，我正在填充该数组的内容。然而，问题是数据在`cellForRowAtIndexPath`调用之后才完成下载，导致崩溃。

在填充类似于表格视图的 UI 时，处理异步数据下载的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T19:29:36.387

例如，您可以使用占位符图像返回单元格，并保留对其索引的引用。当您最终获得图像时，只需重新加载该单元格。UITableView 只有在可见时才会重新加载它，现在您将拥有图像。

# cocoa - 如何在运行时编译 CIFilter？

> ID：12555495
> 
> 赞同：1
> 
> 时间：2012-09-23T19:22:41.177
> 
> 标签：cocoa, core-image, runtime-compilation

我想在程序运行时做 Quartz Composer 对 Core Image Filter 补丁所做的事情： [在 Quartz Composer 中编译一个 CIFilter](http://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/CoreImaging/ci_custom_filters/ci_custom_filters.html)。Quartz Composer 有一个补丁，它使用 CIFilter 内核的文本创建 CIFilter。

我们可以在公共 API 中访问它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:17:36.620

解决方案是[应用内核](https://developer.apple.com/library/mac/documentation/graphicsimaging/Reference/QuartzCoreFramework/Classes/CIFilter_Class/Reference/Reference.html#//apple_ref/occ/instm/CIFilter/apply%3aarguments%3aoptions%3a)，内核是使用[+ kernelsWithString:](https://developer.apple.com/library/mac/documentation/graphicsimaging/Reference/QuartzCoreFramework/Classes/CIKernel_Class/Reference/Reference.html#//apple_ref/occ/clm/CIKernel/kernelsWithString%3a)类方法创建的。

# maven - tomcat7 maven 插件的默认阶段是什么？

> ID：12555500
> 
> 赞同：8
> 
> 时间：2012-09-23T19:23:41.887
> 
> 标签：maven, maven-plugin

我希望我的构建过程将我的战争部署到远程服务器。直到现在我已经跑了`mvn clean install tomcat7:deploy`

这对我来说似乎是错误的，因为它可能应该是`deploy`阶段的一部分。但是，如果我尝试这样做，`mvn deploy`我会得到：

```
Deployment failed: repository element was not specified in the POM inside distributionManagement element or in -DaltDeploymentRepository=id::layout::url parameter 
```

由于我还没有定义任何要部署到的存储库（我真的不想部署到远程存储库，只是使用这个阶段来执行 tomcat maven 插件......）

我希望能够在不部署到任何远程存储库的情况下运行 tomcat maven 插件。那可能吗 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-23T20:10:44.633

该插件默认不执行。你必须向它添加一个执行，或者像你一样调用它（fe mvn clean install tomcat7:deploy）。

Tomcat 上的部署与 Maven 部署阶段/部署到远程存储库无关。

要将 Tomcat 部署绑定到某个阶段，请在您的 tomcat maven 插件配置中添加如下内容：

```
 <executions>
    <execution>
      <id>tomcat-deploy</id>
      <phase>pre-integration-test</phase>
      <goals>
        <goal>deploy</goal>
      </goals>
    </execution>
  </executions> 
```

在此配置中，Tomcat 的部署将发生在预集成测试阶段，我相信这是最常见的阶段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T07:58:12.527

一种解决方案是将其绑定到配置文件。

```
<profile>
  <id>webapp-deploy</id>
..
          <plugin>
            <groupId>org.apache.tomcat.maven</groupId>
            <artifactId>tomcat7-maven-plugin</artifactId>
            <executions>
              <execution>
                <id>tomcat-deploy</id>
                <phase>install</phase>
                <goals>
                  <goal>deploy-only</goal>
                </goals>
              </execution>
            </executions>
          </plugin>
..
</profile> 
```

只需运行 -Pwebapp-deploy

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-18T17:25:29.670

这是因为 Maven（在一个超级加重的决定中）决定使用“部署”这个词。在 Maven 世界中，部署意味着获取您刚刚构建的二进制文件并将其上传/存储在本地 Maven 存储库中。不要将您新建的战争部署到您的服务器。

大多数java开发人员认为“发布”工件实际上是对maven的“部署”。

如果您认为 Maven 只关心使用依赖管理进行构建，这会有所帮助。构建依赖管理之外的任何东西都需要特殊调用（如 tomcat7:redeploy）或不同的脚本环境。

# java - 广度优先搜索 - Java

> ID：12555501
> 
> 赞同：6
> 
> 时间：2012-09-23T19:23:46.950
> 
> 标签：java, algorithm, search, breadth-first-search

我作为一个学校练习在java中实现广度优先搜索。我已经实现了几乎所有的东西，但问题是我的搜索不起作用，我找不到问题:(所以我请你给我建议，给我一些关于最终问题可能出在哪里的指导方针。

```
public ArrayList<SearchNode> search(Problem p) {
        // The frontier is a queue of expanded SearchNodes not processed yet
        frontier = new NodeQueue();
        /// The explored set is a set of nodes that have been processed 
        explored = new HashSet<SearchNode>();
        // The start state is given
        GridPos startState = (GridPos) p.getInitialState();
        // Initialize the frontier with the start state  
        frontier.addNodeToFront(new SearchNode(startState));

        // Path will be empty until we find the goal.
        path = new ArrayList<SearchNode>();

        // The start NODE

        SearchNode node = new SearchNode(startState); 

        // Check if startState = GoalState??
        if(p.isGoalState(startState)){
           path.add(new SearchNode(startState)); 
           return path; 
        }

        do {  

          node = frontier.removeFirst();
          explored.add(node); 

          ArrayList reachable = new ArrayList<GridPos>();
          reachable = p.getReachableStatesFrom(node.getState()); 

          SearchNode child; 

          for(int i = 0; i< reachable.size(); i++){

              child = new SearchNode((GridPos)reachable.get(i)); 

              if(!(explored.contains(child) || frontier.contains(child))){
                  if(p.isGoalState(child.getState())){
                      path = child.getPathFromRoot() ;  
                      return path; 
                  }
                  frontier.addNodeToFront(child); 
              }

          }
        }while(!frontier.isEmpty());

        return path;
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-23T19:34:09.953

```
frontier.addNodeToFront(child); 
```

assuming the rest of your code (getReachableStatesFrom(), etc) is correct, adding elements to the front of your queue will cause your code to execute as a depth first search.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-07T00:16:49.310

为了实现广度优先搜索，您应该使用队列。这个过程可能会变得非常复杂。所以，最好保持简单。您应该将节点的子节点推送到队列（从左到右），然后访问该节点（打印数据）。然后，你应该从队列中删除节点。您应该继续此过程，直到队列变空。你可以在这里看到我的 BFS 实现：[https ://github.com/m-vahidalizadeh/foundations/blob/master/src/algorithms/TreeTraverse.java](https://github.com/m-vahidalizadeh/foundations/blob/master/src/algorithms/TreeTraverse.java)

# c# - 如何编写控制外部cmd的c#

> ID：12555512
> 
> 赞同：2
> 
> 时间：2012-09-23T19:24:55.060
> 
> 标签：c#, java, cmd

我需要一些建议。我几乎完成了我的程序，但停留在最后一步。我正在尝试使用以下命令从 C# 运行 java 文件：

Process.start("java","file") //with file = file.class (已经编译好的java文件)

该过程将触发一个cmd并执行java文件一切正常，但是cmd关闭太快，我的java文件是否要求输入都没有关系，最后，完成后，cmd只是自动关闭。

由于 cmd 是外部应用程序，我无法在 C# 中控制它：使用 Process.WaitForExit(); 但同样的效果，因为 cmd，正如我所说，外部

无论如何我可以使用c#暂停cmd，或者以某种方式设置cmd，这样它就不会关闭（只有一次，不是每次我想运行lol）。我想看看输出

这必须在不对 java 进行任何修改的情况下完成，因为我将以相同的方式运行多个 java 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T19:51:20.293

试试这个：

```
Process.Start("cmd", "/K java test.class"); 
```

该`/K`标志告诉`cmd`运行提供的命令，但之后不要关闭窗口。

# php - php中的Javascript无法正常工作

> ID：12555517
> 
> 赞同：0
> 
> 时间：2012-09-23T19:25:28.447
> 
> 标签：php, javascript, html

```
<div class="interactionLinksDiv">
<a href="javascript:toggleReplyBox('.$fullname.','.$current_id.','.$current_id.','.$id.','.$thisRandNum.')">REPLY</a>
</div> 
```

我用五个参数调用了javascript函数toggleReplyBox。这段代码写在 php 标签内。但是这段代码没有正确执行，参数也没有正确传递。如果我在这里调用函数 toggleReplyBox 没有参数，它可以正常工作，但这不是我想要的。

```
<div class="interactionLinksDiv">
<a href="javascript:toggleReplyBox('<?php echo $fullname; ?>','<?php echo $current_id; ?>','<?php echo $current_id ; ?>','<?php echo $id; ?>','<?php echo $thisRandNum; ?>')">REPLY</a>
</div> 
```

当我将此代码复制到我的 php 文件的 html 部分时，它工作正常并且传递了参数并且函数正确执行。但是我想知道为什么当一切都相同时该函数无法在 php 标签内工作。

```
function toggleReplyBox(sendername,senderid,recName,recID,replyWipit) {
$("#recipientShow").text(recName);
document.replyForm.pm_sender_name.value = sendername;
document.replyForm.pmWipit.value = replyWipit;
document.replyForm.pm_sender_id.value = senderid;
document.replyForm.pm_rec_name.value = recName;
document.replyForm.pm_rec_id.value = recID;
document.replyForm.replyBtn.value = "Send";
if ($('#replyBox').is(":hidden")) {
      $('#replyBox').fadeIn(1000);
} else {
      $('#replyBox').hide();
} 
```

}

在 php 标签内，我更改了代码：

```
print <<<HTML
<div class="interactionLinksDiv">
<a href="javascript:toggleReplyBox('$fullname','$current_id','$current_id','$id','$thisRandNum')">REPLY</a>
</div>
HTML; 
```

它仍然显示错误 Parse error: syntax error, unexpected T_VARIABLE in C:\xampp\htdocs\Fluid Solution\fluid-solution-website-template\interact\profile1.php 在第 130 行

第 130 行是该`<a href...`行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T19:29:37.887

您的代码的第一个版本既不是 PHP（javascript/HTML 标记是“裸”的）也不是 Javascript：“。” `$variable`字符串连接运算符在 Javascript 中不起作用，扩展也不起作用。

你可以让它像这样在 PHP 中工作：

```
<?php
    $fullname = "Test";
    $current_id = 15;
    $id = 9;
    $thisRandNum = 42;
    // All lines beyond this point, and...
    print <<<HTML
<div class="interactionLinksDiv">
<a href="javascript:toggleReplyBox('$fullname','$current_id',
'$current_id','$id','$thisRandNum')">REPLY</a>
</div>
HTML;
    // ...up to here, start at the first column (i.e. they are not indented).
?> 
```

请注意，在 here-document（和 之间的区域`<<<HTML`）`HTML`中，您不能使用字符串连接运算符“。” （或任何其他）。

或者，您可以像在代码的第二个版本中所做的那样，仅将变量替换`<?php echo $variablename; ?>`为 HTML，其余部分保留为 HTML。

作为一个更简单的示例，让我们考虑一个`alert()`带有从 PHP 发送的消息的框。这意味着：

1）脚本在服务器端执行；标签之间的任何东西`<?php ?>`都会被执行，*它的输出*会替换标签本身。

在这个阶段之后，我们不再有 PHP，而是 HTML 和 Javascript 的混合体，可以由它发送到的客户端执行。所以我们想要一个像

```
<script type="text/javascript">
    alert('Hello, world');
</script> 
```

为此，我们可以在 PHP 中生成所有 HTML：

```
echo '<script type="text/javascript">';
echo "alert('$message');";  // or also:  echo 'alert("' . $message . '");';
echo '</script>'; 
```

或者我们可以使用 here-document 来实现，其中操作符不起作用，但 $variables 可以：

```
echo <<<HEREDOCUMENT
<script type="text/javascript">
    alert('$message');
</script>
HEREDOCUMENT; 
```

或者我们可以在 HTML 中运行它，并且只依赖 PHP 来生成唯一的变量：

```
<script type="text/javascript">
    alert('<?php echo $message; ?>');
</script> 
```

但始终需要将 PHP 中的内容、Javascript 中的内容和 HTML 标记中的内容分开。

# android - Horizo ntalScrollView 内自定义视图上的 ScaleGestureDetector

> ID：12555520
> 
> 赞同：1
> 
> 时间：2012-09-23T19:25:52.787
> 
> 标签：android, view, touch-event, horizontalscrollview, pinch

我对 Android 编程很陌生，我很难在这样构建的布局上获得预期的行为：主布局是一个简单`LinearLayout`的，反过来`HorizontalScrollView`又包含一个自定义视图，该视图较大（大约未缩放时为 2000 像素宽）。

效果很好，我的自定义视图显示在内部`HorizontalScrollView`，它是可滚动的、可滑动的和一切。到目前为止，一切都很好。

我想做的下一件事是缩放自定义视图。为了实现这一点，我覆盖了`onTouchEvent()`自定义视图

```
@Override
public boolean onTouchEvent(MotionEvent motionEvent)
{
    if (_gestureDetector.onTouchEvent(motionEvent))
        return true;
    return false;
} 
```

并在我的`SimpleOnScaleGestureListener`. 我将它们传递到视图中以计算新的缩放因子，即使这样也有效。

现在出现了我的小问题：只有当我“垂直”捏合时，捏合/缩放才有效。直观的“水平”捏似乎被 消耗掉了`HorizontalScrollView`，而是进行了一些滚动。

这里发生了什么，我怎样才能得到我想要的行为，即能够

*   `HorizontalScrollView`使用和轻弹和滚动
*   可以通过捏自定义视图进行缩放吗？

# objective-c - 用字典对字典数组进行排序，我可以使用 sortUsingDescriptors 吗？

> ID：12555521
> 
> 赞同：1
> 
> 时间：2012-09-23T19:25:55.687
> 
> 标签：objective-c, sorting, nsdictionary

我不知道如何对我的数组进行排序。这是一个包含字典的数组，里面有字典。所以要获得开始日期，我需要写

```
NSDictionary *object = [array objectAtIndex:0];
[[array objectForKey:@"DATE"]objectForKey:@"startDate"]; 
```

我想对数组进行排序，但是因为我需要根据第二个字典对其进行排序，所以我不能使用它：

```
[array sortUsingDescriptors:[NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"startDate" ascending:YES]]]; 
```

我想我只需要做一些小的调整，但我不知道怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T19:42:06.067

首先，应该调用您获取对象的行`object`而不是`array`. 此外，您可以使用`valueForKeyPath`而不是`objectForKey`嵌套字典。像这样的东西：

```
[object valueForKeyPath:@"DATE.startDate"]; 
```

现在您只需将相同的内容应用于您的排序描述符：

```
[array sortUsingDescriptors:[NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"DATE.startDate" ascending:YES]]]; 
```

但请记住，`sortUsingDescriptors:ascending:`它是一种就地排序的方法，必须在`NSMutableArray`. 如果您只想要数组的排序副本，请改用`sortedArrayUsingDescriptors:`方法。我希望这是有道理的......

# c++ - 排队自旋锁

> ID：12555522
> 
> 赞同：1
> 
> 时间：2012-09-23T19:26:05.000
> 
> 标签：c++, synchronization, linux-kernel, mutex, spinlock

我碰巧偶然发现了 Queued Spinlock 并想用 C++ 实现。我在谷歌上搜索了一些信息，但无法获得适当的文档。

任何文档/实施提示将不胜感激。

提前致谢

我对迈克尔布朗指出的代码有以下疑问

```
// represents processor in wait queue of the spinlock
struct qsl_entry
{

// next processor in the queue that is waiting to enter section
qsl_entry* next;

// indicates whether the access to section has been granted to processor
int state;

};

// queued spinlock
struct qsl
{

// the first processor in the queue that is waiting to enter section
qsl_entry* head;

};

// requests access to critical section guarded by the spinlock,
// if the section is already taken it puts processor to wait
// and insert it into queue
// lck - queued lock that used to guard section
// ent - entry that represent processor in queue of the spinlock
void lock_qsl(qsl* lck, qsl_entry* ent)
{
__asm
{
    mov eax, ent;
    mov ebx, lck;

    // prepare queue entry
    mov [eax], 0;
    mov edx, eax;
    mov [eax]qsl_entry.state, 1;

    // store it as the last entry of the queue -- Is this what is line is doing ?
    // ebx contains address of lck & [ ebx ] refers to address pointed by lck & 
    // it is over written to ent. eax now contains the memory the lck was pointing to.
    lock xchg [ebx],eax;

    // if the section available grant access to processor?
    test eax, eax;
    jz enter_section;
        // link new entry with the rest of queue -- really ? are we nt overwritting
        // the next pointer here ?
        mov [eax],edx

        // wait for processor's turn
        wait1:
            pause;
            cmp [edx]qsl_entry.state, 1;
            je wait1;

    enter_section:
 }
} 
```

这个实现是否正确？我怀疑是这样！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T23:26:49.247

此处有问题的代码的作者。首先让我声明代码**是正确**的。我只是在这里写了更详细的代码解释：http: [//kataklinger.com/index.php/queued-spinlocks/](http://kataklinger.com/index.php/queued-spinlocks/)

我还有另一种实现，它有点简单，但不如这个好（尽管如此）。~~我会看看我能不能在某个地方找到它。~~我找到了。这是包含两种实现的讨论链接：http: [//forum.osdev.org/viewtopic.php?f=15 &t=15389](http://forum.osdev.org/viewtopic.php?f=15&t=15389)

最后一篇文章还有更深入地讨论排队自旋锁的链接：[http ://www.cs.rice.edu/~johnmc/papers/tocs91.pdf](http://www.cs.rice.edu/~johnmc/papers/tocs91.pdf)

是的，我参加聚会有点晚了，但我是几天前的这篇文章，它启发了我写出更好的代码解释。

# css - IE7页面下垂直子菜单消失

> ID：12555528
> 
> 赞同：0
> 
> 时间：2012-09-23T19:26:44.140
> 
> 标签：css, menu, internet-explorer-7

当我将鼠标悬停在“Diensten”上时，垂直子菜单在所有浏览器中都能正常显示，但在 IE7 中则不然。

[看网站](http://www.marmsoft.nl)

谁能帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:14:52.317

是的，当我删除 Pie 时，它​​有点作用。见网站。但我不能在 IE7 和 IE8 上使用带有 css3 的圆角。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T19:34:50.233

即使在IE9中也不好。修复#access ul ul 的绝对位置top 1.68em

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T19:46:34.397

我是对的，你正在使用 css3pie 吗？如果是，请先尝试将其删除，现在可以使用吗？

# sas - PROC 格式和过程摘要

> ID：12555529
> 
> 赞同：0
> 
> 时间：2012-09-23T19:26:44.877
> 
> 标签：sas

```
data a;
 input accountno name $;
 datalines;
1.01 x
0.999 harshit
1.99 y
2 kumar
3 manali
;
Run;

proc print; run;

proc format;
value h
0-1='g.0-1'
1-3='g.1-3'
;
run;

proc print data = a;
 format accountno h.;
run;

proc summary data = a nway;
 class accountno;
 format accountno h.;
 var accountno;
 output out = hpd;
run;

proc print; run; 
```

在过程摘要中，它不会占用 var accountno 也给出

警告：文件 WORK.HPD 中已存在变量 accountno。警告：重复变量不会包含在输出语句编号 1 的输出数据集中。那么解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T22:16:11.617

不完全确定你想在输出中得到什么，但我可以告诉你为什么你会收到警告信息。

在 proc 摘要中，您在 class 语句中使用的变量名称与在 var 语句中使用的变量名称相同。在参考输出数据集中，该过程让您知道您正在复制变量名称。

您可以在写入数据“a”的数据步骤中添加一个额外的变量；

如果您只想获取类变量的频率，请完全删除 var 语句，如下所示：

```
 proc summary data = a;
    class accountvar;
    output out = freqs;
    run; 
```

# mysql - MySQL REGEXP 整数比较

> ID：12555531
> 
> 赞同：2
> 
> 时间：2012-09-23T19:26:47.223
> 
> 标签：mysql, regex, comparison

我正在使用 REGEXP 来匹配列中大量文本中的特定字符串`LONGTEXT`。例如：

```
Text text text text text
 text text text text text
 text text SOLD: 75/101 text
 text text text text text 
```

所以我的查询看起来像这样：

```
SELECT * FROM `test` WHERE `file` REGEXP
'SOLD:[ ]{1}[0-9]{1,2,3}/[0-9]{1,2,3}' 
```

这将正确匹配`SOLD: 75/101`字符串。

但是有可能对分子进行比较吗？例如，找到所有`SOLD: >=75/101`？

比较数字将是用户通过 $_POST 输入的数字。我知道 REGEXP 并不是真的用于比较数字，但是有没有办法用 regexp*捕获*字符串，然后以其他方式对整数进行比较？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T21:22:49.040

如果您只需要查看分子，如您的评论中所述，那么

```
SELECT * FROM mytable WHERE mycolumn REGEXP 
"SOLD: ([1-9][0-9]{2,}|[8-9][0-9]|7[5-9])/101"; 
```

应该管用。

顺便说一句，`[0-9]{1,2,3}`在大多数正则表达式中是一个语法错误（我不知道 MySQL 是如何处理它的）；指定范围的正确方法是`[0-9]{1,3}`.

# javascript - 我可以使用 Javascript 即时从以前的帖子中自动隐藏 Blogger 中的某些元素吗？

> ID：12555532
> 
> 赞同：0
> 
> 时间：2012-09-23T19:26:50.010
> 
> 标签：javascript, html, dom, blogger, blogspot

我会长话短说，我有一个博主/blogspot 博客。在每个帖子中，我都以表格的形式在帖子中手动发布了一个广告。现在，我想删除所有这些广告。我的问题是，当用户加载页面而不手动从每篇博客文章中删除广告时，是否可以使用 Javascript 即时执行此操作？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T19:29:15.843

如果广告有一个共同的类，例如`ad`，，您可以使用：

```
function killMe(el){
   el.parentNode.removeChild(el);
}
var els=document.getElementsByClassName('ad');
for(var i=0;i<els.length;i++){
    killMe(els[i]);
} 
```

**编辑**：

然后，您可以使用

```
document.getElementsByClassName = document.getElementsByClassName || function(cName) {
    var arr=[],
        els=document.getElementsByTagName("*");
    for(var i=0,l=els.length;i<l;i++){
        if(els[i].className.split(' ').indexOf(cName)>-1){
            arr.push(els[i]);
        }
    }
    return arr;
}
function killMe(el){
   el.parentNode.removeChild(el);
}
var els=document.getElementsByClassName('post-body');
for(var i=0;i<els.length;i++){
    killMe(els[i].getElementsByTagName('tr')[0]);
} 
```

# c# - 如何将我的 Python 正则表达式转换为 C#？

> ID：12555534
> 
> 赞同：0
> 
> 时间：2012-09-23T19:26:58.420
> 
> 标签：c#, python, regex

在我的 Python 代码中，我有这样的东西：

```
Type1 = [re.compile("-" + d + "-")  for d in "49 48 29 ai au2".split(' ')]
Type2 = [re.compile("-" + d + "-")  for d in "ki[0-9] 29 ra9".split(' ')]

Everything = {"Type1": Type1, Type2: Type2} 
```

还有一个小函数返回输入字符串的类型。

```
def getInputType(input):
    d = "NULL"
    input = input.lower()
    try:
        for type in Everything:
            for type_d in Everything[type]:
                code = "-" + input.split('-')[1] + "-"
                if type_d.findall(code):
                    return type
    except:
        return d
    return d 
```

是否有在 C# 中定义这些多个正则表达式的单行等效项，还是我必须诉诸于分别声明它们？简而言之，将其转换为 C# 的好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T19:50:34.580

我认为一个相当简单的翻译是：

```
Dictionary<string, List<Regex>> everything = new Dictionary<string, List<Regex>>()
{
    { "Type1", "49 48 29 ai au2".Split(' ').Select(d => new Regex("-" + d + "-")).ToList() },
    { "Type2", "ki[0-9] 29 ra9".Split(' ').Select(d => new Regex("-" + d + "-")).ToList() },
}

string GetInputType(string input)
{
    var codeSegments = input.ToLower().Split('-');
    if(codeSegments.Length < 2) return "NULL";

    string code = "-" + codeSegments[1] + "-";
    var matches = everything
        .Where(kvp => kvp.Value.Any(r => r.IsMatch(code)));

    return matches.Any() ? matches.First().Key : "NULL";
} 
```

# c# - WinRT 将 Jpg 或 PNG 转换为 GIF

> ID：12555537
> 
> 赞同：4
> 
> 时间：2012-09-23T19:27:05.217
> 
> 标签：c#, image-processing, microsoft-metro, windows-runtime, gif

我正在开发一个 WinRT 应用程序，它将进行一些图像处理，我想做的一件事是将一些 jpg 或 png 转换为 gif。我有这样的作品。对于我的一些测试 jpg，它适用于其他人，它是一个得到输出的加扰图像。只是想知道我是否遗漏了什么。这是我到目前为止所拥有的

```
 public async static void ConvertToGif(IRandomAccessStream stream)
    {
        var decoder = await BitmapDecoder.CreateAsync(stream);
        var pixels = await decoder.GetPixelDataAsync();

        var file = await KnownFolders.PicturesLibrary.CreateFileAsync("test.gif", CreationCollisionOption.ReplaceExisting);
        var outStream = await file.OpenAsync(FileAccessMode.ReadWrite);

        var encoder = await BitmapEncoder.CreateAsync(BitmapEncoder.GifEncoderId, outStream);

        encoder.SetPixelData(decoder.BitmapPixelFormat, BitmapAlphaMode.Ignore,
            decoder.PixelWidth, decoder.PixelHeight,
            decoder.DpiX, decoder.DpiY,
            pixels.DetachPixelData());

        await encoder.FlushAsync();
        outStream.Dispose();
    } 
```

较小的 jpg 似乎可以工作，但较大的 jpg 会乱码。还有另一种方法可以实现这一目标吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T22:43:45.763

呃，问题是我使用的是 PixelWidth/Height，我应该一直使用 OrientedPixelWidth/Height。

这似乎解决了我的问题。

# c - C中的二进制计数器

> ID：12555538
> 
> 赞同：-1
> 
> 时间：2012-09-23T19:27:05.530
> 
> 标签：c, binary, counter

我正忙于一个项目，需要在 C 中实现以下功能

```
void logic_circuit(int inputs[4],int outputs[2]) 
```

需要创建一个计数器，因为所有 4 位组合都需要插入到这个函数中......

```
void logic_circuit(int inputs[4],int outputs[2])
{
      //some calculations
      outputs[0] = ...
      outputs[1] = ...
}

//allocate memory
int inputs[4];
int outputs[2];

for(0000 to 1111)
{
     logic_circuit(0000,outputs);
} 
```

我一直在密集搜索网络，但不幸的是我找不到任何有用的东西。有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T19:37:41.847

除了四个嵌套循环，您还可以`inputs`从单个循环计数器填充数组，

```
for(mask = 0; mask < 0x10; ++mask) {
    for(index = 0; index < 4; ++index) {
        inputs[index] = (mask >> index) & 1;
    }
    logic_circuit(inputs, output);
} 
```

这可以更好地扩展到更大的`inputs`阵列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T20:49:27.643

```
for(int i=0; i < bitSize; i++){
    if(outputs[i]==1){        
        outputs[i] = 0;
        continue;
    }
    if(outputs[i]==0){ 
        outputs[i] = 1;
        logic_circuit(inputs, outputs);
        i = 0;
    }
} 
```

如果你不想使用位数组，你可以使用这样的位掩码

```
int mask = 1;
outputs[i] &= mask << i; 
```

这将适用于任何大小的位数组（或者如果您想使用屏蔽方法，您选择用于 int 的任何宽度）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T19:31:30.010

对于这个简单的例子，四个嵌套`for`循环应该可以工作：

```
for (inputs[0] = 0; inputs[0] < 2; ++inputs[0]) {
  for (inputs[1] = 0; inputs[1] < 2; ++inputs[1]) {  
    for (inputs[2] = 0; inputs[2] < 2; ++inputs[2]) {
      for (inputs[3] = 0; inputs[3] < 2; ++inputs[3]) {
        logic_circuit(inputs, outputs);
      }
    }
  }
} 
```

对于较大的输入，这变得非常烦人。递归方法可以更好地扩展：

```
void enumerate_bits(int* bits, int n) {
  int bit;
  if (n == 0) {
    logic_circuit(bits, outputs);
  } else {
    for (bit = 0; bit < 2; ++bit) {
      bits[n-1] = bit;
      foo(bits, n-1);
    }
  }
}

enumerate_bits(inputs, 4); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T19:34:44.647

`0`您可以简单地从to计数`15`并将位提取到数组中：

```
for (int i=0; i <= 15; i++) {
    inputs[0] = i & 0x1;
    inputs[1] = i & 0x2;
    inputs[2] = i & 0x4;
    inputs[3] = i & 0x8;
    logic_circuit(inputs, outputs);
} 
```

请注意，这不会将`0`s 和`1`s 放入数组中，而是将`0`s 或非s 放入数组中`0`（例如，`15`它将放入 s 中`[1, 2, 4, 8]`）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-23T19:55:27.107

使用位掩码很好，但使用数组很容易，并且对大小没有限制：

```
// produce next combination of inputs, returning false if it has cycled back to all off
bool increment(bool* ary, int len)
{
    for( int i = 0; i < len; i++ )
        if( (ary[i] = !ary[i]) )
            return true;

    return false;
}

void enumerate(void)
{
    bool inputs[4];
    memset(inputs, 0, sizeof inputs);

    // loop over all combinations of inputs
    do
    {
        logic_circuit(inputs, outputs);
    } while (increment(inputs, 4));
} 
```

# javascript - 将 $.getJSON(url, function(data) 放在一个循环中但产生错误的结果

> ID：12555541
> 
> 赞同：0
> 
> 时间：2012-09-23T19:27:33.610
> 
> 标签：javascript, loops, asynchronous

我使用循环对 Instagram API 进行了多次调用，但它产生了我无法理解的奇怪结果。

```
for(var i = 0; i < tags.length; i++){

    document.write('search: ' + i + 'round');
    document.write(tags[i] + ' ');
    document.write('<hr />');
    var url = 'https://api.instagram.com/v1/tags/'+ tags[i] +'/media/recent?&client_id=5a7b13571ced47418dd539e6fc97a67f&count='+count+'&callback=?';

    $.getJSON(url, function(data) {
        console.log(data.data.length);

        if(data.data.length === 0){
            //$('ul.images').append('<li>No results</li>');

        } else {

            $.each(data.data, function(index, value){
            //console.log(value);
                var imgUrl = value.images.low_resolution.url,
                imgUser = value.user.username,
                imgLink = value.link;
                it.push(imgLink);

                document.write(value.link + '<br />');
                //$('ul.images').append('<li><a href="'+imgLink+'" target="_blank"><img src="'+imgUrl+'"/></a></li>');
            });
        }
        document.write('---------------------'  + '<br />');
    });
} 
```

当我搜索三个标签，猫，狗，猪，结果是：

```
search: 0roundcat
search: 1rounddog
search: 2roundpig

5 instagram image links
---------------------

5 instagram image links
---------------------

5 instagram image links
--------------------- 
```

所以看起来它首先循环三个`document.write()`语句然后进入`$.getJSON()`语句。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T19:45:44.747

*如果*您的问题是为什么“i + round + tag”输出出现在带有链接的输出之前，那是因为它`getJSON()`是**异步**的，即它启动一个请求并**立即返回**。然后，`for`循环结束后，执行返回到事件循环，异步请求的结果已经到达，按照到达的顺序打印。

有几种方法可以解决这个问题，一种是这样的：

```
var tags = ['cat','dog','pig'];
function start_next_request() {
  var tag = tags.shift();
  var url = ...
  $.getJSON(url, function (data) {
    ...
    start_next_request();
  }
}
start_next_request(); 
```

# symfony1 - 覆盖 Symfony 表单的保存函数

> ID：12555542
> 
> 赞同：0
> 
> 时间：2012-09-23T19:27:37.110
> 
> 标签：symfony1, symfony-1.4, symfony-forms

我有两个问题，需要一些帮助。

我有一个由第二个表的外键引用的表：

```
member_child:
    _attributes: { phpName: MemberChild }
    id: { type: INTEGER, size: '11', primaryKey: true, autoIncrement: true, required: true }
    member_id: { type: INTEGER, size: '11', required: true, foreignTable: member, foreignReference: id }
    child_id: { type: INTEGER, size: '11', required: true, foreignTable: child, foreignReference: id } 
```

和孩子：

```
child:
    _attributes: { phpName: Child }
    id: { type: INTEGER, size: '11', primaryKey: true, autoIncrement: true, required: true, onDelete: cascade }
    username: { type: VARCHAR, size: '45', required: true, defaultValue: '' }
    display: { type: TINYINT, size: '1', required: true, defaultValue: '1' }
    ...etc 
```

（显然这是推进）

现在，当我想使用表单创建子对象时，我需要做两件事：

1.  提交时，提交会员ID
2.  覆盖 doSave 函数，因此当创建孩子时，我还可以创建 member_child 对象

我怎样才能完成这些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:39:40.477

我同意，您可以像 pankar 所说的那样使用 embedForm。您也可以像这样覆盖表单的保存方法：

```
$this->childForm = new ChildForm();
$this->childMemberForm = new ChildMemberForm();

//binding, checking if form was sent etc.

if ($this->childForm->isValid() && $this->childMemberForm->isValid())
{
  //save method should return saved object
  $childObject = $this->childForm->save(); 
  //therefore this id could be used by next object
  $this->childMemberForm->save(childObject->getId()); 
} 
```

我希望这会帮助你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:19:05.973

你总是可以在你的父表单中使用内置的 Symfony 功能`sfForm::embedForm`来保存子表单，但我还没有找到一种正确让它工作的方法。

我前段时间看到的一篇帖子实际上确实为我提供了解决方案。[看看](http://www.blogs.uni-osnabrueck.de/rotapken/2009/03/13/symfony-merge-embedded-form/)它是否符合您的需求。当然它在 Doctrine 中，但我想它可以很容易地移植到 Propel 中

# function - 用汇编语言 (TASM) 创建函数

> ID：12555545
> 
> 赞同：1
> 
> 时间：2012-09-23T19:28:06.497
> 
> 标签：function, assembly, x86, tasm

我想使用循环打印前 20 个数字。

打印前九个数字绝对没问题，因为十六进制和十进制代码是相同的，但是从第 10 个数字开始，我必须将每个数字转换为其适当的代码，然后将其转换并存储为字符串并最终显示它

那是，

```
If (NUMBER > 9)
ADD 6D
;10d = 0ah --(+6)--> 16d = 10h
IF NUMBER IS > 19
ADD 12D
;20d = 14h --(+12)--> 32d = 20h 
```

然后对每个数进行旋转移位，得到想要的输出数，即

```
DAA          # let al = 74h = 0111.0100

XOR AH,AH    # ah = 0 (Just in case it wasn't)
             # ax = 0000.0000.0111.0100

ROR AX,4     # ax = 0100.0000.0000.0111 = 4007h
SHR AH,4     # ax = 0000.0100.0000.0111 = 0407h
ADD AX,3030h # ax = 0011.0100.0011.0111 = 3437h = ASCII "74" (Reversed due to little endian) 
```

然后将结果存储到字符串中并显示出来，即

```
MOV BX,OFFSET Result    ;Let Result is an empty string
MOV byte ptr[BX],5      ;Size of the string
MOV byte ptr[BX+4],'$'  ;String terminator
MOV byte ptr[BX+3],AH   ;storing number
MOV byte ptr[BX+2],AL

MOV DX,BX
ADD DX,02  ;Displaying the result
MOV AH,09H ;Interrupt 21 service to display string
INT 21H 
```

这是带有适当注释的完整代码，

```
MOV CX,20  ;Number of iterations
MOV DX,0   ;First value of the sequence

L1:

    PUSH DX
    ADD DX,30H  ; 30H is equal to 0 in hexadecimal , 31H = 1 and so on
    MOV AH,02H  ; INTERRUPT Service to print the DX content
    INT 21H
    POP DX
    ADD DX,1
    CMP DX,09   ; if number is > 9 i.e 0A then go to L2
    JA L2
LOOP L1

L2:
    PUSH DX
    MOV AX,DX
    CMP AX,14H   ;If number is equal to 14H(20) then Jump to L3
    JE L3
    ADD AX,6D    ;If less than 20 then add 6D
    XOR AH,AH    ;Clear the content of AH

    ROR AX,4     ;Rotating and Shifting for to properly store
    SHR AH,4

    ADC AX,3030h
    MOV BX,OFFSET Result
    MOV byte ptr[BX],5
    MOV byte ptr[BX+4],'$'
    MOV byte ptr[BX+3],AH
    MOV byte ptr[BX+2],AL

    MOV DX,BX
    ADD DX,02
    MOV AH,09H
    INT 21H
    POP DX
    ADD DX,1
LOOP L2

;If the number is equal to 20 come here, ->
; Every step is repeated here just to change 6D to 12D

L3:
    ADD AX,12D
    XOR AH,AH

    ROR AX,1
    ROR AX,1
    ROR AX,1
    ROR AX,1

    SHR AH,1
    SHR AH,1
    SHR AH,1
    SHR AH,1

    ADC AX,3030h
    MOV BX,OFFSET Result
    MOV byte ptr[BX],5
    MOV byte ptr[BX+4],'$'
    MOV byte ptr[BX+3],AH
    MOV byte ptr[BX+2],AL

    MOV DX,BX
    ADD DX,02
    MOV AH,09H
    INT 21H 
```

有什么合适的方法可以做到这一点，创建一个函数并使用 if/else (jumps) 来获得所需的输出，而不是一次又一次地重复代码？

**伪代码：**

```
VAR = 6
IF Number is > 9
ADD AX,VAR
Else IF Number is > 19
ADD AX,(VAR*2)
ELSE IF NUMBER is > 29
ADD AX,(VAR*3) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T20:28:21.180

所以您只想将 0 ... 20 打印为[ASCII](http://en.wikipedia.org/wiki/ASCII)字符？看起来您了解数字被标识为 0x30 ... 0x39 表示“0”到“9”，因此您可以使用整数除法来生成十位数字的字符：

我通常使用 C，但转换为汇编程序不应该太复杂，因为这些都是基本操作并且没有函数调用。

```
int i_value = 29;
int i_tens = i_value/10; //Integer division! 29/10 = 2, save for later use
char c_tens = '0' + i_tens;
char c_ones = '0' + i_value-(10*i_tens); // Subtract N*10 from value 
```

输出将是`c_tens = 0x32, c_ones = 0x39`. 您应该能够使用一对寄存器很容易地将其包装在循环中。

### 伪代码

```
regA <- num_iterations //For example, 20
regB <- 0 //Initialize counter register

LOOP:
    //Do conversion for the current iteration.
    //Manipulate bytes for output as necessary.
    regB <- regB +1
    branch not equal regA, regB LOOP 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T23:15:39.467

以下代码从 0 到 99 计数（ax 包含 ASCII 数字）：

```
count proc
      mov cx, 100 ; loop runs the times specified in the cx register
      xor bx, bx ; set counter to zero
      print:
      mov ax, bx
      aam ; Converts binary to unpacked BCD
      xor ax, 3030h ; Converts upacked BCD to ASCII
      ; Print here (ax now contains the numer in ASCII representation)
      inc bx ; Increase counter
      loop print
      ret
count endp 
```

# php - php - 计算数组中值的数量

> ID：12555547
> 
> 赞同：0
> 
> 时间：2012-09-23T19:28:37.777
> 
> 标签：php, mysql, wordpress

我目前正在尝试计算在特定价格范围内有多少房产，而我正在运行的查询仅返回 1 的值。显然我做错了什么——而且不那么精通 MySQL/PhP 也无济于事..有人介意帮忙吗？

查询如下：

```
 $apart = $wpdb->get_var("SELECT m1.post_id
    FROM hj_postmeta m1
    INNER JOIN hj_postmeta m2 ON m1.post_id = m2.post_id
    WHERE m1.meta_key = 'price'
    AND m1.meta_value
    BETWEEN 50000 AND 74999 AND m2.meta_key = 'property_type'
    AND m2.meta_value = 'apartment'");

$apartprice = count($apart); 
```

提前谢谢了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T19:30:40.150

用作函数`get_results`从`get_var` [*数据库返回单个变量*](http://codex.wordpress.org/Class_Reference/wpdb)：

```
$apart = $wpdb->get_results("SELECT m1.post_id
    FROM hj_postmeta m1
    INNER JOIN hj_postmeta m2 ON m1.post_id = m2.post_id
    WHERE m1.meta_key = 'price'
    AND m1.meta_value
    BETWEEN 50000 AND 74999 AND m2.meta_key = 'property_type'
    AND m2.meta_value = 'apartment'");

$apartprice = count($apart); 
```

或全部计数`get_var`：

```
$apart = $wpdb->get_var("SELECT COUNT(m1.post_id)
    FROM hj_postmeta m1
    INNER JOIN hj_postmeta m2 ON m1.post_id = m2.post_id
    WHERE m1.meta_key = 'price'
    AND m1.meta_value
    BETWEEN 50000 AND 74999 AND m2.meta_key = 'property_type'
    AND m2.meta_value = 'apartment'");

$apartprice = $apart; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T19:36:45.583

只要您直接对行数感兴趣：

```
$apart = $wpdb->get_var("....");
$apartprice = $wpdb->num_rows; 
```

但是，我认为[Mihai Iorga 的回答](https://stackoverflow.com/a/12555563/367456)提出了两个非常公平的观点，以防您需要获取数据库中的所有数据或（如上面 juergen d 所评论的）计数，如果您实际上并未处理该变量旁边的结果集。

# css - 为什么这个内容从 div 的底部开始？

> ID：12555550
> 
> 赞同：0
> 
> 时间：2012-09-23T19:29:02.997
> 
> 标签：css

我创建了一个左侧菜单的设计，但是文本从底部开始，而不是从顶部开始。

这开始发生在我在右侧插入地图后，使用以下代码：

```
#map {
    height: 100%;
    width: 100%;
} 
```

[这是完整代码的 jsFiddle](http://jsfiddle.net/KfMjZ/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T19:37:59.433

只需添加

```
#wrapper > div > #middleleft {
    vertical-align:top;
} 
```

**演示**：http: [//jsfiddle.net/KfMjZ/4/](http://jsfiddle.net/KfMjZ/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T19:38:02.643

添加`vertical-align: top;`到您的`#wrapper > div > #middleleft`css 块中，如下所示：

```
#wrapper > div > #middleleft {
    background: #565656;
    vertical-align: top;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T20:21:38.727

似乎没有人愿意回答你关于它为什么会这样做的实际问题。所以这里。

那里发生了一些非常奇怪的事情。这是一个奇怪的，这是肯定的。如果你没有在地图上设置高度，那么它就是vertical-align:top。

谷歌的 javascript 似乎在搞砸一些东西。它似乎只发生在 Internet Explorer 中。

真正令人着迷的一点是，如果您使用 IE 开发人员工具挖掘 html 并关闭地图上的高度，然后它会返回到顶部，如果您重新打开它，它会保持在顶部。这告诉我这是 javascript 中的某些东西以某种方式弄乱了该字段的布局。

换句话说，这是一个错误。您可以使用其他人提到的方法来解决它。

# java - 收到 0 时的 Java 套接字读取问题

> ID：12555558
> 
> 赞同：-1
> 
> 时间：2012-09-23T19:29:50.737
> 
> 标签：java, sockets, byte

我正在尝试使用 Java 套接字在 Java 中的 2 个程序之间进行通信。我想通过套接字发送一些字节作为数据。这些字节是数据，它们的值可以是任何值（因此可以是 0 也可能是 -1）。我尝试使用 DataInputStream 类来处理通信，如果我在尝试读取的字节中的某处没有收到字节 0，则工作正常，否则，它似乎在这个 0 字节处阻塞并停止读取。任何人都会对这种情况的发生方式或原因以及如何解决此问题有任何想法？谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T20:21:29.013

请保持简单，

尝试使用`InputStream, InputStreamReader, BufferedReader, OutputStream, PrintWriter.`

**客户端：**

```
Socket s = new Socket();
s.connect(new InetSocketAddress("Server_IP",Port_no),TimeOut); 
// Let Timeout be 5000 
```

**服务器端：**

```
ServerSocket ss = new ServerSocket(Port_no);
Socket incoming = ss.accept(); 
```

**从套接字读取：**

```
InputStream is = s.getInputStream();
InputStreamReader isr = new InputStreamReader(is);

BufferedReader br = new BufferedReader(isr);
boolean isDone = false;

String s = new String();

while(!isDone && ((s=br.readLine())!=null)){

     System.out.println(s);   // Printing on Console

 } 
```

**用于写入套接字**

```
OutputStream os = s.getOuptStream();
PrintWriter pw = new PrintWriter(os)

pw.println("Hello"); 
```

# php - Codeigniter 使用 this->db->like() 获取一列

> ID：12555559
> 
> 赞同：0
> 
> 时间：2012-09-23T19:30:01.930
> 
> 标签：php, mysql, codeigniter

我正在尝试使用 LIKE 实用程序在表中进行搜索。表中有 8 列，但我需要其中之一。所以我应该得到一列。我怎么能用codeigniter做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T19:33:58.630

如果您只想返回一列，您将使用：

```
$this->db->select('column_name'); 
```

在使用您的 like() 语句之前。

# c++ - 链表 - 移动到下一个节点

> ID：12555561
> 
> 赞同：0
> 
> 时间：2012-09-23T19:30:30.087
> 
> 标签：c++, data-structures, linked-list

所以我在一个关于玩家围坐在桌子旁的编程任务上遇到了一些麻烦。该程序应该能够在刚刚转弯的玩家之后添加玩家。该作业应该向我们展示如何将数据添加到任何地方的链表中。所以当我使用 PLAY 命令时会出现我的问题。这应该允许单个玩家轮流。

例如，如果有玩家 A、B 和 C，并且执行 PLAY 命令，控制台会显示“玩家 A 轮到”。如果再次执行PLAY，会显示“玩家B轮到”。

我的代码允许列表中的第一个播放器播放，但不会移动到下一个节点/播放器。

```
void CircleList::play()
{
    LinkedListOfPlayersNode *p=(*pFront).pNext;
    if (p->pData!=NULL)
    {
        cout<<p->pData->getName()+" takes a turn\n";
        p-> pNext; //My attempt to move to the next node.
    }
    else
    {
        cout<<"There are no players. Please ADD a player.\n";
    }
} 
```

所以这显然是行不通的。有人可以向我解释我将如何转移到下一个球员吗？

PS - 代码是 C++

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T19:34:38.300

您需要班级中的一名成员来保留最后一个轮到的玩家。

```
class CircleList
{
   //...
   PlayerNode* pLastPlayer;
}; 
```

最初，这被设置为`pFront`，每次`play`被调用时，您都会将其移动到下一个玩家。

```
void CircleList::play()
{
   //logic with pLastPlayer here

   //at the end move it
   pLastPlayer = pLastPlayer->next;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T19:43:20.270

线

```
p-> pNext; //My attempt to move to the next node. 
```

不会将任何内容移动到下一个节点。您可能应该存储/分配`p->pNext` 给某些东西。

# xamarin.ios - MonoTouch 蓝牙/Arduino 示例

> ID：12555564
> 
> 赞同：1
> 
> 时间：2012-09-23T19:30:53.607
> 
> 标签：xamarin.ios

有没有人使用过从 iOS 设备到 Arduino 的蓝牙通信？

MonoTouch 5.0 版本的文档提到了一个新的蓝牙接口，但我在 API 文档中找不到任何文档。

“蓝牙使用 MonoTouch 蓝牙 API，您可以轻松访问外部蓝牙硬件设备和附件并与之通信。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T01:02:31.397

查看 MonoTouch.CoreBluetooth。

也就是说，iOS 仅支持蓝牙 LE（BLE、蓝牙 4.0 和智能蓝牙），而不是常规蓝牙，后者仅在与 Apple 的特殊合作伙伴计划下可用。

# c# - 如何配置使用 System.Web.UI

> ID：12555565
> 
> 赞同：1
> 
> 时间：2012-09-23T19:31:08.523
> 
> 标签：c#, visual-studio-2010

我希望使用类似于 MartinHN 在以下帖子中提出的代码来创建 HTML 格式的 SMTP 邮件项目：[SO POST](https://stackoverflow.com/questions/886728/generating-html-email-body-in-c-sharp)

在创建对正确程序集的引用时遇到问题，以便我可以使用命名空间“System.Web.UI.WebControls”。我要添加的参考是[HERE中建议的“System.Web”](http://www.justskins.com/forums/add-reference-for-system-111523.html)

在我的 vis stud 项目参考资料的 .NET 部分中，我没有 System.Web：

![在此处输入图像描述](../Images/152844860aa16a3d4ca9f52515c6f603.png)

如果我浏览我的 C-Drive 并添加一个 System.Web.dll 文件，那么我会得到以下信息：

![在此处输入图像描述](../Images/c45139e496d64ab1e559615bc60592de.png)

如何配置此项目以便能够使用 MailDefinition ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T21:41:15.993

如果您将目标框架从 .NET 客户端配置文件更改为 .NET Framework 4，您甚至可以在控制台应用程序中添加 system.web 引用。

此处附上 VS2012 的截图

![在此处输入图像描述](../Images/1592a39a182e944646f66211c6fdd8e5.png)

![在此处输入图像描述](../Images/73666f7e041bc891b9582722aba37413.png)

# python - 从 pcap 中查找 dns 查找时间

> ID：12555567
> 
> 赞同：1
> 
> 时间：2012-09-23T19:31:20.020
> 
> 标签：python, scapy

我有`tcpdump`一个简单的`HTTP Request to http://www.google.com`. 现在，查看转储，我看到首先`dns request for google.com`制作了 a ，结果是`a bunch of IPs`，然后通过以下方式联系其中一个`HTTP`：

```
GET / HTTP/1.1 \r 
```

返回一个`301`. 再次生成 a `dns request for google.com`，导致 a `bunch of IPS`，其中一个通过 联系`HTTP`，响应是`302`重定向到`google.co.in`。最后，`dns request for google.co.in`制作了一个，它给了我将在整个对话中使用的最终 IP。

我正在使用`python`和`scapy`。我想知道`total DNS lookup time`从开头`first dns request`到结尾是哪个`the last dns response`。如何找到最后一个成功的 dns 响应？

我可以一个一个地浏览数据包并寻找`301`等等`302`，但我想知道是否有更优雅的方式？

# java - 使用 Openfire、Smack 和 Play 的聊天网站架构！框架

> ID：12555568
> 
> 赞同：4
> 
> 时间：2012-09-23T19:31:22.497
> 
> 标签：java, web-services, playframework, openfire, smack

我正在开发一个使用 Openfire XMPP 服务器的聊天网站，客户端使用 Smack API。使用 Smack API 的 Web 项目是使用 Play！使其成为 RESTful 的框架。我选择玩！因为它的异步编程产品（Comet Sockets/WebSockets）。

基本上，到目前为止，我的架构如下所示：

Openfire <-> 网络服务器 <-> 用户/浏览器。

为了也支持 Android 设备并最大化代码重用，我是否应该将 XMPP 客户端代码实现为网站和 Android 客户端通用的 RESTful Web 服务？

Openfire <-> Web 服务 <-> 网站 <-> 浏览器/用户。

Openfire <-> Web 服务 <-> Android 应用程序。

由于引入了中间 Web 服务，我担心可伸缩性问题？由于必须通过多个组件，我是否会在通信中引入延迟？

任何关于上述内容的建议都会有所帮助。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T12:54:06.307

可扩展性的关键是解耦。因此，本质上您可以从“如果其中一个组件发生故障，其他组件是否会继续正常工作？”来考虑问题。除了避免世界末日场景之外，您还可以独立水平扩展每个组件。

考虑到这一点，现在让我们继续讨论您的特定用例。为层而建的层仍然让我对周围的一些 Java EE 架构感到噩梦。它不仅引入了不必要的延迟，而且还使查明问题变得更加困难。如果您的服务失败，是由 Web 服务器、Android 应用程序还是 Web 服务引起的？

如果您想要代码重用，请重用代码而不是复制组件。这就是图书馆的用途。将您的公共代码提取为库，并在 Web 服务器和 Android 应用程序中使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T16:38:59.213

我认为最好的办法是制作一个轻量级的网页，该网页在加载后直接从浏览器中使用 Web 服务（就像任何应用程序一样）。

所以 App 和 Webpage 的唯一区别是，每次用户访问时，浏览器都会加载该网页。

# c++ - c++ visual studio cout返回字符串

> ID：12555576
> 
> 赞同：-1
> 
> 时间：2012-09-23T19:32:30.127
> 
> 标签：c++, windows, visual-studio-2010

我是使用 C++ 为 Windows 编程的新手。

我在 Linux 中使用 G++ 编译器成功编译了此代码，在 Windows XP 中使用 Mingw 编译器成功编译了此代码。

代码： ![在此处输入图像描述](../Images/34d2508d2b62125c23ee2bf8b56721a2.png)

我这样称呼这个函数：

![在此处输入图像描述](../Images/b02ea3054b77a8537751c8d8dbc24b47.png)

但是当我尝试在 Windows 7 上使用 VS C++ 2010 编译它时，我会抱怨：

![在此处输入图像描述](../Images/49e1458bbd683b2f512543301f70d806.png)

我不明白为什么会这样。这个视觉工作室太奇怪了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T19:36:37.610

标`std`头可以相互包含，但不强制规定哪些标头应该包含哪些。您最安全的选择是：

```
#include <iostream>
#include <string> 
```

在文件的顶部。

我的猜测是编译代码的编译器间接包含了这些头文件，而 VS 没有。这很好。程序员负责包括他需要的所有标题。

# macos - 找不到相关命令

> ID：12555578
> 
> 赞同：0
> 
> 时间：2012-09-23T19:32:33.167
> 
> 标签：macos, terminal

我对 Mac 终端环境很陌生。我下载了 sqlplus（它被识别为 UNIX 可执行程序），然后在终端中执行 cd 几次，直到我到达在这种情况下将其放入 (\Applications\instantclient_10) 的文件夹。当我输入“ls”时，我会看到包括 sqlplus 在内的所有文件的列表。所以我希望简单地在 Telnet 提示符 'sqlplus' 处输入，然后这会开始，但会继续

> -bash：sqlplus：找不到命令

这是问题一。

我现在已经下载了 MySQL，当我转到正确的文件夹 (\Library\StarupItems\MySQLCOM) 并输入“ls”时，我看到了我的文件（包括 MySQLCOM），但是当我尝试通过简单地“运行”它时再次输入“MySQLCOM”，消息是：

> -base：MySQLCOM：找不到命令

我究竟做错了什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T19:34:37.083

要在当前文件夹中运行二进制/可执行文件，您需要在它们前面加上 ./

```
./sqlplus 
```

这里的想法是您要强制执行本地文件而不是意外运行它。想象一下将`ls`二进制文件放入其文件夹的应用程序，如果在该文件夹中放入，它将自动运行`ls`。

# regex - 重定向的正则表达式

> ID：12555579
> 
> 赞同：-2
> 
> 时间：2012-09-23T19:33:07.740
> 
> 标签：regex, .htaccess, redirect

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T23:53:07.643

如果这是您正在谈论的python，您可以使用[re.sub](http://docs.python.org/library/re.html)来替换任何出现的

```
website.com\\tags\\.+ 
```

和

```
website.com

s1 = "www.website.com\tags\1234"
s1 = re.sub('website.com\\tags\\.+', "website.com", s1") 
```

**.+**检查字符串的 tags\ 部分之后的任何字符。如果存在，请将整个字符串替换为**website.com**

这只是一个 python 解决方案，但它应该适用于在其正则表达式库中具有替换功能的任何语言。无论如何，如果它是您好奇的正则表达式，那么您正在寻找**website.com\\tags\\.+**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T00:42:03.210

不知道你到底在问什么，但听起来你想要这样的东西：

```
RedirectMatch ^/tags/ / 
```

这正是这样做的：

> 基本上我想重定向 /tags/ t 主网站之后的任何内容。

假设您所说的主要网站是**website.com/**

# c++ - How to make C++ menu text

> ID：12555581
> 
> 赞同：0
> 
> 时间：2012-09-23T19:33:28.110
> 
> 标签：c++, text, menu

I'm making a text based adventure game. I want to have the game name (marooned) in large or made out of lines. How can I do this?

An example of what I want is something like this:

> ╔═╗╔═╗───╔╗────────╔╗────╔╗─╔╗──╔╗╔╗────╔═══╦╗ ║║╚╝║║───║║────────║║────║║─║║──║║║║────╚╗╔╗║║ ║╔╗╔╗╠══╦╣║╔╦══╦╗─╔╣║╔══╗║╚═╝╠══╣║║║╔══╗─║║║║╚═╦══╦══╦══╗* ║║║║║║╔╗╠╣╚╝╣╔╗║║─║║║║╔╗║║╔═╗║║═╣║║║║╔╗║─║║║║╔╗║╔╗║╔╗║║═╣ ║║║║║║╔╗║║╔╗╣╔╗║╚═╝║╚╣╔╗║║║─║║║═╣╚╣╚╣╔╗║╔╝╚╝║║║║╚╝║╚╝║║═╣ ╚╝╚╝╚╩╝╚╩╩╝╚╩╝╚╩═╗╔╩═╩╝╚╝╚╝─╚╩══╩═╩═╩╝╚╝╚═══╩╝╚╩══╣╔═╩══╝ ───────────────╔═╝║───────────────────────────────║║ ───────────────╚══╝───────────────────────────────╚╝

but more visible. And also when this is compiled it comes out in `?`'s. So I need the text to be compiler friendly.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T20:07:26.170

在 Windows 上，使用宽字符串文字：

```
wchar_t * titleStr= L"╔═╗╔═╗───╔╗────────╔╗────╔╗─╔╗──╔╗╔╗────╔═══╦╗\n"
                    L"║║╚╝║║───║║────────║║────║║─║║──║║║║────╚╗╔╗║║\n"
                    L"║╔╗╔╗╠══╦╣║╔╦══╦╗─╔╣║╔══╗║╚═╝╠══╣║║║╔══╗─║║║║╚═╦══╦══╦══╗*\n"
                    L"║║║║║║╔╗╠╣╚╝╣╔╗║║─║║║║╔╗║║╔═╗║║═╣║║║║╔╗║─║║║║╔╗║╔╗║╔╗║║═╣ \n"
                    L"║║║║║║╔╗║║╔╗╣╔╗║╚═╝║╚╣╔╗║║║─║║║═╣╚╣╚╣╔╗║╔╝╚╝║║║║╚╝║╚╝║║═╣ \n"
                    L"╚╝╚╝╚╩╝╚╩╩╝╚╩╝╚╩═╗╔╩═╩╝╚╝╚╝─╚╩══╩═╩═╩╝╚╝╚═══╩╝╚╩══╣╔═╩══╝ \n"
                    L"───────────────╔═╝║───────────────────────────────║║ \n"
                    L"───────────────╚══╝───────────────────────────────╚╝\n"
std::wcout<<titleStr; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T20:05:11.350

有多种方法可以做到这一点。

最简单的方法是 cout (char)< [ASCII](http://en.wikipedia.org/wiki/ASCII) character code here> 这将允许您打印这些边框字符而不是下划线和破折号。

[ASCII](http://en.wikipedia.org/wiki/ASCII)字符及其代码列表位于[http://www.cplusplus.com/doc/ascii/](http://www.cplusplus.com/doc/ascii/)。

您还可以尝试将所有文​​本转储到单独的文本文件中，读取并解析文件，然后将其打印到控制台。

像这样的东西：

```
#include <iostream>
#include <fstream>
#include <string>

int main() {
    std::ifstream reader("art.txt"); //Load the text
    std::string art = parseart(reader); //Parse the file
    std::cout << art << std::endl; //Print

    reader.close();
    return 0;
}

std::string parseart(std::ifstream& File) {
   std::string parsedfile;

   if(File) {
       while(File.good()) {
           std::string tmpline;
           std::getline(File, tmpline);
           tmpline += "\n";

           parsedfile += tmpline;
       }
       return parsedfile;
   } else {
       //Error
   } 
```

# .net - How to Bind DataGrid Header

> ID：12555582
> 
> 赞同：1
> 
> 时间：2012-09-23T19:33:34.917
> 
> 标签：.net, wpf, datagrid

Cannot get the `ComboBox` in the `DataGridTextColumn.Header` to bind.
The first stand alone `ComboBox` binds fine.
Fields is just `Public List<String>`.

```
<StackPanel Orientation="Vertical">
    <ComboBox ItemsSource="{Binding Path=Fields}"/>
    <DataGrid ItemsSource="{Binding Path=MyRows}" AutoGenerateColumns="False" >
        <DataGrid.Columns>
            <DataGridTextColumn Width="80" Binding="{Binding Col1}">
                <DataGridTextColumn.Header>
                    <StackPanel>
                        <TextBlock Text="Header1" />
                        <ComboBox Width="60" ItemsSource="{Binding Path=Fields}" />
                    </StackPanel>
                </DataGridTextColumn.Header>
            </DataGridTextColumn>
        </DataGrid.Columns>
    </DataGrid>
</StackPanel> 
```

```
private List<string> fields = new List<string> { "aa", "bb", "cc" };
public List<string> Fields { get { return fields; } } 
```

even tried making Fields a Property of MyRow

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T20:46:59.490

如果您在 DataGrid 上使用从 Window 继承的 DataContext，它应该可以工作。

```
<ComboBox Width="60"
          ItemsSource="{Binding Path=DataContext.Fields, 
          RelativeSource={RelativeSource AncestorType=DataGrid}}" /> 
```

# php - 对于二维数组 ERROR=Fatal error: Cannot use string offset as an array in PHP

> ID：12555589
> 
> 赞同：-1
> 
> 时间：2012-09-23T19:34:07.910
> 
> 标签：php, arrays

> **可能重复：**
> [“不能将字符串偏移量用作数组”错误](https://stackoverflow.com/questions/2058635/cannot-use-string-offset-as-an-array-error)

```
 <?php

        $marks  = 0;
        $total  = $_POST["lines"];
        $quesA  = $_POST["ques"];
        $quesNo = 1;
        $opt    = array("","A","B","C","D");

        for ($i = 0; $i < $total; $i++)
        {
            $q = $quesA[$i][0]; // here error

    ... 
```

在这里，我现在分配`$quesA = $_POST["ques"];`它需要一个变量`$q = $quesA[$i][0];`，然后在线打印

```
echo "<div><b style='color:red;'>Q" . $quesNo . " : </b>"
     . "<span style='color:blue;'>" . $q ."</span></div>"
; 
```

这是我的代码：[https ://dl.dropbox.com/u/24972447/onlineQuiz.7z](https://dl.dropbox.com/u/24972447/onlineQuiz.7z)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T19:41:22.350

后

```
$quesA=$_POST["ques"]; 
```

$quesA 是一个字符串，而不是多维数组，因此 $quesA[$i] 为您提供字符串的第 (i+1) 个字符（错误消息的“字符串偏移量”）。

您不能对此使用索引运算符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T19:41:36.393

问题是这`$quesA[$i]`不是一个有效的数组，您正试图像数组一样使用它。

我不确定你是如何得到的，`$_POST["ques"]`但你需要确保它是一个数组，然后才能访问它。

发布您的期望，`$_POST["lines"]`我`$_POST["ques"];`可能会提供进一步的帮助

# javascript - 一元运算符函数表达式比 Firefox 中的括号函数表达式快约 5261%

> ID：12555591
> 
> 赞同：0
> 
> 时间：2012-09-23T19:34:15.500
> 
> 标签：javascript, performance, firefox

在这个[测试](http://jsperf.com/function-expressions)中，我正在研究两种不同的函数表达方式；使用感叹号一元运算符和使用括号。

以下是2个测试：

```
var f = !function() {};

var f = (function() {}); 
```

鉴于下面的结果，当我看到一元运算符测试比 Firefox 中的括号测试快约 5261% 时，我很感兴趣。

![在此处输入图像描述](../Images/4e6520bfb8882526c6bbeee68f0ed340.png)

![在此处输入图像描述](../Images/059832bc8903dd7e9a7e97420af5fc79.png)

什么样的优化可以使 Firefox 的性能得到如此显着的提升，让其他浏览器相形见绌？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T19:47:48.700

第一个结果是 a `boolean`，第二个结果是 a `function`。您的测试似乎没有太大的现实意义。

> *“正在进行什么样的优化才能使 Firefox 的性能显着提高，使其他浏览器相形见绌？”*

我想 Firefox 有一个优化，可以避免创建函数对象，因为它从未实际使用过，但这只是一个猜测。

* * *

[这是一个更新的 jsPerf](http://jsperf.com/function-expressions/3)。这个添加了两个创建布尔值的测试。请注意，它们非常接近 Firefox 中的“感叹号”测试。

这支持了 Firefox 具有这种特殊优化的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T18:36:01.093

在“感叹号”的情况下，您每秒大约进行 1e9 次操作。您的 CPU 可能每秒执行大约 1-40 亿个时钟滴答。所以这种情况大约需要 1-4 个时钟滴答。

这意味着整个事情都被 JIT 优化为“f = false”。很可能是因为类型推断检测到一元“！” 后面总是跟一个对象，并将其优化为“假”。

在 Chrome 中速度较慢的一个原因是，在 Chrome 中，存在一元“！”的对象。返回 true，所以我上面描述的优化在那里是无效的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T19:45:35.953

如果你把它放在一个更“真实”的例子中，那么区别就不再重要了。

这些表达式最有可能用于创建外部函数上下文以从全局上下文中封装您的代码，例如

```
!function() {
}();

(function() {
}()); 
```

在此处查看结果：http: [//jsperf.com/function-expressions/2](http://jsperf.com/function-expressions/2)

实际上，您在那里的引擎工作量加倍。但是将函数分配给变量会隐式创建*函数表达式*

```
var f = function() {}; 
```

同样应用`!`运算符，是不必要的工作。

# vba - 电源点 VBA。幻灯片启动事件

> ID：12555592
> 
> 赞同：0
> 
> 时间：2012-09-23T19:34:21.490
> 
> 标签：vba, slideshow, powerpoint

我需要帮助。如果我可以向我的幻灯片添加加载事件（使用**VBA**），请向我解释。示例：当我加载幻灯片 3 时，要执行一个宏。

那可能吗？如果是，该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T18:33:03.140

您希望这发生在幻灯片视图还是普通编辑视图中？

如果在幻灯片视图中，最简单的方法可能是添加您自己的触发宏的导航按钮，例如：

```
Sub NextSlide()

    ' go to the next slide
    ActiveWindow.View.GotoSlide (SlideShowWindows(1).View.GotoSlide(SlideShowWindows(1).View.Slide.SlideIndex))

    ' and insert whatever code you like here:

End Sub 
```

# visual-studio-2010 - 带有Visual Studio 2010错误的opencv

> ID：12555594
> 
> 赞同：0
> 
> 时间：2012-09-23T19:34:26.100
> 
> 标签：visual-studio-2010, opencv

我正在尝试构建我的第一个 opencv 应用程序，我添加了包含目录和库目录，然后在运行此代码后添加了一些 opencv.lib 文件的链接输入：

```
#include <opencv2/highgui/highgui.hpp>
#include <iostream>

using namespace cv;
using namespace std;

int main()
{
    Mat im = imread("c:/full/path/to/lena.jpg");
    if (im.empty()) 
    {
        cout << "Cannot load image!" << endl;
        return -1;
    }
    imshow("Image", im);
    waitKey(0);
} 
```

但我收到了这个错误：

> 程序无法启动，因为您的计算机中缺少 libgcc_s_dw2-1.dll。

错误列表包括：

> 警告 1 警告 D9002：忽略未知选项 '-static-libgcc' c:\Users\Kato\documents\visual studio 2010\Projects\cvtest\cvtest\cl cvtest

我将 -static-libgcc 添加到命令行附加选项，但同样的错误。

# python - 找不到 cv.Point

> ID：12555601
> 
> 赞同：0
> 
> 时间：2012-09-23T19:34:46.410
> 
> 标签：python, opencv

当我运行项目时，这会返回我 AttributeError: 'module' object has no attribute 'Point'

```
 import cv
  from PIL import Image
....
  while True:
            frame = cv.QueryFrame(capture)
            storage = cv.CreateMemStorage()
            haar=cv.Load('haarcascade_frontalface_alt.xml')
            detected = cv.HaarDetectObjects(frame, haar, storage, 1.2, 2,cv.CV_HAAR_DO_CANNY_PRUNING, (100,100))
            if detected:
                 for face in detected:
                  # print face
                   pil_img = Image.fromstring("L", cv.GetSize(frame), frame.tostring())

                   cv_img = cv.CreateImageHeader(pil_img.size, cv.IPL_DEPTH_8U, 3)
                   cv.SetData(cv_img, pil_img.tostring())
                   cv.Rectangle(cv_img, cv.Point( int(i.x), int(i.y)),
                       cv.Point(int(i.x + i.width), int(i.y + i.height)),
                       cv.RGB(0, 255, 0), 3, 8, 0) # this code return error.

                   cv.WriteFrame(stream,  cv_img) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T05:54:49.403

首先，如果您获得回溯，请*粘贴整个回溯*。那里有很多对调试至关重要的有用信息。

其次，该错误的含义正是它所说的：您的代码正在引用`cv.Point`，并且在`cv`名为`Point`. 这通常意味着以下两件事之一：

1.  您没有使用正确版本的 OpenCV，或者
2.  您已经创建了一个名为的本地文件`cv.py`，它掩盖了您尝试导入的模块。

# c# - EF 5 - 集合已修改；枚举操作可能无法执行

> ID：12555602
> 
> 赞同：0
> 
> 时间：2012-09-23T19:34:48.603
> 
> 标签：c#, .net, entity-framework, dbcontext, entity-framework-5

我想使用 Entity Framework 5 将一些测试数据插入到我的数据库中。它工作正常 - 仅当我**取消注释**1 行代码时：

```
var query = DbContext.Set<User>().AsQueryable();
query = query.Include("Tabs.Boxes");
query = query.Where(u => u.Name == "test_guy");
User test_guy = query.Single();

Tab mainTab = new Tab() 
{ 
    TabName = "Main tab",
    Order = 1,
};
Tab otherTab = new Tab()
{
    TabName = "Test Guy's another tab",
    Order = 2
};

test_guy.Tabs.Add(mainTab);
test_guy.Tabs.Add(otherTab);

DbContext.SaveChanges();   // --> If I comment this out, everything breaks!

mainTab.Boxes = new Boxes();
for (int i = 0; i < 10; i++)
{
    Box box1 = new Box()
    {
        Author = test_guy
    };
    mainTab.Boxes.Add(box1);
}

DbContext.SaveChanges(); 
```

如果我**注释掉**SaveChanges 调用，我会得到一个异常： `Collection was modified; enumeration operation may not execute.`

我只想知道，这种行为的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T23:30:13.097

在将 mainTab 添加到 test_guy 之前尝试将框添加到 mainTab，并且只调用一次 savechanges() 方法，如下所示：

```
var query = DbContext.Set<User>().AsQueryable();
query = query.Include("Tabs.Boxes");
query = query.Where(u => u.Name == "test_guy");
User test_guy = query.Single();

Tab mainTab = new Tab() 
{ 
    TabName = "Main tab",
    Order = 1,
};
Tab otherTab = new Tab()
{
    TabName = "Test Guy's another tab",
    Order = 2
};

mainTab.Boxes = new Boxes();
for (int i = 0; i < 10; i++)
{
    Box box1 = new Box()
    {
        Author = test_guy
    };
    mainTab.Boxes.Add(box1);
}

test_guy.Tabs.Add(mainTab);
test_guy.Tabs.Add(otherTab);

DbContext.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:52:19.390

我有同样的例外 - 在我的情况下，原因是 dbModel 上的关联重复。

# installation - 无法为 Python 3.2.3 Windows 64 位下载 python idle

> ID：12555606
> 
> 赞同：1
> 
> 时间：2012-09-23T19:35:06.590
> 
> 标签：installation, python-idle, python-3.2

我需要 Python 的逐行调试器。我想我应该从空闲开始。我去了 python.org 并下载了适用于 64 位 Windows 的 Python 3.2.3。大多数 Python 文档都声明所有安装都会自动下载 IDLE。我在 c:\Python32 中安装了 Python。我在此文件夹或其任何子文件夹中看不到 idle.exe 或任何名为 idle 的文件夹。然后我搜索了谷歌并试图看看我如何下载空闲。似乎没有单独的空闲下载——或者没有一个与 64 位匹配的下载。

你能推荐最快的解决方案吗？

1.  为 Windows 64 位安装不同的版本（这会破坏我的 3.2.3 安装吗？）
2.  放弃 IDLE 安装不同的 IDE（尝试了 PyScripter，但无法弄清楚如何一步一步进行逐行调试。PyScripter 远不如 Visual Studio，但它是免费的。）尝试了 pythonfiddle，但无法弄清楚如何设置断点。尝试了 pythontutor 并且无法弄清楚如何设置断点。

回答这个问题（由于声誉低，我不能发布这个答案。）

www.udacity.com 上的某个人为我提供了答案！答案是您通过键入来启动空闲`pythonw c:\python32\lib\idlelib\idle.py`

一百万年后我永远不会想到这一点！我假设空闲是一个可执行文件。相反，它是一个 python 脚本。

我还了解到，其他版本的 python 不会破坏您的安装，它们只是最终位于不同的文件夹中。

我从堆栈溢出中了解了带有 Pydev 的 Aptana studio 和带有 Python 的 Visual Studio 10。因此，如果空闲对我不起作用，我将尝试这些空闲应用程序。

# css - 奇怪的 Chrome 背景图像被切断

> ID：12555612
> 
> 赞同：1
> 
> 时间：2012-09-23T19:35:35.267
> 
> 标签：css, google-chrome, background-image

在我的网站上，我有一个带有由背景图像和 jQuery 悬停事件制成的按钮的标题。问题是，仅在 Chrome 和 Chrome 中（在我的测试中），当将鼠标悬停在按钮上时，悬停图像会被略微切断大约一个像素。我已经对其进行了一些测试，并意识到它仅在有滚动条时才会出现（为了保持一致性，我添加了 overflow-y: scroll to my all pages）。如果我从宽度中减去半个像素，问题就解决了，但它也会弄乱边距。背景图像大小相同，均为 102x42 像素。

这是我的 CSS 和[我网站的链接](http://techwiq.com/home.php)：

```
.menubutton
{
margin:0px auto;
margin-top:-10px;
background:url('../img/buttons/menureg.png');
width:102px;
height:32px;
display:block;
color:#6F6F6F;
font-size:16px;
text-shadow: 0px 0px 1px rgba(0,0,0,0.2);
padding-top:10px;
text-decoration:none;
}
.menubutton:hover
{
background:url('../img/buttons/menuhover.png');
color:#E0E0E0;
text-shadow: 0px 0px 1px rgba(0,0,0,0.75);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T20:27:47.950

我确认了这个错误，就像兰迪一样，我认为这是 chrome 的问题，而不是你的代码。似乎问题出现和消失是因为页面的宽度，如果我调整窗口大小，问题就会出现和消失。

经过一些试验和错误后，问题似乎部分来自封装菜单按钮的 size td 元素。在尝试了一些事情之后，我找到了一个解决方法。由于您知道 td 元素和菜单按钮的大小，因此不需要自动边距。所以：

```
.menubutton
{
margin:0px 24px;
margin-top:-10px;
background:url('../img/buttons/menureg.png');
width:102px;
height:32px;
display:block;
color:#6F6F6F;
font-size:16px;
text-shadow: 0px 0px 1px rgba(0,0,0,0.2);
padding-top:10px;
text-decoration:none;
} 
```

你能在你身边测试一下，看看它是否能解决问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T20:16:37.647

我看到了你的问题，但它看起来像一个 chrome 错误，而不是代码错误。四分之二的元素有正确的悬停背景，所以有点奇怪。您可以尝试在悬停时再次设置元素的宽度，或者使元素宽 1px 并设置 background-repeat:none; 显示额外的像素。虽然不好的解决方案..

# database - WordPress网站中的字符问题

> ID：12555613
> 
> 赞同：2
> 
> 时间：2012-09-23T19:35:44.003
> 
> 标签：database, wordpress, character, woocommerce

我的 WordPress 网站有问题（它是瑞典语）。出于某种原因，我在写帖子时不能使用所有字符 - 字符 å、ä 和 ö 变成了 Ã¥ Ã¤ Ã¶。该网站是一个网上商店，我安装了 Woocommerce 插件。åäö 的相同问题出现在 Woocommerce 的长产品描述中。

有谁知道我能做些什么来解决这个问题？WordPress 管理面板中的字符编码设置为 UTF-8，wp-config 中的数据库字符集也是如此。

在 phpmyadmin 的数据库中，wp-posts 表的排序规则设置为“utf8_general_ci”。那是问题吗？

这件事以前从来没有发生在我身上，尽管我过去建立了很多 WP 网站。因此我不知道该怎么办。也许解决方案很简单，但我想在做任何事情之前知道我在做什么，这样我就不会冒险弄乱网站。

非常感谢一些帮助，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T23:59:49.470

当“国家特殊字符”时，即。非 ASCII 字符，显示错误，您可能有与 charset 相关的错误。解决此问题的最简单方法通常是确保您在任何地方都使用 UTF-8。

（特别是对于瑞典语，您可以使用 ISO-8859-1（最差）、ISO-8859-15（更好）或 UTF-8（最好）。）

您需要在任何地方使用相同的字符集，从数据库到 HTML 声明。

1.  在您主题的 header.php 文件中，请确保声明的字符集是 UTF-8。
2.  在您的文本编辑器或服务器上，请确保您的主题文件保存为 UTF-8。
3.  在 MySQL 中，请确保表模式设置为使用 utf-8。
4.  在 MySQL 中，请确保连接默认使用 UTf-8：`mysql --default-character-set=utf8`
5.  在 PHP 中，尝试使用[mysqli_set_charset将连接设置为 utf-8](http://php.net/manual/en/mysqli.set-charset.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-22T06:31:36.193

为了修复 WordPress 中的字符编码不匹配问题，请在文本编辑器中打开“wp-config.php”文件（wp-config.php 文件可以在您安装 WordPress 的目录中找到）。找到以下两行并将它们注释掉：

```
define(‘DB_CHARSET’, ‘utf8′);
define(‘DB_COLLATE’, ”); 
```

注释掉它们后，它们应该如下所示：

```
//define(‘DB_CHARSET’, ‘utf8′);
//define(‘DB_COLLATE’, ”); 
```

现在将更新的“wp-config.php”文件上传到您的虚拟主机。

这个字符编码问题也可能在数据库升级后发生，所以为了以防万一，记住这个技巧并没有什么坏处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-25T07:25:05.110

在另一种情况下，**如果您在**某处使用 PHP Dom (loadHTML)，则需要将 HTML 加载为 UTF-8。我已通过以下方式**修复**它：

更换

```
@$dom->loadHTML($html); 
```

至

```
@$dom->loadHTML('<?xml encoding="UTF-8">' . $html); 
```

# qt - 如何在选择父项时移动子 QGraphicsItem？

> ID：12555616
> 
> 赞同：2
> 
> 时间：2012-09-23T19:36:10.077
> 
> 标签：qt, qt4, qgraphicsview

我试图`QGraphicsView`通过实现一个图表式应用程序来扩展我的 Qt 知识。目前我可以使用手柄选择、拖动和缩放矩形。`HandleItem`s 是 a 的子级，而 a又会`ManipulatorItem`影响 a`DiagramItem`的选择。我想通过仅在选择项目时显示句柄来改进这一点。我的问题是这样的：

1.  如果选择了该项目，则不会调用`itemChanged()`in`HandleItem`
2.  如果设置了句柄项目`ItemIsSelectable`标志，它可以工作，但原始项目显然被取消选择。

我的问题是：是否可以在仍选择父级时向子级发送几何更改？此外，句柄项也可能位于父项的边界矩形之外。

具有以下`DiagramItem`标志：

```
setFlags(ItemIsMovable | ItemIsSelectable); 
```

具有以下`HandleItem`标志：

```
setFlags(ItemIsMovable | ItemSendsGeometryChanges); 
```

# html - 处理大页面加载

> ID：12555620
> 
> 赞同：3
> 
> 时间：2012-09-23T19:36:54.500
> 
> 标签：html, image, loading

我有一个基本上是一个大页面的网站，它是一本翻书（[由 jQuery Booklet 插件提供支持](http://builtbywill.com/code/booklet/)），有 50 页，每页都有艺术品。此页面的大小在 6 - 7mb 之间。这有点大，慢速连接可能需要一段时间才能加载页面。我正在考虑将这本书分成多个类别（因此有多个较小的页面），但同时我有这两个问题：

*   处理包含大量内容的页面加载的最佳方法是什么？

*   大型网站如何处理这些问题？

注意：我*不能*为页面上的图像使用精灵。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T20:03:10.073

尝试使用图像优化器压缩图像文件，例如 Kraken： http: [//kraken.io/](http://kraken.io/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T19:38:58.353

您可以尝试延迟加载图像 (http://www.appelsiini.net/projects/lazyload) - 图像在页面上可见之前不会被请求。

另一种选择是使用`change`小册子脚本中的事件来使用 AJAX 加载该页面的内容。这样，最初不需要下载所有内容，但是在客户端更改页面时会出现一些延迟。

```
$(".selector").booklet({
    change: function(event, data) { ... }
}); 
```

大多数具有“无限”滚动功能的大型网站（例如 Facebook）使用 AJAX 仅在需要时加载更多内容。

# css - 滚动页面不是仅 div CSS

> ID：12555621
> 
> 赞同：0
> 
> 时间：2012-09-23T19:37:14.337
> 
> 标签：css, html, scrollbar

我已经为这个问题苦苦挣扎了很长时间，虽然我找到了一些很好的解决方案来解决我的部分问题，但它们似乎都没有结合起来，所以我决定问你。

这是该网站的屏幕截图：

[http://i.stack.imgur.com/6C0k1.jpg](http://i.stack.imgur.com/6C0k1.jpg)

我希望实现的是当内容溢出蓝色容器时页面的最右侧出现一个滚动条，其中包含我所有内容的 div，而不是 div 本身的最右侧，就像它会如果我将 div 设置为*overflow: auto*或*overflow: scroll*。

换句话说，我希望页面滚动，而不是我的 div。

该站点基本上由一个主体背景、一个用于菜单的 div 和一个用于内容的 div 组成。代码很乱，所以我把它省略了，但是如果你需要它，只需发表评论，我会立即添加它。

除了右侧蓝色容器中的内容外，所有内容都应该像在 scrn 镜头上一样被修复。我最初认为将除容器之外的所有内容设置为*position:fixed*将起作用并触发滚动条出现在可用于滚动 div 的页面上，但事实并非如此。但这不起作用，因为容器中的任何可见溢出只会“离开”页面；它不会触发滚动条。

正如我在 scrn 镜头中所指出的那样，container-div 在顶部和底部都有填充，并且也略微透明。

这两个功能似乎使事情变得更加困难。填充，因为设置*溢出：视觉*使内容溢出，因此即使通过填充也是可见的。透明度是一个问题，因为我不能只*剪掉*填充并给它一个高于内容本身的 z-index 来隐藏它；它仍然可以通过它看到。背景图像设置为百分比或设置为“覆盖”（仍在确定哪个效果最好），因此用它覆盖的背景图像的部分切掉填充也不起作用。

我希望我足够清楚地提出我的问题和问题。如果您有任何问题或任何反馈，请发表评论。

预先感谢您的任何回复，马格努斯

**注意：**这是一个早期问题的转贴，该问题被那些在对其进行评分之前没有正确阅读它的人丢弃。这个问题后来基本上消失了。这次我尽量把事情说得更清楚，所以如果我重复自己的话，我很抱歉。这也是我这次的帖子这么长的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T19:49:54.413

像这样的东西？

**演示**：http: [//jsfiddle.net/6R7c2/](http://jsfiddle.net/6R7c2/)

HTML：

```
<div id="top">Top</div>
<div id="middle">
    <div>Content
    </div>
</div>
<div id="bottom">Bottom</div> 
```

CSS：

```
html,body{
    width:100%;
    height:100%;
    margin:0;
}
#top,#bottom{
    height:10%;
    background:blue;
    color:white;
}
#middle{
    height:80%;
    overflow:auto;
}

#middle>div{
    height:10000px;
    border:25px solid red;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T19:55:42.393

它可以是这样的

见[http://jsfiddle.net/QfsvB/](http://jsfiddle.net/QfsvB/)

**CSS**

```
div.scroll 
{
background-color:#00FFFF;
width:100px;
height:100px;
overflow:scroll;
} 
```

**HTML**

```
<div class="scroll">You can use the overflow property when you want to have better control of the layout, the overflow property specifies what to do if the content of an element exceeds the size of the element's box.</div> 
```

# express - this.user 中的 NowJS cookie 字段为空

> ID：12555626
> 
> 赞同：0
> 
> 时间：2012-09-23T19:38:04.323
> 
> 标签：express, nowjs-sockets

根据这些：[https :](https://gist.github.com/2266544) [//gist.github.com/2266544，Now.js 中的会话](https://stackoverflow.com/questions/9066834/session-support-in-now-js)支持。

此代码应返回 NowJS clientId、cookie 和会话：

```
nowjs.on('connect', function() { console.log(this.user); }) 
```

然而，我得到的是：

{ clientId: '东西', cookie: { } }

cookie 字段为空。没有会话条目（我读的是官方问题）。

**附加信息**

我也在使用 ExpressJS、PassportJS、Mongoose、session-mongoose。我在配置 Express 后初始化了 NowJS。

**问题**

为什么我的 cookie 字段为空，如何填充？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T00:28:42.940

经过几个小时的挫折后，我发现 cookie 没有被发送，因为我正在监听端口 3000，这被认为是跨域请求。被监听的端口必须是设置 cookie 的 http 服务器。

我正在使用 Dreamhost，它有 Apache 监听端口 80，我们不允许解除绑定或绑定到端口 80。但我能够通过监听端口 8080 来解决这个问题。

设置为监听 8080 端口时，cookie 发送成功。

**编辑**

这只工作了很短的时间。不知道为什么。一段时间后停止发送 Cookie。

**编辑 2**

在我设置代理转发 80 到 8080（谷歌为“dreamhost 代理”）后，这再次起作用。本质上是把 Apache 放在 Node.js 前面。

# python - Python 3：解压列表的星号表达式

> ID：12555627
> 
> 赞同：48
> 
> 时间：2012-09-23T19:38:20.103
> 
> 标签：python, python-3.x, argument-unpacking

示例使用：

```
def f(a, b, c, d): 
    print(a, b, c, d, sep = '&')

f(1,2,3,4)
>>> 1&2&3&4

f(*[1, 2, 3, 4])
>>> 1&2&3&4 
```

python文档在哪里`*`解释？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-09-26T09:01:56.820

`*args`调用约定记录在表达式[参考中](http://docs.python.org/dev/reference/expressions.html#calls)：

> 如果语法`*expression`出现在函数调用中，则`expression`必须计算为可迭代。来自这个可迭代的元素被视为附加的位置参数；如果有位置参数*x1, ..., xN*并且`expression`计算结果为序列*y1, ..., yM*，则这等效于使用 M+N 位置参数*x1, ..., xN, y1, ..的调用., yM* .

因此，由于您用作`[1, 2, 3, 4]`可迭代的表达式，并且没有其他位置参数，因此它被视为 M=0 和 N=4 的调用，总共有 4 个位置参数。

因此，您也可以将您的函数称为`f(1, 2, *[3, 4])`可迭代参数和位置参数的任何其他组合，前提是可迭代参数位于位置参数*之后*。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2021-03-25T15:15:53.807

只是非常简单地扩展了未命名和命名参数的组合。

这是您要记住的一般顺序：

```
def func(arg_1, ..., arg_N, *args, kwarg_1, ..., kwarg_M, **kwargs):
    # do stuff
    return True 
```

哪里，在最典型的情况下；

*   每个单曲`arg_i`都是一个未命名的参数，
*   `args`是一个列表，因此是一组未命名的参数，
*   每个单曲`kwarg_j`都是一个命名参数，
*   `kwargs`是一个字典，因此是一组命名参数。

# asp.net-mvc - 将 MVC 项目分离到不同的项目中？

> ID：12555636
> 
> 赞同：0
> 
> 时间：2012-09-23T19:39:10.293
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我正在使用 asp.net mvc 项目一段时间，最近想知道一些事情。我的控制器和模型以及事件视图是否应该拆分到单独的项目中？

这是为了实现应用程序的 ui 层的完全分离。我正在做的项目将是一个大规模的应用程序。

对此有何看法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T19:54:52.560

> 这是为了使应用程序的 ui 层完全分离

不，MVC 是前端层，如果您想将前端与应用程序的其余部分分开，则保留文件夹原样，并拥有单独的项目作为应用程序的其他部分。这些其他项目通常是数据访问层、业务层和领域对象层。

# objective-c - 对象上的自定义 init 方法以 initWithWindowNibName 和 NSWindowController 属性

> ID：12555639
> 
> 赞同：1
> 
> 时间：2012-09-23T19:39:17.427
> 
> 标签：objective-c, cocoa, nswindowcontroller

我想要做的是为打开一个窗口的对象创建一个方法。在这个窗口中，我想输出对象实例的一些属性。为此，我创建了一个 NSObject 的“Profile”子类，它有一个名为“view”的 NSWindowController 属性。

```
@interface Profile : NSObject {
    \\...
}

@property (readwrite, assign) NSWindowController *view; 
```

由于我无法使用 Interface Builder 将“视图”连接到窗口（或者至少我不知道如何），所以我必须使用“initWithWindowNibName”来连接。所以我尝试像这样覆盖“配置文件”的 init 方法：

```
-(Profile *)init{
    self = [super init];
    if(self){
        [[self view] initWithWindowNibName:@"Profile"];
    }
    return self;
} 
```

我不知道我的方法是否正确，事实是当我尝试显示它没有出现的窗口时。这是我尝试的方法：

```
Profile *profile = [[Profile alloc] init];
[[profile view] showWindow:self]; 
```

希望你能帮忙:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T00:26:27.757

你不想要这样的东西：

```
@interface Profile:NSObject

@property (nonatomic, strong) NSWindowController *windowController;

@end 
```

和：

```
- (Profile *)init {
    self = [super init];
    if( !self ) { return nil; }

    self.windowController = [[NSWindowController alloc] initWithWindowNibName:@"Profile"];
    return self;
} 
```

和：

```
// show window
Profile *profile = [[Profile alloc] init];
[[profile windowController] showWindow:self]; 
```

（我假设 ARC。）

**编辑：** 为了让 OP 清楚起见，我遵循了他的属性命名法，即命名`NSWindowController`属性`view`。这是令人困惑的，虽然因为 a`NSWindowController`不是一个视图。为了让其他人清楚，我已经改变了它。

# php - 如何将唯一 URL 链接到许多淡入淡出的图像

> ID：12555640
> 
> 赞同：1
> 
> 时间：2012-09-23T19:39:38.330
> 
> 标签：php, javascript, mysql

我是编码和这个网站的新手。我有一个 mysql 数据库，允许我添加图像和指向 URL 的链接。在我的网站上，这些图像淡入淡出，我想要做的是，当我将鼠标悬停在图像上时，我可以点击它，它应该将我带到在 mysql 数据库中为它排序的 URL。

到目前为止，我的代码只是淡入淡出，我需要它以某种方式获取图像的相关 ID，然后为其分配相应的 URL 链接。

非常感谢您对此的任何帮助！

谢谢。

```
<?php if($imgfading) { ?>
   <script type="text/javascript">
       $(function() {
          $('#imgfading').cycle({
            fx:      'fade', 
            speed:    1700,
            timeout: 2000
        });
       });
   </script>

   <div id="imgfading">
   <?php while($row=@mysql_fetch_assoc($imgresult)) { 
       $fln = "imgfading/FAD".$row['id'].".JPG";
       if(file_exists($fln)) {
          echo '<a href="'.$row['link'].'"><img src="'.$fln.'" width="100%" height="100%" alt="Featured in" border="0" />';
          echo '<a href="'.$row['link'].'"</a>';}
       }
} ?> 
```

# java - 如何在 SOAPFault 中设置 faultCode？

> ID：12555641
> 
> 赞同：8
> 
> 时间：2012-09-23T19:39:40.390
> 
> 标签：java, soap, soapfault

为什么我可以设置faulString，但不能在SOAPFault 中设置自定义故障代码？当我抛出异常时，SoapFaultException 中没有出现文本“代码 X”。谁能告诉我为什么？谢谢。

```
SOAPFault soapFault = SOAPFactory.newInstance(SOAPConstants.SOAP_1_1_PROTOCOL).createFault();
soapFault.setFaultString("String Y")
soapFault.setFaultCode("Code X");

throw new SOAPFaultException(soapFault); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-03-08T16:36:18.153

可以通过以下示例在soap响应中获取故障代码：

```
String faultString = "String Y";
String faultCodeValue = "Code X";
QName faultCode = new QName("nameSpaceURI", faultCodeValue);
SOAPFault soapFault = null;
try {
    soapFault = SOAPFactory.newInstance(SOAPConstants.SOAP_1_1_PROTOCOL).createFault(faultString, faultCode);
    throw new javax.xml.ws.soap.SOAPFaultException(soapFault);
} catch (SOAPException e1) {
    //
} 
```

我得到以下肥皂故障：

```
<?xml version="1.0" ?>
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
    <S:Body>
        <S:Fault xmlns:ns4="http://www.w3.org/2003/05/soap-envelope" xmlns="">
        <faultcode xmlns:ns0="nameSpaceURI">ns0:Code X</faultcode>
        <faultstring>String Y</faultstring>
        </S:Fault>
    </S:Body>
</S:Envelope> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T13:54:36.857

从[文档](http://docs.oracle.com/javaee/5/api/javax/xml/soap/SOAPFault.html#setFaultCode%28java.lang.String%29)：

> 给出有关故障的信息的故障代码在 SOAP 1.1 规范中定义。此元素在 SOAP 1.1 中是强制性的。因为故障代码必须是 QName，所以最好使用此方法的 setFaultCode(Name) 形式。
> 
> `faultCode`- a`String`给出要设置的故障代码。它必须是`"prefix:localName"`在命名空间声明中定义前缀的形式。

请注意，您设置的故障代码必须是以下格式：`prefix:localName`. 您正在设置：`Code X`，这就是您看不到它的原因。使用[此](http://docs.oracle.com/javaee/5/api/javax/xml/soap/SOAPFault.html#setFaultCode%28javax.xml.namespace.QName%29)方法，一切都应该没问题。

# python - Which strategy would be best: saving a value as a field or just computing it on hand with a method

> ID：12555646
> 
> 赞同：2
> 
> 时间：2012-09-23T19:40:27.223
> 
> 标签：python, mysql, django

Which of these two strategies would be better for calculating upvotes/downvotes for a post:

These are model fields:

```
ups
downs
total

def save(self, *args, **kwargs): # Grab total value when needed
    self.total = self.ups - self.downs
    super.(yourmodel, self).save(*args, **kwargs) 
```

Versus:

```
ups
downs

def total(ups, downs): # totals will just be computed when needed
    return ups - downs # versus saved as a column 
```

Is there really any difference? Speed? Style?

Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T19:43:55.387

I would do the latter. Generally, I wouldn't store any data that can be derived from other data in the database unless the calculation is time-consuming. In this case, it is a trivial calculation. The reason being that if you store derived data, you introduce the possibility for consistency errors.

Note that I would do the same with class instances. No need to store the `total` if you can make it a property. Less variables means less room for error.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T19:56:10.137

I totally agree with @Caludiu. I would go with the second approach, but as always there are pros and cons:

The first approach seems harmless but it can give you some headaches in future. Think about your application evolution. What if you want to make some more calculous derived from values in your models? If you would want to be consistent, you will have to save them too in your database and then you will be saving a lot of "duplicated" information. The tables derived from your models won't be normalized and not only can grow unnecessarily but increase the posibility of consistency errors.

On the other hand, if you take the second approach, you won't have any problems about database design but you could fall into a lot of tough django queries because you need to do a lot of calculus to retrieve the information you want. These kind of calculus are riddiculy easy as an object method (or message, as you prefer) but when you want to do a query like this in django-style you will see how somethings get complicated.

Again, in my opinion, you should take the second approach. But it's on you to make the desicion you think fits better on your needs...

Hope it helps!

# iphone - 从另一个类调用方法，uiwebview 和模态视图问题

> ID：12555648
> 
> 赞同：0
> 
> 时间：2012-09-23T19:41:06.667
> 
> 标签：iphone, xcode, webview, modalviewcontroller, uiapplicationdelegate

尝试从另一个类调用方法时遇到一些问题。这是我的代码

Appdelegate.m

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url{

if ([url isFileURL]){
       RootViewController *theview = [[RootViewController alloc] init];
       [theview handleOpenURL:url];
       }
       return YES;
  } 
```

RootViewController.h

```
 @interface RootViewController : UIViewController <UIWebViewDelegate>{
     IBOutlet UIWebView* mainwebView;
  }
- (void)handleOpenURL:(NSURL *)url;
@property (nonatomic, retain) UIWebView* mainWebView; 
```

根视图控制器.m

```
- (void)handleOpenURL:(NSURL *)url{

NSLog(@"Method handleOpenURL completed")

[mainwebView setDelegate:self];
[self.mainwebView loadRequest:[[NSurLRequest alloc] initWithURL:url];

[self performSelector:@selector(handleIt) withObject:nil afterDelay:3.0];
}

- (void)handleIt{
docView *docController = [[docView alloc] initWithNibName:nil bundle:nil];
[self presentModalViewController:docController animated:YES];
} 
```

所以，基本上我正在尝试更新 UIWebView，然后在 appdelegate 调用 handleOpenURL 后呈现模式视图控制器。问题是这两个东西（更新 webview 和呈现视图控制器）都拒绝在方法 handleOpenURL 中工作。它们在 viewdidload 中工作得非常好，这让我认为这与从 appdelegate 调用的方法有关。

当从 handleOpenURL 方法访问时，webview 只是拒绝响应，当我呈现模态视图控制器时，我得到了错误

```
 Warning: Attempt to present ... whose view is not in the window hierarchy! 
```

但是，当从 viewdidload 呈现时，模态视图再次工作正常（使用时间延迟选择器）

解释为什么会发生这种情况或解决方法会很好，感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T22:20:29.930

你必须`#import "docView.h"`在你的`RootViewController.m`.

```
 Warning: Attempt to present ... whose view is not in the window hierarchy! 
```

警告指出视图未被识别，这意味着您无法正确访问该类，如果它没有导入，那么您没有`docView.m`正确设置代码。

*如果这不起作用，那么我需要更多信息来帮助解决您的问题。*

* * *

***编辑澄清：***

*   app-delegate 在开始时和被指向时被调用，而不是一直被调用。
*   您应该在模态视图加载时调用它，方法指针（[self myFunctionNameHere];）可以正常工作。
*   所以这是您没有正确访问应用程序委托。
*   我认为你甚至不应该从 app-delegate 调用它，而是从你的 .m 调用它。

## 从您的 main(.m) 文件中调用它可以解决所有问题。

# java - 在 iReports 和 Jasper 以及 java bean 数据源中使用表格功能

> ID：12555651
> 
> 赞同：3
> 
> 时间：2012-09-23T19:41:30.993
> 
> 标签：java, jasper-reports, ireport

我现在花了 12 个小时的大部分时间试图弄清楚如何让图表和表格在 jasper 中工作。这篇文章是关于表格的（对于我的图表问题，可能是相同的问题，[请参见此处](https://stackoverflow.com/questions/12538967/jasper-reports-jrbeancollectiondatasource-cannot-be-resolved-to-a-type)）

我想使用 iReports 调色板中的表格工具制作一个包含两列的表格。我在**ProtoReport**数据对象列表中有一个**String的****List**（以前是一个**ArrayList**，但我现在正在尝试一个 List，因为我看过的教程之一使用了它，而且他们没有问题） 。ProtoReport**列表**是我包装在**JRBeanCollectionDataSource**中并传递给 JasperFill 的列表。我希望**tableData 列表**填充我的表的列之一。当我根据我对 Jasper 的有限经验让我*认为*我应该设置它时，我收到以下错误：

 *******```
net.sf.jasperreports.engine.JRException: Errors were encountered when compiling report expressions class file:
1\. net.sf.jasperreports.engine.JRBeanCollectionDataSource cannot be resolved to a type
            value = new net.sf.jasperreports.engine.JRBeanCollectionDataSource(((java.util.List)field_tableData.getValue())); //$JR_EXPR_ID=12$
                        <---------------------------------------------------->
2\. net.sf.jasperreports.engine.JRBeanCollectionDataSource cannot be resolved to a type
            value = new net.sf.jasperreports.engine.JRBeanCollectionDataSource(((java.util.List)field_tableData.getOldValue())); //$JR_EXPR_ID=12$
                        <---------------------------------------------------->
3\. net.sf.jasperreports.engine.JRBeanCollectionDataSource cannot be resolved to a type
            value = new net.sf.jasperreports.engine.JRBeanCollectionDataSource(((java.util.List)field_tableData.getValue())); //$JR_EXPR_ID=12$
                        <---------------------------------------------------->
3 errors

at net.sf.jasperreports.engine.design.JRAbstractCompiler.compileReport(JRAbstractCompiler.java:204)
at net.sf.jasperreports.engine.JasperCompileManager.compile(JasperCompileManager.java:240)
at net.sf.jasperreports.engine.JasperCompileManager.compile(JasperCompileManager.java:173)
at net.sf.jasperreports.engine.JasperCompileManager.compileReport(JasperCompileManager.java:448)
at org.reportprotojava.protosheet.Program.main(Program.java:134) 
```

这是我的jrxml：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="ReportPrototype.jrxml" pageWidth="595" pageHeight="842" columnWidth="495" leftMargin="57" rightMargin="43" topMargin="43" bottomMargin="43" uuid="10825c57-f953-4166-bf03-8ecabe8a8f47">
<property name="ireport.zoom" value="0.75"/>
<property name="ireport.x" value="0"/>
<property name="ireport.y" value="128"/>
<style name="table">
    <box>
        <pen lineWidth="1.0" lineColor="#000000"/>
    </box>
</style>
<style name="table_TH" mode="Opaque" backcolor="#F0F8FF">
    <box>
        <topPen lineWidth="0.5" lineColor="#000000"/>
        <bottomPen lineWidth="0.5" lineColor="#000000"/>
    </box>
</style>
<style name="table_CH" mode="Opaque" backcolor="#BFE1FF">
    <box>
        <topPen lineWidth="0.5" lineColor="#000000"/>
        <bottomPen lineWidth="0.5" lineColor="#000000"/>
    </box>
</style>
<style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
    <box>
        <topPen lineWidth="0.5" lineColor="#000000"/>
        <bottomPen lineWidth="0.5" lineColor="#000000"/>
    </box>
</style>
<style name="table 1">
    <box>
        <pen lineWidth="1.0" lineColor="#000000"/>
    </box>
</style>
<style name="table 1_TH" mode="Opaque" backcolor="#F0F8FF">
    <box>
        <pen lineWidth="0.5" lineColor="#000000"/>
    </box>
</style>
<style name="table 1_CH" mode="Opaque" backcolor="#BFE1FF">
    <box>
        <pen lineWidth="0.5" lineColor="#000000"/>
    </box>
</style>
<style name="table 1_TD" mode="Opaque" backcolor="#FFFFFF">
    <box>
        <pen lineWidth="0.5" lineColor="#000000"/>
    </box>
    <conditionalStyle>
        <conditionExpression><![CDATA[new Boolean($V{REPORT_COUNT}.intValue()%2==0)]]></conditionExpression>
        <style backcolor="#EFF7FF"/>
    </conditionalStyle>
</style>
<style name="table 2">
    <box>
        <pen lineWidth="1.0" lineColor="#000000"/>
    </box>
</style>
<style name="table 2_TH" mode="Opaque" backcolor="#F0F8FF">
    <box>
        <pen lineWidth="0.5" lineColor="#000000"/>
    </box>
</style>
<style name="table 2_CH" mode="Opaque" backcolor="#BFE1FF">
    <box>
        <pen lineWidth="0.5" lineColor="#000000"/>
    </box>
</style>
<style name="table 2_TD" mode="Opaque" backcolor="#FFFFFF">
    <box>
        <pen lineWidth="0.5" lineColor="#000000"/>
    </box>
    <conditionalStyle>
        <conditionExpression><![CDATA[new Boolean($V{REPORT_COUNT}.intValue()%2==0)]]></conditionExpression>
        <style backcolor="#EFF7FF"/>
    </conditionalStyle>
</style>
<subDataset name="ChartData" uuid="fc9ec0af-3e1a-40a7-8eb4-9ad30a266dee"/>
<subDataset name="Table Dataset 1" uuid="70531f85-19bf-4bd7-b801-6ed08b189b34">
    <field name="tableData" class="java.util.List"/>
</subDataset>
<queryString language="SQL">
    <![CDATA[]]>
</queryString>
<field name="title" class="java.lang.String"/>
<field name="logoLocation" class="java.lang.String"/>
<field name="picLocation" class="java.lang.String"/>
<field name="paragraphText" class="java.lang.String"/>
<field name="tableData" class="java.util.List"/>
<detail>
    <band height="756" splitType="Stretch">
        <textField isStretchWithOverflow="true" pattern="">
            <reportElement uuid="519c6bb5-72f9-4c25-8e91-47865ae0c9df" mode="Opaque" x="38" y="42" width="378" height="45" forecolor="#000099"/>
            <textElement textAlignment="Center" verticalAlignment="Middle" markup="html">
                <font size="26"/>
            </textElement>
            <textFieldExpression><![CDATA[$F{title}]]></textFieldExpression>
        </textField>
        <image onErrorType="Icon">
            <reportElement uuid="3759a707-32a4-49ef-a9c6-b0ad7136f738" x="216" y="273" width="279" height="246"/>
            <imageExpression><![CDATA[$F{picLocation}]]></imageExpression>
        </image>
        <image onErrorType="Icon">
            <reportElement uuid="f989f871-32ea-4f13-ae3f-3f487cde76dd" x="295" y="0" width="200" height="42"/>
            <imageExpression><![CDATA[$F{logoLocation}]]></imageExpression>
        </image>
        <xyLineChart>
            <chart>
                <reportElement uuid="ae87fc13-b92e-4a2a-b218-d395343f6028" x="0" y="537" width="495" height="203"/>
                <chartTitle/>
                <chartSubtitle/>
                <chartLegend/>
            </chart>
            <xyDataset>
                <dataset>
                    <datasetRun subDataset="ChartData" uuid="de7fb84d-17ea-4e5e-82bf-2015e72e4982"/>
                </dataset>
            </xyDataset>
            <linePlot>
                <plot/>
            </linePlot>
        </xyLineChart>
        <textField>
            <reportElement uuid="565b981c-ca6f-4eab-ab3e-683b1e2b4d03" stretchType="RelativeToTallestObject" mode="Opaque" x="0" y="103" width="495" height="144" backcolor="#CCCCCC"/>
            <textElement markup="html">
                <font size="6"/>
            </textElement>
            <textFieldExpression><![CDATA[$F{paragraphText}]]></textFieldExpression>
        </textField>
        <componentElement>
            <reportElement uuid="8eb2d942-e4be-4b86-b409-9e1b91f6b4c4" key="table 2" style="table 2" x="13" y="273" width="180" height="246"/>
            <jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
                <datasetRun subDataset="Table Dataset 1" uuid="40906b08-698d-4979-ae31-7f1689859954">
                    <dataSourceExpression><![CDATA[new net.sf.jasperreports.engine.JRBeanCollectionDataSource($F{tableData})]]></dataSourceExpression>
                </datasetRun>
                <jr:column uuid="f1282add-60a7-49d7-b66d-c8bd912dc161" width="90">
                    <jr:tableHeader style="table 2_TH" height="30"/>
                    <jr:detailCell style="table 2_TD" height="20">
                        <textField>
                            <reportElement uuid="5c95b1c4-bfb0-4364-83da-28d78e2d0555" x="0" y="0" width="90" height="20"/>
                            <textElement/>
                            <textFieldExpression><![CDATA[""+$F{tableData}]]></textFieldExpression>
                        </textField>
                    </jr:detailCell>
                </jr:column>
                <jr:column uuid="ec2f8c0c-e950-4b74-9d1e-851f68deedf3" width="90">
                    <jr:tableHeader style="table 2_TH" height="30"/>
                    <jr:detailCell style="table 2_TD" height="20"/>
                </jr:column>
            </jr:table>
        </componentElement>
    </band>
</detail> 
```

这是我的 ProtoReport 类的初学者（getter、setter 等被切断）：

```
public class ProtoReport {

private String outputFileName;
private String title;
private String logoLocation;
private String paragraphText;
private List<String> tableData;
private String picLocation;
private int[][] graphData;  //TODO decide how to store chart data
private ChartData chartData;
private String path;

//default constructor
public ProtoReport() {

    // Initialize object fields
    outputFileName = "PrototypeReport";
    title = "Prototype Report";
    paragraphText = "Default text";

    tableData = null;
    chartData = new ChartData();

    //set path to working directory
    path = System.getProperty("user.dir");

    //default to assumed report location 
    //(ie same folder as .jrxml and .jasper files)
    logoLocation = path + "\\reports\\logo.jpg";
    picLocation = path + "\\reports\\pic.jpg";

}

//constructor
public ProtoReport(String title, String logoLocation, 
                        String picLocation, ChartData chartData) {

        // Initialize object fields
        outputFileName = "PrototypeReport";
        this.title = title;
        paragraphText = "Default text";

        //tableData = new ArrayList<String>();
        tableData = null;
        this.chartData = chartData;

        //set path to working directory
        path = System.getProperty("user.dir");

        //picture locations
        this.logoLocation = logoLocation;
        this.picLocation = picLocation;

    }

//Getters and Setters

//Self referencing method for use in iReport field description
    public ProtoReport getMe()
     {
      return this;
     } 
```

最后，我的 Main 的相关部分：

```
public static void main(String[] args) {

    List<ProtoReport> listOfReports = new ArrayList<ProtoReport>();

    ProtoReport protoReport1 = new ProtoReport();
    ProtoReport protoReport2 = new ProtoReport();

//test table.. since nothing else will work...
    List<String> testTable = new ArrayList<String>();
    testTable.add("First entry test");
    testTable.add("Second entry test");
    protoReport1.setTableData(testTable);

    protoReport1.getTableData().add("First entry");
    protoReport1.getTableData().add("Second entry");
 listOfReports.add(protoReport1);

//and wrap the ArrayList in a JRBeanCollectionDataSource
    JRBeanCollectionDataSource beanBurritoWrap = new JRBeanCollectionDataSource(listOfReports);

    //build the jasper report
    JasperReport jasperReport;
    JasperPrint jasperPrint;
    HashMap<String, Object> hashMap = new HashMap<>();
    boolean reportCreated;

    try {

        jasperReport = JasperCompileManager.compileReport(jrxmlLocation);
        jasperPrint = JasperFillManager.fillReport(jasperReport, hashMap, beanBurritoWrap);
        JasperExportManager.exportReportToPdfFile(jasperPrint, outputFileName);
        reportCreated=true;
    }
    catch (JRException e) {
          e.printStackTrace();
          reportCreated=false;
    } 
```

由于这与我在图表中遇到的问题相似，我怀疑它们的原因相同。我一直在阅读有关如何使用这些功能的所有内容，但只是没有点击...如何在 iReport 中设置连接以使用 tableData 中的字符串填充我的表格？我是否需要每列的字符串列表，或者是否有更聪明的方法来完成这一切（请记住，我想用 POJO 来完成这一切，即没有 sql 数据库）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T05:57:14.940

你在jrxml中提到的包名是错误的。它是[net.sf.jasperreports.engine.data.JRBeanCollectionDataSource](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/engine/data/JRBeanCollectionDataSource.html)。*******

# java - Tomcat7路径错误？无法在端口 8080 上启动服务 - Linux Mint 13

> ID：12555652
> 
> 赞同：0
> 
> 时间：2012-09-23T19:41:33.837
> 
> 标签：java, tomcat, environment-variables, tomcat7

我在 Linux Mint 13 下将 Tomcat7 作为服务运行时遇到了困难。我是从源代码而不是从*apt-get 存储库安装*

环境变量：

> **$JAVA_HOME:** /usr/lib/jvm/java
> 
> **$JRE_HOME:** /usr/local/java/jre1.7.0_07
> 
> **$PATH:** /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/home/tyler/bin:/usr/local/ java/jdk1.7.0_07/bin:/home/tyler/bin:/usr/local/java/jre1.7.0_07/bin:/usr/lib/jvm/java/bin
> 
> **CATALINA_HOME** =/usr/local/tomcat

有什么建议么？

**尝试启动服务时（/usr/share/tomcat7/bin/startup.sh）：**

> **使用 CATALINA_BASE：** /usr/share/tomcat7
> 
> **使用 CATALINA_HOME：** /usr/share/tomcat7
> 
> **使用 CATALINA_TMPDIR：** /usr/share/tomcat7/temp
> 
> **使用 JRE_HOME：** /usr/local/jdk1.7.0_07/jre
> 
> **使用类路径：/usr/share/tomcat7/bin/bootstrap.jar:** /usr/share/tomcat7/bin/tomcat-juli.jar

错误：Firefox 无法在 localhost:8080 建立与服务器的连接 没有出现其他错误对话框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T21:05:59.467

您的 JAVA_HOME 和 JRE_HOME 不一致（并且 JRE_HOME 在您的 2 个示例中不一样）。无论如何，您不需要两者，因为 JDK 包含一个 JRE（它是一个超集）。因此，只需设置您的 JAVA_HOME，您就可以开始使用了。

# android - 将android布局分成4块的正确方法

> ID：12555657
> 
> 赞同：0
> 
> 时间：2012-09-23T19:42:19.583
> 
> 标签：android, listview, layout, row, android-relativelayout

我想要实现的是，划分下图中描述的行布局。我应该怎么做才能将行分成3个完全相同的大小和1个未知的大小？X 大小相同，我不知道也不想指定是否不需要...

![](../Images/7babc78a2265348440dba619dc3886ab.png)

编辑：按钮位于左侧、中间和右侧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T19:57:07.860

`LinearLayout`在 a中使用a `RelativeLayout`。将 3 件物品放在里面`LinearLayout`并给它们相同的东西`weight`。`LinearLayout`在 的帮助下将未知项目放在 的右侧`RelativeLayout`。

左边的元素将根据右边的宽度对齐自己。这是代码：[https ://gist.github.com/3772838](https://gist.github.com/3772838)

这里有 2 个不同大小的最右边元素的屏幕截图：

[http://goo.gl/Nezmn](http://goo.gl/Nezmn)

[http://goo.gl/XbQwL](http://goo.gl/XbQwL)

科莱凝胶 =)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T19:48:12.183

您的极左尺寸是否有最小宽度？如果是这样，您应该使用水平方向的 LinearLayout。它可以包含 2 个 LinearLayout，一个包含 3 个视图（您的按钮），每个视图（您的按钮）宽度为 0，权重为 1，另一个 LinearLayout 设置了 minimumWidth。您可以为第一个布局指定宽度，而不是 marginRight。

泰德霍普做对了；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T19:54:38.687

您可以使用`android:layout_weight`按比例分配额外空间。您希望左侧的三个按钮吸收所有额外的宽度，因此右侧（第四个）按钮的默认权重应为 0。由于您还希望它们具有相同的宽度，最简单的方法是为它们分配 0dp 的宽度和给他们同样的权重：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <Button
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1" />

    <Button
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1" />

    <Button
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T19:57:25.940

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" android:id="@+id/rlayoutParent">

    <RelativeLayout
        android:layout_width="wrap_content"
        android:id="@+id/rlayoutButtons" android:layout_height="wrap_content">

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" android:layout_toRightOf="@+id/button1"/>

        <Button
            android:id="@+id/button3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" android:layout_toRightOf="@+id/button2"/>

    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/rlayoutOther"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_toRightOf="@+id/rlayoutButtons" android:gravity="right">

        <Button
            android:id="@+id/button4"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Button" />

    </RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-23T19:49:30.813

你 cab 使用 layout_weight 属性。为所有 x 布局赋予相同的权重，为问号赋予不同的权重，直到屏幕按照您的喜好分配

# javascript - 如何在下面修复这个精细的输入和 jquery 错误

> ID：12555659
> 
> 赞同：0
> 
> 时间：2012-09-23T19:42:24.647
> 
> 标签：javascript, jquery, html

基本上以下代码导致您的问题：

```
$(sourceImageForm).find('.imagef1_upload_process').css('visibility','hidden'); 
$(sourceImageForm).find('.imagef1_cancel').css('visibility','hidden'); 
/// THIS LINE BELOW 
$(sourceImageForm).find('.imagef1_upload_form').html(result + '<label>Image File: <input name="fileImage" class="fileImage" type="file"/></label><br/><br/><label><input type="submit" name="submitImageBtn" class="sbtnimage" value="Upload" /></label><label><input type="button" name="imageClear" class="imageClear" value="Clear File"/></label>'); 
/// THIS LINE ABOVE 
$(sourceImageForm).find('.imagef1_upload_form').css('visibility','visible'); 
```

上面的代码取自在成功/错误上传发生后运行的代码。此代码继续覆盖负责上传图像的表单。现在这对于成功来说很好，因为界面为每个图像使用单独的表单......一旦成功，您就不会再次重复使用该表单（因此服务器端不会出现错误以进行后续上传）。

但是，当图像上传错误或取消时，我尝试重新使用该表单再次上传图像？如果是这样，您已经覆盖并删除了 numimage 输入 html：

```
<input type='hidden' class='numimage' name='numimage' value='" numimage "' /> 
```

这意味着我会收到一个错误，因为该字段不再存在。

我的问题是我该如何解决这个问题？我怎样才能解决这个问题，这样我就不会丢失隐藏输入表单中的值并且该字段仍然存在？

更新：

下面是图片输入表格：

```
 var $fileImage = $("<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target_image' onsubmit='return imageClickHandler(this);' class='imageuploadform' >" + 
"<input type='hidden' class='numimage' name='numimage' value='" + numimage + "' />" +
"<div class='display_content_image'>" +
"<p class='imagef1_upload_process' align='center'>Loading...<br/><img src='Images/loader.gif' /><br/></p>" +
"<p class='imagef1_upload_form' align='center'><br/><label>" + 
"Image File: <input name='fileImage' type='file' class='fileImage' /></label><br/><br/><label class='imagelbl'>" + 
"<input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' /></label>" + 
"</p><p class='imagef1_cancel' align='center'><label>" +
"<input type='reset' name='imageCancel' class='imageCancel' value='Cancel' /></label>" +
"</p><p class='listImage' align='left'></p>" +
"<iframe class='upload_target_image' name='upload_target_image' src='#' style='width:300px;height:300px;border:0px;solid;#fff;'></iframe></div></form>");

$image.append($fileImage); 
```

下面是开始上传图片文件的完整 jquery 代码：

```
function startImageUpload(imageuploadform){

  $(imageuploadform).find('.imagef1_upload_process').css('visibility','visible');
  $(imageuploadform).find('.imagef1_cancel').css('visibility','visible');
  $(imageuploadform).find('.imagef1_upload_form').css('visibility','hidden');
  $(imageuploadform).find('.imagef1_upload_form').find('.display_content_image').css('visibility','hidden');
  sourceImageForm = imageuploadform;

        $(imageuploadform).find(".imageCancel").on("click", function(event) {
                  $('.upload_target_image').get(0).contentwindow
              $("iframe[name='upload_target_image']").attr("src", "javascript:'<html></html>'");
    return stopImageUpload(2);

});      

  return true; 
```

}

下面是完整的 jquery 代码，它在其中停止图像文件上传：

```
function stopImageUpload(success, imagefilename){

      var result = '';
      imagecounter++;

      var replaceForm = function(result) { 
  $(sourceImageForm).find('.imagef1_upload_form').html(result + '<label>Image File: <input name="fileImage" class="fileImage" type="file"/></label><br/><br/><label><input type="submit" name="submitImageBtn" class="sbtnimage" value="Upload" /></label><label><input type="button" name="imageClear" class="imageClear" value="Clear File"/></label>');
} 

var updateForm = function(result) { 
  $(sourceImageForm).find('.imagef1_upload_form').find('.display_content_image').html(result);
} 

var displayInfo;

      if (success === 1){
         result = '<span class="imagemsg'+imagecounter+'">The file was uploaded successfully</span><br/><br/>';      
         $('.listImage').eq(window.lastUploadImageIndex).append('<div>' + htmlEncode(imagefilename) + '<button type="button" class="deletefileimage" image_file_name="' + imagefilename + '">Remove</button><br/><hr/></div>'); 
        displayInfo = replaceForm;      
         }
      else if (success === 2){
          result = '<span class="imagemsg'+imagecounter+'"> The file upload was canceled</span><br/><br/>';
          displayInfo = updateForm;    
      }
      else {
         result = '<span class="imagemsg'+imagecounter+'">There was an error during file upload</span><br/><br/>';
         displayInfo = updateForm;  
      }
      displayInfo(result); 

      $(sourceImageForm).find('.imagef1_upload_process').css('visibility','hidden');
      $(sourceImageForm).find('.imagef1_cancel').css('visibility','hidden');
      $(sourceImageForm).find('.imagef1_upload_form').css('visibility','visible');

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T19:49:50.543

这一行： `$(sourceImageForm).find('.imagef1_upload_form').html(...)`正在破坏表单元素的内容。如果现有代码适用于成功条件，那么您应该保持原样。当您处理错误条件时（`error`如果您有 RESTful API，最好使用回调），而不是覆盖整个表单，您应该有一个错误消息的特定元素，然后填充该元素。就像是：

`$(sourceImageForm).find('.imagef1_upload_form').find('.error_message').html(msg).show();`

**更新示例：**

```
var replaceForm = function(result) {
  //existing code to replace full form content
}
var updateForm = function(result) {
  //new code to display error message
}
var displayFunk;
if (success === 1){
  result = '<span class="imagemsg'+imagecounter+'">The file was uploaded successfully</span><br/><br/>';      
  $('.listImage').eq(window.lastUploadImageIndex).append('<div>' + htmlEncode(imagefilename) + '<button type="button" class="deletefileimage" image_file_name="' + imagefilename + '">Remove</button><br/><hr/></div>'); 
  displayFunk = replaceForm;
}
else if (success === 2){
  result = '<span class="imagemsg'+imagecounter+'"> The file upload was canceled</span><br/><br/>';
  displayFunk = updateForm;
}
else {
  result = '<span class="imagemsg'+imagecounter+'">There was an error during file upload</span><br/><br/>';
  displayFunk = updateForm;
}
displayFunk(result); 
```

Notice the `===` for comparison which avoids some JavaScript automatic coercion. This will head off bugs when doing things like comparing a value to `1`. You'd also be best off avoiding the way you're using a return value, but at the least you may want to use pseudo constants/enum and a dispatch table style object.

# xcode4.5 - Xcode 4.5 的 iPhone 模拟器 .app 文件在哪里？

> ID：12555661
> 
> 赞同：2
> 
> 时间：2012-09-23T19:42:27.990
> 
> 标签：xcode4.5

我安装了 Xcode 4.5，安装导致 iPhone 模拟器别名从扩展坞中消失。所以我想把它放回码头，但我找不到 .app 文件（或任何可能调用的文件）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T02:25:35.083

在 Xcode 4.5 中，模拟器包含在 Xcode 包中。通过右键单击 Applications 文件夹中的 Xcode.app 并选择“显示包内容”找到它，然后导航到：

内容/Developer/Platforms/iPhoneSimulator.platform/Developer/Applications/iOS Simulator.app

如果您经常使用它，请将其拖到 Dock 上。

# objective-c - cropping UIImage

> ID：12555663
> 
> 赞同：1
> 
> 时间：2012-09-23T19:43:02.883
> 
> 标签：objective-c, ios, cocoa-touch, quartz-2d

I have 4 points on an image (not perfectly a rectangle, just a 4 point polygon). For example:

![enter image description here](../Images/3d176b1c2e88f053291acb74fcb38ed8.png)

I want to extract the image bounded by the 4 points, resulting image: ![enter image description here](../Images/8776a6ea04e2b642e4189e9ccd53e188.png)

Using Quartz, I can only specify a rectangle to do this. However, i might not have a perfect rectangle all the time, so what's the best way to do this? Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T21:48:13.887

What about to use OpenGL "Render to texture" technique? Use those 4 points as input texture coordinates and render straight rectangle to the output texture.

# apache-pivot - Apache Pivot & TabPane - 以编程方式设置标签和图标

> ID：12555666
> 
> 赞同：0
> 
> 时间：2012-09-23T19:43:33.437
> 
> 标签：apache-pivot

在 apache pivot 项目的 1.5 版中，TabPane 类支持 setIcon() 和 setLabel()。这些方法在 2.0 版中被删除。有谁知道我现在应该为这些电话使用什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-09T18:10:54.893

在 Pivot 的 2.0.x 版本中，您将执行以下操作： `TabPane.setTabData(component, new ButtonData(...));`在将组件本身添加到 TabPane 序列之后（`tabPane.getTabs().add(component);`正如您所说的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:02:32.560

如果我正确理解本教程，它将是：

```
tabPane.getTabs().add(component) 
```

其中 component 是一个`Label`or `ButtonData`，它包含图标和文本。

这是Apache Pivot 版本 2.0.2 中的[示例。](http://pivot.apache.org/tutorials/tab-panes.html)`TabPane`

# facebook-javascript-sdk - 想知道我是否为 facebook javascript sdk 编写了频道 url 正确。

> ID：12555670
> 
> 赞同：3
> 
> 时间：2012-09-23T19:44:14.200
> 
> 标签：facebook-javascript-sdk, channel

我想知道我是否写对了我的频道网址。在 Javascript SDK 参考[https://developers.facebook.com/docs/reference/javascript/](https://developers.facebook.com/docs/reference/javascript/)中；频道文件的部分说：

> channelUrl 必须是与包含 SDK 的页面匹配的完全限定 URL。换句话说，如果您的网站使用 www 提供服务，则频道文件域必须包含 www，并且如果您修改页面上的 document.domain，您也必须在 channel.html 文件中进行相同的 document.domain 更改。协议也必须匹配。如果您的页面是通过 https 提供的，那么您的 channelUrl 也必须是 https。记住也要为脚本 src 使用匹配协议。

这是我的 Javascript SDK 页面： **注意：我将 channel.html 文件与 index.php 文件放在同一个文件夹中，我也不确定这是否正确。**

```
<body>
        <div id="fb-root"></div>
<script src="http://connect.facebook.net/en_US/all.js"></script>

<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '278374582262040', // App ID
      **channelUrl : 'localhost/controllers/index.php/channel.html', // Channel File**
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

//the rest of the sdk code 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T08:06:41.053

# ruby - 哈希#stringify_keys 未定义

> ID：12555678
> 
> 赞同：0
> 
> 时间：2012-09-23T19:45:14.390
> 
> 标签：ruby

当我运行时`ri Hash`，该`stringify_keys`方法在某些列表中显示为实例方法，其中每个列表似乎与不同的 gem 或 gem 版本相关联。

但是当我尝试从 irb shell 调用它时，它失败了：

```
irb(main):035:0> h
=> {:this=>"this value", :that=>"that value"}
irb(main):031:0> h.instance_of? Hash
=> true
irb(main):032:0> h.stringify_keys
NoMethodError: undefined method `stringify_keys' for {:this=>"this value", :that=>"that value"}:Hash
        from (irb):32
        from /usr/local/bin/irb:12:in `<main>' 
```

此外，当我`h.methods.sort`在 IRB 中运行时，`stringify_keys`没有将其列为方法。

有人可以解释这种差异吗？是因为我的环境已经过时还是我对 Ruby 文档不了解？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-23T20:02:39.917

Rails（通过 ActiveSupport）猴子将[`stringify_keys`](https://api.rubyonrails.org/classes/Hash.html#method-i-stringify_keys)方法修补到其中[`Hash`](https://ruby-doc.org/core/Hash.html)，因此您不会在普通`irb`会话中使用它。您可以通过以下方式加载核心扩展：

```
require 'active_support/core_ext' 
```

有关加载单个猴子补丁的详细信息，请参阅[Active Support Core Extensions Guide](https://guides.rubyonrails.org/active_support_core_extensions.html)。

# python - 如何使 Pyglet 的 ScrollableTextLayout 中的文本向上滚动而不是向下滚动？.view_y 似乎没有文档中列出的效果

> ID：12555681
> 
> 赞同：2
> 
> 时间：2012-09-23T19:46:10.637
> 
> 标签：python, pyglet

我试图弄清楚如何让文本在 Pyglet 的 ScrollableTextLayout 中向上滚动，而不是向下滚动。为了清楚起见，这里有一个快速快照来说明我所说的“向上”是什么意思。（以防万一）

![它目前的行为方式](../Images/db538a0e8240670ea34d3365649503b8.png)

我希望它如何表现：

![在此处输入图像描述](../Images/c6edf753346c82f69d3835c6bed3c31e.png)

根据文档，这种行为可以通过 view_y 属性来实现，但我尝试了各种不同的值，但都没有明显的变化。

编码：

```
import pyglet

class LoadDialog(pyglet.sprite.Sprite):
    def __init__(self):
        self.lbatch = pyglet.graphics.Batch()

        self.loading_window = pyglet.image.load('..\\resources\\loading_base.png')
        super(LoadDialog, self).__init__(self.loading_window, batch=self.lbatch)

        self.doc = pyglet.text.decode_text('Hello world!'.ljust(40))
        self.doc.set_style(0,12, dict(font_name='Arial', font_size=12,
                                    color=(0,0,0,255)))

        self.layout = pyglet.text.layout.ScrollableTextLayout(self.doc, 
                                            width=self.load_animation.width, 
                                            height=100, multiline=True, batch=self.lbatch)
        self.layout.x = 220
        self.layout.y = 160
        self.layout.view_y = -80

    def update(self, dx):
        self.doc.insert_text(0, "New line".ljust(40))

sprite = LoadDialog()
window = pyglet.window.Window(width=640, height=480)

pyglet.gl.glClearColor(1, 1, 1, 1)

@window.event
def on_draw():
    window.clear()
    sprite.lbatch.draw()
    sprite.layout.draw()

@window.event
def update(dx):
    sprite.update(dx)

pyglet.clock.schedule_interval(update, 1.0)
pyglet.app.run() 
```

*我已经尝试了*大量的值`layout.view_y`，从`-1`到荒谬的值`-3000`，或者`500`只是为了看看是否有变化。但它总是给出如第一张图片所示的确切行为。

 *我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T01:25:40.347

**首先**，您的示例取决于图像文件及其宽度*（未提供）*，这会使测试稍微复杂。

**其次**，您正在通过调用[pyglet.text.decode_text创建一个](http://pyglet.org/doc/api/pyglet.text-module.html#decode_text)[UnformattedDocument](http://pyglet.org/doc/api/pyglet.text.document.UnformattedDocument-class.html) ，然后在此行的位置 0（开始）处将文本显式地重复插入[UnformattedDocument ：](http://pyglet.org/doc/api/pyglet.text.document.UnformattedDocument-class.html)

```
def update(self, dx):
    self.doc.insert_text(0, "New line".ljust(40)) 
```

如果您希望文本出现在末尾，正如您在图形中所暗示的那样，请将其插入到末尾！

```
def update(self, dx):
    # Fix the implied bug
    self.doc.insert_text(-1, "New line".ljust(40)) 
```

**第三**，让我们回答您实际提出的问题。如果您阅读属性[ScrollableTextLayout.view_y](http://pyglet.org/doc/api/pyglet.text.layout.ScrollableTextLayout-class.html#view_y)的 API 文档，您会发现...

> 超出范围 [height - content_height, 0] 的值会自动在范围内裁剪。

...因此当 content_height 为 0 时将 view_y 设置为 -80，会导致 view_y 被剪裁为 0，然后您再也不会尝试设置 view_y。滚动问题的解决方案是在每次内容高度发生变化时设置 view_y 。对于一个简单的修复，您可以简单地设置 view_y 以便您的内容的底部将始终向上滚动到您的框架的底部：

```
def update(self, dx):
    # Fix the implied bug
    self.doc.insert_text(-1, "New line".ljust(40))
    # The answer to the stated question
    self.layout.view_y = -self.layout.content_height 
```*

# spring-webflow-2 - 如何集成 Spring Webflow、Spring Mobile 和 WURFL

> ID：12555682
> 
> 赞同：2
> 
> 时间：2012-09-23T19:46:20.313
> 
> 标签：spring-webflow-2, wurfl, spring-mobile

我想知道是否有人可以提供帮助。我正在开发一个 Spring Webflow 2 应用程序，我还想将 Spring Mobile 1.0 与 WURFL 1.4.2 集成。

我让 Webflow 和 Spring Mobile 像这样一起工作：

```
<bean id="handlerMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    <property name="order" value="1"/>
    <property name="mappings">
        <value>/fnol=flowController</value>
    </property>
    <property name="interceptors">
        <list>
            <bean class="org.springframework.mobile.device.DeviceResolverHandlerInterceptor" />
        </list>
    </property> 
```

然后在我的一个动作类中，我可以做到这一点：

```
public Event startUp(RequestContext arg0) throws Exception {
    // get the http request form the webflow RequestContext
    ServletExternalContext externalContext = (ServletExternalContext) arg0.getExternalContext();
    HttpServletRequest request = (HttpServletRequest) externalContext.getNativeRequest();
    // get the Spring Mobile Device
    Device currentDevice = DeviceUtils.getCurrentDevice(request); 
```

这似乎工作正常，但现在我想将 WURFL 与 Spring Mobile 一起使用，以便获得表示客户端功能的更丰富的对象。

[这个链接](http://homepages.abdn.ac.uk/b.scharlau/pages/teaching/CS5087/practicals/practical_spring_wurfl.shtml)表明我应该能够像这样向 DeviceResolverHandlerInterceptor 添加一个构造函数：

```
<bean id="handlerMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    <property name="order" value="1"/>
    <property name="mappings">
        <value>/fnol=flowController</value>
    </property>
    <property name="interceptors">
        <list>
            <bean class="org.springframework.mobile.device.DeviceResolverHandlerInterceptor">
                <constructor-arg>
                    <device:wurfl-device-resolver root-location="/WEB-INF/wurfl/wurfl.zip" />
                </constructor-arg>
            </bean>
        </list>
    </property> 
```

我将设备命名空间定义为：

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:webflow="http://www.springframework.org/schema/webflow-config"
    xmlns:device="http://www.springframework.org/schema/mobile/device"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
                        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                        http://www.springframework.org/schema/context
                        http://www.springframework.org/schema/context/spring-context-3.0.xsd
                        http://www.springframework.org/schema/webflow-config
                        http://www.springframework.org/schema/webflow-config/spring-webflow-config-2.0.xsd
                        http://www.springframework.org/schema/mobile/device 
                        http://www.springframework.org/schema/mobile/device/spring-mobile-device-1.0.xsd" > 
```

就我的 IDE（Eclipse）而言，它很高兴，它部署到 wtp 没有问题。但是当我启动 wtp 时，出现以下错误：

```
org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Unable to locate Spring NamespaceHandler for XML schema namespace [http://www.springframework.org/schema/mobile/device]
Offending resource: class path resource [fnol-webContext.xml]
Bean 'handlerMapping'
-> Property 'interceptors'
    -> Bean ''
        -> Constructor-arg 
```

我不太确定这意味着什么。有什么想法吗？

感谢你们提供的任何帮助，

干杯，内森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T22:37:00.343

浏览了 github 存储库，看看我是否能看出发生了什么：看起来 WURFL 支持由于许可异常而被故意删除

[https://github.com/SpringSource/spring-mobile/commit/ca81c6c20f1a9e524b0150e14dab20b020676e0b](https://github.com/SpringSource/spring-mobile/commit/ca81c6c20f1a9e524b0150e14dab20b020676e0b)

这个页面暗示了一个单独的项目，它将提供 WURFL 支持：我还没有找到它。

# javascript - 如何使用 Thunderbird 扩展编辑过滤器电子邮件？

> ID：12555683
> 
> 赞同：1
> 
> 时间：2012-09-23T19:46:26.847
> 
> 标签：javascript, thunderbird, thunderbird-addon

我正在创建一个扩展程序，它将执行一些操作来过滤某些消息。

我想过创建自己的电子邮件过滤器来检查每条到达的邮件，但 Thunderbird 已经有了它，所以扩展可能会变得不稳定。

我想知道如何通过扩展（使用 Javascript）**创建、编辑和修改Thunderbird 电子邮件过滤器。**

# sql - 为什么 oracle 说无效字符？

> ID：12555687
> 
> 赞同：0
> 
> 时间：2012-09-23T19:46:41.637
> 
> 标签：sql, oracle

我对 Oracle 很陌生，虽然我正在练习一些遇到问题“*无效字符（SQL-HY000）* ”的示例。

以下是我用于实践的示例表和数据

```
CREATE TABLE games (
  id INT NOT NULL PRIMARY KEY ,
  city VARCHAR(20),
  name VARCHAR(20)
);     

INSERT INTO games(id,city,name) VALUES (2004,'Athens','football'); 
INSERT INTO games(id,city,name) VALUES (2008,'Beijing','cricket');

SELECT id, COUNT(*) over() as rowcount 
  FROM games g 
 where name='football' 
 GROUP BY CASE 
            WHEN name='football' 
            THEN g.name 
          END; 
```

select 语句中的无效字符是什么？

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T19:49:40.740

因为`CASE`在`GROUP BY`. 此外，`GROUP BY`不是必需的，因为您已经在过滤子句中的`football`行：`WHERE`

```
SELECT id, COUNT(*) OVER() as rowcount 
FROM games g 
WHERE name = 'football' 
```

当您使用分析函数时，例如`COUNT(*) OVER()`，您不需要使用`GROUP BY`。它们服务于不同的目的。

**[演示](http://sqlfiddle.com/#!4/f32cf/4)**。

# objective-c - Xcode 指向整数转换的不兼容指针从结果类型为 NSInteger 的函数返回 void

> ID：12555688
> 
> 赞同：4
> 
> 时间：2012-09-23T19:46:41.950
> 
> 标签：objective-c, xcode, warnings

为什么我在 Xcode 中会收到此警告？

![在此处输入图像描述](../Images/33caafdf19184904dd9599b3cc76b2ca.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T16:56:12.683

Xcode 期望函数末尾有 return 语句

最好做这样的事情：

NSInteger *myInt = nil;

```
 //your if statement where you changing "myInt" instead of returning 
```

返回我的整数

# playframework - 玩！2.0 使用 Eclipse 构建器

> ID：12555689
> 
> 赞同：1
> 
> 时间：2012-09-23T19:46:48.113
> 
> 标签：playframework, playframework-2.0, typesafe-stack

有没有办法让 Play 使用来自 Eclipse 的编译类，并让 Eclipse 生成隐藏在模板后面的 Scala 类？

我运行 Play 控制台（播放调试），然后从控制台中，我使用“~ run”来持续编译。

问题是：

1) 当我对 HTML 模板进行更改时，Eclipse 需要刷新，因为它是 Play Console 正在重新生成 Scala 类，而 Eclispe 对此一无所知。

2) Eclipse 和 Play 都是编译类，这让我的 CPU 异常发热。但是仅仅关闭 Eclipse 自动构建并没有帮助，因为我仍然得到一堆红色下划线，Eclipse 认为存在编译器问题。所以我必须进行刷新和手动构建。

这些会导致糟糕的程序员体验，那么，是我做错了什么还是我必须等到有人开发出一个替换外部 Play 控制台的 Eclipse 插件？或者我应该恢复到vi？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T20:12:18.783

您可以将 Eclipse 设置为在文件系统上的文件更改时自动刷新您的工作区：

Window > Preferences > General > Workspace > Refresh using native hooks or polling

和我一起工作得很好。

# c# - 是否可以为客户规模使用变量？

> ID：12555691
> 
> 赞同：0
> 
> 时间：2012-09-23T19:47:01.200
> 
> 标签：c#, winforms

在我的 Form 类中，我有一个名为 BitmapSize 的变量 int。我想让窗口自动调整为位图，所以我尝试使用这个变量 BitmapSize 设置客户端大小。

我在尝试设计器时收到以下警告（无错误）：“为防止在加载设计器之前可能丢失数据，必须解决以下错误：变量 'BitmapSize' 未声明或从未分配”

我可以忽略这一点，还是有更清洁的方法来实现我想要的？（我的代码确实按预期工作..）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T19:57:49.483

将其放在构造函数的末尾或`OnLoad`处理程序中，而不是在设计器生成的函数（`InitializeComponent`或其他）中，这将使设计器停止抱怨。

通常，将任何非文字内容混合到设计器管理的代码中都会混淆它。

# python - Flask Babel - 'translations/de/LC_MESSAGES/messages.po' 被标记为模糊，跳过

> ID：12555692
> 
> 赞同：10
> 
> 时间：2012-09-23T19:47:15.350
> 
> 标签：python, flask, python-babel

我无法获得在 Flask Babel 中工作的基本翻译。

这是我的步骤。

1.  我在页面中有这个`{{_("Hello")}}`

2.  我运行这个命令。

    ```
    pybabel extract -F babel.cfg -o messages.pot . 
    ```

3.  然后我为德语运行这个命令。

    ```
    pybabel init -i messages.pot -d translations -l de 
    ```

4.  这是德语的mo文件`/app/translations/de/LC_MESSAGES/messages.po`

    ```
    # German translations for PROJECT.
    # Copyright (C) 2012 ORGANIZATION
    # This file is distributed under the same license as the PROJECT project.
    # FIRST AUTHOR <EMAIL@ADDRESS>, 2012.
    #
    #, fuzzy
    msgid ""
    msgstr ""
    "Project-Id-Version: PROJECT VERSION\n"
    "Report-Msgid-Bugs-To: EMAIL@ADDRESS\n"
    "POT-Creation-Date: 2012-09-24 03:36+0800\n"
    "PO-Revision-Date: 2012-09-24 03:37+0800\n"
    "Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
    "Language-Team: de <LL@li.org>\n"
    "Plural-Forms: nplurals=2; plural=(n != 1)\n"
    "MIME-Version: 1.0\n"
    "Content-Type: text/plain; charset=utf-8\n"
    "Content-Transfer-Encoding: 8bit\n"
    "Generated-By: Babel 0.9.6\n"

    #: templates/baseh5.html:129
    msgid "Hello"
    msgstr "Guten Tag" 
    ```

5.  我运行这个命令。

    ```
    pybabel compile -d translations 
    ```

    这就是我得到的。

    ```
    catalog 'translations/de/LC_MESSAGES/messages.po' is marked as fuzzy, skipping 
    ```

6.  设置这是烧瓶

    ```
    app.config['BABEL_DEFAULT_LOCALE'] = 'de' 
    ```

我能得到什么？我明白了`Hello`。为什么 Flask Babel 不起作用？我该如何处理模糊？这应该是基本的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-23T20:19:03.440

您可以使用（或）命令行开关强制`pybabel compile`编译标记为模糊的消息：`-f``--use-fuzzy`

```
pybabel compile -f -d translations 
```

“模糊”消息`#, fuzzy`在行上方标有`msgid`一行，并且是合并的结果，其中消息被认为与以前的版本略有不同。标记为的消息`fuzzy`应该由人工查看，以确保翻译不需要更新，之后人工翻译会删除该标志。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-24T06:21:59.297

正如pybabel所说：目录本身被标记为“模糊”（第6行）。如果删除该行，则不需要“强制”选项。

# java - 测试 Java 方法的性能

> ID：12555693
> 
> 赞同：-1
> 
> 时间：2012-09-23T19:47:16.487
> 
> 标签：java, performance, performance-testing

我有一个 Java 程序，它的方法接受 2 个字符串并检查它们是否是彼此的字谜。

我相信有不止一种方法可以确定 2 个字符串是否是字谜 -

逻辑 - 1：排序字符串并检查它们是否相等逻辑 - 2：检查字符串的频率

还有很多其他的方法。

一天结束时，我们可以有多个方法 [每个方法都有不同的逻辑] 获取 2 个字符串并检查它们是否是字谜。

检查这些方法的性能并确定乐观的方法有哪些不同的方法？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T19:55:24.600

你可以得到

*   通过了解所使用的算法来了解时间复杂度。
*   测量代码预热后不同长度字符串所花费的时间。

对字符串进行排序是 O(n * ln(n)) 和 O(n) 空间。每个字符使用一个计数器是 O(n) 时间和 O(m) 空间（其中 m 是字符范围）。我想在任何实际程序中哪个更快不太重要，但我认为这是一个练习。

# php - 如何阻止对 XML 文件的访问

> ID：12555694
> 
> 赞同：1
> 
> 时间：2012-09-23T19:47:16.007
> 
> 标签：php

我在 XML (config.xml) 中创建了一个配置文件 index.php 读取 config.xml 并获取所有配置（数据库用户/密码和其他内容）。问题是如果你进入[http://example.com/config.xml](http://example.com/config.xml)你可以读取所有的 xml 文件，这是一个安全风险。我尝试使用 chmod 600 但 group(apache) 无法读取文件。您知道一种在 php 中读取 xml 并阻止服务器外部访问的方法吗？感谢帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T19:50:07.503

试试htaccess。

```
<Files config.xml>
order allow,deny
deny from all
</Files> 
```

# java - 在对象中存储文件

> ID：12555696
> 
> 赞同：0
> 
> 时间：2012-09-23T19:47:26.940
> 
> 标签：java, file, upload

我有一个 Java 客户端/服务器桌面应用程序，其中客户端和服务器之间的通信基于套接字，客户端和服务器之间交换的消息是序列化对象（消息对象，封装请求和响应）。

现在我需要让客户端能够将文件从本地计算机上传到服务器，但我不能通过缓冲区发送文件，因为缓冲区已经用于交换消息对象。

我应该打开另一个流来发送文件，还是有更好的方法来上传文件适合我的情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T20:03:44.147

`I need to make the client able to upload a file from the local computer to the server`

**-**打开`Solely Dedicated Connection`服务器进行文件上传。

**-**用于`File Transfer Protocol`简化您的工作，而且它非常容易和可靠地`Apache's common lib`用于**文件上传和下载**....

**请参阅此链接：**

[http://commons.apache.org/net/](http://commons.apache.org/net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T19:57:16.197

你真的只有两个选择：

1.  打开另一个专用于文件上传的连接并通过它发送。
2.  制作一个表示正在上传文件的位的消息对象，并通过这些消息对象以块的形式发送文件。

前者对我来说似乎更简单、更干净，需要更少的开销和更简单的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T20:12:28.123

您可以保留您的解决方案并将文件内容作为对象传递，例如作为字符串 - 如果内容包含麻烦的字符，则使用内容的 Base64 编码（或类似编码）

# http - 重定向到“/”或 index.html

> ID：12555704
> 
> 赞同：-1
> 
> 时间：2012-09-23T19:49:04.957
> 
> 标签：http, redirect, seo, httpwebrequest

目前在我的网站上，用户可以同时浏览

```
www.mysite.com/index.html
www.mysite.com (which actually returns index.html) 
```

我希望一切都消除歧义，例如

```
www.mysite.com/index.html 
```

或者

```
www.mysite.com 
```

考虑到什么是最佳实践

1.  HTTP请求
2.  搜索引擎优化

谢谢，ps如果除了SEO之外还有其他考虑，HTTP请求的数量，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T19:58:31.327

把这个放在你的`.htaccess`

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /.*index\.html\ HTTP/ 
RewriteRule ^(.*)index\.html$ $1 [R=301,L] 
```

# iis-7 - 为什么 IIS7 不接受虚拟路径中的多级路径 - 可能的 UI 错误？

> ID：12555705
> 
> 赞同：0
> 
> 时间：2012-09-23T19:49:08.373
> 
> 标签：iis-7, iis-6

在 IIS7 中，您不能像这样创建虚拟路径：

```
\SubFolder1\SubFolder2 
```

作为虚拟路径。我们在 IIS6 中进行了此设置，但 IIS7 不接受别名字段中的 \ 符号。

我能做到这一点的唯一方法是使用 AppCmd.exe 进行 IIS7 配置并在命令行上设置虚拟路径。如果它可以在命令行上运行，为什么不在 UI 中呢？这是一个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T23:41:15.520

这不是错误。虽然“\”字符对虚拟目录的*路径有效，但它在**别名*字段所用的虚拟目录的*名称*中无效。UI 用于在选定位置添加虚拟目录，而不是旨在允许一次创建多个级别的虚拟目录。

 *命令行配置实用程序 (appcmd.exe) 允许对实际配置数据进行几乎绝对的控制，并且与没有 GUI 的管理控制台不同。如果您有在控制台中无法满足的高级配置需求，那么 appcmd 是正确的方法。*

# spring - JAX WS webservice不从applicationcontext中获取spring bean，因此抛出空指针异常

> ID：12555707
> 
> 赞同：6
> 
> 时间：2012-09-23T19:49:36.913
> 
> 标签：spring, jax-ws

嗨，我已经启动并运行了 web 服务，我使用了 jax ws。我已经使用 Spring 来使用带有 Autowired 的 bean 和 spring 提供的东西，比如 applicationContext.xml 中的属性值注入。

我有以下 spring applicationcontext.xml 条目：

```
<context:component-scan base-package="com.mybeans.service" />      
<bean  id="myProperty" class="com.mybeans.service.MyBeanProperty"
p:Size="BIG">
</bean> 
```

在 Web 服务端点类中，我完成了：

```
@Autowired private MyBeanProperty myProperty; 
```

我有一个方法：

```
public String getSize() {

return myProperty.getSize();

} 
```

不幸的是，当我调用该方法时，它没有得到任何值并抛出空指针异常。

PS：我使用soapUI运行webservice的wsdl并调用了方法。

Web服务是否在Spring创建bean之前运行？

* * *

达夫莫

是的，我在 applicationContext 中使用了组件扫描。我确实在 web.xml 中有如下上下文加载器侦听器。请帮我..

这是我的完整代码说明

我正在使用 JAX-WS 和 Spring，并尝试设置一些需要在 Tomcat 7 上运行的 WebService。我使用 Maven 作为构建工具，因此我只在此处列出我的两个依赖项：

```
<dependencies>
   <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-web</artifactId>
      <version>3.0.5.RELEASE</version>
   </dependency>

     <dependencies>
    <dependency>
      <groupId>com.sun.xml.ws</groupId>
      <artifactId>jaxws-rt</artifactId>
      <version>2.1.3</version>
    </dependency>

    </dependencies> 
```

我的服务类位于 com.test.services 并命名为 TestService & HelloWorldService ，如下所示：

```
package com.test.services;

import javax.jws.WebMethod;
import javax.jws.WebService;

@WebService( name = "Test", serviceName = "TestService" )
public class TestService {

  @WebMethod
  public String getTest() {
    return "Test";
  }

} 
```

这是我的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
  <display-name>toolbox</display-name>
  <description>testing webservices</description>
  <listener>
    <listener-class>com.sun.xml.ws.transport.http.servlet.WSServletContextListener</listener-class>
  </listener>
  <servlet>
    <servlet-name>jaxws-servlet</servlet-name>
    <servlet-class>com.sun.xml.ws.transport.http.servlet.WSServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>jaxws-servlet</servlet-name>
    <url-pattern>/testservice</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>jaxws-servlet</servlet-name>
    <url-pattern>/helloworldservice</url-pattern>
  </servlet-mapping>
  <session-config>
    <session-timeout>10</session-timeout>
  </session-config>
</web-app> 
```

这是我的 sun-jaxws.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<endpoints xmlns='http://java.sun.com/xml/ns/jax-ws/ri/runtime' version='2.0'>
    <endpoint
        name="jaxws-servlet"
        implementation="com.test.services.TestService"
        url-pattern="/testservice"/>
    <endpoint
        name="jaxws-servlet"
        implementation="com.test.services.HelloWorldService"
        url-pattern="/helloworldservice" />
</endpoints> 
```

这很好用，我可以通过将浏览器分别指向 [url] [http://localhost:8080/toolbox/testservice[/url]](http://localhost:8080/toolbox/testservice[/url]) [url] [http://localhost:8080/toolbox/helloworldservice[/url ] 来访问服务]](http://localhost:8080/toolbox/helloworldservice[/url]) . 然而 Spring 支持显然没有被激活。

我尝试了以下方法，这只是让 HelloWorldService 可用：web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
  <display-name>toolbox</display-name>
  <session-config>
    <session-timeout>30</session-timeout>
  </session-config>
  <listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
  </listener>
</web-app> 
```

和 applicationContext.xml：

```
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
  xmlns:aop="http://www.springframework.org/schema/aop" xmlns:context="http://www.springframework.org/schema/context"
  xmlns:jee="http://www.springframework.org/schema/jee" xmlns:tx="http://www.springframework.org/schema/tx"
  xmlns:task="http://www.springframework.org/schema/task"
  xsi:schemaLocation="
    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.0.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
    http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.0.xsd">
  <context:component-scan base-package="com.test.services" />
  <bean class="org.springframework.remoting.jaxws.SimpleJaxWsServiceExporter">
    <property name="baseAddress" value="http://localhost:8080/" />
  </bean>
 </beans> 
```

此外，我使用 @Service 注释对两个服务类进行了注释。正如我之前提到的，这只会发布按字母顺序排列的第一个 web 服务，因此是 HelloWorldService。它还更改了 URL，因为该服务现在以 [url] [http://localhost:8080/[/url]](http://localhost:8080/[/url])而不是 [url] [http://localhost:8080/toolbox/helloworldservice[/url]](http://localhost:8080/toolbox/helloworldservice[/url])的形式提供。Tomcat 的日志显示，Spring 上下文将两个类都加载为 Spring bean。您对如何在保持两种服务可用的同时启用 Spring 支持有任何想法或建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-01T16:08:19.867

[在这里回答](https://stackoverflow.com/questions/16178237/autowiring-not-working-in-spring-jax-ws-on-jboss-as-7)。最终，除了将以下代码添加到服务 impl 之外，没有任何效果。

```
 @PostConstruct
public void init() {
    SpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext(this);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T09:45:01.733

如果您执行以下操作，也无需使用 ApplicationContext

1.  使用 @Service 注释您的服务类
2.  服务类应该扩展“SpringBeanAutowiringSupport”。

请查看以下代码段。

```
@org.springframework.stereotype.Service
@javax.jws.WebService (endpointInterface="a.b.c.MyPort", 
            targetNamespace="http://a.b.co.in/Retail/MyService/V1", 
            serviceName="MyService", 
            portName="MyServicePort", 
            wsdlLocation="wsdl/MyService.wsdl")
public class MyServiceBindingImpl extends org.springframework.web.context.support.SpringBeanAutowiringSupport{ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-21T10:44:13.893

我遇到了同样的问题，为了解决它，我在 spring 监听器之后启动了 jaxws 监听器：

```
 <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
     <listener>
        <listener-class>com.sun.xml.ws.transport.http.servlet.WSServletContextListener</listener-class>
    </listener> 
```

希望能帮助到你

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-25T14:23:40.503

您的 TestService（使用 @WebService 注释）应扩展“SpringBeanAutowiringSupport”类以启动 spring 绑定。

请查看 duffmo 提到的要点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-23T19:52:50.273

我认为您的 Spring 上下文更有可能尚未加载并可供 Web 服务使用。你是怎么做到的？

您应该在部署 Web 服务的 WAR 中配置`ContextLoaderListener`一个。`web.xml`你有没有告诉它在哪里加载 Spring 上下文？你在使用组件扫描吗？

[http://renidev.wordpress.com/2009/02/02/how-to-use-springs-context-component-scan-and-annotation/](http://renidev.wordpress.com/2009/02/02/how-to-use-springs-context-component-scan-and-annotation/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-16T02:27:02.353

您错过了 web 服务注入的配置。所以在 web.xml 里面放更多

```
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<listener>
    <listener-class>com.sun.xml.ws.transport.http.servlet.WSServletContextListener</listener-class>
</listener> 
```

请不要忘记订单。因为您需要先为自动装配字段初始化 bean

谢谢

# sas - 如何使用 ODS PDF 在 PDF 文档中插入垂直空格？

> ID：12555709
> 
> 赞同：2
> 
> 时间：2012-09-23T19:49:42.043
> 
> 标签：sas

我正在使用 ODS PDF 创建一个简单的 PDF 报告，但在将表格之间的空格插入 PDF 文件时遇到问题。这是到目前为止的代码：

```
ODS PDF FILE = "test.pdf" STARTPAGE = NEVER;

DATA CLINIC;
   INPUT ID     $ 1-3
         GENDER $   4
         RACE   $   5
         HR       6-8
         SBP      9-11
         DBP     12-14
         N_PROC  15-16;
   AVE_BP = DBP + (SBP - DBP)/3;
DATALINES;
001MW08013008010
002FW08811007205
003MB05018810002
004FB   10806801
005MW06812208204
006FB101   07404
007FW07810406603
008MW04811207006
009FB07719011009
010FB06616410610
;

ODS PDF TEXT = "MEANS PROCEDURE FOR EVERYONE";
PROC MEANS DATA=CLINIC N STD MEAN;
    VAR SBP DBP;
RUN;

ODS PDF TEXT = "TEXT FOR ANALYSIS GOES HERE";

* Vertical space should be inserted here;

ODS PDF TEXT = "MEANS PROCEDURE FOR MEN ONLY";
PROC MEANS DATA=CLINIC N STD MEAN;
    WHERE GENDER = "M";
    VAR SBP DBP;
RUN;
ODS PDF TEXT = "TEXT FOR ANALYSIS GOES HERE";

ODS PDF CLOSE; 
```

我知道如果我删除`STARTPAGE = NEVER;`表格将出现在单独的页面上，但由于这些是短表格，因此将每个小表格放在单独的页面上是没有意义的。

我只是想在注释指示的文件中插入一些垂直空间（在第一个表之后的文本和第一个表之前的文本之间）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T00:33:30.713

您可以添加一些换行符，例如：

```
ods pdf text="^{newline 1}"; 
```

可以用`1`您要添加的空白行数替换。

这是假设您的转义字符与我的相同。如果没有，请将其设置为：

```
ods escapechar="^"; 
```

# php - foreach循环中的php if语句问题

> ID：12555711
> 
> 赞同：0
> 
> 时间：2012-09-23T19:49:44.567
> 
> 标签：php, if-statement, foreach

我确实对此进行了快速搜索，但找不到与我的问题有关的任何内容。我在 foreach 循环中遇到了 if 语句的问题。我正在从一个类中提取一个类别列表，并从另一个类中选择一个类别。下面的代码（删除了 if 语句）完美运行，并返回 12 个带有填充值的选项。

```
foreach ($user_info->categories as $key=>$category) {
    $category_name = $user_info->category_names[$key];
    echo '<option value="'.$category.'">'.$category_name.'</option>';
} 
```

但是，当我在下面添加 if 语句时：

```
foreach ($user_info->categories as $key=>$category) {
    $category_name = $user_info->category_names[$key];
    if ($category = $get_article_info->category_1) {
        echo '<option value="'.$category.'" selected="selected">'.$category_name.'</option>';
    } else {
        echo '<option value="'.$category.'">'.$category_name.'</option>';
    }
} 
```

我得到一个选项列表，其中填充了文本，但所有十二个选项都有 value=""。$get_article_info->category_1 在单独回显时有效，即使没有找到，我也希望 if 语句回显 12 个选项而没有任何选择（与第一个代码示例相同）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T19:50:16.690

你正在使用`=`而不是`==` 你应该改变

```
 if ($category = $get_article_info->category_1) { 
```

至

```
 if ($category == $get_article_info->category_1) { 
```

# jquery - DB2 中的多个参数

> ID：12555716
> 
> 赞同：1
> 
> 时间：2012-09-23T19:50:27.030
> 
> 标签：jquery, db2

我正在使用 jquery 和 db2。我的执行时间低于错误

```
Error:SQL:The OdbcParameterCollection only accepts non-null OdbcParameter type objects, not OleDbParameter objects. 
```

**我的 DB2 sql**

```
Create procedure myparameters(
IN vname VARCHAR(500),
IN vurl VARCHAR(1000),
IN vyear VARCHAR(10),
IN vmonth VARCHAR(10)
)
language sql
BEGIN ATOMIC
SET vname = '~p_hostname~'; -- these tild values are coming from jquery
SET vurl = '~p_url~';
SET vmonth = '~p_month~';
SET vyear = '~p_year~';
select hour as hours,tvalue as seconds from myschema.my_view
WHERE  
    name = vname and
    url= vurl and
    month = CAST(vmonth AS INT) and
    year = CAST(vyear AS INT) and
    VALUE_TYPE ='access Time'
order by hour;
END@ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T03:11:47.263

您是否在 DB2 中编译过 SP？那个SP不行，你要怎么办？从局部变量中选择填充值？将光标返回给调用者？

首先，确保您的 SP 在 DB2 中工作，然后尝试从外部应用程序中使用。你从哪里得到这个错误？你确定显示的SP是数据库中的那个吗？

当您在 DB2 中遇到问题时，最重要的是要显示 SQLCODE。文本和消息对于理解问题毫无意义。

另外，检查 SP，一个 varchar 列最多可以有 256 个字符，而你有 1000 个。相反，小的 char 列最好使用 CHAR 而不是 VARCHAR 以减少开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:02:38.503

我的问题解决了

```
 //I defined variable in jquery like this:
var parameter;
parameter += '|p_hostname=' + $('#hname').val();
parameter += '|p_url=' + $('#hurl').val();
parameter += '|p_month=' + $('#hMonth').val();
parameter += '|p_year=' + $('#hYear').val();

--db2 SQL--
select 
    url as URL
    ,hour as Time
    ,value as URL_Time
from myschema.my_view 
where 1=1
    and name = '~p_hostname~' 
    and url ='~p_url~'
    and cast(month as int) = cast('~p_month~' as int) --Problem occured here
    and cast(year as int) = cast('~p_year~' as int) --Problem occured here
    and VALUE_TYPE ='access Time'
order by
    hour; 
```

进行上述修改后错误已消失。

# position - 如何用andengine 移动身体？

> ID：12555719
> 
> 赞同：0
> 
> 时间：2012-09-23T19:50:58.620
> 
> 标签：position, sprite, andengine

我在 andengine 中移动了一个身体，并恢复了它在 X、Y 中的位置

并使用：

`Get Position:`

`body.getPosition().x;`

`AnimatedSprite.getX();`

`Set Position:`

`Sprite.setPosition(x,y);`

但没有人为我服务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T08:47:00.780

如果我正确理解您的问题是什么，那么您正在寻找的方法是`Body.setTransform(float x, float y, float angle)`. 请记住，身体坐标以米为单位，因此您必须将像素值除以您的`PIXEL_TO_METER_RATIO`（通常为 32）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:50:00.733

你可以这样做

yourBody.setTransform(new Vector2(x/32,y/32), 0);

这个问题与 [如何使用andEngine移动精灵的主体相同？](https://stackoverflow.com/questions/6798731/how-to-move-body-of-sprite-using-andengine)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T13:49:50.903

您应该在方法 onUpdate 的 registerUpdateHandler 中执行此操作。

例子：

```
body.registerUpdateHandler(new IUpdateHandler() {

@Override
    public void reset() {

    }

    @Override
        public void onUpdate(float pSecondsElapsed) {
            body.getPosition();
            body.setPosition();
        }
}); 
```

# ruby-on-rails - 在 Rails 中创建 RESTful 链接

> ID：12555722
> 
> 赞同：0
> 
> 时间：2012-09-23T19:51:15.267
> 
> 标签：ruby-on-rails

我有一个名为的控制器`classroom`和一个名为`courses`. `courses`需要一个学生参数，即`params[:student]`

```
<%= link_to track_name, classroom_courses_path(:student => "JoeBloggs") %> 
```

这将使链接`/classroom/courses?student=JoeBloggs`

但是我需要链接是：

`/classroom/courses/JoeBloggs`

如何修改我的代码以实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T20:54:23.640

您可以通过以下路线进行：

```
get 'classroom/courses/:student' => 'classroom#cources', :as => 'get_student_cources' 
```

根据您放置此路线的位置，您的 _path 会有所不同，因此您应该`rake routes | grep get_student_cources`找出确切的路径名称。然后在您的应用程序中使用它：

```
<%= link_to track_name, get_student_cources_path("JoeBloggs".parameterize) %> 
```

注意：您应该参数化学生姓名以转义可能会破坏 URL 的字符。

# azure - 任务并行库框架和 Azure 实例的奇怪行为

> ID：12555725
> 
> 赞同：1
> 
> 时间：2012-09-23T19:51:37.373
> 
> 标签：azure, task

我需要一些帮助来解决涉及带有 Azure 实例的任务并行库的问题。下面是我的工人角色的代码。

每当我上传多个文件时，都会向队列中插入一个请求，并且工作进程会不断处理查询队列并获取消息。检索到消息后，我会执行一些长时间的运行过程。我使用了任务调度器，以便多个请求由多个实例上的多个任务实例提供服务。

现在的问题是，如果一个实例从队列中获取消息并将消息分配给任务并进行处理，现在我看到另一个实例也从队列中检索相同的消息并处理它。因此，我的任务被执行了多次。

请帮我解决这个问题。我的要求是一个 Ccre 的一个 Azure 实例只处理一项任务操作，而不是按任务进行多项操作。

```
public override void Run()
{
//Step1 : Get the message from Queue

//Step 2:  
Task<string>.Factory.StartNew(() =>
                            {
                              //Message delete from Queue
                  PopulateBlobtoTable(uri, localStoragePath);

                                        }
                                        catch (Exception ex)
                                        {
                                            Trace.WriteLine(ex.Message);
                                            throw;
                                        }
                                        finally
                                        {

                                        }
                                    }
                                    return "Finished!";                                    
                            })

                            catch (AggregateException ae)
                            {
                                foreach (var exception in ae.InnerExceptions)
                                {
                                    Trace.WriteLine(exception.Message);
                                }
                            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T22:34:21.337

我假设您使用的是 Windows Azure 存储队列，在使用存储客户端 API 时，默认不可见超时时间为 90 秒。如果您的消息在该时间段内 未完全处理并[明确删除，它将重新出现在队列中。](http://msdn.microsoft.com/en-us/library/windowsazure/ee758445.aspx)

[虽然您可以在将消息添加到队列](http://msdn.microsoft.com/en-us/library/windowsazure/hh563575.aspx)时将此不可见超时增加到最多 7 天，但您应该使用[幂等](http://en.wikipedia.org/wiki/Idempotent)操作，这意味着消息是否被多次处理并不重要。确保幂等性是您的工作，可能通过记录与每条消息相关联的唯一 ID（在表存储、SQL 数据库等中）并在您第二次看到它并且发现它已被标记为完成时忽略该消息。

您还可以查看[Windows Azure 队列和 Windows Azure 服务总线队列 - 比较和对比](http://msdn.microsoft.com/en-us/library/windowsazure/hh767287.aspx)。您会注意到服务总线队列有一些额外的构造，您可以使用它们来保证最多一次（和至少一次）交付。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T05:05:53.680

> 现在的问题是，如果一个实例从队列中获取消息并将消息分配给任务并进行处理，现在我看到另一个实例也从队列中检索相同的消息并处理它。因此，我的任务被执行了多次。

您是否通过“GET”语义获取消息？如果是这种情况，那么您为消息设置的可见性超时是多少。当您“获取”一条消息时，它应该对其他调用者不可见（在您的情况下阅读“实例”），您可以使用可见性超时期限指定特定时间段。在此处查看文档：http: [//msdn.microsoft.com/en-us/library/windowsazure/ee758454.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee758454.aspx)

# mysql - Mysql 大型 SQL 查询，截断 2000 个字符

> ID：12555727
> 
> 赞同：0
> 
> 时间：2012-09-23T19:52:06.973
> 
> 标签：mysql, heidisql

使用 HeidiSQL db 客户端时，出现`large SQL query (4.0 KB), snipped at 2,000 characters`错误。任何人都知道为什么会这样，以及我需要在下表中更改什么

请让我知道代码的哪些部分需要更新

```
-- -----------------------------------------------------
-- Table `warrington_central`.`business`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `warrington_central`.`business` (
  `id` MEDIUMINT(8) UNSIGNED NOT NULL AUTO_INCREMENT ,
  `user_id` BIGINT(20) UNSIGNED NOT NULL ,
  `alias_title` VARCHAR(255) NOT NULL ,
  `primary_category` SMALLINT(5) UNSIGNED NOT NULL ,
  `secondary_category` SMALLINT(5) UNSIGNED NOT NULL ,
  `tertiary_category` SMALLINT(5) UNSIGNED NULL ,
  `title` VARCHAR(255) NOT NULL ,
  `premisis_name` VARCHAR(50) NOT NULL ,
  `address_id` BIGINT(20) UNSIGNED NOT NULL ,
  `geolocation_id` BIGINT(20) UNSIGNED NULL ,
  `logo_path` VARCHAR(100) NOT NULL ,
  `telephone_number` VARCHAR(25) NOT NULL ,
  `mobile` VARCHAR(25) NOT NULL ,
  `fax_no` VARCHAR(25) NOT NULL ,
  `website` VARCHAR(100) NOT NULL ,
  `email` VARCHAR(60) NOT NULL ,
  `opening_times` VARCHAR(5000) NOT NULL ,
  `history_experience` VARCHAR(5000) NOT NULL ,
  `description` TEXT NOT NULL ,
  `no_of_employees` MEDIUMINT(8) UNSIGNED NOT NULL ,
  `date_establised` DATE NULL ,
  `show_google_map` ENUM('0','1') NOT NULL ,
  `show_street_view` ENUM('0','1') NOT NULL ,
  `show_comment` ENUM('0','1') NOT NULL ,
  `add_contact_form` ENUM('0','1') NOT NULL ,
  `viewable_to_members_only` ENUM('0','1') NOT NULL ,
  `link_to_user_profile` ENUM('0','1') NOT NULL ,
  `admin_package_id` TINYINT(1) UNSIGNED NOT NULL ,
  `package_start_date` DATETIME NOT NULL ,
  `package_end_date` DATETIME NULL ,
  `package_comment` VARCHAR(500) NOT NULL ,
  `created_on` DATETIME NOT NULL ,
  `updated_by` BIGINT(20) UNSIGNED NOT NULL ,
  `updated_on` DATETIME NOT NULL ,
  `approved` ENUM('Inprocess','Yes','No') NOT NULL DEFAULT 'Inprocess' ,
  `visible` ENUM('0','1') NOT NULL DEFAULT '0' ,
  `hits` BIGINT(20) UNSIGNED NOT NULL DEFAULT 0 ,
  `advertise_to` DATETIME NULL ,
  PRIMARY KEY (`id`) ,
  UNIQUE INDEX `alias_title` (`alias_title` ASC/* large SQL query (4.0 KB), snipped at 2,000 characters */
SHOW WARNINGS; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-12-22T14:37:33.983

好吧，您也可以转到工具 > 首选项 > 日志记录，并将“SQL 日志中的行”设置设置为另一个值。

但正如@doublesharp 所说，这只是表面上的东西。发送到服务器的查询肯定不会被截断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T20:03:17.013

这似乎是 HeidiSQL 的一个功能，实际上并不影响您的查询运行。如果它正在生成错误或警告，您会在关于您的查询被截断为 2,000 个字符的评论之后看到它们。

在此处查看源代码：[http ://code.google.com/p/heidisql/source/browse/trunk/source/main.pas?r=4127](http://code.google.com/p/heidisql/source/browse/trunk/source/main.pas?r=4127)

```
prefLogSqlWidth := GetRegValue(REGNAME_LOGSQLWIDTH, DEFAULT_LOGSQLWIDTH); 
```

然后使用此代码生成消息

```
// Shorten very long messages
Len := Length(Msg);
snip := (prefLogSqlWidth > 0) and (Len > prefLogSqlWidth);
IsSQL := Category in [lcSQL, lcUserFiredSQL];     if snip then begin
  Msg :=
    Copy(Msg, 0, prefLogSqlWidth) +
    '/* large SQL query ('+FormatByteNumber(Len)+'), snipped at ' +
      FormatNumber(prefLogSqlWidth) +
      ' characters */';
  end else if (not snip) and IsSQL then
    Msg := Msg + Delimiter;
  if not IsSQL then
    Msg := '/* ' + Msg + ' */'; 
```

似乎您可以在注册表中更改此值（http://code.google.com/p/heidisql/source/browse/trunk/source/const.inc?r=4133）

```
REGNAME_LOGSQLWIDTH = 'logsqlwidth';
DEFAULT_LOGSQLWIDTH = 2000; 
```

钥匙*大概就*在这里`HKEY_CURRENT_USER\Software\HeidiSQL\Servers`

# c++ - 声明输入流

> ID：12555729
> 
> 赞同：0
> 
> 时间：2012-09-23T19:52:28.103
> 
> 标签：c++

我有一个 C++ 代码

```
ifstream myfile;
myfile.open("input"); 
```

然后有如下命令：

```
myfile.getline(inp,256); 
```

问题：如何修改`myfile.open("input")`，以便与而不是`myfile`相关联？`cin``"input"`

我不想将所有`myfile.getline`命令更改为`cin.getline`.

声明`myfile=cin`不编译。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T19:54:47.207

请改用`istream&`参考：

```
std::istream& myfile(std::cin); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T19:56:01.270

将其分离成一个函数并将其`std::istream&`作为参数。`std::cin`然后，您可以根据需要执行两者`myfile`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T19:56:49.980

您可以将代码放入一个引用 std::istream 的函数中，例如

```
void process_data( std::istream & istr )
{ ... } 
```

然后你可以用任何 std::ifstream 和 std::cin 调用这个函数：

```
std::ifstream myfile;
...
process_data( myfile );
process_data( std::cin ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T20:32:16.560

如果您坚持使用 an`std::ifstream`您可以替换`std::streambuf`base `std::istream`（`std::ifstream`重载`rdbuf()`，因此您不能直接使用它）：

```
std::ifstream file;
if (use_cin) {
    file.std::istream::rdbuf(std::cin.rdbuf());
} 
```

# java - 在 Morphia 的帮助下在 Hadoop 中使用 MongoDB 数据

> ID：12555733
> 
> 赞同：0
> 
> 时间：2012-09-23T19:53:45.630
> 
> 标签：java, mongodb, hadoop, mongodb-java, mongodb-hadoop

我一直在使用 MongoInputFormat，它允许将 MongoDB 集合中的所有文档放入用 Hadoop 编写的 MapReduce 作业。

正如您在提供的示例（[this](https://github.com/mongodb/mongo-hadoop/blob/master/examples/wordcount_split_test/src/main/java/com/mongodb/hadoop/examples/wordcount/split/WordCountSplitTest.java)、[this](https://github.com/mongodb/mongo-hadoop/blob/master/examples/wordcount/src/main/java/com/mongodb/hadoop/examples/wordcount/WordCount.java)和[this](https://github.com/mongodb/mongo-hadoop/blob/master/examples/wordcount/src/main/java/com/mongodb/hadoop/examples/wordcount/WordCountXMLConfig.java)）中看到的那样，提供给映射器的文档类型是[BSONObject](https://github.com/mongodb/mongo-java-driver/blob/master/src/main/org/bson/BSONObject.java)（Java 中的接口）。

现在我也非常喜欢[Morphia](http://code.google.com/p/morphia/)，它允许将原始数据从 MongoDB 映射到更易于使用的 POJO。

因为我只能得到一个 BSONObject 作为输入，所以我考虑过使用Morphia wiki[页面底部描述的方法：](http://code.google.com/p/morphia/wiki/MappingObjects)

```
BlogEntry blogEntry = morphia.fromDBObject(BlogEntry.class, blogEntryDbObj); 
```

我的问题是这种方法需要一个[DBObject](https://github.com/mongodb/mongo-java-driver/blob/master/src/main/com/mongodb/DBObject.java)而不是[BSONObject](https://github.com/mongodb/mongo-java-driver/blob/master/src/main/org/bson/BSONObject.java)。DBObject 实际上是：

```
public interface DBObject extends BSONObject 
```

如您所见，我不能简单地从 BSONObject 转换为 DBObject 并调用提供的方法。

我如何以最好的方式处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-09T01:00:11.000

您会注意到`BSONObject`和`DBObject`接口非常相似。仅仅因为一个 converson 不存在并不意味着创建一个微不足道的 converson 并不容易：

```
class BSONDBObject extends BasicBSONObject implements DBObject {
    boolean ispartial = false;
    public BSONDBObject(BSONObject source) {
        this.putAll(source);
    }
    public boolean isPartialObject() {
        return ispartial;
    }
    public void markAsPartialObject() {
        this.ispartial = true;
    }
} 
```

现在，你只需要

```
BSONObject bson; // Filled by the MongoInputFormat
BSONBDObject dbo = BSONDBObject(bson);
EntityCache = entityCache = new DefaultEntityCache();
BlogEntry blogEntry = morphia().fromDBObject(BlogEntry.class, dbo, entityCache); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-28T15:47:46.670

我找到了一个适合我的解决方案：

*   先做成一个JSON文本字符串
*   将其解析为 DBObject
*   使用 Morphia 将其映射到一个有用的实例。

实际上，我现在有这样的东西：

```
BSONObject bson; // Filled by the MongoInputFormat

EntityCache = entityCache = new DefaultEntityCache();
String json = JSON.serialize(bson)    
DBObject dbObject = (DBObject) JSON.parse(json);
BlogEntry blogEntry = morphia().fromDBObject(BlogEntry.class, dbObject, entityCache); 
```

# ajax - 谁从 AJAX 调用中获取了 cookie？

> ID：12555736
> 
> 赞同：0
> 
> 时间：2012-09-23T19:54:13.067
> 
> 标签：ajax, session, cookies

当我通过 AJAX 调用 URL 时，它会读取哪些 cookie？会话也是如此。

谁实际运行线程？它是我的默认系统浏览器、当前浏览器还是其他实体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T19:54:13.067

这可能会令人困惑，因为这一切都发生在“幕后”。我发现，与任何其他 Javascript 一样，加载页面的浏览器是运行 AJAX 代码的浏览器。此外 - 浏览器的相同实例，这意味着会话也可以使用。

* * *

我已经运行了一些代码来得出这个结论。以下示例是在经典 ASP 中。

首先，我有一个写入这些变量的文件：

```
Response.Cookies("testing") = "One, Two, Three"
Session("testing") = "Forty One, Forty Two, Forty Three" 
```

接下来，一个文件来读取它们（并显示结果）：

```
Cookie is: 
<%
Response.Write Request.Cookies("testing")
%>
<br>
Session is:
<%
Response.Write Session("testing")
%> 
```

最后，AJAXly 的一个文件调用它们：

```
<div id="result"></div>
<script type="text/javascript">
//Different browsers initiate ajax differently
try {var oXH = eval("new Active"+"X"+"Object('MSXML2.XMLHTTP')");}
catch(e) {var oXH = new XMLHttpRequest();}

//Call page that reads the cookie
oXH.open("GET","/testCookie.asp",true);
oXH.onreadystatechange = function(){
    if ((oXH.readyState != 4)||(oXH.status != 200))
        return true;
    else
    {
        document.getElementById("result").innerHTML = oXH.responseText;
    }
};
oXH.send(null);
</script> 
```

在一个浏览器上运行第一个文件，在几个浏览器上运行最后一个文件，第一个显示：

```
Cookie is: One, Two, Three
Session is: Forty One, Forty Two, Forty Three 
```

其余显示：

```
Cookie is:
Session is: 
```

所以你有它 ：）

# c# - 使用 MySQL 进行流畅的 NHibernate 配置

> ID：12555743
> 
> 赞同：-1
> 
> 时间：2012-09-23T19:54:41.340
> 
> 标签：c#, fluent-nhibernate

大家好，我正在使用 Fluent NHibernate 和 MySQL，但我无法真正访问数据库，我在配置中遇到错误

```
private static ISessionFactory CreateSessionFactory()
{
    var mysqlconf = MySQLConfiguration.Standard
        .ConnectionString(c => c.Is("Server=localhost;Database=db;User=root;Password=boot;"));

    return Fluently.Configure().Database(mysqlconf).Mappings(m =>
                                                             m.FluentMappings.AddFromAssemblyOf<Program>()).
        BuildSessionFactory();
} 
```

请帮我配置我的代码以连接到我的数据库

错误 `An invalid or incomplete configuration was used while creating a SessionFactory. Check PotentialReasons collection, and InnerException for more detail.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T23:21:42.757

我使用 mysql.Net 连接器 6.6.2 修复了 Visual Studio 2012 的连接问题

这是下载链接 [http://cdn.mysql.com/Downloads/Connector-Net/mysql-connector-net-6.6.2.msi](http://cdn.mysql.com/Downloads/Connector-Net/mysql-connector-net-6.6.2.msi)

# node.js - 每个消息类型具有单个使用者的分布式发布/订阅

> ID：12555746
> 
> 赞同：3
> 
> 时间：2012-09-23T19:55:06.807
> 
> 标签：node.js, redis, distributed-computing, publish-subscribe

我不知道是在这里问这个更好，还是在 Programmers.SE 上问这个更好，所以如果我有这个错误，请迁移。

首先，关于我正在尝试实现的内容。我有一个 node.js 应用程序，它从一个源（socket.io 客户端）获取消息，然后对消息进行处理，这可能导致零个或多个消息返回到发送者或其中的其他客户端团体。

对于处理，我想基本上只是将消息推入队列，然后它通过可能启动自己的项目的各种消息处理器工作，最终，运行 socket.io 的位被通知“嘿，发送这个回消息”

作为一个具体的例子，假设用户登录服务，然后将该登录消息放入队列中，授权处理器在队列中获取它，执行此操作，然后将消息放回队列中，说明客户端已获得授权。这会返回到连接到客户端的 socket.io 套接字，以及可能感兴趣的其他客户端。它还可以转到可能想要对授权进行更多处理的其他子系统（查找用户信息，根据他们的数据向客户端发送更多信息等）。

如果我想要强耦合，这很容易，但我之前尝试过，它只会导致一团非常脆弱的意大利面条代码，我想避免这种情况。设置中的另一个关键是这应该是可集群的，这才是真正的问题所在。可能有多个授权处理器正在运行。但是授权消息应该只处理一次。

所以，简而言之，我正在寻找一种模式/技术，它允许我基本上拥有多个订阅者“组”来接收消息，并且每个组只处理一次消息。

我想也许让处理器的每个实例生成一个唯一的名称，该名称将用作 Reids 中的列表。然后，该名称将在某种调度处理程序中注册，并放入该组订阅者的集合中。然后，当消息到达时，调度从该集合中随机抽取一个成员，并将其放入该列表中。虽然这似乎可行，但它似乎有点过于复杂和脆弱。

核心问题是我从来没有设计过这样的系统，所以我什至不确定使用或查找合适的术语。如果有人能为我指出正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T00:24:04.360

我认为您的描述类似于[https://www.getbridge.com/](https://www.getbridge.com/)服务。我这样做了，但最终基于 zeromq 编写了我自己的，它允许您注册服务，req -> <- rec 和作为 pub / sub 工作人员的频道。

至于设计，我使用了一个客户端 -> 代理 -> 服务和通道，它们都是使用自动发现即插即用的，您让服务向打开 tcp 连接的代理注册其模式，以便其他服务器上的代理可以通信与该经纪人集团服务。然后内部服务和客户端通过首选的 unix 套接字或 ipc 通道连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T01:36:21.070

我最终围绕 redis 发布/订阅函数做了一些处理。每种类型的消息处理器都有一个“组名”，并且该组内可以有多个处理器实例（因此程序的多个实例可以运行以进行集群）。

发布消息时，我生成一个增量 ID，然后将消息存储在具有该 ID 的字符串键中，然后发布消息 ID。

在接收端，订阅者做的第一件事是尝试将它刚刚从发布者那里获得的消息 ID 添加到该组的一组接收到的消息中`sadd`。如果`sadd`返回`0`，则消息已经被另一个实例抓取，它只是返回。如果返回`1`，则从字符串键中提取完整消息并发送到侦听器。

当然，这依赖于 redis 是单线程的，我想这将继续如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T14:47:00.930

您可能正在寻找的是 AMQP 协议实现，您可以在其中让队列获取自定义交换，并实现 pub-sub 模型。

[RabbitMQ - 具有大量库的流行 amqp 协议实现](http://rabbitmq.com)

它也有 node.js 库

# validation - 使用 Backbone.js 验证时如何处理异步调用（特别是唯一性）

> ID：12555747
> 
> 赞同：3
> 
> 时间：2012-09-23T19:55:10.810
> 
> 标签：validation, node.js, mongodb, backbone.js

这与使用主干的客户端或服务器端应用程序相关。我正在尝试创建一个验证函数，对 MongoDB 或一些 REST 调用（取决于环境）进行唯一性检查。这两个调用本质上都是异步的；但是，我认为我实际上需要在这里阻止它以进行验证。如果我不返回任何内容，验证函数将假定验证已通过。

我的代码目前在服务器端看起来像这样：

```
isUnique: function (key) {
    var dfdFindOne = this.findOne({key: this.get(key)}),
        dfd = new Deferred();
    dfdFindOne.done(function (err, result) {
        console.log(result);
        dfd.resolve(true);
    });
    return dfd;
}; 
```

......这里有一些东西......
我觉得我可以在返回之前在这里做一些等到完成的功能......也许不是。我希望骨干提供回调函数或其他东西或接受某种延迟类型的东西。

```
validate: function() {
    var result = undefined;
    if(!this.isUnique(key).done(function(){
       result = "AHHH not unique!";
    });
    return result;
} 
```

一个可能的解决方案可能是强制 mongodb 的本机节点客户端同步调用事物。我想我可以对休息电话做同样的事情......但这可能是一个糟糕的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:41:15.510

您可以调用 ajax 请求并设置 async:false 以这种方式返回将具有值。但是使用 async:false 是邪恶的，因为可能会在浏览器被锁定时出现。对于服务器端，set async: false 可能并不总是有解决方法

我的建议是使用您自己的验证流程而不是 Backbone.validate 流程，因为 Backbone 的验证流程只考虑同步验证。你可以尝试这样的事情：

```
//Code in your Model
isUnique: function (callback) {
    var dfdFindOne = this.findOne({key: this.get(key)});
    dfdFindOne.done(function (err, result) {
        console.log(result);
        callback(result);
    });
};
validate: function(callback) {
    this.isUnique(callback);
}

//trying to validate before save
model.validate(function(result){
  if( result == 'whatexpected'){
     model.save();
  }
}); 
```

# xcode - 使用情节提要时 iPhone 模拟器没有响应

> ID：12555755
> 
> 赞同：0
> 
> 时间：2012-09-23T19:56:11.783
> 
> 标签：xcode, xcode4, uibutton, ios-simulator, xcode4.5

我对 iOS 编程很陌生。我已经做了大约一年的 Objective-C，现在我想开始为 iPhone 制作应用程序。不过，我想我错过了一些非常简单的东西。我所做的是这样的：

首先，我使用 TestApp 作为产品名称创建了一个新的*单一视图应用程序。*我启用*了 Use Storyboards*、Use *Automatic Reference Counting*和*Include Unit Tests*。创建项目后，我将 UIButton 拖到情节提要文件中的视图上。

**请注意，我没有编写任何代码。**我在 iPhone 模拟器中启动了我的应用程序并按下了按钮，但它没有响应。我知道我没有为按下按钮分配动作，但是按钮的渐变没有改变，我知道它应该改变。我的视图和按钮的*User Interaction Enabled*属性均已启用。

最近，我在 Xcode 中创建了一些运行良好的应用程序，但我没有在这些项目中使用故事板。因此，我猜想在使用我不知道的情节提要时还有一些额外的事情要做。我正在使用 Xcode 4.5 和 iPhone 6.0 模拟器。

我在 ViewController 的方法中编写了`NSLog(@"View was loaded.");`语句，`viewDidLoad`以确保实际加载了该视图控制器。（我知道如果是错误的视图控制器，我的按钮不会显示，但我这样做只是为了确保。）

我还在我的 ViewController 中编写了一个 changeTitle: 方法，以便在按下按钮后将按钮的标题更改为*新标题*，以防万一按钮工作但它的渐变不会响应点击。我将它链接`IBAction`到我的按钮，但它没有被调用。

在我的 ViewController 中，我创建了一个连接到我的按钮的 UIButton 的 IBOutlet。在`viewDidLoad`ViewController 的方法中，我将按钮的标题更改为*New Title*，这确实有效。在 iOS 模拟器中启动我的应用程序时，我的按钮的标题更改为这个新标题。但是，按钮本身仍然没有响应。

作为最后一次尝试，我还在`[button setEnabled:YES];`ViewController 的`viewDidLoad`方法中进行了编写，但这并没有帮助。我的按钮仍然没有响应任何点击。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:48:43.933

这很奇怪。我的打印机有问题，所以我重新启动了计算机。在此之后，这个问题也突然解决了（就像我的打印机问题一样）。我不确定这会如何影响任何事情，但我很高兴它再次起作用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-22T10:11:04.660

遇到同样的问题。显然内容重置模拟器对我有用这很奇怪..

# c# - C# 中的事件处理程序和后台工作程序错误

> ID：12555756
> 
> 赞同：1
> 
> 时间：2012-09-23T19:56:39.197
> 
> 标签：c#, class, backgroundworker, visual-studio-2012

我对 C# 有点陌生，我正在编写一个概念验证客户端/服务器应用程序。现在我正在尝试使用后台工作人员从类中更新列表框。这样我就可以提供基本的日志记录。我知道仅使用列表框并不是最佳选择。

我已经根据以下代码向我的班级添加了一个事件处理程序： [BackgroundWorker report progress from external Class?](https://stackoverflow.com/questions/10700348/backgroundworker-report-progress-from-external-class)

但是我收到以下错误：无法分配给“ReportProgress”，因为它是“方法组”

我试图减少我的代码只显示相关部分。另外我还没有完全实现上一课的代码，我只想知道我缺少什么导致错误。我觉得这可能很简单。

**Form1.cs**

```
namespace V12
{
    public partial class Form1 : Form
    {
    //Background Workers
    private BackgroundWorker serverWorker = new BackgroundWorker();

    public Form1()
    {
        InitializeComponent();
        //Server Backgroundworker
        serverWorker.WorkerReportsProgress = true;
        serverWorker.ReportProgress += new EventHandler<Server.ProgressArgs>(serverWorker_ReportProgress); //Error on this line
        serverWorker.DoWork += new DoWorkEventHandler(serverWorker_DoWork);
    }

private void serverWorker_DoWork(object sender, DoWorkEventArgs e)
    {
        //my work is here

    }
    protected void serverWorker_ReportProgress(object sender, Server.ProgressArgs e)
    {
        serverWorker.ReportProgress(e.Percentage, e.Message);
    }
} 
```

**服务器.cs**

```
namespace V12
{
public sealed class Server
{
    //Allows for updating of control on the UI Thread
    public EventHandler<ProgressArgs> ReportProgress;
    // Eventargs to contain information to send to the subscriber
    public class ProgressArgs : EventArgs
    {
        public int Percentage { get; set; }
        public object Message { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T19:58:40.577

`ReportProgress`是一种方法。

您正在尝试向**`ProgressReported`**事件添加处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T20:02:05.020

我想你把自己弄糊涂了。`ReportProgress`不是事件委托，而是方法。看看[BackgroundWorker.ProgressChanged 事件](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.progresschanged.aspx)。我认为这是您正在寻找的处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T20:27:42.973

看看这是否提供了您需要的线索...

```
 using System;
 using System.Collections.Generic;
 using System.ComponentModel;
 using System.Data;
 using System.Drawing;
 using System.Linq;
 using System.Text;
 using System.Windows.Forms;

 namespace WindowsFormsApplication2
 {
    public partial class Form3 : Form
    {
        Server server;

        public Form3()
        {
            InitializeComponent();

            server = new Server();

            BackgroundWorker wrkr = new BackgroundWorker();
            wrkr.WorkerReportsProgress = true;
            wrkr.RunWorkerCompleted += new RunWorkerCompletedEventHandler(wrkr_RunWorkerCompleted);
            wrkr.ProgressChanged += new ProgressChangedEventHandler(wrkr_ProgressChanged);
            wrkr.DoWork += new DoWorkEventHandler(wrkr_DoWork);
        }

        void wrkr_DoWork(object sender, DoWorkEventArgs e)
        {
            // do work...perhaps you might be incrementing a progress meter...
            for (int i = 0; i < 100; i++)
            {
                ((BackgroundWorker)sender).ReportProgress(i,"Some message...");
            }

            e.Result = "some result...";
        }

        void wrkr_ProgressChanged(object sender, ProgressChangedEventArgs e)
        {
            // here you can use e.ProgressPercentage and e.UserState
            // to change the state of something on the thread the worker was created on...
            server.Percentage = e.ProgressPercentage;
            server.Message = e.UserState.ToString();
        }

        void wrkr_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            // here you can do some final stuff. clean-up etc.
            server.Percentage = 100;
            server.Message = e.Result.ToString();
        }
    }
} 
```

# php - session_regenerate_id()：通过安全扫描程序运行站点时，会话对象销毁失败？

> ID：12555761
> 
> 赞同：1
> 
> 时间：2012-09-23T19:57:10.183
> 
> 标签：php, security, session

这是正常的吗，因为我尝试了两种不同的扫描仪，它们似乎都产生了相同的错误，所以我假设这可能与扫描仪的工作方式有关 - 因为我在正常查看网站时没有收到这些错误（该网站也可以正常运行 - 正如预期的那样）。

当然，我可以忽略它并清除错误日志（当我完成扫描我的网站时），但我只是好奇并想知道为什么（以及是否有“修复”）？

供参考：

*   扫描网站时；我反复收到相同的错误（在`session_regenerate_id(true)`包含的页面上）。

*   我试过的扫描仪都是免费的 Firefox Add-ons；'SQL Inject Me'（由 Security Compass 提供）和 Websecurify。

*   我正在我的网站上运行这些测试（通过'localhost'）。

*   会话是基于文件的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:05:55.707

问题在于您的代码和处理会话的方式。

您正在运行一个扫描仪，它正在浏览您的网站并试图操纵各种输入，然后分析响应以查看攻击是否成功。

当您`session_regenerate_id(true)`在页面上时，该方法调用会尝试删除当前会话并开始一个新会话。

在扫描仪上发生这种情况的原因是，扫描仪可能会通过一些典型用户不会采用的应用程序的路径。因此，如果扫描程序点击了一个执行 PHP 代码的 URL，该 URL 执行了其中的 PHP 代码`session_regenerate_id(true)`并且没有当前会话，那么您将收到该错误。

理想情况下，您应该在调用之前检查一下`session_regenerate_id(true)`当前会话是否存在。如果不是，您应该将用户带到登录页面并要求他们重新进行身份验证。

请让我知道，如果你有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T19:40:25.910

> 当然，我可以忽略它并清除错误日志（当我完成扫描我的网站时），但我只是好奇并想知道为什么（以及是否有“修复”）？

将您的 PHP 版本升级到当前稳定版本：PHP 5.4.7。

再次运行安全检查。如果错误仍然发生（我非常怀疑），这需要进一步检查。在这种情况下（甚至更早），您应该将会话[配置](http://php.net/manual/en/session.configuration.php)（它比您想象的要大）添加到问题中。

触发此事件的代码也是未知的。该函数[`session_regenerate_id()`](http://php.net/session_regenerate_id)通常在会话管理的上下文中使用。

因为会话的概念不是那么容易掌握许多开发人员（包括我）在该领域经常犯错误。一些有用的调试功能：

*   [`session_status`](http://php.net/session_status)
*   [`headers_list`](http://php.net/headers_list)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-11-13T16:49:53.043

尝试使用`session_write_close();`之前`session_regenerate_id(true)`。问题的一个可能原因是您的代码正在创建并行查询。我遇到了同样的麻烦，这对我有帮助。

# cordova - android和phonegap上的文档与窗口对象 - jquery mobile

> ID：12555763
> 
> 赞同：0
> 
> 时间：2012-09-23T19:57:17.163
> 
> 标签：cordova, jquery-mobile

我有一个简单的例子，当用户改变移动设备的方向时会做一些事情：

```
<script>
$(document).on("orientationchange", function(event) {
if (event.orientation === "landscape") {
    // We have changed to landscape orientation, so we have more room
    // Make the headers and footers longer!
    $("header h1").text("jQuery Mobile Demonstration Application")
    $("footer h3").text("O'Reilly Multimedia Services")
} else {
    // Back in portrait orientation, so return header and footer to original length.
    $("header h1").text("jQuery Mobile")
    $("footer h3").text("O'Reilly")
}
})
</script> 
```

[我从https://github.com/jreid01/jqm-api](https://github.com/jreid01/jqm-api)下载了这个例子（example-3），
它​​是`O'Reilly Webcast: The jQuery Mobile API In-Depth` [http://www.youtube.com/watch?v=I6Y4a0hA8t](http://www.youtube.com/watch?v=I6Y4a0hA8tI)
的源代码 我用 PhoneGap 加载了这个例子：

```
public class MainActivity extends DroidGap {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/example-3.html");
    }
} 
```

现在，这个例子在我的 nexus-one 和 android 模拟器上都不起作用。在做了一些实验之后，当我更改`document`为`window`. 对象不起作用
的原因是什么？`document`我在这里缺少什么概念？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:37:38.680

这很简单。“orientation”事件不会在**文档**对象上触发，而是在**窗口**对象上触发。您下载的示例中似乎存在错误。

# codeigniter - 在 codeigniter 中组织 URI 段

> ID：12555765
> 
> 赞同：0
> 
> 时间：2012-09-23T19:57:29.953
> 
> 标签：codeigniter, codeigniter-2

```
function orders(){

        $order_id = $this->uri->segment(3);

        if($order_id){
            $data['main_content'] = "admin-order-page";
            $data['order_id'] = $order_id;
            $this->load->view("includes/cp-template",$data);
        }else{
            $data['main_content'] = "admin-orders";
            $this->load->view("includes/cp-template",$data);
        }

    } 
```

以上是我的控制器中的订单方法，所以 www.myexample.com/orders

我想知道处理 url 中传递的信息的正确方法是什么。在我的示例中，您只需将 /orders 转到特定视图，如果附加了 ID，/orders/23，它将转到产品页面。

我现在想在我的 /orders 视图上添加分页，并希望在 url 中传递页码，例如 /orders/page/2。我是否应该添加更多逻辑来查找“页面”的 uri？

有没有更好的方式来组织这一切？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T02:15:05.423

如果你有一个像**www.myexample.com/orders/page/2/4**这样的网址，你可以阅读下面的例子：

```
class Orders extends CI_Controller{

    public function __contruct()
    {
        parent::__contruct();
    }

    public function page($page_number, $limit)
    {
        echo 'page number ' . $page_number . ' with limit of ' . $limit;
            //the above line prints:  "page number 2 with limit of 4"
    }
} 
```

请记住，URI 模式是根据以下内容构建的：

```
domain.com/{controller}/{function}/{parameter 1} ... , {parameter N} 
```

# c++ - 带有很多参数的函数重载

> ID：12555769
> 
> 赞同：0
> 
> 时间：2012-09-23T19:57:51.293
> 
> 标签：c++, overloading

假设我在 C++ 中有这个构造函数：

```
 A::A( std::string const& name,
       std::string const& type,
       std::vector<B> const& b_vec,
       bool unique )
     : _name(name), _type(type), _b_vec(b_vec), _unique(unique)
     { }; 
```

我想在参数是右值的情况下重载这个构造函数（我想在那里使用移动语义）。

```
 A::A( std::string && name,
       std::string && type,
       std::vector<B> && b_vec,
       bool unique )
     : _name(name), _type(type), _b_vec(b_vec), _unique(unique)
     { }; 
```

当所有参数都是右值时，上面的工作正常，但假设如果只有其中一些是在下一个示例中：

```
 // create some lvalues somehow
 std::string name   = "stack overflow";
 std::vector<B> vec = { ... }; // implementation of B's constructot is not important

 // call a mixed constructor
 A new_A_instance(name, "cool-website", vec, true); 
```

据我了解，由于 'const&' 不能绑定到 '&&' 但 '&&' 可以绑定到 'const&' 将使用第一个（非移动）构造函数。

这似乎不是最理想的，因为四个参数中的两个可以移动（因为它们是右值）而不是被复制（如第一个构造函数中的情况）。

因此，对于这种特定情况，我可以重载运算符，但可以轻松地想象其他参数是右值而其他参数是左值的情况。我应该为每种情况重载构造函数吗？随着参数数量的增加，这将组合导致非常多的重载......

我有点*觉得*有更好的解决方案（也许使用模板，但我的模板知识低得可耻）。

注意：这个问题与重载传递引用函数以移动函数本身无关，但我发现这是一个很好的例子（特别是因为重载*感觉*没有太大不同）。另请注意，我只是以构造函数为例，但重载函数可以是任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T20:00:03.867

按值传递，这就是移动语义的用途：

```
 A::A(std::string name, std::string type, std::vector<B> b_vec, bool unique )
   : _name(std::move(name)), _type(std::move(type)), _b_vec(std::move(b_vec)),
     _unique(unique)
 { }; 
```

这在每种情况下都有预期的行为。按值传递临时值允许编译器执行*复制省略*，它几乎总是这样做。

请注意，在您的第二个代码中，由于您不使用`std::move`. 请注意，当你写

```
void foo(bar&& x)
{
    ...
} 
```

然后在 的体内`foo`，`x`是一个**左值**。有名字的对象*总是*左值。`std::move(x)`在此主体内，如果您打算`x`作为右值传递，则必须使用。

# mysql - 从数据库输出数据时的问号

> ID：12555771
> 
> 赞同：1
> 
> 时间：2012-09-23T19:58:05.207
> 
> 标签：mysql, character-encoding

我在我的数据库中的所有表和列中的任何地方都将 charset 设置为 utf-8。它仍然无法正确显示，并且问号出现在非拉丁字母出现的地方。是否还有其他事情需要完成，或者我只是忘记了一些事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T20:50:31.797

好吧，我通过在 Notepad++ 中将所有 PHP 文件的格式更改为 ANSI，然后添加`<meta charset="ISO-8859-1">`到我的标题中来修复它。虽然感觉不像是一个合法的修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-31T18:11:18.567

`UTF-8`在您的 PDO 连接中设置字符集，如下所示：

```
"mysql:host=localhost;dbname=mydbname;charset=utf8,username,password" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-31T15:39:15.363

这对我有用。

```
mysql_set_charset('utf8',$mysql); 
```

# android - Android：根据手机规格更改布局

> ID：12555772
> 
> 赞同：0
> 
> 时间：2012-09-23T19:58:20.560
> 
> 标签：android

我的应用在我的手机和我的 AVD 上看起来很棒。不过，在我的共同开发者的手机上，他的屏幕更小，并且没有显示所有内容。有没有办法检测用户屏幕有多大并从那里调整布局？如果是这样，有人可以链接我一个教程吗？谢谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T20:02:12.023

Android 有两篇关于这个主题的优秀文章：

*   [支持不同的屏幕尺寸](http://developer.android.com/training/multiscreen/screensizes.html)
*   [支持多屏](http://developer.android.com/guide/practices/screens_support.html)

# c++ - 遍历地图并删除动态分配的元素

> ID：12555773
> 
> 赞同：1
> 
> 时间：2012-09-23T19:58:21.170
> 
> 标签：c++, visual-studio-2010, memory-leaks, sdl

这是我的代码：

```
void SurfaceManager::SurfaceManagerDelete()
{
    for(map<string,SurfaceManager*>::iterator Iter = SurfaceList.begin(); Iter != SurfaceList.end(); ++Iter)
    {
        delete (*Iter).second;

        (Iter) = SurfaceList.erase(Iter);
    }

   SurfaceList.clear();
} 
```

为什么当我使用 VLD 扫描时会导致多次内存泄漏？我知道这与我从元素中删除内存的方式有关，特别是这一行“（Iter）= SurfaceList.erase（Iter）;”，但是我想知道为什么，以及我应该如何从列表中正确删除元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T20:35:19.770

问题是for循环中的++Iter。那是因为

```
(Iter) = SurfaceList.erase(Iter); 
```

已经更新 Iter 以指向擦除后的元素，如增量。

所以 ++Iter 然后跳过另一个元素，实际上你最终删除了所有其他元素！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T20:00:19.257

您必须注意对正确的迭代器进行操作。`++Iter`在您的情况下，由于循环中的原因，您正在跳过一个迭代器`for`，有时您最终会调用`++`end 迭代器。

通常的变异关联容器循环是这样的：

```
for (auto it = m.cbegin(); it != m.cend() /* not hoisted */; /* no increment */)
{
    if (delete_condition)
    {
        // other stuff, like "delete it->second;"
        m.erase(it++);
    }
    else
    {
        ++it;
    }
} 
```

或者，如果您要处理整个容器，请不要使用`erase`：

```
for (auto & p : m) { delete p.second; }

// or alternatively

for (auto it = m.begin(); it != m.end(); ++it) { delete it->second; }

m.clear(); 
```

（我想指出，我`clear()`很少在容器上找到使用 for 。通常在 C++ 中，您的对象范围很窄，以便它们只存在最少的必要时间，当您需要新地图时，您只需创建一个新的，而不是清理和重新使用一个寿命太长的。）

# actionscript-3 - AS3 问题：使用按钮调用另一个影片剪辑上的特定标签帧

> ID：12555778
> 
> 赞同：1
> 
> 时间：2012-09-23T19:58:34.233
> 
> 标签：actionscript-3

我试图弄清楚如何制作它，以便我可以单击主时间轴上的一个按钮并让它跳转到主时间轴上一个单独的影片剪辑内的一个帧。这是我目前拥有的愚蠢代码，但这是经过大量更改后的，所以谁知道我现在在哪里。这是一个简单的虚拟宠物游戏，我不知道为什么我在这个特殊问题上遇到这么困难。我错过了一些大事。

```
function Shower(event:MouseEvent):void {
MovieClip(this.Egg).gotoAndPlay("shower");
}

// buttons
clean_btn.addEventListener(MouseEvent.CLICK, Shower); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T20:17:56.003

看起来你是在时间轴上写的，而不是在课堂上。您无需`MovieClip(this.Egg)`访问您正在尝试播放的影片剪辑。相反，它应该有一个实例名称（例如，“my_mc”），您可以这样称呼它：

```
function Shower(event:MouseEvent):void {
    my_mc.gotoAndPlay("shower");
}

// buttons
clean_btn.addEventListener(MouseEvent.CLICK, Shower); 
```

# iphone - 在 xcode 4.3 中使用 UITableViewController xib 创建 UITabbarController

> ID：12555782
> 
> 赞同：0
> 
> 时间：2012-09-23T19:58:41.263
> 
> 标签：iphone, ios, ipad, uitabbarcontroller, uitableview

我是 iPhone 新手，我想创建带有 4 个选项卡的 UItabbarController，每个选项卡都包含用于 iPhone 和 iPad 的 xib 中的 UItableViewControllers，并且需要每个表的 (h & m) 文件。

考虑到我将 Xcode 4.3 与 iPhone 5.1 一起使用，并且我不想使用情节提要。

有什么好的教程可以做到这一点吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:38:52.713

首先，您不需要创建新的 UItabbarController。您可以使用默认的标签栏控制器，您需要将 4 个标签栏项目作为 UItableViewControllers 添加到 uitabbar 控制器。

你可以参考这个关于tabbabcontrollers的教程

[http://www.edumobile.org/iphone/iphone-programming-tutorials/tabbarcontroller-with-navigationcontroller-and-tableview-in-iphone/](http://www.edumobile.org/iphone/iphone-programming-tutorials/tabbarcontroller-with-navigationcontroller-and-tableview-in-iphone/)

# php - 检查用户是否在线（每次访问页面时更新活动时间）

> ID：12555783
> 
> 赞同：2
> 
> 时间：2012-09-23T19:58:46.313
> 
> 标签：php, sql, codeigniter

所以基本上，我有一个 cronjob，它将检查用户数据库活动时间，如果用户在过去 10 分钟内没有做任何事情，它会自动注销用户并将其状态设置为离线。

现在关于困难的部分 - 在每次用户页面访问时，我都会更新数据库，并插入新的活动时间，例如，如果他访问主页，数据库将自动更新，如果他会再次访问用户在线页面，数据库将更新 ec 这发生在所有用户身上。

所以问题是 - 有没有其他更好的解决方案，或者这是足够好的解决方案？

它会长期造成任何麻烦，还是会因为数据库连接过多而降低网站速度？

希望你明白我的意思:)！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T03:53:06.433

如果您的站点登录是基于会话/cookie 的，您可以将会话/cookie 超时设置为 10 分钟，然后在每次有人访问新页面时更新该超时/到期。这种方法不会那么密集，但也不像有人可以修改 cookie 那样安全。

过去，我已经成功地做到了这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T08:39:38.247

基本上让会话持续 10 分钟，并且`UPDATE`在每个页面加载时发送一个简单的内容并不是什么大不了的事。我可以向你保证，还有比这更糟糕的方法来超载你的数据库。例如，每次您需要用户的值时，每次都从数据库中提取它，而不是通过 cookie 或全局值存储所有值。

不必担心这种方法，因为每个会话只需要多 1 个命令。一些代码可以在程序员没有意识到的情况下对每个页面请求运行 25 个*不必要的查询。*

* * *

如果你想知道有多少在线，只需通过 cron 运行它：

```
$str_time = date('Y-m-d H:i:s', strtotime('-10 Minutes'));

$query = $this->db->query("
SELECT COUNT(*) AS online
FROM users
WHERE last_online >= ?
", array($str_time));

if ($query->num_rows())
    $int_online = $query->row()->online;
else $int_online = 0;

// Save into database, .json file or whatever 
```

# symfony - 在哪里设置 ACL：实体或控制器

> ID：12555784
> 
> 赞同：1
> 
> 时间：2012-09-23T19:58:49.293
> 
> 标签：symfony, acl

我开始在我的应用程序中实现一些安全功能。最初尝试实施一些 ACL 时，我遇到了两个我无法弄清楚的问题：

1.  在哪里实现 acl 的设置我可以在创建我的实体的控制器操作中或在具有生命周期回调的实体本身上进行。例如，我有一个包含一些用户实体的组实体。为所有组实体设置生命周期回调的查看或编辑访问权更容易。我宁愿让我的控制器尽可能纤薄。或者这是一个不好的方法？我需要实体中的安全容器。您对此有何看法？
2.  如何检查相关实体：扩展我之前的示例，我有一个组，这个组可以举行一些约会。在显示或编辑约会的操作中，我只想检查该组。这主要是为了使用“查看”权限。这意味着如果有人在持有约会的组中，该人也应该能够查看约会。我想用 JMSExtraSecurityBundle 和 SecureParam 来实现它，但我不知道该怎么做。

# xcode4 - 从视图切换回标签栏视图

> ID：12555785
> 
> 赞同：0
> 
> 时间：2012-09-23T19:59:03.673
> 
> 标签：xcode4

我正在尝试学习如何使用 Xcode 4.5。

我创建了一个标签栏，并希望从一个标签栏视图（配置文件）切换到另一个视图（设置 - 不在标签栏菜单内），然后返回。我使用下面的代码去：

```
- (IBAction)goToProfile:(id)sender {

    ProfileViewController * profile = [[ProfileViewController alloc] initWithNibName:nil bundle:nil];
    [self presentViewController:profile animated:YES completion:nil]; 
```

转到设置效果很好，但是当我从设置视图返回到配置文件时，标签栏菜单消失了。如何返回配置文件视图并再次查看标签栏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T10:35:28.133

我有同样的问题。您可以使用一些代码来修复它，也可以在情节提要中进行一些更改。如果您在选项卡栏控制器和所选选项卡的视图（在您的情况下为配置文件）之间放置一个导航控制器。如果您使用 push segue 转到下一个视图，它会将 Tabbar 带到下一个视图以及“返回”按钮。（您的情况下的设置）

这是我的应用程序的一个示例，我的 jubla3ForthViewController 将是您的 ProfileViewController，而我的 jubla3PDFOnlineViewController 之一将是您的 SettingsViewController。

[http://www.abload.de/image.php?img=bildschirmfoto2013-01x2kti.png](http://www.abload.de/image.php?img=bildschirmfoto2013-01x2kti.png) （由于我的声誉低，我不允许发布直接图片）

我希望这很有用。如果是不要忘记推动向上箭头。

# php - 如果 $assoc 设置为 true，json_decode 是否可以返回不是数组或 null 的类型？

> ID：12555786
> 
> 赞同：1
> 
> 时间：2012-09-23T19:59:09.537
> 
> 标签：php

我正在使用 php 的 json_decode 来解码一些 json，但我得到了 /var/log/apache/error_log:PHP 致命错误：不能将字符串偏移量用作数组

```
$data = json_decode($this->body, true);
if (is_null($data))
{
    throw new Exception(...);
}
...
$foo = $data['foo']['bar']; // this line causes the fatal error
... 
```

根据一些研究，可能导致错误的唯一方法是 $data 是字符串。但由于 $assoc = 为 true 的 json_decode 似乎可以保证 null 或数组，因此不应如此。谁能想到该代码如何可能导致错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T20:04:53.913

当然`json_decode`可以返回其他类型，和`$assoc`它无关。

```
$a = json_encode('foobar'); // returned JSON: "foobar"
$b = json_decode($a, true); // $b is a string

$a = json_encode(true); // returned JSON: true
$b = json_decode($a, true); // $b is a boolean 
```

`$assoc = true`only 表示将 JSON 中的*对象*（关联数组）解码为 PHP 关联数组，而默认将其解码为 PHP 对象。它不会影响 JSON 中的任何其他类型的数据，因此如果您的根 JSON 元素不是数组，则`json_decode`也将返回非数组。

# java - 如何使用 Java 将 h.264 直播流编码为 RTP 数据包

> ID：12555788
> 
> 赞同：2
> 
> 时间：2012-09-23T19:59:26.270
> 
> 标签：java, android, h.264, rtsp, rtp

我正在为 Android OS 开发一个应用程序，我需要一个来自摄像头的实时解码视频流，它使用 h.264 编解码器编码，将帧数据转换为 RTP 数据包并将数据包发送到服务器。

首先，可以尝试在 PC 上实现从 HDD 中预先录制的视频文件（带 h.264 的 mp4）中读取视频，以简化开发和调试。

有现成的解决方案吗？有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T13:51:46.350

请参阅 Spydroid。它将摄像机输入通过管道传输到 H.264 编码器，并将输出转换为 RTP 数据包：

[http://code.google.com/p/spydroid-ipcamera/source/browse/src/net/majorkernelpanic/streaming/rtp/H264Packetizer.java](http://code.google.com/p/spydroid-ipcamera/source/browse/src/net/majorkernelpanic/streaming/rtp/H264Packetizer.java)

# c# - 网络农场聊天存储

> ID：12555789
> 
> 赞同：1
> 
> 时间：2012-09-23T19:59:31.193
> 
> 标签：c#, asp.net, sql, chat

我在由网络农场托管的网站上运行了一个聊天应用程序（网络服务），但我不知道如何临时存储聊天消息。我使用长轮询来节省资源，并且我指定了一个共享机器密钥。

因为它在网络场上运行，所以 HttpApplicationState[将无法工作](http://msdn.microsoft.com/en-us/library/ms178594%28v=vs.85%29.aspx)，并且将每条消息保存到我的数据库会导致大量过载和开销，我怀疑这不是一个好主意。

那么有没有其他方法可以将消息保存在服务器“内存”中，注意：在网络场中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T20:13:20.100

经典的解决方案是使用分布式缓存；它在 .Net 世界中并不像它可能的那样受欢迎，但这是 MSDN[上的](http://msdn.microsoft.com/en-us/magazine/dd942840.aspx)一篇文章；微软有一个[产品](http://msdn.microsoft.com/en-us/library/cc645013.aspx)，或者你可以使用开源的 Memcached，你还可以获得 .Net 客户端库和 Windows 版本。

请注意，虽然分布式缓存在工作时非常酷，但它确实引入了许多额外的复杂性，以及让错误潜入应用程序的令人兴奋的新方法。如果我真的，真的需要，我只会走这条路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T22:56:36.907

[我在这里](http://www.codeproject.com/Articles/180726/State-management-and-ways-to-handle-Cache-in-a-Web)找到了有关该主题的更多帮助。它介绍了不同的缓存技术。无需使用第三方软件。

# jquery - jQuery 将页面加载到 div 函数中

> ID：12555790
> 
> 赞同：0
> 
> 时间：2012-09-23T19:59:40.263
> 
> 标签：jquery, html

我正在使用此功能将页面加载到 div

```
$(function() {
    $('a[href=myurl]').click(function() {
        $('#loadHere').load('myurl');
        return false;
    });
}); 
```

这工作正常我正在为多个链接测试此代码，该链接找到类属性 InPage：

```
$('a.InPage').click(function() {
    $('#loadHere').load( $(this).attr('href') );
    return false;
}); 
```

在我的测试页面中： [http ://www.tremyfoel.co.uk/jqueryTest2.htm](http://www.tremyfoel.co.uk/jqueryTest2.htm)

但是由于某种原因，尽管我坚持不懈地努力/修修补补不起作用，但对我来说并不明显。逻辑和语法似乎很好，jsFiddle 没有标记任何错误，我尝试了不同的 jQuery 版本（出于某种原因，需要 1.4.0）。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T20:03:04.177

改变

```
<script type="text/javascript">
$('a.InPage').click(function() {
    $('#beachInfo').load($(this).attr('href'));
    return false;
});
</script> 
```

到

```
<script type="text/javascript">
$(function() {
    $('a.InPage').click(function() {
        $('#beachInfo').load($(this).attr('href'));
        return false;
    });
});
</script> 
```

您需要将其他脚本包装`$(function() {`在工作代码所在的相同文档就绪代码中。否则浏览器会在元素加载之前尝试运行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T20:01:58.880

运行第二个脚本时，您的元素不存在。

您需要在页面加载完成后运行它。

# python - 查找排序数组联合中的第 k 个最小元素

> ID：12555793
> 
> 赞同：4
> 
> 时间：2012-09-23T20:00:02.447
> 
> 标签：python, algorithm

我正在研究有关在[leetcode](http://www.leetcode.com/2011/01/find-k-th-smallest-element-in-union-of.html)的两个排序数组的联合中查找第 k 个最小元素的文章。我不认为该算法是正确的。有这样一行：**我们观察到当 Ai < Bj 时，Ai < Bj-1 一定是真的。另一方面，如果 Bj < Ai，则 Bj < Ai-1。**. 怎么可能对任何`i`和都是真的`j`？

其次，这条线也让我感到困惑：**我们试图通过比较 A 和 B 的中间元素来解决这个棘手的问题，我们将其识别为 Ai 和 Bj。如果 Ai 在 Bj 和 Bj-1 之间，我们刚刚找到了第 i+j+1 个最小元素**，尽管结果是正确的。谁能解释原因？我真的很想了解算法，我已经通过合并数组来完成它，但是与这里的`O(N)`时间相比，这需要时间`O(log N)`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-23T20:24:50.483

您正在孤立地解释这些陈述，但它们是相互建立的。这是（我认为）您所指的文本：

> 保持不变量 i + j = k – 1，如果 Bj-1 < Ai < Bj，则 Ai 必须是第 k 个最小的，否则如果 Ai-1 < Bj < Ai，则 Bj 必须是第 k 个最小的. 如果满足上述条件之一，我们就完成了。如果没有，我们将使用 i 和 j 作为枢轴索引来细分数组。但是怎么做？我们应该丢弃哪一部分？Ai 和 Bj 本身呢？
> 
> 我们观察到，当 Ai < Bj 时，Ai < Bj-1 一定是真的。另一方面，如果 Bj < Ai，则 Bj < Ai-1。为什么？

将其分解为子命题会产生以下解释（请记住，索引从 开始`0`，但这`A0`是第*一个*最小的项目，并且`A1`是*第二*小的项目，依此类推）：

1.  `i + j = k - 1`（不变的，根据定义）
2.  假设`Bj-1 < Ai < Bj`. 那么`Ai`必须是`k`最小的。这是因为`Ai`is 大于`i`items in`A`并且大于`j`items in `B`。所以它大于`i + j = k - 1`项目的总数。这意味着它在合并列表中的*索引*将是，因此它将是该列表中的第 th 项。`A|B``k - 1``k`
3.  假设`Ai-1 < Bj < Ai`. 然后`Bj`必须是第`k`th 最小的，根据 2 中的相同推理。
4.  现在假设 (a)`Bj-1 < Ai < Bj`和 (b)`Ai-1 < Bj < Ai`都是*false*。那么很明显，如果`Ai < Bj`then `A1 < Bj-1`，因为否则 (a) 将为真。同样，如果`Bj < Ai`then `Bj < Ai-1`，因为否则， (b) 将为真。

我相信你的话，你想要解释*这些陈述*而不是整个算法。（但如果你愿意，我会说更多。）

另请注意，正如[Daniel Fischer](https://stackoverflow.com/a/12555973/577088)的回答提醒我的那样，上述推理仅在没有重复项的情况下成立；称该命题为 0。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-23T20:26:51.607

> 我们观察到什么时候`Ai < Bj`，那么它一定是真的`Ai < Bj-1`。另一方面，如果`Bj < Ai`，那么.. 对于任何和`Bj < Ai-1`怎么可能是真的？`i``j`

并非所有对`i`和都是如此`j`。文章考虑了一种特殊情况。

首先，假设没有重复，即使是 和 的共同元素也`A`没有`B`。二、结论是

```
Ai < Bj ==> Ai < Bj-1,   resp.  Bj < Ai ==> Bj < Ai-1 
```

是在以下条件下**做出**的

```
Bj-1 < Ai < Bj  resp. Ai-1 < Bj < Ai 
```

持有。因此，通过排除这些配置，`Ai < Bj ==> Ai <= Bj-1`并`Bj < Ai ==> Bj <= Ai-1`立即遵循，然后严格不等式遵循不存在重复的假设。

> 我们尝试通过比较 A 和 B 的中间元素来解决这个棘手的问题，我们将其识别为 Ai 和 Bj。如果 Ai 在 Bj 和 Bj-1 之间，我们刚刚找到了 i+j+1 个最小元素

在 array`B`中，有`j`小于 的元素`Bj`，在 array`A`中，有`i`小于 的元素`Ai`（索引从 0 开始）。因此，如果`Bj-1 < Ai < Bj`，两个数组一起正好包含`j + i`小于 的元素`Ai`。

### 如果有重复，会有什么变化？

不多。

我们还是考虑一下情况`i + j = k-1`。让我们假设`Ai <= Bj`。

1.  万一`Ai = Bj`呢？
2.  万一`Ai < Bj`呢？

在情况 1\. 中，设`m`为 的最小索引`Am = Ai`，以及`n`的最小索引`Bn = Bj`。然后在两个数组中，恰好有`m + n <= i + j = k-1`严格小于 的元素`Ai`，并且至少有`(i+1) + (j+1) = (k+1)`不大于 的元素`Ai`。因此，第 k 个最小的元素等于`Ai`。

对于 2.，我们需要考虑三种情况，a) `Bj-1 < Ai`、b) `Bj-1 = Ai`、c) `Bj-1 > Ai`。

在情况 a) 中，我们有不大于 的`j`元素，并且它们都严格小于，并且我们有严格小于(如上所述) 和未知数的元素，但至少有等于 的元素。因此，两个数组中恰好有元素严格小于，并且至少元素不大于，因此两个数组的第 k 个最小元素一起等于。`B``Ai``m <= i``A``Ai``m``i-m+1``Ai``j + m <= j + i = k-1``Ai``j + m + (i-m+1) = j+i+1 = k``Ai``Ai`

在情况 b) 中，同样的推理表明两个数组的第 k 个最小元素加起来等于`Ai`。

在剩下的情况下`Ai < Bj-1`，事情几乎不会变得更复杂。数组`B`至少`j`包含不大于的元素`Bj-1`，并且数组`A`至少`i+1`包含严格小于的元素`Bj-1`，因此两个数组中第 k 个最小的元素加起来最多为`Bj-1`。但它不能小于`Ai`（`B`最多包含`j-1`小于的元素`Ai`，因此两个数组一起最多`i + (j-1) = k-2`包含小于的元素`Ai`）。

所以我们仍然可以从数组中丢弃下面`Ai`的部分，从数组中丢弃`A`上面的部分，并继续进行，没有重复。`Bj-1``B`

改变的只是一些严格的不等式必须用弱不等式代替。

代码（如果传递起始索引和长度而不是切片会更有效，但切片会产生更短的代码）：

```
def kthsmallest(A, B, k):
    if k < 1:
        return None
    a_len, b_len = len(A), len(B)
    if a_len == 0:
        return B[k-1] # let it die if B is too short, I don't care
    if b_len == 0:
        return A[k-1] # see above
    # Handle edge case: if k == a_len + b_len, we would
    # get an out-of-bounds index, since i + j <= a_len+b_len - 2
    # for valid indices i and j
    if a_len + b_len == k:
        if A[-1] < B[-1]:
            return B[-1]
        else:
            return A[-1]
    # Find indices i and j approximately proportional to len(A)/len(B)
    i = (a_len*(k-1)) // (a_len+b_len)
    j = k-1-i
    # Make sure the indices are valid, in unfortunate cases,
    # j could be set to b_len by the above
    if j >= b_len:
        j = b_len-1
        i = k-1-j
    if A[i] <= B[j]:
        if j == 0 or B[j-1] <= A[i]:
            return A[i]
        # A[i] < B[j-1] <= B[j]
        return kthsmallest(A[i:], B[:j], k-i)
    # B[j] < A[i], symmetrical to A[i] < B[j]
    if i == 0 or A[i-1] <= B[j]:
        return B[j]
    # B[j] < A[i-1]
    return kthsmallest(A[:i], B[j:], k-j) 
```

# c# - Request.CreateErrorResponse 在哪里？

> ID：12555795
> 
> 赞同：29
> 
> 时间：2012-09-23T20:00:10.020
> 
> 标签：c#, .net, asp.net-web-api

我在[这篇博文](http://blogs.msdn.com/b/youssefm/archive/2012/06/28/error-handling-in-asp-net-webapi.aspx)中看到了它，但这实际上并没有说明如何“启用”它。而且似乎默认情况下它未启用。

我知道这是一种扩展方法，如此处定义：http: [//msdn.microsoft.com/en-us/library/hh835786](http://msdn.microsoft.com/en-us/library/hh835786(v=vs.108).aspx) (v=vs.108).aspx但我如何访问它？如果我键入`Request.CreateErrorResponse`，那么编译器将无法识别它。

我已经`using System.Net.Http`。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-11-16T20:54:32.890

我在发布版本中也注意到了这一点。如果你没有正确的 using 语句，它会出错。你需要 ：

```
using System.Net.Http; 
```

即使你已经有了这个：

```
using System.Web.Http.Controllers; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T21:20:07.203

Request 是 ApiController 类的公共属性，您应该可以在该控制器中的任何 API 操作中使用它。

```
public abstract class ApiController
{
   ...
   public HttpRequestMessage Request { get; set; }
} 
```

这是一个适合我的小代码示例：

```
using System.Net;
using System.Net.Http;
using System.Web.Http;

public class MyFirstApiController : ApiController
{
    // GET 
    public HttpResponseMessage Get(int id)
    {
        return Request.CreateErrorResponse(HttpStatusCode.ExpectationFailed, "Some   message here");
    }
} 
```

有趣的是，如果我不使用 System.Net.Http；声明，Request 不再有 CreateErrorResponse() 方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-23T21:04:26.757

您还在使用预发布版或发布版吗？有许多扩展直到发布之前才出现，并且在 webapi 发布的早期版本中也不存在。我不确定这是否是其中之一，但这可能是导致您的问题的原因。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-26T17:04:04.140

尽管已经回答了重要的问题。

另一种最愚蠢的可能性是您可能选择了错误类型的控制器。确保你已经创建了一个**Web API 控制器**，如果你不能拥有 MVC 控制器

```
Request.CreateErrorResponse() 
```

您可能会发现此问题的另一种可能性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-16T09:45:03.217

在 .net 核心中，添加`Microsoft.AspNetCore.Mvc.WebApiCompatShim.dll`.

[https://docs.microsoft.com/en-us/dotnet/api/system.net.http.httprequestmessageextensions.createerrorresponse?view=aspnetcore-2.0](https://docs.microsoft.com/en-us/dotnet/api/system.net.http.httprequestmessageextensions.createerrorresponse?view=aspnetcore-2.0)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-10-10T12:17:15.630

```
you can use from that In block Try-Catch.

 [HttpGet]
    public HttpResponseMessage DownloadVideo(Guid id, string title)
    {
        try
        {
          //Your Code at the end return result
        }
        catch (Exception ex)
        {
            return Request.CreateErrorResponse(HttpStatusCode.NotFound, ex.Message);
        }
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-15T20:33:32.283

使用**System.Web.Http**程序集。来源：[CreateErrorResponse 方法](https://msdn.microsoft.com/en-us/library/system.net.http.httprequestmessageextensions.createerrorresponse(v=vs.118).aspx)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-09-23T20:18:30.137

我最好的猜测是，这是您没有引用的第三个程序集，这就是问题所在。

不幸的是，我无法访问我的电脑，无法在手机上浏览，所以我无法为您找到该文件。根据文档，它应该在 System.Web.Http.SelfHost.dll 中，所以我想你可以搜索那个文件来找到它。

# objective-c - Mac OS X Facebook 登录失败 - 没有为应用存储 remote_app_id

> ID：12555799
> 
> 赞同：13
> 
> 时间：2012-09-23T20:01:13.683
> 
> 标签：objective-c, facebook, osx-mountain-lion

我正在尝试使用 Mac OS X 10.8 上的新 ACAccountStore 功能通过 Facebook 登录，但出现错误：

Facebook 服务器无法完成此访问请求：没有为应用存储 remote_app_id

当代码执行 requestAccessToAccountsWithType 消息时，它会提示我访问 Facebook（我允许），并且我的设置中确实存储了 Facebook 凭据。我还有另一个旧版 OS X 的代码路径，它使用 WebView 控件登录 Facebook。它确实适用于相同的 APP_ID。所以我应该在 Facebook 开发人员设置中正确设置应用程序。在我缺少的其他一些配置中？我在 Internet 上搜索“remote_app_id”并得到空集。

```
 ACAccountStore *account = [[ACAccountStore alloc] init];
    ACAccountType *accountType = [account accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

    NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys: FB_APP_ID, ACFacebookAppIdKey, [NSArray arrayWithObjects:@"email", nil], ACFacebookPermissionsKey, ACFacebookAudienceFriends, ACFacebookAudienceKey, nil];

    [account requestAccessToAccountsWithType:accountType options:options completion:^(BOOL granted, NSError *error) {
        if (granted) {
            NSArray *accountList = [account accountsWithAccountType:accountType];

            for (ACAccount *thisAccount in accountList) {
                NSLog(@"Found account: %@", [thisAccount accountDescription]);
            }
        }
        else {
            NSLog(@"Not granted because: %@", [error localizedDescription]);
        }
    }]; 
```

* * *

# iPhone 开发人员的有用说明：100% 展示此问题：

关于 iPhone 上的相同问题（此页面是谷歌的主要登陆页面）：问题是：在 iPhone 上，转到设置，左侧菜单 Facebook，然后在右侧用户名/密码 - 登录 Facebook。这就是“设置 Facebook 登录”。如果 iPhone 实际上是在**“设置 Facebook 登录”上登录到 FB，**那么问题就会出现。如果您明确退出“设置 Facebook 登录”（实际上，可能卸载 Facebook 应用程序），问题将不会出现。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-25T14:21:29.620

看起来您必须在 Facebook 应用程序设置中设置 iOS/OSX 应用程序的捆绑 ID（在我的情况下是固定的）

![捆绑包ID](../Images/16913e416af461868552046c3c24ae15.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-20T14:00:38.670

在 Facebook Web 界面上设置捆绑 ID，它会立即更新。

它在更新的开发者 UI 上的位置如下：

![Facebook 捆绑包 ID](../Images/107cc6638869f9f322ee906419353aeb.png)

# ruby-on-rails - 在请求规范中访问会话哈希

> ID：12555800
> 
> 赞同：3
> 
> 时间：2012-09-23T20:01:20.463
> 
> 标签：ruby-on-rails, rspec

如何访问`session`请求规范中的哈希内容？

这（只是使用`session[:key]`）给了我未定义的方法：

[RSpec spec_helper 访问会话变量](https://stackoverflow.com/questions/5481445/rspec-spec-helper-access-to-session-variable)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T19:31:07.283

检查您是否在正确的上下文中调用会话方法。您可以在它指定之前的方法块中调用它。

例子：

```
it "should reset session[:auth_by_github]" do
  session[:auth_by_github].should eql(nil)
end 
```

# java - 对象向量，使用 setElementAt/set

> ID：12555801
> 
> 赞同：0
> 
> 时间：2012-09-23T20:01:28.017
> 
> 标签：java, object, vector

我尝试使用已由复制构造函数修改的新对象将我的 object2 设置在向量位置 1 中。

```
 Generic object1 = new Generic();
    //invoke the copy constructor of the Generic class

    Generic object2 = new Generic(object1);

    Vector<Generic> myVector = new Vector<Generic>();
    myVector.add(object1);
    myVector.add(object2); 
```

此代码在我为object1输入数据后使用它时有效，object2得到相同的数据

```
 object2= new Generic(object1);
    myVector.setElementAt(object2, 1); 
```

但是，我认为下面的代码应该与上面的代码相同，但它没有给我与 object1 相同的数据（只是获取 object1 的默认值）

```
 myVector.setElementAt(new Generic(object1), 1); 
```

第二个怎么不行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T23:53:07.080

正如 Ted Hopp 在他的评论中所写，这两个变体是相同的，只是第二个变体没有为`object2`.

我认为您没有意识到 Java 中的引用总是被复制的事实（不是被引用的对象，而是引用本身）：在调用之后`myVector.add(object2);`，您`object2`和向量中的第二个元素是独立的，除了引用同一个对象。

这意味着如果您*更改对象本身*（例如，调用`object2.setValue("foo");`它会影响`object2`向量中的第二个元素（因为它们引用同一个对象）。但是如果您*将其他/新对象设置为向量的第二个元素*，`object2`仍然指向旧的，因此`object2`向量中的第二个元素是完全独立的。

我希望这有帮助 ：-）

* * *

附带说明：您可能应该使用`List<Generic> myList = new ArrayList<Generic>();`，除非您需要同步`Vector`提供。

# ios - 查找 Mac OS X 框架时，CMake FIND_LIBRARY 变量设置为 -NOTFOUND

> ID：12555804
> 
> 赞同：2
> 
> 时间：2012-09-23T20:01:52.707
> 
> 标签：ios, linker, cmake, objective-c++, ios-frameworks

我正在尝试将 Mac OS X 框架使用添加到我的程序中，其中包括一些带有 Objective-c++ 代码的文件。

它确实适用于`SET (CMAKE_EXE_LINKER_FLAGS "-framework CoreMedia -framework ... ")`，但我不太喜欢这种方式，而且似乎是错误的。

这是实际添加的 CMake 部分，但它不起作用，我真的不知道我错过了什么 :( 我尝试使用

```
link_directories("${CMAKE_OSX_SYSROOT}/System/Library/Frameworks")
include_directories("${CMAKE_OSX_SYSROOT}/System/Library/Frameworks") 
```

但这根本没有帮助。所以这里是代码：

```
add_executable(myprogram src/myprogram.cpp)

FIND_LIBRARY(COREMEDIA_LIB NAMES CoreMedia)
FIND_LIBRARY(COREVIDEO_LIB NAMES CoreVideo)
FIND_LIBRARY(FOUNDATION_LIB NAMES Foundation)
FIND_LIBRARY(AVFOUNDATION_LIB NAMES AVFoundation)

target_link_libraries(myprogram ${COREMEDIA_LIB})
target_link_libraries(myprogram ${COREVIDEO_LIB})
target_link_libraries(myprogram ${FOUNDATION_LIB})
target_link_libraries(myprogram ${AVFOUNDATION_LIB}) 
```

它会产生 cmake 错误：

```
CMake Error: The following variables are used in this project, but they are set to NOTFOUND.
Please set them or make sure they are set and tested correctly in the CMake files:
AVFOUNDATION_LIB
linked by target "myprogram" in directory <some directory containing app>

<... other 3 are here aswell ...> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-21T17:21:29.473

这对我有用：

```
IF (APPLE)
   find_library(COREMIDI_LIBRARY CoreMIDI)
   find_library(COREFOUNDATION_LIBRARY CoreFoundation)
   target_link_libraries(myprogram ${COREFOUNDATION_LIBRARY} ${COREMIDI_LIBRARY})
ENDIF (APPLE) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T16:54:14.227

好的，我知道了。我需要将 PATHS 变量指定为`${CMAKE_OSX_SYSROOT}/System/Library`. 我不知道为什么，但它无法自动在这个文件夹中找到它，虽然认为它是一个标准文件夹......

所以这样调用：

例如，当我链接`AVFoundation`框架时：

```
add_executable(myprogram)

find_library(SOME_VAR
    NAMES AVFoundation
    PATHS ${CMAKE_OSX_SYSROOT}/System/Library
    PATH_SUFFIXES Frameworks
    NO_DEFAULT_PATH) 
```

接着

```
target_link_libraries(myprogram "${SOME_VAR}/AVFoundation") 
```

希望它会帮助某人。

# qtwebkit - 如何调试QWebView加载网页失败？

> ID：12555809
> 
> 赞同：3
> 
> 时间：2012-09-23T20:02:37.030
> 
> 标签：qtwebkit, qwebview

我使用 QWebView 加载页面，然后我只使用`reload()`插槽重新加载它。`loadFinished(bool)`信号通常表明错误。我还使用 QwebView 的网络访问管理器的`finished`信号来获取 http 响应代码 - 它设置为 0。无论我尝试在浏览器中重新加载它的速度有多快，所有浏览器都可以正常加载相同的页面。如何调试这个问题，可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T20:11:44.483

您是否尝试过获取回复的错误代码和错误消息，如下所示：

```
class Browser(object):

    def __init__(self):
        self.network_manager = QNetworkAccessManager()
        self.network_manager.finished.connect(self._request_finished)

        self.web_page = QWebPage()
        self.web_page.setNetworkAccessManager(self.network_manager)

        self.web_view = QWebView()
        self.web_view.setPage(self.web_page)

    def _request_finished(self, reply):
        print reply.error()
        print reply.errorString() 
```

# javascript - 使用自定义字段扩展 UserStory 模型失败，并出现“找不到编译功能”

> ID：12555812
> 
> 赞同：0
> 
> 时间：2012-09-23T20:03:08.467
> 
> 标签：javascript, rally

[在从 Rally 获取特定标签以计算另一个字段中的值中](https://stackoverflow.com/questions/12413817/fetch-a-specific-tag-from-rally-in-order-to-compute-a-value-in-another-field)的讨论之后，我开始重写自定义应用程序以扩展 Rally 的 UserStory 模型，以向其中添加自定义字段，以便于显示和用户输入。在模型工厂的成功函数中，我使用模型的扩展来添加我的字段，但仅此一项就使 SDK 失败并出现以下错误： Uncaught TypeError: Cannot read property 'compile' of undefined

事实上，它无法在模型中实例化我的自定义字段。Ext.Class.NewClass 似乎需要一个名为 tpl （模板？）的属性，该属性未为我的自定义字段定义。我尝试过使用该领域的各种属性，但没有成功，我继续遇到同样的错误。

堆栈如下：

```
Ext.define.constructor (sdk-debug.js:81499)
Base.callParent (sdk-debug.js:2894)
Ext.define.constructor (sdk-debug.js:110488)
Ext.Class.newClass (sdk-debug.js:3191)
(anonymous function) (:2)
Ext.ClassManager.instantiate (sdk-debug.js:3951)
Ext.ClassManager.instantiateByAlias (sdk-debug.js:3901)
(anonymous function) (sdk-debug.js:1558)
Ext.define.create (sdk-debug.js:15370)
Ext.define.createComponent (sdk-debug.js:28150)
Ext.define.lookupComponent (sdk-debug.js:28138)
Ext.define.prepareItems (sdk-debug.js:28113)
Ext.define.add (sdk-debug.js:28198)
Ext.define.add (sdk-debug.js:28188)
Ext.define.initItems (sdk-debug.js:28017)
Ext.define.initComponent (sdk-debug.js:28001)
Base.callParent (sdk-debug.js:2894)
Ext.define.initComponent (sdk-debug.js:79700)
Ext.define.constructor (sdk-debug.js:15617)
Base.callParent (sdk-debug.js:2894)
Ext.define.constructor (sdk-debug.js:27106)
Ext.Class.newClass (sdk-debug.js:3191)
(anonymous function) (:2)
Ext.ClassManager.instantiate (sdk-debug.js:3951)
(anonymous function) (sdk-debug.js:1558)
Ext.define.initComponent (sdk-debug.js:77226)
Base.callParent (sdk-debug.js:2894)
Ext.define.initComponent (sdk-debug.js:78944)
Base.callParent (sdk-debug.js:2894)
Ext.define.initComponent (sdk-debug.js:111030)
Ext.define.constructor (sdk-debug.js:15617)
Base.callParent (sdk-debug.js:2894)
Ext.define.constructor (sdk-debug.js:27106)
Base.callParent (sdk-debug.js:2894)
Ext.define.constructor (sdk-debug.js:110959)
Ext.Class.newClass (sdk-debug.js:3191)
(anonymous function) (:2)
Ext.ClassManager.instantiate (sdk-debug.js:3951)
Ext.ClassManager.instantiateByAlias (sdk-debug.js:3901)
(anonymous function) (sdk-debug.js:1558)
Ext.define.create (sdk-debug.js:15370)
Ext.define.createComponent (sdk-debug.js:28150)
Ext.define.lookupComponent (sdk-debug.js:28138)
Ext.define.prepareItems (sdk-debug.js:28113)
Ext.define.add (sdk-debug.js:28198)
Rally.data.ModelFactory.getModel.success (rallytest.html:34) // this is my app call to this.add of the grid
onGetModelsSuccess (sdk-debug.js:106084)
onFetchSuccess (sdk-debug.js:106142)
Ext.define._onTypeDefinitionsRetrieved (sdk-debug.js:106227)
Ext.define._fetchTypeDefinitions.Rally.environment.getIoProvider.httpGet.success (sdk-debug.js:106246)
Ext.apply.callback (sdk-debug.js:5286)
success (sdk-debug.js:105221)
Ext.apply.callback (sdk-debug.js:5286)
Ext.define.handleResponse (sdk-debug.js:53177)
(anonymous function) (sdk-debug.js:1540)
(anonymous function) (TypeDefinition.js:1) 
```

这是（当前）代码：

```
 Ext.define('BVApp', {
            extend: 'Rally.app.App',
            componentCls: 'app',
            layout: {
                align: 'stretch'
            },

            launch: function() {
                Rally.data.ModelFactory.getModel({
                type: 'UserStory',

                success: function(model) {

                    this.grid = this.add({
                        xtype: 'rallygrid',
                        model: Ext.define('BVModel', {
                            extend: model,
                            alias : 'BVModel',
                            fields: [
                                {name: 'Bv1', type: 'string', persist: false, tpl: 'test',
                                    serialize: function(v, record){ record.data.score = v; },
                                    convert: function(v, record){ return record.data.score; }
                                }
                            ]
                        }),
                        columnCfgs: [
                            {
                                text: 'FormattedID', dataIndex: 'FormattedID'
                            },
                            {
                                text: 'ref', dataIndex: 'ref'
                            },
                            {
                                text: 'Name', dataIndex: 'Name', flex: 1
                            },
                            {
                                text: 'Score', dataIndex: 'Score'
                            }
                        ]
                    });

                    }, // end of getModel success
                    scope: this
                });
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:01:01.693

通过调用 2.0p3 SDK 而不是 2.0p2 解决。

# javascript - javascript switch 语句和 Ajax 状态

> ID：12555822
> 
> 赞同：1
> 
> 时间：2012-09-23T20:04:59.893
> 
> 标签：javascript

Firebug 在下面的第 10 行给了我一个语法错误：

`switch(xmlhttp.readyState) {`

这直接来自 Christian Gross 的“Ajax 模式和最佳实践”一书的第 2 章。提前致谢。我似乎看不到语法错误。任何帮助表示赞赏。

```
<html>
<head>
<title>Sample Page</title>

<script language="JavaScript" src="/lib/factory.js"></script>
<script language="JavaScript" type="text/javascript">
var xmlhttp = FactoryXMLHttpRequest();
function AsyncUpdateEvent() {
switch(xmlhttp.readyState) {
case 0:
document.getElementById('status').innerHTML = "uninitialized";
break;
case 1:
document.getElementById('status').innerHTML = "loading";
break;
case 2:
document.getElementById('status').innerHTML = "loaded";
break;
case 3:
document.getElementById('status').innerHTML = "interactive";
break;
case 4:
document.getElementById('status').innerHTML = "complete";
document.getElementById('result').innerHTML = xmlhttp.responseText;
break;
}
}
function GetIt(url) {
if(xmlhttp) {
xmlhttp.open('GET', url, true);
xmlhttp.onreadystatechange = AsyncUpdateEvent;
xmlhttp.send(null);
}
}
</script>
</head>
<body>
<button onclick="GetIt('/chap02/serverhang.aspx')">Get a document</button>
<p><table border="1">
<tr>
<td>Document</td>
<td>
<span id="status">No Result</span>
</td>
<td>
<span id="result">No Result</span>
</td></tr>
</table></p>
</body>
</html> 
```

# android - 获取找不到符号：来自 ant 的方法 getSystemService

> ID：12555828
> 
> 赞同：2
> 
> 时间：2012-09-23T20:06:09.323
> 
> 标签：android, ant

我刚开始使用 android 和 ant 给我以下错误：

```
-compile: java:44: cannot find symbol
[javac] symbol  : method getSystemService(java.lang.String)
[javac] AudioManager am = (AudioManager)this.getSystemService(Context.AUDIO_SERVICE);
                                            ^ 
```

我不明白这个问题，因为我正在导入`android.media.AudioManager;`

我的代码如下：

```
package com.example.findme;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.widget.Toast;
import android.media.AudioManager;

public class SMSReceiver extends BroadcastReceiver
{
public final static String EXTRA_MESSAGE = "com.example.RemoVol.MESSAGE";
public final static String SILENT_MESSAGE = "Your phone has been silenced";
public final static String VOLUME_MESSAGE = "Your phone volume is normal";

@Override   
public void onReceive(Context context, Intent intent)
{
//---get the SMS message passed in---
    Bundle bundle = intent.getExtras();
    SmsMessage msgs[] = null;
    String str ="";
    String testString="";   
    if (bundle != null)
    {
        //---retrieve the SMS message received---
        Object pdus[]=(Object[]) bundle.get("pdus");
        msgs = new SmsMessage[pdus.length];
        for (int i=0; i<msgs.length; i++)
            {
                msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
                str += "SMS from" + msgs[i].getOriginatingAddress();
                str += " :";
                str +=msgs[i].getMessageBody().toString();
                testString=msgs[i].getMessageBody().toString(); 
                str += "\n";
            }
    //---display the new SMS message---
    Toast.makeText(context, str, Toast.LENGTH_SHORT).show();
        if(testString.equals("#silent"))
        {   
            intent.putExtra(EXTRA_MESSAGE, SILENT_MESSAGE);
            AudioManager am = (AudioManager) this.getSystemService(Context.AUDIO_SERVICE);
            am.setRingerMode(AudioManager.RINGER_MODE_SILENT);
        }   
        else if(testString.equals("#volume"))
        {   
        AudioManager am = (AudioManager) this.getSystemService(Context.AUDIO_SERVICE);
        am.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
        intent.putExtra(EXTRA_MESSAGE, VOLUME_MESSAGE);
        }
    }
}
} 
```

我在我的 android 项目的根目录中使用命令“ant debug”进行编译。

我希望这不是真的愚蠢和明显的事情。如果我浪费了您的时间，请提前道歉。

感谢您对此进行审查。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T20:19:37.523

您需要传入 BroadcastReciever 提供的上下文（您不能使用`this`）

```
//---display the new SMS message---
Toast.makeText(context, str, Toast.LENGTH_SHORT).show();
if(testString.equals("#silent"))
{   
    intent.putExtra(EXTRA_MESSAGE, SILENT_MESSAGE);
    AudioManager am = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE);
    am.setRingerMode(AudioManager.RINGER_MODE_SILENT);
}   
else if(testString.equals("#volume"))
{   
    AudioManager am = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE);
    am.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
    intent.putExtra(EXTRA_MESSAGE, VOLUME_MESSAGE);
} 
```

# python - 遵循 Django 照片应用教程时出现解码器 JPEG 不可用错误

> ID：12555831
> 
> 赞同：15
> 
> 时间：2012-09-23T20:06:28.040
> 
> 标签：python, django, jpeg, python-imaging-library

我正在关注一个涉及图像上传的 Django 教程，并遇到了这个问题。我尝试多次安装和重新安装 PIL、libjpeg 和 libfreetype6，但到目前为止似乎没有任何效果。我花了几个小时试图找到一个解决方案，在这一点上我感到非常沮丧。请帮忙。

这是我在 Mac 上重新安装 PIL 后 selftest.py 的结果：

```
PIL 1.1.6 BUILD SUMMARY
--------------------------------------------------------------------
version       1.1.6
platform      darwin 2.7.3 (v2.7.3:70274d53c1dd, Apr  9 2012, 20:52:43)
              [GCC 4.2.1 (Apple Inc. build 5666) (dot 3)]
--------------------------------------------------------------------
--- TKINTER support ok
*** JPEG support not available
--- ZLIB (PNG/ZIP) support ok
*** FREETYPE2 support not available
--------------------------------------------------------------------
To add a missing option, make sure you have the required
library, and set the corresponding ROOT variable in the
setup.py script.

To check the build, run the selftest.py script.
rrdhcp-10-32-44-157:Imaging-1.1.6 pfg$ python selftest.py
*****************************************************************
Failure in example: _info(Image.open("Images/lena.jpg"))
from line #24 of selftest.testimage
Exception raised:
Traceback (most recent call last):
  File "./doctest.py", line 499, in _run_examples_inner
    exec compile(source, "<string>", "single") in globs
  File "<string>", line 1, in <module>
  File "./selftest.py", line 22, in _info
    im.load()
  File "PIL/ImageFile.py", line 180, in load
    d = Image._getdecoder(self.mode, d, a, self.decoderconfig)
  File "PIL/Image.py", line 375, in _getdecoder
    raise IOError("decoder %s not available" % decoder_name)
IOError: decoder jpeg not available
1 items had failures:
   1 of  57 in selftest.testimage
***Test Failed*** 1 failures.
*** 1 tests of 57 failed. 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-24T09:08:30.090

PIL 有几个案例导致了类似的经历。如果您已使用 virtualenv 从 virtualenv 安装 PIL

```
pip install PIL 
```

那么你应该已经安装了libjpeg，libz的**开发**版本。假设你在一个 Ubuntu 机器上，一个

```
pip uninstall PIL
apt-get install libjpeg-dev zlib1g-dev libpng12-dev
pip install PIL 
```

应该足够了。您也可以安装[Pillow](http://pypi.python.org/pypi/Pillow/)而不是 PIL，它与 setuptools 配合使用效果更好，并且可以安装在 virtualenv 中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-19T23:06:24.107

我发现这对我来说很好：

```
pip uninstall PIL
pip install Pillow 
```

然后我重新启动了服务器：

```
kill -HUP XXX 
```

其中**XXX**是您的服务器进程的进程 ID。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-08-20T13:33:30.137

我已经在使用`Pillow`并得到同样的错误。尝试安装`libjpeg`或`libjpeg-dev`按照其他人的建议，但被告知已经安装了（更新的）版本。

最后只需要重新安装`Pillow`：

```
sudo pip uninstall Pillow
sudo pip install Pillow 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-15T15:10:44.337

如果您使用 Fedora，请在执行 pip install Pillow 之前执行以下操作：

```
yum install libjpeg-devel zlib1g-devel libpng12-devel 
```

# java - 如何遍历 MySQL 更新查询中的所有记录？

> ID：12555834
> 
> 赞同：0
> 
> 时间：2012-09-23T20:06:55.763
> 
> 标签：java, mysql, sql

我有一个 java 代码，我需要从文本文件中读取多行，并且需要使用读取的行更新记录。例如，文本文件包含：aaa、bbb、ccc、.. 等（逗号表示换行），所以，我想用值 aaa 更新记录 1 中的 col4，用值 bbb 等更新记录 2。

如何制作自动更新每条记录的更新语句？

这是我的 Java 代码：

```
counter=0;
        while((fileLine=in.readLine())!=null) 
        { 
            System.out.println("Line read is: "+fileLine);

                //execute db insertion
                try {
                    //insert in the database
                    String Query= "update db.table set col4=?";    //database
                    preparedStmt3 = DBConnection.con.prepareStatement(Query); 
                    preparedStmt3.setString (1, fileLine);
                    preparedStmt3.executeUpdate();
                    System.out.println("Complete update statement for row: "+counter);
                    counter++;
                } catch (Exception e) {
                    System.out.println("DB_Error:_"+ e.toString());
                }

        } //end while loop 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T20:13:18.543

**注意：**如前所述`Andreas`，`Frank`您的更新语句看起来有点不正确。您似乎缺少更新语句中的*where*子句。这是因为，您尝试只为 PreparedStatement 设置一个参数。理想情况下，更新语句看起来像这样：

```
UPDATE table_name
SET column1=?, column2=?,...
WHERE some_column=? 
```

即，您至少需要在*where*子句中有一个或多个列来确定需要更新的记录。如果您省略 WHERE 子句，所有记录都将被更新（*这是您可能不想做的事情*）

另外，作为海量数据集的性能提升，可以考虑批量更新。所以这就是你要做的：

*   创建批量大小。
*   对于从文件中读取的每一行，将其添加到批处理中。这可以通过调用*PreparedStatement的*[addBatch()](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#addBatch%28%29)方法来完成
**   达到批处理大小后，通过调用[executeBatch()](http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html#executeBatch%28%29)执行批处理。然后，您将清除批处理（[clearBatch()](http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html#clearBatch%28%29)）并继续该过程，直到您完成从文件中读取所有行。*

 *像这样的东西：

```
PreparedStatement preparedStmt3 = null;
try{
    counter=0;
    int batchCutoff = 1000, currentBatchSize = 0;

    Query= "update db.table set col4=?";    //database
    preparedStmt3 = DBConnection.con.prepareStatement(Query); 

    while((fileLine=in.readLine())!=null) 
    { 
        System.out.println("Line read is: "+fileLine);
        //execute db insertion
        try {
            //insert in the database
            preparedStmt3.setString (1, fileLine);
            preparedStmt3.addBatch();
            preparedStmt3.clearParameters();
            currentBatchSize++;

            if(currentBatchSize >= batchCutoff){
                preparedStmt3.executeBatch();
                preparedStmt3.clearBatch();
                System.out.println("Complete update statement for: "+currentBatchSize+" row(s)");
                currentBatchSize = 0;
            }
            counter++;
        } catch (Exception e) {
            System.out.println("DB_Error:_"+ e.toString());
        }
    } //end while loop 
    //In case the cut-off has not been reached and some statements in the batch are remaining
    try{
        preparedStmt3.executeBatch();
        preparedStmt3.clearBatch();
    }catch (Exception e) {
            System.out.println("DB_Error:_"+ e.toString());
    }finally{
        System.out.println("Total of: "+counter+" row(s) updated");
    }
}finally{
    if(preparedStmt3 != null){
        try{
            preparedStmt3.close();
        }catch(Exception exe){
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:08:50.543

由于您使用的是计数器，因此您可以在 where 子句中使用它

```
----->>counter=1;
    while((fileLine=in.readLine())!=null) 
    { 
        System.out.println("Line read is: "+fileLine);

            //execute db insertion
            try {
                //insert in the database
                String Query= "update db.table set col4=? where id=?";    //database
                preparedStmt3 = DBConnection.con.prepareStatement(Query); 
                preparedStmt3.setString (1, fileLine);
       ---->>   preparedStmt3.setInt(2,counter);
                preparedStmt3.executeUpdate();
                System.out.println("Complete update statement for row: "+counter);
                counter++;
            } catch (Exception e) {
                System.out.println("DB_Error:_"+ e.toString());
            }

    } //end while loop 
```

我已在我进行更改的地方插入了箭头*

# android - 暂停和恢复 Android 存储库同步

> ID：12555835
> 
> 赞同：7
> 
> 时间：2012-09-23T20:07:06.323
> 
> 标签：android, terminal, sync, resume, repository

我正在尝试同步以下回购

> repo init -u git://github.com/SlimRoms/platform_manifest.git -b jb

问题是我大约在 30 小时前开始了 repo 同步，但仍未完成。（我有一个 1Mbps 的连接）。我现在不想让笔记本电脑切换这么长时间，并且想暂停当前的同步并稍后恢复。

所以，我搜索了一下，发现暂停当前的下载/同步我可以使用：

*   Ctrl+C
*   Ctrl+Z
*   关闭终端（下次会自动恢复下载）

所以我尝试使用 ctrl+c，下载停止。然后恢复我尝试了“fg”，但它没有重新开始。我得到的错误是：

> bash：fg：当前：没有这样的工作

有人可以帮我吗？我可以稍后使用：关闭并继续同步吗？

> 回购同步

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-26T21:37:35.553

您不能真正*暂停*a `repo sync`，但如果您使用 Ctrl-C 中止它，然后稍后再次运行它，它将有效地从停止的地方开始。虽然它会重新从头开始处理项目列表，并且可能仍会为已处理的项目获取一些新数据，但它应该快速浏览这些项目，因为它之前获取的所有数据仍然存在在隐藏`.repo`目录中。

有关该方法和工作方式的出色描述，请参[见此答案。](https://stackoverflow.com/a/11870480/1053805)`repo init``repo sync`

请注意，您不会立即看到任何已获取的项目，因为`repo sync`在完成克隆所有 git 存储库之前不会创建和填充您的工作目录`.repo/projects`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-26T07:16:46.977

如果您想在不挂机的情况下进行 repo 同步，可以使用：

```
nohup repo sync & 
```

并退出 ssh/telnet/terminal 会话。

对于磁盘空间增加的问题，只需定期执行以下操作：

```
cd /path/to/repo
rm -f `find . -name '*tmp_pack*'` 
```

# eclipse - 在 GWT 项目中的所有 CSS 文件（行过滤器：progid）上编译错误

> ID：12555837
> 
> 赞同：3
> 
> 时间：2012-09-23T20:07:25.200
> 
> 标签：eclipse, gwt, css

我在“过滤器：progid：DXImageTransform.Microsoft.gradient”行的所有CSS文件中都出现编译错误。这是我的 CSS 示例以及我在 Eclipse 上为这个 GWT 项目遇到的错误。你能看出为什么吗？

**错误：**

```
Invoking generator com.google.gwt.resources.rebind.context.InlineClientBundleGenerator
               Preparing method style
                  The following problems were detected
                     [WARN] Line 25 column 9: encountered ":". Was expecting one of: "}" "+" "-" "," ";" "/" <STRING> <IDENT> <NUMBER> <URL> <PERCENTAGE> <PT> <MM> <CM> <PC> <IN> <PX> <EMS> <EXS> <DEG> <RAD> <GRAD> <MS> <SECOND> <HZ> <KHZ> <DIMEN> <HASH> <IMPORTANT_SYM> <UNICODERANGE> <FUNCTION> 
                     [WARN] Line 139 column 17: encountered ":". Was expecting one of: "}" "+" "-" "," ";" "/" <STRING> <IDENT> <NUMBER> <URL> <PERCENTAGE> <PT> <MM> <CM> <PC> <IN> <PX> <EMS> <EXS> <DEG> <RAD> <GRAD> <MS> <SECOND> <HZ> <KHZ> <DIMEN> <HASH> <IMPORTANT_SYM> <UNICODERANGE> <FUNCTION> 
```

**CSS 文件：**

```
.header {
    position:absolute;
    top:0px;
    heigth:40px;
    width:100%;

    -webkit-box-shadow: 0 1px 2px rgba(0,0,0,.2);
    -moz-box-shadow: 0 1px 2px rgba(0,0,0,.2);
    box-shadow: 0 1px 2px rgba(0,0,0,.2);

    background: #0a0809; /* Old browsers */
    /* IE9 SVG, needs conditional override of 'filter' to 'none' */
    background: url(data:image/svg+xml;base64,allthestuffhere==);
    background: -moz-linear-gradient(top,  #0a0809 0%, #0a0e0a 43%, #292b28 100%, #aebcbf 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#0a0809), color-stop(43%,#0a0e0a), color-stop(100%,#292b28), color-stop(100%,#aebcbf)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #0a0809 0%,#0a0e0a 43%,#292b28 100%,#aebcbf 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #0a0809 0%,#0a0e0a 43%,#292b28 100%,#aebcbf 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #0a0809 0%,#0a0e0a 43%,#292b28 100%,#aebcbf 100%); /* IE10+ */
    background: linear-gradient(to bottom,  #0a0809 0%,#0a0e0a 43%,#292b28 100%,#aebcbf 100%); /* W3C */
    filter: progid: DXImageTransform.Microsoft.gradient(startColorstr='#0a0809', endColorstr='#aebcbf',GradientType=0 ); /* IE6-8 */
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T08:35:25.767

因为`filter`属性不*符合CSS语法*，所以使用[`literal`函数](https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle#Literal_function)

```
filter: literal("progid:DXImageTransform.Microsoft.gradient(startColorstr='#0a0809', endColorstr='#aebcbf',GradientType=0)"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T21:20:39.600

它应该是：

```
filter: progid \:DXImageTransform \.Microsoft \.gradient(startColorstr \='#0a0809', endColorstr \='#aebcbf',GradientType \=0 ); /* IE6-8 */ 
```

# android - osmdroid 不同的投影

> ID：12555839
> 
> 赞同：3
> 
> 时间：2012-09-23T20:07:25.837
> 
> 标签：android, maps, osmdroid

我只是玩`osmdroid`lib。我`TileSource`为特定服务实现了一些自定义。但是一个服务有`EPSG:3395`投影，另一个有`EPSG:3395`（`TMS`带有反向 Y 轴）。当我使用此服务时，`MyLocationOverlay`我的位置点绘制在错误的位置。我发现方法`MapView.toMapPixels`是将 E6 coords( `what is the projection? Degrees?`) 中的纬度/经度转换为屏幕坐标，我是怎么理解的。

1）我可以找到相互转换所有投影的解释吗？
2）我如何从 lat lon 转换为 pix on tile `EPSG:3395`？

任何帮助都是宝贵的。

# c# - 如何将变量从一个按钮发送到另一个按钮

> ID：12555840
> 
> 赞同：3
> 
> 时间：2012-09-23T20:07:29.510
> 
> 标签：c#

到目前为止，我的一个程序中有这个，我希望它是这样的，如果你按下一个按钮来分解你输入的数字，你可以启用另一个按钮来获取该数据并将其保存到一个 outfile 中。

```
private void button1_Click(object sender, EventArgs e)
{
    string number = textBox1.Text;
    int digits = int.Parse(number);
    if (digits > 9999 || digits < 0)
    {
        MessageBox.Show("That is not a valid number");
    }
    else
    {
        int thousands = digits / 1000;
        int hundreds = (digits - (thousands * 1000)) / 100;
        int tens = (digits - ((hundreds * 100) + (thousands * 1000))) / 10;
        int ones = (digits - ((tens * 10) + (hundreds * 100) + (thousands * 1000))) / 1;
        label6.Text = thousands.ToString();
        label7.Text = hundreds.ToString();
        label8.Text = tens.ToString();
        label9.Text = ones.ToString();
        button2.Enabled = true;
    } 
```

到目前为止，我有这个并且它可以工作，但是对于 button2，我希望通过单击按钮 1 生成的这些变量传递给 button2，因此当您单击它时，它将使用这些变量写入文件。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T20:12:11.253

如果它是一个 asp.net webforms 应用程序，您可以将变量保存在视图状态并从其他按钮单击检索它们

```
//setting
ViewState["thousands "] = thousands;

//Reading
int thousands = Convert.ToInt32(ViewState["thousands "]); 
```

如果它是控制台、windows 应用程序、windows 服务，你可以在事件范围之外声明 int vars，你就可以从两个按钮单击事件中访问它们；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T20:16:18.100

有几种方法，但是看看你已经拥有的，为什么不把标签重新读回你想要的变量呢？

```
private void button2_Click(object sender, EventArgs e)
{
    int thousands = Convert.ToInt32(label6.Text);
    int hundreds = Convert.ToInt32(label7.Text);
    //...etc
} 
```

您也可以只设置全局变量而不是局部变量，即在任何方法调用之外声明您的整数

```
int thousands;
int hundreds;
int tens;
int ones;
private void button1_Click(object sender, EventArgs e)
{
    //...code
    thousands = digits / 1000;
    hundreds = (digits - (thousands * 1000)) / 100;
    tens = (digits - ((hundreds * 100) + (thousands * 1000))) / 10;
    ones = (digits - ((tens * 10) + (hundreds * 100) + (thousands * 1000))) / 1;
}
private void button2_Click(object sender, EventArgs e)
{
    Console.WriteLine(thousands); //...etc
} 
```

不要太频繁地这样做，因为如果你有大量的全局变量，事情会很快变得混乱，但对于一个简单的程序（这似乎是）来说应该没问题。

# python - 将 Mercurial 迁移到 GitHub

> ID：12555843
> 
> 赞同：2
> 
> 时间：2012-09-23T20:08:11.720
> 
> 标签：python, git, mercurial, github

我想从 Google Code 和 Mercurial 迁移到 Git 和 GitHub，同时保留所有分支和版本历史。

[到目前为止，Hg-Git mercurial 插件（ http://hg-git.github.com/](http://hg-git.github.com/) ）似乎是我唯一的选择。我尝试按照安装说明进行操作，但有点过头了。这就是我所在的位置：

*   我安装了[Microsoft Visual C++ 2008](http://download.microsoft.com/download/a/5/4/a54badb6-9c3f-478d-8657-93b3fc9fe62d/vcsetup.exe)
*   我安装了[Python 2.7.3](http://www.python.org/ftp/python/2.7.3/python-2.7.3.msi)
*   我安装了[setuptools](http://pypi.python.org/packages/2.7/s/setuptools/setuptools-0.6c11.win32-py2.7.exe#md5=57e1e64f6b7c7f1d2eddfc9746bbaf20)
*   我在 TortoiseHg 的 mercurial.ini 中添加了以下内容：

```
[extensions]
hgext.bookmarks =
hggit = 
```

现在当我运行时：

```
C:\Python27\Scripts>easy_install.exe hg-git 
```

我得到以下信息：

```
Searching for hg-git
Best match: hg-git 0.3.3
Processing hg_git-0.3.3-py2.7.egg
hg-git 0.3.3 is already the active version in easy-install.pth

Using c:\python27\lib\site-packages\hg_git-0.3.3-py2.7.egg
Processing dependencies for hg-git
Searching for dulwich>=0.8.0
Reading http://pypi.python.org/simple/dulwich/
Reading http://samba.org/~jelmer/dulwich
Reading http://launchpad.net/dulwich
Best match: dulwich 0.8.5
Downloading http://samba.org/~jelmer/dulwich/dulwich-0.8.5.tar.gz
Processing dulwich-0.8.5.tar.gz
Running dulwich-0.8.5\setup.py -q bdist_egg --dist-dir c:\users\lee\appdata\local\temp\easy_install-3qgeev\dulwich-0.8.5\egg-dist-tmp-ciyt_4 
```

然后是一堆看起来像这样的错误：

```
Traceback (most recent call last):
  File "C:\Python27\Scripts\easy_install-script.py", line 8, in <module>
    load_entry_point('setuptools==0.6c11', 'console_scripts', 'easy_install')()
  File "C:\Python27\lib\site-packages\setuptools\command\easy_install.py", line 1712, in main
    with_ei_usage(lambda:
  File "C:\Python27\lib\site-packages\setuptools\command\easy_install.py", line 1700, in with_ei_usage
    return f()
  File "C:\Python27\lib\site-packages\setuptools\command\easy_install.py", line 1716, in <lambda>
    distclass=DistributionWithoutHelpCommands, **kw
  File "C:\Python27\lib\distutils\core.py", line 152, in setup
    dist.run_commands()
  File "C:\Python27\lib\distutils\dist.py", line 953, in run_commands
    self.run_command(cmd)
  File "C:\Python27\lib\distutils\dist.py", line 972, in run_command
    cmd_obj.run()
  File "C:\Python27\lib\site-packages\setuptools\command\easy_install.py", line 211, in run
    self.easy_install(spec, not self.no_deps)
  File "C:\Python27\lib\site-packages\setuptools\command\easy_install.py", line 446, in easy_install
    return self.install_item(spec, dist.location, tmpdir, deps)
  File "C:\Python27\lib\site-packages\setuptools\command\easy_install.py", line 481, in install_item
    self.process_distribution(spec, dists[0], deps, "Using")
  File "C:\Python27\lib\site-packages\setuptools\command\easy_install.py", line 519, in process_distribution
    [requirement], self.local_index, self.easy_install
  File "C:\Python27\lib\site-packages\pkg_resources.py", line 563, in resolve
    dist = best[req.key] = env.best_match(req, self, installer)
  File "C:\Python27\lib\site-packages\pkg_resources.py", line 799, in best_match
    return self.obtain(req, installer) # try and download/install 
```

不知道接下来要尝试什么。我还尝试[了使用 hggit 克隆 github repo 中的](https://stackoverflow.com/questions/6432507/cloning-github-repo-with-hggit)提示，但我遗漏了一些明显的东西。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T01:49:29.103

只是草稿和一些笔记和想法：

*   为了使用 TortoiseHG（在 Windows 上，如果重要的话，XP SP3）Python 不是强制性的 - 我在没有 Python/setuptools/pip 的情况下使用 THG
*   Bitbucket 的TortoiseHG（[32 位](http://bitbucket.org/tortoisehg/files/downloads/tortoisehg-2.5.0-hg-2.3.1-x86.msi)或[64 位](http://bitbucket.org/tortoisehg/files/downloads/tortoisehg-2.5.0-hg-2.3.1-x64.msi)）在 Windows 世界中是自给自足的 Mercurial
*   我手动将 hg-git 扩展添加到我的 TortoiseHG
    *   [从bitbucket repo](http://bitbucket.org/durin42/hg-git/)克隆 hg-git到本地目录

> \TortoiseHg\plugins>目录 /B
> 
> hg-git
> 
> ...

*   将 hg-git 扩展添加到全局 mercurial.ini (Documents and Settings\Badger\mercurial.ini)

> [扩展]
> 
> ...
> 
> hggit = c:\Program Files_Tools\TortoiseHg\plugins\hg-git\hggit
> 
> ...

*   书签扩展，作为默认扩展，与 THG 捆绑在一起，在一些版本之前在 GUI 中启用，现在可以在 mercurial.ini 中找到，因为`bookmarks =`在 Settings-Extensions 中没有相应的复选框

*   使用 TortoiseHG 中的功能 hg-git（克隆、拉取、推送*某些 Git-repo*时没有错误），您可以尝试将外部 Mercurial 存储库转换为外部 Git 存储库

    *   将 CG Mercurial 仓库克隆到本地（Mercurial）仓库
    *   在 Github 上创建新的空 Git 存储库（验证身份验证和其他可能的问题）
    *   添加第二个远程仓库（GUI - “同步”选项卡，手动 - 在`[paths]`仓库的 .hg\hgrc 部分中的新字符串），对我来说只有`git+ssh://git@github.com/username/reponame.git`URL（通过 PageAnt 进行基于密钥的身份验证）是透明的解决方案
    *   将本地 repo 推送到 github
    *   玩得开心

屏幕截图只是我在 GitHub 上的活动 Git 存储库的示例，并尝试通过实时资源来说明我的话

![Fiver 回购](../Images/8cbd422aaba3b13a745a81dbfca35532.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-11T12:47:27.447

我也与 hg-git 作斗争。我想出了一个奇怪的解决方案。

[我用https://import.github.com/new](https://import.github.com/new)导入了 hg repo 这并不奇怪，一定是你要找的。

* * *

**奇怪和奖励部分如下：**

*   [我在http://bitbucket.org](http://bitbucket.org)创建了一个 hg 镜像仓库
*   我在 git 存储库中创建了一个本地 hg 存储库。
*   我添加`.hg/`到我的`.gitignore`
*   添加`.hg/`和`.git/`到您的`.gitignore`文件 `.git/ .hg/`
*   在本地 repo 中输入`.hg`目录并符号链接您的`.gitignore`文件，`.hgignore`如

    $ ln -s ../.gitignore .hgignore

*   现在对您所做的任何更改`.gitignore`也会被考虑`hg`

    $ git add .gitignore -am 'gitignore'

    $ hg add .gitignore -am '不要忘记将 .gitignore 符号链接为 .hg/ 文件夹中的 .hgignore'

    $ hg 推送默认值

    $ git push 起源大师

**结论：**虽然它看起来效率低下，但它在不丢失 hg repo 和数据库的同时利用了 github 的优势，并提供了同时使用`git`和`hg`

# mysql - MySQL btree 索引仍然会导致全表查找？

> ID：12555845
> 
> 赞同：0
> 
> 时间：2012-09-23T20:08:18.617
> 
> 标签：mysql, performance, indexing, database-performance, b-tree-index

我们有一个 MySQL DB (v 5.5)，它为一个大型网站提供动力。该网站的一部分包含一个拥有超过 2,000,000 个帖子的论坛。

该站点最近的流量大幅增加（约 700 -> 1,000 个同时连接），这导致站点上的一些查询非常缓慢。分析慢查询日志后，我们看到很多这样的查询：

```
-- Time: 120923 20:00:08
-- User@Host: muselive_ldu[muselive_ldu] @ localhost []
-- Query_time: 61.101385  Lock_time: 0.000050 Rows_sent: 2  Rows_examined: 346970
SET timestamp=1348430408;
SELECT fp_id FROM ldu_forum_posts WHERE fp_topicid='13731' ORDER BY fp_id ASC LIMIT 2;

-- Time: 120923 20:01:09
-- User@Host: muselive_ldu[muselive_ldu] @ localhost []
-- Query_time: 376.077866  Lock_time: 72.060203 Rows_sent: 2  Rows_examined: 2214232
SET timestamp=1348430469;
SELECT fp_id FROM ldu_forum_posts WHERE fp_topicid='52526' ORDER BY fp_id ASC LIMIT 2; 
```

我不是 MySQL 专家，但是 Rows_examined 部分让我很头疼。我们正在查找一个有大约 2,000,000 行的表，但是我们通过“fp_id”进行查询，它应用了一个 btree 索引。尽管存在此索引，但 Rows_examined 计数从 ~300,000 波动到全表扫描。我还应该提到我们在 fp_topicsid 上也有一个索引。

有谁知道我们为什么会看到这个？真的很感激这方面的一些帮助:)

谢谢！

# blackberry - 黑莓：使用 Comms API 进行迭代 HTTP GET 请愿

> ID：12555846
> 
> 赞同：2
> 
> 时间：2012-09-23T20:08:35.473
> 
> 标签：blackberry, java-me, get

我想将位置坐标（纬度，经度）存储在我的 MySQL DB 中的表中，以类似于以下方式查询 url：http://locationstore.com/postlocation.php [?](http://locationstore.com/postlocation.php?latitude=var1&longitude=var2) latitude=var1&longitude=var2每十秒。PHP 脚本就像一个魅力。在设备中获取坐标也不是问题。但是向服务器发出请求是一件困难的事。我的代码是这样的：

```
public class LocationHTTPSender extends Thread {
    for (;;) {
        try { 
            //fetch latest coordinates
            coords = this.coords();
            //reset url
            this.url="http://locationstore.com/postlocation.php";
            //              create uri
            uri = URI.create(this.url);

            FireAndForgetDestination ffd = null;

            ffd = (FireAndForgetDestination) DestinationFactory.getSenderDestination
                    ("MyContext", uri);
            if(ffd == null)
            {
                ffd = DestinationFactory.createFireAndForgetDestination
                                  (new Context("MyContext"), uri);
            }

            ByteMessage myMsg = ffd.createByteMessage();
            myMsg.setStringPayload("doesnt matter");
            ((HttpMessage) myMsg).setMethod(HttpMessage.POST);

            ((HttpMessage) myMsg).setQueryParam("latitude", coords[0]);
            ((HttpMessage) myMsg).setQueryParam("longitude", coords[1]);
            ((HttpMessage) myMsg).setQueryParam("user", "1");
            int i = ffd.sendNoResponse(myMsg);

            ffd.destroy();
            System.out.println("Lets sleep for a while..");
            Thread.sleep(10000);
            System.out.println("woke up");

        } catch (Exception e) {
            // TODO Auto-generated catch block
            System.out.println("Exception message: " + e.toString());
            e.printStackTrace();
        }       
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:21:38.877

我没有运行这段代码来测试它，但我会怀疑这个调​​用：

```
 ffd.destroy(); 
```

[根据 API 文档：](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/io/messaging/Destination.html#destroy%28%29)

> 关闭目的地。此方法取消所有未完成的消息，丢弃对这些消息的所有响应（如果有），暂停所有传入消息的传递，并阻止将来接收此目标的任何消息。此方法还销毁任何可持久的出站和入站队列。如果 Destination 使用 Push API，此方法将注销关联的推送订阅。仅应在删除应用程序期间调用此方法。

因此，如果您看到第一个请求成功（至少有时），而后续请求失败，我会尝试删除对`destroy()`.

请参阅[此处的 BlackBerry 文档示例](http://docs.blackberry.com/en/developers/deliverables/21128/Send_data_using_FireandForgetDestination_1226147_11.jsp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:56:58.087

好的，所以我终于让它愉快地运行了。问题在于交通选择；尽管[此示例](http://docs.blackberry.com/en/developers/deliverables/11938/CS_display_available_transport_types_834216_11.jsp)在我的设备中将 WAP2（以及其他）作为可用传输提供，但运行网络诊断工具仅显示 BIS 可用。它还为我提供了需要在 URL 末尾附加的连接参数 (;deviceside=false;ConnectionUID=GPMDSEU01;ConnectionType=mds-public)。代码最终是这样的：

```
for (;;) {
        try {

            coords.refreshCoordinates();

            this.defaultUrl();
            this.setUrl(stringFuncs.replaceAll(this.getUrl(), "%latitude%", coords.getLatitude() + ""));
            this.setUrl(stringFuncs.replaceAll(this.getUrl(), "%longitude%", coords.getLongitude() + ""));

            cd = cf.getConnection(this.getUrl());

            if (cd != null) {

                try {

                    HttpConnection hc = (HttpConnection)cd.getConnection();
                    final int i = hc.getResponseCode();
                    hc.close();

                } catch (Exception e) {

                }

            }               

            //dormir
            Thread.sleep(15000);
        } catch (Exception e) {

        } finally {

            //cerrar conexiones

            //poner objetos a null
        } 
```

感谢您的帮助@Nate，非常感谢。

# c# - 在以无锁方式生成对象之前，如何暂停消费者？

> ID：12555847
> 
> 赞同：1
> 
> 时间：2012-09-23T20:08:42.637
> 
> 标签：c#, .net, multithreading, lock-free

我有两个线程，一个生产者和一个消费者。

生产者可能并不总是在生产某些东西。然而，消费者需要在它可用时立即消费它。

生产者线程循环工作并将结果放入`ConcurrentQueue`. 消费者线程处于循环中，当系统被禁用时`while (!disposing)`调用。`AutoResetEvent.WaitOne`我也考虑`AutoResetEvent.WaitOne`在`ConcurrentQueue.TryDequeue`方法返回 false 的情况下调用；只有当队列中没有剩余项目时才会发生这种情况。

但是，如果我这样做，则在完成以下执行时可能会发生死锁：

1.  入队
2.  TryDequeue 返回 true
3.  TryDequeue 返回 false
4.  入队
5.  维一

这是此片段中的一种可能性：

```
while (this.isDisposing == 0)
{
    if (this.isEnabled == 0)
    {
        this.signal.WaitOne();
    }

    object item;
    if (!this.queue.TryDequeue(out item))
    {
        this.signal.WaitOne();
        continue;
    }

    this.HandleItem(item);
} 
```

不使用锁的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:56:13.710

我认为 BlockingCollection 在这里使用会很好。它将有效地等待，直到队列中有数据。您可以将其与我认为的 ConcurrentQueue 结合使用。请参阅[http://msdn.microsoft.com/en-us/library/dd267312.aspx](http://msdn.microsoft.com/en-us/library/dd267312.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:51:20.613

这里的问题是线程暂停在几乎所有操作系统中都是内核级事件。我认为使用 Fibers 的 Windows 允许用户级暂停/取消暂停，但这就是我所知道的。

所以你和你的队列一起无锁地呼啸而过，但是当队列中有东西时你如何发出信号呢？

发信号意味着睡觉——这就是问题所在。你可以做无锁信号，但是等待，好吧，你必须调用操作系统等效的 WaitForEvent()，这是一个问题，因为你不想使用这些缓慢的，操作系统提供的机制。

基本上，目前还没有或很少有操作系统支持。

# javascript - Capybara 使用异步 JavaScript 进行集成测试

> ID：12555848
> 
> 赞同：13
> 
> 时间：2012-09-23T20:08:52.927
> 
> 标签：javascript, jquery, ruby-on-rails, selenium, capybara

我有一个失败的 Rails 集成测试，我不知道为什么。我正在使用 Capybara 和 Selenium 作为驱动程序。

该测试检查页面内容是否在 AJAX 调用发生后被*删除。*相关的操作是单击按钮，并且该按钮单击会导致页面的一部分通过 jQuery`remove()`调用被删除。这是集成测试代码的近似值：

```
click_button("Remove stuff")
assert has_no_link?("This should be removed") 
```

断言失败，意味着链接仍然存在。

我一直在阅读 Capybara，我知道您可以延长默认等待时间。我已经将它扩展到一个荒谬的值（20 秒），但断言仍然失败。

当我自己手动执行测试过程时，页面*源*仍然显示内容，但*DOM*没有（通过查看 Firefox 的 DOM Inspector 并查找元素）。这是问题吗？我什至尝试在 Firefox 中运行测试*时*检查 DOM以检查内容是否存在，但似乎不存在。

我不知道 Capybara 是如何找到这个不再存在于 DOM 中的链接的。Capybara 是否检查源而不是 DOM 并在那里找到链接？如果是这样，我不知道如何修复此测试以确保测试通过。刷新页面可以解决问题，但这并不是用户会做的事情，所以我犹豫是否要更改页面只是为了让测试通过......

希望有任何关于如何解决这个问题的建议。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-06-09T21:26:22.137

Thoughtbot 有一篇很棒的关于等待 AJAX 的博文，你可以[在这里](https://robots.thoughtbot.com/automatically-wait-for-ajax-with-capybara)阅读，虽然它是基于 Rspec 的，而且看起来你正在使用 TestUnit。

它适用于 Capybara 等待时间不够长但不会添加不必要的长时间超时的情况。我现在主要在 Rspec 中工作，但我认为您可以通过以下方式对其进行修改：

```
# Create this file in test/support/wait_for_ajax.rb
module WaitForAjax
  def wait_for_ajax
    Timeout.timeout(Capybara.default_max_wait_time) do
      loop until finished_all_ajax_requests?
    end
  end

  def finished_all_ajax_requests?
    page.evaluate_script('jQuery.active').zero?
  end
end 
```

您可以在需要时将其包含在单个测试文件中，也可以使用[此 SO 帖子](https://stackoverflow.com/questions/19841510/include-module-in-all-minitest-tests-like-in-rspec)中提供的策略之一来自动包含它。

然后，每当您的测试未正确等待 AJAX 完成时，只需插入`wait_for_ajax`. 以您的代码为例：

```
click_button("Remove stuff")
wait_for_ajax
assert has_no_link?("This should be removed") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:17:37.350

有一些称为 wait_until 的方法，但它最近已被弃用，并使用 synchronize 方法进行了更改。

[http://www.elabs.se/blog/53-why-wait_until-was-removed-from-capybara](http://www.elabs.se/blog/53-why-wait_until-was-removed-from-capybara)

[https://github.com/jnicklas/capybara/blob/master/lib/capybara/node/base.rb#L44](https://github.com/jnicklas/capybara/blob/master/lib/capybara/node/base.rb#L44)

目前还不知道具体怎么用，等待作者解答，希望能尽快解决这个问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T22:16:11.600

有一种检查 ajax 请求是否完成的好方法，我从[这篇文章](http://www.natontesting.com/2012/02/27/a-solution-to-ajax-errors-with-capybara-against-a-jquery-site/)中学到了这一点。`wait`您可以使用 ajax`$.active`函数（[不在实际 API 中，但已公开](https://stackoverflow.com/questions/3148225/jquery-active-function)，因此您可以使用它） ，而不是使用某个特定时间。`$.active`告诉您与服务器的活动连接数，因此当它降至零时，您就知道 ajax 请求已完成：

```
wait_until do
  page.evaluate_script('$.active') == 0
end 
```

如果这不起作用，那么问题出在其他地方（从你写的内容来看，这似乎很可能）。如果更改只发生在 DOM 中，那么您必须确保为您的测试/规范启用了 javascript。例如，在 rspec 中，您设置`:js => true`这样做；在 Cucumber 中，您在场景上方添加一行`@javascript`. 我不使用 rails 的默认测试，但必须有一个设置来做同样的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-20T15:02:39.243

您始终可以手动执行此操作。使用@shioyama 的想法：

```
 def wait_for_ajax
    timer_end = Time.now + 5.seconds 
    while page.evaluate_script('$.active') != 0    
      if Time.now > timer_end
        fail "Page took more than 5 seconds to load via ajax"
      end 
      sleep 0.1
    end
  end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-10T18:07:44.117

我想到的几种方法：

1：检查您的水豚版本并查找您的版本的任何错误

2：也许在单击按钮后尝试在链接上进行查找

click_button("删除东西") find(:xpath, '//a[text()='链接应该被删除').should be_false

3：使用has_link？而不是 has_no_link？

click_button("删除东西") page.has_link?("链接应该被删除").should be_false

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-26T22:49:16.783

我必须重写 wait_until 进行测试，该测试涉及等待通过将 youtube 视频流式传输到某个点而触发的回调。这是我使用的：

```
# in spec_helper.rb
require "timeout"
def wait_until time=0.1
    Timeout.timeout(Capybara.default_wait_time) do
        sleep(time) until value = yield
        value
    end
end 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-14T16:41:39.760

您是否首先使用链接测试其他内容，然后测试它是否已被删除？

换句话说，您的测试是否类似于：

```
has_no_link = $('#id_for_link')
//.... some test
click_button("Remove stuff")
assert has_no_link?("This should be removed") 
```

如果是这种情况，那么 has_no_link 仍将指向该链接。remove() 会将其从 DOM 中删除，但您的变量仍指向内存中的它。

您应该在 DOM 中再次查询该链接以查看是否得到结果。

# bash - 使用 bash 生成变体

> ID：12555849
> 
> 赞同：6
> 
> 时间：2012-09-23T20:09:02.907
> 
> 标签：bash

为下一个代码寻找更好的解决方案：

```
for i in a b c
do
  for j in A B C
  do
    for k in 1 2 3
    do
      echo "$i$j$k"
    done
  done
done 
```

当然这里有一些更简单的解决方案。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-23T20:12:33.703

这有点简单

```
echo {a,b,c}{A,B,C}{1,2,3} 
```

或者如果想要每行一个，那么

```
echo {a,b,c}{A,B,C}{1,2,3} | xargs -n1 
```

顺便说一句，您可以使用上面的括号扩展，例如在需要制作备份文件时保存键盘输入，例如：

```
cp /some/long/path/And_very-ugly-fileName{,.copy} 
```

将`/some/long/path/And_very-ugly-fileName.copy`无需输入第二个文件名。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-23T20:12:27.497

使用[**大括号展开**](http://www.gnu.org/software/bash/manual/html_node/Brace-Expansion.html)：

```
echo {a,b,c}{A,B,C}{1,2,3} 
```

这将打印集合、和之间的**所有**可能组合。`{a,b,c}``{A,B,C}``{1,2,3}`

或者更简单，使用范围：

```
echo {a..c}{A..C}{1..3} 
```

如果要每行打印每个组合，请使用`for`-loop：

```
for i in {a..c}{A..C}{1..3}; do echo $i; done 
```

# clojure - 在 leiningen 项目中打包 .so 库

> ID：12555851
> 
> 赞同：2
> 
> 时间：2012-09-23T20:09:45.773
> 
> 标签：clojure, leiningen

我有一个`.so`文件需要在类路径上才能让我的程序工作。在 leiningen 项目中包装它的最佳方式是什么？

* * *

### 更新

它工作得非常好......有关另一个示例，请参见[https://github.com/zcaudate/sigar-native-deps](https://github.com/zcaudate/sigar-native-deps)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T22:34:24.187

将它们放在您的 lein 项目中名为 native 的目录下，如此处所述。

[http://nakkaya.com/2010/04/05/managing-native-dependencies-with-leiningen/](http://nakkaya.com/2010/04/05/managing-native-dependencies-with-leiningen/)

# maven - JVM 上的 Clojure 是否必须使用 Maven？

> ID：12555855
> 
> 赞同：12
> 
> 时间：2012-09-23T20:10:11.400
> 
> 标签：maven, clojure, leiningen

关于 Clojure 提到 Maven 的文章/博客/问题/答案的数量之多，我有点惊讶。

作为一名 Java 开发人员，在桌面应用程序和 web 应用程序上工作了大约十年，我从来没有使用过一次 Maven（通常——这是个人意见，但我知道有些人确实有同样的想法——我的项目已经看到使用 Maven 包括“厨房水槽”，而那些使用更“受控”的构建过程构建的方式“更清洁”并产生更小的罐子，更快的构建时间等）。

当您想要构建 Clojure 应用程序时，是否需要 Maven？

当你想使用 Leiningen 时，Maven 是强制性的吗？例如，我可以“手动”将外部 jar 作为依赖项添加到 leiningen 项目，而不需要 Maven？

我认为我的问题可以归结为：在 Clojure/JVM 世界中，您是否可以在不使用 Maven 的情况下摆脱困境，就像您无需 Maven 就可以构建、测试、打包和发布 Java 桌面、Web 应用程序和 Android 应用程序一样？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-23T21:57:11.170

简短的回答：不。Clojure 只是一个 jar，您可以随意使用它作为“原始”，就像任何其他 Java 库一样。

更长的答案： Maven 不是必需的，但是围绕 Clojure 的工具，尤其是 Leiningen，是高度 Maven 对齐的，所以如果你服从 Maven 的意愿，你的生活会更轻松。但是，只要稍加努力，没有 Maven 也不会那么难相处。在工作中，我混合使用 Leiningen 和我们现有的基于 Ant/Ivy 的构建基础架构。我使用 Ant 来解决依赖关系（来自我们策划的内部 repo），然后使用 Leiningen 的 hack`:resource-paths`来获取非 Maven jar。在某个时候，我会制作一个真正的插件来做这些事情，但到目前为止它对我来说一直很好。

此外，如果您是 Eclipse 人员并使用 CounterClockwise，您可以像对待 Eclipse 中的任何其他 Java 项目一样对待您的项目，手动管理类路径。碰巧你也有一些 Clojure 代码。

当然，这两种方法的缺点是，如果你想从 Maven 中心或 Clojars 中获取可用的东西，你要么必须为你的基础设施设置某种镜像，要么手动拉下传递依赖并添加他们到你的项目。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-23T22:09:09.513

就此而言，您不必使用 maven 或 leiningen。您可以运行 clojure REPL

```
 java -jar clojure-1.3.0.jar 
```

它会工作得很好。我知道你来自哪里，因为一年前，我和你在同一条船上。从来没有使用过 maven，见过几个不太好的项目使用得不好，而且通常不信任 maven。Ant+ivy 效果很好，谁需要 maven？

由于使用了 leiningen，并开始了一项新工作，我们有一个很好的 maven 配置，我已经完全改变了我的风格；我现在认为 maven 很棒，并且更喜欢它而不是我已经使用了很长时间的 ant。

特别是 clojure，leiningen 的一些优点是：

*   automagic 项目脚手架：“lein new”为您设置一个新项目。约定很重要，它可以帮助其他开发人员了解您的项目并快速启动它。
*   依赖和插件管理。添加依赖项是微不足道的，而且我知道没有一种很好的方法可以进行与 clojure 紧密集成的非 Maven 依赖项管理。
*   “lein repl” 正确设置了你的类路径和一切，所以你不必愚弄它，你可以启动并运行一个 REPL。
*   工件创建：构建一个胖罐子 (lein uberjar) 很简单，并且已经为您设置好了。

因此，虽然在没有 leiningen 的情况下绝对可以使用 clojure，但老实说，我不明白您为什么要这样做。在我看来，日常开发有太多的好处不能使用它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-23T22:48:47.660

关于“当你想使用 Leiningen 时，Maven 是强制性的吗？”

leiningen 使用并包装了 Maven，因此您无法真正避免它，尽管您不需要接触任何 XML

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-24T00:34:02.877

正如其他人正确指出的那样，Clojure 并不强制使用 Maven。

但是，我想鼓励您接受 Maven（直接或通过 leiningen）。它在 Clojure 世界中具有一些很大的优势：

*   **从长远来看，您的工作效率会更高**——一旦您完成了它的设置，看到一个复杂的构建、测试和部署在一个命令中执行是非常令人印象深刻的。您真的想要手动设置类路径、下载依赖项、增加版本号、上传到 FTP 站点等吗？
*   在 JVM 上使用 Clojure 的最大优势之一是可以访问**Java 库生态系统**。Maven 是自动管理 Java 库依赖项的首选工具。您可能需要的几乎所有东西都在 Maven Central 或 Clojars 存储库中。
*   Clojure 往往有**小型的集中库**——这很好，因为它们“简单”，你可以选择你喜欢的功能。同时，这也意味着您可能在数字上拥有更多的库依赖项。因此，构建管理系统将更加有用。
*   您可以根据需要使 Maven 构建变得**“精益”**。显然，如果您愿意，您可以在阳光下引入所有依赖项，但您也可以通过排除不必要的垃圾来创建非常精简的 jar。那是你的选择。
*   它是Clojure 世界中**的事实标准**。如果不出意外，使用它意味着您将能够更轻松地与他人**协作。**

PS和你一样，5年前我并没有真正看到Maven的意义。然后我试了一下，看看它对我的工作流程有多么强大。现在我是一个皈依者:-)

# php - 从数组中获取第一个值

> ID：12555863
> 
> 赞同：1
> 
> 时间：2012-09-23T20:11:36.983
> 
> 标签：php, arrays

我有一个保存用户步骤的 PHP 数组：

```
array(
    'step_1' => 1,
    'step_2' => 1,
    'step_3' => 0,
    'step_4' => 0,
    'step_5' => 0
); 
```

因此，我的用户执行 step_1 和 step_2，但他不执行其他步骤。现在，我想得到**他不做的第一步的**名称，在这个例子中是“step_3”。

但是如果数组看起来：

```
 array(
    'step_1' => 1,
    'step_2' => 1,
    'step_3' => 1,
    'step_4' => 1,
    'step_5' => 0
); 
```

我想获得“step_5”，而不是我知道用户不执行 step_5 并且我可以，例如将他们重定向到指定页面。我怎么才能得到它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T20:18:19.643

你可以使用[array_search()](http://php.net/manual/en/function.array-search.php)

`**[See In Action](http://codepad.org/4iiqWNLk)**`

```
<?php 
$array = array(
    'step_1' => 1,
    'step_2' => 1,
    'step_3' => 1,
    'step_4' => 0,
    'step_5' => 0
);

$key = array_search(0, $array); // $key = step_4;

echo $key;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T20:13:30.037

您可以使用`reset($array);`

[http://php.net/manual/en/function.reset.php](http://php.net/manual/en/function.reset.php)

```
Return Values

Returns the value of the first array element, or FALSE if the array is empty. 
```

编辑：

您可以使用`array_search(0,$array);`

这将为您返回第一个找到的 var 的键。（step_5）在你的情况下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T20:31:17.780

你可以试试

```
$step = array(
    'step_1' => 1,
    'step_2' => 1,
    'step_3' => 0,
    'step_4' => 0,
    'step_5' => 0
);
var_dump(__missing($step));
var_dump($step); 
```

输出

```
string 'step_3' (length=6)
array
  'step_1' => int 1
  'step_2' => int 1
  'step_3' => int 1
  'step_4' => int 0
  'step_5' => int 0 
```

示例 2

```
$step = array(
    'step_1' => 1,
    'step_2' => 1,
    'step_3' => 1,
    'step_4' => 1,
    'step_5' => 1
);
var_dump(__missing($step));
var_dump($step); 
```

输出

```
string 'step_1' (length=6)
array
  'step_1' => int 1
  'step_2' => int 0
  'step_3' => int 0
  'step_4' => int 0
  'step_5' => int 0 
```

使用的功能

```
function __missing(&$array) {
    $left = array_filter($array, function ($var) {
        return ($var == 1) ? false : true;
    });
    if (! empty($left)) {
        $key = key($left);
        $array[$key] = 1;
        return $key;
    } else {
        array_walk($array, function (&$var) {
            return $var = 0;
        });
        $key = key($array);
        $array[$key] = 1;
        return $key;
    }
} 
```

# javascript - 如何在ajax请求期间将头部的图标更改为“正在加载”？

> ID：12555864
> 
> 赞同：1
> 
> 时间：2012-09-23T20:11:51.257
> 
> 标签：javascript, jquery, css, ajax

我已经意识到 Facebook 会这样做，不知道是否还有其他网页。我想知道是否可以使用 jquery，我之前在进行 ajax 调用时使用了常见的加载 gif，但我认为这将是一个不错的选择。我感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T20:21:38.843

*favicon*要么由服务器 HTTP 应用程序自动传输（只需发送一个名为“favicon.ico”的文件，该文件必须位于特定位置），要么您可以通过创建元素明确要求它`<link>`。

例如

```
<link type="image/x-icon" href="http://server.com/path/name.ico" rel="shortcut icon"> 
```

所以，当然我们也可以通过编程方式创建它！使用 jQuery：

```
var favIcon = $('<link>', {
    type:    'image/x-icon',
    rel:     'shortcut icon',
    href:    'http://servername.com/path/name.ico'
}).appendTo( document.head || document.getElementsByTagName( 'head' )[ 0 ] ); 
```

现在有了这些基本知识，我们可以通过删除和创建这些元素来切换*网站图标。*`<link>`所以我们可以调用`favIcon.remove()`并创建另一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T20:13:58.290

以下是更改它的过程：

HEAD 中您的 favicon 的 HTML：

```
<link id="favicon" rel="shortcut icon" type="image/png" href="favicon.png" /> 
```

例如，您可以通过更改此链接上的 HREF 元素来使用 Javascript 更改网站图标（假设您使用的是 JQuery）：

```
$("#favicon").attr("href","favicon2.png"); 
```

# c# - 用字符串替换字符

> ID：12555868
> 
> 赞同：0
> 
> 时间：2012-09-23T20:12:17.673
> 
> 标签：c#, replace

如何用字符串替换字符串中的字符？

例如：用“test”替换所有字符的“e”：“Hello World”->“Htestllo World”。

A，string.replace(char,string)，如果你愿意的话。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T20:15:03.407

您可以使用 Replace 方法的字符串版本：

```
"Hello World".Replace("e", "a long string"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T20:35:24.443

```
// let's pretend this was a char that came to us from somewhere, already as a char...
char c = char.Parse("e");

// Here is the string we want to change...
string str1 = "Hello World."

// now we'll have to convert the char we have, to a string to perform the replace...
string charStr = c.ToString();

// now we can do the replace...
string str2 = str1.Replace(charStr,"test"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T20:18:30.777

您可以使用[String.Replace](http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx)将字符串中出现的任何字符串替换为另一个字符串。

> 返回一个**新字符串**，其中当前实例中出现的所有指定字符串都替换为另一个指定字符串。

示例用法：

```
string original = "Hello world";
string changed = original.Replace("e", "t");
Console.WriteLine(changed); // "Htllo world" 
```

# asp.net - 模型和视图模型有什么区别？

> ID：12555875
> 
> 赞同：2
> 
> 时间：2012-09-23T20:12:54.243
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, viewmodel, models

在 mvc 项目中，有人可以向我解释模型和视图模型之间的区别吗？

我的理解是视图模型代表视图的数据，例如。cshml，但模型表示部分视图的数据。这是否正确。我已经看到在不同情况下使用的名称让我感到困惑，因此寻找方向。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T20:17:19.960

模型是您的领域。例如，我们可能有一个客户模型。我们可以在我们的域中使用这个客户。我们可以为这个客户下订单。我们可以更新客户的联系方式等等。

```
// Domain object, encapsulates state.
class Customer 
{   
   public void PlaceOrder() {...}
   public void UpdateContactDetails() { ... }
} 
```

视图模型是一种以简单方式呈现数据的方式。例如，我们可能有一个客户视图模型。这将是一个简单的 DTO（数据传输对象），它允许我们向客户展示视图。视图模型通常是从​​模型创建的——通常会发生某种形式的转换。

```
// DTO - exposes state - no domain logic
class CustomerViewModel
{
    public string Name { get; set; }
    public int Id { get; set; }
} 
```

使用视图模型而不是在视图中使用域对象的好处是，您不必公开域的内部结构来简化表示逻辑。我应该补充一点，视图模型是一种控制模型绑定的方式，例如，如果您公开了一个数据库记录，您可能不希望整个记录都是可绑定的。使用视图模型意味着只有模型上的那些参数将被绑定。因此，从安全的角度来看，使用视图模型很重要。这里的替代方案是使用白名单来控制模型绑定过程中使用的内容 - 自然这很乏味且容易出错。

就 ASP.NET MVC 而言 - 模型一词在某种程度上可以互换使用。在“现实世界”项目中，您的域可能很复杂，不会驻留在 Web 应用程序中，您可能会包含一些其他依赖项。因此，您将使用的“模型”将是视图模型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T20:43:36.903

一般而言，在 ASP.NET 世界中，当人们提到模型时，指的是“域模型”，它们通常是数据库表和 C# 类之间的 1-1 映射。

当提到视图模型时，这些是帮助在视图（.cshtml）和控制器之间传递数据的便利类。视图模型应该包含与视图相关的数据，其中可能包含域模型的聚合数据（例如，名为“FullName”的属性，它是“FirstName”和“LastName”的组合）或分页信息等。

就个人而言，我更喜欢使用视图模型将数据以简单的形式呈现给视图，并且我让控制器操作获取视图模型的实例，构建域模型并直接或通过服务层对它们进行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T20:17:26.120

我想说的是，通常视图模型保存特定视图/屏幕/部分视图的数据，而模型是表示业务对象或实体的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T20:34:09.587

请查看以下帖子，您的问题已成功回答： [ASP.NET MVC Model vs ViewModel](https://stackoverflow.com/questions/4061440/asp-net-mvc-model-vs-viewmodel)

希望这可以帮助

# javascript - 如何使用 innerHTML 为 IE 嵌入条件注释？

> ID：12555880
> 
> 赞同：2
> 
> 时间：2012-09-23T20:13:41.900
> 
> 标签：javascript, html, svg, innerhtml, conditional-comments

好的，所以我想有条件地添加这行代码；

```
<!--[if ! IE]> <embed src="logo.svg" type="image/svg+xml" /> <![endif]--> 
```

使用：

```
document.getElementById("logo") .innerHTML='...'; 
```

在一个`if()/else()`声明中，它不写它！如果我去掉选择性注释（`<!--[if ! IE]><![endif]-->`），只放 SVG（`<embed src="logo.svg" type="image/svg+xml" />`），它就可以工作了！我应该怎么办？

我找到了一种解决方法，但我认为在 Android 浏览器中，这个东西会弹出两次。

```
here's what I've done ( and its Validated stuff!);

<!DOCTYPE html>
<html>
<head>
<META CHARSET="UTF-8">
<title>SVG Test</title>
<script type="text/javascript">
//<![CDATA[
onload=function()
    {

        var ua = navigator.userAgent.toLowerCase();
var isAndroid = ua.indexOf("android") > -1; //&& ua.indexOf("mobile");
if(isAndroid) {

        document.getElementById("logo").innerHTML='<img src="fin_palais.png"/>';

        }

    }
//]]>

</script>
</head>
<body>

    <div id="logo">
        <!--[if lt IE 9]>
            <img src="fin_palais.png"/>
        <![endif]-->

        <!--[if gte IE 9]><!-->

            <embed src="fin_palais.svg" type="image/svg+xml" />

        <!--<![endif]-->

    </div>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T20:31:59.403

您检测非 IE 的语法已损坏。

**微软推荐的方式 - 导致错误的标记**

```
<![if !IE]>
 <p>This is shown in downlevel browsers, but is invalid HTML!</p>
<![endif]> 
```

**这种方式也显示作品并且是有效的标记**

```
<!--[if !IE]>-->
  <p>This is shown in downlevel browsers.</p>
<!--<![endif]--> 
```

也就是说，@jfriend00 的评论很好。

你的方式开始了一个`html comment`永远不会关闭的方式，因此无法正确处理。 `html comments`用第一个打开，`--`用第二个关闭。它们不会以`>`类似的常规元素关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T20:28:19.680

最好不要把它放在innerHTML中，而是使用条件来控制它是否进入innerHTML，如下所示：

```
var str = '...';    // whatever your other HTML is
<!--[if ! IE]>
str += '<embed src="logo.svg" type="image/svg+xml" />';
<![endif]--> 
```

如果您向我们展示您要解决的整个问题，可能有一些方法可以在没有浏览器条件的情况下做到这一点。

# php - 我在哪里可以找到 Yii 应用程序事件的列表？

> ID：12555888
> 
> 赞同：2
> 
> 时间：2012-09-23T20:15:11.413
> 
> 标签：php, html, yii

我想挂钩一些 Yii 应用程序事件，但我找不到任何列出可用事件的文档。我所能找到的只是关于“onBeginRequest”和“onEndRequest”的几页。还有其他人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T20:21:40.190

我不记得看过所有类的所有事件的完整列表，但是如果您浏览需要事件的类的文档，您会发现所有...

例如[CActiveRecord中有几个](http://www.yiiframework.com/doc/api/1.1/CActiveRecord)

```
onAfterConstruct()

onBeforeFind()
onAfterFind()

onBeforeSave()
onAfterSave()

onBeforeValidate()
onAfterValidate()

onBeforeDelete()
onAfterDelete() 
```

由于这些仅适用于 Active Record，它们仅在该类中定义。

# ruby-on-rails - 使用 NoSQL 数据库的有机 Rails 数据模型

> ID：12555890
> 
> 赞同：0
> 
> 时间：2012-09-23T20:15:20.883
> 
> 标签：ruby-on-rails, model, nosql, dynamic-data, couchbase

我想充分利用 NoSQL 文档的有机特性，构建一个动态数据模型，该模型可以增长、可以更改，并且对于大多数数据集都是不同的。下面是模型 SomeRequest.rb ，其中包含从 Couchbase 设置和获取的代码，但我无法让函数 addOrUpdate(key, value) 工作：

```
undefined method `each' for "0":String 

Completed 500 Internal Server
Error in 16ms NoMethodError (undefined method `each' for "0":String): 
config/initializers/quiet_assets.rb:7:in `call_with_quiet_assets' 
```

是返回错误。有没有办法让这项工作，添加（或更新现有的）密钥，然后将文档保存到数据库中？

```
class SomeRequest < Couchbase::Model
  include ActiveModel::Validations
  include ActiveModel::Conversion
  extend ActiveModel::Callbacks
  extend ActiveModel::Naming

  # Couch Model
  define_model_callbacks :save

  attribute :session_id
  attribute :views, :default => 0
  attribute :created_at, :default => lambda { Time.zone.now }

  # iterate through attr keys and set instance vars
  def initialize(attr = {})
    @errors = ActiveModel::Errors.new(self)
    unless attr.nil?
      attr.each do |name, value|
        setter = "#{name}="
        next unless respond_to?(setter)
        send(setter, value)
      end
    end
  end

  def addOrUpdate(key, value)
    self[key] = value
  end

  def save
    return false unless valid?
    run_callbacks :save do
      Couch.client.set(self.session_id, self)
    end
    true
  end

  def self.find(key)
    return nil unless key
    begin
      doc = Couch.client.get(key)
      self.new(doc)
    rescue Couchbase::Error::NotFound => e
      nil
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:49:30.987

你为什么不喜欢使用来自 couchbase-model gem 的 find、save 和 create 方法？

```
class Couchbase::Error::RecordInvalid < Couchbase::Error::Base
  attr_reader :record

  def initialize(record)
    @record = record
    errors = @record.errors.full_messages.join(", ")
    super("Record Invalid: #{errors}")
  end
end

class SomeRequest < Couchbase::Model
  include ActiveModel::Validations

  attribute :session_id
  attribute :views, :default => 0
  attribute :created_at, :default => lambda { Time.zone.now }

  validates_presence_of :session_id

  before_save do |doc|
    if doc.valid?
      doc
    else
      raise Couchbase::Error::RecordInvalid.new(doc)
    end
  end

  def initialize(*args)
    @errors = ActiveModel::Errors.new(self)
    super
  end

end 
```

你可能是对的，默认情况下添加验证钩子是值得的，我想我会在下一个版本中这样做。上面的示例适用于版本 0.3.0

考虑到`updateOrAdd`我建议您只使用方法`#save`，它将检查密钥是否持久化（当前通过检查`id`属性），如果记录还没有密钥，它将生成密钥并更新它。

### 更新

在版本`0.4.0`中，我在 gem 中添加了验证钩子，因此上面的示例可以更简单地重写。

```
class SomeRequest < Couchbase::Model
  attribute :session_id
  attribute :views, :default => 0
  attribute :created_at, :default => lambda { Time.zone.now }

  validates_presence_of :session_id
end 
```

# c++ - 如何在模板类中重载较少的运算符以供排序算法使用？

> ID：12555891
> 
> 赞同：2
> 
> 时间：2012-09-23T20:15:33.007
> 
> 标签：c++, templates, sorting, stl

我有一个使用模板的自定义类，如下所示：

```
template<class T>
class foo 
{
    public:
    T a;
    bool operator<(const foo<T> &f);
    //other functions...
}

template<class T>
bool foo<T>::operator<(const foo<T> &f)
{return a - f.a;} 
```

现在，我新建了一些 foo 并赋予它们价值，然后我想对这个数组进行排序：

```
foo<int>* fp = new foo<int>[3];
//give each element value
sort(fp, fp+3); //run-time error 
```

当我使用排序功能时，出现运行时错误。

我做错什么了吗？请帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T20:20:21.443

大概是这样的：

```
template<class T>
bool foo<T>::operator<(const foo<T> &f)
{return a < f.a;} 
```

`std::sort`要求比较函数（在这种情况下是小于运算符）定义[严格的弱排序](http://www.sgi.com/tech/stl/StrictWeakOrdering.html)。您的实现没有，因为两者都可能`A < B`是`B < A`真的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-23T20:20:56.303

如果 T 可转换为 bool，

```
template<class T>
bool foo<T>::operator<(const foo<T> &f)
{return a - f.a;} 
```

将始终返回 true 除了 a == fa 也许你需要类似的东西：

```
template<class T>
bool foo<T>::operator<(const foo<T> &f)
{return a < f.a;} 
```

显然，发生运行时错误是因为您的 less 运算符对于排序功能不正确。

# .net - 我可以在构建时将 Visual Studio 设置为使用 psake 吗？

> ID：12555892
> 
> 赞同：5
> 
> 时间：2012-09-23T20:15:57.220
> 
> 标签：.net, build, psake

我想在构建时将 Visual Studio 设置为默认使用 Psake 构建。这是否可能比它的价值更多的努力？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T22:30:54.250

可能是的，如果您重视构建中的一致性，当然值得付出努力，这听起来像您所做的那样。

[StudioShell](http://studioshell.codeplex.com/)是主要参与者，[这里](http://www.beefycode.com/post/Overview-of-StudioShell-Solution-Modules.aspx)有一篇关于此事的整洁博客文章。

# eclipse - 缺少源文件

> ID：12555893
> 
> 赞同：0
> 
> 时间：2012-09-23T20:16:00.263
> 
> 标签：eclipse

## 这不是生死攸关的问题。我确实有 2 或 3 天前的备份。- 我认为这个问题的答案可能是“在你关灯回家之前，每晚都要学会保存和备份你的文件”，但以防万一有一个更快乐的答案，就这样吧。

我在 Eclipse 中编写了一些 Android/Java 的东西。我在 eclipse 中打开了机器，并在 eclipse 中打开了几个源 java/xml 文件并放弃了过夜。今天早上我坐在机器旁时，我收到一条消息，说 windows 已经进行了更新，并重新启动了我的机器。重新登录并打开 Eclipse 后，它在编辑窗口中显示了源文件，它们看起来很正常，但是当我尝试在编辑窗口中键入时，我收到了一些消息“文件是派生的，我真的想要编辑它们”（我的确切措辞可能是错误的。我没有在点击 no 或 Cancel 之前复制文本，或者我认为可以让我不做任何事情的任何选择）。在我离开该屏幕后，它向我显示了一个现在空白的源文件编辑窗口。我关闭了它并尝试从包资源管理器重新打开文件，但它不会打开。所以我关闭了 Eclipse 并查看了 /src 目录，看起来源文件已经消失了。我确实有几天前的备份，所以回去不是生死攸关的问题，但我真正的问题是。1-当机器启动/电源故障/意外崩溃并在 Eclipse 中打开源文件时，这是正常情况吗？2 - 我是否错误地回答了“文件是派生的......”问题？那时我可以做些什么来拯救文件吗？欢迎任何意见。- 乔 回去不是生死攸关的问题，但我真正的问题是。1-当机器启动/电源故障/意外崩溃并在 Eclipse 中打开源文件时，这是正常情况吗？2 - 我是否错误地回答了“文件是派生的......”问题？那时我可以做些什么来拯救文件吗？欢迎任何意见。- 乔 回去不是生死攸关的问题，但我真正的问题是。1-当机器启动/电源故障/意外崩溃并在 Eclipse 中打开源文件时，这是正常情况吗？2 - 我是否错误地回答了“文件是派生的......”问题？那时我可以做些什么来拯救文件吗？欢迎任何意见。- 乔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:43:38.343

如果你记得你的文件在哪里，你可以在 Project Explorer > Restore from History 或 Replace With > Local History 中右键单击父级。这感觉就像一个非常基本的本地 VCS。即使这不是无穷无尽的历史，您也可以扩展 Eclipse 允许的大小以保留此类以前的版本。

# php - 文件操作搜索和替换csv php

> ID：12555894
> 
> 赞同：1
> 
> 时间：2012-09-23T20:16:00.967
> 
> 标签：php, csv, replace

我需要一个脚本来查找并替换类似 CSV 文件中的 sertain 行。该文件如下所示：

```
 18:110327,98414,127500,114185,121701,89379,89385,89382,92223,89388,89366,89362,89372,89369
 21:82297,79292,89359,89382,83486,99100
 98:110327,98414,127500,114185,121701 
```

24:82297,79292,89359,89382,83486,99100

现在我需要更改第 21 行。

这是我到目前为止得到的。

前 2 到 4 位数字后跟 : 是类别编号。此之后的每个数字（后跟一个 ,）都是一个页面的 id。我从数据库中获取我想要的 id（即 82297 等）。

```
 //test 2
 $sQry = "SELECT * FROM artikelen WHERE adviesprijs <>''";

$rQuery = mysql_query ($sQry);

 if ( $rQuery === false )
{
 echo  mysql_error ();
 exit ;
 }

$aResult = array ();

while ( $r = mysql_fetch_assoc ($rQuery) )
{

$aResult[] = $r['artikelid'];

}

$replace_val_dirty = join(",",$aResult);

$replace_val= "21:".$replace_val_dirty;

// file location
$file='../../data/articles/index.lst';

// read the file index.lst
$file1 = file_get_contents($file);

 //strip eerde artikel id van index.lst
 $file3='../../data/articles/index_grp21.lst';

$file3_contents = file_get_contents($file3);

$file2 = str_replace($file3_contents, $replace_val, $file1);

if (file_exists($file)) {
echo "The file $filename exists";
} else {
echo "The file $filename does not exist";

 }

 if (file_exists($file3)) {
echo "The file $filename exists";
} else {
echo "The file $filename does not exist";

 }

 // replace the data
 $file_val = $file2;
 // write the file
 file_put_contents($file, $file_val);

 //write index_grp98.lst

file_put_contents($file3, $replace_val);

mail('info@', 'Aanbieding catergorie geupdate', 'Aanbieding catergorie  geupdate'); 
```

谁能指出我正确的方向来做到这一点？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T21:21:00.113

您需要打开原始文件并浏览每一行。当您发现要更改的行时，请更改该行。

由于您在执行此操作时无法编辑文件，因此您在执行此操作时编写了一个临时文件，因此您逐行复制，如果该行需要更改，则更改该行。

完成整个文件后，将临时文件复制到原始文件。

示例代码：

```
$path = 'file';

$category = 21;
$articles = [111182297, 79292, 89359, 89382, 83486, 99100];

$prefix    = $category . ':';
$prefixLen = strlen($prefix);
$newLine   = $prefix . implode(',', $articles); 
```

这部分只是设置基础：类别、文章的 ID，然后构建相关的字符串。

现在打开文件以更改以下行：

```
$file = new SplFileObject($path, 'r+');
$file->setFlags(SplFileObject::DROP_NEW_LINE | SplFileObject::SKIP_EMPTY);
$file->flock(LOCK_EX); 
```

该文件被锁定，因此在文件被更改时没有其他进程可以编辑该文件。在该文件旁边，还需要临时文件：

```
$temp = new SplTempFileObject(4096); 
```

设置好这两个文件后，让我们遍历其中的每一行`$file`并比较是否需要替换：

```
foreach ($file as $line) {
    $isCategoryLine = substr($line, 0, $prefixLen) === $prefix;
    if ($isCategoryLine) {
        $line = $newLine;
    }
    $temp->fwrite($line."\n");
} 
```

现在`$temp`orary 文件已经包含了更改的行。请注意，我使用了 UNIX 类型的 EOF（行尾）字符 ( `\n`)，具体取决于您的具体文件类型，这可能会有所不同。

所以现在，需要将临时文件复制到原始文件中。让我们倒回文件，截断它，然后再次写入所有行：

```
$file->seek(0);
$file->ftruncate(0);
foreach ($temp as $line) {
    $file->fwrite($line);
} 
```

最后你需要解除锁定：

```
$file->flock(LOCK_UN); 
```

就是这样，在 中`$file`，该行已被替换。

立即举例：

```
$path = 'file';

$category = 21;
$articles = [111182297, 79292, 89359, 89382, 83486, 99100];

$prefix    = $category . ':';
$prefixLen = strlen($prefix);
$newLine   = $prefix . implode(',', $articles);

$file = new SplFileObject($path, 'r+');
$file->setFlags(SplFileObject::DROP_NEW_LINE | SplFileObject::SKIP_EMPTY);
$file->flock(LOCK_EX);

$temp = new SplTempFileObject(4096);

foreach ($file as $line) {
    $isCategoryLine = substr($line, 0, $prefixLen) === $prefix;
    if ($isCategoryLine) {
        $line = $newLine;
    }
    $temp->fwrite($line."\n");
}

$file->seek(0);
$file->ftruncate(0);
foreach ($temp as $line) {
    $file->fwrite($line);
}

$file->flock(LOCK_UN); 
```

应该适用于 PHP 5.2 及更高版本，我使用 PHP 5.4 数组语法， 如果您使用的是 PHP 5.2 / 5.3 ，您可以`[111182297, ...]` 替换为。`array(111182297, ...)`

# html - 三角形 div css 阴影

> ID：12555901
> 
> 赞同：6
> 
> 时间：2012-09-23T20:16:47.160
> 
> 标签：html, css, css-transforms

我正在使用 css 转换将三角形 div 折叠到另一个上。我想让三角形 div 在它下面的一个上投下阴影，这样折叠看起来很逼真。我尝试了不同的方法在 div 上应用盒子阴影，但它没有按照我想要的方式工作。

到目前为止，这是我的代码：http: [//jsfiddle.net/wgLcB/2/](http://jsfiddle.net/wgLcB/2/)

任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T23:41:24.077

你想达到[这样](http://jsfiddle.net/wgLcB/3/)的目标吗？

# php - phpMyAdmin 不显示表格

> ID：12555902
> 
> 赞同：2
> 
> 时间：2012-09-23T20:16:51.603
> 
> 标签：php, mysql, database, phpmyadmin

目前我的 phpMyAdmin 有一个相当奇怪的问题，它似乎允许我查看我的数据库，但我无法查看其中包含的表，除非我从命令控制台执行单独的选择命令。我似乎无法弄清楚发生了什么。这很烦人，因为我不想每次想要添加新列等时都必须执行更改命令。有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-31T15:47:45.797

有同样的问题。但只有在新创建的数据库中导入转储之后。show tables via mysql.exe 确实列出了这些表。原因是导入文件（或转储文件）包含视图定义，如下所示：

```
/*!50001 DROP TABLE IF EXISTS `view_myview`*/;
/*!50001 DROP VIEW IF EXISTS `view_myview`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = latin1 */;
/*!50001 SET character_set_results     = latin1 */;
/*!50001 SET collation_connection      = latin1_swedish_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `view_myview` AS select `p`.`id` AS blabla */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */; 
```

从文件中删除视图定义，再次执行导入，表格显示在 phpMyAdmin 中。当然缺乏意见，但当时我不需要它们。我认为真正的原因与 DEFINER 行有关：

```
 /*!50013 DEFINER=`root`@`%` SQL SECURITY DEFINER */ 
```

[此处描述的相同问题](https://stackoverflow.com/a/9905956)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-24T14:23:52.983

就我而言，这是浏览器（Firefox）的某种缓存问题。在私人窗口或其他浏览器中打开 phpMyAdmin 后，我可以再次看到所有表格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T20:21:24.270

你试过用谷歌搜索答案吗？一些可以提供解决方案的方法：

[https://dba.stackexchange.com/questions/4897/mysql-tables-do-not-show-up-in-the-phpmyadmin-and-mysqlworkbench](https://dba.stackexchange.com/questions/4897/mysql-tables-do-not-show-up-in-the-phpmyadmin-and-mysqlworkbench)

[http://otherleg.com/anotherblog/archives/1488](http://otherleg.com/anotherblog/archives/1488)

ETC ...

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-04-20T10:11:21.790

尝试按 CTRL + F5（Windows 用户）或 Command + F5（Mac 用户）强制浏览器清除缓存并重新加载。

# asp.net-mvc - 错误：创建新控制器时出现“不支持的上下文类型”

> ID：12555910
> 
> 赞同：3
> 
> 时间：2012-09-23T20:17:31.930
> 
> 标签：asp.net-mvc, asp.net-mvc-3, linq-to-sql, asp.net-mvc-scaffolding

我将使用 ASP.NET MVC3、Linq to Sql 类而不是 Entity Framework、MS SQL Server 2008 pro 而不是 express 来实现 MvcMusicStore。

我从[mvcmusicstore.codeplex.com获得了教程](http://mvcmusicstore.codeplex.com)

我使用 Linq to Sql 类，Datacontext 是 MvcMusicSrotedataContext。当我尝试使用它创建一个新类时

![图片](../Images/a4759b2efe909658360fffc5da5344b5.png)

当我单击添加按钮时，它在新窗口中显示错误错误：'**不支持的上下文类型**'

那么，你能帮我解决这个问题吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T05:19:09.983

内置的 MVC 脚手架不支持 Linq to SQL——您必须改用实体框架。（或者不使用脚手架，手动构建自己的控制器/动作逻辑。或者使用支持 Linq to SQL的[脚手架插件。）](http://blog.stevensanderson.com/2011/01/13/scaffold-your-aspnet-mvc-3-project-with-the-mvcscaffolding-package/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-27T04:45:13.523

*我遇到了与 EF 相同的问题。我正在使用 VS 2012。*

**背景：**

我的情况的原因是..这个自动生成过程（脚手架）似乎不承认部分类的概念。

我使用了模型优先的方法，并且我使用了实体的继承。例如：实体“B”和“C”继承自“A”</p>

所以在我生成的从“DbContext”继承的模型类“DataModelContainer”中，没有“DbSet”和“DbSet”的定义，即：以下两行不存在

```
public DbSet<B> B { get; set; }
public DbSet<C> C { get; set; } 
```

生成了“DataModelContainer”类我一个分部类，所以我完成了另一部分，使用分部类的概念。这对脚手架来说是个问题。

**解决方案**

我的解决方法是，刚刚删除了我手动添加的部分类。并将“DbSet”和“DbSet”的定义添加到自动生成的类中。这个解决方案的问题是，当我重新生成模型类时，我必须重复同样的事情。

# c - 为什么 calloc 需要两个参数而 malloc 只需要一个参数？

> ID：12555911
> 
> 赞同：21
> 
> 时间：2012-09-23T20:17:35.400
> 
> 标签：c, memory-management

一直写，很麻烦`calloc(1, sizeof(MyStruct))`。我不想使用包装此方法等的想法。我的意思是我想知道两个参数给了我什么？如果它给出了一些东西，为什么也没有`malloc`两个参数？

顺便说一句，我搜索了这个问题的答案，但我没有找到一个很好的答案。这些答案是`calloc`可以分配比`malloc`can 等更大的块。

我看到了另一个`calloc`分配数组的答案。有了`malloc`我可以乘法，我会得到一个数组，我可以在一开始就使用它`1,`。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-23T20:30:09.103

历史原因。

在`calloc`引入时，该`malloc`功能不存在，该`calloc`功能将为一个元素对象提供正确的对齐方式。

之后引入时`malloc`，决定返回的内存将正确对齐以供任何使用（这会花费更多内存），因此只需要一个参数。的 API`calloc`未更改，但`calloc`现在还返回正确对齐的内存以供任何使用。

**编辑：**

[请参阅评论中的讨论和来自@JimBalter](https://stackoverflow.com/users/544557/jim-balter)的有趣输入。

我关于引入`malloc`and的第一个陈述`calloc`可能是完全错误的。

此外，真正的原因也可能与对齐无关。C 的历史已经被编译器实现者改变了很多。`malloc`并且`calloc`可能来自不同的组/编译器实现者，这将解释 API 的差异。我实际上赞成这种解释作为真正的原因。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-23T21:58:38.243

我能想到的唯一原因是

```
int *foo = calloc(42, sizeof *foo); 
```

比短一个字符

```
int *foo = malloc(42 * sizeof *foo); 
```

真正的原因显然已经迷失了~~千年~~ ~~世纪~~几十年的 C 历史，需要编程语言考古学家来发掘，但可能与以下事实有关：

与`malloc()`- 它需要返回根据完整块大小对齐的内存块 -`calloc()`按预期使用时，内存块只需要根据作为第二个参数传递的大小进行对齐。但是，C 标准禁止在符合要求的实现中进行这种优化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T20:23:30.197

`calloc`在内存中分配元素数组的大小为元素数量（第一个参数）乘以分配指定数量的元素大小（第二个参数）。另外`calloc`将此数组初始化为 0。元素的大小可能大于一个字节，并且该函数会为您计算所需的内存大小。

`malloc`接受一个分配指定**字节**数的参数并给你一个指向它的指针。此外，`malloc`不会将此块初始化为任何内容。

这两个功能本质上为您提供了相同的功能。

以下是参考资料：

[malloc](http://www.cplusplus.com/reference/clibrary/cstdlib/malloc/) [calloc](http://www.cplusplus.com/reference/clibrary/cstdlib/calloc/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-23T20:29:46.457

这只是设计使然。

你可以写你自己的calloc

```
void *mycalloc(size_t num, size_t size)
{
    void *block = malloc(num * size);
    if(block != NULL)
        memset(block, 0, num * size);
    return block;
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-09-23T20:56:02.627

您不应该使用 calloc （或 malloc 或类似的东西）分配对象。即使 calloc 对其进行零初始化，就 C++ 而言，该对象仍未被构造。为此使用构造函数：

```
class MyClass
{
private:
    short m_a;
    int m_b;
    long m_c;
    float m_d;

public:
    MyClass() : m_a(0), m_b(0), m_c(0), m_d(0.0) {}
}; 
```

然后用`new`（或者如果可以的话在堆栈上）实例化它：

```
MyClass* mc = new MyClass(); 
```

# python - 使用回调传递数据

> ID：12555915
> 
> 赞同：2
> 
> 时间：2012-09-23T20:18:08.353
> 
> 标签：python, asynchronous, callback, glib, pygobject

我正在创建一个异步子进程`gobject.spawn_async`，它会在标准输出上生成我想在子退出时使用的数据。所以我创建了两个回调（最小的例子）：

```
output = ""
def child_read(source, cb_condition):
    for line in source: output += line + "\n"

def child_done(pid, condition, user_data):
    print(user_data)

cpid, cout = gobject.spawn_async(['/bin/ls'],
                      flags = gobject.SPAWN_DO_NOT_REAP_CHILD,
                      standard_output=True)
gobject.child_watch_add(pid=cpid, function=child_done, data=output)
gobject.io_add_watch(os.fdopen(cout, 'r'), gobject.IO_IN | gobject.IO_PRI, child_read) 
```

这里明显的缺陷是，`child_done`由于`output`重新分配在`child_read`. 现在的问题是，我如何以一种语法上很好且可读（即自我记录）的方式来做到这一点？当然，我可以直接读`output`入`child_done`，但是`child_watch_add`调用并没有记录回调中使用了哪些数据。加上回调不能用于其他任何事情。我真的在这里缺少 C/C++ 指针语义，因为这正是我想要的。

我也知道我可以创建一个模拟指针语义的 wapper 类，但这也有点膨胀语法。那么，有什么建议可以以一种漂亮且易读的方式来做这个“ *pythonic* ”，即**优雅地吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T00:39:28.553

我没有使用过 gobject，但是对于一个 Python 问题在 SO 上仍未得到解答，四个小时是很长的时间，所以我会试一试。

制作`output`字符串列表而不是字符串。像这样的东西，也许：

```
output = []

def child_read(source, cb_condition):
    output.extend(source)

def child_done(pid, condition, user_data):
    output_str = '\n'.join(user_data)
    print(output_str) 
```

其余代码不变（即仍然`data=output`在调用`child_watch_add()`.

# rdf - 关联个体的本体约束

> ID：12555919
> 
> 赞同：0
> 
> 时间：2012-09-23T20:18:44.890
> 
> 标签：rdf, ontology, owl

我试图在我的本体中指定一个约束：假设我有 A、B 和 C 类以及对象属性“A hasB B”和“B hasC C”。我想指定一个约束条件，即 A 的每个个体“a”都与 C 中的至少一个间接相关，即存在 b、c 即“a hasB b”和“b hasC c”。

是否可以在 OWL 中执行此操作？如果不是，您能否建议一些使这种验证成为可能的技术？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:09:03.073

您不能像您试图做的那样开箱即用地使用 OWL 作为约束语言。OWL 具有[OWA](http://en.wikipedia.org/wiki/Open_world_assumption)（开放世界假设），这使得表达约束非常棘手。有一些系统，例如 Pellet 的[Integrity Constraints](http://clarkparsia.com/pellet/icv)，它允许您通过关闭世界来使用 OWL 作为约束语言，稍微改变语义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T21:58:04.683

只需使用类等价：

```
A equivalentTo (hasB some B)
B equivalentTo (hasC some C)
```

这表明A中的所有a在B中存在b：a有B b，B中的所有b在C中存在c：b有C c。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T15:55:50.673

您可以执行以下操作（使用 Turtle 语法）：

```
:A  rdfs:subClassOf  [
    a  owl:Restriction;
    owl:onProperty  :hasB;
    owl:someValuesFrom  [
        a  owl:Restriction;
        owl:onProperty  :hasC;
        owl:someValuesFrom  :C
    ]
] . 
```

我对曼彻斯特语法不是很了解，但它一定是这样的：

```
A  subClassOf  (hasB  some  ( hasC  some  C )) 
```

同样，正如其他人指出的那样，个人的存在并不意味着在数据的任何地方都提到了这个人。

# for-loop - 如果在 for 循环中使用 ++variable 而不是 variable++ 有什么区别？

> ID：12555929
> 
> 赞同：0
> 
> 时间：2012-09-23T20:20:51.603
> 
> 标签：for-loop, post-increment, pre-increment

> **可能重复：**
> [C++ 中的 i++ 和 ++i 之间是否存在性能差异？](https://stackoverflow.com/questions/24901/is-there-a-performance-difference-between-i-and-i-in-c)
> [循环中 i++ 和 ++i 之间的区别？](https://stackoverflow.com/questions/484462/difference-between-i-and-i-in-a-loop)

我知道`a++`返回的原始值`a`然后加一`a`，同时`++a`加一并`a`返回`a`。但我看不出这在 for 循环中有什么不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T20:26:48.693

好吧，如果您在 for 循环中对零索引的数组进行操作并且您使用 x++ 那么要处理的第一个值将是 0 索引值但是如果您使用 ++x 那么首先要处理的值将是1个索引。

简单来说：

x++ 在处理当前语句后增加变量 x 的值。

++x 在处理当前语句之前增加变量 x 的值。

# javascript - viewModel 是函数还是对象变量？

> ID：12555931
> 
> 赞同：0
> 
> 时间：2012-09-23T20:21:00.000
> 
> 标签：javascript, mvvm, knockout.js

> **可能重复：**
> [声明为对象文字与函数的淘汰视图模型之间的差异](https://stackoverflow.com/questions/9589419/difference-between-knockout-view-models-declared-as-object-literals-vs-functions)

我在 Knowckout MVVM 框架中工作，我是新手。过去一个半月我一直在使用它，到目前为止它还不错。现在，我在网上和其他任何地方看到的所有示例都将 viewmodel 定义为类似于 Object 变量的东西，其声明如下：

```
var ViewModel = {}; 
```

这是完全可以理解的。但是

最近我看到了一些代码模型，其中它被声明为一个函数：

有点像

```
var ViewModel = function(){
self = this;

// some code in conventions with var member = {} instead of member:{}

} 
```

不仅如此，当实际使用视图模型时，他们还必须实例化视图模型。

我认为它是表示视图模型的全新方式，我看不出它比传统的视图模型声明方法更好。

有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T20:40:06.993

这个答案解释了使用对象文字和定义视图模型的函数之间的区别：[Difference between knockout View Models declared as object literals vs functions](https://stackoverflow.com/questions/9589419/difference-between-knockout-view-models-declared-as-object-literals-vs-functions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T20:48:04.213

更好，因为 ViewModel 的整个逻辑可以包含在（封装）这个构造函数中。逻辑可能非常复杂。它可以包括不再是全局的新函数和变量的定义。

我发现以下模式：

```
ko.applyBindings((function() {

    // Define local variables and functions that view model instance can access and use,
    // but are not visible outside this function.

    var firstName = ko.observable("John");
    var lastName = ko.observable("Doe");

    var getFullName = function() {
        return firstName() + " " + lastName();
    };

    // Return view model instance.
    return {
        fullName : ko.computed(getFullName)
    };

})()); 
```

更好，因为它没有引入任何新的全局变量（如构造函数）并且仍然具有强大的封装能力。

# windows - 移植 - 共享内存 x32 和 x64 进程

> ID：12555937
> 
> 赞同：1
> 
> 时间：2012-09-23T20:21:42.383
> 
> 标签：windows, winapi, porting

一个 32 位主机 Windows 应用程序设置共享内存（使用内存映射文件 / CreateFileMapping() API），然后其他 32 位客户端进程使用此共享内存相互通信。

我计划将主机应用程序移植到 64 位平台，一旦准备就绪，我打算 32 位和 64 位客户端进程都应该能够使用主 64 位主机应用程序设置的共享内存。

为主机 x32 应用程序编写的原始代码几乎在所有地方都使用“size_t”，因为当我们从 x32 移动到 x64 时，它从 4 字节到 8 字节不同，我正在寻找替换它。

我打算将“size_t”替换为“unsigned long long”，这样它的大小在 32 位和 64 位上将相同。

你能建议我更好的选择吗？另外，使用“unsigned long long”会对x32应用程序产生性能影响..我想是的？

* * *

研究完成 - 发现非常有用的文章 - a) 从 32 位移植到 64 位的 20 个问题 (www.viva64.com) b) 无法使用编译器标志或任何挂钩将 x64 平台上的“size_t”限制/更改为 4 个字节/crooks 因为它是 typedef

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T22:39:20.550

使用 64 位变量通常会降低 32 位应用程序的速度。

但是：由于通常不可能在所有进程中将共享内存定位在同一虚拟地址，因此您可能使用的是相对于共享内存块开头的地址；此外，由于您的应用程序将支持 32 位进程，因此共享内存块的大小可能会小于 4GB。那么为什么不使用 unsigned int 呢？

无论您选择什么类型，使用 typedef 给它一个有意义的名称（例如 shared_memory_address）是明智的，并始终使用该名称。这样，您可以稍后根据需要更改基础类型。

# jquery - jQuery 垂直手风琴菜单 onhover/onclick 组合

> ID：12555940
> 
> 赞同：-1
> 
> 时间：2012-09-23T20:22:02.077
> 
> 标签：jquery, menu, onclick, accordion, onhover

所有我正在集成一个 jQuery 垂直手风琴菜单，以便更具体的[THIS ONE HERE](http://www.designchemical.com/lab/jquery-vertical-accordion-menu-plugin/examples/)

如您所见，这个漂亮的缓动菜单设置为悬停或点击功能。我试图在这里实现使用两者的组合：具体来说，我希望第一个和第二个孩子使用 onclick 功能打开，第三个使用悬停功能打开。我尝试了不同的技术，到目前为止，它们似乎都不起作用，我很漂亮jQuery中的新功能..有什么想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T20:50:38.180

在第三个版本中，不是将其保留为主要手风琴的一部分，而是添加具有自己设置的第二个版本的手风琴

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T20:50:40.130

默认功能不支持此行为。欲了解更多信息，请查看这里[http://jqueryui.com/demos/accordion/](http://jqueryui.com/demos/accordion/)

# c++ - 如何在 C++ 中显示 2D RGB 矩阵的图像

> ID：12555941
> 
> 赞同：0
> 
> 时间：2012-09-23T20:22:13.753
> 
> 标签：c++, rgb, cimg

首先，我应该说我不熟悉 C++。我的目的就是这样。*Matlab imagesc*有一个功能。对于给定的二维矩阵输入，它具有 RGB 的双值，它显示一个 RGB 图像。我想在 C++ 中也一样，发现：[Imagesc 在 C 中等效？](https://stackoverflow.com/questions/6744744/imagesc-equivalent-in-c)它说我可以使用 CImg。

但是我在 CImg 做不到（我在文档和谷歌上找不到任何东西）

**我的问题：如何在 CImg 显示具有给定 2D 矩阵的 RGB 图像？**

**PS：**欢迎 CImg 的其他库。为了我的目的，我只需要一个简单而基本的解决方案。

**编辑 1：**我有一个 Win7 操作系统，我使用 Visual Studio 2010。

**编辑 2：**欢迎使用其他库的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:19:48.887

为什么不使用 CImg::display(); 方法 ？它只是在交互式查看器中显示您的图像，就像 Matlab 对 imagesc 所做的那样。

```
CImg<double> matrix(200,200);  // Assume this is your matrix data.
matrix.display("My Matrix"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T22:40:26.393

[构造 Cimg](http://cimg.sourceforge.net/reference/structcimg__library_1_1CImg.html#a24f3b43daa4444b94a973c2c3fff82c5)的方法之一是来自值的内存缓冲区，其中值类型是模板化的。

# c# - 在序列化列表中，派生类的序列化方式不同

> ID：12555945
> 
> 赞同：1
> 
> 时间：2012-09-23T20:22:55.680
> 
> 标签：c#, xml-serialization, xml-deserialization

我有基类和少数派生类向基类添加属性

直到现在，我总是序列化和反序列化的列表充满了派生类的混合对象，而我唯一要做的就是添加`[XmlInclude(typeof(child))]`和 C# 来处理其余的事情。

这次我想直接序列化/反序列化派生类的对象，而不是将其放入列表中。最有趣的部分是，当我在列表中序列化对象时，生成的 xml 与“直接”序列化不同。此外 - 我无法将直接序列化对象反序列化为其基类项的实例，而列表反序列化就好了（我在下面添加了一个示例）

这是示例类的代码：

```
 [XmlInclude(typeof(child))]
    public abstract class father 
    { ... }

    public class child : father
    {
        public double Sum { get; set; }
        public char Currency { get; set; }
    } 
```

以下是以下示例的初始化代码：

```
 father oD = new child() { Currency = '$', Sum = 1 };
 string xml_str = Tools.Serialize(oD); 
```

XML 输出为：

```
<child xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><Sum>1</Sum><Currency>36</Currency></child> 
```

当我将对象放入列表并序列化列表时，输出为

```
<ArrayOfFather xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><father xsi:type="child"><Sum>1</Sum><Currency>36</Currency></father></ArrayOfFather> 
```

如您所见，XML 有所不同：

```
<father xsi:type="child"><Sum>1</Sum><Currency>36</Currency></father> 
```

问题是，虽然以下两行有效（因为我提供子类作为反序列化目标）：

```
 child oD1 = Tools.DeSerializeGeneric<child>(xml_str);
 father oD2 = Tools.DeSerializeGeneric<child>(xml_str); 
```

我无法制作第三个（也是我需要的）来反序列化

```
 father oD4 = Tools.DeSerializeGeneric<father>(xml_str); 
```

投掷

```
System.InvalidOperationException: There is an error in XML document (1, 2). ---> System.InvalidOperationException: <child xmlns=''> was not expected.
   at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReaderfather.Read4_father()
   --- End of inner exception stack trace ---
   at System.Xml.Serialization.XmlSerializer.Deserialize(XmlReader xmlReader, String encodingStyle, XmlDeserializationEvents events)
   at System.Xml.Serialization.XmlSerializer.Deserialize(TextReader textReader)
   at Tools.DeSerializeGeneric[T](String source) in Dev-testing:\Tools.cs:line 1549
   at Program.Main(String[] args) in Dev-testing:\Program.cs:line 48 
```

代码中`Tools.DeSerializeGeneric`使用的是虚拟反序列化函数：

```
 public static T DeSerializeGeneric<T>(string source)
    {
        XmlSerializer x = new XmlSerializer(typeof(T));
        StringReader SsR = new StringReader(source);
        return (T) x.Deserialize(SsR);
    } 
```

有没有办法强制对象序列化为其基类（就像它在列表中发生的那样）？

# java - 带 2 个计数器的循环

> ID：12555946
> 
> 赞同：-2
> 
> 时间：2012-09-23T20:22:57.733
> 
> 标签：java

我拿了一个字符串，把它变成了一个数组，现在我需要调用数组的特定范围 Ex: symbolsArray [1-5] 并将范围增加 5.( [6-10] )

```
public static String getNumber(String symbols){

    String symbolsArray [] = symbols.split("");
    int a =2;
    int b = 6;
    for (int i=5; i < 31;i+=5){

        if (symbolsArray[a-b]== ... ){
            System.out.println(...);
        } else() {
            System.out.println(...);
        }
    }
} 
```

如何显示从位置 a 到位置 b 的数组值？那是我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T20:25:12.790

让我们来看看：

```
int a =2;
int b = 6;
//...
symbolsArray[a-b] 
```

数组的索引从 开始`0`，`a-b`显然`-4`在您的示例代码中......

除了：

1.  使用最有可能的方法比较字符串`==`不起作用：`symbolsArray[a-b]== ...`

2.  您绝对确定`symbolsArray`将始终拥有 35 个元素吗？

3.  在`symbols.split("")`做什么？那是什么样的分隔符？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T20:40:57.060

如果我正确理解了你正在尝试做的事情，我会采取不同的方法：

```
public static String getNumber(String symbols){

    for (int i=0; i < 31; i+=5) {
        if (symbols.substring(i, i+4).equals(...)){
            System.out.println(...);
        } else() {
            System.out.println(...);
        }
    }
} 
```

这将字符串作为长度为 5 的子字符串进行迭代，并将它们与某些东西进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T20:24:48.067

[ab] = -4，**真的是越界了**

对于来自 的值`a to b ie 2 to 6`，试试这个...

```
for(int i=2 ; i<5 ; i++){

System.out.println(symbolsArray[i]);

} 
```

`Array's SIZE`初始化**后不可更改**

**-**如果你想要一些东西`dynamic`，最好去`Collection`......`ArrayList`在你的情况下没问题......

# java - 删除mongodb中的一条记录

> ID：12555947
> 
> 赞同：0
> 
> 时间：2012-09-23T20:23:08.743
> 
> 标签：java, mongodb, mongodb-java, mongodb-query

我有一个这样的集合。

```
 System
      {
           System_id: 100,

         system_type:
        {
             [ 
              { 
            Tenant_Id: 1, 
            Tenant_Info: "check", 
            Prop_Info: ...
              }, 
              { 
             Tenant_Id: 2, 
             Tenant_Info: "sucess", 
              Prop_Info: ...
              } ]
              } 
```

我需要使用 java api 删除租户 ID 为 1 且 system_id 为 100 的唯一一个嵌入式文档。

我试图删除该文档。但是整个文档都被删除了。我只需要删除tenant_id 为1 的嵌入文档。

```
 DBCollection collection=db.getCollection("system");
    field.put("system_id",100);
    field.put("system_type.Tenant_id", 1);
    collection.remove(field); 
```

请指导我如何删除它？我需要这样的输出。

```
 System
      {
           System_id: 100,

         system_type:
        {
             [ 
             { 
             Tenant_Id: 2, 
             Tenant_Info: "sucess", 
              Prop_Info: ...
              } ]
              } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T00:46:55.277

由于您没有删除整个文档，因此您需要`update`使用[`$pull`](http://docs.mongodb.org/manual/reference/operator/pull/)操作员而不是`remove`：

```
BasicDBObject query = new BasicDBObject(
    "System_Id", 100
);

BasicDBObject pull = new BasicDBObject(
    "$pull", new BasicDBObject(
        "system_type", new BasicDBObject(
            "Tenant_Id", 1
        )
    )
);

collection.update(query, pull); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T20:37:16.853

尝试这样的事情：

```
 { $pull : { system_type : {Tenant_Id: 1} } } 
```

# arrays - 如何存储 getJSON 的结果？

> ID：12555950
> 
> 赞同：0
> 
> 时间：2012-09-23T20:24:31.537
> 
> 标签：arrays, store, getjson

我使用传递给函数的数组来存储 getJSON 结果中的数据，但是，它总是什么都不返回。无论如何将getJSON返回的数据存储到数组中？getHashImages(tagVals[0], 5, imagesToParse);

```
function getHashImages(tag, count, result) {
        // Clear all images
        $('ul.images').html('');

        var url = 'https://api.instagram.com/v1/tags/'+tag+'/media/recent?&client_id=5a7b13571ced47418dd539e6fc97a67f&count='+count+'&callback=?';
        document.writeln('In function the length of ' + result.length + '<br />');
        $.getJSON(url, function(data) {
            console.log(data.data.length);

            if(data.data.length === 0){
            //  $('ul.images').append('<li>No results</li>');
            } else {        
                $.each(data.data, function(index, value){
                    //console.log(value);
                    var imgUrl = value.images.low_resolution.url,
                        imgUser = value.user.username,
                        imgLink = value.link;
                        result.push(imgLink);
                        document.writeln('In function the length of ' + result.length + 'after JSON <br />');
                    //$('ul.images').append('<li><a href="'+imgLink+'" target="_blank"><img src="'+imgUrl+'"/></a></li>');
                });
            }

        });
        document.writeln('In function the length of ' + result.length + 'after JSON <br />');
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T20:38:55.610

看来您需要向 Instagram 的 API 指明回调函数的名称。

> var url = 'https://api.instagram.com/v1/tags/'+tag+'/media/recent?&client_id=5a7b13571ced47418dd539e6fc97a67f&count='+count+'&callback=myCallback';

然后实现一个函数 myCallback( obj )，它将检索 API 返回的对象。要查看对象的外观，您只需[在浏览器中](https://api.instagram.com/v1/tags/lol/media/recent?&client_id=5a7b13571ced47418dd539e6fc97a67f&count=5&callback=myCallback)打开它即可。

有关更多解释，请参阅[JSONP的 Wikipedia 页面。](https://en.wikipedia.org/wiki/JSONP)

# unix - 动态更改正在唤醒的内容

> ID：12555956
> 
> 赞同：1
> 
> 时间：2012-09-23T20:24:54.753
> 
> 标签：unix, dynamic, awk, grep

我在下面有这个输入：

```
 IDNO     H1  H2  H3    HT   Q1 Q2 Q3 Q4 Q5    M1  M2  EXAM

 OUT OF  100 100 150   350   30 30 30 30 30   100 150   400

 1434    22  95 135   252   15 20 12 18 14    45 121   245

 1546     99 102 140   341   15 17 14 15 23    91 150   325

 2352     93  93 145   331   14 17 23 14 10    81 101   260

(et cetera)

          H1  H2  H3    HT   Q1 Q2 Q3 Q4 Q5    M1  M2  EXAM
 OUT OF  100 100 150   350   30 30 30 30 30   100 150   400 
```

我需要使用编写一个 unix 脚本来使用 awk 函数来动态查找输入的任何列并将其显示到屏幕上。我已经成功地唤醒了特定的列，但我似乎无法弄清楚如何根据不同的列进行更改。我的导师将简单地为测试数据选择一列，而我的程序需要找到该列。

我正在尝试的是：

```
#!/bin/sh

awk {'print $(I dont know what goes here)'} testdata.txt 
```

编辑：对不起，我应该更具体，他输入标题名称作为输入。例如`"H3"`。然后它需要 awk 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T22:37:06.467

我想你只是在寻找：

```
#!/bin/sh
awk 'NR==1{ for( i = 1; i <= NF; i++ ) if( $i == header ) col=i }
  { print $col }' header=${1?No header entered} testdata.txt 
```

这不会尝试处理未出现在输入中的列标题。（留给读者作为练习。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T20:51:53.590

您的行格式有很多变化（在字段数方面）。也就是说，像这样的东西呢：

```
echo "Which column name?"
read column
case $column in
  (H1) N=2;;
  (H2) N=3;;
  (H3) N=4;;
  ...
  (*) echo "Please try again"; exit 1;;
esac
awk -v N=$N '{print $N}' testdata.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T20:52:17.100

好吧，您的问题非常分散，原则上您希望其他人编写您的 awk 脚本......您应该检查 awk 的手册页，它们的描述性很强。

我的 2 美分麦汁，例如（对于该行）：myscript.sh：

```
#/bin/sh
cat $1 | awk -v a=$2 -v b=$3 '{if ($(a)==b){print $0}}'; 
```

如果你只想要一个专栏，那么，

```
#/bin/sh
cat $1 | awk -v a=$2 '{print $(a)}'; 
```

您的输入将是：

> myscript.sh file_of_data col_num

再次重申：请研究 awk 的手册页。也请在提问时提供您尝试过的内容（代码）和错误（日志）。这将使人们更愿意帮助你。

# python - 从 python3 在 Firefox 中启动多个 url

> ID：12555957
> 
> 赞同：0
> 
> 时间：2012-09-23T20:25:02.620
> 
> 标签：python, firefox, browser, python-3.x

我正在尝试通过 python 从 Firefox 中的文本文件中获取多个 url。我正在使用 win7 OS 和 python 3。我需要一些方向来将参数传递给 Firefox。

```
import os
import subprocess

f = open ('C:\\Users\\test\\Desktop\\urls.txt','r')
data = f.read()
print(data)
# i need some help here to pass this argument to Firefox.
f.close() 
```

网址.txt

```
http://www.abc.com
http://www.xyz.com/test
http://www.abc.net/test.html
http://www.test.com
http://www.msn.com 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T20:28:51.133

使用[**`webbrowser`模块**](http://docs.python.org/dev/library/webbrowser.html)。

```
import webbrowser
firefox = webbrowser.get('firefox')
for url in data.split('\n'):
    firefox.open_new_tab(url) 
```

如果您不想强制使用特定浏览器而只启动默认浏览器，请使用`webbrowser.open_new_tab`.

该`webbrowser`模块不是很可靠，尤其是在 Windows 上，因此您可能必须使用该`subprocess`模块手动启动该过程：

```
import subprocess
firefox_path = 'C:/Program Files/Firefox/firefox' # change this line accordingly
for url in data.split('\n'):
    subprocess.Popen([firefox_path, url]) 
```

此外，Firefox 支持在命令行中使用多个 URL，因此以下解决方案更适合它：

```
import subprocess
urls = open('C:/Users/test/Desktop/urls.txt').read().split('\n')
subprocess.Popen(['C:/Program Files/Firefox/firefox']+urls) 
```

# php - codeigniter 在哪里放置电子邮件功能

> ID：12555960
> 
> 赞同：1
> 
> 时间：2012-09-23T20:25:13.697
> 
> 标签：php, oop, codeigniter

假设我有一堆“电子邮件”功能——比如用户注册确认或密码恢复电子邮件，或通知更新电子邮件。我可以在哪里“放置”这些功能？我最初的想法是简单地将它们保存在控制器中，但我宁愿有一个共同的地方。然后我的想法是创建一个专门用于电子邮件的新控制器，但这打破了 MVC 模式，我的最后一个想法是扩展 email_helper.php 助手，但如果我这样做，我不能做类似的事情

`$this->email->to($email);`

因为我收到一条错误消息

`Fatal error: Using $this when not in object context in /Applications/XAMPP/xamppfiles/htdocs/elluminate/system/helpers/email_helper.php on line 71`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T20:27:50.523

您正在尝试`$this`在静态方法或简单函数中使用。`$this`仅当您有对象时，该变量才可用。

* * *

在 MVC 和受 MVC 启发的设计模式的上下文中，邮件系统本身将被视为一种[服务](https://en.wikipedia.org/wiki/Service_%28systems_architecture%29)。服务是模型层的“上层”部分，由控制器和视图用于与模型层交互。它们有助于将域业务逻辑与表示层（控制器、视图、模板）隔离开来。

服务可以独立于其他模型结构（例如邮件系统），也可以管理[域对象](http://c2.com/cgi/wiki?DomainObject)和不同存储抽象（[数据映射器](http://martinfowler.com/eaaCatalog/dataMapper.html)、[存储库](http://martinfowler.com/eaaCatalog/repository.html)、[工作单元](http://martinfowler.com/eaaCatalog/unitOfWork.html)和/或[数据访问对象](http://www.oracle.com/technetwork/java/dataaccessobject-138824.html)）之间的交互。

# ruby - 算法代码中的Ruby大写字母变量困境

> ID：12555965
> 
> 赞同：0
> 
> 时间：2012-09-23T20:25:30.023
> 
> 标签：ruby, naming-conventions

最近开始使用 Ruby 进行编程，我注意到一个小语言特性真的让我很难受——以大写字母开头的变量自动成为常量。

虽然我知道这是设计使然，并且在大多数情况下确实有帮助，但一旦开始编写算法，它就会成为一个问题。我的意思是需要在变量之间进行有效且简单的区分的代码——比如，`n`和`N`.

这是一个非常简单的示例（我知道它不是完全有效/rubyesque 代码，但我希望它说明了我的观点）：

```
def average(array)
  N = 0
  array.each { |n| N += n }
  N/array.length.to_f
end 
```

另一个例子是下标——比如说，在物理问题中进行计算时，拥有`F_friction`并且`F_weight`会很有帮助，但在 Ruby 中是不可能的。

所以，问题是：是否有一种可接受的方式来处理这些变量名？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T20:45:54.753

通常解决方案只是选择更有意义的名称。例如

```
def average(values)
  total = 0
  values.each { |value| total += value }
  total/values.length.to_f
end 
```

为什么`F_weight`有用。F代表力？

好的`force_weight`，呃，没有：`force_mass`。毕竟重量是一种力量。

现在，如果您在自然数集中谈论 N，如果 N 不是局部变量，我可以看到一些观点。

# python - Python 集合模块中的 defaultdict 真的比使用 setdefault 快吗？

> ID：12555967
> 
> 赞同：18
> 
> 时间：2012-09-23T20:25:48.297
> 
> 标签：python, collections, defaultdict, setdefault, python-collections

我已经看到其他 Python 程序员将集合模块中的 defaultdict 用于以下用例：

```
from collections import defaultdict

s = [('yellow', 1), ('blue', 2), ('yellow', 3), ('blue', 4), ('red', 1)]

def main():
    d = defaultdict(list)
    for k, v in s:
        d[k].append(v) 
```

我通常通过使用 setdefault 来解决这个问题：

```
def main():
    d = {}
    for k, v in s:
        d.setdefault(k, []).append(v) 
```

事实上，文档确实[声称使用 defaultdict 更快](http://docs.python.org/library/collections.html#collections.defaultdict)，但我在测试自己时看到了相反的情况：

```
$ python -mtimeit -s "from withsetdefault import main; s = [('yellow', 1), ('blue', 2), ('yellow', 3), ('blue', 4), ('red', 1)];" "main()"
100000 loops, best of 3: 4.51 usec per loop
$ python -mtimeit -s "from withdefaultdict import main; s = [('yellow', 1), ('blue', 2), ('yellow', 3), ('blue', 4), ('red', 1)];" "main()"
100000 loops, best of 3: 5.38 usec per loop 
```

我设置测试的方式有问题吗？

作为参考，我使用的是 Python 2.7.3 [GCC 4.2.1 (Apple Inc. build 5666)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-23T20:38:09.827

是的，有一些“错误”：

您已将创建的`(default)dict`放入语句而不是设置中。构建一个新`defaultdict`的比普通的更昂贵`dict`，通常这不是你应该在程序中分析的瓶颈——毕竟，你构建了一次数据结构，但你会多次使用它们。

如果您进行如下测试，您会发现`defaultdict`操作确实更快：

```
>>> import timeit
>>> setup1 = """from collections import defaultdict
... s = [('yellow', 1), ('blue', 2), ('yellow', 3), ('blue', 4), ('red', 1)]
... d = defaultdict(list)"""
>>> stmt1 = """for k, v in s:
...     d[k].append(v)"""
>>> setup2 = """s = [('yellow', 1), ('blue', 2), ('yellow', 3), ('blue', 4), ('red', 1)]
... d = {}"""
>>> stmt2 = """for k, v in s:
...     d.setdefault(k, []).append(v)"""
>>> timeit.timeit(setup=setup1, stmt=stmt1)
1.0283400125194078
>>> timeit.timeit(setup=setup2, stmt=stmt2)
1.7767367580925395 
```

Win7 x64 上的 Python 2.7.3。

# php - 不确定多个项目的数据库逻辑

> ID：12555975
> 
> 赞同：0
> 
> 时间：2012-09-23T20:27:07.800
> 
> 标签：php, mysql, database, logic

我试图解决与数据库逻辑有关的问题。

我有一个系统，允许用户为给定的事件创建一个事件、表演和多种不同的门票类型。然后这些将被添加到数据库中，其中包含与给定活动的门票类型相关的价格（门票类型可以重复用于其他活动，并且每个活动没有固定数量的类型），然后客户将进入网站，选择其中一项活动、表演，然后将列出供他们从不同的门票类型和价格中进行选择。

在这一点上，我有一个事件表，它使用一个系列来存储票号，这些票号存储在一个单独的表中，另一个表存储价格。该系列的使用是荒谬的，因为它往往会让我感到厌烦并且要么无法工作（因为 mysql 不能正确处理代码），要么它对信息可以做什么有难以置信的限制有没有人更好地知道如何我可能会达到这个结果？

事件示例：

事件名称：“事件 1”

性能：'23/03/13 (12:30)'

门票类型：成人（20 欧元）、学生（15 欧元）、特价（10 欧元）等

设置活动的人可以创建他们想要的任何门票类型或使用系统中现有的门票类型，并且只需为该特定活动设置价格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T20:32:02.750

如果我对您的理解正确，我相信您正在做的事情很可能是最好的方法。

一个用户可以创建多个事件，每个事件可以有多种票。门票不特定于某个活动（可用于多个活动），因此价格不能与门票信息一起存储。

因此，您要做的是拥有这些表：

*events* - 存储事件 *门票*信息 - 存储门票信息 *events_tickets* -*事件*和*门票*的连接表（因为它是多对多关系）

events_tickets 表将具有如下列： *primary id*、event_id（外键）、ticket_id（外键）、价格

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T21:12:31.797

表事件：Id_Event、Ds_Event、Dt_Event、Id_Venue

表 Ticket_Type：Id_Ticket_Type、Ds_Ticket_Type、Ic_Ticket_Type_Is_Custom（布尔值）

表 Event_Ticket_Type_Price：Id_Event、Id_Ticket_Type、Nr_Ticket_Price

餐桌地点：Id_Venue、Ds_Venue、Ds_Venue_Address

# extjs - 卡片布局内的 Ext-JS 4 边框布局

> ID：12555979
> 
> 赞同：0
> 
> 时间：2012-09-23T20:27:42.723
> 
> 标签：extjs, extjs4

我正在使用 Ext-JS 4 创建一个应用程序。

牌：

1.) 登录卡

2.) 申请卡

申请卡片有**边框**布局。

当我单独展示它们时，它们可以工作，但是当我将它们放在一个视口中时，它们就不起作用了。

这是我的**视口**：

```
Ext.define('MyApp.view.Viewport', {
    extend: 'Ext.container.Viewport',
    layout: 'card',

    items: [
        {
            xtype: 'loginform',
        },
        {
            xtype: 'mainapp'
        }
    ]
}); 
```

这是我的**登录卡**的一部分：

```
Ext.define('Sabrina.view.login.Form' ,{
    extend: 'Ext.form.FormPanel',
    alias : 'widget.loginform',

    name: 'loginform',
    frame: true,
    title: 'Login',
    bodyPadding: '5px 5px 0',
    width: 350,
    ... 
```

这是我的**申请卡**的一部分：

```
Ext.define('Sabrina.view.Main', {
    extend: 'Ext.panel.Panel',
    alias: ['widget.mainapp'],
    layout: 'border',
        items: [
          //here I have 'west' and 'center' regions
        ] 
```

我在不同的应用程序中**分别**创建了相同的组件，它们可以工作，但在这里不行。如果我想在**卡片布局中添加****边框**布局，是否需要添加更多内容？

 **我得到这个：

```
Uncaught TypeError: Cannot call method 'substring' of undefined 
```

谢谢你。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T05:03:55.867

viewport 只能处理一个元素，而 cardlayout 可以管理许多元素，而只有一个元素处于活动状态。使视口的唯一元素成为具有卡片布局的容器，并为视口提供一个 fitlayout，这应该可以工作。

您的错误听起来更像是未知的 xtypes。无论如何，尝试描述的布局，也许错误消失了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T14:37:11.787

为什么不将登录窗口显示为模式？在我看来，使用卡片布局仅用于登录，然后实际应用程序是矫枉过正的。**

# html - 使用 CSS3 将 JPG 图像淡化为透明

> ID：12555986
> 
> 赞同：2
> 
> 时间：2012-09-23T20:28:31.713
> 
> 标签：html, css

我有一个`.JPG`没有透明度的实心图像 a （看到`.JPG`'s 不能有 alpha 层）。但是，由于客户端无法创建将图像边缘淡化为透明的图像，因此他们希望输入一个实体`.JPG`并通过代码使其淡化。应该注意的是，我现在已经将此图像设置为`background`正确的，它不是`src`标签的`<img>`。这在 CSS3 中是否可行，如果可以，如何实现？

**示例图片：**

![纯 JPG](../Images/16a11c39624eca334086abd5821bd67c.png)

**期望的结果：**

![褪色 PNG](../Images/d9e952a0d1691038600ff968348397e0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T20:45:19.397

您可以通过 CSS 遮罩获得真正的透明度：

[http://www.webkit.org/blog/181/css-masks/](http://www.webkit.org/blog/181/css-masks/)

但是，对它的支持仍然非常有限。但是，在 Webkit 浏览器中，您可以使用以下内容：

```
.masked {
  -webkit-mask-image: -webkit-gradient(linear, left top, right top, from(rgba(0,0,0,1)), to(rgba(0,0,0,0)));
}

<div class="masked">Your content here</div> 
```

这将适用于任何 div 中的所有内容（包括背景），但这在大多数浏览器中不起作用。

您可以使用类似于[Nivo Slider](http://nivo.dev7studios.com/)的切片和动画方法，但对于最终可能不会成为有用效果的东西来说，这是一项非常艰巨的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T20:46:34.027

我相信你可以用*CSS3* [`mask-image`](http://www.webkit.org/blog/181/css-masks/)属性和 CSS3`linear-gradient`背景做一些事情：

```
-webkit-mask-image: -webkit-linear-gradient(left, rgba(0,0,0,1), rgba(0,0,0,0)) 
```

[这](http://jsfiddle.net/ErickPetru/RGL3b/)是我为您创建的示例。由于它是一种新的*CSS3*兼容浏览器，目前是 Chrome 和 Safari（*Webkit 浏览器*）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T20:40:20.693

```
img,.over{
width:100px;
height:100px;
background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
background: -moz-linear-gradient(left, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, right top, color-stop(0%,rgba(255,255,255,0)), color-stop(100%,rgba(255,255,255,1))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(left, rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(left, rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(left, rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%); /* IE10+ */
background: linear-gradient(to right, rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00ffffff', endColorstr='#ffffff',GradientType=1 ); /* IE6-8 */
position:absolute;
}​

<div  >
<img src="http://ts1.mm.bing.net/th?id=I.4763892546143716&pid=1.1" alt="test"/>
<div class="over"></div>
</div> 
```

[演示](http://jsfiddle.net/afshinprofe/fSJAu/)

# android - Android 的默认样式（尤其是 ButtonBar 和 ButtonBar.Button）是如何呈现的？

> ID：12555990
> 
> 赞同：4
> 
> 时间：2012-09-23T20:28:57.233
> 
> 标签：android, android-button, android-theme, android-styles

在 ICS+ 按钮栏的大多数示例中，即 Google 工程师的这个：[https ://gist.github.com/2357306](https://gist.github.com/2357306)

我看到对这些样式的引用：

```
style="?android:attr/buttonBarStyle"
style="?android:attr/buttonBarButtonStyle" 
```

于是我打开了Android的attrs.xml，我看到的是这样的：

```
 <!-- Style for buttons within button bars -->
    <attr name="buttonBarButtonStyle" format="reference" />

    <!-- Style for button bars -->
    <attr name="buttonBarStyle" format="reference" /> 
```

而已。所以也许这是一种风格，对吧？这是styles.xml：

```
 <style name="Widget.Holo.ButtonBar">
        <item name="android:divider">?android:attr/dividerVertical</item>
    </style>

    <style name="Widget.Holo.ButtonBar.Button">
    </style> 
```

嗯？然而 Eclipse 和设备能够像这样渲染它们：

![ICS 上的按钮栏](../Images/23b48385cb6374b63d04ec7abc3a8159.png)

那么它是如何获得正确的尺寸和材料的呢？我需要它们的原因是我想在 Gingerbread 及下面使用这种样式的按钮栏，它缺少该`buttonBarStyle`属性。因此，它们呈现错误：

![GB上的按钮栏](../Images/0ac2f3d1141cb1188c483adaf856cbab.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T18:49:32.943

这是因为样式继承。Widget.Holo.ButtonBar 也继承了“Widget.Holo”和“Widget”的所有样式。

# mysql - 服务器重启后Mysql运行存储过程

> ID：12555993
> 
> 赞同：4
> 
> 时间：2012-09-23T20:29:35.533
> 
> 标签：mysql, stored-procedures

如何在服务器启动时运行存储过程？这可能吗？我只想运行一个 SQL 查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T22:55:57.433

您可以使用配置文件中的 init-file 变量来运行其中包含 SQL 语句的文本文件。

# javascript - jQuery div元素中的每个字母，悬停时数组中的随机颜色

> ID：12555995
> 
> 赞同：5
> 
> 时间：2012-09-23T20:29:50.167
> 
> 标签：javascript, jquery, each

我试图让 div 元素中的每个字母从颜色数组中更改为随机颜色。然后在鼠标移出 div 时重置。

这是我到目前为止所得到的。我想我已经很接近了，除了它实际上不起作用。这是由本网站上的几个不同片段构建的。

```
$(document).ready(function() {

    // COLOURS ARRAY
    var colours = Array("#ddd", "#333", "#999", "#bbb"), idx;

    $("DIV#header").hover(function(){

        $( $(this).text().split('')).each(function(index, character) {
            idx = Math.floor(Math.random() * colours.length);
            $(this).css("color", colours[idx]);
        });

    }, function() {
        $(this).css("color","#ddd");
    });

});
```

它不会产生任何 JS 错误。悬停的第二个功能似乎有效，但不是第一个。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-23T20:33:30.220

您只能为元素添加样式，将每个字符包装在 a 中`<span>`并设置 span 样式。

```
#header {color: #ddd}​ 
```

```
<div id="header">Some text here</div>​ 
```

```
$(document).ready(function() {

    // COLOURS ARRAY
    var colours = Array("#ddd", "#333", "#999", "#bbb"), idx;

    $("#header").hover(function(){
        var header = $(this); 
        var characters = header.text().split('');
        header.empty();  
        var content = '';
        for(var i = 0; i < characters.length; i++) {
            idx = Math.floor(Math.random() * colours.length);
            content += '<span style="color:'+colours[idx]+'">' + characters[i] + '</span>'; 
        }
        header.append(content);
    }, function() {
        $(this).find('span').contents().unwrap();
    });

}); 
```

[http://jsfiddle.net/vVNRF/](http://jsfiddle.net/vVNRF/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-23T20:39:00.777

嗯，这正是 Musa 所说的，您不能将样式应用于文本节点，您需要`<span>`在每个字符周围添加一个元素。这是一些动态添加跨度的示例代码：

```
$(document).ready(function() {

    // COLOURS ARRAY
    var colours = ["#ddd", "#333", "#999", "#bbb"], 
        idx;

    $("DIV#header").hover(function(){
        var div = $(this); 
        var chars = div.text().split('');
        div.html('');     
        for(var i=0; i<chars.length; i++) {
            idx = Math.floor(Math.random() * colours.length);
            var span = $('<span>' + chars[i] + '</span>').css("color", colours[idx])
            div.append(span);
        }

    }, function() {
        $(this).find('span').css("color","#ddd");
    });

});​ 
```

[http://jsfiddle.net/Mv4pw/](http://jsfiddle.net/Mv4pw/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-23T20:48:39.817

正如其他人指出的那样，您只能对元素进行样式设置，因此您需要将每个字母包装在它自己的元素中。这是执行此操作的示例方法。它也以递归方式工作，因此这将适用于包含其他元素的文本，如`<b>`、`<a>`等。下面的其他示例假设该 div 将只有文本，没有其他 HTML 标记。

```
var colours = Array("#ddd", "#333", "#999", "#bbb");

$('#header').hover(function(){
    wrapLetters(this);
    $('.random-color', this).css('color', function(){
        var idx = Math.floor(Math.random() * colours.length);
        return colours[idx];
    });
}, function(){
    $('.random-color', this).css('color', '#ddd');
});

// Wrap every letter in a <span> with .random-color class.
function wrapLetters(el){
    if ($(el).hasClass('random-color')) return;

    // Go through children, need to make it an array because we modify
    // childNodes inside the loop and things get confused by that.
    $.each($.makeArray(el.childNodes), function(i, node){
        // Recursively wrap things that aren't text.
        if (node.nodeType !== Node.TEXT_NODE) return wrapLetters(node);

        // Create new spans for every letter.
        $.each(node.data, function(j, letter){
            var span = $('<span class="random-color">').text(letter);
            node.parentElement.insertBefore(span[0], node);
        });

        // Remove old non-wrapped text.
        node.parentElement.removeChild(node);
    });
} 
```

小提琴：http: [//jsfiddle.net/aWE9U/2/](http://jsfiddle.net/aWE9U/2/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-23T20:37:31.180

字符串不是元素，您不能向其添加 CSS 属性。您可以将字母放在 span 元素中，然后设置它们的样式，试试这个：

```
$(document).ready(function() {

    // COLOURS ARRAY
    var colours = Array("#ddd", "#333", "#999", "#bbb"), idx;

    $('DIV#header').hover(function(){

        $('span', this).each(function(index, character) {
            idx = Math.floor(Math.random() * colours.length);
            $(this).css("color", colours[idx]);
        });

    }, function() {
        $('span',this).css("color","#ddd");
    });

}); 
```

[http://jsfiddle.net/BC5jt/](http://jsfiddle.net/BC5jt/)

# objective-c - 如何在不阻塞 UI 的情况下渲染图像？

> ID：12555997
> 
> 赞同：2
> 
> 时间：2012-09-23T20:30:17.137
> 
> 标签：objective-c, ios

我有这个图像渲染功能，当我渲染它时，它会导致主/UI线程阻塞/卡顿。

有哪些方法可以不阻塞线程并在 iOS 中的不同线程上渲染？有本地 API 可以帮助您吗？

更新了代码：

```
+ (UIImage *)imageWithImage:(UIImage *)image scaledToSize:(CGSize)newSize {
    //UIGraphicsBeginImageContext(newSize);
    UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);
    [image drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return newImage;
}

function
{
    UIImage *shrinkedImage = [ThisClass imageWithImage:screenShotImage scaledToSize:shrinkImageToSize];

    UIImage * rotatedImage = [[UIImage alloc] initWithCGImage: shrinkedImage.CGImage
                                                        scale: 1.0
                                                  orientation: UIImageOrientationRight];

} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T21:40:17.043

您可以考虑以下几点：

1.  使用. `time profiler`_`instruments tool`
2.  使用 of`UIImageView`而不是`UIImage`应用一些变换，例如旋转和变换。您需要将这些转换应用到 UIImageView 的 CALayer。
3.  使用 .将图像的加载放在后台线程中`GCD`。这是一个例子：

> ```
> dispatch_queue_t preloadQueue = dispatch_queue_create("preload queue", nil);
> dispatch_async(preloadQueue, ^{
>                                 UIImage *yourImage = [UIImage imageNamed:yourImageReferencePath];
>                                  dispatch_async(dispatch_get_main_queue(), ^{   
>                                                                           yourUIView.image = yourImage});
>                                                                           });
> dispatch_release(preloadQueue); 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T21:38:40.823

您是否尝试使用 GCD 在后台执行任务？

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
dispatch_async(queue, ^{
    // Do your computations in the global queue (background thread)
    UIImage *shrinkedImage = [ThisClass imageWithImage:screenShotImage scaledToSize:shrinkImageToSize];
    UIImage * rotatedImage = [[UIImage alloc] initWithCGImage: shrinkedImage.CGImage
                                                        scale: 1.0
                                                  orientation: UIImageOrientationRight];
    // Once done, always do all your display operations to update the UI on the main thread
    dispatch_sync(dispatch_get_main_queue(), ^{
        yourImageView.image = rotatedImage;
    });
}); 
```

有关更多信息，请阅读 Apple 的[并发编程指南](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008091-CH1-SW1)。