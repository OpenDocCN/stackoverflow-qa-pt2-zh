# StackOverflow 问答 14503000-14503999

# java - 如何抑制字段或局部变量的 FindBugs 警告？

> ID：14503001
> 
> 赞同：29
> 
> 时间：2013-01-24T13:54:32.533
> 
> 标签：java, findbugs, suppress-warnings

我想禁止针对特定字段或局部变量的 FindBugs 警告。FindBugs 文档中的`Target`, `Type`, `Field`, `Method`, `Parameter`,`Constructor`为其`Package`注解`edu.umd.cs.findbugs.annotations.SuppressWarning`[1]。但是注释字段对我不起作用，只有当我注释方法时，警告才会被抑制。

注释整个方法对我来说似乎很广泛。有没有办法抑制特定字段的警告？还有另一个相关的问题[2]，但没有答案。

[1] [http://findbugs.sourceforge.net/manual/annotations.html](http://findbugs.sourceforge.net/manual/annotations.html)

[2][抑制 Eclipse 中的 FindBugs 警告](https://stackoverflow.com/questions/3976328/suppress-findbugs-warnings-in-eclipse)

演示代码：

```
public class SyncOnBoxed
{
    static int counter = 0;
    // The following SuppressWarnings does NOT prevent the FindBugs warning
    @edu.umd.cs.findbugs.annotations.SuppressWarnings(value="DL_SYNCHRONIZATION_ON_BOXED_PRIMITIVE")
    final static Long expiringLock = new Long(System.currentTimeMillis() + 10);

    public static void main(String[] args) {
        while (increment(expiringLock)) {
            System.out.println(counter);
        }
    }

    // The following SuppressWarnings prevents the FindBugs warning
    @edu.umd.cs.findbugs.annotations.SuppressWarnings(value="DL_SYNCHRONIZATION_ON_BOXED_PRIMITIVE")
    protected static boolean increment(Long expiringLock)
    {
        synchronized (expiringLock) { // <<< FindBugs warning is here: Synchronization on Long in SyncOnBoxed.increment()
            counter++;
        }
        return expiringLock > System.currentTimeMillis(); // return false when lock is expired
    }
} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-24T20:01:14.467

`@SuppressFBWarnings`on a field 仅抑制为该字段声明报告的 findbugs 警告，而不是与该字段关联的每个警告。

例如，这会抑制“字段只设置为空”警告：

```
@SuppressFBWarnings("UWF_NULL_FIELD")
String s = null; 
```

我认为您能做的最好的事情就是将带有警告的代码隔离成最小的方法，然后抑制整个方法的警告。

注意：`@SuppressWarnings`被标记为[弃用](http://findbugs.sourceforge.net/api/edu/umd/cs/findbugs/annotations/SuppressWarnings.html)，以支持`@SuppressFBWarnings`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-29T14:01:47.367

检查[http://findbugs.sourceforge.net/manual/filter.html#d0e2318](http://findbugs.sourceforge.net/manual/filter.html#d0e2318) 有一个可以与 Method 标签一起使用的 Local 标签。您可以在此处指定应为特定局部变量排除哪个错误。例子：

```
<FindBugsFilter>
  <Match>
        <Class name="<fully-qualified-class-name>" />
        <Method name="<method-name>" />
        <Local name="<local-variable-name-in-above-method>" />
        <Bug pattern="DLS_DEAD_LOCAL_STORE" />
  </Match>
</FindBugsFilter> 
```

# java - 具有 Nimbus 外观的自定义组件和 Painter

> ID：14503002
> 
> 赞同：1
> 
> 时间：2013-01-24T13:54:33.243
> 
> 标签：java, swing, custom-component, look-and-feel, nimbus

我正在创建一种继承自的外观，`NimbusLookAndFeel`并让我知道如何注册自己的组件以使用他们的自定义 Painter。

例如，曾经画过一个`JButton`像这样的类。`ButtonPainter`还想知道如何注册不同的状态（例如`BACKGROUND_ENABLED`，`BACKGROUND_FOCUSED`...）

你能指导我如何做到这一点吗？实际上我想做的是一个自定义的选项卡式窗格，并且使用他们自己的 Painter。

编辑：嗯，我想我没有解释清楚。

例如，我想制作一个自定义组件，`MyCustomTabbedPane`并且这个样式来自从 Nimbus 继承的外观。我可以注册自己的 UI 类，例如`MyCustomTabbedPaneUI`制作`uiDefault.put("MyCustomTabbedPaneUI", new MyCustomTabbedPaneUI())`吗？

我怎样才能让我自己的 UI 类有什么逻辑应该有这个类？

还有一个问题，我如何分配这个类 Painter，例如`MyCustomTabbedPanePainter`定义我自己的组件状态，就像 Nimbus 一样，例如`BACKGROUND_ENABLED`.

谢谢并恭祝安康！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:09:43.197

1.  首选方式，有一些[基于 Nimbus 的外观和感觉](https://stackoverflow.com/a/3954646/714968)

2.  另一种选择，有一些自定义解决方法 custom `Nimbus Look and Feel`，其中最复杂的是[@aephyr 的 NimbusThemeCreator](http://aephyr.googlecode.com/svn/trunk/)（Java6 的导入？？？）

3.  最难的方法，必须创建`own xml file (see point 2nd.)`和覆盖`all keys for UIManager`，所有东西都在一个地方是[@camickr 的 UIManager 默认值](http://tips4java.wordpress.com/2008/10/09/uimanager-defaults/)

4.  最简单的方法是仅覆盖[Primary Colors 和 Secondary Colors](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/_nimbusDefaults.html#primary)，然后`Colors`应用并适用于大多数`JComponents`

5.  `Renderers`并且`Highlighter`是单独的问题，必须决定是否使用标准或覆盖这个键，例如`XxxRenderer`，如果你覆盖`Nimbus UIDefaults`和`Renderer`具体的情况下是首选的`JComponent`，那么`Colors`取自`Renderer`不取自`UIDefaults`

# sql - 同时插入相关表

> ID：14503005
> 
> 赞同：0
> 
> 时间：2013-01-24T13:54:40.590
> 
> 标签：sql, vb.net, sql-server-2008, insert

我正在开发 vb.net 项目。我正在使用 VS2010 和 SQL Server 2008。

我的数据库中有很多表，其中`members`包括`bank`.

*   `members`包含列：`id_member, name, mobile, tel`
*   `bank`包含`id_bank, name_bank`

然后我创建了`member_bank`包含 2 列的表：`members.id`以及`bank_id`这两个表之间的 m:n 关系。

如何将详细信息插入`members`并直接与`member_bank`表中的银行 ID 加入会员 ID？

我写了这段代码，但它不起作用：

```
Dim saveok As Boolean = wnclass14.SQLExicute("Insert Into members (member_name,member_id,mobile,tel) values ('" & TextstdntName.Text & "','" & Textid.Text & "','" & TextMobile.Text & "','" & Texttel.Text & "')")
If saveok = True Then
        Dim saveok1 As Boolean = wnclass14.SQLExicute("Insert Into member_bank (id_member,id_bank) values (" & ComboBoxBank.SelectedValue & ")   where member_bank.id_member=members.id")

        If saveok1 = True Then ....... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T14:23:20.470

这里的部分技巧是您希望所有这些都作为单个事务的一部分进行。值得庆幸的是，通过在一次调用“SQLExicute”函数中发送多个语句来做到这一点并不难（请修正你的拼写）：

```
wnclass14.SQLExicute( _
    "BEGIN TRANSACTION;" & _
    "DECLARE @NewID Int;" & _
    "INSERT INTO members (member_name, mobile, tel) " & _
      " VALUES ('..', '555-1234', '555-5678');" & _
    "SELECT @NewID = Scope_Identity();" & _ 
    "INSERT INTO member_bank (id_member, id_bank) " & _
      " VALUES (@NewID, '1234');" & _
    "COMMIT;) 
```

当我们在这里时，您**确实**需要修复此函数，以便它也请求参数数据。

使用字符串连接将用户输入的数据包含在 sql 语句中是不可行的**。**
跳过这个是**不行**的，因为你还在学习。并且**不能**
先“ 让它正常工作”，然后再回去修复安全问题

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:59:54.817

我假设您想在插入后从成员表中返回成员 ID？如果是这样，您需要调查`SCOPE_IDENTITY()`. 这应该返回为您的范围插入到表中的最后一个身份。

这是一篇好文章：

[http://msdn.microsoft.com/en-us/library/ms190315.aspx](http://msdn.microsoft.com/en-us/library/ms190315.aspx)

我会提供代码，但我不太了解你的代码。

祝你好运。**

# android - 在 notifyDataSetChanged 后 Android ListView 不刷新

> ID：14503006
> 
> 赞同：119
> 
> 时间：2013-01-24T13:54:41.093
> 
> 标签：android, android-listview, notifydatasetchanged

我的 ListFragment 代码

```
public class ItemFragment extends ListFragment {

    private DatabaseHandler dbHelper;
    private static final String TITLE = "Items";
    private static final String LOG_TAG = "debugger";
    private ItemAdapter adapter;
    private List<Item> items;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.item_fragment_list, container, false);        
        return view;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.setHasOptionsMenu(true);
        super.onCreate(savedInstanceState);
        getActivity().setTitle(TITLE);
        dbHelper = new DatabaseHandler(getActivity());
        items = dbHelper.getItems(); 
        adapter = new ItemAdapter(getActivity().getApplicationContext(), items);
        this.setListAdapter(adapter);

    }

    @Override
    public void onResume() {
        super.onResume();
        items.clear();
        items = dbHelper.getItems(); //reload the items from database
        adapter.notifyDataSetChanged();
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
        if(dbHelper != null) { //item is edited
            Item item = (Item) this.getListAdapter().getItem(position);
            Intent intent = new Intent(getActivity(), AddItemActivity.class);
            intent.putExtra(IntentConstants.ITEM, item);
            startActivity(intent);
        }
    }
} 
```

我的列表视图

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

但这不会刷新`ListView`. 即使重新启动应用程序后，更新的项目也不会显示。我的`ItemAdapter`扩展`BaseAdapter`

```
public class ItemAdapter extends BaseAdapter{

    private LayoutInflater inflater;
    private List<Item> items;
    private Context context;

    public ProjectListItemAdapter(Context context, List<Item> items) {
        super();
        inflater = LayoutInflater.from(context);
        this.context = context;
        this.items = items;

    }

    @Override
    public int getCount() {
        return items.size();
    }

    @Override
    public Object getItem(int position) {
        return items.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ItemViewHolder holder = null;
        if(convertView == null) {
            holder = new ItemViewHolder();
            convertView = inflater.inflate(R.layout.list_item, parent,false);
            holder.itemName = (TextView) convertView.findViewById(R.id.topText);
            holder.itemLocation = (TextView) convertView.findViewById(R.id.bottomText);
            convertView.setTag(holder);
        } else {
            holder = (ItemViewHolder) convertView.getTag();
        }
        holder.itemName.setText("Name: " + items.get(position).getName());
        holder.itemLocation.setText("Location: " + items.get(position).getLocation());
        if(position % 2 == 0) {                                                                                 
            convertView.setBackgroundColor(context.getResources().getColor(R.color.evenRowColor));
        } else {    
            convertView.setBackgroundColor(context.getResources().getColor(R.color.oddRowColor));
        }
        return convertView;
    }

    private static class ItemViewHolder {
        TextView itemName;
        TextView itemLocation;
    }
} 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：235
> 
> 时间：2013-02-03T01:52:54.193

看看你的`onResume`方法`ItemFragment`：

```
@Override
public void onResume() {
    super.onResume();
    items.clear();
    items = dbHelper.getItems(); // reload the items from database
    adapter.notifyDataSetChanged();
} 
```

您在调用之前刚刚更新`notifyDataSetChanged()`的不是适配器的字段`private List<Item> items;`，而是片段的相同声明的字段。适配器仍然存储对您在创建适配器时传递的项目列表的引用（例如，在片段的 onCreate 中）。使您的代码按预期运行的最短（就更改数量而言）但不是优雅的方法是简单地替换该行：

```
 items = dbHelper.getItems(); // reload the items from database 
```

和

```
 items.addAll(dbHelper.getItems()); // reload the items from database 
```

更优雅的解决方案：

`private List<Item> items;`1）从中删除项目`ItemFragment`- 我们只需要在适配器中保留对它们的引用

2) 将 onCreate 更改为：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    super.setHasOptionsMenu(true);
    getActivity().setTitle(TITLE);
    dbHelper = new DatabaseHandler(getActivity());
    adapter = new ItemAdapter(getActivity(), dbHelper.getItems());
    setListAdapter(adapter);
} 
```

3）在ItemAdapter中添加方法：

```
public void swapItems(List<Item> items) {
    this.items = items;
    notifyDataSetChanged();
} 
```

4）将您的 onResume 更改为：

```
@Override
public void onResume() {
    super.onResume();
    adapter.swapItems(dbHelper.getItems());
} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-01-30T13:46:09.367

您正在将重新加载的项目分配给 中的全局变量项目`onResume()`，但这不会反映在`ItemAdapter`类中，因为它有自己的实例变量，称为“项目”。

对于刷新`ListView`，在接受列表数据的类中添加一个 refresh()`ItemAdapter`即项目

```
class ItemAdapter
{
    .....

    public void refresh(List<Item> items)
    {
        this.items = items;
        notifyDataSetChanged();
    } 
} 
```

`onResume()`使用以下代码更新

```
@Override
public void onResume()
{
    super.onResume();
    items.clear();
    items = dbHelper.getItems(); //reload the items from database
    **adapter.refresh(items);**
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-01T20:20:23.767

在 onResume() 改变这一行

```
items = dbHelper.getItems(); //reload the items from database 
```

到

```
items.addAll(dbHelper.getItems()); //reload the items from database 
```

问题是您永远不会告诉您的适配器有关新项目列表的信息。如果您不想将新列表传递给您的适配器（您似乎不想），那么只需`items.addAll`在您的`clear()`. 这将确保您正在修改适配器引用的相同列表。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-24T14:52:16.240

如果适配器已经设置，再次设置它不会刷新列表视图。相反，首先检查列表视图是否有适配器，然后调用适当的方法。

我认为在设置列表视图时创建适配器的新实例并不是一个好主意。相反，创建一个对象。

```
BuildingAdapter adapter = new BuildingAdapter(context);

    if(getListView().getAdapter() == null){ //Adapter not set yet.
     setListAdapter(adapter);
    }
    else{ //Already has an adapter
    adapter.notifyDataSetChanged();
    } 
```

您也可以尝试在 UI Thread 上运行刷新列表：

```
activity.runOnUiThread(new Runnable() {         
        public void run() {
              //do your modifications here

              // for example    
              adapter.add(new Object());
              adapter.notifyDataSetChanged()  
        }
}); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-27T10:14:25.413

如果您想更新您的列表视图，无论您想在 上`onResume()`还是`onCreate()`在其他功能中执行此操作，您必须意识到的第一件事是您不需要创建适配器的新实例，只需填充再次包含您的数据的数组。这个想法与此类似：

```
private ArrayList<String> titles;
private MyListAdapter adapter;
private ListView myListView;

@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_activity);

    myListView = (ListView) findViewById(R.id.my_list);

    titles = new ArrayList<String>()

    for(int i =0; i<20;i++){
        titles.add("Title "+i);
    }

    adapter = new MyListAdapter(this, titles);
    myListView.setAdapter(adapter);
}

@Override
public void onResume(){
    super.onResume();
    // first clear the items and populate the new items
    titles.clear();
    for(int i =0; i<20;i++){
        titles.add("New Title "+i);
    }
    adapter.notifySetDataChanged();
} 
```

因此，根据该答案，您应该`List<Item>`在`Fragment`. 在您的第一个适配器初始化中，您使用项目填充列表并将适配器设置为您的列表视图。之后，在您的项目的每次更改中，您必须从主项目中清除值，`List<Item> items`然后用您的新项目再次填充它并调用`notifySetDataChanged();`.

这就是它的工作原理:)。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-02-01T13:01:14.827

```
adpter.notifyDataSetInvalidated(); 
```

`onPause()`在Activity 类的方法中试试这个。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-11-20T06:54:12.830

AlexGo 的回答对我有用：

```
getActivity().runOnUiThread(new Runnable() {
        @Override
        public void run() {
         messages.add(m);
         adapter.notifyDataSetChanged();
         getListView().setSelection(messages.size()-1);
        }
}); 
```

列表更新在从 GUI 事件触发更新之前为我工作，因此在 UI 线程中。

但是，当我从另一个事件/线程更新列表时 - 即来自应用程序外部的调用，更新不会在 UI 线程中，它忽略了对 getListView 的调用。像上面那样用 runOnUiThread 调用更新对我有用。谢谢！！

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-04-22T11:31:30.027

试试这个

```
@Override
public void onResume() {
super.onResume();
items.clear();
items = dbHelper.getItems(); //reload the items from database
adapter = new ItemAdapter(getActivity(), items);//reload the items from database
adapter.notifyDataSetChanged();
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-11-20T07:16:43.150

```
adapter.setNotifyDataChanged() 
```

应该做的伎俩。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-06-22T10:51:14.933

如果您的列表包含在适配器本身中，则调用更新列表的函数也应该调用`notifyDataSetChanged()`.

从 UI 线程运行这个函数对我有用：

`refresh()`Adapter里面的函数

```
public void refresh(){
    //manipulate list
    notifyDataSetChanged();
} 
```

然后依次从 UI Thread 运行这个函数

```
getActivity().runOnUiThread(new Runnable() { 
    @Override
    public void run() {
          adapter.refresh()  
    }
}); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-01-31T11:02:28.480

试试这样：

```
this.notifyDataSetChanged(); 
```

代替：

```
adapter.notifyDataSetChanged(); 
```

你必须`notifyDataSetChanged()`不去`ListView`适配器类。

# windows - 远程桌面和 wmi

> ID：14503009
> 
> 赞同：0
> 
> 时间：2013-01-24T13:54:52.940
> 
> 标签：windows, wmi, remote-desktop, remote-server

出于某种原因，在执行系统还原后，当我尝试在使用远程桌面登录或通过 WMI 连接到计算机时执行某个脚本时，该脚本启动但随后由于未知原因而崩溃。

当我以本地用户身份登录到计算机时运行脚本时 - 它工作得很好。

我检查了脚本的权限，WMI 服务的权限，什么都没有...

有任何想法吗？

# c# - 如何以编程方式将数据添加到分层 Infragistics UltraWinGrid

> ID：14503032
> 
> 赞同：1
> 
> 时间：2013-01-24T13:56:01.887
> 
> 标签：c#, .net, winforms, infragistics, ultrawingrid

我可以使用将记录添加到顶级乐队

```
grid.DisplayLayout.Bands[0].AddNew(); 
```

但是当我创建这条记录时，我还需要在波段 1 添加一些子记录。我该怎么做？我收到一个错误：

> *无法添加行：此数据源不支持行插入。*

这是我的代码：

```
 grid.DataSource = this.ultraDataSource2;
 this.ultraDataSource2.Band.AllowAdd = Infragistics.Win.DefaultableBoolean.True; 
```

当添加父记录时，必须更改哪些设置以允许添加子记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:54:55.227

您应该能够设置第一个子带以允许添加以下内容：

```
this.ultraDataSource1.Band.ChildBands[0].AllowAdd = DefaultableBoolean.True; 
```

# internet-explorer - IE 不继承不透明度

> ID：14503036
> 
> 赞同：0
> 
> 时间：2013-01-24T13:56:18.103
> 
> 标签：internet-explorer, opacity

我陷入了不透明问题...

我有这个 HTML 结构

```
<body>
  <div id="G_I_Error"></div>
  <div id="main">
    <!-- some stuff -->
  </div>
</body> 
```

然后，我用 JS 修改“主要”不透明度。

但是，对于 IE8，“main”的子元素始终具有相同的不透明度（100）......

我该怎么做才能使孩子的不透明度与“主要”相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T06:29:57.190

我有几个 DIV ......像这样：

```
<div class="main" id="main">
  <div class="top">
    <span class="logoNameText">MY WEBSITE</span>
    <form name="li" action="#" method="post">
    </form>
  </div>

  <div class="content">
  </div>

  <script>launchError(1);<script>
</div> 
```

是登录页面吗...

JS 代码非常简单：

```
function launchError(c){
  t='';
  if(c==1){
t='<span id="Close" onclick="dimiss(1);">x</span><span id="Error"><b>Error opening session</b><br /><a href="#">Forgot your password?</a></span>';
  }else if(c==2){
t='<span id="Close" onclick="dimiss(1);">x</span><span id="Error"><b>Error during register: </b><br />Inserted emails don\'t match</span>';
  }else if(c==3){
t='<span id="Close" onclick="dimiss(1);">x</span><span id="Error"><b>Error during register: </b><br />Inserted passwords don\'t match</span>';
  }else if(c==4){
t='<span id="Close" onclick="dimiss(1);">x</span><span id="Error"><b>Error during register: </b><br />Inserted email is already registered</span>';
  }

  if(c<=4){
    document.getElementById('G_I_Error').innerHTML=t;
    setOpacity(document.getElementById('main'), 50);
    document.re.d.setAttribute('onclick', 'voidFunction();');
  }
}

function setOpacity(e,o){
  e.style.opacity=o/100;
  e.style.MozOpacy=o/100;
  e.style.filter='alpha(opacity='+o+')';
} 
```

然后，CSS 也很简单。

```
.main{margin-left:auto;margin-right:auto;margin-top:auto;width:1000px;}
.top{height:98px;}
.content{top:20px;height:500px;position:relative;} 
```

...我希望它有所帮助。

# button - Spotify 链接按钮不会打开 Spotify，而是重新下载安装程序，即使 Spotify 已经安装

> ID：14503039
> 
> 赞同：-1
> 
> 时间：2013-01-24T13:56:19.310
> 
> 标签：button, hyperlink, download, spotify

我刚刚使用您的 Spotify 链接按钮制造商添加到我的网站。不幸的是，当我点击它时，它并没有像我想象的那样打开 Spotify 到正确的专辑，而是再次下载安装程序，即使我已经启动并运行了 Spotify。如果需要，您可以在我的网站 www.alan-a.com 上查看。

我使用 MacBook 和 Google Chrome 来执行此操作，并且我的所有软件都是最新的。

谢谢，

艾伦·A。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:30:41.063

这将是您自己的本地设置的问题 - 所有播放按钮的工作方式都相同，除非您在我们的网站上生成它后对其进行了修改。我刚刚尝试了您的网站，它在我的机器上运行良好。

# android - 弹出窗口（使用 PopupWindow 或 Dialog）无缘无故地填充屏幕的宽度

> ID：14503050
> 
> 赞同：7
> 
> 时间：2013-01-24T13:56:49.803
> 
> 标签：android, dialog, popupwindow

我正在尝试让弹出窗口表现出来！=)

问题是弹出窗口“填充了整个屏幕的宽度”，即使布局清楚地表明它应该“wrap_content”。我使用 Dialog 还是 PopupWindow 都没有关系。

一、popup的xml布局，popup_message.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_margin="20dp"
    android:background="@android:color/transparent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="40dp"
        android:orientation="horizontal"
        android:layout_gravity="center" >

        <TextView
            android:layout_width="match_parent"
            android:layout_height="fill_parent"
            android:layout_gravity="center"
            android:background="@android:color/transparent"
            android:gravity="center_vertical|center_horizontal"
            android:orientation="horizontal"
            android:paddingLeft="10dp"
            android:text="@string/new_message"
            android:textColor="#000000"
            android:textAllCaps="true" >

        </TextView>
    </LinearLayout>

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="15dp"
        android:background="#ffffff"
        android:gravity="center_horizontal"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/popup_message_textView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textCursorDrawable="@null" >
        </TextView>

        <Button
            android:id="@+id/jobview_pickup_start_submit"
            android:layout_width="fill_parent"
            android:layout_height="35dp"
            android:layout_below="@+id/popup_message_textView"
            android:layout_gravity="center_vertical|center_horizontal"
            android:layout_marginBottom="15dp"
            android:layout_marginTop="15dp"
            android:gravity="center_horizontal"
            android:text="Confirm"
            android:textColor="#000000" />
    </RelativeLayout>
</LinearLayout> 
```

我正在使用的代码：

```
LayoutInflater inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View input = inflater.inflate(R.layout.popup_message, null);
PopupWindow pw = new PopupWindow(input, LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, true);
View v = findViewById(R.id.main_deviceInfoBar);
pw.showAtLocation(v, Gravity.CENTER, 0, 0); 
```

我也试过这个：

对话框 dialogManualStart = new Dialog(MainActivity.this); dialogManualStart.getWindow().setBackgroundDrawableResource(R.color.transparent); dialogManualStart.requestWindowFeature(MainActivity.this.getWindow().FEATURE_NO_TITLE); dialogManualStart.setContentView(输入); dialogManualStart.show();

无论我使用什么代码，它总是看起来像这样：

![在此处输入图像描述](../Images/2ab5a2bc278930847cc87d72efa8958a.png)

如您所见，它总是填满屏幕的宽度。

**问题：谁能告诉我为什么？**

======== 编辑1 ==============

我将 Button 更改为“wrap_content”（根据 Boogers 的建议），然后它看起来像这样：

![在此处输入图像描述](../Images/5f7c9e0cb1efcbffc4a02fd3337c6d31.png)

这是非常奇怪的行为，不是我所期望的。

如果我将它更改为“match_parent”，它会变回“全宽”，即它从左到右一直延伸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:32:08.380

这是你的问题：

```
<Button
            android:id="@+id/jobview_pickup_start_submit"
            android:layout_width="fill_parent"
... 
```

将其从“fill_parent”更改为“wrap_content”或“match_parent”

# java - 为什么 Java 数组是不可扩展的？

> ID：14503052
> 
> 赞同：0
> 
> 时间：2013-01-24T13:56:54.020
> 
> 标签：java, programming-languages, language-design

> **可能重复：**
> [为什么数组不可扩展？](https://stackoverflow.com/questions/2805224/why-arent-arrays-expandable)

我开始学习 Java，因为我的计算机科学学校的作业需要这种语言，而且我很喜欢这种语言。但是，我已经看到 Java 数组是不可扩展的 - 也就是说 - 您必须在使用它们之前声明它们的长度并且不能进一步更改它。

我想确切地知道这是为什么？为什么 Java 语言设计者选择这样制作数组？我想这是出于性能问题，但我不确定。

提前感谢大家。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T14:00:31.377

> 我想确切地知道这是为什么？为什么 Java 语言设计者选择这样制作数组？我想这是出于性能问题，但我不确定。

他们将原语和数组设计得尽可能简单和低级。他们没有做任何特别的事情，数组根本不使用面向对象的设计。即他们只有几个有用的方法，没有特定于数组。

这个想法是您将使用这些低级构造编写更高级别的集合，例如列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T14:01:23.663

Java 数组几乎与 C 数组一样简单。C 数组只是一个 n*m 字节的分配内存区域，其中 n 是数组中的元素数，m 是存储单个元素所需的字节数。

那么这里唯一添加的 Java 就是`length`而且可能是`toString()`. 所有其他功能都可能使阵列性能无效。收藏品很好地做到了这一点。此外，集合是用 java 本身编写的，这使得它们具有可移植性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T14:02:31.257

> 为什么 Java 语言设计者选择这样制作数组？

数组是该语言提供的编程数据结构之一。如果您使 Array 也可扩展，它将变得类似于[ArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)。

所以，我猜是因为两个原因：

1.  使 Java 在基本结构上与以前的语言相似。
2.  删除重复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T14:05:34.440

数组占用连续的内存位置，编译器无法确保数组末尾之后的位置可以添加到数组中。

这就是为什么很多人使用 LinkedList 或 ArrayList

这个问题有答案

[为什么数组不可扩展？](https://stackoverflow.com/questions/2805224/why-arent-arrays-expandable)

# php - magento 自定义 html 打印顺序

> ID：14503053
> 
> 赞同：5
> 
> 时间：2013-01-24T13:56:57.063
> 
> 标签：php, magento, magento-1.7

我正在尝试自定义 html 打印订单（网址[http://www.yoursite.com/index.php/sales/order/print/order_id/8/](http://www.yoursite.com/index.php/sales/order/print/order_id/8/)），但我找不到合适的文件来执行此操作。

我正在处理模板/销售/订单/打印文件，但我所做的所有更改都不可见。

你能给我一个提示吗？

非常感谢

最好的祝福

编辑：好的，我找到了我需要修改的文件，它是 app/design/frontend/default/MYTEMPLATE/template/sales/order 中的 print-phtml

现在我想在这个 html 打印页面的每一行中添加产品描述，但我不知道该怎么做

有

```
<?php $_items = $_order->getItemsCollection(); ?>
<?php $_count = $_items->count(); ?>
<?php foreach ($_items as $_item): ?>
<?php if ($_item->getParentItem()) continue; ?>
<tbody>
    <?php echo $this->getItemHtml($_item) ?>
</tbody>
    <?php endforeach; ?> 
```

所以我认为我必须在 $this->getItemHtml($_item) 中修改一些东西，但我不知道这个 getItemHtml 在哪里

请你帮助我好吗？多谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T00:16:39.140

您必须编辑的文件是 \sales\order\items\renderer\default.phtml ，但您在此处所做的更改也会出现在订单视图页面上。为避免这种情况，您可以在此 phtml 中使用以下条件（原始版本中也有示例）：

```
<?php if ($this->getPrintStatus()): ?>
....        
<?php endif;?> 
```

.. 以及将来的类似问题：在管理面板上，如果您切换到“存储视图”，则在“系统/配置”菜单中，您将在“高级/开发人员”选项卡下找到一个名为“模板路径提示”的选项。如果您将其设置为“是”，您将在前端看到模板路径，嵌入在每个块旁边。[如何使用模板路径提示](http://www.magentocommerce.com/blog/template-path-hints-tutorial-video/)

# vba - 更改图像形状的图像

> ID：14503054
> 
> 赞同：2
> 
> 时间：2013-01-24T13:56:58.813
> 
> 标签：vba, powerpoint

我希望能够通过单击用户表单中的按钮来更改图像形状的图像。

在互联网上我找到了该功能`UserPicture`，但图像只是保持不变。

```
Private Sub ChangeImage_Click()
    ActivePresentation.Slides("Slide1").Shapes("SolutionA_Image").Visible = True

    ActivePresentation.Slides("Slide1").Shapes("SolutionA_Image").Fill.UserPicture ("D:\User\Desktop\SolutionWrong.jpg")
End Sub

Private Sub HideImage_Click()
    ActivePresentation.Slides("Slide1").Shapes("SolutionA_Image").Visible = False
End Sub 
```

当我单击`HideImage`按钮时，形状变得不可见，因此我对形状的选择似乎是正确的。

我也试过

```
ActivePresentation.Slides("Slide1").Shapes("SolutionA_Image").Fill.UserPicture "D:\User\SolutionWrong.jpg" 
```

但这也不起作用

**编辑**
当然我检查了新图像的路径，它是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T14:40:34.253

[Siddharth Rout 找到了解决方案](https://stackoverflow.com/questions/14503054/change-the-image-of-an-image-shape#comment20215087_14503054)

我通过`picture`从`insert`菜单中选择来创建图像，但它必须通过`Insert`=> `Rectangular shape`（无边框）创建。现在可以通过使用轻松访问它`ActivePresentation.Slides("Slide1").Shapes("SolutionA_Image").Fill.UserPicture ("D:\User\SolutionWrong.jpg")`

# django - 如何从 Django 提供文本文件？

> ID：14503062
> 
> 赞同：25
> 
> 时间：2013-01-24T13:57:27.083
> 
> 标签：django

我正在编写一个基于 Django 的网站，但需要提供一个简单的文本文件。通过将其放在静态目录中并绕过 Django 是正确的方法吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-24T13:59:57.947

如果文件是静态的（不是由 django 应用程序生成的），那么您可以将它放在静态目录中。

如果这个文件的内容是由 Django 生成的，那么你可以在 HttpResponse 中`text/plain`以 mimetype 的形式返回它。

```
content = 'any string generated by django'
return HttpResponse(content, content_type='text/plain') 
```

您还可以通过设置`Content-Disposition`响应的 来为文件命名。

```
filename = "my-file.txt"
content = 'any string generated by django'
response = HttpResponse(content, content_type='text/plain')
response['Content-Disposition'] = 'attachment; filename={0}'.format(filename)
return response 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-24T15:18:52.297

我同意@luc，但是另一种选择是使用`X-Accel-Redirect`标题。

想象一下，您必须提供大型受保护（必须登录才能查看）静态文件。如果您将文件放在静态目录中，那么它的访问权限是开放的，任何人都可以查看它。如果您在 Django 中通过打开文件然后提供它来提供它，那么 IO 太多并且 Django 将使用更多 RAM，因为它必须将文件加载到 RAM 中。解决方案是有一个视图，它将根据数据库对用户进行身份验证，但是 Django 不会返回文件，而是将`X-Accel-Redirect`标题添加到它的响应中。现在由于 Django 在 nginx 后面，nginx 将看到这个标头，然后它将为受保护的静态文件提供服务。这要好得多，因为与 Django 相比，nginx 在提供静态文件方面要好得多，速度也快得多。[这里](http://wiki.nginx.org/XSendfile)是关于如何做到这一点的 nginx 文档。你也可以在 Apache 中做类似的事情，但是我不记得标题了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-28T23:55:00.983

我对通过 AJAX 获取表单的文本模板有类似的要求。我选择使用基于模型的视图（Django 1.6.1）来实现它，如下所示：

```
from django.http import HttpResponse
from django.views.generic import View
from django.views.generic.detail import SingleObjectMixin

from .models import MyModel

class TextFieldView(SingleObjectMixin, View):
    model = MyModel

    def get(self, request, *args, **kwargs):
        myinstance = self.get_object()
        content = myinstance.render_text_content()
        return HttpResponse(content, content_type='text/plain; charset=utf8') 
```

渲染的文本非常小，并且是从模型中的其他字段动态生成的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-03-17T16:00:31.900

直到最近我才使用一种更复杂的方法，然后我发现了[这个](https://www.ordinarycoders.com/blog/article/robots-text-file-django)和[这个](https://adamj.eu/tech/2020/02/10/robots-txt/)：

```
path('file.txt', TemplateView.as_view(template_name='file.txt',
                                      content_type='text/plain')), 
```

然后在你的Django项目中放入`file.txt`你的目录的根目录。`templates`

我现在将此方法用于`robots.txt`、原始询问者之类的文本文件和预生成的`sitemap.xml`（例如，更改为`content_type='text/xml'`）。

除非我遗漏了什么，否则这非常简单而强大。

# azure - Windows azure 网站会话状态

> ID：14503064
> 
> 赞同：7
> 
> 时间：2013-01-24T13:57:45.550
> 
> 标签：azure, session-state

我想知道 Windows azure 网站如何跨多个实例管理它的会话状态。互联网上有很多关于如何使用云服务在多个实例上共享会话状态的内容，但对于网站我找不到最终答案。

问题[windows azure 网站如何处理会话？](https://stackoverflow.com/questions/13656758/how-does-windows-azure-websites-handle-session)还没有一个客观的答案。接受的最佳答案有一个很好的建议，但您必须观看超过 1 小时的视频。

你知道怎么做吗？我可以只使用 InProc 会话状态，Windows azure 会在所有实例中自动管理它吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-20T13:22:21.627

看起来选项是：

*   **Windows Azure 缓存服务**[1]。这是 Microsoft 提供的新缓存服务。128MB 缓存的定价为每月 12.50 美元起（这是预览定价，折扣 50%）。根据 [2]，访问缓存的延迟约为 1ms。

*   **SQL Azure** Accordign to Angshuman Nayak [3] 相对便宜，特别是如果您已经将 SQL Azure 用于其他用途。作为缺点，他提到了潜在的性能问题，因为您通常使用共享数据库。您还需要注意清理有经验的会话。

*   **表存储**Angshuman [3] 还提供了一些关于如何使用表存储来存储会话的说明。他还提到性能不如其他解决方案，但没有提供任何数字。表存储的好处是定价。由于它是现收现付的，因此没有固定的月费。

基于此，Azure 缓存服务似乎是可行的方法，除非价格是一个问题。

[1] [http://www.windowsazure.com/en-us/pricing/details/cache/](http://www.windowsazure.com/en-us/pricing/details/cache/)

[2] [http://weblogs.asp.net/scottgu/archive/2013/09/03/windows-azure-new-distributed-dedicated-high-performance-cache-service-more-cool-improvements.aspx](http://weblogs.asp.net/scottgu/archive/2013/09/03/windows-azure-new-distributed-dedicated-high-performance-cache-service-more-cool-improvements.aspx)

[3] [http://blogs.msdn.com/b/cie/archive/2013/05/17/session-state-management-in-windows-azure-web-roles.aspx](http://blogs.msdn.com/b/cie/archive/2013/05/17/session-state-management-in-windows-azure-web-roles.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T15:57:01.733

[Azure 网站不支持](http://social.msdn.microsoft.com/Forums/en-US/windowsazurewebsitespreview/thread/1db2af4c-3625-4148-9e19-23c3d30c9cf8/)InProc SessionState 。您将不得不使用外部会话状态提供程序。本文展示了外部选项，[本文](http://www.simple-talk.com/cloud/platform-as-a-service/managing-session-state-in-windows-azure-what-are-the-options/)[展示](http://blogs.msdn.com/b/sqlazure/archive/2010/08/04/10046103.aspx)了如何将 SQL Azure 用作会话状态提供程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-06T21:37:40.970

在 azure 中，您可以使用 Redis 缓存来处理会话。

--> 安装 nuget 包 RedisSessionStateProvider --> 在 web.config 中将 SessionState 模式设置为 Custom，将 customProvider 设置为 RedisSessionProvider。

[您可以从这里](https://docs.microsoft.com/en-us/azure/app-service-web/web-sites-dotnet-session-state-caching)找到更多信息

# sql - Oracle 语句计数不正确

> ID：14503065
> 
> 赞同：2
> 
> 时间：2013-01-24T13:57:46.333
> 
> 标签：sql, oracle

我有一个 SQL 语句 - 对我来说无法解释 - 奇怪的行为。也许你会发现哪里出了问题：

当我使用语句

```
select count(*) from department 
```

我得到了 2755 个结果

使用以下语句

```
select 
      building1.street, building1.streetno, building1.plz, building1.city, dept1.buildingid
  from 
      department dept1
    left join 
      supporter sup 
    on 
      dept.supporterid = sup.id
    left join 
      building building1
    on 
      sup.buildingid = building1.ibuildingid
  where 
      dept.usepostaladresssupporter = 1 
  union all
  select 
      building2.street, building2.streetno, building2.plz, building2.city, dept2.buildingid
  from 
      building building2
    right join 
      tueks_department dept2 
    on 
      dept2.buildingid = building2.ibuildingid
  where 
      dept2.usepostaladresssupporter = 0 
```

我也得到了 2755 个结果。但是当我想将这两个语句与左连接结合起来时：

```
select count(*) from department
  left join
    (
      select 
          building1.street, building1.streetno, building1.plz, building1.city, dept1.buildingid
      from 
          department dept1
        left join 
          supporter sup 
        on 
          dept.supporterid = sup.id
        left join 
          building building1
        on 
          sup.buildingid = building1.ibuildingid
      where 
          dept.usepostaladresssupporter = 1 
      union all
      select 
          building2.street, building2.streetno, building2.plz, building2.city, dept2.buildingid
      from 
          building building2
        right join 
          tueks_department dept2 
        on 
          dept2.buildingid = building2.ibuildingid
      where 
          dept2.usepostaladresssupporter = 0
    ) postadress
  on
     department.buildingid = postadress.buildingid; 
```

我得到了 3648513 个结果。

我的期望是，我只得到 2755 个结果。哪里错了？

感谢帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:06:09.970

我认为这`buildingid`不是唯一的*（根据我的推理，它不可能是唯一的）*

想象一下简单的表格

**表A**

```
create TableA (name VARCHAR(32));
insert into TableA values ('Lieven');
insert into TableA values ('Lieven'); 
```

**表B**

```
create TableB (name VARCHAR(32));
insert into TableB values ('Lieven');
insert into TableB values ('Lieven');
insert into TableB values ('AnyOtherValue'); 
```

**选择语句**

```
select * from TableA a left outer join TableB b on a.name = b.name 
```

由于**每条**记录`TableA`都与**每条**记录匹配`TableB`，`name`这将导致 4 条记录*（AnyOtherValue 因不匹配而被忽略）*

*   的第一`TableA`条记录与“TableB”的三个记录中的两个一起返回
*   的第二`TableA`条记录与“TableB”的三个记录中的两个一起返回

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:18:46.863

查询

```
select 
      building1.street, building1.streetno, building1.plz, building1.city, dept1.buildingid
  from 
      department dept1
    left join 
      supporter sup 
    on 
      dept.supporterid = sup.id
    left join 
      building building1
    on 
      sup.buildingid = building1.ibuildingid
  where 
      dept.usepostaladresssupporter = 1 
  union all
  select 
      building2.street, building2.streetno, building2.plz, building2.city, dept2.buildingid
  from 
      building building2
    right join 
      tueks_department dept2 
    on 
      dept2.buildingid = building2.ibuildingid
  where 
      dept2.usepostaladresssupporter = 0 
```

每个部门将返回一行，其中 usepostaladresssupporter 为 0 或 1（请注意，不包括具有其他值的记录，这可能是也可能不是问题，具体取决于此列的约束）。

此查询结果的唯一键可能类似于 departmentid（您需要在选择条件中包含该列）。

所以正确的查询应该是这样的：

```
select * from department
  left join
    (
      select 
          building1.street, building1.streetno, building1.plz, building1.city, dept1.departmentid
      from 
          department dept1
        left join 
          supporter sup 
        on 
          dept.supporterid = sup.id
        left join 
          building building1
        on 
          sup.buildingid = building1.ibuildingid
      where 
          dept.usepostaladresssupporter = 1 
      union all
      select 
          building2.street, building2.streetno, building2.plz, building2.city, dept2.departmentid
      from 
          building building2
        right join 
          tueks_department dept2 
        on 
          dept2.buildingid = building2.ibuildingid
      where 
          dept2.usepostaladresssupporter = 0
    ) postadress
  on
     department.departmentid = postadress.departmentid; 
```

您的查询将在这样的数据上出错：

Departmentid BuildingId 名称

1 1 部门 1

2 2 部门 2

3 2 部门3

乘法效果并不完全等于deptcount * deptcount，而是buildingcount * buildingcount + deptcount - buildingcount

# html - 图像上的内联样式，段落不会换行

> ID：14503070
> 
> 赞同：1
> 
> 时间：2013-01-24T13:58:04.033
> 
> 标签：html, css, wordpress

我使用 Wordpress 创建了一个博客，并尝试将图像添加到每个帖子中。不过，这些图像似乎不能“内联”。我尝试添加内联样式（使用 Chrome 开发工具），但似乎无法让段落换行。

[例子](http://rubytuesdaycreative.co.uk/blog/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:01:24.907

要让文字环绕图像，您必须拥有`display: inline`一套`float`。

您已`display:inline`设置包含包含标题和图像的 div 的 div，但未应用浮动。添加`float: left`到标题 div 的父 div（已经`display: inline`设置为内联样式的那个），文本将在图像周围流动。

或完全删除该父 div（因为它完全无关并且没有真正的目的）并简单地应用于`display: inline`应用于`.wp-caption`包含图像的标题 div 和`float: left`类`.alignleft`（这是 WP 分配给任何左对齐图像的类） ）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:03:57.423

`float:left`在`div`with classes中添加一个`wp-caption alignleft`，如下所示：

```
.alignleft
{
    float:left;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T14:01:15.657

您需要删除围绕图像的 div 并将图像放在段落标签内。当图像在`p`标签内时，您可以左/右对齐，文本将围绕它们流动。

# java - 标签上的 Java 打印。MediaSize 的问题

> ID：14503072
> 
> 赞同：2
> 
> 时间：2013-01-24T13:58:09.057
> 
> 标签：java, printing, labels

我尝试在 1.5x1" 标签上使用斑马 tlp 2824 打印条形码。这是我在 Java 中所做的：

```
DocFlavor flavor = DocFlavor.SERVICE_FORMATTED.PRINTABLE;
PrintRequestAttributeSet aset = new HashPrintRequestAttributeSet();
aset.add(OrientationRequested.LANDSCAPE);
aset.add(MediaSizeName.ISO_A10);        
aset.add(new Copies(1)); 
```

当我打印时，它看起来像这样：

![伊姆古尔](../Images/ff3cf6a55ef3beb3f2cd623711c00957.png)

所以我试着把它缩小一点，看看它是否与源文件有关。但似乎源正确显示。我认为这与似乎保持纵向格式的媒体尺寸有关，因此源图像被剪切。我不确定 A10 是否是在这里选择的正确格式，但它对我想要使用的标签几乎有正确的度量。我很感激这里的一些帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:59:41.893

添加这一行有助于：

```
aset.add(MediaSize.findMedia(2, 1, Size2DSyntax.INCH)); 
```

# c++ - 由于分段错误，生产机器上的 C++ 应用程序崩溃

> ID：14503074
> 
> 赞同：0
> 
> 时间：2013-01-24T13:58:15.390
> 
> 标签：c++, python, linux, segmentation-fault

由于 RED hat Linux 上的分段错误，我们正面临 C++ 应用程序崩溃问题。我们在 C++ 中使用嵌入式 python。

**请在下面找到我的限制**

1.  我不能访问应用程序崩溃的生产机器吗？当应用程序崩溃时，客户端向我们发送核心转储文件。
2.  问题在我们的测试机器上无法重现，它与生产机器具有完全相同的配置。
3.  有时应用程序在 1 小时、4 小时 ....1 天或 1 周后崩溃。我们还没有得到应用程序崩溃的时间框架或任何特定模式。
4.  应用程序很复杂，并且在应用程序中的很多地方都使用了嵌入式 python 代码。我们进行了广泛的代码审查，但无法通过代码审查找到解决方法。
5.  根据核心转储中的堆栈跟踪，它在乘法操作周围崩溃，在代码中审查了此类操作的代码，我们没有得到任何执行此类操作的代码。可能是此类操作是通过从我们无法控制或无法查看的嵌入式 python 执行的 python 脚本调用的。
6.  我们不能在 Valgrind 等生产环境中使用任何分析工具。
7.  我们在本地机器上使用 gdb 来分析核心转储。我们无法在生产机器上运行 gdb。

**请在下面找到我们所做的努力。**

1.  我们已经分析了日志并不断地向我们的测试环境中的应用程序发出请求以重现问题。
2.  我们没有在日志中得到崩溃点。每次我们得到不同的日志。我认为这是由于；内存在其他地方被破坏，应用程序在一段时间后崩溃。
3.  我们已经在我们的应用程序的任何时候检查了负载，并且它从未超过我们的应用程序限制。
4.  我们的应用程序的内存利用率也很正常。
5.  我们在测试机器中借助 Valgrind 分析了我们的应用程序并删除了 valgrind 错误，但应用程序仍然崩溃。

我感谢任何帮助指导我们进一步解决问题。

**以下是版本详情**

红帽 linux 服务器 5.6 (Tikanga) Python 2.6.2 GCC 4.1

**以下是我从他们共享的核心转储文件中获得的堆栈跟踪（在我的机器上）。仅供参考，我们无权访问生产机器来在核心转储文件上运行 gdb。**

```
0  0x00000033c6678630 in ?? ()
1  0x00002b59d0e9501e in PyString_FromFormatV (format=0x2b59d0f2ab00 "can't multiply sequence by non-int of type '%.200s'", vargs=0x46421f20) at Objects/stringobject.c:291
2  0x00002b59d0ef1620 in PyErr_Format (exception=0x2b59d1170bc0, format=<value optimized out>) at Python/errors.c:548
3  0x00002b59d0e4bf1c in PyNumber_Multiply (v=0x2aaaac080600, w=0x2b59d116a550) at Objects/abstract.c:1192
4  0x00002b59d0ede326 in PyEval_EvalFrameEx (f=0x732b670, throwflag=<value optimized out>) at Python/ceval.c:1119
5  0x00002b59d0ee2493 in call_function (f=0x7269330, throwflag=<value optimized out>) at Python/ceval.c:3794
6  PyEval_EvalFrameEx (f=0x7269330, throwflag=<value optimized out>) at Python/ceval.c:2389
7  0x00002b59d0ee2493 in call_function (f=0x70983f0, throwflag=<value optimized out>) at Python/ceval.c:3794
8  PyEval_EvalFrameEx (f=0x70983f0, throwflag=<value optimized out>) at Python/ceval.c:2389
9  0x00002b59d0ee2493 in call_function (f=0x6f1b500, throwflag=<value optimized out>) at Python/ceval.c:3794
10 PyEval_EvalFrameEx (f=0x6f1b500, throwflag=<value optimized out>) at Python/ceval.c:2389
11 0x00002b59d0ee2493 in call_function (f=0x2aaab09d52e0, throwflag=<value optimized out>) at Python/ceval.c:3794
12 PyEval_EvalFrameEx (f=0x2aaab09d52e0, throwflag=<value optimized out>) at Python/ceval.c:2389
13 0x00002b59d0ee2d9f in ?? () at Python/ceval.c:2968 from /usr/local/lib/libpython2.6.so.1.0
14 0x0000000000000007 in ?? ()
15 0x00002b59d0e83042 in lookdict_string (mp=<value optimized out>, key=0x46424dc0, hash=40722104) at Objects/dictobject.c:412
16 0x00002aaab09d5458 in ?? ()
17 0x00002aaab09d5458 in ?? ()
18 0x00002aaab02a91f0 in ?? ()
19 0x00002aaab0b2c3a0 in ?? ()
20 0x0000000000000004 in ?? ()
21 0x00000000026d5eb8 in ?? ()
22 0x00002aaab0b2c3a0 in ?? ()
23 0x00002aaab071e080 in ?? ()
24 0x0000000046422bf0 in ?? ()
25 0x0000000046424dc0 in ?? ()
26 0x00000000026d5eb8 in ?? ()
27 0x00002aaab0987710 in ?? ()
28 0x00002b59d0ee2de2 in PyEval_EvalFrame (f=0x0) at Python/ceval.c:538
29 0x0000000000000000 in ?? () 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:20:11.633

您几乎可以肯定在您的 C++ 代码中**使用指针做了一些不好的**事情，这可能很难调试。

*   不要假设堆栈跟踪是相关的。这可能是相关的，但指针滥用通常会导致*一段时间后崩溃*
*   构建完整的警告。编译器可以指出一些不明显的指针误用，例如返回对本地的引用。
*   调查您的阵列。`std::vector`尝试用(C++03) 或(C++11)替换数组，这样您就可以使用and`std::array`进行迭代，并且可以使用.`begin()``end()``at()`
*   调查你的指针。`std::unique_ptr`用(C++11) 或任何可能的地方替换它们（`boost::scoped_ptr`发布版本中应该没有开销）。`shared_ptr`用或替换其余部分`weak_ptr`。任何无法替代的东西都可能是有问题的逻辑的根源。

由于您所看到的问题，现代 C++ 允许完全删除几乎所有原始指针使用。试试看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:03:03.650

First things first, compile both your binary and `libpython` with debug symbols and push it out. The stack trace will be much easier to follow.

The relevant argument to `g++` is `-g`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T14:16:50.520

建议：

*   如前所述，提供完整的调试版本
*   提供内存测试工具和CPU折磨测试
*   分析核心转储时加载python库的调试符号
*   stacktrace 显示了一些关于 eval() 的内容，所以我猜你会进行动态代码生成和评估/执行。如果是这样，在此代码或传递的参数中，可能存在实际错误。在代码和代码转储的任何接口上的断言可能会有所帮助。

# javascript - JSLint：跨函数的交叉引用

> ID：14503076
> 
> 赞同：2
> 
> 时间：2013-01-24T13:58:24.657
> 
> 标签：javascript, jslint

我不知道如何解决这个问题。假设我们有两个这样的函数：

JSLint 在被访问之前会抱怨`rebind_test2();`没有定义。如果我移动`rebind_test2()`到第一个函数之上，它会再次抱怨`rebind_test1();`在访问之前未定义的内容。有针对这个的解决方法吗？

```
function rebind_test1(){
    "use strict";
    $('#row').load('test/', function(result){
        rebind_test2();
    });    
}

function rebind_test2(){
    "use strict";
    var i = 1;
    rebind_test1();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T14:02:09.813

```
var rebind_test2;

function rebind_test1(){
    "use strict";
    $('#row').load('test/', function(result){
        rebind_test2();
    });    
}

rebind_test2=function(){
    "use strict";
    var i = 1;
    rebind_test1();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:03:36.160

@torazaburo's answer will work, and alternatively you can just pretend that the function declared second is "global" (as if it was declared in a different file):

```
/*global rebind_test2 */ 
```

# python - 如何爬取页面导航涉及动态加载的网站

> ID：14503078
> 
> 赞同：3
> 
> 时间：2013-01-24T13:58:26.580
> 
> 标签：python, web-crawler

我想抓取一个有多个页面的网站，当点击一个页码时，它是动态加载的。如何屏幕抓取它？

即，由于 url 不存在为 href 或如何爬到其他页面？

如果有人在这方面帮助我，那就太好了。

PS：点击不同页面时，URL保持不变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T07:35:24.310

您还应该考虑[Ghost.py](http://jeanphix.me/Ghost.py/)，因为它允许您运行任意 javascript 命令、填写表格并非常快速地进行快照。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:06:06.490

如果您使用的是谷歌浏览器，您可以检查 `network->headers` 开发者工具中动态调用的 url

因此，基于此，您可以确定它是请求`GET`还是`POST`请求。

如果是`GET`请求，您可以直接从 url 中找到参数。

如果是`POST`请求，您可以从 开发人员工具`form data`中找到参数。`network->headers`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T15:04:10.270

由于这篇文章被标记为 python 和 web-crawler，所以不得不提到 Beautiful Soup：[http ://www.crummy.com/software/BeautifulSoup/](http://www.crummy.com/software/BeautifulSoup/)

此处的文档：[http ://www.crummy.com/software/BeautifulSoup/bs3/download/2.x/documentation.html](http://www.crummy.com/software/BeautifulSoup/bs3/download/2.x/documentation.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T14:02:25.907

You could look for the data you want in the javascript code instead of the HTML. This is usually a pain but you can do fun things with regular expressions.

Alternatively, some of the browser testing libraries like [splinter](http://splinter.cobrateam.info/) work by loading the page up in an actual browser like firefox or chrome before scraping. One of those would work if you are running this on a machine with a browser installed.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-15T20:33:20.897

如果你不介意使用 gevent。[GRobot](https://github.com/DYFeng/GRobot)是另一个不错的选择。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-25T04:58:39.540

你不能轻易做到这一点，因为它是一个 ajax 分页（即使使用[mechanize](http://wwwsearch.sourceforge.net/mechanize/)）。相反，打开页面的源文件并尝试知道用于ajax分页的url请求是什么。然后，您可以创建一个假请求，并以您自己的方式处理返回的数据

# android - drawable-tvdpi 中的可绘制对象会缩小吗？

> ID：14503083
> 
> 赞同：1
> 
> 时间：2013-01-24T13:58:39.820
> 
> 标签：android

如果您将drawables放在/drawables目录中，它们将被缩放，如果您想要不同密度的特定drawables，您需要将它们放在特定目录中（/drawables-hdpi，/drawables-mdpi等）

但是，如果我仅在 /drawable-tvdpi 中有可绘制对象，它们会自动缩小/放大以适应密度吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:07:30.043

是的，它们会缩放，所以如果你在文件夹中放置一个 133 x 133px 的可绘制对象`tvdpi`，它将是 100px on `mdpi`， 150px for `hdpi`，依此类推。

[Android 开发人员 - 屏幕支持](http://developer.android.com/guide/practices/screens_support.html "Android 开发者 - 屏幕支持")页面上有更多信息，但通常您只需将可绘制对象放入`tvdpi`文件夹即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:07:41.070

我相信他们会的，Android 总是会在您的目录中选择最好的可用图像，即如果您有一部 mdpi 手机，以及两种资源类型 hdpi 和 xhdpi，它会尝试选择紧接在请求密度 (hdpi) 之上的那个，而不是更大的，因为它正确地假设它就足够了。看看[这里](http://developer.android.com/guide/topics/resources/providing-resources.html#BestMatch)。

但是，为什么不使用[Bluestacks](http://www.bluestacks.com)自己尝试一下呢？这是一个运行良好的安卓模拟器。它仍处于测试阶段，但对我很有帮助。

# cakephp - 您的服务器上未正确配置 URL 重写

> ID：14503086
> 
> 赞同：0
> 
> 时间：2013-01-24T13:58:45.053
> 
> 标签：cakephp, url-rewriting

我尝试将我的 cakephp 版本从 1.3 升级到 2.5，但遇到了 url 重写问题。另一个 cakephp 应用程序在同一版本上运行，所以我确信 mod_rewrite 可以工作。

虽然当我转到 example.com/pages/home 时出现以下错误：

您的服务器上未正确配置 URL 重写。1) 帮我配置 2) 我不/不能使用 URL 重写

当我转到我的正常主页并想单击主页链接时，我得到以下网址：

[http://example.com/app/webroot/index.php/](http://example.com/app/webroot/index.php/)

其他网址也是如此。

[http://example.com/antwerp](http://example.com/antwerp)变为[http://example.com/app/webroot/index.php/antwerp](http://example.com/app/webroot/index.php/antwerp)

当我访问[http://example.com/antwerp](http://example.com/antwerp)时，该网站可以正常工作......

有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:38:46.277

我建议访问您的帐户并分别从以下位置重新上传您的 .htaccess 文件。

```
/app
    .htaccess
    /webroot
        .htaccess
.htaccess 
```

某些 FTP 不会自动上传这些文件，除非您强制这样做。

如果这不起作用，请检查您的`php.ini`文件是否在此应用程序的 public_html 文件夹中。

# asp.net-mvc-3 - 不显眼的验证编辑器

> ID：14503088
> 
> 赞同：0
> 
> 时间：2013-01-24T13:58:53.097
> 
> 标签：asp.net-mvc-3, internet-explorer, unobtrusive-validation

我有一个`View`从 加载的 partial ，`Action`所以父视图包含：

```
@Html.Action("TourSearch") 
```

TourSearch 视图使用如下编辑器：

```
@Html.EditorFor(model => model.ImpersonatedAgentModel, "ImpersonatedAgentView") 
```

在哪里`ImpersonatedAgentModel`是这样的：

```
[Serializable]
  public class ImpersonatedAgentModel
  {
    [Required(ErrorMessage = "Please provide a User ref")]
    public string AgentImpersonatedUserName { get; set; }
    [Required(ErrorMessage="Please provide a ABTA/AgencyCode")]
    public string AgentImpersonatedBranchCode { get; set; }
    [Required(ErrorMessage = "Please provide a User ref")]
    public int? AgentImpersonatedBranchID { get; set; }
  } 
```

我的编辑器非常直截了当：

```
@model Travel2.WebUI.Models.ImpersonatedAgentModel

<ul id="agencyDetails">
    <li>
        <label for="AgentImpersonatedBranchCode">ABTA/Agency Code: *</label>
        @Html.TextBoxFor(model => model.AgentImpersonatedBranchCode, new {ID="txtBranchCode" })
            @Html.ValidationMessageFor(model => model.AgentImpersonatedBranchCode, "*")
        <input id="txtBranchId", type="hidden" value="@Model.AgentImpersonatedBranchID" />
        <input id="txtUserName", type="hidden" value="@Model.AgentImpersonatedUserName" />
        <input id="hidCurrentController" type="hidden" value='@ViewContext.Controller.ValueProvider.GetValue("controller").RawValue' />
    </li>
    <li>
        <label for="AgentImpersonatedUserName">User ref: *</label>
        <select id="ddlUser" disabled="disabled" ></select>
                <input type="hidden" id="txtUserID" />
                @Html.HiddenFor(model => model.AgentImpersonatedUserName, new {ID="AgentImpersonatedUserName" })
                @Html.HiddenFor(model => model.AgentImpersonatedBranchID, new {ID="AgentImpersonatedBranchID"})
                            @Html.ValidationMessageFor(model => model.AgentImpersonatedUserName, "*")

    </li>

</ul> 
```

现在在 Chrome 中，一切正常。但是当我在**IE**中填写表单而不是在编辑器中填写数据时，**它会错误地通过验证**！

如果我检查标记，使用 IE 对 Firebug 的糟糕借口，我可以看到验证属性，

```
<input name="ImpersonatedAgentModel.AgentImpersonatedBranchCode" id="txtBranchCode" type="text" data-val="true" data-val-required="Please provide a ABTA/AgencyCode" jQuery172048066185567747205="94"/> 
```

那么为什么 IE 会忽略它们！愚蠢的 IE

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:46:55.270

Found the answer here:

[http://www.tigraine.at/2011/08/26/jquery-validate-and-microsofts-unobtrusive-validation-dont-play-well-together/](http://www.tigraine.at/2011/08/26/jquery-validate-and-microsofts-unobtrusive-validation-dont-play-well-together/)

We were referencing Jquery validation too and this seems to be causing this error

# jquery - 在 Jquery 移动网站上离开页面时如何停止播放 Youtube 视频

> ID：14503093
> 
> 赞同：1
> 
> 时间：2013-01-24T13:58:57.617
> 
> 标签：jquery, jquery-mobile, youtube

当用户离开播放 youtube 视频的页面时，播放不会停止。我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:30:19.803

```
$(document).live('pagebeforehide', function(){
    player.pauseVideo();
}); 
```

这将告诉视频在每次调用新页面时暂停。

# ios - iOS，用于在自定义子视图中调整内容属性的模式

> ID：14503102
> 
> 赞同：0
> 
> 时间：2013-01-24T13:59:39.130
> 
> 标签：ios, objective-c

处理具有某种模型对象并且其上的各种属性被多个视图和（自定义）子视图修改的情况的既定方法是什么？

子视图是否应该引用它的容器（我不知道 iOS 是否保留这样的引用，但我可以在必要时设置一个），它具有内容并对其进行修改？

是否应该尽可能少的视图具有指向内容的指针，并且子视图可以向其容器发送消息以修改内容？

别的东西？我知道我可以一起破解一些东西，但我想要一个合适的设计模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T06:04:24.617

通常的 - MVC 方式 - 是有一个控制器对象在视图和模型之间进行调解。

您将拥有一个 viewController 来管理每个全屏视图视图层次结构和一个单独的模型对象，每个不同的 viewController 都会更新该模型对象。

所有视图或子视图都没有指向模型的指针。从视图或子视图中获取数据的常用方法是通过委托或 - 如果您的视图是 UIControl 子类 - 目标/操作。委托（或操作方法的位置）将是视图控制器。视图不应该知道模型，反之亦然。

如果您希望在应用程序的整个生命周期中都需要一个持久模型对象，并从各种视图控制器进行更新，那么您很可能希望使用单例模式 -[此处的苹果文档](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaObjects/CocoaObjects.html#//apple_ref/doc/uid/TP40002974-CH4-SW32)- 另请参阅此处有关单例的大量问答（全局可访问对象），以及[此链接](http://lukeredpath.co.uk/blog/a-note-on-objective-c-singletons.html)。

# ios - Apple 处理器上的 Exclusives Reservation Granule (ERG)

> ID：14503105
> 
> 赞同：6
> 
> 时间：2013-01-24T13:59:51.260
> 
> 标签：ios, assembly, arm, processor

有谁知道 Apple 的 A5、A5X、A6 和 A6X 处理器上的 ERG 是什么？

我们在 LDREX/STREX 指令中遇到了一个晦涩的错误，A5 和 A6 的行为不同。我唯一的解释是他们有不同的ERG，但找不到任何东西。我也找不到检索此值的方法，MRC 指令似乎在 iOS 的用户模式下被禁止。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:07:26.780

在 OMAP 4460（ARM Cortex-A9，与 Apple A5/A5X 相同）上，ERG 为 32 字节（与高速缓存行大小相同）。

我不知道这些值在 A6/A6X 上（如果不加载您自己的驱动程序就无法找到，这在 Apple 设备上是无法做到的），但我的猜测是缓存行大小增加到 64 字节，ERG 也是如此。

或者，您可以针对 512 个字（2K 字节）的架构最大值优化算法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-06-06T18:14:35.870

在使用 ldrex/strex 时，ERG 大小是一个*关键的考虑因素。*

发出 ldrex 后，如果在发生 ldrex 读取的 ERG 中发生内存访问，则 strex 将失败。

具有包含 ldrex/strex 目标和一些附加数据的结构并不罕见，其中附加数据在 ldrex/strex 对之间访问（例如，存储由 ldex 加载的值）。

如果 ldrex/strex 目标在结构中没有足够的填充（即选择的 ERG 大小太小），那么访问结构的其他成员将导致 strex 总是失败。

游戏结束，熄灯。

关于 ldrex/strex，ARM 实现了“本地监视器”和“全局监视器”。在只有本地监视器的系统上，ldrex/strex 失败的唯一方法是，如果两个 ldrex 在发出 strex 之前在同一个地址上发出 - 只有具有全局监视器的系统才会真正注意到 ERG 中的内存总线流量ldrex/strex 目标。

ARM 系统差异很大，我怀疑有些系统只有本地监视器，因此实际上并不支持 ldrex/strex。

# c# - 从 Windows Mobile 连接到 SQL Server

> ID：14503108
> 
> 赞同：1
> 
> 时间：2013-01-24T13:59:55.730
> 
> 标签：c#, sql-server, visual-studio-2008, windows-mobile

我可以毫无问题地从通过 USB 连接到 PC 的 Windows Mobile 设备连接到我的 PC 上的 SQL Server。但我不能从模拟器做同样的事情。

它抛出一个异常：

> *SQL Server 不存在或访问被拒绝。*

连接字符串是：

```
Data Source=172.16.6.114; Initial Catalog=Barcode; User ID=sa; Password=123 
```

可能是什么问题？互联网上没有太多信息:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:43:36.953

当连接模拟器（连接和停靠）时，ActiveSync 或 WMDC 应该连接到您的 PC。sql 命令需要 Internet 连接。在 ActiveSync/WMDC 中检查支架模拟器的连接设置（需要将 DMA 选为 WMDC 中允许的连接类型，请参阅“允许连接到以下之一”）。 ![在此处输入图像描述](../Images/b0e3ce5e3390298f1261258f6dc6109e.png)

在 WMDC 连接设置中将“此 PC 连接到”选项更改为 Internet 或自动（如果它不起作用，只需在 Internet 和自动之间切换）。 ![在此处输入图像描述](../Images/82671cee2d901b9981922baac99798a6.png)

# vim - 同时重命名文件和里面的类名

> ID：14503109
> 
> 赞同：3
> 
> 时间：2013-01-24T13:59:57.620
> 
> 标签：vim

对于php文件，是否有任何插件可以同时重命名文件和里面的类名？

# objective-c - 用于 UI 表视图的 Objective C 动态 NSDictionary 按节标题划分

> ID：14503112
> 
> 赞同：0
> 
> 时间：2013-01-24T14:00:04.217
> 
> 标签：objective-c, xcode, uitableview, nsarray, nsdictionary

所以这是基于我的问题here

[目标 c 何时使用 NSDictionary 而不是 NSArray](https://stackoverflow.com/questions/14493725/objective-c-when-to-use-nsdictionary-instead-of-nsarray#comment20201177_14493725)

为菜鸟问题道歉。我刚开始学习目标c，我真的很困惑。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    headers = [NSArray arrayWithObjects:@"Header Section 1 (H1)", @"Header Section 2 (H2)", nil];
    events = [NSArray arrayWithObjects:@"H1 Content 1", @"H1 Content 2", nil];
    myInfo = [NSArray arrayWithObjects:@"H2 Content 1", @"H2 Content 2", @"H2 Content 3", nil];

    menuDetails = [[NSMutableDictionary alloc] init];
    for(NSString *event in events){
        [menuDetails setValue:event forKey:@"Header Section 1 (H1)"];
    }

    for(NSString *info in myInfo){
        [menuDetails setValue:info forKey:@"Header Section 1 (H2)"];
    }
}

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
    return [[menuDetails allKeys] count];
}

-(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section{
    return [[[menuDetails allKeys] sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)]objectAtIndex:section];
} 
```

1.  想在第一节限制这一点，但不是在第二节

    ```
    -(NSInteger)tableView:(UITableView *)tableview numberOfRowsInSection:(NSInteger)section {
        return 5;
    } 
    ```

2.  因此，当我尝试用这种方法填充单元格时，我不确定如何使这种动态变化。我不确定如何确保它选择特定单元格所在部分的“键”（阻塞线）：

* * *

```
-(UITableViewCell *)tableView:(UITableView *) tableView cellForRowAtIndexPath:(NSIndexPath *) indexPath {
    static NSString *CellIdentifier = @"OptionCellIdentifier";

        MenuOptionTableCell *cell = (MenuOptionTableCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if(cell == nil){
            NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"OptionCellIdentifier" owner:self options:nil];
            cell = [nib objectAtIndex:0];
        }

        NSDictionary *menuItem = [[menuDetails valueForKey:[[[menuDetails allKeys] sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)] objectAtIndex:indexPath.section]] objectAtIndex:indexPath.row];

        cell.optionName.text = [menuItem objectForKey:@"Events"];

        return cell;
    } 
```

编辑： GAAAHHH，格式正在杀死我。它不会进入代码标记

这就是 Idk 要做的事情：

> cell.optionName.text = [menuItem objectForKey:@"Events"];

所以我想要发生的是：

*   节标题 1
    1.  H1 内容 1
    2.  H1 内容 2
*   节标题 1
    1.  H2含量1
    2.  H2含量2
    3.  H1 内容 3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:45:17.737

我将首先创建一个“MyMenuSection”对象，如下所示；

```
@interface MyMenuSection : NSObject {
    NSString *title;
    NSMutableArray *rows;
}

@property (nonatomic, retain) NSString *title;
@property (nonatomic, retain) NSMutableArray *rows;

@end

@implementation

@synthesize title;
@synthesize rows;

@dealloc {
    [title release];
    [rows release];
    [super dealloc];
}

@end 
```

然后在您的 viewDidLoad （或您决定初始化/分配数据的任何地方）中，您将执行此操作；

```
-(void)viewDidLoad
{
    [super viewDidLoad];

    NSMutableArray menuDetails = [NSMutableArray array];

    MyMenuSection section = [[MyMenuSection alloc] init];
    section.title = @"Header Section 1 (H1)";
    [section.rows addObjects:@"H1 Content 1", @"H1 Content 2", nil];
    [menuDetails addObject:section];
    [section release];

    section = [[MyMenuSection alloc] init];
    section.title = @"Header Section 2 (H2)";
    [section.rows addObjects:@"H2 Content 1", @"H2 Content 2", @"H2 Content 3", nil];
    [menuDetails addObject:section];
    [section release];

    self.menuDetails = menuDetails;
    [menuDetails release];

} 
```

然后您的 UITableView 数据和委托回调将如下所示；

```
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return [menuDetails count];
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    if (section == 0) {
        return 2;
    } else {
        return [[(MyMenuSection *)[menuDetails objectAtIndex:indexPath.section] rows] count];
    }
}

-(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    return [(MyMenuSection *)[menuDetails objectAtIndex:section] title];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *) indexPath {

    static NSString *cellIdentifier = @"OptionCellIdentifier";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if(cell == nil){
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"OptionCellIdentifier" owner:self options:nil];
        cell = [nib objectAtIndex:0];
    }

    cell.optionName.text = (NSString *)[[(MyMenuSection *)[menuDetails objectAtIndex:indexPath.section] rows] objectAtIndex:[indexPath.row]];

    return cell;

} 
```

YMMV，快乐编码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:51:03.060

听起来你在这里想太多了。我最大的建议是摆脱所有单独的数组并开始将它们嵌套在一起。我的意思是让 menuItems 成为你的数组事件和 myInfo 的 NSArray。

这将使您以后更容易使用 .count 获取动态行数。

例子：

```
events = [NSArray arrayWithObjects:@"H1 Content 1", @"H1 Content 2", nil];
myInfo = [NSArray arrayWithObjects:@"H2 Content 1", @"H2 Content 2", @"H2 Content 3", nil];

NSArray *menuItems = [NSArray arrayWithObjects:events, myInfo, nil]; 
```

现在当你调用数组时

```
-(NSInteger)tableView:(UITableView *)tableview numberOfRowsInSection:(NSInteger)section{
    NSArray *tempArray = [NSArray objectAtIndex: section];
    return tempArray.count;
} 
```

至于稍后提取单元名称。

```
cell.optionName.text = [[menuItem objectAtIndex:indexPath.section] objectAtIndex:indexPath.row]; 
```

# python - 使用变量作为变量名的一部分

> ID：14503124
> 
> 赞同：0
> 
> 时间：2013-01-24T14:00:42.227
> 
> 标签：python

我有 object1，其中有许多子对象。这些子对象以 形式访问`object1.subobject`。我有一个函数，它返回原始对象的子对象列表。我想做的就是遍历列表并访问每个子对象。像这样的东西：

```
temp_list = listSubChildren(object1)  #Get list of sub-objects
for sub_object in temp_list:          #Iterate through list of sub-objects
    blah = object1.sub-object         #This is where I need help 
    #Do something with blah           #So that I can access and use blah 
```

我查看了人们使用的类似问题，`dictionaries`但`getattr`无法让这些方法中的任何一种为此工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T14:01:21.500

在我看来，如果您的`listSubChildren`方法按照您的暗示返回字符串，您可以使用内置[`getattr`](http://docs.python.org/2/library/functions.html#getattr)函数。

```
>>> class foo: pass
... 
>>> a = foo()
>>> a.bar = 1
>>> getattr(a,'bar')
1
>>> getattr(a,'baz',"Oops, foo doesn't have an attrbute baz")
"Oops, foo doesn't have an attrbute baz" 
```

或者对于您的示例：

```
for name in temp_list:
    blah = getattr(object1,name) 
```

* * *

作为最后一点，根据您实际*使用*的内容`blah`，您可能还需要考虑`operator.attrgetter`. 考虑以下脚本：

```
import timeit
import operator

class foo(object):
    def __init__(self):
        self.a = 1
        self.b = 2
        self.c = 3

def abc(f):
    return [getattr(f,x) for x in ('a','b','c')]

abc2 = operator.attrgetter('a','b','c')

f = foo()
print abc(f)
print abc2(f)

print timeit.timeit('abc(f)','from __main__ import abc,f')
print timeit.timeit('abc2(f)','from __main__ import abc2,f') 
```

两个函数 ( `abc`, `abc2`) 做的事情几乎相同。 `abc`返回列表`[f.a, f.b, f.c]`，而`abc2`返回元组要快得多，这是我的结果——前两行分别显示和的输出，`abc`第三`abc2`和第四行显示操作需要多长时间：

```
[1, 2, 3]
(1, 2, 3)
0.781795024872
0.247200965881 
```

请注意，在您的示例中，您可以使用`getter = operator.attrgetter(*temp_list)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:07:54.073

它应该看起来像这样：

```
temp_list = [] 
for property_name in needed_property_names:
    temp_list.append(getattr(object1, property_name)) 
```

所以，getattr 是你所需要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T14:19:42.277

将此添加到`object1`作为以下实例的类中：

```
def getSubObjectAttributes(self):
    childAttrNames = "first second third".split()
    return [getattr(self, attrname, None) for attrname in childAttrNames] 
```

# c# - 使 XMLSerialzier 方法成为公共类

> ID：14503127
> 
> 赞同：1
> 
> 时间：2013-01-24T14:00:52.827
> 
> 标签：c#, xml, class, xml-serialization

我有三个通过 XMLserializer 方法序列化为 XML 数据的类。有没有办法让所有人都可以访问该方法，而不是在我的代码中使用三个 xmlserialize 方法。

```
//Here I'm writing to my class with the data that needs to be serialized                  
PERSON r = new PERSON();
Input l = new Search.Input();
INPUTSEARCHNBR ln = new INPUTSEARCHNBR();
ln.number = pnumber;                  
r.query = ln;                
string xml = doSerialization(r);

//Call the xmlserializer method 
private static string doSerialization(PERSON r)
{
    string serializedValue = string.Empty;

    try
    {
        XmlSerializer xmlSerializer = new XmlSerializer(r.GetType());

        using (MemoryStream ms = new MemoryStream())
        {
            xmlSerializer.Serialize(ms, r);

            ms.Position = 0;
            var sr = new StreamReader(ms);
            serializedValue = sr.ReadToEnd();
        }

        serializedVal = serializedValue.Replace("version=\"0\"", string.Empty).Replace("<?xml version=\"1.0\"?>", string.Empty).Replace("<?xml version=\"1.0\" encoding=\"UTF-8\"?>", string.Empty);
    }

    return serializedVal;
} 
```

我的代码对两个不同的类重复了这两次，它写入该类，然后调用另一个 xmlserialize 方法，因为该方法的输入是不同的类类型。有没有办法使方法公开或作为类或任何其他方式，这样我就不必粘贴两个完全相同但输入类不同的额外 xmlserialize 方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T14:06:52.240

由于您不执行任何特定于类的操作，因此您可以键入`object`：

```
private static string doSerialization(object r)
{
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:15:51.697

就像 chue x 所说，您可以使用`object`参数或使方法通用。通用方式目前对您没有任何好处，但您可以使用它来例如只允许特定类型。

```
private static string doSerialization<T>(T r)
{
    // ..
} 
```

只允许自定义类型：

```
private static string doSerialization<T>(T r) where T : YourBaseClass
{
    // ..
} 
```

# dart - Dart 中的 Web 组件

> ID：14503132
> 
> 赞同：4
> 
> 时间：2013-01-24T14:01:16.577
> 
> 标签：dart, dart-webui

考虑到 Dart 中的 Web 组件，我有几个问题：

1.）我们如何调用组件的方法，最重要的是，如何访问组件实例？我知道我们可以为 Web 组件提供属性，但不知道如何调用它们的方法并获取它们的实例。

2.) 如何手动实例化组件的实例？原因是我希望 ie 显示一个包含我的组件的模式表单，并且在每次单击时都希望重新创建 Web 组件以显示新鲜的内容。

谢谢亚历克斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T14:06:43.643

对于 1.) 似乎是通过 document.query('#my-component-id').xtag 完成的

对于 2.) 似乎可以通过代码实现，但到目前为止过于复杂

另请参阅[http://www.dartlang.org/articles/dart-web-components/spec.html](http://www.dartlang.org/articles/dart-web-components/spec.html)了解更多信息

# java - Java 分析 - 检测导致峰值的原因

> ID：14503138
> 
> 赞同：2
> 
> 时间：2013-01-24T14:01:45.603
> 
> 标签：java, jakarta-ee, profiling, profiler, jvisualvm

我正在尝试检测导致部署在 Jboss 中的 Java struts 基础 Web 应用程序出现大量峰值的原因。我已经使用 Yourkit 和 visualVM 进行转储并分析了转储，但这些峰值是暂时的，并且在转储被采取时什么都没有。

问题是 - 有没有办法检测导致运行时峰值的原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:22:54.017

这里有几个想法：

*   检查您的请求日志以查看是否与峰值以及请求量或特定请求类型有任何关联。

*   在启用 GC 日志记录的情况下运行 JVM 并查找相关性。

*   在您的应用程序中启用调试级日志记录并查找相关性。（请谨慎使用此选项，因为打开更多应用程序日志记录可能会改变性能特征。）

*   （在 Linux / Unix 上）运行 vmstat 和 iostat 并寻找与额外磁盘活动或交换/分页的相关性。

* * *

如果您的对象创建率或非垃圾对象的数量/大小出现峰值，这很可能是由您的应用程序而不是 JVM 或操作系统引起的。很有可能是由于应用程序工作负载性质的短暂变化造成的；例如，请求中出现峰值，或者有一些不寻常的请求涉及创建大量对象。关注请求和应用程序日志。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T14:24:08.113

由于垃圾收集很可能会导致这样的问题，我建议使用以下命令行选项在 JVM 中启用垃圾收集日志记录：

*   `-Xloggc:<path and filename to log to>`
*   `-XX:+PrintGCDetails`

# linux - 在 Linux 平台上在 R 中生成扩展 ASCII

> ID：14503143
> 
> 赞同：1
> 
> 时间：2013-01-24T14:02:07.953
> 
> 标签：linux, r, character-encoding, extended-ascii

到目前为止，我一直在 Windows 平台上工作，我获取扩展 ascii 字符的代码是这样的：

```
extendedascii=rawToChar(as.raw(seq(128,255,by=1)),multiple=TRUE) 
```

这给了我一个带有我需要的字符的向量。

```
 [1] "€" "" "‚" "ƒ" "„" "…" "†" "‡" "ˆ" "‰" "Š" "‹" "Œ" "" "Ž" "" "" "‘" "’" "“" "”" "•" "–" "—" "˜" "™" "š" "›" "œ" "" "ž" "Ÿ" " " "¡" "¢" "£" "¤" "¥" "¦"
 [40] "§" "¨" "©" "ª" "«" "¬" "­" "®" "¯" "°" "±" "²" "³" "´" "µ" "¶" "·" "¸" "¹" "º" "»" "¼" "½" "¾" "¿" "À" "Á" "Â" "Ã" "Ä" "Å" "Æ" "Ç" "È" "É" "Ê" "Ë" "Ì" "Í"
 [79] "Î" "Ï" "Ð" "Ñ" "Ò" "Ó" "Ô" "Õ" "Ö" "×" "Ø" "Ù" "Ú" "Û" "Ü" "Ý" "Þ" "ß" "à" "á" "â" "ã" "ä" "å" "æ" "ç" "è" "é" "ê" "ë" "ì" "í" "î" "ï" "ð" "ñ" "ò" "ó" "ô"
[118] "õ" "ö" "÷" "ø" "ù" "ú" "û" "ü" "ý" "þ" "ÿ" 
```

现在，在 linux 上，我得到了这个：

```
 [1] "\x80" "\x81" "\x82" "\x83" "\x84" "\x85" "\x86" "\x87" "\x88" "\x89" "\x8a" "\x8b" "\x8c"
 [14] "\x8d" "\x8e" "\x8f" "\x90" "\x91" "\x92" "\x93" "\x94" "\x95" "\x96" "\x97" "\x98" "\x99"
 [27] "\x9a" "\x9b" "\x9c" "\x9d" "\x9e" "\x9f" "\xa0" "\xa1" "\xa2" "\xa3" "\xa4" "\xa5" "\xa6"
 [40] "\xa7" "\xa8" "\xa9" "\xaa" "\xab" "\xac" "\xad" "\xae" "\xaf" "\xb0" "\xb1" "\xb2" "\xb3"
 [53] "\xb4" "\xb5" "\xb6" "\xb7" "\xb8" "\xb9" "\xba" "\xbb" "\xbc" "\xbd" "\xbe" "\xbf" "\xc0"
 [66] "\xc1" "\xc2" "\xc3" "\xc4" "\xc5" "\xc6" "\xc7" "\xc8" "\xc9" "\xca" "\xcb" "\xcc" "\xcd"
 [79] "\xce" "\xcf" "\xd0" "\xd1" "\xd2" "\xd3" "\xd4" "\xd5" "\xd6" "\xd7" "\xd8" "\xd9" "\xda"
 [92] "\xdb" "\xdc" "\xdd" "\xde" "\xdf" "\xe0" "\xe1" "\xe2" "\xe3" "\xe4" "\xe5" "\xe6" "\xe7"
[105] "\xe8" "\xe9" "\xea" "\xeb" "\xec" "\xed" "\xee" "\xef" "\xf0" "\xf1" "\xf2" "\xf3" "\xf4"
[118] "\xf5" "\xf6" "\xf7" "\xf8" "\xf9" "\xfa" "\xfb" "\xfc" "\xfd" "\xfe" "\xff" 
```

我尝试`Encoding(extensesascii)`并获得`"Unknown"`了向量的所有元素。我也尝试过`iconv(extendedascii, from="UTF-8", to="ASCII")`并最终使用了 NA。

我相信我的基本问题是我不知道我的文本采用什么编码，而且我的机器可能不知道/识别它。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:25:53.493

没有扩展 ASCII 这样的东西。您在 Windows 上的编码称为[Windows-1252](http://en.wikipedia.org/wiki/Windows-1252)或 CP-1252。`iconv`很清楚。

如果你有很多文件采用这种编码，你可能需要`iconv`在 Linux 上继续使用；否则，一劳永逸地切换到 UTF-8 是有意义的。

# wpf - WPF ControlTemplate 打破风格

> ID：14503146
> 
> 赞同：11
> 
> 时间：2013-01-24T14:02:16.807
> 
> 标签：wpf, xaml, controltemplate, nested

**有用的东西**

我需要对作为 StackPanel 的子项的某种类型的控件进行样式设置。我正在使用：

```
<StackPanel>
    <StackPanel.Resources>
        <Style TargetType="{x:Type TextBlock}">...</Style>
    </StackPanel.Resources>
    <TextBlock ...>
    ...
</StackPanel> 
```

这很好用！每个 TextBlock 都会查看其父级（StackPanel）的资源，以了解应如何设置样式。将 TextBlock 嵌套在 StackPanel 下多远都没关系......如果它在其直接父级中找不到样式，它将查看其父级的父级，依此类推，直到找到某些东西（在这种情况下, 中定义的样式）。

**不起作用的东西**

当我将 TextBlock 嵌套在具有模板的 ContentControl 中时遇到了问题（请参见下面的代码）。ControlTemplate 似乎破坏了 TextBlock 从其父母、祖父母、...

ControlTemplate 的使用似乎有效地消除了 TextBlock 寻找其正确样式的方法（StackPanel.Resources 中的那个）。当它遇到 ControlTemplate 时，它​​会停止在树上的资源中查找其样式，而是默认为 Application 本身的 MergedDictionaries 中的样式。

```
<StackPanel Orientation="Vertical" Background="LightGray">
    <StackPanel.Resources>
        <Style TargetType="{x:Type TextBlock}">
            <Setter Property="Foreground" Value="Green" />
        </Style>
    </StackPanel.Resources>

    <TextBlock Text="plain and simple in stackpanel, green" />
    <ContentControl>
        <TextBlock Text="inside ContentControl, still green" />
    </ContentControl>
    <ContentControl>
        <ContentControl.Template>
            <ControlTemplate TargetType="{x:Type ContentControl}">
                <StackPanel Orientation="Vertical">
                    <ContentPresenter />
                    <TextBlock Text="how come this one - placed in the template - is not green?" />
                </StackPanel>
            </ControlTemplate>
        </ContentControl.Template>
        <TextBlock Text="inside ContentControl with a template, this one is green as well" />
    </ContentControl>

</StackPanel> 
```

有没有办法——除了将 StackPanel.Resources 中的 Style 复制到 ControlTemplate.Resources 之外——让 ControlTemplate 中的 TextBlock 找到定义的样式？

谢谢...

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-24T14:28:31.237

WPF 认为`ControlTemplates`是一个边界，并且不会`x:Key`在模板内应用隐式样式（没有 的样式）。

但是这个规则有一个例外：任何继承自的东西都`Control`将应用隐式样式。

因此，您可以使用 a`Label`而不是 a `TextBlock`，它会应用在 XAML 层次结构中进一步定义的隐式样式，但是由于`TextBlock`继承自`FrameworkElement`而不是`Control`，它不会自动应用隐式样式，您必须手动添加它。

我最常见的解决方法`ControlTemplate.Resources`是`BasedOn`在现有的隐式样式中添加一个隐式`TextBlock`样式

```
 <ControlTemplate.Resources>
        <Style TargetType="{x:Type TextBlock}" 
               BasedOn="{StaticResource {x:Type TextBlock}}" />
    <ControlTemplate.Resources> 
```

其他常见的解决方法是：

*   将隐式样式放在`<Application.Resources>`. 无论模板边界如何，此处放置的样式都将应用于您的整个应用程序。不过要小心这一点，因为它也会将样式应用于`TextBlocks`其他控件的内部，例如按钮或组合框

    ```
    <Application.Resources>
        <Style TargetType="{x:Type TextBlock}">
            <Setter Property="Foreground" Value="Green" />
        </Style>
    </Application.Resources> 
    ```

*   使用 a`Label`而不是 a`TextBlock`因为它继承自`Control`，因此将应用在外部定义的隐式样式`ControlTemplate`

*   给出基本样式 an`x:Key`并将其用作.`TextBlock`内隐式样式的基本样式`ControlTemplate`。它与顶级解决方案几乎相同，但是它用于具有`x:Key`属性的基本样式

    ```
    <Style x:Key="BaseTextBlockStyle" TargetType="{x:Type TextBlock}">
        <Setter Property="Foreground" Value="Green" />
    </Style>

    ...

    <ControlTemplate.Resources>
        <Style TargetType="{x:Type TextBlock}" 
            BasedOn="{StaticResource BaseTextBlockStyle}" />
    <ControlTemplate.Resources> 
    ```

# python - 完全删除具有点符号的 django 应用程序

> ID：14503150
> 
> 赞同：6
> 
> 时间：2013-01-24T14:02:27.443
> 
> 标签：python, django

我想`django.contrib.comments`从我正在处理的项目中删除该应用程序。我试过：

```
$ python manage.py sqlclear django.contrib.comments 
```

在外壳上但得到：

> 错误：找不到标签为 django.contrib.comments 的应用程序。您确定您的 INSTALLED_APPS 设置正确吗？

我已经仔细检查了我的`INSTALLED_APPS`设置并且确实`django.contrib.comments`存在。

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:19:58.357

app_name 实际上只是文件路径的最后一个元素。所以`comments`应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:17:05.187

你可以跑

```
python manage.py reset app_name 
```

然后从已安装的应用程序中删除 app_name。

# java - How to make conditional cascade validation (Hibernate)?

> ID：14503152
> 
> 赞同：2
> 
> 时间：2013-01-24T14:02:32.840
> 
> 标签：java, hibernate, validation

I have a class similar to this:

```
public Foo {

  @Valid
  private Bar bar;
  private Long barId;
} 
```

so when I validate class Foo, class Bar is validated as well. But sometimes I don't want class Bar to be validated (eg when it's not possible to correct bad values) when I validate Foo. Can I do something similar to this:

```
@Valid(when="barId is null") 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:51:05.273

实际上，@Valid 中不支持条件。我认为作为一种解决方法，您可以尝试定义您的[自定义约束](http://docs.jboss.org/hibernate/validator/5.0/reference/en-US/html_single/#validator-customconstraints)@ConditionalBarValid。您可以在班级级别应用它：

```
@ConditionalBarValid
public Foo {

    private Bar bar;
    private Long barId;
} 
```

因此，您的约束验证器将可以访问整个 Foo 对象，并且能够：

*   检查 barId 是否为空
*   获取 Validator 实例并强制验证**bar**对象

您的**ConditionalBarValidator.isValid(...)**实现可能如下所示：

```
// case when foo is not null and foo.getBarId is null
ValidatorFactory factory = Validation.buildDefaultValidatorFactory();
Validator validator = factory.getValidator();
boolean validationResult = validator.validate(foo.getBar()).isEmpty(); 
```

# javascript - jquery 1.8.3 live click event changing to on click

> ID：14503155
> 
> 赞同：3
> 
> 时间：2013-01-24T14:02:36.617
> 
> 标签：javascript, jquery

I use live('click ... while using jQuery v1.8.3 and it works, but I realized live was depracated as of v1.7 and I should change to on('click

Now when the user clicks links it does nothing, below is a copy of the jquery/js

It only works when you click on the a.view_subscriptions link.

Any help is appreciated.

```
$(document).ready(function() {

  function get_month()
  {
    var u = $("#days_for_month_url").attr("href");

    var form_data = {
      ajax : '1'
    };

    $.ajax({
      type: 'POST',
      dataType: 'html',
      url: u,
      data: form_data,
      success: function( msg ) {

        $('#display-month').html(msg);

      } // end success

    }); // end ajax

    return false;
  }

  get_month();

  $("a.view_events").on('click', function(e) {
    e.preventDefault();
    var date = $(this).data('date');

    // change if URL changes
    var u = $("#events_for_day_url").attr("href");

    var form_data = {
      year : $(this).data('year'),
      month : $(this).data('month'),
      day : $(this).data('day'),
      date : $(this).data('date'),
      ajax : '1'
    };

    $.ajax({
      type: 'POST',
      dataType: 'html',
      url: u,
      data: form_data,
      success: function( msg ) {

        $('#display-events').html(msg);
        $('#display-event_detail').html('');

      } // end success

    }); // end ajax

    return false;

  }); // end on.click view-events

  $("a.view_event_details").on('click', function(e) {
    e.preventDefault();
    var u = $("#event_detail_url").attr("href");

    var form_data = {
      event_id : $(this).data('event_id'),
      ajax : '1'
    };

    $.ajax({
      type: 'POST',
      dataType: 'html',
      url: u,
      data: form_data,
      success: function( msg ) {

        $('#display-event_detail').html(msg);
        $('#display-events').html('');

      } // end success

    }); // end ajax

    return false;

  }); // end on.click view_event_details

  $("a.month_link").on('click', function(e) {
    e.preventDefault();
    $('#display-events').html('');

    var u = $("#days_for_month_url").attr("href");

    var form_data = {
      month_url : $(this).data('month_url'),
      ajax : '1'
    };

    $.ajax({
      type: 'POST',
      dataType: 'html',
      url: u,
      data: form_data,
      success: function( msg ) {

        $('#display-month').html(msg);

      } // end success

    }); // end ajax

    return false;

  }); // end on.click view-month

 $("a.view_subscriptions").on('click', function(e) {
    e.preventDefault();
    var u = $("#subscriptions_url").attr("href");

    var form_data = {
      ajax : '1'
    };

    $.ajax({
      type: 'POST',
      dataType: 'html',
      url: u,
      data: form_data,
      success: function( msg ) {

        $('#display-subscriptions').html(msg);
        //$('#display-subscriptions').toggle();

      } // end success

    }); // end ajax

    return false;

  }); // end on.click view-subscriptions

 $("#update_subscriptions").on('click', function(e) {
    e.preventDefault();
    var u = $("#update_subscriptions_url").attr("href");

    var vals = []
    $('input:checkbox[name="calendar[]"]').each(function() {
        if (this.checked) {
            vals.push(this.value);
        }
    });

    var form_data = {
      ajax : '1',
      calendar: vals,
    };

    $.ajax({
      type: 'POST',
      dataType: 'html',
      url: u,
      data: form_data,
      success: function( msg ) {

        get_month();
        $('#display-subscriptions-update').html(msg).fadeOut(6000);
        $('#display-subscriptions').html('');

      } // end success

    }); // end ajax

    return false;

  }); // end on.click view-subscriptions

}); // end document ready 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T14:03:18.967

This isn't just a change in the name of a function. The binding is immediate and concerns only the elements in the jQuery set at time of binding. Pass as argument the selector of the dynamic elements.

Instead of

```
 $("a.view_events").on('click', function(e) { 
```

Use

```
 $(document).on('click', "a.view_events", function(e) { 
```

(or better, replace `document` by an element that is present when you call the function and that will hold your `a.view_events` elements)

# java - fetching date from xml when format keeps on changing

> ID：14503158
> 
> 赞同：-4
> 
> 时间：2013-01-24T14:02:44.167
> 
> 标签：java

How do I fetch a date from a XML document when it keeps on changing it's format using Java:

sometimes it will be

```
<date> from 1:00 pm to 2<00 pm it was raining<\date> 
```

sometimes it will be

```
<date> between 1:00 pm and 2<00 pm it was raining<\date> 
```

sometimes it will be

```
<date> from 1:00 pm & 2<00 pm it was raining<\date> 
```

sometimes it will be

```
<date> from 1:00 to 2<00 pm it was raining<\date> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:08:53.067

假设您不能将文档更改为使用相同的格式，您将不得不使用正则表达式。有关更多详细信息，请参阅[模式文档](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)。

# iphone - CLLocationManager didUpdateToLocation not being called after some time

> ID：14503161
> 
> 赞同：4
> 
> 时间：2013-01-24T14:02:52.253
> 
> 标签：iphone, ios, cllocationmanager

I am trying to record a users location over time. If the user is on the move it works fine and the delegate method didUpdateToLocation is invoked reliably.However if the user is stationary and the app is running in the background then after some time, the delegate method is no longer invoked. To restart it, the app needs to be bought into the foreground. Once it is active the delegate method is invoked reliably again.

I initially thought that this could be due to the fact that the CLLocationManager object was declared within a ViewController, so I changed it to be declared within the AppDelegate but that did not help either.

I have also experimented with the distanceFilter property to no avail. I am currently setting it up using the following code from within a View controller. Note that the object itself is declared and initialized in the AppDelegate object.

```
 app.locationManager.delegate = self;
    app.locationManager.desiredAccuracy = kCLLocationAccuracyBest;
    app.locationManager.distanceFilter = kCLDistanceFilterNone;
    [app.locationManager startUpdatingLocation]; 
```

Has anyone else run into this issue? Any pointers would be appreciated. I have been struggling with this for a few days now.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-18T08:46:23.830

在 UpdateLocation 方法中添加此代码

```
- (void) updateLocation{
    self.locationManager = [[CLLocationManager alloc] init];
    locationManager.delegate = self;
    locationManager.pausesLocationUpdatesAutomatically = NO;
    locationManager.desiredAccuracy = kCLLocationAccuracyBest;

    if ([CLLocationManager locationServicesEnabled]) {
        [locationManager startUpdatingLocation];       
    } else {
        NSLog(@"Location services is not enabled");
    }
} 
```

还在方案中编辑设置：方案/编辑方案/选项/允许位置模拟已选中，但没有设置默认位置。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-25T09:24:45.033

iOS 6 引入了 CLLocationManager 属性 pausesLocationUpdatesAutomatically。设置 CLLocationManager 时需要将其设置为 NO，如下所述：http: [//www.stackoverflow.com/a/12781634/700769](http://www.stackoverflow.com/a/12781634/700769)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-24T14:05:15.517

您需要在应用 plist 文件的 UIBackgroundModes 中添加位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-05T22:07:11.920

```
if #available(iOS 9.0, *){
    locationManager.allowsBackgroundLocationUpdates = true;
} 
```

# c# - Good Practice mvc conditional button and its code

> ID：14503163
> 
> 赞同：4
> 
> 时间：2013-01-24T14:03:04.907
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3, razor

I'm coding an MVC3 application with ajax and I got a situation.

I have to show na Button only if an condition is true. Ok its easy to do.

```
@if (Model.AAA == ENUM.AAA)
    {
      <button>OK</button>
    } 
```

but this button going to call an ajax function.

Now my doubt is, WHERE A PLACE MY AJAX CODE?

if I do this:

```
@if (Model.AAA == ENUM.AAA)
    {
      function OK(){
          $.ajax({}); 
      }

      <button>OK</button>
    } 
```

it's sound ugly code!!! It's seens that the code it' not in the right place but the ajax code is "safe", I mean, the ajax code will only exist if the button exist.

but if I place my code in head section, An advanced user will be able to call the ajax function.

or if a make an @if clause to enclose the script, I will duplicate code like this

```
<head type="text/javascript">
   @if (Model.AAA == ENUM.AAA){
      function OK(){
         $.ajax({});
      }
   }
</head>
....
<body>
   ....
    @if (Model.AAA == ENUM.AAA)
    {
      <button onclick="OK()">OK</button>
    }
    ....
 </body> 
```

So, What is the best practice to face this situation, the best approach?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:09:53.073

听起来您几乎想使用 JavaScript 代码片段的存在/缺失来控制对服务器上调用的访问。*不要那样做*。

您的服务器应该*始终*评估该操作是否可以被相关用户调用。如果用户在他们的浏览器中保持页面打开，并且发生一些应用程序状态更改会阻止用户调用该操作......但他们的浏览器仍然显示按钮怎么办？或者，如果一个聪明的用户决定通过在源中四处寻找来玩弄你的 URL？

我建议将 javascript 放在一个公共位置并从那里调用它，因为这样可以将所有 Javascript 放在一起。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T14:09:03.217

只要在你的标记中有一个条件，就像你有：

```
@if (Model.AAA == ENUM.AAA)
{
  <button id="OkButton">OK</button>
} 
```

然后稍微调整你的 Javascript，这样你就不会包含 Razor（这样就可以将它提取到外部 JS 文件中）：

```
<head type="text/javascript">

    WireUpButton();

    function WireUpButton() {
        var okbutton = document.getElementById("OkButton");

        if (okbutton) {
            okbutton.onclick = OK;
        }
    }

    function OK(){
     $.ajax({});
  }
</head> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T15:44:27.400

服务器应该控制请求调用并检查正确的状态。@Andrew Barber 指出了这一点，但这不仅仅是让浏览器保持打开状态。但是高级用户可以与其他没有权限的人共享ajax请求，或者恶意使用它

试图更深入地回答这个问题，它可能不是这样一个简单的脚本，而是一个文件或一些 JS 库，也许你无法控制 ajax 正在访问的服务器。在这种情况下，您可能需要重复验证。

# nhibernate - Fluent NHibernate Mapping IDictionary - Key saves as null

> ID：14503165
> 
> 赞同：1
> 
> 时间：2013-01-24T14:03:09.103
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping, fluent-nhibernate-mapping

I have the following classes and mappings:

```
public enum VariationType
{
    Base = 1,
    RiderMain = 2,
    RiderSpouse = 3,
    RiderChild = 4,
    Family = 5,
    FamilyBase = 6
}

public class PlanParameter
{
    private IDictionary<VariationType, PlanParameterDefaultValue> _defaultValues;

    public PlanParameter()
    {
        ParameterContext = new Parameter();
    }

    public virtual Parameter ParameterContext { get; set; }

    public virtual object DefaultValue { get; set; }

    public virtual string DefaultValueString
    {
        get
        {
            return DefaultValue == null ? null : DefaultValue.ToString();
        }
        set
        {
            DefaultValue = value == null ? null : Convert.ChangeType(value, ParameterContext.Type);
        }
    }

    public virtual IDictionary<VariationType, PlanParameterDefaultValue> DefaultValues
    {
        get
        {
            if (_defaultValues == null)
                _defaultValues = new Dictionary<VariationType,  PlanParameterDefaultValue>();

            return _defaultValues;
        }
    }
}

class PlanParameterMap : ClassMap<PlanParameter>
{
    public PlanParameterMap()
    {
        Id().GeneratedBy.Identity().Column("ID");

        References(x => x.ParameterContext,"ParameterID");

        Map(x => x.DefaultValueString);

        HasMany(x=> x.DefaultValues)
            .Access.CamelCaseField(Prefix.Underscore)
            .KeyColumn("PlanParameterID").Inverse()
            .AsMap("Variation")
            .Cascade.AllDeleteOrphan();
    }
}

public class PlanParameterDefaultValue
{
    public virtual PlanParameter PlanParameter { get; set; }

    public virtual object DefaultValue { get; set; }

    public virtual string DefaultValueString
    {
        get
        {
            return DefaultValue == null ? null : DefaultValue.ToString();
        }
        set
        {
            DefaultValue = value == null ? null : Convert.ChangeType(value, PlanParameter.ParameterContext.Type);
        }
    }
}

class PlanParameterDefaultValueMap : ClassMap<PlanParameterDefaultValue>
{
    public PlanParameterDefaultValueMap()
    {
        Id().GeneratedBy.Identity().Column("ID");

        Map(x => x.DefaultValueString);

        References(x => x.PlanParameter).Column("PlanParameterID");
    }
} 
```

My problem is very specific to the mapping of the

```
IDictionary<VariationType, PlanParameterDefaultValue> DefaultValues 
```

The enum for some reason will not save, all that's saved in it's column is null my only solution so far was to add a VariationType Property to the Entity and map it with a lambda formula, but i really don't need the VariationType in the Entity

Am i doing something wrong?

Thanks very much

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:29:19.193

Inverse() 告诉 NHibernate “映射到”实体将负责保存密钥，并且集合所有者不应保留密钥。尝试删除该标志。

# google-maps-android-api-2 - The sample of Google Maps Android API v2 com.example.mapdemo can not find file "R.java"

> ID：14503168
> 
> 赞同：5
> 
> 时间：2013-01-24T14:03:16.843
> 
> 标签：google-maps-android-api-2

Today I have read the document of Google Maps Android API v2, it said the project of `android-sdk\extras\google\google_play_services\samples\maps` can run, but after I imported into eclipse and set the libraries of `android-support-v4.jar` and google-play-services.jar correctly, `import com.example.mapdemo.R;` in `FeatureView.java` (at line 24) can not find the file `R.java.`

almost all the java file in `com.example.mapdemo` need class "R", for example, the file BasicMapActivity.java need R in line 41 "`setContentView(R.layout.basic_demo);`" and line 71 `mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap();`" can someone tell me how to find the class "R"?

R

```
.java can not create automatically because the file multimap_demo.xml have some errors in
<br><br>    &lt;fragment
<br>      android:id="@+id/map3"
<br>      android:layout_width="match_parent"
<br>      android:layout_height="match_parent"
<br>      android:layout_weight="0.5"
<br>      class="com.google.android.gms.maps.SupportMapFragment"
<br>      map:cameraTargetLat="48.85"
<br>      map:cameraTargetLng="2.35"
<br>      map:cameraZoom="8"/&gt;
<br><br> 
```

eclipse said "cameraTargetLat", "cameraTargetLng" and "cameraZoom" can not recognized. The error information:

```
Multiple annotations found at this line:
    - error: No resource identifier found for attribute 'cameraTargetLat' in package 'com.example.mapdemo'
    - error: No resource identifier found for attribute 'cameraTargetLng' in package 'com.example.mapdemo'
    - error: No resource identifier found for attribute 'cameraZoom' in package 'com.example.mapdemo'

I do not know why.

If I change the code like this:
<br><br>    &lt;fragment
<br>      android:id="@+id/map3"
<br>      android:layout_width="match_parent"
<br>      android:layout_height="match_parent"
<br>      android:layout_weight="0.5"
<br>      class="com.google.android.gms.maps.SupportMapFragment"/&gt;
<br><br> 
```

the errors disappeared, but i do not know if it can run.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-14T22:39:45.333

将 maps_attr.xml 文件从库项目复制到项目的 values 文件夹中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T11:20:30.763

您还应该导入 google-play-services_lib 项目 (/extras/google/google_play_services/libproject/google-play-services_lib) - 在识别出 cameraTargetLat 和其他项目并生成 R.java 之后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-07T10:27:12.920

我解决了它只是将以下元数据添加到 AndroidManifest.xml

```
 <meta-data
    android:name="com.google.android.gms.version"
    android:value="@integer/google_play_services_version" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-02T10:42:32.063

1，将两个外部 jar 包含到项目
2，将 \extras\google\google_play_services\libproject\google-play-services_lib\res\values\maps_attrs.xml 复制到项目值文件夹
3，将 google-play-services_lib 复制到工作区看起来没有必要在我的测试中。

更新： [java.lang.NoClassDefFoundError: com.google.android.gms.R$styleable 在 android](https://stackoverflow.com/questions/15894143/java-lang-noclassdeffounderror-com-google-android-gms-rstyleable-in-android)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-19T09:35:10.047

`/extras/google/google_play_services/libproject/google-play-services_lib`您应该在项目中作为库导入。

1.  在 处导入一个已有的android项目`/extras/google/google_play_services/libproject/google-play-services_lib`，但记得COPYING IT TO WORKSPACE（重要，可能它原来所在的路径出现错误）
2.  查看项目的属性->Android 设置并添加库“ `google-play-services`”
3.  请记住将`android-support-v4.jar`&添加`google-play-services.jar`到您的外部 JAR

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-22T05:47:02.713

可能这个答案可以帮助某人。
这是由于一个愚蠢的错误，两个项目，即。`Sample project of Map`并且`Google play service`项目必须位于同一目录中，否则将无法正确引用[![在此处输入图像描述](../Images/e6d7594bd6e9ca38b827a50859fbcb99.png)](https://i.stack.imgur.com/kKdTV.png)

您需要将两个项目的项目复制到工作场所，或者如果您不想复制，所以不要为这两个项目都这样做，这是故障。如果你做得正确，那么你会发现这个

[![在此处输入图像描述](../Images/7d8732b7ad3146c427086fb8faa27c70.png)](https://i.stack.imgur.com/HdB9h.png)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-25T11:30:48.463

您必须`xmlns:map="http://schemas.android.com/apk/res-auto"`在布局 xml 中包含使用`map`元素。

R 文件由 Eclipse**自动生成**，您可以在`gen`目录中找到它。**永远不要编辑**这个文件！在某些情况下，您会发现不止一个 R 文件，例如当您向项目添加库时，例如`google-play-services_lib`. 你总是可以在这样的代码中引用这个文件......

```
mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(com.your.package.R.id.map)).getMap(); 
```

如果你想配置你的地图，可以通过[XML Attributes](https://developers.google.com/maps/documentation/android/map#using_xml_attributes)或[Programmatically](https://developers.google.com/maps/documentation/android/map#programmatically)来实现。

# database - Creating A Log Of Files In A Folder and update into table

> ID：14503174
> 
> 赞同：0
> 
> 时间：2013-01-24T14:03:24.827
> 
> 标签：database, logging

Can anyone help me to build a table that lists all files in a specified folder, so whenever a file is copied to that folder the table should update and make a log of files?

I need the list to retain the names, even if the file is moved from that folder or deleted. Later the data would be deleted by a scheduler.

Also I need the table to record the time exactly when the file was copied into that folder and not the modification or creation time.

I am using windows 7; how can I build a system with my desired behaviour?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:09:24.603

只需打开[Windows 文件审核](http://www.youtube.com/watch?v=8Lot58yAEKM)，对于该文件夹，youtube 视频将带您完成整个过程。

Microsoft 在其[techNet](http://technet.microsoft.com/en-us/library/ee692659.aspx)站点上提供了有关如何使用[LogParser](http://support.microsoft.com/kb/910447)工具从事件日志数据库中提取安全事件的信息。

注意：管理员问题确实应该发布到**[超级用户](https://superuser.com/about)**站点。

# c# - asp.net 网站中的 7-zip 压缩

> ID：14503176
> 
> 赞同：3
> 
> 时间：2013-01-24T14:03:34.330
> 
> 标签：c#, asp.net

我正在尝试使用 7-zip 压缩来创建示例文件的 zip，如示例 [http://www.dotnetperls.com/7-zip](http://www.dotnetperls.com/7-zip) 如 URL 所述，“您必须指定“如果较新则复制”或“始终复制”将可执行文件等文件复制到输出目录。”

我发现当我在 VS 项目中使用此代码时，当我在属性窗口中看到 7za.exe 的属性时，我确实可以选择指定“如果较新则复制”

但是当我在 VS 网站中使用时，我找不到这个选项。结果，当我调试这个程序时，它说它找不到7za.exe

```
string sourceName = "pdfSample.pdf";
string targetName = "pdfSample.gz";

ProcessStartInfo p = new ProcessStartInfo();
p.FileName = "7za.exe";

p.Arguments = "a -tgzip \"" + targetName + "\" \"" + sourceName + "\" -mx=9";
p.WindowStyle = ProcessWindowStyle.Hidden;

try
{
    Process x = Process.Start(p);
    x.WaitForExit();
}
catch (Exception ex)
{
    Console.Write(ex.ToString());
} 
```

知道为什么在 VS 网站的情况下没有“如果更新则复制”选项吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T14:09:34.203

您需要包含 7za.exe 的路径。请记住，网页是在匿名用户或应用程序池的帐户下运行的。这些帐户还需要对 7zip 的路径和 exe 具有权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:18:40.923

就个人而言，我永远不敢从 ASP.NET 应用程序中启动新进程。

原因是我不知道该进程是否会显示某些窗口或执行其他操作，例如单实例。

如果我必须解决您的要求，我会[使用类库来处理 7zip 文件](http://sevenzipsharp.codeplex.com/)。

# java - Maven: packaging & module dependencies

> ID：14503179
> 
> 赞同：0
> 
> 时间：2013-01-24T14:03:41.340
> 
> 标签：java, maven, intellij-idea

I have a maven project that consists of a couple of modules. The main structure and setup is this:

*   `/project/pom.xml`: packaging=pom, lists all sub-modules, version: `TRUNK-SNAPSHOT`
*   `/project/core-module/pom.xml`: packaging=jar
*   `/project/war-module/pom.xml`: packaging=war, depends on `core-module` with `${project.version}`

I use IntelliJ for development if that somehow matters.

When I now develop/run/debug the `war-module` and meanwhile I change code in the `core-module` things get out of hand. The running `war-module` application (running via `jetty:run-exploded`) uses the `core-module` which is "installed" in my local `~/.m2/ repository` instead of the current build. It doesen't matter if I do a "rebuild project" in IntelliJ or a `mvn clean` before running.

My question is: do I have to `mvn install` each time, can I circumvent the installed packages or do I have to change packaging options?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:12:37.173

长话短说，答案是：是的，在多模块项目中，您必须`mvn install`每次都运行，以便`war-module`编译您的依赖项并将其安装在本地存储库中。

但是，对于本地测试，我通常建议使用 IDE 功能来测试我们的本地更改。使用 IntelliJ 非常容易配置，它支持许多不同的应用程序服务器。

这样做的原因是：想象一下在一个大型团队中工作，使用企业共享存储库来保存您的公共依赖项，而无需将它们发布到 Maven 中心。如果您的任何同事对`core-module`、提交它们并通过您的内部共享 repo 使它们可用，那么 Maven 将下载该依赖项，然后用于运行 Jetty 插件。

这样做的好处是您将使用这些依赖项的最新版本进行测试，坏处是这些依赖项的代码与工作副本中的代码不同。

# java - Embed chat in web application

> ID：14503182
> 
> 赞同：1
> 
> 时间：2013-01-24T14:03:55.183
> 
> 标签：java, gwt, livechat

I have my existing gwt web application running and deployed properly Now I want to embed the chat in my application. How should i go about it? Is there any easy way, or sample which i can just add as an api and start using the chat application? My web application have the goggle authentication enabled so i want to have all the user who are logged in my application to chat with each other.

Thanks in advance,

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:16:39.370

因为你想嵌入它，所以它会很容易......请参阅[https://developers.google.com/talk/?hl=nl](https://developers.google.com/talk/?hl=nl)

# java - 我在尝试 Sikuli Java API 测试示例时遇到异常 jniopencv_core.dll：找不到依赖库错误

> ID：14503183
> 
> 赞同：2
> 
> 时间：2013-01-24T14:03:56.727
> 
> 标签：java, maven, image-processing, java-native-interface, sikuli

我想测试 Sikuli Java API，具体来说是[http://code.google.com/p/sikuli-api/wiki/SikuliWebDriver](http://code.google.com/p/sikuli-api/wiki/SikuliWebDriver)。使用maven添加依赖，即

```
<dependency>
    <groupId>org.sikuli</groupId>
    <artifactId>sikuli-webdriver</artifactId>
    <version>1.0.1</version> 
```

我在 64 位 Windows 7 上使用 IntelliJ Idea 11 社区版。项目中使用了 32 位 JDK 6。

我尝试使用项目站点上描述的开箱即用的 maven 依赖项（仍然记得，应该有一些本机 .dll 安装，当我们仅使用 maven 依赖项时不会发生）。在运行时，我在线程“main”java.lang.UnsatisfiedLinkError: C:\Users\User\AppData\Local\Temp\javacpp26205597583997\jniopencv_core.dll: Can't finddependent library

然后我下载了sikuli-r930-win32，安装到C:\SikuliX。然后添加 SIKULI_HOME 系统变量，将路径设置为 C:\SikuliX。但在运行时仍会收到相同的错误消息。

请帮忙！只是想检查什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:20:29.293

[通过http://DependencyWalker.com](http://DependencyWalker.com)检查 opencv_core240.dll 丢失（可能是常见的 Windows 7 错误）。从[https://code.google.com/p/myrobotlab/source/browse/trunk/myrobotlab/thirdParty/repo/net.sourceforge.opencv/opencv/2.4.0/x86.64.windows/opencv_core240下载后.dll?r=711](https://code.google.com/p/myrobotlab/source/browse/trunk/myrobotlab/thirdParty/repo/net.sourceforge.opencv/opencv/2.4.0/x86.64.windows/opencv_core240.dll?r=711)和其他.dll一起放到C:\SikuliX\libs\，问题就解决了。

# macos - 使 NSCollectionViewItems 在 NSCollectionView 中可重新排列

> ID：14503186
> 
> 赞同：0
> 
> 时间：2013-01-24T14:04:04.053
> 
> 标签：macos, cocoa

过去三天我一直在尝试创建一个带有 4 个图标的单行，您可以通过拖动重新排列它们。我尝试了很多不同的方法，到目前为止 NSCollectionView 是最好的方法。我现在可以通过编程方式创建 NSCollectionView 并使用 NSArray 向其中添加项目。但是，我仍然无法重新排列图标/NSCollectionViewItems。我现在很困惑，希望你们中的一个人能指出我正确的方向。

我在stackoverflow（以及整个互联网）上阅读了很多类似的问题。很明显，我需要从 NSCollectionViewDelegate 添加方法：

```
- (BOOL)collectionView:(NSCollectionView *)collectionView writeItemsAtIndexes:(NSIndexSet     *)indexes toPasteboard:(NSPasteboard *)pasteboard

-(BOOL)collectionView:(NSCollectionView *)collectionView canDragItemsAtIndexes:(NSIndexSet *)indexes withEvent:(NSEvent*)event

-(BOOL)collectionView:(NSCollectionView *)collectionView acceptDrop:(id < NSDraggingInfo >)draggingInfo index:(NSInteger)index dropOperation:(NSCollectionViewDropOperation)dropOperation

-(NSDragOperation)collectionView:(NSCollectionView *)collectionView validateDrop:(id < NSDraggingInfo >)draggingInfo proposedIndex:(NSInteger *)proposedDropIndex dropOperation:(NSCollectionViewDropOperation *)proposedDropOperation

-(NSArray *)collectionView:(NSCollectionView *)collectionView namesOfPromisedFilesDroppedAtDestination:(NSURL *)dropURL forDraggedItemsAtIndexes:(NSIndexSet *)indexes 
```

我已将这些（带有返回值）添加到我的 NSCollectionView 子类中，但我仍然一无所获。所以我现在的问题是：我应该创建 NSCollectionViewDelegate 的子类并在那里覆盖这些方法吗？

但这真的朝着正确的方向发展吗？（你可能已经注意到，我是一个 Cocoa 初学者，所以我现在很迷茫，因为我发现 NSCollectionView 类非常混乱。）

提前致谢， 弗兰斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:23:11.670

这不在子类中。您将在委托中实现这一点（通常是向集合视图提供内容的控制器）。将控制器设置为集合视图的委托（它要求做出决策的对象）并在该控制器中实现这些方法。

[一些非常重要的阅读。](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/Delegation.html)

# c# - 适用于 Windows Phone 的 MSAF 谷歌分析

> ID：14503189
> 
> 赞同：0
> 
> 时间：2013-01-24T14:04:09.253
> 
> 标签：c#, google-analytics, windows-phone-7.1

我使用 MSAF Google Analytics for Windows Phone。我已经配置了它，但它似乎不起作用（即使 24 小时后我也看不到任何活动）

我将提琴手连接到 WP 模拟器，并且有一些对 GA 服务器的请求，例如：

```
GET http://www.google-analytics.com/__utm.gif?AnalyticsVersion=4.3&utmn=794664447&utmhn=Windows%20Phone&utmni=1&utmt=event&utme=5(Login*Button%20tapped*From%20the%20Windows%20Phone%20App)(0)&utmcs=UTF-8&utmul=en&utmhid=987145401&utmac=UA-37521176-1&utmcc=__utma%3D1.98714540100145214523.1359035758.1359035758.1359035758.1359035759%3B%2B__utmz%3D1.1359035758.1.1.utmcsr%3D(direct)%7Cutmccn%3D(direct)%7Cutmcmd%3D(none)%3B& HTTP/1.1
Accept: */*
Referer: file:///Applications/Install/64AD5A45-B45E-4160-B9D4-145B47C7F131/Install/
Accept-Encoding: identity
User-Agent: Tracker/1.0 (Windows Phone; 7.10.7720; Windows Phone)
Host: www.google-analytics.com
Proxy-Connection: Keep-Alive 
```

并且有回应：

```
HTTP/1.1 200 OK
Via: 1.1 PGSRTR02
Connection: Keep-Alive
Proxy-Connection: Keep-Alive
Content-Length: 35
Age: 14844
Expires: Wed, 19 Apr 2000 11:43:00 GMT
Date: Thu, 24 Jan 2013 09:48:43 GMT
Content-Type: image/gif
Server: GFE/2.0
X-Content-Type-Options: nosniff
Pragma: no-cache
Last-Modified: Wed, 21 Jan 2004 19:51:30 GMT
Cache-Control: private, no-cache, no-cache=Set-Cookie, proxy-revalidate

GIF89a 
```

我尝试了其他一些框架 - 它们似乎都在发送请求，但我在 Google 分析网站上看不到任何活动

重点是什么？非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T10:34:45.977

您应该在 Google Analytics 中创建一个作为网站而不是应用程序的帐户。Google Analytics 不支持 WP 应用

# c# - 不同窗口之间的 WPF 共享和更新列表

> ID：14503199
> 
> 赞同：0
> 
> 时间：2013-01-24T14:04:38.567
> 
> 标签：c#, wpf

我正在尝试在 WPF 中创建一个调度程序。我在主窗口中有一个中央静态列表，由后台工作人员在加载时初始化。主窗口中还有一个调度定时器，每次列表更改时都会重新计算其间隔。

```
public static List<ListViewcls> TODOdatalst = null;
public static void RefreshdblList()
{
    if (ApplicationState.GetValue<bool>("dbDetected"))
    {
        TODOdatalst = DataAccess.ReadAllTODODataFromDataBase();
        InitialiseDailyReminders();
    }
} 
```

现在有另一个窗口，其中包含一个列表视图，该列表视图绑定到一个可观察集合，该集合派生自主窗口中的静态列表。每当从列表中添加、更新或删除项目时，两个窗口中的列表都会通过静态函数手动刷新。

```
private static readonly ObservableCollection<ListViewcls> TO_DOViewlst = new ObservableCollection<ListViewcls>();
public void RefreshView()
{
    MainWindow.RefreshdblList();
    if (MainWindow.TODOdatalst != null)
        InitialiseListView(MainWindow.TODOdatalst);
    else
        InitialiseListView(DataAccess.ReadAllTODODataFromDataBase());
} 
```

那么这种方法是否正确？它现在有效，但假设将来，我还有一个窗口也将访问列表，但随后我将管理 3 个窗口之间的数据刷新......这不正确。任何人都可以提出一些更好的方法，即我可以保留一个中央存储库，并且每当它更新时，所有其他列表都会更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:18:37.890

当使用 MVVM 时，可以选择在多个窗口之间使用一个 ViewModel（获取并保存用作窗口/页面的数据上下文的数据的类），这种情况很常见。

我会选择在所有窗口之间共享实例化的 ViewModel（或包含您的数据的类），并在创建窗口期间将其传入，以使窗口/页面的数据上下文绑定到该 VM。这样，卫星窗口使用与主窗口相同的数据，而无需执行任何更新技巧，如图所示。此外，任何新窗口都只需绑定到其他人绑定的可观察集合。

# ios - Titanium 模块开发的可用宏

> ID：14503202
> 
> 赞同：1
> 
> 时间：2013-01-24T14:04:46.267
> 
> 标签：ios, macros, titanium, appcelerator, titanium-modules

我正在为基于 Titanium 的 iOS 应用程序开发一些模块。

我发现了一些有用的宏，例如：

```
ENSURE_SINGLE_ITEM(args,type)    - for type casting
ENSURE_UI_THREAD_0_ARGS          - for running the function on main thread
ENSURE_UI_THREAD_1(arg)          - for running the function on main thread with argument 
```

这些宏在模块开发中帮助了我很多。

我很想知道是否有任何其他宏可用于此类目的？

我搜索了很多，但得到了更多类似的东西：

```
NUMINT      - Equivalent to [NSNumber numberWithInt:value]

NUMBOOL     - Equivalent to [NSNumber numberWithInt:value]

NUMLONG     - Equivalent to [NSNumber numberWithLong:value]

NUMLONGLONG - Equivalent to [NSNumber numberWithLongLong:value]

NUMDOUBLE   - Equivalent to [NSNumber numberWithDouble:value]

NUMFLOAT    - Equivalent to [NSNumber numberWithFloat:value] 
```

还有其他可用的宏吗？我在哪里可以找到这些宏的文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:20:09.933

`ENSURE_UI_THREAD_1(arg)`是另一个。

在 iOS 开发指南中搜索“宏”。所有你指出的，加上我指出的，都在那里。

[https://wiki.appcelerator.org/display/guides/iOS+Module+Development+Guide](https://wiki.appcelerator.org/display/guides/iOS+Module+Development+Guide)

# c# - WPF MenuItem Icon 的图像应该是什么大小和格式？

> ID：14503204
> 
> 赞同：3
> 
> 时间：2013-01-24T14:04:56.693
> 
> 标签：c#, .net, wpf, xaml

WPF MenuItem 图标应该是什么大小和格式才能看起来正确？

现在我有

```
<ContextMenu>
  <MenuItem Header="Camera">
    <MenuItem.Icon>
      <Image Source="images/camera.png" />
    </MenuItem.Icon> 
```

但是在菜单中，图标溢出了边距，看起来很糟糕。

* * *

令人沮丧的是，文档没有提供此信息。 [System.Windows.Controls.MenuItem.Icon](http://msdn.microsoft.com/en-us/library/system.windows.controls.menuitem.icon.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:17:45.823

我认为图像的正确尺寸是`20px`.

只需指定图像的`Width`和`Heigth`：

用这个：

```
<MenuItem.Icon>
  <Image Source="images/camera.png" 
        Width="20"
        Height="20" />
</MenuItem.Icon>
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:13:54.457

这是代码：

```
<MenuItem>
   <MenuItem.Header>
      <StackPanel>
         <Image Width="20" Height="20" Source="PATH to your image" />
       </StackPanel>
   </MenuItem.Header>
</MenuItem> 
```

您也可以尝试拉伸 [Image.Stretch 属性](http://msdn.microsoft.com/en-us/library/system.windows.controls.image.stretch.aspx)

# jquery - 如何根据单选按钮的选择更新整数值？

> ID：14503205
> 
> 赞同：-1
> 
> 时间：2013-01-24T14:05:04.223
> 
> 标签：jquery, html, radio-button

这应该是一个相当简单的问题，但我不知道如何解决它，也没有找到任何合适的答案来解决我正在尝试做的事情。

我有一个带有一些文本的 html 文件，用非常简单的术语来说，有一个字符串和两个单选按钮。所以是这样的：

```
 <html>
    <head>
      <title>Some title</title>
      <script src="jquery.js"></script>
    </head>
    <body>

      <div id="main">
         <p> 10 GB </p>
      </div>

      <div class="radioButtons" style="width: 100%">
        <p><input type="radio" name="radioLessGB" value="Less" align="absmiddle"/> I want less gigabytes(-3GB) </p>
            <p><input type="radio" name="radioMoreGB" value="More" align="absmiddle"/> I want more gigabytes (+5GB)</p>
      </div>
   </body>
   </html> 
```

我需要一种方法来更新文本的值（即“10 GB”），具体取决于所选的单选按钮。**特别是，当用户选择第一个单选按钮时，上述字符串中的整数值应立即**减少 3 （即“10 GB” - 3 = “7 GB”），如果用户选择第二个单选按钮，整数值应加 5（即“10 GB”+ 5 = “15 GB”）。

为此，我想我必须解析字符串“10 GB”以获取整数值，然后根据选择的单选按钮添加或减去。然后用结果更新字符串。我不希望用户点击某种“提交”按钮，当用户在单选按钮之间切换时，数字的更新应该“即时”完成。

我认为这可以用 jQuery 来完成，我只是不知道该怎么做。有经验的人可以帮助提供简单解决方案的示例代码吗？！？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:12:41.980

使用[jQuery](http://jquery.com/)，您可以简单地执行以下操作。试试[**这里的演示**](http://jsfiddle.net/HrHLw/1/)

```
$("input").change(function() {
    $("#main").text((10 + parseInt($(this).val())) + " GB");
}); 
```

如果您需要在**纯 javascript**中执行此操作，请使用以下内容。在这里尝试[**演示**](http://jsfiddle.net/HrHLw/1/)

```
function valChanged(ele) {
    document.getElementById('main1233').textContent = (10 + parseInt(ele.value)) + " GB";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:21:41.890

我不会在这里给出完整的代码答案，只是帮助你的指针：

1.  不要解析字符串来执行计算，只需使用数字（或至少是数字字符串）。将 的值`10`放在一个特殊`data-xxx`属性中。您可以稍后通过以下方式访问这些数据[`$(el).data('xxx')`](http://api.jquery.com/data/)：

    ```
    <div id="main" data-value="10"> 
    ```

2.  对`<input>`元素执行相同操作以保持“delta”值，例如`-3`和`+5`/或将它们各自的值与[`.val()`](http://api.jquery.com/val/).

3.  如果单击任何单选按钮（使用 检测事件[`.on('change', fn)`](http://api.jquery.com/on/)），则将选择的任何增量值添加到 内部的值`#main`。

4.  使用显示总和的格式化值[`.text(sum + ' GB')`](http://api.jquery.com/text/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T14:15:32.040

jQuery 是完成这个相当简单的任务的一种途径。你会想要隔离你的#main div。然后使用 jQuery 来获取当前值，并使用单选按钮的 onClick （或在 jQuery: 中）进行数学运算`.click(function()`。我建议将单选选项的值放在输入标记中。

签出：[jQuery中的简单数学](https://stackoverflow.com/questions/7971292/simple-math-in-jquery)

# serialization - JsonConvert.DeserializeObject - 处理空字符串

> ID：14503206
> 
> 赞同：1
> 
> 时间：2013-01-24T14:05:07.920
> 
> 标签：serialization, compact-framework, json.net, deserialization

我正在使用 Json.NET 序列化要发送到**紧凑型框架 3.5 设备**的对象（我很幸运）。

我在紧凑型设备上的课程是：

```
public class Specification
{
        public Guid Id { get; set; }
        public String Name { get; set; }
        public String Instructions { get; set; }
} 
```

返回发送到设备的 Json 是（注意 null 指示）：

```
string json = @"{""Name"":""Test"",""Instructions"":null,""Id"":""093a886b-8ed4-48f0-abac-013f917cfd6a""}"; 
```

...并且用于反序列化 json 的方法是...

```
var result = JsonConvert.DeserializeObject<Specification>(json); 
```

在服务器上，我使用以下内容创建 Json：

```
var serializer = new JsonSerializer();
serializer.Formatting = Formatting.None;
serializer.Serialize(context.HttpContext.Response.Output, this.Data); 
```

问题在于，在紧凑框架上，它无法将值放入 result.Instructions 中，这会在稍后在代码中引用它时导致空引用。

我正在使用 Newtonsoft.Json.Compact v3.5.0.0（我认为这是最新版本），而在服务器上我使用的是 Newtonsoft.Json 4.5.0.0。

**问题**

我怎么能：

a) 更改服务器代码以在字符串为空的地方粘贴“”而不是空值。

或者

b) 更改紧凑的框架代码以能够处理空值字符串。

**我尝试过的事情**

我一直在查看 Json.Net 的文档/示例，并尝试了很多东西，比如实现 a`DefaultContractResolver`和 custom `JsonContract`。也许答案就在其中，但我在这个级别上对 Json.Net 缺乏了解并没有帮助！

**更多信息**

我使用 System.Runtime.Serialization.Json.DataContractJsonSerializer 进行服务器端序列化，它确实在空字符串的情况下生成引号。不幸的是，我需要更多的序列化灵活性，这就是我开始使用 Json.Net 的原因。

任何提示/提示表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T10:56:34.783

好的 - 没有答案，但是昨天下午我一直在搜索，我上床睡觉，今天早上再次搜索以找到：[Serializing null in JSON.NET](https://stackoverflow.com/a/8835237/192999)，这几乎回答了我的问题。

# ios - Cocos2d + box2D 从世界中移除精灵

> ID：14503207
> 
> 赞同：2
> 
> 时间：2013-01-24T14:05:08.130
> 
> 标签：ios, xcode, cocos2d-iphone, box2d

应该很容易，但我没有找到...

我的世界中有很多精灵，在某个时刻 X，我需要销毁多个精灵。

使用下面的代码，我可以通过标签号删除这个精灵：

```
CCSprite *sprite = (CCSprite *)[self getChildByTag:TagFromMyArray];
[self removeChild:sprite cleanup:YES]; 
```

问题是留在屏幕上的身体......并在下一个滴答声中使游戏崩溃。

使用下面的代码，我可以找到“a body”：

```
for(b2Body *b = world->GetBodyList(); b; b=b->GetNext()) {
        if (b->GetUserData() != NULL) {
            CCSprite *sprite = (CCSprite *)b->GetUserData();
            if (sprite.tag = [[[myGrille.grille objectAtIndex:point.x] objectAtIndex:point.y]blockTag]) {
                [self removeChild:sprite cleanup:YES];
                world->DestroyBody(b);
            }
        }
    } 
```

问题是它移除了世界上的每一个人。

ba 不是指一个独特的身体吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:38:03.647

我在这附近呆了几个小时，这是一个小错误......

只需在最后一个 if 条件中将“=”替换为“==”。

# angularjs - 使用 AngularJS 跟踪当前选定的项目

> ID：14503210
> 
> 赞同：11
> 
> 时间：2013-01-24T14:05:17.067
> 
> 标签：angularjs

我是 AngularJS 的新手，找不到任何合适的答案。我的应用程序当前包含通过 Angular 显示的项目列表。还有一个显示当前选中项名称的标签，以及一个允许修改当前选中项名称的输入框。

我不知道如何同时：

1.  允许选中一个item，触发更新label和输入框文字显示新选中item的名字
2.  允许编辑输入框中的名称，触发更新显示当前显示的项目名称的标签
3.  对名称的编辑应反映在原始模型项中

目前，我正在尝试通过针对该项目的标志来跟踪哪个项目是当前的，这不是我想要的。理想情况下，我将`currentItem`在下面替换为直接引用 with 中的`items`项目`isCurrent=true`。

当前项目名称标签：

```
`<div id="CurrentItem" data-ng-model="currentItem">{{currentItem.name}}</div>` 
```

当前项目名称输入框：

```
`<input id="ItemName" type="text" data-ng-model="currentItem" value="{{currentItem.name}}" />` 
```

显示所有项目：

```
<div data-ng-repeat="item in items" data-ng-click="changeItem(item)">`
    <img src="images/ItemIcon.png">
<div>{{item.name}}</div> 
```

控制器：

```
var CoreAppController = function($scope, $location) {
   $scope.changeItem = function(item) {
        var length = $scope.items.length;
        while(length-- ) {
            $scope.items[length].isCurrent = false;
        }
        $scope.currentItem = item;
        $scope.items.indexOf(item).isCurrent = false;
    }

    $scope.createItem = function(name, layout) {
        $scope.items.push({ id: $scope.items.length + 1,
                            name: name,
                            isCurrent: false
        });
    }

    // Initialisation
    $scope.items = [];
    $scope.createItem("Item 1");
    $scope.createItem("Item 2");

    $scope.items[0].isCurrent = true;
    $scope.currentItem = $scope.items[0];

} 
```

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-24T14:45:38.780

我不确定您当前的代码，[但这里有一个模型，可以满足您的要求](http://plnkr.co/edit/3f0f1e0qTJ7KVvYFoiFp?p=preview)。

JS

```
app.controller('MainCtrl', function($scope) {
  $scope.items = [
    { name: 'foo' },
    { name: 'bar' },
    { name: 'test' }
    ];
    $scope.editing = null;
    $scope.editItem = function(item) {
      $scope.editing = item;
    }
}); 
```

和标记

```
 <body ng-controller="MainCtrl">
    <ul>
      <li ng-repeat="item in items">
        {{item.name}}
        <a ng-click="editItem(item);">edit</a>
      </li>
    </ul>
    <div ng-show="editing">
       <input type="text" ng-model="editing.name"/>
       <span>{{editing.name}}</span>
    </div>
  </body> 
```

希望这会有所帮助。如果您需要更多描述，请告诉我。

# asp.net-mvc-4 - ASP.NET Web Api System.Runtime.Serialization.SerializationException

> ID：14503213
> 
> 赞同：2
> 
> 时间：2013-01-24T14:05:24.207
> 
> 标签：asp.net-mvc-4, xml-serialization, asp.net-web-api

我有一个完全正常工作的 MVC4 网站，今天我试图向其中添加一个 Web API，但没有成功。

```
<Error>
<Message>An error has occurred.</Message>
<ExceptionMessage>
The 'ObjectContent`1' type failed to serialize the response body for content type 'application/xml; charset=utf-8'.
</ExceptionMessage>
<ExceptionType>System.InvalidOperationException</ExceptionType>
<StackTrace/>
<InnerException>
<Message>An error has occurred.</Message>
<ExceptionMessage>
Type 'System.Data.Entity.Infrastructure.DbQuery`1[[LeasingWeb.Models.Car, LeasingWeb, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]' with data contract name 'ArrayOfCar:http://schemas.datacontract.org/2004/07/LeasingWeb.Models' is not expected. Consider using a DataContractResolver or add any types not known statically to the list of known types - for example, by using the KnownTypeAttribute attribute or by adding them to the list of known types passed to DataContractSerializer.
</ExceptionMessage>
<ExceptionType>
System.Runtime.Serialization.SerializationException
</ExceptionType>
<StackTrace>
at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeAndVerifyType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, Boolean verifyKnownType, RuntimeTypeHandle declaredTypeHandle, Type declaredType) at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithXsiType(XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle objectTypeHandle, Type objectType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle, Type declaredType) at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle) at WriteCarDBToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , ClassDataContract ) at System.Runtime.Serialization.ClassDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context) at System.Runtime.Serialization.XmlObjectSerializerWriteContext.WriteDataContractValue(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle) at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithoutXsiType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle) at System.Runtime.Serialization.DataContractSerializer.InternalWriteObjectContent(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver) at System.Runtime.Serialization.DataContractSerializer.InternalWriteObject(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver) at System.Runtime.Serialization.XmlObjectSerializer.WriteObjectHandleExceptions(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver) at System.Runtime.Serialization.DataContractSerializer.WriteObject(XmlWriter writer, Object graph) at System.Net.Http.Formatting.XmlMediaTypeFormatter.<>c__DisplayClass7.<WriteToStreamAsync>b__6() at System.Threading.Tasks.TaskHelpers.RunSynchronously(Action action, CancellationToken token)
</StackTrace>
</InnerException>
</Error> 
```

我的对象是这些：

```
public class Image
{
    public int ID { get; set; }

    [Required(ErrorMessage="Please select a car")]
    [ForeignKey("Car")]
    public int CarID { get; set; }

    [DisplayName("Picture")]
    [Required]
    [FileExtensions(ErrorMessage = "Please specify a valid image file (.jpg, .jpeg, .gif or .png)", Extensions = ("jpg,png,jpeg"))]
    public string Name { get; set; }

    public virtual Car Car { get; set; }
}

public class Car
{
    public int ID { get; set; }

    [Required]
    [DisplayName("Car Model")]
    public string Name { get; set; }

    [Required]
    public string Company { get; set; }

    [Required]
    [DisplayName("Car Type")]
    [ForeignKey("CarType")]
    public int CarTypeID { get; set; }

    [Required]
    [Range(1,5)]
    [DisplayName("Number Of Doors")]
    public float NumDoors { get; set; }

    [Required]
    [Range(0, Int32.MaxValue)]
    public float Acceleration { get; set; }

    public virtual CarType CarType { get; set; }
}

public class CarType
{
    [Key]
    public int ID { get; set; }

    [Required]
    [DataType(DataType.Text)]
    public string Type { get; set; }
} 
```

还有一个同时拥有它们的对象：

```
public class CarDB
{
    public IQueryable<Car> Cars { get; set; }
    public IEnumerable<Image> Images { get; set; }
} 
```

API 控制器：

```
public CarDB Get(int ID = -1)
{
    CarDB car = new CarDB();
    if (ID == -1)
    {
        car = new CarDB { Cars = db.Cars.Include(c => c.CarType), Images = db.Images };
    }
    else
    {
        car = new CarDB { Cars = db.Cars.Where(c => c.ID == ID).Include(c => c.CarType), Images = db.Images.Where(c => c.CarID == ID) };
    }
    return car;
} 
```

感谢任何可以提供帮助的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T15:08:52.167

这里的问题是 CarDB 对象上的 Cars 成员。DataContractSerializer 特例集合接口，如 IEnumerable 和 IList，但它没有特例派生接口，如 IQueryable。对于这些接口，它们被视为类型是对象，并且任何实现都必须声明为已知类型。

您可以尝试通过将`IQueryable<Car>`成员更改为 来解决此问题`IEnumerable<Car>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-11T09:10:19.227

我在使用 30 个表和大约 40 个外键和延迟加载的遗留代码时遇到了这个问题。我发现创建一个包含我想要返回的字段的 ViewModel 比向所有数据库类添加更多注释更容易。如果返回的数据很复杂，那么我建议使用 automapper。

# java - Android Service 发送邮件，代码错误

> ID：14503214
> 
> 赞同：0
> 
> 时间：2013-01-24T14:05:27.943
> 
> 标签：java, android, access-modifiers

我正在开发一项服务来获取当前的 sim 卡值并检测 sim 卡是否更改，如果是，我想在我的服务中实现 JavaMail API，这意味着我的服务能够发送电子邮件。

下面是我的代码，MyService.java 中的代码错误

在排队

```
public class GMailAsync extends AsyncTask<String, Void, String> 
```

显示错误

```
illegal modifier for the local class GMailAsync; only abstract or final is permitted 
```

有人可以指导我吗？我想让我的服务在没有用户交互的情况下发送电子邮件。

**我的服务.java**

```
public class MyService extends Service {  

    String storedSimSerial;
    String currentSimSerial;

    @Override  
    public void onCreate() {  
        super.onCreate();    
    }  

    @Override  
    public int onStartCommand(Intent intent, int flags, int startId) {  

        Toast.makeText(this, "Service Started", Toast.LENGTH_LONG).show();

        TelephonyManager telephoneMgr = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
        storedSimSerial = telephoneMgr.getSimSerialNumber();
        Log.e("SimSerial::",storedSimSerial);

        TelephonyManager tmMgr = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
        currentSimSerial = tmMgr.getSimSerialNumber();
        Log.e("Current Sim Serial::",currentSimSerial);

        if(currentSimSerial.equals(storedSimSerial))
        {
            Log.e("Sim Status","Sim no changed !!!");
        }             
        else
            Log.e("Sim Status","Sim changed !!!");

        public class GMailAsync extends AsyncTask<String, Void, String>{

            @Override
            protected String doInBackground(String... params) {
                // TODO Auto-generated method stub
                String mail_body = "Sim serial number is "+currentSimSerial;
                String subject = "Your Sim has changed!!!";         
                GMailSender sender = new GMailSender("testing123@gmail.com", "testing");
                try {
                    sender.sendMail(subject, mail_body + "\nTGenerated Email",
                            "testing123@gmail.com",null);
                } catch (Exception e) {
                    Log.e("SendMail", e.getMessage(), e);
                }
                return null;
            }
            @Override
            protected void onPostExecute(String result) {
                // TODO Auto-generated method stub
                super.onPostExecute(result);
                Log.d("Mail","Sent");
            }
        }

        return Service.START_STICKY;  
    }  

    @Override
    public void onDestroy() {

        super.onDestroy();
        Toast.makeText(this, "Service Destroy", Toast.LENGTH_LONG).show();
    }

    @Override  
    public IBinder onBind(Intent arg0) {  
        return null;  
    }  
} 
```

**GMailSender.java**

```
import javax.activation.DataHandler;   
import javax.activation.DataSource;   
import javax.mail.Message;   
import javax.mail.PasswordAuthentication;   
import javax.mail.Session;   
import javax.mail.Transport;   
import javax.mail.internet.InternetAddress;   
import javax.mail.internet.MimeMessage;   
import java.io.ByteArrayInputStream;   
import java.io.IOException;   
import java.io.InputStream;   
import java.io.OutputStream;   
import java.security.Security;   
import java.util.Properties;   

public class GMailSender extends javax.mail.Authenticator {   
    private String mailhost = "smtp.gmail.com";   
    private String user;   
    private String password;   
    private Session session;   

    static {   
        Security.addProvider(new com.example.JSSEProvider());   
    }  

    public GMailSender(String user, String password) {   
        this.user = user;   
        this.password = password;   

        Properties props = new Properties();   
        props.setProperty("mail.transport.protocol", "smtp");   
        props.setProperty("mail.host", mailhost);   
        props.put("mail.smtp.auth", "true");   
        props.put("mail.smtp.port", "465");   
        props.put("mail.smtp.socketFactory.port", "465");   
        props.put("mail.smtp.socketFactory.class",   
                "javax.net.ssl.SSLSocketFactory");   
        props.put("mail.smtp.socketFactory.fallback", "false");   
        props.setProperty("mail.smtp.quitwait", "false");   

        session = Session.getDefaultInstance(props, this);   
    }   

    protected PasswordAuthentication getPasswordAuthentication() {   
        return new PasswordAuthentication(user, password);   
    }   

    public synchronized void sendMail(String subject, String body, String sender, String recipients) throws Exception {   
        try{
        MimeMessage message = new MimeMessage(session);   
        DataHandler handler = new DataHandler(new ByteArrayDataSource(body.getBytes(), "text/plain"));   
        message.setSender(new InternetAddress(sender));   
        message.setSubject(subject);   
        message.setDataHandler(handler);   
        if (recipients.indexOf(',') > 0)   
            message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(recipients));   
        else  
            message.setRecipient(Message.RecipientType.TO, new InternetAddress(recipients));   
        Transport.send(message);   
        }catch(Exception e){

        }
    }   

    public class ByteArrayDataSource implements DataSource {   
        private byte[] data;   
        private String type;   

        public ByteArrayDataSource(byte[] data, String type) {   
            super();   
            this.data = data;   
            this.type = type;   
        }   

        public ByteArrayDataSource(byte[] data) {   
            super();   
            this.data = data;   
        }   

        public void setType(String type) {   
            this.type = type;   
        }   

        public String getContentType() {   
            if (type == null)   
                return "application/octet-stream";   
            else  
                return type;   
        }   

        public InputStream getInputStream() throws IOException {   
            return new ByteArrayInputStream(data);   
        }   

        public String getName() {   
            return "ByteArrayDataSource";   
        }   

        public OutputStream getOutputStream() throws IOException {   
            throw new IOException("Not Supported");   
        }   
    }   
} 
```

**JSSEProvider.java**

```
public class JSSEProvider extends Provider {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    public JSSEProvider() {
        super("HarmonyJSSE", 1.0, "Harmony JSSE Provider");
        AccessController.doPrivileged(new java.security.PrivilegedAction<Void>() {
            public Void run() {
                put("SSLContext.TLS",
                        "org.apache.harmony.xnet.provider.jsse.SSLContextImpl");
                put("Alg.Alias.SSLContext.TLSv1", "TLS");
                put("KeyManagerFactory.X509",
                        "org.apache.harmony.xnet.provider.jsse.KeyManagerFactoryImpl");
                put("TrustManagerFactory.X509",
                        "org.apache.harmony.xnet.provider.jsse.TrustManagerFactoryImpl");
                return null;
            }
        });
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:11:18.077

我认为这是因为您正在创建方法`AsyncTask`内部`onStartCommand`。如果您说它是公共的，那么它不是局部变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:20:32.030

方法本地类不能是公共的。删除公共。Eclipse 错误消息不准确。[您可以在此处](http://inheritingjava.blogspot.ru/2011/02/chapter-53-method-local-inner-classes.html)阅读有关内部类的信息。

而且我找不到您尝试使用此类的地方。我认为你在错误的地方声明了它。

# java - 如何在春季应用程序上下文中添加新行作为地图值

> ID：14503216
> 
> 赞同：2
> 
> 时间：2013-01-24T14:05:34.917
> 
> 标签：java, spring

在我春天的应用程序上下文中，我定义了一个地图：

```
<util:map map-class="java.util.concurrent.ConcurrentHashMap">                        
                        <entry key="test" value="here I need to add new line" />
                    </util:map> 
```

在价值上我需要添加新行：

我尝试：

```
 <entry key="test" value="s
s" /> 
```

或者

```
 <entry key="test" value="s\ns" /> 
```

但没有成功

请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T14:31:19.890

尝试[http://en.wikipedia.org/wiki/Numeric_character_reference](http://en.wikipedia.org/wiki/Numeric_character_reference)

```
<util:map id="map" map-class="java.util.concurrent.ConcurrentHashMap">
    <entry key="test" value="s&#10;s" />
</util:map> 
```

# java - 如何从计算机上的文件读取/导入文本到字符串？（爪哇）

> ID：14503219
> 
> 赞同：-6
> 
> 时间：2013-01-24T14:05:38.550
> 
> 标签：java, string, file, text, import

如何从计算机上的文件读取/导入文本到字符串？

文件的位置将由用户通过对话框输入。我已经想通了，但是我忘记了如何将 txt 文件导入字符串...

我只想从这里的某个人那里看到一个编码示例。不是链接。

我是新手，通过查看此站点上的代码片段，我学得更快。我已经阅读了大多数谷歌搜索结果。

谢谢！很抱歉打扰大家...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:09:46.550

发现这个： [http ://docs.oracle.com/javase/tutorial/essential/io/index.html](http://docs.oracle.com/javase/tutorial/essential/io/index.html)

使用谷歌 20 秒后。

# symfony - 检查是否存在多对多关系的正确方法 - Symfony2/Doctrine

> ID：14503220
> 
> 赞同：24
> 
> 时间：2013-01-24T14:05:38.730
> 
> 标签：symfony, doctrine

假设我有两个实体 User 和 Product 与 Doctrine 的多对多关系相关。

我想知道为返回 true 的 User 实体处理 $user->hasProduct($product) 方法的最佳方法是关系存在，否则返回 false。

我目前正在这样做：

```
public function hasProduct($id)
{
    foreach($this->getProducts() as $product) {
        if($product->getId() == $id) {
            return true;
        }
    }

    return false;
} 
```

但我不确定这是最好的方法，特别是如果循环中有很多关系。

如果有人有更好的东西，请告诉我:)

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-01-24T14:33:16.993

你的函数`getProducts`给你一个`ArrayCollection`.

做就是了

```
if($user->getProducts()->contains($product)) //the real product object not the id
       //your stuff 
```

**编辑 ：**

对于树枝模板：

```
{% if product in user.products %}
    //your stuff
{% endif %} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-01-18T06:51:27.930

我在同样的问题上苦苦挣扎，并且遇到了[这个](https://www.boxuk.com/insight/blog-posts/filtering-associations-with-doctrine-2)博客条目，它通过使用 Doctrine Filters 解决了这个问题。

如果我正确理解您的问题并且您有三个表（user、user_product 和 product），您应该能够像这样重写您的 hasProduct($id) 函数：

```
use Doctrine\Common\Collections\Criteria;

public function hasProduct(int $productId): bool {

  $criteria = Criteria::create();
  $criteria->where(Criteria::expr()->eq('id', $productId));

  if(count($this->products->matching($criteria)) > 0) {
    return true;
  }

  return false;
} 
```

运行此代码时，Doctrine 不会加载链接到用户的所有产品。它实际上只查询交叉引用表（user_product）。

# xcode - 去除 UITabBar 上的光泽效果

> ID：14503223
> 
> 赞同：1
> 
> 时间：2013-01-24T14:05:46.483
> 
> 标签：xcode, uitabbar, appearance

我知道这是一个常见问题，但在我的情况下却完全不同。

我希望在栏处于活动状态时放置图像，并且我已经在 didFinishLoadingWithOptions 方法下使用这些代码成功完成了该操作`[[UITabBar appearance] setSelectionIndicatorImage:[UIImage imageNamed:@"tabbar-active.png"]];`

这就是我的应用程序的样子

![在此处输入图像描述](../Images/18fe73c8bbe995139c40a1617717af10.png)

现在我只想删除那个光泽效果，而不是栏上的蓝色图像

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T06:50:10.390

在挖掘了一点之后，我找到了相同的解决方案。您只需要创建一个带有空图像的 UIImage 对象。

```
 [yourTabbar setSelectionIndicatorImage:[[UIImage alloc] init]]; 
```

就是这样 ：）

# html - 将值输入框中时，使用 CSS 更改文本框中的字体颜色

> ID：14503225
> 
> 赞同：6
> 
> 时间：2013-01-24T14:05:49.667
> 
> 标签：html, forms, css, textbox

我有一个文本框，它充当我页面上的搜索框。我使用默认文本颜色#D6D6D0 的单词“SEARCH”预先填充该字段。

使用CSS，当有人在框中输入文本时，是否可以将文本颜色更改为#FFFFFF？

```
<input type="text" name="q" value="SEARCH" id="searchFieldText">

#searchFieldText {
    background: url("/images/crmpicco/search_bg3.png") no-repeat scroll 0 0 #000000;
    border: medium none;
    color: #D6D6D0;
    float: left;
    font-family: Arial,Helvetica,sans-serif;
    font-size: 10px;
    height: 21px;
    padding-left: 0;
    padding-top: 3px;
    width: 168px;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T14:14:19.187

使用`:focus`仅在框当前处于焦点时适用，当用户离开文本框时，颜色将恢复。

我建议使用该`placeholder`属性，将样式覆盖为您想要`placeholder`的颜色并在文本框上应用您想要的样式。`#D6D6D0`

您可以使用这些伪选择器覆盖`placeholder`样式：

```
::-webkit-input-placeholder {
    color:    #D6D6D0;
}
:-moz-placeholder {
    color:    #D6D6D0;
}
::-moz-placeholder {
    color:    #D6D6D0;
}
:-ms-input-placeholder {
    color:    #D6D6D0;
} 
```

我做了一个小提琴，给你一个想法：http: [//jsfiddle.net/bM5AE/](http://jsfiddle.net/bM5AE/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-24T14:08:27.243

焦点伪类应该可以工作

```
#searchFieldText:focus {
    color: #fff;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-24T14:14:25.610

您可以更好地使用占位符来预填充字段，键入时它们将消失，如果 onblur 字段为空，则占位符会返回。

```
<input type="text" name="q" placeholder="SEARCH" id="searchFieldText"> 
```

如果你不想为占位符设置样式

```
::-webkit-input-placeholder {
  color: red;
}
:-moz-placeholder { /* Firefox 18- */
  color: red;  
}
::-moz-placeholder {  /* Firefox 19+ */
  color: red;  
}
:-ms-input-placeholder {  
  color: red;  
} 
```

[例子](http://jsfiddle.net/UYFNf/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T14:08:22.070

使用伪类`:focus`将为您解决问题。

```
#searchFieldText:focus{
    color:#fff;   
} 
```

我还建议您为输入字段使用新属性`placeholder`，这将为您带来一些魔力（但需要注意支持）。

[看例子](http://jsfiddle.net/ukxAw/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T14:19:13.570

嗨试试下面的代码它会工作....

```
 $(document).ready(function () {
            $("#searchFieldText").keypress(function () {
                $("#searchFieldText").css("color", "#ffffff");
            });
        }); 
```

# facebook - Facebook 连接黑莓应用程序

> ID：14503226
> 
> 赞同：0
> 
> 时间：2013-01-24T14:05:57.757
> 
> 标签：facebook, blackberry-simulator

我正在使用来自[http://sourceforge.net/projects/facebook-bb-sdk/](http://sourceforge.net/projects/facebook-bb-sdk/)的 Blackberry Facebook sdk 。

zip 文件中包含的 PDF 表示使用 eclipse 在项目中附加/包含两个 .jar 文件，然后使用这些方法从 facebook 获取用户信息。

包含 jar 文件很好，但是当我调用方法并尝试运行应用程序时，我得到一个运行时异常“java.lang.noClassDefFoundError”。没有编译错误，但运行时错误。我曾尝试清理 BB 9900 模拟器，但它不起作用。我正在粘贴导致运行时异常的代码。

```
 String NEXT_URL = "http://m.facebook.com/login.php";
 String APPLICATION_ID = "318512824926003";
 APPLICATION_SECRET = "e0e532b55a4586ec2fb0eddf4eed12b1";
 String[] PERMISSIONS = Facebook.Permissions.USER_DATA_PERMISSIONS;
 ApplicationSettings as = new ApplicationSettings(NEXT_URL, APPLICATION_ID, APPLICATION_SECRET, PERMISSIONS);
  Facebook fb = Facebook.getInstance(as); 
```

插入上述代码会导致运行时异常。许多用户表示这可行，但没有提供简单的最终解决方案。所以请帮忙。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:38:28.580

太好了..我让它工作了..我通过向 LoginScreen.java 文件添加一个参数来检索 FB 用户的**电子邮件 ID**。

添加的参数：“电子邮件”

"http://www.facebook.com/dialog/oauth?scope=publish_stream,offline_access,***电子邮件***&redirect_uri=" + pfbc.getNextUrl() + "&response_type=token&display=touch&client_id=" + pfbc.getApplicationId()

伙计们，如果您需要任何帮助将 FB Connect 集成到您的 BB 应用程序，请发送电子邮件至 alvin.chettiar@hotmail.com 给我。我很乐意提供帮助。我知道我经历过的头部撞击。

# blackberry - 在 BlackBerry 中预验证 jar 文件时出现 NoClassDefFoundError

> ID：14503237
> 
> 赞同：0
> 
> 时间：2013-01-24T14:06:45.180
> 
> 标签：blackberry, java-me, eclipse-plugin, preverify

我还在 BlackBerry 支持论坛上的“ [NoClassDefFoundError while preverify the jar files in BlackBerry](http://supportforums.blackberry.com/t5/Java-Development/NoClassDefFoundError-while-preverify-the-jar-files-in-BlackBerry/td-p/2116547) ”主题下问过这个问题

我在我的 BlackBerry Project 中添加一个库文件（jar 文件）并尝试运行它。但它给了我以下错误：**错误！：在标签 77 处缺少堆栈映射**。所以我尝试找出问题并找到这个链接：[Preverify Link](http://supportforums.blackberry.com/t5/Java-Development/Missing-stack-map-at-label/ta-p/445978)

所以我尝试使用预验证器来解决这个问题。当我使用 BlackBerry eclipse 插件时，我尝试过这种方式：

1.  复制我的eclipse 6.0插件的bin文件夹中的jar文件（eclipse-SDK-3.5.2-win32\eclipse\plugins\net.rim.ejde.componentpack6.0.0_6.0.0.29\components\bin）
2.  在命令行中执行以下命令：

    ```
     preverify -classpath "<path to 6.0.0.29 SDK>\net_rim_api.jar" "ArcotOTP-Lib-Java-Test-2.0.0.jar" 
    ```

但运行此行后，我收到以下错误：

```
预验证类 Mypackage.API$1 时出错
java/lang/NoClassDefFoundError: Mypackage/Test

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T20:59:23.367

BlackBerry 设备在 Java-ME 平台上运行，因此您无法使用现代 Java 功能。如今，典型的 Java jar 文件使用不向后兼容 Java-ME 平台的新特性。有些项目确实不妨碍向后兼容，比如[Bouncy Castle](http://bouncycastle.org/latest_releases.html)。但这很少见。

这个问题在 BlackBerry 论坛上重复出现，在 BlackBerry 论坛上也得到了回答，我将在此处记录：

西蒙海恩：

> 它是一个 j2me 库吗？

阿林丹慕克吉：

> 不，它是 java 库..所有类基本上都是 java 类。我也用于 android 的同一个库，它对我来说运行良好..

西蒙海恩：

> 黑莓使用 J2ME 作为基础，Android 使用 J2SE。除非您重新编译它（并解决由于缺少反射、列表等而导致的所有错误），否则您无法在 BlackBerry 上使用 Android 库

# asp.net - 是否可以在 web.config 中设置 ObjectContext.CommandTimeout？

> ID：14503238
> 
> 赞同：1
> 
> 时间：2013-01-24T14:06:50.353
> 
> 标签：asp.net, .net, silverlight, entity-framework

我正在开发一个使用实体框架的 Silverlight 项目。当查询需要几秒钟并且应该返回类似于 3MB+ 的数据时，服务会超时。

我发现我可以将类似 this.ObjectContext.CommandTimeout = NNN 的东西放在 domincontext 的构造函数中，但我想知道是否可以将它放在 web.config 中？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T23:35:21.973

我认为不可能在配置中设置一些东西并自动拾取它。您可以做的是向配置添加自定义属性并读取它并设置`ObjectContext.CommandTimeout`为您读取的值。试图弄清楚为什么你会超时并尝试解决这个问题会更好。我认为默认超时为 30 秒，因此您的查询可能需要更多时间。也许你不需要所有的数据（如果是人类 3MB+ 似乎有很多数据需要消耗和理解）？

# java - 在导出的 jar 中获取图像时未捕获的错误

> ID：14503241
> 
> 赞同：-1
> 
> 时间：2013-01-24T14:06:53.480
> 
> 标签：java, image, icons, fetch

我有一个加载图像的应用程序来创建一个带有图标的按钮。从 IDE 启动时，它工作得很好，但是从导出的 jar 文件启动时，它会出现图像提取错误。

图片位置：

```
+Project
   -Source Packages
      -Tools
         -start.jpg 
```

使用的代码：

```
 static final String STARTIMAGE = "/Tools/start.JPG";

public static JButton createStartButton() {

    Image img = Toolkit.getDefaultToolkit().getImage(GUITools.class.getResource(STARTIMAGE));

    JButton b = new JButton("",new ImageIcon(img));
    b.setPreferredSize(smallButton);
    b.setMaximumSize(smallButton);
    b.setMinimumSize(smallButton);

    return b; 
```

现在，最奇怪的是，在另一个屏幕中，以完全相同的方式创建了一个按钮，而这个按钮工作得很好……代码：

```
static final String PREVIOUSIMAGE = "/Tools/previous.gif";

public JButton createPreviousButton(){

    Image img = Toolkit.getDefaultToolkit().getImage(getClass().getResource(PREVIOUSIMAGE));
    JButton b = new JButton("Previous",new ImageIcon(img));
    b.setPreferredSize(dimensionButton);
    b.setMaximumSize(dimensionButton);
    b.setMinimumSize(dimensionButton);      

    return b;       
} 
```

唯一的区别是一个是静态的，但即使使它像另一个一样非静态，它仍然无法工作。

我尝试了在这个论坛和其他网站上找到的所有内容，包括这个好话题：

[如何在jar文件中捆绑图片](https://stackoverflow.com/questions/2273040/how-to-bundle-images-in-jar-file) （主题末尾生成的url只是'null'）

似乎没有任何效果...请帮助！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:24:00.633

在我看来，您的图像位于一个包内，因此实际链接可能是“package.name/Tools/start.jpg”或其他编译时的其他内容，因此应该移动图像。

而不是将它放在像这样的包中：

> ```
> +Project
>    -Source Packages
>      -Tools
>        -start.jpg 
> ```

而是做这样的事情。

```
+Project Folder
  -Source Packages/
  -Tools/
    -start.jpg 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:13:47.233

> 从 IDE 启动时，它工作得很好，但是从导出的 jar 文件启动时，它会出现图像提取错误。

```
Image img = Toolkit.getDefaultToolkit().getImage(getClass().getResource(PREVIOUSIMAGE)); 
```

上面的这种方法是不正确的，请改用：

```
private static BufferedImage readBufferedImage (String imagePath) {
    try {
        InputStream is = YourClassName.class.getClassLoader().getResourceAsStream(imagePath);
        BufferedImage bimage = ImageIO.read(is);
        is.close();
        return bimage;
    } catch (Exception e) {
        return null;
    }
} 
```

并更好地在应用程序启动时加载所有图像，然后使用它们。

# ruby - 无法定位元素，使用 {:id=>"", :tag_name=>"select"}

> ID：14503245
> 
> 赞同：2
> 
> 时间：2013-01-24T14:07:10.543
> 
> 标签：ruby, watir-webdriver

我想使用 Ruby 和 watir-webdriver 从下拉框中选择值。这是命令

```
browser.select_list(:id, "ctl00_SampleContent_ComboBox1_ComboBox1_OptionList").select("Whiskey") 
```

我得到一个错误，无法找到元素，使用 {:id=>"ctl00_SampleContent_ComboBox1_ComboBox1_OptionList", :tag_name=>"select"}

有什么想法有什么问题吗？这是完整的代码：

```
# 1.Open http://www.asp.net/ajax/ajaxcontroltoolkit/Samples/Default.aspx
  #browser = Watir::Browser.new
  #browser = Watir::Browser.new :ie
  profile = Selenium::WebDriver::Firefox::Profile.from_name 'WatirWebDriver'
  #profile.add_extension 'autoauth-2.1-fx+fn.xpi'
  browser = Watir::Browser.new :firefox, :profile => profile
  browser.goto 'http://www.asp.net/ajax/ajaxcontroltoolkit/Samples/Default.aspx'

  #2.Click ComboBox link on the left pane of the page
  browser.a(:id, 'ctl00_SamplesLinks_ctl15_SamplesLink').click

  #3.Verify that http://www.asp.net/ajax/ajaxcontroltoolkit/Samples/ComboBox/ComboBox.aspx URL opened
  if browser.url.eql? "http://www.asp.net/ajax/ajaxcontroltoolkit/Samples/ComboBox/ComboBox.aspx"
    puts "Error loading page \"http://www.asp.net/ajax/ajaxcontroltoolkit/Samples/ComboBox/ComboBox.aspx URL opened\""
    return false
  end

  #4.Select “Whiskey” in the combo-box
  #browser.select_list(:id, 'ctl00_SampleContent_ComboBox1_ComboBox1_OptionList').select_value('Whiskey')
  puts "!!!"
  browser.select_list(:id, "ctl00_SampleContent_ComboBox1_ComboBox1_OptionList").when_present.select("Whiskey") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T14:34:05.443

这可以完成工作：

```
require "watir-webdriver"
browser = Watir::Browser.new
browser.goto "http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ComboBox/ComboBox.aspx"
browser.button(id: "ctl00_SampleContent_ComboBox1_ComboBox1_Button").click
browser.ul(:id, "ctl00_SampleContent_ComboBox1_ComboBox1_OptionList").li(text: "Whiskey").click 
```

# xaml - 如何使用 Xaml 在 Devxpress Gridcontrol 中提供 if 和 else Formatter？

> ID：14503249
> 
> 赞同：0
> 
> 时间：2013-01-24T14:07:23.913
> 
> 标签：xaml, devexpress, gridcontrol

我正在使用 Xaml 开发使用 Devexpress Gridcontrol 的应用程序。在单元格模板中，我有一个文本块，如果 Binding 中的值为“0”，我想在其中显示“打开”，如果为“0”，则显示“关闭”。这可以使用`FormatterString`ie来完成吗？使用`FormatStringConverter`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:11:07.890

希望这可以帮助。:)

```
xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
xmlns:ei="http://schemas.microsoft.com/expression/2010/interactions"

<TextBlock Text="{Binding Value}">
  <i:Interaction.Triggers>
    <ei:DataTrigger Value="0" Binding="{Binding Text, ElementName=Self}">
        <im:ChangePropertyAction PropertyName="Text"
                                         Value="Open"/>
    </ei:DataTrigger>
    <ei:DataTrigger Value="1" Binding="{Binding Text, ElementName=Self}">
        <im:ChangePropertyAction PropertyName="Text"
                                         Value="Close"/>
    </ei:DataTrigger>
  </i:Interaction.Triggers>
</TextBlock> 
```

# sql - 如何为 ComboBox 添加功能在 Microsoft Access 表单中 因此，前几天我发布了一个关于需要将“全选”选项添加到 2 个 ComoBoxes 的访问表单的问题。我能够使用联合将选项添加到其中两个。但是，这些选项目前还没有做任何事情。我找到了从 ComboBox 获取表单参数的查询，这是我需要添加选项以全选的地方，除了盯着它看了几个小时后，我再也没有任何线索。数据库不是我写的，它大约有 10 年的历史，是为了添加一些新功能而给我的。我已经这样做了，所有者抱怨

> ID：14503259
> 
> 赞同：1
> 
> 时间：2013-01-24T14:08:04.367
> 
> 标签：sql, database, ms-access, database-design, vba

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:16:26.493

一种非常简单的方法是将组合的绑定列设置为 *：

```
 SELECT "*" As ID, "Select All" As AText 
 FROM Table1 
 UNION SELECT Table1.ID, Table1.AText 
 FROM Table1; 
```

**使用你的组合：**

```
 Select "*" As TreatmentID, "<<All Records>>" As Treatment 
 FROM Treatment 
 UNION 
 Select Treatment.TreatmentID, Treatment.Treatment 
 From Treatment; 
```

然后，您可以使用 LIKE：

```
SELECT Table1.ID
FROM Table1
WHERE Table1.ID Like [forms]![MainForm]![Combo] 
```

**使用您的 SQL：**

```
... WHERE (((Addresses.TreatmentID) 
  Like [Forms]![ReportCentre]![cboTreatmentType]) AND ... 
```

如果您只有一列，则可以使用：

```
SELECT Table1.Atext
FROM Table1
WHERE AText Like 
   IIf(Forms![MainForm]!Combo="Select All","*",Forms![MainForm]!Combo) 
```

# websocket - SignalR 在跨域的情况下执行长轮询而不是 websocket

> ID：14503260
> 
> 赞同：5
> 
> 时间：2013-01-24T14:08:05.500
> 
> 标签：websocket, cross-domain, signalr

当我连接到托管在同一虚拟目录中的 signalR 时，我通过 websocket 传输获取数据。但是在跨域的情况下，长轮询被用作传输。

在这里浏览器兼容性不是问题，因为我在 Chrome 浏览器中尝试。

在跨域的情况下，我可以做些什么来使用 websocket 作为传输。

我已经尝试了网络上所有可能的解决方案，包括 signalR wiki 上的可用解决方案。

[https://github.com/SignalR/SignalR/wiki/SignalR-JS-Client-Hubs](https://github.com/SignalR/SignalR/wiki/SignalR-JS-Client-Hubs)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T05:55:24.470

感谢大卫在评论中回答我的问题：

> 因为只有 IIS8 支持 websockets，而且 SSE 或 ForeverFrame 都不能跨域工作，所以你会被长时间轮询 -</p>

# sql - 用于保留的 SQL 选择语句不起作用

> ID：14503264
> 
> 赞同：0
> 
> 时间：2013-01-24T14:08:20.103
> 
> 标签：sql, oracle

我正在尝试创建一个查询，该查询根据用户输入的起始日期和结束日期从我的数据库返回可用车辆。

这是目前我预订表中的日期。

```
Booking Table
booking_id     customer_id    reg_number    date_from    date_to    status
1              2              RH34 TJT      23-JAN-13    24-JAN-13  1
2              3              RJ54 FKF      26-JAN-13    26-JAN-13  1 
```

下面是我的查询，如果我输入的日期不等于预订表中已经存在的日期，它会起作用。例如，如果我将`22-JAN-13`上`27-JAN-13`表中的那两辆车放在结果中，因为它们已被预订。但是，如果我输入`23-JAN-13`，`24-JAN-13`这天预订的车也会在不应该的时候被退回，因为它已经预订了。

```
SELECT   *
FROM vehicles
INNER JOIN car_model ON vehicles.model_code = car_model.model_code
INNER JOIN manufacture ON car_model.manufacture_code = manufacture.manufacture_code
LEFT OUTER JOIN booking ON vehicles.reg_number = booking.reg_number
WHERE ((booking.date_from <= '23-JAN-13' OR booking.date_from >= '24-JAN-13')
        AND (booking.date_to <= '23-JAN-13' OR booking.date_to >= '24-JAN-13')
        AND booking.booking_status = 1); 
```

因为我使用 <= 和 >= 等于部分会导致它在它们相等时省略它们，还是我错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:29:28.040

试试这个

```
SELECT   *
FROM vehicles
INNER JOIN car_model ON vehicles.model_code = car_model.model_code
INNER JOIN manufacture ON car_model.manufacture_code = manufacture.manufacture_code
LEFT OUTER JOIN booking ON vehicles.reg_number = booking.reg_number
WHERE ((booking.date_from < '23-JAN-13' OR booking.date_from > '24-JAN-13')
        AND (booking.date_to < '23-JAN-13' OR booking.date_to > '24-JAN-13')
        AND booking.booking_status = 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:43:32.460

如果您正在寻找在给定日期未预订的车辆，您应该寻找使用`NOT EXISTS`而不是加入`VEHICLES`表格：

```
SELECT *
FROM   vehicles v
WHERE  NOT EXISTS (SELECT NULL
                   FROM   booking b
                   WHERE  b.reg_number = v.reg_number
                   AND    b.booking_status = 1
                   AND    ((b.date_to > to_date(:start_date,  'DD/MM/YYYY') AND b.date_from <= to_date(:start_date, 'DD/MM/YYYY')) OR 
                           (b.date_from <= to_date(:end_date, 'DD/MM/YYYY') AND b.date_to > to_date(:end_date, 'DD/MM/YYYY')) OR
                           (b.date_from <= to_date(:start_date, 'DD/MM/YYYY') AND b.date_to >= to_date(:end_date, 'DD/MM/YYYY')) OR
                           (b.date_from >= to_date(:start_date, 'DD/MM/YYYY') AND b.date_to <= to_date(:end_date, 'DD/MM/YYYY'))) 
```

# regex - 正则表达式在文本 PostgreSQL 中仅查找 6 位数字

> ID：14503267
> 
> 赞同：5
> 
> 时间：2013-01-24T14:08:35.923
> 
> 标签：regex, postgresql

我需要在 PostgreSQL 中构建一个查询，并且需要查找所有包含 6 位数字的文本条目（例如`000999`、`019290`、`998981`、`234567`等）。问题是数字在字符串的开头或结尾不是必需的。

我试过但没有工作：

*   `[0-9]{6}`- 返回超过 6 位的数字的一部分
*   `(?:(?<!\d)\d{6}(?!\d))`- postgresql 不知道lookbehind
*   `[^0-9][0-9]{6}[^0-9]` 及其变化，但无济于事。

构建我自己的 Perl/C 函数并不是一个真正的选择，因为我没有所需的技能。知道目前可以使用什么正则表达式或其他让我无法理解的技巧吗？

**编辑**

输入样本：

*   `aa 0011527 /CASA`-> 不应该返回任何东西
*   `aa 001152/CASA`-> 应该返回`001152`
*   `aa001152/CASA`-> 应该返回`001152`
*   `aa0011527/CASA`-> 不应该返回任何东西
*   `aa001152 /CASA`-> 应该返回`001152`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T14:11:26.877

如果 PostgreSQL 支持单词边界，请使用`\b`：

```
\b(\d{6})\b 
```

**编辑**：

`\b`在 PostgreSQL 中表示`backspace`，所以它不是单词边界。

[http://www.postgresql.org/docs/8.3/interactive/functions-matching.html#FUNCTIONS-POSIX-REGEXP](http://www.postgresql.org/docs/8.3/interactive/functions-matching.html#FUNCTIONS-POSIX-REGEXP)但是，它将向您解释您可以`\y`用作单词边界，因为它的意思是`matches only at the beginning or end of a word`，所以

```
\y(\d{6})\y 
```

应该管用。

```
\m(\d{6})\M 
```

*也应该*工作。

PostgreSQL 正则表达式中单词匹配的完整列表：

```
Escape  Description
\A      matches only at the beginning of the string (see Section 9.7.3.5 for how this differs from ^)
\m      matches only at the beginning of a word
\M      matches only at the end of a word
\y      matches only at the beginning or end of a word
\Y      matches only at a point that is not the beginning or end of a word
\Z      matches only at the end of the string (see Section 9.7.3.5 for how this differs from $) 
```

**新编辑：**

根据您的编辑，您应该能够做到这一点：

```
(^|[^\d])(\d+)([^\d]|$) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:10:46.420

使用@h2ooooooo 提出的建议，我设法创建了以下查询：

```
SELECT cleantwo."ID",cleantwo."Name",cleantwo."Code"
FROM
(
SELECT cleanone."ID",cleanone."Name",unnest(cleanone."Code") as "Code" -- 3\. unnest all the entries received using regexp_matches (get all combinations)
FROM 
(
SELECT sd."ID", sd."Name", regexp_matches(sd."Name", '(^|[^\d])(\d+)([^\d]|$)')
    as "Code"
FROM "T_SOME_DATA" sd
WHERE substring(sd."Name" from 1 for 15) ~('(^|[^\d])(\d+)([^\d]|$)') -- 1\. get all data possible
) as cleanone
WHERE cleanone."Code" IS NOT NULL -- 2\. get data where code IS NOT NULL (remove useless entries)
) as cleantwo
WHERE length(cleantwo."Code")=6 -- 4\. get only the combinations relevant to my initial requirement (codes with length 6)<br/> 
```

我花了很多时间才找到这个，所以我希望它可以帮助遇到同样情况的其他人。祝你好运！

# html5-history - History API pushState 如何避免串联

> ID：14503269
> 
> 赞同：1
> 
> 时间：2013-01-24T14:08:39.753
> 
> 标签：html5-history

我有以下两个 URL（我使用单页应用程序，因此它们不受任何真实页面的支持）：

**解决方案：Urls 必须以“/”开头，以防止串联。**

1.  `C/D`
2.  `T`

在第二次调用之后，我调用`pushState()`了两次传递上面的 URL，`mysite.com/C/T`而我期待的是`mysite.com/T`.

如何防止`pushState()`连接 URL？

# android - 如何在类似photoshop的android层中的一个屏幕上显示多个图像

> ID：14503278
> 
> 赞同：1
> 
> 时间：2013-01-24T14:09:06.297
> 
> 标签：android, android-layout, android-canvas

我是android开发的新手，所以我没有太多经验。

我想为孩子开发一个应用程序，我希望以组合方式显示天空、山脉、河流的图像（png 或位图），并且孩子们可以改变天空的颜色（这意味着只有天空位图会改变）。

我想像 Photoshop 图层一样将所有位图叠加显示，这样孩子们可以通过单击按钮将一棵树或一座小山添加到视图中。

请指导我如何进行这种图像处理。我必须使用哪些技术？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:22:22.987

只是一个起点：

*   您的所有位图都必须具有透明背景。
*   使用[RelativeLayout](http://developer.android.com/reference/android/widget/RelativeLayout.html)并在其上添加您的位图（RelativeLayout 允许您放置相互重叠的孩子）
*   您可以使用[`margin`](http://developer.android.com/reference/android/view/ViewGroup.MarginLayoutParams.html)在 RelativeLayout 中将位图定位到您想要的位置

**编辑**

这是一个简单的布局，其中 2 个位图（image1 和 image2 都具有透明背景）相互重叠。

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:orientation="vertical"
            android:id="@+id/relativeLayout"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"

    >
     <ImageView
            android:background="@drawable/image1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"/>

     <ImageView
            android:background="@drawable/image2"
            android:layout_width="match_parent"
            android:layout_height="match_parent"/>
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:43:55.700

这取决于您的要求。如果您真的想创建复杂的应用程序，我建议您使用游戏引擎。比如 cocos-2dx。它是免费的、跨平台的，并且有很多开箱即用的图形处理功能。有图层、过滤器、动画……而且运行速度非常快。

如果你是 android SDK 粉丝，那么创建一个自定义视图并使用它的画布。这并不容易。但是，如果您的应用程序足够简单，您最好坚持使用画布。

# google-app-engine - 如何使用本地主机上的 GWT 应用程序释放 Google App Engine 和数据存储缓存？

> ID：14503279
> 
> 赞同：1
> 
> 时间：2013-01-24T14:09:10.070
> 
> 标签：google-app-engine, gwt, browser

当我运行应用程序时，即使我在界面上进行了更改，浏览器也会缓存应用程序，它不会做任何事情，只是每次都会出现相同的应用程序，它还会缓存我存储在数据存储中的数据我认为这是浏览器缓存问题，所以如何其实是为了解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:21:20.860

再次搜索，发现问题你必须从**appengine-web.xml**中删除这一行\

```
<include path="**.cache.*" expiration="365d" /> 
```

重新运行您的项目，浏览器将不再缓存问题已解决:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:53:58.120

如果您想手动清除它，而不是通过编程。铬有一个解决方案。只需在 url 中输入 chrome://appcache-internals/ 即可手动清除浏览器缓存。

# sql - 选择语句在列中查找变量数据

> ID：14503280
> 
> 赞同：1
> 
> 时间：2013-01-24T14:09:13.223
> 
> 标签：sql, sybase

表名： - 贸易

```
TradeNumber       spread
1                 .1
1                 .1
2                 .3
2                 .4 
```

我想获得点差不同的所有交易。那就是我的结果集应该只包含交易号 2。

我可以构造的查询是

```
select TradeNumber from Trade t where t.spread <> (select t.spread from TradeNumber) 
```

没有机会运行它。是否有聚合/复合函数来解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T14:13:11.320

```
SELECT DISTINCT t.TradeNumber
FROM Trade t
WHERE EXISTS (SELECT NULL
                  FROM Trade t1
                  WHERE t.TradeNumber = t1.tradeNumber
                  AND t.spread <> t1.spread) 
```

或者

```
select TradeNumber
FROM Trade
GROUP BY TradeNumber
HAVING COUNT(DISTINCT spread) > 1 
```

[sqlFiddle](http://sqlfiddle.com/#!2/f9690/18)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T14:25:33.120

最便宜的方法是：

```
select tradenumber
from t
group by tradenumber
having min(spread) <> max(spread) 
```

使用`min`和`max`用户的资源少于`count(distinct)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T14:13:58.983

只是为了完整性，另一种解决方案。

```
SELECT TradeNumber FROM (
SELECT
TradeNumber
FROM
Trade
GROUP BY TradeNumber, spread
) sq
GROUP BY TradeNumber
HAVING COUNT(*) >1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T14:21:24.360

我会去

```
SELECT
TradeNumber
FROM
Trade
GROUP BY TradeNumber
HAVING count(distinct spread) > 1 
```

# javascript - flickr api、json 和设置列表

> ID：14503290
> 
> 赞同：-1
> 
> 时间：2013-01-24T14:09:47.583
> 
> 标签：javascript, json, api, flickr

我正在尝试从 json 提要中的“农场”值开始构建 url 到 photsets 的拇指。我不明白为什么这不起作用..？

```
 <!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
<script type="text/javascript">
function ajax_get_json(){
    var menu = document.getElementById("menu");
    var thumbURL = new XMLHttpRequest();
    thumbURL.open("GET", "http://api.flickr.com/services/rest/?&method=flickr.photosets.getList&api_key=797507e576c902b2ffb0c8494fb368ab&user_id=37003559@N03&format=json&jsoncallback=?", true);
    thumbURL.setRequestHeader("Content-type", "application/json", true);
    thumbURL.onreadystatechange = function() {
        if(thumbURL.readyState == 4 && thumbURL.status == 200) {
            var data = JSON.parse(thumbURL.responseText);
            menu.innerHTML = "";
            for(var obj in data){
                menu.innerHTML += data[obj].photosets.photoset.id+"<hr />";
            }
        }
    }
    thumbURL.send(null);
    menu.innerHTML = "requesting...";
}
</script>
</head>
<body>
<div id="menu"></div>
<script type="text/javascript">ajax_get_json();</script>

</body>
</html> 
```

我错过了什么..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:22:38.527

```
function ajax_get_json(){
    var menu = document.getElementById("menu");
    var thumbURL = new XMLHttpRequest();
    thumbURL.open("GET", "https://api.flickr.com/services/rest/?&method=flickr.photosets.getList&api_key=797507e576c902b2ffb0c8494fb368ab&user_id=37003559@N03&format=json&jsoncallback=process", true);
    thumbURL.onreadystatechange = function() {
        if(thumbURL.readyState == 4 && thumbURL.status == 200) {
            eval(thumbURL.responseText);
        }
    }
    thumbURL.send(null);
    menu.innerHTML = "requesting...";
}

function process(data) {
    var menu = document.getElementById("menu");
    menu.innerHTML = "";
    var sets = data.photosets.photoset;
    var max = sets.length;

    for(var i = 0; i < max; i++) {
        menu.innerHTML += sets[i].id+"<hr />"
    }    
} 
```

[http://jsfiddle.net/2BTrQ/10/](http://jsfiddle.net/2BTrQ/10/)

# html - SVG 图像未显示在 Webkit 浏览器中

> ID：14503294
> 
> 赞同：3
> 
> 时间：2013-01-24T14:10:00.157
> 
> 标签：html, css, mobile, svg, mobile-safari

我一直在编写一个主要用于 iPhone 的移动网站。我正在为图像使用 SVG，但由于某种原因，只有少数图像出现。

如果您查看下面的屏幕截图，您可以看到缺少图标：

![在此处输入图像描述](../Images/67012c08c5619f150187c4c0ae2c5314.png)

如果您查看[https://mobile.hollat​​me.com/](https://mobile.hollatme.com/)，您可以看到正在运行的错误。您会注意到徽标没有出现在顶部。但是，如果您直接导航到位于[https://mobile.hollat​​me.com/css/svg/logo.svg](https://mobile.hollatme.com/css/svg/logo.svg)的徽标文件，然后返回该页面，它将出现。

**HTML：**

```
<div class="profileItems">
    <a class="notificationsProfileItem" href="javascript:{}" data-loc="notifications">Notifications <span></span></a>
    <a class="neighborhoodsProfileItem" href="javascript:{}" data-loc="strolling">Strolling <span></span></a>
    <a class="streamProfileItem" href="javascript:{}" data-loc="stream">Stream <span></span></a>
    <a class="interestsProfileItem" href="javascript:{}" data-loc="interest-trends">Interest Trends <span></span></a>
    <a class="photosProfileItem" href="javascript:{}" data-loc="photos">Photos <span></span></a>
    <a class="shuffleProfileItem" href="javascript:{}" data-loc="shuffle">Shuffle Feeds <span></span></a>
    <a class="messagesProfileItem" href="javascript:{}" data-loc="messages">Messages <span></span></a>
    <a class="neighborsProfileItem" href="javascript:{}" data-loc="neighbors">Neighbors <span></span></a>
    <a class="friendsProfileItem" href="javascript:{}" data-loc="friends">Friends <span></span></a>
    <a class="settingsProfileItem" href="javascript:{}" data-loc="settings">Settings <span></span></a>
</div><!-- End profile items --> 
```

**CSS：**

```
.profileItems {}

.profileItems a {
    display:block;
    background-color:#F2F2F2;
    margin:0 0 0.1em 0;
    padding:1.5em 1em 1.5em 2.8em;
    color:#595959;
    font-weight:bold;
    font-size:0.8em;
    opacity:0;
}

    .profileItems a span {
        display:block;
        background:url(svg/goArrow.svg) no-repeat;
        background-size:1em;
        float:right;
        height:1.5em;
        width:1em;
        margin:-0.1em 0 0 0;
    }

.shuffleProfileItem {
    background-image:url(svg/feeds.svg);
    background-repeat:no-repeat;
    background-size:1.8em;
    background-position:0.5em;
}

.notificationsProfileItem {
    background-image:url(svg/holla.svg);
    background-repeat:no-repeat;
    background-size:1.8em;
    background-position:0.5em;
}

.neighborhoodsProfileItem {
    background-image:url(svg/neighborhoods.svg);
    background-repeat:no-repeat;
    background-size:1.8em;
    background-position:0.5em;
}

.interestsProfileItem {
    background-image:url(svg/interests.svg);
    background-repeat:no-repeat;
    background-size:1.8em;
    background-position:0.5em;
}

.messagesProfileItem {
    background-image:url(svg/message.svg);
    background-repeat:no-repeat;
    background-size:1.8em;
    background-position:0.5em;
}

.photosProfileItem {
    background-image:url(svg/photo.svg);
    background-repeat:no-repeat;
    background-size:1.8em;
    background-position:0.5em;
}

.neighborsProfileItem {
    background-image:url(svg/neighbors.svg);
    background-repeat:no-repeat;
    background-size:1.8em;
    background-position:0.5em;
}

.friendsProfileItem {
    background-image:url(svg/friends.svg);
    background-repeat:no-repeat!important;
    background-size:1.8em;
    background-position:0.5em;
}

.settingsProfileItem {
    background-image:url(svg/settings.svg);
    background-repeat:no-repeat;
    background-size:1.8em;
    background-position:0.5em;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T17:56:46.133

啊，你在 Webkit 中遇到了一个错误。如果您尝试使用 CSS，即使您对它们进行编码，嵌入位图图像的元素也不会显示。要解决此问题，您需要将实际的 SVG 文件插入到一个不可见的容器中（呃），然后将显示 CSS 中引用的图像。你可以做一些事情，比如......

```
<div class="icons">
  ... put all your svg code here
</div> 
```

并在您的样式表中：

```
.icons {
  width: 1px;
  height: 1px;
  pointer-events: none;
  opacity: 0;
  overflow: hidden;
} 
```

您也可以只插入纯 PNG。您现在拥有的是嵌入在 HTML 中的 SVG 中的位图，为什么不将这些位图矢量化，或者插入纯 PNG？

# php - 如何使用 PHP 直接显示图像？

> ID：14503301
> 
> 赞同：6
> 
> 时间：2013-01-24T14:10:39.763
> 
> 标签：php, image

我有一个关于在 PHP 中显示图像的问题。我需要将 PHP 文件显示为图像，而不是嵌入网页中的图像，就好像您直接浏览到 JPEG 图像一样。我需要它是一个 PHP 页面而不是实际浏览图像的原因是我需要在图像交付之前调整它的大小。直接使用图像是最简单的，因为这样我可以更轻松地在桌面应用程序中显示图像。有没有办法做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T14:14:08.467

```
<?php
header('Content-Type: image/jpeg');
readfile('path/to/image.jpeg'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:13:02.327

您需要将该`header` `Content-Type`属性设置为正确的图像类型。有关一些示例，请参见此链接。

[http://www.electrictoolbox.com/image-headers-php/](http://www.electrictoolbox.com/image-headers-php/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T14:14:22.643

选择正确的标题：

```
header("Content-type: image/png"); 
```

并使用 php gd 更改图像大小： http: [//php.net/manual/fr/book.image.php](http://php.net/manual/fr/book.image.php)

# jsf - JSF rich:suggestionbox 需要通过排除已经选择的项目来过滤建议列表

> ID：14503302
> 
> 赞同：0
> 
> 时间：2013-01-24T14:10:41.187
> 
> 标签：jsf, richfaces

有一个与文本框相关联的 jsf 建议框。一切正常，除了我无法排除已经选择的结果。关联的文本框包含逗号分隔值。我还没有找到任何方法可以显示除了文本框中已经存在的建议之外的建议。我可以将文本框值与建议 ajax 请求或任何其他想法一起传递吗？

```
public class ActionBean {

private String contacts;

public List<Contact> autocomplete(Object suggest) {

//....
// logic to get the list from DB based on suggestion but no data about existing selected values
//....

}
} 
```

该文本框和建议框的 JSF 的 xhtml 部分

```
<h:inputText value="#{actionBean.contacts}" styleClass="input mFields" id="text">
    <a4j:support event="onchange" action="#{someaction...}" return;" reRender="..."/>
</h:inputText>

<h:outputLabel value="Search and Select Name/Number or Enter Number. Use , for multiple entries"/>
    <rich:suggestionbox limitToList="true" id="suggestionBoxId" for="text" tokens=",[]" suggestionAction="#{actionBean.autocomplete}" var="result" fetchValue="#{result.number}" height="100" width="200" nothingLabel="No contacts found" columnClasses="center" usingSuggestObjects="true" >
        <h:column>
            <h:outputText value="#{result.name} #{result.lastName}" />
        </h:column>
        <h:column>
            <h:outputText value="#{result.number}" style="font-style:italic" />
        </h:column>
    </rich:suggestionbox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T07:44:44.113

@Chris 感谢您的回复。

我终于找到了方法，即将使用的 bean 设置为请求范围，因此即使通过 javasript 调用 onchange 事件也在为每个 bean 的每个请求创建方法调用。在上述情况下，建议框每次都调用一个新对象，而 inputtext 上的 onchange 也每次都调用一个新对象。

我想出的解决方案是将 bean 范围设置为“视图”，这样对于该视图，bean 对象保持不变，因此所有请求都可以共享状态。然后在建议框的 onsubmit 事件中调用 inputtext 的 onchange 事件，该事件使用 inputtext 中的最新值更新 bean 字段。

```
<rich:suggestionbox limitToList="true" id="suggestionBoxId" for="text" tokens=",[]" suggestionAction="#{actionBean.autocomplete}" var="result" fetchValue="#{result.number}" height="100" width="200" nothingLabel="No contacts found" columnClasses="center" usingSuggestObjects="true" onsubmite="call onchange event on inputext field"> 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:56:24.123

您必须将选定的值传递给服务器才能排除它们。也许你可以做一些 JavaScript hack，但不会更干净（参见 usingSuggestObjects 和 onobjectchange）。

# php - 用 json 数据填充灯箱表单的字段

> ID：14503305
> 
> 赞同：0
> 
> 时间：2013-01-24T14:11:00.530
> 
> 标签：php, jquery, json, lightbox

我有一个加载到灯箱面板中的表单和来自 php 脚本的 json 响应。所以我试图从表单字段中的 json 加载数据，但没有任何反应。既不是错误也不是结果。

这是一些代码：

形式：

```
<form id="FORM" name="newUserForm">
                <br>
                <label for="username" style="padding-right:35px;">Username: </label>
                <input type="text" name="username" id="username" value=""  style="margin-right:35px;">
                <label for="email" style="padding-right:35px;">Email: </label>
                <input type="text" id = "email" name="email" value="" ><br><br>
                <label for="password" style="padding-right:40px;">Password: </label>
                <input type="password" id="password" name="password"><br><br>
                <label for="repeatpassword">Repeat Password: </label>
                <input type="password" name="repeatPassword" style="margin-right:35px;">
                <label for="submitBt" id="submitEditUser" style="background-color:black;color:white;font-weight:bold;padding:4px 4px 4px 4px;">Submit</label>
            </form> 
```

Javascript：

```
var user = user_id;

    jQuery.ajax({
        type: "POST",
        async : false,
        url: "/op/controller.php",
        data: { method: "editUser", user_id: user },
        contentType : ('application/x-www-form-urlencoded'),
        dataType : "json" ,
        success : function(json){
            $('#lightbox-background').fadeIn(300); 
            $('#lightbox-panel').fadeIn(300).load('forms/editUserForm.php');
            $('#username').val = json.username;
        }
    }); 
```

我也尝试过使用 getElementById 并填充，但什么也没发生。

有什么想法为什么会存在这个问题？也许是因为灯箱？

另外我想说html表单存在于forms/editUserForm.php文件中。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T17:16:24.110

您需要将最后一个命令放在 load() 的回调中，并且 #username 的新值必须像这样在 val() 中作为参数传递

```
var user = user_id;

jQuery.ajax({
    type: "POST",
    async : false,
    url: "/op/controller.php",
    data: { method: "editUser", user_id: user },
    contentType : ('application/x-www-form-urlencoded'),
    dataType : "json" ,
    success : function(json){
        $('#lightbox-background').fadeIn(300); 
        $('#lightbox-panel').fadeIn(300).load('forms/editUserForm.php', function(){
           $('#username').val(json.username);
        });
    }
}); 
```

# c# - Scala 中 C# 事件的惯用等价物是什么

> ID：14503306
> 
> 赞同：9
> 
> 时间：2013-01-24T14:11:01.933
> 
> 标签：c#, scala

在 C# 中，类和接口可以有`event`：

```
public class Foo
{
    public event Action SomethingHappened;

    public void DoSomething()
    {
        // yes, i'm aware of the potential NRE
        this.SomethingHappened();
    }
} 
```

这有助于使用最少的样板代码实现基于推送的通知，并启用多订阅者模型，以便许多观察者可以监听事件：

```
var foo = new Foo();
foo.SomethingHappened += () => Console.WriteLine("Yay!");
foo.DoSomething();  // "Yay!" appears on console. 
```

Scala中是否有等效的成语？我正在寻找的是：

1.  最小样板代码
2.  单个发布者，多个订阅者
3.  附加/分离订阅者

在 Scala 文档中使用它的例子会很棒。我不是在 Scala 中寻找 C# 事件的*实现*。相反，我正在寻找 Scala 中的等效**习语**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T14:24:43.130

scala 的惯用方式是不使用观察者模式。请参阅[弃用观察者模式](http://lampwww.epfl.ch/~imaier/pub/DeprecatingObserversTR2010.pdf)。

看看[这个答案](https://stackoverflow.com/a/10635684/406435)以实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T14:29:18.913

[这是一篇很好的文章，如何在 Scala 中实现 C# 事件](http://blog.omega-prime.co.uk/?p=21)认为它可能真的很有帮助。

基本事件类；

```
class Event[T]() {

  private var invocationList : List[T => Unit] = Nil

  def apply(args : T) {
    for (val invoker <- invocationList) {
      invoker(args)
    }
  }

  def +=(invoker : T => Unit) {
    invocationList = invoker :: invocationList
  }

  def -=(invoker : T => Unit) {
    invocationList = invocationList filter ((x : T => Unit) => (x != invoker))
  }

} 
```

和使用；

```
val myEvent = new Event[Int]()

val functionValue = ((x : Int) => println("Function value called with " + x))
myEvent += functionValue
myEvent(4)
myEvent -= functionValue
myEvent(5) 
```

# ldap - ApacheDS webapp 和 Cloudfoundry

> ID：14503308
> 
> 赞同：0
> 
> 时间：2013-01-24T14:11:14.450
> 
> 标签：ldap, cloud-foundry

我将嵌入式 apacheds 应用程序部署到公共 cloudfoundry！但我无法从我机器上的 ldap 客户端访问它！我的服务器属性： 主机：[http](http://kenzdz.cloudfoundry.com/) ://kenzdz.cloudfoundry.com/ 端口：10389 root dn：ou=system

当我在同一个项目中使用一个类来访问服务器时，它会像链接一样成功： http: [//kenzdz.cloudfoundry.com/ldaptest](http://kenzdz.cloudfoundry.com/ldaptest)：它是一个访问 ldap 服务器的 servlet，但是当我使用 ldap 客户端时就像 jexplorer 远程访问服务器一样，它没有成功。是因为嵌入式 ldap 服务器我做不到吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T15:17:18.073

Cloudfoundry.com 分别只允许端口 80 和 443 上的入站 http(s) 流量（请参阅[我可以在 Cloud Foundry 上打开一个端口吗？](https://stackoverflow.com/questions/11756517/may-i-open-a-port-on-cloud-foundry)）。因此，您将无法使用 LDAP 协议与您部署的应用程序进行交互。

# android - 将 minizip 与 android ndk 一起使用

> ID：14503315
> 
> 赞同：4
> 
> 时间：2013-01-24T14:11:44.927
> 
> 标签：android, android-ndk, java-native-interface, zlib

我需要在 android ndk中使用[minizip和 zlib。](https://github.com/android/platform_external_zlib/tree/master/src/contrib/minizip)

我的 jni/MyApp/Android.mk 文件：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := MyApp
LOCAL_SRC_FILES := MyApp.cpp

LOCAL_LDLIBS := -lz

include $(BUILD_SHARED_LIBRARY) 
```

我的 jni/Android.mk

```
LOCAL_PATH := $(call my-dir)
include $(call all-subdir-makefiles) 
```

我的 jni/MyApp/MyApp.cpp

```
#include <zlib.h>
#include "minizip/unzip.h" #it's in jni/MyApp/minizip/unzip.h

void unzip(char* file, char* folder) {
    unzFile zip = unzOpen(file);
} 
```

我的 jni/Application.mk

```
APP_MODULES      := MyApp
APP_STL := gnustl_static 
```

但是，当我编译它时：

```
Gdbserver      : [arm-linux-androideabi-4.6] libs/armeabi/gdbserver
Gdbsetup       : libs/armeabi/gdb.setup
SharedLibrary  : libMyApp.so
C:/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe:
Z:/workspace/MyApp/obj/local/armeabi/objs-debug/MyApp/MyApp.o: in function unzip(char*, char*):Z:/workspace/MyApp/jni/MyApp/MyApp.cpp:5: error: undefined reference to 'unzOpen' collect2: ld returned 1 exit status make: *** [Z:/workspace/MyApp/obj/local/armeabi/libMyApp.so] Error 1 
```

如果我删除“unzFile zip = unzOpen(file);”行 有用

你能帮助我吗？:D

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T13:30:05.503

哦...

我忘了在 LOCAL_SRC_FILES 中添加 c 文件：D

# c# - 复制保存在解决方案中的 Excel 模板

> ID：14503317
> 
> 赞同：0
> 
> 时间：2013-01-24T14:11:57.720
> 
> 标签：c#, visual-studio, projects-and-solutions

我有这个解决方案结构：

![在此处输入图像描述](../Images/20f2e82c0b3b474bdd9c5357d26c513b.png)

我想复制此模板，然后将其副本保存到网络驱动器。使用`System.IO`我以前使用此代码获取文件的副本：

```
string templateFilePath = @"\\blah\blah\blah\blah\Temp.xlsx";   //<<<< X
string exportFilePath = @"\\blah\blah\blah\blah\Results.xlsx";
File.Copy(templateFilePath, exportFilePath, true); 
```

因为模板保存在解决方案中，我还需要指定完整的路径还是引用这个文件的时间更短？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:55:38.287

您需要指定文件的完整路径或关于可执行文件运行位置的相对路径。所以你可以设置 targetFileName = ".\template.xlsx

获取文件的另一种方法是在文件的属性中标记 Build Action 并将其设置为 Embedded Resource。然后使用以下代码获取流。不确定流是否会对您有所帮助。

```
Assembly asm = Assembly.GetExecutingAssembly();
string file = string.Format("{0}.Template.xlsx", asm.GetName().Name);
var ms = new MemoryStream();
Stream fileStream = asm.GetManifestResourceStream(file); 
```

# php - 使用 mysql 查询加速 php（连接与间隔创建表）

> ID：14503320
> 
> 赞同：0
> 
> 时间：2013-01-24T14:12:04.087
> 
> 标签：php, mysql

我有一个网站，数据库中有大约 50,000 人。为了生成我的统计数据，我需要从 3 个表中提取数据并将它们连接在一起。每天都有更多的数据进来，所以页面变得越来越慢。我想知道是否可以创建一个表来连接我需要的所有数据，然后从该表中运行我的 php。如果表创建可以每小时运行一次或其他一些内部设置以包含新数据，那就太好了。这是可能的和可取的吗？你能指点我一些资源吗？

我正在使用 mysql 作为数据库。

谢谢！

我这里有 3 张桌子 - 村级、居民级，如果他们缺席，还有一张缺席表及其结果。

```
 SELECT EU, sum(TF) as TFsum, sum(TT) as TTsum, sum(KID) as Nkid, 
          sum(ADULT) as Nadult

                    from 
                (select EU, b.name as Person,

                    CASE
                       WHEN b.RIGHT_EYE_TF=1 THEN 1
                       WHEN b.LEFT_EYE_TF=1 THEN 1
                       WHEN c.RIGHT_EYE_TF=1 THEN 1
                       WHEN c.LEFT_EYE_TF=1 THEN 1
                       ELSE 0
                     END AS TF,
                    CASE
                       WHEN b.RIGHT_EYE_TT=1 THEN 1
                       WHEN b.LEFT_EYE_TT=1 THEN 1
                       WHEN c.RIGHT_EYE_TT=1 THEN 1
                       WHEN c.LEFT_EYE_TT=1 THEN 1
                       ELSE 0
                     END AS TT,

                    CASE
                      WHEN AGE <= 9 THEN 1
                      ELSE 0
                    END AS KID,
                    CASE
                      WHEN AGE >= 15 THEN 1
                      ELSE 0
                    END AS ADULT 

                    from 
                    villagedb a LEFT JOIN residentdb b
                    ON
                    a.CLUSTER = b.RES_CLUSTER
                    LEFT JOIN
                    absentdb c
                    on
                    b.RES_HOUSEHOLD_ID=c.RES_HOUSEHOLD_ID AND 
                    b.NAME = c.NAME
                    GROUP BY EU, b.name

                    ) S

                    GROUP BY EU 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:56:55.633

我在这里看到两个问题：

*   第一个已经指出 - 优化查询和数据库（索引、非规范化、视图、存储过程等）
*   第二 - 仅显示前 100 名等有限结果（比如说分页）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:37:23.853

尝试以下操作：

1.  添加索引
2.  规范化表（我建议阅读规范化，为了提高性能，你的表必须至少在前 3 个正常形式中，如果你想进一步规范化它，你可以使用 BCNF。

您可以从具有公共字段的两个表中创建一个表。而不是加入表，您将拥有类似缓存表的东西，您可以从中选择必要的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T14:18:30.370

如果您需要对大量数据创建统计信息，并且通常，最好的方法是对表中的数据进行非规范化。

用简单的英语创建新表，用从连接中获得的数据填充它，当你在旧表中插入数据时，也填充这些表。这样，您将显着加快报告速度。因为连接并不快，尤其是在处理大量数据的情况下，重复数据的速度要快得多，但您需要更加努力地让数据始终保持同步。

# php - PHP函数从文件中获取所有匹配的行

> ID：14503321
> 
> 赞同：0
> 
> 时间：2013-01-24T14:12:22.493
> 
> 标签：php, file, search

我正在尝试从 html 文件中搜索多个匹配的行并返回这些行。

如果有单个匹配，那么它可以工作。但是，如果有多个匹配项，它不会返回任何内容。

这是代码：

```
$line = getLineFromFile("abc.html", 'http://www.abc.com/');

echo $line;

function getLineFromFile($file, $string) {
    $lines = file($file);
    foreach($lines as $lineNumber => $line) {
        if(strpos($line, $string) !== false){
            return $lines[$lineNumber];
        }
    }
    return false;
} 
```

为什么它不返回所有匹配的行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:14:01.443

从函数返回后，该函数调用将停止执行。您需要将结果存储在一个数组中，然后将其返回。

```
function getLineFromFile($file, $string) {
    $lines = file($file);
    $matches = array();
    foreach($lines as $lineNumber => $line) {
        if(strpos($line, $string) !== false){
            $matches[] = $lines[$lineNumber];
        }
    }
    return $matches;
} 
```

只需确保检查空数组而不是`false`检查此函数的结果时。

# php - AVG 日期时间间隔，显示天数和小时数

> ID：14503327
> 
> 赞同：0
> 
> 时间：2013-01-24T14:12:37.093
> 
> 标签：php, mysql, timestamp, average

我正在尝试计算表中列 (hit_date) 中 TIMESTAMP (YY-MM-DD HH:MM:SS) 记录之间的平均间隔。

我在 MySql 中做到了这一点：

```
SELECT DATEDIFF(MAX(hit_date), MIN(hit_date)) / (COUNT(hit_date) - 1) AS hitavg FROM my_table 
```

这将返回一个值，即 135.50。

然后，我在 PHP 中执行此操作以显示结果：

```
$value = ($res_from_mysql_query);

$days = (int) $value;
$hours = 24 * ($value - $days);

echo "$days Days, $hours Hours"; 
```

我的结果是：

135 天，0 小时。

但这不是正确的结果……怎么了？我必须在 MySql 中使用 TIMEDIFF 吗？如果是，我得到一个完全不同的值......那么，我怎样才能实现我的 PHP 脚本？

如何正确显示此间隔的天数和小时数？

请帮助我改进这一点，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:34:27.227

那个代码怎么样：

```
SELECT TIMESTAMPDIFF(HOUR, MIN(hit_date), MAX(hit_date)) / (COUNT(*)-1) AS hitavg FROM my_table 
```

`TIMESTAMPDIFF(UNIT, DATETIMEEXP1, DATETIMEEXP2)`返回 DATETIMEEXP1 和 DATETIMEEXP2 之间的 HOURS 差。对于每个“选择”，查询查找第一次和最后一次点击（访问）的日期以及总访问次数，然后计算算术平均值。然后在 PHP 中是显示差异的简单方法......

也许你应该看看这些 MySQL ref：

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timediff](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timediff)

# android - Eclipse DDMS 中的线程状态为“本机”

> ID：14503337
> 
> 赞同：2
> 
> 时间：2013-01-24T14:13:16.190
> 
> 标签：android, eclipse, ddms

我注意到`ExecutorService`我创建的对象中的一些线程具有“本机”状态。“原生”是什么意思？ ![在此处输入图像描述](../Images/215482f2612f2091c4eaaf9753c9f67c.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T14:19:24.810

在java中，你有两种类型的线程，绿色线程和本机线程。

绿色线程和本机线程都是支持 Java 程序多线程执行的机制。一些 JDK 发行版（例如 Blackdown 的）包括使用任一类型的线程运行的选项。

本机线程使用操作系统的本机能力来管理多线程进程 - 特别是，它们使用 pthread 库。当您使用本机线程运行时，内核会调度和管理组成进程的各种线程。

绿色线程模拟多线程环境，不依赖任何本机操作系统功能。他们在管理和调度线程的用户空间中运行代码；Sun 编写了绿色线程以使 Java 能够在没有本地线程支持的环境中工作。

在 Linux 环境中使用这两者有一些重要的区别：

原生线程可以在线程之间抢先切换，随时将控制权从正在运行的线程切换到非运行的线程。仅当线程（Thread.yield()、Object.wait() 等）显式放弃控制或线程执行阻塞操作（read() 等）时，绿色线程才会切换。

在多 CPU 机器上，通过将不同的线程分配给不同的 CPU，本地线程可以同时运行多个线程。绿色线程仅在一个 CPU 上运行。

本机线程创建了许多 Java 进程正在运行的外观：每个线程在进程表中占用自己的条目。这些都是同一进程的所有线程的一个线索是所有线程的内存大小都是相同的——它们都使用相同的内存。

不幸的是，这种行为限制了 Java 在 Linux 上的可扩展性。进程表不是无限大的，进程在耗尽系统资源或达到配置限制之前只能创建有限数量的线程。

# vb.net - 如何在 Visual Studio 2012 Professional 中创建安装文件？

> ID：14503342
> 
> 赞同：0
> 
> 时间：2013-01-24T14:13:27.060
> 
> 标签：vb.net

我正在 Visual Studio 2012 中创建 Windows 应用程序。我想创建该应用程序的设置文件。但在 Visual Studio 2012 专业版中不提供选项 - 设置和部署我可以为创建设置文件做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:21:35.203

您可以使用 Install Shield 或了解有关[ClickOnce的更多信息](http://msdn.microsoft.com/en-us/library/t71a733d.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:45:58.513

[来自http://www.jrsoftware.org/isinfo.php](http://www.jrsoftware.org/isinfo.php)的Inno Setup是一个了不起的工具。它是免费的，但如果你愿意，你也可以捐赠。

# git - 如何查看 git 中手动解决的冲突（github、一些应用程序、InteliJ）

> ID：14503343
> 
> 赞同：3
> 
> 时间：2013-01-24T14:13:40.497
> 
> 标签：git, github, branching-and-merging, merge-conflict-resolution

对我来说，手动解决的冲突是最大的错误来源之一。

目前我们正在解决在一台显示器前大声聚集的冲突，我认为这是石器时代的做法。此外，在保存并关闭视觉差异工具后，如果我们想复查或修复某些问题，我们以后无法返回冲突视图。

我正在寻找一种方法来快速查看 git 中所有最新的手动解决的冲突。

**我希望看到每个冲突的 A 分支、B 分支和生成的代码段。**

我可以手动为 deside 工具提供提交编号，或者我可以在列表中查看冲突。

* * *

无关：

如果发生冲突，我的好主意是引入合并审查。所有负责该部分代码（在两个分支中）的开发人员都应该审查冲突，尤其是在他们远程工作时。只有在双方确认后才允许合并怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T23:21:38.233

使用 git 很容易：

```
git log --patch -c -1 YOURMERGE 
```

这将输出如下内容：

```
index ea575f9,b943345..239a586
--- a/file-with-conflicts.txt
+++ b/file-with-conflicts.txt
@@@ -1,1 -1,1 +1,1 @@@
- Version A
 -Version B
++Merge Resolution 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T16:19:26.067

我觉得这些“大喊大叫的比赛”也许可以通过改变工作流程来避免。假设开发人员正在开发一个主题分支，但他落后于`master`.

```
A--B--C--D--E--F
       \
        X--Y--Z 
```

而不是他或小组提出合并提交，他可以将他的更改重新定位到他的本地`master`

```
 A--B--C--D--E--F
                 \
                  X'--Y'--Z' 
```

然后，当时机成熟时，它将允许对“官方”主服务器进行干净的合并提交

```
A--B--C--D--E--F--X'--Y'--Z' 
```

[**参考**](http://github.com/dchelimsky/rspec/wiki/Topic-Branches)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-01T15:52:59.523

从`git help log`页面：

`git log --patch -c -1 <commit-id>`

> -c 使用此选项，合并提交的差异输出同时显示每个父级与合并结果的差异，而不是一次显示父级与结果之间的成对差异。此外，它仅列出从所有父项修改的文件。
> 
> -p, -u, --patch 生成补丁（参见生成补丁部分）。

# android - 如何在接听电话之前发送短信

> ID：14503354
> 
> 赞同：0
> 
> 时间：2013-01-24T14:14:03.660
> 
> 标签：android

* * *

在收到此呼叫之前，我使用此代码向来电号码发送短信，但它不发送短信。在清单文件中，我添加了这些权限

```
 <uses-permission android:name="android.permission.CALL_PHONE"/>
<uses-permission android:name="android.permission.MODIFY_PHONE_STATE"/>
<uses-permission android:name="android.permission.READ_PHONE_STATE"/>
<uses-permission android:name="android.permission.SEND_SMS"/>

public class check extends BroadcastReceiver {

Context context = null;
 private static final String TAG = "Phone call";
 private ITelephony telephonyService;

    @Override
     public void onReceive(Context context, Intent intent) {
      Log.v(TAG, "Receving....");

      TelephonyManager telephony = (TelephonyManager) 
      context.getSystemService(Context.TELEPHONY_SERVICE);  
      try {
       Class c = Class.forName(telephony.getClass().getName());
       Method m = c.getDeclaredMethod("getITelephony");
       m.setAccessible(true);
       Bundle b=intent.getExtras();
       num=b.getString(telephony.EXTRA_INCOMING_NUMBER);
       String g=num.substring(num.length()-11,num.length());

       SmsManager smsManager = SmsManager.getDefault();
             smsManager.sendTextMessage(num,null, "rrrrrrrrr", null,null);

      } catch (Exception e) {
       e.printStackTrace();
      }

     } 
```

> 请任何人打电话帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:45:08.817

让你的类扩展 PhoneStateListener 然后使用这个方法。

```
public void onCallStateChanged(int state, String phoneNumber) {
    SmsManager sms = SmsManager.getDefault();
    String message = "";
    if (state == TelephonyManager.CALL_STATE_RINGING) {
        sms.sendTextMessage(phoneNumber, null, message, null, null);
    }
} 
```

# laravel - 如何在 Laravel 4 中将变量发送到主布局？

> ID：14503364
> 
> 赞同：1
> 
> 时间：2013-01-24T14:14:31.340
> 
> 标签：laravel, laravel-4

如何将变量发送到 Laravel 4 中的主布局？

这里 $categories 在主布局中不可用：

```
protected $layout = 'layouts.master';

public function index()
{
    $categories = Category::all();
    $data = array('categories' => $categories);
    $this->layout->content = View::make('catalog.categories', $data);
} 
```

我的主视图：

```
@yield('content')

@if($categories)
   <h1>TEST</h1>
@endif 
```

**“测试”没有出现！**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-03T13:35:46.097

我认为你可以使用这个：

```
$this->layout->with('catalog.categories', $data); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T15:54:51.663

您确定 $categories 包含任何数据吗？

你也可以试试这个：

```
View::make('catalog.categories')->with('categories', $categories); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T14:28:18.597

我没有那么多地使用 laravel，但我认为在 4 中：

```
View::make('catalog.categories', $data); // this looks correct 
```

在您的`child`模板中，您应该扩展主布局：

```
@extends('layout/master')

// define what will be send to the master:
@section('cats')
    {{ $categories }}
@stop 
```

然后在你的主人：

```
@yield('cats') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-13T02:33:58.243

我也刚遇到这个问题。从 Laravel 4.2 开始，我是这样工作的：

要将数据传递给布局：

```
$this->layout->content = View::share('data', $data); 
```

在您的情况下，方法如下：

```
protected $layout = 'layouts.master';

public function index()
{
    $categories = Category::all();
    $data = array('categories' => $categories);
    $this->layout->content = View::share('data', $data);
    $this->layout->content = View::make('catalog.categories', $data);
} 
```

# android - 针对特定版本时的 Android 应用程序设计

> ID：14503368
> 
> 赞同：0
> 
> 时间：2013-01-24T14:14:35.787
> 
> 标签：android, apk

我有一个适用于从 Android-8 开始的所有版本的 Android 应用程序。现在，从 Android-17 开始，我想使用额外的 API，但是我不会将目标 SDK 设置为 Android-17，目标是 Android-17 和更新版本的设备使用额外的 API，而较旧的将跳过使用新 API 中的功能。

显而易见的解决方案是使用新 API 的反射，但是我不能使用它，因为我需要创建一个从新的 Android-17 API 扩展类的新类，这是不可能的（尝试使用 Proxy 和 InvocationHandler 但他们仅适用于接口）。

任何想法如何设计这个？最好不要创建 2 个不同的 APK 版本。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:17:53.413

使用 if 语句包装对新 API 的所有访问。Android 2.0+ 不会由于找不到框架类而引发异常，除非您实际尝试使用一个（以前验证程序会在运行代码之前检查所有使用的类是否存在）。检查 android.os.Build.VERSION 以查看手机使用的版本。

# vb.net - VB.NET Select Case - 正确的说法是什么？

> ID：14503373
> 
> 赞同：2
> 
> 时间：2013-01-24T14:14:51.603
> 
> 标签：vb.net, select-case

为什么下面的代码不起作用？

```
Private Function resolveSiteName(ByVal plantName As String, ByVal siteName As String) As Integer
    Dim siteId As Integer = Nothing
    Dim fullName As String = plantName & siteName
    Select Case fullName
        Case fullName.Contains("Example" And "Example2" And "Example3")
            siteId = 0
    End Select
    Return siteId
End Function 
```

我猜我`Select Case fullName`错了，因为在调试它时，满足条件并且它只是跳过分配`siteId`.

我也试过这个

```
Case fullName.Equals("Exactly what full name is") 
```

只是为了测试看看这是否可行......它仍然跳过了分配部分。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T14:43:28.623

这也应该有效：

```
Select Case fullName
   Case "Example", "Example2", "Example3"
      siteId = 0
End Select 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T14:19:46.457

请注意，如果您使用`If`- 子句（这里更合适），这甚至不会编译：

```
If fullName.Contains("Example" And "Example2" And "Example3") Then
    ' this doesn't compile since you cannot concat a string with And
    ' you want to check if fullName equals to one of the strings anyway
    siteId = 0
End If 
```

如果您想一次检查多个项目，请定义一个集合，将所有项目添加到其中，然后使用`Contains`：

```
Dim siteNames = { "Example", "Example2", "Example3" }
If siteNames.Contains(fullName) Then
    siteId = 0
End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T14:18:44.477

试试这个：

```
Select Case fullName
   Case "Example"
      siteId = 0
   Case "Example2"
      siteId = 0
   Case "Example3"
      siteId = 0
End Select 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T14:41:31.513

这解决了你的问题：

```
Select Case True
    Case fullName.Contains("Example")
        siteId = 0
End Select 
```

或者您的第二次尝试：

```
Select Case fullName
    Case "Exactly what full name is"
        siteId = 0
End Select 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-14T14:38:48.283

代替

```
Select Case fullName 
```

和

```
Select Case True 
```

# c# - 是否有使用 Reactive UI 订阅分层属性更改的模式？

> ID：14503374
> 
> 赞同：10
> 
> 时间：2013-01-24T14:14:52.010
> 
> 标签：c#, wpf, mvvm, system.reactive, reactiveui

假设我有以下视图模型：

```
public class AddressViewModel : ReactiveObject
{
    private string line;

    public string Line
    {
        get { return this.line; }
        set { this.RaiseAndSetIfChanged(x => x.Line, ref this.line, value); }
    }
}

public class EmployeeViewModel : ReactiveObject
{
    private AddressViewModel address;

    public AddressViewModel Address
    {
        get { return this.address; }
        set { this.RaiseAndSetIfChanged(x => x.Address, ref this.address, value); }
    }
} 
```

现在假设`EmployeeViewModel`我想公开一个最新值为 的属性`Address.Line`：

```
public EmployeeViewModel()
{
    this.changes = this.ObservableForProperty(x => x.Address)
        .Select(x => x.Value.Line)
        .ToProperty(this, x => x.Changes);
}

private readonly ObservableAsPropertyHelper<string> changes;
public string Changes
{
    get { return this.changes.Value; }
} 
```

这只会在对`Address`属性进行更改时打勾，而不是在`Line`内部`Address`发生更改时打勾。如果我改为这样做：

```
public EmployeeViewModel()
{
    this.changes = this.Address.Changed
        .Where(x => x.PropertyName == "Line")
        .Select(x => this.Address.Line)        // x.Value is null here, for some reason, so I use this.Address.Line instead
        .ToProperty(this, x => x.Changes);
} 
```

这只会`Line`在当前`AddressViewModel`发生更改时打勾，但不考虑`AddressViewModel`完全设置一个新的（也不适应 a `null` `Address`）。

我试图用正确的方法解决这个问题。我是 RxUI 的新手，所以我可能会遗漏一些明显的东西。我*可以*手动挂钩地址更改并设置辅助订阅，但这看起来很丑陋且容易出错。

**我应该使用标准模式或助手来实现这一目标吗？**

下面是一些可以复制/粘贴的代码来试试这个：

*ViewModels.cs*：

```
namespace RxUITest
{
    using System;
    using System.Reactive.Linq;
    using System.Threading;
    using System.Windows.Input;
    using ReactiveUI;
    using ReactiveUI.Xaml;

    public class AddressViewModel : ReactiveObject
    {
        private string line1;

        public string Line1
        {
            get { return this.line1; }
            set { this.RaiseAndSetIfChanged(x => x.Line1, ref this.line1, value); }
        }
    }

    public class EmployeeViewModel : ReactiveObject
    {
        private readonly ReactiveCommand changeAddressCommand;
        private readonly ReactiveCommand changeAddressLineCommand;
        private readonly ObservableAsPropertyHelper<string> changes;
        private AddressViewModel address;
        private int changeCount;

        public EmployeeViewModel()
        {
            this.changeAddressCommand = new ReactiveCommand();
            this.changeAddressLineCommand = new ReactiveCommand();

            this.changeAddressCommand.Subscribe(x => this.Address = new AddressViewModel() { Line1 = "Line " + Interlocked.Increment(ref this.changeCount) });
            this.changeAddressLineCommand.Subscribe(x => this.Address.Line1 = "Line " + Interlocked.Increment(ref this.changeCount));

            this.Address = new AddressViewModel() { Line1 = "Default" };

            // Address-only changes
            this.changes = this.ObservableForProperty(x => x.Address)
                .Select(x => x.Value.Line1 + " CHANGE")
                .ToProperty(this, x => x.Changes);

            // Address.Line1-only changes
            //this.changes = this.Address.Changed
            //    .Where(x => x.PropertyName == "Line1")
            //    .Select(x => this.Address.Line1 + " CHANGE")        // x.Value is null here, for some reason, so I use this.Address.Line1 instead
            //    .ToProperty(this, x => x.Changes);
        }

        public ICommand ChangeAddressCommand
        {
            get { return this.changeAddressCommand; }
        }

        public ICommand ChangeAddressLineCommand
        {
            get { return this.changeAddressLineCommand; }
        }

        public AddressViewModel Address
        {
            get { return this.address; }
            set { this.RaiseAndSetIfChanged(x => x.Address, ref this.address, value); }
        }

        public string Changes
        {
            get { return this.changes.Value; }
        }
    }
} 
```

*主窗口.cs*：

```
using System.Windows;

namespace RxUITest
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            this.DataContext = new EmployeeViewModel();
        }
    }
} 
```

*MainWindow.xaml*：

```
<Window x:Class="RxUITest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <StackPanel>
        <TextBlock Text="{Binding Changes}"/>
        <Button Command="{Binding ChangeAddressCommand}">Change Address</Button>
        <Button Command="{Binding ChangeAddressLineCommand}">Change Address.Line1</Button>
    </StackPanel>
</Window> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-24T23:35:53.753

不，有一种更简单的方法可以做到这一点：

```
this.WhenAny(x => x.Address.Line, x => x.Value)
    .Subscribe(x => Console.WriteLine("Either Address or Address.Line changed!")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:23:07.437

如果您认为您的地址可能是行的简单集合，即

```
class AddressViewModel 
 : ObservableCollection<LineViewModel>, INotifyPropertyChanged 
```

那么您可能会附加一个事件处理程序来传播更改

```
this.CollectionChanged += this.NotifyPropertyChanged(...); 
```

所以我会为 ReactiveObject 做同样的事情，但使用 Rx

```
public class EmployeeViewModel : ReactiveObject
{
private AddressViewModel address;
private IDisposable addressSubscription;

public AddressViewModel Address
{
    get { return this.address; }
    set 
    { 
        if (addressSubscription != null)
        {
            addressSubscription.Dispose();
            addressSubscription =null;
        }
        if (value != null)
        {
            addressSubscription = value.Subscribe(...);
        }
        this.RaiseAndSetIfChanged(x => x.Address, ref this.address, value); 
     }
} 
```

}

# android - 如何更新 sqlite 数据库？

> ID：14503376
> 
> 赞同：0
> 
> 时间：2013-01-24T14:15:06.073
> 
> 标签：android, database, sqlite, sql-update

我想对我的 android 应用程序的 sqlite 数据库进行更新，但在更新方法中出现错误。

我的代码：

```
public void addInfo(View view){

        EditText et = (EditText)findViewById(R.id.txtContacto);

        String TAG = ((TextView)findViewById(R.id.textView2)).getText().toString(); 
        String FACH = ((TextView)findViewById(R.id.textView1)).getText().toString();

        ContentValues werte = new ContentValues();
        werte.put("info",et.getText().toString());

        mDatenbank.update(TAG, werte, "name="+FACH, null);

        Toast.makeText(this, 
                getResources().getString(R.string.db_info_add),
                Toast.LENGTH_SHORT).show(); 

    } 
```

TAG 是我的表名 FACH 是一列

表布局：

id (int) | 名称（文本） | 信息（文本）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:24:02.200

如果 FACH 包含字符串文字所需的引号，它将起作用，如`String FACH="'I am quoted'"`. 它仍然是错误的：真正的解决方案是使用`whereArgs`，如下所示：

```
mDatenbank.update(TAG,werte,"name=?",new String[] { FACH }); 
```

（免责声明：我不使用 Java，我的代码可能错误得离谱）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:37:31.477

这里有一个很好的例子：[http ://www.androidhive.info/2011/11/android-sqlite-database-tutorial/](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

```
updateContact()
    // Updating single contact
public int updateContact(Contact contact) {
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_NAME, contact.getName());
    values.put(KEY_PH_NO, contact.getPhoneNumber());

    // updating row
    return db.update(TABLE_CONTACTS, values, KEY_ID + " = ?",
            new String[] { String.valueOf(contact.getID()) });
} 
```

最好的办法是向我们展示 logcat

# tortoisegit - 在 TortoiseGit 中更改 repo url

> ID：14503381
> 
> 赞同：59
> 
> 时间：2013-01-24T14:15:29.543
> 
> 标签：tortoisegit

我们刚刚将我们的 git 存储库更新到了一个新位置，我正在使用 TortoiseGit 并进行了一些未提交的更改。我可以在任何地方更改文件夹引用吗？我没有在上下文菜单中看到该选项。如果可以避免的话，我宁愿不重新创建和合并，因为总共大约有 14 个 repos。我不太精通 git，所以如果问题也有缺陷，请告诉我。

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2013-07-27T19:33:11.770

据我了解的问题。更改远程存储库 url 的路径是：

*   右键单击主文件夹
*   TortoiseGit
*   设置
*   吉特
*   偏僻的
*   在字段远程选择源 -> 存储库的 url 将出现在字段 URL: 中，并且可以从这里更改。

未提交的更改可以隐藏或在本地提交。

# python - 实现一个 Flask 蓝图以便它可以安全地安装多次？

> ID：14503387
> 
> 赞同：3
> 
> 时间：2013-01-24T14:15:41.433
> 
> 标签：python, flask

烧瓶文档说：

> 您可以多次注册蓝图，但并非每个蓝图都可以正确响应。事实上，它是否可以多次挂载取决于蓝图是如何实现的。

但我似乎无法找出必须做些什么才能安全地多次安装蓝图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:20:17.313

很难回答这样的问题，因为它太笼统了。

首先，您的蓝图需要以不假设将要注册的应用对象的状态的方式实现。其次，您需要使用可配置的 url 方案来防止路由冲突。

这其中有更多细微差别的组件，但是没有看到您的具体代码和问题，它就像我觉得我能得到的一样具体。

# ruby-on-rails - 为什么我的分页不能正常工作？

> ID：14503388
> 
> 赞同：2
> 
> 时间：2013-01-24T14:15:41.620
> 
> 标签：ruby-on-rails, ruby-on-rails-3, kaminari

我有 3 个模型，例如用户、社区和唯一代码。
然后我`kaminari`用于分页。

我面临的问题是，每个参数 [:page] 的唯一代码记录数量不同（更改）。

此外，`<% @uniquecode_count %>`返回 '1' ......不过，它必须是 '1'。

这真的很奇怪。就我而言。我有 3 个唯一代码。
正如我`paginates_per 1`在 Uniquecode 模型中所做的那样，它应该在每一页只显示 1 条记录。然而

*   在佩奇。1 它显示 3 条记录
*   在佩奇。2 它显示 2 条记录
*   在佩奇。3 它显示 1 条记录

谁能帮我解决这个问题？

我这样定义关联

```
User has_many :communities
User has_many :uniquecodes

Community belongs_to :user
Community has_many :uniquecodes

Uniquecode belongs_to :user
Uniquecode belongs_to :community 
```

**唯一码模型**

```
paginates_per 1 
```

**控制器**

```
@user = User.find(params[:id])
@uniquecodes = @user.uniquecodes.page(params[:page])
@uniquecodes_count = @uniquecodes.count 
```

**看法**

```
<%= paginate @uniquecodes, :window => 4 %>
<% @uniquecodes.recent.each do |uniquecode| %>   
    <%= render 'uniquecodes/uniquecode', :uniquecode => uniquecode %>
<% end %>

<% @uniquecode_count %>  => this shows '1'. It has to show '3' though. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:21:35.080

```
PER_PAGE = 1 # declared as class constant
@uniquecodes = @user.uniquecodes.page(params[:page], :per_page => PER_PAGE) 
```

通过 per_page

# java - JSON 改变值

> ID：14503389
> 
> 赞同：0
> 
> 时间：2013-01-24T14:15:47.143
> 
> 标签：java, json, tapestry

这是第一个 JSON 对象到字符串输出

```
{
  "session_id" : "zzz00001111",
  "name" : "Administrator",
} 
```

但是当我打电话时，

```
response.remove("session_id");
response.append("session_id","abc12345678") ; 
```

它变成了以下。

```
{
  "session_id" : [
    "abc12345678"
  ],
  "name" : "Administrator",
} 
```

但我不需要更改 JSON 的样式，我只需要更改 session_id 的值。任何想法如何做到这一点。我累了追加它没有工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T14:31:52.620

该[`public JSONObject append(String key, Object value)`](http://tapestry.apache.org/tapestry5/apidocs/org/apache/tapestry5/json/JSONObject.html#append%28java.lang.String,%20java.lang.Object%29)方法的描述说：

> 将值附加到键下的数组中。如果 JSONObject 中不存在该键，则将该键放入 JSONObject 中，其值为包含 value 参数的 JSONArray。如果键已经与 JSONArray 关联，则将 value 参数附加到它。

所以，这就是你得到一个数组的原因。

正确的使用方法是[`public JSONObject put(String key, Object value)`](http://tapestry.apache.org/tapestry5/apidocs/org/apache/tapestry5/json/JSONObject.html#put%28java.lang.String,%20java.lang.Object%29)：

> 在 JSONObject 中放置一个键/值对。如果值为 null，则如果存在，则将从 JSONObject 中删除该键。

在您的情况下，只需使用：

```
response.put("session_id","abc12345678"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T14:22:45.187

尝试以下

response.put("session_id","session-id")

# javascript - 如何在 Genshi 中渲染 javascript 模板？

> ID：14503395
> 
> 赞同：1
> 
> 时间：2013-01-24T14:16:01.090
> 
> 标签：javascript, templates, handlebars.js, mustache, genshi

我想在 genshi 模板中渲染一个 mustache/handlebars 模板。由于 mustache 标签，Genshi 似乎引发了 TemplateSyntaxError。

我尝试将 CDATA 标记（如在[此处](https://stackoverflow.com/questions/3201343/javascript-templates)发布的）放在内部和外部`<script>`：

```
<script id="some-template" type="text/x-mustache-template">
    <![CDATA[
    ... my template here ...
    ]]>
</script> 
```

因为我这样做`$('#some-template').html()`了，Handlebars 只是将 CDATA 标记与 html 的其余部分一起呈现，这会弄乱结果。

```
<![CDATA[
<script id="some-template" type="text/x-mustache-template">
    ... my template here ...
</script>
]]> 
```

这样，浏览器就注释了第一个`<script>`标签。

此外，使用注释 CDATA`<!-- -->`会引发错误，并且在脚本中使用`/* */`只会导致 Handlebars 按原样打印它。

有没有办法告诉 Genshi 不要解析模板的一大块？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-02T16:11:40.597

不确定这是否有帮助，但我遇到了类似的问题。

我有一大块标记正在通过 XML 解析器运行，该解析器将把手模板添加到稍后将由脚本编译的 DOM。

为了让车把模板通过 XML 解析器，我需要使用 CDATA 块进行包装，但这会导致与您的问题类似的问题。如果我将 CDATA 放在脚本标签中，那么模板标记的第一部分就会被注释掉。如果我把它们放在外面，整个模板都会被注释掉，并且无法通过脚本调用来编译它。

我可以通过插入 HTML 注释作为不必要的屏蔽来绕过它，如下所示：

```
<div id="contentChunk">
    <div id="blah" class="foo">
        Some vanilla HTML being added.
    </div>
    <script id="hbTemplate" type="text/x-handlebars-template">
        <![CDATA[
        <!-- blocker comment: first html node of handlebars script gets swallowed. -->
        {{#each data.items}}
        <div id="item{{id}}">{{{name}}}</div>
        {{/each}}
        <!-- ]]> -->
    </script>
</div> 
```

我还将尾随的 CDATA 关闭标记包装在注释中，否则我会得到一个文字 ]]> 来呈现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-09T19:07:33.853

您可以将 CDATA 定界符放在小胡子注释中：

```
<script id="some-template" type="text/x-mustache-template">
    {{! <![CDATA[ }}
    ... my template here ...
    {{! ]]> }}
</script> 
```

`// <![CDATA[`（这本质上与使用和`// ]]>`用于 JavaScript 脚本的技巧相同。）

# jquery - 选项卡 - 使用悬停（mouseeneter 和离开）并单击

> ID：14503401
> 
> 赞同：0
> 
> 时间：2013-01-24T14:16:08.967
> 
> 标签：jquery, tabs, click, mouseenter, mouseleave

我在使用标签时遇到了问题。我尝试实现标签功能，例如作为站点[http://mashable.com](http://mashable.com)。

选项卡可以悬停并通过悬停显示选项卡内容。如果我单击选项卡，选项卡内容应该被隐藏，不可见 UNTIL mouseleave `<li>`。如果我再次鼠标输入，将显示选项卡内容。

我遇到了组合悬停和单击的问题。使用此代码，我遇到了以下问题：
1\. 页面加载
- 如果在页面加载期间标签上下移动，尽管单击标签，但由于 mouseenter 会显示标签内容
2\. 单击标签`<li>`
- 单击标签有时会显示标签内容，有时不显示 -没有规则；必须不显示
- 如果未显示选项卡内容，如果我移动鼠标（我没有 mouseleave `<li>`），有时会显示选项卡内容，有时不显示

HTML：

```
<div id="tabs">
    <ul id="tabstest">
        <li id="tab1" class="tab" onclick="location.href='\ttest1.php';"  style="cursor:pointer;"><strong>Test 1</strong></li>
        <li id="tab2" class="tab"> <a href="/Test/test2.php" class="tab_link" ><strong><br>Test 2</strong></a></li>
        <li id="tab3" class="tab"> <a href="/Test/test3.php" class="tab_link" ><strong>Test 3</strong></a></li>
        <li id="tab4" class="tab" onclick="location.href='\ttest4.php'; " style="cursor:pointer;" ><strong><br>Test 4</strong></li>
        <li id="tab5" class="tab"> <a href="/Test/test5.php" class="tab_link" ><strong><br>Test 5</strong></a></li>
        <li id="tab6" class="tab"> <a href="/Test/test6.php" class="tab_link" ><strong><br>Test 6</strong></a></li>
    </ul>
</div>
<div id="tabcontents">
    <div id="tab1content" class="tabcontent">
        <p>tab1 content</p>
    </div>  
    <div id="tab2content" class="tabcontent">
        <p>tab2 content</p>
    </div>   
    <div id="tab3content" class="tabcontent">
        <p>tab3 content</p>
    </div>
    <div id="tab4content" class="tabcontent">
        <p>tab4 content</p>
    </div>    
    <div id="tab5content" class="tabcontent">
        <p>tab5 content</p>
    </div>
    <div id="tab6content" class="tabcontent">
        <p>tab6 content</p>
    </div>
</div> 
```

查询：

```
$(window).load(function(){
    $(".tab").focus(function() {
       var tabId = $(this).attr('id');
        $("#" + tabId + "content").hide();
   });  
    $(".tabcontent").focus(function() {
        $(this).hide();
    });
    $(".tab").click(function() {
       var tabId = $(this).attr('id');
        $("#" + tabId + "content").hide();
   });  
    $(".tabcontent").click(function() {
        $(this).hide();
    }); 
    $(".tab").mouseenter(function() {
        var tabId = $(this).attr('id');
        $("#" + tabId + "content").show();
   });
    $(".tabcontent").mouseenter(function() {
        $(this).show();
    });
    $(".tab").mouseleave(function() {
        var tabId = $(this).attr('id');
        $("#" + tabId + "content").hide();
    });
    $(".tabcontent").mouseleave(function() {
        $(this).hide();
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:46:02.237

首先添加`$(".tabcontent").hide()`页面加载，以便默认隐藏所有内容。除此之外，我没有发现任何“有时有效，有时无效”的错误。您的代码有效，但它不像可混搭的那样，因为在我离开或单击选项卡后内容被隐藏。

就我个人而言，我尽量避免使用列表，因为我发现 div 的基本结构更容易从 javascript 中控制。有几种方法可以创建您想要的内容，开发人员可以选择最适合他的内容。

正如 Lesonaschi 所说，最好的选择可能是嵌套元素（选项卡`div`或内的内容`li`），因为这样悬停功能应该应用于整个块。但不要相信我的话，尝试和实验:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:33:01.707

你好，而不是使用制表符，更容易制作 ul li 并在 li 中放置内容，然后使用 hover() 因为 div 不会隐藏作为 li 的孩子

```
<div id="tabs">
<ul id="tabstest">
    <li id="tab1" class="tab" onclick="location.href='\ttest1.php';"  style="cursor:pointer;">
        <strong>Test 1</strong>
        <div id="tab1content" class="tabcontent">
            <p>tab1 content</p>
        </div>  
    </li>
    <li id="tab2" class="tab" <a href="/Test/test2.php" class="tab_link" >
        <strong><br>Test 2</strong></a>
        <div id="tab2content" class="tabcontent">
            <p>tab2 content</p>
        </div>   
    </li>
    <li id="tab3" class="tab" <a href="/Test/test3.php" class="tab_link" >
        <strong>Test 3</strong></a>
        <div id="tab3content" class="tabcontent">
            <p>tab3 content</p>
        </div>
    </li>
    <li id="tab4" class="tab" onclick="location.href='\ttest4.php'; " style="cursor:pointer;" >
        <strong><br>Test 4</strong>
         <div id="tab4content" class="tabcontent">
            <p>tab4 content</p>
        </div>    
    </li>
    <li id="tab5" class="tab" <a href="/Test/test5.php" class="tab_link" >
        <strong><br>Test 5</strong></a>
    </li>
    <li id="tab6" class="tab" <a href="/Test/test6.php" class="tab_link" >
        <strong><br>Test 6</strong></a>
    </li>
</ul>
</div>

jquery:

$(function(){
    $("#tabstest li").hover(function(){
        $(this).children("div").show();
    },function(){
        $(this).children("div").hide();
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T09:59:46.370

我没有发布 css，也许 css 会造成元素 div、ul、li、...的问题

```
#tabs {

        width: 950px;

    }

    #tabs ul li a {
    display: block;
    }

    #tabs ul {
        padding: 0;
        margin: 0;
        list-style: none;
        display: block;
    }
    #tabs ul li {
        display: block;
        float: left;
        padding: 2.8px;
        margin: 0px;
        font-size: 15.5px;
        border-right:3px double #cccccc;
        background: #000000 url(/images/tab2.jpg) no-repeat 0px 0px;
        color:#ffffff; 
        text-align: center;
    }

    #tabs ul li:last-child { border-right: none;  }
    #tabs li:first-child + li + li + li + li  + li{border-right:none;}
    #tabcontents {
        clear: both;

    }

    .tabcontent {
        display: none;
        width: 947px;
        height:295px;
        background: #202020;
        position: absolute;
        color:#f0f0f0;
        z-index:9999;
    }

    a.tab_link{
        text-decoration:none;

    }

    a.tab_link:link { 
        color: #ffffff; 
    }

    a.tab_link:visited { 
        color: #f6911b; 
    }

    a.tab_link:hover {
        color: #eeeeee;
    }

    a.tab_link:active {
        color: #f6911b;
    } 
```

# php - 如何将带有产品编号的 URL 字符串转换为产品名称

> ID：14503407
> 
> 赞同：2
> 
> 时间：2013-01-24T14:16:28.787
> 
> 标签：php, html, .htaccess, url

好的……这对你们中的一些人/女孩来说可能是一个简单的问题，我知道可以做到，但我不知道如何实现。我认为它是用 .htaccess 完成的，但我不太确定。

我有一个使用 PHP 的网站，它有一个 URL 字符串：

```
 mydomain.com/product/item.php?=0210 
```

如何将该项目编号转换为实际产品，例如：

```
 mydomain.com/product/brown-green-socks 
```

这可能吗？如果是这样，您能否指出我正确的方向。我试图搜索该站点，但无法准确找到该过程的名称，因此，我真的找不到我的问题的正确答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:19:59.920

您建议的 URL 方案需要唯一的产品名称。

大多数较大的商店使用类似的方案`domain.com/product/0210-brown-green-socks`。这样，使用[mod_rewrite](http://en.wikipedia.org/wiki/Rewrite_engine)简单地将请求重定向到该 URL 到`/item.php?=0210`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:26:48.243

mydomain.com/product/item.php?=0210 ->301-> mydomain.com/product/brown-green-socks

mydomain.com/product/brown-green-socks 表示 mydomain.com/product/item.php?=0210 它们是 2 个不同的东西，您需要 2 个规则：

重写引擎开启

RewriteCond %{QUERY_STRING} 正则表达式条件 RewriteRule ^blog/read/(.*)$ blog/index.php?b=$1 [L,QSA]

第一个将 301（永久移动）重定向到漂亮的 url。第二个将允许您的应用程序理解漂亮的 url。

每当您更改网站的 url 方案时，您都应该注意现有的链接。因此，第一条规则是必需的/一个好主意。但是，在使用自己的应用程序时，您不应该需要第一条规则。如果您自己的应用程序正在生成指向 profile.php?user=me 的链接 - 更改您的应用程序代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T14:24:22.313

这个问题有两个部分，一个是如何通过'slug'而不是id来识别每个元素，另一个是如何删除问号。

要删除问号，请尝试在 .htaccess 文件中使用 apache 重写。（谷歌 apache 重写）例如，我使用

```
RewriteRule ^blog/read/(.*)$ blog/index.php?b=$1 [L,QSA] 
```

所以任何去 blog/read/13 的人实际上都会被重定向到 blog/index.php?b=13

下一点是在数据库中查找产品时开始使用“slug”而不是“id”。我可以更详细地介绍，但我不知道您的数据库或网站是如何工作的，所以帮不上忙！谢谢

# java - 具有多行的表单元素

> ID：14503411
> 
> 赞同：4
> 
> 时间：2013-01-24T14:16:45.893
> 
> 标签：java, swing, netbeans, jtable

我正在尝试创建一个表单来加载存储在数组中的用户数量。设计如下所示：

![GUI 设计图像](../Images/564c42d4cb9a8f6bd0d66749f8b2f11f.png)

如何创建显示来自不同用户的数据的元素？我完全不知道该使用哪个元素。我用什么元素来获得同样的布局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:18:35.590

该小部件称为 JTable。在此处查看一些信息：http: [//docs.oracle.com/javase/tutorial/uiswing/components/table.html](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

# android - PhoneStateListener 和 BroadcastReceiver

> ID：14503414
> 
> 赞同：1
> 
> 时间：2013-01-24T14:16:54.380
> 
> 标签：android, broadcastreceiver, phone-state-listener

我创建了一个 BroadcastReceiver 来监听他的电话状态并采取相应的行动。

这里的问题是它似乎没有从我的数据库中获取正确的值，并且从一开始处于空闲状态的 toast 显示两次，第二次调用后显示四次等等......

我想我的课有问题，但我不知道是什么...

这是一个代码片段：

```
public class PhoneListener extends BroadcastReceiver{

    private DBAdapter   db;
    private Cursor      data;
    private Cursor      options;
    private int     activer;
    private  int        mouvement;
    private int     verticalite;

    @Override
    public void onReceive(Context context, Intent intent) {

        TelephonyManager telephonyManager = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
        telephonyManager.listen(new CustomPhoneStateListener(context), PhoneStateListener.LISTEN_CALL_STATE);

    }

    public void stopService(Context context){
        Intent alerte = new Intent(context, SensorOrientation.class);
        alerte.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.stopService(alerte);
    }

    public void startService(Context context){
        Intent alerte = new Intent(context, SensorOrientation.class);
        alerte.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startService(alerte);
    }

    public void startnotif(Context context){
        Intent intent   =   new Intent(context, SecuriteHauteReboot.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startService(intent);   
    }

    public class CustomPhoneStateListener extends PhoneStateListener {

        //private static final String TAG = "PhoneStateChanged";
        Context context; //Context to make Toast if required 
        public CustomPhoneStateListener(Context context) {
            super();
            this.context = context;
        }

        @Override
        public void onCallStateChanged(int state, String incomingNumber) {
            super.onCallStateChanged(state, incomingNumber);

            switch (state) {
            case TelephonyManager.CALL_STATE_IDLE:
                db          =   new DBAdapter(context);
                data        =   db.selectWidget();
                options     =   db.selectVerticalite();
                activer     =   data.getInt(data.getColumnIndex("activer"));
                mouvement   =   options.getInt(options.getColumnIndex("activer_alarme_mouvement"));
                verticalite =   options.getInt(options.getColumnIndex("activer_alarme_verticalite"));
                data.close();
                options.close();
                //when Idle i.e no call
                Toast.makeText(context,
                        String.format(" "+mouvement+" "+activer),
                        Toast.LENGTH_SHORT).show();
                if(activer == 1){
                    if(mouvement == 1 || verticalite == 1){
                        Toast.makeText(context,
                                String.format("and I'm here...."),
                                Toast.LENGTH_SHORT).show();
                        startService(context);
                        startnotif(context);
                    }
                }
                break;
            case TelephonyManager.CALL_STATE_OFFHOOK:
                //when Off hook i.e in call
                //Make intent and start your service here
                if (activer == 1){
                    if(mouvement == 1 || verticalite == 1){
                        stopService(context);
                    }
                }
                break;
            case TelephonyManager.CALL_STATE_RINGING:
                //when Ringing
                if (activer == 1){
                    if(mouvement == 1 || verticalite == 1){
                        Toast.makeText(context,
                                String.format("and I'm here...."),
                                Toast.LENGTH_SHORT).show();
                        stopService(context);
                    }
                }
                break;
            default:
                break;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T14:28:47.767

您可能在`onCallStateChanged`（数据库 I/O 操作）内部做了很多事情。我在`BroadcastReceiver`这里遇到了类似的问题：[在响铃期间更改铃声音量](https://stackoverflow.com/questions/14429133/changing-ringer-volume-during-ringing/14489509#14489509)。为了进行测试，请尝试对内部的静态字段（而不是 LiteSQL）进行操作`BroadcastReceiver`并检查它是否有帮助。

# asp.net - 文本框在提交时无法保留值

> ID：14503417
> 
> 赞同：1
> 
> 时间：2013-01-24T14:17:03.130
> 
> 标签：asp.net, vb.net, textbox, submit

首先，请注意我是用法语开发的，所以有些术语是法语的，但元素名称是英语的。如果有任何问题，请随时提问。

我正在使用 vb.net 处理 ASP 网页，并且我有一个带有 4 个文本框的表单。用户可以选择使用他的号码登录或输入他的姓氏、名字和生日。一开始，当我单击提交按钮时，一切正常，但是现在，当我在文本框中输入文本时，单击提交时，我的所有文本框值都是空的。验证我的表单时，它总是返回 false。

这是代码隐藏。如果您需要我的代码的其他元素，例如：javascript 代码、html 代码或任何内容，请随时提出。这个问题让我在最后几天发疯了，我在 stackoverflow 和其他论坛上阅读了很多文档但没有成功......

```
Imports System.Data.SqlClient

Public Class WebForm1
Inherits System.Web.UI.Page

Protected SqlCon_PAIE As New SqlConnection
Protected SqlCon_Gamsco As New SqlConnection
Public Event LostFocus As EventHandler

Private Sub Get_Value_GAMSCO()
    Dim strSQL As String
    Dim DatS As New DataSet
    Dim SQLadap As SqlClient.SqlDataAdapter

    SqlCon_Gamsco.ConnectionString = ConfigurationManager.ConnectionStrings("String_Connection_Gamsco").ConnectionString

    strSQL = " SELECT TOP 2 * " & _
                " FROM [GAMSCO].[RAPPORTS]"

    SQLadap = New SqlDataAdapter(strSQL, SqlCon_Gamsco)
    SQLadap.Fill(DatS, "Recherche")

    SqlCon_Gamsco.Dispose()
End Sub

Protected Sub btnSubmit_Click(sender As Object, e As EventArgs) Handles btnSubmit.Click
    Dim MatriculeComplete As Boolean = False
    Dim infosComplete As Boolean = False
    If ((Not String.IsNullOrEmpty(txtNumber.Text)) Or (Not String.IsNullOrEmpty(txtLastName.Text) And Not String.IsNullOrEmpty(txtFirstName.Text) And Not String.IsNullOrEmpty(hfDateNaisVal.Value()))) Then
        LblWarning.Text = ""

        'Si le matricule n'est pas vide 
        If (hfMatricule.Value().Equals("true")) Then
            MatriculeComplete = True
        End If

        'Si les infos sont complètes
        If (Not String.IsNullOrEmpty(txtLastName.Text) And Not String.IsNullOrEmpty(txtFirstName.Text) And Not String.IsNullOrEmpty(hfDateNaisVal.Value())) Then
            If (hfDateNais.Value().Equals("true")) Then
                infosComplete = True
            End If
        End If
    End If
    If (MatriculeComplete = False And infosComplete = False) Then
        LblWarning.Text = "Le matricule ou les informations personnelles sont manquantes ou incomplètes"
    ElseIf (MatriculeComplete = True) Then
        rechercher_employe_matricule(txtNumber.Text)
    ElseIf (infosComplete = True) Then
        rechercher_employe_infos(txtFirstName.Text, txtLastName.Text, hfDateNaisVal.Value())
    End If
    reset_champs()
End Sub

Protected Sub reset_champs()
    txtNumber.Text = ""
    hfMatricule.Value() = ""
    hfDateNaisVal.Value() = ""
    hfDateNais.Value() = ""
    txtLastName.Text = ""
    txtFirstName.Text = ""
End Sub
Private Sub rechercher_employe_infos(prenom As String, nom As String, dateNais As String)
    'Dim dateParts As String() = dateNais.Split("-")
    'Dim dateArrange As String = dateParts(2) + "-" + dateParts(1) + "-" + dateParts(0)
    Dim strSQL As String
    Dim DatS As New DataSet
    Dim SQLadap As SqlClient.SqlDataAdapter

    SqlCon_PAIE.ConnectionString = ConfigurationManager.ConnectionStrings("String_Connection_Paie").ConnectionString

    strSQL = " SELECT MATR, upper(left(NOM,1)) + lower(right(NOM,len(NOM)-1)) AS 'NOM', upper(left(PRNOM,1)) + lower(right(PRNOM,len(PRNOM)-1)) as 'PRENOM', DATE_NAIS" & _
                    " FROM PAI_DOS" & _
                    " WHERE (NOM like '%" & nom & "') AND (PRNOM like '%" & prenom & "') AND (DATE_NAIS like (convert(datetime,'" & dateNais & "')))"

    SQLadap = New SqlDataAdapter(strSQL, SqlCon_PAIE)
    SQLadap.Fill(DatS, "Recherche")

    If DatS.Tables("Recherche").Rows.Count > 0 Then
        With DatS.Tables("Recherche").Rows(0)
            'Response.Redirect("formulaire.aspx?Mat=" & Server.UrlEncode(.Item(0)))
        End With
    Else
        LblWarning.Text = "L'employé " + prenom + " " + nom + " " + dateNais + " n'existe pas dans la base de données"
    End If
    SqlCon_PAIE.Dispose()
End Sub
Private Sub rechercher_employe_matricule(matricule As String)
    Dim strSQL As String
    Dim DatS As New DataSet
    Dim SQLadap As SqlClient.SqlDataAdapter

    SqlCon_PAIE.ConnectionString = ConfigurationManager.ConnectionStrings("String_Connection_Paie").ConnectionString

    strSQL = " SELECT MATR" & _
                    " FROM PAI_DOS" & _
                    " WHERE (MATR like '%" & matricule & "')"

    SQLadap = New SqlDataAdapter(strSQL, SqlCon_PAIE)
    SQLadap.Fill(DatS, "Recherche")

    If DatS.Tables("Recherche").Rows.Count > 0 Then
        With DatS.Tables("Recherche").Rows(0)
            'Response.Redirect("formulaire.aspx?Mat=" & Server.UrlEncode(.Item(0)))
        End With
    Else
        LblWarning.Text = "Le matricule " + matricule + " n'existe pas dans la base de données"
    End If
    SqlCon_PAIE.Dispose()
End Sub

Protected Sub Page_Load(sender As Object, e As EventArgs) Handles Me.Load
    If Not IsPostBack Then
        txtNumber.Text = txtNumber.Text
    End If
End Sub

'Protected Sub txtMatricule_TextChanged(sender As Object, e As EventArgs) Handles txtMatricule.TextChanged
'    txtMatricule.Text = txtMatricule.Text
'    MsgBox(txtMatricule.Text)
'End Sub
End Class 
```

和aspx页面

```
<%@ Page Language="vb" AutoEventWireup="false" CodeBehind="accueil.aspx.vb" Inherits="Gamsco_Web.WebForm1" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title>Gamsco - Authentification</title>
<link rel="stylesheet" type="text/css" href="Styles\Site.css" />
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script type="text/javascript" src="http://code.jquery.com/ui/1.9.2/jquery-ui.js">    </script>

</head>
<body style="text-align:center;">
<h1 class="header">Rapport d&#39;accident ou d&#39;événement dangereux</h1>
<div class="page">
    <div class="global">
        <div class="subtitle">Veuillez saisir le matricule ou nom, prénom et date de naissance du blessé</div>
        <form id="form1" runat="server" >
            <table style="width: 65%; height: 250px; ">
                <tr>
                    <td class="style5">
                        <asp:Label ID="lblMatricule" runat="server" Text="Matricule:">   </asp:Label>
                    </td>
                    <td class="style6">
                        <asp:TextBox ID="txtNumber" runat="server" Width="188px" MaxLength="9" ></asp:TextBox> 
                    </td>
                    <td class="style7"> 
                        <div id="errMatr" class="err"></div>
                    </td>
                </tr>
                <tr>
                    <td class="style2">
                    </td>
                    <td class="style1">
                        <strong style="text-align: justify">ou</strong>
                        <asp:HiddenField ID="hfMatricule" runat="server" />
                        <asp:HiddenField ID="hfDateNais" runat="server" />
                        <asp:HiddenField ID="hfDateNaisVal" runat="server" />
                    </td>
                </tr>
                <tr>
                    <td class="style2">
                        <asp:Label ID="lblNom" runat="server" Text="Nom:"></asp:Label>
                    </td>
                    <td class="style1">
                        <asp:TextBox ID="txtLastName" runat="server" width="191px" ></asp:TextBox>
                    </td>
                    <td class="style7"> 
                        <div id="errNom" class="err"></div>
                    </td>
                </tr>
                <tr>
                    <td class="style2">
                        <asp:Label ID="lblPrenom" runat="server" Text="Prenom:"></asp:Label>
                     </td>
                    <td class="style1">
                        <asp:TextBox ID="txtFirstName" runat="server" width="191px"></asp:TextBox>
                    </td>
                    <td class="style7"> 
                        <div id="errPrenom" class="err"></div>
                    </td>
                </tr>
                <tr>
                    <td class="style3">
                        <asp:Label ID="lblDateNaissance" runat="server" Text="Date de naissance:"></asp:Label>
                    </td>

                    <td class="style4">
                        <input id="datepicker" class="calendar" placeholder="JJ-MM-AAAA" type="text" 
                            maxlength="10" />
                   </td>
                   <td class="style7"> 
                        <div id="errDateNais" class="err"></div>
                    </td>
                </tr>
            </table>
            <asp:button ID="btnSubmit" runat="server" Text="Continuer"></asp:button>
            <br />
            <asp:Label ID="LblWarning" runat="server" ForeColor="Red"></asp:Label>
        </form>
     </div>
</div>
<div class="footer">test</div>
<script src="ScriptApp/App.js" type="text/javascript"></script>
<script src="Scripts/jquery.js" type="text/javascript"></script>
<script src="Scripts/jquery.maskedinput-1.3.js" type="text/javascript"></script>
<script type="text/javascript" src="Scripts/date-fr-CA.js"></script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:14:36.510

我认为通过良好的调试，您将能够解决这个问题。

我肯定会从删除 javascript 开始，客户端代码在回发之前绝对会影响您的价值。

让一切变得简单，去掉 page.load 代码，它对你没有任何好处。

注释掉 btnSubmit.click 中的 if 代码，并假设该值暂时存在，因为您只是在测试。

总的来说，我不明白为什么这些价值观不存在。

# python - 如何使用 matplotlib 启用/禁用轻松共享的轴

> ID：14503423
> 
> 赞同：2
> 
> 时间：2013-01-24T14:17:19.357
> 
> 标签：python, matplotlib, plot

tcaswell[先前](https://stackoverflow.com/questions/14482422/link-axis-between-different-plot-no-subplots-using-matplotlib)关于如何为不在同一个图上的绘图创建共享轴的答案是完美的:) 但我现在想知道如何禁用共享轴并重新启用它们而不必重绘或破坏任何东西？（我有多个图表，我想添加一个用户可以单击以禁用/启用这些共享轴的按钮）我找到了一种方法：

```
import matplotlib.pyplot as plt
fig = plt.figure()
ax1 = fig.add_subplot(111)
fig2 = plt.figure()
ax2 = fig2.add_subplot(111, sharex=ax1) 
```

创建共享轴，然后

```
fig2.delaxes(ax2)
ax2 = fig2.add_subplot(111) 
```

但这需要重新绘制所有内容并且可能需要一些时间。我没有找到一个简单的功能来禁用链接。有没有比我做的更轻松的方法？

谢谢 ！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2018-04-10T19:42:52.727

你可以做：

```
ax2.get_shared_x_axes().remove(ax1) 
```

参考：

*   [解释 get_shared_x_axes 的 API 文档](https://matplotlib.org/api/axes_api.html)
*   [描述 Grouper.remove 的 API 文档](https://matplotlib.org/2.0.2/api/cbook_api.html?highlight=grouper#matplotlib.cbook.Grouper.remove)
*   （看起来 remove 方法是[在 2015 年添加到 Grouper 对象中的](https://github.com/matplotlib/matplotlib/commit/2dfb60b852375df5a8b1421f06881db4c8ead3a4)）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T16:03:36.113

没有现有的简单方法可以做到这一点，但是我认为*可以*做到（只需深入研究`matplotlib`内部结构）。轴在下面链接的方式是简单地为两者使用相同的定位器和格式化器对象`axis`。要链接/取消链接，您必须复制/新建所有这些对象，以及更新一些辅助结构 ( `_shared_x_axes`, `_shared_y_axes`)。看看`matplotlib.axes.Axes.cla()`你需要做什么的一些想法的实现。

有一个针对添加此功能和相关[功能请求的存储库的](https://github.com/matplotlib/matplotlib/issues/318)[拉取](https://github.com/matplotlib/matplotlib/pull/1312)请求。如果您愿意 a) 从源代码安装 b) 使用 master 和 c) 应用此补丁，我认为开发人员会感谢您对此进行测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-08T13:08:29.693

您可以更改定义哪些图共享其轴的 Grouper 对象。x 轴的 Grouper 对象可以在`ax1._shared_x_axes`和 中找到`ax2._shared_x_axes`，因为它是同一个对象。

要停止共享两个图的 x 轴，您可以执行`ax2._shared_x_axes.remove(ax2)`.

为了再次加入他们，请执行`ax2._shared_x_axes.join(ax1,ax2)`.

如果您想更好地理解，可以查看[此处](https://matplotlib.org/stable/api/cbook_api.html#matplotlib.cbook.Grouper)的文档。`ax1._shared_x_axes`是一个 Grouper 对象，其中 ax1 和 ax2 是关节元素。

With the `ax2.get_shared_x_axes()` method you just can read it, but not change it. For aplying modifications, you need to access this object directly with `ax2._shared_x_axes`.

# content-management-system - Umbraco 中的最大子站点数

> ID：14503424
> 
> 赞同：0
> 
> 时间：2013-01-24T14:17:21.140
> 
> 标签：content-management-system, umbraco

问题：

某公司有 20 个站点，并希望在单个 CMS 实例中管理这些站点。
有许多可能的解决方案，但我正在研究的一个是具有 20 个子站点的单个 Umbraco 实例。

我只有 Sitecore 和 Sharepoint 的经验（在这些数量上）。

现在我的问题是；这在 Umbraco（最新版本）中表现如何？

有没有人有这个数量级的实际动手经验？
我个人对 Umbraco 的最大访问量是在中低流量站点上的 3 个子站点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:14:06.600

在 Umbraco 界面本身内，站点越大越复杂，通常执行的速度就越慢。我这么说纯粹是因为随着站点结构的增长，项目的复杂性可能会增加。情况并非总是如此，但我建立了一个多地区、多站点的站点，每个站点都有多种语言，虽然发布的站点运行良好，但界面往往表现不佳。话虽如此，我很想回去检查和修改我的代码！

对数据库的点击是最严重的违规者。通常，由于所有已发布的内容都已缓存，因此发布的内容不必进行任何数据库调用。但是，当您创建一个宏、用户控件、视图、数据类型来查询 Umbraco API 以检索、、、`Document`或对象时`Content`，您正在访问数据库。`ContentType``DocumentType``Media`

如果您在经常调用的代码中执行此操作，例如 HttpModule，那么您的性能将受到影响，无论是在已发布站点还是在后台。显然，它有时是不可避免的，所以你只需要小心，实现一些缓存是非常宝贵的。

我还应该指出，目前的 Umbraco v6 处于测试阶段，并且已经修改了大规模实现[PetaPoco](http://www.toptensoftware.com/petapoco/)的 API 。虽然这不会减轻我们作为开发人员所犯的编码错误，但它会使 API 比以前更加流畅！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:29:08.310

我自己也为此苦苦挣扎。在一次 Umbraco 安装中，我有大约十几个子站点，所以没有你那么多，但其中一个有一个产品部分，其中包含数千种产品的单独页面，所以总页面数不少。

性能对我来说很好，但这里有几件（其中很多）需要记住的事情：

1.  razor / xslt 中的任何查询都必须针对最具体到最一般的目标编写。起初，我有一些查询正在获取所有“废话”页面。好吧，这将枚举整个站点以查找这些页面。如果是一个非常小的网站，它会被拥有 3000 多个产品页面的网站拖慢。所以你必须小心地定位一个特定的节点，然后从那里开始（在我的例子中，遍历节点树到“subsiteHome”页面，然后从那里获取所有类型为“blah”的子节点）。

2.  以这种方式包含它们的全部目的是使维护更容易并在站点之间共享资产。好吧，如果您要向其中一个子站点添加一些新功能，并且它需要某个软件包的最新版本，那么您必须准备好更新使用该软件包的所有其他子站点。即它可以（取决于您的子站点的规模和复杂性）成为一种平衡行为。

最后，我不认为带有 20 个子站点（例如，每个 100 页）的 Umbraco 安装的性能与具有 2000 个页面的单个站点有很大不同，但是您必须小心查询/获取内容的方式（通过 razor / xslt 查询），以及维护的好处是否真实。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-19T17:35:46.563

我目前正在运行带有 +800 个站点和 +20.000 个内容节点的单个 Umbraco 安装，并且 Umbraco 运行良好，直到大约 200 个站点和 5.000 个节点，在那之后，我们开始在一些特定的后台任务中遇到奇怪的行为。前任。更改许多节点使用的文档类型，可能会导致一些不需要的前端效果，例如缺少内容等（请参阅此处的更多信息[http://allan-laustsen.blogspot.dk/2012/03/umbraco-no-node-exists -cmscontentxml.html](http://allan-laustsen.blogspot.dk/2012/03/umbraco-no-node-exists-cmscontentxml.html) ) 但是我们已经修改了 Umbraco 的一些源代码，以便能够处理更多的节点和站点，并且到目前为止它运行顺利。所以我不知道“限制”是什么（还）

# flash - 如何导出 swf 以使时间线不播放...但允许 onclick 操作？

> ID：14503429
> 
> 赞同：0
> 
> 时间：2013-01-24T14:17:39.970
> 
> 标签：flash, embed, dreamweaver

我最近踏入了一位对 Flash 狂热的网页设计师的职位，并且专门使用了 Dreamweaver 的设计视图。我不熟悉 Flash（一直是 jQuery），我从头开始编写大部分代码。

因此，我正在尝试对她的一个旧 Flash 网站进行一些小改动。由于我不熟悉 Flash（以及 Dreamweaver 的大部分“功能”），问题很可能出在我发布的方式上，或者与 Dreamweaver 中所需的小脚本有关。我不确定。

整个页面（链接和子窗口等）都是 Flash 动作。我不得不使页面更小，并进行一些小改动。我“发布”了我的页面（Flash + HTML）并确保所有脚本正确同步，我[得到了这个](http://www.zlotnickconstruction.com/about_team_tst.html).

时间线就像电影一样播放，我不需要它来“播放”，而只是提供链接和内容的动作。像[这样](http://www.zlotnickconstruction.com/pages/About_ZlotnickTeam.html)（旧网站）

任何人都可以查看源代码并看到任何明显的错误吗？还是我错过了出版或其他什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:45:16.130

当源只是嵌入 Flash 电影时，您无法从“查看源”中解决很多问题。您是在 Flash 中创建 SWF 吗？

第一帧的第一行动作脚本上的简单`stop();`内容应该会阻止它按原样播放。

# java - Maven Resources Plugin：如何将资源复制到目标文件夹并保留时间戳？

> ID：14503432
> 
> 赞同：6
> 
> 时间：2013-01-24T14:17:50.530
> 
> 标签：java, maven

当我在项目上执行清理和构建时，Maven 将所有资源复制到目标文件夹，但带有创建的时间戳，而不是 src/main/resources 文件夹中原始文件的时间戳。是否有可能以某种方式指示它保留原始时间戳？

这对我们来说有问题的原因是我们正在开发的软件在启动时有一个数据库迁移，我们希望让它在开发人员机器上执行。但是由于时间戳不断变化，这会向数据库引入不必要的资源重新加载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T14:53:26.087

我认为不可能使用[Maven 资源插件](http://maven.apache.org/plugins/maven-resources-plugin/)的默认功能。

您能否更改在运行时加载文件的路径（可能通过使其可根据环境进行配置）？如果是这样，那么也许您可以将[**ant 与 maven 一起**](http://maven.apache.org/guides/mini/guide-using-ant.html)使用，并使用具有**preservelastmodified**属性[**的 ant 复制任务。**](http://ant.apache.org/manual/Tasks/copy.html)

 **其意图是 Maven 的资源处理将继续照常工作，但文件也将在每次构建时复制到运行时使用的单独位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-28T23:06:44.887

解决方法是使用ant的copy任务。这分两步完成：1）从正常处理中排除我们想要保留日期的文件（在这个例子中，我处理测试资源。这同样适用于构建资源）：

```
<testResources>
    <testResource>
        <directory>src/test/resources</directory>
        <excludes>
            <exclude>**/some-files*/**</exclude>
        </excludes>
    </testResource>
</testResources> 
```

2）第二步是使用mave ant插件通过ant任务复制它们：

```
<plugin>
    <artifactId>maven-antrun-plugin</artifactId>
    <version>1.7</version>
    <executions>
        <execution>
            <phase>process-test-resources</phase>
            <configuration>
                <tasks>
                    <copy todir="${project.build.testOutputDirectory}" preservelastmodified="true">
                        <fileset dir="src/test/resources">
                            <include name="**/some-file*/**"/>
                        </fileset>
                    </copy>                            
                </tasks>
            </configuration>
            <goals>
                <goal>run</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```**

# python - 显示评论 Jinja2-Python

> ID：14503434
> 
> 赞同：0
> 
> 时间：2013-01-24T14:17:54.320
> 
> 标签：python, google-app-engine, google-cloud-datastore, jinja2

我正在使用 Python 和 Jinja2 在 Google App Engine 中写博客。我有一个用于我的博文的 GQL 表和一个用于所有评论的 GQL 表。公用表中的每条记录都有一个 blogpost_id 列，以便我知道它们链接到哪个博客文章。我使用查询“SELECT * from BLOGPOSTS”并将其传递给我的渲染函数。然后在我的 HTML 模板中有一个 for 循环，可以打印出我所有的博文。这很顺利。在博客文章的永久链接中，打印评论很容易，因为我知道 blogpost_id，所以我可以根据它查询评论表并将它们打印出来。

然而，在首页上，我想在其下方显示每篇博文的前两条评论。但是我无法想出一个解决方案来在我的首页上的博文下方打印出评论，因为我不知道如何将特定博文的评论传递给我的渲染函数。有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:19:37.380

为什么不将包含博客文章的 GQL 查询的结果传递给模板，而不是传递将博客文章映射到其最近的两条评论的字典列表？

这样的事情可能会起作用（尽管可能不是最有效的方法）：

```
posts = GqlQuery("SELECT * from BLOGPOSTS")
posts_and_comments = []
for post in posts:
    two_comments = GqlQuery("SELECT * from COMMENTS WHERE blogpost_id = :1 ORDER BY age LIMIT 2", post.blogpost_id)
    current_post = {post: two_comments}
    posts_and_comments.append(current_post) 
```

然后你可以传入`posts_and_comments`你的模板，并以你喜欢的任何方式迭代它。

此外，`blogpost_id`您可能希望查看[祖先查询，而不是](https://developers.google.com/appengine/docs/python/datastore/queries#Ancestor_Filters)通过检查，并将每个评论的祖先设置为其父帖子。

# blackberry - 如何更改菜单列表中的菜单项位置

> ID：14503437
> 
> 赞同：0
> 
> 时间：2013-01-24T14:18:06.750
> 
> 标签：blackberry, menuitem

我正在尝试在 BlackBerry 的菜单列表中添加一个菜单项。但问题是，单击菜单按钮后，我的菜单选项被添加为最顶层的菜单，并且没有成为焦点。所以我向上滚动并单击该菜单。

为此，我编写了此代码以添加仅用于查看电子邮件的菜单：

```
SampleMenuItem mi = new SampleMenuItem(3);
    mi.setIcon(ImageFactory.createImage("image.png"));
    amir.addMenuItem(ApplicationMenuItemRepository.MENUITEM_EMAIL_VIEW, mi); 
```

这是我的示例菜单项类：

```
 private class SampleMenuItem extends ApplicationMenuItem {

        SampleMenuItem(ApplicationDescriptor app) {
            super(20);
        }

        public String toString() {
            return Constants.MSG_OPEN_WITH;
        }

        public Object run(Object context) {

............
  }
} 
```

我们如何在菜单列表中间添加菜单意味着改变菜单位置并使其集中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:04:10.087

您的`SampleMenuItem`课程扩展了`ApplicationMenuItem`. 在这一行：

```
super(20); 
```

你实际上是在调用这个构造函数：

```
ApplicationMenuItem(int order) 
```

从[文档](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/blackberry/api/menuitem/ApplicationMenuItem.html#ApplicationMenuItem%28int%29)：

> *使用提供的菜单位置创建一个新的 ApplicationMenuItem 实例。
> 参数：
> order - 该项目的显示顺序，较低的数字对应于菜单中较高的位置（相对，0 的条目不一定会导致最顶部的项目）。*

因此，将值更改为较高的值应将菜单项放置在较低的位置。

# java - JTable 行编辑器

> ID：14503439
> 
> 赞同：1
> 
> 时间：2013-01-24T14:18:13.337
> 
> 标签：java, swing, jtable

我正在寻找[这个](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editor)例子中的编辑器；我的意思是“选择颜色”-框架，但适用于整行。完全实现这一点是我的问题，还是我可以扩展一些现有的编辑器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:29:03.700

如果您想要在新的子窗口中编辑 A、B、C 列的整行

```
A  ____
B  ____
C  ____ 
```

那么也许你可以制作一些bean类Record的行，并使用java.beans.PropertyEditor开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T16:24:51.910

常用列数据类型的默认渲染器和编辑器显示[在此处](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)。`isCellEditable()`为返回的任何行中的任何单元格选择一个编辑器`true`。您还可以指定自定义渲染器和编辑器，例如您引用的颜色选择器。[这里](https://stackoverflow.com/q/14470230/230513)有两个最近的例子，但细节取决于你的用例。

附录：*类似于子窗口的东西*

您可以将对表的引用`TableModel`和所需的行号传递给您的`RowEditor`. 您将拥有对表模型方法的完全访问权限，包括`getValueAt()`、`setValueAt()`和`getColumnClass()`方法。

# python - 在语料库类别中查找单词的上下文不起作用

> ID：14503441
> 
> 赞同：0
> 
> 时间：2013-01-24T14:18:16.383
> 
> 标签：python, nltk

我编写了这个小脚本来查找我的语料库中 10 个最常用单词的上下文。但它不起作用，我不知道我做错了什么。 tien_frequentste(mijn_corpus) 定义独立工作。

```
tienfrequentste = tien_frequentste(mijncorpus)
def context (corpus, most_freq):
   for category in corpus.categories():
     print "Context voor" , category, ":"
       for word in most_freq:
           print nltk.Text(corpus.words(categories=category)).concordance(word) 
```

更新：
我在回溯
for `context(corpus, most_freq)`、
for `category in corpus.categories()`、
for`self.init()`
和`in_init`. 和一个`AttributeError:'NoneType' object has no attribute 'group'`。
不知道这些错误是什么意思..

```
Traceback (most recent call last):
 File "/Users/...document.py", line 92, in <module> context (mijn_corpus, tienfrequentste)

 File "/Users/...document.py", line 87, in context for category in corpus.categories(): File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/nltk.corpus.reader.api.py, line 317, in categories self.init().

File "/Users/...document.py", line 87, in context for category in corpus.categories(): File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/nltk.corpus.reader.api.py, line 289, in_init category = re.match(self._pattern, file id).group(1)

attributeError: 'Nonetype' object has no attribute "group" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T21:48:00.850

该错误来自将语料库文件分配给类别的正则表达式。它绊倒了一个与正则表达式模式不匹配的文件名。如果您使用带有类别的标准 NLTK 语料库，您必须在语料库目录中放置一个额外的文件。如果您使用自己的语料库，则说明配置错误。

顺便说一句，`concordance()`打印它的输出并返回`None`。如果你使用`print`它，你会看到一大堆`None`值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T23:24:31.937

您的语料库是否有类别并且是`most_freq`字符串列表？以下示例有效：

```
from nltk.corpus import reuters
for category in reuters.categories():
print "context voor", category, " : "
for word in ["get", "have", "do"]:
    print nltk.Text(reuters.words(categories=category)).concordance(word) 
```

# mysql - 如何在文本文件中仅搜索具有一定长度的行

> ID：14503449
> 
> 赞同：0
> 
> 时间：2013-01-24T14:18:40.797
> 
> 标签：mysql, database, search, text, import

我有一个带有两列和大约 1700 万行的大型分隔 txt 文件。我已将其导入数据库，错误地表中的一列比文件中的文本短。即 varchar (4000) 而不是 varchar (7000)

大约 48000 条文本较长的记录已被切割成 40k 个字符。

如何在不重新导入文件的情况下替换这些文件？

我在想我是否能够从 txt 文件中仅过滤具有一定长度的行，然后将其删除，然后尝试插入更新较长的行。

但是如何在文本文件中选择所有具有一定长度的行？或者哪个程序可以做到这一点。

我正在使用 MySQL DB 和 emEditor 进行大文件文本编辑。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:52:27.887

取决于它如何连接到其他基础设施，我的猜测是最简单和最安全的处理方式就是删除并重新导入表......

如果由于某种原因不是一个选项，我会编写一个遍历文本文件的脚本，或者只是无条件地更新大文本字段，或者检查它的长度是否需要更新（即> 4000个字符）

如果自导入数据以来表可能有任何更改，请务必检查将被覆盖的内容以及记录是否确实是您要更新的记录（取决于表的索引方式）

希望这能给你一些起点。

你有我的同情，在那里做过...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:23:05.817

您还可以构建一个查询，该查询返回该列包含 4000 字节的每条记录。哪些可能是您导入文件时被剪切的那些。有了这组记录，如果您在数据库表 ofc 上有行引用，您可以尝试在文件中找到它们。如果有太多，一个简单的脚本就可以解决问题。

# java - 每次运行时 Java 字符串到字节数组的变化

> ID：14503453
> 
> 赞同：2
> 
> 时间：2013-01-24T14:18:54.663
> 
> 标签：java, string, hash, byte

我在将字符串转换为字节数组以对其进行哈希处理时遇到了一个奇怪的问题。现在，我的代码是这样的：

```
 String textToHash = "test"; 
    MessageDigest messageDigest = MessageDigest.getInstance("MD5");
    messageDigest.update(textToHash.getBytes("UTF-8"));
    hash = messageDigest.digest(); 
```

即使字符串相同，但在不同的运行中，字节数组（从 生成`textToHash.getBytes("UTF-8")`）会发生变化。有时它只有一个值，有时它会改变，即使字符串是静态的。为什么会发生这种情况，我怎样才能使它可靠地散列一个字符串？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T14:22:21.100

更新前调用 MessageDigest.reset

[http://docs.oracle.com/javase/7/docs/api/java/security/MessageDigest.html#reset()](http://docs.oracle.com/javase/7/docs/api/java/security/MessageDigest.html#reset())

# c++ - 当类析构函数调用父析构函数时，vfptr / vftable 改变基类型

> ID：14503458
> 
> 赞同：3
> 
> 时间：2013-01-24T14:19:02.150
> 
> 标签：c++, windows, visual-studio

我正在使用 Visual Studio 2008、c++、win32，没有点网。

我遇到了在父级的析构函数中调用的虚函数的问题。例如，学习 a 和 b 类。a 类有一个虚函数，叫做 Hello(); 调用时，它会打印 hello。

b 类继承自 a 类，也实现了函数 Hello。调用时，它会打印 world。

在类 a 的析构函数中调用函数 Hello。当类 b 被删除时，首先调用 b 的析构函数，然后调用 a 的析构函数。在 a 的析构函数中调用 Hello ，除了它是与类 a 相关联的实现，而不是类 b。

此行下方的此示例的代码。

```
class a{
public:
  virtual void Hello();
  a();
  ~a();
};

a::a(){
};

a::~a(){
  Hello();
}

void a::Hello(){
  printf("hello\n");
}

class b:public a{
public:
  virtual void Hello();
  b();
  ~b();  
};

b::b(){
}

b::~b(){
}

void b::Hello(){
  printf("world\n");
}

int _tmain(int argc, _TCHAR* argv[]){  
  a* exampleA=new a();
  b* exampleB=new b(); 
  exampleA->Hello();
  exampleB->Hello();
  delete exampleA;
  delete exampleB;
  return 0;
} 
```

输出是：

```
hello
world
hello
hello 
```

当我在b类的析构函数中下断点时，局部变量中的__vfptr如下：

```
__vfptr
  [0x0]    0x002314ce b::Hello(void) 
```

当单步执行并进入 a 类的析构函数时，局部变量中的 __vfptr 已更改为：

```
__vfptr
  [0x0]   0x0024c864 a::Hello(void) 
```

请问这是正常的吗？并且没有（正确的）方法可以在类 a 的析构函数中调用 b 的 Hello 实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T14:27:22.263

这里的问题是破坏顺序：

*   首先，派生类`b`被销毁
*   然后是基类`a`。`~a()`从被破坏的方法调用方法（虚拟方法）是不安全的`b`，因为这样的方法可以引用/利用内部`b`已经被破坏的类成员

我还推荐 Scott Meyers 的这篇文章： [http ://www.artima.com/cppsource/nevercall.html](http://www.artima.com/cppsource/nevercall.html)

另外，我订阅了 Mark B 的解决方案。此外，Kerrek SB 的报价证实了这是标准的、明确定义的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:24:46.057

这是正确的。没有办法`Hello`在`a`. 这同样适用于构造函数。

如果您确实需要在销毁时调用多态的东西，您可以使用私有/受保护的析构函数和公共销毁方法强制执行两次销毁，该方法首先调用虚函数然后自毁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T14:29:56.857

根据 12.7/4，

> 当从构造函数或析构函数直接或间接调用虚函数时，[...] 调用的函数是**构造函数或析构函数类中的最终覆盖，而不是在派生更多的类中覆盖它**

因此行为是明确定义的，您在类本身中调用成员函数，并且没有动态调度。

# php - php mysql如何检查2次是否重叠

> ID：14503461
> 
> 赞同：-1
> 
> 时间：2013-01-24T14:19:12.447
> 
> 标签：php, mysql

我有一个预订系统。

在 MySQL 数据库中，我有一个 bookings 表，其中包含任何给定预订的开始时间和结束时间字段，格式为`hh:mm:ss`. 秒数始终为 00。

从我的预订系统中，我发送新预订的时间，也以 hh:mm:ss 形式的开始时间和结束时间的形式发送。

我需要检查我尝试进行的新预订是否与数据库中已有的先前预订重叠。

因此，首先，我将有 2 个变量，其中包含通过 POST 发送的开始时间和结束时间。

`$startNewBooking`和`$endNewBooking`

所以我的 SQL 可能会像这样开始

`SELECT * FROM bookings WHERE starttime>=$startNewBooking AND .........`

如果发现重叠时间，则回显错误... iow 如果`row count > 0`.

请为此提供一些语法或逻辑。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T14:32:51.423

这是我的查询，只需根据需要编辑值

```
 $sql = "SELECT COUNT(*) as num FROM meeting_room_bookings
            WHERE
            (
            (startdate < start_at AND startdate > start_at)
            OR
            (startdate > start_at AND enddate < end_at)
            )
            AND
            meeting_room_id = whatever_id i was on about at the time :P"; 
```

如果要清理数据，则需要将 startdate 和 enddate 值替换为“？” 并做这样的事情->

```
 $sql = "SELECT COUNT(*) as num FROM meeting_room_bookings
            WHERE
            (
            (? < start_at AND ? > start_at)
            OR
            (? > start_at AND ? < end_at)
            )
            AND
            meeting_room_id = ?";

    $result = p4a_db::singleton()->fetchRow($sql, array($date, $date, $date, $dateend, $merono)); 
```

* * *

更进一步：

```
$sql = "SELECT COUNT(*) as num FROM meeting_room_bookings
                WHERE
                (
                ( start_at >= ? AND start_at <= ? )
                OR
                ( start_at <= ? AND end_at >= ? )
                OR
                ( end_at >= ? AND end_at <= ? )
                OR
                ( ? >= ? )
                )
                AND
                meeting_room_id = ?";

        $result = p4a_db::singleton()->fetchRow( $sql, array( $date, $dateend, $date, $dateend, $date, $dateend, $date, $dateend, $merono ) ); 
```

此方法不允许日期进入字段周围字段之外的字段或该区域的任何其他可能性（见图）：

```
||       |-----------|      ||   first booking 
|-----|                          ok
        |---|                    fails
                  |----|         fails
             |----|               fails 
```

如果您需要完整的解释，请转到[此主题](https://stackoverflow.com/questions/13765026/mysql-inserting-rows-into-a-database-with-datetime-sanity-checks)

当您执行错误消息时，您还需要执行 if else 所以这个语法应该可以完成这项工作：

```
if ( 0 == $result["num"] )
        {
            p4a_db::singleton()->query( "INSERT INTO meeting_room_bookings ( start_at, end_at, meeting_room_id, tennant_id, centre_id )
                    VALUES
                    ( ?, ?, ?, ?, ? )", array( $date, $dateend, $merono, $row['tennant_id'], $centreRow['id'] ) );
            return true;
        }
        else
        {
            P4A::singleton()->messageError("The selected times conflict with another booking. Please select another time or meeting room!");
        } 
```

请忽略带有 center id 和tennant id 的字段（除非您使用这些），它们在那里确保预订设置到正确的租户和正确的会议室。根据需要使用它并替换你需要的东西。

* * *

顺便说一句，我正在使用 p4a 应用程序框架，因此您需要替换`P4A::singleton()->messageError`为 php 错误消息 mobober

# hibernate - 休眠删除

> ID：14503463
> 
> 赞同：0
> 
> 时间：2013-01-24T14:19:19.607
> 
> 标签：hibernate

如何从 Hibernate 中删除对象？

```
 Session session = HibernateSession.getSessionFactory().openSession();
        org.hibernate.Transaction tx = session.beginTransaction();
        int q = session.createQuery("from Modele where (model='"+u.getModel() +"' and markaid='"+u.getMarki().getId()+"'").executeUpdate();
      //  session.delete(u);

        session.getTransaction().commit(); 
```

信息：不支持！使用 AST 翻译器...

改为使用时`session.delete(u)` ，我得到了这个

INFO：在删除处理中处理瞬态实体

```
CREATE TABLE modele
(
  id serial NOT NULL,
  markaid integer NOT NULL,
  cena numeric(100,2),
  model character varying(32),
  CONSTRAINT k_glwny PRIMARY KEY (id),
  CONSTRAINT obcy FOREIGN KEY (markaid)
      REFERENCES marki (id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE CASCADE
)

<hibernate-mapping>
    <class name="bazaMap.Modele" table="modele" schema="public">
        <id name="id" type="int">
            <column name="id" />
            <generator class="identity" />
        </id>
        <many-to-one name="marki" class="bazaMap.Marki" fetch="select">
            <column name="markaid" not-null="true" />
        </many-to-one>
        <property name="cena" type="java.lang.Double">
            <column name="cena" scale="0" />
        </property>
        <property name="model" type="string">
            <column name="model" length="32" />
        </property>
        <set name="wypozyczenias" inverse="true">
            <key>
                <column name="modelid" not-null="true" />
            </key>
            <one-to-many class="bazaMap.Wypozyczenia" />
        </set>
    </class>
</hibernate-mapping> 
```

这也行不通

```
session.createQuery("from Modele where model = :mmodel and markaid = :mmarkaid").setParameter("mmodel", u.getModel()).setParameter("mmarkaid", u.getMarki().getId()).executeUpdate(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:58:47.697

我相信您的 HQL 缺少导致 AST 错误的 DELETE 关键字（基本上是 HQL 语法错误。）它应该是：

```
DELETE from Modele where (model='"+u.getModel() +"' and markaid='"+u.getMarki().getId()+"'" 
```

如果您想使用 delete 方法（实际上在 hibernate 3 中已弃用以支持使用 HQL），您必须确保在删除实体之前将其加载到您正在删除的同一会话中。

我通常使用 HQL 样式删除，尽管我建议使用命名参数而不是字符串连接。

# php - 将 'exclude=160' 添加到''))的正确方法是什么？?>?

> ID：14503464
> 
> 赞同：0
> 
> 时间：2013-01-24T14:19:21.277
> 
> 标签：php, wordpress

我最近学习了如何将 wordpress 集成到我的 HTML/CSS 网站。我对 HTML/CSS 和一些 Javascript 知识有很好的掌握。我还没有学到很多关于 PHP 的知识，但我一直在让它为第一个项目工作。

我不确定如何研究我的问题，但我无法将 'exclude=160' 添加到`<?php wp_list_pages(array('title_li' => '')); ?>`

我只是不确定正确的格式，我尝试过的一切要么给我一个错误，要么产生不良影响。

我愿意学习是否有人会指出我正确的方向，但我不知道如何寻找答案。我正计划从头开始学习 PHP，但现在我想完成第一个项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:24:59.063

你试过`<?php wp_list_pages(array('title_li' => '', 'exclude' => '160')); ?>`吗？

此外，您要查找的信息是[PHP 中的数组](http://php.net/arrays)，该文档编写得非常好，是您在学习或使用 PHP 时需要熟悉的最有价值的资源之一。

# javascript - 使用 getElementsByTagName 和 getAttribute 方法

> ID：14503465
> 
> 赞同：3
> 
> 时间：2013-01-24T14:19:21.993
> 
> 标签：javascript

我结合了`getElementsByTagName`和`getAttribute`方法来获取文档中每个段落元素的标题属性。这是代码：

```
var paras = document.getElementsByTagName('p');
for (i = 0; i < paras.length; i++) {
    console.log(paras[i].getAttribute('title'));
} 
```

我特别需要帮助的代码行是这一行：

```
console.log(paras[i].getAttribute('title')); 
```

`[i]`这行代码在做什么？这是我`for`在每次迭代时递增的循环中声明的“计数器”变量吗？是否`[i]`也代表`getElementsByTagName`函数返回的数组的索引？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T14:22:01.413

这里的关键是[getElementsByTagName](https://developer.mozilla.org/en-US/docs/Web/API/Element/getElementsByTagName)返回一个[`NodeList`](https://developer.mozilla.org/en-US/docs/Web/API/NodeList).

然后，您将使用 for 循环遍历 NodeList（可以被认为是一个数组）。的值`i`从`0`数组的长度变为 -1。

所以回答你的问题。是的，`i`是索引，当你说`paras[i]`你在 index 处请求元素时`i`。

例如，给定以下 html：

```
<body>
  <p id="a"></p>
  <p id="b"></p>
  <p id="c"></p>
</body> 
```

如果您调用`paras = document.getElementsByTagName("p")`它将返回一个包含 3 个元素的数组。

*   At`paras[0]`将是 id 为 a 的 p。

*   At`paras[1]`将是 id 为 b 的 p。

*   At`paras[2]`将是 id 为 c 的 p。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T14:22:03.860

是的你是对的。paras 实际上是 DOM 中所有 p 标签的数组对象，包含所有特定属性

您可以在 chrome 开发人员工具中运行并亲自查看

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T14:23:41.360

正如詹姆斯已经说过的那样，是的，是的。

`.getElementsByTagName`返回一个数组。您可以使用索引访问该数组中的每个项目，例如：

```
paras[0] 
```

访问第一个元素（在 JavaScript 中索引从 0 开始 - 但要小心，有些语言从 1 开始）。

```
paras[1] 
```

访问第二个项目，依此类推...

使用 for 循环遍历数组中的所有元素是一种常见的模式，因此您可以对每个项目执行某些操作。所以：

```
paras[i] 
```

访问数组中的第*i*个元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T16:25:55.297

getElementsByTagName 返回一个数组。因此，您可以通过索引访问每个元素。例子：

```
paras[0]; // first <p> in your document
paras[1]; // second <p> in your document
paras[2]; // third <p> in your document
paras[3]; // fourth <p> in your document 
```

# iphone - 添加到视频时，水印层添加的文本会翻转到相反的方向

> ID：14503469
> 
> 赞同：0
> 
> 时间：2013-01-24T14:19:27.033
> 
> 标签：iphone, ios, calayer, avplayerlayer

我正在尝试使用以下链接中的源代码将水印层（图像/文本）添加到视频中，但是当添加手势识别器以调整水印的大小时，在导出时，添加的水印的位置和方向会在相反的方向发生变化关于转换后的电影文件，请帮我解决这个问题。 [http://developer.apple.com/library/ios/#samplecode/AVSimpleEditoriOS/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/AVSimpleEditoriOS/Introduction/Intro.html)

![原始添加水印和转换后的视频水印](../Images/10d7f93d3473eb4f2dfae9d20a553899.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:23:38.507

几何翻转=是。这将解决这个问题。

# unit-testing - VS2012 单元测试 - 哪个测试正在运行？

> ID：14503471
> 
> 赞同：1
> 
> 时间：2013-01-24T14:19:29.043
> 
> 标签：unit-testing, visual-studio-2012

我正在使用 Visual Studio 2012，并且正在使用包含一些单元测试的解决方案。

现在，当我运行测试时，它运行了大约 55 个测试然后无限期挂起。

所以我想看看当前正在运行哪个测试并停止整个构建。

据我记得在 VS2010 中我可以更改一些超时设置，这也会有所帮助，但我在 2012 年找不到这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T04:15:34.240

Sam 这是 VS2012 中经验的限制，因此很难检测到当前正在执行/挂起/崩溃的测试。

我只能提供一些解决方法，例如。划分和征服测试列表以缩小挂起、启用日志或粘贴调试器。

我建议您[在 uservoice 上支持此功能请求](http://visualstudio.uservoice.com/forums/121579-visual-studio)。

顺便说一句，超时设置仍然存在于 VS2012 中，并且可以在每个测试方法上设置为属性，例如。[超时（60000）]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T04:42:13.563

要找出当前正在运行的测试，请使用`TestContext.TestName`. 在方法中的每个测试开始时将其记录下来，`TestInitialize`或者只查看**TestResults**窗口。

# sql - 用于创建时间表的 SQL 表

> ID：14503472
> 
> 赞同：-2
> 
> 时间：2013-01-24T14:19:29.503
> 
> 标签：sql, sql-server, sql-server-2008, database-design

我正在使用 Infopath 创建一个时间表。数据将存储在数据库中，因此我必须创建一个表。该时间表将用于全年。

我在创建 SQL 表时需要帮助。我想要这个时间表的表结构是：

```
Project_Category   Mon   Tue    Wed   Thu    Fri    Sat  Sun    Total
    Project 1   
    Project 2
    Project 3
    Project 4
    Project 5
    Other
    Total 
```

日期应该是日期（例如，星期一 01/01/2013），或者如果您有更好的方法，请建议我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:38:11.037

正如 sgeddes 所建议的那样，多表可能是解决此问题的更好方法。

就我个人而言，我会避免每行超过 1 天，并且为了使其灵活，每天允许超过一个条目。

我将创建的结构如下：

```
Entry_ID INT IDENTITY(1,1) PRIMARY KEY
Timesheet_ID INT,
Project_ID INT,
DateTimeFrom DATETIME,
DateTimeTo DATETIME 
```

这使得基于日期的计算变得更加简单。

例如。6 月 20 日至 6 月 25 日期间项目 X 的​​小时数将是这样的查询：

```
SELECT SUM(DATEDIFF(MINUTES,DateTimeFrom,DateTimeTo)/60) AS [HOURS]
FROM MyTable
WHERE DateTimeFrom >= '2012-06-25' AND DateTimeTo <= '2012-06-29' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:28:11.750

我不会将这些数据存储在一个表中。考虑使用多个表而不是单个表来创建它。

例如，您可以有一个`Projects`带有`ProjectId`和的表`ProjectName`。然后您可以轻松地将您的`ProjectId`字段链接到`ProjectSummary`存储`ProjectId`,`DateField`和`Total`. 我不知道您的 Total 行应该是什么，但如果它是日期范围的计算，请使用 SQL 计算这些值并且不要将其存储在表中。

祝你好运——网上有很多资源可以开始使用 SQL——做一些搜索。

# ssis - 在 ssis 中使用单个数据流导入多个表

> ID：14503478
> 
> 赞同：1
> 
> 时间：2013-01-24T14:19:56.877
> 
> 标签：ssis

我有 10 个表正在使用 SSIS 导入另一个 sql server 数据库。

我是否必须创建 10 个不同的 Dataflow 任务，还是可以继续执行一个 Dataflow 任务并将 10 个表添加到其中？

我尝试使用单个数据流任务，但它只允许单个表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:20:33.293

所有源表是否共享一个公共架构？所有目标表是否共享一个通用模式（不必与源表的通用模式相同）？

如果这两个问题的答案都是“是”，那么您实际上可以编写一个数据流任务（其连接管理器已参数化）并将其放入 Foreach 循环容器中。

如果这些问题中的一个（或两个）的答案是“否”，那么您将必须有单独的来源和目的地。您可能想研究[商业智能标记语言](http://www.varigence.com/documentation/biml/)作为自动生成这些数据流的一种方式，尽管它对于“仅”十个表可能有点过分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:45:09.547

答案取决于您和您的最佳实践，以及您将有多少开发人员同时从事项目工作。

**完全可以将一组以上的表放在一个数据流中。您可以简单地将其他源和目标添加到您的数据流中。** 但是，这几乎不是一个好主意，因为它会增加项目生命周期后期的维护工作。它使查找和调试错误变得更加困难。它使整个项目更加复杂。

如果您独自工作，并且您将自己构建和维护该项目的整个生命周期，那么请务必做任何您觉得最舒服的事情。

如果您所在的团队可能都维护这个项目，我建议您至少将不同表的数据流分解为不同的数据流任务。

如果您在一个较大的组中并且为了在维护方面具有更大的灵活性，我建议将每个数据流分解为不同的包（假设 2008 年或以下。我还没有玩过 2012 年的项目模型，所以不会评论他们在这里），这样每个人都可以由不同的开发人员同时进行。（即使你是项目中唯一的人，我实际上也会推荐这种方式编码，但这只是我在职业生涯中形成的风格。）

# umbraco - 显示上传文件中的 umbracoBytes 升级到 v4.9.1 后

> ID：14503486
> 
> 赞同：1
> 
> 时间：2013-01-24T14:20:14.317
> 
> 标签：umbraco

在最近将站点升级到 v4.9.1 后，它不再填充 umbracoBytes、umbracoExtension 标签。 ![在此处输入图像描述](../Images/591cc3fa7a06bf8a5f66acc50e852c68.png)

这是我的 umbracoSettings.config

```
<imaging>

            <!-- what file extension that should cause umbraco to create thumbnails -->

            <imageFileTypes>jpeg,jpg,gif,bmp,png,tiff,tif</imageFileTypes>

            <!-- what attributes that are allowed in the editor on an img tag -->

            <allowedAttributes>alt,border,class,style,align,id,name,onclick,usemap</allowedAttributes>

            <!-- automatically updates dimension, filesize and extension attributes on upload -->

            <autoFillImageProperties>

                <uploadField alias="umbracoFile">

                    <widthFieldAlias>umbracoWidth</widthFieldAlias>

                    <heightFieldAlias>umbracoHeight</heightFieldAlias>

                    <lengthFieldAlias>umbracoBytes</lengthFieldAlias>

                    <extensionFieldAlias>umbracoExtension</extensionFieldAlias>

                </uploadField>

            </autoFillImageProperties>

        </imaging> 
```

# javascript - 使用 innerHTML 加载 html 片段的奇怪问题

> ID：14503488
> 
> 赞同：0
> 
> 时间：2013-01-24T14:20:18.000
> 
> 标签：javascript, html, dom, opera, innerhtml

我有一个用于歌剧的 userjs 脚本，它显示自己的界面，目前使用 DOM 方法来创建元素。这很好用，但由于接口与代码相关联，因此难以维护。所以我正在寻找一种将布局与代码分开的方法。此外，我想让事情保持简单，并且真的不想为此依赖框架（jquery ...）。我不关心跨浏览器的功能，反正这个东西只能在opera上工作。

我把所有风格的东西都放到了 CSS 中，这很有帮助。现在我正在寻找一种抽象布局的方法。UI 的很大一部分是动态的，所以我不能只使用一个大的静态 html。提出的想法是有一段 html 包含不同 UI 部分的布局，从中提取片段并根据需要将所有内容放在一起。

这在某种程度上非常有效：

*   创建一个`div`，从不作为父级。
*   用于`.innerHTML`将 html 加载到其中
*   使用此[getElementsByClassName()](http://www.tainyan.com/codesnippets/entry-66/javascript-function-getelementbyclassname.html)在其中查找小部件
*   克隆它们`widget.cloneNode(true)`
*   父母之类的...

我知道一些问题`cloneNode()`（重复 ID 的风险，以及克隆中缺少事件处理程序），但我可以解决它们。

问题是，在`.innerHTML`加载时，我从当前的 DOM 代码中得到了不同的结果，即使我使用的是 DOM 代码版本中的捕获布局！例如，我在表格中看到了这一点。对于一个简单的

```
<table><tr><td></td></tr></table> 
```

该`innerHTML`版本在蜻蜓中显示为带有`<tbody>`标签，因此像这样的css规则不再适用：

```
table > tr > td { ... } 
```

我对这一切有一种baaaad的感觉......

*   DOM 和 html 布局之间还有其他很大的区别吗？
*   也许我真的应该`<tbody>`在 DOM 的东西中使用？
*   你会怎么做？

奖金问题：

*   存在的理由是什么`createDocumentFragment()`？你能用它做什么，否则不能做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:36:53.143

你是对的，它看起来像一个标记没有定义的表格，在读取表格的属性时`<tbody>`将被转换为带有标签的标记。`<tbody>``innerHTML`

但这不会给您带来太多麻烦：至于 CSS 问题，请`>`从您的选择器中删除（仅限于直接后代）。

一个可能的好处`DocumentFragment`是，当您需要进行大量 DOM 操作时，如果仅操作文档片段并且一旦完成所有转换，它可能会导致一些性能提升，并且将其附加到 DOM。

# mysql - mysql选择大于小于多列的地方

> ID：14503491
> 
> 赞同：1
> 
> 时间：2013-01-24T14:20:21.487
> 
> 标签：mysql

我有一个以月份和年份为列的列。我需要从列中选择一个范围。它们似乎不适用于 2 个范围。

桌子

```
CREATE TABLE `sampletable` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `AccountId` int(11) unsigned NOT NULL,
  `CampaignId` int(11) unsigned NOT NULL,
  `CampaignName` varchar(115) NOT NULL DEFAULT '',
  `Sent` int(11) unsigned NOT NULL,
  `Month` int(11) unsigned NOT NULL,
  `Year` int(11) unsigned NOT NULL,
  `LocationId` int(11) unsigned NOT NULL,
  PRIMARY KEY (`id`),
  KEY `AccountId_idx` (`AccountId`),
  KEY `monthy_year_idx` (`Month`,`Year`),
  KEY `locationid_idx` (`LocationId`)
) ENGINE=MyISAM AUTO_INCREMENT=1584 
```

选择语句：

```
SELECT * FROM sampletable
WHERE AccountId = 1 
and (`Month` >= 10 AND `Year` = 2012)
and (`Month` <= 2 AND `Year` = 2013)
ORDER BY Year asc, month asc 
```

这似乎不起作用。

我是否必须将这些转换为日期格式并在两者之间使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T14:25:40.470

您正在做的事情类似于“尝试同时向左和向右”。

让我们打破`WHERE`条款。

你说`MySQL`要获取行

1.  `Year = 2012 AND Year = 2013`

2.  `Month >= 10 AND Month <= 2`

这永远不会是真的。

你的`WHERE`条款应该看起来像 -

```
WHERE AccountId = 1 
and ((`Month` >= 10 AND `Year` = 2012)
OR (`Month` <= 2 AND `Year` = 2013)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:24:33.673

```
 and (     
  (`Month` >= 10 AND `Year` = 2012)
 or (`Month` <= 2 AND `Year` = 2013)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T14:25:15.477

将条件括在括号周围并使用`OR`

```
SELECT ...
FROM ...
WHERE AccountId = 1  AND   
      ((`Month` >= 10 AND `Year` = 2012) OR  (`Month` <= 2 AND `Year` = 2013) ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T14:23:36.687

要实现您想要的，请使用“或”而不是“和”。

# email - cPanel邮件管道可以执行文件但不能发送电子邮件？

> ID：14503495
> 
> 赞同：1
> 
> 时间：2013-01-24T14:20:35.587
> 
> 标签：email, pipe, send, cpanel

我有一个看起来像这样的 PHP 管道文件：

```
#! /usr/bin/php -q
<?php
$fd = fopen("php://stdin","r");
$email = "";
while (!feof($fd))
{ $email .= fread($fd, 1024); }
fclose($fd);
$fdw = fopen("/home/user/pipemail.txt","w+");
fwrite($fdw, $email);
fclose($fdw);
mail("email@email_provider.com","You got mail","You received a new email.","From: no-reply@domain.com");
?> 
```

当我从我的一个电子邮件帐户发送电子邮件时，我注意到脚本成功地将电子邮件标题保存到“pipemail.txt”文件中。但是，它不会向“email@email_provider.com”发送电子邮件。

有谁知道可能是什么问题？我必须在某处调整任何设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:14:16.097

大多数CPanel 发送邮件的问题都是在处理exminmailtrap。您是否尝试过删除 eximmailtrap 文件并将 /var/cpanel/cpanel.config eximmailtrap= 设置为 0？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T12:16:37.027

好的，我找到了上述问题背后的原因。

这是因为我的网站托管的 IP 地址（我正在使用共享 IP）已被几台服务器列入黑名单，因为其他人滥用了该系统。无论如何，似乎我必须等待黑名单被清除，下次还要购买专用 IP 地址。

感谢 robobooga 发布了一个可能的解决方案，即使我无法使用它。为您在该领域的知识点赞 =)

# android - 替换已添加为选项卡主机选项卡的片段

> ID：14503496
> 
> 赞同：3
> 
> 时间：2013-01-24T14:20:36.180
> 
> 标签：android, user-interface

我的 android 应用程序出现以下问题：

我有一个 TabHost，其中包含一些片段作为选项卡。这些片段已以编程方式添加。现在我想用另一个片段替换选项卡的内容。我不知道如何实现这一目标。我[找到](https://stackoverflow.com/questions/7796952/android-force-fragment-to-rebuild-view)了如何替换通过 xml 添加的片段，但这不是我想要实现的。

在此先感谢您的任何建议。

编辑：请求的来源（只有相关部分，如果需要更多请告诉我）

我有一种方法来初始化 tabhost 并以编程方式添加选项卡/片段：

```
private void initialiseTabHost(Bundle args) {
    mTabHost = (TabHost)findViewById(android.R.id.tabhost);
    mTabHost.setup();

    addUserListTab(args);
    //methods to add other tabs

    mTabHost.setOnTabChangedListener(this);
}

private void addUserListTab(Bundle args){
    TabInfo tabInfo = null;
    LayoutParams tabIconParams = new LayoutParams(200, 110);
    tabIconParams.setMargins(0, 0, 0, 0);
    View userIndicator = LayoutInflater.from(this).inflate(R.layout.tab_indicator,mTabHost, false);
    ImageView userIcon = (ImageView) userIndicator.findViewById(R.id.tab_icon);  
    userIcon.setLayoutParams(tabIconParams);
    TabSpec specUser = mTabHost.newTabSpec("user");
    specUser.setIndicator(userIndicator);
    userIcon.setImageDrawable(getResources().getDrawable(R.drawable.selector_user));
    userIcon.setScaleType(ImageView.ScaleType.FIT_CENTER);

    AddTab(this, this.mTabHost, specUser, ( tabInfo = new TabInfo("user", ListUserFragment.class, args)));
    this.mapTabInfo.put(tabInfo.tag, tabInfo);

}
private static void AddTab(MainActivity activity, TabHost tabHost, TabHost.TabSpec tabSpec, TabInfo tabInfo) {
    // Attach a Tab view factory to the spec
    tabSpec.setContent(activity.new TabFactory(activity));
    tabHost.addTab(tabSpec);
} 
```

问题是我不明白如何替换我以编程方式添加到 tabhost 的 ListUserFragment。当我通过 tabhost 的容器时，如何指定当前四个选项卡中的哪个选项卡应该包含新片段，当然旧的应该被删除/隐藏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:32:35.327

您需要获取`FragmentManager`并开始一个以用另一个`FragmentTransaction`替换当前。`Fragment`

```
 getFragmentManager().beginTransaction().replace(R.id.container, new Fragment()).commit(); 
```

请务必阅读官方[片段指南。](http://developer.android.com/guide/components/fragments.html).

# java - java中的整数压缩

> ID：14503500
> 
> 赞同：0
> 
> 时间：2013-01-24T14:20:54.597
> 
> 标签：java, compression, data-compression

我有以下格式的整数序列：

```
Integer1 Integer2 Integer3 Integer4 Integer5 .... 
```

每四个连续整数对应于单个记录的值。所以，我不能真正订购它们。

压缩此类文件的最佳方法是什么？

**更新：**

1-这些值彼此独立。每 4 个连续整数代表一条记录，例如：

CustomerId PurchaseId 产品 MoneySpent

每个都保存一个整数值。

2-理想情况下，我希望将其压缩为对象并保存在磁盘上。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:27:26.910

最简单和最兼容的方法是在编写文件时通过 GZIP 压缩文件，方法是使用 GZIPOutputStream 包装您的流并使用 GZIPInputStream 包装它来读取它。

```
InputStream in = new BufferedInputStream(new GZIPInputStream(new FileInputStream(filename)));

OutputStream out = new BufferedOutputStream(new GZIPOutputStream(new FileOutputStream(filename))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-10T01:03:48.467

在给定的方式中，使用 GZip 并不是最优的。由于您的 OrderID、您的 PurcaseId、ProductID 和 MoneySpent 彼此不同，但所有 OrderId 与 PurcaseId、ProductId 和 MoneySpent 有一些共同点。因此，最好不要按行存储这些值，而是按列存储这些值。

由于您通常在要存储的此表中具有排序顺序，因此一列可以用增量值表示。例如，如果您按 OrderId 对值进行排序，则可以将 10、23、44、53 的序列表示为 +10、+13、+21、+53。这些数字比原始数字更小，更容易重复。

整数值可以表示为可变位长信息。首先，您存储值的位数而不是实际值。这样可以节省很多前导零。

For money spent you can also think about the actual repetition of typical numbers like 99, 25, 50, 49 and so on for the cent values. It is more likely that a product has the price of 49,99 but not 51,23\. So spliting the money integer into two values will give you the ability to use Huffman encoding and treat special values as symbols and the rest as runlength bits.

To express the bit length, you can also use different encoding schemes one would be yet again a huffman code of 64 symbols (64 different length information) and train a coding schema. This way you will end up with very less numbers of bits instead of writing integers or even longs.

The remaining stuff can be put into gzip. This works usually better depending on the way you express the bit length since it is easier to compress leading zeros than different bit length information but every compression cost.

Another coding scheme for bit lengths is using the min max approach.

For example for the above sequence 10, 23, 44, 53 we store 10, +43 (53), +13, +23\. The idea is to know that between 10 and 53 there are 43 elements. So the next value has a maximum length of 6 (2^6 = 64) bits. This way there is no need for bit length information. You just store the sequence in the oder first minimum, next maximum, next minimum, next maximum and so on.

A more efficient scheme is using minimum, maximum, middle, middle left, middle right, middle left left, middle left right, middle right left, middle right right ... . This way you have the best chance to result in smallest bit length knowledge. Using this way results in very small sizes of the integers without additional bit length information.

Using such schemes often leaves GZip a chance of further reduction by < 10% resulting in the omitting of GZip at all.

[Summary]

So GZip is simple, if you need to squeeze out more, go for column wise instead of row/entry wise. Use special knowledge of each column. If sorted use deltas as representation. Use bit lengths informations being expressed by huffman codes (one for each column) and using values for cents and dollars for product prices often result in very good compression chances. Store sorted columns by deltas and use the tree wise storage resulting in very good knowledge about the bit length to expect next.

# iphone - 修复损坏的核心数据文件的策略

> ID：14503502
> 
> 赞同：1
> 
> 时间：2013-01-24T14:21:03.393
> 
> 标签：iphone, ios, sqlite, core-data, corruption

我知道核心数据损坏应该是非常罕见的，但我发现一些用户已经损坏了商店——无论出于何种原因。修复损坏的核心数据存储有哪些策略？我不喜欢告诉我的用户，“我希望你做了备份！” 因为大多数都没有。

# codeigniter - 如何使用 tank auth 库限制同一用户在另一台设备上的登录？

> ID：14503504
> 
> 赞同：1
> 
> 时间：2013-01-24T14:21:04.653
> 
> 标签：codeigniter, codeigniter-2, tankauth

如果同一用户登录另一台设备，有什么方法可以限制对带有 tank auth 库的页面的访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:17:16.330

我认为您要查找的内容与 Tank 身份验证库无关，它位于您的配置文件中`application/config/config.php`

```
$config['sess_match_ip']= FALSE;
$config['sess_match_useragent'] = TRUE; 
```

改成

```
$config['sess_match_ip']= TRUE;
$config['sess_match_useragent'] = TRUE; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:05:50.637

我不完全理解你的问题，我也不太了解 Tank auth 库。假设没有默认实现，我将解释我认为您的问题的可能解决方案。

可以做到这一点的方法是将会话令牌存储在数据库中，并在每次有人登录时生成一个新的会话令牌。然后将此会话令牌存储在 Cookie（或会话变量，如果您愿意）中。每次您的应用加载时，请检查会话令牌是否仍然有效。如果同一用户在不同的设备上登录，会话令牌将更改，因此旧会话将无效。

如果您希望用户能够同时在多个设备上登录，但只想锁定对单个页面的访问（例如对网络研讨会/截屏的访问），您有几个不同的选项。最简单的解决方案是将标志放入数据库中是否打开。问题是，如果关闭它，就无法再次观看。对此的一个细微变化是使用在有人第一次打开页面时设置的会话令牌。您将令牌存储到数据库中，并将其存储在 cookie 中。所以第一个打开它的设备，是可以观看的设备。

另一种解决方案是更新 last_active 字段，并在页面打开时每分钟对服务器进行一次 ajax 调用。如果页面在 2 分钟内没有处于活动状态，您可以假设它不再处于活动状态，您可以授予其他设备访问权限。

# vbscript - 如何比较vbscript中cmd的结果？

> ID：14503506
> 
> 赞同：-1
> 
> 时间：2013-01-24T14:21:07.700
> 
> 标签：vbscript, cmd, compare

我询问有关获取此 cmd 命令 **netstat -a |的结果的问题。查找 /c "TCP"**

并使用 VBSCRIPT 将其与特定值进行比较

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:00:35.810

用这么少的细节很难回答问题，但无论如何让我们尝试......

下面的示例代码将说明两种将命令行输出存储到 vbs 中的变量的方法。`WScript.Echo`仅用作证据（显示结果）。

```
'** VAR#1 (using Exec & StdOut) ----------
Dim ObjExec
Dim strFromProc

Set objShell = CreateObject("WScript.Shell")
Set ObjExec = objShell.Exec("%comspec% /c " _
    & "netstat -a | find /c " & Chr(34) & "TCP" & Chr(34))

Do Until ObjExec.Stdout.atEndOfStream
    strFromProc = strFromProc & ObjExec.StdOut.ReadLine & vbNewLine
Loop

WScript.Echo strFromProc ' display result from variable strFromProc

Set objShell = Nothing
Set ObjExec = Nothing

'** VAR#2 (using Run) --------------------
Const cLogFile = "result.txt"

Set objShell = CreateObject("WScript.Shell")
objShell.Run "%comspec% /c netstat -a | find /c " _
    & Chr(34) & "TCP" & Chr(34) & ">" & cLogFile, 0, True

Dim oFile, Result
With CreateObject("Scripting.FileSystemObject")
    If .FileExists(cLogFile) Then
        Set oFile = .OpenTextFile(cLogFile)
        Result = oFile.ReadLine
        oFile.Close
        Set oFile = .GetFile(cLogFile)
        oFile.Delete
    End If
End With

WScript.Echo Result ' display result from variable Result

Set oFile = Nothing
Set objShell = Nothing 
```

# python - wxmplot matplotlib wxpython 交互式散点图

> ID：14503509
> 
> 赞同：0
> 
> 时间：2013-01-24T14:21:13.043
> 
> 标签：python, wxpython, wxwidgets

这是我的代码

```
 #!/usr/bin/python
#

import sys
if not hasattr(sys, 'frozen'):
import wxversion
wxversion.ensureMinimal('2.8')

import wxmplot
import numpy
import wx
import os
import subprocess
import re
import wx.lib.plot as plot
import urllib2
from BeautifulSoup import BeautifulSoup
from wx.lib.pubsub import Publisher

""""""

#----------------------------------------------------------------------
def __init__(self, parent, size = (5000,5000)):
    """Constructor"""
    wx.Panel.__init__(self, parent=parent, size = (5000,5000))
    self.frame = parent

    Publisher().subscribe(self.showFrame, ("show.mainframe"))
    menu=wx.MenuBar()
    file0 = wx.Menu()
    help0 = wx.Menu()
    Load=file0.Append(wx.NewId(),"Load Protein","Load from PDB File")
    parent.Bind(wx.EVT_MENU,self.load,Load)
    file0.Append(wx.NewId(),"Save")
    Close = file0.Append(wx.NewId(),"Quit")
    parent.Bind(wx.EVT_MENU,self.close,Close)
    help0.Append(wx.NewId(),"Help")
    help0.Append(wx.NewId(),"About")
    menu.Append(file0,"File")
    menu.Append(help0,"Help")
    parent.SetMenuBar(menu)
    self.pubsubText = wx.StaticText(self,-1," ", (5,150))        

def close(self,event):
    self.Close(True)

def showFrame(self, msg):
    """
    Shows the frame and shows the message sent in the
    text control
    """
    self.pubsubText.SetLabel("This is the Contact Map for the chain "+msg.data[0]+" in the PDB file "+msg.data[1])

self.data = number_list
    x   = numpy.arange(100)/20.0 + numpy.random.random(size=100)
    y   = numpy.random.random(size=len(x))
    def onlasso(data=None, selected=None, mask=None):
        print ':: lasso ', selected
        pframe = wxmplot.PlotFrame()
        pframe.scatterplot(x, y, title='Scatter Plot', size=15,xlabel='$ x\, \mathrm{(\AA)}$',ylabel='$ y\, \mathrm{(\AA^{-1})}$')
        pframe.panel.lasso_callback = onlasso
        pframe.write_message('WXMPlot PlotFrame example: Try Help->Quick Reference')
        pframe.Show()
frame=self.GetParent()
frame.Show()

########################################################################
class MainFrame(wx.Frame):

#----------------------------------------------------------------------
def __init__(self):
    wx.Frame.__init__(self, None, wx.ID_ANY, "PSP Solver")
    panel = MainPanel(self)

#----------------------------------------------------------------------
if __name__ == "__main__":
app = wx.App(False)
frame = MainFrame()
frame.Show()
app.MainLoop() 
```

首先是一帧，带有一个菜单栏，然后​​从下拉菜单中选择加载蛋白质，这会使当前帧消失，并弹出一个新的帧，然后加载所需的数据，然后按确定。在此之后应该发生的是应该出现一个图表，但它没有。我是 python 新手，所以不确定我哪里出错了。对于图表，我使用的是我认为与 matplotlib 相关的 wxmplot。我认为我的问题是与框架或类似的东西混淆了。任何帮助将不胜感激干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:49:05.063

通常在将 matplotlib 与 GUI 工具包集成时发生这种情况，问题与 matplotlib[后端](http://matplotlib.org/faq/usage_faq.html#what-is-a-backend)设置有关。由于您正在编写 wx 应用程序，我建议您尝试“WXAgg”或“WX”后端。

# php - 如何解决此 403 禁止错误

> ID：14503516
> 
> 赞同：0
> 
> 时间：2013-01-24T14:21:26.010
> 
> 标签：php, file, http-status-code-403

我在 Centos 机器上有一个虚拟主机（Linux i-8941-35408-VM 2.6.18-308.11.1.el5xen #1 SMP Tue Jul 10 09:29:47 EDT 2012 x86_64 x86_64 x86_64 GNU/Linux）。我的 Vhost 配置文件如下

```
<VirtualHost *:80>
ServerAdmin myemail@gmail.com
ServerName subdomain.domain.biz
ServerAlias sudomain.domain.biz

DocumentRoot /home/myfolder/public_html/subdomain.domain.biz/public

LogLevel warn
ErrorLog /home/myfolder/public_html/subdomain.domain.biz/log/error.log
CustomLog /home/myfolder/public_html/subdomain.domain.biz/log/access.log combined

<Directory /home/myfolder/public_html/subdomain.domain.biz/public>
Options FollowSymLinks -Indexes -Includes
#What about Multiviews for Options above
AllowOverride All
Order allow,deny
Allow from all
</Directory> 
```

我没有 .htaccess 文件。

“public”文件夹的目录列表如下

```
-rw-r--r-- 1 root root  2763 Jan 22 07:11 FailedTRAN.php
-rw-r--r-- 1 root root 11890 Jan 22 18:54 GetHandleRESponse.old
-rwxrwxrwx 1 root root 12024 Jan 23 17:14 GetHandleRESponse.php
drwxr-xr-x 2 root root  4096 Jun  9  2012 images
-rw-r--r-- 1 root root  2562 Jan 22 07:11 Index.html
-rw-r--r-- 1 root root  9556 Jan 23 18:21 SendPerformREQuest.php
-rw-r--r-- 1 root root  3396 Jan 22 07:11 StatusTRAN.php 
```

我可以从我的浏览器访问 Index.html，但是任何访问 GetHandleRESponse.php 的尝试都会导致 403 Forbidden 错误。因此，当我向另一台服务器发送请求时，另一台服务器必须通过访问 GetHandleRESponse.php 页面来发布其响应。这失败了。我无法弄清楚为什么会这样。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:24:38.727

目录应该具有 x 权限（当我们使用 dirs 时，x 并不意味着执行，x 意味着访问权限）。

# git - 在 GIT 中模拟冲突

> ID：14503517
> 
> 赞同：2
> 
> 时间：2013-01-24T14:21:26.943
> 
> 标签：git, github

我想在不提交的情况下切换分支时模拟 git 中的冲突。

我有一个主分支，其中有一些已提交的文件。

我创建另一个分支并修改主分支中也存在的文件。

我仍然没有在另一个分支中提交更改。

但是当我尝试检查主分支时，它允许我做同样的事情。

我无法模拟冲突的场景。

任何人都可以提供文件内容和同一文件的修改版本，这会导致冲突。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T15:19:20.067

合并发生在同一基础上的更改时会发生冲突，因此要生成冲突，您需要从上次提交之前发生的提交开始分支`master`：

如果您有以下情况，则不会发生冲突，因为修改是按顺序发生的：

```
* branch tip
|
* master tip
|
* commit a 
```

没有什么要合并的，要么是分支，要么是主。

相反，如果`branch`并且`master`已经对文件的同一部分进行了修改，则以下内容将触发合并冲突，因为它们可能是不相关的：

```
* branch tip
|
| * master tip
|/
* commit a 
```

合并时会发生冲突`branch`，`master`git无法说出您是否要修改`branch`or of `master`，或两者兼而有之。

# php - 将数据导出为 CSV 时处理一对多关系

> ID：14503525
> 
> 赞同：1
> 
> 时间：2013-01-24T14:21:53.607
> 
> 标签：php, mysql, database, csv, yii

我有一个包含 11 个表的数据库，其中 9 个表与用户信息表具有一对多关系。

用户表：

```
ID , Name , Age , phone , . ....... 
```

根据 ID，关系与表格有关，例如

```
User_cars
ID,User_ID(fk),Make , Model , ..... 
```

我需要做的是在 CSV 文件中的数据库中显示这些数据。由于存在一对多关系，因此简单的连接不起作用，因为行是重复的。（客户端无法呈现格式：S）

我使用 Yii 作为网络应用程序，需要一些可以以某种可读方式呈现它的扩展。

或者也许一个 php 脚本也可以完成这项任务。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T14:28:39.980

您可以通过以下两种方式之一来处理它：

**1.**使用[GROUP_CONCAT](http://www.mysqlperformanceblog.com/2006/09/04/group_concat-useful-group-by-extension/)（正如评论中提到的@Dave - 这是链接：[MYSQL PHP API - Displaying & Fetching multiple rows within rows from another table](https://stackoverflow.com/questions/14500748/mysql-php-api-displaying-fetching-multiple-rows-within-rows-from-another-tab/14501190#14501190)）。但是有一个缺点， GROUP_CONCAT 有一个限制（默认为 1024 个字符），您可以使用服务器变量更改该限制`group_concat_max_len`，但您可能无权这样做。

这看起来很像这样：

```
ID | Name | Car Model           | Year
1    John   BMW, Audi, Renault    1999, 2000, 2003
2    David  Mercedes, Ford        2000, 2005 
```

如果每个用户有 30-40 个条目并且不可读，这可能会变得非常复杂。

**2.**第二个选项是以以下格式导出它（不难做到，您只需遍历用户拥有的所有汽车，但仅在第一次迭代中写入用户）。

* * *

```
ID | Name | Car Model | Year
1    John   BMW         1999
            Audi        2000
            Renault     2003
2    David ..... 
```

这是一些示例代码（我使用了很多编造的方法，这些方法具有暗示性的名称）。

```
$csvArray = array();
foreach ($users as $user) {
    $cars = $user->getCars(); //random method name. Grabs an array with the cars this user has :)

    $firstIteration = 1;
    foreach ($cars as $car) {
         if ($firstIteration == 1) { // we only set the CSV row the first time we iterate through cars
             $csvSingle['ID'] = $user->getId(); // more random method names
             $csvSingle['Name'] = $user->getName();
             $firstIteration = 0;
         }
        $csvSingle['car_model'] = $car->getCarModel();
        $csvSingle['car_year'] = $car->getCarYear();

        $csvArray[] = $csvSingle; // now we add the single row to the big CSV array.
    }

}

fputcsv($handle, $csvArray); // $handle is the file you export to 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:45:42.053

我喜欢@“Vlad Preda”的第一个变体，在你的控制器或导出组件中你可以使用这样的东西：

1.  用汽车获取用户（并且汽车必须填写用户模型关系）

    $users = User::model()->with('cars')->findAll();

2.  进而

    foreach ($users 作为 $user) {

    $csvOneUser = array('id'=>$user->id, "name"=>$user->name);

    if (!$user->cars) {

    ```
    $csvAll[] = $csvOneUser;

    continue; 
    ```

    }

    foreach ($user->cars as $car) {

    ```
    $car_attributes = $car->getAttributes();

    foreach ($car_attributes as $k=>$v) {

      $csvOneUser[$k][] = $v;

    } 
    ```

    }

    }

# php - SharePoint Web 服务忽略 GetListItems 方法的查询部分

> ID：14503532
> 
> 赞同：0
> 
> 时间：2013-01-24T14:22:12.847
> 
> 标签：php, web-services, sharepoint, soap

我是 SharePoint Web 服务的新手。我正在使用 PHP 将此请求发送到我的 SharePoint 服务器，但我的查询部分被完全忽略

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://schemas.microsoft.com/sharepoint/soap/">
  <SOAP-ENV:Body>
    <ns1:GetListItems>
      <ns1:listName>Customers</ns1:listName>
      <ns1:query>
        <Query>
          <Where>
            <Eq>
              <FieldRef Name="ows_EMail" />
              <Value Type="Text">aaa@ddd.com</Value>
            </Eq>
          </Where>
        </Query>
      </ns1:query>
      <ns1:rowLimit>150</ns1:rowLimit>
    </ns1:GetListItems>
  </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

我尝试了很多在论坛上找到的建议，但没有任何效果。谁能帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:40:16.370

看起来您缺少一个**查询**节点（注意小写字母），它是**查询**节点的父节点。这是一个例子：

```
 <soap:Envelope xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xmlns:xsd='http://www.w3.org/2001/XMLSchema' xmlns:soap='http://schemas.xmlsoap.org/soap/envelope/'>
  <soap:Body>
    <GetListItems xmlns='http://schemas.microsoft.com/sharepoint/soap/'>
      <listName>OpportunitiesAdmins</listName>
      <viewName></viewName>
      <query>
        <Query>
          <Where>
            <Eq>
              <FieldRef Name='AdminName' />
              <Value Type='User'>Welch, Jeff (UBC)</Value>
            </Eq>
          </Where>
        </Query>
      </query>
      <viewFields></viewFields>
      <rowLimit>0</rowLimit>
      <queryOptions>
        <QueryOptions></QueryOptions>
      </queryOptions>
    </GetListItems>
  </soap:Body>
</soap:Envelope> 
```

# sql - 如何自动恢复 SQL Server 2008 R2 备份文件

> ID：14503533
> 
> 赞同：0
> 
> 时间：2013-01-24T14:22:14.277
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2, downgrade

我的团队需要更新在 SQL Server 2008 服务器上运行的自动化内容流程，以包含第三方供应商提供的 SQL Server 2008 R2 数据库的内容。请求第三方在 SQL Server 2008 上为我们提供服务**不是**一种选择。

我的常识表明，在我知道的大多数软件产品中，没有办法从 2k8 R2 降级到 2k8。但是，我想知道是否可以在脚本中执行以下操作：

*   将 SQL Server 2008 R2 文件还原`.bak`到我们的 SQL Server 2008 R2 实例
*   将兼容性级别更新为 SQL Server 2008 (100)。**这是我计划中的错误**：我没有在互联网上发现 2008 版本之间的任何兼容性级别差异。对此有任何线索吗？
*   备份数据库。
*   在 SQL Server 2008 中恢复数据库

您可能还想与我分享其他一些想法。

回想一下，不应**手动**干预此数据库转换，因为此操作需要合并到自动化过程中。

欢迎任何帮助/建议/评论！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T14:25:12.513

不，无论兼容性级别如何，您都无法向后还原数据库。兼容性级别会影响某些数据库引擎的行为，但不会降级数据库版本。您将永远无法将曾经存在于 2008 R2 实例中的数据库恢复到 2008。

对于解决方法，您可以：

*   恢复 R2 上的数据库，然后使用导入/导出数据向导（或第三方工具）将模式/数据传输到 2008 实例（您应该能够在某种程度上自动执行此操作，例如 Red-Gate 的工具有命令线接口）
*   将您的 2008 服务器升级到 2008 R2 或 2012
*   回击供应商

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:29:09.880

*根据设计*，您只能将数据库备份还原到相同或更新版本的 SQL Server。使用 SQL Server 2008 R2 创建的备份只能使用 SQL Server 2008 R2 或 SQL Server 2012 恢复。这与数据库的兼容性级别无关。这是备份和还原过程的限制。自 SQL Server 2000 之前（即，我曾经使用过的每个版本）以来，这一直是一个限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T14:33:50.843

也许您可以编写新数据库的创建脚本，而不是备份和恢复您基本上只是使用脚本进行数据转储。

试试看这个[如何获得 SQL Server 2008 数据库的 SQL 转储？](https://stackoverflow.com/questions/1391110/how-can-i-get-a-sql-dump-of-a-sql-server-2008-database)

# .net - 有什么方法可以查看从 WinForms 应用程序写入 Console.Error 的消息？

> ID：14503542
> 
> 赞同：3
> 
> 时间：2013-01-24T14:22:41.323
> 
> 标签：.net, stderr

在我的 winforms 应用程序中，我使用了一个记录到 Console.Error 的第 3 方库。

```
Console.Error.WriteLine("some error message"); 
```

有什么工具可以用来查看这些消息吗？我只想在开发/调试时看到它们。

我认为 debugview 可能会这样做，但它只显示 Trace 消息。此外，Visual Studio 的“输出”窗口也不显示它（当附加到进程时）。

如果没有工具，如何将 StdErr 重定向到 Trace 日志？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T14:24:49.117

您可以调用[`Console.SetError`](http://msdn.microsoft.com/en-us/library/system.console.seterror.aspx)将输出重定向到您自己的`TextWriter`- 这反过来可以使用`Trace`or `Debug`，或者可能写入您应用程序中的虚拟控制台。

# javascript - Phonegap - 在 Apple 地图应用中打开导航方向

> ID：14503551
> 
> 赞同：12
> 
> 时间：2013-01-24T14:23:03.123
> 
> 标签：javascript, jquery, ios, cordova, maps

我有两个变量 - Destination 和 Source - 并且，使用 Phonegap，我正在尝试使用 jQuery 打开带有方向的外部 iPhone Apple Maps 应用程序。

我正在使用的代码如下所示：

```
var url = 'http://maps.apple.com/?q=daddr='+destination+'&saddr='+source;
window.location = url; 
```

但是，每当我单击相关按钮时，它都会在应用程序内打开一个新视图，其中包含 Google 方向作为 web 视图，并且我无法返回原始应用程序。

如何使用 iOS 默认地图应用程序打开链接？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-24T15:01:26.730

改变`http://maps.apple.com/?q=`只是`maps:`做了伎俩。

* * *

注意：确保您编写`maps:`而不是`map:`as，虽然后者将运行正确的应用程序，但它会在打开后立即崩溃（感谢 jprofitt）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-01-12T19:25:28.277

今天，我能够使用以下两种 URL 方案从 Cordova 应用程序中打开带有标记的本机 Apple Maps 应用程序：

```
maps://maps.apple.com/?q={latitude},{longitude} 
```

和

```
maps://?q={latitude},{longitude} 
```

在一个链接中：

```
<a href="maps://maps.apple.com?q={latitude},{longitude}">
<!-- OR -->
<a href="maps://?q={latitude},{longitude}"> 
```

来自 JavaScript：

```
window.location.href = "maps://maps.apple.com/?q="+lat+","+lng;
// OR
window.location.href = "maps://?q="+lat+","+lng; 
```

该应用程序在 iOS 设备上运行，iOS 版本 8.1.2，cordova-ios 版本为 3.7.0。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-08-13T17:07:53.690

就我而言，从更改`http://maps.apple.com/?q=`为仅`maps:?q=`不解决问题。

使用marker打开原生Apple Maps的工作方案如下：

```
maps://maps.apple.com/?q={latitude},{longitude} 
```

完整的工作代码：

```
window.location.href = "maps://maps.apple.com/?q="+lat+","+lng; 
```

经测试可与 iOS7.1 模拟器配合使用，可能无法在以后的版本中使用。我没有机会测试。对不起。

可在此处找到支持的 Apple 地图参数： [https ://developer.apple.com/library/ios/featuredarticles/iPhoneURLScheme_Reference/MapLinks/MapLinks.html](https://developer.apple.com/library/ios/featuredarticles/iPhoneURLScheme_Reference/MapLinks/MapLinks.html)

归功于此 SO 链接：[这里](https://stackoverflow.com/a/19742040/1023327)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-04-06T11:52:14.543

# 编码

我设法在 2018 年使用 iOS 中的以下格式在 iOS 11.2 上实现了此功能：

```
<a onclick="window.open('maps://?q=51.178847,-1.826160', '_system');">Open in Maps</a> 
```

Android上的这种格式：

```
<a onclick="window.open('geo:0,0?q=51.178847,-1.826160', '_system');">Open in Maps</a> 
```

# 配置权限

此外，不要忘记为您的`config.xml`文件添加权限，如下所示：

```
<allow-intent href="maps:*" /> 
```

在我的项目中，这个`geo:`意图从一开始就存在，所以我花了一段时间才弄清楚为什么它适用于 Android 而不是 iOS。

# cross-domain - AS3 - URLRequest 不工作

> ID：14503552
> 
> 赞同：0
> 
> 时间：2013-01-24T14:23:04.847
> 
> 标签：cross-domain, flash, urlrequest

我的 Flash SWF 需要使用 URLRequest 加载“photo.jpg”但徒劳无功。这是我的做法

```
imLoader = new Loader();
imLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, imageLoaded);
imLoader.load(new URLRequest("photo.jpg")); 
```

SWF 和照片都位于我的本地主机服务器上的同一目录中。当我在浏览器中渲染它时，照片不会加载。但是当我通过简单地打开 SWF 手动操作时，照片会正确加载。

它与跨域有关还是有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:08:19.477

该路径是相对于 HTML 文档的。因此，如果您的图像和 SWF 与 HTML 不在同一目录中，您需要提供一个路径（绝对或相对于 HTML）。

因此，如果您的 SWF 和图像位于“媒体”目录中，您将需要：

```
imLoader.load(new URLRequest("media/photo.jpg"));
//or
imLoader.load(new URLRequest("/media/photo.jpg"));
//or (if SWF and image are on different server)
imLoader.load(new URLRequest("http://www.domain.com/media/photo.jpg")); 
```

# llvm - llvm 依赖分配负载

> ID：14503561
> 
> 赞同：0
> 
> 时间：2013-01-24T14:23:23.903
> 
> 标签：llvm

我在查找依赖项时遇到了一些问题。我想从每个 Load 中获取相应的 Alloca（从所使用的变量的角度对应，这意味着 Load 正在使用基于/依赖于 Alloca 或 Allocas 的变量）。

因此，我有一个像这样的链：`Alloca -> Load(1) -> ... -> Computation where the variable might be changed -> Store(new_var) -> ... -> Load(n)`

“变量更改的计算”意味着：我可能有`Alloca(a), c=a+7000*b[32], Load(c)`.

首先，我尝试使用 AliasAnalysis 类中的方法。计划如下：在获得所有必须别名后，我将它们分类为 2 ：

1.  A 类：allocas 的别名
2.  B类：没有allocas的别名

对于 A 类，直接满足我的需要。对于 B 类，我从 A 类别名的指令中检查是否存在使用变量的指令。如果是，则可以。

对于某些方法，我不能使用 Alloca，因此我尝试查找 Loads 之间的依赖关系（我在数组 loadInstrArray 中有所有 Load 指令），然后检查某些 Load 是否使用与 Alloca 相同的变量。

但是以下内容根本没有给我任何结果（它们应该，我的目标测试代码中有依赖项 - 这意味着 Load j 在我的代码中多次使用，因此指针应该是必须别名）：

1.  `if( AA.isMustAlias(Loci,Locj) )`- 没结果
2.  `if( AA.alias(Loci,Locj) )`- 错误的结果，例如“ `LOAD %2 = load i32* %j, align 4 IS DEPENDENT ON %3 = load i32* %c, align 4`”

其中 j 完全独立于 c

3". `if( AA.getModRefInfo(allocaInstrArray[j],Loci) )`- 没有结果

其中 Loci 是 Load 中的 AliasAnalysis::Location，allocaInstrArray 是一个包含所有 allocas 的数组

其次，我尝试使用 DependencyAnalysis 类中的方法。

1.  `if (DA.depends(loadInstrArray[i],loadInstrArray[j],false))`- 没结果

第三，我尝试了 MemoryDe​​pendenceAnalysis 类中的方法——现有的 pass [http://llvm.org/docs/doxygen/html/MemDepPrinter_8cpp_source.html](http://llvm.org/docs/doxygen/html/MemDepPrinter_8cpp_source.html)。

1.  我有错误的结果，例如：`%1 = load i32* %j, align 4 IS Clobber FROM: store i32 0, i32* %c, align 4`
2.  然后我尝试只获取 DEF（而不是 clobber），因为我只需要查看每个 Load 对应的 Alloca。我没有任何负载结果。我还检查了`getDef()`方法，负载依赖于自己。
3.  我不得不提到我评论了 line `00131`，因为我有一个未解决的段错误，而不是参数是问题。

你认为我应该关注什么，考虑什么方法更好，消除什么？

非常感谢您的宝贵时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T18:44:30.247

此外，您应该检查 ICMP 操作数是否一直在引用 Load 指令。如果不是，则从两个 ICMP 操作数（0 和 1）中寻找递归加载指令。Loads 和 ICMP 之间可能还有其他中间操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:51:36.247

使用`getOperand(0)`/`getOperand(1)`的 ICMP 指令。如果有`isa<LoadInst>`有效，则将它们转换为`LoadInst`. `getPointerOperand()`将获得 Value* ，它是被搜索的实际变量。在加载指令和`Alloca`指令之间执行相同的过程。`getOperand(0)`应用在 Load 上给出相应的`Alloca`指令。通过检查依赖关系将两个结果链接在一起。手动执行的结果通过了测试。

# java - Oracle 会创建一组在 Windows 8 上看起来像原生的 UI 控件吗？

> ID：14503563
> 
> 赞同：0
> 
> 时间：2013-01-24T14:23:28.537
> 
> 标签：java, user-interface, windows-8

据我所知，没有办法用 Java 编写本机 Windows 8 应用程序（采用 Metro 风格）。它是在 Java 8 中创建的，还是已经有一组在 Windows 8 上看起来原生的 UI（用户界面）控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:28:59.803

我怀疑甲骨文会这样做。与原生外观保持一致并不是 Swing 的议程。（或者至少，过去从未如此。）

如果您想构建一个具有本机窗口系统外观的 Java UI，请查看[SWT](http://en.wikipedia.org/wiki/Standard_Widget_Toolkit)。我认为尚不支持 Windows 8 外观，但我希望这将在筹备中。

根据我看到的一些资料，Windows 8 早期/开发人员版本没有 Java 端口。这将使将 Eclipse 生态系统...包括 SWT...移植到 Windows 8 变得困难。

根据甲骨文网站：

*   Java 支持 Windows 8 作为 jdk-1.7.0_u10 的认证平台。那是在 2012 年 12 月才发布的。

*   Windows 8 上的 Java（尚未）在 Metro 上运行。（或者如果它确实运行，它没有经过认证。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:33:31.410

> 据我所知，没有办法用 Java 编写本机 Windows 8 应用程序（采用 Metro 风格）。

这是正确的。

> 它会在 Java 8 中创建吗...

微软控制 Metro 的运作方式，而不是甲骨文

> 还是已经有一组在 Windows 8 上看起来很原生的 UI（用户界面）控件？

我通过 Google 搜索找到了这个：[JMetro – Java 上的 Windows 8 Metro 控件](http://java.dzone.com/articles/jmetro-%E2%80%93-windows-8-metro)。我确定还有其他人。

在我看来，Windows 8 Metro 控件在可用性方面是一个倒退。

# validation - 仅在提交时才需要使用 JSF 2 进行验证

> ID：14503568
> 
> 赞同：0
> 
> 时间：2013-01-24T14:23:39.647
> 
> 标签：validation, jsf, primefaces

我有验证问题，因为我只希望在单击屏幕上的提交按钮时进行验证，而不是在单击另一个按钮时进行。

在显示的页面中 option1.faces 是主文件 option1.xhtml，以及几个包含的文件。以下是来自主页的代码片段和两个包含的文件：

option1.xhtml 中的代码：

```
<h:inputText size="4" maxlen="5" id="teff1" value="#{option1.teff1}">
<f:validateDoubleRange minimum="#{option1.teff1Min}" maximum="#{option1.teff1Max}"
    disabled="#{simulator.validate}"/>
</h:inputText> 
```

option1.xhtml 中包含的丰富s0.xhtml 中的代码：

```
<h:selectOneMenu id="abundanceSet0" value="#{abundance.abunSet0}" style="height:25px; width:180px;">
<f:selectItems value="#{abundance.abunSetMap}"/>
</h:selectOneMenu>
<p:spacer width="37" height="0"/>
<p:commandButton value="Select Set" actionListener="#{abundance.selectSet0}" update="abundances0"/> 
```

option1.xhtml 中包含的 footerButtons.xhtml 中的代码：

```
<h:message for="teff1" style="color:red"/>

<h:commandButton value="Submit" disabled="#{!login.loggedIn}" action="#{simulator.submit}" onclick="resetForm()"
actionListener="#{simulator.validate}" class="button"/> 
```

来自相应 bean 的代码片段在这里： MyOption1Bean：

```
@ManagedBean(name="option1")
@SessionScoped
public class MyOption1Bean implements Serializable {

// Lots of other private variables and objects

private String teff1;

private String teff1Min;
private String teff1Max;

// Option 1 constructor to initialze limits
public MyOption1Bean() {
    ResourceBundle bundle = ResourceBundle.getBundle("com.csharp.validation");
    teff1Min = bundle.getString("teff1Min");
    teff1Max = bundle.getString("teff1Max");
}

public String getTeff1() {
    return teff1;
}

public void setTeff1(String teff1) {
    this.teff1 = teff1;
}

// Lots of getters, setters, methods, etc.
} 
```

我的丰盈豆：

```
@ManagedBean(name="abundance")
@SessionScoped
public class MyAbundanceBean implements Serializable {

// Lots of other private variables and objects

public String getAbunSet0() {
    return abunSet[0];
}

public void setAbunSet0(String abunSet) {
    this.abunSet[0] = abunSet;
}

public Map<String,String> getAbunSetMap() {
    return abunSetMap;
}

public void selectSet0(ActionEvent e) {
    selectSet(0);
}

// Lots of getters, setters, methods, etc.

} 
```

我的模拟器豆：

```
@ManagedBean(name="simulator")
@SessionScoped
public class MySimulatorBean implements Serializable {

// Lots of other private variables and objects

private boolean validate;

// When validate is true disabled is false so validation takes place.
public boolean isValidate() {
    return !validate;
}

// When navigating away from the home page to one of the options, reset the error
// and validate flags.
public void resetError(ActionEvent event) {
    error = false;
    validate = false;
}

// On clicking "Submit" this enables the validate flag.
public void validate(ActionEvent event) {
    validate = true;
}

// On clicking "Submit" this gets the user's input, and if succesful sends it to an output file then
// navigate to a "Success" page, otherwise return to the original page.
public String submit() {

    // Code to check for errors and output data to a file.

}

// Lots of getters, setters, methods, etc.
} 
```

在**选项 1**（xhtml 和 bean 文件）中，用户输入 的值`teff1`，该值必须介于`teff1Min`和之间`teff1Max`，这些值是从属性文件中获得的。这可以正常工作，如果`teff1`未给出值或超出范围，则单击“**提交**”按钮时，如 中给出的`footerButtons.xhtml`，提交失败并且`<h:message/>`标签显示错误。

但是，在点击“**提交**”之前，如果输入字段为`teff1`空或有错误的值，`<p:commandButton value="Select Set" .../>`则包含`abundances0.xhtml`的无效。它应该使用所选菜单更新显示，否则它会这样做。我将`immediate` 属性设置为`<p:commandButton value="Select Set" />`to `true`，但它仍然不起作用。我只希望在单击“**提交**”按钮时进行验证，而不是别的。

我尝试了另一种方法：`validate`使用模拟器 bean 中的标志来禁用验证，直到需要它为止。也就是说，当`option1`页面被访问时是`false`，禁用是`true`，并且在单击提交按钮之前不进行任何验证，此时它被设置为`true`，所以禁用是`false`。不幸的是，这不起作用，因为 JSF 认为页面是有效的，并在执行验证之前离开它。尽管之前在模拟器 bean`validate()`中执行过这一事实。`submit()`这通过在它们中的每一个中插入一个打印语句来确认。

有人知道发生了什么吗？是否有一种简单的方法可以确保仅在单击提交按钮时才进行验证？否则显示屏被锁定，我无法使其他按钮工作。

* * *

非常感谢您的澄清，我完全按照您的建议做了。我做了以下事情：

首先，我将 immdiate="true" 放在命令按钮中，该按钮在我的 faces0.xhtml 文件中选择一个菜单：

```
<p:commandButton value="Select Set" actionListener="#{abundance.selectSet0}" update="abundances0" immediate="true"/> 
```

然后我改变了我丰富的 bean java 文件中的操作：

```
public void selectSet0(ActionEvent e) {
    selectSet(0);
    FacesContext.getCurrentInstance().renderResponse(); 
} 
```

但它仍然不起作用。如果我单击该按钮，除非在 option1.xhtml 文件开头的 teff1 输入字段中已经存在有效值，否则不会发生任何事情。我需要这个按钮和其他类似的按钮一起工作，无论输入字段中有什么，直到单击提交按钮。据我所知，我做的一切都是正确的。

顺便说一句，我将 JSF 2.0 与 PrimeFaces 3.4.2 和 Eclipse Indigo 一起使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T19:54:19.413

默认情况下`<p:commandButton>`处理整个表单，如`process="@form"`.

您需要告诉它只处理自己，如`process="@this"`.

```
<p:commandButton ... process="@this" /> 
```

这样，同一表单中的所有输入组件都不会被处理（转换/验证/更新）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T14:38:54.807

首先，JSF 中的验证是在 Faces 生命周期之一中执行的，更具体地说，它是在`PROCESS_VALIDATIONS`阶段完成的。***跳过验证***的唯一方法是指示 Faces 的生命周期***跳过该阶段***。

在 JSF 中，输入和命令组件有一个`immediate`属性，这意味着那些具有该属性`true`值的组件将在该`APPLY_REQUEST_VALUES`阶段进行处理，而不是经历整个 Faces 的生命周期。

行为因组件类型而略有不同：

*   输入组件`immediate="true"`将在阶段而不是一个阶段进行**验证**。`APPLY_REQUEST_VALUES``PROCESS_VALIDATION`
*   命令组件`immediate="true"`将在阶段而不是阶段**执行**。`APPLY_REQUEST_VALUES``INVOKE_APPLICATION`

因此，要跳过验证，一种可能的方法是使用`<h:commandButton />`with `immediate="true"`，然后在支持 bean 端调用其中一个`FacesContext.getCurrentInstance().renderResponse()`或`FacesContext.getCurrentInstance().requestComplete()`告诉 Faces 跳过剩余的生命周期阶段。

所以，在你的`select0`方法中应该是：

```
public void selectSet0(ActionEvent e) {
    selectSet(0);
    FacesContext.getCurrentInstance().renderResponse(); // skip the remaining phases and go straight to RENDER_RESPONSE
} 
```

***注意***：请记住，当使用*即时命令*提交表单时，将触发该表单的所有*即时输入*中的验证。

# android - 在 Google Play 上找不到应用，但可以从 URL 中看到

> ID：14503571
> 
> 赞同：11
> 
> 时间：2013-01-24T14:23:41.960
> 
> 标签：android, google-play

我昨天发布了一个应用程序，当我在浏览器中输入[https://play.google.com/store/apps/details?id=packagename](https://play.google.com/store/apps/details?id=packagename)时看到它。明明在play store上，但是我用手机或者电脑搜索商店都找不到。我可以使用上面的 URL 将它下载到我的手机上。是否有我没有选择的设置或会导致这种情况的东西？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-24T14:25:01.623

对于开发者控制台和用户前端来说，Google Play 的速度可能是出了名的慢。

我已经看到应用程序上线并没有出现在我的开发者页面或搜索结果中近 48 小时。您不可能做错任何事，因为 Google Play 没有提供任何选项让您从搜索结果中忽略您可能意外启用的应用程序。

我建议再等一两天。如果仍然没有出现，您可以尝试联系 Google Play 支持，但即使收到回复，我也不抱太大希望。

# scala - 扩展它的对象共享的特征中的静态值

> ID：14503575
> 
> 赞同：0
> 
> 时间：2013-01-24T14:23:56.213
> 
> 标签：scala

我有一些实现特征的对象。我试图拥有一个`val`对所有这些对象都是静态且通用的。我已经[读过](https://stackoverflow.com/questions/8867316/scala-trait-is-there-an-equivalent-of-java-interface-public-static-field)这样做的方法是使用特征的伴随对象。我使用了以下内容：

```
trait Test

object Test extends Test{
  val a = 1
}

object Test2 extends Test{
  def test = {
    val b = a
  }
} 
```

但是，在该行中，`val b = a`我收到“未找到：值 a”错误。我将不胜感激有关如何解决此问题的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:34:27.300

默认情况下，伴随对象的成员对任何人都是不可见的，即使是它们的伴随类。所以你需要一个明确的导入：

```
trait Test

object Test extends Test{
  val a = 1
}

object Test2 extends Test{
  import Test._

  def test = {
    val b = a
  }
} 
```

我不知道是否有一种很好的方法可以在每个子类中都没有导入...

# c++ - Qt 像素图操作

> ID：14503576
> 
> 赞同：1
> 
> 时间：2013-01-24T14:23:57.120
> 
> 标签：c++, linux, qt

我正在尝试创建一个基于 QPixmaps 的进程管理器。这些像素图通过 20Hz 的计时器回调进行更新，因此看起来它们正在旋转。

下面是我当前窗口的屏幕截图。

[![像素图截图](../Images/e8b9be5661f59b9ec3a2c8604de21628.png)](https://i.stack.imgur.com/GiL8J.png)

像素图是具有 [20][14] 个元素的二维数组。20 是时间片的数量，14 是进程状态指示器。我知道，屏幕上只显示了 13 个。

我目前正在使用画家对象和合成模式来添加 QImages 以及以下代码：

```
QImage textImage(mapIcon.size(), QImage::Format_ARGB32);
QImage resultImage(mapIcon.size(), QImage::Format_ARGB32);

QPainter textPainter(&textImage);

textPainter.setCompositionMode(QPainter::CompositionMode_Source);
textPainter.fillRect(mapIcon.rect(), Qt::black);
textPainter.setCompositionMode(QPainter::CompositionMode_SourceOver);
textPainter.setFont(QFont("Arial", 8, QFont::Bold));
textPainter.setPen(QPen(Qt::white));
textPainter.drawText(QRectF(0, 0, mapIcon.width(), mapIcon.height()),
    Qt::AlignCenter, name);
textPainter.end();

QPainter resultPainter(&resultImage);
resultPainter.setCompositionMode(QPainter::CompositionMode_Source);
resultPainter.drawImage(0, 0, mapIcon);
resultPainter.setCompositionMode(QPainter::CompositionMode_Exclusion);
resultPainter.drawImage(0, 0, textImage);

resultPainter.setRenderHint(QPainter::SmoothPixmapTransform, true);
resultPainter.setRenderHint(QPainter::HighQualityAntialiasing, true);

runnerIcons[x][y] = QPixmap::fromImage(resultImage); 
```

我的问题是：*我*不想在绿色标签上看到倒置的配色方案，我想要黑色。黑底白字还可以，但洋红色不是我最喜欢的。

这在Qt中可能吗？或者，也许你会对替代解决方案有一些建议？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:52:07.030

您可以做几件事。你可以看看[`QPainter::setCompositionMode (mode)`](http://doc.qt.digia.com/qt/qpainter.html#setCompositionMode)方法。也许其他一种构图模式对您有用？特别是`QPainter::CompositionMode_Exclusion`或`QPainter::RasterOp_SourceXorDestination`。

您还可以为文本使用互补色。洋红色（蓝色+红色）在色轮上与绿色相反。如果您将文本设为洋红色，它可能会很好地显示黑色和绿色。（我并不是说它看起来很棒——只是它会很好地显示出来。）或者你可以将文本设置为 50% 灰色，以便在亮度和颜色上产生对比？

此外，您只有 13 个图标，而不是 14 个。不确定它是否有任何区别。

# php - 如何向 Zend Framework 2 添加自定义输入过滤器？

> ID：14503580
> 
> 赞同：0
> 
> 时间：2013-01-24T14:24:09.023
> 
> 标签：php, zend-framework2

我正在使用 Zend Framework 2，并且我创建了一个新的输入过滤器，它将在我的整个应用程序中使用。我知道我需要将新过滤器添加到 FilterPluginManager 的列表中，以便在创建输入时调用它。这是我认为我需要使用的代码：

```
\Zend\Filter\FilterPluginManager::setInvokableClass('myFilter', 'Namespace\Filters\MyFilter'); 
```

但是，我找不到这应该去哪里。这应该在引导程序，配置文件之一，还是其他地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-20T03:40:20.640

这就是你想要的答案

[https://packages.zendframework.com/docs/latest/manual/en/modules/zend.service-manager.quick-start.html](https://packages.zendframework.com/docs/latest/manual/en/modules/zend.service-manager.quick-start.html)

```
class Module
{
public function getServiceConfig()
{
    return array(
        'invokables' => array(
           'UserInputFiler' => 'SomeModule\InputFilter\User',
        ),

    );
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-13T14:21:11.860

在您的`Module`中，实现`InputFilterProviderInterface`并为`Factory`( `InputFilterPluginManager`)提供一个`AbstractPluginManager`：

```
namespace YourModule; 

use Zend\ModuleManager\Feature\InputFilterProviderInterface;

class Module implements InputFilterProviderInterface
{
    public function getInputFilterConfig()
    {
        return [
            'factories'=>[
                'your_input_filter_name'=>\YourModule\Factories\InputFilterFactory::class
            ]
        ];
    }
} 
```

现在实现工厂：

```
namespace YourModule\Factories;

use Zend\Filter\StringTrim;
use Zend\InputFilter\Input;
use Zend\InputFilter\InputFilter;
use Zend\ServiceManager\FactoryInterface;
use Zend\ServiceManager\ServiceLocatorInterface;
use Zend\Validator\StringLength;

class InputFilterFactory implements FactoryInterface
{
    public function createService(ServiceLocatorInterface $serviceLocator)
    {
        $filter = new InputFilter();
        $nameFilter = new Input("name");
        $nameFilter->getValidatorChain()->attach(new StringLength([
            'min'=>3,
            'max'=>16
        ]));
        $nameFilter->getFilterChain()->attach(new StringTrim());
        $filter->add($nameFilter);
        return $filter;
    }
} 
```

现在在您`Controller`需要的 -factory 或其他工厂中，`InputFilter`您可以访问`InputFilterPluginManager`：

```
$inputFilterManager = $controllerManager->getServiceLocator()->get('InputFilterManager');

return new YourController(
    $inputFilterManager->get('your_input_filter_name')
); 
```

## 更新，也可以在module.config.php中添加工厂

```
 'input_filters'=>[
        'factories'=>[
            'your_input_filter_name'=>InputFilterFactory::class
        ]
    ], 
```

# c++ - 使用 boost::variant 遍历树节点的模板

> ID：14503581
> 
> 赞同：3
> 
> 时间：2013-01-24T14:24:10.727
> 
> 标签：c++, c++98

这是我遍历节点树的设计：

```
struct Leaf1{};
struct Leaf2{};
struct Leaf3{};
struct Leaf4{};
struct Leaf5{};

typedef boost::variant< Leaf4, Leaf5 > Node3;
typedef boost::variant< Leaf2, Leaf3, Node3> Node2;
typedef boost::variant< Node2, Leaf1 > Node1;

class NodeVisitor: public boost::static_visitor<void>
{
public:
    template<class Node>
    void operator()(const Node& e) const
    {
        boost::apply_visitor( *this, e );
    }

    void operator()(const Leaf1& e) const{}
    void operator()(const Leaf2& e) const{}
    void operator()(const Leaf3& e) const{}
    void operator()(const Leaf4& e) const{}
    void operator()(const Leaf5& e) const{}
}; 
```

所以我递归地访问节点，直到我到达一个叶子。上面的问题是我必须为每个叶子的 operator() 添加一个存根。你可以看到我上面有五个这样的存根，但在实践中还有更多。你能建议一种模板化这个存根的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:38:20.157

**解决方案 1：基于 SFINAE 的技术**

该解决方案基于这样一个事实，即在模板实例化期间未能替换模板参数不会导致编译错误（*替换失败不是错误*）：相反，该模板被简单地忽略了重载决议。因此，通过一些技巧，您可以根据实例化时提供的模板参数来选择某个函数模板的哪些重载应该可见。

使用此技术时，重要的是要确保决定每个过载可见性的判别条件是**互斥的**，否则可能会出现歧义。

首先，您需要定义一些特征元函数来帮助您确定某个类是否是叶子：

```
// Primary template
template<typename T> struct is_leaf<T> { static const bool value = false; };

// Specializations...
template<> struct is_leaf<Leaf1> { static const bool value = true; };
template<> struct is_leaf<Leaf2> { static const bool value = true; };
... 
```

然后，您可以使用`std::enable_if`（或者`boost::enable_if`如果您正在使用 C++98）选择应该使调用运算符的哪个重载可见：

```
class NodeVisitor: public boost::static_visitor<void>
{
public:

    // Based on the fact that boost::variant<> defines a type list called
    // "types", but any other way of detecting whether we are dealing with
    // a variant is OK
    template<typename Node>
    typename std::enable_if<
        !is_same<typename Node::types, void>::value 
        >::type 
    operator()(const Node& e) const
    {
        boost::apply_visitor( *this, e );
    }

    // Based on the fact that leaf classes define a static constant value
    // called "isLeaf", but any other way of detecting whether we are dealing
    // with a leaf is OK
    template<typename Leaf>
    typename std::enable_if<is_leaf<Leaf>::value>::type 
    operator()(const Leaf& e) const
    {
        ...
    }
}; 
```

* * *

**解决方案 2：基于重载的技术**

如果您正在使用 C++98 并且不想`boost::enable_if`用作 的替代品`std::enable_if`，则另一种方法包括利用重载决议和未使用的参数来区分辅助函数的两个重载。首先，您定义了两个虚拟类：

```
struct true_type { };
struct false_type { }; 
```

然后，您`is_leaf<>`再次创建您的元函数，为叶类适当地专门化它：

```
// Primary template
template<typename T> struct is_leaf<T> { typedef false_type type; };

// Specializations...
template<> struct is_leaf<Leaf1> { typedef true_type type; };
template<> struct is_leaf<Leaf2> { typedef true_type type; };
... 
```

最后，您创建其中一种虚拟类型的实例，以选择辅助函数的适当重载`process()`：

```
class NodeVisitor: public boost::static_visitor<void>
{
public:

    template<typename T>
    void operator()(const T& e) const
    {
        typedef typename is_leaf<T>::type helper;
        process(e, helper());
    }

    template<typename Node>
    void process(const Node& e, false_type) const
    {
        boost::apply_visitor(*this, e);
    }

    template<typename Leaf>
    void process(const Leaf& e, true_type) const
    {
        ...
    }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T14:36:31.160

为类使用额外的间接`LeafN`级别，例如：

```
template <typename LeafType>
struct LeafHolder
{
  // has real instance of leaf..
}; 
```

然后重新定义您的变体类型

```
typedef boost::variant< LeafHolder<Leaf4>, LeafHolder<Leaf5> > Node3;
typedef boost::variant< LeafHolder<Leaf2>, LeafHolder<Leaf3>, Node3> Node2;
typedef boost::variant< Node2, LeafHolder<Leaf1 > Node1; 
```

现在您的访客可以变成：

```
class NodeVisitor: public boost::static_visitor<void>
{
public:
    template<class Node>
    void operator()(const Node& e) const
    {
        boost::apply_visitor( *this, e );
    }

    // single function to handle all leaves...
    template <typename LeafType>
    void operator()(const LeafHolder<LeafType>& e) const{}
}; 
```

# c# - 从 gridview_rowdatabound 后面的代码中设置 sql 选择参数

> ID：14503585
> 
> 赞同：0
> 
> 时间：2013-01-24T14:24:15.423
> 
> 标签：c#, asp.net

我正在按照此示例在 gridview 编辑模式下构建 2 个级联下拉列表，但在 C# 中： [http ://mikepope.com/blog/DisplayBlog.aspx?permalink=1708](http://mikepope.com/blog/DisplayBlog.aspx?permalink=1708)

但是我的@AttriFk 从来没有得到一个值，我该如何在这个事件中设置它？

```
<asp:TemplateField HeaderText="Sub Attribute">
    <EditItemTemplate>
        <asp:DropDownList ID="ddlListSubAttributes" runat="server" AutoPostBack="True" DataSourceID="SqlDataSourceSubAttributes" DataTextField="Title" DataValueField="ID" />   
        <asp:SqlDataSource ID="SqlDataSourceSubAttributes" runat="server" ConnectionString="Data Source="//empty for this post" ProviderName="System.Data.SqlClient" SelectCommand="SELECT [ID],[Title],[AttriFk] FROM [LocalGTPDatabase].[dbo].[AttributeSubTypes] WHERE ([AttriFk] = @AttriFk)">
              <SelectParameters>
                    <asp:Parameter Name="@AttriFk" />
              </SelectParameters>
         </asp:SqlDataSource>
    </EditItemTemplate>
    <ItemTemplate>
        <asp:Label ID="Label66" runat="server" Text='<%# Bind("subAttribute") %>'></asp:Label>
   </ItemTemplate>
</asp:TemplateField> 
```

这是我背后代码的一部分：

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
        {
            if (e.Row.RowState == DataControlRowState.Edit)
            {
                System.Data.DataRowView dv = (System.Data.DataRowView)e.Row.DataItem;

                DropDownList ddlListAttributes = (DropDownList)(e.Row.FindControl("ddlListAttributes"));
                String nest = Convert.ToString(dv["AttributeFk"]);
                ddlListAttributes.SelectedValue = nest;
                //Databind list of taskCode in dependent drop-down list, preselect value
                DropDownList ddlListSubAttributes = (DropDownList)(e.Row.FindControl("ddlListSubAttributes"));
                SqlDataSource dsc = (SqlDataSource)(e.Row.FindControl("SqlDataSourceSubAttributes"));

                String testing = Convert.ToString(dv["AttributeFk"]);
                //This is not working
                dsc.SelectParameters["@AttriFk"].DefaultValue = Convert.ToString(dv["AttributeFk"]);

                //Than I tried this but still it isn't working:
                dsc.SelectParameters.Add("@AttriFk", Convert.ToString(dv["AttributeFk"])); 

                ddlListSubAttributes.DataBind();
                ddlListSubAttributes.SelectedValue = Convert.ToString(dv["SubAttributeFk"]);
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T14:31:42.180

我很确定参数名称中不允许使用 @ （尽管将其保留在 SQL 选择命令中。

所以改变

```
<asp:Parameter Name="@AttriFk" /> 
```

至

```
 <asp:Parameter Name="AttriFk" /> 
```

# java - 在 Java 中使用 BufferedWriter 写入文件

> ID：14503595
> 
> 赞同：5
> 
> 时间：2013-01-24T14:24:44.923
> 
> 标签：java, eclipse, file-io, filewriter, bufferedwriter

我正在做一个实验室，我们必须读入一个外部文件，对数据进行一些统计，然后使用统计数据创建和写入一个新文件。除了编写文件外，我的程序中的所有内容都可以正常工作，我无法理解为什么我的方法不起作用。

```
BufferedWriter writer;

public void writeStats(int word, int numSent, int shortest, int longest, int average)
{
    try
    {
        File file = new File("jefferson_stats.txt");
        file.createNewFile();

        writer = new BufferedWriter(new FileWriter(file));

        writer.write("Number of words: " + word );
        writer.newLine();
        writer.write("Number of sentences: " + numSent );
        writer.newLine();
        writer.write("Shortest sentence: " + shortest + " words");
        writer.newLine();
        writer.write("Longest sentence: " + longest + " words");
        writer.newLine();
        writer.write("Average sentence: " + average + " words");    
    }
    catch(FileNotFoundException e)
    {
        System.out.println("File Not Found");
        System.exit( 1 );
    }
    catch(IOException e)
    {
        System.out.println("something messed up");
        System.exit( 1 );
    }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-24T14:26:40.593

你必须刷新并关闭你的作家：

```
writer.flush();
writer.close(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T14:45:30.240

您应该始终使用 Java 7 try-with-resources 显式或隐式关闭打开的资源

```
 try (BufferedWriter bw = new BufferedWriter(new FileWriter(file))) {
         ...            
    } 
```

此外，还有一个更方便的类来编写文本 - java.io.PrintWriter

```
try (PrintWriter pw = new PrintWriter(file)) {
    pw.println("Number of words: " + word);
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T14:25:25.123

您必须使用[**close()**](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/BufferedWriter.html#close%28%29)**关闭BufferedWriter**：[](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/BufferedWriter.html#close%28%29)

 **```
writer.close(); 
```**

# javascript - WebGL 的绘图原语是什么？

> ID：14503600
> 
> 赞同：11
> 
> 时间：2013-01-24T14:25:03.607
> 
> 标签：javascript, opengl-es, webgl

我一直在使用 webgl 进行一些图形编程来绘制 OBJMesh，但它并没有很好地绘制它，因为它没有正确绘制它。我认为那是因为我正在使用的绘图原语，例如：`gl.drawArrays(gl.TRIANGLE_STRIP, 0, vertexBuffer.numItems);`

那么我能问一下 webGL 允许哪些原语吗？它和openGL一样吗？我一直在尝试使用 gl.QUADS，因为我认为它会像 openGL 那样允许它，所以我不太确定了。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-24T14:34:07.633

来自[https://www.khronos.org/registry/webgl/specs/1.0/](https://www.khronos.org/registry/webgl/specs/1.0/)：

```
const GLenum POINTS                         = 0x0000;
const GLenum LINES                          = 0x0001;
const GLenum LINE_LOOP                      = 0x0002;
const GLenum LINE_STRIP                     = 0x0003;
const GLenum TRIANGLES                      = 0x0004;
const GLenum TRIANGLE_STRIP                 = 0x0005;
const GLenum TRIANGLE_FAN                   = 0x0006; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-24T14:33:15.420

是的，WebGL 绘制与 OpenGL ES 相同的图元（也与 OpenGL 相同）。您是否尝试过绘制一些简单的网格，以便缩小问题的范围？您是否在设置剔除、绘制正确的图元等？

我已经完成了一些 WebGL 演示，其中我绘制了复杂的网格，并且我总是使用 GL_TRIANGLES (TRIANGLES)。如果我尝试使用其他图元使用相同的网格，它会破坏网格，因此这取决于网格的创建方式。

这是我的演示[http://rodrigo-silveira.com/webgl-3d-demos/](http://rodrigo-silveira.com/webgl-3d-demos/)

# c++ - 使用 fstream 对象作为函数参数

> ID：14503605
> 
> 赞同：11
> 
> 时间：2013-01-24T14:25:25.857
> 
> 标签：c++, function, fstream

```
#include <iostream.h>
#include <fstream.h>
#include <stdlib.h>

void vowel(fstream a){
    char ch;
    int ctr = 0;
    while(!a.eof()){
        a.get(ch);
        if (ch == 'A' || ch == 'E' || ch == 'I' || ch == 'O' || ch == 'U'){
            cout << ch;
            ctr++;
        }
    }
    cout << "Number of Vowels: " << ctr;
}

main(){
    fstream a;
    a.open("temp.txt", ios::in);
    vowel(a);
return 0;
} 
```

在这个简单的程序中，我试图计算文件 temp.txt 中大写元音的数量。但是，我收到错误：

> ios::ios(ios &) 在函数 fstream::fstream(fstream&) 中不可访问

而是在函数本身中打开文件来完成这项工作。为什么会这样？非常感谢

注意：

> [如何通过函数参数使用 fstream（特别是 ofstream）](https://stackoverflow.com/questions/13231730/how-do-i-use-fstream-specifically-ofstream-through-a-functions-parameters)

这里它说，它应该按照我尝试的方式工作。

瑞克

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-24T14:26:30.187

`fstream`对象不可复制。而是通过引用传递`fstream&`：：

```
void vowel(fstream& a) 
```

请注意，您可以通过向构造函数提供相同的参数来避免调用`open()`：

```
fstream a("temp.txt", ios::in); 
```

不要使用`while(!a.eof())`，立即检查读取操作的结果。仅当`eof()`尝试读取文件中的最后一个字符之后才会设置。这意味着当上一次调用从文件中读取最后一个字符时，这`!a.eof()`将是真的，但随后会失败并设置 eof 但代码不会注意到失败，直到它再次处理后，即使读取失败。`get(ch)``get(ch)``ch`

正确结构示例：

```
while (a.get(ch)) { 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T14:27:06.630

您需要`fstream`通过*引用*传递：

```
void vowel(fstream& a){ .... }
//                ^ here! 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T14:38:34.613

试试这个。而不是发送文件计数元音。

```
#include <iostream.h>
#include <fstream.h>
#include <stdlib.h>
int vowels=0;
void vowel(string a){
    char ch;
    int ctr = 0;
int temp=0;
    for(temp=0,temp<a.length();temp++){
        ch=a.at(temp);
        if (ch == 'A' || ch == 'E' || ch == 'I' || ch == 'O' || ch == 'U'){
            cout << ch;
            ctr++;
        }
    }
    vowels+=ctr;
}

main(){
    fstream a;
    a.open("temp.txt", ios::in);

string temp;
while(getline(a,temp))
{
vowel(temp);
function2(temp);
function3(temp);

... so on for more then one functions.

}        
vowel(a);
    return 0;
    } 
```

如果你想传递文件，那么使用上面的答案。（通过引用传递 fstream）。

# html - ASP.NET（标记前端）CSS ISSUE

> ID：14503611
> 
> 赞同：2
> 
> 时间：2013-01-24T14:25:42.293
> 
> 标签：html, .net, css

我是从一个无法完成的人手中接过这个项目的。这是用户在进入网站之前点击的年龄验证登录页面。它具有指向 CSS 文件和脚本文件的正常链接（与往常一样）。但是他们将这行代码放在“作品”中，但会导致页面顶部附近的间距出现问题。大约有 10 像素的间隙，如果您突出显示第一行，它就会出现在该位置。

```
@-moz-document url-prefix()
{
    <link href="_CSS/Firefox.css" rel="stylesheet" type="text/css" />
} 
```

如果我去掉这段代码，页面在 Firefox 中看起来很糟糕。我试过这个（用javascript确定浏览器类型并分配样式表）：

```
<script type="text/javascript">
    var browser = navigator.userAgent;
    if (browser == "Firefox") {
        document.write("<link type=\"text/css\" rel=\"stylesheet\" href=\"_CSS/Firefox.css\">");
    } else if (browser == "Microsoft Internet Explorer") {
        document.write("<link type=\"text/css\" rel=\"stylesheet\" href=\"_CSS/IE.css\">");
    } else {
        document.write("<link type=\"text/css\" rel=\"stylesheet\" href=\"_CSS/AgeVerify.css\">");
    }
</script> 
```

但这似乎不起作用。我的问题如下：第一段代码是什么？
为什么它会在页面顶部留下一个空白区域（并在您突出显示该空间时显示）？
最后，我该怎么做才能摆脱它并仍然使Firefox正常显示？

**编辑：**添加两个屏幕截图：

![ ](../Images/03051534a076a0ce76d8c55239834207.png)

![ ](../Images/9d492ceaf02a281ad1dd5a543707af10.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:27:19.753

只需使用这部分：`<link href="_CSS/Firefox.css" rel="stylesheet" type="text/css" />`. 这仍将使用所需的样式表。

剩下的有原因吗？

如果它必须保留，我想如果用户使用的是 Firefox，你可以通过 CSS 将整个页面向上移动/定位 x 像素。不是最漂亮的解决方案，但可能有效。

# python - 火狐等待响应

> ID：14503616
> 
> 赞同：0
> 
> 时间：2013-01-24T14:26:08.290
> 
> 标签：python, firefox, webserver, timeout

我已经设置了简单的 python 脚本，它以 hello 响应：

```
def main(environ, start_response):
    start_response('200 OK', [
        ('Content-type', 'text/plain')

        ])

    return 'hello' 
```

在 Chrome 中一切正常，我可以每秒刷新一次页面但在 Firefox 中我收到“待定”状态，最终在很长一段时间 Firefox 显示响应消息。

这里有什么问题？我尝试使用 Content-Length 但没有帮助

以下是回复：

不，在不同的机器上使用两个不同的 Firefox 进行了测试。

火狐：

> `Status=OK - 200`
> `Server=nginx`
> `Date=Thu, 24 Jan 2013 14:28:31 GMT`
> `Content-Type=text/plain`
> `Transfer-Encoding=chunked`
> `Connection=keep-alive`
> `Content-Encoding=gzip`

铬合金：

> HTTP/1.1 200 OK
> 服务器：nginx
> 日期：2013 年 1 月 24 日星期四 20:24:06 GMT
> 内容类型：text/plain
> 传输编码：分块
> 连接：keep-alive
> 内容编码：gzip

# vim - 如何使用 let 为当前缓冲区（vim）设置一个选项？

> ID：14503619
> 
> 赞同：8
> 
> 时间：2013-01-24T14:26:24.587
> 
> 标签：vim

在 vimla​​nguage 中，您只能使用`setlocal`. 但是，我需要设置一个比文字更复杂的表达式，而`setlocal`.

我目前有`let &formatprg=s:prgpath." ".a:args`，但这为所有缓冲区设置了 formatprg，这不是我想要的。我将如何设置 formatprg 像上面一样，仅用于当前缓冲区？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-24T15:01:41.817

使用`let &l:option`而不是`let &option`仅更改本地值，例如`setlocal option`. 同样，`let &g:option`只会设置全局值，例如`setglobal option`. 有关[`:help :let-option`](http://vimdoc.sourceforge.net/htmldoc/eval.html#:let-option)更多信息，请参阅。

请注意，这尤其是全局的（[其帮助](http://vimdoc.sourceforge.net/htmldoc/options.html#'formatprg')`formatprg`中没有“本地缓冲区” ）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T13:26:42.447

制作一个全局选项 buffer-local 需要修改 Vim 的源代码。或者，我刚刚发布了使用 autocmds 解决此问题的[GlobalOptions 插件，并将任何全局选项转换为缓冲区或窗口本地选项。](http://www.vim.org/scripts/script.php?script_id=4414)

# c++ - 扩展枚举类型

> ID：14503620
> 
> 赞同：5
> 
> 时间：2013-01-24T14:26:25.513
> 
> 标签：c++, enums

> **可能重复：**
> [在 C++ 中扩展枚举？](https://stackoverflow.com/questions/1804840/extending-enums-in-c)

我正在使用一个库，它将自己的一组错误定义为枚举类型。

> 枚举错误类型 {...}

该库还具有一个采用该枚举类型并打印错误的函数。

> 无效设置状态（错误类型新错误）

如果我想定义自己的错误，并将其提供给 set_status 函数，是否可以以某种方式扩展 error_type 枚举，或者覆盖它？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-24T18:41:25.483

可能有一些锋利的边缘，但我认为这应该适合你：

```
#include<iostream>

// Helper struct

template<typename T, int N, typename... LIST>
struct whereInType {
  static const int index = -1;
};

template<typename T, int N, typename HEAD, typename... TAIL>
struct whereInType<T,N,HEAD,TAIL...> {
  static const int index = whereInType<T, N+1, TAIL...>::index;
};

template<typename T, int N, typename... TAIL>
struct whereInType<T,N,T,TAIL...> {
  static const int index = N;
};

// The actual union type

template<typename... ENUMS>
class enum_union {
public:
  template<typename ENUM>
  constexpr enum_union(ENUM val) :
    which_enum(whereInType<ENUM,0,ENUMS...>::index),
    value(val) {}
  constexpr operator long long(){
    return static_cast<long long>(which_enum)<<32 | value;
  }
  template<typename ENUM, int IGNORE=0>
  constexpr bool operator==(const ENUM& e) {
    return *this == enum_union<ENUMS...>(e);
  }
  template<int IGNORE=0>
  constexpr bool operator==(const enum_union<ENUMS...>& oth) {
    return which_enum==oth.which_enum && value==oth.value;
  }
  template<typename T>
  constexpr bool operator!=(const T& oth) {
    return !(*this == oth);
  }
private:
  int which_enum;
  int value;
};

// An example usage

enum normal_errors {
  E_OUTOFMEMORY,
  E_IOERROR
};

enum weird_errors {
  E_OUTOFAARDVARKS,
  E_DIVIDEBYCUCUMBER
};

typedef enum_union<normal_errors, weird_errors> any_error;

// Some tests

void print(any_error e) {
  switch(e) {
  case any_error(E_OUTOFMEMORY):
    std::cout << "Out of Memory\n";
    break;
  case any_error(E_IOERROR):
    std::cout << "I/O Error\n";
    break;
  case any_error(E_OUTOFAARDVARKS):
    std::cout << "WE NEED AARDVARKS!!!  NOW!!!!!\n";
    break;
  case any_error(E_DIVIDEBYCUCUMBER):
    std::cout << "please reinstall universe\n";
    break;
  }
}  

main(){
  print(E_OUTOFMEMORY);
  print(E_IOERROR);
  print(E_OUTOFAARDVARKS);
  print(E_DIVIDEBYCUCUMBER);
  if (any_error(E_OUTOFMEMORY) == E_OUTOFAARDVARKS) {
    std::cout<<"bad\n";
  }else{
    std::cout<<"good\n";
  }
  if (any_error(E_OUTOFMEMORY) != E_OUTOFAARDVARKS) {
    std::cout<<"good\n";
  }else{
    std::cout<<"bad\n";
  }
  if (any_error(E_OUTOFMEMORY) == E_OUTOFMEMORY) {
    std::cout<<"good\n";
  }else{
    std::cout<<"bad\n";
  }
  if (any_error(E_OUTOFMEMORY) != E_OUTOFMEMORY) {
    std::cout<<"bad\n";
  }else{
    std::cout<<"good\n";
  }
} 
```

# css - 网站无法在 iPad 纵向和移动横向中缩放

> ID：14503627
> 
> 赞同：0
> 
> 时间：2013-01-24T14:26:42.020
> 
> 标签：css, html, ipad, responsive-design, viewport

我一直在尝试让网站缩放以适应 iPad 中的 Portrait 但无济于事.. 这是我的元数据：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

还将此添加到脚本中：

```
<script type="text/javascript">
    if(navigator.userAgent.match(/iPad/i)) {
        viewport = document.querySelector("meta[name=viewport]");
        viewport.setAttribute('content', 'width=980');
    }
</script> 
```

在我的查询中的 CSS 上我尝试了这个：

```
@media only screen and ( min-width: 768px) and ( max-width: 1024px ) {
    body {min-width: 980px;}
} 
```

根据我在这里看到的：

[iPad 无法在纵向上正确缩小网站](https://stackoverflow.com/questions/6944205/ipad-not-scaling-site-down-website-correctly-in-portrait-orientation)

我也试过身高，但没有用...

这里也有一个类似的问题：

[iPad 上的 Safari 在纵向模式下不适合 980 像素宽度的站点](https://stackoverflow.com/questions/11104266/safari-on-ipad-does-not-fit-980px-width-site-in-portrait-mode)

但老实说，我不明白是否有答案（我没有关闭视口..）......

正如我所提到的，看起来不错，但在纵向中，我必须向左滑动才能看到整个画面。最后在移动设备中，它非常适合 320，但是当横向时它仍然保持在 320，所以我认为**在缩放时可能是相同的情况**....我认为我不必使用 %....但是案子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:11:45.073

问题是这个 iOS <5.1 缩放错误 - [http://adactio.com/journal/5088/](http://adactio.com/journal/5088/)吗？

这在 iOS6 中已修复，但如果您需要它用于旧设备，您可以尝试 -

[http://www.blog.highub.com/mobile-2/a-fix-for-iphone-viewport-scale-bug/](http://www.blog.highub.com/mobile-2/a-fix-for-iphone-viewport-scale-bug/)

或[https://github.com/scottjehl/iOS-Orientationchange-Fix](https://github.com/scottjehl/iOS-Orientationchange-Fix)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T02:08:38.827

也许是由于旧的“[方向问题](http://adactio.com/journal/4470/)”。

您可能想尝试以下代码：

```
if (navigator.userAgent.match(/iPad/i)) {
var viewportmeta = document.querySelector('meta[name="viewport"]');
if (viewportmeta) {
    viewportmeta.content = 'width=device-width, minimum-scale=1.0, maximum-scale=1.0, initial-scale=1.0';
    jQuery(document).ready(function() {
        document.body.addEventListener('gesturestart', function () {
            viewportmeta.content = 'width=device-width, minimum-scale=0.25, maximum-scale=1.6';
        }, false);
    });
}
} 
```

# html - 用粗体标题替换复选框选择

> ID：14503630
> 
> 赞同：1
> 
> 时间：2013-01-24T14:26:52.697
> 
> 标签：html, checkbox

我不确定我的标题是否正确。但我的观点是：

我想替换标准 checkox，例如：

```
Select <input type="checkbox" name="sel" /> 
```

有一些东西可以让我点击文本（如上面代码中的“选择”）并通过点击它我会选择“sel”属性并使该文本变为粗体。再次单击它会取消选择它并取消粗体文本。A 不想勾选以显示。

想法？我想到了javascript，但我不知道怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:03:59.113

使用标签节点。

```
<label>
  Select 
  <input type="checkbox" hidden="true"
    onclick="parentNode.style.fontWeight=checked?'bold':'';" />
</label> 
```

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:18:52.780

您可以使用 css 在 chrome 中定义文本。

```
<style> 
input:before{content:attr(myTextAnno)}
input:checked{font-weight:bold;}
</style>
<input type="checkbox" myTextAnno="Select"> 
```

您可以使用 css 在所有浏览器中定义文本。

```
<style> 
input:before{content:'Select'}
input:checked{font-weight:bold;}
</style>
<input type="checkbox"> 
```

# javascript - Reveal.js HTML 代码语法高亮而不渲染它

> ID：14503631
> 
> 赞同：8
> 
> 时间：2013-01-24T14:27:01.363
> 
> 标签：javascript, html, slideshow, presentation, reveal.js

reveal.js 用户的问题。

我试图在我的reveal.js 演示文稿中显示一个HTML 标记。问题是它在我的代码语法突出显示块中呈现 html 块，因此无法看到标记。

有没有解决的办法？

下面的例子

```
<section>
    <h2>Pretty Code</h2>
        <pre>
            <code contenteditable>

                <form id="demo-form" data-validate="parsley">
                <label for="fullname">Full Name * :</label>
                <input type="text" id="fullname" name="fullname" data-required="true" />

                <label for="email">Email * :</label>
                <input type="text" id="email" name="email" data-trigger="change" data-required="true" data-type="email" />

                <label for="website">Website :</label>
                <input type="text" id="website" name="website" data-trigger="change" data-type="url" />

                <label for="message">Message (20 chars min, 200 max) :</label>
                <textarea id="message" name="message" data-trigger="keyup" data-rangelength="[20,200]"></textarea>
                </form> 

            </code>
        </pre>
</section> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-24T14:42:24.973

转义 html 标签，然后一切看起来都正常。这是一个将原始 HTML 转换为转义字符串的工具：[http ://www.accessify.com/tools-and-wizards/developer-tools/quick-escape/default.php](http://www.accessify.com/tools-and-wizards/developer-tools/quick-escape/default.php)

因此，您必须复制包含在`<code>`html 标记之间的代码部分。

# c# - 从 C# 调用 .bat 文件

> ID：14503633
> 
> 赞同：-4
> 
> 时间：2013-01-24T14:27:06.730
> 
> 标签：c#, c#-4.0, c#-3.0

使用在服务器中运行的这段代码 .exe

```
string bat =null;
bat = "D:/folder/a.bat";
System.Diagnostics.Process.Start(bat); 
```

> 错误：找不到指定的文件。

谁可以帮我这个事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:56:49.383

Windows 中的文件路径不带正斜杠，它不是 URL/URI。使用反斜杠。

如果程序可以访问 bat 文件，则以下任何人都应该工作。

```
string bat=@"D:\folder\a.bat"; 
```

或者

```
string bat="D:\\folder\\a.bat"; 
```

此外，检查 bat 文件的存在将是一个很好的做法：

```
if(File.Exists(bat))
{
    System.Diagnostics.Process.Start(bat);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:28:52.543

1.  确保文件确实位于该路径。
2.  确保您的程序可以访问此路径。
3.  使用反斜杠：`bat = @"D:\folder\a.bat";`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T14:29:00.007

将斜杠更改为反斜杠：

```
bat = "D:\\folder\\a.bat"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T14:29:24.237

通常，您需要运行一个可执行文件（如 cmd.exe），然后向其传递一个参数。cmd.exe 具体有两个选项 /C（执行字符串指定的命令，然后终止）和 /K（执行字符串指定的命令但保持打开状态）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T14:29:28.063

错误的路径。尝试

```
bat = @"D:\folder\a.bat"; 
```

# xcode - IOS APNs 通知使用 ad-hoc 配置文件失败

> ID：14503640
> 
> 赞同：1
> 
> 时间：2013-01-24T14:27:21.583
> 
> 标签：xcode, apple-push-notifications

我的应用程序在使用开发配置文件的插件上的 APNs 通知的每个设备上都可以正常工作。当我更改为 ad-hoc 配置并上传到 testflightapp.com 以发送给测试人员进行测试时，只有我自己的设备可以使用 ad-hoc 配置文件注册 APNs 设备令牌，但设备的其余部分无法注册 APNs 设备令牌。我应该如何检查这个？任何想法？

# javascript - 背景图像水平拉伸

> ID：14503644
> 
> 赞同：2
> 
> 时间：2013-01-24T14:27:34.933
> 
> 标签：javascript, jquery, image, css, stretch

我的网站有一个水平滚动结构并且它是响应式的。例如，我的网站宽度：我的屏幕上的 9600 像素。

我有一个背景图片。打开body后是这样的：

```
<div class="bg">
  <img class="bg-st" src="themes/bc/images/bc-bg.png"> 
</div> 
```

和 CSS：

```
.bg {
bottom: 15;
position: absolute;
z-index: 1;
width:100%
height:100%
}
.bg-st {
width:100%;
height:100%;
} 
```

我有，根据屏幕拉伸这个背景图像。我的 CSS 代码不起作用。我如何通过 JavaScript 或 CSS 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:36:21.520

**要在页面主体上设置背景，请尝试以下 CSS**

```
body {
  background: url(bgimage.jpg) no-repeat;
  background-size: 100%;
} 
```

**如果要拉伸图像并将其设置为全屏，请尝试以下操作...**

```
#imgbg {
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
    z-index: -5000;
}

<div class="bg">
  <img id="imgbg" src="themes/bc/images/bc-bg.png"> 
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:39:13.833

您可以将其设置为 div 的背景，并将 background-size 属性设置为覆盖：

```
.bg {
bottom: 15;
position: absolute;
z-index: 1;
width:100%
height:100%
background: url("themes/bc/images/bc-bg.png") no-repeat left fixed;
background-size: cover;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T15:53:41.690

```
<div class="main">
    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa
<div class="bg">
  <img id="imgbg" src="image.jpg">
</div> 
```

它显示这样的输出

![在此处输入图像描述](../Images/b25aaa83646905433ffddd7cd78f9e0a.png)

如果您使用如下代码

```
<style>
#imgbg {
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
    z-index: -5000;
}
</style>

<div class="main">
    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa    aaaaa
<div class="bg">
  <img id="imgbg" src="image.jpg">
</div> 
```

然后它显示如下图像.... ![在此处输入图像描述](../Images/e32c9d19933000340ed1f17c908531ac.png)

# python - Amazon SNS Python Boto - 如何创建要发送的消息

> ID：14503646
> 
> 赞同：2
> 
> 时间：2013-01-24T14:27:38.540
> 
> 标签：python, linux, amazon-web-services, debian, amazon-sns

我正在使用 SNS 将消息从一台服务器发送到另一台服务器。我想创建一条消息以使用 Python 和 Boto 发送到另一台服务器，所以我想知道是否有人可以查看这段旨在发送“抓取”消息的代码：

```
import boto
sns = boto.connect_sns()

# Create Topic
t = sns.create_topic("scraped")
t
{u'CreateTopicResponse': {u'ResponseMetadata': {u'RequestId': u''}, u'CreateTopicResult': {u'TopicArn': u'arn:aws:sns:us-east-1:your-account-id:Test'}}} 
```

然后另一方面，我想要一些代码来检查第二台服务器上的这条消息，所以我有这样的事情：

```
import boto
sns = boto.connect_sns()

# Read Topics
sns.get_all_topics()
{u'ListTopicsResponse': {u'ResponseMetadata': {u'RequestId': u''}, u'ListTopicsResult': {u'Topics': [{u'TopicArn': u'arn:aws:sns:us-east-1:your-account-id:Test'}], u'NextToken': None}}} 
```

我的第一个问题是，我得到了正确的结果吗？这对我来说是一个全新的概念，我很难理解它。

我的第二个问题是为了检查我是否每 5 分钟左右在 python 检查脚本上运行一次 cronjob？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T17:13:57.150

> 我的第一个问题是，我得到了正确的结果吗？

我不这么认为。

想象一下，SNS 只是一个公告板。假设您在此公告板上张贴了一张纸，上面写着*“如果您想报名参加钢琴课程，请在此纸的顶部写上您的名字。”* 这就是“话题”。

然后添加：*“如果您是一位正在寻找学生的钢琴老师，请在此纸的背面写下您的姓名。同时记下您希望在我们找到新学生时收到通知的方式：电子邮件、短信或信鸽。”* 添加姓名的教师正在创建对该主题的“订阅”。

当一个学生写下他的名字（发布到主题）时，每个老师都会通过他们喜欢的方法同时收到通知，有一个新的注册。由每位教师决定如何处理这些信息。

您上面的代码片段正在执行此操作的前半部分。您正在创建一个主题，然后查看这些主题。为了让它做任何事情，你必须向主题发布一条消息。[我的博客上](http://www.jamiebegin.com/python-error-logging-to-amazon-aws-sns/)有一些示例代码，我在其中使用 Python 的`logging`模块将日志消息发布到 SNS 主题。这可能会让您更好地理解现实世界的用例。

# variables - 未定义的变量

> ID：14503650
> 
> 赞同：-4
> 
> 时间：2013-01-24T14:27:52.173
> 
> 标签：variables, xdebug, php

我已经定义了 2 个变量，联系人和衬衫。如您所见，它们也在标题中的 li 中。我仍然收到两个变量都未定义的消息。

我收到此错误消息：

> ( ! ) SCREAM: ( ! ) 忽略错误抑制
> 
> 注意：未定义变量：第 17 行 C:\wamp\www\Test\shirts4mike\inc\header.php 中的部分
> 
> 调用堆栈#TimeMemoryFunctionLocation 10.0003243592{main}( )..\index.php:0
> 
> 20.0006246920 包括（'C:\wamp\www\Test\shirts4mike\inc\header.php'）..\index.php:3 ">

第 18 行也是如此。

**衬衫.php**：

```
 <?php
            $pageTitle = "Mike's Full Catalog of Shirts";
            $section = "shirts";
            include('inc/header.php'); ?>

                    <div class="section page">
                            <h1>Mikes&rsquo;s Full Catalog of Shirts</h1>
                    </div>

            <?php include ('inc/footer.php'); ?> 
```

**联系人.php**：

```
<?php
    $pageTitle = "Contact Mike";
     $section = "contact";
     include('inc/header.php'); ?>

           <div class="section page">

           <h1>Contact</h1>

           </div>

<?php include ('inc/footer.php'); ?> 
```

**header.php**：

```
<html>
        <head>
                <title> <?php echo $pageTitle ?></title>
                <link rel="stylesheet" href="css/style.css" type="text/css">
                <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Oswald:400,700" type="text/css">
                <link rel="shortcut icon" href="favicon.ico">
        </head>
        <body>

                <div class="header">

                        <div class="wrapper">

                                <h1 class="branding-title"><a href="./">Shirts 4 Mike</a></h1>

                                <ul class="nav">
                                        <li class="shirts <?php if ($section == "shirts"){ echo "on"; } ?>"><a href="shirts.php">Shirts</a></li>
                                        <li class="contact <?php if ($section == "contact"){ echo "on"; } ?>"><a href="contact.php">Contact</a></li>
                                        <li class="cart"><a href="#">Shopping Cart</a></li>
                                </ul>

                        </div>

                </div>

                <div id="content"> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T15:28:21.607

当您`SCREAM`在这样的 PHP 错误消息中看到时，是由于以下情况：

1.  你已经安装了 PHP 的 xDebug 扩展。
2.  xDebug 被配置为防止错误抑制。
3.  您的 PHP 代码正在尝试使用符号或其他错误抑制机制来抑制错误消息`@`，而 xDebug 正在覆盖它。

xDebug 是一个 PHP 扩展，旨在帮助调试 PHP 程序。它通常不应该安装在生产系统上；仅在开发系统上。

xDebug 有一个名为“Scream”的设置，旨在防止错误被抑制。这再次旨在用于开发系统。开发人员可能希望在正常情况下抑制错误，但在调试时查看这些错误很有用。因此，尖叫设置覆盖了 PHP 隐藏错误消息的所有正常方式。这对于调试很有用，但在生产系统上却是一件可怕的事情。

xDebug 永远不应该安装在面向公众的生产服务器上，因此如果这描述了您的系统，您应该删除它，或者要求将其删除。这可以像修改 PHP.ini 文件以删除对 xDebug 的引用一样简单（尽管这只会禁用扩展而不是卸载它）。

如果它已安装并且您对此无能为力，那么您需要找到一个不会在生产系统上安装开发工具的更好的 Web 主机。

说了这么多，如果您收到消息 that `$section is undefined`，那么它确实意味着代码中存在需要修复的错误。

错误发生在 中`header.php`，当它包含在 中时`index.php`。

您向我们展示了`shirts.php`和`contact.php`，两者都设置`$section`正确。您*没有*向我们展示`index.php`，但我猜它包含`header.php`与其他人相同的方式，但不像`$section`其他人那样设置。

因此，您可以通过编辑来修复错误`index.php`，使其`$section`以与其他页面相同的方式设置。即使它只是将其设置为空白字符串，也足以修复错误。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T15:35:51.783

## 您正在查看错误的文件

堆栈跟踪表明包含两个文件以获取此特定错误（以相反的顺序）：

*   `inc\header.php`
*   `index.php`

在问题中，`index.php`未显示 - 但很可能您有：

```
<?php
$pageTitle = "something";
include('inc/header.php'); 
```

即缺少的变量在您正在执行的代码中使用之前*未声明。*

## 尖叫

[尖叫](http://php.net/manual/en/book.scream.php)是一个扩展，它忽略了`@`操作符的使用——即在代码中的某个地方正在执行，它正在被使用，通常认为忽略错误是不好的做法。但是，您可以[关闭尖叫声](http://php.net/manual/en/scream.configuration.php)- 这适用于生产/实时应用程序，但当然应该解决错误/警告/通知。

# entity-framework - ADO.NET 实体框架和 SQL Server

> ID：14503651
> 
> 赞同：-1
> 
> 时间：2013-01-24T14:28:07.483
> 
> 标签：entity-framework

我是实体框架主题的新手，我在 SQL Server 2005 中有一个数据库，并且正在使用 Visual Studio 2012。

使用 Entity Framework 连接到数据库时出现错误。

> *无法加载文件或程序集“Microsof.SqlServer.Management.Sdk.Sfc，版本 = 11.0.0.0，文化 = 中性，publicKeyToken = 89845dcd8080cc91”或其依赖项之一。系统找不到指定的文件。*

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:31:51.813

可能是您问题的解决方案：http: [//social.msdn.microsoft.com/Forums/en/vssetup/thread/5abfbb57-dac9-4039-b121-ae21c9b9352c](http://social.msdn.microsoft.com/Forums/en/vssetup/thread/5abfbb57-dac9-4039-b121-ae21c9b9352c)

[http://www.sqlservercentral.com/Forums/Topic594847-323-1.aspx](http://www.sqlservercentral.com/Forums/Topic594847-323-1.aspx)

# javascript - 用于 scriptDB 编写的锁定服务技术

> ID：14503655
> 
> 赞同：0
> 
> 时间：2013-01-24T14:28:15.603
> 
> 标签：javascript, google-apps-script

我希望在我的脚本上实现锁定服务以防止数据库冲突，但所有示例似乎都针对同一代码块的多个触发器。我的触发器都是针对对 ScriptDB 进行不同写入的不同函数，但写入的信息有时会发生冲突。

我无法想象在这种情况下如何使用锁定服务，因为目前正在执行的代码块都没有重叠。在执行 db.save() 之前，我是否应该有一个中央 keyMaster() 函数来检查所有现有函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:10:42.440

这是我组装的系统。这个简单的测试按预期工作，但在我不知道的边缘情况可能不存在的情况下，在我的完整脚本中测试更难。

对此有何评论？

```
 function keyMaster(type, myLock) {
      //call with following to create a lock
      //var lock = keyMaster("lock"); // Check that response is not null
      //Call with the following to release
      //lock = keyMaster("unlock", lock);  
        if (type === "lock") {
          try {
            var lock = LockService.getPublicLock();
            lock.waitLock(45000);
            return lock;
          }
          catch(e) {
            Logger.log ("Keymaster error\n" + e.message);
            return null;
          }
        }
        else {
            myLock.releaseLock();
            return myLock;
        }
      }

      function block1() {

        var lock = keyMaster("lock");
        if (lock) {
          Utilities.sleep(10000);
          lock = keyMaster("unlock", lock);  
        }

      }

      function block2() {

        var lock = keyMaster("lock");
        if (lock) {
          Utilities.sleep(0);
          lock = keyMaster("unlock", lock);  
          return "block2 locked and unlocked";
        }
        else {
          return "block2 could not get lock";
        }  
      } 
```

# python - 元组是不可变的，在替换它的条目之前创建列表

> ID：14503660
> 
> 赞同：1
> 
> 时间：2013-01-24T14:28:30.907
> 
> 标签：python, list, numpy, tuples

我试图对列表和 numpy 数组进行一些简单的操作，但遇到了一些简单的事情：

```
a=np.arange(12)
a
array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11])
a=np.reshape(a,(3,4))
a
array([[ 0,  1,  2,  3],
   [ 4,  5,  6,  7],
   [ 8,  9, 10, 11]])

b=np.arange(12,24)
b
array([12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23])
b=np.reshape(3,4)
list1 = [(a,'a'),(b,'b')]
data = [(i, j) for i,j in list1] 
```

当我尝试这样做时：

```
data[0][0]=np.delete(data[0][0], np.s_[-1::],0) 
```

我收到以下错误：

```
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
TypeError: 'tuple' object does not support item assignment 
```

但如果我这样做：

```
cop=np.delete(data[0][0], np.s_[-1::],0)
cop
array([[0, 1, 2, 3],
   [4, 5, 6, 7]]) 
```

它工作得很好。

但我也做不到：

```
data[0][0]=np.copy(cop)

Traceback (most recent call last):
File "<stdin>", line 1, in <module>
TypeError: 'tuple' object does not support item assignment 
```

但如果我检查类型，两者实际上都是数组：

```
type(cop)
<type 'numpy.ndarray'>

type(data[0][0])
<type 'numpy.ndarray'> 
```

好几个小时我都找不到错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:28:30.907

然后我意识到数据实际上是一个元组。

所以这就是解决问题的方法：

```
data = [[i, j] for i,j in list1] 
```

然后我可以替换像 data[0][0] 这样的元素

# ios - 在部分之间移动单元格时，UITableView 返回错误的 indexPath

> ID：14503664
> 
> 赞同：0
> 
> 时间：2013-01-24T14:28:40.453
> 
> 标签：ios, uitableview

`UITableView`我正在创建一个列表应用程序，用户可以在其中检查项目，在短暂延迟后检查时，选中的项目移动到底部（ 中的不同部分）。用户可以通过点击它来“取消选中”该项目，然后它会移回原始部分。

我的问题是，当单元格在这样的部分之间移动时，似乎`UITableView`会“混淆”哪些单元格在哪里。

当我`NSLog`与之`IndexPath.row`交互的单元格返回与我触摸不同的行时。我用来`[self.tableView moveRowAtIndexPath:from_indexPath toIndexPath:to_indexPath];`在部分之间移动单元格。这是我的一些代码：

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{

switch (indexPath.section) {
    case SECTION_ACTIVE:{
        ItemData *dataForCell = [activeList objectAtIndex:indexPath.row];

       NSLog(@"%@ \t %d",dataForCell.title, indexPath.row);
        if (dataForCell.isHeader) {
           NSLog(@"%d",indexPath.row);
            return 70;
        }
        break;
    }
    default:
        break;
}

return 55;
} 
```

有没有办法解决这个问题？或者解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:43:01.920

You can tag your table cells and can re-check it when you move your cell from one section to another.

# javascript - 延迟脚本和 DOM

> ID：14503666
> 
> 赞同：1
> 
> 时间：2013-01-24T14:28:45.490
> 
> 标签：javascript, deferred-loading

我只需要在 DOM 准备好时运行脚本，因为脚本会重写某些标签的某些属性。

目前我使用`document.addEventListener`on`DOMContentLoaded`或者如果不可用`document.attachEvent` on`onreadystatechange`并且如果两者都没有给出我使用`window.onload`功能。

我阅读了关于在文档被解析*后*`defer`应该执行的脚本的标签。

 **   这是否意味着通过设置`defer`属性我可以在 DOM 准备好时轻松执行我的脚本？
*   是否有一些我可能会错过的隐藏内容？
*   Opera、WebKit、Firefox、IE 的支持情况如何？

**编辑：**我知道像 JQuery 这样的库，但我不能使用它们，因为我需要**非常小**的脚本，所以我需要一个低级别的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:57:32.227

属性的正确实现`defer`将在 DOM 完成解析后自动运行脚本，因此脚本中的任何代码都不必在加载 DOM 时执行其自己的逻辑。您可以阅读[这篇 Mozilla 文章](http://hacks.mozilla.org/2009/06/defer/)了解更多详细信息。

但是，`defer`并非所有旧版浏览器都支持该属性，因此您必须决定要支持哪些浏览器以及对于不支持 defer 的浏览器的策略是什么。您可以在[这篇 SO 帖子](https://stackoverflow.com/a/3982619/816620)中阅读浏览器实现的历史。在 switcheroo 中，它首先在 IE 中实现，然后在 Firefox 中，然后在 Safari 和 Chrome 中。从那篇文章中的日期/版本来看，除了 Opera 之外，现在依赖它看起来很安全，但你必须深入研究那篇文章中的细节，以确保它符合你的要求。

下面的图表显示了浏览器对`defer`http://caniuse.com/script-defer[的](http://caniuse.com/script-defer)支持。

据我所知，主要争议`defer`是多个`defer`脚本是否按顺序执行（它们应该按顺序执行）以及它们如何与使用`async`. 标准和实施现在很清楚，但并非总是如此。但是，如果你只有一个独立的`defer`脚本，你只关心在解析 DOM 之后执行，你应该是安全的。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-01-24T14:38:18.170

如果您愿意使用 JQuery ( [http://jquery.com/](http://jquery.com/) )，那么您可以使用：

```
$(document).ready(
    function(){
    //do something here, the DOM is ready!
    }
); 
```

有关完整的详细信息，请访问[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

.ready 函数将在 DOM 准备好后加载，我相信（尽管我可能会弄错）JQuery 团队已经在很大程度上处理了您（或我）可能错过的任何事情。

虽然您可以在没有 JQuery 开销的情况下解决这个问题，但根据我的（新手）经验，不值得麻烦。此外，JQuery 还有很多其他漂亮的工具。:)*

# linux-device-driver - pcie原始吞吐量测试

> ID：14503673
> 
> 赞同：1
> 
> 时间：2013-01-24T14:29:03.953
> 
> 标签：linux-device-driver, throughput, pci-e

我正在通过内核模块进行 PCIE 吞吐量测试，测试结果数字很奇怪（PCIE gen1 x1 的写入速度为 210MB/s，但读取速度仅为 60MB/s）。如果我的测试配置中有错误的方法，我想请您提出建议和更正。

我的测试配置如下：

*   一块板配置为根端口，一块板配置为端点。PCIE 链路为 gen 1，宽度 x1，MPS 128B。两块板都运行 Linux 操作系统
*   在 Root Port 端，我们分配了一个内存缓冲区，其大小为 4MB。我们将入站 PCIE 内存事务映射到此缓冲区。
*   在端点端，我们对远程缓冲区进行 DMA 读/写并测量吞吐量。通过此测试，端点将始终是事务的发起者。
*   EP Write 测试的测试结果是 214MB/s，EP Read 测试只有 60MB/s。PCIe Gen1 x1 的写入测试吞吐量是合理的，但 EP 读取吞吐量太低。

对于 RP 板，我使用 PCIE 以太网 e1000e 卡对其进行了测试，并获得了最大吞吐量 ~900Mbps。我只是想知道在以太网 TX 路径的情况下，以太网卡（扮演端点角色）也执行 EP 读取请求，并且可以通过更小的 DMA 传输获得高吞吐量（~110MB/s），所以我的 DMA 一定有问题EP 读取配置。

DMA 读取测试的细节可以总结为以下伪代码：

```
dest_buffer = kmalloc(1MB)
memset(dest_buffer, 0)
dest_phy_addr = dma_map_single(destination_buffer)
source_phy_addr = outbound region of Endpoint
get_time(t1)
Loop 100 times
    Issue DMA read from source_phy_addr to dest_phy_addr
    wait for DMA read completion
get_time(t2)
throughput = (1MB * 100)/(t2 - t1) 
```

任何建议和建议表示赞赏。先谢谢了！

# prolog - prolog中递归的计算复杂度

> ID：14503678
> 
> 赞同：3
> 
> 时间：2013-01-24T14:29:13.870
> 
> 标签：prolog, complexity-theory, failure-slice

我有一个递归：

```
list_to_set([],[]).

list_to_set([A|X],[A|Y]):-
   list_to_set(X,Y),
    \+member(A,Y).

list_to_set([A|X],Y):-
   list_to_set(X,Y),
   member(A,Y). 
```

它将元素列表转换为集合。例如 [1,1,2,3] -> [1,2,3]。当我输入查询`list_to_set([1,1,2,3],X).`时，结果是`X = (1,2,3)`，找出集合的复杂性是`O(n)`. 现在我可以输入`;`替代以确保没有其他可能的答案。显然没有，脚本会返回`false`。我的问题是：第二个脚本运行的计算复杂度是多少，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T16:09:52.003

使用您的程序，在最坏的情况下，找到第一个答案是指数级的。在最好的情况下它是二次的。

这是一个具体查询，它需要以指数方式进行许多推论：

```
?- length(L,N),maplist(=(a),L),time(once(list_to_set(L,S))).
...
% 1,310,714 inferences, 0.180 CPU in 0.180 seconds (100% CPU, 7288089 Lips)
L = [a, a, a, a, a, a, a, a, a|...],
N = 18,
S = [a] ;
% 2,621,434 inferences, 0.337 CPU in 0.337 seconds (100% CPU, 7789752 Lips)
L = [a, a, a, a, a, a, a, a, a|...],
N = 19,
S = [a] ... 
```

确定复杂性`Goal, false`（假设程序本质上是一个纯 Prolog 程序）通常比确定仅找到第一个答案的复杂性更容易。原因是前者与从句的精确顺序无关。不过，两者都取决于目标的顺序。

请参阅[此答案](https://stackoverflow.com/a/14481012/772868)以获取下限的理由。

编辑：也许最有趣的观察是这样的：如果你想解决这个问题，也就是说，如果你想减少执行的推理次数，你必须改变失败切片的可见部分。

# asp.net - 过滤绑定的 Gridview 以下拉

> ID：14503682
> 
> 赞同：1
> 
> 时间：2013-01-24T14:29:25.380
> 
> 标签：asp.net, vb.net

我已经看到了几个如何通过将所有代码放在 aspx 文件中来执行此操作的示例，但我正在尝试从代码隐藏中执行此操作。这是我在后面的代码中的内容：

```
 Dim dt As New DataTable

    Using conn As New OleDbConnection(ConnectionString)
        conn.Open()
        Dim dtAdapter As New OleDbDataAdapter
        Dim command As New OleDbCommand("SELECT * FROM table " & _
                                     "" _
                                    , conn)

        dtAdapter.SelectCommand = command
        dtAdapter.Fill(dt)
        conn.Close()
    End Using

    GridView1.DataSource = dt
    GridView1.DataBind() 
```

我对任何解决方案持开放态度，但如果可能的话，我更愿意在代码隐藏中进行，因为这就是应用程序的其余部分。我不一定需要使用 gridview 只显示一些表格数据，所以不管用什么都可以。我试图避免手动构造 sql 字符串。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:41:33.180

我没有看到这个问题。如果您不知道如何过滤查询中的记录，请使用`Where`带有参数的子句：

```
Dim dt = New DataTable()
Using conn As New OleDbConnection(ConnectionString)
    Dim queryString As String = "SELECT * FROM Table WHERE Field1 LIKE ?"
    Dim command As OleDbCommand = New OleDbCommand(queryString, conn)
    command.Parameters.Add("@p1", OleDbType.Char, 3).Value = "a%"
    Using da = New OleDbDataAdapter(command)
        ' you don't need to open/close a connection if you use DataAdapter.Fill
        da.Fill(dt)
    End Using
End Using
GridView1.DataSource = dt
GridView1.DataBind() 
```

*   [数据适配器参数](http://msdn.microsoft.com/en-us/library/bbw6zyha%28v=vs.110%29.aspx)
*   [使用语句](http://msdn.microsoft.com/en-us/library/htd05whh%28v=vs.110%29.aspx)

# android - 从 parseObject 获取文件

> ID：14503689
> 
> 赞同：2
> 
> 时间：2013-01-24T14:29:50.903
> 
> 标签：android, file, parse-platform

这是更少的 android 问题和更多 Parse.com 问题，但我需要你的帮助：

我在 Parse.com 的应用程序的表格中有一个图像文件

文件没问题，我可以手动下载并观看。

但是当尝试使用我已经从服务器获取的 parseObject 获取它时，我得到“null”

代码：

```
 byte[] imageFile = parseObject.getBytes(Statics.COL_IMAGE_FILE); 
```

我究竟做错了什么？

ps : 我可以在 parseObject "estimatedData" 字段中看到图像文件数据/链接，但无法获取他。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T00:28:10.447

如果`Statics.COL_IMAGE_FILE`是一[`File`](https://parse.com/docs/android_guide#files-classes)列，您应该执行以下操作来获取 byte[]：

```
ParseFile imageFile = (ParseFile)parseObject.get(Statics.COL_IMAGE_FILE);
imageFile.getDataInBackground(new GetDataCallback() {
  public void done(byte[] data, ParseException e) {
    if (e == null) {
      // data has the bytes for the image
    } else {
      // something went wrong
    }
  }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-31T08:00:18.023

请参阅我的应用程序中的此代码段。外部查询返回文件关联的对象，内部查询从该对象返回文件。希望能帮助到你。

```
 ParseQuery<ParseObject> query = ParseQuery.getQuery("ClassName");
    query.whereEqualTo("Column", "Your_variable");
    query.getFirstInBackground(new GetCallback<ParseObject>() {
      public void done(ParseObject object, ParseException e) {
        if (object != null) {

            ParseFile file = (ParseFile)object.get("File_Coulumn");
            file.getDataInBackground(new GetDataCallback() {

            public void done(byte[] data, ParseException e) {
                if (e == null) {

                    bitmap=BitmapFactory.decodeByteArray(data, 0, data.length);
                    //use this bitmap as you want

                } else {
                  // something went wrong
                }
              }
            });

        } else {
            Toast.makeText(getApplicationContext(), "Exception", Toast.LENGTH_SHORT) .show();

        }
      }
    }); 
```

# c# - 从右到左语言括号反转

> ID：14503691
> 
> 赞同：7
> 
> 时间：2013-01-24T14:29:52.613
> 
> 标签：c#, right-to-left

我在 C# 中使用 StringBuilder 附加一些文本，可以是英语（从左到右）或阿拉伯语（从右到左）

```
stringBuilder.Append("(");
stringBuilder.Append(text);
stringBuilder.Append(") ");
stringBuilder.Append(text); 
```

如果 text = "A"，则输出为 "(A) A"

但如果 text = "بتث"，则输出为 "(بتث) بتث"

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T16:53:21.777

当被要求渲染从右到左的文本、阿拉伯语或希伯来语时，这是 Windows 文本渲染引擎中的一个众所周知的缺陷。它有一个难以解决的问题，当语言中没有好的替代词可用时，人们往往会求助于西方单词和标点符号。例如品牌和公司名称。渲染器试图通过查看代码点来猜测正确的渲染顺序，拉丁字符集中的字符显然必须从左到右渲染。

但它在标点符号上摸索，括号是最明显的。您必须明确说明它知道要做什么，您必须使用 Unicode 从右到左标记，`U+200F`或`\u200f`在 C# 代码中。相反，如果您知道需要 LTR 渲染，请使用从左到右标记，`U+200E`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:32:30.017

使用`AppendFormat`而不是仅仅`Append`：

```
stringBuilder.AppendFormat("({0}) {0}", text) 
```

这*可能会*解决问题，但它可能 - 您需要查看`text`值 - 它可能嵌入了 LTR/RTL 标记字符。这些需要在值中删除或更正。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-13T09:56:07.217

我有一个类似的问题，我设法通过创建一个检查 Unicode 中每个 Char 的函数来解决它。如果它来自页面 FE，那么我在其后添加 202C，如下所示。没有这个，它会根据我的需要混合 RTL 和 LTF。

```
string us = string.Format("\uFE9E\u202C\uFE98\u202C\uFEB8\u202C\uFEC6\u202C\uFEEB\u202C\u0020\u0660\u0662\u0664\u0668 Aa1"); 
```

# hyperlink - 如何在 org 模式下链接到 LABEL？

> ID：14503695
> 
> 赞同：8
> 
> 时间：2013-01-24T14:30:17.883
> 
> 标签：hyperlink, label, org-mode

在 org-mode 中，我定义了一个图 + 标题，如下所示：

```
#+CAPTION: My great figure
#+LABEL: fig:myfigure
[[myfigure.png]] 
```

我怎么写“看图[myfigure]”？我发现了以下语法：

```
See figure \ref{fig:myfigure} 
```

但这在源文件中看起来很难看。特别是，您不能将其用于实际跳转到该图。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-09-14T12:02:52.260

你实际上不需要`'#+NAME'`，如果你使用它就可以正常工作`'#+LABEL'`，这不会破坏你的数字列表的简短标题。

Orgmode 现在确实`'jumpable'`在导出的 (latex, html) 文本中提供带有您选择的名称的 、枚举或链接，如果您链​​接：

```
see figure [[fig:myfigure]]. 
```

或者

```
see figure [[fig:myfigure][figurenameintext]]. 
```

我会将此添加为评论，但我还没有声誉。

-- 回复您的评论（仍然无法评论）：您确实需要`'#+NAME'`在 .org 源文件中跳转；如[手册](http://orgmode.org/manual/Internal-links.html "手动的")中所述，我也刚刚确认有效。不确定最新版本中的短字幕。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T01:06:47.527

使用最近的 org-mode，您可以使用`#+name:`，请参阅： [http ://thread.gmane.org/gmane.emacs.orgmode/62644/focus=62646](http://thread.gmane.org/gmane.emacs.orgmode/62644/focus=62646)

```
#+CAPTION: My great figure
#+LABEL: fig:myfigure
#+name: fig:myfigure
[[test.png]]

See figure [[fig:myfigure][test]]. 
```

这对我来说可以从链接跳转，但在导出时没有效果，恐怕......

# jquery - MVC3/4 验证隐藏字段

> ID：14503698
> 
> 赞同：2
> 
> 时间：2013-01-24T14:30:23.017
> 
> 标签：jquery, asp.net-mvc-3, jquery-validate, unobtrusive-validation

我已经为我的表单设置了模型验证，但验证似乎根本不起作用。我想没有人能帮上忙。我尝试过使用以下解决方法，但这会在萤火虫中不断出现“未定义”错误。

**示例解决方法脚本：**

```
<script type="text/javascript">
    $(document).ready(function () {            
        $.validator.setDefaults({ ignore: [] });
    });
</script> 
```

**示例文本字段（注意：带有客户姓名的自动完成文本字段）：**

```
 @Html.TextBox("txtCustomer", null, new { @id = "txtCustomer", @class = "txt" }) 
```

**隐藏字段示例（注意：从自动完成字段中进行选择时，将 id 注入隐藏字段）：**

```
 @Html.HiddenFor(model => model.Customer_ID, new { @id = "hCustomerID" }) 
```

**示例模型数据注释**

```
 [Range(1, Int32.MaxValue, ErrorMessage = "Please select a customer")]
    public int Customer_ID { get; set; } 
```

**编辑：错误截图**

抱歉，我必须发布截图链接，因为我的代表点足够高。

[UI 回发错误](http://i.stack.imgur.com/xhb70.png)

**编辑：显示页面源的屏幕截图**

[页面源截图](http://i.stack.imgur.com/ySm8B.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T16:57:23.130

在不显眼的脚本之后以这种方式更改验证器上的忽略为时已晚。这是因为验证器仅在创建时提取一次默认值。不显眼的脚本会为您创建验证器。您需要引用现有的验证器对象并对其进行更新。

试试这个

```
<script>
    $(document).ready(function () {            
        $('form').validate().settings.ignore = []
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-29T05:07:29.853

如果您不必在控制器中和相关视图的操作中使用 javascript，则可以在验证模型之前添加模型错误。例子：

```
 [HttpPost]
        public ActionResult Fix(YourModel mdl)
    {
        if (mdl.Customer_ID>Int32.MaxValue || mdl.Customer_ID<1)
            ModelState.AddModelError("", "Your error message!");

        if (ModelState.IsValid)
        {

           //
           //Some code
           //

            return View("YourView", yourlist);
        }

        return View(mdl);
    } 
```

# c# - 具有不存在的方法的无效代理类型异常 - Fluent NHibernate

> ID：14503702
> 
> 赞同：1
> 
> 时间：2013-01-24T14:30:40.363
> 
> 标签：c#, nhibernate, fluent-nhibernate

**下面有一个更新**

我有以下类派生自我`EqualityComparer<T>`（尝试）使用 Fluent/NHibernate 坚持下去。

```
public class WeeklyGSFEntity : EqualityComparer<WeeklyGSFEntity>
{
    public virtual int IssueNumber { get; set; }
    public virtual int Severity { get; set; }
    public virtual char PainIndex { get; set; }
    public virtual Status Status { get; set; }
    public virtual int Month { get; set; }
    public virtual int Year { get; set; }
    public virtual DateTime DateCreated { get; set; }
    public virtual Region Region { get; set; }
    public virtual DateTime IncidentStart { get; set; }
    public virtual DateTime IncidentEnd { get; set; }
    public virtual int SRCount { get; set; }
    public virtual string AggravatingFactors { get; set; }
    public virtual string AggravatingFactorDescription { get; set; }
    public virtual TimeSpan MTTR
    {
        get
        {
            return (IncidentEnd - IncidentStart);
        }
    }

    public WeeklyGSFEntity()
    {
        Status = Status.New;
    }
    public override int GetHashCode() { ... }

    internal static bool StaticEqual(WeeklyGSFEntity x, WeeklyGSFEntity y) { ... }
    public static bool operator ==(WeeklyGSFEntity x, WeeklyGSFEntity y) { ... }
    public static bool operator !=(WeeklyGSFEntity x, WeeklyGSFEntity y) { ... }
    public override bool Equals(WeeklyGSFEntity x, WeeklyGSFEntity y) { ... }
    public override bool Equals(object obj) { ... }
    public override int GetHashCode(WeeklyGSFEntity obj) { ... }
 }

public enum Status { ... }
public enum Region { ... } 
```

现在，这上周奏效了。现在，当我去保存任何实体时，我会收到以下消息：

```
 The following types may not be used as proxies:
 Core.Models.WeeklyGSFEntity: method IndexOf should be 'public/protected virtual' or 'protected internal virtual'
 Core.Models.WeeklyGSFEntity: method LastIndexOf should be 'public/protected virtual' or 'protected internal virtual' 
```

如您所见，没有 IndexOf 或 LastIndexOf 方法... :) 我试图覆盖它们，但它们一开始就不存在覆盖！

有任何想法吗？

**更新第一个**

所以我深入研究了 IL 并且没有任何方法`IndexOf`或`LastIndexOf`. 现在，在这一切发生之前，我*确实*创建了一个关于冲突的新类，其中包含我的 WeeklyGSFEntities 集合。现在这个集合将具有`IndexOf`和`LastIndexOf`方法，但是，我从项目中排除了映射和类......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:54:56.607

好的，而不是从`EqualityComparer<WeeklyGSFEntity>`我实现的派生`IEqualityComparer<WeeklyGSFEntity>`。问题消失了...

# javascript - Uncaught TypeError: Object has no method autocomplete and its block to populate dialog box to delete

> ID：14503703
> 
> 赞同：0
> 
> 时间：2013-01-24T14:30:40.933
> 
> 标签：javascript, jquery, json

很抱歉社区中已经有类似的帖子，但我觉得很奇怪。它工作正常，但它影响了我的其他视图，并且不允许其他视图页面填充任何对话框..

我试图通过像这样将它包装在 function() 中来修复它

```
$('#_auto').autocomplete(function(){ 
```

但是，有了这个，我没有在 _auto 文本字段中得到 jason 值，并且在下一行中得到了意外的令牌错误。谁能帮我解决这个问题。

```
source: function(request,response){ 
```

这是我的代码：

```
$(function () {
    $('#_auto').autocomplete({
        selectFist: true,
        minLength: 2,
        source: function (request, response) {
            var sval = $('#_auto').val();
            //alert(sval);
            $.ajax({
                url: BASE_URL + '/controller/search/',
                type: 'POST',
                data: {
                    'term': sval,
                },
                dataType: 'json',
                success: function (data) {
                    console.log(data);
                    var dta = [];
                    orgdetails = [];
                    //response(data.d);
                    for (var i in data) {
                        dta.push(data[i].name);
                        orgdetails[data[i].name] = data[i].id;
                    }
                    response(dta); //response(dta);
                },
                error: function (result) {}
            }); //ajax
        }
    }).focus(function () {
        $(this).trigger('keydown.autocomplete');
    });
}); 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:26:10.170

我认为for循环应该是

```
var dta = $.map(data, function(v, i){
    orgdetails[v.name] = v.id;
    return {
        label: v.name,
        id: v.name
    };
}); 
```

[小提琴](http://jsfiddle.net/arunpjohny/MQurb/2/)。

`request.term`另一个观察，您可以使用而不是获取当前搜索词`$('#_auto').val()`

完整代码：

```
$('#_auto').autocomplete({
    selectFist: true,
    minLength: 2,
    source: function (request, response) {
        $.ajax({
            url: BASE_URL + '/controller/search/',
            type: 'POST',
            data: {
                'term': request.term,
            },
            dataType: 'json',
            success: function (data) {
                console.log(data);
                orgdetails = {};

                var dta = $.map(data, function(v, i){
                    orgdetails[v.name] = v.id;
                    return {
                        label: v.name,
                        id: v.name
                    };
                });
                response(dta); //response(dta);
            },
            error: function (result) {}
        }); //ajax
    }
}).focus(function () {
    $(this).trigger('keydown.autocomplete');
}); 
```

# lucene - Railo 中的索引查询

> ID：14503705
> 
> 赞同：1
> 
> 时间：2013-01-24T14:30:43.640
> 
> 标签：lucene, indexing, railo, cfml, cfindex

我去了 Web 管理员 > 服务 > 搜索。

我手动创建一个集合：

*   名称“Articoli”
*   路径（假的，例如 /tmp）
*   意大利语

然后在我的索引器模板中：

```
<cfquery name="qry">
    SELECT * FROM articoli 
</cfquery>
<cfindex action="update" 
         collection="articoli"
         key="artid"
         type="custom"
         title="artcod"
         query="qry"
         body="artdes" /> 
```

结果：**collection articoli 未定义**

有任何想法吗？使用 RAILO+Lucene 进行索引的其他方法？

**编辑：**

我正在使用 Railo 3.3（旧版本）。这种索引可用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:53:57.017

检查[v3.3 的 Railo 源代码](https://github.com/getrailo/railo/blob/3.3/railo-java/railo-core/src/railo/runtime/search/SearchEngineSupport.java)表明，**如果命名的集合不存在，则会出现错误“collection articoli is undefined”** ——简单的搜索仅显示“collection X is undefined”错误消息的[一个实例）。](https://github.com/getrailo/railo/blob/master/railo-java/railo-core/src/railo/runtime/search/SearchEngineSupport.java#L83)

这表明名称与您在 Web 管理员中键入**的名称不匹配**，或者您在运行代码**的其他 Web 管理员中创建了 articoli 集合。**

# c# - 导航和记忆文本框数据

> ID：14503710
> 
> 赞同：1
> 
> 时间：2013-01-24T14:31:02.830
> 
> 标签：c#, winforms, button, textbox, navigation

该程序有一个面板，其中包含一个文本框，面板每侧有两个按钮。每个按钮充当“下一个”(>>) 和“上一个”(<<) 导航。我希望能够通过单击“>>”导航到下一个面板，这将清除文本框。然后，当我单击“<<”时，我想返回上一个面板，其中包含先前添加的数据的文本框。但是，我想这样做，而不必在彼此之上创建两个面板并将可见性设置为 true 或 false（我能够做到）。我想通过只使用一个面板来实现这一点，这样这个过程就可以无限次地完成。我希望这很清楚，如果您需要更多信息，请告诉我。

这是我的界面图像以澄清事情：

![在此处输入图像描述](../Images/c2c6c8e869152ea3fe8ea3d53582316f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T14:35:53.397

既然你有页码，为什么不创建一个列表（或使用以页码作为键的字典），然后在 >> 和 << 的按钮处理程序中收集当前页面的文本（并将其放入列表或字典）并将其替换为上一页的文本（来自列表或字典）。

代码可能如下所示：

```
public partial class Form1 : Form
{
    Dictionary<Decimal, String> TextInfo;

    public Form1()
    {
        InitializeComponent();

        TextInfo= new Dictionary<Decimal, String>();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        numPage.Value = 1;
    }

    private void bnForward_Click(object sender, EventArgs e)
    {
        if (TextInfo.ContainsKey(numPage.Value))
        {
            TextInfo[numPage.Value] = textBox1.Text;
        }
        else
        {
            TextInfo.Add(numPage.Value, textBox1.Text);
        }

        numPage.Value++;

        if (TextInfo.ContainsKey(numPage.Value))
        {
            textBox1.Text = TextInfo[numPage.Value];
        }
        else
        {
            textBox1.Text = "";
        }
    }

    private void bnBack_Click(object sender, EventArgs e)
    {
        if (numPage.Value == 1)
            return;

        if (TextInfo.ContainsKey(numPage.Value))
        {
            TextInfo[numPage.Value] = textBox1.Text;
        }
        else
        {
            TextInfo.Add(numPage.Value, textBox1.Text);
        }

        numPage.Value--;

        if (TextInfo.ContainsKey(numPage.Value))
        {
            textBox1.Text = TextInfo[numPage.Value];
        }
        else
        {
            textBox1.Text = "";
        }
    }

    private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
    {

    }

} 
```

# spring - Spring JSF 应用流程

> ID：14503713
> 
> 赞同：0
> 
> 时间：2013-01-24T14:31:09.030
> 
> 标签：spring, jsf

我之前写过 Spring MVC Web 应用程序，其中有一个前端控制器，我们在每个方法中都有一个请求映射，这个方法反过来调用服务实现，最终将视图返回给 UI。现在，当我设计 JSF 应用程序时，无法理解这样的流程 - 这是我目前在我的应用程序中拥有的：

1.  初始`index.html`重定向到登录页面。

2.  用于填充标签值的登录页面的支持 bean。由于它是一种输入形式，因此不涉及其他逻辑。

3.  一旦用户在操作方法中单击提交->，我就有逻辑将调用服务（No.1）进行身份验证过程并通过返回页面名称将用户重定向到主页

4.  主页显示绑定到支持 bean 的各种字段，其字段必须由另一个 Web 服务调用（No.2）填充。

在步骤（3）和（4）之间，我很困惑。以前在 Spring 中，我有一个显式映射，我可以“实际上”控制前端控制器方法中的逻辑。在 JSF 中，我不知道是否应该将 No.2 Web 服务调用的逻辑与身份验证调用结合起来，因为我没有填充 bean 的方法。

就好像我没有对流程的明确控制。我读过很多文章试图理解这一点，但无法理解。请给我指点和一些参考资料，这些参考资料实际上可以更好地解释这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:53:05.080

为什么不能控制 JSF bean 中的逻辑？EJB 的使用示例

```
@ManagedBean
@RequestScoped
public class LoginBean {

    @EJB
    private AuthBean authBean;
    @EJB
    private UserSettings settingsBean;

    private String name, password;

    @PostConstruct
    private void init() {
        //do your initialization here
    }

    public String loginAction() {
        User user = authBean.authenticate(user, password);
        if(user != null) {
            UserSetting settings = settingsBean.getSettings(user.getId());
            return "home";
        }
    }
    //setters and getters
} 
```

# c - 创建结构并在 main 之外分配值时，初始值设定项元素不是常量

> ID：14503714
> 
> 赞同：1
> 
> 时间：2013-01-24T14:31:18.413
> 
> 标签：c

这是我的代码。我在主要内容之外写了这部分

```
typedef struct { int x; } foo;
const int bar = 2;
foo myFoo = { (int) bar }; 
```

但是，这会返回：

```
common.c:6: error: initializer element is not constant
common.c:7: error: (near initialization for ‘myFoo.x’) 
```

如果我将代码复制并粘贴到主目录中，它将起作用。有人可以给我一个解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:51:17.193

你可以这样做`enum`：

```
typedef struct { int x; } foo;
enum {bar = 2};
foo myFoo = { bar }; 
```

或者

使用`#define bar 2`喜欢

```
#define bar 2
typedef struct { int x; } foo; 
foo myFoo = { bar }; 
```

但两者在编译时都是已知的：*为什么不呢？*

```
typedef struct { int x; } foo; 
foo myFoo = { 2 }; 
const int bar = 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:52:39.353

C 2011 6.6 6：

> 整数常量表达式应具有整数类型，并且应仅具有整数常量、枚举常量、字符常量、结果为整数常量的 sizeof 表达式、_Alignof 表达式和作为强制转换的直接操作数的浮点常量的操作数。整数常量表达式中的强制转换运算符只能将算术类型转换为整数类型，但作为 sizeof 或 _Alignof 运算符的操作数的一部分除外。

C 2011 6.7.9 4：

> 具有静态或线程存储持续时间的对象的初始化程序中的所有表达式都应为常量表达式或字符串文字。

当您在 的主体内定义对象时`main`，它具有自动存储持续时间（仅在`main`执行时存在）。当您在全局范围内定义对象时，在任何函数之外，它具有静态存储持续时间（在程序的生命周期内存在）。

自动对象中可以有非常数，因为它们在程序运行时被初始化。因此程序可以执行计算或从其他对象中获取值来计算值。静态对象的初始值应该在程序执行之前可用，以便它们可以构建到程序映像中。虽然对人类来说很明显`myFoo`可以在编译时计算出示例中的初始值，但这需要在编译器中进行额外的工作，而这在 C 标准中被认为不值得要求。

# javascript - 对象字面量和静态变量

> ID：14503716
> 
> 赞同：2
> 
> 时间：2013-01-24T14:31:22.703
> 
> 标签：javascript

对象字面量被视为静态对象。

所以，对象字面量应该只包含静态变量，但是在下面的代码中

```
var obj = {
    a : "hello",
    foo : function(){
        console.log(this.a);
        console.log(obj.a);
    }
}; 
```

我可以`a`以静态方式`obj.a`和非静态方式访问`this.a`。

是`a`静态变量吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T14:37:23.300

我认为你混淆了一堆不同的东西。

您创建了一个名为的对象，该对象`obj`具有一个名为 的字段`a`。该字段可以作为`obj.a`（或者`obj['a']`如果您愿意）访问。如果您安排一些其他变量来引用`obj`，那么它也可以通过该变量获得。

安排其他变量指向的一种方法`obj`是获取一个`obj`定义为函数/闭包的字段，并使用“方法”语法调用它，如`obj.foo()`. 这意味着在 的主体内部`foo`，在该调用期间，特殊变量`this`将引用`obj`. 因此，该函数内的代码可以`obj.a`通过`this.a`.

这些都与静态与动态范围，或单例，或“类”与“实例”成员或任何这些无关。它只是一个对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T14:36:13.723

对象字面量**不是静态类**，它是 ; 的实例`Object`。因此`obj.a`也不能是静态的。也许混淆在于`{}`符号实际上创建了一个对象：

```
typeof {
    a : "hello",
    foo : function(){
        console.log(this.a);
        console.log(obj.a);
    }
};

"object" 
```

它相当于：

```
var obj = new Object();
obj.a = 'hello';
obj.foo = function() {} 
```

**结论**

静态属性只在面向类的语言中有意义，但在 JavaScript 中类的相同概念可以说是不存在的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T14:32:53.210

`obj.a`是“静态的”，即您引用它的方式。您只能在使用`this`时以这种方式使用`new obj()`- 所以`obj`必须是一个函数。

默认情况下`this`，当在作为对象成员的函数中使用时，它指的是父对象。在您的代码的情况下`obj`是父对象。

使用原型和的示例`this`：

```
var Obj = function(){this.a = "hi"};
Obj.prototype.foo = function(){
    console.log(this.a);
}
Obj.b = "sth";
var myObj = new Obj();
myObj.foo(); // "hi"
console.log(myObj.b); // undefined 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-06T15:48:49.733

这不是那么简单，检查

```
 let baba = {
    a: 12,
    foo: function () {
        baba.a = 13;
        this.a = 14;
    },
    roo: function () {
        alert("baba.a = " + baba.a + "\nthis.a = " + this.a);
    }
};
var theApp = {
    start_action: function () {

        let sola = Object.create(baba);
        sola.foo();
        sola.roo();

        let bola = Object.create(baba);
        bola.roo();            
    }
}
$(document).ready(theApp.start_action); 
```

在 roo() 调用之后第一次调用 foo 我们得到： 13, 14 第二次调用 foo 13, 13

# vxworks - VxWorks 信号

> ID：14503720
> 
> 赞同：2
> 
> 时间：2013-01-24T14:31:52.593
> 
> 标签：vxworks

我对 VxWorks 论坛中提出的先前问题有疑问。我的目标是当高优先级函数产生一个信号时，低优先级函数将立即处理它（高优先级函数必须被抢占）

代码是：

```
sig_hdr () { ... }
task_low_priority() {
    ...
    // Install signal handler for SIGUSR1
    signal(SIGUSR1, sig_hdr);

    ...
}

task_high_priority() {
    ...
    kill(pid, SIGUSR1); //pid is the ID of task_low_priority
    ...
} 
```

行后： `signal(SIGUSR1, sig_hdr);` 我添加了 `taskDelay(0)`. 我想阻止高优先级任务，以便低优先级任务可以获得 CPU 以执行信号处理程序，但除非我这样做，否则它不会发生`taskDelay(1)`。

谁能解释为什么它不起作用`taskDelay(0)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:14:29.173

实际上，taskDelay(0) 不会让较低优先级的任务运行，原因如下：

1.  高优先级任务正在执行
2.  高优先级任务问题 taskDelay(0)
3.  调度程序被调用并扫描下一个要运行的任务，它将选择“就绪”的最高优先级任务
4.  发出 taskDelay(0) 的任务已就绪，因为延迟已过期（即 0 个滴答已过）
5.  因此，高优先级任务会立即重新调度，在这种情况下 taskDelay(0) 实际上是在浪费 CPU 周期。

现在，在您发出 taskDelay(1) 的情况下，将遵循相同的步骤，但不同之处在于，高优先级任务未处于就绪状态，因为未经过一个滴答，因此就绪的较低优先级任务可以CPU时间1滴，然后它将被高优先级任务抢占。

现在有一些设计不佳的系统可以执行以下操作：

```
taskLock();
...
taskDelay(0);
...
taskUnlock(); 
```

目的是让低优先级任务占用 CPU 直到某个点，然后通过发出 taskDelay(0) 允许高优先级任务接管。但是，如果您玩这样的游戏，那么您应该重新考虑您的设计。

同样在您的情况下，我会考虑一个更强大的系统，而不是执行 taskDelay() 来允许低优先级任务处理事件，您应该将消息发送到低优先级任务并让该低优先级任务来处理消息队列。当您的高优先级任务阻塞由事件处理程序或类似事物提供的信号量时。在这种情况下，您希望在两个不同的任务之间强制进行乒乓操作以完成工作，但是如果您添加一个充当缓冲区的队列，那么只要您的系统是可调度的（即有足够的时间来响应对于所有事件，将它们排队并完全处理它们）然后它将起作用。

* * *

**更新**

我假设您的系统应该是这样的：

1.  事件发生（中断驱动？）。
2.  高优先级任务运行以收集数据。
3.  数据由低优先级任务处理。

如果是这种情况，您要遵循的模式实际上非常简单，实际上只需 1 个任务即可完成：

中断处理程序收集数据，并向任务发送消息 (msgQSend())。带有 msgQReceive 的消息队列中的任务正在挂起。

但是，如果我对您的系统有更多了解（您真正想要做什么）以及为什么您使用 posix 调用而不是本机 vxworks 调用，这可能会有所帮助。

* * *

如果您是实时系统的新手，您应该了解速率单调分析，维基百科上有一个非常简短的总结：

[http://en.wikipedia.org/wiki/Rate-monotonic_scheduling](http://en.wikipedia.org/wiki/Rate-monotonic_scheduling)

另请注意，在 VxWorks 中，“高优先级”是 0，“低优先级”是 255，实际数字与它们的含义成反比：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T17:01:44.603

我的答案有 2 个部分： 1\. 如何正确使用 vxWorks 的任务延迟 2\. TaskDelay 不是解决您问题的正确方法

## 第一部分：

vxWorks 中的 TaskDelay 可能会混淆：

taskDelay(0) – 根本不执行延迟！！！

这是调度程序从 CPU 中删除当前任务的命令。如果这仍然是系统中优先级最高的任务，它将毫无延迟地返回队列的头部。如果调度程序配置为 FIFO 以防相同优先级的任务并且您的任务有 CPU 实时消费者功能要运行，您将使用此命令，可以尝试为相同优先级的其他任务释放 CPU（很好）。

顺便说一句，它与 taskDelay(NO_WAIT) 相同。

TaskDelay(1) – 这将在零 (!!!) 到 1 个系统滴答之间的某个时间延迟调用任务。vxWorks 中的延迟在一轮系统滴答声中完成。

TaskDelay(2) – 有时在 1 个系统滴答到 2 个系统滴答之间。

3 ……（明白了……）

TaksDelay(-1) (AKA taskDelay(WAIT_FOREVER)) – 将永远延迟任务（不推荐）。

## 第二部分：

使用 taskDelay 启用低优先级任务可能是一个错误的想法。您没有提供所有问题信息，但请注意延迟高优先级任务并不能确保您的低优先级任务将运行（无论您将编写的睡眠时间）。高优先级和低优先级任务中的其他最高优先级任务可能会在所有“睡眠时间”中运行。vxWorks 中有几种同步方法，如二进制信号量、更改任务优先级、信号……

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T02:30:21.490

> > 这正是我不明白当高优先级任务运行时低优先级任务将如何获得一些 CPU 时间的一点？

高优先级任务将继续运行，直到它被阻塞。O一旦它被阻塞，准备运行的低优先级任务将运行。

# php - 在 phpinfo() 报告的位置找不到 php.ini

> ID：14503723
> 
> 赞同：0
> 
> 时间：2013-01-24T14:32:07.400
> 
> 标签：php, ubuntu, apache2, rackspace-cloud, phpinfo

我们在工作中使用非托管 Rackspace 云服务器。它运行的是 Ubuntu 11.10。我想安装 gearman 库和扩展，所以我需要找到当前加载的`php.ini`文件。运行`phpinfo()`，它说文件在`/etc/php.ini`. 但是，当我在终端中转到此目录时，没有文件。

这里发生了什么，我该如何开始解决这个问题？

**更新**：我也刚刚`php --version`在终端中运行，它返回 phpinfo() 显示的错误版本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:46:49.217

It sounds like the webserver is running the site in a `chroot` environment, so that what is reported as `/etc/` by the webserver isn't the same `/etc/` that is used the machine as a whole.

As for the `php --version` reporting a different version, that likely means you have two separate versions of PHP installed. The web server is configured to use one (possibly again installed inside the `chroot` environment), and the machine as a whole is running an entirely different copy outside of the web server.

Read more about chroot here: [http://en.wikipedia.org/wiki/Chroot](http://en.wikipedia.org/wiki/Chroot)

# image - matplotlib.pyplot.imsave 后端

> ID：14503725
> 
> 赞同：1
> 
> 时间：2013-01-24T14:32:18.527
> 
> 标签：image, numpy, matplotlib, scipy, backend

我正在使用 matplotlib.pyplot 在 Spyder 中工作，并希望将 numpy 数组保存到图像中。imsave() 的文档说，我可以保存的格式取决于后端。那么后端到底是什么？我似乎能够保存 .tiff 图像，但我希望它们保存为 8 位 tiff 而不是 RGB-Tiff。有什么想法可以改变吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:25:21.140

如果您尝试将数组保存为 mat 的 tiff （没有轴标记等），则最好使用[PIL](http://www.pythonware.com/products/pil/)。

（这假设您正在使用`ipython --pylab`，因此`rand`已定义）

写：

```
import PIL.Image as Image
im = Image.new('L',(100,100))
im.putdata(np.floor(rand(100,100) * 256).astype('uint8').ravel())
im.save('test.tif') 
```

重要的`ravel()`是，`putdata`需要一个序列（即一维）而不是数组。

读 ：

```
im2 = Image.open('test.tif')
figure()
imshow(im2) 
```

和输出文件：

```
$ tiffinfo test.tif 
TIFF Directory at offset 0x8 (8)
  Image Width: 100 Image Length: 100
  Bits/Sample: 8
  Compression Scheme: None
  Photometric Interpretation: min-is-black
  Rows/Strip: 100
  Planar Configuration: single image plane 
```

# mysql - SQL 强制一列对于共享相同外键的每一行都是唯一的

> ID：14503726
> 
> 赞同：1
> 
> 时间：2013-01-24T14:32:24.857
> 
> 标签：mysql, sql, foreign-keys, unique-constraint

只是想知道这是否可以由数据库强制执行...

我有一个具有外键的表，而另一列需要在外键相同的行中是唯一的。只要外键不同，就允许重复条目。

有没有办法做到这一点？我似乎无法找到一种方法来设置基于某些条件而不是应用于整个表的唯一约束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:34:42.167

您可以在 MySQL 中的两列上添加唯一约束：

```
alter table add unique index table(fk, othercolumn) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:34:51.307

`UNIQUE`您也可以在两列上创建约束。

```
ALTER TABLE myTableName 
      ADD CONSTRAINT tb_UQ UNIQUE (FKColumn, OtherColumn) 
```

**更新 1**

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/e3039/1)

# android - 如何在特定时间段内显示敬酒？

> ID：14503727
> 
> 赞同：23
> 
> 时间：2013-01-24T14:32:25.987
> 
> 标签：android, toast, android-toast

这是我必须显示`Toast`500 毫秒的方式。不过，它显示的时间超过一秒钟。

```
Toast.makeText(LiveChat.this, "Typing", 500).show(); 
```

我怎样才能`Toast`只显示 500 毫秒？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-01-24T14:36:16.907

这是无法做到的。要显示长度小于 的吐司`Toast.LENGTH_SHORT`，您必须在所需时间后取消它。就像是：

```
final Toast toast = Toast.makeText(getApplicationContext(), "This message will disappear in half a second", Toast.LENGTH_SHORT);
    toast.show();

    Handler handler = new Handler();
        handler.postDelayed(new Runnable() {
           @Override
           public void run() {
               toast.cancel(); 
           }
    }, 500); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-22T14:08:38.880

添加到@Senth 的答案中，如果您不想在多次调用 showToast 方法时累积时间，使用相同的消息：

```
private Toast mToastToShow = null;
String messageBeingDisplayed = "";

/**
 * Show Toast message for a specific duration, does not show again if the message is same
 *
 * @param message     The Message to display in toast
 * @param timeInMSecs Time in ms to show the toast
 */
public void showToast(String message, int timeInMSecs) {
    if (mToastToShow != null && message.equals(messageBeingDisplayed)) {
        Log.d("DEBUG", "Not Showing another Toast, Already Displaying");
        return;
    } else {
        Log.d("DEBUG", "Displaying Toast");
    }
    messageBeingDisplayed = message;
    // Set the toast and duration
    int toastDurationInMilliSeconds = timeInMSecs;
    mToastToShow = Toast.makeText(this, message, Toast.LENGTH_LONG);

    // Set the countdown to display the toast
    CountDownTimer toastCountDown;
    toastCountDown = new CountDownTimer(toastDurationInMilliSeconds, timeInMSecs /*Tick duration*/) {
        public void onTick(long millisUntilFinished) {
            if (mToastToShow != null) {
                mToastToShow.show();
            }
        }

        public void onFinish() {
            if (mToastToShow != null) {
                mToastToShow.cancel();
            }
            // Making the Toast null again
            mToastToShow = null;
            // Emptying the message to compare if its the same message being displayed or not
            messageBeingDisplayed = "";
        }
    };

    // Show the toast and starts the countdown
    mToastToShow.show();
    toastCountDown.start();
} 
```

您现在可以像这样显示 toast 500 毫秒：

```
showToast("Not Allowed", 500); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-30T16:38:36.817

我找到[了这个答案](http://blog.cindypotvin.com/toast-specific-duration-android/)。虽然有点复杂，但它也允许您创建比 Toast.LENGTH_LONG 更长的 toast。您可能必须将滴答持续时间从 1000 毫秒更改为 500 毫秒。

```
private Toast mToastToShow;
public void showToast(View view) {
   // Set the toast and duration
   int toastDurationInMilliSeconds = 10000;
   mToastToShow = Toast.makeText(this, "Hello world, I am a toast.", Toast.LENGTH_LONG);

   // Set the countdown to display the toast
   CountDownTimer toastCountDown;
   toastCountDown = new CountDownTimer(toastDurationInMilliSeconds, 1000 /*Tick duration*/) {
      public void onTick(long millisUntilFinished) {
         mToastToShow.show();
      }
      public void onFinish() {
         mToastToShow.cancel();
         }
   };

   // Show the toast and starts the countdown
   mToastToShow.show();
   toastCountDown.start();
} 
```

它是这样工作的：倒计时的通知时间比根据标志显示 toast 的持续时间短，因此如果倒计时没有完成，可以再次显示 toast。如果 toast 仍在屏幕上时再次显示，它将在整个持续时间内保持在那里而不会闪烁。倒计时结束后，即使显示持续时间未结束，也会取消 toast 以隐藏它。

即使 toast 必须显示的持续时间短于默认持续时间，这仍然有效：倒计时完成时，显示的第一个 toast 将简单地被取消。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T14:38:59.350

不能用标准的 Toasts 做你要求的事情。也许您应该考虑集成一个 3rd 方库，它可以为您提供更好的 Toast 选项（名为 Crouton）。我自己没有用过，但人们似乎喜欢它。

您无法在标准操作系统中控制 Toast 的长度。

Crouton 链接： [https ://github.com/keyboardsurfer/Crouton](https://github.com/keyboardsurfer/Crouton)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-17T12:39:55.653

这个对我来说很好用。

```
final Toast mToastToShow;
            int toastDurationInMilliSeconds = 10000;
            mToastToShow =  Toast.makeText(getApplicationContext(), "Snapshot Saved Successfully.",Toast.LENGTH_LONG);

            // Set the countdown to display the toast
            CountDownTimer toastCountDown;
            toastCountDown = new CountDownTimer(toastDurationInMilliSeconds, 1000 /*Tick duration*/) {
                public void onTick(long millisUntilFinished) {
                    mToastToShow.show();
                }
                public void onFinish() {
                    mToastToShow.cancel();
                }
            };

            // Show the toast and starts the countdown
            mToastToShow.show();
            toastCountDown.start(); 
```

倒计时用于显示特定持续时间的 toast 消息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-24T14:35:04.770

我不相信这可以做到，你只能使用`Toast.LENGTH_LONG`或者`Toast.LENTH_SHORT`你不能定义你知道的速度。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-24T14:39:12.183

这是做不到的。`Toast.LENGTH_SHORT`和的值`Toast.LENGTH_LONG`是 0 和 1。这意味着它们被视为标志而不是实际持续时间，因此我认为不可能将持续时间设置为这些值以外的任何值。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-29T10:24:54.273

接受的答案是正确的，但在我的情况下，可以注意到吐司闪烁（显示和隐藏）..

我有一个解决方案，其中 Toast 不闪烁，您也可以自定义 Toast。

让我们开始，

1) 创建一个名为 LongToast 的类。

```
class LongToast {

private LongToast() {}

static void makeLongToast(Context context,String text, long durationInMillis) 
{

 final Toast toastMessage = new Toast(context);

 //Creating TextView.
 TextView textView = new TextView(context);

 //Setting up Text Color.
 textView.setTextColor(Color.parseColor("#fafafa"));

 //Setting up Text Size.
 textView.setTextSize(17);

 //Setting up Toast Message Text.
 textView.setText(text);

 //Add padding to Toast message.
 textView.setPadding(20, 20, 20, 23);

 //Add Gravity TextView.
 textView.setGravity(Gravity.CENTER);

 //Adding TextView into Toast.
 toastMessage.setView(textView);

 //Access toast message as View.
 View toastView = toastMessage.getView();

 //Set Custom Background on Toast.
 toastView.setBackgroundResource(R.drawable.test);

 new CountDownTimer(durationInMillis, 1000)
  {
   public void onTick(long millisUntilFinished)
   {
    toastMessage.show();
   }
  public void onFinish()
   {
    toastMessage.cancel();
   }

  }.start();
 }
} 
```

2) 创建一个可绘制的 xml 用于自定义 Toast。

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item>
 <shape android:shape="rectangle">
 <solid android:color="#009973"/>
 <corners android:radius="20dp" />
 <stroke
  android:width="4dp"
  android:color="#01ffc0"
 />
</shape> 
```

您可以根据需要自定义吐司。

3) 最后调用 Toast。

```
LongToast.makeLongToast(this,"whatever you want",10000);//duration in seconds 
```

参考：[点击这里查看](https://www.android-examples.com/set-show-toast-message-to-a-specific-time-in-android/)

谢谢！！。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-05-22T07:27:37.307

我在机器人端创建了一个类 ToastMessage。

```
 public class ToastMessage: IToast
        {
            public void LongAlert(string message)
            {
                Toast toast = Toast.MakeText(Android.App.Application.Context, message, ToastLength.Short);
                toast.Show();
                Device.StartTimer(TimeSpan.FromSeconds(0.5), () =>
                {               
                   toast.Cancel();
                    return false;
                });
            }
        } 
```

我已经创建了接口 IToast

```
 public  interface IToast
    {
        void LongAlert(string message);
    } 
```

通过依赖服务调用

```
 DependencyService.Get<IToast>().LongAlert("Right Answer"); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-12-06T07:28:05.967

我尝试了不同的方法，这种方法对我有用

```
 final Toast mytoast = Toast.makeText(getApplicationContext(), jsonObject.getString("response_message"), Toast.LENGTH_SHORT);
 mytoast.show();

                        Handler handler = new Handler();
                        handler.postDelayed(new Runnable() {
                            @Override
                            public void run() {
                                mytoast.cancel();
                            }
                        }, 5000);// 5 sec 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-08-26T10:29:50.323

先试试看。这会将 toast 设置为以毫秒为单位的特定时间段：

```
public void toast(int millisec, String msg) {
    Handler handler = null;
    final Toast[] toasts = new Toast[1];
    for(int i = 0; i < millisec; i+=2000) {
        toasts[0] = Toast.makeText(this, msg, Toast.LENGTH_SHORT);
        toasts[0].show();
        if(handler == null) {
            handler = new Handler();
            handler.postDelayed(new Runnable() {
                @Override
                public void run() {
                    toasts[0].cancel();
                }
            }, millisec);
        }
    }
} 
```

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2013-01-24T14:35:48.560

```
Toast.makeText(LiveChar.this,"Typing",Toast.LENGTH_SHORT); 
```

这是唯一可以的方法。。

# android - 当我将文本从活动/片段发送到活动/片段时出现错误

> ID：14503728
> 
> 赞同：0
> 
> 时间：2013-01-24T14:32:26.077
> 
> 标签：android, android-fragments, android-fragmentactivity

我有一个小问题，即将信息从一个片段发送到另一个片段。我创建了一个带有滑动导航的项目。在一个片段中，我只有一个按钮。在另一个片段中只有一个文本视图。当我单击fragment1 中的按钮时，我想向fragment2 发送文本。我用接口尝试过，但我不知道我做错了什么。

这是当前的代码。

接口：

```
public interface ActivityCommunicator {

    public void passDataToActivity(String someValue);

}

public interface FragmentCommunicator {

    public void passDataToFragment(String someValue);

} 
```

`MainActivity`: _

```
public class MainActivity extends FragmentActivity implements ActivityCommunicator {

public FragmentCommunicator fragmentCommunicator;
SectionsPagerAdapter mSectionsPagerAdapter;
Button btn;
ViewPager mViewPager;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    btn = (Button)findViewById(R.id.button1);
    mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

    // Set up the ViewPager with the sections adapter.
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);
}

private void SendText(View v) {

    if(fragmentCommunicator != null) {

        fragmentCommunicator.passDataToFragment("Hi from FragmentActivity");
    }
}

@Override
public void passDataToActivity(String someValue) {
    // TODO Auto-generated method stub
}
} 
```

`Fragment1`：

```
public class Fragment1 extends Fragment {

Button btn;

public Fragment1(int position) {
    // TODO Auto-generated constructor stub
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    View v = inflater.inflate(R.layout.fragmen1, container, false);
    btn = (Button)v.findViewById(R.id.button1);
    return v;
}
} 
```

`Fragment2`：

```
public class Fragment2 extends Fragment implements FragmentCommunicator {

TextView tv;
private ActivityCommunicator activityCommunicator;
private String activityAssignedValue ="";

public Fragment2(int position) {
    // TODO Auto-generated constructor stub
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    View v = inflater.inflate(R.layout.fragment2, container, false);
    tv = (TextView)v.findViewById(R.id.textView1);
    return v;
}

@Override
public void passDataToFragment(String someValue) {
    activityAssignedValue = someValue;
    tv.setText(someValue); 
}
} 
```

`fragment1.xml`：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:onClick="SendText"
    android:text="Button" />

</LinearLayout> 
```

`fragment2.xml`：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge" />

</LinearLayout> 
```

`main.xml`：

```
<android.support.v4.view.ViewPager xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/pager"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<!--
This title strip will display the currently visible page title, as well as the page
titles for adjacent pages.
-->

<android.support.v4.view.PagerTitleStrip
    android:id="@+id/pager_title_strip"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="top"
    android:background="#33b5e5"
    android:paddingBottom="4dp"
    android:paddingTop="4dp"
    android:textColor="#fff" />

</android.support.v4.view.ViewPager> 
```

logcat 错误信息：

```
01-24 14:13:41.750: W/dalvikvm(1576): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
01-24 14:13:41.760: E/AndroidRuntime(1576): FATAL EXCEPTION: main
01-24 14:13:41.760: E/AndroidRuntime(1576): java.lang.IllegalStateException: Could not find a method SendText(View) in the activity class com.example.zz.MainActivity for onClick handler on view class android.widget.Button with id 'button1'
01-24 14:13:41.760: E/AndroidRuntime(1576):     at android.view.View$1.onClick(View.java:3578)
01-24 14:13:41.760: E/AndroidRuntime(1576):     at android.view.View.performClick(View.java:4084)
01-24 14:13:41.760: E/AndroidRuntime(1576):     at  android.view.View$PerformClick.run(View.java:16966)
01-24 14:13:41.760: E/AndroidRuntime(1576):     at android.os.Handler.handleCallback(Handler.java:615)
01-24 14:13:41.760: E/AndroidRuntime(1576):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-24 14:13:41.760: E/AndroidRuntime(1576):     at android.os.Looper.loop(Looper.java:137)
01-24 14:13:41.760: E/AndroidRuntime(1576):     at android.app.ActivityThread.main(ActivityThread.java:4745)
01-24 14:13:41.760: E/AndroidRuntime(1576):     at java.lang.reflect.Method.invokeNative(Native Method)
01-24 14:13:41.760: E/AndroidRuntime(1576):     at java.lang.reflect.Method.invoke(Method.java:511)
01-24 14:13:41.760: E/AndroidRuntime(1576):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-24 14:13:41.760: E/AndroidRuntime(1576):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-24 14:13:41.760: E/AndroidRuntime(1576):     at dalvik.system.NativeStart.main(Native Method)
01-24 14:13:41.760: E/AndroidRuntime(1576): Caused by: java.lang.NoSuchMethodException: SendText [class android.view.View]
01-24 14:13:41.760: E/AndroidRuntime(1576):     at java.lang.Class.getConstructorOrMethod(Class.java:460)
01-24 14:13:41.760: E/AndroidRuntime(1576):     at java.lang.Class.getMethod(Class.java:915)
01-24 14:13:41.760: E/AndroidRuntime(1576):     at android.view.View$1.onClick(View.java:3571)
01-24 14:13:41.760: E/AndroidRuntime(1576):     ... 11 more 
```

有什么建议可以解决这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:36:33.453

我们可以看到你`onClickListener`的按钮吗？似乎它正在调用您的**私有**方法`sendText``MainActivity`

编辑：你是在你的 XML 文件中做的，我的错 :D 但我仍然认为该`SendText`方法是私有的这一事实可能是问题所在。

# powershell - 在 PowerShell 中管道到 ForEach-Object

> ID：14503733
> 
> 赞同：4
> 
> 时间：2013-01-24T14:32:44.183
> 
> 标签：powershell, foreach, pipe

我试图让它通过一个目录递归，并且只包含`.pdf`文件。然后返回最近修改的 3 个`.pdf`，并将它们的每个（完整）文件名粘贴到它们各自的变量中。

到目前为止，这是我的代码-

```
$Directory="C:\PDFs"
Get-ChildItem -path $Directory -recurse -include *.pdf | sort-object -Property LastWriteTime -Descending | select-object -First 3 | ForEach-Object 
    {
        Write-Host -FilePath $_.fullname
    } 
```

但是，当我运行脚本时，它要求我为脚本的 ForEach 部分提供参数 - 这让我得出结论，要么命令没有按照应有的方式进行管道传输，要么命令没有使用命令适当地。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T14:40:32.293

删除`enter`后面的`foreach-object`：

```
$Directory="C:\PDFs"
Get-ChildItem -path $Directory -recurse -include *.pdf | sort-object -Property LastWriteTime -Descending | select-object -First 3 | ForEach-Object {
        Write-Host -FilePath $_.fullname   } 
```

您的代码中有一个错字：

```
**    Get-ChildItem =path  ** 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T14:40:35.260

这可能是因为您的 ForEach-Object 脚本块位于新行上。在 PowerShell 中，您需要使用反引号字符 (`) 来告诉 PowerShell 命令继续到下一行。尝试这个：

```
$Directory="C:\PDFs"
    Get-ChildItem -path $Directory -recurse -include *.pdf | sort-object -Property LastWriteTime -Descending | select-object -First 3 | ForEach-Object `
    {
        Write-Host -FilePath $_.fullname
    } 
```

# facebook - 删除App并重新授权后，不再询问电子邮件权限

> ID：14503741
> 
> 赞同：1
> 
> 时间：2013-01-24T14:32:56.120
> 
> 标签：facebook, email, login

我正在使用带有 {scope:'email'} 参数的 FB.login。

当用户第一次登录我的应用程序时，登录对话框会询问他“他是否授权连接到我的应用程序”，然后询问他“电子邮件许可”。出色地。

但是，如果用户从他的 Facebook 帐户中删除我的应用程序，当他再次登录我的应用程序时，登录对话框会要求他授权，但从不要求他提供电子邮件许可？！即使删除了应用程序，这些权限是否始终存储？

感谢您的回答并对我的英语感到抱歉：我是法国人 :)

# java - SWTBotTree 通过正则表达式展开节点

> ID：14503742
> 
> 赞同：-4
> 
> 时间：2013-01-24T14:32:58.547
> 
> 标签：java, regex, swtbot

我想将 SWTBotTree.expandNode (final String nodeText, final boolean recursive) 函数与一个并不总是完全相同的字符串一起使用。字符串的开头相同，但结尾可以不同。我以为可以用reg解决。exp。类似：“字符串的常量部分”+“。*”，但它未被识别为 reg。exp。我该怎么办？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:36:11.660

（有点投机，但希望有帮助。）

如果“字符串的常量部分”包含在正则表达式中具有特殊含义的字符，则很容易出现问题。解决这个问题的方法是使用[`Pattern.quote`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#quote%28java.lang.String%29). 例如：

```
// ^ to anchor the match to the start of the line/string. May not be required.
Pattern pattern = Pattern.compile("^" + Pattern.quote(expectedPrefix) + ".*"); 
```

当然，如果我*必须*使用正则表达式，我只会使用它。否则我只会使用：

```
if (actualText.startsWith(expectedText)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T15:22:26.457

我不确定您到底是如何尝试这样做的，但是如果您正在这样做：

```
swtBotTree.expandNode("constant part of string" + ".*", true); 
```

那么你很可能做错了......

[expandNode](http://eclipse.uib.no/technology/swtbot/archives/2.0.0.204-dev/ganymede/dev-build/apidocs/org/eclipse/swtbot/swt/finder/widgets/SWTBotTree.html)的javadoc没有提到它支持正则表达式......

查看[源代码](https://dev.eclipse.org/sonar/resource/index/378)（只是我在搜索时找到的一些版本），`expandNode`使用了另一种名为`getItem(...)`. 该方法执行类似的操作`if (item.getText().equals(nodeText))`。换句话说，该方法使用字符串相等比较，而不是正则表达式匹配。

在 Java 中，支持正则表达式（查看[Pattern javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)和[Matcher javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html)或[String.matches(...) javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#matches%28java.lang.String%29)），但前提是在实现中使用了该功能。您不能将正则表达式传递给需要普通字符串并期望它进行正则表达式匹配的方法。

**简短的回答：**

Java 有提供正则表达式功能的类，但该`SWTBotTree.expandNode(String, boolean)`方法不支持正则表达式。

**编辑：**

据我了解，没有直接支持`SWTBotTree`进行正则表达式/通配符查找。

如果您非常想这样做，可以尝试以下操作：

```
 for(SWTBotTreeItem item : swtBotTree.getAllItems()){
     if(item.getText().matches("some regex goes here")){
         item.expand();
     }
 } 
```

# php - Gravatar 没有显示在电子邮件中

> ID：14503744
> 
> 赞同：0
> 
> 时间：2013-01-24T14:33:05.403
> 
> 标签：php, gravatar

我一直试图让 gravatar 在我定制的 php 网站上工作。

我已经准确地创建了 gravatar 网站上要求的内容，但是在我的网站上实现它时，gravatar 只显示默认图像。

它显然链接到他们的网站，因为它带回了默认图像，而不是链接到给定电子邮件地址的 gravatar。

我已经建立了一个 gravatar 多年，它可以在主要博客上使用，但是当我在我的网站上进行测试时，它不起作用。

实施过程为：

```
<img src="https://secure.gravatar.com/avatar/<?php echo md5( strtolower( trim( $authorsemail ) ) ); ?>?s=60&d=mm" alt="<?php echo $authorsname ; ?>" class="gravatarimage" /> 
```

这`$authorsname`只是来自评论作者的电子邮件，如图所示。

我已经回应了`$authorsname`，这是正确的。

任何想法为什么这不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:56:35.500

当我替换以下内容时：

```
<img src="https://secure.gravatar.com/avatar/<?php echo md5( strtolower( trim( $authorsemail ) ) ); ?>?s=60&d=mm" alt="<?php echo $authorsname ; ?>" class="gravatarimage" /> 
```

与下面的一个：

```
<img src="https://secure.gravatar.com/avatar/<?php echo md5( strtolower( trim( $authorsemail ) ) ); ?>?s=60&d=identicon" alt="<?php echo $authorsname ; ?>" class="gravatarimage" /> 
```

...有用。`dd`-> `identicon`。这意味着您没有现有的 gravatar，因此将`identicon`用作 的值`d`，您允许出现一些随机的几何图案。

[http://ma.tt/2008/04/identicons-from-gravatar/](http://ma.tt/2008/04/identicons-from-gravatar/)

# javascript - 如何使用声纳 javascript 插件检测全局变量

> ID：14503745
> 
> 赞同：1
> 
> 时间：2013-01-24T14:33:09.867
> 
> 标签：javascript, sonarqube

我们正在尝试通过使用声纳分析来检测我们的 js 代码中全局变量的使用情况。似乎这条规则存在于旧版本的 javascript 插件中，但现在不再存在（我们使用的是插件的 1.2 版）。我们做错了什么吗？或者有没有办法使用 XPath 来模仿这个规则？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:29:17.800

以前版本的 Sonar Javascript 插件基于 JSLint，并且 JSLint 具有对全局变量的检查。然而，在最新版本的 Sonar Javascript 插件中，我们移除了 JSLint 并实现了我们自己的解析器和规则。这就是为什么您现在不会因此而受到侵犯。

目前，我们尚未实施此规则，但它在我们的积压工作中（请参阅[http://jira.codehaus.org/browse/SONARPLUGINS-1821](http://jira.codehaus.org/browse/SONARPLUGINS-1821)）。随意投票将其推到积压的顶部！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T23:33:45.573

我不熟悉声纳，但你可以使用这个[漂亮的小书签](https://github.com/kangax/detect-global)来检测全局；或者您可以使用源代码将结果用于您的测试或 CI 框架等。

# gradient - 一侧的 CSS3 盒子阴影

> ID：14503746
> 
> 赞同：1
> 
> 时间：2013-01-24T14:33:11.037
> 
> 标签：gradient, css

是否可以在 CSS 中实现如下阴影效果？

![图像阴影](../Images/9d262ce27625355a82911e6f1b942833.png)

它需要低于图像/ div。

到目前为止我最接近的是使用

```
-webkit-box-shadow: 0px 20px 15px -10px #999;
-moz-box-shadow: 0px 20px 15px -10px #999;
box-shadow: 0px 20px 15px -10px #999; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T14:38:13.973

这本身可能不是阴影，但我只是`background`通过[Ultimate CSS Gradient Generator 生成它](http://www.colorzilla.com/gradient-editor/)

```
background: -moz-linear-gradient(left,  rgba(0,0,0,0) 0%, rgba(0,0,0,0.65) 48%, rgba(0,0,0,0) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, right top, color-stop(0%,rgba(0,0,0,0)), color-stop(48%,rgba(0,0,0,0.65)), color-stop(100%,rgba(0,0,0,0))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(left,  rgba(0,0,0,0) 0%,rgba(0,0,0,0.65) 48%,rgba(0,0,0,0) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(left,  rgba(0,0,0,0) 0%,rgba(0,0,0,0.65) 48%,rgba(0,0,0,0) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(left,  rgba(0,0,0,0) 0%,rgba(0,0,0,0.65) 48%,rgba(0,0,0,0) 100%); /* IE10+ */
background: linear-gradient(to right,  rgba(0,0,0,0) 0%,rgba(0,0,0,0.65) 48%,rgba(0,0,0,0) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00000000', endColorstr='#00000000',GradientType=1 ); /* IE6-9 */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:56:06.000

一个元素上可以有多个盒子阴影，您所要做的就是用逗号分隔每个盒子阴影。例如：

```
box-shadow: 5px 5px 5px grey, -5px 5px 5px blue, 5px -5px 5px orange; 
```

这个盒子阴影会产生3个阴影，一个在右上角，一个灰色，一个在左下角，一个蓝色，一个在右下角，一个橙色。

这是带有演示的[jsfiddle](http://jsfiddle.net/nbatothemax/8sfcX/3/)。

您可以尝试设置，但要实现这些曲线非常困难，使用图像可能更容易。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-24T20:24:40.040

使用此代码`box-shadow: 0 45px 50px -50px #000000;`

# grails - GRAILS：将参数发送到 renderEditor.template

> ID：14503747
> 
> 赞同：1
> 
> 时间：2013-01-24T14:33:11.707
> 
> 标签：grails

我需要向文件renderEditor.template 发送一个参数（在安装“grails install-templates”之后），但我不知道如何。谁能帮我？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T14:53:19.800

可用的绑定变量在[DefaultGrailsTemplateGenerator](https://github.com/grails-plugins/grails-scaffolding/blob/master/src/groovy/org/codehaus/groovy/grails/scaffolding/DefaultGrailsTemplateGenerator.groovy)`renderEditor.template`中是固定的

```
 def binding = [pluginManager: pluginManager,
                   property: property,
                   domainClass: domainClass,
                   cp: cp,
                   domainInstance:getPropertyName(domainClass)] 
```

`domainClass`是`GrailsDomainClass`,`property`是`GrailsDomainClassProperty`传递给`renderEditor(p)`脚手架模板中调用的 ,`cp`是对应的`ConstrainedProperty`. 您也许可以从其中之一中提取您需要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-13T16:53:34.540

对于其他通过谷歌遇到同样问题的人（和我一样）

我已经设法按照 Ian Roberts 建议的方式这样做了，但是您不需要为模板生成器创建新的实现。您只需为**org.codehaus.groovy.grails.commons.GrailsDomainClassProperty创建一个代理实现**

在 _form.gsp 中，我刚刚创建了带有添加数据的新属性：

```
p = new HgfGrailsDomainClassProperty(p, prefix, domainClass)
if (display) { %>
<hgf:ifAllowedOnField action="show" field="${p.name}">
<hgf:ifReasonToShow reasonElement="${p.name}" bean="\${${propertyName}}">
<div class="fieldcontain \${hasErrors(bean: ${propertyName}, field: '${prefix}${p.name}', 'error')} ${required ? 'required' : ''} ${(cp?.metaConstraints?.hiddenField)?'hiddenProperty':''}">
    <label for="${prefix}${p.name}">
        <g:message code="${domainClass.propertyName}.${prefix}${p.name}.label" default="${p.naturalName}" />
        <% if (required) { %><span class="required-indicator">*</span><% } %>
    </label>
    ${renderEditor(p)}
... 
```

实现可能如下所示：

```
package sk.hoppo.hgf;

import org.codehaus.groovy.grails.commons.GrailsDomainClass
import org.codehaus.groovy.grails.commons.GrailsDomainClassProperty

public class HgfGrailsDomainClassProperty implements GrailsDomainClassProperty {

private final String domainSuffix = "Instance";
private GrailsDomainClassProperty property;
String prefix;
String domainInstance;

public HgfGrailsDomainClassProperty(GrailsDomainClassProperty property, String prefix, GrailsDomainClass parentDomainClass) {
    super();
    this.property = property;
    this.prefix = prefix;
    domainInstance = getPropertyName(parentDomainClass);
}

private String getPropertyName(GrailsDomainClass domainClass) {
    return "${domainClass.propertyName}${domainSuffix}";
}

@Override
public int getFetchMode() {
    return property.getFetchMode();
}

@Override
public String getName() {
    return property.getName();
}
... 
```

在 renderEditor.template 中，您只需访问发送数据：

```
sb << '<hgf:securedField'
sb << ' name="' << property.prefix << property.name  << '"'
sb << ' field="' << property.prefix << property.name  << '"' 
```

顺便提一句。有了这个，我已经制作了合成（嵌入）以正确使用我的自定义渲染编辑器

# python - 如何编写与 Python 2 和 Python 3 兼容的异常重新引发代码？

> ID：14503751
> 
> 赞同：24
> 
> 时间：2013-01-24T14:33:24.900
> 
> 标签：python, python-3.x, python-2.x

我正在尝试使我的 WSGI 服务器实现与 Python 2 和 Python 3 兼容。我有以下代码：

```
def start_response(status, response_headers, exc_info = None):
    if exc_info:
        try:
            if headers_sent:
                # Re-raise original exception if headers sent.
                raise exc_info[0], exc_info[1], exc_info[2]
        finally:
            # Avoid dangling circular ref.
            exc_info = None
    elif headers_set:
        raise AssertionError("Headers already set!")

    headers_set[:] = [status, response_headers]
    return write 
```

...相关部分是：

```
# Re-raise original exception if headers sent.
raise exc_info[0], exc_info[1], exc_info[2] 
```

Python 3 不再支持该语法，因此必须将其翻译为：

```
raise exc_info[0].with_traceback(exc_info[1], exc_info[2]) 
```

问题：Python 2 语法在 Python 3 中生成解析错误。如何编写可以被 Python 2 和 Python 3 解析的代码？我尝试了以下方法，但这不起作用：

```
if sys.version_info[0] >= 3:
    raise exc_info[0].with_traceback(exc_info[1], exc_info[2])
else:
    eval("raise exc_info[0], exc_info[1], exc_info[2]; 1", None, { 'exc_info': exc_info }) 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-01-24T15:38:26.990

你能用[`six`](https://pypi.org/project/six/)吗？它的存在就是为了解决这个问题。

```
import six, sys
six.reraise(*sys.exc_info()) 
```

见：[https ://six.readthedocs.io/index.html#six.reraise](https://six.readthedocs.io/index.html#six.reraise)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:42:39.927

You could do something creative.

Have a check at the start of your code - your constructor or whatever, check what version of python you are using, since your normal version checker is not working, try this instead:

```
try:
  eval('a python 3 expression') # something that only works in python3+
  python_version = 3
except:
  python_version = 2 
```

Then the rest of your code can easily just reference this to know what to use.

As for the parse errors, you can use exec in a function, like so:

```
def what_to_run():
    if python_version = 3:
        return 'raise exc_info[0].with_traceback(exc_info[1], exc_info[2])'
    else:
        return 'raise exc_info[0], exc_info[1], exc_info[2]' 
```

In your function you would write this:

```
def start_response(status, response_headers, exc_info = None):
    if exc_info:
        try:
            if headers_sent:
                # Re-raise original exception if headers sent.
                exec(what_to_run())
        finally:
            # Avoid dangling circular ref.
            exc_info = None
    elif headers_set:
        raise AssertionError("Headers already set!")

    headers_set[:] = [status, response_headers]
    return write 
```

A bit messy, untested, but it *should* work, at least you understand the idea.

# c++ - 如何在 OpenCV 中将平行四边形图像转换为矩形图像？

> ID：14503755
> 
> 赞同：1
> 
> 时间：2013-01-24T14:33:45.590
> 
> 标签：c++, opencv

> **可能重复：**
> [执行 cv::warpPerspective 以在一组 cv::Point 上进行假歪斜](https://stackoverflow.com/questions/7838487/executing-cvwarpperspective-for-a-fake-deskewing-on-a-set-of-cvpoint)

我正在使用 OpenCV。我想将具有平行四边形的图像转换为矩形图像。请告诉我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:39:05.017

查看有关仿射变换的 OpenCV 文档。那里有例子：

[http://opencv.willowgarage.com/documentation/cpp/geometric_image_transformations.html](http://opencv.willowgarage.com/documentation/cpp/geometric_image_transformations.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:51:57.593

您想要*剪切*图像（或其中的一部分）

为此，您可以使用带有[warpAffine 函数的仿射变换](http://opencv.willowgarage.com/documentation/cpp/geometric_image_transformations.html#cv-warpaffine)

```
 void warpAffine(const Mat& src, Mat& dst, const Mat& M, Size dsize, 
                  int flags=INTER_LINEAR, int borderMode=BORDER_CONSTANT, 
                  const Scalar& borderValue=Scalar()) 
```

并阅读此问答：[在 OpenCV 中执行更改原点的剪切](https://stackoverflow.com/questions/13474706/performing-shear-with-altered-origin-in-opencv)

# c++ - 在小端机器上添加两个大端值

> ID：14503756
> 
> 赞同：2
> 
> 时间：2013-01-24T14:33:48.307
> 
> 标签：c++, endianness, armv7, tegra

我目前面临一个我不知道如何避免它的问题。
我尝试处理可以是大端或小端的数据。这不是一个真正的问题，因为它总是以标头开头，因此我可以检查我必须使用哪种字节序模式，但是在解码值期间，有一些我不知道如何为大字节序数据实现的操作。
代码在小端（或以小端模式运行）的 nVidia Tegra（基于 ARMv7 架构的 Cortex-A9）上运行，但有时我会得到大端数据。
对数据的大多数操作并不是真正的问题，但我不知道如何正确添加..

```
Example:    D5 1B EE 96    |     96 EE 1B D5
        +   AC 84 F4 D5    | +   D5 F4 84 AC
        = 1 81 A0 E3 6B    | = 1 6C E2 A0 81 
```

如您所见，大多数字节在结果中已经是正确的，但有些不是。它们与预期结果相差 +1 或 -1，因为加法总是从右到左（小端机器）进行的，所以我们将进位（如果有的话）带到左边。
在这个小端机器上的大端加法的情况下，我必须从左到右添加并将进位（如果有的话）带到右边。

我现在的问题是，是否有可能（也许对处理器使用特殊指令？）得到正确的结果？也许我可以对结果进行进一步的操作，以消除这些 +1/-1 差异，这些差异比恢复操作数和结果“更便宜”？

最好的问候，托拜厄斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T14:39:22.840

最合乎逻辑的方法是简单地将数字转换为正确的字节顺序，然后执行计算，然后（如果需要）再次转换回来。

您当然可以使用循环来进行逐字节的向后计算并处理进位 - 但它更复杂，而且我很确定它也不会更快，因为有更多的条件和处理器非常擅长“字节交换”。

您应该能够使用`ntohl`和`htons`网络功能来转换数字。

像这样的东西：

```
int add_big_endian(int a, int b)
{
   x = ntohl(a);
   y = ntohl(b);

   z = x + y;

   return htonl(z);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:42:31.710

You have two options: you can write two sets of code, one for each endianness, and try to keep track of what's going on where, or you can use a single internal representation and convert incoming and outgoing values appropriately. The latter is much simpler.

# c# - RemoteEndPoint 提供错误的 IP 地址

> ID：14503758
> 
> 赞同：1
> 
> 时间：2013-01-24T14:33:51.730
> 
> 标签：c#, sockets, networking, tcp, udp

我们将[Fleck](https://github.com/statianzo/Fleck)用于我们的 Websocket。

当我们在本地测试我们的网络程序时，一切正常。客户端连接的过程是：

*   建立 TCP 连接
*   发送/接收不频繁的 TCP 消息
*   开始向服务器发送/接收 UDP 流

问题出在地理位置较远的直播服务器上，客户端**可以**接收和发送`TCP`消息，**可以**发送UDP消息，但*收不到***UDP** 消息。

 *我们尽可能地调查了它，发现`RemoteEndPoint`服务器上的TCP连接属性有错误的IP地址。它似乎是来自我们 ISP 的 IP 地址。我们使用此 IP 地址尝试将 UDP 消息发送回客户端。由于它的 IP 错误，客户端永远不会收到这些 UDP 消息。

客户端的实际源 IP 地址必须在某处知道，因为 TCP 消息使其恢复正常。我已经浏览了 Fleck 源代码并打印了`RemoteEndPoint`底层代码，`System.Net.Socket`但它一直提供错误的 IP 地址。

有谁知道出了什么问题以及我们如何公开客户端的实际 IP 地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:15:52.963

The most likely reason is that your client does not have a public IP address, but a private address behind Network Address Translation (a very common setup). A common private addresses are of the form 10.X.X.X or 192.168.X.X.

NAT device replaces private address in a packet from your client with its IP address, which is public. For the outside world it seems that the traffic originates from the NAT device. The main advantage of NAT is that it allows many clients to use a single public IP address (IP addresses are sparse). But NAT introduces a problem: an incoming packet needs to be routed to a correct client, but it does not have a client IP address. Some other strategy needs to be used to recognize to which client a packet should be routed and such routing is not always possible.

For example, the most well known limitation of NAT is that you can't simply start a listening TCP server behind a NAT and then connect to it from the outside world. The reason is that NAT device has no idea that your server listens on a given port and thus, it has no way to known that TCP SYN packets from the outside world need to be passed to your client. A workaround for this is to explicitly configure the NAT device to route SYN packets directed to a given port to a specific client (port forwarding).

When a client behind a NAT initiates a TCP connection, a NAT device remembers state of the connection (client address, client port, remote address, remote port). Because of this, when a response arrives, the device knows to which client the response should be passed. When the connection is closed, the device discards state information. This is why your client can communicate over TCP.

But UDP is more difficult to handle because it is connectionless and stateless. When the device sees a UDP packet it does now known if a reply is expected and when, so not all NAT devices handle UDP traffic. Although [there is a technique](https://en.wikipedia.org/wiki/UDP_hole_punching) that allows to do it.

To summarize: the problem you are seeing is not C# specific. Setting IP address in packets from your server to the client IP address won't help, because it is most likely a private address that is not routable. To solve the problem you need to use a NAT device that can pass UDP traffic in both directions. But if you are developing a generic client to be used in many setups, you may want to reconsider if UDP is the best option. TCP connection forwarding is a basic feature that all NAT devices support, but some devices may not support UDP.*

# c# - C# 中的 Google Analytic 产品代码

> ID：14503762
> 
> 赞同：0
> 
> 时间：2013-01-24T14:34:07.613
> 
> 标签：c#, google-analytics

我是谷歌分析的新手。我对此进行了一些讨论。我发现在谷歌分析中没有直接的方法来点击 Windows 应用程序。但是我在stackoverflow中找到了一些解决方案。我试过了，但没有为我工作。下面是我正在使用的代码。

`private void analyticsmethod4(string trackingId, string pagename) { Random rnd = new Random();`

 ````
 long timestampFirstRun, timestampLastRun, timestampCurrentRun, numberOfRuns;

        // Get the first run time
        timestampFirstRun = DateTime.Now.Ticks;
        timestampLastRun = DateTime.Now.Ticks - 5;
        timestampCurrentRun = 45;
        numberOfRuns = 2;

        // Some values we need
        string domainHash = "123456789"; // This can be calcualted for your domain online
        int uniqueVisitorId = rnd.Next(100000000, 999999999); // Random
        string source = "Shop";
        string medium = "medium123";
        string sessionNumber = "1";
        string campaignNumber = "1";
        string culture = Thread.CurrentThread.CurrentCulture.Name;
        string screenRes = Screen.PrimaryScreen.Bounds.Width + "x" + Screen.PrimaryScreen.Bounds.Height;

        string statsRequest = "http://www.google-analytics.com/__utm.gif" +
            "?utmwv=4.6.5" +
            "&utmn=" + rnd.Next(100000000, 999999999) +
            //  "&utmhn=hostname.mydomain.com" +
            "&utmcs=-" +
            "&utmsr=" + screenRes +
            "&utmsc=-" +
            "&utmul=" + culture +
            "&utmje=-" +
            "&utmfl=-" +
            "&utmdt=" + pagename + // Here i passed my profile name "MyWindowsApp"
            "&utmhid=1943799692" +
            "&utmr=0" +
            "&utmp=" + pagename +
            "&utmac=" + trackingId + //Tracking id : ie "UA-XXXXXXXX-X"
            "&utmcc=" +
                "__utma%3D" + domainHash + "." + uniqueVisitorId + "." + timestampFirstRun + "." + timestampLastRun + "." + timestampCurrentRun + "." + numberOfRuns +
                "%3B%2B__utmz%3D" + domainHash + "." + timestampCurrentRun + "." + sessionNumber + "." + campaignNumber + ".utmcsr%3D" + source + "%7Cutmccn%3D(" + medium + ")%7Cutmcmd%3D" + medium + "%7Cutmcct%3D%2Fd31AaOM%3B";

        try
        {
            using (var client = new WebClient())
            {
                //byte[] bt = client.DownloadData(statsRequest);
                Stream data = client.OpenRead(statsRequest);
                StreamReader reader = new StreamReader(data);
                string s = reader.ReadToEnd();
                MessageBox.Show(s);
            }

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }

    } 
````  `这个例子也来自这个网站本身。我不知道问题出在哪里。请指导我，我该怎么做。这是我得到“GIF89a”的输出。

谢谢波宾·保罗斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:35:59.870

所以它正在工作。Google Analytics 调用会加载一个微小的 GIF 图像，请求中提供的查询字符串参数会触发 Google Analytics 的所有优点。如果您收到回复，则表明您已在 Google 上成功注册了您的活动。`

# c - 从指针复制地址

> ID：14503766
> 
> 赞同：1
> 
> 时间：2013-01-24T14:34:20.363
> 
> 标签：c, pointers

我有以下代码：

```
 /* Window size in bytes. */
static  uint32_t size = 0;
    /* Window address. */
static  uint32_t address = 0;
    /* Memory Base Address */   
static uint8_t *sharedMemory=NULL;

sharedMemory = memalign(size, size);

void rioShardMemoryWindowGet (uint8_t *baseAddr,uint32_t *memorySize,uint32_t *windowAddress  )
{
    *baseAddr=(int)sharedMemory;
    printf("sharedMemory: #%x",sharedMemory);
    *memorySize=size;
    *windowAddress=address;
}
rioShardMemoryWindowGet(&baseAddr0, &baseSize, &(Addrs.virtualBaseAddr));
printf("baseAddr0 : #%x",baseAddr0); 
```

我不知道为什么 baseAddr0 在第二个 printf 中为 0，而在第一个 sharedMemory 中为 0x500000。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:39:07.297

`rioShardMemoryWindowGet``uint8_t **baseAddrPtr`如果你想修改它应该接受`baseAddr0`。然后你就`*baseAddr = sharedMemory`没有演员表了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:45:10.670

您必须将指向指针的指针作为函数参数传递。只有这样，您才能将值存储在其中。在您的情况下，您尝试将地址存储`sharedMemory`在`baseAddr[0]`位置。

```
/* Window size in bytes. */
static  uint32_t size = 0;
    /* Window address. */
static  uint32_t address = 0;
    /* Memory Base Address */   
static uint8_t *sharedMemory=NULL;

sharedMemory = memalign(size, size);

void rioShardMemoryWindowGet (uint8_t **baseAddr,uint32_t *memorySize,uint32_t *windowAddress  )
{
    *baseAddr=sharedMemory;
    printf("sharedMemory: #%x",sharedMemory);
    *memorySize=size;
    *windowAddress=address;
}
uint8_t *baseAddr0;
rioShardMemoryWindowGet(&baseAddr0, &baseSize, &(Addrs.virtualBaseAddr));
printf("baseAddr0 : #%x",baseAddr0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T15:13:25.130

好的，我想我理解你的问题。

您正在尝试将地址号存储在 baseAddr0 中，对吗？（不确定原因，但这是我唯一想到的）。

0x500000 显示为 0 的原因是因为 uint8_t 没有足够的位来表示地址，因此它“剔除”到只有 1 个字节（因此显示为 0）。

将 baseAddr 更改为 uint32_t，瞧，一切正常。

无论如何，其他海报告诉您使用指针指针的原因是因为您*似乎*在做的事情很奇怪，除非您打算将地址用于特殊的东西，例如显示它或用作偏移量，也许?

ps：您还需要更改此行

```
*baseAddr=(uint32_t)sharedMemory; 
```

编辑：您的代码应如下所示以获得您想要的：

```
 /* Window size in bytes. */
static  uint32_t size = 0;
    /* Window address. */
static  uint32_t address = 0;
    /* Memory Base Address */   
static uint8_t *sharedMemory=NULL;

sharedMemory = memalign(size, size);

void rioShardMemoryWindowGet (uint32_t *baseAddr,uint32_t *memorySize,uint32_t     *windowAddress  )
{
    *baseAddr=(uint32_t)sharedMemory;
    printf("sharedMemory: #%x",sharedMemory);
    *memorySize=size;
    *windowAddress=address;
}
rioShardMemoryWindowGet(&baseAddr0, &baseSize, &(Addrs.virtualBaseAddr));
printf("baseAddr0 : #%x",baseAddr0); 
```

你需要一个 uint32 来存储数字地址的原因是地址是 32 位的，这就是你看到 0 使用 8 位值的原因，因为 0x500000 映射到 0x00 到一个字节

# c# - 列出 Windows Azure Blob 存储容器中的目录

> ID：14503772
> 
> 赞同：16
> 
> 时间：2013-01-24T14:34:38.140
> 
> 标签：c#, azure, directory, containers

我对我的项目有疑问...我需要知道如何列出 Windows Azure blob 存储中的所有文件夹（在字符串列表或其他内容中）...我已经拥有 BlobClient 和与 Azure 存储的连接。

谁能帮我解决这个“问题”？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-24T15:09:38.290

试试这个代码。它利用**Storage Client library 2.0.3**：

```
 CloudStorageAccount storageAccount = CloudStorageAccount.DevelopmentStorageAccount;
        CloudBlobContainer blobContainer = storageAccount.CreateCloudBlobClient().GetContainerReference("wad-control-container");
        string blobPrefix = null;
        bool useFlatBlobListing = false;
        var blobs = blobContainer.ListBlobs(blobPrefix, useFlatBlobListing, BlobListingDetails.None);
        var folders = blobs.Where(b => b as CloudBlobDirectory != null).ToList();
        foreach (var folder in folders)
        {
            Console.WriteLine(folder.Uri);
        } 
```

如果您使用的是**Storage Client Library 1.8（即 2.0 之前的版本）**，请尝试以下代码：

```
 var storageAccount = CloudStorageAccount.DevelopmentStorageAccount;
        cloudBlobClient = storageAccount.CreateCloudBlobClient();
        CloudBlobContainer container = cloudBlobClient.GetContainerReference("wad-control-container");
        IEnumerable<IListBlobItem> blobs = container.ListBlobs(new BlobRequestOptions()
        {
            UseFlatBlobListing = false,
        });
        var folders = blobs.Where(b => b as CloudBlobDirectory != null);

        foreach (var folder in folders)
        {
            Console.WriteLine(folder.Uri);
        } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-24T08:52:08.537

我在我的项目中使用了这个解决方案

```
// Retrieve reference to the container.
CloudBlobContainer container = BlobClient.GetContainerReference(lvContainer.SelectedItems[0].Text);

//Loop over VIRTUAL directories within the container
foreach (IListBlobItem item in container.ListBlobs())
{
      if (item.GetType() == typeof(CloudBlobDirectory))
      {
           CloudBlobDirectory directory = (CloudBlobDirectory)item;
           string[] uri = directory.Uri.ToString().Split('/');
           ListViewItem dir = new ListViewItem();
           dir.Text = uri[uri.Length-2];
           dir.ImageIndex = 0;

           ListViewItem.ListViewSubItem subitem = new ListViewItem.ListViewSubItem();
           subitem.Text = String.Empty; //item.Properties.LastModifiedUtc.ToString();
           dir.SubItems.Add(subitem);

           subitem = new ListViewItem.ListViewSubItem();
           subitem.Text = String.Empty; //item.Properties.Length + " bytes";
           dir.SubItems.Add(subitem);

           lvBlob.Items.Add(dir);
       }
} 
```

在我的情况下，我在 listView 中显示结果，列出大小和日期，使用

```
(item.GetType() == typeof(CloudBlockBlob)) 
```

和

```
(item.GetType() == typeof(CloudPageBlob)) 
```

在同一个foreach中以不同的方式列出每一层的虚拟文件夹，BlockBlobs和PageBlobs。希望这可以帮助。

# maven - 多模块项目的 Maven 阶段顺序？

> ID：14503773
> 
> 赞同：8
> 
> 时间：2013-01-24T14:34:39.457
> 
> 标签：maven, maven-2, multi-module

对不起。我是Maven的菜鸟。

这是我的maven项目目录：

```
project/
    pom.xml
    moduleA/
    moduleB/
        sub-moduleA/
        sub-moduleB/
        sub-moduleC/
    moduleC/ 
```

当然，在每个模块和子模块中，它们都有自己的`pom.xml`. 此外，在此示例中，`moduleB`取决于`moduleA`和`moduleA`取决于`moduleC`. 我知道在 Maven 中它经历了多个阶段，但是它是一次一个阶段进行，还是一次一个模块进行一个。现在，我关心的唯一三个阶段是`compile`、`package`和`install`。

例如：

它是否按**顺序 1**执行：

```
compile moduleC
compile moduleA
compile moduleB
package moduleC
package moduleA
package moduleB
install moduleC
install moduleA
install moduleB 
```

还是按**订单 2**执行此操作：

```
compile moduleC
package moduleC
install moduleC
compile moduleA
package moduleA
install moduleA
compile moduleB
package moduleB
install moduleB 
```

还是它以完全不同的顺序执行，还是我完全不了解 maven？

我正在运行 Maven 2.2.1。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T15:57:19.880

顺序 2：reactor 检测所有项目，构建排序列表以正确顺序（尊重依赖关系）构建项目，然后按照此顺序构建项目。

如果 A 依赖于 B，如果 B 未完全处理，则无法开始构建 A。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:12:09.543

我并不是要刻薄，但您应该让自己熟悉 maven 输出。它确实可以准确地告诉您它在做什么。它会准确地告诉您构建模块的顺序，然后它会准确地告诉您构建每个模块时正在进行的阶段/执行。

例如，这是一个简化的构建报告。首先，它告诉你它的建筑是什么项目。然后，对于每个阶段，都有一个关于正在执行哪个 mojo 的报告。请注意，执行行以三个 --- 开头和结尾（这是 maven 3；在 maven 2 中有所不同）。请注意，它告诉您：

1.  插件的名称，例如`maven-clean-plugin`
2.  插件的版本
3.  正在执行的插件上的目标名称
4.  执行的名称，例如`default-clean`

请注意，作为生命周期阶段的默认绑定的所有执行，即内置执行，都有一个`default-clean`与阶段标识位置类似的名称，以及它是默认值的事实。

```
[INFO] ------------------------------------------------------------------------
[INFO] Building common-utilities 1.0.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.3:clean (default-clean) @ common ---

   SNIP

[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ common ---

   SNIP

[INFO] --- maven-compiler-plugin:2.5.1:compile (default-compile) @ common ---

   SNIP

[INFO] --- maven-resources-plugin:2.5:testResources (default-testResources) @ common --- 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T14:42:57.657

First, I'd suggest to work with Maven 3 rather than 2, migration from the latter to the former is really simple (sometimes you can do it without changing anything) and you will notice a high improvement in performance.

Besides, regarding the build order, you should read a bit about the [Maven Reactor](http://maven.apache.org/guides/mini/guide-multiple-modules.html), *the system* in charge of processing multi-module projects.

# c# - 通过“视图”界面公开对象

> ID：14503776
> 
> 赞同：4
> 
> 时间：2013-01-24T14:34:46.543
> 
> 标签：c#

我一直在尝试找到一种通过“视图”来展示对象的灵活方式。我可能最好通过示例来解释。

我有一个 Entity Framework 实体模型和一个可用于查询它的 Web 服务。我可以自己返回实体类，但这将包括一些我可能不想共享的字段 - 例如 ID，或来自实体模型中任何关联的 *Reference 属性。

我认为我需要的是数据视图，但我并不特别想为每个返回类型编写一个视图包装类。我希望我能够定义一个接口并以某种方式利用它。例如：

```
interface IPersonView
{
     string FirstName { get; }
     string LastName { get; }
} 
```

-

```
// (Web service method)
IPersonView GetPerson(int id)
{
    var personEntity = [...];
    return GetView<IPersonView>(personEntity);
} 
```

但是，为了做这样的事情，我必须让我的实体实现视图接口。我希望有一种更灵活的“鸭式”方法，因为一个对象可能有很多视图，我真的不想必须全部实现它们。

通过反映接口并复制字段和属性，我在构建动态类型方面取得了一些成功，但我无法将其转换回接口类型以便在 Web 服务上获得强类型。

只是寻找一些意见和建议，两者都会受到欢迎。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:39:29.213

您不应该真正将实体直接传递给客户端，它们应该仅用于持久性。您应该引入针对您的 API 想要返回的任何数据量身定制的[DTO/POCO ，例如](https://stackoverflow.com/questions/725348/poco-vs-dto)

```
public class PersonDto
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
}

// public API method
public PersonDto GetPersonApi(int id)
{
    var personEntity = // pull entity from db
    return new PersonDto()
    {
        FirstName = personEntity.FirstName,
        LastName = personEntity.LastName
    };
} 
```

这使您的持久层和公共接口之间保持清晰的分离。您可以使用[AutoMapper](https://github.com/AutoMapper/AutoMapper)之类的工具来完成数据映射方面的工作。只需在全局 asax 中设置一次映射：

```
protected void Application_Start()
{
    Mapper.CreateMap<Person, PersonDto>();
}
...
// public API method
public PersonDto GetPersonApi(int id)
{
    var personEntity = // pull entity from db
    return Mapper.Map<Person, PersonDto>(personEntity);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:40:08.943

我通常会看到使用[AutoMapper](http://AutoMapper.org)或类似工具完成此操作。它使相似类之间的映射变得更加简单。您仍然必须创建`Views`（在 MVC 上下文中将是 a `Model`），但只要您使用相同的字段名称，就会为您处理最繁琐的部分（映射）。

附带说明一下，如果您想*更新*数据，则需要共享 ID 和其他参考数据，因为您需要知道密钥才能知道要更新哪些记录。

# php - 识别字符串中的单个/多个食物元素（用户输入）

> ID：14503782
> 
> 赞同：2
> 
> 时间：2013-01-24T14:35:12.750
> 
> 标签：php, mysql, regex, full-text-search

这是我试图在没有运气的情况下找到我的问题的解决方案后的第一篇文章。

如果您能帮助我，我将不胜感激:)

我正在尝试开发一个解决方案，如果用户在 texbox 中输入他们早餐吃的东西，那么让我们说“带有烤面包和牛奶的橙子”，我的应用程序可以识别食物或识别它们以查看每种食物有多少卡路里下表之一：

```
Food         - cooked - Calories
Orange cake  - oven   -  200
Cow Milk     - raw    -  50
Sheep Milk   - raw    -  40
Orange       - juice  -  15
cereal bread - toast  -  10
bread        - toast  -  5
bacon        - toast  -  10 
```

我所做的解决方案是对整个字符串进行全文搜索，而无需执行任何爆炸/内爆函数。所以我得到的结果是（通过记忆，所以它不准确）：

```
Fulltext rank  -  Food        - cooked  -  Cal
10,523634      -  bacon       - toast   -  10
5,2342342      -  sheep milk  - raw     -  40
5,2342342      -  cow milk    - raw     -  50
4,2342345      -  cereal bread- toast   -  10
3,2342344      -  orange cake - oven    - 200
2,2342342      -  orange      - juice   -  15

$query="
SELECT Food, cooked, 
MATCH ( Food, cooked)
AGAINST (  '$search' ) AS score 
FROM food_table 
WHERE
MATCH ( Food, cooked) 
AGAINST (  '$search' ) 
ORDER  BY Score 
DESC LIMIT 50"; 
```

我发现有些分数相同，羊奶和牛奶，所以我在 mysql 中添加了一个名为“milk-average”的新行作为全文中的第一个解决方案，然后我删除了其余的“相同等级”解决方案（我不'没有来自用户的更多信息，所以我只是从不同种类的牛奶中平均卡路里）

但是，这仍然不是很准确，例如，对于橙子或其他人，全文给我一个错误的第一个选项，“橙子蛋糕 - 烤箱”，当我想要匹配更好的“橙子 - 果汁”时（至少它匹配一栏完美）。但是，结果仍然为我提供了相同输入的多个选项，并且进行分数区分还不足以让应用程序“理解”，如果输入一次，它不应该有两个具有相同输入的结果。

以防万一我解释错了，我想要的最终结果是：

```
input: 
an orange with toast bread and milk

Solution:
orange - juice - 15
bread  - toast - 5
milk   - average - 45 (this one, as said, is adding a new mysql row with the data)

Total: 65 calories 
```

我不想要代码（如果你有时间，非常欢迎），但我需要为此目的使用的功能，或者任何其他更好的方法来完成所有这些，我会用谷歌搜索来理解。

代码的第二部分是识别食物，即使它们有任何拼写错误，例如 oarnge。我认为这是通过 Levenshtein 距离完成的，不确定我是否可以针对整个需求应用相同的解决方案..

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T02:44:03.903

我认为您有一些选择可以解决您的问题：

**编写自然语言解析器** （[维基百科上的 NLP](http://en.wikipedia.org/wiki/Natural_language_processing)）

您可以使用一些解析工具（只是 google *nlp php*）将短语映射到树中，进行一些词性标记，然后提取您需要的单词（可能带有它们的形容词，这样您就可以找到食物是否以及如何煮熟了）。这种方式可能相当复杂。

* * *

**限制用户输入**

只有您知道您的应用程序是如何设计的，但请考虑改变用户与其交互方式的可能性。您可以*强制*用户单击“添加”按钮并从食物列表中进行选择。

* * *

**中间某处**

如果您认为打字更自然，更快速，也许您可​​以在上述两者之间找到折衷方案。就像要求用户在“aliments”之间放置逗号和/或实现某种自动完成一样。在这种情况下，只有一些正则表达式可以完成这项工作。

* * *

当然还有其他途径可以遵循，比如做统计 nlp 或使用字典来只保留有用的词......

关于打字错误：是的，Levenshtein distance 是一种广泛使用的技术，您可以使用它（如果您以某种方式拆分短语，这样您就有了一个与数据库的 Food 列相当的字符串）。

# sql - Postgresql中行之间的时间戳差异

> ID：14503788
> 
> 赞同：1
> 
> 时间：2013-01-24T14:35:37.850
> 
> 标签：sql, postgresql, datetime

在 PostgreSQL 我有一张桌子

```
CREATE TABLE cubenotification.newnotification
(
  idnewnotification serial NOT NULL,
  contratto text,
  idlocation numeric,
  typology text,
  idpost text,
  iduser text,
  idobject text,
  idwhere text,
  status text DEFAULT 'valid'::text,
  data_crea timestamp with time zone DEFAULT now(),
  username text,
  usersocial text,
  url text,
  apikey text,
  CONSTRAINT newnotification_pkey PRIMARY KEY (idnewnotification )
) 
```

假设类型字段可以是“owned_task”或“fwd_task”。我想从 DB 中得到的是时间戳差异，以秒为单位严格区分类型为“fwd_task”的行的 data_crea 和类型为“owned_task”的行的每对“idobject，iduser”的 data_crea，我想要也将 EXTRACT(WEEK FROM data_crea)) 作为“周”，将结果按“周”分组。我的问题主要是关于在具有相同 idobject、相同 iduser 和不同类型的两行之间执行时间戳排序差异。

编辑：这里有一些示例数据

![样本数据](../Images/ffbbafaee0aa83e676969c94bb92b978.png)

和 sqlfiddle 链接[http://sqlfiddle.com/#!12/6cd64/2](http://sqlfiddle.com/#!12/6cd64/2)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:06:05.997

您正在寻找的是**两个子选择的 JOIN**：

```
SELECT EXTRACT(WEEK FROM o.data_crea) AS owned_week
     , iduser, idobject
     , EXTRACT('epoch' FROM (o.data_crea - f.data_crea)) AS diff_in_sek
FROM  (SELECT * FROM newnotification WHERE typology = 'owned_task') o
JOIN  (SELECT * FROM newnotification WHERE typology = 'fwd_task')   f
                                                         USING (iduser, idobject)
ORDER  BY 1,4 
```

[-> sqlfiddle](http://sqlfiddle.com/#!12/6cd64/5)

我按周和时间戳差异排序。周数基于“owned_task”的周数。

这假设每个 'owned_task'*有*一行，'fwd_task'有一行`(iduser, idobject)`，而不是每周一行。您的规范为解释留下了空间。

# javascript - 仅使用 javascript 正则表达式检查 IP 地址范围

> ID：14503795
> 
> 赞同：0
> 
> 时间：2013-01-24T14:35:53.937
> 
> 标签：javascript, regex, ip

我想在正则表达式中检查 ip 地址的范围，我正在使用这种方式，它工作得非常成功

```
function validate_ip(ip)
{
       // See if x looks like an IP address using our "almost IP regex".
    var regex = /^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/;
    var match = regex.exec(ip);
    if (!match) return false;
    // Additional code to check that the octets aren't greater than 255:
    for (var i = 1; i <= 4; ++i) {
        if (parseInt(match[i]) > 255) 
            return false;
    }
    return true;
} 
```

现在我想在正则表达式中检查范围和语法可以这样做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T14:43:00.700

最直接的方法是查看不同的情况：

```
25[0-5]|2[0-4]\d|1?\d\d? 
```

这将匹配 0 到 255 之间的数字，不允许使用前缀零，例如：055。

如果要排除零：

```
25[0-5]|2[0-4]\d|1\d\d|[1-9]\d? 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T14:42:02.883

表示从 1 到 255 的数字的正则表达式如下所示：

```
/[1-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]/
// next try, allowing 0:
/[1-9]?\d|1\d\d|2[0-4]\d|25[0-5]/ 
```

我想你会承认 using`parseInt`更具可读性，更不容易出错并且更易于维护。

它甚至可以更短：

```
/^\d{1,3}(\.\d{1,3}){3}$/.test(ip) && ip.split(".").every(function(octet) {
    return parseInt(octet, 10) < 256;
}); 
```

（使用 ES5[`every`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/every)，对于旧版浏览器可能需要 shim）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-12T00:33:32.793

可能会迟到，但有人可以尝试：

**有效 IP 地址示例**

```
115.42.150.37
192.168.0.1
110.234.52.124 
```

**Example of INVALID IP address**

```
 210.110 – must have 4 octets
    255 – must have 4 octets
    y.y.y.y – only digit has allowed
    255.0.0.y – only digit has allowed
    666.10.10.20 – digit must between [0-255]
    4444.11.11.11 – digit must between [0-255]
    33.3333.33.3 – digit must between [0-255] 
```

**JavaScript code to validate an IP address**

```
function ValidateIPaddress(ipaddress)   
{  
 if (/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(ipaddress))  
  {  
    return (true)  
  }  
alert("You have entered an invalid IP address!")  
return (false)  
} 
```

# css - 尽管溢出，部分内容仍然可见：隐藏

> ID：14503797
> 
> 赞同：2
> 
> 时间：2013-01-24T14:36:05.623
> 
> 标签：css, overflow, browser-refresh

我有一个关于溢出的 div 的问题：隐藏。它是相对定位的，它的子 div 是绝对定位的。悬停时，父 div 从溢出：隐藏变为溢出：可见。这使子 div 能够正确显示。

问题：虽然其他一切都很好，但当鼠标不再位于父 div 上时（因此溢出现在再次被隐藏），子 div 的位仍然显示在它们的位置。它们实际上并没有显示，因为如果我选择它们附近的一些文本或对象，它们就会完全消失。就好像页面需要某种“刷新”。

![在此处输入图像描述](../Images/c99727ffeb5e7cfe6312e033aa354176.png)

有没有其他人遇到过这个？我有点卡在这个...

**更新：**我对这个问题做了一个[jsfiddle](http://jsfiddle.net/raduluchian/Nt5bN/7/)，并意识到它只发生在基于 webkit 的浏览器（Chrome 和 Safari）上。我仍然不知道为什么，虽然...

```
<div class="list-name">
    <ul>
        <li class="truncated">
            <a href="">
                Hover me to see all the magic thext I'm hidding
            </a>
        </li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:28:26.730

似乎`overflow:hidden`在超链接中添加的额外内容可以解决该问题。[在这个小提琴](http://jsfiddle.net/raduluchian/39YJF/1/)中检查一下。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-24T15:29:10.963

这看起来像是渲染中的一个错误，而不是为什么它会这样工作。开发人员工具显示它就像鼠标仍然悬停在元素上方。可能有一些元素变得宽/高并且鼠标移出事件不会发生。但是，如果您删除`position:relative;`，`position:absolute;`并将 top/left 替换为`margin-top/margin-left`- 一切对我来说都很好：

[http://jsfiddle.net/Nt5bN/13/](http://jsfiddle.net/Nt5bN/13/)

CSS：

```
.list-name ul {
    margin: 50px;
    padding: 0;
    list-style: none;
}

.list-name li {
    display: block;
    float: left;
    width: 60px;
    height: 29px;   
    overflow: hidden;
    background: #eee;
}

.list-name a {
    width: 300px;
    display: block;
    float: left;
}

.list-name li.truncated:hover {
    overflow: visible;
}

.list-name li.truncated:hover a {

    margin-top: -3px;
    margin-left: -8px;
    background: #fff;
    z-index: 9999;
    padding: 2px 0 2px 7px;
    border-radius: 3px;
    border: 1px solid #ddd;
} 
```

# html - 是否可以将 HTML 页面和本地 Javascript 库制作成具有数据存储的 Chrome 扩展程序？

> ID：14503798
> 
> 赞同：0
> 
> 时间：2013-01-24T14:36:08.133
> 
> 标签：html, google-chrome, google-chrome-extension, javascript, google-chrome-app

我最近一直在尝试编写一个 Chrome 扩展程序，并且似乎每一步都遇到了重大问题。

目前我有一个使用本地 Javascript 库的本地 HTML 页面。这很好用，除了 Chrome[将页面可以存储的数据量限制为 5MB](https://developers.google.com/web-toolkit/doc/latest/DevGuideHtml5Storage)。我想绕过这个限制，并阅读 Chrome 扩展程序/应用程序可以通过 chrome.storage 使用无限的存储资源。

在编码时，我很快发现这只适用于浏览器操作、内容脚本和 (?) Web 应用程序（加载 WWW 页面作为扩展）。我将其编码为本地打包应用程序，它无法访问 HTML5 localStorage API 或 chrome.storage API。我*真的*需要扩展只使用本地 HTML/Javascript 资源，以保持离线/无互联网功能。

可以从本地资源（即本地打包的 HTML 页面）加载 Chrome 网络应用程序吗？有没有办法解决这些问题，不包括在 Chrome 中启用危险的安全漏洞？我看到一个 NPAPI 应用程序可以解决问题，但这也违背了我正在制作的应用程序的目的。

TIA，特兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:33:17.763

显然，当将正确的权限组合放入 manifest.json 时，打包的应用程序可以做到这一点：

```
"permissions": [
    "storage",
    "unlimitedStorage",
    "fileSystem"
] 
```

一旦添加了文件系统权限，文件系统 API 就可以按预期开始工作（而不是 chrome.storage）。

# mysql - Mysql 将标签设置为 Rollup 或类似的 GROUPING 函数，如 sql server

> ID：14503806
> 
> 赞同：0
> 
> 时间：2013-01-24T14:36:28.473
> 
> 标签：mysql, sql, function, grouping, rollup

我的 ROLLUP 有问题，我有空值的行，并且 ROLLUP 也返回 null，如何区分 ROLLUP 的空值和行的空值？

行中的空值存在是因为列 (group_name) 与左连接相关联。

这是我的查询：

```
SELECT gr.info,  
  HOUR(cdr.calldate) AS hour,     
  DATE(cdr.calldate) AS date,     
  COUNT(DISTINCT cdr.uniqueid) AS count,  
  pl.number,  
  IFNULL(ugr.group_name, "") AS group_name 
FROM cdr 
INNER JOIN callinfo AS ci 
  ON ci.uniqueid = cdr.uniqueid 
LEFT JOIN users AS usr 
  ON usr.username = ci.agent 
LEFT JOIN groups AS ugr 
  ON ugr.group_id = usr.group_id 
INNER JOIN pstnline AS pl 
  ON ci.line = pl.number 
INNER JOIN hunt_line AS gri 
  ON gri.pstnline_id = pl.pstnline_id 
INNER JOIN hunt AS gr 
  ON gri.hunt_number = gr.number 
WHERE cdr.calldate >='2012-12-01 00:00'
  AND cdr.calldate <='2013-01-24 10:45'
GROUP BY group_name WITH ROLLUP 
```

我看到在 SQL Server 中存在一个名为 GROUPING 的函数，但在 MySql 中不存在，我怎样才能达到相同的效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:47:32.063

我认为您也可以在您拥有的查询中执行此操作，方法是将 group by 参数更改为：

```
group by ifnull(ugr.group_name, '') 
```

现在，空白将表示来自 的 NULL，`outer join`而 NULL 将表示汇总。

# autocad - 编辑 3dpolyline 和圆弧

> ID：14503809
> 
> 赞同：1
> 
> 时间：2013-01-24T14:36:31.697
> 
> 标签：autocad

我有一个 3dpolyline 和 arc (3D)。我想知道是否可以将 3dpolyline 与 3d arc 加入以获得 3dpolyline。在搜索这个主题时，我发现我首先需要一个将 arc 转换为 3dpolyline 的例程，然后加入两个 3dpolyline。有人知道一些链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T14:51:18.570

3D 多段线是作为单个对象创建的直线段的连接序列。3D 多段线可以是非共面的；但是，它们不能包括弧段。

[http://docs.autodesk.com/ACD/2010/ENU/AutoCAD%202010%20User%20Documentation/index.html?url=WS73099cc142f48755-471cc4bd11960d8a16c-1c8.htm,topicNumber=d0e290136](http://docs.autodesk.com/ACD/2010/ENU/AutoCAD%202010%20User%20Documentation/index.html?url=WS73099cc142f48755-471cc4bd11960d8a16c-1c8.htm,topicNumber=d0e290136)

# jquery - 在 Drupal 7“Zen”主题中使用 jQuery 和 CSS

> ID：14503814
> 
> 赞同：0
> 
> 时间：2013-01-24T14:36:50.557
> 
> 标签：jquery, css, drupal, drupal-theming

我正在 Drupal 7 中编辑“Zen”主题。这就是问题所在：

```
 (function ($, Drupal, window, document, undefined) {        
         alert("xuy");
         $("#navigation ul.links li").hover(function() {
         alert("xuy");
    }); 
```

第一个警报运行良好，但悬停时没有警报。我在 CSS 中有这个类。甚至

```
 $("a").hover(function() { 
          alert("xuy"); 
    }); 
```

没用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:07:39.870

你应该确定 $ like

```
(function($) {
  Drupal.behaviors.mybehavior = {
    attach: function(context, settings){
       //you code goes here
       //$ will work inside this function
    }
  };
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T13:12:44.503

你的代码在我看来有点古怪。你不应该在 drupal 7 中使用 drupal 行为吗？（是的你应该）。

```
Drupal.behaviors.mybehavior = function(context, settings){
  $('#navigation ul.links li').hover(function() {
    alert('xuy');
  });
}; 
```

# macos - 内存、堆栈和 64 位

> ID：14503824
> 
> 赞同：0
> 
> 时间：2013-01-24T14:37:33.840
> 
> 标签：macos, gdb, 64-bit, x86-64, memory-address

在 x86 系统上，一个内存位置可以保存 4 个字节 (32 / 8) 的数据，因此 64 位系统中的单个内存地址每个内存地址可以保存 8 个字节。在 GDB 中检查堆栈时，尽管情况似乎并非如此，例如：

```
0x7fff5fbffa20: 0x00007fff5fbffa48  0x0000000000000000
0x7fff5fbffa30: 0x00007fff5fbffa48  0x00007fff857917e1 
```

如果我有这个权利，那么每个十六进制对 (48) 都是一个字节，因此第一个内存地址 0x7fff5fbffa20: 实际上保存了 16 个字节的数据，而不是 8 个。

这让我非常困惑并且已经有一段时间了，所以绝对非常感谢任何输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T14:40:31.633

简短的回答：在 x86 和 x64 上，最小可寻址实体都是一个字节：每个“内存位置”都包含一个字节，在每种情况下。您从 GDB 看到的只是格式化：它正在转储 16 个连续字节，因为地址从 ....20 增加到 ....30，（在左侧）表明。

长答案：在架构中，32 位或 64 位用于表示许多东西：几乎总是可寻址大小（地址中有多少位 = 您可以直接寻址多少内存 - 再次，内存*字节*）。它通常还指示寄存器的尺寸，以及（但不总是）本机字长。这意味着通常，即使您可以寻址单个字节，机器也可以使用不同（更长）大小的数据“更好地”工作。“更好”的含义是毋庸置疑的；但是，了解一些背景知识有助于理解对问题中字长的一些误解。

# c#-4.0 - 根据实体框架中的第一个创建两个实体，第二个实体

> ID：14503827
> 
> 赞同：0
> 
> 时间：2013-01-24T14:37:43.410
> 
> 标签：c#-4.0, entity-framework-5, objectcontext

我在 c# 中有一个类库和具有支付模型的实体框架。

我的支付模型有一个表调用`Payment`，然后另一个表调用`PaymentSolid`，最后一个保存第一个的实体值，如果第一个有`IdSeller`，那么第二个有`SellerName`。

我的问题是我有一个方法叫做`NewPayment`创建`Payment`实体和`PaymentSolid`. 我的方法中有下一个代码：

```
Payment ret;
        using (var context = new MyEntities())
        {
            ret = new Payment
            {
                id_buyer = IdBuyer,
                id_seller = IdSeller,
                id_seller_bill_to = IdSellerBillTo,
                id_payment_method = IdPaymentMethod,
                creation_date = CreationDate,
                payment_status = PaymentStatus,
                notes = Notes
            };
            context.Payments.AddObject(ret);
            context.Refresh(RefreshMode.StoreWins, ret);
            var retSolid = new PaymentSolid { 
                buyer_name = ret.Buyer.ProviderName,
                seller_name = ret.Seller.ProviderName,
                seller_bill_to_name = ret.SellerBillTo != null ? ret.SellerBillTo.ProviderName : null,
                payment_method_name = ret.PaymentMethod.name
            };
            ret.PaymentSolid = retSolid;
            context.SaveChanges();
            context.Refresh(RefreshMode.StoreWins, ret);
        }
        return ret;
    } 
```

我的问题是我是否可以使用`ret.Buyer.ProviderName`来创建实体，或者我是否必须保存第`Payment`一个才能创建实体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:54:24.727

如果您用于创建和`id_buyer`之间的关系，则需要先保存。`Payment``Buyer``ret`

# winapi - WM_NOTIFY 和 NM_CUSTOMDRAW

> ID：14503839
> 
> 赞同：0
> 
> 时间：2013-01-24T14:38:28.103
> 
> 标签：winapi

当 NM_CUSTOMDRAW 通知代码通过 WM_NOTIFY 消息发送到控件的父级时，此 WM_NOTIFY 消息的 lParam 参数是 NMCUSTOMDRAW 结构的地址，如下所示：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ff919569(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ff919569(v=vs.85).aspx)

另一方面，WM_NOTIFY 消息的 lParam 应该是

```
A pointer to an NMHDR structure that contains the notification code and additional
information. For some notification messages, this parameter points to a larger
structure that has the NMHDR structure as its first member. 
```

在许多代码示例中，对于 WM_NOTIFY 消息的处理程序，我看到

```
LPNMLISTVIEW     pnm         =   (LPNMLISTVIEW)lParam;
    switch   (pnm->hdr.code){   .... 
```

但问题是，我们不知道这个 lParam 是一个 NMHDR 结构还是一个 NM_CUSTOMDRAW 结构，我们怎么能正确地转换 lParam？如果 lParam 只是一个 NMHDR，则应该使用 LPNMHDR 和 pnm->code，不是吗？

更糟糕的是，不同的控件使用不同类型的结构：NMLVCUSTOMDRAW、NMTVCUSTOMDRAW、NMLVCUTTOMDRAW 和 NMTBCUSTOMDRAW。那么在 WM_NOTIFY 处理程序开始时正确的做法是什么，区分它是否使用 NM_CUSTOMDRAW，并确定正确的 NMCUSTOMDRAW 结构类型。

* * *

当我读到这篇文章

[http://msdn.microsoft.com/en-us/library/windows/desktop/ff919569%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ff919569%28v=vs.85%29.aspx)

在 MSDN 上，我无法理解某些部分。例如，

**CDRF_NOTIFYPOSTPAINT 当整个控件的绘制周期完成时，该控件将发送 NM_CUSTOMDRAW 通知。这发生在 dwDrawStage 等于 CDDS_PREPAINT 时。**

当一个控件在整个控件的绘制周期完成时发送一个 NM_CUSTOMDRAW 通知时，这个 NM_CUSTOMDRAW 应该有 dwDrawState 等于 CDDS_PREPOSTPAINT，不是吗？

有人可以在该 MSDN 文章中的返回值含义列表中解释什么“这发生在......”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T14:42:16.927

这很容易。`lParam`指针是`NMHDR*`同时的`NMLVCUSTOMDRAW*`。如果您查看如何`NMLVCUSTOMDRAW`定义，您将看到它以`NMHDR`成员开头。

话虽如此，您可以可靠地将您的内容投射`LPARAM`到您选择的任何内容上：`NMHDR*`, `NMCUSTOMDRAW*`, `NMLVCUSTOMDRAW*`. 如果通知来自 listview，则消息本身是`WM_NOTIFY`并且`NMHDR::code`等于`NM_CUSTOMDRAW`，那么这三个转换中的任何一个都将是正确的。

将`NMLVCUSTOMDRAW`其视为 general purpose 的特定于通知的扩展`NMHDR`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T14:49:24.317

Microsoft Windows 构建其结构的方式是普通旧数据格式。因此，如果我定义：

```
struct A {
    int a;
};

struct B {
    A a;
    int b;
};

struct C {
    A a;
    int c;
}; 
```

B 在内存中的布局实际上是两个整数，A 的全部内容（一个整数）然后 B 的全部内容（另一个整数）。因此，将 B 视为 A 是安全的，因为我可以获得 a 值并从 a 成员中确定我的指针是否真的属于 B 类型或 C 类型。在您提供的示例中，NMHDR 是通用值（ A) 和 NMLISTVIEW 是具体值（B 或 C）。您测试 hdr 值（类型为 NMHDR）以查看 lParam 是什么类型，然后将其转换为正确的子类型。这适用于 C 和 C++ Windows 开发。

# ajax - 通过 ajax 将内容加载到安装了 tinymce 的文本区域中

> ID：14503842
> 
> 赞同：0
> 
> 时间：2013-01-24T14:38:36.683
> 
> 标签：ajax, wordpress

我有以下脚本从 wordpress 数据库中提取数据。选择不同的选项（提取正确的数据等）时，一切正常。

我现在已经在 textarea 上安装了 tinymce 编辑器。由于这个内容不再显示。

```
<script>
        $(document).ready(function()
        {
            $('#myselect').change(function()
            {
                var selected = $(this).find(':selected').html();
                var id = $(this).find(':selected').val();
                $.post('http://www.xxx/admin/email/ajax.php', {'beverage': selected, 'id':id }, function(data) {
                  $('#result').html(data);
                });
            }); 
        });
    </script> 
```

有谁知道我缺少什么来完成这项工作？

任何帮助将不胜感激！

干杯丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:01:25.000

自己找到了解决方案，我需要更改以下内容：

```
$('#result').html(data); 
```

到：

```
tinyMCE.get('result').setContent(data); 
```

# asp.net - 将动态数据发送到asp.net mvc 4中视图页面中的代码块......

> ID：14503844
> 
> 赞同：0
> 
> 时间：2013-01-24T14:38:42.190
> 
> 标签：asp.net, asp.net-mvc-3, razor, asp.net-mvc-4

我试图将动态数据发送到会话，以便在页面加载时动态值将由具有加载不同数据的 LINQ 语句的代码块使用......我试图在视图端执行所有这些操作去控制器..你可以通过代码更好地理解它..这只是我想尝试而不是在任何地方使用的想法......

```
@Code
    ViewData("Title") = "Index"    
    Dim vs As New Ve.VeDataSource
    If (Session("dynamicDataToPass") = Nothing) Then
        Dim q = ((From r In vs.aspnet_Roles Order By r.RoleId Select r.RoleName).Skip(1)).FirstOrDefault
        ViewData("q1") = q
    Else
        Dim m As Integer = Convert.ToInt32(Session("dynamicDataToPass").ToString)
        Dim q = ((From r In vs.aspnet_Roles Order By r.RoleId Select r.RoleName).Skip(m)).FirstOrDefault
        ViewData("q1") = q
    End If   
    Session("dynamicDataToPass") = Nothing
End Code

<h2>Index</h2>

@ViewData("q1")
<select id="secbox">
    <option>1</option>
    <option>2</option>
    <option>3</option>
</select>

<script>
    $(document).ready(function () {
        $("#secbox").change(function () {

          var p= $("#secbox").val();
            @Code
                Session("dynamicDataToPass") = Nothing
                Session("dynamicDataToPass") = //something here to set the val to session
            End Code
            window.location.reload();
        });
    });

</script> 
```

我的问题是如何将 jquery 值分配给会话，我不确定它是否可能.. 它只是一个尝试.. 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:58:12.630

首先，当您决定使用 MVC 作为您的开发设计模式视图时，应该主要包含可视化标记代码（Html、CSS、JavaScript）。您的逻辑应该在您的控制器中编译并返回一个模型，其中包含呈现您的视图所需的信息。

在您的情况下，解决方案是将选择框的值发布到控制器中的操作并设置会话的值

看法

```
$.post(/Save, {id : $("#secbox").val()}, function()
{
   // DO SOMETHING
}); 
```

行动

```
 [HttpPost] 
 public ActionResult Save(int id)
 {
   Session("dynamicDataToPass") =  id

   return view();

  } 
```

希望这可以帮助

# joomla - Joomla - 发送网格配置问题

> ID：14503846
> 
> 赞同：2
> 
> 时间：2013-01-24T14:38:47.073
> 
> 标签：joomla

我们正在开发 Joomla 网站，并且必须进行发送网格配置。我们已经按照官方网站的指导设置了所有内容。

从 joomla 后端发送电子邮件时，我们遇到以下问题。“SMTP 错误！无法连接到 SMTP 主机。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:02:52.330

这很可能与主机有关。首先确保您的组件不是问题尝试从用户管理器发送电子邮件。

*   如果它通过了，那么您的组件没有正确使用 Joomla 配置
*   如果没有（我希望），那只是您的服务器配置有问题，

检查防火墙，垃圾邮件设置，尝试从命令行发送电子邮件...

# java - 读取 .txt 文件的内容并将其显示在多个文本区域中

> ID：14503847
> 
> 赞同：2
> 
> 时间：2013-01-24T14:38:52.197
> 
> 标签：java, swing, file-io, java-io

我正在尝试从 .txt 文件中读取内容，并且我想在我的 GUI 中以 JTextAreas 的数量显示它

我的文本文件的内容是 8 个随机数，用逗号分隔它们（如下所示）

200,140,​​300,30,30,70,70,20

我的 GUI 上有 8 个 JTextArea，我想在不同的 JTextArea 中显示每个数字。

那么如何在文本文件中使用逗号 (,) 作为分隔符呢？

以下代码完美打开文件，但仅在一个文本区域中显示所选 .txt 文件的内容。如何编辑我的代码以实现目标？

```
b2.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent arg0) {

            JFileChooser fc = new JFileChooser();
            int returnVal = fc.showOpenDialog(fc);
            if (returnVal == JFileChooser.APPROVE_OPTION)
            {
                  File file = fc.getSelectedFile();
                  try 
                  {
                    FileReader fr = new FileReader(file);
                    o = new BufferedReader(fr);
                    while((s=o.readLine())!=null)
                        t1.setText(s);
                  } 
                  catch (FileNotFoundException e) 
                  {
                    e.printStackTrace();
                  } 
                  catch (IOException e) 
                  {
                    e.printStackTrace();
                  }                 
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T14:43:36.507

您必须标记文本文件的内容，指定“，”作为分隔符。

```
String content = "200, 140, 300, 30, 30, 70, 70, 20;
String[] tokens = content.split(", "); 
```

之后，您可以访问令牌数组中的每个数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T14:48:15.660

您可以使用**s.split(",")拆分此数字**

试试这个

```
 FileReader fr = new FileReader(file);
        BufferedReader o = new BufferedReader(fr);
        String s;
        while ((s = o.readLine()) != null) {
            String Values[] = s.split(",");
            for (int i = 0; i < Values.length; i++) {
                System.out.println(Values[i]);//////////here You can set JTextArea by using Values[i]

            }
        } 
```

# bash - 未正确识别外部变量

> ID：14503848
> 
> 赞同：1
> 
> 时间：2013-01-24T14:38:54.950
> 
> 标签：bash

我遇到了这个问题：当我将变量放入外部“configstyle”文件并导入带有`. /var/scripts/siDiagConfig.sh`变量的文件时无法正常工作......就像我有一个变量被调用`MTU=1500`，当我回显它时，它会打印“1500” ， 哪个是对的。但是，当我想在 grep 命令中使用变量时，例如`somethingawesome | grep ${MTU} -c`无法正确识别该变量。在此示例中，控制台打印 0，而不是 2...当我用 重新分配变量时`MTU=1500`，代码可以正常工作...。知道吗，我可能错过了什么？

有没有其他方法，我可以把我的变量放在一个外部文件中？

我的 siDiagConfig.sh 文件：

```
#!/bin/bash
....
export MTU=1500
.... 
```

编辑（解决方案）：

我记得，我在 Windows 系统上创建了该文件。我只是复制了 siDiagConfig.sh 中的代码，在 unix 系统上创建了一个新文件，然后将代码粘贴到那里。现在它可以正常工作了=）

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T20:34:36.810

[gigauser@gigabox : /scm/gigafolder/toratora/test_aks]

> 猫 conf.config ; 回声-----；猫 testfile.txt ; 回声 ------; 猫主文件.sh ; 回声--------; ./mainfile.sh

出口 GIGA=giga
出口 fifa=FIFA

* * *

我是 GIGA
我喜欢国际足联

* * *

```
 #!/bin/bash

. conf.config

echo GIGA = $GIGA
echo fifa = $fifa

cat -n testfile.txt

echo
echo -- Now lets grep = $GIGA with case insensitive On
echo

echo -`grep -in "${GIGA}" testfile.txt`-; 
echo =`grep -ic  "${GIGA}" testfile.txt`=
echo
echo Now again but with case insensitive Off
echo -`grep -n "${GIGA}" testfile.txt`-;
echo =`grep -c  "${GIGA}" testfile.txt`= 
```

* * *

GIGA = giga
fifa = FIFA
1 我是 GIGA
2 我喜欢fifa

-- 现在让 grep = giga 不区分大小写 On

-1:I'm GIGA-
=1=

现在再次但不区分大小写 Off
--
=0=
[ gigauser@gigabox : /scm/gigafolder/toratora/test_aks]
>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T12:05:09.400

*[由于将评论标记为答案的](https://meta.stackexchange.com/questions/82099/answering-comment-answered-questions)功能请求仍然被拒绝，因此我在此处复制上述解决方案。*

是的; 那 \r 是麻烦。这是一个回车。在 Unix 上执行之前将 DOS 文件转换为 Unix 文件。——乔纳森·莱弗勒

好的，现在我想起来了，我在 Windows 系统上创建了该文件。我只是复制了 siDiagConfig.sh 中的代码，在 unix 系统上创建了一个新文件，然后将代码粘贴到那里。没有任何问题就不能工作=）感谢您的帮助！– 西蒙斯0n

# c# - Linq 表达式 .Any(List )

> ID：14503857
> 
> 赞同：0
> 
> 时间：2013-01-24T14:39:10.663
> 
> 标签：c#, linq

我有一个包含（除其他外）Remark1、Remark2 和 Remark3 的列表。我想确保在这些字段中只写有效的备注。今天我像这样检查它：

```
foreach (GradeRow row in Grade.GradeRows)
{
    if (!(okRemarks.Contains(row.Remark1) && okRemarks.Contains(row.Remark2) && okRemarks.Contains(row.Remark3)))
    {
        FailedCourseCodes.Add(row.CourseCode);
    }
} 
```

是否有可以执行 .Contains(List) 之类的 Linq 表达式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T14:42:46.020

您仍然必须单独检查每个字段，但您可以消除循环：

```
FailedCourseCodes.Add(
    Grade.GradeRows.Where(row=>
        okRemarks.Contains(row.Remark1) && 
        okRemarks.Contains(row.Remark2) && 
        okRemarks.Contains(row.Remark3)
        )
); 
```

您*可以*通过从字段创建一个数组来稍微缩短它：

```
FailedCourseCodes.Add(
    Grade.GradeRows.Where(row=>
        (new [] {row.Remark1, row.Remark2, row.Remark3})
            .Except(okRemarks).Any()
        )
); 
```

但在我看来，这更难阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:43:18.450

像这样的东西将返回所有包含坏评论的行：

```
 Grade.GradeRows.Where( row => new string[]{row.Remark1, row.Remark2, Row.Remark3}.Any ( remark => !okRemarks.Any(remark))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T15:35:10.087

.Intersect( IEnumerable ) 然后比较结果的 Count() 是我能想到的唯一选择。类似的东西：

```
foreach( var failedGrade in Grade.GradeRows
                                  .Select( x => new String[]{ row.Remark1, row.Remark2, row.Remark3 } )
                                  .Where( remarks => remarks.Intersect( okRemarks ).Count() < remarks.Length ) )
{
    FailedCourseCodes.Add(failedGrade.CourseCode);
} 
```

@d-Stanley 做对了，但没有正确添加结果

```
foreach( var failedGrade in Grade.GradeRows.Where( row => !(
                                                okRemarks.Contains(row.Remark1) &&
                                                okRemarks.Contains(row.Remark2) &&
                                                okRemarks.Contains(row.Remark3) ) ) )
{
    FailedCourseCodes.Add(failedGrade.CourseCode);
} 
```

# c# - WCF 服务返回列表。需要在一个 Json 字符串中返回 2 个对象

> ID：14503858
> 
> 赞同：1
> 
> 时间：2013-01-24T14:39:10.893
> 
> 标签：c#, json, wcf

这是我的第一个堆栈溢出帖子，所以让我放松一下:)。

我一直在努力解决这个问题。

目前我的 WCF 从数据库中读取数据并将其作为 JSON 返回。

这是它的外观：

```
{
    "shoppinglistitemsResult": [
        {
            "description": "this is my notes description",
            "name": "mynotename",
            "pid": "1",
            "status": "1",
            "username": "test"
        }
    ]
} 
```

我希望它看起来像这样：

```
{
    "shoppinglistitemsResult": [
        {
            "description": "123",
            "name": "123",
            "pid": "123",
            "status": "123",
            "username": "test"
        }
    ],
    "success": 1
} 
```

最后加上额外的对象。

```
[OperationContract]
[WebInvoke(Method = "GET", ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Wrapped, UriTemplate = "displayAllNotes?name={username}&pass={password}")]
List<Service1.wsNotes> shoppinglistitems(string username, string password); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:01:25.737

您需要返回一个同时包含列表和成功属性的对象，而不是直接返回列表。将 JSON 中的每一组花括号视为需要创建的新对象/类，并且以逗号分隔的所有内容都视为该对象的属性。因此，您的外部花括号需要由具有两个属性（shoppinglistitemsResult 和 success）的类表示。对于列表中的所有项目，您都需要第二堂课。

这是一种使用泛型实现此目的的方法。我还冒昧地包含了一些您可能想要使用的附加属性。对于不需要返回值但可能希望返回成功或错误消息的操作，我还包含了一个没有“结果”的响应类型。

```
[DataContract]
public class Response : IExtensibleDataObject
{
    public Response()
    {
        Success = true;
        ErrorMessage = null;
    }

    [DataMember]
    public bool Success { get; set; }
    [DataMember]
    public string ErrorMessage { get; set; }

    public ExtensionDataObject ExtensionData { get; set; }
}

[DataContract]
public class Response<TResult> : Response
{
    [DataMember]
    public TResult Result { get; set; }
} 
```

然后你的运营合同看起来像这样......

```
[OperationContract]
[WebInvoke(Method = "GET", ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Wrapped, UriTemplate = "displayAllNotes?name={username}&pass={password}")]
Response<List<Notes>> GetShoppingListItems(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:48:01.967

然后构建一个包含作为成员的列表和您需要的额外对象的类，并将该类的实例作为 json 返回。

# android - Android - 更改资源文件中的动画

> ID：14503865
> 
> 赞同：0
> 
> 时间：2013-01-24T14:39:23.577
> 
> 标签：android, animation, resources, translation

我在 overridePendingTransition 中使用了从一个活动到另一个活动的转换。不幸的是，所有 overridePendingTransition 使用的是文件的资源 id，所以我在如何编辑这个文件时遇到了麻烦，所以我的转换是正确的。

基本上我需要做的是对 R.anim.flip_in_scale_in 进行更改，以便我可以更改从 X/toX 过渡的值，以便根据用户的屏幕尺寸进行设置。

```
overridePendingTransition(R.anim.flip_in_scale_in, R.anim.stationary_item); 
```

在 overridePendingTransition 中使用之前，如何更新 R.anim.flip_in_scale_in 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:48:39.960

您无法以您想要的方式更改资源文件中的动画。

但是，您可以创建动画以使用百分比而不是 dp 值。当动画应用于`Activity`的 View 时，它将完全根据 View 的大小（在大多数情况下是屏幕大小）进行动画处理。

例如：

```
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate
        android:fromXDelta="100%"
        android:toXDelta="0%"
        android:duration="500"
        />
</set> 
```

将在半秒内从右侧向屏幕滑动视图。

```
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <scale
        android:interpolator="@android:anim/accelerate_decelerate_interpolator"
        android:fromXScale="1.0"
        android:toXScale="1.4"
        android:fromYScale="1.0"
        android:toYScale="1.4"
        android:pivotX="50%"
        android:pivotY="50%"
        android:duration="1000" />
</set> 
```

这将在一秒钟内将视图增加到当前大小的 40%。无论视图的大小如何，枢轴都将直接位于视图的中间。

# java - 通用类型重复

> ID：14503868
> 
> 赞同：0
> 
> 时间：2013-01-24T14:39:41.687
> 
> 标签：java, generics

我有这个课...

```
public abstract class LoadboardTable
{
    protected Map<String, HashMap<HasTableFields, String>>  table   = new TreeMap<String, HashMap<HasTableFields, String>>();

    public Set<Entry<String, HashMap<HasTableFields, String>>> getEntries()
    {
        return table.entrySet();
    }

    ...
} 
```

在其他课程中，我不断重复泛型类型。例如...

```
for (Entry<String, HashMap<HasTableFields, String>> entry : myTable.getEntries()){}

Set<Entry<String, HashMap<HasTableFields, String>>> entries = otherTable.getEntries();

etc, etc... 
```

这种泛型类型在整个应用程序中重复和散落。有没有更好的办法？如果我决定更改 LoadboardTable 类中的表 Map 对象的通用类型，我将在其他任何地方更改它几天。另外，继续输入它只是一个巨大的痛苦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:46:11.310

没有办法避免重复，除了在构造函数中，因为 Java 7：

```
protected Map<String, HashMap<HasTableFields, String>> table = new TreeMap<>(); 
```

但是，如果您将 HashMap 和条目封装在定义良好的类中，您将拥有更好的代码，并且需要更少的输入。看起来您将对象用作开放数据结构，而不是将它们用作提供行为并保持其状态封装的封闭对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:48:06.040

3 建议：

1.  与其使用这么多泛型，不如想想你真正想要实现的类，而不是用泛型解决所有问题。
2.  在 Java 7 中使用菱形运算符。
3.  使用 Eclipse 时，您可以只写“getEntries”，然后按 CTRL+1 并单击“分配给局部变量”——这将自动创建一个具有正确类型的局部变量。这并不能解决问题，但会使编写速度更快一些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T14:56:04.753

 `````
public abstract class LoadboardTable<T,O>
{
    protected Map<T, HashMap<O, T>>  table   = new TreeMap<T, HashMap<O, T>>();

    public Set<Entry<T, HashMap<O, T>>> getEntries()
    {
        return table.entrySet();
    }
} 
`````

# neo4j - Specs2/Neo4j - 将 ImpermanentGraphDatabase 与 Specs2 一起使用

> ID：14503871
> 
> 赞同：0
> 
> 时间：2013-01-24T14:39:51.913
> 
> 标签：neo4j, spring-data-neo4j, specs2

我正在使用 Specs2 编写验收测试。

我想使用`ImpermanentGraphDatabase`以获得内存中的 Neo4j 图表；非常适合集成测试。

我为 Neo4j 设置了 Spring-Data，我的 Spring 文件配置包含：

```
<bean id="graphDatabaseService" class="org.neo4j.test.ImpermanentGraphDatabase" destroy-method="shutdown"/> 
```

我想知道该选项`destroy-method="shutdown"`是否考虑到 Specs2 而不是通常`JUnit`，以便隔离每个 Spec 的`example`.

总结一下：**每个`example`人都有自己的内存图实例，还是会被所有人共享？**

我猜它不适用，因为 specs2`Specification`对所有这些 Spec 的示例执行使用相同的实例。事实上，在 Specs2 的函数式风格中，只有一个`is()`方法被称为在一个实例中包含所有示例。

我还尝试实现该`BeforeExample`特征以在每个处清理数据库，`example`但是...使用 Given/Then/When 样式，似乎整个被认为是唯一的`example`. 实际上，分隔符`^`不是传统`!`的 ，后者代表 one `example`。

我想`ImpermanentGraphDatabse`在每个步骤（`Given`或`When`或`Then`步骤）之前清理内存数据库（）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:49:20.607

我对您的问题的理解是，您希望在每组 Given/When/Then 步骤之前有一个“新鲜”的数据库。

为此，您可以：

*   在每组 Given/When/Then 步骤之前明确指定操作

    ```
    Step(cleanupDatabase) ^
    "A given-when-then example for the addition" ^
      "Given the following number: ${1}"         ^ number1 ^
      "And a second number: ${2}"                ^ number2 ^
      "And a third number: ${3}"                 ^ number3 ^
                                                 end^
    Step(cleanupDatabase) ^
    "A given-when-then example for the addition" ^
     "Given the following number: ${1}"         ^ number1 ^
     "And a second number: ${2}"                ^ number2 ^
     "And a third number: ${3}"                 ^ number3 ^
                                             end 
    ```

*   使用函数来声明每个组并在每个组之前映射一个清理步骤

    ```
    def `first example` =     
      "A given-when-then example for the addition" ^
        "Given the following number: ${1}"         ^ number1 ^
        "And a second number: ${2}"                ^ number2 ^
        "And a third number: ${3}"                 ^ number3 ^
                                                   end
    def `second example` =     
      "A given-when-then example for the addition" ^
        "Given the following number: ${1}"         ^ number1 ^
        "And a second number: ${2}"                ^ number2 ^
        "And a third number: ${3}"                 ^ number3 ^
                                                   end

    def is = Seq(`first example`, `second example`).foldLeft(Step():Fragments) { (res, cur) =>
      res ^ Step(cleanupDatabase) ^ cur 
    } 
    ```

*   使用[`map`规范的功能](http://etorreborre.github.com/specs2/guide/org.specs2.guide.Structure.html#Template)来做一般性

    ```
    override def map(fs: =>Fragments) = fs.flatMap {
      // clean the database at the end of a G/W/T block
      case f if f == end => Seq(Step(cleanDatabase), end)
      case other         => Seq(other)    
    } 
    ```

# javascript - 用ajax发送复杂数据的最佳策略是什么

> ID：14503876
> 
> 赞同：0
> 
> 时间：2013-01-24T14:40:09.080
> 
> 标签：javascript, ajax, json, jquery

我在表单中有一些信息可以使用 JS/jQuery 作为（复杂）数组（或对象，如果您愿意）发送到服务器。(jQuery 1.7.2) 我正在考虑用 JSON 巧妙地解决问题。我的代码现在可以工作，但我想知道它是否可以做得更好。

所以这个例子非常典型（数据更复杂 irl）：

```
dataSend = { 'id': '117462', 'univers': 'galerie', 'options' : { 'email': 'hello@world.com', 'commenataire': 'blabla', 'notation' : '4' } };

$.ajax({
  url: "/ajax/ajaxMavilleBox.php",
  data: JSON.stringify(dataSend),
  success: function(x){
      smth();
  }
}); 
```

在另一种情况下，我必须在没有 JSON 的情况下制作完全相同的东西。

用同样的例子：

```
dataSend = { 'id': '117462', 'univers': 'galerie', 'options' : { 'email': 'hello@world.com', 'commenataire': 'blabla', 'notation' : '4' } };

$.ajax({
    url: "/ajax/ajaxBox.php",
    data: $.param(dataSend),
    success: function(x){
        smth();
    }
}); 
```

显然，我错过了一些东西。

网址是：

```
http://www.mywebsite.com/ajax/ajaxBox.php?id=117462&univers=galerie&options=%5Bobject+Object%5D 
```

网址应该是：

```
http://www.mywebsite.com/ajax/ajaxBox.php?id=117462&univers=galerie&options[email]=hello@world.com&options[commenataire]=blabla&options[notation]=3 
```

有任何简单的方法可以做到这一点（我希望我不必自己在循环中编辑数据或其他东西）

**编辑：第二部分的解决方案**

好的，没有JSON的最后一部分是正确的。事实上，我在我的页面中使用的是旧版本的 jQuery。$.param 对于 jQuery < 1.4 不是很好

更多信息在这里[参数文档](http://api.jquery.com/jQuery.param/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:45:49.297

我建议设置`type: 'POST'`，否则您将获得相当于浏览器查询字符串长度的数据限制。

如果使用 post 方法，则应将数据作为 json 字符串发送。就像是：

```
data: { DTO: JSON.stringify(dataSend) } 
```

如果未定义（例如在 ie7 中），您需要使用[json2.js 。](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)`window.JSON`

如果您在服务器端使用 PHP，您可以使用以下方法获取对象：

```
$data = json_decode($_POST['DTO']); //will return an associative array 
```

或 ASP.NET

```
public class DataSctructure
{
    public string id { get; set; }
    public string univers { get;set; }
    //etc...
}

var data = HttpContext.Current.Request.Form['DTO'];

DataSctructure ds = new JavaScriptSerializer().Deserialize<DataSctructure>(data);

//properties are mapped to the ds instance, do stuff with it here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:51:50.690

正如@Johan 提到的，`POST`应该在这里使用，而不是`GET`
您可以使用您正在使用的浏览器中的开发人员选项查看您发送的数据，只需按 f12
还确保您`jquery >= 1.4`
在 url 中使用了不正确的序列化字符串是过去的`$.param()`方式1.4版本之前的序列化

# iphone - 音频队列 - 没有用于调用“AudioSessionInitialize”的匹配函数

> ID：14503878
> 
> 赞同：4
> 
> 时间：2013-01-24T14:40:19.113
> 
> 标签：iphone, ios, objective-c, core-audio, audioqueue

我有个问题。我想在我的应用程序中使用一些与声音一起使用的功能。

我找到了示例 SpeakHere，并在我的应用程序中包含了这个应用程序的主要部分功能。但我有3个错误：

> 对“AudioSessionInitialize”的调用没有匹配的函数

![在此处输入图像描述](../Images/4613f4066d1fb553cfb769338c3055c5.png)

**我该如何修复这个错误？**

我添加到项目框架中：coreAudio、AudioToolbox
我使用 ARC。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-27T23:48:51.540

这是根据 [AudioServices.h 在包含 AudioToolbox 框架的 Objective-C iOS 项目中找不到的桥接问题](https://stackoverflow.com/questions/11662426/audioservices-h-not-found-in-objective-c-ios-project-that-includes-audiotoolbox)

基本上你需要在这三个地方使用 (__bridge void*)self 。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-21T15:33:30.020

```
AudioSessionInitialize(NULL, NULL, interruptionListener, (__bridge void*)self); 
```

因为您使用的是*ARC*，所以您需要`(void *)`转入`(__bridge void*)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T14:43:26.710

您需要确保您的代码中有以下导入：

```
#import <AudioToolbox/AudioToolbox.h> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T16:59:51.197

将 AudiToolbox 框架添加到构建阶段，然后

```
#import <AudioToolbox/AudioToolbox.h> 
```

![构建阶段](../Images/b33840ed1c1a2337f1561433dc61cebb.png)

# java - 使用 GSON 反序列化嵌套的泛型类时的奇怪行为

> ID：14503881
> 
> 赞同：15
> 
> 时间：2013-01-24T14:40:25.417
> 
> 标签：java, oop, generics, reflection, gson

我正在编写一个将连接到服务器并基于一些参数的类，检索一个 json 字符串，该字符串将使用 GSON 解析到指定的（通过泛型）类。

负责类的精简版如下所示：

```
class Executor<T> {

    private Response<T> response;

    public void execute() {
        Type responseType = new TypeToken<Response<T>>() {}.getType();
        this.response = new Gson().fromJson(json, responseType);
    }

    public Response<T> getResponse() { return this.response; }

} 
```

（-`JSON`变量[看起来像这样](http://pastebin.com/hgp1prri)。）

反序列化后存储数据的类如下所示：

```
class Response<T> {

    private List<T> data = null;

    public List<T> getData() { return this.data; }

} 
```

数据试图反序列化的类：

```
public class Language {
    public String alias;
    public String label;
} 
```

运行的代码利用了上面的类：

```
Executor<Language> executor = new Executor<Language();
List<Language> languages = executor.execute().getResponse().getData();
System.out.println(languages.get(0).alias); // exception occurs here 
```

这导致以下异常

> ClassCastException：com.google.gson.internal.StringMap 无法转换为 sunnerberg.skolbibliotek.book.Language

非常感谢任何帮助或建议！

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-24T16:33:24.843

简短的回答是，您需要移动`TypeToken`out of的创建，在创建令牌 () 时`Executor`绑定`T`in ，并将类型令牌传递给构造函数。`Response<T>``new TypeToken<Response<Language>>() {}``Executor`

长答案是：

类型上的泛型通常在运行时被擦除，除非该类型是使用泛型参数绑定*编译的。*在这种情况下，编译器会将泛型类型信息插入到编译后的类中。在其他情况下，这是不可能的。

例如，考虑：

```
List<Integer> foo = new ArrayList<Integer>();

class IntegerList extends ArrayList<Integer> { ... }
List<Integer> bar = new IntegerList(); 
```

在运行时，Java*知道* `bar`包含整数，因为`Integer`类型是在编译时绑定的`ArrayList`，所以泛型类型信息保存在`IntegerList`类文件中。但是，for 的泛型类型信息`foo`被删除，因此在运行时实际上不可能确定`foo`应该包含`Integer`s。

所以经常会出现我们需要泛型类型信息的情况，它通常会在运行前被擦除，例如在 GSON 中解析 JSON 数据的情况下。在这些情况下，我们可以利用类型信息在编译时（如`IntegerList`上面的示例）绑定时保留的事实，使用[类型标记](http://gafter.blogspot.com/2006/12/super-type-tokens.html)，它们实际上只是方便存储泛型类型信息的微小匿名类。

现在到您的代码：

```
Type responseType = new TypeToken<Response<T>>() {}.getType(); 
```

在您的`Executor`类的这一行中，我们创建了一个匿名类（继承自`TypeToken`），它`Response<T>`在编译时具有硬编码（绑定）的类型。所以在运行时，GSON 能够确定您想要一个`Response<T>`. 但它不知道是什么`T`，因为您没有在编译时指定它！所以 GSON 无法确定它创建`List`的`Response`对象的类型是什么，它只是创建了一个`StringMap`。

这个故事的寓意是您需要`T`在编译时指定它。如果`Executor`要通用使用，您可能需要在该类之外的客户端代码中创建类型标记。就像是：

```
class Executor<T> {

    private TypeToken<Response<T>> responseType;
    private Response<T> response;

    public Executor(TypeToken<Response<T>> responseType) {
        this.responseType = responseType;
    }

    public void execute() {
        this.response = new Gson().fromJson(json, responseType.getType());
    }

    public Response<T> getResponse() { return this.response; }

}

// client code:
Executor<Language> executor = new Executor<Language>(new TypeToken<Response<Language>>() { });
executor.execute();
List<Language> languages = executor.getResponse().getData();
System.out.println(languages.get(0).alias); // prints "be" 
```

顺便说一句，我确实在我的机器上测试了上述内容。

对不起，如果那太长了！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T16:36:58.590

你没有在这个声明`response.execute();`之后打电话。`Executor<Language> executor = new Executor<Language>();`您不能在这里使用 java 泛型，但是您可以使用以下代码获得相同的效果。

响应.java

```
import java.io.Serializable;
import java.util.List;

/**
 *
 * @author visruth
 */
public class Response<T> implements Serializable {

    private List<T> data = null;

    public List<T> getData() {
        return this.data;
    }

    public void setData(List<T> data) {
        this.data = data;
    }

} 
```

语言.java

```
import java.io.Serializable;

/**
 *
 * @author visruth
 */
public class Language implements Serializable {
    private String alias;
    private String label;

    public String getAlias() {
        return alias;
    }

    public void setAlias(String alias) {
        this.alias = alias;
    }

    public String getLabel() {
        return label;
    }

    public void setLabel(String label) {
        this.label = label;
    }

} 
```

最后，Executor.java

```
import com.google.gson.Gson;
import java.util.*;

/**
 *
 * @author visruth
 */
public class Executor<T> {
private Response<T> response;

    public Response<T> getResponse() {
        return response;
    }

    /**
     * @param args the command line arguments
     */
    public void executor() {
        //sample data
        Response<Language> response=new Response<Language>();
        Language lan1=new Language();
        lan1.setAlias("alias1");
        lan1.setLabel("label1");
        Language lan2=new Language();
        lan2.setAlias("alias2");
        lan2.setLabel("label2");
        List<Language> listOfLangauges=new ArrayList<Language>();
        listOfLangauges.add(lan1);
        listOfLangauges.add(lan2);
        response.setData(listOfLangauges);
        Gson gson=new Gson();
        String json = gson.toJson(response);

        System.out.println(json);
        Response<Language> jsonResponse = gson.fromJson(json, Response.class);
        List list=jsonResponse.getData();

        List<Language> langs=new ArrayList<Language>();            
        for(int i=0; i<list.size(); i++) {            
        Language lan=gson.fromJson(list.get(i).toString(), Language.class);
        langs.add(lan);
        //System.out.println(lan.getAlias());
        }
        Response<Language> responseMade=new Response<Language>();
        responseMade.setData(langs);
        this.response=(Response<T>) responseMade;

    }
} 
```

您可以按如下方式对其进行测试

```
Executor<Language> executor = new Executor<Language>();
executor.executor();
List<Language> data = executor.getResponse().getData();
for(Language langu: data) {
    System.out.println(langu.getAlias());
    System.out.println(langu.getLabel());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T16:22:01.263

您的问题与 java 类型擦除有关。泛型仅在编译时已知。

可悲的是，GSON 无法使用反射知道它应该反序列化到哪个类。

# r - 故意使用不起作用的 R 代码编写降价文档

> ID：14503882
> 
> 赞同：3
> 
> 时间：2013-01-24T14:40:31.310
> 
> 标签：r, markdown, knitr

我正在尝试使用 Markdown 为涉及一些 R 编码的课程编写家庭作业问题。因为这些是作业集，所以我故意编写会引发错误的代码；。是否可以使用 Markdown 以代码样式显示 R 代码而不对其进行评估（或以某种方式捕获错误）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T15:12:09.290

如果您使用 R markdown，`eval=FALSE`则放入块选项应该可以工作。或使用`try()`. 或者，如果你也在使用`knitr`，我相信默认的块选项`error=FALSE`在遇到错误时实际上并没有停止编译，而是继续到下一个块（这有时让我发疯）。

# javascript - 显示 json 返回 undefined

> ID：14503891
> 
> 赞同：0
> 
> 时间：2013-01-24T14:40:50.023
> 
> 标签：javascript, json

> **可能重复：**
> [我有一个嵌套的数据结构/JSON，我怎样才能访问一个特定的值？](https://stackoverflow.com/questions/11922383/i-have-a-nested-data-structure-json-how-can-i-access-a-specific-value)

基本上我有一个像这样返回的 json 对象：

```
"products":[
    {
        "id": "21102165",
        "name": "Eliza J (3/4 sleeve ruched waist dress)",
    }] 
```

我的显示方法：

```
function getCart(){
var json = $.getJSON('https://'+storedomain+'/cart?'+fcc.session_get()+'&output=json&callback=?');
alert(json['name']);
} 
```

但是警报显示“未定义”。我在哪里做错了？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T14:42:21.933

`$.getJSON` return $.Deferred object and not a result

```
function getCart(){
    $.getJSON('https://'+storedomain+'/cart?'+fcc.session_get()+'&output=json&callback=?', function(data) {
        console.log(data.products[0].name);
    });
} 
```

you can do:

```
function getCart(){
    return $.getJSON('https://'+storedomain+'/cart?'+fcc.session_get()+'&output=json&callback=?');
}  

$.when(getCart()).then(function(data) {
    console.log(data.products[0].name);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:44:38.323

使用成功回调。

```
var jqxhr = $.getJSON("example.json", function(data, textStatus, jqXHR) {
  alert("success");
})
.success(function(data, textStatus, jqXHR) { alert("second success"); })
.error(function() { alert("error"); })
.complete(function() { alert("complete"); }); 
```

请参阅[getJSON](http://api.jquery.com/jQuery.getJSON/)的 API 文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T14:48:47.330

你的方法应该是：

```
function getCart(callback) {
    var url = 'https://'+storedomain + '/cart?'+fcc.session_get()+'&output=json&callback=?';
    $.getJSON(url, callback);
}

// Usage
getCart(function(data) {
    console.log(data.products); // array of car objects
}); 
```

或者您可以使用 salexch 回答中解释的延迟对象。

您应该熟悉 AJAX 请求的异步特性和回调函数。

# c++ - 'operator=' 的模棱两可的重载与 c++11 std::move 以及复制和交换习语

> ID：14503892
> 
> 赞同：8
> 
> 时间：2013-01-24T14:40:54.447
> 
> 标签：c++, c++11, operator-overloading, overload-resolution, copy-and-swap

我收到以下错误：

```
[matt ~] g++ -std=c++11 main.cpp -DCOPY_AND_SWAP && ./a.out
main.cpp: In function ‘int main(int, const char* const*)’:
main.cpp:101:24: error: ambiguous overload for ‘operator=’ in ‘move = std::move<Test&>((* & copy))’
main.cpp:101:24: note: candidates are:
main.cpp:39:7: note: Test& Test::operator=(Test)
main.cpp:52:7: note: Test& Test::operator=(Test&&) 
```

编译以下代码时：

```
#include <iostream>
#include <unordered_map>
class Test final {
public:
  typedef std::unordered_map<std::string, std::string> Map;
public:
  Test();
  explicit Test(Map&& map);
  ~Test();
  Test(const Test& other);
  Test(Test&& test);
#ifdef COPY_AND_SWAP
  Test& operator=(Test other);
#else
  Test& operator=(const Test& other);
#endif
  Test& operator=(Test&& other);
  size_t Size() const noexcept;
  friend void swap(Test& lhs, Test& rhs);
private:
  friend std::ostream& operator<<(std::ostream& stream, const Test& test);
private:
  Map map_;
};
Test::Test() : map_() {
  std::cerr << "Default constructor called" << std::endl;
};
Test::Test(const Test& other) : map_(other.map_) {
  std::cerr << "Copy constructor called" << std::endl;
};
Test::Test(Test&& other) : map_(std::move(other.map_)) {
  std::cerr << "Move constructor called" << std::endl;
};
Test::Test(Map&& map) : map_(std::move(map)) {
  std::cerr << "Map constructor called" << std::endl;
};
Test::~Test() {};
#ifdef COPY_AND_SWAP
Test& Test::operator=(Test other) {
  std::cerr << "Copy and swap assignment called" << std::endl;
  using std::swap;
  swap(this->map_, other.map_);
  return *this;
}
#else
Test& Test::operator=(const Test& other) {
  std::cerr << "Copy assignment called" << std::endl;
  this->map_ = other.map_;
  return *this;
}
#endif
Test& Test::operator=(Test&& other) {
  std::cerr << "Move assignment called" << std::endl;
  this->map_ = other.map_;
  other.map_.clear();
  return *this;
}
size_t Test::Size() const noexcept {
  return map_.size();
}
void swap(Test& lhs, Test& rhs) {
  using std::swap;
  swap(lhs.map_, rhs.map_);
}
std::ostream& operator<<(std::ostream& stream, const Test& test) {
  return stream << test.map_.size();
}
int main (const int argc, const char * const * const argv) {
  using std::swap;
  Test::Map map {
    {"some", "dummy"},
    {"data", "to"},
    {"fill", "up"},
    {"the", "map"}
  };
  std::cout << " map size(): " << map.size() << std::endl;
  std::cout << "Constructing" << std::endl;
  Test test(std::move(map));
  std::cout << " map.size(): " << map.size() << std::endl;
  std::cout << "test.Size(): " << test.Size() << std::endl;
  std::cout << "Copy construction" << std::endl;
  Test copy(test);
  std::cout << "copy.Size(): " << copy.Size() << std::endl;
  std::cout << "Move construction" << std::endl;
  Test move(std::move(copy));
  std::cout << "move.Size(): " << move.Size() << std::endl;
  std::cout << "copy.Size(): " << copy.Size() << std::endl;
  std::cout << "Swapping" << std::endl;
  swap(move, copy);
  std::cout << "move.Size(): " << move.Size() << std::endl;
  std::cout << "copy.Size(): " << copy.Size() << std::endl;
  std::cout << "Swapping back" << std::endl;
  swap(move, copy);
  std::cout << "move.Size(): " << move.Size() << std::endl;
  std::cout << "copy.Size(): " << copy.Size() << std::endl;
  std::cout << "Copy assignment" << std::endl;
  copy = test;
  std::cout << "test.Size(): " << test.Size() << std::endl;
  std::cout << "copy.Size(): " << copy.Size() << std::endl;
  std::cout << "Move assignment" << std::endl;
  move = std::move(copy);
  std::cout << "move.Size(): " << move.Size() << std::endl;
  std::cout << "copy.Size(): " << copy.Size() << std::endl;
 return 0;
} 
```

编译时`g++ -std=c++11 main.cpp && ./a.out`：

```
[matt ~] g++ -std=c++11 main.cpp && ./a.out
 map size(): 4
Constructing
Map constructor called
 map.size(): 0
test.Size(): 4
Copy construction
Copy constructor called
copy.Size(): 4
Move construction
Move constructor called
move.Size(): 4
copy.Size(): 0
Swapping
move.Size(): 0
copy.Size(): 4
Swapping back
move.Size(): 4
copy.Size(): 0
Copy assignment
Copy assignment called
test.Size(): 4
copy.Size(): 4
Move assignment
Move assignment called
move.Size(): 4
copy.Size(): 0 
```

有人可以帮我理解为什么在这种情况下使用复制和交换习语时会出现歧义吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-24T14:50:51.017

出于重载解决目的，函数

```
Test& operator=(Test other);
Test& operator=(Test&& other); 
```

是相等的，因为分别用于转换为 Test 和 Test&& 的隐式转换序列是相等的。前者并不好，因为直接引用绑定也被认为是一种身份转换。

当遇到 2 个同样好的匹配的歧义时，编译器会给出错误。你可能想要这个：

```
#ifdef COPY_AND_SWAP
  Test& operator=(Test other);
#else
  Test& operator=(const Test& other);
  Test& operator=(Test&& other);
#endif 
```

# mysql - mysql 计数查询给出 1

> ID：14503894
> 
> 赞同：0
> 
> 时间：2013-01-24T14:41:01.047
> 
> 标签：mysql, sql

我错误地运行查询

```
SELECT count(*) table_name 
```

学习行数。**它给出 1 作为结果**。你知道这个结果“1”是什么意思吗？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:42:47.933

Simple.

The **table contains 1 record**.

Basically `COUNT` returns the number of records found on the table.

*   [COUNT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_count)

# sql - 优化 CTE 查询

> ID：14503895
> 
> 赞同：0
> 
> 时间：2013-01-24T14:41:03.707
> 
> 标签：sql, sql-server, sql-server-2008

昨天我问了一个关于 CTE 和运行总计算的问题；

[使用上一行的值计算信息](https://stackoverflow.com/questions/14485167/calculating-information-by-using-values-from-previous-line/14490643#14490643)

我想出了一个解决方案，但是当我将它应用到我的实际数据库（超过 450 万条记录）时，它似乎需要很长时间。在我停止之前，它运行了 3 个多小时。然后我尝试在一个子集上运行它（CTEtest 为（选择前 100 名）），它已经运行了一个半小时。是不是因为在选择前100名之前还需要贯穿整个事情？或者我应该假设如果这个查询需要 2 个小时来处理 100 条记录，那么需要几天来处理 450 万条记录？我该如何优化呢？

有什么方法可以查看查询还剩多少时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:53:34.313

我认为您最好将运行总和作为相关子查询进行。这将允许您更好地管理索引以提高性能：

```
select memberid,
       (select sum(balance - netamt) as runningsum
        from txn_by_month t2
        where t2.memberid = t.memberid and
              t2.accountid <= t.accountid
       ) as RunningSum
 from txn_by_month t 
```

有了这个结构，一个索引就`txn_by_month(memberid, accountid, balance, netamt)`应该能够满足这部分查询，而不需要返回原始数据。

# ios - iOS 主屏幕上的 WebApp - 导航和打印？

> ID：14503896
> 
> 赞同：0
> 
> 时间：2013-01-24T14:41:05.440
> 
> 标签：ios, web-applications, ios6, homescreen

我已将网页作为 WebApp 添加到我的 iOS 6 主屏幕。但由于“启动”后没有浏览器 chrome，我遇到了一些问题： - 如何在从主屏幕启动的网站中导航？- 我可以在网页中提供特殊链接（例如到谷歌地图）来强制 iOS 启动真正的 Safari 浏览器吗？- 如何从此类网页中访问打印功能 - 普通的 safari 打印按钮不可用？- 邮件链接在 webApps 中不起作用？(mailto:) 我怎样才能让它们工作或强制主屏幕中的 webapp 链接在真正的 Safari 浏览器中打开？

谢谢，康拉德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:49:57.657

如果您要让用户将您的网站/网页添加到他们的主屏幕并用作 Web 应用程序，您需要在用户正在查看的网页中构建自己的控件。

常见的 Web 应用程序使用诸如[jQuery Mobile](http://jquerymobile.com)之类的框架，该框架构建了诸如页内导航之类的基本功能。

# c# - 如何将对象持久保存到包含 asp.net 中其他对象列表的数据库？

> ID：14503897
> 
> 赞同：0
> 
> 时间：2013-01-24T14:41:08.517
> 
> 标签：c#, asp.net

我们有一堂课`X`。类`X`包含许多不同类型的列表，如下所示。所有列表都是数据库中的子表。

```
public class X
{
    public List<A> As { get; set; }
    public List<B> Bs { get; set; }
    public List<C> Cs { get; set; }
    public List<D> Ds { get; set; }
    public List<E> Es { get; set; }
} 
```

我的存储库接受`X`并需要将所有列表持久保存到数据库中。

```
public void Save(X value)
{
    // Save code here
} 
```

保存所有子列表的最佳选择是什么？列表中的每种类型都映射到一个 db 表。所以在 db 中对于每个`A`, `B`, `C`, `D`,都有一个表`E`。

用于保存列表的每个表的方法。例：`InsertAsById(List<A> values, int id)`等等。然后在`Save()`. 使用这种方法，保存看起来像：

```
public void Save(X value)
{
    InsertAsById(value.As, value.id);
    InsertBsById(value.Bs, value.id);
    // So on for each list.
} 
```

我们必须使用 ADO.NET。没有框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:42:37.767

如果您仅限于使用 ADO.NET，我认为有两条路线。

第一个是使用 Datasets 和 DataAdapter 来执行更新（这么久了，我不确定术语是否正确）

第二种方法是逐个遍历记录并将插入/更新语句作为原始 SQL 发出。

您正在尝试使用较低级别的框架使高级操作变得容易，许多更现代的 ORM 提供了您需要的那种功能。

# html - 我想知道关于“？”的一切。动作属性值

> ID：14503898
> 
> 赞同：1
> 
> 时间：2013-01-24T14:41:08.567
> 
> 标签：html, forms, url, action

我想知道关于“？”的一切。形式的行动价值。正如您在下面的代码中看到的，我们有一个表格（放置在

一个php模板），它发送用户输入以“？”的值放入数据库中 对于动作属性：

```
<form action="?" method="post">
<div>
<label for="joketext">Type your joke here:</label>
<textarea id="joketext" name="joketext" rows="3" cols="40">
</textarea>
</div>
<div><input type="submit" value="Add"></div>
</form> 
```

我们还有另一个模板显示存储在我们数据库中的数据，正如您在下面的代码中看到的那样，该模板具有

带有链接的部分，以便通过单击该链接，用户可以在我们的数据库中添加数据（笑话）：

```
<body>
<p><a href="?addjoke">Add your own joke</a></p>
<p>Here are all the jokes in the database:</p>
<?php foreach ($jokes as $joke): ?>
<blockquote>
<p><?php echo htmlspecialchars($joke, ENT_QUOTES, 'UTF-8');
?>
</p>
</blockquote>
<?php endforeach; ?>
</body> 
```

我的第一个问题是为什么我们将 href 属性的值设置为“？addjoke”？我的意思是“？”的工作是什么？在“？addjoke”？

好吧，另一个问题是：我们的 index.php 文件中有一个 if 语句，如下所示：

```
if (isset($_GET['addjoke']))
{
include 'form.html.php';
exit();
} 
```

我无法理解 $_GET 数组中的“addjoke”变量。我的意思是我确切地知道 $_GET 数组的作用，但我不能

了解使用“addjoke”变量的整个想法。我的意思是“addjoke”到底在做什么？

所以很明显我在理解“？”方面有很多问题。URL中的字符，我需要你的帮助:)我所知道的

“？” 是当我们需要指向我们所在的同一页面时使用此值。正确的？

我也有其他问题，但这些问题将在下次提出；）提前非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:44:49.157

如果您有这样的网址：

[http://www.domain.com/index?myParam1=value1&myParam2=value2](http://www.domain.com/index?myParam1=value1&myParam2=value2)

这是对 www.domain.com 上的服务器的 GET 请求，它传递了两个参数。

```
myParam1 = value1
myParam2 = value2 
```

之后的一切？是查询字符串，并被视为要传递给服务器的查询参数。

所以在 PHP 中，可以使用这些参数的值来检索`$_GET['myParam1']`

这 ？本身表示查询字符串的开头（其中包含这些参数并且 & 分隔每个参数。

* * *

表单操作是表单将发布到的 URL。如果您指定 ? 您实际上是在说当前 url +“？”。这意味着它将使用 ? 将表单提交到当前 url 最后（实际上这并不是真正需要的）

另请注意，查询字符串参数仅在 GET 请求中传递。当您提交表单时`method=POST`，表单字段和值会在请求正文中提交。

* * *

所以在你的代码中，

```
if (isset($_GET['addjoke']))
{
    include 'form.html.php';
    exit();
} 
```

这两行仅在传递名为 addjoke 的查询字符串参数时才会执行（例如 ?addJoke=joke）。这意味着仅当 addjoke 参数在 URL 中时才包含该表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:55:47.143

只是为了补充@cowls 所说的内容，特别是`?`vs发生了什么`?addjoke`。当点击页面上的链接时，（比如 example.com/index.php），您会在 example.com/index.php?addjoke 结束。

现在，在 PHP 中，addjoke 是查询字符串的一部分，这意味着它在`$_GET`. 这就是为什么`if (isset($_GET['addjoke']))`存在；仅当转到`?addjoke`链接时才包含附加笑话表单。

现在，由于表单操作是`"?"`，一旦用户提交了一个笑话，他们就会立即返回正常页面，`example.com/index.php?`并且特定的 addjoke 代码就会消失。

希望能回答一些问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T14:56:45.640

URL 中的 ? 符号用于将参数与 HTTP GET 请求中的资源分开。举个例子：

```
http://www.example.com/resource/index.php?testvalue=123 
```

在这个例子中，目录资源中的脚本 index.php 被调用，并将设置名为 testvalue 的请求参数值为 123。只有第一个参数使用问号 (?)，其他参数将添加一个和号 (&)。

在您的示例中，您设置了一个没有任何值的 GET 参数。您也不应该混合使用 POST 和 GET 参数，我建议根据您的操作坚持使用其中一个（GET 用于数据检索，例如搜索，POST 用于用户输入）。

如果您需要任何进一步的信息，我建议您在 wikipedia 中查找[HTTP 动词以及](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods)[处理 GET 和 POST](http://php.net/manual/en/language.variables.external.php)参数的 PHP。

# security - 如何验证 iPhone 应用程序的内部 API？

> ID：14503902
> 
> 赞同：0
> 
> 时间：2013-01-24T14:41:24.510
> 
> 标签：security

我们有一个简单的 API，我们不希望外部世界使用，只希望我们的 iPhone 客户端使用。

如何为移动设备的 API 验证客户端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:51:03.517

如果您有客户端可以访问的 API，您将无法阻止确定的技术人员也使用您的 API（因为用户可以识别存储在客户端中的任何秘密）。

如果您只是想防止随意使用，那么对客户端进行身份验证的一种相对简单的方法是拥有一个存储在客户端中的共享静态机密，并将其与例如基于[HMAC 的 API 身份验证方案](http://docs.aws.amazon.com/AmazonSimpleDB/latest/DeveloperGuide/HMACAuth.html)一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T22:58:24.223

这是在内部类似于您所问的问题：

[使用我的服务器提供安全的 Facebook 身份验证](https://stackoverflow.com/questions/14456829/provide-secure-facebook-authentication-with-my-server/14507550#14507550)

这是我在那边回复的：

这称为远程证明。这有很多问题。

在你进入这个方向之前，你需要问自己两个问题

*   你在保护谁？

*   我愿意投资多少？

如果您要保护自己免受知识非常有限的学生的侵害，他可能会编写另一个将使用您的服务器的移动应用程序，那么您可以使用一些共享的秘密。

如果您只保护一点点更复杂的软件工程师（他们可以对您的应用程序进行逆向工程） - 这还不够。该工程师可以从您的应用程序中提取一个秘密并在他的应用程序中使用它。

[您可以在此处](http://en.wikipedia.org/wiki/Trusted_Computing#Remote_attestation)和[此处](http://web.cs.wpi.edu/~guttman/pubs/good_attest.pdf)阅读有关远程证明的信息。

可以保护您免受简单逆向工程的解决方案非常复杂。

# c - 为什么不允许对函数指针进行算术运算？

> ID：14503905
> 
> 赞同：1
> 
> 时间：2013-01-24T14:41:36.053
> 
> 标签：c

编译类型中函数地址的大小不是已知的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T14:45:34.423

指针上的算术运算将指针视为给定类型的对象数组。因此，当您将 3 添加到 an 时`int *`，您会前进 3 个`int`s。

函数指针不能被解释为任何东西的数组。说明，也许，也许不是。有些机器有单独的地址空间用于指令。有些机器有可变长度指令。

顺便说一句，*函数*的大小在编译时是已知的，但只有在编译器完成工作之后。在汇编语言中将函数的大小编译到自身中可能很棘手，汇编语言是唯一一种有希望形成这种结构的编程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:45:42.707

您只能对相关指针执行算术运算。例如，如果您有一个带有多个指向该缓冲区不同位置的指针的缓冲区，您可以对这些指针执行算术运算。但是，如果您尝试对两个不相关的指针执行指针运算，例如指向不同缓冲区的两个指针，那么这是*未定义的行为*。

除了指向同一函数的另一个指针之外，函数指针不能与任何东西相关。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-24T14:47:00.123

C 不允许或定义对函数指针的算术运算。你应该看看[这里](https://stackoverflow.com/questions/5085366/incrementing-function-pointers)。这是因为当您对函数指针进行加减运算时，它不会定义您将在代码中到达的位置。试想一下，您正在为不同的硬件架构编译相同的 C 代码。当您递增或递减函数指针时，它们可能指向完全不同的代码部分（或您所说的指令），这将在平台上不一致。

# sql - 如何将字符串转换为 SQL 中的位置列表？

> ID：14503906
> 
> 赞同：2
> 
> 时间：2013-01-24T14:41:39.243
> 
> 标签：sql, sql-server-2005

我目前有数据存储与命名期间关联的周数，如下所示，在包含 PERIOD 和 DATESTRING 列的表中

```
PERIOD  DATESTRING
Period1 NNYNYY    //The position of 'Y' indicates a yes, 'N' indicates no
Period2 NNNNNY
... 
```

因此，由于第 3 周是第 1 周期的一部分，因此该周期的日期字符串中的第 3 位有一个“Y”。

我需要将其转换为一个表，其中一列中包含句点，下一列中包含 Ys 的位置：

```
PERIOD  WEEKNUMBER
Period1 3
Period1 5
Period1 6
Period2 6
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:01:35.560

这是使用find （[**DEMO**](http://www.sqlfiddle.com/#!3/f8f2c/11) [）使用递归 CTE](http://msdn.microsoft.com/en-us/library/ms186243%28v=sql.90%29.aspx)执行此操作的另一种方法：[**`charindex`**](http://msdn.microsoft.com/en-us/library/ms186323.aspx)`Y`[](http://www.sqlfiddle.com/#!3/f8f2c/11)

 **```
with cte as (
  select period, charindex('Y', datestring) as weeknumber
    from Periods
   where charindex('Y', datestring) <> 0

  union all

  select p.period, charindex('Y', p.datestring, cte.weeknumber + 1) as weeknumber
    from periods p
    join cte on p.period = cte.period
   where charindex('Y', p.datestring, cte.weeknumber + 1) <> 0
)
select * from cte
order by period, weeknumber 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:52:19.813

您可以通过加入一个数字表并使用该`substring()`函数在每个位置获取一个字符来做到这一点：

```
with numbers as (
    select 1 as num
    union all
    select num + 1 from numbers
    where num < 53
)
select period,num from table1
    join numbers on substring(datestring,num,1) = 'Y'; 
```

这使用递归查询来构建数字表。

[这是在 SQL Fiddle](http://www.sqlfiddle.com/#!3/57df0/1)中。

我在 SQL Server 2008 上构建并测试了它，但我认为在 2005 年这样做应该不是问题。您最多只能对其进行调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T20:51:15.710

master..spt_values 系统表的另一种选择

```
SELECT PERIOD, number
FROM dbo.test29 t
  JOIN master..spt_values v ON v.type = 'P' 
    AND SUBSTRING(DATESTRING, number, 1) = 'Y' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T19:16:14.390

这里有一些想法给你。这是 Oracle 查询，但我认为它应该在任何 SQL 中工作，或者您可以将其修复为在 SQL Srv 2005 中工作。使用的所有函数都是 ANSI SQL 标准。我不确定2005年是否有LEVEL之类的东西......：

```
SELECT 'Period1'||' '||Y_Pos as Y_Pos FROM
(
 SELECT  distinct(Instr('NNYNYY', 'Y', LEVEL)) Y_Pos
   FROM dual
 CONNECT BY LEVEL <= Length('NNYNYY') 
ORDER BY 1
)
/

SQL>

Y_POS
----------
Period1 3
Period1 5
Period1 6 
```**

# sql - 使用sql提取字符串的一部分

> ID：14503909
> 
> 赞同：1
> 
> 时间：2013-01-24T14:41:43.463
> 
> 标签：sql, sql-server-2005, substring

我有一个字符串，其形式为

```
Text I Want to Discard (TEXT I WANT) 
```

我只想要括号中包含的字符串部分。我该如何获取这个子字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:51:43.560

这个怎么样：

```
select substring(col, charindex('(', col), len(col))  
from yourtable; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/06a9e/9)

或者检查两个括号。这将获取左括号的位置，`(`然后返回左括号和右括号之间的字符串长度：

```
select substring(col, charindex('(', col), charindex(')', col) - charindex('(', col) +1)
from yourtable; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/06a9e/14)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:46:57.410

试试下面...它的工作原理...

```
DECLARE @c varchar(100)
SET     @c = 'Text I Want to Discard (TEXT I WANT)' 
SET @c = Replace(Replace(@c,')','_'),'(','_');
SELECT SUBSTRING(
    @c, 
    CHARINDEX('_', @c) + 1, 
    LEN(@c) - CHARINDEX('_', @c) - CHARINDEX('_', REVERSE(@c))
) 
```

# authentication - 带有签名根证书和中间证书的 nginx ssl 客户端证书

> ID：14503912
> 
> 赞同：4
> 
> 时间：2013-01-24T14:41:49.900
> 
> 标签：authentication, ssl, nginx, ssl-certificate

我正在尝试设置 ssl 客户端身份验证。如果这有什么不同，我将使用startssl 作为CA。我从startssl获得了根​​证书、中间证书和客户端证书。我还有几个 s/mime 证书用于针对 startssl 网站进行身份验证。我想要完成的是为我自己的站点进行客户端证书身份验证。一切都使用自签名证书，但使用签名证书我感到困惑。

我有以下来自startssl的文件：

```
root.crt
intermediate.crt
ssl.crt
ssl.key
----------------
user@host-client.crt <- for authenticating against startssl 
```

然后对于 nginx 我运行：

```
cat ssl.crt intermediate.crt root.crt > unified.crt 
```

然后在 nginx 中：

```
server {
    listen        443;
    ssl on;
    server_name example.com;

    ssl_certificate      /etc/nginx/certs/unified.crt;
    ssl_certificate_key  /etc/nginx/certs/ssl.key;
    ssl_client_certificate /etc/nginx/certs/<WHAT GOES HERE>;
    ssl_verify_client on;

    location / {
        root           /var/www/example.com/html;
    }
} 
```

`ssl_client_certificate`如果我想使用startssl s/mime 证书，或者是否有可能，我不确定该使用什么。

如果我不能使用startssl s/mime 证书：在这样的教程中[，](https://gist.github.com/952344)我将使用什么作为ca.key 和ca.crt（可能是统一的ssl？）。

在任何一种情况下，我如何确定`ssl_verify_depth`？我已经找到了很多关于如何使用自签名密钥执行此操作的示例，但就使用签名密钥链而言，我的理解开始滞后。谢谢你的帮助！

# c++ - 检查 google-nativeclient 文件系统中是否存在目录？

> ID：14503920
> 
> 赞同：0
> 
> 时间：2013-01-24T14:42:12.057
> 
> 标签：c++, file-io, directory, google-nativeclient

[我正在尝试检查 Native Client文件系统](https://developers.google.com/native-client/dev/devguide/coding/FileIO)中是否存在目录，但找不到任何功能来执行此操作。我尝试为目录创建一个`PPB_FileRef`，然后使用打开该目录，`PPB_FileIO::Open`然后调用`PPB_FileIO::Query`但`PPB_FileIO::Open`返回`PP_ERROR_NOTAFILE`，然后第二次调用失败。

这是我一直在尝试的代码，为简洁起见，省略了一些初始化。

```
PP_Instance instance; // initialised elsewhere
PPB_FileRef *fileRefInterface; // initialised elsewhere
PPB_FileIO *fileIOInterface; // initialised elsewhere
PP_Resource fileSystemResource; // initialised elsewhere

PP_Resource fileRefResource = fileRefInterface->Create(
  fileSystemResource,
  "/directory");

PP_Resource fileIOResource = fileIOInterface->Create(instance);

// This call is returning PP_ERROR_NOTAFILE
//
int32_t result = fileIOInterface->Open(
  fileIOResource,
  fileRefResource,
  PP_FILEOPENFLAG_READ,
  PP_BlockUntilComplete()); // this is being called from a background thread.
if (result != PP_OK)
{
  return false;
}

PP_FileInfo info;
result = fileIOInterface->Query(fileIOResource, &info, PP_BlockUntilComplete());
if (result != PP_OK)
{
  return info.type == PP_FILETYPE_DIRECTORY;
}

return false; 
```

`PP_ERROR_NOTAFILE`from`PPB_FileIO::Open`的返回值是否`PPB_FileRef`足以让我告诉它是一个目录，还是我应该使用另一种更好的方法？

谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:04:25.640

是的，目前确定 a 是否`PPB_FileRef`引用目录的方法是尝试打开它并查找`PP_ERROR_NOTAFILE`返回值。

因为背景`PP_ERROR_NOTAFILE`是在创建分支之后添加的`pepper_25`，所以`pepper_26`在 SDK 中可用之前，应该使用开发以`pepper_canary`在`pp_errors.h`. 更多详细信息，请参阅相关的 Chrome[更改列表](http://git.chromium.org/gitweb/?p=chromium/src/ppapi.git;a=commitdiff;h=37634b05a36a902276a443a2be6d97f6a2d29154)，其中特别提到在尝试打开目录时使用此返回值。

当前的行为可以说有点不透明。有一个“开发”（实验性/未完成）界面`PPB_DirectoryReader`，发布后将提供一种更直接的方式来处理目录。

# virtual-machine - 如何打包不是使用 vagrant up 命令创建的现有 VM？

> ID：14503932
> 
> 赞同：43
> 
> 时间：2013-01-24T14:42:39.453
> 
> 标签：virtual-machine, virtualbox, packaging, vagrant

我安装了 VirtualBox，然后在其中安装了 Ubuntu 12.10 Server Base OS。我已经在其中安装了各种 php 包和其他包。我的朋友推荐我使用 Vagrant，这样我就可以轻松地与我的队友分享我的设置。

因为我当前的 VirtualBox VM 不是使用 创建的`vagrant up`，所以我不确定如何打包它。Vagrant的[文档](http://docs.vagrantup.com/v1/docs/getting-started/packaging.html)谈到了包装，但首先说：

> 在完成本页的其余部分之前，请确保虚拟环境是通过运行 vagrant up 构建的。

就我而言，我现有的 VM 最初不是使用 vagrant up 创建的。

如何打包现有的 VM？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-24T10:16:04.480

需要意识到的重要一点（并且 vagrant 文档对此并不太清楚）是包装有两种“风味”：

1.  您所指[的“入门”中](http://docs.vagrantup.com/v1/docs/getting-started/packaging.html)的包装指南假设*您已经从一个 vagrant base box 开始*并使用 初始化它`vagrant up`，而您没有。这允许您*打包您对 vagrant base box 所做的任何自定义*。
2.  如果您从头开始或从“普通”的 VirtualBox VM 开始，就像您一样，您需要创建一个[vagrant base box](http://docs.vagrantup.com/v1/docs/base_boxes.html)。您应该按照基于 Ubuntu的[指南进行操作。](http://docs.vagrantup.com/v1/docs/base_boxes.html)

有一个使用 Oracle Enterprise Linux[从头开始​​创建 vagrant box 的详细指南](http://pyfunc.blogspot.co.uk/2011/11/creating-base-box-from-scratch-for.html)，这可能会有所帮助。你也可以试试[VeeWee](https://github.com/jedi4ever/veewee)。

或者，您可以从[Ubuntu 12.10 基础盒](http://vagrantbox.es)开始并移植您的自定义，在这种情况下，您可以使用更简单的第一种打包方式。

### 更新

以上是指 Vagrant 1.0。1.1 中的情况略有变化，特别是文档已被重写：

1.  该`vagrant package` [命令](http://docs.vagrantup.com/v2/cli/package.html)允许您以与 1.0 相同的方式*打包您对现有 vagrant base box 所做的任何自定义。*
2.  [使用 VirtualBox 创建基本盒子](http://docs.vagrantup.com/v1/docs/base_boxes.html)的文档在 1.1 中已删除，但[文档](http://docs.vagrantup.com/v2/boxes.html)建议该过程保持不变，但现在[需要](http://docs.vagrantup.com/v2/boxes/format.html)`metadata.json`一个附加文件，因为 Vagrant 1.1 支持[多个提供程序](http://docs.vagrantup.com/v2/providers/)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-08-14T18:03:59.423

> vagrant package --output box_name.box --base "vm 机器名" --vagrantfile Vagrantfile

确保正确设置端口转发和 SSH 密钥。

这可能是一个很好的例子：[https ://github.com/okfn/ckan/wiki/How-to-Create-a-CentOS-Vagrant-Base-Box](https://github.com/okfn/ckan/wiki/How-to-Create-a-CentOS-Vagrant-Base-Box)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-06T00:01:13.263

任何 VirtualBox 都可以打包到 Vagrant Base Boxes（基本上是带有`Vagrantfile`.

**问题是**：VM 不是按照 vagrant base box 构建的，如果你没有在 vagrantbox.es 上共享它，那么它会没事的。

只需安装 vagrant（通过 gem 或安装程序），在 VM 文件夹中运行以下命令将其打包到 .box

**注意**：对于 Vagrant 1.2.x，推荐的安装方法是使用操作系统特定的包。Ruby Gem 不适用于 1.2.x。

`vagrant package --base ubuntu --output /path/to/ubuntu.box`

请记住，如果您想与其他人共享 vagrant base box，最好阅读文档并遵循这些规则，以便其他人更轻松。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-24T14:52:38.473

虽然不是一个完整的答案，但我认为您可以从文档中获得所需的内容，该文档非常广泛。我相信这`vagrant up`只是设置 Vagrant“盒子”的一种便捷方式。一个盒子要符合 Vagrant 有许多要求。它们在这里被描述...

文档：[Vagrant - 基础盒](http://docs.vagrantup.com/v1/docs/base_boxes.html)

一个盒子所需的裸骨如下......

*   VirtualBox Guest Additions 用于共享文件夹、端口转发等。
*   对 vagrant 用户具有基于密钥的身份验证支持的 SSH
*   Ruby & RubyGems 安装 Chef 和 Puppet
*   Chef 和 Puppet 提供配置支持

一旦一个盒子符合这些要求，它应该只是使用`vagrant package`命令来创建一个便携式安装的问题......

更多文档：[Vagrant - Boxes](http://docs.vagrantup.com/v1/docs/boxes.html)

所以，虽然我没有一个完整的答案，但我从来没有这样做过，我认为有可能让你的安装进入一个允许你打包和分发它的状态。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-03-26T15:41:28.147

使用“VBoxManage list vms”命令！我将它与 sudo 一起使用，只是看到没有列出 VMS。因此，对正确的经过身份验证的用户使用该命令。上面的答案也有助于制作盒子。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-13T20:59:38.433

就个人而言，包装过程的虚幻方面是`--base`开关。我怀疑很多人可能都是这种情况。查看`vagrant package --help`说明。[该文档](http://docs.vagrantup.com/v2/boxes/base.html)似乎也没有提及它。

我发现了这两个很棒的、深入的、逐步的指南，可以从最初是 VirtualBox 机器的机器创建 Vagrant 盒子：

1.  [如何创建 CentOS Vagrant Base Box](https://github.com/okfn/ckan/wiki/How-to-Create-a-CentOS-Vagrant-Base-Box)
2.  [为 Vagrant 从头开始​​创建基础框](http://pyfunc.blogspot.co.uk/2011/11/creating-base-box-from-scratch-for.html)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-10-18T08:57:39.677

如此处所述 - [http://sysadm.pp.ua/linux/sistemy-virtualizacii/vagrant-box-creation.html](http://sysadm.pp.ua/linux/sistemy-virtualizacii/vagrant-box-creation.html) 您需要三样东西才能导入和打包盒子：

*   安装访客添加
*   无密码 sudo
*   SSH 访问所以你只需要登录到你的 Ubuntu 12.10，安装 Vbox Guest 添加，添加用户“vagrant”和无密码 sudo 访问。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-11-04T09:48:57.577

如果您希望它与 vagrant 无缝工作，请查看更新的文档以找到您的盒子应该具备的所有特征：

[http://docs.vagrantup.com/v2/virtualbox/boxes.html](http://docs.vagrantup.com/v2/virtualbox/boxes.html)

您还应该看看一个名为 veewee 的伟大项目，它允许您从头开始编写 vagrant box 的生成脚本。这意味着 veewee 实际上会从您的发行版中下载 ISO 并将其安装在一个原始的 virtualbox 机器上，然后配置和安装所有依赖项。

它为所有不同类型的 linux 发行版提供了许多配方：

[https://github.com/jedi4ever/veewee](https://github.com/jedi4ever/veewee)

这里有更多的盒子。他们说他们是木偶盒，但他们与所有提供者（厨师、木偶和 shell 脚本）合作：

[https://github.com/puppetlabs/puppet-vagrant-boxes](https://github.com/puppetlabs/puppet-vagrant-boxes)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-11-22T11:35:55.817

您所指的“入门”中的包装指南假设您已经从一个 vagrant 基础框开始并使用 vagrant up 对其进行了初始化，而您没有。这允许您打包您对 vagrant base box 所做的任何自定义。

如果您从头开始或从“普通”`VirtualBox`虚拟机开始，就像您所做的那样，您需要创建一个 vagrant base box。您应该按照基于 Ubuntu 的指南进行操作。

# c# - assembly file discovery

> ID：14503944
> 
> 赞同：0
> 
> 时间：2013-01-24T14:43:11.143
> 
> 标签：c#, .net, wpf, visual-studio, assemblies

Assuming I have a wpf solution like the one below, how can I discover the file structure of "SatAssembly"?

```
- EntryAssembly
  -- code files

- SatAssembly
  -- GlobalizationFolder  
     -- en-US Folder  
         -- resourceDictionary.xaml  
     -- es-ES Folder  
         -- resourceDictionary.xaml 
```

# MORE INFO

All I really want to wind up from the above example with is a set of strings "en-US' "es-Es"

I can use code below to get what I want, and I was wondering if there isn't a simpler way to get what are essentially directory names. Or is this as good as it gets?

```
var asm = Assembly.LoadFrom("SomeSatelliteAssembly.dll");
var stream = asm.GetManifestResourceStream(asm.GetName().Name + ".g.resources");
using (var reader = new ResourceReader(stream))
{
    foreach (var o in reader.Cast<DictionaryEntry>())
    {
        // massage the keys as needed
    }
}

// ** output of keys for "SatAssembly" ***
globalization/en-US/resourcedictionary.baml    
globalization/es-ES/resourcedictionary.baml 
```

# android - How to extract embedded files from pdf using MuPDF

> ID：14503948
> 
> 赞同：2
> 
> 时间：2013-01-24T14:43:24.780
> 
> 标签：android, pdf, mupdf

My app on iOS extracts embedded files from PDF. Now, i try to make Android app with same functionality using [MuPDF](http://www.mupdf.com/).

On iOS, I can use Quartz2d to extract embedded files:

1.  Access to root PDF dictionary (`CGPDFDocumentGetCatalog`)
2.  Get files array (Names > EmbeddedFiles > Names) and itarate through it
3.  Copy file stream contents from file dictionary (EF > F) to `NSData` and save it.

Is there any way to do this with MuPDF?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:44:17.517

基于 pdfextact.c 的解决方案看起来像蛮力，但它有效：

1.  遍历所有 pdf 对象 ( `pdf_load_object`)
2.  确定对象是否为嵌入文件 ( `isembed`)
3.  如果是 - 访问它的流并保存文件（`saveembed`）

在大多数测试用例中，嵌入文件存储在文件末尾，因此，reverce 迭代是有意义的。

```
static int isembed(pdf_obj *obj) {
    pdf_obj *type = pdf_dict_gets(obj, "Type");
    return pdf_is_name(type) && !strcmp(pdf_to_name(type), "Filespec");
}

static void saveembed(pdf_obj *dict) {
    char *filename;

    pdf_obj *obj = pdf_dict_gets(dict, "F");
    if (obj) filename = pdf_to_str_buf(obj);

    obj = pdf_dict_gets(dict, "EF");
    if (!obj) return;

    pdf_obj *stream = pdf_dict_gets(obj, "F");
    if (!stream) return;

    FILE *f;
    fz_buffer *buf;
    int n, len;
    unsigned char *data;

    buf = pdf_load_stream(doc, pdf_to_num(stream), pdf_to_gen(stream));

    printf("extracting embedded file %s\n", filename);

    f = fopen(filename, "wb");

    len = fz_buffer_storage(ctx, buf, &data);
    n = fwrite(data, 1, len, f);

    fclose(f);
    fz_drop_buffer(ctx, buf);
} 
```

# c++ - removing some elements from a vector by position

> ID：14503950
> 
> 赞同：0
> 
> 时间：2013-01-24T14:43:27.020
> 
> 标签：c++, vector

what is the fastest way to remove a set of non-contiguous elements (which I have their positions) from a vector ? Or getting a new vector without these elements.

For example I have vector v1 = <5, 9, 6, 7, 12, 0, 3>. And I have a vector of positions that I want to eliminate vector rem = <0, 3, 4, 6> or a vector containing true/false depending on whether or not the element should be eliminated or not vector rem = . Then the new vector would be vector v2 = <9, 6, 0>.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T14:49:33.837

如果原始向量中元素的顺序无关紧要，我建议您以递增的顺序迭代要删除的索引（这很重要），并让每个元素将其与向量中的最后一个元素交换，然后调用`pop_back`.

在执行交换之前，您还必须执行检查以查看是否要删除向量的最后一个元素。虽然最后一个元素的索引也在要删除的元素中`pop_back`，**然后**进行交换和`pop_back`.

编辑：只是为了澄清-由于您已经对要删除的元素的索引进行了排序，因此您可以通过简单地检查索引数组中**尚未删除的最后一个值来检查是否要删除最后一个元素。**使用辅助整数索引来跟踪该索引是哪个索引，将其初始化为要删除的索引数组的大小减一，并在每次要删除最后一个元素时将其减一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:53:08.600

以最快的速度，我假设使用最少的代码和一些优化：

```
size_t i = 0;
size_t end = v1.size();
vector<int> vresult;

vresult.reserve(v1.size() - rem.size()); // avoid reallocations

size_t remIt = 0;
for ( ; i != end; ++i )
{
  if ( i != rem[remIt] )
    vresult.push_back(v1[i]); // push our element into the new vector
  else
    remIt++;
} 
```

可能无法编译，上面的代码纯粹是为其算法编写的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T14:49:39.363

我会一起遍历向量，有点像合并算法。像这样的东西：

```
int index1=0, index2=0;

while (index1 < v1.size()) {
    if ( index2 < rem.size() && index1 == rem[index2] ) {
        index2++; // skip this one
    }
    else {
        v2.push_back(v1[index1]); // keep this one
    }

    index1++;
} 
```

使用迭代器会更干净，并注意`rem`必须对向量进行排序。

编辑：通过使用索引向量的第三个变量名称进行更正。

# jquery - High Charts、饼图定制

> ID：14503957
> 
> 赞同：1
> 
> 时间：2013-01-24T14:43:37.347
> 
> 标签：jquery, highcharts

我必须进行一些自定义，例如： 1\. 将鼠标指针移到饼图上。2.在大/大切片内显示标签。3\. 在 mouseover/mouseout 高亮显示相应的 div。

参考img： ![在此处输入图像描述](../Images/507a3c443d71ff716408a2eb6bb23d2f.png) 这是jsfiddle，我已经努力实现3点：在鼠标悬停时我可以突出显示所选内容，但在鼠标移出时无法删除颜色

**HTML**

```
 <div class="grid_5">
<div class="grid_4" id="top_states_chart" style="min-width: 200px; height: 200px; margin: 0 auto"></div>
<div class="grid_4 right">
    <div class="Others level1">Maharastra</div>
    <div class="Firefox level2">Karnataka</div>
    <div class="level3">Gujarat</div>
    <div class="level4">Tamil Nadu</div>
    <div class="level5">Madhya Pradesh</div>
</div>
</div> 
```

**jQuery**

```
$(function () {
    var chart;
    Highcharts.setOptions({
        colors: ['#fffccc', '#ED561B', '#DDDF00', '#24CBE5', '#64E572', '#FF9655', '#FFF263',      '#6AF9C4']
       });
    $(document).ready(function () {

        // Build the chart
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'top_states_chart',
                plotBackgroundColor: null,
                plotBorderWidth: null,
                plotShadow: false
            },
            title: {
                text: ''
            },
            tooltip: {
                //pointFormat: '',//{series.name}: <b>{point.percentage}%</b>
                //percentageDecimals: 1
                formatter: function() {
                    return false;
                }
            },
            plotOptions: {
                pie: {
                    allowPointSelect: false,
                    cursor: 'pointer',
                    dataLabels: {
                        enabled: false
                    },
                    showInLegend: false,
                    point: {
                        events: {
                            mouseOver: function(event) {
                                var point = this;

                                $('div.'+point.name).css({'background-color':'green', 'cursor':'pointer'});
                             }
                        }
                    },
                    events: {
                        mouseOut: function() {
                            //pieChart.tooltip.hide();
                            var point = this;

                            $('div.'+point.name).css({'background-color':'none', 'cursor':'pointer'});
                        }
                    }
                }
            },
            series: [{
                type: 'pie',

                data: [
                    ['Firefox',   45.0],
                    ['Others',   55.7]
                ]
            }]
        });
    });

}); 
```

[http://jsfiddle.net/XErNG/135/](http://jsfiddle.net/XErNG/135/)

请看一下这个js代码。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:45:09.063

使用`mouseOver`和`mouseOut`作为事件。
用于`togleClass`切换样式。

```
pie: {
    allowPointSelect: false,
    stickTracking: false,

    // solves problem 1
    cursor: 'normal',

    // the following solves problem 2
    dataLabels: {
        enabled: false,
        formatter: function () {
            return this.y;
        },
        distance: -30
    },

    // the following solves problem 3
    point: {
        events: {
            mouseOver: function() {
                $('div.' + this.name).addClass('highlight');
            },
            mouseOut: function() {
                $('div.' + this.name).removeClass('highlight');
            }
        }
    }
} 
```

那么你的系列日期应该是：

```
data: [
    ['Firefox', 45.0],
    {
        name: 'Others',
        y: 55.7,
        dataLabels: {
            enabled: true
        }
    }
] 
```

CSS

```
.highlight {
    background-color: red;
} 
```

[**演示**](http://jsfiddle.net/jhAD8/)

# sql - 从出生日期开始按年龄分组 SQL Server

> ID：14503964
> 
> 赞同：1
> 
> 时间：2013-01-24T14:44:05.690
> 
> 标签：sql, sql-server, group-by

我试图显示从出生日期列计算的每个年龄的计数，但问题是它只会按出生日期分组，因此显示了很多重复的年龄。这是我的查询：

```
SELECT 
    DATEDIFF(hh, p.p_dob, GETDATE())/8766 AS Age,
    COUNT(DISTINCT s.s_studentreference) AS 'Count'    
FROM 
    moduleenrolment e
INNER JOIN 
    module m ON m.m_id = e.e_module
INNER JOIN 
    person p ON p.p_id = e.e_student
INNER JOIN 
    student s ON s.s_id = p.p_id
WHERE 
    m.m_reference LIKE '11%'
    AND LEN(m.m_reference) <= 12
    AND e.e_status IN ('A', 'W', 'C')
GROUP BY 
    p.p_dob
ORDER BY 
    p.p_dob DESC 
```

这是结果的示例

```
12  1
13  1
14  1
14  1
14  1
14  1
14  1
14  1
14  1
14  1
14  1 
```

我一直在寻找的是

```
12 1
13 1
14 9 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T14:45:46.980

Group by 和 order by`DATEDIFF(hh, p.p_dob, GETDATE())/8766`而不是`p.p_dob`

通过分组`p.p_dob`，您实际上是按唯一出生日期而不是计算年龄分组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:50:14.693

如果在您使用的 SQL Server 版本上可用，请检查 RANK()/DENSE_RANK() 函数。它将帮助您在年龄组中排名。您按年龄对查询进行分区并对其进行排名。相同的年龄将具有相同的等级，lk 所有年龄为 14 的行将始终具有等级 1、15 - 等级 2 等...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T14:47:47.873

您是按实际出生日期分组，而不是按年龄分组。不确定它是否会起作用，但请尝试将您的计算放在您的 group by 语句中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-07T08:00:49.680

你可以尝试这样的事情：

```
SELECT TRUNC (MONTHS_BETWEEN (SYSDATE, SS.DATE_OF_BIRTH) / 12)
from (YOUR TABLE) SS 
```

* * *

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-12-20T18:59:51.660

有时您的日期函数在您的 Oracle 数据库中不起作用。那个时候你不要惊慌；试试这个：

```
SELECT * FROM
   (SELECT CEIL(ROUND(SYSDATE - HIRE_DATE)/365.22) AS AGE , HIRE_DATE
    FROM EMP_DUPLICATE WHERE EMP_ID = 100 ) 
```

# c++ - 将 socket.io-client-cpp 和 boost 包含到 Windows 8 C++ 应用程序中

> ID：14503966
> 
> 赞同：0
> 
> 时间：2013-01-24T14:44:07.270
> 
> 标签：c++, boost, windows-8, c++-cx

[这个问题与我之前的](https://stackoverflow.com/questions/14486655/socket-io-documentation-for-windows-8-modern-metro-app-with-messagewebsocket) [两个](https://stackoverflow.com/questions/14468894/windows-8-messagewebsocket-http-request-garbage)问题密切相关。

我已经构建并将 boost 1.51 包含到我的项目中。

在我的 Socket.IO 接口文件（连同 pch.h）中，这是我包含的顺序：

```
#include <wrl.h>
#include <dwrite_1.h>
#include <wincodec.h>
#include <agile.h>
#include "types.h"
#include <cstdint>
#include <stdint.h>
#include <climits>
#include <cstdlib>
#include "boost/cstdint.hpp"
#include "boost/asio.hpp"
#include "boost/bind.hpp"
#include <sio_client_handler.hpp>
#include "boost/thread.hpp" 
```

当我编译我的代码时，我得到以下输出（只有前几行）：

> 错误 1 ​​错误 C2039: 'int_least8_t' : is not a member of '`global namespace'' (SocketIO.cpp) c:\program files (x86)\microsoft visual studio 11.0\vc\include\cstdint
> 
> 错误 2 错误 C2873: 'int_least8_t' : 符号不能用于 using-declaration (SocketIO.cpp) c:\program files (x86)\microsoft visual studio 11.0\vc\include\cstdint
> 
> 错误 3 错误 C2039: 'int_least16_t' : is not a member of '`global namespace'' (SocketIO.cpp) c:\program files (x86)\microsoft visual studio 11.0\vc\include\cstdint
> 
> 错误 4 错误 C2873: 'int_least16_t' : 符号不能用于 using-declaration (SocketIO.cpp) c:\program files (x86)\microsoft visual studio 11.0\vc\include\cstdint

以上错误有100多个。

我正在使用 Microsoft Visual Studio 2012 Express C++，但无法提出或找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:01:51.403

您将 C 库头文件与 C++ 库头文件混合在一起（这种风格很糟糕），尤其是您`<cstdint>`之前是否包含`<stdint.h>`. IIRC，`<cstdint>`Visual C++ 仅包含`<stdint.h>`命名空间 std。这意味着，你不会做任何事情（因为包含警卫）`#include`。`<stdint.h>`此外，`int_least8_t`等将*仅*驻留在命名空间 std 中，而不驻留在全局命名空间中。

我不太确定这在 VS 2012 中是否正确，但您可以通过深入研究`<cstdint>`.

在任何情况下，请参考命名空间 std 中的那些类型，因为那是它们应该位于的符合标准的命名空间。如果您经常使用它们（看起来如此），请使用 using 指令将它们导入您正在工作的任何命名空间：

```
#include <cstdint>
//#include <stdint.h> <-- leave that one out, it's not C++ standard!

std::int_least8_t myIL8 = 5;

using std::int_least8_t;
int_least8_t anotherIL8 = 42; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:52:27.520

我最终创建了自己的 socket.io 客户端实现。这是一个与工作相关的项目，所以我需要获得许可才能公开发布它。

# python - Python 全局关键字与 Pylint W0603

> ID：14503973
> 
> 赞同：31
> 
> 时间：2013-01-24T14:44:36.113
> 
> 标签：python, global-variables, global, pylint

Pylint W0603 状态：

> *使用全局语句。*当您使用“global”语句更新全局变量时使用。PyLint 只是试图阻止这种用法。这并不意味着你不能使用它！

我想知道为什么会这样？有没有更多的 Pythonic 方式来修改函数内不可变的、模块范围的变量？是否建议将它们打包在字典等可变变量中？或者也许把整个模块变成类？

在我看来，当变量被建议为“私有”（以 _ 或 __ 为前缀）时，这个警告应该消失。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-24T16:00:36.970

全局变量的普遍使用会使维护成为一场噩梦，因为它们会跟踪程序的流程，有时会出现奇怪的错误，因为某些模块在其他模块更改变量值之前已经读取了变量并对其值采取了行动（这可能是由于在一些不相关的第三个模块中反转了两个 import 语句）。另请参阅[关于全局变量的维基百科条目](http://en.wikipedia.org/wiki/Global_variable)。

这就是为什么你应该避免可变全局变量、IMO 以及为什么 Pylint 发出警告（并且可能应该发出更多警告。检测`global`关键字的使用只是发现其中一些的一种简单方法）。

不要误会我的意思：我并不是说你不能使用全局变量。只是你应该避免使用它们。Python 中有很多关于全局变量的合法案例。只要你没有得到超过几个 W0603，你应该可以接受。

现在，Logilab（维护 Pylint 的公司，也是我曾经工作的地方）曾经不得不接管超过 50kloc 的 Python 代码的维护工作，其中包含大量重复和 100 多个可变全局变量。这是地狱。

解决全局变量的解决方案包括：

*   向需要访问变量的函数添加参数
*   使用类属性
*   使用实例属性（通过将您需要的值传递给类的构造函数）
*   将可变全局值集中在构建的配置对象中，以便在程序启动时实例化一次（使用环境变量、命令行、配置文件......），此后永远不会发生变异。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-24T16:18:48.853

我会替换这个：

```
the_file = None

def open_the_file(fname):
    global the_file
    the_file = open(fname)

def write_to_the_file(data):
    the_file.write(data)

open_the_file("boo")
write_to_the_file("Hi!") 
```

有了这个：

```
class FileProgram(object):
    def __init__(self):
        self.the_file = None

    def open_the_file(fname):
        self.the_file = open(fname)

    def write_to_the_file(data):
        self.the_file.write(data)

if __name__ == "__main__":
    prog = FileProgram()
    prog.open_the_file("boo")
    prog.write_to_the_file("Hi!") 
```

你可能会说，“这对我的简单任务来说太复杂了！” 好的，那么不要在你的程序上运行 pylint 。您不能要求 pylint 了解您的程序太小而无法使用良好的结构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T15:07:53.277

在 python 中，像这样共享全局数据的模块几乎是一个单例。你可以用一个`singleton`类来完成同样的事情，或者问问自己是否有任何理由真的*需要*一个单例。如果您*不需要*单例 - 使用常规类（实例）。如果您确实*需要*单例，请谷歌/搜索以确定您认为最适合您的模式。也许你确实想要一个模块 - 有一个利基`global`- 否则 Guido 很久以前就会从语言中删除它 - 这个利基恰好很小......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-28T14:45:59.980

同意将其重构为类是方法。有一些特殊情况，类不是最优的，那么我建议使用 dataclass

```
from dataclasses import dataclass

@dataclass
class Files:
    the_file = "fname"

files = Files()

def open_the_file():
    files.the_file = "123"  # You can edit it here 
```

这有一个很大的优势，如果你从其他模块导入它，它不是复制，而是引用，所以如果你在某处改变值，你仍然在任何地方得到正确的值。

But... usually making a class is the way. When to use this way? Personally I use it if I expect only one instance will ever exists (kind of singleton). Or if in public api (_*init_*.py) I want to use only the function to take the complexity out of the user.

# android - 让我的 HTML 5 应用程序在最后查看的页面上打开

> ID：14503984
> 
> 赞同：1
> 
> 时间：2013-01-24T14:44:59.477
> 
> 标签：android, iphone, html, hybrid

好的，这是我的问题：

我有一个网络应用程序，我可以访问网站，保存到我的主屏幕，我在主屏幕上有它的图标。这很有效，而且很棒。现在，只要我按下这个图标，它就会加载主页 (index.html) 这并不是我真正想要的。理想情况下，我希望它从最后一个已知位置打开，就像应用程序一样。假设我浏览到了interesting.html，按下了主页按钮并进入了其他应用程序并稍后返回，我希望它会在interesting.html 上打开。你会如何告诉手机这样做？

提前致谢！

# silverlight - 如何将隐式模板与 RIA 服务模型一起使用

> ID：14503986
> 
> 赞同：1
> 
> 时间：2013-01-24T14:45:01.897
> 
> 标签：silverlight, data-binding

在 RIA 服务器上，我有一个模型层次结构，但是当生成 Silverlight 客户端模型时，层次结构是扁平的。换句话说，在客户端，所有类型都继承自一个公共`System.ServiceModel.DomainServices.Client.Entity`基类。

直到现在这还不是问题。问题在于尝试利用 Silverlight 5 隐式模板功能。在此功能中，“DataTemplate”的选择基于 DataContext 的数据类型，现在它的所有继承都被冲走了。

有一个常见的解决方法吗？目前我能想到的最好的方法是严格在 Silverlight 端创建包装类，作为我的选择器。然后，我可以将 ItemsSource 绑定到这些包装类的集合，它仍应将我连接到底层数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:39:50.000

RIA Services does support inheritance, but it flattens everything down to what the server actually exposes. Try adding a query method in your DomainService that exposes the base type that you don't want flattened out.

# mysql - 使用 MySQL：使用时间戳字段比较表中两个连续记录中的值

> ID：14503988
> 
> 赞同：2
> 
> 时间：2013-01-24T14:45:09.780
> 
> 标签：mysql, stored-procedures, cursor, timestamp, compare

我有一个表 **tableData**

```
(startTime, endTime, data) 
```

例如，

```
startTime               |            endTime             |        data  
2000-01-01 03:00:00     |    2000-01-01 03:00:10         |         88   
2000-01-01 03:00:10     |    2000-01-01 03:00:20         |         33  
2000-01-01 03:00:30     |    2000-01-01 03:00:40         |         67  ......and so on 
```

我希望`2000-01-01 03:00:20,2000-01-01 03:00:30,0`在没有数据时将 entry() 插入数据中，因此为 0。输出将是：-

```
 startTime              |           endTime                 |       data  
2000-01-01 03:00:00     |    2000-01-01 03:00:10            |      88   
2000-01-01 03:00:10     |    2000-01-01 03:00:20            |      33    
**2000-01-01 03:00:20   |    2000-01-01 03:00:30            |       0**  
2000-01-01 03:00:30     |    2000-01-01 03:00:40            |      67  .....  and so on 
```

什么是最简单的方法来做到这一点。
请我今天必须完成，否则我的老板会杀了我。多谢你们。

有没有办法检查前一行的 endTime 是否等于当前行的 startTime 并相应地插入到表中？

更多信息 ：-

这是我现在使用的存储过程，用于从 inputTable 中累积并以 10 秒的间隔将其存储到输出表中。[http://sqlfiddle.com/#!2/838de/1](http://sqlfiddle.com/#!2/838de/1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:11:51.110

只需插入记录并创建一个视图

```
SELECT * FROM tableData ORDER BY startTime ASC, endTime ASC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:13:13.717

这是一个例子。

我假设每条新记录都大于或等于`endTime`表中的最大值，并且每条记录前进 10 秒。我还假设您永远不会在一次调用中插入多行。

否则，您仍然需要提供有关如何处理可能性的更多信息。

```
-- DROP PROCEDURE IF EXISTS addRecord;
DELIMITER //
CREATE PROCEDURE addRecord(startT TIMESTAMP, endT TIMESTAMP, rowData INT)
BEGIN
    DECLARE lastEndTime TIMESTAMP;
    SET lastEndTime = (SELECT MAX(`endTime`) FROM tableData);
    WHILE lastEndTime < startT DO
        INSERT INTO tableData (`startTime`,`endTime`,`data`)
        VALUES (lastEndTime,DATE_ADD(lastEndTime, INTERVAL 10 SECOND),0);
        SET lastEndTime = DATE_ADD(lastEndTime, INTERVAL 10 SECOND);
    END WHILE;
    INSERT INTO `tableData` (`startTime`,`endTime`,`data`)
    VALUES (startT,endT,rowData);
END // 
```

叫这个……</p>

```
CALL addRecord('2000-01-01 03:00:50','2000-01-01 03:01:00',23); 
```

# syntax-highlighting - 自动语法高亮

> ID：14503991
> 
> 赞同：5
> 
> 时间：2013-01-24T14:45:16.280
> 
> 标签：syntax-highlighting

我正在寻找一个用 JavaScript 编写的全面的语法高亮器，它会自动检测所使用的语言并应用正确的语法高亮显示。

`<pre>`我从一个简单的谷歌搜索中找到了无数的它们，但它们都必须在元素上有某种格式化类，比如`<pre class="highlight-php">`.

我注意到 StackOverflow 的语法突出显示可以在 pre 块中自动完成，有人知道他们使用的是什么库吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-30T04:01:16.333

他们正在使用[谷歌美化](https://code.google.com/p/google-code-prettify/)。还有其他选项，例如[highlight.js](http://softwaremaniacs.org/soft/highlight/en/)

# c++ - 如何让对话框一直停留在屏幕上

> ID：14503992
> 
> 赞同：0
> 
> 时间：2013-01-24T14:45:16.567
> 
> 标签：c++, windows, c++builder

我对 borland c++ 很陌生。我有一个任务要做。好的，当用户在主窗口上工作时，我想要一个对话框，它提供了很好的提示如何做事情留在屏幕上。

如果有人能提供帮助，我真的很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:49:12.453

您应该首先获取窗口句柄，然后使用以下 Win API 方法：

```
SetWindowPos(hwnd, HWND_TOPMOST,0,0,0,0,SWP_NOMOVE|SWP_NOSIZE); 
```

更多细节：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms633545(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633545(v=vs.85).aspx)

干杯，

# actionscript-3 - MAC OS X + stage.fullScreenSourceRect + renderMode 设置为 GPU = 错误的鼠标位置

> ID：14503994
> 
> 赞同：0
> 
> 时间：2013-01-24T14:45:27.843
> 
> 标签：actionscript-3, flash, air, flash-builder

设置 stage.fullScreenSourceRect 时，stage.displayState 为 StageDisplayState.FULL_SCREEN_INTERACTIVE；和 renderMode 到 GPU，鼠标位置读取不正确。这不仅适用于 mouseX 和 mouseY 位置，而且所有与 Sprite、Button 等的鼠标交互都无法正常工作。

有人知道这个问题的解决方案吗？

我在[bugbase.adobe.com](http://bugbase.adobe.com)上报告了一个错误，但还没有回复。

错误编号：[3486120](https://bugbase.adobe.com/index.cfm?event=bug&id=3486120)

那里附有简单的示例项目。如果您也遇到此问题并且您不知道任何解决方法，请至少为该错误投票。

谢谢。格雷格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:45:17.313

有趣的错误。我想你可以通过在全屏时自己缩放和定位内容来解决它。与设置 相比，这可能会影响性能`fullScreenSourceRect`，但至少它应该可以工作。

一个示例（在您的文档类中使用）：

```
protected var fakeFullScreenSourceRect:Rectangle;

public function Main() {
    this.stage.scaleMode = StageScaleMode.NO_SCALE;
    this.fakeFullScreenSourceRect = new Rectangle(30, 30, 400, 200);
    this.stage.addEventListener(Event.RESIZE, handleResize);
}

protected function handleResize(e:Event):void {
    if (this.stage.displayState == StageDisplayState.FULL_SCREEN || this.stage.displayState == StageDisplayState.FULL_SCREEN_INTERACTIVE) {
        if (this.fakeFullScreenSourceRect) {
            this.scaleX = this.stage.stageWidth / this.fakeFullScreenSourceRect.width;
            this.scaleY = this.stage.stageHeight / this.fakeFullScreenSourceRect.height;
            this.x = -this.fakeFullScreenSourceRect.x * this.scaleX;
            this.y = -this.fakeFullScreenSourceRect.y * this.scaleY;
        }
    } else {
        this.x = this.y = 0;
        this.scaleX = this.scaleY = 1;
    }
} 
```

# vb.net - 使用 VBA 设置所有数据透视字段可见 = False？

> ID：14503998
> 
> 赞同：1
> 
> 时间：2013-01-24T14:45:33.510
> 
> 标签：vb.net, excel, vba

我正在尝试在数据透视表字段中设置所有项目`visible = false`。例如，我在每个国家有 5 个部门，称为 DivA、DivB、DivC、DivD 和 DivE。现在有时在我的源数据中，我有更多或更少的上述部门，所以我想在数据透视字段“部门”下关闭所有选项，然后让所有上述部门都可见（如果它们存在）（有时可能有 3、4或所有 5 个部门）。

我在网上找到了一个代码并试图将其合并，但它一直给我设置“False = False”的错误。

任何帮助将非常感激！

请在下面查看我的代码：

```
Sub test()
'
' test Macro
'

   With ActiveSheet.PivotTables("PivotTable3").PivotFields("Division")

    Dim Table As PivotTable
    Dim FoundCell As Object
    Dim All As Range
    Dim PvI As PivotItem

    Set All = Worksheets("Sheet1").Range("A7:AZ10000")
    Set Table = Worksheets("Sheet1").PivotTables("PivotTable3")
    For Each PvI In Table.PivotFields("Division").PivotItems
        Set FoundCell = All.Find(PvI.Name)
        If FoundCell <> "itemname" Then
            PvI.Visible = False
        End If
    Next

        .PivotItems("DivA").Visible = True
        .PivotItems("DivB").Visible = True
        .PivotItems("DivC").Visible = True
        .PivotItems("DivD").Visible = True
        .PivotItems("DivE").Visible = True

    End With
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:32:39.670

这是你正在尝试的吗？（**未经测试**）

```
Sub test()
    Dim table As PivotTable
    Dim PvI As PivotItem

    Set table = Worksheets("Sheet1").PivotTables("PivotTable3")

    With table.PivotFields("Division")
        For Each PvI In .PivotItems
            Select Case PvI.Name
            Case "DivA", "DivB", "DivC", "DivD", "DivE"
                PvI.Visible = True
            Case Else
                PvI.Visible = False
            End Select
        Next
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-26T09:05:24.690

我测试了答案宏......它有效。

```
Sub Pivot_Test()

Sheets("Macro").Select
Dim Dt As String
Dt = Range("C1")

Dim PMth1 As String
Dim PMth2 As String
Dim PMth3 As String
Dim PMth4 As String
Dim PMth5 As String
Dim PMth6 As String
Dim PMth7 As String
Dim PMth8 As String
Dim PMth9 As String
Dim PMth10 As String
Dim PMth11 As String
Dim PMth12 As String

PMth1 = Range("J1")
PMth2 = Range("J2")
PMth3 = Range("J3")
PMth4 = Range("J4")
PMth5 = Range("J5")
PMth6 = Range("J6")
PMth7 = Range("J7")
PMth8 = Range("J8")
PMth9 = Range("J9")
PMth10 = Range("J10")
PMth11 = Range("J11")
PMth12 = Range("J12")

Sheets("MANCO").Select

Dim pt1 As PivotTable
Dim pt2 As PivotTable
Dim PI1 As PivotItem
Dim PI2 As PivotItem

Set pt1 = Worksheets("MANCO").PivotTables("Resolution")

With pt1.PivotFields("Month")
    For Each PI1 In .PivotItems
        Select Case PvI.Name
        Case PMth1, PMth2, PMth3, PMth4, PMth5, PMth6, PMth7, PMth8, PMth9, PMth10, PMth11, PMth12
            PI1.Visible = True
        Case Else
            PI1.Visible = False
        End Select
    Next
End With

Set pt2 = Worksheets("MANCO").PivotTables("Complaints")

With pt2.PivotFields("Month")
    For Each PI2 In .PivotItems
        Select Case PI2.Name
        Case PMth1, PMth2, PMth3, PMth4, PMth5, PMth6, PMth7, PMth8, PMth9, PMth10, PMth11, PMth12
            PI2.Visible = True
        Case Else
            PI2.Visible = False
        End Select
    Next
End With 
```

结束子