# StackOverflow 问答 13763000-13763999

# css - 2 个浮动 div，第一个 div 宽度为 100%

> ID：13763001
> 
> 赞同：0
> 
> 时间：2012-12-07T12:20:53.667
> 
> 标签：css, html, css-float, width

我有 2 个 div 漂浮在容器 div 中。第二个 div 有`width: 20px`. 我需要第一个 div 来填充所有可用空间并保持内联。将第一个 div 宽度设置为 100% 不起作用，因为具有固定宽度的第二个 div 会下降。我能怎么做？

代码在这里描述：http: [//jsfiddle.net/7EW5h/4/](http://jsfiddle.net/7EW5h/4/)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:44:21.720

您可以使用`calc`CSS3 函数并为 div 设置动态宽度，`#inner1`如下所示：

```
width: calc(100% - 20px); 
```

它将与 Firefox 16（或更高版本）和 Internet Explorer 9（或更高版本）兼容。

您可以添加供应商前缀，如下所示：

```
width: -moz-calc(100% - 20px);
width: -webkit-calc(100% - 20px);
width: calc(100% - 20px); 
```

使其与 Chrome 19（或更高版本）、Firefox 4（或更高版本）、Internet Explorer 9（或更高版本）和 Safari 6（或更高版本）兼容。

您可以在此处查看兼容表：http: [//caniuse.com/#search=calc](http://caniuse.com/#search=calc)

关于您的示例，我必须设置`border: 0`为`#inner1`和`#inner2`div。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T12:51:03.400

我已经在 Chrome、IE9、Firefox 和 Opera 中测试并制定了一个解决方案：

1.  对两个输入元素使用容器。
2.  更改元素的顺序，使*正确的元素排在**第*一位。
3.  不要浮动应该填充剩余空间的元素，只需将其设置`display`为`block`（这是`div`元素的默认值）。
4.  将`margin-right`较大容器的 设置为右侧元素的总宽度。在这里，我们还需要考虑两个元素的边框、边距和填充。

HTML：

```
<div id="container">
    <div id="inner2">
        <input />
    </div>
    <div id="inner1">
        <input />
    </div>
</div>​ 
```

CSS：

```
#inner2 {
    float: right;
}
#inner2 input {
    height: 20px;
    width: 20px;
    border: 1px solid #000;
}
#inner1 {
    margin-right: 24px;
}
#inner1 input {
    width: 100%;
    height: 20px;
    border: 1px solid #000;
} 
```

现场示例：http: [//jsfiddle.net/7EW5h/22/](http://jsfiddle.net/7EW5h/22/)。另请注意，我已明确设置两个`input`元素的边框。

如果不更改 HTML 或不使用绝对定位的两个元素的顺序，我无法让它工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T13:29:45.760

我认为，在不使事情复杂化的情况下，您可以执行以下操作。

1.  从两个输入中删除浮点数。
2.  绝对定位第二个输入，如下所示。
3.  将 padding-right 添加到第一个输入以避免内容重叠。另外，即使我下面的代码中没有显示，也不要忘记默认边框、边距和填充的存在。​​​</p>

    ```
     #container {
               overflow: hidden;
               background-color: red;
            }

                   #inner1 {
                      width: 100%;
                       background-color: blue;
                       padding-right:45px;

                     }

                 #inner2 {
                    height: 20px;
                    width: 20px;
                     background-color: green;
                     position:absolute;
                     right:0;
                     top:0;
                     } 
    ```

    ​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T12:29:32.153

您是否尝试过使用`position:absolute;`来根据需要定位元素？

请参阅小提琴 - [JSFiddle 示例](http://jsfiddle.net/wuVfG/)

# java - 如何在选择时动态更改/创建表单

> ID：13763002
> 
> 赞同：0
> 
> 时间：2012-12-07T12:20:56.063
> 
> 标签：java, javascript, html, hibernate, jquery-ui

我要求允许用户从网页将值插入数据库。

首先，用户选择要插入记录的表，然后根据所选表，表单应填充列名和文本框，以便用户输入数据并保存。

在页面加载时，将显示一个包含所有表格名称的下拉框。当用户选择表格时，如何根据用户选择的表格显示/创建表格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:52:06.773

为此，您将需要一些服务器端语言。如果您熟悉 php，这将非常容易，当用户选择表时，您将数据库连接到所选表，并在循环中显示所选表中您需要的所有字段。粘贴一些代码，我们也许可以提供帮助

# c - const volatile 指针函数参数

> ID：13763006
> 
> 赞同：1
> 
> 时间：2012-12-07T12:21:18.623
> 
> 标签：c, constants, volatile

对于嵌入式软件项目，我们需要使用一些`const volatile TYPE *`指针。现在我们有一些计算函数，如下所示：

```
uint8 calc(const volatile uint8 *array, uint8 value) { ... } 
```

在函数执行期间，两个变量的数据都不会改变。

调用代码如下所示：

```
const volatile uint8 *array = (const volatile uint8 *)0x00010111;
uint8 value = 8;

uint8 result = calc(array, value); 
```

现在的问题是，如果我们设计没有 volatile 参数的计算函数，会有什么不同：

```
uint8 calc(const uint8 *array, uint8 value) { ... } 
```

对于调用，我们抛弃了 volatile：

```
uint8 result = calc((const uint8 *)array, value); 
```

第二种解决方案的优点是更灵活：我们也可以将该函数用于非易失性变量。但是，如果我们抛弃 volatile 并且我们的编译器进行一些强大的优化，它会有什么不同吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T12:46:52.087

您始终可以使用带有非易失性参数的函数。只是函数中的代码处理给定的对象就好像它们是易失的（很可能在途中失去性能）。有点难以想象一个带有可变参数的函数（“因为它们可能会在没有通知的情况下改变”）可以做什么。在您编写时，在您的情况下，数据无论如何都不会改变，因此最灵活的解决方案是声明参数 const 并忘记 volatile。

很漂亮，请使用“uint8_t”，而不是像 uint8 这样的本土类型名称——它自 1996 年以来就成为标准！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:03:29.400

有两种情况：函数直接操作硬件寄存器等。那么你*必须*在参数中有 volatile 。或者该功能与硬件寄存器无关。那么它*不应该*有挥发性。这两种情况之间没有中间立场。

此外，`calc((const uint8_t*)array, value);`这只是一个糟糕的，可能是错误的版本

```
const uint8_t* ptr = array;
calc(ptr, value); 
```

前一种形式不好，因为函数参数的评估顺序是未指定的行为。编译器可能会选择先计算左操作数或右操作数，您无法知道或假设顺序。由于访问 volatile 是一种副作用，因此每次构建程序时，您的原始代码都会给出不同的结果。这在实时嵌入式系统中尤其成问题（并且可能很危险）。

因此，建议不要在表达式中访问 volatile 变量（参见 MISRA-C:2004 12.2）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T12:27:05.553

这取决于由于`volatile`-ness而真正发生的事情。

如果这个数组中的值在函数执行过程中发生了变化，并且应该注意到这些变化，就让它成为`volatile`.

如果没关系，或者如果“旧”值更重要，请省略`volatile`.

# c# - 向 Unity 注册类型以使用需要参数数组的构造函数

> ID：13763013
> 
> 赞同：6
> 
> 时间：2012-12-07T12:21:45.213
> 
> 标签：c#, .net, dependency-injection, unity-container

给定以下构造函数签名：

```
public MyClass(Class1 arg1, params Class2[] arg2) 
```

如何使用 InjectionConstructor 向 Unity 注册 MyClass，并传入特定的命名类型。

我尝试了以下方法：

```
unityContainer.RegisterType<IMyClass, MyClass>(new InjectionConstructor(typeof(Class1), new ResolvedParameter<IClass2>("name1"), new ResolvedParameter<IClass2>("name2"))) 
```

但是得到一个异常说没有带有签名的构造函数：

```
public MyClass(Class1 arg1, Class2 arg2, Class2 arg3) 
```

我通过重载 MyClass 构造函数解决了这个问题。有没有办法在不重载构造函数的情况下做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T12:46:49.310

你为什么要首先尝试使用 an `InjectionConstructor`？Unity 知道如何开箱即用地处理数组。

`params`关键字只是编译器的一些语法糖。封面`args2`下只是一个简单的数组。

```
[TestMethod]
public void TestMethod1()
{
  var container = new UnityContainer();
  // if you absolutely have to use an InjectionConstructor this should do the trick
  // container.RegisterType<IMyClass, MyClass>(
  //   new InjectionConstructor(typeof(Class1), typeof(Class2[])));
  container.RegisterType<IMyClass, MyClass>(
    new InjectionConstructor(typeof(Class1), typeof(Class2[])));
  container.RegisterType<Class2>("1");
  container.RegisterType<Class2>("2");
  container.RegisterType<Class2>("3");
  var myClass = container.Resolve<IMyClass>() as MyClass;
  Assert.IsNotNull(myClass);
  Assert.IsNotNull(myClass.Arg2);
  Assert.AreEqual(3, myClass.Arg2.Length);
}

interface IMyClass
{
}
class MyClass : IMyClass
{
  public Class1 Arg1 { get; set; }
  public Class2[] Arg2 { get; set; }
  public MyClass(Class1 arg1, params Class2[] arg2)
  {
    Arg1 = arg1;
    Arg2 = arg2;
  }
}
class Class1
{
}
class Class2
{
} 
```

* * *

**更新**

如果您只使用一些命名注册，则必须使用`ResolvedArrayParameter`.

```
container.RegisterType<IMyClass, MyClass>(
  new InjectionConstructor(
    typeof(Class1),
    new ResolvedArrayParameter<Class2>(
      new ResolvedParameter<Class2>("1"), 
      new ResolvedParameter<Class2>("2")))); 
```

呸！这非常难看，但它应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T12:26:11.720

由于它似乎不喜欢简单地直接列出“Class2”实例，因此是否有可能将它们显式设置为数组（并因此显式匹配 的构造函数签名`Class1, Class2[]`）会起作用：

```
unityContainer.RegisterType<IMyClass, MyClass>(new InjectionConstructor(typeof(Class1), new Class2[]{new ResolvedParameter<IClass2>("name1"), new ResolvedParameter<IClass2>("name2")})) 
```

# android - Azure 环境上的推送通知

> ID：13763015
> 
> 赞同：-2
> 
> 时间：2012-12-07T12:22:02.250
> 
> 标签：android, apple-push-notifications

我从过去 6 个月开始使用 Windows azure，现在我需要在 android 和 Iphone 移动设备上处理推送通知。
我已经为这两个设备完成了本地系统上的所有代码并且工作正常。但是，虽然我已将它部署在 azure 开发服务器上，但它显示我在 iphone 上发送通知时出现异常，即 .p12 证书未找到或证书为空。当在 web 角色中编码时，它在本地系统上工作正常，并在 GCM 和 ANPS 上发送所有通知。
我已经看了很多，结果我将通知代码放在了工作角色上，我也这样做了，但是在部署服务期间它显示错误。在工作角色中，我可以通过环境变量（roleroot）访问 .p12 证书，这在本地系统上也可以正常工作。因为这样做，我所有支持的 DLL 都被复制到工作角色并使包大小变得庞大..

请任何人帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:20:38.287

好吧，显然您也需要上传该证书。

# yii - 在 Yii 中实现 cron

> ID：13763017
> 
> 赞同：1
> 
> 时间：2012-12-07T12:22:09.287
> 
> 标签：yii, cron, crontab

[我按照http://www.yiiframework.com/extension/yii-crontab/](http://www.yiiframework.com/extension/yii-crontab/)中的说明实现了 yii-crontab 。我需要通过实现 cron 作业来自动调用控制器操作。但是我陷入了困境，因为我没有得到控制流来实现我的要求。任何帮助都在接受..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-09-23T18:32:27.507

您可以将这些控制器操作写入控制器中名为 commands 的文件夹中，该文件夹将位于应用程序根文件夹中，并使用 shell 脚本来执行 cron。

commands 是用于 web 的控制器文件夹的 CLI 等效项。代码结构和其他一切都是一样的。所以只需将控制器文件从控制器复制到命令文件夹。然后编写一个 php cron 或 shell 脚本以在所需的时间间隔运行命令。更多参考这里

[https://www.yiiframework.com/doc/guide/2.0/en/tutorial-console](https://www.yiiframework.com/doc/guide/2.0/en/tutorial-console)

[将简单的 shell 脚本作为 cronjob 运行](https://stackoverflow.com/questions/19754784/running-a-simple-shell-script-as-a-cronjob)

# css - IE10 删除右对齐输入的填充

> ID：13763021
> 
> 赞同：10
> 
> 时间：2012-12-07T12:22:23.360
> 
> 标签：css, internet-explorer-10

我遇到了一些关于在右对齐输入字段中填充的 IE10 奇怪之处。

检查这个小提琴[http://jsfiddle.net/fhWhn/](http://jsfiddle.net/fhWhn/)

```
::-ms-clear, ::-ms-clear{
    display: none;
} 
```

这将删除“IE10 图标”，但如果我想保留这些并保留我的填充，我该怎么办？是否有另一种更聪明的方法来保持 onblur 之后的填充？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T15:00:25.570

我遇到了同样的问题。要恢复填充，只需将文本框的值设置为模糊。

我的简单解决方案：

```
$("input[type='text']").blur(function (evt){
    var $element = $(this);
    $element.val($element.val());
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-05T23:06:42.767

一种可能的解决方法是在输入中使用样式`direction: rtl;`，这会将 移动**`×`**到元素的左侧。但是，使用从右到左的行为可能不适合您的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T11:36:06.627

编辑：埃里克的解决方案对我有用，而且更好，但我把这个答案留在这里，以防某些未来版本的 IE 需要不同的修复

新的 IE，新的 IE 特定的渲染问题......

我一直在调试相同的行为。到目前为止，我发现唯一有效的是：

1.  从输入中移除焦点（即使明确设置每个元素的“padding-right”在它有焦点时也没有效果）
2.  将 padding-right 值设置为与正确值*不同*的值（将其设置为正确值不会触发任何更改，可能是因为布局系统知道计算的 CSS 值没有更改，因此决定不需要重新绘制）
3.  等待重新绘制（立即 - 或者甚至在 1 或 2 毫秒的超时后 - 再次将属性设置为正确的值不会导致任何更改，可能是因为没有按照上述进行重新绘制）
4.  将属性设置为正确的值（例如使用`$this.css("padding-right", "")`，它会删除任何每个元素的值并允许计算的 CSS 值接管）。

然而，这当然是不可取的，因为它涉及当用户可能正在打字时从输入中移除焦点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-28T12:04:01.433

我认为 JustinStolle 的回答是最好的方法。

例子：

```
input[type="text"].field-al-right{
    text-align:right;
    direction:rtl;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-07T16:54:36.947

您是否尝试在您的 CSS 中添加“box-sizing”？

```
* {
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
    padding: 0;
    margin: 0;
} 
```

# c++ - Ogre：模拟透视图缩放对象

> ID：13763027
> 
> 赞同：1
> 
> 时间：2012-12-07T12:23:02.003
> 
> 标签：c++, view, perspective, ogre

对于我在**c++**中的 Ogre 项目，我想使用 Ogre 的 SimpleSpline 创建一个对象的动画。一切正常，对象沿着路径中的点序列正确设置动画。由于我需要使用具有正交视图的场景，所以没有透视，我仍然会在对象的比例上模拟效果深度“播放”。

因此，对于每一帧都以这种方式更新对象的位置和比例：

```
const Vector3 position = this->getPoint(index_, time_);
const float scale = 1 / (1 + position.z);
node_->setScale(scale, scale, scale);
node_->setPosition(position); 
```

它工作得很好。有没有办法让深度效果更逼真？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:11:43.190

您可以尝试在粒子系统的脚本中使用 DeflectorPlane。

[在这里](http://www.ogre3d.org/docs/manual/manual_40.html#DeflectorPlane-Affector)您可以找到文档和用法。

# events - Primefaces数据表动态更新列

> ID：13763032
> 
> 赞同：0
> 
> 时间：2012-12-07T12:23:20.040
> 
> 标签：events, datatable, primefaces

我有一个primeface数据表如下

```
<p:dataTable id="associatedProductsTable" var="oap" 
 value="#{checkoutController.associatedProducts}"
 styleClass="cssAssociatedProductsTable">
    <p:column>#{oap.product.code}</p:column>
    <p:column>
        <p:selectBooleanCheckbox value="#{oap.includedInOrder}" />
    </p:column>
<p:column>#{oap.productPriceTotal}</p:column>
</p:dataTable> 
```

只要未选中 selectBooleanCheckbox，productPriceTotal 字段就为 0。我的愿望是在用户选择 selectBooleanCheckbox 的复选框值时设置 productPriceTotal 的值

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T17:07:37.433

我已经做了。实际上，我正在寻找一个示例，以获取一些文档以使我更容易。它现在非常好用。问题是表的更新应该只在页面加载时进行一次，而我没有这样做。每次刷新时我都在加载数据，所以当然，无论我在改变什么，数据都会被重新加载所清除。

```
if (!FacesContext.getCurrentInstance().isPostback()) 
{
     //load once 
} 
```

现在可以使用

谢谢

# mercurial - hg revert 和 hg backout 有什么区别？

> ID：13763034
> 
> 赞同：20
> 
> 时间：2012-12-07T12:23:35.480
> 
> 标签：mercurial, revert, backout

`hg revert`和恢复以前版本所做`hg backout`的更改。两者有什么区别？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-07T12:23:35.480

鉴于变更集的历史：

```
A --- B --- C --- D --- E
          [bad]        (*) 
```

`hg revert -r B`: 保持在当前版本，但更新工作目录作为版本`B`。它具有撤销 和 的更改的补丁`C`效果。`D``E`

`hg backout -r C`：更新工作目录，使其包含 修订版 C 的*父*( ) 和当前修订版的*合并*，保留两个修订版之间所做的更改（工作目录仍然包含修订版和的更改）。这具有应用补丁的效果，仅撤消对 的更改。*`B``D``E``E``C`*

 *如果不是所有文件都不好，您可能需要编辑一些文件`C`。`hg commit`记住在任何情况下都要做：

```
A --- B --- C --- D --- E --- F
          [bad]              (*) 
```*

# java - Java中集合vs数组vs链表的性能

> ID：13763039
> 
> 赞同：-4
> 
> 时间：2012-12-07T12:23:52.600
> 
> 标签：java, algorithm, data-structures

我正在尝试研究 Java 中集合、数组和链表在性能方面的区别，所以我正在研究的示例是
如果我们需要在数组中查看两个数组、两个集合和两个链表之间的公共对象我们应用 for 循环和比较，在 set 中我们使用 interscet 还是 union？但是时间上有很大的不同，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:31:11.230

相交集和相交列表或数组是有区别的。当你与两个集合相交时，你需要遍历其中一个，看看另一个集合中是否有对应的成员。集合的检索时间是 O(1)，所以交集是 O(n)。与列表或数组相交时，交集为 O(n^2)，因为对于一个列表/数组中的每个成员，您需要遍历整个另一个列表/数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:31:52.627

**我建议你为微基准**测试准备一个测试平台，这样你就可以看到时间上的差异。确保至少重复 10 次，并在测量之外进行热身。然后计算均值和标准差。如果我没记错的话，有一个漂亮的谷歌项目可以提供这个。

您应该清楚的第一件事是渐近复杂性或大 O。例如，如果您想做一个集合相交，最好的方法是。

```
 SortedSet<String> set1 = new TreeSet<String>(); // and populate
 SortedSet<String> set2 = new TreeSet<String>(); // and populate
 // intersect of two sorted sets can be done in linear time 
```

上面是 O(n) 而你提到的所有其他选择都是 O(n^2) 读取更复杂和更慢。

# android - Android 双卡检测

> ID：13763042
> 
> 赞同：3
> 
> 时间：2012-12-07T12:23:59.900
> 
> 标签：android, dual-sim

我有 MICROMAX A100 双 SIM 安卓手机，在我的应用程序中我正在访问 SIM 序列号，默认情况下我正在获取 SIM 1 的 SIM 序列号，我如何访问 SIM 2 数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:35:26.690

此功能是制造商的硬件实现（就像某些手机具有内部和外部存储一样）。默认的 android API 并非旨在适应所有制造商强加的功能。尽管制造商可以自由修改他们在其设备上分发的 android 并实现新功能。通常制造商会为开发人员提供额外的库来利用这些功能。因此，如果他们为他们的设备提供额外的 API，请联系制造商。

# android - 如何在android中从具有相同ID的多个编辑文本中获取文本

> ID：13763043
> 
> 赞同：-1
> 
> 时间：2012-12-07T12:24:02.483
> 
> 标签：android

我正在使用 xml 创建一个编辑文本文件，并使用 enumerator 在 listview 的适配器类 .im 中添加它。通过这个我能够创建两个具有相同 id 的文本字段。问题是如何从两个文本字段中获取字符串因为他们共享相同的 id。下面是代码。

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    View rowView = null;

    AddKeywordRow row = keywordRows.get(position);

    switch (row.getRowType()) {
    case TitleRow:
        rowView = inflater.inflate(R.layout.titlerow, null);
        TextView txtTitle = (TextView) rowView.findViewById(R.id.rowtitle);
        txtTitle.setText(row.getMessage());
        break;
    case EditRow:
        rowView = inflater.inflate(R.layout.editrow, null);
        txtInput = (EditText) rowView.findViewById(R.id.rowedit);
        txtInput.setHint(row.getMessage());
        if (row.getHeight() != 0)
        {
            LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(
                     LinearLayout.LayoutParams.MATCH_PARENT,row.getHeight());
            txtInput.setLayoutParams(layoutParams); 
            layoutParams.setMargins(7, 0, 7,0);
        //txtInput.setLayoutParams(new LinearLayout.LayoutParams(
            //      LinearLayout.LayoutParams.MATCH_PARENT, row.getHeight()));
            txtInput.setPadding(3,0,0,30);  
        }
        // set padding and margin
        break;
    case MessageRow:
        rowView = inflater.inflate(R.layout.messagerow, null);
        TextView txtMessage = (TextView) rowView
                .findViewById(R.id.rowmessage);
        txtMessage.setText(row.getMessage());
        break;
    case ButtonRow:
        rowView = inflater.inflate(R.layout.buttonrow, null);
        Button btn = (Button)rowView.findViewById(R.id.button1);

        btn.setOnClickListener(new OnClickListener() {

        }
        });

        break;
    }

    return rowView;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:37:36.447

通过列表行检索它们，例如（伪代码）：

((EditText)getAdapter().getItem(id)).getText()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:34:14.333

首先，我建议您对列表项使用[Holder 模式](http://www.vogella.com/articles/AndroidListView/article.html#adapterperformance_hoder)。其次覆盖 getItem(int position); 在您的适配器中，以便它根据位置返回必要的文本值。例如，您将能够在您的活动中的 onItemclickListener() 中使用它。

```
@Override
    public String getItem(int position) {
        return keywordRows.getMessage(position);
    } 
```

你的 onItemClickListener 看起来像：

```
private AdapterView.OnItemClickListener mItemClickListener = new AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> adapterView, View view, int position, long rowid) {
            String message = (String)adapterView.getItemAtPosition(position);
        }
    } 
```

# ffmpeg - ffprobe - 从管道获取文件信息

> ID：13763047
> 
> 赞同：9
> 
> 时间：2012-12-07T12:24:21.920
> 
> 标签：ffmpeg, ffprobe

我有一个 oog 文件（它是由 pbx Asterisk 记录的两个音频流中的 sox 混合的），我正在尝试使用 ffprobe 获取文件信息。当我使用类似的东西时

```
cat %filename%.ogg | ffprobe -i - 
```

我得到无效的文件信息（持续时间：N/A、错误的比特率等）当我尝试时

```
ffprobe -i %filename% 
```

一切正常，我得到文件信息。有什么问题？文件内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-28T22:45:35.753

从 ffprobe 的 1.0.7 版开始，您甚至可以获取 JSON 格式的输出：

> ffprobe -v quiet -print_format json -show_format Ramp\ -\ Apathy.mp3

产生以下输出：

```
{
    "format": {
        "filename": "Ramp - Apathy.mp3",
        "nb_streams": 2,
        "format_name": "mp3",
        "format_long_name": "MP2/3 (MPEG audio layer 2/3)",
        "start_time": "0.000000",
        "duration": "203.638856",
        "size": "4072777",
        "bit_rate": "159999",
        "tags": {
            "title": "Apathy",
            "artist": "Ramp",
            "album": "Evolution Devolution Revolution",
            "date": "1999",
            "genre": "Metal"
        }
    }
} 
```

我认为您可以使用 cat 获取探针，您对文件内容有什么要求吗？如果不只是使用不带猫的ffprobe。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-02-14T20:06:03.447

只是一个简短的说明，说管道输入`ffprobe`似乎工作得很好。使用连字符代替输入文件，您就可以参加比赛了。这是我系统上随机视频文件的示例：

```
cat 01.mp4 | ffprobe -show_format -pretty -loglevel quiet - 
```

回报：

```
[FORMAT]
filename=pipe:
nb_streams=2
nb_programs=0
format_name=mov,mp4,m4a,3gp,3g2,mj2
format_long_name=QuickTime / MOV
start_time=N/A
duration=0:02:56.400000
size=N/A
bit_rate=N/A
probe_score=100
TAG:major_brand=isom
TAG:minor_version=512
TAG:compatible_brands=isomiso2mp41
TAG:creation_time=1970-01-01T00:00:00.000000Z
TAG:title=yy.mp4
TAG:encoder=Lavf52.78.3
[/FORMAT] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-28T12:15:27.267

你可以从远程站点通过管道传输它`curl`

```
curl  --silent --header "Range: bytes=0-51200" https://example.com/your.mp4 | ffprobe -v quiet -show_format -of flat=s=_ -show_entries stream=height,width,nb_frames,duration,codec_name - 
```

# iphone - ios6 MKMapView 取消选择错误

> ID：13763048
> 
> 赞同：0
> 
> 时间：2012-12-07T12:24:24.857
> 
> 标签：iphone, ios6, mkmapview

我在 iOS 6 中观察到地图的奇怪行为。这是添加单个注释的代码，在项目中绝对没有其他内容：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    MKPointAnnotation * p = [[MKPointAnnotation alloc] init];
    p.coordinate = CLLocationCoordinate2DMake(10, 10);
    p.title  = @" test test";
    [self.mapView addAnnotation:p];
    self.mapView.centerCoordinate = p.coordinate;
}

- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id < MKAnnotation >)annotation
{
    MKPinAnnotationView * p = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"wassup" ];
    p.canShowCallout = YES;
    p.pinColor = MKPinAnnotationColorGreen;
    return p;
} 
```

当它被选中并且我将地图移动（平移）小距离（如 0.5-1 厘米）时，在 iOS6 上，注释被取消选择。在早期版本上按预期工作并保持选中状态。

这是一个错误吗？有什么解决方法吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:20:35.383

如果您不想取消选择注释视图，您应该继承 MKAnnotationView 并覆盖 setSelected:animated: 方法并停止取消选择注释视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:11:01.407

苹果地图充满了错误。哈哈，你也注意到了。它是 iOS 6 的一个功能，有时会激怒用户。:)

在 annotaionView 方法中使用：

```
// iOS6 BUG WORKAROUND !!!!!!!
if (is6orMore) {
     [annotationView setTransform:CGAffineTransformMakeRotation(.001)]; //any small positive rotation
} 
```

另见[链接](https://stackoverflow.com/questions/12324765/map-annotations-in-ios-6-dont-stay-rotated-when-user-pans-the-map)

# javascript - Javascript重置循环

> ID：13763057
> 
> 赞同：1
> 
> 时间：2012-12-07T12:24:52.720
> 
> 标签：javascript, jquery, html

我的 javascript 代码有一点问题，我构建了一个按用户选择的数量添加文件的函数，这里是函数

```
$(document).ready(function() {
  $('.qty').change(function(){
     for (var i=0;i<$('.qty').val();i++){
       $('.append').append('<select name="data[]"><option value="one">1</option></select>');
     }
  });
}); 
```

并且html代码是：

```
<select name="qty" class="qty">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
</select>
<div class="append">

</div> 
```

当我在数量中选择一个值时，比如说 3，它会打开 3 个选择字段，但是当我将选择更改为 2 时，它会添加我 2，所以我有 5 个选择字段，我该如何重置？如果我选择 1，它将打开我 1，如果我将其更改为 2，它将更改并打开我 2，而不是现在的 3。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T12:27:14.500

尝试：

```
$(document).ready(function() {
  $('.qty').change(function(){
    var html=''
     for (var i=0;i< parseInt($('.qty').val());i++){
       html += '<select name="data[]"><option value="one">1</option></select>';
     }
     $('.append').html(html);
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T12:27:16.200

只需`.append`在追加之前清除 div 内容，您可以使用 清除它[`.html('')`](http://api.jquery.com/html/)，因此您只需替换以下行：

```
$('.append').append('<select name="data[]"><option value="one">1</option></select>'); 
```

对于这个：

```
$('.append').html('').append('<select name="data[]"><option value="one">1</option></select>'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T12:27:37.067

采用`.html`

```
$(document).ready(function() {
  $('.qty').change(function(){
      var k=""   
      for (var i=0;i<$('.qty').val();i++){
          k += '<select name="data[]"><option value="one">1</option></select>';
     }
     $('.append').html(k);
  });
});​ 
```

这是一个工作 jsfiddle [http://jsfiddle.net/P2F9x/](http://jsfiddle.net/P2F9x/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T12:28:18.177

您可以在循环之前添加一行以清空附加 div

```
$('.append').empty(); 
```

所以它会是：

```
$(document).ready(function() {
  $('.qty').change(function(){
     $('.append').empty();
     for (var i=0;i<$('.qty').val();i++){
       $('.append').append('<select name="data[]"><option value="one">1</option></select>');
     }
  });
});​ 
```

小提琴：

[http://jsfiddle.net/](http://jsfiddle.net/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T12:28:35.590

代替：

```
$('.append').append('<select name="data[]"><option value="one">1</option></select>'); 
```

采用

```
$('.append').html('<select name="data[]"><option value="one">1</option></select>'); 
```

我认为这就是导致它附加附加字段的原因。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-07T12:29:52.283

使用它来重置 html：

```
$('.append').html(''); 
```

像：

```
$(document).ready(function() {
  $('.qty').change(function(){
    $('.append').html('');
     for (var i=0;i<$('.qty').val();i++){
       $('.append').append('<select name="data[]"><option value="one">1</option></select>');
     }
  });
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-07T12:35:53.500

要保留用户已经做出的任何选择，您可以稍微更改结构

```
$(document).ready(function() {
  $('.qty').change(function(){
     var count = $(.append).find("select").length,
         qty = $('.qty').val(),
         i,
         html = $('.append').html();
     //append any needed elements
     if(count < qty) {
       for (i=count;i < qty; i += 1){
         html += '<select name="data[]"><option value="one">1</option></select>';
       }
       $('.append').html(html);
     }
     //remove any excess elements
     for(;count<$(.append).find("select").length; 
          $(.append).find("select:last").remove()){}
  });
}); 
```

# android - Android：如何使用simpleadapter将图像文件从sd卡放入HashMap？

> ID：13763060
> 
> 赞同：6
> 
> 时间：2012-12-07T12:25:03.420
> 
> 标签：android, image, listview, hashmap, simplecursoradapter

我正在从手机上的选定文件夹中读取文件，就像您在以下代码中看到的那样。我怎么能用 Imagefile 来完成这项工作？最后，我喜欢有一个图像列表，其中包含每个图像的预览。像那样：

[IMG] (imgview) - [文件名] (字符串)

```
 for(int i=0; i < files.length; i++) {

        File file = files[i];
            map = new HashMap<String, String>();
        if(!file.isHidden() && file.canRead()) {
            path.add(file.getPath());

            if(file.isDirectory()) {
                map.put("img_list", ""+R.drawable.folder);
                map.put("string_cell", file.getName()+"/");
                your_array_list.add(map);

            }else{

                ImageFileFilter filefilter = new ImageFileFilter(file);

                if(filefilter.accept(file)){
                   //Its an imagefile

                    // ==> I like to replace the ""+R.drawable.image with the file that I have read
                    map.put("img_list", ""+R.drawable.image);

                } else {

                    //Its not an image file

                }

                map.put("string_cell", file.getName());
                your_array_list.add(map);

            }
        } 

    }

        SimpleAdapter mSchedule = new SimpleAdapter(this, your_array_list, R.layout.connected_upload_row,
            new String[] {"img_list", "string_cell"}, new int[] {R.id.img_list, R.id.string_cell});
list.setAdapter(mSchedule); 
```

在下面的图片中，我喜欢将白色的“图像”图片替换为名为“41786486733.jpg”的原始图片作为预览。这样用户就可以看到这是什么图片...

![在此处输入图像描述](../Images/5e5c4fbd62df4da457f2628b7958ddcb.png)

**编辑弗洛里安皮尔兹**

```
if(filefilter.accept(file)){

                    Log.v("PATH1", file.getPath() );

                    ImageView myImageView = (ImageView) findViewById(R.id.img_list);
                    Bitmap bmp = BitmapFactory.decodeFile(file.getAbsolutePath());
                    myImageView.setImageBitmap(bmp); 

                } 
```

![在此处输入图像描述](../Images/50f48ca00fa22ba9adb6c8201635e794.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:53:32.250

查看图片，并假设带有文本“IMAGE”的白色图像是一个 ImageView 实例，那么简单......

```
Bitmap bmp = BitmapFactory.decodeFile(file.getAbsolutePath);
myImageView.setImageBitmap(bmp); 
```

还是我完全误解了你的问题。无论如何，这个[小例子](http://mihaifonoage.blogspot.in/2009/09/displaying-images-from-sd-card-in.html)试图做类似的事情，你想要完成的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T17:17:34.413

有一个类似的问题，并接受了答案。检查：[无法打开存储在 sdcard 中的图像文件](https://stackoverflow.com/questions/8563365/cannot-open-image-file-stored-in-sdcard)

从那里摘录：

```
File directory = new File(extStorageDirectory, "myFolder");
File fileInDirectory = new File(directory, files[which]);
Bitmap bitmap = BitmapFactory.decodeFile(fileInDirectory.getAbsolutePath()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T04:55:49.240

您必须实现自定义列表视图检查此[示例](http://mihaifonoage.blogspot.in/2009/09/displaying-images-from-sd-card-in.html)并似乎在哈希映射创建问题中存储路径，如果您提供错误日志猫会更有帮助！无论如何，您可以尝试以下技巧来实现您的目标，而不是将路径存储在 hashmap 中吗？，希望它对您有所帮助。

```
File file = new File(Environment.getExternalStoragePath()+"/Folder/");

    file imageList[] = file.listFiles();

     for(int i=0;i<imageList.length;i++)
     {
       Log.e("Image: "+i+": path", imageList[i].getAbsolutePath());

       Bitmap bitmap = BitmapFactory.decodeFile(imageList[i].getAbsolutePath());
        myImageView.setImageBitmap(bitmap); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T07:24:35.520

我的问题的解决方案在这里：

[如何从图像路径显示缩略图？](https://stackoverflow.com/questions/13874644/how-to-show-thumbnail-from-image-path)

我必须创建一个自定义列表视图（在 ρяσѕρєя K 的帮助下）谢谢！

***通过扩展 baseadapter 类而不是 SimpleAdapter 创建自定义适配器。因为我认为这很容易，或者您也可以创建更多自定义 UI 而不是使用 inbuild***

# sql-server - 使用xml到sql按条件更新所有节点

> ID：13763068
> 
> 赞同：2
> 
> 时间：2012-12-07T12:25:26.853
> 
> 标签：sql-server, xml

我有一个存储的 SQL 过程，它声明了具有这种结构的 xml 变量

```
<a>
  <b>4</b>
  <b>18</b>
  <b>2</b>
</a> 
```

`UPDATE a SET b=b-1 WHERE b>@MyIntVariable`我需要为这个 XML 数据做类似的事情。在 MS Transact SQL 中执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T13:28:28.277

**modify**函数最 适合处理 xml 数据。请参阅[http://msdn.microsoft.com/en-us/library/ms190675(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms190675(v=sql.105).aspx)。

```
DECLARE @NUM INT = 10

DECLARE @xml XML = N'
<a>
  <b>4</b>
  <b>18</b>
  <b>2</b>
</a>
';
SELECT @XML;

DECLARE @COUNT INT
SET @COUNT = @XML.value ('count(/a/b)', 'int');

WHILE @COUNT > 0
BEGIN
    SET @XML.modify('replace value of (/a/b[sql:variable("@COUNT")]/text())[1] with 
    (
    if ((/a/b[sql:variable("@COUNT")])[1] > sql:variable("@NUM")) then
         (/a/b[sql:variable("@COUNT")])[1] - 1
       else
         (/a/b[sql:variable("@COUNT")])[1] cast as xs:double ?
    )
')
    SET @COUNT = @COUNT - 1;
END

SELECT @XML 
```

# facebook - 桌面网页游戏政策变更允许哪些参数？

> ID：13763070
> 
> 赞同：79
> 
> 时间：2012-12-07T12:25:37.510
> 
> 标签：facebook, authentication, permissions, policy

我们有一个基于浏览器的游戏，它通过一个 AppID 使用 Facebook Connect，我们曾经在画布上运行相同的游戏，直到引入 Fb Credits 并且我们被迫关闭它。现在，我们只在我们自己的网站上以与 FbConnect 集成的产品页面相同的方式使用该应用程序。

今天的邮件说明了我们的案例：

> > *如果您的 Connect 应用程序正在访问用户连接或请求年龄、电子邮件和我们的发布权限之外的其他权限，请删除这些请求。*

（指本次政策变更：[https](https://developers.facebook.com/blog/post/2012/09/05/platform-updates--operation-developer-love/) ://developers.facebook.com/blog/post/2012/09/05/platform-updates--operation-developer-love/ ）

我们将`oauth`FbConnect 与`scope=email,user_birthday`. 这正是之前邮件中指定的内容，所以应该没问题。

一旦用户通过身份验证，我们只需调用

```
https://graph.facebook.com/me?access_token=... 
```

并阅读那里的内容。

是否有可能，我们不再被允许调用 GraphAPI`me`了？它包含性别、位置和区域设置等信息...
Oauth 数据包含 fbuid、名字/姓氏和电子邮件，但不包含年龄，我们应该被允许问什么？

我必须`https://graph.facebook.com/me?fields=birthday`明确打电话吗？

有没有人真正成功地让“主要在 Facebook 上托管的桌面网络游戏”在不创建新 AppID 的情况下遵守他们的新政策？

* * *

注意：有几个关于“9 月 5 日政策变更”的问题，例如[Facebook：违规通知](http://facebook.stackoverflow.com/questions/13756585/facebook-notice-of-violation)这一个和许多以前的重复关闭，但到目前为止我发现没有一个包含技术层面的问题或答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-27T06:07:21.567

也许您可以跳过开发者设置中的“使用 Facebook 登录的网站”部分，只通过画布直接提供您的游戏。（例如，apps.facebook.com/logogame）。我猜这就是“在 facebook.com”上的全部内容。

# php - 为唯一字段创建 6 个字母数字代码

> ID：13763074
> 
> 赞同：-2
> 
> 时间：2012-12-07T12:26:03.017
> 
> 标签：php, mysql, database

我需要为表中的主键创建 6 个字母数字，但是我只是想用自动增量创建 int 字段并获取该字段的最大值并使用此代码进行处理，以便它可以是字母数字并存储在不同的字段中.. 这样做想法和代码符合要求吗？它好吗？它会永远是独一无二的吗？

```
<?php
    $code = the max value retrieved from the autoincrement int
    function getNextAlphaNumeric($code) {
        $base_ten = base_convert($code,36,10);
        $result = base_convert($base_ten+1,10,36);
        $result = str_pad($result, 6, '0', STR_PAD_LEFT);
        $result = strtoupper($result);
        return $result;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:51:07.890

这是需要考虑的事情。

1.  创建 6 个字符的主键。

2.  用php生成代码

3.  `INSERT IGNORE`使用;插入它 如果没有行受到影响（一开始不太可能），再试一次。

4.  完毕。添加了唯一代码。

# c++ - 在 node.js 的 C++ 插件中创建文本文件

> ID：13763085
> 
> 赞同：3
> 
> 时间：2012-12-07T12:27:00.783
> 
> 标签：c++, node.js, add-on

我想知道如何在 node.js 的 c++ 插件（.cc）文件中创建文件并在其中附加数据？

我已经使用下面的代码来做同样的事情，但无法在我的 ubuntu 机器中找到文件“data.txt”（背后的原因可能是下面的代码不是创建文件的正确方法，但奇怪的是我没有收到任何错误/编译时警告）。

```
FILE * pFileTXT;

pFileTXT = fopen ("data.txt","a+");

const char * c = localReq->strResponse.c_str();

fprintf(pFileTXT,c);

fclose (pFileTXT); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T12:44:37.403

Node.js 依赖于[libuv](https://github.com/joyent/libuv)，这是一个 C 库来处理 I/O（异步与否）。这允许您使用事件循环。

你会对这本免费的在线书籍/libuv 简介感兴趣：http: [//nikhilm.github.com/uvbook/index.html](http://nikhilm.github.com/uvbook/index.html)

具体来说，有一章专门介绍[读/写文件](http://nikhilm.github.com/uvbook/filesystem.html#reading-writing-files)。

```
int main(int argc, char **argv) {
    // Open the file in write-only and execute the "on_open" callback when it's ready
    uv_fs_open(uv_default_loop(), &open_req, argv[1], O_WRONLY, 0, on_open);

    // Run the event loop.
    uv_run(uv_default_loop());
    return 0;
}

// on_open callback called when the file is opened
void on_open(uv_fs_t *req) {
    if (req->result != -1) {
        // Specify the on_write callback "on_write" as last argument
        uv_fs_write(uv_default_loop(), &write_req, 1, buffer, req->result, -1, on_write);
    }
    else {
        fprintf(stderr, "error opening file: %d\n", req->errorno);
    }
    // Don't forget to cleanup
    uv_fs_req_cleanup(req);
}

void on_write(uv_fs_t *req) {
    uv_fs_req_cleanup(req);
    if (req->result < 0) {
        fprintf(stderr, "Write error: %s\n", uv_strerror(uv_last_error(uv_default_loop())));
    }
    else {
        // Close the handle once you're done with it
        uv_fs_close(uv_default_loop(), &close_req, open_req.result, NULL);
    }
} 
```

如果您想为 node.js 编写 C++，请花一些时间阅读这本书。这很值得。

# ios - 在底层 ViewController 中禁用 UIGestureRecognizers

> ID：13763087
> 
> 赞同：0
> 
> 时间：2012-12-07T12:27:05.397
> 
> 标签：ios, uigesturerecognizer

在视图控制器中，我正在构建一个图标网格。每个图标打开相同的弹出视图，但填充了不同的信息。

我正在以这种方式创建网格：

```
 for (int i=0; i<NUM_BADGES; i++) {
    BadgeThumbView *thumb = [[BadgeThumbView alloc] initWithFrame:CGRectMake(posX, posY, 70, 100) 
                                                    andWithLabel:[NSString stringWithFormat:@"BADGE NAME N. %d", i]];
    UITapGestureRecognizer *gestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(onBadgeTapped:)];
    [thumb addGestureRecognizer:gestureRecognizer];
    [thumb setTag:i];
    [more code here....]

 } 
```

在 onBadgeTapped 方法中，我正在创建弹出窗口。现在我的问题是一切正常，但我刚刚意识到，当弹出窗口打开时，在与其按钮交互时，我仍然在底层视图控制器中触发手势识别器。

有没有办法在底层视图中禁用所有 GestureRecognizers？我的策略错了吗？并且：有没有办法为我的所有图标使用单个 UIGestureRecognizer，以便以更简单的方式禁用/启用？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:33:03.300

您可以从视图中删除识别器或设置 userInteractionEnabled 以暂时禁用它。根据您的弹出窗口的实现方式，您可以一次将它们全部禁用。

一种解决方案是将拇指添加为容器 UIView 的子视图，并将该容器添加到您的父视图。然后，您可以通过在容器视图上设置 userInteractionEnabled 来启用/禁用所有功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:33:11.600

我认为您应该做一些事情，例如在弹出窗口出现时禁用所有拇指视图的 userInteraction 并在像这样消失时重新启用

```
[[yourSuperView subviews]makeObjectsPerformSelector:@selector(setUserInteractionEnabled:) withObject:[NSNumber numberWithBool:FALSE]]; 
```

否则将所有thumbViews添加到一个子视图（比如'b'）然后将视图'b'添加到superview（比如'a'）作为子视图`b`并在弹出窗口出现时关闭用户交互以查看并在弹出窗口消失时打开

# c++ - 声明一个泛型迭代器

> ID：13763088
> 
> 赞同：1
> 
> 时间：2012-12-07T12:27:06.337
> 
> 标签：c++, templates, iterator

我有以下问题：我需要创建一个函数，它需要两个迭代器和一个值，并检查是否在两者之间找到了值。问题：我只能有一个模板参数，它表示迭代器中元素的类型和值。

我的尝试是这样的，但似乎不起作用：

```
template <typename T>
T myFind(iterator<std::bidirectional_iterator_tag,T> begin, iterator<std::bidirectional_iterator_tag, T> end, T elem){
// Code
} 
```

但这不起作用：

```
// vector<int> vect; list<string> lst;
myFind(vect.begin(), vect.end(), 15);
myFind(lst.begin(), lst.end(), "some element"); 
```

有任何想法吗？修改后的代码：

```
 template <typename T> 
 T myFind(T begin, T end,typename std::iterator_traits<T>::value_type elem){
   for(T it = begin; it != end; ++it){
     if(*it == elem){
       return it;
     }
    }
    return end;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:37:28.660

你能有一个模板参数是迭代器类型吗？如果是这样的话：

```
template <typename It>
typename std::iterator_traits<It>::value_type
myFind(It begin, It end, typename std::iterator_traits<It>::value_type elem){
  // ...
} 
```

否则，我认为你的限制太强了。

编辑后：如果您想对`-`返回的迭代器执行操作（正如您在评论中显示的那样），您需要一个随机访问迭代器。但是，`std::list::iterator`它是一个双向迭代器，所以你不能。您将需要使用[`std::prev`](http://en.cppreference.com/w/cpp/iterator/prev)（或在 C++03 中，使用[std::advance](http://en.cppreference.com/w/cpp/iterator/advance)）。

# linux - 如何在 Linux 上将原始数据直接写入 USB 打印机？

> ID：13763090
> 
> 赞同：1
> 
> 时间：2012-12-07T12:27:10.907
> 
> 标签：linux, qt, printing

我正在为 Linux 平台开发带有 qt4 (c++) 的应用程序。当我使用 QTextDocument::drawContext method() 时，有时（并非总是）打印机会打印一些垃圾并浪费大量纸张。我认为这可能与打印机驱动程序有关。这是 Oki MicroLine 3390 eco 打印机。此打印机正在模拟 EPSON LQ 驱动程序。

我测试了一些爱普生驱动程序，但这根本没有帮助。我无法解决这个问题，所以我开始寻找一些替代解决方案 - 直接写入设备。

我正在寻找信息：

1.  如何将原始数据（格式化文本）写入 USB 点阵打印机？
2.  有人知道如何解决打印问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-31T15:59:18.683

任何写入命令都会在设备 /dev/usb/lp0 上打印

测试它 # cat [文件] > /dev/usb/lp0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-24T13:03:43.150

尝试在打印过程之前发送重置序列：

```
[ write_2_printer("\x1b\x40");] 
```

# java - How can an object unmark marker interface?

> ID：13763093
> 
> 赞同：0
> 
> 时间：2012-12-07T12:27:15.153
> 
> 标签：java, oop, interface

```
class A implements Serializable{

}

class B extends A{
    //this also inherits the marker 

} 
```

So is there is a way to **unimplement/unmark** the marker within class `B`?

**Example:** If there are two classes extending `A` named `B` and `C`. But out of them only `C` wants to be serializable and not `B`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T12:29:21.220

It isn't just that Java is missing support for this: such a feature would completely break down its OOP foundations. Type polymorphism means that one can apply Liskov's substitution principle on subtypes: your "feature" would render it inapplicable.

Every subtype is bound tightly by the contract of the type it extends: at each place one refers to the supertype, an instance of subtype must be able to occur. Therefore if the supertype is serialiable, we cannot allow any subtype not to be.

Answering from a different perspective, if you need functionality from the serializable type `A` in a non-serializable type `B`, then base your design on composition instead of inheritance: let `B` include an appropriate instance of `A`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T18:10:44.863

In some cases, it may make sense to define a marker interface which specifically undoes the effect of another marker interface. In general, this should only be done in cases where the purpose of the original marker interface is to indicate a potential optimization, and where the marker's documentation has from the beginning always described its antithesis. In other words, everything that can be done with the base class can be done with the child class (though not necessarily as fast), and no properly-written code will expect the optimization to work on something where it can't.

With regard to things like serialization and cloning, there are three categories of class:

1.  Those which don't know of any reason why they can't be serialized (or cloned), but don't make a public promise about that, and thus don't make any promises about descendant classes. Descendants may be of types 1, 2, or 3.
2.  Those which can't be serialized, and whose descendants can't be either. Descendants should all be of type 2.
3.  Those which publicly promise that they be serialized, with the implication that only classes that can be serialized should derive from them. Descendants should all be of type 3.

If one recognizes that classes may fall into any of the three categories above, a simple pattern for marker interfaces becomes clear. Classes with no serialization-marker interface are of type 1\. Those with a "CannotSerialize" marker are type two. Those with a "CanSerialize" are type three. No class should implement both markers.

Unfortunately, I'm not aware of any parts of the Java or .net frameworks which implement that pattern; both seem to assume there are only two types of classes (things that can do something, and those that can't). Still, it's a good pattern for new types moving forward.

# php - PHP - 使用搜索栏时重复的结果

> ID：13763099
> 
> 赞同：1
> 
> 时间：2012-12-07T12:27:50.343
> 
> 标签：php, search, duplicates, rows

```
$search_exploded = explode (" ", $search);
foreach($search_exploded as $search_each){
    $x++;
    if($x==1) 
        $construct .="concat_ws(Name, Summary, Description, OpeningHours, Address, Postcode, Keywords) LIKE '%$search_each%' ";
    else
        $construct .="AND concat_ws(Name, Summary, Description, OpeningHours, Address, Postcode, Keywords) LIKE '%$search_each%' ";
}

$construct ="SELECT * FROM Rating, Attraction WHERE $construct" ;
$run = mysql_query($construct);
$foundnum = mysql_num_rows($run);

if ($foundnum==0)
    echo "Sorry, there are no matching result for '$search'" ;
else
{
    echo "";
    while($row = mysql_fetch_assoc($run)){
        echo '<a href="details.php?ID=' . $row['AttractionID'] . '"><img class="attractionimg" src="'. $row['ImageUrl'] . '" height="160" width="210" /></a>';
        echo '<div class="a-textcontain">';
        echo '<h2><a href="details.php?ID=' . $row['AttractionID'] . '">' . $row['Name'] . '</a></h2>'; 
        echo '<p class="a-text">' . $row['Summary'] . '</p>';
        echo '</div>';
        echo '<img class="rating" src="'. $row['RatingUrl'] . '" height="25" width="140" alt="Rating"/>';
        echo '<div class="aborderline"></div>';
        break;
    }
} 
```

* * *

我的数据库中有 12 行数据。当我搜索时，它工作正常，但每个搜索结果重复 12 次。我试过放一个“休息”；就像您在上面看到的那样，但这会将搜索限制为只有一个结果...

有人有想法么？

* * *

$construct = "SELECT Attraction.*, Type.TypeName, Rating.RatingUrl";

$construct .= "来自景点";

$construct .= "Inner JOIN Type ON Attraction.Type = Type.TypeID";

$construct .= "Inner JOIN Rating ON Attraction.AttractionID = Rating.AttractionID";

$construct .= "WHERE Attraction = $construct" ;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:35:39.560

> ```
> SELECT * FROM Rating, Attraction 
> ```

您正在执行一个多表查询，其中 的每一行都`Rating`连接到 的每一行`Attraction`，从而将结果相乘。您将需要`LEFT JOIN`具有特定连接条件或可能其他内容的查询，具体取决于意图是什么。

见[http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html，http://dev.mysql.com/doc/refman/5.1/en/join](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html) _ [_ .html](http://dev.mysql.com/doc/refman/5.1/en/join.html)。

# c# - 从后面的代码调用 JavaScript 函数

> ID：13763100
> 
> 赞同：0
> 
> 时间：2012-12-07T12:27:51.497
> 
> 标签：c#, javascript, asp.net

我在 ASPX 页面中有这个 JavaScript 代码

```
<script>
    function show_modal(statut) 
    {
        if (statut == true)
        {
            $(function () 
            {
                $('#modal_success').modal('show')
            })
        }
        else
        {
            $(function ()
            {
                $('#modal_fail').modal('show')
            })
        }
     }
</script> 
```

这显示了一个模态弹出窗口，我喜欢从后面的代码中启动它。

我试过这个，但没有奏效：

```
if (resultat)
        {
            ClientScript.RegisterStartupScript(this.GetType(), "", "show_modal(true);");

        }
        else
        {
            ClientScript.RegisterStartupScript(this.GetType(), "", "show_modal(false);");
        } 
```

但我不知道为什么！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T12:30:48.133

[此调用](http://msdn.microsoft.com/en-us/library/asz8zsxy.aspx)要求您将调用包装在`<script>`标签中（或使用允许您指定是否添加脚本标签的[其他重载）](http://msdn.microsoft.com/en-us/library/z9h4dk8y.aspx)

```
ClientScript.RegisterStartupScript(this.GetType(), "", 
                "<script>show_modal(true);</script>"); 
```

或者

```
ClientScript.RegisterStartupScript(this.GetType(), "", 
                "show_modal(true);", true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T12:29:57.557

尝试：

```
ScriptManager.RegisterStartupScript(this.Page, typeof(Page), Guid.NewGuid().ToString(), script, true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T05:27:58.290

尝试使用**ScriptManager.RegisterClientScriptBlock Method** => 它应该可以工作，更多信息请检查错误控制台以跟踪您的问题。

# postgresql - 如何用重复的 1,2,3,4, 1,2,3,4,... 系列对行进行编号

> ID：13763106
> 
> 赞同：1
> 
> 时间：2012-12-07T12:28:14.073
> 
> 标签：postgresql, postgresql-9.1, window-functions

如何将长度为 4 的系列添加到这样的表中：

源表：

```
id
1
2
3
4
5
6
7
8 
```

结果表：

```
id    series
1     1
2     2
3     3
4     4
5     1
6     2
7     3
8     4 
```

我正在使用 PostgreSQL 9.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T03:54:58.520

如果您的 ID 确实是连续且无间隙的，则可以使用`id % 4 + 1`. 但我想实际上你的 ID 并不是那么有序，如果它们是从 a 生成的，`SEQUENCE`你不应该依赖它们是无间隙的。

您可以使用 正确执行此操作`row_number()`，如下所示：http: //sqlfiddle.com/#! [12/22767/5](http://sqlfiddle.com/#!12/22767/5)

```
SELECT 
  id,
  (row_number() OVER (ORDER BY id) - 1) % 4 + 1
FROM Table1
ORDER BY 1; 
```

也可以`generate_series`在列表中作为 set-returning-function 使用`SELECT`，但这是 PostgreSQL 扩展，而上面是标准 SQL，可以在除不支持窗口函数的 MySQL 之外的任何现代数据库中工作。

如果您想实际向表中添加一列，它会变得更加复杂。我不太确定您为什么要这样做，但可以使用`UPDATE ... FROM`：

```
BEGIN;

ALTER TABLE table1 ADD COLUMN col2 INTEGER;

WITH gen_num(id,n) AS (
    SELECT
      id,
      (row_number() OVER (ORDER BY id) - 1) % 4 + 1
    FROM Table1
    ORDER BY 1)
UPDATE table1 SET col2 = n
FROM gen_num
WHERE gen_num.id = table1.id;

COMMIT; 
```

# css - Iphone 不会显示 Lucida Sans

> ID：13763109
> 
> 赞同：0
> 
> 时间：2012-12-07T12:28:24.857
> 
> 标签：css, font-face

![字体显示不同](../Images/a9afacde34f59ed9131e85fe7c0c86fe.png)

链接是：

> [http://www.woolovers.com/silk-cotton/womens/sleeveless-silk-cotton-camisole.aspx](http://www.woolovers.com/silk-cotton/womens/sleeveless-silk-cotton-camisole.aspx)

左边是 iPhone 显示器，右边是 PC。圈出的字体具有相同的 css 但具有不同的显示。A(pc)=B(pc) 但 A!=B。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:44:15.483

正如 Jukka 所说，它不是 iOS 上支持的字体，所以你有三个选择。

1.  选择适用于所有（iOS、Android、MacOS、Windows 等）平台的不同字体。
2.  *在您的 Web 服务器上托管字体文件并使用 CSS @font-face*指向它。
3.  使用在线字体托管服务，例如[Google Webfonts](http://www.google.com/webfonts)

要使用 CSS 指向自定义字体，请使用以下代码并将 Lucida Sans 字体文件复制到您的 Web 服务器。

```
@font-face{
font-family: "Lucida Sans"; src:url('LucidaSans.ttf');
} 
```

注意：Google Web Fonts 没有可用的 Lucida Sans。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T12:34:09.213

似乎 iPhone 只是没有名为 Lucida Sans 的字体，因此使用了另一种字体。参照。到[iPhone 应用程序支持哪些字体？](https://stackoverflow.com/questions/249251/what-fonts-do-iphone-applications-support)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T08:42:43.007

我的计算机不使用`Lucisa Sans`任何一种显示文本，因为我拥有的字体版本名为`Lucida Sans Unicode`. 所有计算机都没有命名的字体`Helvetica`。

您应该使用字体堆栈将一直回退到`sans-serif`CSS 中定义的默认字体。这样您就知道将始终使用指定的字体之一，并且不会退回到完全不同的字体：

```
font-family: Lucida Sans, Lucida Sans Unicode, Helvetica, Arial, sans-serif; 
```

# javascript - Javascript - 获取所有表 -> tr 值

> ID：13763111
> 
> 赞同：12
> 
> 时间：2012-12-07T12:28:28.067
> 
> 标签：javascript, html-table

```
<table>
  <tr><td>foo</td></tr>
  <tr><td>bar</td></tr>
  <tr><td>abc@yahoo.com</td></tr>
</table> 
```

谁能告诉我如何编写一个 Javascript 行以仅获取下表中的电子邮件地址，我一直在搜索很多，但我遇到的只是在 td 的任一表中使用“id”的教程。我想在没有身份证的情况下做到这一点..请帮忙

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-07T12:33:51.020

```
var rows = document.getElementsByTagName("table")[0].rows;
var last = rows[rows.length - 1];
var cell = last.cells[0];
var value = cell.innerHTML 
```

在这里自己尝试一下：http: [//jsfiddle.net/ReyNx/](http://jsfiddle.net/ReyNx/)。

显然你必须改变`document.getElementsByTagName("table")[0]`以适当地匹配你的桌子

如果您使用的是 jQuery，它会更容易：

```
var value = $('table tr:last td').text(); 
```

有关更多信息，请参阅[MDN DOM 参考](https://developer.mozilla.org/en/docs/Gecko_DOM_Reference)，它向您展示了哪些属性可用于遍历 DOM 的哪些元素。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-07T12:36:06.390

没有 jQuery，`innerHtml`或其他邪恶/繁重的功能，只是普通的旧 JavaScript：

```
// Get the first table in the document.
var table = document.getElementsByTagName('table')[0];
// Get the third row of this table (0-index 3rd = 2)
var emailRow = table.rows[2];
// Get this element's content.
var emailContent = emailRow.firstChild.textContent; 
```

您可以将其写在 1 行中：

```
var emailContent = document.getElementsByTagName('table')[0].rows[2].firstChild.textContent; 
```

* * *

如果您想在表格中查找*所有*电子邮件地址：

```
var emails = [];
var table = document.getElementsByTagName('table')[0];
var rows = table.rows;
for (var i = 0; i < rows.length; i++) {
    var rowText = rows[i].firstChild.textContent;
    if (~rowText.indexOf('@')) { // If the content of the row contains a '@' character (This could be replaced with a regex check)
            // Also, I personally prefer to use '~' over '> -1' for indexOf(), but both would work.
        emails.push(rowText);
    }
}
console.log(emails); 
```

**[工作示例](http://jsfiddle.net/cnTzM/)**

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-08-27T15:11:44.627

如果像我一样，您想从页面上所有表格的所有第一列项目中获取文本，然后使用它。

```
jQuery('table tr td').each( function( cmp ) { 
    console.log( jQuery(this).text() ); 
} ); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-07T12:34:52.510

一个简单的方法是给它一个公共类。尝试：

```
<table>
  <tr><td class="email">foo</td></tr>
  <tr><td class="email">bar</td></tr>
  <tr><td class="email">abc@yahoo.com</td></tr>
</table>

<script>
function getEmail(){
    var email = new Array();
    var arr = document.getElementsByClassName('email');
    for(var i=0; i< arr.length; i++){
        email.push(arr[i].innerHTML);
    }
    alert(email.join(','));
}
</script> 
```

[演示](http://jsfiddle.net/Aki143S/rEVu2/5/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-07T12:44:18.180

假设您使用的是 vanilla Javascript（没有 jQuery 等库），并且这是页面上唯一的表格，您可以使用以下代码选择表格中的第三个 tr，然后找出 td 元素包含的内容

```
var table = document.getElementsByTagName("table")[0];
var emailTr = table.rows[2];
var emailTd = emailTr.cells[0];
var email = emailTd.innerHTML; 
```

jQuery会让这更容易

```
var email = $("table").children("tr:eq(2)").children("td").html(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-07T12:35:16.403

如果您正在使用或计划使用[**jQuery 库**](http://jquery.com/)，这是一个解决方案。

鉴于电子邮件始终位于第三行和第一列（如您的示例中），那么您可以执行以下操作：

```
email = $('table tr:nth-child(3) td:first-child').html(); 
```

查看工作[**演示**](https://tinker.io/8e980)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-01-21T11:16:46.590

我想提取所有电子邮件，但我有超过 1,000 行和 17 个列/单元格。

我使用了 vanilla js，做了一些调整以获得我想要的输出

```
 var table = document.getElementsByTagName("table")[0]; //first table
    var rows = table.rows; 
    //loop through rows
    for (var i = 0; i < rows.length; i+=1) {
        var emailTr = rows[i];
        var emailTd = emailTr.cells[2]; //target third column/cell
        var email = emailTd.innerHTML; //get the value
        console.log(email + ', ');

        var node = document.createElement("span"); // create span element
        node.innerHTML = email + ', '; // desired output
        document.body.appendChild(node); // display to document body
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-07T12:37:14.843

获取所有`<tr>`元素。遍历每一个并将其`innerHTML`与匹配电子邮件地址的正则表达式进行比较。

```
var emailAddresses = [];
var cells = document.getElementsByTagName("td");
for (var i = 0; i < cells.length; i++) {
    if (cells[i].innerHTML.match(/yourEmailRegex/g)) {
        emailAddresses[emailAddresses.length] = cells[i].innerHTML;
    }
} 
```

在这里找到合适的正则表达式[http://www.regular-expressions.info/email.html](http://www.regular-expressions.info/email.html)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-12-16T11:59:24.923

在我的情况下，我想要最后一行的第五列值

```
var rows = document.getElementsByTagName("tbody")[0].rows;
var last = rows[rows.length - 1];
var cell = last.cells[4];
console.log(cell.textContent); 
```

# groovy - 使用 GroovyShell 从 Gradle 运行 Groovy 脚本：线程“主”java.lang.NoClassDefFoundError 中的异常：org/apache/commons/cli/ParseException

> ID：13763112
> 
> 赞同：6
> 
> 时间：2012-12-07T12:28:30.927
> 
> 标签：groovy, gradle

我想从我的 Gradle 构建脚本中运行一个 groovy 命令行脚本。

我在我的 Gradle 脚本中使用此代码：

```
def groovyShell = new GroovyShell();
groovyShell.run(file('script.groovy'), ['arg1', 'arg2'] as String[]) 
```

在我的 Groovy 脚本 (script.groovy) 使用 CliBuilder 类之前，一切正常。然后我得到以下异常：

> org.codehaus.groovy.runtime.InvokerInvocationException：java.lang.NoClassDefFoundError：org/apache/commons/cli/ParseException ...引起：java.lang.ClassNotFoundException：org.apache.commons.cli.ParseException

我发现很多人都有类似的问题和错误，但很难从我阅读的众多帖子中提取“解决方案”。很多人建议将 commons-cli jar 放在类路径中，但是为 GroovyShell 这样做对我来说一点也不明显。另外，我已经在 script.groovy 中为我需要的库声明了 @Grapes 和 @Grab，所以它应该有它需要的一切。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T12:28:30.927

感谢[这个不被接受的 SO 答案](https://stackoverflow.com/a/6519142/544130)，我终于找到了我需要做的事情：

```
//define our own configuration
configurations{
    addToClassLoader
}
//List the dependencies that our shell scripts will require in their classLoader:
dependencies {
    addToClassLoader group: 'commons-cli', name: 'commons-cli', version: '1.2'
}
//Now add those dependencies to the root classLoader:
URLClassLoader loader = GroovyObject.class.classLoader
configurations.addToClassLoader.each {File file ->
    loader.addURL(file.toURL())
}

//And now no more exception when I run this:
def groovyShell = new GroovyShell();
groovyShell.run(file('script.groovy'), ['arg1', 'arg2'] as String[]) 
```

[您可以在此论坛帖子](http://gradle.1045684.n5.nabble.com/using-jdbc-driver-in-a-task-fails-td1435189.html)中找到有关 classLoaders 以及此解决方案为何有效的更多详细信息。

快乐的脚本！

*（在您投票反对我回答我自己的问题之前，[请阅读此内容](https://blog.stackoverflow.com/2011/07/its-ok-to-ask-and-answer-your-own-questions/)）*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T12:49:59.677

执行此操作的替代方法如下：

```
buildScript {
  repositories { mavenCentral() }
  dependencies {
    classpath "commons-cli:commons-cli:1.2"
  }
}

def groovyShell = new GroovyShell()
.... 
```

这会将 commons-cli 依赖项放在构建脚本的类路径上，而不是放在要构建的项目的类路径上。

# google-maps - 如何使用 google map api 从城市名称中获取州名？

> ID：13763115
> 
> 赞同：-1
> 
> 时间：2012-12-07T12:28:32.067
> 
> 标签：google-maps, google-maps-api-3

我使用谷歌自动建议创建了一个自动建议文本框。我有用户输入的城市名称。

我想在城市末尾自动添加其州名。我正在使用谷歌地图自动建议和谷歌地图 javascript API v3。

[http://geo-autocomplete.googlecode.com/svn/trunk/demo/ui.demo.html](http://geo-autocomplete.googlecode.com/svn/trunk/demo/ui.demo.html)

请尽快提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:53:36.650

那将是这样的：

```
placemark.AddressDetails.Country.AdministrativeArea.AdministrativeAreaName 
```

# button - 包括/排除 Pinterest“Pin It”按钮的图像

> ID：13763116
> 
> 赞同：4
> 
> 时间：2012-12-07T12:28:34.167
> 
> 标签：button, pinterest

我网站上的每个帖子都包含一个照片库。画廊由链接到全尺寸图像的缩略图组成。我还在我的帖子中放置了一个 PinIt 按钮。问题是它会捕获缩略图以供钉住。

根据我对此类问题的发现，我最终得到了以下代码，该代码应从 pining 中排除缩略图，并改为包含全尺寸图像。这些都不是，虽然...

```
<a href="path_to_full_image" rel="lightbox[single_post]" pi:pinit:media="path_to_full_image">
     <img src="path_to_thumbnail" width="200" height="130" nopin="nopin" />
</a> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-24T14:27:05.977

我们可以通过使用`nopin = "nopin"`image 属性来避免在 pin 动作中显示图像。

例如，

```
<img src="http://via.placeholder.com/350x150" nopin = "nopin" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T11:27:08.873

In order for the PinIt button to pick full-size images they should be loaded and visible on the page. Since they are not, it cannot grab them to the grid gallery. As a workaround I would suggest to have a custom logic that pre-loads full-sized images before triggering the PinIt button click event. Something like this:

```
$('a[rel="lightbox"]').each(function(){
  image_src = $(this).attr('href');
  $('<img/>').attr('src',image_src).appendTo('#imageContainer');
  ;
})
$('#pinItButton').trigger('click'); 
```

This way you will pre-load all the images and put them into **imageContainer** block and then trigger a click that will open Grid Gallery to pick an image.

Hope it helps.

# arrays - 如何将损坏的方案字符串存储在数组或向量中？

> ID：13763118
> 
> 赞同：1
> 
> 时间：2012-12-07T12:28:35.197
> 
> 标签：arrays, string, vector, char, scheme

我得到一个字符串作为输入，我想将它存储在一个数组或一个向量中，这样我就可以检查损坏的字符串的值。

在这里，我将字符串分解为 chars ：

```
(define (dealBreaker str) (string->list str))  ; break the string into chars 
```

但是当我尝试声明一个简单的向量时：

```
(define (myVector (make-vector 4 (/ 1 2)))) 
```

我明白了：`#%plain-lambda: not an identifier in: (make-vector 4 (/ 1 2))`

如何`someVector`从上面的方法声明一个为损坏字符调用的向量`dealBreaker`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T13:56:21.613

试试这个，对于一些`str`字符串：

```
(define (dealBreaker str)
  (list->vector (string->list str)))

(define myVector (dealBreaker "some string"))

myVector
=> '#(#\s #\o #\m #\e #\space #\s #\t #\r #\i #\n #\g) 
```

以上将从字符串中的字符创建一个新向量，这是您需要的吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T13:10:40.413

这里的问题是`define`应该是

```
(define identifier value) 
```

但现在你有

```
(define (identifier value)) 
```

所以试试

```
(define myVector (make-vector 4 (/ 1 2))) 
```

有点混乱，因为在Scheme中，define是重载的，还有

```
(define (functionName formals) body) 
```

但这纯粹是语法糖

```
(define functionName
    (lambda formals body)) 
```

旁注：一些初学者方案教科书建议使用 lambda 版本，因为它更明确。

但是，在这种情况下，只需执行以下操作：

```
 (define myVec (list->vector (dealBreaker str))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T12:43:24.490

您遇到的直接问题`myVector`似乎是由于放错了括号 - 试试这个，看看它是否解决了“plain-lambda”错误：

```
(define myVector (make-vector 4 (/ 1 2))) 
```

关于将“dealBreaker”字符串转换为向量的问题，您应该能够做到这一点：

```
(define (someVector dealBreakerList) (list->vector dealBreakerList))

(someVector (dealBreaker "someString")) 
```

或者，如果您希望 'someVector' 作为完整功能：

```
(define (someVector str) (list->vector (string->list str)))

(someVector "someString") 
```

# php - PHP 正则表达式匹配文件或目录

> ID：13763122
> 
> 赞同：0
> 
> 时间：2012-12-07T12:28:49.407
> 
> 标签：php, regex

给定一个 URL 路径，我试图创建一个正则表达式来匹配路径是否指向目录，如果它指向文件扩展名 .php、.js、.html、.htm 等，则不匹配。

匹配：

```
/www/site/path/ny/ 
```

匹配：

```
/www/news/state.208/ii 
```

不符合：

```
/www/news/index.php 
```

不符合：

```
/www/site/fr/post.py 
```

这是我一直在使用的正则表达式：

```
^([a-zA-Z0-9/_\-]*[^/])$ 
```

这个正则表达式做我想要的，但它不够精确。它假定它是一个文件的路径，并在遇到“。”时停止匹配，但我需要考虑目录名称包含“。”的可能性，就像上面的例子一样。

我也尝试过使用消极的目光，但没有运气：

```
^(.(?!\.php)|(?!\.htm?l)|(?!\.js))$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:38:34.980

由于您使用的是 PHP，因此您可能想尝试一下[`pathinfo`](http://php.net/manual/en/function.pathinfo.php)：

```
$parts = pathinfo('/www/site/path/file.php'); 
```

在这种情况下`$parts['extension']`会存在，在其他情况下则不会。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T12:38:59.800

试试这个小小的：

```
^.*/[^\.]*$ 
```

编辑：

```
^.*/((?!\.js|\.php|\.html).)*$ 
```

替换或扩展您要忽略的扩展名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T12:38:31.930

为了简化您的问题，您正在寻找以 / 开头的字符串，并且最后一段没有扩展名：

```
[\/]{0,1}.*\/[^\.]*.{1}$ 
```

编辑：

这适用于您的所有示例：

```
^(.*\/){0,1}[^\.]*.{1}$ 
```

# c# - XNA NullReference 异常，在数组中加载纹理时

> ID：13763125
> 
> 赞同：1
> 
> 时间：2012-12-07T12:28:58.837
> 
> 标签：c#, reference, xna, nullreferenceexception

好吧，我被难住了，我通常可以通过使用谷歌或常识找出大多数错误，但这个让我难住了！

我正在尝试将纹理加载到我的结构中的一组敌人（如太空入侵者中的一行），但是当我去调试时它会抛出一个空引用，我知道这意味着我正在尝试访问一些不是'不在那里，我相信这是因为我这样称呼：

在 Initialize 我调用我的方法：

```
Targets.setupSprite(this); 
```

这是结构内部的实际方法：

```
 public void setupSprite(Game1 g)
        {

            widthFactor = 0.05f;
            rowSize = 15;
            spriteSpacingY = spriteRectangle.Height + 5;

            for (int i = 0; i < rowSize; i++)
            {
                if (i < 15)
                    spriteSpacing = 10;

                sprites[i].spriteTexture = g.texture;

                x = 0 + (i * spriteSpacing);
                y = spriteSpacingY;
                visible = true;

            }

        } 
```

在 Content Loader 可以设置纹理之前。它建议使用“**新**”，但我不知道如何在这里使用它。

您可能已经猜到了引发错误的行是：

```
sprites[i].spriteTexture = g.texture; 
```

*g.texture*是敌人的纹理，位于加载内容中。

任何帮助将不胜感激！

附加代码：

```
 protected override void Initialize()
    {
        displayHeight = GraphicsDevice.Viewport.Height;
        displayWidth = GraphicsDevice.Viewport.Width;

        new TargetRowStruct();

            BreadBat.setupSprite(this);
            CheeseBall.setupSprite(this);
            Targets.setupSprite(this);

        base.Initialize();
    }
    protected override void LoadContent()
    {
        // Create a new SpriteBatch, which can be used to draw textures.
        spriteBatch = new SpriteBatch(GraphicsDevice);

        texture = this.Content.Load<Texture2D>("Handsome");
        swag = this.Content.Load<Texture2D>("swag");
        back = this.Content.Load<Texture2D>("Backdrop");
        font = this.Content.Load<SpriteFont>("FontA");

        backRect.Width = (int)displayWidth;
        backRect.Height = (int)displayHeight;

        BreadBat.loadTexture(this);
        CheeseBall.loadTexture(this);
        Targets.loadTexture(this);

        BreadBat.scaleSprites(this);
        CheeseBall.scaleSprites(this);
        Targets.scaleSprites(this);

    } 
```

Targets 结构中的相关代码：

```
 public void scaleSprites(Game1 g)
        {

            for (int i = 0; i < rowSize; i++)
            {

                sprites[i].spriteRectangle.Width = (int)((g.displayWidth * sprites[i].widthFactor) + .25f);
                sprites[i].aspectRatio = (int)(sprites[i].spriteTexture.Width / sprites[i].spriteTexture.Height);
                sprites[i].spriteRectangle.Height = sprites[i].spriteRectangle.Width;
            }
        }

        public void loadTexture(Game1 g)
        {
            for (int i = 0; i < rowSize; i++)
            {                   
                sprites[i].spriteTexture = g.texture;
            }
        }

        public void drawSprite(Game1 g)
        {
            g.spriteBatch.Draw(spriteTexture, spriteRectangle, Color.White);

            for (int i = 0; i < rowSize; i++)
            {
                if (sprites[i].visible)
                {
                    g.spriteBatch.Draw(sprites[i].spriteTexture, sprites[i].spriteRectangle, Color.White);
                }
            }
        }

        public void setupSprite(Game1 g)
        {

            widthFactor = 0.05f;
            rowSize = 15;
            spriteSpacingY = spriteRectangle.Height + 5;

            for (int i = 0; i < rowSize; i++)
            {
                if (i < 15)
                    spriteSpacing = 10;

                x = 0 + (i * spriteSpacing);
                y = spriteSpacingY;
                visible = true;

            }

        } 
```

Ps 应该注意的是，几乎相同的面包和奶酪结构（除了是一个精灵而不是数组）工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:35:05.860

我仍然怀疑，在 Target struct 内部你没有初始化这个 sprites[] 数组；因此，无论是在执行时`sprites == null`还是`sprites[i]`= null;

如我所见，在 Targets 上调用了三个方法，一个`Targets.setupSprite(this);`在 Initialize 内部调用。

`Targets.loadTexture(this); Targets.scaleSprites(this);`=> 这两个在 LoadContent 中被调用。

现在，正如 msdn 所述，Initialize 方法是“在创建 Game 和 GraphicsDevice 之后，但在 LoadContent 之前调用”。

如果在删除有问题的行之后（我看到你在编辑中添加的代码中做了），NullPointerException 没有与 sprites[] 数组相关，这意味着数组已初始化，但在`Targets.setupSprite(this);`. 如果被抛出，很可能是你根本没有初始化它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T13:33:39.187

异常很清楚，`sprites`为空。使用`sprites = new Sprite[100]`（或您需要的任何类和大小）实例化它，您就可以开始了。

# drupal - Drupal 7：使用当前节点ID在页面上动态生成链接？

> ID：13763127
> 
> 赞同：1
> 
> 时间：2012-12-07T12:29:03.997
> 
> 标签：drupal, drupal-7, drupal-panels

我正在使用 Drupal 7 中的页面管理器和面板构建一个艺术画廊。

画廊中的一件艺术品是一个节点类型，每一个都与一个时间段相关，这也是一个节点类型。

在查看显示一段时间的页面时，我需要一个链接，将用户带到与该时间段相关的所有艺术作品。

所以我做了一个视图，它使用时间段的 nodeid 作为上下文过滤器，并获取与该特定时间段节点相关的所有艺术品节点。

问题是，当在该时间段的页面上时，如何获取该特定时间段的 nodeid 并动态生成指向当前 nodeid 作为参数传递的页面的链接？（以便通过视图获取正确的艺术作品）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T22:22:40.593

您可以`arg(1)`在一段自定义代码中使用来获取当前节点 ID（但前提是它是您所在的节点）。请参阅[http://api.drupal.org/api/drupal/includes%21bootstrap.inc/function/arg/7](http://api.drupal.org/api/drupal/includes%21bootstrap.inc/function/arg/7)。例如，您可以轻松地将视图嵌入您选择的模板或主题函数中，如下所示：

```
views_embed_view('name_of_your_view', 'display_name', arg(1)); 
```

其中第三个参数是参数，即当前（时间段）节点的节点 ID。请参阅[http://api.drupal.org/api/views/views.module/function/views_embed_view/7](http://api.drupal.org/api/views/views.module/function/views_embed_view/7)。

要在该时间段节点上放置指向该页面的链接（由您的视图生成），您可能会结合使用预处理功能和模板（如果设置则打印）。有无数种可能性，因此您可能需要提供更多信息，在哪里放置链接。但基本上可以通过使用 `arg(1)' 来实现。

# batch-file - 通过批处理命令禁用 cmd 关闭按钮

> ID：13763134
> 
> 赞同：3
> 
> 时间：2012-12-07T12:29:22.810
> 
> 标签：batch-file, cmd

我对批处理脚本有点陌生。我最近遇到了一个问题，关于如何在批处理文件运行时禁用 cmd 的关闭按钮。我看到了一些关于如何克服这个问题的帖子。但是事情表明我无法做到..如果any1可以为我指出正确的方向，那就太好了。如果 sum1 可以告诉我如何在批处理文件中执行我之前提到的操作，那将是非常可取的。所以当我在其他电脑上使用它时，效果仍然存在......

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-03-02T19:06:17.823

您可以创建一个可执行文件，为所有名为“cmd”的进程禁用 [X] 按钮，然后在批处理文件的第一行运行该可执行文件。

这是执行此操作的 ac# 程序：

```
using System;
using System.Diagnostics;
using System.Runtime.InteropServices;

namespace Remove__X__Button_from_another_process
{

class Program
{
    [DllImport("user32.dll")]
    static extern IntPtr GetSystemMenu(IntPtr hWnd, bool bRevert);

    [DllImport("user32.dll")]
    static extern bool DeleteMenu(IntPtr hMenu, uint uPosition, uint uFlags);

    const uint SC_CLOSE = 0xF060;
    const uint MF_BYCOMMAND = 0x00000000;

    static void Main(string[] args)
    {
        //Console.Write("Please enter process name:"); // "cmd"
        //String process_name = Console.ReadLine();

        Process[] processes = Process.GetProcessesByName("cmd");
        foreach (Process p in processes)
        {
            IntPtr pFoundWindow = p.MainWindowHandle;

            IntPtr nSysMenu = GetSystemMenu(pFoundWindow, false);
            if (nSysMenu != IntPtr.Zero)
            {
                if (DeleteMenu(nSysMenu, SC_CLOSE, MF_BYCOMMAND))
                {

                }
            }
        }
        Environment.Exit(0);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T12:32:22.147

你不能。

您可以使用 VBScript 隐藏批处理文件的执行

```
Set objShell = WScript.CreateObject("WScript.Shell")
objShell.Run("yourbatchfile.bat"), 0, True 
```

这会对用户隐藏它，但它不会阻止他们在任务管理器中杀死它。

你问的事情真的做不到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-12T18:05:14.013

`name.ps1`在批处理文件夹中创建文件

```
$code = @'
using System;
using System.Runtime.InteropServices;

namespace CloseButtonToggle {

 internal static class WinAPI {
   [DllImport("kernel32.dll")]
   internal static extern IntPtr GetConsoleWindow();

   [DllImport("user32.dll")]
   [return: MarshalAs(UnmanagedType.Bool)]
   internal static extern bool DeleteMenu(IntPtr hMenu,
                          uint uPosition, uint uFlags);

   [DllImport("user32.dll")]
   [return: MarshalAs(UnmanagedType.Bool)]
   internal static extern bool DrawMenuBar(IntPtr hWnd);

   [DllImport("user32.dll")]
   internal static extern IntPtr GetSystemMenu(IntPtr hWnd,
              [MarshalAs(UnmanagedType.Bool)]bool bRevert);

   const uint SC_CLOSE     = 0xf060;
   const uint MF_BYCOMMAND = 0;

   internal static void ChangeCurrentState(bool state) {
     IntPtr hMenu = GetSystemMenu(GetConsoleWindow(), state);
     DeleteMenu(hMenu, SC_CLOSE, MF_BYCOMMAND);
     DrawMenuBar(GetConsoleWindow());
   }
 }

 public static class Status {
   public static void Disable() {
     WinAPI.ChangeCurrentState(false); //its 'true' if need to enable
   }
 }
}
'@

Add-Type $code
[CloseButtonToggle.Status]::Disable() 
```

添加到批次

```
Powershell.exe -executionpolicy remotesigned -File name.ps1 
```

[来源](https://stackoverflow.com/a/19643299/17061201)

# jboss5.x - 将 grails 2.1.1 war 部署到 JBoss 5.1

> ID：13763138
> 
> 赞同：0
> 
> 时间：2012-12-07T12:29:32.453
> 
> 标签：jboss5.x, grails-2.0

我最近将我们的 grails 应用程序从 1.3.7 升级到了 2.1.1。

我正在尝试将它部署到 JBoss 5.1，但遇到了问题。

我在部署期间收到以下错误：

```
Failed to create Resource myapp-2.0.war - cause: java.lang.RuntimeException:org.jboss.deployers.client.spi.IncompleteDeploymentException: Summary of incomplete deployments (SEE PREVIOUS ERRORS FOR DETAILS): 
*** DEPLOYMENTS IN ERROR: Name -> Error vfszip:/C:/Users/e034791/Documents/tools/jboss-5.1.0.GA-jdk6/jboss-5.1.0.GA/server/default/deploy/myapp-2.0.war/ -> org.jboss.deployers.spi.DeploymentException: 
URL file:/C:/Users/e034791/Documents/tools/jboss-5.1.0.GA-jdk6/jboss-5.1.0.GA/server/default/tmp/4sp3y1b-x797w6-haf9ykfc-1-hafaajh5-ng/myapp-2.0.war/ deployment failed DEPLOYMENTS IN ERROR: 
Deployment "vfszip:/C:/Users/e034791/Documents/tools/jboss-5.1.0.GA-jdk6/jboss-5.1.0.GA/server/default/deploy/myapp-2.0.war/" is in error due to the following reason(s): org.jboss.deployers.spi.DeploymentException: 
URL file:/C:/Users/e034791/Documents/tools/jboss-5.1.0.GA-jdk6/jboss-5.1.0.GA/server/default/tmp/4sp3y1b-x797w6-haf9ykfc-1-hafaajh5-ng/app-2.0.war/ deployment failed -> org.jboss.deployers.client.spi.IncompleteDeploymentException:Summary of incomplete deployments (SEE PREVIOUS ERRORS FOR DETAILS): 
*** DEPLOYMENTS IN ERROR: Name -> Error vfszip:/C:/Users/e034791/Documents/tools/jboss-5.1.0.GA-jdk6/jboss-5.1.0.GA/server/default/deploy/app-2.0.war/ -> org.jboss.deployers.spi.DeploymentException: 
URL file:/C:/Users/e034791/Documents/tools/jboss-5.1.0.GA-jdk6/jboss-5.1.0.GA/server/default/tmp/4sp3y1b-x797w6-haf9ykfc-1-hafaajh5-ng/app-2.0.war/ deployment failed DEPLOYMENTS IN ERROR: Deployment "vfszip:/C:/Users/e034791/Documents/tools/jboss-5.1.0.GA-jdk6/jboss-5.1.0.GA/server/default/deploy/app-2.0.war/" is in error due to the following reason(s): 
org.jboss.deployers.spi.DeploymentException: URL file:/C:/Users/e034791/Documents/tools/jboss-5.1.0.GA-jdk6/jboss-5.1.0.GA/server/default/tmp/4sp3y1b-x797w6-haf9ykfc-1-hafaajh5-ng/app-2.0.war/ deployment failed 
```

经过多次谷歌搜索，我在 web-app/WEB-INF 下添加了以下文件：

***jboss-web.xml***

```
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE jboss-web PUBLIC "-//JBoss//DTD Web Application 5.0//EN" "http://www.jboss.org/j2ee/dtd/jboss-web_5_0.dtd">

<jboss-web>
    <class-loading java2ClassLoadingCompliance="false">
        <loader-repository>
            com.app.deals:loader=app-2.0.war
            <loader-repository-config>java2ParentDelegation=false</loader-repository-config>
        </loader-repository>
    </class-loading>
</jboss-web> 
```

***jboss-classloading.xml：***

```
<?xml version="1.0" encoding="UTF-8"?>
<classloading xmlns="urn:jboss:classloading:1.0"
    export-all="NON_EMPTY" import-all="true" domain="DefaultDomain"
    top-level-classloader="true" parent-first="false">
</classloading> 
```

***jboss-scanning.xml***

```
<?xml version='1.0' encoding='UTF-8' ?>
<scanning xmlns='urn:jboss:scanning:1.0'>
   <path name='WEB-INF/lib/grails-datastore-gorm-*.jar'>
      <include name='org.grails.datastore' />
   </path>
</scanning> 
```

[阅读此](http://jira.grails.org/browse/GRAILS-8606)链接 后，我添加了扫描文件。

但仍然没有运气。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T17:00:35.120

所以我降级到 grails 2.1.0，一切正常，不需要任何 classloading.xml。

我在使用 grails 2.1.1 和 JBoss 5 时遇到了多个问题。Classloading.xml 似乎没有任何效果，并且我继续遇到各种 clasloading 问题（父级最后的配置似乎什么也没做）。

# sql - 蚂蚁 和 sqlcmd - 不同的输出

> ID：13763144
> 
> 赞同：3
> 
> 时间：2012-12-07T12:29:52.483
> 
> 标签：sql, sql-server, database, ant, sqlcmd

我有一个使用 ant 执行的 .sql 文件，当我使用标记执行它时，我收到了与调用“sqlcmd”时不同的输出。

sql标签输出：

```
 [sql] Executing resource: C:\SqlTesting\TestScriptDependencies\Executor.sql
  [sql] Failed to execute:  Use Library Exec CallSelectSP
  [sql] com.microsoft.sqlserver.jdbc.SQLServerException: Invalid object name'Libraty.dbo.libraryDocumentType'.
  [sql] 0 of 1 SQL statements executed successfully 
```

执行标签输出：

```
 [exec] First SP
 [exec] Msg 208, Level 16, State 1, Server MyPC-PC, Procedure getFirstDocumentType, Line 3
 [exec] Invalid object name 'Libraty.dbo.libraryDocumentType'.
 [exec] Second SP
 [exec] Msg 208, Level 16, State 1, Server MyPC-PC, Procedure badSP, Line 3
 [exec] Invalid object name 'Libraty.dbo.libraryDocumentType'. 
```

这是 .sql 文件。

```
Print 'First SP'
Exec getFirstDocumentType
Print 'Second SP'
Exec badSP
Go 
```

我想知道它是否是 SQL 标记重现与 EXEC 标记相同的输出的一种方式。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:53:59.813

看起来第一个是通过 jdbc 将整个脚本作为一个批次提交。而第二个似乎是通过 sqlcmd 发送每个 sql 语句 - 因此打印语句成功（并导致同步输出 - print 并不总是保证 -`raiserror(str, 10, 1)`使用 nowait；是及时消息传递的唯一保证）并且两个 sp 调用都被尝试，每个产生自己的（sql）错误。

# ruby-on-rails - 如何在 Rails 3 中使用 json 数据将一个 URL 路由到不同的控制器/动作

> ID：13763152
> 
> 赞同：0
> 
> 时间：2012-12-07T12:30:20.490
> 
> 标签：ruby-on-rails

我正在编写 JavaScript 应用程序的服务器端。但是编写这个应用程序的 js 和设计 API 的工程师决定所有 ajax 都将 json 数据发送到“一个”URL，如下所示：

```
{
 "id":"...",
 "method":"method_name",
 "params":{...}
} 
```

所以，我必须为不同的“method_name”提供不同的服务。而 Rails 路由器无法解决这个问题。

我可以使用该`Object.send`方法将不同的服务路由到不同的方法，但是，我想将我的代码分发到不同的 Controller 类。

我可以解析`route.rb`文件中的 json 数据吗？然后路由`/url/method_name`到`controller/action`？

# php - 无法在 Windows 7 上安装 PHPUnit_Invoker

> ID：13763154
> 
> 赞同：5
> 
> 时间：2012-12-07T12:30:27.177
> 
> 标签：php, phpunit, pear

我正在尝试安装 PHPUnit_Invoker。我在`pear install phpunit/PHP_Invoker`命令行上运行命令。我收到这条消息：

> 软件包“pear.phpunit.de/PHP_Invoker”没有可用的版本

我已经在 Windows 机器上安装了 PHPUnit 和 PEAR。有人也面临类似的问题吗？

我又试了一次，我在控制台中收到了这条消息：

> *phpunit/PHP_Invoker 需要 PHP 扩展“pcntl”找不到有效的包安装失败*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T18:32:38.100

PHP_Invoker 所需的 PHP 扩展“PCNTL”（进程控制）目前在非 Unix 平台 (Windows) 上不起作用。

来源：[http](http://www.php.net/manual/en/pcntl.installation.php) ://www.php.net/manual/en/pcntl.installation.php （2013 年 1 月 31 日）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T02:02:01.057

尝试 ：

```
>pear config-set auto_discover 1
>pear clear-cache
>pear install pear.phpunit.de/PHPUnit 
```

我有同样的问题，但似乎已经在 Windows 7 上安装了 WAMP

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-29T18:32:25.913

“力”应该做的工作

```
pear install --alldeps --force phpunit/PHPUnit 
```

# python - 附加到python中的嵌套列表

> ID：13763157
> 
> 赞同：1
> 
> 时间：2012-12-07T12:30:34.810
> 
> 标签：python, list, nested, append

> **可能的重复：**
> [Python 中的“Least Astonishment”：可变默认参数](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)
> [Python - 使用乘法运算符在列表中创建对象的副本](https://stackoverflow.com/questions/1605024/python-using-the-multiply-operator-to-create-copies-of-objects-in-lists)

当我追加到另一个列表中的列表时，Python 的行为出乎意料。这是一个例子：

```
>>> _list = [[]] * 7
>>> _list
[[], [], [], [], [], [], []]
>>> _list[0].append("value") 
```

我的期望：

```
>>> _list
[['value'], [], [], [], [], [], []] 
```

我得到什么：

```
>>> _list
[['value'], ['value'], ['value'], ['value'], ['value'], ['value'], ['value']] 
```

为什么是这样？我怎样才能绕过它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T12:34:20.090

您的问题是您的列表不包含七个独立的列表，而是七次*相同*的列表。

要创建列表列表，最好使用列表推导：

```
_list = [[] for _ in xrange(7)] 
```

这将产生一个包含七个不同列表的列表。

# objective-c - 如何将 Apple 地图与 iPhone 应用程序集成

> ID：13763159
> 
> 赞同：-4
> 
> 时间：2012-12-07T12:30:41.177
> 
> 标签：objective-c, xcode

整合谷歌地图和苹果地图有什么区别。ios6中的MKMapView是加载谷歌还是苹果地图。如何将苹果地图与 iphone 苹果集成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:38:35.530

由于 iOS 6 Apple 已移除 Google Maps，当您的应用程序使用`MKMapView`时，它将在 iOS 6 及更高版本中使用 Apple 地图，在 iOS 5 及更低版本中使用 Google 地图。

# orchardcms - 为什么 ContentPart 不在 ContentItem 中？

> ID：13763162
> 
> 赞同：1
> 
> 时间：2012-12-07T12:30:54.453
> 
> 标签：orchardcms

为什么 ContentItem 中不包含无字段 ContentPart？

以下是 Migrations.cs 中的代码：

```
SchemaBuilder.CreateTable("ImageDescribedPartRecord", 
                table => table.ContentPartRecord());

ContentDefinitionManager.AlterPartDefinition(
                "ImageDescribedPart",
                cpd => cpd.WithField(
                    "Image",
                    b => b
                             .OfType("MediaPickerField")
                             .WithSetting("MediaPickerFieldSettings.Required", "false")));

ContentDefinitionManager.AlterTypeDefinition(
                "PlantPicture",
                cfg => cfg
                           .WithPart("ImageDescribedPart")
                           .WithPart("CommonPart", p => p.WithSetting("OwnerEditorSettings.ShowOwnerEditor", "false"))
                           .WithPart("BodyPart")
                           .WithPart("TitlePart")
                           .WithPart("AutoroutePart"
                                     , builder =>
                                       builder
                                           .WithSetting("AutorouteSettings.AllowCustomPattern", "false")
                                           .WithSetting("AutorouteSettings.AutomaticAdjustmentOnEdit", "true")
                                           .WithSetting("AutorouteSettings.PatternDefinitions", "[{Name:'Container', Pattern: '{Content.Container.Path}/images/{Content.Slug}', Description: 'apgii/taxon/sub-taxon/images/title'}]")
                                           .WithSetting("AutorouteSettings.DefaultPatternIndex", "0"))
                           .WithPart("ContainablePart")
                           .Creatable(true)
                    // todo: The following doesn't work. Make it work.
                           .WithSetting("BodyPartSettings.FlavorDefault", "text") 
                           ); 
```

以下是 ContentPart 的代码：

```
public class ImageDescribedPart : ContentPart<ImageDescribedPartRecord>{

    }

 public class ImageDescribedPartRecord :ContentPartRecord {} 
```

以下代码来自驱动程序

```
IContentQuery<ContentItem> query = _contentManager
     .Query(VersionOptions.Published)
    .Join<CommonPartRecord>()
    .Where(cr => cr.Container.Id == container.Id);
var items = query.Slice(0, 10).ToList();

IEnumerable<Zulatm.WebPlants.Models.ImageDescribedPart> firstImages = items.AsPart<ImageDescribedPart>();

Logger.Debug("Items count: {0}", items.Count());
for (int i = 0; i < items.Count(); i++) {
    Logger.Debug("Item {0}: {1}", i, items[i].As<TitlePart>().Title);

}
Logger.Debug("Images count: {0}",firstImages.Count()); 
```

返回以下内容

```
2012-12-07 16:28:45,616 [35] TaxonomyNodePartDriver - Items count: 2
2012-12-07 16:28:45,617 [35] TaxonomyNodePartDriver - Item 0: Test
2012-12-07 16:28:45,619 [35] TaxonomyNodePartDriver - Item 1: test img 2
2012-12-07 16:28:45,619 [35] TaxonomyNodePartDriver - Images count: 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:37:33.680

您将项目“投射”到零件并将其存储为 IEnumerable。我想知道这如何不会导致编译错误，因为这是错误的。

您的问题的根源很可能是，如果您打算通过“铸造”直接使用零件，则该零件应该有相应的驱动程序（可以为空）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:55:41.883

好的。问题是处理程序中没有添加过滤器。已添加 ActivatorFilter：

```
public ImageDescribedHandler (IRepository<ImageDescribedPartRecord> repository,      INavigationManager navigationManager)
{
    Filters.Add(new ActivatingFilter<ImageDescribedPart>("PlantPicture"));
} 
```

还删除了创建表的行。

# php - 根据前导字符的存在拆分字符串

> ID：13763172
> 
> 赞同：2
> 
> 时间：2012-12-07T12:32:16.157
> 
> 标签：php, string, explode

在 PHP 中，我需要用不带前导“*”的“:”字符分割字符串。

这就是使用 explode() 的作用：

```
$string = "1*:2:3*:4";
explode(":", $string);
output: array("1*", "2", "3*", "4") 
```

但是我需要的输出是：

```
output: array("1*:2", "3*:4") 
```

我将如何实现所需的输出？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T12:33:26.403

您可能正在寻找`preg_match_all()`而不是，因为您正在尝试比它本身可以处理`explode()`的更复杂的拆分。将允许您收集与特定模式匹配的字符串的所有部分，使用正则表达式表示。您正在寻找的模式类似于：`explode()``preg_match_all()`

> 除了 : 后跟 *: 之外的任何内容

所以，试试这个：

```
preg_match_all('/[^:]+\*:[^:]+/', $string, $matches);
print_r($matches); 
```

这将输出如下内容：

```
Array
(
    [0] => Array
        (
            [0] => 1*:2
            [1] => 3*:4
        )

) 
```

即使数组中有添加的维度，您也应该能够以与使用结果相同的方式使用`explode()`它（它将匹配项划分为“组”，并且所有结果都与整个表达式或第一（0）组）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T12:46:44.957

```
$str = '1*:2:3*:4';
$res = preg_split('~(?<!\*):~',$str);
print_r($res); 
```

将输出

```
Array
(
    [0] => 1*:2
    [1] => 3*:4
) 
```

该模式基本上说：

> 用 [不以星号开头的冒号] 分隔

# c++ - 类/成员函数中的函数原型

> ID：13763174
> 
> 赞同：0
> 
> 时间：2012-12-07T12:32:35.690
> 
> 标签：c++, visual-c++

谁能向我解释我如何为类创建函数原型？如何将 main 函数放在代码的开头？

这是我使用类执行常见数学运算的代码。我尝试在网上搜索解释，但并没有真正遇到任何解释。任何帮助，将不胜感激。

```
#include <iostream>
using namespace std;

class fraction
{
   public:
      fraction();
      fraction(int, int);

      friend fraction operator + (fraction f1, fraction f2);
      friend fraction operator - (fraction f1, fraction f2);
      friend fraction operator * (fraction f1, fraction f2);
      friend fraction operator / (fraction f1, fraction f2);

      void readFrac();
      void displayFrac();

   private:
      int num;
      int denom;
};

fraction::fraction()
{
   num = 0;
   denom = 1;
}

fraction::fraction(int n, int d)
{
   num   = n;
   denom = d;
}

void fraction::readFrac()
{
   char slash;
   do {
       cout << "Please enter numerator  /  denominator: " << endl;
       cin  >>  num >> slash >> denom;
   } while (slash != '/');
}

void fraction::displayFrac()
{
   cout << num << '/' << denom;
}

fraction operator + (fraction f1, fraction f2)
{
   fraction temp(f1.num*f2.denom + f1.denom*f2.num, f1.denom*f2.denom); 
   return temp;
}

fraction operator - (fraction f1, fraction f2)
{
   fraction temp(f1.num*f2.denom - f1.denom*f2.num, f1.denom*f2.denom); 
   return temp;
}

fraction operator * (fraction f1, fraction f2)
{
    fraction temp(f1.num*f2.num, f1.denom*f2.denom);
    return temp;
}

fraction operator / (fraction f1, fraction f2)
{
    fraction temp(f1.num*f2.denom, f1.denom*f2.num);
    return temp;
}

int main()
{
   fraction f1, f2, f3;

   cout << "Please enter first fraction: " << endl;
   f1.readFrac();

   cout << "Please enter second fraction: " << endl;
   f2.readFrac();

   f3 = f1 + f2;     cout << endl << endl;
   f1.displayFrac(); cout << " + "; 
   f2.displayFrac(); cout << " = "; 
   f3.displayFrac(); cout << endl << endl;

   f3 = f1 - f2;     cout << endl << endl;
   f1.displayFrac(); cout << " - "; 
   f2.displayFrac(); cout << " = "; 
   f3.displayFrac(); cout << endl << endl;

   f3 = f1 * f2;     cout << endl << endl;
   f1.displayFrac(); cout << " * "; 
   f2.displayFrac(); cout << " = "; 
   f3.displayFrac(); cout << endl << endl;

   f3 = f1 / f2;     cout << endl << endl;
   f1.displayFrac(); cout << " / "; 
   f2.displayFrac(); cout << " = "; 
   f3.displayFrac(); cout << endl << endl;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:41:27.173

假设您的 main 使用该类，则不能将其放在代码的开头，但可以将其放在类定义之后，成员函数定义之前。

或者您可以将类定义放在头文件中，将成员实现放在单独的源文件中，并将您的 main 函数作为主源文件中的唯一代码。

# twitter-bootstrap - 使用 Twitter Bootstrap 2.x 连续多个分组的下拉按钮

> ID：13763176
> 
> 赞同：7
> 
> 时间：2012-12-07T12:32:39.937
> 
> 标签：twitter-bootstrap, button, drop-down-menu, twitter-bootstrap-2, buttongroup

是否有一种简单的方法可以使用 Twitter Bootstrap将按钮[下拉列表](http://twitter.github.com/bootstrap/components.html#buttonDropdowns)分组为[按钮组？](http://twitter.github.com/bootstrap/components.html#buttonGroups)

**这段代码**

```
<div class="btn-toolbar">
<div class="btn-group">
    <div class="btn-group">
        <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
            January
            <span class="caret"></span>
        </a>
        <ul class="dropdown-menu">
            <li><a href="#" class="active">January</a></li>
            <li><a href="#">February</a></li>
            <!-- ... -->
        </ul>
    </div>
    <div class="btn-group">
        <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
            2012
            <span class="caret"></span>
        </a>
        <ul class="dropdown-menu">
            <li><a href="#" rel="2012" class="active">2012</a></li>
            <li><a href="#" rel="2011">2011</a></li>
            <li><a href="#" rel="2010">2010</a></li>
            <li><a href="#" rel="2009">2009</a></li>
        </ul>
    </div>
</div> 
```

**结果**

![按钮组](../Images/d6f0dcb42bfe6482e651e02db446c623.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-07T15:38:32.180

解决方案是将下拉按钮放入分组按钮中。

这是一个例子：http: [//jsfiddle.net/RayZ/CgBTn/49/](http://jsfiddle.net/RayZ/CgBTn/49/)

```
 <div class="btn-group"> <!-- group container for buttons merging -->
        <div class="btn btn-group">  <!-- button and dropdown group in one -->
            <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
                One 
                <span class="caret"></span>
            </a>
            <ul class="dropdown-menu">
                <li><a href="#">foo</a></li>
            </ul>
        </div>
        <div class="btn btn-group">
            <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
                Two
                <span class="caret"></span>
            </a>
            <ul class="dropdown-menu">
                <li><a href="#">foo</a></li>
            </ul>
        </div>
    </div> 
```

一些 CSS 调整：

```
.btn-group.btn {   border: 0;   padding: 0; }
.btn-group.btn > .btn { border-radius: 0 }
.btn-group.btn > .dropdown-menu {  text-align: left; }
.btn-group.btn:first-child > .btn {
  -webkit-border-radius: 4px 0 0 4px;
     -moz-border-radius: 4px 0 0 4px;
          border-radius: 4px 0 0 4px;
}

.btn-group.btn:last-child > .btn {
  -webkit-border-radius: 0 4px 4px 0;
     -moz-border-radius: 0 4px 4px 0;
          border-radius: 0 4px 4px 0;
} 
```

​</p>

# php - “解析错误：语法错误，意外的 T_STRING”

> ID：13763179
> 
> 赞同：0
> 
> 时间：2012-12-07T12:32:43.400
> 
> 标签：php, syntax

我不断收到 Parse 错误：语法错误，意外的 T_STRING，我不确定为什么我一直收到它，它是针对第 157 行的搜索查询，

这是全部代码，在我尝试了您的建议后，它不断出现不同的错误。

```
echo ' <a href="details.php?ID=' . $row['AttractionID'] . '"><img  src="'. $row['ImageUrl'] . '" id="img_rest" /></a><br/>'; 
```

提前喝彩

```
<?php

    $button = $_GET ['submit'];
    $search = $_GET ['search']; 

    if(!$button)
    echo "you didn't submit a keyword";
    else
    {
    if(strlen($search)<=1)
    echo "Search term too short";
    else{
    echo "You searched for \"<strong>$search</strong>\" <hr />";
    mysql_connect("localhost","wd","wd");
    mysql_select_db("leedsattractions");

    $search_exploded = explode (" ", $search);

    foreach($search_exploded as $search_each)
    {
    $x++;
    if($x==1)
    $construct .="name LIKE '%$search_each%'";
    else
    $construct .="AND name LIKE '%$search_each%'";

    }

    $construct  = "SELECT * FROM Attraction WHERE $construct" ;

    $run = mysql_query($construct);

    $foundnum = mysql_num_rows($run);

    if ($foundnum==0)
    echo "No results found for \"<strong>$keywords</strong>\" <hr />";
    else
    {
    echo "\"<strong>$foundnum</strong>\" results found !";

    while($row = mysql_fetch_assoc($run))
    {

        echo ' <a href="details.php?ID=' . $row['AttractionID'] . '"><img src="'. $row['ImageUrl'] . '" id="img_rest" /></a>';
        echo ' <div class="img_rst">';
        echo ' <h2><a href="details.php?ID=' . $row['AttractionID'] . '">' . $row['Name'] . '</a></h2>'; 
        echo ' <p>' . $row['TypeName'] . '</p>';
        echo ' <p>' . $row['Summary'] . '</p>';
        echo ' <h2>' . $row['Postcode'] . '</h2>';
        echo ' </div>'; 
            echo ' <hr />';

    }
    }

    }
    }

    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:39:46.377

```
 echo " <a href='details.php?ID='" . $row['AttractionID'] . "'><img  src='". $row['ImageUrl'] . "' id='".$img_rest."' /></a><br/>";

you can repeat the id of image 
```

# jquery - 位置固定 #footer - 移动 Safari (iPad) 错误行为

> ID：13763185
> 
> 赞同：1
> 
> 时间：2012-12-07T12:33:09.587
> 
> 标签：jquery, ipad, position, mobile-safari, fixed

我正在为 iPad 应用程序开发 html+css。

为了说明这个问题，我做了一个简单的假人：

```
<head>

    <meta charset="UTF-8" />

    <style>
        body {
            height:100%;
            width:100%;
            padding:0px;
            margin:0px;
            background:#333;    
        }
        #container {
            width:90%;
            margin:0 auto;
            background:#ccc;
            padding:10px;   
        }
        #footer {
            position:fixed;
            bottom:0px;
            height:100px;
            width:100%;
            background:red;
            text-align:center;  
        }
    </style>

</head>

<body>

    <div id="container">Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>Test<br/>                                                        
</div>
    <div id="footer">

    </div>        
</body> 
```

尝试使用 iPad / Safari 手机，您会注意到第一次滚动页脚（红色块）。它会向上滚动，直到您停止滚动。在您第二次尝试时，一切正常。

当您重新加载页面时，一切都会再次发生。

我认为这是对固定位置的支持是错误的。

任何想法如何解决这个问题？也许使用 jQuery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:36:31.873

[jQuery Mobile Fixed Footer Scrolls with Text One Time Then Stops in iOS App](https://stackoverflow.com/questions/13199258/jquery-mobile-fixed-footer-scrolls-with-text-one-time-then-stops-in-ios-app)是否遇到了同样的问题？如果是这样，那么这个小技巧似乎解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:13:07.783

我正在从事的项目也有同样的问题。而不是使用：

```
#footer {
      position:fixed;
      bottom:0px;
      height:100px;
      width:100%;
      background:red;
      text-align:center;  
} 
```

我使用了以下代码，它确实对我有用

```
#footer {
      position:absolute;
      bottom:0px;
      height:100px;
      width:100%;
      background:red;
      text-align:center;  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T08:24:08.273

上面的 Jimbo 发现了问题并引导我找到了答案。

它以 100 毫秒的延迟工作。

这是对我有用的最终解决方案。

```
function fixJqmScrollBug() {
    window.scrollTo(0, 1);
    setTimeout(function() {
        window.scrollTo(0, 0);
    }, 100);
}
$(document).ready(function() {
    fixJqmScrollBug();
}); 
```

# .net - 在 Visual Studio 2012 中创建设置

> ID：13763189
> 
> 赞同：0
> 
> 时间：2012-12-07T12:33:29.933
> 
> 标签：.net, wix, windows-installer, clickonce, installation

我读过一些博客说我们无法从 VS 2012 创建 MSI 文件。

我有以下要求，请您给我建议。

我应该创建一个安装程序，它将安装以下内容，1) WPF 应用程序。2) Windows 服务。3) 第三方应用程序。

谢谢和问候，斯里尼瓦斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:38:19.987

我在 Visual Studio 2012 中使用 Wix 3.6 并且完全能够创建 MSI。

我建议使用 Wix，因为它非常强大，可以轻松完成您需要做的所有事情。

# dom - 是否由浏览器插件决定一个事件是否应该在 DOM 中进一步“冒泡”？

> ID：13763191
> 
> 赞同：0
> 
> 时间：2012-12-07T12:33:37.293
> 
> 标签：dom, events, browser, dom-events, browser-plugin

我已经尝试过 VLC 浏览器插件，我对它非常满意。但是当我在 VLC 框架内单击时，在 VLC 最终处理它之后，单击事件不会委托给浏览器，即没有冒泡。这是一般浏览器/浏览器插件的默认行为，即浏览器只是查看`<embed>`or`<object>`并决定它不在其职责范围内，并且浏览器插件可以根据需要冒泡此事件吗？

我知道这可能会因浏览器和插件类型（NPAPI/ActiveX）而异，恕我直言，这让问题变得更加有趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T14:48:19.313

理论上，NPAPI 插件可以根据 NPP_HandleEvent 的返回来决定是否应将鼠标事件视为已处理，从而停止或冒泡。实际上，一些最流行的插件总是返回 0，这意味着浏览器通常只是忽略返回值（以避免出现奇怪的行为，例如双击插件选择网页上的所有文本）。这对于 Chrome 来说当然是正确的，IIRC 对于 Safari 和 Firefox 也是如此。

# iphone - 更改 UIPageViewController 的背面颜色

> ID：13763199
> 
> 赞同：8
> 
> 时间：2012-12-07T12:34:16.627
> 
> 标签：iphone, ios, ipad, uipageviewcontroller

当我使用`UIPageViewController`时，页面的背面颜色始终为白色。我怎样才能改变颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T20:13:25.400

您正在看到窗口背景颜色。您应该设置窗口背景颜色：

`appDelegate.window.backgroundColor = [UIColor blackColor];`

# mysql - 同时选择和更新

> ID：13763202
> 
> 赞同：0
> 
> 时间：2012-12-07T12:34:28.110
> 
> 标签：mysql, transactions

我需要将一些数据导出到 CSV 文件。为此，我发出一个`SELECT`命令，其中某一列设置为 0。之后，我必须将这些行设置为 1，以免再次导出它们。

面对这种情况的最佳方法是什么？我的意思是一些“交易”，其中我`UPDATE`选择了与我之前选择的完全相同的行。

是`SELECT ... FOR UPDATE`要走的路吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:08:36.273

这是你想要的？

```
UPDATE table SET column = 1 WHERE(
SELECT column FROM table WHERE column = 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T17:41:54.437

如果它对任何人都有帮助，我所做的就是在我的表中有一个 3 状态字段。

每次插入记录时，其初始状态为 0。

当我想导出新行时，事务内部会发生以下情况：

*   状态为0（新）的设置为1（即将导出）
*   选择状态为 1（即将导出）的行用于 csv 导出
*   状态为 1（即将导出）的设置为 2（已导出）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-25T17:36:36.427

这个问题可能很老，但可能会帮助将来寻找相同事物的人。简单的回答**NO！**. MySQL 中无法同时选择和更新。尽管根据您的问题，您可以像这样制作**存储过程**

```
CREATE PROCEDURE `GetandUpdate` (IN IDSet VARCHAR(300)
BEGIN
    select * from tbl_CSV where state = 0 and FIND_IN_SET(id, IDSet);
    update tbl_CSV set state = 1 where state = 0 and FIND_IN_SET(id, IDSet);
END 
```

其中 IDSet 可以是逗号分隔的字符串，例如*3,14,8,1*

# iphone - 单击表格视图或按钮时如何在我的标签中获取值

> ID：13763203
> 
> 赞同：0
> 
> 时间：2012-12-07T12:34:28.967
> 
> 标签：iphone, ios, xcode, ipad

嗨，我试图在标签中显示来自 SQLite 的名称和电子邮件，从`tableView`到下一个视图，但在我的日志消息中，我只得到名称和标签名称，标签电子邮件为空。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *MyIdentifier = @"MyCell";
    UITableViewCell *cell =[tableView dequeueReusableCellWithIdentifier:MyIdentifier];
    if (cell==nil) {
        cell =[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault 
                                    reuseIdentifier:MyIdentifier];
    }
    cell.accessoryType=UITableViewCellAccessoryDisclosureIndicator;
    user *worddc=[Array objectAtIndex:[indexPath row]];
    cell.textLabel.text = worddc.name;
    profileVC *pvc =[[profileVC alloc]init];

    NSLog(@"name is  %@",worddc.name);

    pvc.nameLbl.text=worddc.name;

    NSLog(@"email is  %@",worddc.email);
    NSLog(@"label name is %@",pvc.nameLbl.text);

    pvc.emailLbl.text=worddc.email;

    NSLog(@"label email is %@",pvc.emailLbl.text);

    return cell;
} 
```

在日志消息中：

```
2012-12-07 17:02:28.720 loginApp[1881:c07] CONNECTION SUCCESSFUL WITH DB
2012-12-07 17:02:36.628 loginApp[1881:c07] QUERY: select email,password from login where email ='a@a.com' and password ='a'
2012-12-07 17:02:36.664 loginApp[1881:c07] QUERY: SELECT login.Name,login.id,login.Email FROM login ORDER BY login.Name ASC, login.id ASC
2012-12-07 17:02:36.667 loginApp[1881:c07] QUERY: select last_insert_rowid() 
2012-12-07 17:02:38.010 loginApp[1881:c07] id 6 
2012-12-07 17:02:38.011 loginApp[1881:c07] name is  a
2012-12-07 17:02:38.011 loginApp[1881:c07] email is  (null)
2012-12-07 17:02:38.012 loginApp[1881:c07] label name is (null)
2012-12-07 17:02:38.017 loginApp[1881:c07] label email is (null) 
```

请问有什么帮助或建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:52:28.763

worddc 是否有效（不是零）？数组呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:36:09.027

您是否尝试从笔尖加载视图控制器？如果是这样，您需要在 profileVC 上调用 – initWithNibName:bundle: 而不仅仅是 init。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T12:43:38.837

您应该在其中实现`profileVC`调用方法，`- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath:`因为`cellForRowAtIndexPath`每次都会调用数据库中的最多行数，并且您正在初始化 pvc，`cellForRowAtIndexPath`其中在每个循环中 pvc 的范围都超出了范围。所以实现这个调用

```
profileVC *pvc =[[profileVC alloc]init];

NSLog(@"name is  %@",worddc.name);

pvc.nameLbl.text=worddc.name;

NSLog(@"email is  %@",worddc.email);
NSLog(@"label name is %@",pvc.nameLbl.text);

pvc.emailLbl.text=worddc.email;

NSLog(@"label email is %@",pvc.emailLbl.text); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T13:17:17.120

profileVC *pvc =[[profileVC alloc]init]; 当您分配新视图时，它会在类中创建和分配新的所有值都为空它只加载视图确实加载并加载视图不加载其他方法

# javascript - 如何判断字符串是否包含 HTML 实体（如 &）？

> ID：13763205
> 
> 赞同：3
> 
> 时间：2012-12-07T12:34:32.760
> 
> 标签：javascript, jquery, html-entities

我正在尝试编写一个函数，根据一组特殊的 HTML 实体（例如用户输入的 '&' 而不是 '&'）检查参数，然后在这些输入的实体周围添加一个跨度。

我将如何搜索字符串参数来找到它？它会是一个正则表达式吗？

到目前为止，这是我的代码：

```
 function ampersandKiller(input) {
 var specialCharacters = ['&amp;', '&nbsp;']
 if($(specialCharacters).contains('&amp;')) {
     alert('hey')
 } else {
     alert('nay')
 }
} 
```

显然这是行不通的。有没有人有任何想法？

因此，如果传递了一个类似的字符串`My name is &amp;`，它将呈现`My name is <span>&amp;</span>`. 如果一个特殊字符被列出两次——比如'我真的很喜欢`&amp;&amp;&amp;`它只会渲染每个元素周围的跨度。用户还必须能够使用 plain `&`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T12:38:24.183

```
function htmlEntityChecker(input) {
    var characterArray = ['&amp;', '&nbsp;'];
    $.each(characterArray, function(idx, ent) {
        if (input.indexOf(ent) != -1) {
            var re = new RegExp(ent, "g");
            input = input.replace(re, '<span>' + ent + '</span>');
        }
    });

    return input;
} 
```

[**小提琴**](http://jsfiddle.net/JpvyX/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T12:38:08.653

您可以使用此正则表达式来查找和包装实体：

```
input.replace(/&amp;|&nbsp;/g, '<span>$&</span>') 
```

对于任何类型的实体，您也可以使用它：

```
input.replace(/&(?:[a-z]+|#\d+);/g, '<span>$&</span>'); 
```

它匹配“单词”实体以及数字实体。例如：

```
'test & &amp; &#60;'.replace(/&(?:[a-z]+|#x?\d+);/gi, '<span>$&</span>'); 
```

输出：

```
test & <span>&amp;</span> <span>&#60;</span> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T12:49:16.460

另一种选择是让浏览器为您进行解码并检查长度是否有任何不同......检查[这个问题](https://stackoverflow.com/questions/1912501/unescape-html-entities-in-javascript)以查看如何取消实体的转义。然后，您可以将原始字符串的长度与解码后的长度进行比较。下面的例子：

```
function htmlDecode(input){
    var e = document.createElement('div');
    e.innerHTML = input;
    return e.childNodes.length === 0 ? "" : e.childNodes[0].nodeValue;
}
function hasEntities(input) {
    if (input.length != htmlDecode(input).length) {
       return true;
    }
    return false;
}
alert(hasEntities('a'))
alert(hasEntities('&amp;')) 
```

上面将显示两个警报。先假后真。

# c# - 如何在 Windows Phone 8 中获取设备分辨率？

> ID：13763209
> 
> 赞同：3
> 
> 时间：2012-12-07T12:34:37.370
> 
> 标签：c#, xaml, camera, resolution, windows-phone-8

Windows Phone 8 中是否有任何方法可以获取设备的分辨率？基本上我需要将设备分辨率设置为我的预览和捕获序列？有人帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T12:45:15.170

请参阅[有关 Windows Phone 8 上的多分辨率的 MSDN 文章](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206974%28v=vs.105%29.aspx)。基本上，您必须获得 XAML 中使用的基本分辨率并应用手机使用的比例因子。

例如：

> WVGA 480 × 800 = 1x(480 × 800)
> 
> WXGA 768 × 1280 = 1.6x(480 × 800)
> 
> 720p 720 × 1280 = 1.5x(480 × 853)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T14:41:06.397

当您说“设备分辨率”时，您是指相机的分辨率还是手机的屏幕分辨率？如果您想要屏幕分辨率，那么您始终可以使用 xaml 页面的“高度”和“宽度”属性来获取它。希望这可以帮助！

# java - 如何禁用 Guava 缓存？

> ID：13763211
> 
> 赞同：3
> 
> 时间：2012-12-07T12:34:53.477
> 
> 标签：java, guava

[JavaCachingWithGuava](http://code.google.com/p/guava-libraries/downloads/detail?name=JavaCachingwithGuava.pdf&can=2&q=)建议关闭缓存的规范方法是设置*maximumSize=0*。但是，我希望下面的测试能够通过：

```
public class LoadingCacheTest {
    private static final Logger LOG = LoggerFactory.getLogger(LoadingCacheTest.class);

    LoadingCache<String, Long> underTest;

    @Before
    public void setup() throws Exception {
        underTest = CacheBuilder.from("maximumSize=0").newBuilder()
                .recordStats()
                .removalListener(new RemovalListener<String, Long>() {
                    @Override
                    public void onRemoval(RemovalNotification<String, Long> removalNotification) {
                        LOG.info(String.format("%s cached value %s for key %s is evicted.", removalNotification.getCause().name(), removalNotification.getValue(), removalNotification.getKey()));
                    }
                })
                .build(new CacheLoader<String, Long>() {
                    private final AtomicLong al = new AtomicLong(0);
                    @Override
                    public Long load(@NotNull final String key) throws Exception {
                        LOG.info(String.format("Cache miss for key '%s'.", key));
                        return al.incrementAndGet();
                    }
                });
    }

    @Test
    public void testAlwaysCacheMissIfCacheDisabled() throws Exception {
        String key1 = "Key1";
        String key2 = "Key2";
        underTest.get(key1);
        underTest.get(key1);
        underTest.get(key2);
        underTest.get(key2);
        LOG.info(underTest.stats().toString());
        Assert.assertThat(underTest.stats().missCount(), is(equalTo(4L)));
    }
} 
```

也就是说，关闭缓存总是会导致缓存未命中。

但是，测试失败了。我的解释不正确吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T12:52:57.490

该方法使用默认设置[`newBuilder`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/cache/CacheBuilder.html#newBuilder%28%29)构造一个新[`CacheBuilder`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/cache/CacheBuilder.html)实例，忽略对[`from`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/cache/CacheBuilder.html#from%28java.lang.String%29). 但是，您想构建[`CacheBuilder`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/cache/CacheBuilder.html)具有特定最大大小的 a。因此，删除对[`newBuider`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/cache/CacheBuilder.html#newBuilder%28%29). 您应该使用调用来[`build`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/cache/CacheBuilder.html#build%28%29)获得[`CacheBuilder`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/cache/CacheBuilder.html)与您的规格匹配的规格，而不是使用默认设置：

```
underTest = CacheBuilder.from("maximumSize=0")
                .recordStats()
                .removalListener(new RemovalListener<String, Long>() {
                    @Override
                    public void onRemoval(RemovalNotification<String, Long> removalNotification) {
                        LOG.info(String.format("%s cached value %s for key %s is evicted.", removalNotification.getCause().name(), removalNotification.getValue(), removalNotification.getKey()));
                    }
                })
                .build(new CacheLoader<String, Long>() {
                    private final AtomicLong al = new AtomicLong(0);
                    @Override
                    public Long load(@NotNull final String key) throws Exception {
                        LOG.info(String.format("Cache miss for key '%s'.", key));
                        return al.incrementAndGet();
                    }
                }); 
```

# r - 如何删除所有重复项以使 NONE 留在数据框中？

> ID：13763216
> 
> 赞同：31
> 
> 时间：2012-12-07T12:35:25.567
> 
> 标签：r, duplicates, unique, r-faq

PHP有一个[类似的问题](https://stackoverflow.com/questions/3691369/how-can-i-remove-all-duplicates-from-an-array-in-php)，但我正在使用 R 并且无法将解决方案翻译为我的问题。

我有这个包含 10 行和 50 列的数据框，其中一些行是完全相同的。如果我在它上面使用唯一的，我会得到一行 - 比如说 - “类型”，但我真正想要的是只得到那些只出现一次的行。有谁知道我怎么能做到这一点？

我可以查看集群和热图以手动对其进行排序，但我的数据框比上面提到的更大（最多 100 行），这有点棘手。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-12-07T12:40:54.467

这将提取仅出现一次的行（假设您的数据框名为`df`）：

```
df[!(duplicated(df) | duplicated(df, fromLast = TRUE)), ] 
```

*它是如何工作*的：该函数`duplicated`测试一行是否从第一行开始至少第二次出现。如果使用参数`fromLast = TRUE`，则函数从最后一行开始。

这两个布尔结果与`|`（逻辑“或”）组合成一个新向量，表示所有行出现多次。这个结果被否定，`!`从而创建一个布尔向量，指示只出现一次的线。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-07-21T21:20:06.873

涉及的可能性`dplyr`可能是：

```
df %>%
 group_by_all() %>%
 filter(n() == 1) 
```

或者：

```
df %>%
 group_by_all() %>%
 filter(!any(row_number() > 1)) 
```

由于`dplyr 1.0.0`，最好的方法是：

```
data %>%
    group_by(across(everything())) %>%
    filter(n() == 1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-20T13:08:16.273

尝试一下

```
library(dplyr)

DF1 <- data.frame(Part = c(1,2,3,4,5), Age = c(23,34,23,25,24),  B.P = c(87,76,75,75,78))

DF2 <- data.frame(Part =c(3,5), Age = c(23,24), B.P = c(75,78))

DF3 <- rbind(DF1,DF2)

DF3 <- DF3[!(duplicated(DF3) | duplicated(DF3, fromLast = TRUE)), ] 
```

# php - Javascript JSON.parse responseText“输入意外结束”

> ID：13763219
> 
> 赞同：6
> 
> 时间：2012-12-07T12:35:42.947
> 
> 标签：php, javascript, xmlhttprequest, json

运行此 JSON.parse 时，我在浏览器控制台中不断收到“Uncaught SyntaxError: Unexpected end of input”。我尝试将 $element 缩短为 $entry 但仍然没有成功：

```
function getFileList() {
        var elements;   
    var foo = document.getElementById("filelist");
    var xhr = new XMLHttpRequest();
    xhr.addEventListener("load", complete, true);

         // foo.innerHTML= xhr.responseText;
    xhr.onreadystatechange = function () {
        console.log(JSON.parse(xhr.responseText));

    }

    xhr.open("GET", "php/dir_list.php", true);
    xhr.send(null);

    function complete() {
        eventAssign();
        xhr.removeEventListener("load", complete, false);
    }

}

<?php
$files = array();
if ($handle = opendir('/trunk')) {
    $i = 0;
    while (false !== ($entry = readdir($handle))) {
        if ($entry != "." && $entry != "..") {
            $element = '<li><a class="files" id="listFile'.$i.'" data-filename="'.$entry.'" href=php/download.php?filename='.$entry.'>'.$entry.'</a></li>';
            $checksum = shell_exec("sum /trunk/".$entry);
            $files[$entry] = array( $element, $checksum );
            $i++;
        }
    }
    closedir($handle);
}
$files =  json_encode($files);
echo $files;
?> 
```

编辑：固定 getFileList() 粘贴。

只是为了避免混淆，问题仍然存在。这是 php dir_list.php 的 json 输出：

网络服务器 httpfiles # php php/dir_list.php

```
{"lynx2.8.5rel.1-DOSc.zip":["<li><a class=\"files\" id=\"listFile0\" data-filename=\"lynx2.8.5rel.1-DOSc.zip\" href=php\/download.php?filename=lynx2.8.5rel.1-DOSc.zip>lynx2.8.5rel.1-DOSc.zip<\/a><\/li>","02625  2406\n"],"try.zip":["<li><a class=\"files\" id=\"listFile1\" data-filename=\"try.zip\" href=php\/download.php?filename=try.zip>try.zip<\/a><\/li>","18695    74\n"],"darn.tar.gz":["<li><a class=\"files\" id=\"listFile2\" data-filename=\"darn.tar.gz\" href=php\/download.php?filename=darin.tar.gz>darin.tar.gz<\/a><\/li>","56880   292\n"],"songs.txt":["<li><a class=\"files\" id=\"listFile3\" data-filename=\"songs.txt\" href=php\/download.php?filename=songs.txt>songs.txt<\/a><\/li>","43469     1\n"],"CentOS-6.3-x86_64-minimal-EFI.iso":["<li><a class=\"files\" id=\"listFile4\" data-filename=\"CentOS-6.3-x86_64-minimal-EFI.iso\" href=php\/download.php?filename=CentOS-6.3-x86_64-minimal-EFI.iso>CentOS-6.3-x86_64-minimal-EFI.iso<\/a><\/li>","04152 372736\n"]} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-07T13:10:25.887

发现了问题...我在一个电话中得到重复响应...我补充说： if (xhr.readyState==4 && xhr.status==200) {... 它解决了这个问题。谢谢。

# solr - 在 solr 实例上运行完全导入时如何解决 Dataconfig 错误？

> ID：13763221
> 
> 赞同：0
> 
> 时间：2012-12-07T12:35:44.260
> 
> 标签：solr, lucene, glassfish

我创建了 solr 实例，我正在尝试运行完全导入，但我遇到了数据配置问题。

网址为：http://localhost:8080/apache-solr-4.0.0/collection1/dataimport?command=full-import&clean=true

5008data-config.xmlfull-importData Config problem: The processing instruction target matching "[xX][mM][lL] is not allowed.org.apache.solr.handler.dataimport.DataImportHandlerException: Data Config problem: The processing instruction target不允许匹配“[xX][mM][lL]”。在 org.apache.solr.handler.dataimport.DataImporter.loadDataConfig(DataImporter.java:233) 在 org.apache.solr.handler.dataimport.DataImporter.maybeReloadConfiguration(DataImporter.java:131) 在 org.apache.solr.handler .dataimport.DataImportHandler.handleRequestBody(DataImportHandler.java:167) 在 org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129) 在 org.apache.solr.core.SolrCore.execute(SolrCore.java:1699 ) 在 org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:455) 在 org. com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54) 在 com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59) 在 com.sun.grizzly.ContextTask 执行(HttpProtocolChain.java:79) .run(ContextTask.java:71) at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532) at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513) ) 在 java.lang.Thread.run(Thread.java:722) 引起：org.xml.sax.SAXParseException; systemId: solrres:/data-config.xml; 行号：2；列号：6；不允许匹配“[xX][mM][lL]”的处理指令目标。在 com.sun.org.apache.xerces.internal.util 的 com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:198)。

谁可以帮我这个事？

提前致谢.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:16:59.707

一些资源（[此处](http://www.bennadel.com/blog/58-The-Processing-Instruction-Target-Matching-xX-mM-lL-is-Not-Allowed.htm)和[此处](http://comments.gmane.org/gmane.comp.jakarta.tomcat.user/210036)）似乎表明此错误可能是由`'<?xml ...'`正在读取的 XML 中的空格引起的。

# c# - OpenRasta 单元测试响应 HTTP 错误 415

> ID：13763224
> 
> 赞同：0
> 
> 时间：2012-12-07T12:35:56.397
> 
> 标签：c#, unit-testing, post, openrasta

我从我的前任那里继承了一个项目，该项目使用 OpenRasta 为我的 OpenSource 同事托管一个 Web 服务，以访问他们的应用程序。这是我第一次涉足 OpenRasta，我添加了许多附加功能，所有这些功能都通过手动浏览器请求工作，虽然不是 100% 可靠，但这可能是稍后的另一个问题。所以我已经着手创建一组单元测试来测试功能，无论如何我都应该这样做。我已经成功地为每个 GET 请求创建了一个或两个单元测试，所有这些请求都通过了，但是我被困在项目中的单个 POST 的测试中。

我收到 HTTP 415 错误“8-[2012-12-07 11:23:19Z] Information(0) Executing OperationResult OperationResult: type=RequestM ediaTypeUnsupported, statusCode=415。” 从输出窗口。我从 Nate Taylor 的帖子[http://taylonr.com/integration-testing-openrasta](http://taylonr.com/integration-testing-openrasta)中获得灵感，并问了他同样的问题，他很友好地回答了这个问题。我仍在尝试破译他的答案，也许有人可以扩展并填补我的理解空白？这是我一直在尝试的代码：

```
[Test]
public void AuthenticateUserJSONPOSTTest()
    {
        object content = new AuthenticationStructure { Username = "matthew.radford", Password = "obviously not going to tell you that bit and will replace with a domain test user when the time comes", AppId = 4 };

        OpenRastaJSONTestMehods.POST<AuthenticationResult, AuthenticationStructure>("http://localhost/user", content);
    }

[Test]
    public static void POST<T, U>(string uri, object content)
    {
        const string LocalHost = "http://localhost/";
        if (uri.Contains(LocalHost))
            POST<T, U>(new Uri(uri), content);
        else
            throw new UriFormatException(string.Format("The uri doesn't contain {0}", LocalHost));
    }
    [Test, WebInvoke(Method = "POST", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
    public static void POST<T,U>(Uri serviceuri, object content)
    {
        using (var host = new InMemoryHost(new Configuration()))
        {
            var request = new InMemoryRequest()
            {
                Uri = serviceuri,
                HttpMethod = "POST"
            };

            request.Entity.ContentType = MediaType.Json;
            request.Entity.Headers["Accept"] = "application/json";

            var serializer = new DataContractJsonSerializer(typeof(T), new [] { typeof(AuthenticationStructure) });
            serializer.WriteObject(request.Entity.Stream, content); 
            request.Entity.Stream.Seek(0, SeekOrigin.Begin); 
            request.Entity.ContentLength = request.Entity.Stream.Length;

            //Just a read test, not necessary for the output
            byte[] readbyte = new byte[(int)request.Entity.ContentLength];
            request.Entity.Stream.Read(readbyte, 0, (int)request.Entity.ContentLength);
            request.Entity.Stream.Seek(0, SeekOrigin.Begin);

            U readObject = (U)serializer.ReadObject(request.Entity.Stream);
            request.Entity.Stream.Seek(0, SeekOrigin.Begin);

            NUnit.Framework.Assert.AreEqual(content, readObject);

            var response = new InMemoryResponse();

            response.Entity.ContentType = MediaType.Json;
            response.Entity.Headers["Accept"] = "application/json";

            response = (InMemoryResponse)host.ProcessRequest(request);
            int statusCode = response.StatusCode;

//this is where the test fails because the above response isn't correct and gives the 415 statusCode
            NUnit.Framework.Assert.AreEqual(201, statusCode, string.Format("Http StatusCode Error: {0}", statusCode));

            object returnedObject;
            if (response.Entity.ContentLength > 0)
            {
                response.Entity.Stream.Seek(0, SeekOrigin.Begin);

                //Just a read test, not necessary for the output
                readbyte = new byte[(int)response.Entity.ContentLength];
                response.Entity.Stream.Read(readbyte, 0, (int)response.Entity.ContentLength);
                response.Entity.Stream.Seek(0, SeekOrigin.Begin);

                returnedObject = serializer.ReadObject(response.Entity.Stream);
                //return returnedObject;
            }
        }
    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:57:44.207

今天早上我尝试了很多不同的东西来尝试让它发挥作用。通过尝试将 JSON 流作为字符串读取以实际查看对象被序列化的内容，这是我向前迈出的第一步。

为此，我发现[如何在 C# 中将流转换为字节 []？](https://stackoverflow.com/questions/1080442/how-to-convert-an-stream-into-a-byte-in-c)这让我朝着正确的方向前进，将流读取到字符串中。因此，我想出了这一行来将其写入输出窗口：

```
Debug.WriteLine(Encoding.UTF8.GetString(StreamHelper.ReadToEnd(request.Entity.Stream), 0, (int)request.Entity.Stream.Length).ToString()); 
```

结果如下： {"__type":"AuthenticationStructure","username":"matthew.radford","appid":4,"password":"###########"}

我意识到这个输出有两个问题。首先很简单，密码应该在 appid 之前，这在 AuthenticationStructure 类中很容易修复，我犯了一个错误。AppId 的 DataMember Order 需要等于 3

```
[DataMember(Name="appid", Order=3)]
    public int AppId { get; set; } 
```

其次，默认的序列化在符号的开头包含一个 '__type' 成员。这显然与我的处理程序的 POST 方法上的参数不匹配：

```
[HttpOperation(HttpMethod.POST)] 
    public OperationResult Post(string username, string password, int appid) 
```

在这一点上，我试图从 JSON 字符串中删除类型表示法。我找到了一个很好的网站[Deserialize array values to .NET properties using DataContractJsonSerializer](https://stackoverflow.com/questions/2716718/deserialize-array-values-to-net-properties-using-datacontractjsonserializer)这向我展示了如何编写构造函数以包含他们设置为 false 的 alwaysEmitTypeInformation，但我想 Emit 类型信息，所以将其更改为 true。它还向我展示了如何基于 IDataContractSurrogate 创建一个代理，我称之为 AuthenticationTypeSurrogate。

```
public class AuthenticationTypeSurrogate : IDataContractSurrogate
{
    public Type GetDataContractType(Type type)
    {
        // "Book" will be serialized as an object array
        // This method is called during serialization, deserialization, and schema export. 
        if (typeof(AuthenticationStructure).IsAssignableFrom(type))
        {
            return typeof(object[]);
        }
        return type;
    }
    public object GetObjectToSerialize(object obj, Type targetType)
    {
        // This method is called on serialization.
        if (obj is AuthenticationStructure)
        {
            AuthenticationStructure authenticationStructure = (AuthenticationStructure)obj;
            return new object[] { authenticationStructure.Username, authenticationStructure.Password, authenticationStructure.AppId };
        }
        return obj;
    }
    public object GetDeserializedObject(object obj, Type targetType)
    {
        // This method is called on deserialization.
        if (obj is object[])
        {
            object[] arr = (object[])obj;
            AuthenticationStructure authenticationStructure = new AuthenticationStructure { Username = (string)arr[0], Password = (string)arr[1], AppId = (int)arr[2] };
            return authenticationStructure;
        }
        return obj;
    }
    public Type GetReferencedTypeOnImport(string typeName, string typeNamespace, object customData)
    {
        return null; // not used
    }
    public System.CodeDom.CodeTypeDeclaration ProcessImportedType(System.CodeDom.CodeTypeDeclaration typeDeclaration, System.CodeDom.CodeCompileUnit compileUnit)
    {
        return typeDeclaration; // Not used
    }
    public object GetCustomDataToExport(Type clrType, Type dataContractType)
    {
        return null; // not used
    }
    public object GetCustomDataToExport(System.Reflection.MemberInfo memberInfo, Type dataContractType)
    {
        return null; // not used
    }
    public void GetKnownCustomDataTypes(Collection<Type> customDataTypes)
    {
        return; // not used
    }
} 
```

序列化为此工作，但现在反序列化，我从不费心调试并正确处理，因为它仍然无法正常工作，因为它不是创建 JSON，而是序列化对象数组，这是您所期望的，因为这就是 GetObjectoSerialize 方法方法正在返回。因此，除非我能弄清楚如何将其更改为 JSON，否则我会遇到另一面砖墙。

所以最后我想好了，我只需将 __type 参数添加到重载的 POST 方法中，并将其他参数传递给原始 POST 方法。

```
[HttpOperation(HttpMethod.POST)]
    public OperationResult Post(Type __type, string username, string password, int appid)
    {
        return Post(username, password, appid);
    } 
```

这几乎是正确的，但它仍然不起作用，所以最后我创建了另一个重载方法并传递了整个类型：

```
[HttpOperation(HttpMethod.POST)]
    public OperationResult Post(AuthenticationStructure astruct)
    {
        return Post(astruct.Username, astruct.Password, astruct.AppId);
    } 
```

最后这奏效了。我对此并不完全满意，并且希望直接链接到我现有的方法中，但它确实有效。

感谢所有看过的人，尤其是 Nate，感谢您最初的回复，希望这对未来的人们有所帮助。

# jquery - 从 span 元素中删除具有特定类的所有元素

> ID：13763230
> 
> 赞同：2
> 
> 时间：2012-12-07T12:36:11.590
> 
> 标签：jquery

HTML：

```
<script src="../../Scripts/notificator.js" type="text/javascript"></script>

<span id="popUpMessageBoard"/>
<button onclick="success('message', 'popUpMessageBoard')">Add</button>
<button onclick="remove('popUpMessageBoard')">Remove</button> 
```

javascript:

```
success = function (messageToApply, elementIdToApplyMessages) {
    $('#' + elementIdToApplyMessages).append('<strong class="notification" style="color:blue">' + messageToApply + ' </strong>');
};

remove = function (elementId) {
    $('#' + elementId).remove('.notification');
} 
```

将`Add button`元素附加到`popUpMessageBoard span element`. 单击删除按钮时，我希望`.notification class`从父 span 元素中删除所有带有 的元素。我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T12:38:18.567

该`.remove()`方法将删除*匹配集中的*元素。当您将选择器传递给它时，它只会过滤匹配的集合。在您的情况下，此过滤将为您留下一组空元素，并且不会删除任何内容。

您需要删除匹配集中元素的*后代*。您可以使用[`.find()`](http://api.jquery.com/find/)（或可用的众多其他方法之一）来获取这些后代：

```
$('#' + elementId).find('.notification').remove(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T12:38:09.477

你必须像这样改变你的css选择器

```
remove = function (elementId) {
    $('#' + elementId).children('.notification').remove();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T12:39:25.127

```
$('#' + elementId + ' > .notification').remove(); 
```

# facebook - Facebook的图表不再起作用

> ID：13763232
> 
> 赞同：0
> 
> 时间：2012-12-07T12:36:17.413
> 
> 标签：facebook, facebook-graph-api

当我试图获得总分享和评论时，我遇到了问题。

输出：

```
{
   "http://website/post/the-christmas-is-coming": {
      "url": "http://website/post/the-christmas-is-coming",
      "type": "website",
      "title": "website",
      "image": [
         {
            "url": "http://website/ads/300x250.png"
         }
      ],
      "description": "website",
      "updated_time": "2012-12-07T12:24:14+0000",
      "id": "131852063636099"
   }
} 
```

问题出在哪里？

乐：**如何解决？**

[如何从文章中获取 Facebook 点赞、分享、评论计数](https://stackoverflow.com/questions/6137414/how-to-fetch-facebook-likes-share-comments-count-from-an-article)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-28T16:07:21.210

对于这个问题，使用这个图形调用：

```
https://graph.facebook.com/fql?q=SELECT%20url,%20normalized_url,%20share_count,%20like_count,%20comment_count,%20total_count,commentsbox_count,%20comments_fbid,%20click_count%20FROM%20link_stat%20WHERE%20url=%27http://www.google.com%27 
```

# c# - 执行以下代码时出现错误“+=”无法应用于“System.DateTime”和“System.EventHandler”类型的操作数

> ID：13763233
> 
> 赞同：-4
> 
> 时间：2012-12-07T12:36:30.117
> 
> 标签：c#, asp.net

```
case "Calendar":
    ctrl = new Calendar();
    ((Calendar)ctrl).ID = GetControlId(index, itemDetails);
    ((Calendar)ctrl).Attributes.Add("class", "chkClass" + parentIndex.ToString());

     if (itemDetails.AttachEvent == true)
     {
         ((Calendar)ctrl).SelectedDate += new EventHandler(Item_Selected);
         ((Calendar)ctrl).AutoPostBack = true;
     }
     break; 
```

此行发生错误：

```
((Calendar)ctrl).SelectedDate += new EventHandler(Item_Selected); 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:40:05.957

您不能将事件处理程序注册到属性。您可以将处理程序注册到事件；

```
((Calendar)ctrl).SelectionChanged+= new EventHandler(Item_Selected); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:39:39.490

SelectedDate 是一个属性，您不能为其分配事件处理程序，它保存日历的选定日期的值。

当您尝试处理事件时，我相信您想将处理程序添加到`SelectionChanged`

我假设它是 ASP.NET（由于 AutoPostBack 属性），这将是 WinForms 中的不同事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T12:41:51.663

[SelectedDate](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.calendar.selecteddate%28v=vs.90%29.aspx)是一个属性，它是代表所选日期的 System.DateTime。您应该使用[SelectionChanged 事件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.calendar.selectionchanged%28v=vs.90%29.aspx)

```
((Calendar)ctrl).SelectionChanged += new EventHandler(Item_Selected); 
```

# arrays - 数组在 bash 脚本中消失

> ID：13763234
> 
> 赞同：5
> 
> 时间：2012-12-07T12:36:58.317
> 
> 标签：arrays, bash

我正在编写一个脚本来收集一些各种网络统计信息。我要做的是从 netstat -i 命令生成一些增量数据。

我正在使用以下 bash 代码收集所需的数据：

```
declare -a array
n=0
netstat -i | tail -n +3 | while read LINE; do
        echo "Setting array[$n] to $LINE"
        array[$n]=$LINE
        echo "array now have ${#array[@]} entries"
        let n=$n+1
done
echo "array now have ${#array[@]} entries" 
```

该命令的输出是：

```
Setting array[0] to eth0       1500 0   4946794      0      0 0       2522971      0      0      0 BMRU
array now have 1 entries
Setting array[1] to lo        16436 0     25059      0      0 0         25059      0      0      0 LRU
array now have 2 entries
Setting array[2] to vmnet1     1500 0         6      0      0 0          1126      0      0      0 BMRU
array now have 3 entries
Setting array[3] to vmnet8     1500 0       955      0      0 0          1054      0      0      0 BMRU
array now have 4 entries
Setting array[4] to wlan0      1500 0    613879      0      0 0        351194      0      0      0 BMU
array now have 5 entries
array now have 0 entries 
```

如您所见，数组实际上在 while 循环后消失了，我不明白为什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T12:47:50.343

每当您使用管道时，您都会创建一个隐式子外壳。当该子shell 终止时，它的变量也会终止。对此的快速解决方法是不要将内容传输到`read`. 您可以使用进程替换来完成上述操作：

```
while read LINE; do
        echo "Setting array[$n] to $LINE"
        array[$n]=$LINE
        echo "array now have ${#array[@]} entries"
        let n=$n+1
done < <(netstat -i | tail -n +3) 
```

一种更符合 POSIX 的方法（阅读：更便携，更少 bashist）是让一切都发生在子 shell 中：

```
netstat -i | tail -n +3 | {
    declare -a array
    n=0
    while read LINE; do
        echo "Setting array[$n] to $LINE"
        array[$n]=$LINE
        echo "array now have ${#array[@]} entries"
        let n=$n+1
    done
    echo "array now have ${#array[@]} entries"
} 
```

[您可以在Greg Wooledge 的 wiki](http://mywiki.wooledge.org/BashFAQ/024)阅读此（以及更多）的要点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T14:33:09.023

如果您唯一的目标是将命令的输出放入数组（按行），您最好使用（遗憾的是不是很知名）`mapfile`bash 内置，它是迄今为止最有效的（并且最适合代码高尔夫，计算我与其他可能性相比有多少笔画）：

```
mapfile -t array < <(netstat -i | tail -n +3) 
```

其他答案解释了为什么您的构造不起作用（管道位于子外壳中等等）。

`help mapfile`有关该命令的所有详细信息和可能性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T13:55:06.790

好的，你准备好了吗？

有如何`netstat -i | tail -n +3`在数组的**ba​​sh**关联数组中进行转换：

```
declare -A AANET
while read -a line ;do
    declare -a AI$line
    eval "AI$line=(${line[@]})"
    AANET[$line]=AI$line
  done < <(
    netstat -i |
       tail -n +3) 
```

比现在：

```
echo ${!AANET[@]}
venet0 eth1 eth0 lo br0

echo ${AANET[eth0]}
AIeth0 
```

对于*sub-associative*，我们必须使用`eval`：

```
eval echo \${${AANET[eth0]}[@]}
eth0 1500 0 17647 0 0 0 35426 0 0 0 BMPU

eval echo \${${AANET[eth0]}[1]}
1500

eval echo \${${AANET[eth0]}[3]}
17647

eval echo \${${AANET[eth0]}[7]}
35426

eval echo \${${AANET[eth0]}[@]:3:5}
17647 0 0 0 35426 
```

用于分配临时变量：

```
eval currentBin=\${${AANET[eth0]}[3]} currentBout=\${${AANET[eth0]}[7]}
echo $currentBout 
35426
echo $currentBin 
17647 
```

甚至：

```
eval "declare -a currentVals=(\${${AANET[eth0]}[@]:3:8})"
echo ${currentVals[0]}
17647
echo ${currentVals[4]}
35426
echo ${currentVals[@]}
17647 0 0 0 35426 0 0 0 
```

**编辑**：

好的，如果**没有** `eval`!

```
for aKey in ${!AANET[@]};do
    fields=(${AANET[$aKey]}{[1],[3],[7]});
    echo $aKey ${!fields} ${!fields[1]} ${!fields[2]}
  done |
    xargs printf "%-9s %12s %12s %12s\n" IFace MTU RX TX

IFace              MTU           RX           TX
venet0            1500            0            0
eth1              1500      6400292      6942577
eth0              1500        17647        35426
lo               16436           83           83 
```

# c++ - OpenThread 和关闭多个线程句柄

> ID：13763235
> 
> 赞同：0
> 
> 时间：2012-12-07T12:37:07.397
> 
> 标签：c++, winapi, handle

我有一个线程句柄 A ，我正在使用它`OpenThread`。稍后在我的程序中，我需要`OpenThread`在同一个线程上再次使用并再次获取它的句柄，我们称之为句柄 B。
查看“监视”窗口，我可以看到 A ！= B。
当线程死亡时，我想关闭其手柄。
仅关闭句柄 A 或仅关闭句柄 B 就足够了吗？还是我需要关闭所有手柄？
我可以要求`OpenThread`给我一个我之前已经从它那里得到的句柄，还是它总是会给我新的句柄？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T12:47:33.100

您必须关闭每个句柄。无法从 OpenThread 获取现有句柄，它总是会创建一个新句柄。

但是，您的问题描述表明这里存在更深层次的体系结构问题。**你为什么**要这样做？

# r - 密度错误。默认值：x 必须是数字

> ID：13763236
> 
> 赞同：0
> 
> 时间：2012-12-07T12:37:08.170
> 
> 标签：r, error-handling

这个问题可能已经重复了。但即使经过前面的链接，我也无法解决这个问题。我有一个文件如下：

```
data <- read.table("data.txt", header=TRUE)

             Samp1           Samp2     Samp3
cg00000029  0.79015390399987 0.8301816 0.8966661
cg00000108 0.970260858767027 0.9655997 0.9699428
cg00000109 0.948456317952246 0.9209855 0.9325146
cg00000165 0.267769194351135 0.2370634 0.3867273 
```

我希望从列中创建一个密度图（比如 Samp1）。当我使用以下

```
>plot(density(na.omit(data$Samp1)), col="black") 
```

我收到以下错误：

```
Error in density.default(na.omit(data$Samp1)) : argument 'x' must be numeric 
```

谁能帮我知道如何纠正这个问题？我为类似文件创建了密度图，但没有收到此错误。它仅适用于该文件。

感谢您的帮助。提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:54:11.397

好吧，由于某种原因，您的数据是非数字的：您是否尝试过使用 as.numeric() 将其强制转换为正确的类型？

**编辑**：使用 unlist() 将其转换为列表类型似乎是答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-09T13:44:57.537

我遇到了同样的问题，我可以通过以下方式解决它：

```
a<- density(treeDF$real)
plot(a$x, a$y, col="turquoise2")
b<- density(treeDF$rpart)
lines(b$x, b$y, col="deeppink3")
c<- density(treeDF$rpart_Fourier)
lines(c$x, c$y, col="blue")
legend("topright", legend = c("real value", "rpart()", "rpart() + Fourier tem"),
    col=c("turquoise2", "deeppink3", "blue"), lty=1:1, cex=0.8, box.lty = 0) 
```

[![在此处输入图像描述](../Images/06d8d0160f14a501825fe987ad1c20c4.png)](https://i.stack.imgur.com/ARf8M.png)

# c# - 如何获取网格上某个位置的坐标？

> ID：13763239
> 
> 赞同：4
> 
> 时间：2012-12-07T12:37:21.017
> 
> 标签：c#, c#-4.0, c#-3.0, coordinates

如何以一个框的数量获得网格上某个位置的坐标？

```
 1  2  3  4  5  6  
------------------------------
1|  1  2  3  4  5  6  
2|  7  8  9 10 11 12 
3| 13 14 15 16 17 18
4| 19 20 21 22 23 24
5| 25 26 27 28 29 30
6| 31 32 33 34 35 36 
```

即：如果我有数字 15，则坐标为 x=3;y=3

我尝试开发一个功能，但它不起作用，有人有想法吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:40:18.853

**更新（公式错误）：**

```
y = (myNumber - 1) / 6 + 1;
x = (myNumber - 1) % 6 + 1; 
```

* * *

**更新（解释）：**

每行包含 6 个元素。我们将 x 除以 6 时定义为余数：

x ~ 我的号码 % 6

并添加+1，因为定义范围是[1;6]。

x ~ 我的号码 % 6 + 1

但是该行中的最后一个元素可以被 6 整除而没有余数。考虑到这一点，我们在应用模运算符之前从 myNumber 中减去 1：

**x = (myNumber - 1) % 6 + 1**

例如 myNumber = 1 => x = 1; 我的号码 = 6 => x = 6; 我的号码 = 7 => x = 1; 我的号码 = 12 => x = 6;

行数称为 y，与整数除以 6 成正比：

y ~ 我的号码 / 6

但是我们必须再次考虑，我们不是从 0 开始，而是从 1 开始：

y ~ 我的号码 / 6 + 1

再次存在“左移”，因为每行的最后一个元素可以除以 6 而没有余数。所以我们在除以之前从 myNumber 中减去 1 以反映这一点：

**y = (myNumber - 1) / 6 + 1**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T12:58:41.420

您可以使用锯齿状数组：

```
private static readonly int[][] matrix = new int[6][];

// ...

matrix[0] = new int[] { 1, 2, 3, 4, 5, 6 };
matrix[1] = new int[] { 7, 8, 9, 10, 11, 12 };
matrix[2] = new int[] { 13, 14, 15, 16, 17, 18 };
matrix[3] = new int[] { 19, 20, 21, 22, 23, 24 };
matrix[4] = new int[] { 25, 26, 27, 28, 29, 30 };
matrix[5] = new int[] { 31, 32, 33, 34, 35, 36 }; 
```

和 Linq 找到 x 和 y 值：

```
int num = 15;
var matches = matrix
    .Select((yArr, index) => new { yArr, yPos = index + 1 })
    .Where(y => y.yArr.Contains(num))
    .Select(y => new
    {
        X = (y.yArr.Select((x, i) => new { x, i })
                   .First(x => x.x == num).i) + 1,
        Y = y.yPos,
    });

if(matches.Any())
{
    var firstMatch = matches.First();
    int x = firstMatch.X;
    int y = firstMatch.Y;
} 
```

[**演示**](http://ideone.com/QIaymk)

# angularjs - 如何使用 Angular.js 为另一个域编写场景测试？

> ID：13763251
> 
> 赞同：1
> 
> 时间：2012-12-07T12:38:07.717
> 
> 标签：angularjs

我想编写一个执行远程网站的场景测试？我能怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:29:09.970

浏览器不支持跨站请求。所以没有办法做你想做的事。

您需要让它在浏览器中看起来好像本地 e2e 运行器和远程站点在同一个域上。而做到这一点的唯一方法是使用代理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T16:01:04.547

您应该能够使用`browser().navigateTo('http://whereveryouwant.com')`，然后使用任何[e2e api](http://docs.angularjs.org/guide/dev_guide.e2e-testing)方法来操作页面并进行断言。

主要的警告是 Angular 的场景运行器不支持完整页面重新加载，因此这将限制您在测试中可以执行的操作。如果您在页面上执行任何导致整个页面重新加载的操作，测试运行程序将冻结。

# sql - 删除复合 PK 并添加新索引非常慢

> ID：13763261
> 
> 赞同：1
> 
> 时间：2012-12-07T12:38:28.607
> 
> 标签：sql, sql-server-2008, composite-primary-key

我目前有一个由 3 列组成的复合 PK（集群），我们称它们为 A、B 和 C，所有这些都需要确保唯一性。由于外部因素，我需要通过删除当前 PK 并在新列上添加新索引来修改此表。

这是由标准完成的

```
ALTER TABLE Table_Name DROP CONSTRAINT PK_Name

CREATE INDEX Index_Name ON Table_Name (NewColumn) 
```

问题是该表很大（大约 7000 万行）并且对当前 PK 执行删除然后添加新索引需要一个多小时。有没有办法以更高效的方式解决这种情况？

该表只有其复合 PK，因此无需担心 NCI 或 FK 和其他依赖项。我正在使用 SQL Server 2008。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:51:01.913

一种替代方法是创建一个具有正确约束的新表。然后复制所有行。最后，您删除旧表和`sp_rename`新表。重命名速度很快，可以减少停机时间。

您可能需要考虑在复制操作期间添加的行。解决这个问题的一种方法是重命名为旧表，然后复制任何新行，然后再重命名新表。与就地更改表相比，这仍然会导致更短的停机时间。

# php - 如何在 PHP 中合并两个数组

> ID：13763267
> 
> 赞同：-2
> 
> 时间：2012-12-07T12:38:39.973
> 
> 标签：php, arrays

我有两个这样的数组：

```
array1 
  2 => string '3' (length=1)
  3 => string '1' (length=1)
  5 => string '2' (length=1)
  6 => string '3' (length=1)
  4 => string '2' (length=1) 
```

和

```
array2
  2 => string '1' (length=1)
  3 => string '1' (length=1)
  5 => string '1' (length=1)
  6 => string '2' (length=1)
  7 => string '1' (length=1) 
```

我需要将这两个组合成一个数组。如果第二个数组的键存在于第一个数组中，则将第二个数组的值与键保持一致。因此结果将是：

```
arrayResult
  2 => string '1' (length=1)
  3 => string '1' (length=1)
  5 => string '1' (length=1)
  6 => string '2' (length=1)
  7 => string '1' (length=1)
  4 => string '2' (length=1) 
```

那么如何像上面的例子一样组合这两个数组呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T12:43:00.897

输入[数组联合运算符](http://php.net/manual/en/language.operators.array.php)：

```
$arrayResult = $array2 + $array1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T12:46:14.810

考虑到 $array2 需要覆盖 $array1：

```
$array = $array2 + $array1 
```

# css - 引导轮播 Firefox 定位

> ID：13763268
> 
> 赞同：2
> 
> 时间：2012-12-07T12:38:44.447
> 
> 标签：css, firefox, twitter-bootstrap, positioning

我在我的网站上使用 Bootstrap Carousel - 一切都按预期工作 - 只有 Firefox 有问题。

.carousel-inner 仅在我设置时显示：

```
.carousel-inner{ 
    overflow:visible;
    width:auto;
} 
```

但是现在，当动画运行时，滚动条会出现在所有其他浏览器中。保持它喜欢

```
.carousel-inner{ 
    overflow:hidden;
    width:auto;
} 
```

将隐藏滚动条，但整个 div 在 FF 中以某种方式定位到右侧。

我的错误在哪里，我在哪里搞砸了，或者这是一个 FF 定位错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T12:48:51.700

Firefox中问题的原因是：

```
.carousel {
    margin: -1px 0 0 -1px;
} 
```

具体来说，负`margin-top`.

# xslt - XSLT用姓氏的第一个字母排序

> ID：13763271
> 
> 赞同：1
> 
> 时间：2012-12-07T12:39:03.270
> 
> 标签：xslt, sorting, xslt-1.0

我正在尝试修改以下 xsl，以便输出与下面显示的所需输出匹配。我正在尝试按家庭首字母的名字按字母顺序对记录进行排序。然而，目前它仅按创建者姓名首字母排序，我需要它包括编辑姓名首字母，其中记录没有创建者元素。

XML:

```
 <records>
  <record>
    <creators>
      <item>
        <name>
          <family>Smith</family>
          <given>Tim</given>
        </name>
      </item>
    </creators>
   </record>
  <record>
    <creators>
      <item>
        <name>
          <family>Lambert</family>
          <given>John</given>
        </name>
      </item>
    </creators>
    <editors>
      <item>
        <name>
          <family>testEDITOR</family>
          <given>Bob</given>
        </name>
      </item>
    </editors>
  </record>
 <record>
   <editors>
      <item>
        <name>
          <family>ZambertEDITOR</family>
          <given>Bob</given>
        </name>
      </item>
    </editors>
   </record> 
```

XSL：

```
 <xsl:key name="initial" match="record" use="substring(creators/item/name/family,1,1)"/> 

<xsl:template match="/"> 
<xsl:for-each select="//record[generate-id(.)= generate-id(key('initial', substring(creators/item/name/family,1,1))[1])]"> 
    <xsl:sort select="substring(creators/item/name/family,1,1)"/> 
    <xsl:for-each select="key('initial', substring(creators/item/name/family,1,1))"> 
                <xsl:if test="position() = 1"> 
                   <br /><h3 class="border"> 
                   <xsl:value-of select="substring(creators/item/name/family,1,1)"/> 
          </h3> 
        </xsl:if> 
        <p>
                  <xsl:value-of select="creators/item/name/family"/> 
        </p>        
        </xsl:for-each> 
    </xsl:for-each> 
</xsl:template> 
```

期望的输出：

```
L
Lambert

S
Smith

Z
ZambertEDITOR 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T03:53:51.787

**这是一个简单的分组问题**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:key name="kWith1stLetter" match="family" use="substring(.,1,1)"/>

 <xsl:template match="/*">
  <xsl:apply-templates select=
  "*/*/*/*/family
             [generate-id()
             =
              generate-id(key('kWith1stLetter',substring(.,1,1))[1])
             ]">
    <xsl:sort select="substring(.,1,1)" />
  </xsl:apply-templates>
 </xsl:template>

 <xsl:template match= "family">
    <h3 class="border">
     <xsl:value-of select="substring(.,1,1)"/>
    </h3>

    <xsl:apply-templates mode="inGroup"
          select="key('kWith1stLetter',substring(.,1,1))"/>
 </xsl:template>

 <xsl:template match="family" mode="inGroup">
  <p><xsl:value-of select="."/></p>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<records>
    <record>
        <creators>
            <item>
                <name>
                    <family>Smith</family>
                    <given>Tim</given>
                </name>
            </item>
        </creators>
    </record>
    <record>
        <creators>
            <item>
                <name>
                    <family>Lambert</family>
                    <given>John</given>
                </name>
            </item>
        </creators>
        <editors>
            <item>
                <name>
                    <family>testEDITOR</family>
                    <given>Bob</given>
                </name>
            </item>
        </editors>
    </record>
    <record>
        <editors>
            <item>
                <name>
                    <family>ZambertEDITOR</family>
                    <given>Bob</given>
                </name>
            </item>
        </editors>
    </record>
</records> 
```

**产生了想要的正确结果：**

```
<h3 class="border">L</h3>
<p>Lambert</p>
<h3 class="border">S</h3>
<p>Smith</p>
<h3 class="border">t</h3>
<p>testEDITOR</p>
<h3 class="border">Z</h3>
<p>ZambertEDITOR</p> 
```

**它被浏览器显示为：**

大号

兰伯特

小号

史密斯

吨

测试编辑器

Z

赞伯特编辑

**说明**：

正确使用**[孟池分组法](http://www.jenitennison.com/xslt/grouping/muenchian.html)**。

# ruby-on-rails - after_update 回调导致模型中永无止境的循环

> ID：13763274
> 
> 赞同：2
> 
> 时间：2012-12-07T12:39:18.867
> 
> 标签：ruby-on-rails, paperclip, crop, auto-update

在我更新控制器中用户的属性后，我的模型`cropping`方法在循环中被调用，该循环永远不会结束。

`User controller code`-

```
 def change_img  
      @user = current_user

      #this triggers the model's after_update callback
      @user.update_attributes(params[:user])  

      flash[:notice] = "Successfully updated Image."  
      render :action => 'crop'  
   end 
```

`User Model code`-

```
after_update :reprocess_avatar, :if => :cropping? 

  def cropping?  
   #this method is called infinitely why?

  !crop_x.blank? && !crop_y.blank? && !crop_w.blank? && !crop_h.blank? 

  end 
```

一旦设置了crop_x、crop_y、crop_w 和crop_h，该`cropping`方法将始终返回true，这将继续调用该`reprocess_avatar`方法。这可能是由于`reprocess_avatar`方法也在更新`avatar`用户表的属性。所以再次`after_update`触发导致循环。

有没有办法在更新后只调用一次该方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T13:45:20.057

我通过删除`after_update`模型并从控制器的函数本身进行调用来解决了这个问题。

```
 def change_img  
      @user = current_user         
      @user.update_attributes(params[:user]) 

      if(!@user.crop_x.blank? && !@user.crop_y.blank? && 
     !@user.crop_w.blank? &&  !@user.crop_h.blank?)
         @user.avatar.reprocess! 
      end

      flash[:notice] = "Successfully updated Image."  
      render :action => 'crop'  
   end 
```

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:57:29.843

如果 reprocess_avatar 正在更新某些内容，请确保您正在使用任何非回调更新方法，这样您就不会在对象中触发任何进一步的回调。例如，如果您要设置标志或更新某些 id 列或在数据库表示上设置时间戳，请使用一些直接到数据库的方法，如 #update_column 或 #touch。但是，如果没有看到您的 reprocess_avatar 方法实际上是什么，就很难给出更好的建议。

# python - python正则表达式网址

> ID：13763276
> 
> 赞同：0
> 
> 时间：2012-12-07T12:39:21.743
> 
> 标签：python, regex, python-2.7

我有一堆（如果我可以说很难看）url，我想使用 python 正则表达式来清理它们。所以，我的网址看起来像：

```
http://www.thisislink1.com/this/is/sublink1/1
http://www.thisislink2.co.uk/this/is/sublink1s/klinks
http://www.thisislinkd.co/this/is/sublink1/hotlinks/2
http://www.thisislinkf.com.uk/this/is/sublink1d/morelink
http://www.thisislink1.co.in/this/is/sublink1c/mylink
.... 
```

我想做的是清理这些网址，以便最终链接看起来像：

```
http://www.thisislink1.com
http://www.thisislink2.co.uk
http://www.thisislinkd.co
http://www.thisislinkf.de
http://www.thisislink1.us
.... 
```

我想知道如何以pythonic方式实现这一点。对不起，如果这是一个 101 问题 - 我是 pytho 正则表达式结构的新手。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T12:40:57.653

使用[urlparse.urlsplit](http://docs.python.org/2/library/urlparse.html#urlparse.urlsplit)：

```
In [3]: import urlparse    

In [8]: url = urlparse.urlsplit('http://www.thisislink1.com/this/is/sublink1/1')

In [9]: url.netloc
Out[9]: 'www.thisislink1.com' 
```

* * *

在 Python3 中它会是

```
import urllib.parse as parse
url = parse.urlsplit('http://www.thisislink1.com/this/is/sublink1/1') 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-07T12:41:47.063

为什么使用正则表达式？

```
>>> import urlparse
>>> url = 'http://www.thisislinkd.co/this/is/sublink1/hotlinks/2'
>>> urlparse.urlsplit(url)
SplitResult(scheme='http', netloc='www.thisislinkd.co', path='/this/is/sublink1/hotlinks/2', query='', fragment='') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T12:45:47.903

您应该像其他人建议的那样使用 URL 解析器，但为了完整起见，这里是一个使用正则表达式的解决方案：

```
import re

url='http://www.thisislink1.com/this/is/sublink1/1'

re.sub('(?<![/:])/.*','',url)

>>> 'http://www.thisislink1.com' 
```

解释：

匹配之后的所有内容，包括第一个不以`:`or开头的正斜杠，`/`并将其替换为 nothing `''`。

```
(?<![/:]) # Negative lookbehind for '/' or ':'
/.*       # Match a / followed by anything 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T12:45:41.700

也许使用这样的东西：

```
result = re.sub(r"(?m)(http://(www)?\..*?)/", r"\1", subject) 
```

# javascript - 在backbone.js中添加access_token

> ID：13763280
> 
> 赞同：5
> 
> 时间：2012-12-07T12:39:37.247
> 
> 标签：javascript, rest, backbone.js

在我的 REST 服务器中，它要求 access_token 出现在每个请求中。即在POSTing数据中，access_token需要和属性一起提交。

如何配置backbone.js 为每个GET、PUT、POST 和DELETE 请求添加access_token？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T13:14:12.783

好的，我想我找到了一种在 jQuery 中执行此操作的方法。

```
$.ajaxSetup (
   {
      data: { access_token: 'my_access_token' }
   }
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T12:52:34.990

Backbone 使用 jQuery/Zepto 处理 AJAX 请求，因此您可以使用这些库中提供的功能。

要将自定义标头添加到 jQuery 进行的所有 XHR 调用，您可以使用[jQuery.ajaxSend 事件](http://api.jquery.com/ajaxSend/)，该事件在每个 ajax 请求之前触发，并修改它作为参数接收的 jqXHR。

**根据 OP 的评论进行编辑：**

修改发送数据的最简单方法可能是覆盖[Backbone.sync](http://backbonejs.org/#Sync)函数。您可以包装本机实现，并在那里添加所需的属性：

```
var nativeSync = Backbone.sync;
Backbone.sync = function (method, model, options) {
  //for POST/PUT requests, add access token to the request
  if(model && (method === 'create' || method === 'update')) {

    var data = _.extend(model.toJSON(), {
      access_token: 'token'
    });

    options.data = JSON.stringify(data);
  }
  //call the native Backbone.sync implementation
  nativeSync(method, model, options);
}; 
```

# jquery - 在单击按钮 jquery 时选择下一个选项卡

> ID：13763283
> 
> 赞同：1
> 
> 时间：2012-12-07T12:39:47.530
> 
> 标签：jquery, jquery-ui, salesforce, visualforce

嗨我正在写一个visualforce页面代码是

```
<apex:page >
  <!-- Begin Default Content REMOVE THIS -->

  <head>
  <apex:includeScript value="{!URLFOR($Resource.UIJQuery1822, 'js/jquery-1.7.2.min.js')}"/>
  <apex:includeScript value="{!$Resource.JQueryMin}" />
  <apex:stylesheet value="{!URLFOR($Resource.UIJQuery1822,'css/ui-lightness/jquery-ui-1.8.22.custom.css')}" />

    <script type="text/javascript">
    $j=jQuery.noConflict();
    $j(document).ready(function() {
        $j( "#tabset" ).tabs();
        $j('#theButton').click(function() {
            var selected = $("#tabset").tabs("option", "selected");
            $("#tabset").tabs("option", "selected", selected + 1);
            // $( "#tabset" ).tabs( 'select' , 2 );
            // alert('Hello World')
        });
    });
    </script>

  <Title>Hello World</Title></head>
  <Body>
  <div id="tabset">
  <ul>
  <li><a href="#panel1">Tab One</a></li>
  <li><a href="#panel2">Tab Two</a></li>
  <li><a href="#panel3">Tab Three</a></li>
  </ul>
  <div id="panel1"> Hello World1</div>
  <div id="panel2">Hello World2
  <button type="button" id="theButton">Click Me!</button></div>
  <div id="panel3">Hello World3 </div>

  </div>
  </Body>

</apex:page> 
```

我必须完成的是，当我单击单击我时，它将激活选项卡三。当我注释掉警报（'Hello World'）时，单击功能中有两条注释行，它给了我警报，但是当我评论警报行并使用任何一个时选项它没有激活第三个选项卡。请告诉我为什么它没有激活第三个选项卡？并提供一些代码片段，使其开始正常工作！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T12:59:30.687

如果你做到了：

```
$(document).ready(function() {
    $("#tabset" ).tabs();
    $('#theButton').click(function() {
        var selected = $("#tabset").tabs("option", "selected");
        $("#tabset").tabs("option", "selected", selected + 1);
    });
}); 
```

有用

如果您遇到名称问题，您可以执行以下操作：

```
(function($) { 
    $(document).ready(function() {
    $("#tabset").tabs();
    $('#theButton').click(function() {
        $('#showem').text("howdy");

        var selected = $("#tabset").tabs("option", "selected");
        $("#tabset").tabs("option", "selected", selected + 1);
     });

});
})(jQuery); 
```

这会将 jQuery 传递到包装函数中。

要使用您的 $j 名称，请执行以下操作：

```
(function($j) { 
    $j(document).ready(function() {
    $j("#tabset").tabs();
    $j('#theButton').click(function() {
        $j('#showem').text("howdy");

        var selected = $j("#tabset").tabs("option", "selected");
        $j("#tabset").tabs("option", "selected", selected + 1);
     });

  });
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T13:08:19.487

**第一个变化：** $j = jQuery.noConflict(); **到：** jQuery.noConflict();

从现在开始，您将使用**jQuery**而不是**$**所以调用函数使用：`jQuery('').hide();`

调用 noConflit 并继续使用 $ 是没有意义的。

# cakephp - CakePHP 可包含的行为未触发

> ID：13763286
> 
> 赞同：0
> 
> 时间：2012-12-07T12:39:57.653
> 
> 标签：cakephp, cakephp-2.0, containable

第一次使用 Cake 及其可包含的行为，但它没有按预期工作......或者根本没有。

我正在尝试获取产品的配件列表。产品型号 HABTM 产品（别名“ProductRelation”）。连接表是 products_products，它有两个产品 ID - product_id 和 related_id。与此相反，我想为给定的 product_id 提取附件列表（从 related_id 列驱动的产品）

在我的产品模型中，我添加了 $actsAs = array('Containable');

在我的控制器中，即使没有条件，使用食谱中的参考对可包含的快速测试也根本无法包含产品。

```
debug($this->Product->find('all', array('contain' => 'ProductRelation'))); 
```

..返回数据库中每个产品的数组，以及所有相关模型 - 图像、内容选项卡、评级、评论、定价等我没有尝试对此应用任何“条件”，因为所写的调用应该将数据限制为根据食谱，产品及其 ProductRelation 数据...

有小费吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T14:30:52.703

It seems like you have recursive on. Try using the following:

```
debug($this->Product->find('all', array(
    'contain' => 'ProductRelation',
    'recursive' => -1
))); 
```

If that works for you, you should start adding `containable` to the `AppModel` class and setting the `recursive` property to `-1`. This will ensure you only ever get the results you request.

**NB**: Cake does not `join` for HABTM, so you can not use `ProductRelation` in any conditions.

# c# - 这段代码使用数组与使用通用列表的代码等效是什么？

> ID：13763287
> 
> 赞同：0
> 
> 时间：2012-12-07T12:40:01.473
> 
> 标签：c#, arrays, list, multidimensional-array

我在翻译这段代码时遇到问题： `float [,] varname;`

对某物使用`List<>`

基本上我想要一种使用这种设置创建二维通用列表的方法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T12:41:15.573

你必须写：

```
List<List<float>> list; 
```

请注意，在这种情况下，每个外部列表都可以有不同大小的内部列表，与数组不同。内部列表也可以是`null`.

用于初始化用途：

```
List<List<float>> f = new List<List<float>>();
f.Add(new List<float>());
//add other lists 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:42:04.727

我不知道 2D 列表实现，但您可以使用“锯齿状”列表（即列表列表）实现一些类似的行为：

```
List<List<float>> varname; 
```

但是它带来了一些问题，例如`varname[n]`可能为空，或者某些数组`varname[n][m]`可能`m`超出范围等。您必须编写一些更复杂的访问器来处理这些状态。甚至初始化也有点复杂。

如果使用数组没有概念上的问题，我会坚持使用数组。

# symfony - Symfony2 中用户友好的时区名称

> ID：13763294
> 
> 赞同：0
> 
> 时间：2012-12-07T12:40:25.797
> 
> 标签：symfony, timezone, datetimeoffset

当 Symfony2 呈现“timezone”类型的表单输入时，它使用来自时区数据库的名称（例如“America/Los Angeles”）作为选项值和显示。

有没有办法为每个区域显示一个更用户友好的名称（对于不知道他们所在的 Olson/IANA 时区的用户），例如 UTC 偏移量和该时区的主要城市列表？

# apache-flex - 如何在 SQLITE Flex AIR 应用程序中将日期保存为 DD/MM/YYYY 格式

> ID：13763295
> 
> 赞同：1
> 
> 时间：2012-12-07T12:40:31.533
> 
> 标签：apache-flex, air

我正在使用 SQLITE 数据库做一个 flex Adob​​e AIR 应用程序，因为我想将日期保存为以下格式 DD/MM/YYYY，但在我的 SQLITE TABLE 中，我给出的数据类型是 DATE，所以它保存为 **Sun Dec 2 00 :00:00 GMT+0530 2012**以这种格式。

为什么我要以特定格式保存。我有两个日期字段开始日期和结束日期。一旦我选择结束日期日期字段，我必须自动计算它们之间的天数。关于 DD/MM/YYYY 格式的任何想法并计算日期之间的日期。

这是我的代码：

```
 [Bindable] private var date1:Date;

        [Bindable] private var date2:Date;

        [Bindable] private var Totaldays:String; 
```

受保护的函数 modEndDate_creationCompleteHandler(event:FlexEvent):void

```
 {   

            formatter.formatString= "DD-MM-YYYY";

            date1=formatter.format(newStartdate.selectedDate);

            date2=formatter.format(newEndDate.selectedDate);

            **Totaldays=Math.floor(Math.abs(date1 - date2)/ (24 * 60 * 60 * 1000))**

        } 
```

错误是：

此行有多个标记：

-1067：将 Date 类型的值隐式强制转换为不相关的 Number 类型。

-1067：将 Number 类型的值隐式强制转换为不相关的 String 类型。

寻求帮助。在此先感谢

问候，

文卡特桑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:01:21.447

以兼容的格式保存。根据需要在 GUI 中格式化日期。看这里计算天数：[ActionScript 3.0 + 计算两个日期之间的时间跨度？](https://stackoverflow.com/questions/169201/actionscript-3-0-calculate-timespan-between-two-dates)

# facebook - fql 不工作

> ID：13763298
> 
> 赞同：0
> 
> 时间：2012-12-07T12:40:40.463
> 
> 标签：facebook, facebook-fql

我使用 fql 来获取我的朋友信息

```
SELECT uid,name,first_name,middle_name,last_name,pic_square,hometown_location,current_location,profile_url,email,website FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) 
```

它只返回朋友的名字。谁信任我的应用程序，那里的位置也即将到来，但是当我将此 fql 放在 facebook 上的[Graph API Explorer](https://developers.facebook.com/tools/explorer/?fql=SELECT%20uid,name,first_name,middle_name,last_name,pic_square,hometown_location,current_location,profile_url,email,website%20FROM%20user%20WHERE%20uid%20IN%20%28SELECT%20uid2%20FROM%20friend%20WHERE%20uid1%20=%20me%28%29%29) 上时，它会返回每个人的位置。那么我怎样才能得到每个人的位置呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T05:34:56.437

很难理解您的问题，尽管您的应用似乎没有所有必需的用户权限。Graph API 资源管理器或开发人员页面是确定您需要哪些资源的绝佳资源。

家乡位置、当前位置、电子邮件和网站不是“基本”数据。

# gnuplot - 在 gnuplot 中，如何将来自两个不同文件的数据绘制到一个图中？

> ID：13763302
> 
> 赞同：1
> 
> 时间：2012-12-07T12:40:57.653
> 
> 标签：gnuplot

我有两个不同的文件要在 gnuplot 中绘制。他们使用 a) 不同的分隔符 b) x 轴上的不同时间

因此，为了让他们每个人分别绘图，我需要通过

```
set datafile separator
set timefmt 
```

我想在一个图表中强加/叠加两个数据，使它们与时间对齐

我怎么能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T17:09:02.383

可以通过使用*using 修饰符*后的*格式*为每个文件指定不同的分隔符来解决不同分隔符的问题，例如：

 *```
plot 'file1.dat' u 1:2 '%lf,%lf' 
```

绘制带有逗号分隔符的两列文件。有关更多详细信息，请参阅帮助\使用。

我不是时间格式专家，所以我不知道如何处理时间戳格式问题。但也许你可以使用一些功能，比如`strftime()`. 我从未尝试过，但在我看来它可以满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T14:00:42.813

`set datafile separator`你是对的，你需要通过`set timefmt`每个文件一次。你可以这样做：

```
set terminal <whatever>
set output <whatever.wht>

set xdata time             # tell gnuplot to parse x data as time
set format x '%F'          # time format to display on plot x axis

set datafile separator ' ' # separator 1
set timefmt '%F'           # time format 1
plot 'file1'

set datafile separator ',' # separator 2
set timefmt '%s'           # time format 2
replot 'file2' 
```

该`replot`命令本身会重新绘制上一行，如果您指定要绘制的另一行将像我在这里所做的那样位于第一行之上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T03:57:07.460

在我看来，您有两个选择。首先是选择一种数据文件格式并将两个数据文件都转换为该格式，可能使用`awk`：

```
plot '<awk "-f;" "{print $1,$2}" data1' using 1:2 w lines,\
     'data2' using 1:2 w lines 
```

*注意，您的 awk 命令几乎肯定会有所不同，这只是说明如何`awk`在内联管道中使用。

您的第二个选项是使用`multiplot`显式轴对齐：

```
set multiplot
set xdata time
set datafile sep ';' #separator for first file
set timefmt "..."  #time format for first file
set lmargin at screen 0.9
set rmargin at screen 0.1
set tmargin at screen 0.9
set bmargin at screen 0.1
unset key
plot 'data1' u 1:2 w lines ls 1 nontitle
set key #The second plot command needs to add both "titles" to the legend/key.
set datafile sep ',' #separator for second file
set timefmt "..." #time format for second file
unset border
unset xtics
unset ytics
#unset other stuff that you set to prevent it from being plotted twice.
plot NaN w lines ls 1 title "title-for-plot-1", \
    'data1' u 1:2 w lines ls 2 title "title-for-plot-2" 
```

`NaN`仅当您想让事物在图例中正确显示时，才需要使用情节技巧。如果您不使用图例，则不必担心。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-10T03:17:23.593

这对我有用：

```
reset 
set term pngcairo
set output 'wall.png'
set xlabel "Length (meter)"
set ylabel "error (meter)"
set style line 1 lt 1 linecolor rgb "yellow" lw 10 pt 1
set style line 2 lt 1 linecolor rgb "green" lw 10 pt 1
set style line 3 lt 1 linecolor rgb "blue" lw 10 pt 1
set datafile separator ","
set key
set auto x
set xtics 1, 2, 9
set yrange [2:7]
set grid

set label "(Disabled)" at -.8, 1.8
plot  "file1.csv" using 1:2 ls 1 title "one" with lines ,\
  "file2.csv" using 1:2 ls 2 title "two" with lines ,\
  "file3.csv" using 1:2 ls 3 title "three" with lines
set output 
```*

# java - 在 Java 中访问需要密码的网页？

> ID：13763303
> 
> 赞同：0
> 
> 时间：2012-12-07T12:41:05.423
> 
> 标签：java, login, web

所以我想出了如何在java中访问一个不安全的网页。但是，我不知道如何访问一个需要您在登录页面上登录才能查看的网页。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:46:57.640

您的问题似乎与此类似，它指出您不仅需要在 HTTP 请求中发送凭据（作为 post 或 get 参数），而且您可能需要考虑处理 cookie。

[如何从 Java 的 https 网页登录和下载文件？](https://stackoverflow.com/questions/421251/how-do-i-login-and-download-a-file-from-a-https-web-page-from-java)

# typo3 - 使用锚链接构建菜单作为第二级菜单

> ID：13763304
> 
> 赞同：1
> 
> 时间：2012-12-07T12:41:06.517
> 
> 标签：typo3, typoscript

我正在制作一个菜单，将第一级显示为普通链接。第二级菜单应从内容元素构建为锚菜单。受[这篇文章的](http://www.typo3.net/forum/beitraege/menues/100408/)启发，我构建了以下 ts：

```
lib.footerMenu = HMENU
lib.footerMenu {
1 = TMENU
1 {
    wrap = <ul class="nav">|</ul>
    noBlur = 1

    NO = 1
    NO {
        wrapItemAndSub = <li class="first">|</li> |*| <li>|</li> |*| <li class="last">|</li>
        ATagParams = class="first" |*| |*| class="last"
        after.cObject = CONTENT
        after.cObject {
            table = tt_content
            select {
                pidInList = this
                orderBy = sorting
                where = colPos=1
                languageField = sys_language_uid
            }
            wrap = <ul>|</ul>
            renderObj = TEXT
            renderObj {
                field = header   
                dataWrap = <li><a href="#c{field:uid}">|</a></li>
            }
        }
     }
  }
} 
```

产生类似的东西（“Arnold ipsum。”和“你到底是谁。”作为主页的 CE）：

```
<ul class="nav">
    <li class="first"><a href="/" class="first">Homepage</a>
        <ul>
            <li><a href="#c1">Arnold ipsum.</a></li>
            <li><a href="#c11">Who the hell are you.</a></li>
        </ul>
    </li>
    <li><a href="team/">Team</a>
        <ul>
            <li><a href="#c1">Arnold ipsum.</a></li>
            <li><a href="#c11">Who the hell are you.</a></li>
        </ul>
    </li>
    ...
</ul> 
```

现在的问题是，*this* (pidInList = this) 总是保存实际的页面 id，因此实际页面的锚菜单被附加到所有主菜单项。

如何在每个主菜单下方显示正确的锚菜单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T13:00:32.107

```
lib.footerMenu = HMENU
lib.footerMenu {
  1 = TMENU
  1 {
    wrap = <ul class="nav">|</ul>
    noBlur = 1

    NO = 1
    NO {
      wrapItemAndSub = <li class="first">|</li> |*| <li>|</li> |*| <li class="last">|</li>
      ATagParams = class="first" |*| |*| class="last"
      after.cObject = CONTENT
      after.cObject {
        table = tt_content
        select {
          pidInList.stdWrap.cObject = CASE
          pidInList.stdWrap.cObject {
            key.field = doktype

            default = TEXT
            default.field = uid

            4 = TEXT
            4.field = shortcut
          }
          orderBy = sorting
          where = colPos=1
          languageField = sys_language_uid
          selectFields = uid,pid,header
        }
        wrap = <ul>|</ul>
        renderObj = TEXT
        renderObj {
          field = header
          typolink {
            parameter.field = pid
            section.field = uid
          }
          wrap = <li>|</li>
        }
      }
    }
  }
} 
```

不过，它可能不适用于旧的 TYPO3 安装，因为如果我没记错的话，`pidInList`以前没有`stdWrap`. 它应该适用于 TYPO3 4.5+。

# android - 我如何从广播接收器调用 IntentService？

> ID：13763305
> 
> 赞同：4
> 
> 时间：2012-12-07T12:41:08.077
> 
> 标签：android, broadcastreceiver, intentservice

我为下载数据创建了一个意图服务，我想重复广播接收和警报管理器。我如何调用我的意图服务？我尝试了这个但没有工作....

```
public class MyBroadcastReceiver extends BroadcastReceiver {

    @Override

      public void onReceive(Context context, Intent intent) {

          Toast.makeText(context, "Don't panik but your time is up!!!!.",
            Toast.LENGTH_LONG).show();
        // Vibrate the mobile phone
        Vibrator vibrator = (Vibrator)   
context.getSystemService(Context.VIBRATOR_SERVICE);
        vibrator.vibrate(500);

        intent.setData(Uri.parse("http://www.mysite.net/LEDstate.txt"));
        intent.putExtra("urlpath", "http://www.mysite.net/LEDstate.txt");
        //startService(intent);

        context.startService(new Intent(context, DownloadService.class));

        } 
```

公共类 AlarmActivity 扩展 Activity {

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

public void startAlert(View view) {

    EditText text = (EditText) findViewById(R.id.time);

    int i = Integer.parseInt(text.getText().toString());

    Intent intent = new Intent(this, MyBroadcastReceiver.class);

    PendingIntent pendingIntent = PendingIntent.getBroadcast(this.getApplicationContext(), 234324243, intent, 0);

    AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);

    //alarmManager.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis()
       // + (i * 1000),pendingIntent);

    alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis()
                 ,(i*1000),pendingIntent);

   // alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calendar
    //      .getTimeInMillis(), intervals, pendingIntent);

    Toast.makeText(this, "Alarm set in " + i + " seconds",
        Toast.LENGTH_LONG).show();
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T12:44:37.040

尝试这个：

```
Intent newIntent = new Intent(context, DownloadService.class)
newIntent.setData(Uri.parse("http://www.mysite.net/LEDstate.txt"));
newIntent.putExtra("urlpath", "http://www.mysite.net/LEDstate.txt");

context.startService(newIntent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:49:19.830

在您的代码中，您没有将数据传递给您的`Service`. 您正在向对象添加数据和附加功能`Intent`，将不同的`Intent`对象传递给`startService()`方法。使用@Zzokk 在另一篇文章中建议的解决方案，它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T12:50:57.507

当您的广播被接收时，您的广播活动将被调用。

那时您可以根据需要调用任何活动。

见下面的代码：

```
 @Override
    public void onReceive(Context context, Intent intent) {

        AM_EM_APRIL_2012 = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
                Intent in1 = new Intent(context, AlarmReceiverNotificationForEveryMonth.class);
                in1.putExtra("MyMessage","PAYE payment and employer monthly schedule for March");
                PI_EM_APRIL_2012 = PendingIntent.getBroadcast(context, 1, in1, PendingIntent.FLAG_UPDATE_CURRENT);
                AM_EM_APRIL_2012.set(AlarmManager.RTC_WAKEUP, calendar_PAYE_20_APRIL_2012.getTimeInMillis(),PI_EM_APRIL_2012);
            } 
```

在上面的代码中，AlarmReceiverNotificationForEveryMonth.class 是被调用的活动，如果你想在消息被广播时调用活动，这是你必须做的。那时您可以根据需要启动相应的服务。

希望你明白我的意思。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-03T05:25:28.770

您没有在函数中调用`startAlert`方法。`onCreate`

# c# - 关闭事件处理程序 C#

> ID：13763309
> 
> 赞同：0
> 
> 时间：2012-12-07T12:41:18.123
> 
> 标签：c#, forms, formclosing

我有两个表格，表格 2 继承自表格 1。

我需要做的是，当我关闭表格 1 和表格 2 时，会出现另一个询问用户是否确定退出的表格。然后，如果用户单击“是”，当且仅当用户关闭的表单是表单 2 而不是表单 1 时，会出现另一个询问用户是否要保存游戏的表单，因为对于表单 1，不需要保存。

这就是我设法做到的：

// 这些是 Form 1 的关闭和关闭事件处理程序：

```
private void GameForm_FormClosing(object sender, FormClosingEventArgs e)
{
    e.Cancel = true;
    SureClose sc = new SureClose();
    sc.StartPosition = FormStartPosition.CenterScreen;
    sc.Show();
}

private void GameForm_FormClosed(object sender, FormClosedEventArgs e)
{
    MainMenu menu = new MainMenu();
    menu.Show();
} 
```

然后在 Sure Close: // 请注意 Tournament 是 Form 2 继承自 GameForm (Form 1)

```
 private void yesButton_Click(object sender, EventArgs e)
 {
        this.Hide();

        if (GameForm.ActiveForm is Tournament)
        {
            SaveGame sg = new SaveGame();
            sg.StartPosition = FormStartPosition.CenterScreen;
            sg.Show();
        } 
        else 
        {
            GameForm.ActiveForm.Close();
        }
    }

    private void noButton_Click(object sender, EventArgs e)
    {
        this.Hide();
    } 
```

// 这是保存游戏表单：

```
 private void saveButton_Click(object sender, EventArgs e)
 {
     // Still to do saving!
 }

 private void dontSaveButton_Click(object sender, EventArgs e)
 {
     this.Hide();
     GameForm.ActiveForm.Close();
 } 
```

问题是当在 SureClose Form 中的 yesButton 事件处理程序中我有 GameForm.ActiveForm.Close() 时，这将返回到 GameForm Closing 事件处理程序，因此 SureClose 对话框再次出现。

我试过这样做： if (e.CloseReason() == CloseReason.UserClosing) 但显然它也不起作用，因为关闭的原因永远是用户：/

我该如何解决这个问题？非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T12:55:53.093

表格1：

```
private void GameForm_FormClosing(object sender, FormClosingEventArgs e)
{
    if(SureClose())
    {
        SaveChanges();
    }
    else
    {
        e.Cancel = true; 
    }
}

private bool SureClose()
{
    using(SureClose sc = new SureClose())
    {
        sc.StartPosition = FormStartPosition.CenterScreen;
        DialogResult result = sc.ShowDialog();
        if(result == DialogResult.OK)
        {
            return true;
        }
        else
        {
            return false;
        }
    }
}

protected virtual void SaveChanges()
{
} 
```

表格2：

```
protected override void SaveChanges()
{
    using(SaveGame sg = new SaveGame())
    {
        sg.StartPosition = FormStartPosition.CenterScreen;
        DialogResult result = sg.ShowDialog();
        if(result == DialogResult.OK)
        {
            //saving code here
        }
    }
} 
```

SureClose 表格和 SaveGame 表格：

```
private void yesButton_Click(object sender, EventArgs e)
{
    this.DialogResult = DialogResult.OK;
}

private void noButton_Click(object sender, EventArgs e)
{
    this.DialogResult = DialogResult.Cancel;
} 
```

# java - Java多线程在一个领域工作

> ID：13763313
> 
> 赞同：0
> 
> 时间：2012-12-07T12:41:43.233
> 
> 标签：java, multithreading

嗨，我有以下代码：

```
public Item get(int id)
{
    Item i = null;
    for(Worker w : workers)
    {
        w.get(id, i); // Several threads start reading that item from data sources
    }
    while(i == null) // Loop until item is found
    {
        // this.pause(); there should be a pause but it's not a thread, so I can't do it.
    }
    return i;
} 
```

我认为应该有更好的方法，没有那个空循环。

涉及暂停获取功能并仅在其中一名工人通知时恢复的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:51:00.050

您可以在此处使用[BlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html)。您创建一个队列实例。并将其传递给所有工人。当工作人员找到项目时 - 将其添加到队列中。你只需等到队列不为空：

```
public Item get(int id) {
    BlockingQueue<Item> queue = new ArrayBlockingQueue<Item>(1);
    for(Worker w : workers) {
        w.get(id, queue); // Several threads start reading that item from data sources
    }
    return queue.take();
} 
```

在工作人员中使用`queue.offer(foundItem);`，以便他们仅在队列为空时添加项目。

# php - 用于文本转换的简单网页

> ID：13763316
> 
> 赞同：0
> 
> 时间：2012-12-07T12:41:52.393
> 
> 标签：php, javascript, html

我刚刚开始使用 javascript 和 php 进行网络编程。我正在尝试构建一个网页，该网页将接受粘贴在页面上半部分的表单中的文本，并在按下按钮时显示处理后的文本（可以是任何类型的文本处理，比如说从文本中删除所有出现的字母 m ）。我能引导我到网上的一个链接，以了解在这样的网页中需要什么样的编码？

在尝试这个页面之前应该了解什么样的 php/javascript 基础知识？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:07:45.183

你可以像这样使用javascript

HTML 代码

```
<input type="text" id="name" />
<input type="buttom" onclick="do_process();" value="Process" /> 
```

JavaScript 代码

```
<script type="text/javascript">
    function do_process() {
       var data = document.getElementById("name").value;
       var processed_data = here put processing function whatever you want;
       document.getElementById("name").value = processed_data;
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:50:44.993

您可以使用 jQuery（[请参见此处](http://jsfiddle.net/wdh8z/)）。[在此处](http://api.jquery.com/)阅读有关 jQuery 的所有信息

HTML

```
<input type='textarea'>
<hr />
<div id="transfer">Click for copy</div>
<hr />
<div id="thecopy"></div> 
```

JavaScript

```
$('#transfer').click(function(){
    $('#thecopy').text($('input').val());
});​ 
```

# lotus-domino - 功能未实现

> ID：13763317
> 
> 赞同：1
> 
> 时间：2012-12-07T12:41:52.573
> 
> 标签：lotus-domino, lotus

我尝试使用以下 url 使用用户名和密码对服务器进行身份验证，服务器控制台中提示错误。

```
http://servername/names.nsf?login&Username=Shibu%20Mathew&Password=welcome2lotus 
```

HTTP Web 服务器：函数未实现异常

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:57:56.317

您可能会收到此错误，因为服务器已设置为使用基本身份验证（而不是基于会话的身份验证）。

尝试`http://<username>:<password>@servername/`改用。

在此处查看更多信息：[http ://www-01.ibm.com/support/docview.wss?uid=swg21176893](http://www-01.ibm.com/support/docview.wss?uid=swg21176893)

# php - 在这种情况下我可以使用 IN 子句吗？

> ID：13763322
> 
> 赞同：1
> 
> 时间：2012-12-07T12:42:06.287
> 
> 标签：php, mysql, mysqli

我要建立一个网站，我想在其中制作我拥有的所有 DVD。此外，我想将电影分类。我得到了这些表。

**类别：** id - 标题

**电影：** id - category_ref - 等等......

想象一下，我创建了几个类别：（动作 - ID：1，喜剧 - ID：2）

当我在管理面板中创建电影时，我将有机会通过复选框选择更多类别。例如，我可以为蜘蛛侠选择动作和喜剧。

移动的行将如下所示：

ID：1 - category_ref：1/2（<- 意思是动作/喜剧）

所以，在首页上——我希望蜘蛛侠同时出现在动作和喜剧下。

我想，我可以使用 IN 来获取正确类别下的电影，但它不能按预期工作：

```
"SELECT id, movie_title FROM film WHERE $catID IN((REPLACE(category_ref, '/', ','))" 
```

这个问题可能看起来很复杂，但事实并非如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T12:46:44.073

如果要为电影添加多个类别，则需要第三个表来存储它。

```
Categories: id, title
movies: id, title
movie_categories: movieID, categoryID 
```

那么你可以有

```
//categories
1 Action
2 Comedy

//Movies
1 Spiderman

//movie_categories
1 1   //connection between movieID 1 and categoryID 1 (spiderman & action)
1 2   //connection between movieID 1 and categoryID 2 (spiderman & comedy) 
```

然后你可以搜索

```
SELECT id, title FROM movies WHERE ID IN(SELECT movieID FROM movie_categories WHERE categoryID=$catID) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T12:53:11.633

在这种情况下，您应该使用[FIND_IN_SET](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)函数：

```
WHERE FIND_IN_SET($catID,(REPLACE(category_ref, '/', ','))>0 
```

**但是，如果您还没有以这种方式设计表格，请使用第二个表格来存储`movie-category`关系（请参阅@Hugo_Delsing 答案）。**

# sql - 使用 Intersect 从两个表中获取记录

> ID：13763323
> 
> 赞同：1
> 
> 时间：2012-12-07T12:42:09.233
> 
> 标签：sql, intersect

我想从特定部分和其他搜索条件中获取学生列表。我正在这样做：-

```
declare @sectionId int, @name varchar
select @sectionId=23
select @name='a'

select UserId, FirstName from StudentMaster
Where FirstName Like @name and UserId IN
(
  select UserId from StudentMaster
  Intersect
  select StudentId from StudentInSections where SectionId=@sectionId
) 
```

但它没有给出正确的答案。如果我只写 Userid 条件，它可以正常工作，但我必须得到包含整个搜索条件的列表。有人帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:57:37.287

问题是 LIKE 操作数。If `@name`is`'a'`这只会返回名字是`'a'`or的学生`'A'`。如果您希望学生姓名以“a”开头，则必须添加通配符“%”

```
FirstName LIKE 'a%' 
```

（某些 SQL 方言如 MS Access 使用通配符“*”而不是“%”。）

注意区分大小写/不区分大小写的搜索。根据 SQL 方言和用于列的排序规则，搜索是否区分大小写。如果您不想进行区分大小写的搜索（即您想查找姓名以“a”或“A”开头的学生），您可以这样做：

```
UPPER(FirstName) LIKE 'A%' 
```

或者在 SQL-Server 上

```
FirstName COLLATE UTF8_GENERAL_CI LIKE '%a' 
```

其中 CI 表示不区分大小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:48:26.950

```
select sm.UserId, sm.FirstName from StudentMaster sm
    inner join StudentInSections ss on ss.StudentId = sm.UserId
Where sm.FirstName Like @name
    and ss.SectionId = @sectionId 
```

像这样的东西应该工作。您只需要学习如何使用内部连接。

# ios - 如何从 LE 蓝牙芯片获取 UUID？

> ID：13763324
> 
> 赞同：1
> 
> 时间：2012-12-07T12:42:15.240
> 
> 标签：ios, bluetooth

我有一个芯片，在 LE 蓝牙上工作并传输它的 UUID。我需要从 IOS 应用程序中发现它并获取它的 UUID。我知道如何在两个 IOS 设备之间建立连接，但不知道如何与另一个芯片建立连接。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:34:29.243

您应该查看 Apple 的[CoreBluetooth 温度示例](http://developer.apple.com/library/ios/#samplecode/TemperatureSensor/Introduction/Intro.html)。

首先，您将使用 CBCentralManager 查找具有您正在寻找的 UUID 的可用蓝牙外设。这是一个漫长的过程，需要委托，我不能轻易地给你代码片段来做到这一点。它看起来像这样。

```
.h file will have these. Remember to add the CoreBluetooth Framework.
#import <CoreBluetooth/CoreBluetooth.h>
CBCentralManager * manager;
CBPeripheral * connected_peripheral; 
```

（相应地更改您的 UUID）：

```
NSArray * services=[NSArray arrayWithObjects:
                    [CBUUID UUIDWithString:@"0bd51666-e7cb-469b-8e4d-2742f1ba77cc"],
                    nil
                    ];
[manager scanForPeripheralsWithServices:services options: [NSDictionary dictionaryWithObject:[NSNumber numberWithBool:YES] forKey:CBCentralManagerScanOptionAllowDuplicatesKey]];
[manager connectPeripheral:peripheral options:nil]; 
```

从那里你知道你有正确的外围设备，但你仍然需要选择它并阻止 CBManager 继续扫描新设备。

```
- (void)centralManager:(CBCentralManager *)central didConnectPeripheral:(CBPeripheral *)peripheral
{
    [manager stopScan];

    NSArray *keys = [NSArray arrayWithObjects:
                 [CBUUID UUIDWithString:@"0bd51666-e7cb-469b-8e4d-2742f1ba77cc"],
                 nil];
    NSArray *objects = [NSArray arrayWithObjects:
                    @"My UUID to find",
                    nil];

    serviceNames = [NSDictionary dictionaryWithObjects:objects forKeys:keys];

    [connected_peripheral setDelegate:self];
    [connected_peripheral discoverServices:[serviceNames allKeys]];

} 
```

既然您已经告诉外围设备宣传它所拥有的服务，那么您将拥有一个用于解析这些服务的委托。

```
- (void)peripheral:(CBPeripheral *)peripheral didDiscoverServices:(NSError *)error
{
    CBService *bluetoothService;
    for (bluetoothService in connected_peripheral.services) {
        if([bluetoothService.UUID isEqual:[CBUUID UUIDWithString:@"0bd51666-e7cb-469b-8e4d-2742f1ba77cc"]])
        {
            NSLog(@"This is my bluetooth Service to Connect to");
        }
} 
```

我希望这个过程更容易解​​释。解决这个问题的最好方法是下载 Apple 的温度示例并在你的 iPhone 或 iPad 上运行它（它在模拟器中不起作用）。即使您可能没有广播温度，它也会找到您的蓝牙 LE 设备并解析它正在广播的服务。在该项目的 LeDiscovery.m 文件中放置断点应该会显示从 iOS 应用程序发现蓝牙 LE 芯片所需的步骤。

希望这可以帮助！

# unit-testing - 有没有办法在无头浏览器中为 WebGL webapp 运行单元测试

> ID：13763325
> 
> 赞同：13
> 
> 时间：2012-12-07T12:42:16.207
> 
> 标签：unit-testing, jenkins, webgl, phantomjs, glge

有没有办法在无头浏览器中为 WebGL (GLGE) webapp 运行单元测试？

我想在詹金斯服务器上运行测试，所以测试必须在无头（phantom.js）浏览器上运行。

有人已经试过了吗？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T16:06:22.800

截至 2020 年，使用[puppeteer](https://pptr.dev/)可能是使用支持 WebGL 的无头浏览器的最简单方法。

您也可以直接[在无头模式下使用 Chromium](https://chromium.googlesource.com/chromium/src/+/lkgr/headless/README.md)

# .net - xmlns 命名空间弹性

> ID：13763333
> 
> 赞同：1
> 
> 时间：2012-12-07T12:43:14.143
> 
> 标签：.net, xml, xml-namespaces, xmlserializer, xml-deserialization

我从服务器接收数据作为 utf-8 编码的 xml 消息，看起来像

```
<?xml version="1.0" encoding="utf-8"?>
<Data namespace="http://example.com/data">
...
</Data> 
```

该示例值得注意的是，“命名空间”限定符实际上应该是指定默认 xml 命名空间的“xmlns”限定符。序列化/反序列化的代码是（自动）从模式定义文件生成的，xsd 以及随附的文档都几乎证实这是一个错误。

但是，这也意味着 Data 对象现在位于全局/空命名空间 (xmlns="") 中，并且自动生成的代码失败，并出现 XmlSerialzier 在反序列化过程中抛出的典型`"There is an error in XML document ..."`异常`"<Data xmlns=''> was not expected."`类型，人们在反序列化的命名空间中看到这种异常属性/代码和xml文件不匹配。

虽然修改自动生成的代码并将`Namespace`定义“修复”为例如是相当容易的

```
[System.SerializableAttribute()]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true, Namespace="")]
[System.Xml.Serialization.XmlRootAttribute(Namespace="", IsNullable=false)]
public partial class Data { 
```

我真正希望的是**命名空间的弹性**——也就是说，如果在未来某个时间问题由为我提供数据的人解决，我不希望被迫再次调整`Namespace`代码中的定义（任何 xmlns 更改将打破上述异常的反序列化代码）。

也就是说，我想要能够同时处理上述错误 xml 以及例如的代码

```
<?xml version="1.0" encoding="utf-8"?>
<Data xmlns="http://example.com/data">
...
</Data> 
```

甚至（例如，如果他们决定“向后兼容”）

```
<?xml version="1.0" encoding="utf-8"?>
<Data xmlns="http://example.com/data" namespace="http://example.com/data">
...
</Data> 
```

我有什么选择？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-06-23T11:40:55.553

你得到了一个很大的“XML”。您可以在反序列化之前使用 XML 转换来纠正它。

# c++ - 理解一个简单的 C++ 类结构

> ID：13763337
> 
> 赞同：1
> 
> 时间：2012-12-07T12:43:25.230
> 
> 标签：c++, class, object, inheritance, throw

我试图理解一些 C++ 代码，发现我的 C++ 有点生疏。除其他外，代码具有以下类结构（`CLASS1`为`CLASS3`简洁起见未显示）：

```
class CLASS4
  :public CLASS3
  ,public CLASS2{
  public:
    CLASS4(double VARA, double VARB, char VARC, int VARD, double VARE, std::vector<double> VARF, std::string VARG = "")
    throw(Error);
    CLASS4(const CLASS4&);
    ~CLASS4();

    double METHOD1();

  protected:
    void METHOD2();
};

CLASS4::CLASS4(double VARA, double VARB, char VARC, int VARD, double VARE, vector<double> VARF, string VARG) throw(Error)
  :CLASS1(VARC, VARD, VARE, VARF, VARG)
  ,CLASS2(VARB)
  ,CLASS3(VARA, VARC, VARD, VARE, VARF, VARG){}

CLASS4::CLASS4(const CLASS4& VARH)
  :CLASS1(VARH), CLASS2(VARH), CLASS3(VARH){}

CLASS4::~CLASS4(){} 
```

我理解对象的概念和继承的概念。我看到`CLASS4`. 我不明白的是继承中的类列表`:public CLASS3, public CLASS2`。它的目的是什么？此外，我想知道`throw(Error)`应该做什么。另外我想知道第二个构造函数的目的是什么`CLASS4(const CLASS4&);`。我知道这对于 C++ 程序员来说将是一个简单的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:51:26.987

在基本说明符列表中列出多个类允许一个类从多个其他类继承。这通常称为[*多重继承*](http://www.parashift.com/c++-faq/multiple-inheritance.html)。

放在`throw(error)`函数声明之后是函数表达它可能抛出的异常的一种方式。它被称为*异常规范*。在这种情况下，`CLASS4`具有许多参数的构造函数声明它可能会抛出`error`异常。这些异常规范现在在 C++11 中已弃用。

表单`T(const T&)`的构造函数称为*复制构造函数*。当通过复制另一个对象来创建对象时，它们在以下情况下被调用：

```
T first;
T second(first); 
```

你的`CLASS4`类有一个复制构造函数。预计在使用复制构造函数构造对象后，新对象将是旧对象的副本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T12:54:23.790

```
class CLASS4
  :public CLASS3
  ,public CLASS2 
```

是多重继承。**多重继承**的目的是使您的对象的功能也具有从 CLASS4 创建的CLASS2和**CLASS3**的**功能****（**阅读此页面以获取详细说明：http: [//publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index。 jsp?topic=%2Fcom.ibm.xlcpp8l.doc%2Flanguage%2Fref%2Fcplr134.htm](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8l.doc%2Flanguage%2Fref%2Fcplr134.htm) )

**throw(Error)**应该在发现错误时向您抛出错误，听起来可能很蹩脚，但它用于异常处理:)（我建议您阅读此页面以获得清晰的参考：http: [//msdn.microsoft.com /en-us/library/6dekhbbc(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/6dekhbbc(v=vs.80).aspx) )

并且`CLASS4(const CLASS4&);`是复制构造函数。“复制构造函数是 C++ 编程语言中的一种特殊构造函数，用于创建新对象作为现有对象的副本。” （引自维基百科。http: [//en.wikipedia.org/wiki/Copy_constructor](http://en.wikipedia.org/wiki/Copy_constructor)）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T13:04:16.587

```
class CLASS4: public CLASS3, public CLASS2 
```

就是说 CLASS4 继承了 CLASS3*和*CLASS2 的公共方法和属性，并将它们视为自己的公共方法（即它们是 CLASS4 的公共方法）。如果您使用`private CLASS3, protected CLASS2`，您将采用 CLASS3 的公共方法，并在 CLASS4 中将它们设为私有。同样，在该示例中，CLASS2 的公共方法将受到保护。这在某些情况下很有用：假设您有一个可以序列化到磁盘并以有意义的方式绘制到屏幕上的类。您将继承“Serialisable”和“Renderable”以获得两者的属性。

构造`CLASS4(const CLASS4& VARH)`函数被称为“复制构造函数”。给定一个 CLASS4 的例子，让我成为一个新的 CLASS4，它的属性具有所有相同的值。默认情况下，C++ 为您提供了一个简单的方法，它只依次复制每个属性，因此您通常不需要指定。如果您正在做一些聪明的事情（例如您分配了一大块内存并且您还想复制该内存的内容而不仅仅是指向它的指针），您需要手动指定自己的聪明的事情。

# ios - iOs 中的 JSON 日期字符串转换问题

> ID：13763343
> 
> 赞同：2
> 
> 时间：2012-12-07T12:43:47.433
> 
> 标签：ios, json, nsdate, nsdateformatter

我从 WCF Rest 服务获取了一些 UTC 日期字符串，格式如下：

```
/Date(1354851639500+0530)/ 
```

我使用以下代码转换日期：

```
//jsonDateString = 1354851639500+0530

NSInteger offset = [[NSTimeZone defaultTimeZone] secondsFromGMT]; //get number of seconds to add or subtract according to the client default time zone

NSTimeInterval unixTime = [[jsonDateString substringWithRange:NSMakeRange(0, 13)] doubleValue] / 1000; //WCF will send 13 digit-long value for the time interval since 1970 (millisecond precision) whereas iOS works with 10 digit-long values (second precision), hence the divide by 1000

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
NSTimeZone *timeZone = [NSTimeZone timeZoneWithName:@"UTC"];
[dateFormatter setTimeZone:timeZone];
[dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss a ZZZZ"];
NSString *stringFromDAte = [dateFormatter stringFromDate:[[NSDate dateWithTimeIntervalSince1970:unixTime] dateByAddingTimeInterval:offset]];
NSLog(@"Server GMT: %@", stringFromDAte);

NSDate *currentDadte = [dateFormatter dateFromString:stringFromDAte];
NSTimeInterval interval = [currentDadte timeIntervalSinceDate:[NSDate date]];

return [self dailyLanguage:interval]; 
```

但是当我转换的时候是不正确的。我需要获取接收时间的UTC时间。但我得到的时间值没有偏移值。

例如：如果 josnDate = 1354851639500+0530，我得到 2012-12-07 03:40:39 AM GMT，但我应该得到 2012-12-07 09:10:39（大约）。

我怎样才能做到这一点？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-27T20:33:02.537

试试这个代码

```
- (NSDate *)deserializeJsonDateString: (NSString *)jsonDateString
{
    NSInteger offset = [[NSTimeZone defaultTimeZone] secondsFromGMT]; //get number of seconds to add or subtract according to the client default time zone 

    NSInteger startPosition = [jsonDateString rangeOfString:@"("].location + 1; //start of the date value

    NSTimeInterval unixTime = [[jsonDateString substringWithRange:NSMakeRange(startPosition, 13)] doubleValue] / 1000; //WCF will send 13 digit-long value for the time interval since 1970 (millisecond precision) whereas iOS works with 10 digit-long values (second precision), hence the divide by 1000

    [[NSDate dateWithTimeIntervalSince1970:unixTime] dateByAddingTimeInterval:offset];

    return date;
} 
```

有关更多详细答案，请点击此链接 [http://goo.gl/lE6ut](http://goo.gl/lE6ut)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-05T13:16:17.510

你可以试试这个

```
NSString   *jsonDateString = [SingleResponseObject objectForKey:@"datetime"];;
NSInteger offset = [[NSTimeZone defaultTimeZone] secondsFromGMT];
NSTimeInterval unixTime = [[jsonDateString substringWithRange:NSMakeRange(0, 13)] doubleValue] / 1000;

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
NSTimeZone *timeZone = [NSTimeZone timeZoneWithName:@"UTC"];
[dateFormatter setTimeZone:timeZone];
[dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss a ZZZZ"];
NSString *stringFromDAte = [dateFormatter stringFromDate:[[NSDate dateWithTimeIntervalSince1970:unixTime] dateByAddingTimeInterval:offset]];
cell.date.text = stringFromDAte; 
```

# c# - 在 C# 中未触发 Datagridview 的 CellValuePushed 事件

> ID：13763346
> 
> 赞同：0
> 
> 时间：2012-12-07T12:44:10.707
> 
> 标签：winforms应用程序中。, c#, winforms, datagridview, datagridviewcomboboxcell

我`DataGridView`在一个带有多个控件的[winforms应用程序中。](/questions/tagged/winforms "显示标记为“winforms”的问题")`ComboBox`我将其转换为`ComboBox`可编辑。

但是，从那时起，列中的更改不会在基础类对象中更新。

当我调试代码时，我注意到`CellValuePushed()`在单元格中进行更改时未调用事件处理程序`ComboBox`。

知道我缺少什么吗？

谢谢

我注意到，当我在 中输入值时`ComboBox`，`CellValueNeeded()`正在调用事件处理程序。

请注意，在屏幕截图中，当我尝试在组合框单元格中输入数据时，`CellValueNeeded()`会调用 eventhandler

![在此处输入图像描述](../Images/114df4bf84ca7acc14df4a1fec0ed266.png)

**更新 ：**

```
private void UserDataTable_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
{
    if ((UserDataTable.CurrentCell.ColumnIndex == 4) ||
                (UserDataTable.CurrentCell.ColumnIndex == 6) ||
                (UserDataTable.CurrentCell.ColumnIndex == 8) ||
                (UserDataTable.CurrentCell.ColumnIndex == 11))
    {
        ComboBox combo = e.Control as ComboBox;    
        combo.DropDownStyle = ComboBoxStyle.DropDown;    
        if (combo == null)
            return;    
    }
}

private void UserDataTable_CellValuePushed(object sender, DataGridViewCellValueEventArgs e)
{
    IntVector temp1 = this.UserData[e.RowIndex];
    switch (e.ColumnIndex)
    {
        case 0: temp1.DeleteMember = (bool)e.Value;
            break;
        case 1:
            temp1.Date1  = Convert.ToDateTime(e.Value).ToString("dd-MM-yy");
            break;
        case 2:
            temp1.CaseNo = Convert.ToString(e.Value);
            break;
        case 3:
            break;
    }
} 
```

# javascript - 如何在基于 d3.js 的“家谱”中显示婚姻？

> ID：13763352
> 
> 赞同：33
> 
> 时间：2012-12-07T12:44:23.343
> 
> 标签：javascript, d3.js, tree, visualization, genealogy

我是一名 HTML/CSS 开发人员，正在研究用于构建“家谱”的 javascript 解决方案，该“家谱”**需要以**有意义的方式显示婚姻（当然来自家庭之外）。

本质上，我正在研究基于 d3.js 的树状图，例如[http://bl.ocks.org/4063570](http://bl.ocks.org/4063570)，但我一直在努力寻找任何表达“婚姻”的东西。

下面是我将基于它的数据的图像：

![这是我的数据](../Images/11ae0c22d943a125f437b8e46cfe4813.png)

任何帮助/建议/链接将不胜感激！我只是不知道这是否可能，但我很想使用 d3.js，因为它看起来制作精良，而且显然用途广泛。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-22T20:37:19.330

有一些选择，但我相信每个都需要一些工作。如果有一个单一的标准来表示 JSON 中的家谱，那将会有所帮助。我最近注意到 geni.com 对此有一个相当深入的 API。也许针对他们的 API 进行编码对于可重用性来说是一个好主意......

-- 谱系树 --

[谱系树](http://bl.ocks.org/mbostock/2966094)可能足以满足您的需求。您可以使 in-law 的可链接，如果您点击他们的名字，图表会重新绘制，这样您就可以看到他们的血统。

-- 括号布局树 --

类似于谱系树，但是是双向的，这个[括号布局树](http://bl.ocks.org/jdarling/2503502)让您可以处理“这里是我的父母、祖父母、孩子、孙子”类型的视图。像谱系树一样，您可以使个人可链接以将括号重新居中该节点上。

-- 基于力的布局 --

有一些有趣的基于力的布局似乎很有希望。看看[这个带有智能标签的基于力的布局示例](http://bl.ocks.org/MoritzStefaner/1377729)。对如何确定“力”的算法进行调整可以使它成为一棵非常可爱的树，老一代高于或低于新一代。

-- 聚类树状图（为什么失败） --

我见过的最适合家谱的 d3.js 布局假设单个节点是父节点，而您需要将父节点表示为两个节点之间的组合（视觉上是“T”）：一个节点是您树的成员，并且是代表姻亲的一个浮动节点。调整集群树状图来做到这一点应该是可行的，但并非没有重大修改。

如果你——或其他任何人——解决这个问题，请告诉我。我希望看到这项工作（并从中受益），如果可行的话，我可能会为此做出贡献。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-06-04T15:35:59.233

我还需要用 D3 绘制系谱，所以我想出了如何。我[创建了显示基本功能的示例](https://github.com/justincy/d3-pedigree-examples)，然后添加了扩展和显示后代等高级功能。

我不知道你想如何展示婚姻。婚姻是祖先谱系中固有的，而不是后代图谱中固有的。该代码可以修改为在后代节点中显示配偶。

这是它的外观照片。可以根据需要调整样式。

![在此处输入图像描述](../Images/e0eb211fed8cf26c3e662194ede82464.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-19T10:16:02.893

这需要一些工作，但基本上我提出的想法是使用一种称为关系的特殊节点进行强制布局，该节点不画圆。它代表两个主体之间的绑定，可以是更多节点的父节点。

在 d3 中，您可以扩展所有数据结构以适合您想要的内容，然后还有更多工作来绑定数据，但它都是可定制的。这是我将在力布局中使用的数据结构示例。

```
{
  "nodes": [
    {
      "type": "root",
      "x": 300,
      "y": 300,
      "fixed": true
    },
    {
      "type": "male",
      "name": "grandpa"
    },
    {
      "type": "female",
      "name": "grandma"
    },
    {
      "type": "relationship"
    },
    {
      "type": "male",
      "name": "dad"
    },
    {
      "type": "female",
      "name": "mum"
    },
    {
      "type": "relationship"
    },
    {
      "type": "male",
      "name": "I"
    }
  ],
  "links": [
    {
      "source": 0,
      "target": 2
    },
    {
      "source": 1,
      "target": 2
    },
    {
      "source": 0,
      "target": 3
    },
    {
      "source": 3,
      "target": 4
    },
    {
      "source": 4,
      "target": 6
    },
    {
      "source": 5,
      "target": 6
    },
    {
      "source": 6,
      "target": 7
    }
  ]
} 
```

希望我能澄清一些关于 d3 的可能性。

# arrays - 我想在 Java 的二维数组中移动项目

> ID：13763354
> 
> 赞同：0
> 
> 时间：2012-12-07T12:44:30.770
> 
> 标签：arrays, multidimensional-array

我正在制作西洋双陆棋游戏，并且我使用 2D 数组设置棋盘，如下所示：

```
stoneCounts[0][0]=stoneCounts[0][1]=stoneCounts[0][2]=stoneCounts[0][3]=stoneCounts[0][4] = W; 
stoneCounts[11][0]=stoneCounts[11][1] = W;
stoneCounts[16][0]=stoneCounts[16][1]=stoneCounts[16][2]= W;
stoneCounts[18][0]=stoneCounts[18][1]=stoneCounts[18][2]=stoneCounts[18][3]=stoneCounts[18][4]=W;
stoneCounts[23][0]=stoneCounts[23][1]=stoneCounts[23][2]=stoneCounts[23][3]=stoneCounts[23][4] =B;
stoneCounts[12][0]=stoneCounts[12][1] = B;
stoneCounts[7][0]=stoneCounts[7][1]=stoneCounts[7][2]=stoneCounts[7][3]=stoneCounts[7][4] =B;
stoneCounts[5][0]=stoneCounts[5][1]=stoneCounts[5][2]=  B; 
```

例如，当玩家移动时，我怎样才能得到。'W' 在stoneCounts[0][1] 移动到stoneCounts[2][3]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T12:26:08.003

我假设你也有一个`E`代表一个空方块的。那么你所要做的就是（假设新广场已经是空的）：

```
 stoneCounts[2][3] = stoneCounts[0][1];
 stoneCounts[0][1] = E; 
```

换句话说，只需将旧方格的状态复制到新方格（并记住以某种方式清除旧方格的状态。）

# mysql - MySQL 查询没有给出预期的结果！= 不工作

> ID：13763360
> 
> 赞同：1
> 
> 时间：2012-12-07T12:45:03.080
> 
> 标签：mysql, database

我有以下查询，但没有给出结果。有两个表，visitSearchEngine 和 clubUsers。我想列出不在 clubUsers 中的用户。但是使用 != 并没有帮助我。它也向我显示了 clubUsers 表中存在的用户。

```
 SELECT distinct(vs.users), vs.avisitedDate FROM visitSearchEngine vs, clubUsers cu  
 WHERE vs.users!=''
 AND (vs.users!=cu.users)
 AND vs.status='0' AND vs.hitType='googleIdentified'
 AND ((time_to_Sec(timediff(now(),vs.avisitedDate)))/60)>=5
 AND ((time_to_Sec(timediff(now(),vs.avisitedDate)))/60)<5 
```

请告知我哪里出错了，并建议是否有另一种编写此查询的好方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:47:53.270

试试这个：

```
SELECT DISTINCT(vs.users), vs.avisitedDate FROM visitSearchEngine vs, 
WHERE vs.users!='' AND NOT EXISTS (SELECT * FROM clubUsers cu  WHERE vs.users = cu.users )
AND vs.status='0' AND vs.hitType='googleIdentified'
AND ((TIME_TO_SEC(TIMEDIFF(NOW(),vs.avisitedDate)))/60)>=5
AND ((TIME_TO_SEC(TIMEDIFF(NOW(),vs.avisitedDate)))/60)<5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T12:56:17.767

试试这个：

```
 SELECT distinct(vs.users), vs.avisitedDate
 FROM visitSearchEngine as vs LEFT JOIN clubUsers as cu ON vs.users= cu.users
 WHERE vs.status='0' AND vs.hitType='googleIdentified'
 AND ((time_to_Sec(timediff(now(),vs.avisitedDate)))/60)>=5
 AND ((time_to_Sec(timediff(now(),vs.avisitedDate)))/60)<5
 AND cu.users IS NULL; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T12:52:41.933

您可能需要`IS NOT NULL`操作员：

```
vs.users IS NOT NULL 
```

您不能`NULL`与字符串运算符进行比较：

```
mysql> SELECT NULL='', NULL<>'';
+---------+----------+
| NULL='' | NULL<>'' |
+---------+----------+
|    NULL |     NULL |
+---------+----------+
1 row in set (0.01 sec) 
```

我还建议通过以下方式使您的查询更易于阅读：

1.  删除多余的括号
2.  使用显`JOIN`式

# javascript - 获取控制台历史记录

> ID：13763361
> 
> 赞同：21
> 
> 时间：2012-12-07T12:45:06.503
> 
> 标签：javascript, google-chrome-devtools

我想知道javascript中是否有办法检索控制台历史记录。

我所说的控制台历史是指出现在开发工具控制台中的内容。例如，我想在 html 页面中打印我的开发工具中显示的所有错误、警告、信息和日志，而无需打开它们。

如果我不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-10-19T08:58:06.977

我为此编写了一个简单的跨浏览器库，称为`console.history`. 它在 GitHub 上可用： [https ://git.io/console](https://git.io/console)

库基本上所做的是捕获所有调用`console.[log/warn/error/debug/info]`并将它们存储在`console.history`数组中。作为奖励，还添加了完整的堆栈跟踪。

测试文件`test.js`包含：

```
function outer() {
  inner();
}

function inner() {
  var array = [1,2,3];
  var object = {"foo": "bar", "key": "value"};
  console.warn("Something went wrong, but we're okay!", array, object);
}

outer(); 
```

条目`console.history`将是：

```
{
  "type": "warn",
  "timestamp": "Thu, 01 Sep 2016 15:38:28 GMT",
  "arguments": {
    "0": "Something went wrong, but we're okay!",
    "1": [1, 2, 3],
    "2": {
      "foo": "bar",
      "key": "value"
    }
  },
  "stack": {
    "0": "at inner (http://localhost:1337/test/test.js:6:11)",
    "1": "at outer (http://localhost:1337/test/test.js:2:3)",
    "2": "at http://localhost:1337/test/test.js:9:1"
  }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T22:17:29.333

Chrome 扩展有一个 API，[experimental.devtools.console](https://web.archive.org/web/20120829172146/http://developer.chrome.com/trunk/extensions/experimental.devtools.console.html)：

```
chrome.experimental.devtools.console.getMessages(function(messages) {  }) 
```

此 API 已被删除。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T13:46:21.837

无法使用 JavaScript 获取控制台数据。您能够做到的唯一方法基本上是劫持所有控制台功能并存储副本，然后调用默认日志行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-17T10:01:00.357

```
console.history = [];
var oldConsole = {};
for (var i in console) {
    if (typeof console[i] == 'function') {
        oldConsole[i] = console[i];
        var strr = '(function(){\
            console.history.push({func:\'' + i + '\',args : Array.prototype.slice.call(arguments)});\
            oldConsole[\'' + i + '\'].apply(console, arguments);\
        })';
        console[i] = eval(strr);
    }
} 
```

然后使用**console.history**访问历史

# oauth - 将我们的 SSO 从 JASIG cas 3.4.2 更新到 cas 3.4.10

> ID：13763369
> 
> 赞同：0
> 
> 时间：2012-12-07T12:45:37.550
> 
> 标签：oauth, single-sign-on, updates, cas, jasig

我们目前在 debian linux 上运行带有 JBOSS TreeCache 的 JASIG CAS 3.4.2，并希望更新到 3.4.10。（支持 OAuth）

这显然比将 pom.xml 中的 cas-server-core 版本转换为 3.4.10 更复杂。

我们真的很想在网上找到一个指南，如何升级以及需要调整流程的哪些部分。

我们更愿意**调整当前的 spring 配置以适应 3.4.10，**而不是下载 3.4.10 示例配置并对其进行自定义。

我们有一个自定义的 loginView.ftl，因此我们必须调整隐藏的输入标签，如下所述： [https ://wiki.jasig.org/display/CASUM/Upgrading](https://wiki.jasig.org/display/CASUM/Upgrading)

但似乎我们也必须更改 loginflow.xml 中的某些内容，因为现在视图抱怨，在模型中找不到 ${loginTicket}。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T14:33:01.293

如果要对 CAS 使用 OAuth 支持，则需要升级到 CAS 服务器**3.5.0**：[https ://wiki.jasig.org/display/CASUM/OAuth](https://wiki.jasig.org/display/CASUM/OAuth)

# android - 在 Android 上录制和播放声音而不存储临时文件

> ID：13763370
> 
> 赞同：3
> 
> 时间：2012-12-07T12:45:39.693
> 
> 标签：android, audio, media-player, soundpool

在我的应用程序中，我想录制一个 2 秒长的声音并将其回放给用户。到目前为止，我发现的所有示例都要求用于播放的音频数据要么来自文件，要么来自 URL。

MediaPlayer 和 SoundPool 类都只接受文件、文件描述符、资源 ID 或 URL 作为输入，而不仅仅是字节数组。

由于只能将文件写入 SD 卡而不是内部存储（是这样吗？），该应用程序需要安装 SD 卡并且可写入。但是如果没有 SD 卡，我的应用程序也应该可以工作。

有没有办法做到这一点？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T17:01:04.150

是的，应用程序可以写入内部存储（安装位置）。每个已安装的应用程序都提供了一个 Data 文件夹来写入其内部文件。还提供了一个缓存存储。

这些方法`Context`可以为您获取这些目录：

*   `getCacheDir()`：返回文件系统上应用程序特定缓存目录的绝对路径（*注意：如果存储空间不足，系统可能会删除缓存*）

*   `getDir(String name, int mode)`: 检索，如果需要，创建一个新目录，应用程序可以在其中放置自己的自定义数据文件。

还有一种外部存储方法：`getExternalCacheDir()`但不可靠，因为外部存储可能并不总是存在。

另外，如果只需要在App的内部数据目录中写入文件，有一个非常简单的方法：

[`openFileOutput (String name, int mode)`](http://developer.android.com/reference/android/content/Context.html#openFileOutput%28java.lang.String,%20int%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:01:18.593

You can use 'getApplicationContext().getFilesDir().getAbsolutePath()' to get the path of the directory where the app is installed. One limitation is, 'getFilesDir()' gives you the path to the directory on the file system where files created with openFileOutput(String, int) are stored.

# javascript - JavaScript 幻灯片切换

> ID：13763373
> 
> 赞同：-1
> 
> 时间：2012-12-07T12:45:47.743
> 
> 标签：javascript, jquery

在我的网站中，当您单击歌曲名称时，会打开“框”，但我想将打开的框设置为在您单击另一首歌曲名称时关闭。所以当时只有一个盒子会打开。调用框出现的代码就在下面。有谁知道我怎么能做到这一点的解决方案？PS 与图像会更容易理解，但我不允许添加图像。

```
<script type="text/javascript">
var showOrHide = true;
function parodyti (a) {
$(function () {
$("#nauj-" + a).slideToggle('slow', function () {})
 })
};</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:59:58.220

用来`.click(function()`完成你的任务。

请参阅[Jquery 一次切换一个元素](http://www.daniweb.com/web-development/javascript-dhtml-ajax/threads/420083/jquery-toggle-on-1-elm-at-a-time#)链接供您参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:53:55.313

你可以用jquery的概念来做。Jquery 为您提供了 .toggle() 方法来解决它。示例代码如下所示：

```
<!DOCTYPE html>
<html>
<head>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
  <button>Toggle</button>
<p>Hello</p>
<p style="display: none">Good Bye</p>
<script>

$("button").click(function () {
$("p").toggle();
});
</script>

</body>
</html> 
```

这将在 Good Bye 和 Hello 两个字符串之间切换按钮按下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T13:03:02.747

这可能会对您有所帮助：http: [//jsfiddle.net/fd46R/](http://jsfiddle.net/fd46R/)

它只是一个样本供您参考。

```
 $(function(){
    $('ul.child').hide();
    $('ul.parent a.slide').click(function(){
    $('ul.child').slideUp('slow');
    $(this).next().find('a').show();
        if( $(this).next().is(':hidden') ) {
    $(this).next().slideDown('fast');
        }
    return false;
    });
    });​ 
```

# python - Python通过两种不同的方法构建列表

> ID：13763374
> 
> 赞同：3
> 
> 时间：2012-12-07T12:45:50.723
> 
> 标签：python, list, append

> **可能重复：**
> [LIST.append(1) 和 LIST = LIST + [1] (Python) 有什么区别](https://stackoverflow.com/questions/3638486/what-is-the-difference-between-list-append1-and-list-list-1-python)

我是 Python 新手，也是编程新手。我遵循了 ThinkPython 这本书，这是我无法理解的一件事。

> 练习 10.7 编写一个函数来读取文件 words.txt 并构建一个每个单词一个元素的列表。编写此函数的两个版本，一个使用 append 方法，另一个使用成语 t = t + [x]。哪一个需要更长的时间来运行？为什么？

我尝试了这两种方法，发现后一种 (t=t+[x]) 比 append 方法花费的时间要长得多。这是我的第一个问题，为什么会发生这种情况？

我无缘无故地将 t=t+[x] 行更改为 t+=[x] 只是发现这个修订版本与 append 方法花费的时间几乎相同。我认为 t=t+[x] 等于 t+=[x]，显然它们不是。为什么？

顺便说一句：我尝试使用 python += 作为关键词搜索谷歌，但似乎谷歌不会把 += 作为关键词，即使我给它加了引号。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T12:48:56.163

```
t = t + [x] 
```

需要`t`，与`[x]`（调用`t`的方法[`__add__`](http://docs.python.org/2/reference/datamodel.html#object.__add__)）连接，这会创建一个新列表，然后将其命名为`t`。

```
t += [x] 
```

调用直接作用于列表本身的`t`' 方法。[`__iadd__`](http://docs.python.org/2/reference/datamodel.html#object.__iadd__)没有创建额外的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:15:25.960

首先，您需要知道，[**add**](http://docs.python.org/2/reference/datamodel.html#object.__add__)方法会创建一个新对象，而 append() 只是*修改*现有对象，从而获得更好的性能。

至于第二个问题，了解以上内容后，您可能会[发现](https://stackoverflow.com/questions/2347265/what-does-plus-equals-do-in-python)'+='或'plus equals'运算符在python中是等价的，因此与'+'运算符的行为不同。

您可能还想查看[此链接，该链接解释了在您的示例中调用的](http://bytes.com/topic/python/answers/458604-difference-__iadd__-__add__)**add**和**iadd**方法之间的区别，也许[这](http://docs.python.org/2/reference/datamodel.html#object.__iadd__)也是为了建立您的知识。

# java - cocos2d-android 中的 NoSuchMethodException

> ID：13763378
> 
> 赞同：2
> 
> 时间：2012-12-07T12:45:58.087
> 
> 标签：java, android, cocos2d-android

我正在为安卓使用 cocos2d。CCCallFunc 在任何地方都不起作用。它总是抛出 NoSuchMethodException。

CCCallFuncN

```
CCCallFuncN hideFunction = CCCallFuncN.action(this,
                    "hidesSprite"); 
```

我的方法

```
public void hidesSprite (CCNode sprite) {
        sprite.setVisible(false);
    } 
```

此代码在公共类 PageLayer 中扩展了 CCLayer

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T17:29:11.017

我通过将参数类型更改为对象解决了这个问题：

```
 public void hidesSprite (Object sender) {

        Sprite sprite = (Sprite) sender;
        sprite.setVisible(false);
    } 
```

# php - Ajax，实时编辑表问题

> ID：13763383
> 
> 赞同：1
> 
> 时间：2012-12-07T12:46:12.433
> 
> 标签：php, jquery, mysql, ajax

我正在使用菜单系统。我使用查询从数据库中获取菜单列表。

在那张桌子上，我还有一个编辑和删除选项。编辑和删除都有效，但编辑功能在 TR 上被激活。

我想在点击编辑TD时激活编辑功能。

当我只是简单地改变

```
$(".edit_tr").click(function() 
```

至

```
$(".editmenu").click(function() 
```

它完成了这项工作，但它只更改输入字段中的值，而不是 html 和/或数据库中的值。

我希望你们知道我的意思，并且可以帮助我。

提前致谢。

这是代码：

Javascript：

```
// delete menu 
```

$(文档).ready(函数() {

```
// delete the entry once we have confirmed that it should be deleted
$('.delete').click(function() {
    var parent = $(this).closest('tr');
    $.ajax({
        type: 'get',
        url: 'deletemenu.php', // <- replace this with your url here
        data: 'ajax=1&delete=' + $(this).attr('id'),
        beforeSend: function() {
            parent.animate({'backgroundColor':'#fb6c6c'},300);
        },
        success: function() {
            parent.fadeOut(300,function() {
                parent.remove();
            });
        }
    });        
}); 
```

});

```
// edit menu 
```

$(文档).ready(函数() {

```
$(".edit_tr").click(function()
{
var ID=$(this).attr('id');
$("#menunaam_"+ID).hide();
$("#voorgerecht_"+ID).hide();
$("#hoofdgerecht_"+ID).hide();
$("#nagerecht_"+ID).hide();
$("#prijs_"+ID).hide();
$("#menunaam_input_"+ID).show();
$("#voorgerecht_input_"+ID).show();
$("#hoofdgerecht_input_"+ID).show();
$("#nagerecht_input_"+ID).show();
$("#prijs_input_"+ID).show();

}).change(function()
{
var ID=$(this).attr('id');
var menunaam=$("#menunaam_input_"+ID).val();
var voorgerecht=$("#voorgerecht_input_"+ID).val();
var hoofdgerecht=$("#hoofdgerecht_input_"+ID).val();
var nagerecht=$("#nagerecht_input_"+ID).val();
var prijs=$("#prijs_input_"+ID).val();
var dataString = 'id='+ ID +'&menunaam='+menunaam+'&voorgerecht='+voorgerecht+'&hoofdgerecht='+hoofdgerecht+'&nagerecht='+nagerecht+'&prijs='+prijs;
$("#menunaam_"+ID).html('<img src="load.gif" />'); // Loading image

if(menunaam.length>0&& voorgerecht.length>0&& hoofdgerecht.length>0&& nagerecht.length>0&& prijs.length>0)
{

$.ajax({
type: "POST",
url: "editmenu.php",
data: dataString,
cache: false,
success: function(html)
{
$("#menunaam_"+ID).html(menunaam);
$("#voorgerecht_"+ID).html(voorgerecht);
$("#hoofdgerecht_"+ID).html(hoofdgerecht);
$("#nagerecht_"+ID).html(nagerecht);
$("#prijs_"+ID).html(prijs);
}
});
}
else
{
alert('Vul de velden in');
}

});

// Edit input box click action
$(".editbox").mouseup(function()
{
return false
});

// Outside click action
$(document).mouseup(function()
{
$(".editbox").hide();
$(".text").show();
});

}); 
```

还有表格的 PHP

```
$sql = "SELECT * FROM menus";

        $result = mysql_query($sql);

        echo "<table>";
        echo "<th>#</th> <th>Menu naam</th> <th> Voorgerecht </th> <th> Hoofdgerecht </th> <th> Nagerecht </th> <th> Prijs </th> <th></th><th></th>";

        while($row = mysql_fetch_assoc($result)) {
            $menunr = $row['menunr'];
            $menunaam = $row['menunaam'];
            $voorgerecht = $row['voorgerecht'];
            $hoofdgerecht = $row['hoofdgerecht'];
            $nagerecht = $row['nagerecht'];
            $prijs = $row['prijs'];

        // open tr
        echo "<tr id='$menunr' class='edit_tr'>";

        echo "<td>$menunr</td>";
        echo "<td><span id='menunaam_$menunr' class='text'>$menunaam</span><input type='text' value='$menunaam' class='editbox' id='menunaam_input_$menunr'/></td>"; 
        echo "<td><span id='voorgerecht_$menunr' class='text'>$voorgerecht</span><input type='text' value='$voorgerecht' class='editbox' id='voorgerecht_input_$menunr'/></td>";
        echo "<td><span id='hoofdgerecht_$menunr' class='text'>$hoofdgerecht</span><input type='text' value='$hoofdgerecht' class='editbox' id='hoofdgerecht_input_$menunr'/></td>";
        echo "<td><span id='nagerecht_$menunr' class='text'>$nagerecht</span><input type='text' value='$nagerecht' class='editbox' id='nagerecht_input_$menunr'/></td>";
        echo "<td><span id='prijs_$menunr' class='text'>$prijs</span><input type='text' value='$prijs' class='editbox' id='prijs_input_$menunr'/></td>";
        echo "<td id='$menunr' class='editmenu'>edit</td>";
        echo "<td><div  class='delete' >delete</div></td>";

        // close tr

        echo "</tr>"; 

        }           
        echo "</table>";

    ?> 
```

和 ajax url php 文件

删除菜单.php

```
 <?php
include 'config.php';
if(isset($_GET['delete']))
{
    $query = 'DELETE FROM menus WHERE menunr = '.$_GET['delete'];
    $result = mysql_query($query);
}

?> 
```

编辑菜单.php

```
<?php
include("config.php");
if($_POST['id'])
{
$id=mysql_escape_String($_POST['id']);
$menunaam=mysql_escape_String($_POST['menunaam']);
$voorgerecht=mysql_escape_String($_POST['voorgerecht']);
$hoofdgerecht=mysql_escape_String($_POST['hoofdgerecht']);
$nagerecht=mysql_escape_String($_POST['nagerecht']);
$prijs=mysql_escape_String($_POST['prijs']);
$sql = "update menus set menunaam='$menunaam',voorgerecht='$voorgerecht',hoofdgerecht='$hoofdgerecht',nagerecht='$nagerecht',prijs='$prijs' where menunr='$id'";
mysql_query($sql);
}
?> 
```

# c# - 检查某事是否为假的首选编码风格是什么？

> ID：13763386
> 
> 赞同：0
> 
> 时间：2012-12-07T12:46:18.880
> 
> 标签：c#, coding-style

鉴于以下情况：

```
bool isCorrect = theAnswer == 42; 
```

`false`在 C#（一般编程）中测试布尔逻辑的首选方法是哪种？

```
if (!isCorrect)
  // throw exception 
```

或者

```
if (isCorrect == false)
  // throw exception 
```

我问的原因是因为我们的一位高级开发人员建议我们应该始终使用后一种方法，因为它提高了可读性并确保其他开发人员可以清楚地看到错误检查；感叹号很容易漏掉。我更喜欢前者，因为它对我来说更简洁易读。

我知道这可能是一个主观问题，所以想知道是否在任何编码风格中都提到了具体的偏好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T12:57:51.577

我见过高级开发人员的生产代码包含这样的代码：

```
if (isCorrect.ToString().Length == 5) 
```

但我仍在使用：

```
if (!isCorrect) 
```

使用您认为对您更具可读性的内容，所有开发人员中没有统计数据））

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T13:02:23.403

首选方法（我不确定它是否真的*是*最佳实践，但绝对应该是）是*不*测试`false`

```
// First question: "Is the answer correct ?"
bool isCorrect = theAnswer == 42;

// Second question: "What if it is ?"
if (isCorrect) 
{

}
else //Third question: "What if it isn't ?"
{
} 
```

如果您需要遵循代码的实际流程，它不仅更合乎逻辑，而且可以避免滚动以跳过错误处理。

此外，为了完整性，值得指出的是布尔名称应该始终是正数：想想`isCorrect`VS `isNotWrong`... `isPositive`VS `isNotNegative`... 不仅更容易阅读而且也更容易理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T13:04:06.377

你是对的，**(!condition)**更简洁。
高级开发人员说得对，**(condition == false)**更“可见”（或者如果您愿意，也可以阅读）。

因为它只是归结为偏好，所以无论你喜欢与否，你都应该按照高级开发人员的建议去做，并保持一切一致。当您是高级开发人员时，您可以返回并更改所有内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T13:04:15.167

鉴于以下情况：

```
bool isCorrect = theAnswer == 42; 
```

检查倒数的最清晰方法是（恕我直言！）：

```
bool isWrong = !isCorrect;

...

if (isWrong)
// throw exception 
```

# windows-7 - IIS 7 管理器未打开但正在工作

> ID：13763387
> 
> 赞同：3
> 
> 时间：2012-12-07T12:46:30.330
> 
> 标签：windows-7, iis-7

我有 Windows 7 家庭高级版。我已经打开了 IIS。通过在我的地址栏上输入 localhost 来确认它是否正在运行。它显示 IIS 欢迎消息，显示其工作。

但是，当我尝试打开 IIS 管理器时，什么也没有发生。我想在上面部署我的 asp.net mvc 3 应用程序。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-04T11:26:08.137

对我来说，通过 帮助专注于窗口，然后在下拉菜单中`Alt-Tab`按下`Alt-Space`并选择。`Move`之后，拖动鼠标或使用键盘按钮移动。顺便说一句，适用于所有窗口。

**Win 10 更新**

对于 Win 10 的此类窗口还有另一种更简单的解决方案。您可以将任何可用窗口拉到屏幕的左边缘。Windows 会将窗口扩展到屏幕的一半，并提示您选择任何打开的窗口来填充后半部分。选择您无法访问的窗口，您很好。

[![在此处输入图像描述](../Images/d175ef693e843d7affea301f215fac07.png)](https://i.stack.imgur.com/KZWa3.png)

# javascript - iPad3 iOS6上的Web应用程序“有时有时不”工作的原因是什么？

> ID：13763389
> 
> 赞同：1
> 
> 时间：2012-12-07T12:46:34.177
> 
> 标签：javascript, ios, debugging, web-applications, ios6

这是所有用户，我不得不远程调试可以告诉我......由于接下来的几天我也没有设备来测试，所以我几乎一无所知。

该应用程序是一个用 javascript/jQuery Mobile 编写的网络应用程序，在 iPad1+2 和 iOS3+4 上运行良好。当用户被指示时，系统在他的 iPad 上运行没有问题

现在他卡在第一页，有时“什么也没发生”，但即使页面正常，他甚至无法登录系统。

**问题：**
由于应用程序第一次运行良好，并且我读到 iOS 中有一些新的缓存机制，我怀疑它可能与此有关。但是，在 iOS6 上使用脚本繁重的 Web 应用程序时，寻找需要注意的事项时，没有地方上网。

那么，在将应用程序升级到 iOS6 时，我必须注意哪些陷阱？

# c# - 将对象保存在 ashx 处理程序上的 Session 中，并在另一个 ashx 处理程序中获取对象。如何？

> ID：13763391
> 
> 赞同：0
> 
> 时间：2012-12-07T12:46:36.330
> 
> 标签：c#, asp.net, session, httpcontext, ashx

我有两个处理程序。

在 Authentication.ashx 处理程序中，我在会话中保存一个对象，如下所示：

```
HttpContext.Current.Session["ConnectionUserSession"] = userCache; 
```

然后，我有另一个处理程序，Send.ashx，我想获取保存在 Authentication.ashx 中的对象。

我该怎么做？我获取对象的代码是：

```
UserCache userCache = (UserCache) HttpContext.Current.Session["ConnectionUserSession"]; 
```

问题：userCache 始终为空，并且我在两个处理程序上都实现了 IRequiresSessionState。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:24:20.023

无论是线

```
HttpContext.Current.Session["ConnectionUserSession"] = userCache; 
```

没有执行，或者用于保存和检索的字符串键不同，或者您调用了

```
Session.Abandon(); 
```

这两个处理程序之间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T15:00:15.923

我认为他们的意思是在Authentication.ashx中：

```
public void ProcessRequest (HttpContext context) {
    context.Session["ConnectionUserSession"] = userCache;
} 
```

在 Send.ashx 中，

```
public void ProcessRequest (HttpContext context) {
    UserCache userCache = (UserCache) context.Session["ConnectionUserSession"];
} 
```

# python - 在python中崩溃后检索变量

> ID：13763398
> 
> 赞同：0
> 
> 时间：2012-12-07T12:47:04.437
> 
> 标签：python

我的算法已经运行了几个小时，完成后必须将变量保存到文件中。虽然在写入文件时它由于内存异常而崩溃......虽然算法有效并且变量具有我需要的值。无论如何，此时是否可以检索该变量？顺便说一句，我是 python 新手，我完全知道我在问什么有点奇怪。

```
# -*- coding: utf-8 -*-
from scipy import *
feature_filename = '4087_features.pkl'
name = 'training'
minimum_features = 3
feature_output = '4087_features_min' + str(minimum_features) + '_' + name + '.txt'

print feature_output

# load necessary files for this step

print 'loading features'
import pickle
features = pickle.load(open(feature_filename, 'rb'))
features_new = {}
t = 0
from scipy.sparse import *
for k in features:
    features_new[k] = t
    t += 1
features = features_new
print feature_filename + ' loaded'

filename_in = '../../../Dropbox/Machinaal_leren/project/project/Emotion_Data_twitter/tweets_' + name + '.mat'
print 'loading ' + filename_in + '...'

import scipy.io
from numpy  import *
try:
    data
    tweets
except NameError:
    data = scipy.io.loadmat(filename_in)
    tweets = data['tweets_' + name].squeeze()
print 'tweets_' + name + 'loaded'

execfile('functions.py')

import numpy as np
from multiprocessing import Pool

t = 0

def create_feature_vector(tweet, ground_truth):
    feature_row = np.array([0] * len(features))
    tweet = clean_tweet(tweet)
    # N-grams
    for N in range(3):
        for j in range(0, len(tweet) - (N - 1)):
            try:
                key = ''
                for m in range(N):
                    key += tweet[j + m] + ' '
                index = features[key]
                feature_row[index] += 1
            except ValueError:
                pass
            except IndexError:
                pass
            except KeyError:
                pass
    count_features = (feature_row != 0).sum(0)
    if(count_features >= minimum_features):
        feature_row = [x / (1.*sum(feature_row)) for x in feature_row]
        return(feature_row, ground_truth)
    else:
        return (9, 9)

emotions = ['emo_joy', 'emo_fear', 'emo_sadness', 'emo_thankfulness', 'emo_anger', 'emo_surprise', 'emo_love']
N_emo = len(emotions)
ground_truth_list = []

for i in range(len(tweets)):
    feature_vector, ground_truth = create_feature_vector(tweets[i][0], emotions.index(tweets[i][1]) + 1)
    print i
    if(i==0):
        feature_vector_matrix =coo_matrix(ground_truth)

    else:
        if((feature_vector != 9) and (ground_truth != 9)):
            ground_truth_list.append(ground_truth)
            feature_vector_matrix = vstack([feature_vector_matrix,coo_matrix(feature_vector)])

print 'Calculated the matrix, ground truth and saving files'

ground_truth_array = np.array(ground_truth_list)

output = open('ground_truth.pkl', 'wb')
pickle.dump(ground_truth_array, output)
output.close()

output2 = open('feature_matrix.pkl', 'wb')
pickle.dump(feature_vector_matrix, output2)
output2.close() 
```

它在这条线之后崩溃了

print '计算矩阵、ground truth 和保存文件'

输出

```
Calculated the matrix, ground truth and saving files
Traceback (most recent call last):
  File "C:\Users\Olivier.Janssens\Documents\Aptana Studio 3 Workspace\MachineLearningBNB\generate_feature_vectors.py", line 99, in <module>
    pickle.dump(feature_vector_matrix, output2)
  File "C:\Program Files (x86)\python2.7\lib\pickle.py", line 1370, in dump
    Pickler(file, protocol).dump(obj)
  File "C:\Program Files (x86)\python2.7\lib\pickle.py", line 224, in dump
    self.save(obj)
  File "C:\Program Files (x86)\python2.7\lib\pickle.py", line 331, in save
    self.save_reduce(obj=obj, *rv)
  File "C:\Program Files (x86)\python2.7\lib\pickle.py", line 419, in save_reduce
    save(state)
  File "C:\Program Files (x86)\python2.7\lib\pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "C:\Program Files (x86)\python2.7\lib\pickle.py", line 562, in save_tuple
    save(element)
  File "C:\Program Files (x86)\python2.7\lib\pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "C:\Program Files (x86)\python2.7\lib\pickle.py", line 600, in save_list
    self._batch_appends(iter(obj))
  File "C:\Program Files (x86)\python2.7\lib\pickle.py", line 615, in _batch_appends
    save(x)
  File "C:\Program Files (x86)\python2.7\lib\pickle.py", line 331, in save
    self.save_reduce(obj=obj, *rv)
  File "C:\Program Files (x86)\python2.7\lib\pickle.py", line 419, in save_reduce
    save(state)
  File "C:\Program Files (x86)\python2.7\lib\pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "C:\Program Files (x86)\python2.7\lib\pickle.py", line 649, in save_dict
    self._batch_setitems(obj.iteritems())
  File "C:\Program Files (x86)\python2.7\lib\pickle.py", line 663, in _batch_setitems
    save(v)
  File "C:\Program Files (x86)\python2.7\lib\pickle.py", line 331, in save
    self.save_reduce(obj=obj, *rv)
  File "C:\Program Files (x86)\python2.7\lib\pickle.py", line 419, in save_reduce
    save(state)
  File "C:\Program Files (x86)\python2.7\lib\pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "C:\Program Files (x86)\python2.7\lib\pickle.py", line 562, in save_tuple
    save(element)
  File "C:\Program Files (x86)\python2.7\lib\pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "C:\Program Files (x86)\python2.7\lib\pickle.py", line 581, in save_tuple
    self.memoize(obj)
  File "C:\Program Files (x86)\python2.7\lib\pickle.py", line 247, in memoize
    self.memo[id(obj)] = memo_len, obj
MemoryError 
```

第 99 行是：

```
pickle.dump(feature_vector_matrix, output2) 
```

我有 ground_truth.pkl，它看起来确实很完整

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:51:55.333

利用`except MemoryError`

这样，如果您遇到内存异常，您就可以收到该值。

你应该这样使用它：

```
try:
   // Your code where you get the error
except MemoryError:
   //save or print your values here 
```

但是，如果这种崩溃更频繁地发生，您可能需要优化您的代码。寻找非常大的处理步骤。有时它有助于将过程拆分为更小的步骤或首先存储信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:56:49.810

好消息，根据您的代码，您不在任何嵌套函数或类似函数中。只要您保持 Python 窗口打开，您就应该能够像在代码中那样获取变量。换句话说，只需在 python 提示符下运行这段代码。

```
ground_truth_array = np.array(ground_truth_list)

output = open('ground_truth.pkl', 'wb')
pickle.dump(ground_truth_array, output)
output.close()

output2 = open('feature_matrix.pkl', 'wb')
pickle.dump(feature_vector_matrix, output2)
output2.close() 
```

如果您仍然没有 python 提示，那么您基本上不走运，并且必须重新运行数据。请记住这一点，以便将来保存变量或使用较小的子集测试功能，以确保崩溃不会杀死您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T13:03:04.803

当代码尝试从（我认为它非常大）创建一个`numpy`数组时，您会崩溃。`ground_truth_list`我的建议是在创建阵列之前将列表保存到磁盘。这样，您将始终能够读取列表的值（无论您是否有 Python 提示符）。

**更新**

如果不能腌制的对象是一个矩阵（顾名思义），一个可能的解决方案是将它分成几个切片（或者只是创建切片而不是整个矩阵），然后将每个切片腌制到磁盘。稍后，当您需要使用该矩阵时，您必须加载各个切片并再次加入以恢复原始矩阵。也许不是最有效的解决方案，但我认为它应该有效。

# ruby - OpenUri 导致 HTTPS URL 出现 401 Unauthorized 错误

> ID：13763399
> 
> 赞同：2
> 
> 时间：2012-12-07T12:47:13.777
> 
> 标签：ruby, authentication, https, screen-scraping

我正在添加从需要使用带有身份验证的 HTTPS 连接的源中抓取 XML 页面的功能。我正在尝试使用 Ryan Bates 的 Railscast #190 解决方案，但遇到了 401 身份验证错误。

这是我的测试 Ruby 脚本：

```
require 'rubygems'
require 'nokogiri'
require 'open-uri'

url = "https://biblesearch.americanbible.org/passages.xml?q[]=john+3:1-5&version=KJV"
doc = Nokogiri::XML(open(url, :http_basic_authentication => ['username' ,'password']))
puts doc.xpath("//text_preview") 
```

这是我运行脚本后控制台的输出：

```
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:799:in `connect': SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed (OpenSSL::SSL::SSLError)
from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:799:in `block in connect'
from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/timeout.rb:54:in `timeout'
from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/timeout.rb:99:in `timeout'
from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:799:in `connect'
from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:755:in `do_start'
from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:744:in `start'
from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/open-uri.rb:306:in `open_http'
from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/open-uri.rb:775:in `buffer_open'
from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/open-uri.rb:203:in `block in open_loop'
from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/open-uri.rb:201:in `catch'
from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/open-uri.rb:201:in `open_loop'
from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/open-uri.rb:146:in `open_uri'
from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/open-uri.rb:677:in `open'
from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/open-uri.rb:33:in `open'
from scrape.rb:6:in `<main>' 
```

在我的研究中，我看到一篇文章建议在 1.9.3 中可以使用以下选项：

```
doc = Nokogiri::XML(open(url, :http_basic_authentication => ['username' ,'password'], :ssl_verify_mode => OpenSSL::SSL::VERIFY_NONE)) 
```

但是，这也不起作用。我希望能对解决这一挑战有所了解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T15:17:56.380

给定的 URL 将被重定向到`/v1/KJV/passages.xml?q[]=john+3%3A1-5`HTTP 状态代码`302 Found`。OpenURI 理解重定向，但出于安全原因自动删除身份验证标头（可能）。(*)

如果你`"http://biblesearch.americanbible.org/v1/KJV/passages.xml?q[]=john+3%3A1-5"`直接访问，你会得到预期的结果。:-)

(*) 您可以在以下位置找到`open-uri.rb`：

```
if redirect
  ### snip ###
  if options.include? :http_basic_authentication
    # send authentication only for the URI directly specified.
    options = options.dup
    options.delete :http_basic_authentication
  end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-27T20:25:46.293

你可以这样做，它也应该工作：

`open(url, :http_basic_authentication => [user, pass] ) doc = Nokogiri::HTML(open(url, :http_basic_authentication => [user, pass] ))`

然后，您可以根据需要解析文档。通过在第二个请求中再次传递标头中的 http_basic_authentication，您将弥补第一个请求中已删除的标头。希望这对你有用。

[http://http-basic-authentication-nokogiri.blogspot.com/2014/08/http-basic-authentication-using-nokogiri.html](http://http-basic-authentication-nokogiri.blogspot.com/2014/08/http-basic-authentication-using-nokogiri.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T14:41:51.297

你说你需要使用 HTTPS，但你使用的是 HTTP 协议：

```
url = "http://biblesearch...." 
```

OpenURI 理解 HTTP 和 HTTPS。如果要使用 HTTPS 连接，请将 URL 中的协议更改为`HTTPS`，然后进行连接：

```
url = "https://biblesearch...." 
```

# java - 地板空间做程序

> ID：13763401
> 
> 赞同：1
> 
> 时间：2012-12-07T12:47:20.473
> 
> 标签：java, do-while

我应该编写一个程序来计算房子的总占地面积。程序提示用户输入至少一个房间的长度和宽度，如果他想输入更多的房间尺寸，需要与用户核实。

它不工作。有人请帮助我吗？

```
import java.util.*;

public class FloorSpace
{

    public static void main (String[] args)
    {

        Scanner input = new Scanner(System.in); 

        double length = 0.0, width = 0.0, floorSpace = 0.0;
        char ans;

        do
        {
            System.out.print("Enter length: ");
            length = input.nextDouble();

            System.out.print("Enter width: ");
            width = input.nextDouble();

            floorSpace = length * width;

            floorSpace += floorSpace;

            System.out.print("Do you want to enter more room dimensions? (y/n): ");
            ans = input.nextLine().charAt(0);
        }
        while (ans == 'y');

        System.out.println("\nTotal floor space is " + floorSpace);

    } 
```

}

哦，我刚刚发现我的计算公式有问题。有人可以帮帮我吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:54:50.780

您设置`floorSpace`为`length * width`每次，然后自行增加该值（实际上只是将其乘以 2）。

代替

```
floorSpace = length * width;

floorSpace += floorSpace; 
```

只需

```
floorSpace += length * width 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:52:07.193

代替：

```
ans= input.nextLine().charAt(0); 
```

采用：

```
ans = input.next().charAt(0); 
```

要修复您的公式，请使用：

```
 floorSpace += length * width; 
```

并删除：

```
floorSpace = length * width; 
```

所以最终的解决方案如下：

```
import java.util.*;

public class FloorSpace
{

    public static void main (String[] args)
    {

        Scanner input = new Scanner(System.in); 

        double length = 0.0, width = 0.0, floorSpace = 0.0;
        char ans;

        do
        {
            System.out.print("Enter length: ");
            length = input.nextDouble();

            System.out.print("Enter width: ");
            width = input.nextDouble();

            floorSpace += length * width;

            System.out.print("Do you want to enter more room dimensions? (y/n): ");
            ans = input.next().charAt(0);
        }
        while (ans == 'y');

        System.out.println("\nTotal floor space is " + floorSpace);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T12:59:41.527

试试这个：

```
import java.util.*;

public class FloorSpace
{

    public static void main (String[] args)
    {

        Scanner input = new Scanner(System.in); 

        double length = 0.0, width = 0.0, floorSpace = 0.0;
        char ans='n'; //not for default

        do
        {
            System.out.print("Enter length: ");
            length = input.nextDouble();

            System.out.print("Enter width: ");
            width = input.nextDouble();

            floorSpace +=  length * width;

            System.out.print("Do you want to enter more room dimensions? (y/n): ");
            if (input.hasNext()){
                ans = input.next().charAt(0);
            }
        }
        while (ans == 'y');

        System.out.println("\nTotal floor space is " + floorSpace);

    }
} 
```

问候

# c# - 比较 linq 中的希腊语（或其他非拉丁语）字符串

> ID：13763402
> 
> 赞同：0
> 
> 时间：2012-12-07T12:47:22.133
> 
> 标签：c#, linq, entitymanager

我正在尝试在 linq 中编写一个返回如下结果的查询：

```
PeopleEntities pe = new PeopleEntities();
String fName = "Τάκης";
var people = pe.Person.Where(per => per.FirstName.Equals(fname)).ToList(); 
```

当我使用转储查询时

```
String query = ((ObjectQuery)pe.Person.Where(per => per.FirstName.Equals(fname))).ToTraceString();
Console.WriteLine(query); 
```

然后在提供值的 MySQL WorkBench 中使用查询，一切正常，但在代码中查询不返回任何内容。

编辑：我已经使用 MySQL 连接器连接了实体管理器。我之前没有考虑过，但这是问题，因为使用 MsSQL 连接一切正常

关于如何执行上述操作的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:11:28.257

`string.Equals()`在区域敏感的查询中，如果不提供[StringComparison](http://msdn.microsoft.com/en-us/library/system.stringcomparison.aspx)值，则不应使用，例如：

```
var people = pe.Person.Where(
    per => per.FirstName.Equals(fname, StringComparison.CurrentCultureIgnoreCase)); 
```

是的，L2E 支持这种重载。

如果这仍然不起作用，则 AppDomain 的当前文化或数据库的排序规则可能是错误的。查看 SQL Profiler 中的查询/参数。

# c# - 使用浏览器发送 modbus 命令

> ID：13763408
> 
> 赞同：0
> 
> 时间：2012-12-07T12:47:44.793
> 
> 标签：c#, http, tcp, modbus

我有一些使用 ModbusRTU 的硬件。使用 ModbusRTU 的 TCP/IP 网关我现在可以使用我的 C# 应用程序通过 TCP/IP 控制硬件。这行得通。

现在我想用我的安卓手机控制它。是的，我可以制作一个 Android 应用程序，这对我来说应该没问题，但我想让自己更特别地用网络浏览器修复它。这样我就更灵活了，因为其他操作系统也应该没问题。

如果我想通过使用网络浏览器来控制硬件，我很感兴趣应该从哪里开始寻找。什么编程语言，服务器要求是什么。请注意，我对 Web 浏览器编程的经验很少，但我很想学习它。用 PHP / Ajax 做了一些非常简单的事情。

仅供参考，ModbusTCP 包装非常简单，我只控制家里的一些灯的开/关/调光和启用一些设备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:00:06.260

我目前正在玩 Marmalade Quick beta，它可以在 Lua 中打开 TCP 端口。这是一种简单的高级语言，具有适用于 Android 的构建系统。

[http://quick-docs.madewithmarmalade.com/](http://quick-docs.madewithmarmalade.com/)

您使用的是哪种 Modbus 照明控制器？

# java - 来自 play 应用程序的 JDBC 连接

> ID：13763413
> 
> 赞同：0
> 
> 时间：2012-12-07T12:48:00.750
> 
> 标签：java, playframework, playframework-2.0

我正在尝试从使用 play framework 2.0.4 编写的应用程序建立与 oracle 数据库的连接，并在打开连接时收到 SQLException（没有为 jdbc:oracle:thin:@....找到合适的驱动程序）。

我正在使用可以独立运行的代码，并且异常中的连接字符串也可以（甚至在“执行查询”中对其进行了测试并且可以正常工作）。

Play 甚至可以找到我的驱动程序，因为我的代码开头有这个语句，如果该类丢失，它将引发 NoClassDefFound 异常：

```
Class.forName("oracle.jdbc.driver.OracleDriver"); 
```

我的 lib 目录中的 oracle 驱动程序与我在示例应用程序 ExecuteQuery、JBoss 等中使用的相同。

我究竟做错了什么？

这是我的代码中的另一个片段：

```
String connectionString = "jdbc:oracle:thin:@" + url + ":" + port + ":" + sid;
Connection conn = DriverManager.getConnection(connectionString, user, password); 
```

PS：我想以这种方式访问​​的数据库不是我存储应用程序数据的主数据库，而只是一个外部只读数据源......

感谢您的任何提示

编辑：问题现在已解决，但我不知道如何：\我只是运行我的代码以再次阅读错误消息，但我不再收到任何错误。我唯一的想法是，上周当我没有让它工作时，我没有重新启动游戏控制台，而只有我的应用程序！？！也许这就是原因？！

Edit2：在不改变我的设置的情况下仍然会不时发生，但是一旦我重新启动我的应用程序，它就会再次工作:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:57:21.603

如果加载了驱动程序，则 url 一定是不正确的。您是否尝试打印连接字符串以检查它是否正确？

它应该看起来像**“jdbc:oracle:thin:@//localhost:1521/mydb”**

# javascript - 如何保持隐藏输入始终显示 1

> ID：13763417
> 
> 赞同：2
> 
> 时间：2012-12-07T12:48:09.560
> 
> 标签：javascript, jquery, html

Jsfiddle 在[这里](http://jsfiddle.net/7sARw/)

请按照以下步骤操作：

*   单击“打开网格”并选择“是或否”或“对或错”选项，您将看到相关的答案按钮出现在下方。

*   现在，如果您查看“答案数”行，它会显示一个字符串，说明“只能选择 1 个答案”。

*   单击答案按钮将其打开，然后再次单击将其关闭，这样没有答案按钮会以绿色突出显示。

*   单击“添加问题”按钮，您会意识到它已将控件从顶部附加到表格中。没有警报显示您选择的答案较少，因为您没有突出显示一个答案。

所以问题是，如果您单击“对或错”或“是或否”答案之一将其打开，然后再次单击相同的答案按钮将其关闭，那么当您单击“添加问题”按钮，它不执行验证。

我假设它这样做的原因是因为当您单击“真”、“假”、“是”或“否”的答案按钮时，隐藏的答案数量文本输入将数字 1 显示为 1 答案是打开（如字母按钮），但是当您关闭按钮时，它会在隐藏的文本输入中显示 0，因为没有打开答案。

应该发生的是，因为它只有一个答案，如果该字符串出现，那么隐藏的文本输入应该始终显示`1`，无论是否打开答案按钮，因为用户必须选择一个答案。我想我已经发现下面的代码导致了这个问题。

```
function updateAnswer(context, iQuestionIndex, bDisableAppend) {
    var _sCurrQ_Class = 'q_' + iQuestionIndex;
    var _oCurrAnswerContainer = jQuery('#answer_selections .' + _sCurrQ_Class);
    if (!_oCurrAnswerContainer.length) {
        _oCurrAnswerContainer = jQuery(document.createElement('div')).addClass(_sCurrQ_Class);
        !bDisableAppend && jQuery('#answer_selections').append(_oCurrAnswerContainer);
    }

    _oCurrAnswerContainer.html('');

    var value, id;
    // loop through all buttons with 'on' status and their info to the current answer container
    $('.answerBtnsOn', context).each(function (i, btn) {

        var $btn = $(btn);
        value = btn.value;
        id = $btn.attr('id');

        var n = $("input[name='value[" + id + "]']").length;
        var hid = "hidden" + id + n + "value";
        $(btn).attr("data-hid", hid);

        if (!bDisableAppend) {
            // append those values to the form
            var input = '<input type="checkbox" id="' + hid + '" name="value[' + iQuestionIndex + '][]" value="' + value + '" checked /><label for="' + hid + '">' + value + '</label>';
            _oCurrAnswerContainer.append(input);
        }
    });
} 
```

我的问题是，在 jsfiddle 中，任何人都可以让小提琴工作，以便当用户在打开和关闭“真或假”或“是”的答案按钮后未选择答案时显示警报或没有”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:08:04.073

我想我已经在[这里](http://jsfiddle.net/7sARw/3/)修好了，虽然你的代码真的很乱。我添加了一个条件检查，以查看所选答案的数量是否为零，而它应该是一 - 如果是这样，只需将设置为值的数字设置为`.answerstxt`一。

# knockout.js - 淘汰赛验证纠正错误

> ID：13763418
> 
> 赞同：3
> 
> 时间：2012-12-07T12:48:10.750
> 
> 标签：knockout.js, knockout-validation

我正在使用 KnockoutJS 和 Knockout-Validation。我正在使用该属性`errorElementClass`，但是，我希望能够在更正验证错误后将另一个类分配给元素。只有在元素遇到错误并已更正后，才会将此类分配给元素。

有没有人尝试过这种事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T13:58:57.727

您可以向可观察对象添加扩展程序并订阅对 isValid 属性的更改

像这样

```
ko.extenders.corrected = function(observable) {
    observable.isCorrected = ko.observable();
    observable.isValid.subscribe(function(value) {
        observable.isCorrected(value == true);
    });

    return observable;
}; 
```

[http://jsfiddle.net/fkkJz/](http://jsfiddle.net/fkkJz/)

你需要手动绑定css

```
<input data-bind="value: field, css: { corrected: field.isCorrected }"  /> 
```

你也可以做一些小技巧，这样你就不需要手动绑定 css。这将覆盖值绑定并检查它是否应该注入一个 css 绑定 [http://jsfiddle.net/HuLWD/](http://jsfiddle.net/HuLWD/)

**更新：**由于要求，我在功能上需要我自己并记住了这个答案，但是如果提交了第二个正确的值，我还需要它来清除更正的状态，它可以像这样实现

```
ko.extenders.corrected = function(observable) { 
    var state = observable();
    observable.isCorrected = ko.observable();
    observable.isValid.subscribe(function(value) {
        observable.isCorrected(value == true);
        state = observable();
    });

    observable.subscribe(function(value) {
        if(state !== value) {
            observable.isCorrected(false);
        }
    });

    return observable;
}; 
```

[http://jsfiddle.net/HuLWD/1/](http://jsfiddle.net/HuLWD/1/)

# hadoop - 猪在存储输出时删除括号

> ID：13763419
> 
> 赞同：2
> 
> 时间：2012-12-07T12:48:14.703
> 
> 标签：hadoop, apache-pig, bigdata, parentheses

我是 Pig 编程新手，目前我正在尝试用 pig 实现我的 Hadoop 作业。到目前为止，我的 Pig 程序有效。我将一些输出文件存储为 *.txt ，并以分号作为分隔符。我的问题是Pig在元组周围添加了括号......

是否可以将输出存储在没有这些括号的文件中？只存储值？也许通过用 UDF 覆盖 PigStorage 方法？有人对我有提示吗？

我想将我的输出文件读入没有括号的 RDBMS (Oracle)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T01:00:38.893

您可能需要编写自己的自定义 Storer。请参阅：[http](http://wiki.apache.org/pig/Pig070LoadStoreHowTo) ://wiki.apache.org/pig/Pig070LoadStoreHowTo 。

将其编写为普通的 CSV 或其他内容应该不会太难。还有一个预先存在的 DBStorage 类，如果需要，您可以使用它直接写入 Oracle。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-12T07:51:21.900

对于首先找到此主题的人，此处回答了问题： [删除 Pig 输出中的括号和逗号](https://stackoverflow.com/questions/26893141/remove-brackets-and-commas-in-output-from-pig/33666396#33666396)

在脚本中使用 FLATTEN 命令，如下所示：

```
output = FOREACH [variable] GENERATE FLATTEN (($1, $2, $3));<br>
STORE output INTO '[path]' USING PigStorage(,); 
```

注意要展平的输出的第二组括号。

# c# - ZedGraph：如何使用 TextObj 在图表中直接标记 LineItem？

> ID：13763420
> 
> 赞同：1
> 
> 时间：2012-12-07T12:48:13.480
> 
> 标签：c#, label, zedgraph

我在我的项目中使用了 ZedGraph，它很棒！但是还有一件事我想不通。我正在寻找一些直接在图表中绘制 LineItem 描述的可能性，如图所示：

[http://www.imagesup.net/?di=113548312290](http://www.imagesup.net/?di=113548312290)

我尝试使用TextObj，但我仍然有一个问题正确计算角度，它不对应于线的斜率。谁能告诉我怎么了？PS：这可能是由于X轴和Y轴的范围不同，或者屏幕上这些轴的长度不同造成的？

```
 PointPair ptA = new PointPair(0, 100);
        PointPair ptB = new PointPair(100, 0);

        PointPairList ppl = new PointPairList();
        ppl.Add(ptA);
        ppl.Add(ptB);

        LineItem myCurve = zedGraphControl1.GraphPane.AddCurve(string.Empty, ppl, Color.Red, SymbolType.Circle);

        // centre of line
        PointPair pt = new PointPair(0.5 * (ptA.X + ptB.X), 0.5 * (ptA.Y + ptB.Y));

        TextObj text = new TextObj("desc", pt.X, pt.Y, CoordType.AxisXYScale, AlignH.Center, AlignV.Center);
        text.ZOrder = ZOrder.A_InFront;

        double dX = ptB.X - ptA.X;
        double dY = ptB.Y - ptA.Y;

        float alfa = (float)(Math.Atan2(dY, dX) * (180.0 / Math.PI));

        text.FontSpec.Angle = alfa;

        zedGraphControl1.GraphPane.GraphObjList.Add(text);

        zedGraphControl1.AxisChange();
        zedGraphControl1.Invalidate();
        zedGraphControl1.Refresh(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-20T20:08:32.263

```
// Call this method from the Form_Load method, passing your ZedGraphControl

public void CreateChart( ZedGraphControl zgc )
{
    GraphPane myPane = zgc.GraphPane;

    // Set the titles and axis labels
    myPane.Title.Text = "Demo of Labeled Points";
    myPane.XAxis.Title.Text = "Time, Seconds";
    myPane.YAxis.Title.Text = "Pressure, Psia";

    // Build a PointPairList with points based on Sine wave
    PointPairList list = new PointPairList();
    const int count = 15;
    for ( int i = 0; i < count; i++ )
    {
        double x = i + 1;

        double y = 21.1 * ( 1.0 + Math.Sin( (double)i * 0.15 ) );

        list.Add( x, y );
    }

    // Hide the legend
    myPane.Legend.IsVisible = false;

    // Add a curve
    LineItem curve = myPane.AddCurve( "label", list, Color.Red, SymbolType.Circle );
    curve.Line.Width = 2.0F;
    curve.Line.IsAntiAlias = true;
    curve.Symbol.Fill = new Fill( Color.White );
    curve.Symbol.Size = 7;

    // Fill the axis background with a gradient
    myPane.Chart.Fill = new Fill( Color.White, Color.FromArgb( 255, Color.ForestGreen ), 45.0F );

    // Offset Y space between point and label
    // NOTE:  This offset is in Y scale units, so it depends on your actual data
    const double offset = 1.0;

    // Loop to add text labels to the points
    for ( int i = 0; i < count; i++ )
    {
        // Get the pointpair
        PointPair pt = curve.Points[i];

        // Create a text label from the Y data value
        TextObj text = new TextObj( pt.Y.ToString( "f2" ), pt.X, pt.Y + offset,
            CoordType.AxisXYScale, AlignH.Left, AlignV.Center );
        text.ZOrder = ZOrder.A_InFront;
        // Hide the border and the fill
        text.FontSpec.Border.IsVisible = false;
        text.FontSpec.Fill.IsVisible = false;
        //text.FontSpec.Fill = new Fill( Color.FromArgb( 100, Color.White ) );
        // Rotate the text to 90 degrees
        text.FontSpec.Angle = 90;

        myPane.GraphObjList.Add( text );
    }

    // Leave some extra space on top for the labels to fit within the chart rect
    myPane.YAxis.Scale.MaxGrace = 0.2;

    // Calculate the Axis Scale Ranges
    zgc.AxisChange();
} 
```

来源：http: //zedgraph.dariowiz.com/index9769.html?title= [Point_Label_Demo](http://zedgraph.dariowiz.com/index9769.html?title=Point_Label_Demo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T18:44:05.960

我有同样的问题。这是我在 VB 中设计的部分解决方案；应该很容易翻译成 C#：

```
' Calc deltas for x and y
Dim dX As Double = ptB.X - ptA.X
Dim dY As Double = ptB.Y - ptA.Y

' compensate delta x for graph resizing, which affects line slopes
Dim resizeCompensation As Double = 1.0 / (myPane.XAxis.Scale.Max - myPane.XAxis.Scale.Min)
dX = dX * resizeCompensation  

' now calculate angle
Dim alfa As Double = Math.Atan2(dY, dX) * (180.0 / Math.PI)
text.FontSpec.Angle = alfa 
```

虽然以上对于我的目的来说工作得很好，但这里可能有一个更全面的解决方案：http: [//sourceforge.net/p/zedgraph/discussion/392232/thread/0d261bc7/](http://sourceforge.net/p/zedgraph/discussion/392232/thread/0d261bc7/)

# android - 带有 onTouch() 或 onClick() 事件的 ScrollView 内的 ImageView

> ID：13763428
> 
> 赞同：0
> 
> 时间：2012-12-07T12:48:42.793
> 
> 标签：android, android-imageview, onclicklistener, ontouchlistener

我有`ImageView`一个`ScrollView`. 是可点击的`ImageView`并打开一个新的`Activity`.

每当我滚动浏览我的 ScrollView 时，首先触摸图像（但还没有释放我的手指）并尝试滚动它会触发我的`onTouch()`or`onClick()`方法（我都尝试过...）

这是我的代码：

```
btnAdd.setOnTouchListener(new OnTouchListener() {
       @Override
       public boolean onTouch(View v, MotionEvent event) {
           Intent intent = new Intent(Intent.ACTION_EDIT);
           startActivity(intent);
           return true;
       }
}); 
```

正如我所说，我也尝试过`onClick()`......

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:25:29.440

当 OnTouchListener 被触发时，它会监听多个动作（Action Down、Action Up 等）并执行它们，因此您应该准确指定何时开始新的活动（在您的情况下是 Action Up）。所以尝试使用这个：

```
 btnAdd.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View view, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_UP){
                Intent intent = new Intent(Intent.ACTION_EDIT);
                startActivity(intent);
            }
            return true;
        }
    }); 
```

# ios5 - 无法使用 ios5 关闭模态视图控制器

> ID：13763431
> 
> 赞同：0
> 
> 时间：2012-12-07T12:48:53.140
> 
> 标签：ios5, ios6

我提出一个控制器来播放视频：

```
 [self presentModalViewController:movieController animated:YES]; 
```

并在完成播放时添加一个观察者：

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(movieFinishedPlayback:) 
name:MPMoviePlayerPlaybackDidFinishNotification object:nil];
    }

    -(void) movieFinishedPlayback:(NSNotification*)notification{
        NSLog(@"........movieFinishedPlayback....... \n ");
        [self dismissModalViewControllerAnimated:YES];
        [[NSNotificationCenter defaultCenter] removeObserver:self name:MPMoviePlayerPlaybackDidFinishNotification object:nil];
    } 
```

这是我的 VideoDetailViewController：

```
#import "VideoDetailViewController.h"
#import "PSStackedView.h"
#import "YunMaoIpadAppDelegate.h"

#define IpadAppDelegate ((YunMaoIpadAppDelegate *)[[UIApplication sharedApplication] delegate])
#define IphoneAppDelegate ((YunMaoIosAppDelegate *)[[UIApplication sharedApplication] delegate])

@interface VideoDetailViewController ()

@end

@implementation VideoDetailViewController

@synthesize video, moviePlayer, collectionsArray;

-(id)initWithVideo:(Video *)theVideo
{
    self = [super initWithNibName:@"VideoDetailViewController" bundle:nil];
    if (self) {
        self.video = theVideo;
    }
    return self;
}
- (void)viewWillDisappear:(BOOL)animated
{
    [moviePlayer pause];
    //[self.navigationController setNavigationBarHidden:false animated:animated];
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated;
{
    [[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationNone];

    [super viewDidDisappear:animated];
}

- (void) viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    self.view.backgroundColor = [UIColor blackColor];
}

- (void) viewDidAppear:(BOOL)animated
{
    //[moviePlayer play];
    //[DejalBezelActivityView removeViewAnimated:YES];
    [super viewDidAppear:animated];
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    [self performSelector:@selector(displayActivityView) withObject:self.moviePlayer.view afterDelay:0.1];

    moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL URLWithString:video.link]];
    [moviePlayer prepareToPlay];

    //[moviePlayer setShouldAutoplay:NO];
    moviePlayer.controlStyle = MPMovieControlStyleFullscreen;
    moviePlayer.scalingMode = MPMovieScalingModeAspectFit;

    if([moviePlayer respondsToSelector:@selector(useApplicationAudioSession)])
    {
        if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
        {
            NSLog(@"iPhone ios5.x");
            [moviePlayer.view setFrame: CGRectMake(0.0f, 0.0f, 480.0f, 320.0f)];
            //moviePlayer.view.transform = CGAffineTransformConcat(moviePlayer.view.transform, CGAffineTransformMakeRotation(M_PI_2));
        }
        else{
            NSLog(@"iPad ios5.x");
            [moviePlayer.view setFrame: CGRectMake(0.0f, 0.0f, 1024.0f, 768.0f)];
            moviePlayer.view.transform = CGAffineTransformConcat(moviePlayer.view.transform, CGAffineTransformMakeRotation(M_PI_2));
            [moviePlayer.view setFrame:[IpadAppDelegate window].bounds];
        }
    }
    else
    {
        if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
        {
            moviePlayer.view.transform = CGAffineTransformConcat(moviePlayer.view.transform, CGAffineTransformMakeRotation(M_PI_2));

            NSLog(@"iPhone ios6.x");
            CGSize result = [[UIScreen mainScreen] bounds].size;
            if(result.height == 480)
            {
                [moviePlayer.view setFrame: CGRectMake(0.0f, 0.0f, 320.0f, 480.0f)];
            }
            if(result.height == 568)
            {
                //moviePlayer.controlStyle = MPMovieControlStyleDefault;
                [moviePlayer.view setFrame:self.view.bounds];
            }
        }
        else{
            NSLog(@"ipad ios 6.x");
            [moviePlayer.view setFrame: CGRectMake(0.0f, 0.0f, 1024.0f, 768.0f)];
            //[moviePlayer.view setFrame:[IpadAppDelegate window].bounds];
        }
    }

    [self.view addSubview:moviePlayer.view];
    [moviePlayer play];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if (interfaceOrientation==UIInterfaceOrientationLandscapeLeft || interfaceOrientation==UIInterfaceOrientationLandscapeRight)
        return YES;
    return NO;
}

- (BOOL)shouldAutorotate{
    return NO;
}

/*
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationLandscapeRight;
}
*/

- (IBAction)displayActivityView
{
    [DejalBezelActivityView activityViewForView:self.moviePlayer.view withLabel:@"节目正在下载中，请稍后..."].showNetworkActivityIndicator = NO;
}

- (void)removeActivityView;
{
    [DejalBezelActivityView removeViewAnimated:YES];
    [[self class] cancelPreviousPerformRequestsWithTarget:self];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T14:00:23.713

这对我有用。

```
[self dismissViewControllerAnimated:NO completion:^{
    [self.view removeFromSuperview];
}]; 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T09:26:41.973

在关闭movieplayer之前，请从superview中`[moviePlayer stop];`删除`movieplayer.view`。之后尝试解散。那可能会解决问题。

# php - GMT 与 PHP 时区的偏移

> ID：13763433
> 
> 赞同：0
> 
> 时间：2012-12-07T12:48:57.397
> 
> 标签：php, timezone, gmt

有没有可能有类似的东西？

```
$offset    = -05:00; 
$timezone  = getTimeZone($offset); //return America/New_York 
date_default_timezone_set($timezone); 
```

如果是的话，DST（Day Saving Light）怎么样？

**编辑**

我试过的是

```
function php_date_default_timezone_set($GMT,$timestamp) { 
              $timezones = array( 
                  '-12:00'=>'Pacific/Kwajalein', 
                  '-11:00'=>'Pacific/Samoa', 
                  '-10:00'=>'Pacific/Honolulu', 
                  '-09:00'=>'America/Juneau', 
                  '-08:00'=>'America/Los_Angeles', 
                  '-07:00'=>'America/Denver', 
                  '-06:00'=>'America/Mexico_City', 
                  '-05:00'=>'America/New_York', 
                  '-04:00'=>'America/Caracas', 
                  '-03:30'=>'America/St_Johns', 
                  '-03:00'=>'America/Argentina/Buenos_Aires', 
                  '-02:00'=>'Atlantic/Azores',
                  '-01:00'=>'Atlantic/Azores', 
                  '+00:00'=>'Europe/London', 
                  '+01:00'=>'Europe/Paris', 
                  '+02:00'=>'Europe/Helsinki', 
                  '+03:00'=>'Europe/Moscow', 
                  '+03:30'=>'Asia/Tehran', 
                  '+04:00'=>'Asia/Baku', 
                  '+04:30'=>'Asia/Kabul', 
                  '+05:00'=>'Asia/Karachi', 
                  '+05:30'=>'Asia/Calcutta', 
                  '+06:00'=>'Asia/Colombo', 
                  '+07:00'=>'Asia/Bangkok', 
                  '+08:00'=>'Asia/Singapore', 
                  '+09:00'=>'Asia/Tokyo', 
                  '+09:00'=>'Australia/Darwin', 
                  '+10:00'=>'Pacific/Guam', 
                  '+11:00'=>'Asia/Magadan', 
                  '+12:00'=>'Asia/Kamchatka' 
              ); 

    date_default_timezone_set($timezones[$GMT]);

    return  date_default_timezone_get();
}  

    echo php_date_default_timezone_set('-05:00',time()); 
   // returns America/New_York 
```

但我不知道这种方式是否正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T12:50:39.800

不，因为不存在这种反向相关性。目前有许多时区有`-05:00`偏移量。这就是为什么您应该使用时区标识符来识别时区，而不是偏移量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-16T19:54:38.333

请原谅我带回一个老问题，但我在使用偏移量时遇到了同样的问题，而是决定使用这个列表。（来自谷歌日历）

不要存储偏移量，而是存储实际名称“America/Phoenix”

当用户选择时区时，这就是我现在所拥有的。其主要时区的完美阵容，以及 PHP 就绪。[http://php.net/manual/en/timezones.php](http://php.net/manual/en/timezones.php)

![时区](../Images/250ed6d7f9a211e440a53e97146cd8f5.png)

```
<select name="timezones">
<option value="Pacific/Midway">(GMT-11:00) Midway</option>
<option value="Pacific/Niue">(GMT-11:00) Niue</option>
<option value="Pacific/Pago_Pago">(GMT-11:00) Pago Pago</option>
<option value="Pacific/Honolulu">(GMT-10:00) Hawaii Time</option>
<option value="Pacific/Rarotonga">(GMT-10:00) Rarotonga</option>
<option value="Pacific/Tahiti">(GMT-10:00) Tahiti</option>
<option value="Pacific/Marquesas">(GMT-09:30) Marquesas</option>
<option value="America/Anchorage">(GMT-09:00) Alaska Time</option>
<option value="Pacific/Gambier">(GMT-09:00) Gambier</option>
<option value="America/Los_Angeles">(GMT-08:00) Pacific Time</option>
<option value="America/Tijuana">(GMT-08:00) Pacific Time - Tijuana</option>
<option value="America/Vancouver">(GMT-08:00) Pacific Time - Vancouver</option>
<option value="America/Whitehorse">(GMT-08:00) Pacific Time - Whitehorse</option>
<option value="Pacific/Pitcairn">(GMT-08:00) Pitcairn</option>
<option value="America/Dawson_Creek">(GMT-07:00) Mountain Time - Dawson Creek</option>
<option value="America/Denver">(GMT-07:00) Mountain Time</option>
<option value="America/Edmonton">(GMT-07:00) Mountain Time - Edmonton</option>
<option value="America/Hermosillo">(GMT-07:00) Mountain Time - Hermosillo</option>
<option value="America/Mazatlan">(GMT-07:00) Mountain Time - Chihuahua, Mazatlan</option>
<option value="America/Phoenix">(GMT-07:00) Mountain Time - Arizona</option>
<option value="America/Yellowknife">(GMT-07:00) Mountain Time - Yellowknife</option>
<option value="America/Belize">(GMT-06:00) Belize</option>
<option value="America/Chicago">(GMT-06:00) Central Time</option>
<option value="America/Costa_Rica">(GMT-06:00) Costa Rica</option>
<option value="America/El_Salvador">(GMT-06:00) El Salvador</option>
<option value="America/Guatemala">(GMT-06:00) Guatemala</option>
<option value="America/Managua">(GMT-06:00) Managua</option>
<option value="America/Mexico_City">(GMT-06:00) Central Time - Mexico City</option>
<option value="America/Regina">(GMT-06:00) Central Time - Regina</option>
<option value="America/Tegucigalpa">(GMT-06:00) Central Time - Tegucigalpa</option>
<option value="America/Winnipeg">(GMT-06:00) Central Time - Winnipeg</option>
<option value="Pacific/Easter">(GMT-06:00) Easter Island</option>
<option value="Pacific/Galapagos">(GMT-06:00) Galapagos</option>
<option value="America/Bogota">(GMT-05:00) Bogota</option>
<option value="America/Cayman">(GMT-05:00) Cayman</option>
<option value="America/Guayaquil">(GMT-05:00) Guayaquil</option>
<option value="America/Havana">(GMT-05:00) Havana</option>
<option value="America/Iqaluit">(GMT-05:00) Eastern Time - Iqaluit</option>
<option value="America/Jamaica">(GMT-05:00) Jamaica</option>
<option value="America/Lima">(GMT-05:00) Lima</option>
<option value="America/Montreal">(GMT-05:00) Eastern Time - Montreal</option>
<option value="America/Nassau">(GMT-05:00) Nassau</option>
<option value="America/New_York">(GMT-05:00) Eastern Time</option>
<option value="America/Panama">(GMT-05:00) Panama</option>
<option value="America/Port-au-Prince">(GMT-05:00) Port-au-Prince</option>
<option value="America/Rio_Branco">(GMT-05:00) Rio Branco</option>
<option value="America/Toronto">(GMT-05:00) Eastern Time - Toronto</option>
<option value="America/Caracas">(GMT-04:30) Caracas</option>
<option value="America/Antigua">(GMT-04:00) Antigua</option>
<option value="America/Asuncion">(GMT-04:00) Asuncion</option>
<option value="America/Barbados">(GMT-04:00) Barbados</option>
<option value="America/Boa_Vista">(GMT-04:00) Boa Vista</option>
<option value="America/Campo_Grande">(GMT-04:00) Campo Grande</option>
<option value="America/Cuiaba">(GMT-04:00) Cuiaba</option>
<option value="America/Curacao">(GMT-04:00) Curacao</option>
<option value="America/Grand_Turk">(GMT-04:00) Grand Turk</option>
<option value="America/Guyana">(GMT-04:00) Guyana</option>
<option value="America/Halifax">(GMT-04:00) Atlantic Time - Halifax</option>
<option value="America/La_Paz">(GMT-04:00) La Paz</option>
<option value="America/Manaus">(GMT-04:00) Manaus</option>
<option value="America/Martinique">(GMT-04:00) Martinique</option>
<option value="America/Port_of_Spain">(GMT-04:00) Port of Spain</option>
<option value="America/Porto_Velho">(GMT-04:00) Porto Velho</option>
<option value="America/Puerto_Rico">(GMT-04:00) Puerto Rico</option>
<option value="America/Santiago">(GMT-04:00) Santiago</option>
<option value="America/Santo_Domingo">(GMT-04:00) Santo Domingo</option>
<option value="America/Thule">(GMT-04:00) Thule</option>
<option value="Antarctica/Palmer">(GMT-04:00) Palmer</option>
<option value="Atlantic/Bermuda">(GMT-04:00) Bermuda</option>
<option value="America/St_Johns">(GMT-03:30) Newfoundland Time - St. Johns</option>
<option value="America/Araguaina">(GMT-03:00) Araguaina</option>
<option value="America/Argentina/Buenos_Aires">(GMT-03:00) Buenos Aires</option>
<option value="America/Bahia">(GMT-03:00) Salvador</option>
<option value="America/Belem">(GMT-03:00) Belem</option>
<option value="America/Cayenne">(GMT-03:00) Cayenne</option>
<option value="America/Fortaleza">(GMT-03:00) Fortaleza</option>
<option value="America/Godthab">(GMT-03:00) Godthab</option>
<option value="America/Maceio">(GMT-03:00) Maceio</option>
<option value="America/Miquelon">(GMT-03:00) Miquelon</option>
<option value="America/Montevideo">(GMT-03:00) Montevideo</option>
<option value="America/Paramaribo">(GMT-03:00) Paramaribo</option>
<option value="America/Recife">(GMT-03:00) Recife</option>
<option value="America/Sao_Paulo">(GMT-03:00) Sao Paulo</option>
<option value="Antarctica/Rothera">(GMT-03:00) Rothera</option>
<option value="Atlantic/Stanley">(GMT-03:00) Stanley</option>
<option value="America/Noronha">(GMT-02:00) Noronha</option>
<option value="Atlantic/South_Georgia">(GMT-02:00) South Georgia</option>
<option value="America/Scoresbysund">(GMT-01:00) Scoresbysund</option>
<option value="Atlantic/Azores">(GMT-01:00) Azores</option>
<option value="Atlantic/Cape_Verde">(GMT-01:00) Cape Verde</option>
<option value="Africa/Abidjan">(GMT+00:00) Abidjan</option>
<option value="Africa/Accra">(GMT+00:00) Accra</option>
<option value="Africa/Bissau">(GMT+00:00) Bissau</option>
<option value="Africa/Casablanca">(GMT+00:00) Casablanca</option>
<option value="Africa/El_Aaiun">(GMT+00:00) El Aaiun</option>
<option value="Africa/Monrovia">(GMT+00:00) Monrovia</option>
<option value="America/Danmarkshavn">(GMT+00:00) Danmarkshavn</option>
<option value="Atlantic/Canary">(GMT+00:00) Canary Islands</option>
<option value="Atlantic/Faroe">(GMT+00:00) Faeroe</option>
<option value="Atlantic/Reykjavik">(GMT+00:00) Reykjavik</option>
<option value="Etc/GMT">(GMT+00:00) GMT (no daylight saving)</option>
<option value="Europe/Dublin">(GMT+00:00) Dublin</option>
<option value="Europe/Lisbon">(GMT+00:00) Lisbon</option>
<option value="Europe/London">(GMT+00:00) London</option>
<option value="Africa/Algiers">(GMT+01:00) Algiers</option>
<option value="Africa/Ceuta">(GMT+01:00) Ceuta</option>
<option value="Africa/Lagos">(GMT+01:00) Lagos</option>
<option value="Africa/Ndjamena">(GMT+01:00) Ndjamena</option>
<option value="Africa/Tunis">(GMT+01:00) Tunis</option>
<option value="Africa/Windhoek">(GMT+01:00) Windhoek</option>
<option value="Europe/Amsterdam">(GMT+01:00) Amsterdam</option>
<option value="Europe/Andorra">(GMT+01:00) Andorra</option>
<option value="Europe/Belgrade">(GMT+01:00) Central European Time - Belgrade</option>
<option value="Europe/Berlin">(GMT+01:00) Berlin</option>
<option value="Europe/Brussels">(GMT+01:00) Brussels</option>
<option value="Europe/Budapest">(GMT+01:00) Budapest</option>
<option value="Europe/Copenhagen">(GMT+01:00) Copenhagen</option>
<option value="Europe/Gibraltar">(GMT+01:00) Gibraltar</option>
<option value="Europe/Luxembourg">(GMT+01:00) Luxembourg</option>
<option value="Europe/Madrid">(GMT+01:00) Madrid</option>
<option value="Europe/Malta">(GMT+01:00) Malta</option>
<option value="Europe/Monaco">(GMT+01:00) Monaco</option>
<option value="Europe/Oslo">(GMT+01:00) Oslo</option>
<option value="Europe/Paris">(GMT+01:00) Paris</option>
<option value="Europe/Prague">(GMT+01:00) Central European Time - Prague</option>
<option value="Europe/Rome">(GMT+01:00) Rome</option>
<option value="Europe/Stockholm">(GMT+01:00) Stockholm</option>
<option value="Europe/Tirane">(GMT+01:00) Tirane</option>
<option value="Europe/Vienna">(GMT+01:00) Vienna</option>
<option value="Europe/Warsaw">(GMT+01:00) Warsaw</option>
<option value="Europe/Zurich">(GMT+01:00) Zurich</option>
<option value="Africa/Cairo">(GMT+02:00) Cairo</option>
<option value="Africa/Johannesburg">(GMT+02:00) Johannesburg</option>
<option value="Africa/Maputo">(GMT+02:00) Maputo</option>
<option value="Africa/Tripoli">(GMT+02:00) Tripoli</option>
<option value="Asia/Amman">(GMT+02:00) Amman</option>
<option value="Asia/Beirut">(GMT+02:00) Beirut</option>
<option value="Asia/Damascus">(GMT+02:00) Damascus</option>
<option value="Asia/Gaza">(GMT+02:00) Gaza</option>
<option value="Asia/Jerusalem">(GMT+02:00) Jerusalem</option>
<option value="Asia/Nicosia">(GMT+02:00) Nicosia</option>
<option value="Europe/Athens">(GMT+02:00) Athens</option>
<option value="Europe/Bucharest">(GMT+02:00) Bucharest</option>
<option value="Europe/Chisinau">(GMT+02:00) Chisinau</option>
<option value="Europe/Helsinki">(GMT+02:00) Helsinki</option>
<option value="Europe/Istanbul">(GMT+02:00) Istanbul</option>
<option value="Europe/Kaliningrad">(GMT+02:00) Moscow-01 - Kaliningrad</option>
<option value="Europe/Kiev">(GMT+02:00) Kiev</option>
<option value="Europe/Riga">(GMT+02:00) Riga</option>
<option value="Europe/Sofia">(GMT+02:00) Sofia</option>
<option value="Europe/Tallinn">(GMT+02:00) Tallinn</option>
<option value="Europe/Vilnius">(GMT+02:00) Vilnius</option>
<option value="Africa/Addis_Ababa">(GMT+03:00) Addis Ababa</option>
<option value="Africa/Asmara">(GMT+03:00) Asmera</option>
<option value="Africa/Dar_es_Salaam">(GMT+03:00) Dar es Salaam</option>
<option value="Africa/Djibouti">(GMT+03:00) Djibouti</option>
<option value="Africa/Kampala">(GMT+03:00) Kampala</option>
<option value="Africa/Khartoum">(GMT+03:00) Khartoum</option>
<option value="Africa/Mogadishu">(GMT+03:00) Mogadishu</option>
<option value="Africa/Nairobi">(GMT+03:00) Nairobi</option>
<option value="Antarctica/Syowa">(GMT+03:00) Syowa</option>
<option value="Asia/Aden">(GMT+03:00) Aden</option>
<option value="Asia/Baghdad">(GMT+03:00) Baghdad</option>
<option value="Asia/Bahrain">(GMT+03:00) Bahrain</option>
<option value="Asia/Kuwait">(GMT+03:00) Kuwait</option>
<option value="Asia/Qatar">(GMT+03:00) Qatar</option>
<option value="Asia/Riyadh">(GMT+03:00) Riyadh</option>
<option value="Europe/Minsk">(GMT+03:00) Minsk</option>
<option value="Europe/Moscow">(GMT+03:00) Moscow+00</option>
<option value="Indian/Antananarivo">(GMT+03:00) Antananarivo</option>
<option value="Indian/Comoro">(GMT+03:00) Comoro</option>
<option value="Indian/Mayotte">(GMT+03:00) Mayotte</option>
<option value="Asia/Tehran">(GMT+03:30) Tehran</option>
<option value="Asia/Baku">(GMT+04:00) Baku</option>
<option value="Asia/Dubai">(GMT+04:00) Dubai</option>
<option value="Asia/Muscat">(GMT+04:00) Muscat</option>
<option value="Asia/Tbilisi">(GMT+04:00) Tbilisi</option>
<option value="Asia/Yerevan">(GMT+04:00) Yerevan</option>
<option value="Europe/Samara">(GMT+04:00) Moscow+00 - Samara</option>
<option value="Indian/Mahe">(GMT+04:00) Mahe</option>
<option value="Indian/Mauritius">(GMT+04:00) Mauritius</option>
<option value="Indian/Reunion">(GMT+04:00) Reunion</option>
<option value="Asia/Kabul">(GMT+04:30) Kabul</option>
<option value="Antarctica/Mawson">(GMT+05:00) Mawson</option>
<option value="Asia/Aqtau">(GMT+05:00) Aqtau</option>
<option value="Asia/Aqtobe">(GMT+05:00) Aqtobe</option>
<option value="Asia/Ashgabat">(GMT+05:00) Ashgabat</option>
<option value="Asia/Dushanbe">(GMT+05:00) Dushanbe</option>
<option value="Asia/Karachi">(GMT+05:00) Karachi</option>
<option value="Asia/Tashkent">(GMT+05:00) Tashkent</option>
<option value="Asia/Yekaterinburg">(GMT+05:00) Moscow+02 - Yekaterinburg</option>
<option value="Indian/Kerguelen">(GMT+05:00) Kerguelen</option>
<option value="Indian/Maldives">(GMT+05:00) Maldives</option>
<option value="Asia/Calcutta">(GMT+05:30) India Standard Time</option>
<option value="Asia/Colombo">(GMT+05:30) Colombo</option>
<option value="Asia/Katmandu">(GMT+05:45) Katmandu</option>
<option value="Antarctica/Vostok">(GMT+06:00) Vostok</option>
<option value="Asia/Almaty">(GMT+06:00) Almaty</option>
<option value="Asia/Bishkek">(GMT+06:00) Bishkek</option>
<option value="Asia/Dhaka">(GMT+06:00) Dhaka</option>
<option value="Asia/Omsk">(GMT+06:00) Moscow+03 - Omsk, Novosibirsk</option>
<option value="Asia/Thimphu">(GMT+06:00) Thimphu</option>
<option value="Indian/Chagos">(GMT+06:00) Chagos</option>
<option value="Asia/Rangoon">(GMT+06:30) Rangoon</option>
<option value="Indian/Cocos">(GMT+06:30) Cocos</option>
<option value="Antarctica/Davis">(GMT+07:00) Davis</option>
<option value="Asia/Bangkok">(GMT+07:00) Bangkok</option>
<option value="Asia/Hovd">(GMT+07:00) Hovd</option>
<option value="Asia/Jakarta">(GMT+07:00) Jakarta</option>
<option value="Asia/Krasnoyarsk">(GMT+07:00) Moscow+04 - Krasnoyarsk</option>
<option value="Asia/Saigon">(GMT+07:00) Hanoi</option>
<option value="Indian/Christmas">(GMT+07:00) Christmas</option>
<option value="Antarctica/Casey">(GMT+08:00) Casey</option>
<option value="Asia/Brunei">(GMT+08:00) Brunei</option>
<option value="Asia/Choibalsan">(GMT+08:00) Choibalsan</option>
<option value="Asia/Hong_Kong">(GMT+08:00) Hong Kong</option>
<option value="Asia/Irkutsk">(GMT+08:00) Moscow+05 - Irkutsk</option>
<option value="Asia/Kuala_Lumpur">(GMT+08:00) Kuala Lumpur</option>
<option value="Asia/Macau">(GMT+08:00) Macau</option>
<option value="Asia/Makassar">(GMT+08:00) Makassar</option>
<option value="Asia/Manila">(GMT+08:00) Manila</option>
<option value="Asia/Shanghai">(GMT+08:00) China Time - Beijing</option>
<option value="Asia/Singapore">(GMT+08:00) Singapore</option>
<option value="Asia/Taipei">(GMT+08:00) Taipei</option>
<option value="Asia/Ulaanbaatar">(GMT+08:00) Ulaanbaatar</option>
<option value="Australia/Perth">(GMT+08:00) Western Time - Perth</option>
<option value="Asia/Dili">(GMT+09:00) Dili</option>
<option value="Asia/Jayapura">(GMT+09:00) Jayapura</option>
<option value="Asia/Pyongyang">(GMT+09:00) Pyongyang</option>
<option value="Asia/Seoul">(GMT+09:00) Seoul</option>
<option value="Asia/Tokyo">(GMT+09:00) Tokyo</option>
<option value="Asia/Yakutsk">(GMT+09:00) Moscow+06 - Yakutsk</option>
<option value="Pacific/Palau">(GMT+09:00) Palau</option>
<option value="Australia/Adelaide">(GMT+09:30) Central Time - Adelaide</option>
<option value="Australia/Darwin">(GMT+09:30) Central Time - Darwin</option>
<option value="Antarctica/DumontDUrville">(GMT+10:00) Dumont D'Urville</option>
<option value="Asia/Magadan">(GMT+10:00) Moscow+08 - Magadan</option>
<option value="Asia/Vladivostok">(GMT+10:00) Moscow+07 - Yuzhno-Sakhalinsk</option>
<option value="Australia/Brisbane">(GMT+10:00) Eastern Time - Brisbane</option>
<option value="Australia/Hobart">(GMT+10:00) Eastern Time - Hobart</option>
<option value="Australia/Sydney">(GMT+10:00) Eastern Time - Melbourne, Sydney</option>
<option value="Pacific/Chuuk">(GMT+10:00) Truk</option>
<option value="Pacific/Guam">(GMT+10:00) Guam</option>
<option value="Pacific/Port_Moresby">(GMT+10:00) Port Moresby</option>
<option value="Pacific/Saipan">(GMT+10:00) Saipan</option>
<option value="Pacific/Efate">(GMT+11:00) Efate</option>
<option value="Pacific/Guadalcanal">(GMT+11:00) Guadalcanal</option>
<option value="Pacific/Kosrae">(GMT+11:00) Kosrae</option>
<option value="Pacific/Noumea">(GMT+11:00) Noumea</option>
<option value="Pacific/Pohnpei">(GMT+11:00) Ponape</option>
<option value="Pacific/Norfolk">(GMT+11:30) Norfolk</option>
<option value="Asia/Kamchatka">(GMT+12:00) Moscow+08 - Petropavlovsk-Kamchatskiy</option>
<option value="Pacific/Auckland">(GMT+12:00) Auckland</option>
<option value="Pacific/Fiji">(GMT+12:00) Fiji</option>
<option value="Pacific/Funafuti">(GMT+12:00) Funafuti</option>
<option value="Pacific/Kwajalein">(GMT+12:00) Kwajalein</option>
<option value="Pacific/Majuro">(GMT+12:00) Majuro</option>
<option value="Pacific/Nauru">(GMT+12:00) Nauru</option>
<option value="Pacific/Tarawa">(GMT+12:00) Tarawa</option>
<option value="Pacific/Wake">(GMT+12:00) Wake</option>
<option value="Pacific/Wallis">(GMT+12:00) Wallis</option>
<option value="Pacific/Apia">(GMT+13:00) Apia</option>
<option value="Pacific/Enderbury">(GMT+13:00) Enderbury</option>
<option value="Pacific/Fakaofo">(GMT+13:00) Fakaofo</option>
<option value="Pacific/Tongatapu">(GMT+13:00) Tongatapu</option>
<option value="Pacific/Kiritimati">(GMT+14:00) Kiritimati</option> 
```

现在在 PHP 中，您可以使用从选择框中存储的值，并直接输入时区集。

```
date_default_timezone_set($time_zone_name); 
```

用户现在将选择他们在本地知道的时区。我知道它可能很多，但是有一些方法可以在没有偏移的情况下做到这一点。

# android - Android 编程 httpclient

> ID：13763434
> 
> 赞同：0
> 
> 时间：2012-12-07T12:48:59.650
> 
> 标签：android, textview, httpclient

我正在使用 Eclipse (Android Developer Tools) 这个页面给了我两个错误，有人可以解释一下该怎么做吗？

多谢！

```
package com.example.myproject;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.entity.BufferedHttpEntity;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.widget.TextView;

public class InternetTest extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_internet_test);

        // Internet test

        HttpGet httppost = new HttpGet("http://myurl.com/test.txt");

        HttpResponse response = httpclient.execute(httppost);
        HttpEntity ht = response.getEntity();

        BufferedHttpEntity buf = new BufferedHttpEntity(ht);

        InputStream is = buf.getContent();

        BufferedReader r = new BufferedReader(new InputStreamReader(is));

        StringBuilder total = new StringBuilder();
        String line;
        while ((line = r.readLine()) != null) {
            total.append(line + "\n");
        }

        TextView.setText(total);

        // test done
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_internetseiten_test, menu);
        return true;
    }

} 
```

错误：

“httpclient 无法解析”

“无法从 TextView 类型对非静态方法 setText(CharSequence) 进行静态引用”

我导入了外部罐子（这些：[http](http://hc.apache.org/downloads.cgi) ://hc.apache.org/downloads.cgi ）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:52:12.150

第一个错误是因为您从未指定是什么而引起`httpClient`的。

```
 HttpClient httpClient = new DefaultHttpClient(params);
    HttpResponse response = httpclient.execute(httppost);
    HttpEntity ht = response.getEntity(); 
```

第二个问题是因为您正在对非静态函数进行静态调用。您必须告诉系统要将文本设置为哪个 TextView。不知道它的名字，我只是大致告诉你它是如何完成的。

```
((TextView) findViewById(R.id.someTextBox)).setText(total); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:51:23.523

在使用它之前初始化httpClient..

```
HttpParams params = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(params, 1000 * 60);
        HttpConnectionParams.setSoTimeout(params, 0);
HttpClient httpClient = new DefaultHttpClient(params); 
```

并从布局中获取文本视图并设置它

```
((TextView) findViewById(R.id.text_view)).setText(total); 
```

# android - 更改文本视图的屏幕位置

> ID：13763436
> 
> 赞同：0
> 
> 时间：2012-12-07T12:49:08.330
> 
> 标签：android, android-layout, position, android-relativelayout, textview

我正在制作一个测验应用程序。为了显示 MCQ 问题，我使用了以下**布局**：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:id="@+id/vg">

    <TextView
        android:id="@+id/question_textView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="41dp"
        android:text="Question"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/option1_textView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_marginRight="62dp"
        android:layout_toLeftOf="@+id/question_textView"
        android:text="Option 1"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/option2_textView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/option1_textView"
        android:layout_alignBottom="@+id/option1_textView"
        android:layout_marginLeft="48dp"
        android:layout_toRightOf="@+id/question_textView"
        android:text="Option 2"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/option4_textView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/option2_textView"
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="22dp"
        android:text="Option 4"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/option3_textView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/option4_textView"
        android:layout_alignBottom="@+id/option4_textView"
        android:layout_alignLeft="@+id/option1_textView"
        android:text="Option 3"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout> 
```

我正在解析 XML 以获取问题、选项和正确答案。当用户为特定问题选择正确的选项时， TextView 将使用下一个问题及其各自的选项进行更新。这就是我的做法：

```
NodeList nl = doc.getElementsByTagName(KEY_MCHOICE);
            // looping through all item nodes <item>
            for ( i = 0; i < nl.getLength();i++) {

                loop_checker=i;
//          while(counter< nl.getLength())
//          {
                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();

                Element e = (Element) nl.item(count_questions);
                // adding each child node to HashMap key => value
                map.put(KEY_MCHOICE, parser.getValue(e, KEY_MCHOICE));
                map.put(KEY_ID, parser.getValue(e, KEY_ID));
                map.put(KEY_QUESTION, parser.getValue(e, KEY_QUESTION));                
                question_view.setText(parser.getValue(e, KEY_QUESTION));

                map.put(KEY_OPTION1, parser.getValue(e, KEY_OPTION1));
                //option1_str =parser.getValue(e, KEY_OPTION1);
                option1.setText(parser.getValue(e, KEY_OPTION1));

                map.put(KEY_OPTION2, parser.getValue(e, KEY_OPTION2));
                option2.setText(parser.getValue(e, KEY_OPTION2));
                //option2_str =parser.getValue(e, KEY_OPTION2);

                map.put(KEY_OPTION3, parser.getValue(e, KEY_OPTION3));
                option3.setText(parser.getValue(e, KEY_OPTION3));
                //option3_str =parser.getValue(e, KEY_OPTION3);

                map.put(KEY_OPTION4, parser.getValue(e, KEY_OPTION4));
                option4.setText(parser.getValue(e, KEY_OPTION4));
                //option4_str =parser.getValue(e, KEY_OPTION4);

                map.put(KEY_ANSWER,  parser.getValue(e, KEY_ANSWER));
//              makeAToast(parser.getValue(e, KEY_ANSWER));
                answer_str =parser.getValue(e, KEY_ANSWER);
                // adding HashList to ArrayList
                menuItems.add(map);
            } 
```

现在，我想做的是，当用户对特定问题给出正确答案并且问题发生变化并且 TextView 也重新定位自己时。我正在提供我想要做什么的图片描述。

假设，这是**第一个问题的布局**：

![第一个问题的布局](../Images/74dcb4438e3f875e600e8265f40bc217.png)

如果用户选择了正确的选项，就会出现下一个问题，**重新定位布局，如下所示**：

![第二题时的布局](../Images/d37a54f54f305c3798018ce2e8b40ee1.png)

我无法实现这种布局重新定位。我应该怎么做才能完成使命？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:55:00.967

我认为您可以尝试扩展`setVisibility(View.GONE)`您的新布局样式！

另一种解决方法是创建具有所需按钮位置的 LayoutParams 对象，并将其应用于 RadioGroup 或 ButtonGroup！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:56:51.067

对于这种行为，拥有 2 种布局将是一个优势。但是，如果这对您不起作用，我建议您考虑将所有 TextViews 放在一个 RelativeLayout 中，然后更新它们的相对位置以及它们各自的边距。

# java - 使用两个不同类型的 Guava ListenableFuture 的结果

> ID：13763443
> 
> 赞同：12
> 
> 时间：2012-12-07T12:49:21.913
> 
> 标签：java, guava, future

我有两个在其他线程上完成的 ListenableFutures。每个未来都是不同的类型，我希望在它们都完成时使用它们的两个结果。

有没有一种优雅的方式来使用番石榴来处理这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-14T20:41:06.460

如果您想要某种类型的安全性，您可以执行以下操作：

```
class Composite {
  public A a;
  public B b;
}

public ListenableFuture<Composite> combine(ListenableFuture<A> futureA, 
                                           final ListenableFuture<B> futureB) {

  return Futures.transform(futureA, new AsyncFunction<A, Composite>() {
    public ListenableFuture<Composite> apply(final A a) throws Exception {
      return Futures.transform(futureB, new Function<B, Compisite>() {
        public Composite apply(B b) {
          return new Composite(a, b);
        }
      }
    } 
  }

}

ListenableFuture<A> futureA = ...
ListenableFuture<B> futureB = ...

ListenableFuture<Composite> result = combine(futureA, futureB); 
```

在这种情况下，如果您愿意，`Composite`可以`Pair<A, B>`来自 Apache Commons。

此外，任何一个未来的失败都将导致组合未来的失败。

另一个解决方案是看看Spotify 团队的[Trickle](https://github.com/spotify/trickle)。GitHub README 有一个示例，它显示了类似问题的解决方案。

毫无疑问，还有其他解决方案，但这是我脑海中浮现的解决方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T13:07:35.470

```
Runnable listener = new Runnable() {
    private boolean jobDone = false;

    @Override
    public synchronized void run() {
        if (jobDone || !(future1.isDone() && future2.isDone())) {
            return;
        }
        jobDone = true;
        // TODO do your job
    }
};
future1.addListener(listener);
future2.addListener(listener); 
```

不是很优雅，但应该做的工作。

或者，更优雅，但你需要演员表：

```
ListenableFuture<List<Object>> composedFuture = 
    Futures.allAsList(future1, future2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-20T10:12:24.750

从 Guava v20.0 开始，您可以使用：

```
ListenableFuture<CombinedResult> resultFuture =
   Futures.whenAllSucceed(future1, future2)
       .call(callableThatCombinesAndReturnsCombinedResult, executor); 
```

在此处查看[java 文档示例](https://google.github.io/guava/releases/21.0/api/docs/com/google/common/util/concurrent/Futures.FutureCombiner.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T16:31:02.867

如果你想要一些类型安全，你可以使用`EventBus`姐妹 Guava`com.google.common.eventbus`包中的 2 个不同的独立任务的结果

例如，假设你们中的一个`Futures`返回`Integer`，另一个返回`Double`。

首先，创建一个累加器（其他名称*builder*、*collector*等）类，您将使用 EventBus 将其注册为事件接收器。如您所见，它确实是一个 POJO，它将处理`Integer`和`Double`事件

```
class Accumulator
{
    Integer intResult;
    Double  doubleResult;

    @Subscribe // This annotation makes it an event handler
    public void setIntResult ( final Integer val )
    {
        intResult = val;
    }

    @Subscribe
    public void setDoubleResult ( final Double val )
    {
        doubleResult = val;
    }
} 
```

这是将采用 2 个期货并将它们组合成一个累加器的方法的实现。

```
final ListenableFuture< Integer > future1 = ...;
final ListenableFuture< Double > future2 = ...;

final ImmutableList< ListenableFuture< ? extends Object> > futures =
    ImmutableList.< ListenableFuture<? extends Object> >of( future1, future2 );

final ListenableFuture< Accumulator > resultFuture =
    Futures.transform(
        // If you don't care about failures, use allAsList
        Futures.successfulAsList( futures ),
        new Function< List<Object>, Accumulator > ( )
        {
            @Override
            public Accumulator apply ( final List< Object > input )
            {
                final Accumulator accumulator = new Accumulator( );

                final EventBus eventBus = new EventBus( );
                eventBus.register( accumulator );

                for ( final Object cur: input )
                {
                    // Failed results will be set to null
                    if ( cur != null )
                    {
                        eventBus.post( cur );
                    }
                }

                return accumulator;
            }
        }
    );

final Accumulator accumulator = resultFuture.get( ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-23T20:31:35.780

这是一个简单的示例，它将执行添加 2 个可侦听的期货：

```
//Asynchronous call to get first value
final ListenableFuture<Integer> futureValue1 = ...;

//Take the result of futureValue1 and transform it into a function to get the second value
final AsyncFunction<Integer, Integer> getSecondValueAndSumFunction = new AsyncFunction<Integer, Integer>() {
    @Override
    public ListenableFuture<Integer> apply(final Integer value1) {

        //Asynchronous call to get second value
        final ListenableFuture<Integer> futureValue2 = ...;

        //Return the sum of the values
        final Function<Integer, Integer> addValuesFuture = new Function<Integer, Integer>() {
            @Override
            public Integer apply(Integer value2) {

                Integer sum = value1 + value2;
                return sum;
            }               
        };              

        //Transform the second value so its value can be added to the first
        final ListenableFuture<Integer> sumFuture = Futures.transform(futureValue2, addValuesFuture);   

        return sumFuture;
    }
};

final ListenableFuture<Integer> valueOnePlusValueTwo = Futures.transform(futureValue1, getSecondValueAndSumFunction); 
```

# python - 用于线程的python看门狗

> ID：13763446
> 
> 赞同：0
> 
> 时间：2012-12-07T12:49:36.023
> 
> 标签：python, multithreading

我正在编写简单的应用程序，它从文件中读取（大约一百万）行，将这些行复制到列表中，如果下一行与上一行不同，则它运行一个线程，以对该列表执行一些工作。线程作业基于 tcp 套接字，通过 telnet lib 发送和接收命令。

有时我的应用程序挂起并且什么也不做。我包装到 try-except 语句中的所有 telnet 操作，以及对套接字的读取和写入都有超时。

我考虑过编写看门狗，它会在挂起条件下执行 sys.exit() 或类似的操作。但是，现在我正在考虑如何创建它，但仍然不知道如何去做。所以如果你能追踪到我，那就太好了。

对于该文件，我正在创建 40 个线程。伪代码看起来：

```
lock = threading.Lock()
no_of_jobs = 0

class DoJob(threading.Thread):
    def start(self, cond, work):
        self.work = work
        threading.Thread.start(self)
    def run(self)
        global lock
        global no_of_jobs
        lock.acquire()
        no_of_jobs += 1
        lock.release()

        # do some job, if error or if finished, decrement no_of_jobs under lock
        (...)
main:
#starting conditions:
with open(sys.argv[1]) as targetsfile:
    head = [targetsfile.next() for x in xrange(1)]
    s = head[0]

    prev_cond = s[0]
    work = []

for line in open(sys.argv[1], "r"):
    cond = line([0])
    if prev_cond != cond:
       while(no_of_jobs>= MAX_THREADS):
           time.sleep(1)

       DoJob(cond, work)
       prev_cond = cond
       work = None
       work = []
     work.append(line)

#last job:
       DoJob(cond, work)

while threading.activeCount() > 1:
    time.sleep(1) 
```

最好的问候J

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:01:28.843

我过去曾成功使用过如下代码（来自我编写的 python 3 程序）：

```
import threading

def die():
    print('ran for too long. quitting.')
    for thread in threading.enumerate():
            if thread.isAlive():
                    try:
                            thread._stop()
                    except:
                            pass
    sys.exit(1)

if __name__ == '__main__':
    #bunch of app-specific code...

    # setup max runtime
    die = threading.Timer(2.0, die) #quit after 2 seconds
    die.daemon = True
    die.start()

    #after work is done
    die.cancel() 
```

# php - 在 Laravel 中使用语言路由 URL

> ID：13763447
> 
> 赞同：1
> 
> 时间：2012-12-07T12:49:38.940
> 
> 标签：php, routing, routes, url-routing, laravel

我想在我的路线中添加本地化信息。

目前我的路线定义是：

```
 Route::controller('browse');
    Route::controller('search');
    Route::controller('support');
    Route::controller('filter'); 
```

我想将 URL 从 更改`/url/browse`为`/url/en/browse`等。

如果 URL 中缺少语言，则应用程序应使用默认语言重定向到相同的路由。这意味着访问旧的`/url/browse`将重定向到`/url/default/browse`.

我试图用过滤器制作或找到一些简单的解决方案，但没有成功。感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:13:09.513

尝试在配置中使用默认应用程序语言和支持的语言数组。

如果您将一种语言置于受支持的语言中，则以该段开头的任何路由都将设置当前语言，并将其视为根 URL。

与您的要求的一个区别是默认语言将被接受，而不是重定向，而不是 url 中的语言。

**编辑：**可以帮助您进行重定向的过滤器。

```
Route::filter('pattern: *', array('name' => 'langredirect', function()
{
    $uri = Request::server('request_uri');
    $segments = explode('/', $uri);
    if ( ! array_get(Config::get('application.languages'), $segments[1]) )
    {
        return Redirect::to(URL::base() . '/' . Config::get('application.language') . $uri);
    }
})); 
```

# objective-c - 如何从同一个 .plist 填充多个表视图部分

> ID：13763448
> 
> 赞同：1
> 
> 时间：2012-12-07T12:49:41.913
> 
> 标签：objective-c, ios, uitableview

抱歉，如果这已经讨论过了，我找不到我想要的东西..

我有一个 .plist 文件，其中包含 2 个数组，这些数组完全按照我希望在表格视图中拆分的部分进行拆分。

将数组放入表格视图中没有问题，但我不知道如何告诉应用程序我想要第一部分中的一个数组和第二部分中的第二个数组。

我目前将数组放入表中的代码是这样的（它工作正常）：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    //Create string with reference to the prototype cell created in storyboard
    static NSString *CellIdentifier = @"PlayerNameCell";

    //Create table view cell using the correct cell type
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier      forIndexPath:indexPath];

    //Create a dictionary containing the player names
    NSDictionary *players = (NSDictionary*) [[self Squad] objectAtIndex:[indexPath row]];

    //Set the cell text to the player name
    [[cell textLabel] setText:(NSString*)[players valueForKey:@"PlayerFullName"]];

    //Set the cell detail text to the squad number
    [[cell detailTextLabel] setText:(NSString*)[players valueForKey:@"PlayerSquadNumber"]];

    return cell;
} 
```

但现在我有另一个表格视图，我需要 2 个部分，每个部分从不同的数组读取。

任何帮助将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:55:08.343

好的，所以您在顶层有 2 个数组，每个数组都包含数组，对吧？

你有几个方法需要调整。返回表视图中部分数量的顶级数组的数量。在 cellForRowAtIndexPath: 中，为正确的部分/行返回正确的对象。就像是

`[[sectionsArray objectAtIndex:indexPath.section] objectAtIndex:indexPath.row]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:10:43.907

只需执行以下操作：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)aTableView
{
    return 2;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"PlayerNameCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    if( cell == nil ){
        UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
    }

    if( indexPath.section == 0 ){
        NSDictionary *players = (NSDictionary*) [self.array1 objectAtIndex:indexPath.row];
        cell.textLabel.text = (NSString*)[players valueForKey:@"PlayerFullName"];
        cell.detailTextLabel.text = (NSString*)[players valueForKey:@"PlayerSquadNumber"];
    } else {
        NSDictionary *players = (NSDictionary*) [self.array2 objectAtIndex:indexPath.row];
        cell.textLabel.text = (NSString*)[players valueForKey:@"PlayerFullName"];
        cell.detailTextLabel.text = (NSString*)[players valueForKey:@"PlayerSquadNumber"];
    }

    return cell;
} 
```

将节数设置为 2。对于每个节，使用 [self.array2 objectAtIndex:indexPath.row] 获取不同的值。

我不知道您如何将 plist 保存到 2 个数组中，但如果您需要帮助，请告诉我。

# python - 在 Django 的 ManyToManyField 中缓存

> ID：13763455
> 
> 赞同：3
> 
> 时间：2012-12-07T12:50:16.020
> 
> 标签：python, django, many-to-many, manytomanyfield, django-orm

我在 Django 中遇到了一些缓存问题。到目前为止，我仅在运行 testsuite 时才看到此问题。问题是有时（这似乎总是在第二次调用代码时发生），Django 不会更新它的缓存或者它变得不一致。

经过一些调试的提取代码是：

```
class Source(models.Model):
    name = models.CharField(max_length = 50)
    quality = models.IntegerField(default = 0)

class Reference(models.Model):
    url = models.URLField()
    source = models.ForeignKey(Source)

    class Meta:
        ordering = ['-source__quality']

class Issue(models.Model):
    references = models.ManyToManyField(Reference)
    master = models.ForeignKey(Reference, related_name = 'mastered_issue_set')

def auto_create(instance):
    issue = Issue.objects.create(master = instance)
    print issue.references.count(), issue.references.all()
    issue.references.add(instance)
    print issue.references.count(), issue.references.all() 
```

在第一次调用时，我正确地得到以下输出：

```
0 []
1 [<Reference: test>] 
```

然而，在第二次调用 to 时`auto_create`，Django 认为有一个参考，但它没有给我：

```
0 []
1 [] 
```

这种行为当然会破坏进一步的代码。知道这里可能出了什么问题，或者至少如何调试它？

PS：看起来`Reference`上课订购是造成这种情况的原因。但我仍然不清楚为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:54:40.983

我无法用 sqlite3 重现。难道是`Reference`传入的实例没有保存？以下运行没有打嗝：

```
def auto_create(instance):
    issue = Issue.objects.create(master = instance)
    print issue.references.count(), issue.references.all()
    assert issue.references.count()==0, "initial ref count is not null"
    assert len(issue.references.all())==0, "initial ref array is not empty"
    issue.references.add(instance)
    print issue.references.count(), issue.references.all()
    assert issue.references.count()==1, "ref count is not incremented"
    assert len(issue.references.all())==1, "initial ref array is not populated"

def test_auto():
    s = Source()
    s.save()
    r = Reference(source=s)
    r.save()
    auto_create(r) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T08:11:46.237

最后我找到了导致这个问题的原因。这是我自己的缓存代码，而不是 Django 的。

我有自定义源管理器，它返回并缓存了一些标准源：

```
class SourceManager(models.Manager):
    url_source = None
    def get_generic(self):
        if self.url_source is None:
            self.url_source, created = self.get_or_create(name = 'URL', quality = 0)
        return self.url_source

class Source(models.Model):
    name = models.CharField(max_length = 50)
    quality = models.IntegerField(default = 0)

    objects = SourceManager() 
```

这在应用程序中工作得非常好——一旦创建了源，管理器就会记住它的存在，因为源在其生命周期内不会改变。但是在测试中它们消失了，因为整个测试在单个事务中运行然后恢复。

我觉得奇怪的是，它`models.ForeignKey`并没有抱怨得到不存在的对象，但后来出现了错误，而`source__quality`作为底层 JOIN SELECT 排序时找不到匹配的`Source`对象。

# c# - 如何“连接”或“组合”或“加入”一系列“二进制”序列化字节数组？

> ID：13763456
> 
> 赞同：2
> 
> 时间：2012-12-07T12:50:17.240
> 
> 标签：c#, sockets, bytearray, byte

> **可能重复：**
> [从套接字接收的流是否仅限于单个发送命令？](https://stackoverflow.com/questions/3252039/is-the-received-stream-from-a-socket-limited-to-a-single-send-command)

注意：我认为这个问题非常复杂（希望不是你们，这就是我在这里问的原因哈哈），我尽我所能尽可能简单明了地解释它。

在我的应用程序中，我不断在固定大小的缓冲区中接收字节数组。

我收到的这些字节数组系列已被“二进制”序列化。

但是，有时接收到的字节数组会大于固定大小的缓冲区，因此我需要将当前接收到的字节数组存储到容器中并再次循环以接收剩余的字节数组。

我现在的问题是如何“连接”或“组合”或“加入”我收到的所有“批次”字节数组（并存储在一个容器中，可能是一个字节数组队列）以形成一个单字节数组，然后反序列化它们？

```
int bytesRead = client.EndReceive(ar);
if (bytesRead > 0)
    {
        // There might be more data, so store the data received so far.
        // If the buffer was not filled, I have to get the number of bytes received as Thorsten Dittmar was saying, before queuing it
        dataReceivedQueue.Enqueue(state.buffer);

        // Get the rest of the data.
        client.BeginReceive(state.buffer, 0, StateObject.BufferSize, 0,
        new AsyncCallback(ReceiveCallback_onQuery), state);
    }
else
{
    // All the data has arrived; put it in response.
    response_onQueryHistory = ByteArrayToObject(functionThatCombinesBytes(dataReceivedQueue));

    // Signal that all bytes have been received.
    receiveDoneQuery.Set();
} 
```

state.buffer 是接收数据的缓冲区。buffer 是一个大小为 4096 的字节数组。 state 是 StateObject 类型。

ByteArrayToObject(byte []) 负责反序列化接收到的数据并将其转换回其对象形式

functionThatCombinesBytes(Queue) 此函数将接收一个字节队列并将所有字节“组合”成一个字节数组

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T12:57:45.383

仅仅因为您`BeginReceive`使用特定大小的缓冲区进行调用，并不意味着它一定会完全填满缓冲区，因此很可能您的一些排队缓冲区实际上只会部分填充接收到的数据，其余部分是零，如果您只是将它们连接在一起，这几乎肯定会破坏您的组合流，因为您还没有存储实际读入缓冲区的字节数。您似乎每次都在重用相同的缓冲区，因此您只会用新数据覆盖已读取的数据。

因此，我建议用 , 替换你`dataReceivedQueue`的`MemoryStream`，并使用类似的东西：

```
if (bytesRead > 0)
    {
        // There might be more data, so store the data received so far.
        memoryStream.Write(state.buffer, 0, bytesRead);

        // Get the rest of the data.
        client.BeginReceive(state.buffer, 0, StateObject.BufferSize, 0,
        new AsyncCallback(ReceiveCallback_onQuery), state);
    }
else
{
    // All the data has arrived; put it in response.
    response_onQueryHistory = ByteArrayToObject(memoryStream.ToArray());

    // Signal that all bytes have been received.
    receiveDoneQuery.Set();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T13:10:00.783

首先，除非您`dataReceivedQueue`的类型实现自己的（或覆盖`Queue`）`Enqueue`方法，否则每次调用`state.buffer`都会重写您的方法。`client.BeginReceive`

您可以简单地`MemoryStream`向您的成员添加一个成员，`StateObject`并在它们到来时向其附加字节：

```
state.rawData.Seek(0, SeekOrigin.End);
state.rawData.Write(state.buffer, 0, bytesRead); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T12:56:11.753

首先，您不仅需要存储字节数组，还需要存储数组中实际有效的字节数。例如，每次接收可能不会完全填满缓冲区，因此会返回字节数（`bytesRead`在您的代码中）。

如果你有这个，你可以通过总结每个“批次”接收到的字节数来计算最终缓冲区的大小。

之后，您可以 - 在循环中 - 使用`Array.Copy`将“批次”复制到具有指定长度的指定位置到目标数组中。

例如，这可能如下所示：

```
// Batch is a class that contains the batch byte buffer and the number of bytes valid
int destinationPos = 0;
byte[] destination = new byte[<number of bytes in total>];
foreach (Batch b in batches)
{
    Array.Copy(b.Bytes, 0, destination, destinationPos, b.ValidLength);
} 
```

# sql - 使用法语字符的 Sybase SQL

> ID：13763466
> 
> 赞同：0
> 
> 时间：2012-12-07T12:51:11.853
> 
> 标签：sql, character, sybase

我有一个本地 Sybase 数据库。这是我电脑上的一个 dbf 文件。此 Sybase 数据库保存带有法语字符的字符串值，例如“é”。
我遇到的问题是我在字符串中找不到任何具有“é”字符的值。这些值显示在表中。我知道这一点，因为当我不应用任何限制并选择所有记录时，我可以看到在其字符串中包含“é”字符的值。

例子：

```
Select Column from SybasteTable
where Column = 'Fench é letters' 
```

如果我应用此限制，即使此列存在记录，也找不到任何记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:08:32.860

你的问题对我来说并不完全清楚。但是，如果我没记错的话，您正在寻找一种方法来选择其中包含 é 字符的所有行。
如果是这种情况，请尝试此查询

```
SELECT [columnName] FROM [tableName]
WHERE [columName] SIMILAR TO '[a-e]' 
```

其中 [columnName] 是列的名称， [tableName] 是表的名称

如果我误解了你的问题，而你正在寻找别的东西。你能否澄清你的问题或改写它。

编辑：用 SIMILAR TO 替换 like 子句，它应该得到所有重音字符，包括 a - e。

# c# - 如何在 Windows 8 应用程序中获取有关处理器架构的信息

> ID：13763468
> 
> 赞同：1
> 
> 时间：2012-12-07T12:51:24.050
> 
> 标签：c#, windows-8, windows-runtime, windows-store-apps

我需要获取有关我的应用程序是在 x86、x64 还是 ARM 设备上运行的信息。

有什么方法可以通过 Windows 运行时 API 在 Windows 8 应用程序中获取此信息。

谢谢

//米罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:57:46.150

您可以[`GetNativeSystemInfo`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms724340.aspx)从 WinRT 应用程序调用。这会告诉您底层设备的架构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:00:19.517

在应用程序运行时，转到任务管理器并选择应用程序。然后右键单击并选择文件位置。如果它安装在*程序文件（x86）*文件夹中，则它是一个 32 位应用程序。否则它是一个 x64 位应用程序。

# css - 不断显示的 HTML5 输入占位符（即使在键入时？）

> ID：13763470
> 
> 赞同：2
> 
> 时间：2012-12-07T12:51:27.400
> 
> 标签：css, forms, html, input

可以像下面的屏幕截图那样做吗？输入是数字类型，“px”是输入自己自动添加的（不能更改）。

![在此处输入图像描述](../Images/043b0f9017f9047d41224941ad6ba6bb.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T12:53:21.197

`span`您可以使用右侧具有文本的元素覆盖您的输入`px`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T12:59:01.610

它不是占位符。占位符仅用于向用户指示预期的输入类型。

你可以：

1.  使用JS检查用户值并在字符串中添加“px”，
2.  创建一个“px”的小矢量图像，并将其设置为位于右侧的文本框背景。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T13:07:31.267

您可以通过 document.getElementById 获取输入值，然后将“px”添加到该值中。最后，您可以在输入中设置该值。

# php - Zend 2.0：创建表单元素时出现 500 错误

> ID：13763471
> 
> 赞同：0
> 
> 时间：2012-12-07T12:51:27.383
> 
> 标签：php, zend-framework2, zend-form

我正在学习 Zend Framework (2.0)，我一直在创建表单。这是我使用的代码（在控制器内部）：

```
use Zend\Form\Element;
use Zend\Form\Form; 
```

...

```
public function indexAction() 
{
    $element = new Element\Text('name');
    //Nothing else    
} 
```

它总是给出 505 错误，但如果我注释掉“$element ...”行，那么它就可以工作（所以问题一定存在）。

有人能指出我忽略了什么吗？

另外，正如我所见，创建表单的方法太多了。例如，我尝试过：

```
 private function getSignupForm() {
//Create Form
        $form = new Zend_Form();
        $form->setAction('success');
        $form->setMethod('post');
        $form->setAttrib('sitename', 'mysite');
//Add Elements
//Create Username Field.
        $form->addElement('text', 'username');
        $usernameElement = $form->getElement('username');
        $usernameElement->setLabel('Username:');
        $usernameElement->setOrder(1)->setRequired(true);

        return $form;
} 
```

这样，它起作用了，但这不是教程所说的方式[link](http://framework.zend.com/manual/2.0/en/user-guide/forms-and-actions.html)。那么我应该以哪种方式写呢？

谢谢。

# php - jquery自动完成额外参数不起作用

> ID：13763476
> 
> 赞同：0
> 
> 时间：2012-12-07T12:51:49.527
> 
> 标签：php, jquery, ajax, jquery-autocomplete

**JS**

```
$('input.completeme').each(function() {
    $(this).autocomplete({
            source: function(request, response) {
                $.ajax({ url: '<?=base_url()?>patients/autocomplete',
                data: { 'term': this.term},
                extraParams: { format: this.element.attr('name') },
                dataType: "json",
                type: "POST",
                success: function(data){
                    response(data);
                }
            });
        },
        minLength: 2
});
}); 
```

HTML

```
<input type="text" name="patient_name" value="Patient name" class=completeme />
<input type="text" name="patient_id" value="ID" class=completeme /> 
```

不管我多么努力，它仍然只发送“term” var 到发布页面，并且它不发送 extaparameter（我想将输入名称也发送到 php）

* * *

**我想要的是**

自动完成将 2 个变量发送到我的 php 文件 $term='自动完成搜索' 和 $name="输入名称，以便我的 php 可以知道它完成的确切字段"

**怎么了**

页面运行正常的萤火虫显示没有错误但是当我检查 POST 标头时它只发送 Term var

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:01:02.103

extraParams 是 jQuery 自动完成的选项，但您将此选项传递给另一个函数 — jQuery.ajax()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:03:35.307

```
$('input.completeme').each(function() {
    $(this).autocomplete({
            source: function(request, response) {
                $.ajax({ url: '<?=base_url()?>patients/autocomplete',
                data: { 'term': this.term,'name': this.element.attr('name') },
                dataType: "json",
                type: "POST",
                success: function(data){
                    response(data);
                }
            });
        },
        minLength: 2
});
}); 
```

终于工作了：D谢谢大家

# ruby-on-rails - 茉莉花安装错误（Rails 3.2.8）

> ID：13763478
> 
> 赞同：2
> 
> 时间：2012-12-07T12:51:58.290
> 
> 标签：ruby-on-rails, ruby, jasmine

我正在尝试在 RoR 3.2.8、Ruby 1.9.3、OS Linux Mint 13 Mate 上为 Jasmine 初始化一个项目。希望得到您的帮助。

```
rails g jasmine:install 
```

之后我得到一个错误：

```
/home/shults/.rvm/gems/ruby-1.9.3-p286/gems/jasmine-rails-0.2.2/config/initializers/sprockets.rb:6:in `<top (required)>': uninitialized constant Jasmine::Config (NameError)
from /home/shults/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.8/lib/rails/engine.rb:588:in `block (2 levels) in <class:Engine>'
from /home/shults/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.8/lib/rails/engine.rb:587:in `each'
from /home/shults/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.8/lib/rails/engine.rb:587:in `block in <class:Engine>'
from /home/shults/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `instance_exec'
from /home/shults/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `run'
from /home/shults/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.8/lib/rails/initializable.rb:55:in `block in run_initializers'
from /home/shults/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `each'
from /home/shults/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `run_initializers'
from /home/shults/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.8/lib/rails/application.rb:136:in `initialize!'
from /home/shults/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
from /home/shults/rails/developers/config/environment.rb:5:in `<top (required)>'
from /home/shults/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.8/lib/rails/application.rb:103:in `require_environment!'
from /home/shults/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.8/lib/rails/commands.rb:25:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

# java - 如何在 Java 中禁用这个基于聊天的屏幕锁定应用程序中的键

> ID：13763482
> 
> 赞同：1
> 
> 时间：2012-12-07T12:52:11.297
> 
> 标签：java, windows

我编写了这段代码来制作计算机实验室应用程序来监控学生。这里屏幕锁定工作但禁用键不起作用我在这里尝试使用机器人

如何运行循环以连续收听消息并检查 Screenlocker 的状态以在 Studentchat.java 中锁定/解锁屏幕

```
 package org;

import java.awt.AWTException;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Font;
import java.awt.GraphicsDevice;
import java.awt.GraphicsEnvironment;
import java.awt.Robot;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JWindow;

@SuppressWarnings("serial")
public class ScreenLocker extends JWindow implements KeyListener {

    private boolean locked;

    public ScreenLocker() {
        super();        
        this.locked = false;
        JLabel label = new JLabel("Your Screen is Locked by your Teacher", JLabel.CENTER);
        label.setFont(new Font("Serif", Font.PLAIN, 30));
        JPanel panel =(JPanel) getContentPane();
        panel.setBackground(Color.WHITE);
        panel.add(label, BorderLayout.CENTER);
        setFocusTraversalKeysEnabled(false);
    }

    public synchronized void setLocked(boolean lock) throws AWTException, InterruptedException {
        GraphicsEnvironment ge = GraphicsEnvironment
                .getLocalGraphicsEnvironment();
        GraphicsDevice gd = ge.getDefaultScreenDevice();        
        if (lock) {
            setAlwaysOnTop(true);
            this.setVisible(true);                      
            gd.setFullScreenWindow(this);
            this.locked = true;
            Robot robot = new Robot();
            releaseKeys(robot);
            kill("explorer.exe");
            kill("taskmgr.exe");
        } else {
            gd.setFullScreenWindow(null);
            this.setVisible(false);
            this.locked = false;
            restar("taskmgr.exe");
            restar("explorer.exe");
            this.dispose();
        }
    }

    public boolean isLocked() {
        return locked;
    }

    private void kill(String string) {
        try {
          Runtime.getRuntime().exec("taskkill /F /IM " + string).waitFor();
        } catch (Exception e) {
        }
    }
    private void releaseKeys(Robot robot) {
        robot.keyRelease(17);
        robot.keyRelease(18);
        robot.keyRelease(127);
        robot.keyRelease(524);
        robot.keyRelease(9);
    }
    private void restar(String string) {
        try {
          Runtime.getRuntime().exec(string).waitFor();
        } catch (Exception e) {
        }
    }
    @Override
    public void keyPressed(KeyEvent e) {
        e.consume();        
    }
    @Override
    public void keyReleased(KeyEvent e) {
        e.consume();        
    }
    @Override
    public void keyTyped(KeyEvent e) {
        e.consume();        
    }   
}
package org;

import java.awt.*;
import java.awt.event.*;
import java.io.*;
import java.net.*;
import javax.swing.*;

@SuppressWarnings("serial")
public class StudentChat extends JFrame implements Runnable
{
    private TextField tf = new TextField();
    private JTextArea ta = new JTextArea(10,20);
    private Socket socket;
    private DataOutputStream dout;
    private DataInputStream din;
    private String cmdmsg = null;
    public StudentChat()
    {
        ta.setLineWrap(true);
        ta.setEditable(false);
        ta.setForeground(Color.blue);
        JScrollPane scp = new JScrollPane(ta, JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
        String host = "192.168.1.235";
        int port = 5000;
        setLayout( new BorderLayout() );
        setSize(400, 200);
        setTitle("Student Chat Application");
        add( "South", tf );
        add( "Center", scp );
        tf.addActionListener( new ActionListener()
        {
            public void actionPerformed( ActionEvent e )
            {
                processMessage( e.getActionCommand() );
            }
        } );
        try 
        {
            socket = new Socket( host, port );
            //System.out.println( "connected to "+socket );         
            ta.append("connected to "+socket.getInetAddress().getHostName()+"\n");
            din = new DataInputStream( socket.getInputStream() );
            dout = new DataOutputStream( socket.getOutputStream() );
            new Thread( this ).start();
        } catch( IOException ie ) {}
    }
    private void processMessage( String message ) {
        try {
            String user = System.getProperty("user.name");
            dout.writeUTF(user+" :"+message);
            tf.setText( "" );
        } catch( IOException ie ) {}
    }

    public void run()
    {       
        try
        {
            while (true)
            {
                ScreenLocker sl = new ScreenLocker();                               
                String message = din.readUTF();
                if(message.equals("Teacher: "+System.getProperty("user.name")+"lock"))
                {                   
                    sl.setLocked(true);
                }
                if(message.equals("Teacher: "+System.getProperty("user.name")+"unlock"))
                {           
                    sl.setLocked(false);
                }
                if(message.indexOf('>')>0)
                {
                    cmdmsg = message.substring(0, message.indexOf('>'));
                    if(cmdmsg.equals("Teacher: "+System.getProperty("user.name")+"cmd"))
                    {
                        String cmd = message.substring(message.indexOf('>')+1);
                        try
                        {
                            Runtime.getRuntime().exec(cmd); 
                        }
                        catch (Exception e) {}
                    }
                }               
                ta.append( message+"\n" );              
            }
            } catch( IOException ie ) {}     
              catch (AWTException e)
              {
                e.printStackTrace();
              }
             catch (InterruptedException e)
             {
               e.printStackTrace();
             }
    }

    public static void main(String args[])
    {
        new StudentChat().setVisible(true);
    }   
} 
```

# android - 如何在 Android 中将图像嵌入到电子邮件正文？

> ID：13763483
> 
> 赞同：0
> 
> 时间：2012-12-07T12:52:17.267
> 
> 标签：android, android-intent

我想将图像嵌入电子邮件正文。如何做到这一点。我找到了很多但仍然无法获得解决方案。是否可以将图像添加到电子邮件正文？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:00:20.280

使用下面的代码

```
Intent attachmentIntent = new Intent(Intent.ACTION_SEND);
attachmentIntent.setType("image/*");
attachmentIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("your file address"));
startActivity(attachmentIntent); 
```

# php - 是否可以基于 URL 的所有“未知”$_GET 参数创建 MYSQL 查询？

> ID：13763485
> 
> 赞同：0
> 
> 时间：2012-12-07T12:52:31.000
> 
> 标签：php, sql, get

例如，我知道如果您知道可以简单地使用哪些参数

```
$_GET['parameter'] 
```

在您的 MYSQL 查询中。如果您期望有 4-5 个参数，但可能并非所有参数都通过了怎么办？例如，假设用户想要列出所有`price`超过`20$`和 a年`warranty`的产品`2`。

用户可以有更多的搜索选项，例如，产品类别应该`2`是`Laptops`

现在，我的问题是，我是否应该有很多 if 语句并检查每个可能的参数以查看它们是否已设置，然后是否将它们包含在我的 MYSQL 查询中，还是有更快的方法？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:58:23.370

你应该试试 foreach。就像是：

```
foreach($_GET as $key => $value) {
   switch($key) {
      case "category":
         $str[] = "category = '". mysql_real_escape_string($value) ."'";
         break;
      case "price":
         $str[] = "price > '". mysql_real_escape_string($value) ."'";
         break;
      case "warranty":
         $str[] = "warranty > '". mysql_real_escape_string($value) ."'";
         break;
   }
}
//create the mysql string with
$str_where = "WHERE " . implode('AND', $str); 
```

您可以使用 str_where 字符串来过滤产品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:53:00.687

出于安全原因，我肯定会首先列出可以在查询中使用的可用键及其数据类型。

```
$keys = array(
    'category'  => PDO::PARAM_INT,
    'price'     => PDO::PARAM_INT,
    'etc'       => PDO::PARAM_STR
);
// all the available keys for the query and their types

$queryStr = "SELECT * FROM `some_table` WHERE `yourCond`='someVal'";
// initial query you have

$userVals = array();
foreach ($_GET as $key => $value) {
    $k = strtolower($key);
    if (!in_array($k,array_keys($keys)) || empty($value))
    // if the key is not listed in the keys array
    // or the value is empty we skip it
        continue;
    $queryStr .= " AND `$k` = :{$k} ";
    // modify query
    $userVals[$k] = $value;
    // and add the key-value pair into user values array
}

$db = new PDO('mysql:host=someHost;dbname=someDB','someUsername','somePassword');
// create DB connection
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING);
// enable error reporting
$stmt = $db->prepare($queryStr);
// prepare query string
foreach ($userVals as $k => $v) {
    $stmt->bindParam(":{$k}",$v,$keys[$k]);
    // bind each parameter with the right datatype
}

$stmt->execute();
// and execute the query 
```

# android - Android动态显示位置到TextView

> ID：13763493
> 
> 赞同：0
> 
> 时间：2012-12-07T12:53:00.747
> 
> 标签：android, xml

我有一个通过 EditTexts 接收用户输入的活动。我正在进行的项目也将充分利用位置值。

当用户拍照时，它们会自动转移到 DataEntry 活动。我想要实现的是用位置值自动填充两个 TextView，并且显然有变量供以后使用。

下面的图片将说明我的意思。我已经尝试了一些方法，但不断出现奇怪的错误。谁能帮我吗？

![在此处输入图像描述](../Images/0d5b1599ed8d99f45c7a48c6abfb9ed8.png)

我正在寻找用位置值填充 lat 和 long 下的空白文本视图。我有两种方法来获取 Lat 和 Long 值，然后我将生成的字符串分配给填充 TextView 的静态变量，但我无法让它产生结果。

```
public Location getLongitude(){
     LocationManager lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
     Location location = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
     longitude = location.getLongitude();
     longitudeString = String.valueOf(longitude);
     return longitudeString;
 }

public Location getLatitude(){
    LocationManager lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
    Location location = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
    latitude = location.getLatitude();
    latitudeString = String.valueOf(latitude);
    return latitudeString;

}*/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:32:05.550

替换这个

```
public Location getLatitude(){
//your Code here;
}

public Location getLongitude(){
//your Code here;
} 
```

有了这个

```
public String getLatitude(){
//your Code here;
}
public String getLatitude(){
//your Code here;
} 
```

# javascript - vbscript`Is Nothing`的javascript等价物是什么

> ID：13763495
> 
> 赞同：8
> 
> 时间：2012-12-07T12:53:10.120
> 
> 标签：javascript, vbscript

```
If Not (oResponse.selectSingleNode("BigGroupType") Is Nothing) Then

End If 
```

我需要将其转换为 javascript。这足以检查`null`吗？

这是我的领导者的答案，请验证这一点，

```
if(typeof $(data).find("BigGroupType").text() !=  "undefined" && $(data).find("BigGroupType").text() != null) {  

} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-07T13:31:22.210

JavaScript 有两个值，表示“无”，`undefined`和`null`. 比因为它是每个变量的默认值`undefined`具有更强的“无”含义。除非**设置**为，否则`null`没有变量可以是，但默认情况下是变量。`null`**`null``undefined`**

 **```
var x;
console.log(x === undefined); // => true

var X = { foo: 'bar' };
console.log(X.baz); // => undefined 
```

如果你想检查某个东西是否是`undefined`，你应该使用`===`because `==`is not good 来区分它和`null`.

```
var x = null;
console.log(x == undefined); // => true
console.log(x === undefined); // => false 
```

但是，这可能很有用，因为有时您想知道某物是否是`undefined` **或** `null`，因此您可以`if (value == null)`测试它是否是。

最后，如果你想测试一个变量是否存在于范围内，你可以使用`typeof`. 这在测试旧版浏览器中可能不存在的内置插件时会很有帮助，例如`JSON`.

```
if (typeof JSON == 'undefined') {
    // Either no variable named JSON exists, or it exists and
    // its value is undefined.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T12:58:09.517

您需要同时检查`null`and `undefined`，这隐含地这样做了

```
if( oResponse.selectSingleNode("BigGroupType") != null ) {

} 
```

它相当于：

```
var node = oResponse.selectSingleNode("BigGroupType");
if( node !== null &&
    node !== void 0 ) {

} 
```

`void 0`作为一个防弹表达式得到`undefined`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T13:00:55.600

这个逻辑：

```
If Not (oResponse.selectSingleNode("BigGroupType") Is Nothing) 
```

在 JavaScript 中可以这样写：

```
if (typeof oResponse.selectSingleNode("BigGroupType") != 'undefined') 
```

`Nothing`将等于`undefined`，但`undefined`出于多种原因不建议进行检查，通常使用 . 更安全`typeof`。

但是，如果`selectSingleNode`可以返回其他虚假值，例如`null`，则只需简单检查它是否为真就可以了：

```
if (oResponse.selectSingleNode("BigGroupType")) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T12:54:54.603

在 JavaScript 中，Nothing 等价于`undefined`

```
if(oResponse.selectSingleNode("BigGroupType") != undefined){

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-09T10:32:37.047

JavaScript:-

`(document.getElementById(“BigGroupType”) == undefined) // Returns true`

jQuery:-

`($(“#BigGroupType”).val() === “undefined”) // Returns true`

注意在上面的例子中 undefined 是 JavaScript 中的一个关键字，而在 JQuery 中它只是一个字符串。**

# mysql - 选择其他表中没有匹配的行？

> ID：13763499
> 
> 赞同：0
> 
> 时间：2012-12-07T12:53:26.687
> 
> 标签：mysql, match

我有这个结构 tbl_site_urls: storage urls of a site

tbl_camp_urls：存储活动的 url，在处理完这些 url tbl_site_urls

```
id - site_id - url
1  - 181     - url1
2  - 182     - url2
3  - 189     - url3 
```

tbl_camp_urls

```
id - camp_id - site_id - url
1  - 5       - 181     - url1 
```

如果我想列出需要处理的网址

```
select url from tbl_site_urls
  join site on tbl_site_urls.site_id = site.id AND site.valid=1 
```

然后在循环操作中，我将处理后的 url 插入 tbl_camp_urls

我想列出尚未处理的网址。这就像一个比较操作。

**我期待的结果是**

```
2  - 182     - url2
3  - 189     - url3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T13:08:20.720

```
SELECT a.urls
FROM tbl_site_urls as a
LEFT JOIN tbl_camp_urls as b
ON a.site_id = b.site_id
WHERE b.site_id IS NULL; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T12:57:24.273

这应该这样做：

```
select  * from tbl_site_urls where url not in (select url from tbl_camp_urls) 
```

（搜索子查询以获取更多信息）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T13:50:26.140

我的逻辑告诉我，您需要创建一个交集来了解公共值，并使用一个联合来删除它们：

应该是这样的：

**首先获取所有值：**

```
(select site_id from tbl_site_urls) 
union 
(select id from site) 
```

**这就是您仅获取公共值的方式**

```
(select url from tbl_site_urls inner join site on tbl_site_urls.site_id = site.id) 
```

**现在让我们将这些查询放在一起：**

```
select * from (select site_id from tbl_site_urls 
union 
select id from site) as tem_table
where
site_id not in
(select url from tbl_site_urls inner join site on tbl_site_urls.site_id = site.id) --commons values 
```

# java - 如何创建具有多个根节点的 xml

> ID：13763501
> 
> 赞同：2
> 
> 时间：2012-12-07T12:53:28.690
> 
> 标签：java

例子-

```
<Envision>
      <Employee>
         <Employee-code>Shiva kumar</Employee-code>
         <Employee-Name>474</Employee-Name>
      </Employee>
  <Employee>
         <Employee-code>Santhosh Kumar</Employee-code>
         <Employee-Name>475</Employee-Name>
      </Employee>
</Envision> 
```

我想创建一个 xml 文件，如上所示 xml。但我只能这样做 -

```
<Employee>
<Employee-code>Shiva kumar</Employee-code>
<Employee-name>474</Employee-name>
<Employee>

</Envision> 
```

通过以下代码-

DocumentBuilderFactory 工厂=DocumentBuilderFactory.newInstance();

```
 DocumentBuilder builder=factory.newDocumentBuilder();

  Document doc=builder.newDocument();

  Element root=doc.createElement("Envision");

  doc.appendChild(root);

  Element ele=doc.createElement("Employee_Name");
  ele.appendChild(doc.createTextNode("Shiva Kumar"));
  root.appendChild(ele);

  ele=doc.createElement("Employee_Code");
  ele.appendChild(doc.createTextNode("474"));
  root.appendChild(ele);

  TransformerFactory transformerFactory =TransformerFactory.newInstance();
  Transformer transformer = transformerFactory.newTransformer();
  DOMSource source = new DOMSource(doc);
  StreamResult result =  new StreamResult(System.out);
  transformer.transform(source, result); 
```

每当我想通过将下面的代码附加到员工代码标记之后的上面代码来向该代码添加第二个块时

```
 Element root1=doc.createElement("Envision");

  doc.appendChild(root1);

      ele=doc.createElement("Employee_Name");
  ele.appendChild(doc.createTextNode("Vijay Babu"));
  root1.appendChild(ele);

  ele=doc.createElement("Employee_Code");
  ele.appendChild(doc.createTextNode(""));
  root1.appendChild(ele); 
```

然后我收到一条错误消息，例如“不允许创建节点”。在这种情况下请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:58:37.160

您不能创建第二个根元素——这在 XML 中是完全无效的。但你不需要。您需要做的就是重用*现有的*根元素。查看问题顶部的 XML - 它只有一个根元素，有两个`Employee`元素，对吧？

顺便说一下，不清楚为什么你不创建`Employee`元素。您当前正在直接在 下创建`Employee_Name`，这与您的示例 XML 不匹配。`Employee_Code``Envision`

我建议像这样提取员工添加代码：

```
private static void addEmployee(Document doc, String name, String code) {
    Element employee = doc.createElement("Employee");
    doc.getDocumentElement().appendChild(employee);

    Element nameElement = doc.createElement("Employee_Name");
    nameElement.appendChild(doc.createTextNode(name));
    employee.appendChild(nameElement);

    Element codeElement = doc.createElement("Employee_Code");
    codeElement.appendChild(doc.createTextNode(name));
    employee.appendChild(codeElement);
} 
```

然后：

```
Document doc = builder.newDocument();        
Element root = doc.createElement("Envision");        
doc.appendChild(root);

addEmployee(doc, "Shiva Kumar", "474");
addEmployee(doc, "Vijay Babu", ""); 
```

（或者，您可以更改`addEmployee`为将元素附加到。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:59:17.100

XML 文件只能有一个根元素。因此，如果您确实需要更多*Envision*节点，请为它们创建一个根节点，例如*ENVISIONS*

```
<ENVISIONS>
  <ENVISION>
  ...
  <ENVISION>
  <ENVISION>
  ...
  <ENVISION>
</ENVISIONS> 
```

你没有忘记创建*EMPLYEE*节点吧？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T13:00:26.693

一旦创建了根元素，就不能再创建另一个根元素并将其附加到文档中。

```
doc.appendChild(root); 
```

如果您想获取该根元素以稍后将另一个员工元素附加到它，您可以调用 doc.getDocumentElement()

```
Element root1=doc.getDocumentElement() 
```

# .net - specflow：-当一个步骤的参数比另一个步骤多时，“为步骤找到不明确的步骤定义”

> ID：13763502
> 
> 赞同：10
> 
> 时间：2012-12-07T12:53:36.227
> 
> 标签：.net, unit-testing, specflow

目前我们有这一步：

```
[When(@"I set the scenario price for product (.*) to (.*)")]
public void WhenISetTheScenarioPriceForProductPToN(string product, string priceStr) 
```

我想添加步骤：

```
[When(@"I set the scenario price for product (.*) to (.*) in the (.*) zone")
public void WhenISetTheScenarioPriceInZoneForProductPToN(string product, string priceStr, string zone) 
```

但是，规范流程在两个步骤之间给出了“为步骤找到了不明确的步骤定义”错误。

我累了：

```
 [When(@"I set the scenario price for product (.*) to (.*) in the (.*) zone")]
  [When(@"I set the scenario price for product (.*) to (.*)")]
  public void WhenISetTheScenarioPriceInZoneForProductPToN(string product, string priceStr, string zone) 
```

但失败并出现“绑定错误：参数计数不匹配！” 我希望它会在第二个“何时”通过 null。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-07T13:17:26.760

第二个问题是你的 (.*)。这可以扩展为匹配“abc 区域中的 xyz”。你可以只匹配一个单词吗？即 (\w+)

```
[When(@"I set the scenario price for product (.*) to (\w+)")] 
```

这也将阻止 abc 区域中较短的正则表达式匹配。

您可以通过注释掉较长的 When 属性和方法并调试以查看与较短的匹配的内容来测试这一点。

此外，您始终必须拥有与参数相同数量的正则表达式，这就是为什么组合起来不起作用的原因。

* * *

这对我不起作用，这是由于“0.99”和“。”的价格。没有被 \w 匹配。但是，这有效：

```
[When(@"I set the scenario price for product (.*) to (\S+)")]
public void WhenISetTheScenarioPriceForProductPToN(string product, string priceStr) 
```

因为我们的“测试值”中没有空格。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T12:57:45.303

我最初认为这是因为第一步定义末尾的正则表达式：

```
[When(@"I set the scenario price for product (.*) to (.*)")] 
```

它将捕获（或匹配）将进入后续定义的相同字符串。

然而，**事实上**，两步实现方法包含模棱两可的参数类型。我最初无法重现此问题，因为我使用过`int`（根据我的评论），但使用`string`您可以重现此问题，因为`string`它是模棱两可的。在步骤定义文件中作为参数提供的任何参数都可以视为`string`.

将您的步骤方法更改为以下内容：

```
public void WhenISetTheScenarioPriceInZoneForProductPToN(string product, double price, string zone)

public void WhenISetTheScenarioPriceForProductPToN(string product, double price) 
```

现在虽然正则表达式没有改变，所以理论上仍然会贪婪地匹配，SpecFlow 提供到原始类型的转换（以及通过自定义转换的其他类型），因此忽略了句子的其余部分。这意味着它不是模棱两可的，因为它检测到`string`后面的最后一个参数`double`（而不是无法确定句子的一部分是否与字符串参数匹配或嵌入了更多参数）。

# http-headers - G-wan，获取字节范围头请求

> ID：13763503
> 
> 赞同：2
> 
> 时间：2012-12-07T12:53:50.413
> 
> 标签：http-headers, webserver, g-wan

我正在尝试访问对 G-wan 服务器发出的字节范围标头请求，问题是我总是从 http_t 结构中的 h_range_from 属性中获取“0”作为值。

```
http_t *head = (http_t*)get_env(argv, HTTP_HEADERS);

printf("FROM: %d\n", head->h_range_from); 

printf("TO: %d\n", head->h_range_to); 
```

有没有人成功获得过字节范围？

```
// Example header request:

Range: bytes=1000- 
```

我将非常感谢您的帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:36:10.220

测试当前的开发代码库，该功能按预期工作。该代码库累积了 7 个月的用户反馈，因此经过了严格测试。

我相信这是几个月前修复的一个 HTTP Header 解析错误，当时有人使用 Flash 流技术在提供实验反馈时询问提示。

如果 v3.3.28 未报告此 HTTP 标头，则您必须手动解析此 HTTP 标头。

无论如何，感谢您的反馈，这就是首先修复错误的原因！

# java - 使用bundle将数据从活动传递到android中的下一个活动

> ID：13763507
> 
> 赞同：-2
> 
> 时间：2012-12-07T12:53:58.683
> 
> 标签：java, android, android-intent, nullpointerexception, bundle

我必须将数据从一个活动传递到下一个活动。

我在第一个活动中使用了以下代码：

```
 static String KEY_CATEGORY = "Category";
 static final String KEY_TITLE = "Categoryname";
lview3.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            //HashMap<String, String> map = songsList.get(position);
         switch (position)
         {
             case Tech:
                 Intent tech = new Intent(MainActivity.this, com.ssmobileproductions.catalogue.SubCate.class);
                 tech.putExtra(KEY_TITLE, "Books");
                 startActivity(tech);   
                 break;
             case Sport:
                 Intent sport = new Intent(MainActivity.this, com.ssmobileproductions.catalogue.SubCate.class);
                 sport.putExtra(KEY_TITLE, "CD-DVD-Video");
                    startActivity(sport);   
                 break;

             default:
                 break;
         } 
```

在第二个活动中必须使用以下代码：

```
 static String KEY_CATEGORY = "SubCategory";
 static  final String KEY_SUBCATE = "subcategoryname";
 static final String KEY_TITLE = "Categoryname";
Bundle bdl = getIntent().getExtras();
     KEY_CATEGORY = bdl.getString(KEY_TITLE); 
```

我的数据有价值。但我必须运行该应用程序意味着我的屏幕变空了。这里做错了什么。请帮助我。

这是完整的源代码： [MainACtivity.java](http://pastie.org/5493742)

[子类.java](http://pastie.org/5493750)

**编辑：**

这是我的 AndroidManifest.xml 文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.android"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.Light.NoTitleBar" >
    <activity
        android:name=".MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name=".SubCate"
        android:label="@string/app_name" />

</application> 
```

这是我的 xml 提要：

```
<Feed>
 <category>
  <Category>
      <Categoryname>Books</Categoryname>
          <SubCategory>
          <subcategoryname>Internet</subcategoryname>
          </SubCategory>
          <SubCategory>
          <subcategoryname>Software</subcategoryname>
           </SubCategory>
   </Category>
   <Category> 
        <Categoryname>CD-DVD-Video</Categoryname>
             <SubCategory>
             <subcategoryname>CD</subcategoryname>
             </SubCategory>
              <SubCategory>
              <subcategoryname>DVD</subcategoryname>
              </SubCategory>
   </Category>
   </category>
   </Feed> 
```

这是**我的期望输出**，例如：

```
Books
CD-DVD-Video 
```

我必须单击**书籍**意味着它进入下一个活动并且必须仅显示该书籍子类别。（即）我必须单击书籍类别意味着我必须仅显示 Internet 和软件。

我必须单击**CD-DVD-Video**意味着它转到下一个活动并且必须仅显示该 CD-DVd-Video 子类别。（即）我必须单击 CD-DVD-Video 类别意味着我必须仅显示 CD、DVD .

这是**我当前的输出**：

但我必须运行该应用程序意味着在第一次活动中获得书籍和 cd-dvd-video。我必须单击任何类别意味着显示空白屏幕。请帮助我。这里发生了什么错误。

**编辑：**

在这些第二个活动（**SubCate.java**）文件中，我已删除以下行

```
Bundle bdl = getIntent().getExtras();  
KEY_CATEGORY = bdl.getString(KEY_TITLE); 
```

在我必须运行该应用程序之后意味着我已经在第一页上显示了 Books CD-DVD-Video 类别。之后我必须单击任何类别意味着我已经在每个类别列表上显示了所有子类别。

例如：

我必须单击**图书**类别意味着我必须仅显示 Internet 和软件。但这里显示的是 Internet、软件、cd、dvd。而且我必须单击**CD-DVD-Video**类别意味着我必须仅显示 CD、DVD。但这里也显示了 4 个子类别。这里做错了什么。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:55:48.213

更改清单文件中的活动名称，如下所示：

```
 <activity
    android:name=".MainActivity"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>

<activity
    android:name=".SubCate"
    android:label="@string/app_name" /> 
```

活动：

```
lview3.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> parent, View view,
            int position, long id) {
        //HashMap<String, String> map = songsList.get(position);
     switch (position)
     {
         case Tech:
             Intent tech = new Intent(MainActivity.this, SubCate.class);
             tech.putExtra(KEY_TITLE, "Books");
             startActivity(tech);   
             break;
         case Sport:
             Intent sport = new Intent(MainActivity.this, SubCate.class);
             sport.putExtra(KEY_TITLE, "CD-DVD-Video");
                startActivity(sport);   
             break;

         default:
             break;
     } 
```

在您的第二个活动中，请执行以下操作：

```
String key = getIntent().getStringExtra(KEY_TITLE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:02:00.310

只做广告跟随

意图 i = getIntent();

```
if(i != null){

   String Title = i.getExtra.getString(KEY_TITLE); 
```

}

# wpf - 这是我的代码，但作为用户控件的磁贴背景没有改变

> ID：13763508
> 
> 赞同：0
> 
> 时间：2012-12-07T12:54:01.843
> 
> 标签：wpf, user-controls, background-color

```
<Window x:Class="justTry.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ucl="clr-namespace:justTry" 
    Title="MainWindow" Height="Auto" Width="Auto" Background="LightBlue">

<Grid>
    <Grid.Resources>
        <Style TargetType="{x:Type ucl:tile}">
            <Setter Property="Margin" Value="3"></Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="Red"></Setter>
                </Trigger>
            </Style.Triggers>
        </Style>

    </Grid.Resources>
    <Grid.RowDefinitions>
        <RowDefinition></RowDefinition>
        <RowDefinition></RowDefinition>
        <RowDefinition></RowDefinition>
        <RowDefinition></RowDefinition>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition></ColumnDefinition>
        <ColumnDefinition></ColumnDefinition>
        <ColumnDefinition></ColumnDefinition>
        <ColumnDefinition></ColumnDefinition>
    </Grid.ColumnDefinitions>

    <ucl:tile Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" ></ucl:tile>
    <ucl:tile Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="2"></ucl:tile>
    <ucl:tile Grid.Column="0" Grid.Row="2" ></ucl:tile>
    <ucl:tile Grid.Column="0" Grid.Row="3" ></ucl:tile>
    <ucl:tile Grid.Column="1" Grid.Row="0" ></ucl:tile>
    <ucl:tile Grid.Column="1" Grid.Row="2" Grid.RowSpan="2" ></ucl:tile>
    <ucl:tile Grid.Column="2" Grid.Row="0" Grid.ColumnSpan="2" ></ucl:tile>
    <ucl:tile Grid.Column="2" Grid.Row="1" ></ucl:tile>
    <ucl:tile Grid.Row="2" Grid.Column="3"></ucl:tile>
    <ucl:tile Grid.Column="2" Grid.Row="2" />
    <ucl:tile Grid.Column="2" Grid.Row="3" Grid.ColumnSpan="2" />
</Grid> 
```

这是我的代码。代码没有给出错误，但背景颜色没有改变这里瓷砖是我的用户控件，我想改变它的背景颜色，就像它在 Windows 8 Metro Ui 样式中一样。所以我想要每个不同颜色的瓷砖，但它无法使用样式或任何东西覆盖背景颜色。给我一些建议。即使我尝试此代码也不会给出任何错误，但用户控件（平铺）的颜色不会改变。请帮助我提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:05:51.293

这是您问题的简单解决方案。

这里的问题是您必须访问您用作用户控件的 Windows/Page 的内容/子项。

这是要在

```
<ucl:tile Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" x:Name="tile1" ></ucl:tile > 
```

将所有用户控件命名为 tile1、tile2 .....

并从MainWindow的构造函数中initializecomponents后面的代码为每个tile添加以下代码。

```
((Grid)tile.Content).Background = new SolidColorBrush(Colors.Red); 
```

此处 grid 已被强制转换，因为大多数用户控件的内容总是以 grid 开头。您可以将其转换为任何其他 UIElement，例如画布或任何东西，但应该与您放入用户中的相同

# xml - 显示不带编号的节点

> ID：13763512
> 
> 赞同：0
> 
> 时间：2012-12-07T12:54:09.017
> 
> 标签：xml, xslt

我有一个像这样创建 XML 节点的代码

```
foreach(var books in booksCollection)
            {
                XmlText bookTitle = xmlDoc.CreateTextNode(books.bookTitle);
                bookTitle.AppendChild(bookTitle);

                XmlText companyTitle = xmlDoc.CreateTextNode(books.companyTitle);
                CompanyTitle.AppendChild(companyName);

                XmlText author = xmlDoc.CreateTextNode(books.author);
                Author.AppendChild(author);
            } 
```

我正在使用列表，因为有很多数据。现在在 XSLT 中使用“position()”，我可以根据列表计数打印出数据。IE 如果有 3 个项目，它将打印出 3 个项目，如下所示：

```
 <xsl:for-each select="bookInfo" >  // my code
                <xsl:number value="position()"/>
                <xsl:value-of select="bookTitle" /><br/>
                <xsl:value-of select="companyTitle" /> <br/>
                <xsl:value-of select="author" /><br/>
            </xsl:for-each> 
```

问题是使用“position()”的输出是否有我不想要的编号。我如何打印没有编号的列表？任何帮助将不胜感激。谢谢。

```
1a_bookTitle   //--> a_bookTitle instead of 1a_bookTitle
a_companyTitle
an_author

2b_bookTitle //--> b_bookTitle instead of 2b_bookTitle
b_companyTitle
ban_author

3c_bookTitle  //--> c_bookTitle instead of 3c_bookTitle
c_companyTitle
can_author 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:05:18.373

除非我遗漏了什么，否则只需删除此行

```
 <xsl:number value="position()"/> 
```

**xsl:number**将简单地输出数字，但不控制选择哪些元素。

# titanium-mobile - Titanium Mobile 支持 Windows Phone 8

> ID：13763518
> 
> 赞同：7
> 
> 时间：2012-12-07T12:54:36.343
> 
> 标签：titanium-mobile, windows-phone-8

Titanium Studio 会支持 Windows Phone 8 平台吗？有没有人谈论它？Titanium有什么具体的说明他们正在这样做吗？

我在谷歌上看了看，什么也找不到。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-07T14:47:08.763

目前，Titanium Appcelerator 仅支持 iOS、Android、Blackberry 和 Tizen，尽管 Blackberry 处于测试阶段，需要付费订阅。您将从[这篇](http://developer.appcelerator.com/blog/2011/05/major-titanium-updates.html)博文中获得更多更新和信息。

**编辑：[Windows 8 的 Titanium 支持计划](http://developer.appcelerator.com/blog/2013/01/titanium-support-plans-for-windows-8.html)**

**更新 1：[windows-8-support-whats-going-on](http://www.appcelerator.com/blog/2014/01/windows-8-support-whats-going-on/)**

**更新 2：[Windows 8 SDK 入门](http://docs.appcelerator.com/titanium/latest/#!/guide/Getting_Started_with_the_Windows_8_SDK)**

# ruby-on-rails - 我如何判断 Ruby 宝石有多好？

> ID：13763519
> 
> 赞同：0
> 
> 时间：2012-12-07T12:54:36.393
> 
> 标签：ruby-on-rails, ruby, gem

拥有多种 gem 选择是使用 Ruby on Rails 的优势之一。

然而，通常不清楚宝石有多好。您可以知道它的更新时间、下载次数。但是没有宝石评级（我不知道）。这似乎是一件容易添加的事情。

应该对许多事情进行评分：文档的清晰程度、创建者对问题的响应程度、改进合并的速度等。

另一件事是使用这个 gem 的社区有多活跃，有多大帮助（对于增强 gem，以及帮助新手开始使用 gem）。

每个 gem 都有论坛供用户讨论问题、提交示例代码吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T13:01:32.743

通常一个好方法是去 ruby​​ 工具箱页面，在那里你可以看到有多少人在使用它，然后进入 github，看看开发的活跃程度，最后一次提交的时间，问题（以及修复的速度） )、待处理的拉取请求等。

有一集很好地解释了寻找宝石时要探索的所有功能：[http ://railscasts.com/episodes/384-exploring-rubygems](http://railscasts.com/episodes/384-exploring-rubygems)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T13:08:53.327

这几乎是所有语言的一个问题。 [ruby-toolbox](https://www.ruby-toolbox.com/)提供了很多你想要的东西。如果您单击宝石的评级，您甚至会得到随着时间推移的评级明细以及导致评级的因素。

ruby-toolbox 解决的另一个问题是将 gem 分配给类别。“Cucumber”或“Capybara”的名称与测试有什么关系？还是带有上传的“回形针”？还是带有 html 解析的“hpricot”？ruby-toolbox 允许您单击类别（或搜索它们）并查看哪些 gem 可以提供您想要的功能。

# seo - 两个 URL 的内容相同，这是否被搜索引擎视为重复内容？

> ID：13763522
> 
> 赞同：0
> 
> 时间：2012-12-07T12:54:50.290
> 
> 标签：seo

我开发了一项服务，允许用户在 www.mysite.com 上搜索商店。我也有合作伙伴使用我的服务。对用户来说，他们看起来像是在我的合作伙伴网站上，而实际上他们在我的网站上。我只用我的合作伙伴页眉和页脚替换了我自己的页眉和页脚。

对于用户来说，他们看起来像是在打开`mysite.partner.com`，而实际上他们是打开的`partner.mysite.com`。

如果您理解我试图解释的内容，我的问题是：

谷歌和其他搜索引擎会考虑这种重复的内容吗？

**更新 - 规范页面**
如果我正确理解规范页面，`www.mysite.com`就是我的规范页面。

因此，当我的合作伙伴使用`mysite.partner.com?store=wallmart&id=123`which "redirects" (CNAME) to 时`partner.mysite.com?store=wallmart&id=123`，我的服务器会识别我的子域。

所以我需要做的是在我的`<HEAD>`部分中动态添加以下内容：

```
<link rel="canonical" href="mysite.com?store=wallmart&id=123"> 
```

它是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:44:57.543

确实。您需要使用规范标记来阻止这种情况发生。

[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139394](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139394)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T15:45:56.873

这是重复的内容，但没有这样的惩罚。

问题是，对于特定的搜索，Google 会选择一个页面版本并从结果中过滤掉其他版本。如果您的合作伙伴针对的是同一地区，那么您将处于直接竞争中。

规范标签是一种告诉 Google 哪个是正式版本的方法。如果您使用它，那么只有规范页面会显示在搜索结果中。因此，如果您规范化回您的域，那么您的合作伙伴将被排除在搜索结果之外。只有您的域页面才会显示。对您的合作伙伴不利。

没有胜利。您的合作伙伴做得好的唯一方法是，如果他们有自己的内容或针对不同的地区，而您不使用规范标签。

所以你的合作伙伴有机会，我不会添加规范。然后由 Google 之神来决定显示哪些重复页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T13:14:48.497

是的。谷歌会将其视为重复内容。因为您只替换了页脚和页眉。根据最近的谷歌算法，内容对于网站甚至博客来说应该是唯一的。如果内容不是唯一的，您的网站将受到 Google 的处罚。

# iphone - 在 Objective-C 中用两个不同的字符替换一个字符的实例

> ID：13763524
> 
> 赞同：0
> 
> 时间：2012-12-07T12:54:51.983
> 
> 标签：iphone, objective-c, ios, nsstring, nsscanner

我在数据库中有大量的 NSStrings，它们被传递给 iOS 应用程序中的视图控制器。它们被格式化为“这是一条带有 $specially formatted$ 内容的消息”。

但是，我需要在特殊格式的开头使用“[”更改“$”，并在末尾使用“]”更改“$”。我有一种感觉我可以使用 NSScanner 但到目前为止我所有的尝试都产生了古怪的连接字符串！

有没有一种简单的方法来识别由 '$' 封装的子字符串并用开始/结束字符交换它们？请注意，很多 NSStrings 有多个 '$' 子字符串。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:31:28.860

您可以使用正则表达式：

```
NSMutableString *str = [@"Hello $World$, foo $bar$." mutableCopy];

NSRegularExpression *regex;
regex = [NSRegularExpression regularExpressionWithPattern:@"\\$([^$]*)\\$"
                                                  options:0
                                                    error:NULL];
[regex replaceMatchesInString:str
                      options:0
                        range:NSMakeRange(0, [str length])
                 withTemplate:@"[$1]"];
NSLog(@"%@", str);
// Output:
// Hello [World], foo [bar]. 
```

模式`@"\\$([^$]*)\\$"`搜索

```
$<zero_or_more_characters_which_are_not_a_dollarsign>$ 
```

然后所有出现的地方都替换为`[...]`. 该模式包含如此多的反斜杠，因为`$`必须在正则表达式模式中转义。

`stringByReplacingMatchesInString`如果您想创建一个新字符串而不是修改原始字符串，还有一种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T13:08:20.597

我认为`replaceOccurrencesOfString:`这行不通，因为您有 start$ 和 end$。

但是，如果您将字符串与您分开，`[string componentsSeperatedByString:@"$"]`则会得到一个子字符串数组，因此每隔一个字符串就是您的“$specially formatted$”-string

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T13:09:28.663

这应该工作！

```
NSString *str = @"This is a message with $specially formatted$ content";
NSString *original = @"$";
NSString *replacement1 = @"[";
NSString *replacement2 = @"]";

BOOL start = YES;
NSRange rOriginal = [str rangeOfString: original];
while (NSNotFound != rOriginal.location) {
    str = [str stringByReplacingCharactersInRange: rOriginal withString:(start?replacement1:replacement2)];
    start = !start;
    rOriginal = [str rangeOfString: original];
}

NSLog(@"%@", str); 
```

享受编程！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T13:16:37.377

```
// string = @"This is a $special markup$ sentence."
NSArray *components = [string componentsSeparatedByString:@"$"];
// sanity checks
if (components.count < 2) return; // maybe no $ characters found
if (components.count % 2) return; // not an even number of $s
NSMutableString *out = [NSMutableString string];
for (int i=0; i< components.count; i++) {
   [out appendString:components[i]];
   [out appendString: (i % 2) ? @"]" : @"[" ];
}
// out = @"This is a [special markup] sentence." 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T13:35:52.417

试试这个

```
NSMutableString *string=[[NSMutableString alloc]initWithString:@"This is a message with $specially formatted$ content. This is a message with $specially formatted$ content"];

NSMutableString *string=[[NSMutableString alloc]initWithString:@"This is a message with $specially formatted$ content. This is a message with $specially formatted$ content"];

BOOL open=YES;
for (NSUInteger i=0; i<[string length];i++) {
    if ([string characterAtIndex:i]=='$') {
        if (open) {
            [string replaceCharactersInRange:NSMakeRange(i, 1) withString:@"["];
            open=!open;
        }
        else{
            [string replaceCharactersInRange:NSMakeRange(i, 1) withString:@"]"];
            open=!open;
        }
    }
}
NSLog(@"-->%@",string); 
```

输出：

```
-->This is a message with [specially formatted] content. This is a message with [specially formatted] content 
```

# sql - 当 Row 可以包含 0 时计算百分比

> ID：13763530
> 
> 赞同：2
> 
> 时间：2012-12-07T12:55:18.783
> 
> 标签：sql, database, oracle, calculated-columns

我之前问过以下问题：[Calculating percent within the SQL](https://stackoverflow.com/questions/13726077/calculating-percentage-within-the-sql)

现在我很幸运能得到一个很好的答案，但是在我的问题中我没有考虑到我的行可能包含零。

问题行很简单：

```
select 
Number_of_Calls,
Number_of_Answered,
((Number_of_answered/Number_Of_Calls)*100) as answer_percent,
Date
from table Where Date BETWEEN '2012-09-10' AND '2012-09-11' 
```

但是 Number_of_answered 可能为零（如果我们公司没有接听电话），所以如果我想要完整的百分比数字，我该如何考虑 0？

顺便一提。我们使用的数据库是带有 PL SQL 的 Oracle 数据库

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T12:58:15.990

```
Case when Number_Of_Calls = 0 
     THEN 0 --or your desired value, maybe 100
     else (Number_of_answered/Number_Of_Calls)*100 
END as answer_percent 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T12:59:04.273

如果除数为零，则该`nullif`函数可用于返回 null。当 SQL 遇到空除数时，它会强制整个等式返回空值，从而防止发生错误。

```
select 
Number_of_Calls,
Number_of_Answered,
((Number_of_answered/nullif(Number_Of_Calls,0))*100) as answer_percent,
Date
from table Where Date BETWEEN '2012-09-10' AND '2012-09-11' 
```

如果您想排除空百分比，请使用以下 SQL：

```
select * from(select 
    Number_of_Calls,
    Number_of_Answered,
    ((Number_of_answered/nullif(Number_Of_Calls,0))*100) as answer_percent,
    Date
    from table Where Date BETWEEN '2012-09-10' AND '2012-09-11') alias
where answer_percent is not null; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T13:00:42.573

我认为您的意思是“Number_Of_Calls”可能为零（从而引发 zero_divide 错误？）如果是这样

```
case Number_Of_Calls when 0 then 0 else ((Number_of_answered/Number_Of_Calls)*100) as answer_percent 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-07T13:35:29.680

据我从您的评论中了解到，您想要一段时间内的接听电话率，包括 100% 电话无人接听的日子。

我想最简单的方法是

```
select sum(number_of_answered) / sum (number_of_calls) 
  from table 
 where date between interval_start and interval_end 
```

在这种情况下。

# regex - 如何使 perl 句柄模式“c++”与 grep 相同？

> ID：13763531
> 
> 赞同：1
> 
> 时间：2012-12-07T12:55:18.567
> 
> 标签：regex, perl, error-handling, grep

这并不奇怪：

```
% perl -ne 'print if /c++/' foo
Nested quantifiers in regex; marked by <-- HERE in m/c++ <-- HERE / at -e line 1. 
```

但这有点像：

```
% grep c++ foo
blah c++ blah 
```

我不知道 grep 正在做什么来适应`++`-- 但我希望在 perl 中也一样。或者，至少，有一些优雅的方式来处理这种情况；该模式来自用户，他可能会看到该模式`grep c++`有效，然后对 perl 中的失败感到惊讶。

我不想使用`quotemeta`; 我的真实代码需要正则表达式模式（来自用户）：

```
while ( my $pattern = shift @pat_list ) {
    my $regex = $opts{case} ? qr/$pattern/ : qr/$pattern/i;
    my @hits = grep { /$regex/ } @lines; 
```

我想我可以检测到模式有错误然后恢复到`quotemeta`. 但我似乎无法`eval`用来捕获错误（因为它被视为语法错误？）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T13:53:35.043

shell 命令`grep`至少知道三种解释正则表达式的模式：作为基本 RE（默认）、作为扩展 RE（如果使用`-E`或 as调用`egrep`）和 Perl 兼容 RE（如果使用 调用`-P`）。对于习惯于 Perl 的 RE 引擎的人来说，基本 RE 的行为有很大不同。`grep`的文档说明了您的特定用例：

```
In basic regular expressions the meta-characters ?, +, {, |, (, and ) lose
their special meaning; instead use the backslashed versions \?, \+, \{, \|, \(,
and \). 
```

这意味着对 的调用中没有元字符`grep c++ something.txt`。

请注意，即使 Perl 兼容的 RE（由知名库提供`libpcre`）也与 Perl 自己的 RE 引擎实现的并不完全相同。Perl 引擎的功能集在所有 RE 实现中非常独特。但是来自 libpcre 的 PCRE（与 Perl 兼容的 RE）至少非常相似并且也被广泛使用，例如在 PHP、C++（Boost）、类似`grep`和大多数其他编程语言的工具中。

话虽如此：我建议如果您想在 Perl 和 with 中使用大多数 RE，`grep`然后使用`grep`的 Perl 兼容模式，例如`grep --perl-regexp $yourRE $yourFile.txt`. 如果您允许任意用户输入，还要确保注意 shell 引用！有[String::ShellQuote](http://search.cpan.org/~rosch/String-ShellQuote-1.04/ShellQuote.pm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T13:37:11.317

如果您想要 grep 兼容 (POSIX) 正则表达式，您可以使用[POSIX::Regex](http://search.cpan.org/~jettero/POSIX-Regex-1.0001/)。（它不是标准模块，您可能需要使用 cpan 命令安装它。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T16:10:14.550

我的问题的主要观点是错误的。这工作正常：

```
#!/usr/bin/perl -w
use strict;
my $pattern = "c++";
my $regex;
eval { $regex = qr/$pattern/; };
warn "Error detected: $@" if $@; 
```

我已要求删除我的问题。很抱歉浪费了大家的时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T18:31:56.073

perl -ne '打印如果 /c\+\+/' foo

在正则表达式中，“+”表示“一个或多个”。

# java - 地图中的动态模板依赖

> ID：13763535
> 
> 赞同：1
> 
> 时间：2012-12-07T12:55:43.680
> 
> 标签：java, templates, generics, map, type-safety

我不太清楚如何表达我的问题，所以我举个例子：

以这张地图为例：

```
Map<Class<? extends DatabaseEntry>, Class<? extends IDecorator<? extends DatabaseEntry>>> map; 
```

例如`MyClass`，它映射`DatabaseEntry`到它的`IDecorator<MyClass>`. 上述陈述的问题在于，它太不具体了。我想要更多的类型安全。像这样的东西：

```
Map<Class<T extends DatabaseEntry>, Class<? extends IDecorator<T>>> map; 
```

当然， T 会因条目而异，但我想要的是，如果我调用：

```
map.get(MyClass.class); 
```

返回类型将`IDecorator<MyClass>`是`IDecorator<? extends DatabaseEntry>`

有一个简单的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T13:52:06.370

[正如@zaske 在他的回答](https://stackoverflow.com/a/13763913/851811)中已经指出的那样，这似乎是不可能的。

根据您已经在考虑的内容，您可以将您的类包装`Map`在一个类中，该类提供您想要的泛型`get`和`put`方法。

```
public class MapWrapper { 

    Map<Class<? extends DatabaseEntry>, Class<? extends IDecorator<? extends DatabaseEntry>>> map;
    public <T extends DatabaseEntry> Class<IDecorator<T>> put (Class<T> k, Class<IDecorator<T>> v){
        return (Class<IDecorator<T>>) map.put(k,v);
    }

    public <T extends DatabaseEntry> Class<IDecorator<T>> getObject(Class<T> k) {
        return (Class<IDecorator<T>>) map.get(k);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T13:19:17.193

据我所知 - 没有办法做到这一点。
您当然不能使用 T，T 必须是通用定义的一部分，
并且不能在这样的变量的独立定义中，这就是您使用通配符 (?) 的目的。
由于您的地图正在获取 Class 的键和值对象，
您甚至无法通过简单地扩展键和值的类型来解决这个问题（因为 Class 是最终的）。

# joomla - 覆盖 Joomla 核心组件文件

> ID：13763539
> 
> 赞同：10
> 
> 时间：2012-12-07T12:56:05.583
> 
> 标签：joomla, joomla2.5

我正在尝试使用此[页面中给出的说明覆盖 joomla 中的 com_content/views/article/view.html.php 文件](http://docs.joomla.org/How_to_override_the_component_mvc_from_the_Joomla!_core)

它说我必须在基本目录中创建一个名为“code”的文件夹并创建相同的目录结构。我试过了，但它不起作用。有人可以确认它是否工作。

我应该在哪里创建代码文件夹？它在 joomla 安装的根目录上吗？

PS-应用于核心文件时编辑工作正常

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T15:37:24.120

You can override (nearly) any class in Joomla, if your class with **the same name** is loaded first. To ensure that, you need to create a system plugin.

Here is an example for root/components/com_content/views/article/view.html.php:

```
class plgSystemOverride extends JPlugin
{
    public function onAfterRoute()
    {
        JLoader::register('ContentViewArticle', 'path/to/override.php', true);
    } 
} 
```

CAVEAT: Overriding a core class can lead to problems with other extensions, if you're not very careful. For views, though, any interferrence with other extensions is less likely.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T23:08:41.013

您不能在核心 Joomla! 中覆盖组件控制器、模型和视图！不使用 3rd 方插件。

您需要的插件可以在这里找到：[http ://extensions.joomla.org/extensions/style-a-design/templating/15611](http://extensions.joomla.org/extensions/style-a-design/templating/15611)

代码文件夹然后进入您的 Joomla 根目录，除非您覆盖后端视图，在这种情况下它进入 /administrator

希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-15T13:42:32.570

您可以使用类覆盖插件[http://extensions.joomla.org/extensions/tools/development-tools/23994](http://extensions.joomla.org/extensions/tools/development-tools/23994)

只需添加一些简单的人工阅读命令

# iphone - UIAlertView performSelectorInBackground

> ID：13763542
> 
> 赞同：0
> 
> 时间：2012-12-07T12:56:18.780
> 
> 标签：iphone, background, uialertview, nsthread

在 iOS5 上，我可以使用方法来显示`UIAlertView`：

```
[alert performSelectorInBackground: @ selector (show) withObject: nil]; 
```

在 iOS6 上我的应用程序崩溃了，为什么？

那个代替？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:58:05.537

你为什么在后台执行那个选择器？显示警报视图可能不是您希望在后台线程上执行的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:24:14.573

你不应该在后台做 UI 的东西。它会让你的应用程序崩溃。你通常会做一些事情，比如在后台从服务器加载数据或计算昂贵的操作，但永远不要在后台线程中做 UIKit 框架中的任何事情。

# scala - Scala 和 Python 的通行证

> ID：13763543
> 
> 赞同：5
> 
> 时间：2012-12-07T12:56:19.787
> 
> 标签：scala

我想知道，是否有相当于 python 的 pass 表达式？这个想法是编写没有实现的方法签名并编译它们只是为了对这些签名进行类型检查以进行某些库原型设计。我能够使用这个来模拟这种行为：

```
def pass[A]:A = {throw new Exception("pass"); (new Object()).asInstanceOf[A]} 
```

现在当我写：

```
def foo():Int = bar()
def bar() = pass[Int] 
```

它可以工作（它可以进行类型检查，但运行时会爆炸，这很好），但我的实现感觉不对（例如 java.lang.Object() 的使用）。有没有更好的方法来模拟这种行为？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-07T13:02:01.153

在 Scala 2.10 中，Predef 中有该[`???`方法](https://github.com/scala/scala/commit/497e6321a0aea209b679c428f1b76219d2920fd3)。

```
scala> ???
scala.NotImplementedError: an implementation is missing
  at scala.Predef$.$qmark$qmark$qmark(Predef.scala:252)
  ... 
```

在 2.9 中，您可以像这样定义自己的：

```
def ???[A]:A = throw new Exception("not implemented") 
```

如果您在没有显式类型参数的情况下使用此版本，`A`将被推断为`Nothing`.

# spring-mvc - 春季MVC中的JNDI

> ID：13763544
> 
> 赞同：0
> 
> 时间：2012-12-07T12:56:28.453
> 
> 标签：spring-mvc, oracle11g, jboss7.x

有人可以告诉我如何在 SPRING MVC 中配置 JNDI 名称吗？我使用的是 jboss version7.1.1，DB 是 oracle 11g。我已经在 jBoss 服务器中定义了 JNDI。如何在 spring-servlet.xml 中提及 JNDI 名称？我已经尝试了很多选项它不起作用。我不断收到 Name Not found 异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:45:08.513

```
<jee:jndi-lookup id="dataSource"
   jndi-name="java:jboss/datasources/ExampleDS"
   expected-type="javax.sql.DataSource" /> 
```

`jndi-name`的值与您在 JBoss 中配置的值匹配。您需要注册 jee 命名空间，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:jee="http://www.springframework.org/schema/jee"
       xsi:schemaLocation="http://www.springframework.org/schema/beans     http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
            http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.0.xsd"> 
```

# android - 带有自定义标记的 android Maps API v2

> ID：13763545
> 
> 赞同：66
> 
> 时间：2012-12-07T12:56:30.327
> 
> 标签：android, google-maps, google-maps-android-api-2

我想用自定义标记制作地图。在 API v2 中，我可以为标记设置图标、标题等。但我想在第一次开始时显示带有标记的标题。现在标题仅在我点击标记时显示。在 v1 中是叠加层，但在 v2 中我没有发现任何类似的东西。

**编辑：** 也许我不够清楚。类似`Marker.showInfoWindow()`API 的东西只适用于一个标记。我无法同时显示所有标记的信息窗口。无论如何，我需要为所有标记显示标题，而无需等待用户点击它。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-12-14T18:01:56.987

我也偶然发现了这个问题。V2 API 是前进了一步，后退了两步。谷歌，请在 Marker 或 GoogleMap 类上添加一个可覆盖的“draw”方法，以便我们自己自定义绘图。

一种可能的解决方案是动态生成位图并将其附加到标记上。即创建一个画布，插入标记位图，在标记旁边绘制文本。这涉及一些痛苦的计算（适当的画布大小与标记位图和文本彼此相邻）。不幸的是，Marker 中没有 setIcon 方法，因此每次文本更改时，都必须创建一个新的标记。如果您在地图上只有一个标记可能会很好，但如果有几十个标记，这可能不可行。动态创建这些位图也可能存在内存问题。示例代码（仅包含文本）：

```
Bitmap.Config conf = Bitmap.Config.ARGB_8888; 
Bitmap bmp = Bitmap.createBitmap(200, 50, conf); 
Canvas canvas = new Canvas(bmp);

canvas.drawText("TEXT", 0, 50, paint); // paint defines the text color, stroke width, size
mMap.addMarker(new MarkerOptions()
                                .position(clickedPosition)
                                //.icon(BitmapDescriptorFactory.fromResource(R.drawable.marker2))
                                .icon(BitmapDescriptorFactory.fromBitmap(bmp))
                                .anchor(0.5f, 1)
                                    ); 
```

希望谷歌会添加适当的方法，以便我们可以轻松地做到这一点。该死，我真的很喜欢 V2 API 中的新地图旋转功能。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2013-09-14T11:09:32.647

终于做到了。所以你要做的是有一个背景图像（在我的例子中，我只使用一个蓝色矩形）。像这样创建一个标记：

```
Marker myLocMarker = map.addMarker(new MarkerOptions()
            .position(myLocation)
            .icon(BitmapDescriptorFactory.fromBitmap(writeTextOnDrawable(R.drawable.bluebox, "your text goes here")))); 
```

注意 writeTextOnDrawable() 方法：

```
private Bitmap writeTextOnDrawable(int drawableId, String text) {

    Bitmap bm = BitmapFactory.decodeResource(getResources(), drawableId)
            .copy(Bitmap.Config.ARGB_8888, true);

    Typeface tf = Typeface.create("Helvetica", Typeface.BOLD);

    Paint paint = new Paint();
    paint.setStyle(Style.FILL);
    paint.setColor(Color.WHITE);
    paint.setTypeface(tf);
    paint.setTextAlign(Align.CENTER);
    paint.setTextSize(convertToPixels(context, 11));

    Rect textRect = new Rect();
    paint.getTextBounds(text, 0, text.length(), textRect);

    Canvas canvas = new Canvas(bm);

    //If the text is bigger than the canvas , reduce the font size
    if(textRect.width() >= (canvas.getWidth() - 4))     //the padding on either sides is considered as 4, so as to appropriately fit in the text
        paint.setTextSize(convertToPixels(context, 7));        //Scaling needs to be used for different dpi's

    //Calculate the positions
    int xPos = (canvas.getWidth() / 2) - 2;     //-2 is for regulating the x position offset

    //"- ((paint.descent() + paint.ascent()) / 2)" is the distance from the baseline to the center.
    int yPos = (int) ((canvas.getHeight() / 2) - ((paint.descent() + paint.ascent()) / 2)) ;  

    canvas.drawText(text, xPos, yPos, paint);

    return  bm;
}

public static int convertToPixels(Context context, int nDP)
{
    final float conversionScale = context.getResources().getDisplayMetrics().density;

    return (int) ((nDP * conversionScale) + 0.5f) ;

} 
```

感谢 Arun George： [以编程方式将文本添加到 android 中的图像](https://stackoverflow.com/questions/11100428/add-text-to-image-in-android-programmatically)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-11-23T16:19:20.267

似乎您的问题终于在 Google I/O 会议上得到了解答。

看看[http://googlemaps.github.io/android-maps-utils/](http://googlemaps.github.io/android-maps-utils/)

它有：

标记聚类——处理大量点的显示

热图 — 将大量点显示为热图

IconGenerator — 在你的标记上显示文本（见截图）

![使用库制作的标记](../Images/7184084263c8e31a2ed2369963b40a5b.png)

非常重要的是，它可以在***任何*****线程上进行****修改，***因此处理许多标记变得轻而易举*

 ** * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-12-11T02:45:21.103

我不确定您要实现哪个目标：在用户无需点击标记的情况下显示信息窗口，或者为信息窗口使用完全不同的视图（或两者兼而有之）。

## 要在不需要用户点击的情况下显示信息窗口：

我自己没有对此进行测试，但我猜[Marker.showInfoWindow()](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/Marker#showInfoWindow%28%29)可以解决问题（假设 Marker 的可见性已经是`true`.

## 为 InfoWindow 提供自定义视图

这里有两个选项，您应该参考[GoogleMap.InfoWindowAdapter](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap.InfoWindowAdapter)上的文档：

> 公共静态接口 GoogleMap.InfoWindowAdapter
> 
> 为信息窗口的自定义呈现提供视图。
> 
> 当需要显示标记的信息窗口时，将调用此提供程序上的方法，无论原因如何（用户手势或对 showInfoWindow() 的编程调用。由于任何时候只显示一个信息窗口，该提供者可以选择重用视图，也可以选择在每次方法调用时创建新视图。
> 
> 在构建信息窗口时，此类中的方法按定义的顺序调用。要替换默认信息窗口，请使用您的自定义渲染覆盖 getInfoWindow(Marker)。要仅替换信息窗口内容，在默认信息窗口框架（标注气泡）内，保留 getInfoWindow(Marker) 的默认实现并覆盖 getInfoContents(Marker)。

基本上，您是否覆盖`getInfoWindow()`或`getInfoContents()`将取决于您是否只想自定义在标注气泡中看到的内容，或者您​​是否希望自定义整个信息窗口视图，包括标注气泡的替代方案。

一个警告：我相信当你覆盖这些方法时，它会简单地渲染视图当时的样子`getInfoWindow()`或被`getInfoContents()`调用的样子。我本人有兴趣尝试复制本地 Google Maps Android 应用程序的外观，该应用程序的地点名称旁边有一个小“方向”图标。我认为的问题之一（参见此处：[https](https://stackoverflow.com/a/13713536/129475) ://stackoverflow.com/a/13713536/129475 ）是，如果您的视图中有类似按钮的东西，由于静态渲染，它的行为可能不像按钮。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-01-12T12:49:56.387

自定义标记图像

您可以将默认标记图像替换为自定义标记图像，通常称为图标。自定义图标始终设置为 BitmapDescriptor，并使用 BitmapDescriptorFactory 类中的四种方法之一进行定义。

fromAsset(String assetName) 使用资产目录中的图像创建自定义标记。

fromBitmap（位图图像​​）从位图图像创建自定义标记。

fromFile (String path) 从指定路径的文件创建自定义图标。

fromResource (int resourceId) 使用现有资源创建自定义标记。下面的代码片段创建了一个带有自定义图标的标记。

```
 private static final LatLng MELBOURNE = new LatLng(-37.813, 144.962);
 private Marker melbourne = mMap.addMarker(new MarkerOptions()
                        .position(MELBOURNE)
                        .title("Melbourne")
                        .snippet("Population: 4,137,400")
                        .icon(BitmapDescriptorFactory.fromResource(R.drawable.arrow))); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-18T04:13:46.337

这个简单的代码可以在不需要点击事件的情况下显示标题：

```
googleMap.addMarker(new MarkerOptions()
        .position(latLng)
        .title(String title))
        .showInfoWindow(); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-02-20T16:15:11.073

Google 推出了 IconGenerator 类，可以轻松添加自定义图标。

```
IconGenerator iconGenerator = new IconGenerator(mContext);
Bitmap bitmap = iconGenerator.makeIcon("Text Of Icon");
mMap.addMarker(new MarkerOptions()
                      .position(latlng)
                      .title("Location")
                      .icon(BitmapDescriptorFactory.fromBitmap(bitmap))); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-13T10:21:20.637

为什么不保留一个标记数组，然后在加载标记时，遍历它们调用`showInfoWindow()`. 可能不是最优雅的解决方案，但它可以满足您的想法。

* * *

## 回答 #9

> 赞同：-6
> 
> 时间：2013-01-24T04:07:51.307

我通过使用具有以下详细信息的图片编辑器制作自己的标记解决了这个问题。制作花了一些时间，但它确实有效。

我使用了 Photoshop 和 53x110px 的标记。

![我制作的一个示例标记](../Images/a1e183373e5d863c36cbabad43ba6e4a.png)*

# windows - CSVDE 导出的 LDAP 列顺序

> ID：13763548
> 
> 赞同：1
> 
> 时间：2012-12-07T12:57:02.183
> 
> 标签：windows, csv, ldap, csvde

我面临的问题是，`csvde.exe`从 an 中导出`ActiveDirectory`会更改列的顺序。我知道`CSVDE` [文档](http://technet.microsoft.com/de-de/library/cc732101%28v=ws.10%29.aspx)中的以下行：

> LDAP 可以按任何顺序返回属性，并且 csvde 不会尝试对列强加任何顺序。

我也看到了这个[问题](https://stackoverflow.com/questions/698081/csvde-export-file-column-order-wrong)。但是我想知道为什么`LDAP`在不同的 pc 甚至不同的 pc 上返回不同的订单`queries`。让我给你看一个例子：

这是两个`commands`：

```
csvde -u -f userdata_it.csv -d "ou=it,dc=your-company,dc=org" -l objectClass,SamAccountName,CN,Distinguishname,memberOf

csvde -u -f userdata_entwicklung.csv -d "ou=entwicklung,dc=your-company,dc=org" -l objectClass,SamAccountName,CN,Distinguishname,memberOf 
```

完全一样，期待`organisational unit`. 但我有一个`pc`，它将获得第一个的`csv`列顺序`query`：`objectClass,SamAccountName,CN,Distinguishname,memberOf`

而对于第二个`query`：
`objectClass,SamAccountName,CN,memberOf,Distinguishname`

我想知道为什么会这样？因为在另一个方面，`pc`这就像预期的那样工作。有没有已知的解决方案？也许另一个程序比`csvde`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T11:55:13.947

LDAP 搜索的结果不可重复，即排序不可重复或不可预测。LDAP 客户端不得假定 LDAP 搜索结果中的条目、属性或属性选项的顺序。

### 也可以看看

*   [LDAP：排序](http://www.ldapguru.info/ldap/ordering.html)
*   [LDAP：编程实践](http://www.ldapguru.info/ldap/ldap-programming-practices.html)

# .htaccess - htaccess 或 php 301 重定向网址

> ID：13763553
> 
> 赞同：0
> 
> 时间：2012-12-07T12:57:31.217
> 
> 标签：.htaccess, redirect, seo, http-status-code-301

我不太了解 htaccess 并使用 php 作为重定向 url (301)；

```
header( "HTTP/1.1 301 Moved Permanently" );
header( "Location: http://www.exampledomain.com" ); 
```

对于谷歌来说，两者之间有什么区别或优势吗？我可以使用 htaccess 来重定向 url 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:04:11.097

您必须使用这两个标头来永久重定向某些内容。两个标题都是必需的。我为我的旧博客网址回显了这个相同的标题。我得到了从谷歌到新域的所有推荐、访问者和链接。

**你如何回显标题并不重要。这些标题是否存在很重要。**

我很了解 PHP，所以我使用了一个只回显这些标头的 PHP 文件

```
HTTP/1.1 301 Moved Permanently
Location: http://shiplu.mokadd.im/ 
```

如果您使用`302`重定向，Google 会记住您当前的网址并将您的所有链接关联到该旧网址。

# php - 谷歌分析、adwords 和网上商店

> ID：13763557
> 
> 赞同：0
> 
> 时间：2012-12-07T12:57:40.000
> 
> 标签：php, google-ads-api, webshop

我想使用 Google 分析 API 来管理一些信息。假设我想知道谁通过 adwords 在我的网上商店购买了东西。因此，我可以针对我的 adwords 访问者表达我的利润。我找不到一个好的开始。也许有人知道我在哪里可以找到正确的信息？

我想通过 PHP 与 Google Analytics 进行交互。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T01:12:29.930

我通过使用附加到地址的字符串（POST 或 GET 方法，我不记得，因为我只是在编辑预先编写的购物车）来管理这个，所以我知道何时有人将产品添加到购物车只是因为在我的分析中显示一个页面

> ../cart.php?action=add&id=39

# lisp - 亲子关系

> ID：13763558
> 
> 赞同：3
> 
> 时间：2012-12-07T12:57:40.050
> 
> 标签：lisp, pattern-matching

我正在努力做我的功课。我有以下收藏。

```
(defparameter *tuples* 
  '((has bird feathers)
  (color budgie yellow)
  (eats budgie seed)
  (color tweetie green)
  (isa tweetie budgie)
  (isa budgie bird)
    )) 
```

我需要让它以通过以下测试的方式工作。

```
(inherit tuples 'tweetie 'heart-rate) => nil
(inherit tuples 'tweetie 'color)      => green
(inherit tuples 'tweetie 'eats)       => seeds
(inherit tuples 'tweetie 'has)        => feathers 
```

如果我指定 tweetie 的值，我已经设法完成工作，例如：

```
(forevery (' ((isa ?b budgie)  (eats budgie ?x)) *tuples*) 
    (format t "~&~a" #?x)      #?x) 
```

返回种子。

但

```
(forevery (' ((isa ?b budgie)  (eats tweetie ?x)) *tuples*) 
    (format t "~&~a" #?x)      #?x) 
```

返回 nil，所以我怎样才能使它与指定的父值匹配所以当测试时`(eats tweetie ?x)` 应该返回种子并且`(has tweetie ?x)` 应该返回羽毛。

多谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T21:28:18.927

```
(defparameter *tuples* 
  '((has bird feathers)
    (color budgie yellow)
    (eats budgie seed)
    (color tweetie green)
    (isa tweetie budgie)
    (isa budgie bird)))

(defvar *traits-table* (make-hash-table))

(defun put-trait (trait object subject)
  (let ((object-table
         (gethash object *traits-table* (make-hash-table))))
    (setf (gethash trait object-table) subject
          (gethash object *traits-table*) object-table)))

(defun populate-traits ()
  (loop for (trait object subject) in *tuples* do
       (put-trait trait object subject)))

(defun inherits-p (object trait)
  (let ((object-table (gethash object *traits-table*)))
    (and object-table
         (or (gethash trait object-table)
             (inherits-p (gethash 'isa object-table) trait)))))

(populate-traits)

(inherits-p 'tweetie 'heart-rate)       ; nil
(inherits-p 'tweetie 'color)            ; GREEN
(inherits-p 'tweetie 'eats)             ; SEED
(inherits-p 'tweetie 'has)              ; FEATHERS 
```

这是一种简单的方法。但在实践中，您很可能会为此目的使用类，或者至少是结构，它们具有内置的“是一种”关系的功能，而且它相当健壮和复杂。

**编辑：**

以下是将输入结构转换为类列表的一些方法，以便以后能够使用内置的 OO 功能来评估继承、访问字段（插槽）等：

```
(defmacro define-tuples (&body body)
  (loop for (trait object subject) in body
     ;; will will build a directed graph (assuming there
     ;; is only one root), where the root of the grpah
     ;; is the object, which maps to `nil', for simplicity
     ;; we will also assume there is always only one descendant
     with inheritance = (make-hash-table)
     with traits = (make-hash-table)
     with next-class = nil
     for object-table = (gethash object traits (make-hash-table))
     do (if (eql trait 'isa)
            (setf (gethash subject inheritance) object)
            (setf (gethash trait object-table) subject
                  (gethash (gethash object inheritance) inheritance)
                  (or (gethash (gethash object inheritance) inheritance) object)
                  (gethash object traits) object-table))
     finally
       (return                          ; We need to make sure
                                        ; we don't extend classes
                                        ; which we didn't define yet
         (let ((classes
                (cons nil
                      (loop for i from 0 to (hash-table-count traits)
                         collect
                           (setf next-class
                                 (gethash next-class inheritance))))))
           (append '(progn)
                   (loop for super in classes
                      for clazz in (cdr classes)
                      while (not (null clazz))
                      collect           ; generate class definitions
                        `(defclass ,clazz ,(when super (list super))
                           ,(loop for slot being the hash-key of
                                 (gethash clazz traits)
                               for slot-init-form being the hash-value of
                                 (gethash clazz traits)
                               collect  ; generate slot descriptors
                                 `(,slot :initarg
                                         ,(intern (string-upcase
                                                   (symbol-name slot)) "KEYWORD")
                                         :initform ',slot-init-form
                                         :accessor
                                         ,(intern
                                           (concatenate
                                            'string
                                            (string-upcase
                                             (symbol-name slot)) "-OF")))))))))))

(define-tuples
  (has bird feathers)
  (color budgie yellow)
  (eats budgie seed)
  (color tweetie green)
  (isa tweetie budgie)
  (isa budgie bird))

(let ((tweetie-instance (make-instance 'tweetie)))
  (format t "~&Tweetie eats ~s" (eats-of tweetie-instance))
  (format t "~&Tweetie has ~s" (has-of tweetie-instance))
  (format t "~&Tweetie color ~s" (color-of tweetie-instance))
  (format t "~&Tweetie has heart-rate ~s"
          (slot-exists-p tweetie-instance 'heart-rate)))
;; Tweetie eats SEED
;; Tweetie has FEATHERS
;; Tweetie color GREEN
;; Tweetie has heart-rate NIL 
```

# postgresql - 如何在选择查询 postgreSQL 中使用变量

> ID：13763563
> 
> 赞同：3
> 
> 时间：2012-12-07T12:57:43.947
> 
> 标签：postgresql, variables, select, procedure

所以这是我的问题，

我有一个程序：

```
 DECLARE
serialvar INTEGER;

BEGIN
serialvar := NEW.battery_serial;

CREATE OR REPLACE VIEW battery_vue
AS
SELECT * FROM cells WHERE battery_serial = serialvar;
RETURN NEW;
END; 
```

但是当该程序的触发器被激活时，我有一个错误说：

> 错误：列 « serialvar » 不存在
> 
> 第 3 行：SELECT * FROM cells WHERE battery_serial = serialVar

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:14:10.023

您必须将值传递给动态 SQL，例如

```
BEGIN

EXECUTE $$CREATE OR REPLACE VIEW battery_vue
AS
SELECT * FROM cells WHERE battery_serial = $$ || NEW.battery_serial;

RETURN NEW;

END; 
```

这样您就可以获取新值，如果它是 1（例如），那么`battery_vue`只会显示`cells`where `battery_serial = 1`。这是你想要的吗？（下一个插入或任何将重新创建视图，可能使用不同的`battery_serial`.）

# java - Wicket：ConverterLocato - 为界面设置 IConverter

> ID：13763565
> 
> 赞同：0
> 
> 时间：2012-12-07T12:57:46.147
> 
> 标签：java, wicket

Apache Wicket 问题：

我正在尝试在 ConverterLocator 类中注册一个 IConverter。从 WebApplication 类：

```
protected IConverterLocator newConverterLocator() {
    ConverterLocator locator = (ConverterLocator) super.newConverterLocator();
    locator.set(MyInterface.class, new MyConverter());      
} 
```

我的问题是当值是实现 MyInterface 的类时，MyConverter.convertTo*() 方法永远不会“触发”。它仅在我在 ConverterLocator 中注册 MyInterface 的实现时才有效。

关于如何让 MyConverter 转换 MyInterface 的所有实现而无需手动注册它们的任何建议？

这似乎是基本的多态行为:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:22:03.470

我认为唯一的解决方案是实现您自己的`IConverterLocator`并覆盖您`WebApplication.newConverterLocator()`的注册。

这是您必须在当前默认实现上更改的一段代码：

```
public final <C> IConverter<C> get(Class<C> c)
{
    @SuppressWarnings("unchecked")
    IConverter<C> converter = (IConverter<C>)classToConverter.get(c.getName());
    return converter;
} 
```

看看这里： [https ://github.com/apache/wicket/blob/master/wicket-core/src/main/java/org/apache/wicket/ConverterLocator.java](https://github.com/apache/wicket/blob/master/wicket-core/src/main/java/org/apache/wicket/ConverterLocator.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:41:45.773

找到了解决方案。该代码仅在启动期间运行，因此性能应该不是问题。诀窍是通过使用 springs ClassPathScanningCandidateComponentProvider 进行类路径扫描来找到接口的所有实现。

虽然不是很优雅的解决方案:-)

```
ClassPathScanningCandidateComponentProvider provider = new ClassPathScanningCandidateComponentProvider(true);
provider.addIncludeFilter(new AssignableTypeFilter(MyInterface.class));

Set<BeanDefinition> components = provider.findCandidateComponents("org/example/package");
for (BeanDefinition component : components)
{
    Class cls = Class.forName(component.getBeanClassName());
    locator.set(cls, new MyGenericConverter<MyInterface>());
} 
```

然后覆盖默认的 ConverterLocator 并将上面的代码添加到构造函数中。

# ruby - Rails3关联和accepts_nested_attributes_for在验证user_id时失败

> ID：13763568
> 
> 赞同：0
> 
> 时间：2012-12-07T12:57:55.740
> 
> 标签：ruby, ruby-on-rails-3, associations, nested-attributes

我正在按照 Rails 教程为自己做一个小项目，然后尝试进步。

好吧，我正面临一个我找到解决方案的问题，但我真的很感激任何想法和意见，因为要让它工作，我必须禁用关联中的验证。

上下文如下：该应用程序（它实际上所做的大名鼎鼎......）让用户跟踪他们的体重。我希望当用户注册时，他/她在旅途中输入第一个措施。

所以这里是简化的模型：

用户.rb

```
class User < ActiveRecord::Base
  attr_accessible :email, :name, :password, :password_confirmation, :measures_attributes

  has_secure_password

  has_many :measures, dependent: :destroy
  accepts_nested_attributes_for :measures

  # here goes validations before_save, etc. taken from the Rails Tutorial
end 
```

测量.rb

```
class Measure < ActiveRecord::Base
  attr_accessible :weight
  belongs_to :user

  # This is kind where the problem is...
  # If I deactivate the validation for user_id everyhing goes fine
  validates :user_id, presence: true
  validates :weight, presence: true, numericality: { greater_than: 0 }

  default_scope order: 'measures.created_at ASC'
end 
```

这是用户控制器

```
class UsersController < ApplicationController

  # GET /users/new
  def new
    @user = User.new
    @user.measures.build
  end

  # POST /users
  def create

    @user = User.new(params[:user])

    if @user.save
      sign_in @user
      flash[:success] = "Hi #{@user.name}. Welcome !"
      redirect_to @user
    else
      render :new
    end
  end

end 
```

这是用户的部分表单：

```
<%= form_for(user) do |user_form| %>
  <%= render 'shared/error_messages', object: user_form.object %>

  <%= render 'users/fields', user_builder: user_form %>

  <%= user_form.fields_for :measures do |measure_fields| %>
    <%= render 'measures/fields', measure_builder: measure_fields, full: true %>
  <% end %>

  <%= user_form.submit submit_text, class: 'btn btn-large btn-primary' %>
<% end %> 
```

即使我正确填写表格，我也会收到此错误：

```
* Measures user can't be blank 
```

我发现使它工作的唯一方法是摆脱 :user_id 验证是否存在于 Measure 模型中。我想强调的是，当此验证关闭时，用户被保存，度量被保存并与新创建的用户正确关联。

难道我做错了什么 ？Measure 模型中的 :user_id 存在验证真的有用吗（它在 Rails 教程中，对我来说非常有意义）？如果是，为什么打开时测量验证失败？

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:46:00.590

您可以尝试 validates`:user`而不是`user_id`. 然后可能会发现这两者在内存中是关联的，即使用户还没有被保存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:14:02.447

我想我可能在您的代码中发现了一个错误，该错误会导致您看到的错误。

在您的新控制器中，您专门创建了一个关联：

```
@user.measures.build 
```

在您的创建控制器中，您根据传入的字段创建一个新元素。

```
@user = User.new(params[:user]) 
```

在某些情况下，关联的元素将被删除。我不记得默认情况下是否会发生这种情况，如果它没有验证或者是否需要设置一个选项以使其下降。

我认为您可能需要添加

```
@user.measure.build if @user.measures.empty? 
```

在你的`create`控制器`else`条款之前`render :new`。

我不知道您是否真的遇到了这个问题，但它可以解释为什么`User`没有设置与您的关联。

# javascript - UIWebview javascript桥

> ID：13763573
> 
> 赞同：2
> 
> 时间：2012-12-07T12:58:01.733
> 
> 标签：javascript, objective-c, uiwebview

我应该在目标 C 和 javascript 代码之间进行通信，我还想将目标 c 中的对象返回给 js，并将 js 返回目标 c。为此，我使用了一个名为 Webviewjavascriptbridge 的库。但我无法从目标 c 到 js 获得返回值。有人可以告诉我是否有任何其他库可以实现这一目标？我尝试使用此链接[iOS JavaScript 桥](https://stackoverflow.com/questions/9473582/ios-javascript-bridge)中提到的库，但我无法从目标 c 到 js 获得返回值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T13:26:25.797

`JSBridge`是一个易于使用的库，用于在`JS`和`cocoa`/ `Objective`-c`之间进行通信。

[http://code.google.com/p/jsbridge-to-cocoa/](http://code.google.com/p/jsbridge-to-cocoa/)

如果您想从应用程序向 Javascript 发送消息，那么`UIWebView`您有一个方法。这是我实现的代码，用于将 webview 中的填充数据分配给客户。

```
NSString *jsSave=[NSString stringWithFormat:@"set_customer(%@);",self.customer.customerId];
[webView stringByEvaluatingJavaScriptFromString:jsSave]; 
```

set_customer 是 JS 的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T13:11:12.210

看看这个，可能是你需要的：

[http://blog.techno-barje.fr/post/2010/10/06/UIWebView-secrets-part3-How-to-properly-call-ObjectiveC-from-Javascript/](http://blog.techno-barje.fr/post/2010/10/06/UIWebView-secrets-part3-How-to-properly-call-ObjectiveC-from-Javascript/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-25T05:47:51.613

你想要一个从`ObjC`to的返回值`js`。也许这意味着您的`js`代码需要代码提供的参数`ObjC`。然后你可以试试这个：

```
NSString *returnValue = [self someMethod];
NSString *jsCallBack = [NSString stringWithFormat:@"yourJsMethodName:('%@')", returnValue];
[webView stringByEvaluatingJavaScriptFromString:jsCallBack]; 
```

那是你要的吗？我希望它有所帮助。

# java - 比较java中的输入值

> ID：13763576
> 
> 赞同：-1
> 
> 时间：2012-12-07T12:58:11.827
> 
> 标签：java

我正在尝试比较输入值。这是我想说的一个示例。

```
 if(text.input != float)
           {
              //code to calculate
           } 
```

我不想允许输入数字以外的值。它是否正确？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T12:59:55.957

你应该做类似的事情

```
try {
  float value = Float.valueOf(text.input);
  // Do something with value - it's OK.
} catch (NumberFormatException e) {
  // text.input is not a float, handle appropriately...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:02:55.890

使用 try/catch 块来实现逻辑将“工作”，但我不确定这是更有效的做法。

如果文本值实际上是浮点数，但只有一小部分时间，所以非浮点数确实是一种特殊情况，那么我同意 try/catch 安排。

如果非浮点数是输入的更大部分，我会说你最好使用正则表达式来检查有效的浮点数而不是抛出异常。

# c++ - 初始化列表、可变参数模板和构造函数推导：一个奇怪的案例

> ID：13763578
> 
> 赞同：2
> 
> 时间：2012-12-07T12:58:17.160
> 
> 标签：c++, constructor, c++11, variadic-templates, initializer-list

我在高度模板化的代码中遇到了问题，我在这个示例程序中隔离了它（我用 g++ 4.7.1 编译）：

```
#include <iostream>
#include <initializer_list>
#include <type_traits>
#define OPTION 2

// Test class
template<typename T = double>
class MyClass
{
    public:
        // Constructors
        MyClass(const MyClass<T>& source) 
        {std::cout<<"copy constructor"<<std::endl;}

        #if OPTION == 1
        template<typename T2 = T> 
        MyClass(const std::initializer_list<T2>& source) 
        {std::cout<<"init constructor"<<std::endl;} // OPTION 1
        #elif OPTION == 2
        template<typename T2 = T, class... Misc> 
        MyClass(const std::initializer_list<T2>& source, const Misc&... misc) 
        {std::cout<<"init+misc constructor"<<std::endl;} // OPTION 2
        #endif

        template<class... Misc> 
        explicit MyClass(const Misc&... misc) 
        {std::cout<<"misc constructor"<<std::endl;}

        // Assignment
        inline MyClass<T>& operator=(const MyClass<T>& rhs) 
        {std::cout<<"copy assignment"<<std::endl; return *this;}

        template<class Misc> 
        inline MyClass<T>& operator=(const Misc& rhs) 
        {std::cout<<"misc assignment"<<std::endl; return *this;}
};

// Main
int main(int argc, char* argv[])
{
    MyClass<double> x;
    x = {4., 8., 15., 16., 23., 42.}; // CALL LINE
    return 0;
} 
```

问题如下。使用`OPTION == 1`，一切正常，`CALL LINE`调用“init 构造函数”。

但是`OPTION == 2`，我有以下错误消息：

```
error: converting to ‘const MyClass<double>’ from initializer list would use
explicit constructor ‘MyClass<T>::MyClass(const Misc& ...) [with Misc = {double, 
double, double, double, double, double}; T = double]’ 
```

问题是：为什么？这是正常的还是 g++ 的错误？

此外，我需要一个解决方法：我必须在没有选项 1 的情况下实现选项 2 构造函数。对我来说最明显的事情是使用 enable if 阻止对显式构造函数的调用，例如：

```
 template<class... Misc, class std::enable_if<SOMETHING>::type> 
    explicit MyClass(const Misc&... misc) 
    {std::cout<<"misc constructor"<<std::endl;} 
```

我的问题是：我可以写什么而不是`SOMETHING`为了阻止每个`std::initializer_list<T2>`（对于所有 T2 类型）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T14:13:04.647

对于第一个问题，关于错误消息：

中的构造函数`OPTION==2`不被视为*初始化列表构造函数*，因为这样的构造函数要么必须具有单个`std::initializer_list<E>` 参数（或此类引用），要么所有其他参数都应具有默认参数。（8.5.4 列表初始化 [dcl.init.list] #2）。

因此，没有找到*初始化列表构造函数*，编译器尝试使用由初始化列表元素组成的参数列表的其他构造函数，找到显式构造函数，并且由于我们处于隐式转换的上下文中（初始化赋值运算符的参数)，失败并显示错误消息。

# ios - UIScrollView 失去对委托的引用

> ID：13763579
> 
> 赞同：1
> 
> 时间：2012-12-07T12:58:20.297
> 
> 标签：ios, memory, uiscrollviewdelegate, unrecognized-selector

我需要动态创建许多 UIScrollViews 并用内容填充它们。这一切都很好，除了当我将委托设置为 self 并平移列表时，我得到了这个异常：

**由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFString scrollViewDidScroll:]: unrecognized selector sent to instance 0x7581230”**

NSCFString 显然不是我的视图控制器（它实现了 UIScrollViewDelegate 协议），所以从我收集到的内容中，内存被搞砸了，它不能正确地保持引用。有时这也可能是其他东西，强烈表明内存有问题

这是创建列表的代码：

```
for (NSUInteger i = 0; i < self.stories.currentStory.selectableWordCount; i++) {
    UIScrollView *list = [[UIScrollView alloc] init];
    list.alwaysBounceVertical = YES;
    list.showsVerticalScrollIndicator = NO;
    list.clipsToBounds = NO;
    list.delegate = self;
    list.pagingEnabled = YES;
    [self.view addSubview:list];

    .. // add UILabels to the list, set the frame, contentSize etc

    [self.wordLists addObject:list]; // this is a @property (nonatomic, strong) NSMutableArray, declared in a private interface()
} 
```

如果我 NSLog 代表它是正确的。`respondsToSelector`也很匹配。有趣的是，如果我注释掉`scrollViewDidScroll:` `respondsToSelector:`不再匹配并且（可能正因为如此） UIScrollView 将不再尝试调用此方法。这意味着它可以正确地到达委托以检查方法的可用性，但是当它被调用时出现问题。

我的目标是带有 ARC 的 iOS5。如果不是这种情况，我会假设我自己弄乱了内存，但现在我没有相同的控制权。

我很难调试这个问题，任何关于如何继续的帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:12:16.093

呃。我显然是找错地方了。视图控制器是通过 .xib 添加的，并且视图指向舞台上的子视图。但是我需要在主视图控制器中为视图控制器创建一个 IBOutlet，以确保它保留在内存中。希望这可以帮助其他有类似问题的人:)

# c# - C#语法理解 Oracle Connection Project

> ID：13763593
> 
> 赞同：0
> 
> 时间：2012-12-07T12:59:08.940
> 
> 标签：c#, ternary-operator

我必须修改一个与 Oracle 一起使用的 Visual Studio 2010 C# 项目，查看一些代码我发现了一个函数，该函数返回一个`List<>`从数据库存储过程（光标）加载的值

```
while (myIDataReader.Read())
{
    // OK
    myTable.myStringField = myIDataReader["TableStringField"].ToString();
    // ¿?
    myTable.myIntField =
    Convert.ToInt32((myIDataReader["TableIntField"] == DBNull.Value) ? null : myIDataReader["myTableField"]);
} 
```

一切都好，只是想知道，assign时给出了什么条件`myTable.myIntField`，我知道这个列可以为空，但我不明白语法，如果有人能解释我会很感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:12:09.277

你说的是这条线？

```
myTable.myIntField =
Convert.ToInt32((myIDataReader["TableIntField"] == DBNull.Value) ? null : myIDataReader["myTableField"]); 
```

如果你把这个语句分开，你就会有一种条件，通常称为三元运算符，[在这里解释](http://msdn.microsoft.com/en-us/library/ty67wk28%28v=vs.80%29.aspx)。

```
conditional ? if_true_do_this : if_false_do_this 
```

它实际上只是一种不同的语法：

```
if(conditional) {
    if_true_do_this;
} else {
    if_false_do_this
} 
```

之后，它只是将结果传递给以`Convert.ToInt32()`将其从 a`string`转换为`int`。

所以那行代码只是一个更简洁的版本：

```
if(myIDataReader["TableIntField"] == DBNull.Value)
{
    myTable.myIntField = Convert.ToInt32(null);
}
else
{
    myTable.myIntField = Convert.ToInt32(myIDataReader["myTableField"]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:10:56.760

上面的语法可以正常工作，这意味着：

`TableIntField`可能包含数据库空值。
这在 NET 中通过[DBNull](http://msdn.microsoft.com/en-us/library/system.dbnull.value.aspx)对象及其值字段表示。

代码检查是否`TableIntField`包含`DBNull.Value`via C#[三元运算符](http://msdn.microsoft.com/en-US/library/ty67wk28%28v=VS.80%29.aspx)。
如果检查结果为真，则将 null 用作 Convert.ToInt32 的参数，根据[MSDN 文档](http://msdn.microsoft.com/en-us/library/1k20k614.aspx)，这会导致分配给 myTable.myIntField 的值为零。

# excel - 使用VBscript删除Excel列

> ID：13763603
> 
> 赞同：0
> 
> 时间：2012-12-07T12:59:46.833
> 
> 标签：excel, vbscript

我在 vbscript 中编写了如下代码，但是当我运行我的脚本时，它给出了一个错误，说“范围”未定义。任何人都可以通过说错误是什么来帮助我吗？

```
For TaskCounter = 1 to 35    
  TaskRangeFrom="Task"&TaskCounter&" Start Date"    
  TaskRangeTo="Task"&(TaskCounter+1)&" Name"    
  objSheet6.Range(Range(TaskRangeFrom).Offset(,1), _ 
  Range(TaskRangeTo).Offset(,-1)).EntireColumn.Delete
Next 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:12:26.437

`VBScript`与我相比，看到一些并发症后，`VBA`我建议采用以下相当懒惰的方法。

在大多数办公应用程序（Excel 就是其中之一）中执行与 VBScript 相关的任何事情的最简单方法是开始录制宏，手动执行您想要的操作，然后读取生成的 VBA 并将该 VBA 转换为 VBScript。

无论如何，这里有一些代码可以帮助你。删除 E 列。

```
Const xltoLeft = -4131
StrName as string
StrName = "myfield"
Set NewWorkBook = objExcel.workbooks.add()
With objExcel
  .Sheets("Sheet1").Select '-- select is a very bad practice, I'll update it later
  '-- run your for loop
       'for i= blah blah
            If range.offset(0,i) = StrName then
                 Range.offset(0,i).Entirecolumn.delete xltoLeft
                 Msgbox "magical deletion"
                 Exit for
            End if
       'next i
 End With 
```

参考：[删除 VBSCRIPT 中的 EXCEL 列](http://social.technet.microsoft.com/Forums/en/ITCG/thread/1ec5de28-4c87-4768-aa2d-52180d3cb091)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T15:18:50.403

要删除 VBScript 中的整个列，只需执行以下操作；这将删除整个 A 列

```
Set objExcel = CreateObject("Excel.Application")
Set objWorkbook = objExcel.Workbooks.Open _
    ("C:\myworkbook.xlsx")

objExcel.Visible = True
objWorkbook.Worksheets("Sheet1").Range("A:A").Delete 
```

在 VBA（宏）中，只需调用下面的代码。这将删除活动工作表上的 A 列。

```
Range("A:A").Delete 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T18:33:18.897

正如@NickSlash 昨天提到的那样，我怀疑您是否为列提供了诸如“业务流程ID”（包含空格）之类的范围名称。但由于这可能是一个版本问题，我将向您展示如何为名为“TaskB”的列获取“整列”范围对象（通过“定义名称”对话框）：

```
' Range by Name
Set oRng = oWs.Range("TaskB") 
```

要通过（列）编号获取第二列的范围，请使用：

```
' Range by Number
Set oRng = oWs.Cells(1, 2).EntireColumn 
```

请注意：行号和列号以 1 开头。所以您的“.Offset(,1)”代码看起来很可疑；它可能导致“未知的运行时错误”。

如果您 - 正如我想的那样 - 在第一行写了列标题，则必须遍历该行的列并检查值：

```
' Range by Lookup
Set oRng = Nothing
For nCol = 1 To 5
    If "Title B" = oWs.Cells(1, nCol).Value Then
       Set oRng = oWs.Cells(1, nCol).EntireColumn
       Exit For
    End If
Next 
```

如果您想进行实验，请将这些片段插入到测试代码中，例如：

```
Dim oFS    : Set oFS = CreateObject("Scripting.FileSystemObject")
Dim sDir   : sDir    = oFS.GetAbsolutePathname("..\xls")
Dim sFSpec : sFSpec  = oFS.BuildPath(sDir, "work.xls")
' Start clean
oFS.CopyFile oFS.BuildPath(sDir, "13763603.xls"), sFSpec

' Open .XLS
Dim oXls : Set oXls = CreateObject("Excel.Application")
Dim oWb  : Set oWb  = oXls.Workbooks.Open(sFSpec)
Dim oWs  : Set oWs  = oWb.Worksheets(1)
Dim oRng, nCol

' Range by XXX
...

oXls.Visible = True
WScript.Stdin.ReadLine
If Not oRng Is Nothing Then
   oRng.Delete
   WScript.Stdin.ReadLine
End If
oXls.Visible = False
oWb.Close False
oXls.Quit 
```

图片为证：

![前](../Images/95e9afff757d5ef3d619dd6261f28267.png)

![后](../Images/1bcd14f7376407e9a8120b31591c99db.png)

# java - 比较方法在排序方法中违反了其一般合同

> ID：13763604
> 
> 赞同：0
> 
> 时间：2012-12-07T12:59:50.660
> 
> 标签：java, android, sorting

我的排序方法出错。

> 比较法违反其总合同

这是我使用排序方法的排序对象

```
public abstract class ComparablePerson extends IDValueItem implements
        Comparable<ComparablePerson> {

    private int score;
    private String itemID,itemName;

    //setters and getters

    public int compareTo(ComparablePerson another) {
    if (score == another.getScore())
        return this.getItemName().compareToIgnoreCase(another.getItemName());
    else if ((score) > another.getScore())
        return 1;
    else
        return -1;
}

@Override
public boolean equals(Object o) {
    final ComparablePerson other = (ComparablePerson) o; 

    if (score == other.getScore() && this.getItemName().equalsIgnoreCase(other.getItemName())) 
        return true; 
    else 
        return false; 
} 
```

我只是调用 Collections.sort(ComparablePersonCollection);

这可能是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:04:46.877

`compareTo`and方法的`equals`实现似乎不一致，错误告诉您对于相同的两个对象`equals`给出 true`compareTo`而不产生零，这是不正确的。我建议您调用`compareTo`from`equals`以确保一致性或以其他方式定义自定义`Comparator<T>`.

只需这样做：

```
public abstract class ComparablePerson extends IDValueItem implements Comparable<ComparablePerson> {

    private int score;
    private String itemID,itemName;

    //setters and getters

    public int compareTo(ComparablePerson another) {
    if (score == another.getScore())
        return this.getItemName().compareToIgnoreCase(another.getItemName());
    else if ((score) > another.getScore())
        return 1;
    else
        return -1;
    }

    @Override
    public boolean equals(Object o) {
        return compareTo(o) == 0; 
    }   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T13:14:20.623

ComparablePerson 是抽象的，比较方法可能在其他地方重载...

您可以发布客户（拥有该集合）和具体类吗？

此代码运行良好：

```
public class ComparablePerson implements Comparable< ComparablePerson > {
   public ComparablePerson( int score, String name ) {
      _score    = score;
      _itemName = name;
   }

   @Override public int compareTo( ComparablePerson another ) {
      int delta = _score - another._score;
      if( delta != 0 ) return delta;
      return _itemName.compareToIgnoreCase( another._itemName );
   }

   @Override public boolean equals( Object o ) {
      return 0 == compareTo((ComparablePerson)o);
   }

   @Override public int hashCode() {
      return super.hashCode();
   }

   private final int    _score;
   private final String _itemName;

   public static void main( String[] args ) {
      List< ComparablePerson > oSet = new LinkedList<>();
      oSet.add( new ComparablePerson( 5, "x" ));
      oSet.add( new ComparablePerson( 5, "y" ));
      oSet.add( new ComparablePerson( 5, "z" ));
      oSet.add( new ComparablePerson( 6, "x" ));
      oSet.add( new ComparablePerson( 6, "y" ));
      oSet.add( new ComparablePerson( 6, "z" ));
      Collections.sort( oSet );
      System.err.println( "Ok" );
   }
} 
```

# c# - 列出存储在 AppDomain 中的所有自定义数据

> ID：13763605
> 
> 赞同：8
> 
> 时间：2012-12-07T12:59:51.377
> 
> 标签：c#, appdomain

为了在发生错误时存储进程的状态，我想列出存储在 AppDomain 中的所有（自定义）数据（通过 SetData）。LocalStore 属性是私有的，并且 AppDomain 类不可继承。有没有办法枚举这些数据？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T15:41:36.530

```
 AppDomain domain = AppDomain.CurrentDomain;
        domain.SetData("testKey", "testValue");

        FieldInfo[] fieldInfoArr = domain.GetType().GetFields(BindingFlags.NonPublic | BindingFlags.Instance);
        foreach (FieldInfo fieldInfo in fieldInfoArr)
        {

            if (string.Compare(fieldInfo.Name, "_LocalStore", true) != 0)
                continue;
            Object value = fieldInfo.GetValue(domain);
            if (!(value is Dictionary<string,object[]>))
                return;
            Dictionary<string, object[]> localStore = (Dictionary<string, object[]>)value;
            foreach (var item in localStore)
            {
                Object[] values = (Object[])item.Value;
                foreach (var val in values)
                {
                    if (val == null)
                        continue;
                    Console.WriteLine(item.Key + " " + val.ToString());
                }
            }

        } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T17:35:40.717

基于[Frank59 的](https://stackoverflow.com/a/13766250/177710)回答，但更简洁一些：

```
var appDomain = AppDomain.CurrentDomain;
var flags = BindingFlags.NonPublic | BindingFlags.Instance;
var fieldInfo = appDomain.GetType().GetField("_LocalStore", flags);
if (fieldInfo == null)
    return;
var localStore = fieldInfo.GetValue(appDomain) as Dictionary<string, object[]>;
if (localStore == null)
    return;
foreach (var key in localStore.Keys)
{
    var nonNullValues = localStore[key].Where(v => v != null);
    Console.WriteLine(key + ": " + string.Join(", ", nonNullValues));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-29T17:48:02.633

相同的解决方案，但作为 F# 扩展方法。可能不需要空检查。 [https://gist.github.com/ctaggart/30555d3faf94b4d0ff98](https://gist.github.com/ctaggart/30555d3faf94b4d0ff98)

```
type AppDomain with
    member x.LocalStore
        with get() =
            let f = x.GetType().GetField("_LocalStore", BindingFlags.NonPublic ||| BindingFlags.Instance)
            if f = null then Dictionary<string, obj[]>()
            else f.GetValue x :?> Dictionary<string, obj[]>

let printAppDomainObjectCache() =
    for KeyValue(k,v) in AppDomain.CurrentDomain.LocalStore do
        printfn "%s" k 
```

# php - 字符串到带有所需键的数组

> ID：13763612
> 
> 赞同：-2
> 
> 时间：2012-12-07T13:00:25.287
> 
> 标签：php, arrays, explode

> **可能重复：**
> [将字符串转换为数组列表](https://stackoverflow.com/questions/13754645/convert-a-string-into-list-of-arrays)

我有一个字符串 code=AA&price=10&user_id=5。最初我先用 & 爆炸，然后用 = 爆炸，但我得到了。

```
array(
      [0] =>code
      [0] =>AA
      [0] =>price
      [0] =>10
      [0] =>user_id
      [0] =>5

 ) 
```

我的目的是展示

```
array(
       [code]     => AA
       [price]    => 10
       [user_id]  => 5

) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T13:02:05.020

```
parse_str($str, $values);
var_dump($values); 
```

您正在解析一个 URL 编码格式，使用已经存在的[`parse_str`](http://php.net/parse_str)来解析它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T13:02:04.007

```
$string = 'code=AA&price=10&user_id=5';
$params = array();
parse_str($string, $params);
print_r($params); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T13:05:06.570

[http://php.net/manual/en/function.parse-str.php](http://php.net/manual/en/function.parse-str.php)

> parse_str — 将字符串解析为变量

```
parse_str('code=AA&price=10&user_id=5', $outputArray); 
```

# jquery - 在成功函数中解析返回的数据永远不会起作用

> ID：13763621
> 
> 赞同：4
> 
> 时间：2012-12-07T13:00:54.480
> 
> 标签：jquery, ajax, parsing

```
$.ajax({
    type : 'GET',
    url : 'dialog.php',
    data: {
        champion_name:champion_name
    },
    dataType: "text",
    success : function(data){
        alert(data);
        var dataStr = $(data).find('h2').html();
        $('#champImg').find('div').html(dataStr);

    },
    error : function(XMLHttpRequest, textStatus, errorThrown) {
        alert('failed');
    }
}); 
```

我试图在成功函数中解析返回的数据，因为我需要在某个 div 中附加一些元素，在其他 div 中附加其他元素。

但是，`$(data).find('h2').html()`永远不会起作用。
我尝试了所有可能的方法，包括更改`dataType`为`html`，但它正在工作。

返回的数据是有效的，因为我看到它`dialog.php`成功地提醒 html 代码。只是`$(data).find('h2').html()`不起作用！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T13:17:02.923

它失败是因为没有外部元素，因此选择返回两个元素。查找搜索然后是当前元素的子元素，但是您的选择返回两个元素，一个用于 the `image`，一个用于`h2`既不带`h2`-child

如果 html 是

```
<div>
   <img class='style2' 
        border='2' 
        src='$imgPath' 
        style='width:165px;height:232px;'>   
   <h2>hello</h2>
</div> 
```

它会起作用的。

如果您不能/不会更改返回的 html，您可以将成功句柄更改为

```
function(data){
  alert(data);
  var dataStr = $(data)[1].html();
  $('#champImg').find('div').html(dataStr);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T13:25:26.560

您可以使用 jQuery`filter`方法代替`find`：

```
var dataStr = $(data).filter("h2").html(); 
```

这是一个示例 jsFiddle：http: [//jsfiddle.net/5zWHa/](http://jsfiddle.net/5zWHa/)

# c++ - 状态机表示

> ID：13763627
> 
> 赞同：3
> 
> 时间：2012-12-07T13:01:03.173
> 
> 标签：c++, state-machine

我想将 GUI 实现为状态机。我认为这样做有一些好处和一些缺点，但这不是这个问题的主题。

在阅读了这篇文章之后，我发现了几种用 C++ 建模状态机的方法，我坚持使用 2，但我不知道哪种方法更适合 GUI 建模。

1.  使用以下方法将状态机表示为状态列表：

    *   `OnEvent(...);`
    *   `OnEnterState(...);`
    *   `OnExitState(...);`

    从`StateMachine::OnEvent(...)`我将事件转发到`CurrentState::OnEvent(...)`此处，决定是否进行转换。在过渡时`CurrentState::OnExitState(...)`，我`NewState::OnEnterState()`打电话给`CurrentState = NewState;`

    使用这种方法，状态将与动作紧密耦合，但是`State`当我可以从一个状态转到多个状态并且我必须针对不同的转换采取不同的动作时，可能会变得复杂。

2.  将状态机表示为具有以下属性的转换列表：

    *   `InitialState`
    *   `FinalState`
    *   `OnEvent(...)`
    *   `DoTransition(...)`

    从`StateMachine::OnEvent(...)`我将事件转发到与状态机中`InitialState`具有相同值的所有转换。`CurrentState`如果满足转换条件，则循环停止，`DoTransition`方法被调用并`CurrentState`设置为`Transition::FinalState`。

    使用这种方法`Transition`会非常简单，但转换计数的数量可能会变得非常高。此外，当一个状态接收到事件时，跟踪将执行哪些操作也将变得更加困难。

您认为哪种方法更适合 GUI 建模。您知道其他可能更适合我的问题的表示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T13:59:33.297

这是第三种选择：

*   将状态机表示为转移矩阵
    *   矩阵列索引代表一个状态
    *   矩阵行索引代表一个`symbol`（见下文）
    *   矩阵单元表示机器应过渡到的状态。这可能是新状态或相同状态
    *   每个状态都有`OnEvent`返回一个方法`symbol`

From`StateMachine::OnEvent(...)`事件被转发到`State::OnEvent`返回 a `symbol`- 执行结果。`StateMachine`然后根据当前状态和返回符号决定是否

*   必须转换到不同的状态，或者
*   当前状态被保留
*   可选地，如果进行了转换，`OnExitState`并且`OnEnterState`调用了相应的状态

3 个状态和 3 个符号的示例矩阵

```
0 1 2
1 2 0
2 0 1 
```

在这个例子中，如果机器处于任何状态`(0,1,2)`并`State::OnEvent`返回符号`0`（矩阵中的第一行） - 它保持在相同的状态

第二行说，如果当前状态是`0`并且返回的符号是`1`转换状态`1`。对于 state `1`-> state`2`和对于 state `2`-> state `0`。

类似的第三行表示对于符号`2`，状态`0`->状态`2`，状态`1`->状态`0`，状态`2`->状态`1`

重点是：

1.  的数量`symbols`可能会远低于各州的数量。
2.  国家彼此不了解
3.  所有转换都是从一个点控制的，因此当您想要以`DB_ERROR`不同方式处理符号时，`NETWORK_ERROR`只需更改转换表并且不要触及状态实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T13:38:33.930

我不知道这是否是您所期望的那种答案，但我习惯以直接的方式处理此类状态机。

使用枚举类型的状态变量（可能的状态）。在 GUI 的每个事件处理程序中，测试状态值，例如使用 switch 语句。进行相应的任何处理并设置状态的下一个值。

轻巧灵活。保持代码规则使其具有可读性和“正式性”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T13:46:08.903

我个人更喜欢你说的第一种方法。我发现第二个非常违反直觉且过于复杂。为每个状态设置一个类非常简单，如果您在 OnEnterState 中设置正确的事件处理程序并在 OnExitState 中删除它们，您的代码将是干净的，并且所有内容都将自我包含在相应的状态中，以便于阅读。

您还将避免使用大量 switch 语句来选择要调用的正确事件处理程序或过程，因为状态所做的一切在状态本身内部都是完全可见的，从而使状态机代码简短而简单。

最后但同样重要的是，这种编码方式是从状态机绘制到您将使​​用的任何语言的精确翻译。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T14:20:37.857

对于这种代码，我更喜欢一种非常简单的方法。

*   状态的枚举。
*   每个事件处理程序在决定采取什么行动之前检查当前状态。动作只是`switch`语句或`if`链中的复合块，并设置下一个状态。
*   当操作变得超过几行或需要重用时，重构为对单独辅助方法的调用。

这样就没有额外的状态机管理元数据结构，也没有代码来管理该元数据。只是您的业务数据和转换逻辑。并且动作可以直接检查和修改所有成员变量，包括当前状态。

缺点是您不能添加本地化到一个单一状态的其他数据成员。除非您有大量的州，否则这不是一个真正的问题。

我发现如果您始终在进入每个状态时配置所有 UI 属性，而不是对先前的设置进行假设并创建状态退出行为以在状态转换之前恢复不变量，我发现它也会导致更健壮的设计。无论您使用什么方案来实现转换，这都适用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-01T22:06:58.593

您还可以考虑使用 Petri 网对所需行为进行建模。如果您想实现更复杂的行为，这将是更可取的，因为它允许您准确确定所有可能的场景并防止死锁。

这个库可能有助于实现一个状态机来控制你的 GUI：[PTN Engine](https://github.com/vldtecno/PTN-Engine)

# linux - 关于在 linux 中自定义第 2 层实现的指导

> ID：13763628
> 
> 赞同：0
> 
> 时间：2012-12-07T13:01:05.373
> 
> 标签：linux, network-programming, linux-kernel, network-protocols

我有一些机器在同一个网络上运行。一个节点是将到达它的流量分配给其他节点的控制节点。问题是我希望在 MAC 标头和传入控制节点的 IP（或其他）有效负载之间有一个自定义协议标头。

控制节点接收到这样的任何数据包：

```
------------------------------------------------
| Layer 2 | IP(or whatever protocol) | Payload |
------------------------------------------------ 
```

这个数据包应该像这样分发到其他节点

```
----------------------------------------------------------------
| Layer 2 | Custom Header | IP(or whatever protocol) | Payload |
---------------------------------------------------------------- 
```

我想要一些方向来做这样的事情，有没有我可以使用的当前解决方案，我必须从头开始破解内核。一种类似的方法是使用 L2TP，但它在 IP 层上运行，所以我不想要。

我还希望这种通信在 linux 中显示为一个单独的接口，例如 tun0，除了物理 eth0 接口。

任何帮助或想法将不胜感激。

我不知道这个问题属于哪个堆栈交换网站，因此也感谢正确网站的指示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T15:21:32.370

您的情况与 VLAN 非常相似，VLAN 标头也位于 L2 标头和 IP 标头之间。您可以查看 VLAN 代码，尤其是 net/8021q/vlan_dev.c。

这里的关键是您需要构建自己的 L2 标头，因此您需要像 VLAN 一样注册自己的 header_ops：

```
static const struct header_ops vlan_header_ops = {
        .create  = vlan_dev_hard_header,
        .rebuild = vlan_dev_rebuild_header,
        .parse   = eth_header_parse,
}; 
```

并在初始化期间注册它：

```
dev->header_ops      = &vlan_header_ops;
dev->hard_header_len = real_dev->hard_header_len + VLAN_HLEN; 
```

这里的 ->create() 函数指针用于创建自定义标头：

```
static int vlan_dev_hard_header(struct sk_buff *skb, struct net_device *dev,
                unsigned short type,
                const void *daddr, const void *saddr,
                unsigned int len)
{
    struct vlan_hdr *vhdr;
    unsigned int vhdrlen = 0;
    u16 vlan_tci = 0;
    int rc;

    if (!(vlan_dev_priv(dev)->flags & VLAN_FLAG_REORDER_HDR)) {
        vhdr = (struct vlan_hdr *) skb_push(skb, VLAN_HLEN);

        vlan_tci = vlan_dev_priv(dev)->vlan_id;
        vlan_tci |= vlan_dev_get_egress_qos_mask(dev, skb);
        vhdr->h_vlan_TCI = htons(vlan_tci);

        /*
         *  Set the protocol type. For a packet of type ETH_P_802_3/2 we
         *  put the length in here instead.
         */
        if (type != ETH_P_802_3 && type != ETH_P_802_2)
            vhdr->h_vlan_encapsulated_proto = htons(type);
        else
            vhdr->h_vlan_encapsulated_proto = htons(len);

        skb->protocol = htons(ETH_P_8021Q);
        type = ETH_P_8021Q;
        vhdrlen = VLAN_HLEN;
    }

    /* Before delegating work to the lower layer, enter our MAC-address */
    if (saddr == NULL)
        saddr = dev->dev_addr;

    /* Now make the underlying real hard header */
    dev = vlan_dev_priv(dev)->real_dev;
    rc = dev_hard_header(skb, dev, type, daddr, saddr, len + vhdrlen);
    if (rc > 0)
        rc += vhdrlen;
    return rc;
} 
```

# android - 从 Activity 更改为 Fragment 时，bindService '未定义'？

> ID：13763648
> 
> 赞同：2
> 
> 时间：2012-12-07T13:02:30.210
> 
> 标签：android, android-fragments, android-fragmentactivity

我想将我的扩展活动更改为扩展片段，但看到的错误包括：

bindService - >方法bindService（Intent，ServiceConnection，int）未定义文件名，我的文件名从扩展Activity更改为Fragment？

有人遇到同样的问题吗？我正在使用 v4.support 库进行开发

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T13:07:33.333

尝试`getActivity().bindService(Intent, ServiceConnection, int)`

片段中没有`bindService`方法。但是放置在某些活动中的每个片段都可以使用它来绑定服务。

# iphone - 远程调试 iOS 应用

> ID：13763651
> 
> 赞同：1
> 
> 时间：2012-12-07T13:02:48.147
> 
> 标签：iphone, ios, debugging, remote-debugging, testflight

我正在开发一个 iOS (5.0+) 应用程序，它在我们公司的 6 种不同设备上运行良好。当我们将构建发送给客户时，他们报告说他们已经在 5 种不同的设备上对其进行了测试，并且该应用程序总是在启动后立即崩溃。我已经集成了 TestFlight 和 Flurry SDK 来跟踪使用情况和问题。

奇怪的是，TestFlight 和 Flurry 都没有报告崩溃。

我已建议客户删除配置文件并尝试从头开始安装所有内容，但这并没有产生不同的结果。

该应用程序在 App Store 中，从第一次尝试就获得批准。

更奇怪的是，客户在安装 TestFlight 构建并从 App Store 安装时报告崩溃。

如果应用程序在启动后立即崩溃，是否会在 App Store 中获得批准？

关于如何远程调试应用程序或在这种情况下如何进行的任何想法？

谢谢，节日快乐！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T13:09:05.467

一种选择是确保您的日志记录并获取崩溃日志。这个 Apple 文档展示了如何在使用和不使用 Xcode 的情况下获取日志：

[http://developer.apple.com/library/ios/#qa/qa1747/_index.html](http://developer.apple.com/library/ios/#qa/qa1747/_index.html)

获取日志后，以下是有关如何阅读和分析的文档：

[http://developer.apple.com/library/ios/#technotes/tn2151/_index.html](http://developer.apple.com/library/ios/#technotes/tn2151/_index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T10:02:08.520

通过在项目设置中添加德语和英语本地化并为每种语言设置 2 个故事板，该问题已得到解决。大了@RoboticCat！

# javascript - 检查两个时间戳是同一天

> ID：13763652
> 
> 赞同：11
> 
> 时间：2012-12-07T13:02:50.697
> 
> 标签：javascript, jquery

我从 SQL 中获取了一些带有**时间戳**的数据，我想检查它们是否是同一天......

在一个循环中，我试图检查前一个循环时间戳是否与当前循环时间戳相同......我正在尝试这样的事情......

```
$.each(data, function(key, value) {
   if( new Date([value.startTime] * 1000) === previousdate){
       console.log("*** Same day ***");
    }
    previousdate = new Date([value.startTime] * 1000);
} 
```

但是虽然它们是同一天但它们的时间不同......我只是想检查它们是否是同一天......我可以在比较它们之前修剪它们，这样它就可以正常工作...... .但是有没有其他有效的方法来做到这一点......

干杯...

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-08-04T20:10:37.860

您也可以尝试检查他们的日期字符串。

```
var isSameDay = function(date, otherDate) {
  return date.toDateString() === otherDate.toDateString();
}; 
```

这很好，因为它很容易内联。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-07T13:53:11.550

我不清楚您是否想检查它是同一天还是同一日期：您谈论同一天，但从您所做的事情来看，您似乎想检查它是否是同一天。检查日期是否相同的方法如下：

```
$.each(data, function(key, value) {
    var current = new Date(value.startTime * 1000).setHours(0, 0, 0, 0);
    var previous = new Date(previousDate).setHours(0, 0, 0, 0);

    if(current === previous){
        console.log("*** Same day ***");
    }
    previousdate = new Date([value.startTime] * 1000);
}) 
```

您基本上创建了一个新的 Date 对象，重置所有时间值（小时、分钟、秒和毫秒）。

如果您使用`previousdate`only 进行此检查，则可以简化：

```
$.each(data, function(key, value) {
    var current = new Date(value.startTime * 1000).setHours(0, 0, 0, 0);

    if(current === previousdate){
        console.log("*** Same day ***");
    }

    previousdate = current;
}); 
```

除了`* 1000`操作之外，这是AFAIK最简单，最安全的方式。你让引擎做所有的计算：不是所有的日子都是按 24 小时计算的——看夏令时——也不是所有的分钟都是按 60 秒计算的——看闰秒；所以假设这样做是不安全的。

当然，例如，某些引擎也无法处理闰秒，但它仍然更好，至少对于夏令时而言。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-07T13:10:26.323

由于您只关心 UTC 日期，这应该很容易。您的时间戳是秒数，因此如果您除以一天中的秒数，然后将该值取底，您应该得到自 1970 年 1 月 1 日以来的天数。如果两个值自 1970 年以来的天数相同，那么你就有了比赛。

```
$.each(data, function(key, value) {
    var date, previous;
    date = Math.floor(value.startTime / 60 / 60 / 24);
    if (date === previous){
       console.log("*** Same day ***");
    }
    previous = date;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-09-11T16:49:12.797

对于未来的谷歌人来说，这对我有用：

```
function isSameDay(firstTimeStamp, secondTimeStamp) {
    return (new Date(firstTimeStamp).getDate() === (new Date(secondTimeStamp).getDate());
} 
```

注意：您的时间戳需要以毫秒为单位。如果它们在几秒钟内，您将需要调整它们。

# canvas - 在 gtkmm 应用程序中使用画布

> ID：13763660
> 
> 赞同：0
> 
> 时间：2012-12-07T13:03:13.810
> 
> 标签：canvas, gtk, gtkmm

我开始尝试一些带有 c++ 接口的 gui 库。

实际上我用 gtkmm 尝试了一些例子。简单的例子工作，但现在我搜索一个画布。我发现 libgnomecanvasmm 似乎是 libgnomemm 的一部分，我希望它似乎可以在 gtkmm 下使用！

但是我还没有找到一个简单的示例，如何使用 gtkmm 接口添加 libgnomecanvas。

有人可以帮我做一个简单的程序，在一个窗口中画一条线，只包含画布作为例子。

似乎很难获得任何真实的工作示例。似乎只有类图没有任何文档。我现在正在搜索几天，但找不到任何可用的代码。

编辑：好的，我会检查 goocanvasmm。我可以安装的软件包没有示例代码。网也没有举个例子！？谁能指点我一个？我发现的文档几乎是空的，只有 doxygen 生成的类层次结构在其中。没有描述的函数*非常*有用:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T22:09:29.803

libgnomecanvas 和 libgnomecanvasmm 已被弃用并且多年未维护。仍然没有官方替代品，但 goocanvas（由 goocanvasmm 包装）相当流行且理智。

但是，libgnomecanvasmm tarball 中有一些示例。但我现在不会碰它（我曾经维护过它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T17:00:51.207

您应该尝试[goocanvasmm ，即](http://developer.gnome.org/goocanvasmm/stable/)[GooCanvas](https://live.gnome.org/GooCanvas)的 C++ 绑定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T15:49:44.997

我不知道您的要求，但[纸莎草](http://libpapyrus.sourceforge.net/)提供了原生 GTKmm 画布。gnomecanvas 应该在[几年前就被弃用了](http://mail.gnome.org/archives/release-team/2009-July/msg00043.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-05T16:06:35.540

我不允许发表评论，所以这是一个答案 - 感谢您提出这个问题，这对于开始使用画布很有用。

在线书籍“编写 GNOME 应用程序”中有一个[关于使用 GNOME 画布的章节，详细介绍了所有内容。](http://openbooks.sourceforge.net/books/wga/gnome-canvas.html)

# java - 用于 Wicket 的 RAD 工具

> ID：13763665
> 
> 赞同：0
> 
> 时间：2012-12-07T13:03:42.883
> 
> 标签：java, wicket, rad

Java 框架 Wicket 是否因其在速度和满意度方面与同样使用 wickets 的 5 天版板球运动的相似性而如此命名？

大概。

您是否知道**当前**与 wicket 一起使用的任何 RAD 工具？（即脚手架生成器，crud 形式）。

我见过过时且看似被遗忘的 WicketRad、Apache Isis 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:28:45.413

大约半年前，我问了几乎[同样的问题。](https://stackoverflow.com/questions/9997688/scaffolding-in-wicket)结果对我来说似乎仍然有效：

*   Wicket Rad，但这在 18 个月内没有更新
*   Wicket CRUD 看起来更像是一个教程或概念证明，而不是一个可行的解决方案。
*   Wicketopia 仍在通往 wicket 1.5 的道路上

我没有尝试过 Apache Isis，因为当时我的研究中没有提到它。所以我开始了一个新的宠物项目，为 wicket (Wicket-CRUDr) 开发 CRUD 组件，但由于我的时间非常有限，这仍在进行中。

总结一下：不，目前没有我知道的用于 Wicket 的当前可用的 RAD 工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T20:04:21.203

您可能有兴趣知道[Apache Isis](http://isis.apache.org/)最近大规模更新了他们的 Wicket 查看器。由于最近添加了对 JDO 的支持，您现在应该拥有一个带有 Wicket 的完整 RAD 解决方案。

# javascript - JQuery：使用 replaceWith() 方法时丢失 id

> ID：13763673
> 
> 赞同：0
> 
> 时间：2012-12-07T13:04:33.243
> 
> 标签：javascript, jquery, html

我正在尝试实现一个将更改表中元素顺序的函数。逻辑很简单：每个 TR（除了第一个和最后一个）都有一个 button_up 和一个 button_down。当用户单击其中一个按钮时，该元素将使用上方或下方的按钮更改其位置。

为此，我使用 jQuery，每个 TR 都有一个唯一的 Id，并且按钮有一个公共类。

单击具有特定类的按钮时，我正在执行以下 JavaScript 代码：

```
$('.upArrow').click( function(something)     
        {           
            var id = $(this).attr("id");

            var n=id.split("_");

            var new_id = '#row_'+n[1];

            var parent =$(new_id);
            var prev = $(new_id).prev();

            swap(prev, parent); 

            init_authors_list_ordering();
        });

        $('.downArrow').live('click', function()
        {
             var id = $(this).attr("id");

                var n=id.split("_");

                var new_id = '#row_'+n[1];

                var parent =$(new_id);
                var next = $(new_id).next();

                swap(next, parent); 

                init_authors_list_ordering();
        });
}

function swap(a, b, direction)
{
    var html = a.wrapInner('<tr></tr>').html();
    a.replaceWith(b.wrapInner('<tr></tr>').html());
    b.replaceWith(html);
} 
```

问题是：第一次，一切正常（我的功能还没有完成，我必须在更改时设置一些其他参数，但逻辑就在那里）。但是后来，这两个换了位置的元素，都失去了TR的id，不能再动了。

我不知道为什么ID丢失了。这是 replaceWith() 方法。

欢迎任何帮助。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:20:17.927

要交换元素，只需执行以下操作：

```
function swap(a, direction, b) {
    a[direction](b);
} 
```

并调用：

```
var firstElem  = $('#divID'),
    secondElem = $('#divID');

swap(firstElem, 'before', secondElem); // or after, whatever you need ? 
```

[**小提琴**](http://jsfiddle.net/JpvyX/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:11:43.057

您的常量`<tr></tr>`没有 id 属性，因此最终没有 id 属性。

编辑：这是我参考的内容：

```
function swap(a, b, direction)
{
    var html = a.wrapInner('<tr></tr>').html();
    a.replaceWith(b.wrapInner('<tr></tr>').html());
    b.replaceWith(html);
} 
```

# ruby-on-rails - Paperclip，未初始化常量 Paperclip::Storage::Fog::Excon

> ID：13763676
> 
> 赞同：5
> 
> 时间：2012-12-07T13:04:48.477
> 
> 标签：ruby-on-rails, upload, paperclip

我刚刚在带有 rails 3.2.9 的 Ubuntu 上安装了回形针，但我无法上传图像。我得到的消息是未初始化的常量 Paperclip::Storage::Fog::Excon。

对此有何解释？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T14:42:48.750

在您的机器上安装 gem：

```
gem install fog 
```

并在您的 Gemfile 中添加 Fog gem：

```
gem 'fog' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T01:10:03.807

您应该确保 Fog gem 包含在您的 Gemfile 中，或者确保在不需要时不配置 Fog 的使用。有关相同的错误消息，请参阅[此 GitHub 问题](https://github.com/thoughtbot/paperclip/issues/1071)，在这种情况下，Fog 已包含但并非在 Gemfile 中所需的所有组中都可用（它可能应该位于 Gemfile 的根目录中，而不是特定于组）。

# c# - 在复合控件中动态连接按钮单击事件

> ID：13763681
> 
> 赞同：1
> 
> 时间：2012-12-07T13:05:11.207
> 
> 标签：c#, asp.net, button, composite-controls

我有一个自定义复合控件`NoteHeaderDiv`，包含一个按钮：

```
//NoteHeaderControl snippet

public event EventHandler OnEditClick;
protected void btnEdit_Click(object sender, EventArgs e)
{
    if (OnEditClick != null)
    {
        OnEditClick(sender, e);
    }
}

public NoteHeaderControl()
{
    this.noteHeaderDiv = new HtmlGenericControl("div");
    this.noteHeaderDiv.ID = "noteHeaderDiv";
    this.noteHeaderDiv.Attributes.Add("class", "noteHeaderDiv");

    this.imagePlaceHolder = new HtmlGenericControl("span");
    this.imagePlaceHolder.ID = "imagePlaceHolder";
    this.imagePlaceHolder.Attributes.Add("class", "noteCollapsed");

    this.lblNoteDate = new Label();
    this.lblNoteDate.ID = "lblNoteDate";
    this.lblNoteDate.CssClass = "noteDate";

    this.lblNoteTitle = new Label();
    this.lblNoteTitle.ID = "lblNoteTitle";
    this.lblNoteTitle.CssClass = "noteTitle";

    this.lblNoteAuthorName = new Label();
    this.lblNoteAuthorName.ID = "lblNoteTitle";
    this.lblNoteAuthorName.CssClass = "noteAuthor";

    this.editButton = new Button();
    this.editButton.CssClass = "editNoteButton";
    this.editButton.ToolTip = "Editovat";
    this.editButton.ID = "editButton";
    this.editButton.OnClientClick = "showEditDialog('editPerson');";
    this.editButton.Click += btnEdit_Click;

    this.addTeamTaskButton = new HtmlGenericControl("button");
    this.addTeamTaskButton.ID = "addTeamTaskButton";
    this.addTeamTaskButton.Attributes.Add("class", "addTeamTaskButton");
    this.addTeamTaskButton.Attributes.Add("onclick", "showDialog('editPerson');");
    this.addTeamTaskButton.Attributes.Add("title", "Nový Team Task");

    }

#region protected override void CreateChildControls()
protected override void CreateChildControls()
{
    base.CreateChildControls();
    this.lblNoteDate.Text = String.Format("{0}.{1}.", this.noteDate.Day, this.noteDate.Month);
    this.lblNoteTitle.Text = noteTitle;
    this.lblNoteAuthorName.Text = noteAuthorName;
    //this.editButton.Click += btnEdit_Click;

    this.noteHeaderDiv.Controls.Add(imagePlaceHolder);
    this.noteHeaderDiv.Controls.Add(lblNoteDate);
    this.noteHeaderDiv.Controls.Add(lblNoteTitle);
    this.noteHeaderDiv.Controls.Add(lblNoteAuthorName);
    this.noteHeaderDiv.Controls.Add(editButton);
    this.noteHeaderDiv.Controls.Add(addTeamTaskButton);

    this.Controls.Add(noteHeaderDiv);
}

protected override void OnInit(EventArgs e)
{
    CreateChildControls();
    base.OnInit(e);
} 
```

然后在 中`Page_Load`，我将公共事件连接到另一个处理程序。问题是，它`btnEdit_Click`永远不会触发。如果我在 my 中动态创建一个按钮`Page_Load`并将其直接连接到 my 中定义的事件处理程序`Page`，那么一切都会按预期工作。

关于如何让它工作的任何建议？我不知道我做错了什么。

# javascript - ie7中不出现背景图片

> ID：13763682
> 
> 赞同：1
> 
> 时间：2012-12-07T13:05:11.323
> 
> 标签：javascript, jquery, internet-explorer-7

我尝试使用 js-cumulus 库 [http://jeroenvanwarmerdam.nl/content/resources/javascript/jscumulus/js-cumulus.html](http://jeroenvanwarmerdam.nl/content/resources/javascript/jscumulus/js-cumulus.html) 并且在 IE7 中没有出现蓝色背景图像。但如果我在库初始化后使用这个 jQuery 代码，它就可以工作。

```
 jQuery('.tagCloud').css('background-image', 'url(bg_blue.gif)'); 
```

**既然它在其他浏览器中工作，我怎么能只使用 CSS 来做到这一点？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:43:57.127

您也可以为该元素提供 css 类。

```
.imageclass
 {
   background-image:url(/bg_blue.gif);
 }

 $('.tagCloud').addClass('imageclass'); // same way you can use remove class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:11:41.887

请试试：

```
jQuery('.tagCloud').css('background-image', 'url(/bg_blue.gif)'); 
```

或者

```
jQuery('.tagCloud').css('background-image', 'url("/bg_blue.gif")'); 
```

或者

```
jQuery('.tagCloud').css('background-image', 'url("bg_blue.gif")'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T13:12:00.877

这应该有效：

```
# Notice the double quotes around the filename.
jQuery('.tagCloud').css('background-image', 'url("bg_blue.gif")'); 
```

# c++ - What's the benefit and why gdb differs from MethodName AND MethodName::

> ID：13763683
> 
> 赞同：0
> 
> 时间：2012-12-07T13:05:15.887
> 
> 标签：tab, c++, debugging, gdb

That one surprised me, when doing [tab](/questions/tagged/tab "show questions tagged 'tab'") for auto complete for a breakpoint it appeared two options to the same method.

```
test::TestFoo::SendFoo(short)
test::TestFoo::SendFoo(short)::fooID 
```

On cpp:

```
bool TestFoo::SendFoo( short x )
{
   ...
   static unsigned int fooID = 0; 
```

Why gdb differs? what's the benefit of using one or another?

Question tagged as C++ to avoid any missunderstanding from C static.

```
gdb --version
GNU gdb (GDB) Red Hat Enterprise Linux (7.2-56.el6)
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:13:37.027

`SendFoo::fooID` and `SendFoo` are two different kinds of symbols, and I can imagine there will be a difference in the two breakpoints gdb offers you - although I am not very familiar with it:

The line where `fooID` is defined/initialized will be only hit once in the whole program, so a breakpoint in that line should be hit only once as well. A function level breakpoint should be hit every time the function gets called, so there is a major difference.

AFAIK the function scope `static` means the same for both C and C++ - a variable that is shared between all calls of that function and initialized the first time the function gets called.

# python - 如何运行在python中该线程之外的线程中调用的函数

> ID：13763685
> 
> 赞同：3
> 
> 时间：2012-12-07T13:05:17.437
> 
> 标签：python, multithreading

我想知道在主线程中运行函数的可能性，而调用函数在另一个线程中。

考虑下面的例子

```
from thread import start_new_thread

def add(num1,num2):

    res = num1 + num2
    display(res)

def display(ans):
    print ans

thrd = start_new_thread(add,(2,5)) 
```

在这里，我正在调用`add()`一个新线程。依次调用`display()`即显示也在同一个线程中运行。

我想知道如何`display()`在该线程之外运行。

**根据以下答案的新代码**

如果我试图接受用户的输入并打印结果。它只要求输入一次但不重复......

from threading import Thread # threading 比 thread 模块好 from Queue import Queue

q = Queue() # 使用队列将消息从工作线程传递到主线程

```
def add():
    num1=int(raw_input('Enter 1st num : '))
    num2=int(raw_input('Enter 2nd num : '))
    res = num1 + num2
    # send the function 'display', a tuple of arguments (res,)
    # and an empty dict of keyword arguments
    q.put((display, (res,), {}))

def display(ans):
    print ('Sum of both two num is : %d ' % ans)

thrd = Thread(target=add)
thrd.start()

while True:  # a lightweight "event loop"
#    ans = q.get()
#    display(ans)
#    q.task_done()
    f, args, kwargs = q.get()
    f(*args, **kwargs)
    q.task_done() 
```

当我运行代码时，结果如下

**当前结果**

```
Enter 1st num : 5
Enter 2nd num : 6
Sum of both two num is : 11 
```

**要求的结果**

```
Enter 1st num : 5
Enter 2nd num : 6
Sum of both two num is : 11 

Enter 1st num : 8
Enter 2nd num : 2
Sum of both two num is : 10

Enter 1st num : 15
Enter 2nd num : 3
Sum of both two num is : 18 
```

我需要它在每次打印结果后要求输入，如下所示

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-07T13:23:39.587

听起来您希望所有调用都`display`发生在主线程上。像这个简单的例子，使用 a[`Queue`](http://docs.python.org/2/library/queue.html)向主线程发送消息，应该可以工作：

```
from threading import Thread  # threading is better than the thread module
from Queue import Queue

q = Queue()  # use a queue to pass messages from the worker thread to the main thread

def add(num1,num2):
    res = num1 + num2
    q.put(res)  # send the answer to the main thread's queue

def display(ans):
    print ans

thrd = Thread(target=add, args=(2,5))
thrd.start()

while True:  # a lightweight "event loop"
    ans = q.get()
    display(ans)
    q.task_done() 
```

* * *

这种轻量级“消息传递框架”的典型概括是对您的工作线程进行编程，以将任意函数和参数放在`q`. 这使您可以使主线程更笨拙。处理 q 的代码将如下所示：

```
def add(num1,num2):
    res = num1 + num2
    # send the function 'display', a tuple of arguments (res,)
    # and an empty dict of keyword arguments
    q.put((display, (res,), {}))

# snip

while True:
    # now the main thread doesn't care what function it's executing.
    # previously it assumed it was sending the message to display().
    f, args, kwargs = q.get()
    f(*args, **kwargs)
    q.task_done() 
```

* * *

从这里您可以了解如何设计一个健壮且解耦的多线程应用程序。您为每个工作线程对象配备一个 input `Queue`，并且一个全局[中介](http://en.wikipedia.org/wiki/Mediator_pattern)线程负责在线程之间混洗消息。

请注意，`Queue`基于 - 的多线程方法假定没有线程共享任何全局对象。如果是这样，您还需要确保所有共享对象都有关联的锁（请参阅[文档`threading`）](http://docs.python.org/2/library/threading.html#lock-objects)。当然，这很容易出现`Queue`基于 的方法试图避免的困难同步错误。这个故事的寓意，尽管看起来很辛苦，但要将共享状态保持在最低限度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-09T08:57:23.947

好像你想阻止[会合](http://en.wikipedia.org/wiki/Rendezvous_%28Plan_9%29)​​或[障碍](http://en.wikipedia.org/wiki/Barrier_%28computer_science%29)

# r - RCurl 和 getURL 问题与“

> ID：13763691
> 
> 赞同：1
> 
> 时间：2012-12-07T13:05:42.987
> 
> 标签：r

我用这个命令从 Twitter 下载了一些 JSON 文件

```
library(RCurl)
getURL("http://search.twitter.com/search.json?since=2012-12-06&until=2012-12-07&q=royalbaby&result_type=recent&rpp=10&page=1") 
```

但是现在所有双引号都转换为\"。在某些特殊情况下这会破坏JSON格式。我认为`getURL`或curl会做出这种改变。有什么办法可以抑制这个动作？

谢谢马库斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:27:38.100

您的页面包含 "\ ，这不是 Rcurl 行为（尝试使用浏览器打开页面）

```
library(RJSONIO)
library(RCurl)
raw_data <- getURL(you.url)
data <- fromJSON(raw_data) 
```

数据格式良好。

使用 cat 来避免 \ 表示。

# php - graph api 不会突然为我返回用户详细信息。（可能从今天开始）

> ID：13763694
> 
> 赞同：0
> 
> 时间：2012-12-07T13:05:56.570
> 
> 标签：php, facebook, facebook-graph-api

它是基于 Web 的应用程序。第一页要求登录。一旦他们单击登录按钮，一切都将通过 ajax 进行。

在ajax请求中，

```
 $user = $facebook->getUser(); 
```

这给出了正确的用户 ID。

```
 if ($user) {
    try {
        $fbme = $facebook->api('/me');
        $user_id = $fbme['id'];
    } 
    catch (FacebookApiException $e) {           
         error_log($e);
         $user = null;
    }
} 
```

下面的行之前工作过。现在它在 catch 块中结束。所以我无法获取用户详细信息。

可能是什么问题呢？由于到目前为止我没有对脚本进行更改，因此它突然停止工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T22:36:37.153

这是一个 facebook 错误。他们昨晚修好了。如果您更新您的 facebook php SDK，它将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T03:18:56.287

您的访问令牌可能已过期，我建议如下：

```
try {
    $data['user_profile'] = $profile = $this->facebook->api('/me');

    }catch (Exception $e){
       $this->facebook->setAccessToken($this->facebook->getAccessToken());
    try {

        if($this->facebook->getUser()) {
        $this->facebook->api(array('method' =>'auth.revokeAuthorization' ));
       }

    }catch(Exception $e) {
        redirect(...);
    }
    redirect(...);
    } 
```

# java - 如何解决 THIN 驱动程序不支持 Null 用户或密码

> ID：13763699
> 
> 赞同：0
> 
> 时间：2012-12-07T13:06:11.990
> 
> 标签：java, hibernate, seam, jta

当在 seam 中使用休眠配置配置 jpa 时，THIN 驱动程序不支持 Null 用户或密码

组件.xml

```
<persistence:hibernate-session-factory   name="hibernateSessionFactory" cfg-resource-name="hibernate.cfg.xml"/>
<persistence:managed-hibernate-session name="session" 
                 auto-create="true"
 session-factory-jndi-name="java:/mobeeSessionFactory"/> 
```

休眠.cfg.xml

```
<hibernate-configuration>
 <session-factory name="java:/mobeeSessionFactory">
  <property name="hibernate.connection.pool_size">10</property>
  <property name="hibernate.connection.driver_class">oracle.jdbc.OracleDriver</property>
  <property name="hibernate.connection.url">jdbc:oracle:thin:@localhost:1521:mobee</property>
  <property name="hibernate.connection.username">mobeemigrate</property>
  <property name="hibernate.show_sql">true</property>
 <property name="hibernate.dialect">org.hibernate.dialect.OracleDialect</property>
  <property name="hibernate.format_sql">true</property>

  <property name="hibernate.default_entity_mode">pojo</property>
  <property name="hibernate.session_factory_name">java:/mobeeSessionFactory</property>
  <property name="hibernate.connection.datasource">mobeeadminDataSource</property>
  <property name="hibernate.transaction.manager_lookup_class">org.hibernate.transaction.JBossTransactionManagerLookup</property>
  <property name="hibernate.transaction.factory_class">org.hibernate.transaction.JTATransactionFactory</property>
  <property name="hibernate.transaction.auto_close_session">false</property>
  <property name="hibernate.cache.provider_class">org.hibernate.cache.HashtableCacheProvider</property>
  <property name="hibernate.transaction.flush_before_completion">true</property>
  <property name="hibernate.hbm2ddl.auto">create</property>
  <!-- Here are the mappings -->
  <mapping class="tempCustomers" package="com.manam.mobee.persist.entity.TempCustomers"/>
  <mapping class="tempAccounts" package="com.manam.mobee.persist.entity.TempAccounts"/>
 </session-factory>
</hibernate-configuration> 
```

项目名称-ds.xml

```
<local-tx-datasource>
  <jndi-name>mobeeadminDataSource</jndi-name>
  <use-java-context>false</use-java-context>
  <connection-url>jdbc:oracle:thin:@localhost:1521:mobee</connection-url>
  <driver-class>oracle.jdbc.OracleDriver</driver-class>
  <user-name>mobeemigrate</user-name>
  <password>mobeemigrate</password>
 </local-tx-datasource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:09:15.580

中缺少密码`hibernate.cfg.xml`。

要修复，请在 hibernate.cfg.xml 文件中包含以下内容，如下所示：

```
 <property name="hibernate.connection.password">mobeemigrate</property> 
```

**休眠.cfg.xml**

```
<hibernate-configuration>
 <session-factory name="java:/mobeeSessionFactory">
  <property name="hibernate.connection.pool_size">10</property>
  <property name="hibernate.connection.driver_class">oracle.jdbc.OracleDriver</property>
  <property name="hibernate.connection.url">jdbc:oracle:thin:@localhost:1521:mobee</property>
  <property name="hibernate.connection.username">mobeemigrate</property>
  <property name="hibernate.connection.password">mobeemigrate</property>
  <property name="hibernate.show_sql">true</property>
 <property name="hibernate.dialect">org.hibernate.dialect.OracleDialect</property>
  <property name="hibernate.format_sql">true</property>

  <property name="hibernate.default_entity_mode">pojo</property>
  <property name="hibernate.session_factory_name">java:/mobeeSessionFactory</property>
  <property name="hibernate.connection.datasource">mobeeadminDataSource</property>
  <property name="hibernate.transaction.manager_lookup_class">org.hibernate.transaction.JBossTransactionManagerLookup</property>
  <property name="hibernate.transaction.factory_class">org.hibernate.transaction.JTATransactionFactory</property>
  <property name="hibernate.transaction.auto_close_session">false</property>
  <property name="hibernate.cache.provider_class">org.hibernate.cache.HashtableCacheProvider</property>
  <property name="hibernate.transaction.flush_before_completion">true</property>
  <property name="hibernate.hbm2ddl.auto">create</property>
  <!-- Here are the mappings -->
  <mapping class="tempCustomers" package="com.manam.mobee.persist.entity.TempCustomers"/>
  <mapping class="tempAccounts" package="com.manam.mobee.persist.entity.TempAccounts"/>
 </session-factory>
</hibernate-configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:09:45.343

您的 hibernate.cfg.xml 具有以下属性：

```
<property name="hibernate.connection.username">mobeemigrate</property> 
```

但不是对应的密码一：

```
<property name="hibernate.connection.password">mobeemigrate</property> 
```

# java - java String.format：带有本地化的数字

> ID：13763700
> 
> 赞同：18
> 
> 时间：2012-12-07T13:06:16.390
> 
> 标签：java, localization, numbers, string-formatting

是否可以像本地化`String.format`呼叫一样本地化号码`NumberFormat.format`？

我期望它只是使用

```
String.format(locale, "%d", number) 
```

但这不会返回与`NumberFormat`. 例如：

```
String.format(Locale.GERMAN, "%d", 1234567890) 
```

给出：“1234567890”，而

```
NumberFormat.getNumberInstance(Locale.GERMAN).format(1234567890) 
```

给出：“1.234.567.890”

如果无法完成，推荐的本地化文本（包括数字）的方法是什么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-07T13:12:56.923

从[文档](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html#syntax)中，您必须：

*   提供语言环境（就像您在示例中所做的那样）
*   包含“ `,`”标志以**显示特定于区域设置的分组分隔符**

所以你的例子会变成：

```
String.format(Locale.GERMAN, "%,d", 1234567890) 
```

注意 'd' 之前的附加 ' `,`' 标志。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-07T13:18:55.760

另一种方法`String.format()`是使用 MessageFormat：

```
MessageFormat format = new MessageFormat("The number is {0, number}", Locale.GERMAN);
String s = format.format(new Object[] {number}); 
```

# jquery - 显示最后一个元素到第一个元素的错误

> ID：13763710
> 
> 赞同：0
> 
> 时间：2012-12-07T13:07:17.677
> 
> 标签：jquery, struts2, jquery-validate

在验证表单时，它工作正常，但

它是先给消息 for `Description`then for `Code`then for `Name`。但我希望验证应该首先为`Name`然后`Code`为`Description`

```
$(document).ready(function() {
    $("#added").validate({
        rules: {
            Name: {
                required: true
            },
            Code: {
                required: true
            },
            Description: {
                required: true
            },

        },

        messages: {
            Name: {
                required: "Enter Name"
            },
            Code: {
                required: "Enter code"
            },

            Description: {
                required: "Enter Description"
            },
        },

        errorPlacement: function(error, element) {
            $("#error-messages").html(error); // error container
        }
    });​
}); 
```

HTML：

```
<div id="error-messages"></div>
<s:form action="added" id="added" method="post" >
   <s:textfield name="Name" id="Name" label="Name" labelposition="top" />
   <s:textarea name="Code" id="Code" rows="10" cols="50" 
                 label="Code" labelposition="top"/>

   <s:textarea name="Description" id="Description" rows="5" cols="50"
                 label="Description" labelposition="top"/>
<s:form> 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T21:54:31.727

[jQuery 验证插件](http://jzaefferer.github.com/jquery-validation/jquery.validate.js)按 DOM的顺序检索元素（参见`$.validator.prototype.elements`函数，l. 461）。

因此，为了验证从最后一个元素到第一个元素的解决方案是在我们自己的脚本部分中使用此代码修补此函数：

```
$.validator.prototype.elements = function() {
    var validator = this,
        rulesCache = {};

    // select all valid inputs inside the form (no submit or reset buttons)
    return 
        $(  // Added this in order to re-encapsulate in a jQuery object the reversed array (see below)
        $(this.currentForm)
        .find("input, select, textarea")
        .not(":submit, :reset, :image, [disabled]")
        .not( this.settings.ignore )
        .filter(function() {
            if ( !this.name && validator.settings.debug && window.console ) {
                console.error( "%o has no name assigned", this);
            }

            // select only the first element for each name, and only those with rules specified
            if ( this.name in rulesCache || !validator.objectLength($(this).rules()) ) {
                return false;
            }

            rulesCache[this.name] = true;
            return true;
        })
        .get().reverse()  // Added this in order to reverse the array order
    );
} 
```

# jquery - 未捕获的类型错误：对象 [对象对象] 没有方法“打开”

> ID：13763711
> 
> 赞同：0
> 
> 时间：2012-12-07T13:07:27.163
> 
> 标签：jquery, jquery-ui

我有这个JS代码：

```
$( document ).ready( function() {

    $( "#dialog" ).dialog({
            modal: true,
            autoOpen: false
        });

    $( "input[name=age]" ).change( function() {
        $( "#dialog" ).open();

        $.get( '/viewer?tool=10&age=' + $( this ).val(), function( data ) {
            $( "#dialog" ).close();            
        });
    });
}); 
```

当我更改名称“年龄”的输入值时，控制台中出现此错误：

未捕获的类型错误：对象 [对象对象] 没有方法“打开”

我已经正确地将脚本添加到我的 HTML 文档的头部，并且对 .dialog 的调用不会发出任何错误。

如果我将代码更改为：

```
$( document ).ready( function() {

    $( "#dialog" ).dialog({
            modal: true,
            autoOpen: false
        });

    $( "input[name=age]" ).change( function() {
        $( "#dialog" ).dialog( "open" );

        $.get( '/viewer?tool=10&age=' + $( this ).val(), function( data ) {
            $( "#dialog" ).dialog( "close" );            
        });
    });
}); 
```

一切正常。

你怎么解释？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T13:10:32.517

标准的 jQuery 集合没有`open`方法。jQuery UI 向集合添加了一个对话框方法，您可以使用它来实例化和控制对话框。

# java - PrimeFaces 日历接受无效日期作为输入

> ID：13763717
> 
> 赞同：8
> 
> 时间：2012-12-07T13:07:36.370
> 
> 标签：java, validation, jsf, primefaces, calendar

我遇到的问题是 PrimesFaces 3.4.1 日历。当使用通过按钮或输入字段焦点激活的弹出日期选择器时，您只能选择工作正常的有效日期，快乐的日子！

当您手动将日期添加到输入字段时，问题就出现了，如果您添加无效日期，PrimeFaces 日历组件会尽力将其转换为有效日期然后发送，这意味着后端验证是不行的. 下面是一些有趣的翻译：

*   2012 年 2 月 30 日变为 2014 年 2 月 6 日
*   322/05/2012 变为 5/10/2038
*   2012 年 1 月 14 日变为 2012 年 4 月 1 日

要重现这种疯狂，请查看[PrimeFaces 日历展示](http://www.primefaces.org/showcase/ui/calendarBasic.jsf;jsessionid=fy9n1sca0o1kgea904acjn9p)。

我已经看到了使用该属性的解决方案，`readOnlyInput='true'`但这似乎只能防止在字段中输入字母，而不是数字或斜杠。以下是我实施的日历的一个实例：

```
<p:calendar id="fldDateOfBirth"
            value="#{pc_CreateUser.user.dateOfBirth}"
            binding="#{pc_CreateUser.dobComp}"
            navigator="true"
            pattern="dd/MM/yyyy"
            maxlength="10"
            yearRange="-100"
            validator="#{pc_CreateUser.validateDOB}"
            title="#{msg.user_date_format_default_tip}"
            converterMessage="#{msg.user_error_dob_invalid}"
            readOnlyInput="true"
            showOn="button" /> 
```

明智的解决方案我愿意接受任何建议：

1.  这是 PrimeFaces 中的常见问题吗？有什么技巧可以用来修复它吗？
2.  我可以使用 JavaScript 在发送日期之前验证日期或完全阻止所有用户输入吗？
3.  还有什么我没想到的！

在此先感谢，这已经给我带来了几个星期的问题！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-07T16:12:17.107

默认情况下使用宽松解析的幕后用途，[导致](http://docs.oracle.com/javase/6/docs/api/java/text/DateFormat.html#setLenient%28boolean%29)`<p:calendar>`溢出的值滚动到下一个日期度量级别。例如，1 月 32 日将变为 2 月 1 日，等等。[`SimpleDateFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

[`DateFormat#setLenient()`](http://docs.oracle.com/javase/6/docs/api/java/text/DateFormat.html#setLenient%28boolean%29)用简单的 Java 术语来说，这可以通过传递来关闭`false`。另请参阅此问题：[使用 dateformat 验证日期](https://stackoverflow.com/questions/13057464/validating-a-date-using-dateformat)。

在 JSF 术语中，您基本上需要提供一个使用 non-lenient 的自定义转换器`DateFormat`。幸运的是，标准 JSF 已经以[`<f:convertDateTime>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/convertDateTime.html).

```
<p:calendar ...>
    <f:convertDateTime pattern="dd/MM/yyyy" />
</p:calendar> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-24T13:34:18.187

在 faces-config.xml 添加这个

```
<converter>
    <converter-id>localDateConverter</converter-id>
    <converter-class>com.utility.LocalDateConverter</converter-class>
</converter> 
```

在上面的类中，即 LocaldateConverter 添加下面的代码

```
/**
 * @param facesContext .
 * @param uiComponent .
 * @param input .
 * @return Object .
 */
@Override
public Object getAsObject(final FacesContext facesContext, final UIComponent   uiComponent, final String input) {
    if (StringUtils.isBlank(input)) {
        return null;
    }
    final String componentPattern = (String) uiComponent.getAttributes().get("datePattern");
    final String patternToUse = componentPattern != null ? componentPattern : CommonConstants.OUTPUT_DATE_FORMAT;
    try {
        final DateFormat fmt = new SimpleDateFormat(patternToUse);
        Date convertedDate = new java.sql.Date(fmt.parse(input).getTime());
        return convertedDate;
    } catch (Exception e) {
        throw new ConverterException(new FacesMessage(FacesMessage.SEVERITY_ERROR, "Invalid Date Format", null));
    }
}

/**
 * @param facesContext .
 * @param uiComponent .
 * @param obj .
 * @return String .
 */
@Override
public String getAsString(final FacesContext facesContext, final UIComponent uiComponent, final Object obj) {
    if (obj==null) {
        return null;
    }
    final Date date = (Date) obj;
    return date.toString();
} 
```

# sql - 如何使用 T-SQL 格式化 XML

> ID：13763718
> 
> 赞同：2
> 
> 时间：2012-12-07T13:07:38.863
> 
> 标签：sql, sql-server, tsql

我有一个名为 StoreFolder 的表，其中包含一个名为 FolderXml 的 XML 字段。每行包含一个 XML 值，如下所示：

```
<Folder FolderName="test" StoreName="TestStore" /> 
```

我需要获取以下 XML 格式的文件夹：

```
<Folders>
  <Folder FolderName="test1" StoreName="TestStore1" />
  <Folder FolderName="test2" StoreName="TestStore1" />
  <Folder FolderName="test3" StoreName="TestStore1" />
</Folders> 
```

我尝试使用以下 SQL 语句：

```
SELECT   FolderXml
FROM     StoreFolder
FOR XML PATH(''), ROOT('Folders') 
```

但它输出以下 XML：

```
<Folders>
  <FolderXml>
    <Folder FolderName="test1" StoreName="TestStore1" />
  </FolderXml>
  <FolderXml>
    <Folder FolderName="test2" StoreName="TestStore1" />
  </FolderXml>
  <FolderXml>
    <Folder FolderName="test3" StoreName="TestStore1" />
  </FolderXml>
</Folders> 
```

有人可以告诉我如何获取以下格式的 XML（使用 T-SQL）：

```
<Folders>
  <Folder FolderName="test1" StoreName="TestStore1" />
  <Folder FolderName="test2" StoreName="TestStore1" />
  <Folder FolderName="test3" StoreName="TestStore1" />
</Folders> 
```

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T14:17:33.567

您只是缺少转换/转换操作：

```
select Convert(Xml, FolderXml)
  from StoreFolder
for xml path(''), root('Folders') 
```

您的`FolderXml`字段被视为 varchar/nvarchar 字段，然后添加到 Xml 节点中。预先将其转换为 Xml 以确保它不会被包装在父标记中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:47:45.380

```
select FolderName as "@foldername",StoreName as "@StoreName"
FROM StoreFolder
FOR XML PATH('Folder'),ROOT('Folder') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T14:19:57.640

```
DECLARE @T TABLE(
    FolderXml XML
)

INSERT INTO @T VALUES
('<Folder FolderName="test1" StoreName="TestStore1" />'),
('<Folder FolderName="test2" StoreName="TestStore1" />'),
('<Folder FolderName="test3" StoreName="TestStore1" />')

SELECT (SELECT T.FolderXml)
FROM @T AS T
FOR XML PATH (''), ROOT('Folders') 
```

# sql-server-2008 - 如何知道标记为 JDBC JTDS 计算的列？

> ID：13763722
> 
> 赞同：1
> 
> 时间：2012-12-07T13:07:57.943
> 
> 标签：sql-server-2008, jdbc, jtds

我正在使用 JTDS JDBC 驱动程序。版本是 1.2.4 假设我正在获取特定表的列元数据：

```
ResultSet columnsRs = meta.getColumns(null, [pattern], [table name], null);
while(columnRs.next()){
    // I would like to know here if the current column is marked computed
} 
```

这是 ID 计算字段的表定义

```
CREATE TABLE [dbo].[C_Currencies](
    [CurrencyID] [int] IDENTITY(1,1) NOT NULL,
    [Name] [varchar](150) NOT NULL,
    [ID]  AS ([CurrencyID]),
 CONSTRAINT [pk_currency] PRIMARY KEY CLUSTERED 
(
    [CurrencyID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T14:20:38.513

根据 Java 7 的JavaDoc ，此信息以 value或空字符串（这意味着：未知）[`DatabaseMetaData.getColumns`](http://docs.oracle.com/javase/7/docs/api/java/sql/DatabaseMetaData.html#getColumns%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)在列中返回。`IS_GENERATEDCOLUMN``YES``NO`

本专栏是在 JDBC 4.0 中添加的，据我所知 jTDS 驱动程序只实现了 JDBC 3.0。如果此列在 jTDS 的 ResultSet 中不存在，那么您的选择是切换到 Microsoft SQL Server JDBC 驱动程序（我假设他们的驱动程序确实支持此列），或者使用类似 (对于表中的列`ID`）`C_Currencies`：

```
SELECT is_computed
FROM sys.tables t
INNER JOIN sys.columns c
    ON c.object_id = t.object_id
WHERE t.name = 'C_Currencies'
    AND c.name = 'ID' 
```

# android - 类似Android框架的快速对话框？

> ID：13763725
> 
> 赞同：2
> 
> 时间：2012-12-07T13:08:08.277
> 
> 标签：android, ios, frameworks, gui-builder

我正在寻找类似 Quick Dialog (http://escoz.com/open-source/quickdialog) 的东西，它可用于从 JSON 文件（或某些表示形式）构建和实例化 iOS 视图。是否有任何类似于 Android 的框架，我可以使用它从 JSON 文件或类似格式构建我的 Android 视图？请告诉我。

快速对话框 JSON 生成器：[http ://escoz.com/open-source/quickdialog/json-builder](http://escoz.com/open-source/quickdialog/json-builder)

谢谢你。

干杯，西米特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-05T07:24:28.407

我刚刚发布了一个在 Android 上提供此功能的开源库。它被称为 NexusDialog。在这里查看：[https ://github.com/dkharrat/NexusDialog](https://github.com/dkharrat/NexusDialog)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T04:13:57.367

不幸的是，我还没有看到像 QuickDialog 这样的 android 框架。

我见过的最接近的是 MVVMCross，它建立在 Mono For Android 之上：[https](https://github.com/slodge/MvvmCross) ://github.com/slodge/MvvmCross 。

# php - CKEditor 4 内联编辑保存按钮插件

> ID：13763727
> 
> 赞同：2
> 
> 时间：2012-12-07T13:08:12.433
> 
> 标签：php, javascript, jquery, ajax, ckeditor

![在此处输入图像描述](../Images/35bc69b7c4de25b030edaacc8b969a16.png)

我刚刚创建了一个插件 ajax 保存。我查看了文档，而不是让我对实现它感到困惑。单击并通过ajax php保存内容时如何使按钮工作？目前我无法获取内容。

**文件夹：/plugins/ajaxsave/plugin.js**

```
var saveCmd = {
    modes : { wysiwyg:1 },
    exec : function( editor ) {
        **var $content = editor.instances.editor1.getData(); ?????**
        var $data = {'keyId': 1, 'token': TOKEN, 'content': $content};

        $.ajax({
            type: 'post',
            url: '../../script/php/file.php',
            data: $data,
            dataType: 'json',
            cache: false,
            success: function(data) {

                    alert( 'OK' );

            },
            error: function(data){
                alert('fatal error');
            }
        });
       CKEDITOR.instances.editor1.destroy();
   }

}
CKEDITOR.plugins.add('ajaxsave',  {    

    init:function(editor) {

        var pluginName = 'ajaxsave';
        var command = editor.addCommand(pluginName,saveCmd);
        command.modes = {wysiwyg:1 };   

        editor.ui.addButton('ajaxsave', {
            label: 'Save text',
            command: pluginName,
            toolbar: 'undo,1',
            icon: this.path+'save.png'
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T16:05:38.087

```
**var $content = editor.instances.editor1.getData(); ?????** 
```

应该：

```
var $content = editor.getData(); 
```

`editor`您的插件的 init 方法有一个参数。为每个编辑器实例调用此方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T14:03:53.870

尝试这个 ：-

```
 var ckvalue = CKEDITOR.instances['editor1'].getData(); // editor1 is id of the ckeditor textarea

   //or

   $('#editor1').ckeditor(function( textarea ){
    $(textarea).val();
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-23T10:34:35.147

在这里查看我的问答

[如何在 CKeditor 4.2.1 中添加带有加载 gif 的 ajax 保存按钮。[工作示例插件]](https://stackoverflow.com/questions/18956257/how-to-add-an-ajax-save-button-with-loading-gif-to-ckeditor-4-2-1-sample-plugi)

工作保存按钮插件的答案中有一个下载链接。

# c# - 程序在部署时停止响应

> ID：13763735
> 
> 赞同：0
> 
> 时间：2012-12-07T13:08:28.990
> 
> 标签：c#, freeze

我有一个问题，我的应用程序在开发环境中运行良好，但是当部署给客户时，它只是挂起而不会触发任何异常。

为了部署，我必须将登录详细信息（已删除）和 sql 语句更改为显示的内容，我认为这可能是问题，但我希望任何 sql 语法错误都会引发异常。我已经排除了无限循环的可能性（我认为）。

我知道的唯一可能性是使用多线程并希望问题得到解决，但我没有那种时间，除非我可以确定这是解决方案。

坦率地说，我很茫然，任何关于在问题上提取任何线索的提示/建议都是适用的。

这是代码：

```
 but_exit.Enabled = false;
        but_manual.Enabled = false;

        //switch off gui timer to allow process messages
        guiTimer.Enabled = false;
        lbl_dyn_status.Text = "Finding records...";

        /*create connection resources*/

        /*MYSQl*/
        //connect to mysql
        /*

         */

        var db_name = "";
        var db_host = "";
        var db_user = "";
        var db_password = "";

        var connectionString = "SERVER=" + db_host + ";" + "DATABASE=" +
    db_name + ";" + "UID=" + db_user + ";" + "PASSWORD=" + db_password + ";";
        MySqlConnection mysql_con = new MySqlConnection(connectionString);

        //Create a list to store the  result
        List<string>[] mysql_idlist = new List<string>[1];
        mysql_idlist[0] = new List<string>();

        /*MSSQL*/
        //connect to mssyql

        db_user = "";
        db_password = "";
        db_name = "";
        db_host = "";

        System.Data.SqlClient.SqlConnection mssql_con = new System.Data.SqlClient.SqlConnection();
        mssql_con.ConnectionString = "SERVER=" + db_host + ";" + "DATABASE=" +
    db_name + ";" + "UID=" + db_user + ";" + "PASSWORD=" + db_password + ";";

        //Create a list to store the result
        List<string>[] mssql_idlist = new List<string>[2];
        mssql_idlist[0] = new List<string>();
        mssql_idlist[1] = new List<string>();

        /*Processing logic*/

        //first pass on mysql
        try
        {
            mysql_con.Open();

            //get id list
            string mysql_idlist_query = "SELECT product_code FROM cscart_products";

            MySqlCommand cmd = new MySqlCommand(mysql_idlist_query, mysql_con);

            //Create a data reader and Execute the command
            MySqlDataReader dataReader = cmd.ExecuteReader();

            //Read the data and store them in the list
            while (dataReader.Read())
            {
                mysql_idlist[0].Add(dataReader["product_code"] + "");
            }

            //close Data Reader
            dataReader.Close();

            //test content
            /*foreach (var id in mysql_idlist[0]) {
                lbl_dev.Text = lbl_dev.Text + id + " - ";
            }*/

            //close mysql connection
            mysql_con.Close();
        }

        catch (MySqlException ex)
        {

            switch (ex.Number)
            {
                case 0:
                    lbl_dev.Text = "(mysql) Cannot connect to server. Contact administrator";
                    break;

                case 1045:
                    lbl_dev.Text = "(mysql) Invalid username/password, please try again";
                    break;

                default:
                    lbl_dev.Text = "Unknown mysql error.";
                    break;
            }
        }
        catch
        {
            lbl_dev.Text = "first mysql error";
        }

        //first pass on mssql
        try
        {
            mssql_con.Open();

            //get id list
            //protect for duplicate skus
            string mssql_idlist_query = "SELECT substring (RIGHT('00'+ CAST (JH_TblFurniture6Colour.[product group] AS varchar), 2) + CAST( ID AS Varchar ), patindex('%[^0]%',RIGHT('00'+ CAST (JH_TblFurniture6Colour.[product group] AS varchar), 2) + CAST( ID AS Varchar )), 10) as SKU, ID FROM Denton_multi.dbo.JH_TblFurniture6Colour WHERE substring (RIGHT('00'+ CAST (JH_TblFurniture6Colour.[product group] AS varchar), 2) + CAST( ID AS Varchar ), patindex('%[^0]%',RIGHT('00'+ CAST (JH_TblFurniture6Colour.[product group] AS varchar), 2) + CAST( ID AS Varchar )), 10) IN (SELECT substring(RIGHT('00'+ CAST (JH_TblFurniture6Colour.[product group] AS varchar), 2) + CAST( ID AS Varchar ), patindex('%[^0]%',RIGHT('00'+ CAST (JH_TblFurniture6Colour.[product group] AS varchar), 2) + CAST( ID AS Varchar )), 10))";

            SqlCommand cmd = new SqlCommand(mssql_idlist_query, mssql_con);

            //Create a data reader and Execute the command
            SqlDataReader dataReader = cmd.ExecuteReader();

            //Read the data and store them in the list
            while (dataReader.Read())
            {
                mssql_idlist[0].Add(dataReader["SKU"] + "");
                mssql_idlist[1].Add(dataReader["ID"] + "");
            }

            //close Data Reader
            dataReader.Close();
            mssql_con.Close();
        }

        catch (SqlException ex)
        {

            switch (ex.Number)
            {
                case 0:
                    lbl_dev.Text = "(mssql) Cannot connect to server.  Contact administrator";
                    break;

                case 1045:
                    lbl_dev.Text = "(mssql) Invalid username/password, please try again";
                    break;

                default:
                    lbl_dev.Text = "Unknown mssql error. " + ex.Number; ;
                    break;
            }

        }
        catch
        {
            lbl_dev.Text = "first mssql error";
        }

        //compare lists and get ids that need inserting in mysql
        List<string>[] insert_idlist = new List<string>[10];
        insert_idlist[0] = new List<string>();//product code
        insert_idlist[1] = new List<string>();//short description
        insert_idlist[2] = new List<string>();//full description
        insert_idlist[3] = new List<string>();//product id
        insert_idlist[4] = new List<string>();//weight
        insert_idlist[5] = new List<string>();//rrp price
        insert_idlist[6] = new List<string>();//our price
        insert_idlist[7] = new List<string>();//categories
        insert_idlist[8] = new List<string>();//denton side id
        insert_idlist[9] = new List<string>();//insert / update tag
        List<string> dup_list = new List<string>();

        var about_to_insert = 0;

        foreach (var id in mssql_idlist[0])
        {
            if (mysql_idlist[0].Contains(id) == false)
            {
                //insert list
                insert_idlist[0].Add(id);
                insert_idlist[9].Add("i");
            }
            else
            {
                //update_list
                insert_idlist[0].Add(id);
                insert_idlist[9].Add("u");
            }
        }

        //construct full mssql dataset for insert items
        //final pass on mssql
        try
        {
            mssql_con.Open();

            foreach (var id in insert_idlist[0])
            {
                //top 1 for duplicate removal
                var mssql_select = "SELECT Denton_Multi.dbo.tblproductcategorys.*, Denton_Multi.dbo.JH_TblFurniture6Colour.*, substring(RIGHT('00'+ CAST (Denton_Multi.dbo.JH_TblFurniture6Colour.[product group] AS varchar), 2) + CAST( ID AS Varchar ), patindex('%[^0]%',RIGHT('00'+ CAST (Denton_Multi.dbo.JH_TblFurniture6Colour.[product group] AS varchar), 2) + CAST( ID AS Varchar )), 10) as SKU, suppliers.[supplier name], (select top 1 [item description] from Denton_Multi.dbo.JH_TblFurniture4item where [supplier code] = Denton_Multi.dbo.JH_TblFurniture6Colour.[supplier code] and [item code] = Denton_Multi.dbo.JH_TblFurniture6Colour.[item code] And [Delete] = 0) as [item description], (select top 1 [model description] from Denton_Multi.dbo.JH_TblFurniture3Range where [supplier code] = Denton_Multi.dbo.JH_TblFurniture6Colour.[supplier code] and [model code] = Denton_Multi.dbo.JH_TblFurniture6Colour.[model code]) as [range description] FROM Denton_Multi.dbo.JH_TblFurniture6Colour join Denton_Multi.dbo.tblproductcategorys on Denton_Multi.dbo.tblproductcategorys.CategoryID = Denton_Multi.dbo.JH_TblFurniture6Colour.[product group] join Denton_Multi.dbo.Suppliers on Denton_Multi.dbo.Suppliers.[supplier code] = Denton_Multi.dbo.JH_TblFurniture6Colour.[supplier code] WHERE ExportWeb = 1 AND substring(RIGHT('00'+ CAST (Denton_Multi.dbo.JH_TblFurniture6Colour.[product group] AS varchar), 2) + CAST( ID AS Varchar ), patindex('%[^0]%',RIGHT('00'+ CAST (Denton_Multi.dbo.JH_TblFurniture6Colour.[product group] AS varchar), 2) + CAST( ID AS Varchar )), 10) = '"+id+"'";
                SqlCommand cmd = new SqlCommand(mssql_select, mssql_con);

                //Create a data reader and Execute the command
                SqlDataReader dataReader = cmd.ExecuteReader();

                //Read the data and store them in the list
                while (dataReader.Read())
                {
                    insert_idlist[1].Add(dataReader["Supplier Name"] + " " + dataReader["Range Description"] + " " + dataReader["Item Description"]);
                    insert_idlist[3].Add(dataReader["Sale Price"] + "");
                    insert_idlist[2].Add(dataReader["WebDesc"] + "");
                    //insert_idlist[3].Add(dataReader["id"] + "");removed
                    insert_idlist[4].Add(dataReader["WebDimensions"] + "");
                    insert_idlist[5].Add(dataReader["RRP"] + "");
                    insert_idlist[6].Add(dataReader["Normal Price"] + "");
                    insert_idlist[7].Add("482"); //add me
                    insert_idlist[8].Add(dataReader["ID"] + "");

                    about_to_insert = about_to_insert + 1;

                }
                lbl_dyn_status.Text = "Record 0 of " + about_to_insert + "updated.";

                dataReader.Close();

            }

            //close mysql connection
            mssql_con.Close();
        }

        catch (SqlException ex)
        {

            switch (ex.Number)
            {
                case 0:
                    lbl_dev.Text = "(mssql) Cannot connect to server. Contact administrator";
                    break;

                case 1045:
                    lbl_dev.Text = "(mssql) Invalid username/password, please try again";
                    break;

                default:
                    lbl_dev.Text = "Unknown mssql error. "+ex.Number;
                    break;
            }
        }
        catch
        {
            lbl_dev.Text = "second mssql error";
        }

        //insert data in mysql db
        try
        {
            //final mysql pass
            var inc = insert_idlist[0].Count() - 1;

            if (about_to_insert > 0 && insert_idlist[0][0].Count() > 0)
            {

                mysql_con.Open();
                for (int x = 0; x <= inc; x++)
                {
                    int pid = 0;
                    if (insert_idlist[9][x] == "u")
                    {
                        //get web side product_id for updates
                        var sku = insert_idlist[0][x];
                        var get_id = "SELECT product_id FROM cscart_products WHERE product_code = '" + sku + "' LIMIT 1";
                        MySqlCommand do_get_id = new MySqlCommand(get_id, mysql_con);
                        MySqlDataReader rpid = do_get_id.ExecuteReader();

                        //get id
                        while (rpid.Read())
                        {
                            pid = Convert.ToInt32(rpid["product_id"]);
                        }
                        rpid.Close();
                    }

                    /*main record*/
                    var mysql_product = "";

                    if (insert_idlist[9][x] == "u")
                    {
                        mysql_product = "UPDATE cscart_products SET product_code = @product_code, list_price = @rrp, status='D' WHERE product_id = '" + pid + "'";
                    }
                    else
                    {
                        mysql_product = "INSERT INTO cscart_products (product_code, list_price, status) VALUES (@product_code, @rrp, 'D')";
                    }
                    MySqlCommand product_insert = new MySqlCommand(mysql_product, mysql_con);

                    product_insert.Parameters.Add(new MySqlParameter("@product_code", insert_idlist[0][x]));
                    product_insert.Parameters.Add(new MySqlParameter("@rrp", insert_idlist[5][x]));

                    product_insert.ExecuteNonQuery();
                    var insertid = product_insert.LastInsertedId;

                    //get mssql id records
                    var sql_ID = insert_idlist[8][x];
                    var stock_sql = "SELECT * FROM dbo.TblSupplierDelivery INNER JOIN dbo.TblManagerStockListings ON dbo.TblSupplierDelivery.ID = dbo.TblManagerStockListings.ID WHERE dbo.TblSupplierDelivery.ID = '" + sql_ID + "'";

                    mssql_con.Open();
                    SqlCommand cmd = new SqlCommand(stock_sql, mssql_con);

                    //Create a data reader and Execute the command
                    SqlDataReader dataReader = cmd.ExecuteReader();

                    //insert extended data fields
                    while (dataReader.Read())
                    {
                        var delivery_time = dataReader["Delivery Weeks"];
                        var stock_quant = Convert.ToInt16(dataReader["WHTotal"]) - Convert.ToInt16(dataReader["TotalAv"]);
                        var sale_price = insert_idlist[3][x];
                        var prod_ex = "";

                        if (insert_idlist[9][x] == "u")
                        {
                            prod_ex = "UPDATE cscart_oo_product_extend SET product_id = '" + pid + "', transfer_date = now(), sale_price = '" + sale_price + "', stock_due_date = '" + delivery_time + "' WHERE product_id = '" + pid + "'";
                        }
                        else
                        {
                            prod_ex = "INSERT INTO cscart_oo_product_extend (product_id, transfer_date, sale_price, stock_due_date) VALUES ('" + insertid + "', now(), '" + sale_price + "', '" + delivery_time + "')";
                        }
                        MySqlCommand product_ex_insert = new MySqlCommand(prod_ex, mysql_con);
                        product_ex_insert.ExecuteNonQuery();

                        //this is always an update
                        if (Convert.ToString(insertid) == "0")
                        {
                            insertid = pid;
                        }
                        var stock_insert = "UPDATE cscart_products SET amount = '" + stock_quant + "' WHERE product_id = '" + insertid + "'";
                        MySqlCommand product_stock_insert = new MySqlCommand(stock_insert, mysql_con);
                        product_stock_insert.ExecuteNonQuery();
                    }

                    //close Data Reader
                    dataReader.Close();
                    mssql_con.Close();

                    /*description*/
                    var mysql_desc = "";
                    if (insert_idlist[9][x] == "u")
                    {
                        mysql_desc = "UPDATE cscart_product_descriptions SET product_id = @id, product = @product_name, full_description = @product_desc WHERE product_id = @id";
                    }
                    else
                    {
                        mysql_desc = "INSERT INTO cscart_product_descriptions (product_id, product, full_description) VALUES (@id, @product_name, @product_desc)";
                    }

                    MySqlCommand product_desc = new MySqlCommand(mysql_desc, mysql_con);

                    product_desc.Parameters.Add(new MySqlParameter("@id", insertid));
                    product_desc.Parameters.Add(new MySqlParameter("@product_name", insert_idlist[1][x]));
                    product_desc.Parameters.Add(new MySqlParameter("@product_desc", insert_idlist[2][x]));

                    product_desc.ExecuteNonQuery();

                    //category
                    var mysql_cat = "";
                    if (insert_idlist[9][x] == "i")
                    {
                        mysql_cat = "INSERT INTO cscart_products_categories (product_id, category_id) VALUES (@id, @cat_id)";

                        MySqlCommand product_cat = new MySqlCommand(mysql_cat, mysql_con);

                        product_cat.Parameters.Add(new MySqlParameter("@id", insertid));
                        product_cat.Parameters.Add(new MySqlParameter("@cat_id", insert_idlist[7][x]));
                        product_cat.ExecuteNonQuery();
                    }

                    //price
                    var mysql_price = "";
                    if (insert_idlist[9][x] == "u")
                    {
                        mysql_price = "UPDATE cscart_product_prices SET product_id = @id, price = @our_price, lower_limit = '1' WHERE product_id = @id";
                    }
                    else
                    {
                        mysql_price = "INSERT INTO cscart_product_prices (product_id, price, lower_limit) VALUES (@id, @our_price, '1')";
                    }
                    MySqlCommand product_price = new MySqlCommand(mysql_price, mysql_con);

                    product_price.Parameters.Add(new MySqlParameter("@id", insertid));
                    product_price.Parameters.Add(new MySqlParameter("@our_price", insert_idlist[6][x]));

                    product_price.ExecuteNonQuery();

                    lbl_dyn_status.Text = "Record " + x + " of " + about_to_insert + "updated.";
                }

                mysql_con.Close();
            }
        }
        catch
        {
            lbl_dev.Text = "upload error";
        }

        //reset gui timer for next idle period
        minutes_left = 10;
        lbl_dyn_status.Text = "Time until next automatic update: " + minutes_left + " minutes.";
        guiTimer.Start();

        but_exit.Enabled = true;
        but_manual.Enabled = true;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:20:41.373

好的。我已经确定问题出在 sql 语句响应缓慢

# android - 升级原生库在 Android 上不起作用

> ID：13763743
> 
> 赞同：10
> 
> 时间：2012-12-07T13:08:40.633
> 
> 标签：android, android-ndk

我有一个使用本机库 (.so) 的应用程序。在新版本的应用程序中，我在 lib.xml 中进行了更改。问题是在升级应用程序后，新库似乎没有加载。如果我强制停止应用程序然后我重新启动它一切正常。在某些情况下，只需等待一段时间（例如 20 分钟）即可解决问题。

有没有人遇到过这个问题？有没有办法解决它？

**编辑** 我也试过打电话

```
System.loadLibrary("mylib.so"); 
```

在 OnUpgradeReceiver 的 onReceive 中，它是注册为在应用程序升级时调用的广播接收器 没有帮助

**编辑2**

我认为这个问题与 lib 使用音频引擎的事实有关。我这么认为的原因是我试图更改库的名称，但它也没有帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T12:34:59.343

好吧，没关系，我认为问题只是在我的库中。我需要找到在哪里，但我检查了升级后应用程序是否正确关闭。

# c# - COM 问题 - Stellaris uC

> ID：13763748
> 
> 赞同：1
> 
> 时间：2012-12-07T13:08:53.887
> 
> 标签：c#, serial-port, uart

我正在尝试与 Stellaris uC 通信，但遇到了问题。uC 实际上是以波特率向 COM4 发送数据：115200，我可以在 Putty 中看到它。

但是，当我尝试使用此代码在 C# 中读取它时，我什么也得不到：

```
public class MySerialReader : IDisposable

{ 
private SerialPort serialPort;
private Queue<byte> recievedData = new Queue<byte>();

public MySerialReader()
{
    serialPort = new SerialPort("COM4", 115200, Parity.None, 8, StopBits.One);
    serialPort.Open();
    serialPort.DataReceived += serialPort_DataReceived;
}

void serialPort_DataReceived(object s, SerialDataReceivedEventArgs e)
{
    byte[] data = new byte[serialPort.BytesToRead];
    serialPort.Read(data, 0, data.Length);
    processData();
}

void processData()
{
    // Determine if we have a "packet" in the queue
    if (recievedData.Count > 50)
    {
        var packet = Enumerable.Range(0, 50).Select(i => recievedData.Dequeue());
    }
}

public void Dispose()
{
    if (serialPort != null)
    {
        serialPort.Dispose();
    }
}
} 
```

串行端口选项正确且事件未触发。

肿瘤坏死因子。

编辑：这是较短的版本，但仍然没有成功。

```
 _serialPort = new SerialPort("COM", 115200, Parity.None, 8
        , StopBits.One);

    _serialPort.Open();

    _serialPort.DataReceived += (sender, e) =>
        {
            SerialPort sp = (SerialPort)sender;
            string indata = sp.ReadLine();
            Console.WriteLine("Data Received:");
            Console.Write(indata);        
        }; 
```

编辑2：

```
 public class SerialWrapper : IDisposable
    {
    private SerialPort _port = new SerialPort();
    private BaudRate _baudRate = BaudRate.Default;

    private Queue<byte> _serialQueue = new Queue<byte>();
    private object _lock = new object();

    public SerialWrapper(string portName, BaudRate baudRate)
    {
        try
        {
            _port.PortName = portName;
            _port.BaudRate = (int)baudRate;
        }
        catch (ArgumentNullException ex)
        {
            Debug.WriteLine(ex.Message);
        }            
    }

    /// <summary>
    /// Sends byte array to COM port
    /// </summary>
    /// <param name="buffer">Buffer to send</param>
    public void Send(byte[] buffer)
    {
        if (Open() && buffer != null && buffer.GetLength(0) > 0)
        {
            Monitor.Enter(_lock);
            _port.Write(buffer, 0, buffer.GetLength(0));
            Monitor.Exit(_lock);
        }
    }

    /// <summary>
    /// Send string as message to COM port
    /// </summary>
    /// <param name="message">String message to send</param>
    public void Send(string message)
    {
        if (Open() && !String.IsNullOrWhiteSpace(message))
        {
            ASCIIEncoding encoding = new ASCIIEncoding();
            _port.Write(message);
        }
    }

    public Queue<byte> Get()
    {
        Queue<byte> buffer = new Queue<byte>();

        Monitor.Enter(_lock);

        if (_serialQueue.Count == 0)
        {
            Monitor.Exit(_lock);
            return null;
        }

        for (int i = 0; i < _serialQueue.Count; i++)
        {
            buffer.Enqueue(_serialQueue.Dequeue());
        }

        return buffer;
    }

    /// <summary>
    /// Dispose the object
    /// </summary>
    public void Dispose()
    {
        try
        {
            _port.Close();
            _port.Dispose();
        }
        catch (IOException ex)
        {
            Debug.WriteLine("Error disposing: " + _port.PortName + ". " + ex.Message);
        }
    }

    /// <summary>
    /// Open the port.
    /// </summary>
    /// <returns></returns>
    public bool Open()
    {
        if (_port.IsOpen)
        {
            return true;
        }

        try
        {
            _port.Close();
        }
        catch (IOException ex)
        {
            Debug.WriteLine("Error closing: " + _port.PortName + "." + ex.Message);
            return false;
        }

        _port.DataBits = 8;
        _port.DiscardNull = false;
        _port.DtrEnable = false;
        _port.Encoding = Encoding.ASCII;
        _port.Handshake = Handshake.None;
        _port.Parity = Parity.None;
        _port.ReadBufferSize = 16384;
        _port.ReadTimeout = -1;
        _port.RtsEnable = false;
        _port.StopBits = StopBits.One;
        _port.WriteBufferSize = 16384;            
        _port.DataReceived += _port_DataReceived;

        try
        {
            _port.Open();
        }
        catch (IOException ex)
        {
            Debug.WriteLine("Error opening: " + _port.PortName + ". " + ex.Message);
            return false;
        }

        return true;
    }

    /// <summary>
    /// Event handler 
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    private void _port_DataReceived(object sender, SerialDataReceivedEventArgs e)
    {
        Monitor.Enter(_lock);

        try
        {
            if (_port.IsOpen)
            {
                int itemsCount = _port.BytesToRead;
                if (itemsCount > 0)
                {
                    byte[] buffer = new byte[itemsCount];
                    _port.Read(buffer, 0, itemsCount);

                    _serialQueue.Clear();

                    for (int i = 0; i < itemsCount; i++)
                    {
                        _serialQueue.Enqueue(buffer[i]);
                    }

                }
            }
        }
        catch (Exception ex)
        {

        }

        Monitor.Exit(_lock);

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T16:14:11.630

从您的片段中仍然不清楚您是否正确处理了握手。是时候自己动手了。SysInternals提供了一个非常有用的实用程序，[PortMon 工具](http://technet.microsoft.com/en-us/sysinternals/bb896644.aspx)向您显示设置为串行端口驱动程序的低级命令。

既然你让它与 Putty 一起工作，首先运行一个 Putty 会话。将 PortMon 跟踪复制并粘贴到文本文件中。现在运行您自己的程序，仍然使用 PortMon 观察驱动程序命令。您现在可以比较一些东西，重点关注 Putty 痕迹与您的痕迹的差异。

对代码更改的差异进行逆向工程可能有点棘手，驱动程序命令非常模糊。但是无论如何都要对代码进行更改，并观察它如何更改驱动程序命令以查看连接。因此，您应该能够准确地复制 Putty 配置并使通信正常工作。

# javascript - JavaScript 空数组

> ID：13763750
> 
> 赞同：1
> 
> 时间：2012-12-07T13:09:05.697
> 
> 标签：javascript

[https://stackoverflow.com/a/1234337/1690081](https://stackoverflow.com/a/1234337/1690081)

显示`array.length = 0;`它将为空数组，但在我的代码中它不会

这是一个示例：

```
window.onload = draw;
window.onload = getFiles;
var namelist = [];
function draw(){
    // assing our canvas to element to a variable
    var canvas = document.getElementById("canvas1");
    // create html5 context object to enable draw methods
    var ctx = canvas.getContext('2d');

    var x = 10; // picture start cordinate
    var y = 10; // -------||---------
    var buffer = 10; // space between pictures
    for (i=0; i<namelist.length; i++){
        console.log(namelist[i])
        var image = document.createElement('img');
        image.src = namelist[i];
        canvas.appendChild(image);
        ctx.drawImage(image,x,y,50,50);
        x+=50+buffer;
    }
}
function getFiles(){
    namelist.length = 0;// empty name list
    var picturesFiles = document.getElementById('pictures')
    picturesFiles.addEventListener('change', function(event){
        var files = picturesFiles.files;

        for (i=0; i< files.length; i++){
            namelist.push(files[i].name);
            console.log(namelist)
        }
        draw();
    }, false);

} 
```

在我`getFiles()`第二次打电话后。它不会删除以前的列表，只是附加到它。知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:20:24.497

您应该在事件处理程序中清空数组，而不是`getFiles`每个页面加载只调用一次。它实际上什么也没做，因为页面加载时数组已经为空。

```
picturesFiles.addEventListener('change', function(event){
    namelist.length = 0; //empty it here
    var files = picturesFiles.files;

    for (i=0; i< files.length; i++){
        namelist.push(files[i].name);
        console.log(namelist)
    }
    draw();
}, false); 
```

另一个问题是您不能只设置`.src`文件名。这将向**您的**服务器发出文件请求。

要真正解决这个问题，只需将文件对象推送到名称列表：

```
namelist.push(files[i]); 
```

然后，当您在绘图中处理它们时，创建本地化的 BLOB url 以显示它们：

```
var file = namelist[i];
var url = (window.URL || window.webkitURL).createObjectURL( file );
image.src = url; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:16:34.357

看起来您正在`namelist`用作全局变量。如果您将新数组作为返回值从函数中传递出来，这将更容易（并且根本不需要清空它）。

IE：

```
function getFiles() {
    var newNameList = [];
    ..... //push entries here.
    return newNameList;
} 
```

...然后`namelist`从您调用它的返回值填充：

```
namelist = getFiles(); 
```

但是，要回答实际提出的问题：

除了将长度设置为零之外，您还可以简单地通过将数组设置为新数组来重置数组：

```
namelist = []; 
```

您还没有向我们展示您如何将条目“推送”到列表中，但我怀疑最终结果是`namelist`作为通用对象而不是数组对象生成的。如果是这种情况，那么设置`.length=0`将简单地向名为的对象添加一个属性，`length`其值为`0`。`length`您使用它的方式的属性仅适用于`Array`对象。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T13:17:51.613

如果您使用的是非数字索引，那么数组将不会被清除。“...每当更改长度属性时，名称为数组索引且值不小于新长度的每个属性都会自动删除”

```
Test:
var arr = [];
arr['this'] = 'that';
arr.length = 0;
console.log(arr);
//output ['this':'that']

var arr = [];
arr[0] = 'that';
arr.length = 0;
console.log(arr);
//output [] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T13:20:32.640

清空数组的方式没有任何问题，因此您的代码肯定有其他问题。

这很好用，数组第二次不包含前面的项目：

```
var namelist = [];

function draw() {
    alert(namelist.join(', '));
}

function getFiles() {
    namelist.length = 0; // empty name list
    namelist.push('asdf');
    namelist.push('qwerty');
    namelist.push('123');
    draw();
}

getFiles();
getFiles(); 
```

演示：http: [//jsfiddle.net/Guffa/76RuX/](http://jsfiddle.net/Guffa/76RuX/)

### 编辑：

看到您的实际代码，问题来自使用回调方法来填充数组。每次调用该函数时，都会添加另一个事件处理程序，因此在第二次调用该函数后，它将调用两个事件处理程序，每个事件处理程序都将所有项目添加到数组中。

只添加一次事件处理程序。

# nosql - NoSQL 中的士气低落

> ID：13763751
> 
> 赞同：2
> 
> 时间：2012-12-07T13:09:07.390
> 
> 标签：nosql, data-modeling, aggregation, couchbase, denormalization

Nosql 数据库中的士气低落到底是什么？我读过它意味着将不同的对象类型建模为不同的文档。我的第一个猜测是它意味着聚合而不存储相关数据，即将实体的所有行存储在单个文档中，相关数据由每行的不同文档引用。但我不确定这是否正确？一个例子会很有帮助。提前致谢

我的意思是**士气低落**，而不是非正常化。我在以下链接中遇到了这个术语： 1\. [Couchbase 文档](http://www.couchbase.com/docs/couchbase-devguide-2.0/document-design-options.html) 2\. [Nosql 上的博客](http://venkat-sp.blogspot.in/2011/06/better-know-your-nosql-before-leaving.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T21:04:45.140

在 NoSQL（以及一般的数据库）的上下文中，士气低落是非规范化的同义词。您可以在许多文档中找到道德化和非规范化的混合用法，或者提到道德化与规范化相反（同样，与非规范化相同）：

*   [SQL中的非规范化是什么意思？](http://sql-databases.blurtit.com/q893353.html)
*   [数据库非规范化](http://www.mightystudents.com/essay/Database.Denormalization.essay.36453)
*   [什么是士气低落？](http://www.togotutor.com/forums/oracle/4996-what-demoralization.html)
*   [正常化和士气低落](https://thakurvinay.wordpress.com/2012/09/04/normalization-demoralization/)
*   [设计数据库 - OLTP 和 OLAP](http://grounding.co.za/blogs/brett/archive/2007/06/26/designing-databases-oltp-and-olap.aspx)

甚至还有那个参考，其中提到一些/许多拼写检查器建议“士气低落”而不是“非规范化”。这可以解释为什么有些人使用士气低落：[非规范化的影响](http://wb.itboards.com/wb/default.asp?action=9&read=160762&fid=186)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T13:16:12.840

NoSQL 世界中的非规范化与 RDBMS 世界中的非规范化含义相同。数据复制以提高读取性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T14:02:50.360

NoSQL 是一个非常非常广泛的领域。它涵盖了许多完全不同的数据库系统，具有完全不同的数据结构概念。

数据库规范化的教条主要适用于经典的关系数据库。NoSQL 数据库离关系哲学越远，你就越需要质疑这个教条。

规范化的理念假设数据库 JOIN 很便宜。因此，任何可以拆分为多个表以消除冗余的数据都应该拆分。但这并不适用于所有 NoSQL 数据库。其中一些不支持 JOIN 操作，因此获取存储在许多不同数据库条目中的数据可能是一项非常昂贵的操作，需要对数据库进行多次连续查询或昂贵的数据库端代码执行。当您使用其中一个数据库时，您应该以一种可以通过查找尽可能少的条目来满足每个性能关键用例的方式来存储数据，即使这意味着您将拥有冗余数据。

那些不支持 JOIN 的非关系型 NoSQL 数据库通常支持数据库条目中的数组。这些通常是建模 1:n 关系的首选方法。因此，当 1 个人有 n 个电话号码时，您不会将电话号码存储在单独的表格/文档/集合/whateveryoucallit 中，而是将它们存储在人员条目中的数组中。通常没有理由将电话号码作为自我维持的实体来处理，因为 SQL 无法在单个字段中正确处理多个值。

# python - 为什么我的 elif 会回到我的 if？

> ID：13763754
> 
> 赞同：1
> 
> 时间：2012-12-07T13:09:19.510
> 
> 标签：python, if-statement, python-3.x

我编写了一个非常基本的加密程序，并且在为其编写解密算法时，我遇到了一些循环问题。

```
from re import *

cipher = open('cipher.txt')
ciphertext = cipher.read()
keyfile = open('key.txt')
key = keyfile.read()
decoded = []
chardec = ''
inval = 1

print("Decoder for encrypt1.py")
while inval == 1:
    useManKey = input("Use a manual key? Y or N\n> ")
    if useManKey == 'Y' or 'y':
        key = input("Please enter the key you wish to use to decrypt\n> ")
        inval = 0
    elif useManKey == 'N' or 'n':
        inval = 0
        print("OK, decrypting")
    else:
        print("That wasn't a valid option/nPlease re-enter") 
```

当我运行它并将 useManKey 声明为 N 或 n 时，它似乎运行循环的 if 部分，就好像我已将其声明为 Y 或 y 一样。我可能在这里很愚蠢，但任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-07T13:11:51.207

`useManKey == 'Y' or 'y'`不像你认为的那样工作。你想要的是`useManKey in ('Y', 'y')`. 您首先评估的内容`useManKey == 'Y'`，然后，如果该检查失败，则测试字符串`'y'`的真实性。由于非空字符串始终为真，因此您的`if`语句始终计算为`True`. 正如评论中所指出的，如果需要，您还可以使用`upper()`or`lower()`首先将输入转换为固定大小写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T13:17:24.617

```
useManKey == 'Y' or 'y' 
```

实际上并不检查`useManKey`值是“Y”还是“y”，请使用 sr2222 的答案来完成您需要做的事情。IE。

```
useManKey in ('Y', 'y') 
```

前面的表达式计算为

```
(useManKey == 'Y') or 'y' 
```

无论“y”的值为`useManKey`非假（非无），这始终为真，这些的“或”总是评估为真，

# iphone - iOS：与其他应用程序交互

> ID：13763756
> 
> 赞同：4
> 
> 时间：2012-12-07T13:09:21.470
> 
> 标签：iphone, ssh, vpn

我想编写一个 iPad 应用程序，为其他应用程序提供安全 ( [SSH](http://en.wikipedia.org/wiki/Secure_Shell) ) 隧道进行通信。这意味着我的应用程序必须在其他应用程序运行时在后台保持活动状态。我已经找到[了这个 Apple 指南](http://tinyurl.com/crhj477)，并且我知道并非所有应用程序都允许执行此类操作。如果我假装自己是[VoIP](http://en.wikipedia.org/wiki/Voice_over_IP)应用程序会怎样？

我认为这最接近我的想法。有更好的想法吗？如果这会阻止苹果公司的批准，有什么想法吗？除了 Apple 的 VPN 解决方案之外，是否还有其他类似的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:00:25.047

它几乎肯定会因为伪装成 VoIP 应用程序而被拒绝。它可能会因为尝试与其他应用程序通信而被拒绝。

# c# - 使用查询字符串将网格视图的选定记录的 ID 传递到另一个页面

> ID：13763764
> 
> 赞同：0
> 
> 时间：2012-12-07T13:09:48.020
> 
> 标签：c#, asp.net, sql, query-string

我有一个启用了选择的gridview，我还在它下面添加了一个按钮，该按钮应该将用户带到另一个页面，formview 等待显示所选记录的完整信息。如何将 ID 作为查询字符串传递并在其他页面的 sqldatasource 中使用它？

我的网格视图有

```
ID
Name 
```

表单视图将显示

```
ID
Name
Description
Uploader
Audience
Category 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:25:25.563

您可以使用`<asp:HyperLinkField>`.

例如。：

```
<asp:GridView ID="GridView1" runat="server">
   <Columns>
     <asp:HyperLinkField DataNavigateUrlFields="ID" 
         DataNavigateUrlFormatString="/detailsPage.aspx?id={0}"
        DataTextField="ID" HeaderText="ID" />
   </Columns>
</asp:GridView> 
```

参考：

[HyperLinkField 类](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hyperlinkfield%28v=vs.100%29.aspx)：表示在数据绑定控件中显示为超链接的字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T13:33:33.340

您可以从所选行中获取值并在回发时重定向。

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selectedrow.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selectedrow.aspx)

```
 Sub CustomersGridView_SelectedIndexChanged(ByVal sender As Object, ByVal e As EventArgs)
    Dim row As GridViewRow = CustomersGridView.SelectedRow
    Response.redirect(String.Format("detailsPage.aspx?id={0}", row.cells(x).text))
  End Sub

  void CustomersGridView_SelectedIndexChanged(Object sender, EventArgs e)
  {
     GridViewRow row = CustomersGridView.SelectedRow;
     Response.Redirect(String.Format("detailsPage.aspx?id={0}", row.cells[x].text));

  } 
```

其中 x 是保存 ID 的单元格

在详细信息页面上假设存储过程：

```
Dim aSource As New SqlDataSource
 aSource.ConnectionString = {your connection string})
 aSource.ProviderName = "System.Data.SqlClient"
 aSource.SelectCommand = {Your stored procedure name}
 aSource.SelectCommandType = SqlDataSourceCommandType.StoredProcedure
 aSource.SelectParameters.Add(New System.Web.UI.WebControls.Parameter("ID", Data.DbType.String, Request.QueryString(0)))

 SqlDataSource aSource;
 aSource.ConnectionString = {your connection string});
 aSource.ProviderName = "System.Data.SqlClient";
 aSource.SelectCommand = {Your stored procedure name};
 aSource.SelectCommandType = SqlDataSourceCommandType.StoredProcedure;
 aSource.SelectParameters.Add(New System.Web.UI.WebControls.Parameter("ID", Data.DbType.String, Request.QueryString[0])); 
```

编辑：从看到您对另一个答案的回复：

我相当确定所选行也应该对您的提交功能可见。

# java - 改变 Swing 控件的外观和感觉

> ID：13763765
> 
> 赞同：-1
> 
> 时间：2012-12-07T13:09:51.470
> 
> 标签：java, swing, desktop-application, look-and-feel

我将开始用 Java 开发桌面应用程序。为此，我需要向客户提供自定义控件。我在互联网上搜索了有关覆盖 Swing 控件的信息，但没有找到任何有用的东西。他们提供了像 nimbus 等现成的外观和感觉。我的问题是如何自定义 Swing 控件来改变他们的外观和感觉？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:50:43.803

您可以在这里查看 [http://www.javasoft.de/synthetica/customize/](http://www.javasoft.de/synthetica/customize/)。“下表包含有用的 UI 默认值，可由 UIManager 设置，用于以编程方式自定义 Synthetica 外观。使用 UIManager#put(Object key, Object value) 更改值。”

# cocos2d-iphone - 如何为 cocos2d 为 Universal（iPhone、iPad）创建单个瓦片地图？

> ID：13763769
> 
> 赞同：0
> 
> 时间：2012-12-07T13:10:01.597
> 
> 标签：cocos2d-iphone

是否有可能创建可用于 iPhone（Normal&Retina）和 iPad 的单个平铺地图。

如果不能有什么选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T03:44:26.733

我也遇到了这个困境，经过一夜寻找解决方案，这就是我发现的。

您只需要一个 .tmx 文件，它应该只用于非 iPhone 分辨率。

如果你想支持所有 iOS 设备，你的 Xcode 项目中会有这样的东西：

*   瓦片地图.tmx
*   TileAtlas.png
*   TileAtlas-hd.png
*   TileAtlas-ipadhd.png
*   TileMap-ipad.png (可选) <- 如果你没有设置 ipad 后缀为 "-hd"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T03:50:03.973

看看[平铺](http://www.mapeditor.org)。在构建通用应用程序时，最好以所需的最高分辨率生成（矢量）艺术，并为每个较低分辨率的设备缩小相同的艺术作品。

# javafx-2 - JavaFX折线图中的空指针异常

> ID：13763770
> 
> 赞同：5
> 
> 时间：2012-12-07T13:10:14.577
> 
> 标签：javafx-2

我在我的 Swing 应用程序中使用 JavaFX LineChart，当尝试清除系列数据时，我得到了这个异常。

我的代码只是调用 clear 方法，调用是在 JavaFX 线程中使用 Platform.runLater 进行的，我在 ubuntu 上使用 1.7.0_09，我的代码是否有任何问题，或者这是 JavaFX 中的错误。

```
series.getData().clear(); 
```

series 是一个 XYChart.Series 对象

```
Exception in runnable
java.lang.NullPointerException
at javafx.scene.chart.LineChart.dataItemRemoved(LineChart.java:275)
at javafx.scene.chart.XYChart.dataItemsChanged(XYChart.java:470)
at javafx.scene.chart.XYChart.access$2500(XYChart.java:72)
at javafx.scene.chart.XYChart$Series$1.onChanged(XYChart.java:1462)
at com.sun.javafx.collections.ListListenerHelper$SingleChange.fireValueChangedEvent(ListListenerHelper.java:134)
at com.sun.javafx.collections.ListListenerHelper.fireValueChangedEvent(ListListenerHelper.java:48)
at com.sun.javafx.collections.ObservableListWrapper.callObservers(ObservableListWrapper.java:97)
at com.sun.javafx.collections.ObservableListWrapper.clear(ObservableListWrapper.java:184) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T12:41:02.643

现在问题解决了，看来是JavaFX的一个bug。

我已经通过添加解决了

`lineChart.setAnimated(false);`一切正常。在 JIRA Kenai 中，它已通过评论被提议为错误`lineChart.setCreateSymbols(false);`

这也有效，但我认为这不是正确的答案，我可以使用`.setCreateSymbols(false)`或`(true)`设置`setAnimated(false);`

# ios - iOS：如何根据点击的注释在地图视图中加载对象？

> ID：13763774
> 
> 赞同：0
> 
> 时间：2012-12-07T13:10:31.153
> 
> 标签：ios, annotations, android-mapview, master-detail, uicontrol

我有一个带有地图视图的应用程序，其中包含各种建筑对象（我自己的类）。每个建筑物都有一个注释属性，效果很好，用户可以在表格中搜索所需的建筑物，点击一个按钮，它将显示相关的注释。

现在我在注释上有一个标注按钮，该按钮调用一个方法（showDetails），该方法将一个 segue 推送到 DetailViewController，但我遇到的问题是让正确的构建跨越到这个 DetailViewController。所有建筑物都存储在数据控制器中的一个数组中，如果可能的话，我想从中加载一个。

到目前为止，我已经使用了 controlWasTapped 方法，我只是简单地说：

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control

for (Building* theBuilding in self.datacontroller.masterArray){
if(theBuilding.name isEqualToString:view.annotation.title){
    NSLog(@"theBuilding's name %@", theBuilding.name);
}
} 
```

这可以正常工作并返回正确的建筑物，但我对如何将其发送到 DetailViewController 感到困惑。我有一个 PrepareForSegue 方法，但我如何才能得到正确的建筑呢？另外，现在我有了 DidSelectAnnotation，还需要我的 showDetails 方法吗？

我在想我可以修改 showDetails 方法，以便它接受 Building 类型的参数，然后我可以在 prepareForSegue 中提供 Building 详细信息，但如果有更好的方法我很想知道。

那么，最好的计划是什么？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:26:04.640

在包含您发布的代码的类中声明一个实例变量。

```
Building *buildingOfInterest; 
```

然后

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control

    for (Building* theBuilding in self.datacontroller.masterArray)
        if(theBuilding.name isEqualToString:view.annotation.title) {
              buildingOfInterest = theBuilding;
              [self performSegueWithIdentifier:@"ShowBuildingSegue" sender:self];
              break;
    }
} 
```

然后：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
     if ([[segue identifier] isEqualToString:@"ShowBuildingSegue"])
         ((MyBuildingVC *)segue.destinationViewController).building = buildingOfInterest;
} 
```

并在您的目标视图控制器的头文件中：

```
@interface MyBuildingVC : UIViewController
@property (strong) Building * building;
@end 
```

# python - 使用 Fabric 将当前 git 分支部署到 heroku

> ID：13763777
> 
> 赞同：2
> 
> 时间：2012-12-07T13:10:37.327
> 
> 标签：python, git, heroku, fabric

我想缩短部署到 Heroku 的过程（即 git push）

我使用 git-flow 来组织我的代码库 - 所以通常这个过程是：

1.  开始一个新的功能分支
2.  进行编码
3.  将此分支推送到我的 dev heroku 实例 - `git push develop feature/somefeature:master`)
4.  合并到开发分支
5.  创建一个新的发布分支
6.  将此推送到生产 heroku 实例 -`git push production release/1.2.3:master`

我想做的是能够运行 Fab 命令，例如：

`fab dev_deploy`

这只会将当前工作分支的任何内容部署到我的开发实例

和

`fab prod_deploy`

它会做同样的事情，但会推送到生产实例。我可以在这里包括一些健全性检查，以确保我在发布分支等内。

我的 fab 命令会做其他事情（比如将静态资产推送到正确的 S3 存储桶等，运行南迁移命令等等）

所以我真正想知道的是如何将当前工作分支作为结构内的变量......！？

谢谢，

盖伊

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-11T07:51:30.080

好的 - 多一点挖掘让我明白了这一点：

```
from fabric.api import local
my_branch = local('git rev-parse --abbrev-ref HEAD', capture=True) 
```

这正是我想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T12:31:19.373

```
import subprocess
my_branch = subprocess.check_output(['git','branch']) 
```

或者：

```
from fabric.api import local
my_branch = local('git branch') 
```

# java - 如何将 MessageDigest 内部状态保存到数据库中？

> ID：13763780
> 
> 赞同：8
> 
> 时间：2012-12-07T13:10:41.910
> 
> 标签：java, hash, sha512

是否有可能，如果不是，如何保存 MessageDigest 对象的内部状态？我想将它保存在数据库中，所以只能使用原始数据，如`String`, `int`, `byte[]`.

我想要实现的是能够接收碎片文件（在很长一段时间内），将所有碎片保存在数据库中，并在接收到最后一个碎片后验证文件的 SHA512 摘要而不取回所有数据以前保存在数据库中。

所以基本上我想要这样的东西：

```
MessageDigest md = MessageDigest.getInstance("SHA-512");
// restore previous internal state of md
md.update(dataSegment);
// save internal md state 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T00:42:52.040

您可以将对象序列化为字符串（XML 格式）并将其返回。

检查：http: [//x-stream.github.io/tutorial.html](http://x-stream.github.io/tutorial.html)

```
public class DigestTest {

    private static final byte[] TEST_DATA = "Some test data for digest computations".getBytes();

    @Test
    public void shouldStoreAndRestoreDigest() throws Exception {
        final MessageDigest referenceDigest = MessageDigest.getInstance("SHA-512");
        MessageDigest testDigest = MessageDigest.getInstance("SHA-512");
        referenceDigest.update(TEST_DATA);
        testDigest.update(TEST_DATA);
        // store state
        final XStream xs = new XStream(new StaxDriver());
        xs.alias("md", MessageDigest.class);
        final String serializedMd = xs.toXML(testDigest);
        System.out.println(serializedMd);
        // restore state
        testDigest = (MessageDigest)xs.fromXML(serializedMd);
        // ---
        referenceDigest.update(TEST_DATA);
        testDigest.update(TEST_DATA);
        Assert.assertArrayEquals(referenceDigest.digest(), testDigest.digest());
    }
} 
```

# windows - 通过命令行输入共享位置

> ID：13763784
> 
> 赞同：1
> 
> 时间：2012-12-07T13:10:58.887
> 
> 标签：windows, command-line, shared

我需要通过命令行输入共享位置（在不同的计算机上）以在那里运行 git 命令。怎么做？像这样的东西：

```
cd \\OTHERCOMPUTERNAME\Shared_folder 
```

不会工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:18:09.490

```
pushd \\OTHERCOMPUTERNAME\Shared_folder 
```

现在您可以使用`cd`和`dir`正常导航。完成后，使用以下命令：

```
popd letter 
```

替换`letter`为您可以看到的驱动器名称。通常，它将是`Z:\`或`Y:\`。如果您的路径类似于`Z:\`，请使用以下命令：

```
popd Z 
```

# magento - Magento 中的 3 个免费样品定价规则

> ID：13763786
> 
> 赞同：1
> 
> 时间：2012-12-07T13:11:00.457
> 
> 标签：magento, discount

我正在尝试建立一个定价规则，客户可以免费订购多达三种不同的样品产品（100% 折扣）。

所有这些样品产品都属于同一类别（类别 = 样品）。如果客户订购了 4 个或更多不同的样品，则客户为第 4 个、第 5 个等产品支付正常价格，但仍然免费获得前三个。

我无法做到这一点。我尝试将 Max Qty 设置为 3，但这似乎只有在客户选择 3 个相同产品而不是 3 个不同产品的情况下才有效。

欢迎任何建议。

# forms - vb6 内部窗体调整大小

> ID：13763793
> 
> 赞同：2
> 
> 时间：2012-12-07T13:11:25.470
> 
> 标签：forms, vb6, resize

是否可以调整vb6内部表单的大小，因为如果我使用`Form1.Height`或者`Form1.Width`它包括窗口边框的高度和宽度，所以我只能在一个窗口主题中使用此代码（例如，它在带有XP主题的WinXP中效果最好，但在WinXP中不起作用经典主题，看了太久了），有什么建议吗？

![在此处输入图像描述](../Images/6a08db0e93063db58c946e894ffeea18.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T14:19:37.017

您可以做的是将 Width（外部尺寸）与 ScaleWidth（内部尺寸）进行比较，以获得非客户端边框上的尺寸。同样，您可以将 Height 与 ScaleHeight 进行比较，以获得顶部和底部的非客户端大小。从中，您可以根据所需的内部（客户区域）大小**加上**非客户大小来设置最终高度和宽度。

像这样的东西可能会进入你的`Form_Load`：

```
 Const DesiredClientHeight as Single = 3435
   Const DesiredClientWidth as Single = 3345

   Dim fNonClientHoriz As Single, fNonClientVert As Single

   fNonClientHoriz = Me.Width - Me.ScaleWidth
   fNonClientVert = Me.Height- Me.ScaleHeight

   Me.Width = DesiredClientWidth + fNonClientHoriz 
   Me.Height = DesiredClientHeight + fNonClientVert 
```

请注意，表单的宽度和高度始终以缇为单位，因此如果您将缩放模式更改为缇以外的其他值，则需要考虑这一点。

# ios6 - iTunesConnect 中指定的“此版本中的新功能”未出现在 App Store 的“版本历史记录”中

> ID：13763799
> 
> 赞同：0
> 
> 时间：2012-12-07T13:11:56.090
> 
> 标签：ios6, app-store, version, app-store-connect, xcode4.5

上传 iOS 应用程序时，我总是在 iTunes Connect 页面中的“此版本中的新功能”部分下指定信息。从 iOS6 开始，App Store 会显示每个应用程序的版本历史信息。所以，我猜这些信息来自每个提交包含的“此版本中的新功能”。但是，我找不到我的应用程序的版本历史记录。我的应用程序的版本历史记录仅包含版本号和发布日期。

我还需要做什么才能在 App Store 的版本历史记录中提供这些信息？

注意：我通过 Xcode 的 Organizer 上传应用程序，而不是通过 Application Loader。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T06:46:31.170

我遇到了同样的问题，我相信这是itunesconnect的问题。我在 appstore 中有一个有 4 个不同版本的应用程序。到目前为止，版本历史记录是空的。今天，上一个版本的历史刚刚出现（上一个版本是在几周前更新的）。顺便说一句，我很确定我已经在“此版本中的新功能”框中写了描述。

# qt - qmake 配置

> ID：13763801
> 
> 赞同：0
> 
> 时间：2012-12-07T13:12:00.947
> 
> 标签：qt, qmake

我如何更改 qmake 配置。在我制作的所有项目中，qmake 都会`-fno-exceptions -fno-rtti -DQT_NO_DYNAMIC_CAST`在 Makefile.Realease 和其他不需要的标志中放置标志。我怎样才能改变这种行为。

我在 Windows 上。我使用 mingw-64 (ruben build)。我使用以下命令构建 qt 4.8.3：

```
 ..\src\configure.exe -opensource -confirm-license -plugin-sql-mysql -plugin-sql-sqlite -no-dsp -no-vcproj -no-qt3support -no-phonon -no-phonon-backend -platform win32-g++  -largefile -fontconfig -no-webkit -nomake examples -nomake demos -prefix "D:\qt\4.8.3\x86_64-w64-mingw32"  -I "D:\mysql\include" -L "D:\mysql\lib" -l mysql

make

make install 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:46:52.937

当你添加`exceptions`和`rtti`到你的`CONFIG`变量时它有帮助吗？

```
配置 += 异常 rtti

```

您可能应该确保您的自定义 Qt 构建启用了异常和 rtti 支持：

```
配置.exe -异常 -rtti [...]

```

# php - 在多个查询中使用 WHERE

> ID：13763803
> 
> 赞同：0
> 
> 时间：2012-12-07T13:12:07.810
> 
> 标签：php, duplicates, where, multiple-tables

**这是基于搜索引擎**

我收到了重复的搜索结果...

```
$construct ="SELECT * FROM Rating, Attraction WHERE $construct" ; 
```

* * *

然后我被告知它正在选择所有结果和行，因此重复它，所以我从另一个页面使用这个查询，并在底部添加了相关的 WHERE。

```
$construct  = "SELECT Attraction.*, Type.TypeName, Rating.RatingUrl ";
$construct .= "FROM Attraction ";
$construct .= "INNER JOIN Type ON Attraction.Type = Type.TypeID ";
$construct .= "INNER JOIN Rating ON Attraction.AttractionID = Rating.AttractionID ";
$construct .= "WHERE Attraction = '$construct' "; 
```

我是否正确地构造了这个，它无法正常工作并且无法识别查询。

**$construct 是用于将关键字与数据库匹配的查询**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:16:17.107

调用您存储查询的 var`$construct`并且您还将它包含在最后一行`"WHERE Attraction = '$construct' "`，因此您实际上将前 4 行包含在最后一行中，这不会给出所需的结果。

也许重命名查询变量以使其工作就足够了。

此外，如果您不想重复，只需使用`DISTINCT`

```
SELECT DISTINCT * FROM Rating, Attraction WHERE $construct 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T13:16:37.777

我相信是因为这个

```
 $construct .= "WHERE Attraction = '$construct' "; 
```

你使用相同的变量名吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T13:19:42.407

我不确定，但请按 TypeID 的用户组可能是它的工作

# c++ - 在 C++ 中填充重复的自定义协议缓冲区字段

> ID：13763809
> 
> 赞同：1
> 
> 时间：2012-12-07T13:12:21.863
> 
> 标签：c++, protocol-buffers

如何在 C++ 中填充重复的自定义协议缓冲区字段？

示例协议缓冲区：

```
package protocol;
import "enumerations.proto";
option optimize_for=SPEED;

message UserCommandProtocol {
  required uint64 utcTime=1;
  required uint64 playerId=2;
  optional int32 targetId=3;
  optional int32 number=4;

  message pair {
      required float first = 1;
      required float second = 2;
  }

  repeated uint64 bucketId=5 [packed=true]; 
  repeated pair points=6;
  repeated pair backupPoints=7;

  required COMMANDS command=8;
  optional Type type=9;
  optional Orientation orientation=10;
  optional COMMANDS_PRIORITY priority=11;
} 
```

我只有填充点的问题。在我的代码中，我有一个 object `std::list<std::pair<float,float>> p`，我想将这些值复制到`UserCommandProtocol points`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T20:10:13.880

遍历您的对列表，添加它们中的每一个。

```
UserCommandProtocol user_command;

// then, iterate over the list... for each element of the list do:

    std::list<std::pair<float,float>>::iterator it = ...; 

    pair* added_pair = user_command.add_points();
    added_pair->set_first(it->first);
    added_pair->set_second(it->second); 
```

您可能需要阅读 Protocol Buffers 文档的 Fields 部分[（](https://developers.google.com/protocol-buffers/docs/reference/cpp-generated#fields)特别是*Repeated Embedded Message Fields*小节）。

# java - 如何将经纬度传递给 Google Maps JavaScript API v3 Directions 服务？

> ID：13763812
> 
> 赞同：9
> 
> 时间：2012-12-07T13:12:32.167
> 
> 标签：java, request

我想在我的 Java 应用程序中使用**Google Maps JavaScript API v3 。**为此，我使用**[http://maps.googleapis.com/maps/api/directions/json?origin=Toronto&destination=Montreal&sensor=false](http://maps.googleapis.com/maps/api/directions/json?origin=Toronto&destination=Montreal&sensor=false)** url创建**HttpGet**对象。

我得到了正确的响应，但是我不想传递**站名，而是想传递站的****经纬度**。

可以在**[此处找到文档](https://developers.google.com/maps/documentation/javascript/directions)**

如何将经纬度传递给此服务？

**编辑 ：**

当我将 URL 提供为 - **[http://maps.googleapis.com/maps/api/directions/json?origin=Jackson+Av&destination=Prospect+Av&sensor=false](http://maps.googleapis.com/maps/api/directions/json?origin=Jackson+Av&destination=Prospect+Av&sensor=false)** 我得到正确的响应，但是当我将 URL 提供为 -

**[http://maps.googleapis.com/maps/api/directions/json?origin=40.81649,73.907807&destination=40.819585,-73.90177&sensor=false](http://maps.googleapis.com/maps/api/directions/json?origin=40.81649,73.907807&destination=40.819585,-73.90177&sensor=false)** 我得到的响应是 -***零结果***

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-08T06:46:09.913

您可以创建 url 得到如下，

```
double lat1 = 40.74560;
   double lon1 = -73.94622000000001;
   double lat2 = 46.59122000000001;
   double lon2 = -112.004230;

   String url = "http://maps.googleapis.com/maps/api/directions/json?";

   List<NameValuePair> params = new LinkedList<NameValuePair>();
   params.add(new BasicNameValuePair("origin", lat1 + "," + lon1));
   params.add(new BasicNameValuePair("destination", lat2 + "," + lon2));
   params.add(new BasicNameValuePair("sensor", "false"));

   String paramString = URLEncodedUtils.format(params, "utf-8");
   url += paramString;
   HttpGet get = new HttpGet(url); 
```

**请检查您提供的地理坐标是否正确**

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-07T13:17:28.430

[链接到 Web 服务文档](https://developers.google.com/maps/documentation/directions/#RequestParameters)

只需使用数字表示***纬度，经度***用逗号分隔：例如`51,0`. 确保没有空格。

[http://maps.googleapis.com/maps/api/directions/json?origin=51,0&destination=51.5,-0.1&sensor=false](http://maps.googleapis.com/maps/api/directions/json?origin=51,0&destination=51.5,-0.1&sensor=false)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-01T17:56:51.107

```
var request = { 
            origin: "33.661565,73.041330",
            destination: "33.662502,73.044061",
            travelMode: google.maps.TravelMode.DRIVING
}; 
```

这工作正常

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-07T13:55:47.687

[v3 API](https://developers.google.com/maps/documentation/javascript/directions#DirectionsRequests)的文档说[google.maps.LatLng](https://developers.google.com/maps/documentation/javascript/reference#LatLng)或字符串。对于地理位置，创建并传入 google.maps.LatLng；对于地址，传入一个字符串。

```
origin:      LatLng | String,
destination: LatLng | String, 
```

并且在[参考](https://developers.google.com/maps/documentation/javascript/reference#DirectionsRequest)

```
destination LatLng|string   Location of destination. This can be specified as either a string to be geocoded or a LatLng. Required.
origin      LatLng|string   Location of origin. This can be specified as either a string to be geocoded or a LatLng. Required. 
```

和一个[航点](https://developers.google.com/maps/documentation/javascript/reference#DirectionsWaypoint)：

```
location    LatLng|string   Waypoint location. Can be an address string or LatLng. Optional. 
```

# ruby-on-rails - 如何在 Rails 3 中向控制器添加自定义操作

> ID：13763818
> 
> 赞同：23
> 
> 时间：2012-12-07T13:13:17.360
> 
> 标签：ruby-on-rails

我想向我的控制器添加另一个动作，但我不知道如何。

我在 RailsCasts 和大多数 StackOverflow 主题上找到了这个：

```
# routes.rb
resources :items, :collection => {:schedule => :post, :save_scheduling => :put}

# items_controller.rb
  ...
  def schedule
  end

  def save_scheduling
  end

# items index view:
<%= link_to 'Schedule', schedule_item_path(item) %> 
```

但这给了我错误：

```
undefined method `schedule_item_path' for #<#<Class:0x6287b50>:0x62730c0> 
```

不知道我应该从这里去哪里。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-12-07T13:21:30.020

更好的写作方式

```
resources :items, :collection => {:schedule => :post, :save_scheduling => :put} 
```

是

```
resources :items do
  collection do
    post :schedule
    put :save_scheduling
  end
end 
```

这将创建像这样的 URL

*   `/items/schedule`
*   `/items/save_scheduling`

因为您将一个传递`item`给您的`schedule_...`路由方法，所以您可能需要`member`路由而不是`collection`路由。

```
resources :items do
  member do
    post :schedule
    put :save_scheduling
  end
end 
```

这将创建像这样的 URL

*   `/items/:id/schedule`
*   `/items/:id/save_scheduling`

`schedule_item_path`现在可以使用接受`Item`实例的路由方法。最后一个问题是，您`link_to`的现状将生成一个`GET`请求，而不是`POST`您的路线所需的请求。您需要将此指定为`:method`选项。

```
link_to("Title here", schedule_item_path(item), method: :post, ...) 
```

推荐阅读： [http ://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T13:20:08.380

参考[`Rails Routing from the Outside In`](http://guides.rubyonrails.org/routing.html)

以下应该工作

```
resources :items do
  collection do
    post 'schedule'
    put 'save_scheduling'
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T13:22:34.453

你可以`routes.rb`这样写：

```
match "items/schedule" => "items#schedule", :via => :post, :as => :schedule_item
match "items/save_scheduling" => "items#save_scheduling", :via => :put, :as => :save_scheduling_item 
```

并且`link_to`助手不能`post`在 Rails 3 中发送动词。

您可以[从外向内查看 Rails 路由](http://guides.rubyonrails.org/routing.html)

# php - 以编程方式添加的捆绑产品未显示在前端，magento 问题中

> ID：13763820
> 
> 赞同：0
> 
> 时间：2012-12-07T13:13:43.367
> 
> 标签：php, magento, csv

我通过从 CSV 获取数据添加了捆绑产品。以这种方式添加的产品在管理面板中可见，但在前端不可见。我已经完成了所有线程，但没有得到解决方案。请帮助我解决这种情况。

```
require_once($magentoPath . 'includes/config.php');
  require_once($magentoPath . 'app/Mage.php');
  $storeID = 1;
  $websiteIDs = array(1);
  $cats = array("12");

  Mage::app()->setCurrentStore(Mage_Core_Model_App::ADMIN_STORE_ID);

  $productCheck = Mage::getModel('catalog/product');

  $p = array(
    'sku_type' => 0,
    'sku' => '687',
    'name' => "BarProduct",
    'description' => 'Foo',
    'short_description' => 'Bar',
    'type_id' => 'bundle',
    'attribute_set_id' => 4,
    'weight_type' => 0,
    'visibility' => 4,
    'price_type' => 0,
    'price_view' => 0,
    'status' => 1,
    'created_at' => strtotime('now'),
    'category_ids' => $cats,
    'store_id' => $storeID,
    'website_ids' => $websiteIDs
  );

  $productCheck->setData($p);
  Mage::register('product', $product);
  $optionRawData = array();
  $optionRawData[0] = array(
    'required' => 1,
    'option_id' => '',
    'position' => 0,
    'type' => 'select',
    'title' => 'FooOption',
    'default_title' => 'FooOption',
    'delete' => '',
  );

  $selectionRawData = array();
  $selectionRawData[0] = array();
  $selectionRawData[0][] = array(
    'product_id' => 337,
    'selection_qty' => 1,
    'selection_can_change_qty' => 1,
    'position' => 0,
    'is_default' => 1,
    'selection_id' => '',
    'selection_price_type' => 0,
    'selection_price_value' => 0.0,
    'option_id' => '',
    'delete' => ''
  );
Mage::register('productCheck', $productCheck);
 Mage::register('current_product', $productCheck);
 $productCheck->setCanSaveConfigurableAttributes(false);
 $productCheck->setCanSaveCustomOptions(true);
  // Set the Bundle Options & Selection Data
  $productCheck->setBundleOptionsData($optionRawData);
  $productCheck->setBundleSelectionsData($selectionRawData);
  $productCheck->setCanSaveBundleSelections(true);
  $productCheck->setAffectBundleProductSelections(true);

  $productCheck->save();
  $indexer = Mage::getSingleton('index/indexer');
foreach ($indexer->getProcessesCollection() as $process) {
    $process->reindexAll();
} 
```

*   请注意，如果我通过管理面板重新保存我的产品，它就会开始在前端显示。

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:11:09.010

`Mage::register('product', $product);`=>`Mage::register('product', $productCheck);`

# html - html中的多边形图

> ID：13763822
> 
> 赞同：-3
> 
> 时间：2012-12-07T13:13:56.190
> 
> 标签：html, css, graph, svg, polygon

我正在寻找一个好的库来在 html / javascript / css / svg 中制作这样的多边形图。

例子

[![这里](../Images/685196575495d5073f05cbd1d20e5483.png)](https://i.stack.imgur.com/oCAPh.jpg)

如果你有任何。

问候

比西埃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:25:50.623

如果您想自己实现它，[Raphaël是一个不错的选择。](http://raphaeljs.com/)

请注意，Raphaël 已经有一个[图表库](http://g.raphaeljs.com/)，这可能会有所帮助。

[这个答案](https://stackoverflow.com/questions/6153453/what-method-would-be-best-to-build-this-complex-graph/6153501#6153501)使用 Raphaël 制作了一个类似的图表。

另一个选择是[Highcharts](http://www.highcharts.com/demo/polar-spider)，这里有一个不太相似的[例子](http://www.highcharts.com/demo/polar-spider)。如果图表类型尚不存在，您必须自己制作图表类型。

# javascript - JAX RS - 泽西文件传输，响应不应重定向

> ID：13763823
> 
> 赞同：1
> 
> 时间：2012-12-07T13:14:00.403
> 
> 标签：javascript, jersey, jax-ws

我正在 JAX RS 中进行文件传输 - 使用 jersey multipart。
问题是我不太明白为什么响应会改变网站，我只是希望像普通 XHR 请求这样的表单留在网站上，然后我想要一种通过回调获得通知的方法。但是我找不到任何方法来做到这一点？

HTML：

```
 <form action="resources/picture/upload" method="post" enctype="multipart/form-data">
        <p>
            Select a Category : <select id="cat" name="cat"> <option value="1234">Icons</option></select>
        </p>
        <p>
            Select an image : <input type="file" name="file"/>
        </p>
        <input type="hidden" id="appId" name="appId" value="1"/>
        <input type="submit" value="Upload It" onclick=" NewPicture()" />
    </form> 
```

JAX RS：

```
@POST
@Path("/upload/{pictureId}")
@Consumes(MediaType.MULTIPART_FORM_DATA)
public Response overrideExistingFile(
        @FormDataParam("file") InputStream uploadedInputStream,
        @FormDataParam("file") FormDataContentDisposition fileDetail,
        @PathParam("pictureId") Long pictureId) {
    Picture oldPicture = repository.get(Picture.class, pictureId);
    String uploadedFileLocation = oldPicture.getUrl();
    File file = writeToFile(uploadedInputStream, uploadedFileLocation, true);
    if (file != null) {
        System.out.println("File attempted saved @ " + file.getAbsolutePath());
    }
    return Response.status(200).build();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T11:22:25.037

我已经解决了您的问题之一，即上传文件后重定向

如果您不想在上传文件后重定向而不是从方法**中删除 return 语句**`overrideExistingFile`并将 void 作为该方法的返回类型。像

```
public void overrideExistingFile(){
...
} 
```

并且您仍然希望获得通知，而不是在 iframe 中打开上传框并使用 frame.parent 获得通知，而无需任何重定向。

# sdk - 如何将现有共享库添加到 BlackBerry Native SDK 项目并部署到设备或模拟器？

> ID：13763824
> 
> 赞同：1
> 
> 时间：2012-12-07T13:14:05.783
> 
> 标签：sdk, native, blackberry-playbook

我正在使用 BlackBerry Native SDK 为 BlackBerry Playboock 开发应用程序。我想知道如何为我的应用程序添加一个共享库并将这个库部署到我的设备。我找到了这个[链接](http://developer.blackberry.com/native/documentation/com.qnx.doc.native_sdk.devguide/com.qnx.doc.native_sdk.devguide/topic/t_wf_add_shared_libraries.html)！还有[这个](http://developer.blackberry.com/native/documentation/com.qnx.doc.native_sdk.devguide/com.qnx.doc.native_sdk.devguide/topic/t_wf_package_deploy_use_ide.html)！但我不知道该怎么办？我是这个平台的新手。来人帮帮我 ！

# objective-c - iOS：UIImagePickerController 中的背景图片与应用程序的其余部分不一致

> ID：13763830
> 
> 赞同：2
> 
> 时间：2012-12-07T13:14:30.203
> 
> 标签：objective-c, ios, cocoa-touch

我正在使用以下代码来设置导航栏的背景：

```
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"tile.png"] forBarMetrics:UIBarMetricsDefault]; 
```

这会产生一个漂亮的平铺背景，如您在此处看到的：

![良好的背景](../Images/5e6b6098df518f8bf3ccb1c6a4e6d0b3.png)

但是，当我打开 UIImagePickerController 时，背景会以某种方式扭曲，我们最终会得到这样的结果：

![背景不好](../Images/e6aa5458b04342df23238be28733f2bd.png)

有人对如何修复它有建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T04:47:41.167

拉伸而不是平铺：停止创建 UINavigationBar 类型的类

1.  创建您的自定义 UINavigationBar 子类。

2.  注释 initwithFrameMethod

3.  添加方法 DrawRect：

    *   (void)drawRect:(CGRect)rect { UIImage *image = [UIImage imageNamed:@"bluebackground.jpeg"]; [图像drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)]; }

4.在AppDelegate.m，AppliocationdidFinishLaunching中写入[self.navigationbar setValue:[[customBar alloc]init] forKeyPath:@"navigationBar"]；

通过这种方式添加图像不会拉伸图像

请参阅此链接： http: [//www.iosdevnotes.com/2011/09/custom-uinavigationbars-techniques/](http://www.iosdevnotes.com/2011/09/custom-uinavigationbars-techniques/) [http://designm.ag/tutorials/designing-a-custom-iphone-app-navigation-bar/](http://designm.ag/tutorials/designing-a-custom-iphone-app-navigation-bar/)

希望这会帮助你。

# c# - 将数据集导入 RDLC 文件向导停止工作

> ID：13763832
> 
> 赞同：0
> 
> 时间：2012-12-07T13:14:38.043
> 
> 标签：c#, import, dataset, report, rdlc

几周前，我创建了一些（RDLC）报告。为了创建一个数据集，我定义了一个虚拟类并使用该过程导入，它运行良好。

```
public class DataSetCartaIntestata
{
    public string Desc
    public string Immage;
    public string Name;
} 
```

我这样做是为了得到匿名类型的查询结果：

```
public IEnumerable list;
list= b.Results.Where(x=>x.Name="Jack").Select(x=>new{x.Name,x.Image,x.Desc}).ToList(); 
```

现在看来，如果我要再次这样做，该过程将不允许我添加数据集。当我选择新数据集时，它会创建数据源而不是数据集。

有什么我做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:25:20.733

我发现[这里](http://msdn.microsoft.com/en-in/library/ms251784.aspx)的答案是导入程序只导入属性而不是类的简单字段，即使它们是公共的。所以我不得不定义它们。

无论如何，如果我手动定义 RDLC 中的数据集，我可以直接访问字段。

更容易出错 更改 xml 加上 VS2012 在 RDLC 上有点棘手并且崩溃了很多

# c# - C# 和 Java 泛型

> ID：13763834
> 
> 赞同：-1
> 
> 时间：2012-12-07T13:14:43.167
> 
> 标签：c#, generics, comparable

我正在尝试从 java 优先队列算法导出到 C#。但是 Comparable<> 接口有问题

爪哇

```
public class MaxPQ<Key extends Comparable<Key>>
{
    private Key[] pq; // heap-ordered complete binary tree
    private int N = 0; // in pq[1..N] with pq[0] unused
    public MaxPQ(int maxN)
    { pq = (Key[]) new Comparable[maxN+1]; }
    //...
    private bool less(int i, int j) 
    { return pq[i].compareTo(pq[j]) < 0; }

} 
```

C＃

```
public class MaxPQ<Key> where Key : IComparable<Key>
{
    private Key[] pq; // heap-ordered complete binary tree
    private int N = 0; // in pq[1..N] with pq[0] unused
    public MaxPQ(int maxN)
    { pq = new Key[maxN + 1]; }
    //...
    private bool less(int i, int j) 
    { return pq[i].compareTo(pq[j]) < 0; }//Error

} 
```

它抛出错误：“Key”不包含“compareTo”的定义，并且找不到接受“Key”类型的第一个参数的扩展方法“compareTo”（您是否缺少 using 指令或程序集引用？）

**请问你能解决这个吗？！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:17:34.357

您需要更改`compareTo`为`CompareTo`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:18:14.293

它`CompareTo`在 C# 中。根据[大写约定](http://msdn.microsoft.com/en-gb/library/vstudio/ms229043%28v=vs.100%29.aspx)，公共方法的名称是 PascalCased：

> 对所有由多个单词组成的公共成员、类型和命名空间名称使用 Pascal 大小写。

# unit-testing - 在 GXT 中的 setValidator() 之后在 Field 的单元测试中调用 validate()

> ID：13763835
> 
> 赞同：0
> 
> 时间：2012-12-07T13:14:44.050
> 
> 标签：unit-testing, textfield, validation, gxt

我使用 setValidator() 在 TextField 上设置了验证器。当我运行应用程序时，输入得到很好的验证。

在针对我的 GUI 编写单元测试时，我在 TextField 上设置了验证器，然后将值设置为无效值。但是，当我在 TextField 上调用 isValid() 或 validate() 时，它总是返回 true。

当使用其值在 TextField 上调用 validator.validate 时，它​​返回 false。

我是否误解了 TextField 上的 isValid() 和 validate() 方法？或者在我的测试中，我是否需要在验证开始之前触发一些事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:00:32.117

检查了源代码，从我看到的 validate() 和 isValid() 方法都使用 getRawValue() 检查值，这是 HTML 元素中呈现的值，并且尝试直接设置原始值仍然会失败，因为它检查需要调用 render() 的渲染标志。

```
public String getRawValue() {
    String v = rendered ? getInputEl().getValue() : "";
    if (v == null || v.equals(emptyText)) {
      return "";
    }
    return v;
} 
```

一个解决方案是继承 TextField 并覆盖这些方法，但我宁愿坚持调用 validator.validate() 。

# xamarin.android - 如何在 monodevelop/monoandroid 中使用带有滚动条的多行文本视图

> ID：13763847
> 
> 赞同：0
> 
> 时间：2012-12-07T13:15:56.217
> 
> 标签：xamarin.android, monodevelop

我是 monodevelop/monoandroid 的新手。我需要在 textview 中显示多行文本的代码我已经尝试过，但仍然无法正常工作。我认为应该有一些代码必须包含在 .cs 文件中，但我没有得到什么在那里使用。我也使用过 c# 代码，但它不起作用。我认为 ellipsize 是一个 android 属性，这就是它不起作用的原因。请给我一些解决方案。

```
<ScrollView
            android:id="@+id/scrollView2"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_margin="10dip"
            android:orientation="vertical"
            android:layout_gravity="center" >
            <RelativeLayout
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:orientation="vertical"
                    android:layout_marginTop="10dip">
                <TextView
                    android:id="@+id/tv_policy1"
                    android:layout_width="match_parent"
                    android:layout_height="fill_parent"
                    android:text="Terms of Service O-job Information Terms of Service O-job Information Terms of Service O-job Information Terms of Service O-job Information for Personal non-commercialaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa aaaaaaa aaaaaaaaaaaaaaaaa aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa aaaaaaaaaaaaaaaaaaaaaaaaa use only sdfjkj asdfjklfj sdfjkljdf sdfjkljflkj sdfskjfkl sdfjklsdjf sdfkljsdklfj sdfjhsdkfh"
                    android:textColor="#000000"
                    android:maxLines="3" 
                    android:singleLine="false" 
                    android:textSize="14dip" />
                    </RelativeLayout>
            </ScrollView> 
```

![我想显示 textview](../Images/12c79f0978b29891599605ff6fe3c591.png)

请指教....提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:22:23.213

试试这种格式：

```
<ScrollView>

    <RelativeLayout>

          <TextView/>

          <TextView/>

    <RelativeLayout/>

<ScrollView/> 
```

然后您可以使用RelativeLayout 中给出的对齐方法。

编辑：

说明你的问题是什么！编译时是否出现错误或文本显示不正确？更加详细一些。

另外，为什么在 TextView 中使用 :`android:maxLines="3"`或`android:singleLine="false"`or之类的属性。`android:layout_height="60dip"`翻译这意味着：文本必须多于一行，但最多为 3 行。此外，它不能超过 60dip。

取决于非常严格的规则的文本。使用这些规则`android:layout_width="match_parent"` `android:layout_height="wrap_content"`确保文本可以正确显示，删除我之前在您的 TextView 中提到的属性。

# c# - 如何使用 GCM 接收多个通知而不替换先前的通知？

> ID：13763849
> 
> 赞同：20
> 
> 时间：2012-12-07T13:15:58.073
> 
> 标签：c#, android, web-services, push-notification, google-cloud-messaging

我正在开发一个从 GCM 服务器接收通知的项目。

我从 GCM 服务器获得了注册 ID，并将其发送到我的服务器应用程序，该应用程序将其保存在数据库中。

我的设备收到消息，但当我尝试发送另一条消息时，先例被替换。

我知道我们有两种类型的消息：

*   可折叠的“发送同步”
*   不可折叠

那么在不更改消息名称的情况下，如何在不同时间发送两条消息？

> **更新 1：**
> 
> 当我的设备离线时（例如激活机场模式），我尝试从我的应用程序服务器发送例如 2 条消息到 Google 服务器（我读到 Google 存储了所有消息）。但是当我停用此模式时，我只收到发送的最后一条消息。
> 
> 我对不同的消息使用不同的collapse_key，并且我收到了所有消息（当然当设备在线时）。
> 
> > 有人知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-07T17:14:28.953

折叠键仅与发送到 GCM 服务器但尚未到达目标设备的消息相关（如果多条此类消息具有相同的折叠键，则只有其中一条消息在变为在线的）。

在您的问题中，您描述了一种不同的情况-设备收到第一条消息，然后设备收到第二条消息并替换原始消息。这与 GCM 无关。它与您的应用程序处理接收到的消息的方式有关。例如，如果接收消息的应用程序代码显示为通知，则由您决定新消息是覆盖现有通知还是创建新通知。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-07T13:30:05.997

您需要确保每条消息中 'collapse_key' 字段的值不同

# ios - ipad鼠标悬停

> ID：13763853
> 
> 赞同：1
> 
> 时间：2012-12-07T13:16:15.103
> 
> 标签：ios, onmouseover

```
<a href="http://boosterads.co.uk/newsite/" tooltop="dashboard" tooltip="dashboard">
<img src="http://boosterads.co.uk/newsite/wp-content/uploads/2012/12/homelight.png"  class="headerlogo" onmouseover="this.src='http://boosterads.co.uk/newsite/wp-content/uploads/2012/12/homedark.png'" onmouseout="this.src='http://boosterads.co.uk/newsite/wp-content/uploads/2012/12/homelight.png'" /></a> 
```

我正在使用此代码在鼠标悬停时更改图像。有谁知道我需要包含什么才能在 iphone/ipad 上工作？

即用户点击一次，悬停显示，他们再次点击，他们被发送到链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-21T18:47:25.717

为此，您必须定义什么是“点击”，因为点击 ipad 相当于点击计算机。这意味着目前，当您的代码将鼠标悬停在图像上（使用鼠标）时，您的代码将直接使用链接，而在 ipad 上，由于没有光标，因此无法将鼠标悬停在图像上。我能想到解决这个问题的唯一方法是找到一些代码（我自己也不知道），当它在移动设备上使用时，它会在你的网页上添加一个光标。希望这可以帮助 ：）

# mysql - 为每个用户选择每天最高的 3 个分数

> ID：13763855
> 
> 赞同：2
> 
> 时间：2012-12-07T13:16:17.430
> 
> 标签：mysql

我有一个这样的 MYSQL 表：

```
 id |  userid  |  score  |      datestamp      |
-----------------------------------------------------
  1  |    1     |   5     |  2012-12-06 03:55:16
  2  |    2     |   0,5   |  2012-12-06 04:25:21
  3  |    1     |   7     |  2012-12-06 04:35:33
  4  |    3     |   12    |  2012-12-06 04:55:45
  5  |    2     |   22    |  2012-12-06 05:25:11
  6  |    1     |   16,5  |  2012-12-06 05:55:21
  7  |    1     |   19    |  2012-12-06 13:55:16
  8  |    2     |   8,5   |  2012-12-07 06:27:16
  9  |    2     |   7,5   |  2012-12-07 08:33:16
  10 |    1     |   10    |  2012-12-07 09:25:19
  11 |    1     |   6,5   |  2012-12-07 13:33:16
  12 |    3     |   6     |  2012-12-07 15:45:44
  13 |    2     |   4     |  2012-12-07 16:05:16
  14 |    2     |   34    |  2012-12-07 18:33:55
  15 |    2     |   22    |  2012-12-07 18:42:11 
```

我想像这样显示用户分数：如果某个用户在某一天的分数超过 3 个，那么它只会得到最高的 3 个分数，为此用户每天重复该操作，然后将所有天数加在一起。我想为每个用户显示这个总和。

编辑：所以在上面的例子中，用户 1 在 06.12 上。我会将前 3 个分数加在一起并忽略第 4 个分数，然后从第二天开始添加到该数字的前 3 个分数，依此类推。我需要每个用户的号码。

编辑 2： 预期输出是：

```
 userid |   score  
--------------------
    1    |    59    //19 + 16.5 + 7 (06.12.) + 10 + 6.5 (07.12.)
    2    |    87    //22 + 0.5 (06.12.) + 34 + 22 + 8.5 (07.12.)
    3    |    18    //12 (06.12.) + 6 (07.12.) 
```

我希望这更清楚:)

我非常感谢您的帮助，因为我被卡住了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:45:40.593

请查看以下代码，如果您对我的评论的回答是`yes`:) 由于您的数据都是 2012 年和 11 月的数据，所以我花了一天时间。

*   [SQLFIDDLE](http://sqlfiddle.com/#!2/2a856/1)示例

询问：

```
select y.id, y.userid, y.score, y.datestamp 
from (select id, userid, score, datestamp 
      from scores
      group by day(datestamp)) as y    
where (select count(*) 
       from (select id, userid, score, datestamp
             from scores group by day(datestamp)) as x
       where y.score >= x.score
       and y.userid = x.userid
      ) =1 -- Top 3rd, 2nd, 1st    
order by y.score desc
; 
```

结果：

```
ID  USERID  SCORE   DATESTAMP
8   2       8.5 December, 07 2012 00:00:00+0000
20  3       6   December, 08 2012 00:00:00+0000
1   1       5   December, 06 2012 00:00:00+0000 
```

根据您后来对问题的更新。如果您需要按年/月/日为每个用户提供一些然后找到最高的，您可以简单地添加聚合函数，如`sum`上述查询。我在重复自己，因为您的样本数据只有一年，所以没有按年或按月分组。这就是为什么我花了一天。

```
select y.id, y.userid, y.score, y.datestamp 
from (select id, userid, sum(score) as score,
      datestamp 
from scores
group by userid, day(datestamp)) as y    
where (select count(*) 
from (select id, userid, sum(score) as score
      , datestamp
from scores
group by userid, day(datestamp)) as x
where y.score >= x.score
and y.userid = x.userid
) =1 -- Top 3rd, 2nd, 1st    
order by y.score desc
; 
```

基于总和的结果：

```
ID  USERID  SCORE   DATESTAMP
1   1       47.5    December, 06 2012 00:00:00+0000
8   2       16      December, 07 2012 00:00:00+0000
20  3       6       December, 08 2012 00:00:00+0000 
```

## 更新了新的源数据样本

西蒙，请看看我自己的样品。随着您的数据发生变化，我使用了我的数据。这是参考。我使用了`ansi`没有任何`over partition`or的纯样式`dense_rank`。另请注意，我使用的数据是前 2 名而不是前 3 名。你可以相应地改变。

**你猜怎么着，答案比你的第一个数据给出的第一印象简单 10 倍......**

## [SQLFIDDLE](http://sqlfiddle.com/#!2/ce1e3/1)

查询到 1：- 用户每天的前 2 名总和

```
SELECT userid, sum(Score), datestamp
FROM scores t1
where 2 >=
(SELECT count(*) 
 from scores t2
 where t1.score <= t2.score
 and t1.userid = t2.userid
 and day(t1.datestamp) = day(t2.datestamp)
 order by t2.score desc)
group by userid, datestamp 
; 
```

查询 1 的结果：

```
USERID  SUM(SCORE)  DATESTAMP
1       70      December, 06 2012 00:00:00+0000
1       30      December, 07 2012 00:00:00+0000
2       22      December, 06 2012 00:00:00+0000
2       25      December, 07 2012 00:00:00+0000
3       30      December, 06 2012 00:00:00+0000
3       30      December, 07 2012 00:00:00+0000 
```

最终查询：--所有两天用户的前 2 名总和

```
SELECT userid, sum(Score)
FROM scores t1
where 2 >=
(SELECT count(*) 
 from scores t2
 where t1.score <= t2.score
 and t1.userid = t2.userid
 and day(t1.datestamp) = day(t2.datestamp)
 order by t2.score desc)
group by userid
; 
```

最终结果：

```
USERID  SUM(SCORE)
1      100
2      47
3      60 
```

这是我使用的数据直接计算的快照。

![在此处输入图像描述](../Images/27645662cf19bb70cbd04e47ad6e47ea.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:17:59.180

```
SELECT 
    * 
FROM
    table1
LEFT JOIN 
    (SELECT * FROM table1 ORDER BY score LIMIT 3) as lr on DATE(lr.datestamp) = DATE(table1.datastamp)
GROUP BY 
    datestamp 
```

# javascript - JavaScript cookie 不保存

> ID：13763857
> 
> 赞同：2
> 
> 时间：2012-12-07T13:16:20.890
> 
> 标签：javascript, html, cookies

这学期我的网页设计课上有一个项目（我是这方面的新手），我在空闲时间一直在做一些兼职工作。我一直在尝试使用 cookie 和 JavaScript。我们在课堂上没有过多地介绍 cookie，我一直在寻找和寻找当前问题的答案。很有可能，如果您曾经对本网站上有关 JavaScript 和/或 HTML 的任何内容作出回应，我已经阅读过。正如我的标题所说，我遇到了一个问题，我的 cookie 似乎没有保存。在第一次加载时，代码工作正常，然后我重新加载页面并且它不记得 cookie 值。这是我的 cookie 脚本：

```
var name;  
if(document.cookie)  
{  
var q1=unescape(document.cookie);  
var q2=q1.search("name");  
if(q2!=(-1))  
    {  
        var n=str.split("name=");  
        var n1=n[1];  
        var n2=n1.split(";");  
        var q=n2[0];  
        name=q;  
    }  
    else  
    {  
        name=window.prompt("Please enter your name.");  
        document.cookie="name="+escape(name);  
    }  
 }     
else  
{  

name=window.prompt("Please enter your name.");  
    document.cookie="name="+escape(name);  
} 
```

这将在页面的其余部分加载后使用：

```
document.writeln(name+"text stuff"); 
```

如果 cookie 中的值不正确，我创建了这个函数，该函数通过 HTML 中的按钮调用：

```
function wrongPerson()  
{  
    document.cookie="name=hooper; expires=Thu, 01 Jan 1970 00:00:01 GMT";  
    location.reload();  
} 
```

很抱歉这么长的帖子，但我想确保社区拥有尽可能多的信息。另外，很抱歉格式不好。我不知道如何把我的整个长代码带过来并让系统允许它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:38:48.360

您需要在 cookie 脚本上设置过期时间。如果您没有在 cookie 中设置过期日期，它将被识别为“一次性 cookie”。在重新加载或其他任何操作后，它会消失。

将过期时间设置为 2014 年 1 月 1 日星期三 00:00:01 GMT

这是我个人的看法，但我宁愿使用`window.location.href = window.location.href;`而不是`location.reload();`

# mysql - 在mysql中插入和排除重复项

> ID：13763858
> 
> 赞同：0
> 
> 时间：2012-12-07T13:16:22.407
> 
> 标签：mysql, insert, duplicate-data

我有 2 个相等的数据库（A 和 B），每个表在单独的离线机器上运行。

每天我都会导出他们的数据（以 csv 格式）并将其“合并”到第三个数据库 (C) 中。我先处理 A，然后处理 B（我将 A 的内容插入 C，然后将 B 的内容插入 C）

现在，我可能会得到重复的行。如果某些字段（例如“邮件”）已经存在，我会考虑重复。我不在乎其他字段是否相同。

如何将 A 和 B 插入 C 中，不包括那些重复的行？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:20:38.490

最简单的解决方案应该是在有问题的列上创建一个唯一索引，并将第二个插入作为 INSERT IGNORE 运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T15:12:18.747

我个人使用 `ON DUPLICATE KEY UPDATE`as using`INSERT IGNORE`会导致任何错误[作为警告抛出](http://dev.mysql.com/doc/refman/5.5/en/insert.html)。

这可能会产生一些副作用，并可能导致您意想不到的行为。有关某些副作用的详细信息，请参阅[这篇文章。](https://stackoverflow.com/questions/548541/insert-ignore-vs-insert-on-duplicate-key-update)

如果您最终使用该`ON DUPLICATE KEY UPDATE`语法，它还将提供一种更改逻辑的方法，以便在业务需求发生变化时使用新数据更新特定字段。

例如，您可以通过说 来计算重复记录插入的次数`ON DUPLICATE KEY UPDATE quantity = quantity+1`。

上面引用的帖子有更多信息。

# php - PHP中映射器和集合模式的区别

> ID：13763861
> 
> 赞同：0
> 
> 时间：2012-12-07T13:16:27.243
> 
> 标签：php, oop, design-patterns, collections, datamapper

PHP中的映射器和集合模式有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T12:59:47.427

映射器（假设您指的是[数据映射器](http://martinfowler.com/eaaCatalog/dataMapper.html)模式）是抽象存储逻辑的结构。它是 SQL 查询、SOAP/REST 调用以及与存储介质进行其他交互的地方。

*集合*本身并不是真正的模式。它通常是一组对象的未指定容器。它的一个常见用途是用于处理业务域逻辑的属于单独层的[域对象组。](http://c2.com/cgi/wiki?DomainObject)

在复杂的应用程序中，您通常至少有几个数据映射器，用于在存储和集合之间交换信息。

> [对于一些**代码示例**，您可以查看[此](https://stackoverflow.com/a/11943107/727208)答案。]

### TL;博士

映射器和集合的唯一共同点是它们都倾向于是对象。

# joomla - Joomla 2.5 数据库 $query->where 警告

> ID：13763868
> 
> 赞同：0
> 
> 时间：2012-12-07T13:16:53.570
> 
> 标签：joomla, joomla2.5

我有这个简单的代码来从数据库中选择自定义字符串：

```
protected function getListQuery()
{

              $db = JFactory::getDBO();
              $query = $db->getQuery(true);

              $query->select('*')
                    ->from('#__person');

              $name = 'tom';

              $query->where('name LIKE %'.$db->quote($name).'%');

              return $query;
} 
```

不幸的是，它给了我一个错误：

> 警告：mysql_num_rows() 期望参数 1 是资源，布尔值在第 293 行的 xxx\public\libraries\joomla\database\database\mysql.php 中给出

如果我删除**where**呼叫，那么一切都会好起来的。我可以调试数据查询吗？我想看看最终查询到 MySQL 服务器是什么。

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:48:41.420

我设法为我工作：

```
protected function getListQuery()
{

    $db = JFactory::getDBO();
    $query = $db->getQuery(true);

    $query->select('*')
          ->from('#__person');

    $name = 'tom';

    $name = $db->Quote('%'.$db->escape($name, true).'%');
    $query->where($db->nameQuote('name').' LIKE '.$name);

    //debug the query  
    // echo nl2br(str_replace('#__','prefix_',$query)); die;

    return $query; 
```

}

# javascript - 使用 JavaScript 禁用 p:selectBooleanCheckbox

> ID：13763869
> 
> 赞同：0
> 
> 时间：2012-12-07T13:16:55.573
> 
> 标签：javascript, jsf, primefaces

如何`<p:selectBooleanCheckbox>`使用 JavaScript 禁用组件？

我的目标是防止用户在 ajax 请求期间更改一个 selectBooleanCheckbox 的值（这会更改托管 bean 中的值）。

我的简化代码：

```
<p:selectBooleanCheckbox id="..." value="..." widgetVar="abcde">
    <p:ajax listener="..." update="..."/>
</p:selectBooleanCheckbox>

<p:selectBooleanCheckbox id="..." value="...">
    <p:ajax listener="..."  update="..." onstart="alert(document.getElementById('j_idt14:locationChoice2_input').disabled);document.getElementById('j_idt14:locationChoice2_input').disabled=true;alert(document.getElementById('j_idt14:locationChoice2_input').disabled)" />
</p:selectBooleanCheckbox> 
```

`j_idt14:locationChoice2_input`id 是我的第一个`<p:selectBooleanCheckbox />`组件的 id。

alert() 函数 dsplay`false`和之后，`true`所以我的组件被很好地禁用了。

但是，如果它被禁用，它会保持相同的渲染事件。

手动更改 CSS 类以匹配禁用状态的唯一方法是什么？可以`widgetVar`帮助我吗？

nb：我想立即更改组件的方面，所以我不使用 JSF`disabled`属性，我必须使用 JS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T09:26:59.203

我回答我自己的问题。

`panelGrid`我把我的 2放在里面`selectBooleanCheckbox`并申请：`blockUI``panelGrid`

```
<p:blockUI block="panelToBlock" widgetVar="block" />

<h:panelGrid id="panelToBlock">
   <p:selectBooleanCheckbox id="..." value="..." widgetVar="abcde">
      <p:ajax listener="..." update="..." onstart="block.show()" oncomplete="block.hide()" />
   </p:selectBooleanCheckbox>

   <p:selectBooleanCheckbox id="..." value="...">
      <p:ajax listener="..."  update="..." onstart="block.show()" oncomplete="block.hide()" />
   </p:selectBooleanCheckbox>

</h:panelGrid> 
```

`blockUI`有一个默认的不透明度值，`0.3`但我不想看到它，我只想禁用我的 2所以我在运行时使用 JS`selectBooleanCheckbox`将生成的 id 的值更改为：`0`

```
$(window).load(function() {

   $('#j_idt14\\:j_idt23_blocker').css('opacity', 0);

} 
```

就这样。

现在，当发出 ajax 请求时，这两个复选框的值无法更改。

希望这可以帮助

# php - 如何创建计时器

> ID：13763879
> 
> 赞同：6
> 
> 时间：2012-12-07T13:17:26.790
> 
> 标签：php, javascript, jquery, html

我有一个`$dbSessionDuration`变量，通过使用 mysqli，它能够将查询中的数据结果绑定到这个变量中。该`$dbSessionDuration`变量保存时间，因此该变量的时间格式如下：

01:30:10

现在这意味着 1 小时 30 分 10 秒。我想要做的是`$dbSessionDuration`在计时器中显示值，以便在上面的示例中，它将从 01:30:10 开始计时，并在停止时一直到 0。我的问题是如何创建计时器并将任何值`$dbSessionDuration`放入计时器中以倒计时到 00:00:00？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-16T03:22:15.433

首先，您必须以秒为单位转换时间。

```
<?php

list($hour,$min,$sec) = explode(':', $dbSessionDuration);
$dbSessionDurationTime = mktime(0,0,0,$hour,$min,$sec);

?> 
```

要创建倒计时，您必须使用 Javascript。

```
<script type="text/javascript">
    var millis = <?php echo $dbSessionDurationTime; ?>

    function displaytimer(){
        var hours = Math.floor(millis / 36e5),
            mins = Math.floor((millis % 36e5) / 6e4),
            secs = Math.floor((millis % 6e4) / 1000);
            //Here, the DOM that the timer will appear using jQuery
            $('.count').html(hours+':'+mins+':'+secs);  
    }

    setInterval(function(){
        millis -= 1000;
        displaytimer();
    }, 1000);

</script> 
```

我没有测试，但这应该可以！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T00:51:15.680

您首先应该知道，您创建的**任何**JavaScript 计时器都是不准确的。[这是由于无数原因在这里](http://www.sitepoint.com/creating-accurate-timers-in-javascript/)总结得很好。

现在的美妙之处在于，您可以通过在每次迭代中简单检查用户的系统时间来限制脚本的不准确性。是**用户的系统时间**。

在您的情况下，这不是问题，因为您对经过的时间（01:30:10）感兴趣，但是如果您正在等待特定的时间，您将需要处理时区差异或者只是一个糟糕的在用户的计算机上设置时钟。

您还必须了解的是，如果这是一个安全问题，您将无法解释加载脚本后系统时钟的更改。

***示例：***某些网站会强制您在执行特定操作之前等待。但是提前改变你的时钟，在大多数情况下会帮助你绕过糟糕的安全性。在大多数情况下，它不会因为辅助检查是在服务器端完成的。我想说的是，***进行这些服务器端检查***。

* * *

为了回答您的问题，我会亲自计算通过所需的秒数：

```
$time = explode(':',$dbSessionDuration);# get hour, minutes, seconds to be elapsed
$time = $time[2] + $time[1] * 60 + $time[0] * 3600;# get elapse time in seconds 
```

在您的 JavaScript 文件中，您可以执行以下操作：

```
(function(endTime){
    endTime*=1000; // javascript works with milliseconds
    endTime+=new Date().getTime();// add the current system time into the equation
    // your timeSync function
    (function timerSync() {
        var diff = new Date(endTime - new Date().getTime());
        var timer=document.getElementById('timer');
        if(diff<=0)return timerEnd(timer);
        timer.innerHTML = 
            doubleDigits(diff.getUTCHours())
            + ':' +
            doubleDigits(diff.getUTCMinutes())
            + ':' +
            doubleDigits(diff.getUTCSeconds())
        ;
        setTimeout(timerSync,1000);
    })();// also call it to start the timer
    // your timer end function
    function timerEnd(timer) {
        timer.innerHTML='Timer has stopped now';
    }
    // double digit formatting
    function doubleDigits(number) {
        return number<10
            ? '0'+number
            : number
        ;
    } 
})(
    <?php echo $time;?>
);// time to elapse 1:30:10 
```

这是一个工作[小提琴](http://jsfiddle.net/Khez/927NJ/)，但请记住。这没有针对您的特定情况进行优化。您仍然可以将其包装在一个对象中，如果您在页面上有两个计时器，请不要将闭包内存与功能完全相同的功能加倍。

如果您有任何问题，请在评论中提问，我会尽力提供帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-18T02:25:26.057

代码：http: [//jsfiddle.net/g3rRJ/](http://jsfiddle.net/g3rRJ/)

我将时间分为小时、分钟和秒。时钟每一秒都在递减。我相信算法非常简单：

```
var timer = setInterval(function(){
        seconds--;
        if(seconds == -1) {
            seconds = 59;
            minutes--;

            if(minutes == -1) {
                minutes = 59;
                hours--;

                if(hours==-1) {
                  alert("timer finished");
                  clearInterval(timer);
                  return;
                }
            }
        }
        span.text(correctNum(hours) + ":" + correctNum(minutes) + ":" + correctNum(seconds));
    }, 1000); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-18T09:13:47.330

使用 jQuery，就像你拥有它一样。

这是一个不错的插件[https://github.com/jylauril/jquery-runner](https://github.com/jylauril/jquery-runner)

这是一个例子：

```
<html>
    <head>
        <script src="http://code.jquery.com/jquery-1.9.0.min.js"></script>
        <script src="https://raw.github.com/jylauril/jquery-runner/master/build/jquery.runner-min.js"></script>      
    </head>
    <body>
        <span id="runner"></span>

        <script type="text/javascript">
            $(document).ready(function(){
                $('#runner').runner({
                    autostart: true,
                    countdown: true,
                    stopAt: 0,
                    startAt: 30000 // alternatively you could just write: 30*1000
                });
            });
        </script>
    </body>
</html> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-19T21:06:12.230

如果你需要一个计时器，你可以[在 Jquery 中使用这个插件，](http://keith-wood.name/countdown.html)它工作得很好。您只需在阅读后将时间或 $dbSessionDuration 放入 HTML 的隐藏元素中，然后将其放入 jquery 计数器插件中。如果这个想法听起来很有趣，请告诉我，我会留下一个例子。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-17T09:16:12.810

你可以用更简单的方法做到这一点。首先，您必须从已经以秒为单位的数据库中检索时间

```
<?php

    require_once 'db_connect.php';
    $sql = "SELECT * FROM ac_one_config"; 
    $result = $con->query($sql);

    if( $result->num_rows > 0 ){
        while($row=mysqli_fetch_assoc($result)) {
            $time_on = $row['ac_on_time'];
        }
    }
    header( "refresh:$time_on; url=https://localhost/your_project/file.php"); 
```

在 Javascript 中，倒计时开始和倒计时从时间开始，`$time_on`直到 0:00:00

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Massive Electronics</title>
    <style type="text/css">
        .myClass {
            font-family: verdana; 
            font-size: 16px; 
            font-weight: normal;  
            color: black;
            line-height: 30px;
        }
   </style>
 </head>
 <body>
     <script type="text/javascript">

        (function () {
            var timeLeft = <?php echo $time_on; ?>,
            cinterval;

            var timeDec = function (){
                timeLeft--;
                document.getElementById('countdown').innerHTML = timeLeft;
                if(timeLeft === 0){
                    clearInterval(cinterval);
                }
            };

            cinterval = setInterval(timeDec, 1000);
         })();

      </script>
      Redirecting in <span id="countdown"><?php echo floor($time_on); ?></span> seconds.<br><br>
      <span class="myClass">Ac ON Page</span>
    </body>
</html> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-17T10:45:17.943

设置持续时间并将此值存储在会话变量中。

```
 <div id="timer"></div>
 <?php

      $_SESSION['TIME_DURATION'] = 45;
      $_SESSION['start_time'] = date("Y-m-d H:i:s");
      $end_time = date("Y-m-d H:i:s", strtotime('+'.$_SESSION['TIME_DURATION'].'minutes',strtotime($_SESSION['start_time'])));
      if(!isset($_SESSION['end_time']) && empty($_SESSION['end_time'])){
         $_SESSION['end_time'] = $end_time;
       }
 ?> 
```

```
 var myVar = setInterval(myTimer, 1000);

     function myTimer() {
         var xmlhttp = new XMLHttpRequest();

         xmlhttp.open("GET","response.php",false);

         xmlhttp.send(null);

         if(xmlhttp.responseText == "Time Out"){

             myStopFunction();

        }
        $('#timer').html(xmlhttp.responseText);
     }

     function myStopFunction() {
          clearInterval(myVar);
     } 
```

2.  文件：response.php

    ```
    session_start();

    if(isset($_SESSION['TIME_DURATION']) && $_SESSION['TIME_DURATION'] != 0 ){

          $time_first = strtotime(date("Y-m-d H:i:s"));

         $time_second = strtotime($_SESSION['end_time']);

         $differenceinseconds = $time_second - $time_first;

         $time_lapse=gmdate("i:s",$differenceinseconds); 
         if($time_lapse=='00:00') { 
              echo "Time Out"; 
              unset($_SESSION['start_time']);
              unset($_SESSION['end_time']);
              unset($_SESSION['TIME_DURATION']);
         }else {
            echo gmdate("i:s",$differenceinseconds);
         }
    }else{
         echo "Time Out"; 
    } 
    ```

# vim - 在 Vim 中，我如何搜索和替换所有其他匹配项？

> ID：13763880
> 
> 赞同：13
> 
> 时间：2012-12-07T13:17:25.973
> 
> 标签：vim, editor, replace

说我有以下文件

```
<block>
    <foo val="bar"/>
    <foo val="bar"/>
</block>
<block>
    <foo val="bar"/>
    <foo val="bar"/>
</block> 
```

我怎么能把它变成

```
<block>
    <foo val="bar1"/>
    <foo val="bar"/>
</block>
<block>
    <foo val="bar1"/>
    <foo val="bar"/>
</block> 
```

我尝试做的一件事是录制一个宏，然后`:%s/bar/bar1/gc`按一次，然后尝试编辑该宏。由于某种原因，我无法编辑宏。:(`y``n`

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-12-07T14:45:38.240

只是为了表明这可以通过替换来完成：

```
:let a = ['', '1']
:%s/bar\zs/\=reverse(a)[0]/g 
```

### 概述

在每次替换时数组就地反转后，`bar`用变量中数组的第一个元素替换 every 的末尾。`a`

### 细节的荣耀

1.  `let a = ['', '1']`定义一个变量`a`来保存我们的数组
2.  `%s/.../.../`对文件中的每一行进行替换
3.  `%s/bar\zs/.../`在 bar 上进行替换，但在使用 bar 之后开始替换`\zs`
4.  `\=`在`:s`命令的替换部分内部使用以下表达式的值
5.  `reverse(a)`reverse 只是简单地反转数组，但在原地进行
6.  `reverse(a)[0]`reverse 返回现在反转的数组，因此获取第一个元素
7.  `/g`替换行中的所有出现（可选）

### 一般情况

```
:let a = ['a', 'b', 'c']
:%s/bar\zs/\=add(a, remove(a, 0))[-1]/g 
```

一般情况下“旋转”数组，`a`, 并使用数组的最后一个位置作为替换替换的值。

**如需更多帮助，请参阅**

```
:h :s
:h range
:h /\zs
:h :s\=
:h reverse(
:h :s_flags
:h Lists
:h add(
:h remove 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T13:26:04.610

您可以使用

```
:%s/bar/bar1/gc 
```

它会在每场比赛中询问你是否要替换它。

否则，您必须在其中指定全部内容，然后将第一个 bar 替换为 bar1。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-07T14:02:24.773

我会用宏来做：

```
qv            start recording in register v
/"bar"/e<cr>  search for "bar" and position the cursor at the end of the match
i1<esc>       insert 1 before the cursor and go back to normal mode
n             jump to next match
q             stop recording 
```

之后，做`{count}@v`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T13:31:27.993

试试这个：

```
:%s/bar\(.*\)\n\(.*\)bar/bar1\1\r\2bar 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-07T15:38:13.407

这是一个应该可以解决问题的自定义命令。它使用*替换表达式*来计算完成的替换，并使用传递的附加参数来决定是否应该进行替换。（这允许比每秒更复杂的安排。）您的示例将很简单：

```
:%SubstituteSelected/\<bar\>/&1/ yn 
```

这是（不幸的是很长）实现：

```
":[range]SubstituteSelected/{pattern}/{string}/[flags] {answers}
"           Replace matches of {pattern} in the current line /
"           [range] with {string}, determining whether a particular
"           match should be replaced on the sequence of "y" or "n"
"           in {answers}. I.e. with "ynn", the first match is
"           replaced, the second and third are not, the fourth is
"           again replaced, ...
"           Handles & and \0, \1 .. \9 in {string}.
function! CountedReplace()
    let l:index = s:SubstituteSelected.count % len(s:SubstituteSelected.answers)
    let s:SubstituteSelected.count += 1

    if s:SubstituteSelected.answers[l:index] ==# 'y'
        if s:SubstituteSelected.replacement =~# '^\\='
            " Handle sub-replace-special.
            return eval(s:SubstituteSelected.replacement[2:])
        else
            " Handle & and \0, \1 .. \9 (but not \u, \U, \n, etc.)
            let l:replacement = s:SubstituteSelected.replacement
            for l:submatch in range(0, 9)
                let l:replacement = substitute(l:replacement,
                \   '\%(\%(^\|[^\\]\)\%(\\\\\)*\\\)\@<!' .
                \       (l:submatch == 0 ?
                \           '\%(&\|\\'.l:submatch.'\)' :
                \           '\\' . l:submatch
                \       ),
                \   submatch(l:submatch), 'g'
                \)
            endfor
            return l:replacement
        endif
    elseif s:SubstituteSelected.answers[l:index] ==# 'n'
        return submatch(0)
    else
        throw 'ASSERT: Invalid answer: ' . string(s:SubstituteSelected.answers[l:index])
    endif
endfunction
function! s:SubstituteSelected( range, arguments )
    let l:matches = matchlist(a:arguments, '^\(\i\@!\S\)\(.*\)\%(\%(^\|[^\\]\)\%(\\\\\)*\\\)\@<!\1\(.*\)\%(\%(^\|[^\\]\)\%(\\\\\)*\\\)\@<!\1\(\S*\)\s\+\([yn]\+\)$')
    if empty(l:matches)
        echoerr 'Invalid arguments'
        return
    endif
    let s:SubstituteSelected = {'count': 0}
    let [l:separator, l:pattern, s:SubstituteSelected.replacement, l:flags, s:SubstituteSelected.answers] = l:matches[1:5]

    execute printf('%ssubstitute %s%s%s\=CountedReplace()%s%s',
    \   a:range, l:separator, l:pattern, l:separator, l:separator, l:flags
    \)
endfunction
command! -bar -range -nargs=1 SubstituteSelected call <SID>SubstituteSelected('<line1>,<line2>', <q-args>) 
```

### 编辑

我现在已将此（连同相关命令）作为[PatternsOnText 插件](http://www.vim.org/scripts/script.php?script_id=4602)发布。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-07T19:21:38.663

```
:let dosubs=1
:%s/bar/\=[dosubs?'bar1':submatch(0),extend(g:,{'dosubs':!dosubs})][0]/g 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-20T19:01:15.207

我找到了一个更简单的解决方案：

```
:g/<block>/norm! j02f"i1

:g ............ global command
/<block>/ ..... every line with <block>
j0 ............ goes down one line and to the column 1
2f" ........... jumps to the second "
i1 ............ insert the number one 
```

**我的旧复杂解决方案**

```
\v%(block>\_{-})\zsbar
%s,,&1,g

   \v ............ very magic (avoid lots of scapes)
   %  ............ ignore whats flows
   (  ............ starts (ignored) group
   \_ ............ multiline search
   .{-} .......... non-greedy 
   \zs ........... start pattern for substituition
   bar  .......... pattern we want to change 

   % ............. whole file
   s ............. substituition
   ,, ............ use last search (could be //)
   & ............. use searched pattern 
   1 ............. add 1 after it 
```

# android - Android：如何在tabhost中保存多个按钮按下状态

> ID：13763882
> 
> 赞同：0
> 
> 时间：2012-12-07T13:17:19.720
> 
> 标签：android, button, onclick, android-tabhost, sharedpreferences

我有一个包含三个活动的选项卡主机，并且在每个活动中我有 4 个按钮。

在每次按下按钮时，我都会像这样更改背景可绘制资源

```
 case R.id.button1:
        if (isclick) {
            b1.setBackgroundResource(R.drawable.icon4hlt);
        } else {
            b1.setBackgroundResource(R.drawable.icon4);
        } 
```

那么现在如何保存所有三个子活动中每个按钮的按下状态，以便当我从一个活动移动到另一个活动时，按钮按下状态将反映在返回时。第一个活动->按下所有4个按钮->转到第二个活动->返回第一个活动->第一个活动中的所有按钮都应处于按下状态

即使按主页按钮和返回按钮也应该可以工作。

我知道共享偏好是一个好主意，我经历了相关的线程，但我没有任何想法如何做到这一点。

任何帮助总是很感激，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:35:13.420

如您所述，您可以在共享首选项中保留按下按钮的 ID。您将为每个活动存储一组 ID。像这样的东西：

```
public void onStop() {
     SharedPreferences pref = // getPreferences;
     Set<String> ids = new HashSet<String>();
     for (Button button : buttons) {
         if (button is pressed) {
             ids.add(String.valueOf(button.getId()));
         }
     }
     pref.edit().putStringSet(CURRENT_ACTIVITY_NAME, ids).commit();
}

public void onStart() {
    SharedPreferences pref = // get preferences;
    Set<String> ids = pref.getStringSet(CURRENT_ACTIVITY_NAME, Collections.emptySet<String>());
    for (String id : ids) {
        Button button = findViewById(Integer.parseInt(id));
        set button pressed
    }
} 
```

但我仍然认为当您在选项卡之间切换时不应重置按下状态，因为不会重新创建活动。

# excel - 使用 OpenXML 从 Excel 中删除行

> ID：13763885
> 
> 赞同：0
> 
> 时间：2012-12-07T13:17:24.447
> 
> 标签：excel, openxml

我需要从 excel 文件中删除某些行。excel 文件是一个模板，可能有额外的行，必须删除这些行才能得到最终输出。但是，删除单元格会损坏文件。代码很简单如下

```
Worksheet worksheet = worksheetPart.Worksheet;
SheetData sheetData = worksheet.GetFirstChild<SheetData>();

foreach (var row in sheetData.Elements<Row>().
Where(r => r.RowIndex.Value >= rowIndex && r.RowIndex.Value < rowIndex +  count).ToList())
{
  row.Remove();
} 
```

或者，我尝试将现有单元格设置为空白值。

```
Worksheet worksheet = worksheetPart.Worksheet;
SheetData sheetData = worksheet.GetFirstChild<SheetData>();
foreach (var row in sheetData.Elements<Row>().
Where(r => r.RowIndex.Value >= rowIndex && r.RowIndex.Value < rowIndex + count).ToList())
{
  IEnumerable<Cell> cells = row.Elements<Cell>().ToList();
  if (cells != null)
  {
    foreach (Cell cell in cells)
    {
      if (cell.CellValue != null && !String.IsNullOrEmpty(cell.CellValue.Text))
      {
        cell.DataType = new EnumValue<CellValues>(CellValues.String);
        cell.CellValue = new CellValue("");
      }
    }
  }
} 
```

我的文件总是损坏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:22:30.637

问题是保存工作表/工作簿的最终流的大小不匹配。

# .htaccess - .htaccess 项目根目录

> ID：13763887
> 
> 赞同：0
> 
> 时间：2012-12-07T13:17:37.867
> 
> 标签：.htaccess

我在当地从事很多项目。我已将我的 apache 根目录设置为引用包含我所有项目的文件夹，所以`localhost`只需将我带到那里即可。

在本地主机的子文件夹（至尊是根目录）内，我想添加一个重写规则，因此`/`指的是项目根目录，而不是本地主机。

我的结构示例：

```
localhost/a-very-nice-projekt/ 
```

在项目内部，我想像这样文件链接到根目录`src="/img/picture.jpg"`。无需更改链接即可轻松移动文件夹。它还可以使用我的导航栏和标题的 php 包含，因为链接始终指向项目根目录。

尝试了很多谷歌搜索和代码，但我认为我有点错了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:39:55.667

我不相信你真的可以做你想做的事，至少通过.htaccess。在您的情况下 localhost 是域，链接中的前导斜杠告诉浏览器从相对于域的路径中获取资源。不同文件夹中的不同规则并不能真正影响这一点。

您最好的选择可能是在不同的端口上创建各种虚拟主机，它们将充当单独的站点。在 httpd.conf 文件中为每个项目创建一个虚拟主机。

```
Listen 8081
NameVirtualHost *:8081
<VirtualHost *:8081>
    DocumentRoot "C:\Path\to\project"
    <Directory "C:\Path\to\project">
        DirectoryIndex index.php
        AllowOverride None
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

然后，该项目将在您的浏览器中以`http://localhost:8081/`. 所有路径都将按预期工作，您应该一切顺利。

# sharepoint - 如何配置 AD 以使 SharePoint 用户能够使用 username@custom.com 而不是域\用户名进行身份验证？

> ID：13763889
> 
> 赞同：0
> 
> 时间：2012-12-07T13:17:49.817
> 
> 标签：sharepoint, authentication, sharepoint-2010, active-directory

如何配置 Active Directory 以使 SharePoint 用户能够使用 username@custom.com 而不是域\用户名进行身份验证？

我之前已经做到了这一点，并将一个项目添加到“[用户名] Proeprties”>“帐户”>“用户登录名”中的选择框中，但我不记得如何做到这一点。

# c# - 在 Jquery 中更改的值不会显示在代码隐藏中

> ID：13763892
> 
> 赞同：0
> 
> 时间：2012-12-07T13:17:54.700
> 
> 标签：c#, jquery, asp.net

*   ASP.NET 4
*   jQuery 1.7.1
*   浏览器：IE9

你好

我在 UpdatePanel 中使用带有 gridview 控件的 jquery，因此，每次单击 gridview 的一行时，Jquery 都会编辑 HiddenField 控件的值，因此当我需要“选定索引”时，我只使用 HiddenField 的值。在 Chrome 和 Firefox 中一切正常，但在 IE9 中却不行。单击一行并将其索引分配给 HiddenField 后，当我单击按钮并触发服务器端事件时，当我检索 HiddenField 的值时，我得到它的默认值（在标记中定义的那个），而不是换了一个。而且，奇怪的是，如果我使用 and alert(HiddenField.value)，它会显示行索引！所以，这个问题只发生在服务器端功能上，即使在回发之后隐藏字段值被保留，但始终作为服务器端的默认值......

这是我的 Jquery 代码：

```
$('[id$=divtxtIdPresentacion]').click(function () {

             var tex = $('#<%=HFSeleccionIndexRow.ClientID%>').attr("Value");

             var index = $(this).attr("commandargument");             

             if (tex != index) {

                 $('#<%=HFSeleccionIndexRow.ClientID%>').attr("Value", index);
             }

         }); 
```

以及部分按钮事件：

```
 protected void gridPresentacionAgregar_SelectedIndexChanged(object sender, EventArgs e)
    {       

         int index = int.Parse(HFSeleccionIndexRow.Value);
         ...
     } 
```

还有 HiddenField（以防万一）：

```
<asp:HiddenField runat="server" ID="HFSeleccionIndexRow" value="0" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:40:38.253

无需使用 jQuery 代码来更改所选索引。您已使用更新面板，因此不会向用户显示服务器行程。

最好使用命令参数、命令名称和触发服务器端点击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:05:02.613

您隐藏的输入字段不在更新面板控件中。任何到服务器的异步往返都只会导致`UpdatePanel`自身内部的那些控件在 UI 上更新，因此即使代码隐藏运行并更新隐藏字段，在前端它们保持不变，因为它们位于面板之外。

`<ContentTemplate>`尝试移动标签内的隐藏字段：

```
<asp:UpdatePanel ID="upTripsGrid" runat="server" UpdateMode="Always">
    <ContentTemplate>
        <asp:HiddenField runat="server" ID="HFSeleccionIndexRow" value="0" />
        .....
    </ContentTemplate>
</asp:UpdatePanel> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T13:26:53.487

尝试像这样设置值：

```
 $('[id$=divtxtIdPresentacion]').click(function () {

         var tex = $('#<%=HFSeleccionIndexRow.ClientID%>').attr("Value");

         var index = $(this).attr("commandargument");             

         if (tex != index) {
           $('#<%=HFSeleccionIndexRow.ClientID%>').val(index);
         }
     }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T13:41:59.547

尝试改用这个 jquery 函数

```
$('[id$=divtxtIdPresentacion]').click(function () {
    var tex = $('#<%=HFSeleccionIndexRow.ClientID%>').attr("Value");
    var index = $(this).attr("commandargument");             
    if (tex != index) {
        if($.browser.msie){
             $("#<%=HFSeleccionIndexRow.ClientID%>").prop("defaultValue", index);
        }
        else{
             $('#<%=HFSeleccionIndexRow.ClientID%>').attr("Value", index);
        }
    }
}); 
```

# c# - 如何以更好的方式编写此 LINQ 查询

> ID：13763894
> 
> 赞同：1
> 
> 时间：2012-12-07T13:17:59.350
> 
> 标签：c#, linq

我有一个 LINQ 查询。我不太了解LINQ。我正在研究实体框架。我必须根据输入日期 (CDate) 获取记录。假设结构是这样的。

```
 Table A                                Table B

       Id          CDate                   Id            No         A_Id

       1          11-11-2012                1            1001         1
       2          11-11-2012                2            1002         1
       3          12-12-2012                3            1003         2 
```

根据此表定义，如果输入日期类似于 2012 年 11 月 11 日，则输出应为，

```
 Table B

    Id        No

     1        1001
     2        1002
     3        1003 
```

类似上面的东西。我试过这个，但它不起作用。请看一下这段代码。

**代码**

```
 var model = (from x in Db.TableB
                  where x.TableA.CDate == 'Input Value'    // 11-11-2012
                         select new ViewModel
                         {
                         }).Tolist(); 
```

请告诉我我可以编写代码以获取适当输入日期的 Distinct 值的可能性。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T13:25:25.553

你想要这样的东西吗？

```
var model = (from x in Db.TableB
     join y in Db.TableB on x.ID equals y.ID
     where x.TableA.CDate == 'Input Value' //11.11.2012
     select new  
     {  
         x.ID,
         y.No 
     }).ToList(); 
```

输出：

```
Id        No

 1        1001
 2        1002 
```

**更新**

```
var model = (from x in Db.TableB
            where x.TableA.CDate == 'Input Value' //11.11.2012
            select new  
            {  
                x.ID,
                x.No 
            }).ToList(); 
```

抱歉，首先，我认为存在一对一的关系。但是您的实体具有一对多的关系。您的代码是正确的，只需添加

```
select new  
{  
     x.ID,
     x.No 
}).ToList(); 
```

# oracle - Oracle 光标单步遍历记录

> ID：13763899
> 
> 赞同：1
> 
> 时间：2012-12-07T13:18:10.517
> 
> 标签：oracle, cursor

有人可以帮我解决以下问题。编写光标很容易，但我不知道如何测试何时`REFVAL`更改。到目前为止，我的光标如下。

光标不能在 上分组`REFVAL`。可以将其视为基于需要为该发票上的总框添加的一系列发票行。

就像是：

```
REFVAL           PAYAMNT       INVOICE_DETAIL

12/00001/DA      £420          Recurring fee
12/00001/DA      £300          CRB check
12/00001/DA      £170          Plate fee
12/00002/JV      £70           SQL assistance
12/00002/JV      £30           Loader assistance 
```

因此，当单步浏览光标时，我可以将详细信息从`12/00001/DA`三行写入，然后写总计`12/00001/DA (£890)`，然后从详细信息`12/00002/JV`，然后是该行的摘要行。

因此，脚本需要知道何时`REFVAL`更改

到目前为止我所拥有的是：

```
DECLARE
  CURSOR c1 IS 
     SELECT refval,amt from johan;

  Grandtotal INTEGER := 0;
  REF_total  Integer := 0;
  REFVAL     varchar(20);
BEGIN
  OPEN c1;
  LOOP
    FETCH c1 INTO refval,ref_total;
    IF c1%notfound THEN
      EXIT;
    END IF;

     dbms_output.put_line('TOtal for '|| refval || ': ' || ref_total);
     Grandtotal := Grandtotal + ref_total;
   END LOOP;

   IF c1%ISOPEN THEN  -- cursor is open
     CLOSE c1;
   END IF;

   dbms_output.put_line('Grandtotal: '||Grandtotal);
 END;
 / 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T14:48:18.243

如果我正确理解了您的要求，则不需要对数据进行程序处理，可以在 SQL 中使用子句`rollup`扩展`group by`来计算总计和总计。这是一个例子：

```
SQL> with t1 as(
  2    select '12/00001/DA' as REFVAL,  420 as PAYAMNT, 'Recurring fee' as INVOICE_DETAIL from dual union all
  3    select '12/00001/DA',  300,   'CRB check' from dual union all
  4    select '12/00001/DA',  170,   'Plate fee' from dual union all
  5    select '12/00002/JV',  70 ,   'SQL assistance' from dual union all
  6    select '12/00002/JV',  30 ,   'Loader assistance' from dual
  7  )
  8  select nvl(REFVAL, 'GRAND TOTAL:') as REFVAL
  9       , case
 10             when (INVOICE_DETAIL is null) and (REFVAL is not null)
 11             then 'SUB-TOTAL:'
 12             else INVOICE_DETAIL
 13         end  as INVOICE_DETAIL
 14       , sum(PAYAMNT)
 15        
 16     from t1
 17    group by rollup(REFVAL, INVOICE_DETAIL)
 18  ;

REFVAL       INVOICE_DETAIL           END
------------ ----------------- ----------
12/00001/DA  CRB check                300
12/00001/DA  Plate fee                170
12/00001/DA  Recurring fee            420
12/00001/DA  SUB-TOTAL:               890

12/00002/JV  SQL assistance            70
12/00002/JV  Loader assistance         30
12/00002/JV  SUB-TOTAL:               100

GRAND TOTAL:                          990

8 rows selected 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:28:40.537

```
DECLARE
   CURSOR c1
   IS
      SELECT   refval,
               amt,
               DENSE_RANK () OVER (PARTITION BY REFVAL ORDER BY rowid) rnk   
        FROM   johan;

   Grandtotal   INTEGER := 0;
   REF_total    INTEGER := 0;
   REFVAL       VARCHAR (20);
   v_new_rank   PLS_INTEGER;  
   v_old_rank   PLS_INTEGER;
   v_start      PLS_INTEGER := 1;    --just to intialize v_old_rank
BEGIN
   OPEN c1;

   LOOP
      FETCH c1 INTO   refval, ref_total, v_new_rank;

      EXIT WHEN c1%NOTFOUND;

      IF v_start = 1
      THEN
         v_old_rank := v_new_rank;
         v_start := v_start + 1;
      END IF;

      DBMS_OUTPUT.put_line ('TOtal for ' || refval || ': ' || ref_total);
      Grandtotal := Grandtotal + ref_total;

      IF v_old_rank <> v_new_rank
      THEN
         v_old_ref_val := v_new_rank;

   --you can print the total per refval group
    DBMS_OUTPUT.PUT_LINE ('do something');
      END IF;
   END LOOP;

   IF c1%ISOPEN
   THEN
      -- cursor is open
      CLOSE c1;
   END IF;

   DBMS_OUTPUT.put_line ('Grandtotal: ' || Grandtotal);
END;
/ 
```

当您从光标 c1 中选择时，如下图所示

```
REFVAL           PAYAMNT              rnk

12/00001/DA      £420                 1
12/00001/DA      £300                 1
12/00001/DA      £170                 1
12/00002/JV      £70                  2
12/00002/JV      £30                  2 
```

# hadoop - hadoop hdfs 从 cdh3 迁移到 cdh4

> ID：13763901
> 
> 赞同：1
> 
> 时间：2012-12-07T13:18:38.303
> 
> 标签：hadoop, hbase, hdfs, microsoft-distributed-file-system

我有两个hadoop集群，我的目标是使用hadoop -cp将所有hdfs文件从**cluster1**复制到**cluster2**

**集群 1 ：** Hadoop 0.20.2-cdh3u4

**集群 2 ：** Hadoop 2.0.0-cdh4.1.1

**现在，即使只是在cluster2**上远程对**cluster1**运行 dfs -ls 命令，如下所示：

 **```
hadoop fs -ls hdfs://cluster1-namenode:8020/hbase 
```

我得到了例外：

**ls：本地异常失败：java.io.IOException：响应为空。主机详情：本地主机为：“cluster2-namenode/10.21.xxx.xxx”；目标主机是：“cluster1-namenode”：8020；**

我认为这是由于hadoop版本的不同，有什么解决方法吗？我的旧 environment-cluster1 没有部署 mapred，这排除了所有 distcp、bhase 可复制选项。并且在 cluster1 上也没有 hbase 复制能力。我正在努力想一种将 hdfs 数据从**cluster1**迁移到**cluster2**的方法，因为每个人都在谈论将 cdh3 升级到 cdh4 而不是从 3 迁移到 4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:45:11.927

在 cloudera cdh 用户邮件线程中对此进行了更多讨论：

[https://groups.google.com/a/cloudera.org/forum/?fromgroups=#!topic/cdh-user/GeT1RTbRVcw](https://groups.google.com/a/cloudera.org/forum/?fromgroups=#!topic/cdh-user/GeT1RTbRVcw)

总之，

1.  像 CDH3 和 CDH4 之间的常规 DFS 命令`dfs -cp`将不起作用，因为它们具有不同的协议版本（并且通过常规 RPC 调用彼此不兼容）。

2.  Distcp 可用于跨集群复制 hdfs 数据，甚至从 cdh3 到 cdh4，但这里有一些先决条件：您需要在 cdh4 集群上运行 distcp 命令，而且 cdh4 集群需要已部署/可用的 mapred。cdh3 集群不一定需要 mapred。

3.  运行 distcp 命令时，不要使用 hdfs 作为源路径，使用 hftp 作为源路径，而使用 hftp 作为目标路径（因为 hftp 是只读的，您需要对目标路径进行写访问）所以命令看起来像：

    hadoop distcp hftp://hadoop-namenode.cluster1/hbase hftp://hadoop-namenode.cluster2/hbase

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:30:04.917

我的经验对胜杰的回答有几点说明：

1.  它可以从 CDH4 和 CDH3 运行，重要的是该命令在目标集群上运行。

2.  运行`distcp`commnad时，将`hftp`其用作源和`hdfs`目标（因为 hftp 是只读的！）所以命令如下所示：

> hadoop distcp hftp://source.cluster1/path hdfs://destination.cluster1/path**

# emacs - Emacs，如何在 Mx shell 中更改某些颜色？

> ID：13763912
> 
> 赞同：8
> 
> 时间：2012-12-07T13:19:15.107
> 
> 标签：emacs, color-scheme

我使用 Emacs 24 并想在 shell 模式（`ls`命令）下更改目录和文件的颜色。理想情况下 - 取决于文件的权利。

我怎样才能做到这一点？

我试着玩

```
(setq ansi-color-names-vector
      ["black" "red" "green" "yellow" "PaleBlue" "magenta" "cyan" "white"])
(add-hook 'shell-mode-hook 'ansi-color-for-comint-mode-on) 
```

但我认为这对我不起作用。
我现在有晒黑的配色方案。但我不想改变它的颜色，只适用于 shell 模式。

**编辑：**
当我更改系统终端的颜色时（使用主目录中的 .dircolrs 文件）-emacs 读取它，但*它（emacs）稍微改变了颜色-它在 shell 模式下使颜色更暗或更亮。*

而且我不知道为什么 Emacs 会这样做。

不同的目录颜色（游戏，公共...：
这是系统终端： ![在此处输入图像描述](../Images/babcb7240229da984e064f904e5ee836.png)
这是 Emacs：![在此处输入图像描述](../Images/a43e0695e4bb1c4e04291a161f0128d6.png)

这些是更改的颜色，默认颜色和日光化主题 Emacs 在蓝色背景上制作了蓝色目录。

我知道找到 hack 不是什么大问题，只是想知道为什么 Emacs 会稍微改变颜色。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-12-04T13:06:24.790

`M-x customize-variable RET ansi-color-names-vector RET`

现有文本不会受到影响，但新打印的文本（即使在同一个 shell 缓冲区中）将显示新的颜色。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-07T18:41:09.943

我在某个地方找到了这个，它帮助了我（我是一个完整的新手，但我认为`setq ansi-color-names-vector`这就足够了）：

```
(setq ansi-color-names-vector
      ["black" "tomato" "PaleGreen2" "gold1"
       "DeepSkyBlue1" "MediumOrchid1" "cyan" "white"])
(setq ansi-color-map (ansi-color-make-color-map))  ;; helped line 
```

现在`ansi-color-names-vector`在 shell 中工作。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-07T18:03:13.390

这是我用来为 emacs 设置 Solarized 颜色的方法。我继续发布了我的整个 ansi-term 配置，以防任何其他设置可能有用。

```
(use-package ansi-term
  :defer t
  :init
  (progn

    ;; ;; Use variable width font faces in current buffer
    (defun my-buffer-face-mode-variable ()
    ;;   "Set font to a variable width (proportional) fonts in current buffer"
      (interactive)
      (setq buffer-face-mode-face '(:family "Menlo For Powerline" :height 100))
      (text-scale-adjust 1)
       (buffer-face-mode))

    (setq system-uses-terminfo nil)
    (add-hook 'term-mode-hook
              '(lambda ()
                 (linum-mode 0)
                 (term-set-escape-char ?\C-z)
                 (term-set-escape-char ?\C-x)
                 (define-key term-raw-map "\C-c" 'term-interrupt-subjob)
                 (define-key term-raw-map (kbd "M-x") 'execute-extended-command)
                 (setq autopair-dont-activate t)
                 (setq ac-auto-start nil)
                 (visual-line-mode -1)
                 ;; (my-buffer-face-mode-variable)
                 ))

    (defun my-term-paste (&optional string)
      (interactive)
      (process-send-string
       (get-buffer-process (current-buffer))
       (if string string (current-kill 0))))

    (defun my-term-pasteboard-paste ()
      (interactive)
      (process-send-string
       (get-buffer-process (current-buffer))
       (ns-get-pasteboard)))

    (add-hook 'term-exec-hook '(lambda ()
                                 (set-buffer-process-coding-system 'utf-8-unix 'utf-8-unix)
                                 (goto-address-mode)
                                 (define-key term-raw-map (kbd "C-y") 'my-term-paste)
                                 (define-key term-raw-map (kbd "s-v") 'my-term-pasteboard-paste)
                                 (let ((base03 "#002b36")
                                       (base02 "#073642")
                                       (base01 "#586e75")
                                       (base00 "#657b83")
                                       (base0 "#839496")
                                       (base1 "#93a1a1")
                                       (base2 "#eee8d5")
                                       (base3 "#fdf6e3")
                                       (yellow "#b58900")
                                       (orange "#cb4b16")
                                       (red "#dc322f")
                                       (magenta "#d33682")
                                       (violet "#6c71c4")
                                       (blue "#268bd2")
                                       (cyan "#2aa198")
                                       (green "#859900"))
                                   (setq ansi-term-color-vector
                                         (vconcat `(unspecified ,base02 ,red ,green ,yellow ,blue
                                                                ,magenta ,cyan ,base2)))))) 
```

# sql - 查询成本最佳实践

> ID：13763915
> 
> 赞同：2
> 
> 时间：2012-12-07T13:19:19.130
> 
> 标签：sql, database, oracle

假设我的选择查询的成本为 100，而我有另一种方式来编写两个成本为 (40 + 60) 的查询。两者最终具有相同的成本。

我想知道什么是最有效的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T13:29:14.900

忽略成本。它不是调优的起点，它只是 Oracle 用来为给定 SQL 语句选择最佳计划的内部排名。永远不能用成本来比较两条不同的 SQL 语句以确定哪个更好；即你可以有一个成本非常高的查询，它比成本低的查询更快并且使用更少的资源。

如果查询与将其一分为二一样快，则将其保留为一个 SQL（减少 1 次往返）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:30:25.420

我认为取决于您的数据库是否允许查询中的并行性。

如果可以，您应该以第二种方式运行查询：成本相同，但您获得结果的速度更快。

例如，sqlserver 允许您运行并行查询，看看[这里](http://msdn.microsoft.com/en-us/library/ms178065%28v=sql.105%29.aspx)。

例如，在 oracle 中，它在[此处](http://www.oracle.com/technetwork/issue-archive/2010/o40parallel-092275.html)进行了解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T01:25:08.980

在这种情况下，您应该测试**两种**方案（一个查询，成本 100 和两个查询，成本 40 + 60）......尝试每个场景至少您的查询在一小时甚至一天内执行的执行次数，记住在每个场景的测试之间应用更改系统刷新（缓冲区缓存和共享池）...

# iphone - 如何在应用程序中将视频上传到 youtube？

> ID：13763916
> 
> 赞同：3
> 
> 时间：2012-12-07T13:19:20.423
> 
> 标签：iphone, ios, youtube-api

> **可能重复：**
> [如何从 iOS 应用程序中将视频上传到 YouTube？](https://stackoverflow.com/questions/3528568/how-do-i-upload-a-video-to-youtube-from-within-an-ios-application)

我正在创建一个项目，在该项目中，我想将我的相机捕获的视频上传到 youtube。为此，我对谷歌做了很多研究，但我没有找到任何满意的答案。

我签出的链接是...

[如何从 iOS 应用程序中将视频上传到 YouTube？](https://stackoverflow.com/questions/3528568/how-do-i-upload-a-video-to-youtube-from-within-an-ios-application)

[使用 iPhone 上传视频](https://stackoverflow.com/questions/1065628/uploading-video-with-iphone)

[https://github.com/nparry/gdata-objectivec-client/tree/](https://github.com/nparry/gdata-objectivec-client/tree/)

[https://developers.google.com/youtube/2.0/developers_guide_protocol#Uploading_Videos](https://developers.google.com/youtube/2.0/developers_guide_protocol#Uploading_Videos)

[http://code.google.com/p/gdata-objectivec-client/](http://code.google.com/p/gdata-objectivec-client/)

[从 iphone 应用程序在 youtube 上上传视频](https://stackoverflow.com/questions/10801383/upload-video-on-youtube-from-iphone-app)

[任何使用 GData API 将视频上传到 youtube 表单 iOS 应用程序的教程？](https://stackoverflow.com/questions/7860923/any-tutorials-for-using-gdata-api-to-upload-to-video-to-youtube-form-ios-app)

[使用 ios sdk 在 youtube 上上传视频的方法](https://stackoverflow.com/questions/11952316/way-to-upload-video-on-youtube-using-ios-sdk)

[如何从 iOS 应用程序中将视频上传到 YouTube？](https://stackoverflow.com/questions/3528568/how-do-i-upload-a-video-to-youtube-from-within-an-ios-application)

[http://urinieto.com/2010/10/upload-videos-to-youtube-with-iphone-custom-app/](http://urinieto.com/2010/10/upload-videos-to-youtube-with-iphone-custom-app/)

[关于将 iPhone 视频上传到 Youtube](https://stackoverflow.com/questions/4498193/about-upload-iphone-video-to-youtube?rq=1)

[如何将视频上传到 youtube？](https://stackoverflow.com/questions/7108386/how-to-upload-video-to-youtube?rq=1)

[使用 iPhone 将视频上传到 YouTube](https://stackoverflow.com/questions/7107326/upload-video-to-youtube-using-iphone?rq=1)

还有更多我不记得了。所以任何人都有很好的教程链接或任何可能有帮助的东西，请指导我。

**更新**

如果我要从 iphone 录制视频并使用网络服务将其发送到服务器上，然后通过网络服务将该视频上传到 youtube，那么苹果是否允许这样做？

# c# - C# lock 语句，要锁定什么对象？

> ID：13763917
> 
> 赞同：59
> 
> 时间：2012-12-07T13:19:23.967
> 
> 标签：c#, multithreading, locking

我有 3 个问题需要帮助。

1.  `lock`作为语句参数传递的正确对象/引用是什么？我看过很多示例代码，我注意到传入的对象/引用可能与当前类或程序中的任何其他类无关，只要访问修饰符`static`是非公共的？例如：

    ```
    private Object anyObj = new Object();
    lock(anyObj){.....}

    private static readonly object Locker = new object();
    lock(Locker){.....} 
    ```

    这对我来说没有意义。

2.  我在 MSDN 中找到了一个关于使用`lock`语句的多线程的示例代码。在示例中有两个`try`/`catch`块，其中`Monitor.Wait()`包含。如果我正确理解逻辑，`readerFlag`则将完全禁止程序进入`try`/`catch`块。
    代码是此处的示例 2：http:
    [//msdn.microsoft.com/en-us/library/aa645740 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa645740(v=vs.71).aspx)

3.  只要 Windows 窗体处于活动状态，如何运行在后台运行的线程？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-12-07T14:00:18.127

您锁定的方式和内容取决于您在做什么。

假设您正在使用某种设备——比如咖啡机。您可能有一个如下所示的类：

```
public CoffeeMaker {
    private IntPtr _coffeeHandle;
    private Object _lock = new Object();
} 
```

在这种情况下，您正在保护对 _coffeeHandle 的访问——一个指向真实物理设备的指针/句柄，所以这很容易：

```
public int AvailableCups {
    get {
        lock (_lock) {
            return GetAvailableCups(_coffeeHandle); // P/Invoked
        }
    }
}

public void Dispense(int nCups)
{
    lock (_lock) {
        int nAvail = GetAvailableCups(_coffeeHandle);
        if (nAvail < nCups) throw new CoffeeException("not enough coffee.");
        Dispense(_coffeeHandle, nCups); // P/Invoked
    }
 } 
```

因此，如果我正在运行一个多线程应用程序，我（可能）不想在分配时读取可用的杯子数量（可能是硬件错误）。通过保护对句柄的访问，我可以确保这一点。此外，不能在我已经分配时要求我分配 - 那会很糟糕，所以这也受到保护。最后，除非我有足够的咖啡可用，并且您注意到我**没有**使用我的公共财产来检查，否则我不会分配 - 这样确保有足够的咖啡和分配的操作是联系在一起的。神奇的词是原子的——它们不能被分开而不产生问题。

如果您有一个且只有一个需要保护的资源实例，则可以使用静态对象作为锁。想一想，“我有单身人士吗？” 这将是您何时可能需要静态锁的指南。例如，假设 CoffeeMaker 有一个私有构造函数。相反，您有一个构造咖啡机的工厂方法：

```
static Object _factLock = new Object();

private CoffeeMaker(IntPtr handle) { _coffeeHandle = handle; }

public static CoffeeMaker GetCoffeeMaker()
{
    lock (_factLock) {
        IntPtr _handle = GetCoffeeMakerHandle(); // P/Invoked
        if (_handle == IntPtr.Zero) return null;
        return new CoffeeMaker(_handle);
    }
 } 
```

现在在这种情况下，感觉 CoffeeMaker 应该[实现 IDisposable](http://www.atalasoft.com/cs/blogs/stevehawley/archive/2006/09/21/10887.aspx)以便处理句柄，因为如果你不释放它，那么有人可能不会得到他们的咖啡。

不过也有一些问题——如果咖啡不够，我们应该做更多——这需要很长时间。见鬼 - 分配咖啡需要很长时间，这就是为什么我们要小心保护我们的资源。现在你在想，真的所有这些咖啡机的东西都应该在它自己的线程中，并且应该有一个事件在咖啡完成后被触发，然后它开始变得复杂，你明白知道的重要性你要锁定什么以及何时锁定，这样你就不会因为你问有多少杯而阻止制作咖啡。

如果“死锁”、“原子”、“监视器”、“等待”和“脉冲”这些词对你来说听起来都很陌生，你应该考虑阅读多处理/多线程的一般知识，看看你是否能解决[公平的理发店问题](http://www.cs.utexas.edu/~lorenzo/corsi/cs372h/07S/labs/labT/labT.html)或[哲学家就餐问题](http://en.wikipedia.org/wiki/Dining_philosophers_problem)，都是资源争用的典型例子。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-12-07T13:26:07.263

1）您的代码不完整。您总是锁定某个（共享）资源。`anyObject`应该在生命周期内与该共享对象有密切的 1-1 对应关系。

例如：

a) 简单但最直接的模式：

```
List<MyClass> sharedList = ...;
...
lock (sharedList) { sharedList.Add(item); } 
```

这种模式有一个缺点：如果其他代码也`sharedList`因其他原因锁定怎么办？通常不是实际问题，但推荐的模式是（b）的原因是：

```
List<MyClass> sharedList = ...;
private object listLock = new object();
...
lock (listLock) { sharedList.Add(item); } 
```

或者，当共享对象是静态的 (c) 时：

```
static List<MyClass> sharedList = ...;
private static object listLock = new object();
...
lock (listLock) { sharedList.Add(item); } 
```

2) 线程交替设置`readerFlag`为 true 或 false，因此将输入 try/catch 块。同步是通过 Monitor.Pulse() 和 .Wait() 完成的。请注意，在没有死锁的情况下，Wait() 将在持续时间 s 内产生锁。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-07T13:28:34.713

1：您使用的对象定义/由您尝试强制执行的锁定粒度定义。如果 is 是“任何针对当前实例的调用”，那么 a`private readonly object syncLock = new object()`将是合理的。如果它是“任何代码，无论实例如何”（特别是静态的），那么`private readonly static object syncLock = new object()`. 有时，您试图保护的明显“事物”也会起作用：列表、队列等。主要的错误**决定**是：您已经泄漏到实例之外。`this``typeof(...)``string``lock`

2：从当前线程`Monitor.Wait` **释放**锁，等待“脉冲”或超时，此时它唤醒并加入队列以*重新获得*它拥有的锁（注意“s”用于重新进入） . 这意味着两个线程可以通过脉冲和等待在它们之间使用 a`Monitor`来*发出信号。*

3：不相关；但基本上是“定期检查标志，并在被脉冲时”

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-08-25T16:53:00.760

根据[MSDN 文档](https://msdn.microsoft.com/en-us/library/ms173179.aspx)：

> 提供给**lock**关键字 ... 的参数用于定义锁的范围。...严格来说，提供的对象仅用于唯一标识多个线程之间共享的资源，因此它可以是任意类实例。然而，在实践中，该对象通常表示需要线程同步的资源。

就我而言，我已经传递了我需要更改的确切静态对象。

# java - 从命令行启动 jar 时如何使用 java 启动画面？

> ID：13763918
> 
> 赞同：1
> 
> 时间：2012-12-07T13:19:22.843
> 
> 标签：java

我已经在清单中设置了一个启动画面，供我的应用程序使用。如果我使用 eclipse 创建我的 jar，当我双击 jar 时会显示启动画面。但是，当我尝试使用 java -classpath blah.jar 从命令行启动我的应用程序时，我没有得到启动画面。我也尝试过指定 java -splash:Resources/blah.png [...]，但这也不起作用（Resources/blah.png 是我在 jar 中的路径）。

我需要让它通过命令行工作有两个原因。首先，某些客户端机器的系统可能没有正确配置为通过双击直接运行 jar。其次，我想通过命令行设置我的堆大小和永久空间大小，因为在某些情况下可能需要它（能够通过我的清单来做到这一点会很棒）。

最后，我宁愿没有一个独立于我的 jar 的图像目录。

简而言之，当从命令行启动 jar 时，如何使用清单中指定的 java 启动画面？其次，有没有一种无需通过命令行启动就可以设置我的堆和永久空间大小的好方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T13:23:37.413

`-jar`使用选项而不是选项启动应用程序`-cp`。这告诉 java 从 jar 的清单中加载类路径、主类和其他选项，例如启动屏幕：

```
java -jar myJar.jar 
```

这是系统在双击 jar 时使用的命令（除了它使用`javaw`而不是`java`）。

如果你想要一个可双击的文件来设置堆和 permgen 大小，那么创建一个`.bat`/`.sh`文件，或者使用像[launch4j](http://launch4j.sourceforge.net/)这样的工具。

# python - Django South - 为已经填充表的应用程序创建初始迁移

> ID：13763922
> 
> 赞同：3
> 
> 时间：2012-12-07T13:19:38.383
> 
> 标签：python, django, migration, django-south

场景：我的 Django 应用程序中有一个应用程序，我从未将其置于 South 管理之下。我很久以前运行了一个syncdb，这个应用程序的模型从来没有改变过。一直以来，我显然已经向这些表中添加了数据。

现在，我希望把这个应用程序置于南方管理下，但是一旦表已经存在，我可以创建迁移文件，但自然不能执行它们。我收到现有表的数据库错误：

`django.db.utils.DatabaseError: (1050, "Table 'ooyala_ooyalaitem' already exists")`

这对我来说很明显。我想知道是否有一种聪明的方法可以运行 migrate 命令来使用当前表。我不想转储数据、手动删除表、运行迁移并重新填充内容，也不想为此创建数据迁移。

对此有什么想法吗？甚至可能吗？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-07T13:25:36.947

[这在手册中有介绍](http://south.readthedocs.org/en/latest/convertinganapp.html#converting-an-app)。

> 将应用程序转换为使用 South 非常简单：
> 
> *   编辑您的 settings.py 并将“南”放入`INSTALLED_APPS`（假设您已将其安装到正确的位置）
> *   运行`./manage.py syncdb`以将 South 表加载到数据库中。请注意，syncdb 现在看起来不同了 - South 对其进行了修改。
> *   Run `./manage.py convert_to_south myapp`- South 将自动进行并假装应用您的第一次迁移。
> 
> 请注意，您需要在进行任何更改之前进行转换；South 通过与上次迁移的冻结状态进行比较来检测更改，因此它无法检测到您转换为使用 South 之前的更改。

# database - Mac OS 编程中的 SQLite

> ID：13763924
> 
> 赞同：0
> 
> 时间：2012-12-07T13:19:48.240
> 
> 标签：database, macos, cocoa, sqlite

我是 Mac OS 编程的新手，在我的 mac os 项目中集成 SQLite 数据库时遇到了问题。

```
+ (void) getInitialDataToDisplay:(NSString *)dbPath {

    AppDelegate* appDelegate = (AppDelegate *)[[NSApplication sharedApplication] delegate];

    if (sqlite3_open([dbPath UTF8String], &database) == SQLITE_OK) {

        const char *sql = "select * from MyTable";
        sqlite3_stmt *selectstmt;
        if(sqlite3_prepare_v2(database, sql, -1, &selectstmt, NULL) == SQLITE_OK) {

            NSLog(@"sqlite3_step(selectstmt)=%d",sqlite3_step(selectstmt));
            NSLog(@"SQLITE_ROW= %d",SQLITE_ROW);

            while(sqlite3_step(selectstmt) == SQLITE_ROW) {

                NSInteger PrimaryKey = sqlite3_column_int(selectstmt, 0);
                DatabaseInfo *databaseObj = [[DatabaseInfo alloc] initWithPrimaryKey:PrimaryKey];
                databaseObj.item1 = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 1)];
                databaseObj.item2 = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 2)];

                [appDelegate.mutablearray_Database addObject:databaseObj];

                [databaseObj release];
            }
        }
    }
    else
        sqlite3_close(database);

} 
```

在上述方法中，控制器从未进入 while 循环。这就是为什么我无法从数据库中获取数据的原因。

谁能帮我？

请建议我使用 Mac OS 编程实现 SQLite 数据库的任何示例代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:29:18.953

首先，我想指出，最好使用 CoreData （苹果自己的 sqlite 实现，非常强大和高效，尽管您必须先阅读一些文档才能了解这些类) 或[FMDB](https://github.com/ccgus/fmdb)，这是一个经过良好测试的用于 SQLite 的 Objective-C 包装器，[github 上的 FMDB](https://github.com/ccgus/fmdb)

其次，您的表中有多少行可用？由于该 NSLog 也在调用 sqlite3_step() 它可能只是跨过你实际拥有的唯一行.. 其余的实现大致看起来像我在我的一些旧项目中所做的，例如：

```
sqlite3_stmt *statement = nil;
if( sqlite3_prepare_v2(_database, [query UTF8String], -1, &statement, NULL) == SQLITE_OK )
{
     while( sqlite3_step(statement) == SQLITE_ROW )
     {
          // get column data..
     }
}
sqlite3_finalize(statement); 
```

# mysql - 未知数量输入的数据库设计

> ID：13763925
> 
> 赞同：1
> 
> 时间：2012-12-07T13:19:53.187
> 
> 标签：mysql, database

我正在尝试将一些数据存储在数据库中，但无法弄清楚应如何设计数据库以实现最大生产力...

用户可以选择表单中的条目数。然后需要将这些条目保存在数据库中。然而，不知道用户想要多少个条目，例如它们可以是 1 或 100。

保存这些数据如何更好？

我想到的是用用户ID将条目数存储在数据库中，并将输入放入一个数组中，对其进行序列化并将其存储在数据库中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:28:58.283

我可能会做以下事情：

```
+---------------+
| Table: users  |
+----+----------+
| id | username |
+----+----------+
|  1 | tanzeel  |
|  2 | john     |
+----+----------+

+-----------------------------------------------+
| Table: entries                                |
+----+---------+------------+-------------------+
| id | user_id | entry_name | single_entry_data |
+----+---------+------------+-------------------+
|  1 |       1 | prop1      | ################  |
|  2 |       1 | prop2      | ################  |
|  3 |       1 | prop3      | ################  |
|  4 |       2 | prop1      | ################  |
|  5 |       2 | prop2      | ################  |
|  6 |       1 | prop4      | ################  |
+----+---------+------------+-------------------+ 
```

该`entries`表存储`n`与 关联的每个用户的条目，这是对表`user_id`的 PK（主键）列的 FK（外键）引用。当您想要检索数据时，您可以按如下方式触发选择查询来获取特定用户的条目。`id``users`

```
SELECT * FROM entries A
INNER JOIN users B
ON A.user_id = B.id
AND B.id = 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T13:29:16.040

如果不同的输入字段类型有相同的选项，比如文本描述，你应该使用这样的方法。

```
table       columns                  example values
-----       -------                  --------------
users       id, name, password       12, "Johnny", "afad13cf1941"
forms       id, user                 42, 12
inputs      id, form, type, options  6, 42, "checkbox", "Want newsletter?" 
```

如果不同的输入字段有不同的选项，例如仅属于复选框的选中状态，请尝试以下操作。但在这种情况下，您必须为要提供的每种输入类型创建一个表，在此示例`checkboxes`中，`textfields`并且`images`.

```
table       columns                  example values
-----       -------                  --------------
users       id, name, password       12, "Johnny", "afad13cf1941"
forms       id, user                 42, 12
inputs      form, type, input        42, "checkbox", 8

checkboxes  id, text, checked        8, "Want newsletter?", false
textfields  id, text                 9, "Welcome to that page"
images      id, size, caption        10, 720, "The Mona Lisa" 
```

该`type`列告诉使用您将在哪个表中找到该列中 id 下的输入字段的选项`input`。

请注意，在这两个示例中，调用`id`的每一列都是主键。在最后一个表中，`type`和的组合`input`将是主键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T13:34:21.833

nosql-database 可能更适合您想要做的事情。- 查找例如 couchdb。

如果您想/必须使用 mysql 并且您需要能够搜索单个值，请按照 Tanzeel 和 sharethis 进行操作。如果您想要获取给定用户 / 和 / 或表单 ID 的整组参数，则最好将序列化数据存储为 varchar 或文本字段。如果您选择序列化，请查看 json 是否符合您的要求。然后你有很多工具来处理你的数据。

# magento - 如何在后端创建新订单时获取购物车物品？

> ID：13763927
> 
> 赞同：0
> 
> 时间：2012-12-07T13:20:06.837
> 
> 标签：magento, shopping-cart, backend

我试图从后端订单中加载所有项目。

例子：

```
$quote->getAllItems(); 
```

它在前端工作正常，但在后端不行。
我用谷歌搜索了很多，我可以看到这个问题没有解决方案？
我需要这些项目，否则我无法从外部 api 获得成功的响应。

它也应该从 magento 1.4+ CE 运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:57:46.813

```
Mage::getSingleton('adminhtml/session_quote')->getQuote()->getAllItems(); 
```

# jquery - 带有链接的 JQuery UI 自动完成渲染类别

> ID：13763933
> 
> 赞同：6
> 
> 时间：2012-12-07T13:20:29.847
> 
> 标签：jquery, jquery-ui, autocomplete, jquery-ui-autocomplete

我正在使用 JQuery UI 自动完成来快速搜索小部件。我有几个分组项目，如酒店、城市、地区等。我可以呈现类别，但我无法链接它们。当我尝试时，ui 自动完成插件会检测项目等类别。这不是问题，但是当我使用向上/向下箭头或鼠标聚焦它们时，它会返回如下错误：

`"TypeError: item is undefined. this.liveRegion.text( item.value );"`

我怎样才能解决这个问题？我尝试通过几种方法（如 '或'）使用 JQuery UI 自动完成的“焦点”事件`return false`，但它没有用`e.stopPropagation``e.preventDefault`

这是我的代码：

```
$.widget("custom.catcomplete", $.ui.autocomplete, {
        _renderMenu: function (ul, items) {
            var searchkey = "";
            var itemtype = "";
            var searchtype = "";

            var self = this, currentCategory = "";
            $.each(items, function (index, item) {
                if (typeof item.kelime != 'undefined') { searchkey = item.kelime; }
                if (item.category != currentCategory) {
                    if (item.category == "Bölge" || item.category == "Şehir") {
                        itemtype = "cat-bolgeler";
                    } else if (item.category == "Otel") {
                        itemtype = "cat-oteller";
                        searchtype = "otel";
                    } else if (item.category == "Yurt Dışı Tur") {
                        itemtype = "cat-ydtur";
                        searchtype = "yurtdisitur";
                    } else if (item.category == "Yurt İçi Tur") {
                        itemtype = "cat-yitur";
                        searchtype = "yurticitur";
                    } else if (item.category == "Cruise") {
                        itemtype = "cat-cruise";
                        searchtype = "cruise";
                    }
                    if (searchtype != "") {
                        ul.append("<li class='ui-autocomplete-category " + itemtype + "' id='" + item.searchid + "'><a href='/arama/" + searchkey + "?k=" + searchtype + "&q=" + searchkey + "'>" + item.category + "</a></li>");
                    } else {
                        ul.append("<li class='ui-autocomplete-category " + itemtype + "' id='" + item.searchid + "'>" + item.category + "</li>");
                    }
                    currentCategory = item.category;
                }
                self._renderItem(ul, item);
            });
        }
    });

    $(".hizliaratext").catcomplete({
        source: function (request, response) {
            $.ajax({
                url: '/filename.aspx',
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                type: "get",
                data: { kelime: request.term },
                success: function (data) {
                    response($.map(data, function (item) {
                        return {
                            label: item.label,
                            searchid: item.searchid,
                            category: item.category,
                            link: item.link,
                            kelime: item.kelime
                        }
                    }));
                }
            });
        },
        minLength: 3,
        appendTo: "#hizliara",
        select: function (event, ui) {
            window.location = ui.item.link;
        },
        focus: function (event, ui) {
        }
    }).data("catcomplete")._renderItem = function (ul, item) {
        return $("<li>").data("item.autocomplete", item).append("<a>" + item.label + "</a>").appendTo(ul);
    }; 
```

**这是“ ?kelime=anka** ”的示例 JSON 响应：

```
[{"searchid":2001,"label":"Alba Ankara Hotel","category":"Otel","link":"/otel-detay/alba-ankara-hotel","kelime":"anka"},{"searchid":2238,"label":"Ankara Madi İnci Hotel","category":"Otel","link":"/otel-detay/ankara-madi-inci-hotel"},{"searchid":2244,"label":"Madi Hotel Ankara","category":"Otel","link":"/otel-detay/madi-hotel-ankara"},{"searchid":2403,"label":"City Hotel Ankara","category":"Otel","link":"/otel-detay/city-hotel-ankara"},{"searchid":2404,"label":"Doğa Residence Ankara","category":"Otel","link":"/otel-detay/doga-residence-ankara"},{"searchid":6779,"label":"Ankara","category":"Şehir","link":"/ustaramaliste.aspx?y=6779"},{"searchid":6785,"label":"Ankara / Çankaya","category":"Bölge","link":"/ustaramaliste.aspx?y=6785"},{"searchid":14601,"label":"İzmir / Çankaya","category":"Bölge","link":"/ustaramaliste.aspx?y=14601"}] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T17:18:57.777

听起来（和看起来）你*想要*类别项目的`select`/`focus`事件（如果不是这种情况，我会更新我的答案）。

自动完成小部件在内部期望列表项具有`item.autocomplete`与之关联的数据。为了避免错误，您可以使用适当的数据创建“类别”项目。这将使您能够对`select`事件做出反应并摆脱事件上发生的错误`focus`：

**更新的小部件代码：**

```
$.widget("custom.catcomplete", $.ui.autocomplete, {
    _renderMenu: function(ul, items) {
        var searchkey = "";
        var itemtype = "";
        var searchtype = "";

        var self = this,
            currentCategory = "";
        $.each(items, function(index, item) {
            if (typeof item.kelime != 'undefined') {
                searchkey = item.kelime;
            }
            if (item.category != currentCategory) {
                if (item.category == "Bölge" || item.category == "Şehir") {
                    itemtype = "cat-bolgeler";
                } else if (item.category == "Otel") {
                    itemtype = "cat-oteller";
                    searchtype = "otel";
                } else if (item.category == "Yurt Dışı Tur") {
                    itemtype = "cat-ydtur";
                    searchtype = "yurtdisitur";
                } else if (item.category == "Yurt İçi Tur") {
                    itemtype = "cat-yitur";
                    searchtype = "yurticitur";
                } else if (item.category == "Cruise") {
                    itemtype = "cat-cruise";
                    searchtype = "cruise";
                }
                if (searchtype != "") {
                    ul.append($("<li class='ui-autocomplete-category " + itemtype + "' id='" + item.searchid + "'><a href='/arama/" + searchkey + "?k=" + searchtype + "&q=" + searchkey + "'>" + item.category + "</a></li>").data("item.autocomplete", {}));
                } else {
                    ul.append($("<li class='ui-autocomplete-category " + itemtype + "' id='" + item.searchid + "'>" + item.category + "</li>").data("item.autocomplete", {}));
                }
                currentCategory = item.category;
            }
            self._renderItem(ul, item);
        });
    }
}); 
```

**示例：http:** [//jsfiddle.net/J5rVP/20/](http://jsfiddle.net/J5rVP/20/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-19T22:56:59.400

对于 jquery-ui-1.10+，数据标签名称已更改为“ui-autocomplete-item”，如下所示：

```
ul.append($("<li class='ui-autocomplete-category'>" + item.Type + "</li>").data("ui-autocomplete-item", {})); 
```

# mfc - 选项卡中的控件在运行时不可见

> ID：13763936
> 
> 赞同：-2
> 
> 时间：2012-12-07T13:20:34.667
> 
> 标签：mfc

当我在主父对话框的一个选项卡控件中添加多个窗口时，它添加成功但是每当我运行程序时它运行一个应用程序但是在按下退出按钮后它会丢失子窗口中的所有控件，我做什么它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:33:43.883

我假设您有多个与选项卡控件关联的对话框。如果是这样，请查看`CDialog::OnCancel`MSDN： http: [//msdn.microsoft.com/en-us/library/kw3wtttf](http://msdn.microsoft.com/en-us/library/kw3wtttf(v=vs.80).aspx) (v=vs.80).aspx 。

# iphone - 使用 AFJSONRequestOperation 返回 JSON

> ID：13763937
> 
> 赞同：2
> 
> 时间：2012-12-07T13:20:37.457
> 
> 标签：iphone, objective-c, ios, afnetworking

我已经实现了 AFNetworking 框架，但是我试图找出一种将 AFJSONRequestOperation 函数放在一个单独的类中并从我的各个视图控制器中调用它的方法。

我所做的是创建一个类方法，该方法采用字典中的参数和 web 服务 url。我希望这能够从成功块返回 JSON 数组和 Http 代码，但这不起作用。

如果我将公共函数更改为具有返回类型并在方法结束时返回一个值，它会在成功块完成之前返回。

有什么建议么？

```
+ (void)RequestJSON:(NSDictionary *)params:(NSString *)webServicePath {

    NSURL *url = [NSURL URLWithString:@"http://api.website.com/"];

    AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];

    NSMutableURLRequest *request = [httpClient requestWithMethod:@"POST" path:webServicePath parameters:params];
    NSLog(@"%@", request);

    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request

    success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON)
                                         {

                                           NSString *httpCode = [[JSON valueForKey:@"meta"]valueForKey:@"code"];
                                             NSLog(@"code=%@", httpCode);

                                         }

    failure:^(NSURLRequest *request , NSURLResponse *response , NSError *error , id JSON)
                                         {
                                             NSLog(@"Failed: %@",[error localizedDescription]);

                                         }];
    [operation start];

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T14:56:57.517

根据其他用户的推荐，我最终创建了自己的 Delegate，它在成功和失败方法中执行两个选择器 didReceiveJSON 和 didNotReceiveJSON。

编辑：这是我的代码:)

```
JSONRequest.h

#import <Foundation/Foundation.h>

@class JSONRequest;

@protocol JSONRequest <NSObject>

- (void)didReceiveJSONResponse:(NSDictionary*)JSONResponse;
- (void)didNotReceiveJSONResponse;

@end

@interface JSONRequest : NSObject {

    id <JSONRequest> delegate;
}

@property (strong, nonatomic) id <JSONRequest> delegate;

- (void)RequestJSON:(NSDictionary* )params:(NSString*)webServicePath;

@end 
```

JSONRequest.m

```
#import "JSONRequest.h"
#import "AFHTTPClient.h"
#import "AFJSONRequestOperation.h"

@implementation JSONRequest
@synthesize delegate;

- (void)RequestJSON:(NSDictionary *)params:(NSString *)webServicePath {

    NSURL *url = [NSURL URLWithString:@"http://api.mysite.com"];

    AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];

    NSMutableURLRequest *request = [httpClient requestWithMethod:@"POST" path:webServicePath parameters:params];
    NSLog(@"%@", request);

    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request

    success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON)
                                         {
                                             NSDictionary *jsonDictionary = JSON;
                                             [delegate performSelector:@selector(didReceiveJSONResponse:) withObject:jsonDictionary];
                                         }

    failure:^(NSURLRequest *request , NSURLResponse *response , NSError *error , id JSON)
                                         {
                                             NSLog(@"Failed: %@",[error localizedDescription]);
                                             [delegate performSelector:@selector(didNotReceiveJSONResponse)];

                                         }];
    [operation start];

} 
```

@结尾

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:37:32.700

您的 AFJSONRequestOperation 异步运行！所以它不在主线程上运行（我认为这是 AFJSONRequestOperation 的目的），但你的`+ (void)RequestJSON:(NSDictionary *)params:(NSString *)webServicePath`方法在主线程上执行，因此立即完成。例如，[这里](https://stackoverflow.com/questions/7969865/can-afnetworking-return-data-synchronously-inside-a-block)有人问同样的问题。

因为 AFJSONRequestOperation 基于 NSOperation，您可以将其添加到 mainQueu。但是从主线程发送同步请求是个坏主意。但也许只是看看[这个解决方法](https://stackoverflow.com/questions/10670892/waiting-for-completion-block-to-complete-in-an-afnetworking-request)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T13:37:48.700

该函数返回是因为它的任务只是设置 OperationQueue。一旦它这样做了，它就会像往常一样继续它的流动。您是否考虑过为其实现委托？您可以发布一条消息，例如`JSONRequestDidComplete`并将 JSON 字典作为参数传递给它。然后，您可以使用视图控制器中设置为请求类的委托的字典来执行所需的操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T14:54:26.530

我使用非常相似的设置。我所做的是创建了一个委托，异步请求可以调用并传递 JSON/NSDictionary。其他答案是正确的，该方法将在网络请求完成之前完成。这很好。创建一个类来放入您的网络调用并设置您的视图控制器实现的成功和失败方法。这些将在请求完成时被调用，您将从没有被阻止的 UI 中受益。

# actionscript-3 - 如何将 2 个 Flash 游戏与菜单合二为一？

> ID：13763941
> 
> 赞同：1
> 
> 时间：2012-12-07T13:20:38.223
> 
> 标签：actionscript-3, button, flash-cs6

我在不同文件中创建了两个 Flash 和 AS3 游戏，并希望将它们与在第三个文件上创建的菜单结合起来。我是导入它们还是复制粘贴它们？ActionScript 应该在游戏线上还是应该都在同一个动作层中？

如何设置菜单？我所做的一切似乎都以某种方式搞砸了。

我有一个动画开始菜单，它有一个开始和一个关于游戏按钮。当您单击“开始”按钮 (start123_btn) 时，它会将您带到一个菜单，您可以在其中从两个游戏中进行选择（然后我想连接我创建的两个游戏，在这些游戏中我想要一种返回主游戏的​​方法菜单）。

About the Game 按钮将您带到另一个按钮，该按钮提供了我想要的游戏的一些详细信息，当他们单击它时，它会将它们带回主菜单（第 60 帧）。

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T13:27:15.767

## tl;博士

创建第三个 SWF，使用`Loader`.
为每个游戏添加`startGame()`和`stopGame()`方法来控制它们。

## 细节

创建一个定义菜单并加载每个游戏的包装器。加载游戏后，调用`startGame()`初始化 SWF。`stopGame()`可以在关闭游戏之前调用。

```
public class Game1 extends MovieClip
{
    public function startGame():void
    {
        // ...
    }

    public function stopGame():void
    {
        // ...
    }

    // ...
} 
```

对第二场比赛做同样的事情。

# bash - 为什么管道输入到“read”只有在输入“while read ...”结构时才有效？

> ID：13763942
> 
> 赞同：78
> 
> 时间：2012-12-07T13:20:49.050
> 
> 标签：bash, while-loop, pipe, piping

我一直在尝试从程序输出中读取环境变量的输入，如下所示：

```
echo first second | read A B ; echo $A-$B 
```

结果是：

```
- 
```

A 和 B 始终为空。我读到了 bash 在子 shell 中执行管道命令，这基本上阻止了一个管道输入来读取。但是，以下内容：

```
echo first second | while read A B ; do echo $A-$B ; done 
```

似乎工作，结果是：

```
first-second 
```

有人可以解释一下这里的逻辑是什么吗？是不是`while`...`done`构造中的命令实际上是在同一个 shell 中执行的，`echo`而不是在子 shell 中？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-12-07T13:25:30.787

# 如何对标准输入执行循环*并将*结果存储在变量中

在[bash](/questions/tagged/bash "显示标记为“bash”的问题")（以及其他[shell](/questions/tagged/shell "显示标记为“外壳”的问题")）下，当您通过 管道将某些内容传递给另一个命令时`|`，您将隐式创建一个*fork*，这是一个子shell，它是当前会话的子shell。子shell 不能影响当前会话的环境。

所以这：

```
TOTAL=0
printf "%s %s\n" 9 4 3 1 77 2 25 12 226 664 |
  while read A B;do
      ((TOTAL+=A-B))
      printf "%3d - %3d = %4d -> TOTAL= %4d\n" $A $B $[A-B] $TOTAL
    done
echo final total: $TOTAL 
```

不会给出预期的结果！：

```
 9 -   4 =    5 -> TOTAL=    5
  3 -   1 =    2 -> TOTAL=    7
 77 -   2 =   75 -> TOTAL=   82
 25 -  12 =   13 -> TOTAL=   95
226 - 664 = -438 -> TOTAL= -343
echo final total: $TOTAL
final total: 0 
```

其中计算的*TOTAL*不能在主脚本中重用。

## 倒置前叉

通过使用[bash](/questions/tagged/bash "显示标记为“bash”的问题") *Process Substitution*、*Here Documents*或*Here Strings*，您可以反转分叉：

### 这里的字符串

```
read A B <<<"first second"
echo $A
first

echo $B
second 
```

### 这里的文件

```
while read A B;do
    echo $A-$B
    C=$A-$B
  done << eodoc
first second
third fourth
eodoc
first-second
third-fourth 
```

在循环之外：

```
echo : $C
: third-fourth 
```

### 这里命令

```
TOTAL=0
while read A B;do
    ((TOTAL+=A-B))
    printf "%3d - %3d = %4d -> TOTAL= %4d\n" $A $B $[A-B] $TOTAL
  done < <(
    printf "%s %s\n" 9 4 3 1 77 2 25 12 226 664
)
  9 -   4 =    5 -> TOTAL=    5
  3 -   1 =    2 -> TOTAL=    7
 77 -   2 =   75 -> TOTAL=   82
 25 -  12 =   13 -> TOTAL=   95
226 - 664 = -438 -> TOTAL= -343

# and finally out of loop:
echo $TOTAL
-343 
```

现在你可以`$TOTAL`在你的*主脚本*中使用了。

## 管道到*命令列表*

但是对于仅针对*stdin的工作，您可以在**fork*中创建一种脚本：

```
printf "%s %s\n" 9 4 3 1 77 2 25 12 226 664 | {
    TOTAL=0
    while read A B;do
        ((TOTAL+=A-B))
        printf "%3d - %3d = %4d -> TOTAL= %4d\n" $A $B $[A-B] $TOTAL
    done
    echo "Out of the loop total:" $TOTAL
  } 
```

会给：

```
 9 -   4 =    5 -> TOTAL=    5
  3 -   1 =    2 -> TOTAL=    7
 77 -   2 =   75 -> TOTAL=   82
 25 -  12 =   13 -> TOTAL=   95
226 - 664 = -438 -> TOTAL= -343
Out of the loop total: -343 
```

注意：`$TOTAL`不能在*主脚本*中使用（在最后一个右大括号之后`}`）。

## 使用*lastpipe* bash 选项

正如@CharlesDuffy 正确指出的那样，有一个 bash 选项用于改变这种行为。但是为此，我们必须首先**禁用** *作业控制*：

```
shopt -s lastpipe           # Set *lastpipe* option
set +m                      # Disabling job control
TOTAL=0
printf "%s %s\n" 9 4 3 1 77 2 25 12 226 664 |
  while read A B;do
      ((TOTAL+=A-B))
      printf "%3d - %3d = %4d -> TOTAL= %4d\n" $A $B $[A-B] $TOTAL
    done

  9 -   4 =    5 -> TOTAL= -338
  3 -   1 =    2 -> TOTAL= -336
 77 -   2 =   75 -> TOTAL= -261
 25 -  12 =   13 -> TOTAL= -248
226 - 664 = -438 -> TOTAL= -686

echo final total: $TOTAL
-343 
```

这会起作用，但我（个人）不喜欢这样，因为这不是*标准*的并且无助于使脚本可读。同样禁用作业控制对于访问此行为似乎很昂贵。

**注意：默认情况下，** *作业控制*仅在*交互式*会话中启用。所以`set +m`在普通脚本中不需要。

`set +m`因此，如果在控制台中运行或在脚本中运行，那么在脚本中被遗忘会产生不同的行为。这不会使这易于理解或调试......

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2016-06-17T16:49:58.940

一个更清洁的解决方法......

```
first="firstvalue"
second="secondvalue"
read -r a b < <(echo "$first $second")
echo "$a $b" 
```

这样， read 不会在子 shell 中执行（一旦该子 shell 结束，它将清除变量）。相反，您要使用的变量会在子 shell 中回显，该子 shell 会自动从父 shell 继承变量。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-12-07T13:35:42.660

首先，执行此管道链：

```
echo first second | read A B 
```

然后

```
echo $A-$B 
```

因为`read A B`在子shell中执行，A和B都丢失了。如果你这样做：

```
echo first second | (read A B ; echo $A-$B) 
```

然后两者`read A B`都`echo $A-$B`在同一个子shell中执行（参见bash的手册页，搜索`(list)`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-09-25T23:20:13.890

您所看到的是进程之间的分离：`read`发生在子shell中 - 一个单独的进程，它不能更改主进程中的变量（`echo`稍后会出现命令）。

管道（如）隐式地将每个组件放置在子外壳（一个单独的进程）中，即使对于通常在外壳上下文中（在同一进程中）运行的`A | B`内置（如）也是如此。`read`

“进入while”情况的差异是一种错觉。同样的规则在那里适用：循环是管道的后半部分，所以它在一个子shell中，但*整个*循环在*同一*个子shell中，所以进程的分离不适用。

# ios - calayer 帧怎么会慢，我们可以做些什么来优化呢？

> ID：13763944
> 
> 赞同：0
> 
> 时间：2012-12-07T13:20:54.513
> 
> 标签：ios, core-animation

(UIView*).frame 占用了应用程序总时间的 10% (!)，我不知道为什么。我没有覆盖默认方法，坦率地说“.frame”应该很快，不是吗？

Instruments 没有提供任何额外的信息 :(。

![仪器截图](../Images/8c5c0a940e2dc46fc1a88d5f8c6bc81b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:30:12.173

计算框架属性。如果您只需要这些，请尝试访问边界和/或中心属性。

# gcc - boost::uniform_on_sphere 在数百万次正确实现后突然失败，但仅在某些主机上

> ID：13763946
> 
> 赞同：3
> 
> 时间：2012-12-07T13:20:55.613
> 
> 标签：gcc, boost, random, boost-random

# 问题

在正确生成 2 维随机向量一段时间后，`boost::uniform_on_sphere`分布突然生成了一个值为 的向量`-nan`。我已经在三台机器上测试了包含的程序 - 在其中两台机器上观察到错误，但在第三台机器上没有。有谁知道会发生什么？

编辑：如果使用相同的类型，它会发生在所有主机上。

# 东道主

## 主机 1

*   AMD Opteron(tm) 处理器 6174
*   g++ (GCC) 4.4.6 20120305 (红帽 4.4.6-4)
*   3802480 实现后失败

## 主机 2

*   Intel(R) Core(TM) i5 CPU 650 @ 3.20GHz
*   g++ (GCC) 4.7.2 20120921 (红帽 4.7.2-2)
*   3802480 实现后失败

## 主机 3

*   Intel(R) Atom(TM) CPU D2700 @ 2.13GHz
*   g++ (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3
*   3802480 次实现后失败，输出略有不同

## 实现

在主机 1 和 2 上：

```
3802470: -4.8961880803e-01 , -8.7193667889e-01
3802471: 9.9225074053e-01 , -1.2425158173e-01
3802472: 6.5411877632e-01 , -7.5639182329e-01
3802473: -9.8332953453e-01 , -1.8183253706e-01
3802474: 7.1217632294e-01 , -7.0200067759e-01
3802475: -9.9968332052e-01 , 2.5166392326e-02
3802476: 9.9412262440e-01 , 1.0826008022e-01
3802477: -6.2786966562e-01 , 7.7831840515e-01
3802478: 5.7143938541e-01 , 8.2064425945e-01
3802479: 5.8261138201e-01 , 8.1275087595e-01
3802480: -nan , -nan
3802481: 9.2151606083e-01 , 3.8834002614e-01
3802482: 8.6448800564e-01 , -5.0265353918e-01
3802483: -9.1891586781e-01 , 3.9445358515e-01
3802484: -9.1544634104e-01 , 4.0244001150e-01 
```

在主机 3 上，使用`float`代替`float_t`：

```
3802470: -4.8961877823e-01 , -8.7193661928e-01
3802471: 9.9225074053e-01 , -1.2425158918e-01
3802472: 6.5411871672e-01 , -7.5639182329e-01
3802473: -9.8332953453e-01 , -1.8183253706e-01  <- exactly the same as above
3802474: 7.1217626333e-01 , -7.0200061798e-01
3802475: -9.9968332052e-01 , 2.5166388601e-02
3802476: 9.9412262440e-01 , 1.0826008022e-01
3802477: -6.2786966562e-01 , 7.7831846476e-01
3802478: 5.7143932581e-01 , 8.2064431906e-01   <- slightly different
3802479: 5.8261138201e-01 , 8.1275087595e-01   <- exactly the same
3802480: -nan , -nan
3802481: 9.2151612043e-01 , 3.8834002614e-01
3802482: 8.6448800564e-01 , -5.0265347958e-01
3802483: -9.1891586781e-01 , 3.9445355535e-01
3802484: -9.1544634104e-01 , 4.0244001150e-01 
```

# 该程序

这是简单地用`g++ bug.cpp`. 打开`-O3`优化并没有改变结果。

```
#include <boost/circular_buffer.hpp>
#include <boost/random/variate_generator.hpp>
#include <boost/random/uniform_on_sphere.hpp>
#include <boost/random.hpp>
#include <iostream>
#include <fstream>
using namespace std;

int main(int argc, const char *argv[])
{
    typedef boost::mt19937                                              GeneratorType;
    typedef boost::uniform_on_sphere<float_t>                           DistributionType;
    typedef boost::variate_generator<GeneratorType, DistributionType >  VariateType;
    typedef boost::circular_buffer<DistributionType::result_type>       BufferType;
    GeneratorType       gen;
    DistributionType    dist(2);
    VariateType         variate(gen,dist);
    const int           BUFSIZE = 10;

    gen.seed(11);
    BufferType buf(BUFSIZE);
    long n(0);
    while (1){
        cout << "n: " << n << "\r" << flush;
        DistributionType::result_type tmp = variate();
        buf.push_back(tmp);
        if (isnan(tmp[0])) {
            cout << "n: " << n << "       " << endl;
            cout << tmp[0] << " , " << tmp[1] << endl;
            ofstream fout("debug.out");
            for (int i=0; i<BUFSIZE; i++)
                fout << buf[i][0] << " " << buf[i][1] << endl;
            fout.close();
            ofstream gen_out("gen.out");
            gen_out << gen;
            gen_out.close();
            exit(1);
        }
        n++;
    }

    return 0;
} 
```

我真的很感激任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:07:52.883

这似乎是由于`boost/random/uniform_on_sphere.hpp`. 在 N 维中，生成 N 个正态分布的数字作为 N 向量的分量，然后对其进行归一化。在 2d 中，得到两个零的概率显然不可忽略，`NaN`由于归一化，导致每个分量的计算 0/0=。

一种解决方法是仅针对小尺寸手动编程此分布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T14:21:34.320

x86-32 和 x86-64 之间的一大区别是 x87（80 位 FP）和 SSE（64 位 FP）之间的区别。即 32 位 Atom 有 16 个额外的位可以工作。

# javascript - javascript 生成的 SVG 中的异物

> ID：13763947
> 
> 赞同：2
> 
> 时间：2012-12-07T13:20:57.900
> 
> 标签：javascript, forms, svg

我正在尝试在使用 javascript 动态创建的 SVG 中创建一组简单的文本输入。

首先我是用 PHP 做的，代码片段看起来像这样：

```
for ($row=0; $row<7; $row++)
{
for ($col=0; $col<7; $col++)
{
    $fx=130+100*$col;
    $fy=120+100*$row;
    echo "<foreignObject x="".$fx."" y="".$fy."" width="50" height="80">\n<body xmlns="http://www.w3.org/1999/xhtml">\n<form><input type="text" width="1"/ style="font-size:48px; border:none;"></form>\n</body>\n</foreignObject>";
}
} 
```

然后在javascript中我会尝试这样的单个实例，但我没有让它工作。

```
var field = document.createElementNS("http://www.w3.org/2000/svg", "foreignObject");
field.setAttribute("x", "130");
field.setAttribute("y", "120");
field.setAttribute("width", "50");
field.setAttribute("height", "80");
mySvg.appendChild(field.cloneNode(true));
var s = '<body xmlns="http://www.w3.org/1999/xhtml"><form><input type="text" width="1" style="font-size:48px; border:none;"></form></body>';
var s1 = document.createElement(s);
field.appendChild(s1);
</script> 
```

有什么提示吗？或者我应该切换到完全不同的实现（例如 CSS）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:17:09.920

document.createElement 需要元素名称作为参数并创建单个元素，它不会解析任意 html/xml 内容。

您可以使用[DOMParser](https://developer.mozilla.org/en-US/docs/DOM/DOMParser)解析标记字符串。

至于 PHP，您可能需要[转义](http://php.net/manual/en/language.types.string.php)echo 中的内部双引号。

# sql - 将第一次出现合并为 3 列

> ID：13763953
> 
> 赞同：1
> 
> 时间：2012-12-07T13:21:36.537
> 
> 标签：sql, sql-server-2008, tsql

我有一张`Table`这样的桌子：

```
ColumnA (VARCHAR)|ColumnB (VARCHAR)|ColumnC (VARCHAR)|ColumnD (DATE)
     A1                 B1               C1          2012-12-06
     A1                 B1               C1          2012-12-12
     A2                 B2               C2          2012-12-07
     A2                 B2               C2          2012-12-09 
```

我只想选择与 ColumnA-ColumnB-ColumnC 组合的第一次出现，因此结果将是这样的：

```
A1 | B1 | C1 | 2012-12-06
A2 | B2 | C2 | 2012-12-07 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:22:58.563

您可以在日期列和其余组上使用聚合函数：

```
select ColumnA, ColumnB, ColumnC, Min(ColumnD)
from yourtable
group by ColumnA, ColumnB, ColumnC 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/4d233/1)

或者您可以使用`row_number()`：

```
select ColumnA, ColumnB, ColumnC, ColumnD
from
(
  select ColumnA, ColumnB, ColumnC, ColumnD,
    row_number() over(partition by ColumnA, ColumnB, ColumnC order by ColumnD) rn
  from yourtable
) src
where rn = 1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/4d233/6)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T13:23:46.423

看起来像 group-by 是你想要的。

```
SELECT ColumnA, ColumnB, ColumnC, MIN(ColumnD)
FROM MyTable
GROUP BY ColumnA, ColumnB, ColumnC 
```

# vba - Outlook vba中的对象需要错误

> ID：13763955
> 
> 赞同：3
> 
> 时间：2012-12-07T13:21:43.640
> 
> 标签：vba, outlook

我收到此 Object Required 错误。请参阅下面的代码。我不明白为什么我会得到它。oitem 变量被声明为一个对象，我在尝试移动它之前对“MailItem”类型进行了测试。请指教。

艾伦

```
Public StatsArchiveFolder As Outlook.Folder
'StatsArchiveFolder is set to equal an Outlook.Folder elsewhere
_____________________________________

Sub MoveHarpStatMail()

Dim olapp As Outlook.Application
Dim olappns As Outlook.NameSpace
Dim oitem As Object
Dim ItemsToProcess As Outlook.Items
Dim myFolder As MAPIFolder
Dim sFilter As String
Dim tempMailItem As Outlook.MailItem

On Error GoTo LocalErr

'set outlook objects

Set olapp = New Outlook.Application
Set olappns = olapp.GetNamespace("MAPI")
Set myFolder = olappns.GetDefaultFolder(olFolderInbox)
'Filter or only MailItems received today
sFilter = "[ReceivedTime] >= " & AddQuotes(Format(Date, "ddddd"))
Set ItemsToProcess = Session.GetDefaultFolder(olFolderInbox).Items.Restrict(sFilter)

For Each oitem In ItemsToProcess
 If TypeName(oitem) = "MailItem" Then
   Set tempMailItem = oitem
   If CheckSubject(tempMailItem.Subject) Then
     MoveToArchiveFolder (tempMailItem) '<<<Error 424 Object Required ???
   End If
 End If
Next oitem

ExitProc:
Set olapp = Nothing
Set olappns = Nothing
Set myFolder = Nothing
Set ItemsToProcess = Nothing

...
End Sub

_________________________________

Function CheckSubject(Subject As String) As Boolean

   If (LCase(Trim(Subject)) = LCase(SubjectTitle)) Then
     CheckSubject = True
   Else
     CheckSubject = False
   End If

 End Function

______________________________

Sub MoveToArchiveFolder(Item As Outlook.MailItem)

  If (ArchiveFolder = Nothing) Then
    MsgBox ("The ArchiveFolder object is not set.")
  End If

  Item.Move (StatsArchiveFolder)

End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T14:39:35.757

去掉括号：

```
MoveToArchiveFolder tempMailItem 
```

基本上括号说要评估 的值`tempMailItem`。a 的默认属性`MailItem`是电子邮件的主题，因此您的代码将`tempMailItem`' 主题传递给您的函数，而不是`MailItem`它本身。

这是一篇关于原因的有趣的[每日剂量帖子。](http://www.dailydoseofexcel.com/archives/2012/05/01/quick-vba-tip-parentheses/)请务必阅读 Rick Rothstein 的评论。

# javascript - 子字符串不适用于 childNodes[0].nodeValue

> ID：13763956
> 
> 赞同：0
> 
> 时间：2012-12-07T13:21:56.690
> 
> 标签：javascript, jquery

我正在尝试从 td 中提取文本，如此处所述 [Replacing a part of text inside a td](https://stackoverflow.com/questions/13760664/replacing-a-part-of-text-inside-a-td#13760705)

```
$('.my-table tr').each(function() {

     var contact = $(this).find('td').eq(1)[0].childNodes[0].nodeValue;
     $(this).find('td').eq(1).contents()[0].data = contact.substring(0,10);
}); 
```

但是contact.substring(0,10); 似乎不起作用，它只是显示为空。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:27:42.350

**尝试这个：**

```
$('.my-table tr').each(function() {

     var contact = $.trim($(this).find('td').eq(1)[0].childNodes[0].nodeValue);
     if(contact != '')
     {
         var value = contact.substring(0,10);
         alert(value);
         $(this).find('td').eq(1).contents()[0].data = contact.substring(0,10);
     }
}); 
```

你得到的警报值是多少？还是您收到任何警报？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T13:56:34.487

不要使用`.eq(1)[0]`，而只是[`.get(0)`](http://api.jquery.com/get/)为了获取普通的 DOM 节点。另外，不要使用两种不同的方式来获取相同的文本节点，而只能使用一种方式并将其存储在变量中。让我们检查一下发生了什么：

```
$('.my-table tr').each(function() {

     var cell = $('td', this);
     if (!cell.length)
         return alert("Could not find a table cell");

     var el = cell.get(0);
     if (!el) alert("Could not get first element"); // Won't happen if length was >0

     if (!el.childNodes.length)
         return alert("Cell is empty!");

     var text = el.childNodes[0];
     if (cell.contents()[0] != text) alert("different firstChilds???"); // Won't happen
     if (text.nodeType != 3)
         return alert("the first child node is not a text node!");

     var contact = text.nodeValue;
     if (text.data != contact) alert("different contents???"); // Won't happen
     if (typeof contact != "string") alert("content is no string"); // Won't happen

     var newcontact = contact.substring(0,10);
     alert('"'+contact+'" was changed to "'+newcontact+'"');
     text.data = newcontact;
}); 
```

（[在 jsfiddle.net 上的演示](http://jsfiddle.net/z28Ts/1/)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T13:24:34.490

首先，联系是否包含您需要的东西？我的意思是你有 console.log 的`contact`价值吗？

如果联系正常，请尝试以下操作：

```
var contact = new String($(this).find('td').eq(1)[0].childNodes[0].nodeValue); 
```

# solr - SolrCloud 插入/更新文档

> ID：13763958
> 
> 赞同：2
> 
> 时间：2012-12-07T13:22:02.300
> 
> 标签：solr, lucene, solrcloud

目前我正在使用 solrcloud 开发一个搜索应用程序。我已经测试了我正在寻找的 solrcloud 的许多功能。我想知道，如果我使用 solrj 客户端（任何风味 Http、嵌入式、云 ...）或直接使用 lucene API 将插入/更新/删除到云中为 solrcloud 中任何服务器的索引目录，solrcloud 会将此更改分发到云中的所有节点吗？

solrcloud 是否能够检测到对其索引所做的这些更改？（因为我没有使用 REST API）

谁能解释一下，会很有帮助

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:44:47.583

当更新到达集群中的一个节点时（不管它来自 REST API 还是 Solrj），它会自动复制到其他节点。

[您可以在本文档](http://searchhub.org/2012/05/21/solr-4-preview/)中找到有关 SolrCloud 的好信息。

# java - TCP 从站响应

> ID：13763960
> 
> 赞同：2
> 
> 时间：2012-12-07T13:22:05.353
> 
> 标签：java, tcp, response, modbus, slave

使用 jamod 页面中的示例，我正在尝试创建一个 TCP 从站，它将接受 WriteMultipleRegisters (fc16) 请求并发送适当的响应。代码：

```
//1\. Prepare a process image

for (int i = 0; i < 200; i++)
    spi.addRegister(new SimpleRegister(0));

ModbusCoupler.getReference().setProcessImage(spi);
ModbusCoupler.getReference().setMaster(false);
ModbusCoupler.getReference().setUnitID(254);

//3\. create a listener with 3 threads in pool
if (Modbus.debug) System.out.println("Listening...");

listener = new ModbusTCPListener(1, addr);
listener.setPort(port);   
listener.start(); 
```

使用此代码，我可以获得请求（写入这 200 个寄存器），但我想知道为什么它没有发送任何响应？

# c# - 完全自定义上下文菜单

> ID：13763961
> 
> 赞同：3
> 
> 时间：2012-12-07T13:22:07.603
> 
> 标签：c#, wpf, contextmenu

我正在尝试为具有径向样式（每个项目的“饼片”）的触摸应用程序创建一个完全自定义的上下文菜单。我已经能够从 ItemsControl 的基础创建一个。但是，当我尝试将其切换到 ContextMenu 的基础时，我无法摆脱项目列表中每个饼图切片的默认弹出窗口。

有没有办法覆盖默认的 ContextMenu 样式来摆脱这个项目列表功能？

编辑：这是我的问题的屏幕截图。两个示例之间的代码几乎完全相同，除了继承自哪个类以及它如何显示（作为子项添加到 Canvas 与显示弹出窗口）

![顶部：继承自 ItemsControl 的自定义上下文菜单。 底部：从 ContextMenu 继承的相同上下文菜单](../Images/b176776b234d3379b241d6f0fd0b04bc.png)

编辑2：我尝试覆盖默认样式，如下所示：

```
<ContextMenu.Style>
  <Style TargetType="ContextMenu">
    <Setter Property="OverridesDefaultStyle" Value="true" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="ContextMenu">
          <Canvas IsItemsHost="true" Height="100" Width="100" />
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
</ContextMenu.Style> 
```

![覆盖默认样式时的上下文菜单。](../Images/d02462a99d54a49768674cef5859efd8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T14:30:14.657

如果您只想更改 WPF 控件的外观，只需更改其控件模板即可。

这是 ContextMenu 的默认设置：http: [//msdn.microsoft.com/en-us/library/ms744758.aspx](http://msdn.microsoft.com/en-us/library/ms744758.aspx)

并且不要忘记更新 MenuItem 控件模板：http: [//msdn.microsoft.com/en-us/library/ms747082 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms747082(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T14:23:51.137

我个人不知道有什么方法可以覆盖或更改默认的上下文菜单布局。如果似乎没有适当的方法，我认为您应该使用 Adorner 类从头开始创建它，否则通过创建一个新的透明 tomost 窗口。让我们了解您将选择的解决方案。

问候

# php - 如何登录到远程站点，并在 php 中下载报告

> ID：13763969
> 
> 赞同：0
> 
> 时间：2012-12-07T13:22:37.080
> 
> 标签：php, curl

我正在尝试登录到远程站点，然后在登录成功后重定向到新页面。在该页面上，我想从几个下拉列表（包括一个日期范围）中进行选择，然后生成一份报告。

现在，我有一个可以登录网站的脚本——但我不知道如何遍历下拉列表。有什么建议么？

```
$url = 'example.co.za/login'; 
$vars = array('username'=>'', 'password'=>''); 

$login = getUrl($url, 'post', $vars); 
$remotePage = getUrl($remotePageUrl); 

function getUrl($login) 
{
    $ch = curl_init();
    if ($method == 'post') 
    {
        curl_setopt($ch, CURLOPT_POST, 1);
        curl_setopt($ch, CURLOPT_POSTFIELDS, $vars);
    }
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($ch, CURLOPT_COOKIEJAR, 'cookies/cookies.txt');
    curl_setopt($ch, CURLOPT_COOKIEFILE, 'cookies/cookies.txt');
    $buffer = curl_exec($ch);
    print_r($buffer3);
    curl_close($ch);
    return $buffer;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:18:43.597

以编程方式提交表单时，您无需从下拉列表中“选择”。您可以像对待任何其他输入字段一样对待它，并为表单元素传递一个值。但是您应该传递下拉列表中的值之一，因为这是服务器期望接收的值。

对于这样的下拉列表：

```
<select name="weekday">
    <option value="Sunday">Sunday</option>
    <option value="Monday">Monday</option>
    <option value="Tuesday">Tuesday</option>
    <option value="Wednesday">Wednesday</option>
    <option value="Thursday">Thursday</option>
    <option value="Friday">Friday</option>
    <option value="Saturday">Saturday</option>
</select> 
```

您可以像使用登录表单一样进行 POST：

```
$vars = array("weekday" => "Friday");
curl_setopt($ch, CURLOPT_POSTFIELDS, $vars); 
```

# asp.net - 带有链接的 asp.net InnerHtml 文本

> ID：13763970
> 
> 赞同：0
> 
> 时间：2012-12-07T13:22:39.493
> 
> 标签：asp.net, twitter

我以这种方式将 Html 动态添加到服务器端 DIV：

```
innerHtml = innerHtml + string.Format(@"<div><span>{0}</span><br/>{1}</div><br/>", dr["Date"], dr["State"]); 
```

没关系，问题是 Title 列有普通文本和链接（它是 twitter 状态字段），但链接没有呈现为超链接，而是呈现为普通文本，用户无法单击链接。

我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:31:43.150

你的标题栏在哪里？请添加相同的代码。

如果您的链接是 dr["state"] 您的代码将如下所示。

```
innerHtml = innerHtml + string.Format(@"<div><span>{0}</span><br/><a href='{1}'>Link Name</a></div><br/>", dr["Date"], dr["State"]); 
```

简而言之，`<a href='Your link'>Link Name</a>`在您的字符串中添加锚标记 ( )。

# windows - PE 文件操作码

> ID：13763971
> 
> 赞同：9
> 
> 时间：2012-12-07T13:22:39.690
> 
> 标签：windows, parsing, assembly, x86, portable-executable

我只是在编写 PE 文件解析器的过程中，我已经到了想要解析和解释 PE 文件中的实际代码的地步，我假设这些代码存储为 x86 操作码。

例如，DLL 中的每个导出都指向函数将存储在内存中的 RVA（相对虚拟偏移），我编写了一个函数来将这些 RVA 转换为物理文件偏移。

问题是，这些真的是操作码，还是别的什么？

函数在文件中的存储方式是否取决于编译器/链接器，或者它们是一字节还是两字节 X86 操作码。

例如，Windows 7 DLL 'BWContextHandler.dll' 包含四个加载到内存中的函数，使它们在系统中可用。第一个导出的函数是“DllCanUnloadNow”，它位于文件内的偏移量 0x245D。该数据的前四个字节为：**0xA1 0x5C 0xF1 0xF2**

那么这些是一字节还是两字节的操作码，还是完全不同？

如果有人可以提供有关如何检查这些的任何信息，将不胜感激。

谢谢！

经过进一步阅读，并通过 IDA 的演示版运行文件，我认为我说第一个字节 0xA1 是一个字节操作码是正确的，意思是 mov eax。我是从这里得到的：[http](http://ref.x86asm.net/geek32.html#xA1) ://ref.x86asm.net/geek32.html#xA1我假设它暂时是正确的。

但是，对于后面的字节如何构成指令的其余部分，我有点困惑。从我所知道的 x86 汇编器中，移动指令需要两个参数，即目标和源，因此该指令是将（某物）移动到 eax 寄存器中，并且我假设某物出现在以下字节中。但是我还不知道如何阅读该信息:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T16:47:10.253

x86 编码是复杂的多字节编码，您不能像在 RISC (MIPS/SPARC/DLX) 中那样简单地在指令表中找到一行来对其进行解码。一条指令甚至可以有 16 字节编码：1-3 字节操作码 + 几个前缀（包括[多字节 VEX](http://en.wikipedia.org/wiki/VEX_prefix)） + 几个字段来编码立即或内存地址、偏移量、缩放（imm、ModR/M 和 SIB；moffs）。有时单个助记符有几十个操作码。而且，在某些情况下，同一 asm 行有两种可能的编码（“inc eax”= 0x40 和 = 0xff 0xc0）。

> 一字节操作码，意思是 mov eax。我是从这里得到的：[http](http://ref.x86asm.net/geek32.html#xA1) ://ref.x86asm.net/geek32.html#xA1我假设它暂时是正确的。

让我们看一下桌子：

> 宝; 佛罗里达州; 助记符；操作1；操作2; grp1 ; grp2 ; 描述
> 
> A1 ; W; 移动；eAX ; OV; 创; 数据移动；移动 ;

（提示：不要使用 geek32 表，切换到[http://ref.x86asm.net/coder32.html#xA1](http://ref.x86asm.net/coder32.html#xA1) - 具有更多解码的更少字段，例如“A1 MOV eAX moffs16/32 Move”）

有用于操作数的列 op1 和 op2，[http](http://ref.x86asm.net/#column_op) ://ref.x86asm.net/#column_op。A1 操作码的第一个总是`eAX`，第二个 (op2) 是 Ov。根据表[http://ref.x86asm.net/#Instruction-Operand-Codes](http://ref.x86asm.net/#Instruction-Operand-Codes)：

> O / moffs 原始指令没有ModR/M字节；操作数的偏移量在指令中编码为字、双字或四字（取决于地址大小属性）。不能应用基址寄存器、变址寄存器或比例因子（仅限 MOV (A0, A1, A2, A3)）。

因此，在 A1 操作码之后，内存偏移量被编码。我认为，x86（32 位模式）有 32 位偏移。

PS：如果您的任务是解析 PE 而不是发明反汇编程序，请使用一些 x86 反汇编库，例如 libdisasm 或 libudis86 或其他任何东西。

PPS：对于原始问题：

> 问题是，这些真的是操作码，还是别的什么？

是的，“A1 5C F1 F2 05 B9 5C F1 F2 05 FF 50 0C F7 D8 1B C0 F7 D8 C3 CC CC CC CC CC”是x86机器码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-08T20:04:34.637

反汇编很困难，特别是对于由 Visual Studio 编译器生成的代码，特别是对于 x86 程序。有几个问题：

1.  指令是可变长度的，并且可以从任何偏移量开始。一些架构需要指令对齐。不是 x86。如果您从地址 0 开始读取，那么如果您从偏移量 1 开始读取，您将得到不同的结果。您必须知道有效的“起始位置”（函数入口点）是什么。

2.  并非可执行文件的文本部分中的所有地址都是代码。有些是数据。Visual Studio 会将“跳转表”（用于实现 switch 语句的数组）放在读取它们的过程下方的文本部分中。将数据误解为代码会导致您产生不正确的反汇编。

3.  您不可能拥有适用于所有可能程序的完美反汇编。程序可以自行修改。在这些情况下，您必须运行程序才能知道它的作用，而这最终会导致“停止问题”。您可以期望的最好的结果是反汇编适用于“大多数”程序。

通常用于尝试解决这些问题的算法称为“递归下降”反汇编。它的工作方式类似于递归下降解析器，因为它从已知的“入口点”（exe 的“main”方法或 dll 的所有导出）开始，然后开始反汇编。在拆卸过程中会发现其他入口点。例如，给定“调用”指令，目标将被假定为入口点。反汇编器将迭代地反汇编发现的入口点，直到找不到更多的入口点。

然而，这种技术存在一些问题。它不会找到仅通过间接执行的代码。在 Windows 上，一个很好的例子是 SEH 异常的处理程序。分派给它们的代码实际上在操作系统内部，因此递归下降反汇编不会找到它们，也不会反汇编它们。但是，它们通常可以通过使用模式识别（启发式匹配）增强递归下降来检测。

机器学习可用于自动识别模式，但许多反汇编程序（如 IDA pro）使用手写模式并取得了很大成功。

无论如何，如果你想反汇编 x86 代码，你需要阅读[英特尔手册](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)。有很多场景需要支持。指令中的相同位模式可以根据修饰符、前缀、处理器的隐式状态等以各种不同的方式进行解释。手册中涵盖了所有这些内容。首先阅读第一卷的前几节。这将介绍基本的执行环境。您需要的其余大部分内容都在第二卷中。

# jasper-reports - 子报表返回除最后一页以外的空值

> ID：13763978
> 
> 赞同：2
> 
> 时间：2012-12-07T13:23:13.487
> 
> 标签：jasper-reports, ireport

我在使用子报表时遇到 iReport 问题，我使用的是 XML 源。

## XML 源

```
<bordereaux>
    <bordereau>
        <pages>
            <page>
                <numpage>1</numpage>
                <dosimetres>
                    <dosimetre>
                        <information>information</information>
                    </dosimetre>
                    <dosimetre>
                        ...
                    </dosimetre>
                    <dosimetre>
                        ...
                    </dosimetre>
                </dosimetres>
            </page>
            <page>
                ...
            </page>
            <page>
                ...
            </page>
            <page>
                ...
            </page>
        </pages>
    </bordereau>
    <bordereau>
        ...
    </bordereau>
    <bordereau>
        ...
    </bordereau>
<bordereaux> 
```

## 问题描述

我的主要报告是在 <bordereau> 节点上进行迭代。
子报表（在主报表中）在 <page> 节点上进行迭代，在“详细信息部分”的底部有一个分页符。
（如果在每个 < dosimetre > 节点上进行迭代，则子报告中的子报告，但这对我的问题并不重要）

我需要做的是，在我的主报告的“页脚”部分，显示 <numpage> 节点的值。

### 我做了什么

我在每个报告中添加了 1 个名为“numPage”的变量，它们都是 java.lang.String

*   我的子报告中的一个是“变量表达式”$F{numpage}。

*   我的主报告中的一个通过“返回值”属性中的子报告链接到第一个

### 我得到了什么

我的主报表在我的 <bordereau> 节点
上很好地迭代 我的子报表在我的 <page> 节点上很好地迭代
如果我在子报表中打印 $F{numpage} 字段，我可以看到它。
如果我在子报表中打印变量 $V{numPage}，我可以看到它。

但是，如果我在我的主报告中打印变量 $V{numPage}，我只能看到它的最后一次“<page> 节点迭代”的值，否则我会得到一个漂亮而流畅的“null”

我不知道该怎么办......我试图玩变量的“重置类型”，玩文本字段的“评估时间”。但是每次尝试都没有效果...

### 再见

我希望我能很好地解释我的问题，我不是以英语为母语的人，所以我为糟糕的英语道歉......我的英语很糟糕......我应该感到难过！

非常感谢您的帮助。

尼古拉斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-30T14:01:11.170

我知道这被问了一段时间，但我有一个类似的问题。我正在尝试获取各种子报告的返回值，以便可以更新页脚中的“参考”。

我相信这是因为子报告中的“返回值”仅在整个子报告完成时才返回，因此在此之前变量不可用。

~~我还没有找到解决这个问题的方法，并且已经尝试了重置类型、计算类型和评估时间。~~

**编辑**我发现这个问题的唯一解决方案是创建一个自定义脚本。您可以将 scriptlet 传递给子报告。该类的相同实例被传递给子报表，因此您可以在整个模板构建过程中随时设置和检索值。

为了在子报告中调用脚本中的方法，我在子报告中定义了一个变量，并且在表达式中我做了类似`$P{SCRIPTLET}.setString("foo")`. setString 方法必须返回一个 String 以便可以设置变量，然后您可以随时在主报告中调用另一个方法`$P{REPORT_SCRIPTLET}.getString()`来获取该值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T06:58:19.647

您是否正在尝试获得页码？如果是，您可以简单地从 iReport 面板中将页码字段拖放到主报表的页脚中。

# python - 使用 re.split

> ID：13763981
> 
> 赞同：0
> 
> 时间：2012-12-07T13:23:31.210
> 
> 标签：python, split

```
s=N.asarray(data)
pattern='[r  t \  n  \n ]'
r=re.split(pattern,str(s)) 
```

列出的所有变量都消失了，但我无法摆脱 \ 试图从大数据中获取整数

> > > 打印数据 ['儒略日\tLatitude\tLongitude\tTs\r\n', 'from 1/1/97\t(deg)\t(deg)\t(deg C)\r\n', '\r \n', '304.0833\t75.714\t-144.272\t-26.091\r\n', '304.1250\t75.713\t-144.262\t-22.571\r\n', '304.1667\t75.712 \t-144.250\t-20.329\r\n', '304.2083\t75.710\t-144.238\t-18.681\r\n', '304.2500\t75.710\t-144.227\t-18.174\r \n', '304.2917\t75.709\t-144.217\t-17.268\r\n', '304.3333\t75.709\t-144.206\t-17.244\r\n', '304.3750\t75.710 \t-144.194\t-17.670\r\n', '304.4167\t75.711\t-144.182\t-16.932\r\n', '304.4583\t75.712\t-144.170\t-16.436\r \n', '304.5000\t75.714\t-144.158\t-15.527\r\n', '304.5417\t75.717\t-144.144\t-15.118\r\n', '304.5833\t75.720 \t-144.130\t-15.066\r\n', '304.6250\t75.723\t-144.115\t-16.695\r\n', '304.6667\t75.725\t-144.100\t-17.118\r\n', '304.7083\t75.727\t-144.085\t-16.800\r\n', '304.7500\t75.728\t-144.071\ t-17.718\r\n'、'304.7917\t75.729\t-144.058\t-17.297\r\n'、'304.8333\t75.730\t-144.046\t\r\n'、'304.8750\ t75.730\t-144.039\t-24.482\r\n', '304.9167\t75.731\t-144.032\t-25.179\r\n', '304.9583\t75.731\t-144.024\t- 25.405\r\n', '305.0000\t75.732\t-144.016\t-24.449\r\n', '305.0417\t75.733\t-144.008\t-25.651\r\n', '305.0833\ t75.734\t-144.001\t-25.541\r\n', '305.1250\t75.734\t-143.991\t-22.360\r\n', '305.1667\t75.735\t-143.982\t- 20.684\r\n', '305.2083\t75.736\t-143.972\t-19.552\r\n', '305.2500\t75.738\t-143.963\t-19.220\r\n', '305.2917\ t75.740\t-143.955\t-18.997\r\n'，'305.3333\t75.742\t-143.949\t-18.765\r\n'，'305。3750\t75.744\t-143.944\t-18.249\r\n', '305.4167\t75.746\t-143.940\t-20.398\r\n', '305.4583\t75.748\t-143.937\ t-23.078\r\n', '305.5000\t75.751\t-143.934\t-24.182\r\n', '305.5417\t75.753\t-143.931\t-24.163\r\n', ' 305.5833\t75.756\t-143.928\t-23.551\r\n', '305.6250\t75.759\t-143.926\t-23.297\r\n', '305.6667\t75.763\t-143.923\ t-23.272\r\n', '305.7083\t75.766\t-143.921\t-21.429\r\n', '305.7500\t75.769\t-143.920\t-18.547\r\n', ' 305.7917\t75.772\t-143.921\t-16.185\r\n', '305.8333\t75.775\t-143.922\t-17.254\r\n', '305.8750\t75.779\t-143.923\ t-19.860\r\n', '305.9167\t75.783\t-143.926\t-20.187\r\n', '305.9583\t75.787\t-143.929\t-17.076\r\n', ' 306.0000\t75.790\t-143.933\t-15.079\r\n', '306.0417\t75.795\t-143.938\t-16.499\r\n','306.0833\t75.799\t-143.942\t-14.849\r\n', '306.1250\t75.804\t-143.946\t-14.412\r\n', '306.1667\t75.808\t-143.950 \t-15.021\r\n', '306.2083\t75.813\t-143.955\t-15.360\r\n', '306.2500\t75.817\t-143.959\t-15.970\r\n', '306.2917\t75.822\t-143.963\t-16.451\r\n', '306.3333\t75.826\t-143.967\t-16.585\r\n', '306.3750\t75.830\t-143.971 \t-17.072\r\n', '306.4167\t75.834\t-143.975\t-17.066\r\n', '306.4583\t75.838\t-143.978\t-18.862\r\n', '306.5000\t75.842\t-143.981\t-21.559\r\n', '306.5417\t75.846\t-143.983\t-23.081\r\n', '306.5833\t75.849\t-143.985 \t-22.948\r\n', '306.6250\t75.853\t-143.986\t-22.752\r\n', '306.6667\t75.857\t-143.987\t-20.773\r\n', '306.7083\t75.860\t-143.988\t-19.480\r\n'，'306.7500\t75.863\t-143.989\t-20。499\r\n', '306.7917\t75.866\t-143.990\t-21.428\r\n', '306.8333\t75.868\t-143.991\t-22.931\r\n', '306.8750\ t75.870\t-143.991\t-23.303\r\n', '306.9167\t75.873\t-143.993\t-21.795\r\n', '306.9583\t75.876\t-143.996\t- 19.980\r\n', '307.0000\t75.879\t-143.998\t-19.365\r\n', '307.0417\t75.882\t-144.002\t-21.537\r\n', '307.0833\ t75.886\t-144.004\t-23.963\r\n', '307.1250\t75.889\t-144.005\t-23.904\r\n', '307.1667\t75.892\t-144.006\t- 24.763\r\n', '307.2083\t75.895\t-144.006\t-24.136\r\n', '307.2500\t75.898\t-144.006\t-21.458\r\n', '307.2917\ t75.901\t-144.008\t-21.518\r\n', '307.3333\t75.904\t-144.009\t-23.013\r\n', '307.3750\t75.907\t-144.010\t- 24.552\r\n'、'307.4167\t75.909\t-144.010\t-24.915\r\n'、'307.4583\t75.912\t-144。011\t-24.834\r\n'、'307.5000\t75.915\t-144.012\t-24.089\r\n'、'307.5417\t75.917\t-144.013\t-25.630\r\n' , '307.5833\t75.920\t-144.013\t-26.018\r\n', '307.6250\t75.922\t-144.015\t-25.628\r\n', '307.6667\t75.924\t- 144.015\t-25.868\r\n'、'307.7083\t75.926\t-144.016\t-26.693\r\n'、'307.7500\t75.929\t-144.016\t-26.784\r\n' , '307.7917\t75.931\t-144.016\t-26.876\r\n', '307.8333\t75.933\t-144.016\t-26.791\r\n', '307.8750\t\t\t- 26.733\r\n', '307.9167\t75.937\t-144.014\t-27.240\r\n', '307.9583\t75.939\t-144.013\t-26.464\r\n', '308.0000\ t75.941\t-144.013\t-25.476\r\n', '308.0417\t75.942\t-144.013\t-25.685\r\n', '308.0833\t75.944\t-144.013\t- 25.830\r\n'、'308.1250\t75.945\t-144.012\t-25.819\r\n'、'308.1667\t75.946\t-144。012\t-26.050\r\n'、'308.2083\t75.947\t-144.012\t-26.425\r\n'、'308.2500\t75.948\t-144.012\t-26.778\r\n' , '308.2917\t75.949\t-144.013\t-24.661\r\n', '308.3333\t75.950\t-144.015\t-21.419\r\n', '308.3750\t75.951\t- 144.017\t-19.948\r\n'、'308.4167\t75.952\t-144.019\t-19.251\r\n'、'308.4583\t75.953\t-144.021\t-18.471\r\n' , '308.5000\t75.954\t-144.023\t-17.745\r\n', '308.5417\t75.955\t-144.026\t-17.427\r\n', '308.5833\t75.956\t- 144.029\t-16.945\r\n'、'308.6250\t75.957\t-144.034\t-17.076\r\n'、'308.6667\t75.958\t-144.040\t-17.284\r\n' , '308.7083\t75.960\t-144.048\t-17.766\r\n', '308.7500\t75.961\t-144.057\t-20.430\r\n', '308.7917\t75.963\t- 144.067\t-22.862\r\n'，'308.8333\t75.964\t-144.078\t-25.668\r\n'，'308.8750\t75。965\t-144.090\t-22.393\r\n', '308.9167\t75.967\t-144.103\t-22.212\r\n', '308.9583\t75.968\t-144.115\t-20.578\ r\n'、'309.0000\t75.969\t-144.128\t-20.242\r\n'、'309.0417\t75.970\t-144.141\t-20.646\r\n'、'309.0833\t75。 970\t-144.155\t-21.979\r\n'、'309.1250\t\t\t-26.305\r\n'、'309.1667\t75.971\t-144.180\t-27.193\r\n' , '309.2083\t75.971\t-144.192\t-28.006\r\n', '309.2500\t75.971\t-144.205\t-28.152\r\n', '309.2917\t75.970\t- 144.218\t-25.851\r\n'、'309.3333\t75.970\t-144.230\t-27.048\r\n'、'309.3750\t75.970\t-144.243\t-26.699\r\n' , '309.4167\t75.969\t-144.256\t-25.079\r\n', '309.4583\t75.968\t-144.270\t-25.545\r\n', '309.5000\t75.967\t- 144.285\t-24.880\r\n'、'309.5417\t75.966\t-144.302\t-23.422\r\n'、'309.5833\t75。965\t-144.321\t-19.381\r\n', '309.6250\t75.963\t-144.342\t-18.041\r\n', '309.6667\t75.962\t-144.366\t-16.790\ r\n'、'309.7083\t75.961\t-144.395\t-16.714\r\n'、'309.7500\t75.960\t-144.427\t-16.582\r\n'、'309.7917\t75。 959\t-144.459\t-16.038\r\n', '309.8333\t75.959\t-144.492\t-16.059\r\n', '309.8750\t75.959\t-144.524\t-16.144\ r\n'、'309.9167\t75.960\t-144.556\t-15.961\r\n'、'309.9583\t75.961\t-144.586\t-16.116\r\n'、'310.0000\t75。 962\t-144.615\t-16.195\r\n', '310.0417\t75.964\t-144.643\t-16.067\r\n', '310.0833\t75.966\t-144.671\t-16.015\ r\n'、'310.1250\t75.968\t-144.697\t-16.041\r\n'、'310.1667\t75.970\t-144.722\t-15.835\r\n'、'310.2083\t75。 972\t-144.747\t-15.601\r\n', '310.2500\t75.975\t-144.771\t-16.065\r\n', '310.2917\t75.977\t-144.794\t-16.398\r\n', '310.3333\t75.979\t-144.817\t-16.529\r\n', '310.3750\t75.982\t-144.837\ t-16.556\r\n', '310.4167\t75.984\t-144.857\t-16.534\r\n', '310.4583\t75.986\t-144.874\t-16.175\r\n', ' 310.5000\t75.988\t-144.889\t-16.332\r\n', '310.5417\t75.990\t-144.904\t-16.512\r\n', '310.5833\t75.992\t-144.918\ t-16.324\r\n', '310.6250\t75.994\t-144.932\t-16.312\r\n', '310.6667\t75.995\t-144.944\t-16.310\r\n', ' 310.7083\t75.998\t-144.956\t-16.154\r\n', '310.7500\t76.000\t-144.968\t-15.842\r\n', '310.7917\t76.002\t-144.978\ t-15.479\r\n', '310.8333\t76.005\t-144.987\t-14.964\r\n', '310.8750\t76.007\t-144.994\t-16.227\r\n', ' 310.9167\t76.009\t-145.001\t-14.704\r\n', '310.9583\t76.011\t-145.010\t-14.271\r\n','311.0000\t76.012\t-145.018\t-13.963\r\n', '311.0417\t\t\t-14.694\r\n', '311.0833\t76.015\t-145.038\t-15.005 \r\n', '311.1250\t76.016\t-145.049\t-15.037\r\n', '311.1667\t76.017\t-145.060\t-15.001\r\n', '311.2083\t76 .019\t-145.072\t-14.941\r\n', '311.2500\t76.020\t-145.084\t-15.723\r\n', '311.2917\t76.022\t-145.097\t-16.460 \r\n', '311.3333\t76.023\t-145.108\t-16.040\r\n', '311.3750\t76.025\t-145.119\t-16.347\r\n', '311.4167\t76 .026\t-145.130\t-17.740\r\n', '311.4583\t76.027\t-145.140\t-18.170\r\n', '311.5000\t76.028\t-145.149\t-18.322 \r\n', '311.5417\t76.029\t-145.158\t-18.214\r\n', '311.5833\t76.030\t-145.167\t-17.956\r\n', '311.6250\t76 .030\t-145.175\t-17.628\r\n', '311.6667\t76.031\t-145.183\t-17.229\r\n', '311.7083\t76.031\t-145.192\t-17.307\r\n'，'311.7500\t76.032\t-145.200\t-17.727\r\n'，'311.7917\t76.033\t-145.208\ t-18.872\r\n', '311.8333\t76.034\t-145.216\t-20.060\r\n', '311.8750\t76.034\t-145.222\t-20.883\r\n', ' 311.9167\t76.035\t-145.228\t-21.230\r\n'，'311.9583\t76.036\t-145.232\t-21.332\r\n'，'312.0000\t76.037\t-145.236\ t-23.762\r\n', '312.0417\t76.038\t-145.239\t-24.388\r\n', '312.0833\t76.039\t-145.242\t-25.365\r\n', ' 312.1250\t76.040\t-145.246\t-24.093\r\n'、'312.1667\t76.041\t-145.249\t-23.095\r\n'、'312.2083\t76.042\t-145.252\ t-22.659\r\n', '312.2500\t76.043\t-145.255\t-22.177\r\n', '312.2917\t76.045\t-145.259\t-17.242\r\n', ' 312.3333\t76.046\t-145.262\t-15.134\r\n'，'312.3750\t76.048\t-145.265\t-13.879\r\n', '312.4167\t76.050\t-145.269\t-13.145\r\n', '312.4583\t76.053\t-145.272\t-12.715\r\n', '312.5000\t76.055\t- 145.274\t-12.416\r\n'、'312.5417\t76.058\t-145.277\t-12.190\r\n'、'312.5833\t76.061\t-145.279\t-12.058\r\n' , '312.6250\t76.064\t-145.282\t-11.641\r\n', '312.6667\t76.067\t-145.285\t-11.511\r\n', '312.7083\t76.070\t- 145.289\t-11.706\r\n'、'312.7500\t76.073\t-145.293\t-12.676\r\n'、'312.7917\t76.076\t-145.296\t-12.149\r\n' , '312.8333\t76.079\t-145.300\t-12.668\r\n', '312.8750\t76.083\t-145.302\t-12.647\r\n', '312.9167\t76.086\t- 145.303\t-14.065\r\n'、'312.9583\t76.088\t-145.301\t-16.202\r\n'、'313.0000\t76.091\t-145.300\t-12.760\r\n' , '313.0417\t76.093\t-145.298\t-12.589\r\n', '313.0833\t76.094\t-145.295\t-13.993\r\n', '313.1250\t76.095\t-145.293\t-16.798\r\n', '313.1667\t\t\t-16.497\r\n', '313.2083\t76.096\ t-145.288\t-15.034\r\n', '313.2500\t76.096\t-145.287\t-18.059\r\n', '313.2917\t76.097\t-145.287\t-20.666\r\ n', '313.3333\t76.097\t-145.287\t-20.770\r\n', '313.3750\t76.097\t-145.288\t-20.964\r\n', '313.4167\t76.097\ t-145.289\t-20.600\r\n', '313.4583\t76.097\t-145.291\t-20.396\r\n', '313.5000\t76.097\t-145.294\t-19.557\r\ n', '313.5417\t76.097\t-145.297\t-18.770\r\n', '313.5833\t76.096\t-145.304\t-18.020\r\n', '313.6250\t76.096\ t-145.312\t-19.198\r\n', '313.6667\t76.095\t-145.325\t-18.775\r\n', '313.7083\t76.095\t-145.342\t-18.278\r\ n'，'313.7500\t76.095\t-145.362\t-17.961\r\n'，'313.7917\t76.095\t-145.385\t-17。576\r\n', '313.8333\t76.096\t-145.409\t-16.719\r\n', '313.8750\t76.097\t-145.435\t-15.646\r\n', '313.9167\ t76.098\t-145.461\t-15.491\r\n', '313.9583\t76.099\t-145.486\t-14.799\r\n', '314.0000\t76.100\t-145.513\t- 14.522\r\n', '314.0417\t76.100\t-145.540\t-14.576\r\n', '314.0833\t76.101\t-145.568\t-14.140\r\n', '314.1250\ t76.101\t-145.596\t-13.958\r\n', '314.1667\t76.101\t-145.625\t-13.634\r\n', '314.2083\t76.102\t-145.657\t- 13.379\r\n'、'314.2500\t76.102\t-145.688\t-13.013\r\n'、'314.2917\t76.103\t-145.720\t-13.016\r\n'、'314.3333\ t76.105\t-145.750\t-13.360\r\n', '314.3750\t76.107\t-145.777\t-13.141\r\n', '314.4167\t76.109\t-145.803\t- 13.552\r\n'、'314.4583\t76.111\t-145.826\t-14.213\r\n'、'314.5000\t76.112\t-145。848\t-13.566\r\n'、'314.5417\t76.114\t-145.871\t-12.832\r\n'、'314.5833\t76.115\t-145.895\t-12.601\r\n' , '314.6250\t76.117\t-145.918\t-12.284\r\n', '314.6667\t76.118\t-145.942\t-12.289\r\n', '314.7083\t76.120\t- 145.968\t-12.763\r\n'、'314.7500\t76.123\t-145.993\t-12.713\r\n'、'314.7917\t76.125\t-146.017\t-12.337\r\n' , '314.8333\t76.128\t-146.038\t-12.178\r\n', '314.8750\t76.130\t-146.057\t-12.400\r\n', '314.9167\t76.132\t- 146.077\t-13.077\r\n'、'314.9583\t76.133\t-146.096\t-13.508\r\n'、'315.0000\t76.135\t-146.113\t-13.433\r\n' , '315.0417\t76.136\t-146.129\t-14.241\r\n', '315.0833\t76.137\t-146.145\t-15.048\r\n', '315.1250\t76.138\t- 146.160\t-15.399\r\n'、'315.1667\t76.139\t-146.176\t-16.294\r\n'、'315.2083\t76。140\t-146.192\t-16.038\r\n', '315.2500\t76.142\t-146.207\t-15.417\r\n', '315.2917\t76.143\t-146.223\t-15.777\ r\n'、'315.3333\t76.145\t-146.239\t-15.054\r\n'、'315.3750\t76.147\t-146.255\t-14.384\r\n'、'315.4167\t76。 149\t-146.271\t-14.369\r\n', '315.4583\t76.150\t-146.287\t-14.428\r\n', '315.5000\t76.152\t-146.306\t-14.181\ r\n'、'315.5417\t76.153\t-146.325\t-13.551\r\n'、'315.5833\t76.155\t-146.347\t-12.591\r\n'、'315.6250\t76。 157\t-146.369\t-11.820\r\n', '315.6667\t76.160\t-146.392\t-11.102\r\n', '315.7083\t76.162\t-146.415\t-10.715\ r\n'、'315.7500\t76.164\t-146.438\t-10.715\r\n'、'315.7917\t76.167\t-146.460\t-11.163\r\n'、'315.8333\t76。 169\t-146.483\t-11.244\r\n', '315.8750\t76.172\t-146.505\t-11.378\r\n', '315.9167\t76.174\t-146.526\t-11.568\r\n', '315.9583\t76.176\t-146.543\t-11.717\r\n', '316.0000\t76.177\t-146.558\ t-11.429\r\n', '316.0417\t76.178\t-146.570\t-10.944\r\n', '316.0833\t76.179\t-146.578\t-10.574\r\n', ' 316.1250\t76.179\t-146.583\t-10.430\r\n', '316.1667\t76.179\t-146.586\t-9.826\r\n', '316.2083\t76.179\t-146.587\ t-9.844\r\n', '316.2500\t76.179\t-146.586\t-9.465\r\n', '316.2917\t76.178\t-146.584\t-9.442\r\n', ' 316.3333\t76.177\t-146.578\t-10.033\r\n', '316.3750\t76.176\t-146.570\t-10.515\r\n', '316.4167\t76.175\t-146.558\ t-10.806\r\n', '316.4583\t76.173\t-146.542\t-10.977\r\n', '316.5000\t76.171\t-146.523\t-11.391\r\n', ' 316.5417\t76.169\t-146.501\t-11.801\r\n', '316.5833\t76.167\t-146.478\t-11.616\r\n', '316.6250\t76.164\t-146.454\t-12.508\r\n'，'316.6667\t76.161\t-146.433\t-12.669\r\n'，'316.7083\t76.158\t-146.411\ t-12.608\r\n', '316.7500\t76.156\t-146.390\t-13.306\r\n', '316.7917\t76.154\t-146.368\t-13.639\r\n', ' 316.8333\t76.152\t-146.346\t-13.308\r\n', '316.8750\t76.150\t-146.324\t-13.744\r\n', '316.9167\t76.149\t-146.302\ t-13.972\r\n', '316.9583\t76.147\t-146.278\t-14.126\r\n', '317.0000\t76.145\t-146.252\t-14.630\r\n', ' 317.0417\t76.142\t-146.225\t-15.240\r\n', '317.0833\t76.139\t-146.199\t-14.737\r\n', '317.1250\t76.135\t-146.173\ t-14.216\r\n', '317.1667\t76.131\t-146.147\t-14.232\r\n', '317.2083\t76.126\t-146.122\t-13.862\r\n', ' 317.2500\t76.121\t-146.097\t-13.860\r\n'，'317.2917\t76.116\t-146.073\t-13.940\r\n', '317.3333\t76.111\t-146.050\t-13.834\r\n', '317.3750\t76.107\t-146.028\t-13.782\r\n', '317.4167\t76.103\t- 146.006\t-13.990\r\n'、'317.4583\t76.099\t-145.987\t-14.089\r\n'、'317.5000\t76.096\t-145.968\t-14.482\r\n' , '317.5417\t76.092\t-145.952\t-14.872\r\n', '317.5833\t76.088\t-145.935\t-15.259\r\n', '317.6250\t76.085\t- 145.920\t-15.860\r\n', '317.6667\t76.081\t-145.907\t-17.011\r\n', '317.7083\t76.077\t-145.896\t-17.663\r\n' , '317.7500\t76.074\t-145.887\t-19.506\r\n', '317.7917\t76.073\t-145.880\t-21.081\r\n', '317.8333\t76.071\t- 145.873\t-22.499\r\n'、'317.8750\t76.071\t-145.867\t-23.459\r\n'、'317.9167\t76.071\t-145.863\t-24.380\r\n' , '317.9583\t76.070\t-145.859\t-25.220\r\n', '318.0000\t76.069\t-145.857\t-25.539\r\n'、'318.0417\t76.069\t-145.856\t-26.332\r\n'、'318.0833\t76.067\t-145.856\t-26.643\r\n'、'318.1250\ t76.066\t-145.857\t-26.639\r\n', '318.1667\t76.065\t-145.859\t-27.088\r\n', '318.2083\t76.064\t-145.862\t- 27.037\r\n', '318.2500\t76.064\t-145.867\t-25.966\r\n', '318.2917\t76.064\t-145.874\t-19.935\r\n', '318.3333\ t76.064\t-145.882\t-15.989\r\n', '318.3750\t76.066\t-145.893\t-14.794\r\n', '318.4167\t76.068\t-145.904\t- 14.406\r\n'、'318.4583\t76.070\t-145.916\t-14.544\r\n'、'318.5000\t76.072\t-145.927\t-14.930\r\n'、'318.5417\ t76.074\t-145.939\t-14.018\r\n', '318.5833\t76.076\t-145.953\t-13.664\r\n', '318.6250\t76.078\t-145.966\t- 13.409\r\n'、'318.6667\t76.080\t-145.979\t-13.406\r\n'、'318.7083\t76.082\t-145。994\t-13.108\r\n'、'318.7500\t76.084\t-146.008\t-13.157\r\n'、'318.7917\t76.087\t-146.020\t-13.055\r\n' , '318.8333\t76.089\t-146.032\t-13.254\r\n', '318.8750\t76.092\t-146.042\t-13.733\r\n', '318.9167\t\t\t- 14.241\r\n'、'318.9583\t\t\t-15.031\r\n'、'319.0000\t76.097\t-146.076\t-15.752\r\n'、'319.0417\t76.098\ t-146.088\t-15.423\r\n', '319.0833\t76.100\t-146.100\t-15.779\r\n', '319.1250\t76.101\t-146.110\t-16.486\r\ n', '319.1667\t76.101\t-146.121\t-17.901\r\n', '319.2083\t76.102\t-146.132\t-19.089\r\n', '319.2500\t\t\ t-19.720\r\n', '319.2917\t76.103\t-146.154\t-20.738\r\n', '319.3333\t76.103\t-146.163\t-21.220\r\n', ' 319.3750\t76.103\t-146.173\t-20.429\r\n'，'319.4167\t76.103\t-146.184\t-19.800\r\n'，'319。4583\t76.104\t-146.195\t-20.011\r\n', '319.5000\t76.104\t-146.205\t-19.883\r\n', '319.5417\t76.105\t-146.215\ t-19.511\r\n', '319.5833\t76.106\t-146.224\t-19.866\r\n', '319.6250\t76.107\t-146.232\t-19.880\r\n', ' 319.6667\t76.107\t-146.240\t-20.510\r\n', '319.7083\t76.108\t-146.247\t-20.994\r\n', '319.7500\t\t\t-21.313\ r\n'、'319.7917\t\t\t\r\n'、'319.8333\t76.110\t-146.264\t\r\n'、'319.8750\t76.110\t-146.269\t- 27.227\r\n'、'319.9167\t76.110\t-146.274\t-26.889\r\n'、'319.9583\t76.111\t-146.280\t\r\n'、'320.0000\t76。 111\t-146.285\t\r\n', '320.0417\t76.111\t-146.291\t-27.986\r\n', '320.0833\t76.112\t-146.296\t-29.207\r\ n', '320.1250\t76.112\t-146.303\t-29.108\r\n', '320.1667\t76.112\t-146.310\t-29.780\r\n', '320.2083\t76.113\t-146.316\t-30.054\r\n', '320.2500\t76.113\t-146.322\t-31.522\r\n', '320.2917\t\t\t-31.852\ r\n'、'320.3333\t76.113\t-146.332\t-31.729\r\n'、'320.3750\t76.114\t-146.337\t-32.797\r\n'、'320.4167\t76。 114\t-146.342\t-32.796\r\n', '320.4583\t76.114\t-146.347\t-32.531\r\n', '320.5000\t76.114\t-146.351\t-32.424\ r\n'、'320.5417\t76.114\t-146.357\t-32.667\r\n'、'320.5833\t76.114\t-146.363\t-31.566\r\n'、'320.6250\t76。 114\t-146.368\t-32.081\r\n', '320.6667\t76.115\t-146.374\t-32.989\r\n', '320.7083\t76.115\t-146.380\t-33.437\ r\n'、'320.7500\t76.115\t-146.386\t-33.727\r\n'、'320.7917\t76.114\t-146.391\t-33.791\r\n'、'320.8333\t76。 114\t-146.396\t-33.918\r\n'，'320.8750\t76.114\t-146.401\t-33.730\r\n'，'320。9167\t76.114\t-146.405\t-33.347\r\n', '320.9583\t76.114\t-146.409\t-33.708\r\n', '321.0000\t76.114\t-146.413\ t-33.516\r\n', '321.0417\t76.113\t-146.418\t-33.203\r\n', '321.0833\t76.113\t-146.422\t-32.659\r\n', ' 321.1250\t76.113\t-146.427\t-32.262\r\n', '321.1667\t76.113\t-146.432\t-32.998\r\n', '321.2083\t76.112\t-146.437\ t-33.472\r\n', '321.2500\t76.112\t-146.441\t-33.899\r\n', '321.2917\t76.111\t-146.445\t-34.124\r\n', ' 321.3333\t76.111\t-146.450\t-33.744\r\n'，'321.3750\t76.111\t-146.453\t-33.866\r\n'，'321.4167\t76.110\t-146.457\ t-33.152\r\n', '321.4583\t76.109\t-146.461\t-32.668\r\n', '321.5000\t76.108\t-146.465\t-32.466\r\n', ' 321.5417\t76.107\t-146.470\t-32.875\r\n', '321.5833\t76.107\t-146.475\t-32.387\r\n','321.6250\t76.106\t-146.479\t-31.119\r\n', '321.6667\t76.105\t-146.485\t-31.401\r\n', '321.7083\t76.104\t-146.489 \t-29.498\r\n', '321.7500\t76.103\t-146.494\t-28.689\r\n', '321.7917\t76.102\t-146.499\t-29.651\r\n', '321.8333\t76.102\t-146.504\t-30.905\r\n', '321.8750\t76.101\t-146.508\t-31.310\r\n', '321.9167\t\t\t-31.525 \r\n', '321.9583\t76.100\t-146.518\t-32.058\r\n', '322.0000\t76.099\t-146.524\t-32.428\r\n', '322.0417\t76 .098\t-146.530\t-32.521\r\n', '322.0833\t76.097\t-146.537\t-33.164\r\n', '322.1250\t76.096\t-146.545\t-32.562 \r\n', '322.1667\t76.094\t-146.553\t-32.464\r\n', '322.2083\t76.093\t-146.562\t-32.069\r\n', '322.2500\t76 .092\t-146.571\t-31.316\r\n', '322.2917\t76.091\t-146.580\t-32.461\r\n', '322.3333\t76.090\t-146.589\t-32.643\r\n'、'322.3750\t76.089\t-146.598\t-32.702\r\n'、'322.4167\t76.088\t-146.607\ t-32.637\r\n', '322.4583\t76.087\t-146.615\t-32.580\r\n', '322.5000\t76.086\t-146.625\t-32.580\r\n', ' 322.5417\t76.086\t-146.635\t-32.323\r\n', '322.5833\t\t\t-32.291\r\n', '322.6250\t76.084\t-146.655\t-32.518\ r\n', '322.6667\t\t\t-32.515\r\n', '322.7083\t76.083\t-146.678\t-32.259\r\n', '322.7500\t76.083\t- 146.689\t-32.134\r\n', '322.7917\t76.083\t-146.701\t-31.880\r\n', '322.8333\t76.084\t-146.711\t-31.536\r\n' , '322.8750\t76.084\t-146.722\t-31.917\r\n', '322.9167\t76.084\t-146.733\t-31.821\r\n', '322.9583\t76.084\t- 146.744\t-32.105\r\n'、'323.0000\t76.084\t-146.755\t-32.233\r\n'、'323.0417\t\t\t-32。211\r\n', '323.0833\t\t\t-31.583\r\n', '323.1250\t\t\t-30.926\r\n', '323.1667\t\t\t-30.032\ r\n', '323.2083\t\t\t-29.510\r\n', '323.2500\t\t\t-30.275\r\n', '323.2917\t\t\t-30.046\r\ n', '323.3333\t\t\t-29.560\r\n', '323.3750\t\t\t-30.000\r\n', '323.4167\t\t\t-29.782\r\n' , '323.4583\t\t\t-29.769\r\n', '323.5000\t\t\t-29.438\r\n', '323.5417\t\t\t-28.246\r\n', ' 323.5833\t\t\t-28.572\r\n'、'323.6250\t\t\t-28.968\r\n'、'323.6667\t\t\t-28.452\r\n'、'323.7083\ t\t\t-28.746\r\n', '323.7500\t\t\t-28.419\r\n', '323.7917\t\t\t-28.530\r\n', '323.8333\t\ t\t-28.225\r\n', '323.8750\t\t\t-27.149\r\n',1667\t\t\t-30.032\r\n', '323.2083\t\t\t-29.510\r\n', '323.2500\t\t\t-30.275\r\n', '323.2917\ t\t\t-30.046\r\n', '323.3333\t\t\t-29.560\r\n', '323.3750\t\t\t-30.000\r\n', '323.4167\t\ t\t-29.782\r\n', '323.4583\t\t\t-29.769\r\n', '323.5000\t\t\t-29.438\r\n', '323.5417\t\t\ t-28.246\r\n', '323.5833\t\t\t-28.572\r\n', '323.6250\t\t\t-28.968\r\n', '323.6667\t\t\t- 28.452\r\n', '323.7083\t\t\t-28.746\r\n', '323.7500\t\t\t-28.419\r\n', '323.7917\t\t\t-28.530\ r\n', '323.8333\t\t\t-28.225\r\n', '323.8750\t\t\t-27.149\r\n',1667\t\t\t-30.032\r\n', '323.2083\t\t\t-29.510\r\n', '323.2500\t\t\t-30.275\r\n', '323.2917\ t\t\t-30.046\r\n', '323.3333\t\t\t-29.560\r\n', '323.3750\t\t\t-30.000\r\n', '323.4167\t\ t\t-29.782\r\n', '323.4583\t\t\t-29.769\r\n', '323.5000\t\t\t-29.438\r\n', '323.5417\t\t\ t-28.246\r\n', '323.5833\t\t\t-28.572\r\n', '323.6250\t\t\t-28.968\r\n', '323.6667\t\t\t- 28.452\r\n', '323.7083\t\t\t-28.746\r\n', '323.7500\t\t\t-28.419\r\n', '323.7917\t\t\t-28.530\ r\n', '323.8333\t\t\t-28.225\r\n', '323.8750\t\t\t-27.149\r\n','323.4167\t\t\t-29.782\r\n', '323.4583\t\t\t-29.769\r\n', '323.5000\t\t\t-29.438\r\n', '323.5417 \t\t\t-28.246\r\n', '323.5833\t\t\t-28.572\r\n', '323.6250\t\t\t-28.968\r\n', '323.6667\t \t\t-28.452\r\n', '323.7083\t\t\t-28.746\r\n', '323.7500\t\t\t-28.419\r\n', '323.7917\t\t \t-28.530\r\n', '323.8333\t\t\t-28.225\r\n', '323.8750\t\t\t-27.149\r\n','323.4167\t\t\t-29.782\r\n', '323.4583\t\t\t-29.769\r\n', '323.5000\t\t\t-29.438\r\n', '323.5417 \t\t\t-28.246\r\n', '323.5833\t\t\t-28.572\r\n', '323.6250\t\t\t-28.968\r\n', '323.6667\t \t\t-28.452\r\n', '323.7083\t\t\t-28.746\r\n', '323.7500\t\t\t-28.419\r\n', '323.7917\t\t \t-28.530\r\n', '323.8333\t\t\t-28.225\r\n', '323.8750\t\t\t-27.149\r\n',8750\t\t\t-27.149\r\n',8750\t\t\t-27.149\r\n',

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:35:09.107

仍然不相信您的`N`实例是什么，但给定一个 Python 列表，您可以检查对象的类型并排除任何字符串。

```
>>> a = [1, 3, 'hello', 4, 5, 'world!']
>>> [el for el in a if not isinstance(el, basestring)]
[1, 3, 4, 5] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T15:16:55.947

如果我理解正确，您想将数字提取到列表中并摆脱其他所有内容。我认为这可以帮助你：

```
In [45]: s = "[Julian Day\tLatitude\tLongitude\tTs\r\n304.0833\t75.714\t-144.272\t-26.091\r\n]"

In [46]: p = "(-?\d+\.?\d*)(?:\]|\t|\n|\r)"

In [47]: [float(x) for x in re.findall(p,s)]
Out[47]: [304.0833, 75.714, -144.272, -26.091] 
```

我按原样使用`findall`该返回列表，`split`但更适合我正在做的事情。然后使用列表推导将返回的字符串列表转换为浮点数列表。

# python - 如何导入模块但忽略包的 __init__.py？

> ID：13763985
> 
> 赞同：6
> 
> 时间：2012-12-07T13:23:45.693
> 
> 标签：python, import, python-packaging

我正在尝试导入一个位于 Python 包内的模块中的函数，但是当我尝试时：

```
from package.module import some_function 
```

Python 执行包的 _ *init* _.py 但它不会发生。

有没有办法导入告诉 Python 忽略包的 _ *init* _.py 的函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T13:38:21.737

答案是否定的，不执行 __init__.py 就无法导入 python 包。根据定义，要制作一个包，您必须在该目录中放入一个 __init__.py。

但是，您可以创建一个空的 __init__.py 文件。

如果你只想从模块中导入一个函数，你可以使用：

```
import sys
sys.path.append('path_to_package/')

from module import some_function 
```

请注意，这是一个肮脏的解决方案，并不总是有效。

# android - 支持大屏幕的android设备屏幕尺寸

> ID：13763988
> 
> 赞同：1
> 
> 时间：2012-12-07T13:23:49.883
> 
> 标签：android, screen, dpi

我做了很多研究，但我觉得我还不太了解如何支持不同屏幕尺寸的整个系统。

所以我的设计师想知道我想要支持哪些屏幕尺寸，并且他想知道最初构建的分辨率。

所以我建议我想支持以下，

屏幕尺寸正常
mdpi - 是 hdpi - 是 xhdpi - 是

到目前为止，我已经假设以下内容，

正常屏幕 mdpi - 320x480 - 160ppi 正常屏幕 hdpi - 480x800 - 240ppi 正常屏幕 xhdpi - 640x960 - 320ppi

问题是您如何为屏幕定义资源？720x1280 ? 我是否使用为 640x960 定义的资源？

有点像S3

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T05:57:06.563

我已经在这里用设计师的视角说明了[应用程序骨架到支持多屏幕。](https://stackoverflow.com/questions/12242111/application-skeleton-to-support-multiple-screen/12258061#12258061)

列出了设备屏幕的百分比差异

> Ldpi- 75%
> Mdpi- 100%
> Hdpi- 150%
> XHdpi- 200%

但是我们现在知道大多数设备都带有*480X800*，所以我认为这是基于设备的，所以我们的新计算会像这样

> Ldpi- 50%
> Mdpi- 66.67%
> Hdpi- 100%
> XHdpi- 133.33%

您可以将`XHdpi`其视为基础，因为当我们放大较小的图像时，图像会变得模糊，因此开始制作更大尺寸的艺术品，然后再缩小。

现在关于配备高分辨率**720x1280**即 S3的设备

你有 Android V3.0 Honeycomb 引入的具有最小宽度概念（SW）的限定符

> 可绘制-sw???dp

设备按屏幕宽度分类，因此如果我们创建一个文件夹，`drawable-sw360dp`则具有 720dp（宽度或高度）的设备将使用`this`文件夹中的资源。

例如找到三星 Galaxy S3 dp 后缀`drawable-sw?dp` 参考[**DP 计算**](http://developer.android.com/guide/practices/screens_support.html#terms)，如果你想支持你的布局或可绘制到 S3，那么计算会说

*px= 设备宽度 = 720
dpi= 设备密度= 320*

给出的公式

```
px = dp * (dpi / 160) 
```

交换公式，因为我们有 px 的值

```
dp = px / (dpi / 160) 
```

现在把价值，

```
 dp= 720 / (320/160);
 dp=360\. 
```

所以`drawable-sw360dp`会为 S3 做这项工作

[从GsmArena](http://www.gsmarena.com/)获取设备配置，同样您也可以为不同的设备创建文件夹（尴尬/最新的）

您也可以为布局文件夹添加相同的后缀`layout-sw360dp`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T15:47:12.350

我也同意其他人在 Android 开发者网站上发布了[Supporting Multiple Screens](http://developer.android.com/guide/practices/screens_support.html)链接的观点，因为它是了解屏幕类别（小、普通、大）和不同屏幕密度之间差异的绝佳资源（ldpi、mdip、hdpi）。

还有一篇非常有趣的关于[Metrics and Grids](http://developer.android.com/design/style/metrics-grids.html)的文章对我帮助很大。

您还应该保持像素比例在您的脑后下降：

`ldpi: 1dp = 0.75px`, `mdpi: 1dp = 1px`,`hdpi: 1dp = 1.5px`和`xhdpi: 1dp = 2px`

我个人喜欢将 ldpi 与大约 240x320 的分辨率、mdpi 与 320x480、hdpi 与 480x800 以及 xhdpi 与任何更大的分辨率相关联，例如 SGS3。

例如，指向[Metrics and Grids](http://developer.android.com/design/style/metrics-grids.html)的链接指出按钮应至少为 48dp。这意味着，如果您想创建一个大小为 的按钮`48x48`，转换为，`48x48 px for mdpi`您还必须提供和的图形。`96x96 px for xhdpi``72x72 px for hdpi``36x36 px for ldpi`

我还建议您和您的设计师查看[9-patch 图像](http://developer.android.com/tools/help/draw9patch.html)并尝试调整您的 UI。这将使您作为开发人员的生活少很多麻烦。这样做的原因是您可以创建可以在整个应用程序中很好地缩放的小尺寸图像。

很明显，您应该尝试以尽可能高的分辨率（例如 xhdpi）创建图形，然后缩小到 hdpi、mdpi 和 ldpi。

我遇到的另一个提示，我不再有来源了，是使用 Android 中的资源文件夹，因为与仅提供大图像相比，它的性能要好得多，并让操作系统缩小它去吧。（[但是这个SO帖子在答案中有一些有效的论据](https://stackoverflow.com/questions/5998865/only-use-xhdpi-drawables-in-android-app)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T13:29:36.447

您可以将`SVG`库用于矢量图形，并且对于支持多分辨率屏幕非常有用，源代码在[这里](http://code.google.com/p/svg-android/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T06:42:03.470

你应该尝试这样的事情：对于从 displayPixels 到 Pixels 的转换

```
(int)TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, dp, context.getResources().getDisplayMetrics()); 
```

并将像素用于 screenPixels

```
(pixels / context.getResources().getDisplayMetrics().scaledDensity); 
```

# scala - 为什么“None”会中断包含“Option”的“for”理解？

> ID：13763992
> 
> 赞同：2
> 
> 时间：2012-12-07T13:23:56.990
> 
> 标签：scala

为什么函数`personFromParams`返回`None`？

```
 def personFromParams(p: Map[String, String]): Option[Person] =
    for {
      name <- p.get("name")
      ageStr <- p.get("age")
      age <- toInt(ageStr)
      validStr <- p.get("valid")
      valid <- toBool(validStr)
    } yield { println("personFromParams()"); new Person(name, age, valid) }

   def tryo[T](f: => T): Option[T] = try {Some(f)} catch {case _ => None}

   def toInt(s: String): Option[Int] = tryo(s.toInt);
   def toBool(s: String) = tryo(JBool.parseBoolean(s)) 
```

如果给 非数字值`toInt`，它会返回`None`for `age`，但我不明白为什么在函数中捕获和处理异常时会`toInt`中断。`for``tryo`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T13:38:49.130

因为`for`理解可以等效地写成这样

```
p.get("name").flatMap{
  name => p.get("age").flatMap {
    ageStr => toInt(ageStr).flatMap {
      age => p.get("valid").flatMap {
        validStr => p.get("valid").flatMap {
          validStr => toBool(validStr).map{
            valid => { println("personFromParams()"); new Person(name, age, valid) }
          } 
        }
      }
    }
  }
} 
```

[来自Option.flatMap](http://www.scala-lang.org/api/current/index.html#scala.Option)的scala文档：

> 如果此选项非空，则返回将 f 应用于此选项的值的结果。如果此选项为空，则返回 None。与 map 略有不同的是， f 预计会返回一个 Option（可能是 None）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T13:32:58.583

它不会中断 for 执行。只是，当 scala 查找它应该遍历的年龄集合时，没有要遍历的元素。

请注意，for yield 等价于 map，嵌套 for yield 等价于 set product then map（不完全是，但你明白了）。如果输入集之一为空，则结果集也为空，对吗？

要解决这个问题，您只需删除通过 toInt(age) 的行，并将其放入构造函数参数中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T13:36:59.407

```
for { a <- Some(3) } println(a) // 3
for { a <- None } println(a)    // no output 
```

这种行为是意料之中的，可以通过查看`for`编译器将 a 脱糖的表达式来解释。如果您`-print`在上面的代码片段上运行 Scala，您会看到循环被脱糖为`forach`：

```
new Some(scala.Int.box(3)).foreach({...})
scala.None.foreach({...}) 
```

由于`None`代表一个空集合，所以没有什么可以`foreach`结束的。

# android - 在选项卡式导航中使用带有 SupportMapFragment 子类的 ActionBarSherlock

> ID：13763996
> 
> 赞同：3
> 
> 时间：2012-12-07T13:24:14.400
> 
> 标签：android, android-fragments, actionbarsherlock, android-maps

有关其工作原理的详细信息，请参阅我[之前的问题](https://stackoverflow.com/questions/13721929/using-actionbarsherlock-with-the-new-supportmapfragment)。

**当前设置**

我`SherlockMapFragment`在`ActionBarSherlock`(ABS) 库中创建了一个名为的类，该类扩展了`SupportMapFragment`. 这可以很好地显示地图等，直到现在我才意识到（因为我是个白痴）以下内容：

*   我创建了一个名为 mapFrag 的 SherlockMapFragment 实例。
*   然后为了使用和显示它，我调用 mapFrag.newInstance()。

这实际上是在返回一个 SupportMapFragment 实例，但是这个调用是显示 MapView 所必需的。

这对于我想要实现的目标来说是一个巨大的问题，因为我试图将我的 Fragments 添加到选项卡式导航栏中，但显然我无法将 a 添加`SupportMapFragment`到 TabListener 因为我得到了各种类转换异常等，因为它期望扩展`SherlockFragment`或`Fragment`。

任何人都可以看到解决这个问题的方法吗？或者，如果我需要让自己更清楚，请提出问题。

**一种可能的解决方案**

一种解决方案是创建自己的标签栏并处理`Fragments`自己的事务。但是，这些工具已经存在，如果它是一个简单的修复，我真的不想这样做。

**提前致谢**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T04:55:30.223

您可以扩展 SherlockFragment 并自己处理 MapView。这看起来像......

```
public class SherlockMapFragment extends SherlockFragment
{
private MapView mapView;

@Override
public void onActivityCreated(Bundle savedInstanceState)
{
    super.onActivityCreated(savedInstanceState);

    mapView = (MapView) getView().findViewById(R.id.my_map_id);
    mapView.onCreate(savedInstanceState);
}

@Override
public void onResume()
{
    super.onResume();
    mapView.onResume();
}

@Override
public void onPause()
{
    super.onPause();
    mapView.onPause();
}

@Override
public void onLowMemory()
{
    super.onLowMemory();
    mapView.onLowMemory();
}

@Override
public void onSaveInstanceState(Bundle outState)
{
    super.onSaveInstanceState(outState);
    mapView.onSaveInstanceState(outState);
}

@Override
public void onDestroy()
{
    super.onDestroy();
    mapView.onDestroy();
}
} 
```

没有什么说你绝对必须使用 SupportMapFragment。新 API 最酷的部分之一是能够将 MapView 用作普通视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:52:07.730

试试这个

公共类 BysFragmentActivity 扩展 SherlockFragmentActivity {

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    ActionBar actionBar = getSupportActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    Tab tab = actionBar.newTab()
            .setText("Mapa 1")
            .setTabListener(new TabListener<BySMapFragment>(this, "mapa", BySMapFragment.class));
    actionBar.addTab(tab);
    tab = actionBar.newTab()
            .setText("Mapa 2")
            .setTabListener(new TabListener<BySMapFragment>(this, "mapa", BySMapFragment.class));
    actionBar.addTab(tab);

}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
}

@Override
public void onAttachFragment(android.support.v4.app.Fragment fragment) {
    super.onAttachFragment(fragment);
}

public static class TabListener<T extends Fragment> implements ActionBar.TabListener {

    private Fragment mFragment;
    private final Activity mActivity;
    private final String mTag;
    private final Class<T> mClass;

    public TabListener(Activity activity, String tag, Class<T> clz) {
        mActivity = activity;
        mTag = tag;
        mClass = clz;
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {    
        if (mFragment == null) {
            mFragment = Fragment.instantiate(mActivity, mClass.getName());
            ft.replace(android.R.id.content, mFragment, mTag);
        } else {
            ft.attach(mFragment);
        }
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        if (mFragment != null) {
            ft.detach(mFragment);
        }
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {

    }

} 
```

}

# java - 您是否需要自定义适配器才能将不同的视图子项添加到 ListView

> ID：13763997
> 
> 赞同：0
> 
> 时间：2012-12-07T13:24:18.253
> 
> 标签：java, android, xml, listview, adapter

我想创建一个具有交替行布局的 ListView。

```
Row 1 - Layout A
Row 2 - Layout B
Row 3 - Layout A etc. 
```

是否有必要为此创建一个自定义适配器，或者默认情况下可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:33:40.497

不，如果没有 Adapter，您将无法做到这一点，但请查看[BaseAdapter](http://developer.android.com/reference/android/widget/BaseAdapter.html)`getViewTypeCount()`类`getItemViewType(postion)`，因为它们会支持您。

首先让您的适配器知道您的行有多少不同的类型；在您的情况下，它们是 2（布局 A 和布局 B）。

第二种方法返回给定位置的类型。在您的情况下，它可能很简单，例如以下代码。

```
@Override
public int getItemViewType(int postion){
    return (postion % 2); 
```

请参阅：[http](http://android.amberfog.com/?p=296) ://android.amberfog.com/?p=296了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:18:02.680

如果您的列表中没有那么多项目，则根本不需要使用`ListView`或适配器。

对于类似的结果，您可以在 a 中使用`LinearLayout`a `ScrollView`。

通过这种方式，您可以`LinearLayout`根据列表中的位置使用相关样式将项目添加到您的活动创建中。

话虽如此，如果您的列表中有很多（我知道非常模糊）项目，那么使用`ListView`

如果a）没有那么多项目并且b）您没有在运行时从列表中插入/删除项目（除了初始构建），我个人会使用此方法，否则您将不得不经历每个项目都在调整其风格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T13:29:25.137

您必须开发自己的布局和适配器，使用默认适配器，您无法选择要放置的布局。

# php - 从 PHP 中的子类访问受保护的方法

> ID：13763999
> 
> 赞同：3
> 
> 时间：2012-12-07T13:24:20.890
> 
> 标签：php, codeigniter, inheritance, protected

我可以使用至少两种基本方法从子类访问**受保护的类方法：**

```
parent::myMethod();

$this->myMethod(); 
```

如果我不需要在子类中覆盖它，在这种情况下我必须这样做：

```
function myMethod() {
   ...
   parent::myMethod();
   ...
} 
```

哪个是最推荐的调用方式？**我个人觉得使用parent::myMethod()**而不是**$this->myMethod**更舒服，因为第一个立即告诉我这个方法是被继承的。但我不确定在性能和最佳实践方面采用哪种方式。

**编辑：**

检查这个，这是我的问题的真实情况。它使用 CodeIgniter，但即使你不熟悉它，你也可能会得到它：

```
class Admin_Controller extends CI_Controller {

    protected function validate_form($validation) {
            $this->load->library('form_validation');
            // This will validate the form sent against the validation rules group specified in $validation
            if ($this->form_validation->run($validation) == false) {   
                    throw new Exception('There are errors in the form');
            }
    }

}

class Articles extends Admin_Controller {

    function save($id) {
            $this->validate_form(strtolower(get_class($this));
            // OR
            parent::validate_form(strtolower(get_class($this));
            // Other actions
            ....
    }

}

class Login extends Admin_Controller {

    function signIn() {
            $this->validate_form(strtolower(get_class($this));
            // OR
            parent::validate_form(strtolower(get_class($this));
            // Other actions
            ....
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T14:05:56.267

他们做两种不同的事情。关键字的语义`parent`是这样的，它对其父类进行转发调用。然而，的语义`$this->method()`是这样的，它只会在调用该方法的实例未声明该方法的情况下将其调用转发给父类。同样重要的是要注意，孩子可能有父母和祖父母，因此在原型设计中也必须仔细考虑。

如果您不希望方法被覆盖，您应该在方法原型声明中使用[final](http://php.net/language.oop5.final)关键字。

```
class MyClass {
    final protected function myMethod() {
    }
} 
```

这确保了**任何扩展类都不能覆盖该方法**。如果扩展类尝试像下面的代码那样覆盖此方法，您将收到一个致命错误`Fatal error: Cannot override final method MyClass::myMethod()`。

```
class MyOtherClass extends MyClass {
    public function myMethod() {
    }
} 
```

此外，这使您的代码*更具可读性*并且*不易出错，*因为您清楚地向阅读代码的人说明该方法是最终的并且不能被覆盖。

此外，您的方法的潜在问题（如果您想使用`parent::myMethod()`vs. `$this->myMethod()`）是您没有考虑到当班级是其**父母**的孙子时会发生什么，例如......

```
class Father {
    protected function myMethod() {
        return __METHOD__;
    }
}

class Child extends Father {
    public function myMethod() {
        return __METHOD__;
    }
}

class GrandChild extends Child {
    public function myOtherMethod() {
        echo parent::myMethod(), "\n"; // Child::myMethod
        echo $this->myMethod(), "\n";  // Child::myMethod
    }
}

$obj = new GrandChild;
$obj->myOtherMethod(); 
```

如您所见，即使您打算使用父亲的方法，它们也会给您子方法。如果您从不打算在扩展类中覆盖它，只需将该方法声明为 final，并且在从对象上下文调用 $this->myMethod() 时应该始终没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:09:24.480

据我了解，这是两个不同的东西。

**$this**用于引用类的实例，并且在创建对象后可用。因此它将引用子类对象，而不是父类。

**parent**是在子类中扩展父类方法的正确方法。它引用父类，并具有额外的优点，即不需要在多个级别上更改类名。**自我**是相似的。

有关示例，请参见下面的两个实现。

1.  [使用父关键字访问](http://codepad.viper-7.com/J0OenN)
2.  [使用此访问会导致意外行为。](http://codepad.viper-7.com/XjEZu2)

希望我能有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T13:30:14.083

当你调用 parent::method() 时，它是不同于 $this->method() 的方法。如果您在子类中覆盖它，它可能会返回不同的值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-02T08:37:45.547

有关从子类调用受保护的父方法的示例，请参见下文。

这样做的一个很好的理由是重用父类的功能，然后在子类中添加该功能。

```
class A{

    protected $a;

    public function __construct(){
        $this->setValueOfStringInA();

    }
    protected function setValueOfStringInA(){
        $this->a = "a set from A::setValueOfStringInA";
    }
    public function getValueOfA(){
        echo 'a of ' . __CLASS__ . ' = ' . $this->a . '<br>';
    }
}

class B extends A{

    protected $b;

    public function __construct(){
        parent::__construct();
    }
    protected function setValueOfStringInA(){
        parent::setValueOfStringInA();
        $this->b = "b set from B::setValueOfStringInA";
    }
    public function getValueOfA(){
        echo 'a of ' . __CLASS__ . ' = ' . $this->a . '<br>';
    }    
    public function getValueOfB(){
        echo 'b of ' . __CLASS__ . ' = ' . $this->b . '<br>';
    }
}

$objA = new A();
//the following call will not work since it is a protected method, it can not be called from outside, hence commented out.
//$objA->setValueOfStringInA();
$objA->getValueOfA();

$objB = new B();
//$objB->setValueOfStringInA();
$objB->getValueOfB();
$objB->getValueOfA(); 
```

检查输出：

```
a of A = a set from A::setValueOfStringInA
b of B = b set from B::setValueOfStringInA
a of B = a set from A::setValueOfStringInA 
```