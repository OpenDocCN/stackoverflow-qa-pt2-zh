# StackOverflow 问答 14477000-14477999

# r - Aggregate multiple variables with different functions

> ID：14477001
> 
> 赞同：6
> 
> 时间：2013-01-23T10:06:18.313
> 
> 标签：r, aggregate

Say I had the following table `DataTable`

```
Cat1    |   Cat2    |   Val1    |   Val2
--------------------------------------------
A       |   A       |   1       |   2
A       |   B       |   3       |   4
B       |   A       |   5       |   6
B       |   B       |   7       |   8
A       |   A       |   2       |   4
A       |   B       |   6       |   8
B       |   A       |   10      |   12
B       |   B       |   14      |   16 
```

Which I wanted to Aggregate by Cat1 and Cat2, taking the Sum and Avg of Val1 and Val2 respectively, how might I acheive this?

```
Cat1    |   Cat2    | Sum Val1  | Avg Val2
--------------------------------------------
A       |   A       |   3       |   3
A       |   B       |   9       |   6
B       |   A       |   15      |   9
B       |   B       |   21      |   12 
```

I've achieved single variable aggregation with the aggregate function:

```
aggregate(
        Val1
    ~   Cat1 + Cat2
    data=DataTable,
    FUNC=sum
) 
```

but despite playing around with cbind, can't get the behaviour I want. I'm 24 hrs into learning R, so I'm not familiar enough with the concepts to fully understand what I've been doing (always dangerous!) but think this must be simple to achieve. |

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-23T10:17:39.610

```
set.seed(45)
df <- data.frame(c1=rep(c("A","A","B","B"), 2), 
                 c2 = rep(c("A","B"), 4), 
                 v1 = sample(8), 
                 v2 = sample(1:100, 8))
> df
#   c1 c2 v1 v2
# 1  A  A  6 19
# 2  A  B  3  1
# 3  B  A  2 37
# 4  B  B  8 86
# 5  A  A  5 30
# 6  A  B  1 44
# 7  B  A  7 41
# 8  B  B  4 39

v1 <- aggregate( v1 ~ c1 + c2, data = df, sum)
v2 <- aggregate( v2 ~ c1 + c2, data = df, mean)
out <- merge(v1, v2, by=c("c1","c2"))
> out
#   c1 c2 v1   v2
# 1  A  A 11 24.5
# 2  A  B  4 22.5
# 3  B  A  9 39.0
# 4  B  B 12 62.5 
```

`**Edit:**`我建议您使用`data.table`它，因为它使事情变得非常容易：

```
require(data.table)
dt <- data.table(df)
dt.out <- dt[, list(s.v1=sum(v1), m.v2=mean(v2)), 
                  by=c("c1","c2")]
> dt.out

#    c1 c2 s.v1 m.v2
# 1:  A  A   11 24.5
# 2:  A  B    4 22.5
# 3:  B  A    9 39.0
# 4:  B  B   12 62.5 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-23T10:42:54.600

这是一个基本的 R 解决方案：

首先，您的数据：

```
x <- structure(list(Cat1 = structure(c(1L, 1L, 2L, 2L, 1L, 1L, 2L, 
2L), .Label = c("A", "B"), class = "factor"), Cat2 = structure(c(1L, 
2L, 1L, 2L, 1L, 2L, 1L, 2L), .Label = c("A", "B"), class = "factor"), 
    Val1 = c(1L, 3L, 5L, 7L, 2L, 6L, 10L, 14L), Val2 = c(2L, 
    4L, 6L, 8L, 4L, 8L, 12L, 16L)), .Names = c("Cat1", "Cat2", 
"Val1", "Val2"), class = "data.frame", row.names = c(NA, -8L)) 
```

然后，使用`ave()`和`unique()`内`within()`。

```
unique(
  within(x, {
    sum_val1 <- ave(Val1, Cat1, Cat2, FUN = sum)
    mean_val2 <- ave(Val2, Cat1, Cat2, FUN = mean)
    rm(Val1, Val2)
  })
)
#   Cat1 Cat2 mean_val2 sum_val1
# 1    A    A         3        3
# 2    A    B         6        9
# 3    B    A         9       15
# 4    B    B        12       21 
```

或者，如果您对 SQL 感到满意，请使用`sqldf`：

```
library(sqldf)
sqldf("select Cat1, Cat2, 
      sum(Val1) `Sum_Val1`, 
      avg(Val2) `Avg_Val2` 
      from x group by Cat1, Cat2") 
```

# forms - Adding remeber username and password option on joomla login form?

> ID：14477008
> 
> 赞同：0
> 
> 时间：2013-01-23T10:06:38.437
> 
> 标签：forms, joomla, login, passwords, reset

I want to save my Username Password of my login in my joomla website.. How can i do this? How can i enable remeber me option for the Joomla Login Form. Please advice

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:14:57.970

标准的 Joomla 登录表单已经提供了记住密码的选项。这不太可能，但您可能正在使用模板，该模板已为复选框使用模板覆盖，因此不会显示。在您的 FTP 中，转到以下目录：

```
root/template/your_template/html/mod_login 
```

并查看复选框的 html 代码是否在**default.php**文件中。如果此目录不存在，则不会导致问题。

还请指定您的 Joomla 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:51:41.917

插件可能`System - Remember Me`被禁用。转到插件并检查它是否启用。否则@Lodder 答案是正确的。这仅适用于前端，不适用于管理员。

![在此处输入图像描述](../Images/05435536d6eb32160bbca85032d928d4.png)

# sql - SQL Query Join & Date Manipulation

> ID：14477009
> 
> 赞同：0
> 
> 时间：2013-01-23T10:06:38.777
> 
> 标签：sql, oracle, join

I'm having trouble with a particular Oracle query. I'm trying to write a query to pull the following data.

• “How many students who were previously suspended for reason of "bad behaviour" have since been re-assessed AND the number over 12 years old and under 12 years old”

Three tables I believe I need to work with: person status history (contains REASON, SUSPEND_TO_DATE), person_visit (contains fields like VISIT_DATE) and person (contains fields such as PERSON_ID and BIRTH_DATE).

(PERSON_ID is common across all tables.)

Here was my amateur attempt, I'm still not fully sure of the use of joins & how to work out the over 12/under 12 using only the BIRTH_DATE information is another issue.

```
select count (*) from person_status_history 
inner join person_visit on person_status_history.person_id=person_visit.person_id
inner join person on person_visit.person_id=person.person_id
where person_status_history.reason_code = 85 and person_visit.reasses_appoint_no is not null and person.birth_date < '23-JAN-2000'; 
```

In basic pseudo-code I suppose what I need to develop is (very rough!):

SELECT * PERSON_ID WHERE SUSPEND_TO_DATE is NOT NULL AND REASON = "85" AND VISIT_DATE > SUSPEND_TO_DATE and count the number >12 AND < 12.

Can anyone advise?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:46:20.357

将其视为：“对于哪些学生存在停学，随后将进行访问” ...

```
select case when p.date_of_birth < current_date - interval '12 year'
       then '< 12'
       else '12+'
       end age_bracket,
       count (*)
from   person p
where  exists (
         select null
         from   person_status_history psh
         where  psh.person_id   = p.person_id and
                psh.reason_code = 85          and
                exists (
                  select null
                  from   person_visit pv
                  where  pv.person_id          = psh.person_id and
                         pv.reasses_appoint_no is not null     and
                         pv.visit_date         > psh.suspend_to_date)
group by case when p.date_of_birth < current_date - interval '12 year'
         then '< 12'
         else '12+'
         end 
```

虽然没有测试语法错误等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:09:43.190

尝试像这样转换您的日期：

```
person.birth_date < TO_DATE('23-JAN-2000','DD-MM-YYYY') 
```

# android - Resttemplate android: RestClientException: Could not extract response: no suitable HttpMessageConverter found

> ID：14477010
> 
> 赞同：3
> 
> 时间：2013-01-23T10:06:40.870
> 
> 标签：android, json, resttemplate

I'm using Androd resttemplate and MappingJacksonHttpMessageConverter. For some urls exchange works well, but one is causing exception. Instantiation of Resttemplate

```
restTemplate = new RestTemplate();
restTemplate.getMessageConverters().add(new MappingJacksonHttpMessageConverter());
restTemplate.getMessageConverters().add(new StringHttpMessageConverter());
rootUrl = "http://someserver.com" 
```

and exchange function:

```
public Questions loadQuestQuestions(int quest_id, String token) {
    HashMap<String, Object> urlVariables = new HashMap<String, Object>();
    urlVariables.put("quest_id", quest_id);
    urlVariables.put("token", token);
    HttpHeaders httpHeaders = new HttpHeaders();
    httpHeaders.setAccept(Collections.singletonList(MediaType.parseMediaType("application/json")));
    HttpEntity<Object> requestEntity = new HttpEntity<Object>(httpHeaders);
    return restTemplate.exchange(rootUrl.concat("/tasks/{quest_id}/questions?token={token}"), HttpMethod.GET, requestEntity, Questions.class, urlVariables).getBody();
} 
```

Questions -

```
import org.codehaus.jackson.map.annotate.JsonRootName;
import java.util.LinkedList;

/**
 * Wrapper for collection
*/
@JsonRootName(value = "questions")
public class Questions extends LinkedList<Question> {
} 
```

`Question` having all needed annotations including `@JsonRootName`

Json comming have content type 'application/json' and all is right and recently works well. But exception is thrown: `org.springframework.web.client.RestClientException: Could not extract response: no suitable HttpMessageConverter found for response type [Questions] and content type [application/json;charset=utf-8]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T02:49:51.387

我看不出你的代码有什么问题。Spring 3.2.x 添加了使用 Jackson 2- 的转换器`MappingJackson2HttpMessageConverter`。也许你可以试试这个转换器。这解决了我过去遇到的类似问题。确保您的 POJO 具有 Jackson 2 注释。希望对您有所帮助。

```
RestTemplate template = new RestTemplate();
List<HttpMessageConverter<?>> messageConverters = new ArrayList<HttpMessageConverter<?>>();
MappingJackson2HttpMessageConverter map = new MappingJackson2HttpMessageConverter();
messageConverters.add(map);
template.setMessageConverters(messageConverters);
MyClass msg = template.postForObject(url, request, MyClass.class); 
```

# java - 如何防止多次同时加载非缓存值？

> ID：14477012
> 
> 赞同：7
> 
> 时间：2013-01-23T10:06:46.643
> 
> 标签：java, performance, caching

**如何以有效**的方式防止多次同时加载缓存中不存在的值？

典型的缓存用法是以下伪代码：

```
Object get(Object key) {
 Object value = cache.get(key);
 if (value == null) {
  value = loadFromService(key);
  cache.set(key,value);
 }
 return value;
} 
```

问题：在从服务（数据库、WebService、RemoteEJB 或其他任何东西）加载值之前，可能会同时进行第二次调用，这将使值再次加载。

比如我在缓存用户X的所有item，这个用户经常被查看，并且有很多item，很有可能同时调用他所有item的load，导致服务器负载过重。

我可以使`get`功能**同步**，但这会迫使其他搜索等待，没有多大意义。我可以为每个键创建**新锁，但我不知道在****Java**中管理如此大量的锁是否是个好主意（这部分是特定于语言的，我将其标记为的原因`java`）。

还是我可以使用另一种方法？如果是这样，什么是最有效的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T10:15:53.310

您通常可以做的事情是使用 Object 的 hashCode。

您可以拥有一组基于 hashCode 使用的锁，以减少冲突的机会。或者作为一种技巧，您可以使用自动装箱字节始终返回相同对象的事实。

```
Object get(Object key) {
    Object value = cache.get(key);
    if (value == null) {
        // every possible Byte is cached by the JLS.
        Byte b = Byte.valueOf((byte) key.hashCode());
        synchronized (b) {
            value = cache.get(key);
            if (value == null) {
                value = loadFromService(key);
                cache.set(key, value);
            }
        }
    }
    return value;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T10:24:54.527

不要重新发明轮子，使用番石榴[`LoadingCache`](http://code.google.com/p/guava-libraries/wiki/CachesExplained)或[记忆供应商](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Suppliers.html)。

如果您使用的是 Ehcache，请阅读[read-through](http://ehcache.org/documentation/get-started/getting-started#read-through)，这是您要求的模式。您必须实现该`CacheEntryFactory`接口以指示缓存如何在缓存未命中时读取对象，并且您必须`Ehcache`使用`SelfPopulatingCache`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T11:16:44.900

在加载时，在地图中插入一个中间对象而不是结果，以指示加载开始但尚未完成。下面的 java.util.concurrent.FutureTask 用于中间对象：

```
Object get(final Object key) throws Exception {
    boolean doRun = false;
    Object value;
    synchronized (cache) {
        value = cache.get(key);
        if (value == null) {
            value = new FutureTask(new Callable() {
                @Override
                public Object call() throws Exception {
                    Object loadedValue = loadFromService(key);
                    synchronized (cache) {cache.put(key, loadedValue);};
                    return loadedValue;
                }

            });
            cache.put(key, value);
            doRun=true;
        }
    }
    if (value instanceof FutureTask) {
        FutureTask task = (FutureTask) value;
        if (doRun) {
            task.run();
        }
        return task.get();
    }
    return value;
}` 
```

# openlayers - WFS Mapserver Layer not showing up in OpenLayers

> ID：14477019
> 
> 赞同：1
> 
> 时间：2013-01-23T10:07:11.047
> 
> 标签：openlayers, mapserver

I'm currently setting up a PostGIS/Mapserver/OpenLayers application. It works fine for serving up an image of my data, but I can not for the life of me get a WFS layer to show up in OpenLayers.

I've gone through the similar questions and resolved all the points mentioned there such as cross-domain issues, SRS names, etc. I have come to the point where the data is requested by OpenLayers and the Mapserver answers with a data set, but still nothing shows up in OpenLayers.

Here are my mapfile and my OpenLayers test file. Note that the base mapserver layer ("regions") is displayed correctly. It is the WFS layer ("rivers") that remains invisble. Any help much appreciated. There are no error messages in the javascript console.

the mapfile:

```
MAP
  NAME        "test"
  STATUS ON
  EXTENT      0 0 100000 100000
  SIZE        1200 800
  IMAGECOLOR  0 40 120

  WEB
    MINSCALE 10
    MAXSCALE 1000000000
    METADATA
        "wfs_title" "Might & Fealty WFS Service"
        "wfs_srs" "EPSG:4326"
        "wfs_onlineresouce" "http://va.mightandfealty.com/mapserver"
        "wfs_enable_request" "*"
    END
  END

  LAYER
    NAME "regions"
    STATUS ON
    METADATA
        "wfs_title" "estates"
        "wfs_srs" "EPSG:4326"
        "gml_featureid" "id"
        "wfs_enable_request" "*"
    END
    TYPE POLYGON
    CONNECTIONTYPE POSTGIS
    CONNECTION "host=127.0.0.1 port=5432 dbname=bm2 user=bm2 password=xxx"
    DATA "poly from geodata"
    FILTER (biome not in ('water','ocean'))
    CLASS
      STYLE
        OUTLINECOLOR 200 20 20
        COLOR 20 200 20
        WIDTH 1
        ANTIALIAS true
      END
    END
  END

   LAYER
    NAME "rivers"
    STATUS ON
    METADATA
        "wfs_title" "rivers"
        "wfs_srs" "EPSG:4326"
        "gml_featureid" "id"
        "wfs_enable_request" "*"
    END
    TYPE LINE
    CONNECTIONTYPE POSTGIS
    CONNECTION "host=127.0.0.1 port=5432 dbname=bm2 user=bm2 password=xxx"
    DATA "course from river"
    CLASS
      STYLE
        COLOR 0 80 160
        WIDTH 2
        ANTIALIAS true
      END
    END
  END
END 
```

and the OpenLayers test HTML:

```
<html>
<head>
   <script src="http://openlayers.org/api/OpenLayers.js"></script>
</head>
<body>

<div id="map" style="width:1200px;height:800px"></div>

<script language="javascript" type="text/javascript">
var map, layer;

init();

function init(){
        var mapBounds = new OpenLayers.Bounds(0, 0, 100000, 100000);
        var geojson_format = new OpenLayers.Format.GeoJSON();

        var options = {
                maxExtent: mapBounds,
                projection: new OpenLayers.Projection('EPSG:4326'),
                units: 'm'
        };
        map = new OpenLayers.Map('map', options);

  baselayer = new OpenLayers.Layer.MapServer("Mapserver",
       "http://va.mightandfealty.com/mapserver",
       {map: 'basemap', layers: ['regions']}, {singleTile:true});
  map.addLayer(baselayer);

  var style = new OpenLayers.Style({
    fillColor: '#ffff00',
    strokeColor: '#0040ff',
    strokeWidth: 5
  });

  var style = new OpenLayers.Style({
    fillColor: '#ffff00',
    strokeColor: '#0040ff',
    strokeWidth: 5
  });

   layer = new OpenLayers.Layer.Vector("Rivers", {
    renderers: ["SVG2", "VML", "Canvas"],
    styleMap: new OpenLayers.StyleMap(style),
    strategies: [new OpenLayers.Strategy.BBOX()],
    protocol: new OpenLayers.Protocol.WFS({
      url: "http://va.mightandfealty.com/mapserver?map=basemap&service=wfs&srsName=EPSG:4326",
      featureType: "rivers",
      featureNS: "http://va.mightandfealty.com/maplayers/rivers",
      srsName: "EPSG:4326",
      geometryName: "course",
      version: "1.1.0"
    }),
  });
  map.addLayer(layer);
  layer.setVisibility(true);

  map.zoomToMaxExtent();

};

</script>
</body>
</html> 
```

One thing I can imagine as causing issues is the coordinate system. I should use EPSG:404000 I believe, as my coordinates are in m from an arbitrary 0 point, so the range is 0 to about 100,000 - but as it seems to work just fine for the image and neither Mapserver nor OpenLayers complain, I'm currently testing this way.

**Update:** Here is the first part of the response from the WFS server:

```
<wfs:FeatureCollection xmlns:ms="http://mapserver.gis.umn.edu/mapserver" xmlns:wfs="http://www.opengis.net/wfs" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/WFS-basic.xsd                         http://mapserver.gis.umn.edu/mapserver http://va.mightandfealty.com/mapserver?SERVICE=WFS&amp;VERSION=1.0.0&amp;REQUEST=DescribeFeatureType&amp;TYPENAME=feature:rivers&amp;OUTPUTFORMAT=XMLSCHEMA">
  <gml:boundedBy>
    <gml:Box srsName="EPSG:4326">
        <gml:coordinates>9870.500000,11393.700000 89396.100000,82458.000000</gml:coordinates>
    </gml:Box>
  </gml:boundedBy>
<gml:featureMember>
  <ms:rivers fid="rivers.56288">
    <gml:boundedBy>
        <gml:Box srsName="EPSG:4326">
            <gml:coordinates>30170.100000,36050.400000 33748.000000,42180.900000</gml:coordinates>
        </gml:Box>
    </gml:boundedBy>
    <ms:msGeometry>
    <gml:LineString srsName="EPSG:4326">
      <gml:coordinates>30170.100000,42180.900000 30638.666606,42145.195547 31092.384113,42022.852978 31541.532887,42110.569985 31998.200000,41998.700000 31982.139081,41544.379665 32041.352331,41093.103418 32150.754503,40642.976204 32175.600000,40200.500000 32217.079394,40152.159753 32264.056250,40095.565900 32311.261782,40056.552423 32364.300000,40011.900000 32669.068387,39950.658606 32967.946875,39965.794791 33268.616917,39823.880529 33589.700000,39722.200000 33560.642536,39352.254679 33714.125000,38989.478112 33634.090702,38633.521408 33748.000000,38273.400000 33232.041223,38066.279559 32676.456250,37646.200251 32160.021640,37573.382959 31663.300000,37339.200000 31802.023226,37019.298307 31883.325000,36677.163326 31937.030313,36378.729052 32022.800000,36050.400000 </gml:coordinates>
    </gml:LineString>
    </ms:msGeometry>
  </ms:rivers>
</gml:featureMember>
<gml:featureMember>
  <ms:rivers fid="rivers.56291">
    <gml:boundedBy>
        <gml:Box srsName="EPSG:4326">
            <gml:coordinates>33843.100000,48178.700000 36248.400000,52306.300000</gml:coordinates>
        </gml:Box>
    </gml:boundedBy> 
```

# php - Trying to automatically insert a foreign key value into my mysql table

> ID：14477022
> 
> 赞同：1
> 
> 时间：2013-01-23T10:07:20.997
> 
> 标签：php, mysql, foreign-keys, primary-key, database-table

I am new with PHP and MySQL and need help...

Im cant seem to get my head around how to automatically insert a foreign key into a table in my database. The primary key gets added as 'id' in my 'mem' table but I want this same id to be added to a foreign key in my 'location' table. Can anyone please help?

I have two tables...

'mem table' id, username, email.

```
 |    1    |    2    |    3    |
  |   paul  |   john  | francis |       
  | paul@gm.| john@gm.|francis@.| 
```

'location table' id, location, user_id << forign key

```
 |    1    |    2    |    3    |
  |  leeds  |liverpool| london  |       
  |    ?    |    ?    |    ?    | 
```

how do I get the 'id' in the user table to automatically get inserted here as a foreign key?

Im using this php code to insert the data...

```
$sql = mysql_query("INSERT INTO mem (username, country, state, city, accounttype, email, password, signupdate) 
        VALUES('$username','$country','$state','$city','$accounttype','$email','$hashedPass', now())")      or die(mysql_error());
$id = mysql_insert_id();

$sql = mysql_query("INSERT INTO location (location) 
VALUES('$location')") or die(mysql_error());
$user_id = mysql_insert_id(); 
```

Im getting this error when I submit the form... Cannot add or update a child row: a foreign key constraint fails (`mem`.`location`, CONSTRAINT `location_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `location` (`id`) ON DELETE CASCADE ON UPDATE CASCADE)

Can anyone help?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:20:17.967

您的 FK 方向错误。此刻它说：“用户表中的每个条目都必须在位置表中有一个条目。” 您尝试在用户表中插入，而不先创建位置条目。所以FK失败了。

解决方案：在位置表“user_id -> users.user_id”上设置FK，这意味着“位置表上的每个user_id都应该在用户表中有一个条目。”。唯一的问题是：“ON DELETE CASCADE”不再起作用，当您删除用户表中的条目时...... - 这可以通过数据库触发器（PSEUDOCODE）“在从用户删除之前删除用户ID的位置”来解决" 或者您只需在 PHP 中进行 2 次查询。（这是更简单的解决方案。第一个删除位置行，第二个用户行。）

# mysql - Sphinx indexer ERROR: index 'PhoneNumbers2': Error writing file '/tmp/MYbP6cIt' (Errcode: 28)

> ID：14477024
> 
> 赞同：0
> 
> 时间：2013-01-23T10:07:45.660
> 
> 标签：mysql, linux, terminal, sphinx, tmp

I have problem with sphinx indexer and large (over 1gb database). Seems that its running out of space and I am unable to change the /tmp folder it is using. Googling the error gives lot of mysql related errors, but I have changed all paths in /etc/mysql/* files to /var/tmp which has more available space. Current /tmp folder has 1,4 GB of space and that does not seem to be enough. So is there a way to change what folder /sphinx/bin/indexer is using for temp files or some other ways to go around this? (It is still possible that it is mysql related, machine has several mysql sockets, thou I tried to change tmp for them all and restarted)

Terminal output:

```
$ /usr/local/sphinx/bin/indexer --all
Sphinx 2.0.6-release (r3473)
Copyright (c) 2001-2012, Andrew Aksyonoff
Copyright (c) 2008-2012, Sphinx Technologies Inc (http://sphinxsearch.com)
using config file './sphinx.conf'...
indexing index 'Company'...
collected 371124 docs, 20.2 MB
collected 772228 attr values
sorted 0.8 Mvalues, 100.0% done
sorted 20.4 Mhits, 100.0% done
total 371124 docs, 20237855 bytes
total 16.348 sec, 1237872 bytes/sec, 22700.24 docs/sec
indexing index 'PhoneNumbers2'...
WARNING: Attribute count is 0: switching to none docinfo
ERROR: index 'PhoneNumbers2': Error writing file '/tmp/MYbP6cIt' (Errcode: 28).
total 4058019 docs, 83846995 bytes
total 45.524 sec, 1841793 bytes/sec, 89138.94 docs/sec
total 1885604 reads, 0.779 sec, 0.0 kb/call avg, 0.0 msec/call avg
total 76 writes, 0.392 sec, 3223.9 kb/call avg, 5.1 msec/call avg 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:26:00.633

我不完全确定如何更改 tmp 文件夹，但您可以做的是使用范围对索引查询进行切片，以便它适合它。查看[sql_query_range](http://sphinxsearch.com/docs/current.html#conf-sql-query-range)和[sql_range_step](http://sphinxsearch.com/docs/current.html#conf-sql-range-step)

另请查看以下博客条目

[http://sphinxsearch.com/blog/2012/08/14/indexing-tips-tricks/](http://sphinxsearch.com/blog/2012/08/14/indexing-tips-tricks/)

# android - Looping through json object without child name

> ID：14477025
> 
> 赞同：4
> 
> 时间：2013-01-23T10:07:46.347
> 
> 标签：android, json

I want to retrieve the values of all element in this json format document.

```
[
            {
                "id": "c0001xgp",
                "title": 8.8,
                "content": 142.369,
                "vignette": "us",
                "image": "2011-03-11 04:46:23",
                "type": 24.4,
                "pubdate": 38.322
          },
            {
                "id": "c0001xgp",
                "title": 8.8,
                "content": 142.369,
                "vignette": "us",
                "image": "2011-03-11 04:46:23",
                "type": 24.4,
                "pubdate": 38.322
          },  {
                "id": "c0001xgp",
                "title": 8.8,
                "content": 142.369,
                "vignette": "us",
                "image": "2011-03-11 04:46:23",
                "type": 24.4,
                "pubdate": 38.322
          },  {
                "id": "c0001xgp",
                "title": 8.8,
                "content": 142.369,
                "vignette": "us",
                "image": "2011-03-11 04:46:23",
                "type": 24.4,
                "pubdate": 38.322
          } 
```

]

how can i achieve this. i'm learning json and android. when there is a parent in the json object i can deal with but now i am have trouble to solve this problem.

The main class

```
// JSON Node names
private static final String TAG_ARRAY= "";

private static final String TAG_ID = "id";

private static final String TAG_TITLE = "title";

private static final String TAG_CONTENT = "content";

private static final String TAG_VIGNETTE = "vignette";

private static final String TAG_IMAGE = "image";

private static final String TAG_TYPE = "type";

private static final String TAG_PUBDATE = "pubdate";

// contacts JSONArray

JSONArray myArray = null;

@Override

public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.actus);

    // Hashmap for ListView
    ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

    // Creating JSON Parser instance

    JSONParser jParser = new JSONParser();

    // getting JSON string from URL
     JSONArray jArray = jParser.getJSONFromUrl(url);

        // looping through All element
        for(int i = 0; i < jArray.length(); i++){

            JSONObject oneObject = null;
            try{

            oneObject = jArray.getJSONObject(i);

            // Storing each json item in variable
            String id;

            String title;

                title = oneObject.getString(TAG_TITLE);

            String content = oneObject.getString(TAG_CONTENT);

            String vignette = oneObject.getString(TAG_VIGNETTE);

            String image = oneObject.getString(TAG_IMAGE);

            String type = oneObject.getString(TAG_TYPE);

            String pubdate = oneObject.getString(TAG_PUBDATE);

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value

            map.put(TAG_TITLE, title);

            map.put(TAG_CONTENT, content);

            map.put(TAG_VIGNETTE, vignette);

            map.put(TAG_TYPE, type);

            map.put(TAG_PUBDATE, pubdate);

            // adding HashList to ArrayList

            contactList.add(map);

            }catch (JSONException e) {

                // TODO Auto-generated catch 
```

block e.printStackTrace(); }

```
 }

    /**
     * Updating parsed JSON data into ListView
     */
    ListAdapter adapter = new SimpleAdapter(this, contactList,
            R.layout.list_item,
            new String[] { TAG_TITLE, TAG_CONTENT, TAG_VIGNETTE }, new int[] {
                    R.id.name, R.id.email, R.id.mobile });

    setListAdapter(adapter);

    // selecting single ListView item
    ListView lv = getListView();

    // Launching new screen on Selecting Single ListItem

    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String name = ((TextView) view.findViewById(R.id.name)).getText().toString();

            String cost = ((TextView) view.findViewById(R.id.email)).getText().toString();

            String description = ((TextView) view.findViewById(R.id.mobile)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
            in.putExtra(TAG_VIGNETTE, name);

            in.putExtra(TAG_CONTENT, cost);

            in.putExtra(TAG_VIGNETTE, description);

            startActivity(in);

        }
    });

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-27T11:45:22.357

“正如你所说，没有父级，所以你必须使用 JSONArray，通过它你需要循环并获取所有 JSON 对象。”

```
 try
  {  JSONArray mp3 = new JSONArray(jsonStr);
     JSONObject c = new JSONObject();                          

                    // looping through All 
                    for (int i = 0; i < mp3.length(); i++) 
                    {
                        try
                        {
                            c = mp3.getJSONObject(i);

                            String id = c.getString(TAG_mp3_id); 
                            String title = c.getString(TAG_title);

                            // tmp hashmap for single contact
                HashMap<String, String> contact = new HashMap<String,String>();

                            // adding each child node to HashMap key => value
                            contact.put(TAG_mp3_id, id);
                            contact.put(TAG_title, title);

                            // adding contact to contact list
                            mp3List.add(contact);

                        }    
                        catch (JSONException e) 
                        {
                               e.printStackTrace();
                        }
                    }

                } 
```

“希望对你有帮助。”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T10:11:00.310

解析当前 json String 以从 json Object 获取所有值：

```
JSONArray jArray = new JSONArray("your json String");

for (int i=0; i < jArray.length(); i++)
{
  JSONObject oneObject = jArray.getJSONObject(i);
   // get all value here
   String str_eqid=oneObject.getString("eqid");
   String str_magnitude=oneObject.getString("magnitude");
   String str_lng=oneObject.getString("lng");
   String str_src=oneObject.getString("src");

    // get other values from jsonobject in same way
} 
```

并使用`ArrayList`and`HashMap`存储值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T10:12:23.723

```
JSONArray jsonArray = new JSONArray(YourString);
for(int i = 0; i < jsonArray.length(); i++) {
    JsonObject jsonObject = jsonArray.getJSONObject(i);
    System.out.println(jsonObject.getString("eqid"));
} 
```

# php - 如何制作类似 Facebook 的通知表结构？

> ID：14477028
> 
> 赞同：11
> 
> 时间：2013-01-23T10:07:53.757
> 
> 标签：php, mysql, database, facebook, yii

我正在使用`Yii Framework`和制作像 Facebook 这样的社交应用程序`MySQL`。它在顶部有一个通知按钮，类似于 Facebook。当某人在群组中发帖或您朋友列表中的某人将参加任何活动时，或者如果有人向您发送添加请求，那么我应该如何在数据库中管理这些通知？

喜欢：我加入了一个“A”组。“A”组中的某个人将在该组中发帖，然后应向该组的每个用户发送通知。在这种情况下我该如何管理通知表？

我打算有一个如下表结构：

> 用户 ID | 通知类型 | 通知文本 | 发件人 ID | 创建时间 |

我的做法对吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-23T11:17:32.360

您正在有效地在 MySQL 中构建活动流。[How to implement the activity stream in a social network](https://stackoverflow.com/questions/1443960/how-to-implement-the-activity-stream-in-a-social-network)有一个很好的答案。我自己在一个较小的应用程序中使用过它，但那里的评论表明它也很容易扩展到几百万行。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-23T11:43:38.720

您可以查看 facebook 的 fql 的“通知”表结构，它可以让您更好地了解您的表。

这些可以是您的一些列：

```
id, sender_id,type_of_notification, title_html, body_html, href ,
recipient_id, is_unread, is_hidden, created_time 
```

[请参阅fql 技术指南](https://developers.facebook.com/docs/technical-guides/fql/)中的通知表

# core-data - 如何将 2 个属性从我的 App Store 版本交换到我当前的开发版本？

> ID：14477033
> 
> 赞同：0
> 
> 时间：2013-01-23T10:08:07.953
> 
> 标签：core-data, core-data-migration

如何将 2 个属性从我的 App Store 版本交换到我当前的开发版本？问题是我没有更改数据模型，因此没有数据模型迁移。我尝试添加一个新的数据模型版本（与上一个版本相比没有任何变化），创建一个映射模型和一个自定义实体迁移策略，在 createDestinationInstancesForSourceInstance 中执行此属性交换。它不起作用，因为永远不会调用迁移。经过一些测试，我只在第二个数据模型不同但不相等时才调用它，这就是我想要的。你有什么想法或建议吗？我唯一的想法是创建一个虚拟属性或类似的东西来创建一个不同的数据模型，这将强制启动迁移过程。非常感谢。里卡多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:33:14.433

如果您不更改数据模型，则迁移功能不是您想要的。这就像用大炮向麻雀射击。

只需保留一个用户偏好标志来检查属性是否已更新。或者，您可以通过 fetch 进行检查。

然后只需“手动”更新属性，也许在`applicationFinishedLaunching`.

```
if (needsUpdate) {
   // fetch the concerned entities
   // iterate through fetchedObjects and change the concerned attributes
}
[self.managedObjectContext save:&error]; 
```

`NSManagedObjectContext`为了安全起见，您可以使用s在单独的线程上执行此操作`performBlock:`。

# c# - Linq 查询选择逗号分隔列表

> ID：14477036
> 
> 赞同：1
> 
> 时间：2013-01-23T10:08:17.340
> 
> 标签：c#, algorithm

我有一个对象列表，其中对象具有一个字符串属性，该属性是一个逗号分隔的数字 ID 列表。

提取逗号分隔值并获取 int 数组的最有效方法是什么？

目前我的解决方案是这样的：

```
var allCsvs = objects
    .Select(o => o.IdCsv); // the IdCsv is a string property, ie "1,2,3,4,5"
var allIds = string.Join(",", allCsvs);
var idArray = allIds.Split(new[] { ',' }, StringSplitOptions.RemoveEmptyEntries)
    .Select(id => Convert.ToInt32(id)); 
```

关于如何在这里提高性能的任何想法？

**更新：**

该对象可能如下所示：

```
class MyClass {
    public string IdCsv { get; set; }
} 
```

并且此类的实例可能会将其字符串属性`IdCsv`设置为如下所示：`"1,2,3,4,5"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:24:43.730

尝试这个：

```
internal class Csv
{
    public string CommaSepList { get; set; }
}

var allCsvs =
    new List<Csv>
        {
            new Csv
                {
                    CommaSepList = "1,2,3,4,,5"
                },
            new Csv
                {
                    CommaSepList = "4,5,7,,5,,"
                },
        };

int[] intArray =
    allCsvs
        .SelectMany(c => c.CommaSepList.Split(new[] { ',' }, StringSplitOptions.RemoveEmptyEntries))
        .Select(int.Parse)
        .ToArray(); 
```

或者

```
int[] intArray =
    allCsvs
        .SelectMany(c => c.CommaSepList.Split(new[] { ',' }, StringSplitOptions.RemoveEmptyEntries).Select(int.Parse))
        .ToArray(); 
```

# mysql - 无法创建表。找不到原因

> ID：14477039
> 
> 赞同：0
> 
> 时间：2013-01-23T10:08:20.300
> 
> 标签：mysql

这个 SQL 有什么问题？为什么我不能运行它？

```
CREATE TABLE `test` (

`format_id` VARCHAR NOT NULL ,
bef_aft_flag TINYINT NOT NULL ,
 "order"INT NOT NULL ,
`format_name` VARCHAR( 0 ) NOT NULL ,
`file_path` VARCHAR( 0 ) NOT NULL ,
`create_date` TIMESTAMP NOT NULL ,
`update_dat` TIMESTAMP NOT NULL ,
PRIMARY KEY ( `format_id` )
);

#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'NOT NULL , bef_aft_flag TINYINT NOT NULL , "order"INT NOT NULL , `format_name` ' at line 3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T10:11:14.350

`VARCHAR`需要括号中的字段长度。你需要这个，

```
`format_id` VARCHAR(10) NOT NULL, 
```

但这可能是错误的，请继续阅读。你的代码有很多问题。

1.  从它的名字看，`format_id`似乎 INT 不是字符序列。你的意思是

    format_id INT NOT NULL，

2.  `"order"`MySQL中不支持双引号使用反引号

    ```
    `order` INT NOT NULL, 
    ```

3.  `0`长度 `VARCHAR`，没有意义`format_name`。`file_path`你的意思是？

    ```
    `format_name` VARCHAR( 40 ) NOT NULL,
    `file_path` VARCHAR( 40 ) NOT NULL, 
    ```

4.  你有没有`e`在`update_dat`球场上错过任何东西。看来你根本没有错过`create_date`。

    ```
    `update_date` TIMESTAMP NOT NULL, 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T10:15:00.857

你可以这样使用

```
CREATE TABLE `test` (

`format_id` VARCHAR(255) NOT NULL ,
`bef_aft_flag` TINYINT(3) NOT NULL ,
 `order` INT(11) NOT NULL ,
`format_name` VARCHAR(255) NOT NULL ,
`file_path` VARCHAR(255) NOT NULL ,
`create_date` TIMESTAMP NOT NULL ,
`update_dat` TIMESTAMP NOT NULL ,
PRIMARY KEY ( `format_id` )
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T10:12:39.807

```
 "order"INT NOT NULL , 
```

您不能在 mySQL 中使用引号作为字段标识符。使用反引号：

```
`order` INT NOT NULL, 
```

但是请注意，这`order`是 mySQL 中的保留字。您将能够创建该字段，但您必须始终将术语包含在反引号中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T10:23:18.903

```
CREATE TABLE `test` (
`format_id` VARCHAR(20) NOT NULL  ,
bef_aft_flag TINYINT NOT NULL ,
 `order` INT NOT NULL ,
`format_name` VARCHAR(0) NOT NULL ,
`file_path` VARCHAR(0) NOT NULL ,
`create_date` TIMESTAMP NOT NULL ,
`update_dat` TIMESTAMP NOT NULL ,
PRIMARY KEY ( `format_id` )
); 
```

# python - 如何在模块路径中导入标准库而不是同名模块

> ID：14477040
> 
> 赞同：5
> 
> 时间：2013-01-23T10:08:23.333
> 
> 标签：python, import, python-2.7, naming-conventions

我有以下目录结构

```
main_code.py
libs/
    __init__.py
    mylib.py
    time.py 
```

只需`main_code.py`导入`mylib`：

```
from libs import mylib 
```

并且`mylib.py`只是导入`time`：

```
import time
print time 
```

现在事实证明是`mylib.py`导入`libs/time.py`而*不是*内置标准库`time`。有没有办法获得“正常”行为，即`mylib.py`导入内置标准`time`库*而不*改变`time.py`？无论如何，这是“正常”行为吗？我必须重命名`time.py`吗？在该问题上是否有任何样式指南建议超过 PEP8？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T10:11:47.640

在顶部添加`mylib.py`：

```
from __future__ import absolute_import 
```

请参阅[绝对进口的基本原理](http://www.python.org/dev/peps/pep-0328/#rationale-for-absolute-imports)。

# php - Magento Widget 未出现在时事通讯中

> ID：14477046
> 
> 赞同：0
> 
> 时间：2013-01-23T10:08:46.927
> 
> 标签：php, magento, widget, newsletter

在处理时事通讯时，我在 Magento CE 1.7 上遇到了麻烦。

我试图在我的时事通讯模板中放置一个小部件，但不幸的是，在呈现预览或接收电子邮件时它没有显示。

时事通讯模板是否支持小部件？我有问题吗，它取决于配置还是其他？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:18:06.787

把它放在你的模板中：

```
<?php
 $filter = new Mage_Widget_Model_Template_Filter();
 $_widget = $filter->filter('{{widget type="cms/widget_page_link" template="cms/widget/link/link_block.phtml" page_id="2"}}');
echo $_widget;
?> 
```

# ios - 如果无法播放，则在 UIWebView 中隐藏 HTML5 视频

> ID：14477049
> 
> 赞同：2
> 
> 时间：2013-01-23T10:09:03.393
> 
> 标签：ios, objective-c, uiwebview, html5-video

我有一个包含 HTML5 视频的 UIWebView。`SRC`视频是动态的，并使用 HTTP Live Streaming 。如果由于某种原因无法播放视频，则会向用户显示“play-with-a-slash-though-it”图标，表示该视频无法播放。我想通过隐藏视频播放器并向用户显示消息来处理这种情况。是否有任何我可以订阅的回调可以让我实现这一目标？

**更新**

感谢codeghost的回答，我能够解决我的问题。但是，我认为对于未来的读者来说，看一个代码示例会很有用：

```
<html>
    <body>
        <video id='video' width='640' height='480' controls='controls' preload='none' autoplay='autoplay'>
            <source src='http://some.video.com'/>
            Your browser does not support the video tag.
        </video>

        <script type='text/javascript'>
            var video = document.getElementById('video')
            video.addEventListener('error', function(event) { 
                if(event.type == "error")
                {
                    alert("There was an error getting the video.");
                }
            }, true);

        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:17:19.127

您可以通过在视频标签上添加错误事件的 javascript 处理程序在网页中执行此操作。

# axapta - 手动添加过滤器时如何保持表单数据源的范围？

> ID：14477062
> 
> 赞同：3
> 
> 时间：2013-01-23T10:09:49.757
> 
> 标签：axapta, x++, ax, range

我在表单上有一个奇怪的问题：我在数据源 executeQuery() 方法中添加了一个范围来过滤记录，这在打开表单时工作正常，但是如果我在网格标题中手动设置一个过滤器，在 ExecuteQuery() 方法中设置的范围不是应用。我的范围定义如下：

```
this.query.dataSourceNo(1).AddRange(fieldnum(MyTable,MyField)).Value('MyRangeValue'); 
```

我使用视图作为表单数据源，可能是问题所在。即使在网格上手动添加过滤器，任何想法都可以始终应用范围并保留它？谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T11:13:08.240

`super()`您必须在in之前应用过滤器`executeQuery()`。

但我认为你的问题是每次`executeQuery()`运行时都添加过滤器，导致生成的 SQL 表达式中出现 OR。

这是这样做的方法：

```
QueryBuildRange qr = SysQuery::findOrCreateRange(this.query.dataSourceNo(1), fieldnum(MyTable,MyField));
qr.value(queryValue('MyRangeValue'));
qr.status(RangeStatus::Locked); // Or ::Hidden 
```

# android - 姜饼上的 Youtube API ActivityNotFoundException

> ID：14477067
> 
> 赞同：7
> 
> 时间：2013-01-23T10:10:03.067
> 
> 标签：android, youtube-api

当我尝试在姜饼上运行 youtube api StandAlonePlayerActivity 时出现 ActivityNotFoundException 错误。因为它在 ICS 上运行良好

这是我的原木猫

```
01-23 15:34:28.071: E/AndroidRuntime(3378): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.google.android.youtube.api.StandalonePlayerActivity.START (has extras) }
01-23 15:34:28.071: E/AndroidRuntime(3378):     at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1545)
01-23 15:34:28.071: E/AndroidRuntime(3378):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1515)
01-23 15:34:28.071: E/AndroidRuntime(3378):     at android.app.Activity.startActivityForResult(Activity.java:2988)
01-23 15:34:28.071: E/AndroidRuntime(3378):     at android.support.v4.app.FragmentActivity.startActivityFromFragment(FragmentActivity.java:701)
01-23 15:34:28.071: E/AndroidRuntime(3378):     at android.support.v4.app.Fragment.startActivity(Fragment.java:787)
01-23 15:34:28.071: E/AndroidRuntime(3378):     at com.example.demo.TipsFragment$2.onClick(TipsFragment.java:143)
01-23 15:34:28.071: E/AndroidRuntime(3378):     at android.view.View.performClick(View.java:2533)
01-23 15:34:28.071: E/AndroidRuntime(3378):     at android.view.View$PerformClick.run(View.java:9320)
01-23 15:34:28.071: E/AndroidRuntime(3378):     at android.os.Handler.handleCallback(Handler.java:587)
01-23 15:34:28.071: E/AndroidRuntime(3378):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-23 15:34:28.071: E/AndroidRuntime(3378):     at android.os.Looper.loop(Looper.java:150)
01-23 15:34:28.071: E/AndroidRuntime(3378):     at android.app.ActivityThread.main(ActivityThread.java:4389)
01-23 15:34:28.071: E/AndroidRuntime(3378):     at java.lang.reflect.Method.invokeNative(Native Method)
01-23 15:34:28.071: E/AndroidRuntime(3378):     at java.lang.reflect.Method.invoke(Method.java:507)
01-23 15:34:28.071: E/AndroidRuntime(3378):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
01-23 15:34:28.071: E/AndroidRuntime(3378):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
01-23 15:34:28.071: E/AndroidRuntime(3378):     at dalvik.system.NativeStart.main(Native Method) 
```

这是我用来启动 Player 的代码

```
String vid=getYoutubeVideoId(vlink);
Intent intent=YouTubeStandalonePlayer.createVideoIntent(getActivity(),DEVELOPER_KEY, vid, 0,true,false);
startActivity(intent); 
```

我收到错误`startActivity`

这是 getYoutubeVideoID() 代码：

```
/*
     * Getting id of video from url
     */
    public static String getYoutubeVideoId(String youtubeUrl)
    {
        String video_id="";
        if (youtubeUrl != null && youtubeUrl.trim().length() > 0 && youtubeUrl.startsWith("http"))
        {

            String expression = "^.*((youtu.be"+ "\\/)" + "|(v\\/)|(\\/u\\/w\\/)|(embed\\/)|(watch\\?))\\??v?=?([^#\\&\\?]*).*"; // var regExp = /^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/;
            CharSequence input = youtubeUrl;
            Pattern pattern = Pattern.compile(expression,Pattern.CASE_INSENSITIVE);
            Matcher matcher = pattern.matcher(input);
            if (matcher.matches())
            {
                String groupIndex1 = matcher.group(7);
                if(groupIndex1!=null && groupIndex1.length()==11)
                    video_id = groupIndex1;
            }
        }
        return video_id;
    } 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-23T10:50:03.970

首先检查您的设备上是否可以使用 youtube 服务，然后尝试启动该活动。 `YouTubeApiServiceUtil.isYouTubeApiServiceAvailable(mContext)`. 还可以尝试从 Google Play 安装 youtube 应用。

文档中的小注释： `Note: Users need to run version 4.2.16 of the mobile YouTube app (or higher) to use the API.`

编辑：这是你如何使用它：

```
if(YouTubeApiServiceUtil.isYouTubeApiServiceAvailable(mContext).equals(YouTubeInitializationResult.SUCCESS)){
   //This means that your device has the Youtube API Service (the app) and you are safe to launch it. 

}else{
   // Log the outcome, take necessary measure, like playing the video in webview :)  
} 
```

请参阅`YouTubeInitializationResult`此处的枚举[https://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/YouTubeInitializationResult](https://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/YouTubeInitializationResult)

还有关于上述课程的哲学： [https ://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/YouTubeApiServiceUtil](https://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/YouTubeApiServiceUtil)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:02:03.960

设备应安装最新的 YouTube 应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-15T16:38:25.477

你必须在你的设备上安装 YouTube Android 应用程序，它对我有用！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T10:28:28.583

为了使用android 的[**YouTube api**](https://developers.google.com/youtube/android/player/downloads/)，您需要 3 个参数

1) YouTube[**开发者密钥**](https://developers.google.com/youtube/2.0/developers_guide_protocol)

2)视频ID

3）最新的官方[**YouTube Android App**](https://play.google.com/store/apps/details?id=com.google.android.youtube&hl=en)（4.2.16版）

通过查看您的日志猫，我认为其中一个丢失了

[**参考**](https://stackoverflow.com/questions/14229708/is-android-youtube-api-using-official-youtube-app-for-playing-video)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T10:14:13.767

您是否在模拟器上运行该应用程序？它可能无法在模拟器上运行，因为默认情况下未安装 youtube 播放器。尝试在实际设备上运行它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-23T12:52:01.647

我会建议对@Nikola 的回答进行一些改进。可以显示本地化对话框[getErrorDialog()](https://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/YouTubeInitializationResult#public-dialog-geterrordialog-activity-activity-int-requestcode)来处理一些用户可恢复的错误[isUserRecoverableError](https://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/YouTubeInitializationResult#isUserRecoverableError())。例如，当 YouTube 应用在“设置”中被禁用时。

```
val result = YouTubeApiServiceUtil.isYouTubeApiServiceAvailable(context)
when {
    result == YouTubeInitializationResult.SUCCESS -> startYouTubeActivity()
    result.isUserRecoverableError -> result.getErrorDialog(activity, 0).show()
    else -> toast("Something went wrong!")
} 
```

# liferay - 嵌入 Social Office 主题的 Portlet

> ID：14477068
> 
> 赞同：1
> 
> 时间：2013-01-23T10:10:04.693
> 
> 标签：liferay, liferay-6

我正在使用 liferay 门户 6.1.1CE。

我想在 SO 网站主页的侧边栏上显示用户的个人资料图片（不是公共或私人的，因为它们已经包含此功能）。

为此，我经历了很多想法，比如将图像 url 放入 portal-normal.vm 文件的侧栏 div 中。但缺少 url 错误。

下一个是使用配置文件 portlet。我已经通过 $theme.runtime("--------PORTLET ID----"); 在边栏中包含了 portlet。但是“此 portlet 已取消部署。请重新部署它或将其从页面中删除。”

显示在侧栏的相应位置。

帮我？可能吗？或任何其他方式？

# android - 通过点击在地图上只显示一次drawable

> ID：14477069
> 
> 赞同：0
> 
> 时间：2013-01-23T10:10:05.143
> 
> 标签：android, google-maps

通过类 Overlay 并从该类调用 onTap 方法，我可以在我的地图上显示可绘制对象。我想要做的只是在用户点击地图（第一次点击）时显示一个drawable，而不是通过点击在不同的地方一次又一次地显示drawable。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:22:35.327

```
override you onTap() method of Overlay

    @Override
    protected boolean onTap(int index) {
         Drawable srcdrawable = getApplicationContext().getResources().getDrawable(R.drawable.pin_blue);
    CustomItemizedOverlay srcitemizedOverlay = new CustomItemizedOverlay(srcdrawable, getApplicationContext());
    forloop(setoflocations){
    GeoPoint srcpoint = new GeoPoint((int)( Double.parseDouble(lat) * 1E6),(int)( //latitude and longitude of user tapped location...
Double.parseDouble(lng)* 1E6));
    OverlayItem srcoverlayitem = new OverlayItem(srcpoint, "Hello!", "This is your Location.");
    if(srcitemizedOverlay!=null && mapController!=null){
    srcitemizedOverlay.addOverlay(overlayitem);
    mapController.animateTo(point);
    animatePoint = point;
    }
    }
    mapView.getOverlays().clear();
    mapView.getOverlays().add(srcitemizedOverlay);

   // pop up a alert dialog here and ask user for confirmation

    } 
```

# yii - Yii 框架，链接不重定向到服务器

> ID：14477072
> 
> 赞同：-1
> 
> 时间：2013-01-23T10:10:20.070
> 
> 标签：yii

Yii Link 有问题。我的应用程序在 localhost 中运行良好，但我已将其移至服务器。服务器中的所有链接都重定向到本地主机。在这种情况下有人可以帮助我吗？我是否必须在配置文件中添加更多内容。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:59:18.937

你`CHtml::link()`是用来创建链接的吗？如果你已经为 url 这样做了，你是否提供了一个数组，如下所示：

```
array('Controller/Action', 'param'=>value) 
```

例子：

```
array('post/list', 'page'=>3) 
```

最后您将获得：

```
CHtml::link("your text link", array('post/list', 'page'=>3)); 
```

（我问它是因为如果您已经编写了每个链接，那么每个链接都重定向到本地主机是正常的！）

# jquery - JQuery 1.7.2 焦点事件总是在同一选择器上的模糊事件之前弹出

> ID：14477073
> 
> 赞同：2
> 
> 时间：2013-01-23T10:10:20.167
> 
> 标签：jquery, jquery-1.7

我编写了一些代码来限制我选择的某些元素的选项卡导航。您可以在这里看到完整的代码：http: [//jsfiddle.net/M2ELL/2/](http://jsfiddle.net/M2ELL/2/)它工作正常。

问题是我想“装饰”焦点所在的父 div。为此，我制作了这些事件监听器：

```
$('[data-mymodaltabindex]').blur(function () {        
   $(this).parent().removeClass('highlight');
   console.log('blur ' + $(this));
});

$('[data-mymodaltabindex]').focus(function () {
   $(this).parent().addClass('highlight');
   console.log('highlight ' + $(this));
}); 
```

当每个父 div 只有一个输入时，这些会按预期工作。另一方面，当每个父 div 有两个输入时（如我的示例中的两个收音机），焦点事件总是发生在模糊事件之前。结果是突出显示然后删除 div 上的突出显示，这与我想要的相反。

我希望模糊事件发生在导致删除突出显示然后突出显示之前。我怎样才能做到这一点？为什么在这种情况下焦点事件总是发生在模糊事件之前？

完整代码：

```
<div>
    radio 1
    <input type="radio" data-mymodaltabindex="1" />
    radio 2
    <input type="radio" data-mymodaltabindex="2" />
</div>
<div>
    text
    <input type="text" data-mymodaltabindex="3" />
</div>

$('[data-mymodaltabindex]').on('keydown', function (e) {
    if (e.keyCode == 9 || e.which == 9) {
        // define variables
        var mytabindex = null;
        var maximum = null;
        var minimum = null;
        var next = null;
        var previous = null;
        var values = new Array();
        // set mytabindex on the actual focused control
        var mytabindex = $(this).attr('data-mymodaltabindex');
        // put every visible mytabindex into array
        $('[data-mymodaltabindex]:visible').each(function () {
            values.push(parseInt($(this).attr('data-mymodaltabindex')));
        });
        //console.log(values);
        // look for maximum minimum mytabindex 
        // for maximum and minimum we filter out null values 
        // as they are interpreted as 0 with math functions
        maximum = Math.max.apply(null, values.filter(function (val) { return val !== null }));
        minimum = Math.min.apply(null, values.filter(function (val) { return val !== null }));
        // set next and previous using function
        next = getModalClosestHighValue(values, mytabindex);
        previous = getModalClosestLowValue(values, mytabindex);
        // go back to begining / end if 
        // end / begining is reached
        if (!previous) { previous = maximum; }
        if (!next) { next = minimum; }
        // check if there is shift combination
        if (e.shiftKey) {
            mytabindex = previous; // focus on the previous item
        } else {
            mytabindex = next; // focus on the next item
        }
        // focus on this element
        $('[data-mymodaltabindex=' + mytabindex + ']').focus();
        console.log('focus set to [data-mymodaltabindex=' + mytabindex + ']');
        // stop propagation
        return false;
    }
});

function getModalClosestHighValue(a, x) {
    var hi;
    for (var i = a.length; i--; ) {
        if (a[i] > x && (hi === undefined || hi > a[i])) hi = a[i];
    };
    return hi;
}

function getModalClosestLowValue(a, x) {
    var lo;
    for (var i = a.length; i--; ) {
        if (a[i] < x && (lo === undefined || lo < a[i])) lo = a[i];
    };
    return lo;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:13:38.447

事实证明，这是一些 jQuery 版本的错误，可以通过使用 jQuery 1.9 来解决。

适用于 1.9：http: [//jsfiddle.net/7mfLb/](http://jsfiddle.net/7mfLb/)

不适用于 1.8.3：http: [//jsfiddle.net/dHwE5/](http://jsfiddle.net/dHwE5/)

* * *

如果你想让它与 1.7.2 一起工作，那么我建议你这个解决方法：

```
$('[data-mymodaltabindex]').on('blur focus', function() {
   var $p = $(this).parent();
   $p.removeClass('highlight');
   setTimeout(function() {
      $('div :has(:focus)', $p.parent()).addClass('highlight');
   }, 0);
}); 
```

[示范](http://jsfiddle.net/qkJcS/)

# java - 无法使用@Value 注释启动变量，spring

> ID：14477078
> 
> 赞同：1
> 
> 时间：2013-01-23T10:10:40.857
> 
> 标签：java, spring, spring-mvc

我的流程类：

```
@Configurable("checkLicense")
public class CheckLicense {
String licensePath ;

@Value("${licenseKeyNotFound}")
String licenseKeyNotFound;

    public boolean checkIn(String licensepath) {
        System.out.println("hello "+licenseKeyNotFound);
        licensePath = licensepath;
        return checkIn();
    }

} 
```

我的 ApplicationContext.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
     http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
     http://www.springframework.org/schema/context
     http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <bean class="com.smart.applicationlicense.CheckLicense"
        scope="prototype">
    </bean>
</beans> 
```

这是我的属性文件。

```
licenseKeyNotFound = License File Corrupted 
```

这是我的 servlet xml。

```
<context:property-placeholder location="conf/LicenseSettings.properties"
    order="2" ignore-unresolvable="true" /> 
```

尽管我使用了`@Configurable`注释和属性`Autowire.BY_NAME, Autowire.BY_TYPE`，但我无法`licenseKeyNotFound`从属性文件中启动变量。
我能够从控制器启动变量，但不能从声明的此类启动`@Configurable`。

谁能让我知道我缺少什么或我的代码有什么问题？
请让我知道我的代码是否需要某些内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:50:02.490

尝试这个：

在你的春天 xml 中：

```
<context:property-placeholder location="classpath:your.properties" />
<context:load-time-weaver /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:19:00.637

尝试这个

```
@Configurable
public class CheckLicense {
   String licensePath;
   String licenseKeyNotFound;

   @Value("${licenseKeyNotFound}")   
   public void setLicenseKeyNotFound(String licenseKeyNotFound) {
      this.licenseKeyNotFound = licenseKeyNotFound;
   }

   public boolean checkIn(String licensepath) {
      System.out.println("hello " + licenseKeyNotFound);
      licensePath = licensepath;
      return checkIn();
   }
} 
```

在您的属性文件中

```
licenseKeyNotFound=${value} 
```

# c# - Silverlight 5 和 VertexBuffer.GetData()

> ID：14477080
> 
> 赞同：5
> 
> 时间：2013-01-23T10:10:45.233
> 
> 标签：c#, silverlight, silverlight-5.0, xna-4.0

我正在尝试在 silverlight 5 中实现 3d 模型碰撞。为此，我正在创建一个 BoundingBox（就像在 XNA4.0 中一样）：

我在此链接中看到了相同的问题[VertexBuffer.GetData() 和 Silverlight 5](https://stackoverflow.com/questions/11224771/vertexbuffer-getdata-and-silverlight-5)，但没有找到答案。

```
 public BoundingBox GetBoundingBoxFromModel(Model model)
    {            
        BoundingBox boundingBox = new BoundingBox();

            foreach (ModelMeshPart part in model.Meshes[0].MeshParts)
            {
                VertexPositionNormalTexture[] vertices = new VertexPositionNormalTexture[part.NumVertices];
                Vector3[] vertexs = new Vector3[vertices.Length];

                part.VertexBuffer.GetData<VertexPositionNormalTexture>(vertices);                    

                for (int index = 0; index < vertexs.Length; index++)
                {
                    vertexs[index] = vertices[index].Position;
                }

                boundingBox = BoundingBox.CreateMerged(boundingBox, BoundingBox.CreateFromPoints(vertexs));
            }            
        return boundingBox;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:15:18.370

出于安全原因，Microsoft 拒绝访问 GPU。所以他们有暂停 GetData() 方法。要在 Silverlight 5 中解决此问题，您可以编写自定义内容管道来加载对象并尝试读取顶点数据，它可以解决您的问题。

# facebook-graph-api - 在他们的白名单上阅读没有应用程序的 Facebook 广告统计信息？

> ID：14477081
> 
> 赞同：0
> 
> 时间：2013-01-23T10:10:47.533
> 
> 标签：facebook-graph-api, facebook-c#-sdk

我需要从 Facebook 下载广告统计信息。我使用 .NET 库[Facebook C# SDK](http://csharpsdk.org/)，但我完成了 *(294) 管理广告需要扩展权限 ads_management 和参与的 API 密钥*。

我已经设置了 *ads_management* 权限，但我读到我必须在应用程序白名单上——我不是。这是否真的意味着我现在必须等待 2 或 3 周，直到 Facebook 决定将我的应用程序（尚不存在！）放在某个白名单上？没有应用程序就没有其他方法可以读取统计信息吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:23:57.677

是的，你的假设是正确的！对 Ads-API 的访问受到 Facebook 的 PMD 程序的严格限制：

[https://developers.facebook.com/docs/reference/ads-api/](https://developers.facebook.com/docs/reference/ads-api/) https://developers.facebook.com/preferredmarketingdevelopers/ads-api-access/

# extjs - 定义组合框时出错

> ID：14477087
> 
> 赞同：0
> 
> 时间：2013-01-23T10:11:09.313
> 
> 标签：extjs

我使用 extjs mvc 并定义了组合框

```
Ext.define('Ext.view.Common.PersonageComboBox', {
    extend: 'Ext.form.ComboBox',
    alias: 'widget.PersonageComboBox',
    minChars: 0,
    store: 'PersonageStore',
    style: 'float: right;',
    valueField: 'Id',
    displayField: 'Title',
    typeAhead: true,
    hideLabel: false,
    hideTrigger: true,
    width: 300,
    queryMode: 'server',
    listConfig: {
        loadingText: 'درحال جستجو',
        getInnerTpl: function () {
            return '{Title} - {Type}<br />';
            }
        }
}); 
```

在控制器中我定义

```
extend: 'Ext.app.Controller',
requires: ['Profiler.resource.Icon', 'Profiler.resource.Size'],
stores: ['PhoneTypeStore',
    'PhoneStore',
    'EmailStore',
    'SettingStore',
    'AgentStore',
    'PersonageStore'],
models: [
    'PhoneInfo',
    'PhoneTypeInfo',
    'EmailInfo',
    'SettingInfo'],
views: [
    'Common.PersonageComboBox',
    'Personage.PhoneGrid',
    'Personage.PhoneAssignment',
    'Personage.EmailGrid',
    'Personage.Settings',
    'Personage.AgentGrid'
],
refs: [{
    ref: 'phone',
    selector: 'PhoneList'
}, {
    ref: 'PhoneAssignment',
    selector: 'PhoneAssignment'
}, {
    ref: 'EmailList',
    selector: 'EmailList'
}], 
```

这是我的模型

```
Ext.define('Profiler.model.PersonageInfo', {
    extend: 'Ext.data.Model',
    fields: [{ name: 'Id', type: 'int' },
        'Title', 'Type'],
}); 
```

但我的页面是白色的并且没有错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:31:29.653

> Ext.define('Ext.view.Common.PersonageComboBox', { ...

PersonageComboBox.js 文件在哪个目录中？

# ssis - 如何在多次查找之间重用缓存

> ID：14477088
> 
> 赞同：0
> 
> 时间：2013-01-23T10:11:13.390
> 
> 标签：ssis

我有一个 SSIS2008 包，它以增量方式加载具有 10M 记录的表 Clients 和具有 6M 记录的表 ClientRelations。客户关系是两个客户之间的关系。

在 RelatedClientsETL 数据流中，我从平面文件源获取关系，并在同一个 Clients 表上进行 2 次查找。

在这里使用缓存连接管理器会更好，还是应该在两个查找中都使用部分缓存查找选项？还是您建议另一种选择？

执行此包的生产 SQL Server 的内存 = 8GB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:27:53.517

通常最好`Full Cache mode`在查找中使用，因为这会减少`database load`，从而减少`hits`数据库上的数量。由于您有足够的内存来保存数据，我建议您应该使用完整缓存。SSIS 使用一个`buffer-oriented architecture`来有效地加载和操作数据集因此，在`memory`这种模式下查找往往更快。

`Partial cache mode`通常避免使用，[也不是更好的选择](http://blogs.msdn.com/b/mattm/archive/2008/10/18/lookup-cache-modes.aspx)。仅在要处理的行数较少的情况下才有用。仅在找到匹配项时才缓存数据。没有像这种情况那样执行预执行缓存`Full Cache`所以加载时间很快，但对数据库的点击次数更多。

`CCM`( `Cache Connection Manager`) 当您想重新使用缓存来减少时使用（），`database load`但是您需要再次通过使用`OleDB connection vs CCM` in lookup 自己测试它。

有一个免费的工具[bidshelper](http://bidshelper.codeplex.com/)将帮助您监控单个任务的性能，否则尝试隔离您的目标和除查找和源之外的其他组件。用 RowCount 转换替换目标，并通过检查（时间、行数）的执行结果选项卡来衡量性能`Full Cache`。`CCM`

有一份[白皮书](http://technet.microsoft.com/library/Cc966529)很好地解释了 SSIS 的整体性能

# c - 只有类型化的联合才能解决 C 中这种类型的数组数据声明吗？

> ID：14477091
> 
> 赞同：4
> 
> 时间：2013-01-23T10:11:30.123
> 
> 标签：c, arrays, data-structures, initialization, unions

我试图想出一种方法来声明几个数据结构，这些数据结构是结构数组，其中每个后续数组都使用先前数组的一部分。减少重复的方法。这样每个元素只声明一次。

所以从概念上讲，想象这四个数组，其中出现在两个数组中的给定元素编号意味着表示实际相同的事物，而不仅仅是具有相同值的另一个。

```
some_type group_A[] = {
    elt0, elt1, elt2, elt3, NULL
};

some_type group_B[] = {
    elt0, elt1, elt2, elt3,  // those are all A's
    elt4, elt5, NULL         // these are new to B
};

some_type group_C[] = {
    elt0, elt1, elt2, elt3,  // those are all A's
    elt6, elt7, elt8, NULL   // these are new to C
};

some_type group_D[] = {
    elt0, elt1, elt2, elt3, elt4, elt5, // those are all B's
    elt9, elt10, elt11, NULL            // these are new to D
}; 
```

您可以假设它`some_type`已经是某种结构的 typedef。

我想做的是消除多余的声明，因为它们总体上看起来不整洁，而且它们让你可以更新不连贯性。这是更紧凑的表示，其中组中的条目可以是普通元素，也可以是对此类元素的另一个数组的引用。

（你可以通过最后的 NULL 指针推断出每个数组声明每个元素实际上是指向相同类型结构的指针是正确的。）

```
some_type group_A[] = {
    elt0, elt1, elt2, elt3, NULL
};

some_type group_B[] = {
    Group_A, elt4, elt5, NULL
};

some_type group_C[] = {
    Group_A, elt6, elt7, elt8, NULL
};

some_type group_D[] = {
    Group_B, elt9, elt10, elt11, NULL
}; 
```

换句话说，我想要一种方法来声明 Group_B 和 Group_C 都以 Group_A 中的所有内容开头，但之后有它们的元素，并且 Group_D 包含 Group_B 中的所有内容（本身又包括 Group_A 中的所有内容），然后添加自己的元素。

我希望这是声明性的，只是一堆数组数据声明，发生在编译时而不是运行时一堆数据结构构建代码。

这将被禁止递归，至少在实践中和运行时是这样。

是否有一个很好的、声明性的、看起来像数组的实现，或者我必须恢复到一些更复杂的动态数据结构实现，这些实现并不是在编译时以我喜欢的方式全部固定？

我的直觉是，某种标记的工会可能是唯一的出路。

```
struct pointer_or_doublepointer {
    int  which_kind;   // 0 == .element is valid; 1 == .table is valid
    union {
        real_type *  element; // valid only when which_kind == 0
        real_type ** table;   // valid only when which_kind == 1
    };
} 
```

然后我会`some_type`为`pointer_or_doublepointer`.

这真的是设置这样的东西的最佳方法，还是想到其他更好、更直接的解决方案？再次记住，这一切都应该通过数据声明来完成，而不是通过代码。

这是纯 C 语言，而不是 C++ 或其他变体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:51:20.960

像这样的东西对你有用吗？

```
#define GROUPA elt0, elt1, elt2, elt3
#define GROUPB GROUPA, elt4, elt5
#define GROUPC GROUPA, elt6, elt7, elt8
#define GROUPD GROUPB, elt9, elt10, elt11

some_type group_A[] = {
    GROUPA, NULL
};

some_type group_B[] = {
    GROUPB, NULL
};

some_type group_C[] = {
    GROUPC, NULL
};

some_type group_D[] = {
    GROUPD, NULL
};

#undef GROUPA
#undef GROUPB
#undef GROUPC
#undef GROUPD 
```

我认为这是使用宏来避免代码重复而不牺牲代码清晰度的完美案例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T10:45:13.167

由于您说对其他数组的引用只会出现在开头，因此表示这一点的一种简单方法是将此引用与其余元素分开保存：

```
struct ElementList {
    struct ElementList *prefix; //Reference to elements of another array, or NULL
    some_type *elements;        //additional elements
}; 
```

这比`union`解决方案更受限制，但可能更易于使用。

# arrays - 对象数组：想要访问一个属性，但我得到“尝试在...中获取非对象的属性”

> ID：14477093
> 
> 赞同：0
> 
> 时间：2013-01-23T10:11:42.397
> 
> 标签：arrays, object, pdo, php

从我的数据库中，我只得到一个结果。尽管如此，我还是因为这段代码而返回了一个数组

```
while($obj = $stmt->fetch(PDO::FETCH_OBJ)){
    $result[] = $obj;
} 
```

返回的数组在索引 0 处只有一个元素（对象）。我想从这个对象访问一个属性。

我的代码如下所示：

`return $result[0]->_id;`

我收到通知

> 试图在...中获取非对象的属性

这是我的转储：

`var_dump`

```
array(1) { [0]=> object(stdClass)#4 (13) { ["_id"]=> string(8) "43001613" ["another-property"]=> string(5) "20608" } } 
```

`print_r`

```
Array
(
    [0] => stdClass Object
        (
            [_id] => 43001613
            [another-property] => 20608
        )

) 
```

这肯定只是一个小错误，但我现在无法弄清楚。

**编辑：** 这是完整的功能：

```
public function getOrtIDForPLZ($plz){
    $sql = "SELECT * FROM verortung WHERE plz = :plz LIMIT 1;";
    $result = $this->ExecuteQuery($sql, array("plz"=>$plz));

    var_dump($result);
    echo '<pre>';
    print_r($result);
    echo '</pre>';

    return $result[0]->_id;
} 
```

输出：

```
array(1) { [0]=> object(stdClass)#32 (13) { ["_id"]=> string(8) "43006637" ["gemeindekennziffer"]=> string(5) "32330" ["gemeindename"]=> string(13) "Theresienfeld" ["ortsname"]=> string(13) "Theresienfeld" ["plz"]=> string(4) "2604" ["bezirk"]=> string(21) "Wiener Neustadt -Land" ["bundesland"]=> string(17) "Niederösterreich" ["lat"]=> string(11) "47.85000000" ["lon"]=> string(11) "16.23333330" ["einwohner_2001"]=> string(4) "2490" ["kfz-kennzeichen"]=> string(2) "WB" ["fläche_km2"]=> string(5) "11.44" ["seehöhe"]=> string(3) "282" } }

Array
(
    [0] => stdClass Object
        (
            [_id] => 43006637
            [gemeindekennziffer] => 32330
            [gemeindename] => Theresienfeld
            [ortsname] => Theresienfeld
            [plz] => 2604
            [bezirk] => Wiener Neustadt -Land
            [bundesland] => Niederösterreich
            [lat] => 47.85000000
            [lon] => 16.23333330
            [einwohner_2001] => 2490
            [kfz-kennzeichen] => WB
            [fläche_km2] => 11.44
            [seehöhe] => 282
        )

)

NULL 
```

注意：尝试在第 4507 行的 /home/www/home/includes/class.DatabaseQuery.php 中获取非对象的属性

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:28:08.020

您可能多次调用此方法。在第一次通话中一切都很好，但在下一个...

看到了`NULL`吗？当然，您无法获得`NULL`.

如果不是这种情况，则第 4507 行指向其他地方。

# html - 在 `UITextfield` 中显示 HTML 代码中的文本

> ID：14477104
> 
> 赞同：0
> 
> 时间：2013-01-23T10:12:08.250
> 
> 标签：html, ios, objective-c, cocoa-touch

我有这个来自 IB 的接口。正如您在“详细信息”中看到的，`UITextfield`其中有很多 HTML 代码。

![表视图](../Images/73d8f54c4d4c526be9a3c02da4917d84.png)

我后面有一个 PHP 服务器，所以我也可以在后端创建它。执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:20:23.817

您可以使用以下方法将 HTML 转换为字符串：

```
 NSRange range;
  NSString *string;
  while ((range = [string rangeOfString:@"<[^>]+>" options:NSRegularExpressionSearch]).location != NSNotFound){
    string=[string stringByReplacingCharactersInRange:range withString:@""];
  }
  NSLog(@"Un block string : %@",string); 
```

**但是如果您的文本包含一些 <> 它将被删除**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:39:47.367

您应该使用解析器来解析 html，即使它只是一个小片段。AKV 建议使用 RegEx，但很难找到正确的 RegEx，[另请参见此处](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)。ie`<a href="foo" title="5>3">`是会混淆 AKV 正则表达式的有效 html。

iOS有一个可以使用的板载C-lib，libXML2，但实际上你应该使用一些包装器，我认为[Objective-C-HMTL-Parser](https://github.com/zootreeves/Objective-C-HMTL-Parser)既简单又很棒。

你会像这样使用它

```
HTMLParser *parser = [[HTMLParser alloc] initWithString:html error:&error];
HTMLNode *bodyNode = [parser body];
NSString *string = [bodyNode allContents]; 
```

由于 HTMLNode 可以包含其他 HTMLNode 作为子节点，因此您也可以使用该信息进行文本格式化。

* * *

如果这是一个选项，还有用于将 HTML 解析为 NSAttributedStrings的出色[DTCoreText](https://github.com/Cocoanetics/DTCoreText)项目

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T14:50:57.393

将其显示在具有透明背景的 UIWebView 中，这样您的所有 HTML 标记仍然可以正常工作。只需使 UIWebView 与您的 UITextView 大小相同并将其放在同一个位置！

当您将 HTML 字符串加载到 webView 中时，请使用此代码作为透明背景。

```
finalhtmlstring = [NSString stringWithFormat:@"<html><head></head><body style='background-color:transparent;'>%@</body></html>",htmlstring];
[myWebView loadHTMLString:finalhtmlstring baseURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] bundlePath]]]; 
```

并确保您（在 xib 文件中）将 webView 的背景本身设置为 0% alpha 并切换“不透明”框...

最后不要忘记在您的 xib 文件中设置委托并将其添加`<UIWebViewDelegate>`到您的 .h 文件中。

# .net - 标记装配体

> ID：14477105
> 
> 赞同：0
> 
> 时间：2013-01-23T10:12:08.997
> 
> 标签：.net, reflection, .net-assembly

我正在尝试制作一个多租户 mvc 网站，其中可以为每个租户覆盖视图。

我正在使用[RazorGenerator](http://razorgenerator.codeplex.com/)以便能够从已编译的程序集中加载视图（进行一些修改以允许多个程序集）。

所以现在我需要有一种方法来识别包含视图的 bin 中的 Dll。目前我只是创建一个虚拟类（`Class1`）并循环`AppDomain.CurrentDomain.GetAssemblies().ToList()`查看包含该虚拟类的程序集

我可以想象一些可能性。

1.  在每个视图插件程序集中创建一个接口`IViewPlugin`并将其分配给我`Class1`
2.  命名每个程序集`MyCompany.Presentation.Views.Plugins.[ClientName]`并包含所有匹配的插件。

当程序集本身没有任何实际类时，是否还有其他更好的方法可以将程序集标记为“插件”程序集（除非我专门创建了一个用于识别插件程序集的类）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:20:21.033

您可以创建自定义属性：

```
[AttributeUsage(AttributeTargets.Assembly, AllowMultiple = false, Inherited = true)]
public class PluginAssemblyAttribute : Attribute
{
} 
```

并将其应用于组件：

```
[assembly: PluginAssembly] 
```

然后，您可以检查程序集是否具有以下属性：

```
if (assembly.IsDefined(typeof(PluginAssemblyAttribute), false)
    ... 
```

# ios - presentViewController 没有“看到”我的 viewControllers

> ID：14477107
> 
> 赞同：0
> 
> 时间：2013-01-23T10:12:12.183
> 
> 标签：ios, presentmodalviewcontroller

MainMenuViewController 以模态方式呈现 BonusViewController。我想关闭 BonusViewController 然后显示一个新的 BonusViewController，有效地“重置”BonusViewController。

我使用通知在 MainMenuViewController 中调用此方法

```
-(void)resetBonus{

    [self dismissViewControllerAnimated:YES completion:nil];

    [self presentViewController: BonusViewController animated:NO completion:nil];

} 
```

当我在上面的 presentViewController 调用中键入 BonusViewController 时，我希望它会被自动检测到，但事实并非如此，而且当我键入时，我的任何 viewController 都没有出现，我假设这意味着我做错了。我是否必须初始化 VC 或分配它才能像这样呈现它？或者我什至可以这样做，因为我使用故事板？

我也试过这个虽然我相信这种方法已被弃用

```
-(void)resetBonus{

    [self dismissModalViewControllerAnimated:YES];
    [self presentModalViewController: BonusViewController animated:NO ]; 

} 
```

![在此处输入图像描述](../Images/889a9ea5022571a93a96e3cbc507a27b.png)

做了 Sumanth 的建议，但我现在收到了这条消息：

![在此处输入图像描述](../Images/9f622ec1b064f40d327edb0d452ee994.png)

所以现在我在做：

```
#import "BonusViewController.h

....

-(void)resetBonus
{
BonusViewController  *bonus = [[BonusViewController alloc]init];
[self dismissModalViewControllerAnimated:NO];
[self presentModalViewController: bonus animated:NO ];

} 
```

错误都消失了，但是当 BonusViewController 出现时，显示器是纯黑色的，我可以听到声音，但在屏幕上看不到任何东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:07:39.300

也不要忘记在 .h 文件中写入 #import "BonusViewController.h"

```
BonusViewController  *objBonus = [[BonusViewController alloc]init]; 
[self dismissViewControllerAnimated:YES completion:NULL];
[self presentViewController:objBonus animated:YES completion:NULL]; 
```

您需要创建视图控制器的对象，并且直接传递视图控制器，这是不可能的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T10:14:57.790

你应该分配和初始化视图控制器并使用`presentModalViewController`这样的写来呈现

```
BonusViewController  *bonus = [[BonusViewController alloc]init]; 
[self dismissModalViewControllerAnimated:YES];
[self presentModalViewController: bonus animated:NO ]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:41:09.750

我确定给出的答案是正确的，但我无法让它们正常工作。由于某种原因，BonusViewController 似乎已显示，因为我可以听到声音，但屏幕是黑色的，并且没有任何视觉显示。

我最终暂时完成了以下操作，但这并不是我真正想要的平滑效果。

当我有更多时间找出更好的方法时，我必须重新访问它。

```
-(void)endBonus
{
    [self dismissViewControllerAnimated:NO completion:^{
        [self performSelector:@selector(resetBonus) withObject:nil afterDelay:1];
    }];

}
-(void)resetBonus
{
 [self performSegueWithIdentifier: @"segueToBonus" sender: self];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T10:17:06.597

```
#import "BonusViewController.h"
-(void)resetBonus
    {
    BonusViewController  *BonusViewController = [[BonusViewController alloc]init];
        [self dismissViewControllerAnimated:NO completion:nil];
        [self presentViewController: BonusViewController animated:NO completion:nil];
    } 
```

设置两个动画都是**NO**

编辑 ：`#import "BonusViewController.h"`

# jsf-2 - 如何制作支持多于一种分辨率的 JSF 2.0 应用程序

> ID：14477109
> 
> 赞同：-1
> 
> 时间：2013-01-23T10:12:14.363
> 
> 标签：jsf-2

我正在开发使用 JSF 2.0 和 Primefaces 3.4 的 UI 应用程序。我的 UI 应该支持不止一种分辨率，例如最低应该支持 1024 x 768，它也应该支持 1280 x 1024。

有人可以让我知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:40:07.360

这是一个 HTML/CSS 问题，与 JSF 或 PrimeFaces 无关。看看这个：

*   [在 Web 开发中处理多个屏幕分辨率和纵横比的策略](https://stackoverflow.com/questions/3130054/strategies-for-handling-multiple-screen-resolutions-and-aspect-ratios-in-web-dev)

*   [http://en.wikipedia.org/wiki/Responsive_web_design](http://en.wikipedia.org/wiki/Responsive_web_design)

# xml - 使用 xpath 计算 XML 中的元素数

> ID：14477122
> 
> 赞同：2
> 
> 时间：2013-01-23T10:12:58.630
> 
> 标签：xml, matlab, xpath

我使用这个优秀的论坛来教自己一些基本的 xpath 来查询 .XML 文件。我在这里有一个 XML 文件的示例，我正在尝试使用 Matlab 在 XML 文件中导入 3 个对象的 [X,Y] 坐标：

```
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>ROI array</key>
    <array>
        <dict>
            <key>Comments</key>
            <string></string>
            <key>Name</key>
            <string>Unnamed</string>
            <key>ROIPoints</key>
            <array>
                <string>{129.24051549947484, 263.66036033996352}</string>
                <string>{114.61421850240453, 278.56760216125258}</string>
                <string>{123.11826208150609, 289.73859978088149}</string>
                            <string>{125.11111111111111, 295.77777777777777}</string>
            </array>
            <key>Slice</key>
            <integer>58</integer>
        </dict>
        <dict>
            <key>Comments</key>
            <string></string>
            <key>Name</key>
            <string>Unnamed</string>
            <key>ROIPoints</key>
            <array>
                <string>{127.09352448499425, 261.31629753478774}</string>
                <string>{112.50917389905675, 277.25509453185805}</string>
                <string>{126.061969309213, 291.36980247863539}</string>
                <string>{141.48499634778722, 292.16234398254164}</string>
                <string>{149.71229126966222, 277.81281090148696}</string>
            </array>
            <key>Slice</key>
            <integer>59</integer>
        </dict>
        <dict>
            <key>Comments</key>
            <string></string>
            <key>Name</key>
            <string>Unnamed</string>
            <key>ROIPoints</key>
            <array>
                <string>{134.32833430087788, 258.21743274101027}</string>
                <string>{117.0812182120107, 266.44891620048293}</string>
                <string>{114.41427180087788, 292.20427203544386}</string>
                <string>{128.80573603427632, 299.11905932792433}</string>
                <string>{147.92307612216695, 299.11905932792433}</string>
                <string>{152.73700281894429, 285.80526996024855}</string>
                <string>{154.32626673495992, 268.51202655204543}</string>
            </array>
            <key>Slice</key>
            <integer>60</integer>
        </dict>
        </array>
</dict>
</plist> 
```

我已经设法使用这个 Matlab 代码导出所有坐标：

```
expression_2 = xpath.compile('plist/dict/array/dict/array/string');
nodeList_2 = expression_2.evaluate(docNode, XPathConstants.NODESET);
for i = 1:nodeList_2.getLength
    node = nodeList_2.item(i-1);
    coordinate_node{i} = char(node.getFirstChild.getNodeValue);
end 
```

有谁知道 xpath 查询，我可以计算每个对象中 [X,Y] 坐标的数量？即返回第一个对象的 4 个坐标、第二个对象的 5 个坐标和第三个对象的 7 个坐标的东西？

谢谢，吉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:37:38.020

我不熟悉您的 matlab 的 XPath 实现，但 XPath 确实具有聚合函数，并且我已将它们与 Java 一起使用：

[http://www.w3.org/TR/xpath-functions/#func-count](http://www.w3.org/TR/xpath-functions/#func-count)

请首先参考您的 matlab 手册。您还可以在这个类似的问题中看一眼如何使用它。

[如何使用 XPath 计算具有某个属性的节点数](https://stackoverflow.com/questions/2389190/how-do-i-use-xpath-to-count-the-number-of-nodes-with-a-certain-attribute)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T11:29:15.853

你在正确的轨道上。但是，问题在于您的代码以扁平方式提取所有“字符串”节点，而忽略了父“数组”节点。这样您就无法分辨哪个坐标属于哪个对象。

如果你稍微修改你的代码，让它以分层方式遍历“数组”和“字符串”节点，它可以像你想要的那样工作：

```
%// Extract 'array' nodes
expr_array = xpath.compile('plist/dict/array/dict/array');
nodeList_array = expr_array.evaluate(docNode, XPathConstants.NODESET);
C = cell(nodeList_array.getLength, 1);
for k = 1:nodeList_array.getLength

    %// Extract 'string' nodes
    node_array = nodeList_array.item(k - 1);
    expr_string = xpath.compile('string');
    nodeList_string = expr_string.evaluate(node_array, XPathConstants.NODESET);
    coordinates = zeros(nodeList_string.getLength, 2);
    for m = 1:nodeList_string.getLength
        node_string = nodeList_string.item(m - 1);
        s = char(node_string.getFirstChild.getNodeValue); %// Extract string
        coordinates(m, :) = str2num(s(2:end - 1));        %// Convert to numbers
    end
    C{k} = coordinates;
end 
```

现在单元格数组`C`包含所有坐标（顺便说一下，我将它们转换为数值，以便它们可以存储在矩阵中并轻松操作）：

```
C{1} =
  129.2405  263.6604
  114.6142  278.5676
  123.1183  289.7386
  125.1111  295.7778

C{2} =
  127.0935  261.3163
  112.5092  277.2551
  126.0620  291.3698
  141.4850  292.1623
  149.7123  277.8128

C{3} =
  134.3283  258.2174
  117.0812  266.4489
  114.4143  292.2043
  128.8057  299.1191
  147.9231  299.1191
  152.7370  285.8053
  154.3263  268.5120 
```

现在，如果您想要每个单元格（对象）中的坐标数，只需执行以下操作：

```
cellfun(@(c)size(c, 1), C) 
```

你会得到想要的结果：

```
ans=
    4
    5
    7 
```

# c# - 绑定列表

> ID：14477124
> 
> 赞同：0
> 
> 时间：2013-01-23T10:12:59.317
> 
> 标签：c#, wpf, binding, user-controls, pixelsense

我遇到了一些绑定问题...

Shapes 是自定义用户控件的列表，例如其中一个用户控件可以是具有某些特定属性的椭圆。我的目标是在此列表上循环并显示所有 UserControl（它可以是椭圆或矩形......）我只想显示 UserControl，就像我只是提示他的 XAML 内容一样。

这是我的网格，我只是不知道在 DataTemplate 中放什么，我尝试了一些不同的东西，但实际上没有任何效果，希望一些可以帮助我:)

```
<Grid>
    <s:ScatterView ItemsSource="{Binding Shapes}">
        <s:ScatterView.ItemContainerStyle>
            <Style TargetType="s:ScatterViewItem">
                <Setter Property="Background" Value="Transparent"></Setter>
            </Style>
            </s:ScatterView.ItemContainerStyle>
            <s:ScatterView.ItemTemplate>
            <DataTemplate>
                <class:Shape ShapeItem="{Binding}" />
            </DataTemplate>
        </s:ScatterView.ItemTemplate>
    </s:ScatterView>
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:54:45.053

如评论中所述。如果您的 ShapeItem 是 UserControl，请尝试将其与 Content 属性绑定。

# php - mysql是否有类似自动更新的东西

> ID：14477125
> 
> 赞同：2
> 
> 时间：2013-01-23T10:13:03.033
> 
> 标签：php, mysql, feature-selection

数据库表架构。

```
CREATE TABLE `stackoverflow`.`automatic` (
    `id` INT NOT NULL AUTO_INCREMENT PRIMARY KEY ,
    `values` VARCHAR( 200 ) NOT NULL ,
    `counts` BIGINT NOT NULL
) ENGINE = InnoDB;
```

现在我想每次在 mysql 中自动更新数据时更新计数，而无需访问数据库。

我的意思是我知道我可以选择该行并获取旧值，然后将其增加一个，但我担心的是 mysql 是否有任何方法可以处理这些事情。

我没有尝试任何代码。我只是想从那里的专家那里知道他们是否对此有所了解。由于我在截止日期前运行，我不想使用冗长的方法，我认为如果 mysql 现在已经有一些可以帮助我的东西会很酷。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:36:27.980

您可以在更新查询本身中执行此操作

```
UPDATE `stackoverflow`.`automatic` set values='xyz', counts=(counts+1) where id=1; 
```

# amazon-s3 - AWS S3：如何为整个存储桶设置 TTL？

> ID：14477128
> 
> 赞同：3
> 
> 时间：2013-01-23T10:13:08.643
> 
> 标签：amazon-s3, amazon-cloudfront

我一起使用 Cloudfront 和 S3。我想将 S3 文件的 TTL 设置为 0。我知道这可以通过将`Cache-Control`字段设置为`max-age=0`.

问题是我只知道如何使用 AWS 控制台对单个文件执行此操作。

**如何使整个存储桶默认为 0，包括将来上传的文件？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:17:49.697

[您可以使用S3 浏览器工具](http://s3browser.com/automatically-apply-http-headers.php)将整个存储桶设置为特定的 TTL ，该链接也是设置存储桶宽 TTL 的指南。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T06:09:32.900

使用[Bucket Explorer](http://www.bucketexplorer.com/)您可以使用 Bucket Default 为该存储桶上的现有对象以及要在该存储桶中上传的对象设置对象元数据。它适用于**Mac**、**Linux**和**Windows 操作系统**。

![为存储桶的所有对象以及要上传的对象添加元数据。](../Images/da74cbcd3759f6f02131b69b0bf65cfa.png)

披露：我是 Bucket Explorer 的开发者之一

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-29T15:53:46.130

如果您希望通过 Cloudfront 提供的整个 S3 存储桶（包括新添加的文件）具有相同的 TTL，则可以在 Cloudfront 中进行设置。

转到 AWS 控制台中的 Cloudfront，单击行为，单击此存储桶中的分配，然后单击编辑。单击“自定义”以便您可以设置自己的标题，然后根据需要设置最小/最大/默认 TTL。在您的情况下，您需要 TTL 0，因此您可以将默认 TTL 设置为 0。如果您想覆盖已在单个文件上设置的任何 TTL，您也可以将最大 TTL 设置为 0。

# intellij-idea - IntelliJ IDEA 12 保留空行

> ID：14477129
> 
> 赞同：10
> 
> 时间：2013-01-23T10:13:19.160
> 
> 标签：intellij-idea, reformat, blank-line, reformatting

我有这个代码：

```
private int a;

private int b;

private int c; 
```

但是当我用 IntelliJ 重新格式化它时，它变成了这样：

```
private int a;
private int b;
private int c; 
```

我将如何允许它保留空白行？

但是这段代码：

```
private boolean a;
private String s; 
```

应该保持原样。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-23T10:51:02.960

该问题是由 Rearranger 错误引起的，目前它不支持最大空白行设置。我已经创建了[你可以关注的问题](http://youtrack.jetbrains.com/issue/IDEA-99782)。

# pagination - 在 BIRT RCP 中触发 HTML 预览时如何分页？

> ID：14477131
> 
> 赞同：0
> 
> 时间：2013-01-23T10:13:22.433
> 
> 标签：pagination, rcp, birt

我在[这里](http://www.eclipse.org/birt/phoenix/deploy/reportEngineAPI.php)`RunAndRenderTask`读到使用;时无法进行分页。它应该是分开的`RunTask`并`RenderTask`实现这一点，对吗？

现在，问题是，我们正在使用 BIRT RCP，由于我们的要求，我们无法实现单独的 WebViewer。然而，在我进行跟踪时，我注意到 RCP 应用程序`RunAndRenderTask`在我将报告预览为 HTML 时使用。此外，使用的查看器是`/preview`. 如果我理解[这一点](http://www.eclipse.org/birt/phoenix/deploy/viewerUsage2.2.php)，对我来说要获得单独的运行和渲染任务，我应该使用`/frameset`.

所以，我的问题是，对于 BIRT RCP，有没有办法在*不*实现单独的 WebViewer 的情况下对 HTML 预览进行分页？简而言之，我可以以某种方式强制基本 RCP 在 HTML 预览中对 HTML 进行分页吗？如果是这样，我如何获得单独的运行和渲染任务或使用`/frameset`？我对发射器不是很了解，我仍在尝试了解 HTML 发射器是如何实现的。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:55:27.883

找到它 - 设置`/frameset`在 WebViewer 类上，而分页控件位于报表引擎服务中。

# android - 如何使用 Android 传感器事件来确定设备是朝上还是朝下

> ID：14477133
> 
> 赞同：6
> 
> 时间：2013-01-23T10:13:22.283
> 
> 标签：android, rotation, sensors

我有一个很简单的要求。假设一个设备端立，垂直于地面，并且它是倾斜的，我只需要确定手机是向前还是向后倾斜（屏幕更靠近地面还是更靠近天花板）。

我知道如何从各种传感器读取值，并且我认为使用传感器 TYPE_ROTATION_VECTOR 是前进的方向。我所缺少的只是从它返回的三个值中确定向前或向后的数学知识。

我已经阅读了关于 SO 的所有相关主题，没有任何启发，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T06:33:21.747

```
float[] rotationMatrix = new float[9];
float[] inclinationMatrix = new float[9];
float[] accelerometer; // values from sensor
float[] magnetic; // values from sensor
SensorManager.getRotationMatrix(rotationMatrix, inclinationMatrix, accelerometer, magnetic) 
int inclination = (int) Math.round(Math.toDegrees(Math.acos(rotationMatrix[8])));

if (inclination < 90)
{
      // face up
}

if (inclination > 90)
{
       // face down
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T10:36:03.500

X 轴水平且指向右侧，Y 轴垂直且指向上方，Z 轴指向屏幕正面的外侧。在这个系统中，屏幕后面的坐标具有负 Z 值。

参考坐标系定义为直接正交基，其中：

```
X is defined as the vector product Y.Z (It is tangential to the ground at the device's current location and roughly points East).
Y is tangential to the ground at the device's current location and points towards magnetic north.
Z points towards the sky and is perpendicular to the ground. 
```

在你的情况下试试这个，

```
if(Round(y,4) < 8.0){
           Log.d("sensor", "=====UP====");

        }

        else if(Round(y,4) < -8.0){
            Log.d("sensor", "=====DOWN====");

        } 
```

![加速度计传感器](../Images/4ebcc5a48c0c63d5f89c4557ee53e9e8.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-03-22T10:57:04.793

您可以使用加速度计和磁场传感器来检测这一点。

我发现这篇有用的博客文章有必要的代码来告诉你如何做到这一点。

[http://www.ahotbrew.com/how-to-detect-forward-and-backward-tilt/](http://www.ahotbrew.com/how-to-detect-forward-and-backward-tilt/)

# mysql - 想知道sql语句是否正确

> ID：14477135
> 
> 赞同：0
> 
> 时间：2013-01-23T10:13:24.587
> 
> 标签：mysql, sql

所附图像是我的数据库表中的内容。我想计算一个唯一 productSerial 的“IsRead”数量。这里的productSerial 不是主键，所以可以重复。但是我不确定如何为此编写sql语句..

例如，结果应显示为：

```
10 - 3
11 - 2
12 - 1 
```

我提出了这个，但我想知道它是否正确，如果我错了，希望大家能纠正我。

```
Select DISTINCT productSerial
  FROM (SELECT COUNT(IsRead) where IsRead = 'True' FROM testing); 
```

![在此处输入图像描述](../Images/8313d898dee1ed9ae159be189e17eed9.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T10:16:15.977

```
select ProductSerial, count(*)
from testing
where IsRead = 'True'
group by ProductSerial
order by ProductSerial 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:17:26.817

```
SELECT ProductSerial, Count(1)
FROM testing
WHERE IsRead = 'True'
GROUP BY ProductSerial
ORDER BY ProductSerial ASC 
```

应该给出相同的结果，并且是一个更简单的查询

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T10:18:18.180

不，这是不正确的。您还可以像这样大大简化*WHERE*子句：

```
 SELECT DISTINCT productSerial, COUNT(IsRead) FROM testing 
WHERE IsRead = 'True' GROUP BY productSerial 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T10:22:32.480

单程：

```
Select productSerial , COUNT(IsRead) FROM testing where IsRead= 'True' group by productSerial 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T10:23:07.900

怎么样：

```
select
    ProductSerial,
    Count(IsRead) as Count
from
    testing
where
    IsRead = 'True'
group by
    ProductSerial
order by
    ProductSerial ASC 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-23T10:57:39.047

你可以像下面一样轻松地做

```
SELECT `ProductSerial` , COUNT( `IsRead` ) AS NumberOfProduct
FROM `table_name`
WHERE `IsRead` = 'True'
GROUP BY `ProductSerial` 
```

# c# - 如何使用淡入/淡出动画翻转视图 windows8 [c#/xaml]

> ID：14477138
> 
> 赞同：0
> 
> 时间：2013-01-23T10:13:43.573
> 
> 标签：c#, xaml, windows-8, windows-runtime

我正在使用翻转视图和绑定数据。我想在更改项目时使用淡入/淡出动画。我正在使用 DispatcherTimer 更改项目（_timer.Tick += ChangeImage;）。

将数据绑定到翻转视图

```
<FlipView x:Name="TheFlipView"
ItemsSource="{Binding Source={StaticResource itemsViewSource}}"
ItemTemplate="{StaticResource Standard250x250ItemTemplate}"/> 
```

改变功能。

```
private void ChangeItems(object sender, object o)
{   
    var totalItems = TheFlipView.Items.Count;
    var newItemIndex = (TheFlipView.SelectedIndex + 1) % totalItems;
    TheFlipView.SelectedIndex = newItemIndex;
} 
```

我尝试了 Storyboard 和 FadeInThemeAnimation 类，但我不能......

你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:49:33.240

这是 WinRT XAML 工具包中的一个类，您可以使用它通过简单的调用（如`myFlipView.FadeOut()`. 您可以将代码更改为以下内容：

```
private async void ChangeItems(object sender, object o)
{   
    var totalItems = TheFlipView.Items.Count;
    var newItemIndex = (TheFlipView.SelectedIndex + 1) % totalItems;
    await TheFlipView.FadeOut();
    TheFlipView.SelectedIndex = newItemIndex;
    TheFlipView.FadeIn();
} 
```

**扩展类：**

```
public static class UIElementAnimationExtensions
{
    #region AttachedFadeStoryboard
    /// <summary>
    /// AttachedFadeStoryboard Attached Dependency Property
    /// </summary>
    public static readonly DependencyProperty AttachedFadeStoryboardProperty =
        DependencyProperty.RegisterAttached(
            "AttachedFadeStoryboard",
            typeof(Storyboard),
            typeof(UIElementAnimationExtensions),
            new PropertyMetadata(null, OnAttachedFadeStoryboardChanged));

    /// <summary>
    /// Gets the AttachedFadeStoryboard property. This dependency property 
    /// indicates the currently running custom fade in/out storyboard.
    /// </summary>
    private static Storyboard GetAttachedFadeStoryboard(DependencyObject d)
    {
        return (Storyboard)d.GetValue(AttachedFadeStoryboardProperty);
    }

    /// <summary>
    /// Sets the AttachedFadeStoryboard property. This dependency property 
    /// indicates the currently running custom fade in/out storyboard.
    /// </summary>
    private static void SetAttachedFadeStoryboard(DependencyObject d, Storyboard value)
    {
        d.SetValue(AttachedFadeStoryboardProperty, value);
    }

    /// <summary>
    /// Handles changes to the AttachedFadeStoryboard property.
    /// </summary>
    /// <param name="d">
    /// The <see cref="DependencyObject"/> on which
    /// the property has changed value.
    /// </param>
    /// <param name="e">
    /// Event data that is issued by any event that
    /// tracks changes to the effective value of this property.
    /// </param>
    private static void OnAttachedFadeStoryboardChanged(
        DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        Storyboard oldAttachedFadeStoryboard = (Storyboard)e.OldValue;
        Storyboard newAttachedFadeStoryboard = (Storyboard)d.GetValue(AttachedFadeStoryboardProperty);
    }
    #endregion

    #region FadeIn()
    /// <summary>
    /// Fades the element in using the FadeInThemeAnimation.
    /// </summary>
    /// <remarks>
    /// Opacity property of the element is not affected.<br/>
    /// The duration of the visible animation itself is not affected by the duration parameter. It merely indicates how long the Storyboard will run.<br/>
    /// If FadeOutThemeAnimation was not used on the element before - nothing will happen.<br/>
    /// </remarks>
    /// <param name="element"></param>
    /// <param name="duration"></param>
    /// <returns></returns>
    public static async Task FadeIn(this UIElement element, TimeSpan? duration = null)
    {
        ((FrameworkElement)element).Visibility = Visibility.Visible;
        var fadeInStoryboard = new Storyboard();
        var fadeInAnimation = new FadeInThemeAnimation();

        if (duration != null)
        {
            fadeInAnimation.Duration = duration.Value;
        }

        Storyboard.SetTarget(fadeInAnimation, element);
        fadeInStoryboard.Children.Add(fadeInAnimation);
        await fadeInStoryboard.BeginAsync();
    } 
    #endregion

    #region FadeOut()
    /// <summary>
    /// Fades the element out using the FadeOutThemeAnimation.
    /// </summary>
    /// <remarks>
    /// Opacity property of the element is not affected.<br/>
    /// The duration of the visible animation itself is not affected by the duration parameter. It merely indicates how long the Storyboard will run.<br/>
    /// If FadeOutThemeAnimation was already run before and FadeInThemeAnimation was not run after that - nothing will happen.<br/>
    /// </remarks>
    /// <param name="element"></param>
    /// <param name="duration"></param>
    /// <returns></returns>
    public static async Task FadeOut(this UIElement element, TimeSpan? duration = null)
    {
        var fadeOutStoryboard = new Storyboard();
        var fadeOutAnimation = new FadeOutThemeAnimation();

        if (duration != null)
        {
            fadeOutAnimation.Duration = duration.Value;
        }

        Storyboard.SetTarget(fadeOutAnimation, element);
        fadeOutStoryboard.Children.Add(fadeOutAnimation);
        await fadeOutStoryboard.BeginAsync();
    } 
    #endregion

    #region FadeInCustom()
    /// <summary>
    /// Fades the element in using a custom DoubleAnimation of the Opacity property.
    /// </summary>
    /// <param name="element"></param>
    /// <param name="duration"></param>
    /// <param name="easingFunction"> </param>
    /// <returns></returns>
    public static async Task FadeInCustom(this UIElement element, TimeSpan? duration = null, EasingFunctionBase easingFunction = null, double targetOpacity = 1.0)
    {
        CleanUpPreviousFadeStoryboard(element);

        var fadeInStoryboard = new Storyboard();
        var fadeInAnimation = new DoubleAnimation();

        if (duration == null)
            duration = TimeSpan.FromSeconds(0.4);

        fadeInAnimation.Duration = duration.Value;
        fadeInAnimation.To = targetOpacity;
        fadeInAnimation.EasingFunction = easingFunction;

        Storyboard.SetTarget(fadeInAnimation, element);
        Storyboard.SetTargetProperty(fadeInAnimation, "Opacity");
        fadeInStoryboard.Children.Add(fadeInAnimation);
        SetAttachedFadeStoryboard(element, fadeInStoryboard);
        await fadeInStoryboard.BeginAsync();
        element.Opacity = targetOpacity;
        fadeInStoryboard.Stop();
    }
    #endregion

    #region FadeOutCustom()
    /// <summary>
    /// Fades the element out using a custom DoubleAnimation of the Opacity property.
    /// </summary>
    /// <param name="element"></param>
    /// <param name="duration"></param>
    /// <param name="easingFunction"> </param>
    /// <returns></returns>
    public static async Task FadeOutCustom(this UIElement element, TimeSpan? duration = null, EasingFunctionBase easingFunction = null)
    {
        CleanUpPreviousFadeStoryboard(element); 

        var fadeOutStoryboard = new Storyboard();
        var fadeOutAnimation = new DoubleAnimation();

        if (duration == null)
            duration = TimeSpan.FromSeconds(0.4);

        fadeOutAnimation.Duration = duration.Value;
        fadeOutAnimation.To = 0.0;
        fadeOutAnimation.EasingFunction = easingFunction;

        Storyboard.SetTarget(fadeOutAnimation, element);
        Storyboard.SetTargetProperty(fadeOutAnimation, "Opacity");
        fadeOutStoryboard.Children.Add(fadeOutAnimation);
        SetAttachedFadeStoryboard(element, fadeOutStoryboard);
        await fadeOutStoryboard.BeginAsync();
        element.Opacity = 0.0;
        fadeOutStoryboard.Stop();
    } 
    #endregion

    #region CleanUpPreviousFadeStoryboard()
    public static void CleanUpPreviousFadeStoryboard(this UIElement element)
    {
        var attachedFadeStoryboard = GetAttachedFadeStoryboard(element);

        if (attachedFadeStoryboard != null)
        {
            attachedFadeStoryboard.Stop();
        }
    }
    #endregion
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-07T14:45:18.707

由于错过了扩展，此答案的目的是补充 Filip Skakun 的答案`BeginAsync`。如下所示将此扩展嵌入到 his`class UIElementAnimationExtensions`中后，它适用于我的情况。^_^

```
 public async static Task BeginAsync(this Storyboard myStoryboard)
    {
        SemaphoreSlim signal = new SemaphoreSlim(0, 1);
        EventHandler<object> eventHandler = new EventHandler<object>(
            (sender, args) => 
            {
                signal.Release();
            }
            );
        myStoryboard.Completed += eventHandler;
        myStoryboard.Begin();
        await signal.WaitAsync();
        myStoryboard.Completed -= eventHandler;
    } 
```

顺便说一句，这个扩展的概念是基于[Is it possible to await an event 而不是另一个异步方法的答案？](https://stackoverflow.com/questions/12858501/is-it-possible-to-await-an-event-instead-of-another-async-method).

# java - 使用 Selenium Webdriver 运行生成的构建时出现问题？

> ID：14477140
> 
> 赞同：0
> 
> 时间：2013-01-23T10:13:48.537
> 
> 标签：java, eclipse, netbeans, selenium-webdriver

我已经使用 selenium webdriver 准备了一个测试框架。

它使用 testng 生成测试结果。

现在，当我运行 Build.xml 文件时，它显示构建成功，但是当尝试执行构建时它失败并显示一个 msg 它不包含主类。

之后我在我的项目中添加了一个主类，它可以工作并且我能够执行 jar 文件。

问题是只有主类被执行，而不是整个项目。

为了解决它，我在主类中添加了所有类的实例并且它起作用了。

但我的主要问题是测试结果。它没有使用 Testng 生成测试结果。

谁能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:07:01.013

假设您正在使用 ant，请查看以下内容，它应该可以让您很好地了解您需要做什么

[http://openwritings.net/public/testng/ant-build-file-testng](http://openwritings.net/public/testng/ant-build-file-testng)

当然，这只是为了运行 testng，在此之前，我建议您在 build.xml 文件中清理并编译所有类。

这也是使用 testng 编译和运行程序的 build.xml 的一个很好的示例

[http://www.seleniumtests.com/2011/06/selenium-tutorial-ant-build-for.html](http://www.seleniumtests.com/2011/06/selenium-tutorial-ant-build-for.html)

# types - MyBatis - 持有多种类型

> ID：14477142
> 
> 赞同：4
> 
> 时间：2013-01-23T10:13:54.447
> 
> 标签：types, insert, mybatis

在开始之前，这是我的类的结构

*   人员

    *   PersonnePhysique（扩展 Personne）

    *   PersonneMorale（扩展 Personne）

        *   企业（扩展 PersonneMorale）
        *   协会（扩展 PersonneMorale）

我正在尝试在数据库中插入一个“Personne”，我需要检查它是“PersonnePhysique”、“Entreprise”还是“Association”。所以，我在我的映射器中做了这个：

```
<insert id="creerPersonne" parameterType="Personne">
   ....

<choose>
    <when test="getClass() instanceof fr.maaf.personne.PersonnePhysique">
        1, 
    </when>
    <when test="getClass() instanceof fr.maaf.personne.Association">
        2, 
    </when>
    <when test="getClass() instanceof fr.maaf.personne.Entreprise">
        2, 
    </when>
</choose>

  ...
</insert> 
```

但是这个测试没有一个通过。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T08:40:12.357

我找到了一个解决方案，虽然不在官方文档中，但对于未来的版本应该不是问题： if test="_parameter instanceof fr.maaf.personne.Entreprise"

# actionscript-3 - 如何检查用户是在动作脚本 3 中拖动对象的右侧还是左侧

> ID：14477143
> 
> 赞同：0
> 
> 时间：2013-01-23T10:13:58.393
> 
> 标签：actionscript-3, flash, user-input

我正在创建一个基于 Flash 的应用程序，用户可以在其中使用鼠标拖动来更改矩形的形状、宽度和高度。这是一个快速的原型图像。 ![在此处输入图像描述](../Images/2cfa10c837f644f97bfee6c4efa61bd8.png)

让我简单解释一下：在您可以看到的图像中，我有一个很小的红色矩形，现在坐着的是起始位置，用户只能将其拖动到右侧 100 像素。这个想法是，当用户将其向右拖动时，我想矩形也扩展右侧，就像一个灵活的盒子。如果他向后拖，那么它会随之返回。

**所以，问题是：如何检查，用户是在拖动右侧还是左侧。所以基于此我们可以更新矩形宽度。**

这是代码：

```
import flash.geom.Rectangle;
import flash.events.MouseEvent;

var horizRect:Rectangle = new Rectangle(scrollPathHoriz.x, scrollPathHoriz.y, 100, 0);
var horizCount:Number;

//event listener for the anchor point.
scrollHoriz.addEventListener(MouseEvent.MOUSE_DOWN, dragScroller);
stage.addEventListener(MouseEvent.MOUSE_UP, dropScroller);

//mouse down and mouse up event handler.
function dragScroller(evt:MouseEvent):void {

    horizCount= scrollHoriz.x;

    scrollHoriz.startDrag(false, horizRect);
    scrollHoriz.addEventListener(MouseEvent.MOUSE_MOVE, calculateHorizPixel);
}

function dropScroller(evt:MouseEvent):void {
    scrollHoriz.stopDrag();
    scrollHoriz.removeEventListener(MouseEvent.MOUSE_MOVE, calculateHorizPixel);
}

function calculateHorizPixel(evt:MouseEvent):void {

    horizCount ++;
    trace(horizCount);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:30:42.060

由于您已经保存了起始 x 位置，

您只需要起始位置和当前位置之间的差异：

```
function calculateHorizPixel(evt:MouseEvent):void {

      var dx = scrollHoriz.x - horizCount;

      trace(dx);
} 
```

**dx**的负值表示**scrollHoriz**向左移动，否则向右移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T19:45:41.713

或者试试这个：

```
import flash.events.MouseEvent;

stage.addEventListener(MouseEvent.MOUSE_MOVE, moveMouse);

function moveMouse(event:MouseEvent):void
{
    var dx:Number = mouseX - stage.stageWidth/2;
    trace(dx);
} 
```

# ios - 从多个 UIViewController 控制对 webservice 方法的访问

> ID：14477145
> 
> 赞同：0
> 
> 时间：2013-01-23T10:14:04.930
> 
> 标签：ios, objective-c, nslock

我有一个带有标签栏和 3 个不同的 iOS 应用程序，`UIViewControllers`每个标签一个。该应用程序使用 SudzC 与 a 交互以`C# .NET webservice`从数据库中提取数据。

从所有三个视图控制器调用一个 web 服务方法，但我想强制只有一个视图控制器可以在任何时间点调用该方法，并且在返回数据之前没有其他视图控制器可以调用它。

我试图通过在 NSLock 中定义一个 NSLock 来解决这个问题`AppDelegate`，然后在每个中实现以下代码`viewController`：

```
if([SharedAppDelegate.loginLock lockBeforeDate:[[[NSDate alloc] init] dateByAddingTimeInterval:30.0]])
{
     // got the lock so call the webservice method
     SDZiOSWebService* webService = [SDZiOSWebService service];
     [webService Login:self action:@selector(handleRelogin:) username:userName password:password];
}
else
{
     // can't get lock so logout
     self->reloginInProgress = false;
     [SharedAppDelegate doLogout];
} 
```

Web 服务返回的处理程序定义为（为清楚起见截断）

```
-(void)handleRelogin: (id) result {
     SDZLoginResult *loginResult = (SDZLoginResult*)result;
     if(loginResult.Status)
     {
          SharedAppPersist.key = loginResult.key;
     }
     else
     {
          SharedAppPersist.key = @"";
     }
     [SharedAppDelegate.loginLock unlock];
} 
```

我的理解是第一个`UIViewController`会获得锁，而其他人会阻塞长达 30 秒以等待获得锁。但是，在极少数情况下，不止一个人同时`viewController`尝试访问锁，我会立即收到以下错误：

```
*** -[NSLock lockBeforeDate:]: deadlock (<NSLock: 0x2085df90> '(null)') 
```

谁能告诉我我做错了什么？我对 C/C++ 中的锁有很好的理解，但是这些 Objective-C 锁被难住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:52:08.473

在我看来，对于这种简单的情况，您不应该使用锁（这是“邪恶的”）。

您可以尝试使用一个 NSOperationQueue，设置为一次管理 1 个并发操作，然后让视图控制器将其 Web 服务调用排队：操作队列将保证一次只执行一个操作。操作队列的另一个优点是视图控制器可以检查队列是否为空，然后根据当前状态决定是否将其调用加入队列。最后，您可以使用 KVO 来观察队列状态，因此每个视图控制器都可以在提交新请求之前简单地检查这一点。

另一种可能性，类似于使用 NSOperationQueue，是创建一个私有 GCD 串行队列并再次将所有 Web 服务请求排入队列（包装在一个块内）。虽然 GCD 串行队列比 NSOperationQueues (IMHO) 更易于实现，但它们并没有提供相同的可观察性优势和取消操作的可能性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:52:49.167

如果只是您希望 1 个视图一次访问 Web 服务。您可以使用单例类。这是网络上许多示例之一的链接。 [http://www.galloway.me.uk/tutorials/singleton-classes/](http://www.galloway.me.uk/tutorials/singleton-classes/)

您也可以使用 NSUserDefaults 存储一个布尔值，以通知您视图是否正在使用 Web 服务。一个简单的例子是：

**储存价值**

```
[[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"active_connection"];
[NSUserDefaults synchronize]; 
```

**检索**

```
if(![[NSUserDefaults standardUserDefaults] boolForKey:@"active_connection"]) {
   [[NSUserDefaults standardUserDefaults] setBool:NO forKey:@"active_connection"];
   [NSUserDefaults synchronize];
   // Send request to web-service
} 
```

我希望这可以帮助你。快乐编码.!!

# facebook - Facebook 社交插件大小

> ID：14477146
> 
> 赞同：0
> 
> 时间：2013-01-23T10:14:06.623
> 
> 标签：facebook

我的网页上有一个标准的 facebook 插件。但是尽管指定了大小，但在各种情况下（例如 PC 未登录），文本会溢出 - 忽略溢出：隐藏。简而言之：它没有做它应该做的事情。代码如下：

```
<iframe src="https://www.facebook.com/plugins/like.php?href=https%3A%2F%2Fwww.facebook.com%2Fpages%2FKLARTEXT%2F207788969239606%3Fref%3Dhl&amp;send=false&amp;layout=standard&amp;width=250&amp;show_faces=false&amp;font=verdana&amp;colorscheme=light&amp;action=like&amp;height=30" scrolling="no" frameborder="0" style="border:none; align:"middle"; overflow:hidden; width:250px; height:30px;" allowTransparency="true"></iframe> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:28:10.120

你能给我们举一些具体的例子吗？最近有一些错误导致社交插件在他们的 div 上流血。根据错误跟踪器，现在应该修复这些：

[https://developers.facebook.com/bugs/500201816697073](https://developers.facebook.com/bugs/500201816697073) https://developers.facebook.com/bugs/409142149161197

您总是可以通过将社交插件放在另一个带有溢出的div中来帮助自己：隐藏：

```
<div style="overflow:hidden;width:300px;height:100px;">
  <div class="fb-like" data-href="..."/>
</div> 
```

# ios - UICollectionViewCell 绘制阴影和绑定

> ID：14477150
> 
> 赞同：0
> 
> 时间：2013-01-23T10:14:10.890
> 
> 标签：ios, uicollectionviewcell, uiappearance

我有一个用于绘制 UICollectionViewCell 边界的代码。当我在“cellForItemAtIndexPath”中调用它时它会起作用。

```
[cell.layer setBorderColor:[UIColor redColor].CGColor];
[cell.layer setBorderWidth:1.0f];
[cell.layer setCornerRadius:7.5f];
[cell.layer setShadowOffset:CGSizeMake(0, 1)];
[cell.layer setShadowColor:[UIColor whiteColor].CGColor];
[cell.layer setShadowRadius:8.0];
[cell.layer setShadowOpacity:0.8]; 
```

但我想做的是在 appDelegate 中实现这个功能，所以我不必将所有这些代码实现到各种类。

```
[[[UICollectionViewCell appearance] layer] setMasksToBounds:NO];
[[[UICollectionViewCell appearance] layer] setBorderColor:[UIColor redColor].CGColor];
[[[UICollectionViewCell appearance] layer] setBorderWidth:1.0f];
[[[UICollectionViewCell appearance] layer] setCornerRadius:7.5f];
[[[UICollectionViewCell appearance] layer] setShadowOffset:CGSizeMake(0, 1)];
[[[UICollectionViewCell appearance] layer] setShadowColor:[UIColor whiteColor].CGColor];
[[[UICollectionViewCell appearance] layer] setShadowRadius:8.0];
[[[UICollectionViewCell appearance] layer] setShadowOpacity:0.8]; 
```

当我在 appDelegate 中使用上述代码时，它不起作用。有什么建议吗？？

我也进口`<QuartzCore/QuartzCore.h>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:34:05.003

这些属性（CALayer 属性）都不支持外观代理。

查看[此列表，了解](https://stackoverflow.com/a/9424142/608157)可以使用外观代理设置样式的所有属性。

# php - 301 无片段重定向

> ID：14477154
> 
> 赞同：0
> 
> 时间：2013-01-23T10:14:16.850
> 
> 标签：php, .htaccess, redirect, uri, fragment-identifier

> **可能重复：**
> [URL 片段和 302 重定向](https://stackoverflow.com/questions/2286402/url-fragment-and-302-redirects)

我需要关于没有特殊字符的 301 重定向的帮助。

例如，我想重定向以下 URL：

```
http://www.iphoneapplications.us/iphone-ipad-mobile-apps-portfolio.html#Gigguid 
```

到以下网址：

```
http://www.i-phonedeveloper.com/portfolio.html 
```

我已更改`.htaccess`为执行重定向，但片段`#Gigguid`仍保留在最终 URL 中。如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T10:19:14.777

当前的 HTTP 标准不允许您进行这种重定向 - 至少 HTTP 客户端拒绝这样做。您的浏览器将始终将该`#...`部分添加到重定向 URI。

顺便说一下，这`#....`叫做*Fragment*，特殊字符不多（一个 URI 有很多特殊字符，如,`:`和），最好使用正确的名称。`%``?``&`

下一个 HTTP 标准版本可能会解决这个问题，但它仍然有点脆弱，草案中的含义有时会发生变化，而且由于我无法展望未来，下一个稳定版本将如何做到这一点还为时过早HTTP 的。

另请参阅此问题以获取更多信息：

*   [URL 片段和 302 重定向](https://stackoverflow.com/q/2286402/367456)
*   [PHP 位置标头忽略哈希](https://stackoverflow.com/q/7338853/367456)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:35:55.590

您可以在 htaccess 中使用此代码

```
Options +FollowSymLinks -MultiViews
RewriteEngine On
RewriteBase   /
RewriteCond %{REQUEST_URI} ^(.*)-(.*)\.(html|htm|php)$
RewriteRule ^ /%2.%3 [R=301,L] 
```

样本 ：

[http://www.iphoneapplications.us/iphone-ipad-mobile-apps-portfolio.html?id=3#Gigguid](http://www.iphoneapplications.us/iphone-ipad-mobile-apps-portfolio.html?id=3#Gigguid)

重定向到：

[http://www.i-phonedeveloper.com/portfolio.html?id=3#Gigguid](http://www.i-phonedeveloper.com/portfolio.html?id=3#Gigguid)

# html - 文本不包含在 p 标签中

> ID：14477156
> 
> 赞同：54
> 
> 时间：2013-01-23T10:14:20.623
> 
> 标签：html, twitter-bootstrap, css

我有两个浮动的 div，并排，里面有 p 标签。p 标签中的文本不会换行，只会溢出容器，正如您在图像下方的文本中看到的那样：

![例子：](../Images/c92d7d2faaef4e14a9af13d5b15898df.png)

我的 HTML 看起来像这样：

```
 <div class="submenu">
            <h3>Destinations in Europe</h3>
            <ul>
                <li><a href="#">dfgdgdgfgdg</a></li>
                <li><a href="#">dfgdgdgfgdg</a></li>
                <li><a href="#">dfgdgdgfgdg</a></li>
                <li><a href="#">dfgdgdgfgdg</a></li>
            </ul>
            <h3>Features</h3>
            <div>
                <img src="/assets/images/o/menu/city-feat-one.jpg" />
                <h4>blahblah</h4>
                <p>
                    khkhjhjkhkyhkighkjfkhkiyhohhjkhjlhkluoiulohlhjhiououhljhiououhljhiououhljhiououhljhiououhljhiououhl
                </p>
            </div>
            <div>
                <img src="/assets/images/o/menu/city-feat-two.jpg" />
                <h4>blahblah</h4>
                <p>
                    khkhjhjkhkyhkighkjfkhkiyhohhjkhjlhkluoiulohlhjhiououhl
                </p>
            </div>           
        </div> 
```

我的 CSS：

```
#rb-menu-com li .submenu > div { 
    width:48%;
    float:left;
    position: relative;
}

#rb-menu-com li .submenu div p {
    color:#fff;
    margin: 0;
    padding:0;
    width:100%;
    position: relative;
}

#rb-menu-com li .submenu div img {
    border:1px solid #fff;
} 
```

有谁之前经历过这个吗？我没有！！快把我逼疯了！

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2013-01-23T10:17:34.747

将此样式赋予`<p>`标签。

```
p {
    word-break: break-all;
    white-space: normal;
} 
```

* * *

## 回答 #2

> 赞同：106
> 
> 时间：2013-01-23T10:20:47.087

换行仅在有分词时发生。

如果你有一个这么长的“词”，那么它就没有地方可以打破。

正确的解决方案是编写真实的内容，而不是无意义的字符串。如果您使用的是用户生成的内容，请添加一个检查异常长的单词并禁止它们（或为 URL 删除其中的一部分，同时将整个内容保留在链接中）。

或者，您可以使用[`word-break`CSS 属性](https://developer.mozilla.org/en-US/docs/Web/CSS/word-break)告诉浏览器在单词中间换行。

```
p { word-break: break-all } 
```

（注意[浏览器支持](https://caniuse.com/word-break)）。

或者，如果文本不适合容器，您可以使用`overflow`它来截断文本。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2015-09-24T00:01:32.120

**对于仍在苦苦挣扎**的任何人，请务必检查并查看您是否在相关字体上设置了 line-height 值：它可能会覆盖自动换行。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-23T10:18:17.823

那是因为您有连续的文本，这意味着没有空格的单个长单词。打破它添加`word-break: break-all;`

```
.submenu div p {
    color:#fff;
    margin: 0;
    padding:0;
    width:100%;
    position: relative; 
    word-break: break-all; 
    background:red;
} 
```

**[演示](http://jsfiddle.net/v5TEE/)**

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-02-07T13:43:30.010

这不是问题的答案，但是当我在寻找我遇到的问题的答案时找到了这个页面时，我想提一下我找到的解决方案，因为它花费了我很多时间。希望这对其他人有用：

问题是 <p> 标记中的文本不会在 div 中折叠。最终，我打开检查器，发现所有单词之间都有一个“无中断空间实体”。我的编辑器 vi 只是显示正常的空格（一些不可见的字符，我不知道是什么），但我从 PDF 文档中复制粘贴了文本。解决方案是从 vi 中复制一个空格并用空格替换它。IE。:%s/ / /g 其中要替换的空白是从有问题的文本中复制的。问题解决了。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-02-26T16:49:07.193

如果它不适合容器中的一行，您可以使用自动换行来分解单词或连续的字符串。

```
word-wrap: break-word; 
```

这将在适当的断点处保持断行，除非单个字符串不适合一行，在这种情况下它将中断。

[JSFiddle](http://jsfiddle.net/7U2ga/)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-03-16T08:02:32.183

解决方案其实是

```
p{
    white-space:normal;
} 
```

您可以通过修改 word-break 属性来更改中断行为

```
p{
    word-break: break-all; // will break at end of line 
} 
```

break-all：将在最后断开字符串，在最后一个单词处断开 word-break：更漂亮的刹车，例如在？点法线：与分词相同

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-07-30T15:27:17.323

这个问题有点晚了，但其他人可能会受益。我遇到了类似的问题，但对文本有一个额外的要求，以正确包装所有设备尺寸。所以在我的情况下，这有效。需要设置视口。

```
 .p
   {
   white-space: normal;
    overflow-wrap: break-word;
    width: 96vw;
   } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-11-17T21:12:35.127

简单的

```
p{
    word-wrap: break-word;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-01-31T10:44:45.753

如果想要的结果是通过完整的单词使用来换行：

```
p { word-break: break-word; } 
```

否则你可以使用：

```
p { word-break: break-all; } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-05-22T15:28:18.753

添加`width: 100%;`到有问题的 p 元素为我解决了这个问题。我不知道为什么它有效。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2019-04-11T19:21:35.277

对于发现自己在这里的其他人，我正在寻找的 css 是

```
overflow-wrap: break-word; 
```

它只会在需要时打破一个单词（单个单词的长度大于 p 的宽度），不像`word-break: break-all`它可以打破每一行的最后一个单词。

[溢出包装演示](https://css-tricks.com/almanac/properties/o/overflow-wrap/)

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2013-01-23T10:17:28.497

将 float: left 属性添加到图像。

```
#rb-menu-com li .submenu div img {
    border:1px solid #fff;
    float:left;
} 
```

# jquery - 发送 jQuery 帖子的访问控制允许来源错误

> ID：14477158
> 
> 赞同：1
> 
> 时间：2013-01-23T10:14:27.440
> 
> 标签：jquery, cordova, jquery-mobile

我阅读了很多关于“Access-Control-Allow-Origin”问题的论坛。大多数论坛要求使用 dataType:'jsonp'，但通常 jsonp 会命中 GET 请求，我想做 POST 请求。最终 GET 请求也不起作用。

实际上我将 iPhone 应用程序转换为 PhoneGap，因此将 Objective-c 代码重写为 HTML-5 和 Jquery 移动。我试图点击的 url 在objective-c 中效果很好。

这是objective-c代码

```
NSString *username=[self urlEncodeValue:[userNameField.text stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]]];
NSString *password=[self urlEncodeValue:[passWordField.text stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]]];
NSString *params = [[NSString alloc] initWithFormat:@"username=%@&password=%@",username,password];

NSData *paramData = [params dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
[params release];
NSString *paramsLength = [NSString stringWithFormat:@"%d", [paramData length]];

NSString *urlString=[[NSString alloc] initWithFormat:@"%@?",[dict valueForKey:@"LoginAuthentication"]];

NSURL *authURL = [NSURL URLWithString:urlString];
[urlString release]; 

NSHTTPURLResponse *authenticationResponse= nil; 
NSMutableURLRequest *authenticationRequest = [NSMutableURLRequest requestWithURL:authURL];
[authenticationRequest setHTTPMethod:@"POST"];
[authenticationRequest setValue:paramsLength forHTTPHeaderField:@"Content-Length"];
[authenticationRequest setHTTPBody:paramData];
NSError *error = nil;
int errorCode;

NSData *responseData = [NSURLConnection sendSynchronousRequest:authenticationRequest  
          returningResponse:&authenticationResponse 
             error:&error]; 

if ([authenticationResponse respondsToSelector:@selector(allHeaderFields)]) {
    //success
} 
```

上面的代码效果很好。

这是我转换为 javascript 的代码，它给出“Access-Control-Allow-Origin”错误

```
$(document).ready( function() {
    $.ajax({
        type: "POST",
        crossDomain: true,
        //dataType:'jsonp',
        //callback: '?',
        url : "https://externalserver.com/loginAuth?", 
            data : {'username' : 'username', 'password' : 'password'},
        success : function (response) {
            alert('login failed');
        }, 
        error: function(e){
            console.log(e);              
        }
    });
}); 
```

我尝试使用 GET/POST 请求，并尝试在某个本地服务器上运行此本地文件。没有任何效果。

我收到以下错误消息

> XMLHttpRequest 无法加载[https://externalserver.com/loginAuth](https://externalserver.com/loginAuth)？Access-Control-Allow-Origin 不允许 Origin null。
> 
> XMLHttpRequest 无法加载[https://externalserver.com/loginAuth](https://externalserver.com/loginAuth)？Access-Control-Allow-Origin 不允许 Origin null。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:27:11.187

浏览器不允许您从另一个域请求资源（图像和脚本文件是该规则的明显例外）。

这可以通过几种方式解决。

1.  第一种方法是使用 JSONP 调用（跨域访问的当前标准），是的，JSONP 只允许 GET。但这只是解决方案的一部分。服务器端也需要更改以允许跨域调用。

    为了能够从 javascript 访问外部资源。远程资源必须在响应头中包含 access-control-allow-origin。如果您可以控制该资源，则需要将此响应标头添加到 * （或您的域，如果您想要更受限制的访问控制）。当然，这部分解决方案将取决于您的服务器端架构（PHP、ASP.NET、JSP ...）

    这是详细描述的 PHP/jQuery 解决方案：[http ://www.fbloggs.com/2010/07/09/how-to-access-cross-domain-data-with-ajax-using-jsonp-jquery-and- php/](http://www.fbloggs.com/2010/07/09/how-to-access-cross-domain-data-with-ajax-using-jsonp-jquery-and-php/)

    还必须将返回结果包装到 jsonpCallback 函数中，所以返回应该看起来像这样：

    ```
    someFunction("{...}"); 
    ```

    **someFunction**是回调函数的名称，经典的 JSON 是 {....}。你可以看到，它被**someFunction(** .

    jQuery 端应该是这样的：

    ```
    $.ajax({url: server_url,
        type: "GET",       
        data: save_data,
        dataType: "jsonp",
        jsonpCallback: 'successCallback',
        async: true,
        beforeSend: function() {

        },
        complete: function() {

        },
        success: function (result) {

        },
        error: function (request,error) {

        }, 
        successCallback:function(){

        }
    }); 
    ```

    [http://devlog.info/2010/03/10/cross-domain-ajax/](http://devlog.info/2010/03/10/cross-domain-ajax/)

2.  或代理解决方案。我不会写它，因为我从未测试过它。仅当您无权访问服务器端代码时才使用此解决方案：

    [http://jquery-howto.blogspot.com/2009/04/cross-domain-ajax-querying-with-jquery.html](http://jquery-howto.blogspot.com/2009/04/cross-domain-ajax-querying-with-jquery.html) [http://developer.yahoo.com/javascript/howto-proxy.html](http://developer.yahoo.com/javascript/howto-proxy.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:35:32.300

PhoneGap 应用程序被视为移动应用程序，而不是浏览器，因此跨域很好。您需要更改*服务器*代码以添加此标头

```
Access-Control-Allow-Origin: * 
```

这将允许发送 PhoneGap 请求的空源。这应该适用于 GET 和 POST 请求，而无需使用 JSONP。

# javascript - 阻止引导模板在某个点后收缩

> ID：14477160
> 
> 赞同：4
> 
> 时间：2013-01-23T10:14:36.880
> 
> 标签：javascript, css, twitter-bootstrap

我一直想知道是否有办法阻止引导程序在某个点后收缩。我喜欢我的网站看起来 700 像素宽的方式。那么有没有办法阻止引导程序在那之后逃避我的html？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:33:36.997

我认为，正如问题[Twitter bootstrap minimum width in responsive layout 中](https://stackoverflow.com/questions/13716562/twitter-bootstrap-minimum-width-in-responsive-layout)所提到的，您可以将`min-width`CSS 属性设置`700px`为您不希望小于 700px 的任何元素。

假设您有一个名为“wrapper”的 div，它包装了您的所有页面内容：

```
<div id="wrapper">
    <!-- All contents in here -->
</div> 
```

你可以这样设计它：

```
#wrapper {
    min-width: 700px;
} 
```

**注意**：如果您使用响应式布局，您还必须在文件中注释要禁用的样式`bootstrap-responsive.css`。

因此，在使用响应式布局时，如果您希望您的网站显示为 700 像素宽，您还必须在以下样式注释：

```
@media (min-width: 768px) and (max-width: 979px) {
@media (min-width: 1200px) {
@media (max-width: 480px) {
@media (max-width: 979px) {
@media (min-width: 980px) { 
```

并将样式的 CSS 规则（但删除 @media 和括号）保留在：

```
@media (max-width: 767px) { 
```

希望有帮助！

# android - 文件未从 Android 中的资产打开

> ID：14477166
> 
> 赞同：0
> 
> 时间：2013-01-23T10:14:57.563
> 
> 标签：android, android-assets

我正在尝试从 Assets.In Assets 中读取图像，我一直在使用 az 文件夹，这些文件夹包含具有文件夹起始名称的图像，例如如果有名为 YImages 的文件夹，则此文件夹中的图像名称也以 Y 字开头。

我正在使用此功能从资产中获取图像：

```
 try {
        pics = Drawable
                .createFromStream(
                        getAssets().open(
                                imageFolder + wordString.get(index)
                                + ".jpg"), null);

        picture.setBackgroundDrawable(pics);
        picture.refreshDrawableState();

    } catch (IOException e) {

        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:26:55.303

只用小写字母更改所有图像文件名，不要在图像文件名中使用大写字母。即`badger_thumbnail.jpg`, `badge_thumbnail.jpg`,`year.jpg`像这样。另请记住，您的任何图像名称中都没有空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T10:17:00.157

在您的图像路径中有一个空格。`java.io.FileNotFoundException: yImages/ Year.jpg` 尝试修剪文件名。

# ios - 如何从位图中切出一个矩形

> ID：14477171
> 
> 赞同：1
> 
> 时间：2013-01-23T10:15:00.257
> 
> 标签：ios

我想从图像中切割出**x= 100, y = 100, width = 50, height = 50**的矩形。我将它从网上加载到`UIImageView`. 首先，是否可以从远程操作加载的图像`URL`？如果是这样，什么类/方法对此有用？

# android - 拒绝 MediaPlayer 中的示例

> ID：14477180
> 
> 赞同：0
> 
> 时间：2013-01-23T10:15:25.147
> 
> 标签：android, mp3, wav, android-mediaplayer

我写了简单的 MP3/WAV 播放器，我有几个按钮，比如播放、暂停或停止。我正在使用 MediaPlayer 库。我想停止音乐，但不是突然。我想要拒绝效果。使用停止按钮后，它应该将音量降低一秒钟（从 100% 到 10%）然后停止。有可能吗？怎么做？

我有一种停止音乐的标准方法：

```
public void stopSample(){
    sample.stop()
    sample.relase();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:26:41.480

执行以下步骤

1.  使用较低的音量`setVolume()`
2.  延迟 1 秒
3.  停止使用媒体`stop()`

你确实有类`setVolume`中的方法`MediaPlayer`。看[这里](http://developer.android.com/reference/android/media/MediaPlayer.html#setVolume%28float,%20float%29)

# drupal-7 - Drupal 7 - 将代码从 template.php 移到自定义模块中

> ID：14477181
> 
> 赞同：1
> 
> 时间：2013-01-23T10:15:27.023
> 
> 标签：drupal-7, preprocessor, drupal-modules

我有一个相当大的 template.php 文件，并且正在寻找一种更好的方式来组织它。罪魁祸首是 theme_preprocess_node() 有很多代码。

有人可以提出一种保持整洁和可读性的好方法吗？我可以在 template.php 中创建自定义函数吗？

或者，可以将其拆分为自定义模块吗？如果是这样，我怎样才能访问我需要的 $vars 或 $variables（页面变量）？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:37:08.070

我也遇到过这种代码混乱的主题，尤其是 template.php 中的。我的想法是这样的，

*   收集有助于配置主题的代码
    *   为此创建一个模块。示例收集可帮助您对表单进行主题化并制作模块的代码。
*   如果 template.php 太大，请将主题覆盖函数分离到单独的 .inc 文件中并包含在 template.php 中
    *   例如：与布局或块相关的主题，如 blocks_theme.inc

> 或者，可以将其拆分为自定义模块吗？如果是这样，我怎样才能访问我需要的 $vars 或 $variables（页面变量）？

您设计的模块需要为主题服务。`$vars`不应该这样通过。但是尝试将所需的变量传递给函数并获得主题输出。

# three.js - THREE.js 中的光泽材质

> ID：14477183
> 
> 赞同：12
> 
> 时间：2013-01-23T10:15:42.430
> 
> 标签：three.js

我们如何使用三个.js 为材质创建光泽效果，例如此链接中的那个？我对路径跟踪不感兴趣（还:)）

[WebGL 路径追踪](http://madebyevan.com/webgl-path-tracing/)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-23T16:17:47.470

光泽度是指材料在镜面反射方向上反射光的能力。

在three.js 中，您可以使用它`THREE.MeshPhongMaterial`来执行此操作。例如：

```
new THREE.MeshPhongMaterial( { 
    color: 0x996633,
    envMap: envMap, // optional environment map
    specular: 0x050505,
    shininess: 100
} ) 
```

您还可以使用`MeshStandardMaterial`环境贴图。

三.js r.97

# c# - 适用于 Android 的 Mono：XML 数据到微调器

> ID：14477192
> 
> 赞同：0
> 
> 时间：2013-01-23T10:16:04.353
> 
> 标签：c#, android, xamarin.android, spinner, android-spinner

**我的 XML 示例：**

```
<Table diffgr:id="Table17" msdata:rowOrder="16">
    <IdRec>17</IdRec>
    <FieldId>1213</FieldId>
    <FieldDesc>Equipment</FieldDesc>
    <FieldType>OptionBOX</FieldType>
    <isReadOnly>false</isReadOnly>
    <FieldValue>388</FieldValue>
    <FieldTextValue>B - satisfactory</FieldTextValue>
    <OptBox_Options>
        <Options>
            <myOPT FieldValue="387" FieldTextValue="A - good"/>
            <myOPT FieldValue="388" FieldTextValue="B - satisfactory"/>
            <myOPT FieldValue="389" FieldTextValue="C - needs change"/>        
            <myOPT FieldValue="390" FieldTextValue="D - deal"/>
        </Options>
    </OptBox_Options>
</Table> 
```

**我的问题** 上面的 xml 数据来自一个 web 服务。除了 OptBox_Options 之外的任何字段，我都没有问题，这是我需要用来填充我的微调器的字段。因此，我需要从 OptBox_Options->Options->myOpt(FieldTextValue) 获取字符串（例如：）。

如何访问这些数据？什么是最好的方法。如果你不能给我一个直接的解决方案，我会对这个主题的新手友好 C# 教程的链接感到满意。

**问题已解决**

我将我的字符串转换为 XML，然后将其转换为数据集，然后循环浏览它......下面的代码:)

```
List<string> entries = new List<string>();

String rawXML = item.OptBox_Options;

StringReader stream = null;
XmlTextReader reader = null;

DataSet xmlDS = new DataSet();
stream = new StringReader(rawXML);
// Load the XmlTextReader from the stream
reader = new XmlTextReader(stream);
xmlDS.ReadXml(reader);

DataSet myOPTvalues = new DataSet();
myOPTvalues = xmlDS;

foreach (DataRow row in myOPTvalues.Tables[0].Rows)
{
var optItem = new PrevzemSpin();
optItem.FieldValue = row["FieldValue"].ToString();
if (optItem.FieldValue.Equals("")) optItem.FieldValue = null;

optItem.FieldTextValue = row["FieldTextValue"].ToString();
if (optItem.FieldTextValue.Equals("")) optItem.FieldTextValue = null;

entries.Add(optItem.FieldTextValue);
SpinnerValue.Tag = optItem.FieldValue;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:18:50.160

使用 xml 解析技术，例如`XmlPullParser`,`SAX parser`或`DOM parser`.

XML Pull parser 是 android 开发者网站推荐的解析器[这里](http://www.vogella.com/articles/AndroidXML/article.html)有一个 Pull parser 的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:48:45.060

我将我的字符串转换为 XML，然后将其转换为数据集，然后循环浏览它......下面的代码:)

```
List<string> entries = new List<string>();

String rawXML = item.OptBox_Options;

StringReader stream = null;
XmlTextReader reader = null;

DataSet xmlDS = new DataSet();
stream = new StringReader(rawXML);
// Load the XmlTextReader from the stream
reader = new XmlTextReader(stream);
xmlDS.ReadXml(reader);

DataSet myOPTvalues = new DataSet();
myOPTvalues = xmlDS;

foreach (DataRow row in myOPTvalues.Tables[0].Rows)
{
    var optItem = new PrevzemSpin();
    optItem.FieldValue = row["FieldValue"].ToString();
    if (optItem.FieldValue.Equals("")) optItem.FieldValue = null;

    optItem.FieldTextValue = row["FieldTextValue"].ToString();
    if (optItem.FieldTextValue.Equals("")) optItem.FieldTextValue = null;

    entries.Add(optItem.FieldTextValue);
    SpinnerValue.Tag = optItem.FieldValue;
} 
```

# c# - .net-mvc4 的人脸识别 API

> ID：14477195
> 
> 赞同：0
> 
> 时间：2013-01-23T10:16:14.220
> 
> 标签：c#, image-recognition

我需要使用人脸识别构建应用程序。应用程序的用户需要上传两张图片（两张人脸），应用程序需要返回这张人脸的相似度百分比。我也在寻找能够完成这项工作的 API。今天我使用 SkyBiometry.Client.FC，这个 API 有两种识别算法：默认（简单）和积极（更积极的比较）。在各种图片的所有情况下，比较我得到 60% - 68% 的结果。情况不妙 ：）。您建议为此目的使用什么 API（经过测试）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-18T18:00:06.957

我知道这是一个非常古老的问题，但微软有几个用于面部检测的 API。

人脸 API：[https ://msdn.microsoft.com/en-us/library/mt481457.aspx](https://msdn.microsoft.com/en-us/library/mt481457.aspx)

API参考：[https ://dev.projectoxford.ai/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f30395236](https://dev.projectoxford.ai/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f30395236)

入门教程：[https ://msdn.microsoft.com/en-us/library/mt605323.aspx](https://msdn.microsoft.com/en-us/library/mt605323.aspx)

它们非常易于理解和使用。我已经尝试过它们，它们工作得很好。

希望这有助于有人重新访问这个问题。！

# outlook - 访问 Outlook 2010 邮件项目中的 Message-ID 标头？

> ID：14477199
> 
> 赞同：2
> 
> 时间：2013-01-23T10:16:27.310
> 
> 标签：outlook, outlook-addin, outlook-2010

我想创建 Outlook 2010 的加载项以将所选邮件的 Message-Id 标头发送到我的应用程序，如何访问 Outlook 2010 邮件项中的 Message-ID 标头？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T18:23:22.160

使用读取`PR_INTERNET_MESSAGE_ID`属性（DASL 名称`http://schemas.microsoft.com/mapi/proptag/0x1035001F`）`MailItem.PropertyAccessor.GetProperty()`。

# android - 将堆（碎片情况）增加到 MB 以进行字节分配

> ID：14477200
> 
> 赞同：1
> 
> 时间：2013-01-23T10:16:34.980
> 
> 标签：android

我正在编写具有本机引擎的游戏，我可以轻松地在 Samung Galaxy II 上运行它，但我试图在安装了 Jellybean 的 Beagleboard 上运行它。我的应用/游戏的主进程是com.xxx.yy。该过程在启动后重新启动。我得到的唯一 logcat 信息是

**I/dalvikvm-heap(1802)：将堆（碎片情况）增加到 10.448MB，分配 1233535 字节**

我认为这是导致错误的原因。如果是这样，有人可以建议我这里出了什么问题，以及解决方法是什么。

注意：这可能与[如何增加 android 应用程序的堆大小重复？](https://stackoverflow.com/questions/11275650/how-to-increase-heap-size-of-an-android-application) 我尝试了他的解决方案，但这不起作用。

# c# - C# WinForm + Barcode Scanner 输入，TextChanged 错误

> ID：14477202
> 
> 赞同：2
> 
> 时间：2013-01-23T10:16:49.817
> 
> 标签：c#, .net, winforms, barcode, barcode-scanner

**更新：最后的解决方案**

* * *

我有一个 Winform，label1 将使用从条码扫描器通过`txtBoxCatchScanner`.

场景是人们在通过接待处时在扫描仪下刷他们的 MemberID 卡，Winform 自动在该 MemberID 上进行搜索并返回他们的信息，例如在接待员的 PC 上返回他们的信息，其中 winForm 在她的一角桌面。

我的以下代码在第一次滑动时工作正常（例如第一人称）

数字 MemberID，例如 00888 出现在文本框中，ADO.NET 从 SQL 中提取数据并正常显示。

可能需要注意的一件事，光标在 memberID 的末尾：00888|

到目前为止一切顺利，然后：

当滑动 2（例如下一个人）发生时

他们的数字（比如，00999）被放在 txtBox 中第一个的末尾，例如：0088800999 所以当 TextChanged 触发时，它自然会搜索 0088800999 而不是 00999 ....

我试过了：

```
txtBoxCatchScanner.Clear(); 
```

和

```
txtBoxCatchScanner.Text = ""; 
```

并重新加载表格

在我的代码末尾“刷新”文本框

但我猜他们会触发 TextChanged 事件

在上一次滑动完成后，我如何重新聚焦或...清除旧数字和光标回到 txtBox 的开头...

我是初学者，所以我确定下面的代码很垃圾......

但是，如果有人有时间，请让我知道如何修复它以做我想做的事。

**更新：**

好的，经过多次试验，我现在已经设法让这 1/2 工作了，希望有更多经验的人可以帮助我完成！:P

```
if (txtBoxCatchScanner.Text.Length == 5)
{
label1.Text = txtBoxCatchScanner.Text; // just a label for testing .. shows the memmber ID
txtBoxCatchScanner.Select(0, 5);
} 
```

所以扫描 1，说 00888 ，然后突出显示，扫描 2 ，说 00997 ......甜！覆盖（不附加到）00888 并做到这一点...扫描 2 0011289 ... DOH！

问题：并非所有条形码都是 5 位数字！！它们是随机长度！！会员 ID 范围从 2 位（例如 25）到 10 位，未来还会增长...

编辑：我发现条形码被读取为单独的按键。我认为这就是为什么下面的答案 1 不起作用，而大问题是：

例如，对于 00675，来自扫描仪的输入（？输出）是：

Down: Do Up: Do Down: Do Up: Do Down: D6 Up: D6 Down: D7 Up: D7 Down: D5 Up: D5 down: Retunn Up: Return

其他信息：条码扫描器是：Opticon OPL6845 USB

谢谢

```
private void txtBoxCatchScanner_TextChanged(object sender, EventArgs e)
{             
    Member member = new Member();
    member.FirstName = "";
    member.LastName = "";            

    //Get BarCode
    //VALIDATE: Is a Number           
    double numTest = 0;
    if (Double.TryParse(txtBoxCatchScanner.Text, out numTest))
    {
        //IS A NUMBER
        member.MemberID = Convert.ToInt32(txtBoxCatchScanner.Text);

        //SEARCH
        //Search Member by MemberID (barcode)
        List<Member> searchMembers = Search.SearchForMember(member);

        if (searchMembers.Count == 0)
        {
            lblAlert.Text = "No Member Found";
        }
        else
        {
            foreach (Member mem in searchMembers)
            {
                lblMemberStatus.Text = mem.MemberStatus;
                lblMemberName.Text = mem.FirstName + " " + mem.LastName;
                lblMemberID.Text = mem.MemberID.ToString();

                lblMessages.Text = mem.Notes;

                if (mem.MemberStatus == "OVERDUE") // OR .. OR .. OR ...
                {
                    lblAlert.Visible = true;
                    lblAlert.Text = "!! OVERDUE !!";

                    //PLAY SIREN aLERT SOUND
                    //C:\\WORKTEMP\\siren.wav
                    SoundPlayer simpleSound = 
                        new SoundPlayer(@"C:\\WORKTEMP\\siren.wav");
                    simpleSound.Play();
                }
                else
                {
                    lblAlert.Visible = true;
                    lblAlert.Text = mem.MemberStatus;
                }
            }
        }
    }
    else
    {
        //IS NOT A NUMBER
        lblAlert.Text = "INVALID - NOT A NUMBER";                

        ////
        //lblMemberName.Text = "";
        //lblMemberID.Text = "";
        //lblMemberID.Text = "";
    } 
```

* * *

**解决方案：**

系统不会让我再过 3 个小时回答我自己的问题，因为我是新手，只有 1 个帖子，所以会放在这里：

首先感谢大家的帮助和耐心。

我终于想出了一个解决方案，尚未在凌晨 2 点和就寝时间进行全面测试。

从我的更新开始，我取得了成功，但遇到了 MemberID 问题的可变长度。我现在用下面的代码克服了这个问题：

```
namespace SCAN_TESTING
{
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void txtBoxCatchScanner_KeyUp(object sender, KeyEventArgs e)
    {
        if (e.KeyValue == (char)Keys.Return)
        {
            e.Handled = true;

            int barcodeLength = txtBoxCatchScanner.TextLength;

            txtBoxCatchScanner.Select(0, barcodeLength);

            //TEST
            label3.Text = barcodeLength.ToString();
            //TEST
            label2.Text = txtBoxCatchScanner.Text;

        }

    } 
```

我将把它添加到我之前的“真实”代码中并在早上进行测试但是在这个阶段正在做我想要的！=]

更新：测试它..完全符合需要：

```
private void txtBoxCatchScanner_KeyUp(object sender, KeyEventArgs e)
{
   if (e.KeyValue == (char)Keys.Return)
      {
            e.Handled = true;

            int barcodeLength = txtBoxCatchScanner.TextLength;

            txtBoxCatchScanner.Select(0, barcodeLength);

           //
           //INSERT ORGINAL CODE HERE. No Changes were needed.
           //

      }//end of if e.KeyValue ...
}//end txtBoxCatchScanner_KeyUp 
```

希望对以后的人有帮助！！:)

再次感谢 2 个非常好的解决方案，我可以看到它们是如何工作的，并且学到了很多东西。只是在我的情况下不起作用 - 更可能是由于我自己或我的错误/不理解，或扫描仪类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T10:29:21.537

我不确定实际问题是什么。

```
txtBoxCatchScanner.Clear();
txtBoxCatchScanner.Text = ""; 
```

两者都会触发“已更改”事件。但他们也清除了盒子。所以这应该是你想要做的。

您可以在开始时检查该框是否实际上是空的，如果是则返回。喜欢：

```
if(txtBoxCatchScanner.Text == "" |txtBoxCatchScanner.Text == string.Empty)
return; 
```

因此，如果盒子是空的，则不会发生其他任何事情。

如果我误解了您的问题，请说明，我会尽力提供帮助。

问候

编辑：

如果它看起来像这样，您的函数应该可以工作：

```
 private void txtBoxCatchScanner_TextChanged(object sender, EventArgs e)
{             
Member member = new Member();
member.FirstName = "";
member.LastName = "";            

if(txtBoxCatchScanner.Text == "" | txtBoxCatchScanner.Text == string.Empty)
return;    // Leave function if the box is empty

//Get BarCode
//VALIDATE: Is a Number           
int numTest = 0;
if (int.TryParse(txtBoxCatchScanner.Text, out numTest))
{
    //IS A NUMBER
    //member.MemberID = Convert.ToInt32(txtBoxCatchScanner.Text);
    member.MemberID = numTest; // you already converted to a number...
    //SEARCH
    //Search Member by MemberID (barcode)
    List<Member> searchMembers = Search.SearchForMember(member);

    if (searchMembers.Count == 0)
    {
        lblAlert.Text = "No Member Found";
    }
    else
    {
        foreach (Member mem in searchMembers)
        {
            lblMemberStatus.Text = mem.MemberStatus;
            lblMemberName.Text = mem.FirstName + " " + mem.LastName;
            lblMemberID.Text = mem.MemberID.ToString();

            lblMessages.Text = mem.Notes;

            if (mem.MemberStatus == "OVERDUE") // OR .. OR .. OR ...
            {
                lblAlert.Visible = true;
                lblAlert.Text = "!! OVERDUE !!";

                //PLAY SIREN aLERT SOUND
                //C:\\WORKTEMP\\siren.wav
                SoundPlayer simpleSound = 
                    new SoundPlayer(@"C:\\WORKTEMP\\siren.wav");
                simpleSound.Play();
            }
            else
            {
                lblAlert.Visible = true;
                lblAlert.Text = mem.MemberStatus;
            }
        }
    }
}
else
{
    //IS NOT A NUMBER
    lblAlert.Text = "INVALID - NOT A NUMBER";                

    ////
    //lblMemberName.Text = "";
    //lblMemberID.Text = "";
    //lblMemberID.Text = "";
}
txtBoxCatchScanner.Clear();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T12:41:34.580

您使用的条形码扫描仪似乎起到 HID 的作用 - 一种键盘仿真。我知道的每个简单的条形码扫描仪（我每天都在使用它们）可以选择为扫描的条形码指定后缀。将后缀更改为`CRLF`并向表单添加默认按钮。扫描以结尾的条形码`CRLF`将自动“按下按钮”。

将执行检查的代码从`TextChanged`事件移入按钮`Click`事件的事件处理程序并删除`TextChanged`事件处理程序。然后，当单击按钮时，也清除文本框并将焦点设置回文本框。

你现在应该可以走了。

您可以轻松检查条形码扫描仪是否已经配置了正确的后缀：打开记事本并扫描一些条形码。如果它们都出现在不同的行上，那么一切都很好。否则，您需要扫描扫描仪手册中的一些配置条码。

总而言之，这应该是按钮`Click`事件的代码：

```
private void btnCheckMember_Click(object sender, EventArgs e)
{             
    Member member = new Member();
    member.FirstName = "";
    member.LastName = "";            

    string memberText = txtBoxCatchScanner.Text.Trim();
    txtBoxCatchScanner.Text = String.Empty;

    int numTest = 0;
    if (String.IsNullOrEmpty(memberText) ||!Int32.TryParse(memberText, out numTest))
    {
        //IS NOT A NUMBER
        lblAlert.Text = "INVALID - NOT A NUMBER";                
        return;
    }

    member.MemberID = numTest;
    List<Member> searchMembers = Search.SearchForMember(member);

    if (searchMembers.Count == 0)
    {
        lblAlert.Text = "No Member Found";
    }
    else
    {
        foreach (Member mem in searchMembers)
        {
            lblMemberStatus.Text = mem.MemberStatus;
            lblMemberName.Text = mem.FirstName + " " + mem.LastName;
            lblMemberID.Text = mem.MemberID.ToString();

            lblMessages.Text = mem.Notes;

            if (mem.MemberStatus == "OVERDUE") // OR .. OR .. OR ...
            {
                lblAlert.Visible = true;
                lblAlert.Text = "!! OVERDUE !!";

            SoundPlayer simpleSound = new SoundPlayer(@"C:\\WORKTEMP\\siren.wav");
            simpleSound.Play();
        }
        else
        {
            lblAlert.Visible = true;
            lblAlert.Text = mem.MemberStatus;
        }
    }
} 
```

该解决方案避免了以下问题：

1.  在文本框内容中添加/删除每个字符时触发事件（扫描条形码时也是如此：它们被一个一个添加，就像在键盘上输入一样）
2.  1.对每个输入的字符进行成员检查的问题
3.  2.数据库中`XYZ`有成员就永远找不到成员的问题，找到`XY`后就停止检查`XY`
4.  导致 3.`XY`也找不到 member 的问题，但只有 member `Z`，因为在 3\. 中，文本框被清除并且`Z`是唯一输入的字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-19T11:07:16.710

在下一个 textChange 事件中清除 textBox 的最佳方法。

插入这一行

`txtBoxCatchScanner.SelectAll();`

在 TextChange 函数的末尾。这将选择文本，以便在下一个事件中轻松替换我。

# php - 更改 codeigniters 日历模板

> ID：14477208
> 
> 赞同：2
> 
> 时间：2013-01-23T10:17:11.967
> 
> 标签：php, codeigniter, codeigniter-2

我正在使用 code-igniter 构建一个 Web 应用程序，我在自定义日历模板时遇到了问题。我使用 code-igniter 的日历库构建日历

![在此处输入图像描述](../Images/99b8b74e035f7c2a442daf00aa616d7d.png)

现在我想更改模板，以便那天应该列出如下

* * *

## 1

## 2

## 3

.. ETC

而不是

* * *

1 2 3

* * *

4 5 6

* * *

谁能告诉我怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:26:26.410

取自：[http ://ellislab.com/codeigniter/user-guide/libraries/calendar.html](http://ellislab.com/codeigniter/user-guide/libraries/calendar.html)

通过创建日历模板，您可以 100% 控制日历的设计。日历的每个组件都将放置在一对伪变量中，如下所示：

> $prefs['模板'] = '
> 
> {table_open}{/table_open}
> 
> {heading_row_start}{/heading_row_start}
> 
> {heading_previous_cell}<<{/heading_previous_cell}
> {heading_title_cell}{heading}{/heading_title_cell}
> {heading_next_cell}>>{/heading_next_cell}
> 
> {heading_row_end}{/heading_row_end}
> 
> {week_row_start}{/week_row_start}
> {week_day_cell}{week_day}{/week_day_cell}
> {week_row_end}{/week_row_end}
> 
> {cal_row_start}{/cal_row_start}
> {cal_cell_start}{/cal_cell_start}
> 
> {cal_cell_content}{day}{/cal_cell_content} {cal_cell_content_today}{day}{/cal_cell_content_today}
> 
> {cal_cell_no_content}{day}{/cal_cell_no_content}
> {cal_cell_no_content_today}{day}{/cal_cell_no_content_today}
> 
> {cal_cell_blank} {/cal_cell_blank}
> 
> {cal_cell_end}{/cal_cell_end}
> {cal_row_end}{/cal_row_end}
> 
> {table_close}{/table_close} ';
> 
> $this->load->library('日历', $prefs);
> 
> 回声 $this->日历->generate();

所以你必须使用不同的 HTML 和/或 CSS 来改变你的设计。

# sql-server-2008 - 使用 isnumeric 将 varchar 转换为十进制而不在 SQL Server 2008 中引发异常

> ID：14477214
> 
> 赞同：1
> 
> 时间：2013-01-23T10:17:24.447
> 
> 标签：sql-server-2008, casting, decimal, varchar

我有一个 varchar 字段，在应用过滤器时应该始终包含一个数字（十进制）值。但是当我像这样运行 sql 时出现“将数据类型 varchar 转换为数字时出错”：

```
SELECT CAST(A.text AS numeric(38,16)) 
FROM Answers A
INNER JOIN Questions Q ON Q.ID = A.QuestionID
WHERE Q.Text = 'Rating'
AND isnumeric(A.text) = 1 
```

只有一个值通过了非数字测试但未通过强制转换：

```
DECLARE @text varchar(100)
SET @text = '2.83417869359255E-02'
SELECT CASE WHEN ISNUMERIC(@text) = 1 THEN CAST(@text AS NUMERIC(38,16)) ELSE NULL END 
```

我应该如何确保处理这样的值？在一天结束时，我想计算所有小于 5 的值，所以像“2.83417869359255E-02”这样的数字可以四舍五入为零。我还运行了一个查询来检查表中的值以及 varchar 的长度以及这些结果：

```
MaxValue             MinValue             LenVarChar
-------------------- -------------------- -----------
0                    0                    1
10                   10                   2
2.2                  9.2                  3
3.55                 6.32                 4
5.453125             5.453125             8
2.79989361763        9.47216796875        13
2.089115858078       9.132080078125       14
1.1529632806778      9.8538990020752      15
0.64174896478653     9.83681106567383     16
0.111961431801319    0.991760730743408    17
2.83417869359255E-02 2.83417869359255E-02 20 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:25:24.287

不将数字存储为字符串将是我的首选解决方案，但您始终可以检查`D`or`E`然后先转换为浮点数。

```
DECLARE @text VARCHAR(100)

SET @text = '2.83417869359255E-02'

SELECT
    CASE
    WHEN ISNUMERIC(@text) = 1
    THEN      CASE 
              WHEN @text LIKE '%[DE]%' 
              THEN CAST(CAST(@text AS FLOAT) AS NUMERIC(38, 16))
              ELSE @text
              END 
    END 
```

然而，仍然存在潜在的问题输入，例如`$`（通过`ISNUMERIC`测试但需要强制转换为`money`）

# ruby-on-rails - after_sign_in_path_for

> ID：14477218
> 
> 赞同：2
> 
> 时间：2013-01-23T10:17:27.413
> 
> 标签：ruby-on-rails, devise

我`devise`在我的应用程序中使用。

我想在用户登录时弹出一条欢迎消息。

所以在我的`application_controller.erb`定义中：

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  before_filter :authenticate_user!

  def after_sign_in_path_for(user)
    alert('Welcome!')
  end

  def after_sign_out_path_for(user)
    new_user_session_path
  end
end 
```

当我尝试登录我的应用程序时，出现错误：

```
ArgumentError in Devise::SessionsController#create

wrong number of arguments (1 for 0)
Rails.root: /home/alon/alon/todolist

Application Trace | Framework Trace | Full Trace
app/controllers/application_controller.rb:14:in `after_sign_in_path_for' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T10:57:47.610

默认情况下，设计会添加 Flash 消息。无需设置flash message。只需要在视图中显示flash message。试试下面的代码。

在你的 app/views/layouts/application.html.erb

```
<% flash.each do |type, message| %>
  <div class="flash">
     <%= message %>
  </div>        
<% end %> 
```

仅供参考 after_sign_in_path_for 不用于设置闪存消息。它只是通知设计成功登录后要将应用程序重定向到哪里的路径。

让我们设置成功的登录重定向路径

在你的 config/routes.rb

```
match "users/dashboard" => "controllername#action" 
```

最后更改 after_sign_in_path_for 方法

```
def after_sign_in_path_for(user)
  users_dashboard_path
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T10:58:56.730

您正在从 rb 文件中调用 javascript 函数“alert()”。你应该定义路径

```
 def after_sign_in_path_for(user)
    some_path
  end 
```

并在带有 javascript_tag 的视图中使用 alert()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-25T17:39:59.493

如果您安装了 Bootstrap，这是我发现发出警报消息的最佳方法。

将其添加到您的`app/views/layouts/application.html.erb`右上方`<%= yield %>`

```
<% if notice %>
  <p class="alert alert-success"><%= notice %></p>
<% end %>
<% if alert %>
  <p class="alert alert-danger"><%= alert %></p>
<% end %> 
```

我从[RailsGirls得到这个](http://guides.railsgirls.com/devise/)

# c++ - “不是 gcc 4.5.2 编译器错误的直接基础”

> ID：14477221
> 
> 赞同：1
> 
> 时间：2013-01-23T10:17:31.047
> 
> 标签：c++

我有这个代码

```
#include <vector>
#include <array>

template <typename T>
struct Vertice
{
    T elements_[4];

    Vertice(const T & x, const T & y, const T & z)
    {
        elements_[0] = x;
        elements_[1] = y;
        elements_[2] = z;
        elements_[3] = T(1);
    }
    Vertice() : Vertice(T(0), T(0), T(0)) {}
};

typedef Vertice<float> VerticeF;
std::array<VerticeF, 5> v2; 
```

并在使用 gcc 4.5.2 编译时返回以下错误：

```
$ g++ -o tutorial tutorial.cpp -std=gnu++0x
tutorial.cpp: In constructor ‘Vertice<T>::Vertice() [with T = float]’:
/usr/include/c++/4.5/tr1_impl/array:50:5:   instantiated from here
tutorial.cpp:28:41: error: type ‘Vertice<float>’ is not a direct base of ‘Vertice<float> 
```

但是，如果我不使用构造函数委托，则可以正常工作。

为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T10:19:09.567

GCC 4.5 不支持构造函数委托；您需要使用 GCC 4.7；见[http://gcc.gnu.org/projects/cxx0x.html](http://gcc.gnu.org/projects/cxx0x.html)。

# c# - 用于执行命令行解释器的 IIS 7 应用程序池配置

> ID：14477228
> 
> 赞同：0
> 
> 时间：2013-01-23T10:17:44.203
> 
> 标签：c#, asp.net, iis, iis-7, iis-7.5

我的网站在`IIS 7`. 我在 IIS 7 上托管了 10 个具有不同子域的站点。我正在使用`.NET framework 3.5`和`SQL Server 2008 R2`. 我已经配置了三个站点，`DefaultAppPool`而我为其他站点创建`separate application pool for each`并配置了它们的特定站点。

我允许用户上传视频，上传完成后我习惯`hint`使用服务器端代码。`(a process to make bit rates of video equal for on-line streaming on android)``MP4BOX - a command line interpreter`

我面临的问题是在使用正常工作时`DefaultAppPool`，`MP4BOX`但是当我将站点配置为特定的`appPool,` `MP4BOX`停止工作时。我已经通过`settings`但没有发现任何问题。谁能帮我克服这个问题。

等待您的宝贵回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:33:24.623

自己解决了`assigning read/writes permission to the application pool to the directory`。经过大量研究，我发现这是由于对`exe`特定目录的读/写权限而发生的。`MP4BOX`需要有读/写权限才能在 IIS 目录中创建视频文件。因此，我已将应用程序池作为用户添加到`mp4box`正在访问以进行读写的特定目录。

# objective-c - 在自定义框架中添加自定义框架

> ID：14477236
> 
> 赞同：4
> 
> 时间：2013-01-23T10:17:57.480
> 
> 标签：objective-c, xcode, frameworks

我正在用 XCode 开发一个 iOS 真实框架。这`Framework (A)`需要外部`framework (B)`编译。例如：

```
A FRAMEWORK
+Frameworks
 -B FRAMEWORK 
```

它通过以下方式导入 A：

```
#import<BFRAMEWORK/bframework.h> 
```

我创建`A.framework`要在项目中链接的。

问题是当我`A Framework`在项目中链接它时。项目返回`"BFRAMEWORK/bframework.h`“未找到。

我想包括在内`B framework`，`A.framework`所以不需要`B framework`在我的项目中添加。例如：

```
MY PROJECT
+Frameworks
 -A.Framework (with B Framework included inside). 
```

你知道怎么做吗？或其他方式来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-12T14:30:24.610

我能够使用 iOS-Universal-Framework 创建这个结构：[https](https://github.com/kstenerud/iOS-Universal-Framework) ://github.com/kstenerud/iOS-Universal-Framework 。

我使用 1 个方法创建了一个静态 iOS 框架“FrameworkB”，该方法被导入第二个静态 iOS 框架“框架 A”，其中 1 个方法调用了 FrameworkB 的方法。然后我创建了一个 iPad 应用程序，它导入 FrameworkA 并调用该方法。代码运行良好并从 FrameworkA 打印（从 FrameworkB 获取），当然 FrameworkB 没有导入。请注意，必须为相同的配置文件构建所有框架（我使用的是 iPad），否则您将收到链接器错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-18T19:39:06.233

也许你在编译源中添加了 BFramework？或者在标题搜索路径中添加标题？或在构建设置中设置依赖项。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-23T11:16:07.347

我想你正在寻找`OTHER_LDFLAGS = -ObjC`

# autocad - AutoCAD 2013 - 错误：ARXLOAD 失败

> ID：14477242
> 
> 赞同：1
> 
> 时间：2013-01-23T10:18:11.787
> 
> 标签：autocad, objectarx

目前我有 AutoCAD 2012 并想升级到 AutoCAD 2013。

我有一个自定义添加到我的 AutoCAD。但是当我尝试加载这个时，我得到了这个：

COM.VLX 已加载。错误：ARXLOAD 失败

```
 Here is a part of my acaddoc.lsp:
    ;; ACADDOC.LSP is loaded into memory before the drawing is completely     
    ;; initialized. S::STARTUP is called when a new drawing or an existing    
    ;; drawing is opened. And is guaranteed to perform any setup operations   
    ;; after a drawing is initialized.                                        

    (defun LoadARXVBA(/ strplatform strExt)
      (if (wcmatch (getvar "platform") "*(x64)*")
        (setq strExt "x64.arx")
        (setq strExt ".arx")
      )  

             ;; load arx modules
             (arxload (strcat "DetectESC" strExt))
             (arxload (strcat "osnap" strExt))
             (arxload (strcat "beditReactor" strExt))
             ;; load vba projects
             (vla-loaddvb (acadobject) (findfile "sinkblock.dvb"))
             (vla-loaddvb (acadobject) (findfile "triggers.dvb"))
             (if (member "plotlog.arx" (arx));if loaded by acad.rx
                 (vla-loaddvb (acadobject) (findfile "PlotLog.dvb"))
             )   
             ;; connect to plotlog server
             (if (member (strcat "plotlog" strExt) (arx))
               (vla-runmacro (acadobject) "StartMonitor")
             )   
             ;; visuallisp projects
             (load "base.vlx")
             (load "startup.vlx")
         (load "TSLOAD"); Load TIMESAVERS' commands:
             (defun EVALCHK (dummy / ) 1)
             ;; run stuff
             (startup)
    )  

(defun-q    main(/)
    ;; load visuallisp & vba projects
    (setvar "screenmenu" 1) 
    (setvar "menubar" 1)    
    (load "com.vlx")
    (if (eq (vla-get-visible (acadobject)) :vlax-true)
      (LoadARXVBA)

    ) ;end if
    (princ)
) ;end main

(setvar "savetime" 8) 

;; append 'main function to any posible existing S::STARTUP function
(setq s::startup (append s::startup main))
;|«Visual LISP© Format Options»
(100 2 1 2 nil "end of " 100 70 0 0 nil T T nil T)
;*** DO NOT add text below the comment! ***|; 
```

谁能帮我这个？我在某些地方读到arx加载发生了一些变化......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-22T12:39:50.093

下载 ObjectARX 2013：[http](http://usa.autodesk.com/adsk/servlet/item?siteID=123112&id=785550) ://usa.autodesk.com/adsk/servlet/item?siteID=123112&id=785550并使用 2013 SDK 重建您的解决方案。

这是 AutoCAD 2013 和 MSVC 2010 的 ObjectARX 向导：[http ://usa.autodesk.com/adsk/servlet/item?siteID=123112&id=785550](http://usa.autodesk.com/adsk/servlet/item?siteID=123112&id=785550)

希望它有所帮助。

汤姆，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T04:14:16.847

ARX 模块需要使用 ObjectARX 2013 SDK 重新构建，以便在 AutoCAD 2013 中使用。

# javascript - 防止在表单提交时重新加载页面

> ID：14477244
> 
> 赞同：0
> 
> 时间：2013-01-23T10:18:15.927
> 
> 标签：javascript, html, get

我正在尝试使用 get 方法提交表单，但我不希望表单刷新，或者当它重新加载时我想维护数据。似乎有很多类似的问题，但我尝试过的都没有帮助。我在这里发布我的代码：

```
<script type="text/javascript">
 function formSubmit()
 {
     document.getElementById('form1').submit();
     return false;
 }
</script>

<form id = "form1" method = "GET">
    <br> Query:  <input name="query" id="query" type="text" size="50" value="">
   <input type="button" name="search" value="Get News" onclick = "formSubmit()">
</form> 
```

我在服务器端使用 python。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:21:51.490

该声明：

```
 I am trying to submit a form using get method but I dont want the form  to 
refresh or rather when it reloads I want to maintain the data. 
```

对我来说意味着您的最终目标需要 AJAX 或至少将一些数据传递到服务器并返回。如果不使用 cookie 之类的东西或将数据传入/传出服务器，您将无法通过页面刷新在 Javascript 中保留范围。话虽如此，当您想要保留范围（或主存储）时，这些更类似于二级存储机制。为此，我会推荐 AJAX。

# html - Chrome 中的断词错误？但在 IE 中显示正确！！在 HTML 代码中使用中文单词时

> ID：14477249
> 
> 赞同：0
> 
> 时间：2013-01-23T10:18:28.527
> 
> 标签：html, css, internet-explorer, google-chrome, line-breaks

我的CSS：

```
 .testBox {
        width: 100px;
        height: 200px;
        border: 1px solid;
        word-wrap: break-word;
        word-break: normal;
    } 
```

我的 HTML：

```
<div class="testBox">
    <p>中新网北京1月4日电(记者 俞岚 周锐)中国对3.53亿元<span>人&lt;/span><span>民&lt;/span><span>币&lt;/span><span>。&lt;/span>这也是迄今为止中国开出的金额最高的一张价格违法罚单&lt;/p>
</div>
<div class="testBox">
    <p>中新网北京1月4日电(记者 俞岚 周锐)中国对3.53亿元人民币。这也是迄今为止中国开出的金额最高的一张价格违法罚单&lt;/p>
</div>
<div class="testBox">
    <p>123456789<span>a</span><span>b</span><span>c</span><span>d</span>efghigkilmnopqrstuvwxz</p>
</div>
<div class="testBox">
    <p>123456789abcdefghigkilmnopqrstuvwxz</p>
</div> 
```

请注意“亿”！之后，Chrome中有break-word，IE中没有

我做了一些“跨度”来包裹角色.....为什么？？？怎么写才能达到同样的效果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:20:40.900

在[CSS 文档](http://www.w3.org/TR/2003/CR-css3-text-20030514/#wordbreak-props)中：

> 该`word-break`属性指定非 CJK 脚本的换行规则。
> 
> **提示：** CJK 脚本是中文、日语和韩语（“CJK”）脚本。

所以，我想它不适用于 CJK 脚本......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:12:07.877

利用

```
word-break: break-all; 
```

根据[CSS3 文本](http://www.w3.org/TR/css3-text/#word-break)草案，这样的设置允许在任意两个字母之间换行。它补充说：“此选项主要用于文本主要使用 CJK 字符和少数非 CJK 摘录的上下文，并且希望文本更好地分布在每一行。”</p>

该值`normal`意味着“单词按照通常的规则中断”，这或多或少依赖于浏览器。

# file-io - AWK：将结果写入具有格式化名称的文件

> ID：14477250
> 
> 赞同：0
> 
> 时间：2013-01-23T10:18:40.113
> 
> 标签：file-io, awk, formatted-text

以下`AWK`代码从日志文件中提取 Java 线程转储：

```
# First thread dump line
/^Full thread dump Java/        {
        thread_dump=1;
        counter++;
        printf "Thread dump #%d\n", counter
}           

# Last thread dump text block    
/^Heap[:space:]*$/ {
        thread_dump=2;
}               

# Last thread dump line
{ if (thread_dump==2 && $0 ~ "^[:space:]*$") {
        thread_dump=0;  
        printf "End of Thread dump #%d\n\n", counter;
                                             }
}                                       

# Print line only if in thread dump block
{ if (thread_dump!=0) {print $0 } } 
```

结果`awk -f extract.awk log.out`是这样的：

```
Thread dump #1
Full thread dump Java HotSpot(TM) 64-Bit Server VM (20.12-b01 mixed mode):   
...
End of Thread dump #1

Thread dump #2
Full thread dump Java HotSpot(TM) 64-Bit Server VM (20.12-b01 mixed mode):
...
End of Thread dump #2 
```

我想将每个线程转储写入一个单独的文件。文件名应该包括一些数据，比如日期和连续 ID，比如`thread_dump_002_2013_01_23_14_15`.

**如何将`print`命令重定向到格式化的文件名？**

**更新：**

以下作品：

```
print $0 >"some_file_name.txt" 
```

但是，以下内容：

```
print $0 > counter".txt" 
```

返回以下错误：

```
awk: syntax error at source line 25 source file extract.awk
 context is
    { if (thread_dump!=0) { print $0 >>>  >counter".txt" <<<  } }
awk: illegal statement at source line 26 source file extract.awk 
```

PS：我在mac上使用AWK。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:23:58.803

只需尝试添加`>counter".txt"`到您的打印语句中。例如：

```
printf "Thread dump #%d\n", counter >counter".txt"; 
```

如上所述，每个打印语句都应附加此字符串。然后尝试运行 awk 脚本。

某些版本的 unix 不支持这种语法。你有没有在行尾加分号？

在这种情况下，请执行以下操作：

```
file=counter".txt";
    printf "Thread dump #%d\n", counter >file; 
```

# javascript - 动画完成时球停止

> ID：14477251
> 
> 赞同：1
> 
> 时间：2013-01-23T10:18:45.553
> 
> 标签：javascript, jquery, html, canvas

我有基本的想法，一个球正在弹跳，在所有弹跳之后它应该在舞台动画完成时停止。

**问题-**

球反弹很好，动画是我想要的。但是当动画完成时它仍然没有停止，它会超出框架。

我不兼容的解决方案-

```
if(y>=300)
{
x=110;
y=300;
} 
```

但是球在振动。

**我想-**

球应平稳停止。

**小提琴链接**- [http://jsfiddle.net/stackmanoz/xWvEU/](http://jsfiddle.net/stackmanoz/xWvEU/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:47:17.657

您需要[清除](https://developer.mozilla.org/en-US/docs/DOM/window.clearInterval)绘制动画的间隔。

在您的代码上，我做了以下更改：

```
function init()
{
  var ctx=document.getElementById("canvas").getContext("2d");

  return interval = setInterval(draw,10);
} 
```

然后在 if 上：

```
if(y>=300)
{
    clearInterval(interval);
} 
```

[在这个小提琴](http://jsfiddle.net/eNQs5/1/)上检查它

# ios - 如何在我的 iOS 应用中添加 UIActivityIndi cator 视图？

> ID：14477253
> 
> 赞同：1
> 
> 时间：2013-01-23T10:18:49.677
> 
> 标签：ios, xcode, multithreading, loading, uiactivityindicatorview

我不知道如何解释，但是...如果你理解我说的“加载圈”完美，我只想这样做

```
 // Start loading in the middle of the screen frozing all interaction
    for (int c = 0; c < ([barcos count] - 1); c++)
    {
        NSArray *datos = [[barcos objectAtIndex:c] componentsSeparatedByString:@";"];
        NSString *nombreImagen = [datos objectAtIndex:2];
        NSURL *accesoFtp = [NSURL URLWithString:[NSString stringWithFormat:@"%@/%@",urlFtp,nombreImagen]];
        NSData *imagen = [NSData dataWithContentsOfURL:accesoFtp];
        [imagen writeToFile:[[NSString alloc] initWithString: [docsDir stringByAppendingPathComponent:[NSString stringWithFormat:@"Barcos/%@",nombreImagen]]] atomically:NO];
    }
    // Stop frozing all interaction and remove the loading circle 
```

可能我必须添加一个线程或其他东西，但我不知道如何做我想要的，我希望你能再次帮助我。谢谢。

编辑：

```
UIActivityIndicatorView *activityIndicator;
activityIndicator = [[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
activityIndicator.frame = CGRectMake(0.0, 0.0, 40.0, 40.0);
activityIndicator.center = self.view.center;
[self.view addSubview: activityIndicator];

activityIndicator.startAnimating;

dispatch_queue_t queue = dispatch_get_global_queue(0,0);

dispatch_async(queue, ^{

        for (int c = 0; c < ([barcos count] - 1); c++)
        {
            NSArray *datos = [[barcos objectAtIndex:c] componentsSeparatedByString:@";"];
            NSString *nombreImagen = [datos objectAtIndex:2];
            NSURL *accesoFtp = [NSURL URLWithString:[NSString stringWithFormat:@"%@/%@",urlFtp,nombreImagen]];
            NSData *imagen = [NSData dataWithContentsOfURL:accesoFtp];
        [imagen writeToFile:[[NSString alloc] initWithString: [docsDir stringByAppendingPathComponent:[NSString stringWithFormat:@"Barcos/%@",nombreImagen]]] atomically:NO];
        }

    dispatch_sync(dispatch_get_main_queue(), ^{
        activityIndicator.stopAnimating;
    });
}); 
```

两件事情

```
 1.- The activity indicator is too small but works, if I can to it bigger or same size but make darker the background would be better (Thanks!)
 2.- I have a warning with startAnimating and stopAnimating "Property access result unused - getters should not be used for side effects" 
```

谢谢 =)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T10:23:11.050

可以使用[**MBProgressHUD完成**](https://github.com/jdg/MBProgressHUD)

还要检查此代码：

```
//Show your activity indicator here

dispatch_queue_t queue = dispatch_get_global_queue(0,0);

dispatch_async(queue, ^{
    for (int c = 0; c < ([barcos count] - 1); c++)
    {
        NSArray *datos = [[barcos objectAtIndex:c] componentsSeparatedByString:@";"];
        NSString *nombreImagen = [datos objectAtIndex:2];
        NSURL *accesoFtp = [NSURL URLWithString:[NSString stringWithFormat:@"%@/%@",urlFtp,nombreImagen]];
        NSData *imagen = [NSData dataWithContentsOfURL:accesoFtp];
        [imagen writeToFile:[[NSString alloc] initWithString: [docsDir stringByAppendingPathComponent:[NSString stringWithFormat:@"Barcos/%@",nombreImagen]]] atomically:NO];
    }
    dispatch_sync(dispatch_get_main_queue(), ^{
              //hide that activity indicator here
            });

}); 
```

**编辑：**

永远不要调用如下方法：

```
activityIndicator.startAnimating;
activityIndicator.stopAnimating; 
```

这些用于调用 setter 和 getter。

将其更改为：

```
[activityIndicator startAnimating];
[activityIndicator stopAnimating]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T10:34:15.670

您可以使用 UIActivityIndi​​catorView。

```
UIActivityIndicatorView *activityIndicator;

activityIndicator = [[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
activityIndicator.frame = CGRectMake(0.0, 0.0, 40.0, 40.0);
activityIndicator.center = self.view.center;
[self.view addSubview: activityIndicator]; 
```

此外，如 Midhun MP 所示，您可能必须使用异步来例如在指标显示时加载数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T10:24:20.827

也许您可以尝试活动指示器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T10:28:48.200

您可以尝试使用[svprogresshud](https://github.com/samvermette/SVProgressHUD)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-23T11:02:44.337

您可以更改活动指示器的样式，

```
UIActivityIndicatorView *spinner = [[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
    UIActivityIndicatorView *spinner = [[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActionSheetStyleDefault];
    UIActivityIndicatorView *spinner = [[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];
    UIActivityIndicatorView *spinner = [[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    UIActivityIndicatorView *spinner = [[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActionSheetStyleBlackOpaque];
    UIActivityIndicatorView *spinner = [[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActionSheetStyleBlackTranslucent]; 
```

使用任何这些样式。

并且此链接可以帮助解决您的第二个问题 [xCode“未使用的属性访问结果 - getter 不应用于副作用”](https://stackoverflow.com/questions/5346682/xcode-property-access-results-unused-getters-should-not-be-used-for-side-effe)

解决方案：而不是使用`activityIndicator.startAnimating;`和`activityIndicator.stopAnimating` 使用`[activityIndicator startAnimating];`和`[activityIndicator stopAnimating];`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-25T19:29:43.987

更改活动指示器的大小：

```
activityIndicator.frame = CGRectMake(0.0, 0.0, 80.0, 80.0);
activityIndicator.transform = CGAffineTransformMakeScale(1.75, 1.75); 
```

顺便说一句，如果您正在填充表格视图，您可以考虑在启动活动指示器的同时启用用户交互：

```
[activityIndicator startAnimating];
tableView.userInteractionEnabled = NO; 
```

并在之后恢复它：

```
[self.tableView reloadData];
[activityIndicator stopAnimating];
tableView.userInteractionEnabled = YES; 
```

# hadoop - 无法在 Reducer 中对数据进行分组

> ID：14477261
> 
> 赞同：0
> 
> 时间：2013-01-23T10:19:22.890
> 
> 标签：hadoop, mapreduce

我正在尝试编写一个 MapReduce 应用程序，其中 Mapper 将一组值传递给 Reducer，如下所示：

你好
世界
你好
你好
世界
你好

现在这些值将首先被分组和计数，然后进行一些进一步的处理。我写的代码是：

```
public void reduce(Text key, Iterable<Text> values, Context context) 
        throws IOException, InterruptedException {

    List<String> records = new ArrayList<String>();

    /* Collects all the records from the mapper into the list. */
    for (Text value : values) {
        records.add(value.toString());
    }
    /* Groups the values. */
    Map<String, Integer> groupedData = groupAndCount(records);
    Set<String> groupKeys = groupedData.keySet();

    /* Writes the grouped data. */
    for (String groupKey : groupKeys) {
        System.out.println(groupKey + ": " + groupedData.get(groupKey));
        context.write(NullWritable.get(), new Text(groupKey + groupedData.get(groupKey)));
    }
}

public Map<String, Integer> groupAndCount(List<String> records) {
    Map<String, Integer> groupedData = new HashMap<String, Integer>();
    String currentRecord = "";

    Collections.sort(records);
    for (String record : records) {
        System.out.println(record);

        if (!currentRecord.equals(record)) {
            currentRecord = record;
            groupedData.put(currentRecord, 1);
        } else {
            int currentCount = groupedData.get(currentRecord);
            groupedData.put(currentRecord, ++currentCount);
        }
    }

    return groupedData;
} 
```

但是在输出中，我得到的计数都是 1。sysout 语句打印如下：

Hello
World
Hello: 1
World: 1
Hello
Hello: 1
Hello
World
Hello: 1
World: 1
Hi
Hi: 1

我不明白问题是什么，为什么不是所有记录都被 Reducer 立即接收并传递给该`groupAndCount`方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:30:15.853

正如您在评论中指出的那样，如果每个值都有不同的对应键，那么它们不会在同一个 reduce 调用中减少，您将获得当前看到的输出。

Hadoop reducer 的基础是对于同一个键将收集和减少值的概念 - 我建议您重新阅读一些 Hadoop 入门文档，尤其是 Word Count 示例，这似乎大致是您想要实现的目标用你的代码。

# c# - 多个用户同时请求 30,000 行信息

> ID：14477263
> 
> 赞同：3
> 
> 时间：2013-01-23T10:19:27.840
> 
> 标签：c#, sql, sql-server-2008

我有一个可供 3 个用户使用的测试台应用程序。

如果所有用户同时运行该应用程序，则一个存储过程运行，并且所有三个都将具有结果集，当前使用`ADO.NET Datatable`大约 30,000 条记录，然后应用程序需要将这些记录移动到每个记录的 Excel 模板中。

模板是一个`xlsm`文件，其中包含一些`VBA`在导入数据后需要运行的文件。此模板保存在解决方案中。

我将尝试将数据从使用移动`DataTable`到`worksheet``Excel-Interop`

有没有人将这么多数据从 Datatable 移动到 Excel 中的经验？

@slugster 建议“从 Excel 设置数据源并使用脏读运行查询”......是否可以设置`Excel`链接到非物化数据表的数据源？

循环遍历 30000 行 x 10 列的表会`xl interop`遇到问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-05T12:37:22.427

> 有没有人将大量数据从 Datatable 移动到 Excel 中的经验？

不是来自 DataTable 对象，而是使用 Excel 内置的数据导入功能的数据量，是的。

> @slugster 建议“从 Excel 设置数据源并使用脏读运行查询”......是否可以在 Excel 中设置链接到非物化数据表的数据源？

我也建议这样做。更进一步，我建议创建一个存储过程然后调用它。您应该会看到使用存储过程的更好性能。该程序可以收集和准备数据，然后将其返回到 Excel。此外，您可以在过程中构建缓存机制。例如，如果您的数据每天只更改一次，那么您每天只在源表中重建一次数据，因此只有第一个请求数据的用户会受到初始性能影响。此外，根据您在 VBA 中的 Excel 中执行的后处理类型，也许这也可以在过程中进行处理。如果您将 SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED 添加到过程的顶部，该过程还将有助于减少锁定问题的可能性，

Here's a nice article regarding using stored procedures in Excel: [http://codebyjoshua.blogspot.com/2012/01/get-data-from-sql-server-stored.html](http://codebyjoshua.blogspot.com/2012/01/get-data-from-sql-server-stored.html)

> Will looping through a table that is 30000 rows by 10 columns via xl interop run into problems?

This depends on your definition of "problems." I could see possible performance implications, however if you handle as much as you can in the stored procedure, you should be fine. In the world of data, that's really teeny tiny.

# css - CSS - 黑色背景上的白色文本，看起来更大胆

> ID：14477265
> 
> 赞同：28
> 
> 时间：2013-01-23T10:19:29.810
> 
> 标签：css, fonts, background

当在黑色背景上使用白色文本时，文本看起来比它应该看起来更胖。它带有css的纯文本。我正在使用 typekit.org 字体。

![在此处输入图像描述](../Images/dfedf07551ea1674080717b86f7e0cf8.png) ![在此处输入图像描述](../Images/4c51ee3d2ab434f49ab9a1d477d02662.png)

有什么办法可以解决这个问题还是某种抗锯齿问题？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-02T20:57:23.503

由于浏览器中使用了抗锯齿算法，文本为粗体。很容易验证。在 IE、Safari、Firefox 和 Chrome 中截屏。他们都以不同的方式抗锯齿。有些使文本看起来比其他文本更厚。一般来说，更好的文本看起来是黑底白字，它看起来越胖。

这里有一个完整的解释：[http ://www.lighterra.com/articles/macosxtextaabug/](http://www.lighterra.com/articles/macosxtextaabug/)

这将在大多数浏览器中关闭抗锯齿：

```
body {
-webkit-font-smoothing: antialiased;
-moz-font-smoothing: antialiased;
-o-font-smoothing: antialiased;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-14T02:04:19.993

实际上，这是一个[已知的](https://code.google.com/p/chromium/issues/detail?id=163369 "已知") [错误](https://code.google.com/p/chromium/issues/detail?id=142584 "漏洞")：

我能够通过使用来解决这个问题：

```
-webkit-font-smoothing:antialiased 
```

来源：[这篇文章（缓存在archive.org上）](https://web.archive.org/web/20131019233655/http://tanookilabs.com/your-fonts-look-bad-in-chrome-heres-the-fix "archive.org 上的这篇文章")。

有点晚了，但它可能对某些人仍然有用。

请记住[这是不推荐](http://usabilitypost.com/2012/11/05/stop-fixing-font-smoothing/)的。除非您在 MacOS 上并且在深色背景上使用浅色文本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-21T10:40:58.627

这不是错觉。这是一个与操作系统和浏览器相关的问题，在 2018 年仍然存在。这个小片段演示了这个问题：

```
<div style="background-color: #000; font-size: 16px; position: relative;">
  <div style="color: #fff;">Hello World</div>
  <div style="color: #000; position: absolute; top:0;">Hello World</div>
</div>
```

如果您坐在 macOS 盒子前，您可能会注意到白色轮廓。它们是过度激励字体平滑的结果。尝试使用 `-moz-osx-font-smoothing: grayscale; -webkit-font-smoothing: antialiased;`来减少这种影响。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-09T06:33:03.403

我发现`font-smoothing: antialiased`or的组合`font-smoothing: grayscale`（就像其他人提到的那样）`text-rendering: optimizeLegibility`可以在浅色和深色以及不同的浏览器中产生一致的结果。您需要在每个浏览器中进行适当的测试，因为您不会对每种字体都获得相同的结果。有时只有设置`font-smoothing`才能解决问题，有时只有设置`text-rendering`才能解决问题，有时您需要同时使用两者。

# numpy - matplotlib 用 nans 绘制数据

> ID：14477266
> 
> 赞同：1
> 
> 时间：2013-01-23T10:19:33.153
> 
> 标签：numpy, matplotlib

我很惊讶与这个问题有关的帖子很少。无论如何......这里是：我在第一列中有包含 X 值的 csv 数据文件，之后有几个 Y 值列。但对于给定的 X 值，并非所有 Y 系列都有相应的值。这是一个例子：

```
0, 16, 96, 99
10, 88, 45, 85
20, 85, 61, 10
30, 30, --, 45
40, 82, 28, 82
50, 23, 9, 61
60, 40, 77, 0
70, 26, 21, --
80, --, 58, 99
90, 1, 14, 30 
```

当使用 numpy.genfromtxt 加载此 csv 数据时，`'--'`字符串被视为 nan，这很好。但是在绘图时，绘图会在有 nan 的地方被空白打断。当 nan 似乎`pyplot.plot()`忽略 nan 和相应的 X 值时，是否有一个选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T10:32:07.020

不确定 matplotlib 是否内置了这样的功能，但您可以自制它，执行以下操作：

```
idx = ~numpy.isnan(Y)
pyplot.plot(X[idx], Y[idx]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T10:35:07.137

看看[这个帖子](https://stackoverflow.com/questions/14399689/matplotlib-drawing-lines-between-points-ignoring-missing-data/14399830#14399830)

正如我在那里的回答中所建议的那样，我建议使用`np.isfinite`而不是`np.isnan`. 可能还有其他原因导致您的情节不连续，ef，`inf`

# qemu - Qemu 翻译器引发 FATAL: kernel too old

> ID：14477267
> 
> 赞同：1
> 
> 时间：2013-01-23T10:19:34.333
> 
> 标签：qemu

我从具有目标`arm-softmmu`和`arm-linux-user`. 我有一个为 arm 编译的简单二进制文件，但是当我使用 qemu 翻译器启动它时，我得到一个`FATAL: kernel is too old`. 我在内核 2.6.32 的 x86_64 主机上运行 qemu。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T07:30:36.103

*您用于构建二进制文件的 c 库比您的来宾*内核更新得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-21T20:00:15.947

我收到此错误是因为我正在运行：

```
qemu-system-x86_64 -kernel vmlinux -initrd rootfs.cpio.gz 
```

虽然它应该是：

```
qemu-system-x86_64 -kernel bzImage -initrd rootfs.cpio.gz 
```

`bzImage`位于`arch/x86/boot/bzImage`。_

# c - C：队列 ADT 数据未正确返回

> ID：14477268
> 
> 赞同：0
> 
> 时间：2013-01-23T10:19:34.153
> 
> 标签：c, string, queue, void-pointers

我正在为这个程序运行 Xcode 4.4.1。

**对象：**通过调用将 用户输入的字符串插入队列并通过调用`enqueue`取出插入的字符串`dequeue`。

**测试输入：**

啊啊啊

**什么不起作用：**

在我调用的那一行，`dequeue(queue, &name)`我期望得到 aaa 的出列值。但是，我得到一个垃圾或 NULL 值。

// 原型声明

```
int    enqueue     ( QUEUE *queue, void * dataInPtr );  // returns success
int    dequeue     ( QUEUE *queue, void **dataOutPtr ); // returns success
bool processQueue(QUEUE *queue, bool flag); 
```

// 函数定义（仅`processQueue`显示）

```
bool processQueue(QUEUE *queue, bool flag) {
  char *name;
  char usInput[MAX_LENGTH_INPUT + 1];
  int success;

  if(ENQUEUE == flag) {
    do {
      printf("Enter 3 letters for name: ");
      fscanf(stdin, "%s", usInput);
    } while(!validateInputName(usInput));

    name = malloc(sizeof *name * 4);
    name = usInput;
    printf("usInput==\"%s\" and name==\"%s\"\n", usInput); // correctly shown   
    return enqueue(queue, name);
  } else { // DEQUEUE == flag
    if (!emptyQueue(queue)) {
      dequeue(queue, &name); // I assume I have problem here??
      printf("dequeued name == \"%s\"\n", name); // incorrectly shown. why???
    // TODO: free(name);
      return true;
    } else {
      return false;
    }
  }
} 
```

// 输出：

```
usInput=="aaa" and name=="aaa"
dequeued name == "¿" // here, I am expecting aaa, not ¿ 
```

任何帮助表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:39:33.590

我猜这是问题所在：

```
name = malloc(sizeof *name * 4);
name = usInput; 
```

通过重置`name`指向临时`usInput`，您将 (a) 泄漏内存并 (b) 导致未定义的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:46:24.810

错误是因为 when 可能`enqueue()`需要一个指向字符串的指针并将其存储在队列中。在声明中：

```
name = usInput; 
```

您将传递给`enqueue()`的指针替换为指向自动存储数组开头的指针；那是函数终止后无效的存储，这就是您看到垃圾的原因。存储/使用指向已释放内存的指针会调用未定义的行为。

您似乎对动态内存分配和字符串复制感到困惑。这是您可以处理它的一种方法：

```
/* First, allocate enough memory. Let's say 12 bytes is enough. */
name = malloc(12);
/* We'll need to copy our string to the memory we allocated and truncate it to 12 bytes */
if (snprintf(name, 12, "%s", usInput) < 0) {
    printf("Output error encountered by snprintf\n");
    return -1; /* error value */
}
/* Now enqueue NAME assuming that enqueue() does not copy it. */
return enqueue(queue, name); 
```

请注意：

1.  始终检查错误。
2.  始终施加最大输入大小。
3.  不要泄漏内存 -`free()`你是什么`malloc()`。

# c++ - 在对话框中打印数据

> ID：14477269
> 
> 赞同：-1
> 
> 时间：2013-01-23T10:19:37.990
> 
> 标签：c++, mfc

我需要在我的对话框上显示一些数据（使用 MFC，Visual C++ 2010）

在对话框中使用`std::cout`和最简单的方法是什么？`std::setw`

我找到了一些方法`cout`（不确定它们是否会起作用），但没有`setw`...

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:37:22.553

使用 std::stringstream 代替 cout。

```
std::stringstream out;
out << std::setw(5) << 100 << std::endl;
// and display out.str() in dialog box 
```

# apache-camel - 如何在骆驼中将文件拆分为行但以不同方式处理第一行

> ID：14477271
> 
> 赞同：13
> 
> 时间：2013-01-23T10:19:54.137
> 
> 标签：apache-camel

我正在使用标记器将文件分成几行：

```
.split().tokenize("\n", 1) 
```

但是，我需要处理的一些文件将包含一个标题行，这将需要以不同于正常行的方式处理。有没有一种简单的方法来读取第一行，处理它，然后拆分剩余的行？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-23T13:25:12.103

你可以做这样的事情。它将使用基于内容的路由器 EIP，然后使用不同的子路由进行处理。

```
from(A)
   .split().tokenize("\n",1)
       .choice()
         .when(simple("${property.CamelSplitIndex} > 0"))
           .to("direct:processLine")
         .otherwise()
           .to("direct:processHeader");

from("direct:processLine")
 .bean(processLineBean)
 .to(B);

from("direct:processHeader")
 .bean(processHeaderBean)
 .to(B); 
```

# jquery - jQuery：生成的按钮不会捕获点击事件

> ID：14477276
> 
> 赞同：0
> 
> 时间：2013-01-23T10:20:11.297
> 
> 标签：jquery, append

> **可能重复：**
> [Jquery 将事件侦听器添加到动态添加的元素](https://stackoverflow.com/questions/12065329/jquery-adding-event-listeners-to-dynamically-added-elements)

jQuery 位：

我将带有一些文本的输入字段附加到 div：

```
 shareVisual = '<div class="individual-share">' + '<input type="number" value="1" /> X ' + classname.val() + '@' + classcurrency.val() + ' ' + classprice.val() + ' per share ' + '<button type="button" class="remove-share">Remove</button></div>';
        listOfSharesBox.append(shareVisual); 
```

然后我尝试捕捉点击事件：

```
$("#list-of-shares").bind('click', '.remove-share', function() {
    $(".remove-share").closest("div").find(".individual-share").remove();
}); 
```

为什么 DIV 没有被删除？

干杯。

附言

当我将代码更改为此：

```
$("#list-of-shares").bind('click', '.remove-share', function() {
    $(".remove-share").closest("div").remove();
}); 
```

所有动态生成的输入都会在 div 中删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:22:59.403

如果您使用 jquery 1.7 意味着尝试这样

```
$(".remove-share").on('click',function() {
    $(this).closest("div").remove();
}); 
```

否则使用

```
$(".remove-share").bind('click',function() {
    $(this).closest("div").remove();
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-23T10:30:54.983

尝试使用处理动态生成控件的“live”关键字：

```
$(".remove-share").live('click', function() {
$(this).closest("div").remove();
}); 
```

# php - 大量电子邮件用户的唯一密码

> ID：14477280
> 
> 赞同：0
> 
> 时间：2013-01-23T10:20:21.400
> 
> 标签：php, massmail

我有一个拥有 2k+ 用户的数据库，我想向他们发送他们自己的密码，但要大量通过电子邮件发送给他们。群发电子邮件可以通过多种方式完成，但问题是如何做到这一点，以便每个用户都获得他/她自己的唯一密码？

用户密码存储在 MySQL DB 的字段中。电子邮件地址也是如此。

欣赏任何想法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T10:22:18.273

> 我想向他们发送他们自己的密码

NOOOOOOO请不要

参见例如[耻辱的密码政策大厅](https://defuse.ca/password-policy-hall-of-shame.htm)：

> 以纯文本形式存储密码是不安全的。
> 
> 是时候让在线服务清理他们的行为了！

另外：[plaintextoffenders.com](http://plaintextoffenders.com/) - “你刚刚给我发回了我自己的密码吗？！”

通过电子邮件发送明文密码被认为是一种非常非常糟糕的做法。密码应该是散列的；所有用户都应该能够通过E-Mail 获得一个链接来重置它。

不过，要回答您的问题，您必须浏览每条记录，并向每位客户发送自定义电子邮件。这可能是资源密集型的，和/或如果一次有太多消息会导致机器停机，因此您必须在发送每束消息之间等待。您还可以使用像[MailChimp](http://www.mailchimp.com)这样的 3rd 方服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T10:27:57.007

这种方法有什么问题（伪代码）：

```
$result = sql_query ("SELECT id, email, username, password FROM users"); // get all users

$mailer = new SomeMailer();
while ($row = sql_fetch_row($result)) {
    $mailer->AddRecipient($row['email']);
    $mailer->AddBody("Hey, here is you pass LOL: " . $row['password']);
    $mail->Send();
} 
```

这就是你通常可以做到的方式，但我建议你认真对待Pekka的建议。以纯文本形式发送密码是一个很大的禁忌。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T11:44:59.103

Well, I found the most flexible and easiest way to get this done is by using MailMerge inside MS WORD and then send out the messages.

Microsoft Word --> Mailings You have to extract the required data fields from the db and save them as an MS Excell file.

# fabricjs - fabricjs 对象/画布手动触发事件

> ID：14477281
> 
> 赞同：2
> 
> 时间：2013-01-23T10:20:23.100
> 
> 标签：fabricjs

我想手动触发 **在画布事件上选择对象 ** - 在对象区域内单击鼠标时触发的事件相同，并且对象被选中 - 控件变得可见。

所以换句话说，我想在画布上手动显示指定对象的控件，而不需要用户/鼠标交互。有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T16:42:56.520

在文档中找到了解决方案。

如果有人在寻找答案——

```
fabric.Canvas.setActiveObject(fabric.Object) ... 
```

如何找到解决方案：我理解错误的想法是照顾“对象：选定”之前的事件，但没有这样的事件！所以我意识到我所要做的就是查看代码，`'object:selected'`这就是我如何找到触发它的方法......而且它在[文档](http://fabricjs.com/docs/symbols/fabric.Canvas.html)中也有很好的记录。

建议：很高兴在文章中注意到它 - 旁边`getActiveObject / Group`。目前它只出现在这里 - [http://fabricjs.com/customization/](http://fabricjs.com/customization/)

不管怎样，cangax 和其他参与者——非常喜欢你的工作！谢谢

# qt - 在 QWidget 中运行 QProcess

> ID：14477284
> 
> 赞同：-2
> 
> 时间：2013-01-23T10:20:25.487
> 
> 标签：qt

我尝试了很多，我想要在 Widget 中运行可执行文件的解决方案？谁能帮我吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:52:14.390

我猜你正在追求蒂姆迈耶评论的东西。在这种情况下，您应该构建其他应用程序以使用来自外部共享对象 (dll) 的小部件，以便允许在多个可执行文件中使用您需要的类/小部件。

QProcess 将无法执行此操作，因为它用于在自己的环境中生成可执行文件。

# asp.net - 当用户按下更新按钮时，gridview 表如何不会重新下载？

> ID：14477285
> 
> 赞同：0
> 
> 时间：2013-01-23T10:20:28.357
> 
> 标签：asp.net, gridview

当用户按下更新按钮 DataBound 事件开始时。如何锁定此事件？当 gridview 枚举每一行时，需要很长时间等待。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:22:08.700

`DataBind`你不应该`GridView`在回发。所以只需将它包装在一个`!IsPostBack`：

```
protected void Page_Load(Object sender, EventArgs e)
{
    if(!IsPostBack)
    { 
        DataBindGridView();
    }
} 
```

# testing - 使用响应式布局定位哪些设备/浏览器

> ID：14477289
> 
> 赞同：2
> 
> 时间：2013-01-23T10:20:35.703
> 
> 标签：testing, responsive-design, target-platform

我正在为客户（项目已被接受，但现在是解释不同功能的问题）编写一个详细的估算，以开发一个响应式布局网站。

这不是我第一次进行这种开发，但这是一个关键帐户，必须铺设路径。

布局将从 300 像素宽度调整到 1200 像素以上，因此几乎适用于“任何”设备和浏览器，但我对我的承诺有点迷失。对于桌面网站，很容易在合同中写下受支持的浏览器将是“IE7+，FF、Safari、Chrome、Opera 的最新版本”，但是您对响应式网站有何看法？

我有一堆设备，我知道我会用它们来执行测试（比如说 PC、Mac、iPad、iPhone、2 或 3 台 Android 设备），但是我对我的客户说什么呢？我不能说“网站可以在任何设备上运行”，我也不能给出它可以运行的设备/浏览器组合的详尽列表。而且我不想被困在“*我叔叔在他的 2.2 Android 旧手机上看过该网站但它不起作用”*的情况下。

周围有很多桌面工具可以模拟各种视口并执行测试，但它们几乎不能作为“真实的东西”工作；还是我们开发人员可以“以合同方式”参考一种标准？您是如何做到这一点的？您对客户的承诺是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T22:23:39.753

**响应式布局的目标设备/浏览器**
您应该以最小分辨率而不是设备或浏览器为目标。您应该重新调整设计大小并注意设计不再舒适地工作，然后使用媒体查询来响应和调整设计。

**客户：** 我认为理想情况下，您正在寻找一种向客户解释概念的方法。您需要做的是传达目标，即尽可能提供最佳体验。我发现您应该对您的客户诚实，让他们知道您正在遵循行业最佳实践，并且该设计将在市场上的大多数设备和浏览器中“实用”。

这是我喜欢使用的一个简介：

> 跨平台兼容性：由于网络浏览器、平台和设备数量众多，网站的用户体验可能会发生变化，以最适合查看平台。

如果您想解释或被要求解释这意味着什么，我会说：

> 我们（我）总是使用最佳实践来满足网页设计的行业标准。我们（我）尽我们的（我的）最大努力确保设计在所有主流平台上都是“功能性的”。由于可用的 Web 可访问设备数量越来越多，我不能保证设计在不同设备之间看起来会完全相同。

您还必须考虑一直在创建新设备。因此，您不想让您的声明过于具体，否则您将改装您的设计以适应下一个上市的 iWatch 或 iFridge。

请记住传达真正重要的内容，即显示内容。大多数情况下，文本和图像几乎可以在任何地方使用。阴影、圆角、视频 (IE7) 和媒体查询等花哨的东西并不总是有效，但不应掩盖内容。

此外，Web 应用程序可能有点棘手，因为某些表单元素不能跨设备和浏览器工作。（例如：文件上传）。

希望这会有所帮助。

*我不是合同律师，您可能想向律师助理或精通法律的朋友寻求进一步的建议。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T04:41:27.487

经历了很多次这种经验，这些是我倾向于向客户展示的关键点，以使他们理解这个概念。

1.  什么是跨浏览器、平台 (OS)、屏幕分辨率和设备屏幕尺寸。我倾向于拍摄 W3C 统计数据的最新截图或链接，向他们展示过去 2 年的一些趋势以及这个市场的走向。它清楚地说服他们他们需要响应式布局。
2.  如果他们想要进一步的证据，我会在至少 2-3 台设备上使用 Adob​​e Edge Inspect 向他们展示 twitter bootstrap 和 jquery UI 和 jquery 移动网站。笔记本电脑、平板电脑和手机都可以在同一个网络上，只需浏览网站即可向他们展示它对不同尺寸的响应。
3.  我收集了 IE7、IE6、Chromeframe、Android 原生浏览器与 Android 上的 Chrome、iPhone4 与 iPhone5 浏览器的优缺点列表。通常我会看到他们更倾向于哪种方式，如果是手机，我会让他们了解该市场的利弊。大多数时候，他们应该明白它不是一个应用程序，而是一个响应式网站。
4.  当您撰写提案时，请勿填写“我们将涵盖所有设备”。你永远不能那样做。现实点。在以书面形式提出这些声明之前，创建虚拟机和模拟器以至少测试您将要使用的框架。设置 VM 或 Virtual Box 是免费的，您可以让 Linux 和 eclipse 或 netbeans 运行虚拟手机和平板电脑并在其上浏览您的框架。
5.  对于屏幕分辨率和屏幕尺寸，W3C 统计数据非常真实且令人信服。使用它们并在 firefox 或 chrome 中使用分辨率测试类型的插件，并为您过去的工作或框架截取一些屏幕截图，这样您至少可以展示所涉及的优点或可以做和不能做的限制。

这里的大多数答案都非常正确，只是想添加如何同时使用 W3C 和统计数据来说服响应式布局的路线。现在有超过一百万个在线示例网站可以说服人们，在过去的 6 个月里，我发现人们确实仅通过第 1 步就被说服了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T05:15:20.870

采取渐进增强的发展方法。不可能让网站像素完美，并且在每个浏览器上都可以正常工作。

采用分层方法（金/银/铜）。旧的和未经测试的浏览器将获得内容（IE7、旧的黑莓、旧的任何东西）。新浏览器的内容和布局都不错（IE8/9，Firefox < 4）。现代浏览器获得了一个典型的漂亮的现代网站。

可以通过适当的思考来设置它。从下往上构建它。青铜到白银到黄金。从最低限度的设置开始（只有颜色、字体、文本。没有 div、没有布局、nada）。这是你的青铜。接下来获得银级设置。包括布局。这种布局适用于较小的屏幕。最后我们将拥有黄金。这将包括更大屏幕的媒体查询和 JS 以提高可用性和细节。

通过将布局包装在 @media only screen{} 查询中，可以在布局的铜牌和银牌之间进行拆分。较旧的浏览器不理解它。内容仍然出现在这些浏览器上。要在 Silver 和 Gold 之间进行拆分，只需放入最小宽度的媒体查询即可。

此外，确保客户理解“网站可以在任何设备上运行”的定义。仅仅因为 Opera Mini 不支持 line-height 并不意味着该网站不能在上面运行。这是 Brad Frost 就该主题写的一篇文章：支持与优化：[http ://bradfrostweb.com/blog/mobile/support-vs-optimization/](http://bradfrostweb.com/blog/mobile/support-vs-optimization/)

我希望这能有所帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T20:19:21.443

这很清楚。您的客户想要一个现代化的网站。但是，并非所有浏览器都支持所有现代功能。您的客户希望明智地花钱并拥有一个随着时间的推移而改进的网站。随着新浏览器的发布，不会很快变老，并且会出现新的错误。这就是为什么分级浏览器支持适用于：http: [//jquerymobile.com/gbs/](http://jquerymobile.com/gbs/)

站点将可用于所有浏览器。主流浏览器将获得增强的用户体验。大多数现代浏览器都会获得超级酷的最新好东西。

让客户知道，您越是“破解”站点以获取某些功能以与某些有缺陷的旧浏览器一起使用，它就越有可能在新浏览器上中断。这不值得花时间和金钱。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-03T02:15:21.923

这是我在设计响应式网站时所做的。

当检测到旧的或不受支持的浏览器时，网站将简单地排除使其响应的 jQuery 元素，因此结果是一个固定宽度的网站。

现在，你告诉你的客户什么？

坦率地说。告诉他们您使您的网站能够响应现代设备。对于较旧的设备，他们的网站不会那么好看。也给他们看几个例子。一些大公司，只是显示一个警告，告诉用户他们的浏览器已经过时，网站将无法正常工作。一个例子是谷歌。

因此，基本上，您的网站适用于所有设备，但看起来更好，并且可以在现代设备和浏览器上响应。

# linux - 增加块大小时会增加内部碎片吗？

> ID：14477290
> 
> 赞同：0
> 
> 时间：2013-01-23T10:20:35.860
> 
> 标签：linux, operating-system, computer-architecture, cpu-architecture, fragmentation

与较大的块大小相比，较小的块大小导致较低的内部碎片。如果允许我们使用典型的块大小值（2 的倍数），即 512、1024 或 2048 字节，与较大的块大小相比，是否有可能以较小的块大小产生更多的内部碎片？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T14:09:28.967

这是一个很好的问题。

让我尝试一个答案：

在为数据分配内存时，内部碎片是字节的“浪费”。如果块大小是 512 字节，你的数据只存储 1 个字节，就会浪费 511 字节，随着更大的块大小而增长。

另一方面，外部碎片是使用块之间的内存空间的浪费。例如：有一个内存块 A、B 和 C，块大小为 1 kbyte。如果使用 A 和 C，并且应该存储大小为 2 kbyte 的数据，则块 B 永远不能用于此。因此，这就是我们必须对 HDD 进行碎片整理并将数据更有效地整合在一起的原因。

正如您所问：是否有可能以较小的块大小有更多的内部碎片，答案应该是：这取决于您通常会保存什么。

让我们做一些计算：

```
Block size: 512 byte
Data to store: 64 kbyte
Blocks needed: 128
Internal fragmentation: 0%

Block size: 512 byte
Data to store: 64,1 kbyte
Blocks needed: 128,2
Internal fragmentation: 80% of 1 block

--

Block size: 2048 byte
Data to store: 64 kbyte
Blocks needed: 32
Internal fragmentation: 0%

Block size: 2048 byte
Data to store: 64,1 kbyte
Blocks needed: 32,05
Internal fragmentation: 95% of 1 block

--

Block size: 4096 byte
Data to store: 64 kbyte
Blocks needed: 32
Internal fragmentation: 0%

Block size: 4096 byte
Data to store: 64,1 kbyte
Blocks needed: 16,025
Internal fragmentation: 97,5% of 1 block 
```

因此，这取决于您保存的内容。您将永远不会拥有任何系统，其中文件将始终具有平均大小。总会有大文件和许多小文件，因此需要进行权衡。

使用大块大小，您将有更多的内部碎片整理，但外部碎片会更好（因为保留块之间会有很多空间）。另一方面，小块大小会增加外部碎片的大小，但内部会更小。

一般来说，较大的块大小总是会增加内部碎片。最好是在块大小、内部碎片、磁盘访问时间和页表大小之间进行权衡。

# javascript - 如果代码禁用了属性，如何禁用 onclick？

> ID：14477295
> 
> 赞同：0
> 
> 时间：2013-01-23T10:20:55.143
> 
> 标签：javascript, jquery

如何创建这样的东西：

如果此代码具有属性`disabled="disabled"`，则我的 onclick 也已禁用

```
<a type="submit" disabled="disabled" id="my-form" onclick="javascript:yourFunctionName();" name="continue" data-target="#dialog" href=""
                class="btn primary btn-primary" title="End">End</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:41:14.213

试试这个代码，它会搜索标签，如果 disabled="disabled" 找到它会删除 onclick 属性

```
$(document).ready(function(){
    $("a").each(function(){
      if($(this).attr("disabled") == "disabled") {
        $(this).attr("onclick","");
      }
    });
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:05:34.107

最好在标签中添加一个`class`命名，如下所示：`disabled``<a>`

```
<a type="submit" id="my-form" onclick="javascript:yourFunctionName(this);" name="continue" data-target="#dialog" href=""

class="btn primary btn-primary disabled" title="End">End</a> 
```

然后你可以在你的`yourFunctionName()`：

```
function yourFunctionName(id) {
   event.preventDefault();
   if(id.className.indexOf('disabled'))
   {
      alert('Sorry, link is disabled');
      return false;
   }
   //Function Code goes here    
 } 
```

# java - 如何在 android 应用程序和 delphi 服务器之间建立 TCP 套接字连接？

> ID：14477297
> 
> 赞同：-3
> 
> 时间：2013-01-23T10:21:02.483
> 
> 标签：java, android, delphi

我有一个关于 android 应用程序和 delphi 服务器之间的 tcp 套接字通信的问题。

是否可以在android tcp客户端应用程序和delphi tcp服务器之间建立连接？如果是，那怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T11:31:02.060

Delphi 有几个基于套接字的库，它们有基于事件或基于线程的风格。这些包括：

*   [Indy](http://www.indyproject.org/index.en.aspx) - 基于线程的套接字组件
*   [ICS](http://www.overbyte.be/frame_index.html?redirTo=/products/ics.html) - 基于异步事件的套接字组件

以上任一方法都可用于在您的服务器上实现 Android 可以与之通信的 TCP Socket 侦听器。

如果您期望大量并发连接，我建议您使用 ICS 等基于异步的库，因为基于线程的套接字应用程序平均每个连接消耗几 MB，这是在单独的线程上实例化的。

*   Indy TCPServer 示例[在这里](http://sourceforge.net/projects/indy10clieservr/)。
*   ICS 文章可帮助您从[这里](http://edn.embarcadero.com/article/20465)开始。
*   Android Java TCP 客户端示例[在这里](http://myandroidsolutions.blogspot.co.uk/2012/07/android-tcp-connection-tutorial.html)。

# php - x11 中的 PHP 5.4，但终端中的 5.3

> ID：14477302
> 
> 赞同：1
> 
> 时间：2013-01-23T10:21:15.020
> 
> 标签：php

我昨天尝试安装 php 5.4，但它确实很有效。如果我`php -v`在终端执行，我得到 5.3，但如果我`php -v`在 X11 执行，它说我有 5.4，我什至可以启动本地服务器，它工作得很好。为什么它在终端中不起作用？有人说要改变我的 PATH 中的东西，也许那是正确的，但我该怎么做呢？

![在此处输入图像描述](../Images/4e82ac00fb1c02ba68e4bc450d4e6486.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:19:14.960

您似乎安装了 2 个版本的 PHP，但 5.4 不是可从您的 PATH 访问的“默认”PHP（一个环境变量，告诉您的系统在哪里查找您在命令行中调用的程序） .

要查找 PHP 5.3 可执行文件的位置，您可以使用`which`( [http://ss64.com/osx/which.html](http://ss64.com/osx/which.html) ) 命令，在我的计算机上它看起来像这样：

```
➤  which php
/usr/local/bin/php 
```

在我的系统`/usr/local/bin/php`上只是一个指向我想要使用的 PHP 可执行文件的链接（我在我的系统上安装了几个版本的 PHP `/usr/local/php/<version>/`）

您可以检查`which`命令返回的内容以及给定的结果是否是像我这样的符号链接。如果是，则更改链接以使其指向您的 5.4 可执行文件应该可以解决问题。

# c# - IIS 7.5 的 SignalR 性能

> ID：14477304
> 
> 赞同：3
> 
> 时间：2013-01-23T10:21:18.653
> 
> 标签：c#, iis-7.5, signalr

在过去的几周里，我一直在一个项目中使用 Signal R，它的表现非常好，昨天我什至用 Crank 进行了压力测试，并获得了 1000 名用户，没有真正的延迟。

我今天需要进行下一阶段的测试，所以我决定将其移至 IIS 7.5

在移动它并进行快速触摸测试后，我决定进行另一次压力测试——这次我只有 10 个用户，网站几乎已经死了..

有谁知道为什么会这样？我已经关注了有关 Signal R 性能调整的所有信息，并且它的差异为零。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T18:08:20.880

在某些情况下，最大并发请求数可以达到 ~10（旧默认值）。这在后来的 .net 版本中更改为默认为 5000。根据您的机器上发生的情况，我假设您的默认值仍然（不知何故）~10。

我知道您说过您查看了 SignalR 性能调整部分，但请确保您的配置正确设置为[https://github.com/SignalR/SignalR/wiki/Performance上的“](https://github.com/SignalR/SignalR/wiki/Performance)**每个 CPU 的最大并发请求**数”部分。忽略认为 5k 并发请求就足够的部分是有道理的，但在早期版本中，该值默认为非常低。

您还可以查看：http: [//blogs.msdn.com/b/tmarq/archive/2007/07/21/asp-net-thread-usage-on-iis-7-0-and-6-0。 aspx](http://blogs.msdn.com/b/tmarq/archive/2007/07/21/asp-net-thread-usage-on-iis-7-0-and-6-0.aspx)以获取有关 IIS 并发请求用法的更多信息，尤其是第 7 段。

# spring - 使用spring自定义日期格式

> ID：14477305
> 
> 赞同：0
> 
> 时间：2013-01-23T10:21:22.803
> 
> 标签：spring, spring-mvc

我在使用 spring 的 UI 中遇到日期问题，当我从数据库中获取查询时，我的 UI 中显示的数据格式是`1987-02-12 00:00:00.0`当我提交值 null 进入数据库时​​。我用过

`return getJdbcTemplate().update( QUERY_CREATE_PROJECT, new Object[] { employeeProject.getEmployeeNumber(), employeeProject.getProjectCode(), employeeProject.getStartDate(), employeeProject.getEndDate(), employeeProject.getProjectRole() }) != 0 ? true : false; }`春天的方法，我的要求是以格式（dd / MM / yyyy）显示日期并以相同格式插入日期。如何在我们的自定义日期中转换日期格式请帮助我并告诉我在哪里使用自定义日期，我应该在控制器层、DAO 层还是在服务层自定义日期

我的控制器创建方法是

```
 package com.nousinfo.tutorial.controllers;
    import java.util.Map;
    import javax.validation.Valid;
    import org.springframework.stereotype.Controller;
    import org.springframework.validation.BindingResult;
    import org.springframework.web.bind.annotation.ModelAttribute;
    import org.springframework.web.bind.annotation.RequestMapping;
    import org.springframework.web.bind.annotation.RequestMethod;
    import org.springframework.web.bind.annotation.RequestParam;
    import org.springframework.web.servlet.ModelAndView;
    import com.nousinfo.tutorial.model.ProjectForm;
    import com.nousinfo.tutorial.service.impl.ProjectServiceImpl;
    import com.nousinfo.tutorial.service.model.EmployeeProjectBO;

    /**
     * 
     * @author ankurj
     * 
     */
    @Controller
    @RequestMapping("projectController")
    public class ProjectController {
        private ProjectServiceImpl projectServiceImpl;

        public ProjectServiceImpl getProjectServiceImpl() {
            return projectServiceImpl;
        }

        public void setProjectServiceImpl(ProjectServiceImpl projectServiceImpl) {
            this.projectServiceImpl = projectServiceImpl;
        }

        /**
         * Used to set the view 
         * @param id
         * @return
         * @throws Exception
         */
        @RequestMapping(value = "/projectForm", method = RequestMethod.GET)
        public ModelAndView view(@RequestParam("id") int id) throws Exception {
            ModelAndView modelAndView = new ModelAndView();
            System.out.println(id);
            ProjectForm projectForm = new ProjectForm();
            projectForm.setEmployeeNumber(id);

            modelAndView.addObject("projectForm", projectForm);
            modelAndView.setViewName("projectForm");
            return modelAndView;
        }

        /**
         * Create the project for an employee
         * @param projectForm
         * @param bindingResult
         * @param model
         * @return
         * @throws Exception
         */
        @RequestMapping(value = "/createProject", method = RequestMethod.POST)
        public String createEmployee(@Valid ProjectForm projectForm,
                BindingResult bindingResult, Map<String, ProjectForm> model)
                throws Exception {
            String form = null;
            if (bindingResult.hasErrors()) {
                return "projectForm";
            }

            model.put("projectForm", projectForm);
            projectForm.setUpdateStatus("A");
            if (projectForm.getUpdateStatus().charAt(0) == 'A') {
                boolean flag = projectServiceImpl
                        .actionDecider(convertprojectFormToprojectBO(projectForm));
                if (flag == false)
                    form = "DBError";
                else
                    form = "Success";

            }
            return form;
        }
        /**
     * This method update the existing  detail of project
     * @param projectForm
     * @param bindingResult
     * @return
     */
    @RequestMapping(value = "/updateProject", method = RequestMethod.POST)
    public String updateDepartment(
            @ModelAttribute("projectForm") ProjectForm projectForm,
            BindingResult bindingResult) {

        String form = null;
        projectForm.setUpdateStatus("M");
        if (projectForm.getUpdateStatus().charAt(0) == 'M') {
            boolean flag = projectServiceImpl
                    .actionDecider(convertprojectFormToprojectBO(projectForm));
            if (flag == false)
                form = "DBError";
            else
                form = "Success";

        }

        return form;
    } 
```

这是我的模型课

```
package com.nousinfo.tutorial.model;
import java.util.Date;
import javax.validation.constraints.Min;
import javax.validation.constraints.NotNull;
import org.hibernate.validator.constraints.NotEmpty;
import org.springframework.format.annotation.NumberFormat;

public class ProjectForm {
    @NotNull
    @NumberFormat
    @Min(1)
    private Integer employeeNumber;
    @NotEmpty(message = "project code can't be blank")
    private String projectCode;
    private Date startDate;
    private Date endDate;
    private String role;
    private String updateStatus;

    public String getProjectCode() {
        return projectCode;
    }

    public void setProjectCode(String projectCode) {
        this.projectCode = projectCode;
    }

    public Date getStartDate() {
        return startDate;
    }

    public void setStartDate(Date startDate) {
        this.startDate = startDate;
    }

    public Date getEndDate() {
        return endDate;
    }

    public void setEndDate(Date endDate) {
        this.endDate = endDate;
    }

    public String getRole() {
        return role;
    }

    public void setRole(String role) {
        this.role = role;
    }

    public Integer getEmployeeNumber() {
        return employeeNumber;
    }

    public void setEmployeeNumber(Integer employeeNumber) {
        this.employeeNumber = employeeNumber;
    }

    public String getUpdateStatus() {
        return updateStatus;
    }

    public void setUpdateStatus(String updateStatus) {
        this.updateStatus = updateStatus;
    }

} 
```

这是我约会的jsp

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
 pageEncoding="ISO-8859-1"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%>
<%@ taglib uri="http://www.springframework.org/tags" prefix="spring"%>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title></title>
<script>
    function actionChange(url) {

        if (url == 'Save') {
            document.form.action = "/EmployeeWebSpring/projectController/updateProject";

        }
        if (url == 'Delete') {
            document.form.action = "/EmployeeWebSpring/projectController/deleteProject";
        }

    }

    function home() {
        window.location.href = "/EmployeeWebSpring/search/searchspring";

    }
</script>
</head>
<body background="../images/flower.jpg">
<img src="../images/Header.png" width="1500"/>
<hr width="1500">
    <form:form name='form' commandName="projectForm">
        <fmt:message key="project.searchResult.header" />
        <c:choose>
            <c:when test="${empty requestScope.projectBO}">
                <fmt:message key="searchResult.noresult" />
            </c:when>
            <c:otherwise>
                <table align="center">

                    <form:hidden path="updateStatus" />
                    <tr align="center">
                        <th><fmt:message key="employeeNumber" /></th>
                        <td><form:input path="employeeNumber"
                                value="${requestScope.projectBO.employeeNumber}" /></td>
                    </tr>

                    <tr align="center">
                        <th><fmt:message key="projectCode" /></th>
                        <td><form:input path="projectCode"
                                value="${requestScope.projectBO.projectCode}" /></td>
                    </tr>
                    <tr>
                    <tr align="center">
                        <th><fmt:message key="startDate" /></th>
                        <td><form:input path="startDate"
                                value="${requestScope.projectBO.startDate}" /></td>
                    </tr>
                    <tr>
                    <tr align="center">
                        <th><fmt:message key="endDate" /></th>
                        <td><form:input path="endDate"
                                value="${requestScope.projectBO.endDate}" /></td>
                    </tr>
                    <tr>
                    <tr align="center">
                        <th><fmt:message key="role" /></th>
                        <td><form:input path="role"
                                value="${requestScope.projectBO.role}" /></td>
                    </tr>

                </table>
                <br>
                <center>
                    <table>
                        <tr>

                            <td><input type="submit" name="method" value="Save"
                                onclick="actionChange(this.value)" /></td>

                            <td><input type="submit" name="method" value="Delete"
                                onclick="actionChange(this.value)" /></td>

                            <td><input type="button" onclick="home" value="Cancel" /></td>

                        </tr>
                    </table>
                </center>

            </c:otherwise>
        </c:choose>
        <br />
        <fmt:message key="searchResult.searchAgain" />
        <a href="/EmployeeWebSpring/search/searchspring"> <fmt:message
                key="searchResult.click" />
        </a>

    </form:form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:33:19.790

您所需要的只是日期类型的自定义编辑器，通过它您可以格式化传入和传出日期对象。这已经在帖子中解释过

[Spring MVC - 绑定日期字段](https://stackoverflow.com/questions/3705282/spring-mvc-binding-a-date-field)

# facebook - Facebook Graph API - 从子字段获取数据

> ID：14477306
> 
> 赞同：2
> 
> 时间：2013-01-23T10:21:26.437
> 
> 标签：facebook, facebook-graph-api, get

过去几周我一直在开发 Facebook 应用程序。我已成功将数据发布到 Facebook 的 Graph API，但我一直在努力找回特定字段。我正在使用 API Explorer 来测试我的各种 GET 尝试。以下是 api 调用返回的数据的摘录：me/g_music:listen_to?fields=data

```
{
  "data": [
{
  "data": {
    "song": {
      "id": "355308601243965", 
      "url": "https://g8-music.herokuapp.com/object/song.php?title=Pierce+The+Veil+-+Bulls+in+the+Bronx&description=Played+On+G8-Music+for+Windows+8.&image=http%3A%2F%2Fuserserve-ak.last.fm%2Fserve%2F174s%2F78366946.jpg", 
      "type": "g_music:song", 
      "title": "Pierce The Veil - Bulls in the Bronx"
    }
  }, 
  "id": "245964195537372"
}, 
{
  "data": {
    "song": {
      "id": "365613963536278", 
      "url": "https://g8-music.herokuapp.com/object/song.php?title=Pierce+The+Veil+-+Kings+for+a+Day+%28feat.+Kellin+Quinn%29&description=Played+On+G8-Music+for+Windows+8.&image=http%3A%2F%2Fuserserve-ak.last.fm%2Fserve%2F174s%2F78366946.jpg", 
      "type": "g_music:song", 
      "title": "Pierce The Veil - Kings for a Day (feat. Kellin Quinn)"
    }
  }, 
  "id": "245961632204295"
}, 
```

我试图获得 title 的价值，但到目前为止还没有成功。

如果我尝试类似：me/g_music:listen_to?fields=data.data... 我收到一个异常，告诉我“数据不支持子字段”。

我对图形 API 比较陌生，所以我很可能遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:34:27.203

你没有错过任何东西。我通过[Graph API Explorer](https://developers.facebook.com/tools/explorer)验证了这一点。

> **数据**不支持子字段

 **但是您拥有全部数据，只需从数组中获取*标题即可。***

# java - 使用 TOR 保护连接

> ID：14477308
> 
> 赞同：5
> 
> 时间：2013-01-23T10:21:27.950
> 
> 标签：java, api, tor

是否有任何可能的教程或库可用于通过使用 TOR 来保护连接？我已经寻找了一些示例用法，但我的研究没有产生任何可靠的结果。我遇到了[这个项目列表](http://sourceforge.net/apps/trac/silvertunnel/wiki/TorJavaOverview)，但这些链接似乎并没有真正指向库或 API。

我想要做的是通过连接到 TOR 来保护客户端应用程序和 cassandra 服务器之间的连接。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:36:41.910

Tor 作为代理运行在您的本地主机上，并通过 Tor 网络传输每个请求。在您的应用程序中，通过代理传递您的请求。Tor 代理 SOCKS5 和 HTTP。

# c++ - 创建 std::vector 对象 C++ 时出错

> ID：14477309
> 
> 赞同：0
> 
> 时间：2013-01-23T10:21:28.280
> 
> 标签：c++, graph, stl, vector

我一直在使用 STL，但今天我遇到了这个错误：

```
error: no class template named 'rebind' in 'class std::vector<int, std::allocator> >' 
```

在以下程序中：

```
#include <algorithm>
#include <cstdio>
#include <cmath>
#include <cstring>
#include <iostream>
#include <map>
#include <queue>
#include <set>
#include <string>
#include <vector>
#include <bitset>
#include <climits>
#include <stack>
#include <cctype>
#include <sstream>
using namespace std;

vector<int, vector<int> > G[2000005];
vector<int, vector<int> > Grev[2000005];
int f[2000005], order[2000005], leader[2000005], t = 0, parent = 0;
bool explored[2000005];

void dfs_reverse(int i) {
    explored[i] = true;
    for(vi::iterator it=G[i].begin(); it != G[i].end(); it++)
        if(!explored[*it])
            dfs_reverse(*it);
    t++;
    f[i] = t;
}

void dfs(int i) {
    explored[i] = true;
    leader[i] = parent;
    for(vi::iterator it=G[i].begin(); it != G[i].end(); it++)
        if(!explored[*it])
            dfs(*it);
}

int main()  {
    int N, i, j, u, v;

    freopen("input.txt", "r", stdin);
    freopen("output.txt", "w", stdout);

    scanf("%d", &N);
    for(i=0; i<N; i++)  {
        scanf("%d %d", &u, &v);
        if(u > 0)   {
            if(v > 0)   {
                G[N + u].push_back(v); G[N + v].push_back(u);
                Grev[v].push_back(N + u); Grev[u].push_back(N + v);
            } else  {
                G[N + u].push_back(N - v); G[-v].push_back(u);
                Grev[N-v].push_back(N+u); Grev[u].push_back(-v);
            }
        } else  {
            if(v > 0)   {
                G[-u].push_back(v); G[N + v].push_back(N - u);
                Grev[v].push_back(-u); Grev[N-u].push_back(N+v);
            } else  {
                G[u].push_back(N - v); G[-v].push_back(N - u);
                Grev[N-v].push_back(u); Grev[N-u].push_back(-v);
            }
        }
    }

    memset(explored, false, 2000005*sizeof(bool));
    for(i=2*N; i>0; i--)    {
        if(!explored[i])
            dfs_reverse(i);
        order[f[i]] = i;
    }

    memset(explored, false, 2000005*sizeof(bool));
    for(i=2*N; i>0; i--)    {
        if(!explored[order[i]]) {
            parent = order[i];
            dfs(order[i]);
        }
    }

    for(i=1; i<=N; i++)
        if(leader[i] == leader[N+i])
            break;

    if(i <= N)
        printf("Unsatisfiable\n");
    else    printf("Satisfiable\n");

    return 0;
} 
```

我正在尝试使用 Kosaraju 的两遍算法来解决 2SAT 问题，以查找强连接组件。基本上，我必须为一个大图（2000000 个节点）分配内存。我正在使用 vector > G[2000005] 执行此操作，但它给了我上述错误。如何解决此错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T10:23:30.433

问题是`vector<int, vector<int>`。第二个模板参数`, vector<int>`没有意义。您可能有意`std::vector<std::pair<int, vector<int> >`或`std::map<int, std::vector<int>`

# c# - 在 WPF 中取消隐藏 Datagrid 列

> ID：14477310
> 
> 赞同：2
> 
> 时间：2013-01-23T10:21:30.100
> 
> 标签：c#, .net, wpf, contextmenu

我正在开发一个 WPF 应用程序`datagrid`。在我的应用程序中，我创建了一个上下文菜单来隐藏和取消隐藏 datagrid 的列标题，同时将 datagrid 的 itemsource 分配给 IEnumerable 集合。

```
 this.dataGrid1.ItemsSource = objref.Result;

                grid_data = objref.Result;
                cxMenu = new ContextMenu();

                foreach (Microsoft.Windows.Controls.DataGridColumn item in dataGrid1.Columns)
                {
                    menuItem = new MenuItem();
                    menuItem.Header = item.Header;
                    menuItem.IsChecked = true;
                    cxMenu.Items.Add(menuItem);
                    menuItem.Click += new RoutedEventHandler(menuItem_Click);
                    menuItem.Checked += new RoutedEventHandler(menuItem_Checked);
                    menuItem.Unchecked += new RoutedEventHandler(menuItem_Unchecked);
                } 
```

一切正常。当我取消选中列时已成功删除，但是当我再次检查我的列时`MenuItem`，`ContextMenu`它没有被添加。

我的检查事件的处理程序如下。

```
 void menuItem_Checked(object sender, RoutedEventArgs e)
    {
        MenuItem item = sender as MenuItem;
        dataGrid1.ItemsSource = null;
        dataGrid1.ItemsSource = objref.Result;// Again assgining the whole set to itemssource
        List<string> menuList = new List<string>();
        menuList.Clear();

    foreach (MenuItem menuItem in cxMenu.Items)
    {
        if (menuItem.IsChecked == false)
        {
            menuList.Add(menuItem.Header.ToString());
        }
    }

        Functionsclass objref = new Functionsclass();

        foreach (string menuItem in menuList)
        {
            foreach (Microsoft.Windows.Controls.DataGridColumn column in dataGrid1.Columns)
            {
                if (column.Header.ToString() == menuItem)
                {
                    dataGrid1.Columns.Remove(column);
                    break;
                }
            }
        }
    } 
```

但是当我再次检查时，我的专栏没有添加。请帮助我。

更新 2：

```
 void menuItem_Click(object sender, RoutedEventArgs e)
    {
        MenuItem item = sender as MenuItem;
        if (item.IsChecked)
        {
            item.IsChecked = false;
        }
        else
        {
            item.IsChecked = true;
        }
    }

    void menuItem_Unchecked(object sender, RoutedEventArgs e)
    {
        MenuItem item = sender as MenuItem;
        foreach (Microsoft.Windows.Controls.DataGridColumn column in dataGrid1.Columns)
        {
            if (column.Header.ToString().Contains(item.Header.ToString()))
            {
                dataGrid1.Columns.Remove(column);
                break;
            }
        }
    } 
```

取消选中处理程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:32:26.100

如果您只想隐藏/显示列，我认为删除/添加列不是正确的方法。我建议你利用`Visibility`列的属性。将其设置`Visibility.Collapsed`为隐藏它，然后`Visibility.Visible`使其再次可见。

```
column.Visibility = Visibility.Collapsed; // Column is hidden

column.Visibility = Visibility.Visible; //Column is Visible 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T11:02:05.257

我刚刚更改了我的选中和未选中事件处理程序，如下所示。现在它工作正常.. :)

```
//Unchecked handler

 void menuItem_Unchecked(object sender, RoutedEventArgs e)
    {
        MenuItem item = sender as MenuItem;
        foreach (Microsoft.Windows.Controls.DataGridColumn column in dataGrid1.Columns)
        {
           if (column.Header.ToString().Contains(item.Header.ToString()))
            {
               column.Visibility = Visibility.Collapsed;
                break;
            }

        }
    } 
```

// 检查处理程序

```
 void menuItem_Checked(object sender, RoutedEventArgs e)
    {
        MenuItem item = sender as MenuItem;

        List<string> menuList = new List<string>();
        menuList.Clear();
         foreach (Microsoft.Windows.Controls.DataGridColumn column in dataGrid1.Columns)
        {
           if (column.Header.ToString().Contains(item.Header.ToString()))
            {
               column.Visibility = Visibility.Visible;
                break;
            }

        }

    } 
```

# jquery - jQuery 网络摄像头：Flash 设置“记住”

> ID：14477311
> 
> 赞同：1
> 
> 时间：2013-01-23T10:21:35.477
> 
> 标签：jquery, flash, jquery-webcam-plugin

我正在为我的项目寻找[“jQuery Webcam Plugin”](http://www.xarg.org/project/jquery-webcam-plugin/)（看起来这是使用最广泛的网络摄像头插件）。

我很好奇如何在 Flash 播放器设置中获得“记住”功能。我是否必须修改动作脚本并为此重新编译..？

例如，如果您查看 google plus，这里是 flash 播放器的屏幕截图

![在此处输入图像描述](../Images/f4475b2fda0e6462a476f21d683b47c1.png)

谢谢你的帮助

# wix - 如何检查 WIX 中是否存在 D 和 E 驱动器？

> ID：14477312
> 
> 赞同：2
> 
> 时间：2013-01-23T10:21:35.420
> 
> 标签：wix, wix3.5

我想将我的应用程序安装到 E 驱动器 (E:\MyApp) 如果不存在则 D 驱动器 (D:\MyApp)，如果目标计算机中也不存在 D 驱动器那么我想安装在 C 驱动器 (C :\MyApp)。我应该在预处理器中使用哪个变量来检查驱动器是否存在？谁能帮我？

```
<?if E Drive exists ?> 
<?define varRootDrive = "E:\" ?> 
<?elseif  D Drive exists ?> 
<?define varRootDrive = "D:\" ?> 
<?else ?> 
<?define varRootDrive = "C:\" ?> 
<?endif ?> 
<?endif ?> 

<Property Id="TARGETDIR"> $(var.varRootDrive) </Property> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T18:34:00.577

预处理器语句在构建时而不是安装时评估。您将需要一个自定义操作来检测是否存在有效的驱动器号并在安装时动态设置安装位置。

# php - 这个场景做了多少个 sql 查询（PHP）？

> ID：14477313
> 
> 赞同：1
> 
> 时间：2013-01-23T10:21:36.980
> 
> 标签：php, mysql, sql

好的，所以如果我将 sql_query 设置为变量，如下所示：

```
$query = mysql_query(".."); 
```

并像这样调用多个mysql_result：

```
mysql_result($query, 0);
mysql_result($query, 1);
mysql_result($query, 2); 
```

页面将调用服务器多少次查询？只有一次？还是三倍？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T10:26:48.860

当您执行`mysql_query`时，**它会执行 sql**并将结果保存在内部结果结构中。下次调用时`mysql_result`，它会从该内部结果中获取。

对于缓冲查询，一旦执行 mysql_query，结果就会从 MySQL 服务器复制到 PHP。对于未缓冲的查询，它将被懒惰地复制。

所以在这两种情况下**Query 只执行一次**。但是对于未缓冲的查询，它将从 MySQL 服务器中获取。每次你打电话`mysql_result`或`mysq_fetch_*`。^([缓冲和非缓冲查询](http://php.net/manual/en/mysqlinfo.concepts.buffering.php))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:25:16.677

你自己已经给出了答案。如果你调用一次“查询”函数，那么无论你解析多少次它的返回值，它都只会执行一次

```
$query = mysql_query(".."); 
```

当您运行上述代码时，查询将被执行，并且返回的资源位于 $query 变量中。然后您可以多次从中获取数据，但查询不会再次运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T10:33:49.920

这将是一个与数据库的查询，这意味着服务器。mysql_result() 不应与对处理结果集的其他函数的调用混在一起。

欲了解更多信息，您可以访问： http: [//php.net/manual/en/function.mysql-result.php](http://php.net/manual/en/function.mysql-result.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T10:38:58.563

只有 *mysql_query* 正在针对 mysql 服务器执行。**只有一个查询**

mysql_result 仅从 mysql 资源中获取数据，无论您之前是从代码中的查询中获取数据还是设法从其他来源获取数据都没有关系。

从 PHP 5.5.0 起，这个函数被弃用了；执行此操作的新方法是创建一个**mysqli**对象并使用函数**mysqli::query**和**mysqli::fetch_field**

# javascript - 错误：“递归过多”

> ID：14477319
> 
> 赞同：2
> 
> 时间：2013-01-23T10:21:55.500
> 
> 标签：javascript, jquery, html

Firebug 向我显示以下错误：`too much recursion`，我尝试了很多来确定导致我这个错误的原因，但徒劳无功

这是我的 JavaScript 代码：

```
$(".scan").click(function(e){
    e.preventDefault();
    var docName = $("#nomPJ").val();
    $(this).attr("nomDoc",docName);
}); 
```

另一个在单独的 js 文件中：

```
$(".scan").live("click",function(event){
    alert("frame");
    var e = event.target;
    nomDoc = $(e).attr("nomDoc");
    idDoc = $(e).attr("idDoc");
    alert("id"+idDoc);
    $("#title").text(nomDoc);
    $("#modal-body").empty().append('<iframe frameBorder="0"  height="90%" width="98%" style="margin-left: 5px"  src="/GRH/Scan.jsp?nomDoc=' + nomDoc + '&idDoc='+idDoc+'"></iframe>');
    $("#myModal").modal({ dynamic: true });
}); 
```

html元素：

```
<a href="" class="scan" idDoc="1" nomDoc="" target="_blanck">numériser</a> 
```

我删除了第一个代码，但问题仍然存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:17:58.687

好的，听起来像一个错误，但我已经阅读[了文档](http://twitter.github.com/bootstrap/javascript.html#modals)并且没有动态选项，无论如何，很清楚 modal bootstrap 插件还有一些其他错误，例如[multiple modal bug](https://stackoverflow.com/questions/13649459/twitter-bootstrap-multiple-modal-error)。

### 可能的解决方案：

1.  修改不推荐的modal.js
2.  使用另一个[模态插件](https://github.com/jschr/bootstrap-modal)。看起来它工作得很好。
3.  将两个点击事件合二为一
4.  删除功能`dynamic: true`上的选项`modal()`，设置固定宽度`#myModal`并`overflow:scroll`使用css。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-18T06:29:50.920

对于那些试图在其他应用程序中实际解决此问题的人来说，firebug/fox 非常粗糙；chrome 将为您提供更多帮助。

如果你觉得你的燕麦，或者不能使用铬，[这篇文章](http://danielmontague.com/2015/06/05/too-much-recursion/)让我免于麻烦！

长话短说，它会自动记录每个功能，所以

```
function apples () {
  bananas()
}
function bananas () {
  apples()
} 
```

变成

```
function apples () {
  console.log('apples');
  bananas()
}
function bananas () {
  console.log('bananas');
  apples()
} 
```

这样您就可以准确地看到*哪些*函数包含在完全模糊的“太多递归”中

故障排除愉快！

# python - 如何在python中给出输入流？

> ID：14477321
> 
> 赞同：2
> 
> 时间：2013-01-23T10:21:59.663
> 
> 标签：python

我正在通过 python os 模块卸载 Linux 中的一些软件包，我的代码如下

```
def uninstallZdev():
    print 'Uninstallation as a Super User'
    system('apt-get remove xxx')

uninstallPackage() 
```

但删除包问喜欢

**此操作后，将释放 2,621 kB 磁盘空间。您要继续 [Y/n] 吗？** 如何通过python在程序中给出Y

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T10:26:05.357

配置`apt-get`不询问（参见[`apt-get`手册页](http://linux.die.net/man/8/apt-get)：

```
apt-get --assume-yes remove xxx 
```

对于无法配置的工具，请使用它[`pexpect`](http://www.noah.org/wiki/pexpect)来引导流程。`pexpect`让您监听子进程的输出，并基于简单的 API 发送输入：

```
import pexpect

ag = pexpect.spawn('apt-get remove xxx')
ag.expect('Do you want to continue')
ag.send('Y')
ag.wait()
ag.close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:27:43.830

使用`-y`来自动化 apt-get。因此，您不必模拟“y”-press。

顺便说一句，我建议使用 subprocess-module，特别是如果您打算使用 stdin/stdout。

并且：小心！您似乎以 root 身份或使用 sudo 运行它。如果`xxx`由于某种原因碰巧是 libc-bin，那么恢复系统会很有趣。

# php - 互联网连接设备 IP/MAC 的唯一标识是什么？

> ID：14477326
> 
> 赞同：3
> 
> 时间：2013-01-23T10:22:15.327
> 
> 标签：php, javascript

我正在制作一个仅显示一次弹出窗口的脚本，然后它将永远不会在该设备上再次显示..

怎么可能做到这一点？

我已经尝试过使用cookies，但是这些可以被用户删除，所以效果有限。

另一个问题是每个设备、IP 地址或 MAC 地址是完全唯一的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T10:25:23.167

唯一的方法是饼干。关于您在 HTTP 请求中可以访问的机器，没有什么是 100% 唯一可识别的。是的，用户可能会删除 cookie。这是故意的，忍受它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T10:25:55.763

最明显的 2 个选项是 Cookie 或帐户上的标志（如果您的用户经过身份验证）。

尽管您已经提到可以删除 cookie，但它仍然是一种可靠的说法，即“我以前为这个客户做过一些事情”。如果用户删除了 cookie，那么他们很有可能知道自己在做什么，并且应该期望必须重复执行任务（例如也登录其他网站）。

如果您的用户已通过身份验证（即：他们必须登录到您的站点/服务），那么您可以轻松存储一个标志，说明用户已收到通知。

这种方式当然更可靠，但依赖于身份验证。长话短说：你需要尽你所能，而 cookie 是拥有某种形式的唯一设备 ID 的最佳选择。

关于你的另一个问题：现实中没有什么是独一无二的。MAC 地址（无论如何您都无法访问）可以被欺骗，并且可以共享 IP。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T10:28:59.627

两者都不。数以百万计的互联网设备都`192.168.0.2`将其作为 IP。所以这不是唯一的。MAC 地址根本不是互联网的东西，它们是以太网的东西。

如果你更详细地解释你的外部问题，可能会有一个解决方案。但是从你已经说过的话听起来很奇怪。两个不同设备上的同一个人应该得到两次弹出窗口？但是两个人在同一台机器上，第一个人应该只得到它吗？很难想象一个用例你应该不遗余力地确保这一点。

# joomla - 如何从 kunena1.7 中的 dateTime 中删除时间

> ID：14477328
> 
> 赞同：0
> 
> 时间：2013-01-23T10:22:19.367
> 
> 标签：joomla, joomla1.5

我在我的网站中使用 kunena，我想从用户在主页或帖子页面中的最新帖子中删除日期时间中的时间。我`%H:%i`从语言文件中的变量中删除，但时间仍然显示。我怎样才能删除这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T05:21:24.167

编辑 kunena 核心的代码。例如在此路径中：

```
components/com_kunena/template/yourTemplate/view/message.php 
```

我编辑了这个：

```
<span class="kmsgdate kmsgdate-left" title="<?php echo CKunenaTimeformat::showDate($this->msg->time, 'config_post_dateformat_hover') ?>">
<?php echo CKunenaTimeformat::showDate($this->msg->time, 'config_post_dateformat'); ?>
</span> 
```

至：

```
<span class="kmsgdate kmsgdate-left" title="<?php echo CKunenaTimeformat::showDate($this->msg->time, 'config_post_dateformat_hover') ?>">
<?php 
     $dateTime = CKunenaTimeformat::showDate($this->msg->time, 'config_post_dateformat');
     $date = explode(" ", $dateTime);
     echo  $date[1]; 
?>
</span> 
```

并且只会显示日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:35:15.637

在 Joomla 后端：

1.  转到 Kunena 配置页面
2.  转到“**前端**”选项卡
3.  有一个名为“**消息时间格式**”的参数，您可以将其设置为“**隐藏**”

**更新：**

话虽如此，我意识到我正在使用 Kunena 2.0.x，你也应该这样做。所以我建议升级到最新版本的 Kunena，它仍然兼容 Joomla 1.5。

# c++ - 如何封装属性集合

> ID：14477332
> 
> 赞同：0
> 
> 时间：2013-01-23T10:22:28.140
> 
> 标签：c++, design-patterns, architecture, c++11

我正在开发人员疏散模拟器。启动时，它将从 XML 文件中加载树状的建筑结构数据（地板/房间/墙壁等），加载人员的初始配置，读取用户定义的移动模型参数并开始模拟。例如，对于每个模型步骤中的每个人，我需要找到他附近的所有几何对象，并选择离建筑物最近的路径 - 尽可能快。

所以，我需要加载一个明确的 OOP 方式来表示人们将移动的建筑物。我坚持这个（只是例子）：

```
class Aperture
{
   ...
public:
    virtual QRectF extent() = 0;
    virtual QString description() const = 0;
    // other common for all apertures methods

private:
   int m_srcRoomID;
   int m_dstRoomID;
   // other generic aperture properties
};

class Window: Aperture
{
    ...
public:
    virtual void extent() override;
    virtual QString description() override;
    // other overrides

private:
    EGlassType m_glassType;
    bool m_bOpenable;
    // other window-specific properties
};

// and other descendants: Door, CompositeDoor and so on 
```

问题：我想将所有构建孔径存储在一个集合中作为抽象基础的指针`Aperture`，并且只使用基础虚拟函数而不对派生孔径进行任何转换。
**但是**：在疏散期间，各种 Aperture 属性可能会发生变化，所以我需要以类型相关的方式修改它们。我不能使这个功能通用并将其放在基类中：窗户没有关闭，防火门不怕火 - 但其他人会，等等。可能有一种方法（例如设计模式）来动态存储/添加/删除这些属性？或者完全避免子类化，因为建筑项目的完整层次结构非常复杂和笨重。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:40:16.557

您可以添加一个虚函数来设置基类 Aperture 中的属性，例如

虚空更新（向量）= 0；或虚拟 void update(...) = 0;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:40:28.077

好吧，决定关门的实体需要知道它可以关闭，它甚至应该考虑改变那个状态。以下是一些选项：

*   让对象在一个通用的虚拟方法（类似 , 或类似的东西）中`Aperture::update`自行决定`Aperture::interactWithFire`。`Aperture::iteractWithPerson`
*   使用[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)，即创建`virtual Aperture::visit`将在访问者上调用适当重载的方法。这允许您仅为有意义的对象组合定义交互方法。
*   使用“接口”，比如`IClosable`在任何可以关闭的地方，比如`Door`在适当的地方。`IClosable * closable = dynamic_cast<IClosable *>(apperture); if(closable) { /* consider whether it should be closed */ }`实际上，您可能也会将此类接口与访问者模式一起使用，以减少必要的重载次数。

如果其中任何一种或任何组合对您有用，那么面向对象的方法是可行的。

# java - 初始化长数

> ID：14477339
> 
> 赞同：1
> 
> 时间：2013-01-23T10:22:45.627
> 
> 标签：java, long-integer

我正在开发一个硬件接口应用程序，我想`long`用任意数字初始化数据类型值`8 byte`（因为它是`dll`文件中给出的固定键）示例：

```
long fixedKey=0123456701234567; //error on this line

Error is : The literal 0123456701234567 of type int is out of range 
```

我在原始数据类型（*Java API*）上看到的范围`long`是从 **-9,223,372,036,854,775,808 到 9,223,372,036,854,775,807**（19 位数字）。显然我输入的数字（16 位数字）在`long`数据类型的范围内，所以为什么我会收到这种错误。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-23T10:23:34.060

附加`L`到末尾以使其成为`long literal`

```
long fixedKey=0123456701234567L; //error on this line 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T10:25:30.843

您应该为您的号码添加 L 后缀。另外，您确定要用八进制表示您的数字吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T10:25:34.733

用来`L`表明它是一个长类型

```
long fixedKey=0123456701234567L; 
```

# json - 如何从 base64encodedstring 获取图像？

> ID：14477340
> 
> 赞同：0
> 
> 时间：2013-01-23T10:22:48.383
> 
> 标签：json, ios6, uiimageview, uiimage, base64

我正在使用 base64encoding 将 UIImage 发送到服务器，然后在另一端我将其取回，将 base64encodedstring 转换为 NSData，然后尝试将我的图像恢复到 UIImageView 上。

发送 Base64encodedString 并接收它的一切工作正常，但是当我将 NSData 转换回 UIImage 时，它​​会引发以下异常

> -[__NSArrayI dataUsingEncoding:allowLossyConversion:] 异常正在使用 Base64 编码

这是我用于发布图像的代码：

```
img=mainImage.image;
NSData *imgdata=UIImagePNGRepresentation(img);
NSString *imgstring=[imgdata base64EncodedString];
NSString *post =[[NSString alloc] initWithFormat:@"gid=%@&image=%@",[lblgid text],imgstring];
NSLog(@"PostData: %@",post);

NSURL *url=[NSURL URLWithString:@"http://www.abcd/updategameimage.php"]; 
```

以下是接收端的代码

```
 NSString *imgStr=[abc valueForKey:@"image"];
    NSLog(@"%@",imgStr);
    NSData *imgdata=[NSData dataWithBase64EncodedString:imgStr];

    imge = [UIImage imageWithData:imgdata];

    [imgview setImage:imge]; 
```

这里*abc*是 NSMutableArray

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T10:45:12.567

你确定`abc`是一个 mutableArray 吗？

因为您正在向它发送一个`valueForKey:`方法。这是 NSObject 实现的 KVC 方法，向它发送此消息没有意义。

如果您打算将`objectForKey:`方法发送给它 - 那么这将是您发送给字典而不是数组的消息。

而且，您得到的错误是：

> -[__NSArrayI dataUsingEncoding:allowLossyConversion:] 异常正在使用 Base64 编码

告诉您 NSArray 不响应`dataUsingEncoding:allowsLossyConversion:`消息 - 这是 NSString 对象的一种方法。

我认为你对你的对象类型感到困惑，需要更好地处理什么是什么。

# android - 3个div：2个切换，1个切换，在ios上点击关闭

> ID：14477349
> 
> 赞同：2
> 
> 时间：2013-01-23T10:23:20.613
> 
> 标签：android, jquery, ios, html, toggle

感谢阅读和帮助！我有3个div。一个是菜单 div，我喜欢通过单击菜单（显示/隐藏）和在显示时单击 div 外部（仅隐藏）来切换它。

其他两个 div 是额外的信息 div，只能通过切换显示/隐藏。当您在显示的 div 之外单击时，我不希望它们被关闭。

这是设置：HTML

```
<a id="menu_slide">MENU</a>    
<div id="menu_info"><a href="#">HOME</a> | <a href="#">PROFILE</a> | <a href="#">FORUM</a></div>
<br><br>
<a id="nextpart_slide">TOGGLE 1</a>
<div id="nextpart_info">Hello bla bla bla</div>

<a id="nextpart_slide2">TOGGLE 2</a>
<div id="nextpart_info2">Hello bla bla bla</div> 
```

查询

```
 jQuery(document).ready(function(){
  jQuery('#menu_slide').click(function () {
      jQuery('#menu_info').slideToggle('2000',"swing", function () {
      });
  });

  jQuery('#nextpart_slide').click(function () {
      jQuery('#nextpart_info').slideToggle('2000',"swing", function () {
      });
  });

  jQuery('#nextpart_slide2').click(function () {
      jQuery('#nextpart_info2').slideToggle('2000',"swing", function () {
      });
  });

}); 
```

请参阅：http: [//jsfiddle.net/HSdaG/1/](http://jsfiddle.net/HSdaG/1/) 因此非常基本的切换功能，但问题是： 1\. 当我在 div 外部单击时，如何关闭菜单 div？同时保持其他两个 div 处于当前状态。2\. 如何在 ios/android 设备上也能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:29:21.043

好的，感谢 rweichler 我想通了。这是工作的 jQuery 代码。

```
jQuery(document).ready(function(){
   jQuery('html').click(function() {
       jQuery('#menu_info').hide(); 
});

    jQuery('#menu_slide').click(function (event) {
        jQuery('#menu_info').slideToggle('2000',"swing", function () {
        });
        event.stopPropagation();
    });

    jQuery('#nextpart_slide').click(function (event) {
        jQuery('#nextpart_info').slideToggle('2000',"swing", function () {
        });
        event.stopPropagation();
    });

    jQuery('#nextpart_slide2').click(function (event) {
        jQuery('#nextpart_info2').slideToggle('2000',"swing", function () {
        });
        event.stopPropagation();
    });
}); 
```

在工作中查看它：http: [//jsfiddle.net/HSdaG/4/](http://jsfiddle.net/HSdaG/4/)

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:40:44.487

### HTML

```
<div id="menu_container">
    <a id="menu_slide">MENU</a>    
    <div id="menu_info"><a href="#">HOME</a> | <a href="#">PROFILE</a> | <a href="#">FORUM</a></div>
    <br><br>
    <a id="nextpart_slide">TOGGLE 1</a>
    <div id="nextpart_info">Hello bla bla bla</div>

    <a id="nextpart_slide2">TOGGLE 2</a>
    <div id="nextpart_info2">Hello bla bla bla</div>
</div> 
```

### jQuery

```
jQuery(document).ready(function(){
    jQuery('#menu_container').click(function (event) {
        //code goes here
    });

    jQuery('#menu_slide').click(function (event) {
        jQuery('#menu_info').slideToggle('2000',"swing", function () {
        });
        event.stopPropagation();
    });

    jQuery('#nextpart_slide').click(function (event) {
        jQuery('#nextpart_info').slideToggle('2000',"swing", function () {
        });
        event.stopPropagation();
    });

    jQuery('#nextpart_slide2').click(function (event) {
        jQuery('#nextpart_info2').slideToggle('2000',"swing", function () {
        });
        event.stopPropagation();
    });
}); 
```

您必须让 menu_container 比其他 div 大。当您在其他 div 内单击时会发生什么，事件首先在最小的 div 内触发，然后它超出它所包含的 div 等等。通过调用 event.stopPropagation()，您可以防止在下一个最大的 div 中触发的事件。因此，如果您在任何较小的 div 内单击，则不会调用 menu_container 中的单击。但是，如果您在 menu_container 内部而不是在子 div 中单击，则将调用其 click 函数，因为 event.stopPropagation() 未被其他事件调用。

# three.js - Three.js：在 ShapeGeometry 上渲染纹理

> ID：14477354
> 
> 赞同：2
> 
> 时间：2013-01-23T10:23:32.623
> 
> 标签：three.js

我在 ShapeGeometry 上渲染纹理时遇到问题。首先介绍一下这个问题的背景。

我正在尝试使用 Three.js 渲染带有纹理的 SVG 路径。我已经设法正确渲染路径。问题在于纹理： [http ://s14.postimage.org/9xifetrf5/scene.png](http://s14.postimage.org/9xifetrf5/scene.png)

Cube 正确渲染纹理，角落的 Shape 似乎没有纹理渲染

放大后可以注意到纹理，但缩小了： [http ://s9.postimage.org/9fof5f3sv/close_up.png](http://s9.postimage.org/9fof5f3sv/close_up.png)

两个对象的大小相似，并且都使用相同的材​​料。我怀疑这是 UV 贴图的问题，但我不确定如何计算 UV 贴图，有关该主题的任何信息都会很棒。

加载纹理的代码如下所示：

```
texture = t.ImageUtils.loadTexture "/images/#{pe.element.element_id}/top.png"
texture.wrapS = texture.wrapT = THREE.RepeatWrapping
texture.repeat.set(1, 1)
mat = new t.MeshBasicMaterial
  map: texture
  overdraw: true
  side: t.DoubleSide 
```

我正在使用 Three.js 的第 54 版

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-23T17:35:23.993

[https://github.com/mrdoob/three.js/blob/master/src/extras/geometries/CubeGeometry.js#L126](https://github.com/mrdoob/three.js/blob/master/src/extras/geometries/CubeGeometry.js#L126)

查看 Cube Geometry 的示例，如果您回答上面提出的问题会更容易，但我怀疑您需要设置 UV（在示例中的第 94 行）。

# c# - 上传文件时出现504网关超时错误c#

> ID：14477357
> 
> 赞同：0
> 
> 时间：2013-01-23T10:23:39.223
> 
> 标签：c#, c#-4.0, web-config

我在上传大文件（例如 30mb 视频文件）时收到 504 网关超时错误。我在 web.config 中进行了以下设置，但仍然无法正常工作。

```
<httpRuntime executionTimeout="99999" maxRequestLength="1048576" requestLengthDiskThreshold="80" useFullyQualifiedRedirectUrl="false"
                 minFreeThreads="8" minLocalRequestFreeThreads="4" appRequestQueueLimit="5000" enableKernelOutputCache="true" enableVersionHeader="true"
                 requireRootedSaveAsPath="true" enable="true"
                 shutdownTimeout="90" delayNotificationTimeout="5" waitChangeNotification="0" maxWaitChangeNotification="0" enableHeaderChecking="true"
                 sendCacheControlHeader="true" apartmentThreading="false" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:26:29.350

如果您确定它不是一些 ISP 问题，那么也尝试设置：

```
 <system.webServer>
    <security>
      <requestFiltering>
        <requestLimits maxAllowedContentLength="104857600" /> 
```

# gps - 无需现场机器即可将坐标从 GPS 单元传输到网络服务器

> ID：14477362
> 
> 赞同：1
> 
> 时间：2013-01-23T10:24:00.760
> 
> 标签：gps, tracking, gpsd

我想每隔 2 分钟将 GPS 坐标从 GPS 单元发送到服务器。据我所知，GPS 单元不能直接将数据发送到网络服务。如何以最具成本效益的方式在服务器端接收数据（使用 SMS 或 IP:Port 方法）。我不能拥有实时服务器。网络服务器对我有用吗？是否有任何免费服务可用于此？

如果我错了，请纠正我。

# r - 重复条目池，同时对相邻列中的值进行平均

> ID：14477365
> 
> 赞同：2
> 
> 时间：2013-01-23T10:24:09.450
> 
> 标签：r, dataframe

我正在尝试做一些复杂的索引，同时平均、合并以及取最小值和最大值。开始这是一个例子`data.frame`：

```
ID      ID2         probe       chrom   strand txStart  txEnd
Rest_3  uc001aah.4  8044649     chr1    0      14361    29370
Rest_4  uc001aah.4  7911309     chr1    0      14361    29370    
Rest_5  uc001aah.4  8171066     chr1    0      14361    29370           
Rest_6  uc001aah.4  8159790     chr1    0      14361    29370   

Rest_17 uc001abw.1  7896761     chr1    0      861120   879961
Rest_18 uc001abx.1  7896761     chr1    0      871151   879961 
```

我曾经`duplicated`在 ID2 列中找到重复项：uc001aah.4 有 4 个重复项。但是然后我需要并且我不知道该怎么做的是只有一个 uc001aah.4 条目，然后将探测列（+其他一些）条目合并到一个单元格中（就 excel 而言）`8044649, 7911309, 8171066, 8159790`所以在最后它看起来像这样：

```
ID                              ID2         probe                                   chrom   strand txStart  txEnd
Rest_3,Rest_4, Rest_5, Rest_6   uc001aah.4  8044649, 7911309, 8171066, 8159790      chr1    0      14361    29370 
```

但是对于探测列，重复也是如此：

```
ID      ID2         probe       chrom   strand txStart  txEnd
Rest_17 uc001abw.1  7896761     chr1    0      861120   879961
Rest_18 uc001abx.1  7896761     chr1    0      871151   879961 
```

所以在这里我需要合并ID和ID2，同时取txStart列的最小值和txEnd列的最大值，最后得到：

```
ID                  ID2                     probe       chrom   strand txStart  txEnd
Rest_17, Rest_18    uc001abw.1, uc001abx.1  7896761     chr1    0      861120   879961 
```

我知道这要求很多，但是如果您只是向我展示如何在第一个问题上执行此操作，我相信我将能够弄清楚如何将其应用于第二个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:07:29.457

使用的解决方案`data.table`：

```
require(data.table)
dt <- data.table(df)
> dt
#         ID        ID2   probe chrom strand txStart  txEnd
# 1:  Rest_3 uc001aah.4 8044649  chr1      0   14361  29370
# 2:  Rest_4 uc001aah.4 7911309  chr1      0   14361  29370
# 3:  Rest_5 uc001aah.4 8171066  chr1      0   14361  29370
# 4:  Rest_6 uc001aah.4 8159790  chr1      0   14361  29370
# 5: Rest_17 uc001abw.1 7896761  chr1      0  861120 879961
# 6: Rest_18 uc001abx.1 7896761  chr1      0  871151 879961

# step 1: remove duplicate ID2 and concatenate ID and probe.
# Note: here I assume that if ID2 is same, then so will be chrom, 
# strand, txStart and txEnd. If not, you can modify this similar 
# to what is in step 2.
dt.out <- dt[, lapply(.SD, function(x) paste(x, collapse=",")), 
          by=c("ID2", "chrom", "strand", "txStart", "txEnd")]

#           ID2 chrom strand txStart  txEnd                          ID                           probe
# 1: uc001aah.4  chr1      0   14361  29370 Rest_3,Rest_4,Rest_5,Rest_6 8044649,7911309,8171066,8159790
# 2: uc001abw.1  chr1      0  861120 879961                     Rest_17                         7896761
# 3: uc001abx.1  chr1      0  871151 879961                     Rest_18                         7896761

# step 2: remove duplicate probe and concatenate others, get min(txStart) and max(txEnd)
dt.out <- dt.out[ ,list(ID=paste(ID, collapse=","), ID2=paste(ID2, collapse=","), 
                       txStart=min(txStart), txEnd=max(txEnd)), 
                       by=c("probe", "chrom", "strand")]

#                              probe chrom strand                          ID                   ID2 txStart  txEnd
# 1: 8044649,7911309,8171066,8159790  chr1      0 Rest_3,Rest_4,Rest_5,Rest_6            uc001aah.4   14361  29370
# 2:                         7896761  chr1      0             Rest_17,Rest_18 uc001abw.1,uc001abx.1  861120 879961 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T11:05:32.003

您可以使用 2 个步骤完成此操作`by`。我`str_c`在`stringr`包中使用以连接一个字符串。我假设 tab 是你的数据。

```
x1 <- by(tab,tab$ID2,FUN=function(x)       ## I group by ID2
{

  ID <- str_c(x$ID,collapse=',')
  probe <- str_c(x$probe,collapse=',')
  x <- x[1,]
  x$ID <- ID
  x$prob <- probe
  x
})
x1 <- do.call(rbind,x1)                   ## To change from a list to a data.frame

x2 <- by(x1,x1$probe,FUN=function(x)      ## I group by probe
{
  ID2 = str_c(x$ID2,collapse=',')
  txEnd = min(x$txEnd)
  txStart = max(x$txStart)
  x <- x[1,]
  x$ID2 <- ID2
  x$txEnd <- txEnd
  x$txStart <- txStart 
  x
})

x2 <- do.call(rbind,x2)     ## To change from a list to a data.frame

x2
                                 ID                   ID2   probe chrom strand txStart  txEnd                            prob
7896761                     Rest_17 uc001abw.1,uc001abx.1 7896761  chr1      0  871151 879961                         7896761
8044649 Rest_3,Rest_4,Rest_5,Rest_6            uc001aah.4 8044649  chr1      0   14361  29370 8044649,7911309,8171066,8159790 
```

# javascript - 我可以在运行时更改 Facebook 评论框插件上的字体吗

> ID：14477367
> 
> 赞同：1
> 
> 时间：2013-01-23T10:24:16.413
> 
> 标签：javascript, iphone, css, facebook, uiwebview

*   > 我想更改 facebook 评论框上的字体名称和颜色

    > uiwebview 中运行时的插件。我必须使用 javascript 吗？如果是，我应该使用哪种脚本代码。
    > 
    > *   请帮助我，我会一直感激。![在此处输入图像描述][1]

我无法发布图像。请[http://www.mybloggertricks.com/2011/06/add-facebook-comments-box-to-blogger.html](http://www.mybloggertricks.com/2011/06/add-facebook-comments-box-to-blogger.html)检查此链接 我想在运行时在 uiwebview 中更改字体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:24:30.400

除了浅色或深色主题外，您无法更改任何内容。此外，即使您找到了一种方法，也违反了 Facebook 政策。

# html - ajax调用后的HTML表格行数

> ID：14477369
> 
> 赞同：0
> 
> 时间：2013-01-23T10:24:21.603
> 
> 标签：html, ajax, html-table

我可以实现这个更简单的方式吗？在这里，我在 html 表中填充了我的请求...我的表如下：

```
<table>
<tr>
<td>
request number
</td>
<td align="center">
approve
</td>
<td align="center">
reject
</td>
<td align="center">
query
</td>
</tr>
</table> 
```

如您所见，我的 html 代码中只有一行...但是在 ajax 调用之后，我的表中填充了几行请求..

现在完成此操作后，我必须获取表格行数并将其显示在我的`<h2>pending requests(<span></span>)</h2>`

LIKE :
待处理请求(9)...其中 9 是待处理请求的数量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:17:48.377

您可以使用类似这样的方法来获取 DOM 中的行数

```
var noOfRows = $('table tr').length; 
```

**更新**

所以假设一个json结构

```
{"responses":
 [
  {
   "title":"Title 1",
   "message":"This is message 1"
  },
  {
   "title":"Title 2",
   "message":"This is message 2"
  }
 ]
} 
```

并假设一个 ajax 调用如下：

```
$.ajax({ 
 url: urlToHandler, 
 data:JSON.stringify(
 {login:
  {"loginid":userid,"reqType":"R"}
 }), 
 type: 'POST', 
 dataType:"json", 
 contentType: 'application/json', 
 success: function(data) { 
  $.each(data.responses, function(i,data){
   var newRow = $('<tr><td>' + data.title + '</td><td>' + data.message + '</td></tr>')
   $(newRow).appendTo('table');
  };
 };
}); 
```

现在，如果您计算行数

```
var noOfRows = $('table tr').length; 
```

您应该得到超过 1 Row 的答案

# php - 如何通过键“日期”来处理数组？

> ID：14477372
> 
> 赞同：-3
> 
> 时间：2013-01-23T10:24:39.573
> 
> 标签：php, arrays, sorting

> **可能重复：**
> [如何通过内部键](https://stackoverflow.com/questions/2545544/how-to-sort-a-multidemensional-array-by-an-inner-key)
> [对多维数组进行排序 如何通过某个键对多维数组进行排序？](https://stackoverflow.com/questions/2804690/how-to-sort-a-multidimensional-array-by-a-certain-key)

我希望我的数组按日期升序排序，怎么办？

```
<?php
    //how to resort a array by key 'date'？
    $arr=array(
        array(
            'name'=>'a',
            'date'=>'2012-10-21 18:00:00'
        ),
        array(
            'name'=>'x',
            'date'=>'2013-10-21 18:00:00'
        ),
        array(
            'name'=>'d',
            'date'=>'2011-10-21 18:00:00'
        )
    );
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T10:28:01.767

```
function sort_by_date($a, $b) {
  return( $a['date'] < $b['date'] ? -1 : ($a['date'] > $b['date']) ? 1 : 0 );
}

usort($arr, 'sort_by_date'); 
```

# inno-setup - 如何从 iputils.dll 库中导入函数？

> ID：14477376
> 
> 赞同：0
> 
> 时间：2013-01-23T10:24:50.377
> 
> 标签：inno-setup

我正在使用 iputils.dll 获取 IP 地址。当我将它与 InnoSetup 5.3.9 (ANSI) 一起使用时，它工作正常，但是当我在 InnoSetup 5.4.2 (Unicode) 中使用相同的函数导入时，它会引发以下错误：

```
cannot import dll :: path\iputils.dll 
```

这是函数导入：

```
[code]
function GetLocalIPAddress: PAnsiChar;
  external 'GetLocalIPAddress@files:IPUtils.dll stdcall'; 
```

问题可能出在哪里？

# java - 将数据网格数组集合发送到 Java Servlet

> ID：14477382
> 
> 赞同：0
> 
> 时间：2013-01-23T10:25:01.093
> 
> 标签：java, apache-flex

我在 datagrid 中有一个 arraycollection，我想使用 . 有没有办法做到这一点？这里我的问题是，我可以通过 HTTPSERVICE 的 SEND() 发送 arraycollection，但是当在 servlet 的 HTTPRequestObject 中接收它时，request.getParameter('paramName') 将返回 String。那么我怎样才能从 flex 接收相同的 arraycollection 到 servlet 的请求对象呢？

这里

[可绑定]

public var dataAC:ArrayCollection = new ArrayCollection();

将是我保存数组集合的变量。

当我这样做时，

mx:HTTPService id="fileformatServlet" result="fileformatServlet_resultHandler(event)" fault="fileformatServlet_faultHandler(event)" showBusyCursor="true"

和 fileformatServlet.send("arrayCollection":dataAC);

现在在 java 方面，request.getparameter("arrayCollection") 将返回一个字符串而不是 arraycollection。Typecast 也是不可能的。

那我现在该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:04:47.730

Http 请求参数始终作为字符串传递。您必须以某种格式序列化数组。

例如，您可以使用 Json 格式并在 java 中对其进行反序列化。 [FlexJavaJson](https://stackoverflow.com/questions/7122368/how-can-i-serialize-a-list-of-objects-using-flex-json)

# asp.net - ASP.NET 响应缓存是否与 ASP.NET HttpRuntime 缓存交互？

> ID：14477387
> 
> 赞同：0
> 
> 时间：2013-01-23T10:25:11.577
> 
> 标签：asp.net, caching

ASP.NET 响应缓存和 ASP.NET HttpRuntime.Cache 完全不同吗？

响应缓存上是否有任何会影响 HttpRuntime.Cache 的操作？

问候罗伯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:32:08.473

不完全确定您所说的响应缓存是指*响应缓存*，而是 AFAIK，每个 ASP.NET 应用程序域只有一个缓存存储。输出缓存也进入相同的缓存存储（但是缓存键将由 ASP.NET 基于 url 和缓存策略生成）。

`Response.Cache`是允许您查询/控制有问题的 ASP.NET 输出缓存的[缓存策略对象。](http://msdn.microsoft.com/en-us/library/system.web.httpcachepolicy.aspx)

所以回答你的问题 - 是的，输出缓存肯定会影响`HttpRuntime.Cache`. 但它不太可能影响您手动设置的项目，因为您选择的键不太可能与 ASP.NET 运行时生成的键发生冲突。

**编辑**

我没有提到的一件事是，从 .NET 4 开始，输出缓存支持提供程序模型 - 因此您可以拥有自己的[OutputCacheProvider](http://msdn.microsoft.com/en-us/library/system.web.caching.outputcacheprovider.aspx)，它可以拥有与运行时缓存不同的存储。

# c# - 使用 Linq + 包含订购

> ID：14477389
> 
> 赞同：8
> 
> 时间：2013-01-23T10:25:13.400
> 
> 标签：c#, linq, include

我与两个实体有一对多关系：

```
Order:
int OrderId 
string OrderNumber
...

OrderItem:
int ItemId
int sequence
...

Product:
int ProductId
string ProductName

ProductType:
int ProductTypeid
string Title 
```

一个`Order`有多个`OrderItems`，每个`OrderItem`都有一个`Product`，每个`Product`都有一个`ProductType`。

我想编写一个 Linq，它返回所有订单，它们的,`items`和项目按序列字段排序。如何编写查询，例如以下查询？`Product``ProductType`

[在Order by with Linq](https://stackoverflow.com/questions/14474320/order-by-with-linq)的帮助下，我写了这个查询：

```
var myOrder= db.Orders.Include("OrderItems")
         .Where(x => x.OrderId == 3)
         .Include("OrderItems.Product") 
         .Include("OrderItems.Product.ProductType") 
         .Select(o => new {
             order = o,
             orderItems = o.OrderItems.OrderBy(i => i.sequence)
         }).FirstOrDefault(); 
```

但是当它返回结果时，**它不包含 Product 和 ProductType 数据**。我的错误在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T10:27:18.483

您需要先拨打所有电话`Include()`。这应该有效：

```
var myOrder= db.Orders.Include("OrderItems")
     .Include("OrderItems.Product") 
     .Include("OrderItems.Product.ProductType") 
     .Where(x => x.OrderId == 3)
     .Select(o => new {
         order = o,
         orderItems = o.OrderItems.OrderBy(i => i.sequence)
     }).FirstOrDefault(); 
```

此外，当您拥有 时`.Include("OrderItems.Product.ProductType")`，您不需要`.Include("OrderItems")`and `.Include("OrderItems.Product")`，因为它会在包含产品类型的过程中包含 OrderItems 及其产品。它必须这样做，否则您将无法在代码中导航到它们——它将它们附加到什么上？

在这种情况下，看起来这可以解释它：[http ://wildermuth.com/2008/12/28/Caution_when_Eager_Loading_in_the_Entity_Framework](http://wildermuth.com/2008/12/28/Caution_when_Eager_Loading_in_the_Entity_Framework)

您可以在不使用包括的情况下绕过：

```
var query = db.Orders
.Where(x => x.OrderId == 3)
.Select(o => new {
order = o,
orderItems = o.OrderItems.OrderBy(i => i.sequence),
products = o.OrderItems.Select(i => new { i, i.Product, i.Product.ProductType })
}); 
```

您投射到输出选择中的任何内容都将自动预先加载。在某些方面，像这样的急切加载实际上是更可取的，因为您只是物化了您需要的东西，而不是完整的对象图。（尽管在这种情况下，我们实现的内容与包含的内容相同。）

# android - 当在列表视图中滚动所选项目背景颜色消失？

> ID：14477390
> 
> 赞同：0
> 
> 时间：2013-01-23T10:25:14.247
> 
> 标签：android, listview, scroll

我正在实施一个列表。里面有很多项目，当我从列表中选择一个项目时，为列表项目设置颜色。当我滚动列表视图时，它会消失。

可能是什么原因？适配器代码如下：

```
 public class CustomListViewAdapterProduct extends
        ArrayAdapter<HashMap<String, Object>> 
     {

    Context context;
    public CustomListViewAdapterProduct(Context context, int resourceId,
            ArrayList<HashMap<String, Object>> Strings) {
        super(context, resourceId, Strings);
        this.context = context;
    }

    /* private view holder class */

    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder = null;
        LayoutInflater mInflater = (LayoutInflater) context
                .getSystemService(Activity.LAYOUT_INFLATER_SERVICE);

    if (convertView == null) {

      convertView = mInflater.inflate(R.layout.list_item_detail, null);
     holder = new ViewHolder();
     holder.txtProduct = (TextView) convertView.findViewById(R.id.product);
     holder.txtCode = (TextView) convertView.findViewById(R.id.code);
     convertView.setTag(holder);
     convertView.setBackgroundResource((position % 2) == 0 ? R.color.light
                            : R.color.dark);

        } else {
            if (position == selectedPosition) {
                convertView.setBackgroundColor(getResources().getColor(
                        R.color.selectedvalues));
            } else {
                convertView
                        .setBackgroundResource((position % 2) == 0 ? R.color.light
                                : R.color.dark);
            }

            holder = (ViewHolder) convertView.getTag();

        }

        holder.txtProduct.setText((this.getItem(position)
                .get("description").toString()));
        holder.txtCode.setText((this.getItem(position).get("quantity")
                .toString()));

        return convertView;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:18:34.317

过去，当我遇到显示问题时，`ListView`通常是因为我忘记设置`cachColorHint`. 有关更多信息，请参阅此[帖子](https://stackoverflow.com/a/2833103/614231)。

# python - 如何在 Sphinx 中扩展侧边栏目录树上的所有小节？

> ID：14477396
> 
> 赞同：39
> 
> 时间：2013-01-23T10:25:24.543
> 
> 标签：python, python-sphinx, sidebar, sections, toctree

我想知道是否有办法扩展文件中包含的标题下的所有小节`index.rst`？

例如，它是这样的：

```
Section 1
Section 2
Section 3 
```

这就是我希望的样子：

```
Section 1
  Subsection 1.1
  Subsection 1.2
  Subsection 1.3
Section 2
  Subsection 2.1
  Subsection 2.2
  Subsection 2.3
Section 3
  Subsection 3.1
  Subsection 3.2
  Subsection 3.3 
```

如果我点击第 1 节，它会显示下面的内容，但如果我点击第 2 节，第 1 节的内容会被隐藏，只显示 2 节。每次我在索引页面上时，我都希望扩展所有 2 个部分。我试过添加`toctree`and `maxdepth`，没有任何效果。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-10-17T01:47:45.530

好吧，我在尝试阅读 sphinx 源代码时丢失了大约 340 万个神经元（它是由一群鲁莽鲁莽的浣熊写的吗？！这么多抽象级别）。

所以 ：

*   制作自己的狮身人面像主题（使用 3rd 方主题作为基础，非常简单。我为此使用“可读”主题）
*   在您拥有 theme.conf 的目录中，添加一个“fulltoc.html”模板，其中包含一行：

fulltoc.html：

```
{{ toctree(collapse=False) }} 
```

（嘿，注意到“崩溃”论点了吗？）

*   在 sphinx conf.py 中，修改 html_sidebars 选项以添加您的模板；并声明你的主题

配置文件：

```
html_theme_path = [customized_readable_theme.get_html_theme_path()]
html_theme = 'customized_readable'
html_sidebars = {'**': ['fulltoc.html', 'relations.html', 'sourcelink.html', 'searchbox.html']} 
```

*   重建文档

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-05-31T23:18:17.930

*如果您使用的是 sphinx_rtd_theme，您可以通过更改文件layout.html*中定义的 'toctree maxdepth' 值来更改 html 页面中侧边栏菜单的最大深度。该文件通常位于目录中`source/_themes/sphinx_rtd_theme`。有几种解决方案：

*   最简单、最快的解决方案：[在侧边栏中显示更深的目录树](https://stackoverflow.com/questions/27669376/show-entire-toctree-in-read-the-docs-sidebar)

*   您正在使用旧版本的主题。然后您可以在以下行中设置一个新的“最大深度”值（例如 3）：

    ```
    {% set toctree = toctree(maxdepth=3, collapse=False, includehidden=True) %} 
    ```

*   您正在使用最新版本的主题。然后你可能在文件*layout.html*中有这些行：

    ```
    {% set global_toc = toctree(maxdepth=theme_navigation_depth|int,
                                collapse=theme_collapse_navigation|tobool,
                                includehidden=theme_includehidden|tobool,
                                titles_only=theme_titles_only|tobool) %} 
    ```

    在这种情况下，您可以在 theme.conf 中定义“theme_navigation_depth”：

    ```
    [options]
    theme_navigation_depth = 3 
    ```

更改完成后重新编译...不要忘记享受阳光！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-02-03T10:25:20.553

不幸的是，有一个关于此的开放错误： [https ://github.com/readthedocs/sphinx_rtd_theme/issues/455](https://github.com/readthedocs/sphinx_rtd_theme/issues/455)

# msdn - 这些天您如何看待整个 MSDN 内容树？

> ID：14477399
> 
> 赞同：1
> 
> 时间：2013-01-23T10:25:36.473
> 
> 标签：msdn

直到 10 年前，我每天都从您选择的 Visual Studio 安装附带的本地 .CHM 文件中阅读大量 MSDN。

我仍然阅读 MSDN 的 Web 版本，但我觉得我无法控制，因为我不知道如何再次找到我正在阅读的主题，除了在我的浏览器中添加书签。我希望能够查看整个 MSDN 内容树，以便了解内容的组织方式。

这也将使我能够看到我可能有兴趣定期阅读的常规专栏。过去，我曾经喜欢阅读 Scott Berkun 和其他一些人的可用性专栏。我很想回到阅读 MSDN 时对我正在阅读的内容有所控制，因为我仍然发现阅读 MSDN 是一项非常令人愉快的活动。

我怎么做？

# php - PHP escapeshellcmd() 使用 '>' 字符中断 ImageMagick 转换命令

> ID：14477401
> 
> 赞同：1
> 
> 时间：2013-01-23T10:25:55.857
> 
> 标签：php, escaping, imagemagick, exec, imagemagick-convert

我在 Ubuntu 12 服务器上使用 ImageMagick 6.6.9。我遇到的问题是我的 ImageMagick 转换命令，我使用该`shell_exec`函数通过 PHP 运行（但也尝试过`exec`），其中包含 PHP`escapeshellcmd`函数转义的字符`\`

这是我的PHP代码：

```
$result = exec(escapeshellcmd($convertString)); 
```

这是我的示例转换命令：

`/usr/bin/convert "/Users/rich/Sites/example/1234.JPG" -quality 85 -auto-orient -thumbnail "640x88>" "/Users/rich/Sites/example/1234-thumb.jpg"`

最后是运行后的转换命令`escapeshellcmd`：

`/usr/bin/convert "/Users/rich/Sites/example/1234.JPG" -quality 85 -auto-orient -thumbnail "640x88\>" "/Users/rich/Sites/example/1234-thumb.jpg"`

问题是转义`\>`字符会导致 ImageMagick 错误：

> 转换：选项 -thumbnail' 的无效参数：640x88> @error/convert.c/ConvertImageCommand/2770。

有谁知道我可以解决这个问题的方法？我已经浏览了 ImageMagick 文档，虽然他们承认了这个问题，但他们似乎没有提供任何其他方式来调整图像大小而不使用特殊的 unix 字符：

> Only Shrink Flag ('>' flag) 是 UNIX Shell 和 Window 批处理脚本中的特殊字符，您需要转义该字符（在 shell 中使用反斜杠 '>'，在 windows 批处理中使用 '^>'） . 它在 HTML 网页中也很特殊，因此 PHP 脚本也可能需要一些特殊处理。

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:25:55.857

事实证明，我在尺寸选项`"`周围有额外的（引号） 。`-thumbnail "640x88\>"`作为参考，正确的转义转换命令应该是：

`/usr/bin/convert "/Users/rich/Sites/example/1234.JPG" -quality 85 -auto-orient -thumbnail 640x88\> "/Users/rich/Sites/example/1234-thumb.jpg"`

# c# - 将笨拙的 xml 文档结构转换为友好的结构

> ID：14477408
> 
> 赞同：1
> 
> 时间：2013-01-23T10:26:23.937
> 
> 标签：c#, algorithm, linq, xml-parsing, linq-to-xml

好的，所以我有一个自动生成的 xml 文件，它代表库中的某个文件夹结构：

```
<Folder>
    <Name>One</Name>
    <OutlineLevel>0</OutlineLevel>
</Folder>
<Folder>
    <Name>Two</Name>
    <OutlineLevel>1</OutlineLevel>
</Folder>
<Folder>
    <Name>Three</Name>
    <OutlineLevel>2</OutlineLevel>
</Folder>
<Folder>
    <Name>Four</Name>
    <OutlineLevel>3</OutlineLevel>
</Folder>
<Folder>
    <Name>Five</Name>
    <OutlineLevel>2</OutlineLevel>
</Folder>
<Folder>
    <Name>Six</Name>
    <OutlineLevel>3</OutlineLevel>
</Folder>
<Folder>
    <Name>Seven</Name>
    <OutlineLevel>3</OutlineLevel>
</Folder>
<Folder>
    <Name>Eight</Name>
    <OutlineLevel>1</OutlineLevel>
</Folder> 
```

但是，我需要它在以下结构中看起来更人性化且不那么尴尬：

```
<Folder Name="One">
    <Folder Name="Two">
        <Folder Name="Three">
            <Folder Name="Four"></Folder>
        </Folder>
        <Folder Name="Five">
            <Folder Name="Six"></Folder>
            <Folder Name="Seven"></Folder>
        </Folder>
    </Folder>
    <Folder Name="Eight"></Folder>
</Folder> 
```

我已经研究了很长时间了，我对如何将它包装成一个方法缺乏任何想法。任何建议将不胜感激。

到目前为止，我已经成功地将它放入我的类的对象中，如下所示：

```
class MyFolder
{
    private List<MyFolder> _folders;
    public List<MyFolder> Folders
    {
        get
        {   if (_folders == null)
            { _folders = new List<MyFolder>(); }
            return _folders;  }
        set { _folders = value; }
    }
    public string Name { get; set; }
} 
```

老实说，不知道这是否会引导我到任何地方，我现在有一个 MyFolder，其中有 MyFolders 和其他 MyFolders 等，希望这是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:40:20.397

我制作了一个控制台应用程序。它产生你需要的东西。我已将您的 XML 包装到 FolderTree 元素中，只是为了便于解析。

```
static void Main(string[] args)
{
    var xml = @"<FolderTree>
        <Folder>
            <Name>One</Name>
            <OutlineLevel>0</OutlineLevel>
        </Folder>
        <Folder>
            <Name>Two</Name>
            <OutlineLevel>1</OutlineLevel>
        </Folder>
        <Folder>
            <Name>Three</Name>
            <OutlineLevel>2</OutlineLevel>
        </Folder>
        <Folder>
            <Name>Four</Name>
            <OutlineLevel>3</OutlineLevel>
        </Folder>
        <Folder>
            <Name>Five</Name>
            <OutlineLevel>2</OutlineLevel>
        </Folder>
        <Folder>
            <Name>Six</Name>
            <OutlineLevel>3</OutlineLevel>
        </Folder>
        <Folder>
            <Name>Seven</Name>
            <OutlineLevel>3</OutlineLevel>
        </Folder>
        <Folder>
            <Name>Eight</Name>
            <OutlineLevel>1</OutlineLevel>
        </Folder>
        </FolderTree>
    ";

    var root = XElement.Parse(xml);
    var elements = root.Elements().ToList();
    var rootFolderString = GetItemsAtLevel(new Queue<XElement>(elements), 0).First().ToString();
}

private static void TransformElement(XElement folder)
{
    folder.Element("OutlineLevel").Remove();
    var nameElement = folder.Element("Name");
    nameElement.Remove();
    folder.Add(new XAttribute(nameElement.Name, nameElement.Value));
}

private static IEnumerable<XElement> GetItemsAtLevel(Queue<XElement> elements, int level)
{
    while (elements.Any())
    {
        var parent = elements.Dequeue();
        var children = new Queue<XElement>();
        while (elements.Any() && (int)elements.Peek().Element("OutlineLevel") > level)
        {
            children.Enqueue(elements.Dequeue());
        }

        if (children.Any())
        {
            var subtree = GetItemsAtLevel(children, level + 1);
            parent.Add(subtree);
        }

        TransformElement(parent);
        yield return parent;
    }
} 
```

# php - 从 PHP 查询结果中选择 .change 交换缩略图

> ID：14477413
> 
> 赞同：0
> 
> 时间：2013-01-23T10:26:33.380
> 
> 标签：php, jquery, mysql

我有一个网站出售带框、裱装或印刷品的图片产品。我在带有产品缩略图的网格中显示产品。

选择选项的类是“cardid”，缩略图的类是“cardim”。我每页有 20 个产品。

客户可以使用选择菜单选择是否要将篮子添加到框架、安装或仅作为打印件。当他们从选择菜单中选择不同的选项时，我想更改缩略图。

我将如何使每个类都独一无二，我将如何在我的 script.js 中处理这个而不复制相同的代码？目前，如果我更改任何选择选项，所有图像都会更改。

# 脚本.js

```
// Event handler for picture selector
$('.cardid').change(function() {
    $(".cardim").attr("src", "images/products/thumb/new-image.jpg");
}); 
```

这是缩略图的代码。

```
<a class="card_thumb" href="img/products/large/<?php echo $cims[0];?>" title="<?php echo $product['Products_SKU'];?>"><img src="img/products/thumb/<?php echo $cims[0];?>" class="cardim" alt="<?php echo $product['Products_SKU'];?>"></a> 
```

还有一段代码用于选择

```
<option value="' . $row['Products_ID'] . '">'. $selector[$key] .'</option> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:36:53.790

该类不是唯一的。Id 是唯一的，所以使用 a 标签中的 id

```
<a class="card_thumb" href="img/products/large/<?php echo $cims[0];?>" title="<?php echo $product['Products_SKU'];?>"><img src="img/products/thumb/<?php echo $cims[0];?>" class="cardim" alt="<?php echo $product['Products_SKU'];?>" id="<?php echo $product['Products_ID'];?>"></a> 
```

并使用脚本

```
$('.cardid').change(function() {
     var getId = $(this).attr('id');
    $("#"+getId).attr("src", "images/products/thumb/new-image.jpg");
}); 
```

感谢杰米泰勒

# deployment - Capistrano 部署后自动加载页面

> ID：14477418
> 
> 赞同：1
> 
> 时间：2013-01-23T10:26:45.113
> 
> 标签：deployment, ruby-on-rails-3.1, capistrano

我用谷歌搜索，但找不到我看似简单的答案！？问题。

每次成功部署 Capistrano 后，第一个页面加载都很慢，这显然是由于缓存。作为整个部署过程的一部分，是否有可能自动加载/请求站点，这样用户就不必经历缓慢的页面加载？

显然，我通常是第一个访问该网站的人，但以防万一，也为了改善我的“体验”，那就太好了

对此的任何想法或想法都非常受欢迎，

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T17:29:05.613

事实证明，这与 Capistrano 根本没有任何关系。我假设您正在使用 Phusion Passenger 为您的应用程序提供服务？

第一个页面加载很慢，因为它需要启动一个新的 Rails 实例。

[这里有更多信息](https://stackoverflow.com/a/853603/962144)。

# c - C Primer plus第6章练习3

> ID：14477423
> 
> 赞同：1
> 
> 时间：2013-01-23T10:26:57.070
> 
> 标签：c

他们要求打印的内容：

```
F
FE
FED
FEDC
FEDCB
FEDCBA 
```

我能够打印：

```
F
FF
FFF
FFFF
FFFFF 
```

使用此代码：

```
int main()
{
    int count, count2;

    char letterToPrint = 'F';

    for (count = 0; count < 5; count++)
    {
        for (count2 = 0; count2 <= count; count2++)
        {
            printf("%c", letterToPrint);
        }
        printf("\n");
    }
} 
```

我可以在第二个`for`循环中添加一些东西来打印前一个字母然后减少它，还是需要另一个循环？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T10:29:48.360

请记住，C 中的字符（字符文字`'F'`和`char`类型）都是正常的整数值，因此您可以使用它们执行正常的算术运算，例如循环 from `'F'`to `'A'`。

像这样：

```
for (int i = 'F'; i >= 'A'; i--)
{
    for (int c = 'F'; c >= i; c--)
        printf("%c", c);
    printf("\n");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T10:29:56.223

您只需要更改`letterToPrint`内部循环中的值并在外部循环开始时将其重置：

```
int main()
{
    int count, count2;
    for (count = 0; count < 5; count++)
    {
        char letterToPrint = 'F'; // MOVED
        for (count2 = 0; count2 <= count; count2++)
        {
            printf("%c", letterToPrint--);
            //                        ^^
        }
        printf("\n");
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-23T10:32:25.487

只需更改`printf("%c", letterToPrint);`为`printf("%c", letterToPrint - count);`

您可能应该使用，`putchar`而不是`printf`，给出：
`putchar(letterToPrint - count);`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-23T10:35:08.257

只是为了它：

```
for(int i = 20; i >= 0 ; i-=4)
{
    printf("%X\n", 0xFEDBCA >> i);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-23T10:39:03.413

您甚至可以将此解决方案推广到任何字符，因为您要打印的行数是 **(int)('F'-'A')**

```
void printCharPattern(char startChar)
{
int count, count2;
char letterToPrint = starChar;
int no_of_lines = (int)startChar-(int)'A'+1;

for (count = 0; count < no_of_lines; count++)
{   
    letterToPrint = start_char;
    for (count2 = 0; count2 <= count; count2++)
    {
        printf("%c", letterToPrint--);
    }
    printf("\n");
}
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-23T10:29:24.927

在内部循环中递减 letterToPrint 并在外部循环中对其进行初始化。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-23T10:30:58.650

在第一个 for 循环之后声明另一个字符differLetter 说differLetter=latterToPrint printf distinctLetter 而不是latterToPrint

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-23T10:33:25.493

如果给定的字母是“G”还是“Z”？更通用的算法

```
#include <stdio.h>

int main() {
  char letter = 'F';

  int i=0,j;
  do {
    for (j=0 ; j<=i ; j++) printf("%c", letter-j);
    printf("\n");
  } while (letter-i++ > 'A');

  return 0;
} 
```

# c# - 母版页上的默认按钮也适用于内容页

> ID：14477426
> 
> 赞同：0
> 
> 时间：2013-01-23T10:27:08.593
> 
> 标签：c#, asp.net, master-pages, default

我在母版页上有一个表格

```
 <form id="form1" runat="server" defaultbutton="ibnQuickSubmit" defaultfocus="txtQuickSearch">
 <asp:TextBox ID="txtQuickSearch" runat="server"></asp:TextBox>
 <asp:ImageButton ID="ibnQuickSubmit" runat="server" OnClick="ibnQuickSubmit_Click"
                                ImageUrl="~/Images_v4/Common/Go.png" />
  </form> 
```

我已将上述按钮设置`ibnQuickSubmit`为按 Enter 键时的默认按钮，当`defaultfocus="txtQuickSearch"` 它工作正常时，但是当我单击任何内容页面上的任何其他文本框并按 Enter 时，在 dat 条件下，母版页的默认按键也有效。任何人都可以提出一些关于出了什么问题的指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:41:12.320

你可以使用面板做到这一点

```
<asp:Panel id="form1" runat="server" DefaultButton="ibnQuickSubmit">

 // Some controls and code //

 <asp:TextBox ID="txtQuickSearch" runat="server"></asp:TextBox>
 <asp:ImageButton ID="ibnQuickSubmit" runat="server" OnClick="ibnQuickSubmit_Click"
                            ImageUrl="~/Images_v4/Common/Go.png" />

 // Some controls and code //

</asp:Panel> 
```

# android - 活动未从暂停返回

> ID：14477430
> 
> 赞同：4
> 
> 时间：2013-01-23T10:27:46.333
> 
> 标签：android, android-activity

我有一个包含三个活动的应用程序：启动画面（默认）、登录、主。应用程序以启动方式启动，几秒钟后更改为登录。如果登录过程是正确的，那么我们就去main。

我的问题是登录活动无法从暂停状态恢复。当我点击主页按钮时， onPause() 被正确调用，而 onDestroy() 没有被调用。然后，当尝试返回应用程序时，它会在启动时启动但从未到达登录，它只是回到主页。logcat 没有显示任何错误，并且调试器指出应用程序仍处于打开状态（应该如此）。初始屏幕和主屏幕上的行为是预期的。

```
public class LoginActivity extends Activity {
/* UI ELEMENTS */
private OnClickListener mOnClickListener;

private EditText mPasswordField;

private EditText mUserField;

private ProgressDialog mProgressDialog;

/* LOGIC ELEMENTS */
/** handler to update interface */
private static Handler sInterfaceUpdateHandler;

public static class UpdateHandler extends Handler {

    private final WeakReference<LoginActivity> mLogin;

    UpdateHandler(final LoginActivity loginActivity) {
        super();
        mLogin = new WeakReference<LoginActivity>(loginActivity);
    }

    /**
     * handle events from other threads in UI thread.
     * 
     * @param message message data. Property what determines action.
     */
    @Override
    public void handleMessage(final Message message) {
       // STUFF HERE
    }

@Override
public void onCreate(final Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.initializeInterface(); // fields filled here, listener added to buttons
} 
```

编辑：根据请求在 SplashScreen 中创建活动

```
 public class SplashScreen extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(final Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.setContentView(R.layout.splashscreen);
    final Thread splashThread = new Thread() {
        @Override
        public void run() {
            try {
                int waited = 0;
                while (waited < 2000) {
                    sleep(100);
                    waited += 100;
                }
            } catch (final InterruptedException catchException) {
                LoggerFactory.consoleLogger().printStackTrace(catchException);
            }
            SplashScreen.this.finish();
            final Intent loginIntent = new Intent(SplashScreen.this, LoginActivity.class);
            SplashScreen.this.startActivity(loginIntent);
        }
    };
    splashThread.start();
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T08:31:00.150

发现错误并修复。该活动在清单中被标记为 SingleInstance。我将其更改为 SingleTop，现在它按预期工作。

更多关于原因的文档可以在这里找到：http: [//developer.android.com/guide/topics/manifest/activity-element.html#lmode](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:01:49.400

从您的和中删除 finally 块，`SplashActivity`如下所示：

> ```
> final Thread splashThread = new Thread() {
>     @Override
>     public void run() {
>         try {
>             int waited = 0;
>             while (waited < 2000) {
>                 sleep(100);
>                 waited += 100;
>             }
>         } catch (final InterruptedException catchException) {
>             LoggerFactory.consoleLogger().printStackTrace(catchException);
>         } 
>             SplashScreen.this.finish();
>             final Intent loginIntent = new Intent(SplashScreen.this, LoginActivity.class);
>             SplashScreen.this.startActivity(loginIntent);
>         }
> };
> splashThread.start(); 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T22:24:01.723

我没有过多地使用线程，但从我看来，您正在从 Splash Activity 创建另一个线程，然后从该线程启动一个活动。然后当你暂停时，你的新活动不知何故丢失或垃圾收集（可能是因为它不在我不知道的主线程上）然后当你返回上一个活动时，不会再次调用 onCreate，因此你有这个永久 SplashScreen （如果我正确理解您的问题）。

编辑我也不得不问你为什么在那个线程内等待？

# php - 为什么 yii 使用双内连接从查询中省略值？

> ID：14477432
> 
> 赞同：0
> 
> 时间：2013-01-23T10:27:54.173
> 
> 标签：php, mysql, yii

下面的 Yii 模型方法应该返回 2 个值，名称和描述，每条记录，而不是只返回描述。当直接在 MySQL 中执行时，相同的查询可以完美运行。Yii 是否阻止执行其中一个连接？

```
public function reportEducation(){
  $criteria = array(
    'select' => "
                 concat(person.name_first," ",person.name_last),
                 group_concat(person_studylevel.description)",
    'join' => "
       inner join person on junior = person.id
       inner join person_studylevel on level = person_studylevel.id",
    'group by' => 'junior'
  );
  return PersonEducation::model()->findAll($criteria);
} 
```

这是我的查询：

```
select 
   concat(person.name_first," ",person.name_last) as name,
   group_concat(person_studylevel.description separator ", ")
from person_junior_education
  left join person on junior = person.id
  left join person_studylevel on level = person_studylevel.id
group by junior 
```

它的一部分似乎与 concat_group 函数有关，因为如果我删除它，它会正确显示描述字段。

但名称字段永远不会出现。也许问题是 yii 如何处理 mysql 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:59:01.853

我的建议是，*不要将 CActiveRecord 用于复杂查询*，它不是为此而设计的，它也不是 SQL 的替代品。它唯一可以轻松地对行执行 CRUD 操作。

我要做的是创建一个[视图](http://en.wikipedia.org/wiki/View_%28database%29)，然后为该视图创建一个模型。所以你可以简单地做：

```
PersonEducationView::model()->findAll(); // easy 
```

**但是**如果你必须使用活动记录，那么可以在你的`PersonEducation`模型中创建 2 个属性，以便它有一些地方来存储查询结果，还更新你的查询以使用别名，以便它知道在哪里存储它们：

```
 // protected/models/PersonEducation.php
   public $fullname;
   public $description;

   public function reportEducation(){
       $criteria = array(
       'select' => "
            concat(person.name_first," ",person.name_last) AS fullname,
            group_concat(person_studylevel.description) AS description",
        'join' => "
           inner join person on junior = person.id
           inner join person_studylevel on level = person_studylevel.id",
       'group by' => 'junior'
       );
       return PersonEducation::model()->findAll($criteria);
    } 
```

*免责声明：完全未经测试*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:53:35.373

我不是 100% 肯定，但这可能是因为你没有正确调用你的列名，因为 Yii 会自动为你正在使用的模型的表加上“t”的别名。因此，如果您要引用 PersonEducation 模型的列，则需要在其前面加上“t”。确保你打电话给正确的人。如果要更改别名，可以使用 CDbCriteria 的“别名”属性，将其设置为有意义的内容，例如“person_education”或类似的内容。希望能帮助到你

# intellij-idea - IntelliJ IDEA：如何启用内部类的导入

> ID：14477437
> 
> 赞同：11
> 
> 时间：2013-01-23T10:28:05.600
> 
> 标签：intellij-idea

当我在 IDEA 12 中粘贴带有内部实体（类或枚举）名称的代码片段时，我会得到一个对话框来导入该实体的包。如果我正在处理的类和实体在同一个包中，IDEA 只会在实体名称之前写入外部类名称和一个点。与在文件开头的导入部分中导入实体相比，这会使源膨胀得多。如何禁用这种行为并强制 IDEA 仅在导入部分导入所有内容？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-23T11:05:00.553

老实说，当在其父级之外使用内部类时，引用外部类而不是在顶层导入内部类是有意义的，否则，为什么该类是内部类而不是顶层类？从我的角度来看，如果您在其父级之外大量使用内部类（您说 100 次），那么您不认为您应该审查您的设计吗？

无论如何，您可以在 IntelliJ 中控制**自动导入**`Settings > Editor > General > Auto Import`功能。

另一方面，如果您想**为您的内部类导入导入，请**转到`Settings > Editor > Code Style > Java > Imports`并标记`Insert imports for inner classes`复选框。

# windows - 从 findstr 命令输出替换字符串

> ID：14477443
> 
> 赞同：2
> 
> 时间：2013-01-23T10:28:15.257
> 
> 标签：windows, string, replace, cmd

我成功地设法在一长串带有`findstr`. 我将`findstr`' 的输出重定向到不同的文本文件，但是我需要删除输出行的起始部分，其中还包含源文件的引用。基地是下面的例子

```
echo testtest > testing.txt
findstr 'test' *.txt > output.txt //output is 'testing.txt:testtest' 
```

我需要做这样的事情

```
echo testtest > testing.txt
findstr 'test' *.txt | *something* > output.txt //output is 'testtest' 
```

警告：
我只能使用标准 CMD 命令，我不能在目标机器上安装新软件

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T20:07:22.383

像这样的东西应该工作：

```
@echo off
for /f "delims=: tokens=1*" %%i in ('findstr "test" *.txt') do (
  echo %%j
) >> output.txt 
```

请注意，所有输入文件**必须**有一个尾随换行符，否则当前文件的第一个匹配项可能会附加到前一个文件的最后一个匹配项（如果该匹配项位于最后一行）：

```
testtestFOO.TXT:something test other 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T21:45:57.737

这是解决 Ansgar Wiechers 在[其回答](https://stackoverflow.com/a/14488418/1012053)中确定的 CR/LF 问题的解决方案。

我使用 FOR 循环来迭代所有文件并在每个单独的文件上运行 FINDSTR。我在每个文件之间回显一个空行。最后，我再使用一个 FINDSTR 来删除任何不需要的空行。

```
@echo off
>"output.txt" (
  for %%F in (*.txt) do (
    findstr "test" "%%F"
    (echo()
  )
)
findstr . "output.txt" >"output.txt.new"
move /y "output.txt.new" "output.txt" >nul
type output.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T12:07:51.850

您应该使用 PowerShell ( `powershell.exe`) 来开发您需要的脚本。命令行可用的文档非常详尽：

```
PS > help about 
```

如果您需要更多：[是否有 PowerShell 的语言参考手册？](https://stackoverflow.com/questions/2331829/is-there-a-language-reference-manual-for-powershell)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-23T13:11:56.237

在 Linux 系统上，您可以将`awk`like 用于以下命令：

```
cat output.txt | awk 'match($0,":"){print substr($0,RSTART+1)}' 
```

# symfony - Symfony 2 表单覆盖和路径/配置解决

> ID：14477446
> 
> 赞同：0
> 
> 时间：2013-01-23T10:28:26.873
> 
> 标签：symfony, configuration

我对 Symfony 2 很陌生。我正在尝试添加一些其他自定义表单字段。

我正在使用的捆绑包是这样制作的：

```
src/TheClient/
`-- Bundle
    |-- MyBundle
    |   |-- Controller
    |   |-- DependencyInjection
    |   |-- Entity
    |   |-- Form
    |   |-- Repository
    |   |-- Resources
    |   `-- Tests
    `-- OtherNotImportantBundle
        |-- Command
        |-- Controller
        |-- DependencyInjection
        |-- Entity
        |-- Resources
        |-- Services
        `-- Tests 
```

我创建了一个文件`src/TheClient/Bundle/MyBundle/Resources/views/Form/fields.html.twig`，其中有一些像这样的代码：

```
{% block form_row %}
    <div class="control-group">
        {{ form_label(form) }}
        {{ form_errors(form) }}
        {{ form_widget(form) }}
    </div>
{% endblock %}

{% block text_widget %}
    <div class="text_widget controls">
        {% set type = type|default('text') %}
        {{ block('form_widget_simple') }}
    </div>
{% endblock %} 
```

简而言之，它会覆盖原始表单资源以用`div`'s 括起来。现在，我应该做的只是编辑`app/config/config.yml`和精确新的表单字段，如下所示：

```
# Twig Configuration
twig:
    debug:            %kernel.debug%
    strict_variables: %kernel.debug%
    globals:
      sso_host: %sso_host%
      root_url: %root_url%
    form:
        resources:
            - 'TheClientMyBundle:Form:fields.html.twig'
#            - 'MyBundle:Form:fields.html.twig' 
```

我已经尝试了这两种解决方案，但它们都不起作用，我收到一个错误 500。我对 Symfony 2 很陌生。我应该在哪里查看，以使其工作的步骤是什么？

我忘了准确：我正在尝试[从 Symfony 网站本身学习这个教程](http://symfony.com/doc/current/cookbook/form/form_customization.html)。

非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:22:12.030

What is error message? "`Unable to find template...`"?

Resource name should be `MyBundleName:Form:fields.html.twig`

where `MyBundleName` is name of you bundle added inside `AppKernel.php` file

For example `Symfony\Bundle\FrameworkBundle\FrameworkBundle()` bundle name is `FrameworkBundle`.

# python - 使用矩阵乘法对矩阵进行高效切片，使用 Python、NumPy、SciPy

> ID：14477448
> 
> 赞同：4
> 
> 时间：2013-01-23T10:28:35.587
> 
> 标签：python, numpy, scipy, aggregate, sparse-matrix

我想将 2d（让我们称之为）重塑为 2d `scipy.sparse.csr.csr_matrix`（让`A`我们`numpy.ndarray`称之为`B`）。

`A`可能

```
>shape(A)
(90, 10) 
```

那么 `B`应该是

```
>shape(B)
(9,10) 
```

其中每 10 行将`A`被重塑为一个新的新值，即该窗口和列的最大值。列运算符不适用于这种不可散列的稀疏矩阵类型。我怎样才能`B`通过使用矩阵乘法得到这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-12T11:48:12.263

使用矩阵乘法，您可以进行有效的切片，在正确的位置创建一个“切片器”矩阵。切片矩阵将`type`与“切片器”相同，因此您可以有效地控制输出类型。

下面你会看到一些比较，对你来说最有效的情况是请求`.A`矩阵并对其进行切片。`.toarray()`它显示比该方法快得多。当“切片器”创建为 a 时，使用乘法是第二快的选项`ndarray`，乘以`csr`矩阵并切片结果。

OBS：使用`coo`稀疏矩阵`A`导致时间稍慢，保持相同的比例，并且`sol3`不适用，后来我意识到在乘法中它会`csr`自动转换为a。

```
import scipy
import scipy.sparse.csr as csr
test = csr.csr_matrix([
[11,12,13,14,15,16,17,18,19],
[21,22,23,24,25,26,27,28,29],
[31,32,33,34,35,36,37,38,39],
[41,42,43,44,45,46,47,48,49],
[51,52,53,54,55,56,57,58,59],
[61,62,63,64,65,66,67,68,69],
[71,72,73,74,75,76,77,78,79],
[81,82,83,84,85,86,88,88,89],
[91,92,93,94,95,96,99,98,99]])

def sol1():
    B = test.A[2:5]

def sol2():
    slicer = scipy.array([[0,0,0,0,0,0,0,0,0],
                          [0,0,0,0,0,0,0,0,0],
                          [0,0,1,0,0,0,0,0,0],
                          [0,0,0,1,0,0,0,0,0],
                          [0,0,0,0,1,0,0,0,0]])
    B = (slicer*test)[2:]
    return B

def sol3():
    B = (test[2:5]).A
    return B

def sol4():
    slicer = csr.csr_matrix( ((1,1,1),((2,3,4),(2,3,4))), shape=(5,9) )
    B = ((slicer*test).A)[2:] # just changing when we do the slicing
    return B

def sol5():
    slicer = csr.csr_matrix( ((1,1,1),((2,3,4),(2,3,4))), shape=(5,9) )
    B = ((slicer*test)[2:]).A
    return B

timeit sol1()
#10000 loops, best of 3: 60.4 us per loop

timeit sol2()
#10000 loops, best of 3: 91.4 us per loop

timeit sol3()
#10000 loops, best of 3: 111 us per loop

timeit sol4()
#1000 loops, best of 3: 310 us per loop

timeit sol5()
#1000 loops, best of 3: 363 us per loop 
```

编辑：答案已更新替换`.toarray()`为`.A`，提供更快的结果，现在最好的解决方案放在首位

# java - 从 Xml 文件加载 HashMap 值

> ID：14477451
> 
> 赞同：-4
> 
> 时间：2013-01-23T10:28:43.960
> 
> 标签：java, xml, jakarta-ee

如何从 XML 中加载 hashmap 并将其注入 JAVA 中的真实对象

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T18:51:51.350

如果您有一个代表您的地图的适当类，您可以直接从 xml 反序列化它。不幸的是，您必须发布有关您的问题的更多信息，以便我们可以帮助您...

无论如何，您都应该尝试[**Simple**](http://simple.sourceforge.net/)或**JAXB**。两者都可以将对象序列化/反序列化为 XML 并再次返回。

一些文档：

*   **简单的 XML 框架**

    *   [网站](http://simple.sourceforge.net/)
    *   [教程](http://simple.sourceforge.net/download/stream/doc/tutorial/tutorial.php)（请参见[处理地图对象](http://simple.sourceforge.net/download/stream/doc/tutorial/tutorial.php#map)）
    *   [例子](http://simple.sourceforge.net/download/stream/doc/examples/examples.php)
    *   [使用 Simple 将 HashMap 序列化为根元素](https://stackoverflow.com/questions/9999035/serialize-hashmap-as-root-element-with-simple/12162411)

和 ...

*   **JAXB**

    *   [参考实现](http://jaxb.java.net/)
    *   [教程](http://jaxb.java.net/tutorial/)

# audio - 分别对立体声信号的两个通道应用 FFT？

> ID：14477454
> 
> 赞同：3
> 
> 时间：2013-01-23T10:28:48.163
> 
> 标签：audio, signal-processing, fft

我正在阅读一个波形文件，并希望对其应用快速傅立叶变换。但是我有一个立体声信号，我想知道如何处理左右声道。FFT 是否需要分别应用于两个通道？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T10:46:53.880

是和不是。

当然，每个通道的 FFT 是独立的，因此您需要为每个通道分别进行 FFT。

但是，可以使用对复数数据 FFT 例程的一次调用和一些附加算术来计算两个真实数据的 FFT。这在*数字食谱*和[此处](https://web.archive.org/web/20180312110051/http://www.engineeringproductivitytools.com/stuff/T0001/PT10.HTM)进行了描述。一个实信号用作复信号的实部，第二个实信号用作虚部。它们的变换可以通过额外的算术在结果中分离。

这是有效的，因为 FFT 是线性运算，因此变换的实部和虚部在某种意义上是可分离的，而实数到复数 FFT 中的对称性使得这种分离相对简单。

已发布库中的 FFT 例程通常经过高度优化。除非附加算术的代码也得到了很好的优化，否则两次调用实数到复数 FFT 例程可能比调用一次复数到复数 FFT 例程并辅以您自己的附加算术。

FFT 的常见用途是对信号进行变换，乘以实脉冲响应滤波器的变换，然后执行逆变换。在这种情况下，没有必要将两个信号分开；可以对组合数据执行乘法，并且新信号将通过逆变换分离。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T10:31:22.187

由于立体声通道是独立的，您需要对每个通道应用 FFT。如果您只想处理单个通道，则需要将两个立体声通道转换为单声道。

# jquery - 如何使用 Jquery mobile 制作漂亮的按钮？

> ID：14477455
> 
> 赞同：0
> 
> 时间：2013-01-23T10:28:48.953
> 
> 标签：jquery, file, mobile, external, transition

我想使用 jquery mobile 制作一个按钮，以将用户重定向到另一个页面，例如幻灯片动画和 rel="external" 以加载外部 js 文件。

```
<a data-theme="e" href="page.html" rel="external" data-role="button" data-transition="flip"> 
```

但没有过渡！如果我使用

```
<a data-theme="e" href="page.html" data-role="button" data-transition="flip"> 
```

有翻转过渡，但未加载外部文件！

我应该用什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:39:37.050

data-rel="external" 表示您没有使用 ajax，因此不会有任何转换，因为它会将您带到一个新页面。您可以做的是使用自定义 jquery ajax 函数为您的按钮加载外部 url，使用翻转动画并在 ajax-success 上加载外部 js。

# ffmpeg - Red5 直播 - 本地主机上的巨大延迟

> ID：14477458
> 
> 赞同：1
> 
> 时间：2013-01-23T10:29:08.167
> 
> 标签：ffmpeg, streaming, jwplayer, red5

我在 Linux Mint14 上使用 JW Player 和 ffmpeg 运行 Red5 1.0.0 RC1

即使在我的`machine/localhost`.

我执行以下步骤：

1.  FFmpeg：`ffmpeg -i 'http://localhost:port' rtmp://localhost/oflaDemo/live.flv`

2.  Red5：`TCPnoDelay`设置为真。

3.  JW Player：缓冲区长度设置为 0。也尝试了 2 和 3。

：

```
 <script type='text/javascript'>
     jwplayer('mediaspace').setup({
    'flashplayer': 'player.swf',
    'file': 'live',
    'type': 'rtmp',
    'streamer': 'rtmp://localhost/oflaDemo',
    'controlbar': 'none',
    'autostart': 'true',
    'bufferlength': '3',
    'width': '640',
    'height': '380'
  });
</script> 
```

延迟在 7-10 秒之间！这一切都发生在本地主机上，所以带宽不应该是问题。

# opengl - 对每个顶点使用相同的颜色（在运行时可更改）

> ID：14477459
> 
> 赞同：1
> 
> 时间：2013-01-23T10:29:09.510
> 
> 标签：opengl, webgl

我刚刚在这里完成了本教程：http: [//learningwebgl.com/blog/ ?p=134](http://learningwebgl.com/blog/?p=134)

我现在正在尝试进行简单的修改。我不希望每个顶点都有唯一的颜色，我希望所有顶点都使用可以动态更改的相同颜色。

这是教程中的相关代码。

```
var squareVertexColorBuffer = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, squareVertexColorBuffer);
colors = []
for (var i=0; i < 4; i++) {
    colors = colors.concat([0.5, 0.5, 1.0, 1.0]);
}
gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(colors), gl.STATIC_DRAW);
squareVertexColorBuffer.itemSize = 4;
squareVertexColorBuffer.numItems = 4; 
```

我尝试了以下修改和许多其他变体。

```
squareVertexColorBuffer = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, squareVertexColorBuffer);
colors = [0.5, 0.5, 1.0, 1.0];
gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(colors), gl.STATIC_DRAW);
squareVertexColorBuffer.itemSize = 4;
squareVertexColorBuffer.numItems = 1; 
```

我得到的错误是

```
.WebGLRenderingContext: GL ERROR :GL_INVALID_OPERATION : glDrawArrays: attempt to access out of range vertices in attribute 1 
```

这个错误很有意义。我想渲染的人认为每个顶点都有唯一的颜色，因此对于第 n 个顶点，它会寻找第 n 个颜色。

问题是我最终希望绘制 100 万个点，并且每个点始终是相同的颜色。所以当我只需要 4 个时，我真的不想创建 400 万个浮点数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:12:16.750

好的，我想通了，就这么简单。

shaderProgram.vertexColorAttribute = gl.getUniformLocation(shaderProgram, "aVertexColor"); gl.uniform4fv(shaderProgram.vertexColorAttribute, [1.0, 1.0, 1.0, 1.0]);

# facebook-insights - Facebook 修改后的 DAU 和 MAU 公共应用指标

> ID：14477463
> 
> 赞同：0
> 
> 时间：2013-01-23T10:29:18.213
> 
> 标签：facebook-insights

2013 年 1 月，Facebook 改变了对公开报告的 DAU 和 MAU 数据的解释方式。Facebook 没有报告每个应用程序的准确 MAU 和 DAU 数据，而是开始将每个应用程序分类为 MAU 和 DAU 层，因此报告的 MAU 和 DAU 数字被四舍五入到层（或级别）。Facebook 还引入了一种新的度量方法：排名——它表明一个应用程序相对于所有其他应用程序的执行情况。（https://developers.facebook.com/blog/post/2013/01/09/platform-updates--operation-developer-love/，另见[http://www.appdata.com/understanding_facebook_ranks](http://www.appdata.com/understanding_facebook_ranks)）

我的问题是这样的：

[事实上，当我通过访问https://graph.facebook.com/321574327904696](https://graph.facebook.com/321574327904696)检查 Farmville2 的使用指标时，我确实看到了新方法。即：DAU 和 MAU 报告的数字被四舍五入到层级。没有一月份之前的确切数字。见下文，MAU 报告在 1000 万层，DAU 报告在 100 万以上，即：1m 层。

结果：

```
{
   "id": "321574327904696",
   "name": "FarmVille 2",
   "description": "Grow and harvest beautiful crops, raise adorable animals, and craft delicious treats on your very own lifelike 3D farm.",
   "category": "Games",
   "subcategory": "Simulation",
   "link": "https://www.facebook.com/apps/application.php?id=321574327904696",
   "namespace": "farmville-two",
   "icon_url": "http://photos-d.ak.fbcdn.net/photos-ak-snc7/v85005/104/321574327904696/app_2_321574327904696_1179950008.gif",
   "logo_url": "http://photos-h.ak.fbcdn.net/photos-ak-snc7/v85005/104/321574327904696/app_1_321574327904696_637315223.gif",
   "company": "Zynga Inc.",
   "daily_active_users": "1000000",
   "weekly_active_users": "5000000",
   "monthly_active_users": "10000000",
   "daily_active_users_rank": 4,
   "monthly_active_users_rank": 1
} 
```

但是，如果我使用 Facebook Graph API 浏览器并发出如下关于 Farmville2 使用情况的 FQL 查询，我仍然会看到其准确的 MAU 和 DAU 数据，而不是应用所属的大致 MAU 和 DAU 层级。

IE：

```
SELECT metric, value
FROM insights WHERE object_id='321574327904696' AND metric='application_active_users' AND period=period('month') AND end_time=end_time_date('2013-01-20') 
```

结果显示 MAU 为 41,848,270。如果我查询 DAU，我会得到 8,264,964。

```
{
  "data": [
    {
      "metric": "application_active_users", 
      "value": 41848270
    }
  ]
} 
```

我的问题是这样的：

我应该考虑哪些 DAU 和 MAU 数据？由于希望向后兼容并且很快将被删除，通过查询 Insights 表报告的确切数字是否仍然存在很短的一段时间？我是否应该假设我无法再获得准确的 DAU 和 MAU 数字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:35:43.120

您可能应该假设您将无法很快获得准确的 DAU 和 MAU 数字。您从 Graph API 获得的数字是正确的结果，FQL 查询听起来还没有迁移到新的应用程序指标。

我建议您仅考虑使用 Graph API 指标，因为 FQL 返回的确切数字可能会在不久的将来发生变化。[我建议在我们的错误工具](https://developers.facebook.com/bugs/create)上创建错误报告，并在 SO 上使用错误报告的链接更新您的答案，以便其他人可以跟踪此问题的状态。此外，请在错误报告中引用此 SO 线程，以便我们查看此内容。

# php - php 重定向：在 jquery 弹出窗口中打开？

> ID：14477468
> 
> 赞同：0
> 
> 时间：2013-01-23T10:29:24.480
> 
> 标签：php, jquery, redirect

有人可以帮帮我吗。我试图做到这一点，以便在用户登录后，他们被重定向到在 jquery 弹出灯箱窗口中打开的页面。这可能吗？

我正在尝试像以下那样做，虽然我收到了大量的语法错误，我还在学习 php，所以可能还有很长的路要走，但是有人可以告诉我我能做什么吗？

谢谢。

```
if (logged_in()) {
        redirect_to("dashboard.php" rel=\"shadowbox;height=300;width=500\");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:46:00.823

如果您想重定向到执行一些 jquery 代码的页面，您可以通过 2 种方式进行：

1- 从服务器端（使用 PHP）重定向到包含所有需要的 jquery 代码的 php 文件，使用`onload`Jquery 事件自动启动此代码。

2- 只需将所需的 Jquery 代码插入登录页面，而不是将表单提交给另一个 PHP（这将导致页面重定向），使用 AJAX 调用来检查登录是否正常。如果登录成功，则可以调用所需的 jquery 弹出功能。

# sql - 如何在 MS SQL 中对 1 行中的字段进行分组

> ID：14477469
> 
> 赞同：0
> 
> 时间：2013-01-23T10:29:35.837
> 
> 标签：sql, sql-server, tsql, sql-server-2005

我正在使用这个 MS SQL 脚本：

```
 select NumberId, ART_No, InkColor 
     from INK_STOCK 
```

我有这样的输出：

```
 NumberId         ART_No          InkColor
     ------------------------------------------
     0010             23003             BLUE
     0010             23003             RED
     0010             23003             GREEN
     0013             23004             ORANGE
     0013             23004             PINK
     0013             23004             WHITE
     0015             23007             GREEN
     0015             23007             PINK 
```

我怎样才能使输出应该是这样的：

```
 NumberId         ART_No          InkColor
     ------------------------------------------
     0010             23003             BLUE, RED, GREEN
     0013             23004             ORANGE, PINK, WHITE
     0015             23007             GREEN, PINK 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T10:39:09.017

询问：

**[SQLFIDDLE示例](http://sqlfiddle.com/#!3/0e8a2/8)**

```
select c1.NumberId, c1.ART_No,
    STUFF((   SELECT ', ' +x.InkColor
        FROM INK_STOCK x
        WHERE c1.NumberId = x.NumberId
        FOR XML PATH ('')
    ),1,1,'') as InkColor
from INK_STOCK c1
group by c1.NumberId, c1.ART_No 
```

结果：

```
| NUMBERID | ART_NO |             INKCOLOR |
--------------------------------------------
|       10 |  23003 |     BLUE, RED, GREEN |
|       13 |  23004 |  ORANGE, PINK, WHITE |
|       15 |  23007 |          GREEN, PINK | 
```

# android - 使用 Android 与 TRF7970A NFC 芯片交互

> ID：14477470
> 
> 赞同：1
> 
> 时间：2013-01-23T10:29:35.307
> 
> 标签：android, nfc

我需要通过我的 NFC Android 手机读取 TRF7970A NFC Passive Target 中写入的内容。有可能吗？使用 API 或一些 JAR 文件？

如果无法读取内容，我如何才能通过 Android 代码检测芯片类型？

谁有解决方案，请帮忙..

# android - Android 复选框 - 背景 + 按钮布局 - 大小错误

> ID：14477472
> 
> 赞同：3
> 
> 时间：2013-01-23T10:29:40.340
> 
> 标签：android, layout, checkbox, shape

我想我没有在我的一个布局中看到错误。我想显示一个复选框和它周围的边框。

我使用[Android Holo Colors Generator生成了图像](http://android-holo-colors.com/ "Android Holo 颜色生成器")

我试图在复选框中添加一个形状，这在 Nexus 4 上运行良好，但在任何其他设备上根本没有显示按钮，所以我添加了一个虚拟布局：

布局：

```
<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginRight="5sp"
    android:layout_marginTop="3sp"
    android:background="@drawable/shape_button" >

    <CheckBox
        android:id="@+id/check"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:button="@drawable/btn_radio_holo_dark_hm" />
</LinearLayout> 
```

形状：

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">

    <solid android:color="@android:color/transparent"/>

    <stroke
        android:width="1px"
        android:color="@color/gray" />

    <corners
        android:bottomLeftRadius="5sp"
        android:bottomRightRadius="5sp"
        android:topLeftRadius="5sp"
        android:topRightRadius="5sp" />

</shape> 
```

现在我明白了：

![设备布局](../Images/eb30ace863f5f97920eaba0801c30cc1.png)

我尝试根据 mdpi/hdpi/xhdpi 设置 minWidth，但该按钮从不会在每个设备上居中。fill_parent/wrap_content 不会导致任何变化，也会在布局内移动按钮。

关于这里出了什么问题的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T10:48:35.310

将您的外部布局更改为 RelativeLayout 并将 centerInParent=true 设置为复选框

```
<RelativeLayout
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_marginRight="5sp"
android:layout_marginTop="3sp"
android:background="@drawable/shape_button" 
android:padding="2sp">

<CheckBox
    android:id="@+id/check"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:button="@drawable/btn_radio_holo_dark_hm" 
    android:layout_centerInParent="true/>
</RelativeLayout> 
```

# c# - 在我的后台任务中查找辅助磁贴失败，代码为 1

> ID：14477476
> 
> 赞同：1
> 
> 时间：2013-01-23T10:29:49.440
> 
> 标签：c#, windows-8, background, windows-runtime, windows-store-apps

我想通过后台任务更新我的辅助磁贴。我的问题是，遍历所有固定磁贴`SecondaryTile.FindAllAsync();`失败并使用代码 1 退出我的后台任务。

我不知道为什么不能这样做，为什么我没有得到任何异常以及为什么这在主应用程序中有效。这可能是内存问题吗？

我的代码如下所示：

```
public sealed class SecondaryTileUpdater : IBackgroundTask
{
    public async void Run(IBackgroundTaskInstance taskInstance)
    {
        var list = await SecondaryTile.FindAllAsync(); // Here it fails :(
        foreach (SecondaryTile liveTile in list)
        {
            // Update Secondary Tiles
            // (...)
        }
    }
}
```

这是我得到的错误：

```
The program '[5644] backgroundTaskHost.exe: Managed (v4.0.30319)' has exited with code 1 (0x1).
```

任何想法，这可能是什么原因？感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T16:22:30.830

一旦你的异步方法等待，你的任务就结束了。请求延迟，让您的异步代码有时间执行。

```
public sealed class SecondaryTileUpdater : IBackgroundTask
{
    public async void Run(IBackgroundTaskInstance taskInstance)
    {
        //HERE: request a deferral
        var deferral = taskInstance.GetDeferral();

        var list = await SecondaryTile.FindAllAsync(); // Here it fails :(
        foreach (SecondaryTile liveTile in list)
        {
            // Update Secondary Tiles
            // (...)
        }

        //HERE: indicate you are done with your async operations
        deferral.Complete();
    }
} 
```

# django - alter_column 后 CREATE INDEX 上的 Django south 错误（字段更改）

> ID：14477477
> 
> 赞同：2
> 
> 时间：2013-01-23T10:29:53.883
> 
> 标签：django, django-south, migrate

我改变了我的模型

```
class HardwareModel(models.Model):
    name = models.CharField(max_length=128,unique=True)
    series =models.CharField(max_length=128)
    def __unicode__(self):
        return "%s" % (self.name) 
```

到

```
class HardwareModel(models.Model):
    name = models.CharField(max_length=128,unique=True)
    series = models.ForeignKey(HardwareModelSeries, blank=True)
    def __unicode__(self):
        return "%s" % (self.name) 
```

我用南方迁移。（使用 --auto 所以迁移脚本是由南制作的）

```
 # Renaming column for 'HardwareModel.series' to match new field type.
    db.rename_column('iamictinfra_hardwaremodel', 'series', 'series_id')
    # Changing field 'HardwareModel.series'
    db.alter_column('iamictinfra_hardwaremodel', 'series_id', self.gf('django.db.models.fields.related.ForeignKey')(to=orm['iamictinfra.HardwareModelSeries']))
    # Adding index on 'HardwareModel', fields ['series']
    db.create_index('iamictinfra_hardwaremodel', ['series_id']) 
```

现在在创建一个全新的 sqllite 数据库时（在测试期间），它给出了这个错误：

```
south DEBUG execute "CREATE INDEX "iamictinfra_hardwaremodel_b18a98d" ON "iamictinfra_hardwaremodel" ("series_id");" with params "[]"
FATAL ERROR - The following SQL query failed: CREATE INDEX "iamictinfra_hardwaremodel_b18a98d" ON "iamictinfra_hardwaremodel" ("series_id");
The error was: index iamictinfra_hardwaremodel_b18a98d already exists 
```

现在我可以删除创建索引命令，但我不确定它是否可以在生产服务器（mySql）上运行。

另一种选择可能是更改脚本并删除列，并使其而不是更改它......但是，我还有很多迁移......我认为在旧迁移中搞砸有点棘手...... ..我试图用try catch来捕捉它......

也可能是该脚本是使用较旧的南方版本制作的......并且在较新的版本中，索引也在更改列时被重命名......而在旧版本中它不是......

我正在使用南 0.7.6（当前最新）。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T13:41:48.387

你可能已经想通了，如果是这样，你能发布你的解决方案吗？

我自己也有同样的问题。我通过删除索引创建行来解决它。迁移在生产中成功（mysql）。

在源代码中查看后，似乎更改操作已经自动为 fk 创建索引，所以我认为 create_index 是不必要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T09:44:47.050

@Mariodev 很抱歉让您失望，我没有找到任何解决方案。

由于 sqlite 不被南方开发社区视为 django 的真正数据库选项......它看起来在不久的将来没有任何解决方案。也许这里所说的有点复杂，我认为这也与在开发服务器（runserver）上运行它而不是真实的东西有关。

就我而言，sqlite 数据库只是我的开发和测试数据库（生产在 mySQL 上运行）

mySql中没有出现问题

所以我的“解决方案”是删除 sqlite 数据库（幸运的是，我使用固定装置来填充新的开发数据库）并做一个新的 syncdb 并迁移。

确保您使用固定装置，或使用转储命令备份数据库，这样您就可以重新开始......

# c# - 安全下载链接

> ID：14477481
> 
> 赞同：-1
> 
> 时间：2013-01-23T10:30:00.043
> 
> 标签：c#, asp.net

假设我的服务器中有一个文件，我希望它可供我的用户使用。如何在不向他们提供文件的真实（直接）路径的情况下向他们提供下载链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:45:21.170

例如，您需要在 IIS 中设置一个指向文件目录/路径的虚拟目录；

*   IIS 管理器 - 转到相应的网站并右键单击，添加虚拟目录
*   添加虚拟目录和路径的别名（例如 docs 和 C:\docs）

完成此配置后，您将能够提供下载链接：[http://url.com/docs/file.txt]

# javascript - Grails 在 https 中引用 js

> ID：14477483
> 
> 赞同：3
> 
> 时间：2013-01-23T10:30:09.407
> 
> 标签：javascript, grails, https

我开发了一个 Javascript 库，可以在我的其他一些站点中使用。这是一个 Grails 应用程序。可以通过 HTTPS 访问 grails 应用程序。但是，在 HTTPS 中引用 JS 文件时会出现问题。

包含 JS 库时，例如：

```
https://foo.my.domain/appcontext/static/js/myjslib.js 
```

Grails 将此请求重定向到：

```
http://foo.my.domain/appcontext/static/bundle-bundle_application_defer.js 
```

请注意导致“不安全”警告的 HTTPS -> HTTP，并且 js lib 在例如 chrome 和 IE 中被阻止。

如果我参考

```
https://foo.my.domain/appcontext/static/bundle-bundle_application_defer.js 
```

直接，它工作正常！

引用静态内容时，如何强制 grails 不进行此 https -> http 重定向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:35:47.230

只需使用

```
<g:javascript src="myjslib.js" />. 
```

js 文件应该在 web-app/js 文件夹下

文档在这里： http: [//grails.org/doc/latest/ref/Tags/javascript.html](http://grails.org/doc/latest/ref/Tags/javascript.html)

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T19:36:06.840

我也遇到了这个问题。我们正在包含来自导致 Chrome 出现问题的遗留应用程序的 JS 和 CSS。

在我们的例子中，我们有一个执行 ssl 加密的 nginx 代理，因此配置 Spring / Acegi 不是一个选项。下面的 curl 会话（经过编辑以删除我们的服务器名称/地址）显示了从 https 到 http 的重定向。

```
$ curl -v https://FOO.com/ess/js/framework/Widgets/Suggest.DropDown.js
* About to connect() to FOO.com port 443 (#0)
...
 GET /ess/js/framework/Widgets/Suggest.DropDown.js HTTP/1.1
...
 HTTP/1.1 302 Found
 Server: nginx/1.4.1
 Date: Fri, 31 May 2013 19:24:40 GMT
 Content-Length: 0
 Connection: keep-alive
 Location: http://FOO.com/ess/static/js/framework/Widgets/Suggest.DropDown.js 
```

我想出的解决方案是使用 Config.groovy 中的排除模式从资源插件中排除遗留资源，如下所示：

```
grails.resources.adhoc.patterns = ['/images/*', '/css/*', '/js/*', '/plugins/*']
grails.resources.adhoc.excludes = [ '/css/framework/**', '/js/framework/**' ] 
```

此处的更多文档：http: [//grails-plugins.github.io/grails-resources/guide/9.%20Configuration.html](http://grails-plugins.github.io/grails-resources/guide/9.%20Configuration.html)

# android - 为不同的活动背景显示更多尺寸大于800*1024的图像

> ID：14477484
> 
> 赞同：1
> 
> 时间：2013-01-23T10:30:09.957
> 
> 标签：android, out-of-memory, android-image, bitmapimage

我在应用程序中有 20 到 25 个活动，每个活动都扩展了一个常见的基本活动。每个活动都有一个背景图像，其中包含一些大小为 800*1024 的大小。此背景图像已在基本活动中设置。

为了显示这些图像，我根据设备宽度和高度计算了缩放比例。我将此比例设置为`inSampleSize`of `BitmapFactory.Options`，然后我重新创建了位图。

`onDestroy`我在每个活动和基本活动的方法中回收了位图。

尽管我正在重新调整图像大小并回收位图，但我`OutOfMemoryError`在运行一段时间后得到了改善。

谁能指导我如何避免这种情况`OutOfMemoryError`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:58:52.770

为此，您应该使用 AQuery(Android Query)。此 Api 易于使用，它会自动处理内存错误。它为您的应用程序提供了很多选项。

你可以从这里下载：

[AndroidQuery.jar](http://code.google.com/p/android-query/downloads/detail?name=android-query-full.0.24.3.jar)

你可以从这里得到描述：

[Android 查询完整详情](http://code.google.com/p/android-query/)

对于图像特定选项，您可以访问：

[Android 查询图片文档](http://code.google.com/p/android-query/wiki/ImageLoading)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:42:37.953

在这里，在活动中，您可以看到该活动在调用`lifecycle`后将对用户可见。`Resume`因此，您可以编写代码以在`onResume()`方法中创建和设置位图。以及当您的活动进入时`background`，`onStop()`将调用。所以建议在这个阶段释放你的记忆。

在您的方法中，当活动为 时`destroyed`，您正在释放内存。但不是这样做，当活动对用户可见时，`allocate`内存和`free`活动后隐藏。

**编辑：**

您也可以在 中释放位图`onPause()`，但是当您这样做时，您会看到第一个背景将变为**黑色**，然后活动将被更改。

![活动生命周期](../Images/a52ded079a0ff5097a8a06f77b85ce61.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T10:44:01.937

设置 "BitmapFactory.options" 时检查您的代码。通常创建 UI 需要一些时间。因此，如果您在创建 UI 之前设置 BitmapFactory.options，您将从 getWidth()/getHeight() 方法获得 0。将 0 设置为样本大小没有任何作用。您必须在创建 UI 后设置 BitmapFactory.options。

# jquery - 点击监听类，后面会创建

> ID：14477485
> 
> 赞同：3
> 
> 时间：2013-01-23T10:30:10.797
> 
> 标签：jquery, jquery-selectors

我试图找出是否可以创建一个类 clicklistener。当我创建一个 div 监听器时，我可以先添加监听器，然后我可以创建 div。

所以我想先创建监听器，然后再添加类。可能吗？

html:

```
<div>
    <div id="1">
        <div id="2">
            <!-- will be created.. -->
        </div>
    </div>
</div> 
```

js：

```
$(".welcome").click(function() {
    alert("Hi there");
});

// Later the class album will be loaded
// When you put it above it will work..
welcome = document.getElementById("2");
welcome.innerHTML = '<div id="3" class="welcome"> Hello</div>'; 
```

我做了一个[jsfiddle](http://jsfiddle.net/n5vYb/9/)来测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T10:32:56.273

你可以做到这一点。在 jQuery 中，这种模式称为委托事件。您可以将单击处理程序附加到元素，一旦将元素附加到它`#2`，它将可用。`.welcome`尝试这个：

```
$('#2').on('click', '.welcome', function() {
    alert("Hi there");
}); 
```

[**更新的小提琴**](http://jsfiddle.net/n5vYb/11/)

请注意，在您的小提琴中，我还修改了普通的 javaScript 以使用 jQuery 方法。如果你有它们，你也可以使用它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T10:31:51.373

是的，可以使用[事件委托](http://api.jquery.com/on/#direct-and-delegated-events)：

```
$(document).on('click', '.welcome', function(e) {
    alert("Hi there");
}); 
```

我使用`document`来附加委托的事件处理程序，因为它会拾取与选择器匹配的**所有**元素`.welcome`，无论它们在页面上的什么位置。不过，理想情况下，您会使用最接近的静态元素，该元素将包含您想要匹配的所有元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T10:32:08.733

是的...用于[事件](http://api.jquery.com/on/)委托...

> 事件处理程序仅绑定到当前选定的元素；当您的代码调用 .on() 时，它们必须存在于页面上。为确保元素存在并且可以被选择，请在页面 HTML 标记中的元素的文档就绪处理程序内执行事件绑定。如果将新 HTML 注入页面，请在将新 HTML 放入页面后选择元素并附加事件处理程序。或者，使用委托事件来附加事件处理程序，如下所述。

尝试这个

```
 $(document).on('click','.welcome',function() {
    alert("Hi there");
 }); 
```

更好的是，如果您将事件附加到最近的元素...在您的情况下，它是具有 id #2 的 div `<div id=2`>

```
$('#2').on('click', '.welcome', function() {
   alert("Hi there");
}); 
```

[在这里摆弄](http://jsfiddle.net/bipen/n5vYb/10/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T10:37:53.093

当页面准备好时，您必须委托给 dom 中可用的最近的现有父级：

```
$('div[id="2"]').on('click', '.welcome', function(e) {
    alert("Hi there");
}); 
```

# java - Teradata 中的行 ID

> ID：14477486
> 
> 赞同：5
> 
> 时间：2013-01-23T10:30:11.300
> 
> 标签：java, sql, database, teradata

我需要使用 select 语句提取行 ID。类似于 oracle 的行 ID 的东西。我将如何在 Teradata 中做到这一点？我正在尝试以下查询，但它抛出错误。

```
select rowid,emp_id,e_name from test;

Error msg : Syntax error: ROWID not allowed. 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T13:25:54.410

试试`ROW_NUMBER()`窗口聚合函数：

```
SELECT ROW_NUMBER() OVER(ORDER BY empid) AS RowID_
     , empid
     , empName
  FROM test; 
```

与窗口聚合不同`RANK()`，`ROW_NUMBER()`不允许在结果集中出现联系。您的另一种选择是`IDENTITY`在表格中使用一列，但这些列很乱并且会导致问题。`ROW_NUMBER()`如果您需要维护代理键，则更容易将其合并到您的 ETL 处理中。

需要注意的是，如果您的`ORDER BY`or`PARTITION BY`列有偏差，那么您`STAT FUNCTION`在查询计划中的步骤上的性能会受到大量数据的影响。该`PARTITION BY`子句是可选的，允许您定义一个窗口，`ROW_NUMBER()`当分区更改时，将在其中重置结果。不常用，`ROW_NUMBER()`但它可能会派上用场。

**编辑** 使用代理项唯一标识记录，而不必依赖 ETL 使用中的逻辑和表中的标识列。正确配置 IDENTITY 列在删除记录时不会重用任何域值。

# php - PHP编码url空格

> ID：14477487
> 
> 赞同：0
> 
> 时间：2013-01-23T10:30:12.057
> 
> 标签：php, url

> **可能重复：**
> [带有空格和特殊字符的 URL 的最佳实践](https://stackoverflow.com/questions/4795580/best-practices-for-url-with-space-and-special-characters)

我正在尝试制作“漂亮”的网址，我想知道人们如何处理空白空间，例如，如果我正在创建一个带有标题的新论坛主题：

`awesome thread title`

我想用`-`符号替换空格，所以我应该得到类似的东西：

`http://website.com/forum/thread/awesome-thread-title`

现在它似乎正在工作，但如果用户写了我该怎么办

`some-title`

从数据库中获取记录时，这会破坏我的代码，因为我会将`-`符号替换为空白空间，而数据库中的行名实际上会有，`-`因此我什么也找不到。

我可以举更多的例子......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:33:41.773

您不应依赖 url 的标题部分来查找数据库中的元素。在它前面加上一些 ID 并忽略标题。查看您当前在stackoverflow中查看的页面的url...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T10:32:27.547

不要试图将*slug*逆向工程到数据库中的实际标题以进行搜索。当用户创建新帖子时，从标题（“Awesome thread title”-> `awesome-thread-title`）形成一个 slug，确保它在数据库中是唯一的*并将其保存在数据库中*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T10:33:02.160

通常，您也将“漂亮”的 URL 片段存储在数据库中并将其用作唯一索引，因为正如您所注意到的，“美化”是不可逆的。

# php - 读取xml文件并在php中生成json_encode格式

> ID：14477488
> 
> 赞同：0
> 
> 时间：2013-01-23T10:30:18.573
> 
> 标签：php, xml, json

> **可能重复：**
> [XML 到 JSON 或数组？PHP](https://stackoverflow.com/questions/1521283/xml-to-json-or-array-php)

我有一个如下所示的 xml 文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<response uri="/crm/private/xml/Leads/getCVRecords">
<result>
<Leads>
<row no="1">
<FL val="LEADID">580005000000189001</FL>
<FL val="SMOWNERID">580005000000052003</FL>
<FL val="Lead Owner"><![CDATA[Adithya Buddhavarapu]]></FL>
<FL val="First Name"><![CDATA[Srimanta]]></FL>
<FL val="Last Name"><![CDATA[Chakraborty]]></FL>
<FL val="Email"><![CDATA[srimanta12@gmail.com]]></FL>
<FL val="Lead Source"><![CDATA[iBanquet FB]]></FL>
<FL val="No of Employees"><![CDATA[0]]></FL>
<FL val="Annual Revenue"><![CDATA[0]]></FL>
<FL val="SMCREATORID">580005000000052003</FL>
<FL val="Created By"><![CDATA[Adithya Buddhavarapu]]></FL>
<FL val="MODIFIEDBY">580005000000052003</FL>
<FL val="Modified By"><![CDATA[Adithya Buddhavarapu]]></FL>
<FL val="Created Time"><![CDATA[2013-01-22 12:24:04]]></FL>
<FL val="Modified Time"><![CDATA[2013-01-22 12:24:04]]></FL>
<FL val="Email Opt Out"><![CDATA[false]]></FL>
<FL val="Last Activity Time"><![CDATA[2013-01-22 12:24:04]]></FL>
</row>
<row no="2">
<FL val="LEADID">580005000000188001</FL>
<FL val="SMOWNERID">580005000000052003</FL>
<FL val="Lead Owner"><![CDATA[Adithya Buddhavarapu]]></FL>
<FL val="First Name"><![CDATA[Adithya]]></FL>
<FL val="Last Name"><![CDATA[Buddhavarapu]]></FL>
<FL val="Email"><![CDATA[adithya.buddhavarapu@oracle.com]]></FL>
<FL val="Lead Source"><![CDATA[iBanquet FB]]></FL>
<FL val="No of Employees"><![CDATA[0]]></FL>
<FL val="Annual Revenue"><![CDATA[0]]></FL>
<FL val="SMCREATORID">580005000000052003</FL>
<FL val="Created By"><![CDATA[Adithya Buddhavarapu]]></FL>
<FL val="MODIFIEDBY">580005000000052003</FL>
<FL val="Modified By"><![CDATA[Adithya Buddhavarapu]]></FL>
<FL val="Created Time"><![CDATA[2013-01-21 19:14:44]]></FL>
<FL val="Modified Time"><![CDATA[2013-01-21 19:14:44]]></FL>
<FL val="Email Opt Out"><![CDATA[false]]></FL>
<FL val="Last Activity Time"><![CDATA[2013-01-21 19:14:44]]></FL>
</row>
<row no="3">
<FL val="LEADID">580005000000166001</FL>
<FL val="SMOWNERID">580005000000052003</FL>
<FL val="Lead Owner"><![CDATA[Adithya Buddhavarapu]]></FL>
<FL val="First Name"><![CDATA[Sri]]></FL>
<FL val="Last Name"><![CDATA[Nair]]></FL>
<FL val="Email"><![CDATA[sreejith_eroots@hotmail.com]]></FL>
<FL val="Lead Source"><![CDATA[iBanquet FB]]></FL>
<FL val="No of Employees"><![CDATA[0]]></FL>
<FL val="Annual Revenue"><![CDATA[0]]></FL>
<FL val="SMCREATORID">580005000000052003</FL>
<FL val="Created By"><![CDATA[Adithya Buddhavarapu]]></FL>
<FL val="MODIFIEDBY">580005000000052003</FL>
<FL val="Modified By"><![CDATA[Adithya Buddhavarapu]]></FL>
<FL val="Created Time"><![CDATA[2012-12-28 16:14:29]]></FL>
<FL val="Modified Time"><![CDATA[2012-12-28 16:14:29]]></FL>
<FL val="Email Opt Out"><![CDATA[false]]></FL>
<FL val="Last Activity Time"><![CDATA[2012-12-28 16:14:29]]></FL>
</row>
</Leads>
</result>
</response> 
```

现在我必须获取所有值，如 LEADID、SMOWNERID、Lead Owner、....、Last Activity Time，并将它们存储在 json 数组中。我怎样才能做到这一点？请帮我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:38:24.463

那么，您必须使用适当的函数解析 xml 文件并将其编码为 json 对象。那么如何使用这些函数`xml_parse_into_struct`（还有很多其他函数用于 xml 解码）和`json_encode`.

也许你应该看看关于 php 和 xml resp 的一般解释。[http://php.net/manual/en/refs.xml.php](http://php.net/manual/en/refs.xml.php)和[http://php.net/manual/en/book.json.php](http://php.net/manual/en/book.json.php)下的 json

# regex - 输入验证 - 正则表达式匹配脚本

> ID：14477490
> 
> 赞同：-1
> 
> 时间：2013-01-23T10:30:25.177
> 
> 标签：regex, validation, xss

为了确保它不包含任何 Javascript，我需要针对哪些正则表达式来测试字符串？

我以这篇[文章](http://www.publicidentity.ca/strip-javascript-script-tags-out-of-html-using-regular-expressions/)为起点。

*   代码块：

    `<script.*?>[\s\S]*?</.*?script>`

*   ":javascript" 代码（例如`<a href="javascript:alert('hello')"`）：

    `(?<=<.*)javascript.*:[^"]*`

*   Html 标签中的事件处理程序（例如`<div onmouseover=""`）：

    `on\w+="[^"]*"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:32:50.710

永远不要使用正则表达式来解析 HTML。您可能能够确保它不包含 javascript，但您无法确保它不会以其他方式被严重破坏。相反，请使用适当的解析器。

此外，即使是不包含 javascript 的有效 HTML 仍可能包含其他令人不快的元素（音频、视频、CSS 节点、表单元素...），我建议对您允许的 HTML 元素使用白名单。

这是您的代码的外观示例（请注意，即使它应该是伪代码，这实际上可能是正确的 C# 语法）：

```
string[] tagWhitelist = ['strong', 'em', 'span' /*, ...*/];
string[] attrWhitelist = [/*...*/];

void function fixNode(DOMNode node, bool dieOnError){
   if(tagWhitelist.contains(node.type()){
      node.children.each((x) => fixNode(x))
      node.attributes
         .filter((x) => !attrWhitelist.contains(x))
         .each((x) => dieOnError ? throw new InvalidTagException() : x.remove())
   }else{
      dieOnError ? throw new InvalidAttrException() : node.remove()
   }
}

...

string output = fixNode(DOMParser.load(input, {strict:false}), false).toString(); 
```

这也可以用于验证，但*前提*是解析器能够在无效 HTML 上引发异常（我使用过的那些总是尝试修复代码）：

```
try{
   // note: if fixNode is only ever used to validate, don't use exceptions
   fixNode(DOMParser.load(input, {strict:true}), true);
   return true;
}catch(InvalidTagException, InvalidAttrException ex){
   return false;
} 
```

更新：您在评论中链接的代码声称可以做到这一点，但我不能保证它确实做到了。

# c# - WinRT ScrollViewer 继承

> ID：14477493
> 
> 赞同：0
> 
> 时间：2013-01-23T10:30:35.327
> 
> 标签：c#, xaml, windows-runtime, scrollviewer

我对`Windows.UI.Xaml.Controls.ScrollViewer`.

它不像我想要的那样工作（*doh*）。如果我在里面放了一个 Canvas 并想在上面画画，我不能，因为 Canvas 中的所有事件都传递给了 ScrollViewer。因此，如果我可以在收到事件时控制 ScrollViewer 中发生的事情（丢弃它，将其传递给 Canvas，调用缩放基础等），我对问题的解决方案将相当简单 - 但似乎我不能这样做，因为`ScrollViewer`是**密封类**。

这适用于 WPF，但不适用于 XAML。

有什么想法可以解决这个相当愚蠢的问题吗？

我现在唯一能想到的就是放弃`ScrollViewer`并在 Canvas 类上实现我自己的缩放和滚动功能。:\ 如果可能，希望避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:37:56.707

您有两个选择 - 实现您自己的 ScrollViewer 或在 ScrollViewer 上放置一些透明的东西来处理触摸事件。请参阅以下相关问题：

[ScrollViewer 和处理子元素上的操作事件](https://stackoverflow.com/questions/12636216/scrollviewer-and-handling-manipulation-events-on-child-elements)

[如何允许在 ListView/GridView 项控件中进行操作，同时允许在 ListView/GridView 上进行滚动和交叉滑动操作？](https://stackoverflow.com/questions/14153038/how-to-allow-manipulations-within-listview-gridview-item-controls-while-allowing/14161596#14161596)

# c# - 将对象添加到 DataTable 并创建动态 GridView

> ID：14477500
> 
> 赞同：2
> 
> 时间：2013-01-23T10:30:59.140
> 
> 标签：c#, asp.net, jquery

我有很多这样的工作，并使用这种技术创建了一个下拉列表和一个树视图。用于动态创建控件并将它们返回到使用 jqueryajax 和 C# 完全构建和配置的页面的 ajax 调用。但我坚持从我的类对象创建一个数据表。该控件显然返回了一个双循环gridView，我只是希望它写出返回数据的视图，最终具有gridView CRUD Ops的所有优点。它很简单我做错了你能帮忙吗？

这是我用于创建 GridView 的 C# 代码

```
[WebMethod]
        public static AjaxReturnObject GetProductsByCategoryID(string CategoryID)
        {
            AjaxReturnObject o = new AjaxReturnObject();
            int catID = Convert.ToInt32(CategoryID);
            Product.ProductCollection products = new Product().GetProductsByCategoryID(catID);
            if (products.Count == 0)
            {
                o.Message = "There was no data returned";
                o.Status = 999;

                return o;
            }
            else
            {
                // build a new GridView (or List View) for the UI and populate it with data.
                // 1: Initialize a object of type DataTable.
                DataTable dt = new DataTable();

                //2: Initialize a object of type DataRow
                DataRow drow;

                //3: Initialize enough objects of type DataColumns
                DataColumn col1 = new DataColumn("Product Name", typeof(string));
                DataColumn col2 = new DataColumn("Product Description", typeof(string));
                DataColumn col3 = new DataColumn("Price", typeof(string));
                DataColumn col4 = new DataColumn("Col4", typeof(string));

                //4: Adding DataColumns to DataTable dt
                dt.Columns.Add(col1);
                dt.Columns.Add(col2);
                dt.Columns.Add(col3);
                dt.Columns.Add(col4);

                //5: Adding values in DataColumns       
                for (int i = 0; i < products.Count; i++)
                {

                    foreach (Product item in products)
                    {

                        drow = dt.NewRow();
                        dt.Rows.Add(drow);
                        dt.Rows[i][col1] = item.ProductName.ToString();// i.ToString();
                        dt.Rows[i][col2] = item.ProductDescription.ToString();
                        dt.Rows[i][col3] = String.Format("{0:C}", item.Price);
                        dt.Rows[i][col4] = String.Format("{0:.00}", item.Price);
                    }

                }

                GridView GridView1 = new GridView();
                GridView1.DataSource = dt;
                GridView1.DataBind();

                // Render the new control and return it to the Ajax Return Object
                StringWriter tw = new StringWriter();
                Html32TextWriter writer = new Html32TextWriter(tw);
                GridView1.RenderControl(writer);
                writer.Close();
                o.Object = tw.ToString();

                o.Message = "Result Data Message";
                o.Status = 1;

                return o;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-18T10:52:05.410

虽然上面的答案是对的。

但更好的方法是编写将集合转换为 DataTable 的扩展方法，我们可以在应用程序的任何地方使用它，我的项目中有一个用于转换`List<T>`为`DataTable`.

它是这样的：

```
public static class ListExtensions
{
   public static DataTable ToDataTable<T>(this List<T> iList)
   {
    DataTable dataTable = new DataTable();
    PropertyDescriptorCollection propertyDescriptorCollection =
        TypeDescriptor.GetProperties(typeof(T));
    for (int i = 0; i < propertyDescriptorCollection.Count; i++)
    {
        PropertyDescriptor propertyDescriptor = propertyDescriptorCollection[i];
        Type type = propertyDescriptor.PropertyType;

        if (type.IsGenericType && type.GetGenericTypeDefinition() == typeof(Nullable<>))
            type = Nullable.GetUnderlyingType(type);

        dataTable.Columns.Add(propertyDescriptor.Name, type);
    }
    object[] values = new object[propertyDescriptorCollection.Count];
    foreach (T iListItem in iList)
    {
        for (int i = 0; i < values.Length; i++)
        {
            values[i] = propertyDescriptorCollection[i].GetValue(iListItem);
        }
        dataTable.Rows.Add(values);
    }
    return dataTable;
  }
} 
```

并以任何`List<T>`这种方式使用它：

```
List<Product> products = new List<Product>();
DataTable dtProducts = products.ToDataTable(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T11:16:23.370

我相信你在循环上犯了一个错误

```
// remove that line
// for (int i = 0; i < products.Count; i++)
int i = 0;
{    
    foreach (Product item in products)
    {    
        drow = dt.NewRow();
        dt.Rows.Add(drow);
        dt.Rows[i][col1] = item.ProductName.ToString();// i.ToString();
        dt.Rows[i][col2] = item.ProductDescription.ToString();
        dt.Rows[i][col3] = String.Format("{0:C}", item.Price);
        dt.Rows[i][col4] = String.Format("{0:.00}", item.Price);
        // and here move to next
        i++;
    }    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T11:20:09.560

您正在运行不必要的 foreach 循环。改变你的循环结构如下：

```
//5: Adding values in DataColumns       
                for (int i = 0; i < products.Count; i++)
                {

                    //foreach (Product item in products)
                    //{
                    Product item = products[i];
                    drow = dt.NewRow();
                    dt.Rows.Add(drow);
                    dt.Rows[i][col1] = item.ProductName.ToString();// i.ToString();
                    dt.Rows[i][col2] = item.ProductDescription.ToString();
                    dt.Rows[i][col3] = String.Format("{0:C}", item.Price);
                    dt.Rows[i][col4] = String.Format("{0:.00}", item.Price);
                    //}

                } 
```

# ruby-on-rails - 重定向 Rails 中的所有 URL（已知和未知）

> ID：14477504
> 
> 赞同：2
> 
> 时间：2013-01-23T10:31:23.850
> 
> 标签：ruby-on-rails

是否有一个巧妙的解决方案可以在一个地方在 Rails 中实现这一目标？（最好`routes.rb`）。现在为了重定向，我做了一个这样的前置过滤器：

```
...
unless [temp_url].include? request.url
  redirect_to temp_path
end 
```

这种方法适用于已知路线。未知路由会出现 404 错误。对于未知，可以在以下位置使用它`routes.rb`：

```
match "/*other" => redirect("/temp/index") 
```

显然我们无权`request`访问`routes.rb`. 是否有更好的解决方案来涵盖已知和未知的重定向`routes.rb`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:14:36.103

**未知路由重定向到根**

`routes.rb`

```
match '*path' => redirect('/') 
```

使用上述方法，您可以将所有未知路由重定向到根目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:12:39.120

仔细看看`before_filter`：

例如，以下代码总是在 show、edit、update 和 destroy 端点中调用 find_post 方法。您的情况可以使用相同的逻辑。

```
class PostsController < ApplicationController
  before_filter :find_post, :only => [:show, :edit, :update, :destroy]

  def update
    @post.update_attributes(params[:post])
  end

  def destroy
    @post.destroy
  end

  protected    
    def find_post
      @post = current_user.posts.find(params[:id])
    end
end 
```

# c# - .Net 事件 - 除了 onClick 之外的事件中使用的（对象发送者，EventArgs e）参数

> ID：14477507
> 
> 赞同：2
> 
> 时间：2013-01-23T10:31:27.500
> 
> 标签：c#, asp.net, .net, events, event-handling

我没有找到[.NET 事件 - 什么是对象发送者和 EventArgs e？](https://stackoverflow.com/questions/1303145/net-events-what-are-object-sender-eventargs-e)发帖很有帮助。

它主要说明在 onClick 场景中如何使用参数（对象发送者、EventArgs e），结果证明这是显而易见的用途。

**我的问题是：**

忽略 onClick 功能

即在Page_Load、Init等页面事件的情况下

这些 (object sender, EventArgs e) 参数有什么用？

例子会更有帮助:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:36:03.003

好吧，这很简单：

`object sender`是发出事件的实体 - 在 page_load 的情况下，我很确定它是页面本身，因为页面正在发出事件（所以`this == sender`在页面中应该是真的）。 `EventArgs e`很无聊（它是一个基类），但其他事件带来了更有趣的类，这些类讲述了事件的一些信息，因此例如 onMouseDown-Event 将带来有关屏幕上鼠标位置的数据。其他事件可能会带来其他数据 - 但大多数情况下，事件本身和发送者足以获取所需的所有数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T10:46:00.717

使用标准（类似）签名`(sender, eventargs)`是有益的，因为

*   它足够灵活和通用，可以服务于许多场景。即使是新手也可以作为标准模板
*   相似的签名增加了对模式的熟悉度，有助于减少初学者的学习时间
*   在事件委托级别和处理程序级别启用可重用性。

现在，一旦您接受/同意某些标准，您就需要坚持它们（即使在某些情况下，如果没有相关的巨额成本，这可能没有意义）。.NET Fx 开发人员已决定使用此标准事件模板，并且随处可见。

让我们举个例子`Page_Load`——这个事件实际上是在[Control 级别](http://msdn.microsoft.com/en-us/library/system.web.ui.control.load%28v=vs.100%29.aspx)声明的。因此，某些代码可能会选择使用相同的事件处理程序来处理多个控件的加载事件，并使用`sender`参数来应用特定的东西。

# javafx-2 - JavaFx 条形图图例颜色

> ID：14477510
> 
> 赞同：2
> 
> 时间：2013-01-23T10:31:30.730
> 
> 标签：javafx-2

我知道我可以使用以下代码设置图例项的设置颜色：

`for (Node n : chart.lookupAll(".bar-legend-symbol.default-color0")) { n.setStyle("-fx-background-color: " + "red"+ ";"); }`

但它只有在我第一次将数据添加到图表然后再将图表添加到场景时才有效。像这样：

```
final XYChart.Series<String, Number> series = new XYChart.Series<String, Number>();
XYChart.Data<String, Number>bar = new XYChart.Data<String, Number>("test", 120);
series.getData().add(bar);

chart.getData().add(series);

chartFxPanel.setScene(new Scene(chart));

for (Node n : chart.lookupAll(".bar-legend-symbol.default-color0")) {
    n.setStyle("-fx-background-color: " + "red"+ ";");
   } 
```

但是我想在图表添加到场景后将数据添加到图表中。如果我这样做，它不会改变图例项的颜色：

```
final XYChart.Series<String, Number> series = new XYChart.Series<String, Number>();
XYChart.Data<String, Number>bar = new XYChart.Data<String, Number>("test", 120);
series.getData().add(bar);

chartFxPanel.setScene(new Scene(chart));
chart.getData().add(series);

for (Node n : chart.lookupAll(".bar-legend-symbol.default-color0")) {
    n.setStyle("-fx-background-color: " + "red"+ ";");
   } 
```

那么如何更改图例项的颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:49:41.723

如果您将查找/setStyle 代码包装在[Platform.runLater](http://docs.oracle.com/javafx/2/api/javafx/application/Platform.html)调用中，它可能会起作用（或者最坏的情况，使用像此[示例这样的](https://gist.github.com/2129306)[时间轴](http://docs.oracle.com/javafx/2/api/javafx/animation/Timeline.html)来延迟它）。这些构造使 JavaFX 系统有机会在下一个脉冲上处理和设置数据项更改的样式，以便您随后可以覆盖它。

为什么不能只使用 css 样式表而不是使用 java 代码查找来自定义样式？也就是说，使用[JavaFX 图表样式指南](http://docs.oracle.com/javafx/2/charts/css-styles.htm)中概述的类似技术。那么您就不需要处理与查找时间相关的问题，这似乎更可取。

# c# - 我如何（服务器端）在 html 页面中包含 html 页面？

> ID：14477512
> 
> 赞同：1
> 
> 时间：2013-01-23T10:31:41.193
> 
> 标签：c#, html

在 .NET 上，我在一个页面内下载了整个网站页面：

```
m_oClient.DownloadString(link); 
```

当然，页面已经有`<html></html>`，所以现在我有`<html></html>`两次使标记无效。

我不能使用 iframe（由于 X-Frame-Options 政策），那么还有其他方法吗？

# c# - 在 rdlc 中将字段值连接成一个“单词”

> ID：14477514
> 
> 赞同：0
> 
> 时间：2013-01-23T10:31:44.377
> 
> 标签：c#, rdlc

是否可以将一个字段的所有值连接成一个“单词”，以便它可以显示在 rdlc 报告的一个文本框中。如果没有，是否有其他方法可以在一个文本框中显示整个字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:31:49.940

您可以通过使用`ReportParameter`多个值来做到这一点。

但是我从未使用过它，也没有找到任何文章/博客文章/论坛来逐步说明如何完成您的任务。

[也许这个，](http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/ceabc828-d389-45bd-9ad0-580cc857686c/)但他们在谈论 SSRS

# c# - 我可以使用资源本身作为监视器来锁定资源吗？

> ID：14477517
> 
> 赞同：1
> 
> 时间：2013-01-23T10:31:54.753
> 
> 标签：c#, multithreading, locking, mutual-exclusion

我有一个多线程运行上下文。我希望一个资源（比如说对象 r）是互斥的。我可以将资源本身用作其监控对象吗？

例如

```
 lock(r)
    {
        // do something...
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:18:21.870

如果始终保持相同的`r`对象 - 例如，您要从多个线程中添加项目：`r``List`

```
lock (r)
{
    r.Add("Hello world");
} 
```

那么这很好 - 它不会引起任何问题，并且您可以在专门“锁定`r`”时阅读它。（只要确保你`lock`在任何*其他*正在使用的代码周围放置一个类似的`r`。）

但是，如果`r`正在切换到内部的另一个对象`lock`：

```
lock (r)
{
    r = new List<string>();
} 
```

这*不是*一个好主意，因为您最终可能会有两个线程`lock`针对两个不同版本的`r`. 在这种情况下，您应该创建一个`object`专门用于锁定的不变 - 您更多的是“锁定*代码块*”而不是“锁定`r`”。

# java - 获取列表视图中所选项目的ID

> ID：14477518
> 
> 赞同：0
> 
> 时间：2013-01-23T10:31:55.963
> 
> 标签：java, android, listview

我有一个带有 listView 的应用程序，我在其中设置了我的 sqlite 数据库中的数据。我的 CustomCursorAdapter 将数据（来自 DBAdapter）放在列表​​视图中。我想从我的 listView 中获取所选项目的项目 ID，我通过以下代码使其工作：

```
listView.setOnItemClickListener(new OnItemClickListener() {
           @Override
           public void onItemClick(AdapterView<?> listView, View view, 
             int position, long id) {
           // Get the cursor, positioned to the corresponding row in the result set
           Cursor cursor = (Cursor) listView.getItemAtPosition(position);

           //Get it from the database.
           String countryCode = 
           cursor.getString(cursor.getColumnIndex(cursor.getColumnName(0)));
           Toast.makeText(getApplicationContext(),
             countryCode, Toast.LENGTH_SHORT).show();

           }
          }); 
```

该代码确实获得了 ID 并敬酒，我可以在其中看到 ID。这完美地工作。现在我想把它放在一个上下文菜单中，我在其中长按该项目（所以这个方法不会启动）。我有使用项目的上下文菜单，但我只需要获取列表视图中被选中的项目的 ID。

这是我的上下文菜单代码：

```
 public boolean onContextItemSelected(MenuItem item) {

     Cursor cursor = (Cursor) listView.getItemAtPosition(position);

       String countryCode = 
       cursor.getString(cursor.getColumnIndex(cursor.getColumnName(0)));

      switch (item.getItemId()) {
              case CONTEXT_MENU_DELETE_ITEM:

               Toast.makeText(getApplicationContext(),
                     countryCode, Toast.LENGTH_SHORT).show();
                   return(true);
             case CONTEXT_MENU_UPDATE:

                   return(true);    
      }
  return(super.onOptionsItemSelected(item));
} 
```

上下文菜单现在不起作用，因为未设置位置变量。我真的不知道如何获得选定的项目。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:38:55.760

用这个

```
AdapterContextMenuInfo menuInfo = (AdapterContextMenuInfo) item .getMenuInfo();   
int positionSelected = menuInfo.position; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:35:31.837

它很简单，只需在实现 onItemClick 时实现 onItemLongClick 并将此列表视图注册为上下文菜单。

长按获取索引，通过此获取选定的 ID，并在上下文菜单中使用此 ID。

另一种方法是在此链接中查看链接

[http://progrnotes.blogspot.in/2010/10/android-context-menu-in-listview-after.html](http://progrnotes.blogspot.in/2010/10/android-context-menu-in-listview-after.html)

这是菜单的片段代码

```
@Override
 public boolean onContextItemSelected(MenuItem item) {

      AdapterView.AdapterContextMenuInfo info= (AdapterView.AdapterContextMenuInfo) item.getMenuInfo();
      Long id = getListAdapter().getItemId(info.position);/*what item was selected is ListView*/

      switch (item.getItemId()) {
              case CONTEXT_MENU_DELETE_ITEM:
                    //do smth
                   return(true);
             case CONTEXT_MENU_UPDATE:
                   //do smth else)
                   return(true);   
      }
  return(super.onOptionsItemSelected(item));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T10:36:48.147

你的 ListView 通过[AbsListView.getCheckedItemIds()告诉你这个](http://developer.android.com/reference/android/widget/AbsListView.html#getCheckedItemIds%28%29)

高温高压

# product - Siebel 推广组

> ID：14477522
> 
> 赞同：0
> 
> 时间：2013-01-23T10:32:14.573
> 
> 标签：product, siebel

我想知道我是否可以使用促销组功能从我用作会员的产品系列中获取一个产品，以及从我也用作另一个会员的产品类别中获取另一个产品？

我希望将其用作兼容性规则，即 IE，产品线 A 中的产品将产品 A 排除在产品 A 类之外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:57:36.253

直观地说，这似乎是可能的，因为 Product Admin 屏幕中的应用程序 GUI 允许创建此类规则。然而，它可以做的事情有一个严重的限制。产品和产品线之间的关系是 M:M，但 Siebel 兼容性不会在兼容性规则运行时评估所有这些关系。事实上，与给定产品相关联的主要产品线（出于性能原因由应用程序设置为默认值）是唯一需要评估的产品线。我向 Oracle 指出了这一点（参见 support.oracle.com 上的 issue #3-4982911601），他们回来说他们会发出增强请求，但这将受到优先级的影响，所以谁知道它何时会应用。

# c# - 带 wp7 和 wpf 的棱镜

> ID：14477524
> 
> 赞同：0
> 
> 时间：2013-01-23T10:32:24.493
> 
> 标签：c#, silverlight, windows-phone-7, prism, extension-methods

我的 C# 类库中有一个类。我想将它作为链接添加到我的 wp7 类库。唯一的问题是 wp7 没有 List.RemoveAll(condition) 扩展方法，所以我必须使用 Prism 的 List.RemoveAll(condition) 。但是 Prism 确实有这种方法只适用于 wp7 而不是 wpf。我不想仅出于一串差异的原因维护两个单独的类。是否可以通过以 wp7 友好的方式重写我的 RemoveAll 块来解决这个问题？

# unix - Mercurial：无法在 .hgrc 文件中使用环境变量

> ID：14477529
> 
> 赞同：2
> 
> 时间：2013-01-23T10:32:34.853
> 
> 标签：unix, mercurial, redhat, hgrc

我有两台机器运行 Mercurial，一个 Solaris 系统和一个 Red Hat 系统。

在 Solaris 系统上，我可以在 .hgrc 文件中使用环境变量，但在 Red Hat 系统上它似乎不起作用。

我在 .hgrc 文件中有以下示例：

```
[ui]
username = $SUDO_USER 
```

但 hg log 显示以下内容：

```
user:        $SUDO_USER 
```

变量已设置并导出：

```
$ env|grep SUDO_USER
SUDO_USER=testuser 
```

相同的设置在 Solaris 系统上运行良好。谁能告诉我为什么这不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:36:21.017

[根据此页面](https://www.mercurial-scm.org/wiki/TipsAndTricks#Using_environment_variables_in_hgrc_files)，您只能使用 mercurial 1.4+ 版本的环境变量。

因此，请确保您安装了最新版本。

# iphone - iphone通过应用程序运行日历

> ID：14477532
> 
> 赞同：0
> 
> 时间：2013-01-23T10:32:56.053
> 
> 标签：iphone

当我们切换到 Safari 以打开 Web 链接时，我想切换到按钮选项卡上的本地日历。UIApplication sharedapplication 有那个选项？

# sql - SQL Server 索引/SQL 性能增强

> ID：14477536
> 
> 赞同：3
> 
> 时间：2013-01-23T10:33:05.953
> 
> 标签：sql, indexing, sql-server-2008-r2, database-performance

我在 SQL Server 中有一个如下所示的表：

```
CREATE TABLE [dbo].[FCT_RawEvents](
    [EquipID] [int] NOT NULL,
    [EventTimeStamp] [int] NOT NULL,
    [EventMilliSeconds] [smallint] NULL,
    [EventID] [int] NOT NULL,
    [EventOn] [bit] NOT NULL,
    [JobID] [int] NULL,
    [FirstEvent] [bit] NULL,
    [OperatorId] [int] NULL,
    [Suppressed] [bit] NULL,
    [ManualOverride] [bit] NULL
) 
```

这包含打开或关闭的事件（EventOn = True，EventOn = False）。现在我需要在给定时间获取所有“活动”（未抑制）的事件。我有一些有效的 SQL，但是由于该表有数百万行，因此运行速度非常慢（5 个equipId 需要 10 秒）。

这里是：

```
DECLARE @StartDateTime datetime = '2013/01/01'
DECLARE @csvEquipIds nvarchar(MAX) = '5,6,7,8'

DECLARE @StartTimeStamp int = dbo.GetSecondsFromDate(@StartDateTime)
DECLARE @StartMilliSeconds smallint = DATEPART(Ms, @StartDateTime) 

DECLARE @EquipIds TABLE (EquipId int)
INSERT INTO @EquipIds(EquipId) SELECT EquipID FROM dbo.getEquipmentIDs(null,@csvEquipIds)

SELECT dbo.getDateFromSeconds(EventTimeStamp), * FROM
    (   SELECT  re.EquipID,EventTimeStamp,EventMilliSeconds,EventID,eventon,
            ROW_NUMBER() OVER (PARTITION BY re.EquipId,EventID ORDER BY EventTimeStamp DESC,EventMilliSeconds DESC) AS RowNo
        FROM dbo.FCT_RawEvents re
        JOIN @EquipIds eq
        ON eq.EquipId = re.EquipID
        WHERE (re.EventTimeStamp < @StartTimeStamp OR(re.EventTimeStamp = @StartTimeStamp AND re.EventMilliSeconds <= @StartMilliSeconds)) AND re.EventID > 0
        AND (re.Suppressed IS NULL)-- OR re.Suppressed = 0)
    ) ev
WHERE  RowNo = 1  AND EventOn = 1

ORDER BY EquipID,EventID, EventTimeStamp  desc, EventMilliSeconds desc 
```

执行计划表明 80% 的时间都花在排序上，也就是 Partition/Order 窗口函数。

![执行计划：](../Images/586e1aacdf8ef349156bbb625f21e8b4.png)

我绝不是 INDEX 专家，但添加了以下内容：

```
CREATE CLUSTERED INDEX [IX_Clustered] ON [dbo].[FCT_RawEvents] 
(
    [EquipID] ASC,
    [EventTimeStamp] DESC,
    [EventMilliSeconds] DESC,
    [EventID] ASC,
    [EventOn] DESC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO

CREATE NONCLUSTERED INDEX [IX_EquipEventTime] ON [dbo].[FCT_RawEvents] 
(
    [EquipID] ASC,
    [EventID] ASC,
    [EventTimeStamp] DESC,
    [EventMilliSeconds] DESC
)
INCLUDE ( [EventOn]) WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO

CREATE NONCLUSTERED INDEX [IX_Suppressed] ON [dbo].[FCT_RawEvents] 
(
    [Suppressed] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO 
```

似乎排序正在扫描表的大部分，我真的希望它“回顾”直到它找到第一个匹配事件。

通过使用索引或改进 SQL，任何指针都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:12:56.007

跟进评论：

*   尝试用临时表替换表变量：表变量没有统计信息，临时表可以。

*   第二个索引看起来是多余的。

*   尝试替换标量值函数。

*   检查色谱柱的选择性

    ```
    EquipID, EventTimeStamp, EventMilliSeconds, EventID, EventOn 
    ```

并按选择性从高到低的顺序创建索引。选择性是衡量一列中有多少重复值。它的范围从没有重复（高选择性）到所有相同的值（零选择性）。理想情况下，索引应具有最高选择性顺序的列。

例如，您的`EquipId`列的选择性是

```
(SELECT COUNT(DISTINCT EquipId) FROM dbo.FCT_RawEvents) /
    (SELECT COUNT(*) FROM dbo.FCT_RawEvents) 
```

*   确保您的统计数据是最新的。

# c# - 将 C# 与 MonoMac 一起使用时获取 Mac ~/Library/ 路径的最佳方法

> ID：14477538
> 
> 赞同：5
> 
> 时间：2013-01-23T10:33:15.913
> 
> 标签：c#, macos, mono, monomac

我有一个用于 Windows 和 Mac 项目的共享代码库 (dll)。我正在寻找获取 Mac Library 文件夹路径的最佳（受支持）方式，以便我的项目符合 Mac App Store 的要求。

现在我`Environment.SpecialFolder.LocalApplicationData`用来获取路径，但这并没有给我正确的文件夹。

有谁知道我应该用什么来获得`~/Library/` ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T22:34:37.640

我没有找到任何直接映射的东西，所以我最终编写了以下代码：

```
Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Personal), "Library") 
```

# .net - 如何获得方法的摘要？

> ID：14477539
> 
> 赞同：0
> 
> 时间：2013-01-23T10:33:18.230
> 
> 标签：.net

是否有可能以某种方式获取 .NET 摘要数据？

```
 /// <summary>
 /// I need to get it programatically
 /// </summary>
 private void MethodA()
 {
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:38:21.653

使用`EnvDTE`命名空间获取当前代码元素，然后可以访问`Comment`和`DocComment`属性。

您需要添加引用：[如何：添加对自动化命名空间](http://msdn.microsoft.com/en-us/library/yf86a8ts.aspx)的引用是一个很好的起点。

然后您需要访问该`EnvDTE`对象：[How to: Get References to the DTE and DTE2 Objects](http://msdn.microsoft.com/en-us/library/68shb4dw.aspx)。

从那里开始，这取决于您的代码所在的位置。通过`EnvDTE`您必须找到它声明的项目项，浏览到它，然后访问注释属性。

[`ActiveDocument`](http://msdn.microsoft.com/en-us/library/envdte._dte.activedocument.aspx)您可以通过对象上的属性获取当前文档，该属性`DTE`将返回一个[`Document`](http://msdn.microsoft.com/en-us/library/envdte.document.aspx). 如果`Document`是项目的一部分，您可以获取[`ProjectItem`](http://msdn.microsoft.com/en-us/library/envdte.projectitem.aspx)，并通过那里访问[`CodeElements`](http://msdn.microsoft.com/en-us/library/envdte.filecodemodel.codeelements.aspx)集合。

从那里开始，它变得有点复杂。A`CodeElement`没有评论属性。您可以使用[`CodeElement.Kind`](http://msdn.microsoft.com/en-us/library/envdte.codeelement.kind.aspx)来查看您正在查看的特定类型的代码元素：[`CodeClass`](http://msdn.microsoft.com/en-us/library/envdte.CodeClass.aspx)、[`CodeFunction`](http://msdn.microsoft.com/en-us/library/envdte.codefunction.aspx)等...在确定正确的类型并对其进行转换后，您最终可以访问注释文本。为了浏览您的代码元素，请记住它们可以具有[`Children`](http://msdn.microsoft.com/en-us/library/envdte.codeelement.children.aspx)（例如，类中的属性）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T10:52:56.560

您还可以将文档提取到 xml 文件中，然后对该文件使用常规 xml 解析。

更多信息：[C# 获取接口方法注释](https://stackoverflow.com/questions/5859097/c-sharp-getting-interface-method-comments)

# c# - 如何找到 Bool ArrayList 比较其 Bool 值的结果？

> ID：14477542
> 
> 赞同：1
> 
> 时间：2013-01-23T10:33:27.230
> 
> 标签：c#, arraylist, boolean, boolean-logic

如果我有一个`ArrayList` 包含`boolean`值，找出这个 Bool 值序列结果的最佳方法是什么？

我正在尝试这样的事情

```
bool result = false;    
bool flag = false;
ArrayList flags = new ArrayList();

if (something > 5)
{
 flag = true;
}
flags.Add(flag);    

foreach (bool val in flags)
{
      result &= val;
} 
```

但是，如果我将结果变量声明为 true 而不是 false，那么这会改变结果。我有点困惑。

任何意见，将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T10:36:03.893

如果您使用 &= 则“结果”的初始值非常重要。如果结果开始为假，无论您执行多少次 &=，结果都将保持为假。如果结果以 true 开头，则 &= 将按照您的预期运行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T10:54:06.167

从`ArrayList`to更改`List<bool>`并尝试使用递归。你不需要额外的 bool 变量。

```
 public bool BoolVal(List<bool> list, int n)
    {
        if (n == 0)//The condition that limites the method for calling itself
            return list[n];
        return list[n] & BoolVal(list, n - 1);
    } 
```

称之为

```
var result = BoolVal(flags, flags.Count -1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T10:40:50.970

首先，您应该使用强类型 ex`List<bool>`而不是`ArrayList`.

然后使用扩展`All`方法检查是否全部 if`true`

```
List<bool> flags = new List<bool>();
...
bool restul = flags.All(flag => flag); 
```

或者：

```
bool restul = !flags.Any(flag => flag); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T10:42:57.593

```
flags.ToArray().Where(item => (bool)item == true).SingleOrDefault() != null 
```

如果您可以使用 LINQ，那么这对我有用，那么我建议您将默认结果设置为 false 并在您找到 true 时退出循环（在将结果设置为 true 之后）：

```
foreach (bool val in flags)
{
      if(val)
      {
          result = true;
          break;
      }

} 
```

ArrayList 中唯一的东西是布尔值吗？

这里的其他建议也很好，但再次使用 LINQ。

# javascript - Android - JavaScript：在缩放或滚动页面之前不会触发 touchstart 事件

> ID：14477550
> 
> 赞同：7
> 
> 时间：2013-01-23T10:33:58.563
> 
> 标签：javascript, android, webview, touch-event, touchstart

在我的 Android 应用程序中，用户可以使用 ViewPager 浏览一些 HTML 页面，并且用户可以触摸一个元素来突出显示。

问题是当尝试使用以下代码使用 javascript 获取触摸事件时，elementFromPoint 在导航到新页面时返回 null，但是在用户缩放页面或滚动页面后，它可以正常工作。

我发现 touchstart 事件的注册发生在缩放或滚动页面之后。所以它在那之后就可以工作了，尽管它是在 $(document).ready() 上注册的

```
 $(document).ready(function(){
            document.addEventListener("touchstart", touchstart, false);     
        });     

        function touchstart(e) {                              
            var x = e.targetTouches[0].clientX; 
            var y = e.targetTouches[0].clientY;                             
             el = document.elementFromPoint(x, y);  
            } 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T07:43:03.767

调用 javascript 后在您的 java 代码中编写下一个代码：

```
 myWebview.scrollTo(1, 0);
    myWebview.scrollTo(0, 0); 
```

或使用放大然后缩小

```
 myWebview.zoomIn();
    myWebview.zoomOut(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T19:48:31.140

下面使用 Mohamed Abdel Latif 的解决方案（显然这是另一个蹩脚的 WebView 错误）在 Android 4.1.2 上为我修复了它。注意：我在 Android 4.4.2 上对此进行了测试，不需要这个 hack-to-fix-a-bug。

```
@Override
public void onCreate(Bundle savedInstanceState)
{

    final WebView myWebView = (WebView) findViewById(R.id.mywebview);
    myWebView.setHorizontalScrollBarEnabled(false);
    myWebView.getSettings().setJavaScriptEnabled(true);
    myWebView.loadDataWithBaseURL("file:///android_asset/", YOUR_HTML_GOES_HERE, "text/html", "utf-8", null);

    myWebView.setWebViewClient(new WebViewClient()
    {
        // overcome the ontouchstart registration bug !
        @Override
        public void onPageFinished(WebView view, String url)
        {
            super.onPageFinished(view, url);
            final WebView myWebView = (WebView) findViewById(R.id.mywebview);
            myWebview.scrollTo(1, 0);
            myWebview.scrollTo(0, 0);
        }
    });
} 
```

# c# - 为什么此 Win Form 无法正常显示？

> ID：14477554
> 
> 赞同：-1
> 
> 时间：2013-01-23T10:34:10.140
> 
> 标签：c#, .net, winforms, .net-3.5

我创建了一个用 .Net 3.5 C# 编写的 SSIS 自定义控制流组件，它通过 MSI 文件安装。安装在开发 Windows XP 机器、开发 Windows 7 机器和开发 Windows 8 机器上运行良好。
我不得不对与界面无关的应用程序进行一些更新，并且在更改之前我使表单显示得非常好。我刚刚将安装程序交给了使用 Windows 7 机器的用户，当我打开其中一个表单时，它没有正确加载。它没有填充任何组合框，并且正在显示应该隐藏的控件。我不知道为什么。我已经在用户机器上运行了 Windows 更新，它完全是最新的。我已经卸载并重新安装，多次重新启动机器。我做了一些谷歌搜索，无法弄清楚为什么它不起作用。以前有没有人遇到过这种情况，如果有，你是怎么解决的。

![在此处输入图像描述](../Images/1d519125794f216c133c3e4981e2b16a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:25:42.087

我认为您有与.NET 无关的依赖问题。其他客户端是否具有相同的数据库客户端软件，您是否使用固定路径进行用户设置，而不是使用每个版本的 Windows 移动的特殊文件夹？

# javascript - 如何在不使用 DOM/拖放事件和使用 javascript 的鼠标事件的情况下读取本地机器文件？

> ID：14477555
> 
> 赞同：-2
> 
> 时间：2013-01-23T10:34:13.833
> 
> 标签：javascript

我坚持使用 java 脚本读取我的本地机器文件，而不使用任何事件处理和 DOM 文件元素。我的场景是“

我有一个 xml 文件，其中有一列 say(fileLocation)，其值类似于“D:\test\test.doc”。我正在使用服务器上的 php 脚本上传这个文件。

现在，我读取了该列值（本地计算机的文件位置）并尝试从该位置读取数据，但由于我的应用程序正在服务器上工作并且文件位于我的本地计算机上而卡住了。

所以请建议我如何从该位置读取文件的数据。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:44:36.653

您需要`<input type="file" />`使用`<form enctype=" multipart/form-data" method="post" />`. 然后，您可以使用`$_FILES`数组在 PHP 中访问该文件。

据我所知，在客户端使用 JavaScript 访问文件是不可能的，因为这会打开一个全新的安全问题世界。

# javascript - 如何在jquery中获取可放置div的索引位置

> ID：14477560
> 
> 赞同：0
> 
> 时间：2013-01-23T10:34:26.023
> 
> 标签：javascript, jquery, html, css

我正在使用拖放功能。我想要一个 div 的索引位置，它在每次下降后下降 1 ,2,3 ......

我使用了 .position() 和 .offset() 方法，但它给了我以 px 为单位的顶部和左侧索引位置，我的代码是

```
$(".workArea").droppable({
drop: function( event, ui ) {
var y = ui.position.left();
var z = ui.position.top(); 
```

请帮助在每次下降后获得像 1,2 ,3 这样的索引位置

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T10:36:57.167

尝试这个：

```
 drop: function(event, ui) {

        alert($(event.target).index());

    } 
```

工作演示：http: [//jsfiddle.net/Fep8h/](http://jsfiddle.net/Fep8h/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:39:45.490

检查这个:)

```
 var postionA = value1;
 var postionB = value2;
$("#div").droppable({
   drop: function( event, resp ) {
      console.log(resp.positionA,resp.positionB,resp.target);
   }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-01T10:06:19.650

下面的代码给出了每次 5 的索引值。

```
drop: function(event, ui) {
   alert($(event.target).index());
} 
```

我的代码如下

```
$("#sortable").droppable({
       helper: "clone",
       drop: function (event, ui) {
          alert($(ui.placeholder).index());
       }
 }); 
```

# c++ - 对于大值，Floor，int 转换无法正常工作

> ID：14477562
> 
> 赞同：0
> 
> 时间：2013-01-23T10:34:28.117
> 
> 标签：c++, int, floor

我有一个问题。在运行模拟之前，我在“invKin”类中获得了这个函数来设置一些参数：

```
void IK_mm4::set_timesetting(double *T_horiz_, double *delta_t_)
{
  T_horiz  = T_horiz_;
  delta_t  = delta_t_;

  k_end = (int)floor((*T_horiz)/(*delta_t));

  cout << "k_end = " << k_end <<endl;
} 
```

它在我的主文件中被调用

```
...
double delta_t = 5e-3;
double *T_desired = new double(5.0);
...
invKin.set_timesetting(T_desired,&delta_t);
... 
```

问题是现在。在我大学的电脑上，一切都很好，k_end 的值应该是“1000”。在我的家用电脑上，系统以某种方式返回值“999”。如果我将 *T_desired 的值更改为“0.05”，则 cout 会在两台 PC 上给出正确的“10”值。

我已经检查过使用变量

```
double k_end_test = (*T_horiz)/(*delta_t); 
```

这给出了“1000”的正确解决方案。错误必须在 floor 函数或 int 转换中。如果我做

```
int k_end_test2 = (int)(k_end_test); 
```

或者

```
double k_end_test2 = floor(k_end_test); 
```

结果总是'999'。

有人知道这可能来自哪里吗？

我很感谢任何提示！谢谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T10:42:40.300

这是有限精度表示的本质。

例如，考虑六个十进制数字的精度。当然，这不是`double`用途，但概念完全相同。`1/3`具有`.333333`六位小数精度。`30 * (1/3)`也是如此`9.99999`。如果向下舍入为整数，则得到`9`，而不是`10`。这是您看到的问题。

如果您不想要这种行为，请不要使用浮点数。

将一个小的“delta”添加到您传递给的值可能就足够了`floor`。

# java - JMeter 代理记录的问题

> ID：14477563
> 
> 赞同：0
> 
> 时间：2013-01-23T10:34:30.840
> 
> 标签：java, jmeter

我在使用 JMeter 记录代理问题时遇到了一些问题。

我是一名 Java 开发人员。我正在使用 JMeter 对应用程序执行负载测试。

我用 Struts 在 JSP 中开发了一个应用程序，其中包含两个页面。

第一个页面包含登录页面，其中包含带有提交按钮的用户名和密码等字段。

在 IE8.0 中输入 URL 即 login.jsp 时，jmeter 正确记录了此操作。输入用户名和密码并单击提交按钮后，它进入第二页，但 JMeter 代理服务器不记录此事件。但是，当我在第二页单击注销链接时，单击注销链接的事件正在正确记录。

我面临的主要问题是当我对按钮执行任何操作时，JMeter 没有执行记录，但是当我单击任何链接时，JMeter 已正确记录了该操作。请帮助我。

我需要为提交按钮录制添加任何内容吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:46:12.103

您需要在浏览器设置中设置代理。

如果可行，您可以尝试一种好方法，设置代理设置，关闭 JMeter 代理，然后尝试加载您的页面。这不应该工作。然后打开 JMeter 代理，并重新加载您的页面。它应该加载并且您的记录控制器应该捕获请求。

这在 Firefox 中对我来说效果最好，即使我设置了它，IE 也没有使用 JMeter 代理。我没有进一步研究，因为使用 Firefox 它运行良好。

以下是有关运行代理的分步说明：[链接](http://jmeter.apache.org/usermanual/jmeter_proxy_step_by_step.pdf)

# c# - 在 WCF 中的请求之间选择命名空间正在更改的 XML 节点

> ID：14477564
> 
> 赞同：1
> 
> 时间：2013-01-23T10:34:33.430
> 
> 标签：c#, xml, wcf, namespaces, request

我必须从 WCF 请求中选择特定节点 `OperationContext.Current.RequestContext.RequestMessage.ToString()`

问题是名称空间正在更改请求之间的前缀：

所以一旦它是：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" xmlns:u="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
  <s:Body>
  </s:Body>
</s:Envelope> 
```

其他时间是：

```
<soapenv:Envelope xmlns:mes="MessageContracts" xmlns:req="RequestMessages" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Body>
  </soapenv:Body>
</soapenv:Envelope> 
```

如何确保始终正确获取 Body 节点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:37:48.947

如果您使用 XPATH 选择节点，您可以在选择节点时忽略命名空间（及其缩写前缀），方法是在`local-name()`. 以下 SO 文章中有一个示例：-

*   [如何使用 XPath 忽略命名空间](https://stackoverflow.com/questions/4440451/how-to-ignore-namespaces-with-xpath)

对于上面的 XML 文档，以下 Xpath 查询将为两个文档返回计数 1。

```
count(/*[local-name() = 'Envelope']/*[local-name() = 'Body']) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:38:32.690

只要节点一致地使用相同的命名空间（它们在您的示例中），前缀是什么并不重要。您只需要确保在进行选择时为命名空间正确创建前缀->命名空间映射：

以下代码应该适用于您的两个示例 xml：

```
// assuming XmlDocument doc has already been loaded with the XML response
XmlNamespaceManager nsm = new XmlNamespaceManager(doc.NameTable);
nsm.AddNamespace("soap", "http://schemas.xmlsoap.org/soap/envelope/");
XmlNode body = doc.SelectSingleNode("/soap:Envelope/soap:Body", nsm); 
```

[工作理念示例](http://ideone.com/rTXcO6)

# wiki - 是否可以在最新的 Confluence 中启用标记编辑器？

> ID：14477565
> 
> 赞同：14
> 
> 时间：2013-01-23T10:34:38.977
> 
> 标签：wiki, markup, confluence

从 Confluence 4.0 开始，'wiki' 标记语言被删除以支持富编辑。但在我公司，开发人员不喜欢富编辑，而是希望我们熟悉的标记纯文本编辑器。是否可以在 Confluence 中重新启用 wiki 标记编辑？也许存在一些插件或修改？标记和内部 omg-woot-xml 表示之间不是 100% 的转换是可以的 - 大多数文档具有简单的布局，对于困难的情况，可以使用丰富的编辑。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-23T14:27:38.887

如果您想使用 wiki 标记，您只需在编辑页面时按`Ctrl`+ `Shift`+ `D`，它将打开一个 wiki 标记窗口。

我不知道有任何附加组件允许除此之外的任何内容，但将来可能会有一些。

# algorithm - AS3 为 6 ^ 20 个结果创建算法

> ID：14477568
> 
> 赞同：2
> 
> 时间：2013-01-23T10:34:58.587
> 
> 标签：algorithm, actionscript-3, data-structures, tree

我已经搜索了很多东西来为我指明正确的方向，但我似乎无法弄清楚/找到适合我情况的东西。

在我的游戏中，你总共玩了 20 年。每年您可以从 6 个案例中进行选择。每个案例改变不同的值，并且每年都会受到上一年的值的影响。由于一些随机因素，几乎总是有不同的最终结果/最佳结果。

在最佳结果的情况下。我曾经计算个人每年最高的情况。但由于每一年都受到上一年数值的影响，这20年的案例是否是最佳结果还远不能确定。例如：

![在此处输入图像描述](../Images/5628b5c236b05b82add5dc2258e6fc00.png)

**编辑：在这个例子中，我用 3 个案例而不是 6 个案例来绘制情况。**

这将是 20 年内 6 种情景的情况。所以会有 365.615.844.0062.976 不同的最终结果。我想得到最高的结果。

谁能给我一些关于如何处理这个可笑的大数据结构的建议/想法。我希望我对这个问题给出了明确的解释。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:59:55.670

简而言之，您将无法为这个问题找到有保证的最佳解决方案。例如，一个很好的中间立场可能是 5 年深度（7776 种变体）并选择其中的 5 个最佳得分解决方案。然后从每个部分解决方案中重复该过程。这应该会产生大约 124416 次计算，这不应该花费太长时间来测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:40:07.253

我不确定解决问题本身的好方法；但是，您可能想查看 Project Euler 问题 18 和 67 的解决方案。这是一个与此类似的寻路问题，它可以为您提供一些见解。

至于数据存储，你考虑过使用 B-Tree 吗？文件 I/O 可能有点昂贵，但听起来好像您不必在游戏中进行任何密集的实时计算。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-23T10:50:04.543

该解决方案与标准游戏/人工智能编程 101 的 min max 算法非常相似。请查看 min max 的维基百科页面，以便在正确的方向上获得良好的开端 [http://en.wikipedia.org/wiki /最小最大](http://en.wikipedia.org/wiki/Minimax)

# java - 受限玻尔兹曼机和深度学习的 Java 代码

> ID：14477571
> 
> 赞同：7
> 
> 时间：2013-01-23T10:35:01.953
> 
> 标签：java, machine-learning, neural-network, rbm

从最近几天开始，我正在阅读和研究受限玻尔兹曼机器和深度学习。现在为了测试深度学习的能力，我正在寻找 Java 代码。我在谷歌上搜索了很长时间，但没有得到任何令人满意的实现。

例如，我发现以下受限玻尔兹曼机的 java 库：

[http://jarbm.sourceforge.net/](http://jarbm.sourceforge.net/)

但是我既不能得到它的源代码，也不能得到任何关于它使用的详细帮助。他们有这段代码的 java 文档，但没有解释它的用法。没有给出示例。

我在 Python 中找到了一个简单的实现：

[https://github.com/echen/restricted-boltzmann-machines](https://github.com/echen/restricted-boltzmann-machines)

谁能告诉我在哪里可以在 java 中为玻尔兹曼机器和深度学习获得类似的实现？（如果我得到源代码最好。否则至少带有示例使用代码的java库或关于它的使用的详细帮助。）

谢谢，尼丁

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T10:42:13.603

您是否尝试过使用 cvs 获取 jarbm 项目的源代码，如本页所述：http: [//sourceforge.net/p/jarbm/code/](http://sourceforge.net/p/jarbm/code/?source=navbar) ?source=navbar ？

# java - 检查长类型是否包含字符

> ID：14477576
> 
> 赞同：-1
> 
> 时间：2013-01-23T10:35:21.680
> 
> 标签：java

我有一个文本字段，它需要很长的值，如果它需要字符，那么它应该显示一条错误消息。有没有像 isNAN() 这样的方法来检查该变量是否包含任何字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:36:59.870

如果字符串不包含可解析的 long，则静态方法[`Long.parseLong()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html#parseLong%28java.lang.String%29)将抛出 a 。`NumberFormatException`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T10:37:55.497

您通常可以通过尝试`Long.parseLong(textfield.getText())`用一个`try` `catch`可以捕获`NumberFormatException`.

如果捕获到异常，则意味着用户没有输入有效值`long`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T10:38:04.153

长 x = Long.parseLong("12345L");

您应该尝试捕获上述语句，因为它可以抛出 NumberFormatException

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T10:40:07.943

你可以有一个像这样的小实用方法：

```
private boolean isLong(String str){
    try{
      Long.parseLong(str);
    }
    catch(NumberFormatException nfe){
      return false;
    }
  return true;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T10:43:09.280

作为其他解决方案的替代方案，您可以使用正则表达式

```
 boolean containsCharacters = !txt.matches("-?\\d+"); 
```

# c# - 将动态类型参数引用的 json 转换为 Idictionary

> ID：14477580
> 
> 赞同：1
> 
> 时间：2013-01-23T10:35:36.963
> 
> 标签：c#, generics, dynamic, idictionary

我遇到了以下不起作用的代码

```
public void Execute(dynamic options){
   var dictionary = options as IDictionary<string,object>();//i saw the dictionary is always null but the developer is says it suppose to work!
} 
```

选项包含 json 的位置

```
[{Id :1212, Page : 12, SortColumn : "Name", SortBy : "ASC"}] 
```

我的问题是这是否可行？我的意思是，是否可以将动态类型引用的 json 转换为 IDictionary 而无需任何黑魔法？

# c++ - 基于空终止字符串的for循环范围

> ID：14477581
> 
> 赞同：15
> 
> 时间：2013-01-23T10:35:42.480
> 
> 标签：c++, for-loop, c++11, null-terminated

我有点假设基于范围的 for 循环将支持 C 风格的字符串

```
void print_C_str(const char* str)
{
    for(char c : str)
    {
        cout << c;
    }
} 
```

然而事实并非如此，该标准`[stmt.ranged] (6.5.4)`表示基于范围的适用于以下三种可能性之一：

1.  范围是一个数组
2.  范围是具有可调用`begin`和`end`方法的类
3.  在关联的命名空间（加上`std`命名空间）中有可访问的 ADL

当我在全局命名空间中添加`begin`和`end`函数时，`const char*`我仍然会收到错误（来自 VS12 和 GCC 4.7）。

有没有办法让基于范围的 for 循环与 C 风格的字符串一起工作？

我尝试添加重载`namespace std`并且这有效，但据我了解，添加重载是非法的`namespace std`（这是正确的吗？）

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-23T10:47:22.320

如果您为空终止字符串编写一个简单的迭代器，您可以通过在返回特殊范围的指针上调用函数来做到这一点，而不是将指针本身视为范围。

```
template <typename Char>
struct null_terminated_range_iterator {
public:
    // make an end iterator
    null_terminated_range_iterator() : ptr(nullptr) {}
    // make a non-end iterator (well, unless you pass nullptr ;)
    null_terminated_range_iterator(Char* ptr) : ptr(ptr) {}

    // blah blah trivial iterator stuff that delegates to the ptr

    bool operator==(null_terminated_range_iterator const& that) const {
        // iterators are equal if they point to the same location
        return ptr == that.ptr
            // or if they are both end iterators
            || is_end() && that.is_end();
    }

private:
    bool is_end() {
        // end iterators can be created by the default ctor
        return !ptr
            // or by advancing until a null character
            || !*ptr;
    }

    Char* ptr;
}

template <typename Char>
using null_terminated_range = boost::iterator_range<null_terminated_range_iterator<Char>>;
// ... or any other class that aggregates two iterators
// to provide them as begin() and end()

// turn a pointer into a null-terminated range
template <typename Char>
null_terminated_range<Char> null_terminated_string(Char* str) {
    return null_terminated_range<Char>(str, {});
} 
```

用法如下所示：

```
for(char c : null_terminated_string(str))
{
    cout << c;
} 
```

我不认为这会失去任何表现力。其实我觉得这个比较清楚。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T15:10:54.207

一种可能的解决方法是将 null 终止的字符串包装在另一种类型中。最简单的实现如下（它的性能不如[R. Martinho Fernandes](https://stackoverflow.com/a/14477788/3848)的建议，因为它调用`strlen`但它的代码也少得多）。

```
class null_terminated_range {
    const char* p:
public:
    null_terminated_range(const char* p) : p(p) {}
    const char * begin() const { return p; }
    const char * end() const { return p + strlen(p); }
}; 
```

用法：

```
for(char c : null_terminated_range(str) ) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T10:47:21.637

C 字符串不是数组，也不是具有`begin`/`end`成员的类，并且您不会通过 ADL 找到任何内容，因为参数是原语。可以说，这应该是普通的非限定查找，使用 ADL，*它将*在全局命名空间中找到一个函数。但是，鉴于措辞，我认为这是不可能的。

# windows-phone-7 - WP7 文本框到 2 个整数

> ID：14477582
> 
> 赞同：0
> 
> 时间：2013-01-23T10:35:52.693
> 
> 标签：windows-phone-7

正如您在下面的代码中看到的那样，我只想弄清楚如何判断 HouseholdNoTextBox 中是否有超过 2 个整数。

```
private void btnContinue1_Click(object sender, RoutedEventArgs e)
    {
        if (string.IsNullOrEmpty(HouseholdNoTextBox.Text))
        {
            textBlockError1.Visibility = Visibility.Visible;
        }
        if (//HouseholdNoTextBox.Text has > than 2 integers input)
        {
            textBlockError1.Visibility = Visibility.Collapsed; // collapse the first error box if it is visible
            textBlockError2.Visibility = Visibility.Visible; // and make visible the second
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:50:21.403

试试这个

```
private void btnContinue1_Click(object sender, RoutedEventArgs e)
    {
        if (string.IsNullOrEmpty(HouseholdNoTextBox.Text))
        {
            textBlockError1.Visibility = Visibility.Visible;
        }
int val;
        if (HouseholdNoTextBox.Text.Length>2 && int.TryParse(HouseholdNoTextBox.Text, out val) && val > 99)
        {
            textBlockError1.Visibility = Visibility.Collapsed; // collapse the first error box if it is visible
            textBlockError2.Visibility = Visibility.Visible; // and make visible the second
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:35:03.400

这是我的最终工作代码。当他带领我朝着正确的方向前进时，我会 +1 Cyber​​maxs 回答

```
private void btnContinue1_Click(object sender, RoutedEventArgs e)
    {
        if (string.IsNullOrEmpty(HouseholdNoTextBox.Text))
        {
            textBlockError1.Visibility = Visibility.Visible;                
        }
        if (HouseholdNoTextBox.Text.Length >= 3)
        {//checking to see if it has a length greater than 2
            textBlockError1.Visibility = Visibility.Collapsed; // collapse the first error box if it is visible
            textBlockError2.Visibility = Visibility.Visible; // and make visible the second
        }
        if (HouseholdNoTextBox.Text.Length <= 2 && HouseholdNoTextBox.Text.Length > 0)
        {
            textBlockError1.Visibility = Visibility.Collapsed;
            textBlockError2.Visibility = Visibility.Collapsed;
            NavigationService.Navigate(new Uri("/MainPage.xaml", UriKind.Relative));
        }           
    } 
```

# javascript - Javascript，构建器模式和回调

> ID：14477586
> 
> 赞同：4
> 
> 时间：2013-01-23T10:36:07.807
> 
> 标签：javascript, node.js

我正在尝试使用 Node.js 为我处理一些可编写脚本的 URL 重定向。它工作得很好，但脚本需要采用尽可能简单的格式，因为它将由其他人管理。

我想做的是使用构建器模式，这样我就可以拥有以下内容：

```
redirectWhen.isMobileDevice().urlMatches("http://www.somewhere.com").thenGoTo("http://mobile.somewhere.com");
redirectWhen.urlMatches("http://subdomain.somewhere.com").thenGoTo("http://www.somewhere.com/somefolder/"); 
```

然后我会根据结果重定向（基本上匹配链中所有项目的最后一个获胜）。如果你想象所有的功能（`isMobileDevice()`&`urlMatches(...)`做一些简单的字符串检查等等，那么一切都很好。

但我需要这个`isMobileDevice()`函数来执行一个 HTTP 请求。这意味着有一个回调函数在响应完成时被调用。是否有可能做到这一点并且仍然保持构建器模式完好无损？我想我可以做类似的事情：

```
redirectWhen.isMobileDevice(function() {
  urlMatches("...").thenGoTo("...");
}); 
```

但这比我想要的增加了脚本的复杂性。管理这些脚本的人知道基本的 JavaScript，但如果他们必须开始嵌套回调，我想他们很快就会感到困惑。

我猜我正在尝试实现一些在这里不可能的事情，但我自己对 JS 的了解还不够，无法证实这一点！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:57:34.643

这是完全可能的；您的构建器在每一步都返回一个中间对象，在最后一步中，您最终将各个部分放在一起并调用最终函数。

```
function redirectWhen() {
    var building = {};  // saved state goes here

    // actually implement redirection
    function build() {
        // expects building = { source: "...", target: "...", mobile: optionalBoolean}            
        if (building.mobile) {
           checkMobile();
        } else {
           finishBuild();
        }
    }

    function checkMobile() {
        // check if actually mobile by making an HTTP request
        // in the success callback, calls finishBuild - fails otherwise
        // ..
    }

    function finishBuild() {
        // accessible only if mobile not requested, or if requested and mobile check passed
        // ..
    }

    // prepare the second step
    var urlMatches = function(url) {
        building.source = url;
        return { thenGoTo: function(target) { building.target = target; build(); } }
    }

    // return the next steps
    return { 
       isMobileDevice: function() { builder.mobile = true; return urlMatches; },
       urlMatches: urlMatches
    }
} 
```

为了支持您的移动测试，您可以将构建分为两部分（检查和回调）；但这对用户来说是不透明的，他们甚至不知道任何地方都有构建功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:09:06.250

您不必为了使其异步工作而放弃优雅的构建模式。您可以创建一个节点链表，每个节点在成功时调用下一个节点。

我使用一个和多个实现设置了一个[小提琴。](http://jsfiddle.net/MattiasBuelens/6JPBR/)一些注意事项：`Chain``ChainNode`

*   每个`ChainNode`都有一个`execute()`方法和一个在完成自己的处理时`nextNode`需要调用的方法。`next()`例如，URL 模式匹配器仅在 URL 匹配模式时才调用下一个节点，否则它只会返回（中断执行链）。
*   `IsMobileNode`可以通过从`next()`回调调用到一些异步调用（例如 AJAX）来实现。在小提琴中，一个简单`setTimeout`的演示了这个概念。
*   `Chain`保留一个`head`指示开始执行的位置和附加`tail`新节点的位置。该`chain(nextNode)`方法确保链条完好无损。
*   和方法只是创建一个节点`urlMatches(urlPattern)`并将`isMobileDevice()`其附加到链中。
*   该`thenGoTo()`方法链接最终节点以启动重定向。然后，它执行从`head`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T14:56:12.507

Dan Lee 对我的问题的评论也帮助我找到了 Q 库：[https](https://github.com/kriskowal/q) ://github.com/kriskowal/q 。这肯定会对我想要的有所帮助，尽管它不像其他答案那么简单。

# group-by - Sparql：如何按多列分组

> ID：14477587
> 
> 赞同：14
> 
> 时间：2013-01-23T10:36:13.730
> 
> 标签：group-by, sparql

在 SPARQL 中，我们可以通过 gollowing 语法按列对行进行分组：

```
GROUP BY ?colName 
```

我们可以按超过 1 列分组，例如：

```
GROUP BY (?colName1 + ?colName2 + ?colName3) 
```

假设查询如下：

```
Select ?a ?b ?c (MIN(?y) AS ?d)
Where {
....
}
GROUP BY (?a + ?b + ?c) 
```

但是这个查询不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T14:19:21.500

您可以`GROUP BY`通过在它们之间用空格列出多个变量（而不是列）：

```
GROUP BY ?a ?b ?c 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-23T15:08:18.697

In addition to Ben Companjen's answer of

```
GROUP BY ?a ?b ?c 
```

you need to fix the SELECT line as you can't pass out the indeterminate non-group keys without explicitly saying so e.g.

```
SELECT (sample(?a) as ?A) (sample(?b) as ?B) (sample(?c) as ?C) (min(?y) as ?d) 
```

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2013-01-23T11:17:56.457

你有没有尝试过类似的东西

SELECT ?a+b+?c, (MIN(?y) AS ?d) Where { .... } GROUP BY (?a+?b+?c)

这在 SQL Server 中工作得很好

# android - 如何从我的应用程序向当前打开的活动发送广播？

> ID：14477590
> 
> 赞同：1
> 
> 时间：2013-01-23T10:36:18.633
> 
> 标签：android, broadcastreceiver

我尝试了很多不同的方法，不幸的是我仍然对我传递到我的广播中的意图的性质感到困惑，所以希望得到一些指导......

我有一个需要发送广播的应用程序，这些广播的预期接收者是我的应用程序当前正在运行的任何 Activity。

所以......我的广播目前看起来像这样（我仍然不清楚类定义的意义在这里......我是否打算特别针对某些东西？）但在活动中没有听到它。

我的应用程序当前正在尝试发送这样的广播：

```
Intent intent = new Intent(
getPackageName() + ".FOO");//FOO is one of the 7 or so possible Activities that are in the overall app... I don't *want to name it perse, I just don't know what to replace it with 
intent.putExtra("com.mything.somethingSpecial", "TIME TO PARTY");
sendBroadcast(intent); 
```

然后在我的各种活动中，我有一个像这样的本地广播接收器：

```
private BroadcastReceiver receiver = new BroadcastReceiver() {
   @Override
   public void onReceive(Context context, Intent intent) {
        //do stuff
   };
} 
```

和 onResume ， onPause 的东西......

```
@Override
public void onPause{
  this.unregisterReceiver(this.receiver);
}

@Override
public void onResume(){
   super.onResume();
   IntentFilter filter = new IntentFilter();
   filter.addAction("com.mything.somethingSpecial");
   this.registerReceiver(this.receiver, filter);

 } 
```

所以，目前，正在发送广播（我想......我也不知道如何验证，但没有引发异常，所以，我猜它会出去），但是活动没有进入该代码块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:46:07.003

啊!

我想通了...为后代回答...

将广播更改为

```
 Intent intent = new Intent();
 intent.setAction("com.mything.somethingSpecial");
 sendBroadcast(intent); 
```

和宾果游戏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:50:01.463

像这样做

```
 Intent intent = new Intent("com.mything.somethingSpecial.Broadcast"); 
 intent.putExtra("com.mything.somethingSpecial", "TIME TO PARTY");
 sendBroadcast(intent); 
```

进而

```
@Override
public void onPause{
  this.unregisterReceiver(this.receiver);
}

@Override
public void onResume(){
super.onResume();
IntentFilter filter = new IntentFilter();
filter.addAction("com.mything.somethingSpecial.Broadcast");
this.registerReceiver(this.receiver, filter); 
} 
```

# teamcity - 如果退出代码不为零，如何让 teamcity 命令行构建步骤通过？

> ID：14477592
> 
> 赞同：12
> 
> 时间：2013-01-23T10:36:19.853
> 
> 标签：teamcity

我有一个涉及 robocopy 的命令行“自定义脚本”构建步骤。不幸的是，当 robocopy 成功时，它返回退出代码 1 而不是更常见的退出代码 0。当它这样做时，它会导致我的 teamcity 构建配置失败。

如果退出代码 != 1 仅用于此构建步骤，我如何告诉 teamcity 构建失败？这可以做到吗？以某种方式编辑 project-config.xml 怎么样？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-24T04:34:27.337

有两种方法：

1.  在该构建配置中，转到构建失败条件步骤。查找标题**Fail build if:**。第一个复选框是“构建过程退出代码不为零”。确保没有检查吸盘。

2.  运行 robocopy 时，检查调用 robocopy 的结果。如果 robocopy 有效，您可以`exit 0`从脚本内部显式地执行，或者执行其他操作。如果您需要在其他条件下使构建失败（例如，如果源文件夹不存在，则*首先退出 1，**然后*运行 ​​robocopy，然后在 robocopy 成功时发送消息），这是必要的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-02-14T17:44:32.523

如果 Team City 自定义脚本步骤中的最后一个命令失败，即退出代码非零，则该步骤将失败。因此，您可以在 RoboCopy 命令之后添加一个始终成功的额外命令。

例如：

```
robocopy ...
echo "robocopy done. this will make the build step succeed always" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-26T18:31:44.720

您可以编辑脚本以忽略假阴性，但保留真实错误，如[robocopy 文档](https://ss64.com/nt/robocopy-exit.html)
中所述，错误 级别 1、2 和 3 是成功的。
因此，您可以在 teamcity 中的 robocopy 行之后添加：

```
if %ERRORLEVEL% EQU 3 echo OKCOPY + XTRA & goto end
if %ERRORLEVEL% EQU 2 echo XTRA & goto end
if %ERRORLEVEL% EQU 1 echo OKCOPY & goto end
if %ERRORLEVEL% EQU 0 echo No Change & goto end
:end 
```

或者，更通用：

```
IF %%ERRORLEVEL%% LEQ 3 set errorlevel=0 
if %%errorlevel%% neq 0 exit /b %%errorlevel%% 
```

# jquery - 使用 jQuery 循环遍历 MVC3 WebGrid 中的行

> ID：14477598
> 
> 赞同：1
> 
> 时间：2013-01-23T10:36:57.273
> 
> 标签：jquery, asp.net, asp.net-mvc-3

我需要更新我的 WebGrid 中的所有记录。

有人可以建议我如何单独访问每一行，以便我将遍历所有行并同时更新它们吗？

示例 HTML 代码：

```
<table class="gridTable" id="WebGrid1">
    <thead>
        <tr class="gridHead">
            <th scope="col">
                <a href="/?sort=Employee+Id&amp;sortdir=ASC">Employee Id</a>
            </th>
            <th scope="col">
                <a href="/?sort=Employee+Name&amp;sortdir=ASC">Employee Name</a>
            </th>
            <th scope="col">
                <a href="/?sort=Designation&amp;sortdir=ASC">Designation</a>
            </th>
            <th scope="col">
                <a href="/?sort=Action&amp;sortdir=ASC">Action</a>
            </th>
        </tr>
    </thead>
    <tfoot>
        <tr class="gridFooter">
            <td colspan="4">
                1 <a href="/?page=2">2</a> <a href="/?page=3">3</a> <a href="/?page=2">&gt;</a>
                <a href="/?page=3">&gt;&gt;</a>
            </td>
        </tr>
    </tfoot>
    <tbody>
        <tr class="gridRow">
            <td>
                <span><span id="spanEmpId_1">1</span>
                    <input id="EmpId_1" name="EmpId_1" style="display: none" type="text" value="1">
                </span>
            </td>
            <td>
                <span><span id="spanEmpName_1">john </span>
                    <input id="EmpName_1" name="EmpName_1" style="display: none" type="text" value="john                                              ">
                </span>
            </td>
            <td>
                <span><span id="spanEmpDesg_1">CEO </span>
                    <input id="EmpDesg_1" name="EmpDesg_1" style="display: none" type="text" value="CEO                                               ">
                </span>
            </td>
            <td>
                <a href="#" id="Edit_1" class="edit">Edit</a> <a href="#" id="Update_1" style="display: none"
                    class="update">Update</a> <a href="#" id="Cancel_1" style="display: none" class="cancel">
                        Cancel</a> <a href="#" id="Save_1" style="display: none" class="save">Update</a>
                <a href="#" id="iCancel_1" style="display: none" class="icancel">Cancel</a> <a href="#"
                    id="Delete_1" class="delete">Delete</a>
            </td>
        </tr>
        <tr class="gridAltRow">
            <td>
                <span><span id="spanEmpId_2">2</span>
                    <input id="EmpId_2" name="EmpId_2" style="display: none" type="text" value="2">
                </span>
            </td>
            <td>
                <span><span id="spanEmpName_2">Marks </span>
                    <input id="EmpName_2" name="EmpName_2" style="display: none" type="text" value="Marks                                             ">
                </span>
            </td>
            <td>
                <span><span id="spanEmpDesg_2">TL </span>
                    <input id="EmpDesg_2" name="EmpDesg_2" style="display: none" type="text" value="TL                                                ">
                </span>
            </td>
            <td>
                <a href="#" id="Edit_2" class="edit">Edit</a> <a href="#" id="Update_2" style="display: none"
                    class="update">Update</a> <a href="#" id="Cancel_2" style="display: none" class="cancel">
                        Cancel</a> <a href="#" id="Save_2" style="display: none" class="save">Update</a>
                <a href="#" id="iCancel_2" style="display: none" class="icancel">Cancel</a> <a href="#"
                    id="Delete_2" class="delete">Delete</a>
            </td>
        </tr>
        <tr class="gridRow">
            <td>
                <span><span id="spanEmpId_3">3</span>
                    <input id="EmpId_3" name="EmpId_3" style="display: none" type="text" value="3">
                </span>
            </td>
            <td>
                <span><span id="spanEmpName_3">Steve </span>
                    <input id="EmpName_3" name="EmpName_3" style="display: none" type="text" value="Steve                                             ">
                </span>
            </td>
            <td>
                <span><span id="spanEmpDesg_3">PM </span>
                    <input id="EmpDesg_3" name="EmpDesg_3" style="display: none" type="text" value="PM                                                ">
                </span>
            </td>
            <td>
                <a href="#" id="Edit_3" class="edit">Edit</a> <a href="#" id="Update_3" style="display: none"
                    class="update">Update</a> <a href="#" id="Cancel_3" style="display: none" class="cancel">
                        Cancel</a> <a href="#" id="Save_3" style="display: none" class="save">Update</a>
                <a href="#" id="iCancel_3" style="display: none" class="icancel">Cancel</a> <a href="#"
                    id="Delete_3" class="delete">Delete</a>
            </td>
        </tr>
        <tr class="gridAltRow">
            <td>
                <span><span id="spanEmpId_4">4</span>
                    <input id="EmpId_4" name="EmpId_4" style="display: none" type="text" value="4">
                </span>
            </td>
            <td>
                <span><span id="spanEmpName_4">winslet </span>
                    <input id="EmpName_4" name="EmpName_4" style="display: none" type="text" value="winslet                                           ">
                </span>
            </td>
            <td>
                <span><span id="spanEmpDesg_4">DM </span>
                    <input id="EmpDesg_4" name="EmpDesg_4" style="display: none" type="text" value="DM                                                ">
                </span>
            </td>
            <td>
                <a href="#" id="Edit_4" class="edit">Edit</a> <a href="#" id="Update_4" style="display: none"
                    class="update">Update</a> <a href="#" id="Cancel_4" style="display: none" class="cancel">
                        Cancel</a> <a href="#" id="Save_4" style="display: none" class="save">Update</a>
                <a href="#" id="iCancel_4" style="display: none" class="icancel">Cancel</a> <a href="#"
                    id="Delete_4" class="delete">Delete</a>
            </td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T11:24:57.937

你可以这样循环

```
jQuery(document).ready(function(){

    jQuery("table tbody tr").each(function(){
     var get_id= jQuery(this).find('input[type=text]').attr('id');

    });

}); 
```

# c# - 从日期列中获取按月份过滤的行

> ID：14477600
> 
> 赞同：1
> 
> 时间：2013-01-23T10:37:04.773
> 
> 标签：c#, linq, date

我有一个数据表，其中记录有日期字段列，其值如下

```
11/1/2012
12/21/2012
12/22/2012
1/3/2013
1/5/2013
1/6/2013
1/7/2013
etc. 
```

我想过滤记录并仅获取当前月份记录，即仅获取日期等于当前月份的那些行（将由 DateTime.now 找到）。我们如何使用 Linq 和 c# 来做到这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T10:40:18.643

如果列的类型已经是`DateTime`：

```
DateTime now = DateTime.Now;
var thisMonthRows = table.AsEnumerable()
    .Where(r =>  r.Field<DateTime>("ColumnName").Year  == now.Year
              && r.Field<DateTime>("ColumnName").Month == now.Month); 
```

如果您想要过滤后的行中的新数据表，请使用`CopyToDataTable`：

```
DataTable table = thisMonthRows.CopyToDataTable(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T10:41:49.580

获取每月的第一天并按该日期过滤：

```
 DateTime today = DateTime.Now.Date;
 DateTime firstDayOfMonth = today.AddDays(1 - today.Day);
 // or new DateTime(today.Year, today.Month, 1);

 var query = from row in dt.AsEnumerable()
             where row.Field<DateTime>("Date") >= firstDayOfMonth
             select row; 
```

当然，如果您没有包含未来日期的记录（例如下个月），这是可行的。如果这样做，那么最好引入新的范围变量以避免两次解析日期：

```
 var query = from row in dt.AsEnumerable()
             let date = row.Field<DateTime>("Date")
             where date.Year == today.Year && 
                   date.Month == today.Month
             select row; 
```

# sql - 按与 getdate 的最小距离排序

> ID：14477602
> 
> 赞同：0
> 
> 时间：2013-01-23T10:37:18.613
> 
> 标签：sql, date, sql-order-by, date-range

我有这张桌子

```
Id_User Id_Subscription Date_Expiration
1       1               2013-01-21
1       2               2013-01-28    
2       1               2013-01-15
2       2               2013-01-30
2       3               2013-01-31 
```

我想通过距离 desc 来订购距 getdate 最小距离的用户（无论 Id_Subscription 是多少）。例子：

```
Position Id_User   Distance in day
1        2         7
2        1         2 
```

我试过这样做

> ```
> SELECT  ROW_NUMBER() OVER(ORDER BY COALESCE(MIN(us.Date_Expiration), 
> CAST('2015-01-29 16:30:23.000' AS DATE)) DESC, us.id_user) AS Row, us.id_user
> FROM User_Subscription us
> GROUP BY a.Id_Anagrafica 
> ```

但这是不正确的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T10:45:26.463

您可以使用`ABS`with `Datediff`，例如：

```
SELECT Row_number() 
         OVER( 
           ORDER BY Abs(Datediff(dd, Getdate(), Date_Expiration)) ASC, 
         us.id_user) AS Row, 
       us.id_user 
FROM   user_subscription us 
```

完成您的问题。我假设您想要每个用户的最大距离（以天为单位）。因此，您可以`PARTION BY`在`OVER`子句中使用，例如（未测试，SQL-Server >= 2005）：

```
WITH cte 
     AS (SELECT Position = Row_number() 
                             OVER( 
                               partition BY id_user 
                               ORDER BY Abs(Datediff(dd, Getdate(), 
                             date_expiration ) 
                             ) 
                             DESC), 
                id_user, 
                [Distance in day] = Abs(Datediff(dd, Getdate(), date_expiration) 
                                    ) 
         FROM   user_subscription) 
SELECT position, 
       id_user, 
       [distance in day] AS [Max Distance in day] 
FROM   cte 
WHERE  position = 1 
```

[**演示**](http://sqlfiddle.com/#!3/66a7f/6/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:47:24.597

试试这个查询。这是[Sql-fiddle 示例](http://sqlfiddle.com/#!3/66a7f/9)

```
select row_number() over(order by numberofdays desc) position, 
           Id_User, numberofdays 
from (
     select Id_User, abs(datediff(day, getdate(), Date_Expiration )) numberofdays,
            rank() over (partition by Id_User order by abs(datediff(day, getdate(),  Date_Expiration )) ) rnk
     from user_subscription
    ) A
where rnk = 1

--Results
POSITION    ID_USER NUMBEROFDAYS
1           2        7
2           1        2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T11:53:52.860

```
select 
       ROW_NUMBER() over (order by min(abs(datediff(d,date_expiration,getdate()))) desc) [rank]
       ,id_user
       ,min(abs(datediff(d,date_expiration,getdate()))) as distance
from User_Subscription
group by id_user` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T11:00:13.580

具有以下表结构

```
create table user1(id_user number,id_sub number,date_exp date); 
```

尝试这个 ：

```
select row_number()   OVER (ORDER BY user1.id_user) position,id_user,MAX(date_exp)-MIN(date_exp) Max_Distance_in_day from user1 group by id_user; 
```

输出：

```
| POSITION | ID_USER | MAX_DISTANCE_IN_DAY |
--------------------------------------------
|        1 |       1 |                   7 |
|        2 |       2 |                  16 | 
```

这是[小提琴链接](http://sqlfiddle.com/#!4/bacac/25/6)

# android - android xml文件错误

> ID：14477603
> 
> 赞同：2
> 
> 时间：2013-01-23T10:37:20.533
> 
> 标签：android, xml, android-manifest

我为计算器应用程序设计了一个基本的 xml 布局。它在图形视图中显示良好，但应用程序没有启动。我评论了整个 java 部分。但`logcat`显示了近 20 个错误的`java.lang.Please`帮助。

这是`xml`文件代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:weightSum="100" android:orientation="vertical"
android:layout_width="fill_parent" android:layout_height="fill_parent">
   <LinearLayout android:layout_weight="25"
    android:orientation="horizontal" android:weightSum="100"
    android:layout_width="fill_parent" android:layout_height="wrap_content">
         <TextView android:layout_weight="100" android:id="@+id/display"
        android:layout_height="fill_parent" android:text="0"></TextView>            
    </LinearLayout>
<LinearLayout android:layout_weight="15"
    android:orientation="horizontal" android:weightSum="100"
    android:layout_width="fill_parent">

    <Button android:layout_weight="25" android:id="@+id/seven"
        android:layout_height="fill_parent" android:text="7"
        android:textSize="35dp" android:background="@android:color/transparent"
        android:textColor="@android:color/white"></Button>
    <Button android:layout_weight="25" android:id="@+id/eight"
        android:layout_height="fill_parent" android:text="8"
        android:textSize="35dp" android:background="@android:color/transparent"
        android:textColor="@android:color/white"></Button>
    <Button android:layout_weight="25" android:id="@+id/nine"
        android:layout_height="fill_parent" android:text="9"
        android:textSize="35dp" android:background="@android:color/transparent"
        android:textColor="@android:color/white"></Button>
    <Button android:layout_weight="25" android:id="@+id/mult"
        android:layout_height="fill_parent" android:text="*"
        android:textSize="35dp" android:background="@android:color/transparent"
        android:textColor="@android:color/white"></Button>

     </LinearLayout>
     <LinearLayout android:layout_weight="15"
    android:orientation="horizontal" android:weightSum="100"
    android:layout_width="fill_parent">

    <Button android:layout_weight="25" android:id="@+id/four"
        android:layout_height="fill_parent" android:text="4"
        android:textSize="35dp" android:background="@android:color/transparent"
        android:textColor="@android:color/white"></Button>
    <Button android:layout_weight="25" android:id="@+id/five"
        android:layout_height="fill_parent" android:text="5"
        android:textSize="35dp" android:background="@android:color/transparent"
        android:textColor="@android:color/white"></Button>
    <Button android:layout_weight="25" android:id="@+id/six"
        android:layout_height="fill_parent" android:text="6"
        android:textSize="35dp" android:background="@android:color/transparent"
        android:textColor="@android:color/white"></Button>
    <Button android:layout_weight="25" android:id="@+id/div"
        android:layout_height="fill_parent" android:text="/"
        android:textSize="35dp" android:background="@android:color/transparent"
        android:textColor="@android:color/white"></Button>

    </LinearLayout>
    <LinearLayout android:layout_weight="15"
    android:orientation="horizontal" android:weightSum="100"
    android:layout_width="fill_parent">

    <Button android:layout_weight="25" android:id="@+id/one"
        android:layout_height="fill_parent" android:text="1"
        android:textSize="35dp" android:background="@android:color/transparent"
        android:textColor="@android:color/white"></Button>
    <Button android:layout_weight="25" android:id="@+id/two"
        android:layout_height="fill_parent" android:text="2"
        android:textSize="35dp" android:background="@android:color/transparent"
        android:textColor="@android:color/white"></Button>
    <Button android:layout_weight="25" android:id="@+id/three"
        android:layout_height="fill_parent" android:text="3"
        android:textSize="35dp" android:background="@android:color/transparent"
        android:textColor="@android:color/white"></Button>
    <Button android:layout_weight="25" android:id="@+id/clear"
        android:layout_height="fill_parent" android:text="C"
        android:textSize="35dp" android:background="@android:color/transparent"
        android:textColor="@android:color/white"></Button>

    </LinearLayout>
    <LinearLayout android:layout_weight="15"
    android:orientation="horizontal" android:weightSum="100"
    android:layout_width="fill_parent">

    <Button android:layout_weight="50" android:id="@+id/zero"
        android:layout_height="fill_parent" android:text="0"
        android:textSize="35dp" android:background="@android:color/transparent"
        android:textColor="@android:color/white"></Button>
    <Button android:layout_weight="25" android:id="@+id/plus"
        android:layout_height="fill_parent" android:text="+"
        android:textSize="35dp" android:background="@android:color/transparent"
        android:textColor="@android:color/white"></Button>
    <Button android:layout_weight="25" android:id="@+id/minus"
        android:layout_height="fill_parent" android:text="-"
        android:textSize="35dp" android:background="@android:color/transparent"
        android:textColor="@android:color/white"></Button>

    </LinearLayout>
    <LinearLayout android:layout_weight="15"
    android:orientation="horizontal" android:weightSum="100"
    android:layout_width="fill_parent">

    <Button android:layout_weight="25" android:id="@+id/allclear"
        android:layout_height="fill_parent" android:text="AC"
        android:textSize="35dp" android:background="@android:color/transparent"
        android:textColor="@android:color/white"></Button>
    <Button android:layout_weight="50" android:id="@+id/eq"
        android:layout_height="fill_parent" android:text="="
        android:textSize="35dp" android:background="@android:color/transparent"
        android:textColor="@android:color/white"></Button>
    <Button android:layout_weight="25" android:id="@+id/perc"
        android:layout_height="fill_parent" android:text="%"
        android:textSize="35dp" android:background="@android:color/transparent"
        android:textColor="@android:color/white"></Button>

    </LinearLayout>

 </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T10:52:31.600

请添加 **android:layout_width="0dp"** **或** **android:layout_width="size in dp"**到每个按钮。像这样

```
`<Button     
         android:layout_height="fill_parent" 
         android:layout_width="0dp"
         android:layout_weight="25" 
         android:id="@+id/seven"
         android:text="7"
         android:textSize="35dp" android:background="@android:color/transparent"
         android:textColor="@android:color/white">
 </Button>` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:50:27.610

请使用具有适当 dp 的布局高度和宽度或其他高度和宽度。

即喜欢

`android:layout_width="50dp"`

`android:layout_height="80dp"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T10:40:55.150

当您使用 layout_weight 和 weightSum 时，您还需要`android:layout_width`在每个按钮中。设置`android:layout_width`为`0dp`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T10:40:55.620

几乎所有元素都错过了[`android:layout_height=""`](https://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html#attr_android%3alayout_height)元素。

您应该阅读 Android 开发人员指南的[布局](https://developer.android.com/guide/topics/ui/declaring-layout.html)部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T10:42:37.740

对于每个 Layout 它必须有两个特性

```
android:layout_width="" 
```

和

```
android:layout_height="" 
```

但在这里你只是添加它的单个属性，即宽度而不是高度添加高度然后检查

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-23T10:44:39.327

您的 Views 和 ViewGroup 缺少 XML 属性`android:layout_height`或`ndroid:layout_width`

# ios - 如何在当前屏幕ios中获取特定区域的UIImage

> ID：14477611
> 
> 赞同：6
> 
> 时间：2013-01-23T10:37:51.310
> 
> 标签：ios, uiimage, screen, area

以下代码获取当前屏幕的 UIImage：

```
 UIGraphicsBeginImageContext(self.view.frame.size);
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    [self.view.layer renderInContext:ctx];
    UIImage *backgroundImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext(); 
```

如果我有一个 CGRect 矩形并且我只想获取该矩形中当前屏幕的 UIImage，我该怎么办？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-23T10:44:31.530

**对于获取矩形（裁剪）图像：**

```
UIImage *croppedImg = nil;
CGRect cropRect = CGRectMake(AS You Need);
croppedImg = [self croppIngimageByImageName:self.imageView.image toRect:cropRect]; 
```

使用以下返回方法`UIImage`（*如您想要的图像大小*）

```
- (UIImage *)croppIngimageByImageName:(UIImage *)imageToCrop toRect:(CGRect)rect
    {
        //CGRect CropRect = CGRectMake(rect.origin.x, rect.origin.y, rect.size.width, rect.size.height+15);

        CGImageRef imageRef = CGImageCreateWithImageInRect([imageToCrop CGImage], rect);
        UIImage *cropped = [UIImage imageWithCGImage:imageRef];
        CGImageRelease(imageRef);

        return cropped;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:54:55.037

传递您要裁剪的图像并根据您的要求更改 image.size.width 和 image.size.height

```
-(UIImage *)cropSquareImage:(UIImage *)image
{
    CGRect cropRect;

    if (image.size.width < image.size.height)
    {
        float x = 0;
        float y = (image.size.height/2) - (image.size.width/2);

        cropRect = CGRectMake(x, y, image.size.width, image.size.width);
    }
    else
    {
        float x = (image.size.width/2) - (image.size.height/2);
        float y = 0;

        cropRect = CGRectMake(x, y, image.size.height, image.size.height);
    }

    CGImageRef imageRef = CGImageCreateWithImageInRect([image CGImage], cropRect);
    return [UIImage imageWithCGImage:imageRef];

} 
```

# selection - UICollectionView shouldSelectItemAtIndexPath=NO 不会避免取消选择旧选择吗？

> ID：14477614
> 
> 赞同：29
> 
> 时间：2013-01-23T10:37:59.437
> 
> 标签：selection, uicollectionview

我在 CollectionView 中有多个项目，但只有少数项目应该是可选的。我正在使用委托方法处理此问题：

```
- (BOOL)collectionView:(UICollectionView *)collectionView shouldSelectItemAtIndexPath:(NSIndexPath *)indexPath 
```

如果选择了一个可选择的项目并且在下一步中选择一个不可选择的项目被 shouldSelectItemAtIndexPath 返回 NO 拒绝，那么我的问题就会出现，无论如何，选定的项目都会被取消选择。

我也尝试过使用

```
- (BOOL)collectionView:(UICollectionView *)collectionView shouldHighlightItemAtIndexPath:(NSIndexPath *)indexPath 
```

但这是同样的问题。

这是 UICollectionView 的正确期望行为吗？如果是，如果选择了不可选择的项目，我如何避免取消选择我最后选择的项目？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-23T12:21:32.130

我必须纠正我的假设：**最后的选择不会被取消选择！**

为了在选择时更改单元格的外观，我重写了 UICollectionViewCell 的 setSelected 访问器。选择不可选择的项目时，最后一个选定单元格的访问器 setSelected 会被多次调用。首先是状态 NO，然后是状态 YES，最后是 NO。最后一个状态 NO 导致我的单元格将其外观设置为未选定单元格的外观。

我不知道这种奇怪行为的原因，也无法解决。

我的**解决方法**是直接在 ViewController 中更改选定单元格的外观。

**将选定的外观设置为：**

```
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath 
```

**删除选定的外观：**

```
- (void)collectionView:(UICollectionView *)collectionView didDeselectItemAtIndexPath:(NSIndexPath *)indexPath 
```

**检查是否选择了当前单元格并按预期更改外观。**

```
 - (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-12-27T00:38:50.257

晚了 6 年，但可能对其他人有帮助。在这种情况下，首先不应该选择某些单元格，可以简单地添加`isUserInteractionEnabled = false`到 custom`UICollectionViewCell`的`awakeFromNib()`功能。这也可以在 xib 文件中完成，但这不太明确，对未来的维护者来说可能并不明显。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-11T20:00:24.303

我刚遇到同样的问题。我尝试了多种解决方案，第一个适用于我的解决方案是重新加载然后重新选择选定的单元格。无论我是重新加载整个集合视图还是只是卡在未选择的外观上的单元格，这都对我有用。

对我不起作用的方法：

*   将单元格的`selected`属性设置为 true，或者甚至将其切换为 false，然后再次设置为 true。
*   通过 选择项目`-selectItemAtIndexPath:animated:scrollPosition:`，甚至通过取消选择它`-deselectItemAtIndexPath:`然后再次选择它。
*   仅重新加载选定的行`-reloadItemsAtIndexPaths:`
*   用 重新加载所有内容`-reloadData`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-09-06T19:55:21.880

我通过设置解决了这个问题`self.collectionView.allowsMultipleSelection = true`。

并在我返回**true**时取消选择每个索引`-collectionView:shouldSelectItemAtIndexPath:`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-10T08:52:40.510

您应该在委托方法 DidSelect 和 DidDeselect 方法中更改单元格外观。如果在 shouldSelect 方法中返回 NO，则不会调用 DidSelect 和 DidDeselect，因此外观将保持不变，与 collectionView 的选中状态一致。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-29T05:31:01.800

我不知道为什么`UICollectionView`会如此凌乱，相比之下`UITableViewController`……我发现了一些事情。

`- setSelected:`被多次调用的原因是因为顺序方法被调用。该顺序与方法的顺序非常相似`UITextFieldDelegate`。

`- collectionView:shouldSelectItemAtIndexPath:`在实际选择单元格之前调用该方法`collectionView`，因为它实际上是在询问“应该选择它”吗？

`- collectionView:didSelectItemAtIndexPath:`实际上是在`collectionView`选择单元格之后调用的。因此，名称“确实选择了”。

取消选择也是如此。

TL;DR -通过调用`collectionView`取消选择委托方法中的单元格，一切都会好起来的。`- collectionView:shouldSelectItemAtIndexPath:``- selectItemAtIndexPath:animated:scrollPosition:`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-16T16:48:32.430

你有没有尝试过：

```
- (BOOL)collectionView:(UICollectionView *)collectionView shouldDeselectItemAtIndexPath:(NSIndexPath *)indexPath 
```

我发现这可以按预期工作。

# python - 按 d.values() 对字典 'd' 排序，然后按相应键的长度

> ID：14477615
> 
> 赞同：0
> 
> 时间：2013-01-23T10:38:01.473
> 
> 标签：python, sorting, python-3.x

我想获得具有两个约束的字典的相反顺序。首先，我根据值进行排序：

```
>>> d = {'I C': (2, 4), 'B I C': (2, 6), 'B I': (2, 6)}
>>> sortd = sorted(d.items(), key=lambda v: v[1], reverse=True)    (1)
>>> sortd
[('B I', (2, 6)), ('B I C', (2, 6)), ('I C', (2, 4))] 
```

其次，对于具有相同值的项目，我想获得之前键最长的项目。在我之前的示例中，我希望得到以下结果：

```
[('B I C', (2, 6)), ('B I', (2, 6)), ('I C', (2, 4))] 
```

是否可以直接在我的`sorted()`命令（1）中执行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T10:39:54.830

在排序函数中包含键的长度：

```
sorted(d.items(), key=lambda v: (v[1], len(v[0])), reverse=True) 
```

输出：

```
>>> sorted(d.items(), key=lambda v: (v[1], len(v[0])), reverse=True)
[('B I C', (2, 6)), ('B I', (2, 6)), ('I C', (2, 4))] 
```

所以每个项目都在元组上排序`(value, len(key))`；较短的长度在较长的长度之后进行反向排序，但前提是元组的第一个元素相同。

# ruby-on-rails - Rails 3.2：类变量初始化

> ID：14477617
> 
> 赞同：1
> 
> 时间：2013-01-23T10:38:08.130
> 
> 标签：ruby-on-rails

我的库中有一个 ActiveRecord 类设置（自动加载）

```
class Settings < ActiveRecord::Base  
   cattr_accessor :defaults
   @@defaults = {}.with_indifferent_access
   ... 
```

我定义了一个初始化程序 'settings.rb' 来设置一些默认值

```
Settings.defaults[:admin_email] = 'john.doe@acme.com'
#..... 
```

运行控制台时，我应该看到默认值，但它是空的：

```
# expected  Settings.admin_email => 'john.doe@acme.com'
Settings.admin_email => {} 
```

如果我在 settings.rb 中插入调试器语句，那么我可以停下来，甚至执行 Settings.defaults[:admin_email] = 'john.doe@acme.com' 但 Settings.admin_email => {}

然后，如果我在控制台中运行： Settings.defaults[:admin_email] = 'john.doe@acme.com' Settings.admin_email => 'john.doe@acme.com'

似乎执行了初始化程序代码，但没有保留类变量......它是否与Rails 3.2类变量初始化有关

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:43:18.460

使用宝石存储设置可能会更好吗？像[https://github.com/railsjedi/rails_config](https://github.com/railsjedi/rails_config)

# android - 在android中动态设置tablerow中的列数

> ID：14477626
> 
> 赞同：1
> 
> 时间：2013-01-23T10:38:34.763
> 
> 标签：android, android-tablelayout

我有一个表格布局，我想动态地将行添加到表格中。表中的列数也将在运行时决定，我想将文本视图放在某个指定单元格的每个单元格中。就像我有三行，每行有 15 列，我想在每列中的某个索引处放置一个文本视图，该索引将在运行时决定。我怎样才能做到这一点。当我这样尝试时

```
table_row.addView(textview, index, params); 
```

它给了我绑定异常的索引。我怎样才能做到这一点。任何形式的帮助将不胜感激，

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:42:52.627

您必须对每一行使用循环，然后将 textview 添加到该行。

一种简单的方法是

```
 TableLayout tbl = (TableLayout) findViewById(R.id.table);
  TableLayout.LayoutParams tblparams = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

    for(int i=0; i<row_count;i++)
    {
        TableRow row = (TableRow) findViewById(R.id.tableRow2);

        TextView tv1 = new TextView(Main.this);
        TextView tv2 = new TextView(Main.this);
        //you will have to do this for all 15 columns   

        tv1.setLayoutParams(tblparams);
        tv1.setText("Col1data");
        tv2.setLayoutParams(tblparams);
        tv2.setText("Col2data");

        row.addView(tv1);
        row.addView(tv2);

    } 
```

我还没有尝试过，但希望它有效。

# c# - 向 sender 和 e 传递更多参数？

> ID：14477642
> 
> 赞同：2
> 
> 时间：2013-01-23T10:39:20.470
> 
> 标签：c#, javascript, asp.net, html, .net

我在 c# 代码中有一个函数，如下所示：

```
protected void UploadFile(Object s, EventArgs e)
{
blah blah blah
} 
```

这个函数会将文件上传到服务器。

我这样调用函数：

```
<asp:Button ID="uploadButton" runat="server" Text="Upload!" OnClick="UploadFile"/> 
```

我想将另一个参数传递给函数，它将是文件的名称。

但我试图将它添加到它`UploadFile`并且它不起作用，我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T10:45:15.117

这似乎很奇怪，因为您不需要向`UploadFile`函数发送文件名。您可以只在`UploadFile`函数本身中使用文件名。

```
protected void UploadFile(Object s, EventArgs e)
{
   // var file = ......
} 
```

另一方面，如果您从另一个控件获取文件名，您可以在`UploadFile`函数中从该控件获取文件名。

```
protected void UploadFile(Object s, EventArgs e)
{
   var file = textboxX.Text;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T10:49:50.753

那是**附加**到您的`Button`. 您不应该像方法一样调用事件，而是可以将方法逻辑提取到单独的方法中，然后使用您的参数调用该方法。就访问`FileName`而言，您可以从 File TextBox 访问它（可能您正在使用一个）

```
protected void UploadFile(Object s, EventArgs e)
{
UploadFileMethod(yourFileTextBox.Text);
}

private void UploadFileMethod(string FileName)
{
 //upload logic
} 
```

并从其他地方调用它。

```
UploadFileMethod("NewFileName"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T10:49:58.610

如果你想传递很多参数，你应该像这样实现你自己的类：

```
public class MyEventArgs : EventArgs
{
    public MyEventArgs(params object[] args)
    {
        Args = args;
    }

    public object[] Args { get; set; }
} 
```

您的活动将采用以下形式：

```
public event EventHandler<MyEventArgs> MyEvent; 
```

提出您的活动：

```
MyEvent(this, new MyEventArgs(1, "information")); 
```

# ajax - JSF ajax 验证与“正常”验证

> ID：14477647
> 
> 赞同：3
> 
> 时间：2013-01-23T10:39:37.237
> 
> 标签：ajax, jsf

我有这个小表格，并试图了解 ajax 在 JSF 验证中的使用。这是表格。（支持 bean 只是一个简单的 bean，有两个变量 firstName 和 lastName。）

```
<h:form>
    <h:outputLabel for="firstName" value="First Name: " />
    <h:inputText id="firstName" value="#{userBean.firstName}">
        <f:validateLength minimum="5" />
        <f:ajax event="keyup" render="firstNameMsg" />
    </h:inputText>
    <h:message id="firstNameMsg" for="firstName" style="color: red" />
    <br />
    <h:outputLabel for="lastName" value="Last Name: " />
    <h:inputText id="lastName" value="#{userBean.lastName}">
        <f:validateLength minimum="5" />
        <f:ajax event="keyup" render="lastNameMsg" />
    </h:inputText>
    <h:message id="lastNameMsg" for="lastName" style="color: red" />
    <br />
    <h:commandButton value="Submit">
        <f:ajax execute="firstName lastName" render=":greeting" />
    </h:commandButton>
    <br />
</h:form>
<h:outputText id="greeting" value="#{userBean.greeting}" /> 
```

我在我的按钮上附加了 ajax，它在提交时使用名字和姓氏呈现 outputText 标记，这很好。我的问题是为什么我需要将`f:ajax`标签*与*标签一起使用`f:validateLength`才能验证这两个字段？我的理解是，ajax 执行所有生命周期阶段直到呈现响应阶段，即它包括验证。验证阶段是否无论如何都不会重新呈现带有消息的页面，无论它来自 ajax 请求还是常规提交/操作请求？如果我删除附加到输入字段的 ajax 标记，则不会显示验证消息，但如果我完全删除 ajax 并仅使用 commandButtons 操作事件进行常规提交，它们就会显示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T11:07:45.577

这是因为在正常的请求处理中（没有任何客户端脚本处理）向服务器提交值的唯一方法是发送整个表单。当您删除所有`<f:ajax>`. 仅通过输入输入字段不可能从服务器获得响应（在这种情况下是您的验证消息）。

当你`<f:ajax>`从组件中删除你的`firstName`并且`lastName`只留下最后一个，`<h:commandButton>`因为它说它将执行`firstName`and `lastName`，对这些字段进行服务器端验证，但结果它只会呈现`:greeting`组件。要修复它，您可以添加到您的`<h:commandButton>`这个：

```
<f:ajax execute="firstName lastName" render=":greeting firstNameMsg lastNameMsg"/> 
```

但是现在这些消息只会在您提交表单时显示，而不是在您在输入字段中键入键时显示。

要获得一些摘要：使用 AJAX，您必须准确指定在发送请求后必须呈现哪些组件（及其所有子组件）。

顺便说一句，为用户在输入字段中键入的每个键发送服务器请求并不是一个好主意。最好使用 JavaScript 或其他客户端技术来执行此操作，并且仅在服务器上验证整个最终值。

# drupal - Drupal 7转换节点形式添加到多步骤形式

> ID：14477648
> 
> 赞同：1
> 
> 时间：2013-01-23T10:39:37.617
> 
> 标签：drupal, drupal-7, drupal-modules

我有一个带有字段的节点类型，有些是必需的，有些不是。我正在尝试创建节点表单的多步骤表单。必填字段是第一步，剩余字段是下一步。

我隐藏了第一步不需要的字段，使用 hook_form_alter，这很容易，但我不知道如何将表单转换为多步表单。我阅读了 API 文档，上面说我必须使用

```
$form['next'] = array(
      '#type' => 'submit',
      '#value' => 'Next >>',
); 
```

这就是drupal 如何知道这是一个多步骤的形式。但如果我理解正确，我不能在 hook_form_alter 中使用它，因为 $form 不在那个状态。

我在哪里可以删除提交并添加到表单旁边？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:08:31.940

尝试[http://drupal.org/project/mforms](http://drupal.org/project/mforms)和[http://drupal.org/project/multistep](http://drupal.org/project/multistep)作为指导。该模块基本上是用于制作简单的多步骤表格

一些片段，

> Multistep 为内容类型编辑表单添加了多步骤功能。它通过为内容类型中的每个字段组分配一个步骤编号并隐藏所有不属于当前步骤的组来实现这一点。然后，用户可以使用不同的提交按钮来重定向到上一个、下一个或当前步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:01:40.667

hook_form_alter（或 hook_form_FORM_ID_alter）*是*你想要使用的，你只需要确保你的事件最后触发。为此，您可以进入数据库并增加模块在*系统*表中的权重（或编写一个 db_update，这是很长的路要走）。

许多 Drupal 开发人员创建了一个名为“Overrides”或类似的模块，它总是最后触发。你可以把你的覆盖放在那里。

作为项目的附注，您可能希望查看 Ctools 和其中包含的 form_wizard 功能。如果您想将向导放置在模态中，这可能会非常有用。我发现它比 mforms 非常优越，但它需要一点点熟悉。

祝你好运！

# velocity - 如何在变量中添加“

> ID：14477649
> 
> 赞同：0
> 
> 时间：2013-01-23T10:39:41.143
> 
> 标签：velocity

我想在我的字符串中添加 " 字符，这可能吗？我正在使用 ' 字符来避免这个问题，但是如果可能的话我想使用 "，谢谢

这是我做的一个例子（当然它不起作用）：

```
#set($options="<option value="1">my value</option>") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T10:44:20.603

你可以试试

```
#set($Q = '"')
#set($options="<option value=${Q}1${Q}>my value</option>") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:43:31.657

尝试

```
#set($options="<option value=\"1\">my value</option>") 
```

# ios6 - iOS 6 中的地图内存警告

> ID：14477651
> 
> 赞同：1
> 
> 时间：2013-01-23T10:39:41.343
> 
> 标签：ios6, mkmapview, didreceivememorywarning

我开发的应用程序使用 MKMapView 在 iOS 5.x 和 6.x 设备上运行，当我在 5.x 设备上运行应用程序时，没有内存警告，但是当我在 6.x 设备上运行时，我发现一堆内存警告主要是在地图上加载图钉和放大和缩小地图时，平移是指在地图上执行任何手势操作时。当我收到内存警告但没有运气时，我尝试通过在 SO 答案中找到的临时解决方案更改地图类型，请告诉我解决这些内存警告的方法。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:21:45.030

似乎问题在于 iOS 6 地图及其内存占用。我确实读过关于在 AppDelegate 中创建 mapView 的一个实例应该可以解决这个问题，但是我还没有尝试过。

# image - 如何检查 javaserver faces 中图像文件的大小

> ID：14477653
> 
> 赞同：-2
> 
> 时间：2013-01-23T10:39:50.690
> 
> 标签：image, jsf, image-upload

我正在处理 javaserver 面孔，我在检查上传的图像文件的大小时遇到​​了问题，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:44:48.893

你可以`java.io.File.length()`用来获取大小。

获取文件大小`java.io.File.length()`是可以的，但它很慢。相反，你可以使用 fileChannel 的`size`方法。它比 j 快一点`ava.io.File.length()`

```
FileInputStream fis = null;
            try {
                File me = new File(your file path).getFile());
                fis = new FileInputStream(me);
                return fis.getChannel().size();
            } finally {
                fis.close();
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:51:57.997

不确定您用于文件上传的内容，但您可以检查上传文件的“内容长度”标题。

或者，如果您使用的是“Apache commons fileupload”，您可以这样做

```
 ServletFileUpload upload = new ServletFileUpload();
    upload.setFileItemFactory(new DiskFileItemFactory());
    List fileItems = upload.parseRequest(request);

    for(int i=0; i < fileItems.size(); i++){
       FileItem item = (FileItem)fileItems.get(i);
       if(item.isFormField() == true){
          if(item.getFieldName() !=null  ){
             int fileSize = item.get().length ;
          }
       }
    } 
```

# java - java休眠标准错误

> ID：14477655
> 
> 赞同：0
> 
> 时间：2013-01-23T10:39:53.713
> 
> 标签：java, hibernate, criteria

这里是数据库模式：

```
Table A:                public class A {
id integer,                B objectB;
comment varchar(30),       String comment;         
id_B integer            }

Table B:                public class B {
id integer,                C objectC;
comment varchar(20),       String comment;
network integer         }

Table C:                public class C {
id                         Integer id;
name varchar(30)           String name;
                         } 
```

现在我需要创建一个标准来检查表 C 中的正确“id”和表 B 中的“注释”。我尝试这样做：

```
Criteria criteria = getSession().createCriteria(A.class);
criteria.createCriteria("objectB")
        .createCriteria("objectC").add(Restrictions.idEq(networkID));

//gives org.hibernate.QueryException: duplicate association path: objectB error
if (comment != null && comment.length() > 0) {
    criteria.createCriteria("objectB")
            .add(Restrictions.like("comment", "%" + comment + "%"));
}

//second approach gives me no error but does not work, means I receive the wrong results
if (comment != null && comment.length > 0) {
    criteria.add(Restrictions.like("comment", "%" + comment + "%"));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:45:41.090

我认为它不喜欢代码`Criteria`为`objectB`. 代码中也存在语法错误。

**修改**

```
Criteria criteria = getSession().createCriteria(A.class);
Criteria criteriaB = criteria.createCriteria("objectB");
Criteria criteriaC = criteriaB.createCriteria("objectC");
criteriaB.add(Restrictions.like("comment", "%" + comment + "%"));
criteriaC.add(Restrictions.idEq(networkID)); 
```

**语法问题**

```
Criteria criteria = getSession().createCriteria(A.class);
criteria.createCriteria("objectB")
        .createCriteria("objectC").add(Restrictions.idEq(networkID));

//Syntax error occurs here, missing add
criteria.createCriteria("objectB")
        .(Restrictions.like("comment", "%" + comment + "%"));

//Fix
criteria.createCriteria("objectB").add(Restrictions.like("comment", "%" + comment + "%")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:45:49.453

尝试这个。您不需要调用 createCriteria("objectB") 两次

```
 Criteria criteria = getSession().createCriteria(A.class);
  criteria.createCriteria("objectB").createCriteria("objectC").add(Restrictions.idEq(networkID)).add(Restrictions.like("comment", "%" + comment + "%"));

if (comment != null && comment.length > 0) {
    criteria.createAlias("objectB", "b")
    criteria.add(Restrictions.like("b.comment", "%" + comment + "%"));
} 
```

# mysql - mysql php 显示来自数据库的 10 个结果

> ID：14477657
> 
> 赞同：0
> 
> 时间：2013-01-23T10:39:55.657
> 
> 标签：mysql, database

我想显示来自 mysql 数据库的数据，例如 [Youtube][1] 评论 10 条评论“显示更多 10”链接......我怎么能得到这个？

那是我的代码

$entities = mysql_query("SELECT `timestamp`, `username`, `message`FROM `comments`WHERE `page_name`= '$message_page' ORDER BY `timestamp`DESC");

```
 if (mysql_num_rows($entities) ==0) {
            echo '<strong>No comment, yet.</strong>';
            } else {
        while ($entities_row = mysql_fetch_assoc($entities)) {
        $entities_timestamp = $entities_row['timestamp'];
        $entities_username = $entities_row['username'];
        $entities_message = $entities_row['message']; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:49:35.577

您正在尝试什么查询？到目前为止取得了什么成就？提及它，其他人会很容易帮助您！就您的问题而言，您将不得不`limit`在 SQL 查询中使用，并且单击**显示更多**将需要使用 ajax 获取下一批记录

```
 "select * from table_name where (your condition) limit ".$offset.",".$limit."" 
```

在这里，offset 是起点，limit 是要获取的记录数。因此，您的偏移量第一次为 0，限制为 10。下一次迭代（点击**显示更多**）它将是 10,10 下一个 20,10，依此类推

你的 jquery 函数看起来像这样

```
 $("#idOfShowMore").live('click',function({               
      $.ajax({
        url: "php file with query to database",
        type: 'POST',
        data: {"limit":"limit is 10 in your case"},
        dataType : "text",
        success: function(returnData){
            //append the return data on success
        }
       });
     }) 
```

希望它有所帮助:) **更新**
`SELECT timestamp, username, message FROM comments WHERE page_name = '$message_page' ORDER BY timestamp DESC limit 0,10`
这里，**0 是偏移量，10 是限制**。这将获得查询返回的前 10 条记录。现在您必须将偏移量增加限制值，所以这样做--> `offset = offset+limit;`（首先将偏移量初始化为 0）
现在下一次迭代，您的偏移量将是 10，并且限制将保持 10，因为您需要一次获取 10 条记录。单击显示更多链接时调用 ajax 函数。应该是它.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T10:46:53.967

它正在分页。假设您的评论表`comm_tb`包含字段`comm_id`等。创建一个额外的搜索表，其中包含一个字段`comm_id`，名为`old_comm` What you do，以重复的方式，是选择前 10 条评论，而不是那些已经选择的评论：

`select * from comm_tb ct where not exists (select 1 from old_comm oc where oc.comm_id = ct.comm_id) and rownum <= 10;`

`old_comm`当您拥有所有 10 条记录时，您可以使用已显示的评论 ID 对表执行批量插入。

在多用户环境中，扩展`old_comm`表格`user`并在加载评论时考虑它。

# livecycle - ALC-TTN-105-000 无法连接到引导 servlet

> ID：14477663
> 
> 赞同：0
> 
> 时间：2013-01-23T10:40:11.437
> 
> 标签：livecycle, lcds, livecycle-designer

您好我正在尝试使用 Adob​​e LiveCycle Configuration Manager 安装 livecycle 服务器。在此我到达幻灯片标题是 LifeCycle ES3 数据库初始化有一个标记为 initializa 的按钮和两个文本字段在主机文本字段中我输入了 localhost 和端口我输入8080 并出现错误 ALC-TTN-105-000 could not connect to bootstrap servlet.Port[Connection denied:connect] may be invalid 。我也尝试了其他端口 8081 8085 9090 等，但仍然面临同样的错误。谁能告诉我如何解决这个错误？请帮助我是一个初学者，我很高兴创建我的第一个应用程序请帮助如何进一步进行并解决这个问题！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:22:38.693

恐怕您必须提供更多信息才能回答您的问题。

1.  您是否尝试在您的环境中安装交钥匙、快速或自定义 LiveCycle 服务器？
2.  您使用什么作为应用程序服务器和数据库？
3.  您是否在端口 8080 上运行任何其他应用程序？
4.  当您收到错误时，您的应用程序服务器是否已启动并正在运行。

从您帖子中的一般消息来看，似乎应用程序服务器已关闭或某些东西阻止了与应用程序服务器的通信。

[请查看并遵循此处](http://help.adobe.com/en_US/livecycle/10.0/InstallJBoss/livecycle_install_jboss.pdf)列出的安装文档。如果您已经在关注它，请提供上述问题的答案，以进一步了解这一点。

谢谢，

阿玛汉。

# javascript - 在哪里/如何添加自定义 js magento

> ID：14477664
> 
> 赞同：5
> 
> 时间：2013-01-23T10:40:16.243
> 
> 标签：javascript, php, magento

我做了一个magento模块，我需要添加一些自定义的javascript。

我将以下内容放在我的布局文件中（并且它正在工作，我的自定义 js 位置在 /js/ 中）：

```
<default>
    <reference name="head">
        <action method="addJs"><script>http://code.jquery.com/jquery.min.js</script></action>
        <action method="addJs"><script>my_custom_js.js</script></action>
    </reference>
</default> 
```

我的问题是 - 这些文件的最佳位置是 in`/js/jquery/`还是 in `/skin/frontend/default/default/js`？如果我把它放在默认/默认中，我如何从 XML 中引用它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-23T10:44:59.610

如果您的模块需要它（关键功能）：

```
/js/[namespace]/[module]/ 
```

如果主题需要它（UI 增强）：

```
/skin/frontend/[group]/[theme]/js/ 
```

# asp.net - 频繁的长负载（~9 秒）

> ID：14477673
> 
> 赞同：1
> 
> 时间：2013-01-23T10:40:31.383
> 
> 标签：asp.net, iis-7.5, windows-server-2008

我们的生产服务器已经开始在我们所有托管的网站上表现得很奇怪。

这是一个运行 IIS 和 ~15 asp.net 3.5 网站的 Windows Server 2008 R2 服务器。我已经测试了该服务器托管的一半网站，所有这些网站都有相同的症状。它发生时似乎非常随机，但至少每分钟一次，一个页面需要大约 9 秒才能加载。这是迄今为止我发现的唯一模式。所以我的第一个猜测是某些东西使应用程序回收，所以我尝试登录“Application_End（）”并得到以下信息：

```
MSG:
Change in C:\Windows\Microsoft.NET\Framework64\v2.0.50727\Temporary ASP.NET Files\root\b9b284ca\4eb9bb86\hash\hash.web
HostingEnvironment initiated shutdown
HostingEnvironment caused shutdown

STACK
   at System.Environment.get_StackTrace()
   at System.Web.Hosting.HostingEnvironment.InitiateShutdownInternal()
   at System.Web.Hosting.HostingEnvironment.InitiateShutdown()
   at System.Web.HttpRuntime.ShutdownAppDomain(String stackTrace)
   at System.Web.Compilation.BuildManager.OnWebHashFileChange(Object sender, FileChangeEvent e)
   at System.Web.DirectoryMonitor.FireNotifications()
   at System.Web.Util.WorkItem.CallCallbackWithAssert(WorkItemCallback callback)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading._ThreadPoolWaitCallback.PerformWaitCallbackInternal(_ThreadPoolWaitCallback tpWaitCallBack)
   at System.Threading._ThreadPoolWaitCallback.PerformWaitCallback(Object state) 
```

这条消息只出现了两次，现在我根本无法得到它。所以我仍然对发生的事情一无所知。

有没有其他人经历过这个？

# javascript - 如何使用 Javascript 在 Windows 任务管理器中杀死 Excel 对象？

> ID：14477682
> 
> 赞同：0
> 
> 时间：2013-01-23T10:41:14.573
> 
> 标签：javascript

我在 Javascript 中使用 Excel 对象并使用 javascript 打开和关闭 excel 文件。

在这里，当我关闭 excel 对象并将 Excel 对象设置为 null 时。

它不会删除 Windows 任务管理器中的 excel 对象。一旦我刷新我的页面，那么只有它被删除。

在我要使用的代码下方

```
ExcelObject.ActiveWorkBook.Close();
ExcelObject.Application.Quit();
ExcelObject = null; 
```

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:11:58.747

试试下面的代码......它强制终止在taskmanager中运行的进程......

```
<html>
<head>
<script>
function Sam()
{
var WshShell = new ActiveXObject("WScript.Shell");
var oExec = WshShell.Exec("taskkill /F /IM EXCEL.exe"); //here i terminate the Excel...
}
</script>
</head>
<body>
<input type="Button" Value="Kill" onclick="Sam();"/>
</body>
</html> 
```

# sublimetext2 - Sublime Text 2：更改状态栏高度

> ID：14477683
> 
> 赞同：0
> 
> 时间：2013-01-23T10:41:18.067
> 
> 标签：sublimetext2

我正在使用 SublimeCodeIntel 插件，它根据状态栏中的 docblock 显示方法描述。问题是状态栏相对较小，因此信息被截断，这使得插件在信息太长的情况下变得毫无用处。我试图摆弄主题配置中的“status_bar”条目，但我无法让它工作。

有谁知道这是怎么做到的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:33:54.707

也许这不是您所需要的，但您可以更改状态栏的字体大小，添加如下内容：

```
{
    "class": "label_control",
    "parents": [{"class": "status_bar"}],
    "font.size": 15
}, 
```

到你的`.sublime-theme`文件。

当然，您可以根据`font.size`自己的需要进行设置。

# activemq - servicemix中的activemq

> ID：14477688
> 
> 赞同：0
> 
> 时间：2013-01-23T10:41:40.477
> 
> 标签：activemq, apache-servicemix

我有一个使用 activemq 队列管理消息传递的实现。我想在 servicemix 上部署这个包但是我不知道我应该使用的代理 URL。当我在独立的 activemq 服务器上部署它时，我使用了以下 URL 作为 brokerURL：tcp://localhost:61616。

但是，这似乎不起作用（或者我想我可能缺少一些配置来告诉 servicemix 将此 url 用作 activemq 代理 URL）。

当我在 servicemix 上运行 features:list 命令时，我可以看到已安装的 activemq。

任何人都可以帮助我找到我应该如何/使用什么代理 URL 来在 servicemix 上正确部署我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T14:04:35.100

我在 <>/etc/org.ops4j.pax.url.mvn 文件中包含了属性 org.ops4j.pax.url.mvn.repositories 的一些 repo 位置，这使得这个连接异常消失了。

注意：我不确定添加这些 repo 是如何解决连接问题的，但是我希望在属性文件中添加 repo 位置（如上）可能有助于 servicemix 访问某些 API 以建立连接。

# vb.net - 如何在显示表单之前将信息发送到单例表单

> ID：14477692
> 
> 赞同：1
> 
> 时间：2013-01-23T10:42:01.590
> 
> 标签：vb.net, winforms, singleton

在具有多个多用途子窗体的 MDI WinForms 环境中，每个人都说要同时打开这些窗体的一个实例，最简单的方法是为此使用 Singleton 实现。经过一番搜索，我发现了这种方法（VB .NET 语言）：

```
Public Class FormSingleton(Of TForm As {Form, New})
    Private Shared _instance As TForm

    Public Shared ReadOnly Property Form() As TForm
        Get
            If _instance Is Nothing OrElse _instance.IsDisposed Then
                _instance = New TForm
            End If

            Return _instance
        End Get
    End Property

    Public Shared Sub Show()
        'Ensure the form is visible and has focus.
        With Form
            .Show()
            .Activate()
        End With
    End Sub

End Class 
```

当然，显示表单的代码是：

```
FormSingleton(Of MyForm).Show() 
```

现在我的问题是如何在表单实际显示之前将一些信息发送到“Singleton”表单。必须发送的信息类型因一种形式而异。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:11:33.260

您可以向您的班级添加`FormSingleton`一个方法，例如...

```
Public Shared Sub AddFacts(ByVal fact_object As Object)
    With Form
        .AddFacts(fact_object)
    End With
End Sub 
```

然后`AddFacts`为您的每个表格添加一个合适的。[考虑让您的表单实现接口](http://msdn.microsoft.com/en-us/library/28e2e18x(v=vs.71).aspx)并将 AddFacts、Show 和 Activate 方法作为该接口的一部分可能是值得的。这样，您可以确保在编译时表单适合在您的单例中使用。

# colors - 在 matplotlib 上自定义颜色条边框颜色

> ID：14477696
> 
> 赞同：12
> 
> 时间：2013-01-23T10:42:15.017
> 
> 标签：colors, matplotlib, border

如何更改颜色条边框，使其为白色而不是黑色（外部边框和每个段之间）？

例如：

```
x=randint(100, size=(10,10))
cs=contourf(x)
cb=colorbar(cs) 
```

给

![在此处输入图像描述](../Images/624ff4d07ec5dbd045e913ded620693c.png)

但我想要 ：

![在此处输入图像描述](../Images/4de16fbe30640bb64ba9225662678171.png)

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-23T11:27:38.720

编辑：请注意下面对 MPL 1.3 及更高版本的评论。

添加：

```
cb=colorbar(cs, drawedges=True)

cb.outline.set_color('white')
cb.outline.set_linewidth(2)

cb.dividers.set_color('white')
cb.dividers.set_linewidth(2) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-01-16T17:17:12.703

正如 PiQuer 提到的：

```
cb.outline.set_edgecolor('white') 
```

现在工作

# sql-server - 删除全文搜索服务依赖项 (objectExplorer)

> ID：14477698
> 
> 赞同：0
> 
> 时间：2013-01-23T10:42:25.913
> 
> 标签：sql-server, sql-server-2005

我正在尝试备份数据库，但收到一条与全文搜索已停止相关的消息。当我尝试启动它时，我收到此消息

无法在服务器上启动服务 MSFTESQL$SQL_2K5 ....

附加信息：已删除服务依赖项（objectExplorer）

# iphone - 如何在 iPhone 3gs 中解决 ios6 中的 wi-fi 问题

> ID：14477702
> 
> 赞同：-1
> 
> 时间：2013-01-23T10:42:38.463
> 
> 标签：iphone, ios, ios6

当我在真实设备中测试应用程序时，它与服务器通信并从服务器获取数据，但问题是 wi-fi 正在开启和关闭，因此无法从服务器正确获取数据并且应用程序将崩溃。笔记。我的设备已经更新到 ios 6.0.1 我仍然遇到问题。任何人都可以帮助我找到正确的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:51:45.440

我认为您必须使用`Reachability class`它来处理和其他互联网选项，并且它会在连接中断或建立时`Wi-Fi`处理您的问题。`Parser`

以下是从 gith Hub 下载 Reachblity 类的链接：-

[https://github.com/tonymillion/Reachability](https://github.com/tonymillion/Reachability)

其他告诉您使用 Reachblity 的网址：-

[如何使用 iOS 可达性](https://stackoverflow.com/questions/11177066/how-to-use-ios-reachability)

# android - 访问地图视图中的确定标记

> ID：14477707
> 
> 赞同：0
> 
> 时间：2013-01-23T10:42:55.213
> 
> 标签：android, google-maps, android-maps-v2

我正在使用 Google Maps Android API V2 并在其中设置了一些标记。

我需要从 MapView 中获取所有标记（实际上是其中之一）。有什么办法可以做到这一点？如何迭代地图中的标记？如何找到一个确定的标记？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:44:25.577

> 有什么办法可以做到这一点？

仅当您拥有自己的标记集合时。

> 如何迭代地图中的标记？

遍历您自己的标记集合。

> 如何找到一个确定的标记？

在您自己的标记集合中找到它。

Maps V2 在很大程度上是一个只写接口，用于标记、折线和多边形等内容。数据不在您的流程中维护；相反，数据通过 IPC 发送到 Google Play 服务应用程序。如果您希望将来使用这些数据，那很好，但除了将其提供给您*的*`GoogleMap`.

# android - 推送选择失败：只读文件系统：移动到 SdCard 时

> ID：14477709
> 
> 赞同：3
> 
> 时间：2013-01-23T10:42:58.087
> 
> 标签：android, sd-card, android-sdcard

我从我的音乐播放器应用程序创建了一个 SDCard。但是当我将歌曲添加到应用程序时，它显示错误

```
 [2013-01-23 16:09:18 - ddms] transfer error: Read-only file system
     [2013-01-23 16:09:18] Failed to push selection: Read-only file system 
```

我已经`uses-permission`在我的`Manifest`

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

可能有什么问题。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-08-22T05:18:32.070

转到 sdk/platform-tools 目录（以访问 adb shell），然后输入以下命令：

```
./adb shell 
su 
mount -o rw,remount rootfs / 
chmod 777 /mnt/sdcard 
```

然后它对我来说很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:15:05.613

在 Android 清单文件中添加这些权限以访问 SD 卡。

```
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

# javascript - 为什么这个网站使用 html5 pushstate 对 seo 不友好？

> ID：14477710
> 
> 赞同：-1
> 
> 时间：2013-01-23T10:42:58.500
> 
> 标签：javascript, html, seo, history.js

我刚刚使用 html5 历史 API 和使用 history.js 库的“pushstate”构建了这个网站。

[http://renovari.co.uk](http://renovari.co.uk)

我将它提交给 google 索引，但是在我在 google 中查看该网站的结果后，我可以看到该文本没有被抓取。

我在互联网上看到了很多应该起作用的例子......

有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T11:37:23.953

问题在于没有 JS 的访问者，例如 google bot。

您依赖 JavaScript 来加载页面内容，因此它没有被索引。

尝试在浏览器中禁用 JavaScript，您会看到这一点。

要解决这个问题，有很多方法可以继续，但基本上你希望将第一个页面加载作为始终包含内容的页面提供服务，然后通过 JS 加载新内容。

[如果你使用 hashbangs，你可以做这样](http://www.seoinc.com/seo-blog/making-ajax-application-crawlable-for-search-engine-optimization/)的事情。但是，如果您进行搜索，您会在网络上找到很多热带地区。

维基百科也有[这篇很棒的文章](http://en.wikipedia.org/wiki/Single-page_application)。

# php - 使用 PHP 从网站中提取实时数据

> ID：14477717
> 
> 赞同：0
> 
> 时间：2013-01-23T10:43:34.627
> 
> 标签：php, regex, extract

我已经查看了有关[通过 PHP 从网站提取数据的](https://stackoverflow.com/questions/2019892/extract-data-from-website-via-php/2020062#2020062)问题。但我无法解决我的问题。我正在尝试从网站中提取实时数据。是银价。它每天都在变化，我需要提取最新数据。

我正在尝试从[http://www.maybank2u.com.my/mbbfrx/silver_rate.htm中提取](http://www.maybank2u.com.my/mbbfrx/silver_rate.htm)

我已经完成了 file_get_contents(" [http://www.maybank2u.com.my/mbbfrx/silver_rate.htm](http://www.maybank2u.com.my/mbbfrx/silver_rate.htm) ");

但是当我试图 preg_match() 价格时。我找不到正确的方法。感谢这里有人可以帮助我。

很抱歉提出了已经在线程中的相同问题，但我无法解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:15:26.953

请不要使用正则表达式来解析 html 文档。
请改用 html/dom 解析器。
看看这个链接。
它应该让您开始如何提取数据。

[html解析](http://net.tutsplus.com/tutorials/php/html-parsing-and-screen-scraping-with-the-simple-html-dom-library/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:16:36.507

不要使用正则表达式 (preg_match)。使用 dom 解析器。我会推荐[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)上的那个。

一旦你有了一个可以抓取你感兴趣的页面的脚本，就可以[通过](http://en.wikipedia.org/wiki/Data_scraping)设置一个 cron 作业来指示你的服务器每天执行它。

# java - 将 Twitter.Status 解析为字符串

> ID：14477718
> 
> 赞同：2
> 
> 时间：2013-01-23T10:43:45.927
> 
> 标签：java, android, twitter

我正在使用将 Twitter API 与 Android 集成

```
twitter4j-core-android-2.2.6.jar 
```

我成功获取了用户名、个人资料图片和其他内容，但在获取状态（推文）时遇到了一些问题。以下是我用来获取推文（状态）的代码。

```
User user = twitter.showUser(userID);
Status s = user.getStatus();
Log.d("Status",  ""+s.toString()); 
```

但响应不是可读格式，如何转换为字符串。以下是上述语句的 Logcat 结果。

```
01-23 15:30:28.062: E/Status(8534): Testing app...  
http://*********', source='<a href="http://www.facebook.com/twitter" 
rel="nofollow">Facebook</a>', isTruncated=false,  
geoLocation=null, place=null, retweetCount=0, wasRetweetedByMe=false, 
contributors=null, annotations=null, retweetedStatus=null, 
userMentionEntities=[], urlEntities=[URLEntityJSONImpl{start=116, 
end=136, url=**************************************************, 
displayURL=***************}], hashtagEntities=[], user=null} 
```

# c# - Microsoft 同步框架更新的行未同步

> ID：14477720
> 
> 赞同：0
> 
> 时间：2013-01-23T10:43:47.187
> 
> 标签：c#, asp.net, vb.net, wcf, microsoft-sync-framework

我尝试使用 Microsoft 同步框架将表从服务器（sql server 2008 R2）同步到我的 CE SQL 3.5，当有新行插入服务器 DB（如果我从服务器或通过 Internet 同步）时，同步过程工作正常，但是当有一些行被更新时，当我通过 Internet 连接到 WCF 服务时，更新的行不同步 DownloadChangesFailed，但是当我从服务器同步时它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T01:03:38.647

订阅本地提供商（目的地）上的 ApplyChangesFailed，您应该会获得有关未应用更改的原因的信息。这可能是因为冲突或错误。

# javascript - 无法访问 span 标签的 innerHTML

> ID：14477721
> 
> 赞同：0
> 
> 时间：2013-01-23T10:43:56.070
> 
> 标签：javascript, dom

我有这段代码：

```
var size = iframe.contentWindow.document.getElementsByClassName('checked').getElementsByTagName('span')[0].innerHTML; 
```

出于某种原因，每次我运行它时都会收到以下消息：

> 未捕获的类型错误：对象 [object NodeList] 没有方法“getElementsByTagName”

即使我所有其他功能都可以`getElementsByTagName()`正常工作。此错误的原因可能是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:45:42.487

[`getElementsByClassName`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)返回一组元素（即`NodeList`），而不是单个元素：

```
iframe
    .contentWindow
    .document
    .getElementsByClassName('checked')[0]  // <--- [0] (or whatever index)
    .getElementsByTagName('span')[0]
    .innerHTML; 
```

此外，您可以将其替换为[`querySelector`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelector)：

```
iframe
    .contentWindow
    .document
    .querySelector(".checked span")
    .innerHTML; 
```

# html - 如何创建两个 li 样式？

> ID：14477724
> 
> 赞同：0
> 
> 时间：2013-01-23T10:44:16.177
> 
> 标签：html, css, styles, html-lists

我创建了一个 li ul 菜单，它运行良好。但是，我希望下面代码中的最后一个 li 具有不同的背景。

我尝试将 style="background-color:#F00" 添加到有问题的 li 中，但它不起作用。

有谁知道如何做到这一点？

提前致谢，

```
<!DOCTYPE html>

<html>

<head>

<style type="text/css">

#cssmenu {
background:#a8ac9d;
width: 270PX;
}
#cssmenu > ul {
padding:1px 0;
margin:0px;
list-style:none;
width:270px;
height:21px;
font:normal 8pt verdana, arial, helvetica;
}
#cssmenu > ul li {
margin:0;
padding:0;
display:block;
float:left;
position:relative;
width:270px;
}
#cssmenu > ul li a:link, #cssmenu > ul li a:visited {
padding:4px 0;
display:block;
text-align:center;
text-decoration:none;
background:#a8ac9d;
color:#ffffff;
width:270px;
height:13px;
}
#cssmenu > ul li:hover a, #cssmenu > ul li a:hover, #cssmenu > ul li a:active {
padding:4px 0;
display:block;
text-align:center;
text-decoration:none;
background:#a8ac9d;
color:#ffffff;
width:270px;
height:13px;
}
#cssmenu > ul li ul {
margin:0;
padding:0px 0px 0;
list-style:none;
display:none;
background:#a8ac9d;
width:270px;
position:absolute;
top:21px;
left:0px;
}
#cssmenu > ul li:hover ul {
display:block;
width: 270PX;
}
#cssmenu > ul li ul li {
width:146px;
clear:left;
width:270px;
}
#cssmenu > ul li ul li a:link, #cssmenu > ul li ul li a:visited {
clear:left;
padding:4px 0;
width:270px;
position:relative;
z-index:1000;
}
#cssmenu > ul li ul li:hover a, #cssmenu > ul li ul li a:active, #cssmenu > ul li ul li a:hover {
clear:left;
background:#a8ac9d;
padding:4px 0;
width:270px;
position:relative;
z-index:1000;
}
</style>

</head>

<body>

<div id='cssmenu'>
<ul>
<li><a href='#'><span>Products</span></a>
<ul>
<li><a href='#'><span>Product 1</span></a></li>
<li style="background-color="#F00"><a href='#'>Product 2</a></li>
</ul>
</li>
</ul>
</div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:47:23.620

~~我没有详细阅读，但乍一看，这条线是问题所在。~~

 ~~```
<li style="background-color="#F00"><a href='#'>Product 2</a></li> 
```~~ 

应该

```
<li style="background-color:#F00"><a href='#'>Product 2</a></li> 
```

~~编辑：上面的代码不起作用！！！这是因为具有背景颜色的元素是 . 所以你应该改变这个。~~

 ~~```
<li><a href='#' style="background-color:#F00">Product 2</a></li> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T10:50:42.733

您需要为`a tag`其中的 which编写它`li`

添加这个

```
#cssmenu ul li ul li:last-child a{
background:red
} 
```

**[演示](http://jsfiddle.net/GrEdW/1/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T10:49:44.580

编写`style`属性时，要遵循的语法与 css 中的语法相同。你已经写`style="background-color="#F00"`了，应该是`style="background-color: #F00"`~~

# jquery - Jquery更改：before伪元素的css绝对位置

> ID：14477742
> 
> 赞同：1
> 
> 时间：2013-01-23T10:45:01.263
> 
> 标签：jquery, css, position, absolute

我正在尝试更改我的 css 中伪元素的 css`left`位置`:before`。如果实际上可以使用 jQuery 更改此对象的位置，我尝试的代码无效。我必须使用 :before css。

在 jsfiddle 中，我试图将深灰色方块移动到其位置右侧 75px：http: [//jsfiddle.net/7RZkX/](http://jsfiddle.net/7RZkX/)

这是代码：

html

```
 <div id="box">
    <p class="boxText">TEST CONTENT</p>
  </div> 
```

CSS

```
 #box{width:100px; background-color:#CCC; padding:30px 40px 30px 40px; position:relative; margin-top:120px;}
 .boxText{font-family: 'Trebuchet MS', Arial, Helvetica, sans-serif; font-size:16px; text-align:center;padding:0px;margin:0px;}
 p.boxText:before{content:"***"; background-color:#999; width:25px; height:15px; position:absolute; left:0px;top:-15px;z-index:20;} 
```

jQuery

```
 $(function () {
      $('p.boxText:before').css({"position":"absolute", "top":"-15px","left":"75px"})
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:50:16.770

由于`$('p.boxText:before')`返回一个空的 jQuery 包装对象，只需添加另一个 css 规则

```
p.boxText.move:before{ left:75px; } 
```

你的js变成了

```
$(function () {
   $('p.boxText').addClass('move');
}); 
```

这样做可以更好地分离 javascript 和样式。无论如何，如果您只是想将 pseudoelement 居中`:before`，那么根本不需要javascript。简单使用

```
p.boxText:before{
    content  : "***";
    ...
    width    : 25px;
    position : absolute; top: -15px; left: 50%; 
    margin-left: -12px; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:50:38.373

试试这个：

JS: $(function () { $('p.boxText').addClass("me"); });

CSS：p.boxText.me:before{left:75px;}

# java - 为什么Java中有原始数据类型？

> ID：14477743
> 
> 赞同：12
> 
> 时间：2013-01-23T10:45:02.120
> 
> 标签：java, types, primitive

> **可能重复：**
> [当我们有包装类时，为什么支持原语？](https://stackoverflow.com/questions/2063556/when-we-have-wrappers-classes-why-primitives-are-supported)

如果有让Java成为纯面向对象语言的Wrapper类，那么为什么有可以在Java中使用的Primitive数据类型？？？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-23T10:53:09.960

为了效率。原始类型的变量直接包含值；非原始类型的变量是引用，指的是存储在内存中其他地方的对象。

每次需要使用包装器类型的值时，JVM 都需要在内存中查找对象以获取该值。原始类型不需要这样做，因为变量包含值本身，而不是对包含该值的对象的引用。

然而，这并不能解释为什么原始类型需要在 Java 编程语言中显式可见。Java 语言和 JVM 的设计者可以选择对语言本身隐藏原始类型，这样您就可以将一切都视为对象；然后，编译器可以在幕后将其转换为更有效的原始类型。

Some newer programming languages that run on the JVM (Groovy, Scala and others) let you do exactly that: in the language itself everything looks like an object, which you can for example call methods on, but below the covers the compiler translates them to primitives.

I guess that in the time the Java language was developed (in the first half of the 1990's) people didn't think of that, and now it's too late for a radical change in the language to allow this.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-23T10:51:40.937

存在原始数据类型的主要原因是，创建对象、分配堆的成本太高，并且会降低性能。您可能知道 int、float 等原始数据类型是最常用的，因此将它们作为对象会极大地影响性能。所以 Java 设计者认为最好把它做成非对象。是的，如果你准备在性能上妥协一点，但你需要更多的 OOP 设施，包装器就存在。因此，在这种情况下，您可以使用包装器。希望这些信息对您有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T10:52:01.117

出于性能原因。[在SmallTalk](http://www.smalltalk.org/articles/article_20100320_a3_Getting_The_Message.html)等其他一些语言中，int 或 char 等类型也是对象，并且可以在它们上调用方法。这在理论上更正确，但当前的实现运行速度较慢。原始类型是纯度和性能之间的折衷。

在更需要的地方（可能为空值或与集合框架一起使用），Java 提供了包装类，如 java.lang.Integer 和类似的。

# jquery - jQuery CSS：动态更改类的属性

> ID：14477746
> 
> 赞同：28
> 
> 时间：2013-01-23T10:45:15.500
> 
> 标签：jquery, css

我想更改一个类的属性，在该类的其余 Web 应用程序生命周期（从使用开始直到用户退出 Web 应用程序）中使用该类的所有元素都会受到影响。

html:

```
<p class="myClass">
    What?
</p>
<p class="myClass">
    Now?
</p> 
```

CSS：

```
.myClass{
    background-color: #ffff00;    
} 
```

js：

```
$(".myClass").css("background-color", "#00FFFF");
$("p").last().after("<div class='myClass'>Now!</div>"); 
```

[这是一个示例](http://jsfiddle.net/marlberm2014/tRqBV/)

我想从示例中实现的是所有后续动态添加的 myClass 都将具有新属性。从 jsFiddle 中，您会看到下一个添加的元素没有新属性。

**更多的：**

我只是使用颜色作为基础，我将在更大范围内实现它，我想要完成的是动态更改将用于整个 Web 应用程序生命周期的类的属性。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-12-29T05:38:40.877

我只是偶然发现了这个问题，并认为我会插话，即使它已经快一岁了......

实际上，您可以在运行时动态修改 css 规则，就像任何其他 DOM 元素一样。我认为 jQuery 不支持它，因此您需要直接使用本机 DOM 元素。

您可以为样式表分配标题，以使它们更容易在 DOM 树中找到，但只要稍加考虑，通常不会太难找到您想要的规则。这是一个基于您的示例的 jsfiddle 的快速示例。

```
function getStyleRule(name) {
  for(var i=0; i<document.styleSheets.length; i++) {
    var ix, sheet = document.styleSheets[i];
    for (ix=0; ix<sheet.cssRules.length; ix++) {
        if (sheet.cssRules[ix].selectorText === name)
            return sheet.cssRules[ix].style;
    }
  }
return null;
}

var rule = getStyleRule('.myClass');
rule.backgroundColor = '#0ff';

$("p").last().after("<div class='myClass'>Now!</div>"); 
```

这是一个显示您的示例的小提琴，已更新以修改 css 规则本身：http: [//jsfiddle.net/93wGJ/5/](http://jsfiddle.net/93wGJ/5/)

有关样式表的 DOM 的更多信息，请查看[http://www.w3.org/TR/DOM-Level-2-Style/stylesheets.html](http://www.w3.org/TR/DOM-Level-2-Style/stylesheets.html)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-01-23T10:50:50.613

使用 css() 方法会更改现有元素的内联样式，您不能使用它来更改未来元素的样式。一种解决方法（我不太喜欢）是插入样式标签：

```
$( "<style>.myClass {background-color : #00FFFF}</style>" ).appendTo( "head" )
$("p").last().after("<div class='myClass'>Now!</div>"); 
```

[**小提琴**](http://jsfiddle.net/adeneo/tRqBV/3/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-23T10:51:40.427

尝试将颜色更改放入函数中：

```
function colorChange() {
     $(".myClass").css("background-color", "#00FFFF");
} 
```

并称其为“加载时”，在您使用 jQuery 更改某些内容之后。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T10:50:15.230

我会做类似下面的事情。它不会修改类，但可以满足您的需要。

```
$("body").addClass("updatedClass");
$("p").last().after("<div class='myClass'>Now!</div>"); 
```

和CSS：

```
.myClass{
    background-color: #ffff00;    
}
.updatedClass .myClass {
    background-color: #00FFFF;    
} 
```

[演示](http://jsfiddle.net/tRqBV/1/)

在任何情况下，如果您想为任何页面启用此功能，您应该在涉及服务器的情况下执行此操作。例如，通过将某个变量设置到会话中，然后根据该变量返回相应的 css。

或者您可以使用 cookie（检查[jquery cookies](https://github.com/carhartl/jquery-cookie)插件以便更简单地访问客户端的 cookie）并通过插入样式标签或通过在 jQuery.ready 回调中将相应的类添加到正文来修改类。

例如，使用 cookie（使用上面提到的插件）代码可能是这样的：

```
$("body").addClass("updatedClass");
$("p").last().after("<div class='myClass'>Now!</div>");
$.cookie('baseClass', 'updatedClass'); // set class for current session (this cookie will be deleted after user ends his session) 
```

而且，每个页面都应该有：

```
$(function() {
   if($.cookie('baseClass') != null) {
        $("body").addClass($.cookie('baseClass'));// or style tag could be added here instead.
   }
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T11:03:32.310

试试这个：http: [//jsfiddle.net/tRqBV/5/](http://jsfiddle.net/tRqBV/5/)

```
$(function () {
   $(".myClass").css("background", "green");
   $("p").last().after("<div class='myClass'>Now!</div>");

   $(document).ready(function () {
    $('div.myClass').css("background", $('p.myClass').first().css('background-color'));
   });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-16T04:22:41.773

我有同样的目标，我使用哈希 + ajax 来导航记录集，我希望轻松保存记录集的查看首选项。（如果用户喜欢使用链接导航记录，我希望链接可移动，或者如果他们选择不可见）。

[DaveInMaine 的](https://stackoverflow.com/a/20822504/3917091)回答很好，但我有点担心向后兼容性，所以我努力寻找一个简单的解决方案。

通过命名我的表，一个静态元素，，`recordTable`给它一个类，`LinksOn`我可以使用样式选择器，如`#recordTable.LinksOn a`和`#recordTable.LinksOff a`，将显示设置为无，并使用简单的 javascript

```
javascript:$('#recordTable').toggleClass('LinksOn').toggleClass('LinksOff'); 
```

通过将最后一个类存储在 cookie 中的变量中、通过 ajax 的服务器端会话或 localStorage 中，如果我愿意，我可以在会话之间保存它。

我可以用一个类（`#recordtable`and `#recordtable.on`，而不是`on`and `off`）来完成这一切，但我选择以这种方式存储它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-25T08:41:25.527

除了已经说过的，我认为修改 css 规则是没有用的，因为已经存在的元素不会被修改。

```
<style>
.myclass{
font-size:25px;
}
</style>

<div class="myclass">I am here </div> 
```

现在，如果您以某种方式修改类“myclass”本身，它不会影响“我在这里”，因为它不是动态绑定的。也许它会影响新创建的元素。

# c# - 在一个类中实现 IhttpHandler 和 IConnectionIdFactory(SignalR)

> ID：14477747
> 
> 赞同：0
> 
> 时间：2013-01-23T10:45:20.920
> 
> 标签：c#, asp.net, session, signalr, ihttphandler

我有一堂课`SignalRConnection`。在这里，我想为 signalR 生成一个 connectionId 。如果会话为空，我想要一个新的连接 ID，否则返回相同的连接。我尝试实现 IhttpHandler 以获取类中的上下文和连接 ID `IConnectionIdFactory`。我的代码是这样的：

```
>  public class SignalRConnection :  
    IHttpHandler,IConnectionIdFactory,IRequireSessionState                                
    {
        string conId;
        public bool IsReusable
        {
            get { return true; }
        }

        public void ProcessRequest(HttpContext context)
        {
            if (context.Session["activeuser_id"] != null)
            {
                conId = context.Session["activeuser_id"].ToString();
            }
            else
            {
                conId = Guid.NewGuid().ToString();
            }
        }
        public string CreateConnectionId(SignalR.Hosting.IRequest request)
        {
            return conId;
        }
        public string CreateConnectionId(SignalR.Hosting.IRequest request ,string test)
        {
            return conId;
        }
    } 
```

这里的问题`CreateConnectionId`是仅执行。我为 httphandler 配置了配置文件。我希望从 ProcessRequest 生成 conId 并将其`CreateConnectionId`提供`ConnectionId`给 SignalR Connection。可以获得它还是我走向错误的方向.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T18:25:38.320

最新版本的 SignalR 不再支持 IConnectionFactory。有关获得相同行为的更好方法的建议，请参阅[SignalR 1.0 beta 连接工厂](https://stackoverflow.com/questions/14350158/signalr-1-0-beta-connection-factory/14350859#14350859)。

# php - 注册成功后发送邮件

> ID：14477751
> 
> 赞同：0
> 
> 时间：2013-01-23T10:45:27.493
> 
> 标签：php, html, sql, http-headers

我正在尝试编写一个脚本，以便在他/她使用 PHP 成功注册后向用户发送邮件。尽管没有发送电子邮件，但用户在数据库中注册成功。这是我的代码：

```
<?php
function send_mail($id,$name,$email,$password)
{   
    $from='Admin <admin@mydomain.com>';
    $headers = '';
    $headers .= "From: $from\n";
    $headers .= "Reply-to: $from\n";
    $headers .= "Return-Path: $from\n";
    $headers .= "Message-ID: <" . md5(uniqid(time())) . "@" . $_SERVER['SERVER_NAME'] . ">\n";
    $headers .= "Date: " . date('r', time()) . "\n";
    $headers .= "MIME-Version: 1.0" . "\r\n";
    $headers .= "Content-type:text/html;charset=iso-8859-1" . "\r\n";

}
$subject = "Welcome!";
$message = "
<p></p><br>
Hi ".$name."<br>
Thank you for registering for the event.<br><br>
Your ID is ".$id."<br>
Login using your email id : ".$email." and,<br>
your password : ".$password."<br><br>
";

mail($email,$subject,$message,$headers);
?> 
```

在我的`register.php`脚本中，我包括：

```
send_mail($u_id,$u_name,$_POST['email'],$password) 
```

函数的参数有`id`(INT), `name`(VARCHAR), `email`(VARCHAR) & `password`(VARCHAR)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:49:08.087

我认为您的 mail() 函数在 send_mail() 函数之外。

改成，

```
function send_mail($id,$name,$email,$password)
{   
    $from='Admin <admin@mydomain.com>';
    $headers = '';
    $headers .= "From: $from\n";
    $headers .= "Reply-to: $from\n";
    $headers .= "Return-Path: $from\n";
    $headers .= "Message-ID: <" . md5(uniqid(time())) . "@" . $_SERVER['SERVER_NAME'] . ">\n";
    $headers .= "Date: " . date('r', time()) . "\n";
    $headers = "MIME-Version: 1.0" . "\r\n";
    $headers .= "Content-type:text/html;charset=iso-8859-1" . "\r\n";

    $subject = "Welcome!";
    $message = "
    <p></p><br>
    Hi ".$name."<br>
   Thank you for registering for the event.<br><br>
   Your ID is ".$id."<br>
   Login using your email id : ".$email." and,<br>
   your password : ".$password."<br><br>";

  mail($email,$subject,$message,$headers);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:53:32.207

在 mail 函数之后关闭函数循环而不是在 sub 之前关闭

# c# - 如何检查用户是否具有 MVC4 Simple 成员资格的几个不同角色中的任何一个？

> ID：14477757
> 
> 赞同：36
> 
> 时间：2013-01-23T10:45:47.180
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我知道检查用户是否在某个角色中的一个好方法是：

```
if (User.IsInRole("Admin"))
{

} 
```

但是，如何检查我的用户是否处于“作者”、“管理员”或“超级”角色之一？有没有办法在不**为每个角色编码“User.IsInRole”的情况下**做到这一点？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-23T10:55:53.957

没有内置的方法来检查用户是否具有多个角色，但是创建一个很好的扩展方法来为您处理它是非常简单的：

```
public static bool IsInAnyRole(this IPrincipal principal, params string[] roles)
{
    return roles.Any(principal.IsInRole);
} 
```

那么用法是：

```
if (User.IsInAnyRole("Admin", "Author", "SuperUser"))
{

} 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-01-23T10:53:09.413

**编辑：无需对每个角色进行编码，而是使用 LINQ 扩展方法，如下所示：**

```
private static bool IsInAnyRole(this IPrincipal user, List<string> roles)
{
    var userRoles = Roles.GetRolesForUser(user.Identity.Name);

    return userRoles.Any(u => roles.Contains(u));
} 
```

要使用，请执行以下操作：

```
var roles = new List<string> { "Admin", "Author", "Super" };

if (user.IsInAnyRole(roles))
{
    //do something
} 
```

或者没有扩展方法：

```
var roles = new List<string> { "Admin", "Author", "Super" };
var userRoles = Roles.GetRolesForUser(User.Identity.Name);

if (userRoles.Any(u => roles.Contains(u))
{
    //do something
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-31T16:48:30.420

我想详细说明一下mattytommo的答案，这是我使用的：

**扩展方法：**

```
public static bool IsInAnyRole(this IPrincipal user, string[] roles)
        {
            //Check if authenticated first (optional)
            if (!user.Identity.IsAuthenticated) return false;
            var userRoles = Roles.GetRolesForUser(user.Identity.Name);
            return userRoles.Any(roles.Contains);
        } 
```

**常数：**

```
public static class Role
{
    public const string Administrator = "Administrator";
    public const string Moderator = "Moderator";
} 
```

**用法：**

```
if (User.IsInAnyRole(new [] {Role.Administrator,Role.Moderator}))
{
    //Do stuff
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T13:46:30.087

你也可以使用

```
if(Roles.GetRolesForUser(model.UserName).Contains("Admin")){
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-19T15:14:53.657

请使用这种简单的方法：

```
@using Microsoft.AspNet.Identity

@if (Request.IsAuthenticated)
{
    if (User.IsInRole("Administrator") || User.IsInRole("Moderator"))
    {
        ... Your code here
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-02T20:21:45.990

以下解决方案应该有效：

```
 if (User.Roles.Count() != 0)
 {
   //User is not in any role
 } else
 {
   //User is in at least one role
 } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-09T15:00:32.880

就我而言，每个用户只有一个角色。所以我这样做了：

```
if (User.Roles.FirstOrDefault().RoleId == "7b433246-5881-4ace-bbaa-e5514191171c") {
    //Do something
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-27T18:21:17.430

我使用了下面的代码。就我而言，我有一个以分号分隔的字符串作为从 web.config 读取的参数。如果您传递一个列表，您可以轻松更改以下代码。

```
public class ActiveDirectoryGroup
{
    public static bool IsInAnyRole(string adRoles)
    {
        return adRoles.Split(Convert.ToChar(";")).Any(role => !string.IsNullOrEmpty(role.Trim()) && HttpContext.Current.User.IsInRole(role.Trim()));
        //If list is passed use below
        //return listParameter.Any(role => !string.IsNullOrEmpty(role.Trim()) && HttpContext.Current.User.IsInRole(role.Trim()));
    }
} 
```

在 web.config 中：

```
<appSettings>
  <add key="ADGroup" value="Domain\Admin;Domain\Supervisor;Domain\Manager;" />
</appSettings> 
```

我在页面加载中像下面这样使用它：

```
if (ActiveDirectoryGroup.IsInAnyRole(ConfigurationManager.AppSettings["ADGroup"]))
{
  //do something
} 
```

# c# - 如何使用 c# 向当前登录的用户发送通知消息

> ID：14477759
> 
> 赞同：0
> 
> 时间：2013-01-23T10:45:51.917
> 
> 标签：c#, sockets, browser, client-server

我们正在为当前登录的用户异步创建一个新的套接字。服务器将在适当的时候通知这个用户，然后可能会在不同的视图页面中的用户出现一个弹出消息。我们正在创建像这样的套接字：

```
Socket socket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);

socket.BeginReceive(buffer, 0, buffer.Length, 0,
                  new AsyncCallback(ReceiveNotification), socket);

private void ReceiveNotification(IAsyncResult ar)
{
    Socket socket = (Socket)ar.AsyncState;

    socket.EndReceive(ar);

    //Need to perform notification stuff here                 
    socket.Close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:52:31.233

我建议您尝试[https://github.com/SignalR](https://github.com/SignalR)，它允许通知所有打开的客户端并保持传输级别，因此您无需关心套接字等。

# android-ndk - 适用于 Objective C 的 Android NDK

> ID：14477768
> 
> 赞同：4
> 
> 时间：2013-01-23T10:46:14.510
> 
> 标签：android-ndk

我想使用 Android NDK 访问 Objective C 代码，可以吗？有什么方法可以访问现有的 Objective C 代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-20T08:40:03.597

现在，是的！

**更新**：合适的已经死了！

试试[Apportable SDK](http://www.apportable.com)或[Crystax SDK](http://www.crystax.net)。两者都基于 Android NDK。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-04-28T14:51:37.613

现在真的可以了。首先，谷歌有 llvm clang 工具链替代 GCC。Clang 支持现代 Objective-C 语法。其次，GNUstep已经正式发布了Android的buid工具。请检查这个 GitHub：[https ://github.com/gnustep/tools-android](https://github.com/gnustep/tools-android)

我已经尝试过了，它有效。你可以参考我的博客，虽然是中文的：[https ://www.jianshu.com/p/97f6d948f115](https://www.jianshu.com/p/97f6d948f115)

# sugarcrm - Sugar CRM - 如何为用户组自动设置相同的主页？

> ID：14477770
> 
> 赞同：1
> 
> 时间：2013-01-23T10:46:19.740
> 
> 标签：sugarcrm

我的客户使用 6.5 版本。他们将有 50 个用户。所有将有相同的主页。是否可以手动创建一个主页，然后为所有其他用户自动设置该页面？如果我们必须为每个用户创建相同的主页，那将是非常痛苦的。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T12:11:19.010

你可以使用这个完美的模块：

*   [http://www.sugarforge.org/projects/dashboardmanage/](http://www.sugarforge.org/projects/dashboardmanage/)
*   [http://www.sugarforge.org/news/post.php?forum_id=6297](http://www.sugarforge.org/news/post.php?forum_id=6297)

# iphone - 检查 NSMutableArray 中是否存在键？

> ID：14477772
> 
> 赞同：-2
> 
> 时间：2013-01-23T10:46:23.103
> 
> 标签：iphone, nsmutablearray, xcode4.5

我有一个这样的数组：

```
(
{

    City = SanFransisco;

    Latitude = "28.602704";

},
{
    City = SanFransisco;

    Latitude = "28.49379";

}, 
```

)

如何检查数组是否包含名称为 City 在 0 索引处的键？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T10:51:41.100

```
NSEnumerator *e = [array objectEnumerator];
id object;
while (object = [e nextObject]) {
  if([object objectForKey:@"City"] !=nil)
    return TRUE;
} 
```

如果没有迭代：

```
id object = [array objectAtIndex:0];
if([object objectForKey:@"City"] !=nil)
    return TRUE; 
```

# c# - 带有 c# 参考和链接的 excel 工作表副本

> ID：14477774
> 
> 赞同：0
> 
> 时间：2013-01-23T10:46:25.087
> 
> 标签：c#, .net, excel

我需要将特定工作表从源 excel 文件复制到使用 c# 新创建的 excel 工作表中，并且在你的帮助下我能够成功。但是，还有一个问题我找不到像这样的解决方案。

当所选的表被复制到程序创建的新Excel文件时，链接从单元格到源文件中的链接如源文件所示，`"C:[sample.xlsx]FinancingSchedule'!O266"`但我想将其更改为 `"C:newlycreated.xlsx]FinancingSchedule'!O266"`。

有没有办法做到这一点？提前致谢

还有前面的问题和代码：

[如何将选定的工作表从excel文件复制到程序创建的新excel文件中](https://stackoverflow.com/questions/14453843/how-to-copy-selected-sheets-from-excel-file-to-a-new-excel-file-created-by-progr)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T08:32:12.153

看到这个。我已经对代码进行了注释，以便您理解它不会有任何问题。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using Excel = Microsoft.Office.Interop.Excel; 

namespace WindowsFormsApplication5
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            Excel.Application xlexcel;
            Excel.Workbook xlWorkBook;
            Excel.Workbook xlWorkBookNew;
            Excel.Sheets worksheets;

            //~~> Path to save the new file
            String NewPath = "C:\\";

            //~~> name of the newly created file
            String NewFileName = "newlycreated";

            object misValue = System.Reflection.Missing.Value;

            xlexcel = new Excel.Application();

            xlexcel.Visible = true;

            //~~> Open a File
            xlWorkBook = xlexcel.Workbooks.Open("C:\\Sample.xlsx", 0, true, 5, "", "", true,
            Microsoft.Office.Interop.Excel.XlPlatform.xlWindows, "\t", false, false, 0, true, 1, 0);

            //~~> Specify the sheets you want to copy
            String[] selectedSheets = { "a", "c", "d" };

            //~~> Set your worksheets
            worksheets = xlWorkBook.Worksheets;

            //~~>Copy it. This will create a new Excel file with selected sheets
            ((Excel.Sheets)worksheets.get_Item(selectedSheets)).Copy();

            xlWorkBookNew = xlexcel.ActiveWorkbook;

            //~~> Save the new workbook
            xlWorkBookNew.SaveAs(NewPath + NewFileName + ".xlsx", Excel.XlFileFormat.xlOpenXMLWorkbook, 
            misValue, misValue, misValue, misValue, Excel.XlSaveAsAccessMode.xlExclusive,
            misValue, misValue, misValue, misValue, misValue);

            //~~> Loop through the sheets of the new workbook and replace "Sample.xlsx" with "newlycreated.xlsx"
            foreach (Excel.Worksheet xlsheet in xlWorkBookNew.Sheets) 
            {
                xlsheet.Cells.Replace("Sample.xlsx", NewFileName + ".xlsx", Excel.XlLookAt.xlWhole,
                Excel.XlSearchOrder.xlByRows, false, false, false);

            }

            //~~> Close and Cleanup
            xlWorkBookNew.Close(true, misValue, misValue);
            xlWorkBook.Close(false, misValue, misValue);
            xlexcel.Quit();

            releaseObject(worksheets);
            releaseObject(xlWorkBookNew);
            releaseObject(xlWorkBook);
            releaseObject(xlexcel);

        }

        private void releaseObject(object obj)
        {
            try
            {
                System.Runtime.InteropServices.Marshal.ReleaseComObject(obj);
                obj = null;
            }
            catch (Exception ex)
            {
                obj = null;
                MessageBox.Show("Exception Occured while releasing object " + ex.ToString());
            }
            finally
            {
                GC.Collect();
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:18:48.060

如果我没记错的话，您已经复制了一张工作表，并且在您新创建的工作表中，您可以按原样放置所有旧工作表数据。我的意思是，如果旧工作表数据是从 cellB1 开始显示的，那么新创建的工作表也会从 cellB1 开始其数据。如果是这种情况，您必须逐个单元格地读取旧工作表数据，并且必须明确告诉新工作表哪个单元格数据（来自旧工作表）进入哪个单元格（新创建的工作表）。复制工作表非常简单且速度更快，但是如果您确实需要更改新创建的工作表数据的位置，则需要牢记性能问题，尤其是在复制大量数据的情况下。如果您真的对这种方法感兴趣，我可以为您提供代码示例。问候，

# iphone - iOS - 当应用程序进入前台时，UITableView 的超级视图覆盖屏幕

> ID：14477775
> 
> 赞同：0
> 
> 时间：2013-01-23T10:46:28.890
> 
> 标签：iphone, ios, uitableview, superview

我有一个 UITableView 我正在应用一组过滤器。当我点击“过滤器”按钮时，过滤器从导航栏下方动画。我在这里做的是获取一个我加载的NIB，并将其添加到UITableView 的超级视图中。当我启动视图时，这非常有效。我能够显示和隐藏过滤器 NIB。但是，在通过点击主页按钮将应用程序发送到后台后，我再次启动应用程序以将其带到前台。现在，我加载并附加到 UITableView 的超级视图的 NIB 已经占据了屏幕。表格视图隐藏在此视图下方，通过隐藏过滤器 NIB，我可以看到一小部分命中。尽管我添加到 superview 的 NIB 高度为 75，但当它进入前景时，我可以看到它的框架现在的大小超过 400。有没有人知道为什么超级视图会发生这种情况？谢谢

**我的代码**

```
- (IBAction)filterButtonPressed:(UIBarButtonItem *)sender
{
    //If the filter view is displayed on screen then remove it.
    if(self.filterViewDisplayed == YES){
        [self animateFilterButtonsWithButtonsYOrigin:-75 tableViewYOrigin:-75];
        self.filterViewDisplayed = NO;

    }else {
        //Determine if we should load the FilterButtons XIB
        if(self.filterViewLoaded == NO) {

            self.filterViewLoaded = YES;
            [self.tableView.superview addSubview:self.activityFilter];
        }
        self.filterViewDisplayed = YES;
        //Set the delegate of the ActivityFilter to self so that we can handle callbacks.
        self.activityFilter.delegate = self;

        //Set the intial frame of the filter buttons to be -75 pixels off the top of the screen
        CGRect filterFrame = self.activityFilter.frame;
        filterFrame.origin.y = -75;
        self.activityFilter.frame = filterFrame;

        //Now animate the filter buttons to appear at origin 0.
        [self animateFilterButtonsWithButtonsYOrigin:0 tableViewYOrigin:75];
    }
}

- (void)animateFilterButtonsWithButtonsYOrigin:(CGFloat)yOrigin tableViewYOrigin:(CGFloat)tableViewYOrigin
{
    [UIView animateWithDuration:0.25
                     animations:^{
                         CGRect filterFrame = self.activityFilter.frame;
                         filterFrame.origin.y = yOrigin;
                         self.activityFilter.frame = filterFrame;
                         [self adjustTableViewOriginBy:tableViewYOrigin];
                     }];
}

-(void)adjustTableViewOriginBy:(CGFloat)yOrigin
{
    CGRect tableFrame = self.tableView.frame;
    tableFrame.origin.y += yOrigin;
    self.tableView.frame = tableFrame;
} 
```

**截图**

1.  过滤动画之前
2.  应用过滤器后
3.  从后台启动后 - 问题在这里。Superview 占据整个视图
4.  隐藏过滤器显示超级视图下方的表格视图

![过滤动画之前](../Images/856de9afef33e5138c204db71d80c2b6.png)

![应用过滤器后](../Images/98d6e9ffd5bc97717abbe1003eb483dc.png)

![从后台启动后](../Images/9622b7d41e4afb00942bde8c059d258b.png)

![隐藏过滤器在超级视图下方显示 UiTableView](../Images/e444f5300306f9c368119e5d0fabd687.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:25:45.513

我在我的应用程序中使用[ECSlidingViewController](https://github.com/edgecase/ECSlidingViewController)作为菜单。我发现这会截取顶级视图的屏幕截图，以便看起来像禁用与视图的交互。这样做的结果是顶级视图，即超级视图，包含我加载的 NIB 文件。这就是我所看到的。我已经通过禁用 ECSlidingViewController 的屏幕捕获功能来修复它。

# java - java.io.BufferedOutputStream 可以安全使用吗？

> ID：14477776
> 
> 赞同：19
> 
> 时间：2013-01-23T10:46:28.653
> 
> 标签：java

乍一看，这段代码似乎完全没问题

```
BufferedOutputStream bout = new BufferedOutputStream(new FileOutputStream("1.txt"));
byte[] bytes = new byte[4096];
bout.write(bytes);
bout.close(); 
```

但如果我们仔细看看，我们会看到它`close()`的实现如下

```
public void close() throws IOException {
    try {
      flush();
    } catch (IOException ignored) {
    }
    out.close();
} 
```

是否有可能由于`flush()`错误被忽略，数据可能会丢失而程序不会注意到它？没有提及`FilterOutputStream.close`（从哪里`BufferedOutputStream`继承`close()`）API 中的任何危险。

**更新：**为了模拟 close() 期间的 IO 错误，我将测试更改为写入闪存，在 bout.close() 之前添加了 5 秒睡眠，当测试处于睡眠状态时，我从 USB 中移除了闪存。测试无一例外地完成，但是当我插入 Flash 并检查它时 - 1.txt 不存在。

然后我覆盖了 close()

```
 BufferedOutputStream bout = new BufferedOutputStream(new FileOutputStream("g:/1.txt")) {
        @Override
        public void close() throws IOException {
            flush();
            super.close();
        }
    }; 
```

并再次运行测试并得到

```
Exception in thread "main" java.io.FileNotFoundException: g:\1.txt (The system cannot the specified path)
    at java.io.FileOutputStream.open(Native Method)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:212)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:104)
    at test.Test1.main(Test1.java:10) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T11:17:48.117

事实上，我认为调用`close`确实会让你丢失数据，因为这种潜力`IOException`被默默地忽略了（谁知道开发人员的想法是什么......）。

一个不错的选择，虽然它确实把精力放在了程序员的一边，是在`flush`之前显式调用`close`（正确处理潜在的`IOException`），就像@Tom 的评论中提到的那样，特别是在一个`try/finally`块中。

由于`AutoCloseable`对象的原因，Java7 中这个问题可能会进一步恶化，因为您不会显式调用该`close()`方法，而且这种变通方法更容易被忽略。

# objective-c - 我想要 HH:mm 格式的时间，来自可可中的字符串

> ID：14477782
> 
> 赞同：0
> 
> 时间：2013-01-23T10:46:47.063
> 
> 标签：objective-c, cocoa, nsdate, nsdateformatter

我想得到两个时间值，它们是这样的字符串格式：

例如： `NSString *fromTime=@"11:30"; NSString *toTime=@"12:30";`

我想要时间格式，我尝试使用 NSDateFormatter，

```
 `NSDateFormatter *df=[[NSDateFormatter alloc] init];
   [df setDateFormat:@"HH:mm"];
    NSDate *from=[df dateFromString:fromTime];
    NSLog(@"from %@",from);
    NSDate *to=[df dateFromString:toTime];
    NSLog(@"to %@",to);` 
```

输出：从 1970-01-01 06:00:00 +0000 到 1970-01-01 07:00:00 +0000

但我只想要时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:48:26.170

A`NSDate`是一个完整的日期对象，它总是包含一个完整的日期和时间。它还将返回以 GMT 作为时区的日期（`+0000`时间之后的部分）。

您可以忽略日期部分而只使用时间部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:32:14.890

你可以试试这个方法`stringFromDate`

```
 NSDateFormatter *df=[[NSDateFormatter alloc] init];
        [df setDateFormat:@"HH:mm"];
        NSDate *from=[df dateFromString:fromTime];
        NSLog(@"from %@",[df stringFromDate:from]);
        NSDate *to=[df dateFromString:toTime];
        NSLog(@"to %@",[df stringFromDate:to]); 
```

# javascript - 在javascript中获取附近的兄弟姐妹

> ID：14477791
> 
> 赞同：18
> 
> 时间：2013-01-23T10:47:25.443
> 
> 标签：javascript, dom, siblings

我有一个特定的 DIV 结构，在某处之间有一个锚标记。单击链接时，我需要获取`span`父元素中另一个元素的值`div`并执行某些操作（例如，提醒它）。

html是这样的：

```
...
<div id="div1">
  ...
  <span>This is reqd</span>
  ...
  <a href="#">Click Me </a>
  ...
</div>
... 
```

整个`div`页面在页面中重复了很多次。当我点击`a`我想提醒“这是reqd”时。

可以这样搜索 HTML 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T10:58:52.740

对于单个跨度元素，它应该很容易，。只需在单击链接时调用 myFunction(this) 并像这样操作 DOM：

```
function myFunction(currObj){
var parentofSelected = currObj.parentNode; // gives the parent DIV

var children = parentofSelected.childNodes;
for (var i=0; i < children.length; i++) {
    if (children[i].tagName = "span") {
        myValue= children[i].value;
        break;
    }
}
alert(myValue); // just to test

 } // end function 
```

希望这有效。它对我有用！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T10:49:48.210

由于`<span>`不是 that 的直接兄弟*，*`<a>`我们不能调用`.previousSibling`or `.previousElementSibling`。最好的解决方案可能是获取*父级*并查询`<span>`

```
document.getElementById( 'div1' ).getElementsByTagName( 'a' )[ 0 ].addEventListener('click', function() {
    alert( this.parentNode.getElementsByTagName( 'span' )[ 0 ].textContent );
}, false); 
```

*演示*：http: [//jsfiddle.net/cEBnD/](http://jsfiddle.net/cEBnD/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T10:55:21.057

# 更新：有和没有 jQuery 的解决方案

这个答案因展示 jQuery 示例而遭到如此多的反对，因此我决定添加更多带有 vanilla JavaScript 的示例，以便任何人都可以选择是否使用 jQuery。

通常，您可以`.previousSibling`在 vanilla JavaScript 中使用，请参阅：

*   [https://developer.mozilla.org/en-US/docs/Web/API/Node/previousSibling](https://developer.mozilla.org/en-US/docs/Web/API/Node/previousSibling)

您可以`.prev()`在 jQuery 中使用，请参阅：

*   [https://api.jquery.com/prev/](https://api.jquery.com/prev/)

但是请记住，当您不知道整个 DOM 的确切结构时，这些可能不适用于更复杂的情况。

下面是几个使用 jQuery 和 vanilla JavaScript 实现该目标的示例，适用于具有固定 DOM 结构的简单案例和使用类的更复杂案例。

## 没有课

对于最简单的 DOM 结构，您可能会在所有链接上放置事件侦听器并依赖 DOM 的隐式知识，但这可能不适用于更复杂的情况 - 对于那些请参阅下面的类示例。

### 使用 jQuery：

```
$('a').click(function () {
  alert( $(this).prev().text() );
  return false;
}); 
```

见[**演示**](https://jsbin.com/ricihox/edit?html,js,output)。

### 没有 jQuery：

```
document.querySelectorAll('a').forEach(link => {
  link.addEventListener('click', () => {
    alert(link.previousSibling.previousSibling.innerText);
  });
}); 
```

请注意，`previousSibling`必须使用两次，因为否则将使用 tha span 和 link 之间的空文本节点。

见[**演示**](https://jsbin.com/yumaset/edit?html,js,output)。

## 使用类

如果`span`不是紧接在您的`a`元素之前，那么您可能还希望做一些不同的事情，还添加一些类以确保您的代码不会破坏页面上的任何其他链接：

### 使用 jQuery：

```
$('a.link').click(function () {
  alert( $(this).parent().find('span.text').text() );
  return false;
}); 
```

见[**演示**](https://jsbin.com/pibafur/edit?html,js,output)。

### 没有 jQuery：

```
document.querySelectorAll('a.link').forEach(link => {
  link.addEventListener('click', () => {
    alert(link.parentNode.querySelector('span.text').innerText);
  });
}); 
```

见[**演示**](https://jsbin.com/naronuv/edit?html,js,output)。

上面的代码将点击处理程序绑定到每个`a`具有类“link”的元素，这将使用类“text”警告其兄弟`span`元素包含的文本。（当然，类名应该比这更具描述性。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-16T04:06:14.997

```
<html>
<body>
    <div id="div1">
        <span>This is required</span>
        <a href="#" onclick="myclick(this.parentNode)">Click Me</a>
    </div>
</body>
<script>
    function myclick(x){
        var y = x.querySelector("span").innerHTML;
        alert(y)
    }
</script>
</html> 
```

**跨度**的 insted你也可以给出**类名** ，例如，

```
<span class="classname">This is required</span>
x.querySelector(".classname").innerHTML 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-04-26T10:25:17.010

使用 jQuery：

```
$('#innerId').siblings() 
```

# c# - 将项目/故事发布到 Facebook 用户墙

> ID：14477792
> 
> 赞同：0
> 
> 时间：2013-01-23T10:47:27.343
> 
> 标签：c#, facebook-graph-api, facebook-c#-sdk

我正在尝试使用 Facebook Graph 自动将项目发布到 facebook 用户的提要。我的例子是我的应用程序的用户赚取积分。在 Facebook 开发中心，我创建了一个对象“Points”和一个动作“earn”

我发现了现有的问题[Facebook C# SDK v6 - How to post graph action？](https://stackoverflow.com/questions/9985677/facebook-c-sharp-sdk-v6-how-to-post-graph-action)并实现了以下代码，但没有出现任何帖子。（代码目前处于测试 ActionResult 中，但最终会被捆绑到业务逻辑中，并从 Azure 服务中调用，该服务会在获得积分时进行计算）

```
var fb = new FacebookClient("{auth-token}");
        dynamic parameters = new ExpandoObject();
        parameters.points = "{url}";
        parameters.explicitly_shared = true;

        try
        {
            dynamic result = fb.Post("me/my-app-name:earn", parameters);

            return Content(result.ToString());
        }
        catch(FacebookApiException ex)
        {
            return Content(ex.Message);
    } 
```

注意：我传入的 URL 具有正确的（我相信无论如何）OG 元标记，与我正在使用的对象和操作相关。

我得到以下响应（{integer-id} 是我要返回的 id）

**{"id":"{integer-id}"}**

然后我是否必须使用此 ID 再做一次“发布”才能真正让该项目出现在用户提要中？

非常欢迎任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:20:38.230

**重要提示：**并非每个已发布的操作都实际显示在用户时间轴或您朋友的新闻源上！事实上，大多数自定义操作都不是。

但是，如果您得到一个实际的 post-ID，这意味着该操作肯定是成功发布的！您可以在浏览器中查看已发布的内容：

[https://www.facebook.com/](https://www.facebook.com/) {user-id}/activity/{action-id}

其中 {action-id} = 您获得的 ID，{user-id} 是您的数字用户 ID 或用户名。

您还可以查看[https://www.facebook.com/](https://www.facebook.com/) {username}/allactivity 以查看**所有已发布的活动**。

此外，您应该考虑为您的用例使用 Scores-&Achievements-API，它们可能比使用自定义操作更好：

[https://developers.facebook.com/docs/howtos/scores/](https://developers.facebook.com/docs/howtos/scores/) https://developers.facebook.com/docs/howtos/achievements/

# wpf - 用户在 WPF 2010 中更改组合框项目时的事件是什么

> ID：14477794
> 
> 赞同：0
> 
> 时间：2013-01-23T10:47:43.703
> 
> 标签：wpf, combobox

我有一个填充的组合框。如果焦点从 ComboBox 的一项更改为另一项，我想显示 MessageBox。但是 ComboBox 一定不能关闭，即用户只是通过 ComboBox 中的项目，但用户没有按下鼠标左键:)。

例如，一个组合框有三个项目——“x1”、“x2”和“x3”。如果用户选择“x1”，那么我想显示 MessageBox.Show("x1")，如果用户选择“x2”，那么我想显示 MessageBox.Show("It is amazing!")

怎么做？任何建议将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:54:49.423

我使用名为“DropDownClosed”的组合框事件，因此我可以捕捉到用户的最新选择并阅读其选择。

# c++ - 大型 const 数组的初始化？

> ID：14477797
> 
> 赞同：4
> 
> 时间：2013-01-23T10:48:06.533
> 
> 标签：c++, c, arrays

无论如何都可以初始化一个大型 const 数组而不键入其中的每个元素，例如：

试图创建一个数组：

```
const double A[1000] = {1.0/1, 1.0/2, 1.0/3,...,1.0/1000}; 
```

用循环很容易做到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T10:53:44.583

如果它真的必须是 const 并且您有 1000 个不同的值，请编写一些儿童应用程序/脚本将其作为头文件吐出并防止您输入！如果需要，这为您提供了一种稍后修改整个数组初始化的简单方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T11:10:39.730

您可以为此使用 boost 的预处理器库：

您的主文件：

```
#include <boost/preprocessor.hpp>

const double A[1000] = {
#define BOOST_PP_ITERATION_LIMITS (0, 9)
#define BOOST_PP_FILENAME_1 "toplevel.hpp"
#include BOOST_PP_ITERATE()
}; 
```

文件`"toplevel.hpp"`：

```
#define ENUMERATE(z, i, data) 1.0 / (BOOST_PP_ITERATION() * 100 + i)

BOOST_PP_COMMA_IF(BOOST_PP_ITERATION()) BOOST_PP_ENUM(100, ENUMERATE, %%)

#undef ENUMERATE 
```

它的工作原理是连续十次包含“toplevel.hpp” `BOOST_PP_ITERATION()`，每次迭代扩展为 0、1、.. 9（0 和 9 来自`BOOST_PP_ITERATION_LIMITS`）。

`BOOST_PP_COMMA_IF()`如果参数非零，则生成逗号。

`BOOST_PP_ENUM()`将宏（`ENUMERATE`在本例中）扩展 100 次，`i`获取值 0 到 99（基于参数`100`）。

**编辑**

添加了解释并删除了多余`BOOST_PP_OR()`的 .

**编辑 2**

必须使用这种两阶段迭代（其中的文件和宏），因为 boost::preprocessor 中的大多数迭代方案都被限制为最大值。256 次迭代（存储在各种`BOOST_PP_LIMIT_*`宏中）。

也可以使用嵌套的 BOOST_PP_ENUM() 来完成，无需文件迭代。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T10:50:47.413

您可以创建一个指向 const char 的指针数组，这样您就可以在运行时使用带有循环的**new来初始化它们。**

否则，我不相信有办法。您可以继续并在头文件中手动初始化它，也可以剥离它的`const`状态。如果在编译时未初始化，编译器会抱怨未初始化`const`变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T11:11:56.753

如果我必须这样做，我可能会编写一个小程序来执行此操作：

```
for(i = 1; i <= 1000; i++)
{ 
    printf("1/%d.0, ", i);
    if(i % 10 == 0) printf("\n");
} 
```

我以为你可以用宏来做到这一点，我很确定它可以做到，但我现在不能让它工作。如果我能正常工作，我会回来的。

# maven - 使用 IntelliJ Idea、Maven、Tomcat 和 JRebel 部署 Exploded War

> ID：14477799
> 
> 赞同：3
> 
> 时间：2013-01-23T10:48:12.683
> 
> 标签：maven, web, intellij-idea, jrebel

我正在使用 IntelliJ Idea 12、Maven、JRebel 和 Tomcat 开发基于 Web 的应用程序。为了利用 JRebel，自动重新加载对 Spring bean 的更改，我使用了下面 Intellij 提供的爆炸式战争部署

![IntelliJ 爆战部署](../Images/7972341b96cfce1cfd4ad92ba1191698.png)

由于 Maven 模块，IntelliJ 完全遵循 Maven 的约定将 Java 文件编译到输出文件夹**(target/classes)**中，这与分解的 webapp 目录**(target/spring-mvc-showcase/webapp/web-inf/classes)**不同。因此，Tomcat 和 JRebel 无法重新加载这些新类的更改。

目前，我临时配置了 IntelliJ 的输出文件夹指向文件夹**WEB-INF/classes**以便可以重新加载更改。由于我不想打破 Maven 约定，谁能告诉我一个更优雅的解决方案？

```
target (Maven generated artifact directory)
  |
   -- classes (compiled)
  |
   -- spring-mvc-showcase (exploded webapp directory)
           |
            -- WEB-INF
                 |
                   -- classes 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:56:59.190

正确配置后，当您启动 Tomcat 时，您应该会看到如下内容：

```
[2013-01-23 15:39:12] JRebel: Directory '/home/xxx/workspace/xxx/trunk/target/classes' will be monitored for changes.
[2013-01-23 15:39:12] JRebel: Directory '/home/xxx/workspace/xxx/trunk/src/main/webapp' will be monitored for changes. 
```

然后我所做的是每次我改变一些东西，而不是运行 maven 包，我执行“制作项目”（在 IDEA 中），/target/classes 文件夹得到更新，配置将自动重新加载它的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T11:56:47.573

您是否安装了 IntelliJ IDEA JRebel 插件？它添加了一个动作“生成 rebel.xml”。这将生成一个 rebel.xml 文件，该文件最终应位于部署中的 WEB-INF/classes 中，并将类映射到 IDEA 编译它们的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-04T05:44:42.923

这是一个使用 IDEA、Jrebel 和 maven-tomcat 快速启动热部署的简单方法。 [IDEA 使用 JRebel 和 tomcat7-maven-plugin 热部署 Web 应用程序](http://www.windted.com/idea-hot-deploy-web-application-using-jrebel-and-tomcat7-maven-plugin/)

# php - 在 MySQL 中为多列排序

> ID：14477801
> 
> 赞同：2
> 
> 时间：2013-01-23T10:48:15.550
> 
> 标签：php, mysql

我的表中有四列`sale date 4`, `sale date 3`, `sale date 2`,`sale date`都是销售日期。在页面`sale date 4`中显示时，如果它不为空，我们将优先显示它，如果它是空的，则来`sale date 3`，然后`sale date 2`，然后`sale date`。

我的问题是在对结果进行排序时。

何时使用 order by 运行查询

```
order by 
isnull(`sale date 4`), trim(`sale date 4`) , 
isnull(`sale date 3`), trim(`sale date 3`) , 
isnull(`sale date 2`), trim(`sale date 2`) , 
isnull(`sale date`), trim(`sale date`) asc 
```

我得到的结果如下

```
**sale date 4** | **sale date 3**  | **sale date 2** | **sale date**
--------------------------------------------------------------------
2013-01-24      | 2013-01-24       | 2013-01-24      | 2013-01-24    
2013-01-31      | 2013-01-31       | 2013-01-31      | 2012-11-30    
2013-02-01      | 2013-02-01       | 2013-02-01      | 2013-02-01    
2013-03-08      | 2013-03-08       | 2013-03-08      | 2013-03-08    
----NULL----    | ----NULL----     | 2013-02-28      | 2012-11-02    
----NULL----    | ----NULL----     | ----NULL----    | 2013-02-28 
```

当我在视图中显示时，它将如下

```
1\. Sale date = 2013-01-24
2\. Sale date = 2013-01-31
3\. Sale date = 2013-02-01
4\. Sale date = 2013-03-08
5\. Sale date = 2013-02-28
6\. Sale date = 2013-02-28 
```

但我需要的是

```
1\. Sale date = 2013-01-24
2\. Sale date = 2013-01-31
3\. Sale date = 2013-02-01
4\. Sale date = 2013-02-28
5\. Sale date = 2013-02-28
6\. Sale date = 2013-03-08 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T10:57:07.010

`isnull(column)`简单地返回`true`or `false`。这导致前 4 个记录是前 4 个结果 ( `true > false`)，记录 5 和 6 是最后两个结果。最后两个结果然后按`sale date 4`（`NULL`在两列中）排序，直到`sale date 1`，但它们仍然是有序列表中的最后两个项目。

你想要做的可能是这样的：

```
.. ORDER BY IFNULL(`sale date 4`, IFNULL(`sale date 3`,
            IFNULL(`sale date 2`, `sale date 1`))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T11:05:03.130

您可以通过以下方式订购：

```
coalesce(`sale date 4`, `sale date 3`, `sale date 2`, `sale date`) 
```

[COALESCE](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)返回第一个非 NULL 值，例如。

```
coalesce(1,2,3,4)             returns 1
coalesce(null,2,3,4)          returns 2
...
coalesce(null,null,null,null) returns null 
```

# c# - 弹出警报

> ID：14477808
> 
> 赞同：-1
> 
> 时间：2013-01-23T10:48:41.607
> 
> 标签：c#, java, .net, powershell, vbscript

我将要求最终用户使用 `Outlook.exe /CleanAutoCompleteCache`Outlook 中的命令清理他们的缓存地址。我可以创建一个批处理文件并要求他们单击它。它可以工作，但在继续之前，他们应该收到弹出警报，运行此文件将从缓存中删除所有地址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:59:05.390

如果您需要`messagebox`，可以将其添加到您的 powershell 脚本中：

```
Add-Type -AssemblyName System.Windows.Forms 
$result = [System.Windows.Forms.MessageBox]::Show("if you run this file it will delete all addresses from your cache","Warning", 4)
if ($result -eq "Yes" )
{
  ...do work...
}
else
{
 ..do some other stuff..
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:04:22.050

所以这里有一个小 powershell 脚本：

```
$a = new-object -comobject wscript.shell 
$intAnswer = $a.popup("INFORM USER HERE", 0,"WARNING",1) 
If ($intAnswer -eq 6)
{ 
    //USER OK
} 
else 
{ 
    //USER CANCEL
} 
```

[在这里](http://gallery.technet.microsoft.com/scriptcenter/1a386b01-b1b8-4ac2-926c-a4986ac94fed)阅读

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T10:55:33.067

在 PowerShell 中，您可以创建一个自定义确认对话框，[如下所示](http://www.peetersonline.nl/2009/07/user-confirmation-in-powershell/)：

```
param([string]$title="Confirm",[string]$message="Are you sure?")
$choiceYes = New-Object System.Management.Automation.Host.ChoiceDescription "&Yes", "Answer Yes."
$choiceNo = New-Object System.Management.Automation.Host.ChoiceDescription "&No", "Answer No."
$options = [System.Management.Automation.Host.ChoiceDescription[]]($choiceYes, $choiceNo)
$result = $host.ui.PromptForChoice($title, $message, $options, 1)
switch ($result)
{
    0 
    {
        Return $true
    }

    1 
    {
        Return $false
    }
} 
```

# android - 将图像从列表视图加载到下一个活动

> ID：14477809
> 
> 赞同：5
> 
> 时间：2013-01-23T10:48:49.430
> 
> 标签：android, android-listview

我正在`Listview`使用 json 解析器显示图像和数据，

**但是，当我单击其中一个列表项图像时，下一个活动（即详细活动）中未显示。**

我正在使用以下代码来显示图像。任何人都可以引导我走上正确的道路吗？任何帮助都将不胜感激。

```
// Launching new screen on Selecting Single ListItem
    list.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String title = ((TextView) view.findViewById(R.id.title)).getText().toString();
            String date = ((TextView) view.findViewById(R.id.date)).getText().toString();
            String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
            String content = ((TextView) view.findViewById(R.id.content)).getText().toString();
             // getting JSON string from URL
            JSONObject json = jParser.getJSONFromUrl(URL);
             try {
                 posts = json.getJSONArray(KEY_POSTS);

    // looping through all song nodes <song>
            for(int i = 0; i < posts.length(); i++){
                JSONObject c = posts.getJSONObject(i);
                // Storing each json item in variable

                String url = null;
                String slug = null;
                try {
                JSONArray atta = c.getJSONArray("attachments");
                for(int j = 0; j < atta.length(); j++){
                    JSONObject d = atta.getJSONObject(j);

                    slug = d.getString(KEY_SLUG);

                    JSONObject images = d.getJSONObject(KEY_IMAGES);

                    JSONObject thumbnail = images.getJSONObject(KEY_THUMB_URL);
                    url = thumbnail.getString(KEY_URL);

                }
                } catch (Exception e) {
                    e.printStackTrace();

                }

            // Starting new intent
            Intent in = new Intent(getApplicationContext(),SampleDesp.class);
            in.putExtra(KEY_TITLE, title);
            in.putExtra(KEY_DATE, date);
            in.putExtra(KEY_NAME, name);
            in.putExtra(KEY_CONTENT, content);
            in.putExtra(KEY_URL, url);      
            startActivity(in);

        }

             }catch (JSONException e) {
                    e.printStackTrace();

                    }
        }

    });   

} 
```

}

在**Singlemenuitem.java中**

```
 // getting intent data
        Intent in = getIntent();
        final String url1 = in.getStringExtra(KEY_URL);

        ImageView imgv = (ImageView) findViewById(R.id.imgdesc);
        ImageLoader imageLoader = new ImageLoader(getApplicationContext());
        imageLoader.DisplayImage(url1, imgv);

        // Get JSON values from previous intent
        final String title = in.getStringExtra(TAG_TITLE);
        String date = in.getStringExtra(TAG_DATE);
        String name = in.getStringExtra(TAG_NAME);
        final String content = in.getStringExtra(TAG_CONTENT);

        // Displaying all values on the screen
        TextView lblName = (TextView) findViewById(R.id.name_label);
        TextView lblCost = (TextView) findViewById(R.id.email_label);
        TextView lblDesc = (TextView) findViewById(R.id.mobile_label);
        TextView lblCont = (TextView) findViewById(R.id.content_label);

        lblName.setText(title);
        lblCost.setText(date);
        lblDesc.setText(name);
        lblCont.setText(content); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T04:14:51.583

谢谢大家的帮助和支持，只需在 MainActivity 类中添加以下代码

```
 // Launching new screen on Selecting Single ListItem
    list.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            HashMap<String, String> map = songsList.get(position);

            Intent in = new Intent(MainActivity.this, SampleDesp.class);
            in.putExtra(KEY_TITLE, map.get(KEY_TITLE));
            in.putExtra(KEY_DATE, map.get(KEY_DATE));                         
            in.putExtra(KEY_NAME, map.get(KEY_NAME));
            in.putExtra(KEY_CONTENT, map.get(KEY_CONTENT));
            in.putExtra(KEY_URL, map.get(KEY_URL));

            startActivity(in);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:57:38.600

首先尝试在这里初始化 url

```
 String url = null;// here
  in.putExtra(KEY_URL, url); 
```

由于这个空值，您在下一个活动中没有得到任何东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T11:10:43.353

我可能不确定，更改为 BitMap 并将 tat BitMap 值传递给另一个活动

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T10:57:30.883

不确定您想从哪里获取网址，但这无济于事：-

字符串 url = null;

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-13T17:37:37.847

**在这里，您可以使用以下代码将图像从列表视图加载到下一个活动：**

```
listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView<?> parent, View view,
                                        int position, long id) {
                    Intent intent = new Intent(getApplicationContext(), DetailActivity.class);8
                    String pic =array.get(position).getImage();
                    intent.putExtra("Photo", pic);

                    startActivity(intent);
                }

            }); 
```

**这里 DetailActivity.java 类：**

```
public class DetailActivity extends AppCompatActivity {

    ImageLoader imageLoader=AppController.getmInstance().getmImageLoader();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_detail);

        NetworkImageView imageView= (NetworkImageView) findViewById(R.id.image_view_detail);
        imageView.setImageUrl(getIntent().getExtras().getString("Photo"),imageLoader);
    }
} 
```

谢谢

# ruby - “__send__”和“instance_variable_get / instance_variable_set”方法有什么区别？

> ID：14477810
> 
> 赞同：3
> 
> 时间：2013-01-23T10:48:57.463
> 
> 标签：ruby, metaprogramming, instance-variables

一切都在问题中说明。这两种方法都可以通过使用它们的代号来访问（读/写）实例变量：

```
__send__

instance_variable_set
instance_variable_get 
```

有人可以通过例子来解释吗？

当我们用抽象来探索元编程时，它有时会融化我们的大脑。

=== 编辑 ===

好的，如果我的大脑再次融化，我将答案作为示例供以后使用。

**类声明**：

```
class Person

  attr_accessor :first_name, :last_name

  def initialize(first_name, last_name)
    @first_name = first_name
    @last_name = last_name
  end

  def full_name
    @first_name + ' ' + @last_name
  end

end 
```

**初始化**：

```
actor = Person.new('Donald', "Duck")
=> #<Person:0xa245554 @first_name="Donald", @last_name="Duck"> 
```

**发送（读取）**的用法：****

 **```
actor.send('first_name')
=> "Donald"

actor.send(:first_name)
=> "Donald"

actor.send("last_name")
=> "Duck"

actor.send(:last_name)
=> "Duck"

actor.send('full_name')
=> "Donald Duck"

actor.send(:full_name)
=> "Donald Duck" 
```

**instance_variable_get 的用法**（读取）

```
actor.instance_variable_get('@first_name')
=> "Donald"

actor.instance_variable_get(:@first_name)
=> "Donald"

actor.instance_variable_get('@last_name')
=> "Duck"

actor.instance_variable_get(:@last_name)
=> "Duck" 
```

**发送（写入）**的用法：****

 **```
actor.send('first_name=', 'Daisy')

actor.send('full_name')
=> "Daisy Duck"

actor.send(:first_name=, "Fifi")

actor.send("full_name")
=> "Fifi Duck" 
```

**instance_variable_set 的用法**（写入）

```
actor.instance_variable_set('@first_name', 'Pluto')
actor.send("full_name")
=> "Pluto Duck"

actor.instance_variable_set(:@last_name, 'Dog')
actor.send(:full_name)
=> "Pluto Dog" 
```

**instance_variable_get 的错误用法**（读取）

```
actor.instance_variable_get('full_name')
#NameError: `full_name' is not allowed as an instance variable name

actor.instance_variable_get('last_name')
#NameError: `last_name' is not allowed as an instance variable name 
```

我对 Rails ActiveRecord 及其关联感到困惑。

感谢您的回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:58:00.790

`__send__`允许您通过名称/符号*调用方法*
`instance_variable_*`，允许您设置/获取*实例变量*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T11:47:40.573

`__send__`方法调用在你的类中定义的方法，如果没有定义方法，那么你不能使用方法，`send`但是方法会改变实例变量的值，而不需要任何封装方法（如 getter 或 setter）。`instance_variable_get``set`

`__send__`如果您想调用由符号标识的方法并在需要时传递任何参数，则使用。

例如

```
class Test
  def sayHello(*args)
    "Hello " + args.join(' ')
  end
end
k = Test.new
k.send :sayHello, "readers"   #=> "Hello readers" 
```

`instance_variable_get`返回给定实例变量的值，如果未设置实例变量，则返回 nil。使用此方法无需封装

例如

```
class Test
  def initialize(p1)
    @a = p1
  end
end
test = Test.new('animal')
test.instance_variable_get(:@a)    #=> "animal" 
```

`instance_variable_set`用于设置实例变量的值，无需封装方法。例如

```
class Test
  def initialize(p1)
    @a = p1
  end
end
test = Test.new('animal')
test.instance_variable_set(:@a, 'animal') 
```****

# iphone - 通过蓝牙连接两个 iOS 设备的用法示例？（客户端/服务器代码）

> ID：14477813
> 
> 赞同：1
> 
> 时间：2013-01-23T10:49:06.500
> 
> 标签：iphone, objective-c, sockets, bluetooth, dns-sd

我不想使用 GameKit。我正在尝试使用低级方法使用 dns_sd.h 和 DNSServiceRegister 等方法[来](https://stackoverflow.com/questions/3844189/bonjour-over-bluetooth-without-gamekit/8273661)建立和维护连接。但是，我找到了一个名为 HHServices 的包装器......老实说，此时欢迎使用 dns_sd 的低级答案或使用 HHServices 的高级答案。

这是[HHServices](https://github.com/tolo/HHServices)。这是[GCDAsyncSocket](https://github.com/robbiehanson/CocoaAsyncSocket)。

这是我到目前为止的代码。我能够成功发布 HHService 和 GCDAsyncSocket，并开始在另一台设备上浏览 HHServices，但没有建立连接。有什么帮助吗？:D

# 服务器端

### 这是我发布 HHService 的地方：

```
//....
NSUInteger serverPort = 19997;
HHServicePublisher *publisher = [[HHServicePublisher alloc] initWithName:@"MyDisplayName" type:@"_myexampleservice._tcp." domain:@"local." txtData:nil port:serverPort];

GCDAsyncSocket *listenSocket = [[GCDAsyncSocket alloc] initWithDelegate:self delegateQueue:dispatch_get_main_queue()];

NSError *error = nil;
if (![listenSocket acceptOnPort:serverPort error:&error])
{
    [self alert:@"Error starting GCDAsyncsocket"];
}

publisher.delegate = self;
if(![publisher beginPublish])
{
    [self alert:@"Error publishing HHService"];
}
else
{
    [self alert:@"Successfully published HHService"];
} 
```

### 这是我查看客户端是否连接的地方：

```
- (void)socket:(GCDAsyncSocket *)sender didAcceptNewSocket:(GCDAsyncSocket *)newSocket
{
    [self alert:@"didAcceptNewSocket!"];
} 
```

* * *

# 客户端

### 我开始浏览的地方

```
 HHServiceBrowser *browser = [[HHServiceBrowser alloc] initWithType:@"_myexampleservice._tcp." domain:@"local."];
    browser.delegate = self;
    if(![browser beginBrowse])
    {
        [self alert:@"Couldn't start browsing"];
    }
    else
    {
        [self alert:@"Successfully started browsing"];
    } 
```

### 用于查找已发布 HHService 的回调：

```
- (void) serviceBrowser:(HHServiceBrowser*)serviceBrowser didFindService:(HHService*)service moreComing:(BOOL)moreComing {
    [self alert:@"Found a service! "];
} 
```

有人可以阐明我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:55:32.700

原来我没有保留我的`browser`对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:09:32.203

HHServices 只处理发现。建立联系取决于您。您需要解析服务，然后打开一个套接字，如 HHServices 示例中所示。

# macos - MAC Lion 上的内核套接字

> ID：14477816
> 
> 赞同：0
> 
> 时间：2013-01-23T10:49:14.250
> 
> 标签：macos, sockets, osx-lion, osx-snow-leopard, osx-mountain-lion

我有一个在 Mac Snow Leopard OS 中运行良好的现有代码。但是，相同的代码在创建套接字时会引发异常。这是相同的片段 -

`int gSocket = socket(PF_SYSTEM, SOCK_STREAM, SYSPROTO_CONTROL);`

此后，如果是否定的，我会检查 gSocket 的状态，我会抛出异常。此代码不会在 MAC Snow Leopard 上引发异常，但是，如果我在 Lion OS 上运行相同代码，则会引发异常。

我用谷歌搜索并找到了与沙盒相关的内容。但是，我认为这与我的应用程序沙盒无关，因为我没有在 Appstore 中发布它。

任何想法为什么内核的套接字没有在 Lion 上打开？

谢谢，
维杰库马尔多格拉

# c# - 'ListView' 已注册的属性

> ID：14477817
> 
> 赞同：5
> 
> 时间：2013-01-23T10:49:20.170
> 
> 标签：c#, wpf, mvvm, visual-studio-2012

我有这个代码：

```
using System.Collections;
using System.Windows;
using System.Windows.Controls;

public static class SelectedItems
{
    private static readonly DependencyProperty SelectedItemsBehaviorProperty = DependencyProperty.RegisterAttached(
        "SelectedItemsBehavior",
        typeof(SelectedItemsBehavior),
        typeof(ListView),
        null);

    public static readonly DependencyProperty ItemsProperty = DependencyProperty.RegisterAttached(
        "Items",
        typeof(IList),
        typeof(SelectedItems),
        new PropertyMetadata(null, ItemsPropertyChanged));

    public static void SetItems(ListView listView, IList list)
    {
        listView.SetValue(ItemsProperty, list);
    }

    public static IList GetItems(ListView listView)
    {
        return listView.GetValue(ItemsProperty) as IList;
    }

    private static void ItemsPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var target = d as ListView;
        if (target != null)
        {
            CreateBehavior(target, e.NewValue as IList);
        }
    }

    private static void CreateBehavior(ListView target, IList list)
    {
        var behavior = target.GetValue(SelectedItemsBehaviorProperty) as SelectedItemsBehavior;
        if (behavior == null)
        {
            behavior = new SelectedItemsBehavior(target, list);
            target.SetValue(SelectedItemsBehaviorProperty, behavior);
        }
    }
}

public class SelectedItemsBehavior
{
    private readonly ListView _listView;
    private readonly IList _boundList;

    public SelectedItemsBehavior(ListView listView, IList boundList)
    {
        _boundList = boundList;
        _listView = listView;
        _listView.SelectionChanged += OnSelectionChanged;
    }

    private void OnSelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        _boundList.Clear();

        foreach (var item in _listView.SelectedItems)
        {
            _boundList.Add(item);
        }
    }
} 
```

XAML：

```
 <ListView SelectionMode="Extended" ItemsSource="{Binding Computers}" Views:SelectedItems.Items="{Binding SelectedComputers}" BorderBrush="Transparent" Height="100" VerticalAlignment="Top">
        <ListView.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal"  HorizontalAlignment="Left" VerticalAlignment="Top"  />
            </ItemsPanelTemplate>
        </ListView.ItemsPanel>
        <ListView.Background>
            <SolidColorBrush Color="Black" />
        </ListView.Background>
    </ListView> 
```

我有一个错误

> “SelectedItemsBehaviour”属性已由“Listview”注册。

我已经在两个不同的地方使用了这个代码，`ListViews`并且都给出了这个错误。

为什么我得到它，一切都是静态的。我正在使用 MVVM 设计模式。

谢谢，

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-23T11:02:20.323

[RegisterAttached](http://msdn.microsoft.com/en-us/library/ms597497.aspx) ( )的第三个参数`ownerType`必须始终是声明属性的类，即`SelectedItems`此处。

一种常见的误解是，这种类型是属性的潜在“目标”类型。

```
private static readonly DependencyProperty SelectedItemsBehaviorProperty = DependencyProperty.RegisterAttached(
    "SelectedItemsBehavior",
    typeof(SelectedItemsBehavior),
    typeof(SelectedItems), // here
    null); 
```

# javascript - 我可以用 jQuery 选择#id > #id 吗？

> ID：14477818
> 
> 赞同：17
> 
> 时间：2013-01-23T10:49:21.180
> 
> 标签：javascript, jquery, html, css-selectors

我可以用 jQuery 选择#id > #id 吗？

我有这个结构

```
<div id="slide1">
    <div id="slide_body">
    some content
    </div>
</div>

<div id="slide2">
    <div id="slide_body">
    some content
    </div>
</div> 
```

有没有办法使用 jquery 只选择 #slide1 中的 #slide_body ？

或者是将id附加到每个body div的唯一解决方案，例如

```
<div id="slide2">
    <div id="slide_2_slide_body">
    some content
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-23T10:58:24.677

第一个问题的答案：

> 我可以用 jQuery 选择#id > #id 吗？

您实际上可以执行该确切的语法`$('#slide1 > #slidebody')`。该`>`字符表示直接后代，称为子选择器 ( [http://api.jquery.com/child-selector/](http://api.jquery.com/child-selector/) )。如果元素可能不是直接后代而是嵌套在其他东西中，则可以省略`>`and 以 . 结尾`$('#slide1 #slidebody')`。

至于 HTML 片段，大多数都正确地提到了在不同元素上具有相同的 id 并被视为无效文档是不好的。

[http://jsfiddle.net/infiniteloops/LzFAr/](http://jsfiddle.net/infiniteloops/LzFAr/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-23T10:51:15.740

您不能在一个文档中使用唯一 ID

> 此属性为元素分配名称。此名称在文档中必须是唯一的。

[http://www.w3.org/TR/html401/struct/global.html#h-7.5.2](http://www.w3.org/TR/html401/struct/global.html#h-7.5.2)

在您的示例中，您可以使用类“slide_body”

```
<div id="slide1">
    <div class="slide_body">
    some content
    </div>
</div> 
```

然后你可以用`#slide1 .slide_body`or选择它`$("#slide1").find('.slide_body')`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-23T11:04:55.863

采用

```
$('#slide1 > #slide_body') 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-23T10:52:05.410

您的标记无效。不能有两个具有相同 ID 的元素。出于这个原因，答案是否定的。改用类。

```
<div id="slide1">
    <div class="slide_body">
    some content
    </div>
</div>

<div id="slide2">
    <div class="slide_body">
    some content
    </div>
</div>

$('#slide2>.slide_body'); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-12-11T23:29:10.800

同样的事情发生在我身上，我正在寻找解决方案，事实是这里发布的没有一个对我有用，我找到了对我有用的东西 ($('#container').find('#child' ））：

```
var div = $('#container').find('#child4').html();
alert(div);
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="container">
  Container:
  <div id="child1">Child Div 1</div>
  <div id="child2">Child Div 2</div>
  <div id="child3">Child Div 3</div>
  <div id="child4">Child Div 4</div>
  <div id="child5">Child Div 5</div>
</div>
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-23T10:51:52.743

ID 在页面上应该是唯一的。改用类：

```
<div id="slide1">
    <div class="slide_body">
        some content
    </div>
</div> 
```

然后`#slide1 .slide_body`作为选择器。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-23T10:52:01.050

HTML 元素的 id 应该是唯一的。将幻灯片体变成一个类。

**HTML**

```
<div id="slide1">
    <div class="slide_body">
    some content
    </div>
</div>

<div id="slide2">
    <div class="slide_body">
    some content
    </div>
</div> 
```

**选择器**

```
$("#slide1 .slide_body") 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-23T10:52:19.587

您可以这样选择，但是它完全是多余的，因为`id`属性在页面中应该是唯一的。考虑到这一点，您当前的代码无效。您应该`class`在需要对标识符进行分组的地方使用：

```
<div id="slide1">
    <div class="slide_body">
        some content
    </div>
</div>

<div id="slide2">
    <div class="slide_body">
        some content
    </div>
</div> 
```

然后，您将使用：

```
var $slideContent = $('#slide1 .slide_body'); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-23T10:53:06.500

首先，拥有非唯一 ID 并不是一个很好的决定。尽管如此，您可以在 jQuery 函数中传递上下文：

`$("#slide_body", "#slide1")`

# c++ - 返回 NOT NULL 指针的正确方法是什么

> ID：14477820
> 
> 赞同：7
> 
> 时间：2013-01-23T10:49:23.477
> 
> 标签：c++, pointers

我在我的 C++ 程序中使用了一个外部 C 库，并且该库使用了一个回调函数，该函数必须返回`void*`. 库检查返回值是否不为 NULL，这意味着成功。

那么，告诉它一切都很好的最好方法是什么？

我用：

```
return reinterpret_cast<void*>(1); 
```

但它看起来很丑...

编辑：感谢您的回复，我会留下来：

```
static int success;
return &success; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-23T10:52:40.523

```
static int dummy;
return &dummy; 
```

严格来说，`static`这可能不是必需的，但是返回一个指向超出范围的本地的指针感觉有点粗俗。

**编辑：**注意@sharptooth 的评论。严格来说，`static` *是*必须的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T10:50:56.877

使用`reinterpret_cast`尽可能干净。问题是从文字中制作此类指针会`int`产生未定义的行为——标准禁止使用非空指针且未指向正确分配的对象。符合标准的方法是拥有一些变量（也许文件范围变量是最方便的）并返回其地址。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-23T11:15:43.913

我可能会写这样的东西：

```
return const_cast<void*>(""); // non-null pointer, referand doesn't matter 
```

也许回调函数有一个指针输入保证不为空。如果是这样，那么您可以将其退回。

`reinterpret_cast<void*>(1)`*应该*看起来很难看，因为它不能保证工作。大多数架构不介意你这样做，但是

*   该标准实际上并不能保证您可以使用不是任何对象地址的指针值（或空指针，或数组的末端）。
*   该标准不保证它`reinterpret_cast<void*>(1)`不是空指针，它是实现定义的。

我怀疑是否真的存在您的函数意外返回 null 的实现，但这是*允许*的。想象一个假设的实现，其中 CPU 自己的寻址是 4 位而不是 8 位。当然，实现者仍然会选择`CHAR_BIT == 8`，并且 C++ 中的所有指针都是 8 位对齐的。然后，通过保持位模式不变，实现可以合法且相当合理地从指针映射到整数，并通过将最后一位归零来从整数映射到指针。或者，它可以右移和左移 1 位。该标准要求指针 -> 整数 -> 指针恢复原始值，但不要求整数 -> 指针 -> 整数这样做。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-23T10:51:00.877

怎么样

```
return this; 
```

作为返回保证为非NULL的有效指针的简单方法？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-23T11:13:14.897

如果是我，我会使用：

```
return (void*)1; 
```

简单而美丽。

我更喜欢值 1（正如您在问题中使用的那样）而不是任何其他值，因为其他值可以以某种方式解释（这不好）。如果您只想返回一个非零值（非空指针），那么最好使用一个不能从中提取任何特殊内容的值。

# android - 如何在 View view1 下方获取 View view2，但将其重叠？

> ID：14477823
> 
> 赞同：0
> 
> 时间：2013-01-23T10:49:29.467
> 
> 标签：android, layout

我希望我的布局在`background`视图下方有一个`header`视图，但视图与`header`视图重叠`background`了几个像素，因为它具有一定的透明度。

我知道 z 顺序是根据 XML 文件中视图的顺序确定的，所以我把,属性放在`header`下面。`background``android:layout_above="@id/background"`

但是由于我将两个维度都设置为`background`to `match_parent`，所以`header`不可见。

我怎样才能达到我想要的？

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <RelativeLayout
        android:id="@+id/background"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginTop="-5dp"
        android:background="@drawable/bg" >
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/header"
        android:layout_width="match_parent"
        android:layout_height="100dp"
        android:layout_above="@id/background"
        android:background="@drawable/bg_header" >
    </RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:55:02.367

给你

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<RelativeLayout
    android:id="@+id/background"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_below="@+id/header"
    android:layout_marginTop="-50dp"
    android:background="#80ff0000" >
</RelativeLayout>

<RelativeLayout
    android:id="@+id/header"
    android:layout_width="match_parent"
    android:layout_height="100dp"
    android:background="#8000ff00" >
</RelativeLayout>
</RelativeLayout> 
```

# ruby - 无法在 Ubuntu 12.10 上安装 pg gem

> ID：14477825
> 
> 赞同：3
> 
> 时间：2013-01-23T10:49:33.773
> 
> 标签：ruby, gem, postgresql-9.1, pg, ubuntu-12.10

我正在使用 Ubuntu 12.10 64 位，并且安装了以下软件包：

```
dpkg --get-selections | grep postgre 
```

输出：

```
postgresql
postgresql-9.1
postgresql-client
postgresql-client-9.1
postgresql-client-common
postgresql-common
postgresql-contrib
postgresql-contrib-9.1
postgresql-server-dev-9.1
postgresql-server-dev-all
libpq-dev
libpq5 
```

`rvm 1.17.9`

`ruby 1.9.3p362 (2012-12-25 revision 38607) [x86_64-linux]`

我无法安装 pg gem 我收到以下错误：

```
ERROR:  Error installing pg:
    ERROR: Failed to build gem native extension.

        /home/vedarthk/.rvm/rubies/ruby-1.9.3-p362/bin/ruby extconf.rb
checking for pg_config... yes
Using config values from /usr/bin/pg_config
checking for libpq-fe.h... yes
checking for libpq/libpq-fs.h... yes
checking for pg_config_manual.h... yes
checking for PQconnectdb() in -lpq... no
checking for PQconnectdb() in -llibpq... no
checking for PQconnectdb() in -lms/libpq... no
Can't find the PostgreSQL client library (libpq) 
```

我也尝试了以下命令，但输出与上面相同：

```
gem install pg -- --with-pg-include=/usr/include/postgresql/libpq --with-pg-lib=/usr/lib/postgresql/9.1/lib

gem install pg -- --with-pg-include=/usr/include/postgresql --with-pg-lib=/usr/lib/postgresql/9.1/lib 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-06T19:21:18.290

尝试安装 PostgreSQL 开发头文件：

sudo apt-get install libpq-dev

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T02:56:11.947

试试 - $ sudo apt-get install ruby​​-dev

[sudo gem install pg 没有](https://stackoverflow.com/questions/4564117/sudo-gem-install-pg-wont-work)那个解决方案，它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-31T23:42:43.177

我在 RHEL 6.4 上遇到了类似的问题，以下对我有用：

```
gem install /opt/redmine/vendor/cache/pg-0.18.4.gem --local -- --with-pg-dir=/usr/pgsql-9.4/ 
```

我从他们自己的仓库设置 PostgreSQL。

# ios - iPad应用程序被拒绝，“未能及时启动”崩溃

> ID：14477827
> 
> 赞同：0
> 
> 时间：2013-01-23T10:49:40.763
> 
> 标签：ios, ipad, app-store

我的 iPad 应用程序已被应用程序商店拒绝，因为它在启动应用程序时在 Wi-Fi 和蜂窝网络上都崩溃了。

这个错误是什么意思？

```
Application Specific Information:
com.selangorbn.FM failed to launch in time 
```

这是崩溃报告：

```
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2013-01-22 14:49:06.040 -0800
OS Version:      iOS 6.0.1 (10A523)
Report Version:  104

Exception Type:  00000020
Exception Codes: 0x000000008badf00d
Highlighted Thread:  0

Application Specific Information:
com.selangorbn.FM failed to launch in time

Elapsed total CPU time (seconds): 5.450 (user 5.450, system 0.000), 14% CPU 
Elapsed application CPU time (seconds): 0.359, 1% CPU

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0:
0   libsystem_kernel.dylib          0x306a7eb4 0x306a7000 + 3764
1   libsystem_kernel.dylib          0x306a8048 0x306a7000 + 4168
2   CoreFoundation                  0x31763040 0x316cc000 + 618560
3   CoreFoundation                  0x31761d9e 0x316cc000 + 613790
4   CoreFoundation                  0x316d4eb8 0x316cc000 + 36536
5   CoreFoundation                  0x316d4d44 0x316cc000 + 36164
6   CFNetwork                       0x36a3943e 0x369e6000 + 341054
7   Foundation                      0x37e069ba 0x37d31000 + 874938
8   SelangorbnFm                    0x000fe2c2 0xfb000 + 12994
9   UIKit                           0x374bd588 0x3749b000 + 140680
10  UIKit                           0x374fdd6c 0x3749b000 + 404844
11  UIKit                           0x374f9ae0 0x3749b000 + 387808
12  UIKit                           0x3753b1c4 0x3749b000 + 655812
13  SelangorbnFm                    0x000fd874 0xfb000 + 10356
14  UIKit                           0x374feacc 0x3749b000 + 408268
15  UIKit                           0x374fe656 0x3749b000 + 407126
16  UIKit                           0x374f683e 0x3749b000 + 374846
17  UIKit                           0x3749ec34 0x3749b000 + 15412
18  UIKit                           0x3749e6c8 0x3749b000 + 14024
19  UIKit                           0x3749e116 0x3749b000 + 12566
20  GraphicsServices                0x34c1a5a0 0x34c14000 + 26016
21  GraphicsServices                0x34c1a1ce 0x34c14000 + 25038
22  CoreFoundation                  0x31763170 0x316cc000 + 618864
23  CoreFoundation                  0x31763112 0x316cc000 + 618770
24  CoreFoundation                  0x31761f94 0x316cc000 + 614292
25  CoreFoundation                  0x316d4eb8 0x316cc000 + 36536
26  CoreFoundation                  0x316d4d44 0x316cc000 + 36164
27  UIKit                           0x374f5478 0x3749b000 + 369784
28  UIKit                           0x374f22f4 0x3749b000 + 357108
29  SelangorbnFm                    0x000fd35c 0xfb000 + 9052
30  SelangorbnFm                    0x000fc7fc 0xfb000 + 6140

Thread 1:
0   libsystem_kernel.dylib          0x306b8d98 0x306a7000 + 73112
1   libsystem_c.dylib               0x383e6cf6 0x383e0000 + 27894
2   libsystem_c.dylib               0x383e6a12 0x383e0000 + 27154
3   libsystem_c.dylib               0x383e68a0 0x383e0000 + 26784

Thread 2 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 2:
0   libsystem_kernel.dylib          0x306a8648 0x306a7000 + 5704
1   libdispatch.dylib               0x397c4974 0x397bc000 + 35188
2   libdispatch.dylib               0x397c4654 0x397bc000 + 34388

Thread 3 name:  WebThread
Thread 3:
0   libsystem_kernel.dylib          0x306a7eb4 0x306a7000 + 3764
1   libsystem_kernel.dylib          0x306a8048 0x306a7000 + 4168
2   CoreFoundation                  0x31763040 0x316cc000 + 618560
3   CoreFoundation                  0x31761d9e 0x316cc000 + 613790
4   CoreFoundation                  0x316d4eb8 0x316cc000 + 36536
5   CoreFoundation                  0x316d4d44 0x316cc000 + 36164
6   WebCore                         0x32631a40 0x32627000 + 43584
7   libsystem_c.dylib               0x383f130e 0x383e0000 + 70414
8   libsystem_c.dylib               0x383f11d4 0x383e0000 + 70100

Thread 4:
0   libsystem_kernel.dylib          0x306b86a4 0x306a7000 + 71332
1   libsystem_c.dylib               0x383f63ce 0x383e0000 + 91086
2   Foundation                      0x37d85458 0x37d31000 + 345176
3   SelangorbnFm                    0x00114ef0 0xfb000 + 106224
4   Foundation                      0x37de2678 0x37d31000 + 726648
5   libsystem_c.dylib               0x383f130e 0x383e0000 + 70414
6   libsystem_c.dylib               0x383f11d4 0x383e0000 + 70100

Thread 5 name:  com.apple.NSURLConnectionLoader
Thread 5:
0   libsystem_kernel.dylib          0x306a7eb4 0x306a7000 + 3764
1   libsystem_kernel.dylib          0x306a8048 0x306a7000 + 4168
2   CoreFoundation                  0x31763040 0x316cc000 + 618560
3   CoreFoundation                  0x31761d9e 0x316cc000 + 613790
4   CoreFoundation                  0x316d4eb8 0x316cc000 + 36536
5   CoreFoundation                  0x316d4d44 0x316cc000 + 36164
6   Foundation                      0x37d5ebc8 0x37d31000 + 187336
7   Foundation                      0x37de2678 0x37d31000 + 726648
8   libsystem_c.dylib               0x383f130e 0x383e0000 + 70414
9   libsystem_c.dylib               0x383f11d4 0x383e0000 + 70100

Thread 6 name:  com.apple.CFSocket.private
Thread 6:
0   libsystem_kernel.dylib          0x306b8594 0x306a7000 + 71060
1   CoreFoundation                  0x317671f2 0x316cc000 + 635378
2   libsystem_c.dylib               0x383f130e 0x383e0000 + 70414
3   libsystem_c.dylib               0x383f11d4 0x383e0000 + 70100

Unknown thread crashed with unknown flavor: 5, state_count: 1
Binary Images:
   0xfb000 -   0x126fff +SelangorbnFm armv7  <b7f595d0a6813ff49f1cf455a8d0db90> /var/mobile/Applications/509DADFE-E86D-4B3E-BD5F-E2B103E6FE5E/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:16:50.897

> 最好的应用程序可以快速启动，让用户尽快与应用程序交互。为了提供优质的用户体验，您应该定期评估并努力改善应用程序的启动时间。如果在启动时必须完成大量工作，请考虑在辅助线程上执行该工作并直观地指示活动。 [http://developer.apple.com/library/ios/#qa/qa1592/_index.html](http://developer.apple.com/library/ios/#qa/qa1592/_index.html)

应用程序启动时间受时间限制。您必须查看`AppDelegate.m` 最有可能的`- (void)applicationDidFinishLaunching:(UIApplication *)application`方法是您开始一些很长的操作。例如：

AppDelegate.m

```
- (void)applicationDidFinishLaunching:(UIApplication *)application
{
  ...
  [[SomeProvider sharedOnlineDataProvider] initializeEngine]; // << this may be very long
  ...
} 
```

所以，你可以尝试使用

```
[[SomeProvider sharedOnlineDataProvider] performSelectorInBackground:@selector(initializeEngine) withObject:nil]; 
```

显然，`initializeEngine`必须是线程安全的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:01:25.303

看起来您的应用程序需要很长时间。当你搜索异常类型时，你会发现：http: [//developer.apple.com/library/ios/#qa/qa1693/_index.html](http://developer.apple.com/library/ios/#qa/qa1693/_index.html)

你在 AppDelegate didFinishLaunchingWithOptions 中做了很多事情吗？如果是这样，那么在后台线程中执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T11:07:04.513

我认为您需要将 dSYM 文件链接到崩溃日志并找出导致此崩溃的原因。可以参考[这篇文章](https://stackoverflow.com/questions/681042/symbolicatecrash)了解如何使用 symbolicatecrash 将崩溃日志改回方法调用栈。

# php - Jstree 表定义

> ID：14477830
> 
> 赞同：1
> 
> 时间：2013-01-23T10:49:45.657
> 
> 标签：php, jquery, mysql, jstree

我已经在我的应用程序中集成了 Jstree，现在我想了解该表中的不同列：

```
CREATE TABLE IF NOT EXISTS `tree` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `parent_id` bigint(20) unsigned NOT NULL,
  `position` bigint(20) unsigned NOT NULL,
  `left` bigint(20) unsigned NOT NULL,
  `right` bigint(20) unsigned NOT NULL,
  `level` bigint(20) unsigned NOT NULL,
  `title` text CHARACTER SET utf8 COLLATE utf8_unicode_ci,
  `type` varchar(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=13 ; 
```

这是网站提供的默认表格。

现在如果想添加一个节点，我怎么知道左、右和水平的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:01:09.083

这看起来像是`Adjacency list`一个`nested sets`.

`Nested sets`是在关系数据库中存储树的更好方法。很难解释你必须在[这里](http://en.wikipedia.org/wiki/Nested_set_model)和[这里](http://www.fliquidstudios.com/2008/12/23/nested-set-in-mysql/)看的原理。

使用时`nested sets`不需要`parent_id`. 我认为 jstree 提供了一个示例表，您可以在其中选择自己使用的技术。

在数据库中存储树的另一种方法是[Closure Table](http://karwin.blogspot.de/2010/03/rendering-trees-with-closure-tables.html)。这是我个人的最爱。它简单但功能强大。但是你在网上几乎找不到任何关于它的信息。

# android - 我无法在运行 WMware 的 Ubuntu 上的 Android 设备上进行调试

> ID：14477831
> 
> 赞同：1
> 
> 时间：2013-01-23T10:49:46.200
> 
> 标签：android, ubuntu, vmware

我在这里而不是在 AskUbuntu 中问这个问题，因为我希望我能找到一些已经遇到这个问题的 Android 开发人员。

我使用在 Windows7 64 位上运行的 WMWare Player 5.0.1 上运行的“Ubuntu 10.04.4 LTS-Linux 2.6.32-45-generic x86_64”。

我遇到的问题是，当我插入我的 Android 设备时，我收到错误“USB 设备的连接不成功。驱动程序错误”。

Windows 上的驱动程序已安装并且可以正常工作。我可以在 Windows 上调试。

该`lsusb`命令不会列出连接的设备。

我用谷歌搜索了一下，我发现问题可能是 VMWare 播放器还不支持 USB3。我没有找到解决这个问题的方法。我试图卸载 USB3 驱动程序，但结果是 USB 端口停止工作。有人设法修复它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:16:43.897

很多时候，这可能是由于您的设备没有驱动程序以及 sdk 管理器中的 USB 驱动程序造成的。我使用 Windows，这听起来像我遇到的类似问题。此外，如果您可以从包含 adb.exe 文件的文件夹中运行命令提示符，请尝试键入“adb devices”以查看是否看到您的设备

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:10:34.017

据我所知，目前唯一可用的解决方案是：

1）回到没有USB3的旧机器

2) 使用较新的Windows8机器（支持VMWare支持的驱动）

3) 如果新的英特尔驱动程序与您的机器兼容，请安装它们。

另请参阅[VMWare 论坛](http://communities.vmware.com/message/2138646)

# javascript - 检查函数中的浏览器类型在 Javascript 中不起作用

> ID：14477835
> 
> 赞同：0
> 
> 时间：2013-01-23T10:49:55.020
> 
> 标签：javascript, ie8-browser-mode

在我的页面中，我使用了带有条件的 javascript 函数。如果浏览器是 IE8，那么样式将是这样的，或者在 else 中使用样式。但是，如果我使用以下条件，则该功能不起作用。任何人请帮我解决这个问题

```
function addnew(type)
{
type=parseInt(type)+1;
 var isOpera, isIE = false;
  if(typeof(window.opera) != 'undefined'){isOpera = true;}
  if(!isOpera && navigator.userAgent.indexOf('Internet Explorer')){isIE = true);
 var mydiv = document.createElement("div");
    mydiv.setAttribute("id",name5);
 if(!IE){
    mydiv.setAttribute("style","width:110px;height:80px;background-image:url(images/transparent.png);float:left;text-align:center;border:1px solid #ccc;");
    }
    else
        {
                mydiv.style.setAttribute('cssText', "width:110px;height:80px;background-image:url(images/transparent.png);float:left;text-align:center;border:1px solid #ccc;");
        }
}

                <input id="addchoice" type=button value="Add New Entry" onclick="addnew(document.forms['addpoll']['choicecount'].value);"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:52:28.137

有一种更简洁的方法来定位特定版本的 Internet Explorer，即[条件注释。](http://www.quirksmode.org/css/condcom.html)

例子：

```
<!--[if IE 8]>
<style type="text/css">

 .my-div-class-here { 
     width:110px;
     height:80px;
    ... }

</style>
<![endif]--> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:26:47.063

```
function addnew(type)
{
var isOpera, isIE = false;
       if (/MSIE (\d+\.\d+);/.test(navigator.userAgent)){ //test for MSIE x.x;
  var ieversion=new Number(RegExp.$1) // capture x.x portion and store as a number
   if (ieversion==8)
    isIE = true;
   }
if(isIE)
{
//code for IE
}

else
{
//code for other browsers
} 
```

# xml - VB.Net Xpath 错误：表达式必须计算为节点集。

> ID：14477837
> 
> 赞同：1
> 
> 时间：2013-01-23T10:49:58.717
> 
> 标签：xml, vb.net, xpath

我有节点名称作为数值的 xml 数据，我需要检索具有该名称的节点。

当我使用下面的代码时，它会抛出异常“表达式必须评估为节点集”。

代码：

```
`lSampleXml.SelectSingleNode("//" & lClass.Name)` 
```

其中 lClass.Name 是一个数值 = 6556 转换为字符串。

请帮助摆脱异常。

示例 XML：

```
<Root>
   <6556>
     <Data> </Data>
     <Text> </Text>
   </6556>
   <1223>
   </1223>
   <Phone>
   </Phone>
</Root> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T11:11:48.757

好吧，XML 名称（如元素名称或属性名称）不能以数字开头，因此`<6556>...</6556>`不可能具有格式良好的 XML，因此路径表达式`//6556`作为选择该名称元素的方式也没有意义。

因此，在尝试解析标记样本时应该会出错。

# cordova - Android - Phonegap，从 apk 中提取代码

> ID：14477838
> 
> 赞同：5
> 
> 时间：2013-01-23T10:50:00.643
> 
> 标签：cordova

我是 Phonegap 开发的新手。我开发了一个应用程序，不幸的是我丢失了整个代码。但幸运的是我有apk文件。任何人都可以帮我从apk文件中提取我的代码（PhoneGap - Andriod）提前谢谢。

-维努

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T13:16:24.040

是的你可以。如果您复制 .apk 文件以使其具有 .zip 扩展名，您应该能够像任何普通的 zip 存档一样解压缩它。从中您将能够检索您的 assest 和 res 文件夹以及您的 AndroidManifest.xml。

如果您编写了大量的 Java 代码，那么您需要将 classes.dex 文件反编译回 Java。这是一个很好的SO问题，涵盖了它：

[将 DEX 反编译为 Java 源代码](https://stackoverflow.com/questions/1249973/decompiling-dex-into-java-sourcecode)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-03T12:54:20.760

如果你试图反编译别人的 apk，那是被禁止的。

如果不是**;)**，假设您编译了您的 apk 并删除了项目并且您需要检索它，您可以使用[Apktool](http://ibotpeaches.github.io/Apktool/)来帮助您：

*   下载[Apktool](http://ibotpeaches.github.io/Apktool/) （确保你有[node.js](https://nodejs.org/en/download/)）
*   安装 apktool 后打开 node.js
*   找到目标 apk 所在的目录（使用 node.js）
*   在 node.js 上找到它后键入：`apktool d yourApk.apk`
*   要构建项目类型：`apktool b yourProjectFolder`

希望对您有所帮助，如果您需要帮助，可以发表评论，我很乐意为您提供帮助！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-10T13:02:26.350

这是一个更简单的方法： http: [//www.decompileandroid.com/](http://www.decompileandroid.com/)这个网站使用程序 apktool 和 dex2jar，但你只需要上传你的 .apk 文件。祝你好运

# java - 如何使用 Jquery 将多个值传递给 servlet

> ID：14477845
> 
> 赞同：0
> 
> 时间：2013-01-23T10:50:03.803
> 
> 标签：java, jquery, html, servlets

我有一个 Html 表单，我需要使用 jquery 将值传递给 servlet，它会验证信息并返回结果。但是当我尝试使用 jQuery 传递数据时。显示收到的空值的 servlet。

```
<div class="ulogin">
<h2>Login</h2>
<div id="error"></div>
        <form action="Login" method="post" id="spsignin">
        <input type="text" name="uname" class="text validate[required]" id="name" placeholder="Username"/>
        <input type="password" name="pass" class="text validate[required]" id="password" placeholder="Password"/>
        <input type="submit" value="" id="memberlogin"/>
        </form>
</div> 
```

我的 javascript 文件是

```
 $(document).ready(function() {

//Stops the submit request
$("#spsignin").submit(function(e){
       e.preventDefault();
});

//checks for the button click event
$("#memberlogin").click(function(e){

        //get the form data and then serialize that
        dataString = $("#spsignin").serialize();
        dataString1 = $("#spsignin").serialize();

        var uname = $("input#name").val();
        var pass = $("input#password").val();
         $.ajax({
            type: "POST",
            url: "Login",
            data:'uname=' +encodeURIComponent(uname) &'pass=' + encodeURIComponent(pass),
            dataType: "json",

            //if received a response from the server
            success: function( data, textStatus, jqXHR) {
                 if(data.success)
                 {
                     $("#error").html("<div><b>success!</b></div>"+data);
                  }
                 //display error message
                 else {
                     $("#error").html("<div><b>Information is Invalid!</b></div>"+data);
                 }
            },

            //If there was no resonse from the server
            error: function(jqXHR, textStatus, errorThrown){
                 console.log("Something really bad happened " + textStatus);
                 $("#error").html(jqXHR.responseText);
            },

            //capture the request before it was sent to server
            beforeSend: function(jqXHR, settings){
                 //disable the button until we get the response
                $('#memberlogin').attr("disabled", true);
            },

            complete: function(jqXHR, textStatus){
                //enable the button
                $('#memberlogin').attr("disabled", false);
            }

        });       
 });
}); 
```

servlet 是

```
 package skypark;

  import java.io.IOException;
  import java.io.PrintWriter;
  import java.sql.Connection;
  import java.sql.DriverManager;
  import java.sql.PreparedStatement;
  import java.sql.ResultSet;
  import java.sql.SQLException;

  import javax.servlet.ServletException;
  import javax.servlet.annotation.WebServlet;
  import javax.servlet.http.HttpServlet;
  import javax.servlet.http.HttpServletRequest;
  import javax.servlet.http.HttpServletResponse;

 /**
 * Servlet implementation class Login
  */
 @WebServlet("/Login")
  public class Login extends HttpServlet {
private static final long serialVersionUID = 1L;
Boolean success=true;

/**
 * @see HttpServlet#HttpServlet()
 */
public Login() {
    super();
    // TODO Auto-generated constructor stub
}

public static Connection prepareConnection()throws ClassNotFoundException,SQLException
{
    String dcn="oracle.jdbc.OracleDriver";
    String url="jdbc:oracle:thin:@//localhost:1521/skypark";
    String usname="system";
    String pass="tiger";
    Class.forName(dcn);
    return DriverManager.getConnection(url,usname,pass);
}
/**
 * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
 */
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException
{
    String uname,pass;
    response.setContentType("text/html");
    PrintWriter out=response.getWriter();
    response.setContentType("text/html");
    response.setHeader("Cache-control", "no-cache, no-store");
    response.setHeader("Pragma", "no-cache");
    response.setHeader("Expires", "-1");
    response.setHeader("Access-Control-Allow-Origin", "*");
    response.setHeader("Access-Control-Allow-Methods", "POST");
    response.setHeader("Access-Control-Allow-Headers", "Content-Type");
    response.setHeader("Access-Control-Max-Age", "86400");

     uname=request.getParameter("uname");
    pass=request.getParameter("pass");
    Boolean suc;
    try {
        suc = check(uname,pass);
            out.println(suc);
        } catch (ClassNotFoundException | SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    out.flush();
      out.close();
}
   public Boolean check(String uname,String pass) throws SQLException, ClassNotFoundException
   {
 ResultSet rs = null;
 int i=0;
 Connection con=prepareConnection();
 String Query="select uname,email from passmanager where pass=?";
 PreparedStatement ps=con.prepareStatement(Query);

  try
  {
    ps.setString(1,pass);
    rs=ps.executeQuery();

        while(rs.next())
        {
            if (uname.equalsIgnoreCase(rs.getString("uname")) || uname.equalsIgnoreCase(rs.getString("email"))) 
            {
    rs.close();                                                              
            ps.close();                                                            
            ps = null;               con.close();                                                            
         con = null;  
        success=true;
        i=1;
       break;
    }
    }
  }
  catch(Exception e)
      {
      System.out.println(e);
      }

  if(i==0)
  {
      success=false;
  }
return success;

}
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException
{
    doPost(request,response);
}
  } 
```

我认为错误与jquery有关。请任何人帮助我克服这个...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:02:50.917

问题在于这一行：

`data:'uname=' +encodeURIComponent(uname) &'pass=' + encodeURIComponent(pass)`

应该是

`data: 'uname='+encodeURIComponent(uname)+'&'+'pass='+encodeURIComponent(pass)`

`+`注意后面的缺失`encodeURIComponent(uname)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:08:21.877

好吧，这个问题已经解决了，但是除了一个一个传递值之外，你可以一次提交整个表单，看看这个。

```
<script>
    // wait for the DOM to be loaded
    $(document).ready(function() 
    {
        // bind 'myForm' and provide a simple callback function
       $("#tempForm").ajaxForm({
       url:'../calling action or servlet',
       type:'post',
       beforeSend:function()
       {
         alert("perform action before making the ajax call like showing spinner image");
       },
       success:function(e){
        alert("data is"+e);
            alert("now do whatever you want with the data");
       }
       });
    });
</script> 
```

你的形式会是这样的

```
<form id="tempForm" enctype="multipart/form-data">
<input type="text" name="" id="" />
<input type="text" name="" id="" />
<input type="file" name="" id="" />
</form> 
```

你可以在这里找到插件[输入链接描述](http://www.malsup.com/jquery/form/#download)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T11:01:45.470

我在您的 Ajax 脚本上发现了一个小错误，您的 & 符号不是字符串的一部分：

```
data:'uname=' + encodeURIComponent(uname) &'pass=' + encodeURIComponent(pass), 
```

应该

```
data:'uname=' + encodeURIComponent(uname) + '&pass=' + encodeURIComponent(pass), 
```

如果这不能解决问题，那么您可以检查以下几件事：

*   检查您的 html 中只有一个 id 为“name”的输入元素
*   检查您的请求是否转到了您的 servlet 映射上的正确 servlet
*   检查您没有任何过滤器拦截和修改/重定向请求

除此之外，您的代码看起来不错

# android - 如何删除 setAdapterList 视图

> ID：14477846
> 
> 赞同：0
> 
> 时间：2013-01-23T10:50:08.210
> 
> 标签：android, android-adapterview

我正在尝试实施列表。这是 start.xml 文件，它有一个文本框 i ，我正在输入任何单词，并且将打开一个包含该单词的单词列表：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/FrameLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<EditText
    android:id="@+id/start_edit"
    android:layout_width="match_parent"
    android:layout_height="50dp"
    android:layout_gravity="top|left"
    android:ems="10"
    android:hint="Type to search"
    android:paddingLeft="50dp" >

    <requestFocus />
</EditText> 
```

对于列表视图，我正在使用这个 ListView.xml 文件：

```
<ImageView
    android:id="@+id/image_list"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:background="@drawable/abacus_thumbnail"
    android:scaleType="centerCrop" />

<ImageView
    android:id="@+id/imageView_color_list"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:background="@drawable/blue_thumbnail" />

<TextView
    android:id="@+id/title_list"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/image_list"
    android:layout_marginLeft="20dp"
    android:layout_toRightOf="@+id/image_list"
    android:gravity="center"
    android:text="Abacus"
    android:textColor="#000000"
    android:textSize="30sp"
    android:textStyle="bold"
    android:typeface="sans" />

<TextView
    android:id="@+id/textView_meaning_list"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/title_list"
    android:layout_below="@+id/title_list"
    android:layout_marginTop="10dp"
    android:text="TextView"
    android:textColor="#000000"
    android:textSize="25sp" /> 
```

当我的应用程序启动时，我正在使用 EfficientAdapetr 将一个视图从一个视图转换为另一个视图，EditBox 将为空且背景图像。当输入一个单词时，我在列表项上有 ClickListner，打开一个列表，当单击项目时，这个词将打开。现在的问题是，当我单击列表项时，背景会填充单词但 listView 不会删除。在项目上单击我想用这个词打开我的背景。 **这是我的代码：**

```
 listAdapter = new EfficientAdapter2(this);
    setListAdapter(listAdapter);

private class EfficientAdapter2 extends BaseAdapter implements Filterable,OnItemClickListener {

    private Context context;
    LayoutInflater inflater;

    public EfficientAdapter2(Context context) {

        this.context = context;
        inflater = LayoutInflater.from(context);

    }

    public int getCount() {

        //  if(SearchWordString.isEmpty()==false)
        //  {

        return SearchWordString.size();
        /// }

        //return 0;
    }

    public Object getItem(int position) {

        return position;
    }

    public long getItemId(int position) {

        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        viewHolder2 holder;
        if (convertView == null) {
            convertView = inflater.inflate(R.layout.ListView, null);
            holder = new viewHolder2();
        //  Log.i("View","is Null");
            convertView.setTag(holder);

        } else {

            //Log.i("View","is not Null");
            holder = (viewHolder2) convertView.getTag();
        }

        holder.word = (TextView) convertView.findViewById(R.id.title_list);
        holder.meaning = (TextView) convertView
                .findViewById(R.id.textView_meaning_list);
        holder.image = (ImageView) convertView
                .findViewById(R.id.image_list);
        holder.image_color = (ImageView) convertView
                .findViewById(R.id.imageView_color_list);
        holder.cell = (RelativeLayout) convertView
                .findViewById(R.id.RelativeLayout_list);

        try { 
```

“这里的功能”

```
 } catch (IOException e) {

            e.printStackTrace();
        }

        return convertView;
    } 
```

**这是onItemClick：**

protected void onListItemClick(ListView l, View v, int position, long id) {//////// super.onListItemClick(l, v, position, id);

```
 //Log.i("Position",""+position);
    changeEverything(position);// here i am converting my ListView to
                                           Start.xml but its on happening

    motherOfIndex = position;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:00:55.210

首先调试您的应用程序并检查天气`onListItemClick()`事件触发。如果您的 listView 中有可点击的项目，这不会触发。如果是这种情况，您必须为`isClickable=false`ListView.xml 文件中的所有项目设置。为了关闭 listView，您必须将其可见性设置为`View.GONE`

但是，如果您想在 EditText 上键入内容时弹出建议列表，这不是最佳做法。您可以使用[`AutoCompleteTextView`](http://developer.android.com/reference/android/widget/AutoCompleteTextView.html)并直接将您的 ListView 适配器设置为它。他们将为您创建一个 listView 并将自动将设置的选定文本处理到 AutoCompleteTextView 并将关闭 listView

# mysql - 将计数存储在变量中、插入行以及在 MySQL 中使用 IF 语句

> ID：14477857
> 
> 赞同：1
> 
> 时间：2013-01-23T10:50:50.630
> 
> 标签：mysql, stored-procedures

您可以在 MySQL 存储过程中使用 IF 语句来控制所采取的操作。语法如下：

```
 IF condition THEN ... do something ... END IF; 
```

IF 语句中的条件可以类似于 CASE 语句中的条件。有关更多信息，请查看 MySQL 的网站。

您还可以在执行插入后检索自动增量 ID。只需使用以下查询：

```
 SELECT LAST_INSERT_ID() into artist_id; 
```

对于这个项目，创建一个名为 AddAlbum 的新过程。它至少需要两个参数 - NameOfArtist 和 AlbumName（就像在上一个项目中一样）。

您的过程需要检查 Artists 表以查看 NameOfArtist 是否存在。如果它不存在，则需要添加一个新行。以下是步骤：

1.  使用 Artists 上的 COUNT 聚合来查看 NameOfArtist 存在多少行。将计数存储在名为 artist_count 的变量中。
2.  如果 Artist_count 为零，则在 Artists 中插入一个新行。

-- `Select the LAST_INSERT_ID() into a variable.`

1.  如果 Artist_count 为 1，则查找 ArtistID 并将其存储在变量中。
2.  在相册表中插入一个新行。

代码：

```
CREATE PROCEDURE AddAlbum(

NameOfArtist varchar(50),

AlbumName varchar(50)

);
BEGIN

DECLARE artist_count INT;

DECLARE artist_id INT;

SELECT COUNT(ArtistName) INTO artist_count FROM Artists
WHERE ArtistName = NameOfArtist;

IF artist_count = 0
THEN SELECT LAST_INSERT_ID(NameOfArtist) INTO artist_id
AND INSERT INTO Artists (ArtistName)
VALUES (NameOfArtist)
END IF;

IF artist_count = 1
THEN SELECT ArtistID INTO artist_id
FROM Artists
WHERE ArtistName = NameOfArtist
END IF;

INSERT INTO Albums (ArtistID, Title)
VALUES (artist_id, AlbumName);
END;
// 
```

这就是我正在尝试的，对于我目前正在上课的课程。老实说，我不太了解如何编写代码。我完全理解需要做什么，我的大脑出于某种原因只是没有处理如何正确编写代码。我相当肯定我有很多错误，我一直在安静地工作一段时间，但似乎无法理解。一直在重新思考我正在学习的这个数据库管理课程。但是，我不会放弃。有没有人可以帮助我解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T10:56:06.630

如果您需要遵循确切的步骤，这将是您的代码：

```
CREATE PROCEDURE AddAlbum(
NameOfArtist varchar(50),
AlbumName varchar(50)
);

BEGIN
  DECLARE artist_count INT;
  DECLARE artist_id INT;

  SELECT COUNT(ArtistName) INTO artist_count FROM Artists WHERE ArtistName = NameOfArtist;
  IF artist_count = 0 THEN 
    INSERT INTO Artists (ArtistName) VALUES (NameOfArtist);
    SELECT LAST_INSERT_ID(NameOfArtist) INTO artist_id; 
  ELSE IF artist_count = 1 THEN 
    SELECT ArtistID INTO artist_id FROM Artists WHERE ArtistName = NameOfArtist; 
  END IF;

  INSERT INTO Albums (ArtistID, Title) VALUES (artist_id, AlbumName); 
END; // 
```

# php - php 和 Javascript 中的全局变量

> ID：14477867
> 
> 赞同：0
> 
> 时间：2013-01-23T10:51:31.833
> 
> 标签：php, javascript

> **可能重复：**
> [在页面之间传递变量](https://stackoverflow.com/questions/8127988/passing-variable-between-pages)

我需要创建一个变量，我可以在一个 PHP 页面中使用它来为这个变量分配一个类别。当我分配了一个值后，如何将该值传递给另一个 PHP 页面？

我必须使用全局变量吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T10:54:28.813

您可以使用以下方法在页面之间传递变量：

1.  [会议](http://php.net/manual/en/session.examples.basic.php)。
2.  包含在所有页面中的通用配置文件。
3.  表格（[隐藏字段](http://www.echoecho.com/htmlforms07.htm)等）。
4.  [饼干](http://www.php.net/manual/en/function.setcookie.php)。

每种方法都有自己的用途，因此您需要根据情况进行选择。如果有问题的变量在整个应用程序中保持不变，我建议将其放在配置文件中。如果它是用户特定的变量，我建议使用会话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T11:02:43.780

它取决于您要使用什么来将值从一个 php 页面传递到另一个页面。

您可以使用[Session](http://php.net/manual/en/features.sessions.php)、[Cookie](http://php.net/manual/en/features.cookies.php)或 Forms 通过使用`$_GET`and`$_POST`方法：

示例：通过使用会话

```
//page1.php
session_start();
$_SESSION['name'] = $name;

//you can access this in page2.php
session_start();
echo $_SESSION['name']; 
```

示例：通过使用 Cookie

```
//page1.php
setcookie(name, value, expire, path, domain);
//you can access it in page2.php like this
echo $_COOKIE["name"]; 
```

示例：通过使用`GET`和`POST`

您可以使用`GET`with`anchor`标签，因为`POST`您需要表单提交。

阅读有关 GET 和 POST 的更多信息：

[http://php.net/manual/en/reserved.variables.post.php](http://php.net/manual/en/reserved.variables.post.php)

[http://php.net/manual/en/reserved.variables.get.php](http://php.net/manual/en/reserved.variables.get.php)

希望这些信息对您有所帮助

# java - Swing - 获取 ImageProducer 用于生成图像的 URL

> ID：14477870
> 
> 赞同：0
> 
> 时间：2013-01-23T10:51:37.373
> 
> 标签：java, swing, imageicon

我正在尝试获取图片的网址。

```
Icon icon = getIcon(); // gets a previously initialised Icon 
ImageIcon imageIcon = (ImageIcon) icon;
Image image = imageIcon.getImage();
image.getSource(); // returns a java.awt.image.FilteredImageSource 
```

有`FilteredImageSource`一个属性`src`，其中包含图像的 url。但是， src 属性具有默认访问修饰符。

有什么办法可以让我在这个时间点获取图片网址吗？

# c# - 在表单之间发送 ListView 数据

> ID：14477871
> 
> 赞同：1
> 
> 时间：2013-01-23T10:51:38.000
> 
> 标签：c#, winforms

嗨，我是 C# 的新手，我没有编程背景，但我对此很感兴趣。

我想将数据发送到 ListView，但数据是另一种形式。我已经在这里看到了所有相关的帖子。我尝试从其中一篇文章中复制代码并根据我的需要进行更改，但它不起作用。

表格3：

```
public partial class Form3 : Form
{
    public Form3()
    {
        InitializeComponent();
    }

    public delegate void HandleItemAdded(object sender, ItemAddedEventArgs e);

    public struct ItemAddedEventArgs: EventArgs
    {
        public string PartPrefix;
        public string PartStartNumber;
        public string AssemblyPrefix;
        public string AssemblyStartNumber;
        public string Name;
        public string Profile;
        public string Material;
        public string Finish;
        public string Class;

        public ItemAddedEventArgs(string partprefix, string partstartnumber, string assemblyprefix, string assemblystartnumber, string name, string profile, string material, string finish, string classes)
        {
            PartPrefix = partprefix;
            PartStartNumber = partstartnumber;
            AssemblyPrefix = assemblyprefix;
            AssemblyStartNumber = assemblystartnumber;
            Name = name;
            Profile = profile;
            Material =  material;
            Finish = finish;
            Class = classes;
        }
    }

    public event HandleItemAdded ItemAdded;

    public void RaiseItemAdded(ItemAddedEventArgs e)
    {
        if (ItemAdded != null)
            ItemAdded(this, e);
    }

    public void AddToList()
    {  
        RaiseItemAdded (new ItemAddedEventArgs (textBox221.Text, textBox222.Text, textBox223.Text, textBox224.Text, textBox225.Text, textBox226.Text, textBox227.Text, textBox228.Text, textBox229.Text));
    }
} 
```

表格1：

```
public void HandleItemAdded(object sender, WindowsFormsApplication1.Form3.ItemAddedEventArgs e)
{
    ListViewItem item1 = new ListViewItem(textBox221.Text);
    item1.SubItems.Add(textBox222.Text);
    item1.SubItems.Add(textBox223.Text);
    item1.SubItems.Add(textBox224.Text);
    item1.SubItems.Add(textBox225.Text);
    item1.SubItems.Add(textBox226.Text);
    item1.SubItems.Add(textBox227.Text);
    item1.SubItems.Add(textBox228.Text);
    item1.SubItems.Add(textBox229.Text);
    listView1.Add(item1);

    Form3.ItemAdded += Form1.HandleItemAdded; *<-( i dont know if this is the correct place for this.)  
} 
```

我得到的错误是：`type EventArgs in interface list is not an interface`

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:57:24.337

您需要在 Form1 中执行以下操作：

```
public void HandleItemAdded(object sender, WindowsFormsApplication1.Form3.ItemAddedEventArgs e)
        {

            ListViewItem item1 = new ListViewItem(e.PartPrefix);
            item1.SubItems.Add(e.PartStartNumber);
            item1.SubItems.Add(e.<Member_Name>);
.
.
.

            listView1.Add(item1);

        } 
```

对于错误，我认为以下内容应该对您有用：

```
public class ItemAddedEventArgs: EventArgs 
```

# ios - iOS，FFmpeg 使用 UIimage 与 OpenGL 渲染视频

> ID：14477878
> 
> 赞同：2
> 
> 时间：2013-01-23T10:51:50.360
> 
> 标签：ios, opengl-es, ffmpeg, sdl

我有一个通过 RTSP 流式传输 h264 视频的 IP 摄像机。在 iOS 上，我使用 FFmpeg 捕获 RTSP 流并解码帧，然后使用 UIimage 和 UIimageview 进行渲染。

我已经看到了从 FFmpeg 渲染视频的示例，它们似乎都使用 OpenGL ES 或 SDL 库。

我的问题是使用 OpenGL 有什么好处？因为使用 UIimage 进行渲染很容易并且看起来工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:23:11.080

*   SDL 和 OpenGL 是可移植的跨平台标准

*   这些库使用 GPU 来处理数据。这对于图形处理非常有效，并且使您能够 - 例如 - 将实时过滤器应用于视频。

Apple 提供 CIImage 用于在 GPU 上处理图像数据。这可以是一种更加以可可为中心的方式来提供 openGL 和 SDL 的一些好处。请参阅[iOS 5.0 中的核心图像过滤器是否足够快以进行实时视频处理？](https://stackoverflow.com/questions/6625888/are-the-core-image-filters-in-ios-5-0-fast-enough-for-realtime-video-processing)对此进行一些有用的讨论。

如果您不需要应用过滤器，并且不需要跨平台代码，那么您的工作方法就可以了。

# php - SyntaxError：未终止的字符串文字 SELECTING MAX(streamitem_id)

> ID：14477883
> 
> 赞同：-2
> 
> 时间：2013-01-23T10:52:01.163
> 
> 标签：php, jquery, ajax, syntax-error

我正在尝试从流数据表中提取 MAX streamitem_id，但是当我将查询从更改为时`SELECT streamitem_id`，`SELECT MAX(streamitem_id)`它给了我以下错误。

我该如何纠正这个问题？

这是我从 Firebug 得到的错误。

```
 SyntaxError: unterminated string literal
    [Break On This Error]   

    var current_last_status_id="<br /> 
```

客户端代码下方

```
<?  $timestamp = "SELECT MAX(streamitem_id) FROM streamdata";
            $chant = mysqli_query($mysqli, $timestamp) or die(mysqli_error($mysqli));
            while ($streamitem_data= mysqli_fetch_array($chant)) {

    ?>
    <script>

    setInterval(function(){
        var current_last_status_id="<?php echo $streamitem_data["streamitem_id"];?>";

           $.ajax({ type: "GET", 
                    url: "streampostinsert.php?current_last_status_id=" + current_last_status_id,  

                    dataType:"json",
                    cache:false,
                    success: function(response){ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:00:43.373

尝试将 SQL 更改为此

```
$timestamp = "SELECT MAX(streamitem_id) AS streamitem_id FROM streamdata"; 
```

您在 Firefox 中看到的错误是 javascript 错误，但我认为真正的错误是 PHP 在您的 javascript 中间抛出了关于未定义索引 streamitem_id 的通知。

我相信你需要给返回的值加上别名，否则你会得到类似的东西。

```
$streamitem_data['MAX(streamitem_id)'] 
```

这是一场噩梦

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-23T11:04:47.683

尝试改变

```
SELECT MAX(streamitem_id) FROM streamdata 
```

到

```
SELECT MAX(streamitem_id) AS streamitem_id FROM streamdata 
```

# mysql - MySQL为每个已经存在的记录插入一条记录

> ID：14477886
> 
> 赞同：1
> 
> 时间：2013-01-23T10:52:10.290
> 
> 标签：mysql, sql

大家好，基本上我有一个查询选择flagId = 6的所有clientId

这是：

```
SELECT clientId from ClientsFlags WHERE flagId = 6; 
```

现在我想从这个查询中获取结果，并为在 select 语句中获得的每个结果创建一个新记录

```
INSERT INTO clientFlags clientId, flagId VALUES('The client ID's that were obtained in the select query', 42); 
```

结合这些陈述的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:54:35.533

您可以使用[INSERT ... SELECT 语法](http://dev.mysql.com/doc/refman/5.0/en/insert-select.html)

```
INSERT INTO clientFlags (clientId, flagId) 
    SELECT clientId, 42 
    FROM ClientsFlags 
    WHERE flagId = 6; 
```

像这样的东西，我没有测试它的语法错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:55:16.663

```
INSERT INTO clientFlags (SELECT clientId,42 from ClientsFlags WHERE flagId = 6) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T10:56:45.063

使用[INSERT ... SELECT 语法](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)

您的查询应如下所示，

```
INSERT INTO clientFlags (clientId, flagId) 
   SELECT clientId, flagId 
   FROM ClientsFlags WHERE flagId = 6; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T10:57:40.380

```
INSERT INTO clientFlags (clientId, flagId) SELECT clientId, 42 from ClientsFlags WHERE flagId = 6; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T11:22:42.537

您可以按照以下方式进行操作

```
 INSERT INTO `clientFlags` 
 SELECT * FROM `clientFlags` WHERE `flagId` = 6 
```

**注意：**您还必须记住，任何字段都不能是唯一的或主键...

# java - 在eclipse中跟踪资源更改源

> ID：14477887
> 
> 赞同：1
> 
> 时间：2013-01-23T10:52:12.247
> 
> 标签：java, eclipse-rcp

我的 RCP 应用程序中有一个*xml*文件。我正在使用`FormEditor`.

```
public class MyFormEditor extends FormEditor implements IResourceChangeListener{
    public MyFormEditor(){
        ResourcePlugin.getWorkspace.addResourceChangeListener(this);
        ...
    }

    @Override
    public void resourceChanged(IResourceChangeEvent event){
        int type = event.getType();

        switch(type){
            IResourceChangeEvent.PRE_DELETE:
            IResourceChangeEvent.PRE_CLOSE:
                this.close(true);
                break;
            IResourceChangeEvent.POST_CHANGE:
                System.out.println("Resource is change.");
                break;
            default:
                break;
        }
    }

    @Override
    public void dispose(){
        ResourcePlugin.getWorkspace.removeResourceChangeListener(this);
        super.dispose();
    }
} 
```

`IResourceChange.POST_CHANGE`当我保存资源或从 SVN 存储库更新资源时触发事件。

下`IResourceChange.POST_CHANGE`如何判断资源是从SVN更新的？

我尝试了以下事情，但它对我不起作用。

```
IResourceDelta delta = event.getDelta;
int flags = delta.getFlags();
boolean sync = (flags & IResourceDelta.SYNC) != 0;
if(sync){
    System.out.println("Resource updated from server.");
} 
```

如果您需要任何其他信息，请告诉我。

# ios - IOS 中的不可更新订阅

> ID：14477888
> 
> 赞同：1
> 
> 时间：2013-01-23T10:52:13.600
> 
> 标签：ios, xcode, subscription

我正在使用“自动续订订阅”，它运行良好，我可以验证它的收据，并可以检查其是否处于活动状态，但苹果拒绝了它并建议使用“不可续订订阅”，使用它的主要问题就是说，当订阅后它过期或用户从他的苹果帐户中删除它时，我无法测试它的状态，“自动续订订阅”使用几分钟后过期，所以很容易测试。

任何人都可以建议如何测试这种情况

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:35:56.363

使用不可更新订阅，您需要在服务器上自行管理。一旦您向 Apple 验证收据，您就可以计算和维护到期日期。例如，没有什么可以阻止您销售 1 个月的订阅，但因为您正在计算自己的到期日期，所以每订阅一个额外的一周。另请注意，现在**您**必须在他们的所有设备上同步订阅。借助 ARS，您可以`restoreCompletedTransactions`将订阅扩展到一个人的新设备。但是对于 NRS，Apple 要求您使用用户名和密码实施用户帐户系统，以允许用户登录（到您的服务器）并将他们的订阅扩展到新设备。

使用 NRS，您拥有更多权力，但您也有更多责任。

# cocos2d-iphone - kobold2d 在方向更改时禁用全屏

> ID：14477901
> 
> 赞同：0
> 
> 时间：2013-01-23T10:52:42.710
> 
> 标签：cocos2d-iphone, uikit, kobold2d

我想在我的应用程序中使用 kobold2d 库在 UIKit GUI 元素之外包含 cocos2d 场景，所以它应该只占屏幕的一部分。

我在初始化第一层时像这样改变 cocos2d glview 的大小：

```
UIView * glView = [[CCDirector sharedDirector]view];
    CGRect rct = CGRectMake(100, 100, 300, 400);

    [glView setFrame:rct]; 
```

在我改变方向之前，视图会正确显示，然后 glview 再次变为全屏。有没有办法禁用这种行为？

XCode 4.5.2、iOS 6、Kobold2D 2.04

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:04:18.673

设置框架后调用 reshape 可能会有所帮助：

```
UIView * glView = [[CCDirector sharedDirector]view];
CGRect rct = CGRectMake(100, 100, 300, 400);

[glView setFrame:rct];
[glView reshape]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:57:50.130

现在经过一些实验，我找到了解决方案，如果我错了，请纠正我。至少这对我有用，希望其他人也可以使用它。

CCDirectorIOS 是一个 UIViewController，它通常被设置为`rootViewController`app的一个`window`。

Looks like`[window rootViewController]`负责在`view`每次方向更改时使其全屏显示，从而迫使所有孩子进行布局（我知道！！！%）。

因此，为了避免 glView 不时收缩到整个窗口，给窗口另一个 UIViewController 作为 rootController，而不是 CCDirector。另一个 UIViewController 应该有它自己的全新 UIView。这个新的 rootView 是这个 rootViewController 可以随心所欲地调整大小的东西，不用管我们的 glView。现在，将director 指定为rootController 的子级，并将glView 指定为rootView 的子级。

将 glView 设置为您想要的大小 - 我们开始吧！现在，当 rootView 调整大小时，glView 不会。在我的情况下，它仍然必须在保持可用空间比例的同时调整大小，所以我在它上面使用了 setAutoresizingMask。请大师告诉你的想法。

已知警告：

*   KKAppDelegate 的 rootController 和 navController 不使用，除了正确的初始方向

*   由于 addChildViewController: 方法，这将最低 ios 版本的标准提高到 5

应用程序 AppDelegate 中的代码（假设 ARC 为 ON）：

```
-(void) initializationComplete
{
#ifdef KK_PLATFORM_IOS

    RootViewController * rootvc = [[RootViewController alloc]init];
    UIView * rootView = [[UIView alloc]init];
    [rootvc setView:rootView];
    [rootvc.view setBackgroundColor:[UIColor blueColor]];//to see views in colors
    [window setRootViewController:rootvc];

    [rootvc addChildViewController:[CCDirector sharedDirector]];

    UIView * glview = [[CCDirector sharedDirector]view];
    [rootvc.view addSubview:glview];//[[CCDirector sharedDirector]openGLView]];

    CGRect glRect = CGRectInset(rootvc.view.bounds, 50, 50);//our glview frame is smaller than rootView frame

    [glview setFrame:glRect];
    [glview setAutoresizingMask: UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth];//so the view size follows window's size even though it's not fullscreen

#endif

} 
```

# events - 如何为 AngularJS 创建 on-change 指令？

> ID：14477904
> 
> 赞同：13
> 
> 时间：2013-01-23T10:52:51.710
> 
> 标签：events, angularjs

通常，每次用户按下键时，ng-model 都会更新绑定模型：

```
<input type="text" ng-model="entity.value" /> 
```

这几乎适用于所有情况。

但是我需要它在 onchange 事件发生时更新，而不是在 onkeyup/onkeydown 事件发生时更新。

在旧版本的 Angular 中，有一个 ng-model-instant 指令，其工作方式与现在的 ng-model 相同（至少对于用户而言——我对他们的实现一无所知）。所以在旧版本中，如果我只是给了 ng-model，它正在更新模型 onchange，而当我指定 ng-model-instant 时，它正在更新模型 onkeypup。

现在我需要 ng-model 用于元素的“更改”事件。我不希望它是即时的。最简单的方法是什么？

**编辑**

输入仍然必须反映模型的任何其他更改 - 如果模型将在其他地方更新，则输入的值应反映此更改。

我需要的是让 ng-model 指令像在旧版本的 angularjs 中一样工作。

这是对我正在尝试做的事情的解释：http: [//jsfiddle.net/selbh/EPNRd/](http://jsfiddle.net/selbh/EPNRd/)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-23T11:24:29.400

在这里，我为您创建了 onChange 指令。**演示**：http: [//jsfiddle.net/sunnycpp/TZnj2/52/](http://jsfiddle.net/sunnycpp/TZnj2/52/)

```
app.directive('onChange', function() {    
    return {
        restrict: 'A',
        scope:{'onChange':'=' },
        link: function(scope, elm, attrs) {
            scope.$watch('onChange', function(nVal) { elm.val(nVal); });            
            elm.bind('blur', function() {
                var currentValue = elm.val();
                if( scope.onChange !== currentValue ) {
                    scope.$apply(function() {
                        scope.onChange = currentValue;
                    });
                }
            });
        }
    };        
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T16:17:47.567

另请参阅：AngularJS ngChange 指令。

当应用于 <input> 时，更改发生在每次按键后而不是模糊事件上。

[http://docs.angularjs.org/api/ng.directive:ngChange](http://docs.angularjs.org/api/ng.directive:ngChange)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-24T20:33:49.907

[Angularjs: input[text] ngChange 在值发生变化时触发](https://stackoverflow.com/questions/11868393/angularjs-inputtext-ngchange-fires-while-the-value-is-changing)：这个答案提供了一个更好的解决方案，允许自定义指令使用，`ngModel`因此您仍然可以使用所有其他指令`ngModel`。

此外，一个更灵活的解决方案，允许指定要使用的事件（不仅仅是模糊）和其他属性应该很快内置到角度：[https ://github.com/angular/angular.js/pull/2129](https://github.com/angular/angular.js/pull/2129)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T11:10:48.333

我不确定是否有更好的方法来做到这一点，但您可以使用自定义指令来实现这一点（在您想要的任何 jquery 事件上）

```
<input type="text" ng-model="foo" custom-event="bar" />
<p> {{ bar }} </p>

// create the custom directive

app.directive('customEvent', function() {
    return function(scope, element, attrs) {
        var dest = attrs.customEvent;

        $(element[0]).on('any-jquery-event', function(e) {
            e.preventDefault();

            // on the event, copy the contents of model
            // to the destination variable
            scope[dest] = scope.foo;

            if (!scope.$$phase)
                scope.$apply();
        });
    }
}); 
```

# git - Hudson 和 Git 中的 SSH 密钥配置

> ID：14477908
> 
> 赞同：0
> 
> 时间：2013-01-23T10:52:59.143
> 
> 标签：git, hudson

我正在使用 Hudson 进行 Git 配置。我已经使用 Hudson 创建了新工作，但它抛出了以下异常：

```
returned status code 128: error: The requested URL returned error: 401 while accessing https://github.com/test/eng.git/info/refs  fatal: HTTP request failed  ERROR: Could not fetch from any repository FATAL: Could not fetch from any repository 
```

从 Git 获取内容时。我没有配置任何 SSH 密钥配置。

如何配置 SSH 密钥？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:08:20.503

由于您使用的是 github，因此他们有一些关于如何设置 SSH 密钥的好工具。请参阅 [https://help.github.com/articles/generating-ssh-keys](https://help.github.com/articles/generating-ssh-keys)和[https://help.github.com/categories/56/articles](https://help.github.com/categories/56/articles)

# android - 在 Mapview 上禁用寻呼机

> ID：14477911
> 
> 赞同：0
> 
> 时间：2013-01-23T10:52:58.993
> 
> 标签：android

嗨，实际上我在我的项目中使用共享锁库和选项卡主机。我在标签中给出了寻呼机的概念，以便用户可以滑动标签片段。

我有个问题。实际上，在我的最后一个片段中，我使用了地图视图和列表视图。概念是我在地图上显示多个标记并将显示在列表视图中。

因此，当用户在地图视图寻呼机上开始水平滚动时，将采用下一个或上一个片段（屏幕）。

我该如何管理它。我希望该寻呼机仅在列表视图上工作而不是在我的地图视图上。我希望你能理解我的问题。我怎么能这样做提前谢谢。

# android - 如何有效地添加/删除视图？

> ID：14477912
> 
> 赞同：2
> 
> 时间：2013-01-23T10:53:01.600
> 
> 标签：android, view, add, removechild

我有一个应用程序，它显示带有详细信息的项目列表。当用户选择项目时，应用程序会显示额外的详细信息。我创建了两个扩展视图`RelativeLayout`，一个用于 listView，另一个用于详细视图，并将两者添加到同一个父布局中。这是我的 xml 和视图的示例代码。

使用 ListView 查看

```
class MyView1 extends RelativeLayout {

        private Context context = null;

        public MyView1 (Context context) {
            super(context);
            this.context = context;
            createView();
        }

        private void createView() {

            LayoutInflater layoutInflater = (LayoutInflater) context
                    .getSystemService(Service.LAYOUT_INFLATER_SERVICE);
            View view = layoutInflater.inflate(R.layout.layout1, null);
            this.addView(view );
            listview = (ListView) findViewById(R.id.listView);
            listview.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view, int position,
                    long id) {
                Object obj  = list.get(position);
                MyView1.this.removeAllViews();
                MyView1.this.addView(new MyView2(context));
            }
        });
         //Set Adapter
        }

    } 
```

查看详细信息

```
class MyView2 extends RelativeLayout {

    private Context context = null;

    public MyView2(Context context) {
        super(context);
        this.context = context;
        createView();
    }

    private void createView() {

        LayoutInflater layoutInflater = (LayoutInflater)context.getSystemService(Service.LAYOUT_INFLATER_SERVICE);
        View view = layoutInflater.inflate(R.layout.layout2s, null);
        this.addView(view );

        backbutton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                MyView2 .this.removeAllViews();
                MyView2 .this.addView(new MyView1(context));
            }
        });
    }
} 
```

我将这两个视图添加到框架布局中。我的问题是，当像这样添加/删除视图时会减慢应用程序的速度。如何更有效地添加和删除它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:00:26.130

**添加**

这条线效率不高

```
View view = layoutInflater.inflate(R.layout.layout1, null); 
```

为什么？看这篇[文章](https://plus.google.com/115236917399025801624/posts/FbKbxXUXBHn)

**删除**

这条线效率不高

```
MyView1.this.removeAllViews(); 
```

为什么？此方法将循环所有子视图并将其删除。如果您知道要删除哪个视图对象，可以使用 removeView(View v) 函数。这样会更有效率。

# kendo-ui - 为支持剑道网格和图表添加哪些脚本

> ID：14477918
> 
> 赞同：0
> 
> 时间：2013-01-23T10:53:19.760
> 
> 标签：kendo-ui, kendo-dataviz

我对剑道 UI 有疑问。我在将 dataviz js 脚本添加到页面时使用剑道图表和网格，并且在加载页面网格时不显示任何列。也就是说，我只能添加 web 或 dataviz。这是我添加的脚本图表和网格之间是否存在任何相互依赖关系。

```
<link href="KENDO/js/examples-offline.css" rel="stylesheet" type="text/css"/>
<link href="KENDO/styles/kendo.default.css" rel="stylesheet" type="text/css"/>
<link href="KENDO/styles/kendo.common.css" rel="stylesheet" type="text/css"/>
<script src="KENDO/js/jquery.min.js"></script>
<script src="KENDO/js/kendo.dataviz.stock.min.js"></script>
<script src="KENDO/js/kendo.web.min.js"></script>
<script src="KENDO/js/kendo.dataviz.min.js"></script>
<link href="KENDO/styles/kendo.dataviz.min.css" rel="stylesheet" type="text/css"/>
<script src="KENDO/js/console.js"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:46:36.203

这是您应该为 KendoUI web 样式添加的内容：

```
<link href="KENDO/styles/kendo.default.css" rel="stylesheet" type="text/css"/>
<link href="KENDO/styles/kendo.common.css" rel="stylesheet" type="text/css"/> 
```

这是运行 KendoUI web 所需要的：

```
<script src="KENDO/js/jquery.min.js"></script>
<script src="KENDO/js/kendo.web.min.js"></script> 
```

这是用于设计 Kendo UI dataviz 的样式：

```
<link href="KENDO/styles/kendo.dataviz.min.css" rel="stylesheet" type="text/css"/> 
```

这是为了运行 Kendo UI dataviz：

```
<script src="KENDO/js/kendo.dataviz.min.js"></script> 
```

其他用于演示（您不需要它们）

# ruby-on-rails - 从已解析的 CSV 文件中删除非数字字符

> ID：14477919
> 
> 赞同：0
> 
> 时间：2013-01-23T10:53:22.363
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我是 ruby​​ 的新手。我想从从 CSV 文件解析的电话号码中删除非数字字符。这是我正在使用的代码。

```
require 'csv' 
csv_text = File.read('file.csv')
csv = CSV.parse(csv_text, :headers => true)
csv.each do |row|                                      
    puts "First Name: #{row['Name']} - HomePhone: #{row['Phone']} -  Zip Code: #{row['Zipcode']}"
end 
```

输出打印如下

```
 FirstName:Abiel HomePhone:6667-88-76 
```

（在 CSV 文件 HomePhone 中包含非数字字符。）我希望输出为`FirstName:Abiel HomePhone:66678876`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:56:06.030

这应该有效：

```
row['Phone'].gsub(/[^0-9]/, "") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T11:13:46.013

是的，或者只是`row['Phone'].gsub(/\D/, "")`

其中`\d`表示数字字符，`\D`表示任何非数字。

# magento - Magento：附加类别过滤器

> ID：14477923
> 
> 赞同：0
> 
> 时间：2013-01-23T10:53:33.940
> 
> 标签：magento, search, filter, layered-navigation

我在 Magento 中有一个特定的产品搜索案例。在类别页面上，我只需要搜索可交付客户邮政编码的产品。

我没有找到具有 Magento 属性的解决方案（因为它适用于许多字段和计算）。

所以基本上我想创建一个特殊的过滤器（标准分层导航的附加块）来只显示出现在 SQL 查询结果中的产品。

示例：客户进入类别 -> 将邮政编码放入文本框中 -> 执行 MySQL 查询以返回可用于邮政编码的 SKU -> 过滤类别以仅显示 SQL 返回的这些产品。

所以只是为了简化 - 我需要一个带有按钮的静态块，该块具有隐藏 SKU 不在 (x,y,z) 中的所有文章的功能。

有谁知道如何做到这一点？

# iphone - 如何在 iPad 的全屏模式下使用 SAFARI 打开网站

> ID：14477928
> 
> 赞同：0
> 
> 时间：2013-01-23T10:53:57.483
> 
> 标签：iphone, ios, ipad

我有一个网站（网址是硬编码）将以全屏模式打开的要求

**即**在我的应用程序中应该不显示 SAFARI 的地址栏或菜单栏按钮。

我正在使用以下代码行作为 SAFARI 浏览器中的打开网址。

```
NSURL *url=[[NSURL alloc]initWithString:@"http//www.google.com"];
[[UIApplication sharedApplication] openURL:url]; 
```

我应该设置哪些属性`UIApplication`才能在我的应用程序中以全屏模式获得 SAFARI 浏览器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:02:17.430

您不能从应用程序执行此操作，由网站尝试执行此操作。为了实现你所追求的，我相信你需要让网站伪装成一个网络应用程序。

Apple 有关于如何为您的网站自定义 Safari 的文档，请参阅[http://developer.apple.com/library/safari/#documentation/appleapplications/reference/safariwebcontent/configuringwebapplications/configuringwebapplications.html](http://developer.apple.com/library/safari/#documentation/appleapplications/reference/safariwebcontent/configuringwebapplications/configuringwebapplications.html)，特别是“*隐藏 Safari 用户界面组件*”

# c# - C# 中的 Parser FxCop 结果 Xml 文件

> ID：14477933
> 
> 赞同：2
> 
> 时间：2013-01-23T10:54:15.893
> 
> 标签：c#, xml, parsing, fxcop

我以编程方式使用 VS2010 和 Fxcop 10.0 (fxcopcmd.exe) 生成 fxcop 分析结果（xml 文件）

我想要 fxcop 分析结果的解析器 xml 文件。

在java语言中我发现了这个： http: [//grepcode.com/file/repo1.maven.org/maven2/org.jvnet.hudson.plugins/violations/0.7.7/hudson/plugins/violations/types/fxcop /FxCopParser.java](http://grepcode.com/file/repo1.maven.org/maven2/org.jvnet.hudson.plugins/violations/0.7.7/hudson/plugins/violations/types/fxcop/FxCopParser.java)

对解析器 C# 有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-13T08:04:38.340

我使用此代码来获取报告中的问题数量。您也可以从 XElement 检索实际消息

```
public class Parser
{
    public Parser(string fileName)
    {
        XDocument doc = XDocument.Load(fileName);
        var issues = GetAllIssues(doc);
        NumberOfIssues = issues.Count;

        var criticalErrors = GetCriticalErrors(issues);
        var errors = GetErrors(issues);
        var criticalWarnings = GetCriticalWarnings(issues);
        var warnings = GetWarnings(issues);

        NumberOfCriticalErrors = criticalErrors.Count;
        NumberOfErrors = errors.Count;
        NumberOfCriticalWarnings = criticalWarnings.Count;
        NumberOfWarnings = warnings.Count;
    }

    public int NumberOfIssues
    {
        get;
        private set;
    }

    public int NumberOfCriticalErrors
    {
        get;
        private set;
    }

    public int NumberOfErrors
    {
        get;
        private set;
    }

    public int NumberOfCriticalWarnings
    {
        get;
        private set;
    }

    public int NumberOfWarnings
    {
        get;
        private set;
    }

    private List<XElement> GetAllIssues(XDocument doc)
    {
        IEnumerable<XElement> issues =
            from el in doc.Descendants("Issue")
            select el;

        return issues.ToList();
    }

    private List<XElement> GetCriticalErrors(List<XElement> issues)
    {
        IEnumerable<XElement> errors = 
            from el in issues
            where (string)el.Attribute("Level") == "CriticalError"
            select el;

        return errors.ToList();
    }

    private List<XElement> GetErrors(List<XElement> issues)
    {
        IEnumerable<XElement> errors =
            from el in issues
            where (string)el.Attribute("Level") == "Error"
            select el;

        return errors.ToList();
    }

    private List<XElement> GetCriticalWarnings(List<XElement> issues)
    {
        IEnumerable<XElement> warn =
            from el in issues
            where (string)el.Attribute("Level") == "CriticalWarning"
            select el;

        return warn.ToList();
    }

    private List<XElement> GetWarnings(List<XElement> issues)
    {
        IEnumerable<XElement> warn =
            from el in issues
            where (string)el.Attribute("Level") == "Warning"
            select el;

        return warn.ToList();
    }
} 
```

# android - onActivityResult 被称为父活动而不是子活动

> ID：14477938
> 
> 赞同：2
> 
> 时间：2013-01-23T10:54:33.753
> 
> 标签：android, android-activity, tabactivity

我有几个子活动的 tabActivity。从活动**A**我开始相机或画廊：

```
final Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
intent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, Utils.getImagePath().getPath());
intent.putExtra("return-data", true);
startActivityForResult(intent, Utils.CROPPER_PICK_FROM_CAMERA); 
```

和

```
final Intent intent = new Intent(Intent.ACTION_PICK);
intent.setType("image/*");
startActivityForResult(intent, Utils.CROPPER_PICK_FROM_FILE); 
```

结果返回给Activity **A**

我也有活动**B**，可以进行图像裁剪（我从活动**A**开始）。但它的结果返回到 TabActivity （在某些手机上它返回到活动**A**）。我该如何预防？

**编辑**：

我从**活动 A**（不是从活动，从其他类）开始**活动 B（这使得作物）**

 **```
final CropStarter starter = new CropStarter(mContext);
starter.startCropping(path);

public void startCropping()
{
final Intent intent = new Intent(mContext, CropImage.class);
        intent.setData(mImagePath);
        intent.putExtra("return-data", true);
        intent.putExtra(MediaStore.EXTRA_OUTPUT, Utils.getImagePath());
        intent.putExtra("outputFormat", "PNG");
        mContext.startActivityForResult(intent, Utils.CROPPER_CROP_FROM_CAMERA);
} 
```

**编辑2：**

如果我使用以下代码从 A 开始活动 B：

```
final Intent intent = new Intent(this, CropImage.class); 
```

它具有相同的结果：结果返回给**tabActivity**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T08:51:52.467

所以问题是我忘了在清单中添加活动标签：

`android:configChanges="bla bla bla |screenSize`

在某些设备上，相机视图会触发屏幕尺寸发生变化，所以我没有处理这种情况。**

# sql - 在 go 中将“SELECT *”列读入 []string

> ID：14477941
> 
> 赞同：44
> 
> 时间：2013-01-23T10:54:35.120
> 
> 标签：sql, csv, go

我想编写一个 Go 程序来将数据库表中的行转储到 csv 文件中`SELECT *`。

Go 提供了出色的[sql](http://golang.org/pkg/database/sql)和[csv](http://golang.org/pkg/encoding/csv/) api，但`csv`需要字符串数组和根据其类型“填充”字段`Scan`中的方法。`Rows`由于我以前不知道该表，因此我不知道有多少列以及它们的类型。

这是我在 Go 中的第一个程序，所以我有点挣扎。

我如何最好地将`Rows`实例中的列读入`[]string`- 这是“正确”的方式吗？

谢谢！

**更新**

我仍在为参数而苦苦挣扎。这是我的代码，现在我使用`panic`而不是返回一个`error`，但我稍后会更改它。在我的测试中，我传递了查询结果和`os.Stdout`.

```
func dumpTable(rows *sql.Rows, out io.Writer) error {
    colNames, err := rows.Columns()
    if err != nil {
        panic(err)
    }
    if rows.Next() {
        writer := csv.NewWriter(out)
        writer.Comma = '\t'
        cols := make([]string, len(colNames))
        processRow := func() {
            err := rows.Scan(cols...)
            if err != nil {
                panic(err)
            }
            writer.Write(cols)
        }
        processRow()
        for rows.Next() {
            processRow()
        }
        writer.Flush()
    }
    return nil
} 
```

为此，我得到`cannot use cols (type []string) as type []interface {} in function argument`（`writer.Write(cols)`在线。

然后我测试了

```
 readCols := make([]interface{}, len(colNames))
    writeCols := make([]string, len(colNames))
    processRow := func() {
        err := rows.Scan(readCols...)
        if err != nil {
            panic(err)
        }
        // ... CONVERSION?
        writer.Write(writeCols)
    } 
```

这导致`panic: sql: Scan error on column index 0: destination not a pointer`.

**更新 2**

我独立得出了[ANisus](https://stackoverflow.com/users/694331/anisus)的解决方案。这是我现在使用的代码。

```
func dumpTable(rows *sql.Rows, out io.Writer) error {
    colNames, err := rows.Columns()
    if err != nil {
        panic(err)
    }
    writer := csv.NewWriter(out)
    writer.Comma = '\t'
    readCols := make([]interface{}, len(colNames))
    writeCols := make([]string, len(colNames))
    for i, _ := range writeCols {
        readCols[i] = &writeCols[i]
    }
    for rows.Next() {
        err := rows.Scan(readCols...)
        if err != nil {
            panic(err)
        }
        writer.Write(writeCols)
    }
    if err = rows.Err(); err != nil {
        panic(err)
    }
    writer.Flush()
    return nil
} 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-01-24T11:52:50.767

为了`Scan`将值直接放入 a`[]string`中，您必须创建一个`[]interface{}`指向字符串切片中每个字符串的切片。

这里有一个 MySQL 的工作示例（只需更改`sql.Open`-command 以匹配您的设置）：

```
package main

import (
    "fmt"
    _ "github.com/go-sql-driver/mysql"
    "database/sql"
)

func main() {
    db, err := sql.Open("mysql", "user:pass@tcp(localhost:3306)/test?charset=utf8")
    defer db.Close()

    if err != nil {
        fmt.Println("Failed to connect", err)
        return
    }

    rows, err := db.Query(`SELECT 'one' col1, 'two' col2, 3 col3, NULL col4`)
    if err != nil {
        fmt.Println("Failed to run query", err)
        return
    }

    cols, err := rows.Columns()
    if err != nil {
        fmt.Println("Failed to get columns", err)
        return
    }

    // Result is your slice string.
    rawResult := make([][]byte, len(cols))
    result := make([]string, len(cols))

    dest := make([]interface{}, len(cols)) // A temporary interface{} slice
    for i, _ := range rawResult {
        dest[i] = &rawResult[i] // Put pointers to each string in the interface slice
    }

    for rows.Next() {
        err = rows.Scan(dest...)
        if err != nil {
            fmt.Println("Failed to scan row", err)
            return
        }

        for i, raw := range rawResult {
            if raw == nil {
                result[i] = "\\N"
            } else {
                result[i] = string(raw)
            }
        }

        fmt.Printf("%#v\n", result)
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-23T13:02:36.457

要获取列数（以及名称），只需使用 Columns() 函数

[http://golang.org/pkg/database/sql/#Rows.Columns](http://golang.org/pkg/database/sql/#Rows.Columns)

由于 csv 只能是字符串，因此只需使用 []byte 类型作为 Scanner 的 dest 类型。根据文档：

> 如果参数的类型为 *[]byte，Scan 会在该参数中保存相应数据的副本。副本归调用者所有，可以无限期修改和持有。

数据不会被转换成它的真实类型。然后您可以从此 []byte 将其转换为字符串。

如果您确定您的表仅使用基本类型（字符串、[]byte、nil、int(s)、float(s)、bool），您可以直接将字符串作为 dest 传递

但如果您使用其他类型，如数组、枚举等，则无法将数据转换为字符串。但这也取决于驱动程序如何处理这些类型。（例如几个月前，postgres 驱动程序无法处理数组，所以他总是返回 []byte 我需要自己转换它的地方）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-26T12:04:20.460

以下代码很好地满足了您的要求，您可以在[https://gist.github.com/hygull/645c3dc39c69b6b69c06f5ea9deee41f](https://gist.github.com/hygull/645c3dc39c69b6b69c06f5ea9deee41f)获取此代码。还提供了表格数据。

```
/**
    {
        "created_on": "26 may 2017",
        "todos": [
            "go get github.com/go-sql-driver/mysql"     
        ],
        "aim": "Reading fname column into []string(slice of strings)"
    }
*/

/* 
mysql> select * from users;
+----+-----------+----------+----------+-------------------------------+--------------+
| id | fname     | lname    | uname    | email                         | contact      |
+----+-----------+----------+----------+-------------------------------+--------------+
|  1 | Rishikesh | Agrawani | hygull   | rishikesh0014051992@gmail.com | 917353787704 |
|  2 | Sandeep   | E        | sandeep  | sandeepeswar8@gmail.com       | 919739040038 |
|  3 | Darshan   | Sidar    | darshan  | sidardarshan@gmail.com        | 917996917565 |
|  4 | Surendra  | Prajapat | surendra | surendrakgadwal@gmail.com     | 918385894407 |
|  5 | Mukesh    | Jakhar   | mukesh   | mjakhar.kjahhar@gmail.com     | 919772254140 |
+----+-----------+----------+----------+-------------------------------+--------------+
5 rows in set (0.00 sec)

mysql> 
*/

package main
import "fmt"
import "log"
import (
    _"github.com/go-sql-driver/mysql"   
    "database/sql"
)

func main() {
    // db, err := sql.Open("mysql", "<username>:<password>@tcp(127.0.0.1:<port>)/<dbname>?charset=utf8" )
    db, err := sql.Open("mysql", "hygull:admin@67@tcp(127.0.0.1:3306)/practice_db?charset=utf8")

    if err != nil {
        log.Fatal(err)
    }

    rows, err := db.Query("select fname from users")

    if err != nil {
        log.Fatal(err)
    }

    firstnames := []string{}
    for rows.Next() {
        var fname string
        rows.Scan(&fname)
        firstnames = append(firstnames, fname)
    }

    fmt.Println(firstnames)
    db.Close()
}

/* 
[Rishikesh Sandeep Darshan Surendra Mukesh]
*/ 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-04-29T20:18:08.640

不能这样做吗？简化如下。

```
var tmpErrors string

_ = row.Scan(&tmpErrors)

actualVarHere := strings.Split(tmpErrors, "\n") 
```

会有我没有看到的问题或性能问题吗？

# php - 如何启用 DDoS 防护？

> ID：14477942
> 
> 赞同：89
> 
> 时间：2013-01-23T10:54:36.723
> 
> 标签：php, security, ddos, denial-of-service

DDoS（分布式拒绝服务攻击）通常在服务器级别被阻止，对吗？

有没有办法在 PHP 级别阻止它，或者至少减少它？

如果没有，阻止 DDoS 攻击的最快和最常用的方法是什么？

* * *

## 回答 #1

> 赞同：196
> 
> 时间：2013-01-30T08:00:17.070

DDOS 是一系列攻击，它们压倒数据中心的关键系统，包括：

*   托管中心与 Internet 的网络连接
*   托管中心的内部网络和路由器
*   您的防火墙和负载平衡器
*   您的 Web 服务器、应用程序服务器和数据库。

在开始构建 DDOS 防御之前，请考虑最坏情况下的风险价值是什么。对于小型社区的非关键、免费使用服务，风险的总价值可能微不足道。对于已建立的数十亿美元业务的付费、面向公众的关键任务系统，其价值可能就是公司的价值。在后一种情况下，您不应该使用 StackExchange :) 无论如何，要防御 DDOS，您需要一种深度防御方法：

1.  **与您的托管中心**合作，了解他们提供的服务，包括在其与 Internet 的网络连接处的 IP 和端口过滤以及他们提供的防火墙服务。*这很关键：托管公司*从 Internet 上删除了许多站点，因为托管公司处理 DDOS 对一位客户造成的数据中心范围内的中断。此外，在 DDOS 攻击期间，您将与托管中心的工作人员密切合作，因此了解他们的紧急电话号码并与他们保持良好的关系 :) 他们应该能够阻止整个国际区域，完全阻止特定服务或网络协议和其他广泛的防御措施，或者仅允许列入白名单的 IP（取决于您的业务模型）
2.  在托管中心 - 使用**[内容交付网络](http://en.wikipedia.org/wiki/Content_delivery_network)**将（主要是静态的）服务分发到您的最终用户附近，并向 DDOS 架构师隐藏您的真实服务器。完整的 CDN 太大，DDOS 无法取出所有国家的所有节点；如果DDOS专注于一个国家，至少其他用户还可以。
3.  **使用最新的安全补丁更新**您的所有系统和软件包- 我的意思是所有这些：

    *   托管交换机 - 是的，这些有时需要更新
    *   路由器
    *   防火墙
    *   负载均衡器
    *   操作系统
    *   网络服务器
    *   语言及其库
4.  确保您设置了良好的**防火墙或安全设备***，并由合格的安全专家定期审查*。防火墙上的强规则可以很好地防御许多简单的攻击。能够管理每个开放服务的可用带宽也很有用。

5.  拥有良好的**[网络监控工具](http://en.wikipedia.org/wiki/Network_monitoring)**- 这可以帮助您了解：

    *   你受到攻击而不是简单地承受沉重的负担
    *   攻击来自哪里（可能包括您通常不与之有业务往来的国家）和
    *   实际攻击是什么（端口、服务、协议、IP 和数据包内容）
6.  攻击可能只是大量使用合法网站服务（例如，点击运行查询或插入/更新/删除数据的“合法”URI）——来自数千万到数百万个不同 IP 地址的数千或数百万个请求会将网站带到它的膝盖。或者，某些服务的运行成本可能非常高，以至于只有少数请求会导致 DOS - 认为这是一个非常昂贵的报告。因此，您需要对正在发生的事情进行良好的**应用程序级别监控：**

    *   调用了哪些服务以及发送了哪些参数/数据（即登录您的应用程序）
    *   哪些用户正在执行调用以及来自哪些 IP（即登录您的应用程序）
    *   数据库正在执行什么查询和插入/更新/删除
    *   系统中所有计算机（和 VM）上的平均负载、CPU 利用率、磁盘 i/o、网络流量
    *   确保所有这些信息都易于检索，并且您可以关联来自不同计算机和服务的日志（即确保所有计算机使用 ntp 进行时间同步）。
7.  **应用程序中的合理约束和限制**。例如，您可能：

    *   使用负载均衡器中的 QoS 功能将所有匿名会话发送到集群中的单独应用程序服务器，而登录用户使用另一组。这可以防止应用程序级匿名 DDOS 带走有价值的客户
    *   使用强大的 CAPCHA 保护匿名服务
    *   会话超时
    *   对某些类型的请求（如报告）设置会话限制或速率限制。确保您可以在必要时关闭匿名访问
    *   确保用户对并发会话数有限制（以防止被黑帐户登录一百万次）
    *   为不同的服务（例如事务使用与报告使用）提供不同的数据库应用程序用户，并使用数据库资源管理来防止一种类型的 Web 请求压倒所有其他请求
    *   如果可能的话，使这些约束是动态的，或者至少是可配置的。这样，当您受到攻击时，您可以设置激进的临时限制（“限制”攻击），例如每个用户只有一个会话，并且没有匿名访问。这对您的客户来说当然不是很好，但比根本没有服务要好得多。
8.  最后但并非最不重要的一点是，编写一份**DOS 响应计划**文档，并由所有相关方进行内部审查：业务、管理、软件开发团队、IT 团队和安全专家。编写文档的过程将使您和您的团队仔细考虑问题，并帮助您做好准备，以防最坏的情况发生在您休息日的凌晨 3 点。该文件应涵盖（除其他外）：

    *   有什么风险，以及企业的成本
    *   为保护资产而采取的措施
    *   如何检测攻击
    *   计划的响应和升级程序
    *   使系统和本文档保持最新的流程

所以，除了序言，这里有一些具体的答案：

> DDOS 通常在服务器级别被阻止，对吗？

并非如此 - 大多数最严重的 DDOS 攻击都是低级别的（在 IP 数据包级别），并由为处理 DDOS 攻击而开发的路由规则、防火墙和安全设备处理。

> 有没有办法在 PHP 级别阻止它，或者至少减少它？

一些 DDOS 攻击针对应用程序本身，发送有效的 URI 和 HTTP 请求。当请求率上升时，您的服务器开始挣扎，您将遇到 SLA 中断。在这种情况下，您可以在 PHP 级别执行以下操作：

*   应用程序级别监控：确保每个服务/页面都以您可以看到正在发生的事情的方式记录请求（这样您就可以采取措施来减轻攻击）。一些想法：

    *   拥有可以轻松加载到日志工具（或 Excel 或类似工具）中的日志格式，并使用命令行工具（grep、sed、awk）进行解析。请记住，DDOS 将生成数百万行日志。您可能需要对您的日志进行切片（尤其是关于 URI、时间、IP 和用户）以了解正在发生的事情，并且需要生成以下数据：

        *   正在访问哪些 URI
        *   哪些 URI 失败率很高（攻击者正在攻击的特定 URI 的可能指标）
        *   哪些用户正在访问该服务
        *   每个用户从多少个 IP 访问服务
        *   匿名用户访问哪些 URI
        *   给定服务使用了哪些参数
        *   审核特定用户的操作
    *   记录每个请求的 IP 地址。不要反向 DNS - 具有讽刺意味的是，这样做的成本使攻击者更容易进行 DDOS

    *   记录整个 URI 和 HTTP 方法，例如“GET [http://example.com/path/to/service?arg1=ddos](http://example.com/path/to/service?arg1=ddos) ”
    *   记录用户 ID（如果存在）
    *   记录重要的 HTTP 参数
*   合理的速率限制：您可以对给定 IP 或用户在给定时间段内可以发出的请求数实施限制。合法客户每秒可以发出超过 10 个请求吗？匿名用户可以访问昂贵的报告吗？

*   匿名访问验证码：为所有匿名请求实施验证码，以验证用户是个人，而不是 DDOS 机器人。

> 阻止 DDOS 攻击的最快和最常用的方法是什么？

最快的可能是屈服于勒索，尽管这可能是不可取的。

否则，您要做的第一件事是联系您的托管和/或 CDN 提供商并与他们合作（如果他们还没有联系您，已经询问到底发生了什么......）。当 DDOS 发生时，它可能会附带影响托管服务提供商的其他客户，并且提供商可能会承受相当大的压力来关闭您的网站以保护他们的资源。准备好与提供商共享您的日志（任何和所有信息）；这些日志与它们的网络监视器相结合，可以共同提供足够的信息来阻止/减轻攻击。

如果您期待 DDOS，最好让您的托管服务提供商获得他们可以提供的保护级别的资格。他们应该有 DDOS 经验和缓解它的工具 - 了解他们的工具、流程和升级程序。还要询问托管服务提供商*从其*上游提供商那里获得了哪些支持。这些服务可能意味着更多的前期或每月费用，但将其视为保险单。

在受到攻击时，您需要获取日志并挖掘它们 - 尝试找出攻击的模式。您应该考虑关闭匿名访问并限制受到攻击的服务（即降低应用程序对服务的速率限制）。

如果幸运并且您有一个小的固定客户群，您也许能够确定您的有效客户 IP 地址。如果是这种情况，您可能会在短时间内切换到白名单方法。确保您的所有客户都知道这是怎么回事，以便他们在需要从新 IP 访问时可以致电:)

* * *

[Doug McClean](https://stackoverflow.com/users/11173/doug-mcclean)有一些很好的建议：[https ://stackoverflow.com/a/1029613/1395668](https://stackoverflow.com/a/1029613/1395668)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-30T14:41:36.530

根据问题的PHP部分；

虽然我不依赖 PHP，但它可以实现但需要考虑所有这些可能性或更多；

1.  攻击者可能会更改每个请求的 IP
2.  攻击者可能会将参数传递给目标站点不关心这些参数的 URI
3.  攻击者可能会在到期前重新启动会话...

简单的伪；

```
<?php
// Assuming session is already started
$uri = md5($_SERVER['REQUEST_URI']);
$exp = 3; // 3 seconds
$hash = $uri .'|'. time();
if (!isset($_SESSION['ddos'])) {
    $_SESSION['ddos'] = $hash;
}

list($_uri, $_exp) = explode('|', $_SESSION['ddos']);
if ($_uri == $uri && time() - $_exp < $exp) {
    header('HTTP/1.1 503 Service Unavailable');
    // die('Easy!');
    die;
}

// Save last request
$_SESSION['ddos'] = $hash;
?> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-04T23:23:58.213

php 级别在请求链中来得太晚了。

将 apache 服务器放在开源设备后面可能是一个不错的选择。

[http://tengine.taobao.org/](http://tengine.taobao.org/)有一些文档和源代码更多针对 DDOS 预防的模块。它是 nginx 的扩展，因此您可以轻松地将其设置为您的 apache 实例的反向代理。

见：[http](http://blog.zhuzhaoyuan.com/2012/01/a-mechanism-to-help-write-web-application-firewalls-for-nginx/) ://blog.zhuzhaoyuan.com/2012/01/a-mechanism-to-help-write-web-application-firewalls-for-nginx/如何对抗碰撞有DoS攻击。

也完全忘记了，[http://www.cloudflare.com](http://www.cloudflare.com)是顶级的免费 Web 应用程序防火墙之一，他们有免费和付费计划，并且会从 DDOS 中拯救你的屁股. 太棒了！

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-29T05:52:26.743

您不能在 PHP 级别执行此操作。DDOS 是一种向您的网络服务器发送过多请求的攻击。您的网络服务器将在调用您的 PHP 脚本之前拒绝请求。

如果您使用的是 Apache，这里有一些来自 Apache 的提示： [http ://httpd.apache.org/docs/trunk/misc/security_tips.html](http://httpd.apache.org/docs/trunk/misc/security_tips.html)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-29T16:30:50.110

DDoS 最好由非常昂贵的专用网络设备来处理。主机通常不擅长进行 DDoS 保护，因为它们会受到性能相对较低、状态耗尽、带宽有限等的影响。如果您无法访问 DDoS 缓解硬件，则在某些情况下使用 iptables、apache mods 和类似服务会有所帮助或 DDoS 缓解服务，但它远非理想，仍然使您面临攻击风险。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-02-05T00:47:23.620

您可以在 apache 中为 ddos​​/dos 使用一些插件。好的开始 [http://www.debianadmin.com/how-to-protect-apache-against-dosddos-or-brute-force-attacks.html](http://www.debianadmin.com/how-to-protect-apache-against-dosddos-or-brute-force-attacks.html)

如果你在 LEMP，你可以在这里查看。 [http://nginx.org/en/docs/http/ngx_http_limit_conn_module.html](http://nginx.org/en/docs/http/ngx_http_limit_conn_module.html)

这些都是很好的廉价起点。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-02-19T11:24:56.070

在 PHP 端这样的事情怎么样：

```
//if user does not change IP, then ban the IP when more than 10 requests per second are detected in 1 second
$limitps = 10;
if (!isset($_SESSION['first_request'])){
    $_SESSION['requests'] = 0;
    $_SESSION['first_request'] = $_SERVER['REQUEST_TIME'];
}
$_SESSION['requests']++;
if ($_SESSION['requests']>=10 && strtotime($_SERVER['REQUEST_TIME'])-strtotime($_SESSION['first_request'])<=1){
    //write the IP to a banned_ips.log file and configure your server to retrieve the banned ips from there - now you will be handling this IP outside of PHP
    $_SESSION['banip']==1;
}elseif(strtotime($_SERVER['REQUEST_TIME'])-strtotime($_SESSION['first_request']) > 2){
    $_SESSION['requests'] = 0;
    $_SESSION['first_request'] = $_SERVER['REQUEST_TIME'];
}

if ($_SESSION['banip']==1) {
    header('HTTP/1.1 503 Service Unavailable');
    die;
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-04-24T23:17:38.737

不要使用基于 PHP 的保护，这太可怕了，几乎**不会**产生影响！将您的网络服务器配置为对请求进行速率限制，例如在 Nginx 中使用 limit_req 模块 ( [http://nginx.org/en/docs/http/ngx_http_limit_req_module.html](http://nginx.org/en/docs/http/ngx_http_limit_req_module.html) )

虽然，我建议使用 CloudFlare 来对抗第 4 层 - 但除非您愿意付费，否则不要使用基于第 7 层的攻击。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-08-15T15:21:08.827

DDOS 通常在服务器级别被阻止，请在您的服务器级别启用 DDOS 保护。请查看以下说明以了​​解 DDOS 保护。

有助于防止 DDOS 问题的 Apache HTTP Server 配置设置：

RequestReadTimeout 指令允许限制客户端发送请求的时间。

允许 10 秒接收请求（包括标头）和 30 秒接收请求正文：

```
RequestReadTimeout header=10 body=30 
```

至少等待 10 秒以接收请求正文。如果客户端发送数据，则每收到 1000 个字节将超时时间增加 1 秒，超时时间没有上限（LimitRequestBody 间接给出的限制除外）：

```
RequestReadTimeout body=10,MinRate=1000

RequestReadTimeout header=10-30,MinRate=500
RequestReadTimeout header=20-40,MinRate=500 body=20,MinRate=500 
```

在受到 DoS 攻击的站点上，KeepAliveTimeout 指令也可能会降低。有些网站甚至通过 KeepAlive 完全关闭了 keepalive，当然这在性能上还有其他缺点。应检查其他模块提供的各种超时相关指令的值。

应仔细配置指令 LimitRequestBody、LimitRequestFields、LimitRequestFieldSize、LimitRequestLine 和 LimitXMLRequestBody，以限制客户端输入触发的资源消耗。调整 MaxRequestWorkers 指令以允许服务器在不耗尽资源的情况下处理最大数量的同时连接。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-11-29T17:09:03.213

**防DDOS**步骤：

*   最重要的事情是首先识别 ddos​​ 攻击。更早地识别 ddos​​ 攻击意味着对您的服务器更好。
*   为您的服务器获得更好的可用带宽。始终保持服务器所需的足够带宽。这不会阻止 DDOS 攻击，但需要更长的时间。借此，您将获得一些额外的时间来采取行动。
*   如果您拥有自己的 Web 服务器，那么您可以通过限制路由器的速率来保护网络参数，添加过滤器以将数据包丢弃到不同的攻击源，更积极地超时一半打开的连接。还设置较低的 SYN、ICMP 和 UDP 洪水丢弃阈值。
*   如果您对这些事情不太了解，请尽快联系您的托管服务提供商。他们可以尽力阻止 DDOS 攻击。
*   **Cloudflare**和许多其他公司也提供特殊的 DDOS 缓解服务。它们可以帮助您防止 DDOS 攻击。许多公司还提供廉价的**ddos​​ 保护**和**dos 保护**。

# image - 为什么我的图片在 Firefox 和 IE 上没有垂直居中？

> ID：14477943
> 
> 赞同：0
> 
> 时间：2013-01-23T10:54:40.230
> 
> 标签：image, internet-explorer, firefox, vertical-alignment

[http://www.jsfiddle.net/PUMqS/](http://www.jsfiddle.net/PUMqS/)

facebook 图标在 Opera / Chrome 上垂直居中，但不在 Firefox / IE 上。你知道为什么，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T06:03:09.127

该图标在 Mac 上的 Firefox 中为我垂直居中。

但请注意，它是否取决于您的确切字体以及它们如何被光栅化。如果你在 Windows 上，Firefox 和 IE 都使用 DirectWrite 来处理文本，而 Opera 和 Chrome 使用 GDI。您可以尝试在 Firefox 中关闭硬件加速以使其使用 GDI，看看这是否会改变您的渲染。如果是这样，那么您需要将标记修复为不依赖于居中的文本度量...

# performance - 如何在平板电脑（三星）和 Ipad 上提高 Sencha touch 2 应用程序的性能

> ID：14477947
> 
> 赞同：0
> 
> 时间：2013-01-23T10:55:03.240
> 
> 标签：performance, sencha-touch-2

我对平板电脑（Android）和 ipad 有要求。为此，我使用 sencha touch 2 进行编码，其中使用 phonegap 构建在设备上部署后没有获得良好的性能。例如
- 1\. 如果我点击选择字段，则需要大约 5 秒才能显示弹出窗口。
2\. 我还在创建包含列表的侧面板，点击每个列表项我在详细信息面板上设置单独的视图。这里还需要 5 秒来设置该视图的详细信息面板（在三星 Galaxy 平板电脑上绘制屏幕时最坏的情况）。
有什么办法可以提高平板电脑的性能吗？请帮我解决这个性能问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T08:15:09.223

如果您担心点击事件响应缓慢，您应该看看人们`yelp`在他们的移动网站上做了什么：http: [//engineeringblog.yelp.com/2013/01/mission-beyond-the-mobile-browser.html](http://engineeringblog.yelp.com/2013/01/mission-beyond-the-mobile-browser.html)

让我知道[这](https://github.com/ftlabs/fastclick/blob/master/lib/fastclick.js)是否有帮助

# gcc - GCC 编译器 - 无法识别的选项 '-R/usr'

> ID：14477948
> 
> 赞同：1
> 
> 时间：2013-01-23T10:55:03.320
> 
> 标签：gcc, centos, configure

我正在尝试在 CentOS 6.3 64 位上安装 Cosign 以使用我雇主的中央登录系统。

他们的文档指出我需要设置一个 LDFLAGS 指令：

```
 LDFLAGS="-R/usr -L/usr" 
```

/usr 是 /PATH/TO/SSL/lib - 安装了 openSSL，这是正确的路径。

但是，当我尝试 ./configure 安装时，GCC 会抛出一个我无法解决的错误。

```
 configure:2335: checking for suffix of executables
    configure:2342: gcc -o conftest -pthread  -R/usr -L/usr conftest.c  >&5
    gcc: unrecognized option '-R/usr' 
```

我在 gcc 文档中找不到 -R 作为选项，这让我感到困惑。我正在使用 gcc 版本 4.4.6 20120305 (Red Hat 4.4.6-4)。

我不习惯在参数前看到没有空格的选项，但在这种情况下，添加一个空格以使其成为“-R / usr”只会引发相同的错误。

在 config.log 的前面，我也有这个错误：

```
 configure:2182: gcc -V >&5
    gcc: '-V' option must have argument 
```

任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:03:16.473

LDFLAGS 不应该“按原样”提供给 gcc，这很奇怪，因为它们就像在您的输出中一样。可能是构建脚本中的一些错误。

尝试

```
 LDFLAGS="-Wl,-R/usr,-L/usr" 
```

这应该通过以 gcc 期望的形式包装标志来补偿当前错误。

# .net - .net 安装程序、自定义操作、停止和卸载 windows 服务

> ID：14477949
> 
> 赞同：3
> 
> 时间：2013-01-23T10:55:08.123
> 
> 标签：.net, windows-services, installation, uninstallation, custom-action

我在我的 .net 安装程序应用程序中遇到了一个问题，它将一起安装三个 Windows 应用程序。在这三个应用程序中，一个是 Windows 服务。因此，我的安装程序项目具有来自这三个 Windows 应用程序的三个主要输出。

安装后，所有这些都将按预期安装，安装后 Windows 服务将自动“启动”。

但是，如果我卸载应用程序（当 Windows 服务处于“运行”模式时），安装程序将显示“正在使用的文件”对话框，最终将导致服务未卸载，而其他内容将被删除。但是，如果在卸载之前停止 Windows 服务，它将很好地完成。

我假设发生上述问题是因为安装程序应用程序将尝试删除 service.exe 文件（因为它也捆绑到安装程序中）。

我尝试了以下替代方法：

1.  我试图通过添加一个我试图停止服务的自定义安装程序来克服这个问题。但是，这似乎也不起作用。原因是，默认的“卸载”操作将在“卸载”自定义操作之前执行。（失败的）

2.  将 Windows 服务应用程序的“主要输出”的“永久”属性设置为“真”。我假设安装程序将简单地跳过与主要输出相关的文件。但是（失败）

任何人都遇到过这种问题，请分享您的想法。

如何在卸载前停止服务以便卸载成功？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:58:58.770

我很早以前就遇到过类似的windows服务问题，通过调用`WaitForStatus(ServiceControllerStatus)`方法解决了。该服务需要一些时间来关闭，并且您在服务完全停止之前继续。`Shutdown`编写卸载逻辑以及当状态停止时您想做的任何事情。

如果您正在卸载并且想要在卸载之前停止服务，那么您需要覆盖卸载自定义操作，添加代码以停止它，然后调用`base.Uninstall`. 请记住，`WaitForStatus`15 秒的限制可能不足以让服务关闭，这取决于它的响应速度以及它在关闭时的作用。还要确保调用（或本例中`Dispose()`的`ServiceController`关闭），因为如果你不这样做，内部服务句柄将不会立即释放，如果它仍在使用中，则无法卸载服务。

[MSDN 链接](http://msdn.microsoft.com/en-us/library/w52kaf2y.aspx)

这只是如何在 EventLogger 中实现和记录的示例：

```
public override void Uninstall(System.Collections.IDictionary savedState)
{
 ServiceController controller = new ServiceController("My Service");
 try
 {
  if (controller.Status == ServiceControllerStatus.Running | controller.Status == ServiceControllerStatus.Paused)
  {
   controller.Stop();
   controller.WaitForStatus(ServiceControllerStatus.Stopped, new TimeSpan(0, 0, 0, 30));
   controller.Close();
  }
 }
 catch (Exception ex)
 {
  string source = "My Service Installer";
  string log = "Application";
  if (!EventLog.SourceExists(source))
  {
   EventLog.CreateEventSource(source, log);
  }
  EventLog eLog = new EventLog();
  eLog.Source = source;
  eLog.WriteEntry(string.Concat(@"The service could not be stopped. Please stop the service manually. Error: ", ex.Message), EventLogEntryType.Error);
 }
 finally
 {
  base.Uninstall(savedState);
 }
} 
```

# magento - Magento 低库存报告

> ID：14477956
> 
> 赞同：1
> 
> 时间：2013-01-23T10:55:29.603
> 
> 标签：magento, magento-1.7

我正在使用 Magento 1.7.0.2 并注意到我的低库存报告始终为空白。我需要做些什么才能让此报告显示我的库存水平吗？我设置了 Magento 来管理我的库存，现在商店里有大约 100 种产品。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T11:18:42.400

在 magento 管理面板中转到**System->Configuration->Inventoty->Product Stock Options**并将**Notify for Quantity** below 设置为所需的值。现在，当您生成低库存报告时，所有数量低于**Notify for Quantity** below值的产品将是显示。

# c# - 在 Mvc 4 项目中使用 Entity Framework Code First 进行数据库设计（SQL CE） - 几个问题

> ID：14477961
> 
> 赞同：1
> 
> 时间：2013-01-23T10:55:39.697
> 
> 标签：c#, sql-server, asp.net-mvc, entity-framework, database-design

在我正在开发的应用程序中，向用户展示了一些他们应该个性化的偏好。以下描述了我认为应该如何实施：

偏好：

```
public enum Weighting { One, Two, Three, Four, Five, 
                        Six, Seven, Eight, Nine, Ten }

public class PreferenceOption
{
    public bool PreferenceOptionSelected { get; set; }
    public Weighting Weighting { get; set; }
} 
```

PreferenceOptionSelected 很可能是一个布尔值；如果选中用户可以添加一个权重，如果没有选中则不能应用权重，但是应用程序仍然需要知道它的值是假的——这是为了方便以后搜索。

一个包含所有可用首选项的类：

```
public class PreferenceOptions
{
    public PreferenceOption WantsHouse = new PreferenceOption()
    { PreferenceOptionSelected = false, Weighting = Weighting.One };
    // ... could be up to 15/20 options   
} 
```

保存用户选择/个人偏好的类：

```
public class UserPreferences
{
    public List<PreferenceOptions> UserPreferences { get; set; }
} 
```

问题：

1.  这种设计是处理这种情况的最佳方式吗？

2.  我首先使用 EF 代码。这 3 个类是否需要作为实体保存在数据库中？或者，可以`PreferenceOption`并且`PreferenceOptions`仅存在于内存中，并用于促进获得`UserPreferences`. 这是我无法理解的部分。我将如何最好地存储用户的偏好？餐桌的妆容是什么？

3.  列表是我对如何存储用户首选项的第一个想法，但我知道直接列表不能存储在一行中，但如果序列化为 XML 则可以。如果我使用 XML 方法在搜索之前反序列化效率低/导致性能开销，则用户的偏好将在以后促进搜索很重要。有没有更好的方法来解决我正在考虑的问题？

# c# - CheckBoxList 不可见

> ID：14477964
> 
> 赞同：0
> 
> 时间：2013-01-23T10:55:46.237
> 
> 标签：c#, asp.net, visual-studio-2010

请建议 -

CheckBoxList 不可见 - 它必须显示 3 个角色（目前存在）：

```
<%@ Page Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="false" CodeBehind="admin.aspx.cs" 
Inherits="HSE_Monitoring_Application.admin.admin" title="Untitled Page" %>

<asp:Content ID="Content1" ContentPlaceHolderID="MainContent" Runat="Server">

    <h3>Role Manager</h3>

    <div>
        Enter UserName: 
        <asp:TextBox ID="TxtUserName" runat="server"></asp:TextBox>

        <asp:Button ID="LookupBtn" runat="server" Text="Search" />

    </div>

    <div class="roleList">
        <asp:CheckBoxList ID="RoleList" runat="server" Visible=true>
        </asp:CheckBoxList>
    </div>

    <div>
        <asp:button ID="UpdateBtn" text="Update" Visible="false" runat="server" />
    </div>

</asp:Content> 
```

结果 - 它必须显示 3 个具有 3 个角色的复选框 - 管理员、审批者、审核员和按钮“更新”。这些角色存在。借助角色复选框控件 - 管理员可以在页面上管理角色成员资格。

它仅显示带有文本框和按钮（搜索）的标签（输入用户名）。请回复。如有必要，我可以提供所需的文件。我花了很多时间来解决这个问题。

带着敬意！

* * *

'admin.aspx.cs' 的内容是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.Security;

namespace HSE_Monitoring_Application.admin
{
    public partial class admin : System.Web.UI.Page
    {
        private void PopulateRoleList(String userName)
        {

            RoleList.Items.Clear();

            string[] roleNames;
            //string roleName="";

            roleNames = Roles.GetAllRoles();

            Response.Write(roleNames);

            foreach (string roleName in roleNames)
            {
                ListItem roleListItem = new ListItem();
                roleListItem.Text = roleName;
                roleListItem.Selected = Roles.IsUserInRole(userName, roleName);
                RoleList.Items.Add(roleListItem);
            }
        }

        private void UpdateRolesFromList()
        {
            foreach (ListItem roleListItem in RoleList.Items)
            {
                string roleName = roleListItem.Value;
                string userName = TxtUserName.Text;
                Boolean enableRole = roleListItem.Selected;

                if (enableRole == true && Roles.IsUserInRole(userName, roleName) == false)
                {
                    Roles.AddUserToRole(userName, roleName);
                }
                else if (enableRole == false && Roles.IsUserInRole(userName, roleName) == true)
                {
                    Roles.RemoveUserFromRole(userName, roleName);
                }
            }
        }

        private void LookupBtn_Click(object sender, EventArgs e)
        {
            PopulateRoleList(TxtUserName.Text);
            UpdateBtn.Visible = true;
        }

        private void UpdateBtn_Click(object sender, EventArgs e)
        {
            UpdateRolesFromList();
            PopulateRoleList(TxtUserName.Text);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T11:58:56.147

`PopulateRoleList`首先，我从您的代码中注意到，当您的页面加载时，您没有在任何地方调用该方法-`Page_Load`在您的代码中不存在。单击 时会调用此方法`LookupBtn_Click`。所以最初，CheckBoxList 是空的。

其次，*如果 CheckBoxList 的 DataSource 或 Items 为空，则 CheckBoxList*在页面上不可见。（*仍在寻找为什么会这样*）

**结论是：**验证您的 Roles 数组不为空。

您的填充方法应该如此简单

```
 private void PopulateRoleList(String userName)
 {
     string[] roleNames = Roles.GetAllRoles();
     RoleList.DataSource = roleNames;  //if this is empty, CheckBoxList is not visiblie
     RoleList.DataBind();

     foreach (ListItem item in RoleList.Items)
     {                
          string roleName = item.Value; //Or item.Text;
          item.Selected = Roles.IsUserInRole(userName, roleName);
     }
 } 
```

# jquery - jqPlot - 不能将 x 轴显示为右侧的图例

> ID：14477967
> 
> 赞同：1
> 
> 时间：2013-01-23T10:55:56.937
> 
> 标签：jquery, jqplot

我正在将 jqPlot 用于条形图，并且我想将 x 轴显示为图例。

附上截图...

![在此处输入图像描述](../Images/56461d526d455c7bef9d70226eed2709.png)

代码：

```
var s1 = [2.5, 6.3, 7.4, 10]; 
var ticks = ['a', 'b', 'c', 'd']; 
plot2 = $.jqplot('chart2', [s1], { 
seriesDefaults: { 
     renderer:$.jqplot.BarRenderer, rendererOptions:{ varyBarColor : true }, 
     pointLabels: { show: true }, showLabel: true,   }, 
     series: [ {label: 'Cups'}, {label: 'Dishes'}, ], 
     legend: { show: true, placement: 'outside', //rendererOptions: {numberColumns: 2}   }, 
     axes: { xaxis: { renderer: $.jqplot.CategoryAxisRenderer, ticks: ticks }, 
             yaxis:{  tickOptions:{ formatString:'%.2f%' } } } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T18:05:15.443

以下是如何执行此操作的[示例：](http://jsfiddle.net/KmuDA/)

```
var s1 = [2.5, 6.3, 7.4, 10]; 
var ticks = ['a', 'b', 'c', 'd']; 
plot2 = $.jqplot('chart1', [s1,[],[],[]], { //give it extra blank series
seriesDefaults: { 
       renderer: $.jqplot.BarRenderer, 
       rendererOptions: { varyBarColor : true }, 
       pointLabels: { show: true }, 
       showLabel: true
     }, 
     series: [ {}, 
               {renderer: $.jqplot.LineRenderer}, // set our empty series to the lineRenderer, so the bar plot isn't padded for room
               {renderer: $.jqplot.LineRenderer},
               {renderer: $.jqplot.LineRenderer} ], 
     legend: { show: true, placement: 'outside', labels: ticks},  // give the legend the tick labels
     axes:   { xaxis: { renderer: $.jqplot.CategoryAxisRenderer, ticks: ticks }}, 
     yaxis:  {  tickOptions:{ formatString:'%.2f%' } }
}); 
```

产生：

![在此处输入图像描述](../Images/eeeae1e3a17114e12e78684ae0ee9a93.png)

# sql - 这些 SQL 语句在功能上是否等效？

> ID：14477973
> 
> 赞同：0
> 
> 时间：2013-01-23T10:56:09.947
> 
> 标签：sql, oracle, join, subquery

我正在做一些 SQL 优化，但我的 SQL fu 可以使用一些改进......

为什么要对子查询进行联接，这可能只是直接的内部联接，还是我遗漏了什么？

```
 -- Why do a join and a subquery?
        -- INNER JOIN  (
        --          SELECT client_id, session_id, id, customer_id, validity, machine_id, 
        --                  utc_date_completed, itemStatus, totalValue, utc_date_updated, 
        --                  itemValue, itemId, itemName, customField1, customField2, itemPage, itemCurrency
        --          FROM data.dashboard WITH(NOLOCK)
        --          WHERE client_id = @client_id
        --          ) d  ON cm.client_id = d.client_id

        INNER JOIN data.dashboard AS d ON cm.client_id = d.client_id AND d.client_id = @client_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:58:47.577

是的，在功能上它们是相同的，你应该有更好的性能来做一个`INNER JOIN`. 检查执行计划的性能。

而且它更具可读性和可维护性。

# documentation - doxygen - 如何隐藏一个类而不将其成员隐藏在子类中？

> ID：14477977
> 
> 赞同：3
> 
> 时间：2013-01-23T10:56:27.263
> 
> 标签：documentation, doxygen, documentation-generation

我有一个代码（在 C++ 中，但对于其他语言的问题解决方案可能类似）：

```
namespace details {
  struct C {
    /// Documentation for common method.
    void c();
  };
};

/// Documentation for class A
struct A: public details:C {
  /// Documentation for method a
  void a();
};

/// Documentation for class B    
struct B: public details:C {
  /// Documentation for method b
  void b();
}; 
```

而且我想在文档中隐藏类 C（和整个细节命名空间）（它的存在只是为了使 A 和 B 实现更短）。但是我需要在文档中包含 A 和 B，并记录**c 成员（以及从 C 继承的所有其他成员）**，例如源代码：

```
/// Documentation for class A
struct A {
  /// Documentation for method a
  void a();

  /// Documentation for common method.
  void c();
};

/// Documentation for class B    
struct B {
  /// Documentation for method b
  void b();

  /// Documentation for common method.
  void c();
}; 
```

如何正确执行此操作？

# java - 多线程中的 AES+HMAC 加密 - Java

> ID：14477978
> 
> 赞同：3
> 
> 时间：2013-01-23T10:56:27.420
> 
> 标签：java, multithreading, encryption, aes, hmac

我正在开发一个小程序来加密/解密二进制文件，使用 AES-256 和 HMAC 来检查结果。

我的代码基于 Java 中的 AESCrypt 实现，但我想修改它以允许多个线程同时完成这项工作。

我得到原始字节的大小并计算每个线程16字节块的数量，然后我用有关偏移量的信息启动线程以申请读写（因为加密文件有一个头，所以offset_write = offset_read +header_length）。

当它完成加密时，我通过 HMAC 传递了输出内容（没有标题）以生成校验和。

问题是两个线程之间的字节中的某些字节被破坏了。

主要代码：

```
//..
// Initialization and creation of iv, aesKey
//..

in = new FileInputStream(fromPath);
out = new FileOutputStream(toPath);

//..
// Some code for generate the header and write it to out
//..
double totalBytes = new Long(archivo.length()).doubleValue();
int bloquesHilo = new Double(Math.ceil(totalBytes/(AESCrypt.NUM_THREADS*AESCrypt.BLOCK_SIZE))).intValue();
int offset_write = new Long((out.getChannel()).position()).intValue();

for (int i = 0; i < AESCrypt.NUM_THREADS; i++)
{
    int offset = bloquesHilo*AESCrypt.BLOCK_SIZE*i;
    HiloCrypt hilo = new HiloCrypt(fromPath, toPath, ivSpec, aesKey, offset, offsetInicio, bloquesHilo, this);
    hilo.start();
} 
```

线程代码（HiloCrypt 类）： public class HiloCrypt extends Thread {

```
 private RandomAccessFile in;
    private RandomAccessFile out;

    private Cipher cipher;
    private Mac hmac;
    private IvParameterSpec ivSpec2;
    private SecretKeySpec aesKey2;

    private Integer num_blocks;
    private Integer offset_read;
    private Integer offset_write;

    private AESCrypt parent;

    public HiloCrypt(String input, String output, IvParameterSpec ivSpec, SecretKeySpec aesKey, Integer offset_thread, Integer offset_write, Integer blocks, AESCrypt parent2) 
    {
        try
        {
                        // If i don't use RandomAccessFile there is a problem copying data
            this.in = new RandomAccessFile(input, "r");
            this.out = new RandomAccessFile(output, "rw");

            int total_offset_write = offset_write + offset_thread;

                        // Adjust the offset for reading and writing 
            this.out.seek(total_offset_write);
            this.in.seek(offset_thread);

            this.ivSpec2 = ivSpec;
            this.aesKey2 = aesKey;

            this.cipher = Cipher.getInstance(AESCrypt.CRYPT_TRANS);
            this.hmac = Mac.getInstance(AESCrypt.HMAC_ALG);

            this.num_blocks = blocks;
            this.offset_read = offset_thread;
            this.offset_write = total_offset_write;
            this.parent = parent2;

        } catch (Exception e)
        {
            System.err.println(e);
            return;
        }
    }

    public void run()
        {
        int len, last,block_counter,total = 0;
        byte[] text = new byte[AESCrypt.BLOCK_SIZE];

        try{
            // Start encryption objects
            this.cipher.init(Cipher.ENCRYPT_MODE, this.aesKey2, this.ivSpec2);
            this.hmac.init(new SecretKeySpec(this.aesKey2.getEncoded(), AESCrypt.HMAC_ALG));

            while ((len = this.in.read(text)) > 0 && block_counter < this.num_blocks) 
            {
                this.cipher.update(text, 0, AESCrypt.BLOCK_SIZE, text);
                this.hmac.update(text);

                // Write the block
                this.out.write(text);

                last = len;
                total+=len;

                block_counter++;
            }

            if (len < 0) // If it's the last block, calculate the HMAC
            {
                last &= 0x0f;
                this.out.write(last);

                this.out.seek(this.offset_write-this.offset_read);

                while ((len = this.out.read(text)) > 0) 
                {
                    this.hmac.update(text);
                }

                // write last block of HMAC
                text=this.hmac.doFinal();
                this.out.write(text);
            }

                        // Close streams
            this.in.close();
            this.out.close();

                        // Code to notify the end of the thread
        }
        catch(Exception e)
        {
            System.err.println("Hola!");
            System.err.println(e);
        }
    }
} 
```

使用此代码，如果我只执行 1 个线程，加密/解密就会完美，但是如果有 2 个以上的线程，线程作业之间的区域中的字节就会出现问题，数据在那里被损坏并且校验和也失败了。

我正在尝试使用线程来执行此操作，因为它比使用一个线程快 2 倍，我认为这应该是因为处理而不是访问文件。

作为无关数据，它在 MB Air 上在 43 秒内压缩了 250Mb 的数据。¿ 现在是好时机吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T11:00:29.533

AESCrypt[不是线程安全](http://read.pudn.com/downloads144/sourcecode/crypt/628305/aescrypt-java/src/es/vocali/util/AESCrypt.java__.htm)的。您不能对它使用多个线程。

一般来说，加密代码很少是线程安全的，因为它需要复杂的数学来生成安全的输出。AES 本身相对较快，如果您需要更快的速度，请考虑垂直缩放或硬件加速器作为第一步。稍后，您可以添加更多服务器以同时加密*不同的*文件（水平缩放）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T11:06:36.153

您基本上想要多线程操作本质上是**顺序**的。

`Stream cipher`不能并行，因为每个块都依赖于前一个块的完成。因此，您**可以**独立并行加密多个文件，性能略有提升，尤其是当文件在内存中而不是在磁盘上时，但您**无法**使用多个内核加密单个文件。

如我所见，您使用了一种`update`方法。我不是 Java 密码学方面的专家，但即使方法的名称也告诉我加密算法拥有一个**状态**：“多线程”和“状态”不是朋友，你必须处理跨线程的状态管理。

比赛条件解释了为什么你会损坏方块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T11:32:29.670

为 HMAC 使用超过 1 个线程绝对没有意义，因为 1）它必须按顺序计算，并且 2）I/O 访问 R/W 比实际的 HMAC 计算慢得多

对于 AES，在使用 CNT 模式或其他不需要了解先前数据块的链接模式时使用多个线程可能是一个好主意。

将问题转移到crypto-stackexchange怎么样？

# asp.net - 可以手动将 OData 参数应用于“.AsQueryable()”的结果吗？

> ID：14477982
> 
> 赞同：4
> 
> 时间：2013-01-23T10:56:50.530
> 
> 标签：asp.net, entity-framework-4, asp.net-mvc-4, asp.net-web-api, odata

我有一个返回 的 MVC4 WebAPI 控制器，`IQueryable`因此我可以`$filter`在 URL 中使用和朋友来操作来自 REST 端点的结果。这是我的控制器：

```
public class EnrollmentController : ApiController
{
    [Queryable]
    public IQueryable<tblEnrollment> Get()
    {
        var context = new ProjectEntities();
        context.ContextOptions.LazyLoadingEnabled = false;
        return context.tblEnrollment.AsQueryable();
    }
} 
```

但是，就像[这张海报](https://stackoverflow.com/questions/12182866/ember-data-how-do-mappings-work)一样，我想让 JSON 输出格式有点不同，以便与 Ember Data 的预期格式更友好。所以我想返回这个：

```
return new { enrollment = context.tblEnrollment.AsQueryable() }; 
```

但是，这会破坏 OData 功能，因为我没有返回`IQueryable`到 WebAPI 层。所以，我想知道是否有办法做这样的事情：

```
return new { enrollment = context.tblEnrollment.AsQueryable().ApplyOData() }; 
```

我敢肯定这会是真的……但是有什么方法可以显式地处理 OData 参数`IQueryable`而不是让 WebAPI 层在从`Get`方法返回的结果集上隐式地执行它？还是有另一种方法可以在这里完成我想要的？

顺便说一句，我暂时停留在 EF4 上，因为我无法升级到 VS2012（因此无法升级到 .NET4.5 和 EF5）。如果有帮助，我理论上可以升级到 EF 4.3.1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T15:38:31.027

您可以添加一个 ODataQueryOptions 类型的参数并手动应用它，而不是将您的操作标记为 [Queryable]。下面是它的样子：

```
public class EnrollmentController : ApiController
{
    public object Get(ODataQueryOptions<tblEnrollment> query)
    {
        var context = new ProjectEntities();
        context.ContextOptions.LazyLoadingEnabled = false;
        var queryResults = query.ApplyTo(context.tblEnrollment.AsQueryable());
        return new { enrollment = queryResults };
    }
} 
```

# qt - CommEvent 在 Qt 中重叠

> ID：14477984
> 
> 赞同：2
> 
> 时间：2013-01-23T10:56:57.200
> 
> 标签：qt, qextserialport

我在 QT 中使用 Qextserialport，但我不断收到警告：

```
CommEvent overlapped write error: 995 
```

这个警告是什么意思？更重要的是，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:43:35.527

从[源头](http://code.google.com/p/qextserialport/source/browse/src/qextserialport_win.cpp)看来，`GetLastError()`返回的是 995。995 代表`ERROR_OPERATION_ABORTED`-*由于线程退出或应用程序请求，I/O 操作已中止。*

这是来自`winerror.h`：

```
//
// MessageId: ERROR_OPERATION_ABORTED
//
// MessageText:
//
// The I/O operation has been aborted because of either a thread exit or an application request.
//
#define ERROR_OPERATION_ABORTED          995L 
```

# jquery - jquery 对选择器或 html 元素的影响

> ID：14477985
> 
> 赞同：1
> 
> 时间：2013-01-23T10:57:02.330
> 
> 标签：jquery, jquery-selectors

我正在使用 CodeAcademy 学习 JQuery。那么当 jquery 在 HTML 元素上创建效果时，特别是*fadeOut*，它会从页面中删除 HTML 元素吗？还是将其推入某种数据结构中？

问题的原因是，我注意到（在我的以下代码中），一旦按钮淡出，相邻的按钮就会出现。由于我稍后淡入，因此该元素必须存在于某处。那么 JQUERY 究竟是如何工作的呢？

我是 HTML 新手，所以请善待。

**HTML**

```
<!DOCTYPE html>
<html>
    <head>
        <title>Vanishing Act</title>
        <link rel='stylesheet' type='text/css' href='stylesheet.css'/>
        <script type='text/javascript' src='script.js'></script>
    </head>
    <body>
        <div id="blue"></div>
        <div></div>
        <div></div>
        <div></div>
        <br/><button>Click Me!</button>
    </body>
</html> 
```

**CSS**

```
div {
    height: 100px;
    width: 100px;
    display: inline-block;
    background-color: #F38630;
    border-radius: 5px; }

#blue {
    background-color: #A7DBD8; } 
```

**脚本**

```
$(document).ready(function() {
    $('button').click(function() {
        $('#blue').fadeOut('slow');
            $('button').click(function(){
               $('#blue').fadeIn('slow');
            });
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:26:53.200

它不会从 DOM 中删除。元素的不透明度值会定期更改/减少，直到 0 并且 CSS`display`属性更改`none`为元素。为避免元素向上/向下移动，请在元素上使用自定义动画，仅更改不透明度值。

此外，fadeIn、fadeOut 不会改变 CSS 可见性属性。它会在更改 CSS 不透明度属性后更改 CSS 显示属性。

`visibility`为了解释 CSS和 CSS属性之间的区别`display`，这个链接上有一个有趣的例子：[http ://www.kavoir.com/2009/02/css-difference-between-opacity0-visibilityhidden-and-displaynone.html](http://www.kavoir.com/2009/02/css-difference-between-opacity0-visibilityhidden-and-displaynone.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:01:28.483

当您通过萤火虫检查元素时，您可能会注意到当您淡出时样式 `display:none`被添加到 div 并在您淡入`display:inlinestyle`时应用

您可以像这样使用此代码

```
$(document).ready(function() {
    $('button').click(function() {
        $('#blue').fadeToggle('slow');

    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T11:01:41.130

jQuery 使用[`display: none`](https://developer.mozilla.org/en-US/docs/CSS/display)它使元素不可见并将其从 UI 中取出。

fadeOut 是这个动画的快捷方式（来自 jQuery 源代码）：

```
fadeOut: { opacity: "hide" }, 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T11:02:30.160

除非您使用`remove()`jQuery，否则不会从 DOM（“HTML 页面”）中删除元素！jQuery 大量使用 CSS（“样式”），这意味着元素的属性发生了变化。

`fadeOut()`“only”将效果结束时的可见性设置为“不可见”，但该元素在技术上仍然存在，但不再可见。

*从技术上讲，jQuery 使用该`display`属性并将其设置为`none`. 但我用“可见性”解释它以便更好地理解。*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T11:02:55.383

如果您在 chrome 或其他工具中打开开发人员工具，您会看到您已经淡出的元素基本上在一段时间内其不透明度降低到 0，然后将显示值设置为“无”，例如

前：

```
<p>
  If you click on this paragraph
  you'll see it just fade away.
  </p> 
```

中：

```
<p style="opacity: 0.4566767676767;">
  If you click on this paragraph
  you'll see it just fade away.
  </p> 
```

后：

```
<p style="display: none;">
  If you click on this paragraph
  you'll see it just fade away.
  </p> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-23T11:04:39.743

在淡出 jquery 上，只是将显示样式从以前的（可能是内联块）更改为无。

```
style="dislplay:inline-block" 
```

到

```
style="display:none" 
```

然后该元素被隐藏。

在淡入时会发生同样的事情，但 jquery 在淡出之前将显示值存储在变量中。使用该变量，它可以在淡入时检索显示样式。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-23T11:04:45.433

FadeOut 和 FadeIn 更改元素的 CSS 'display' 属性，但该元素仍然存在于页面中。

如果您使用的是 Chrome，请右键单击页面中的第一个方块，然后单击“检查元素”。您将在页面底部看到标记代码，并在单击按钮时观看实时更改样式。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-10T17:52:05.363

创建一个名为`$target`in的变量`script.js`并使用`=`符号将其分配给表示有序列表中 #4 的 jQuery 选择器。当您运行代码时，它应该会消失！

# asp.net - 在网页中一一加载大约 19 个控件的用户控件

> ID：14477991
> 
> 赞同：1
> 
> 时间：2013-01-23T10:57:10.117
> 
> 标签：asp.net, user-controls

如何在网页中一个一个地加载大约 19 个用户控件，以便当其他控件同时加载并附加到单个网页中时，我可以访问加载的用户控件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:16:40.500

页面中有大约 19 个 UpdatePanel。在每个控件中都有一个 Timer，它将触发 UserControl 的加载。这样，每个 Usercontrol 都会在 Timer 事件上加载，并且用户可以在加载时使用它。

由于 Web 浏览器可以有 6 个并发 AJAX 请求，因此请确保您的计时器定期启动。

# jquery - jquery中的确认对话框

> ID：14477992
> 
> 赞同：0
> 
> 时间：2013-01-23T10:57:18.027
> 
> 标签：jquery

如果确定要删除 jquery 中的选定数据，我如何放置确认对话框来通知用户。我希望询问用户是否要删除。下面的代码完美运行，但我希望它具有该功能。

```
<script type="text/javascript">
$(document).ready(function () {
    $('a.delete').click(function (e) {
        e.preventDefault();
        var parent = $(this).parent();
        $.ajax({
            type: 'POST',
            url: 'delete.php',
            data: 'ajax=1&delete=' + parent.attr('id').replace('record-', ''),
            beforeSend: function () {
                parent.animate({
                    backgroundColor: '#fbc7c7'
                }, 300)
            },
            success: function () {
                parent.slideUp(300, function () {
                    parent.remove();
                });
            }
        });
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:01:51.887

只需用以下内容包装您的实际操作：

> if (confirm('Are you sure??')) { /* 此处的操作 */ }

编辑：或如 Chris 建议的那样使用 jQuery 对话框进行更友好的用户交互

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T11:04:39.820

```
$('<div></div>').appendTo('body')
                    .html('<div><h6>Are you sure?</h6></div>')
                    .dialog({
                        modal: true, title: 'Delete message', zIndex: 10000, autoOpen: true,
                        width: 'auto', resizable: false,
                        buttons: {
                            Yes: function () {
                                // Do ajax request $(obj).removeAttr('onclick');                                
                                // $(obj).parents('.Parent').remove();

                                $(this).dialog("close");
                            },
                            No: function () {
                                $(this).dialog("close");
                            }
                        },
                        close: function (event, ui) {
                            $(this).remove();
                        }
                    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T11:02:51.603

```
<script type="text/javascript">
$(document).ready(function(){
$('a.delete').click(function(e){
e.preventDefault();
if(confirm("do you want to delete this record ?")){
  var parent = $(this).parent();
  $.ajax({
    type: 'POST',
    url: 'delete.php',
    data: 'ajax=1&delete=' + parent.attr('id').replace('record-',''),
    beforeSend: function(){
    parent.animate({backgroundColor:'#fbc7c7'},300)
  },
  success: function(){
    parent.slideUp(300,function(){
       parent.remove();
    });
  }
  });
} 
});
});
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T11:00:07.833

使用 jqueryUI 对话框，它完全可以满足您的要求，请参阅[此处](http://jqueryui.com/dialog/#modal-confirmation)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T11:08:58.833

您可以使用确认对话框，每当用户单击删除链接时，它会询问您真的要删除吗？如果 ans 正常，则返回 true。

代码是这样的。

```
<script type="text/javascript">
$(document).ready(function(){
$('a.delete').click(function(e){
    e.preventDefault();
    var parent = $(this).parent();

    var check = confirm("Do you want to delete ?");
    if(check == true)
    {
        $.ajax({
            type: 'POST',
            url: 'delete.php',
            data: 'ajax=1&delete=' + parent.attr('id').replace('record-',''),
            beforeSend: function(){
                parent.animate({backgroundColor:'#fbc7c7'},300)
            },
            success: function(){
                parent.slideUp(300,function(){
                parent.remove();
            });
            }
        });
    }
});
});
</script> 
```

# java - 为什么会出现语法错误

> ID：14477994
> 
> 赞同：-1
> 
> 时间：2013-01-23T10:57:21.490
> 
> 标签：java, syntax-error

```
// The "Summative" class.
// Melanie Deivendram
// Jan.16,2012
// Purpose: To create a program as part of the summative
import java.awt.*;
import hsa.Console;

public class Summative

    static Console c;           // The output console

    public static void main (String[] args)
    {
        c = new Console ();

        // Title Page 

        c.setColor (Color.orange);
        c.fillRect (0, 0, 2000, 900);
        c.drawRect (0, 0, 2000, 900);

        c.setColor (Color.white);
        Font times = new Font ("Times", Font.BOLD, 50);
        c.setFont(times);
        c.drawString ("Summative", 180, 50);

        Font tahoma = new Font ("Tahoma", Font.BOLD, 20);
        c.setFont(tahoma);

        c.getChar ();
        c.clear ();       

        int choice;

        {
        c.drawString ("\t\t 1.Count Vowels", 0, 250);
        c.drawString ("\t\t 2.One Dimensional Array Task", 0, 300);
        c.drawString ("\t\t 3.Graphical animation", 0, 350);
        c.drawString ("\t\t 4.String Methods", 0, 400);
        c.drawString ("\t\t 5.ICS3U Program Portfolio ", 0, 450);
        c.drawString ("\t\t 6.Exit", 0, 490);

        }

       do
        {
        c.print ("What is your choice (1-6): ");
        choice = c.readInt ();
        if ((choice < 1) || (choice > 6))
        c.println ("Invalid ... enter 1-6 only");
        }
        while ((choice < 1) || (choice > 6));
        switch (choice)
        {

        }
        }
         if (choice==1)

         {

        c.println ("What word would you like to enter?");

    String word = c.readString ();

    int count1 = 0;
      for (int num = 0 ; num < word.length () ; num++)
      {
        char numbers = word.charAt (num);
        if (numbers == '0' || numbers == '1' || numbers == '2' || numbers == '3' || numbers == '4' || numbers == '5' || numbers == '6' || numbers == '7' || numbers == '8' || numbers == '9')
        {
          count1++;
        }
      }

      if (count1 != 0)

      {
      c.println("That is invalid, please try again");
      }

     if (count1 == 0)
  {

    int count = 0;
      for (int num = 0 ; num < word.length () ; num++)
      {
        char vow = word.charAt (num);
        if (vow == 'a' || vow == 'e' || vow == 'i' || vow == 'o' || vow == 'u' || vow == 'A' || vow == 'E' || vow == 'I' || vow == 'O' || vow == 'U')
        {
          count++;
        }
      }
      c.println (" There are " + count + " vowels");

      if (count == 0)

      {
      c.println("There are no vowels in the word");
      }

  } 
```

这是我的考试项目，运行程序时似乎出现语法错误。错误发生在第 8 行和第 9 行，一个有类，一个在它下面。我在这里做的是一个菜单，这些是选项。我使用“准备编程”来创建程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T10:59:17.107

你的失踪`{`：

```
public class Summative {

    static Console c; 
```

**编辑**

正如@ccheneson 所提到的`}`，您的类定义的结束似乎也不见了。

你应该看看你的代码缩进，它一开始似乎很好，但后来失败了。通过适当的缩进，您可以轻松发现这些错误，因为几乎所有缩进的块都必须用 and 括`{`起来`}`。

# c# - 幻灯片效果不流畅

> ID：14477996
> 
> 赞同：3
> 
> 时间：2013-01-23T10:57:27.623
> 
> 标签：c#, winforms, animation

我正在尝试以滑动效果将控件移动到另一个控件的位置。下面的代码有效，但并不像预期的那样顺利。我知道每移动一个像素都必须重新绘制，这与这个问题有关。有什么办法可以让它顺利吗？

```
void changePage(Control currentPage, Control newPage)
{
    int curPageStartX = currentPage.Location.X;
    newPage.Location = new Point(currentPage.Size.Width + curPageStartX, currentPage.Location.Y);
    while (newPage.Location.X > curPageStartX)
    {
        currentPage.Location = new Point(currentPage.Location.X - 1, currentPage.Location.Y);
        newPage.Location = new Point(newPage.Location.X - 1, newPage.Location.Y);
    }
} 
```