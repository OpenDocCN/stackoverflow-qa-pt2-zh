# StackOverflow 问答 15871000-15871999

# flash - 杀死游戏敌人 ActionScript 3.0

> ID：15871007
> 
> 赞同：0
> 
> 时间：2013-04-08T03:57:48.820
> 
> 标签：flash, actionscript, game-development

他们不是真正的敌人，他们只是你射出的气球。但是，当他们使用 addChild 添加时，当我单击（拍摄）它们时，它们都没有播放它们的“死亡”动画。这是我的代码。如果它看起来杂乱无章，请原谅，我刚开始使用 ActionScript，之前没有 OOP 经验。

一切正常，除了点击孩子似乎根本没有注册到添加到舞台的对象。我没有外部类，我所有的实例名称都是正确的。我在链接中称气球为“受害者”。

```
import flash.display.MovieClip;
import flash.utils.Timer;
import flash.events.MouseEvent;

Mouse.hide();
cursor_mc.startDrag(true);

stage.addEventListener(MouseEvent.MOUSE_DOWN, onClick);
shotHandler.addEventListener(MouseEvent.MOUSE_DOWN, boxShot);

function boxShot(evt:MouseEvent):void
{
    enemyBox.gotoAndStop(2);
}

    function onClick(event:MouseEvent):void

    {
        cursor_mc.play();
        var myBullet:MovieClip = new black_mc();
        myBullet.x = mouseX; myBullet.y = mouseY;
        stage.addChildAt(myBullet , 0);
    }

    var myTimer:Timer = new Timer(1200, 300);
    myTimer.addEventListener(TimerEvent.TIMER, createEnemies);
    myTimer.start();

    function createEnemies(e:Event):void
    {

        var circle:MovieClip = new victim();
        circle.x = Math.random() * stage.stageWidth;
        circle.y = Math.random() * stage.stageHeight;
        addChildAt(circle , 2);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T06:03:27.673

我查看了您的代码，但没有看到在您的“受害者”对象上添加了任何 MouseListeners。无论如何，如果你需要在点击对象时对它做一些事情，你可以这样写：

```
function createEnemies(e:Event):void //your enemy creation function
{

    var circle:MovieClip = new victim();

    circle.addEventListener(MouseEvent.CLICK, onObjClick); // here is your click listener

    circle.x = Math.random() * stage.stageWidth;
    circle.y = Math.random() * stage.stageHeight;
    addChildAt(circle , 2);

}

private function onObjClick(event:MouseEvent):void {
    var target:MovieClip = event.currentTarget as victim;
    target.gotoAndPlay("destroyAnim");
    //target.goToDeath();  uncomment this and comment previous line if you already have a destroy function into your "victim" class.
} 
```

# scala - Twitter4j 流关闭

> ID：15871010
> 
> 赞同：1
> 
> 时间：2013-04-08T03:58:20.587
> 
> 标签：scala, twitter, stream, twitter4j

我正在使用 Twitter 流对某些过滤后的推文进行采样。但是，我只想提取一小组推文，因此我使用时间来控制何时关闭流。同时我写一个文件。但是，在我退出程序之前，流会继续并且不会关闭。有什么理由吗？我正在使用 scala 来执行此操作，这是我的代码：

```
def simpleStatusListener = new StatusListener() {
    def onStatus(status: Status) { 
      appendToFile("/tmp/stream.txt",status.getText) 
    }
    def onDeletionNotice(statusDeletionNotice: StatusDeletionNotice) {}
    def onTrackLimitationNotice(numberOfLimitedStatuses: Int) {}
    def onException(ex: Exception) { ex.printStackTrace }
    def onScrubGeo(arg0: Long, arg1: Long) {}
    def onStallWarning(warning: StallWarning) {}
    }

val twitter = new TwitterFactory().getInstance

twitterStream.addListener(simpleStatusListener)

val now = System.nanoTime
if((System.nanoTime-now)/1000000 > 10){
      twitterStream.cleanUp
      twitterStream.shutdown
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T08:03:24.267

`now`关闭流的位可能会在计算变量的行之后立即执行。因此，if 条件不太可能`(System.nanoTime-now)/1000000 > 10`成立。这是一个解决方案：

```
def simpleStatusListener = new StatusListener() {
  def onStatus(status: Status) { 
    appendToFile("/tmp/stream.txt",status.getText) 
  }
  def onDeletionNotice(statusDeletionNotice: StatusDeletionNotice) {}
  def onTrackLimitationNotice(numberOfLimitedStatuses: Int) {}
  def onException(ex: Exception) { ex.printStackTrace }
  def onScrubGeo(arg0: Long, arg1: Long) {}
  def onStallWarning(warning: StallWarning) {}
}

val twitter = new TwitterFactory().getInstance

twitterStream.addListener(simpleStatusListener)

//scheduling the closing of the stream
val interval = 10 * 1000000

val timer = new Timer() 

val cancelTask = new TimerTask {
  def run() {
    twitterStream.cleanup()
    twitterStream.shutdown()
  }
}

timer.schedule(cancelTask, interval) 
```

# cakephp - Cakephp 2 RequestHandlerComponent 没有方法 beforeRender 错误信息，无法解析 RSS

> ID：15871014
> 
> 赞同：0
> 
> 时间：2013-04-08T03:58:32.190
> 
> 标签：cakephp, cakephp-2.3, requesthandler

我有两个不同的问题：

1.  呈现默认请求时出错（html）
2.  渲染 rss 请求时出错。

这是我的代码：

```
class PagesController extends AppController {
    public $name = 'Pages';
    public $components = array('RequestHandler');
    public $helpers = array('Text');
} 
```

以下是正常请求的代码。

```
 //problem #1:
  public function display() { 
    $path = func_get_args();

    $count = count($path);
    if (!$count) {
            $this->redirect('/');
    }

    $page = $subpage = $title_for_layout = null;

    if (!empty($path[0])) {
            $page = $path[0];
    }

    if (!empty($path[1])) {
            $subpage = $path[1];
    }

    if (!empty($path[$count - 1])) {
            $title_for_layout = Inflector::humanize($path[$count - 1]);
    }

    $this->setDefaultMeta();
    $this->layout = 'default';
    $this->set(compact('page', 'subpage', 'title_for_layout'));
    $this->render(implode('/', $path));
} 
```

这是用于 rss 请求

```
 public function feeds(){  
    if( $this->RequestHandler->isRss() ){ 
        $this->loadModel('Deal');
        $arrId = $this->Deal->DealBuyCondition->listAliveID();

        $posts = $this->Deal->rssFeeds($arrId);  
        return $this->set(compact('posts'));
    }
    die('rss only');
    return false;
} 
```

第一个函数返回错误：

```
Warning (2): call_user_func_array() expects parameter 1 to be a valid callback, class 'RequestHandlerComponent' does not have a method 'beforeRender' [CORE\Cake\Utility\ObjectCollection.php, line 132]

Warning (2): call_user_func_array() expects parameter 1 to be a valid callback, class 'RequestHandlerComponent' does not have a method 'shutdown' [CORE\Cake\Utility\ObjectCollection.php, line 132] 
```

并且第二个函数没有正确呈现为 RSS。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:31:26.797

您的 CakePHP 设置可能搞砸了。`RequestHandlerComponent`确实有一个`beforeRender`方法和`shutdown`方法（从 parent 继承`Component`），所以这些错误很奇怪。尝试获取 CakePHP 的新副本。

# java - 迭代未知大小的多维数组的所有组合而不重复任何组合的最佳方法是什么？

> ID：15871017
> 
> 赞同：1
> 
> 时间：2013-04-08T03:58:53.053
> 
> 标签：java, algorithm, multidimensional-array

```
ArrayList<ArrayList<ArrayList<String>>> one = new ArrayList<ArrayList<ArrayList<String>>>(); 
```

`one`看起来像这样带有一些示例值：

```
[  
    [  
        ["A","B","C",...],
        ["G","E","J",...],  
        ...  
    ],
    [ 
        ["1","2",...],
        ["8","5","12","7",...],  
        ...   
    ],  
    ... 
] 
```

假设总会有一种基本情况，至少有一个字母数组列表（例如 ["A","B","C"]），但可能会有更多（例如 ["X,"Y","Z" ]) 并且可能有任何大小的数组列表，可能根本没有，但可能是数百个（例如 ["1","2","3"],...,["997","998", “999”]）。此外，可能有更多类型的任意大小的数组列表（例如 ["@","#","$"]）。所以真正唯一确定的是始终：

```
one.size()>=1  
one.get(0).size()>=1  
one.get(0).get(0).size()>=1 
```

所以问题是：在不知道每个数组列表有多大或有任何重复但假设 one.get(0).get(0) 有效的情况下，如何最好地获得每个类别的每个组合？例如`["A","B","C",...] ["1","2",...] ...`，`["A","B","C",...] ["8","5","12","7",...] ...`。我目前在我的项目中使用 Java，但是任何有效的算法我都可以自己转换。如果不清楚，我深表歉意，我很难用语言表达，这可能是我想不出解决方案的部分原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T04:23:25.473

我知道两种解决方案，递归和非递归。这是非递归的（类似于[如何获得二维数组可能组合](https://stackoverflow.com/questions/15868914/how-to-get-2d-array-possible-combinations/15869610)的答案）

1）将每个数组的长度相乘。这是您可以进行的可能组合的数量。打电话给这个`totalcombinations`。

2) 设置一个 int[] 数组，称为`counters`. 它应该和数组的数量一样长，并且全部初始化为0。

3a) 对于`totalcombinations`时间，连接`counter[0]`th 中的条目，... 中`arrays[0]`的`counter[1]`第 th 条目`arrays[1]`等并将其添加到所有结果的列表中。

3b) 然后设置`j = 0`并递增`counters[j]`。如果这导致`counters[j] > arrays[j].length`, 那么`counters[j] = 0`,`++j`并增加新的`counters[j]`（例如重复 3b））直到你没有得到这样的溢出。

如果您将其想象`counters`成手提箱的玻璃杯 - 当您将第一个数字从 9 溢出到 0 时，下一个数字会滴答作响 - 那么您应该在这里获得策略。

# android - 如何在android上实时克隆一段屏幕？

> ID：15871019
> 
> 赞同：0
> 
> 时间：2013-04-08T03:59:04.613
> 
> 标签：android, bitmap, imageview, screenshot, occlusion

我试图通过触摸事件将屏幕的覆盖部分克隆到图像视图来解决手指遮挡问题。我从 /dev/graphics/fb0 中提取图像并根据触摸事件裁剪图像。

```
Runtime.getRuntime().exec("cat /dev/graphics/fb0 > /dev/rawFrame.raw"); 
```

从 fb0 获取并写入图像，
然后我遇到了转换它的麻烦，以便我可以将它放在 ImageView 中。
使用位图是最好的方法吗？这是一个好方法还是我完全错过了标记？

编辑：这是截取屏幕截图的正确方法吗？我听说对图像进行编码取决于系统，如果您知道更好的方法，我会全神贯注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:21:38.027

如果您使用的是 Android 版本 > 4.0，则可以使用 screencap 或 screenshot 实用程序或框架 api Surface.screenshot() 代替（您应该拥有正确的权限）。或者您仍然可以使用命令“dd”转储帧缓冲区。

# c++ - 在数百万行代码中发现安全漏洞

> ID：15871021
> 
> 赞同：2
> 
> 时间：2013-04-08T03:59:20.107
> 
> 标签：c++, c, security

我看到一个面试问题，关于如何继续在数百万行代码中发现安全漏洞。让我感兴趣的是，“安全漏洞”这个词非常广泛。我看到了[这篇文章](https://stackoverflow.com/questions/5890112/what-are-the-potential-security-vulnerabilities-c)，但这里的代码非常小。

当我刚用谷歌搜索时，我得到了一些静态代码分析工具的点击率。但我对此并不满意。我觉得可能还有其他更好的工具。

有人能告诉我什么都可以归类为安全漏洞（如内存泄漏、竞争条件等）以及软件公司用于此类问题的工具是什么？

我在 C/C++ 编程论坛上看到了这篇文章，因此任何与 C/C++ 相关的回复都会更有帮助，尽管如此，即使它与 C/C++ 以外的内容有关，它也绝对有帮助。

# c++ - 如何获取 DivX 编解码器的库并将它们放入 C/C++ 项目

> ID：15871025
> 
> 赞同：0
> 
> 时间：2013-04-08T04:00:02.660
> 
> 标签：c++, c, image-compression

我正在编写一个 C 编程来从相机获取的 jpeg 帧创建一个 AVI 文件。我选择了互联网上推荐的压缩功能来压缩这些帧。我要选择的压缩器是 DivX 编码器。

```
HRESULT AddAviFrame(HAVI avi, HBITMAP hbm)
{ if (avi==NULL) return AVIERR_BADHANDLE;
  if (hbm==NULL) return AVIERR_BADPARAM;
  DIBSECTION dibs; int sbm = GetObject(hbm,sizeof(dibs),&dibs);
  if (sbm!=sizeof(DIBSECTION)) return AVIERR_BADPARAM;
  TAviUtil *au = (TAviUtil*)avi;
  //
  // create an empty compression, if the user hasn't set any
  if (au->psCompressed==0)
  { AVICOMPRESSOPTIONS opts; ZeroMemory(&opts,sizeof(opts));
    opts.fccHandler=mmioFOURCC('D','i','v','X'); 
    HRESULT hr = AVIMakeCompressedStream(&au->psCompressed, au->ps, &opts, NULL);
    if (hr != AVIERR_OK) {au->iserr=true; return hr;}
    hr = AVIStreamSetFormat(au->psCompressed, 0, &dibs.dsBmih, dibs.dsBmih.biSize+dibs.dsBmih.biClrUsed*sizeof(RGBQUAD));
    if (hr!=AVIERR_OK) {au->iserr=true; return hr;}
  } 
```

问题是我只能使用这种类型的编解码器，因为我安装了 DivX Player。安装播放器后，它似乎在我的系统中添加了一些用于 DivX 编解码器的库。如何在不安装任何媒体播放器的情况下获取这些库并将它们直接添加到我的项目中。

# android - 在哪里可以找到三星 Galaxy 特定系统功能的意图列表？

> ID：15871028
> 
> 赞同：2
> 
> 时间：2013-04-08T04:00:22.370
> 
> 标签：android, android-intent, galaxy, samsung-mobile

我正在尝试在三星手机上打开和关闭省电模式功能。我相信这不应该需要 root 访问权限，因为 NFC 任务启动器已经可以做到这一点，所以我相信这很可能只是被调用来切换设置的意图。

是否有类似的资源显示控制三星特定系统功能的可用意图列表？

如果没有，是否真的有可能弄清楚意图是什么？

编辑-只是想到了一些东西，操作系统有清单文件吗？如果是这样，这可以访问吗？它不应该有一个意图列表吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T04:17:51.043

是的，有一个系统 manifest.xml 文件。尝试从 /system/framework/framework-res.apk 中提取它并使用 apktool 提取 apk 文件。

这是来自 Google Standard JB 的示例[https://android.googlesource.com/platform/frameworks/base/+/android-cts-4.2_r2/core/res/AndroidManifest.xml](https://android.googlesource.com/platform/frameworks/base/+/android-cts-4.2_r2/core/res/AndroidManifest.xml)

# three.js - ThreeJS：是否可以简化对象/减少顶点数量？

> ID：15871031
> 
> 赞同：6
> 
> 时间：2013-04-08T04:00:40.653
> 
> 标签：three.js, autocad, vertex, 3d-modelling

我开始学习 ThreeJS。我有一些非常复杂的模型要展示。

这些模型来自我的客户提供的 Autocad 文件。

但有时模型中的细节数量对于网站的目的来说太多了。

我想减少模型中的顶点数量以简化显示并提高性能。

这可能在 ThreeJS 中实现吗？或者是否有其他解决方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-01-10T14:42:28.450

有一个名为 SimplifyModifier 的修饰符效果很好。您可以在 Three.js 示例中找到它

[https://threejs.org/examples/#webgl_modifier_simplifier](https://threejs.org/examples/#webgl_modifier_simplifier)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T22:36:24.867

如果您可以将模型导入 Blender，您可以尝试*Decimate Modifier*。在最新版本的 Blender 中，它具有可配置“数量”参数的三种不同方法。根据您的网格拓扑，它可能会在几乎没有视觉变化的情况下大幅减少多边形数量，或者即使是轻微的减少尝试也可能完全破坏模型。其他 3d 包应该包含类似的功能，但我从未使用过。

![Blender中的抽取修改器](https://i.stack.imgur.com/w7tzK.png).

想到的另一件事：有时当我遇到一个太高多边形的 Blender 模型时，一个好的开始是检查它是否应用了*细分修改*器，如果有则删除它。虽然我不知道 Autocad 中是否有类似的东西，但可能值得研究。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-10T12:46:38.683

我更新了 SimplifyModifier 函数。它适用于纹理模型。这是示例：

[https://rigmodels.com/3d_LOD.php?view=5OOOEWDBCBR630L4R438TGJCD](https://rigmodels.com/3d_LOD.php?view=5OOOEWDBCBR630L4R438TGJCD)

您可以提取[JS 代码](https://rigmodels.com/css/SimplifyModifier.js)并在您的项目中使用。

# javascript - GCM 和服务器端相关问题

> ID：15871037
> 
> 赞同：1
> 
> 时间：2013-04-08T04:01:26.577
> 
> 标签：javascript, android, google-cloud-messaging

我目前正在使用从 android SDK 下载的 DemoActivity 项目在 android 上试用 GCM。关于整个 GCM 的内容有几个问题。如我错了请纠正我。

1.  根据我的理解，我们需要为 GCM 注册 android 设备只是 Sender_ID 和 Server_URL？Server_URL 例如基于我的 3rd Party Application Server 的 URL `http://localhost:8080/gcm_test`。至于 Sender_ID 基本上就是 Google API 的 Project ID。

2.  我是否需要将注册 ID 从 android 设备发送到服务器端并将其存储在服务器端数据库或类似的东西中？

3.  为了从服务器向安卓设备发送消息，我们需要 API 密钥和安卓注册 ID？

4.  如何在服务器端配置以发送消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T05:00:18.830

1)**对**

2)**是**的。每当您需要向特定设备发送推送通知时，您都需要这样做。服务器使用注册 ID 识别该设备。

3）您需要创建项目时获得的Google App Id和您保存在备份中的注册Id。

4）[**对于 ASP.NET 看看这个**](http://www.codeproject.com/Tips/434338/Android-GCM-Push-Notification)。

```
string GoogleAppID = "google application id";        
        var SENDER_ID = "9999999999";
//......
//......
    AndroidGCMPushNotification apnGCM = new AndroidGCMPushNotification();

string strResponse =
apnGCM.SendNotification(devRegId,
"Test Push Notification message "); 
```

# css - CSS图像精灵错误

> ID：15871038
> 
> 赞同：0
> 
> 时间：2013-04-08T04:01:32.963
> 
> 标签：css, hover, sprite

我正在尝试用我的提交按钮制作一个简单的悬停效果

CSS

```
#submit1 a:hover{
background-position: -1px -56px ;
background-image:url(sprites.png);

}

#submit1{
background-position: -140px -58px ;
width: 112px;
height: 33px;
background-image:url(sprites.png);
} 
```

HTML

```
<div id="submit1">
<a href="#">
</a>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:04:11.820

变成`#submit1 a:hover`_`#submit1:hover`

```
#submit1:hover {
    background-position: -1px -56px ;
    background-image:url(sprites.png);
}

#submit1 {
    background-position: -140px -58px ;
    width: 112px;
    height: 33px;
    background-image:url(sprites.png);
} 
```

你可以在这里看到结果：http: [//jsfiddle.net/eu3zc/](http://jsfiddle.net/eu3zc/)

**编辑：** 关于您的评论，当您编辑多个元素时添加逗号。

例子：

```
#submit1:hover, a:hover {
    color: #000;
}

#submit1, a {
    color: #FFF;
} 
```

`#submit1, a``#submit1`这意味着我不希望我的CSS 代码`a`始终适用。

`#submit1:hover, a:hover`这意味着我不想应用我的 CSS 代码`#submit1`，`a`但只有当我悬停时。

您可以通过添加更多逗号来添加更多元素，以将相同的 CSS 代码应用于所有元素。

# javascript - 非空跨度反复显示为空

> ID：15871040
> 
> 赞同：0
> 
> 时间：2013-04-08T04:02:24.643
> 
> 标签：javascript, python, web-scraping, scrapy, html

我正在尝试查看类似于“ [http://nutritiondata.self.com/facts/snacks/1/1](http://nutritiondata.self.com/facts/snacks/1/1) ”的页面，并且由于某种原因，尽管我能够达到我想要阅读的范围，scrapy返回一个空跨度。

目前我的xpath代码如下：

```
hxs = HtmlXPathSelector(response)
calorieSpan = hxs.select("//span[@id='KJ_NUTRIENT_1']/text()").extract() 
```

这会重复返回一个空列表。如果我删除“/text()”调用，则跨度返回为`<span id="KJ_NUTRIENT_1></span>`当我转到该跨度存在的页面时，但它已被填充。关于为什么它显示为空白到scrapy的任何想法？这些值是否有可能在页面加载时由 javascript 加载？如果是这样我将如何检查？如果是这种情况，我可以很容易地切换到 casperjs，但由于它要慢得多，我宁愿不必这样做。

想法？

# jquery - 属性禁用不起作用

> ID：15871041
> 
> 赞同：0
> 
> 时间：2013-04-08T04:02:38.960
> 
> 标签：jquery, html, struts2

我像这样使用struts2：

```
<s:a id="beforePage" disabled="true">beforePage</s:a> 
```

但是禁用不起作用，它与没有禁用属性相同。

令我惊讶的是，当我使用 jquery 时，例如：

```
<s:a id="beforePage">beforePage</s:a> 
$("#beforePage").attr("disabled","true"); 
```

禁用属性工作！所以，我对此感到困惑..请给我一个解释，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:47:55.747

Struts2`<s:a>`标签最终生成html``<a> tag. There is no "disabled" attribute defined in``tag (i.e.`不支持禁用属性）。因此它不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:08:19.883

在 HTML 的较新版本中， disabled 属性只是简单地存在于元素中，就像这样，或者也作为属性的值：

```
<s:a id="beforePage" disabled="disabled">beforePage</s:a> 
```

# lisp - 如何在 Racket 的列表中找到元素的索引？

> ID：15871042
> 
> 赞同：10
> 
> 时间：2013-04-08T04:02:43.723
> 
> 标签：lisp, scheme, racket

这当然是微不足道的实现，但我觉得 Racket 肯定有内置的东西可以做到这一点。我的直觉是否正确，如果是，功能是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-08T04:13:26.080

奇怪的是，Racket 中没有内置过程来查找列表中元素的从 0 开始的索引（相反的过程*确实*存在，它被称为[`list-ref`](http://docs.racket-lang.org/reference/pairs.html?q=list-index#%28def._%28%28quote._~23~25kernel%29._list-ref%29%29)）。但是，高效实施并不难：

```
(define (index-of lst ele)
  (let loop ((lst lst)
             (idx 0))
    (cond ((empty? lst) #f)
          ((equal? (first lst) ele) idx)
          (else (loop (rest lst) (add1 idx)))))) 
```

但是里面*有*一个类似的过程`srfi/1`，它被调用了[`list-index`](http://docs.racket-lang.org/srfi/srfi-std/srfi-1.html#list-index)，你可以通过传递正确的参数来获得想要的效果：

```
(require srfi/1)

(list-index (curry equal? 3) '(1 2 3 4 5))
=> 2

(list-index (curry equal? 6) '(1 2 3 4 5))
=> #f 
```

**更新**

从 Racket 6.7 开始，[`index-of`](https://docs.racket-lang.org/reference/pairs.html?q=index-of#%28def._%28%28lib._racket%2Flist..rkt%29._index-of%29%29)现在是标准库的一部分。享受！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-29T03:33:01.647

这是一个非常简单的实现：

```
(define (index-of l x)
  (for/or ([y l] [i (in-naturals)] #:when (equal? x y)) i)) 
```

是的，应该将这样的东西添加到标准库中，但是这样做有点棘手，所以还没有人到达那里。

但是请注意，这是一个很少有用的功能——因为列表通常被视为一个仅使用第一个/其余习语而不是直接访问元素来解构的序列。不仅如此，如果您对它有用并且您是新手，那么我的第一个猜测是您在滥用列表。鉴于此，添加这样的功能可能会通过使其更易于访问而使这些新手绊倒。（但最终仍会添加它。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-08T04:18:21.727

还可以使用内置函数 ' `member`'，它给出一个以所需项目开头的子列表，或者`#f`如果列表中不存在项目。下面比较原始列表和成员返回的子列表的长度：

```
(define (indexof n l)
  (define sl (member n l))
  (if sl 
      (- (length l)
         (length sl))
      #f)) 
```

对于许多情况，可能需要列表中所有出现项的索引。可以得到所有索引的列表，如下所示：

```
(define (indexes_of1 x l)
  (let loop ((l l)
             (ol '())
             (idx 0))
    (cond
      [(empty? l) (reverse ol)]
      [(equal? (first l) x)
       (loop (rest l)
             (cons idx ol)
             (add1 idx))]
      [else
       (loop (rest l)
             ol
             (add1 idx))]))) 
```

`For/list`也可以用于此：

```
(define (indexes_of2 x l)
  (for/list ((i l)
             (n (in-naturals))
             #:when (equal? i x))
    n)) 
```

测试：

```
(indexes_of1 'a '(a b c a d e a f g))
(indexes_of2 'a '(a b c a d e a f g)) 
```

输出：

```
'(0 3 6)
'(0 3 6) 
```

# linux - 内核函数 asm_do_IRQ() 中的 irq 与我在模块中请求的不同

> ID：15871048
> 
> 赞同：4
> 
> 时间：2013-04-08T04:03:05.180
> 
> 标签：linux, linux-kernel, linux-device-driver, embedded-linux

我用Cortex-A9开发板做了一些实验。我使用 gpio_to_irq() 来获取一个 irq 编号，我请求了该 irq 并用它编写了一个小驱动程序，它在 syslog 中是 196。我在 asm_do_IRQ 中添加了一些 printks。当我触发 gpio 中断时，驱动程序工作正常，但 asm_do_IRQ 中的 irq num 为 62。我无法理解。为什么 irq 编号与我请求的不同？驱动程序如下：

```
 #include <linux/module.h>
    #include <linux/interrupt.h>
    #include <linux/irq.h>
    #include <linux/gpio.h>

    #define GPIO_N 36     //gpio number

    int flag = 0;

    static irqreturn_t handler(int irq,void *dev_id)
    {
            printk("hello world hahahahahhahahah \n\n");
            return 0;
    }

    static int __init gpio_test_init(void)
    {
            if(gpio_request_one(GPIO_N,GPIOF_DIR_IN,"some test")<0)
            {
                    printk(KERN_ERR "Oops! BAD! BAD! BAD!\n\n");
                    return 0;
            }

            int irq,irq2;
            irq = OMAP_GPIO_IRQ(TEST_GPIO);
            printk("irq : %d \n",irq,irq2);
            // ..................
            // irq : 196 in dmesg 
            //......................
            set_irq_type(irq,IRQ_TYPE_EDGE_FALLING);
            enable_irq(gpio_to_irq(GPIO_N));
            int err;
            // request the irq ...
            if((err = request_irq(irq,&handler,0,NULL,NULL))<0)
            {
                    printk("err : %d\n",err);
                    return 0;
            }
            printk("gpio test init success!\n");
            flag = 1;
            return 0;
    }
    static void __exit gpio_test_exit(void)
    {
            int irq = gpio_to_irq(TEST_GPIO);
            if(flag == 1)free_irq(irq,NULL);
            gpio_free(TEST_GPIO);
            printk("gpio test exit byebye!\n");
    }

    module_init(gpio_test_init);
    module_exit(gpio_test_exit);
    MODULE_LICENSE("GPL"); 
```

arch/arm/kernel/irq.c 中的 asm_do_IRQ

```
 asmlinkage void __exception_irq_entry
    asm_do_IRQ(unsigned int irq, struct pt_regs *regs)
    {
            struct pt_regs *old_regs = set_irq_regs(regs);
            printk("the irq : %d\n",irq);  
            //............... 
            // I get 62 here
            //...............
            irq_enter();

            /*
             * Some hardware gives randomly wrong interrupts.  Rather
             * than crashing, do something sensible.
             */
            if (unlikely(irq >= nr_irqs)) {
                    if (printk_ratelimit())
                            printk(KERN_WARNING "Bad IRQ%u\n", irq);
                    ack_bad_irq(irq);
            } else {
                    generic_handle_irq(irq);
            }

            /* AT91 specific workaround */
            irq_finish(irq);

            irq_exit();

            set_irq_regs(old_regs);

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T07:48:41.767

这种观察很可能是由于物理和虚拟 IRQ 编号之间的映射。您的驱动程序中看到的数字是虚拟 IRQ 编号，仅在使用通用 linux 中断处理子系统时有效。中的中断号`asm_do_IRQ`将是内核中断结构提供的物理中断号。

我相信 OMAP 处理器支持 GPIO 引脚上的中断。这通常实现的方式是为一组 GPIO 输入分配单个 IRQ 线，例如 32 位。当任何 GPIO 发生中断时，该 IRQ 线将激活。这可能是处理器上的数字 62。如果您查看处理器的手册，您应该会看到 IRQ 62 对应于 GPIO bank 上的中断。

现在，linux GPIO 子系统将允许您为任何 GPIO 分配中断处理程序，为您提供从 linux irq 编号到物理 irq 编号的映射。在您的情况下，linux irq 编号为 196。GPIO 子系统配置为处理所有 GPIO 中断（例如中断 62），读取 GPIO 寄存器以确定组中的哪些 GPIO 位可能产生中断，然后调用您分配的中断处理程序 `request_irq`.

以下是 GPIO 中断的基本控制流程：

1.  GPIO bank 中的中断发生变化。IRQ 62 被提出。
2.  `asm_do_IRQ`在 IRQ 62 上运行。GPIO 子系统已被平台初始化代码注册为处理 IRQ 62。
3.  GPIO 子系统读取 GPIO 寄存器并确定 GPIO 位 X 已导致中断。它计算从位 X 到 linux 虚拟 IRQ 号的映射，在本例中为 196。
4.  然后，GPIO 中断处理程序`generic_handle_irq`使用 196 调用该函数，该函数调用您的中断处理程序。

虚拟IRQ号和物理IRQ号之间通常有一个由平台定义的**静态映射。**要查看此映射，

*   `CONFIG_VIRQ_DEBUG`在早于 linux-3.4 的内核上启用，或
*   `CONFIG_IRQ_DOMAIN_DEBUG`在较新的内核上启用。

然后看看`irq_domain_mapping`debugfs 文件。例如在 PowerPC 上：

```
# mount -t debugfs none /sys/kernel/debug
# cat /sys/kernel/debug/irq_domain_mapping 
irq    hwirq    chip name        chip data   domain name
   16  0x00009  IPIC             0xcf801c80  /soc8347@e0000000/pic@700
   18  0x00012  IPIC             0xcf801c80  /soc8347@e0000000/pic@700
   19  0x0000e  IPIC             0xcf801c80  /soc8347@e0000000/pic@700
   20  0x0000f  IPIC             0xcf801c80  /soc8347@e0000000/pic@700
   21  0x00010  IPIC             0xcf801c80  /soc8347@e0000000/pic@700
   77  0x0004d  IPIC             0xcf801c80  /soc8347@e0000000/pic@700 
```

# cocoa - 从行动表中保存价值

> ID：15871049
> 
> 赞同：0
> 
> 时间：2013-04-08T04:03:12.033
> 
> 标签：cocoa, core-data, osx-mountain-lion

我被困在一些愚蠢的事情上。这个应用程序是一个 OSX 核心数据应用程序。我正在调用操作表来处理日期。关闭工作表后，所选日期正确显示在屏幕上。但是，我不知道如何保存日期。

任何帮助表示赞赏。这是我在 AppDelegate.m 中使用的代码：

```
NSDate *theDate = [self.purchaseDatePicker dateValue];
    if (theDate)
    {
        NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
        NSString *formattedDateString;

        [formatter setDateStyle:NSDateFormatterMediumStyle];
        [formatter setTimeStyle:NSDateFormatterNoStyle];

        formattedDateString = [formatter stringFromDate:theDate];

        [self.purchaseDate setStringValue: formattedDateString];
        self.item.purchaseDate = theDate;
        [self.item setPurchaseDate:theDate];
        [self.item setPurchaseDate:self.item.purchaseDate];

        NSLog(@"theDate is %@", theDate); <-- this is fine.
        NSLog(@"item.purchaseDate is %@", self.item.purchaseDate); <-- this returns NULL

        NSError *error = nil;
        NSManagedObjectContext *moc = _coreDataController.mainThreadContext;
        if (![moc save:&error])
        {
            [[NSApplication sharedApplication] presentError:error];
        }
            }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T00:12:27.250

我发现这里的答案很有帮助，但这篇[文章](https://stackoverflow.com/questions/11926015/synching-core-data-with-two-xib-simultaneously)真的让我思考。所以今天，代码如下所示，效果很好！！

1.

```
[itemArrayController setValue: [DatePicker1 dateValue] forKeyPath: @"selection.date1"]; 
```

2.

```
 if ([itemArrayController valueForKeyPath: @"selection.date1"] == NULL) {
        date1 = [NSDate date];
        [datePicker1 setDateValue: date1];
    } else {
        [datePicker1 setDateValue: [itemArrayController valueForKeyPath: @"selection.date1"]];
        date1 = [itemArrayController valueForKeyPath: @"selection.date1"];
    } 
```

# android - 方向改变后如何保留片段播放视频的片段实例？

> ID：15871050
> 
> 赞同：5
> 
> 时间：2013-04-08T04:03:25.333
> 
> 标签：android, orientation, fragment, android-youtube-api

我有一个静态添加到我的 xml 清单文件中的 YouTube API 片段，即其中有一个 youtube 播放器的片段。

我的项目中没有扩展片段的文件。

在我的活动类中，我将这行代码放在`onCreate`我的活动类中：

```
youTubePlayerFragment.setRetainInstance(true); 
```

它没有任何影响：当我旋转屏幕时，我得到片段的空白黑屏。

我怎样才能让它在方向改变后继续播放片段？

```
<fragment
      android:id="@+id/youtube_fragment"
      android:name="com.google.android.youtube.player.YouTubePlayerFragment"
      android:layout_width="900dp"
      android:layout_height="500dp"
      android:layout_centerHorizontal="true"
      android:layout_centerVertical="true" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-30T16:49:46.903

快速简便的解决方案是在清单中将以下内容添加到您的视频活动中：

```
android:configChanges="orientation|keyboard|keyboardHidden|screenSize" 
```

我有一个将它用于视频的应用程序，它工作得很好。一切都在方向变化时正确布局，并且活动和片段实例不会被拆除，使其能够无缝地继续播放。

如果您希望拆除/重新创建活动，同时保留片段实例，请重新阅读`setRetainInstance()`. 您需要注意一些细微差别才能使其正常工作：http: [//developer.android.com/reference/android/app/Fragment.html#setRetainInstance(boolean)](http://developer.android.com/reference/android/app/Fragment.html#setRetainInstance(boolean))

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-31T12:22:56.613

每次方向更改时，只要使用所有子组件，就会重新创建活动。现在重要的部分是，**YouTubePlayer.Provider**将保存它的阶段（例如：加载的视频、当前播放位置和播放器配置）。看看以下内容：

[YouTube 播放器概述](https://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/YouTubePlayer)

在您的情况下，方向更改后，只要其子片段（youTubePlayerFragment），就会重新创建活动。因此，您丢失了 YouTubePlayer 的即时引用和加载视频所需的数据（例如 videoID 或视频 url），但 YouTubePlayer 的提供者仍保持先前的状态，旋转后变为空。

**解决方案：**您实际上需要管理一种方法来保存在设备更改方向之前在 YouTubePlayer 上播放视频所需的数据，并在重新创建活动时检索数据。看看以下内容：

[YouTubePlayerFragment 概述](https://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/YouTubePlayerFragment)

不确定您的代码结构，但希望以下代码能给您一些想法：

```
 @Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putString("currentVideoID",videoID);
}

@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    super.onRestoreInstanceState(savedInstanceState);
    videoID = savedInstanceState.getString("currentVideoID");
} 
```

在 youtubeplayer 上播放视频的示例

```
private void loadYouTubePlayer(){
    //load your youTubePlayerFragment here, i used YouTubePlayerSupportFragment(),may change in your case
    //also you may not need to call getActivity(). Change the code as require
    youTubePlayerFragment = (YouTubePlayerSupportFragment)getActivity().getSupportFragmentManager().findFragmentById(R.id.youtube_fragment);
    youTubePlayerFragment.initialize(developerKey,new YouTubePlayer.OnInitializedListener() {
        @Override
        public void onInitializationSuccess(YouTubePlayer.Provider provider, YouTubePlayer youTubePlayer, boolean b) {
            myYouTubePlayer = youTubePlayer;
            myYouTubePlayer.setFullscreenControlFlags(YouTubePlayer.FULLSCREEN_FLAG_CONTROL_ORIENTATION | YouTubePlayer.FULLSCREEN_FLAG_ALWAYS_FULLSCREEN_IN_LANDSCAPE);
            myYouTubePlayer.setOnFullscreenListener(new YouTubePlayer.OnFullscreenListener() {
                @Override
                public void onFullscreen(boolean b) {
                    isFullScreenPlaying = b;
                    Log.d(null,"Now fullScreen");
                }
            });
            if (!b) {
                myYouTubePlayer.loadVideo(videoID);
            }
        }

        @Override
        public void onInitializationFailure(YouTubePlayer.Provider provider, YouTubeInitializationResult youTubeInitializationResult) {
        Log.e(null,"Initialization Failed !!!");
        }
    });
} 
```

# sql-server - 查找阻止在 SQL Server 中插入表的所有外键

> ID：15871051
> 
> 赞同：0
> 
> 时间：2013-04-08T04:03:30.130
> 
> 标签：sql-server, sql-server-2008

我有一个包含大约 200 个具有许多外键约束的表的数据库。数据库中没有数据，我需要将行插入到指定的表中`X`。

由于外键很多，我不知道如何在其他表中插入的顺序，以便我可以插入到 table 中`X`。一些外键约束是分层的。

我怎样才能找出插入的顺序，以便我可以成功地将数据插入到表中`X`？是否有任何 SQL 查询可以帮助我？

**已编辑** 我希望生成一个包含“TableName”、“ParentTableDependece”列的表，该表显示树视图并可以从中进行选择

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T05:52:12.430

使用此代码段，您可以找到引用您自己的表的所有其他表和所涉及的外键`X`：

```
;WITH ReferencingFK AS 
(
    SELECT 
        fk.Name AS 'FKName',
        OBJECT_NAME(fk.parent_object_id) 'ParentTable',
        cpa.name 'ParentColumnName',
        OBJECT_NAME(fk.referenced_object_id) 'ReferencedTable',
        cref.name 'ReferencedColumnName'
    FROM 
        sys.foreign_keys fk
    INNER JOIN 
        sys.foreign_key_columns fkc ON fkc.constraint_object_id = fk.object_id
    INNER JOIN 
        sys.columns cpa ON fkc.parent_object_id = cpa.object_id AND fkc.parent_column_id = cpa.column_id
    INNER JOIN 
        sys.columns cref ON fkc.referenced_object_id = cref.object_id AND fkc.referenced_column_id = cref.column_id
)
SELECT 
    FKName,
    ParentTable,
    ParentColumnName,
    ReferencedTable,
    ReferencedColumnName
FROM 
    ReferencingFK
WHERE
    ReferencedTable = 'X'   --  <=== put your table name here!
ORDER BY 
    ParentTable, ReferencedTable, FKName 
```

拥有所有引用的表`X`后，您可能还需要对其他表重复此操作（如果它们又依赖于外键引用）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T06:40:16.973

为什么不是这个？

```
EXEC sp_msdependencies @objname = 'X' 
```

拉吉

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T06:18:45.203

你可以试试：

```
EXEC sp_help 'TableName' 
```

这将为您提供表的全部详细信息，即您可以获得与传递给它的对象相关的关系、索引和其他信息。

# r - 在 if (on == "years") { 中绘制 xts 错误：需要 TRUE/FALSE 的缺失值

> ID：15871059
> 
> 赞同：4
> 
> 时间：2013-04-08T04:06:02.280
> 
> 标签：r, xts

我正在尝试绘制一个 xts 对象，但我得到一个关于年份的错误。xts 对象只有一个数值和一个 POSIXct 索引。下面是在尝试绘图时显示 xts 和错误的代码。关于需要对 xts 对象执行什么操作才能正确绘制的任何想法？

```
xTest<-as.xts(35, Sys.time())
xTest
##                           [,1]
## 2013-04-07 18:19:19.37238   35
class(xTest)
## [1] "xts" "zoo"
class(index(xTest))
## [1] "POSIXct" "POSIXt"

plot(xTest)
##  Error in if (on == "years") { : missing value where TRUE/FALSE needed 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T05:29:14.283

你的目标是什么？`plot.xts`函数绘制的点数不会少于 3 点是否存在问题？错误被抛出，`xts::axTicksByTime`因为最小的中断数是 2。尝试传递不同的参数会因其中没有机制`axTicksByTime`的编码而受挫。`plot.xts``...`

# c# - 对字符串列表进行排序不起作用。不知道我做错了什么或如何解决

> ID：15871062
> 
> 赞同：-1
> 
> 时间：2013-04-08T04:06:22.437
> 
> 标签：c#, winforms, list, sorting

我正在按字母顺序对文件名列表进行排序，但是出现异常错误：

> Error1 'System.Collections.Generic.List' 不包含'Length' 的定义，并且找不到接受'System.Collections.Generic.List' 类型的第一个参数的扩展方法'Length'（您是否缺少使用指令还是程序集引用？）

现在我想了解如何在下周的课程中实现这一点，但我似乎无法让它发挥作用。我了解排序算法背后的原理，并且能够使用随机整数值来实现它，但是在处理字符串时我有点挣扎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T04:11:51.940

使用`.Count`而不是`.Length`. 它们做同样的事情，但一个用于列表，另一个用于数组。

# vb.net - 如何使用 BoxedAPP 执行驻留在内存中的文件

> ID：15871063
> 
> 赞同：0
> 
> 时间：2013-04-08T04:06:28.613
> 
> 标签：vb.net, visual-studio, stream, virtualization, virtual-file

我已经购买了 BoxedAPP 的许可证，当我写信给支持邮件寻求帮助时，我得到了任何答复。

我已经下载了 SDK 示例，但所有重要的示例都在 C# 中（即使我使用翻译器我也无法理解），并且 vb.net 示例用于存储文件而不执行它们。

我的问题很简单，如何使用 BoxedAPP 将文件存储在内存中（虚拟化文件）然后从内存中执行它？

例如，我想将名为“test.avi”的视频文件虚拟化为“my.resources.test”，然后使用“process.start”执行它，这就是我尝试虚拟化递归但不运行的方法：

```
 BoxedAppSDK.NativeMethods.BoxedAppSDK_CreateVirtualFile(My.Resources.test, _
                                                            BoxedAppSDK.NativeMethods.EFileAccess.GenericAll, _
                                                            BoxedAppSDK.NativeMethods.EFileShare.None, IntPtr.Zero, _
                                                            BoxedAppSDK.NativeMethods.ECreationDisposition.New, _
                                                            BoxedAppSDK.NativeMethods.EFileAttributes.Normal, _
                                                            IntPtr.Zero) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T15:28:32.163

第一个参数应该是一个字符串，检查函数声明：

```
 <DllImport("bxsdk32.dll", SetLastError:=True, CharSet:=CharSet.Auto)> _
    Public Shared Function BoxedAppSDK_CreateVirtualFile( _
    ByVal lpFileName As String, _
    ByVal dwDesiredAccess As EFileAccess, _
    ByVal dwShareMode As EFileShare, _
    ByVal lpSecurityAttributes As IntPtr, _
    ByVal dwCreationDisposition As ECreationDisposition, _
    ByVal dwFlagsAndAttributes As EFileAttributes, _
    ByVal hTemplateFile As IntPtr) As IntPtr
    End Function 
```

BoxedAppSDK_CreateVirtualFile 还返回什么？

# c# - 如何在 Jquery 中找到已经在用户控件中的用户控件的隐藏字段？

> ID：15871064
> 
> 赞同：0
> 
> 时间：2013-04-08T04:06:44.110
> 
> 标签：c#, javascript, asp.net, jquery

嗨 iam 在 ASP.Net 中使用 Jquery，我有一个 Ajax 和 Json 被调用来获取和设置。

我的页面是 Voyage.aspx。

我有一个带有 ajax 的用户控件：名称为 Context.ascx 的模态弹出窗口

在 Context.ascx 中，根据我的项目要求，我有其他用户控制，页面是 PortName.ascx

在这里，我的页面 Voyage.aspx 正在调用 Context.ascx，并且在内部再次调用 PortName.ascx。

在 PortName.ascx 中，我们使用了隐藏文件。

当它使用 Voyage.aspx 到 Context.ascx 时，我使用这样的代码来查找控件

```
var id = $('#<%= ((HiddenField)Context.FindControl("hdnvalue")).ClientID %>').val(); 
```

我得到了其中的价值。现在，当我尝试查找 PortName.ascx 的 HiddenFileds 时，它会给出错误，因为名称在当前上下文中不存在。

如何从我的 jQuery 页面中找到已经在用户控件中的隐藏文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:15:06.117

```
var ID=$('#<%=hdnvalue.ClientID%>').val() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:36:10.930

可以将一个想法放入一个类并使用 jquery 的类选择器。

像

```
 <asp:HiddenField ID="HiddenFieldServerDateTime" 
             runat="server" 
             CssClass="SomeStyle" /> 
```

在 jQuery 中

```
var serverDateTime = $(".SomeStyle").val(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T04:44:43.327

一种可能的解决方案是在浏览器视图源中找到隐藏字段的客户端 ID，并使用相同的 id jn jquery 来获取值。例如：如果您的用户控件中有隐藏字段：

```
<asp:HiddenField ID="hdnValue" runat="server" Value="Hello"/> 
```

这将变成这样：

```
<input id="usCon_hdnValue" type="hidden" value="Hello" name="usCon$hdnValue"> 
```

因此，您可以使用此 od 获取值：

```
<script type="text/javascript">
        $(document).ready(function () {
            var ID = $('#usCon_hdnValue').val();
            alert(ID);
        });
    </script> 
```

# jar - Maven项目中的ClassNotFoundException

> ID：15871065
> 
> 赞同：7
> 
> 时间：2013-04-08T04:06:46.397
> 
> 标签：jar, maven-3, classnotfoundexception

有一个基于 maven 的项目，可以通过 构建`maven install`，但是在运行 out jar 时会抛出异常：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/commons/cli/CommandLineParser
Caused by: java.lang.ClassNotFoundException: org.apache.commons.cli.CommandLineParser
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

我想知道为什么java找不到maven依赖库？

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>org.artofsolving.jodconverter</groupId>
  <artifactId>jodconverter-core</artifactId>
  <version>3.0-SNAPSHOT</version>
  <packaging>jar</packaging>

  <name>JODConverter - Core Library</name>
  <description>
    JODConverter converts office documents using OpenOffice.org
  </description>
  <url>http://jodconverter.googlecode.com</url>
  <licenses>
    <license>
      <name>GNU Lesser General Public License, Version 3 or later</name>
      <url>http://www.gnu.org/licenses/lgpl.html</url>
    </license>
  </licenses>
  <scm>
    <url>http://jodconverter.googlecode.com/svn/trunk/jodconverter-core</url>
    <connection>scm:svn:https://jodconverter.googlecode.com/svn/trunk/jodconverter-core/</connection>
  </scm>
  <inceptionYear>2003</inceptionYear>
  <developers>
    <developer>
      <id>mirko.nasato</id>
      <name>Mirko Nasato</name>
      <email>mirko@artofsolving.com</email>
    </developer>
  </developers>
  <contributors>
    <contributor>
      <name>Shervin Asgari</name>
      <email>shervin@asgari.no</email>
    </contributor>
  </contributors>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

  <repositories>
    <repository>
      <!-- required for org.hyperic:sigar -->
      <id>jboss-public-repository-group</id>
      <url>https://repository.jboss.org/nexus/content/groups/public-jboss/</url>
    </repository>
  </repositories>

  <dependencies>

    <!-- Required dependencies -->

    <dependency>
      <groupId>commons-io</groupId>
      <artifactId>commons-io</artifactId>
      <version>1.4</version>
    </dependency>
    <dependency>
      <groupId>org.openoffice</groupId>
      <artifactId>juh</artifactId>
      <version>3.2.1</version>
    </dependency>
    <dependency>
      <groupId>org.openoffice</groupId>
      <artifactId>ridl</artifactId>
      <version>3.2.1</version>
    </dependency>
    <dependency>
      <groupId>org.openoffice</groupId>
      <artifactId>unoil</artifactId>
      <version>3.2.1</version>
    </dependency>

    <dependency>
      <!-- for the command line tool -->
      <groupId>commons-cli</groupId>
      <artifactId>commons-cli</artifactId>
      <version>1.2</version>
    </dependency>

    <!-- Optional dependencies -->

    <dependency>
      <!-- for more robust process management -->
      <groupId>org.hyperic</groupId>
      <artifactId>sigar</artifactId>
      <version>1.6.5.132</version>
      <optional>true</optional>
    </dependency>
    <dependency>
      <!-- for JSON configuration -->
      <groupId>org.json</groupId>
      <artifactId>json</artifactId>
      <version>20090211</version>
      <optional>true</optional>
    </dependency>

    <!--  Test dependencies -->

    <dependency>
      <groupId>org.testng</groupId>
      <artifactId>testng</artifactId>
      <version>6.0.1</version>
      <scope>test</scope>
    </dependency>

  </dependencies>

  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.3.2</version>
        <configuration>
          <source>1.6</source>
          <target>1.6</target>
          <encoding>UTF-8</encoding>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-surefire-plugin</artifactId>
        <version>2.7.2</version>
        <configuration>
          <!-- don't run tests in parallel -->
          <perCoreThreadCount>false</perCoreThreadCount>
          <threadCount>1</threadCount>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-jar-plugin</artifactId>
        <version>2.3.1</version>
        <configuration>
          <archive>
            <manifest>
              <mainClass>org.artofsolving.jodconverter.cli.Convert</mainClass>
              <addClasspath>true</addClasspath>
            </manifest>
          </archive>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-assembly-plugin</artifactId>
        <version>2.2-beta-5</version>
        <configuration>
          <descriptors>
            <descriptor>src/main/assembly/dist.xml</descriptor>
          </descriptors>
        </configuration>
      </plugin>
    </plugins>
  </build>

  <reporting>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-javadoc-plugin</artifactId>
        <version>2.7</version>
      </plugin>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>cobertura-maven-plugin</artifactId>
        <version>2.4</version>
      </plugin>
    </plugins>
  </reporting>

</project> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T06:40:32.733

使用 运行 Jar 时`java -jar`，您不再使用 maven 解析依赖项运行。您必须确保您所依赖的所有 jar 在您的 Jar.jar`MANIFEST.mf`文件中指定的相对位置可用。通常，您会使用程序集插件来创建一个可分发的存档来创建此结构。或者您可以使用 uberjar/onejar 插件将所有内容包含在您的 Jar 中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T19:58:18.547

您有 2 个选项来解决此问题：

**选项 1** - 使用下面的两个插件将依赖项复制到“lib”文件夹（请参阅 outputDirectory）并让您的 Runnable JAR 知道它们在哪里（请参阅 classpathPrefix）

```
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-jar-plugin</artifactId>
<configuration>
    <archive>
        <manifest>
            <addClasspath>true</addClasspath>
            <classpathPrefix>lib/</classpathPrefix>
            <mainClass>example.MyMainClass</mainClass>
        </manifest>
    </archive>
</configuration>
</plugin>

<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-dependency-plugin</artifactId>
<executions>
    <execution>
        <id>copy-dependencies</id>
        <phase>package</phase>
        <goals>
            <goal>copy-dependencies</goal>
        </goals>
        <configuration>
            <outputDirectory>${project.build.directory}/lib</outputDirectory>
            <overWriteReleases>false</overWriteReleases>
            <overWriteSnapshots>false</overWriteSnapshots>
            <overWriteIfNewer>true</overWriteIfNewer>
        </configuration>
    </execution>
</executions> 
```

* * *

**选项 2** - 使用 maven-assembly-plugin 创建包含所有依赖项的单个 JAR。（所有依赖项都在同一个 JAR 中一起提取和压缩）

```
<assembly
xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0 http://maven.apache.org/xsd/assembly-1.1.0.xsd">

<id>with-dependencies</id>
<formats>
    <format>jar</format>
</formats>
<includeBaseDirectory>false</includeBaseDirectory>
<dependencySets>
    <dependencySet>
        <outputDirectory>/</outputDirectory>
        <useProjectArtifact>true</useProjectArtifact>
        <unpack>true</unpack>
        <scope>compile</scope>
    </dependencySet>
</dependencySets> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-27T14:01:45.700

我也看到了问题。Cobertura 通过字节码操作创建所有已编译类文件（在目标/类中）的检测副本。我的 jar 文件包含检测的类文件（来自 target/generated-classes/cobertura），但 cobertura.jar 丢失了。所以，ClassNotFoundException 是正确的反应。

但是，由于我的 POM 不包含任何提示，它们是用于打包的预期类，Maven 可以自由选择......并且它使用经过检测的文件集。

我的解决方案非常简单：mvn clean 和 mvn package。第一次调用删除所有检测类。然后，第二个调用仅查找未检测的类，而没有对 Cobertura 的任何外部引用。

# ios - 如何在应用程序中使用 iOS 的内置文本转语音功能？

> ID：15871068
> 
> 赞同：0
> 
> 时间：2013-04-08T04:06:55.500
> 
> 标签：ios, objective-c, text-to-speech

我正在构建一个帮助学生学习外语的应用程序。我注意到当我在设置的辅助功能菜单中打开“朗读选择”时，iPhone 可以在 Safari 中阅读外语文本。是否可以以编程方式让手机上的内置文本转语音软件读取 UIView 中显示的外来词（NSString）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T04:22:27.007

我也尝试在我的应用程序中实现 TTS，我尝试使用一些 SDK 来实现它，但我做不到。现在我正在使用**GOOGLE TRANSLATE API** [" [http://www.translate.google.com/translate_tts?tl=en&q=%@](http://www.translate.google.com/translate_tts?tl=en&q=%@) ",text"]。它将隐藏您的文本并为您提供需要运行的音频文件将音频文件存储在 Document 目录[或根据需要自定义]。只需使用此代码。希望它会有所帮助。

```
//Conversion using Google TTS API
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *path = [documentsDirectory stringByAppendingPathComponent:@"file.mp3"];

    NSString *text = textToConvert.text;
    NSString *urlString = [NSString stringWithFormat:@"http://www.translate.google.com/translate_tts?tl=en&q=%@",text];
    NSURL *url = [NSURL URLWithString:[urlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
    NSMutableURLRequest* request = [[NSMutableURLRequest alloc] initWithURL:url];
    [request setValue:@"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:2.0.1) Gecko/20100101 Firefox/4.0.1" forHTTPHeaderField:@"User-Agent"];
    NSURLResponse* response = nil;
    NSError* error = nil;
    NSData* data = [NSURLConnection sendSynchronousRequest:request
                                         returningResponse:&response
                                                     error:&error];
    [data writeToFile:path atomically:YES];

    NSError        *err;
    if ([[NSFileManager defaultManager] fileExistsAtPath:path])
    {
//        player = [[AVAudioPlayer alloc] initWithContentsOfURL:
//                  [NSURL fileURLWithPath:path] error:&err];
////        player.volume = 0.4f;
//        [player prepareToPlay];
////        [player setNumberOfLoops:0];
//        [player play];

        player = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:&err];
//        player.delegate = self;

        [player prepareToPlay];
        [player play];
    } 
```

# ios - ios：自定义单元格中的微调器在滚动后消失

> ID：15871070
> 
> 赞同：1
> 
> 时间：2013-04-08T04:07:10.023
> 
> 标签：ios, xcode, uitableview, uiactivityindicatorview

我创建了一个带有隐藏微调器和隐藏文本“加载更多”的自定义单元格。对于最后一个单元格，这些字段未隐藏，以便用户可以单击它来请求更多数据。我让它醒来，以便当用户单击最后一个单元格时微调器启动，但是当用户将单元格滚动出视图并再次返回时，微调器不会显示。任何帮助将不胜感激。：）

我有一个自定义单元格，它是 UITableViewCell 的子类：

```
@interface BrowseListCell : UITableViewCell{
IBOutlet UIImageView *image;
IBOutlet UILabel *name;
IBOutlet UILabel *loadMore;
IBOutlet UIActivityIndicatorView *spinner;
}
@property(nonatomic, retain) UIImageView *image;
@property(nonatomic, retain) UILabel *name;
@property(nonatomic, retain) UILabel *loadMore;
@property(nonatomic, retain) UIActivityIndicatorView *spinner;
@end 
```

在 tableViewController 我有：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
//#warning Incomplete method implementation.
// Return the number of rows in the section.
return [_dataController countOfList]+1;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath     *)indexPath
{

// Configure the cell...
static NSString *CellIdentifier = @"BrowseListCell";

BrowseListCell *cell = (BrowseListCell *)[tableView     dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    [[NSBundle mainBundle] loadNibNamed:CellIdentifier owner:self options:nil];
    cell = [_cell autorelease];
    _cell = nil;
}
if(indexPath.row==[_dataController countOfList]){
    if (indexPath.row==0) {
        cell.name.text=nil;
        cell.image.image = nil;
        cell.loadMore.hidden = YES;
        return cell;
    }else{
        cell.name.text=nil;
        cell.image.image = nil;
        cell.loadMore.hidden = NO;
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
        _spinner = [cell.spinner retain];
        _loadCell = [cell retain];
        return cell;
    }
}
if(_dataController!=nil){
    BrowseProduct *productAtIndex = [_dataController objectInListAtIndex:indexPath.row];

    // Configure the cell...
    if(productAtIndex!=nil){
        cell.name.text = productAtIndex.name;
        cell.image.image = productAtIndex.image;
        cell.loadMore.hidden=YES;
    }

}

return cell; 
```

}

在 didSelectRowAtIndexPath 里面我有：

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
if(indexPath.row==[_dataController countOfList]){
    if (indexPath.row==0) {
        //do nothing
    }else{
        NSLog(@"Loading");
        [_spinner startAnimating];
        _loadCell.userInteractionEnabled = NO;
        NSString *startFromId = [NSString stringWithFormat:@"%d", [_dataController countOfList]];
        NSNotification *notification = [NSNotification notificationWithName:@"loadMore" object:startFromId];
        [[NSNotificationCenter defaultCenter]postNotification:notification];
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T04:59:07.527

添加此代码，即使在停止动画后也显示微调器

```
 spinner.hidesWhenStopped = NO; 
```

请参考[UIActivityIndi​​catorView的苹果链接](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIActivityIndicatorView_Class/Reference/UIActivityIndicatorView.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T07:00:08.307

为 cellForRowAtIndexPath 添加了以下内容：

```
if(spinnerIsOn){
            [_spinner startAnimating];
        }else{
            [_spinner stopAnimating];
        } 
```

在 reloadTableViewData 中添加了以下内容：

```
spinnerIsOn=NO; 
```

在 didSelectRowAtIndexPath 中添加了以下内容：

```
spinnerIsOn = TRUE; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-13T15:24:18.577

你也可以继承 layoutSubviews

```
- (void)layoutSubviews{
    [super layoutSubviews];
    [self.spinner startAnimating];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-24T16:57:07.803

我遇到了同样的问题。解决方案：

```
func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {
    let cell = tableView.dequeueReusableCell(withIdentifier: "cell", for: indexPath)

    cell.spinner.startAnimating()

    // populate data, for instance: download an image from the net

    cell.spinner.stopAnimating()

    return cell
} 
```

当然，`spinner.hidesWhenStopped`必须是`true`，默认情况下。

# linux - 如何保护shell脚本的代码

> ID：15871075
> 
> 赞同：1
> 
> 时间：2013-04-08T04:07:43.863
> 
> 标签：linux, bash, shell

我有一个 shell 脚本。我必须让所有用户都可以使用它来执行。我必须隐藏/保护其中的内容。因此，没有人不会复制该文件。无论如何，是否有类似密码保护来读取或加密脚本？请给我建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T04:17:16.770

大多数脚本并不打算隐藏。可能您应该用某种编程语言实现您的秘密算法，然后从脚本中执行该算法。您也不需要密码，因为可执行文件是二进制文件并且不是人类可读的。

您只需要知道程序中的内容以及脚本中的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T06:23:06.050

Make the script readable only by some specified account, and provide an executable, `setuid` to that account, that runs the script.

Of course that means the script will run with the specified account's privileges rather than the user's privileges.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T04:11:11.870

这不是最佳实践（为什么你有这样的要求？！）但你可以使用 SHC - shell 脚本编译器。

SHC 链接：[http ://www.datsi.fi.upm.es/~frosal/](http://www.datsi.fi.upm.es/~frosal/)

# javascript - JSTree 获取正常的 XML 数据

> ID：15871076
> 
> 赞同：1
> 
> 时间：2013-04-08T04:07:49.800
> 
> 标签：javascript, xml, jstree

我正在使用[jstree](http://www.jstree.com/documentation/xml_data#)来获取我的 xml 文件的树视图。现在我想将树转换回 xml 文件，并在编辑后保存它。

我怎样才能做到这一点 ？有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T05:39:13.110

您可以调用`$("#tree_container_id").jstree("get_xml")`以获取 XML 数据。

# python - 通过 pip 安装传递位桶依赖项

> ID：15871081
> 
> 赞同：6
> 
> 时间：2013-04-08T04:08:43.923
> 
> 标签：python, dependencies, pip, setuptools

我试图解决的情况是从 bitbucket 上的私有存储库安装一个包，该包对 bitbucket 中的另一个私有存储库有自己的依赖关系。

我用它来开始安装：

```
pip install -e git+https://bitbucket.org/myuser/project-one.git/master#egg=django_one 
```

然后尝试从 setup.py 下载它的依赖项，如下所示：

```
install_requires = ['project-two',],
dependency_links = ['git+https://bitbucket.org/myuser/project-two.git/master#egg=project_two'], 
```

这失败了，pip 日志看起来像：

```
Downloading/unpacking project-two (from project-one)

  Getting page https://pypi.python.org/simple/project-two/
  Could not fetch URL https://pypi.python.org/simple/project-two/: HTTP Error 404: Not Found (project-two does not have any releases)
  Will skip URL https://pypi.python.org/simple/project-two/ when looking for download links for project-two (from project-one)
  Getting page https://pypi.python.org/simple/
  URLs to search for versions for project-two (from project-one):
  * https://pypi.python.org/simple/project-two/
  * git+https://bitbucket.org/myuser/project-two.git/master#egg=project-two
  Getting page https://pypi.python.org/simple/project-two/
  Cannot look at git URL git+https://bitbucket.org/myuser/project-two.git/master#egg=project-two
  Could not fetch URL https://pypi.python.org/simple/project-two/: HTTP Error 404: Not Found (project-two does not have any releases)
  Will skip URL https://pypi.python.org/simple/project-two/ when looking for download links for project-two (from project-one)
  Skipping link git+https://bitbucket.org/myuser/project-two.git/master#egg=project-two; wrong project name (not project-two)
  Could not find any downloads that satisfy the requirement project-two (from project-one) 
```

关于这个设置的奇怪之处在于，如果我克隆 project-one 并运行

```
python setup install 
```

从那里，项目二从 bitbucket 中获取并安装到我的 virtualenv 中。我的理解是 pip 在后台使用设置工具，所以我的假设是该测试的成功验证了我的方法。

任何建议表示赞赏。

**跟进：**

所以接受的答案是完全正确的——但我的问题是作为一个私人回购（https + http auth-basic）的额外复杂性。使用语法

```
dependency_links=["http://user:password@bitbucket.org/myuser/..."] 
```

仍然导致 401。运行 shell 并使用`pip.download.py`to run`urlopen`演示了潜在的问题（即 pip 需要额外的设置`urllib2`才能使其正常工作）。

[这里](https://github.com/pypa/pip/pull/786)提到了这个问题，但我无法让它工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T01:02:01.360

`pip`创建了一个VCS安装的想法，所以你可以使用`git+https://path/to/repo.git`，但`setuptools`不明白。

当您创建一个`setup.py`文件时，您只使用`setuptools`（不`pip`涉及），并且`setuptools`不理解那种 URL。

您可以`dependency_links`与 tarball 或 zip 文件一起使用，但不能与 git 存储库一起使用。

替换你`depencency_links`的：

```
dependency_links=["https://bitbucket.org/myuser/project-two/get/master.zip#egg=project-two"] 
```

并检查它是否有效。

[https://stackoverflow.com/a/14928126/565999](https://stackoverflow.com/a/14928126/565999)也有类似的问题

* * *

## 参考：

*   [http://peak.telecommunity.com/DevCenter/setuptools#dependencies-that-aren-t-in-pypi](http://peak.telecommunity.com/DevCenter/setuptools#dependencies-that-aren-t-in-pypi)

# asp.net - 在没有 c# 的情况下获取当前登录的用户名 asp.net

> ID：15871086
> 
> 赞同：0
> 
> 时间：2013-04-08T04:09:04.410
> 
> 标签：asp.net, webforms

我正在从事一个学校项目（因此安全性不是问题），该项目需要我获取当前登录用户的名称（用作 a 的 SQL 查询的参数`datagrid`）

由于`datagrid`绑定的 SQL 查询存储在`aspx`文件中，因此我不能`User.Identity.Name.ToString()`像在我的 c# 文件中那样使用它。

我正在使用预建在 Visual Studio asp.net webforms 中的 Microsoft 身份验证系统

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:26:47.020

您应该能够在 ASPX 文件中使用以下内容：

```
 <%=HttpContext.Current.User.Identity.Name %> 
```

如果您将其插入现有代码块，您显然不需要这些标签......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:20:07.563

您可以使用SQL 数据源的[过滤器参数](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasource.filterexpression.aspx)。

尝试使用普通参数 ( `asp:Parameter`)。另一种选择是使用`SessionParameter`或编写您自己的自定义参数（请参阅此 SO 问题：[如何在没有代码隐藏的情况下在 SqlParameter 中使用 ASP.NET 当前用户名](https://stackoverflow.com/questions/1574554/how-to-utilize-asp-net-current-user-name-in-sqlparameter-without-code-behind)）

# multithreading - Boost ASIO 共享库麻烦

> ID：15871087
> 
> 赞同：1
> 
> 时间：2013-04-08T04:09:10.947
> 
> 标签：multithreading, gcc, boost, boost-asio, shared

我基本上是基于 ASIO 文档中的序列化示例构建一个共享库，我的意思是我正在使用 -shared 和 -fpic 选项进行编译以生成一个 .so 文件，其中包括挂钩/包装器。

我正在针对另一个进程运行我的共享库，然后我的代码通过库中的构造函数运行（如 Windows 上的 DLLMain）。

我知道我的代码正在执行，并且它运行良好，直到某一点。基本上我的问题涉及尝试将 ASIO 和我的网络代码放到另一个线程上。我正在使用以下代码来做到这一点：

```
asio::io_service io_service;
server server(io_service, port);
asio::thread t(boost::bind(&asio::io_service::run, &io_service)); 
```

现在，由于此代码在库中的构造函数中运行，因此引发了段错误，我不知道为什么。如果我将其替换为：

```
asio::io_service io_service;
server server(io_service, port);
io_service.run(); 
```

代码运行 100% 正常，除了它窃取了整个执行线程并且被挂钩的进程根本不会运行。有谁可以帮我离开这里吗？我真的很困惑。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:11:46.480

看起来像是一辈子的问题。

如果以下代码在库中的函数中：

```
void some_function()
{
  asio::io_service io_service;
  server server(io_service, port);
  asio::thread t(boost::bind(&asio::io_service::run, &io_service));
} 
```

然后每当函数返回时，`io_service`都会超出范围，在新生成的线程试图处理事件循环时被销毁。考虑改变它，使生命周期`io_service`和`server`至少延伸到线程的持续时间：

```
void server_run()
{
  asio::io_service io_service;
  server server(io_service, port);
  io_service.run();
}

...

asio::thread t(&server_run); 
```

# ruby-on-rails - Rails：在 Ruby 和 JavaScript 之间共享生态模板

> ID：15871088
> 
> 赞同：3
> 
> 时间：2013-04-08T04:09:13.983
> 
> 标签：ruby-on-rails, eco

我知道 Ruby 和 JavaScript 之间的共享模板可以在 Rails 中完成（如[Railscast #295](http://railscasts.com/episodes/295-sharing-mustache-templates)所示）。不过，Mustache 有一些我不喜欢的地方。

我很想使用 eco ( [Embedded CoffeeScript](https://github.com/sstephenson/eco) ) 来实现这一点。

我在以下位置创建了生态模板处理程序`config/initializers/eco_template_handler.rb`：

```
module EcoTemplateHandler
  def self.call(template)
    Eco.render(template.source.inspect, template.locals)
  end
end
ActionView::Template.register_template_handler(:eco, EcoTemplateHandler) 
```

这将允许我从服务器模板中呈现 .eco 文件（即，`<%= render 'form' %>`将呈现 _form.html.eco）。然而，这只是等式的一半。

根据[一些](http://www.coffeescriptlove.com/2011/10/eco-templates-in-rails-31-asset.html)人（[以及更多](http://stjhimy.com/posts/28-javascript-templates-using-eco)人）的说法，您需要使用 JST for eco 在 JavaScript 模板中工作。我对JST不太熟悉。

这可能吗？有没有人能够做到这一点？

# php - 毫无意义的 SQL vs PHP if

> ID：15871090
> 
> 赞同：0
> 
> 时间：2013-04-08T04:09:21.127
> 
> 标签：php, mysql, performance

我需要使用这样的代码来操作 mySQL 表中的条目

```
foreach($items as $item)
{
 $sql = "UPDATE `siteims` SET refs = refs + 1 WHERE imid = '{$item->img}';";
 $sql .= "UPDATE `lists` SET refs = refs + 1 WHERE lid = '{$item->lili}'";
 $dbh->exec($sql);
} 
```

$items 中可能有多达 50 个项目。此代码的一个变体是

```
foreach($items as $item)
{
 if ('z' != $img->img)
 $sql = "UPDATE `siteims` SET refs = refs + 1 WHERE imid = '{$item->img}';";
 if ('z' != $item->lili)
 $sql .= "UPDATE `lists` SET refs = refs + 1 WHERE lid = '{$item->lili}'";
 $dbh->exec($sql);
} 
```

在这两种情况下，我都在为 $items 中的每个项目执行一系列 SQL 语句。我的问题

1.  **为项目**构建 $sql然后执行它不是更有效吗？
2.  但是，如果 $items 中所有可能的 50 项都生成有意义的 SQL，那不意味着一批 SQL 语句执行速度非常慢吗？
3.  **最后，如果**像我的代码的第二个版本那样执行 PHP 方面的测试，或者只是构建 SQL 并让 mySQL 处理 WHERE 测试返回空行的事实，是不是更好？

我非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T04:17:48.523

您可以改用一个`in`子句，例如

```
$sql = "UPDATE .... WHERE imid IN (" . implode($array_that_has_the_ids) . ")" 
```

并将自己减少到一个单一的 SQL 查询。但是，如果您尝试使用 HUGE aray，这可能会失败 - 生成的查询可能会超过 max_allowed_pa​​cket 设置并被杀死。

至于你的 strlen ......将 strlen 结果与比较有什么意义`'z'`？`if (apple == orange)`strlen 返回一个整数，您不妨改为这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T04:19:42.703

首先，我建议您使用 IN 子句和两个单独的查询...您可能必须转义这两个元素 $item->img 和 $item->lili ..

```
$ids = array("siteims"=>array(), "lists"=>array());
foreach($items as $item)
{
    $ids['siteims'][] = "'" . $item->img . "'";
    $ids['lists'][] = "'" . $item->lili . "'" ;
}
if(!empty($ids['siteims'])){
    $sql = "UPDATE `siteims` SET refs = refs + 1 WHERE imid IN (".implode(',', $ids["siteims"]).")";
    $dbh->exec($sql);
}

if(!empty($ids['lists'])){
    $sql = "UPDATE `lists` SET refs = refs + 1 WHERE lid IN (".implode(',', $ids["lists"]).")";
    $dbh->exec($sql);
} 
```

# php - 如何使用 php 保存旧数组并显示新数组？

> ID：15871091
> 
> 赞同：0
> 
> 时间：2013-04-08T04:09:25.863
> 
> 标签：php, arrays, forms, loops

我有两个用于名字和姓氏的文本框，我希望在提交后打印出名字和姓氏。

我想知道是否有一个容易打印出我输入的新旧数组....例如：我输入 ABC ABC 然后提交后显示 ABC ABC 然后我重新加载页面并输入 CCC CCC 并提交但这次是打印出来的是 ABC ABC CCC CCC。

我怎样才能做到这一点？这就是我的 html 脚本

```
 <form action = "./3.php" method = "get">
        First name:     <input type = "text" name = "firstname">
        Last name:  <input type = "text" name = "lastname">
                <input type = "submit">
    </form> 
```

这是我的 php 脚本

```
<?php
$array = array($_GET["firstname"],$_GET["lastname"]);

foreach($array as $info)
{
    echo $info . "<br/>";
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:43:18.533

只是添加到其他答案：

您正在寻找的是所谓的持久数据。您需要一些数据在更长的时间内存在，而不仅仅是 HTTP 请求（页面加载）。为此，您必须将数据存储在更永久的位置。

有几种方法可以做到这一点。

*   您可以将数据存储在数据库中。
*   您可以将数据存储在文件中。
*   您可以将数据存储在 cookie/会话中。

您正在寻找最简单、最简单的解决方案——那就是 cookie/会话。PHP 提供了处理 cookie 和会话的内置方法。

使用 cookie/sessions 与创建一个变量并在其中存储您需要的值非常相似，除了 PHP 将此数据保存到文件中（在客户端计算机或您的服务器上）并自动将数据加载到变量中在脚本开始之前，您不必考虑如何处理创建的文件。

在 PHP 中，这是一个使用 cookie 的示例：

```
setcookie('TestCookie', $value, time()+3600*24); 
```

这会在客户端机器上创建一个 cookie（一个小文件），将其命名为“TestCookie”，将内容存储`$value`在文件中，然后保存文件。PHP 会自动将该文件加载到一个名为 的全局数组`$_COOKIE`中，您可以在该域中的任何脚本上使用它，例如`www.domain.com`在接下来的 24 小时内。

```
echo $_COOKIE['TestCookie']; 
```

会话的工作方式与此非常相似，只是它们将文件存储在服务器上，这是一个更安全但稍微复杂一些的过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:16:10.257

您可以将值存储在表 [firstname, lastname] 中。并且每次提交

1.  插入新值
2.  从表中读取所有值。
3.  展示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T04:12:57.113

您可以使用`$_SESSION[]`它来存储值，以便您可以再次使用它，直到完成为止。

*注意：使用会话可能会导致每次您希望交易完成时都必须销毁会话。*

# javascript - 使用 jquery 删除具有 id 的类或元素

> ID：15871092
> 
> 赞同：2
> 
> 时间：2013-04-08T04:09:30.170
> 
> 标签：javascript, jquery, removeclass

我正在尝试从页面中删除一个 div（最好完全阻止它加载），但现在我决定在页面加载后将其删除。

我在 jsfiddle 上尝试了这些代码行，它可以工作。并且 '#content_gallery' div 被删除。

[http://jsfiddle.net/FRYsJ/9/](http://jsfiddle.net/FRYsJ/9/)

```
<script type='text/javascript'>

$(document).ready(function(){$('#content_gallery').remove();});

</script> 
```

但是当我将它应用到我的测试网站的头部时。它不会删除指定 id 的 div。我还尝试使用其他 id 标签删除其他 div

测试站点：[http ://stage.bravo-company.info/luchatest/category/gallery/](http://stage.bravo-company.info/luchatest/category/gallery/)

我也试过：

```
 $(document).ready(function(){        
        $('#content').remove();

 }); 
```

和

```
$(function(){
    $('#content_gallery').remove();
}); 
```

有任何想法吗？可能是jquery冲突的情况吗？我不确定如何确认这一点。

这里是测试站点：[http ://stage.bravo-company.info/luchatest/category/gallery/](http://stage.bravo-company.info/luchatest/category/gallery/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T04:13:05.837

`jQuery`在您的网站上还有另一个 JavaScript 库与之冲突。解决此问题的正确方法是使用[`jQuery.noConflict`](http://api.jquery.com/jQuery.noConflict/).

```
<script type="text/javascript" src="other_lib.js"></script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
    $.noConflict();

    jQuery(document).ready(function($) {
        // Code that uses jQuery's $ can follow here.
        $(function(){
            $('#content_gallery').remove();
        });
    });

    // Code that uses other library's $ can follow here.
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:16:16.903

这是一个案例冲突

采用

```
jquery(document).ready(function(){jquery('#content_gallery').remove();}); 
```

# .net - .NET 沙盒和应用程序库

> ID：15871094
> 
> 赞同：0
> 
> 时间：2013-04-08T04:09:40.463
> 
> 标签：.net, security, sandbox

在[有关如何在沙盒中运行部分受信任的代码的 Microsoft 指南中](http://msdn.microsoft.com/en-us/library/bb763046.aspx)，它提到

> 出于安全原因，info 参数中指定的应用程序库不应是托管应用程序的应用程序库。

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:53:11.773

我有同样的问题。我在这里找到了一个使用当前应用程序库的[堆栈溢出示例。](https://stackoverflow.com/questions/2869951/can-an-appdomain-be-restricted-to-one-directory)我刚刚发现另[一篇堆栈溢出文章](https://stackoverflow.com/questions/13280251/should-applicationbase-be-different-for-the-sandbox-appdomain)似乎提供了我们正在寻找的解释。我猜想使用相同的基础允许从属 AppDomain 利用其父级。

# asp.net - asp.net文件存储系统项目如何正确实现？

> ID：15871101
> 
> 赞同：0
> 
> 时间：2013-04-08T04:10:48.657
> 
> 标签：asp.net, database-design

在 upload.aspx 页面上我有 conn1.ConnectionString = "Data Source=.\ip-of-remote-database-server;AttachDbFilename=signup.mdf;Integrated Security=True;User Instance=True";

并且所有查询也在同一页面上，只有另一台机器上的数据库..

那么这是正确的实施方式吗？或者我必须在另一台机器上创建所有查询并通过应用程序调用它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:00:45.080

任何给定的查询查询可能源自客户端代码（例如 ASP.NET），或者它可能作为 VIEW 或存储过程（甚至触发器）预先存储在 DBMS 本身中。

但无论它来自何处，查询始终由 DBMS 服务器执行。这样，DBMS 可以保证数据的完整性并“保护”自己免受客户端代码中的错误的影响。

客户端和服务器的逻辑分离是此模型被称为客户端/服务器的原因，但这并不意味着它们必须是单独*的物理*机器 - 您将根据预期的工作负载¹和使用模式²来决定。

* * *

*¹将处理分布到多台机器可能会提高性能。*

*²例如，您可能需要局域网周围的多个“胖”客户端（与同一个数据库服务器通信）来访问所有用户。这与在用户和数据库之间存在额外间接层的 Web 不太相关。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:37:03.610

这取决于您的基础设施。如果您在本地有 Sql Server，则可以使用它。我认为这是一个学校项目，所以没关系。在现实生活中，将 Web 服务器和数据库服务器分开通常是个好主意

# c# - 动态更改 app.xaml 中样式中指定的属性的值

> ID：15871106
> 
> 赞同：1
> 
> 时间：2013-04-08T04:11:26.290
> 
> 标签：c#, wpf, label, font-size

我是新手`WPF`。最近我遇到了一个问题，我必须动态更改标签的字体大小。

为了实现这一点，我创建了一个测试应用程序并在我的`App.xaml`.

然后将这种样式赋予标签。

样式如下：

```
<Style x:Key="myLbl" TargetType="Label">
    <Setter Property="FontSize" Value="20"/>
</Style> 
```

然后我把这个`Style`给了`Label`我`Window` `XAML`喜欢的人：

```
<Label Name="lblDemo" Content="Test" Foreground="Black" Style="{DynamicResource myLbl}"/> 
```

我想通过单击按钮来更改`Property`in 的值。`Style`我搜索了一下，但没有发现任何有用的东西。谁能建议我一个正确的方向。任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T10:28:31.037

如果您只想使用 XAML 执行此操作，您可以这样做：

```
<StackPanel>
    <Label Name="lblDemo" Content="Test" Foreground="Black" FontSize="20"/>
    <Button x:Name="ClickMe" Content="Enlarge" />
    <StackPanel.Triggers>
        <EventTrigger RoutedEvent="Button.Click" SourceName="ClickMe">
            <EventTrigger.Actions>
                <BeginStoryboard>
                    <Storyboard>
                        <DoubleAnimationUsingKeyFrames Storyboard.TargetName="lblDemo" Storyboard.TargetProperty="FontSize">
                            <DiscreteDoubleKeyFrame KeyTime="00:00:00.01" Value="48" />
                        </DoubleAnimationUsingKeyFrames>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger.Actions>
        </EventTrigger>
    </StackPanel.Triggers>
</StackPanel> 
```

`Click`或者，您可以在代码后面的代码中使用良好的老式事件处理程序（使用`Button`上面没有`StackPanel.Triggers`部分的代码）：

```
private void ClickMe_OnClick(object sender, RoutedEventArgs e) { lblDemo.FontSize = 48; } 
```

# php - 将 JSON 编码的字符串转发到另一个页面

> ID：15871109
> 
> 赞同：0
> 
> 时间：2013-04-08T04:11:29.050
> 
> 标签：php, json

我无法从一个页面获取一个字符串（称为 $name）并将该字符串输出到另一页面。

这是我认为相关的代码片段：

```
 if ($_POST['to'])
    {
        // Get all relevant messages
        $get_msgs = mysql_query("SELECT * FROM messages WHERE touser='$from'");
        $mailbox = array();

        while($row = mysql_fetch_assoc($get_msgs))
        {
        $mailbox[] = $row;
        }

        // Make a string with the JSON array in it
        $name = "{ \"mailbox\":".json_encode($mailbox)." }";

        // now here, how do I simply forward this string to a page called page2.php

    } 
```

A. page2.php 的代码应该是什么？（尽管我想要它做的只是回显 $name）

B. 如果我多次运行上述代码，page2.php 是否会被清除，并且每次都用新的 $name 刷新？

预先感谢您的帮助。

我试过这个：

```
 session_start();
    $_SESSION['myValue']=$name; 
```

在 page2 中使用：

```
session_start();
echo $_SESSION['myValue']; 
```

但是没有数据被转发到第 2 页

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:21:19.313

你有 3 种方式：

一些设置会话将数组传递到新页面：

```
sesstion_strat() ;
$_SESSION['name'] = $name ;

-> in page2 

sesstion_strat() ;
$name = $_SESSION['name'] ; 
```

2en 方法：使用 get 方法传递数组，这种方法不适用于长数组和特殊字符。

```
header("Location: page2.php?name=".$name);

-> in page2 
$name = $_GET['name'] ; 
```

或使用 curl 发布数据：

你在这里看到样本：

[http://php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)

# perl - 脚本中的“-n”是什么？

> ID：15871112
> 
> 赞同：0
> 
> 时间：2013-04-08T04:11:47.493
> 
> 标签：perl

看到了脚本（见下文），但找不到有关“-n”的更多信息。

```
my $numeric =0;
my $input = shift;
if ($input eq "-n") {
    $numeric =1;
    $input = shift;
}
my $output = shift;
open INPUT, $input or die $!;
open OUTPUT, ">$output" or die $!;
my @file = <INPUT>;
if ($numeric) {
    @file = sort { $a <=> $b } @file;
} else {
   @file = sort @file;
}
print OUTPUT @file; 
```

解释脚本的文本如下“如果我们在命令行上看到程序名称后的第一件事是字符串`-n`，那么我们正在执行数字排序。” Google 搜索似乎无法识别大多数“非字母数字”符号，因此`"-n"`搜索不会产生任何结果。我看到的唯一其他地方`"-n"`是学习 perl，它说以下“转换后的`sed`脚本可以在有或没有`-n`选项的情况下运行”。甚至不确定这是否与`"-n"`脚本中的相同。知道在哪里可以找到有关的更多信息`-n`（尽管它可能仅表示数字字符串？？仅此而已）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T05:56:35.447

此脚本使用的与使用的标志`-n`完全无关。换句话说，这：`-n``perl`

```
perl -n script.pl 
```

与此完全不同：

```
perl script.pl -n 
```

你所拥有的是第二种情况。查看以下文档[`shift`](http://perldoc.perl.org/functions/shift.html)：

> 将数组的第一个值移开并返回，将数组缩短 1 并将所有内容向下移动。如果数组中没有元素，则返回未定义的值。如果省略 ARRAY，则将 @_ 数组移到子例程和格式的词法范围内，并将 @ARGV 数组移到子例程之外以及由 eval STRING 、 BEGIN {} 、 INIT {} 、 CHECK {} 建立的词法范围内、 UNITCHECK {} 和 END {} 构造。

这是满口的，但它的意思是，如果我们不在一个子例程中，并且`shift`它自己出现，它将获取`@ARGV`. 是什么`@ARGV`？让我们看一下[perlvar](http://perldoc.perl.org/perlvar.html)，其中记录了所有这些奇怪的变量：

> 数组@ARGV 包含用于脚本的命令行参数。

请注意，这些是*脚本*的参数，而不是*perl*的参数。因此，如果有人使用 执行您的脚本`perl script.pl -n`，那么我们可以期望`$ARGV[0]`成为字符串`-n`。

现在查看您的代码，很明显发生了什么：

```
my $input = shift;
if ($input eq "-n") {
    $numeric =1;
    $input = shift;
} 
```

他们`shift`在没有参数的情况下在子例程之外使用来获取`@ARGV`. 如果是`-n`，则变量`$numeric`设置为 1。该变量控制脚本的行为方式。（然后脚本继续获取输入和输出文件的名称`@ARGV`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T04:18:59.573

它是此脚本本身的命令行参数。如果用户使用脚本名称后跟“-n”来调用它，那么这将告诉脚本如何表现。

# javascript - SVG 标记上的 D3 过渡

> ID：15871115
> 
> 赞同：2
> 
> 时间：2013-04-08T04:12:15.980
> 
> 标签：javascript, svg, d3.js, marker, transitions

我在 SVG 中绘制箭头，使用`svg:line`带有如下标记的元素：

```
 svg_.append("svg:defs")
        .append("svg:marker")
        .attr("id", "bluearrowhead")
        .attr("viewBox", "0 -5 10 10")
        .attr("refX", 0)
        .attr("refY", 0)
        .attr("markerWidth", 6)
        .attr("markerHeight", 6)
        .attr("orient", "auto")
        .append("svg:path")
        .attr("d", "M0,-5L10,0L0,5")
        .attr("fill", "deepskyblue"); 
```

我希望能够淡出我的箭头。对于箭头轴，这是有效的：

```
 svg_.selectAll(".arrows")
        .transition()
        .duration(1000)
        .style("stroke-opacity", 0.0)
        .remove(); 
```

但是当轴消失时，箭头会停留 1000 毫秒，然后突然消失。我`fill-opacity`在线路上试过了，也试过`selectAll`了，`.bluearrowhead`但无济于事。有没有办法转换标记样式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T05:11:42.310

尝试：

```
svg_.selectAll(".arrows")
    .transition()
    .duration(1000)
    .attr("opacity", 0.0) 
```

# performance - 用于移动设备的 Graphite Dashboard 查看器

> ID：15871116
> 
> 赞同：2
> 
> 时间：2013-04-08T04:12:29.847
> 
> 标签：performance, mobile, monitoring, graphite

我浏览了有关（**性能监控工具）的各种**[文档](http://www.aosabook.org/en/graphite.html)，以探索 Graphite 是否支持在移动平台（例如智能手机、iPad、平板电脑）上查看仪表板的任何选项。`Graphite`

 **正如[这里](https://stackoverflow.com/questions/13919478/custom-querying-in-graphite)提到的，我知道 Graphite 允许您以图形方式和返回 csv 查询数据，但是有什么快速的方法可以将 Graphite 与移动设备集成。

类似的产品 OpenNMS 正在[iOS 应用](http://www.opennms.org/wiki/IOS_Client)上取得进展。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-23T21:22:34.950

试试 Grafana ( [http://grafana.org](http://grafana.org) )，它是一个新的石墨仪表板前端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T16:16:18.647

我也在 Graphite Portal 上发布了同样的问题[https://answers.launchpad.net/graphite/+question/227267](https://answers.launchpad.net/graphite/+question/227267)但还没有听说过。因此，到目前为止，我的发现也相同。

截至目前，Graphite 不提供任何现成的选项（移动 Web 界面或应用程序）来呈现最适合移动设备（即手机和平板电脑）的图形和仪表板。然而，Graphite URL API 允许根据业务需求自定义图表。

石墨 webapp 提供了一个*/render*端点来生成图形（和检索原始数据）。该端点通过查询字符串参数接受各种参数，例如通过 from / until 定义图形的时间窗口。

下面是过去 1 小时时间范围内应用服务器 401 到 405 的 URL 请求 (JSON) CPU 使用率指标。请注意，删除“format=json”请求属性会将图形返回为 PNG 格式的图像（默认 Graphite 行为）。

[http://graphite06p.prod.s.com/render/?format=json&until=now&from=-1Hours&showTarget=applications.jboss.app40%5B12345%5Dp_prod_ch4_s_com.jvm.cpuUsage&title=JVM%20%20-%20CPU%20Utilization&_salt=1367342114.856 &target=applications.jboss.app40%5B12345%5Dp_prod_ch4_s_com.jvm.cpuUsage](http://graphite06p.prod.s.com/render/?format=json&until=now&from=-1Hours&showTarget=applications.jboss.app40%5B12345%5Dp_prod_ch4_s_com.jvm.cpuUsage&title=JVM%20%20-%20CPU%20Utilization&_salt=1367342114.856&target=applications.jboss.app40%5B12345%5Dp_prod_ch4_s_com.jvm.cpuUsage)

企业可以创建移动 Web 应用程序，服务器组件首先使用上述 URL API 从 Graphite 获取原始数据，然后在将 HTML 内容返回到设备浏览器之前进行任何所需的自定义。例如，可以使用 Javascript 库 FLOT 或 ZingChart 绘制从 Graphite 接收到的 JSON 数据。也可以围绕这种方法构建混合或原生应用程序。欢迎任何其他意见或建议。**

# python-2.7 - 以 root 身份从 apache 执行 Python 脚本

> ID：15871118
> 
> 赞同：0
> 
> 时间：2013-04-08T04:12:33.030
> 
> 标签：python-2.7, apache2, firewall, mod-python, openbsd

我正在使用 mod_python 在 OpenBSD 5.1 上从 Apache 2.2.x 执行 Python 脚本。我正在成功运行不需要 root 权限的 Python 脚本。但是我正在从 Python 脚本执行防火墙（包过滤器）的几个功能，这需要 root 权限。有人能告诉我我该怎么做吗？？

# azure - 清理过时的 Azure 服务总线主题订阅

> ID：15871119
> 
> 赞同：1
> 
> 时间：2013-04-08T04:12:51.623
> 
> 标签：azure, azureservicebus

我为每个客户端实例创建订阅，并且想了解在客户端崩溃或意外关闭时清理过时订阅的良好做法。

有什么方法可以通过迭代一个主题的所有订阅来检测订阅是否 24 小时没有被拉取？

我[在 Azure 服务总线上找到了检测和删除孤立队列、主题或订阅，](https://stackoverflow.com/questions/12334838/detect-and-delete-orphaned-queues-topics-or-subscriptions-on-azure-service-bus)但它有点过时了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T23:17:43.523

您可以获得`SubscriptionDescription`每个订阅的 并用于`subscriptionDescription.AccessedAt`接收上次访问它的时间戳。

# android - Android-从链接错误下载文件

> ID：15871124
> 
> 赞同：-1
> 
> 时间：2013-04-08T04:13:06.127
> 
> 标签：android, download, hyperlink

我正在尝试从链接下载 epub 文件，但是在我下载文件后已损坏，我该如何解决这个问题？我认为问题在于我的链接是：

[http://st10.file.karelia.ru/25nv8s/9789d242bd127ce31991dd68fa434caa/7958c0b30a9fa22938770ac65e9f2544/principito.epub](http://st10.file.karelia.ru/25nv8s/9789d242bd127ce31991dd68fa434caa/7958c0b30a9fa22938770ac65e9f2544/principito.epub)

我认为这是因为我是从直接链接下载的。这是带有原始链接的文件夹：

[http://file.karelia.ru/25nv8s/](http://file.karelia.ru/25nv8s/)

我只是复制链接地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:15:32.830

我的直接链接是在您每次访问它时动态生成的。所以你不能简单地复制链接。

# applescript - 如何将当前活动窗口的 ContentsChanged 设置为 true（关闭按钮中的黑点）？

> ID：15871127
> 
> 赞同：1
> 
> 时间：2013-04-08T04:13:29.393
> 
> 标签：applescript

如何使用applescript在窗口的关闭按钮中设置黑点？从[http://docs.realsoftware.com/index.php/Window.ContentsChanged_property](http://docs.realsoftware.com/index.php/Window.ContentsChanged_property)，我猜是这样的：

```
tell app "CurrentApp" to set ContentsChanged to true of window 1 
```

但它不起作用：`execution error: CurrentApp got an error: Can’t make ContentsChanged of window 1 into type specifier. (-1700)`

另外，如何使用applescript 获取当前应用程序的内容？这个问题与[通过在窗口标题中添加 * 来表示未保存的更改有关 - 如何在 Mac OS X 上的窗口关闭按钮中添加黑点？](https://stackoverflow.com/questions/15852462/signifying-unsaved-changes-by-prepending-in-window-title-how-to-add-a-black)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:43:43.153

首先回答问题的第二部分：例如，您可以使用“最前面的应用程序”获取当前应用程序

```
tell application "Finder"
    set frontApp to the path to the frontmost application
end tell 
```

对你问题第一部分的简短回答是：目前不可能做你想做的事。长答案如下。

根据您的评论，我了解到您正在使用 Python 和 TCL/TK 来构建 GUI。

并非每个应用程序都能够设置“contentsChanged”指示器（显然，这在 RealBasic 中是这样调用的，但在 Apple 的 API 中却没有）。检查应用程序的 AppleScript 字典。依靠我在别处读到的内容，TextEdit 过去能够设置其文档的“修改”属性，但是当我在 Mac OS X 10.6.8 中尝试此操作时，它不再起作用。

如果您使用的是原生 Cocoa 应用程序，您可能可以通过使用一些 GUI 脚本在文档中添加和删除空格来设置此指示器，例如，键入空格并使用 Undo 菜单项将其删除。不幸的是，当我在 TextEdit 中尝试此操作时，撤消命令也删除了指示符。

我检查了 Apple 的 API 文档，在 NSWindow 类中似乎有一个方法 SetDocumentEdited。不幸的是，Apple 没有正确描述它的功能，但如果 DocumentEdited 属性设置为 true，它似乎会在红色关闭按钮中设置黑点。你可以[在这里阅读](https://stackoverflow.com/questions/3581375/how-do-i-display-the-modified-dot-in-the-red-button-of-an-nswindow)。如果您使用的是 TCL/TK，它必须能够以某种方式调用 SetDocumentEdited 方法。

您不能告诉操作系统更改窗口的 DocumentEdited 属性（这相当于您在 AppleScript 字典中找到的“已修改”属性）。您正在与之交谈的（Python-TCL/TK）应用程序需要实现此功能。如果 TCL/TK 没有这方面的命令，那么无论您使用 AppleScript 还是 Python 或其他东西，这都可能是不可能的。我建议您在 TCL/TK 论坛上询问是否有人可以编写和编译一种插件来实现此功能。

# c - C：将开放端口绑定到套接字的问题

> ID：15871128
> 
> 赞同：0
> 
> 时间：2013-04-08T04:13:35.993
> 
> 标签：c, sockets

我正在处理一项将可用端口绑定到 TCP 套接字的任务。最初，当我编写服务器代码时，我为系统设置了一个预定义的端口来监听，这非常有效。但是，在将我的代码转换为绑定到开放端口并打印正在使用的端口后，我无法通过 telnet 连接到服务器。

当我将代码转换回使用预定义端口时，我遇到了另一个有趣的异常情况。再次，服务器在预定义的端口上按预期工作，但是，它报告正在使用的端口与我分配的端口不同。

第一个代码片段创建一个套接字并使用预定义的端口 (32000)。

```
/*Create TCP socket with a predefined port*/
listener = socket(AF_INET, SOCK_STREAM, 0);
if(listener == -1) {
    perror("Create socket");
    exit(1);
}/*End if*/

bzero(&servaddr, sizeof(servaddr));/*Set serraddr to 0's*/
servaddr.sin_family = AF_INET;
servaddr.sin_addr.s_addr = htonl(INADDR_ANY);/*Any of this host's interfaces is OK.*/
servaddr.sin_port = htons(32000);
bind(listener, (struct sockaddr *)&servaddr, sizeof(servaddr));
length = sizeof(servaddr);
/*getsockname(listener, (struct sockaddr *)&servaddr, &length);/*Find out port number*/
printf("RSTREAM:: assigned port number %d\n", servaddr.sin_port); 
```

第二个代码片段使用一个可用端口。我尝试将 servaddr.sin_port 设置为 0，因为我读到这样做意味着系统将提供一个可用端口。我也试着评论这条线只是为了它的见鬼，但结果是一样的。

```
/*Create TCP socket with an open port*/
listener = socket(AF_INET, SOCK_STREAM, 0);
if(listener == -1) {
    perror("Create socket");
    exit(1);
}/*End if*/

bzero(&servaddr, sizeof(servaddr));/*Set serraddr to 0's*/
servaddr.sin_family = AF_INET;
servaddr.sin_addr.s_addr = htonl(INADDR_ANY);/*Any of this host's interfaces is OK.*/
servaddr.sin_port = htons(0);/*bind() will provide unique port.*/
bind(listener, (struct sockaddr *)&servaddr, sizeof(servaddr));
length = sizeof(servaddr);
getsockname(listener, (struct sockaddr *)&servaddr, &length);/*Find out port number*/
printf("RSTREAM:: assigned port number %d\n", servaddr.sin_port); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T04:16:35.837

您需要打印转换后的端口号，即您需要执行以下操作[`ntohs(3)`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/ntohl.html)：

```
printf("RSTREAM:: assigned port number %d\n", ntohs(servaddr.sin_port)); 
```

# javascript - 指令的链接函数的参数是否依赖于DI？

> ID：15871129
> 
> 赞同：26
> 
> 时间：2013-04-08T04:14:10.510
> 
> 标签：javascript, dependency-injection, angularjs, minify

在：

```
module.directive 'name', ->
  (scope, element, attr) ->
    # Whatever implemenation 
```

链接函数的`scope`,`element`和`attrs`参数是否依赖于名称推断的依赖注入？如果是，我怎样才能让它们缩小证明？

或者他们是否依赖于良好的旧论据顺序来传递给他们的内容？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-08T04:18:35.337

不，链接函数有一组预定义的参数。

```
function link($scope, $element, attrs, ctrl) {
    //Your method
} 
```

他们是

1.  元素范围
2.  元素本身（jquery/mini jquery 包装）
3.  元素的属性集
4.  使用的任何控制器`required`

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-05-10T01:24:28.350

如果您想将 DI 与指令一起使用（就像我所做的那样），请将要注入的参数放入指令工厂函数而不是链接函数中：

```
module.directive('name', function($timeout) {
    return function(scope, element, attrs) {
        ...
    };
}); 
```

为了允许缩小，将函数参数放在一个数组中，就像对控制器所做的那样：

```
module.directive('name', ['$timeout', function($timeout) {
    return function(scope, element, attrs) {
        ...
    };
}]); 
```

请参阅[文档中的](https://docs.angularjs.org/guide/directive#creating-a-directive-that-manipulates-the-dom)*当前时间*示例。

编辑：有关注入服务的演示，[请参见此处。](http://plnkr.co/edit/oiVsKl09WJT1HqVLnUVU?p=preview)当返回一个指令（例如）对象而不是函数`$timeout`时，您可以做同样的事情。`return {restrict: 'E', link: function() {...}}`

# php - 如何使用 php 使用数据库信息动态更新页面

> ID：15871131
> 
> 赞同：1
> 
> 时间：2013-04-08T04:14:32.577
> 
> 标签：php, javascript, jquery, mysql

我正在编写我的第一个电子商务网站，在规划过程中遇到了问题。基本上在产品屏幕上，为用户提供了 3 个样式、颜色和表面处理的下拉菜单。现在基于这些我想把数据库中的相关信息显示出来；价格和描述。我不知道该怎么做。有没有办法在不刷新页面或使用需要更多用户交互的提交的情况下动态查询数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:30:37.950

你需要使用ajax ajax 才能加载你想要的信息。

这是您想要的选择框的示例和教程。

[http://www.w3schools.com/php/php_ajax_database.asp](http://www.w3schools.com/php/php_ajax_database.asp)

但随后您需要将 sql 查询替换为您需要的查询，以便它以正确的样式、颜色和饰面发回产品信息。

# c - sscanf 指针与变量地址

> ID：15871134
> 
> 赞同：0
> 
> 时间：2013-04-08T04:14:38.217
> 
> 标签：c, pointers, scanf

以下代码有效。

```
unsigned int i1;unsigned int i2;
float *v1;float *v2;
sscanf("1 1 2.0 3.0","%u %u %f",&i1,&i2,v1,v2);
printf("%f",v1); 
```

添加另一个 %f，以下不起作用。它编译但我得到 bash: [9612: 1 (255)] tcsetattr: Inappropriate ioctl for device。

```
unsigned int i1;unsigned int i2;
float *v1;float *v2;
sscanf("1 1 2.0 3.0","%u %u %f %f",&i1,&i2,v1,v2); 
```

为什么？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T04:19:50.420

问题变了！

~~您的第一个代码应该失败；您需要通过`&v1`，并且传递没有意义，`v2`因为它（a）不是地址，并且（b）无论如何都没有转换规范。~~

第一个代码应该失败，因为您没有在 中传递初始化的指针`v1`，并且传递没有意义，`v2`因为它既没有被初始化也没有被格式字符串使用。当您将未初始化的指针传递给 时`sscanf()`，您会调用未定义的行为，并且任何响应都是可以接受的——灾难性故障（擦除磁盘？），或几乎与预期一样的良性行为（即使没有充分的理由期待这种良性行为）。类似的评论适用于大多数功能；不要传递未初始化的指针；这样做很少有任何好处。

第二个失败，因为您没有传递初始化地址。

更正代码1：

```
unsigned int i1;
unsigned int i2;
float f1;
float *v1 = &f1;
if (sscanf("1 1 2.0 3.0", "%u %u %f", &i1, &i2, v1) == 3)
    printf("%f\n", *v1); 
```

（未使用的变量`v2`已删除。）

备选方案 1：

```
unsigned int i1;
unsigned int i2;
float v1;
if (sscanf("1 1 2.0 3.0", "%u %u %f", &i1, &i2, &v1) == 3)
    printf("%f\n", v1); 
```

（没有指针变量。）

更正代码2：

```
unsigned int i1;
unsigned int i2;
float v1;  // Not pointer
float v2;  // Not pointer
if (sscanf("1 1 2.0 3.0", "%u %u %f %f", &i1, &i2, &v1, &v2) == 4)
    printf("%f %f\n", v1, v2); 
```

或者：

```
unsigned int i1;
unsigned int i2;
float f1;
float f2;
float *v1 = &v1;  // Initialized pointer
float *v2 = &v2;  // Initialized pointer
if (sscanf("1 1 2.0 3.0", "%u %u %f %f", &i1, &i2, v1, v2) == 4)
    printf("%f %f\n", f1, f2);  // Or *v1, *v2 
```

我认为没有指针变量的版本更明智。

请注意测试以确保转换有效！

# c++ - 标准::向量 没有正确构造副本

> ID：15871135
> 
> 赞同：1
> 
> 时间：2013-04-08T04:14:38.760
> 
> 标签：c++, c++11, std, stdvector

我有一个像这样的类粒子，

```
class Particle
{
public:
    std::vector<Particle*> getNbh () const;
    void setNbh (const std::vector<Particle*>&);
private:
    std::vector<Particle*> nbh_;
}; 
```

并`Particle::setNbh(const std::vector<Particle*>&)`实现了功能，

```
void Particle::setNbh (const std::vector<Particle*>& nbh)
{
    nbh_ = nbh;
} 
```

那么有一个非成员函数`updateNeighbors (std::vector<Particle>& particles, double cutoff)`

```
void updateNeighbors (std::vector<Particle>& particles, double cutoff)
{
    for (auto particle : particles)
    {
        auto nbh = std::vector<Particle*>();
        for (auto other : particles)
            if (&particle != &other 
                && norm(particle.getPosition() - other.getPosition()) < cutoff)
                nbh.push_back(&other);
        particle.setNbh(nbh);
    }
} 
```

问题是当我用这个函数更新邻居时，`nbh_`成员没有正确更新，我测试它打印`getNbh()`每个粒子的大小。

哪种是复制构造的正确方法，`std::vector<Particle*>`以便我可以获得所需的行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T04:28:24.253

在两个循环中替换`for ( auto`为。`for ( auto&&`

`Particle`您正在从您的矢量创建每个的本地副本`particles`，我强烈希望您不打算这样做。

`auto&&`在类型推导上下文中使用`&&`，这意味着它`auto&&`是右值引用、`const`引用或普通引用，具体取决于变量的初始化对象。当您不想考虑它时，这是一种体面的“默认”方式来迭代容器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T04:31:10.797

在

```
particle.setNbh(nbh); 
```

您实际上是`nbh(..)`在迭代时设置元素的“副本”。如果您打算修改它们，则实际上应该在迭代时使用引用。采用：

```
for (auto& particle : particles) 
```

# oracle - 启动 BI Publisher 时 Weblogic 服务器窗口退出

> ID：15871146
> 
> 赞同：0
> 
> 时间：2013-04-08T04:15:49.817
> 
> 标签：oracle, weblogic, reporting, business-intelligence, bi-publisher

我已经安装了 Oracle BI Publisher 试用版，当我单击启动 BI Publisher 以启动服务器时，出现命令窗口并在 10 秒后退出。当我再次单击启动 BI Publisher 时，命令窗口会在 4 秒后退出。可能是服务器窗口中出现了一些错误。

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:10:34.467

转到 weblogic 控制台，

```
 http://mycomputer:7001/console/ 
```

在左侧菜单中选择`Services|JDBC|Datasources`

选择 bip_datasource

选择监控|测试选项卡

单击单选按钮和“测试数据源”

正如日志文件所暗示的，这可能是值 ConfirmUserPassword 中的错误

配置|连接池

并重新输入“密码”和“确认密码”字段。

再次测试数据源。

有关更多信息，请参阅： [http ://docs.oracle.com/cd/E21043_01/bi.1111/e13880/T526682T526687.htm](http://docs.oracle.com/cd/E21043_01/bi.1111/e13880/T526682T526687.htm)

# linux - 在模式 4 GBA Linux 中使用 DMA

> ID：15871154
> 
> 赞同：2
> 
> 时间：2013-04-08T04:16:17.273
> 
> 标签：linux, dma, game-boy-advance

我在 GBA 中编写游戏是为了好玩，并想使用模式 4。我最近在模式 3 中创建了一个游戏，它的 dma 非常简单。如果我想在屏幕上绘制图像，dma 结构会相同吗？这是我所拥有的：

```
/* 
 * A function that will draw an arbitrary sized image * onto the screen (with DMA).
 * @param r row to draw the image
 * @param c column to draw the image
 * @param width width of the image
 * @param height height of the image
 * @param image Pointer to the first element of the image. */
 void drawImageInMode4(int r, int c, int width, int height, const u16* image)
 {
   for(int i = 0; i < height; i++){
     DMA[3].src = image + OFFSET(i,0,width);
     //offset calculates the offset of pixel to screen
     DMA[3].dst = VIDEOBUFFER + OFFSET(r+i,c,240);
     DMA[3].cnt = DMA_ON | width;
 } 
```

我觉得这不是使用模式 4，而是使用模式 3。我已经查看了如何修改我的代码，以便它可以在模式 4 下工作。提前谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-14T07:04:13.227

在 GBA 上，模式 3 和模式 4 的主要区别在于，模式 3 每个像素使用 2 个字节，而模式 4 使用调色板表的每个像素使用一个字节。您仍将数据复制到同一位置，但视频硬件对其的解释不同。（[Tonc 包含一个很好的演示。](http://www.coranac.com/tonc/text/bitmaps.htm#ssec-data-demo)）

您需要对代码进行的主要更改是：

*   将每行复制的字节数减半
*   调整`OFFSET`宏以返回模式 4 的正确值
*   选择您要将像素数据写入两个页面中的哪一个

（您还需要将位图转换为 8bpp 格式并为其提供调色板数据。）

模式 4 引入了另一个问题：您的图像可能是奇数字节宽。由于 VRAM 不支持单字节写入，您要么需要[编写一些特殊代码来处理这种情况](http://www.coranac.com/tonc/text/bitmaps.htm#ssec-modes-m4)，要么永远不要绘制具有奇数宽度或 x 位置的图像。

# ruby-on-rails - 使用 Apache 2、Rails 3.2 和 Phusion Passenger 配置子 uri 时遇到问题

> ID：15871156
> 
> 赞同：1
> 
> 时间：2013-04-08T04:16:21.563
> 
> 标签：ruby-on-rails, apache, cpanel, passenger

我需要一些帮助才能让 Rails 3.2 应用程序在 cPanel 配置的 Apache 站点的子 uri 中运行。我已经按照乘客文档和各种博客文章中的步骤进行操作。根操作呈现正常，但每个其他请求都会给我一个 404。

我认为这是 Apache 而不是 Rails 配置中的内容，因为它不是 Rails 应用程序的 404 页面，并且 404 不会在 Rails 日志中留下痕迹。

这是 cPanel 生成的 httpd.conf 中的 vhost 部分：

```
<VirtualHost myip:443>
    ServerName mysite.org
    ServerAlias www.mysite.org
    DocumentRoot /home/myuser/public_html
    ServerAdmin webmaster@mysite.org
    UseCanonicalName Off
    Options -ExecCGI -Includes
    RemoveHandler cgi-script .cgi .pl .plx .ppl .perl
    CustomLog /usr/local/apache/domlogs/mysite.org combined
    CustomLog /usr/local/apache/domlogs/mysite.org-bytes_log "%{%s}t %I .\n%{%s}t %O ."
    ## User myuser # Needed for CPanel::ApacheConf
    UserDir disabled
    UserDir enabled myuser
    <IfModule mod_suphp.c>
        suPHP_UserGroup myuser myuser
    </IfModule>
    <IfModule !mod_disable_suexec.c>
        <IfModule !mod_ruid2.c>
            SuexecUserGroup myuser myuser
        </IfModule>
    </IfModule>
    <IfModule mod_ruid2.c>
        RUidGid myuser myuser
    </IfModule>
    SSLEngine on

    SSLCertificateFile /etc/ssl/certs/mysite.org.crt
    SSLCertificateKeyFile /etc/ssl/private/mysite.org.key
        SSLCACertificateFile /etc/ssl/certs/mysite.org.cabundle
    CustomLog /usr/local/apache/domlogs/mysite.org-ssl_log combined
    SetEnvIf User-Agent ".*MSIE.*" nokeepalive ssl-unclean-shutdown
    <Directory "/home/myuser/public_html/cgi-bin">
        SSLOptions +StdEnvVars
    </Directory>
    Include "/usr/local/apache/conf/userdata/ssl/2/myuser/mysite.org/*.conf"

</VirtualHost> 
```

这是我为 sub-uri 放在一起的包含文件的当前版本：

```
RewriteEngine On
RewriteOptions Inherit
RailsEnv production

<Directory /home/myuser/public_html>
  Options Indexes FollowSymLinks -MultiViews
  AllowOverride all
  Order allow,deny
  Allow from all
</Directory>

RackBaseURI /home/myrailsapp/current
<Directory /home/myuser/public_html/railsapp>
  Options -MultiViews
</Directory> 
```

/home/myuser/public_html/railsapp 是 /home/myrailsapp/current/public 的符号链接

这是/home/myrailsapp/current/public/.htaccess

```
RackBaseURI /railsapp
SetEnv GEM_HOME /usr/local/lib/ruby/gems
PassengerEnabled On
PassengerAppRoot /home/myrailsapp/current/ 
```

/home/myrailsapp 和 /home/mysite 中的所有文件都归 myuser 所有。（我没有看到任何权限错误。）

在我的路线文件中：

```
 resources :widgets
  root :to => 'widgets#index' 
```

当我导航到[https://mysite.org/railsapp](https://mysite.org/railsapp)时，它会正确显示小部件索引，包括资产。当我转到[https://mysite.org/railsapp/widgets](https://mysite.org/railsapp/widgets)或[https://mysite.org/railsapp/widgets/index](https://mysite.org/railsapp/widgets/index)时，我得到了 Apache 404，并且在 Rails 日志中没有条目。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:04:14.147

事实证明 /home/myuser/public_html 中的 .htaccess 正在重写所有内容。对 /mysite/railsapp 的请求被豁免，因为它与目录名称匹配。我通过添加解决了这个问题

```
RewriteEngine off 
```

到 /home/myrailsapp/current/public/.htaccess。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-11T23:12:30.383

添加`RewriteEngine off`到`.htaccess`确实解决了问题。

# django - 自定义用户模型和南

> ID：15871164
> 
> 赞同：8
> 
> 时间：2013-04-08T04:17:01.900
> 
> 标签：django, django-south

我正在尝试以最基本的方式使用自定义用户模型，`AbstractUser`如[Extending Django's default User](https://docs.djangoproject.com/en/1.5/topics/auth/customizing/#extending-django-s-default-user)中所述进行扩展。但是，我不确定如何正确地使用 South。我在进行初始架构迁移时遇到了问题，情况如下：

*   我的扩展用户类 ,`Player`在我的类`tournaments`中，在 中启用`settings.INSTALLED_APPS`。

*   要执行初始`syncdb`设置，`tournaments`必须启用应用程序。否则我会收到此错误：

    ```
    $ ./manage.py syncdb
    CommandError: One or more models did not validate:
    auth.user: Model has been swapped out for 'tournaments.Player' which has not been installed or is abstract.
    admin.logentry: 'user' has a relation with model tournaments.Player, which has either not been installed or is abstract. 
    ```

*   因此，我启用了`tournaments`具有我的`Player`（自定义用户）模型的应用程序。但是，在初始迁移时：

    ```
    $ ./manage.py schemamigration tournaments --initial 
    ...
    $ ./manage.py migrate tournaments
    Running migrations for tournaments:
     - Migrating forwards to 0001_initial.
     > tournaments:0001_initial
    FATAL ERROR - The following SQL query failed: CREATE TABLE "tournaments_player" ("id" serial NOT NULL PRIMARY KEY, "password" varchar(128) NOT NULL, "last_login" timestamp with time zone NOT NULL, "is_superuser" boolean NOT NULL, "username" varchar(30) NOT NULL UNIQUE, "first_name" varchar(30) NOT NULL, "last_name" varchar(30) NOT NULL, "email" varchar(75) NOT NULL, "is_staff" boolean NOT NULL, "is_active" boolean NOT NULL, "date_joined" timestamp with time zone NOT NULL, "bio" text NOT NULL);
    The error was: relation "tournaments_player" already exists

    Error in migration: tournaments:0001_initial
    DatabaseError: relation "tournaments_player" already exists 
    ```

如果我跳过`syncdb`，我会收到此错误，因为`syncdb`需要引导 South：

```
$ ./manage.py migrate tournaments
DatabaseError: relation "south_migrationhistory" does not exist
LINE 1: ...gration", "south_migrationhistory"."applied" FROM "south_mig... 
```

所以，看来我在这里遇到了先有鸡还是先有蛋的情况：我不能`syncdb`没有我的用户模型。但是，如果我`syncdb`使用我的用户模型，我将无法执行初始迁移！

解决这个问题的最佳方法是什么？我有一些想法，比如在`syncdb`不启用`django.contrib.auth`和`django.contrib.admin`启用的情况下运行初始设置，或者在`syncdb`不`south`启用的情况下运行初始设置然后转换应用程序。这两种选择看起来都很老套和奇怪。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T04:24:48.687

尝试运行`./manage.py migrate tournaments --fake 0001`。这将在南迁移历史中添加一个条目，说明初始迁移已运行，但并未实际执行 SQL。或者，您可以`class Meta: managed = False`在自定义用户对象上设置以告诉 django 永远不要同步该模型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T04:25:19.813

这有效：

*   评论`django.contrib.auth`，`django.contrib.admin`和`tournament`（我的自定义用户模型的应用程序在`settings.INSTALLED_APPS`.
*   `manage.py syncdb`
*   取消注释`django.contrib.auth`，`django.contrib.admin`并且`tournament`
*   `manage.py schemamigration tournaments --initial`
*   `manage.py syncdb`
*   `manage.py migrate tournaments`

相当hackey和可怕。很想知道更好的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T03:46:53.370

我遇到了完全相同的问题，但`CommandError:`即使我的应用程序中有我的应用程序`INSTALLED_APPS`并卸载了 South，我也会遇到问题。我确实在 South 找到了一张票，#1179，[在这里](http://south.aeracode.org/ticket/1179)。一位匿名发帖人与 Thomas 有类似的工作，但更复杂一些。他们确实说这是 South 而不是 Django 的问题，但我不知道我是如何卸载 South，将其从我的设备中删除的，但`INSTALLED_APPS`我仍然遇到完全相同的错误。

@dimadima 看起来托马斯的回答对你有帮助，但你能告诉我哪种方式对你有用，也许可以通过点击复选标记来接受他的回答吗？

# image - 在 Matlab 中读取视频文件时出错

> ID：15871165
> 
> 赞同：0
> 
> 时间：2013-04-08T04:17:04.397
> 
> 标签：image, matlab, video, image-processing, matrix

嗨
，我在尝试在 matlab 中按帧读取视频时遇到一个奇怪的错误。我正在执行以下操作：

```
xyloObj = VideoReader(vid_name);
fps = xyloObj.FrameRate;
nFrames = xyloObj.NumberOfFrames;
vidHeight = xyloObj.Height;
vidWidth = xyloObj.Width;

% Preallocate movie structure.
mov(1:nFrames) = ...
    struct('cdata', zeros(vidHeight, vidWidth, 3, 'uint8'),...
    'colormap', []);
index =1;
for k = 1:nFrames
    mov(index).cdata = read(xyloObj, k);
    index = index+1;
end 
```

我收到以下错误：

```
Error using VideoReader/read (line 80)
The file could not be read. 
```

在其他任何地方都没有找到解决此错误的方法。
编辑：文件格式为 avi。类似于：D:\videos\drunk.avi。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-11T02:21:30.283

使用 mmread 怎么样？我在 Linux 上使用了 VideoReader，但就我而言，帧的长度不正确。

此外，由于我需要视频的时间戳，因此我已从 VideoReader mmread 更改。

# c# - 在 Windows 8 应用程序中显示共享点 Web 部件

> ID：15871166
> 
> 赞同：-2
> 
> 时间：2013-04-08T04:17:04.953
> 
> 标签：c#, sharepoint, windows-8, microsoft-metro, web-parts

我想在 windows 8 应用程序上显示 SharePoint Web 部件。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T06:12:01.377

我给你几个链接，这是我在研究 WinRT 和 Sharepoint 集成时发现的。

[Windows 8 应用程序和 SharePoint Online：连接两者（程序员视图）](http://blogs.msdn.com/b/bardak/archive/2012/10/26/windows-8-applications-and-sharepoint-online-connecting-the-two-a-programmer-view.aspx)

[Sharepoint WinRT 客户端](https://sharepointwinrt.codeplex.com/)

[适用于 SharePoint Online 的 Windows 8 应用程序](https://win8app4sponline.codeplex.com/)

[使用 SSO（单点登录）为 SharePoint Online 开发 Windows 8 应用商店应用程序](http://blogs.msdn.com/b/omarv/archive/2012/11/15/developing-windows-store-apps-for-sharepoint-online-with-sso-single-sign-on.aspx)

[创建 SharePoint 列表阅读器（使用 C# 和 XAML 的 Windows 应用商店应用程序）](http://havivi.blogspot.in/2012/09/create-sharepoint-lists-reader-windows.html)

[SharePoint 2013 搜索 REST API](http://blogs.msdn.com/b/nadeemis/archive/2012/08/24/sharepoint-2013-search-rest-api.aspx)

[为 SharePoint 开发 Windows 8（Metro 风格）应用程序](http://blog.sharedove.com/adisjugo/index.php/2011/11/02/developing-windows-8-metro-style-applications-for-sharepoint/)

# node.js - 通过 Node 中的 Express 中间件跟踪 HTTP GET 请求的路径

> ID：15871169
> 
> 赞同：1
> 
> 时间：2013-04-08T04:17:22.737
> 
> 标签：node.js, mongodb, express, passport.js

我正在尝试调试我的应用程序，并且在这样做时我意识到我并不完全理解 HTTP GET 请求如何找到它的路径。换句话说，当我们像这样配置中间件时：

```
app.configure(function(){
  // options
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');

  // middleware
  app.use(express.favicon());
  app.use(express.logger('dev'));

  app.use(express.cookieParser('your secret here'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.session());
  app.use(passport.initialize());
  app.use(passport.session());
  app.use(app.router);
  app.use(require('less-middleware')({ src: __dirname + '/public' }));
  app.use(express.static(path.join(__dirname, 'public')));
}); 
```

任何类型的每个 HTTP 请求都通过中间件分阶段提供，对吗？

我遇到的问题是，在我的中间件的某个地方，`users`正在查询我的数据库中的集合并`req.user`填充了不正确的`user`文档，我无法确定可能发生的位置。我知道我的中间件是罪魁祸首，但我的调试能力已经开始让我失望了。任何帮助将不胜感激。

编辑：这是我的护照设置：

```
passport.use(new LocalStrategy(function( username, password, done ) {  
  models.User.authenticate( username, password, function( err, user) {
    // reports CORRECT user
    console.log('\nmodels.User.authenticate callback');
    console.log('--username is ' + user.username);
    console.log(util.inspect(user));

    // return done( err, user );
    return done( err, user);
  });
}));

passport.serializeUser(function( user, done ) {
  // reports CORRECT user
  console.log('\npassport.serializeUser');
  console.log('--username is ' + user.username);
  console.log('--user._id is ' + user._id);
  console.log(util.inspect(user));
  done(null, user._id);
});

passport.deserializeUser(function(id, done) {
  // reports CORRECT user id
  console.log('\npassport.deserializeUser()');
  console.log('user._id is ' + id);
  models.User.findOne( id, function (err, user) {

    done(err, user);
  });
}); 
```

看来 serializeUser 和 deserializeUser 按预期工作。他们都在登录时报告正确的凭据。

# java - UML 序列图内部类表示

> ID：15871171
> 
> 赞同：2
> 
> 时间：2013-04-08T04:17:30.337
> 
> 标签：java, uml

我想知道如何在 UML 序列图中表示内部类？假设我正在从方法 a1 中的类 A 调用 B 类的内部类 C 上的方法 c1。类似于下面的伪代码

```
class A{
  method a1(){
    B.C.c1();
  }
}

class B{
   static class C{
     static method c1(){
      // do something
     }
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T04:20:55.270

UML 没有内部类的标准表示法，那只是 Java 的东西。我建议忽略有一些内部类的事实，或者如果它真的很重要，就在父类上写一些注释......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:21:33.560

我没有安装它来提供屏幕截图，但您可以尝试使用[eclipsediver](http://eclipsediver.wordpress.com/)生成序列图。

# css - SASS：执行多种颜色操作？

> ID：15871177
> 
> 赞同：6
> 
> 时间：2013-04-08T04:18:09.490
> 
> 标签：css, sass

使用 SASS，是否可以对单个十六进制代码执行多种颜色操作？我想以编程方式减轻饱和度并将饱和度提高 5%。

```
saturate($color, $amount)
lighten($color, $amount) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T04:38:35.950

您可以将它们链接在一起：

```
saturate(lighten($color, $amount), $amount) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T06:08:46.623

如果你只想做一次，就一个接一个地使用：

```
$color: #123
$amount: 5%
$color: saturate($color, $amount)
$color: lighten($color, $amount)

.element
  background-color: $color 
```

如果你想重复它，创建一个函数：

```
@function saturate-and-lighten($color, $amount)
  $output: saturate($color, $amount)
  $output: lighten($output, $amount)
  @return $output 
```

然后像这样使用它：

```
.element
  background-color: saturate-and-lighten(#123, 5%) 
```

# css - 如何在垂直跨越两个单元格的行内均匀分布单元格高度？

> ID：15871180
> 
> 赞同：1
> 
> 时间：2013-04-08T04:18:15.830
> 
> 标签：css

我有一个具有以下 html 结构的表：

```
<table>
<tr>
  <td rowspan=2>A (This is a dynamic column. I don't know its height).</td>
  <td>B</td>
  <td rowspan=2>D</td>
  <td>E</td>
</tr>
<tr>
  <td>C</td>
  <td>F</td>
</tr>
</table> 
```

如果单元格 A 的高度为 200px，则在使用 Firefox 19.0 浏览器查看时，单元格 B、C、E 和 F 会均匀分布到 100px 的高度。但是，Google Chrome 25.0 将显示同一个表格，其中单元格 B 和 E 的高度刚好足以容纳其内容，而单元格 C 和 F 占据剩余空间。

[JsFiddle 中的 DEMO](http://jsfiddle.net/ASQJG/3/)

我的问题是，如何在不指定 CSS 中的单元格高度的情况下均匀分布这些单元格的高度？**编辑**：我的目标是在单元格 A 高度变化时使内部单元格均匀分布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:46:19.073

您应该在 css 中设置 td 的高度。因此，您不需要为`#A`.

如果要将高度设置`cell A`为 100px，请将`td`高度设置为 50px

这是[小提琴](http://jsfiddle.net/ASQJG/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T14:19:45.970

我有同样的问题。这是我的数据表在 IE8 和 FF23 中的外观 第二张图片是它在 Chrome 和 Opera 中的外观（注意蓝色突出显示底行如何扩展以填充高度）。

![IE8 & FF23](https://i.stack.imgur.com/A4Ivl.jpg)

![Chrome & Opera12](https://i.stack.imgur.com/Kfk7z.jpg)

答案是你不能像我试过的那样。这就是底层浏览器处理标准的方式。IE & FF 将平均划分右侧的单元格，Chrome 和 Opera 只是扩展底部单元格以填充高度。您可以做的最好的事情是将底行垂直对齐到顶部，以便至少所有数据都在一起。

# function - 从日期时间 SQL Server 2005 中删除时间

> ID：15871181
> 
> 赞同：0
> 
> 时间：2013-04-08T04:18:24.060
> 
> 标签：function, sql-server-2005, stored-procedures

我想我在这里疯了。

我正在尝试在 SQL Server 2005 上做一个 SP，它需要一个日期，在另一个表中查找它并分配一个期间号和周号（用于财务日历目的）。

输出需要将日期保存为字符串，而不是日期时间。

如果没有时间，我根本无法获得显示的日期。

我尝试了几种方法：

```
select cast(floor(cast(@CalcDate as float)) as datetime) 
```

我制作了一个函数，将其转换为字符串并再次将其放回：

```
CREATE FUNCTION dbo.DateToVarchar (@DateIn datetime)
RETURNS varchar(10)
AS
BEGIN
declare @DD [varchar] (2)
declare @MM [varchar] (2)
declare @YYYY [varchar] (4)
declare @DateOut [varchar] (10)
declare @DDLen [int]
declare @MMLen [int]

set @DD = datepart(dd,@DateIn)
set @DDLen = len(@DD)
set @DD = (case when @DDLen < 2 then '0' + @DD else @DD end)

set @MM = datepart(mm,@DateIn)
set @MMLen = len(@MM)
set @MM = (case when @MMLen < 2 then '0' + @MM else @MM end)

set @YYYY = datepart(yyyy,@DateIn)

set @DateOut = @YYYY + '-' + @MM + '-' + @DD

return @DateOut

END 
```

当我在 SP 之外运行上述函数时，我得到的日期就好了。当我通过 SP 运行它时，它会以 2012-12-30 00:00:00.000 的形式返回

变量 @CalcDate 被声明为 varchar(10)

有任何想法吗？

提前致谢

***编辑***

到目前为止，这是 SP 的主体：

```
declare @StartDate [datetime]
,   @EndDate [Datetime]
,   @CalcDate [datetime] --This number will change in the WHILE loop to reflect the increment of days
,   @Week [varchar]
,   @Period [varchar]
,   @i [int]
,   @Year [int]
,   @CalcDay [int]
,   @CalcMonth [int]
,   @CalcYear [int]
,   @ConcatDate [char] (10)

set @StartDate = '2012-12-30'
set @EndDate = '2013-01-28'
set @Year = 2013
set @i = -1

-- Going to do a while loop here and instead of Week number and Period Number I'm going to do some calculations
set @Week = (Select WeekNum from aaGreensPeriodListTest Where PeriodNum = 1 and WeekNum = 1)
set @Period = (Select PeriodNum from aaGreensPeriodListTest Where PeriodNum = 1 and WeekNum = 1)
set @CalcDate = @StartDate + @i

set @CalcMonth = datepart(mm,@calcdate)

insert into aaGreensPeriodTest(RealDate,GreensYear,GreensPeriod,GreensWeek)
values (@CalcDate,@Year,@Period,@Week)

select @CalcDate as CalcDate, @CalcMonth as CalcMonth 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T05:00:05.393

SQL Server 2005 不支持没有时间部分的日期类型。如果您需要将日期作为字符串获取，您可以使用转换函数。例如：

```
declare @date datetime;
set @date = getdate();
select convert(varchar, @date, 101) -- that will return date in ‘mm/dd/yyyy’ format 
```

如果您需要一个没有时间部分的日期时间变量来进行某些计算，您可以使用下面的表达式：

```
declare @date datetime;
set @date = getdate();
select dateadd(dd, datediff(dd, 0, @date), 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:24:45.290

根据[http://msdn.microsoft.com/en-ca/library/ms187928.aspx](http://msdn.microsoft.com/en-ca/library/ms187928.aspx)，您不能直接转换 float->date。根本不支持。但是你可以投一个 datetime->date，所以你必须双重投。或者给出你的例子，三重施法：

```
CAST(CAST(CAST(@CalcDate AS float) AS datetime) AS date) 
```

# perl - 在 Perl 的列表赋值中使用未初始化的值

> ID：15871182
> 
> 赞同：0
> 
> 时间：2013-04-08T04:18:25.543
> 
> 标签：perl, local, initialization

当我运行下面的代码时，我收到警告“在列表赋值中使用未初始化的值”：

```
local %ENV = ();
%ENV = foo(); //foo returns a hash 
```

%ENV 的转储结果是：

```
{
  'KEY1' => '-',
  'KEY2' => '-',
} 
```

但是警告不断出现`%ENV = foo()`；

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T04:22:28.267

`foo()``undef`在其结果中返回一个。初始化`local %ENV = ()`与返回的未初始化值无关`foo()`。

此外，技术说明：`foo`不返回哈希值。它可能会返回一个值列表，然后分配这些值以填充散列，但函数只能返回标量或列表，而不能返回散列。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T04:28:19.647

编辑：

`undef` **尝试将值**分配给时似乎存在特殊行为`%ENV`。如果我这样做，`$ENV{foo} = undef;`我会收到您看到的警告。

`%ENV`当您认为这与环境有关时，这是有道理的。[gnu.org](http://www.gnu.org/software/libc/manual/html_node/Environment-Access.html)有这样的说法`setenv`：“值参数的空指针是非法的”。如果要删除环境变量，请将其从哈希中删除。如果要将其设置为空字符串，请使用空字符串作为值。使用`undef`(相当于`null`) 在这里没有任何意义。

检查您`foo()`以确保它返回的值都不是`undef`.

* * *

老答案：

你确定那`foo()`是返回你试图使用的东西`%ENV`吗？

`%ENV`这是一个从填充的示例`foo()`。

```
#!/usr/bin/perl -w

use strict;
use warnings;
use Data::Dumper;

local %ENV = (); # redundant use of 'local' in example
%ENV = foo();
print Dumper(\%ENV);

sub foo {
        my %hash = ( "foo" => "bar" );
        return %hash;
} 
```

输出预期：

```
$VAR1 = {
          'foo' => 'bar'
        }; 
```

可能值得使用调试器来测试`foo()`返回的内容和`%ENV`.

此外，请仔细检查以确保您的本地化版本`%ENV`在您尝试使用它时仍在范围内。例如：

```
#!/usr/bin/perl -w

use strict;
use warnings;

{
        local %ENV = ( "foo" => "bar" );
        print $ENV{foo}, "\n"; # expect "bar"
}
print $ENV{foo}, "\n"; # expect warning 
```

结果是：

```
bar
Use of uninitialized value in print at ./test2.pl line 10. 
```

因为 %ENV 的本地化版本不再存在。

# asp.net - 单击按钮后文本框中的 Ajax 值消失

> ID：15871188
> 
> 赞同：0
> 
> 时间：2013-04-08T04:19:16.653
> 
> 标签：asp.net, jquery

我有一个 jquery，它使用 ajax 和 webmethod 从数据库中检索值，它如下所示

```
$(document).ready(function() {
        SearchText();
    });
function SearchText() {
   $(".autosuggest").autocomplete({
            source: function(request, response) {
            $.ajax({
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    url: "InsertPage.aspx/GetAutoCompleteData",
                    data: "{'username':'" + document.getElementById('name').value + 
                        "'}",
                    dataType: "json",
                    success: function(data) {
                        response(data.d);
                    },
                    error: function(result) {
                        alert("Error");
                    }
                });
            }
        });
    }
</script> 
```

而网络方法是

```
[WebMethod]
public static List<string> GetAutoCompleteData(string username)
{
    List<string> result = new List<string>();
    using (SqlCommand cmd = new SqlCommand("select DISTINCT UserName from student_details 
           where UserName LIKE '%'+@SearchText+'%'", con))

    {
        con.Open();
        cmd.Parameters.AddWithValue("@SearchText", username);
        SqlDataReader dr = cmd.ExecuteReader();
        while (dr.Read())
        {
            result.Add(dr["UserName"].ToString());
        } 
```

使用 ajax 的文本框是

```
<asp:TemplateField HeaderText="Student Name">
     <ItemTemplate>                    
        <input type="text" id="name" class = "autosuggest" />
   </ItemTemplate>
</asp:TemplateField> 
```

如果我调试程序，此 ajax 文本框中的值将变为 null，并且文本框中的输出为空，因此我无法进一步将值存储在数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:50:44.553

很简单，`controls`没有的不会`runat="server"`将其价值回发到那里的服务器。

您只需要添加`runat="server"`该 texbox 才能在服务器上获取值。

```
<input type="text" id="name" class = "autosuggest" runat="server" /> 
```

如果它不起作用，您可以使用隐藏字段并使用自动完成事件。
并在回发时设置隐藏字段值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:53:08.937

您在输入中缺少“名称”，因此应该是

```
<input type="text" id="username" name="username" /> 
```

你也使用 jQuery，所以只需获取如下值：

```
$('#username').val(); //instead of document.getElementById() 
```

# css - CSS重叠错误

> ID：15871197
> 
> 赞同：1
> 
> 时间：2013-04-08T04:20:30.043
> 
> 标签：css

我有一个`<div>`叫大盒子，里面有另一个`<div>`叫小盒子。每个小盒子都包含一个单独的图像和文本，`<div>`我还有一个图表来解释我的情况。

[http://s21.postimg.org/4thwzlt9j/Untitled.jpg](http://s21.postimg.org/4thwzlt9j/Untitled.jpg)

问题是当文本大于包裹它的 div 时。如果我创建另一个小盒子，它将与上面的小盒子重叠。

如何修改 CSS，以便文本等元素越过`<div>`小框不会重叠。

[http://s18.postimg.org/kqkqlp6w9/Untitled.png](http://s18.postimg.org/kqkqlp6w9/Untitled.png)

我不想使用保证金，因为它是固定的。如果一个小盒子只有 3 个文字，底部有很大的空白怎么办？

我怎样才能动态地制作它，所以如果文本有点过了，第二个小框不会重叠它，而是会调整它的大小，让它在底部有空间？

```
 .bigbox {height: 700px;  
  width: 950px; 
  background:#FFFFFF;
  border-style:solid;
  border-color:#D5DADA;
  border-width:1px;}

 .smallbox {text-align:center;
  height:300px;
  width:250px;
  background: #FFB236;
  position:relative;
  left:0px;top:0px;
  margin-bottom: px;}

 .imagebox img{margin:6px 6px;
  padding-top:10px;
  padding-bottom:10px;
  padding-right:10px;
  padding-left:10px;} 
```

我的 HTML

```
<div class="bigbox">
<div class="smallbox"><div class="i"><img border="0"src="im.jpg" alt="">  </div>This is the text and it is wrapped inside a div.  </div>
<div class="smallbox"><div class="imagebox"><img border="0"src="im.jpg" alt="">  </div>This is the text and it is wrapped inside a div.</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T04:27:28.283

只需删除为我工作的`height`属性。`.smallbox`指定固定高度的问题在于它根本不允许`div`扩展以使所有内容都适合其中。

如果内容多于`div`可以容纳的内容，则会*溢出*。根据您指定的方式，溢出可以是可见的或隐藏的，但它*不会改变布局*，*也不会充当内容*。

[http://jsfiddle.net/wtBUd/](http://jsfiddle.net/wtBUd/)

# php - 使用表单将登录信息发送到数据库

> ID：15871204
> 
> 赞同：-6
> 
> 时间：2013-04-08T04:21:37.600
> 
> 标签：php, mysql, forms

我设置了一个 HTML 表单，用户可以在其中输入他们的电子邮件地址和密码，然后单击提交以创建会员资格，此数据将发送到数据库。我查看了代码并没有发现任何问题，但提交的内容不会出现在 mySQL 数据库中。此外，一旦用户通过输入电子邮件和密码进行注册，我一直在尝试将他们重定向到一个页面。

表单代码如下：

```
 <form class="form-signin" action="signinprocessor.php" method="post" form name ="form1">
    <h3 class="muted">moreo</h3>
    <h2 class="form-signin-heading">Please sign in</h2>
    <input type="text" class="input-block-level" placeholder="Email address" input name="myusername" id="myusername">
    <input type="password" class="input-block-level" placeholder="Password" input name="mypassword" id="mypassword">
    <label class="checkbox">
      <input type="checkbox" value="remember-me"> Remember me
    </label>
    <button class="btn btn-medium btn-primary" type="submit" name="submit" value="login">Sign in</button>
    </form> 
```

一旦他们点击提交，他们就会被带到 signinprocessor.php，其中的代码如下：

```
 function createUser () {
    $con = mysql_connect("localhost","root","");
    if (!$con)
        {
    die('Could not connect: ' . mysql_error());
        }
        mysql_select_db("test", $con);

        $username = mysql_real_escape_string($_POST['myusername'], $con);
        $password = mysql_real_escape_string($_POST['mypassword'], $con);
        $sql = "UPDATE members SET username='$username',password='$password'";
        mysql_query( $sql , $con );

        mysql_close($con);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T04:24:09.287

你只是想创建一个新用户，而不是使用`UPDATE`use`INSERT`

```
$sql = "INSERT INTO members(username,password) VALUES('$username','$password'"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T05:37:21.253

1）如果您正在创建用户，则必须对密码进行加密（散列），`md5()`然后使用`INSERT`语句而不是像这样更新：

```
$sql = "INSERT INTO members(username,password) VALUES('".$username."','".md5($password)."'"); 
```

2）你没有调用`createUser()`方法。

**更新**

```
$mysqli = new mysqli('localhost', 'my_user', 'my_password', 'my_db'); 
```

然后

```
$query =  "INSERT INTO members(username,password) VALUES('".$username."','".md5($password)."'");
$result = $mysqli->query($query); 
```

欲了解更多信息，请访问此[链接](http://www.php.net/manual/en/mysqli.construct.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T22:16:55.740

为什么我因为这篇文章而被阻止提问？它绝对是在通常的问答中，但它获得了 7 票反对。随着 mySQL 的弃用和人们被迫使用 PDO 或 mySQLI，我因此受到惩罚是不公平的。我要求您，用户，给我投票，这样我就可以再次使用该网站。谢谢你。

# javascript - JavaScript 中的构造函数或对象继承

> ID：15871206
> 
> 赞同：3
> 
> 时间：2013-04-08T04:21:39.840
> 
> 标签：javascript

我是 JavaScript 新手（本周开始学习它）。我已经完成了 CodeCademy 课程（实际上只是 Objects 1 && 2 部分，其余部分很无聊）。我以为我学习了构造函数的原型继承，但我开始观看[Douglas Crockford: Advanced JavaScript](https://www.youtube.com/watch?v=DwYPG6vreJg)

就在视频的开头，他提到了两种继承，我意识到，我以为我知道的一切，我都不知道。所以我开始使用 Chrome JavaScript 控制台并尝试使用这两种继承模型来做一些事情。

```
//create constructor
function MyParent(){ 
    this.name = "joe";
    this.sayHi = function(){ 
        console.log(this.name); 
    }
}

//create child object and inherit from parent
var myChild1 = new MyParent();
myChild1.name
"joe"
myChild1.sayHi()
joe

//add method to MyParent, so it can be accessed from myChild1
MyParent.prototype.sayBye = function(){ console.log("bye");}

myChild1.sayBye()
bye

//create another constructor
function MyParent2(){
    this.sayHi = function(){ 
        console.log("hi"); 
    }
}

//make it inherit from MyParent, overwriting sayHi if object is instance of MyParent2
MyParent2.prototype = new MyParent();

//overwrote sayHi
var myChild11 = new MyParent2(); 
myChild11.sayHi();
hi

//still same as MyParent as its not overwriten in MyParent2
myChild11.name
"joe" 
```

比我尝试使用 Object.create 做同样的事情：

```
//create an object
 var myParent = { 
    name : "joe",
    sayHi : function(){ 
        console.log(this.name) 
    } 
};

//it works
myParent.sayHi()
joe

//create child object
var myChild = Object.create(myParent);
myChild.sayHi()
joe

//add bye method to myChild
myChild.sayBye = function(){ console.log("bye"); }
myChild.sayBye();
bye

//add bye method to myParent - does not overwrite child's bye
myParent.sayBye = function(){ console.log("bye2"); }

//however adding sayBye2 to parent, becomes available on already created child
myParent.sayBye2 = function(){ console.log("bye2"); }
myChild.sayBye2();
bye2
//but its the parent property
myChild.hasOwnProperty("sayBye2")
false

//could make million objects inherit from each other vertically or horizontally
var myChild2 = Object.create(myChild);
myChild2.name
"joe" 
```

到目前为止，仅凭第一印象，我都喜欢这两个模型，也许我更喜欢后者。它似乎更具表现力和力量。

我已经对该`vs.`主题进行了一些搜索，但找不到一篇好的文章，可以解释每种方法的优缺点（除了后者仅由较新的浏览器支持，但有一个简单的解决方法）。我发现的其他帖子只是 tl: dr; 并且有些无聊。

所以我的问题是，我应该使用哪种类型的继承。是否有任何相关的特权？两者都有什么主要的缺点吗？可以混用吗？（例如，我知道您可以将对象作为参数传递给`new Constructor()`））

谢谢

编辑：如果浏览器不支持它，看看创建 Object.create() 替代方案的技巧，我意识到黑客是多么简单。它基本上是创建一个空的构造函数，将父对象分配为其原型，并将构建的构造函数作为新对象返回。多么整洁的黑客！

```
if(typeof Object.create !== "function") { Object.create = function (o) { function F() {}; F.prototype = o; return new F(); }; } 
```

但有什么影响？有什么需要注意的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T05:48:11.050

两种方式**同样强大**。有人说如果你不接受*纯*原型方法，你就不是真正的 JavaScript 大师，但实际上一切仍然只是**原型继承**，这是风格问题。

就个人而言，我更喜欢使用经典方法并将`new`关键字与`constructor`函数一起使用。

为什么？

*   经典模型是众所周知的。
*   我不必`init`在我的对象上实现一个函数，只是为了做 a`constructor`已经做的事情。您可能已经注意到，*纯*原型方法让您没有 a ，因此如果您需要为新创建的对象运行一些初始化逻辑，`constructor`则必须实现一个初始化函数（通常称为）。`init`

但是，我发现*纯*原型方法不那么冗长，并且对于没有实现经典继承的语言的强大背景的程序员来说可能更容易理解。

顺便说一句，使用经典模型应该**避免**`new`的一件事是像上面所做的那样使用关键字进行继承，因为您正在运行`constructor`不必要的父逻辑，并且它可能会产生不良的副作用。

你应该使用`Object.create`如下：

```
function A(val) { this.val = val; }
A.prototype.alertVal = function () { alert(this.val); };

function B(val) {
    A.call(this, val); //call parent constructor
}

B.prototype = Object.create(A.prototype); //inherit from A
var b = new B('test');
b.alertVal(); //test 
```

最后，这完全取决于品味，我尊重**这两种方式**。也许其他人会想用一些真正的优点/缺点来改进这个答案，但我找不到任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:39:07.713

构造对象`new`被认为是邪恶的，因为您可能忘记使用它，然后您添加的任何属性`this`最终都会添加到全局对象中。出于这个原因，我采用第二种方法。

我学到的另一件事是，您不应该尝试将“经典”OOD 应用于 JavaScript。它有它自己的方式应该被理解，实际上它非常好。我认为 JavaScript 中的大多数对象编程问题都来自尝试将“类”的概念延伸到 JavaScript 上。

# jquery - 如何使用 jquery 删除具有给定类名的组 tr？

> ID：15871207
> 
> 赞同：0
> 
> 时间：2013-04-08T04:21:46.967
> 
> 标签：jquery

我在一个表中有一个给定的 tr 组，我需要根据组的类名删除它。我的方法不行...

```
 $("table tr").each(function()
    {
          $(this).hasClass('group').remove();
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T04:23:50.003

```
$("table tr").each(function) 
```

应该改为：

```
$("table tr").each(function () 
```

* * *

进一步检查，代码应该是

```
$("table tr").each(function () {
    if( $(this).hasClass('group') )
        $(this).remove();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T04:27:21.480

您的代码中存在轻微错误

```
$("table tr").each(function()
    {
          if($(this).hasClass('group'))
              $(this).remove();
    }); 
```

[演示](http://jsfiddle.net/dkRmB/)

* * *

如果元素集具有在参数中指定的类，[.hasClass()返回布尔值 true。](http://api.jquery.com/hasClass/)如果不是，它将返回 false。因此，您需要应用条件检查然后执行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T04:28:03.347

请尝试，这应该工作

```
$("tr").each(function()
{
     if($(this).hasClass('group'))
        $(this).remove();
}); 
```

# r - 使用 R 的谷歌地图上的密度热图

> ID：15871208
> 
> 赞同：1
> 
> 时间：2013-04-08T04:21:47.723
> 
> 标签：r, google-maps

我有一个看起来像这样的数据集

```
 longitude   latitude    Magnitude
1 -77.08597 38.7347905  4.742112594
2 -77.08597 38.8081915  4.742112594
3 -77.08597 38.8815925  5.278542493
4 -77.08597 38.9549935 12.270006486
5 -77.08597 39.0283945  4.742112594
6 -77.08597 39.1017955  4.742112594 
```

有没有办法使用谷歌地图获取这些坐标和大小并绘制密度图？

我已经尝试使用`raster`and`spatstat`包来创建使用坐标并在其上绘制强度的地图。但我还没有找到任何解决方案来在谷歌地图上绘制它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-19T22:43:51.353

使用 R 的 ggmap 包。

```
library(ggmap)
library(ggplot2)

map = get_map(location = c(-77.08597,38.7),source="google",maptype="roadmap",zoom=12)
ggmap(map)+geom_point(data = dat2,aes(x=longitude,y=latitude,size=Magnitude)) 
```

您可以缩放幅度矢量或增加缩放

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-06T22:41:24.580

我的[`googleway`](https://github.com/SymbolixAU/googleway)包中有一个谷歌地图小部件，它使用谷歌地图 API，包括他们的`heatLayer`.

要使用他们的 API，您还需要一个 API 密钥。

```
library(googleway)

## genreate some random data
set.seed(20160907)
df <- data.frame(longitude = runif(10000, min = -78, max = -74),
                                 latitude = runif(10000, min = 37, max = 40),
                                 Magnitude = rexp(10000, 1))

##key <- 'your_api_key'

google_map(data = df, key = key) %>%
    add_heatmap(weight = "Magnitude", option_radius = 0.1) 
```

[![在此处输入图像描述](https://i.stack.imgur.com/apa16.jpg)](https://i.stack.imgur.com/apa16.jpg)

# jquery - 带有句点的用户 ID 是否会破坏 jquery-socialist？

> ID：15871213
> 
> 赞同：1
> 
> 时间：2013-04-08T04:22:07.667
> 
> 标签：jquery

[在此处](http://plugins.in1.com/socialist)的示例中使用 ID 时，我正在`jquery-socialist plugin`按预期试验 和 代码功能。

也就是说，我似乎遇到了失败，特别是在尝试连接到其 ID 在用户名中包含句点的 Facebook 用户时`.`。有没有人遇到过这个问题或使用包含特殊字符的 ID 通过 Facebook 的 jquery-socialist 成功检索数据？

# sql - 如何在 Rails 中的 Active Record 查询中执行数学计算

> ID：15871218
> 
> 赞同：0
> 
> 时间：2013-04-08T04:22:29.400
> 
> 标签：sql, ruby-on-rails, ruby, activerecord, rails-activerecord

我正在构建一个应用程序，我发现有必要在我的查询中执行一些简单的数学计算。本质上，我有一个包含标准普尔 500 指数每日值的数据库，我需要根据输入的标准获取天数列表。

用户输入日期范围和百分比范围。例如，如果日期范围是 2013 年 1 月 1 日 - 2013 年 4 月 1 日，百分比范围是 -1% - 1%，则它应该返回所有 S%P 500 日值之间的列表收盘价在 % 范围内。

问题是我实际上没有 %; 的列。我只有一列用于打开/关闭值。计算仅给定开盘和收盘值 (close-open)/open*100 的 % 非常简单。但我不确定如何在查询中执行此操作。

现在，查询在日期范围内成功搜索。我的查询是：

```
@cases = Close.find(:all, conditions:["date between ? and ?",
    @f_start, @f_end]) 
```

但是我怎样才能检查当前行的 (close-open)/open*100 值是否在两个 % 范围值之间？

或者，如果这是不可能的或不正确的做法，我应该在哪里处理这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:32:11.023

您可以在 Ruby/Rails 中自己计算开/关范围，并以与日期范围相同的方式传递它。就像是：

```
percent = @f_percent / 100.0 # 5% => 0.05
low = @f_close * (1.0 - percent)
high = @f_close * (1.0 + percent)
Close.where 'date between ? and ? AND close between ? and ?', \
  @f_start, @f_end, low, high 
```

# c++ - 如何退出函数但不退出 main()

> ID：15871226
> 
> 赞同：3
> 
> 时间：2013-04-08T04:24:12.610
> 
> 标签：c++, c, function

C/C++ 是否支持从子例程函数（即不是主函数）终止程序？到目前为止，我只发现 exit 和 abort 允许用户终止当前函数或进程。如果我不在主函数中，有没有办法终止整个程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T04:29:10.960

如果您不在`main()`其他功能中，那么您也可以调用`exit()`，否则`abort()`它将终止您的整个过程。

哪里`exit()`需要清理哪里不需要清理`abort()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T04:27:51.663

```
exit(0) or exit(1) 
```

如果是`0`或`EXIT_SUCCESS`，则表示成功。如果是`EXIT_FAILURE`，则表示失败。

参考：[见这里](http://www.cplusplus.com/reference/cstdlib/exit/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T04:40:14.193

既然您在谈论 C++，请考虑**[`std::terminate`](http://www.cplusplus.com/reference/exception/terminate/)**

u 现在，“C/C++ 是否支持从子程序函数终止程序，即不是主程序？”

默认情况下`std::terminate`调用`abort`，但这可以通过安装处理程序来配置`std::set_terminate`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T04:43:58.333

无效退出（int状态）

上述方法正常终止进程，执行定期清理以终止程序。

正常程序终止执行以下操作（以相同的顺序）：

1.  与具有线程存储持续时间的当前线程关联的对象被销毁（仅限 C++11）。

2.  具有静态存储持续时间的对象将被销毁 (C++)，并调用使用 atexit 注册的函数。

3.  所有 C 流（使用 in 中的函数打开）都被关闭（如果被缓冲，则被刷新），并且所有使用 tmpfile 创建的文件都被删除。

之后，控制返回到主机环境。

当它终止调用进程时，因为您的函数是同一进程的一部分，因此在其中使用 exit() 将终止程序。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-04-08T04:31:40.173

只有从主函数调用该函数才有可能。并且从您要终止程序的那个函数返回一个用于终止程序的值，例如 -1。

例子：

```
void main()
{
    //Call to a function
    int i = functionFromMain();
    if(i == -1)
    {
        //Terminate Program
    }
} 
```

# java - 如何将 ArrayList 发送到不同的类

> ID：15871228
> 
> 赞同：0
> 
> 时间：2013-04-08T04:24:29.673
> 
> 标签：java, android, json, arraylist, baseadapter

我真的很困惑如何将 ArrayList 发送到不同的类，我有一个名为 = AgenList 的 ArrayList，我想将它发送到扩展 BaseAdapter 的不同类，有没有人可以帮助我解决我的问题..？这是我的源代码： 1\. MainActivity.java

```
public class MainActivity extends Activity {    
List AgenList = new ArrayList();
boolean boolStatusKoneksi=true;
private ProgressDialog Dialog;
protected Context applicationContext;

@Override
public void onCreate(Bundle savedInstanceState){
    new AgenAsyncTask().execute();
    super.onCreate(savedInstanceState);     
    setContentView(R.layout.mainmenu);
    GridView gridview = (GridView) findViewById(R.id.gridview);
    gridview.setAdapter(new TesAdapter(this));
}
public class AgenAsyncTask extends AsyncTask<String, String, String>
{

@Override
    protected void onPreExecute() {
        super.onPreExecute();
        Dialog = new ProgressDialog(MainActivity.this);
        Dialog.setMessage("Mohon Tunggu sebentar...");
        Dialog.setIndeterminate(false);
        Dialog.setCancelable(true);
        Dialog.show();
    }
protected String doInBackground(String... args) {

String url = ("http://www.abc.com/xyz.php");
              try{
                  JSONParser j=new JSONParser();
                    JSONArray jsonArray = j.takeJson(url);
                  for(int i =0; i<jsonArray.length(); i++)
                  {
                      JSONObject c  = jsonArray.getJSONObject(i);
                        HashMap<String, String> map = new HashMap<String, String>();
                        if (c.has("atasan")) 
                            map.put("atasan", c.get("atasan").toString());
                        if (c.has("nama_agen")) 
                            map.put("nama_agen", c.get("nama_agen").toString());
                        if (c.has("kode_agen")) 
                            map.put("kode_agen", c.get("kode_agen").toString());
                        if (c.has("no_aaji")) 
                            map.put("no_aaji", c.get("no_aaji").toString());
                        if (c.has("jenis")) 
                            map.put("jenis", c.get("jenis").toString());
                          AgenList.add(map);

                     }
                } catch (JSONException e) {
                    e.printStackTrace();
                    }
              return null;
                }
    @Override
protected void onPostExecute(String arg) {Dialog.dismiss();} 
```

如您所见，我有一个名为 AgenList 的数组列表，其中包含我想发送到 TesAdapter.java 的 JSONArray，所以这是 TesAdapter.java：

```
public class TesAdapter extends BaseAdapter{
private LayoutInflater layout;

public TesAdapter(MainActivity context) {
layout = LayoutInflater.from(context);
List AgenList = new ArrayList();
}

@Override
public int getCount() {
    return (Integer) null;
}

@Override
public Object getItem(int position) {
    return 0;
}

        @Override
        public long getItemId(int position) {
            return position;
        }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;

        convertView= layout.inflate(R.layout.list_item,parent,false);
        holder = new ViewHolder();

        holder.ATASAN = (TextView) convertView.findViewById(R.id.atasan);
        holder.NAMA_AGEN= (TextView) convertView.findViewById(R.id.nama_agen);
        holder.KODE_AGEN= (TextView)convertView.findViewById(R.id.kode_agen);
        holder.NO_AAJI= (TextView) convertView.findViewById(R.id.no_aaji);
        holder.JENIS= (TextView) convertView.findViewById(R.id.jenis);
        return convertView;

    }

}

 class ViewHolder{
    TextView ATASAN;
    TextView NAMA_AGEN;
    TextView KODE_AGEN;
    TextView NO_AAJI;
    TextView JENIS;

} 
```

我希望有人可以帮助我解决这个问题，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:27:14.557

最简单的方法是在类中添加一个`ArrayList`属性`BaseAdapter`。

然后，在您实例化 a 的类中`new BaseAdapter`，将您`ArrayList`的构造函数传递给您。

```
public class Foo {
    public void createBaseAdapter() {
        ArrayList arList = new ArrayList();
        BaseAdapter ba = new BaseAdapter(arList);
    }
}

public class BaseAdapter {
    ArrayList arList;
    public BaseAdapter(ArrayList arList) {
        this.arList = arList;
    }
} 
```

### 在你的情况下

```
public TesAdapter(MainActivity context, ArrayList list) {
    layout = LayoutInflater.from(context);
    this.AgenList = list; //Declared as a class property
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:30:02.200

使用`public static` 修饰符。

```
public static List AgenList = new ArrayList(); 
```

在其他类 using : `MainActivity.AgenList`to using`AgenList`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T04:32:06.320

据我说。最简单的方法是在**MainActivity类中****公开 getAgentList**方法，该方法可以从**TesAdapter**调用。当然还有其他方法。

 ***** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T04:32:07.270

> 将 ArrayList 发送到不同的类

使用 TesAdapter 构造函数将 ArrayList 从发送`MainActivity`到`TesAdapter`。您将需要使用`onPostExecute`添加适配器`GridView`的方法而不是 Activity 的 onCreate 方法：

将 TesAdapter 构造函数更改为：

```
public class TesAdapter extends BaseAdapter{
 private LayoutInflater layout;
 List AgenList;
 Context context;
 public TesAdapter(Context context,List AgenList) {
 layout = LayoutInflater.from(context);
 this.AgenList = AgenList;
}
.... 
```

并从`onPostExecute`将适配器添加到 GridView 为：

```
@Override
protected void onPostExecute(String arg) {
 GridView gridview = (GridView)MainActivity.this. findViewById(R.id.gridview);
 gridview.setAdapter(new TesAdapter(MainActivity.this,AgenList));
 Dialog.dismiss();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T04:34:52.100

您可以通过构造或其他类传递该数组列表。在其他类中创建一个类成员arraylist。然后在构造函数 this.agentlist=passedAgentList 中执行此操作****

# wpf - 如何在wpf中鼠标悬停时滑下带有动画的网格？

> ID：15871240
> 
> 赞同：0
> 
> 时间：2013-04-08T04:26:53.613
> 
> 标签：wpf, animation, storyboard

我的要求是有一个 2 行的网格 - 第一行将填充组合框作为数据库查询的搜索条件。第二行将是带有结果的 DataGrid。

当我将鼠标悬停在上方时，我希望上部网格从顶部向下滑动，并在鼠标离开时向上滑动。我想我可以在“过滤器”顶部有一个简单的文本块，并将鼠标悬停在它上面会拉下组合框？

我有这样的东西，但是当鼠标悬停时，动画会不停地上升/下降。

```
 <Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="40"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <Grid Grid.Row="0">
        <Grid.Triggers>
            <EventTrigger RoutedEvent="MouseEnter">
                <BeginStoryboard>
                    <Storyboard>
                        <DoubleAnimation 
                    Storyboard.TargetName="ControlsGrid" 
                    Storyboard.TargetProperty="(Grid.Height)"
                    From="0" 
                    To="66" 
                    Duration="0:0:0.5" />
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger>
            <EventTrigger RoutedEvent="MouseLeave">
                <BeginStoryboard>
                    <Storyboard>
                        <DoubleAnimation 
                    Storyboard.TargetName="ControlsGrid"
                    Storyboard.TargetProperty="(Grid.Height)"
                    From="66" 
                    To="0" 
                    Duration="0:0:0.5" />
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger>
        </Grid.Triggers>

        <TextBlock HorizontalAlignment="Center" FontSize="20" Text="Filters..."/>
    </Grid>

    <Grid Margin="0" Name="ControlsGrid" VerticalAlignment="top" Background="Yellow"/>
    <DataGrid Grid.Row="1" ColumnHeaderStyle="{DynamicResource GridViewColumnHeaderStyle}" Background="LightGray" RowBackground="LightYellow" AlternatingRowBackground="LightBlue" 
              x:Name="dataGridViewRoomQuery"  BorderBrush="Gray" BorderThickness="5"/>

</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T06:25:10.057

您的方法的问题在于，只要将“悬停”网格（带有事件触发器的网格）放在它上面，它`MouseLeave`就会收到一个事件。`ControlsGrid`

您必须将其`ControlsGrid`放入悬停网格中：

```
<Grid Grid.Row="0" Background="Transparent">
    <Grid.Triggers>
        <EventTrigger RoutedEvent="MouseEnter">
            <BeginStoryboard>
                <Storyboard>
                    <DoubleAnimation Storyboard.TargetName="ControlsGrid" 
                                        Storyboard.TargetProperty="Height"
                                        To="66" Duration="0:0:0.5" />
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
        <EventTrigger RoutedEvent="MouseLeave">
            <BeginStoryboard>
                <Storyboard>
                    <DoubleAnimation Storyboard.TargetName="ControlsGrid" 
                                        Storyboard.TargetProperty="Height"
                                        To="0" Duration="0:0:0.5" />
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </Grid.Triggers>

    <TextBlock HorizontalAlignment="Center" FontSize="20" Text="Filters..."/>

    <Grid Name="ControlsGrid" Height="0" VerticalAlignment="Top" Background="Yellow">
    </Grid>
</Grid>
<DataGrid .../> 
```

# php - 使用“关键字”进行更新时的 MYSQL 语法错误

> ID：15871241
> 
> 赞同：0
> 
> 时间：2013-04-08T04:26:58.843
> 
> 标签：php, mysql, syntax-error

我根本无法理解这个。

我正在编写一个简单的 PHP 脚本来更新特定的数据库字段。

此查询工作正常，完全没有问题，但是 setting_id 似乎很容易改变，因此不适合/便携

```
mysql_query("UPDATE oc_setting SET value='" . $css . "'" . 'WHERE setting_id=13576',    $con) or die(mysql_error()); 
```

这个查询似乎在任何情况下都不起作用，这是我需要的查询。

```
mysql_query("UPDATE oc_setting SET value='" . $css . "'" . 'WHERE key="sellya_custom_css"', $con) or die(mysql_error()); 
```

它给我留下了这个错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'key="sellya_custom_css"' 附近使用正确的语法

现在我有一种预感，它可能与单词 key 相关，可能是保留关键字或其他东西，所以我尝试将它用引号括起来，虽然脚本没有出现任何错误，但它也没有更新该字段。

我尝试了无数的单引号双引号组合，各种串联组合都无济于事。

有人可以帮我吗？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T04:29:50.840

`KEY`是mysql中的保留字

最好放在 `KEY`里面``倒勾。

来源（[链接](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T04:29:01.480

> [请不要`mysql_*`](https://stackoverflow.com/q/12859942/1190388)在新代码中使用 [函数。](https://stackoverflow.com/q/12859942/1190388)它们不再被维护并被[正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到红框了吗？改为了解准备好的语句，并使用[pdo](/questions/tagged/pdo "显示标记为“pdo”的问题")或 [mysqli](/questions/tagged/mysqli "显示标记为“mysqli”的问题")。

现在，对于这个问题：

```
"UPDATE oc_setting SET value='" . $css . "'" . 'WHERE key="sellya_custom_css"' 
```

在此查询字符串中，您在`WHERE`. 将其更改为：

```
"UPDATE oc_setting SET value='" . $css . "'" . ' WHERE `key`="sellya_custom_css"' 
```

* * *

**`key`**也需要在查询中转义。

# jquery - 使用 AngularJS 的 Flot 条形图：条形不与刻度对齐

> ID：15871242
> 
> 赞同：0
> 
> 时间：2013-04-08T04:27:02.743
> 
> 标签：jquery, angularjs, flot

我正在使用 AngularJS 和 Flot 绘制条形图：

见 jsFiddle：http: [//jsfiddle.net/juliejones/DwMwJ/3/](http://jsfiddle.net/juliejones/DwMwJ/3/)

指令：

```
App.directive('barChart', function(){
return{
    restrict: 'E',
    link: function(scope, elem, attrs){

        var weekday=new Array();
        weekday[0]="Su";
        weekday[1]="Mo";
        weekday[2]="Tu";
        weekday[3]="We";
        weekday[4]="Th";
        weekday[5]="Fr";
        weekday[6]="Sa";

        var options = {
            bars: {
                show: true,
                barWidth: 1000 * 60 * 60 * 24 * 0.7,
                align: 'center'
            },
            colors: ["#F90"],
            xaxis: {
                mode: 'time',
                tickSize: [1, 'day'],
                minTickSize: [1, 'day'],
                tickFormatter: function (val, axis) {
                    var d = new Date(val);
                    return weekday[d.getUTCDay()] + '<br />' + d.getUTCDate();
                }
            },
            yaxis: {
                minTickSize: 1,
                tickDecimals: 0,
                min: 0
            }
        };
        var chart = null;

        scope.$watch(attrs.ngModel, function(v){
            if(!chart){
                chart = $.plot(elem, v , options);
                elem.show();
            }else{
                chart.setData(v);
                chart.setupGrid();
                chart.draw();
            }
        });
    }
};
}); 
```

数据（除第一项的值外相同）：

```
var data1 = [[
    [1364774400000, ], 
    [1365206400000, 5], 
    [1365292800000, 2],
    [1365379200000, 2]
   ]];

var data2 = [[
    [1364774400000, 0], 
    [1365206400000, 5], 
    [1365292800000, 2],
    [1365379200000, 2]
   ]]; 
```

只要第一个数据点具有空值，图表看起来就很好。3 个条形图完全以它们的刻度为中心。请参阅 jsFiddle。

单击“更改数据”按钮以加载在第一个数据点中具有零值的第二组数据。这三个条移动，因此它们不再居中，并且现在离它们应该在 x 轴上的位置不远了。

为什么在使用第二组数据时，条形图没有以正确的报价为中心？我该如何纠正呢？

编辑：当不涉及 AngularJS 时，这对我来说非常有效。见 jsFiddle：http: [//jsfiddle.net/juliejones/fC3zs/1/](http://jsfiddle.net/juliejones/fC3zs/1/)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T05:49:09.527

您可以在 xaxis 中使用 alignTicksWithAxis: 1, 指令。这将使您的价值观与您的酒吧保持一致。

这是一个工作小提琴：`http://jsfiddle.net/u8csX/`

向第二个数据集添加了更多数据点，以验证它确实对齐。如果您想为标签提供更多空间，则可以修改 labelWidth / labelHeight 属性。我在小提琴中也这样做了，这使您的 yaxis 更加明显。

API 也很有帮助：`http://flot.googlecode.com/svn/trunk/API.txt`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T22:15:53.390

我已经解决了我自己的问题...

在我更改的指令中：

```
return weekday[d.getUTCDay()] + '<br />' + d.getUTCDate(); 
```

至：

```
return weekday[d.getDay()] + '<br />' + d.getDate(); 
```

和（在“酒吧”下）删除：

```
align: 'center' 
```

现在，当从一个数据集更改为另一个数据集时，x 轴标签保持不变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-12T21:54:29.783

我认为您的问题可能与此有关： [angular.js 指令中的浮点图表具有零维度](https://stackoverflow.com/questions/16291656/flot-chart-in-angular-js-directive-has-zero-dimensions)

使用 'E' on 指令会给出错误的大小信息来浮动，请改用 'A'。

# html - 试图使背景图像可扩展，但它仍然在顶部显示可滚动版本

> ID：15871243
> 
> 赞同：0
> 
> 时间：2013-04-08T04:27:10.923
> 
> 标签：html, css

我一直在尝试编辑我网站的主 CSS 文件，以便在您向下滚动时背景图像不会移动。我尝试了多种技术，包括下面列出的技术，但问题是从页面顶部滚动时图像仍然会移动……但是一旦到达图像底部，图像就会再次出现，但是在这一点上，它变得可扩展并且当您继续向下滚动时不会移动（这正是我想要的，但我希望它从页面的最顶部一直可扩展）。只是想知道下面的代码中需要修改什么，或者我是否需要在另一部分中查找可能导致此问题的任何特殊代码？

```
body { background: url(../img/pic.jpg) center fixed no-repeat; 
height:100%; width:100%;
-webkit-background-size: cover;
-moz-background-size: cover;
-o-background-size: cover;
background-size: cover; 
padding:0; margin:0; text-align:center} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:30:08.403

```
body {
    background: url(../img/pic.jpg) center top no-repeat; 
    height:100%;
    width:100%;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover; 
    padding:0;
    margin:0;
    text-align:center;
    position: fixed;
} 
```

# css - CSS 伪 :after :before 不工作

> ID：15871254
> 
> 赞同：0
> 
> 时间：2013-04-08T04:28:20.727
> 
> 标签：css

```
<div class="select" style="">
<label>Status</label>
<select id="ticket_status_id" name="ticket[status_id]" tabindex="4">
<option value="0" selected="selected">New</option>
<option value="1">Open</option>
<option value="2">Pending</option>
<option value="3">Solved</option>
</select>
</div> 
```

嘿，有人知道我将如何添加`'title'`属性`'ticket_status_id'`吗？使用 css 我可以设置样式`'#ticket_status_id'`，但是当我尝试使用或`'#ticket_status_id:before'`没有任何反应时？`'ticket_status_id:after'``'content: "";'`

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T04:33:15.827

您不能使用 css 将“title”属性添加到任何 html 元素。为此，您需要使用 javascript。

```
<script type='text/javascript'>
document.getElementById('ticket_status_id').title='test title'

</script> 
```

# css - CSS 选择器组织

> ID：15871257
> 
> 赞同：0
> 
> 时间：2013-04-08T04:28:26.950
> 
> 标签：css, css-selectors

我有一些可用的 CSS 代码，但我觉得应该有一种更有效的方式来组织我想要的 CSS。基本上，我希望两个单独的 CSS 区域在这种情况下表现相同，但在其他方面不同（这对这个问题并不重要）。

这是工作的CSS：

```
#paragraph p a:visited, #paragraph2 p a:visited{color:#00f;}  
#paragraph p a:link, #paragraph2 p a:link{color:#f00;} 
```

我在设想这样的事情：

```
(#paragraph | #paragraph2) p a{
visited{color:#00f;}
link{color:#f00;}
} 
```

我将尝试用文字封装我的伪代码，以防我写的内容没有意义：

#paragraph 或#paragraph2，包含一个包含一个“a”的“p”。然后，使用“a”标签更改“链接”和“已访问”属性。

首先，感谢任何花时间阅读/回答的人。

其次，可能有更好的方法来完全组织我的文档，如果您在该领域有建议，那就太酷了，但我也真的很好奇我提出的方法是否可行，以及我将如何实现它方式。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:31:23.080

你可以给这两个段落一个类，然后根据类进行选择，这样你就不必重复自己了。此外，如果您想要在这方面更好地替代常规 CSS ，请查看[LESS](http://lesscss.org/)和[Sass 。](http://sass-lang.com/)

例如，在 Sass 中，您可以这样做（如果您在两个段落中添加 .paragraph 类）：

```
.paragraph p a {
    visited { color: #00f; }
    link { color: #f00; }
} 
```

# r - 两个矩阵上的 R vennDiagrams

> ID：15871259
> 
> 赞同：0
> 
> 时间：2013-04-08T04:28:36.350
> 
> 标签：r

我从 lmFit 和 eBayes 以及 topTable 获得了两个矩阵，一个是健壮的，一个不是。我从两个矩阵中的每一个中选择了 P.Value 小于我的阈值的行。我想使用 venn Diagrams 比较两个生成的矩阵，以查看两者之间哪些行是共同的。

```
 pval.thr = 0.1
 fit2 <- lmFit(expMat, design, method = "robust", na.omit = T)

 fit2 <- eBayes(fit2)
 res = topTable(fit2, coef = 2, adjust.method = "bonferroni", number = "All", sort.by = "p") 
```

和

```
 fit3 <- lmFit(expMat, design, method = "ls", na.omit = T)

 fit3 <- eBayes(fit3)
 res = topTable(fit3, coef = 2, adjust.method = "bonferroni", number = "All", sort.by = "p") 
```

数据将如下所示：

```
 ID logFC        AveExpr          t         P.Value    adj.P.Val         B

 T  0.059335247 0.154239328 3.749658724 0.000686454 0.105713938 -0.618554935

 H  0.123237308 0.554763583 2.889360548 0.006797704 1   -2.795346287

 C  -0.083833815    0.303813845 -2.880403408    0.006953066 1   -2.814922167

 V  -0.321277798    1.242826381 -2.754181612    0.009528321 1   -3.103478276

 I  0.049515688 0.210959268 2.673704857 0.011608836 1   -3.288163042

 A  -0.591708802    2.968364189 -2.653517946    0.012193179 1   -3.328550805

 S  -0.202304813    0.698173244 -2.479078257    0.018499401 1   -3.698704926

 B  -0.0363145  0.139366103 -2.439974357    0.020272635 1   -3.794860792 
```

有没有办法做到这一点？

到目前为止，我已经查找了 vennCount，但我无法弄清楚如何在两个不同的矩阵上使用它。如果有其他可能有用的包或方法，我也很乐意探索。

# gwt - 在 GWT 中，鼠标悬停时更改标签的背景

> ID：15871261
> 
> 赞同：2
> 
> 时间：2013-04-08T04:28:50.013
> 
> 标签：gwt, user-interface, label, mouseover

我得到了这个代码：

```
private class MyLabel extends Label implements MouseOverHandler, MouseOutHandler {
      public void onMouseOver(final MouseOverEvent moe) {
       this.getElement().getStyle().setBackgroundColor("E6D5D5");

      }

    @Override
    public void onMouseOut(MouseOutEvent event) {
        // TODO Auto-generated method stub
        this.getElement().getStyle().setBackgroundColor("FFFFFF");
    }
}
MyLabel lb=new MyLabel();
lb.setText("ok"); 
```

但是什么也没发生，那么我的代码有什么问题呢？

谁能帮我解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T04:34:41.990

您需要将鼠标处理程序注册到标签。

```
lb.addMouseOverHandler(this);
lb.addMouseOutHandler(this); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T07:32:17.553

```
label.addStyleName("labelStyle");

.labelStyle : Hover {

 background : url("Mention your image");

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-17T08:45:16.777

请在颜色代码前面保留#

# extjs - 如何更改 EXTJS BoxComponent 中的 html 值和侦听器配置

> ID：15871264
> 
> 赞同：1
> 
> 时间：2013-04-08T04:29:03.970
> 
> 标签：extjs, extjs3

我的 BoxComponent 如下所示

```
 this.terms = new Ext.BoxComponent({
     id: 'register_isv_terms_linkbox',
     itemId: 'register_isv_terms_link',
     autoEl: {
        id: 'register_isv_terms_link_el',
        tag: 'a',
        html: '',
        cls: 'ux-link'
      },
      listeners: {
           scope: this
      }
  });
  this.urls.add(this.terms); 
```

我想动态配置 BoxComponent `html`和`listeners(render)`一些方法。所以我尝试如下所示，但这段代码对我不起作用

对于 html 配置：-

```
 Ext.getCmp('register_isv_terms_linkbox').setHtml('www.google.com'); 
```

任何人都知道如何动态配置 BoxComponent 请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T06:42:30.740

Ext.getCmp('register_isv_terms_linkbox').update('www.google.com');

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:30:21.440

不完全确定你在问什么，听起来你想在盒子呈现时添加一些内容？

```
this.terms.on('render', function(box) {
    box.el.dom.innerHTML = 'Some Value';
}, this); 
```

不太确定您正在尝试对听众做什么，如果您更具体，那么我相信解决方案会非常困难。不过，我有点想在这里拍摄黑暗。

# internet-explorer - 如何以浏览器的方式测量文本大小？

> ID：15871269
> 
> 赞同：0
> 
> 时间：2013-04-08T04:29:26.033
> 
> 标签：internet-explorer, c#-4.0, firefox, gdi+

我正在尝试在独立应用程序（Windows 或 Java）中测量字符串的大小（以像素为单位），但此应用程序报告的大小与 FF 或 IE 中报告的字符串大小不匹配。

我使用下面的代码来测量字符串“Graphics”的大小，它返回 97 个像素。FF 和 IE 将字符串的大小报告为 64 像素。我唯一想到的是dpi，但我明确设置了它。

谁能给我任何关于如何实现这一目标的指示？如前所述，我正在寻找一种独立的测量文本的方法，但结果需要与浏览器报告的大小相当。

```
Bitmap bmp = new Bitmap(1, 1);
        SizeF f = new SizeF();
        bmp.SetResolution(CreateGraphics().DpiX, CreateGraphics().DpiY);

        using (Graphics g = Graphics.FromImage(bmp))
        {
            g.TextRenderingHint = System.Drawing.Text.TextRenderingHint.AntiAlias;
            FontFamily ffm = FontFamily.Families.FirstOrDefault(r=>r.Name.Equals("Arial"));

            using (System.Drawing.Font font = new System.Drawing.Font(ffm, 12.0F,  FontStyle.Regular, GraphicsUnit.Point))
            {
                float ff = font.SizeInPoints;
                f = TextRenderer.MeasureText(g,"Graphics", font, new Size(int.MaxValue, int.MaxValue), TextFormatFlags.NoPadding);
            }
        } 
```

我通过创建这个 span 标签并使用 js 获取它的大小来测量浏览器中的大小。

```
<span style="font-family: Arial; font-size: 12pt;">Graphics</span> 
```

# asp.net-mvc - Orchard - Ajax 仅显示部分视图

> ID：15871272
> 
> 赞同：1
> 
> 时间：2013-04-08T04:29:43.363
> 
> 标签：asp.net-mvc, asp.net-ajax, orchardcms

我正在做一个 Orchard 项目，我正试图让我的 ajax 代码在那里工作。

这是视图：

```
 @model Ignite.Events.ViewModels.EventListPartViewModel
@{
    Script.Require("jQuery");
    Script.Include("EventList.js").AtLocation(Orchard.UI.Resources.ResourceLocation.Foot);
    Script.Include("fullcalendar.js").AtLocation(Orchard.UI.Resources.ResourceLocation.Foot);
    Script.Include("EventCalendar.js").AtLocation(Orchard.UI.Resources.ResourceLocation.Foot);
    Script.Include("jquery.unobtrusive-ajax.js").AtLocation(Orchard.UI.Resources.ResourceLocation.Foot);
    Style.Include("fullcalendar.css").AtLocation(Orchard.UI.Resources.ResourceLocation.Foot);
}

@using (Ajax.BeginForm("GetEventListItems", "Events", new { area="Ignite.Events", month = 4, year = 2013 }, new AjaxOptions { UpdateTargetId = "event-list", HttpMethod = "GET", InsertionMode = InsertionMode.Replace}, new { id = "ajaxForm" }))
{
    @Html.AntiForgeryToken();
    <input type="submit" value="Get Next" />
}
<table id="event-list" class="event-list">
    @Html.Partial("_EventList", Model.Events)
</table>

<div id="calendar" class="clear"></div> 
```

这是一个返回部分视图的控制器：

```
[ValidateAntiForgeryToken]
        public PartialViewResult GetEventListItems(int? month, int? year)
        {
            if (month == null || year == null)
            {
                month = DateTime.Now.Month;
                year = DateTime.Now.Year;
            }

            var result = _eventListDataService.GetEventListItems((int) month, (int) year);

            return PartialView("_EventList", result);
        } 
```

我想知道为什么我总是只得到部分视图而不是完整的视图，其中呈现了部分视图。

谢谢，

雅库布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-12T12:17:36.460

只有部分视图被渲染，因为那`GetEventListItems()`是返回的：`PartialViewResult`。

当您将 return 更改为 时会发生什么`ViewResult`？

您还需要用`ThemedAttribute(true)`.

# iphone - 单击表格视图单元格时加载缓慢

> ID：15871274
> 
> 赞同：3
> 
> 时间：2013-04-08T04:29:49.457
> 
> 标签：iphone, ios, ios5, ios4, ios6

当我单击表格视图单元格时，它将在同一个表格视图中一段时间​​（直到下一页完全加载）然后它将显示下一个视图..

我想点击表格视图单元格，它应该立即转到下一页并显示加载页面弹出窗口..

我已经尝试过 impActivityAgent 并且还尝试在它进入下一页时显示警报视图（但视图是前一页，即表格视图）..但是..它完全加载页面，这需要时间然后显示警报..

在下一页我发布和解析需要时间的数据，在此期间我想显示活动指示器..

我已经尝试了很多方法，但仍然是它首先完全加载下一页然后显示内容或 alertView 或活动指示器，当单击表格视图单元格时我无法显示活动指示器..

我的代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    nextTableViewController *doc = [[nextTableViewController alloc]initWithNibName:@"nextTableViewController" bundle:nil];
    [self.navigationController pushViewController:doc animated:YES];
} 
```

和下一个视图控制器是：

```
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view from its nib.
[[ImpActivityAgent defaultAgent] makeBusy:YES];

NSURL *loadUrl = [NSURL URLWithString:[NSString stringWithFormat:@"http://%@/gmail.com",inputURL]];
htmlData = [NSData dataWithContentsOfURL:loadUrl];
self.htmlSTR = [[NSString alloc] initWithData:htmlData encoding:NSUTF8StringEncoding];
[self parseHTML];
} 
```

在解析函数中，我正在解析我使用“hpple”解析器在 HTML 格式中作为响应获得的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T05:14:46.700

只需使用一个单独的线程来处理解析。希望这段代码对您有所帮助。

```
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view from its nib.
[[ImpActivityAgent defaultAgent] makeBusy:YES];

[NSThread detachNewThreadSelector:@selector(newMethodForParsing) toTarget:self withObject:nil];

}

-(void)newMethodForParsing
{
NSURL *loadUrl = [NSURL URLWithString:[NSString stringWithFormat:@"http://%@/gmail.com",inputURL]];
htmlData = [NSData dataWithContentsOfURL:loadUrl];
self.htmlSTR = [[NSString alloc] initWithData:htmlData encoding:NSUTF8StringEncoding];
[self parseHTML];

[tableView reload]; // tableView refers to your table view name

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T05:26:32.007

试试这个

```
-(void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    [[ImpActivityAgent defaultAgent] makeBusy:YES];
    [self performSelectorInBackground:@selector(start) withObject:Nil];
    //or you can use after delay then no need to use perform selector on main thread in start method.
    [self performSelector:@selector(start) withObject:nil afterDelay:0.5];
}

-(void)start
{
    NSURL *loadUrl = [NSURL URLWithString:[NSString stringWithFormat:@"http://%@/gmail.com",inputURL]];
    htmlData = [NSData dataWithContentsOfURL:loadUrl];
    self.htmlSTR = [[NSString alloc] initWithData:htmlData encoding:NSUTF8StringEncoding];
    [self performSelectorOnMainThread:@selector(parseHTML) withObject:Nil waitUntilDone:YES];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T05:26:49.653

尝试一下....

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(newMethodForParsing) userInfo:nil repeats:NO];
}

-(void)newMethodForParsing
{
NSURL *loadUrl = [NSURL URLWithString:[NSString stringWithFormat:@"http://%@/gmail.com",inputURL]];
htmlData = [NSData dataWithContentsOfURL:loadUrl];
self.htmlSTR = [[NSString alloc] initWithData:htmlData encoding:NSUTF8StringEncoding];
[self parseHTML];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-06T13:44:55.293

Ganapathy 的回答会泄漏内存，你需要在方法中放置一个 autoreleasepool。这是一种更简单的方法。这将在主线程上运行，但在队列中的现有任务之后。

如果您希望它在不同的线程上运行，请替换为`dispatch_get_global_queue()`

```
- (void)viewDidLoad
{
   [super viewDidLoad];
   // Do any additional setup after loading the view from its nib.
   [[ImpActivityAgent defaultAgent] makeBusy:YES];

   dispatch_async(dispatch_get_main_queue(), ^{

      NSURL *loadUrl = [NSURL URLWithString:[NSString stringWithFormat:@"http://%@/gmail.com",inputURL]];
      htmlData = [NSData dataWithContentsOfURL:loadUrl];
      self.htmlSTR = [[NSString alloc] initWithData:htmlData encoding:NSUTF8StringEncoding];
      [self parseHTML];
   )
} 
```

# php - PHP - 使用类时jquery没有得到post返回

> ID：15871277
> 
> 赞同：0
> 
> 时间：2013-04-08T04:29:56.637
> 
> 标签：php, jquery, post

这是我的 link_handler.php 作为 post 方法操作。

```
require_once 'download_handler.php';

if ($_POST) {

    if (empty($_POST['link'])) {
        $mahar['success'] = false;
        $mahar['error'] = "you're not insert any link";
        echo json_encode($mahar); //work, show error string on #success
        exit();
    }

    $download = new Hijack($_POST['link']);
    $download->check_link();
    $download->execute();
    $mahar['success'] = $download->result['success']; // produce success(bool) = false
    $mahar['error'] = $download->result['error']; // produce error string : there's some error on parsing some stuff
    echo json_encode($mahar); //not work show nothing on #success
} 
```

这是我的jQuery语法

```
$(document).ready(function() {
    $("#go").click(function() {
    $("#success").fadeOut();
        $.post('link_handler.php', {link: $("#url").val()},
        function(mahar) {
            if (mahar.success) {
                $("#success").html(mahar.link);
            } else {
                $("#success").html(mahar.error);
            }
        }, 'json');
        return false;
    })
}); 
```

谁能解释这里发生了什么？

我在这里学习ajax。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:49:51.857

试试这2件事..

第一个。对于您的 $_post 链接，设置没有您的域的完整路径，就好像它是

> [http://mydomain.com/link_handler.php](http://mydomain.com/link_handler.php) - 把'/link_handler.php'
> 
> [http://mydomain.com/something/link_handler.php](http://mydomain.com/something/link_handler.php) - 把'/something/link_handler.php'

第二。在第一行的 link_handler.php 中：

```
exit(json_encode(array('success'=>"Your request is successfull"))); 
```

如果您在浏览器上得到响应，那么您的问题出在您的 PHP 代码中。

第三。在您的 jquery 中放置 1 个警报（'我们正在发布'）；在 $.post 之前确保您的 javascripts 有效..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T05:05:07.020

最可能的情况是输出不是（仅）JSON。

考虑这些陈述：

```
$download = new Hijack($_POST['link']);
$download->check_link();
$download->execute();
$mahar['success'] = $download->result['success'];
$mahar['error'] = $download->result['error']; 
```

这些语句中的任何一个都可能产生一个警告或通知，这会弄乱 JSON 语法。您可以通过检查浏览器的网络选项卡并查找响应内容来检查这一点。

您应该解决您的代码可能产生的所有警告；您也可以考虑[记录警告](https://stackoverflow.com/questions/10331084/error-logging-in-a-smooth-way/10476589#10476589)。

# google-maps - 用于市政府和病房的 Google Map Api？

> ID：15871282
> 
> 赞同：2
> 
> 时间：2013-04-08T04:30:03.223
> 
> 标签：google-maps

是否有针对特定城市和病房的 Google 地图 API。任何参考都可以欣赏。我可以得到自治市和病房的边界吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T19:04:21.433

我想你想在地图上画一个轮廓来定义一个区域，在你的情况下是市政和病房区域

我知道在美国有人口普查数据，其中包含所有县的经度和纬度，可以免费下载。我不确定你想显示边界的国家是否有类似的东西，但是谷歌搜索“长纬度坐标轮廓柏林市政”会显示很多结果。

那么，找到坐标后，您将如何处理它们 - Google Maps API 允许您根据地理坐标将多边形放在地图上。

我使用几何库的 Google 编码折线部分来存储我的多边形，然后在显示特定状态时重新显示它们。

例子

```
var map = new google.maps.Map(document.getElementById("googlemap"), myOptions);
var encodedpoints = "<encoded points string>";

var polyOptions = {
"strokeColor": '#000000',
"strokeOpacity": 1,
"strokeWeight": 1,
"fillColor": "#000000",
"fillOpacity": 0.5
};
polyOptions.path = google.maps.geometry.encoding.decodePath(encodedpoints)
var mypolygon = new google.maps.Polygon(polyOptions);
mypolygon.setMap(map); 
```

此示例将在地图上放置一个多边形，该多边形具有黑色线条边框和 50% 不透明度黑色填充。您可以将选项更改为任何您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T02:53:05.990

Google 确实有一个可能对您有用的[Places API 。](https://developers.google.com/places/documentation/search)它允许您查找几乎所有地方的信息 - 包括市政当局。我不知道它是否会给你在地图上绘制多边形所需的界限，但至少如果会给你一个起点。

至于实际在地图上绘制边界，您可以使用[叠加层](https://developers.google.com/maps/documentation/javascript/overlays)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T13:52:50.403

尝试研究这个..这可能会有所帮助

[https://maps.google.com/maps/ms?ie=UTF8&t=m&source=embed&oe=UTF8&msa=0&msid=206991552322184464231.0004b92f102c33413c51a](https://maps.google.com/maps/ms?ie=UTF8&t=m&source=embed&oe=UTF8&msa=0&msid=206991552322184464231.0004b92f102c33413c51a)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-13T20:31:46.650

我刚刚遇到了[govtrack.us](http://gis.govtrack.us/map/demo/dc-ward-2013/)的 API，用于各种政府边界，包括 DC Ward。

获得所有边界：

```
http://gis.govtrack.us/boundaries/dc-ward-2013/shape?format=json 
```

获得一个病房：

```
http://gis.govtrack.us/boundaries/dc-ward-2013/5/shape?format=json 
```

# javascript - 当鼠标停留在链接上时如何获取选项卡的详细信息

> ID：15871284
> 
> 赞同：1
> 
> 时间：2013-04-08T04:30:16.603
> 
> 标签：javascript, jquery, html, css

我正在尝试设计一个网站。我在主页中有一些我想做的选项卡，如屏幕截图所示。在我将指针放在 javaL 中的屏幕截图中，它正在显示内容。请建议我如何做到这一点

![在此处输入图像描述](https://i.stack.imgur.com/SyQaJ.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T04:33:46.813

试试这个 HTML 代码

```
<li class="box">Box</li> 
```

CSS

```
li.nav-item:hover + .box, .box:hover {
    display: block;
}
.box {
    display: none;
    list-style: none;
    opacity: 0.3;
}
.box:hover {
    opacity: 1;
} 
```

看看这个 [http://jsfiddle.net/4unLH/](http://jsfiddle.net/4unLH/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T05:52:59.240

您可以使用 div 和带有 css 的 z-index 属性的 javascript 进行尝试。

# object - OCaml 中是否支持“钩子”？

> ID：15871285
> 
> 赞同：1
> 
> 时间：2013-04-08T04:30:45.023
> 
> 标签：object, hook, ocaml

我[遇到了这个声明](http://ocaml.org/tutorials/objects.html)

> “我注意到 xxxx 中的程序员倾向于过度使用继承，可能是因为这是在该语言中扩展代码的唯一合理方法。扩展代码的更好和更通用的方法通常是使用钩子（参见 Apache 的模块 API，[ cf. Drupal 我可能会添加]）。

已经看了一段时间，没有看到 OCaml 文档中其他地方重复出现的“钩子”一词。

OCaml 中是否对此有一些语言支持？为我指明正确的方向。我想要某种现有的类（所有实例）托管和回调，或者甚至不想要，模块可以以某种方式实现挂钩吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T04:54:06.913

我会将其视为教程作者的临时个人意见。钩子不是 OCaml 对象设计的一部分。（在我个人看来，钩子比继承要糟糕得多。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:22:00.167

[Apache 文档中对](http://httpd.apache.org/docs/2.0/developer/hooks.html)**hook**的描述是：

> 通常，钩子函数是 Apache 在处理请求期间的某个时间点调用的函数。模块可以提供被调用的函数，并指定它们与其他模块相比何时被调用。

更通用的术语是**回调函数**；像 C# 这样的语言有特殊的回调对象，称为**委托**，因为它们不将函数视为其语言中的（好）一等公民。**在像OCaml**这样的函数式语言中，函数与其他值没有什么不同，因此您可以像传递任何整数值一样传递它们，而无需指针等。这使得用这些语言编写回调函数变得如此自然，以至于他们的程序员甚至不需要一个花哨的名字。;)

事实上，OCaml 的标准库有许多**高阶函数**，它们以其他函数作为参数。下面是一个例子：

```
List.iter print_endline ["higher"; "order"; "function"] 
```

该`List.iter`函数将该`print_endline`函数作为*“回调”*参数并将其应用于第二个参数（字符串列表）的每个元素。由于 OCaml 允许函数具有副作用，您甚至可以提供一个函数来`List.iter`修改程序中其他地方的一些引用。

# r - R列表和向量困境

> ID：15871287
> 
> 赞同：0
> 
> 时间：2013-04-08T04:30:58.650
> 
> 标签：r

我有一个规范告诉我，我需要将变量`C`作为一个列表，其中的元素是字符向量。

所以，我尝试了

```
C = list()
vector = c("dsdas", "dsadsda", "dsdasdasdasdada")
C[1] = vector 
```

然后我得到`warning : number of items to replace is not a multiple of replacement length`

但请注意，`C`在索引 1 处仅包含 1 个元素，即`"dsdas"`

但是，这将起作用。

```
C = list()
vector = list(c("dsdas", "dsadsda", "dsdasdasdasdada"))
C[1] = vector 
```

如果我的规范说我需要一个字符向量而不是一个列表，我有什么选择，为什么会有这样的`C`行为？我认为一个列表可以包含任何长度的字符向量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T04:50:40.927

`lists`可以按照你的意愿行事，但是你被`[`/`[[`陷阱（或者更具体地说`[<-`/`[[<-`陷阱。

用于`[[`提取（以及`[[<-`追加或替换列表中的单个元素）

用于`[`提取和`[<-`追加或替换列表中的*多个*元素

在您的情况下，您正在尝试分配给单个元素`C[[1]]`

所以

```
C[[1]] <- vector 
```

如果你想`[<-` 在这种情况下分配使用，我建议不要这样做。

如果你真的觉得你想这样做，你可以传递一个`list`（正如`[<`预期的那样，因为`C`是一个列表）

```
C[1] <- list(vector) 
```

# c - strcpy() 不能正常工作

> ID：15871292
> 
> 赞同：1
> 
> 时间：2013-04-08T04:31:38.387
> 
> 标签：c, string, strcpy

我目前正在编写一个程序，其中我陷入了 strcpy() 函数的另一种行为。这是它的简短演示......

我经历了以下问题：[从 C 字符串中删除第一个和最后一个字符](https://stackoverflow.com/questions/1726298/strip-first-and-last-character-from-c-string)

```
//This program checks whether strcpy() is needed or not after doing the modification in the string 
#include <stdio.h>
#include <string.h>

int main()
{
        char mystr[] = "Nmy stringP";
        char *p = mystr ;
        p++;

        p[strlen(p)-1] = '\0';
        strcpy(mystr,p);
        printf("p : %s mystr: %s\n",p,mystr);

} 
```

输出 ：-

```
p : y strnng mystr: my strnng 
```

如果我不使用 strcpy() 函数，那么我得到

```
p : my string mystr : Nmy string 
```

为什么会这样？？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T04:34:01.620

标准说：

> 7.24.2.3
> 
> 如果复制发生在重叠的对象之间，则行为未定义。

您可以使用`memmove`或完全不同的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T04:51:43.493

您不能使用`strcpy`重叠的内存位置，即，如果源字符串和目标字符串重叠。在这种情况下，行为是未定义的，如标准中所述。

但是您可以使用`temp`内存位置进行这样的[交换](http://codepad.org/gJiZgoyV)

# grails - 停止 Grails Controller 显示添加选项

> ID：15871303
> 
> 赞同：0
> 
> 时间：2013-04-08T04:32:27.547
> 
> 标签：grails

我正在尝试使用 Grails 来托管一个简单的（个人）网站，并且正在寻找一种方法来禁用（或密码保护它们）控制器，使其不显示域对象的添加和编辑按钮。

我的控制器看起来像这样：

```
class DownloadsController {
    static scaffold = Download
} 
```

我的域类看起来像这样：

```
class Download {

    static mapping = {
    }

    static constraints = {
        link(url: true)
    }

    String name
    String link

} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T05:45:09.857

如果您使用的是 Spring 安全插件，则可以保护控制器中的`edit`和`add`（以及`POST`url）的 url。请参阅[http://grails-plugins.github.io/grails-spring-security-core/docs/manual/guide/5%20Configuring%20Request%20Mappings%20to%20Secure%20URLs.html](http://grails-plugins.github.io/grails-spring-security-core/docs/manual/guide/5%20Configuring%20Request%20Mappings%20to%20Secure%20URLs.html)

如果您没有使用 Spring Security，您可能需要考虑它，因为它似乎很符合您的要求。还有一些方便的标签供您在视图中使用（请参阅[http](http://grails-plugins.github.io/grails-spring-security-core/docs/manual/guide/6%20Helper%20Classes.html) ://grails-spring-security-core/docs/manual/guide/6%20Helper%20Classes.html ）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T05:14:35.710

对于快速而肮脏的解决方案，您可以覆盖控制器中的编辑/添加脚手架操作，如下所示：

```
class DownloadsController {
   static scaffold = Download

   //override scaffolded edit
   def edit() {
      redirect(action: "list")
   }

   //override scaffolded add
   def add() {
      redirect(action: "list")
   }
} 
```

如果您需要更复杂的解决方案，请查看[spring security core 插件](http://grails.org/plugin/spring-security-core)

# java - JTable 表头格式

> ID：15871306
> 
> 赞同：3
> 
> 时间：2013-04-08T04:32:48.647
> 
> 标签：java, swing, jtable, jtableheader, database-metadata

我想更改`JTable`显示 SQL Server 数据库中数据的我的标题，因为它还在我的数据库上显示相同的列名。我只需要数据本身，而不是列名。

这是我用来显示数据的代码：

```
public void search() throws Exception{
        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
            String url = "jdbc:odbc:*****";
            String user = "*****";
            String pass = "*****";
            Connection con =  DriverManager.getConnection(url, user, pass);
            Statement state = con.createStatement();
            ResultSet rs = state.executeQuery("SELECT * FROM dbo.Patients");
            ResultSetMetaData rsmetadata = rs.getMetaData();
            int columns = rsmetadata.getColumnCount();
            DefaultTableModel dtm = new DefaultTableModel();
            Vector column_name = new Vector();
            Vector data_rows = new Vector();

            for (int i=1; i<columns;i++){
                column_name.addElement(rsmetadata.getColumnName(i));
            }
            dtm.setColumnIdentifiers(column_name);

            while(rs.next()){
                data_rows = new Vector();
                for (int j=1; j<columns; j++){
                data_rows.addElement(rs.getString(j));
                }
                dtm.addRow(data_rows);
            }
            tblPatient.setModel(dtm);
    } 
```

这是结果：

![这](https://i.stack.imgur.com/06cKj.jpg)

我想将 pIDNo 更改为患者 ID，将 pLName 更改为姓氏，pFName 更改为名字，依此类推……

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T04:38:43.483

我会尝试修改您的选择：

反而

`SELECT * FROM dbo.Patients`

采用

`SELECT pId as "Patient ID", ...`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T04:43:48.923

更改`SELECT * FROM dbo.Patients`为`SELECT pIDNo AS 'Patient ID', pLName AS '....` 是最简单的方法。而且，命名列名而不是使用`*`会更快。

# javascript - 页面加载后延迟 javascript 和 jquery 的终极解决方案

> ID：15871307
> 
> 赞同：2
> 
> 时间：2013-04-08T04:32:58.737
> 
> 标签：javascript, jquery, pagespeed

您可能知道，[Google PageSpeed Insights](https://developers.google.com/speed/pagespeed/insights)希望您推迟 javascript。

Google 本身[提出了一种](https://developers.google.com/speed/docs/best-practices/payload?hl=it#DeferLoadingJS)延迟代码的解决方案：

```
<script type="text/javascript">
    function downloadJSAtOnload()
    {
        var element = document.createElement("script");
        element.src = "deferredfunctions.js";
        document.body.appendChild(element);
    }
    if (window.addEventListener) window.addEventListener("load", downloadJSAtOnload, false);
    else if (window.attachEvent) window.attachEvent("onload", downloadJSAtOnload);
    else window.onload = downloadJSAtOnload;
</script> 
```

当然是一个很好的解决方案，但它与实际情况相去甚远（要包含许多脚本，要执行的代码等......）

举个例子：

```
<html>
    <head>
    </head>
    <body>
        <script type='text/javascript' src='...'></script>
        <script type='text/javascript' src='...'></script>
        <script type='text/javascript' src='...'></script>
        <script type='text/javascript'><!--
            // some code
            $(document).ready(function(){
                // code to execute when the page is ready
            });
        --></script>
    </body>
</html> 
```

问题是：如何将谷歌的建议应用到上面的例子中？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-08T05:11:21.120

`downloadJSatOnload`如果您将多个脚本元素附加到页面，然后调用您通常放入的代码，Google 示例可以适用于多个脚本`$(document).ready(function () { ... });`。该代码可以显式调用，也可以是最后下载的文件。

# java - 将 JSONArray 转换为字符串数组

> ID：15871309
> 
> 赞同：71
> 
> 时间：2013-04-08T04:33:01.457
> 
> 标签：java, android, json

我想问一个关于将 a 转换`jsonArray`为`StringArray`on的问题`Android`。`jsonArray`这是我从服务器获取的代码。

```
try {
    DefaultHttpClient defaultClient = new DefaultHttpClient();
    HttpGet httpGetRequest = new HttpGet("http://server/android/listdir.php");
    HttpResponse httpResponse = defaultClient.execute(httpGetRequest);

    BufferedReader reader = new BufferedReader(new InputStreamReader(httpResponse.getEntity().getContent(),"UTF-8"));

    String json = reader.readLine();

    //JSONObject jsonObject = new JSONObject(json);
    JSONArray jsonArray = new JSONArray(json);
    Log.d("", json);

    //Toast.makeText(getApplicationContext(), json, Toast.LENGTH_SHORT).show();

} catch (Exception e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

这就是`JSON`.

```
[
    {"name": "IMG_20130403_140457.jpg"},
    {"name":"IMG_20130403_145006.jpg"},
    {"name":"IMG_20130403_145112.jpg"},
    {"name":"IMG_20130404_085559.jpg"},
    {"name":"IMG_20130404_113700.jpg"},
    {"name":"IMG_20130404_113713.jpg"},
    {"name":"IMG_20130404_135706.jpg"},
    {"name":"IMG_20130404_161501.jpg"},
    {"name":"IMG_20130405_082413.jpg"},
    {"name":"IMG_20130405_104212.jpg"},
    {"name":"IMG_20130405_160524.jpg"},
    {"name":"IMG_20130408_082456.jpg"},
    {"name":"test.jpg"}
] 
```

如何将我必须的 jsonArray 转换为 StringArray，以便我可以像这样获得 StringArray：

```
array = {"IMG_20130403_140457.jpg","IMG_20130403_145006.jpg",........,"test.jpg"}; 
```

感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-04-08T04:37:38.147

看看这个[教程](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)。你也可以像这样解析上面的json：

```
JSONArray arr = new JSONArray(yourJSONresponse);
List<String> list = new ArrayList<String>();
for(int i = 0; i < arr.length(); i++){
    list.add(arr.getJSONObject(i).getString("name"));
} 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2015-10-29T18:08:31.737

最简单和正确的代码是：

```
public static String[] toStringArray(JSONArray array) {
    if(array==null)
        return null;

    String[] arr=new String[array.length()];
    for(int i=0; i<arr.length; i++) {
        arr[i]=array.optString(i);
    }
    return arr;
} 
```

使用`List<String>`不是一个好主意，因为您知道数组的长度。观察它`arr.length`在`for`条件中使用以避免调用方法，即`array.length()`在每个循环中。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-06-05T09:01:16.890

```
public static String[] getStringArray(JSONArray jsonArray) {
    String[] stringArray = null;
    if (jsonArray != null) {
        int length = jsonArray.length();
        stringArray = new String[length];
        for (int i = 0; i < length; i++) {
            stringArray[i] = jsonArray.optString(i);
        }
    }
    return stringArray;
} 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-04-08T04:36:25.560

无耻的黑客：

```
String[] arr = jsonArray.toString().replace("},{", " ,").split(" "); 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-04-08T04:39:21.877

您可以循环创建字符串

```
List<String> list = new ArrayList<String>();
for (int i=0; i<jsonArray.length(); i++) {
    list.add( jsonArray.getString(i) );
}
String[] stringArray = list.toArray(new String[list.size()]); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-07-18T10:23:44.233

正在尝试相同的场景之一，但发现了一种将 JSONArray 转换为 List 的不同且简单的解决方案。

```
import java.lang.reflect.Type;
import com.google.gson.Gson;
import com.google.gson.reflect.TypeToken;

String jsonStringArray = "[\"JSON\",\"To\",\"Java\"]";                 

//creating Gson instance to convert JSON array to Java array

    Gson converter = new Gson();                  
    Type type = new TypeToken<List<String>>(){}.getType();
    List<String> list =  converter.fromJson(jsonStringArray, type ); 
```

试一下

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-04-08T04:52:50.553

这是代码：

```
// XXX satisfies only with this particular string format
        String s = "[{\"name\":\"IMG_20130403_140457.jpg\"},{\"name\":\"IMG_20130403_145006.jpg\"},{\"name\":\"IMG_20130403_145112.jpg\"},{\"name\":\"IMG_20130404_085559.jpg\"},{\"name\":\"IMG_20130404_113700.jpg\"},{\"name\":\"IMG_20130404_113713.jpg\"},{\"name\":\"IMG_20130404_135706.jpg\"},{\"name\":\"IMG_20130404_161501.jpg\"},{\"name\":\"IMG_20130405_082413.jpg\"},{\"name\":\"IMG_20130405_104212.jpg\"},{\"name\":\"IMG_20130405_160524.jpg\"},{\"name\":\"IMG_20130408_082456.jpg\"},{\"name\":\"test.jpg\"}]";
        s = s.replace("[", "").replace("]", "");
        s = s.substring(1, s.length() - 1);
        String[] split = s.split("[}][,][{]");
        for (String string : split) {
            System.out.println(string);
        } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-01-18T14:41:41.397

你去：

```
String tempNames = jsonObj.names().toString();  
String[] types = tempNames.substring(1, tempNames.length()-1).split(","); //remove [ and ] , then split by ',' 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-01-10T09:25:51.003

仅使用可移植的 JAVA API。[http://www.oracle.com/technetwork/articles/java/json-1973242.html](http://www.oracle.com/technetwork/articles/java/json-1973242.html)

* * *

```
 try (JsonReader reader = Json.createReader(new StringReader(yourJSONresponse))) {
        JsonArray arr = reader.readArray();

        List<String> l = arr.getValuesAs(JsonObject.class)
            .stream().map(o -> o.getString("name")).collect(Collectors.toList());
    } 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-05-23T04:57:34.203

即用型方法：

```
/**
* Convert JSONArray to ArrayList<String>.
* 
* @param jsonArray JSON array.
* @return String array.
*/
public static ArrayList<String> toStringArrayList(JSONArray jsonArray) {

  ArrayList<String> stringArray = new ArrayList<String>();
  int arrayIndex;
  JSONObject jsonArrayItem;
  String jsonArrayItemKey;

  for (
    arrayIndex = 0;
    arrayIndex < jsonArray.length();
    arrayIndex++) {

    try {
      jsonArrayItem =
        jsonArray.getJSONObject(
          arrayIndex);

      jsonArrayItemKey =
        jsonArrayItem.getString(
          "name");

      stringArray.add(
        jsonArrayItemKey);
    } catch (JSONException e) {
      e.printStackTrace();
    }
  }

  return stringArray;
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-07-23T21:36:10.117

您可能想看一下`JSONArray.toList()`，它返回一个`List`包含 Maps 和 Lists 的内容，它们代表您的 JSON 结构。因此，您可以将它与 Java Streams 一起使用，如下所示：

```
JSONArray array = new JSONArray(jsonString);
List<String> result = array.toList().stream()
        .filter(Map.class::isInstance)
        .map(Map.class::cast)
        .map(o -> o.get("name"))
        .filter(String.class::isInstance)
        .map(String.class::cast)
        .collect(Collectors.toList()); 
```

即使对于更复杂的对象，这也可能很有用。

或者，您可以只使用 an`IntStream`来遍历 the 中的所有项目`JSONArray`并映射所有名称：

```
JSONArray array = new JSONArray(jsonString);
List<String> result = IntStream.range(0, array.length())
        .mapToObj(array::getJSONObject)
        .map(o -> o.getString("name"))
        .collect(Collectors.toList()); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-08-27T14:25:31.203

这是我的解决方案，您可能想要转换和合并多个数组：

```
public static String[] multiJsonArrayToSingleStringArray(JSONArray... arrays) {
    ArrayList<String> list=new ArrayList<>();
    for (JSONArray array : arrays)
        for (int i = 0; i < array.length(); i++)
            list.add(array.optString(i));

    return list.toArray(new String[list.size()]);
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-01-29T07:23:52.040

您可以将 json 数组输入到此函数以字符串数组的形式输出

> 示例输入 - { "gender" : ["male", "female"] }
> 
> 输出 - {“男性”，“女性”}

```
private String[] convertToStringArray(Object array) throws Exception {
   return StringUtils.stripAll(array.toString().substring(1, array.toString().length()-1).split(","));
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-07-06T06:41:20.057

下面的代码将转换格式的 JSON 数组

> [{"version":"70.3.0;3"},{"version":"6R_16B000I_J4;3"},{"version":"46.3.0;3"},{"version":"20.3.0 ;2"},{"版本":"4.1.3;0"},{"版本":"10.3.0;1"}]

到字符串列表

> [70.3.0;3, 6R_16B000I_J4;3, 46.3.0;3, 20.3.0;2, 4.1.3;0, 10.3.0;1]

**代码**：

`ObjectMapper mapper = new ObjectMapper(); ArrayNode node = (ArrayNode)mapper.readTree(dataFromDb); data = node.findValuesAsText("version");`// “版本”是 JSON 中的节点

并使用 com.fasterxml.jackson.databind.ObjectMapper

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-01-18T18:03:44.517

答案有点晚了，但这是我使用 Gson 想出的：

对于 jsonarray foo: [{"test": "bar"}, {"test": "bar2"}]

```
JsonArray foo = getJsonFromWherever();
String[] test = new String[foo.size()]
foo.forEach(x -> {test = ArrayUtils.add(test, x.get("test").getAsString());}); 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-01-06T13:11:54.630

我确实在此处发布了针对[此处](https://stackoverflow.com/q/59610805/6213883)已关闭的问题的答案，即使此处的回答有所帮助，但还不够。

因此，这是为了`String[]`使用**jsonsimple**获取 json 数组。

根据（奇妙的）[解码示例和文档](https://code.google.com/archive/p/json-simple/wikis/DecodingExamples.wiki)，JSONArrays 是 java List，因此我们可以访问 List 方法。

从那里，是否可以将其转换为 a`String[]`具有以下内容：

```
 JSONObject assemblingTags = (JSONObject) obj.get("assembling-tags");
    JSONArray aTagsList = (JSONArray) assemblingTags.get("list");
    String[] tagsList = (String[]) aTagsList.stream().toArray(String[]::new); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-09-25T23:25:06.863

下面的代码将 JSON 数组转换为 List

例如;

```
import org.json.JSONArray

String data = "YOUR_JSON_ARRAY_DATA";
JSONArray arr = new JSONArray(data);
List<String> list = arr.toList().stream().map(Object::toString).collect(Collectors.toList()); 
```

# scala - 使用 selenium hd 在 play 框架测试中设置会话 cookie

> ID：15871311
> 
> 赞同：5
> 
> 时间：2013-04-08T04:33:03.830
> 
> 标签：scala, testing, playframework-2.0, selenium-webdriver

我正在尝试使用 selenium hd 进行一些单元测试。我目前有以下代码：

```
 browser.goTo("http://localhost:3333/")
    browser.$("#email").text("michele@sample.com")
    browser.$("#password").text("secret")
    browser.$("#loginbutton").click()
    browser.goTo("http://localhost:3333/michele") 
```

但我希望能够设置会话 cookie，而不必为每次测试都这样做。

我试图做这样的事情

```
 browser.webDriver.manage().addCookie( new Cookie("PLAY_SESSION",
      "1dd6811c9df64e03a892f55f57dd0f1190656d88-email%3Amichele%40sample.com") ) 
```

但没有成功，因为当我尝试使用 `browser.getCookie("PLAY_SESSION").getValue()`必须包含检索 cookie 时出现空指针异常`("michele@sample.com")`

任何帮助是极大的赞赏！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-09T06:56:34.723

由于 michele@sample.com 被转换为 michele%40sample.com 因此尝试使用 michele%40sample.com 而不是 michele@sample.com

```
browser.getCookie("PLAY_SESSION").getValue() must contain("michele%40sample.com") 
```

# jquery - 使用 AJAX 对话框在一页上输入 CakePHP 模型的多个实例

> ID：15871315
> 
> 赞同：0
> 
> 时间：2013-04-08T04:33:45.157
> 
> 标签：jquery, cakephp

我想允许我的 CakePHP 网站应用程序的用户输入一堆项目，其中每个项目都是模型的一个实例。我该怎么做？

为了使事情变得更加复杂，一些条目可能需要显示一个悬停的小对话框，询问一些文本，验证响应，并在关闭之前将其发送到数据库中。我计划[在同一个 jQuery 对话框中使用 Keep Validation 和 Errors - CakePHP](https://stackoverflow.com/questions/10998371/keep-validation-and-errors-in-the-same-jquery-dialog-box-cakephp)作为模型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T02:34:23.603

详细地说，解决方案是执行以下操作：

```
echo $this->Form->input('Modelname.0.fieldname');
echo $this->Form->input('Modelname.1.fieldname'); 
```

然后，要将所有内容保存在控制器中，请按照[http://nik.chankov.net/2010/09/08/cakephp-saveall-quick-tip/](http://nik.chankov.net/2010/09/08/cakephp-saveall-quick-tip/)中的说明调用 SaveAll() ：

```
$this->Article->saveAll($data['Article']); 
```

并且不要尝试使用：

```
$this->Article->saveAll($data); 
```

# actionscript-3 - AS3添加相同的DisplayObject不会第二次呈现TextField

> ID：15871322
> 
> 赞同：0
> 
> 时间：2013-04-08T04:34:29.980
> 
> 标签：actionscript-3, sprite, textfield

我遇到的问题是我希望出现多个 TextField，而我只看到一个出现。我已将其范围缩小到此代码。当我添加 List 元素时，我看到一个空矩形，下面有一个与我预期的大小完全相同的矩形。我看到的问题是 TextField 只出现在第二个矩形中。如果我添加三个元素，则只有最后一个元素是可视化的。

下面的代码获取一个 DisplayObject 列表（当前是两个 TextField），遍历该列表，并为每个创建一个容器 Sprite。每个容器的 Sprite 都被每个 DisplayObject 高度的高度偏移，有效地创建了一个视觉列表。如果相同的 TextField 在列表中使用了两次或更多次，则仅在最后一个元素中绘制 TextField。每个容器 Sprite 都包含一个边界框以指示它存在。

```
package
{
import flash.display.DisplayObject;
import flash.display.Sprite;
import flash.geom.Rectangle;
import flash.text.AntiAliasType;
import flash.text.TextField;
import flash.text.TextFieldAutoSize;

public class List extends Sprite
{
    private var data:Array=new Array;
    private var label:TextField= new TextField();

    public function List()
    {
        super();

        label.selectable=true;
        label.autoSize              = TextFieldAutoSize.LEFT;
        label.antiAliasType         = AntiAliasType.ADVANCED;
        label.text                  = "Testing";
        data.push(label);
        data.push(label);

    }

    public function renderList():void{
        var height:int=0;
        for (var i:int=0; i< data.length; i++){
            //get current sprite in list
            var current:DisplayObject=data[i];

            //create new sprite to contain element of array
            var listItem:Sprite=new Sprite;
            listItem.addChild(current);

            //draw bounding rectangle for reference
            var rect:Rectangle=current.getBounds(this);
            listItem.graphics.lineStyle(1, 0x000000);
            listItem.graphics.beginFill(0xFFFFFF);
            listItem.graphics.drawRect(rect.x, rect.y, rect.width, rect.height);
            listItem.graphics.endFill();

            //set height corresponding to bounds height
            listItem.y=height;

                            //calculate height for next item
            height=height + rect.height;

                            //add new list item 
            addChild(listItem);
        }
    }

}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T04:58:35.813

您不能将相同的 TextField 对象添加为两个或多个容器的子项。您需要`new TextField()`在代码中的某处再次添加。

就像如果您如下修改构造函数一样，您将能够看到两个 TextField

```
public function List()
    {
        super();

        label.selectable=true;
        label.autoSize              = TextFieldAutoSize.LEFT;
        label.antiAliasType         = AntiAliasType.ADVANCED;
        label.text                  = "Testing 1";
        data.push(label);
        label = new TextField();
        label.selectable=true;
        label.autoSize              = TextFieldAutoSize.LEFT;
        label.antiAliasType         = AntiAliasType.ADVANCED;
        label.text                  = "Testing 2";
        data.push(label);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T01:26:56.770

问题不仅限于 TextField，而是 DisplayObject。一个 DisplayObject 有许多 DisplayObject。DisplayObject 没有“拥有且属于许多”DisplayObject。

由于 DisplayObject 只能引用一个父对象，因此当为同一个 TextField 分配新的父对象时，第一个 Sprite 和 TextField 之间的原始关联就会丢失。第二个 Sprite 成为 TextField 的父级。

# android - 带有 EasyTracker 的 SherlockActivity

> ID：15871327
> 
> 赞同：1
> 
> 时间：2013-04-08T04:35:03.607
> 
> 标签：android, google-analytics-api, easytracker

我正在尝试在 Android 中与 ActionBarSherlock 一起实现 Google Analytics v2。

为了让我的生活更轻松一点，而不必在每个活动中添加 EasyTracker 代码，我创建了一个名为**SherlockTrackedActivity**的新活动，并为 EasyTracker 实现了**onStart** () 和**onStop** () 方法。

```
public class SherlockTrackedActivity extends SherlockActivity {
      @Override
      public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
      }

      @Override
      protected void onStart() {
        super.onStart();
        EasyTracker.getInstance().activityStart(this); // Add this method.
      }

      @Override
      protected void onStop() {
        super.onStop();

        EasyTracker.getInstance().activityStop(this); // Add this method.
      }
    } 
```

现在我有一个新的 Activity **DemoActivity extends SherlockTrackedActivity**，但是跟踪器在 DemoActivity 中不起作用（我从 GA Real Time 检查）。

但是，如果我直接实现**SherlockTrackedActivity 扩展 Activity**，则跟踪器实际上是在 DemoActivity 中工作的。

```
public class SherlockTrackedActivity extends Activity {
      @Override
      public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
      }

      @Override
      protected void onStart() {
        super.onStart();
        EasyTracker.getInstance().activityStart(this); // Add this method.
      }

      @Override
      protected void onStop() {
        super.onStop();

        EasyTracker.getInstance().activityStop(this); // Add this method.
      }
    } 
```

我想知道这怎么会发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T07:21:18.433

通读 GA Analytics for Android [https://developers.google.com/analytics/devguides/collection/android/v2/parameters](https://developers.google.com/analytics/devguides/collection/android/v2/parameters)

它每 30 分钟发送一次数据（除非您关闭应用程序并重新启动时，它会立即发送，这混淆了我在上述问题中的调试进度。它与 SherlockActivity 无关）

30 分钟对于“实时跟踪”来说太奇怪了。将其设置为较低的值，数据会实时显示。

# facebook - 如何从状态中获取用户 ID

> ID：15871329
> 
> 赞同：1
> 
> 时间：2013-04-08T04:35:06.217
> 
> 标签：facebook, facebook-fql, userid

当我们在墙页上写状态消息时，我们通常可以提及我们的朋友。我想从状态消息中获取提到的用户的数字 ID。所以我不得不尝试使用 FQL 找到提到的人的 user_id(numeric)，但我没有在状态表的规范中找到任何相关字段。

[https://developers.facebook.com/docs/reference/fql/status](https://developers.facebook.com/docs/reference/fql/status)

如何获取有关提及某人的标签信息？是否有一些字段可以从另一个表中的状态消息中获取提到的用户数字 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:25:43.693

您可以使用该[`stream tag`](https://developers.facebook.com/docs/reference/fql/stream_tag)表查找在您的帖子中标记的其他人。

例如，要获取您最近标记的每个人，您可以查询：

```
SELECT target_id, post_id FROM stream_tag WHERE actor_id=me() 
```

# colors - WP8 更改应用程序磁贴背景颜色

> ID：15871331
> 
> 赞同：2
> 
> 时间：2013-04-08T04:35:08.517
> 
> 标签：colors, background, windows-phone-8, tiles

我一直在努力弄清楚如何更改与我的应用程序关联的 WP8 磁贴的背景颜色。我尝试使用以下格式在 TemplateIconic 标记下的 WMAppManifest.xml 中设置 BackgroundColor 属性...

# AARRGGBB

# RRGGBB

这些似乎都不起作用，瓷砖始终是手机上设置的当前强调色。有人能指出我正确的方向吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T04:35:31.223

您可以使用类似的方法设置应用程序磁贴的所有属性，包括 BackgroundColor 属性。

```
//REFERENCE: http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207009(v=vs.105).aspx
// Set all the properties of the Application Tile.
private void SetApplicationTile()
{
    // Application Tile is always the first Tile, even if it is not pinned to Start.
    ShellTile TileToFind = ShellTile.ActiveTiles.First();

    // Application should always be found
    if (TileToFind != null)
    {
        IconicTileData TileData = new IconicTileData()
        {
            Title = "My App title",
            WideContent1 = "New Wide Content 1",
            WideContent2 = "New Wide Content 2",
            WideContent3 = "New Wide Content 3",
            //Count = 2,
            //BackgroundColor = Colors.Blue, 
            //BackgroundColor = new Color { A = 255, R = 200, G = 148, B = 255 },
            //BackgroundColor = Color.FromArgb(255, 200, 148, 55),
            //BackgroundColor = (Color)Application.Current.Resources["PhoneAccentColor"],
            BackgroundColor = HexToColor("#FF7A3B3F"),
            IconImage = new Uri("Assets/Tiles/IconicTileMediumLarge.png", UriKind.Relative),
            SmallIconImage = new Uri("Assets/Tiles/IconicTileSmall.png", UriKind.Relative),
        };

        // Update the Application Tile
        TileToFind.Update(TileData);
    }
}

public static Color HexToColor(string hex)
{
    return Color.FromArgb(
        Convert.ToByte(hex.Substring(1, 2), 16),
        Convert.ToByte(hex.Substring(3, 2), 16),
        Convert.ToByte(hex.Substring(5, 2), 16),
        Convert.ToByte(hex.Substring(7, 2), 16)
        );
} 
```

[重要的提示](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207009%28v=vs.105%29.aspx)

> 如果不将 BackgroundColor 属性的 A 参数设置为 255，则不会显示您的自定义背景颜色，而是显示默认主题颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T19:21:36.320

根据微软的说法，该值必须是#AARRGGBB。但我无法让它发挥任何价值。它似乎只是忽略它。[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207009(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207009(v=vs.105).aspx)

> "如果 BackgroundColor 元素的颜色值不是以#FF 开头，例如#FF524742，则不会显示您的自定义背景颜色，而是显示默认主题颜色。"

# mysql - 使用 LOAD FILE 时对重复值求和

> ID：15871335
> 
> 赞同：0
> 
> 时间：2013-04-08T04:35:33.440
> 
> 标签：mysql, duplicates, load-data-infile, sql-insert

我有一张桌子：

```
| foo | bar |
+-----+-----+
| abc |   4 |
| def |   1 |
| ghi |   2 | 
```

`foo`具有唯一索引。
我想将文件加载到此表中，按列汇总`bar`重复值：`foo`

```
abc \t 7
ghi \t 3
jkl \t 4 
```

有没有办法在重复行中对值**求和**`LOAD DATA`？
此命令连续**替换旧值：**

```
LOAD DATA LOCAL INFILE 'file.txt' REPLACE
INTO TABLE `table` FIELDS TERMINATED BY '\t' (`foo`,`bar`); 
```

我想要一张这样的桌子：

```
| foo | bar |
+-----+-----+
| abc |  11 |
| def |   1 |
| ghi |   5 |
| jkl |   4 | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T04:49:45.313

没有直接的方法可以实现您想要的，因为记录的来源来自文件而不是表。按照以下步骤插入新行或更新现有行。

*   创建一个临时表，作为记录的临时目标表。
*   `TempTable`假设新表已命名并具有两列，则将记录加载到临时表中：`foo`和`bar`

表创建ddl：

```
CREATE TABLE TempTable
(
    foo VARCHAR(30),
    bar INT
);

LOAD DATA LOCAL INFILE 'file.txt' 
REPLACE INTO TABLE TempTable 
FIELDS TERMINATED BY '\t' (`foo`,`bar`); 
```

*   加载记录后，让我们从合并记录开始。MySQL 实现了一个名为 的功能`INSERT...ON DUPLICATE UPDATE`，它基本上插入一条新记录，但如果记录与现有键冲突，它会更新记录。A`key`应该首先定义，但在您的情况下，您可以直接执行该语句，因为您已经提到它`foo`已经是唯一的。

使用`INSERT INTO...SELECT`你可以结合`INSERT..ON DUPLICATE UPDATE`，

```
INSERT INTO YourExistingTable (Foo, Bar) 
SELECT Foo, Bar
FROM   TempTable
ON DUPLICATE KEY UPDATE Bar = VALUES(Bar) + Bar; 
```

*   执行语句后，记录将合并。您现在可以删除临时表。

删除临时表，

```
DROP TABLE TempTable 
```

# c++ - 如何将结构向量传递给 C++ 中的函数？

> ID：15871336
> 
> 赞同：0
> 
> 时间：2013-04-08T04:35:37.640
> 
> 标签：c++, oop

在下面的示例代码中，我需要将结构向量传递给函数。

```
class A {
public:
    struct mystruct {   
        mystruct (int _label, double _dist) : label(_label), dist(_dist) {}   
        int label;
        double dist;
    };
} 
```

我将向量声明如下：

```
 vector<A:: mystruct > mystry; 
```

现在在这个类“A”中有一个如下的函数。

```
 myfunc ( vector<mystruct> &mystry ); 
```

如何将结构向量传递给我的“myfunc”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T04:49:00.093

试试这个

```
#include <iostream>
#include <vector>

using namespace std;

class A {
public:
    struct mystruct {   
        mystruct (int _label, double _dist) : label(_label), dist(_dist) {}   
        int label;
        double dist;
    };

    void myfunc ( vector<mystruct> &mystry ){
        cout << mystry[0].label <<endl;
        cout << mystry[0].dist <<endl;
    }
};

int main(){
    A::mystruct temp_mystruct(5,2.5); \\create instance of struct.

    vector<A:: mystruct > mystry; \\ create vector of struct 
    mystry.push_back(temp_mystruct); \\ add struct instance to vector

    A a; \\ create instance of the class
    a.myfunc(mystry); \\call function
    system("pause");
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:46:41.967

好吧，首先您需要创建一个 的实例`A`，如下所示：

```
A a; 
```

然后，您需要调用`myfunc`on `a`，并将 value 传递给它`mystry`。

```
a.myfunc(mystry); 
```

# c++ - 变量具有内部链接但未定义

> ID：15871341
> 
> 赞同：10
> 
> 时间：2013-04-08T04:35:57.173
> 
> 标签：c++, linkage

我有这个 .h 文件：

```
namespace{

class Invariant{
public:
  Invariant(z3::expr e,Instruction *i):Expr(e),I(i){
    DenseMap<Instruction*,Invariant*> FunMap = Invariants[F];
  }

private:
  //static map
  static DenseMap<Function*, DenseMap<Instruction*,Invariant*> >Invariants;

};
}//end of anonymous namespace 
```

当我编译clang时说：

```
Invariant.h:46:65: warning: variable '<anonymous namespace>::Invariant::Invariants' has internal linkage but is not defined
  static DenseMap<Function*, DenseMap<Instruction*,Invariant*> >Invariants;
                                                                ^
Invariant.h:26:48: note: used here
    DenseMap<Instruction*,Invariant*> FunMap = Invariants[F]; 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T14:28:30.990

只需定义它。在类定义之后但在匿名命名空间结束之前添加以下行：

```
DenseMap<Function*, DenseMap<Instruction*,Invariant*> > Invariant::Invariants; 
```

这将在包含此标头的每个翻译单元中创建静态成员（没关系，因为它位于匿名命名空间中，每个翻译单元都是唯一的）。这可能不是您想要的，但这是`Invariant`在匿名命名空间中定义的结果。如果您改用命名空间，则可以将 的定义`Invariants`放入源文件中，并且所有代码只共享一个对象。

# asp.net - IE9 的单选按钮和复选框对齐问题

> ID：15871347
> 
> 赞同：0
> 
> 时间：2013-04-08T04:36:19.717
> 
> 标签：asp.net, internet-explorer, browser, user-controls, webbrowser-control

我一直在使用 IE8 的服务器上进行开发。

当我使用 IE9 将我的应用程序部署到另一台服务器时，我的所有 Web 控件都变得未对齐，如下所示。

复选框：

![在此处输入图像描述](https://i.stack.imgur.com/92fAy.png)

和

单选按钮列表：

![在此处输入图像描述](https://i.stack.imgur.com/svnBT.png)

使控件再次对齐的最佳方法是什么？我在 Chrome 中也有同样的问题。

编辑：我在代码隐藏中动态创建我的控件。

```
 TableRow tr = new TableRow();
                    TableCell td1 = new TableCell();
                    td1.Attributes.Add("colspan", "2");

                    CheckBox chkInclude = new CheckBox();
                    chkInclude.Text = "Include";
                    chkInclude.Checked = true;
                    chkInclude.AutoPostBack = true;

                    td1.CssClass = "border";

//--------CSS---------
.border 
{
border: 1px solid black;
} 
```

# python - pyinstaller 路径必须在哪里

> ID：15871353
> 
> 赞同：1
> 
> 时间：2013-04-08T04:37:29.723
> 
> 标签：python, python-2.7, pyinstaller

我在 Windows 上，我的 python 路径是`C:\Python27`. 当我解压缩档案时，我找到了`pyinstaller-2.0` 该文件路径必须在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T05:18:27.640

PyInstaller 可以作为一个独立的应用程序运行，所以它不需要放在`C:\Python27`目录中。例如，你可以把它放进去`C:\Program Files`，然后像这样从`cmd.exe`shell 调用 PyInstaller 应用程序：

```
c:\python27\python.exe "c:\Program Files\pyinstaller-2.0\pyinstaller.py" --help 
```

# wordpress - wordpress .htaccess 重命名网址

> ID：15871354
> 
> 赞同：-1
> 
> 时间：2013-04-08T04:37:37.037
> 
> 标签：wordpress, .htaccess

我不确定这是否会重命名？我可以显示我的网址吗

```
myweb/l2/la
myweb/l2/lb
myweb/l2/lc
myweb/l2/ld 
```

到

```
myweb/la
myweb/lb
myweb/lc
myweb/ld 
```

我以前从来没有这样做过，如果有人可以帮忙吗？我想在.htaccess 中编写规则。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T04:41:04.767

不确定这与 wordpress 有什么关系，但你如何设置 wordpress 可能会影响哪种解决方案可以工作。

要更改浏览器的 URL 地址栏中显示的内容，您可以执行以下操作：

```
RewriteEngine On
RewriteCond %{THE_REQUEST} ^(GET|HEAD)\ /l2/([^\ \?]+)
RewriteRule ^l2/(.*)$ /$1 [L,R=301] 
```

在内部将它们改回来（不重定向浏览器），您需要：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /l2/$1 [L] 
```

如果你有路由到 index.php 的 wordpress 规则，你会希望这些规则**在**你的 wordpress 路由规则之前。

# kendo-ui - 在 DateTimePicker 中检查日期格式？

> ID：15871357
> 
> 赞同：1
> 
> 时间：2013-04-08T04:37:46.447
> 
> 标签：kendo-ui

这里的问题是，在 datertimepicker 中手动输入日期时，必须显示“以日期格式输入”的消息，如何以编程方式检查。

[我的小提琴。](http://jsfiddle.net/5bchz/95/)

代码：

```
function getFormattedDate(date) {
var day = date.getDate();
var month = date.getMonth() + 1;
var year = date.getFullYear().toString().slice(2);
return day + '-' + month + '-' + year;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T06:01:47.193

为什么不将数据时间选择器的输入都设为只读，这样用户就必须从数据时间选择器中选择日期。

# overflow - IE8兼容模式：滚动条隐藏内容

> ID：15871358
> 
> 赞同：0
> 
> 时间：2013-04-08T04:37:52.797
> 
> 标签：overflow, ie8-compatibility-mode

当我在 IE8 兼容模式下尝试以下代码时，滚动条隐藏了内容。

```
<style>
.myclass {
    overflow: auto;
    width: 400px;
}
</style>
<div class="myclass">
ReallyLongTextHere123456789012345678901234567890123456789012345678901234567890
</div> 
```

这只发生在没有空格的长字符串时。其他浏览器和较新版本的 IE8 可以正确显示。

有没有办法在不影响它在其他浏览器上的外观的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T04:46:59.147

```
.myclass {
    overflow: auto;
    width: 400px;
word-wrap:break-word;
} 
```

像这样修改你的CSS。

# iphone - 项目中 iAD 的 NSSNotifiaction 集成

> ID：15871368
> 
> 赞同：1
> 
> 时间：2013-04-08T04:39:04.410
> 
> 标签：iphone, iad, nsnotificationcenter

我有选项卡式应用程序，我喜欢`iAd`根据空间可用性在每个视图上呈现不同的位置，所以我想添加`iAd`应用程序委托的功能并创建它的实例并根据要求使用它，以便在不同的选项卡式应用程序之间传递消息和我喜欢使用的视图`NSNotificationCenter`，但它没有调用assign方法，这是我的代码

```
 //this appdelegte.m

    - (void)layoutAnimated:(BOOL)animated
    {
        BOOL yy=    self.bannerView.bannerLoaded;
        if (yy==1)
        {  
            self.iAdString=[NSMutableString stringWithString:@"1"];
             [[NSNotificationCenter defaultCenter] postNotificationName:@"BannerViewActionWillBegin" object:self];

        }

        else

        {
             self.iAdString=[NSMutableString stringWithString:@"0"];

        }

    }

    - (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error
    {
          postNotificationName:@"BannerViewActionDidFinish" object:self];

            [self layoutAnimated:YES];
   }

     //and i call this nsnotification in VieController.m like this

    -(void)viewWillAppear:(BOOL)animated 

    {

        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(willBeginBannerViewActionNotification:) name:@"BannerViewActionWillBegin "object:nil];

        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(didFinishBannerViewActionNotification:) name:@"BannerViewActionDidFinish" object:nil];

     - (void)willBeginBannerViewActionNotification:(NSNotification *)notification

    {

        [self.view addSubview:self.app.bannerView];

    }

    - (void)didFinishBannerViewActionNotification:(NSNotification *)notification
    {
         NSLog(@"come");
        [self.app.bannerView removeFromSuperview];
     } 
```

# javascript - 尝试查看元素在样式标签中是否具有特定的 CSS 属性

> ID：15871369
> 
> 赞同：1
> 
> 时间：2013-04-08T04:39:04.480
> 
> 标签：javascript, jquery, css

我正在尝试做类似的事情：

```
var $list = new Array();
$selector.each(function(){
  if ( $(this).has(css("position")) ){
    $list.push($(this));
  }
}); 
```

看起来我的做法并不奏效。我看到一个看起来像这样的例子：

```
var bg = ('element').parents().filter(function() {
  return $(this).css('background').length > 0;
}).eq(0) 
```

但我不确定这是否是我应该做的，或者是否有另一种方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T04:45:08.337

你很接近了......但试试这个..

```
var $list = new Array();
$selector.each(function(){
  if ( $(this).css("position") ){
    $list.push($(this));
  }
}); 
```

更好的是检测位置的类型，即：

```
var $list = new Array();
$selector.each(function(){
  if ( $(this).css("position") == "absolute" ){
    $list.push($(this));
  }
}); 
```

**编辑**

根据您上面的评论，您可能需要检查除特定位置 LEFT TOP 以外的其他内容，因为默认情况下这些内容将显示为 0px，因此可能需要检查值而不是实际属性。

你也可以使用`$(this).offset().left`or `$(this).position().left`..

# android - 使用绘图缓存为 WebView 设置动画。我这样做对吗？

> ID：15871371
> 
> 赞同：3
> 
> 时间：2013-04-08T04:39:11.870
> 
> 标签：android, android-animation

所以我正在做一个翻卡动画，它的 webview 占据了大约 80% 的屏幕。 [翻转卡片动画教程](http://developer.android.com/training/animation/cardflip.html)

自从我使用 Spannables 从 TextView 切换到 WebView 后，动画看起来有点不对劲，所以我放慢了速度，我注意到随着 3d 翻转的发生，线条会开始从 WebView 的底部和顶部消失随着动画的进行。它困扰着我，所以我想解决它。

**我的解决方案**：我添加了一个ImageView，当动画开始时，我从WebView中拉出绘图缓存位图，使WebView不可见，将WebView绘图缓存位图设置为ImageView，并显示ImageView。

**随着 webview 的创建：**

```
mWebView.setAnimationCacheEnabled(false);
mWebView.setDrawingCacheEnabled(true);
mWebView.setDrawingCacheQuality(View.DRAWING_CACHE_QUALITY_AUTO); 
```

**在开始动画和停止时：**

```
public void setIsAnimating(boolean isAnimating) {
    mIsAnimating = isAnimating;
    if (mIsAnimating) {
        Bitmap webCache = mWebView.getDrawingCache();
        mCachedView.setImageBitmap(webCache);

        mCachedView.setVisibility(View.VISIBLE);
        mWebView.setVisibility(View.INVISIBLE);
        mProgressView.setVisibility(View.GONE);
    } else {
        mWebView.setVisibility(View.VISIBLE);
        mCachedView.setVisibility(View.GONE);
        mProgressView.setVisibility(View.GONE);
    }
} 
```

这个解决方案似乎效果很好，但是我现在可以看到动画实际开始之前有 100 毫秒左右的延迟。这是绘图缓存的工作原理吗？它的用途是什么？如果不是这样，那怎么办？我找不到很多使用绘图缓存的示例/解释。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-23T16:33:15.420

尝试使用 WebView capturePicture() 方法：

```
Picture picture = view.capturePicture();

Bitmap  b = Bitmap.createBitmap( picture.getWidth(),picture.getHeight(), Bitmap.Config.ARGB_8888); 
```

# php - 在单元测试中用测试存根替换父类是个好主意吗？

> ID：15871377
> 
> 赞同：1
> 
> 时间：2013-04-08T04:39:40.860
> 
> 标签：php, unit-testing, yii

**tl;博士**

正如我在标题中所说，如果被测类是库类的包装器，它可能使用大量静态依赖项和/或可能使用数据库连接，*这是用手动替换这个父类的最佳实践吗？写存根*？

**细节**

Context 是 Yii PHP Web 框架的小部件工具包的单元测试套件。被测系统是 12k 行遗留 PHP 5.3 代码，首先我想编写一个特征测试，因为即使在 phpStorm 中，PHP 的自动重构也很糟糕。我对测试`CWidget`类扩展器特别感兴趣。

它是一个 PHP，所以我可以`require_once`为每个单元测试任意组合源文件，因此构建一个完全假的环境不是问题。

我有 Martin Fowler 的*Refactoring*和 Michael Feather 的*Working Effectively with Legacy Code*的副本，所以，如果有的话，也许有人可以指点我确切的技术，因为我似乎肯定忽略了一些东西。

# java - if 子句中的变量声明

> ID：15871379
> 
> 赞同：6
> 
> 时间：2013-04-08T04:39:50.673
> 
> 标签：java, if-statement, variable-declaration

```
if(someCondition)
  int a=10;//Compilation Error
else if(SomeOtherCondition){
int b=10;//no compilation Error
} 
```

为什么会发生这种情况。为什么在第一种情况下会出现编译错误。如果我放大括号，则没有编译错误，但对于 if 语句，如果它是一个语句，则大括号是可选的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T04:41:12.617

您需要定义 in 的范围，`int a`它将`if statement`用花括号定义`{}`。

```
if(someCondition){
  int a=10; // works fine
}else if(SomeOtherCondition){
  int b=10; //works fine
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T04:44:58.510

```
if(someCondition)
  int a=10;//Compilation Error - you have to define the scope of int. what scope does it have here? so {} are necessary
else if(SomeOtherCondition){
int b=10;//no compilation Error
} 
```

# javascript - jQuery 加载后如何访问 stub Dollar 函数？

> ID：15871382
> 
> 赞同：1
> 
> 时间：2013-04-08T04:40:07.240
> 
> 标签：javascript, jquery

就我看到循环逻辑而言，我对它的[工作原理](http://samsaffron.com/archive/2012/02/17/stop-paying-your-jquery-tax)有点困惑：

1.  定义一个存根美元函数：

    ```
    window.q=[];
    window.$=function(f){
      q.push(f);
    }; 
    ```

2.  在 jQuery 加载之后，将推送到存根上的任何函数添加到 jquery on load Dollar 函数：

    ```
    $.each(q,function(index,f){
      $(f)
    }); 
    ```

这两个美元函数如何正确访问？jQuery加载后，不是已经接管了美元功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T04:45:39.327

您的存根`$`函数将它接收到的每个函数推送到数组`q`中。

当 jQuery 加载时，它会`$`用它自己的替换你的，但它不会*覆盖*你的`q`数组。

最后的代码使用 jQuery 的`$.each()`方法来迭代你的`q`数组，在你的`$`每个函数上调用 jQuery 的函数（`f`在循环中）。因此，就好像您一开始就`$(f)`使用 jQuery`$`进行调用一样。像这样使用时，`$`是`$(document).ready()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T04:47:18.890

这是一种延迟注册的[onread](http://api.jquery.com/ready/)方法。

它是如何工作的

1.  我们注册了一个存根`$`方法，它将所有的 onready 方法转储到一个全局数组中
2.  加载 jquery后，将`$`替换为 jQuery 对象，但全局数组`q`在加载之前仍将所有 onready 方法传递给 jquery
3.  当[jQuery onready](http://api.jquery.com/ready/)被触发时，我们遍历全局数组`q`并调用每个注册的函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T04:49:58.090

> jQuery加载后，不是已经接管了美元功能吗？

这就是整个想法；中创建的临时函数`<head>`为仅实现的 jQuery 创建存根`jQuery(fn)`；在此定义和加载 jQuery 之间使用的任何代码`$(function() { ... })`都将保存在`window.q`.

加载 jQuery 后，将`$`替换它，但保留的回调函数列表仍然可用，并将在批处理操作中处理。

# asp.net - asp.net 客户端验证

> ID：15871386
> 
> 赞同：1
> 
> 时间：2013-04-08T04:40:20.957
> 
> 标签：asp.net, validation, client

我需要根据ASP.net 代码`drop downs`中的2 所做的选择来编写验证代码。 如何从 javascript 单击按钮（在弹出窗口内）上获取这些控件的选定值？ 有人可以建议我一个解决方案吗？`modal popup`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T04:58:11.613

你可以这样使用

```
var stateId=$('<%= stateList.ClientID%>').val();
alert(stateId); 
```

或者你可以利用

```
ClientIDMode="Static" 
```

它将停止 id 在运行时更改。

详情
[http://www.codeproject.com/Articles/34151/ASP-NET-4-0-Client-ID-Feature](http://www.codeproject.com/Articles/34151/ASP-NET-4-0-Client-ID-Feature)

## 编辑 1

```
function validateTime() 
{ 
     var fh = ('<%= cboFromTimeHours.SelectedValue%>'); 
     var fm = ('<%= cboFromTimeMins.SelectedValue%>'); 
     alert(fh);
     alert(fm);
     var ft = (parseInt(fh) * 60) + parseInt(fm); alert(ft); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:45:37.203

在纯javascript中，您可以使用`getElementById`方法

```
var stateId=document.getElementById('stateList').value;
alert(stateId); 
```

如果您有可用的 jQuery 库，则可以像这样获取选定的值

```
var stateId=$('#stateList').val();
alert(stateId); 
```

假设`stateList`是您的 SELECT 元素的 ID。

# c - C语言中什么情况下可以使用long int

> ID：15871390
> 
> 赞同：0
> 
> 时间：2013-04-08T04:40:51.417
> 
> 标签：c, int, long-integer

在我的机器中，我得到以下结果：

```
sizeof(long) = 8

sizeof(long int) = 8 
```

在哪里使用`long int`，为什么不直接使用`int`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T04:49:56.627

如您的评论所示，您提供的示例与您提出的问题无关。如果您的问题是：

> 所以我的问题是在哪里使用`long int`，为什么不直接使用**`long`**？

...那么答案很简短：使用您选择的任何一个，因为它们是等效的。

这是您提出的问题，然后是答案：

> 所以我的问题是在哪里使用`long int`，为什么不直接使用*`int`*？

`int`保证至少能够存储位于 -32767 和 32767 范围内的值。实现可能会做出允许它存储该范围之外的值的决定，但不是必须的。

`long int`或者`long`保证至少能够存储位于 -2147483647 和 2147483647 范围内的值。同样，实现可能会做出允许它存储该范围之外的值的决定，但不是必须的。

因此，如果您对开发便携式软件感兴趣，那么您可以使用`int`那些不希望存储超出该最小范围 (-32767 .. 32767) 的值的对象`int`。同上`long`。

如果您对开发可移植软件不感兴趣，并且只关心自己的实现，请使用最能满足您要求的类型。`int`您可以通过查看`INT_MIN`和`INT_MAX`以及查看`<limits.h>`和来获得您的实现范围。`long``LONG_MIN``LONG_MAX`

请注意，`sizeof`整数类型不一定准确反映其范围，因为可能存在填充位和负零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T05:02:46.337

请注意，即使在您排列单词之前，以下所有内容都表示相同的类型：

*   `long`
*   `long int`
*   `signed long int`
*   `signed long`

通过排列，您可以拥有：

```
long            l0;
long int        l1;
int long        l2;

signed long int l3;
signed int long l4;
long signed int l5;
long int signed l6;
int signed long l7;
int long signed l8;

signed long     l9;
long signed     lA; 
```

大多数理智的人，大多数时候，只是简单地写`long`来表示这种类型。

您的实际问题是关于何时使用`long int`和何时使用`int`. 从技术上讲，由 保证的值范围`int`是 ±32,767（或 ±(2 ^(15) -1)）。如果您需要大于该值的值，则应使用`long`. 但是，您经常会发现其`int`范围为 ±(2 ^(31) -1)（或多或少）。有时，范围`long`与`int`（32 位系统；64 位 Windows）相同；`long`那么使用or的主要原因`int`是将接口与特定的 API 匹配（因为类型仍然不同，即使它们支持相同的范围）。有时，范围`long`为 ±(2 ^(63) -1)（64 位系统与 64 位 Windows 不同）；那么你会使用`long`如果您需要一个大于`int`. 但是，您也可以考虑使用来自`<inttypes.h>`或之类的“便携式”类型，`<stdint.h>`例如`int32_t`and `int64_t`。但是，如果 API 使用不同的类型，您可能应该使用 API 的类型。

如果您打算询问何时使用`long`and `long int`，那么这是一个品味问题。我会`long`毫无顾忌地使用plain。除非有与其他声明对称的令人信服的理由，否则我不会使用其他任何东西。

# python - 使用多个用户类实现 Flask-Login

> ID：15871391
> 
> 赞同：23
> 
> 时间：2013-04-08T04:41:02.913
> 
> 标签：python, flask, flask-sqlalchemy, flask-login

我正在编写一个应用程序，该应用程序具有多个充当用户的类（例如，学校帐户和员工帐户）。我正在尝试使用 Flask-Login 来简化此操作，但我不太确定如何实现，这样当用户登录时，我可以让我的应用程序检查用户名是否属于学校帐户或员工帐户，然后正确登录。

我知道如何确定它属于哪种*类型的帐户（因为所有用户名都必须是唯一的）。*但在那之后，我不确定如何告诉应用程序我希望它登录该特定用户。

现在，我只有一个通用登录页面。如果我为员工帐户和学校帐户创建单独的登录页面会更容易吗？我通过 Flask-SQLAlchemy 使用 MySQL 数据库。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-08T16:59:50.360

您可以为每个用户定义一个特定的角色。例如，用户“x”可以是 SCHOOL，而用户“y”可以是“STAFF”。

```
class User(db.Model):

    __tablename__ = 'User'
    id = db.Column(db.Integer,primary_key=True)
    username = db.Column(db.String(80),unique=True)
    pwd_hash = db.Column(db.String(200))
    email = db.Column(db.String(256),unique=True)
    is_active = db.Column(db.Boolean,default=False)
    urole = db.Column(db.String(80))

    def __init__(self,username,pwd_hash,email,is_active,urole):
            self.username = username
            self.pwd_hash = pwd_hash
            self.email = email
            self.is_active = is_active
            self.urole = urole

    def get_id(self):
            return self.id
    def is_active(self):
            return self.is_active
    def activate_user(self):
            self.is_active = True         
    def get_username(self):
            return self.username
    def get_urole(self):
            return self.urole 
```

然而，Flask-login 还没有用户角色的概念，我编写了自己的 login_required 装饰器版本来覆盖它。所以你可能想使用类似的东西：

```
def login_required(role="ANY"):
    def wrapper(fn):
        @wraps(fn)
        def decorated_view(*args, **kwargs):

            if not current_user.is_authenticated():
               return current_app.login_manager.unauthorized()
            urole = current_app.login_manager.reload_user().get_urole()
            if ( (urole != role) and (role != "ANY")):
                return current_app.login_manager.unauthorized()      
            return fn(*args, **kwargs)
        return decorated_view
    return wrapper 
```

然后，您可以在视图函数上使用此装饰器，例如：

```
@app.route('/school/')
@login_required(role="SCHOOL")
def restricted_view_for_school():
    pass 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-03-14T20:14:05.873

@codegeek 我发现这非常有用，谢谢。我不得不稍微修改一下代码才能让它为我工作，所以我想我会把它放在这里以防它可以帮助其他人：

```
from functools import wraps

login_manager = LoginManager()

...

def login_required(role="ANY"):
    def wrapper(fn):
        @wraps(fn)
        def decorated_view(*args, **kwargs):
            if not current_user.is_authenticated():
              return login_manager.unauthorized()
            if ((current_user.role != role) and (role != "ANY")):
                return login_manager.unauthorized()
            return fn(*args, **kwargs)
        return decorated_view
    return wrapper 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-08T14:37:03.860

这是你可以做的一个例子。我没有使用 Flask-SQLAlchemy 的经​​验，但应该不会有太大的不同。下面的示例直接使用 SQLAlchemy。

首先，您定义一个继承自的用户类，`Base`以便它可以被 ORM（声明性）映射

```
class User(Base):

    __tablename__ = 'user_table'
    id = Column(Integer, primary_key=True)
    email = Column(String(45), unique=True)
    name = Column(String(45))
    pwd = Column(String(8))
    user_role = Column(String(15))

    __mapper_args__ = {
        'polymorphic_identity': 'user_table',
        'polymorphic_on': user_role
    } 
```

一旦你的父类类准备好，为你想要的每个角色设置一个不同的类。

```
class SchoolAccount(User):
    __tablename__ = 'school_account'
    id = Column(Integer, ForeignKey('user_table.id'), primary_key=True)
    representative_name = Column(String(45))

    __mapper_args__ = {
        'polymorphic_identity': 'school_account'
    } 
```

使用 Flask-Login 登录用户并根据角色限制访问。

这是具有两个不同角色的登录系统的示例。这是烧瓶、烧瓶-sqlalchemy、烧瓶登录的一个很好的教程：http: [//blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-v-user-logins](http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-v-user-logins)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-07-29T17:02:21.170

看看[Flask-Security](http://flask-security.readthedocs.org/en/latest/)中的“角色管理” 。它可以很容易地与 Flask-Login 集成。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-01-30T00:45:01.663

一个选项是@lv10 回答中提到的[Flask User 。](https://flask-user.readthedocs.io/en/latest/api.html)它实现了对 User 的抽象来处理很多事情，其中​​之一是[基于角色的身份验证](https://flask-user.readthedocs.io/en/latest/authorization.html)。

代码将与@codegeek 答案中的代码基本相同，但 User 类上的“urole”属性应重命名为“roles”，并且角色必须是具有“name”属性的类（您可以从[文档](https://flask-user.readthedocs.io/en/latest/data_models.html#roleanduserroledatamodels)中复制粘贴）。您不需要定义 login_required，因为它已经实现为 roles_required。所以，而不是`@login_required(role='rolename')`我们有`@roles_required('rolename')`.

出于安全原因，我刚开始使用此 API，这是一次很棒的体验。我强烈推荐给在密码、用户身份验证和用户角色方面有问题的任何人。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-21T13:58:15.907

按照接受的解决方案（由@codegeek），如果您希望针对每个路由标记多个角色，并且用户具有一个/多个角色，您可以尝试以下 -

```
login_manager = LoginManager()

def role_required(role=[]):  
    def wrapper(fn):
        @wraps(fn)
        def decorated_view(*args, **kwargs):
            if not current_user.is_authenticated:
                return login_manager.unauthorized()

            if all(x != role1 for role1 in role for x in current_user.role) and (all(role1 != "ANY" for role1 in role)):  # One user may have multiple roles

                return render_template("Unauthorized_Access.html")

            return fn(*args, **kwargs)

        return decorated_view

    return wrapper 
```

在哪里 -

虚拟用户数据库——

```
users = {'User_1': {'role': ['school', 'staff']}, 'User_2': {'role': ['admin']},
'User_3': {'role': ['staff', 'admin']}} 
```

用户等级——

```
class User(UserMixin):
    role = None 
```

用户加载器（重新加载用户对象的回调）

```
@login_manager.user_loader
def user_loader(userid):
    user = User()
    user.id = userid
    user.role = users[userid]['role']
    return user 
```

# java - 用于处理 Ajax 请求的服务器端 java

> ID：15871398
> 
> 赞同：0
> 
> 时间：2013-04-08T04:41:18.930
> 
> 标签：java, ajax

我是一名 javascript webapp 程序员，知道 java SE，但对 java web 开发了解不多。

当我做 js 开发时，我会写如下代码：

```
$.ajax({
  url: "http://domain/abc.xml",
}).done(function ( data ) {
   //todo
}
}); 
```

认为 HTTP 服务器将无需我的任何努力就可以处理我的 Ajax 请求。

但是现在我有一些带有ajax请求的js代码，我必须在服务器端映射资源名称。例如，当我请求 abc.xml 时，服务器应该以 def.xml 响应，映射 abc.xml -> def.xml。

所以我想我应该在服务器端编写一个servlet（必须使用java），覆盖doGet（）之类的方法。有什么例子可以开始吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T04:50:13.630

ajax 的魔力在于客户端。就服务器而言，您正在请求主页，然后一段时间后您正在请求`http://domain/abc.xml`.

服务器不需要了解请求与ajax有什么关系。任何简单的 servlet 示例都足够了。

# ios - 如何计算与一对多关系查询匹配的核心数据实体？

> ID：15871401
> 
> 赞同：3
> 
> 时间：2013-04-08T04:41:48.123
> 
> 标签：ios, core-data, count, group-by, entity

假设我有 2 个核心数据实体。一个学生实体和一个班级实体。对于这个例子，一个学生正好在一个班级，一个班级可以有很多学生。

我们还假设这些是大类。也就是说，每个班级有 1000 名学生。

Class 实体如下所示：

```
NSString* name
NSArray* students 
```

和学生实体：

```
NSString* name
Class* class
NSString* grade 
```

在我的 UI 中，我想显示一个类。我想显示具有特定成绩的学生*数量。*即对于一个有 1000 名学生的班级，50 人获得 A，500 人获得 B，200 人获得 C……以此类推。

从 Core Data 获取这些计数的最有效方法是什么？

我是最新的；y 使用 NSFetchedResultsController 并将其传递给 group by + count 查询的获取请求。我正在使用 NSFetchedResultsController 以便 UI 会随着具有特定成绩的学生数量的变化而更新。虽然它很慢。

有没有办法在不查询的情况下获取这些信息？即，当学生被添加到班级或他们的成绩发生变化时，班级上的一个属性会更新所有的成绩计数。所以当我想要计数时，它们只是类的一个属性，不需要查询。

是否可以？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T08:36:50.663

你可以试试这个获取请求：

```
NSFetchRequest *request = [[NSFetchRequest alloc] initWithEntityName:@"Student"];
[request setResultType:NSDictionaryResultType];
NSExpression *keyPathExpression = [NSExpression expressionForKeyPath:@"grade"];
NSExpression *countExpression = [NSExpression expressionForFunction:@"count:" arguments:[NSArray arrayWithObject:keyPathExpression]];

NSExpressionDescription *expressionDescription = [[NSExpressionDescription alloc] init];
[expressionDescription setName:@"gradeTypeCount"];
[expressionDescription setExpression:countExpression];
[expressionDescription setExpressionResultType:NSInteger64AttributeType];
[request setPropertiesToFetch:@[@"grade",expressionDescription]];
[request setPropertiesToGroupBy:@[@"grade"]];
[request setPredicate:[NSPredicate predicateWithFormat:@"theClass == %@",cls.objectID]]; 
```

这将导致包含所需值的字典数组。
这里的问题是您的 FRC 将无法跟踪这些结果的更改。因此没有理由首先使用 FRC
即便如此，这是一个非常轻量级的请求，您可以在给定的时间间隔发出它并更新您的 UI。

> > （比如 2 秒，由于您不再处理托管对象，因此您可以在后台完成整个过程并将结果转储到主线程）

或者听一下你的主要上下文的变化，如果一个学生元素发生了变化，你再次重新获取计数。

这将避免`Student`一起获取任何元素（以所述成本）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T04:55:53.077

您可以使用以下示例在给定条件下获取计数。您不需要获取数据进行计数。您可以使用`countForFetchRequest`方法来有效地计算对象。

```
 NSFetchRequest *request = [[NSFetchRequest alloc] init];
    [request setEntity:[NSEntityDescription entityForName:entityName inManagedObjectContext:moc]];

    NSPredicate *predicate = [NSPredicate predicateWithFormat:
        @"grade=='A'"];
    [request setPredicate:predicate];

    NSError *err;
    NSUInteger count = [moc countForFetchRequest:request error:&err];
    if(count == NSNotFound) {
      //Handle error
    }

    [request release]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-02T08:54:04.483

快速的非常简单的方法。

```
let request = NSFetchRequest(entityName: "BWCoreDataNotification")
request.predicate = NSPredicate(format: "type = 'purchase_reward'")

var error: NSError?
let numberOfNotifications = NSManagedObjectContext.MR_defaultContext().countForFetchRequest(request, error: &error) 
```

# mysql - Openbravo Mysql db 脚本语法错误

> ID：15871402
> 
> 赞同：1
> 
> 时间：2013-04-08T04:41:49.297
> 
> 标签：mysql, openbravo

我无法从从 Openbravo 的 Mercurial 存储库下载的脚本目录中执行 mysql 数据库中的几个 sql 查询。

下面是查询

```
INSERT INTO ROLES(ID, NAME, PERMISSIONS) VALUES('0', 'Administrator role', $FILE{com/openbravo/pos/templates/Role.Administrator.xml} ); 
```

**#1064 - 您的 SQL 语法有错误；**

我尝试指定完整路径，但仍然显示语法错误。

```
INSERT INTO ROLES(ID, NAME, PERMISSIONS) VALUES('0', 'Administrator role', $FILE{/home/anand/Openbravo-POS/main/src-pos/com/openbravo/pos/templates/Role.Administrator.xml} ); 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-13T15:23:58.850

我在那个查询上有这个：

`INSERT INTO ROLES(ID, NAME, PERMISSIONS) VALUES('0', 'Administrator role', $FILE{/com/openbravo/pos/templates/Role.Administrator.xml} );`

认为你`/`之前失踪了`com/openbravo/...`

抱歉，如果为时已晚

# ios - 如何在 iOS 6 中检测到我的应用程序无法访问用户的 Twitter 帐户？

> ID：15871406
> 
> 赞同：2
> 
> 时间：2013-04-08T04:41:54.717
> 
> 标签：ios, objective-c, cocoa-touch, twitter, ios6

在用户允许我的应用访问他们的 Twitter 帐户后，他们仍然可以进入设置应用并通过点击开关来撤销访问：

![推特设置应用](https://i.stack.imgur.com/SMocS.png)

发生这种情况时，我的应用程序需要显示正确的注销图形。**我可以在 iOS 5**中毫无问题地做到这一点，因为当我的应用程序的访问权限被撤销时`[TWTweetComposeViewController canSendTweet]`返回。`NO`但是，在 iOS **6**中，即使在访问权限被撤销后`canSendTweet`仍会继续返回。`YES`所以在 iOS 6 中，我的 UI 处于错误状态。有没有其他方法可以在 iOS 6 中正确检测到这一点？

```
- (id) init
{
    if (self = [super init]) {
        [[NSNotificationCenter defaultCenter]
            addObserver:self
            selector:@selector(accountStatusDidChange:)
            name:ACAccountStoreDidChangeNotification object:nil];
    }
    return self;
}

- (void) accountStatusDidChange:(NSNotification *)notification
{
    if ([TWTweetComposeViewController canSendTweet]) {
        NSLog(@"app can still access Twitter account in iOS 5");
        NSLog(@"always hits this path in iOS 6");
    } else {
        NSLog(@"app permission removed by user in iOS 5");
    }
} 
```

顺便说一句，[canSendTweet](http://developer.apple.com/library/ios/#documentation/Twitter/Reference/TWTweetSheetViewControllerClassRef/Reference/Reference.html)上的文档是错误的。关闭开关后无法再访问 Twitter。

> 返回您是否可以发送 Twitter 请求。
> 
> **是，如果可以访问**Twitter并且至少设置了一个帐户；否则否。可用性
> 
> ```
> Available in iOS 5.0 and later. 
> ```
> 
> 在 TWTweetComposeViewController.h 中声明

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-23T13:05:33.407

在 iOS 8 中，确定应用程序是否可以访问用户的 Twitter 帐户变得更加容易。

**迅速**

```
ACAccountStore().accountTypeWithAccountTypeIdentifier(ACAccountTypeIdentifierTwitter).accessGranted 
```

**Objective-C**

```
[[[[ACAccountStore alloc] init] accountTypeWithAccountTypeIdentifier: ACAccountTypeIdentifierTwitter] accessGranted] 
```

这将返回一个`BOOL`告诉您用户是否授予访问权限的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T04:46:09.480

对于iOS 6你需要使用`Social.framework`，你可以检查`[SLComposeViewController isAvailableForServiceType:SLServiceTypeTwitter]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-24T18:33:47.073

这个问题已经在这里回答了[https://stackoverflow.com/a/12679828](https://stackoverflow.com/a/12679828) 答案基本上说这是最好的检查方法。

```
[self.accountStore requestAccessToAccountsWithType:accountType options:nil
                                                completion:^(BOOL granted, NSError *error)
         {
             if (granted == YES) { "continue" }

             else {
                 if ([error code] == 6) { 
                     //No accounts defined
                 }
                 else if (error == nil) {
                     //Your permissions are revoked
                 }
             } 
```

# android - 适用于 iOS 和 Android 的音频格式

> ID：15871407
> 
> 赞同：21
> 
> 时间：2013-04-08T04:41:56.733
> 
> 标签：android, ios, audio, format

对不起，如果我问的问题太笼统。

我们正在开发一个在移动设备上录制和播放音频的应用程序。此应用程序正在为 Android 和 iOS 开发。该应用程序将使用设备麦克风录制音频并将其存储在服务器中。

用户（在 Android 和 iOS 上）可以打开应用程序并播放存储在服务器上的声音。我们使用的声音格式是 AAC。在 iOS 中它工作正常。我们可以录制和播放 AAC 文件。

但在 Android（三星 S3 和三星 Galaxy Y）上，我们无法以 AAC 格式录制声音。但在 S3 中我们可以播放 AAC 文件。

我的问题是，我们应该选择哪种格式在 Android（应该支持从 2.3 到 Jellybean）和 iOS 中录制和播放。我们应该使用 MP4 吗？

我们的一种解决方案是，在后端，我们可以将音频文件转换为 AAC、MP4 或 3GP，并根据版本将支持的文件提供给手机。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2015-10-26T12:05:25.897

Android 和 iOS 使用同一台服务器来存储记录。所有记录都被保存，没有任何扩展名。

当**Android**从服务器下载记录时，我的应用会添加一个“ **.aac** ”扩展名。
使用**iOS**时，它会添加一个“ **.m4a** ”扩展名。

相同的记录在两个移动平台上都表现良好。

**在 iOS 上录制：**

```
NSDictionary recorderSettings = [[NSDictionary alloc] initWithObjectsAndKeys:
                        [NSNumber numberWithInt:kAudioFormatMPEG4AAC], AVFormatIDKey,
                        [NSNumber numberWithInt:16000],AVSampleRateKey,
                        [NSNumber numberWithInt:1],AVNumberOfChannelsKey,
                        [NSNumber numberWithInt:16],AVLinearPCMBitDepthKey,
                        [NSNumber numberWithBool:NO],AVLinearPCMIsBigEndianKey,
                        [NSNumber numberWithBool:NO],AVLinearPCMIsFloatKey,
                        nil]; 
```

**对于安卓：**

```
myRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
myRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
myRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);
myRecorder.setAudioSamplingRate(16000);
myRecorder.setAudioChannels(1);
mRecorder.setOutputFile(fileName); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-08T05:38:23.973

我们最近完成了一个应用程序，该应用程序具有从 iOS 和 Android 录制和收听的这种功能，下面是我们供您参考的代码。我们依靠我们的 web 服务和服务器转换为可以在两者中轻松播放的 .mp3 格式平台。

```
//iPhone side code. records m4a file format (small in size)

NSDictionary *recordSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                                [NSNumber numberWithInt: kAudioFormatMPEG4AAC], AVFormatIDKey,
                                [NSNumber numberWithFloat:16000.0], AVSampleRateKey,
                                [NSNumber numberWithInt: 1], AVNumberOfChannelsKey,
                                nil];
NSError *error = nil;
audioRecorder = [[AVAudioRecorder alloc] initWithURL:soundFileURL settings:recordSettings error:&error];

if (error)
    NSLog(@"error: %@", [error localizedDescription]);
else
    [audioRecorder prepareToRecord];

//Android side code. (records mp4 format and it works straight away by giving mp3 extension.)
MediaRecorder recorder = new MediaRecorder();
recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
recorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);
recorder.setAudioEncodingBitRate(256);
recorder.setAudioChannels(1);
recorder.setAudioSamplingRate(44100);
recorder.setOutputFile(getFilename());

try {
    recorder.prepare();
    recorder.start();
    myCount=new MyCount(thirtysec, onesecond);
    myCount.start();
    recordingDone=true;
    count=0;
    handler.sendEmptyMessage(0);
    if(progressDialog.isShowing())
        progressDialog.dismiss();
} catch (IllegalStateException e) {
    e.printStackTrace();
    StringWriter strTrace = new StringWriter();
    e.printStackTrace(new PrintWriter(strTrace));
    CrashReportActivity.appendLog(
                                  "\nEXCEPTION : \n" + strTrace.toString() + "\n",
                                  Comment.this);
} catch (IOException e) {
    e.printStackTrace();
    StringWriter strTrace = new StringWriter();
    e.printStackTrace(new PrintWriter(strTrace));
    CrashReportActivity.appendLog(
                                  "\nEXCEPTION : \n" + strTrace.toString() + "\n",
                                  Comment.this);
} 
```

您可以轻松地在 .Net 中找到从 m4a 到 mp3 的转换代码，通过谷歌搜索四处查看（lame 或 faad 一些类似的实用程序）。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-07-23T04:41:25.123

我们最近遇到了这个互操作性问题。我们试图在两个平台上以 aac 格式录制文件，但使用三星手机录制的文件无法在 iOS 中播放。因此，我们必须同时使用 3gp 和 aac 格式才能在 android 和 ios 的多个设备上播放文件。

以下是我们在 Android 中录制文件时使用的代码：

```
 mRecorder = new MediaRecorder();
    mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    mRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
    mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);
    mRecorder.setOutputFile(fileName); 
```

我们将录制文件的扩展名保留为 .3gp。

然而，在 iOS 中，无法在 3gp 中进行录制，因此我们在 iOS 中以 .aac 格式录制文件，该文件可以在两个平台上播放。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-11-17T23:42:55.637

通过 MPEG4 和 AAC 组合，所有音频都可以在 Android 上播放。但在 iOS 上，我们必须使用“m4a”作为文件扩展名，以便播放 Android 音频。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-18T10:13:48.257

以编程方式，这将对您有所帮助，并且文件扩展名可能是 mp3/mp4 用于音频；两者都将支持媒体播放器。安卓片段：

```
myRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
myRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
myRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC); 
```

iOS 片段

```
AVFormatIDKey: @(kAudioFormatMPEG4AAC) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-25T06:56:41.670

试试这个，我遇到了同样的问题，它工作得很好。

```
mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
mRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-01-07T05:43:13.727

Android 使用输出格式**MPEG 4**和音频编码器**AAC**

iOS 使用**kAudioFormatMPEG**

# servlets - 为什么需要以不同于其他 MIME 类型的请求的方式处理多部分请求？

> ID：15871415
> 
> 赞同：-1
> 
> 时间：2013-04-08T04:42:37.213
> 
> 标签：servlets, spring-mvc, mime

输入这个问题我感到有点不安，因为我多年来一直是代码猴子，并且从未试图理解为什么需要以不同于其他请求的方式处理多部分请求。我在浏览spring web mvc框架中的dispatcher servlet代码时遇到了这个问题。我发现有两个不同的多部分请求解析器，一个用于 jakarta commons，另一个用于 servlet 3。谁能给我一个关于它们之间区别的基本概念。我知道在我的其他项目中，我们总是使用文件上传 servlet 来处理文件上传请求，而其他 MIME 类型由普通 servlet 处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:25:55.237

**唯一的区别是：**

Serlvet 3.0 是自 Servlet 3.0 以来引入的 JavaEE 标准 API

Jakarta Commons API 在 Servlet 3.0 推出之前就已经可用。它是一个非标准的 API。

# mysql - jsp中无法执行搜索页面

> ID：15871418
> 
> 赞同：0
> 
> 时间：2013-04-08T04:42:49.250
> 
> 标签：mysql, jsp, jsp-tags, jspinclude

尝试执行 serachpage.jsp，它可以根据搜索 ID 从数据库中搜索数据。基本上我在选择语句后收到错误。

代码：

```
<%

try {
    String value = request.getParameter("Issue_ID");
    int Issue_ID=Integer.parseInt(value);
    Class.forName("com.mysql.jdbc.Driver").newInstance();
    Connection conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/report_tracking","root", "root");
    Statement st = conn.createStatement();
    ResultSet rs = st.executeQuery("select * from issue_creating where Issue_ID='"+Issue_ID+"'");
    if(rs.next()) {         
        rs.getString("Problem_Submit");  
        rs.getString("Problem_Submit"); 
        rs.getString("Problem_Descr"); 
    }

%> 
```

错误：

> 生成的java文件中的[108]行出现错误：[D:\mohit\apache-tomcat-7.0.37\work\Catalina\localhost_\org\‌​apache\jsp\serachisue_jsp.java]
> 语法错误，插入“Finally”完成TryStatement
> 生成的java文件中的[109]行发生错误：[D:\mohit\apache-tomcat-7.0.37\work\Catalina\localhost_\org\‌​apache\jsp\ serachisue_jsp.java]
> 语法错误，插入“}”完成ClassBody

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T05:33:43.583

尝试块缺少括号：

```
try { 
    String value = request.getParameter("Issue_ID"); int  Issue_ID = Integer.parseInt(value);
    Class.forName("com.mysql.jdbc.Driver").newInstance(); 
    Connection conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/report_tracking","root", "root"); 
    Statement st = conn.createStatement(); ResultSet rs = st.executeQuery("select * from issue_creating where Issue_ID='"+Issue_ID+"'");     
    if(rs.next()) {
        rs.getString("Problem_Submit");
        rs.getString("Problem_Submit"); 
        rs.getString("Problem_Descr"); 
    }
} 
catch(Exception e) {
   e.printStackTrace();
} 
```

# ios - If 语句短路 - 如何评估

> ID：15871419
> 
> 赞同：1
> 
> 时间：2013-04-08T04:42:57.413
> 
> 标签：ios

更新：这完全是一场野鹅追逐。在我根据建议的答案进行更改后，它起作用了。但是，当我稍后尝试时，它不再起作用。我开始意识到这完全取决于我是如何使用调试器的。我在 areSameColor 里面有一个断点。当我单步执行代码时，我假设 areUniqueColors 没有被执行。但是，我越过了第二种情况，我认为它是短路的。最后，它正确评估了以下两个选项。我选择坚持我的第二个例子，因为它看起来更具可读性。感谢大家的时间。

我对以下 if 语句的评估方式感到困惑......

```
 if(![self areSameColor:setCards] && ![self areUniqueColors:setCards]){
    match = NO;
} 
```

在我的测试用例 [self areSameColor:setCards] 评估为 NO...所以使用！我希望它能够评估第二个条件。在查看调试器时，它似乎正在快捷地变成 TRUE 结果。

我也试过这个：

```
if(!([self areSameColor:setCards] || [self areUniqueColors:setCards])){
    match = NO;
} 
```

在这两种情况下，它都没有评估第二个条件。areSameColor 和 areUniqueColor 返回 BOOL。

我的预期评价...

```
areSameColor | areUniqueColor | MATCH
NO | NO | match = NO
YES | NO | match UNCHANGED
NO | YES | match UNCHANGED 
```

我怎么会想到这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T04:50:27.463

对于这个“ *areSameColor == NO**和**areUniqueColor == NO* ”试试这种方式

```
if( (![self areSameColor:setCards]) && (![self areUniqueColors:setCards]) )
{
    match = NO;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T05:09:22.290

AFAIK，该标准没有规定应用于第一个操作数的非运算符是否触发短路评估。但是，它规定 && 和 || 是从左到右计算的。一元运算符 (!) 通常在 || 之前从右到左进行计算。和 ＆＆。

至少，答案是灰色的，足以保证以不同的方式重新编码以避免整个混乱。

# debugging - 如何在 gstreamer 管道中的特定时间内删除缓冲区？

> ID：15871420
> 
> 赞同：0
> 
> 时间：2013-04-08T04:42:58.770
> 
> 标签：debugging, gstreamer

我正在通过执行跟踪调试 gstreamer 应用程序。我有以下管道来解码 mp4 文件，我`identity drop-probability`用来在管道中丢弃数据包。我这样做是为了模拟流中数据包的丢失。

```
gst-launch filesrc location=data/pub_Irma.mp4 ! qtdemux name=demuxer demuxer. ! queue ! faad ! audioconvert ! audioresample ! autoaudiosink demuxer. ! queue ! identity drop-probability=0.5 ! ffdec_h264 ! ffmpegcolorspace ! autovideosink 
```

此管道确实**将 50% 的缓冲区减少到 ffdec_h264**。问题是它是单调的，最后它看起来像常规行为。我想要相同的行为，但只在特定的持续时间和特定的时间戳。

这就像说**将 50% 的缓冲区下降到 ffdec_h264，从 10 秒开始，在 15 秒结束**

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:27:23.710

编写一个小应用程序并使用焊盘探针可能更容易。探测回调可以删除缓冲区。它还可以查看缓冲区 ts 来决定是否丢弃。

# c++ - 为什么以下代码不会产生分段错误？

> ID：15871423
> 
> 赞同：1
> 
> 时间：2013-04-08T04:43:22.193
> 
> 标签：c++, arrays, segmentation-fault

```
#include <iostream>
using namespace std;

int a[4];
int main(){
    int b=7;
    cout<<a[b]<<endl;
    return 0;
} 
```

我试图访问未分配的内存。所以我希望输出是分段错误，而不是输出是一些垃圾值。

后来我将'b'增加到1000，现在输出是'Segmentation fault'。这种行为有特定的原因吗？

我正在使用 gcc-4.3.2 编译器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T04:46:11.900

如果您尝试访问不存在的内存地址（**外部**进程的地址空间） ，则可能会引发[分段错误。](http://en.wikipedia.org/wiki/Segmentation_fault#Segmentation.2C_page_fault.2C_and_access_violation)

`a[7]`在这种情况下，可能不在其可访问空间之外，但`a[1000]`最肯定的是。但即使是前者也会在你最意想不到的时候爆炸；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T04:45:20.763

仅当您访问操作系统不允许您访问的内存时，才会发生分段错误。

但是，您可以访问虽然不是您期望的，但已授予您的内存，例如指向堆栈的较早或较晚的内存地址。但这不是您可以依赖的一致的东西，因为本地存储的变量如何放置在堆栈上是由编译器根据会有所不同的神秘优化决定的 - 从调试到发布，随着代码的更改等。

但是，如果您曾经看到类似的内容，“为什么访问这个变量会给我带来垃圾，但总是同样的垃圾？” 你可能无意中偷看了你不应该偷看的堆栈部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T04:45:32.173

这是未定义的行为，所以任何事情都可能发生，你无法判断。检查**[一下](https://stackoverflow.com/questions/2397984/undefined-unspecified-and-implementation-defined-behavior)**（对于 C++）以了解未定义行为、未指定行为和实现定义行为之间的区别。

C -`**ISO C9899**`在附件 J 中清楚地谈到了这一点。

**编辑**
C++ -在,`N3485 ISO/IEC`部分`1.9.2`中讨论上述行为。`1.9.3``1.9.4`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T04:45:13.510

越界访问是未定义的行为。它可以访问进程空间中的任意内存。如果访问的内存未分配或不在进程地址空间中（可能在内核中），那么您的程序将因分段错误而崩溃。在这种情况下，故障将帮助您识别问题，如果幸运的话会崩溃，否则它可能会被忽视，并且稍后会在程序损坏内存中出现一些错误，然后难以跟踪。a[1000] 未分配的概率更高，因此崩溃。内存是按页分配的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T05:06:04.100

未定义的行为不需要导致段错误。考虑`int i = INT_MAX + 1;`另一个通常不会导致段错误的未定义行为示例。

# java - 使用列表视图的事件滚动加载更多数据时出错

> ID：15871427
> 
> 赞同：0
> 
> 时间：2013-04-08T04:43:50.323
> 
> 标签：java, android, android-layout, android-intent, android-emulator

我有列表视图滚动的问题。我有一个像这样的课程：

```
private int itemsPerPage = 6;
private int count = 0;
private boolean loadingMore = false;
private ArrayList<Item> item;
private ListItemAdapter adapter;
View footerView;
private JSONArray array;
private String json;

protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.menu);
    lvListItem = (ListView) findViewById(R.id.lvListItem);
    item = new ArrayList<Item>();
    footerView = ((LayoutInflater)this.getSystemService(Context.LAYOUT_INFLATER_SERVICE)).inflate(R.layout.list_footer, null, false);

    json = new JSONParse()
                    .getData("....");
    array = new JSONArray(json);

    load();
    adapter = new ListItemAdapter(this, 0, item);
    lvListItem.addFooterView(footerView);
    lvListItem.setAdapter(adapter);

    lvListItem.setOnScrollListener(new OnScrollListener() {

        public void onScrollStateChanged(AbsListView view, int scrollState) {
            // TODO Auto-generated method stub

        }

        public void onScroll(AbsListView view, int firstVisibleItem,
                int visibleItemCount, int totalItemCount) {
            // TODO Auto-generated method stub
            int lastInScreen = firstVisibleItem + visibleItemCount;

            // is the bottom item visible & not loading more already ? Load
            // more !
            if ((lastInScreen == totalItemCount) && !(loadingMore)) {
                Thread thread = new Thread(null, loadData);
                thread.start();
            }
        }
    });
    }

public void load(){
for (int i = 0; i < itemsPerPage; i++) {
    if (count == array.length()) {
        lvListItem.removeFooterView(footerView);
        break;
    }
    /*****Code to load data*******/
}
}

private Runnable loadData = new Runnable() {
    @Override
    public void run() {

        loadingMore = true;

        item = new ArrayList<Item>();

        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
        }

        load();

        runOnUiThread(returnRes);

    }
};

private Runnable returnRes = new Runnable() {
    @Override
    public void run() {

        if (item != null && item.size() > 0) {
            for (int i = 0; i < item.size(); i++)
                adapter.add(item.get(i));
        }

        if (count == array.length())
            lvListItem.removeFooterView(footerView);
        adapter.notifyDataSetChanged();

        // Done loading more.
        loadingMore = false;
    }
}; 
```

如果我只使用**load()**，它会运行并且 listview 显示数据正常。但是当我滚动列表视图时，它会抛出错误：

> ```
>  D/AndroidRuntime(1635): Shutting down VM
>   W/dalvikvm(1635): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
>    E/AndroidRuntime(1635): FATAL EXCEPTION: main
>    E/AndroidRuntime(1635): java.lang.IndexOutOfBoundsException: Invalid index 6, size is 6
>    E/AndroidRuntime(1635):  at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
>    E/AndroidRuntime(1635):  at java.util.ArrayList.get(ArrayList.java:304) 
> ```

我需要帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:55:02.247

看起来您的数组只有 6 个元素，而您正试图访问索引为 6 的元素，这实际上是第 7 个元素，所以

改变

```
itemsPerPage = 5;` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T06:11:38.677

您的代码根本不是线程安全的。您正在从多个线程访问共享数据而没有任何类型的锁定。有可能您的`item`数组在您的工作线程中被重新初始化，而它正在从您的`resultRes`可运行（在主线程上运行）中读取，这将导致看似不可能的越界异常。

创建一个对象以用作您的互斥锁：

```
private final Object monitor = new Object(); // an ivar in your Activity 
```

然后在访问共享数据（如`item`和`loadingMore`）时，创建一个临界区，例如：

```
synchronized(monitor) {
    item = new ArrayList<Item>();
}

synchronized(monitor) {
    if (item != null && item.size() > 0) {
        for (int i = 0; i < item.size(); i++)
            adapter.add(item.get(i));
    }
}

synchronized(monitor) {
    if ((lastInScreen == totalItemCount) && !(loadingMore)) {
        Thread thread = new Thread(null, loadData);
        thread.start(); // will exit critical section before new thread execution begins
    }
} 
```

等等。我将把它作为练习留给你，让你弄清楚应该在哪里完成其余的锁定。

# jquery - 如何在 Jquery 中找到用户控件的第二个子项？

> ID：15871429
> 
> 赞同：-1
> 
> 时间：2013-04-08T04:44:02.000
> 
> 标签：jquery, asp.net, jquery-selectors, parent-child

嗨，我有一个页面可以说 Parent.aspx

在 Parent 中，我再次使用用户控件说 ChildOne.ascx 我还有其他用户控件 ChildTwo.ascx（Parent 是 ChildOne.ascx）

现在我想从我的父页面中找到 ChildTwo 的控件，我想要找到的控件是一个隐藏字段。

我想通过使用 ajax 调用 Jquery 将此值保存到数据库中

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:45:57.650

父子控件生成的html对于如何生成和由谁生成并不重要。一旦生成，您就可以应用 jQuery 的基本规则来使用**[选择器](http://api.jquery.com/category/selectors/)**。

[后代选择器（“祖先后代”）](http://api.jquery.com/descendant-selector/)

例子

```
$('#parentID .childclass')       //with parent id and child class 
```

或者

```
$('.parentclass .childclass')       //with parent class and child class 
```

**根据OP的评论进行**编辑****

 **html 元素应该是唯一的`id`，如果是这样，那么您可以通过[`id selector`](http://api.jquery.com/id-selector/)

```
$("#hdnvalue").val() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:49:01.937

jQuery 后代选择器语法是 $("ancestor descendant")，您可以在其中使用标签名称、类或 ID 代替祖先和后代。（使用 . 表示类，# 表示 ID）。假设您知道 .ascx 文件呈现给您的元素应该能够使用它。（jQuery 是客户端，因此如果您在呈现之前尝试获取元素，它将无法工作。很可能您需要使用隐藏字段的标签名称。）**

# eclipse - 使用 Eclipse 在 OS X 10.8 中构建 opencv 示例

> ID：15871430
> 
> 赞同：0
> 
> 时间：2013-04-08T04:44:04.197
> 
> 标签：eclipse, macos, opencv

我正在尝试在 OS X 10.8 中使用 Eclipse 构建以下示例：

```
//============================================================================

#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <iostream>

using namespace cv;
using namespace std;

int main( int argc, char** argv )
{
    if( argc != 2)
    {
     cout <<" Usage: display_image ImageToLoadAndDisplay" << endl;
     return -1;
    }

    Mat image;
    image = imread(argv[1], CV_LOAD_IMAGE_COLOR);   // Read the file

    if(! image.data )                              // Check for invalid input
    {
        cout <<  "Could not open or find the image" << std::endl ;
        return -1;
    }

    namedWindow( "Display window", CV_WINDOW_AUTOSIZE );// Create a window for display.
    imshow( "Display window", image );                   // Show our image inside it.

    waitKey(0);                                          // Wait for a keystroke in the window
    return 0;
} 
```

但得到这个结果：

```
**** Build of configuration Debug for project cvTesting ****

make all 
Building file: ../src/cvTesting.cpp
Invoking: GCC C++ Compiler
g++ -I/opt/local/include/opencv -I/opt/local/include/opencv2 -I/opt/local/include/opencv2/core/ -        I/opt/local/include/opencv2/highgui/ -O0 -g3 -Wall -c -fmessage-length=0 -MMD -MP -MF"src/cvTesting.d"     -MT"src/cvTesting.d" -o "src/cvTesting.o" "../src/cvTesting.cpp"
../src/cvTesting.cpp:9:33: warning: opencv2/core/core.hpp: No such file or directory
../src/cvTesting.cpp:10:39: warning: opencv2/highgui/highgui.hpp: No such file or directory
../src/cvTesting.cpp:13: error: 'cv' is not a namespace-name
../src/cvTesting.cpp:13: error: expected namespace-name before ';' token
../src/cvTesting.cpp: In function 'int main(int, char**)':
../src/cvTesting.cpp:24: error: 'Mat' was not declared in this scope
../src/cvTesting.cpp:24: error: expected `;' before 'image'
../src/cvTesting.cpp:25: error: 'image' was not declared in this scope
../src/cvTesting.cpp:25: error: 'CV_LOAD_IMAGE_COLOR' was not declared in this scope
../src/cvTesting.cpp:25: error: 'imread' was not declared in this scope
../src/cvTesting.cpp:33: error: 'CV_WINDOW_AUTOSIZE' was not declared in this scope
../src/cvTesting.cpp:33: error: 'namedWindow' was not declared in this scope
../src/cvTesting.cpp:34: error: 'imshow' was not declared in this scope
../src/cvTesting.cpp:36: error: 'waitKey' was not declared in this scope
make: *** [src/cvTesting.o] Error 1

**** Build Finished **** 
```

我已经安装了 opencv，以便 pkg-config 报告以下内容：

$ pkg-config opencv --cflags

-I/opt/local/include/opencv -I/opt/local/include

和

$ pkg-config --libs opencv

/opt/local/lib/libopencv_calib3d.dylib /opt/local/lib/libopencv_contrib.dylib /opt/local/lib/libopencv_core.dylib /opt/local/lib/libopencv_features2d.dylib /opt/local/lib/libopencv_flann.dylib /opt/local/lib/libopencv_gpu.dylib /opt/local/lib/libopencv_highgui.dylib /opt/local/lib/libopencv_imgproc.dylib /opt/local/lib/libopencv_legacy.dylib /opt/local/lib/libopencv_ml.dylib /opt/local/lib/libopencv_nonfree.dylib /opt/local/lib/libopencv_objdetect.dylib /opt/local/lib/libopencv_photo.dylib /opt/local/lib/libopencv_stitching.dylib /opt/local/lib/libopencv_ts.dylib /opt/local/lib/libopencv_video.dylib /opt/local/lib/libopencv_videostab.dylib

在 Eclipse 中，在我拥有的项目属性中，C/C++ Build -> Settings -> GCC C++ Compiler "All options" 设置为：

-I/opt/local/include/opencv -I/opt/local/include/opencv2 -O0 -g3 -Wall -c -fmessage-length=0

并且 C/C++ Build -> Settings -> MacOS X C++ Linker -> "All options" 设置为：-L/opt/local/lib

我还在 C/C++ Build -> Settings -> MacOS X C++ Linker -> Libraries 中列出了以下库 (-l)：

opencv_core opencv_imgproc opencv_highgui opencv_ml opencv_video opencv_features2d opencv_calib3d opencv_objdetect opencv_contrib opencv_legacy opencv_flann

我可以在 Ubuntu 中构建相同的示例，而不是在 OS X 中。任何人都可以帮助解释 Eclipse 在 OS X 中使用的路径的设置，用于 opencv 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T06:36:04.070

正如您在编译器输出中看到的：

> ../src/cvTesting.cpp:9:33：警告：opencv2/core/core.hpp：没有这样的文件或目录
> ../src/cvTesting.cpp:10:39：警告：opencv2/highgui/highgui.hpp ： 没有这样的文件或目录

Eclipse 找不到 core.hpp 和 highgui.hpp 文件。您确定这些文件位于这些位置吗？

您也可以尝试使用`core.h`and`highgui.h`而不是`*.hpp`文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T04:42:28.393

在对该主题进行了更多研究并通过各种选择之后，我发现在 OS X 中使用 Xcode 而不是 Eclipse 作为 IDE 的最佳方法。

我用来设置 Xcode 并正常工作的信息在此处发布的答案中：

[使用 Xcode 为 OS X Lion / Mountain Lion 编译 OpenCV (2.3.1+)](https://stackoverflow.com/questions/8552839/compile-opencv-2-3-1-for-os-x-lion-mountain-lion-with-xcode)

不过，在此之前，我回顾了此处找到的 Mac OS X OpenCV 端口说明：http: [//opencv.willowgarage.com/wiki/Mac_OS_X_OpenCV_Port](http://opencv.willowgarage.com/wiki/Mac_OS_X_OpenCV_Port)

希望这可以帮助其他尝试在 OS X 中将 OpenCV 与现代 IDE 一起使用...

-沃尔特

# .net - 如何使用 Breeze JS 执行逻辑删除？

> ID：15871431
> 
> 赞同：0
> 
> 时间：2013-04-08T04:44:10.487
> 
> 标签：.net, entity-framework-5, breeze

如何使用 Breeze JS 执行逻辑/软删除？

显然，这将取决于我的数据模型如何实现我的逻辑删除，对我来说（状态 = 2），所以我是否会检测到我的实体在微风控制器中被标记为删除，并将其转换为我的列更改的更新，或者什么是首选做法？

这解释了如何执行我相信的物理删除，但不执行逻辑删除。 [http://www.breezejs.com/documentation/inside-entity#DeleteEntity](http://www.breezejs.com/documentation/inside-entity#DeleteEntity)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:06:37.277

您的建议可能会奏效，但我对此的第一遍只是`softDelete`向您的客户端类添加一个方法，该方法只是将状态设置为`2`. 我还会在服务器上的每个查询中添加一个 'where Status!=2' 条件，以便默认情况下不会`deleted`返回任何实体，例如：

```
[HttpGet]
public IQueryable<Customer> Customers(bool includedDeleted) {
   if (includeDeleted) {
     return ContextProvider.Context.Customers;
   } else {
     return ContextProvider.Context.Customers.Where(c = c.Status != 2);
   }
} 
```

进一步的改进是在调用后自动分离`soft deleted`客户端上的任何实体。`SaveChanges`即遍历“已保存”实体并使用`status == 2`

希望这是有道理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-28T21:20:40.280

它目前的一种工作方式不是很优雅，因为它使用反射，但总比没有解决方案好。

遵循我使用“ExclusionDate”属性的一种非常简化的方式：

```
// Model  -----------------------------------

public interface ISoftDelete
{
    DateTime? ExclusionDate { get; set; } 
}

public class Order : ISoftDelete
{
    // Props...
    public DateTime? ExclusionDate { get; set; }
}

// ------------------------------------------

// Data -------------------------------------

public interface IBreezeRepository<out T>
{
    IQueryable<T> All();
}

public class SoftRepository<T> : 
    IBreezeRepository<T> where T : class, ISoftDelete
{
    public SoftRepository(DbContext context)
    {
        Context = context;
    }

    protected DbContext Context { get; private set; }

    public IQueryable<T> All()
    {
        return Context.Set<T>().Where(p=> !p.ExclusionDate.HasValue);
    }
}

public class UnitOfWork
{
    private readonly EFContextProvider<EcmContext> _contextProvider;

    public UnitOfWork()
    {
        _contextProvider = new EFContextProvider<EcmContext>
        {
            BeforeSaveEntityDelegate = BeforeSaveEntity
        };

        var context = _contextProvider.Context;
        Orders = new SoftRepository<Order>(context);
    }

    public IBreezeRepository<Order> Orders { get; private set; }

    private bool BeforeSaveEntity(EntityInfo entityInfo)
    {
        var entityType = entityInfo.Entity.GetType();
        // a little reflection magic
        if (typeof(ISoftDelete).IsAssignableFrom(entityType) && 
            entityInfo.EntityState == EntityState.Deleted)
        {
            entityInfo.GetType().GetProperty("EntityState")
                      .SetValue(entityInfo, EntityState.Modified, null);
            var entity = entityInfo.Entity as ISoftDelete;
            if (entity != null)
            {
                entity.ExclusionDate = DateTime.Now;
                entityInfo.ForceUpdate = true;
            }
        }

        return true;
    }
}

// ------------------------------------------- 
```

# android - 从通知进入应用程序后无法停止媒体播放器

> ID：15871432
> 
> 赞同：1
> 
> 时间：2013-04-08T04:44:22.443
> 
> 标签：android, alarmmanager, android-mediaplayer, android-notifications

我有一个闹钟应用程序，可以在闹钟响起时播放音乐。这是我的第一个 Android 应用程序。当我在应用程序中时，我可以显示一个按钮并停止播放音乐。但是，我启用了通知，并希望在用户单击通知时停止播放音乐。我从通知返回到应用程序，但我无法停止音乐。当我从通知返回应用程序时，我显示的按钮不会显示，除非我按下返回键。如果我点击后退按钮，按钮就会出现。我已经查看了几个媒体播放器示例和通知示例，但似乎都没有我的问题。如果我能回到正确的位置，我知道如何停止音乐。通知管理器是否返回我可以检查的标志？我在这上面花了很多时间，也想不出一个好的解决方案。还，我的通知图标非常小。我怎样才能放大它？

这是我的代码：

```
 public void setAlarmPlaySong() {
    BroadcastReceiver receiver = new BroadcastReceiver() {
        @Override public void onReceive( Context context, Intent _ )
        {   
            stopPlaying();
            // Set up for playing the song selected          
            switch(mPos) {
                case 0:
                    // Play song - 
                    mPlayer = MediaPlayer.create(SetAlarmActivity.this, R.raw.calmyourstorm);
                    mPlayer.start(); 
                break;
                case 1:
                    // Play song - 
                    //mPlayer = MediaPlayer.create(SetAlarmActivity.this, R.raw.gowiththeflow);
                    //mPlayer.start(); 
                break;
                case 2:
                    // Play song - 
                    mPlayer = MediaPlayer.create(SetAlarmActivity.this, R.raw.freeyourmind);
                    mPlayer.start(); 
                break;
                case 3:
                    // Play song - 
                break;  
                case 4:
                    // Play song - 
                break;  
            } // end switch         
            context.unregisterReceiver( this ); // this == BroadcastReceiver, not Activity
            showStopAlarmButton();
        } // end on Receive
    };  
        //
        //Intent intent = new Intent(getApplicationContext(), SetAlarmActivity.class);
        createNotification();        
        //Create alarm manager
        AlarmManager manager = (AlarmManager)(this.getSystemService( Context.ALARM_SERVICE ));

        this.registerReceiver( receiver, new IntentFilter("STOP_MUSIC") );
        PendingIntent sender = PendingIntent.getBroadcast( this, 0, new Intent("STOP_MUSIC"), 0 );
        //PendingIntent sender = PendingIntent.getBroadcast( this, 0, intent, 0 );

        //set the timer as a RTC Wakeup to alarm manager object
        manager.set( AlarmManager.RTC_WAKEUP, calSet.getTimeInMillis(), sender );   
} 
```

这里是 createNotification

```
public void createNotification() {
    // Create the notification that will display when the app is
    // closed.      

    Context ctx = getApplicationContext();

    // The intent that is triggered if the notification
    // is trigger
    Intent notificationIntent = new Intent(ctx, MainActivity.class);
    PendingIntent contentIntent = PendingIntent.getActivity(ctx,
            YOUR_PI_REQ_CODE, notificationIntent,
            PendingIntent.FLAG_CANCEL_CURRENT);

    NotificationManager nm = (NotificationManager) ctx
            .getSystemService(Context.NOTIFICATION_SERVICE);

    //Resources res = ctx.getResources();
    // Build notification
    Notification.Builder builder = new Notification.Builder(ctx);
    builder.setContentIntent(contentIntent)
                .setSmallIcon(R.drawable.beasleybackground2)
                //.setTicker(res.getString(R.string.your_ticker))
                //.setWhen(System.currentTimeMillis())
                .setAutoCancel(true)
                .setContentTitle("Jazz Alarm")
                .setContentText("Good Morning!");
                //.setContentTitle(res.getString(R.string.your_notif_title))
                //.setContentText(res.getString(R.string.your_notif_text));
    Notification n = builder.build();

    // Hide the notification after its selected
    n.flags |= Notification.FLAG_AUTO_CANCEL;
    nm.notify(YOUR_NOTIF_ID, n);                   

}   // createNotification 
```

这里是 showStopAlarmButton

```
 public void showStopAlarmButton() {
    final Button alarmOffButton = (Button) findViewById(R.id.btn_alarmOff);
    alarmOffButton.setVisibility(View.VISIBLE);
    alarmOffButton.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
            //When button is clicked stop the alarm and hide the button
            //when play is clicked show stop button and hide play button
            alarmOffButton.setVisibility(View.GONE);                
            // Cancel song
            stopPlaying();  
        }
    });     
} 
```

# ios - iOS UIwebview 缩放比例检测

> ID：15871435
> 
> 赞同：1
> 
> 时间：2013-04-08T04:44:30.523
> 
> 标签：ios, objective-c, uiwebview

我有一个`UIWebview`我有`SWIPE`RIGHT 和 LEFT 手势移动到下一页的地方`UIwebview`。当`webview`缩放时，**我不想允许 SWIPE GESTURE**。我已经在`ViewdidLoad`.

```
webView = [[UIWebView alloc]initWithFrame:self.view.bounds];
webView.frame = CGRectMake(30, 106,966,500);
webView.scrollView.bounces = NO;
webView.scrollView.delegate = self;
webView.scalesPageToFit = YES;
[self.view addSubview:webView]; 
```

我还在 ViewdidLoad 中添加了 Gesture：

```
//Swipe Gesture for Webview
    swipeRight = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipeRightAction)];
    swipeLeft = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipeLeftAction)];

    swipeRight.direction = UISwipeGestureRecognizerDirectionRight;
    swipeRight.delegate = self;
    [webView addGestureRecognizer:swipeRight];

    swipeLeft.direction = UISwipeGestureRecognizerDirectionLeft;
    swipeLeft.delegate = self;
    [webView addGestureRecognizer:swipeLeft]; 
```

缩放完成后，手势不应发生。我该如何解决这个问题？

# jquery - 防止在 jQuery 中提交表单

> ID：15871441
> 
> 赞同：0
> 
> 时间：2013-04-08T04:44:46.067
> 
> 标签：jquery

我想将数据添加到表格的选择性单元格中。我用 JavaScript 编写了这段代码。

```
var rowIndex = 10;
var colIndex = 5;
var dateTable = document.getElementById('timeTable');
dateTable.rows[rowIndex].cells[colIndex].innerHTML = "Su"; 
```

我想在 jQuery 中使用相同的概念：

```
$('input[name=add_button]').click(function(e) {
    var dateTable = document.getElementById('timeTable');
    var rowIndex = $('[name=days]').val();
    var colIndex = $('[name=times]').val();
    var text = $('input[name = text]').val();
    dateTable.rows[rowIndex].cells[colIndex].innerHTML = text;
    e.preventDefault();
}); 
```

我的问题是：`preventDefault()`方法应该阻止我的表单被提交。它不会阻止表单提交。如果我删除该 `dateTable.rows[rowIndex].cells[colIndex].innerHTML = text;`行，则不会提交表单。我认为这条特定的线路存在一些问题。请帮我整理一下。如果 jQuery 中有更好的选择，请告诉我。我将能够使用`colIndex`和`rowIndex`找到单元格的位置。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T05:14:42.477

试试这个：

加`return false;`你`form tag`喜欢

```
<form onsubmit="return false;" ......>

</form> 
```

还要检查这些从 开始的索引`0 or 1`，如果这些是从 开始的，`1`那么你必须`decrease it by 1`在使用它之前，

像`dateTable.rows[rowIndex-1].cells[colIndex-1].innerHTML = text;`

实际上，当您单击`button`它时，它将是`prevent`它`default behavior`，而不是其他元素的行为`(form in your case)`。

所以，我认为不可能阻止你`form`在这里。

**您可以使用**的替代代码：****

 **```
$('form#myForm').on('submit',function(e){
    e.preventDefault();
    var dateTable = document.getElementById('timeTable');
    var rowIndex = $('[name=days]').val();
    var colIndex = $('[name=times]').val();
    var text = $('input[name = text]').val();
    dateTable.rows[rowIndex].cells[colIndex].innerHTML = text;
    return false;
}); 
```**

# python - 如何将这些功能通用化

> ID：15871443
> 
> 赞同：0
> 
> 时间：2013-04-08T04:45:03.313
> 
> 标签：python, pymongo, introspection, getattr, generic-function

我想缩短我的代码，因为我有更多这样的功能。我想知道我是否可以使用 getattr() 来做[这个](https://stackoverflow.com/questions/15048767/js-turn-string-to-function)人问的事情。

好吧，这就是我所拥有的：

```
def getAllMarkersFrom(db, asJSON=False):
    '''Gets all markers from given database. Returns list or Json string'''
    markers = []
    for marker in db.markers.find():
        markers.append(marker)
    if not asJSON:
        return markers
    else:
        return json.dumps(markers, default=json_util.default)

def getAllUsersFrom(db, asJSON=False):
    '''Gets all users from given database. Returns list or Json string'''
    users = []
    for user in db.users.find():
        users.append(user)
    if not asJSON:
        return users
    else:
        return json.dumps(users, default=json_util.default) 
```

我正在使用`pymongo`和`flask`助手`JSON`。

我想要的是创建一个`getAllFrom(x,db)`接受任何类型对象的函数。我不知道该怎么做，但我想调用`db.X.find()`X**通过**函数传递的位置。

嗯，就是这样。希望您能够帮助我。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T04:59:34.597

这些函数中几乎没有任何真正的代码。每个的一半是构造函数的缓慢重建`list()`。一旦你摆脱了它，你就会得到一个条件，它可以很容易地压缩成一行。所以：

```
def getAllUsersFrom(db, asJSON=False):
    users = list(db.users.find())
    return json.dumps(users, default=json_util.default) if asJSON else users 
```

这对我来说似乎很简单，不需要重构。这两个函数之间有一些共同点，但将它们分开不会进一步减少代码行数。

然而，可能简化的一个方向是不传递标志来告诉函数返回什么格式。让调用者这样做。如果他们想要它作为一个列表，有`list()`. 对于 JSON，您可以提供自己的辅助函数。因此，只需编写函数以返回所需的迭代器：

```
def getAllUsersFrom(db):
    return db.users.find()

def getAllMarkersFrom(db):
    return db.markers.find() 
```

以及将结果转换为 JSON 的辅助函数：

```
def to_json(cur):
    return json.dumps(list(cur), default=json_util.default) 
```

那么，把它们放在一起，你只需调用：

```
markers = list(getAllMarkersFrom(mydb)) 
```

或者：

```
users = to_json(getAllUsersFrom(mydb)) 
```

根据需要。

如果你真的想要一个通用函数来请求各种类型的记录，那就是：

```
def getAllRecordsFrom(db, kind):
    return getattr(db, kind).find() 
```

然后调用它：

```
users = list(getAllRecordsFrom(mydb, "users")) 
```

等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T06:20:28.177

我会说最好为每个任务设置单独的功能。然后你可以在不同的函数之间有共同功能的[装饰器。](https://stackoverflow.com/questions/739654/understanding-python-decorators)例如：

```
@to_json
def getAllUsersFrom(db):
    return list(db.users.find()) 
```

请享用！

# jquery - 从 1.8 版中的 .live() 方法升级后，jQuery 1.9 中的 .on() 方法不起作用

> ID：15871444
> 
> 赞同：0
> 
> 时间：2013-04-08T04:45:04.747
> 
> 标签：jquery

我正在尝试将 jQuery 程序从 1.8 版升级到 1.9 版。在早期版本中 .live() 方法工作正常，但新的 .on() 方法不能。发送到检索数据的 Web 服务的参数“KenID”是“未定义的”，因此不返回任何数据。此参数设置为 sessionStorage 项，所以我猜 .on() 方法无权访问它。我应该采取哪些步骤才能使其发挥作用？

工作程序（jQuery 1.8）：

```
$('#AddrList').live('pagebeforeshow', function (e, data)
    {
        alert(sessionStorage.KenID);    // shows correct KenID
        $.ajax({ 
            // extracting required data by sending KenID to the web service
        });
}); 
```

不工作的程序（jQuery 1.9）：

```
$(document).on('pagebeforeshow', '#AddrList', function (e, data)
    {
        alert(sessionStorage.KenID);    // shows "undefined"
        $.ajax({
            // extracting required data by sending KenID to the web service
        });
}); 
```

谢谢你，雅克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:52:37.940

我有两个简单的问题要问。

1.  你确定`#AddrList`是你页面的id吗？
2.  您确定在导航到当前页面之前已经设置了值`sessionStorage.KenID`吗？

如果您对我上面提出的两个问题的回答都是肯定的，那么它应该可以正常工作。

这里有一个`**[Live example](http://jsfiddle.net/mayooresan/PwEQr/)**`

# image-processing - 缩放图像

> ID：15871448
> 
> 赞同：0
> 
> 时间：2013-04-08T04:45:18.937
> 
> 标签：image-processing

我有一个关于 CSS/HTML 中可用的图像缩放/缩小算法的基本问题。在图像缩放和图像缩小的情况下，整数缩放比非整数缩放更好。2X 比 1.999X 好吗？我的直觉是简单的 2X 缩放只是用相同的颜色而不是 1 填充 4 个像素，或者类似的东西。然而，我对 1.99X 缩放没有任何直觉。因此，问题是 2X 是否优于 1.99X。

谢谢 ！

# com - VirtualBox COM API - 创建克隆虚拟机时出错

> ID：15871450
> 
> 赞同：1
> 
> 时间：2013-04-08T04:45:24.793
> 
> 标签：com, virtual-machine, virtualbox

尝试使用以下代码 (C#) 创建克隆的 VM，但失败：

```
VirtualBox.VirtualBox box = new VirtualBox.VirtualBox();

//create a new machine
IMachine machine = box.CreateMachine(null, "MyClone", null, null, "forceOverwrite=1");
box.RegisterMachine(machine);

//Lock machine for editing
machine.LockMachine(session, LockType.LockType_Write);
IMachine machsettings = session.Machine;

//clone the disk image from an existing vdi (source VDI is not being locked/used)
IMedium hddorig = box.OpenMedium("c:\\tmp\\VDI\\dsl-4.4.10-x86.vdi", DeviceType.DeviceType_HardDisk, AccessMode.AccessMode_ReadOnly, 0);
IMedium hddclone = box.CreateHardDisk("VDI", "c:\\tmp\\VDI\\clone.vdi");
IProgress hddprogress = hddorig.CloneTo(hddclone, 0, hddorig);
hddprogress.WaitForCompletion(-1);

//attach disk image to machine
machsettings.AddStorageController("IDE", StorageBus.StorageBus_IDE);
machsettings.AttachDevice("IDE", 0, 0, DeviceType.DeviceType_HardDisk, hddclone); //fails -  Storage for the medium 'c:\tmp\VDI\clone.vdi' is not created

machsettings.SaveSettings(); 
```

AttachDevice 总是失败说“未创建媒体存储”。我在这里缺少什么步骤？

以下代码工作正常，因此看起来创建 hddclone 存在一些问题。machsettings.AttachDevice("IDE", 0, 0, DeviceType.DeviceType_HardDisk, hddorig); //好的

谢谢史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:18:52.743

我发现这个问题是由 VirtualBox 保留旧文件的内存的一个已知问题引起的。

解决方法是确保克隆的 vdi 始终具有唯一的名称，例如通过在文件名中附加时间戳。

# javascript - javascript-如何在加载网页后 5 秒播放音频文件？

> ID：15871451
> 
> 赞同：0
> 
> 时间：2013-04-08T04:45:26.920
> 
> 标签：javascript, firefox-3

我想在加载网页 5 秒后播放音频文件。我写了以下代码，但它不起作用。有人可以教我如何在加载网页 5 秒后播放音频文件吗？感谢您的大力帮助。谢谢。

以下代码适用于 IE。我主要想让它适用于 FIREFOX-3.0。在 Firefox 中，我收到一条错误消息，说 'document.getElementById('audiotag1').play' 不是函数。我怎样才能使它适用于Firefox？

```
 <html>
        <head>
        <script type="text/javascript">
        function doTimer(length, resolution, oninstance, oncomplete)
        {
            var steps = (length / 100) * (resolution / 10),
                speed = length / steps,
                count = 0,
                start = new Date().getTime();
            function instance()
            {
                if(count++ == steps)
                {
                    oncomplete(steps, count);
                }
                else
                {
                    oninstance(steps, count);
                    var diff = (new Date().getTime() - start) - (count * speed);
                    window.setTimeout(instance, (speed - diff));
                }
            }
            window.setTimeout(instance, speed);
            }

            doTimer(5000, 20, function(steps)
        {   
        },
        function() {
                document.getElementById('audiotag1').play();
            }
        );

            </script>

            <script type="text/javascript">
            function play_single_sound() {
                document.getElementById('audiotag1').play();
            }
        </script>
        </head>
        <body>
        Timer out

        <audio id="audiotag1" src="https://www.dropbox.com/s/0kf457qwu6zh5q4/warning_alarm.mp3" preload="auto"></audio>
        <a href="javascript:play_single_sound();">warning_alarm</a>

        </body>
        </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T04:51:54.547

我不知道为什么该`doTimer()`函数做了这么多工作，但是您可以将整个事情（以及对它的调用）替换为：

```
<script>
    setTimeout( function() {
        document.getElementById('audiotag1').play();
    }, 5000 );
</script> 
```

这就是你真正需要的。

（我当然假设`document.getElementById('audiotag1').play();`代码本身有效。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:58:09.273

这有效：

```
 <script type="text/javascript">
        function play_single_sound() {
            console.log("ok");
            document.getElementById('audiotag1').play();
        }
        setTimeout(play_single_sound, 2000);
    </script>
    </head>
    <body>
    Timer out

    <audio id="audiotag1" src="warning_alarm.mp3" ></audio>
    <a href="javascript:play_single_sound();">warning_alarm</a>

    </body>
    </html> 
```

但我已将 mp3 设为页面本地，取出预加载。

# java - 如何将变量从一个类发送到另一个类。

> ID：15871457
> 
> 赞同：1
> 
> 时间：2013-04-08T04:45:40.060
> 
> 标签：java, class, variables, constructor

希望有人帮助我还为时不晚。我正在尝试创建一个程序，它有一个类（TestCode），要求用户输入 4 个整数。然后，我将该类中的变量发送到另一个类（MySmartDataType）。然后，我使用这些整数来执行某些计算。问题是，我不确定如何让第二个程序正确地接受这些整数。这里是第一堂课。

```
import java.util.*;

class TestCode{

 public static void main(String args[]){
    int n1 = 0;
    int n2 = 0;
    int n3 = 0;
    int n4 = 0;

      String repeat = "Y";

    int evenTotal = 0;
    int oddTotal = 0;

    MySmartDataType msdt;       
    Scanner sc;
    sc = new Scanner(System.in);

      while (repeat == "Y"){

            System.out.println("Enter number 1 ");       
            n1 = sc.nextInt();

            System.out.println("Enter number 2 ");       
            n2 = sc.nextInt();

            System.out.println("Enter number 3 ");       
            n3 = sc.nextInt();

            System.out.println("Enter number 4 ");       
            n4 = sc.nextInt();

                 System.out.println("Would you like to continue? N for no and Y for Yes.");
                 repeat = sc.nextLine();

                 msdt = new MySmartDataType(n1,n2,n3,n4);

                 }

            evenTotal = msdt.getEvenTotal();
            System.out.println("Even total is: " + evenTotal);

            oddTotal=  msdt.getOddTotal();
            System.out.println("Odd total is: " + oddTotal);               
            System.out.println("Grand Total is: " + msdt.getTotal() );                                              
}
} 
```

这是第二个：

```
import java.util.*;

class MySmartDataType {

private int myArray[] = new int [4];

myArray[4] = {n1, n2, n3, n4};

int getEvenTotal(){
int sumEven = 0;
for (int i = 0; i <= myArray.length; i++){
    if (myArray[i] % 2 == 0){
    sumEven += myArray[i];
    }
} 
System.out.println("The even total is: " + sumEven);

return sumEven;
}

int getOddTotal(){
int sumOdd = 0;
for (int i = 0; i <= myArray.length; i++){
    if (myArray[i] % 3 == 0){
    sumOdd += myArray[i];
    }
} 
System.out.println("The odd total is: " + sumOdd);

return sumOdd;

}

int getTotal(){
int sumTotal;

for (int i = 0; i <= 3; i++){
    sumTotal += myArray[i];
    }
    System.out.println("The total is: " +sumTotal);

return sumTotal;
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T04:48:20.543

执行 setter 和 getter 方法以将变量获取到其他类。

这是有关如何执行此操作的教程：

[YouTube 链接](http://www.youtube.com/watch?v=wF18uVxjtvc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-23T10:16:56.273

全局声明变量，然后为声明的变量创建getter、setter。因此，您可以通过 getter 方法在您想要的任何其他类中获取变量的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T04:51:19.023

使用`public static`修饰符。

示例：`public static int example`，现在您可以`example`在其他类中使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T04:51:54.337

在您的课程中添加以下内容`MySmartDataType`。在您的其中创建 4 个实例变量`MySmartDataType`，可以保存从其他类发送的数据。（例如：int var1 ...）

```
MySmartDataType(int num1,int num2,int num3,int num4)
{
var1 = num1;
var2 = num2;
var3 = num3;
var4 = num4;
} 
```

在方法中使用 var1...var4 来执行操作。您可以用数组替换 var1...var4，但是您需要每次循环以读取值并执行 opr（这不是一个坏选择，取决于您）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T04:53:11.877

您错过了 MySmartDataType 类中的构造函数。当您在第一个类中创建此类的对象时，将调用此构造函数；IE

```
msdt = new MySmartDataType(n1,n2,n3,n4); 
```

以下没有意义，删除它

```
myArray[4] = {n1, n2, n3, n4}; 
```

MySmartDataType 类中的构造函数会将值设置为数组；

```
 public MySmartDataType (int n1, int n2, int n3, int n4) {
//this constructor will be called when the object of this class will be created with 4 integer parameters
      myArray[0] = n1;
      myArray[1] = n2;
      myArray[2] = n3;
      myArray[3] = n4;
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-08T04:54:17.203

我猜你现在正在学习面向对象编程，对吧？您可以使用一个或多个参数创建一些方法来填充您的第二类属性。

例如 ：

```
function setData(int data, int pos){ myArray[pos] = data;} 
```

你可以从你的第一堂课中调用那个方法

```
msdt.setData(something, 0); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-08T05:01:09.933

将以下构造函数添加到 MySmartDataType 类。

```
public MySmartDataType(int n1, int n2, int n3, int n4)
{
    myArray = new int[]{n1, n2, n3, n4};    
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-08T05:03:40.100

试试这个：

```
 import java.util.*;

      class MySmartDataType {

          private int myArray[] = new int [4];

          public MySmartDataType(int n1, int n2, int n3, int n4) {
            myArray[0] = n1;
            myArray[1] = n2;
            myArray[2] = n3;
            myArray[3] = n4;
          }

         int getEvenTotal(){
         int sumEven = 0;
         for (int i = 0; i <= myArray.length; i++){
          if (myArray[i] % 2 == 0){
             sumEven += myArray[i];
           }
         } 
         System.out.println("The even total is: " + sumEven);

         return sumEven;
        }

       int getOddTotal(){
       int sumOdd = 0;
       for (int i = 0; i <= myArray.length; i++){
          if (myArray[i] % 3 == 0){
            sumOdd += myArray[i];
           }
        } 
       System.out.println("The odd total is: " + sumOdd);

       return sumOdd;

        }

        int getTotal(){
        int sumTotal = 0;

       for (int i = 0; i <= 3; i++){
          sumTotal += myArray[i];
       }
        System.out.println("The total is: " +sumTotal);

       return sumTotal;
       } 
```

}

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-05-31T03:05:29.567

[http://docs.oracle.com/javaee/6/tutorial/doc/gjbbp.html](http://docs.oracle.com/javaee/6/tutorial/doc/gjbbp.html)

```
package greetings;

import javax.inject.Inject;
import javax.enterprise.context.RequestScoped;
import javax.inject.Named;

@Named
@RequestScoped
public class Printer {

    @Inject @Informal Greeting greeting;

    private String name;
    private String salutation;

    public void createSalutation() {
        this.salutation = greeting.greet(name);
    }

    public String getSalutation() {
        return salutation;
    }

    public void setName(String name) {
       this.name = name;
    }

    public String getName() {
       return name;
    }
} 
```

设置器为您的输入参数设置一个变量。获取器返回一个正在“获取”的实例变量。例如，

```
Printer myobject = new Printer();
//sets instance variable 'name' to "Hello World"
myobject.setName("Hello World");
//gets instance variable 'name' with getter and sets it to mystring
String mystring = myobject.getName();
//will print "Hello World"
System.out.println(mystring); 
```

# javascript - 我们可以使用 javascript 访问 ASP.Net 的 web 用户控件的子控件吗

> ID：15871458
> 
> 赞同：0
> 
> 时间：2013-04-08T04:45:40.010
> 
> 标签：javascript, asp.net, webusercontrol

我有一个网络用户控件。当我们在另一个页面中使用它时，我想知道如何使用 java 脚本访问它的子控件。

假设我的控制如下：

```
 <%@ Control Language="C#" AutoEventWireup="true" CodeBehind="UCS.ascx.cs" Inherits="UCS" %>
        <asp:Panel ID="rbtnPanel" runat="server">
        <asp:RadioButton ID="rbtnEn" runat="server" GroupName="scan" Checked="true" Text="Entire" style="margin-left: -7px;"/>
        <asp:RadioButton ID="rbtnCu" runat="server" GroupName="scan" Text="Custom" style="position: absolute; margin-left: 2px;"/>
         </asp:Panel> 
```

更新：

我已将其添加到页面中：Try.aspx

```
 <%@ Register Src="~/UserControls/UCS.ascx" TagName="UCS" TagPrefix="ucSc" %>
 <table>
 <tr>
 <td>
          <usSc:UCS id="UCS1" runat="server" />
 </td>
 </tr>
 </table> 
```

尝试.aspx： javascript：

```
 $(document).ready(function() {
    setPageLayout(2, 0, true);
    startTimer();
         }

  function startTimer()
   {
   alert(document.getElementById("<%= rbtnCu.ClientID %>").checked);
   } 
```

因此，如果我通过注册在另一个页面中使用此控件。如何访问该 Try.aspx 页面的 javascript 部分中的 RadioButton。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:47:03.983

您可以使用[id selector](http://api.jquery.com/?s=id%20selector)，因为单选按钮的 ClientIDMode 不是静态的，您必须使用 ClientID 因为 asp.net 生成的 id 不是您所看到的服务器 id。

```
rbrbtnEn =  document.getElementById(('<%= rbtnEn.ClientID %>'); 
```

获取检查状态

```
alert(document.getElementById('<%= rbtnEn.ClientID %>').checked); 
```

# jquery - 3个按钮状态 - 正常，翻转（悬停），活动（点击）与jquery？

> ID：15871469
> 
> 赞同：0
> 
> 时间：2013-04-08T04:46:56.067
> 
> 标签：jquery, css, button, rollover, background-position

我正在使用以下代码让我的按钮在悬停时更改为它们的翻转状态。

```
$('.button').hover(function(){
$(this).css('background-position', '0 -23px');
}, function(){
$(this).css('background-position', '0 0px');
}); 
```

将 .button 类应用于所有按钮 div，使用 background-position 函数，其中所有背景图像在同一图像中具有所有三种状态 - 在“0 0px”处显示正常状态，在“0 -23px”处显示翻转状态，并在“0 -46px”处显示活动状态。

我试图弄清楚如何让我的按钮在单击时显示其活动状态，同时让所有其他 .button 按钮恢复正常状态。我尝试了以下代码，将按钮更改为活动状态，但是当鼠标从按钮上移开时，它们会恢复到正常状态。

```
$('.button').click(function(){
$(this).css('background-position', '0 -46px');
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-08T05:11:55.220

最好的办法是简单的 css 实现。

```
.button
{
    //your css
}
.button:active
{
    //your css
}
.button:hover
{
    //your css
} 
```

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T04:54:29.470

您可以使用伪类 a:active {background-img: - ;background-position: 0 -46px;}

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T04:59:56.550

您可以为此添加类，例如：

**在你的CSS**中添加 thi

 **```
.active{background-position:0 -46px !important;} 
```

在**Jquery**中使用它就像

```
$(document).ready(function(){
    $('.button').click(function(){
        $(this).toggleClass('active');
    });
}); 
```

阅读文档[http://api.jquery.com/toggleClass/](http://api.jquery.com/toggleClass/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T04:53:10.190

现在，如果您以前在 jquery 中使用回调函数而不是使用此格式..

```
$('.button').hover(function(){
  $(this).css('background-position', '0 -23px', function(){
    $(this).css('background-position', '0 0');
  });
}); 
```

更多关于**[回调函数](http://api.jquery.com/jQuery.Callbacks/)****

# objective-c - NSViewController 新与 InitWithNibName 问题

> ID：15871473
> 
> 赞同：2
> 
> 时间：2013-04-08T04:47:08.663
> 
> 标签：objective-c, cocoa, appkit

我在使用 NSViewController 时遇到了一个奇怪的错误，如果我使用 viewcontroller 的常规初始化消息分配视图，则创建的视图不是我的视图，但是当使用默认的 NIB 名称时，它确实有效。

具体来说，这段代码一直有效。它创建在 nib 文件中定义的视图，并将其显示在 parentView 中。

```
+ (void)createTransparentViewCenteredInView:(NSView*)parentView withText:(NSString*)text duration:(NSTimeInterval)duration {
    TransparentAccessoryViewController* controller = [[TransparentAccessoryViewController alloc] initWithNibName:@"TransparentAccessoryViewController" bundle:nil];

    NSLog(@"%@", [controller.view class]);    // Returns "TransparentAccessoryView" -- CORRECT
    [parentView addSubview:controller.view];
} 
```

但是，以下代码有时会起作用（这很奇怪，因为它并不总是失败）。对于某些 parentViews，它工作得非常好，而对于其他人，它不会。父视图只是随机的自定义 NSView。

```
+ (void)createTransparentViewCenteredInView:(NSView*)parentView withText:(NSString*)text duration:(NSTimeInterval)duration {
    TransparentAccessoryViewController* controller = [TransparentAccessoryViewController new];

    NSLog(@"%@", [controller.view class]);    // Returns "NSSplitView" -- INCORRECT
    [parentView addSubview:controller.view];
} 
```

出现的错误如下（我不知道为什么会出现 NSTableView，因为我这里根本没有 NSTableView。此外，当它打印的类型是时它抱怨 NSTableView 很奇怪一个 NSSplitView）：

> 2013-04-07 21:33:12.384 无法连接动作刷新：到类 TransparentAccessoryViewController 的目标
> 
> 2013-04-07 21:33:12.384 无法连接动作删除：到类 TransparentAccessoryViewController 的目标
> 
> 2013-04-07 21:33:12.385 ***非法 NSTableView 数据源 ()。必须实现 numberOfRowsInTableView: 和 tableView:objectValueForTableColumn:row:

NIB 文件定义了一个自定义的子类 NSView，称为 TransparentAccessoryView，并将其连接到文件所有者的视图属性，标准的东西（我所做的只是将自定义类名称更改为 TransparentAccessoryView）。我添加了一个 NSLog 来查看发生了什么，出于某种原因，在第二种情况下，视图类类型不正确，并且由于某种原因认为它是一个 NSSplitView。ViewController 类如下：

```
@implementation TransparentAccessoryViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Initialization code here.
    }

    return self;
}

- (void)awakeFromNib {
    self.textField.stringValue = @"";
}

+ (void)createTransparentViewCenteredInView:(NSView*)parentView withText:(NSString*)text duration:(NSTimeInterval)duration {
    TransparentAccessoryViewController* controller = [[TransparentAccessoryViewController alloc] initWithNibName:@"TransparentAccessoryViewController" bundle:nil];

    NSLog(@"%@", [controller.view class]);
    [parentView addSubview:controller.view];
}

@end 
```

我认为默认的 init 消息会触发 viewcontroller 加载以 viewcontroller 命名的 NIB，这在某些情况下似乎是这种情况，因为我的代码的第二个版本在某些条件下工作。

有谁知道为什么会发生这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T06:18:24.610

从[文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/NSViewController_Class/Introduction/Introduction.html#//apple_ref/occ/instm/NSViewController/initWithNibName%3abundle%3a)：

> 如果您为 nibNameOrNil 传入 nil，则 nibName 将返回 nil 并且 loadView 将抛出异常；在这种情况下，您必须在调用视图之前调用 setView:，或者覆盖 loadView。

因此，如果你正在初始化一个`NSViewController`with `-init`，你应该调用`-setView:`来设置视图控制器的视图，或者覆盖`-loadView`。在后一种情况下，您当然可以实现`UIViewController`您可能期望的类似行为 - 如果`nibNameOrNil`为 nil，则尝试加载与类同名的 nib。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T06:04:12.537

我认为当您调用`init`NSViewController 时，您假设`init`NSViewController 的实现会搜索与视图控制器同名的 nib 并使用它。但是，这是未记录的 API，或者至少我似乎找不到任何支持该假设的文档。您在评论中发布的[链接](http://twobitlabs.com/2012/01/initializing-uiviewcontrollers/)也没有引用任何文档，甚至重申这是未记录的，Apple 可以随时更改此实现。

我认为要确保您的代码在 SDK 的未来版本中工作（并且由于它已经产生了不良行为），您不应该依赖这个假设。要达到相同的结果，只需覆盖`init`并`initWithNibName:bundle:`以[本文](http://oleb.net/blog/2012/01/initWithNibName-bundle-breaks-encapsulation/)解释的方式：

```
@implementation MyCustomViewController

// This is now the designated initializer
- (id)init
{
    NSString *nibName = @"MyCustomViewController";
    NSBundle *bundle = nil;
    self = [super initWithNibName:nibName bundle:bundle];
    if (self) {
        ...
    }
    return self;
}

- (id)initWithNibName:(NSString *)nibName bundle:(NSBundle *)bundle
{
    // Disregard parameters - nib name is an implementation detail
    return [self init];
} 
```

# ios - 更改 push-segue 或其动画样式

> ID：15871475
> 
> 赞同：12
> 
> 时间：2013-04-08T04:47:29.690
> 
> 标签：ios, animation, segue

[这](https://stackoverflow.com/questions/15377764/how-to-go-to-home-page-in-ios-app)是我关于 push-segue 的问题，然后转到 iOS 应用程序中的“主页”。

一切正常，但 push-segue 只有一种“从右到左”的动画类型。在 iPad 应用程序中它并不漂亮。那么，我该如何更改动画类型，例如“淡入淡出”？

或者可能有其他方法来准备我想要的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-07T04:35:31.870

从 iOS 7 开始，您可以使用动画过渡进行自定义。您可以观看 WWDC 2013 session 218 Custom Transitions Using View Controllers 了解更多详情

# visual-studio-2012 - 使用新的构建定义构建时出现 MSBuild 错误

> ID：15871476
> 
> 赞同：1
> 
> 时间：2013-04-08T04:47:30.797
> 
> 标签：visual-studio-2012, msbuild

我们正在使用连接到 TFS2012 的 VS2008。我们有一个要求，如果有人签入更改，则必须将最新版本的文件复制到未使用 TFS 映射的中央文件夹。我做了一些搜索，然后我发现如果我们可以通过构建事件来做到这一点，我所要做的就是创建新的构建定义并在签入时触发。我无法在 VS2008 中创建构建定义，所以我在 VS2012 中创建了构建定义，但是在使用它进行构建时会出现这样的错误

```
Debug | Any CPU
 1 error(s), 3 warning(s)
$/Global Module/cal_reg.sln - 1 error(s), 3 warning(s), View Log File
 C:\Windows\Microsoft.NET\Framework64\v3.5\Microsoft.Common.targets (1418): Task failed because "AxImp.exe" was not found, or the correct Microsoft Windows SDK is not installed. The task is looking for "AxImp.exe" in the "bin" subdirectory beneath the location specified in the InstallationFolder value of the registry key HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SDKs\Windows\v8.0A\WinSDK-NetFx35Tools-x86\. You may be able to solve the problem by doing one of the following:  1) Install the Microsoft Windows SDK.  2) Install Visual Studio 2010\.  3) Manually set the above registry key to the correct location.  4) Pass the correct location into the "ToolPath" parameter of the task.
 C:\Windows\Microsoft.NET\Framework64\v3.5\Microsoft.Common.targets: Could not resolve this reference. Could not locate the assembly "CommonProc". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors.
 C:\Windows\Microsoft.NET\Framework64\v3.5\Microsoft.Common.targets: Could not resolve this reference. Could not locate the assembly "Interop.Word". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors.
 C:\Windows\Microsoft.NET\Framework64\v3.5\Microsoft.Common.targets: Could not resolve this reference. Could not locate the assembly "Interop.Excel". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors.
 $/Global Module/cal_reg.sln compiled
 No Test Results
 No Code Coverage Results
Other Errors and Warnings
 1 error(s), 0 warning(s)
 Exception Message: MSBuild error 1 has ended this build. You can find more specific information about the cause of this error in above messages. (type BuildProcessTerminateException)
Exception Stack Trace:    at System.Activities.Statements.Throw.Execute(CodeActivityContext context)
   at System.Activities.CodeActivity.InternalExecute(ActivityInstance instance, ActivityExecutor executor, BookmarkManager bookmarkManager)
   at System.Activities.Runtime.ActivityExecutor.ExecuteActivityWorkItem.ExecuteBody(ActivityExecutor executor, BookmarkManager bookmarkManager, Location resultLocation) 
```

我尝试使用 MSBuild.exe 在命令行中构建，但发生了同样的错误。为什么会发生这种情况？该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T06:14:04.027

好吧，答案在您的构建日志中：

```
C:\Windows\Microsoft.NET\Framework64\v3.5\Microsoft.Common.targets (1418): Task failed because "AxImp.exe" was not found, or the correct Microsoft Windows SDK is not installed. The task is looking for "AxImp.exe" in the "bin" subdirectory beneath the location specified in the InstallationFolder value of the registry key HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SDKs\Windows\v8.0A\WinSDK-NetFx35Tools-x86\. 
You may be able to solve the problem by doing one of the following:  
1) Install the Microsoft Windows SDK.  
2) Install Visual Studio 2010\.  
3) Manually set the above registry key to the correct location.  
4) Pass the correct location into the "ToolPath" parameter of the task. 
```

# php - 一个带有子查询的查询中的 HAVING 子句

> ID：15871478
> 
> 赞同：0
> 
> 时间：2013-04-08T04:48:02.180
> 
> 标签：php, mysql, sql, having

是否可以在一个查询中有多个 HAVING？

这是我的示例查询：

```
SELECT household_tbl.household_connector_id AS h_id
    , (
        SELECT COUNT(household_connector_id)
        FROM household_tbl
        WHERE household_connector_id = h_id
            AND hh_phic_status = 1
            AND age >= 21
            AND age_category = "Year"
        ) + (
        SELECT COUNT(hh_members_connector_id)
        FROM tbl_household_members
        WHERE household_connector_id = h_id
            AND hh_phic_status = 1
            AND hh_age >= 21
            AND hh_age_category = "Year"
        ) AS total_phic
    , (
        SELECT COUNT(household_connector_id)
        FROM household_tbl
        WHERE household_connector_id = h_id
            AND hh_phic_status = 1
            AND age >= 21
            AND age_category = "Year"
            AND (
                hh_phic_membership_category = "ng sponsored"
                OR hh_phic_membership_category = "Sponsored-NG(DOH)"
                )
        ) + (
        SELECT COUNT(hh_members_connector_id)
        FROM tbl_household_members
        WHERE household_connector_id = h_id
            AND hh_phic_status = 1
            AND hh_age >= 21
            AND hh_age_category = "Year"
            AND (
                hh_phic_membership_category = "ng sponsored"
                OR hh_phic_membership_category = "Sponsored-NG(DOH)"
                )
        ) AS ng_sponsored
FROM household_tbl
WHERE barangay = "'.$barangay.'"
HAVING total_phic <> 0 
```

我也想要“拥有 ng_support <> 0”

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:18:46.717

您可以计算`count`满足子查询中条件的每个。这里需要的过滤运算符只是`WHERE`而不是`HAVING`因为您在外部查询上没有进一步的聚合。

```
SELECT  a.household_connector_id AS h_id,
        COALESCE(b.totalCount, 0) + COALESCE(c.totalCount, 0) AS total_phic,
        COALESCE(b.totalCountSponsored, 0) + COALESCE(c.totalCountSponsored, 0) AS ng_sponsored
FROM    household_tbl a 
        INNER JOIN
        (
            SELECT  household_connector_id, 
                    COUNT(*) totalCount,
                    SUM(hh_phic_membership_category IN ('ng sponsored', 'Sponsored-NG(DOH)')) totalCountSponsored
            FROM    household_tbl
            WHERE   hh_phic_status = 1 AND 
                    age >= 21 AND 
                    age_category =  "Year"
            GROUP   BY household_connector_id           
        ) b ON a.household_connector_id = b.household_connector_id
        LEFT JOIN
        (
            SELECT  household_connector_id, 
                    COUNT(*) totalCount,
                    SUM(hh_phic_membership_category IN ('ng sponsored', 'Sponsored-NG(DOH)')) totalCountSponsored
            FROM    tbl_household_members 
            WHERE   hh_phic_status = 1 AND 
                    hh_age >= 21 AND 
                    hh_age_category = "Year"
            GROUP   BY household_connector_id
        ) c ON a.household_connector_id = c.household_connector_id
WHERE   a.barangay = "barangay_value_HERE" AND
        COALESCE(b.totalCount, 0) + COALESCE(c.totalCount, 0) <> 0 AND
        COALESCE(b.totalCountSponsored, 0) + COALESCE(c.totalCountSponsored, 0) <> 0 
```

您也不能使用在同一级别上创建的`ALIAS`on子句，`WHERE`因为`ALIAS`were created on`SELECT`子句和`WHERE`子句在之前执行`SELECT`。这是完整的 SQL 操作顺序，

*   FROM 子句
*   WHERE 子句
*   GROUP BY 子句
*   HAVING 子句
*   选择子句
*   ORDER BY 子句

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-08T04:51:37.810

做这个：

```
 Select * From
            (
                SELECT household_tbl.household_connector_id as h_id,
                        (SELECT COUNT(household_connector_id)
                        FROM household_tbl
                        WHERE household_connector_id = h_id
                        AND hh_phic_status = 1
                        AND age >= 21
                        AND age_category =  "Year") +

                    (SELECT COUNT(hh_members_connector_id) 
                    FROM tbl_household_members 
                    WHERE 
                    household_connector_id = h_id 
                    AND hh_phic_status = 1
                    AND hh_age >= 21 
                    AND hh_age_category = "Year") 
                    as total_phic,

                    (SELECT COUNT(household_connector_id)
                    FROM household_tbl
                    WHERE household_connector_id = h_id
                    AND hh_phic_status = 1
                    AND age >= 21
                    AND age_category =  "Year"
                    AND (hh_phic_membership_category = "ng sponsored" OR hh_phic_membership_category =  "Sponsored-NG(DOH)"))  +

                    (SELECT COUNT(hh_members_connector_id) 
                    FROM tbl_household_members
                    WHERE household_connector_id = h_id
                    AND hh_phic_status = 1
                    AND hh_age >= 21 
                    AND hh_age_category = "Year"
                    AND (hh_phic_membership_category = "ng sponsored" OR hh_phic_membership_category =  "Sponsored-NG(DOH)")) 
                    as ng_sponsored
                    FROM household_tbl WHERE barangay = "'.$barangay.'"
                )tbl Group By h_id,total_phic,ng_sponsored 
                HAVING total_phic <> 0 
```

您可以更换：

```
Group By h_id,total_phic,ng_sponsored HAVING total_phic <> 0 
```

经过

```
Where total_phic <> 0 
```

# android - 在自动完成文本视图中从数据库中获取值并在文本视图中显示相对值

> ID：15871483
> 
> 赞同：2
> 
> 时间：2013-04-08T04:48:45.623
> 
> 标签：android

假设我有这个数据库表：

```
Name: A,B,C,D

Id:   1,2,3,4

Phone no: 991,928,902,397 
```

我正在使用自动完成文本视图来显示名称。自动完成代码在这里：

```
final ArrayList<String> s1 = new ArrayList<String>();

        for (StudentInfo cn : studentInfo) {
            s1.add(cn.getName());

        }
        ArrayAdapter<String> adapter =  new ArrayAdapter<String>(this, android.R.layout.simple_dropdown_item_1line,s1); 

        a1.setThreshold(1); 
        a1.setAdapter(adapter); 
```

在这里`a1 is the autocomplete textview`。现在如果我从自动完成文本视图中选择一个名称假设 B。那么 B 的 ID 和电话号码是 2 和 902，我想显示为 2 个文本视图。这里实际上我想显示相对 ID 和电话号码在两个文本视图 t1，t2 中命名。

```
a1.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {

 }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T06:00:52.087

尝试这个

使用 HashMap 将姓名与学生详细信息进行映射

```
HashMap<String, StudentInfo> studentdetails=new HashMap<String,StudentInfo>();
  for (StudentInfo cn : studentInfo) {
            s1.add(cn.getName());
            studentdetails.put(cn.getName(),cn);
        } 
```

它 onItemClick 得到这样的值

```
a1.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                    String studentname=arg0.getItemAtPosition(arg2);

                   StudentInfo student=studentdetails.get(studentname);
                    // get values from studen record 

                 String id=student.getId();
                String phoneNumber=student.getPhone();

             }
        }); 
```

# objective-c - 制作自定义 UITableViewCell - 现在 UITableView 不滚动

> ID：15871486
> 
> 赞同：1
> 
> 时间：2013-04-08T04:48:55.863
> 
> 标签：objective-c, uitableview

创建了一个空的`xib`. 创建了一个覆盖`UITableViewCell`（UserCell）的类。

放入一个自定义逻辑，简单地格式化一些字符串以进行显示，并将两个标签连接到`IB`.

我的视图控制器拥有一个`UITableView`. 我已将视图控制器设置为数据源。以下是我如何用我的自定义单元格填充它。

（做了：[http](http://www.highoncoding.com/Videos/823_Creating_a_Custom_UITableViewCell.aspx) ://www.highoncoding.com/Videos/823_Creating_a_Custom_UITableViewCell.aspx ）

```
-(UserCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UserCell* cell = [tableView dequeueReusableCellWithIdentifier:@"Users Table"];

    if (!cell) {
        NSArray* topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"UserCell" owner:nil options:nil];
        for (id currentObject in topLevelObjects) {
            if ([currentObject isKindOfClass:[UserCell class]]) {
                cell = (UserCell*) currentObject;
                break;
            }
        }
    }

    [cell setUserNameText:[[[_userDataManager getUsers] objectAtIndex:indexPath.row] name ]];
    [cell setNumberLabelText:indexPath.row];
    return cell;
} 
```

由于某种原因，我无法滚动。在`viewDidLoad:`我`scrollEnabled`在我的表格视图上打印。是“1”。

在我尝试放入 custom 之前没有遇到过这个问题`UITableViewCell`。:(

谢谢你的任何建议！:D

编辑：自定义单元格代码。

```
#import "UserCell.h"

@implementation UserCell

@synthesize textLabel, numberLabel;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}

-(void) setNumberLabelText:(NSInteger)text {
    self.numberLabel.text = [[NSString alloc] initWithFormat:@"# %d", text];
}

-(void) setUserNameText:(NSString*)text {
    self.userNameLabel.text = text;
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:14:02.413

按照回答结束这个问题（我有时是个呆子）

我没有用触控板做过很多 iOS 的东西。好像我期待两个手指滚动在模拟器上“滚动”。它不是！

提醒其他遇到此问题的人。

# android - 弹出视频播放器

> ID：15871492
> 
> 赞同：2
> 
> 时间：2013-04-08T04:49:44.333
> 
> 标签：android, android-videoview

我想在固定宽度和高度的对话框中播放视频。我播放了视频，但一些视频内容显示在对话框之外，一些视频内容显示在对话框的右上角。我尝试在运行时设置宽度和高度，但它不起作用。

以下是代码

```
 Dialog dialog = new Dialog(this,android.R.style.Theme_Translucent_NoTitleBar);
    dialog.setContentView(R.layout.layout_video_popup);

    VideoView mVideoView = (VideoView)dialog.findViewById(R.id.videoView);
    //String path ="http://daily3gp.com/vids/747.3gp";
    mVideoView.setOnPreparedListener(this);
    mVideoView.getHolder().setFixedSize(300, 400);
    dialog.show();
    mVideoView.setVideoPath(path);
    mVideoView.requestFocus();
    mVideoView.start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-01T18:47:14.013

```
Window window = dialog.getWindow();
window.setLayout((int) (window.getWindowManager().getDefaultDisplay().getWidth() * .90),
        (int) (window.getWindowManager().getDefaultDisplay().getHeight() * .90)); 
```

# python - 在 XML 视图中隐藏“分隔符” - OpenErp

> ID：15871494
> 
> 赞同：0
> 
> 时间：2013-04-08T04:49:47.470
> 
> 标签：python, xml, string, openerp, separator

我需要隐藏一个“分隔符”及其所有子项（树、字段、按钮等），我被卡住了，不知道如何实现这一点

```
<separator string="Quotations" />
                    <field name="purchase_ids" readonly="1">
                        <tree string="Purchase Order">
                            <field name="name" string="Reference"/>
                            <field name="date_order" string="Order Date"/>
                            <field name="partner_id"/>
                            <field name="company_id" groups="base.group_multi_company" widget="selection"/>
                            <field name="location_id" groups="stock.group_locations"/>
                            <field name="minimum_planned_date"/>
                            <field name="origin"/>
                            <field name="state"/>
                            <button name="purchase_cancel" states="draft,confirmed,wait_auth" string="Cancel Purchase Order" icon="gtk-cancel"/>
                            <button name="purchase_confirm" states="draft" string="Confirm Purchase Order" icon="gtk-apply"/>
                            <button name="purchase_approve" states="confirmed" string="Approved by Supplier" icon="gtk-ok"/>
                        </tree>
                    </field> 
```

如果有人可以提供帮助，将不胜感激，非常感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T06:34:35.890

如果您需要隐藏特定角色/组的字段，您可以使用 groups 属性，如下所示：

```
<field name="name" groups="GROUP_XML_ID"/> 
```

这意味着如果您当前的用户没有此组，他将无法看到这些字段。

如果您需要隐藏特定条件的字段，可以使用 attrs 属性，如下所示：

```
<separator string="Description" colspan="4" attrs="{'invisible': [('show_config', '=', False)]}" /> 
```

否则， invisible="1" 会很好用。

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T04:53:37.250

`position="replace"`属性将删除您想从 xml 中删除的任何内容。

```
<separator string="Quotations" position="replace"/>
<field name="purchase_ids" position="replace"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T05:15:29.157

添加属性 'invisible'=True 比使字段不可见更好。所以首先找到正确的视图，然后替换分隔符，然后在字段 purchase_ids 中添加属性不可见

```
<separator string="Quotations" position="replace"/>
<field name="purchase_ids" position="attributes">
<attribute name='invisible'>1</attribute>
</field> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T05:12:20.810

```
<separator string="Quotations" position="replace"/>
                    <field name="purchase_ids" position="replace">
                        <tree string="Purchase Order" position="replace">
                            <field name="name" string="Reference"/>
                            <field name="date_order" string="Order Date"/>
                            <field name="partner_id"/>
                            <field name="company_id" groups="base.group_multi_company" widget="selection"/>
                            <field name="location_id" groups="stock.group_locations"/>
                            <field name="minimum_planned_date"/>
                            <field name="origin"/>
                            <field name="state"/>
                            <button name="purchase_cancel" states="draft,confirmed,wait_auth" string="Cancel Purchase Order" icon="gtk-cancel"/>
                            <button name="purchase_confirm" states="draft" string="Confirm Purchase Order" icon="gtk-apply"/>
                            <button name="purchase_approve" states="confirmed" string="Approved by Supplier" icon="gtk-ok"/>
                        </tree>
                    </field> 
```

# google-apps-script - Valmerge 谷歌脚本不适用于共享协作者

> ID：15871503
> 
> 赞同：1
> 
> 时间：2013-04-08T04:50:19.563
> 
> 标签：google-apps-script

我一直在和我的团队一起使用 valmerge google apps 脚本。我们一直在一个常见的谷歌电子表格中使用它。但是突然他们无法运行脚本。它给出了一个错误“你没有被授权”。而当我尝试与其他电子邮件地址共享同一个文档时，它对他们来说效果很好。

仅在几个电子邮件地址上给出身份验证问题而不在其他电子邮件地址上可能是什么问题？

非常感谢任何指针..

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:20:08.083

我认为这与我最近打开的一个[问题有关。](https://code.google.com/p/google-apps-script-issues/issues/detail?id=2608)请查看并“加注星标”以跟踪更新并为它投票。

# bigbluebutton - 安装 Bigbluebutton 时 Ubuntu 10.04 关闭

> ID：15871509
> 
> 赞同：0
> 
> 时间：2013-04-08T04:50:43.360
> 
> 标签：bigbluebutton

我在两个系统上遇到了 Bigbluebutton 的问题。我在两个系统上安装了 bigbluebutton 0.8 版。我的问题是，一两天后两个系统都停止工作（sHUTDOWN）。

我的一个 ubuntu 服务器托管在 Amazone EC2 上。

我不知道这个问题与服务器或 BBB 本身有关。

请帮我两个弄清楚。

我正在使用 BBB v0.8

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:07:34.000

我是 BigBlueButton 的开发人员之一，我可以说 BigBlueButton 中没有代码，根据我们四年多的开发经验，将关闭 Linux 服务器（即 sudo shutdown -h now）。

问题在于您的服务器环境。

# javascript - WebGL：更改旋转中心时如何防止相机反弹

> ID：15871511
> 
> 赞同：1
> 
> 时间：2013-04-08T04:50:50.967
> 
> 标签：javascript, math, graphics, 3d, webgl

我遇到了某种心理障碍，正在寻找一些建议或建议。我的问题是这样的：

我有一个 WebGL 场景（我没有使用第三方库，除了 gl-matrix），用户可以在其中向上/向下和向左/向右旋转相机（围绕 X/Y 轴旋转）。他们也可以旋转模型（偏航/俯仰）。

要查看问题，假设模型有两个块，A 和 B 在场景中，A 在中心，B 在右侧（在视口中），旋转中心在 A 的中心。如果用户旋转模型，它围绕块 A 的中心旋转。但是如果用户单击对象 B，我需要能够将旋转中心更改为 B 的中心，但仍保持当前的相机方向。目前，当旋转中心切换到 B 时，块 B 移动到屏幕中心，块 A 移动到左侧。基本上，代码始终以当前中心或旋转为中心。

我使用以下代码进行模型视图矩阵更新：

```
var mvMatrix = this.mvMatrix;

mat4.identity(mvMatrix);

mat4.translate(mvMatrix, mvMatrix, this.orbit);
mat4.rotateY(mvMatrix, mvMatrix, this.orbitYaw);
mat4.rotateX(mvMatrix, mvMatrix, this.orbitPitch);

mat4.translate(mvMatrix, mvMatrix, this.eye);
mat4.rotateY(mvMatrix, mvMatrix, this.eyeYaw);
mat4.rotateX(mvMatrix, mvMatrix, this.eyePitch); 
```

我试图弄清楚我应该使用什么正确的轨道和眼睛的偏航和俯仰值来移回当前位置并实现当前的相机/眼睛方向以避免从一个物体“反弹”到另一个物体旋转中心移动。

我搜索了很多，似乎找不到最好的方法（我目前的尝试有问题​​）。任何示例代码，或者只是好的描述将不胜感激。

**编辑**

我按照 gman 的建议尝试了以下代码，但切换轨道只是跳来跳去。我的模型是由多个物体组成的，轨道中心可以改变，但是改变轨道后，相机的方向需要保持稳定，这就是为什么我要计算对轨道偏航/俯仰和眼睛偏航/俯仰的校正改变轨道后将眼睛放回同一位置并指向同一方向。顺便说一句，根据当前轨道的位置，我只有一个轨道偏航和俯仰，所以这与 gman 的样本有点不同：

```
Camera.prototype.changeOrbit = function (newOrbit) {
var matA = mat4.create();
var matB = mat4.create();

mat4.translate(matA, matA, this.orbit);
mat4.rotateY(matA, matA, this.orbitYaw);
mat4.rotateX(matA, matA, this.orbitPitch);

mat4.translate(matB, matB, newOrbit);
mat4.rotateY(matB, matB, this.orbitYaw);
mat4.rotateX(matB, matB, this.orbitPitch);

var matInverseNewOrbit  = mat4.create();
var matNewOrbitToCamera = mat4.create();

mat4.invert(matInverseNewOrbit, matB);
mat4.multiply(matNewOrbitToCamera, matInverseNewOrbit, matA);

var m = matNewOrbitToCamera;

this.eye[0] = m[12];
this.eye[1] = m[13];
this.eye[2] = m[14];

this.eyePitch = ExtractPitch(m);
this.eyeYaw   = ExtractYaw(m);

this.update();
}; 
```

ExtractPitch 和 ExtractYaw 按照 gman 的规定工作，但我确实围绕不同的轴旋转，因为俯仰通常是围绕 Y 轴定义的，依此类推。不过，感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T03:49:54.160

我不确定我能否解释这一点，但基本上：

当从 切换`A`到 时`B`，在切换时，

1.  计算相机的矩阵`A`（上面的代码）。( `camera`)
2.  计算`B`( `matB`)的矩阵
3.  计算矩阵的逆`B`。( `inverseMatB`)
4.  乘以。`camera`_ `inverseMatB`( `matBtoCamera`)

    您现在有一个从`B`相机到相机的矩阵。

5.  将此矩阵 ( `matBToCamera`) 分解回平移和旋转。

不幸的是，我不知道有一个好的分解矩阵函数来指向你。我已经很久不需要了。翻译基本上是矩阵的第 12、13、14 个元素。（假设您使用的是 16 个元素矩阵，我认为这是 glMatrix 使用的）。

```
var translation = [m[12], m[13], m[14]]; 
```

对于旋转，矩阵的上/左 3x3 部分表示旋转。只要不涉及缩放或倾斜，根据此页面 ( [http://nghiaho.com/?page_id=846](http://nghiaho.com/?page_id=846) ) 它是

```
var rotXInRadians = Math.atan2(m[9], m[10]);
var rotYInRadians = Math.atan2(-m[8], Math.sqrt(m[9] * m[9] + m[10] * m[10]));
var rotZInRadians = Math.atan2(m[4], m[0]); 
```

这是一个例子

[http://jsfiddle.net/greggman/q7Bsy/](http://jsfiddle.net/greggman/q7Bsy/)

我将在此处粘贴特定于 glMatrix 的代码

```
// first let's make 3 nodes, 'a', 'b', and 'camera

var degToRad = function(v) {
  return v * Math.PI / 180;
}

var a = {
  name: "a",
  translation: [0, -50, -75],
  pitch: 0,
  yaw: degToRad(30),
};

var b = {
  name: "b",
  translation: [0, 100, 50],
  pitch: 0,
  yaw: degToRad(-75),
}

var camera = {
  name: "cam",
  translation: [0, 15, 10],
  pitch: 0,
  yaw: degToRad(16),
  parent: a,
}; 
```

这是计算每个矩阵的代码

```
var matA = mat4.create();
mat4.identity(matA);
mat4.translate(matA, matA, a.translation);
mat4.rotateY(matA, matA, a.pitch);
mat4.rotateX(matA, matA, a.yaw);
a.mat = matA;

var matB = mat4.create();
mat4.identity(matB);
mat4.translate(matB, matB, b.translation);
mat4.rotateY(matB, matB, b.pitch);
mat4.rotateX(matB, matB, b.yaw);
b.mat = matB;

var matCamera = mat4.create();
mat4.identity(matCamera);

var parent = camera.parent;

mat4.translate(matCamera, matCamera, parent.translation);
mat4.rotateY(matCamera, matCamera, parent.pitch);
mat4.rotateX(matCamera, matCamera, parent.yaw);

mat4.translate(matCamera, matCamera, camera.translation);
mat4.rotateY(matCamera, matCamera, camera.pitch);
mat4.rotateX(matCamera, matCamera, camera.yaw);

camera.mat = matCamera; 
```

这是交换相机的代码

```
// Note: Assumes matrices on objects are updated.
var reparentObject = function(obj, newParent) {
  var matInverseNewParent = mat4.create();
  var matNewParentToObject = mat4.create();
  mat4.invert(matInverseNewParent, newParent.mat);
  mat4.multiply(matNewParentToObject, matInverseNewParent, obj.mat);

  var m = matNewParentToObject;
  obj.translation[0] = m[12];
  obj.translation[1] = m[13];
  obj.translation[2] = m[14];

  var rotXInRadians = Math.atan2(m[9], m[10]);
  var rotYInRadians = Math.atan2(-m[8], Math.sqrt(m[9] * m[9] + m[10] * m[10]));
  var rotZInRadians = Math.atan2(m[4], m[0]);

  obj.pitch = rotYInRadians;
  obj.yaw = rotXInRadians;
  obj.parent = newParent;
};

var newParent = camera.parent == a ? b : a;
reparentObject(camera, newParent); 
```

# three.js - Three.js：CircleGeometry 的 vertexNormals 在 r57 上看起来是相反的

> ID：15871512
> 
> 赞同：0
> 
> 时间：2013-04-08T04:51:02.597
> 
> 标签：three.js

CircleGeometry 的 VertexNormals 看起来是相反的。如果我使用 computeVertexNormals()，它是固定的。我正在使用 r57 并通过 Firefox19 和 IE9+ChromeFrame26 确认。

如果已经报告，请忽略它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T06:03:32.177

确认的。`CircleGeometry`three.js r.57 中的顶点法线和 UV不正确。

在 r.58dev 中修复：[https ://github.com/mrdoob/three.js/pull/3279](https://github.com/mrdoob/three.js/pull/3279)

# r - R 中的摘要函数是否适合匿名参与者标识符？

> ID：15871522
> 
> 赞同：15
> 
> 时间：2013-04-08T04:52:09.027
> 
> 标签：r

我经常对人类参与者进行研究。由于各种原因，我的初步标识符有时是降低数据匿名性的信息的组合（例如，我可能会连接一个字符串，其中包括完成日期和时间、IP 地址以及参与者提供的一些信息）。

因此，如果要以某种形式共享数据，则需要从初始 ID 创建一个经过清理的 ID。清理后的 ID 需要去除此类信息。R 中的一个简单方法就是分配连续的数字（例如， data.frame 在`df$id <- seq(nrow(df))`哪里`df`）。但是，如果在研究的初始阶段收集更多数据或重新使用行，这可能会导致问题。即，每次更新原始数据集时，分配给给定参与者的清理后的 ID 可能会有所不同。这反过来可能会破坏对已清理数据集的后续分析，例如，可能已根据已清理 ID 过滤了案例。

因此，我考虑使用[package](http://rss.acs.unt.edu/Rdoc/library/digest/html/digest.html)[`digest`中的函数`digest`](http://rss.acs.unt.edu/Rdoc/library/digest/html/digest.html)创建哈希。

```
df$id <- sapply(df$raw_id, digest) 
```

这似乎会导致一种从原始标识符到已清理标识符的可靠方法，但对于仅拥有已清理标识符的任何人来说，获取原始标识符是不可能的。

但是，鉴于我对`digest`函数和散列一般都是新手，我想问：

*   是否`digest`适合剥离识别信息的 ID？
*   `digest`用于此目的是否有任何问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-08T06:53:13.650

我从上面的评论中学到了很多有用的东西。这个答案旨在提炼这些评论。

出于匿名研究参与者标识符的目的，散列存在两个问题：

*   **重复 ID**：这似乎只是一个理论上的问题，而不是一个实际问题（尤其是如果您使用 sha1）。但我很高兴得到纠正。
*   **缺乏匿名性**：如果您知道散列算法，并且您知道 id 格式并且您知道构成 id 的确切信息，那么您将能够确定哪个参与者与该信息匹配。在许多不共享格式、不知道参与者信息或 ID 使用几乎不知道的信息的情况下，这真的不是问题。尽管如此，向 ID 添加一些密码文本似乎是防止此问题成为问题的简单解决方案。

因此，总结一下我收集的建议。

```
library(digest)
hashed_id <- function(x, salt) {
    y <- paste(x, salt)
    y <- sapply(y, function(X) digest(X, algo="sha1"))
    as.character(y)
}

mydata$id <- hashed_id(mydata$raw_id, "somesalt1234") 
```

# apache - Apache Synapse 自定义 Mediator 执行系统命令

> ID：15871524
> 
> 赞同：0
> 
> 时间：2013-04-08T04:52:31.277
> 
> 标签：apache, wso2, wso2esb, synapse

我在 apache synapse 中创建了一个自定义调解器来调用一些系统命令，例如 java -jar，执行 shell 脚本等。但是我没有运气，我尝试了这些代码：

进程进程=runtime.exec("touch /opt/FILE.txt");

和

进程 p = runtime.exec(new String[]{"java","-jar","/opt/MyMediator.jar"});

当我创建 jar 并手动运行 jar 时，它们都是可运行的，但是当我将它部署到 synapse 库时，它不会工作。那么有人可以告诉我如何正确地做到这一点吗？

谢谢，

# java - Java ImageIcons 和动作监听器

> ID：15871530
> 
> 赞同：1
> 
> 时间：2013-04-08T04:52:56.340
> 
> 标签：java, swing, actionlistener, mouselistener, imageicon

我正在创建一个简单的游戏，其中一个人点击图像，分数增加一。看起来很简单，对吧？这是一个问题 - 图像将部分隐藏在其他图像后面！

目前，我正在使用几个 imageIcon 来设置我的场景。例如，我的前景有一个图像“foreground.png”，我的背景是“background.png”，而隐藏在两者之间的图像是“hiding.png”。

我的第一个想法是简单地获取 imageIcon 隐藏的坐标，将 height() 和 width() 添加到它们，并创建一个仅在该指定区域中工作的鼠标侦听器。但是，这会给我一个矩形供用户单击，这会破坏隐藏对象的目的（有人可以单击前景后面图形的刚性边界）。

**您对如何使鼠标动作侦听器仅在 imageIcon 的 VISIBLE 像素上工作有任何建议吗？**是的，我知道动作侦听器只能应用于组件（例如按钮），但“按钮”并没有为这个项目做我想要的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T05:18:07.577

**示例 1**

这基本上在 a 上使用了一系列`JLabel`s `JLayeredPane`。每个标签都有自己的鼠标侦听器，当您将鼠标悬停在它上面时，它会变成红色。但是，如果上面有标签，它不会响应鼠标事件......

![在此处输入图像描述](https://i.stack.imgur.com/k0kl7.png)

```
import java.awt.AlphaComposite;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.image.BufferedImage;
import java.io.File;
import javax.imageio.ImageIO;
import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JLayeredPane;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class ClickMyImages {

    public static void main(String[] args) {
        new ClickMyImages();
    }

    public ClickMyImages() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JLayeredPane {

        public TestPane() {
            try {
                BufferedImage img1 = ImageIO.read("/Image1");
                BufferedImage img2 = ImageIO.read("/Image2");
                BufferedImage img3 = ImageIO.read("/Image3");
                BufferedImage img4 = ImageIO.read("/Image4");
                BufferedImage img5 = ImageIO.read("/Image5");

                JLabel label1 = new ClickableLabel(new ImageIcon(img1));
                JLabel label2 = new ClickableLabel(new ImageIcon(img2));
                JLabel label3 = new ClickableLabel(new ImageIcon(img3));
                JLabel label4 = new ClickableLabel(new ImageIcon(img4));
                JLabel label5 = new ClickableLabel(new ImageIcon(img5));

                Dimension masterSize = getPreferredSize();

                Dimension size = label1.getPreferredSize();
                label1.setBounds((masterSize.width - size.width) / 2, (masterSize.height - size.height) / 2, size.width, size.height);
                Point masterPoint = label1.getLocation();
                size = label2.getPreferredSize();
                label2.setBounds(
                        masterPoint.x - (size.width / 2), 
                        masterPoint.y - (size.height  / 2), 
                        size.width, size.height);
                size = label3.getPreferredSize();
                label3.setBounds(
                        masterPoint.x + (size.width / 2), 
                        masterPoint.y - (size.height  / 2), 
                        size.width, size.height);
                size = label4.getPreferredSize();
                label4.setBounds(
                        masterPoint.x - (size.width / 2), 
                        masterPoint.y + (size.height  / 2), 
                        size.width, size.height);
                size = label5.getPreferredSize();
                label5.setBounds(
                        masterPoint.x + (size.width / 2), 
                        masterPoint.y + (size.height  / 2), 
                        size.width, size.height);

                add(label1);
                add(label2);
                add(label3);
                add(label4);
                add(label5);

            } catch (Exception e) {
                e.printStackTrace();
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(800, 800);
        }
    }

    // This is for demonstration purposes only!
    public class ClickableLabel extends JLabel {

        private boolean isIn = false;

        public ClickableLabel(Icon image) {
            super(image);
            addMouseListener(new MouseAdapter() {
                @Override
                public void mouseEntered(MouseEvent e) {
                    isIn = true;
                    repaint();
                }

                @Override
                public void mouseExited(MouseEvent e) {
                    isIn = false;
                    repaint();
                }
            });
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (isIn) {
                Graphics2D g2d = (Graphics2D) g.create();
                g2d.setComposite(AlphaComposite.SrcOver.derive(0.5f));
                g2d.setColor(Color.RED);
                g2d.fillRect(0, 0, getWidth(), getHeight());
                g2d.dispose();
            }
        }
    }
} 
```

**示例 2**

此示例使用该`paintComponent`方法来渲染图像。它检查鼠标点处图像的像素 alpha 以确定鼠标事件是否应该通过。

我对 alpha 值的使用有点严格`255`，但您可以根据需要稍微软化它（例如 225 之类的东西）...

我已经对图层进行了硬编码，以便树始终位于松鼠上方，但是`List`按照您希望它们出现的顺序添加所有图像并简单地沿着列表运行直到您获得成功，这并不难。

![在此处输入图像描述](https://i.stack.imgur.com/mNkI0.png)

```
import java.awt.AlphaComposite;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Composite;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.Rectangle;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class ClickMyDrawnImages {

    public static void main(String[] args) {
        new ClickMyDrawnImages();
    }

    public ClickMyDrawnImages() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private BufferedImage tree;
        private BufferedImage squirrel;
        private BufferedImage mouseOver;

        public TestPane() {
            try {
                tree = ImageIO.read(new File("Tree.png"));
                squirrel = ImageIO.read(new File("Squirrel.png"));
            } catch (IOException exp) {
                exp.printStackTrace();
            }
            addMouseMotionListener(new MouseAdapter() {
                @Override
                public void mouseMoved(MouseEvent e) {
                    if (withinTree(e.getPoint())) {
                        mouseOver = tree;
                    } else if (withinSquirrel(e.getPoint())) {
                        mouseOver = squirrel;
                    } else {
                        mouseOver = null;
                    }
                    repaint();
                }
            });
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        protected boolean withinTree(Point p) {
            return withinBounds(p, getTreeBounds(), tree);
        }

        protected boolean withinSquirrel(Point p) {
            return !withinBounds(p, getTreeBounds(), tree) && withinBounds(p, getSquirrelBounds(), squirrel);
        }

        protected Rectangle getTreeBounds() {
            int width = getWidth();
            int height = getHeight();

            int x = (width - tree.getWidth()) / 2;
            int y = (height - tree.getHeight()) / 2;

            return new Rectangle(x, y, tree.getWidth(), tree.getHeight());
        }

        protected Rectangle getSquirrelBounds() {
            Rectangle bounds = getTreeBounds();

            return new Rectangle(
                    bounds.x - (squirrel.getWidth() / 4),
                    (getHeight() - squirrel.getHeight()) / 2,
                    squirrel.getWidth(), squirrel.getHeight());
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();
            int width = getWidth();
            int height = getHeight();

            int x = (width - tree.getWidth()) / 2;
            int y = (height - tree.getHeight()) / 2;

            g.drawImage(highlight(squirrel), x - (squirrel.getWidth() / 4), (height - squirrel.getHeight()) / 2, this);
            g2d.drawImage(highlight(tree), x, y, this);

            g2d.dispose();
        }

        protected BufferedImage highlight(BufferedImage img) {
            BufferedImage highlight = img;
            if (img.equals(mouseOver)) {
                highlight = new BufferedImage(img.getWidth(), img.getHeight(), BufferedImage.TYPE_INT_ARGB);
                Graphics2D g2d = highlight.createGraphics();
                g2d.setColor(Color.RED);
                g2d.drawImage(img, 0, 0, this);

                g2d.setComposite(AlphaComposite.SrcAtop.derive(0.5f));
                g2d.fillRect(0, 0, highlight.getWidth(), highlight.getHeight());
                g2d.dispose();
            }
            return highlight;
        }

        protected boolean withinBounds(Point p, Rectangle bounds, BufferedImage image) {
            boolean withinBounds = false;
            if (bounds.contains(p)) {
                int x = p.x - bounds.x;
                int y = p.y - bounds.y;
                int pixel = image.getRGB(x, y);
                int a = (pixel >> 24) & 0xFF;
                // could use a little weighting, so translucent pixels can be effected
                if (a == 255) {
                    withinBounds = true;
                }
            }
            return withinBounds;
        }
    }
} 
```

# asp.net - 可编辑的网格视图不起作用

> ID：15871531
> 
> 赞同：4
> 
> 时间：2013-04-08T04:52:56.637
> 
> 标签：asp.net, vb.net, gridview

我有一个可编辑的网格视图，用户只需按链接按钮即可编辑每一行。我收到一个错误，它停止了我的工作。请帮我。

**HTML**

```
<asp:GridView ID="gvList" runat="server" class="gv" CellPadding="2"  
Font-Names="Calibri" ForeColor="#333333"
Font-Size="16px" Width="500px" AutoGenerateColumns="true" OnRowCancelingEdit="gvList_RowCancelingEdit"
OnRowEditing="gvList_RowEditing" OnRowUpdating="gvList_RowUpdating">
     <Columns>
         <asp:TemplateField HeaderText="User Name" HeaderStyle-ForeColor="White"  HeaderStyle-Font-Bold="true" ItemStyle-Width="170px">
         <ItemTemplate>
              <asp:Label runat="server" ID="lblUsername" Text='<%# Eval("cUserName") %>'></asp:Label>
         </ItemTemplate>
         <EditItemTemplate>
              <asp:TextBox ID="Editusername" runat="server" Text='<%# Eval("cUserName") %>'></asp:TextBox>
         </EditItemTemplate>

         </asp:TemplateField>
         <asp:TemplateField HeaderText="Dept User" HeaderStyle-ForeColor="White"  HeaderStyle-Font-Bold="true" ItemStyle-Width="170px">
         <ItemTemplate>
              <asp:Label runat="server" ID="lblDept" Text='<%#  iif(Eval("lDeptUser"),"Yes","No")  %>'></asp:Label>
         </ItemTemplate>
         <EditItemTemplate>
              <asp:RadioButtonList ID="RadioButtonList1" runat="server" >
              <asp:ListItem>Yes</asp:ListItem>
              <asp:ListItem>No</asp:ListItem>
              </asp:RadioButtonList>
          </EditItemTemplate>
          </asp:TemplateField>

          <asp:TemplateField HeaderText="Actions" HeaderStyle-ForeColor="White" HeaderStyle-Font-Bold="true" ItemStyle-Width="160px">
          <ItemTemplate>
              <asp:LinkButton  ID="btnedit" CommandName="Edit" runat="server" Text="Edit" />
              <asp:LinkButton ID="btnDelete" CommandName="Delete" runat="server" Text="Delete" />
          </ItemTemplate>
          <EditItemTemplate>
               <asp:LinkButton ID="btnUpdate" CommandName="Update" runat="server" Text="Update" />
               <asp:LinkButton  ID="btnCancel" CommandName="Cancel" runat="server" Text="Cancel" />
           </EditItemTemplate>
                    <HeaderStyle Font-Bold="True" ForeColor="White"></HeaderStyle>
                    <ItemStyle Width="120px"></ItemStyle>
                </asp:TemplateField>
            </Columns>
                <EmptyDataTemplate>
                    No records available
                </EmptyDataTemplate>
                <HeaderStyle BackColor="#808380" Font-Bold="True" ForeColor="White" VerticalAlign="Top" />
                <EditRowStyle BackColor="#2461BF" />
                <AlternatingRowStyle BackColor="#E3E3E3" />
            </asp:GridView> 
```

**VB**

```
Protected Sub gvList_RowUpdating(sender As Object, e As System.Web.UI.WebControls.GridViewUpdateEventArgs) Handles gvList.RowUpdating

    Dim oldname = DirectCast(gvList.Rows(e.RowIndex).FindControl("lblUsername"), Label)
    Dim username As String = DirectCast(gvList.Rows(e.RowIndex).FindControl("Editusername"), TextBox).Text
    Dim tempUser = DirectCast(gvList.Rows(e.RowIndex).FindControl("RadioButtonList1"), RadioButtonList).SelectedIndex
    Dim query As String = "Update Intranet.dbo.Gn_ISCoordinators SET cUserName=@uname" +
                          ",lDeptUser=@dept WHERE cUserName=@oldName"

    Using con = New SqlConnection(ConfigurationManager.ConnectionStrings("IntranetConnectionString").ConnectionString)
        con.Open()
        Dim cmd = New SqlCommand(query, con)
        cmd.Parameters.AddWithValue("@uname", username)
        cmd.Parameters.AddWithValue("@dept", Convert.ToByte(tempUser))
        cmd.Parameters.AddWithValue("@oldname", oldname)
        cmd.ExecuteNonQuery()
    End Using

    gvList.EditIndex = -1
    GetList()
End Sub 
```

问题在于`cmd.ExecuteNonQuery()`它给了我`The parameterized query '(@uname nvarchar(7),@dept tinyint,@oldname nvarchar(4000))Update' expects the parameter '@oldname', which was not supplied.`

我的查询有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T06:05:16.500

尝试这个

```
Dim oldname as Label =gvList.Rows(e.RowIndex).FindControl("lblUsername")
    Dim username as TextBox = gvList.Rows(e.RowIndex).FindControl("Editusername")
    Dim tempUser as RadioButtonList = DirectCast(gvList.Rows(e.RowIndex).FindControl("RadioButtonList1"), RadioButtonList).SelectedIndex  

   Dim query As String = "Update Intranet.dbo.Gn_ISCoordinators SET cUserName=@uname" +
                              ",lDeptUser=@dept WHERE cUserName=@oldname"
Using con = New SqlConnection(ConfigurationManager.ConnectionStrings("IntranetConnectionString").ConnectionString)
        con.Open()
        Dim cmd = New SqlCommand(query, con)
        cmd.Parameters.AddWithValue("@uname", username.Text)
        cmd.Parameters.AddWithValue("@dept", Convert.ToByte(tempUser.SelectedIndex))
        cmd.Parameters.AddWithValue("@oldname", oldname.Text)
        cmd.ExecuteNonQuery()
    End Using 
```

您已经通过在@oldName 中使用“N”大写来更改参数名称，因此

你得到那个错误

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T06:01:07.400

试试这个
代码看起来不错，但是`command.commandtype = commandtype.text`缺少这行可能就是问题所在。

同样，在传递参数 Addwithvalue 时，也可以在其他控件`username.text`上使用相同的参数`username`

```
Dim oldname As Label = DirectCast(gvList.Rows(e.RowIndex).FindControl("lblUsername"), Label)
Dim username As TextBox = DirectCast(gvList.Rows(e.RowIndex).FindControl("Editusername"), TextBox).Text
Dim tempUser As RadioButton = DirectCast(gvList.Rows(e.RowIndex).FindControl("RadioButtonList1"), RadioButtonList).SelectedIndex
Dim query As String = "Update Intranet.dbo.Gn_ISCoordinators SET cUserName=@uname, lDeptUser=@dept WHERE cUserName=@oldName"

Using con = New SqlConnection(ConfigurationManager.ConnectionStrings("IntranetConnectionString").ConnectionString)
    con.Open()
    Dim cmd = New SqlCommand(query, con)
    cmd.commandtype = commandtype.text  
    cmd.Parameters.AddWithValue("@uname", username.text)
    cmd.Parameters.AddWithValue("@dept", Convert.ToByte(tempUser.selectedvalue))
    cmd.Parameters.AddWithValue("@oldname", oldname.text)
    cmd.ExecuteNonQuery()
End Using

gvList.EditIndex = -1
GetList() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T05:37:36.187

你的参数有错别字

```
 Dim query As String = "Update Intranet.dbo.Gn_ISCoordinators SET cUserName=@uname" +
                      ",lDeptUser=@dept WHERE cUserName=@oldName" 
```

你有

```
 cmd.Parameters.AddWithValue("@oldname", oldname) 
```

是不是应该

```
cmd.Parameters.AddWithValue("@oldName", oldname) 
```

有大小写错误。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-14T14:44:23.123

对不起，我没有足够的代表发表评论，所以我必须在这里回答......

为什么要将标签转换为标签并尝试将其用作字符串？：

```
Dim oldname as string = DirectCast(gvList.Rows(e.RowIndex).FindControl("lblUsername"), Label).text 
```

似乎更合适。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-17T03:43:48.107

我不确定这一点，但可能是因为当您尝试点击编辑按钮并且 gridview 的模式处于编辑模式时，lblUsername 标签将更改为 Editusername 文本框。所以我建议您尝试放置一个全局变量字符串，它将在更新或编辑之前存储 lblUsername 的数据..

# php - PHP 的邮件功能似乎删除了换行符和制表符

> ID：15871541
> 
> 赞同：1
> 
> 时间：2013-04-08T04:54:02.670
> 
> 标签：php, email, newline, line-breaks

我有这个帮助类，我用它来通过 PHP 发送电子邮件：

```
<?php

class Mailsend {

    public $from;
    public $to;
    public $subject;
    public $message;

    public static function mail() {
        return new Mailsend();
    }

    public function from($from) {
        $this->from = $from;
        return $this;
    }

    public function fromName($fromName) {
        $this->fromName = $fromName;
        return $this;
    }

    public function to($to) {
        $this->to = $to;
        return $this;
    }

    public function subject($subject) {
        $this->subject = $subject;
        return $this;
    }

    public function message($message) {
        $this->message = $message;
        return $this;
    }

    public function send() {
        $mailFrom = $this->from;
        $mailFromName = $this->fromName;
        $mailTo = $this->to;
        $mailSubject = $this->subject;

        $mailSignature = "\n\n-- \n";
        $mailSignature .= "Vaš, Format.ba - Primjenjene Vještine.\n";
        $mailSignature .= "Za više informacija posjetite nas na: http://www.format.ba/\n";

        $mailBody = $this->message . "\n";
        $mailBody .= $mailSignature;

        $mailHeader = "From: $mailFromName <$mailFrom>\r\n";
        $mailHeader .= "MIME-Version: 1.0\r\n";
        $mailHeader .= "Content-type: text/html; charset=UTF-8\r\n";
        $mailHeader .= "Reply-To: $mailFromName <$mailFrom>\r\n";
        $mailHeader .= "X-Mailer: Mailsend.php\r\n";
        $mailHeader .= "X-Sender-IP: {$_SERVER['REMOTE_ADDR']}\r\n";
        $mailHeader .= "Bcc: $mailFromName <$mailFrom>\r\n";

        $mailParams = "-f$mailFrom";

        $mailBody = str_replace('  ', '', $mailBody);

        return mail($mailTo, $mailSubject, $mailBody, $mailHeader, $mailParams);
    }

    public function valid($email) {
        if (!preg_match("/^[^@]{1,64}@[^@]{1,255}$/", $email)) {
            return false;
        }
        $email_array = explode("@", $email);
        $local_array = explode(".", $email_array[0]);
        for ($i = 0; $i < sizeof($local_array); $i++) {
            if (!preg_match("/^(([A-Za-z0-9!#$%&'*+\/=?^_`{|}~-][A-Za-z0-9!#$%&'*+\/=?^_`{|}~\.-]{0,63})|(\"[^(\\|\")]{0,62}\"))$/", $local_array[$i])) {
                return false;
            }
        }
        if (!preg_match("/^\[?[0-9\.]+\]?$/", $email_array[1])) {
            $domain_array = explode(".", $email_array[1]);
            if (sizeof($domain_array) < 2) {
                return false;
            }
            for ($i = 0; $i < sizeof($domain_array); $i++) {
                if (!preg_match("/^(([A-Za-z0-9][A-Za-z0-9-]{0,61}[A-Za-z0-9])|([A-Za-z0-9]+))$/", $domain_array[$i])) {
                    return false;
                }
            }
        }

        return true;
    }

} 
```

它有效，我编写了它，因此它易于使用，例如：

```
$message = "Hello, " . $model->fullname . ",

                        Welcome to our Website, Domain.tdl. You are now able to use all of our services which we provide here.

                        Visit: www.domain.tdl - for more information and news about our services!

                        Greets!";

Mailsend::mail()->
    from('info@domain.tdl')->
    fromName('Domain.tdl - Our Website')->
    to('someother@email.tdl')->
    subject('Welcome to Domain.tdl - Our Website')->
    message(trim($message))->send(); 
```

正如您从这个确切的示例中看到的那样，有很多空格是由“空格”而不是制表符缩进的。

当我将该消息发送到我的一封电子邮件时，我得到以下输出：

> 您好，Zlatan 欢迎访问我们的网站 Domain.tdl。您现在可以使用我们在此处提供的所有服务。访问：www.domain.tdl - 了解有关我们服务的更多信息和新闻！问候！

它只是以某种方式剥离了所有换行符和长度超过两个的空格，并将它们全部合并在一起，所以我失去了我最初想要的电子邮件格式。

我认为这行`Mailsend`可能会导致问题：

```
$mailBody = str_replace('  ', '', $mailBody); 
```

但事实并非如此，到目前为止，我还没有找到任何原因导致这种情况发生并且无法阻止它继续进行。

有没有人过期了类似的东西？我有可能在自己的代码中遗漏了一些东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T04:57:25.320

使用这个`<br>`

```
$message = "Hello, " . $model->fullname . "<br>,

                    Welcome to our Website, Domain.tdl. You are now able to use all of our services which we provide here.<br>

                    Visit: www.domain.tdl - for more information and news about our services!<br>

                    Greets!"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T05:04:11.727

使用`<br />`而不是`\r\n`.

添加此标头以使您的内容 HTML 格式化：

```
Content-type: text/html; charset=UTF-8 
```

当您要插入标签时，请改用多个`&nbsp;`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T05:04:22.680

您正在使用以下标头：

```
$mailHeader .= "Content-type: text/html; charset=UTF-8\r\n"; 
```

但即将发送纯文本电子邮件。将其更改为

```
$mailHeader .= "Content-type: text/plain; charset=UTF-8\r\n"; 
```

或将您的电子邮件格式化为 html

# database - rake db:migrate 没有拾取我的迁移文件中的所有字段

> ID：15871548
> 
> 赞同：0
> 
> 时间：2013-04-08T04:54:35.600
> 
> 标签：database, ruby-on-rails-3.2, dbmigrate

我将是第一个承认我可能做错了或工作流程不佳的人，但我正在尝试构建我的第一个 rails 应用程序。它在 3 中的工作方式与我在 rails 1 中的工作方式不同（上次我对此进行了讨论）。我记得定义我的模型并以此为基础构建数据库。所以我这样做了：

`$script/generate scaffold post name:string address:text dob:date desire:text interests:text hobby:text signature:text`

然后，它会构建一些文件（视图控制器模型等），但它会构建迁移文件。我有一个复杂的表（上面只是一个例子），我不会输入所有的字段。所以我想我可以做类似上面的事情，然后转到创建的迁移创建文件并添加其余的 myfields（因为该编辑器比命令行方式或从 IDE 更好，但使用实际的源编辑器）并做一个 rake db:migrate 并获取包含所有字段的数据库。并让它重新生成脚手架等……它似乎没有这样做，myworkflow 很差吗？

# java - Java 素数

> ID：15871554
> 
> 赞同：0
> 
> 时间：2013-04-08T04:55:45.823
> 
> 标签：java, primes

我正在尝试制作一个素数列表。我已经对其进行了编码，但它只告诉我 1 - 100 的素数是 1。我不知道为什么会这样。我也想为它制作一个JFrame。

```
import javax.swing.JOptionPane;

public class ProgrammingAssignment7 {
    public static void main(String[] args) {
        //Scanner Scan = new Scanner (System.in);
        //DECLARE VARIABLES

        int x = 1;
        int i = 1;
        int iNumber = 1;
        boolean bNotPrime = false;
        boolean bIsPrime = true;
        int iNumberToTest;
        int iPrimeCheck;
        int iCounter;
        int iResult = 1;
        int iFact = 1;
        int iLimit = 100;
        String OutputStr = null;

        System.out.println("Prime numbers between 1 and " + iLimit);

        //loop through the numbers one by one
        for(i=1; i < 100; i++) {
            bIsPrime = true;

            //check to see if the number is prime
            for(int j = 2; j < i ; j++) {
                if(i % j == 0) {
                    bIsPrime = false;
                    break;
                }
            }
        }

        // print the number
        if(bIsPrime) {
            OutputStr = "The Prime Numbers of 1 - 100 are: " + i + "\n";
        }

        JOptionPane.showMessageDialog(null, OutputStr, "PRIME NUMBERS", JOptionPane.INFORMATION_MESSAGE);

        //System.out.print(i + "\n" );
        System.exit(0);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T04:58:21.663

您在 for 循环中调用 system.exit(0) 。这样它将在第一次迭代后终止程序。删除该行，然后尝试运行程序。它会给你正确的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:55:24.417

除了修复你的代码，你还应该修复你的算法。您正在使用一种称为试用除法的算法，随着您的限制增加，该算法会非常缓慢。相反，您应该使用一种称为埃拉托色尼筛法的算法，它是在两千多年前发明的，至今仍被广泛使用。这是埃拉托色尼筛的简单版本的伪代码；我把它留给你翻译成Java：

```
function primes(n)
    sieve := makeArray(2..n, True)
    for p from 2 to n step 1
        if sieve[p]
           output p
           for i from p * p to n step p
               sieve[i] := False 
```

Eratosthenes 的算法首先列出从 2 到最大所需素数*n*的数字列表，然后进入迭代阶段。在每一步中，确定尚未考虑的最小未交叉数，并从其平方开始，删除该数的所有倍数；重复此操作，直到没有未交叉的数字未被考虑。所有未交叉的数字都是素数。内循环开始是`p * p`因为任何较小的复合材料必须已经被较小的素数划掉了。

例如，要找到小于 30 的素数，首先报告 2 是素数，然后删除 4、6、8、10、12、14、16、18、20、22、24、26 和 28。然后 3 是未交叉的，所以报告为素数并划掉 9、12、15、18、21、24 和 27。由于 4 已划掉，下一个未划线的数是 5，因此将其报告为素数并划掉 25。最后，由于 7 * 7 大于 30，内循环停止执行，外循环收集其余素数：7、11、13、17、19、23 和 29。

如果您对使用素数编程感兴趣，我在我的博客上谦虚地推荐[一篇文章](http://programmingpraxis.com/essays)，其中提供了埃拉托色尼筛法的优化版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T05:01:59.347

在内部循环中，迭代到 SQRT(N) 而不是 N 就足够了。它可以减少一点运行时间。

```
for(int j = 2; j < Math.sqrt(i) ; j++) {

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-19T23:19:03.817

用于写出 1-100 的素数的智能算法（以及 1- [你想要多少] - 如果你将*100*更改为另一个数字）。素数只能被两个数整除：1 和它本身，所以*k*必须等于或小于 2。

```
for (int i=1; i<=100; i++) {
        int k = 0;
        for (int j=1; j<=i; j++ ) {
            if (i % j == 0) {
                k++;
            }
        }
        if (k <= 2) {
            System.out.println(i);
        }
    } 
```

# java - 仅在 onCreate 值分配发生

> ID：15871561
> 
> 赞同：0
> 
> 时间：2013-04-08T04:56:24.040
> 
> 标签：java, android

在我的代码中，我为两个数据选择器设置了侦听器，并为提交设置了侦听器。当我运行应用程序时，我第一次可以使用数据选择器分配值，但是当我第二次设置尝试时，没有发生值分配。我的代码有什么问题？

```
public class MainActivity extends Activity {

    private GraphicalView mChart;
    // private DatePicker dpResult;
    private Button submit;
    private Button btnChangeDate;
    private Button btnChangeDatetwo;
    static final int DATE_DIALOG_ID = 100;
    static final int DATE_DIALOG_ID_TWO = 101;
    private int year;
    private int month;
    private int day;
    private int year_end;
    private int month_end;
    private int day_end;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // requestWindowFeature(Window.FEATURE_NO_TITLE);
        // getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.activity_main);
        // openChart();
        // openCharttwo();
        //openChartthree();

        addListenerOnButton();// listeners for calender events
        addListenerOnButtontwo();
        addListnerOnSubmitButton();

    }

    private void openChartthree(Date startdateValue,Date enddateValue) {
        String val;
        // Date[] val2 = null;//this holds dates
        String val3;
        String val32;
        String val33;
        String val34;

        // Date[] date;
        // Date[] datearray = null;

        /*
         * GregorianCalendar startdate = new GregorianCalendar(2011,11,28,
         * 0,00); GregorianCalendar enddate = new GregorianCalendar(2012,3,4,
         * 0,00);
         */

        val = this.getString(R.string.dateCollection);
        val3 = this.getString(R.string.values);
        val32 = this.getString(R.string.values2);// second graph
        val33 = this.getString(R.string.values3);// third graph
        val34 = this.getString(R.string.values4);// fourth chart

        String[] newdate = val.split(",");

        String[] values = val3.split(",");
        String[] values2 = val32.split(",");// spliting second values
        String[] values3 = val33.split(",");// spliting third values
        String[] values4 = val34.split(",");// spliting fourth values

        Double[] results = new Double[values.length];
        Double[] results2 = new Double[values.length];// saving second values
                                                        // array in int array
        Double[] results3 = new Double[values.length];// saving third values
                                                        // array in int array
        Double[] results4 = new Double[values.length];// saving third values
                                                        // array in int array
        // converting string to integers
        // int[] results2 = results;

        for (int i = 0; i < values.length; i++) {
            try {
                // String temp = values[0];
                // int itest = Integer.parseInt(temp);
                results[i] = Double.parseDouble(values[i]);
                results2[i] = Double.parseDouble(values2[i]);
                results3[i] = Double.parseDouble(values3[i]);
                results4[i] = Double.parseDouble(values4[i]);

            } catch (NumberFormatException nfe) {
            }
            ;
        }

        // Creating TimeSeries for Visits
        TimeSeries visitsSeries = new TimeSeries("Upper band");

        // Creating TimeSeries for Views
        TimeSeries viewsSeries = new TimeSeries("Price");

        // Creating TimeSeries for Views2
        TimeSeries viewsSeries2 = new TimeSeries("Lower band");

        // Creating TimeSeries for products
        TimeSeries products = new TimeSeries("Moving Average");

        // Adding data to Visits and Views Series

        for (int i = 0; i < newdate.length; i++) {
            try {
                // String dt = newdate[i];

                // Date datePointer = new SimpleDateFormat("yyyy/MM/dd",
                // Locale.ENGLISH).parse(dt);
                SimpleDateFormat formatter = new SimpleDateFormat(
                        "MM/dd/yyyy k:mm");
                Date datePointer = formatter.parse(newdate[i]);

                if (startdateValue.before(datePointer)
                        && enddateValue.after(datePointer)) {
                    visitsSeries.add(datePointer, results[i]);
                    viewsSeries.add(datePointer, results2[i]);
                    viewsSeries2.add(datePointer, results3[i]);
                    products.add(datePointer, results4[i]);
                }
            } catch (Exception e) {

            }

        }

        // Creating a dataset to hold each series
        XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();

        // Adding Visits Series to the dataset
        dataset.addSeries(visitsSeries);

        // Adding Visits Series to dataset
        dataset.addSeries(viewsSeries);

        // Adding Visits Series to dataset
        dataset.addSeries(viewsSeries2);

        // Adding products Series to dataset
        dataset.addSeries(products);

        // Creating XYSeriesRenderer to customize productsSeries
        XYSeriesRenderer productsRenderer = new XYSeriesRenderer();
        productsRenderer.setColor(Color.GREEN);
        productsRenderer.setPointStyle(PointStyle.POINT);
        productsRenderer.setFillPoints(true);
        productsRenderer.setLineWidth(1);
        productsRenderer.setDisplayChartValues(true);

        // Creating XYSeriesRenderer to customize visitsSeries
        XYSeriesRenderer visitsRenderer = new XYSeriesRenderer();
        visitsRenderer.setColor(Color.RED);
        // visitsRenderer.setPointStyle(PointStyle.);
        visitsRenderer.setFillPoints(true);
        visitsRenderer.setLineWidth(1);
        visitsRenderer.setDisplayChartValues(true);

        // Creating XYSeriesRenderer to customize viewsSeries
        XYSeriesRenderer viewsRenderer = new XYSeriesRenderer();
        viewsRenderer.setColor(Color.WHITE);
        // viewsRenderer.setPointStyle(PointStyle.CIRCLE);
        viewsRenderer.setFillPoints(true);
        viewsRenderer.setLineWidth(1);
        viewsRenderer.setDisplayChartValues(true);

        // Creating XYSeriesRenderer to customize viewsSeries
        XYSeriesRenderer viewsRenderer2 = new XYSeriesRenderer();
        viewsRenderer2.setColor(Color.BLUE);
        // viewsRenderer2.setPointStyle(PointStyle.CIRCLE);
        viewsRenderer2.setFillPoints(true);
        viewsRenderer2.setLineWidth(1);
        viewsRenderer2.setDisplayChartValues(true);

        // Creating a XYMultipleSeriesRenderer to customize the whole chart
        XYMultipleSeriesRenderer multiRenderer = new XYMultipleSeriesRenderer();

        // multiRenderer.setChartTitle("Visits vs Views Chart");
        multiRenderer.setXTitle("Days");
        multiRenderer.setYTitle("Count");
        multiRenderer.setZoomButtonsVisible(true);

        // Adding visitsRenderer and viewsRenderer to multipleRenderer
        // Note: The order of adding dataseries to dataset and renderers to
        // multipleRenderer
        // should be same
        multiRenderer.addSeriesRenderer(visitsRenderer);
        multiRenderer.addSeriesRenderer(viewsRenderer);
        multiRenderer.addSeriesRenderer(viewsRenderer2);
        multiRenderer.addSeriesRenderer(productsRenderer);
        // Getting a reference to LinearLayout of the MainActivity Layout
        LinearLayout chartContainer = (LinearLayout) findViewById(R.id.chart_container);

        // Creating a Time Chart
        mChart = (GraphicalView) ChartFactory.getTimeChartView(
                getBaseContext(), dataset, multiRenderer, "dd-MMM-yyyy");

        multiRenderer.setClickEnabled(true);
        multiRenderer.setSelectableBuffer(10);

        // Setting a click event listener for the graph
        mChart.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Format formatter = new SimpleDateFormat("dd-MMM-yyyy");

                SeriesSelection seriesSelection = mChart
                        .getCurrentSeriesAndPoint();

                if (seriesSelection != null) {
                    int seriesIndex = seriesSelection.getSeriesIndex();
                    String selectedSeries = "Visits";

                    if (seriesIndex == 0)
                        selectedSeries = "Lower bound ";
                    else if (seriesIndex == 1)
                        selectedSeries = "Upperbound";
                    else
                        selectedSeries = "Price";
                    // Getting the clicked Date ( x value )

                    long clickedDateSeconds = (long) seriesSelection
                            .getXValue();
                    Date clickedDate = new Date(clickedDateSeconds);
                    String strDate = formatter.format(clickedDate);

                    // Getting the y value
                    int amount = (int) seriesSelection.getValue();

                    // Displaying Toast Message
                    Toast.makeText(getBaseContext(),
                            selectedSeries + " on " + strDate + " : " + amount,
                            Toast.LENGTH_SHORT).show();
                }
            }
        });

        // Adding the Line Chart to the LinearLayout
        chartContainer.addView(mChart);

        // Toast.makeText(getApplicationContext(), "msg"+newdate,
        // Toast.LENGTH_LONG).show();

    }

    // //////////////////////////////////////////////////////////opencart two
    // ////////////////////////////////

    // ////////////////////////////////////////date selecting code starts from
    // here/////////////////////////////////////////////////////////////////////
    // user can select start and end date via dialog box calender view

    public void addListenerOnButtontwo() {
        final Calendar c = Calendar.getInstance();
        year_end = c.get(Calendar.YEAR);
        month_end = c.get(Calendar.MONTH);
        day_end = c.get(Calendar.DAY_OF_MONTH);

        btnChangeDatetwo = (Button) findViewById(R.id.endate);

        btnChangeDatetwo.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                showDialog(DATE_DIALOG_ID_TWO);
            }
        });

    }

    public void addListenerOnButton() {

        final Calendar c = Calendar.getInstance();
        year = c.get(Calendar.YEAR);
        month = c.get(Calendar.MONTH);
        day = c.get(Calendar.DAY_OF_MONTH);

        btnChangeDate = (Button) findViewById(R.id.startdate);

        btnChangeDate.setOnClickListener(new OnClickListener() {

            @SuppressWarnings("deprecation")
            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                showDialog(DATE_DIALOG_ID);
            }
        });

    }

    @Override
    protected Dialog onCreateDialog(int id) {
        switch (id) {
        case DATE_DIALOG_ID:

            // set date picker as current date
            return new DatePickerDialog(this, datePickerListener, year, month,day);
        case DATE_DIALOG_ID_TWO:

            return new DatePickerDialog(this, datePickerListener_end, year_end, month_end, day_end);
        }
        return null;
    }

    private DatePickerDialog.OnDateSetListener datePickerListener = new DatePickerDialog.OnDateSetListener() {

        // when dialog box is closed, below method will be called.
        public void onDateSet(DatePicker view, int selectedYear,
                int selectedMonth, int selectedDay) {
            year = selectedYear;
            month = selectedMonth +1;
            day = selectedDay;

            // set selected date into textview
            // tvDisplayDate.setText(new StringBuilder().append(month + 1)
            // .append("-").append(day).append("-").append(year)
            // .append(" "));

            Toast.makeText(getApplicationContext(),
                    "msg  " + year + "-" + month + "-" + day,
                    Toast.LENGTH_SHORT).show();

        }
    };
    private DatePickerDialog.OnDateSetListener datePickerListener_end = new DatePickerDialog.OnDateSetListener() {

        // when dialog box is closed, below method will be called.
        public void onDateSet(DatePicker view, int selectedYear,
                int selectedMonth, int selectedDay) {
            year_end = selectedYear;
            month_end = selectedMonth+1;
            day_end = selectedDay;

            // set selected date into textview
            // tvDisplayDate.setText(new StringBuilder().append(month + 1)
            // .append("-").append(day).append("-").append(year)
            // .append(" "));

            // set selected date into datepicker also
            // dpResult.init(year, month, day, null);
            Toast.makeText(getApplicationContext(),
                    "msg" + year_end + "-" + month_end + "-" + day_end,
                    Toast.LENGTH_SHORT).show();
        }
    };

    public void addListnerOnSubmitButton() {
        addListenerOnButton();// listeners for calender events
        addListenerOnButtontwo();

        submit = (Button) findViewById(R.id.button1);

        submit.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub

                StringBuilder sb = new StringBuilder();
                sb.append(year);
                sb.append("/");
                sb.append(month);
                sb.append("/");
                sb.append(day);
                String start=sb.toString();

                StringBuilder sb2 = new StringBuilder();
                sb.append(year_end);
                sb.append("/");
                sb.append(month_end);
                sb.append("/");
                sb.append(day_end);

                String end=sb2.toString();

                Date startdateValue = new Date();
                Date enddateValue = new Date();
                try {

//                  if(year == 0 || year_end == 0){
//                      start="11/2/2011";
//                      end="1/7/2013";
//                  }

                    startdateValue = new SimpleDateFormat("yyyy/MM/dd", Locale.ENGLISH)
                            .parse(start);
                    enddateValue = new SimpleDateFormat("yyyy/MM/dd", Locale.ENGLISH)
                            .parse(end);
                } catch (Exception e) {
                }

                openChartthree(startdateValue, enddateValue);//calling charting method to render, passing start and end dates

            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

请帮助我更正代码。

```
month_end = selectedMonth+1; 
```

我必须将 1 添加到 month_end 变量，因为它总是在 month_end 变量中显示 (month-1)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T05:22:54.587

尝试改变这个 -

```
public void addButtonListenerOnBothButtons(){
    btnChangeDatetwo = (Button) findViewById(R.id.endate);
    btnChangeDate = (Button) findViewById(R.id.startdate);
    submit = (Button) findViewById(R.id.button1);

    btnChangeDatetwo.setOnClickListener(this);      
    btnChangeDate.setOnClickListener(this);
    submit.setOnClickListener(this);
}   

@Override
public void onClick(View arg0) {
switch(arg0.getId()){
    case R.id.endate:       
        final Calendar c = Calendar.getInstance();
        year_end = c.get(Calendar.YEAR);
        month_end = c.get(Calendar.MONTH);
        day_end = c.get(Calendar.DAY_OF_MONTH);

        showDialog(DATE_DIALOG_ID_TWO);

    break;

    case R.id.startdate:
        final Calendar c = Calendar.getInstance();
        year = c.get(Calendar.YEAR);
        month = c.get(Calendar.MONTH);
        day = c.get(Calendar.DAY_OF_MONTH);

        showDialog(DATE_DIALOG_ID);
    break;        

    case R.id.button1:
            // do something when submit button pressed
    break;
  }
} 
```

只需调用一次`addButtonListenerOnBothButtons`方法`onCreate`并将事件处理程序附加到所有三个按钮，而不是使用单独的函数和匿名类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T07:40:15.813

```
LinearLayout chartContainer = (LinearLayout) findViewById(R.id.chart_container);
chartContainer.removeAllViews(); 
```

我找到了解决方案。问题是我每次运行提交代码时都必须删除或重置图表。这可以通过 removeAllViews() 方法来完成。

# mysql - 在有限的数据量中创建具有排名列的视图

> ID：15871564
> 
> 赞同：2
> 
> 时间：2013-04-08T04:56:33.590
> 
> 标签：mysql

所以我有一个结构如下的 MySQL 表：

```
CREATE TABLE `spenttime` {
    `id` int(11) NOT NULL AUTO_INCREMENT,
    `userid` int(11) NOT NULL,
    `serverid` int(11) NOT NULL,
    `time` int(11) NOT NULL,
    `day` int(11) NOT NULL,
    PRIMARY KEY (`id`),
    UNIQUE KEY `dbid_sid_day` (`userid`,`serverid`,`day`)
} 
```

我存储每个注册玩家每天在我的游戏服务器上花费的时间。`time`是花费的时间，以秒为单位，`day`是每天的 unix 时间戳（一天的开始）。我想在我的数据库上创建一个视图，该视图将显示每个用户每周在服务器上花费的时间，但有一列显示该时间的排名，每周对每个服务器都是独立的。例如数据（为了澄清，我将`day`在此示例中使用日期格式 YMD 而不是 unix 时间戳作为列）：

```
INSERT INTO `spenttime` (`userid`, `serverid`, `time`, `day`) VALUES
    (1, 1, 200, '2013-04-01'),
    (1, 1, 150, '2013-04-02'),
    (2, 1, 100, '2013-04-02'),
    (3, 1, 500, '2013-04-04'),
    (2, 2, 400, '2013-04-04'),
    (1, 1, 300, '2013-04-08'),
    (3, 1, 200, '2013-04-08'); 
```

对于 viev 命名的数据`spenttime_week`应该出现：

```
+--------+----------+--------+------------+------+
| userid | serverid |  time  |  yearweek  | rank |
+--------+----------+--------+------------+------+
|     1  |       1  |   350  | '2013-W14' |   2  |
|     2  |       1  |   100  | '2013-W14' |   3  |
|     3  |       1  |   500  | '2013-W14' |   1  |
|     2  |       2  |   400  | '2013-W14' |   1  |
|     1  |       1  |   300  | '2013-W15' |   1  |
|     3  |       1  |   200  | '2013-W15' |   2  |
+--------+----------+--------+------------+------+ 
```

我知道如何生成没有排名的视图，我只有排名列的问题......我怎样才能做到这一点？

//edit Additionaly，此列必须出现在 viev 中，我无法从该视图中生成它，因为我将使用它的应用程序不允许...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-16T20:36:57.427

首先，您需要创建第一个 VIEW 来汇总每个用户在同一周所花费的时间：

```
CREATE VIEW total_spent_time AS
SELECT userid,
       serverid,
       sum(time) AS total_time,
       yearweek(day, 3) as week
FROM spenttime
GROUP BY userid, serverid, week; 
```

然后你可以这样创建你的视图：

```
CREATE VIEW spenttime_week AS
 SELECT
  s1.userid,
  s1.serverid,
  s1.total_time,
  s1.week,
  count(s2.total_time)+1 AS rank
FROM
  total_spent_time s1 LEFT JOIN total_spent_time s2
  ON s1.serverid=s2.serverid
     AND s1.userid!=s2.userid
     AND s1.week = s2.week
     AND s1.total_time<=s2.total_time
GROUP BY  
  s1.userid,
  s1.serverid,
  s1.total_time,
  s1.week
ORDER BY
  s1.week, s1.serverid, s1.userid 
```

请看[这里](http://sqlfiddle.com/#!9/12165/1)的小提琴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-16T11:22:36.013

有很多方法可以获得 yearweek 专栏，这是一个快速的懒惰解决方案（因为我怀疑你正在为此苦苦挣扎）。但这是获得排名的方法。使用自联接获取包含时间值高于当前行的行的数据集，然后计算具有更高值的行：

这在 MSSQL 中要容易得多，我 99% 的时间都住在 MSSQL 中，您可以只使用 RANK() 函数。直到今天我才意识到 mysql 中没有等价物。在没有 MS 的帮助的情况下，弄清楚如何获得相同的结果很有趣。

为上下文准备东西：

```
CREATE TABLE spenttime (userid int, serverid int, [time] int, [day] DATETIME)

CREATE TABLE weeklookup (weekname VARCHAR(10), weekstart DATETIME, weekend DATETIME)

INSERT INTO spenttime (userid, serverid, [time], [day]) VALUES
    (1, 1, 200, '2013-apr-01'),
    (1, 1, 150, '2013-apr-02'),
    (2, 1, 100, '2013-apr-02'),
    (3, 1, 500, '2013-apr-04'),
    (2, 2, 400, '2013-apr-04'),
    (1, 1, 300, '2013-apr-08'),
    (3, 1, 200, '2013-apr-08');

INSERT INTO weeklookup(weekname, weekstart, weekend) VALUES
     ('2013-w14', '01/apr/2013', '08/apr/2013'),
     ('2013-w15', '08/apr/2013', '15/apr/2013')

GO 
CREATE VIEW weekgroup AS 

SELECT    a.userid ,
                    a.serverid ,
                    a.[time] ,
                    w1.weekname
          FROM      spenttime a
                    INNER JOIN weeklookup w1 ON [day] >= w1.weekstart
                                                 AND [day] < w1.weekend
GO 
```

视图的选择语句：

```
SELECT  wv1.userid ,
        wv1.serverid ,
        wv1.[time] ,
        wv1.weekname AS yearweek ,
        COUNT(wv2.[time]) + 1 AS rank
FROM    weekgroup wv1
        LEFT JOIN weekgroup wv2 ON wv1.[time] < wv2.[time]
               AND wv1.weekname = wv2.weekname
               AND wv1.serverid = wv2.serverid
GROUP BY wv1.userid ,
        wv1.serverid ,
        wv1.[time] ,
        wv1.weekname
ORDER BY wv1.weekname ,
        wv1.[time] DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T07:20:09.957

如果要存储排名，可以使用`insert`触发器。插入触发器将计算排名，如下所示：

```
select count(*)
from spenttime_week w
where w.yearweek = new.yearweek and time >= new.time 
```

但是，我不建议这样做，因为您还必须创建一个`update`触发器，并修改已插入的排名值。

相反，使用 SQL 访问表，例如：

```
select w.*,
       (select count(*) from spenttime_week w2 where w2.yearweek = w.yearweek and w2.time >= w.time
       ) as rank
from spenttime_week w 
```

此 SQL 可能会有所不同，具体取决于您希望如何处理数据中的关联。出于性能原因，您应该至少有一个索引`yearweek`，并且可能在`yearweek, time`.

# php - 为嵌套类（社交链接）指定 UL 属性，但它仍然作为父类（标题）的属性工作我该如何解决？

> ID：15871566
> 
> 赞同：0
> 
> 时间：2013-04-08T04:56:37.753
> 
> 标签：php, css, joomla2.5

![在此处输入图像描述](https://i.stack.imgur.com/EOZTq.png)

![在此处输入图像描述](https://i.stack.imgur.com/fCdgD.png)

这分别是萤火虫视图和 css 代码的图像......请帮我解决这个问题，我怎样才能使 css 代码也适用于嵌套类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T05:04:27.447

你的文件头的personal.css文件应该放在template.css之后，以克服声明之前的css。

# gcc - gcc中的“_”是什么意思？

> ID：15871569
> 
> 赞同：1
> 
> 时间：2013-04-08T04:56:48.843
> 
> 标签：gcc

在一些 gcc 代码中，我遇到了以下构造。致命的 (_("%s: 找不到节 %s"), file_name, section_name); 在这种情况下，我从未见过“_”。从字符数组创建实体是某种构造，很可能是编译器扩展。

有人能告诉我它是什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T05:00:17.530

它通常是与[GNU gettext 项目](http://www.gnu.org/software/gettext/)相关联的宏，用于国际化。这个想法是传递的字符串是查找表中的键。每种支持的语言都有一个这样的表，当前的表由少数环境因素决定。

在表中找到的值应该是将键翻译成目标语言。

由于查找此类翻译后的字符串是 i18n 代码中的常见活动，`_`因此将其作为查找函数的方便短名称引入。

# xml - 如何在 Flex 中动态地将属性添加到 xml 节点？

> ID：15871570
> 
> 赞同：0
> 
> 时间：2013-04-08T04:56:55.367
> 
> 标签：xml, apache-flex

我需要为 XML 中的所有节点动态添加一个属性。我的 xml 如下：

```
 <root>
     <item>
        <item>Americas</item>
        <item>Canada</item>
        <item>Ottawa</item>
        <item>Category 1</item>
        <item>Product 01</item>
        <item>4171.132339235787</item>
        <item>4181.132339235787</item>
      </item>
   </root> 
```

为此，我需要为上述 XML 中的每个节点添加一个名为“name”的属性：

```
<root>
 <item name="">
   <item name="Americas"/>
   <item name="Canada"/>
   <item name="Ottawa"/>
   <item name="Category 1"/>
   <item name="Product 01"/>
   <item name="4171.132339235787"/>
   <item name="4181.132339235787"/>
 </item>
</root> 
```

这如何在 Flex XML 中实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:56:42.210

您需要一个名为标签的属性吗？但是您的最终 XML 没有任何此类属性。无论如何，您可以使用以下内容将“名称”属性添加到 xml 的每个子元素：

```
 <mx:Script>
            <![CDATA[
                private var newLoad:URLLoader;
                private var link:String = "xl.xml";
                private var req:URLRequest = new URLRequest(link);
                loadU();//Place this call in the creation complete handler of the Application's CreationComplete Event
                private function load(e:Event):void
                {
                    var xm:XML = XML(e.target.data);
                    for each(var node:XML in xm.item.item)
                    {
                        node.@name = node;
                    }
                    var file:FileReference = new FileReference();
                    file.save(xm,"x1.xml");//Save the output file
                }
                private function loadU():void
                {
                    newLoad = new URLLoader();
                    newLoad.addEventListener(Event.COMPLETE,load);
                    newLoad.load(req);
                }
            ]]>
        </mx:Script> 
```

让我知道这是否是你想要的。

# actionscript-3 - 将普通的旧对象转换为值对象

> ID：15871572
> 
> 赞同：0
> 
> 时间：2013-04-08T04:57:13.023
> 
> 标签：actionscript-3, apache-flex

我想我真的很菜鸟时刻，我从coldfusion返回一个远程对象，我想指定对象类型。即我从coldfusion 得到一个工人，我有一个价值对象工人。

这是我一直在尝试的

```
public function ResultHandler_GetWorker(event:ResultEvent):void
{
    var result:ArrayCollection = ArrayCollection(event.result);
    var worker:WorkerVO = WorkerVO(result[0]);
    model.worker = worker;
} 
```

`Result[0]`是一个雇员对象。它的调试结构看起来像这样。

workerAddress "24b fake Ave"
workerCity "Wellton"
workerCountry "Ameriland" workerEmail "Afake@me.com"
workerFName "Foo"
workerHPhone "435234"
workerID 1
workerImage null
workerIsAdmin true
workerLName "Foo"
workerMPhone "827271903" workerPassword "password"
workerPosition "领导者"
workerState""
workerSuburb"Birkenhead"
workerWPhone null

我的课看起来像这样：

```
public class WorkerVO
{       
    public var _workerAddress:String
    public var _workerCity:String
    public var _workerCountry:String    
    public var _workerEmail:String  
    public var _workerFName:String  
    public var _workerHPhone:String 
    public var _workerID:uint;  
    public var _workerImage:String
    public var _workerIsAdmin:Number;
    public var _workerLName:String
    public var _workerMPhone:String;
    public var _workerPassword:String;
    public var _workerPosition:String;
    public var _workerState:String;
    public var _workerSuburb:String;
    public var _workerWPhone:String;

    public function WorkerVO()
    {
    }

    //Getters & Setters 
} 
```

*错误 #1034：类型强制失败：无法将 Object@114eeb251 转换为 com.cavej03.sitesafe.vo.WorkerVO。*

我做错了吗。我只是想创建一个函数或构造函数来接受这个对象并将其字段映射到一个新的 WorkerVO

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:16:24.507

您缺少[RemoteClass](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf680e1-7ffe.html#WS2db454920e96a9e51e63e3d11c0bf69084-7a25)元数据标记。此标记告诉您的应用程序给定的客户端 VO 映射到哪个服务器端 VO。

像这样使用它：

```
[RemoteClass(alias="path.to.WorkerVO")]  //this is the servers-side path
public class WorkerVO {
    ...
} 
```

此外，从您所显示的内容来看，您的属性名称似乎不匹配：客户端的名称带有下划线，而服务器端的名称则没有。
客户端 VO 和服务器端 VO 的属性名称应该完全相同。例如：

```
/* Java VO */
public class WorkerVO {

    private String workerAddress;
    public String getWorkerAddress() { 
       return workerAddress; 
    }
    public void setWorkerAddress(String workerAddress) {
       this.workerAddress = workerAddress;
    }

}

/* ActionScript VO */
[RemoteClass(alias="path.to.WorkerVO")]
public class WorkerVO {

    public var workerAddress:String;

} 
```

这是一个 Java VO 示例，但同样适用于 ColdFusion。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T05:22:15.127

将返回的对象分配给 内的属性`WorkerVO`，并为每个对象准备 getter，如下所示：

```
public class WorkerVO
{

    private var _base:Object;

    public function WorkerVO(base:Object)
    {
        _base = base;
    }

    public function get address():String{ return _base.workerAddress; }
    public function get city():String{ return _base.workerCity; }
    // Etc.

} 
```

而worker的定义只需要`new`添加关键字即可：

```
var worker:WorkerVO = new WorkerVO(result[0]);
trace(worker.address); 
```

# asp.net - 在sql server中使用全文搜索搜索字符串的中间部分

> ID：15871575
> 
> 赞同：1
> 
> 时间：2013-04-08T04:57:32.757
> 
> 标签：asp.net, sql, sql-server, sql-server-2008

我无法使用全文搜索索引搜索字符串的中间部分，例如：有一个字符串“我喜欢音乐”我无法搜索字符串中间部分的类似内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T04:59:55.700

试试[LIKE](http://msdn.microsoft.com/en-in/library/aa933232%28v=sql.80%29.aspx)运算符。

```
SELECT 
    * 
FROM 
    YourTABLE 
WHERE 
    ColumnName LIKE '%like%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T05:03:36.043

在查询中使用`Like`关键字如下：

```
select * from tablename where col like '%like%' 
```

下面是like in sql的教程：

[http://www.w3schools.com/sql/sql_like.asp](http://www.w3schools.com/sql/sql_like.asp)

这是 MSDN：

[http://msdn.microsoft.com/en-us/library/ms179859.aspx](http://msdn.microsoft.com/en-us/library/ms179859.aspx)

希望它有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T05:47:55.570

好吧，为了仍然使用全文索引并避免表扫描，试试这个

```
 select * 
   from yourTable
  where contains (ColumnName,'like')
    and (ColumnName not like 'like%' or ColumnName like '_%like%') 
```

但是，查询优化器可能会决定全表扫描更有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T06:01:12.643

检查表的统计信息是否过时，特别是检查与全文索引相关的统计信息。由于您使用的是 SQl Server 2008，因此，您可以查询 DMV 以获取索引的统计信息或使用 DBCC 查看统计详细信息

```
DBCC SHOW_STATISTICS ("[schema].[table]",indexname); 
```

检查第一个返回结果，[Updated]，[rows]，[rows sampled]，如果统计数据过期，或者[rows sampled]远小于[rows]，这很多导致SQL引擎决定使用表扫描而不是使用您的索引。

# android - 在 SurfaceView 上调用 Camera 类的 takePicture 方法。Android，这行代码放在哪里？

> ID：15871579
> 
> 赞同：1
> 
> 时间：2013-04-08T04:57:48.643
> 
> 标签：android, camera, surfaceview

关于仅向该项目添加一行代码的简单问题：

```
 mCamera.takePicture(myShutterCallback,
        myPictureCallback_RAW, myPictureCallback_JPG); 
```

我在使用 Android 中的相机 API 拍照时遇到了一些问题。我让它在另一个应用程序中工作没有问题，但是我怎样才能让它在这个我显示下面代码的新应用程序中工作。重点是我想用于相机的嵌套surfaceView 类，以及扩展View 的另一个类。

请注意，在示例中，有一个surfaceView 类实例化了一个名为mCamera 的Camera 对象。

我试图在 mCamera 上调用 takePicture 方法。我想知道它不起作用的原因是否是因为我从外部类调用 takePicture 方法，内部surfaceView 嵌套在没有实例化surfaceView 对象的情况下？

为什么当我为此surfaceView调用takepicture方法时不起作用？这里有什么遗漏，还是嵌套的surfaceView 类设置错误？

SurfaceView 类的代码，这个类嵌套在主 Activity 类中：

```
 class Preview extends SurfaceView implements SurfaceHolder.Callback {
     SurfaceHolder mHolder;
     DrawOnTop mDrawOnTop;
     boolean mFinished;

     Preview(Context context, DrawOnTop drawOnTop) {
        super(context);

        mDrawOnTop = drawOnTop;
        mFinished = false;

        // Install a SurfaceHolder.Callback so we get notified when the
        // underlying surface is created and destroyed.
        mHolder = getHolder();
        mHolder.addCallback(this);
        mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
     }

      public void surfaceCreated(SurfaceHolder holder) {
        mCamera = Camera.open();
        try {
           mCamera.setPreviewDisplay(holder);
           mCamera.setDisplayOrientation(90);
           mCamera.startPreview();

           // Preview callback used whenever new viewfinder frame is available
           mCamera.setPreviewCallback(new PreviewCallback() {
              public void onPreviewFrame(byte[] data, Camera camera)
              {
                  if ( (mDrawOnTop == null) || mFinished )
                      return;

                  if (mDrawOnTop.mBitmap == null)
                  {
                      // Initialize the draw-on-top companion
                      Camera.Parameters params = camera.getParameters();
                      mDrawOnTop.mImageWidth = params.getPreviewSize().width;
                      mDrawOnTop.mImageHeight =
                              params.getPreviewSize().height;
                      mDrawOnTop.mBitmap = Bitmap.createBitmap(mDrawOnTop.mImageWidth, 
                      mDrawOnTop.mImageHeight, Bitmap.Config.RGB_565);
                      mDrawOnTop.mRGBData =
                              new int[mDrawOnTop.mImageWidth * mDrawOnTop.mImageHeight]; 
                      mDrawOnTop.mYUVData = new byte[data.length];                    
                  }

                  // Pass YUV data to draw-on-top companion
                  System.arraycopy(data, 0, mDrawOnTop.mYUVData, 0, data.length);
                  mDrawOnTop.invalidate();
              }
           });
        } 
        catch (IOException exception) {
            mCamera.release();
            mCamera = null;
        }
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        // Surface will be destroyed when we return, so stop the preview.
        // Because the CameraDevice object is not a shared resource, it's very
        // important to release it when the activity is paused.
        mFinished = true;
        mCamera.setPreviewCallback(null);
        mCamera.stopPreview();
        mCamera.release();
        mCamera = null;
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
        // Now that the size is known, set up the camera parameters and begin
        // the preview.
        Camera.Parameters parameters = mCamera.getParameters();
        parameters.setPreviewSize(320, 240);
        parameters.setPreviewFrameRate(15);
        parameters.setSceneMode(Camera.Parameters.SCENE_MODE_NIGHT);
        parameters.setFocusMode(Camera.Parameters.FOCUS_MODE_AUTO);
        mCamera.setParameters(parameters);
        mCamera.startPreview();
    }

    } 
```

接下来是扩展 View 的变大类：

```
 class DrawOnTop extends View {
Bitmap mBitmap;
Paint mPaintBlack;
Paint mPaintYellow;
Paint mPaintRed;
Paint mPaintGreen;
Paint mPaintBlue;
byte[] mYUVData;
int[] mRGBData;
int mImageWidth, mImageHeight;
int[] mRedHistogram;
int[] mGreenHistogram;
int[] mBlueHistogram;
double[] mBinSquared;

 public DrawOnTop(Context context) {
    super(context);

    mPaintBlack = new Paint();
    mPaintBlack.setStyle(Paint.Style.FILL);
    mPaintBlack.setColor(Color.BLACK);
    mPaintBlack.setTextSize(25);

    mPaintYellow = new Paint();
    mPaintYellow.setStyle(Paint.Style.FILL);
    mPaintYellow.setColor(Color.YELLOW);
    mPaintYellow.setTextSize(25);

    mPaintRed = new Paint();
    mPaintRed.setStyle(Paint.Style.FILL);
    mPaintRed.setColor(Color.RED);
    mPaintRed.setTextSize(25);

    mPaintGreen = new Paint();
    mPaintGreen.setStyle(Paint.Style.FILL);
    mPaintGreen.setColor(Color.GREEN);
    mPaintGreen.setTextSize(25);

    mPaintBlue = new Paint();
    mPaintBlue.setStyle(Paint.Style.FILL);
    mPaintBlue.setColor(Color.BLUE);
    mPaintBlue.setTextSize(25);

    mBitmap = null;
    mYUVData = null;
    mRGBData = null;
    mRedHistogram = new int[256];
    mGreenHistogram = new int[256];
    mBlueHistogram = new int[256];
    mBinSquared = new double[256];
    for (int bin = 0; bin < 256; bin++)
    {
        mBinSquared[bin] = ((double)bin) * bin;
    } // bin
}

@Override
protected void onDraw(Canvas canvas) {
    if (mBitmap != null)
    {
        int canvasWidth = canvas.getWidth();
        int canvasHeight = canvas.getHeight();
        int newImageWidth = canvasWidth;
        int newImageHeight = canvasHeight;
        int marginWidth = (canvasWidth - newImageWidth)/2;

        // Convert from YUV to RGB
        decodeYUV420SP(mRGBData, mYUVData, mImageWidth, mImageHeight);

        // Draw bitmap
        mBitmap.setPixels(mRGBData, 0, mImageWidth, 0, 0, /                 mImageWidth, mImageHeight);/            Rect src = new Rect(0, 0, mImageWidth, mImageHeight);
        Rect dst = new Rect(marginWidth, 0, 
                canvasWidth-marginWidth, canvasHeight);/            canvas.drawBitmap(mBitmap, src, dst, mPaintBlack);

        // Draw black borders                       
        canvas.drawRect(0, 0, marginWidth, canvasHeight, mPaintBlack);
        canvas.drawRect(canvasWidth - marginWidth, 0, 
                canvasWidth, canvasHeight, mPaintBlack);

        // Calculate histogram
        calculateIntensityHistogram(mRGBData, mRedHistogram, 
                mImageWidth, mImageHeight, 0);
        calculateIntensityHistogram(mRGBData, mGreenHistogram, 
                mImageWidth, mImageHeight, 1);
        calculateIntensityHistogram(mRGBData, mBlueHistogram, 
                mImageWidth, mImageHeight, 2);

        // Calculate mean
        double imageRedMean = 0, imageGreenMean = 0, imageBlueMean = 0;
        double redHistogramSum = 0, greenHistogramSum = 0, blueHistogramSum = 0;
        for (int bin = 0; bin < 256; bin++)
        {
            imageRedMean += mRedHistogram[bin] * bin;
            redHistogramSum += mRedHistogram[bin];
            imageGreenMean += mGreenHistogram[bin] * bin;
            greenHistogramSum += mGreenHistogram[bin];
            imageBlueMean += mBlueHistogram[bin] * bin;
            blueHistogramSum += mBlueHistogram[bin];
        } // bin
        imageRedMean /= redHistogramSum;
        imageGreenMean /= greenHistogramSum;
        imageBlueMean /= blueHistogramSum;

        // Calculate second moment
        double imageRed2ndMoment = 0, imageGreen2ndMoment = 0, imageBlue2ndMoment = 0;
        for (int bin = 0; bin < 256; bin++)
        {
            imageRed2ndMoment += mRedHistogram[bin] * mBinSquared[bin];
            imageGreen2ndMoment += mGreenHistogram[bin] * mBinSquared[bin];
            imageBlue2ndMoment += mBlueHistogram[bin] * mBinSquared[bin];
        } // bin
        imageRed2ndMoment /= redHistogramSum;
        imageGreen2ndMoment /= greenHistogramSum;
        imageBlue2ndMoment /= blueHistogramSum;
        double imageRedStdDev = Math.sqrt( imageRed2ndMoment - imageRedMean*imageRedMean );
        double imageGreenStdDev = Math.sqrt( imageGreen2ndMoment - imageGreenMean*imageGreenMean );
        double imageBlueStdDev = Math.sqrt( imageBlue2ndMoment - imageBlueMean*imageBlueMean );

        // Draw mean
        String imageMeanStr = "Mean (R,G,B): " + String.format("%.4g", imageRedMean) + ", " + String.format("%.4g", imageGreenMean)
        + ", " + String.format("%.4g", imageBlueMean);
     if(imageRedMean>115){
         if(cameraStatus.get()==false){
         shutterActon();

         }
    }
        canvas.drawText(imageMeanStr, marginWidth+10-1, 30-1, mPaintBlack);
        canvas.drawText(imageMeanStr, marginWidth+10+1, 30-1, mPaintBlack);
        canvas.drawText(imageMeanStr, marginWidth+10+1, 30+1, mPaintBlack);
        canvas.drawText(imageMeanStr, marginWidth+10-1, 30+1, mPaintBlack);
        canvas.drawText(imageMeanStr, marginWidth+10, 30, mPaintYellow);

        // Draw standard deviation
        String imageStdDevStr = "Std Dev (R,G,B): " + String.format("%.4g", imageRedStdDev) + ", " + String.format("%.4g", imageGreenStdDev)
        + ", " + String.format("%.4g", imageBlueStdDev);
        canvas.drawText(imageStdDevStr, marginWidth+10-1, 60-1, mPaintBlack);
        canvas.drawText(imageStdDevStr, marginWidth+10+1, 60-1, mPaintBlack);
        canvas.drawText(imageStdDevStr, marginWidth+10+1, 60+1, mPaintBlack);
        canvas.drawText(imageStdDevStr, marginWidth+10-1, 60+1, mPaintBlack);
        canvas.drawText(imageStdDevStr, marginWidth+10, 60, mPaintYellow);

        // Draw red intensity histogram
        float barMaxHeight = 3000;
        float barWidth = ((float)newImageWidth) / 256;
        float barMarginHeight = 2;
        RectF barRect = new RectF();
        barRect.bottom = canvasHeight - 200;
        barRect.left = marginWidth;
        barRect.right = barRect.left + barWidth;
        for (int bin = 0; bin < 256; bin++)
        {
            float prob = (float)mRedHistogram[bin] / (float)redHistogramSum;
            barRect.top = barRect.bottom - 
            Math.min(80,prob*barMaxHeight) - barMarginHeight;
        //  canvas.drawRect(barRect, mPaintBlack);
            barRect.top += barMarginHeight;
            //canvas.drawRect(barRect, mPaintRed);
            barRect.left += barWidth;
            barRect.right += barWidth;
        } // bin

        // Draw green intensity histogram
        barRect.bottom = canvasHeight - 100;
        barRect.left = marginWidth;
        barRect.right = barRect.left + barWidth;
        for (int bin = 0; bin < 256; bin++)
        {
            barRect.top = barRect.bottom - Math.min(80, ((float)mGreenHistogram[bin])/((float)greenHistogramSum)
            * barMaxHeight) - barMarginHeight;
        //  canvas.drawRect(barRect, mPaintBlack);
            barRect.top += barMarginHeight;
            //canvas.drawRect(barRect, mPaintGreen);
            barRect.left += barWidth;
            barRect.right += barWidth;
        } // bin

        // Draw blue intensity histogram
        barRect.bottom = canvasHeight;
        barRect.left = marginWidth;
        barRect.right = barRect.left + barWidth;
        for (int bin = 0; bin < 256; bin++)
        {
            barRect.top = barRect.bottom - Math.min(80, ((float)mBlueHistogram[bin])/((float)blueHistogramSum)
            * barMaxHeight) - barMarginHeight;
        //  canvas.drawRect(barRect, mPaintBlack);
            barRect.top += barMarginHeight;
            //canvas.drawRect(barRect, mPaintBlue);
            barRect.left += barWidth;
            barRect.right += barWidth;
        } // bin
    } // end if statement

    super.onDraw(canvas);

} // end onDraw method

public void decodeYUV420SP(int[] rgb, byte[] yuv420sp, int width, int height) {
    final int frameSize = width * height;

    for (int j = 0, yp = 0; j < height; j++) {
        int uvp = frameSize + (j >> 1) * width, u = 0, v = 0;
        for (int i = 0; i < width; i++, yp++) {
            int y = (0xff & ((int) yuv420sp[yp])) - 16;
            if (y < 0) y = 0;
            if ((i & 1) == 0) {
                v = (0xff & yuv420sp[uvp++]) - 128;
                u = (0xff & yuv420sp[uvp++]) - 128;
            }

            int y1192 = 1192 * y;
            int r = (y1192 + 1634 * v);
            int g = (y1192 - 833 * v - 400 * u);
            int b = (y1192 + 2066 * u);

            if (r < 0) r = 0; else if (r > 262143) r = 262143;
            if (g < 0) g = 0; else if (g > 262143) g = 262143;
            if (b < 0) b = 0; else if (b > 262143) b = 262143;

            rgb[yp] = 0xff000000 | ((r << 6) & 0xff0000) | ((g >> 2) & 0xff00) | ((b >> 10) & 0xff);
        }
    }
}

public void decodeYUV420SPGrayscale(int[] rgb, byte[] yuv420sp, int width, int height)
{
    final int frameSize = width * height;

    for (int pix = 0; pix < frameSize; pix++)
    {
        int pixVal = (0xff & ((int) yuv420sp[pix])) - 16;
        if (pixVal < 0) pixVal = 0;
        if (pixVal > 255) pixVal = 255;
        rgb[pix] = 0xff000000 | (pixVal << 16) | (pixVal << 8) | pixVal;
    } // pix
}

public void calculateIntensityHistogram(int[] rgb, int[] histogram, int width, int height, int component)
{
    for (int bin = 0; bin < 256; bin++)
    {
        histogram[bin] = 0;
    } // bin
    if (component == 0) // red
    {
        for (int pix = 0; pix < width*height; pix += 3)
        {
            int pixVal = (rgb[pix] >> 16) & 0xff;
            histogram[ pixVal ]++;
        } // pix
    }
    else if (component == 1) // green
    {
        for (int pix = 0; pix < width*height; pix += 3)
        {
            int pixVal = (rgb[pix] >> 8) & 0xff;
            histogram[ pixVal ]++;
        } // pix
    }
    else // blue
    {
        for (int pix = 0; pix < width*height; pix += 3)
        {
            int pixVal = rgb[pix] & 0xff;
            histogram[ pixVal ]++;
        } // pix
    }
} 
```

# qt - 错误：QML 列：无法为列内的项目指定顶部、底部、垂直中心、填充或 centerIn 锚点

> ID：15871583
> 
> 赞同：8
> 
> 时间：2013-04-08T04:58:10.707
> 
> 标签：qt, qml

```
file:///home/biergaizi/WeCase.commit/src//ui/SmileyDelegate.qml:6:5: 
QML Column: Cannot specify top, bottom, verticalCenter, fill or centerIn 
anchors for items inside Column 
```

为什么我得到那个？我试图在没有找到答案的情况下评论每一行。我对此一无所知。

笑脸视图.qml

```
import QtQuick 1.0

Rectangle {
    width: 300; height: 200

    GridView {
        id: grid
        anchors.fill: parent
        cellWidth: 36; cellHeight: 40

        model: SmileyModel
        delegate: SmileyDelegate {}
        highlight: Rectangle { color: "lightsteelblue"; radius: 5 }
        focus: true
    }
} 
```

笑脸委托.qml

```
import QtQuick 1.0

Item {
    width: grid.cellWidth; height: grid.cellHeight

    Column {
        anchors.fill: parent
        Image { source: path; anchors.horizontalCenter: parent.horizontalCenter }
        Text { text: name; anchors.horizontalCenter: parent.horizontalCenter }

        MouseArea {
            anchors.fill: parent
            onClicked: {
                highlight: color: "lightsteelblue"; radius: 5 
                grid.currentIndex = index 
            }
            onDoubleClicked: {
                parentWindow.returnSmileyName('[' + name + ']')
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T07:54:00.250

Column 试图将您的 MouseArea 锚定到图像和文本旁边，但 MouseArea 指定其锚点以填充其父级。这两件事是矛盾的，因此为什么会出现错误。

如果将 MouseArea 移出 Column 并移入 SmileyDelegate 的基础 Item，您可能会发现它按预期工作。

# android - 在 Flex 中阅读 Android 联系人？

> ID：15871586
> 
> 赞同：2
> 
> 时间：2013-04-08T04:58:29.463
> 
> 标签：android, apache-flex, adobe, contacts

Android 在此处存储他的联系人：

数据/数据/com.android.providers.contacts/databases/contacts.db

任何人都有使用 Adob​​e Flex 访问 Android Contacts.db 的代码吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T07:42:25.707

1.  您可能没有“权利”直接从 Flex/AIR 读取此文件
2.  您需要启用对 air 应用描述符的权限访问
3.  您应该创建/使用现有的 ANE（本机扩展）来阅读联系人列表

    *   一个例子在这里[https://github.com/freshplanet/ContactEditor](https://github.com/freshplanet/ContactEditor)
    *   关于 ANE [http://www.adobe.com/devnet/air/native-extensions-for-air.html](http://www.adobe.com/devnet/air/native-extensions-for-air.html)

# javascript - javascript中的事件处理

> ID：15871588
> 
> 赞同：1
> 
> 时间：2013-04-08T04:58:31.807
> 
> 标签：javascript, event-handling

我了解到您可以在 HTML 或 Javascript 中声明事件处理程序。我的问题是，在 Javascript 或 HTML 中这样做更好吗？这有什么不同吗？如果是这样，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T05:10:29.837

几乎总是 JavaScript。它更干净、更易于维护并将 HTML 与 JavaScript 分开。

例如，你可以这样写：

```
<button onclick="do_something(this)">Button 1</button>
<button onclick="do_something(this)">Button 2</button>
<button onclick="do_something(this)">Button 3</button>
<button onclick="do_something(this)">Button 4</button> 
```

或者您可以将 HTML 保留为 HTML 并从脚本中绑定事件处理程序：

```
$('button').click(function() {
    // Do something
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T05:45:26.580

这在很大程度上取决于您的要求。添加内联侦听器并不比添加类或 id 更困难，因此您是在服务器（即内联）还是客户端（动态）添加它们取决于适合特定情况的内容。将它们串联起来可以让维护代码的任何人都清楚地了解监听器所在的位置，只需查看服务器代码或生成的 HTMl。否则，他们必须搜索脚本文件以找出它们的位置。

只需使用对您来说最有效的东西。

# algorithm - 霍夫曼算法适用于哪些类型的数据？

> ID：15871590
> 
> 赞同：-1
> 
> 时间：2013-04-08T04:58:48.337
> 
> 标签：algorithm, encoding, huffman-code

我一直在阅读这个算法，我了解构建树，以及树过程结束时的输出应该是什么。所有示例都是文本文件，但是对于其他类型的文件，您需要将其作为二进制文件读取吗？如果你这样做，你如何选择多少位将成为一个符号？霍夫曼算法适用于任何类型的文件？如果它不在我应该关注哪些类型的文件中？

我是这个主题的新手，所以我希望有人可以为我澄清一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:18:09.900

您可以选择每个符号应包含多少位，您选择的位数将影响您获得的压缩量，具体取决于您正在压缩的数据结构。根据 HF Smith (1987) *Data Structures : Form and Function* , pp.399-400，例如：

> ...这种方法的净节省可能不是很大，除非我们正在处理相当小的消息集合，其中一些消息比其他消息更有可能。通常可以通过考虑消息字符串的更大段而不仅仅是单个符号来获得改进的冗余压缩[通过霍夫曼编码]。

# javascript - Javascript：addEventListener 不在 for 循环中工作

> ID：15871591
> 
> 赞同：2
> 
> 时间：2013-04-08T04:58:52.513
> 
> 标签：javascript, arrays, for-loop, addeventlistener

情况：我从 API 获取 JSON 数组。“div”来自我代码前面的 getElementByID。

问题： addEventListener 只附加到我列表中的最后一个元素。

```
 for(var i = 0; i < JSONarray.response.artists.length; i++){
      var artistName = JSONarray.response.artists[i];
      div.innerHTML += "<h4 id=\"artist" + i + "\" accessKey=\"" + artistName.id + "\">Artist Name: " +  artistName.name + "</h4>";
      document.getElementById("artist" + i).addEventListener("click", moreInfo, false);
    } 
```

奇怪的事情：如果我将 addEventListener 放在它自己的 for 循环中（使用完全相同的循环脚本），它会非常高兴，我的所有列表项都会得到它们的监听器。

问题：我不能把所有东西都放在一个 for 循环中，还是我的代码有什么原因吗？

注意：我使用 Chrome 来运行它，如果它碰巧是浏览器的话。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T05:16:57.837

您正在修改 div 的每次迭代 for 循环的 innerHTML，从而导致绑定到某个以该 div 作为父节点的节点的所有事件处理程序丢失，因为修改 innerHTML 会导致从 HTML 重新创建所有子节点。

考虑一下这`div.innerHTML += foo;`真的是简写，`div.innerHTML = div.innerHTML + foo;`我的意思应该很明显。

编辑：我意识到我的答案已经被接受（截至 2013 年 4 月 8 日），但我仍然觉得我可以措辞更好一些。

可以将`node.innerHTML = bar`其视为“用可以从给定字符串 (in ) 解释的任何 HTML 替换节点的所有子节点`bar`”。它只是作为给定字符串的一部分发生的，您通过`node.innerHTML`.. 为节点的前孩子提供了 HTML 序列化，因此您可能失去的不仅仅是事件处理程序！

如您所见，这不是添加 html 的最佳方式。

作为旁注，假设您确实必须向节点添加一堆子节点，*如果事件可以冒泡*（请参阅[HTML DOM：哪些事件不会冒泡？或](https://stackoverflow.com/questions/5574207/javascript-which-events-do-not-bubble)[维基百科关于 DOM 事件的文章](http://en.wikipedia.org/wiki/DOM_events)的更完整列表），而不是除了为每个子节点添加处理程序之外，您还可以向*父*节点添加事件处理程序，并且在现代浏览器 (IE9+) 中，许多事件可以在*冒泡时*进行处理。最近我还没有直接处理 DOM 中的事件冒泡，但是许多第三方库很容易支持这种事件委托。使用 jQuery，查看`jQuery.on`和绑定声明会像这样工作：

```
 jQuery(parentnodeselector).on(eventname,childselector) 
```

AFAIK，自己处理事件冒泡并不难......但是，如果事件通过正确的孩子冒泡，您*将*需要能够识别 via`event.target`和的父母。`event.target`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T05:26:57.347

`innerHTML`不应鼓励内联事件处理程序，尤其是在动态创建时。我什至记得在这种情况下阅读过关于 IE 中发生的事情的坏消息。尝试使用类似这样的东西，它使用更合适的方法向 DOM 添加元素：

```
for (var i = 0; i < JSONarray.response.artists.length; i++) {
    var artistName = JSONarray.response.artists[i];
    var newH4 = document.createElement("h4");
    newH4.id = "artist" + i;
    newH4.accessKey = artistName.id;    // You might have to use newH4.setAttribute("accessKey", artistName.id) instead
    newH4.innerHTML = "Artist Name: " +  artistName.name;
    newH4.addEventListener("click", moreInfo, false);
    div.appendChild(newH4);
} 
```

如果您关心，旧版 IE 没有`addEventListener`- 因此您需要检查`addEventListener`，`attachEvent`如果它不可用则使用。只是一个警告。就像是：

```
if (newH4.addEventListener) {
    newH4.addEventListener("click", moreInfo, false);
} else if (newH4.attachEvent) {
    newH4.attachEvent("onclick", moreInfo);
} else {
    newH4.onclick = moreInfo;
} 
```

此外，您不应该`innerHTML`在循环中使用相同的元素。创建一个大字符串并将其附加到 for 循环内，然后在循环**后**`innerHTML`的元素上设置会更有效。随着数组大小的增加，这变得更加重要。**`JSONarray.response.artists`**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T05:13:50.103

看起来是 dom 更新问题

```
for(var i = 0; i < JSONarray.response.artists.length; i++){
      var artistName = JSONarray.response.artists[i];
      div.innerHTML += '<h4 id="artist' + i + '" accessKey="' + artistName.id + '" onclick="moreInfo(this)">Artist Name: ' +  artistName.name + '</h4>';
} 
```

演示：[小提琴](http://plnkr.co/edit/1HCkj5ymUTPU8tIjSfTg?p=preview)**

# android - 通过加速度计变化的 prisati 关节运动

> ID：15871595
> 
> 赞同：1
> 
> 时间：2013-04-08T04:59:12.063
> 
> 标签：android, box2d, andengine, accelerometer

我正在开发一个游戏，我必须通过加速度计改变在屏幕底部的 x 轴上移动一个篮形多边形体。
制作水平棱柱接头连接右侧墙体和篮体。一旦比赛开始，篮体就会向墙壁移动并停止......
如何使其随着加速度计值的变化而移动？

```
 prismaticJointDef.initialize(rightwallbody,  manBody, manBody.getWorldCenter(),     new Vector2(1f,0f));
    prismaticJointDef.collideConnected = false;
    prismaticJointDef.enableLimit = true;
    prismaticJointDef.localAxis1.nor();
    prismaticJointDef.localAxis1.set(1,0);

    prismaticJointDef.lowerTranslation = -150f /   PhysicsConstants.PIXEL_TO_METER_RATIO_DEFAULT;
    prismaticJointDef.upperTranslation = 150f /   PhysicsConstants.PIXEL_TO_METER_RATIO_DEFAULT;
    prismaticJointDef.enableMotor = true;

    prismaticJointDef.maxMotorForce = 100f;
    prismaticJointDef.motorSpeed = 0.1f;
    mPhysicsWorld.createJoint(prismaticJointDef); 
```

# c++ - Visual C++ 2010 注释导致错误

> ID：15871598
> 
> 赞同：4
> 
> 时间：2013-04-08T04:59:27.223
> 
> 标签：c++, comments

`// hi`注释会导致红色波浪线出现在、 和它下面的`if`语句中、`hashTable`、`ItemType*`和`hashTableSize`。错误是“预期的`if`声明”，`hashTable`错误是“此声明没有存储类或类型说明符”，`ItemType*`错误是“预期的类型说明符”，`hashTableSize`错误是“标识符'HashTableSize'未定义。删除注释删除波浪线。我的项目中没有其他班级有这个问题。什么给了？

```
template <class ItemType>
HashedDictionary( const unsigned & p_hashTableSize = DEFAULT_SIZE ) : hashTable( NULL ), hashTableSize( p_hashTableSize ), itemCount( 0 )
{
    // hi

    if ( hashTableSize < 0 )
        throw PrecondViolatedExcep( "Hash table size must be greater than or equal to zero." );

    hashTable = new ItemType*[ hashTableSize ]; 

} 
```

类声明：

```
#include "HashedEntry.h"

template< class ItemType>

    class HashedDictionary
    {
    private:
        HashedEntry<ItemType>** hashTable;
        unsigned hashTableSize;
        unsigned itemCount;
        static const unsigned DEFAULT_SIZE = 101;

        int getHashIndex( const ItemType & newEntry );
        int computeIndex( const ItemType & newEntry );
    public:
        HashedDictionary( const unsigned & p_hashTableSize );
        bool add( const ItemType & newItem );

    } 
```

# nservicebus - 带有 NServiceBus 的 AppHarbor

> ID：15871613
> 
> 赞同：1
> 
> 时间：2013-04-08T05:00:45.903
> 
> 标签：nservicebus, appharbor

有没有人让 NServiceBus 在 AppHarbor 上运行顺利？

看起来对 MSMQ 没有任何支持。是否有适合 AppHarbor 的替代方案？

# c++ - 使用 glDrawPixels 时将图片倒置

> ID：15871616
> 
> 赞同：2
> 
> 时间：2013-04-08T05:01:40.053
> 
> 标签：c++, qt, opengl

将 glDrawPixels() 与 glRasterPos2*() 和 glPixelZoom() 结合使用时，我得到了非常奇怪的结果。我有一张图片，我想像以前的旧帧缓冲区一样展示它，即 (0,0) 位于左上角。这是代码：

```
void GLWidget::resizeGL( int w, int h )
{
    glViewport( 0, 0, w, h );
    glMatrixMode( GL_PROJECTION );
    glLoadIdentity();
    glOrtho( 0, w, 0, h, -1, 1 );
}

void GLWidget::paintGL()
{
    for( int i = 0; i < SCREEN_WIDTH; ++i )
    {
        displayBitmap[i] = 0xf81f;
    }

    for( int i = 239 * SCREEN_WIDTH; i < 239 * SCREEN_WIDTH + SCREEN_WIDTH; ++i )
    {
        displayBitmap[i] = 0xf800;
    }

    //glRasterPos2f( 0, SCREEN_HEIGHT - 0.1 );
    glRasterPos2i( 0, SCREEN_HEIGHT - 1 );
    glPixelZoom( 1, -1 );
    glPixelStorei( GL_UNPACK_ALIGNMENT, 1 );
    glDrawPixels( SCREEN_WIDTH, SCREEN_HEIGHT, GL_RGB, GL_UNSIGNED_SHORT_5_6_5, displayBitmap );
} 
```

如果像现在这样执行，我在 (0,1) 处得到紫线，即一条黑线，然后是紫线，然后在不可见的底部区域是红线。

好的，所以我改变

```
glRasterPos2i( 0, SCREEN_HEIGHT - 1 ); 
```

至

```
glRasterPos2i( 0, SCREEN_HEIGHT ); 
```

不，输出已损坏。奇怪的是，如果我将其更改为：

```
glRasterPos2f( 0, SCREEN_HEIGHT - 0.1 ); 
```

它可以工作，两条线都以正确的顺序绘制（SCREEN_HEIGHT 和 SCREEN_HEIGHT - 1.0 导致与整数版本相同的结果）。

我在这里做错了什么？屏幕宽度 = 320，屏幕高度 = 240。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-06T08:40:42.183

这对我有用：

```
void display() {
 unsigned char *pixels=captureScreenRegion(0,0,window_width,window_height);
 glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
 glRasterPos2f(-1,1);
 glPixelZoom( 1, -1 );
 glDrawPixels(window_width,window_height,GL_RGB,GL_BYTE,pixels);
 free(pixels);
 glutSwapBuffers();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T08:18:01.647

glDrawPixels 在消费级硬件上的支持很差。在较新的 OpenGL 版本中，它已被完全删除。与其花时间试图让它工作，只需将您的图像加载到纹理中，并用它绘制一个带有纹理的四边形和一个普通的着色器。

相信我，玩弄 glDrawPixels 是不值得的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-12T15:19:14.307

我遇到和你一样的问题。我是这样解决的：

```
void VideoRenderWidget::resizeGL(int w, int h)
{
    glViewport( 0, 0, w, h );
    glMatrixMode( GL_PROJECTION );
    glLoadIdentity();
    glOrtho( 0, w, 0, h, 0.1, 1 );
    glPixelZoom( 1, -1 );
    glRasterPos3f(0, h - 1, -0.3);
}

void VideoRenderWidget::paintGL()
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glDrawPixels(704, 576, GL_RGB, GL_UNSIGNED_BYTE, buffer_.data_);
} 
```

这对我有用..我还在开发这个..这里 704 是视频宽度，576 是高度。

# ruby - 在 Ruby 2.0 中，如何使用 mix 方法来处理特征

> ID：15871618
> 
> 赞同：0
> 
> 时间：2013-04-08T05:02:03.870
> 
> 标签：ruby

```
module A

end

class D

  mix A

end  

c1 = D.new 
```

这是我的输出：

```
archie@local$ruby mixins-traits.rb 
mixins-traits.rb:4:in `<class:D>': undefined method `mix' for D:Class (NoMethodError)
    from mixins-traits.rb:3:in `<main>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:28:25.530

Traits 没有进入 Ruby 2.0。[发行说明](http://Ruby-Lang.Org/en/news/2013/02/24/ruby-2-0-0-p0-is-released/)和[新闻](https://GitHub.Com/Ruby/Ruby/blob/ruby_2_0_0/NEWS)中均未提及它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T05:35:36.313

我不知道 ruby​​ 有 mix 关键字吗？通常它使用 include 关键字。例子： `class D include A end`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-08T05:59:22.097

是的，您必须添加一个包含，例如：

```
module A
  def a1
  end
end

class Sample  
  include A    #include method
end

samp = Sample.new 
```

# .net - 我可以使用 Microsoft Fakes 在第 3 方可执行文件中“填充”.net 函数调用吗？

> ID：15871635
> 
> 赞同：0
> 
> 时间：2013-04-08T05:03:45.257
> 
> 标签：.net, windows, debugging, testing, microsoft-fakes

MS Fakes 可用于将函数调用重定向到您的 vs 项目中的存根或填充函数，您有 src 代码，但我想知道它是否可用于调试目的以填充第 3 方 exe 中的函数？在描述页面上，它说 shim 在运行时工作，所以不应该有任何理由我不能在 3rd 方可执行文件上使用它，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T19:09:01.787

假设您的问题似乎是“我可以在我的项目中引用的库中填充函数吗？” 答案无疑是肯定的。

这就是重点。假设您包含了 microsoft 的 prism dll：Fakes 允许您填充晦涩的组件（例如 regionmanager），允许您“假装”它们工作，从而将您的业务逻辑与外部调用隔离开来。

您应该在单元测试中执行此操作，以便在每次签入时都可以确保代码仍然有效。如果您需要一次调试，那么您可能做错了什么，并且冒着将来必须再次进行的风险，甚至将其传递给其他人以在将来尝试学习和重复。

如果您问是否可以在测试之外执行此操作，我无法回答。

# c# - 在 c# 中将值流式传输到客户端的最有效方法是什么

> ID：15871636
> 
> 赞同：0
> 
> 时间：2013-04-08T05:04:06.737
> 
> 标签：c#, asp.net-mvc, streaming, broadcasting

我想知道像[http://www.eztrader.com/Trading.aspx](http://www.eztrader.com/Trading.aspx)这样的网站如何向用户传输价格。我知道我可以设置一个超时的 ajax 调用，以每 2 或 3 秒向服务器请求一次价格，但有没有更有效的方法呢？我在后端使用 .net mvc 4.0。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T05:08:46.327

你可以试试[SignalR](http://signalr.net/)。它是为这种实时功能设计的 .NET 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T05:15:55.977

谢谢，对了@Matthew Flaschen

感谢链接我也搜索了它，发现更有趣

[http://www.asp.net/signalr/overview/introduction/what-is-signalr](http://www.asp.net/signalr/overview/introduction/what-is-signalr)

[http://blog.pluralsight.com/2013/03/20/new-course-introducing-asp-net-signalr-push -带有集线器的服务/](http://blog.pluralsight.com/2013/03/20/new-course-introducing-asp-net-signalr-push-services-with-hubs/)

# iphone - 单击按钮时如何暂停和恢复uiview动画？

> ID：15871643
> 
> 赞同：0
> 
> 时间：2013-04-08T05:04:52.680
> 
> 标签：iphone, ios, objective-c, uiview, uiviewanimation

我有，它在begin`scrollview`里面有 zoomscale 属性，它在一段时间内动画效果很好，但在这之间我想暂停并恢复，请帮我解决这个问题`uiview``animation``animations``animation``animation`

```
[UIView beginAnimations:@"anim1" context:NULL];
[UIView setAnimationDelegate:self];
[UIView setAnimationDuration:fanim];
z = [[arrImage1 objectAtIndex:1] floatValue];
scroll.zoomScale = z;
NSLog(@"   %f",scroll.zoomScale);
if (iw != 0 || ih != 0) 
{
    image1.frame = CGRectMake(0, 0, iw,ih);
}
z = [[arrImage2 objectAtIndex:1] floatValue];
scroll1.zoomScale = z;
z = [[arrImage3 objectAtIndex:1] floatValue];
scroll2.zoomScale = z;
[UIView commitAnimations]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:17:31.420

这可以通过使用 nstimer 来实现。尝试使用 nstimer 来启动和暂停动画，这里有一组可以使用的代码。在一个方法中实现你的动画并使用 nstimer 来触发它并暂停它：

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    [self startTimer];
}

- (void)viewWillDisappear:(BOOL)animated {
    [super viewWillDisappear:animated];
    [self stopTimer];
}

- (void)startTimer {
    NSTimer *timer = [[NSTimer alloc] initWithFireDate:[NSDate dateWithTimeIntervalSinceNow:3.0] interval:3.0 target:self selector:@selector(this is where your animation method name goest) userInfo:nil repeats:YES];
    [[NSRunLoop currentRunLoop] addTimer:timer forMode:NSRunLoopCommonModes];
    self.animationmethodename = timer;
    [timer release];
}

- (void)stopTimer {
    [self.animationmethodname invalidate];
    self.animationmethodtimer = nil;
} 
```

然后将 animationmethodname 替换为您用于创建动画的方法的名称。

# ios - THE_PROCESS_HAS_FORKED_AND_YOU_CANNOT_USE_THIS_COREFOUNDATION_FUNCTIONALITY

> ID：15871650
> 
> 赞同：1
> 
> 时间：2013-04-08T05:05:27.780
> 
> 标签：ios, multithreading, fork, nsthread, serversocket

我正在 iOS 中开发一个聊天程序。但我无法解决与线程相关的问题。首先，我创建了一个服务器套接字来处理线程中的多个连接。我的代码是这样的：

```
 - (void)viewDidLoad
    {
        [super viewDidLoad];

        [NSThread detachNewThreadSelector:@selector(aMethod:) toTarget:[self class] withObject:nil];
    }

    void doprocessing(int sock)
    {
       int n;

       char *buffer = malloc(256);

       bzero(buffer,256);

       n = read(sock,buffer,255);
       if (n < 0)
       {
          perror("ERROR reading from socket");
          exit(1);
       }

      printf("Here is the message: %s\n",buffer);

      n = write(sock,"I got your message",18);

      if (n < 0)
      {
         perror("ERROR writing to socket");
         exit(1);
      }
   }

   +(void)aMethod:(id)param{

    int x;
    for(x=0;x<50;++x)
    {
    int sockfd, newsockfd, portno, clilen;
    char buffer[256];
    struct sockaddr_in serv_addr, cli_addr;
    int  n;

    sockfd = socket(AF_INET, SOCK_STREAM, 0);
    if (sockfd < 0)
    {
        perror("ERROR opening socket");
        exit(1);
    }

    bzero((char *) &serv_addr, sizeof(serv_addr));
    portno = 5001;
    serv_addr.sin_family = AF_INET;
    serv_addr.sin_addr.s_addr = INADDR_ANY;
    serv_addr.sin_port = htons(portno);

    if (bind(sockfd, (struct sockaddr *) &serv_addr,
             sizeof(serv_addr)) < 0)
    {
        perror("ERROR on binding");
        exit(1);
    }

    listen(sockfd,5);
    clilen = sizeof(cli_addr);
    while (1)
    {
        newsockfd = accept(sockfd,(struct sockaddr *) &cli_addr, &clilen);
        if (newsockfd < 0)
        {
            perror("ERROR on accept");
            exit(1);
        }

        int pid = fork();
        if (pid < 0)
        {
            perror("ERROR on fork");
            exit(1);
        }
        if (pid == 0)
        {

            close(sockfd);
            doprocessing(newsockfd);
            exit(0);
        }
        else
        {
            close(newsockfd);
        }
        } 
    }
} 
```

如您所知，我无法访问该线程中的 gui 元素。出于这个原因，我调用了 mainThread 函数，但仍然无法访问 gui 元素。我得到了这个结果：

```
The process has forked and you cannot use this CoreFoundation functionality safely. You MUST exec().
Break on __THE_PROCESS_HAS_FORKED_AND_YOU_CANNOT_USE_THIS_COREFOUNDATION_FUNCTIONALITY___YOU_MUST_EXEC__() to debug.
The process has forked and you cannot use this CoreFoundation functionality safely. You MUST exec().
Break on __THE_PROCESS_HAS_FORKED_AND_YOU_CANNOT_USE_THIS_COREFOUNDATION_FUNCTIONALITY___YOU_MUST_EXEC__() to debug.
The process has forked and you cannot use this CoreFoundation functionality safely. You MUST exec().
Break on __THE_PROCESS_HAS_FORKED_AND_YOU_CANNOT_USE_THIS_COREFOUNDATION_FUNCTIONALITY___YOU_MUST_EXEC__() to debug.
The process has forked and you cannot use this CoreFoundation functionality safely. You MUST exec().
Break on __THE_PROCESS_HAS_FORKED_AND_YOU_CANNOT_USE_THIS_COREFOUNDATION_FUNCTIONALITY___YOU_MUST_EXEC__() to debug.
The process has forked and you cannot use this CoreFoundation functionality safely. You MUST exec().
Break on __THE_PROCESS_HAS_FORKED_AND_YOU_CANNOT_USE_THIS_COREFOUNDATION_FUNCTIONALITY___YOU_MUST_EXEC__() to debug.
The process has forked and you cannot use this CoreFoundation functionality safely. You MUST exec().
Break on __THE_PROCESS_HAS_FORKED_AND_YOU_CANNOT_USE_THIS_COREFOUNDATION_FUNCTIONALITY___YOU_MUST_EXEC__() to debug.
The process has forked and you cannot use this CoreFoundation functionality safely. You MUST exec().
Break on __THE_PROCESS_HAS_FORKED_AND_YOU_CANNOT_USE_THIS_COREFOUNDATION_FUNCTIONALITY___YOU_MUST_EXEC__() to debug.
The process has forked and you cannot use this CoreFoundation functionality safely. You MUST exec().
Break on __THE_PROCESS_HAS_FORKED_AND_YOU_CANNOT_USE_THIS_COREFOUNDATION_FUNCTIONALITY___YOU_MUST_EXEC__() to debug.
The process has forked and you cannot use this CoreFoundation functionality safely. You MUST exec().
Break on __THE_PROCESS_HAS_FORKED_AND_YOU_CANNOT_USE_THIS_COREFOUNDATION_FUNCTIONALITY___YOU_MUST_EXEC__() to debug.
The process has forked and you cannot use this CoreFoundation functionality safely. You MUST exec().
Break on __THE_PROCESS_HAS_FORKED_AND_YOU_CANNOT_USE_THIS_COREFOUNDATION_FUNCTIONALITY___YOU_MUST_EXEC__() to debug. 
```

如果我不使用叉子，它可以工作。但我的问题是，我怎样才能通过使用 fork 函数来访问 gui 元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T06:04:46.040

（正如您在评论中所说，这是针对越狱设备的，否则您根本无法使用 fork() 或 exec() 。）

您遇到了 Apple 框架的限制，该限制记录在技术说明 TN2083“守护程序和代理”中的[过时编程技术中：](http://developer.apple.com/library/mac/#technotes/tn2083/_index.html#//apple_ref/doc/uid/DTS10003794-CH1-SUBSECTION64)

> **守护框架**
> 
> 如果您调用 fork 但不调用 exec，许多 Mac OS X 框架将无法可靠运行。唯一的例外是 System 框架，即使在那里，POSIX 标准也严格限制了您在 fork 和 exec 之间可以做什么。

# ipad - 是否有机会在 iPad（iOS 6）上着色状态栏？

> ID：15871651
> 
> 赞同：2
> 
> 时间：2013-04-08T05:05:31.793
> 
> 标签：ipad, ios6, colors, statusbar, tint

iOS 6 提供了在 iPhone 上着色的状态栏，**但我在 iPad 上找不到**

我尝试通过**FLEX**（*Cydia 插件*）将 [SBApplication StatusBarStyle] 和其他 [StatusBarStyle] 的值修改为“1”，在启用这些调整后，任何应用程序的第一次启动，我都可以看到 StatusBar 被着色

但是，应用程序完全启动后，状态栏完全变黑了

有谁能够帮我？非常感谢！

# asp.net-mvc - 使用ajax调用将模型从视图传递到控制器？

> ID：15871652
> 
> 赞同：3
> 
> 时间：2013-04-08T05:05:37.877
> 
> 标签：asp.net-mvc, jquery, razor

我正在制作一个应用程序，其中需要在用户输入手机号码并跳出标签时创建潜在客户，如果输入的手机号码有效（表格上的所有其他详细信息），则会创建潜在客户。但是当我将模型从视图传递到控制器时，我得到的数据为空。

**看法**

```
 @{
    ViewBag.Title = "EmailQuote";
    Layout = "~/Views/Shared/Template.cshtml";
    }
    @model Max.VirtualSalesManager.UI.ViewModels.LeadViewModel

    @{
     var data = Html.Raw(Json.Encode(Model));
    }
    <script src="@Url.Content("~/Scripts/Common.js")" type="text/javascript"></script>
    <h2>
       EmailQuote</h2>
    @using Acidaes.VirtualSalesManager.UI.Helpers
    @using (Html.BeginForm("GenerateEQuote", "Quote", FormMethod.Post,             new{id="frmEmailQuote" }))
    {

      @Html.MandatoryLabel("Name", false, new { style = "width: 50px; display: inline" })     @Html.FullName()
   @Html.MandatoryLabel("City", false, new { style = "width: 50px; display: inline" }) @Html.DropDownListFor(m => m.CommunicationAddress.City, new SelectList(ViewBag.CityList, "Key", "Value"), "select", new { id = "ddlCity" })
   @Html.MandatoryLabel("Mobile No.", false, new { style = "width: 100px; display: inline" }) @Html.TextBoxFor(m => m.MobileNumber, new { style = "width: 100px", id = "txtmobilenumber", onBlur = "createLead('"+@data+"')" })
   @Html.MandatoryLabel("Email ID", false, new { style = "width: 80px; display: inline" }) @Html.TextBoxFor(m => m.EmailId, new { style = "width: 100px" })
   @Html.HiddenFor(m => m.LeadId)
    <input type="submit" id="btnSubmit" />
} 
```

**JS**

```
function createLead(data) {
var number = /^[0-9]+$/;
var mobileNumber = document.getElementById('txtmobilenumber').value;
if (mobileNumber.match(number) && mobileNumber.length == 10) {
    var jsondata = JSON.stringify(data);
    var Parameters = "{'data':'" + ("#frmEmailQuote").serialize() + "'}";
    Events.DoServerRequest('/MAXVSM/Quote/test', Parameters, GetLeadId);
}
} 
```

> DoServerRequest 函数

```
 DoServerRequest: function (url, data, funSuccess) {

    $.ajax({
        type: "POST",
        url: url,
        data: data,
        contentType: "application/json; charset=utf-8",
        async: false,
        dataType: "json",
        success: funSuccess,
        error: function () {
            alert("Error in getting list");
        }
    });

Controller
[HttpPost]
    [ActionName("test")]
    public JsonResult test(LeadViewModel data)
    {
        LeadViewModel t = new LeadViewModel();
        t.MobileNumber = data.MobileNumber;

        return Json(t);
    } 
```

从视图到 ajax 函数的数据很好，但是当数据到达控制器时它是空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:35:05.073

尝试`contentType`从您的 ajax 调用中删除：

```
DoServerRequest: function (url, data, funSuccess) {
    $.post({
        type: "POST",
        url: url,
        data: data,
        async: false,
        dataType: "json",
        success: funSuccess,
        error: function () {
            alert("Error in getting list");
        }
    });
} 
```

服务器不期望 JSON 内容，而是 application/x-www-form-urlencoded，这是默认值。

这意味着您还应该使用普通的 Javascript 对象或字符串作为数据：

```
if (mobileNumber.match(number) && mobileNumber.length == 10) {
    Events.DoServerRequest('/MAXVSM/Quote/test', $("#frmEmailQuote").serialize(), GetLeadId);
} 
```

# java - 如何将jsp放在tomcat的ROOT文件夹中，以便所有Web应用程序都选择该jsp

> ID：15871653
> 
> 赞同：0
> 
> 时间：2013-04-08T05:05:46.070
> 
> 标签：java, tomcat

我在我的 tomcat 中定义了多个 Web 应用程序。如果出现任何异常，我想抛出一个 jsp（使用 spring 的 SimpleMappingExceptionResolver 标签完成）。当我将 jsps 放在 Web 应用程序的 web-inf 文件夹中时，它可以正常工作，这是显而易见的。但是我想把这个jsp放在tomcat中一个常见的地方，比如ROOT库。但是如果我这样做，tomcat 就无法找到我的 jsp。有人可以告诉我是否需要对 web.xml 进行任何更改才能实现这一点，或者我应该将此 jsp 放在其他地方。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T06:15:16.313

您所说的“拾取”或“访问”是什么意思？您可以在tomcat ROOT应用程序上放置一个jsp文件，并在每次遇到异常时执行302重定向。

例如，将所有应用程序通用异常页面放在 webapps/ROOT/generic_exception.jsp 上，然后在每个应用程序上，将其添加到 web.xml

```
<error-page>
  <exception-type>java.lang.Throwable</exception-type>
  <location>/myapp_error.jsp</location>
</error-page> 
```

如果出现任何未捕获的异常，那应该将请求重定向到 myapp_error.jsp（在 myapp 内）。然后在 myapp_error.jsp 中，执行 html 元重定向到 /generic_exception.jsp

但是这种方法的缺点是您被重定向到不同的网络应用程序，如果您想传递会话属性，这很困难/需要额外的工作

# asp.net - 消除 CSS 选项卡中的边缘闪烁

> ID：15871655
> 
> 赞同：0
> 
> 时间：2013-04-08T05:05:56.157
> 
> 标签：asp.net, css

![在此处输入图像描述](https://i.stack.imgur.com/1bxhs.jpg)![在此处输入图像描述](https://i.stack.imgur.com/JMDbB.jpg) [1](https://i.stack.imgur.com/1bxhs.jpg)：[http://i.stenter](http://i.stenter)代码![hereack.imgur.com/emPdr.jpg](https://i.stack.imgur.com/JMDbB.jpg) 我想删除用户组选项卡的左侧清晰大小的边框。我想删除用户组选项卡左侧的白色小间隙这是应用于选定选项卡的 css。

```
ul.tabs li.selected a {-moz-border-bottom-colors: none;-moz-border-left-colors: none;   -moz-border-right-colors: none;    -moz-border-top-colors: none;   background: none repeat scroll 0 0 white;    border-color: #B7B7B7 #B7B7B7 White;    border-image: none;
    border-style: solid;    border-width: 1px;    font-weight: bold;
    position: relative;    top: 0;}
ul.tabs li a {-moz-border-bottom-colors: none;    -moz-border-left-colors: none;
    -moz-border-right-colors: none;    -moz-border-top-colors: none;    background: none repeat scroll 0 0 #D8DAE2;    border-color: #CCCCCC #CCCCCC #B7B7B7;    border-image: none;
    border-style: solid;    border-width: 1px;    color: Black;    font: 11px verdana,helvetica,sans-serif;enter code here    outline: medium none;    padding: 5px 16px;
    position: relative;    text-decoration: none;    z-index: 1;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:11:56.393

如果您使用的是 jquery ui，则右边距在 li 元素上，而不是在 a 上。

所以你的代码应该是这样的：

```
ul.tabs li { margin-right:0 } 
```

如果仍然无法正常工作，请添加

```
 ul.tabs li  { margin-right:0 !Important; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T05:13:24.710

更改您的CSS：-

```
ul.tabs li.selected a {
    top:1px; //change
} 
```

# django - Django 为 postjob 提供限制

> ID：15871657
> 
> 赞同：1
> 
> 时间：2013-04-08T05:05:59.697
> 
> 标签：django

我在数据库中有表，例如 EmployerRegistration 和 PostJob。我将这些表与 empid（PostJob 的外键）相关联。使用此 empid，我最多需要 5 个 PostJob。我想显示警报消息，例如登录时可用的帖子数。有人帮助如何就这种情况发表意见。

```
models.py
class EmployerRegistration(models.Model):
    username=models.CharField(max_length=30)
    password=models.CharField(max_length=30)

class PostJob(models.Model):
    emp = models.ForeignKey(EmployerRegistration)
    jobtitle = models.CharField(max_length=30)
    jobsummary = models.TextField()
    key_skills = models.CharField(max_length=30)
    experince = models.IntegerField(default=0)
    salary = models.IntegerField(default=0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T06:38:26.323

视图.py

```
def your_view(request, empid):
    msg=""

    if request.method == "POST":
        jobs = PostJob.objects.filter(emp_id=empid).count()
        if jobs <= 5:
            //save
        else:
            msg = Your not allow to add new post job. 

    return render(request, 'page.html', {'msg': msg}) 
```

模板

```
<script>
    $(document).ready(function(){
        var msg = {{msg}}
        if(msg != ""){
            alert(msg);
        }
    });
</script> 
```

# android - android中主屏幕的设计

> ID：15871660
> 
> 赞同：0
> 
> 时间：2013-04-08T05:06:14.393
> 
> 标签：android

我是 android 新手，需要为应用程序设计我的主屏幕。如下所示。

主屏幕图像。

![在此处输入图像描述](https://i.stack.imgur.com/2Zib1.png)

如上图包含五个按钮，它们有五个不同的可绘制图像，具有不同的设计和不同的尺寸。相同的布局在一台设备上运行时与在另一台设备上运行的相比看起来不同。不同的设备在这里意味着不同的屏幕尺寸和不同分辨率。所以现在的问题是如何设计图像和布局的尺寸和分辨率，使其适合市场上任何可用的安卓设备上的任何屏幕尺寸和分辨率，并且永远不会随着不同的屏幕尺寸展开或折叠。我正在测试应用程序在三种不同的屏幕尺寸设备和分辨率中，每个设备的外观都会发生变化。任何类型的回复都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:11:49.373

使用[RelativeLayouts](http://developer.android.com/reference/android/widget/RelativeLayout.html)来分隔不同的框。

除此之外，无论你问什么都是广泛的。你应该参考android 上提供**[的多屏幕设计](http://developer.android.com/training/multiscreen/index.html)**文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T05:12:22.173

您应该遵循文档中有关如何针对不同屏幕尺寸进行设计的详细建议。显然，您将必须拥有多个图像来处理所有场景。

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T05:13:15.003

将 4 分辨率的按钮背景图像作为 ldpe mdpi hdpi 和 xhpdi 放置在 res 文件夹中。使用 Dip insted of dp。

# django - 我需要在 django 中重写 url

> ID：15871663
> 
> 赞同：0
> 
> 时间：2013-04-08T05:06:32.463
> 
> 标签：django, python-2.7, url-rewriting

当用户选择英语时，我需要将网址 www.example.com/product/1 重写为 www.example.com/en/product/1。（他将单击一个选择框，该框将切换语言并设置一个名为“语言”的会话）

我无法选择支持此功能的 django 1.4。建议我们坚持使用 django 1.3。

因此我尝试了一个中间件，但事实证明，中间件会为每个请求运行，从而导致无限循环。

```
class urlrewrite():
    def process_request(self, request):
        if 'i' in request.session:
            if request.session.get('i','') != 0:
                print "session"
                request.session['i'] = request.session['i'] + 1
            else:
                request.session['i'] = 0
        else:
            request.session['i'] = 0

        print "request.session['i']", request.session['i']    

        if request.session.get('i','') == SOME_CONSTANT and request.session.get('django_language','') == 'en':
            del request.session['i']
            return HttpResponseRedirect("en/"+request.META['PATH_INFO']) 
```

当然，它不起作用。这适用于每个请求。

请帮帮我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:29:29.997

不要自己写，用别人的努力。

首先尝试[django-cms](http://django-cms.readthedocs.org/en/2.3.3/advanced/i18n.html)的解决方案。

==== 编辑 ====

您不需要使用 django-cms，只需安装它并使用他们的多语言 URL 中间件。这与 django 的常规国际化机制接口。

[http://django-cms.readthedocs.org/en/2.3.3/advanced/i18n.html](http://django-cms.readthedocs.org/en/2.3.3/advanced/i18n.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:38:12.793

这个问题可以通过在`urls.py`文件中使用一个小技巧来解决，如文档的这一部分所示：[https ://docs.djangoproject.com/en/1.4/ref/generic-views/#django-views-generic-简单重定向到](https://docs.djangoproject.com/en/1.4/ref/generic-views/#django-views-generic-simple-redirect-to)。

您保持相同的视图，它会简单地具有不同的 URL。我想这就是你想要的。确保您选择 1.3 版本的文档，我相信已经有一些变化。

# android - 自动旋转关闭时获取设备旋转

> ID：15871664
> 
> 赞同：2
> 
> 时间：2013-04-08T05:06:38.067
> 
> 标签：android, android-orientation

我正在编写一个相机应用程序，它通过设置在相机预览期间禁用自动旋转`android:screenOrientation="nosensor"`。但是，我仍然想知道拍照时手机的旋转方向。 `getResources().getConfiguration().orientation`不够具体，只返回纵向、横向或正方形。 `getWindowManager().getDefaultDisplay().getRotation()`始终为 0，因为屏幕被迫处于其默认方向 -如果启用自动旋转，*我如何获得该值？*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-12T19:17:22.277

这有点深入，但可以很好地跟踪方向变化。当打开相机意图并拍摄照片时，我使用它来获取照片方向。然后我知道照片是什么方向。它显然不适用于照片库，但您可以使用 exif 信息。令我惊恐的是，我发现三星 Galaxy S3 和 S4 没有从相机返回 exif 方向数据。

```
//keep a history
private int [] _orientationHistory = new int[5];
private int _orientationIndex;
private int _highestIndex = -1;
private int _currentOrientation;

//essentially compute the mode of the data. This could be improved
protected int getOrientation()
{
    if (_highestIndex < 0) return 0;

    Arrays.sort(_orientationHistory);
    return _orientationHistory[_highestIndex / 2];
}

OrientationEventListener _imageViewOrientationListener = new            
              OrientationEventListener(getContext(), SensorManager.SENSOR_DELAY_NORMAL) {
public void onOrientationChanged(int angle) {
        //angle comes in 360 degrees, convert that to a 0-3 rotation
        //Get the angle in 90 degree increments, 0,90,180,270 
        //with 45 degrees tolerance in each direction (straight up is 0) 
        //this is the same as the data coming from getWindowManager().getDefaultDisplay().getRotation()

        angle = angle + 45;
        if (angle > 360) angle = angle - 360;
        int orientation = angle / 90;

        //I use a history in order to smooth out noise 
        //and don't start sending events about the change until this history is filled
        if (_orientationIndex > _highestIndex) {
            _highestIndex = _orientationIndex;
        }
        _orientationHistory[_orientationIndex] = orientation;
        _orientationIndex ++;

        if (_orientationIndex == _orientationHistory.length) {
            _orientationIndex = 0;
        }

        int lastOrientation = _currentOrientation;
        //compute the orientation using above method
        _currentOrientation = getOrientation();

        if (_highestIndex == _orientationHistory.length - 1 && lastOrientation != _currentOrientation) {
            //enough data to say things changed
            orientationChanged(lastOrientation, _currentOrientation);
        }
    }
}; 
```

然后要启用这个监听器，只需添加这行代码：

```
if (_imageViewOrientationListener != null) {
     _imageViewOrientationListener.enable();
} 
```

最后，添加方法orientationChanged() 并在方向改变时接收更新。如果您需要像我一样，请在打开相机活动时开始记录此信息，并且如果方向翻转为不同的东西，例如从肖像横向，您可以假设在该时间段内拍摄的照片是您记录的旋转变化.

```
protected void orientationChanged(int lastOrientation, int currentOrientation) {
    Log.d(getClass().getSimpleName(), "Orientation changed to " + currentOrientation + " from " + lastOrientation);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T05:29:42.347

在活动中，您可以使用

```
@Override
public void onConfigurationChanged(Configuration newConfig) {    //this method return you latest configuration
    // TODO Auto-generated method stub
    super.onConfigurationChanged(newConfig);
//  newConfig.orientation  //Using this you will able to get orientation of device
} 
```

此方法在您更改设备配置后调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T06:51:36.147

您可以收听配置更改

```
<activity
...
            android:configChanges="orientation|screenSize"
... 
```

在 onConfigurationChanged() 中，您可以强制设置所需的方向（例如纵向），但可以获取有关方向更改的信息。

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    //get new configuration orientation from newConfig.orientation
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
} 
```

并且不要使用 android:screenOrientation="portrait" 所以当用户改变方向时 onConfigurationChanged 将被调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T05:09:55.627

当设备的方向发生变化时，使用[此类](http://developer.android.com/reference/android/view/OrientationEventListener.html)接收来自 SensorManager 的通知。

# javascript - 使用 javascript 生成动态 onclick 事件

> ID：15871666
> 
> 赞同：0
> 
> 时间：2013-04-08T05:07:01.630
> 
> 标签：javascript, events, loops, onclick

我正在动态生成一系列 onclick 事件，其中 alert() 与假装内容的循环号相关联。我的问题是当前警报输出最后一个循环的“i”值，而不是与假装内容关联的第 i 个循环。有什么想法吗？

JavaScript：

```
for (i = 1; i < 4; i++) {

    prepend_content = '<a href="#" id="img1_link_' + i + '" onclick="alert(i);">foo</a>';
    $('#dynamic_div').prepend(prepend_content);

} 
```

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T05:09:15.443

尝试像以前一样连接它：

```
for (i = 1; i < 4; i++) {
    prepend_content = '<a href="#" id="img1_link_' + i + '" onclick="alert(' + i + ');">foo</a>';
    $('#dynamic_div').prepend(prepend_content);
} 
```

如果您还没有声明，您可能需要声明`i`and `prepend_content`(with `var`)，以确保它们不会泄漏到全局范围内。

同时，我不建议使用或添加带有内联事件处理程序的 HTML。尝试像这样创建元素：

```
prepend_content = $("<a>").attr({
    href: "#",
    id: "img1_link_" + i
}).text("foo").on("click", (function (i) {
    return function () {
        alert(i);
    };
})(i)); 
```

**演示：http:** [//jsfiddle.net/ujv4y/](http://jsfiddle.net/ujv4y/)

处理程序立即调用函数的额外用途`click`是创建一个捕获`i`循环中值的闭包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T05:12:06.157

您可以使用 currying 为警报创建一个函数（对于更复杂的东西）：

```
function(i) {
return function(){alert(i);}
} 
```

# model-view-controller - 从 EXTJS 4 MVC 中的视图调用控制器方法

> ID：15871670
> 
> 赞同：3
> 
> 时间：2013-04-08T05:08:04.533
> 
> 标签：model-view-controller, extjs, extjs4, extjs-mvc

我是 EXTJS 4 MVC 架构的新手。我在控制器中有一个函数，我想从我的视图中调用它。我怎么能调用那个函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:14:46.263

您可以发送一条消息：`YourApp.fireEvent('my_event', options)`并在您的控制器内部收听它。但这是不对的。

如果您正在使用**mvc**，则不应在视图中编写代码。（注意：可能有代码，例如列渲染器代码，而不是业务逻辑）。View 应该只是一个组件组。要创建组件事件监听器，请使用Ext.app.Controller 的**控制**方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T10:52:51.490

您可以这样做：
您可以将控制器作为全局变量放在 app.js 中，如下所示：

```
Ext.define('MySharedData', {
    my_Controller:Object

}); 
```

在您的控制器中：

```
MySharedData.my_Controller=this.getController('<ControllerfolderPath>.controllerName'); 
```

然后从您的角度调用您想要的函数：

```
 MySharedData.my_Controller.my_Function(); 
```

# c++ - 制作预编译的代码/数据结构

> ID：15871685
> 
> 赞同：3
> 
> 时间：2013-04-08T05:09:42.443
> 
> 标签：c++, actionscript-3, trie, swc, precompile

我正在尝试用 Flash/as3 制作文字游戏。在这里，我使用前缀树 (Trie) 数据结构来存储所有有效的英语单词，然后在用户输入新单词时遍历它们。

我的问题是 Trie 的构建过程非常缓慢（因为字典中有超过 3,00,000 个单词），因此每次用户启动游戏时编译它对我来说都不是一个好主意。

有没有一种方法可以只编译一次代码并存储编译后的代码并在以后使用它。也许在 .swc 文件或 .exe 文件或任何文件中。

我也想知道上述问题的正确技术术语。不需要闪存特定的解决方案。只需告诉我需要用任何语言完成的工作背后的想法。

非常感谢人们:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T05:25:07.407

您可以从字典数据生成源代码并将其编译为程序的一部分。如果数据不经常更改并且您将生成的源代码保存在单独的源文件中，那么`make`一旦您编译了一次生成的源代码，即使使用（或等效的）重新编译也应该很快。

# php - Php：如何只显示当年的月份（减去-1）

> ID：15871686
> 
> 赞同：1
> 
> 时间：2013-04-08T05:09:43.587
> 
> 标签：php

我需要打开一个特定格式的 pdf 文件，例如 **MPA_154278A_03_2013**

前缀**（MPA）**在每个月的中间组件**（15427A）****中**都是相同的

 **我这样编码但无法获得上个月的数字（_03）

```
<?php
$number=$_REQUEST['input']; // input for midle name of file
//checking for file exist
$file_name="pdf_files/MPA_".$number."_".date('m')."_".date('Y').".pdf"; // for file opening
//echo $file_name;
if(file_exists($file_name))
    echo $file_name;
else
    echo 0;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:13:27.300

你会得到字符串**_03_2013**，

```
$date = date('_m_Y', strtotime(date('Y-m')." -1 month")); 
```

所以你的文件名会像这样生成，

```
$file_name="pdf_files/MPA_".$number.$date.".pdf"; 
```

[CodeViper 演示。](http://codepad.viper-7.com/1fwPJV)**

# windows - 如何检查生成的dll是静态链接还是动态链接？

> ID：15871689
> 
> 赞同：3
> 
> 时间：2013-04-08T05:09:56.770
> 
> 标签：windows, dll, makefile, static-linking, dynamic-linking

以下是我的链接命令：

```
Running Mkbootstrap for XML::SAX::ExpatXS ()
    C:\Perl\bin\perl.exe -MExtUtils::Command -e chmod -- 644 ExpatXS.bs

link -out:blib\arch\auto\XML\SAX\ExpatXS\ExpatXS.dll -dll -nologo -nodefaultlib -debug -opt:ref,icf  -libpath:"C:\Perl\lib\CORE"  -machine:x86 ExpatXS.obj -def:ExpatXS.def
Creating library blib\arch\auto\XML\SAX\ExpatXS\ExpatXS.lib and object blib\arch\auto\XML\SAX\ExpatXS\ExpatXS.exp 
```

使用的编译标志是`/Zi /GF /MD -c`

我想知道这个 dll 是静态链接还是动态链接。我提到了[http://msdn.microsoft.com/en-us/library/2kzt1wy3.aspx](http://msdn.microsoft.com/en-us/library/2kzt1wy3.aspx)但是当我在我的 makefile 中指定这些选项时，编译器会忽略它们。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:24:11.463

[下载 Windows Dependency Walker](http://www.dependencywalker.com/)的副本，启动它并加载您新创建的 dll。

它将显示您的 dll 导入的所有 DLL。如果其中一个导入具有类似的名称`msvcr<blah>.dll`（例如，，`msvcrt.dll`或`msvcr90.dll`- 你得到了图片），那么它正在使用 dll 中的 c-runtime（顺便说一下，这是 dll 建议做的事情）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T13:46:14.780

您的代码片段只显示了正在构建的 DLL，它没有说明使用 DLL 的程序。无论哪种方式都可以选择使用 DLL。

如果您不知道，那么一个简单的查找方法是`Dumpbin.exe /imports`在 EXE 上运行。您将看到输出中列出的实际使用的 DLL 导出。如果您没有看到任何内容，则只能动态加载 DLL。或者根本没有。调试器显示加载到进程中的 DLL 的通知，您将在“输出”窗口中看到它们。

# java - 如何找到 GC 根的路径

> ID：15871692
> 
> 赞同：1
> 
> 时间：2013-04-08T05:10:54.957
> 
> 标签：java, memory-management

是否有一种纯 Java 方法来查找哪些引用阻止实例被 GCd（特别是类加载器实例）？有没有办法至少计算对现有类加载器实例的引用数量？

一个可能的解决方案是使用 ref-counter，但我无法控制引用这些类加载器实例的所有代码，我相信 JVM 必须已经有计数器。我可以访问它们吗？

# php - 使用 javascript 获取 php 布尔值

> ID：15871694
> 
> 赞同：0
> 
> 时间：2013-04-08T05:11:03.260
> 
> 标签：php, javascript, boolean

我想用 javascript 获取 php booelan 值。那是我的代码。

```
<script type="text/javascript">

var $j = jQuery.noConflict();

var isValue = $j(<?php isset($getResult[]); ?>);

alert(isValue);

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T05:14:11.323

php是服务器端编程，javascript是客户端。所以你需要“回显” php 值才能在 javascript 上得到结果

```
var isValue = $j(<?php echo isset($getResult[]) ? "true" : "false"; ?>); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T05:13:43.990

您必须将 isset() 的布尔结果转换为 'true' 或 'false' 的字符串表示形式，以便 javascript 解析器可以理解它。像这样：

```
var isValue = $j(<?php isset($getResult[]) ? echo 'true' : echo 'false'; ?>); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T05:17:17.950

应该是这样的

```
<script type="text/javascript">

    var $j = jQuery.noConflict();

    var isValue = $j(<?php if (isset($getResult)){ echo true;} else {echo false;} ?>);

    alert(isValue);

</script> 
```

您不能 `$getResult[]`使用 issest 进行阅读。它将返回致命错误，或者您必须在数组中指定一些索引。

如果你想检查它是否是一个数组，那么你可以使用：

```
<script type="text/javascript">

    var $j = jQuery.noConflict();

    var isValue = $j(<?php if (isset($getResult) && is_array($getResult)){ echo true;} else {echo false;} ?>);

    alert(isValue);

</script> 
```

# mysql - 从 2 个不同的列中读取数据并使用该数据在同一个表中创建另一列

> ID：15871695
> 
> 赞同：-2
> 
> 时间：2013-04-08T05:11:07.057
> 
> 标签：mysql, phpmyadmin, mysql-workbench

我想看看这是否可能，如果是这样，我需要一些关于如何做到这一点的见解。

我在下面创建了一个声明

```
select wp_cart66_orders.*, wp_cart66_order_items.* from wp_cart66_orders, wp_cart66_order_items where wp_cart66_orders.id=wp_cart66_order_items.order_id and wp_cart66_orders.status = 'new'; 
```

我正在查看的 2 个列是

```
item_number and product_price 
```

在 2 列中，数据如下所示 item_number:purp1 product_price: 53.00

每次我看到 purp1 和 53.00 时，我都想在同一张表中的一个名为 weight 的新列中插入一个 13

那有意义吗？这在mysql中甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:20:52.290

如果您需要在表格中添加列，那么您的表格设计还没有完成，您应该回到表格并重新考虑您的表格。

如果您需要在两个字段具有某些值时在结果上显示一个值，那么`if()`应该这样做：

```
select 
    ...,
    if(item_number == 'purp1' and product_price==53, 13, 0) as aValue
from ... 
```

在运行时更改表是一个微妙的问题，应该避免，除非您的程序特别需要

# r - `agrep(..., fixed=F)` 的困难

> ID：15871702
> 
> 赞同：9
> 
> 时间：2013-04-08T05:11:34.327
> 
> 标签：r

在`?agrep`（`grep`使用模糊匹配）中，它提到我可以设置参数`fixed=FALSE`以让我的模式被解释为正则表达式。

但是，我无法让它工作！

```
agrep('(asdf|fdsa)', 'asdf', fixed=F)
# integer(0) 
```

在这种情况下，上面的内容*应该*匹配正则表达式“(asdf|fdsa)”与测试字符串“asdf”*完全匹配。*

确认：

```
grep('(asdf|fdsa)', 'asdf', fixed=F)
# 1 : it does match with grep 
```

更令人困惑的是，`adist`正确地将模式和字符串之间的距离设为 0，这意味着*肯定*`agrep`应该返回 1 而不是（不可能 0 大于 default ）。*`integer(0)``max.dist = 0.1`*

 *```
adist('(asdf|fdsa)', 'asdf', fixed=F)
#      [,1]
# [1,]    0 
```

**为什么这不起作用？有什么我不明白的吗？一种解决方法？** 我很乐意使用`adist`，但不完全确定如何将`agrep`' 的默认`max.distance=0.1`参数转换为`adist`' 的相应参数。

（是的，我被困在一台无法比 R 2.15.2 做得更好的旧电脑上）

```
> sessionInfo()
R version 2.15.2 (2012-10-26)
Platform: i686-redhat-linux-gnu (32-bit)    
locale:
 [1] LC_CTYPE=en_AU.utf8       LC_NUMERIC=C             
 [3] LC_TIME=en_AU.utf8        LC_COLLATE=en_AU.utf8    
 [5] LC_MONETARY=en_AU.utf8    LC_MESSAGES=en_AU.utf8   
 [7] LC_PAPER=C                LC_NAME=C                
 [9] LC_ADDRESS=C              LC_TELEPHONE=C           
[11] LC_MEASUREMENT=en_AU.utf8 LC_IDENTIFICATION=C      

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T05:47:34.427

**tl；博士：`agrep(..., fixed=F)`似乎不适用于“|” 特点。使用`aregexec`.**

经过进一步调查，我认为这是一个错误，并且**似乎**`agrep(..., fixed=F)`不适用于 '|' 正则表达式（虽然有）。**`adist(..., fixed=F)`**

 **详细说明，请注意

```
adist('(asdf|fdsa)', 'asdf', fixed=T) # 7
nchar('(asdf|fdsa)')                  # 11 
```

如果'asdf'被`agrep`'d'到*非正则表达式*字符串'（asdf | fdsa）'，那么它的距离为7。

在那张纸条上：

```
agrep('(asdf|fdsa)', 'asdf', fixed=F, max.distance=7) # 1
agrep('(asdf|fdsa)', 'asdf', fixed=F, max.distance=6) # integer(0) 
```

如果`fixed=T`. 如果，我的正则表达式将*完全*`fixed=F`匹配 'asdf'并且距离将为 0，所以我总是会从.*`agrep`*

 *所以它看起来**`agrep(pattern, x, fixed=F)`不起作用**，即它实际上`fixed`认为这种模式为 TRUE。

正如@Arun 提到的，它可能只是'|' 不起作用的正则表达式。例如， `agrep('la[sb]y', 'lazy', fixed=FALSE)` *确实*按预期工作。

* * *

### 编辑：解决方法（感谢@Arun）

该功能`aregexec`似乎工作。

```
> aregexec('(asdf|fdsa)', 'asdf', fixed=F)
[[1]]
[1] 1 1
attr(,"match.length")
[1] 4 4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-20T06:02:52.183

这已（最终）在 R 源“trunk”/R-devel“）和 R-patched 中得到修复，它将在 2018 年 7 月初成为 R 3.5.1。****

# java - ArrayList 声明：在 android 应用程序中标记“（”，两个标记“<”上的语法错误

> ID：15871711
> 
> 赞同：0
> 
> 时间：2013-04-08T05:11:56.750
> 
> 标签：java, android, eclipse

我在网上有谷歌，但没有帮助，我在这里发布我的问题。我有我从[https://developer.android.com](https://developer.android.com)下载的 Eclipse 版本平台版本 = 3.8以创建一个 android 应用程序。现在，当我在我的程序中声明一个 arraylist <> 时，它无法识别它。我在这里读了几个问题，说您需要一个 Eclipse 版本 >= 3.1 才能将 Java 编译器增加到 1.7 以上。但是现在我的问题是，当我已经有了 3.8 时，为什么 Java 编译器选项没有显示在 > 1.7 上供我选择。android项目和eclipse java项目是分开的吗？我打开了 eclipse 并创建了这个 android 应用程序项目。感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:17:24.437

你忘了使用`new`. Android 应用程序应使用 java 1.5 或 1.6。Android 不支持 1.7。`ArrayList<object> abcd= new ArrayList<object>();`

如果你想在 Java 应用项目中使用 java 1.7。Java 1.7 应该安装在您的 PC 中。

我的猜测是，当您使用 jdk 1.6 运行 eclipse 本身时，它实际上配置了不同的默认 jre。查看 window->preferences->java->Installed JREs 并确保选中的 JRE 为 1.6。

如果默认 JRE 确实是 1.6，那么它很可能是项目特定的设置。看到项目配置为使用正确的jre。

# php - 我的“发布”表单没有发布

> ID：15871712
> 
> 赞同：0
> 
> 时间：2013-04-08T05:11:59.217
> 
> 标签：php, ajax

尝试通过使用 SESSION 将数据从一个页面发送到另一个页面时出现问题。在第 1 页中，我有一个类似的表格：

```
<form id="myForm"  name="myForm" action="" method="post">

<input name="item_1">......</input> // an input for a number
<input name="comment1">......</input> // an input for text

</form> 
```

为了避免刷新，我使用

```
function submitOnclick()
{
    $.post("thisPage.php", $("#myForm").serialize());
    redirectToAnotherPage();
} 
```

然后我尝试通过使用 SESSION 存储数据

```
function redirectToAnotherPage(){
    <?php $_SESSION['item_1']=$_POST['item_1'] ?>;
    <?php $_SESSION['comment1']=$_POST['comment1'] ?>;
    location.href='anotherPage.php';
} 
```

但是 $POST 结果是空的，我尝试用数字 1 替换 $_POST['item_1'] 并且它确实将数字存储到 item_1，所以我认为这是因为 $_POST['item_1'] 有一些问题，我不知道为什么不提交/刷新就无法一页获取表单数据，

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:14:17.553

我不认为你可以在你的 javascript 函数中设置一个 PHP 会话变量。PHP 与 javascript 是分开的，因为 PHP 是服务器端的，这些值将在页面首次预处理时被读取和分配。

无论是否调用 javascript 函数，都不会发生变化。

即使没有 AJAX<，只需一个简单的 PHP 表单即可。请看下面：

```
<form id="myForm"  name="myForm" action="anotherPage.php" method="post">

    <input name="item1">......</input>
    <input name="comment1">......</input>

</form> 
```

要使用 javascript 提交，只需在您的函数上使用类似这样的内容：

```
function submitForm() {
    document.myform.submit();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T05:30:08.207

问题是`name`您的输入与您的`$_POST`索引不同

你的输入：`<input name="item1">`

你的帖子索引：`$_POST['item_1']`

并且在 Js 中使用 PHP 函数也是不正确的方法，这个：

```
function redirectToAnotherPage(){
  <?php $_SESSION['item_1']=$_POST['item_1'] ?>;
  <?php $_SESSION['comment1']=$_POST['comment1'] ?>;
  location.href='anotherPage.php';
} 
```

你需要`$_SESSION`直接在`thisPage.php`（ajax post url）中设置

**编辑 ：**

不要使用`serialize()`，而是这样：

```
function submitOnclick()
 {
   $.post(
     "thisPage.php",
     {item_1 : $('input[name="item_1"]').val(),
      comment1 : $('input[name="comment1"]').val()
      }
   );
   redirectToAnotherPage();
 } 
```

祝你好运 ！！！

# grails - grails中的域类

> ID：15871722
> 
> 赞同：0
> 
> 时间：2013-04-08T05:12:56.673
> 
> 标签：grails, grails-orm, grails-domain-class

请帮我

我有这门课

```
Class Person
{
 String name
 String id
 Date date
} 
```

该类与mysql连接

我的问题是把这个放在哪里：

`Person.count()`或者 `Person.findByAllName("Carlos")`

```
Class Person
{
 String name
 String id
 Date date
def person = Person.count() //here???
} 
```

我想创建一个显示有多少寄存器有表的字段人员。

只能使用脚手架，因为在运行应用程序时出错？

感谢和抱歉我的英语不好......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:24:43.967

正确的位置应该在域类之外。此外，您无需在域类上定义 Id，因为它是自动生成的

# javascript - jquery 选择具有多个 id 的元素

> ID：15871731
> 
> 赞同：1
> 
> 时间：2013-04-08T05:13:30.703
> 
> 标签：javascript, jquery

我必须选择一个元素，它的 id 由 mysql 分配，它看起来像这样：`id="Monza ( Italien )5"`它适用于其他元素，因为只有一个名称，但在这种情况下它是城市名称，然后是国家名称。我尝试像这样选择，`$('#Monza')`但没有奏效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T05:15:48.367

您也许可以使用属性选择器：

```
$('*[id="Monza ( Italien )5"]') 
```

[规范](http://www.w3.org/TR/html-markup/global-attributes.html#common.attrs.id)说该`id`属性不能包含空格，所以我会修复你的 HTML。如果您的 HTML 无效，浏览器可能不会合作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T05:15:31.747

不要使用空格或括号，它们对 ID 属性无效

> ID 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 ("-")、下划线 ("_")、冒号(":") 和句点 (".")。

以及 HTML 4.01 和 HTML5 之间的区别：

> HTML 4.01 规范规定 ID 标记必须以字母 ([A-Za-z]) 开头，后面可以跟任意数量的字母、数字 ([0-9])、连字符 (-)、下划线 (_) 、冒号 (:) 和句点 (.)。对于类属性，没有这样的限制。类名可以包含任何字符，并且它们不必以字母开头才有效。
> 
> HTML5 摆脱了对 id 属性的额外限制。除了在文档中唯一之外，剩下的唯一要求是该值必须包含至少一个字符（不能为空），并且不能包含任何空格字符。

但是如果您别无选择，您可以尝试：

```
$("div[id='Monza ( Italien )5']") 
```

不同`$('#id')`的是，如果您的页面中有多个具有相同 id 的元素，这将返回多个元素

* * *

似乎上面的选择器不起作用，您需要在此处手动转义无效字符才能使其起作用：

```
$("#Monza\\ \\(\\ Italien\\ \\)5") 
```

`[**Working Demo**](http://jsfiddle.net/HLAzd/)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T05:15:10.203

Id 之间不应有空格，请在[此处查看](http://www.w3.org/TR/2011/WD-html5-20110525/elements.html#the-id-attribute)。您可以使用一些字符`_`来加入 id 部分。

*改变*

```
id="Monza ( Italien )5" 
```

*对于一些事情，比如*

```
id="Monza_Italien_5" 
```

# wordpress - 在循环之外获取 the_category

> ID：15871742
> 
> 赞同：0
> 
> 时间：2013-04-08T05:14:27.773
> 
> 标签：wordpress

我正在一个具有自定义作者页面的网站上工作，并且在作者页面上它有一个最近的作者帖子小部件，该小部件显示该作者的其他帖子。该站点有多个作者，因此每个帖子都不同，我还没有找到可以做到这一点的插件。我正在尝试显示帖子缩略图、标题和类别名称。

我正在使用一个显示标题和缩略图的函数，但它没有 category 。我尝试添加类别： the_category(' ','multiple',$authors_post->ID) 不幸的是，它显示了第一个 li 中的所有类别。而不是每个帖子。

这是我正在使用的内容：

```
function get_related_author_posts() {
global $authordata, $post;

$authors_posts = get_posts( array( 'author' => $authordata->ID,
  'post__not_in' => array( $post->ID ), 'posts_per_page' => 3 ) );

$output = '<ul>';
foreach ( $authors_posts as $authors_post ) {
    $output .= '<li>' . get_the_post_thumbnail( $authors_post->ID, 'xsmall-thumb' )
       . '<p>' . the_category(' ','multiple',$authors_post->ID)
       . '</p> <a href="' . get_permalink( $authors_post->ID )
       . '">' . apply_filters( 'the_title', $authors_post->post_title,
       $authors_post->ID ) . '</a></li>';
}
$output .= '</ul>';

return $output; 
```

}

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T06:05:19.260

尝试一些事情，比如

```
function get_related_author_posts() {
global $authordata, $post;

$authors_posts = get_posts( array( 'author' => $authordata->ID, 'post__not_in' => array( $post->ID ), 'posts_per_page' => 3 ) );

$output = '<ul>';
foreach ( $authors_posts as $authors_post ) {
$category = get_the_category($authors_post->ID);
foreach($category as $c){
$cat=$c->cat_name.' '.$cat;
}

    $output .= '<li>' . get_the_post_thumbnail( $authors_post->ID, 'xsmall-thumb' ) . '<p>' . $cat . '</p> <a href="' . get_permalink( $authors_post->ID ) . '">' . apply_filters( 'the_title', $authors_post->post_title, $authors_post->ID ) . '</a></li>';
}
$output .= '</ul>';

return $output;
} 
```

希望这对你有用..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T05:18:10.840

请尝试此代码，

```
<?php
 $cat=1;
 $yourcat = get_category($cat);
 if ($yourcat) 
 {
    echo '<h2>' . $yourcat->name . '</h2>';
 }
?> 
```

要获取类别名称，

# import - 在 CRM 2011 中导入多对多关系

> ID：15871743
> 
> 赞同：1
> 
> 时间：2013-04-08T05:14:31.040
> 
> 标签：import, many-to-many, dynamics-crm-2011, entity-relationship, dynamics-crm-4

我目前正在将一些遗留数据从 CRM 4.0 迁移到 CRM2011，但是，多对多关系导入存在很大障碍，我已经搜索解决方案并从 codeplex [http://crm2011manytomany.codeplex.com/讨论/ 433816](http://crm2011manytomany.codeplex.com/discussions/433816)，当我导入数据时，它会不断出现“第 1 行的问题 - 行有 1 而不是 2”错误，请提供任何建议谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T05:49:26.920

我不知道该工具是如何工作的，但我发现[这个博客](http://thecrm2011blog.blogspot.se/2011/06/how-to-import-many-to-many.html)介绍了如何进行多对多的导入。除此之外，恐怕是自定义编码可以解决这个问题。编写一个程序来做你想做的事，这需要一些时间，这不是一项微不足道的任务，但它可能是唯一的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T15:17:14.333

您提到的 Codeplex 确实有效，我刚刚对其进行了测试。

但是，文件编码格式存在问题。作为一种解决方法，您可以在 notepad++ 中复制过去的 csv 内容，使用编码 UTF8 并保存它 -> 然后导入将正常工作。

# c# - This.Page.Request 读取不完整的编码参数 c#

> ID：15871749
> 
> 赞同：1
> 
> 时间：2013-04-08T05:14:49.353
> 
> 标签：c#, request, webrequest, params

我有这个问题，

这个 Request["MyParam"] 工作，但是这个方法有一个来自 webrequest 的编码值的问题，比如：MyParam=help & development，我只得到“帮助”这个词，有人有解决这个问题的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:21:05.853

`Encoding.UTF8.GetBytes`用于将字符串转换为字节数组，这是`WebRequest`API 所期望的。

也可以借助这个链接：

[http://tech.top21.de/techblog/20100421-solving-problems-with-request-parameter-encoding.html](http://tech.top21.de/techblog/20100421-solving-problems-with-request-parameter-encoding.html)

# rendering - ZF2：如何在渲染期间捕获异常

> ID：15871754
> 
> 赞同：0
> 
> 时间：2013-04-08T05:15:12.860
> 
> 标签：rendering, zend-framework2

渲染开始时，我的控制器代码已经运行。如果视图脚本中出现错误，通常会导致页面为空或半渲染。我检查了代码，没有订阅事件，PHPRenderer 只是重新抛出异常：

```
 try {
        ob_start();
        include $this->__file;
        $this->__content = ob_get_clean();
    } catch (\Exception $ex) {
        ob_end_clean();
        throw $ex;
    } 
```

对于控制器，有一个“dispatch.error”事件，但这在这里不起作用。有没有办法捕捉这些渲染错误并正确记录/显示错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:32:33.100

您可以将侦听器附加到一个“render.error”事件。请参阅[http://framework.zend.com/manual/2.1/en/modules/zend.mvc.mvc-event.html](http://framework.zend.com/manual/2.1/en/modules/zend.mvc.mvc-event.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T10:57:52.497

2.0.x 分支中没有这样的东西。对于 2.1.x 分支，请查看其他答案。

无论如何，没有这样的事件可以使用。但我认为你不需要它。您不应该在视图中出现错误，因为视图仅用于显示事物，而不是用于业务逻辑。所以我想说你需要修复你的观点，而不是找到一种方法来捕捉这些异常。

至于错误日志，您可以检查 apache 日志。

# node.js - 在jade中，如何在多个级别中使用相同的块名称？

> ID：15871755
> 
> 赞同：1
> 
> 时间：2013-04-08T05:15:18.437
> 
> 标签：node.js, pug, template-engine

有一个工作的基础文件和扩展名，`page.jade`并且`layout.jade`

希望在它们*之间*`page`添加一个扩展，在得到它`block`之前修改它。`layout`可以保留块名称并这样做吗？否则，很多代码需要更改。

目前，在`layout.jade`：

```
身体
  问候
  阻止内容
  p 再见！

```

并且在`page.jade`

```
扩展布局
阻止内容
  p 很高兴认识你

```

结果是：

```
问候
很高兴见到你
再见！

```

希望在和`middle.jade` *之间* 插入扩展名。 会扩展，并且会扩展。`layout.jade``page.jade``page.jade``middle``middle``layout`

例如，`middle.jade`

```
扩展布局
阻止内容
  p 早上好
  阻止内容

```

目标结果：

```
问候
早上好
很高兴见到你
再见

```

当我尝试这个时，该`middle.jade`块根本没有被拾起。

我是不是很愚蠢并且遗漏了一些明显的东西？或者这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T06:21:57.450

要么嵌套不同

```
block page_content
  block content 
```

或使用`block append`/`block prepend`

```
block append page_content
  blabla 
```

# php - 如何检查给定的时间戳是否为 10 分钟？

> ID：15871758
> 
> 赞同：0
> 
> 时间：2013-04-08T05:15:36.533
> 
> 标签：php

我有一个 '2013-04-10T09:00:00Z' 格式的时间戳，基于此我想检查请求的日期时间格式是否在 10 分钟内。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T05:23:55.023

试试这个：

```
$now       = time();
$timestamp = strtotime('2013/04/08T09:00:00Z');
$timediff  = $now - $timestamp;

if (floor($timediff/60) > 10) {
    echo 'Time is 10 minutes older';
}
else {
    echo 'Time is not older then 10 min';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T11:24:58.573

下面是我尝试过的代码，它对我有用，

```
$currentDateTime =new DateTime();
$currentDateTime->setTimezone(new DateTimeZone('UTC'));
$userDateTime = new DateTime($timestamp); //convert users incoming   

$diff = $now->diff($then);

$minutes = ($diff->format('%a')*1440)+($diff->format('%h')*60)+ ($diff->format('%i')); 

if($minutes <=10)
{
     //your code goes here
}
else
{
   //time difference is more then 10 minutes<br/>
} 
```

感谢弗朗西斯科的所有帖子。

# html - 如何在 JSP 中添加时区表单域

> ID：15871759
> 
> 赞同：0
> 
> 时间：2013-04-08T05:15:36.787
> 
> 标签：html, jsp

我有以下代码在 JSP 中添加时区表单字段作为下拉列表供用户选择。

```
<select name="DropDownTimezone" id="DropDownTimezone">
      <option value="-12.0">(GMT -12:00) Eniwetok, Kwajalein</option>
      <option value="-11.0">(GMT -11:00) Midway Island, Samoa</option>
      <option value="-10.0">(GMT -10:00) Hawaii</option>
      <option value="-9.0">(GMT -9:00) Alaska</option>
      <option value="-8.0">(GMT -8:00) Pacific Time (US &amp; Canada)</option>
      <option value="-7.0">(GMT -7:00) Mountain Time (US &amp; Canada)</option>
      <option value="-6.0">(GMT -6:00) Central Time (US &amp; Canada), Mexico City</option>
      <option value="-5.0">(GMT -5:00) Eastern Time (US &amp; Canada), Bogota, Lima</option>
      <option value="-4.0">(GMT -4:00) Atlantic Time (Canada), Caracas, La Paz</option>
      <option value="-3.5">(GMT -3:30) Newfoundland</option>
      <option value="-3.0">(GMT -3:00) Brazil, Buenos Aires, Georgetown</option>
      <option value="-2.0">(GMT -2:00) Mid-Atlantic</option>
      <option value="-1.0">(GMT -1:00 hour) Azores, Cape Verde Islands</option>
      <option value="0.0">(GMT) Western Europe Time, London, Lisbon, Casablanca</option>
      <option value="1.0">(GMT +1:00 hour) Brussels, Copenhagen, Madrid, Paris</option>
      <option value="2.0">(GMT +2:00) Kaliningrad, South Africa</option>
      <option value="3.0">(GMT +3:00) Baghdad, Riyadh, Moscow, St. Petersburg</option>
      <option value="3.5">(GMT +3:30) Tehran</option>
      <option value="4.0">(GMT +4:00) Abu Dhabi, Muscat, Baku, Tbilisi</option>
      <option value="4.5">(GMT +4:30) Kabul</option>
      <option value="5.0">(GMT +5:00) Ekaterinburg, Islamabad, Karachi, Tashkent</option>
      <option value="5.5">(GMT +5:30) Bombay, Calcutta, Madras, New Delhi</option>
      <option value="5.75">(GMT +5:45) Kathmandu</option>
      <option value="6.0">(GMT +6:00) Almaty, Dhaka, Colombo</option>
      <option value="7.0">(GMT +7:00) Bangkok, Hanoi, Jakarta</option>
      <option value="8.0">(GMT +8:00) Beijing, Perth, Singapore, Hong Kong</option>
      <option value="9.0">(GMT +9:00) Tokyo, Seoul, Osaka, Sapporo, Yakutsk</option>
      <option value="9.5">(GMT +9:30) Adelaide, Darwin</option>
      <option value="10.0">(GMT +10:00) Eastern Australia, Guam, Vladivostok</option>
      <option value="11.0">(GMT +11:00) Magadan, Solomon Islands, New Caledonia</option>
      <option value="12.0">(GMT +12:00) Auckland, Wellington, Fiji, Kamchatka</option>
</select> 
```

除了此代码之外，还有什么简单的方法可以添加时区表单域吗？我的意思是使用任何简单的方法或 JQuery 的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T05:27:44.090

> 除了此代码之外，还有什么简单的方法可以添加时区表单域吗？我的意思是使用任何简单的方法或 JQuery 的东西？

您的方法尽可能简单：您确切地知道显示哪些值，哪些值在提交时发送到服务器，值的顺序等。您的方法也可以在没有 Javascript 的情况下工作，而您不必依赖任何外部库。

由于您只在一个页面上使用此代码，因此页面中的重复代码没有问题。所以，我的建议是，保留这段代码，这是最简单的解决方案，你会没事的。

但是，一旦您在不同的页面上使用此代码，您就可以使用[自定义 JSP 标记](http://www.tutorialspoint.com/jsp/jsp_custom_tags.htm)而不是每次都复制它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T05:32:07.463

好吧，您始终可以从 json 数据中填充您的选择字段并使用此插件：http: [//ivaynberg.github.io/select2/](http://ivaynberg.github.io/select2/) .. 但是.. 它并不简单 :)

# python - 使用 Beautiful Soup，在两者之间抓取东西 和

> ID：15871769
> 
> 赞同：0
> 
> 时间：2013-04-08T05:17:00.993
> 
> 标签：python, html, tags, web-scraping, beautifulsoup

这是我到目前为止的代码：

```
import urllib
from bs4 import BeautifulSoup

lis = []
webpage = urllib.urlopen('http://facts.randomhistory.com/interesting-facts-about-     cats.html')
soup = BeautifulSoup(webpage)
for ul in soup:
    for li in soup.findAll('li'):
        lis.append(li)
    for li in lis:
        print li.text.encode("utf-8") 
```

我只是想从开始和结束的“li”标签之间获取猫的事实，并以一种看起来不混乱的方式输出它们。目前，此代码的输出将所有事实重复 4 次左右，并且单词“can't”出现为“canâ€™t”。

我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T05:19:54.610

您不需要外循环 ( `for ul in soup`)。如果您删除它，它将输出一次。

```
soup = BeautifulSoup(webpage)
for li in soup.findAll('li'):
    lis.append(li)
for li in lis:
    print li.text.encode("utf-8") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T05:20:09.663

它`Content-Type`说它的编码是`ISO-8859-1`，但它在撒谎。使用 . 告诉 Beautiful Soup 忽略它的谎言`from_encoding`。你可以让 Beautiful Soup 做更少的工作，方法是给它一个只选择类的东西的`SoupStrainer`for 。最后，您可以简化循环。全部一起：`parse_only``content-td``for`

```
import urllib2
import bs4

webpage = urllib2.urlopen('http://facts.randomhistory.com/interesting-facts-about-cats.html')
soup = bs4.BeautifulSoup(webpage, from_encoding='UTF-8',
                         parse_only=bs4.SoupStrainer(attrs='content-td'))
for li in soup('li'):
    print li.text.encode('utf-8') 
```

您可以通过用单个空格替换连续的空格并删除上标来进一步改进输出。

# php - 在图像中画一条粗细的线？

> ID：15871770
> 
> 赞同：0
> 
> 时间：2013-04-08T05:17:04.443
> 
> 标签：php, image, line, gd, thickness

我想用 GD 库用 PHP 在图像中画一条粗细的线。我在此页面[PHP: imageline - Manual](http://php.net/imageline)中找到了一些解决方案，但是当行的 (x, y) 位置发生变化时，它们似乎都不能正常工作。

我在页面中找到了 3 个功能

```
function dickelinie($img, $start_x, $start_y, $end_x, $end_y, $color, $thickness)
{
    $angle = (atan2(($start_y - $end_y), ($end_x - $start_x)));

    $dist_x = $thickness * (sin($angle));
    $dist_y = $thickness * (cos($angle));

    $p1x = ceil(($start_x + $dist_x));
    $p1y = ceil(($start_y + $dist_y));
    $p2x = ceil(($end_x + $dist_x));
    $p2y = ceil(($end_y + $dist_y));
    $p3x = ceil(($end_x - $dist_x));
    $p3y = ceil(($end_y - $dist_y));
    $p4x = ceil(($start_x - $dist_x));
    $p4y = ceil(($start_y - $dist_y));

    $array = array(0 => $p1x, $p1y, $p2x, $p2y, $p3x, $p3y, $p4x, $p4y);
    imagefilledpolygon ($img,  $array, (count($array) / 2), $color);
}

function imagelinethick($image, $x1, $y1, $x2, $y2, $color, $thick = 1)
{
    if ($thick == 1)
    {
        return imageline($image, $x1, $y1, $x2, $y2, $color);
    }

    $t = $thick / 2 - 0.5;

    if ($x1 == $x2 || $y1 == $y2)
    {
        return imagefilledrectangle($image, round(min($x1, $x2) - $t), round(min($y1, $y2) - $t), round(max($x1, $x2) + $t), round(max($y1, $y2) + $t), $color);
    }

    $k = ($y2 - $y1) / ($x2 - $x1);
    $a = $t / sqrt(1 + pow($k, 2));

    $points = array(
        round($x1 - (1+$k)*$a), round($y1 + (1-$k)*$a),
        round($x1 - (1-$k)*$a), round($y1 - (1+$k)*$a),
        round($x2 + (1+$k)*$a), round($y2 - (1-$k)*$a),
        round($x2 + (1-$k)*$a), round($y2 + (1+$k)*$a),
    );

    imagefilledpolygon($image, $points, 4, $color);
    return imagepolygon($image, $points, 4, $color);
}

function imagelinethick1($image, $x1, $y1, $x2, $y2, $color, $thick = 1)
{
    imagesetthickness($image, $thick);
    imageline($image, $x1, $y1, $x2, $y2, $color);
} 
```

我的测试用例是

```
header("Content-Type: image/png");
$image = @imagecreatetruecolor(500, 500) or die("Cannot initialize new GD image stream");
$color = imagecolorallocate($image, 255, 255, 255);

# Line thickness equals to 18 pixels
$thickness = 18;

# OK
dickelinie($image, 0, 0, 0, 500, $color, $thickness);

# Wrong: The thickness of the line is doubled
dickelinie($image, 200, 0, 200, 500, $color, $thickness);

# Wrong: The thickness of the line is halved
imagelinethick($image, 0, 0, 0, 500, $color, $thickness);

# OK
imagelinethick($image, 200, 0, 200, 500, $color, $thickness);

# Wrong: The thickness of the line is halved
imagelinethick1($image, 0, 0, 0, 500, $color, $thickness);

# OK
imagelinethick1($image, 200, 0, 200, 500, $color, $thickness);

imagepng($image);
imagedestroy($image); 
```

谁能告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-23T13:17:53.427

这不是解决问题的最快方法，但我在我的一个项目中使用了这个功能：

```
function thickline( $img, $x1, $y1, $x2, $y2, $color, $thickness ) {
  $radius = $thickness * .5;
  $vx = $x2 - $x1;
  $vy = $y2 - $y1;
  $steps = ceil( .5 + max( abs($vx), abs($vy) ) );
  $vx /= $steps;
  $vy /= $steps;
  $x = $x1;
  $y = $y1;
  while( $steps --> 0 ) {
    imagefilledellipse( $img, $x, $y, $radius, $radius, $color );
    $x += $vx;
    $y += $vy;
  }
} 
```

这个想法是在一条线的每个点上绘制一个圆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T05:22:45.610

php.net 的示例#1`imageline`是“画一条粗线”。它建议使用`imagesetthickness`或以下代码：

```
<?php
function imagelinethick($image, $x1, $y1, $x2, $y2, $color, $thick = 1)
{
    /* this way it works well only for orthogonal lines
    imagesetthickness($image, $thick);
    return imageline($image, $x1, $y1, $x2, $y2, $color);
    */
    if ($thick == 1) {
        return imageline($image, $x1, $y1, $x2, $y2, $color);
    }
    $t = $thick / 2 - 0.5;
    if ($x1 == $x2 || $y1 == $y2) {
        return imagefilledrectangle($image, round(min($x1, $x2) - $t), round(min($y1, $y2) - $t), round(max($x1, $x2) + $t), round(max($y1, $y2) + $t), $color);
    }
    $k = ($y2 - $y1) / ($x2 - $x1); //y = kx + q
    $a = $t / sqrt(1 + pow($k, 2));
    $points = array(
        round($x1 - (1+$k)*$a), round($y1 + (1-$k)*$a),
        round($x1 - (1-$k)*$a), round($y1 - (1+$k)*$a),
        round($x2 + (1+$k)*$a), round($y2 - (1-$k)*$a),
        round($x2 + (1-$k)*$a), round($y2 + (1+$k)*$a),
    );
    imagefilledpolygon($image, $points, 4, $color);
    return imagepolygon($image, $points, 4, $color);
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-01T23:03:45.163

你的一些测试用例是错误的。每个以 x = 0 呈现的测试用例都将被切成两半，因为例程会将新的粗线居中到给定的 xy 坐标上。因此，一半的渲染线在位图之外渲染并丢失。

鉴于您的测试用例有一点缺陷，我们可以看到“dickelinie”方法总是将预期厚度加倍。

我仍然使用“dickelinie”方法来渲染一个简单的模拟时钟，因为它为我的需要产生了最好的结果。我只是通过了一半的厚度以确保它起作用。我还在“dickelinie”方法的末尾添加了以下代码，以确保结果行在被告知时呈现抗锯齿：

```
return imagepolygon($img,  $array, (count($array) / 2), $color); 
```

如果您需要以不同角度渲染线条，您将需要这个。

# ios - 从表 sqlite 中删除 raw 的问题

> ID：15871775
> 
> 赞同：0
> 
> 时间：2013-04-08T05:17:18.577
> 
> 标签：ios, sqlite, tableview

这就是我在标题中所做的

```
static sqlite3 *database = nil;
static sqlite3_stmt *deleteStmt = nil;

@implementation SQLAppDelegate

@synthesize window;
@synthesize navigationController;
@synthesize coffeeArray; 
```

这就是我用来删除原始的

```
 - (void) removeCoffee:(NSNumber *)coffeeObj {

      NSLog(@"coffeeObj%@",coffeeObj);

        int myInteger = [coffeeObj integerValue];
        NSLog(@"myInteger%d",myInteger);
      // print this myInteger0

        NSLog(@"%@",coffeeArray);
       //print object
   if (sqlite3_open([self getDBPath], &database) == SQLITE_OK)
   {    
   NSLog(@"myInteger%@",[self getDBPath]);

        NSString *sql = [NSString stringWithFormat: @"delete from Coffee where CoffeeID =%d",myInteger];

                             const char *del_stmt = [sql UTF8String];
       NSLog(@"%@",del_stmt); // getting print 
 // print this  delete from Coffee where CoffeeID =0.

                             sqlite3_prepare_v2(database, del_stmt, -1, & deleteStmt, NULL);
                 NSLog(@"sqlite3_step(deleteStmt) ==           SQLITE_DONE%@",sqlite3_step(deleteStmt) == SQLITE_DONE);

    // this print null

                             if (sqlite3_step(deleteStmt) == SQLITE_DONE)
                             { 
                               //NSLog(@"hi") this is not getting print

                             } else {
                                  //NSLog(@"hi") this is getting print
                             }
                             sqlite3_finalize(deleteStmt);
                             sqlite3_close(database);
    [coffeeArray removeObjectAtIndex:myInteger];
        NSLog(@"%@",coffeeArray);
       // object is deleted 
    }
} 
```

我的桌子如下

```
table name = Coffee

CoffeeID(INTEGER)=0

CoffeeName(VARCHAR)=Latte

Price(REAL)=2.99 
```

事情运行完美的地方从数组中删除了对象，这就是为什么它没有出现在表格单元格上。但它没有从数据库表中删除，这就是为什么当我再次启动应用程序然后它再次显示时请帮助我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T05:24:29.947

在开始删除对象之前，只要数据库是否正确打开即可。就这样试试吧。

```
//Setting path 
    NSArray *dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

      NSString *docsDir = [dirPaths objectAtIndex:0];

    databasePath = [[NSString alloc] initWithString: [docsDir stringByAppendingPathComponent: @"database.db"]];

    const char *dbpath=[databasePath UTF8String];

        if (sqlite3_open(dbpath, &database) == SQLITE_OK)
        {
      NSString *sql = [NSString stringWithFormat: @"delete from Coffee where CoffeeID =%d",myInteger];

                             const char *del_stmt = [sql UTF8String];

                             sqlite3_prepare_v2(database, del_stmt, -1, & deleteStmt, NULL);
                             if (sqlite3_step(deleteStmt) == SQLITE_DONE)
                             {

                             } else {

                             }
                             sqlite3_finalize(deleteStmt);
                             sqlite3_close(database);
    [coffeeArray removeObjectAtIndex:myInteger];
        NSLog(@"%@",coffeeArray);
       // object is deleted 

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T07:05:53.483

```
if(sqlite3_open([[self filepath] UTF8String], &db) == SQLITE_OK)
    {
        Deletestatement = nil;  

        if(Deletestatement == nil)
        {
            const char *sql = "delete from Sqlitemanager2;";

            if(sqlite3_prepare_v2(db, sql, -1, &Deletestatement, NULL) != SQLITE_OK)
                NSAssert1(0, @"Error while creating delete statement. '%s'", sqlite3_errmsg(db));
        }

        if (SQLITE_DONE != sqlite3_step(Deletestatement)) //prathibha for problem in if
            NSAssert1(0, @"Error while deleting. '%s'", sqlite3_errmsg(db));

        sqlite3_finalize(Deletestatement);

    }
I hope this will help you. 
```

# c# - WinRT如何获取给定字符串的像素宽度

> ID：15871778
> 
> 赞同：0
> 
> 时间：2013-04-08T05:17:29.870
> 
> 标签：c#, windows-runtime, microsoft-metro, winrt-xaml, pixels

这里有一个解决方案：

[格式化文本](http://msdn.microsoft.com/en-us/library/system.windows.media.formattedtext.aspx)

但是，唉，这在 WinRT 中不受支持。WinRT 中是否有替代品/替代品？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-10-19T12:43:59.217

以下解决方案取自此答案： [Calculate Font baseline in WinRT](https://stackoverflow.com/questions/15862600/calculate-font-baseline-in-winrt)

```
private double GetBaselineOffset(double size, FontFamily family = null, FontWeight? weight = null, FontStyle? style = null, FontStretch? stretch = null)
{
    var temp = new TextBlock();
    temp.FontSize = size;
    temp.FontFamily = family ?? temp.FontFamily;
    temp.FontStretch = stretch ?? temp.FontStretch;
    temp.FontStyle = style ?? temp.FontStyle;
    temp.FontWeight = weight ?? temp.FontWeight;

    var _size = new Size(10000, 10000);
    var location = new Point(0, 0);

    temp.Measure(_size);
    temp.Arrange(new Rect(location, _size));

    return temp.BaselineOffset;
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-24T07:39:28.463

我设法通过 HACK 类型的解决方案解决了这个问题。我的主要要求是为一些文本保留空间。我使用了每个“空白空间”所需的固定字体和计算空间。一旦我知道了这一点，剩下的就变得微不足道了。

# php - php需要什么权限？

> ID：15871782
> 
> 赞同：0
> 
> 时间：2013-04-08T05:18:07.453
> 
> 标签：php, postfix-mta

我想检查后缀活动队列。我使用的 php 脚本

```
$active = shell_exec('/bin/ls -1 /var/spool/postfix/active | /usr/bin/wc -l'); 
```

但在日志中我看到

```
/bin/ls: cannot open directory /var/spool/postfix/active: Permission denied 
```

我需要添加哪个组 php 或 postfix 以避免此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T04:43:13.250

通常，postfix 邮件队列是 0700 模式，所以只有 postfix 可以直接读/写队列目录。看起来您正在尝试做的是获取**活动**队列中的项目计数。您可以使用[`mailq`](http://linux.die.net/man/1/mailq.postfix)（或`postqueue -p`）命令来执行此操作，您应该能够作为 apache 运行该命令。它列出了所有队列的所有队列项目，但就像手册页所说，**活动**队列中`*`的队列 ID 后面有一个。因此，您可以尝试将`ls -l`命令替换为：

```
$active = shell_exec('/usr/sbin/postqueue -p | grep '^[A-F0-9]*\*' | wc -l'); 
```

# java - 现在从数据库中获取行时的结果集的值

> ID：15871786
> 
> 赞同：0
> 
> 时间：2013-04-08T05:18:15.483
> 
> 标签：java, jdbc, resultset

我想知道，在从 java(JDBC) 中的数据库中触发 select 查询时。假设 execute(Query) 不返回任何行，那么Resultset 对象的值是多少？？？它是空的还是可以是其他的？？？请回复

```
Statement statement = connection.createStatement();
ResultSet result = statement.executeQuery("select * from people"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T05:22:44.423

检查这个[Execute Query](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#executeQuery%28java.lang.String%29)，它说

> 一个 ResultSet 对象，包含给定查询产生的数据；从不为空

所以结果集为空不为空

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T05:31:15.590

请参阅[语句接口](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html)的 Javadocs 清楚地提到 executeQuery 永远不会返回 null。如果没有要获取的行，那么它将返回一个空的结果集。

# git - 自动镜像 GitHub 存储库

> ID：15871787
> 
> 赞同：10
> 
> 时间：2013-04-08T05:18:17.263
> 
> 标签：git, github, mirror

我怀疑以前有人问过这个问题，尽管我能找到的都是相似但不同的问题，或者是相同的问题，但只有对我不起作用的解决方案。

GitHub上有一个我无法控制的存储库，我想镜像。对于镜像，我的意思是有一个可以自动更新的克隆。我希望这面镜子也出现在 GitHub 上。最好任何解决方案都不会涉及我这边的太多配置或设置工作。但是，如果需要，我可以在某些 VPS 上使用 cron 运行脚本。

我可以纯粹通过 GitHub 创建这样的镜像吗？如果没有，是否准备好使用脚本来执行此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T06:23:41.887

有趣的问题，考虑到所有[Eclipse 存储库](http://git.eclipse.org/c/)都镜像[在 GitHub 上](https://github.com/eclipse)。

但是，正如[Wayne](http://waynebeaton.wordpress.com/about/)[最近（2013 年 4 月）的文章](http://waynebeaton.wordpress.com/2013/04/03/eclipse-at-github/)所示，没有自动的 GitHub 方式来镜像 repo。

> 据我所知，GitHub 没有提供安排定期拉取的机制（如果我错了，请纠正我），这意味着推送到 GitHub 克隆将成为我们的责任。

另请参阅[错误 402183](https://bugs.eclipse.org/bugs/show_bug.cgi?id=402183)。

因此，VPS 上的脚本（即*您*设置的东西）仍然是实现这一点的最可靠方法。

在“[如何在 Github 上镜像您的 git 存储库](https://www.chiliproject.org/projects/chiliproject/wiki/HowTo_mirror_your_git_repository_on_Github)”的基础上，您需要自己的本地克隆，并使用以下脚本：

*   定期从 GitHub 存储库中提取
*   推送到 Github 上的镜像

2015 年更新（2 年后）：（[`beefsack/git-mirror`](https://github.com/beefsack/git-mirror)在[go](http://golang.org)中）这样的工具是：

> 旨在在本地或您选择的任何地方创建和提供 Git 存储库的只读镜像。
> 最近的一次 GitHub 中断进一步说明了开发人员不应该依赖单个遥控器来托管代码的事实。

# android - Android-从 url 下载 Http 重定向到 html

> ID：15871792
> 
> 赞同：1
> 
> 时间：2013-04-08T05:18:48.600
> 
> 标签：android, http, redirect, download

我正在尝试从主机下载 epub，但我拥有的链接是 HTTP，我只下载重定向我的 html，因为我可以下载原始文件？

这是我的下载代码：

```
URL url = new URL("http://st10.file.karelia.ru/25nv8s/9789d242bd127ce31991dd68fa434caa/7958c0b30a9fa22938770ac65e9f2544/principito.epub");
URLConnection conexion = url.openConnection();
conexion.connect(); 
```

我只是下载一个 html 文件，但是当我使用例如来自下拉框的链接以 https:// 开头时，一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:32:16.670

尝试这个

```
URL url = new URL("http://st12.file.karelia.ru/25nv8s/598577e8b5897f89c7e44edb0b2f09aa/6d2b030e8c28b800e957af40960b8d46/20mil_leguas.epub?force");
URLConnection conexion = url.openConnection();
conexion.connect(); 
```

# android - Android中自定义视图的“instanceof”方法？

> ID：15871793
> 
> 赞同：3
> 
> 时间：2013-04-08T05:19:10.513
> 
> 标签：android, android-layout, instanceof, android-inflate

我在 App 运行期间对一些布局进行充气并将它们存储在类型的变量中`View`。我知道我可以`Tag`在充气后设置一个视图并检查它以检测它的类型，但是还有另一种方法来检测它吗？例如一种方法喜欢`instanceof`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:52:27.000

尝试这样的事情

```
 View yourView1=(View)findViewById(R.id.yourView1);

     boolean isMyView=false; 
        try{
           YourView yv=(YourView)yourView1;
     isMyView=true;
        }
        catch (ClassCastException e)
        {
     isMyView=false; 
            e.printStackTrace();
        }

    if(isMyView)
       {
         //OK it is yourView
        } 
```

# jquery - jquery插件与数据库集成

> ID：15871794
> 
> 赞同：0
> 
> 时间：2013-04-08T05:19:17.223
> 
> 标签：jquery, asp.net

我在 ASP.NET 中使用 jquery 饼图。饼图工作正常，但我想绑定数据库中的值。如何在饼图中绑定数据库值。我在数据库中创建了一个表，我想从数据库中获取值到饼图中。

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Highcharts Example</title>
<script type="text/javascript"  src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript">
$(function () {
var chart;
$(document).ready(function () {
// Radialize the colors
Highcharts.getOptions().colors = $.map(Highcharts.getOptions().colors, function (color)       {
return {
radialGradient: {
cx: 0.5,
cy: 0.3,
r: 0.7
},
stops: [
[0, color],
[1, Highcharts.Color(color).brighten(-0.3).get('rgb')] // darken
]
};
});
// Build the chart
chart = new Highcharts.Chart(
{
chart:
{
renderTo: 'container',
plotBackgroundColor: null,
plotBorderWidth: null,
plotShadow: false
},
title: {
text: 'Browser market shares at a specific website, 2010'
},
tooltip: {
pointFormat: '{series.name}: <b>{point.percentage}%</b>',
percentageDecimals: 1
},
plotOptions: {
pie:
{
allowPointSelect: true,
cursor: 'pointer',
dataLabels:
{
enabled: true,
color: '#000000',
connectorColor: '#000000',
formatter: function () {
return '<b>' + this.point.name + '</b>: ' + this.percentage + ' %';
}
}
}
},
series: [
{
type: 'pie',
name: 'Browser share',
data: [
['Firefox', 45.0],
['IE', 26.8],
{
name: 'Chrome',
y: 12.8,
sliced: true,
selected: true
},
['Safari', 8.5],
['Opera', 6.2],
['Others', 0.7]
]
}
]
});
});
});
</script> 
</head>
<body>
<script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>
<di v id="container" style="min-width: 400px; height: 400px; margin: 0 auto">
</div>
</body> 
```

# javascript - 为 highcharts 中的工具提示绘制自定义背景形状

> ID：15871795
> 
> 赞同：0
> 
> 时间：2013-04-08T05:19:22.880
> 
> 标签：javascript, highcharts

我被要求在我正在进行的项目中使用 highcharts/stackcharts。我们的美工设计了与我们正在使用的其他组件相匹配的外观和感觉。我需要更改工具提示的形状和大小以及导航器上的手柄。基本上我需要对图表进行皮肤处理。

在这个阶段我不能使用另一个图表库，因为我们已经致力于 highchars 但如果这是不可能的，那么这对我们来说将是一个交易破坏者。

Stackcharts 文档说明了这一点：

> 手柄：用于拖动缩放区域的手柄的对象选项。可用的选项是 backgroundColor 和 borderColor。

这还不够好:(

我还尝试使用以下代码绘制自定义工具提示：

```
 tooltip: {
            useHTML: true,
            formatter: function () {
                var st = '<div style="background-color:#ff8000"><svg version="1.1" width="55" height="55"><path d="m 27.7 3.9 C 13.5 3.9 1.9 15.4 1.9 29.6 C 1.9 43.8 13.5 55.3 27.7 55.3 C 41.9 55.3 53.4 43.8 53.4 29.6 C 53.4 15.4 41.9 3.9 27.7 3.9 Z M 21.8 14.8 C 22 14.7 22.2 14.8 22.3 14.8 C 23.8 15.3 24.2 18 23.2 20.9 C 22.3 23.9 20.4 25.9 19 25.5 C 17.5 25 17.2 22.3 18.1 19.3 C 18.9 16.7 20.5 14.9 21.8 14.8 Z M 29.7 14.9 C 31.6 14.9 33.9 17.1 35.2 20.3 C 36.8 23.9 36.5 27.5 34.6 28.4 C 32.7 29.2 29.8 26.9 28.3 23.2 C 26.7 19.6 27 16 28.9 15.1 C 29.2 15 29.5 15 29.7 14.9 Z M 49.3 28 L 48.6 29.4 C 44.2 37.2 38 43.8 31.3 46.3 C 27.9 47.5 24.5 47.7 21.1 46.5 C 17.8 45.2 14.6 42.6 11.7 38.2 L 11.2 37.3 L 12.2 37.4 C 31.3 39.8 38.2 33.4 47.9 28.7 L 49.3 28z" fill="#ffdd55" stroke="none" stroke-width="0" fill-opacity="1" stroke-opacity="0"></path></svn></div>';
                return st;
            }
        } 
```

[http://jsfiddle.net/pdDk4/](http://jsfiddle.net/pdDk4/)

但是 svg 被拉入了边框，我似乎无法在不修改它的情况下替换它:(

我不想那样做。

我已经调查和护目镜几个小时没有任何成功。有谁知道我怎么能做到这一点？

请问先生，我可以定制一些morrr 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:06:35.050

如果将 useHTML 设置为 true，则可以在 CSS 中设置背景。

[http://jsfiddle.net/pdDk4/5/](http://jsfiddle.net/pdDk4/5/)

```
 formatter: function () {
                var st = '<div class="tooltip">'+this.y+'</div>';
                return st;
            } 
```

CSS：

```
 .tooltip {
    width:200px;
    height:200px;
    background:url('http://aeseda.psu.edu/wp-content/themes/theme-mingle/assets/images/placeholder.jpg');
} 
```

我建议不要以这种方式使用 SVG，因为在 IE<8 中不会出现工具提示，因为旧版浏览器使用 VML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:29:14.177

需要指出的重要一点是，我需要绘制一个自定义形状作为背景。正确的解决方案是使用类似 raphaeljs 或类似的东西来绘制自定义形状。

为了简单起见，我更新了小提琴以反映我所追求的解决方案。它与我的原始代码并没有太大不同，但当我第一次问这个问题时，我一定是陶醉了。这是更新小提琴：

[http://jsfiddle.net/pdDk4/](http://jsfiddle.net/pdDk4/)

有了这个，您可以绘制自定义形状作为工具提示的背景。请记住，这在 IE8 中不起作用，但您可以使用 raphaeljs 之类的东西将 SVG 形状转换为 VML。

```
 formatter: function () {
    var st = '<svg version="1.1" width="55" height="55"><path d="m 27.7 3.9 C 13.5 3.9 1.9 15.4 1.9 29.6 C 1.9 43.8 13.5 55.3 27.7 55.3 C 41.9 55.3 53.4 43.8 53.4 29.6 C 53.4 15.4 41.9 3.9 27.7 3.9 Z M 21.8 14.8 C 22 14.7 22.2 14.8 22.3 14.8 C 23.8 15.3 24.2 18 23.2 20.9 C 22.3 23.9 20.4 25.9 19 25.5 C 17.5 25 17.2 22.3 18.1 19.3 C 18.9 16.7 20.5 14.9 21.8 14.8 Z M 29.7 14.9 C 31.6 14.9 33.9 17.1 35.2 20.3 C 36.8 23.9 36.5 27.5 34.6 28.4 C 32.7 29.2 29.8 26.9 28.3 23.2 C 26.7 19.6 27 16 28.9 15.1 C 29.2 15 29.5 15 29.7 14.9 Z M 49.3 28 L 48.6 29.4 C 44.2 37.2 38 43.8 31.3 46.3 C 27.9 47.5 24.5 47.7 21.1 46.5 C 17.8 45.2 14.6 42.6 11.7 38.2 L 11.2 37.3 L 12.2 37.4 C 31.3 39.8 38.2 33.4 47.9 28.7 L 49.3 28z" fill="rgba(255, 150, 0, 0.8)" stroke="none" stroke-width="0" fill-opacity="1" stroke-opacity="0"></path></svn><div style="position:absolute;left:10px;top:10px">this.y =' + this.y + '<div>';
    return st;
  } 
```

# ruby - 什么是 Ruby 1.8.7 序列化时间而不丢失精度的方法？

> ID：15871796
> 
> 赞同：1
> 
> 时间：2013-04-08T05:19:31.283
> 
> 标签：ruby

在 Ruby 2.0 / 1.9.3 中

```
t = Time.now
t == Time.at(t.to_r)
# => true 
```

清楚地：

```
t = Time.now
t == Time.at(t.to_i)
# => false 
```

不会削减它。

什么是 Ruby 1.8.7 序列化`Time`缺少 using 的方式`Marshal`，而不会丢失精度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T06:11:17.783

虽然`Time.to_r`在 1.8.7 中不可用，但是`Time.to_f`：

```
t = Time.now
t == Time.at(t.to_f)
# => true 
```

**更新：**由于事实证明您希望在 1.8.7 和 2.0 / 1.9.3 中以相同的方式执行此操作，我会指出这`to_f`仍然是几乎可以肯定的最佳选择。尽管

```
t == Time.at(t.to_f) 
```

现在返回`false`，那只是因为您在 1.9.3 / 2.0 中的 Time 对象比浮点数具有更高的精度。

```
t.to_f == Time.at(t.to_f).to_f
# => true

t - Time.at(t.to_f)
# => 8.09310302734375e-08 
```

这些是转换为浮点数时损失的一小部分微秒。

# android - moveTaskToBack 在不同的 android 操作系统中不起作用

> ID：15871800
> 
> 赞同：1
> 
> 时间：2013-04-08T05:19:58.150
> 
> 标签：android, broadcastreceiver, asmack, android-backup-service

我正在使用 moveTaskToBack 将我的应用程序置于后台。应用程序在 OS 2.2 中运行良好，但是当我在 OS 2.3.6 中测试相同的应用程序时，我遇到了一些奇怪的问题。
如果我将应用程序置于后台，然后再次置于前台，则互联网连接正常，但当应用程序处于前台时，如果我断开互联网连接，将应用程序置于后台，当我再次返回应用程序时，意味着应用程序进入前台我的应用程序调用 onCreate() 并且应用程序崩溃的时间。

代码：

```
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

// ////////////////////////////////////////////////////////////

Log.d("BuddyList ", "OnCreate");

txtIsConnected = (TextView) findViewById(R.id.isConnected);
txtIsConnected.setText("Online");
txtIsConnected.setTextColor(Color.GREEN);

listener = new PacketListener() {
public void processPacket(Packet packet) {

ActivityManager am = (ActivityManager) SnapApp.getInstance()
.getSystemService(ACTIVITY_SERVICE);
List<ActivityManager.RunningTaskInfo> taskInfo = am
.getRunningTasks(1);
ComponentName componentInfo = taskInfo.get(0).topActivity;

String className = componentInfo.getClassName();

if (packet instanceof Message) {
final Message message = (Message) packet;

if (className
.equalsIgnoreCase("com.snapwork.xmppchatapp.ChatActivity")) {
if (ChatActivity.instance.to.contains(StringUtils
.parseBareAddress(message.getFrom()))) {
runOnUiThread(new Runnable() {
@Override
public void run() {
// TODO Auto-generated method stub
ChatActivity.instance.name(
message.getBody(),
ChatActivity.instance.to);
}
});

} else {
if (XMPPClient.notificationSenders.size() > 0
&& XMPPClient.notificationSenders
.contains(StringUtils
.parseBareAddress(message
.getFrom()))) {
NOTIFICATION_ID++;
}

XMPPClient.notificationMessages.add(message
.getBody());
XMPPClient.notificationSenders.add(StringUtils
.parseBareAddress(message.getFrom()));

runOnUiThread(new Runnable() {

@Override
public void run() {
// TODO Auto-generated method stub
Notifications.addNotification(
message.getFrom(),
message.getBody());
}
});

}
} else if (className
.equalsIgnoreCase("com.snapwork.xmppchatapp.BuddyList")) {
XMPPClient.OfflineMessages.add(message.getBody());
XMPPClient.OfflineSenders.add(StringUtils
.parseBareAddress(message.getFrom()));

runOnUiThread(new Runnable() {

@Override
public void run() {
mAdapter = new DataAdapter(BuddyList.this,
R.layout.multi_line_list_item, datalist);
listMessages.setAdapter(mAdapter);
mAdapter.notifyDataSetChanged();
}
});

}

else {
// System.out.println("While some where !!!");

XMPPClient.notificationMessages.add(message.getBody());
XMPPClient.notificationSenders.add(StringUtils
.parseBareAddress(message.getFrom()));

runOnUiThread(new Runnable() {

@Override
public void run() {
// TODO Auto-generated method stub
Notifications.addNotification(
message.getFrom(), message.getBody());
}
});
}

} else if (packet instanceof Presence) {
// System.out.println("u have a frnd requ........ !!!");
}

}
};

// ////////////////////////////////////////////////////////////

PacketFilter filter = new MessageTypeFilter(Message.Type.chat);
XMPPClient.connection.addPacketListener(listener, filter);

buddyList = getIntent().getStringArrayListExtra("buddyList");
buddyStatus = getIntent().getStringArrayListExtra("buddystatus");

filteredList = getIntent().getStringArrayListExtra("buddyList");

filteredStat = getIntent().getStringArrayListExtra("buddystatus");
datalist = buddyList.toArray(new String[buddyList.size()]);
Statlist = buddyStatus.toArray(new String[buddyStatus.size()]);
recipient = (EditText) findViewById(R.id.recipient);
imgFindAdd = (ImageView) findViewById(R.id.findAddAccount);

imgFindAdd.setOnClickListener(new OnClickListener() {

@Override
public void onClick(View v) {
// TODO Auto-generated method stub

Intent i = new Intent(BuddyList.this, FindAndAdd.class);
i.putStringArrayListExtra("buddyList", buddyList);
i.putStringArrayListExtra("buddystatus", buddyStatus);
// startActivity(i);

startActivity(i);

}
});

for (int i = 0; i < datalist.length; i++) {
// Log.d("datalist : ", "" + datalist[i]);
}
listMessages = (ListView) findViewById(R.id.listMessages);
// setListAdapter();

mAdapter = new DataAdapter(BuddyList.this,
R.layout.multi_line_list_item, datalist);
listMessages.setAdapter(mAdapter);
mAdapter.notifyDataSetChanged();
listMessages.setTextFilterEnabled(true);
listMessages.setOnItemClickListener(new OnItemClickListener() {

@Override
public void onItemClick(AdapterView<?> arg0, View v, int position,
long id) {

Intent intent = new Intent(BuddyList.this, ChatActivity.class);
Bundle b = new Bundle();
b.putString("to", filteredList.get(position));

intent.putExtras(b);
intent.putExtra("ustatus", Statlist[position]);

intent.putExtra("from", "BuddyList");
startActivity(intent);

}
});

/**
* Enabling Search Filter
* */
recipient.addTextChangedListener(new TextWatcher() {

@Override
public void onTextChanged(CharSequence cs, int arg1, int arg2,
int arg3) {
// When user changed the Text
BuddyList.this.mAdapter.getFilter().filter(cs);

}

@Override
public void beforeTextChanged(CharSequence arg0, int arg1,
int arg2, int arg3) {
// TODO Auto-generated method stub

}

@Override
public void afterTextChanged(Editable arg0) {
// TODO Auto-generated method stub
}
});

packetListener = new PacketListener() {

@Override
public void processPacket(Packet packet) {

final Presence presence = (Presence) packet;

if (presence.getType() == Type.available
|| presence.getType() == Type.unavailable) {
System.out.println("Finally Changing");
refresh();
}

ActivityManager am = (ActivityManager) SnapApp.getInstance()
.getSystemService(ACTIVITY_SERVICE);

List<ActivityManager.RunningTaskInfo> taskInfo = am
.getRunningTasks(1);
ComponentName componentInfo = taskInfo.get(0).topActivity;

String className = componentInfo.getClassName();

if (className
.equalsIgnoreCase("com.snapwork.xmppchatapp.BuddyList")) {

if (presence.getType() == Type.subscribe) {

XMPPClient.OfflineFrndReq
.add(presence.getType().name());
XMPPClient.OfflineFrndReqSender.add(presence.getFrom());
FriendRequestNotification.addNotification(
presence.getFrom(), "abcd");

} else if (presence.getType() == Type.unsubscribed) {
runOnUiThread(new Runnable() {

@Override
public void run() {
ShowToast1();
}
});

} else if (presence.getType() == Type.subscribed) {

Presence subscribed = new Presence(
Presence.Type.subscribed);
subscribed.setTo(StringUtils.parseBareAddress(presence
.getFrom()));
XMPPClient.connection.sendPacket(subscribed);

runOnUiThread(new Runnable() {

@Override
public void run() {
// TODO Auto-generated method stub
if (XMPPClient.flag)
new ShowDialogAsyncTask().execute();
else
ShowToast();
}
});

}

}

}
};

XMPPClient.connection.addPacketListener(packetListener,
new PacketTypeFilter(Presence.class));

Button btnSwitch = (Button) findViewById(R.id.switchaccount);

btnSwitch.setOnClickListener(new OnClickListener() {

@Override
public void onClick(View v) {
// TODO Auto-generated method stub
Intent i = new Intent(BuddyList.this, Accounts.class);
startActivity(i);
}
});

} 
```

日志猫：
`04-08 11:33:53.585: E/AndroidRuntime(29175): FATAL EXCEPTION: main 04-08 11:33:53.585: E/AndroidRuntime(29175): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.snapwork.xmppchatapp/com.snapwork.xmppchatapp.BuddyList}: java.lang.NullPointerException 04-08 11:33:53.585: E/AndroidRuntime(29175): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651) 04-08 11:33:53.585: E/AndroidRuntime(29175): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667) 04-08 11:33:53.585: E/AndroidRuntime(29175): at android.app.ActivityThread.access$1500(ActivityThread.java:117) 04-08 11:33:53.585: E/AndroidRuntime(29175): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935) 04-08 11:33:53.585: E/AndroidRuntime(29175): at android.os.Handler.dispatchMessage(Handler.java:99) 04-08 11:33:53.585: E/AndroidRuntime(29175): at android.os.Looper.loop(Looper.java:130) 04-08 11:33:53.585: E/AndroidRuntime(29175): at android.app.ActivityThread.main(ActivityThread.java:3687) 04-08 11:33:53.585: E/AndroidRuntime(29175): at java.lang.reflect.Method.invokeNative(Native Method) 04-08 11:33:53.585: E/AndroidRuntime(29175): at java.lang.reflect.Method.invoke(Method.java:507) 04-08 11:33:53.585: E/AndroidRuntime(29175): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867) 04-08 11:33:53.585: E/AndroidRuntime(29175): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625) 04-08 11:33:53.585: E/AndroidRuntime(29175): at dalvik.system.NativeStart.main(Native Method) 04-08 11:33:53.585: E/AndroidRuntime(29175): Caused by: java.lang.NullPointerException 04-08 11:33:53.585: E/AndroidRuntime(29175): at com.snapwork.xmppchatapp.BuddyList.onCreate(BuddyList.java:266) 04-08 11:33:53.585: E/AndroidRuntime(29175): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 04-08 11:33:53.585: E/AndroidRuntime(29175): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615) 04-08 11:33:53.585: E/AndroidRuntime(29175): ... 11 more 04-08 11:33:53.593: E/liblog(1514): failed to call dumpstate 04-08 11:33:53.593: E/(1514): Dumpstate > /data/log/dumpstate_app_error`

# php - 如何处理有错误的 Beanstalkd 作业

> ID：15871801
> 
> 赞同：4
> 
> 时间：2013-04-08T05:20:02.320
> 
> 标签：php, queue, laravel, laravel-4, beanstalkd

当我的 Beanstalkd 作业出现错误时，例如`"exception 'ErrorException' with message 'Notice: Undefined index: id in /var/www/mysite/app/libraries/lib.php line 248' in /var/www/mysite/app/libraries/lib.php:248`，Beanstalkd 应该如何知道发生了错误并将其标记为失败以便可以再次重试？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T07:42:38.203

为 beanstalkd 安装一个监视器，这在开发/测试你的应用程序时很有用。一些使用 PHP 的替代方案：http: [//mnapoli.github.io/phpBeanstalkdAdmin/](http://mnapoli.github.io/phpBeanstalkdAdmin/)和[https://github.com/ptrofimov/beanstalk_console](https://github.com/ptrofimov/beanstalk_console)

至于处理错误，您可以为 beanstalkd 作业定义自己的错误处理程序，并在该处理程序中决定是否要：

*   埋葬（把工作放在一边供以后检查）
*   踢（把它放回队列中）
*   删除（删除它，如果这对您的应用程序是安全的）

*编辑*- 你设法解决你的问题吗？最好的方法可能是在您的工作周围使用 try/catch 来捕获异常，然后在工作人员引发异常时将其掩埋。如果在生产者处引发异常，它可能永远不会添加到队列中，因此不需要 bury() ，但使用监视器来确保。

如果您想尝试为您的对象定义自己的错误处理程序，我之前已经通过为您的类设置自定义错误处理程序来完成类似的操作。尝试通过 $errcontext 获取 pheanstalk （作业）对象可能是一个丑陋的 hack - 但可能是要尝试的东西。如果你想尝试一下，这是我快速整理的一些伪代码（创建了一个子类避免将代码放入 pheanstalk 类）：

```
class MyPheanstalk extends Pheanstalk {

    function __construct() {
        //register your custom error_handler for objects of this class
        set_error_handler(array($this, 'myPheanstalk_error_handler'));

        //call parent constructor
        parent::__construct();
    }

    function myPheanstalk_error_handler($errno, $errstr, $errfile, $errline, $errcontext) {
        // get the current job that failed
        foreach($errcontext as $val) //print_r($errcontext) to find info on the object(job) you are looking for
        {
            if(is_object($val)) {
                if(get_class($val) == 'Pheanstalk') { //and replace with correct class here
                    //optionally check errstr to decide if you want to delete() or kick() instead of bury()
                    $this->bury($val);
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T16:48:08.760

它是你的脚本有错误，而不是 beanstalkd。

```
try { 

//your code from Line 248 here

} catch (ErrorException $e) { //this section catches the error.

//you can print the error
echo 'An error occurred'. $e->getMessage();
//or do something else like try reporting the ID is bad.

if (!isset($id)) {
echo 'The id was not set!';
}

} //end of try/catch 
```

# javascript - 淘汰赛可拖动和排序到不同的放置目标

> ID：15871802
> 
> 赞同：0
> 
> 时间：2013-04-08T05:20:06.963
> 
> 标签：javascript, jquery-ui, knockout.js

编辑/tl；博士：查看这个 jsfiddle：http: [//jsfiddle.net/VZKRM/2/](http://jsfiddle.net/VZKRM/2/)

我有一组选项卡，一个选项卡内是一组应用程序。我正在尝试获取它，以便我可以在选项卡中拖动和排序应用程序，并将应用程序从选项卡拖到另一个选项卡中，方法是拖放到另一个选项卡的标题上。

我已经能够使用淘汰赛可排序库（[https://github.com/rniemeyer/knockout-sortable](https://github.com/rniemeyer/knockout-sortable)）进行排序，但我似乎无法将下拉菜单连接到另一个选项卡中。

我想我挂错了。这是html：

```
<div id="apps-tabs">
    <div id="apps-left">
        <div id="wrapper" class="wrapper NavPanel">
            <div class="NavData" id="v-nav">
                <ul id="tab-list" data-bind="foreach: Tabs">
                    <li class="TopNav drop-target">
                        <a data-bind="attr:{ tab: hash, 'tab-id': id }, text: name"></a>
                    </li>
                </ul>
                <div>
                    <a data-bind="click: addTab">Add new...</a>
                </div>
            </div>
        </div>
    </div>
    <div id="apps-right">
        <div id="tab-container" data-bind="foreach: Tabs">
            <div class="tab-content" data-bind="attr:{id:hash, 'tab-id':id}">
                <h1 data-bind="text: name"></h1>
                <ul class="my-apps" data-bind="sortable: {data: applications, connectClass: 'drop-target', options: { placeholder: 'app-drop-placeholder', delay: 50, tolerance: 'pointer' } }">
                    <li data-bind="attr:{'app-id':id}" class="app app-inner">
                        <div class="app-inner-anchor">&nbsp;</div>
                        <div style="height: 95px;">
                            <a data-bind="attr:{title:name, href:url, target:target}">
                                <img class="app-image" style="padding-top: 20px" data-bind="attr:{alt:name, src:imagePath}" />
                            </a>
                        </div>
                        <div style="height: 30px;">
                            <a data-bind="attr:{title:name, href:url, target:target}, text: name"></a>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div> 
```

这是我的视图模型：

```
function TabViewModel(tabs) {
    var self = this;

    self.Tabs = ko.observableArray(tabs);
}

function Tab(name, id, hash, apps) {
    this.name = name;
    this.id = id;
    this.hash = hash;

    this.applications = ko.observableArray(apps || []);
}

function Application(name, id, url, imagePath, target) {
    this.name = name;
    this.id = id;
    this.url = url;
    this.imagePath = imagePath;
    this.target = target;
}

ko.applyBindings(new TabViewModel([
    new Tab('tab 1', 1, 'tab1', [
        new Application('app 1', 1, 'http://foo/foo/', 'http://foo/img.png', '_blank'), 
        new Application('app 2', 2, 'http://foo/foo/', 'http://foo/img.png', '_blank'), 
        new Application('app 3', 3, 'http://foo/foo/', 'http://foo/img.png', '_blank')]),
    new Tab('tab 2', 2, 'tab2', [
        new Application('app 4', 4, 'http://foo/foo/', 'http://foo/img.png', '_blank'),
        new Application('app 5', 5, 'http://foo/foo/', 'http://foo/img.png', '_blank'),
        new Application('app 6', 6, 'http://foo/foo/', 'http://foo/img.png', '_blank')]),
        ])); 
```

如果不清楚有一个 ul 选项卡标题，并且其中的每个 li 都有一个“drop-target”类。每个选项卡都有一个关联的 div 和一个“tab-container”类，它有一个 ul 和一个应用程序的“my-apps”类。每个应用程序都可以在它自己的 ul 中排序，但也可以拖放到选项卡标题的 .drop-target 上。一旦放在 .drop-target 上，它就会被添加到关联的 .my-apps ul 中。

如何连接 .drop-target 以接受应用程序 li？在发布的小提琴中，我有两个函数 BindSort/BindDrop 我想淘汰。

# html - 改变高度 到背景图像的高度

> ID：15871807
> 
> 赞同：3
> 
> 时间：2013-04-08T05:20:37.163
> 
> 标签：html, css, twitter-bootstrap

我有两个div：

```
<div class="iphonebackground">
  <div class="screenbackground"></div>
</div>

.iphonebackground {
    background-image:url("../img/iphone-frame.png");
    background-repeat: no-repeat;
    background-position: center;
    background-size: 100%;
    height:576px;
}

.screenbackground {
    background-image:url("../img/iphone-background.png");
    background-repeat: no-repeat;
    background-position: center;
    background-size:100%;
    height:576px;
} 
```

第一个，iphonebackground 将 background-image 设置为 iPhone 框架的图像 ( [http://chpwn.com/apps/iphone-frame.png](http://chpwn.com/apps/iphone-frame.png) )。第二个，screenbackground 将背景图像设置为 PNG 图像，其大小与 iPhone 屏幕上的图像相同（[https://dl.dropbox.com/u/290586/iphone-bg.png](https://dl.dropbox.com/u/290586/iphone-bg.png)）。

这样做的结果是页面呈现如下内容：[http://imgur.com/yVF9gyg](http://imgur.com/yVF9gyg)。由于我的网站基于 Twitter Bootstrap，因此 div 会调整大小以适应浏览器窗口，因此在较小的显示屏上看起来像这样：http: [//imgur.com/Q2Qy4wn](http://imgur.com/Q2Qy4wn)。

如您所见，div 的高度固定为 576px。这意味着在第二幅图像中，背景图像的上方和下方都有很大的空白区域。有没有办法设置 div 的高度，使它们与背景图像高度的大小一样高，从而消除空白？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-21T08:18:11.797

背景图像对其附加的 DIV 的大小没有影响。该 DIV 的大小将由其内容决定，如果在 CSS 中明确设置，则由宽度和高度决定。

如果您有一个具有 % 宽度（即未知像素宽度）的 DIV，那么您无法在不借助 JavaScript 的情况下根据此未知宽度设置高度，或者...新的 CSS calc() 函数，您可以在其中指定高度作为未知宽度的比率，让浏览器解决。有关更多信息，请参阅[https://developer.mozilla.org/en-US/docs/Web/CSS/calc](https://developer.mozilla.org/en-US/docs/Web/CSS/calc)。

支持越来越好（根据 caniuse.com 的数据为 78%），但您不能依赖它。

[编辑] 在自己寻找解决方案时，我发现了一个使用 padding-top 的出色技巧，由用户[Hasanavi](https://stackoverflow.com/users/1027305/hasanavi)在回答[这个问题](https://stackoverflow.com/questions/600743/how-to-get-div-height-to-auto-adjust-to-background-size)时编写[/edit]

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-08T08:36:02.747

您可以使用

```
height:auto; in both 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-08T07:01:05.363

您可以尝试`line-height`在您的 div 上使用 css 属性。

```
line-height: normal; 
line-height: 3.5;    /* <number> values */
line-height: 3em;    /* <length> values */
line-height: 34%;    /* <percentage values */
line-height: 50px;   /* <Pixel> values */

line-height: inherit 
```

希望这可以帮助...

# php - 适用于 Windows 8 的 Eclipse for PHP 安装错误

> ID：15871810
> 
> 赞同：1
> 
> 时间：2013-04-08T05:21:06.513
> 
> 标签：php, windows, eclipse, java

收到此错误：

操作系统：Windows 8 _ 64-Bit Java JDK：JDK 7 up 17

开始日食后出现以下错误。

> 面向 PHP 开发人员的 Eclipse
> 
> 必须有 Java 运行时环境 (JRE) 或 Java 开发工具包 (JDK) 才能运行 Eclipse for PHP Developers。搜索以下位置没有找到Java虚拟机：C:\eclipse-php-3.0.2.v20120611144-Win32\eclipse-php\jre\bin\javaw.exe
> 
> 当前 PATH 中的 javaw.exe

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T05:29:38.960

根据[Windows 8 - 运行 Eclipse（未找到 Java VM）](https://stackoverflow.com/questions/13577787/windows-8-running-eclipse-java-vm-not-found)

**第1步：**

首先下载 jdk(java development kit) 并安装。jdk 包括 jre（java 运行时环境）。也可以单独安装jre。

**第2步：**

只需添加`C:\Program Files\Java\jdk1.7.0\bin`您的`PATH`

转到控制面板

```
1\. System 
2\. Advance Setting 
3\. Advance 
4\. Environment Variables 
5\. System variable Group 
6\. look For PATH in the list 
7\. Edit 
8\. Add path of your `C:\Program Files\Java\jdk1.7.0\bin` jdk installation and save 
```

**请记住用 ; 分隔值**

**更新1：**

您的新错误（在评论中）表明您正在使用 32 位版本的 java。

jdk 不是 64 位的。重新安装 64 位的 Java 7。

**更新2：**

首先，Eclipse 和 JDK 必须是 x64

其次，eclipse.ini 中的 -vm 参数应该指向 java 可执行文件。有关示例，请参见[http://wiki.eclipse.org/Eclipse.ini](http://wiki.eclipse.org/Eclipse.ini)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T05:30:17.493

检查这个

```
 Control Panel=>All Control Panel Items => System => open advanced system settings

    click on enviroment variable and check system variavle and check for 
     path,JAVA_HOME,ANT_HOME with correct path with 'C:DRIVE' 
```

# mongodb - Mongo c# 驱动程序冻结并且永远不会在 Update() 上返回值

> ID：15871814
> 
> 赞同：2
> 
> 时间：2013-04-08T05:21:18.650
> 
> 标签：mongodb, mongodb-.net-driver

我有一个长时间运行的操作，每次使用下面的代码插入一组条目时都会插入数千组条目。这段代码运行一段时间后，collection.Update() 方法冻结（不返回），整个过程停止。

在任何地方都找不到任何合理的解释。

我查看了 mongod 日志，没有什么异常，它只是停止接收来自该进程的请求。

Mongo版本：2.4.1，C#驱动版本：1.8.0

```
using (_mongoServer.RequestStart(_database))    
{
    var collection = GetCollection<BsonDocument>(collectionName);

    // Iterate over all records
    foreach (var recordToInsert in recordsDescriptorsToInsert)
    {
        var query = new QueryDocument();
        var update = new UpdateBuilder();

        foreach (var property in recordToInsert)
        {
            var field = property.Item1;
            var value = BsonValue.Create(property.Item2);

            if (keys.Contains(field))
                query.Add(field, value);

            update.Set(field, value);
        }

        collection.Update(query, update, UpdateFlags.Upsert); // ** NEVER RETURNS **
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:08:12.403

这可能与此有关：[CSHARP-717](https://jira.mongodb.org/browse/CSHARP-717)

已为驱动程序 1.8.1 修复

# java - 哪个更好地创建一个 web 应用程序，多个用户将在其中注册事件 - Python 或 Java？

> ID：15871815
> 
> 赞同：-3
> 
> 时间：2013-04-08T05:21:35.920
> 
> 标签：java, python, google-app-engine, web-applications, twitter-bootstrap

我打算创建一个网络应用程序，组织成员将在其中登录、过滤和搜索活动，并注册参加活动。我只是为一个组织做这个，但当我完成后我很可能会将它开源。

我在 GoDaddy 上拥有自己的托管空间，但后来我找到了 Google 的 App Engine，并认为它会更有效。

我还计划使用 Twitter Bootstrap 和 HTML5 Boilerplate（也许？）。用户界面对我很重要。不久之后，我还将制作一个具有相同功能、使用相同数据的 iPad 应用程序。

那么Python还是Java？每个应用程序的优点和缺点是什么？我已经学习了两种语言的绝对基础知识，但还没有将它们中的任何一种用于网络。

我会考虑[Go Programming Language](http://golang.org/)，但它看起来不像社区支持的那样。

蒂亚！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T05:29:00.247

@Blender 和 @Barranka 是对的。这两种语言在 App Engine 上同样得到很好的支持，只有很小的差异。您提到的 Web 客户端库应该与任何一种都很好地集成，并且您将无法轻松地将代码移植到任何一种语言的 iOS。（如果您还计划一个 Android 应用程序，那可能是对 Java 的投票，但您没有提到这一点。）

所以答案是，选择你喜欢的语言。两者都会起作用。

（如果您没有偏好，可能会倾向于 Python，因为它更高级别并且更好地支持快速开发，并且 Java 的优势（性能、静态类型等）对于您想要构建的内容并不重要.)

# java - 线程“主”com4j.ExecutionException 中的异常：com4j.ComException：80040154 CoCreateInstance 失败：类未注册：.\com4j.cpp

> ID：15871817
> 
> 赞同：2
> 
> 时间：2013-04-08T05:21:53.953
> 
> 标签：java, com, com4j, hp-quality-center

尝试在 QC 中记录缺陷时出现以下错误。

*   错误如下：线程“主”com4j.ExecutionException 中的异常：com4j.ComException：80040154 CoCreateInstance 失败：类未注册：com4j 处的 .\com4j.cpp:153.ComThread.execute(ComThread.java:203) 处的 com4j。 Task.execute(Task.java:25) at com4j.COM4J.createInstance(COM4J.java:97) at com4j.COM4J.createInstance(COM4J.java:72) at com.mercury.qualitycenter.otaclient.ClassFactory.createTDConnection(Unknown来源）在 library.DefectDetailsDriver.RaiseDefect(DefectDetailsDriver.java:154) 在 library.Runner.main(Runner.java:86) 原因：com4j.ComException：80040154 CoCreateInstance 失败：类未注册：.\com4j.cpp:153在 com4j.Native.createInstance(Native Method) 在 com4j.COM4J$CreateInstanceTask.call(COM4J.java:117) 在 com4j.COM4J$CreateInstanceTask.call(COM4J.java:104) 在 com4j.Task.invoke(Task.java :51) 在 com4j。ComThread.run0(ComThread.java:153) 在 com4j.ComThread.run(ComThread.java:134)

*   我使用的是 Win 7 64 位机器，所以我下载了较新版本的 COM4J 并将 com4j-amd64.dll 复制到 C:\Windows\System32 以及 c:\windows\SysWOW64

*   在 Windows 32 位中，我可以成功记录缺陷。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-25T14:03:08.983

请注册 OTAClient.dll 以避免此异常。要注册，您需要在将文件复制到 Windows 下的所需文件夹后执行以下命令。

```
regsvr32 OTAClient.dll 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-31T19:45:55.763

所以我能够（最终）弄清楚这一点。我所做的是通过所使用的 .Net 向 RegAsm 注册使用 com4j（及其代码库）的 .dll。在提升的命令提示符中，导航到使用 com4j 的 dll 所在的位置并使用以下命令：确保您使用的 dll 使用正确的 .Net 框架。C:/Windows/Microsoft.NET/Framework64/v4.0.30319/RegAsm.exe .dll /codebase

# python - 将混合 dict 元素与 int、strings 和 floats 进行比较

> ID：15871821
> 
> 赞同：1
> 
> 时间：2013-04-08T05:22:30.673
> 
> 标签：python, dictionary, generator, string-comparison

我希望能够在混合类型的字典（包含 int、floats、strings、numpy.arrays）中进行比较。我的最小示例有一个字典列表，我想要一个函数（或生成器）来迭代该列表并挑选包含由 **kwargs 输入到该函数（或生成器）指定的键值对的元素（字典） ）。

```
import re
list_of_dicts = [{'s1':'abcd', 's2':'ABC', 'i':42, 'f':4.2},
                 {'s2':'xyz', 'i':84, 'f':8.4}]

def find_list_element(**kwargs):
    for s in list_of_dicts:
        for criterion, criterion_val in kwargs.iteritems():
            if type(criterion_val) is str:
                if re.match(criterion_val, s.get(criterion, 'unlikely_return_val')):
                    yield s
                    continue
            if s.get(criterion, None) == criterion_val:
                yield s

print [a for a in find_list_element(i=41)]       # []
print [a for a in find_list_element(i=42)]       # [{'i': 42, 's2': 'ABC', 's1': 'abcd', 'f': 4.2}]
print [a for a in find_list_element(s1='xyz')]   # []
print [a for a in find_list_element(s2='xyz')]   # [{'i': 84, 's2': 'xyz', 'f': 8.4}]
print [a for a in find_list_element(s2='[a-z]')] # [{'i': 84, 's2': 'xyz', 'f': 8.4}] 
```

我上面的两个问题是：

1.  如果函数要求进行字符串比较，我想切换到正则表达式匹配（re.search 或 re.match），而不是纯字符串比较。在上面的代码中，这是通过辱骂的类型检查完成的，它看起来并不那么优雅。有没有更好的解决方案不涉及类型检查？或者，这是在 python 中允许类型检查的情况？

2.  `**kwargs`当然可以包含多个比较。目前我只能想到一个涉及一些标志的解决方案（`found = False`切换到 a`found = True`并在每次迭代结束时评估`list_of_dicts`）。在决定是否屈服之前，有没有一些聪明的方法来累积每个 s 的比较结果？

有没有办法让这整个 dicts 集合更漂亮？

PS：实际用例涉及获取的 MRI 数据集 (BRUKER) 的表示。数据集通过我已转换为表示所述扫描的对象的一部分的 dicts 的参数文件来表征。我正在收集这些数据集，并希望根据这些参数文件给出的某些标准进一步过滤它们。这些参数可以是字符串、数字和其他一些不太方便的类型。

## 更新和蒸馏答案

如果我想从@BrenBarn 和@srgerg 的输入中得出一个一致的答案，那就是这个

```
list_of_dicts = [{'s1':'abcd', 's2':'ABC', 'i':42, 'f':4.2},
                 {'s2':'xyz', 'i':84, 'f':8.4}]

 # just making up some comparison strategies
def regex_comp(a,b): return re.match(a,b)
def int_comp(a,b): return a==b
def float_comp(a,b): return round(a,-1) == round (b,-1)

pre_specified_comp_dict = {frozenset(['s1','s2']) : regex_comp,
                           frozenset(['i']): int_comp,
                           frozenset(['f']): float_comp}

def fle_new(**kwargs):
    chosen_comps={}
    for key in kwargs.keys():
        # remember, the keys here are frozensets
        cand_comp = [x for x in pre_specified_comp_dict if key in x]
        chosen_comps[key] = pre_specified_comp_dict[cand_comp[0]]

    matches = lambda d: all(k in d and chosen_comps[k](v, d[k])
                            for k, v in kwargs.items())

    return filter(matches, list_of_dicts) 
```

现在唯一的挑战是想出一个无痛的创建策略`pre_specified_comp_dict`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T05:34:34.227

在这种情况下使用类型检查对我来说似乎没问题，因为您确实想要完全不同的行为，具体取决于类型。然而，你应该让你的类型检查更聪明一点。使用`if isinstance(criterion_val, basestring)`而不是直接检查`str`类型。这样，它仍然适用于 unicode 字符串。

避免类型检查的方法是预先指定每个字段的比较类型。查看您的示例数据，看起来每个字段始终具有一致的类型（例如，s1 始终是一个字符串）。如果是这种情况，您可以在字段名称和比较类型之间创建显式映射，例如：

```
regex_fields = ['s1', 's2'] 
```

然后在您的代码中，而不是类型检查，`if criterion in regex_fields`查看该字段是否应该与正则表达式进行比较。如果您有不止两种类型的比较，您可以使用 dict 将字段名称映射到某种 ID 进行比较操作。

这样做的好处是它更明确地对您的假设进行编码，因此如果进入一些奇怪的数据（例如，您期望数字的字符串），则会引发错误，而不是默默地应用适合类型的比较。它还保持字段和比较之间的关系“分离”，而不是将其埋在实际比较代码的中间。

如果您有大量字段以及针对它们的不同子集的许多不同比较操作，这可能特别值得做。在这种情况下，最好预先定义哪些比较适用于哪些字段*名称*（而不是哪些类型），而不是为每个比较即时决定。只要您始终根据字段名称知道要进行哪种类型的比较，这将使事情变得更清晰。但是，如果您需要添加新字段，它确实会增加维护开销，因此如果这只是针对私人受众的脚本，我可能不会这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T05:58:19.260

以下是我将如何实现您的`find_list_element`功能。它仍然使用 The Reviled Type Checking (TM)，但它看起来更有说服力恕我直言：

```
def find_list_element(**kwargs):
    compare = lambda e, a: re.match(e, a) is not None if isinstance(e, str) else e == a
    matches = lambda d: all(k in d and compare(v, d[k]) for k, v in kwargs.items())
    return filter(matches, list_of_dicts) 
```

（顺便说一下，我使用的是 Python 3，虽然代码在 Python 2.7 中工作，但应该使用`basestring`而不是`str`BrenBarn 已经指出的那样）。

请注意，我使用了 Python 的[all](http://docs.python.org/3/library/functions.html#all)函数来避免累积比较结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T05:59:24.230

您可以在下面看到我的代码，它解决了多个比较的需要：

```
def find_dict(**kwargs):
    for data in lds: # lds is the same as list_of_dicts
        for key, val in kwargs.iteritems():
                 if not data.get(key, False) == val: return False
         else:
                 yield data 
```

输出/输出：

```
find_dict(i=42, s1='abcd')
{'i': 42, 's2': 'ABC', 's1': 'abcd', 'f': 4.2} 
```

我没有包含正则表达式比较的代码！

干杯!

# java - 为什么修改了 ArrayList 参数，但没有修改 String 参数？

> ID：15871825
> 
> 赞同：27
> 
> 时间：2013-04-08T05:23:31.600
> 
> 标签：java, parameters, call-by-value, pass-by-reference

```
public class StackOverFlow {
    public static void main(String[] args) {
        ArrayList<String> al = new ArrayList<String>();
        al.add("A");
        al.add("B");
        markAsNull(al);
        System.out.println("ArrayList elements are "+al);

        String str = "Hello";
        markStringAsNull(str);
        System.out.println("str "+ str);
    }
    private static void markAsNull(ArrayList<String> str){
        str.add("C");
        str= null;
    }
    private static void markStringAsNull(String str){
        str = str + "Append me";
        str = null;
    }
} 
```

## 这输出：

```
ArrayList elements are [A, B, C]
str Hello 
```

在 的情况下`ArrayList`，将检索添加的元素。如果`String`方法调用对传递的字符串没有影响。JVM到底在做什么？谁能详细解释一下？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-08T05:33:00.373

> 在 Arraylist 字符串对象的情况下，添加的元素正在被检索。在 String 的情况下，方法调用对传递的 String 没有影响。

## 发生这种情况是因为 Java 是按值传递并且`String`s 是不可变的

你打电话时

```
markAsNull(ArrayList<String> str) 
```

新的名称引用是为指向`str`的同一个创建的。当您将其上的元素添加到同一对象时。稍后您放入，但该对象添加了新值并由.`ArrayList``al``add``str``str``null``a1`

你打电话时

```
markStringAsNull(String str)
{
    str = str + "Append me";
    // ...
} 
```

该行通过附加给定的字符串`str = str + "Append me";`创建一个新`String`对象并将其分配给`str`. 但同样它只是对现在指向新创建的字符串的实际字符串的引用。（由于不变性）并且原始字符串没有改变。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T05:28:42.170

这些`markXAsNull`方法将本地引用设置为`null`。这对存储在该位置的实际值没有影响。该`main`方法仍然有自己对值的引用，并且可以`println`使用这些引用。

此外，在进行字符串连接时，`toString()`在对象上被调用，这就是为什么 ArrayList 被输出为括号中的值列表。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-08T05:41:03.373

摘自本书：SCJP - Sun Certified Programmer for Java 6 Study Guide (Katty Sierra - Bert Bates) 第 3 章目标 7.3 - 将变量传递给方法

Java 实际上是在单个 VM 中运行的所有变量的值传递。Pass-by-value 表示按变量值传递。这意味着，通过变量的副本传递！

传值的底线：被调用的方法不能改变调用者的变量，虽然对于对象引用变量，被调用的方法可以改变变量引用的对象。改变变量和改变对象有什么区别？对于对象引用，这意味着被调用的方法不能重新分配调用者的原始引用变量并使其引用不同的对象，或者为空。例如，在以下代码片段中，

```
void bar() {
Foo f = new Foo();
doStuff(f);
}
void doStuff(Foo g) {
g.setName("Boo");
g = new Foo();
} 
```

重新分配 g 不会重新分配 f！在 bar() 方法的最后，创建了两个 Foo 对象，一个由局部变量 f 引用，一个由局部（参数）变量 g 引用。因为 doStuff() 方法具有引用变量的副本，所以它有一种方法可以获取原始 Foo 对象，例如调用 setName() 方法。但是，doStuff() 方法无法获取 f 引用变量。所以 doStuff() 可以改变 f 引用的对象中的值，但 doStuff() 不能改变 f 的实际内容（位模式）。换句话说，doStuff() 可以改变 f 所指对象的状态，但不能使 f 指代不同的对象！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-08T05:29:41.357

Java 遵循传递值概念（Java 中没有传递引用）。因此，当您将字符串传递给函数时，它会将对该字符串的**“引用副本”**发送给函数。因此，即使您在函数中将变量设置为 null，当它返回给调用者时，它也仅引用其原始值。这就是为什么原始字符串无效的原因。

在 Arraylist 的情况下，引用的副本是指原始的 Arraylist（在字符串的情况下也是如此）。但是当你在 ArrayList 中添加一些东西时，它指的是原始对象，因此你可以看到效果。（尝试方法arraylist = new ArrayList（），您的原始arraylist 将保持原样）。

如果是字符串，当你这样做时

str=str + "abc";

Java 创建一个新的 String 对象，该对象将引用字符串“xyzabc”（例如 str="xyz"），并且“xyz”将有资格进行垃圾回收。但是由于“xyz”仍然有一个引用它的变量（原始字符串）不会被垃圾收集。但是一旦函数调用结束“xyzabc”就会进行垃圾收集。

讨论的总结是，只要引用指向同一个对象，您就可以在函数中进行更改，但是当您尝试更改引用（str=str+"abc"）时，您正在引用方法中的新对象这样您的原始对象将保持原样。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-08T05:34:47.417

在 Java 中，您可以创建一个对象，并由多个指针引用。在任何指针上调用 mutator 方法将有效地修改唯一对象，从而*更新*所有其他引用。

但是如果你在一个引用上调用变量赋值语句，只有那个指针会被改变，因为它不做任何对象方面的工作（这是我能解释的最好的......）。

将对象传递给参数将有效地**复制**引用，从而产生一个具有两个指针的对象 - 一个是全局的，另一个是本地的。

还有一点，因为`String`它是不可变的，所以您实际上会得到一个与原始对象不同的新对象（从您不得不说的事实来看`a = a + "a"`），这就是它不会修改原始字符串的原因。

# c - 如果 unlink() 之前的文件比截断它， fwrite() 更快

> ID：15871828
> 
> 赞同：6
> 
> 时间：2013-04-08T05:23:50.287
> 
> 标签：c, linux

我想在 rhel 6 平​​台上运行一个简单的磁盘性能测试。只是将 1G 字节写入磁盘。我发现如果文件首先被取消链接，它会比被截断快得多。大约是 1.5 秒对 15 秒。

为什么？我以为 unlink() 最后一个硬链接会将文件截断为 0 并删除 inode。为什么使用 unlink() 的 fwrite 比 truncate 更快？

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int
main(int argc, char* argv[])
{
    if (argc < 2) {
        return -1;
    }

    char buf[1024];

    srand(time(0));

    int i;
    for (i = 0; i < 1024; ++i) {
        buf[i] = rand();
    }

    /* unlink(argv[1]); */
    FILE* fp = fopen(argv[1], "wb+");
    if (fp == NULL) {
        perror("fopen");
        return -1;
    }

    for (i = 0; i < 1024 * 1024; ++i) {
        if (fwrite(buf, 1024, 1, fp) != 1) {
            perror("fwrite");
            return -1;
        }
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T05:29:20.147

当磁盘上有足够的可用空间并且文件系统可以删除文件并延迟回收它们的空间时，删除文件可能比截断文件更快。它可以将 inode 标记为已删除，并在后台或稍后删除文件，并几乎立即创建一个新的 inode，为新的写入做好准备。

# winforms - 从 Form2 访问 Form1 控件

> ID：15871835
> 
> 赞同：0
> 
> 时间：2013-04-08T05:24:33.603
> 
> 标签：winforms

有两个表单-Form1 和 Form2。Form1 有一个按钮（btnNew），单击时打开 Form2，并且被禁用。我需要再次启用按钮，只有当 Form2 关闭时。用户还需要同时使用 Form1。这段代码没有再次启用该按钮。我在哪里失踪。

在表格 1 中：

```
private void btnNew_Click_1(object sender, EventArgs e)
  {   
    Form2 f2 = new Form2();
    f2.Show();
    btnNew.Enabled = false;
  }   
public void EnableButton()
 {
    btnNew.Enabled = true;
 } 
```

在表格 2 中：

```
private void Form2_FormClosing(object sender, FormClosingEventArgs e)
  {
    Form1 f1 = new Form1();
    f1.EnableButton();
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T05:35:57.383

您的代码创建了一个新的 Form1，它与您的应用程序中已经运行的不同。

您可以尝试在 Form2 中添加对 Form1 的引用并以这种方式对其控件进行操作。

给 form2 一个属性，如：

```
public Form ParentForm {get; set;} 
```

并在您的按钮单击中将其分配给 form1：

```
Form2 f2 = new Form2()
f2.ParentForm = this;
f2.show(); 
```

然后在您关闭时，您应该能够执行以下操作：

```
this.ParentForm.EnableButton(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T05:41:38.127

`Form2`在实例化它的类中订阅您的关闭事件 ( `Form1`)。

```
private void btnNew_Click_1(object sender, EventArgs e)
  {   
    Form2 f2 = new Form2();
    f2.Closing += f2_Closing;
    f2.Show();
    btnNew.Enabled = false;

  }   

public void f2_Closing(object sender, FormClosingEventArgs e)
{
   this.EnableButton();
}

public void EnableButton()
 {
    btnNew.Enabled = true;
 } 
```

# mysql - 如何查询查找表的唯一值？

> ID：15871842
> 
> 赞同：-2
> 
> 时间：2013-04-08T05:25:12.377
> 
> 标签：mysql, sql, unique-constraint

我有一个结构如下的食谱表：

```
product2recipe
id | productid | recipeid 
```

我想消除重复值的插入。基本上，一个配方可以包含 1 个或多个 productid。所以它看起来像这样：

```
1 | 1 | 1
2 | 2 | 1
3 | 1 | 2
4 | 5 | 3 
```

如果配方包含类似的值，则用户可以提交新配方，例如：

```
id | 1 | 4
id | 2 | 4 
```

那么它不应该提交，因为表已经有重复的值，recipeid 1 已经包含 productid 1 和 2。如果是：

```
id | 1 | 5
id | 3 | 5 
```

然后它应该提交，因为这是一个独特的组合。

如何以最佳方式查询我的表？我担心它可能会停止我的数据库服务器，因为可能有很多组合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T05:27:48.617

您提供的示例确实告诉我们您想要什么，因为这些记录不存在于表中。

但无论如何，这是一种对`UNIQUE`表中的复合列实施约束的方法，

```
ALTER TABLE product2recipe ADD CONSTRAINT tb_uq UNIQUE(productid, recipeid) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/414163)

*取消注释`ALTER TABLE`上面演示链接中的声明，看看会发生什么*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:58:32.520

给定一组已知的“新”配方产品，我建议运行以下查询：

```
select recipeid
from product2recipe
group by recipeid
having count(distinct productid) = 
       count(distinct case when productid in (?,?,...) then productid end) 
```

- 返回的任何配方都将具有与“新”配方相同的产品集；然后，您的应用程序应被编程为拒绝此类“新”配方。

# c# - 从 Fortran 调用 C#

> ID：15871845
> 
> 赞同：2
> 
> 时间：2013-04-08T05:25:32.717
> 
> 标签：c#, fortran, fortran-iso-c-binding

我没有在 Stack Overflow 上找到任何讨论从 Fortran 调用 C# 的帖子（我正在使用装有 Intel Visual Fortran 的 Visual Studio 2010）。但是，讨论从 fortran 调用 C/C++的帖子数量（非常）有限[[1](https://stackoverflow.com/questions/7255468/calling-c-function-from-fortran-not-c) , [2](https://stackoverflow.com/questions/11021678/calling-c-from-fortran-void-return-value) , [3 ]。](https://stackoverflow.com/questions/7198837/calling-c-function-from-intel-fortran-11-in-visual-studio-2008-step-by-step-proc)

在对这些帖子的其中一个回复中，有人建议从 Fortran 调用 C++ 比调用 C 更棘手，这让我怀疑 C# 可能更棘手？由于缺乏 C/C++/C# 基础，我想知道为 C/C++ 制定的程序是否适用于 C#？

我在这些帖子中注意到的一个共同点是需要名为 ISO_C_BINDING 的内部模块。[在这里](https://stackoverflow.com/tags/fortran-iso-c-binding/info)阅读了更多关于它的信息后，我不清楚 ISO_C_BINDING 是否允许我将几个二维数组的信息传递给用 C# 编写的程序（编译为 DLL），调用一些“事件” （类似于函数？），最后从 C# 中取回一个二维信息数组，然后继续我在 Fortran 中的业务。

如果熟悉 Fortran 和 C#，请告诉我 ISO_C_BINDING 是否足以胜任这项任务？从上面列出的信息中，我没有得到那种感觉。如果有人有一个工作示例，其中包括在***C#***和 Fortran 之间传递数组，以及从 Fortran 调用***C#***函数，我将非常感谢有机会将其作为我如何进行的模板进行查看。谢谢，埃里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T05:31:07.317

**Fortran 代码：**

```
function TestPass (floatArray) result (iRes)
implicit none
dll_export :: TestPass ! export function name

integer :: Ires
real, intent (in out) :: floatArray

dimension floatArray(5)

iRes = 0 ! Assign function result

open (5,FILE='output.txt')
write (5, 100) floatArray(3)

floatArray(0) = 0.0
floatArray(1) = 1.1
floatArray(2) = 2.2
floatArray(3) = 3.3
floatArray(4) = 4.4

! correct values are written to file here...
open (5,FILE='output.txt')
write (5, 100) floatArray(3)
100 format(5X,'got here',5X,F3.3)
close (5)
end function 
```

**C#代码：**

```
static extern int TestPass (
[MarshalAs(UnmanagedType.LPArray, SizeConst=5,
ArraySubType=UnmanagedType.R4)]
float [] yields);

private void BtnTestClick(object sender, System.EventArgs e)
{
float [] floatArray = new float[5] {9.9F, 9.9F, 9.9F, 9.9F, 9.9F};
TestPass(floatArray);

// floatArray.Length == 0 after the function call

for ( int i = 0; i < floatArray.Length; i++ )
Trace.WriteLine(floatArray[i]);
} 
```

**另请参阅此链接：**

[http://software.intel.com/en-us/articles/calling-fortran-function-or-subroutine-in-dll-from-c-code](http://software.intel.com/en-us/articles/calling-fortran-function-or-subroutine-in-dll-from-c-code)

**你也可以参考一些关于它的理论：**

[http://www.ibiblio.org/pub/languages/fortran/ch2-4.html](http://www.ibiblio.org/pub/languages/fortran/ch2-4.html)

# java - 这里有什么问题

> ID：15871852
> 
> 赞同：-1
> 
> 时间：2013-04-08T05:26:58.790
> 
> 标签：java, templates

这对我来说看起来很奇怪。有人可以解释一下吗？

请注意，代码从不使用“?extends”，只使用“?super E”，但由于某些特殊原因，编译器会使用“?extends”。

```
import java.util.Comparator;

public class TestClass <E> {

    private Comparator<? super E> compNatural = new Comparator<E>() {
        @SuppressWarnings("unchecked")
        @Override
        public int compare(E lhs, E rhs) {
            return ((Comparable<E>)lhs).compareTo(rhs);
        }
    };

    private Comparator<? super E> comp; 

    public TestClass(Comparator<? super E> comp) {
        // Reports an error:
        // Type mismatch: cannot convert from Comparator<capture#10-of ? extends Object> to Comparator<? super E> 
        this.comp = (comp==null) ? compNatural : comp;

        // The following compiles OK!!!
        if (comp==null) this.comp = compNatural; else this.comp = comp;         
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T05:44:02.557

这与三元运算符无法推断出正确的类型有关。请检查这个问题[Java if 三元运算符和 Collections.emptyList()](https://stackoverflow.com/questions/7738938/java-if-ternary-operator-and-collections-emptylist)

# android - Android“通用图像加载器”有时会显示非常小的图像

> ID：15871854
> 
> 赞同：3
> 
> 时间：2013-04-08T05:27:45.420
> 
> 标签：android, universal-image-loader

我正在使用**通用图像加载器**下载位图并向它们显示列表视图和其他图像视图。大多数情况下它工作正常，但有时它显示的位图与正常大小相比非常小。

我将配置值作为

`.memoryCacheExtraOptions((int)(screen_width_ * 0.6f),(int)(screen_width_ * 0.6f))`

有时会显示非常小的图像....

请帮我度过这个难关...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T05:47:38.957

问题是来自网络的 ImagSize。尝试这个，

`android:scaleType="fitXY"`

希望它会起作用！

# facebook - 从 Facebook 群组收集数据

> ID：15871856
> 
> 赞同：2
> 
> 时间：2013-04-08T05:27:47.953
> 
> 标签：facebook, facebook-graph-api

我不是 Facebook 开发人员之一，但我的论文需要一些数据，关于我目前正在观察的 Facebook 中的一个小组。

问题是，我必须在以下 6 个月内收集数据：

*   如果可能，可以按月拆分过去 6 个月内有多少成员加入。
*   过去 6 个月内该组中有多少帖子，也.. 如果可能，按月拆分
*   过去 6 个月内有多少活跃用户。

有人可以给我一些关于如何收集这些信息的提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:30:40.670

你将很难做到这一点。组对 API 不是很友好，而且他们没有自己的洞察信息。

您可以尝试使用边缘的[Graph API Explorer](https://developers.facebook.com/tools/explorer)浏览组的提要，并添加和过滤器以查看每月数据。`/GROUP_NAME_OR_ID/feed``since``until`

[但是，由于Facebook 隐私过滤](https://developers.facebook.com/blog/post/478/)，您不会看到所有帖子。要获得最可靠的数据，您需要从 Facebook 网络应用程序中手动计算感兴趣的条目。

# c++ - 关于如何更新 Mingw 的一点帮助？

> ID：15871860
> 
> 赞同：2
> 
> 时间：2013-04-08T05:28:05.150
> 
> 标签：c++, c, compiler-construction, c++11, mingw

我已经从 mingw 站点下载并安装了最新的 mingw，现在我想从 source forge 将它更新到新的 Mingw 4.8，这些是内容：

来自 mingw.org 的 Mingw：文件夹：

*   垃圾桶
*   文档
*   包括
*   库
*   执行程序
*   mingw32
*   分享
*   变量

文件：

*   unins000.dat
*   unin000.exe

==================================================== =================================

在我从源锻造获得的一个：

文件夹：

*   垃圾桶
*   ETC
*   文档
*   包括
*   许可证
*   库
*   选择
*   执行程序
*   x86_64-w64-mingw32
*   分享
*   变量

文件：

*   信息.txt
*   版本.txt

==================================================== =================================

我已经搜索了过去 5 个小时，但最终还是一无所获，每当我将一些文件从 SF mingw 放到 Mingw.org 的 mingw 文件夹中时，一切都开始失败，请帮忙！我一开始想要的只是获得我听说 MinGW 4.8 支持的 C++11。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T05:56:41.613

本杰明林德利，你是对的，上帝保佑你！我很幸运，因为我及时，他们已经用 gcc 4.8 更新了 MinGW 发行版，谢谢！对于那些会偶然发现这个问题的人，去这里：

[http://nuwen.net/mingw.html](http://nuwen.net/mingw.html)

# jquery - 边距变化导致多个 div 受到影响

> ID：15871861
> 
> 赞同：1
> 
> 时间：2013-04-08T05:28:14.390
> 
> 标签：jquery, html, css, margin

我希望我的徽标图像向上移动而不影响其下面的措辞，但是即使它们位于不同的 div 中，并且包含在父 div 中，也会触发这两个元素。我不明白。我假设它与边距有关，但是当我尝试为文本元素反向设置相反的值时，事情的表现很奇怪。

[小提琴](http://jsfiddle.net/ntzhh/1/)

CSS：

```
.full-circle {
display:block;
margin:auto;
margin-top: 15px;
overflow: hidden;
height: 180px;
width: 180px;
border: 2px solid #FFF;
-moz-border-radius: 90px;
-webkit-border-radius: 90px;
background:#FDF5E6;
-webkit-transition: margin 0.2s ease-out; 
-moz-transition: margin 0.2s ease-out; 
-o-transition: margin 0.2s ease-out;
}

.full-circle:hover{margin-top: 2px;} 
```

jQuery：

```
$('.full-circle').hover(
            function(){
                $(this).stop().animate(
                    {marginTop: '2'}, 20, 'linear'   
                );//end animate
            },//end function
            function(){
                $(this).stop().animate(
                {marginTop: '15'}, 20, 'linear'
                );//end animate
            }//end function
        );//end hover 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T05:57:38.853

您可以简单地添加`position: relative`到`.full-circle`，然后为`top`属性设置动画，而不是`margin-top`.

```
$('.full-circle').hover(
    function(){
        $(this).stop().animate(
            {top: '-10'}, 20, 'linear'   
        );//end animate
    },//end function
function(){
    $(this).stop().animate(
        {top: '15'}, 20, 'linear'
        );//end animate
    }//end function
);//end hover 
```

`[**Working Demo**](http://jsfiddle.net/ntzhh/3/)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T05:39:57.660

文本向上移动是因为两个项目都在流中，移动第一个会影响第二个的位置。

不要调整圆圈上的边距，而是应用`position:relative;`top 属性，然后将其调整为负值以将其向上移动`top:-20px;` （无论需要多少）。

调整相对定位元素的 top、bottom、left 或 right 属性会影响元素在屏幕上的绘制位置，而不会影响它与流中相邻元素的交互方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T06:12:57.650

使用 CSS 很简单

```
.full-circle{margin-top:15px; margin-bottom:15px}

.full-circle:hover{margin-top:2px; margin-bottom:28px}

.logo{overflow:hidden;} 
```

这将在没有 JQuery 的情况下完成，使用 jquery 也可以做到这一点，只需将更改应用于 margintop 和底部，这将管理更改。

现在您`.grey`的过滤器使它创建了额外的边距/填充，因此

我这样做是为了避免溢出的副作用`.logo{ overflow:hidden}`

工作[小提琴](http://jsfiddle.net/ntzhh/4/)

这会做。

# orchardcms - 果园 1.6 CMS。从服务重定向到一个视图

> ID：15871862
> 
> 赞同：0
> 
> 时间：2013-04-08T05:28:17.810
> 
> 标签：orchardcms

是否有任何可能的方式从服务重定向...这是一个 idserver 集成所以..

如果该用户没有像匿名用户这样的角色，我必须从 RolesBasedAuthorizationService.cs 重定向到一个警告页面（anonymous.cshtml）...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T06:03:09.457

`HttpContext.Current.Response.Redirect`几乎可以在任何地方工作。不是最可测试的代码，但它会做你想做的事。

# php - 在转到下一页表单之前自动提交表单

> ID：15871865
> 
> 赞同：1
> 
> 时间：2013-04-08T05:28:45.717
> 
> 标签：php, javascript, jquery

我有一个为我创建的多页表单。表单上的所有页面都有将数据保存到数据库的提交按钮、转到上一页的上一个按钮和一个下一个按钮。问题是如果我单击上一个或下一个链接，数据不会保存。

如何设置它以便在转到表单的上一页或下一页之前自动按下提交按钮？

```
<a class="form-buttons" href="<?php echo $prev_url;?>">Prev</a>
<div class="form-buttons-middle"><input type="submit" name="status" value="Save" /></div>
<a class="form-buttons" href="<?php echo $next_url;?>">Next</a> 
```

我是编程新手，所以任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T05:34:02.953

您可以使用三个提交按钮，根据点击哪个按钮，您可以运行某个代码块。

IE

```
<input type="submit" name="status" value="Prev" />
<input type="submit" name="status" value="Save" />
<input type="submit" name="status" value="Next" />

<?php

 if(!empty($_REQUEST['status']) && $_REQUEST['status'] == 'Prev'){
      //save data and redirect to previous page using header();
 }

 if(!empty($_REQUEST['status']) && $_REQUEST['status'] == 'Next'){
      //save data and redirect to next page using header();
 }

 if(!empty($_REQUEST['status']) && $_REQUEST['status'] == 'Save'){
      //save data and do whatever you want
 }

?> 
```

# php - 在 CodeIgniter 中上传多个图像文件

> ID：15871868
> 
> 赞同：1
> 
> 时间：2013-04-08T05:28:57.187
> 
> 标签：php, arrays, codeigniter, file-upload

我必须在 CodeIgniter 中上传多个图像。结果`var_dump($_FILES)`是：

```
array
      'organizer_logo' => 
        array
          'name' => 
            array
              0 => string 'Best Wallpapers 2009 (Fun12.com) 01.jpg' (length=39)
              1 => string 'Best Wallpapers 2009 (Fun12.com) 05.jpg' (length=39)
          'type' => 
            array
              0 => string 'image/jpeg' (length=10)
              1 => string 'image/jpeg' (length=10)
          'tmp_name' => 
            array
              0 => string 'D:\wamp\tmp\php1238.tmp' (length=23)
              1 => string 'D:\wamp\tmp\php1239.tmp' (length=23)
          'error' => 
            array
              0 => int 0
              1 => int 0
          'size' => 
            array
              0 => int 142036
              1 => int 269895 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-08T06:42:31.027

每个图像都有一个单独的配置数组，然后上传。像下面

```
//I have given an exmaple for one image repeat this for others,
$config_image[0]['allowed_types'] =  'gif|jpg|png';
$config_image[0]['overwrite'] =TRUE;
$config_image[0]['subcategory_image']['upload_path'] = './public/subcategory/';
$config_image[0]['subcategory_image']['file_name'] = $this->input->post('subcategory_name');

//Load and initialize the library as below and then upload
$this->load->library('upload', $config_image[0]);
$this->upload->initialize($config_image[0]); 
```

# grails - Grails 过滤器 url 模式

> ID：15871870
> 
> 赞同：1
> 
> 时间：2013-04-08T05:29:03.597
> 
> 标签：grails, grails-2.0

我需要使用自定义过滤器在 grails 中缓存静态资源。

我用下面的帖子：

[带有静态资源的 Grails 过滤器？](https://stackoverflow.com/questions/5668190/grails-filters-with-static-resources/5669260#5669260)

但是，过滤器不会为静态资源调用，并且仅在控制器 url 上被命中。

我尝试了不同的模式：

```
 <url-pattern>/*</url-pattern>
                      (or)
    <url-pattern>*.img</url-pattern>
    <url-pattern>*.css</url-pattern> 
```

我错过了什么吗？我正在使用 grails 2.1.1

请建议。

# java - ldap 连接错误，获取详细子错误代码

> ID：15871872
> 
> 赞同：1
> 
> 时间：2013-04-08T05:29:14.953
> 
> 标签：java, ldap

如果用户一切正常，进行这种连接似乎可行

```
Properties props = new Properties();
props.setProperty(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
props.setProperty(Context.PROVIDER_URL, someUrl);
props.setProperty(Context.SECURITY_PRINCIPAL, commonName);
props.setProperty(Context.SECURITY_CREDENTIALS, password);

InitialLdapContext ctx = null;
try {
    ctx = new InitialLdapContext(props, null);
    return true;
} catch (javax.naming.AuthenticationException ex) {
    ex.printStackTrace();
} catch (NamingException ex) {
     logger.warn("LDAP NamingException looking for user - " + 
          username + ": " + ex.getMessage(), ex);
}
return false; 
```

但是如果用户无效，我们只会得到一个错误，例如：javax.naming.AuthenticationException: LDAP: error code 49，它不能区分无效通行证和过期帐户等。

我读到您可以尝试重新连接，然后执行 getResponseControls() 以访问实际发生的详细错误，例如：

```
Properties props = new Properties();
props.setProperty(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
props.setProperty(Context.PROVIDER_URL, someUrl);

InitialLdapContext ctx = null;
try {
    ctx = new InitialLdapContext(props, null);
    // set the user/pass they entered
    ctx.addToEnvironment(Context.SECURITY_PRINCIPAL, commonName);
    ctx.addToEnvironment(Context.SECURITY_CREDENTIALS, password);
    Hashtable env = new Hashtable();
    ctx.reconnect(null);
    return true;
} catch (javax.naming.AuthenticationException ex) {
    ex.printStackTrace();
    try {
       Control[] controls = ctx.getResponseControls();
       if (controls == null) {
          logger.debug("response controls  = null", ex);
       } else {
           logger.debug("response controls  = " + controls.toString(), ex);
       }
   } catch (NamingException ex1) {
       logger.error("error decoding respponsecontrols", ex);
   }
   return false;
} catch (NamingException ex) {
     logger.warn("LDAP NamingException looking for user - " + 
          username + ": " + ex.getMessage(), ex);
} 
```

但是当我这样做时，控件为空。

有人成功地做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T07:29:37.707

许多目录服务器使用“无效凭据”(49) 来指示帐户存在问题，即帐户不存在或身份验证存在问题。通常，最好不要指出帐户不存在或被锁定（这也表明其存在），因为这样攻击者就会知道该帐户存在。

# php - jquery在单击按钮时更改div形状

> ID：15871873
> 
> 赞同：-2
> 
> 时间：2013-04-08T05:29:19.917
> 
> 标签：php, jquery

我正在将用户上传的图像显示到 div 中。div的方形，横向，纵向和全景形状有四个按钮。用户可以根据 div 形状图像自动更改 div 的形状。但我没有找到任何 jquery 或任何与形状相关的东西。我希望当用户单击方形按钮时，div 形状会根据此更改，对于横向、纵向、全景也是如此。我不知道如何开始。请帮忙。这是代码，我附上了截图。在这个我的图像没有根据高度和宽度切割，当我点击正方形时，它在中心位置左对齐。请看截图。$("#square").click(函数(){

```
$(".resize-div").animate({width: 341,height: 341});

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T05:34:25.273

`height width`根据您的要求设置

```
$(document).ready(function() {

    $("#btnSquare").click(function(){
        $("#div").width(100).height(100);
    }); 

 $("#btnlandscape").click(function(){
        $("#div").width(300).height(400);
    }); 

 $("#btnportrait").click(function(){
        $("#div").width(400).height(300);
    }); 

 $("#btnpanoramic").click(function(){
        $("#div").width(100).height(100);
    }); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T05:44:08.420

您需要使用[css](http://api.jquery.com/css/)方法来更改 div 的尺寸。例如：

```
var dim;

switch ($(this).data('type')) {
    case 'square':
        dim = {height: 400, width: 400};
        break;

    case 'landscape':
        dim = {height: 300, width: 400};
        break;

    case 'portrait':
        dim = {height: 400, width: 300};
        break;
} 
```

[http://jsfiddle.net/z46Tt/2/](http://jsfiddle.net/z46Tt/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T05:35:00.787

onclick 使用 [Jquery CSS](http://api.jquery.com/css/)

并更改图像 Div 的 CSS 属性。把它做成正方形或者你想做的任何东西

# java - 操作多个复选框项目的有效方法

> ID：15871875
> 
> 赞同：1
> 
> 时间：2013-04-08T05:29:25.567
> 
> 标签：java, swing, performance, jcheckbox

我在 UI 中有 6 个 JCheckBox，并且基于一些用户操作，我必须更改 JCheckBox 的状态，例如启用、选择和使其不可见。因此，我没有将每个 JCheckBox 的代码分开，而是使用了以下代码，

```
 Object[] checkBoxCollection = null;
        checkBoxCollection = new Object[]{qualityChkBox1, qualityChkBox2, qualityChkBox3, qualityChkBox4, qualityChkBox5, qualityChkBox6};
        for (int i = 0; i < checkBoxCollection.length; i++) {
            JCheckBox checkBox = (JCheckBox) checkBoxCollection[i];
            if (checkBox.getText().equals("Name") || checkBox.getText().equals("RollNo")) {
                checkBox.setSelected(true);
            } else {
                checkBox.setSelected(false);
            }
        } 
```

同样，我在代码中有一些地方，我不断地改变状态，比如`setSelected(false)`和`setSelected(true)`。

有什么比这更好的方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T07:06:38.387

[如此处](https://stackoverflow.com/a/6559541/230513)所示，您可以使用`EnumSet`来定义表示模型的连贯状态的集合。然后，您的复选框可以根据定义的状态共享一个共同[`Action`](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)条件。`JCheckBox`

# jquery - 将 jQuery 插件与数据库集成

> ID：15871880
> 
> 赞同：1
> 
> 时间：2013-04-08T05:29:43.187
> 
> 标签：jquery, asp.net

这个插件适用于静态值。但我想使用数据库中的值。这是一个 3d 图表。我已经尝试了一切，但找不到任何解决方案。所以帮忙吧。我尝试过各种各样的事情。搜索所有可以解释这一点的可能网站。但到目前为止还没有任何帮助。甚至搜索了制作此类插件的网站，但没有找到合适的文档。对于其他想要将任何 jQuery 插件与他们的数据库集成的开发人员来说，它将是 gr8 的。

```
<html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Highcharts Example</title>

       <script type="text/javascript">
         var mysuperdata= null;
        jQuery.ajax({
        url: url: "Default2.aspx/GetData",
        contentType: "application/json; charset=utf-8",
        data: { "param1": p1, "inicialDate": inicialDate, "finalDate": finalDate },
        dataType: "jsonp",
       success: function (d) { mysuperdata = d }
      });

     </script>

<script 
     type="text/javascript"                                                                                   
     src=
     "http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript">
      $(function () {
            var chart;
            $(document).ready(function () {
                chart = new Highcharts.Chart({
                    chart: {
                        renderTo: 'container',
                        plotBackgroundColor: null,
                        plotBorderWidth: null,
                        plotShadow: false
                    },
                    title: {
                        text: 'Browser market 
                         shares at a specific website,   2010'
                    },
                    tooltip: {
                        pointFormat: '{series.name}: 
                            <b>{point.percentage}%</b>',
                        percentageDecimals: 1
                    },
                    plotOptions: {
                        pie: {
                            allowPointSelect: true,
                            cursor: 'pointer',
                            dataLabels: {
                                enabled: true,
                                color: '#000000',
                                connectorColor: '#000000',
                                formatter: function () {
                                    return '<b>' + this.point.name + 
                                   '</b>: ' + this.percentage + ' %';
                                }
                            }
                        }
                    },
                    series: [{
                      type: 'pie',
                      name: 'Browser share',
                      data: mysuperdata
                  }]
                });
            });

        });
    </script>
  </head>
    <body>
     <script src="http://code.highcharts.com/highcharts.js"></script>
      <script src="http://code.highcharts.com/modules/exporting.js"></script>
           <div id="container" style="min-width: 400px; height:
                   400px; margin: 0 auto"></div>

            </body>
          </html>       using System;
       using System.Collections.Generic;
       using System.Linq;
       using System.Web;
       using System.Web.UI;
       using System.Web.UI.WebControls;
       using System.Web.Services;
       using System.Web.Script.Services;

       public partial class Default2 : System.Web.UI.Page
       {
         protected void Page_Load(object sender, EventArgs e)
        {

        }  
         [WebMethod]
       [ScriptMethod(ResponseFormat = ResponseFormat.Json, XmlSerializeString = false)]
        public static Array GetData()
         {
           return new Dictionary<string, double>()
              {
                 { "Firefox", 45 },
                 { "IE", 24.8 },
                 { "Chrome", 12.8 },
                 { "Safari", 8.5 },
                 { "Opera", 5.2 },
                 { "Outros", 3.7 },
              }.ToArray();
           }
          } 
```

我已经编辑了代码 adriano，但它仍然无法正常工作。它显示一个空白页。我不知道现在该怎么办。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:00:19.447

如果您不想进行 ajax/json 调用，您可以按照我的方法动态编写 jquery 函数，然后通过启动脚本注册它。这是代码..

```
void loadchart()
{
     DateTime strat = DateTime.Parse(DropDownList1.SelectedValue);
     int day = strat.Day;
     int tosub = day - 1;
     strat = strat.AddDays((0 - tosub));
     DateTime edate = strat.AddMonths(1);
     edate = edate.AddDays(-1);
     double tot = 0;
     string jq = "<script type=\"text/javascript\"> $(document).ready(function () { var line1 = [";
     while (strat <= edate)
     {
          string x  = strat.ToString("dd/MMM/yy");
          double y = getregularorderamount(strat);
          tot += y;
          jq += "['"+x+"', "+y.ToString()+"],";
          strat = strat.AddDays(1);
     }
     jq = jq.Substring(0, jq.Length - 1);
     jq += @"];
        var plot1 = $.jqplot('chart1', [line1], {
       animate: true,";
     jq += "title: 'Total Order Amount For The Month Of - " + DateTime.Parse(DropDownList1.SelectedValue).ToString("MMMM-yyyy") + " = &#x20B9;" + tot.ToString() + "',";
       jq += @"     axes: {
                xaxis: {
                    renderer: $.jqplot.DateAxisRenderer,
                    tickOptions: {
                        formatString: '%b&nbsp;%#d'
                    }
                },
                yaxis: {
                       min:0,
                    tickOptions: {
                        formatString: '&#x20B9;%.0f'
                    }
                }
            },
            highlighter: {
                show: true,
                sizeAdjust: 7.5,
                formatString: 'On date: %s, Total sale amount: %s'
            },
            cursor: {
                show: false
            }
        });
    });";
  jq+="</script>";
     ScriptManager.RegisterStartupScript(this, this.GetType(), "bgh", jq, false); 
```

希望这种肮脏的方法有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:33:21.730

这很难解释，但这里我们使用 highcharts 并从数据库加载数据。

首先，您需要知道如何使用 jquery 向使用 JSON 的 web 方法发送调用。如果你使用 c# 可能会是这样的：

Javascript：

```
var mysuperdata= null;
jQuery.ajax({
    url: url: "Data.aspx/GetData",
    contentType: "application/json; charset=utf-8",
    data: { },
    dataType: "jsonp",
    success: function (d) { mysuperdata = d }
}); 
```

在此示例中，您正在访问页面 Data.aspx，执行不传递参数的方法 GetData。但是你可以传递参数。

C＃：

```
[WebMethod] 
[ScriptMethod(ResponseFormat = ResponseFormat.Json, XmlSerializeString = false)] 
public static Array GetData() 
{
    return new Dictionary<string, double>()
    {
        { "Firefox", 45 },
        { "IE", 24.8 },
        { "Chrome", 12.8 },
        { "Safari", 8.5 },
        { "Opera", 5.2 },
        { "Outros", 3.7 },
    }.ToArray();
} 
```

现在我们知道要获取数据了！重要的是，这些数据是您在聊天中的系列数据，您发送这个 Json：

```
 [
            ['Firefox', 45.0],
            ['IE', 26.8],
            {
                name: 'Chrome',
                y: 12.8,
                sliced: true,
                selected: true
            },
            ['Safari', 8.5],
            ['Opera', 6.2],
            ['Others', 0.7]
        ] 
```

你的 C# 必须返回一个类似这个对象的数组，用 C# 很容易挂载。

最后你有你的图表：

```
 $(function () {
        var chart;
        $(document).ready(function () {
            chart = new Highcharts.Chart({
                chart: {
                    renderTo: 'container',
                    plotBackgroundColor: null,
                    plotBorderWidth: null,
                    plotShadow: false
                },
                title: {
                    text: 'Browser market 
                     shares at a specific website,   2010'
                },
                tooltip: {
                    pointFormat: '{series.name}: 
                        <b>{point.percentage}%</b>',
                    percentageDecimals: 1
                },
                plotOptions: {
                    pie: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        dataLabels: {
                            enabled: true,
                            color: '#000000',
                            connectorColor: '#000000',
                            formatter: function () {
                                return '<b>' + this.point.name + 
                               '</b>: ' + this.percentage + ' %';
                            }
                        }
                    }
                },
                series: [{
                    type: 'pie',
                    name: 'Browser share',
                    data: mysuperdata 
                }]
            });
        });

    }); 
```

当然，您可以返回更多的 1 值，您的图表是 3D 的，可能更复杂，这只是说明如何从数据库中获取数据并插入图表...请尝试提出问题！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T05:33:25.283

您需要向服务器和服务器脚本发送另一个 AJAX 请求以从 DB 获取值并返回到您的 AJAX 方法。然后，您应该将此值传递到您的模块中以构建图表。

# php - 如何将控制台输出转换为数组php

> ID：15871881
> 
> 赞同：0
> 
> 时间：2013-04-08T05:29:57.300
> 
> 标签：php, console-application

我们如何将控制台输出转换为 php 中的数组以对控制台输出数据进行进一步计算？

我已经在基于可执行控制台的应用程序中编译了我的 matlab 程序。我想在 php 中使用 exe 的输出进行计算，而不将输出保存在我想将其保存在数组中的文件中。matlab代码如下

```
 [im_data,color_names,color_weight_vec_coarse,color_weight_vec_fine,shoe_grad_pyramid_shape,...
    shoe_grad_pyramid_texture,shoe_aspect_ratio,time_elapsed] = single_shoe_description_seq(im,...
    plot_option,save_option,canny_thresholds,phog_params,save_name_list,color_file_mat,num_clusters_emd);

disp(im_data) 
```

输出如下：

```
 Columns 1 through 7

    0.1373 0.0414 0.0541 0.1342 0.5606 0.5293 0.1652

  Columns 8 through 14

0.0341 0.0396 0.0633 0.0778 0.0289 0.0654 0.0752

   Columns 15 through 21

  0.3055 0.4602 0.0631 0.0360 0.0188 0.0497 0.0228

  Columns 22 through 28

0.0294 0.0373 0.0734 0.3148 0.1703 0.0294 0.0057

Columns 29 through 35

0.0263 0.0382 0.0977 0.0396 0.1056 0.0781 0.1085 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T05:33:13.270

如果您向我们展示了您的输出和预期输出，这可能会有所帮助，您仍然可以尝试这个，

```
$output = shell_exec('your execute command');
$outputArray = split("[\r|\n]", trim($output));
print_r($outputArray); 
```

# javascript - Onclick 确认不工作

> ID：15871882
> 
> 赞同：1
> 
> 时间：2013-04-08T05:29:58.843
> 
> 标签：javascript

你好我有这行代码。

```
onClick="confirm('Are you sure you want to update the database
   to the latest version?')"><li class="navb">Update Version 
```

但问题是即使用户点击取消或否。它仍将执行该功能。希望对我做错的事情有任何帮助。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T05:31:38.193

您必须使用`return confirm(...)`而不是仅仅`confirm(...)`让它工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T05:32:53.373

Confirm 函数实际上返回一个布尔值。如果用户单击确定则为 true，如果单击取消则为 false。
因此，您需要将确认函数的返回值保存在一个变量中，然后检查该变量以执行所需的操作。

# blackberry - 分析黑莓应用程序。GraphicsInternal.updateDisplayFromBackBuffer0(...) 会大量消耗电池电量

> ID：15871887
> 
> 赞同：0
> 
> 时间：2013-04-08T05:30:32.237
> 
> 标签：blackberry, java-me, profiling

我目前正在分析一个黑莓应用程序，以了解应用程序的哪些部分耗尽了电池。在我的一个中`MainScreen`，我注意到当我按下这个屏幕时**CPU 利用率**增加到**100%**，然后我看到方法`GraphicsInternal.updateDisplayFromBackBuffer(...)`方法使用了高达**70%**的 CPU。现在我的问题是，为什么这种方法会消耗这么多资源？

# java - 自定义 ListView + getView 方法

> ID：15871891
> 
> 赞同：0
> 
> 时间：2013-04-08T05:31:15.073
> 
> 标签：java, android, listview, listadapter

我需要有关使用 getView() 方法的自定义适配器的帮助。当适配器在 getView() 方法中创建一个列表时，每次渲染时都会调用等`holder.textEpisode.setTextColor()`。这会带来沉重的负载并且列表开始变慢。
请帮我解决这个问题。谢谢！

```
public class myAdapterDouble extends ArrayAdapter<Order> {

private int[] colorWhite = new int[] { -0x1 };
private int[] colors = new int[] { -0x1, -0x242425 };
private int[] colorBlack = new int[] { -0x1000000 };
private int[] colorTransparent = new int[] { android.R.color.transparent };
private LayoutInflater lInflater;
private ArrayList<Order> data;
private Order o;
private DisplayImageOptions options;
private ImageLoader imageLoader;
private ImageLoaderConfiguration config;
private Context ctx;
private Typeface tf;

public myAdapterDouble(Context c, int listItem, ArrayList<Order> data) {
super(c, listItem, data);
lInflater = LayoutInflater.from(c);
this.data = data;
ctx = c;

tf = Typeface.createFromAsset(ctx.getAssets(), "meiryo.ttc");

imageLoader = ImageLoader.getInstance();
options = new DisplayImageOptions.Builder()
        .showStubImage(R.drawable.no_image)
        .showImageForEmptyUri(R.drawable.no_image).cacheOnDisc()
        .cacheInMemory().build();

config = new ImageLoaderConfiguration.Builder(c.getApplicationContext())
        .threadPriority(Thread.NORM_PRIORITY - 2)
        .memoryCacheSize(2 * 1024 * 1024)  // 2 Mb
        .memoryCacheExtraOptions(100, 100)
        .denyCacheImageMultipleSizesInMemory()
        .discCacheFileNameGenerator(new Md5FileNameGenerator())
        .tasksProcessingOrder(QueueProcessingType.LIFO).enableLogging()
        .build();
ImageLoader.getInstance().init(config);
}

SharedPreferences sharedPref;
boolean posters, fixFont;
float headerSize, timeSize, dateSize;
int imageWSize;

public View getView(final int position, View convertView, ViewGroup parent) {

ViewHolder holder = null;
o = data.get(position);

sharedPref = PreferenceManager.getDefaultSharedPreferences(ctx);
posters = sharedPref.getBoolean("poster", true);
fixFont = sharedPref.getBoolean("fix_font", false);

if (convertView == null) {
    convertView = lInflater.inflate(R.layout.double_list_item, null);
    holder = new ViewHolder();
    holder.textName = (TextView) convertView.findViewById(R.id.text);   
    if (fixFont) {
        try {
            holder.textName.setTypeface(tf);
        } catch (Exception e) {
            Toast.makeText(ctx, e.toString(), Toast.LENGTH_SHORT).show();
        }
    } else {
        try {
            holder.textName.setTypeface(Typeface.DEFAULT);
        } catch (Exception e) {
            Toast.makeText(ctx, e.toString(), Toast.LENGTH_SHORT).show();
        }
    }
    holder.textEpisode = (TextView) convertView.findViewById(R.id.text2);
    holder.img = (ImageView) convertView.findViewById(R.id.image);

    String width = sharedPref.getString("image_width", "70");
    imageWSize = Integer.parseInt(width); // ширина
    final float scale = getContext().getResources().getDisplayMetrics().density;
    int px = (int) (imageWSize*scale + 0.5f);

    holder.img.getLayoutParams().height = LayoutParams.WRAP_CONTENT;
    holder.img.getLayoutParams().width = px;
    if(imageWSize == 0) {
        holder.img.getLayoutParams().width = LayoutParams.WRAP_CONTENT;
    }
    holder.img.setPadding(5, 5, 5, 5);

    convertView.setTag(holder);
} else {
    holder = (ViewHolder) convertView.getTag();
}

headerSize = Float.parseFloat(sharedPref.getString("headsize", "20"));
holder.textName.setTextSize(headerSize); // размер названия
timeSize = Float.parseFloat(sharedPref.getString("timesize", "15"));
holder.textEpisode.setTextSize(timeSize); // размер времени

if (posters) {
    holder.img.setVisibility(View.VISIBLE);
    try {
        imageLoader.displayImage(o.getLink(), holder.img, options);
    } catch (NullPointerException e) {
        e.printStackTrace();
    }
} else {
    holder.img.setVisibility(View.GONE);
}

holder.img.setTag(o);
holder.textName.setText(o.getTextName());
holder.textEpisode.setText(o.getTextEpisode());
holder.textEpisode.setTextColor(Color.BLACK);

if (o.getTextEpisode().toString().contains(ctx.getString(R.string.final_ep))) { 
    String finaleColor = sharedPref.getString("finale_color", "1");
    if (finaleColor.contains("default")) {
        holder.textEpisode.setTextColor(Color.parseColor("#2E64FE"));
    }
    if (finaleColor.contains("yelow")) {
        holder.textEpisode.setTextColor(Color.YELLOW);
    }
    if (finaleColor.contains("red")) {
        holder.textEpisode.setTextColor(Color.RED);
    }
    if (finaleColor.contains("green")) {
        holder.textEpisode.setTextColor(Color.GREEN);
    }
    if (finaleColor.contains("white")) {
        holder.textEpisode.setTextColor(Color.WHITE);
    }
    if (finaleColor.contains("gray")) {
        holder.textEpisode.setTextColor(Color.GRAY);
    }           
} else {
    holder.textEpisode.setTextColor(Color.parseColor("#2E64FE"));
}

String chooseColor = sharedPref.getString("colorList", "");
if (chooseColor.contains("white")) {
    int colorPos = position % colorWhite.length;
    convertView.setBackgroundColor(colorWhite[colorPos]);
}
if (chooseColor.contains("black")) {
    int colorPos = position % colorBlack.length;
    convertView.setBackgroundColor(colorBlack[colorPos]);
    holder.textName.setTextColor(Color.parseColor("#FFFFFF"));
}
if (chooseColor.contains("whitegray")) {
    int colorPos = position % colors.length;
    convertView.setBackgroundColor(colors[colorPos]);
}
if (chooseColor.contains("transparent")) {
    int colorPos = position % colorTransparent.length;
    convertView.setBackgroundColor(colorTransparent[colorPos]);
}

return convertView;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T05:55:37.000

每次滚动加载下一个项目时，都会调用 getView() 方法。

```
sharedPref = PreferenceManager.getDefaultSharedPreferences(ctx);
posters = sharedPref.getBoolean("poster", true);
fixFont = sharedPref.getBoolean("fix_font", false); 
```

这应该会减慢滚动速度，因为每次它需要读取和解析首选项。

是否将所有这些首选项作为一些变量加载一次。

如果这仍然不能解决问题，请尝试[Method Profiling](http://developer.android.com/tools/debugging/debugging-tracing.html)并检查 getView 方法的什么 Incl% 并查看哪些方法在 getView 中占用了更多的 cpu 使用率。

**已编辑**

```
public class myAdapterDouble extends ArrayAdapter<Order> {
    private int[] colorWhite = new int[] { -0x1 };
    private int[] colors = new int[] { -0x1, -0x242425 };
    private int[] colorBlack = new int[] { -0x1000000 };
    private int[] colorTransparent = new int[] { android.R.color.transparent };
    private LayoutInflater lInflater;
    private ArrayList<Order> data;
    private Order o;
    private DisplayImageOptions options;
    private ImageLoader imageLoader;
    private ImageLoaderConfiguration config;
    private Context ctx;
    private Typeface tf;

    boolean posters, fixFont;
    float headerSize, timeSize, dateSize;
    int imageWSize;
    private String finaleColor;
    private String chooseColor;
    private String final_ep;

    public myAdapterDouble(Context c, int listItem, ArrayList<Order> data) {
        super(c, listItem, data);
        lInflater = LayoutInflater.from(c);
        this.data = data;
        ctx = c;

        tf = Typeface.createFromAsset(ctx.getAssets(), "meiryo.ttc");

        imageLoader = ImageLoader.getInstance();
        options = new DisplayImageOptions.Builder().showStubImage(R.drawable.no_image).showImageForEmptyUri(R.drawable.no_image).cacheOnDisc().cacheInMemory().build();

        config = new ImageLoaderConfiguration.Builder(c.getApplicationContext()).threadPriority(Thread.NORM_PRIORITY - 2).memoryCacheSize(2 * 1024 * 1024)
                // 2 Mb
                .memoryCacheExtraOptions(100, 100).denyCacheImageMultipleSizesInMemory().discCacheFileNameGenerator(new Md5FileNameGenerator()).tasksProcessingOrder(QueueProcessingType.LIFO)
                .enableLogging().build();
        ImageLoader.getInstance().init(config);

        SharedPreferences sharedPref;

        sharedPref = PreferenceManager.getDefaultSharedPreferences(ctx);
        posters = sharedPref.getBoolean("poster", true);
        fixFont = sharedPref.getBoolean("fix_font", false);

        String width = sharedPref.getString("image_width", "70");
        imageWSize = Integer.parseInt(width); // ширина
        headerSize = Float.parseFloat(sharedPref.getString("headsize", "20"));
        timeSize = Float.parseFloat(sharedPref.getString("timesize", "15"));

        finaleColor = sharedPref.getString("finale_color", "1");
        chooseColor = sharedPref.getString("colorList", "");
        final_ep = ctx.getString(R.string.final_ep);
    }

    public View getView(final int position, View convertView, ViewGroup parent) {

        ViewHolder holder = null;
        o = data.get(position);

        if (convertView == null) {
            convertView = lInflater.inflate(R.layout.double_list_item, null);
            holder = new ViewHolder();
            holder.textName = (TextView) convertView.findViewById(R.id.text);
            if (fixFont) {
                try {
                    holder.textName.setTypeface(tf);
                }
                catch (Exception e) {
                    Toast.makeText(ctx, e.toString(), Toast.LENGTH_SHORT).show();
                }
            }
            else {
                try {
                    holder.textName.setTypeface(Typeface.DEFAULT);
                }
                catch (Exception e) {
                    Toast.makeText(ctx, e.toString(), Toast.LENGTH_SHORT).show();
                }
            }
            holder.textEpisode = (TextView) convertView.findViewById(R.id.text2);
            holder.img = (ImageView) convertView.findViewById(R.id.image);

            final float scale = getContext().getResources().getDisplayMetrics().density;
            int px = (int) (imageWSize * scale + 0.5f);

            holder.img.getLayoutParams().height = LayoutParams.WRAP_CONTENT;
            holder.img.getLayoutParams().width = px;
            if (imageWSize == 0) {
                holder.img.getLayoutParams().width = LayoutParams.WRAP_CONTENT;
            }
            holder.img.setPadding(5, 5, 5, 5);

            convertView.setTag(holder);
        }
        else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.textName.setTextSize(headerSize); // размер названия

        holder.textEpisode.setTextSize(timeSize); // размер времени

        if (posters) {
            holder.img.setVisibility(View.VISIBLE);
            try {
                imageLoader.displayImage(o.getLink(), holder.img, options);
            }
            catch (NullPointerException e) {
                e.printStackTrace();
            }
        }
        else {
            holder.img.setVisibility(View.GONE);
        }

        holder.img.setTag(o);
        holder.textName.setText(o.getTextName());
        holder.textEpisode.setText(o.getTextEpisode());
        holder.textEpisode.setTextColor(Color.BLACK);

        if (o.getTextEpisode().toString().contains()) {

            if (finaleColor.contains("default")) {
                holder.textEpisode.setTextColor(Color.parseColor("#2E64FE"));
            }
            if (finaleColor.contains("yelow")) {
                holder.textEpisode.setTextColor(Color.YELLOW);
            }
            if (finaleColor.contains("red")) {
                holder.textEpisode.setTextColor(Color.RED);
            }
            if (finaleColor.contains("green")) {
                holder.textEpisode.setTextColor(Color.GREEN);
            }
            if (finaleColor.contains("white")) {
                holder.textEpisode.setTextColor(Color.WHITE);
            }
            if (finaleColor.contains("gray")) {
                holder.textEpisode.setTextColor(Color.GRAY);
            }
        }
        else {
            holder.textEpisode.setTextColor(Color.parseColor("#2E64FE"));
        }

        if (chooseColor.contains("white")) {
            int colorPos = position % colorWhite.length;
            convertView.setBackgroundColor(colorWhite[colorPos]);
        }
        if (chooseColor.contains("black")) {
            int colorPos = position % colorBlack.length;
            convertView.setBackgroundColor(colorBlack[colorPos]);
            holder.textName.setTextColor(Color.parseColor("#FFFFFF"));
        }
        if (chooseColor.contains("whitegray")) {
            int colorPos = position % colors.length;
            convertView.setBackgroundColor(colors[colorPos]);
        }
        if (chooseColor.contains("transparent")) {
            int colorPos = position % colorTransparent.length;
            convertView.setBackgroundColor(colorTransparent[colorPos]);
        }

        return convertView;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T06:02:36.057

尝试这样而不是`viewholder`这样对我来说非常有效。

```
public View getView(int position, View convertView, ViewGroup parent) {
View v = convertView;
sharedPref = PreferenceManager.getDefaultSharedPreferences(ctx);
posters = sharedPref.getBoolean("poster", true);
fixFont = sharedPref.getBoolean("fix_font", false);

if (v == null) {
    LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    v = vi.inflate(R.layout.double_list_item, null);
}

TextView textName = (TextView) v.findViewById(R.id.text);
if (fixFont){
   try {
        textName.setTypeface(tf);
   } catch (Exception e) {
        Toast.makeText(ctx, e.toString(), Toast.LENGTH_SHORT).show();
   }
}else {
   try {
        textName.setTypeface(Typeface.DEFAULT);
   } catch (Exception e) {
        Toast.makeText(ctx, e.toString(), Toast.LENGTH_SHORT).show();
   }
}
return super.getView(position, v, parent);
}
}; 
```

我希望这能帮到您。

# javascript - 从 Javascript 调用 ASP

> ID：15871894
> 
> 赞同：-1
> 
> 时间：2013-04-08T05:31:31.120
> 
> 标签：javascript, asp-classic

我想弄清楚，我怎样才能用 javascript 调用 ASP（不是 asp.net）站点/页面/等。ASP 是外部文件，JS 在 HTML 代码内部。

ASP 函数旨在使用删除功能，从数据库中删除选定的行。如何在不更改浏览器页面的情况下做到这一点？

请告诉我，如果你知道另一种方法来做到这一点，我还在学习 ASP。

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T05:38:04.190

有几种方法可以做到这一点，但*到目前为止*，最常见的方法是使用`XMLHttpRequest`，通常称为 AJAX。例如：

```
var xhr = new XMLHttpRequest();
xhr.open("POST", "delete.asp", true);
xhr.send("id=" + rowID); 
```

# javascript - 防止用户在 textarea 中输入某些单词

> ID：15871896
> 
> 赞同：0
> 
> 时间：2013-04-08T05:32:01.870
> 
> 标签：javascript, jquery, html, textarea

所以我有一个网站，我希望我的用户不能使用“.com”或“.net”等词。如果他们确实输入了它，那么我只想用空格替换它。到目前为止，如果用户要在文本区域中输入任何 html 代码，那么我有脚趾 javascript 代码，然后它将用空格替换它，如果他们要输入这些特定的单词，我希望同样发生。

```
function stoppedTyping(){
    if(this.value.length > 0) { 
        document.getElementById('post_btn').disabled = false; 
    } else { 
        document.getElementById('post_btn').disabled = true;
    }

    var re = /(<([^>]+)>)/gi;
    for (i=0; i < arguments.length; i++){
    arguments[i].value=arguments[i].value.replace(re, "");
    }
    var se = ".com";
    for(a=0; a < arguments.length; a++){
            arguments[a].value=arguments[a].value.replace(se, "");
    }
} 
```

最后一个 var se.... 是我尝试替换这个词的尝试。但它不起作用。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T06:09:29.940

对于实时替换，我会`onkeyup`在用户完成按键时收听。这是一个 JSFiddle 演示：http: [//jsfiddle.net/kLTq5/1/](http://jsfiddle.net/kLTq5/1/)

# android - 如何在单个 App 中同时设置纵向和横向

> ID：15871905
> 
> 赞同：-1
> 
> 时间：2013-04-08T05:33:17.037
> 
> 标签：android, android-layout

我有一个小小的疑问，在开发一个用户界面可以在纵向和横向模式下使用的 Android 应用程序时。怎么可能做到这一点？有人可以简要解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:37:31.917

为此，您需要为纵向和横向创建两个具有相同名称的不同 xml 文件，并将其放在各自的文件夹中。

```
MyProject/
    res/
        layout/              # default (portrait)
            main.xml
        layout-land/         # landscape
            main.xml 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T05:38:07.603

为横向和纵向创建 2 个 xml(GUI)。对于纵向 res/layout 和对于横向 res/layout-land 。最好的参考 debv 博客[点击](http://developer.android.com/training/basics/supporting-devices/screens.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T05:39:00.187

您应该有横向和纵向的布局。

```
 res/layout/main.xml
  res/layout-land/main.xml 
```

[http://developer.android.com/guide/topics/resources/providing-resources.html#BestMatch](http://developer.android.com/guide/topics/resources/providing-resources.html#BestMatch)

# windows - 在 Windows XP 中安装 Xcode

> ID：15871907
> 
> 赞同：2
> 
> 时间：2013-04-08T05:33:20.223
> 
> 标签：windows, xcode4.3

我想知道我是否可以在 Windows XP 上安装 Xcode。如果可能，请提供文档链接。非常感谢您提前提供的任何帮助...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T05:52:53.383

这当然是可能的。

有两条路线；

在第二个分区/磁盘上安装 OSx86（又名 iATKOS / Kalyway）并双启动。在 VMWare 下运行 Mac OS X Server。第一条路线需要修改（或使用预先修改的）Leopard 的映像，该映像可以安装在普通 PC 上。这并不像您想象的那么难，尽管您的成功/努力比率将取决于您的 PC 中的硬件与 Mac 硬件中的硬件匹配程度 - 例如，如果您在英特尔主板上运行 Core 2 Duo 和 NVidia显卡你在笑。如果您运行的是 AMD 机器或没有 SSE3 的东西，它会涉及更多。

如果您购买（或已经拥有）Leopard 版本，那么这是一个灰色区域，因为 Leopard EULA 规定您只能在“Apple Labeled”机器上运行它。许多人指出，如果您在 PC 上贴上 Apple 贴纸，您可能会被覆盖。

第二种选择成本更高。Leopard 工作站版本的 EULA 阻止它在仿真下运行，因此 VMWare 不支持此功能。然而，Leopard 服务器可以在仿真下运行，并可用于桌面用途。然而 Leopard 服务器和 VMWare 价格昂贵。

如果您对选项 1) 感兴趣，我建议您从 Insanelymac 开始阅读 OSx86 部分。

我确实认为您应该考虑您将投入的时间是否值得您节省的钱。这对我来说是因为我喜欢修补这类东西，而且我是在早期的 iPhone 测试版中开始的，在他们的 App Store 推出前几个月。

或者，您可以从 eBay 购买低规格的 Mac Mini。您不需要太多的马力来运行 SDK，如果您决定停止开发或购买更好的 Mac，您可以随时将其出售。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T05:38:15.390

不可以。你不能在 Windows 机器上安装 XCode。你需要 MacOS 来运行 XCode。尽管您可以在 Windows 机器上安装 VMWare Server，然后在该虚拟服务器上安装 MacOS，并且可以在该 MacOS 服务器上安装 XCode。

但是要安装 MacOS（VMWare 服务器）并开始使用它。您的硬件必须支持虚拟化。

要安装 VMWare，以下链接可能会很有用。

1.  [http://www.petri.co.il/virtual_install_vmware_server.htm](http://www.petri.co.il/virtual_install_vmware_server.htm)
2.  [http://www.virtuatopia.com/index.php/Installing_VMware_Server_2.0_on_Windows_Systems](http://www.virtuatopia.com/index.php/Installing_VMware_Server_2.0_on_Windows_Systems)
3.  或者总是有[谷歌](http://www.google.co.in/search?rls=en&q=install%20vmware%20server%20on%20windows%20xp&ie=UTF-8&oe=UTF-8)。

[您可以在此处](http://www.intel.com/support/processors/sb/CS-030729.htm)检查您的 CPU 是否支持虚拟化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-04T09:49:24.897

由于 Xcode 是 Mac OS 的软件，因此没有 Mac OS 就无法运行 Xcode。对于 Mac OS，您可以使用 Mac OS 双重引导您的计算机，或者您可以只使用 VMWare 在您的笔记本电脑或 PC 中安装 Mac OS。通过双启动或通过 VMWare 安装 Mac OS 的必要要求是，您需要在笔记本电脑或 PC 中进行真正的高配置，就像至少您需要具有至少 4 个内核的第 5 代核心处理器一样，您还需要超过 4GB 的 RAM 才能更好地运行苹果系统。Mac OS 可以安装第 2 代处理器、双核和 2 GB RAM，但会花费太多时间。这不值得在您的笔记本电脑或 PC 上安装 Mac OS。即使在安装之后，您也无法在如此低的配置下有效地使用 Xcode。

如果您有此配置，则需要一些文件和软件才能在笔记本电脑中安装 Mac OS。

对于通过 VMWare 安装，您可以更喜欢这个视频：[https ://www.youtube.com/watch?v=wodqGvug6e0](https://www.youtube.com/watch?v=wodqGvug6e0)

而且我有与视频相同的文件，但没有上传到互联网。

# java - HelloWorld 中的错误：线程“main”java.lang.UnsupportedClassVersionError 中的异常

> ID：15871910
> 
> 赞同：1
> 
> 时间：2013-04-08T05:33:30.380
> 
> 标签：java

当我在编译后运行我的 HelloWorld 类文件时，我收到以下错误消息：

```
Exception in thread "main" java.lang.UnsupportedClassVersionError: HelloWorld :
Unsupported major.minor version 51.0
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClassCond(Unknown Source)
        at java.lang.ClassLoader.defineClass(Unknown Source)
        at java.security.SecureClassLoader.defineClass(Unknown Source)
        at java.net.URLClassLoader.defineClass(Unknown Source)
        at java.net.URLClassLoader.access$000(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
Could not find the main class: HelloWorld.  Program will exit. 
```

我的程序如下：

```
class HelloWorld {
    public static void main(String[] args)  {
        System.out.println("Hello, World");
    }
} 
```

我是Java新手，第一次安装JDK 7，所以没有多个版本。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T05:44:33.667

从 api

> 当 Java 虚拟机尝试读取类文件并确定文件中的主要和次要版本号不受支持时抛出。

意味着您的编译级别更高 JDK 和

您使用的运行时环境低于编译级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T05:36:18.477

您正在使用 Java 版本 7 (JDK 7) 编译该类。但是您尝试使用较低版本的 Java 启动它。

您可以在命令外壳中输入“java -version”以查看您安装的默认 java 版本。

# c - 在 C 中处理字符串

> ID：15871920
> 
> 赞同：1
> 
> 时间：2013-04-08T05:34:34.060
> 
> 标签：c, string, segmentation-fault, fgets

我正在尝试用 C 编写一个流编辑器，但我很难处理字符串。在读取文件的行后，我想将它们本地存储在字符串数组中。但是，当我尝试将变量存储`temp`到字符串数组中时，`StoredEdits`出现`segmentation fault (core dumped)`错误。此外，如果我取消注释该`char* temp2`变量并将其保存到我的数组中作为一种解决方法，那么最后一个读入的值将存储为数组中的每个值。

我认为这与 temp2 是一个指针这一事实有关。在每次迭代后，我已经尝试了一百万种方法，例如 malloc'ing 和 free'ing 这个变量，但似乎没有任何效果。

任何帮助将不胜感激。

```
 #define MAX_SIZE 100 
      typedef char String[MAX_SIZE];   
          int main(int argc, char* argv[]){
              char** StoredEdits;                                                                                                                                                                    
              int index, numOfEdits;
              FILE *EditFile;                                                                                                                                                                                       
              char* temp;
              //char* temp2;                                                                                                                                                                                            

              StoredEdits = (char**)malloc(MAX_INPUT_SIZE*sizeof(String));                                                                                                                                           

              /*Check to see that edit file is passed in.*/
              if(argc < 2){
                printf("ERROR: Edit File not given\n");
                return(EXIT_FAILURE);
              }

              printf("%s\n",argv[1]);

              if( (EditFile = fopen(argv[1],"r")) != NULL ){
                printf("file opened\n");
                numOfEdits = 0;
                while(fgets(temp, MAX_STRING_SIZE, EditFile) != NULL){
                  printf("%d %s",numOfEdits,temp);
                  //temp2 = temp;                                                                                                                                                                                       
                  StoredEdits[numOfEdits++] = temp;
                  //StoredEdits[numOfEdits++] = temp;
                  printf("Stored successfully\n");
                }

..........

              printf("%d\n",numOfEdits);
              for(index=0;index<numOfEdits;index++){
                printf("%d %s\n",index, StoredEdits[index]);
              } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T05:46:14.173

您需要初始化 temp 以指向有效的存储。

```
temp = malloc(MAX_STRING_SIZE+1); 
```

看起来你可能打算做这样的事情：

```
String temp; 
```

使用你的宏。这作为一个常规的 char 数组会更好。通用名称是*buffer*。

```
char buffer[MAX_STRING_SIZE+1]; 
```

然后，你应该在你的数组中存储，而不是`temp`它本身，而是一个包含内容副本的新字符串。这里有一个 POSIX 函数`strdup`应该会有所帮助。注意，`strdup`它不是 C 标准的一部分，但在大多数托管实现中都可用。从历史上看，它来自 BSD 分支。

```
StoredEdits[numOfEdits++] = strdup(temp); 
```

让我稍微退后一步说，如果你在循环`temp` *内部*`strdup`分配新的存储空间，那么你应该跳过这个，因为正如 Jim Balter 所说，这会泄漏内存。如果您`temp`在循环之外进行分配，那么无论您是静态分配（通过声明 a `char []`）还是动态分配（使用`malloc`）都没有什么区别。

* * *

顺便说一句，这条线不会让你买太多：

```
typedef char String[MAX_SIZE]; 
```

有关原因，请参阅经典的 Kernighan（K&R 中的*K* *）*文章为什么[*Pascal 不是我最喜欢的编程语言*](http://www.lysator.liu.se/c/bwk-on-pascal.html)。

* * *

另请注意，我上面的示例不检查`malloc`. `malloc`可能会失败。当`malloc`失败时，它将返回一个 NULL 指针。如果您尝试通过此指针存储数据，Kaboom！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T05:40:52.727

由于指针语义，您的问题是正确的。您应该使用从 temp 复制字符串的内容。

```
char *cpy = malloc(1 + strlen(temp));
if (cpy)
    strcpy(cpy, temp);
//else handle error
StoredEdits[numOfEdits++] = cpy; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T10:08:56.117

其他人回答了错误的原因。

但是从程序中，我看到你试图分配一个字符双数组。然后将从文件中读取的每一行存储到数组中。

```
StoredEdits = (char**)malloc(MAX_INPUT_SIZE*sizeof(String)); 
```

如果我的假设是正确的，那么您应该将数组传递给 strcpy，如下所示。

```
strcpy(StoredEdits[numOfEdits],tmp); 
```

当您有一个每行大小不同的文件时，最好将指针数组指向字符数组。

# symfony - 扩展 Symfony2 控制器

> ID：15871922
> 
> 赞同：0
> 
> 时间：2013-04-08T05:34:46.587
> 
> 标签：symfony

这可以作为普通控制器正常工作：

```
namespace BundleName\Bundle\SiteBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;

class DefaultController extends Controller
{
    public function indexAction()
    {

        return $this->render('MyBundle:Default:index.html.twig', array("abc" => "test"));

    }

} 
```

...所以肯定通过这样做它应该简单地扩展控制器：

```
namespace BundleName\Bundle\SiteBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;

class ControllerExtension extends Controller
{
    public function render(string $view, array $parameters = array(), Response $response = null)
    {

        return parent::render($view, $parameters, $response);

    }

}

class DefaultController extends ControllerExtension
{
    public function indexAction()
    {

        return $this->render('MyBundle:Default:index.html.twig', array("abc" => "test"));

    }

} 
```

..但我得到这个错误：

运行时注意： ...ControllerExtension::render() 的声明应该与 ...Bundle/SiteBundle/Controller/DefaultController.php 中的 Symfony\Bundle\FrameworkBundle\Controller\Controller::render() 的声明兼容

添加这个没有区别（这是我在某处看到的修复）：

```
use Symfony\Component\HttpFoundation\Response 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T06:23:34.160

PHP 是一种惰性语言。您不能输入提示字符串、整数或布尔值，只能输入数组和类名。

所以，为了得到一个工作函数和正确的 PHP，你应该这样做：

```
use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Response; //! important as @Inori said

class ControllerExtension extends Controller
{
    public function render($view, array $parameters = array(), Response $response = null)
    {
        return parent::render($view, $parameters, $response);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T06:16:31.413

添加`use Symfony\Component\HttpFoundation\Response`应该是解决方法，因为目前您实际上正在尝试匹配`BundleName\Bundle\SiteBundle\Controller\Response`.`ControllerExtension::render`

你到底在哪里添加这条线？

PS 我建议你每个文件只定义 1 个类

# actionscript-3 - 在 Starling 中使用物理注射器不起作用

> ID：15871924
> 
> 赞同：0
> 
> 时间：2013-04-08T05:34:53.497
> 
> 标签：actionscript-3, box2d, physics

我正在尝试在我的八哥游戏中使用物理注射器，并且在“。”上出现此错误。我的

```
static var PhysInjector.STARLING = true; 
```

陈述。'。' 这里不允许。在 Physics Injector 博客上说“只需将静态变量 PhysInjector.STARLING 设置为 true 即可！”

我把它设置在错误的地方还是什么？我究竟做错了什么？

```
 private function injectPhysics():void
    {
        static var PhysInjector.STARLING = true;
        physics = new PhysInjector (stage, new b2Vec2(0, 60), true)
        var floorObject:PhysicsObject = physics.injectPhysics(floor, PhysInjector.SQUARE, new PhysicsProperties({isDynamic:false, friction:0.5, restitution:0.5}));
        var presentP:PhysicsObject = physics.injectPhysics(present, PhysInjector.SQUARE, new PhysicsProperties({isDynamic:true, friction:0.2, restitution:0.5}));
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:23:03.010

在不了解 PhysInjector 如何初始化的情况下试试这个：

```
private function injectPhysics():void {
    PhysInjector.STARLING = true;
    physics = new PhysInjector (stage, new b2Vec2(0, 60), true);
    var floorObject:PhysicsObject = physics.injectPhysics(floor, PhysInjector.SQUARE, new PhysicsProperties({isDynamic:false, friction:0.5, restitution:0.5}));
    var presentP:PhysicsObject = physics.injectPhysics(present, PhysInjector.SQUARE, new PhysicsProperties({isDynamic:true, friction:0.2, restitution:0.5}));
} 
```

如果这不起作用，请尝试以下操作：

```
private function injectPhysics():void {
    physics = new PhysInjector (stage, new b2Vec2(0, 60), true);
    physics.STARLING = true;
    var floorObject:PhysicsObject = physics.injectPhysics(floor, PhysInjector.SQUARE, new PhysicsProperties({isDynamic:false, friction:0.5, restitution:0.5}));
    var presentP:PhysicsObject = physics.injectPhysics(present, PhysInjector.SQUARE, new PhysicsProperties({isDynamic:true, friction:0.2, restitution:0.5}));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:58:28.240

只需从您的代码中删除“static”和“var”命名空间。

```
static var PhysInjector.STARLING = true; 
```

应该

```
PhysInjector.STARLING = true; 
```

# scheme - 方案：交互式 I/O 的延迟和强制

> ID：15871925
> 
> 赞同：1
> 
> 时间：2013-04-08T05:34:59.337
> 
> 标签：scheme

首先我会提出问题。

假设将输入定义为一个返回“istream”的函数 - 一个承诺，当强制时将产生一对，其 cdr 是一个 istream：

```
(define input (lambda () (delay (cons (read) (input))))) 
```

现在我们可以定义驱动程序来期待一个“ostream”——一个空列表或一对，其中的 cdr 是一个 ostream ：

```
(define driver
  (lambda (s)
    (if (null? s) '()
      (begin
      (display (car s))
      (driver (force (cdr s))))))) 
```

注意使用武力。

展示如何编写函数 squares，使其接受 istream 作为参数并返回 ostream。然后您应该能够输入 (driver (squares (input))) 并查看适当的行为。

书上的方块在上面。

```
(define squares (lambda (a)
  (cons "please enter a number\n"
    (let ((n (car a)))
      (if (eof-object? n) '()
        (cons (* n n) (cons #\newline (squares (cdr a)))))))))

(define output (squares (input))) 
```

我不知道如何解决它以及我可以从哪里开始。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:08:38.100

下面是解决方案。（注意：力是作为驱动程序功能的一部分完成的）。要理解的重要一点是，“流”函数（输入，正方形）返回一个延迟表达式，它是一对 2 项，其中第 2 项是另一个延迟表达式，依此类推，该`force`函数也适用于正常值，因此最后一个部分`squares`回报 3 个缺点项目。

```
(define input (lambda () (delay (cons (read) (input)))))

(define driver
  (lambda (s)
     (let ((s (force s)))
       (if (null? s) '()
           (begin
            (display (car s))
            (flush-output)
            (driver (force (cdr s))))))))

(define squares
  (lambda (a)
     (delay (cons "please enter a number\n"
              (delay (let ((nums (force a)))
                       (if (null? (car nums)) '()
                           (cons (* (car nums)
                                    (car nums))
                                 (cons #\newline (squares (cdr nums))))))))))) 
```

现在你可以像这样运行它：`(driver (squares (input)))`。要退出提示，用户需要输入空列表`()`

# mstest - 如何在第一次失败时停止 MsTest 测试的执行？

> ID：15871933
> 
> 赞同：13
> 
> 时间：2013-04-08T05:35:41.380
> 
> 标签：mstest, vstest

我们正在运行每晚构建，最终使用 MsTest 框架运行我们所有的 UnitTest。

我们必须有 100% 的通过率，所以如果一个失败了，那么运行另一个没有意义；因此，我们希望在第一次失败的测试中停止执行。

无论如何我们可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T21:33:12.533

Are you really sure you want to throw away test results?

Say somebody has a bad day and introduces multiple bugs A, B, and C into your code. You might only find out about A on Monday, so you fix that, and you don't know about issue B until Tuesday, and then you don't fix C until Wednesday. But since you were missing test coverage for half a week, bugs introduced Monday aren't discovered until days after they were introduced, and it's more expensive and takes longer to fix them.

If it doesn't cost you much to keep running the tests after a failure, isn't that information useful?

* * *

That said, hacking together a fix in your test libraries wouldn't be that hard. Have all possible codepaths of test failure set a static variable `StopAssert.Failed = true;` (probably by wrapping calls to `Assert` and catching `AssertFailedExceptions`. Then just add `[TestInitialize()]` methods to each test class to stop each test after a failure!

```
public class StopAssert
{
    public static bool Failed { get; private set; }

    public static void AreEqual<T>(T expected, T actual)
    {
        try
        {
            Assert.AreEqual(expected, actual);
        }
        catch
        {
            Failed = true;
            throw;
        }
    }

    // ...skipping lots of methods. I don't think inheritance can make this easy, but reflection might?

    public static void IsFalse(bool condition)
    {
        try
        {
            Assert.IsFalse(condition);
        }
        catch
        {
            Failed = true;
            throw;
        }
    }
}

[TestClass]
public class UnitTest1
{
    [TestInitialize()]
    public void Initialize()
    {
        StopAssert.IsFalse(StopAssert.Failed);
    }

    [TestMethod]
    public void TestMethodPasses()
    {
        StopAssert.AreEqual(2, 1 + 1);
    }

    [TestMethod]
    public void TestMethodFails()
    {
        StopAssert.AreEqual(0, 1 + 1);
    }

    [TestMethod]
    public void TestMethodPasses2()
    {
        StopAssert.AreEqual(2, 1 + 1);
    }
}

[TestClass]
public class UnitTest2
{
    [TestInitialize()]
    public void Initialize()
    {
        StopAssert.IsFalse(StopAssert.Failed);
    }

    [TestMethod]
    public void TestMethodPasses()
    {
        StopAssert.AreEqual(2, 1 + 1);
    }

    [TestMethod]
    public void TestMethodFails()
    {
        StopAssert.AreEqual(0, 1 + 1);
    }

    [TestMethod]
    public void TestMethodPasses2()
    {
        StopAssert.AreEqual(2, 1 + 1);
    }
} 
```

# java - 如何在java中实现一个无符号字节，限制是大小应该只有1个字节

> ID：15871936
> 
> 赞同：0
> 
> 时间：2013-04-08T05:36:00.703
> 
> 标签：java, sockets, io, unsigned, mina

如何在java中实现一个无符号字节，限制是大小只能是1个字节，即我们不能通过And'ing与0xFF转换为short或int

我必须通过套接字传输一个无符号字节数组，因为接收端是一个 C 代码方法，只需要一个大小为 1 字节的无符号字节数组，但是由于 Java 不支持无符号字节的概念，所以会出现问题。我们有什么方法可以做到这一点。

字节 b=（字节）0xF0；甚至字节 b1=0x00; 未通过套接字通道正确发送。请参阅写入服务器的方法。

公共无效编码（IoSession 会话，对象消息，ProtocolEncoderOutput 输出）抛出异常 {

```
 //lProxylogger.info("Inside ProtocolEncoderAdapter. Encoding response to client..");
    String response ;

    //lProxylogger.info("The response length in encode adapter is "+ response.length()+" Message="+response);
    byte[] responseStream; 

    response=(String) message;

    responseStream= response.getBytes("windows-1252");

    //responseStream=serialize(message);

     IoBuffer buffer = IoBuffer.allocate(responseStream.length);
    // buffer.putInt(response.length);
     //IoBuffer buffer=(IoBuffer)message;
      // buffer.putObject(message);
     System.out.println("Encoded Response:"+new String(responseStream));
     for(byte b:responseStream)
         System.out.print(b+",");
     System.out.println();
     buffer.put(responseStream);
//     lProxylogger.info("the response buffer size is "+ buffer.capacity());
     buffer.setAutoShrink(true);
    buffer.shrink();
  //  lProxylogger.info("After shrinking the buffer size is "+ buffer.capacity());
     buffer.flip();

    //System.out.println("Writing response to Stream..");
    out.write(buffer);

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T05:38:04.470

有符号只是你如何解释一个字节的 8 位。通过签名既不长也不短，传输也没有什么不同。您只需发送字节。如果它是无符号的，则由任何解释该字节的东西将其视为无符号的，但这与将其表示为 8 位或发送它无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T07:10:07.553

看来您选择的字符编码可能会损坏您的字符串。如果您还使用这样的编码，则不应尝试将二进制文件放入文本中。

我建议你简化你的代码。而是尝试

```
String response=(String) message;
for(char ch : response.toCharArray()) {
    System.out.println(Integer.toHexString(ch) + ", ");
    out.write(ch);
} 
```

如果这可行，我建议尝试使用基本上相同的 ISO-8859-1 编码。

# serialization - javax.jms.MessageNotReadableException：消息正文是只写的

> ID：15871939
> 
> 赞同：0
> 
> 时间：2013-04-08T05:36:18.370
> 
> 标签：serialization, jms, activemq, amqp

我有一个奇怪的问题

ActiveMQ 是消息服务器，使用 AMQP 发送消息

当我在同一个 Eclipse 项目中同时拥有发布者和订阅者时。我可以发送发送 ObjectMessage 并接收没有任何问题

但是，当我将订阅者和发布者拆分为两个不同的 Eclipse 项目时，我得到了

```
javax.jms.MessageNotReadableException: Message body is write-only 
```

这是我发送的对象的类

```
public class Test1 implements Serializable{

    private String x;

    public Test1( String x){
        this.x = x;
    }
} 
```

这是个例外

```
javax.jms.MessageNotReadableException: Message body is write-only
        at org.apache.activemq.command.ActiveMQBytesMessage.checkWriteOnlyBody(ActiveMQBytesMessage.java:863)
        at org.apache.activemq.command.ActiveMQBytesMessage.initializeReading(ActiveMQBytesMessage.java:868)
        at org.apache.activemq.command.ActiveMQBytesMessage.getBodyLength(ActiveMQBytesMessage.java:190)
        at org.apache.qpid.proton.jms.AMQPNativeOutboundTransformer.transform(AMQPNativeOutboundTransformer.java:63)
        at org.apache.qpid.proton.jms.AutoOutboundTransformer.transform(AutoOutboundTransformer.java:37)
        at org.apache.activemq.transport.amqp.AmqpProtocolConverter$ConsumerContext.pumpOutbound(AmqpProtocolConverter.java:751)
        at org.apache.activemq.transport.amqp.AmqpProtocolConverter$ConsumerContext.onMessageDispatch(AmqpProtocolConverter.java:710)
        at org.apache.activemq.transport.amqp.AmqpProtocolConverter.onActiveMQCommand(AmqpProtocolConverter.java:300)
        at org.apache.activemq.transport.amqp.AmqpTransportFilter.oneway(AmqpTransportFilter.java:64)
        at org.apache.activemq.broker.TransportConnection.dispatch(TransportConnection.java:1378)
        at org.apache.activemq.broker.TransportConnection.processDispatch(TransportConnection.java:897)
        at org.apache.activemq.broker.TransportConnection.iterate(TransportConnection.java:943)
        at org.apache.activemq.thread.PooledTaskRunner.runTask(PooledTaskRunner.java:129)
        at org.apache.activemq.thread.PooledTaskRunner$1.run(PooledTaskRunner.java:47)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1146)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
        at java.lang.Thread.run(Thread.java:679) 
```

这是我遵循的代码

[https://fisheye6.atlassian.com/browse/activemq/trunk/activemq-amqp/src/test/java/org/apache/activemq/transport/amqp/JMSClientTest.java?r=1406466&r=1414990](https://fisheye6.atlassian.com/browse/activemq/trunk/activemq-amqp/src/test/java/org/apache/activemq/transport/amqp/JMSClientTest.java?r=1406466&r=1414990)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-14T10:59:37.473

这应该是带有 AMQ 的 ActiveMQ 中的一个错误

此错误发生在两个可重现的条件下

1.  将对象作为消息发送（当前无法发送对象）
2.  当消费者遇到一些异常时

这里值得注意的是

**这绝不会影响正在传输的消息。您只会看到异常，但数据传输会正常工作！！！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:55:08.323

这听起来像一个错误，在 ActiveMQ 站点上打开一个 Jira 问题并发布一个测试用例，我认为这里没有任何神奇的开关来修复异常。无需发布您的代码，这就是我们所能说的。

# javascript - 当标签或窗口不活动时，浏览器如何暂停/更改JavaScript？

> ID：15871942
> 
> 赞同：181
> 
> 时间：2013-04-08T05:36:30.600
> 
> 标签：javascript, browser

背景：我正在做一些用户界面测试，需要检测人们是否在注意。但是，这个问题与[页面可见性 API](https://stackoverflow.com/a/1060034/586086)**无关**。

具体来说，我想知道如果当前选项卡不活动，或者浏览器窗口不活动，在不同的浏览器中，我的 Javascript 代码将如何受到影响。到目前为止，我已经挖掘了以下内容：

*   [当标签不活动时，ios 5暂停javascript](https://stackoverflow.com/q/7977170/586086)
*   [`setInterval``setTimeout`当标签不活动时，](http://pivotallabs.com/chrome-and-firefox-throttle-settimeout-setinterval-in-inactive-tabs/)延迟会减少- 似乎最近才开始出现，并且可能会弄乱茉莉单元测试，围绕其他事情。
*   `requestAnimationFrame`选项卡不活动时变慢（合理，想不出为什么这会对任何人产生太大影响）

我有以下问题：

*   除了移动浏览器，桌面浏览器是否会在选项卡不活动时暂停 JS 执行？何时以及哪些浏览器？
*   哪些浏览器减少了`setInterval`重复？它只是减少到一个限制还是一个百分比？例如，如果我有一个 10 毫秒的重复和一个 5000 毫秒的重复，每个都会受到什么影响？
*   如果*窗口*失焦，而不仅仅是选项卡，是否会发生这些变化？（我想它会更难检测，因为它需要 OS API。）
*   是否有其他在活动选项卡中不会观察到的效果？他们会不会把本来可以正确执行的事情搞砸（即前面提到的 Jasmine 测试）？

* * *

## 回答 #1

> 赞同：205
> 
> 时间：2013-04-16T09:56:09.337

## 测试一

我为此专门编写了一个测试：
[Frame Rate Distribution: setInterval vs requestAnimationFrame](http://laucheukhim.github.io/frame-rate-distribution/)

^(注意：此测试占用大量 CPU。`requestAnimationFrame`IE 9- 和 Opera 12- 不支持。)

`setInterval`测试记录 a和在不同浏览器中运行的实际时间，`requestAnimationFrame`并以分布的形式为您提供结果。您可以更改毫秒数，`setInterval`以查看它在不同设置下的运行方式。在延迟方面与`setTimeout`a 类似。通常默认为 60fps，具体取决于浏览器。要查看当您切换到其他选项卡或有一个非活动窗口时会发生什么，只需打开页面，切换到其他选项卡并等待一段时间。它将继续在非活动选项卡中记录这些功能所花费的实际时间。`setInterval``requestAnimationFrame`

## 测试二

另一种测试它的方法是重复记录时间戳，`setInterval`并`requestAnimationFrame`在分离的控制台中查看它。当您使选项卡或窗口处于非活动状态时，您可以查看它的更新频率（或是否曾经更新）。

*   [测试`setInterval`](http://jsfiddle.net/laucheukhim/Aev79/)
*   [测试`requestAnimationFrame`](http://jsfiddle.net/laucheukhim/WfdnM/1/)

## 结果

**Chrome**
Chrome 将标签页处于非活动状态时的最小间隔限制为`setInterval`1000 毫秒左右。如果间隔高于 1000ms，它将以指定的间隔运行。窗口是否失焦无关紧要，仅当您切换到不同的选项卡时，间隔才会受到限制。`requestAnimationFrame`选项卡处于非活动状态时暂停。

```
// Provides control over the minimum timer interval for background tabs.
const double kBackgroundTabTimerInterval = 1.0; 
```

^([https://codereview.chromium.org/6546021/patch/1001/2001](https://codereview.chromium.org/6546021/patch/1001/2001))

**Firefox**
类似于Chrome，Firefox将最小间隔限制`setInterval`为大约1000ms，当TAB（不是窗口）不活动时。但是，`requestAnimationFrame`当标签不活动时，运行速度较慢，每个帧都采用1s，2s，4s，8s等。

```
// The default shortest interval/timeout we permit
#define DEFAULT_MIN_TIMEOUT_VALUE 4 // 4ms
#define DEFAULT_MIN_BACKGROUND_TIMEOUT_VALUE 1000 // 1000ms 
```

^([https://hg.mozilla.org/releases/mozilla-release/file/0bf1cadfb004/dom/base/nsGlobalWindow.cpp#l296](https://hg.mozilla.org/releases/mozilla-release/file/0bf1cadfb004/dom/base/nsGlobalWindow.cpp#l296))

**Internet Explorer**
IE 不限制`setInterval`选项卡处于非活动状态时的延迟，但它会`requestAnimationFrame`在非活动选项卡中暂停。窗口是否失焦并不重要。

**Edge**
从 Edge 14 开始，`setInterval`在非活动选项卡中的上限为 1000 毫秒。`requestAnimationFrame`总是在非活动标签中暂停。

**野生动物园**
就像Chrome一样，`setInterval`当标签不活动时，Safari帽子在1000ms上盖。`requestAnimationFrame`也被暂停。

**Opera**
自从采用 Webkit 引擎以来，Opera 表现出与 Chrome 相同的行为。`setInterval`上限为 1000 毫秒，并`requestAnimationFrame`在选项卡处于非活动状态时暂停。

## 概括

非活动标签的重复间隔：

```
           setInterval      requestAnimationFrame 
Chrome
9- 不受影响 不支持
10 不受影响暂停
11+ >=1000ms 暂停

火狐
3- 不受影响 不支持
4 不受影响 1s
5+ >=1000ms 2 n s（n = 自不活动以来的帧数）

IE
9- 不受影响 不支持
10+ 不受影响已暂停

边缘
13-不受影响暂停
14+ >=1000ms 暂停

苹果浏览器
5- 不受影响 不支持
6 不受影响 暂停
7+ >=1000ms 暂停

歌剧
12- 不受影响 不支持
15+ >=1000ms 暂停

```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-10T08:36:46.980

我观察到：在**Chrome**中的非活动选项卡上，等待少于*1000 毫秒*的所有`setTimeout`（必须相同）都四舍五入为*1000 毫秒*。我认为更长的超时不会被修改。`setInterval`

 **似乎是自**Chrome 11**和**Firefox 5.0**以来的行为：[https ://developer.mozilla.org/en-US/docs/DOM/window.setTimeout#Inactive_tabs](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout#Inactive_tabs)

此外，当整个窗口处于非活动状态时，我认为它不会以这种方式运行（但似乎很容易调查）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-11T23:51:59.763

一个更新的答案来补充这些：在 chrome 78.0.3904.108 上，当我移动到不同的选项卡然后回来时，我注意到**所有**这些超时（不仅仅是那些低于 1000 毫秒的超时）比预期的要长一些。我看到的行为被更正确地描述为*“非活动选项卡上的所有超时可能会延迟一些额外的量，最多延迟 1000 毫秒。”* 尝试运行以下命令并切换到另一个选项卡！

```
let timeouts = [ 500, 1000, 2000, 3000, 10000 ];

let minExcess = document.getElementsByClassName('minExcess')[0];

timeouts.forEach(ms => {
  let elem = document.getElementsByClassName(`t${ms}`)[0];
  let cnt = 0;

  let lastMs = +new Date();
  let f = () => {
    let curMs = +new Date();
    let disp = document.createElement('p');
    let net = curMs - lastMs;
    lastMs = curMs;

    setTimeout(f, ms);
    if (minExcess.value && (net - ms) < parseInt(minExcess.value)) return;

    disp.innerText = `${net},`;
    elem.appendChild(disp);
    if (++cnt > 10) elem.firstElementChild.remove();

  };
  setTimeout(f, ms);

});
```

```
body { font-size: 80%; }
div {
  max-height: 80px;
  overflow-x: auto;
  background-color: rgba(0, 0, 0, 0.1);
  margin-bottom: 2px;
  white-space: nowrap;
}
p { margin: 0; }
div > p {
  margin: 0;
  display: inline-block;
  vertical-align: top;
  margin-right: 2px;
}
input { margin: 0 0 10px 0; }
.t500:before { display: block; content: '500ms'; font-weight: bold; }
.t1000:before { display: block; content: '1000ms'; font-weight: bold; }
.t2000:before { display: block; content: '2000ms'; font-weight: bold; }
.t3000:before { display: block; content: '3000ms'; font-weight: bold; }
.t10000:before { display: block; content: '10000ms'; font-weight: bold; }
```

```
<p>Ignore any values delayed by less than this amount:</p>
<input type="text" class="minExcess" value="200" pattern="^[0-9]*$"/>
<div class="timeout t500"></div>
<div class="timeout t1000"></div>
<div class="timeout t2000"></div>
<div class="timeout t3000"></div>
<div class="timeout t10000"></div>
```**

# javascript - 模态不褪色

> ID：15871943
> 
> 赞同：0
> 
> 时间：2013-04-08T05:36:31.077
> 
> 标签：javascript, modalpopupextender

这是我用来获得模态褪色效果的 javascript……它不起作用。我不知道为什么。它就像在一瞬间弹出一样。我希望它慢慢淡入，然后在关闭时淡出。

```
 <link href="Styles/myStyleSheet.css" rel="stylesheet" type="text/css" />
 <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
 <link href="Styles/Tab.css" rel="stylesheet" type="text/css" />

 <script type="text/javascript" language="javascript" src="http://code.jquery.com/jquery-1.9.1.js"></script>
 <script type="text/javascript" language="javascript" src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>

var launch = false;
function launchModalV2() {
    launch = true;
}

function pageLoad() {
    if (launch) {
        //alert('1');
        // $find("mpeTest").show();
        $find('mpeTest').fadeIn();
    }
}

function launchModalV1() {
    alert('1');
    //$find('mpeTest').show();
    $find('mpeTest').fadeIn();
    return false;
} 
```

CSS类：

```
.modalBackground
{
background-color: Black;
-filter: alpha(opacity=80);
-opacity: 0.6;
z-index: 10000;
}

<div style="position:absolute">
<act:ModalPopupExtender ID="mpeTest" BehaviorID="mpeTest" runat="server" TargetControlID="btnShowModal" PopupControlID="pnlPopup" OkControlID="btnOk" BackgroundCssClass="modalBackground">
</act:ModalPopupExtender>  
<asp:Button ID="btnOk" runat="server" Text="Ok" />
</div>

 <div>
    <asp:UpdatePanel runat="server" ID="pnlPopup">
    <ContentTemplate>
    <asp:Panel ID="pnlMyAddressBook" runat="server" BackColor="White" CssClass="roundcorner pnl">

    <table style="width:100%" cellspacing="0px" cellpadding="0px">.......... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:47:01.250

您可以尝试使用`$("#mpeTest").modal("show")`尽管使用`$find('mpeTest').fadeIn();`

# ruby-on-rails - 为什么我会收到“在 Rails 服务器上找不到 'railties' 错误？

> ID：15871950
> 
> 赞同：6
> 
> 时间：2013-04-08T05:37:13.493
> 
> 标签：ruby-on-rails, ruby

当我使用 启动我的 Rails 服务器时 `rails s`，我收到此错误：

```
/usr/local/lib/site_ruby/1.8/rubygems/dependency.rb:296:in `to_specs': Could not find 'railties' (>= 0) among 10 total gem(s) (Gem::LoadError)
from /usr/local/lib/site_ruby/1.8/rubygems/dependency.rb:307:in `to_spec'
from /usr/local/lib/site_ruby/1.8/rubygems/core_ext/kernel_gem.rb:47:in `gem'
from /usr/bin/rails:22 
```

我如何解决它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T05:38:16.500

尝试：

```
bundle install 
```

然后使用以下命令启动您的服务器：

```
bundle exec rails s 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-14T09:22:10.543

您的导轨安装可能有问题。试试看`gem list`，如果你没有看到`railties`然后重新安装 rails：`gem install rails`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T07:24:08.080

如果你安装了一个新的 gem，别忘了 `bundle install`重新启动你的服务器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T05:44:03.103

我不确定，但您必须尝试重新安装 Rails。

试试`sudo gem install rails`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-08T09:24:24.440

您的机器上是否有多个版本的 ruby​​？如果是这样，请下载 rvm，用于`rvm --default`设置默认 ruby​​ 版本，然后检查您是否拥有与默认 ruby​​ 版本相关联的所有需要​​的依赖项（即 gems）。如果没有，则重新安装 rails 和缺少的 gem。

# php - PHP 和图像创建的 Crontab 问题

> ID：15871952
> 
> 赞同：2
> 
> 时间：2013-04-08T05:37:28.060
> 
> 标签：php, image, crontab

**上下文：** 我编写了一个脚本，它从服务器下载图像，将白色设置为透明，并将图像保存在根文件夹中。它还将图像的副本保存在单独的文件夹“图像”中，名称中包含日期和时间。

因为我不确切知道图像何时刷新，所以我将图像的哈希值连同创建日期和文件名一起保存在数据库中。

**问题：** 我希望脚本每 5 分钟自动运行一次，所以我在我的服务器（Ubuntu Server 12.04）上创建了一个 crontab。Crontab 确实每 5 分钟执行一次脚本，但是它只会将新记录添加到数据库中，而不会保存实际图像。当我尝试通过控制台或网络浏览器手动运行脚本时，它可以正常工作：保存图像并更新数据库记录。

**Crontab**（以防万一有问题）：

```
*/5 * * * * /usr/bin/php5 -f /var/www/radar.php > /var/www/logPHP.log 2>&1 
```

**PHP代码：**

```
include 'mysql.php';

$im = imagecreatefromgif("image_url");
$hash = hash_file('md5', "image_url");

$day = date("j");
$month = date("n");
$year = date("Y");
$hour = date("G");
$minute = date("i");

$file = 'image' . $day . '-' . $month . '-' . $year . '_' . $hour . '_' . $minute . '.gif';

echo "Hash: " . $hash . "<br />";
echo "Start: " . date("H:i:s") . "<br />";

$result = mysql_query("SELECT * FROM pictures WHERE hash = '$hash' LIMIT 1");
$num = mysql_num_rows($result);
if ($num == 0) {
    mysql_query("INSERT INTO pictures (year, month, day, hour, minute, hash, file) VALUES ('$year', '$month', '$year', '$hour', '$minute', '$hash', '$file')");

    $dest = imagecreatetruecolor(799, 599);
    imagecopy($dest, $im, 0, 0, 10, 49, 799, 599);

    $color = imagecolorexact($dest, 255, 255, 255);
    imagecolortransparent($dest, $color);

    imagegif($dest, './image.gif');
    imagegif($dest, './images/' . $file);
    imagedestroy($dest);
    imagedestroy($im);
}
echo "End: " . date("H:i:s");
?>
<br /><img src="./image.gif" /> 
```

**编辑：** 现在我在 crontab 中添加了另一行，它使用 wget 下载图像并将其保存到特定文件夹中。图像下载没有问题。我还编辑了 php 文件以使用下载的图像，但问题并没有消失。不创建图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T06:43:59.783

AFAIK，CLI PHP 使用的 ini 文件与与您的 Web 服务器关联的文件不同。如果这也是你的情况，那么对 include() 的调用很可能会通过完全不同的 include_path(s) 进行轮询，因此找不到 mysql.php

打开此页面的错误报告，看看是否显示错误。

```
error_reporting(E_ALL);
ini_set("display_errors", 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T06:50:02.300

好吧，通过脚本文件夹（如主文件夹）中的任何其他文件夹尝试您的 crontab 行。

```
/usr/bin/php5 -f /var/www/radar.php 
```

如果脚本在这种情况下运行。那么可能根本没有为您的用户运行 crontab。然后配置 cron 日志或检查 syslog 以获取任何信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T08:17:07.737

您的 crontab 文件缺少应该运行脚本的用户名。尝试这样的事情：

```
*/5 * * * * www-data /usr/bin/php5 -f /var/www/radar.php > /var/www/logPHP.log 2>&1 
```

您`/var/log/syslog`应该抱怨 crond 错误，例如`missing username`.

祝你项目好运。

# c# - 在视图中添加自定义控件会引发错误

> ID：15871956
> 
> 赞同：1
> 
> 时间：2013-04-08T05:37:38.340
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

在 View 中添加自定义控件会引发以下错误：-

```
"\\Views\\Error\\Index.cshtml(9): error CS1502: The best overloaded method match for 'System.Web.WebPages.WebPageExecutingBase.Write(System.Web.WebPages.HelperResult‌​)' has some invalid arguments" 
```

这是索引页面的代码： -

```
@{
    ViewBag.Title = "Error";
}

<h2>
    Sorry, an error occurred while processing your request. 
</h2>
<div>@Html.RenderPartial("MyUserControl") 
```

这是 MyUserControl 的代码： -

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl" %>

hi 
```

从视图中删除`@Html.RenderPartial("MyUserControl")`可以完美呈现页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T06:24:55.127

由于您使用 RenderPartial 的方式，您会收到该错误。你应该这样做：

```
<div>@Html.Partial("MyUserControl")</div> 
```

或者

```
<div>@{ Html.RenderPartial("MyUserControl");  }</div> 
```

[有关其他学习，请参阅此 SO 问题](https://stackoverflow.com/questions/5248183/html-partial-vs-html-renderpartial-html-action-vs-html-renderaction)。

# iphone - 核心 NSManagedObjectID 总是在 iphone 中返回对象 0

> ID：15871957
> 
> 赞同：1
> 
> 时间：2013-04-08T05:37:50.780
> 
> 标签：iphone, objective-c, xcode, core-data

我想在 Iphone 的核心数据中获取主键值，所以我使用 NSManagedObjectID 来获取 objectID（与 PK 值大致相同）但我遇到的问题是它总是返回 0

这是我的代码块

```
-(NSManagedObject *)existingObjectWithID:(NSManagedObjectID *)objectID
{

Maintness_Item *MainItem1; // my object model 
NSManagedObjectID *yourManagedObjectID = [ MainItem1 objectID];
int yourManagedObject_PK = [[[[[yourManagedObjectID URIRepresentation] absoluteString]    lastPathComponent] substringFromIndex:1] intValue];
NSLog(@"This is my managed object ID ...................%d",yourManagedObject_PK);

return 0;
} 
```

注意：这里我返回 0 ，可能有问题吗？如果有的话，我应该在这里写什么？

请指导我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T06:34:22.727

我认为你不应该使用对象 id 作为私钥。它不是整数，有自己的表示。`NSManagedObjectID`确实可以在例如用户默认值中持久保存对特定实体的引用，或者在持久存储之间创建弱引用（“连接”）。

您可以使用一个 URL 表示：

```
NSURL *uri = [[myObject objectID] URIRepresentation]; 
```

`NSData`如果你想保留它，你可以把它变成，但你也可以只序列化 URI。

如果您需要经典私钥，例如与服务器上的另一个数据实例通信，您应该创建自己的作为实体的属性。只是不要滥用它们来替代托管对象模型关系。

注意：请`UpperCaseNames`仅用于课程，例如您应该使用`lowerCaseName`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:04:02.713

`NSManagedObjectID`不能那样工作，`NSString`.

如果托管对象尚未保存，对象 ID 的绝对字符串将类似于：

```
x-coredata:///Entity/tE7D63E10-8BE4-41CE-A6DC-C131F6990F062 
```

如果它*已*被保存，它将类似于

```
x-coredata://F869550C-914E-4160-B8A7-9DD9A82F2CE2/Entity/p2 
```

这两个版本都没有为`-[NSString intValue]`. 您可能会在最后提取整数，但这*一点用处都没有，甚至一点用都没有*。您不能在任何地方使用该整数值。

# javascript - 如何删除这个cookie？

> ID：15871958
> 
> 赞同：0
> 
> 时间：2013-04-08T05:37:59.017
> 
> 标签：javascript, cookies

我找到了一个我正在审查的 cookie 脚本，它可以创建 cookie 但不会杀死 cookie。

代码：

```
function SetCookie(cookieName,cookieValue,nDays) {
    var today = new Date();
    var expire = new Date();
 if (nDays==null || nDays==0) nDays=1;
   expire.setTime(today.getTime() + 3600000*24*nDays);
document.cookie = cookieName+"="+escape(cookieValue)
+ ";expires="+expire.toGMTString();
}

   function KillCookie(cookieName) {
      SetCookie(cookieName,"",-3);
   }

function ReadCookie(cookieName) {
   var theCookie=""+document.cookie;
   var ind=theCookie.indexOf(cookieName+"=");
if (ind==-1 || cookieName=="") return "";
var ind1=theCookie.indexOf(";",ind);
 if (ind1==-1) ind1=theCookie.length; 
return unescape(theCookie.substring(ind+cookieName.length+1,ind1));
} 
```

如您所见，我创建了函数 KillCookie，它应该将过期日期设置回三天并让浏览器自动删除。问题是它没有删除它。

我在我的代码中编写了这些函数，如下所示

```
 $(function() {
  $('#left').before('<div id="left_widg"><button></button></span>');
  $('#right').before('<div id="right_widg"><button></button></span>');

     $('#left_widg button').on('click',function() {    
       var _checkme = $('#left').css('display');
       var oriWidth = 180;
   if(_checkme === "block") {
     SetCookie('closeWidgetsLeft', 'true', 100);
    $('#left').animate({width:'-='+ oriWidth +'px'},500,function() {
      $(this).hide();
    $('#left_widg button').html('Open');
    });
   } else {
     KillCookie('closeWidgetsRight');
  $('#left').show();
  $('#left').animate({width:'+='+ oriWidth +'px'},500,function() {
  $('#left_widg button').html('Close'); 
});
}
});
if (ReadCookie('closeWidgetsLeft') == 'true') {
  $('#left').css('display','none');
 } else if (ReadCookie('closeWidgetsRight') == 'true') {
  $('#right').css('display','none');
   }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T06:09:48.763

```
function KillCookie(key) {
    var t = new Date();
    t.setDate(t.getDate() - 1);

    document.cookie = [
            encodeURIComponent(key),
            '=',
            encodeURIComponent(String(null)),
            '; expires=' + t.toUTCString(),
            '; path=/'
    ].join('');
}; 
```

请注意为根（整个网站）设置 cookie 的路径参数。您也应该将它包含在 SetCookie 函数中...

```
function SetCookie(key,value,expires) {
    var t = new Date();
    t.setDate(t.getDate() + expires);
    document.cookie = [
            encodeURIComponent(key),
            '=',
            encodeURIComponent(String(value)),
            '; expires=' + t.toUTCString(),
            '; path=/'
    ].join('');
} 
```

KillCookie 变成：

```
function KillCookie(key) {
    SetCookie(key, null, -1);
}; 
```

*有时处理 cookie 很棘手，很多事情都可能导致它无法正常工作，所以我建议你使用类似[这个 JQuery 插件](https://github.com/carhartl/jquery-cookie)的东西，从那里得到这段代码的灵感。*

# php - 不同服务器上的 Ajax 调用

> ID：15871962
> 
> 赞同：0
> 
> 时间：2013-04-08T05:38:08.120
> 
> 标签：php, ajax

我正在`ajax call`使用下面提到的脚本在不同的服务器上发送。

```
$(document).ready(function() {
var uniqcod=$(".piczhu-widget").attr('id'); 

    $.ajax({
        url:'File Path...',
        type:'post',
        data:{uniId:uniqcod},
        success: function(result){
            $('.abcClass').html(result);
            }
        });
    }); 
```

**脚本没有收到任何响应**。该脚本在同一台服务器上运行良好。是否有任何其他参数可用于在不同服务器上发送呼叫？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T05:44:27.230

这应该使用[JSONP](http://en.wikipedia.org/wiki/JSONP)解决问题：

```
$.ajax({
    url:'File Path...',
    type:'post',
    data:{uniId:uniqcod},
    dataType: 'jsonp', // use JSONP
    success: function(result){
        $('.abcClass').html(result);
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T05:52:13.273

这是因为跨域策略。这是一个安全的事情。我建议您将该请求发送到位于您的服务器（您的域）上的带有 cURL 的 PHP 文件。

但是你需要在你的服务器上安装 cURL：http: [//curl.haxx.se/](http://curl.haxx.se/) 如果你使用的是基于 Debian 的服务器，你可以这样做：sudo apt-get install php5-curl

例子：

```
<?php
$data = $_POST['data'];

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "URL FOR REQUEST");
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");                                                                     
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);    
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);                                                                                                                                                                           

$result = curl_exec($ch);

echo $result;

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T05:41:36.563

您需要将 jsonp 或 cors 用于跨域 ajax。下面给出的代码是 cors 的示例

示例代码：

```
jQuery.support.cors = true; 

function CrosDom_ajax(url) {
        if (window.XDomainRequest
        && $.browser.msie
        && $.browser.version < 10) {
        xdr = new XDomainRequest();
        if (xdr) {
            xdr.onload = function () {
               alert(xdr.responseText);

            };
            xdr.open("get", url);
            xdr.send();
        }
        }
        else {
            $.ajax({
                url: url,
                success: function (response) {

                },
                error: function (data) {
                }
            });
         }
    } 
```

您还需要在服务器端编写以下代码，以允许跨域访问

```
Response.AppendHeader("Access-Control-Allow-Origin", "*"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T05:43:18.810

最佳且被接受的方法是使用 JSONP 与不同的服务器进行通信。JSONP 是解决跨域脚本错误的好方法。

阅读以下链接

[JSONP 到底是什么？](https://stackoverflow.com/questions/2067472/what-is-jsonp-all-about)

[带有 jquery 的 jsonp](https://stackoverflow.com/questions/2681466/jsonp-with-jquery)

[JSON 和 JSONP 有什么区别？](https://stackoverflow.com/questions/2887209/what-are-the-differences-between-json-and-jsonp)

[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

# php - 使用 cURL 访问 URL 的问题

> ID：15871972
> 
> 赞同：0
> 
> 时间：2013-04-08T05:38:32.877
> 
> 标签：php, curl

我有这个返回 JSON 的 Web 服务：

```
 http://54.246.99.134:8080/services-app/services/Users/GetConfigForMetroAndLang?metroAreaId=1&langId=39 
```

当我使用浏览器访问它时，我得到了我的 JSON 并且一切正常。当我尝试使用 CURL 或 file_get_contents 抓取它时，页面会一直加载，直到： **未能打开流：连接超时**

当我尝试从服务器（任何其他地址）获取它们时，其他 URL 工作得很好。

** 编辑 ** 感谢您的意见

我的代码非常简单:)

```
$curl = curl_init('http://54.246.99.134:8080/services-app/services/Users/GetConfigForMetroAndLang?metroAreaId=1&langId=39'); 
curl_setopt($curl, CURLOPT_FAILONERROR, true); 
curl_setopt($curl, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows NT 5.1; rv:12.0) Gecko/20100101       Firefox/12.0');
 curl_setopt($curl, CURLOPT_FOLLOWLOCATION, true); 
 curl_setopt($curl, CURLOPT_RETURNTRANSFER, true); 
 curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, false); 
 curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);   
 curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
 $result = curl_exec($curl); 
 print_r($result) ; 
```

我现在明白它可以在我的一个队友的本地主机上运行......所以它可能是服务器/防火墙问题？也许有什么方向？** /编辑 **

真的很感激任何想法。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T05:58:01.293

我检查了你的代码，它对我来说工作正常。

最有可能的问题是您的服务器无法连接到外部资源，这可能是由于防火墙限制。

还`allow_url_fopen`需要在您的 PHP 设置中打开`file_get_contents`才能使用 URL。您可以通过在您的任何页面中打印来检查这一点`phpinfo()`。

也不要`file_get_contents`用于获取内容或数据，因为它在获取远程文件时根本无法正常工作。它也不处理慢速网络连接或重定向，也不返回错误代码。你应该使用`curl`，它也比`file_get_contents`

关于你的问题，我认为这将是一个防火墙问题。请检查您的防火墙设置。

此外，您的代码中存在错误。您正在混合 $ch 和 $curl。它应该是：

```
$curl = curl_init('http://54.246.99.134:8080/services-app/services/Users/GetConfigForMetroAndLang?metroAreaId=1&langId=39'); 
curl_setopt($curl, CURLOPT_FAILONERROR, true); 
curl_setopt($curl , CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows NT 5.1; rv:12.0) Gecko/20100101       Firefox/12.0');
 curl_setopt($curl, CURLOPT_FOLLOWLOCATION, true); 
 curl_setopt($curl, CURLOPT_RETURNTRANSFER, true); 
 curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, false); 
 curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);   
 curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
 $result = curl_exec($curl); 
 print_r($result) ; 
```

您可以使用它`curl_getinfo` 来获取有关特定转移的信息。

# asp.net - ASP.NET Gridview 标签文本

> ID：15871973
> 
> 赞同：0
> 
> 时间：2013-04-08T05:38:48.577
> 
> 标签：asp.net, gridview, label

我有一个位于gridview 内的标签。我需要从 javascript 中获取标签的文本。我有一组说 6 个标签..3 从时间（小时、分钟）和到时间相同，所有下拉列表。假设我已经将值保存为

1.  09-00 至 09-45
2.  09-45 至 10-30
3.  10-30 至 11-15

它们在网格中分别显示为 FromTime 和 ToTime。我的逻辑是用户不应该在这个范围内输入时间。时间下拉菜单在弹出窗口中可用。单击保存按钮后，弹出窗口关闭，选定的值填充到网格中。有人可以建议我一个解决方案吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:45:45.137

正如`label`渲染一样`span`，您需要使用以下javascript

```
document.getElementById('<%= lblScore.ClientID %>').innerHTML = 'Test Value';
document.getElementById('<%= hdnScore.ClientID %>').value = 'Test Value'; 
```

因为它在 gridview 内部，所以您可能喜欢特定的行标签值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T05:47:45.827

标签有ID吗？

您可以使用 JQuery 的纯 JavaScript 来获取它

前任：

```
$('#IdOfLabel').each(function(){
      var text = $(this).text();
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T05:48:10.983

确保 ClientIDMode 属性设置为静态，以便使用您提供的相同 ID 访问它。否则，父控件 ID 将附加到标签 ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T06:07:17.617

试试这个 您需要 RowDataBound 事件，您可以在其中访问由 asp.net 创建的每一行。

**在后面的代码中**

```
protected void gvCustomers_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if ((e.Row.RowType == DataControlRowType.DataRow))
    {
       LinkButton lnk = (LinkButton) e.Row.FindControl("lnk");
       Label lblName= (Label) e.Row.FindControl("lblName");                      
       lnk.Attributes.Add("onclick", "getValue(" + lblName.ClientID + ");"
    }

 } 
```

**在 JavaScript 中**

```
function getValue(lblId)
{
     alert($(lblId).text());
} 
```

**或者试试这个**

只需在具有 ID updateBtn 的更新按钮上添加一个类名，然后尝试此代码

```
<script type="text/javascript">
        $(document).ready(function () {
            $(".updateBtn").click(function (e) {

                var Client = $(this).closest('tr').find("span[id*=lblClientName]").text();
                var Date = $(this).closest('tr').find("span[id*=ltDate]").text();
                alert(Client);
                e.preventDefault();
            });
        });
    </script> 
```

# javascript - 如何从 Backbone.js 的 View 对象中的当前模板中获取所有元素

> ID：15871977
> 
> 赞同：1
> 
> 时间：2013-04-08T05:39:07.290
> 
> 标签：javascript, backbone.js

如何从backbone.js中View对象的当前模板中获取所有输入元素，以便我可以检查输入元素中的值。

```
/*template*/

<script id="emptemplate" type="text/template">
<input id="name" value="{name}"/>
<input id="address" value="{address}"/>
<input id="sex" value="{sed}"/>
<footer>
   <button id="save">save</button>
</footer>
</script>

/*javascript*/

var EmployeeView = Backbone.View.extend({
  ...
  render:function(){
  ....
  },
  events:{
    "click #save": "saveData"
  },
  saveData: function (e) {
        var Data = [];
        $('input').each(function (value, key) {
            /*my problem here:
             cannot able to get the value of input element!
             */
            var v = value;
            var k = key;
        });
    }
  }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T05:49:11.243

将您的渲染功能更新为

```
render: function(){
       var template = _.template( $("#emptemplate").html(), {} );
       this.$el.html( template );
} 
```

然后尝试...它会将模板添加到您的视图的 el 然后您可以绑定并对其执行操作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T18:33:06.027

我想出了解决方案，迭代到当前视图中的所有输入元素以从中获取值。在用户单击保存按钮时的“saveData”事件处理程序中，如下所示：

```
saveData:function(){
var data=[];
this.$el.find('input').each(function(){
$input=$(this);
//build the array of [key, value]
data[$input.attr('id')] = $input.val();
}
}); 
```

# jquery - 如何将表格中的所有td对齐在同一行

> ID：15871979
> 
> 赞同：0
> 
> 时间：2013-04-08T05:39:23.333
> 
> 标签：jquery, kendo-ui, html-table, kendo-treeview

我正在使用剑道 ui 树视图。我正在动态添加树视图节点，并且我正在使用剑道 ui 模板。我已经定义了这样的模板：

```
 <script id="treetemplate" type="text/kendo-ui-template">

              <table id='treeviewtable'>

      # if (item.categoryName == "Textbox") { #  
        <tr>
        <td>
          <label style="color:red">#=item.label#</label>
        </td>
        <td>
      <label>#=item.val#</label>
        </td>
        # } #

          # if (item.categoryName == "Dropdown") { #            

                  <td>
        <label style="color:red">#=item.label#</label>
        </td>
        <td>
        <label>#=item.val#</label>  
         </td>
         # } #

    </table>
    </script> 
```

我已经像这样定义了树视图：

```
 var treeview = $("#treeview").kendoTreeView({
                  template: kendo.template($("#treetemplate").html()),
                  dataSource: homogeneous,
                  dataTextField: ["categoryName"],

              }).data("kendoTreeView");

              kendo.init($("#treeview-left")); 
```

我写了一个 ajax 并像这样动态附加树视图子：

```
 var selectedNode = treeview.select();

   if (selectedNode.length == 0) {
        selectedNode = null;
    }

   treeview.append({
      categoryName: json[i].categoryName, label: json[i].label, val: json[i].val
   }, selectedNode); 
```

它工作正常。我的问题是我想以表格格式添加控件，每个 tr 包含两个控件。就像我想并排显示文本框和下拉菜单一样。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:35:51.630

第一个评论是 HTML`table`中的标签`template`没有正确平衡......但这不会影响结果。

在 KendoUI 中，树节点是 HTML 无序列表 ( `ul`)，因此每个节点的内容都包含在 HTML 列表项 ( `li`) 中。知道了这一点，您可能会明白，使用您的表格，每个节点都是一个不同的表格，因此一个项目不知道前一个/下一个的宽度，并且它们不会保持相同的宽度。

因此，您需要将列表元素的*样式*`float`设置为. 定义以下样式：

如果您知道两列中每一列的宽度，则可以将两种 CSS 样式定义为：

```
#treeview li.k-item {
    float: left;
} 
```

现在，您的模板可能类似于：

```
<script id="treetemplate" type="text/kendo-ui-template">
    # if (item.categoryName == "Textbox") { #
    <div><label class="ob-label" style="color:red">#=item.label#</label></div>
    <div><label class="ob-val">#=item.val#</label></div>
    # } #

    # if (item.categoryName == "Dropdown") { #
    <div><label class="ob-label" style="color:green">#=item.label#</label></div>
    <div><label class="ob-val">#=item.val#</label></div>
    # } #
</script> 
```

您可能会在这里看到一个正在运行的示例：http: [//jsfiddle.net/OnaBai/t6UeG/1/](http://jsfiddle.net/OnaBai/t6UeG/1/)

根据您想要获得的内容，您可以使用[KendoUI 菜单](http://demos.kendoui.com/web/menu/index.html)

# c++ - 使用c ++的RGB到CMY颜色模型

> ID：15871981
> 
> 赞同：1
> 
> 时间：2013-04-08T05:39:47.180
> 
> 标签：c++, image-processing, colors, cmyk

这是我们用来将 RGB 转换为相应 CMY 格式的公式：

```
C = 1 - ( R / 255 )
M = 1 - ( G / 255 )
Y = 1 - ( B / 255 ) 
```

在将这个公式应用于原始图像的 RGB 值之后，我试图显示 CMY 图像，但我得到的结果值介于 0 和 1 之间。我认为这个范围不能用于显示图像。

如何将 CMY 值存储为数组，以便用于显示图像？我是否必须为此缩放 0-1 到 0-255 的范围？

如果我必须缩放，为什么使用这个公式，我可以直接使用：

```
C = 255 - R
M = 255 - G
Y = 255 - B 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T05:46:29.450

```
#include <iostream>

using namespace std;

int main() {
    float C = 1.0f - (R / 255.0f);
    float M = 1.0f - (G / 255.0f);
    float Y = 1.0f - (B / 255.0f);

    float cmyArray[3] = {C, M, Y};
    return 0;
} 
```

此代码将`C`, `M`,`Y`变量存储为`floating points`, 然后为`floating points`要推入的 3 创建一个数组。在这种情况下, 它从值`C`, `M`, 开始并且`Y`已经初始化到数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T05:45:19.153

像这样： http: [//liveworkspace.org/code/2rpyRF](http://liveworkspace.org/code/2rpyRF) $2

如果您需要许多值，那么您可以这样处理第 n 个 cmy 组：`n*3 + x`其中 x 为 0 表示 c，1 表示 m，2 表示 y。

# dns - 我可以设置我的域，使一些子目录/页面指向一台服务器，而其他指向另一台服务器吗？

> ID：15871983
> 
> 赞同：0
> 
> 时间：2013-04-08T05:40:13.147
> 
> 标签：dns, jekyll, github-pages

我的域名是 qrohlf.com。它曾经通过 Dreamhost 托管并在其上安装了 wordpress，以及子目录中的各种自定义实验（即 qrohlf.com/experiment-name/index.html）

这很好，因为我可以拥有我的博客，但也可以轻松地在我的顶级域上进行实验。

此后，我将博客移至托管在 github 页面上的 Jekyll 平台。我已经完成了基本设置，其中包含指向页面服务器 IP 的顶级 A 记录。但是，这会破坏我的实验的任何链接，这些实验仍然托管在 Dreamhost 服务器上。

有什么方法可以让[http://qrohlf.com/experiment-name](http://qrohlf.com/experiment-name)指向我的 Dreamhost IP，但仍然可以提供[http://qrohlf.com](http://qrohlf.com)和[http://qrohlf.com/posts/example-post/](http://qrohlf.com/posts/example-post/)通过 Github 页面？

# objective-c - 无法在 iOS 6 中自动旋转

> ID：15871986
> 
> 赞同：0
> 
> 时间：2013-04-08T05:40:30.170
> 
> 标签：objective-c, cocoa-touch, cocoa, ios6

在我维护的应用程序中，应该在纵向和纵向倒置模式下发生旋转。（所有旋转都在摘要面板中启用。）

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return interfaceOrientation==UIInterfaceOrientationPortrait || interfaceOrientation==UIInterfaceOrientationPortraitUpsideDown;
} 
```

或者

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

无论我尝试了什么，我都无法让我的 iOS 6 旋转

到目前为止我尝试过的事情：

```
-(NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskPortrait; 
}

-(NSInteger)supportedInterfaceOrientations{
NSInteger mask = 0;
if ([self shouldAutorotateToInterfaceOrientation: UIInterfaceOrientationLandscapeRight])
    mask |= UIInterfaceOrientationMaskLandscapeRight;
if ([self shouldAutorotateToInterfaceOrientation: UIInterfaceOrientationLandscapeLeft])
    mask |= UIInterfaceOrientationMaskLandscapeLeft;
if ([self shouldAutorotateToInterfaceOrientation: UIInterfaceOrientationPortrait])
    mask |= UIInterfaceOrientationMaskPortrait;
if ([self shouldAutorotateToInterfaceOrientation: UIInterfaceOrientationPortraitUpsideDown])
    mask |= UIInterfaceOrientationMaskPortraitUpsideDown;
return mask;
} 
```

我试着把它放在我的 appdelegate 中：

```
-(NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
    return UIInterfaceOrientationMaskPortraitUpsideDown;
} 
```

但我收到此错误：由于未捕获的异常“UIApplicationInvalidInterfaceOrientation”而终止应用程序，原因：“支持的方向与应用程序没有共同的方向，并且 shouldAutorotate 正在返回 YES”

试着把它放在我的代表中：

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
    NSUInteger orientations = UIInterfaceOrientationMaskAll;

    if (self.window.rootViewController) {
        UIViewController* presented = [[(UINavigationController *)self.window.rootViewController viewControllers] lastObject];
        orientations = [presented supportedInterfaceOrientations];
    }
    return orientations; 
} 
```

我阅读了所有关于它的讨论以及对 shouldAutorotateToInterfaceOrientation 的弃用，但我仍然无法让它工作。

我快要失去它了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T05:55:02.103

**来自 Apple 的 iOS 6 SDK 发行说明：**

> iOS 6 中的自动旋转正在发生变化。在 iOS 6 中，不推荐使用的`shouldAutorotateToInterfaceOrientation:`方法。`UIViewController`取而代之的是，您应该使用`supportedInterfaceOrientationsForWindow:`and`shouldAutorotate`方法。
> 
> 更多的责任正在转移到应用程序和应用程序委托身上。现在，iOS 容器（例如`UINavigationController`）不会咨询它们的子容器来确定它们是否应该自动旋转。默认情况下，应用程序和视图控制器支持的界面方向设置`UIInterfaceOrientationMaskAll`为 iPad 惯用语和`UIInterfaceOrientationMaskAllButUpsideDown`iPhone 惯用语。
> 
> 视图控制器支持的界面方向会随着时间而改变——甚至应用程序支持的界面方向也会随着时间而改变。每当设备旋转或视图控制器以全屏模式呈现样式呈现时，系统都会向最顶层的全屏视图控制器（通常是根视图控制器）询问其支持的界面方向。此外，仅当此视图控制器`YES`从其`shouldAutorotate`方法返回时才检索支持的方向。系统将视图控制器支持的方向与应用支持的方向（由 Info.plist 文件或应用代理的`application:supportedInterfaceOrientationsForWindow:`方法确定）相交以确定是否旋转。
> 
> 系统通过将应用程序的supportedInterfaceOrientationsForWindow: 方法返回的值与最顶部全屏控制器的supportedInterfaceOrientations 方法返回的值相交来确定是否支持方向。setStatusBarOrientation:animated: 方法并未完全弃用。它现在仅在最顶层全屏视图控制器的 supportedInterfaceOrientations 方法返回 0 时才有效。这使得调用者负责确保状态栏方向一致。
> 
> 为了兼容性，仍然实现该`shouldAutorotateToInterfaceOrientation:`方法的视图控制器不会获得新的自动旋转行为。（换句话说，他们不会回退到使用应用程序、应用程序委托或 Info.plist 文件来确定支持的方向。）相反，该`shouldAutorotateToInterfaceOrientation:`方法用于合成该方法将返回的信息`supportedInterfaceOrientations`。

如果您希望整个应用程序旋转，那么您应该将 Info.plist 设置为支持所有方向。现在，如果您希望特定视图仅是纵向的，则必须执行某种子类并覆盖自动旋转方法以仅返回纵向。看看[How to force a UIViewController to Portraitorientation in iOS 6](https://stackoverflow.com/questions/12520030/how-to-force-a-uiviewcontroller-to-portait-orientation-in-ios-6/12522119#12522119)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T06:05:34.887

我的应用程序以 IOS 5 为目标。我对 IOS 5 设备使用了 shouldAutorotateToInterfaceOrientation 方法（默认情况下）。和类别 UINavigationController 来处理 IOS 6 的方向。

```
#import "UINavigationController+Rotation_IOS6.h"

    @implementation UINavigationController (Rotation_IOS6)

    -(BOOL)shouldAutorotate
    {

            return YES;
    }

    -(NSUInteger)supportedInterfaceOrientations
    {

        return UIInterfaceOrientationMaskAll;
    }

    - (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
    {
        if([self.visibleViewController isMemberOfClass:NSClassFromString(@"SampleViewController")])
        {
            return UIInterfaceOrientationMaskLandscape | UIInterfaceOrientationMaskPortraitUpsideDown | UIInterfaceOrientationMaskPortrait;
        }
        return UIInterfaceOrientationPortrait;

    }

    @end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T09:06:28.283

检查您的目标属性...如下所示

![在此处输入图像描述](https://i.stack.imgur.com/dzmYR.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-13T09:20:36.830

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation{
    return YES;
} 
```

# php - PHP：无法比较两个日期结果

> ID：15871992
> 
> 赞同：0
> 
> 时间：2013-04-08T05:41:23.213
> 
> 标签：php

我正在比较两个日期`From_date`和`To_date`我的数据库表行。

**逻辑是：** 如果用户已经在这两个日期（从文本框收到的日期）之间设置了预算，则返回错误消息`Budget already set for this from-date & to-date`。

我将我的日期转换为 Unix 时间戳更容易。

在尝试此操作之前，我参考了此链接： 1\. [如何检查起始日期和截止日期之间的两个日期](https://stackoverflow.com/questions/15803852/how-to-check-two-dates-between-from-date-and-to-date) 2\. [测试两个整数范围是否重叠的最有效方法是什么？](https://stackoverflow.com/questions/3269434/whats-the-most-efficient-way-to-test-two-integer-ranges-for-overlap?lq=1)

我尝试了以下代码：但我没有得到结果。它总是向我显示错误的信息，**即** `Budget already set for this from-date & to-date`

```
 <?php  if (isset($_POST['submit']))
        {
             include '../../../include/connection.php'; 
             $frmdate= $_POST['frmdate'] ;
             $todate=$_POST['todate'] ; 
             $fromTimestamp = strtotime( $frmdate );
              $toTimestamp = strtotime( $todate ); 

     function  check_function($fromTimestamp,$toTimestamp)//function for checking the two dates which are rrecieved from the database table
           {
             $sid=$_SESSION['id'];
             $result12=mysql_query("SELECT * FROM budget where creater_id = '$sid'"); 
             while($test12 = mysql_fetch_array($result12))
                 {
                   $from_date = strtotime($test12['from_date']);//getting all the FROM-Dates_column
                   $to_date = strtotime($test12['to_date']);//getting all the TO-Dates_column

                    if((($fromTimestamp >= $from_date) && ($fromTimestamp <= $to_date)) || (($toTimestamp >= $from_date) && ($toTimestamp <= $to_date)))
                       {
                         return TRUE;
                         break;
                       }
                    return FALSE;
                  }
            }

           if(check_function($fromTimestamp,$toTimestamp))//Returns TRUE
              {
                  mysql_query("INSERT INTO `budget` (heads_id,amount,from_date,to_date,creater_id,created_date,updater_id,updated_date) VALUES ('$headsid','$amount','$frmdate','$todate',$uid,NOW(),$uid,NOW())");
              }
            else
              {
                 echo 'Budget already set for this from-date & to-date';   //
             }
        }  ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:49:27.247

试试这个。。

```
if(isset($to_date) && isset($from_date)){
    if((($fromTimestamp >= $from_date) && ($fromTimestamp <= $to_date)) || (($toTimestamp >= $from_date) && ($toTimestamp <= $to_date)))
    {
      $val = 'Y'; //return Y in meet this condition
    }
    else{
      $val = 'N'; // return N if meet this condition
    }
}
if($val == 'Y') //Returns TRUE
{
mysql_query("INSERT INTO `budget` (heads_id,amount,from_date,to_date,creater_id,created_date,updater_id,updated_date) VALUES ('$headsid','$amount','$frmdate','$todate',$uid,NOW(),$uid,NOW())");
}
else
{
echo 'Budget already set for this from-date & to-date';   //
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T05:53:51.863

> 您是否尝试与默认 mysql 日期格式 2013/04/11 (Y/m/d) 进行比较？如果您只考虑日期，那么您必须将数据以 Y/m/d 格式存储在 mysql 数据库中，并且您可以与相同的数据进行比较！它效果最好（y）

1) 以 MySQL 日期格式存储：

```
date("Y/m/d", strtotime($Date)); 
```

2) 比较日期

```
<?php  
if (isset($_POST['submit']))
{
    include '../../../include/connection.php'; 
    $frmdate=  date("Y/m/d", strtotime($_POST['frmdate']));
    $todate= date("Y/m/d", strtotime($_POST['todate'])); 
     .. so on
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T06:20:34.820

我刚刚看了你的代码。

您的 while 循环往往只运行一次。返回 FALSE；statement 是 while 循环中的最后一个语句。因此，如果您查询返回多个结果，循环似乎暗示，您将始终只获取一个结果。之后运行您的函数返回 true（当第一个结果与 if 语句匹配时）或在任何其他情况下返回 false。

```
while($test12 = mysql_fetch_array($result12))
{
   $from_date = strtotime($test12['from_date']);//getting all the FROM-Dates_column
   $to_date = strtotime($test12['to_date']);//getting all the TO-Dates_column

   if((($fromTimestamp >= $from_date) && ($fromTimestamp <= $to_date)) || (($toTimestamp >= $from_date) && ($toTimestamp <= $to_date)))
   {
     return TRUE;
     break;
   }
   return FALSE;
} 
```

关于这两个陈述的最后说明

```
return TRUE;
break; 
```

这里不需要break，return已经脱离了while循环。

希望这能解决您的问题！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T06:20:46.757

```
function  check_function($fromTimestamp,$toTimestamp)//function for checking the two dates which are rrecieved from the database table
 {
 $sid=$_SESSION['id'];
$result12=mysql_query("SELECT * FROM budget where creater_id = '$sid' and from_date >= $frmdate and to_date <= $todate")
if(mysql_num_rows($result12) > 0)
{
return true;
}
else
{
return false;
}
}

if(check_function($fromTimestamp,$toTimestamp)==TRUE)//Returns TRUE
              {
                  mysql_query("INSERT INTO `budget` (heads_id,amount,from_date,to_date,creater_id,created_date,updater_id,updated_date) VALUES ('$headsid','$amount','$frmdate','$todate',$uid,NOW(),$uid,NOW())");
              }
            else
              {
                 echo 'Budget already set for this from-date & to-date';   //
             } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-08T06:01:59.123

html表单的格式是什么？$frmdate= $_POST['frmdate'] ; $todate=$_POST['todate'] ;

以及列表中的格式是什么？例如：日期、VARCHAR、TIMESTAMP 等....

# cocos2d-iphone - cocos2d 粒子系统自动移除

> ID：15871993
> 
> 赞同：2
> 
> 时间：2013-04-08T05:41:23.870
> 
> 标签：cocos2d-iphone, particles

据我了解， autoRemoveOnFinish 仅在持续时间具有有限值时才有效。但是如果我在某个时候停止粒子系统，它会在没有粒子离开后移除节点吗？例如

```
CCParticleSun *particleSun = [CCParticleSun node];
particleSun.autoRemoveOnFinish = YES;
[self addChild: particleSun]; 
```

在游戏的某个时刻，我设置了

```
[particleSun stopSystem]; 
```

这会在没有粒子留下后移除节点吗？预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T06:48:36.050

答案是肯定的。方法`-(void) update: (ccTime) dt`见`CCParticleSystem.m`

```
 if( particleCount == 0 && autoRemoveOnFinish_ ) {
                [self unscheduleUpdate];
                [parent_ removeChild:self cleanup:YES];
                return;
            } 
```

尝试在此处设置断点进行检查，将在没有粒子离开后调用。

# highcharts - Highcharts - 多字幕 (2)

> ID：15871994
> 
> 赞同：5
> 
> 时间：2013-04-08T05:41:26.910
> 
> 标签：highcharts

是否可以在 highcharts 图中有多个子标题（我需要 2 个）？仅供参考 - 我在副标题之前也有标题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T07:39:26.173

为什么不在副标题中加入换行符？

```
subtitle: {
    text: 'Line 1 of the subtitle<br>Line 2 of the subtitle' 
}, 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T06:32:49.353

我不确定是否有用于拥有多个字幕的内置功能，但我想使用例如 jQuery 来“手动”将带有第二个字幕的 div 放在图表顶部应该不是很多工作，无论您想要它在哪里。然后，您需要在 CSS 中使用相对或绝对定位，并确保它的 z-index 足够高以使其可见。

在这里您可以阅读有关如何定位 HTML 元素的更多信息：http: [//www.w3schools.com/css/css_positioning.asp](http://www.w3schools.com/css/css_positioning.asp)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-10T21:44:13.750

这个答案有点晚了，但我希望这可以帮助其他人。

我遇到了类似的问题，最后我使用 highcharts 中的 renderer.text 函数在整个地方添加了一堆随机文本。

[http://api.highcharts.com/highcharts#Renderer.text](http://api.highcharts.com/highcharts#Renderer.text)

在这里小提琴：http: [//jsfiddle.net/flacoman91/bvJaQ/](http://jsfiddle.net/flacoman91/bvJaQ/)

移动文本有点乏味，但它会完成工作。

代码在这里

```
$(function () {
$('#container').highcharts({

    xAxis: {
        categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
    },

    series: [{
        data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]
    }]

}, function(chart) { // on complete
 var middle = chart.plotSizeX - 100;
    chart.renderer.text('Series 1', chart.plotSizeX / 2, 150)
        .attr({

        })
        .css({
            color: '#4572A7',
            fontSize: '16px'
        })
        .add();
    chart.renderer.text('Subtitle 2', chart.plotSizeX / 2, 300)
        .attr({

        })
        .css({
            color: '#4572A7',
            fontSize: '16px'
        })
        .add();

});

}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-03T18:41:19.050

你可以用普通的 br-html-tag 换行。您可以根据是否断线来设置标题边距。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-10T11:47:53.587

It looks like a bug so I've reported it here: [https://github.com/highslide-software/highcharts.com/issues/1704](https://github.com/highslide-software/highcharts.com/issues/1704)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-01T17:09:25.870

js

```
const graphSubtitles = `
        <span class="subtitle1">${subtitle1}</span>
        <span class="subtitle2">${subtitle2}</span>
    `;
const config = {
            title: {
                align: 'low',
                text: 'Title',
            },
            subtitle: {
                align: 'low',
                useHTML: true,
                text: graphSubtitles,
                textAlign: 'left',
            },
            ...
};
Highcharts.chart('container', config); 
```

css

```
subtitle1 {
   color: red;
}
subtitle2 {
   color: blue;
} 
```

# jquery - jQuery获取选中复选框的标签

> ID：15871997
> 
> 赞同：5
> 
> 时间：2013-04-08T05:41:36.623
> 
> 标签：jquery, html, checkbox

在我下面的代码中，当我检查“Mexico”时，我不断将“MexicoMexico”作为标签文本返回。对于所有其他字段，我没有得到这个重复的结果，它只适用于这个字段。该问题在第一次分配 countryvalues[i] 后立即发生，我不明白为什么。

```
<div id="country">
....
   <li><input type="checkbox" name="country" value="mexico" class="checkbox">
   <label for="mexico">Mexico</label></input></li>
</div>

countryvalues = $('#country input:checkbox:checked').map(function() {
    return this.value;
}).get(); 
for (var i=0; i<countryvalues.length; i++)
    {
        countryvalues[i] = $("label[for='" + countryvalues[i] + "']").text();
        countryvalues[i] = countryvalues[i].split(' ').join('%20');
        fields = fields + "coveraa!";
        url = url + countryvalues[i] + "!";
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T05:01:07.583

Sarina，我只能建议您尝试在`.map()`回调中获取您寻找的字符串，而不是再次使用`for(...){...}`.

```
var countryvalues = $('#country input:checkbox:checked').map(function() {
    return $(this).next("label").text().split(' ').join('%20');
}).get(); 
```

确保清除 HTML 中的所有实例，`</input>`并且输入元素是自关闭的，`<input ... />`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T05:52:04.857

如果您有多个 `li`. 然后您可以使用此代码获取选中的`checkbox`标签文本。

[JS 文件链接](http://jsfiddle.net/C4GJH/1/)

```
<div id="country">
....
   <li><input type="checkbox" name="country" value="mexico" class="checkbox">
   <label for="mexico">Mexico</label></input>
    </li>
    <li><input type="checkbox" name="country" value="mexico" class="checkbox">
   <label for="mexico">Canada</label></input>
    </li>
</div>

$(document).ready(function(){
    $('#country li input:checkbox').change(
        function() {
            //alert('HI');
            alert($(this).next('label').text());
                   }
    );
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-08T11:22:06.250

检查下面的示例，您将获得如何在 jQuery 中获取复选框标签的脚本

```
<html>
 <body>
     <ul>
         <li>
             <input type="checkbox" name="mouse" value="1" id="mouse"  /><label for="mouse">Mouse</label>
            </li>
            <li>
             <input type="checkbox" name="keyboard" value="1" id="keyboard"  /><label for="mouse">Keyboard</label>
            </li>
            <li>
             <input type="checkbox" name="monitor" value="1" id="monitor"  /><label for="mouse">Monitor</label>
            </li>
        </ul>
    </body>
</html>

<script type="text/javascript">
 var label = jQuery('label[for=' + jQuery(this).attr('id') + ']').html();
 alert(label);
</script> 
```

代码取自这里： [http ://chandreshrana.blogspot.in/2015/09/how-to-get-checkbox-label-text-jquery.html](http://chandreshrana.blogspot.in/2015/09/how-to-get-checkbox-label-text-jquery.html)