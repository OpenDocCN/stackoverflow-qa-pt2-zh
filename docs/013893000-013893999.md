# StackOverflow 问答 13893000-13893999

# javascript - 在对象内引用 DOM

> ID：13893007
> 
> 赞同：0
> 
> 时间：2012-12-15T14:21:26.110
> 
> 标签：javascript, jquery

我有一个表，其中每一行都包含一些数据（`data-id`）和一个`<div class = "upload">Upload</div>`. 上传者需要传递一个对象，该对象包含`uploader_obj.button`set 作为 initiating `<div>`，任何参数，例如要发送到服务器的 data-id ，以及一堆我没有显示的其他内容。

以下脚本循环遍历表，修改对象以设置按钮和 params.id，并在每一行上创建上传器。

虽然在每一行上创建了一个单独的上传按钮，但它们都引用了相同的 params.id，该参数设置为最后一行的值（即 222）。我需要将每个设置为其特定行的值。

解决它的一种方法是让每个上传者都有自己的upload_obj，但这似乎浪费了内存。

相反，我尝试在 uploader_obj 中引用 data-id。我可以在 onSubmit 中这样做，但是，还没有弄清楚如何使用这个值来设置 param.id。我试图通过执行类似的操作将其设置在参数中，`params: {'id':$(this.button).parent().parent().data('id')}`但这是我的文档，而不是上传者。

所以......如果不为每一行制作单独的 uploader_obj，我怎样才能让每一行的上传者将自己的 param.id 发送到服务器？谢谢

PS。对不起，弱标题。我真的试图想出一个更好的，但不能。

```
<table>
    <tr data-id="123"><td>Hello</td><td><div class="upload">Upload</div></td></tr>
    <tr data-id="321"><td>Hello</td><td><div class="upload">Upload</div></td></tr>
    <tr data-id="222"><td>Hello</td><td><div class="upload">Upload</div></td></tr>
</table>

var uploader_obj = {
  button:null,
  params: {'id':null},
  onSubmit: function(id, fileName) {
     var id=$(this.button).parent().parent().data('id')
     console.log(id);
  },
  otherStuff: whatever
};

$('#myTable div.upload').each(function(i,v){
    uploader_obj.button=this;
    uploader_obj.params.id=$(this).parent().parent().data('id');
    new qq.FileUploaderBasic(uploader_obj);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T14:29:45.180

我认为问题在于您永远不会创建“uploader_obj”的新对象。因此，在每次循环迭代中，您都会覆盖对象的值。

编辑：

```
var a = new Object();

$('#myTable div.upload').each(function(i,v){
    a[i] = uploader_obj;
    a[i].button=this;
    a[i].params.id=$(this).parent().parent().data('id');
    new qq.FileUploaderBasic(a[i]); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T14:35:53.980

您在每次迭代中都传递相同的对象，只需从循环内的值创建对象即可：

```
$('#myTable div.upload').each(function(i,ele){
    new qq.FileUploaderBasic({
        button: ele,
        params: {
            id: $(ele).closest('tr').data('id')
        },
        onSubmit: function(id, fileName) {
            var id=$(this).closest('tr').data('id')
        },
        otherStuff: whatever
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T14:36:36.967

与其将上传器对象作为全局变量，不如将其设置为 qq.FileUploaderBasic 函数的局部变量，并将 button_object 和 data_id 作为参数发送，它可能会起作用。你可以试试

```
$('#myTable div.upload').each(function(i,v){
    var button=this;
    var id=$(this).parent().parent().data('id');
    new qq.FileUploaderBasic(button,id);
}); 
```

并将您的对象保留在您的函数中。

# javascript - 在 Form_for 上添加远程：=> true

> ID：13893011
> 
> 赞同：8
> 
> 时间：2012-12-15T14:21:42.597
> 
> 标签：javascript, ruby-on-rails, ruby, ajax

在我的 _form.html.erb 文件中，我有；

```
<%= form_for(@document) do |f| %> 
<% end %> 
```

当我添加

```
<%= form_for(@document), :remote => true do |f| %> 
<% end %> 
```

我得到一个错误。我想在这个表单中添加 ajax 以便用户可以提交它，它会出现一个保存“已保存”的通知，然后用户可以在表单内的 textarea 中继续写入。

错误说：

```
SyntaxError in Documents#edit

Showing /app/views/documents/_form.html.erb where line #1 raised:

<%= form_for(@document), :remote => true do |f| %> 
```

意思是第 1 行（上图）是一个语法错误。

如何将远程 true 添加到 form_for 以便添加 Ajax？

### 更新

所以在这两个答案中，我有；

```
<%= form_for(@document, :remote => true) do |f| %> 
```

和

```
<%= form_for @document, :remote => true do |f| %> 
```

他们都工作，但一个比另一个更好，还是他们最终做同样的事情？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-15T14:25:52.683

您`:remote = true`在参数列表之后插入了右侧。把括号去掉就行了。

```
<%= form_for @document, :remote => true do |f| %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T14:35:27.010

```
<%= form_for(@document, :remote => true) do |f| %>
  ...
<% end %> 
```

冷藏这个：[http ://apidock.com/rails/ActionView/Helpers/FormHelper/form_for](http://apidock.com/rails/ActionView/Helpers/FormHelper/form_for)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-15T10:58:02.477

您还可以使用命名空间

```
<%= form_for [:namespace, @document], html: { help: :block }, remote: true do |f| %>
  ...
<% end %> 
```

# ajax - 自定义 javascript Ajax 调用后刷新 JSF 组件

> ID：13893025
> 
> 赞同：1
> 
> 时间：2012-12-15T14:23:11.450
> 
> 标签：ajax, jsf

我的 jsf 页面中有一个自定义的 javascript Ajax 调用。我在过滤器中捕获并处理 XMLHttpRequest 的查询字符串。过滤器将记录添加到模型中的表中。现在，我希望 jsf 页面在不刷新整个页面的情况下反映其中一个组件（Primefaces 数据表）中的更新模型。

我想我需要的是一个自定义的 xmlHttpResponse ......

谁能告诉我该怎么做？我害怕它可能会很复杂，但我别无选择，只能使用自定义 javascript ......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T22:31:48.260

PrimeFaces[`<p:remoteCommand>`](http://www.primefaces.org/showcase/ui/remoteCommand.jsf)就是为此目的而设计的。

这是您的特定案例的基本启动示例：

```
<h:form>
    <p:remoteCommand name="updateTable" action="#{bean.updateTable}" 
        process="@this" update="table" />
    ...
    <p:dataTable id="table">...</p:dataTable>
</h:form> 
```

它生成一个 JS 函数`updateTable()`，该函数将调用该`#{bean.updateTable}`方法并使用（相对）客户端 ID 更新组件`table`。您只需`updateTable()`在 JavaScript 上下文中调用该函数。

```
updateTable(); 
```

如有必要，您甚至可以传递请求参数，它必须作为 JS 对象发送：

```
updateTable({ name1: "value1", name2: "value2 }); 
```

无需摆弄自制的 ajax 请求并保持 JSF 状态同步。

# java - 设置背景图像时微调器中没有文本

> ID：13893027
> 
> 赞同：0
> 
> 时间：2012-12-15T14:23:16.553
> 
> 标签：java, android, spinner

我的微调器不显示任何文字。它有这样的背景：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
 <item android:state_pressed="true"
       android:drawable="@drawable/spin_bg" />
 <item android:drawable="@drawable/spin_bg" /> 
```

我的 spin_bg.9.png 看起来像这样：

![在此处输入图像描述](../Images/df3fc4f696d6aba418348a6ef3386896.png)

我得到的是这个（没有文字）：

![在此处输入图像描述](../Images/4248373fb8fdb90fb0eaee5caffa2c8d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T14:39:02.947

真的很高兴我能帮助你

根据 OP 的要求回答：您的字体颜色为黑色。

# asp.net-mvc - 甜甜圈孔缓存 - 排除 MiniProfiler.RenderIncludes

> ID：13893028
> 
> 赞同：6
> 
> 时间：2012-12-15T14:23:40.797
> 
> 标签：asp.net-mvc, mvc-mini-profiler, donut-caching

我有一个用属性修饰的 ASP.NET MVC 操作`OutputCache`，但问题是 MiniProfiler 输出也被缓存了。我想从缓存（甜甜圈洞）中排除 MiniProfiler 输出，但我不确定如何排除 MiniProfiler.RenderIncludes() 之类的调用。

任何碰巧知道我该怎么做的人？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-28T13:25:33.513

如果在生产中使用 MiniProfiler，这一点很重要。就好像用户第一次访问页面时启用了 MiniProfiler，所有后续请求都将在 DOM 中包含 MiniProfiler 结果（因为它们现在已被缓存）。不仅结果不正确（因为他们只考虑首次加载），而且所有访问者都将能够看到您的 MiniProfiler 结果。

首先，为了启用甜甜圈洞缓存，我正在使用：

[http://mvcdonutcaching.codeplex.com/](http://mvcdonutcaching.codeplex.com/)

这允许您添加在使用 OutputCache 时不会被缓存的操作。

鉴于上述情况，您可以`@using StackExchange.Profiling;`从布局页面中删除。然后，您可以替换：

```
@MiniProfiler.RenderIncludes() 
```

和：

```
@Html.Action("MiniProfiler", "DoNotCache", excludeFromParentCache: true) 
```

我创建了一个 DoNotCache 控制器，所以我所有的不可缓存元素都在一起，但这不是必需的，您可以将此操作放置在任何控制器中。

```
 public ActionResult MiniProfiler()
 {
      return View();
 } 
```

然后视图本身看起来像：

```
@using StackExchange.Profiling;
@{
    Layout = null;
}
@MiniProfiler.RenderIncludes() 
```

`DonutOutputCache`这将确保 MiniProfiler 结果在适当的时候显示出来，并且即使在您使用注释的地方也不会缓存在生产环境中。

# javascript - execCommand - 包装内容，包括块引用标签中的标签

> ID：13893030
> 
> 赞同：4
> 
> 时间：2012-12-15T14:24:12.057
> 
> 标签：javascript, contenteditable, execcommand

我正在尝试将一些选定的元素包装在`<blockquote>`标签中，但我认为可能有效的方法会替换现有标签而不是包装它们。

这是我的代码。

```
$("input[value='Quote']").on("click", function() {
    document.execCommand('formatBlock', false, '<blockquote>');
}); 
```

和...

```
<div contentEditable>
    <p>para 1</p>
    <p>para 2</p>
</div>

<input type="button" value="Quote" /> 
```

我想结束这样的事情......

```
<div contentEditable>
    <blockquote>
        <p>para 1</p>
        <p>para 2</p>
    </blockquote>
</div> 
```

而不是我目前得到的以下内容......

```
<div contentEditable>
    <blockquote>
        para 1
        <br />
        para 2
    </blockquote>
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:22:58.490

这应该这样做

```
$("input[value='Quote']").on("click", function() {
  $("<blockquote/>").insertBefore($("[contenteditable]").find("p:first")).append($("[contenteditable]").find("p"))
}); 
```

# c++ - Visual Studio 2003 编译器行为

> ID：13893032
> 
> 赞同：0
> 
> 时间：2012-12-15T14:24:45.993
> 
> 标签：c++, c, compiler-construction

我最近接手了一个用 C 和 C++ 编写的项目，该项目将使用 MS Visual Studio 2003 编译器进行编译。由于我在编译器设置和编译器输出方面缺乏经验，我想知道给定的设置是否真的有所作为（根据编译输出或性能）。

该项目混合使用 C 和 C++。主要部分是用 C 编写的，但使用了一些用 C++ 编写的类。所以问题的第一部分是：（MS VS 2003）编译器是否会对每个文件产生影响（仅使用 c 功能为 .cpp 文件编译纯 c 并为使用类的文件编译 c++ 样式）？是否有使用它的理由（性能提升、向后兼容性）？

该项目也不使用 try-catch 块（因为它不是纯 C 语言）。但是编译器设置中的异常处理选项没有被禁用。所以问题的第二部分：如果不使用 try-catch 但不在编译器中禁用它，是否还有性能提升（或任何其他合乎逻辑的原因）？

是的，我对这种设置感到很困惑并试图理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T15:21:35.960

相当难解码，我会试一试。默认行为是当源代码文件扩展名以 .c 结尾时获取 C 编译器，当它以 .cpp 结尾时获取 C++ 编译器。这背后没有更好的方案，或者与向后兼容性或性能改进有关的任何事情，.cpp 文件只需要包含 C++ 代码。两种编译器都使用相同的后端（代码生成器和优化器），因此如果您使用 C++ 编译器编译 C 代码，则不会有太大区别。

/EH 编译选项仅在您在代码中创建 C++ 对象并且编译器可以判断可能引发异常时才起作用。如果代码库主要是基于 C 的，那么它不会有任何区别。/EH 的实际成本非常低，注册一个异常过滤器需要几个 cpu 周期。异常处理使用函数表时没有任何成本，但您的函数表几乎肯定太旧而无法支持（/SAFESEH 或 x64 代码）。

如果您刚刚接管了一个大型项目，那么修改编译器设置应该是一个低优先级。在开始更改可能会破坏代码并使您难以调试问题的选项之前，请先了解代码库。或者换一种说法，避免寻找能让你在很短的时间内取得巨大成就的 Deus Ex Machina。使用分析器将使您获得更大的收益和更好的洞察力。

# java - 从文件加载图像

> ID：13893039
> 
> 赞同：1
> 
> 时间：2012-12-15T14:26:04.303
> 
> 标签：java

我从 c:\book\ 复制了图像文件夹并将其放在 src 文件夹中，但图片没有加载到 Label`p2.add(new JLabel(icon2));`或 Button 上`JButton j2=new JButton(icon2);`。一切都在解决接受图片。我是初学者，我不知道有什么问题！

```
import javax.swing.*;
import javax.swing.ImageIcon;

import javax.swing.border.Border;
import javax.swing.border.LineBorder;
import javax.swing.border.TitledBorder;

import java.awt.*;
public class TestBorderLayout extends JFrame{

private ImageIcon icon = new ImageIcon("image/ca.gif");
private ImageIcon icon2 = new ImageIcon("image.card/1.png");
public TestBorderLayout(){

 Border lineBorder = new LineBorder(Color.BLACK, 2);    

JButton j1=new JButton("Test1");
 j1.setBackground(new Color(200,0,0));
 j1.setForeground(Color.CYAN);

 JButton j2=new JButton(icon2);

 JButton j3=new JButton("Test3");
 j3.setFont(new Font("Serif", Font.BOLD + Font.ITALIC, 12));

JPanel p1=new JPanel();
p1.setBorder(new TitledBorder("One Button"));
p1.add(j1);
p1.add(new TextField("250000000"));
JPanel p2=new JPanel();
p2.add(new JLabel(icon2));

p2.setBorder(new TitledBorder("Two Buttons"));
p2.add(j2);

p2.add(j3);

add(p1, BorderLayout.CENTER);
add(p2, BorderLayout.NORTH);

}

public static void main(String[] args){

    TestBorderLayout frame=new TestBorderLayout();
    frame.setTitle("Border");
    frame.setSize(200,300);
    frame.setLocationRelativeTo(null); // Center the frame
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T14:37:46.187

反而

```
new ImageIcon("image/ca.gif"); 
```

做

```
new ImageIcon(getClass().getResource("/image/ca.gif")); 
```

此 getResource 使用该路径返回资源的 URL（在 jar 打包文件中，或类路径上的文件中）。您可以使用相对路径，相对于类的包。

* * *

评论：

在构造函数结束时，我会这样做：

```
setTitle("Border");
setSize(200,300);
setLocationRelativeTo(null); // Center the frame
setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
pack(); 
```

该包进行布局。但是你的代码没问题。

# c# - 用于生成按年客户代码的自定义 SQL 函数

> ID：13893041
> 
> 赞同：1
> 
> 时间：2012-12-15T14:26:23.273
> 
> 标签：c#, sql-server

**用于生成按年客户端代码的 SQL 函数：** 以下 sql 函数将根据服务器日期生成按年客户端代码。例如对于 2012 客户，代码将是

`CL12-00001`, `CL12-00002`,.... 2013 年的代码将是

`CL13-00001`, `CL13-00002`,....等等。

（此处 CL 表示客户，2012 年为 12，2013 年为 13。）

```
CREATE function [dbo].[GenClientCode]() 
returns nvarchar(20) 
as 
begin 
Declare @Code nvarchar(20), @cyear nvarchar(2);
SET @cyear= ( SUBSTRING(CONVERT(nvarchar(2),DATEPART(year, sysdatetime())),3,2));
SET  @Code= (Select MAX(CONVERT(INT, SUBSTRING(ClientCode,6, LEN(ClientCode))))+1 
             from tblClientInfo WHERE   SUBSTRING(ClientCode,3,2)=@cyear);
            --assume the code format is like CL12-00001, here 12 for year 2012

if (@Code is null or @Code='') 
set @Code='00001'
else if LEN(@Code)=1
set @Code='0000'+ CONVERT(nvarchar(1),@Code);
else if LEN(@Code)=2
set @Code='000'+ CONVERT(nvarchar(2),@Code);
else if LEN(@Code)=3
set @Code='00'+ CONVERT(nvarchar(3),@Code);
else if LEN(@Code)=4
set @Code='0'+ CONVERT(nvarchar(4),@Code);

set @Code='CL'+@cyear+'-'+ CONVERT(nvarchar(10),@Code); 
return @Code;
end 
```

*我的功能是否最佳？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T15:41:43.427

获得`MAX+1`下一个记录不是很准确。更好的解决方案是有一个`auto incremented identity(1,1) column`，*比如说 IdCol*和一个`date column`，*比如说 dateCol*。然后您可以在`SELECT` *as*上形成您的特定代码；

```
SELECT 'CL' + RIGHT(DATEPART(yy,dateCol),2) + '-' + 
                RIGHT('00000' +  CONVERT(VARCHAR(5),idCol),5) 
                --Note:Max clients 99999 
```

*但是，您的功能也可以优化为；*

```
CREATE function [dbo].[GenClientCode]() 
returns varchar(20) 
AS 
BEGIN 

    Declare @code varchar(20), @cyear varchar(2);

    SELECT @cyear = RIGHT(DATEPART(yy,Getdate()),2);

    SELECT @code =  ISNULL( MAX(
                            SUBSTRING(ClientCode, CHARINDEX('-', ClientCode) + 1,
                            LEN(ClientCode))
                          ), 0)+1 
    FROM tblClientInfo 
    WHERE SUBSTRING(ClientCode,3,2) = @cyear

    RETURN 'CL' + @cyear + '-' + RIGHT('00000' + @code, 5)

END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T16:01:04.323

你的想法有几个明显的问题，例如“2100 年会发生什么？” 和“如果一年中有超过 99999 个代码会发生什么？”。还有一些不太明显的问题，例如“如果几乎同时请求两个代码会发生什么？” 以及您正在对子字符串进行查询的事实，这意味着 SQL Server 不能使用索引（这意味着您的性能可能很差）。

“我如何获得两位数的年份？” 和“我如何左填充字符串？” 似乎已经被卡夫回答了。

如果您使用的是 SQL Server 2012，我建议您查看序列。如果您使用的是早期版本，我建议将一个新表放入您的数据库中，其中包含两个整数字段，分别代表年份和该年份的下一个可用数字，然后将标量函数更改为能够查询和使用排他锁更新该表。这将允许您使用索引的小表快速找到下一个数字，而不是对我认为是大表的表进行表扫描。如果您的系统处于压力之下，这也有助于保护您免受可能的重复。

# facebook - 我可以捕获受邀用户吗？

> ID：13893043
> 
> 赞同：0
> 
> 时间：2012-12-15T14:26:35.787
> 
> 标签：facebook, facebook-graph-api

我有一个应用程序，部分功能是要求用户邀请他们的朋友。一旦他们的 10 位朋友加入该应用程序，原始用户就会获得奖励。这可能与facebook API有关吗？这是我当前邀请用户的代码。

```
 <script>
   FB.init({
   appId:'APP_ID',
   cookie:true,
   status:true,
   xfbml:true
   });

   function FacebookInviteFriends()
  {
  FB.ui({
  method: 'apprequests', 
  message: 'Your Message diaolog'
  });
  }
  </script>

  //HTML Code
  <div id="fb-root"></div>
  <a href='#' onclick="FacebookInviteFriends();"> 
   Facebook Invite Friends Link
   </a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:21:37.690

> 我有一个应用程序，部分功能是要求用户邀请他们的朋友。一旦他们的 10 位朋友加入该应用程序，原始用户就会获得奖励。这可能与facebook API有关吗？

您可以`data`在发送请求时使用该参数来输入您喜欢的任何类型的标识符——例如发送者的用户 ID。

然后，一旦受邀用户对他们收到的请求采取行动，您从 API 读取请求对象的详细信息，您将获得该`data`值。

# php - 如果表单字段和php脚本在同一页面上，如何使用http_referer？

> ID：13893044
> 
> 赞同：1
> 
> 时间：2012-12-15T14:26:37.520
> 
> 标签：php

假设我使用的是纯**php**，没有 javascript/jquery 或 ajax。

我在一个网站上有很多页面，比如说 page1、page2、page3 和 page4。前三个页面都有一个链接可以转到第 4 页，用于登录。

在第 4 页我有一个表单字段，上面我有一个**php**脚本来捕获用户输入并将用户名放入会话中，之后我想重定向到用户来自的页面，但页面没有重定向. 让我把代码。

```
<?php 
ob_start();
session_start();

if(isset($_POST['username'])){

$username = $_POST['username'];
$_SESSION['username'] = $username;
if(isset($_SERVER['HTTP_REFERER'])){

$referer = $_SERVER['HTTP_REFERER'];
header('location: '.$referer);

}

}

?>

<form action="page4.php" method="POST">
Username: <input type="text" name="username" /><br/>
<input type="submit" value="Submit" />
</form> 
```

我重新开始所有 page1、page2、page3`ob_start()`和 session_start();

如果我在标题函数中使用特定页面，那么它正在重定向，例如标题（`location: page2.php`）没有问题。我猜原因可能是因为我的表单字段和 php 脚本位于同一页面（page4）那么如何**动态重定向**？用户可能来自第 1 页或第 2 页或第 3 页，登录后我希望他们回到他们来自的特定页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T14:35:47.960

在 page1.php、page2.php、page3.php 中：

```
<?php
session_start();
$_SESSION['page'] = $_SERVER['PHP_SELF']; 
```

在 page4.php 中：

```
<?php
session_start();
// process form
if ($form_proccessed == true) // or whatever
{
    header("Location: {$_SESSION['page']}\r\n");
    exit;
} 
```

如果您将文件保存为具有新名称的新文件，则使用`$_SERVER['PHP_SELF']`您不必担心更新代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-08T11:42:55.627

可以通过表单内的隐藏输入字段来完成：

```
<input type="hidden" name="referer" value="$_SERVER[HTTP_REFERER]"> 
```

# c# - Linq to sql poco 方法指定的强制转换无效

> ID：13893046
> 
> 赞同：0
> 
> 时间：2012-12-15T14:26:55.667
> 
> 标签：c#, linq, linq-to-sql

您好我正在尝试学习 LINQ TO SQL 并尝试使用 POCO 方法映射数据，但我似乎遇到了错误。这是我使用 NORTHWIND 数据库客户表的代码：

```
 //Customers class
    public class Customers
    {
        public int ID { get;set; }
        public string CompanyName { get;set; }
        public string ContactName { get;set; }
    }

       //Customers xxml file
       <?xml version="1.0" encoding="utf-8" ?>
       <Database Name="NORTHWND" xmlns="http://schemas.microsoft.com/linqtosql/mapping/2007">
           <Table Name="dbo.Customers" Member="Customers">
              <Type Name="Customers">
                 <Column Name="CustomerID" Member="ID"/>
                 <Column Name="CompanyName" Member="CompanyName"/>
                 <Column Name="ContactName" Member="ContactName"/>
              </Type>
          </Table>
      </Database>

   //And this is the code I use to linq the data:
   if(!IsPostBack)
   {
        DataContext ctx = new DataContext(ConfigurationManager.ConnectionStrings["customers"].ConnectionString , 
                                                  XmlMappingSource.FromUrl(Server.MapPath("~/Customers.xml")));

        var customers = from c in ctx.GetTable<Customers>()
                                select c;

        GridView1.DataSource = customers;
        GridView1.DataBind();

    } 
```

当我运行代码时，我在 GridView.DataBind() 处收到此错误：

```
 Specified cast is not valid.
   Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 
   Exception Details: System.InvalidCastException: Specified cast is not valid. 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T14:42:13.227

如果我没记错的话，Northwind 中的 CustomerID 列是一个 NVARCHAR ......
所以将您的 Customer 类更改为：

```
public string ID { get;set; } 
```

# delphi - Lazarus Pascal：TFormClass 和 TPersistentClass 的区别

> ID：13893051
> 
> 赞同：0
> 
> 时间：2012-12-15T14:27:27.507
> 
> 标签：delphi, freepascal

我创建了这样的新表单实例：

```
var
  ClassToUse: TFormClass;

begin  
  ClassToUse := TfrmMyForm; //CREATED AT DESIGN TIME
.
.
  NewForm := ClassTouse.Create(NewTab); //NewTab is an instance of a tab
.
end; 
```

上面的代码工作正常。

但现在我想将表单作为字符串发送到创建该表单的过程。因此，我将代码更改为以下内容：

我创建了这样的新表单实例：

```
var
  ClassToUse: TFormClass;

begin  
  ClassToUse := GetClass(pFormName); //pFormName is a string -- ERROR IS HERE!!
.
.
  NewForm := ClassTouse.Create(NewTab);  
.
end; 
```

这给出了以下错误：

```
Error: Incompatible types: got "TPersistentClass" expected "TFormClass" 
```

也许我在错误的页面上......实现这个的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T12:42:01.070

`GetClass`函数`TPersistentClass`返回。您不能将其中一个分配给`TFormClass`. 出于完全相同的原因，您不能将引用分配给`TPersistent`引用`TForm`。

您可以将代码更改为：

```
var
  RegisteredClass: TPersistentClass;
begin  
  RegisteredClass := GetClass(pFormName);
  if RegisteredClass=nil then
    raise ESomeException.Create(...);
  if not RegisteredClass.InheritsFrom(TForm) then
    raise ESomeException.Create(...);
  NewForm := TFormClass(RegisteredClass).Create(NewTab);  
end; 
```

# memory - 为什么启用/禁用 A20 线

> ID：13893056
> 
> 赞同：9
> 
> 时间：2012-12-15T14:28:03.117
> 
> 标签：memory, x86, operating-system, bios, osdev

我有一个关于[A20 登机口](http://wiki.osdev.org/A20_Line)的问题。我读过一篇关于它的文章，说存在解决地址“环绕”问题的机制，当较新的 CPU 使用 32 位地址总线而不是较旧的 20 位总线时出现的问题。

在我看来，处理环绕的正确方法是关闭所有位 A20-A31，而不仅仅是 A20。

为什么只关闭 A20 位就可以解决问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-16T15:04:47.733

最初的问题与[x86 内存分段](http://en.wikipedia.org/wiki/X86_memory_segmentation)有关。

将使用 访问内存`segment:offset`，其中`segment`和`offset`都是 16 位整数。实际地址计算为`segment*16+offset`。在 20 位地址总线上，这自然会被截断为最低 20 位。

当相同的代码在超过 20 位的地址总线上运行时，这种截断可能会出现问题，因为程序可以访问超过第一个兆字节的内存，而不是回绕。虽然本身不​​是问题，但这可能是一个向后兼容性问题。

为了解决这个问题，他们引入了一种强制`A20`地址线为零的方法，从而强制回绕。

你的问题是：“为什么只是`A20`？ - 怎么`A21`样`A31`？”

请注意，可以使用 16 位`segment:offset`方案寻址的最高位置是`0xffff * 16 + 0xffff = 0x10ffef`. 这适合 21 位。因此，线条`A21`-`A31`始终为零，只是`A20`需要控制。

# android - 错误 Android - 收到 HTML 而不是 JSON

> ID：13893058
> 
> 赞同：2
> 
> 时间：2012-12-15T14:28:35.043
> 
> 标签：android, json, http, httpclient

我正在开发一个**Android**应用程序，我正在尝试从服务器获取**JSON响应，该服务器配置为在接收到****GET**消息时返回一个 json 对象（“.../current_user.json”），但答案我get 是**HTML**格式，而不是预期的**JSON格式。**

我不明白为什么会发生这种情况，因为我在浏览器和程序**RESTClient上做了相同的请求，并得到了****JSON**格式的正确答案。

这是我正在使用的代码。

```
 JSONObject json = new JSONObject();

            HttpParams params = new BasicHttpParams();
            HttpConnectionParams.setSoTimeout(params, 10000);
            HttpClient httpClient = new DefaultHttpClient(params);
            HttpGet get = new HttpGet(url_getiduser);

            HttpResponse response = httpClient.execute(get);                 
            String sresponse = "error";

            Log.d("url get", url_getiduser);
            Log.d("pedido get", get.getMethod());
            if(response != null)
            {
                InputStream in = response.getEntity().getContent();
                sresponse = convertStreamToString(in);

                Log.d("resposta http", sresponse);
                if(!sresponse.equals("error"))
                {

                    JSONObject object = new JSONObject(sresponse);
                    id_user = (String) object.get("id");

                    json = object;
                    Log.d("objecto json", object.toString());

                }
                else Log.d("Error on json parser", sresponse); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T16:00:10.800

在少数情况下您会获得**HTML 文本**

1.  你可能调用了一个错误的函数，它给出了一个 404 页面。

2.  可能是服务器端的数据库错误，您将收到**数据库错误**消息

3.  服务器可能正在发送具有**HTML 标记的样式数据**

但是您最好记录响应并将其粘贴到此处。

# c++ - 我想杀死一个 std::thread 使用它的线程对象？

> ID：13893060
> 
> 赞同：29
> 
> 时间：2012-12-15T14:28:40.763
> 
> 标签：c++, multithreading, c++11, std, stdthread

> **可能重复：**
> [C++0x 线程中断](https://stackoverflow.com/questions/2790346/c0x-thread-interruption)

我试图通过使用它的线程对象来杀死/停止一个 c++ std::thread。

我们应该怎么做？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-15T15:14:22.823

@bamboon 的回答很好，但我觉得这值得更强有力的声明。

无论您使用什么语言，您的程序都会获取和释放资源：内存、文件描述符……对于一次性触发的简单程序，泄漏资源无关紧要：当程序结束时，现代操作系统会自动收回资源; 然而，对于长时间运行的程序，基本要求是不泄漏资源，或者至少不重复。

因此，你应该从一开始就被教导，当你获得一个资源时，你必须确保它在某一时刻被释放：

```
void foo(int i) {
    int* array = malloc(sizeof(int) * i);

    /* do something */

    free(array);
} 
```

所以，问自己一个问题：

*   当我杀死程序时会发生什么？
*   当我杀死线程时会发生什么？

好吧，正如我们所说，当一个程序结束时，操作系统会收集资源，所以假设（这是一些假设）你没有在*另一个*系统上获取资源，或者这个系统得到了很好的保护，免受这种滥用，没有伤害，没有犯规。

但是，当你杀死一个线程时，程序仍然运行，因此操作系统不会收集资源。您泄漏了内存，您锁定了一个无法再解锁的写入文件，......**您不应杀死线程**。

高级语言有办法处理这个问题：异常。因为程序无论如何都应该是异常安全的，Java（例如）将通过暂停线程来终止线程，在执行点抛出异常，然后轻轻展开堆栈。然而，在 C++ 中还没有这样的工具。

这是不可能的吗？不，显然不是。实际上，您可以完美地重用相同的想法：

*   封装`std::thread`，`interruptible_thread`类还将包含一个中断标志
*   在启动时将标志的地址传递给`std::thread`它，并将其以线程本地方式存储
*   使用检查点检测您的代码，检查是否设置了中断标志，以及何时抛出异常

那是：

```
// Synopsis
class interrupt_thread_exception;
class interruptible_thread;
void check_for_interrupt();

// Interrupt exception
class interrupt_thread_exception: public virtual std::exception {
public:
    virtual char const* what() const override { return "interrupt"; }
}; // class interrupt_thread_exception

// Interruptible thread
class interruptible_thread {
public:
    friend void check_for_interrupt();

    template <typename Function, typename... Args>
    interruptible_thread(Function&& fun, Args&&... args):
        _thread([](std::atomic_bool& f, Function&& fun, Args&&... args) {
                    _flag_ref = &f; fun(std::forward<Args>(args)...);
                },
                _flag,
                std::forward<Function>(fun),
                std::forward<Args>(args)...)
    {}

    bool stopping() const { return _flag.load(); }

    void stop() { _flag.store(true); }

private:
    static thread_local std::atomic_bool* _flag_ref = nullptr;

    std::atomic_bool _flag = false;
    std::thread _thread;
}; // class interruptible_thread

// Interruption checker
inline void check_for_interrupt() noexcept(false) {
    if (not interruptible_thread::_flag_ref) { return; }
    if (not interruptible_thread::_flag_ref->load()) { return; }

    throw interrupt_thread_exception();
} // check_for_interrupt 
```

现在你可以在你的线程代码中添加适当的中断检查。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-12-15T14:41:55.970

你不能。

`std::threads`不可中断。您可以使用`boost::thread`提供此功能的哪个。

Boost 通过定义“中断点”来实现这一点，如果线程被中断并到达这样的点，线程将在该点上结束。

尽管如此，大多数时候考虑重新设计可能是实现您想要实现的目标的最简洁和最简单的方法。

如果您仍在寻找可中断线程的 C++11 实现，请查看 Anthony Williams（boost 线程的所有者）一书“C++ Concurrency in Action”。他经历了如何实现这样的事情的基本实现。

`std::thread::native_handle`使您可以访问可能支持中断的平台特定的底层线程句柄，但是这种方法使您的代码不可移植并且可能以任何方式都不干净。

# c# - 如何管理在 C#/WPF 中看起来相似的本地化字符串？

> ID：13893063
> 
> 赞同：2
> 
> 时间：2012-12-15T14:28:58.097
> 
> 标签：c#, wpf, string, localization

在我的应用程序（可能还有许多其他应用程序）中，我想使用本地化。但是，我不知道管理几乎相等字符串的最佳方法是什么。

一些问题：

1.  当按钮“编辑”用作菜单名称时，菜单项名称应该创建两个资源字符串（具有相等的值“编辑”）还是只有 1 个？
2.  当屏幕上有一个编辑按钮并且我想使用 Alt 键时，字符串需要是“_Edit”，我应该为此创建一个单独的资源字符串吗？
3.  如果还有一个显示新页面的按钮，因此（对于我的约定），值应该是“_Edit ...”怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T14:37:55.143

是的，您应该制作单独的资源字符串。您正在使用单词编辑来用英语描述您的应用程序中的不同操作。然而，在另一种语言中，这些动作可能用不同的词来描述（一个可能是“编辑”，另一个可能是“改变”）。因此，您需要能够为菜单和按钮分配不同的字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T14:40:48.107

这不是一个快速回答主题（本地化），但我会尝试至少回答您的问题：

1）是的，即使不是强制性的，最好将每个文本分开。如果您要更改其中一个，则不会冒险更改两者（并且可能由于上下文不同，它们必须用不同的语言翻译）。

2) 绝对是的。想象一下你有这些字符串：`_Edit`和`_Mark as read`. 例如，在意大利语中，它们将被翻译为`_Modifica`and `Segna come già letto`。对于两个字符串，您不能为同一个字母添加使用“_”，这是翻译人员应该注意的问题。

3）我建议不。至于 1) 尝试将不同的字符串分开（出于我之前所说的相同原因）。如果您想节省翻译费用（谁不想要？），您可以编写一个程序来预解析字符串以生成“标准化”输出以提供给翻译人员（如果可能，它将删除重复项并合并相似的字符串）。但是你应该让你的程序不知道细节。

To summarize: no, **don't try to merge (similar) strings inside your program**. If you really need it then it'll be done with an external program (it can even take into account strings from different modules so it'll do a better job) and only when applicable (for case 3 it's possible, for case 1 and 2 absolutely not).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-15T14:38:36.733

1）你应该支持**抽象**和**解耦**：你有两个**概念**：一个**类别**“编辑”和一个**动作**“编辑”，所以有两个单独的字符串是有意义的，因为在英语之外的其他语言中“编辑/编辑”不能作为可接受的。

2）这里你只有一个概念，有两种不同的**格式**，所以只有一个字符串和一个转换规则（“_”+ myString）有意义。

3）这取决于：这个按钮触发的动作是否与上面的概念完全相同：如果是则使用相同的字符串，如果不是则使用两个。

所有这些都是一般性考虑，您当然应该根据自己的需要进行调整：

*   如果您确实必须预先支持 n 种语言，请遵循这些指南，它们应该在本地化过程中自然出现

*   如果您预计*在未来的某个地方*您*可能*需要支持除英语之外的另一种语言，并且您现在*有很多*相同的字符串，那么您可能不会花太多时间尝试完美地做事情，因为有很多机会会一劳永逸，可以花时间更好地增强或添加**核心功能**。

# jquery - 在jquery中使用对象变量查找具有特定条件的标签

> ID：13893073
> 
> 赞同：0
> 
> 时间：2012-12-15T14:30:51.027
> 
> 标签：jquery, jquery-selectors

我已将 div 的 html 内容复制到 javascript 中的变量中。现在我想把标题属性的值放到 TD 标签的内容中，无论哪个类作为弹出窗口。所以我创建了以下代码。但它没有帮助..

```
var tmpDiv = document.createElement("div");
tmpDiv.setAttribute("style","display:none");
$(tmpDiv).html($('#'+divid+" .scrollTableContainer").html());

$(tmpDiv+ 'td .popup').each(function(index,value) {
    $(this).html($(this).attr('title'));
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T14:51:22.207

```
$(tmpDiv).find('td.popup').each(function(index,value) {
    $(this).html($(this).attr('title'));
}); 
```

在您的代码中 tempDiv 是 javascript 对象，因此 tempDiv+'td.popup' 是不允许的。其次，如果您需要找到 td 类 popup 删除 td 和 .popup 之间的空间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T14:55:27.020

您正在尝试连接一个 DOM 对象和一个字符串来创建一个选择器。你不能连接一个字符串和一个对象

将 jQuery 用于所有代码会更有意义

```
var tmpDiv=$('<div>').hide().html($('#'+divid+" .scrollTableContainer").html());

tmpDiv.find('td.popup').each(function(index,value) {
    $(this).html($(this).attr('title'));
}); 
```

# c# - 数据表和日期列操作

> ID：13893077
> 
> 赞同：1
> 
> 时间：2012-12-15T14:31:33.917
> 
> 标签：c#, ado.net, datatable, datetime-format

我正在开发一个数据库驱动的 c# 应用程序。

我有一个包含日期列的数据表。将此数据表绑定到 datagridview 并让用户编辑记录，然后单击保存，将这些更改保存在数据库中。

网格中的日期格式根据 和 之间的系统设置`dd/MM/yyyy` 而变化`MM/dd/yyyy`。

数据输入操作员不够聪明，无法看到这种差异，因此在编辑记录时，他们有时会将记录移动到不同的月份。

日期格式是`dd/MM/yyyy 10/10/2010`

他们想将其更改为`12th October`from `10th October`。他们`10/12/2010`假设日期格式为`MM/dd/yyyy`.

这个问题总是存在，所以我想修复数据表中的日期格式。

我可以使用哪些方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T15:07:20.187

使用此代码

```
var style = new DataGridViewCellStyle();
style.Format = "dd-MMM-yy";
colDate.DefaultCellStyle = style; 
```

你不需要来回转换它，它会做你想做的所有事情，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T15:13:47.533

您是否将列数据类型设置为日期时间？我不明白为什么会出现这个问题。在内部，.NET 应该将此单元格值保存为 DateTime，并将其传递给数据库。日期格式不是问题。

# javascript - jquery从textarea中获取随机单词

> ID：13893078
> 
> 赞同：7
> 
> 时间：2012-12-15T14:31:44.667
> 
> 标签：javascript, jquery, random, input, words

我的问题很简单，但我不知道该怎么做。

我有一个带有一些文本的文本区域，我想从文本中获取 5 个随机单词并将它们放在另一个输入字段中（自动）。我不想说具体的话。随机5个字。就是这样。谢谢！

例子：

> "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua。Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate "

包含何时写入此文本的输入字段让我们说：ipsum、amet、veniam、velit、deserunt。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T14:36:30.867

这应该有效：

```
var content = $("#myTextarea").val(),
    words = content.split(" ");

var randWords = [],
    lt = words.length;

for (var i = 0; i < 5; i++)
    randWords.push(words[Math.floor(Math.random() * lt)]);

$("#otherField").val(randWords.join(" ")); 
```

编辑：为防止重复，您可以使用以下内容：

```
var nextWord;
for (var i = 0; i < 5; i++)
{
    nextWord = words[Math.floor(Math.random() * lt)];
    if (("|" + randWords.join("|") + "|").indexOf("|" + nextWord  + "|") != -1)
    {
        i--;
        continue;
    }
    randWords.push(nextWord);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-15T14:50:50.153

这是我对工作流程的建议：

1.  从 textarea 中获取单词
2.  删除重复项
3.  迭代数组获取单词并将其从数组中删除（避免重复）

示例代码：

```
var text = "Lorem ipsum ......";
var words = $.unique(text.match(/\w+/mg));
var random = [];

for(var i=0; i<5; i++) {
    var rn = Math.floor(Math.random() * words.length);
    random.push( words[rn]);
    words.splice(rn, 1);
}

alert( random ): 
```

[jsFiddle](http://jsfiddle.net/zfpxU/)中的工作示例

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T15:15:41.813

更短：

```
var str = 'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt.';

function rWords( t ) {
    for ( var i = 5, s = t.match( /(\d|\w|')+/g ), r = [] ; i-- ; r.push( s[ Math.random() * s.length | 0 ] ) );
    return r.join( ', ' ).toLowerCase();
}

console.log( rWords( str ) );
> lorem, eiusmod, elit, dolor, do 
```

# wordpress - Wordpress 实时验证表单插件

> ID：13893079
> 
> 赞同：0
> 
> 时间：2012-12-15T14:31:47.930
> 
> 标签：wordpress

我想要一个用于 wordpress 的实时验证表单插件。在一个页面中，我有名字、姓氏、公司名称、手机号码的字段。我想在不点击提交按钮的情况下验证所有这些。那么有没有可用的 wopress 插件？任何帮助都将是可观的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T08:35:20.430

将[jquery.validate](http://docs.jquery.com/Plugins/Validation)添加到插件或主题中，您可以编写简单的验证脚本来满足您的需求。我不知道是否有一个插件包装了它。

或者，购买并安装[Gravity Forms](http://www.gravityforms.com/)，它会做类似的事情，并且是构建表单的好方法。

# mysql - 使用here-document时的bash脚本变量分配

> ID：13893083
> 
> 赞同：2
> 
> 时间：2012-12-15T14:32:19.707
> 
> 标签：mysql, linux, bash, eof

我是 bash /mysql 的新手，但是我在阅读抛出的示例和其他人的问题时找到了很多帮助……但是遇到了我自己的问题。每次将文件添加到特定目录时，我都尝试在 MySQL 数据库表中插入一行（为此我正在使用 inotifywait ）无论如何这是我的 bash 脚本

```
#!/bin/bash

while true; do
        filename= "false"
        filename= inotifywait --format "%f" -e create /var/www/media2net/torrent
        date_field= date +"%F":"%T"
        mysql --host=localhost --user=root --password=admin Media2net << EOF
        insert into video (title, description, url_video, upload_date)
                values('testing','default_description','$filename', '$date_feild');
        EOF
        echo $filename
done 
```

由此我已经用 echo 验证了变量`$filename`是否正确保存在 bash 脚本的末尾，但是当我查看表中的条目时， url_video 列具有它的默认值，而不是由`$filename`

从我可以得出的结论来看，变量`$filename` 没有通过 EOF 我已经尝试过，如这里所示[http://www.dba-oracle.com/t_access_mysql_with_bash_shell_script.htm](http://www.dba-oracle.com/t_access_mysql_with_bash_shell_script.htm)

还有这个

[使用 shell 脚本将数据插入远程 MYSQL 数据库](https://stackoverflow.com/questions/3900496/using-shell-script-to-insert-data-into-remote-mysql-database)

非常感谢我在哪里可以找到如何将变量传递给查询的任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T14:47:03.747

在您的示例中，`filename`设置为空字符串（注意`=`符号后的空格！）。你需要

```
filename=$(inotifywait --format "%f" -e create /var/www/media2net/torrent) 
```

相似地，

```
date_field=$(date +"%F:%T") 
```

请注意，您的`mysql`命令（`date_field`和注释`date_feild`）中有错字：

```
mysql --host=localhost --user=root --password=admin Media2net <<EOF
insert into video (title, description, url_video, upload_date)
values('testing','default_description','$filename', '$date_field');
EOF 
```

现在我希望你控制文件名。想象一个包含单引号的文件名，例如`hello'howdy`. 您的查询会出现问题。更糟糕的是，一个放置名为 的文件的邪恶用户`whatever','something'); evil_mysql_command; whatever`，您将执行邪恶命令！一种可能性是使用以下方法清理文件名`printf`：

```
printf -v filename '%q' "$(inotifywait --format "%f" -e create /var/www/media2net/torrent)" 
```

这至少会转义可能出现在文件名中的单引号。请参阅 Gordon Davisson 的评论：该`printf`技巧不会阻止所有可能的攻击，所以我真的希望您绝对控制文件的名称！

所有这些建议都会产生以下脚本：

```
#!/bin/bash

while true; do
    printf -v filename '%q' "$(inotifywait --format "%f" -e create /var/www/media2net/torrent)"
    date_field=$(date +"%F:%T")
    mysql --host=localhost --user=root --password=admin Media2net <<EOF
    insert into video (title, description, url_video, upload_date) 
    values('testing','default_description','$filename', '$date_field');
    EOF
    echo "$filename"
done 
```

# 编辑。

要在评论中回答您的问题：

> 为什么脚本正确回显`$filename`到我的终端但没有正确发送到 MySQL，这与以空格开头的字符串有关吗？还是其他完全？

那是因为当您执行以下操作时：

```
whatever= command 
```

然后将变量`whatever`设置为空字符串，并`command`执行命令（将`whatever`变量设置为环境变量）。例如，

```
$ IFS='c' read a b c <<< "AcBcC"
$ echo "$a $b $c"
A B C
$ echo $IFS

$ 
```

在您的脚本中，变量文件名实际上从未全局设置。您可以通过以下方式进行检查：

```
$ filename= "false"
$ echo "$filename"

$ 
```

发生的情况是环境变量`filename`设置为空字符串，然后`false`使用该环境变量启动命令（恰好存在），我们就完成了。

当你这样做时：

```
filename= inotifywait --format "%f" -e create /var/www/media2net/torrent 
```

该变量`filename`设置为空字符串，然后将命令作为环境变量执行（但`inotifywait ...`并不真正关心它）。*这就是你在终端上看到的！*这是这个命令的输出。然后你可能会看到一个空行，那是`filename``inotifywait`

 *```
echo $filename 
```

这相当于

```
echo 
```

因为变量`filename`扩展为空字符串。

希望这可以帮助。*

# mysql - 数据库架构建议

> ID：13893084
> 
> 赞同：0
> 
> 时间：2012-12-15T14:32:21.607
> 
> 标签：mysql, map, schema, database-schema

我正在为一个组织创建一个会员目录，并试图找出一种很好的方法来保持每个人的详细信息井井有条且可更新。我有 3 张桌子：

人员表处理实际人员

```
CREATE TABLE `person` (
    `personid` BIGINT PRIMARY KEY AUTO_INCREMENT,
    `personuuid` CHAR(32) NOT NULL,
    `first_name` VARCHAR(50) DEFAULT '',
    `middle_name` VARCHAR(50) DEFAULT '',
    `last_name` VARCHAR(50) DEFAULT '',
    `prefix` VARCHAR(32) DEFAULT '',
    `suffix` VARCHAR(32) DEFAULT '',
    `nickname` VARCHAR(50) DEFAULT '',
    `username` VARCHAR(32) ,
    `created_on` DATETIME NOT NULL DEFAULT '0000-00-00 00:00:00',
    `created_by` CHAR(33) DEFAULT '000000000000000000000000000000000',
    `last_updated` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    `last_updated_by` CHAR(33) DEFAULT '000000000000000000000000000000000'
) ENGINE=InnoDB, COMMENT='people'; 
```

关于一个人的信息。例如学校、电话号码、电子邮件、推特名称等。所有这些值都将作为 json 存储在“值”中，我的程序将处理所有内容。在用户每次更新时，都会创建一个新条目以显示更改的转换。

```
CREATE TABLE `person_info` (
    `person_infoid` BIGINT PRIMARY KEY AUTO_INCREMENT,
    `person_infouuid` CHAR(32) NOT NULL,
    `person_info_type` INT(4) NOT NULL DEFAULT 9999,
    `value` TEXT,
    `created_on` DATETIME NOT NULL DEFAULT '0000-00-00 00:00:00',
    `created_by` CHAR(33) DEFAULT '000000000000000000000000000000000',
    `last_updated` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    `last_updated_by` CHAR(33) DEFAULT '000000000000000000000000000000000'
) ENGINE=InnoDB, COMMENT="Personal Details"; 
```

person 和 person_info 表之间的映射

```
CREATE TABLE `person_info_map` (
    `personuuid` CHAR(32),
    `person_infouuid` CHAR(32) ,
    `created_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    `created_by` CHAR(33) DEFAULT '000000000000000000000000000000000',
    `is_active` INTEGER(1)
) ENGINE=InnoDB, COMMENT="Map between person and person info"; 
```

因此，鉴于`person_info`每次有更新时我都会创建一个新条目，我想知道我是否应该担心 i/o 错误、表变大等。如果是这样，有什么可能的解决方案？我从来没有真正使用过这样的数据库模式，所以我认为我应该寻求帮助，而不是在未来被搞砸。

我相信有些人可能会问更新可能多久发生一次。说实话，我并没有期待太多。我们的目录中目前有 2k 个成员，我不希望我们在任何时候都有超过 10k 个活跃成员。我还认为我们最多会有 50 种不同的期权类型，但出于安全和未来的目的，我允许多达 1000 种不同的期权类型。

考虑到这一小块，有人对我应该如何从这里开始有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T14:59:05.873

1.  person 与 person_info 的关系似乎应该建模为一对多的关系（即一个人记录有许多 person_info 记录）。如果这是真的，那么 person_info_map 可以被删除，因为它没有任何用处。

2.  不要使用 UUID 字段来建立表之间的关系。使用主键并在其上创建外键约束。这将强制数据完整性并提高查询时连接的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T14:59:18.620

我个人会在当前时刻将 2 个表合并为该人的视图，并在另一个表中写入更改（如事件存储）。

这样可以避免您每次需要取人时都加入 2 张桌子。

但这是从应用程序的角度来看的。我已经听到 DBA 在我耳边大喊：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T01:18:25.167

所以没有人真正回答这个问题，所以我会发布我最终做了什么。我不知道它是否会起作用，因为我们的系统不活跃，但我认为它应该起作用。

我继续并保留了我们上面的系统。我希望我们永远不会碰到太多行，这将成为一个问题，但如果我们这样做了，那么我计划归档一大块“旧”数据。我认为这会有所帮助，但我认为机器可能会影响我们的使用速度。

# c++ - posix_spawnp 和管道子输出到字符串

> ID：13893085
> 
> 赞同：15
> 
> 时间：2012-12-15T14:32:30.310
> 
> 标签：c++, c, posix, ipc

我正在努力创建进程并将子进程的输出传递到父进程的字符串中。我让它在 Windows 上工作（使用 CreatePipe 和 CreateProcess 和 ReadFile），但似乎无法在 Unix 上得到确切的模拟工作。这是我的代码：

```
#include <spawn.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>
#include <sys/wait.h>
#include <iostream>
#include <string>
#include <vector>
using namespace std;

int main()
{
  int exit_code;
  int cout_pipe[2];
  int cerr_pipe[2];
  posix_spawn_file_actions_t action;

  if(pipe(cout_pipe) || pipe(cerr_pipe))
    cout << "pipe returned an error.\n";

  posix_spawn_file_actions_init(&action);
  posix_spawn_file_actions_addclose(&action, cout_pipe[0]);
  posix_spawn_file_actions_addclose(&action, cerr_pipe[0]);
  posix_spawn_file_actions_adddup2(&action, cout_pipe[1], 1);
  posix_spawn_file_actions_adddup2(&action, cerr_pipe[1], 2);

  posix_spawn_file_actions_addclose(&action, cout_pipe[1]);
  posix_spawn_file_actions_addclose(&action, cerr_pipe[1]);

  vector<string> argmem = {"bla"};
  vector<char*> args = {&argmem[0][0], nullptr}; // I don't want to call new.

  pid_t pid;
  if(posix_spawnp(&pid, "echo", &action, NULL, &args[0], NULL) != 0)
    cout << "posix_spawnp failed with error: " << strerror(errno) << "\n";
  //close(cout_pipe[0]);
  //close(cerr_pipe[0]);

  close(cout_pipe[1]);
  close(cerr_pipe[1]);

  waitpid(pid,&exit_code,0);
  cout << "exit code: " << exit_code << "\n";

  // Read from pipes
  const size_t buffer_size = 1024;
  string buffer;
  buffer.resize(buffer_size);
  ssize_t bytes_read = read(cout_pipe[0], &buffer[0], buffer_size);
  while ((bytes_read = read(cout_pipe[0], &buffer[0], buffer_size)) > 0)
  {
    cout << "read " << bytes_read << " bytes from stdout.\n";
    cout << buffer.substr(0, static_cast<size_t>(bytes_read)+1) << "\n";
    bytes_read = read(cout_pipe[0], &buffer[0], buffer_size);
  }
  if(bytes_read == -1)
    cout << "Failure reading from stdout pipe.\n";
  while ((bytes_read = read(cerr_pipe[0], &buffer[0], buffer_size)) > 0)
  {
    cout << "read " << bytes_read << " bytes from stderr.\n";
    cout << buffer.substr(0, static_cast<size_t>(bytes_read)+1) << "\n";
    bytes_read = read(cout_pipe[0], &buffer[0], buffer_size);
  }
  if(bytes_read == -1)
    cout << "Failure reading from stderr pipe.\n";

  posix_spawn_file_actions_destroy(&action);
} 
```

输出是：

> 退出代码：0

所以我想除了实际的管道之外一切都在工作。这里有什么问题？我还想知道是否有办法在 waitpid 循环中读取管道字节，但是当我尝试这样做时，父进程会无限挂起。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-12-06T05:27:46.563

`posix_spawn`有趣且有用，这使得这个问题值得死灵 - 即使它不再与 OP 相关。

发布的代码中有一些重大错误。我怀疑其中一些是在绝望中进行黑客攻击的结果，但我不知道哪个是原始错误：

1.  该`args`数组不包括`argv[0]`代表可执行文件名称的 。这导致`echo`程序永远不会看到预期的`argv[1]`（“bla”）。
2.  该`read()`函数以一种没有意义的方式从不同的地方调用。执行此操作的正确方法是仅将调用`read`作为`while`循环的控制表达式的一部分。
3.  `waitpid()`在从管道读取之前调用。这会阻止 I/O 完成（至少在不平凡的情况下）。
4.  这段代码的一个更微妙的问题是，`stdout`在从`stderr`. 原则上，这可能会导致孩子在尝试写入时阻塞`stderr`，从而阻止程序完成。为此创建一个有效的解决方案更加复杂，因为它要求您可以从具有可用数据的任何管道中读取。我用[`poll()`](https://stackoverflow.com/questions/970979/what-are-the-differences-between-poll-and-select)这个。另一种方法是使用多个线程。

此外，我使用`sh`（命令外壳，即`bash`）作为子进程。这提供了很大的额外灵活性，例如运行管道而不是单个可执行文件。但是，特别是，使用`sh`提供了不必管理命令行解析的简单便利。

```
/*BINFMTCXX: -std=c++11 -Wall -Werror
*/

#include <spawn.h> // see manpages-posix-dev
#include <poll.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>
#include <sys/wait.h>
#include <iostream>
#include <string>
#include <vector>
using namespace std;

int main()
{
  int exit_code;
  int cout_pipe[2];
  int cerr_pipe[2];
  posix_spawn_file_actions_t action;

  if(pipe(cout_pipe) || pipe(cerr_pipe))
    cout << "pipe returned an error.\n";

  posix_spawn_file_actions_init(&action);
  posix_spawn_file_actions_addclose(&action, cout_pipe[0]);
  posix_spawn_file_actions_addclose(&action, cerr_pipe[0]);
  posix_spawn_file_actions_adddup2(&action, cout_pipe[1], 1);
  posix_spawn_file_actions_adddup2(&action, cerr_pipe[1], 2);

  posix_spawn_file_actions_addclose(&action, cout_pipe[1]);
  posix_spawn_file_actions_addclose(&action, cerr_pipe[1]);

//string command = "echo bla"; // example #1
  string command = "pgmcrater -width 64 -height 9 |pgmtopbm |pnmtoplainpnm";
  string argsmem[] = {"sh","-c"}; // allows non-const access to literals
  char * args[] = {&argsmem[0][0],&argsmem[1][0],&command[0],nullptr};

  pid_t pid;
  if(posix_spawnp(&pid, args[0], &action, NULL, &args[0], NULL) != 0)
    cout << "posix_spawnp failed with error: " << strerror(errno) << "\n";

  close(cout_pipe[1]), close(cerr_pipe[1]); // close child-side of pipes

  // Read from pipes
  string buffer(1024,' ');
  std::vector<pollfd> plist = { {cout_pipe[0],POLLIN}, {cerr_pipe[0],POLLIN} };
  for ( int rval; (rval=poll(&plist[0],plist.size(),/*timeout*/-1))>0; ) {
    if ( plist[0].revents&POLLIN) {
      int bytes_read = read(cout_pipe[0], &buffer[0], buffer.length());
      cout << "read " << bytes_read << " bytes from stdout.\n";
      cout << buffer.substr(0, static_cast<size_t>(bytes_read)) << "\n";
    }
    else if ( plist[1].revents&POLLIN ) {
      int bytes_read = read(cerr_pipe[0], &buffer[0], buffer.length());
      cout << "read " << bytes_read << " bytes from stderr.\n";
      cout << buffer.substr(0, static_cast<size_t>(bytes_read)) << "\n";
    }
    else break; // nothing left to read
  }

  waitpid(pid,&exit_code,0);
  cout << "exit code: " << exit_code << "\n";

  posix_spawn_file_actions_destroy(&action);
} 
```

# java - Java套接字，获取图像文件但未打开

> ID：13893087
> 
> 赞同：0
> 
> 时间：2012-12-15T14:33:16.043
> 
> 标签：java, sockets

这是我的第一个问题，所以我希望我写得正确。

我正在尝试通过 Java 套接字发送一个 byte[] 数组，该数组包含一个图像。

这是发送文件的代码：

```
public void WriteBytes(FileInputStream dis) throws IOException{
    //bufferEscritura.writeInt(dis.available()); --- readInt() doesnt work correctly
    Write(String.valueOf((int)dis.available()) + "\r\n");
    byte[] buffer = new byte[1024];
    int bytes = 0;
    while((bytes = dis.read(buffer)) != -1){
        Write(buffer, bytes);
    }
    System.out.println("Photo send!");
}
 public void Write(byte[] buffer, int bytes) throws IOException {
    bufferEscritura.write(buffer, 0, bytes);
}
public void Write(String contenido) throws IOException {
    bufferEscritura.writeBytes(contenido);
} 
```

我的形象：

```
URL url = this.getClass().getResource("fuegos_artificiales.png");
FileInputStream dis = new FileInputStream(url.getPath());
sockManager.WriteBytes(dis); 
```

我获取图像文件的代码：

```
public byte[] ReadBytes() throws IOException{
DataInputStream dis = new DataInputStream(mySocket.getInputStream());
int size = Integer.parseInt(Read());
System.out.println("Recived size: "+ size);
byte[] buffer = new byte[size];
System.out.println("We are going to read!");
dis.readFully(buffer);
System.out.println("Photo received!");
return buffer; 
```

}

```
public String Leer() throws IOException {
    return (bufferLectura.readLine());
} 
```

并创建一个图像文件：

```
byte[] array = tcpCliente.getSocket().LeerBytes();
FileOutputStream fos = new FileOutputStream("porfavor.png");
try {
    fos.write(array);
}
finally {
    fos.close();
} 
```

图像文件已创建，但是当我尝试使用 Paint 打开它时，它说它无法打开它，因为它已损坏......我还尝试使用记事本打开两个图像（原始图像和新图像）和他们里面有相同的数据！

我不知道发生了什么...

我希望你能帮助我。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T00:42:55.707

1.  不要使用 available() 作为文件长度的度量。它不是。Javadoc 中有一个关于此的特定警告。

2.  使用 DataOutputStream.writeInt() 写入长度，使用 DataInputStream.readInt() 读取长度，并使用相同的流读取图像数据。不要在同一个套接字上使用多个流。

同样在这：

```
URL url = this.getClass().getResource("fuegos_artificiales.png");
FileInputStream dis = new FileInputStream(url.getPath()); 
```

第二行应该是：

```
InputStream in = URL.openConnection.getInputStream(); 
```

类资源不是文件。

# android-ndk - 缓存 JNI 对象和线程安全（在 Android 中）

> ID：13893089
> 
> 赞同：8
> 
> 时间：2012-12-15T14:33:53.923
> 
> 标签：android-ndk, thread-safety, java-native-interface, jnienv

我正在使用本机线程（pthreads）编写一个 C++ 应用程序，我需要调用一些 Java 方法等。我不确定哪些 JNI 对象可以安全缓存，即存储在我的 C++ 对象中以供以后使用，可能/可能由不同的线程。我知道如果我的类的方法可以被不同的线程调用，我不能缓存 JNIEnv，而是缓存 JavaVM 并通过附加当前线程来获取 JNIEnv。但这是否也意味着我不能缓存从 JNIEnv 获得的任何东西？我需要使用通过以下 JNIEnv 方法获得的对象：

FindClass、GetMethodID、NewObject、NewGlobalRef

这些是否在线程中保持有效，或者我每次都必须获得新的？如果是后者，有没有办法在一个本机线程中创建一个对象并能够在不同的线程中访问同一个对象？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-10-29T11:34:44.683

JNI 方法如`FindClass`, `GetMethodID`,`GetFieldID`是昂贵的操作，保证在 JVM 的生命周期内生成相同的结果。由于这些操作非常耗时，因此明智的做法是将结果存储在某个地方以便稍后在本机端重用（这就是*缓存*）。

JNI 缓存仅考虑这些 JNI 函数调用。如果您想缓存任何其他 C++ 或 Java 对象，这是一个不同的主题。（只是为了清楚）。

缓存的类、方法和字段不依赖于从中检索它们的线程，因此它们在不同的线程中有效。`Set<type>Field`在使用or获取或设置某些对象的字段时，您最多必须执行线程安全操作`Get<type>Field`。

由于 FindClass 返回对*类*对象的局部引用，因此您必须将其转换为全局引用以保证在检索它的函数结束后重用它。您可以通过使用 NewGlobalReference 来实现这一点：

```
jclass tmp_double_Class = env->FindClass( "java/lang/Double" ); // Check for exceptions!
double_Class = static_cast<jclass>( env->NewGlobalRef( tmp_double_Class ) );
if( double_Class == NULL )
  return;
env->DeleteLocalRef( tmp_double_Class ); 
```

这里有一个关于所有 JNI 缓存主题的示例：

MyJni.cpp：

```
// Just a shortcut for checking for exceptions
#define CHECK_JNI_EXCEPTION( JNIenv ) \
  if( JNIenv->ExceptionCheck() )\
  {\
    JNIenv->ExceptionClear();\
    return JNI_FALSE;\
  }\
\

// Global variables
jclass    point_Class;
jmethodID point_ctor_Method;
jfieldID  point_x_Field;
jfieldID  point_y_Field;

JNIEXPORT jboolean JNICALL Java_com_company_package_MyClass_nativeInit( JNIEnv * env,
                                                                        jclass   clazz )
{
  // Cache java.lang.Double class, methods and fields
  jclass tmp_point_Class = env->FindClass( "android/graphics/Point" );
  CHECK_JNI_EXCEPTION( env )
  point_Class = static_cast<jclass>( env->NewGlobalRef( tmp_point_Class ) );
  if( point_Class == NULL )
    return JNI_FALSE;
  env->DeleteLocalRef( tmp_point_Class );
  point_ctor_Method = env->GetMethodID( point_Class, "<init>", "(II)V" );
  CHECK_JNI_EXCEPTION( env )
  point_x_Field = env->GetFieldID( point_Class, "x", "I" );
  CHECK_JNI_EXCEPTION( env )
  point_y_Field = env->GetFieldID( point_Class, "y", "I" );
  CHECK_JNI_EXCEPTION( env )
  return JNI_TRUE;
} 
```

MyJni.java：

```
package com.company.package;

class MyClass {
  // ... All java code here ... 

  // Trigger JNI Caching (could be also done using JNI_OnLoad...)
  private static native void nativeInit();

  static {
    System.loadLibrary( "mylib" );
    nativeInit(); // should check the result
  }
} 
```

玩得开心 ;）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T01:09:59.383

对象不是特定于线程的。它们最初是“本地”引用，如果您想保留副本，则必须通过创建（并最终删除）“全局”引用来告诉 VM 您正在这样做。

请参阅[http://developer.android.com/training/articles/perf-jni.html](http://developer.android.com/training/articles/perf-jni.html)，尤其是“本地和全球参考”部分。

# mvvm - MVVM：在 Windows 8 中使用键盘处理列表项导航

> ID：13893091
> 
> 赞同：1
> 
> 时间：2012-12-15T14:33:55.577
> 
> 标签：mvvm, windows-8, keyboard, navigation, mvvm-light

我对 Windows 8 开发完全陌生，现在我遇到了使用 MVVM Light 混合触摸和键盘导航的问题。

因此，我在网格视图中有一个视图模型列表，只要选择其中一个，就会激活到所选视图模型的导航。这对触摸或鼠标完全有效，但使用键盘可能会变得非常混乱。实际上，自然的行为是使用箭头导航列表并在我想显示项目时按 Enter 键，但在这里，只需使用箭头键更改项目就会激活导航，这确实让用户感到困惑。

那么我该怎么做才能通过触摸和鼠标以及选择和键盘输入键的组合来激活导航呢？

这是我使用的代码。

视图模型：

```
public ReleaseViewModel SelectedRelease
{
    get
    {
        return selectedRelease;
    }
    set
    {
        if(selectRelease != value)
        {
            selectedRelease = value;
        }

        // Navigation code here
    }
} 
```

看法：

```
<GridView
    ItemsSource="{Binding Releases}"
    ItemTemplate="{StaticResource ReleaseTemplate}"
    ItemContainerStyle="{StaticResource GridViewItemStyle}"
    Grid.ColumnSpan="2"
    Grid.Row="2"
    Padding="116,0,40,46"
    SelectedItem="{Binding SelectedRelease, Mode=TwoWay}"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:07:19.043

我最终找到的最好方法是使用一些代码。但是我没有直接从 UI 导航，而是在视图模型中保留了导航逻辑。

所以我简单地连接了来自 GridView 的 ItemClick 事件，并在事件处理程序中将 Page 数据上下文转换为我的视图模型，然后我简单地从视图模型执行命令。这不容易维护，但它确实保留了 MVVM 的关注点分离。

```
private void GridView_ItemClick(object sender, ItemClickEventArgs e)
{
    MyViewModel vm = (MyViewModel)this.DataContext;

    if(vm.NavigateToSelectionCommand.CanExecute(null))
    {
        vm.NavigateToSelectionCommand.Execute(e.ClickedItem);
    }
} 
```

我仍然希望随着时间的推移会提出一个更清洁、更易于维护的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T19:38:55.260

在我看来，使用 MVVM 模式进行编码并不意味着所有与代码相关的事情都应该在模型中完成。与 UI 行为相关的操作（如导航）仍应通过使用控件中的可用事件在视图（代码隐藏）中完成。就像 GridView 的事件鼠标和键盘事件一样。

很多人可能不同意我的观点，但是在 WPF 和 Silverlight 中使用 MVVM 模式工作了几年之后，我必须说 UI 行为（视图）和控件的逻辑/功能性（模型）之间的良好组合，您还将被迫将一些仅与 UI 相关的内容放到代码隐藏中。至少，这是我的看法。

您可以做的是创建一个继承 GridView 的类（我们称之为 MyDataGrid）。然后，您可以使用 OnKeyDown 覆盖并在按 Enter 时让导航变为垂直状态。实际上，您可以使 MyDataGrid 的外观和行为“开箱即用”，就像您想要的那样，因此如果您想在您的应用程序（或另一个应用程序）的另一个地方使用相同的网格行为，则无需额外的代码。

# iphone - iPhone SDK 6 启动带有语音导航方向的地图

> ID：13893093
> 
> 赞同：3
> 
> 时间：2012-12-15T14:34:15.153
> 
> 标签：iphone, ios6, core-location, ios5

我正在尝试从我的 iPhone SDK 应用程序启动地图应用程序。现在我可以启动带有方向的地图应用程序，但它会显示方向的概述，并且不使用 Siri 和语音导航来提供转弯方向。

目前我有一个启动此代码的按钮...

```
NSString *address = viewedObject.addressFull;
NSString *url = [NSString stringWithFormat: @"http://maps.apple.com/maps?saddr=%f,%f&daddr=%@", here.latitude, here.longitude, [address stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:url]]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T20:58:25.457

在 iOS 6 中，有一种启动地图的新方法，使用`openMapsWithItems:`. `MKMapItem`这是我使用的一个片段，它提供从当前位置到提供的坐标的步行或驾车路线：

```
// iOS 6.0+ only
MKPlacemark* destPlace = [[[MKPlacemark alloc] initWithCoordinate:coordinate addressDictionary:nil] autorelease];
MKMapItem* destMapItem = [[[MKMapItem alloc] initWithPlacemark:destPlace] autorelease]; destMapItem.name = stationItem.title;

NSArray* mapItems = [[[NSArray alloc] initWithObjects: destMapItem, nil] autorelease];
NSDictionary* options = [NSDictionary dictionaryWithObjectsAndKeys:
                                 walking ? MKLaunchOptionsDirectionsModeWalking : MKLaunchOptionsDirectionsModeDriving,
                                 MKLaunchOptionsDirectionsModeKey, nil];
[MKMapItem openMapsWithItems:mapItems launchOptions:options]; 
```

你这样做的方式，如果在 iOS 6 之前的设备上运行，你仍然必须这样做，你需要`dirflg`在 URL 中包含来请求步行或驾驶方向：

```
// pre iOS 6 code
NSString *urlString = [NSString stringWithFormat:@"http://maps.google.com/maps?saddr=%f,%f&daddr=%f,%f&dirflg=%c",
    currentLocation.coordinate.latitude,
    currentLocation.coordinate.longitude,
    destination.coordinate.latitude,
    destination.coordinate.longitude,
    walking ? 'w' : 'd']; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T04:46:41.460

我在上面的 progrmr 答案之上构建......下面的代码将采用地址的 NSString 输入，然后转发对其进行地理编码，然后打开带有语音导航方向的地图应用程序到 NSString 输入。NameString 和 PhoneString 附加到放置在地图应用程序上的地标上。如果没有上面的 progrmr 代码，下面的代码是不可能的，请将他的答案标记为有用。

```
 [self.geocoder geocodeAddressString:AddressString completionHandler:^(NSArray *placemarks, NSError *error) {

        if ([placemarks count] > 0) {
            CLPlacemark *placemark = [placemarks objectAtIndex:0];
            CLLocation *location = placemark.location;
            CLLocationCoordinate2D there = location.coordinate;

            MKPlacemark *destPlace = [[MKPlacemark alloc] initWithCoordinate:there addressDictionary:nil];
            MKMapItem *destMapItem = [[MKMapItem alloc] initWithPlacemark:destPlace];
            destMapItem.name = NameString;
            destMapItem.phoneNumber = PhoneString;

            NSArray* mapItems = [[NSArray alloc] initWithObjects: destMapItem, nil];
            NSDictionary* options = [NSDictionary dictionaryWithObjectsAndKeys:MKLaunchOptionsDirectionsModeDriving, MKLaunchOptionsDirectionsModeKey, nil];
            [MKMapItem openMapsWithItems:mapItems launchOptions:options];
        }
    }]; 
```

# python - 具有永久重定向的动态 slug 或在数据库上存储 slug

> ID：13893095
> 
> 赞同：2
> 
> 时间：2012-12-15T14:34:18.083
> 
> 标签：python, django, seo, slug

这是新闻页面上网址的最佳选择：

动态生成 slug。从对象 id 加载页面。如果 slug 不匹配，则永久重定向到正确的 slug。

```
myweb.com/542/my-news-item 
```

我看到的缺点：如果新闻标题更改，则 slug 会更改，但旧 slug 将重定向到新的，所以我不知道这是否是查找问题。

或者：

即使新闻标题改变，也永远不会改变的静态段塞。

```
myweb.com/my-news-item 
```

我看到的缺点：数据库上还有一个字段。如果我从根本上改变新闻标题，那么蛞蝓就会大不相同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T15:10:58.373

如果你想更新 slugs 而不破坏旧的 url，你可以分离 slugs 并链接列表视图中的最新内容，应该这样做：

```
class Article(models.Model):
    title = models.CharField() # etc

class ArticleSlug(models.Model):
    article = models.ForeignKey(Article)
    slug = models.SlugField(unique=True)
    date_created = models.DateTime(auto_now_add=True, editable=False)

    class Meta:
        get_latest_by = "date_created" 
```

在您的征募模板中，您可以简单地调用最新的 slug，但您可能还希望在 url 中有一些 M/Y/D 层次结构

```
<a href="/news/articles/{{ article.articleslug_set.latest }}/">{{ article.title }}</a> 
```

如果您的网站获得大量流量，您可能需要添加一个 celery 任务来检索最新的 slug 并不时将其复制到文章模型上的字段中。这将为您节省一些 SQL JOIN。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T15:56:56.923

How about a combination of using the [redirects app](https://docs.djangoproject.com/en/dev/ref/contrib/redirects/?from=olddocs/) and a post save signal like what this [guy wrote](http://webcache.googleusercontent.com/search?q=cache%3atYuN6SZqYRUJ%3atimmyomahony.com/blog/2012/10/22/create-automatic-redirects-upon-changing-url-dependent-field-your-django-models/%20&cd=13&hl=en&ct=clnk&gl=sg).

# java - 无法通过地图 到带有参数 Map 的构造函数。为什么？

> ID：13893104
> 
> 赞同：2
> 
> 时间：2012-12-15T14:35:52.860
> 
> 标签：java, generics

我有以下课程：

```
class MySelectBox {
    public MySelectBox(Provider<Map<? extends Object, ? extends Object>> providerArrayIdToLabel) {
        ...
    }
} 
```

我正在尝试在使用此类的代码中传递它：

```
new MySelectBox(new Provider<Map<Long, String>>{
    ... my implementation of Provider ...
}); 
```

编译器给出以下错误：

```
The constructor MySelectBox(new Provider<Map<Long,String>>(){}) is undefined 
```

为什么？为什么方法未定义？我应该在构造函数的签名中更改什么以使其接受`Provider<Map<Long, String>>`

注意：Provider接口是：

```
public interface Provider<T> extends javax.inject.Provider<T> {
  T get();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T14:52:28.857

将 MySelectBox 构造函数的声明更改为：

```
public MySelectBox(Provider<? extends Map<? extends Long, ? extends String>> providerArrayIdToLabel) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T22:09:27.160

为了扩展答案，您的标题是错误的并且不能反映问题。您*可以*将 a 传递给`Map<Long, String>`a `Map<? extends Object, ? extends Object>`。那不是问题。如果 X 和 Y 不同（这里 X 是并且 Y 是） ，您不能将 a 传递`Provider<X>`给 a 。X 是否是 Y 的子类型并不重要。这就像您不能传递给 a即使 String 是 Object 的子类型一样。但是，如果您在顶层使用通配符，这将允许您允许子类型——您可以传递给.`Provider<Y>``Map<Long, String>``Map<? extends Object, ? extends Object>``Provider<String>``Provider<Object>``Provider<X>``Provider<? extends Y>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T15:04:39.533

That's the effect of the Java generics being invariant.

Since that map is passed to the constructor, I think the best fix would be to declare the key and value types as class generics, so each instance will hold a map of specific keys and values:

```
class MySelectBox<K, V> {
    public MySelectBox(Provider<Map<K, V>> map) {}
} 
```

Now you can safely write:

```
new MySelectBox<Long, String>(new Provider<Map<Long, String>>()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T14:57:52.060

将您的代码更改为

```
 new MySelectBox(new Provider<Map<?, ?>>() {
        @Override
        public Map<Long, String> get() {
            return null;
        }
    }); 
```

这是我的解释尝试（这可能是错误的，因为我也很难使用泛型）：

编译器不知道 Provider 只创建对象。它认为 a`Provider<Map<?, ?>>`是一个能够保存`Map<?, ?>`（就像 a `List<Map<?, ?>>`）实例的对象。而且由于 a`Provider<Map<?, ?>>`应该能够保存包含任何作为键和任何作为值的映射，因此 a`Provider<Map<Long, String>>`不是有效的类型替换。实际上， a`Provider<Map<Long, String>>`只能保存 的实例`Map<Long, String>`。

# c++ - 如何将 char 数组插入另一个 char 数组？

> ID：13893105
> 
> 赞同：0
> 
> 时间：2012-12-15T14:35:52.597
> 
> 标签：c++, arrays, string, char

我想将一些文本（字符数组）插入另一个字符数组。我使用了这个 strcpy，但它有时会显示（并非总是）奇怪的迹象，看看：

![在此处输入图像描述](../Images/6bb8b093d9cb1404e7aff048e920a34e.png)

如何摆脱它们？

这是我的代码：

```
 #include <string>
#include <string.h>
#include <time.h>
#include <stdio.h>
#include <iostream>
using namespace std;

const string currentDateTime() {
    time_t now = time(0);
    struct tm tstruct;
    char buf[80];
    tstruct = *localtime(&now);
    strftime(buf, sizeof(buf), "%X", &tstruct);
    return buf;
}

char *addLogin(char *login, char buf[])
{
    string b(buf);
    string l(login);
    string time = currentDateTime();
    string res = time;
    res += l;
    res += b;
    return const_cast<char*>(res.c_str());
}

int main(int argc, char **argv)
{
    char buf[1024];
    strcpy(buf, " some text");
    char *login = "Brian Brown";
    char *temp = addLogin(login, buf);
    strcpy(buf, temp);
    printf("%s\n", buf);
    return 0;
} 
```

**编辑：**

```
const string currentDateTime() {
    time_t now = time(0);
    struct tm tstruct;
    char buf[80];
    tstruct = *localtime(&now);
    strftime(buf, sizeof(buf), "%X", &tstruct);
    string b(buf);
    return b;
} 
```

它现在似乎运作良好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T14:43:30.087

从函数中，您返回一个未定义行为`currentDateTime()`的局部变量。`buf`当您稍后附加字符串（以及此函数返回的字符串）时，这肯定会引起问题。

此外，函数的签名是`const string`但是你返回一个`char*`.

# ruby-on-rails - Fullcalendar Rails-事件未出现在日历上

> ID：13893107
> 
> 赞同：2
> 
> 时间：2012-12-15T14:35:58.973
> 
> 标签：ruby-on-rails, json, ruby-on-rails-3.2, fullcalendar

我有 git clone fullcalendar_assets 并且它运行顺利并且事件显示。

我的应用程序 rails 3.2.6 使用 dbms 的 postgresql。我尝试在我的应用程序中应用 fullcalendar。但事件没有出现。

切中要害。

在路线.rb

```
namespace admin do
 resources :events
end 
```

在 admin/events_controller.rb

```
class Admin::EventsController < ApplicationController
  include Tenantable::Schema::Controller

  before_filter :authenticate_admin!

  def index
    @events = Event.scoped
    @events = Event.between(params['start'], params['end']) if (params['start'] && params['end'])

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: ([:admin, @events]) }
    end
  end 
```

在 event.rb 上

```
class Event < ActiveRecord::Base
  include Tenantable::Schema::Model

  scope :between, lambda {|start_time, end_time|
    {:conditions => [
  "starts_at > ? and starts_at < ?",
  Event.format_date(start_time), Event.format_date(end_time)
] }
  }

  # need to override the json view to return what full_calendar is expecting.
  # http://arshaw.com/fullcalendar/docs/event_data/Event_Object/
  def as_json(options = {})
    {
      :id => self.id,
      :nama => self.nama,
      :keterangan=> self.keterangan || "",
      :start => starts_at.rfc822,
      :end => ends_at.rfc822,
      :allDay => self.all_day,
      :recurring => false,
      :url => Rails.application.routes.url_helpers.adminsekolah_event_path(id),
      #:color => "red"
    }

  end

  def self.format_date(date_time)
    Time.at(date_time.to_i).to_formatted_s(:db)
  end

end 
```

在 events.js.coffee 上

```
$(document).ready ->
  $('#calendar').fullCalendar
    editable: true,
    header:
      left: 'prev,next today',
      center: 'title',
      right: 'month,agendaWeek,agendaDay'
    defaultView: 'month',
    height: 500,
    slotMinutes: 30,

    eventSources: [{
      url: '/admin/events',
    }],

    timeFormat: 'h:mm t{ - h:mm t} ',
    dragOpacity: "0.5"

    eventDrop: (event, dayDelta, minuteDelta, allDay, revertFunc) ->
      updateEvent(event);

    eventResize: (event, dayDelta, minuteDelta, revertFunc) ->
      updateEvent(event);

updateEvent = (the_event) ->
  $.update "/events/" + the_event.id,
    event:
      nama: the_event.nama,
      starts_at: "" + the_event.start,
      ends_at: "" + the_event.end,
      keterangan: the_event.keterangan 
```

我尝试在数据库中添加一个事件和事件（模式：子域/不公开），它很顺利，但我运行 localhost:3000/admin/events ，事件没有出现在日历上（不是错误）

以下命令，例如

```
Started GET "/admin/events?start=1353776400&end=1357405200&_=135557072567
2" for 127.0.0.1 at 2012-12-15 18:25:25 +0700
Processing by Admin::EventsController#index as JSON
Parameters: {"start"=>"1353776400", "end"=>"1357405200", "_"=>"1355570725672"}
Admin Load (2.0ms)  SELECT "public"."admins".* FROM "public"."admins" WHERE "public"."admins"."id" = 25 LIMIT 1
Event Load (2.0ms)  SELECT "events".* FROM "events" WHERE (starts_at > '2012-11-25 00:00:00' and starts_at < '2013-01-06 00:00:00')
Completed 200 OK in 10ms (Views: 3.0ms | ActiveRecord: 4.0ms) 
```

我尝试在 psql 中查询

```
education_development=# SELECT * FROM subdomain.events WHERE (starts_at > '2012-11-25 00:00:00' and starts_at < '2013-01-06 00:00:00')
education_development-# ;
id |     name      |       starts_at        |        ends_at         | all_day|   description    |         created_at         |         updated_at
----+---------------+------------------------+------------------------+---------+-----------------+----------------------------+----------------------------
1 | New Year 2013 | 2013-01-01 00:00:00+07 | 2013-01-01 00:00:00+07 | f | New Year 2013 | 2012-12-15 06:53:50.695456 | 2012-12-15 06:53:50.695456
(1 row) 
```

对这个问题有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T16:12:02.473

Apparently this is because the JSON returned from the controller, it should return an array of events but instead it returns an array of 'admin' as the first element and array of events as the second element, which fullcalendar doesn't expect. Simply use

```
 format.json { render json: @events } 
```

and it should work.

**UPDATE**: Also you localized the hash keys of the JSON representation of your event object, you must use the the same keys in fullcalendar `model/event.rb`.

# ruby-on-rails-3 - 访问嵌套哈希中的数据

> ID：13893109
> 
> 赞同：0
> 
> 时间：2012-12-15T14:36:29.557
> 
> 标签：ruby-on-rails-3, json

首先，我在这里使用这个 gemfile：

[https://github.com/ryanwkan/covetous](https://github.com/ryanwkan/covetous)

初始化后

my_profile = Covetous::Profile::Career.new 'rwk#1242'

我得到一个这样的数组

[http://pastebin.com/CcW0aaLL](http://pastebin.com/CcW0aaLL)

当我尝试像这样访问它时

my_profile.heroes，它返回

```
[{"name"=>"Ziyi", "id"=>10692899, "level"=>60, "hardcore"=>false, "paragonLevel"=>87, "gender"=>1, "dead"=>false, "class"=>"wizard", "last-updated"=>1354337248}, {"name"=>"Aerendil", "id"=>5987778, "level"=>60, "hardcore"=>false, "paragonLevel"=>0, "gender"=>1, "dead"=>false, "class"=>"demon-hunter", "last-updated"=>1353389408}, {"name"=>"Bubba", "id"=>9177617, "level"=>60, "hardcore"=>false, "paragonLevel"=>11, "gender"=>0, "dead"=>false, "class"=>"witch-doctor", "last-updated"=>1352946041}, {"name"=>"Emma", "id"=>7153459, "level"=>60, "hardcore"=>false, "paragonLevel"=>0, "gender"=>1, "dead"=>false, "class"=>"monk", "last-updated"=>1347863170}, {"name"=>"Grumbar", "id"=>17793743, "level"=>60, "hardcore"=>false, "paragonLevel"=>0, "gender"=>0, "dead"=>false, "class"=>"barbarian", "last-updated"=>1352944313}, {"name"=>"BankerOne", "id"=>12215739, "level"=>1, "hardcore"=>false, "paragonLevel"=>0, "gender"=>1, "dead"=>false, "class"=>"monk", "last-updated"=>1351810350}] 
```

如果我提前 1 步使用 my_profile.heroes[0] 它会返回

```
{"name"=>"Ziyi", "id"=>10692899, "level"=>60, "hardcore"=>false, "paragonLevel"=>87, "gender"=>1, "dead"=>false, "class"=>"wizard", "last-updated"=>1354337248} 
```

但是，我无法从上述结果中访问更多数据。

my_profile.heroes[0].name 返回 NoMethodError 并且 my_profile.heroes[0][0] 返回“nil”

我做错了吗？

提前致谢

瑞安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T14:52:30.570

这是一个哈希；使用哈希语法：

```
my_profile.heroes[0]['name'] 
```

除非某些东西用访问器方法包装了一个散列，否则它只是一个散列。

# objective-c - iOS 在组件中存储随机属性，例如没有子类的 UITextField

> ID：13893112
> 
> 赞同：0
> 
> 时间：2012-12-15T14:36:46.377
> 
> 标签：objective-c, ios, interface-builder

有谁知道是否有一种方法可以在 Interface Builder 的用户定义的运行时属性部分中设置类似字符串的属性，而无需创建所述组件的子类？例如，我想为我的界面中的每个组件存储一个元数据值，以便以后使用。我只是不想创建子类或每个组件来添加元数据属性。

这是我想出的一种方法。意见？

```
#import <UIKit/UIKit.h>
#import <objc/runtime.h>

@interface UIControl(MetaData)

@property (nonatomic, retain) id entityProperty;

@end

@implementation  UIControl(MetaData)

static char const * const EntityPropertyKey = "EntityProperty";

@dynamic entityProperty;

- (id)entityProperty {
    return objc_getAssociatedObject(self, EntityPropertyKey);
}

- (void)setEntityProperty:(id)newEntityProperty {
    objc_setAssociatedObject(self, EntityPropertyKey, newEntityProperty,     OBJC_ASSOCIATION_RETAIN_NONATOMIC);
}

@end 
```

...

```
if (textField.entityProperty) 
     [managedObject setValue: textField.text forKey:textField.entityProperty]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T16:12:59.217

You could keep an NSDictionary somewhere, perhaps in a singleton object that has methods for issuing unique ids for objects and storing metadata by the id keys in the dictionary. The UI objects have a tag property that you can use, if your ids are just incremented integers. Then the dictionary keys would just be NSNumbers for those unique integers.

Like this:

```
#import <Foundation/Foundation.h>

@interface ACLMetadataManager : NSArray

+(ACLMetadataManager*) sharedMetadataManager;
-(NSUInteger) getUniqueId;
-(void) setObject: (id) object forId:(NSUInteger) theId;
-(id) objectForId:(NSUInteger) theId;

@end 
```

And:

```
#import "ACLMetadataManager.h"
@implementation ACLMetadataManager { // Private variables
    NSMutableDictionary *_metadata;
    NSUInteger _ids;
}

- (id)init {
    self = [super init];
    if (self) {
        _metadata = [[NSMutableDictionary alloc] init];
    }
    return self;
}

+(ACLMetadataManager*) sharedMetadataManager { // Singleton getter
    static ACLMetadataManager *instance;
    if (instance != nil) {
        return instance;
    }
#if __IPHONE_OS_VERSION_MAX_ALLOWED >= __IPHONE_4_0
    static dispatch_once_t oneTimeThread;
    dispatch_once(&oneTimeThread, ^(void) {
        instance = [[ACLMetadataManager alloc] init];
    });
#else
    @synchronized(self) {
        instance = [[ACLMetadataManager alloc] init];
    }
#endif
    return instance;
}

-(NSUInteger) getUniqueId { // Increment unique id when getter is called.
    return ++_ids; // Start from 1 because tag is 0 by default.
}

-(void) setObject: (id) object forId:(NSUInteger) theId {
    [_metadata setObject:object forKey:[NSNumber numberWithInteger:theId]];
}

-(id) objectForId:(NSUInteger) theId {
    return [_metadata objectForKey:[NSNumber numberWithInteger:theId]];
}

// Override some methods to ensure singleton stays instantiated.
- (id) retain {
    return self;
}
- (oneway void) release {
    // Does nothing here.
}
- (id) autorelease {
    return self;
}
- (NSUInteger) retainCount {
    return INT32_MAX;
}
@end 
```

Usage:

```
ACLMetadataManager *metadataManager = [ACLMetadataManager sharedMetadataManager];
myControl.tag = [metadataManager getUniqueId];
[metadataManager setObject:myMetadata forId:myControl.tag]; 
```

# mysql - 最小值 MySQL 查询

> ID：13893114
> 
> 赞同：4
> 
> 时间：2012-12-15T14:36:56.607
> 
> 标签：mysql, sql, min

我有一个类似于下面的数据表：

```
ID   A   B
10  5    blue
10  8    red
10  10  yellow
20  2    black
20  17  blue
30  7    red
30  12  green
30  50  black 
```

基本上我想编写一个 mySQL 查询来输出如下内容：

```
ID   A   B
10  5    blue
20  2    black
30  7    red 
```

它仅给出“ID”的唯一值和每个唯一“ID”的“A”的最小值。'B' 只是行中伴随它的额外数据。

我的查询应该是什么样的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T14:42:03.953

您可以使用子查询来识别`min(a)`每个值`id`，然后将其连接回您的表：

```
select *
from yourtable t1
inner join
(
  select min(A) A, id
  from yourtable
  group by id
) t2
  on t1.id = t2.id
  and t1.A = t2.A 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/8d360/1)

结果是：

```
| ID | A |     B |
------------------
| 10 | 5 |  blue |
| 20 | 2 | black |
| 30 | 7 |   red | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T14:46:38.333

您的查询看起来像这样

```
 SELECT *
  FROM table t1
  INNER JOIN
         (
  SELECT min(A) mi, A, ID
  FROM table
  GROUP BY ID
         ) t2
   ON t1.ID = t2.ID
   AND t1.A = t2.A 
```

# python - 从python27中的文件夹导入模块

> ID：13893117
> 
> 赞同：1
> 
> 时间：2012-12-15T14:37:30.063
> 
> 标签：python, import, module, python-2.7, directory

这听起来很荒谬，因为在这个网站上似乎有无限数量的回答这个问题 - 但如果不临时更改每次重新加载的系统路径（或**init**，这对我的设置不起作用，我无法找到一个简单的解决方案） ）。我正在寻找一种安全、简单的方法来完成这项工作。

简单地说 - 我有一个目录结构如下：

```
**root**
>main.py
>**modules**
  >>rivescript.py
  >>js.py
>**plugins**
  >>weather.py
  >>synd.py 
```

为了简单起见，我想在 main.py 中本地导入呈现的子目录（模块、插件）中的每个可用模块

伪：

```
#main.py
import "./modules/*.py" as modules_*
import "./plugins/*.py" as plugins_* 
```

并且能够像这样调用函数：

```
plugins_weather.get("3088")
modules_rivescript.RiveScript.reply("localuser", language_input) 
```

有什么建议么？速度和资源消耗对于这个项目来说是一件大事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T14:50:42.050

首先，您应该将 __init__.py 文件（可能为空）放在 modules/ 和 plugins/ 目录中，以将它们标记为包。

现在，您可以在 main.py 中导入您的模块：

```
import modules.js as js
import modules.rivescript as rivescript

import plugins.weather as weather
import plugins.synd as synd

weather.get("3088")  # Usage example 
```

# c++ - 当我的项目在 Visual Studio 与 Qt Creator 中构建时，Q_ASSERT 具有不同的行为

> ID：13893122
> 
> 赞同：4
> 
> 时间：2012-12-15T14:38:12.867
> 
> 标签：c++, visual-studio, qt, qt-creator, assert

这似乎是一个错误，因为在 Qt Creator 上，Q_ASSERT(false) 会导致我的应用程序退出，即使文档说它应该允许您在断言处中断：

> 在 Windows 上，对于调试版本，此函数将报告 _CRT_ERROR 使您能够将调试器连接到应用程序。

## 在 Qt 创建者上：

在 Qt Creator+MinGW 中编译我的项目时，代码`Q_ASSERT(false);`导致程序显示此消息（下面的屏幕截图），之后应用程序退出：

> 此应用程序已请求运行时以不寻常的方式终止它。请联系应用程序的支持团队以获取更多信息。

![在此处输入图像描述](../Images/e005597c923c0cad6e7aafc31c2e9ad9.png)

和应用程序输出窗格显示此调试输出：

```
ASSERT: "false" in file ..\IntegrateWithQt\main.cpp, line 6
Invalid parameter passed to C runtime function.
Invalid parameter passed to C runtime function. 
```

## 在 Visual Studio 上：

当使用 Visual Studio 编译同一个项目（我使用 Qt 插件导入它）时，我会得到一个更有用的 Abort/Retry/Ignore 对话框，其中单击 Retry 会在断言位置中断程序：

![在此处输入图像描述](../Images/34e1042c2b7abbbdbf2d233dfca42425.png)

我在 Qt Creator 和 Visual Studio 中链接到的 Qt 版本是 4.8.1。这两个项目都是在调试模式下构建的。

那么如何让 Qt Creator 允许我在调试模式下中断断言行呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T23:35:14.467

我的猜测是您在 Qt Creator 中使用 Mingw，在 Visual Studio 中使用 MSVC（显然）。不同的编译器产生不同的代码。

尝试在 Creator 中使用 MSVC（您需要获得使用该编译器构建的 Qt 版本才能做到这一点！）并查看是否仍然存在差异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T14:59:11.730

1.  可能在 QtCreator 的 .pro 文件中没有设置 NDEBUG（在 QtCreator 的编译输出中检查它）
2.  使用标准 C++ 断言[http://en.cppreference.com/w/cpp/error/assert](http://en.cppreference.com/w/cpp/error/assert)

# php - jQuery .load() ; 原始文档中的调用函数

> ID：13893126
> 
> 赞同：-1
> 
> 时间：2012-12-15T14:38:43.900
> 
> 标签：php, jquery, ajax, dom

在 index.html 上；用户的操作将触发 .load() 事件，该事件将 php 生成的文档加载到 div 上。加载的文档将包含一些 javascript 代码。我想调用最初在 index.html 上定义的 javascript 函数。如何做呢？简单地在加载的文档上调用该函数是行不通的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T15:59:55.363

在加载函数的回调参数中调用你想要的函数

```
content.load("../includes/fetch.php",{
                'data':url
            },function(){
               whatever_function();
            }
        ); 
```

[http://api.jquery.com/load/](http://api.jquery.com/load/)

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-12-15T14:44:44.740

您想要索引页面上的所有 javascript，使用 --`.on()`处理现在和未来。这意味着您可以将某些内容加载到 a`div`中并使其仍然有效。如果您尝试在动态加载的 php 上使用相关的 javascript，它将无法正常工作。

# javascript - 如何在 D3.js 中平滑地绘制从起点到终点的路径

> ID：13893127
> 
> 赞同：16
> 
> 时间：2012-12-15T14:38:44.703
> 
> 标签：javascript, svg, d3.js

我有以下代码绘制基于正弦函数的线路径：

```
var data = d3.range(40).map(function(i) {
  return {x: i / 39, y: (Math.sin(i / 3) + 2) / 4};
});

var margin = {top: 10, right: 10, bottom: 20, left: 40},
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

var x = d3.scale.linear()
    .domain([0, 1])
    .range([0, width]);

var y = d3.scale.linear()
    .domain([0, 1])
    .range([height, 0]);

var line = d3.svg.line()
          .interpolate('linear')
          .x(function(d){ return x(d.x) })
          .y(function(d){ return y(d.y) });

var svg = d3.select("body").append("svg")
    .datum(data)
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

svg.append("path")
    .attr("class", "line")
    .attr("d", line);

svg.selectAll('.point')
   .data(data)
   .enter().append("svg:circle")
   .attr("cx", function(d, i){ return x(d.x)})
   .attr("cy", function(d, i){ return y(d.y)})
   .attr('r', 4); 
```

我想要做的是从第一个节点到最后一个节点平滑地绘制它。我还希望在两个连续节点之间进行平滑过渡，而不仅仅是一次放置整条线。就像用铅笔连接点一样。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-15T15:01:07.520

您可以使用`stroke-dashoffset`和轻松地为路径设置动画`and path.getTotalLength()`

```
var totalLength = path.node().getTotalLength();

path
  .attr("stroke-dasharray", totalLength + " " + totalLength)
  .attr("stroke-dashoffset", totalLength)
  .transition()
    .duration(2000)
    .ease("linear")
    .attr("stroke-dashoffset", 0); 
```

[http://bl.ocks.org/4063326](http://bl.ocks.org/4063326)

# android - 如何在使用 GridView 实现的表中按列设置数据

> ID：13893131
> 
> 赞同：0
> 
> 时间：2012-12-15T14:39:11.227
> 
> 标签：android, android-gridview, android-gridlayout

我必须在一个表中查看 SQLite 数据库的数据，现在的问题是我看到的所有 gridView 示例都是用一个定义表的所有数据的单个数组实现的

```
public class GridViewDemo extends Activity implements
        AdapterView.OnItemClickListener {

    TextView selection;
    String[] items = { "this", "is", "a", "really", "really2", "really3",
            "really4", "really5", "silly", "list" };

    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);
        selection = (TextView) findViewById(R.id.selection);

        GridView gv = (GridView) findViewById(R.id.grid);

        ArrayAdapter<String> aa = new ArrayAdapter<String>(
                this,
                android.R.layout.simple_list_item_1, 
                items );

        gv.setAdapter(aa);
        gv.setOnItemClickListener(this);
    }

    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
        selection.setText(items[position]);
    }

}// class 
```

在[链接](http://www.java-samples.com/showtutorial.php?tutorialid=1518)

因为我不知道有多少行将包含用户选择的数据集，所以我应该实现一个 gridView，它为每列接收不同的数据数组。

ES

```
String dataColumn1[]=....
String dataColumn2[]=....
String dataColumn3[]=.... 
```

或者，一种将行限制为指定整数的方法，因此也可以使用单个数组来解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T16:11:29.190

> 我应该实现一个 gridView，它为每一列接收不同的数据数组。

您可以通过制作自己的自定义适配器并使用方法中的`position`参数从正确的数据数组中获取单元格项目来轻松实现这一点`getView`。问题是您需要找出哪一列的项目数量最多，并在其他数据数组中插入假项目以匹配该数字，以便保持`GridView`正确的状态。

> 或者，一种将行限制为指定整数的方法，因此也可以使用单个数组来解决我的问题。

我不明白这一点，其中的行数`GridView`是由列数和可用数据预先确定的（如果您设置了 5 列并且有 6 个数据项，则 中将有 2 行`GridView`）。

您可能还想看看用 a 来实现表格`ListView`（我已经[回答了一个](https://stackoverflow.com/questions/13496354/android-dynamic-gridview-multiple-columns-binded-rows/13498033#13498033)可能对此有用的问题）。

# c - 获取当前 pthread cpu 使用情况 Mac OS X

> ID：13893134
> 
> 赞同：3
> 
> 时间：2012-12-15T14:39:18.747
> 
> 标签：c, macos, pthreads, cpu-usage

如何从 Mac OS X 中的线程本身获取线程的 cpu 时间？对于 linux，我所做的是，`getrusage(RUSAGE_THREAD, &ru)`但此解决方案不适用于 Mac OS X。

我遇到了这个[问题](https://stackoverflow.com/questions/1543157/how-can-i-find-out-how-much-memory-my-c-app-is-using-on-the-mac)，但我不知道如何根据我的目的调整它（我不熟悉 Mac OS X 的内部结构。我什至不确定 pthread thread == mach thread）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T21:13:55.423

这就是我最终的结果：

```
#include <mach/mach_init.h>
#include <mach/thread_act.h>
#include <mach/mach_port.h> 
```

[...]

```
mach_port_t thread;
kern_return_t kr;
mach_msg_type_number_t count;
thread_basic_info_data_t info;

thread = mach_thread_self();

count = THREAD_BASIC_INFO_COUNT;
kr = thread_info(thread, THREAD_BASIC_INFO, (thread_info_t) &info, &count);

if (kr == KERN_SUCCESS && (info.flags & TH_FLAGS_IDLE) == 0) {
    usage->utime.tv_sec  = info.user_time.seconds;
    usage->utime.tv_usec = info.user_time.microseconds;
    usage->stime.tv_sec  = info.system_time.seconds;
    usage->stime.tv_usec = info.system_time.microseconds;
}
else {
    // should not happen
    printf("Could not retreive thread info.");
    bzero(usage, sizeof(struct usage));
}

mach_port_deallocate(mach_task_self(), thread); 
```

我得到的结果与`getrusage(RUSAGE_THREAD, &ru)`在 Linux 下得到的结果截然不同。所以我不确定这是正确的方法。

# java - 老一代堆空间溢出

> ID：13893136
> 
> 赞同：3
> 
> 时间：2012-12-15T14:39:22.163
> 
> 标签：java, garbage-collection

我对 Java 中的 GC 有一个非常奇怪的问题。我正在运行以下代码：

```
 while(some condition){
        //do a lot of work...
        logger.info("Generating resulting time series...");
        Collection<MetricTimeSeries> allSeries = manager.getTimeSeries();
        logger.info(String.format("Generated %,d time series! Storing in files now...", allSeries.size()));

        //for (MetricTimeSeries series : allSeries) {
           // just empty loop
        //}
 } 
```

当我查看 JConsole 时，在每次循环迭代重新启动时，如果我手动强制 GC，我的旧 gen 堆空间会占用大约 90 MB 的大小。如果我取消注释循环，就像这样

```
 while(some condition){
        //do a lot of work...
        logger.info("Generating resulting time series...");
        Collection<MetricTimeSeries> allSeries = manager.getTimeSeries();
        logger.info(String.format("Generated %,d time series! Storing in files now...", allSeries.size()));

        for (MetricTimeSeries series : allSeries) {
           // just empty loop
        }
 } 
```

即使我强制它刷新，它也不会低于 550MB。根据 yourKit profiler，TimeSeries 对象可以通过主线程的本地 var（集合）访问，就在 GC 重新启动新迭代之后......而且集合很大（250K 时间序列。）...... Wyy 是这种情况发生了，我该如何“对抗”这种（不正确的？）行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T16:26:27.480

是的，垃圾收集器可能很神秘......但它胜过管理你自己的内存；）

Collections 和 Maps 有一种方法可以比您希望的更长时间地挂起引用*，*从而在您可能期望的时候防止垃圾收集。正如您所注意到的，设置`allSeries`对自身的引用`null`会将其标记为垃圾收集，因此它的内容也可供抓取。另一种方法是调用`allSeries.clear()`：这将取消所有`MetricTimeSeries`对象的链接，并且它们将免费用于垃圾收集。

为什么删除循环也能解决这个问题？这是更有趣的问题。我很想建议编译器正在优化对`allSeries`.. 的引用，但您仍在调用`allSeries.size()`，因此它无法*完全*优化引用。

为了搅浑水，不同的编译（和设置）表现不同，并使用不同的垃圾收集器，它们本身的行为也不同。如果没有更多信息，很难准确地说出幕后发生的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T22:18:45.163

由于您正在构建一个（大）`ArrayList`时间序列，因此只要它被引用，它就会占据堆，并且如果它保持足够长的时间（或者如果年轻一代太小而无法实际持有它），它将被提升为老年代。我不确定您如何将您在 JConsole 或 Yourkit 中看到的信息与程序中的特定点相关联，但在通过几次 JIT 传递优化空循环之前，您的`while`循环将花费更长的时间并保持收集更长时间，这可能解释了感知到的差异，而实际上并没有很多。

这种行为没有什么不正确的。如果你不想消耗这么多内存，你需要改变你的`Collection`，所以它不是一个热切的填充`ArrayList`，而是一个惰性集合，更多的是一个流（如果你曾经做过 XML 处理，想想 DOM 与 SAX）哪个在迭代时被评估。如果您不需要对整个集合进行排序，那是可行的，尤其是因为您似乎在说集合是底层对象返回的子集合的串联。

如果您可以将返回类型从`Collection`to更改`Iterable`为，例如，您可以使用[Guava](https://code.google.com/p/guava-libraries/)[`FluentIterable.transformAndConcat()`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/FluentIterable.html#transformAndConcat%28com.google.common.base.Function%29)将底层对象的集合转换为延迟评估的`Iterable`时间序列串联。当然，集合的大小不再直接可用（如果您尝试独立于迭代获取它，您将评估惰性集合两次）。

# php - 将数字转换为同一范围内的另一个数字，然后返回

> ID：13893137
> 
> 赞同：0
> 
> 时间：2012-12-15T14:39:56.673
> 
> 标签：php, math, theory

我正在寻找一种解决方案，将给定范围内的所有数字转换为同一范围内的另一个数字，然后再将该数字转换回来。

更具体地说，假设我有数字`1..100`。

将所有数字转换为同一范围内的另一个数字的最简单方法是使用：`b = 99 -a;`稍后使用`a = 99 - b;`.

我的问题是**我想模拟一些随机性**。

我想在 PHP 中实现它，但编码语言并不重要。

**为什么？**

你可能会说为什么？好问题 ：）

我正在基于`id`-s 生成一些易于阅读的短代码字符串，并且由于 id 是逐个递增的，因此我的连续短代码太相似了。稍后我需要“解码”短代码以获取 id。

我的算法现在正在做的是：

`0000001 -> ababac`, `0000002 -> ababad`,`0000003 -> ababaf`等

之后

`ababac -> 0000001`, `ababad -> 0000002`,`ababaf -> 0000003`等

所以在我真正生成短代码之前，我想尽可能地“随机化”这个数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T14:50:27.407

选项 1：为什么你没有一个转换数据库？即每条记录都有一个“真实”的id和一个“随机md5”字符串或其他东西

选项 2：使用彩虹表 - 甚至可能是 0 - 10,000 范围内的 MD5 查找表或其他任何值。然后做一个哈希表查找

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T12:38:20.023

最后我在数学论坛上找到了基于模块运算符的解决方案。可以在这里找到解决方案：

[https://math.stackexchange.com/questions/259891/function-to-convert-each-number-in-amn-to-another-number-in-the-same-range](https://math.stackexchange.com/questions/259891/function-to-convert-each-number-in-a-m-n-to-another-number-in-the-same-range)

# javascript - Javascript 在多个元素上单击事件侦听器并获取目标 ID

> ID：13893138
> 
> 赞同：11
> 
> 时间：2012-12-15T14:39:56.847
> 
> 标签：javascript, html, onclick

`<article>`我有一个 javascript 文件，它在带有标签的每个元素上设置一个“click”的 EventListener 。我想在事件触发时获取点击的文章的 ID。出于某种原因，我的代码什么也没产生！

我的JavaScript：

```
articles = document.getElementsByTagName('article');
articles.addEventListener('click',redirect(e),false);
function redirect(e){
alert(e.target.id);
} 
```

为什么这不起作用？顺便说一句，我的文章设置在加载窗口时调用的函数中，我知道它肯定有效，因为该函数还有其他可用的东西。

* * *

**编辑**

所以我修复了我的代码，所以它会循环并将监听器添加到每个文章元素，现在我得到一个没有任何内容的警报框。当尝试输出没有 ID 的 e.target 时，我收到每个元素的以下消息：

```
[object HTMLHeadingElement] 
```

有什么建议么？

* * *

**另一个编辑**

我当前的javascript代码：

```
function doFirst(){
articles = document.getElementsByTagName('article');
for (var i = 0; i < articles.length; i++) {
    articles[i].addEventListener('click',redirect(articles[i]),false);
}
}

function redirect(e){
alert(e.id);
}
window.addEventListener('load',doFirst,false); 
```

当页面完成加载时，这会显示我的警报框，而没有考虑到我没有点击该死的东西：O

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-15T16:35:43.670

您没有将文章对象作为参数传递给重定向。

试试这个（**编辑**）：

```
articles = document.getElementsByTagName('article');
for (var i = 0; i < articles.length; i++) {
    articles[i].addEventListener('click',redirect,false);
}
function redirect(ev){
    alert(ev.target.id);
} 
```

希望，它会解决这个错误。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-03-06T07:52:56.853

为什么没有人提到检查单击元素的单个事件？

```
document.body.addEventListener('click', function(e) {
    var target = e.target;
    if (target.nodeName === 'article') {
        // do whatever you like ;-)
    }
    e.stopPropagation()
}); 
```

事件越少越好。

如果您不需要检查整个身体上的点击事件，您可以将事件附加到一些更接近的父元素

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-15T14:41:59.633

您正在执行重定向功能而不是传递引用，试试这个：

```
articles = document.getElementsByTagName('article');
articles.addEventListener('click',redirect,false);
function redirect(e){
    alert(e.target.id);
} 
```

**编辑：** 此外，getElementsByTagName 返回一个包含文章的数组，因此您必须遍历它们并在每个文章上调用 addEventListener。

```
articles = document.getElementsByTagName('article');
for (var i = 0; i < articles.length; i++) {
    articles[i].addEventListener('click',redirect,false);
}
function redirect(e){
    alert(e.target.id);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-15T14:51:39.297

`getElementsByTagName`返回一个节点列表。然后，您可以使用 for 循环为每个元素添加一个事件侦听器。

```
<div id="test">
hey
</div>
<div id="test2">
yo
</div>

<script>
var nl = document.getElementsByTagName('div');

for(var i=0; i<nl.length; i++){
    nl[i].addEventListener('click', function(e){
        alert(e.target.id);
    },false);
}
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-27T19:32:40.300

这个迷你 javascript 库 (1.3 KB) 可以做所有这些事情

[https://github.com/Norair1997/norjs/](https://github.com/Norair1997/norjs/)

```
nor.event(["#first"], ["touchstart", "click"], [doSomething, doSomething]); 
```

这个插件可以处理这些东西等等

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-15T00:42:28.447

抱歉碰到这个旧帖子，但我会做这样的事情

```
const myElements = document.querySelectorAll("article")
myElements.forEach(x => x.setAttribute("onclick", "alertFunction(this.id)"))

function alertFunction(theId){
alert(theId)
} 
```

如果 JavaScript 是你所需要的，那就是这样。但是今天您可以改用 JQuery，这样代码会更少。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-15T14:59:05.310

```
articles.addEventListener('click',redirect,false); // omit redirect(e) inside event listener // and then try with the alert as you did. 
```

如果不起作用，则尝试通过 e.id 而不是 e.target.id 在警报中，如下所示：

```
 alert(this.id); 
```

谢谢。

# facebook - Facebook APP应重新请求许可

> ID：13893141
> 
> 赞同：1
> 
> 时间：2012-12-15T14:40:08.890
> 
> 标签：facebook, facebook-graph-api

我有一个 facebook 应用程序，它可以访问用户数据并在其墙上以及我的网站上发布。当应用程序获取用户信息时，它将存储在数据库中。现在，如果用户删除了发布权限，我希望我的应用程序重新请求许可，但不知何故，它不会请求许可，并且不会在墙上发布帖子，而是在我的网站上发布帖子。我能做些什么？？

# javascript - 从个人网站分享到 Facebook 时的自定义图标

> ID：13893148
> 
> 赞同：0
> 
> 时间：2012-12-15T14:41:43.847
> 
> 标签：javascript, facebook, facebook-graph-api

我在共享内容下方看到了 youtube、skype、blackberry、sony erricsson 和所有共享内容下方的 facebook 图标，如下所示：

![在此处输入图像描述](../Images/ffa9097faf8afab694b084253ac14818.png)

知道如何在分享我网站的内容时在 facebook 中显示那种图标（即我的自定义图标）吗？如果可能，请引导我访问一些链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T15:29:56.880

[在您的应用的应用仪表板](https://developers.facebook.com/apps)设置中上传您的图标，您的应用中的帖子将附加该图标

# c++ - strstream 和 stringstream 的区别

> ID：13893154
> 
> 赞同：22
> 
> 时间：2012-12-15T14:42:16.700
> 
> 标签：c++, c++11

我正在浏览这两个类的实现，发现`strstream`该类已被弃用。

如果我使用`stringstream`类作为替换，那么它们在缓冲区中的登录方式会有很大的不同，因为`stringstream`类对象维护着缓冲区的深层副本。

有人在替换类时遇到任何问题`strstream`吗`stringstream`？

这段代码的输出是什么，为什么？

```
#include<iostream>
#include <sstream>
#include <strstream>

int main(){

    char strArr[] = "Soheb Khan is great";

    char stringArr[] = "TurboCharging";

    std::strstream strStream(strArr,19);

    std::stringstream stringStream(std::string(stringArr,19));

    std::cout<<"Before Modification strArr= "<<strArr<<" & stringArr= "<<stringArr<<std::endl;

    strStream << "Fifa 2012 is nice";

    stringStream << "Sometimes its sucks";

    std::cout<<"After Modification strArr= "<<strArr<<" & stringArr= "<<stringArr<<std::endl;

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-15T15:04:38.300

The classes from `<strstream>` are hideous to use. When they were more popular I haven't seen any correct production used (well, they got corrected when I spotted the problems). Either people didn't terminate the string using `std::ends` or they didn't release the memory using `s.freeze(0)` (or, most often, both). Although the `<sstream>` class do create a copy I haven't found this to be a problem.

In case memory allocation actually matters for your use case, either because you need to allocate large chunks or because you have many of them, you can take control easily and have data read from or written to buffers you provide using a custom stream buffer. For example, a stream buffer writing to a readily allocate chunk of memory is trivial to write:

```
struct omembuf
    : std::streambuf {
{
    omembuf(char* base, std::size_t size) {
        this->setp(base, base + size);
    }
    char* begin() const { return this->pbase(); }
    char* end() const { return this->pptr(); }
}; 
```

# javascript - 为以后的页面预加载外部 JavaScript 库

> ID：13893155
> 
> 赞同：0
> 
> 时间：2012-12-15T14:42:23.770
> 
> 标签：javascript, mathjax

我使用托管在 CDN 上的外部 JavaScript 库。

一些用户报告说，当他们第一次访问需要这个库的页面时，加载和渲染内容需要一些时间（该库渲染 LaTeX）。

我想知道我是否可以通过在其他页面到达实际使用它的页面之前（预）加载这个库来优化他们的体验。这样一来，我希望浏览器能早点缓存这个库，这样以后渲染可能会更快。

PS 有问题的库是 MathJax。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T00:57:55.420

由于您特别对 MathJax 感兴趣，因此仅加载它不会为您带来那么多性能。（虽然 MathJax 将被缓存，如果您使用 MathJax CDN，您的用户可能在访问其他站点时已经缓存了它。）

有两个原因导致您可能看不到性能大幅提升。

首先，MathJax 动态加载它的大部分组件。例如，MathJax webfonts 只有在用户系统上没有安装兼容字体时才会被加载，并且它们也被分成几个部分，只有在 MathJax 实际遇到字符时才会加载。其他组件也是如此。这也意味着在没有任何数学运算的页面上，加载 MathJax 对缓存的帮助不大。

话虽如此，MathJax 组件的实际下载可以通过使用以 结尾的组合配置文件之一进行一些优化`-full`，请参阅[MathJax 文档](http://docs.mathjax.org/en/latest/config-files.html)。

然而，真正影响性能的是排版。MathJax 输出取决于您的内容以及用户的屏幕、浏览器和操作系统组合。计算最佳拟合以及插入和重排内容都是一个具有一些基本限制的问题（IE8 在标准模式下做得特别糟糕）。

PS：如果您有隐藏或动态内容，您可能需要查看配置选项`skipStartupTypeset: true`；请参阅[MathJax 文档](http://docs.mathjax.org/en/latest/options/hub.html)。

[免责声明：我是 MathJax 的一员]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T14:46:18.610

如果您在页面末尾添加调用库的脚本标记（就在 html 结束标记之前），则其他所有内容都将在它之前加载，并且用户可以在库仍在加载时开始使用该页面。

编辑：这允许您在另一个页面上“预加载”库而不会减慢它的速度。

# node.js - jsdom 和 node.js 泄漏内存

> ID：13893163
> 
> 赞同：17
> 
> 时间：2012-12-15T14:43:19.617
> 
> 标签：node.js, memory-leaks, jsdom

我发现了一些关于人们遇到类似问题的参考资料，但答案总是如此，请确保在完成后调用 window.close()。但是，这似乎对我不起作用（节点 0.8.14 和 jsdom 0.3.1）

一个简单的复制

```
var util = require('util');
var jsdom=require('jsdom');

function doOne() {
  var htmlDoc = '<html><head></head><body id="' + i + '"></body></html>';
  jsdom.env(htmlDoc, null, null, function(errors, window) {
    window.close();
  });
}

for (var i=1;i< 100000;i++ )  {
  doOne();
  if(i % 500 == 0)  {
    console.log(i + ":" + util.inspect(process.memoryUsage()));
  }
}
console.log ("done"); 
```

我得到的输出是

```
500:{ rss: 108847104, heapTotal: 115979520, heapUsed: 102696768 }
1000:{ rss: 198250496, heapTotal: 194394624, heapUsed: 190892120 }
1500:{ rss: 267304960, heapTotal: 254246912, heapUsed: 223847712 }
...
11000:{ rss: 1565204480, heapTotal: 1593723904, heapUsed: 1466889432 } 
```

在这一点上，风扇变得疯狂，测试实际上停止了……或者至少开始变得非常缓慢

除了 window.close 之外，还有没有人有任何其他提示来摆脱内存泄漏（或者它确实看起来像内存泄漏）

谢谢！

彼得

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-25T06:49:52.143

使用 jsdom 0.6.0 帮助抓取一些数据并遇到了同样的问题。
`window.close`只是帮助减缓了内存泄漏，但它最终确实蔓延到进程被杀死。

运行脚本 `node --expose-gc myscript.js`

在他们修复内存泄漏之前，除了调用之外手动调用垃圾收集器`window.close`似乎有效：

```
if (process.memoryUsage().heapUsed > 200000000) { // memory use is above 200MB
    global.gc();
} 
```

在调用 window.close 之后卡住了。每次触发时，内存使用都会立即回落到基线（对我来说大约 50MB）。几乎无法察觉的停顿。

更新：也考虑`global.gc()`连续调用多次而不是只调用一次（即`global.gc();global.gc();global.gc();global.gc();global.gc();`）

> 多次调用 window.gc() 更有效（基于我不完美的测试），我怀疑它可能导致 chrome 触发一个主要的 GC 事件而不是次要的事件。- [https://github.com/cypress-io/cypress/issues/350#issuecomment-688969443](https://github.com/cypress-io/cypress/issues/350#issuecomment-688969443)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-10T12:51:37.967

您没有给程序任何空闲时间来进行垃圾收集。我相信你会遇到同样的问题，任何大型对象图在一个没有中断的循环中多次创建。

CheapSteaks 的回答证实了这一点，该回答手动强制垃圾收集。如果可行，jsdom 中就不会存在内存泄漏，因为内存泄漏根据定义会阻止垃圾收集器收集泄漏的内存。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-16T13:46:37.117

我在使用 jsdom 时遇到了同样的问题，然后切换到了[chesterio](https://github.com/MatthewMueller/cheerio)，它比 jsdom 快得多，并且即使在扫描了数百个站点之后也能正常工作。也许你也应该尝试一下。唯一的问题是，它没有您可以在 jsdom 中使用的所有选择器。

希望它也适合你。

丹尼尔

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-16T23:38:41.370

使用 gulp、内存使用、清理、变量删除、window.close()

```
var gb = setInterval(function () {

    //only call if memory use is bove 200MB
    if (process.memoryUsage().heapUsed > 200000000) { 
        global.gc();
    }

}, 10000); // 10sec

gulp.task('tester', ['clean:raw2'], function() {

  return gulp.src('./raw/*.html')
    .pipe(logger())
    .pipe(map(function(contents, filename) {

        var doc = jsdom.jsdom(contents);
        var window = doc.parentWindow;
        var $ = jquery(window);

        console.log( $('title').text() );

        var html = window.document.documentElement.outerHTML;

        $( doc ).ready(function() {
            console.log( "document loaded" );
            window.close();
        });

        return html;
    }))
    .pipe(gulp.dest('./raw2'))
    .on('end', onEnd);
}); 
```

对于 7k 个文件，我的使用量一直在 200mb 到 300mb 之间。花了30分钟。这可能对某人有帮助，因为我用谷歌搜索并没有发现任何有用的东西。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-04-28T23:57:42.127

解决此问题的方法是在分叉的 child_process 中运行与 jsdom 相关的代码，并在完成后发回相关结果。然后杀死child_process。

# jquery - Jquery tr：最后给出未定义？

> ID：13893172
> 
> 赞同：0
> 
> 时间：2012-12-15T14:44:57.947
> 
> 标签：jquery, row, undefined, add, tr

我有一个动态添加的表，并且想在表中添加行。我曾经使用`$("#tbl1 tr:last").after()`添加行。出于某种原因，它以未定义的形式返回。

我改为使用`$("#tbl1").children("tr:last")`并且有效？不确定这是否真的是正确的方法，但它确实有效。

为什么第一个选项不起作用的任何原因？

# events - Kendo UI 数据源更改事件：它有效吗？

> ID：13893175
> 
> 赞同：6
> 
> 时间：2012-12-15T14:45:27.970
> 
> 标签：events, kendo-ui, grid, datasource

dataSource.changed 事件是否有效？

实例化我的 Kendo UI 网格后，我将按照此处的文档绑定更改事件：

[http://docs.kendoui.c​​om/api/framework/datasource#change](http://docs.kendoui.com/api/framework/datasource#change)

```
//To set after initialization
dataSource.bind("change", function(e) {
    // handle event
}); 
```

我正在这样做：

```
// initialize
$("#grid").kendoGrid({
        dataSource: dataSource, 

        blah blah blah
)

});
// end of initialization

// bind afterwards
 var grid = $('#grid').data('kendoGrid');
  grid.dataSource.bind("change", function (e) {
      dataChanged();
  });

 //also tried a setTimeout:

  // bind afterwards
  setTimeout(function () {
    var grid = $('#grid').data('kendoGrid');
    grid.dataSource.bind("change", function (e) {
        dataChanged();
    });
}, 350);

 function dataChanged() {
   // handle "change" whatever that means -- documentation definition is hazy
   // does reassigning the data array constitute a change?
   // does changing the value of a particular item in the data array
   // constitute a change?
   // does removing an item from the data array constitute a change?

    var grid = $("#grid").data("kendoGrid");
    grid.refresh();
 } 
```

但是当我执行以下任一操作时，不会调用我的 dataChanged() 函数：

```
var grid = $('#grid').data('kendoGrid');
grid.dataSource.data()[1]["deptname"] = 'XXX'; 
```

或者

```
grid.dataSource.data = aDifferentArray; 
```

我不确定“更改”事件到底在听什么。究竟是什么应该触发它？

如果我创建一个全新的数据源，并将其分配给已有数据源的网格，我看不出这将如何触发现有数据源的更改事件。这样的事件（网格注意到其 dataSource 已被替换为不同的事件）将是网格级事件，而不是数据源级事件，对吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-15T15:49:32.417

需要注意的重要一点是，支持 的数据`DataSource`是`ObservableArray`，并且该数组中的数据项被转换为`ObservableObject`s。

数据源的`change`事件在 2 个条件下触发：

1.  数据`ObservableArray`更改（插入、删除记录）。一个例子是使用`DataSource.add()`or`DataSource.remove()`函数。

2.  `ObservableData`如果属性更改事件从数组中的一个对象冒泡到 DataSource 。但是，就像 Kendo MVVM 框架的其余部分一样，属性更改的通知仅在`.set("propertyName", value)`调用其函数时发生。

这就是为什么`grid.dataSource.data()[1]["deptname"] = 'XXX';`不触发更改事件的原因。如果您将其更改为：`grid.dataSource.data()[1].set("deptname", 'XXX');`那么它应该开始工作。基本上，将事件视为响应从可观察对象`change`触发的 MVVM 属性更改而触发的事件。`data`

至于更改数据数组`grid.dataSource.data = aDifferentArray;`，我实际上不确定这是否会或应该触发更改。我从来没有尝试过。

# php - 要调用这个静态函数，我缺少什么？

> ID：13893179
> 
> 赞同：0
> 
> 时间：2012-12-15T14:46:06.790
> 
> 标签：php

我有一堂课...

```
class bootstrap {

    public static function redirect($ctrl = false, $act = false, $a = false)
    {
        echo 'Entered redirect ...';

        $url = array('home');
        if (!empty($_GET['url'])) {
            $url = rtrim($_GET['url'], '/');
            $url = explode('/', $url);

            print_r($url);
        }

        $controllerName = 'home';
        if (!$ctrl) {
            if (isset($url[0])) {
                $controllerName = $url[0];
            }
        }
        else {
            $controllerName = $ctrl;
        }

        echo '<br/>Controller: $controllerName';

        $file = './controllers/' . $controllerName . '.php';
        if (file_exists($file)) {
            require_once $file;
        }
        else {
            return false;
        }
        $controller = new $controllerName;

        $action = 'Index';
        if (!$act) {
            if (isset($url[1])) {
                $action = $url[1];
            }
        }
        else {
            $action = $act;
        }

        echo '<br/>Action: $action';

        $arg = false;
        if (!$a) {
            if (isset($url[2])) {
                $arg = $url[2];
            }
        }
        else {
            $arg = $a;
        }

        if (!$arg) {
            $controller->{$action}();
        }
        else {
            $controller->{$action}($arg);
        }
    }

} 
```

从`index.php`我试图调用这样的`redirect`函数......

```
include './core/init.php';

echo 'Calling redirect ...';
bootstrap::redirect(); 
```

现在，我`echo 'Calling redirect ...';`在页面上得到了 ，但我从来没有得到 ，`echo 'Entered redirect ...';`所以看起来它永远不会进入`function`.

希望有人可以帮助我...根据我在手册中阅读的内容，**我认为**我的课程设置正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T14:53:46.550

您的类引导程序必须在 init.php 中定义

伟大的:)

# javascript - 选中列表中的复选框

> ID：13893184
> 
> 赞同：0
> 
> 时间：2012-12-15T14:46:43.377
> 
> 标签：javascript, jquery

我想自动取消选中或选中儿童复选框：

HTML：

```
<ul>
    <li>1 <input type='checkbox' /></li>
    <ul>
        <li>1.1 <input type='checkbox'' /></li>
    </ul>
    <ul>
        <li>1.1.1 <input type='checkbox' /></li>
    </ul>
</ul> 
```

Javascript：

```
$('li input').change(function(){
    if($(this).is(":checked")){
        $(this).parent().next().children("li").children("input").attr("checked", true);
        console.log("checked")
    }else{
        $(this).parent().next().children("li").children("input").attr("checked", false);
        console.log("not checked")
    }
}) 
```

但它只适用于第一次出现。我不明白为什么因为1.1的变化和事件变化没有触发

[http://jsfiddle.net/D8ZdU/](http://jsfiddle.net/D8ZdU/)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T14:57:21.643

您可以使用最接近的方法：

```
$('ul input').change(function(){
   var $this = $(this).closest('ul');
   $this.add($this.nextAll()).find("input").prop("checked", this.checked);
}) 
```

[http://jsfiddle.net/LpGsS/](http://jsfiddle.net/LpGsS/)

请注意，您的标记需要修改为什么不使用`li`元素？

```
<ul>
    <li>1 <input type='checkbox' /></li>
    <li>1.1<input type='checkbox' /></li>
    <li>1.1.1 <input type='checkbox' /></li>
</ul> 
```

```
$('ul input').change(function(){
    $(this).parent().nextAll().find("input").prop("checked", this.checked);
}) 
```

[http://jsfiddle.net/JjvKH/](http://jsfiddle.net/JjvKH/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T14:57:31.313

如果您将 HTML 更正为以下内容：

```
<ul>
    <li>1 <input type="checkbox" />
        <ul>
            <li>1.1 <input type="checkbox" />
                <ul>
                    <li>1.1.1 <input type="checkbox" /></li>
                </ul>
            </li>
        </ul>
    </li>
</ul> 
```

然后下面的 jQuery 工作：

```
$('input:checkbox').change(
    function(){
        var state = this.checked ? true : false;
        $(this).next('ul').find('input:checkbox').prop('checked', state);
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/D8ZdU/1/)。

您的 HTML 的问题是一个`ul`元素不是另一个`ul`或元素的有效子`ol`元素。`ul`(and `ol`)的唯一有效子元素是`li`元素，其他*所有*元素都是无效的，除非它包含在`li`.

参考：

*   [`:checkbox`选择器](http://api.jquery.com/checkbox-selector/)。
*   [`find()`](http://api.jquery.com/find/).
*   [`prop()`](http://api.jquery.com/prop/).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T14:50:03.500

对于第一个复选框，“父级”是`<li>`外部的`<ul>`。对于其他人来说，他们的“父母”是`<li>`在另一个人中被孤立`<ul>`并且没有“下一个”的人。

# c# - 使用 RadioButton 进行验证

> ID：13893185
> 
> 赞同：0
> 
> 时间：2012-12-15T14:46:57.720
> 
> 标签：c#, radio-button, panel, tablelayoutpanel

我在面板中有 10 个 RadioButton。

我在 tableLayoutPanel 中有 10 个面板，每个面板位于不同的列中。

如何在列之间移动并验证每列中是否有一个选定的单选按钮？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T15:09:55.400

我没有经验`TableLayoutPanel`，但你可以试试这个：

```
bool allValid = true;
for(int c = 0; c < panel.ColumnCount; c++)
{
    var colRadios = panel.Controls.OfType<RadioButton>() 
        .Where(rb => panel.GetColumn(rb) == c);
    bool colValid = colRadios.Any(rb => rb.Checked);
    if(!colValid)
    {
        allValid = false;
        break;
    }
} 
```

（`panel`是`TableLayoutPanel`）

# python - 在没有内置函数的情况下以降序从给定文件中输出数字

> ID：13893187
> 
> 赞同：0
> 
> 时间：2012-12-15T14:47:11.907
> 
> 标签：python, file, list, min

我必须：

1.  要求用户输入文件
2.  检查文件是否存在
3.  将数字（来自文件）存储在列表中
4.  查找列表的长度
5.  并在没有内置函数的情况下按降序排序

这是我到目前为止所拥有的：

```
def main():
    try:        
        file=open(input (str("Please enter the name of the file you wish to open:" )),"r")
        A= file.readlines()
        print (A)
        file.close

        n=len(str(A))
        print (n)

        new_list=[]
        for i in range (n):
            for j in range (n-i):
                if A(j-1) < A(j):
                    swap (A(j), A(j-1))
    except IOError as e:
        print("({})".format(e)) 
```

我不知道交换后要打印什么。我收到错误（“文件“C:/Python33/project.py”，第 15 行，如果 A(j-1) < A(j): TypeError: 'list' object is not callable"）

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T14:50:26.230

您正在尝试将 a`list`作为函数调用而不是对其进行索引

```
if A(j-1) < A(j):
    swap (A(j), A(j-1)) 
```

实际上应该是

```
if A[j-1] < A[j]:
    swap (A[j], A[j-1]) 
```

要了解如何索引列表，请通读本教程[3.1.3 列表](http://docs.python.org/release/1.5.1p1/tut/lists.html)

你更了解 Python 函数，请阅读[4.6 定义函数](http://docs.python.org/release/1.5.1p1/tut/functions.html)

# emacs - 使用 Emacs 和 AUCTeX 取消格式化 LaTeX 代码

> ID：13893192
> 
> 赞同：2
> 
> 时间：2012-12-15T14:47:55.337
> 
> 标签：emacs, formatting, latex, auctex

Emacs + AUCTeX 提供了各种格式化文本的命令，但我找不到“取消格式化”一段代码的方法（除非在运行格式化命令后立即撤消更改）。例如，假设您有以下带有 LaTeX 格式的片段

```
foo \whatever{bar} quux 
```

我想`\whatever{}`通过选择相关文本或将光标放在其开头/结尾并使用组合键来删除包装器

```
foo bar quux 
```

# php - Excel VBA后学习PHP

> ID：13893193
> 
> 赞同：-2
> 
> 时间：2012-12-15T14:47:56.523
> 
> 标签：php

我本质上是一个财务人员，对 Excel VBA 有着非常强烈的倾向。我从这个论坛学到了很多东西。我正在考虑使用 PHP 并最终使用 javascript。今天是第 0 天，所以在开始之前，我只想问一下是否有人从没有编程经验到 Excel VBA 到 PHP.. 是否有任何雷区需要注意？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T14:55:54.933

“桌面”和“网络”编程之间的一大雷区是网页基于请求和响应。这基本上意味着您的 PHP 脚本是一个只生成一小段 HTML 的简短程序。用户在浏览器中单击某些内容后，会向相同或不同的脚本发出新请求。所以不是一个连续的程序，你有很多小程序，并且在服务器端代码和客户端代码之间有一条非常清晰的界限。

这实际上可能与 VBA 编程非常相似，在 VBA 编程中，您可能拥有由用户使用 Excel 界面触发的相对较小的宏，因此与“真正的”桌面程序员相比，这对您来说可能更容易（无意冒犯）。

# http-headers - 如果没有内容长度的服务器标头，xbuf_frurl 不能正常工作？

> ID：13893195
> 
> 赞同：0
> 
> 时间：2012-12-15T14:48:13.887
> 
> 标签：http-headers, client, g-wan

我尝试使用 xbuf_frurl 从其他网站获取一些信息。
我有一些网站正常，但有些不正常。

到目前为止，我仍然无法确定出了什么问题。
但是有些网站缺少内容长度标头。

谁能判断是否`xbuf_frurl()`依赖于（可能缺少的）内容长度标头，尤其是。什么时候增加缓冲区？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T15:47:05.250

`xbuf_frurl()`如果存在 HTTP 内容长度标头，则确实正在读取正文。它不会尝试解码分块响应。

要使用分块回复处理这些服务器，请使用随分发提供的[G-WAN curl.c 示例](http://gwan.ch/source/curl.c)。您甚至有`libcurl`机会使用 SSL/TLS。

如果这不能解决您的问题，解决此类问题的唯一方法是提供一个无效的示例，其中包含您发送的完整请求和从服务器收到的完整回复。

这就是`xbuf_xcat("%v")`添加格式的原因：提供十六进制转储，即使是二进制回复。

编辑您的问题并添加此信息，以便人们帮助您解决明确定义的问题。

# php - 尝试使用 UNION ALL 插入临时表

> ID：13893196
> 
> 赞同：0
> 
> 时间：2012-12-15T14:48:15.903
> 
> 标签：php, mysql, insert, union-all

我正在尝试设置一个基本的搜索脚本。建议将当前 mysql 表中的数据插入到临时表中以加快搜索速度。

这是我到目前为止的代码：

```
$temp = 'search_' . date('YmdHis'); // name your temp table

$sql = "CREATE TEMPORARY TABLE IF NOT EXISTS {$temp} (
      `id` INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
      `Model` varchar(255) default NULL,
      `Make` varchar(255) default NULL,
      `Year` varchar(255) default NULL,
      `Loc.` varchar(255) default NULL,
      `Sale Price` varchar(255) default NULL,
      `Serial No.` varchar(255) default NULL,
      `Stock No.` varchar(255) default NULL,
      `Tag No.` varchar(255) default NULL,
      `Comments` varchar(255) default NULL,
      `Description` varchar(255) default NULL,
      FULLTEXT KEY `Model` (`Model`,`Make`,`Year`,`Loc.`,`Sale Price`,`Serial No.`,`Stock No.`,`Tag No.`,`Comments`,`Description`)
     )";

$sql .= "INSERT INTO $temp (
        id,
        Model,
        Make,
        Year,
        `Loc.`,
        `Sale Price`,
        `Serial No.`,
        `Tag No.`,
        Comments,
        Description
        )

        (
        (SELECT null,`Model`,`Make`,`Year`,`Loc.`,`Sale Price`,`Serial No.`,`Stock No.`,`Tag No.`,`Comments`,`Description` FROM ag_auger_and_grain_handling WHERE Status='IN' or Status='OF'
            UNION ALL
        SELECT null,`Model`,`Make`,`Year`,`Loc.`,`Sale Price`,`Serial No.`,`Stock No.`,`Tag No.`,`Comments`,`Description` FROM ag_combine WHERE Status='IN' or Status='OF'
            UNION
        SELECT null,`Model`,`Make`,`Year`,`Loc.`,`Sale Price`,`Serial No.`,`Stock No.`,`Tag No.`,`Comments`,`Description` FROM ag_tractor WHERE Status='IN' or Status='OF')
        )
    )";

?> 
```

这是我收到的错误：

> 无法执行查询，因为：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以`Loc.`在第 14 行的 'INSERT INTO search_20121215094411 ( id, Model, Make, Year, , ''附近使用正确的语法

我只能猜测它与非常规的列名（Loc.、Sale Price 等）有关。这些是由以前的程序员设置的，我不能对它们进行任何更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T17:29:13.720

我相信您的“INSERT INTO $temp”行没有插入 $temp 的内容，而是实际上使用 $temp 作为表名。尝试这样的事情：

$sql="INSERT INTO ".$temp." (....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T14:49:53.170

你有一个额外的`)`

```
 $sql .= "INSERT INTO $temp (
    id,
    Model,
    Make,
    Year,
    `Loc.`,
    `Sale Price`,
    `Serial No.`,
    `Tag No.`,
    Comments,
    Description
    )

    (
    (SELECT null,`Model`,`Make`,`Year`,`Loc.`,`Sale Price`,`Serial No.`,`Stock No.`,`Tag No.`,`Comments`,`Description` FROM ag_auger_and_grain_handling WHERE Status='IN' or Status='OF'
        UNION ALL
    SELECT null,`Model`,`Make`,`Year`,`Loc.`,`Sale Price`,`Serial No.`,`Stock No.`,`Tag No.`,`Comments`,`Description` FROM ag_combine WHERE Status='IN' or Status='OF'
        UNION
    SELECT null,`Model`,`Make`,`Year`,`Loc.`,`Sale Price`,`Serial No.`,`Stock No.`,`Tag No.`,`Comments`,`Description` FROM ag_tractor WHERE Status='IN' or Status='OF')
    )
"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T14:52:30.503

您在 sql 的 create 部分的括号之后或插入之前缺少一个分号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-21T18:52:29.290

使用“union”插入临时表时，应为表“union”创建别名

```
insert into temp_table (select * from (select * from table_a union select * from table_b) as table_alias) 
```

# java - 使用 Ant 复制 JavaFX 运行时

> ID：13893201
> 
> 赞同：2
> 
> 时间：2012-12-15T14:48:59.187
> 
> 标签：java, ant, javafx

我想制作一个独立的 javafx 应用程序，但无法理解如何使用 ant 将 java 和 javafx 运行时提取到我的 jar 中。所以我将它添加到我的 Ant 脚本中

```
 <target name="build" depends="compile">
    <fx:application id="GoL" mainClass="app.gol.GoL"/>
    <fx:jar destfile="${out.dir.dist}/${app.jar.name}">
        <fx:resources>
            <fx:fileset dir="${java.home}/lib" includes="**/rt.jar" />
            <fx:fileset dir="${java.home}/lib" includes="**/fxrt.jar" />
        </fx:resources>
        <fx:application refid="GoL"/>
        <fileset dir="${out.dir.classes}"/>
    </fx:jar>
</target> 
```

它只是将 rt jar 复制到我的 jar 中，但仍然在没有 java 运行时的系统上崩溃。如何修复它并使用我的可执行 jar 中的 *rt.jar？

# qt - 如何在带有 Qt 的 OpenGL 中使用顶点缓冲区对象绘制矩形？

> ID：13893202
> 
> 赞同：2
> 
> 时间：2012-12-15T14:49:13.873
> 
> 标签：qt, opengl

我正在尝试使用带有 Qt 的 OpenGL 中的顶点缓冲区对象绘制一个样方。这是我的几何：

```
numVertices = 4;
vertices = new float[3*numVertices];
int i = 0;
vertices[i++] = 0.0f; vertices[i++] = 0.0f; vertices[i++] = 0.0f; // (0,0,0)
vertices[i++] = 1.0f; vertices[i++] = 0.0f; vertices[i++] = 0.0f; // (1,0,0)
vertices[i++] = 1.0f; vertices[i++] = 1.0f; vertices[i++] = 0.0f; // (1,1,0)
vertices[i++] = 0.0f; vertices[i++] = 1.0f; vertices[i++] = 0.0f; // (0,1,0)
i = 0;
// spilt quad into two triangles:
numTriangles = 2;
indices = new unsigned int[numTriangles*3];
indices[i++] = 0; indices[i++] = 1; indices[i++] = 2; 
indices[i++] = 0; indices[i++] = 2; indices[i++] = 3; 
```

接下来在 initializeGL 方法中：

```
QGLBuffer vertexBuffer;
vertexBuffer.create();
vertexBuffer.bind();
vertexBuffer.allocate(vertices, numVertices*sizeof(float));

QGLShaderProgram* shaderProgram_ = new QGLShaderProgram;
shaderProgram_->addShaderFromSourceFile(QGLShader::Vertex,"C:/src/light.vert.glsl") ) {
shaderProgram_->addShaderFromSourceFile(QGLShader::Fragment, "C:/src/light.frag.glsl");
bool ok = shaderProgram_->link();
ok = shaderProgram_->bind(); 
```

我认为 VBO 部分所做的就是将顶点复制到 GPU？（为什么这么多行？）

着色器部分适用于旧式 glBegin(GL_QUADS);

接下来在我的paintGL方法中：

```
shaderProgram_->setAttributeBuffer("vertex", GL_FLOAT, 0, 3, 0);
shaderProgram_->enableAttributeArray("vertex");
glDrawElements(GL_TRIANGLES, numTriangles, GL_UNSIGNED_INT, indices); 
```

前两条线在做什么？也许告诉着色器有一个名为“顶点”的顶点缓冲区，类型为 GL_FLOAT？但是我在创建 VBO 时没有指定任何名称！？OpenGL如何知道这是“顶点”？

反正我什么都没看到！？有没有我遗漏的步骤？我的着色器很简单：

```
# version 120  
varying vec4 color;
void main() {
    vec4 vertex = gl_Vertex;
    // pass trough:
    gl_Position = gl_ProjectionMatrix * gl_ModelViewMatrix * vertex; 
    color = gl_Color; 
}

# version 120 
varying vec4 color;
void main (void) 
{   
    // pass-trough:    
 gl_FragColor = color;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T16:49:48.680

我猜你在这里输了 3 个：

```
vertexBuffer.allocate(vertices, numVertices*sizeof(float)); 
```

->

```
vertexBuffer.allocate(vertices, numVertices*sizeof(float)*3); 
```

> 我认为 VBO 部分所做的就是将顶点复制到 GPU？（为什么这么多行？）

是的。这就是 OpenGL 的工作原理。要在 VBO 中存储某些内容，您必须创建它、绑定它并复制数据。

> 前两条线在做什么？也许告诉着色器有一个名为“顶点”的顶点缓冲区，类型为 GL_FLOAT？但是我在创建 VBO 时没有指定任何名称！？OpenGL如何知道这是“顶点”？

第一行：

`QGLShaderProgram::setAttributeBuffer()`“在此着色器程序中设置名为 name 的属性的顶点值数组，从当前绑定的顶点缓冲区中的特定偏移量开始。” - 从手册。同样，这就是 OpenGL 的工作原理。这是一个状态机。您将特定缓冲区绑定到 GL_ARRAY_BUFFER 绑定点，然后告诉 OpenGL 这是存储“顶点”属性数据的缓冲区。“顶点”是您在着色器程序中的属性名称。（也许你应该把它改成“gl_Vertex”）猜猜，Qt 调用`glVertexAttribLocation()`来查找你的属性的位置和下一个调用`glVertexAttribPointer()`。

第二行：

OpenGL 必须知道它应该将数据从某个缓冲区复制到着色器程序可以找到它的某个特殊位置。这是通过启用特定位置的属性数组来完成的。猜猜，Qt 调用`glVertexAttribLocation()`和`glEnableAttribArray()`这里。

顺便说一句：您是否在代码中指定了任何模型视图和投影矩阵？我不确定它们是否是默认设置的。尝试从着色器中删除这些值以进行测试。

添加：

```
glDrawElements(GL_TRIANGLES, numTriangles, GL_UNSIGNED_INT, indices); 
```

第二个参数不是三角形的数量，而是索引的数量，将从索引数组中读取。这里应该是`numTriangles*3`

# fftw - fftw3 正确使用

> ID：13893206
> 
> 赞同：0
> 
> 时间：2012-12-15T14:49:42.103
> 
> 标签：fftw

```
#include <stdio.h>
#include <Windows.h>
#include <string.h>
#include <stdlib.h>
#include "fftw3.h"

int main(void)
{
    FILE *fp;

    int rozmiar_pliku;
    char standard[5] = {0};
    char format[5] = {0};
    int samplerate;

    int k,i;

    fftw_complex in[128];
    fftw_complex out[128];
    fftw_plan p;

    fp = fopen("Kalimba.wav","rb" );

    //printf("%d\n",fp);

    if (fp)
    {
        fread(standard,1,4,fp);
        printf("%s\n",standard);
        printf("RIFF\n");
        if (!strcmp(standard,"RIFF" ))
        {

            fread(&rozmiar_pliku,4,1,fp);

            printf("size: %d\n", rozmiar_pliku);
        }

        fread(format,1,4,fp);

        printf("format: %s\n",format);

        fseek(fp,24,SEEK_SET);

        fread(&samplerate,1,4,fp);

        printf("sample rate: %d\n",samplerate);

        fseek(fp,44,SEEK_SET);

        for(i=0;i<128;++i)
        {
            in[i][0]=getc(fp);
            in[i][1]=in[i][0];

        }

/*
        p = fftw_plan_dft_1d(128, in, out, FFTW_FORWARD, FFTW_ESTIMATE);

        fftw_execute(p);

        for(int j=0;j<128;++j)
            printf("%lf+i*%lf",out[j][0],out[j][1]);

        fftw_destroy_plan(p);
        fftw_free(in);
        fftw_free(out);
*/
    }

    return 0;
} 
```

我正在尝试使用 FFTW3 读取波形文件并执行 FFT。如果我取消注释已注释的部分，则屏幕上不会显示任何内容。如果我留下评论：

```
RIFF
RIFF
size: 61392422
format: WAVE
sample rate: 44100 
```

如果未注释，则不会出现任何内容。我不知道为什么会这样。任何使用 fftw3 都会导致这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:42:08.267

`in`并且`out`是静态声明的数组。尝试传递 &in[0] 和 &out[0] 以匹配`fftw_plan_dft_1d`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-20T13:17:28.683

正如[文档](http://www.fftw.org/fftw3_doc/Complex-One_002dDimensional-DFTs.html)中建议的那样，您应该声明`in`和`out`使用`fftw_malloc`.

> 您可以以任何您喜欢的方式分配它们，但**我们建议使用 fftw_malloc**。

然后，您需要`in`在创建计划后进行初始化。

> **您必须在初始化 input 之前创建计划**，因为 FFTW_MEASURE 会覆盖输入/输出数组。（从技术上讲，FFTW_ESTIMATE 不会触及您的阵列，但**您应该始终首先创建计划以确保**。）

其他一些修改的结果是

```
#include <stdio.h>
#include <stdlib.h>
#include "fftw3.h"

int main(void)
{
  FILE *fp;

  int rozmiar_pliku;
  char standard[5] = {0};
  char format[5] = {0};
  int samplerate;

  int i;

  fftw_complex *in, *out;
  fftw_plan p;

  fp = fopen("audioFile1.wav","rb" );
  if (fp)
  {
    fread(standard,1,4,fp);
    printf("%s\n",standard);
    printf("RIFF\n");
    if (!strcmp(standard,"RIFF" ))
    {
      fread(&rozmiar_pliku,4,1,fp);
      printf("size: %d\n", rozmiar_pliku);
    }
    fread(format,1,4,fp);
    printf("format: %s\n",format);
    fseek(fp,24,SEEK_SET);
    fread(&samplerate,1,4,fp);
    printf("sample rate: %d\n",samplerate);
    fseek(fp,44,SEEK_SET);

    // Allocate in and out buffers using fftw_alloc
    in  = (fftw_complex*) fftw_malloc(sizeof(fftw_complex) * 128);
    out = (fftw_complex*) fftw_malloc(sizeof(fftw_complex) * 128);

    // Create plan before initializing in
    p = fftw_plan_dft_1d(128, in, out, FFTW_FORWARD, FFTW_ESTIMATE);

    // Initialize in after creating plan
    for(i=0;i<128;++i)
    {
      in[i][0]=getc(fp);
      in[i][1]=in[i][0];
    }

    fftw_execute(p);

    for(int j=0;j<128;++j)
      printf("%lf+i*%lf\n",out[j][0],out[j][1]);

    fftw_destroy_plan(p);
    fftw_free(in); fftw_free(out);
  }

  return 0;
} 
```

# c# - 将基本类型（日期、数字）转换为字符串并返回以保存到 C# 中的数据库

> ID：13893210
> 
> 赞同：2
> 
> 时间：2012-12-15T14:49:55.543
> 
> 标签：c#, sql-server, string, datetime, typeconverter

我有一个重复的可配置任务，它接收一个表名和一个列名，然后从该表中获取按指定列排序的行并对它们进行一些处理。最后，它保存 order 列的最后一个值，这样当它再次启动时，它只处理从该点开始的行。

为了保存该信息，我有一个不同的表，其中包含一些识别信息（表名等）和 order 列的最后一个值作为字符串。为了使用这张桌子，我做了类似的事情：

```
public T GetValue<T>(ProgressRecord<T> record) {
    string value = GetValueAsString(record); // this calls a sproc that fetches the value; the record fields are used as a filter
    return value != null ? (T)Convert.ChangeType(value, typeof(T)) : default(T);
}

public void SetValue<T>(ProgressRecord<T> record) {
    string value = Convert.ToString(record.value);
    InnerSetValue(record, value); // this calls a sproc that saves the value; the record fields are used as a filter
} 
```

其中`ProgressRecord`包含识别信息和值`T`

我正在使用`default(T)`，因为如果尚不存在任何值，我将使用该类型的默认值作为起始值来过滤行。

这适用于数字类型，但`DateTime`.

第一个是`Convert.ToString(DateTime)`不保留毫秒信息，我需要它来确保我不会再次处理相同的行（如果他们的时间是 01:23:42.578，但我从 01:23:42.000 过滤，我'将再次获取它们）。

第二个是 default(DateTime) 返回日期 Jan 1st 0001，如果我尝试将该日期发送回以获取日期大于该日期的行，MSSQL 将抱怨该日期超出范围，并且需要1753 年 1 月 1 日之后。

所以我将代码更改为：

```
public T GetValue<T>(ProgressRecord<T> record) {
    string value = GetValueAsString(record); // this calls a sproc that fetches the value; the record fields are used as a filter
    if (value != null) {
        T returnVal = (T)Convert.ChangeType(value, typeof(T));
        if (typeof(T) == typeof(DateTime)) {
            returnVal = (T)Convert.ChangeType(DateTime.ParseExact(value, "yyyy-MM-dd hh:mm:ss.fff"));
        }
        return returnVal;
    }
    T defaultVal = default(T);
    if (typeof(T) == typeof(DateTime)) {
            defaultVal = (T)Convert.ChangeType(SqlDateTime.MinValue.Value, typeof(T));
    }
    return defaultVal;
}

public void SetValue<T>(ProgressRecord<T> record) {
    string value = Convert.ToString(record.value);
    if (typeof(T) == typeof(DateTime)) {
        value = record.value.ToString("yyyy-MM-dd hh:mm:ss.fff");
    }
    InnerSetValue(record, value); // this calls a sproc that inserts/updates the value; the record fields are used as a filter
} 
```

由于 IF，我发现这段代码有点脏。有没有一种更简单的方法来进行这些转换，而无需进行类型检查？是否有任何我错过的系统类知道如何执行此操作：将日期转换为毫秒并返回的字符串，并为空值提供自定义默认值（SQLDateTime.MinValue）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T15:46:51.660

标准`Convert.ToString(DateTime value)`只是调用`value.ToString()`

`DateTime.ToString()`实际上是在打电话

```
DateTimeFormat.Format(this, null, DateTimeFormatInfo.CurrentInfo) 
```

因此，基本上，如果您使用特定的 dtfi 更改文化设置，您可以在其中设置默认格式，最后以毫秒为单位，我认为您可以绕过第一个问题。

至于第二个问题，我不知道是否可以以任何优雅的方式覆盖。您可以在将值更新到数据库之前检查它是否等于`DateTime.MinValue`，或者，不是那么优雅，执行以下代码并希望没有人发现是您做的：

```
typeof(DateTime).GetField ("MinValue").SetValue (typeof(DateTime), new DateTime(1753, 1, 1)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T15:54:21.967

我看到了两种完成任务的方法：

1.  在数据库查询中，您使用四舍五入到秒的日期时间。我的意思是，如果为您设置处理的行的最后一条记录为 01:23:42.578，则您忽略它并处理直到 01:23:42.000 的所有记录。这意味着您将其留给下一个处理。然后将 01:23:42.000 作为最后处理的日期时间值存储在配置信息表中。下次运行处理时，您将获取从 01:23:42.000 开始的所有记录，其中将包括 01:23:42.578 的记录，您应该在上一次运行时获取该记录。
2.  第二种解决方案将涉及使用类型[`Ticks`](http://msdn.microsoft.com/library/system.datetime.ticks.aspx)的属性 `DateTime`。

# android - Cocos2D-x Android：加速cpp编译过程？

> ID：13893218
> 
> 赞同：0
> 
> 时间：2012-12-15T14:50:48.780
> 
> 标签：android, android-ndk, cocos2d-x, cocos2d-android

我对 Cocos2d-x 比较陌生，我正在尝试构建一个针对 iOS 和 Android 设备的项目。使用 Xcode 构建 Cpp 项目（适用于 iOS）非常快，但对于 Android，您必须首先使用 NDK 编译整个项目，它总是重新编译整个 cocos2d 框架，对于我想测试的每个更改，这最多需要 2 分钟在设备上。

我可以以某种方式配置我的 build_native.sh 或 Android.mk 文件以使用已编译的 cocos2d 框架并在 Classes 文件夹中编译我的文件吗？我正在使用版本 cocos2d-2.1beta3-x-2.1.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T07:47:08.617

将此设置放入 Eclipse-> Project->Properties -> C/C++ Build

取消选中使用默认构建命令

构建命令：bash ${workspace_loc:/XYZProjName}/build_native.sh NDK_DEBUG=1 V=1

Makefile 生成应该被禁用....

构建目录：${workspace_loc:/XYZProjName}

现在只需构建项目，它只会重新编译您的项目文件......每当你清理和构建它时，它都会重建 cocos2d-x 框架，据我所知，这在 Xcode 中也是相同的......

每当您更改 cocos2d-x 类中的某些内容时，您需要再次进行清理（这意味着您正在重新编译 libgame.so），这恰好位于文件夹 proj.android/obj/local/armeabi/ .... 此处您应该使用的所有库的位置都会被编译..当您清理这些所有库时会重新编译..

希望你理解这个概念..如果没有..随时问我会尝试解释更多..

# java - 在 MVC 中映射动作时实现的最佳设计模式

> ID：13893220
> 
> 赞同：1
> 
> 时间：2012-12-15T14:50:52.947
> 
> 标签：java, model-view-controller, design-patterns

编写以下案例的最佳实践是什么：

我们有一个控制器，它根据用户采取的路径，采取不同的行动。例如：

如果用户选择路径 /path1/hello 它会打招呼。如果用户选择 /path1/bye?name="Philipp" 它将调用 sayGoodBye() 等。

我在控制器内部编写了一个简单的 switch 语句，但是 IMO 效率不高。考虑到路径通常是字符串，实现这一点的最佳方法是什么。

```
private void takeAction()
    {
    switch (path[1])
    {
    case "hello":
        //sayHello();
        break;
    case "bye":
        //sayBye();
        break;
    case "case3":
        //Blah();
        break;
             ...
    }
} 
```

**更新：**在我的上下文中，路径是动态生成的，这意味着那里没有特定的页面。如果路径是/Amir/，那么将动态生成Amir。因此，正如 Mark Leighton Fisher 所解释的，将它们放入哈希中是相当困难的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T15:11:33.077

您的控制器承担了额外的责任：*URL 路由*。

相反，这应该在执行控制器的方法之前执行。与您的控制器无关。您可以看到的最明显的模式可能是[*前端控制器*](http://martinfowler.com/eaaCatalog/frontController.html)。

至于具体的实现，最简单的方法是创建一个`Router`实例，它`Request`根据用户的输入（包括 URL 本身和其他参数，如`POST`值）生成一个对象。您从该`Request`对象中提取控制器的名称和方法。

此外，将所述`Request`实例作为 的参数提供是合理的`action`，以便此操作可以清楚地访问来自用户输入的其他值。

您可能还会发现这很有[用：DispatcherServlet 的 Spring Framework 文档](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch16s02.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T17:02:46.103

在实际路由中使用散列比使用 Switch 语句更干净、更快捷，尤其是当您有许多路由并且您只测试字符串相等性时。

# javascript - 如何使用 jquery 从 HTML 表中选择特定行？

> ID：13893223
> 
> 赞同：0
> 
> 时间：2012-12-15T14:16:17.203
> 
> 标签：javascript, html, jquery

> **可能重复：**
> [JQuery：如何从表中选择行](https://stackoverflow.com/questions/3585272/jquery-how-to-select-rows-from-a-table)

我想使用 jquery 根据某些条件选择表的特定行。例如，如果一个表有 25 行，每行都有一个复选框列来检查，我想指定一个条件，如果该条件为真，则只应选中复选框，例如，5 行满足该条件，所以只有应检查 5 行。此选择可能取决于表格的其他列。如何使用 jquery 实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T14:59:31.100

```
$( 'tr', table ).each(function () {

    this // refers to the current TR element

    // check if the condition is met for this row
    var conditionMet = ...

    // and set the checked state accordingly 
    $( '.checkbox', this )[0].checked = conditionMet;

}); 
```

where`table`是对您的 TABLE 元素的引用，并且`"checkbox"`是`<input type=checkbox>`每行中元素的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T14:53:12.777

你需要这样的东西

```
var chkbox = $('#yourTableId tr').eq(indexOfRowYouWant).find(':checkbox').attr('checked', true); 
```

# python - Pandas 数据框中值的矢量化查找

> ID：13893227
> 
> 赞同：27
> 
> 时间：2012-12-15T14:51:27.933
> 
> 标签：python, pandas, numpy, vectorization

我有两个熊猫数据框，一个叫做“订单”，另一个叫做“daily_prices”。daily_prices 如下：

```
 AAPL    GOOG     IBM    XOM
2011-01-10  339.44  614.21  142.78  71.57
2011-01-13  342.64  616.69  143.92  73.08
2011-01-26  340.82  616.50  155.74  75.89
2011-02-02  341.29  612.00  157.93  79.46
2011-02-10  351.42  616.44  159.32  79.68
2011-03-03  356.40  609.56  158.73  82.19
2011-05-03  345.14  533.89  167.84  82.00
2011-06-03  340.42  523.08  160.97  78.19
2011-06-10  323.03  509.51  159.14  76.84
2011-08-01  393.26  606.77  176.28  76.67
2011-12-20  392.46  630.37  184.14  79.97 
```

订单如下：

```
 direction  size ticker  prices
2011-01-10       Buy  1500   AAPL  339.44
2011-01-13      Sell  1500   AAPL  342.64
2011-01-13       Buy  4000    IBM  143.92
2011-01-26       Buy  1000   GOOG  616.50
2011-02-02      Sell  4000    XOM   79.46
2011-02-10       Buy  4000    XOM   79.68
2011-03-03      Sell  1000   GOOG  609.56
2011-03-03      Sell  2200    IBM  158.73
2011-06-03      Sell  3300    IBM  160.97
2011-05-03       Buy  1500    IBM  167.84
2011-06-10       Buy  1200   AAPL  323.03
2011-08-01       Buy    55   GOOG  606.77
2011-08-01      Sell    55   GOOG  606.77
2011-12-20      Sell  1200   AAPL  392.46 
```

两个数据框的索引都是 datetime.date。“订单”数据框中的“价格”列是通过使用列表推导循环遍历所有订单并在“每日价格”数据框中查找特定日期的特定代码，然后将该列表作为一列添加到“订单”数据框。我想使用数组操作而不是循环的东西来做到这一点。可以吗？我尝试使用：

daily_prices.ix[日期，代码]

但这会返回两个列表的笛卡尔积矩阵。我希望它只返回指定日期的指定股票价格的列向量。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-12-15T15:47:22.063

使用我们的朋友`lookup`，专为此目的而设计：

```
In [17]: prices
Out[17]: 
              AAPL    GOOG     IBM    XOM
2011-01-10  339.44  614.21  142.78  71.57
2011-01-13  342.64  616.69  143.92  73.08
2011-01-26  340.82  616.50  155.74  75.89
2011-02-02  341.29  612.00  157.93  79.46
2011-02-10  351.42  616.44  159.32  79.68
2011-03-03  356.40  609.56  158.73  82.19
2011-05-03  345.14  533.89  167.84  82.00
2011-06-03  340.42  523.08  160.97  78.19
2011-06-10  323.03  509.51  159.14  76.84
2011-08-01  393.26  606.77  176.28  76.67
2011-12-20  392.46  630.37  184.14  79.97

In [18]: orders
Out[18]: 
                  Date direction  size ticker  prices
0  2011-01-10 00:00:00       Buy  1500   AAPL  339.44
1  2011-01-13 00:00:00      Sell  1500   AAPL  342.64
2  2011-01-13 00:00:00       Buy  4000    IBM  143.92
3  2011-01-26 00:00:00       Buy  1000   GOOG  616.50
4  2011-02-02 00:00:00      Sell  4000    XOM   79.46
5  2011-02-10 00:00:00       Buy  4000    XOM   79.68
6  2011-03-03 00:00:00      Sell  1000   GOOG  609.56
7  2011-03-03 00:00:00      Sell  2200    IBM  158.73
8  2011-06-03 00:00:00      Sell  3300    IBM  160.97
9  2011-05-03 00:00:00       Buy  1500    IBM  167.84
10 2011-06-10 00:00:00       Buy  1200   AAPL  323.03
11 2011-08-01 00:00:00       Buy    55   GOOG  606.77
12 2011-08-01 00:00:00      Sell    55   GOOG  606.77
13 2011-12-20 00:00:00      Sell  1200   AAPL  392.46

In [19]: prices.lookup(orders.Date, orders.ticker)
Out[19]: 
array([ 339.44,  342.64,  143.92,  616.5 ,   79.46,   79.68,  609.56,
        158.73,  160.97,  167.84,  323.03,  606.77,  606.77,  392.46]) 
```

# objective-c - 通过通用方法传递不同的 UIButton。选择器/发送者是答案吗？

> ID：13893228
> 
> 赞同：0
> 
> 时间：2012-12-15T14:51:33.560
> 
> 标签：objective-c, ios, methods, uibutton, selector

我从 Interface Builder 添加了大约 20 个按钮，按下时它们会改变颜色，如下所示：

```
-(IBAction)button1:(id)sender
{
    if(playerTurn == YES)
    {
        button1.backgroundColor = [UIColor redColor];
    }
} 
```

但是为了缩短事情，我似乎可以有一个通用的方法，这样每个按钮在按下时都会运行该方法。就像是：

```
-(IBAction)button1:(id)sender
{
    //Go to method and make this button red
}
-(void)changeColour
{
    if(playerTurn == YES)
    {
        buttonThatWasSent.backgroundColor = [UIColor redColor];
    }
} 
```

不幸的是，我不知道该怎么做。似乎选择器/发件人是答案？但是我没有设法制作任何我找到的教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T14:58:02.327

你非常接近！

```
- (IBAction)myActionWithAnArbitraryName:(UIButton *)sender
{
    if(playerTurn == YES) {
        [sender setBackgroundColor:[UIColor redColor]];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T14:58:38.743

您可以链接单个操作的所有 20 个按钮。

发送者知道哪个按钮被按下，所以直接改变发送者的背景颜色。

```
-(IBAction)changeColour:(id)sender
{
    if (playerTurn == YES)
        sender.backgroundColor = [UIColor redColor];
} 
```

注意：这是未经测试的代码。但我想它应该可以工作，如果他们不尝试这样做：

```
UIButton *button=(UIButton *)sender;
button.backgroundColor = [UIColor redColor]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T15:01:22.840

实际上，您可以对所有按钮使用单个 IBAction，并将发送者转换为 UIButton：

```
- (IBAction)buttonPressed:(id)sender {
    UIButton *button = (UIButton *)sender;

    if (playerTurn == YES) {
        button.backgroundColor = [UIColor redColor];
    }
} 
```

# windows - 使用 vb.net 的 Windows 文件/文件夹权限

> ID：13893232
> 
> 赞同：1
> 
> 时间：2012-12-15T14:52:23.700
> 
> 标签：windows, vb.net, file, permissions

我可以使用给定的代码设置文件/文件夹限制。

```
Imports System.Security.AccessControl

Dim FolderPath As String = "C:\TestingFolder" 'Specify the folder here
Dim UserAccount As String = "MYDOMAIN\someuser" 'Specify the user here

Dim FolderInfo As IO.DirectoryInfo = New IO.DirectoryInfo(FolderPath)
Dim FolderAcl As New DirectorySecurity
FolderAcl.AddAccessRule(New FileSystemAccessRule(UserAccount, FileSystemRights.Modify, InheritanceFlags.ContainerInherit Or InheritanceFlags.ObjectInherit, PropagationFlags.None, AccessControlType.Allow))
FolderAcl.SetAccessRuleProtection(True, False) 'uncomment to remove existing permissions
FolderInfo.SetAccessControl(FolderAcl) 
```

我的目标是使用代码设置权限，只有我的应用程序才能更改对文件/文件夹的读/写访问权限。除了我的 vb.net 程序，没有人可以更改权限。我的目标是编写一个安全应用程序，它将要求密码访问程序，并且程序将能够授予用户访问权限（读/写/修改）。

# c++ - 为什么我得到这个调试断言失败？表达式：列表迭代器不可取消引用

> ID：13893237
> 
> 赞同：2
> 
> 时间：2012-12-15T14:16:42.830
> 
> 标签：c++, assertions, debugging

我在 Bjarne Stroustrup (C++) 的（翻译成荷兰语）书中尝试这个例子：

```
#include <vector>
#include <list>
#include "complex.h"

complex ac[200];
std::vector<complex> vc;
std::list<complex> l;

template<class In, class Out> void Copy(In from, In too_far, Out to) {
    while(from != too_far) { 
            *to = *from;
            ++to;
            ++from;
            }
}

void g(std::vector<complex>& vc , std::list<complex>& lc) {
    Copy(&ac[0], &ac[200], lc.begin());           // generates debug error
    Copy(lc.begin(), lc.end(), vc.begin());       // also generates debug error
}

void f() {
    ac[0] = complex(10,20);
    g(vc, l);
}

int main () {
    f();
} 
```

** 编译和链接成功（0 个错误/警告）**

但在运行时我得到这个错误：

**调试断言失败！**

程序：exe的路径

文件：\program files\ms vs studio 10.0\vc\include\list

线路：207

表达式：列表迭代器不可取消引用

有关您的程序如何导致断言失败的信息，请参阅有关断言的 Visual C++ 文档。（按重试调试应用程序）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T14:56:08.897

以下两个错误：

```
Copy(&ac[0], &ac[200], lc.begin());           // generates debug error
Copy(lc.begin(), lc.end(), vc.begin());       // also generates debug error 
```

您的`Copy()`函数会覆盖从作为第三个参数提供的迭代器开始的元素。因此，目标范围必须有效且足够大以容纳所有被复制的元素。既不满足`lc`也不`vc`满足这一点，因此您的代码的行为是未定义的。

修复代码的一种方法是使用[`std::back_inserter`](http://www.cplusplus.com/reference/iterator/back_inserter/).

# c# - 如何使用 Ninject.Extensions.Logging 在 void Main 中获取 Logger？

> ID：13893239
> 
> 赞同：2
> 
> 时间：2012-12-15T14:53:03.273
> 
> 标签：c#, ninject, nlog, ninject-extensions

我正在使用`Ninject`我的 DI 和`Ninject.Extensions.Logging`（使用 NLog）进行 Logger 注入。我想在程序开始时在我的 Main void 中获取一个 Logger 实例。

我试过这段代码：

```
private static void Main()
{
    var logger = new StandardKernel(new NLogModule()).Get<ILogger>();
} 
```

但我得到一个错误`Error loading module 'Ninject.Extensions.Logging.NLog2.NLogModule' of type NLogModule`。

如何在此方法中获取 Logger 实例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T00:37:56.640

扩展会自动加载。您不能再次手动加载它。只需使用

```
new StandardKernel().Get<ILoggerFactory>().GetCurrentClassLogger(); 
```

# templates - Intellij Idea 模板以黄色突出显示

> ID：13893242
> 
> 赞同：1
> 
> 时间：2012-12-15T14:54:08.127
> 
> 标签：templates, intellij-idea

当我创建一个新的类文件时，它是使用默认模板创建的。为什么它以黄色突出显示？它只是意味着“嘿，看，我是模板！”？为什么它看起来像一些语法/拼写检查的高亮风格？
![模板突出显示](../Images/88f9223a8de79f799e4a2543b1199020.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T15:00:20.620

这意味着“嘿，看，我仍然是**默认**模板”。如果您更改模板，然后创建一个新类，它将不再突出显示为黄色。它将像普通评论一样突出显示。

# database - 值得为重复〜两次的数据库值创建一个独特的表吗？

> ID：13893243
> 
> 赞同：1
> 
> 时间：2012-12-15T14:54:11.903
> 
> 标签：database, sqlite, optimization

我有一个约 60,000 行的静态数据库。有一个特定的列有大约 30,000 个唯一条目。鉴于该比率（某列中的 60,000 行/30,000 个唯一条目），是否值得创建一个包含这些条目的新表，并从主表链接到它？或者这会带来更多的麻烦而不是它的价值？

以更具体的方式提出这个问题：通过将这个字段分离到它自己的表中，我会获得更多的效率吗？

** 更新 **

我们谈论的是一个 VARCHAR(100) 字段，但实际上，我怀疑任何条目都使用了这么多空间——我很可能将其缩减为 VARCHAR(50)。示例条目：“The Gas Patch and Little Canada”和“Kora Temple Masonic Bldg. George Coombs”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T19:25:57.940

如果该字段是一个通常包含大约 30 个字符的 VARCHAR(255)，另一种方法是在主表中存储一个 4 字节整数并使用具有 4 字节整数和 VARCHAR(255) 的第二个表，然后您正在考虑节省一些空间。

旧方案：

```
T1: 30 bytes * 60 K entries = 1800 KiB. 
```

新方案：

```
T1:  4       bytes * 60 K entries =  240 KiB
T2: (4 + 30) bytes * 30 K entries = 1020 KiB 
```

所以，这粗略地节省了 1800 - 1260 = 540 KiB 空间。如果必要时在 T2 中的整数列上建立索引，则会失去更多空间。如果数据的平均长度大于 30 字节，则空间节省会增加。如果重复行的比率增加，则节省会增加。

节省空间是否显着取决于您的上下文。如果您需要多半兆字节的内存，那么您就得到了——如果您确定不需要使用 2 字节整数而不是 4 字节整数（120 + 960 KiB = 1080 KiB；节省 720 KiB）。另一方面，如果您真的没有注意到可用的数 GB 存储中的半兆字节，那么它就变成了一个更实际的问题。维护两个表比较困难，但可以保证每次使用的名称都相同。维护一张表意味着您必须确保正确处理名称对 - 或者，更有可能的是，您忽略了这种可能性，并且最终在应该有对的地方没有对，或者在应该有的地方得到了三胞胎双胞胎。

显然，如果重复的类型是 4 字节整数，则使用两个表不会节省任何东西；这将花费你的空间。

因此，很大程度上取决于您没有告诉我们的内容。类型是一个关键问题。另一个是重复背后的语义。

# wordpress - 更改标题中的 div 内容，具体取决于 Wordpress 中加载的页面

> ID：13893245
> 
> 赞同：0
> 
> 时间：2012-12-15T14:54:42.947
> 
> 标签：wordpress, wordpress-theming

我有一个 div，其中包含一个电话号码。

然后，我有多个区域页面，位置从中发生变化。

如何根据已加载的区域页面以及该页面是否为区域页面来更改标题中的电话号码...

除了区域页面之外，我希望每一页都有一个编号，我想要单独的编号...

我该怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T15:21:41.330

您可以为显示特定部分的页面创建自定义模板或使用 is_page();

[http://codex.wordpress.org/Function_Reference/is_page](http://codex.wordpress.org/Function_Reference/is_page)

可以与页面 id 或 slug 一起使用；

```
if (is_page(42)) {
    // Show something specific to page 42.
} 
```

您可以通过单击 Wordpress Pages 管理菜单中的页面来查看页面 ID，您可以在 url 中看到 id。

```
if (is_page('Contact')) {
    // This uses the slug, but of course the client might change that slug which will break the functionality
} 
```

# java - FileChooser.showOpenDialog 在框架顶部显示默认 java 图标

> ID：13893246
> 
> 赞同：2
> 
> 时间：2012-12-15T14:54:51.857
> 
> 标签：java, swing, jfilechooser

我在我的 Swing 应用程序中创建了一个 FileChooser。当我单击打开时，打开对话框在框架顶部显示默认图像（java），而不是我为 JFrame 设置的自定义图像。

```
 Sample Code:

         JFileChooser filec=new JFileChooser();
         int fileval=filec.showOpenDialog(myjframe); 
```

我发现有时它工作正常。请帮助我。

![在此处输入图像描述](../Images/f484b4b199b4463bb942999cdcd32d9e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T07:14:59.673

它似乎在这里与这个 SSCCE 可靠地工作。这段代码在你所在的地方可靠地工作吗？

![带图标的文件选择器](../Images/265a5e532b2336105fe93966fcd986f7.png)

```
import java.awt.*;
import java.awt.image.BufferedImage;
import javax.swing.*;

public class FileChooserIcon {

    public static void main(String[] args) {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                Image image = 
                    new BufferedImage(32,32,BufferedImage.TYPE_INT_RGB);

                JFrame f = new JFrame("Demo");
                f.setIconImage(image);
                f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                // See http://stackoverflow.com/a/7143398/418556 for demo.
                f.setLocationByPlatform(true);

                f.pack();
                f.setSize(600,400);
                f.setVisible(true);

                JFileChooser chooser = new JFileChooser();
                chooser.showOpenDialog(f);
            }
        };
        SwingUtilities.invokeLater(r);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T18:58:04.630

您可以在将反映在对话框中的父级中设置图像`JFrame`：`JFileChooser`

```
Image image = ImageIO.read(getClass().getResource("MyImage.png"));
myjframe.setIconImage(image); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-29T20:23:24.760

JFrame f = new JFrame("编辑配置文件");

//使用前两种方法得到错误：非静态方法getClass()不能从静态上下文中引用

```
//(1) Image image = ImageIO.read(getClass().getResource("images/ctx.Icon"));
//f.setIconImage(image);

//(2) f.setIconImage(Toolkit.getDefaultToolkit().getImage(getClass().getResource("images/ctx.PNG")));
//(3) Use third way. It works for me
f.setIconImage(new ImageIcon("images/ctx.PNG").getImage()); 
```

# php - 将几乎所有包含数字的 url 重定向到一个函数 - Kohana3 框架

> ID：13893251
> 
> 赞同：0
> 
> 时间：2012-12-15T14:55:47.393
> 
> 标签：php, kohana, url-routing

我在 Kohana3 框架的控制器中有一个动作，一切正常。

当我在`myconroller/myaction/5`浏览器中输入 url 时，它会转到正确的`action_myaction()`，并且 param`5`可以访问为`$this->request->param('id);`

**我的问题是**：如何捕获所有看起来像 `myconroller/myaction-XXX/5` （XXX 是从 1 到 999 的任何数字）要访问的URL `action_myaction()`？

如果我只有几个这种类型的 URL，我会创建几个通过将 XXX 作为参数传递来调用函数的操作。但是如果我有多达 999 个可能的有效 URL 怎么办？

我应该以适当的方式修改 bootstrap.php 吗？如何？或者，还有另一种选择（如果存在）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T18:36:46.083

这是我的问题的答案。`bootstrap.php`在默认路由之前添加路由规则：

```
Route::set('xxxroute', 'myconroller/myaction-<param1>/<id>'
array(
    'param1' =>'\d+',
    'id' =>'\d+'
))
->defaults(array(
    'controller' =>'myconroller',
    'action' =>'myaction',
)); 
```

这种方式`param1`是一个数字（否则它会转到默认路由），它会直接转到 action `myaction`。

可以通过以下方式找到参数：

```
$id=$this->request->param('id');
$param1=$this->request->param('param1'); 
```

希望这对其他人有帮助。

# android - 当我单击 gridview 时发布指向视频活动的链接

> ID：13893252
> 
> 赞同：0
> 
> 时间：2012-12-15T14:55:53.950
> 
> 标签：android, gridview, android-intent, android-videoview

我有一个视频活动，视频从 Raw 文件夹加载。

当我单击一个项目时，我想在我的网格视图中发送一个视频链接到视频活动

我可以将此地址添加到 gridview 中的每个图标吗？

我的视频名称像这样 one.3gp two.3gp three.3gp ....

*主.java* *

```
GridView gridview = (GridView) findViewById(R.id.gridview);
    gridview.setAdapter(new ImageAdapter(this));

    gridview.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {

            // Sending image id to FullScreenActivity
            Intent i = new Intent(getApplicationContext(), video.class);
            // passing array index
            i.putExtra("id", position);
            startActivity(i);
        }

    }); 
```

**图像适配器.java**

```
public class ImageAdapter extends BaseAdapter {
private Context mContext;

public ImageAdapter(Context c) {
    mContext = c;
}

public int getCount() {
    return mThumbIds.length;
}

public Object getItem(int position) {
    return null;
}

public long getItemId(int position) {
    return 0;
}

// create a new ImageView for each item referenced by the Adapter
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView;
    if (convertView == null) {  // if it's not recycled, initialize some attributes
        imageView = new ImageView(mContext);
        imageView.setLayoutParams(new GridView.LayoutParams(120, 120));
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setPadding(8, 8, 8, 8);
    } else {
        imageView = (ImageView) convertView;
    }

    imageView.setImageResource(mThumbIds[position]);
    return imageView;
}

// references to our images
public Integer[] mThumbIds = {
        R.drawable.sample_2, R.drawable.sample_2,
        R.drawable.sample_2, R.drawable.sample_2,
        R.drawable.sample_2, R.drawable.sample_2,
        R.drawable.sample_2, R.drawable.sample_2,
        R.drawable.sample_2, R.drawable.sample_2,
        R.drawable.sample_2, R.drawable.sample_2,
        R.drawable.sample_2, R.drawable.sample_2,
        R.drawable.sample_2, R.drawable.sample_2,
        R.drawable.sample_2, R.drawable.sample_2,
        R.drawable.sample_2, R.drawable.sample_2,
        R.drawable.sample_2, R.drawable.sample_2,
        R.drawable.sample_2, R.drawable.sample_2
}; 
```

}

和**video.java**

```
add = getIntent().getStringExtra("id");
    VideoView myvid = (VideoView) findViewById(R.id.videoview);

    myvid.setVideoURI(Uri.parse("android.resource://" + getPackageName() +"/"+R.raw.sigarintro));
    myvid.setMediaController(new MediaController(this));
    myvid.requestFocus();

    myvid.start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T15:15:07.090

不知道是什么问题，但如果我理解正确：我的活动包含两个片段，如果我想从我的活动中获取一些变量/值到我的片段，我只需输入片段：

```
String currentPath = ((MainActivity)getActivity()).currentPath; 
```

我认为这个线程可能相似...... [链接](https://stackoverflow.com/questions/5852677/how-can-i-pass-values-between-activities-on-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T15:20:09.147

```
path = "your path";

mVideoView.setVideoPath(path);
myvid.setMediaController(new MediaController(this));
myvid.requestFocus();

myvid.start(); 
```

# javascript - 跳转到 iframe 中的锚点

> ID：13893256
> 
> 赞同：5
> 
> 时间：2012-12-15T14:56:43.327
> 
> 标签：javascript, html, scroll

情况：

第一：id*为 miframe的***iframe**，显示一个带有名为*suchen*的锚点的站点，即

 **```
<div id="suchen"></div>. 
```

第二。父框架。

目标：在父框架内创建一个链接，看起来像

```
<a class="LINK0" title="" href="javascript:springen('suchen');">w/e</a> 
```

使**iframe**中的内容滚动到锚点*suchen*。我的做法。

```
function springen(anker) { 
    var childWindow =  document.getElementById("miframe").contentWindow;

    // this should emulate a click on the ptAnchor DIV's child A HREF.
    //childWindow.document.getElementById(anker).firstChild.click();
    //childWindow.document.getElementById(anker).scrollIntoView();
    // alternatively, this will simply scroll the child window to the top-left corner
    //childWindow.scrollTo(0,200);
} 
```

`childWindow.scrollTo(0,200);`到目前为止，该滚动发生在 200 处。但我需要滚动到锚点，无论它在**iframe**中的哪个位置。想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-15T15:52:50.777

通常你会使用类似的链接`<a href="#your_anchor_name_or_id">Go to the anchor</a>`。如果您想使用 JavaScript 执行此操作，您可以更改`window.location.hash`. 以下代码应在框架内执行此操作：

```
document.getElementById("the_id_of_your_iframe").contentWindow.location.hash = "your_anchor_name_or_id"; 
```

如果您不想更改哈希值，[MDN 上有一个示例](https://developer.mozilla.org/en-US/docs/DOM/window.location#Example_6_Using_bookmarks_without_changing_the_hash_property)。您可以将其修改为 iframe。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T15:12:07.000

以下代码应将 iframe 滚动到锚点的位置：

```
function springen(anker) { 
    var childWindow =  document.getElementById("miframe").contentWindow;
    childWindow.scrollTo(0,childWindow.document.getElementById('suchen').offsetTop);
} 
```

**编辑：**

JSFiddle：http: [//jsfiddle.net/pkvhw/6/](http://jsfiddle.net/pkvhw/6/)**

# java - 指向属性文件中的文件夹和文件的更好方法？

> ID：13893258
> 
> 赞同：0
> 
> 时间：2012-12-15T14:56:55.413
> 
> 标签：java, design-patterns, properties

我想知道是否有更好的方法在属性文件中指向 PATH 。考虑以下代码：

```
public class Properties
{ 
     //MIKE
     public final static String PATH_TO_FILE_A = "C:\\programmer_MIKE\fileA.txt";
     public final static String PATH_TO_FILE_B = "C:\\programmer_MIKE\fileB.txt";

     //BILL
     //public final static String PATH_TO_FILE_A = "/Users/BILL/Desktop/fileA.txt";
     //public final static String PATH_TO_FILE_B = "/Users/BILL/Desktop/fileB.txt";
} 
```

当任何开发人员需要调用 FILE_A 时，他只需执行以下操作：

```
File file = new File(Properties.PATH_TO_FILE_A); 
```

如果 BILL 将 MIKE 的 PATH_TO_FILE_A 注释掉，这对他来说没问题。

问：有更好的设计吗？如果 BILL 提交了包括属性文件在内的工作 - 他会给 MIKE 带来问题（不用担心，他稍后会得到一杯拿铁咖啡）。

*   文件很大（2-4Gb），我们不想把它们放在我们的存储库（svn）中，有时只有临时文件夹来创建 PDF，所以我们不想把它们放在“./docs “ 小路。

感谢您的任何指示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T15:35:15.100

如果出于某种原因你真的必须有硬编码的路径，那么你可以将它们存储在某种由用户名索引的地图中。就像是：

```
public class Properties {

    private static Map<String, DeveloperPaths> properties = create();

    private static Map<String, DeveloperPaths> create() {

        Map<String, DeveloperPaths> properties = new HashMap<String, DeveloperPaths>();

        properties.put("mike", new DeveloperPaths(
                "C:\\programmer_MIKE\fileA.txt", 
                "C:\\programmer_MIKE\fileB.txt")
                );

        properties.put("bill", new DeveloperPaths(
                "/Users/BILL/Desktop/fileA.txt", 
                "/Users/BILL/Desktop/fileB.txt")
                );

        return properties;
    }

    public static File FileA()
    {
        String user = System.getProperty("user.name");
        return properties.get(user).fileA;
    }

    public static File FileB()
    {
        String user = System.getProperty("user.name");
        return properties.get(user).fileB;
    }

}

 class DeveloperPaths {
    public File fileA;
    public File fileB;

    public DeveloperPaths(String pathA, String pathB) {
        fileA = new File(pathA);
        fileB = new File(pathB);
    }
} 
```

然后，无论开发人员如何，访问每个路径的代码都是相同的，例如：

```
File myFile = Properties.fileA(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-17T13:34:12.600

通常路径是可配置的实体，应该存储在属性文件中。

属性文件在 java 中有内置支持，它使用 Properties 对象来存储该信息。

您可以在应用程序的启动或 init（或类似）方法中读取属性文件，并从属性文件中读取属性。这将使您的配置动态化，任何人都可以更改它。

您可以创建一个静态方法并在启动时调用它，例如：

```
import java.io.IOException;
import java.io.InputStream;
import java.util.Properties;

public class GetProperties {
    public static Properties prop = new Properties();

    public static void init() {

        InputStream inputStream = GetProperties.class.getClassLoader().getResourceAsStream("application.properties");
        try {
            prop.load(inputStream);
        } catch (IOException e) {
            e.printStackTrace();
        }       
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T15:02:46.593

这样的事情应该在外部配置和/或通过参数、系统参数或环境变量传入。或者，您可以使用 DI/IoC，但是当没有附加行为时，IMO 配置值就足够了。

有一个硬编码的默认值很好，但是这样的东西不属于代码。

# java - Android 计费 v3 - 无签名

> ID：13893259
> 
> 赞同：13
> 
> 时间：2012-12-15T14:56:58.790
> 
> 标签：java, android, in-app-billing

我想要的是？检索所有购买的商品后，我需要在服务器上验证购买，我想处理从应用内支付收到的签名和签名数据。

首先，我使用了应用内计费 v2，每次使用我的开发人员帐户时，我都会为静态测试 sku 获得正确的签名和签名数据`android.test.purchased`。

我切换到新的计费 v3 是因为它看起来非常好实现，但是我不再得到任何签名。

我已将我的 APK 的早期版本上传到 Google（因为尚未完成，所以从未发布过），我还添加了一个有效的应用内产品以供进一步测试。

APK 的上传时间是昨天晚上 10:00，所以我想我也等得够久了。

我试过什么？我已经安装了不同版本的应用程序：

*   带有我自己添加的“活动”应用内产品的未签名 apk => 没有签名
*   带有 sku 的未签名 apk `android.test.purchased`=> 无签名
*   使用我自己添加的“活动”应用内产品签名的 apk => 没有签名
*   使用 sku 签名的 apk `android.test.purchased`=> 没有签名

这 4 个“应用程序状态”我尝试了我的开发者手机（我的主要 Google 帐户与开发者控制台帐户是同一用户）和在设置另一部手机时使用测试帐户，测试帐户也放置在我的帐户设置下“测试帐户”。

嗯，现在我不知道如何获得我的签名了。我想我会得到一个活动应用程序 + 活动应用程序内产品的签名，因为付款过程有效（adb logcat 显示我购买了“Android.test.purchased”）我自己创建的应用程序内产品我也不能测试，因为如果我使用我的开发者帐户，Play 商店会告诉我“无法购买，已拥有”，并且使用我的测试帐户时出现错误“此产品不适用于您的帐户”。

你有解决我的问题的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T06:06:54.390

我在 V3 中发现测试产品不返回任何签名数据，但如果您使用发布密钥对应用程序进行签名并完成实际产品的购买流程，您确实会获得签名数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T19:08:15.253

您不再获得测试购买的签名 (android.test.*)。我潜入并使用我的真实产品将我的应用程序上传到市场（只是没有发布）。

低调的签名开始被退回！当数据包含 android.test.* 项目 ID 时，我建议修改您正在使用的任何服务器端验证以跳过签名检查。

注意：关于上述内容的重要一点是：“使用我的真实产品”。

# php - PHP 规范重定向

> ID：13893261
> 
> 赞同：-1
> 
> 时间：2012-12-15T14:57:07.957
> 
> 标签：php, http-status-code-301, http-redirect

我正在尝试从此网址进行规范重定向

www.mysite.com/page.php?id=1&title=aaa

对此：www.mysite.com/1_aaa

我写了这个函数：

```
function canonicalRedirect($url)
{

    if (strtoupper($_SERVER['REQUEST_METHOD']) == 'GET')
    {
        $canonical = $url;
        if (!preg_match('/'.str_replace('/','\/',$canonical).'/', $_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']))
        {
            header('HTTP/1.0 301 Moved');
            header('Cache-Control: no-cache');
            header("Location: $canonical");
        }
    }
} 
```

在 page.php 我把这段代码：

```
canonicalRedirect($url); 
```

从 MySQL 查询中检索 $url 变量。但是，当我尝试运行它时，出现此错误（我使用的是 Firefox）：页面未正确重定向

我在想页面是自动重定向的，但我该如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T15:03:45.830

该变量`$canonicalURL`未在您的函数中定义，导致重定向的位置为空

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-18T10:41:26.987

最后我设法解决了我的问题。我像这样重写了我的函数：

```
function canonicalRedirect($url)
{
            //Check that there is not query string in the url
    if(preg_match('/\?/', $_SERVER["REQUEST_URI"])) {
        header('HTTP/1.0 301 Moved');
        header('Cache-Control: no-cache');
        header("Location: $url");
    }   
} 
```

然后在 page.php 代码中我写了这个：

```
 // code to retrieve the canonical url from MySQL
 // $row is the array with the url data and $canonicalurl is obviously the canonical url

if($_GET['title'] != $row['url_title']) {

  header("HTTP/1.1 301 Moved");
  header('Status: 301 Moved Permanently', true);
  header("Location: ".$canonicalurl."",TRUE,301);
}
else {
}

canonicalRedirect($canonicalurl); 
```

再见！

# css - 可折叠下拉菜单 - 为处于活动状态的菜单设置背景？

> ID：13893264
> 
> 赞同：0
> 
> 时间：2012-12-15T14:57:26.863
> 
> 标签：css

首先，请看[一下这只](http://jsfiddle.net/its_me/GxbBs/)显示菜单+代码的笔（[在此处预览菜单](http://jsfiddle.net/its_me/GxbBs/embedded/result/)）。

**切入要点：**在您看到的导航栏中，单击“频道”菜单会显示菜单项滑出。问题是，菜单的背景并不代表它的活动状态（即`#fff`背景和`#222`颜色）。

当鼠标悬停在菜单上时设置背景颜色很容易。但这个很棘手。我确实尝试过，`:active`选择器无济于事。有任何想法吗？

**截图：**

![没有鼠标悬停截图](../Images/3c841c0e31f2b1e64dcb1cde791cdea7.png)

![鼠标悬停菜单截图](../Images/5883dd98ac921a87c0b093174249d3a3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T15:55:48.253

因为似乎使用 jQuery 添加/删除类是唯一的方法，所以我继续使用它。这是我使用的代码。

```
jQuery(document).ready(function($){
  $('.menu-item > a').click(function(){
    $(this).toggleClass('selected');
  });
}); 
```

该代码在`a`具有`.menu-item`类（`li`在我的情况下）的元素的下一级找到链接元素，并将类添加/删除`.selected`到链接元素。

这是[原始笔](http://jsfiddle.net/its_me/GxbBs/)[的一个叉子](http://jsfiddle.net/its_me/TzW3m/)，菜单按我的意图运行。[您可以在此处](http://jsfiddle.net/its_me/TzW3m/embedded/result/)预览新的功能菜单。

***（完全归功于[此问题中提供的代码。](https://stackoverflow.com/q/7077673/1071413)[官方 jQuery 文档](http://api.jquery.com/toggleClass/)中的更多信息。）***

**更新：**您可能会发现[这个答案](https://stackoverflow.com/a/10919473/1071413)非常有帮助（更好、更简单的解决方案）。

示例代码：

```
jQuery(document).ready(function($){
    $('.collapse').on('show hide', function () {
        $(this).siblings("a").toggleClass('selected'); 
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T15:13:11.003

菜单打开后，您可以向 li 添加一个类，然后再次将其删除。

顺便说一句：`:active`在您单击它的那一刻起作用。

# php - PHP 如何知道 .php 文件的编码？

> ID：13893265
> 
> 赞同：1
> 
> 时间：2012-12-15T14:57:25.873
> 
> 标签：php, encoding, interpreter

PHP 如何知道它所解释的 .php 文件的编码？

我的意思是 .php 文件可以编码为例如 UTF-8 或 CP 1252。这会影响例如字符串文字。

php.ini 中是否有一项设置？或者 PHP 是否尝试自动确定编码（例如，如果没有有效的 UTF-8 则假设 CP 1252 ...）？

谢谢你的解释！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T15:10:24.443

PHP 源代码不对源编码做任何假设。一切都被视为二进制。这意味着如果您的编辑器将文件保存为 CP-1252（我当然希望不会），您回显的字符串也是 CP-1252。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T15:16:33.800

文件的编码与其中的字符串文字几乎没有关系。就 PHP 而言，字符串只是一个字节序列，不会存储更多数据。如果您在 iso-8859-15 文件中包含 utf-8 字符串，它仍然是 utf-8 字符串的字节。由于这些只是字节，您可以在同一文件中的字符串中自由混合不同的编码（尽管它们在任何编辑器中看起来都很奇怪）。

您可能不是要定义文件的编码，而只是要如何处理和输出字符串。`default_charset`您可以使用ini-setting 将其输出的内容定义为标题（这很可能是您想要的） ，并且内部`mb_`函数 listen `mbstring.internal_encoding`。

请注意，`zend.multibyte`应该能够实际扫描与普通扫描仪不兼容的不同编码的文件（例如 CP936、Big5、CP949、Shift_JIS），您可以在 ini 设置和帮助中进行配置`declare(encoding='name')`，但我非常怀疑这就是你要找的。我还没有测试过这个功能，而且它的文档也不存在。

# jquery - jquery中转不一致

> ID：13893267
> 
> 赞同：1
> 
> 时间：2012-12-15T14:57:36.040
> 
> 标签：jquery, transition, jquery-transit

我把这个例子放在一起来展示我在使用 jquery 传输时遇到的问题。我想要发生的是让 UL 看起来像是在无限上升。

你会注意到，每次单击“向上”按钮时，它都会移动 146 像素（一里的高度）。当它到达 ul 的末尾时，应该将 ul 设置回开头，然后使用以下命令移动 146px：

```
$('.test').css({y:ulHeight}).delay(8).transition({y:'+=146px'}); 
```

根据 jquery transit 的说法，在 css 部分完成之前，它的转换部分不应该执行，但它只有大约 10% 的时间工作。单击向上按钮之间的时间越长，效果就越好。

我把延迟放在那里希望它会有所帮助，但似乎没有。如果我在那里放了很长的延迟，它会起作用，但是会有一个明显的延迟，看起来很糟糕。

这是一个错误还是我做错了什么？

[http://jsfiddle.net/livinzlife/RMKQQ/](http://jsfiddle.net/livinzlife/RMKQQ/)

# dependency-injection - Ninject : 构造函数参数

> ID：13893268
> 
> 赞同：5
> 
> 时间：2012-12-15T14:57:37.707
> 
> 标签：dependency-injection, asp.net-mvc-4, ninject

我将 Ninject 与 ASP.NET MVC 4 一起使用。我正在使用存储库并希望进行构造函数注入以将存储库传递给其中一个控制器。

这是我的存储库界面：

```
public interface IRepository<T> where T : TableServiceEntity
{
    void Add(T item);
    void Delete(T item);
    void Update(T item);
    IEnumerable<T> Find(params Specification<T>[] specifications);
    IEnumerable<T> RetrieveAll();
    void SaveChanges();
} 
```

下面`AzureTableStorageRepository`是一个实现`IRepository<T>`：

```
public class AzureTableRepository<T> : IRepository<T> where T : TableServiceEntity
{
    private readonly string _tableName;
    private readonly TableServiceContext _dataContext;

    private CloudStorageAccount _storageAccount;
    private CloudTableClient _tableClient;

    public AzureTableRepository(string tableName)
    {
        // Create an instance of a Windows Azure Storage account
        _storageAccount = CloudStorageAccount.Parse(ConfigurationManager.ConnectionStrings["StorageConnectionString"].ConnectionString);

        _tableClient = _storageAccount.CreateCloudTableClient();
        _tableClient.CreateTableIfNotExist(tableName);
        _dataContext = _tableClient.GetDataServiceContext();
        _tableName = tableName;
    } 
```

请注意所需的 tableName 参数，因为我使用通用表存储库将数据持久保存到 Azure。

最后我有以下控制器。

```
public class CategoriesController : ApiController
{
    static IRepository<Category> _repository;

    public CategoriesController(IRepository<Category> repository)
    {
        if (repository == null)
        {
            throw new ArgumentNullException("repository");
        }

        _repository = repository;
    } 
```

现在我想将一个存储库注入到控制器中。所以我创建了一个包含绑定的模块：

```
/// <summary>
/// Ninject module to handle dependency injection of repositories
/// </summary>
public class RepositoryNinjectModule : NinjectModule
{
    public override void Load()
    {
        Bind<IRepository<Category>>().To<AzureTableRepository<Category>>();
    }
} 
```

模块的加载在`NinjectWebCommon.cs`

```
/// <summary>
    /// Creates the kernel that will manage your application.
    /// </summary>
    /// <returns>The created kernel.</returns>
    private static IKernel CreateKernel()
    {
        var kernel = new StandardKernel();
        kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
        kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();

        RegisterServices(kernel);
        return kernel;
    }

    /// <summary>
    /// Load your modules or register your services here!
    /// </summary>
    /// <param name="kernel">The kernel.</param>
    private static void RegisterServices(IKernel kernel)
    {
        // Load the module that contains the binding
        kernel.Load(new RepositoryNinjectModule());

        // Set resolver needed to use Ninject with MVC4 Web API
        GlobalConfiguration.Configuration.DependencyResolver = new NinjectResolver(kernel);
    } 
```

`DependencyResolver`是因为 Ninject 的`DependencyResolver`实现而创建的`System.Web.Mvc.IDependencyResolver`，并且无法将其分配给`GlobalConfiguration.Configuration`WebApi 应用程序。

所以有了这一切，Ninject 部分实际上是在 Controller 中注入正确的类型，但 Ninject 不能在`AzureTableRepository`.

在这种情况下我怎么能做到这一点？我查阅了很多文章和 ninject 文档来了解如何使用参数，但我似乎无法让它工作。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-17T20:59:38.220

我会使用`WithConstructorArgument()`类似的方法...

```
Bind<IRepository<Category>>().To<AzureTableRepository<Category>>()
    .WithConstructorArgument("tableName", "categories"); 
```

存储库设计的其余部分可能是另一个问题。恕我直言，在演员中创建一张桌子或做任何繁重的工作似乎是一个很大的禁忌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T01:41:20.787

与此同时，我一直在与 Providers 一起玩，试图做到这一点，它似乎奏效了。

我不知道这是个好主意还是有点过头了，但这是我所做的：我创建了一个通用提供程序类：

```
public abstract class NinjectProvider<T> : IProvider
{
    public virtual Type Type { get; set; }
    protected abstract T CreateInstance(IContext context);

    public object Create(IContext context)
    {
        throw new NotImplementedException();
    }

    object IProvider.Create(IContext context)
    {
        throw new NotImplementedException();
    }

    Type IProvider.Type
    {
        get { throw new NotImplementedException(); }
    }
} 
```

然后我在 AzureTableRepositoryProvider 中实现了那个。（T 支持为多个实体类型使用相同的存储库。）

```
public class AzureTableRepositoryProvider<T> : Provider<AzureTableRepository<T>> where T : TableServiceEntity
{
    protected override AzureTableRepository<T> CreateInstance(IContext context)
    {
        string tableName = "";

        if (typeof(T).Name == typeof(Category).Name)
        {
            // TODO Get the table names from a resource
            tableName = "categories";
        }
        // Here other types will be addedd as needed

        AzureTableRepository<T> azureTableRepository = new AzureTableRepository<T>(tableName);

        return azureTableRepository;
    }
} 
```

通过使用此提供程序，我可以传入正确的表名以供存储库使用。但对我来说，还有两个问题：

1.  这是一种好的做法还是我们可以做的事情更简单？
2.  在 NinjectProvider 类中，我有两个 notImplementedException 案例。我该如何解决这些？我使用了以下链接中的示例代码，但这不起作用，因为 Provider 是抽象的，并且代码没有 create 方法的主体...[在此处输入链接描述](https://github.com/ninject/ninject/wiki/Providers,-Factory-Methods-and-the-Activation-Context)

# php - jQuery快速鼠标移动mouseleave事件在前一个事件完成之前触发

> ID：13893271
> 
> 赞同：0
> 
> 时间：2012-12-15T14:58:08.470
> 
> 标签：php, jquery, ajax

如果用户将鼠标移到表格单元格上，则下拉框将 html 替换为通过 post 调用加载的数据。如果用户的鼠标移动不是太快，这很好用，但如果太快，html 不会更新，因此当用户将鼠标移回 html 时，它是不正确的。

```
$(".edit_dropdown").bind('mouseenter', function () {
$(this).unbind('mouseenter');
var a = $.trim($(this).html());
var id = $(this).attr('id');

$(this).html("<span id='s-" + id + "'></span>");
$.post('save/dropdown.php', {
    id: id,
    a: a
}, function (data) {
    $("#s-" + id).html(data);

    $(".edit_dropdown").bind('mouseleave', function () {
        var id = $(this).attr('id');
        var a = $("#e-" + id).val();
        var dir = $(this).attr('class');
        $(this).html(a);
        $(this).bind('mouseenter', function () {
            $(this).unbind('mouseenter');
            var a = $.trim($(this).html());
            var id = $(this).attr('id');
            $(this).html("<span id='s-" + id + "'></span>");
            $.post('save/dropdown.php', {
                id: id,
                a: a
            }, function (data) {
                $("#s-" + id).html(data);
            });
        });

    });
});
}); 
```

html

```
<tr>
<td>customer county</td>
<td class="edit_dropdown" id="customer-cust_s_county"><?php echo $row['cust_s_county']; ?></td>
</tr> 
```

$.post 文件返回英国县的列表，如果县名与 html 匹配，则返回该县作为选定选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T15:53:38.123

出现此问题的原因是 mouseleave 处理程序仅用于响应对 mouseenter 处理程序的异步响应。

您应该寻找不涉及分离和重新附加处理程序的更简单的整体代码结构。

应该可以编写两个永久连接的处理程序，如下所示：

```
$(".edit_dropdown").on('mouseenter', function () {
    //Perform all mouseenter actions here.
    //If necessary, test for different states and branch as required.
}).on('mouseleave', function () {
    //Perform all mouseleave actions here.
    //If necessary, test for different states and branch as required.
}); 
```

另一点：由于县列表是静态的，您可以将其作为页面原始 HTML 的一部分提供一次。然后，您只需要返回要选择的县的名称或 ID，而不是重复返回整个列表。

# android - 卸载包

> ID：13893277
> 
> 赞同：1
> 
> 时间：2012-12-15T14:58:46.310
> 
> 标签：android, uninstallation

我想自行卸载我的应用程序，但它在 SerialVersionUID 上抛出 NullPointerException 不知道这里有什么问题？

```
public void UnInstallApplication() throws NameNotFoundException 
{
    Intent intent = new Intent(Intent.ACTION_DELETE, Uri.fromParts("package",
            getPackageManager().getPackageInfo("com.XXX.XXX", 0).packageName,null));
            startActivity(intent);
} 
```

或者我在下面使用了这一行（在函数中插入了包名）但结果相同！

```
Intent uninstallIntent = new Intent(Intent.ACTION_DELETE);
    uninstallIntent.setData(Uri.parse("package:" + packagename));
    startActivity(uninstallIntent); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T15:13:11.117

使用此代码：

```
Uri packageURI = Uri.parse("package:your.packge.name");
Intent uninstallIntent = new Intent(Intent.ACTION_DELETE, packageURI);
startActivity(uninstallIntent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T17:50:28.583

第三方应用程序无法以编程方式安装或卸载任何其他软件包，这对 Android 来说是一个安全风险。但是，第 3 方应用程序可以要求 Android 操作系统使用意图安装或卸载包，这个问题应该提供更完整的信息：

[以编程方式安装/卸载 APK（PackageManager 与 Intents）](https://stackoverflow.com/questions/6813322/install-uninstall-apks-programmatically-packagemanager-vs-intents)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T05:17:51.667

我的错误是我在一个扩展 AsyncTask 的类中的 doinbackground 上运行的函数上调用了我的卸载方法，所以我更改了调用方法，它提示我卸载我的应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-02T09:49:28.867

#1 答案非常接近正确答案。

这些代码由我最近的应用程序验证：

```
int REQUEST_UNINSTALL = 1;

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
  super.onActivityResult(requestCode, resultCode, data);
  if (requestCode == REQUEST_UNINSTALL) {
  // 0 means success, other means failed.
  Log.d(TAG, "got result of uninstall: " + resultCode);
  }
}

void uninstallPackage() {
    Uri packageURI = Uri.parse("package:" + "com.android.xxxx");
    Intent uninstallIntent = new Intent(Intent.ACTION_UNINSTALL_PACKAGE, packageURI);
    startActivityForResult(uninstallIntent, REQUEST_UNINSTALL);
} 
```

将`onActivityResult`获得卸载结果，卸载包将提示系统对话框询问用户是否删除包。

# drop-down-menu - 如何在 js 单独文件中使用 onchange 事件？

> ID：13893278
> 
> 赞同：1
> 
> 时间：2012-12-15T14:58:44.867
> 
> 标签：drop-down-menu

这是我的选择框。我想知道我是否想将此选择框用于 onchange 事件，那么场景是什么或我在上面写的代码是什么。

```
<select class="sortable" id="sorter">
       <option value="A-Z" class="asc">A-Z</option>
       <option value="Z-A" class="desc">Z-A</option>
  </select> 
```

这是我的 js 文件。请告诉我希望我为调用此选择框的 onchange 事件所做的更改。提前致谢。

```
var table=function(){
    function sorter(n){
        this.n=n; this.t; this.b; this.r; this.d; this.p; this.w; this.a=[]; this.l=0
    }
    sorter.prototype.init=function(t,f){
        this.t=document.getElementById(t);
        this.b=this.t.getElementsByTagName('tbody')[0];
        this.r=this.b.rows; var l=this.r.length;
        for(var i=0;i<l;i++){
            if(i==0){
                var c=this.r[i].cells; this.w=c.length;
                for(var x=0;x<this.w;x++){
                    if(c[x].className!='nosort'){
                        c[x].className='head';
                        c[x].onchange=new Function(this.n+'.work(this.cellIndex)')
                    }
                }
            }else{
                this.a[i-1]={}; this.l++;
            }
        }
        if(f!=null){
            var a=new Function(this.n+'.work('+f+')'); a()
        }
    }
    sorter.prototype.work=function(y){
        this.b=this.t.getElementsByTagName('tbody')[0]; this.r=this.b.rows;
        var x=this.r[0].cells[y],i;
        for(i=0;i<this.l;i++){
            this.a[i].o=i+1; var v=this.r[i+1].cells[y].firstChild;
            this.a[i].value=(v!=null)?v.nodeValue:''
        }
        for(i=0;i<this.w;i++){
            var c=this.r[0].cells[i];
            if(c.className!='nosort'){c.className='head'}
        }
        if(this.p==y){
            this.a.reverse(); x.className=(this.d)?'asc':'desc';
            this.d=(this.d)?false:true
        }else{
            this.p=y; this.a.sort(compare); x.className='asc'; this.d=false
        }
        var n=document.createElement('tbody');
        n.appendChild(this.r[0]);
        for(i=0;i<this.l;i++){
            var r=this.r[this.a[i].o-1].cloneNode(true);
            n.appendChild(r); r.className=(i%2==0)?'even':'odd'
        }
        this.t.replaceChild(n,this.b)
    }
    function compare(f,c){
        f=f.value,c=c.value;
        var i=parseFloat(f.replace(/(\$|\,)/g,'')),n=parseFloat(c.replace(/(\$|\,)/g,''));
        if(!isNaN(i)&&!isNaN(n)){f=i,c=n}
        return (f>c?1:(f<c?-1:0))
    }
    return{sorter:sorter}
}(); 
```

# parsing - 需要帮助：xpath 查询

> ID：13893279
> 
> 赞同：0
> 
> 时间：2012-12-15T14:58:53.463
> 
> 标签：parsing, xpath

我想排除此表中的 IMG 值：

```
<table class="info">
 <tbody>
  <tr><th class="round-top" colspan="2">Status</th></tr>  
  <tr class="even">
    <td class="key">Schaltprogramm aktiv</td>
    <td class="value"><img height="15" src="./pics/ste-symbol_an-97b765.png"></td>
  </tr>
 </tbody>
</table> 
```

我想排除此表中的值：

```
<table class="info">
 <tbody>
  <tr><th class="round-top" colspan="2">Warmwasser</th></tr>  
  <tr class="even">
    <td class="key">WW-Isttemp.</td>
    <td class="value">49,0 °C</td>
  </tr>
  <tr class="odd">
    <td class="key round-leftbottom">WW-Solltemp.</td>
    <td class="value round-rightbottom">46,5 °C</td>
  </tr>
</tbody></table> 
```

这是我的糟糕测试：

```
$nodelist = $xpath->query( "//tr/td[substring(@class,1,5)='value']" );
$imgs = $xpath->query("//table[@class='info']/tr/td/img"); 
```

我必须怎么做才能排除变量“nodelist”中的 IMG 值？

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T20:15:50.330

我认为（但不确定）您希望`$nodelist`包含属性以字符串开头的所有`td`元素，*但如果它们包含**元素*则不包含。`class``value` *`img`*

如果这是对您问题的正确解释，请更改

```
$nodelist = $xpath->query( "//tr/td[substring(@class,1,5)='value']" ); 
```

至

```
$nodelist = $xpath->query( "//tr/td[substring(@class,1,5)='value'][not(img)]" ); 
```

我不清楚你想对第二个样本表中的温度值做什么；您可能需要编辑问题以更清楚地说明您是否要检索它们。

# python - Python时间限制

> ID：13893287
> 
> 赞同：2
> 
> 时间：2012-12-15T14:59:32.420
> 
> 标签：python, python-3.x

我有一个家庭作业要做，我真的需要一个解决方案。从昨天开始我一直在尝试这样做，但我不知道如何。

程序必须生成并打印一个字母或数字，然后用户必须尽快键入它并按 ENTER。30秒后游戏结束。

好吧，我不知道如何为游戏设置时间限制。我正在通过stackoverflow搜索，但没有发现任何有用的东西。请帮我。

**这是我到目前为止所做的。我尝试了 SYSS.STDER 答案中的代码，但它并不完全有效，因为当 30 秒结束时，游戏也应该结束，但是在这段代码中，当我输入最后一个字符时游戏结束了。

**LOOP 不会停止，直到它完成并且我们发现我们已经过了最后期限。时间一到，就需要立即中断正在进行的任务。**

```
max_time =30
start_time = time.time()  # remember when we started
while (time.time() - start_time) < max_time:

    response = "a"      # the variable that will hold the user's response
    c = "b"             #the variable that will hold the character the user should type
    score = 0
    number = 0

    c = random.choice(string.ascii_lowercase + string.digits)
    print(c)
    number = number + 1

    response = input("Type a letter or a number: ") #get the user's response

    if response == c and (time.time() - start_time) < max_time:
         # if the response from the previous loop matches the character
         # from the previous loop, increase the score.
         score = score + 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T15:28:07.767

这是我的方法：

```
import string
import random 
import time   

response = "a"              # the variable that will hold the user's response
c = "b"                     #the variable that will hold the character the user should type
score = 0                   #the variable that will hold the user's score
start = time.time()         #the variable that holds the starting time
elapsed = 0                 #the variable that holds the number of seconds elapsed.
while elapsed < 30:         #while less than 30 seconds have elapsed  

    if response == c:       #if the response from the previous loop matches the character
        score += 1          #from the previous loop, increase the score.

    #c is a random character
    c = random.choice(string.ascii_lowercase + string.digits)
    print(c)               

    response = input("Type a letter or a number: ") #get the user's response

    elapsed = time.time() - start #update the time elapsed 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T03:38:09.430

由于您使用的是 Windows，因此您可以使用该[`msvcrt.kbhit`](http://docs.python.org/3/library/msvcrt.html?highlight=msvcrt#msvcrt.kbhit)功能检查计时循环内的按键：

```
import msvcrt #### windows only ####
import os
import random
import string
import time

max_time = 15

def readch(echo=True):
    "Get a single character on Windows"
    ch = msvcrt.getch()
    while ch in b'\x00\xe0': # special function key?
        msvcrt.getch()       # get keycode & ignore
        ch = msvcrt.getch()
    if echo:
        msvcrt.putch(ch)
    return ch.decode()

def elapsed_time():
    global start_time
    return time.time() - start_time

number = 0
score = 0
start_time = time.time()  # initialize timer

while elapsed_time() < max_time:
    c = random.choice(string.ascii_lowercase + string.digits)
    print(c, end='')
    number += 1
    print("Type a letter or a number: ", end='')

    while elapsed_time() < max_time:
        if not msvcrt.kbhit():
            time.sleep(0.1) # don't hog processor
        else:
            response = readch(echo=False) # get the user's response
            if response == c:
                print(response) # only print if correct
                score += 1
                break
    else:
        print()

print()
print("Time's up")
print("You go  {} out of {}:".format(score, number)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-21T09:38:15.863

超过时间限制时退出素数函数的示例程序。

导入数学

从时间进口时间

start_time = time() max_time = 2

定义素数（n）：

```
 for i in range(2, int(math.sqrt(n))):
        if(time() - start_time) > max_time:
            return "TLE"
        if n % i == 0:
            return False
    return True 
```

打印（素数（3900000076541747077））

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-11-03T07:22:16.090

使用 python 中可用的“timeit”模块以获得更好的结果。

# python - 此代码中的 Nzec 运行时错误在哪里？

> ID：13893291
> 
> 赞同：0
> 
> 时间：2012-12-15T14:59:58.323
> 
> 标签：python, runtime-error

我有一个简单的 python 代码，它不断在[CodeChef](http://www.codechef.com)在线法官上显示 NZEC 错误。该代码用于问题[GRANAMA](http://www.codechef.com/problems/GRANAMA)。

厨师学会了一种比较两种食谱的新技术。配方包含按处理时间递增顺序排列的成分列表。成分由字母“a”-“z”表示。食谱中的第 i 个字母表示第 i 个成分。一种成分可以在食谱中多次使用。

该技术如下。通过比较它们各自的列表来比较两个食谱。如果两个配方中使用的成分集相同，并且每种成分
在它们中的使用次数相同（处理顺序无关紧要），
则它们被声明为格拉纳玛配方。（“granama”是 Chef 中“相似”的意思。）Chef 采用了他昨天发明的两个食谱。他想用这种技术比较它们。不幸的是，厨师忘记记录每种成分在食谱中使用的次数。他只比较了成分，但没有比较它们
频率。更准确地说，如果没有在一个食谱中使用且未在另一个食谱中使用的成分，则 Chef 将两个食谱视为格拉纳玛。您的任务是报告 Chef 是否正确分类了这两个食谱（作为 granama 或非 granama），尽管他忘记了跟踪频率。

```
 Input

 The first line of the input contains a single integer T denoting the number of test 
 cases. The description for T test cases follows. Each test case consists of a single 
 line containing two space-separated strings R and S denoting the two recipes.

 Output

 For each test case, output a single line containing "YES" (quotes for clarity) if Chef 
 correctly classified the two recipes as granama or not granama. Otherwise, output a 
 single line containing "NO" (quotes for clarity) if Chef declared two recipes as 
 granama when they actually are not.

 Constraints

 1 ≤ T ≤ 100
 1 ≤ |R|, |S| ≤ 1000
 Example

 Input:

 3
 alex axle
 paradise diapers
 alice bob

 Output:

 YES 
 NO
 YES

 Explanation:

 Example case 1: Chef declared them as granama recipes. They are actually granama 
 because the sets of ingredients and the number of times each ingredient has been used 
 are equal. The Chef got it right!
 Example case 2: Chef declared them as granama recipes because both sets of ingredients 
 are equal. But they are NOT granama since ingredient 'a' has been used twice in the 
 first recipe but only once in the second. The Chef was incorrect!
 Example case 3: Chef declare them as not granama. They are not granama as the sets of 
 ingredients are different. Hence, the Chef was right! 
```

这是代码：

```
k=int(raw_input())
for n in range(k):
    recipes=raw_input().split(' ')
    w1=recipes[0]
    w2=recipes[1]
    for i in w1:
        if i in w1:
            w1=w1.replace(i,'')
            w2=w2.replace(i,'')

    if w1=='' and w2=='':
        dict1={}
        dict2={}
        for i in recipes[0]:
            if i in dict1:
                dict1[i]+=1
            else:
                dict1[i]=1
        for i in recipes[1]:
            if i in dict2:
                dict2[i]+=1
            else:
                dict2[i]=1
        flag=True
        for i in dict1:
            if not dict1[i]==dict2[i]:
                print 'NO'
                flag=False
                break
        if flag:
            print 'YES'

    else:
        print 'YES' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T03:47:59.717

我相信错误就在这里-

```
for i in w1:
    if i in w2:    # You were checking again in 'w1'
        w1=w1.replace(i,'')
        w2=w2.replace(i,'') 
```

这应该可以解决 NZEC 问题。[你可以在这里](http://www.codechef.com/viewsolution/1687810)看到我提交的解决方案。运行时间为 0.23 秒。

有很多空间可以使这段代码紧凑。让我挑选一些你的代码片段并展示如何 -

```
w1=recipes[0]
    w2=recipes[1]
    for i in w1:
        if i in w2:
            w1=w1.replace(i,'')
            w2=w2.replace(i,'')

if w1=='' and w2=='': 
```

Python[有一套数据结构](http://docs.python.org/2/tutorial/datastructures.html#sets)，在这种情况下可以派上用场。

```
if set(recipes[0]) == set(recipes[1]):    # Check for equality between two sets 
```

要查看两个配方之间每个字符的频率是否匹配，您不需要字典。您可以简单地比较已排序的字符串。

```
if sorted(recipes[0]) == sorted(recipes[1]) 
```

所以，这 30 行代码可以用 7 行代替。

```
 if set(recipes[0]) == set(recipes[1]):
        if sorted(recipes[0]) == sorted(recipes[1]):
            print 'YES'
        else:
            print 'NO'
    else:
        print 'YES' 
```

[基于上述代码](http://www.codechef.com/viewsolution/1687792)，我以稍微不同的方式输入。它在 0.09 秒内运行。

# css - 如果文本溢出，如何将列表与第一个项目保持在一行以显示省略号？

> ID：13893292
> 
> 赞同：0
> 
> 时间：2012-12-15T15:00:11.223
> 
> 标签：css

我有一个项目清单：

*   用户名
*   登录
*   报名

显示在单行上。例子：

```
->     John Doe  Login  Sign Up <- 
```

在显示窄的浏览器上，用户名可能太长，导致断行。如果文本导致换行，我希望压缩用户名并显示省略号，而不是中断。例子：

```
-> Benjamin F... Login  Sign Up <- 
```

这怎么能用 CSS 来完成呢？

**jsFiddle[在这里](http://jsfiddle.net/x6fSB/)**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T15:03:27.107

使用`width`或`max-width`（单独或一起）：

```
ul {
    white-space: nowrap; /* forces single-line display */
}

li {
    /* existing CSS in which I assume you've defined widths and such */
    float: left;
    width: 5em;
}

li:first-child {
    max-width: 6em;
    overflow: hidden; /* for browsers that don't support the next rule */
    text-overflow: ellipsis;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/nXCPG/2/)。

# c# - Ajax 调用操作时，HttpRuntime.Cache 集合为空

> ID：13893294
> 
> 赞同：1
> 
> 时间：2012-12-15T15:00:18.253
> 
> 标签：c#, asp.net, asp.net-mvc

我试图弄清楚为什么`HttpRuntime.Cache`当控制器操作被调用时我的集合总是空的`$.ajax`？在正常调用的操作中，一切正常，我可以从`Cache`. 也许由 AJAX 调用的动作有一些不同的生命周期并且`Cache`集合还没有准备好？这是我的示例代码：

行动：

```
[HttpPost]
public PartialViewResult SomeAjaxAction()
{
   // when receive ajax request HttpRuntime.Cache is always empty, but it shouldn't be
   SomeType item = HttpRuntime.Cache.Get("cache_key") as SomeType;

   return PartialView("SomeAjaxActionView", item); 
} 
```

调用：

```
$.ajax({
        type: 'POST',
        url: '/controller/SomeAjaxAction/',
        success: function (response) {
            alert(response);
        }
    }); 
```

有什么方法可以修复它，例如通过自定义操作过滤器？

**回答**

好的，我在这里找到了答案：[在对 Asp.net MVC 操作进行 ajax 调用时访问会话](https://stackoverflow.com/questions/1897293/access-to-session-when-making-ajax-call-to-asp-net-mvc-action)所以我改进了我的代码，`base.HttpRuntime.Cache.Get("key")`它按预期工作！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T16:17:59.790

好的，我在这里找到了答案：[在对 Asp.net MVC 操作进行 ajax 调用时访问会话](https://stackoverflow.com/questions/1897293/access-to-session-when-making-ajax-call-to-asp-net-mvc-action)所以我改进了我的代码，`base.HttpRuntime.Cache.Get("key")`它按预期工作！

# hibernate - 如何强制 Hibernate 在其实体之一发生更改时不将更改传播到数据库

> ID：13893302
> 
> 赞同：2
> 
> 时间：2012-12-15T15:01:54.273
> 
> 标签：hibernate

Hibernate 对一些事情非常有用。但是一件微不足道的事情却没有引起人们的注意。我想提供一种在“管理面板”中修改数据库条目的方法。更具体地说，我希望有一个能够修改产品、属性、图像、价格等的视图。因此，我通过例如会话加载要修改的产品的编辑视图.get(Product.class, id)。然后我使用它的属性、修改名称、设置价格、加载图像并做任何我想做的事情。但最终用户必须决定是保存更改还是丢弃它们。保存部分很容易 - 在服务层中调用 session.save 事务，但丢弃似乎是一个更难的问题，因为任何后续会话刷新都会将产品中取消的更改传播到数据库。

所以，我的问题是如何建立这样的方案。最好的选择是什么？我个人看到以下解决方案：

1.  使用级联调用 session.evict() 或
2.  使用一些复制的副本/ DTO 并在保存操作时合并或
3.  处理客户端上的所有更改，然后在保存时重新填充休眠实体。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T11:43:54.973

实际上，由于对休眠持久性生命周期的误解，我搞砸了基本的休眠功能。

因此，采用的典型方法之一是拆分（1）通过调用`dao.load(key)`方法加载实体并通过关闭关联的会话将其与会话分离，为用户提供处理它的时间，（2）在表示层修改分离的实体由用户和 (3) 稍后将分离的对象重新附加到新会话，使其再次持久化，如有必要，通过合并它，调用`dao.merge(object)`. 当然，可以使用 DTO 来不干扰不同的程序层。

另一种也是明智的方法包括在一个会话或事务中处理持久对象，在这种情况下，可以通过从会话中逐出对象`session.evict()`或回滚整个事务来简单地取消更改`transaction.rollback()`。

如果像我这样的人遇到这样的误解，我的参考清单将是：

1.  [对象状态的休眠文档](http://docs.jboss.org/hibernate/orm/4.0/hem/en-US/html/objectstate.html)；
2.  [关于持久性上下文的 Hibernate 文档](http://docs.jboss.org/hibernate/orm/4.0/devguide/en-US/html/ch03.html)或
3.  [关于 slidreshare 的一个很好的休眠评论演示文稿](http://www.slideshare.net/haithamraik/advanced-hibernate)。

# php - 发送变量后的 wsdl 服务响应，php

> ID：13893304
> 
> 赞同：2
> 
> 时间：2012-12-15T15:02:06.567
> 
> 标签：php, soap, service, web, wsdl

我是 SOAP WSDL 函数的新手。我有一个客户，他从一家从事汽车测试的公司获得了一个 wsdl 文件。我的客户是他们的分包商。他们告诉我们上传关于车牌、类别等的信息，一旦发送了详细信息，服务器就会有成功或失败的响应。请协助。

浏览不同的信息，我尝试执行以下操作，但无法正常工作

```
 <?php
$data = array('1'=>'value','2'=>'value','3'=>'value','4'='value','5'=>'value');
$wsdl ='http://181.24.80.32/ws/services/servicename';
$client = new SoapClient($wsdl); 
$response = $client->servicenamerequest($data);  

echo $response->servicenamereturn;  
    ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T17:32:53.937

首先：如果您正在处理未知的 Soap 服务，请获取[SoapUI 。](http://www.soapui.org/)SoapUI 将读取 WSDL 文件，并允许您查看与 Soap 方法、参数和返回值相关的几乎所有内容（如果您敢于调用实时服务 - 希望有一个沙箱服务器不做任何关键的事情）。

但是 SoapUI 可以通过创建一个模拟服务来帮助您，该服务接收您的请求并以您准备的预设请求进行响应。以下是我在不触及实际服务的情况下从您链接的 WSDL 到工作代码示例的方法。

### 设置 SoapUI

在 SoapUI 中创建一个新项目并给出 WSDL 的位置。你可以命名这个项目。

SoapUI 然后读取 WSDL 的内容并创建包含所有描述的请求的项目。之后，您会看到服务提供了哪些方法，以及必须将哪些类型的参数输入其中，就像一棵树一样。打开这棵树将为检测到的每个方法提供“请求 1”，它在免费版本中显示一些 XML（付费版本更适合填写表格），如下所示（来自`vehiclePassedTest`方法）：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tr="http://tr.gov.tp.stp.ws.PassedVehicleTestService">
   <soapenv:Header>
      <tr:password>?</tr:password>
      <tr:username>?</tr:username>
   </soapenv:Header>
   <soapenv:Body>
      <tr:vehiclePassedTest>
         <chassisNo>?</chassisNo>
         <plateNo>?</plateNo>
         <plateCode>?</plateCode>
         <plateCategory>?</plateCategory>
         <plcEmiCode>?</plcEmiCode>
         <currentUserName>?</currentUserName>
      </tr:vehiclePassedTest>
   </soapenv:Body>
</soapenv:Envelope> 
```

问号是您必须提供数据的地方。此请求结构必须由您使用 PHP 的 SoapClient 创建。

让我们嘲笑一下。模拟意味着 SoapUI 启动它自己的接受请求的 Soap 服务器。它通常在 127.0.0.1:8080 上运行。右键单击项目“PassedVehicleTestService”并选择“New MockService”。接受名称，按确定。

右键单击要模拟的方法。选择“添加到模拟服务”并选择上一步中创建的。回答“是”以打开模拟响应编辑器。在那里，您可以看到答案的 XML 结构，以及服务将填写的数据的问号。此服务的所有响应都允许将一个答案作为字符串，因此请编写一些将返回的好东西。如果需要，您可以稍后将其他方法添加到此服务。

右键单击“MockService 1”并选择“开始最小化”。这将启动 Soap 服务器，它将等待传入的请求。

### 为模拟设置 PHP SoapClient。

你需要知道两件事。首先是 WSDL 的位置。该文件包含用于请求的真实服务器的地址，但 PHP 允许覆盖它。因此，您需要的第二个信息是正在运行的模拟服务的地址。

SoapUI 在请求编辑器中显示来自 WSDL 的地址。在您的情况下`http://181.24.80.32/ws/services/PassedVehicleTestService`- 模拟服务运行在`http://127.0.0.1:8080/ws/services/PassedVehicleTestService`- IP 和端口被替换，路径被保留。

这导致 PHP 代码的第一行：

```
$options = array(
    'location' => 'http://127.0.0.1:8080/ws/services/PassedVehicleTestService',
);

$client = new SoapClient("http://www.quickregistration.ae/temp/PassedVehicleTestService.xml", $options); 
```

之后，您有一个配置好的 SoapClient 能够与您的模拟服务对话。如果稍后您想使用真正的服务，请将带有“位置”的行从数组中删除，如果您碰巧添加了一些配置参数，请保留其他配置参数。

### 与模拟对话

有了客户端，你就可以做到`$client->nameOfSoapMethod(paramStructure)`。参数结构通常是数组或对象和标量值（如字符串）的混合。所以这就是我首先尝试的：

```
$result = $client->vehiclePassedTest(array());
var_dump($result); 
```

然后我查看 SoapUI 看看会发生什么。php脚本的输出：

```
Notice: Array to string conversion in [...]/soap.php on line 20
string(1) "?" 
```

SoapUI 说：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://tr.gov.tp.stp.ws.PassedVehicleTestService">
    <SOAP-ENV:Body>
        <ns1:vehiclePassedTest>
            <chassisNo>Array</chassisNo>
            <plateNo/>
            <plateCode/>
            <plateCategory/>
            <plcEmiCode/>
            <currentUserName/>
        </ns1:vehiclePassedTest>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

那不是正确的做法。该数组被转换为字符串“Array”，并作为第一个参数放置。其余为空。很好，因为我知道soap 调用可能接受不止一个参数，这就是这些服务之一。

```
$result = $client->vehiclePassedTest('chassisNo', 'plateNo', 'plateCode', 'plateCategory', 'plcEmiCode', 'currentUserName'); 
```

这在 SoapUI 中正确显示，但标题仍然缺失。

### 将 SoapHeader 添加到请求中

SoapClient 提供了一个名为 的方法`__setSoapHeaders()`，并且有一个类`SoapHeader`。

描述说 setSoapHeaders() 接受一个 SoapHeader 对象或一组 SoapHeader 对象。让我们创建一个，传递它，看看会发生什么：

```
$username = new SoapHeader();
$client->__setSoapHeaders($username);
$result = $client->vehiclePassedTest('chassisNo', 'plateNo', 'plateCode', 'plateCategory', 'plcEmiCode', 'currentUserName');
var_dump($result); 
```

PHP 说：`Warning: SoapHeader::SoapHeader() expects at least 2 parameters, 0 given`

```
$username = new SoapHeader('namespace', 'username', 'MyUserName'); 
```

这行得通。SoapUI 说：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://tr.gov.tp.stp.ws.PassedVehicleTestService" xmlns:ns2="namespace">
    <SOAP-ENV:Header>
        <ns2:username>MyUserName</ns2:username>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <ns1:vehiclePassedTest><chassisNo>chassisNo</chassisNo><plateNo>plateNo</plateNo><plateCode>plateCode</plateCode><plateCategory>plateCategory</plateCategory><plcEmiCode>plcEmiCode</plcEmiCode><currentUserName>currentUserName</currentUserName></ns1:vehiclePassedTest>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

请注意 SOAP-ENV:Envelope 元素中的两个 xmlns 属性。原始请求要求用户名位于命名空间“tr”中——但“tr”只是定义为“xlmns:tr”的字符串的快捷方式——后面的字符串是您需要的命名空间（尽管它可能已经使用真正的服务）。

```
$username = new SoapHeader("http://tr.gov.tp.stp.ws.PassedVehicleTestService", 'username', 'myUser');
$password = new SoapHeader("http://tr.gov.tp.stp.ws.PassedVehicleTestService", 'password', 'yetAnotherPassword');
$client->__setSoapHeaders(array($username, $password)); 
```

如您所见，这正确定义了标题：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://tr.gov.tp.stp.ws.PassedVehicleTestService">
    <SOAP-ENV:Header>
        <ns1:username>myUser</ns1:username>
        <ns1:password>yetAnotherPassword</ns1:password>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <ns1:vehiclePassedTest><chassisNo>chassisNo</chassisNo><plateNo>plateNo</plateNo><plateCode>plateCode</plateCode><plateCategory>plateCategory</plateCategory><plcEmiCode>plcEmiCode</plcEmiCode><currentUserName>currentUserName</currentUserName></ns1:vehiclePassedTest>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

信封元素中没有两个命名空间，每个元素都属于命名空间“ns1”。这应该有效。

您的最终代码：

```
$options = array(
    'location' => 'http://127.0.0.1:8080/ws/services/PassedVehicleTestService',
);

$client = new SoapClient("http://www.quickregistration.ae/temp/PassedVehicleTestService.xml", $options);

$username = new SoapHeader("http://tr.gov.tp.stp.ws.PassedVehicleTestService", 'username', 'myUser');
$password = new SoapHeader("http://tr.gov.tp.stp.ws.PassedVehicleTestService", 'password', 'yetAnotherPassword');
$client->__setSoapHeaders(array($username, $password));

$result = $client->vehiclePassedTest('chassisNo', 'plateNo', 'plateCode', 'plateCategory', 'plcEmiCode', 'currentUserName');

var_dump($result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T15:07:49.240

try something like this. Works for me.

```
try {
  $client = new SoapClient("http://wsdl",  array('trace' => 1));
  $data = $client->someFunction(array('parma1' => 'value1', 'param2' => 'value2'));
  print_r($data);
} catch (SoapFault $fault) {
   trigger_error("SOAP Fault: (faultcode: {$fault->faultcode}, faultstring: {$fault->faultstring})", E_USER_ERROR);
   exit();
} 
```

And check is you have installed php-soap package in your server.

Greatings.

# hibernate - 当地图的键是用户定义的类时如何在休眠中使用地图

> ID：13893307
> 
> 赞同：0
> 
> 时间：2012-12-15T15:02:53.460
> 
> 标签：hibernate

我试图使用hibernate映射不同的java集合。我了解了如何使用 tag`<map/>`标记映射 hashMap。我学会了如何映射以下内容：

1.  `HashMap<String, String>`
2.  `HashMap<String, UserDefinedClass>`

但是我有一个问题。

当我必须映射这种类型的哈希图时如何使用映射标签`HashMap<UserdefinedClass, UserDefinedClass>`

本质上，当映射的键不是 java 数据类型而是用户定义的类时，我如何在 hibernate 中映射它。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:07:36.273

要使用用户定义的类作为 HashMap 中的键，您需要了解以下几点。

1.  哈希算法。
2.  hashCode() 和 equals() 方法的用途。

请阅读下文了解 HashMap 的详细工作原理。

[HashMap的工作](http://javarevisited.blogspot.in/2011/02/how-hashmap-works-in-java.html)

# c# - 如何在 XNA 上停止模型动画？

> ID：13893312
> 
> 赞同：-2
> 
> 时间：2012-12-15T15:03:45.010
> 
> 标签：c#, animation, model, xna

我不明白如何暂停 XNA 的动画。我可以“开始”我的模型的动画，但不能停止它。我使用 SkinningSample_4_0 示例 dll

这是我要使用的代码。

```
 protected override void LoadContent()
        {
            //Model - Player
            model_player = Content.Load<Model>("Models\\Player\\models");
            // Look up our custom skinning information.
            SkinningData skinningData = model_player.Tag as SkinningData;

            if (skinningData == null)
                throw new InvalidOperationException
                    ("This model does not contain a SkinningData tag.");

            // Create an animation player, and start decoding an animation clip.
            animationPlayer = new AnimationPlayer(skinningData);

            AnimationClip clip = skinningData.AnimationClips["ArmLowAction_006"];

            animationPlayer.StartClip(clip);

}

protected overide update(GameTime gameTime)
{
            KeyboardState key = Keyboard.GetState();
            animationPlayer.Update(gameTime.ElapsedGameTime, true, Matrix.Identity);
            //  If player don't move -> stop anim 
            if (!key.IsKeyDown(Keys.W) && !keyStateOld.IsKeyUp(Keys.S) &&           !keyStateOld.IsKeyUp(Keys.A) && !keyStateOld.IsKeyUp(Keys.D))
            {
                //animation stop ? not exist ?
                animationPlayer.Stop();
                isPlayerStop = true;
            }
            else
            {
                if(isPlayerStop == true)
                {
                     isPlayerStop = false;
                     animationPlayer.StartClip(Clip);
            }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T00:04:38.837

终于自己找到了^^

```
if (!key.IsKeyDown(Keys.W) && !key.IsKeyDown(Keys.A) && !key.IsKeyDown(Keys.D) && !key.IsKeyDown(Keys.S))
{
             //Stop animation for player walking
             animationPlayer.Update(new TimeSpan(0, 0, 0), true, Matrix.Identity);
}
else
{
             //Continue the animation 
             animationPlayer.Update(gameTime.ElapsedGameTime, true, Matrix.Identity);
} 
```

# python - 尝试使用 len() 函数从现有列表创建列表时出现 KeyError

> ID：13893313
> 
> 赞同：0
> 
> 时间：2012-12-15T15:03:56.470
> 
> 标签：python, dictionary, while-loop

我正在尝试创建一个列表来计算每个列表列表中的价格数量。

使用以下代码：

```
print data['OtherBids'] 
```

我得到以下输出：

> [[0.074, 0.073, 0.072, 0.03, 0.029, 0.024, 0.021, 0.02], [0.02, 0.02, 0.015], [0.026, 0.026, 0.02, 0.02, 0.02, 0.015], [0.021, 0.02] 17, 0.021, 0.0 , [0.077, 0.076, 0.074, 0.055, 0.045, 0.021], [0.053, 0.052, 0.051, 0.023, 0.022], [0.016, 0.016]]

根据对数据的粗略查看，我们可以看到第一个列表中有 8 个元素，第二个列表中有 3 个，第三个列表中有 6 个等等......但是，当我尝试使用 while 循环来生成数据，它返回以下错误：

```
data['number'][a] = len(data['OtherBids'][a])
KeyError: 'number' 
```

导致上述错误的代码是：

```
a = 0
b = len(data['OtherBids'])

while a <= b - 1:
    for i in data['OtherBids']:
        data['number'][a] = len(data['OtherBids'][a]).get
    a = a + 1 
```

有人知道我应该如何解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T15:11:06.513

你`data`没有`"number"`钥匙：

```
a = 0
b = len(data['OtherBids'])
# add this line
data['number'] = dict()

while a <= b - 1:
    for i in data['OtherBids']:
        # seems to be mistype: len(data['OtherBids'][a]).get
        # I removed .get
        data['number'][a] = len(data['OtherBids'][a])
    a = a + 1 
```

**UPD**

我发现你的代码太复杂了

更多pythonic版本：

```
data['number'] = {}
for i, item in enumerate(data['OtherBids']):
    data['number'][i] = len(item) 
```

内联版本：

```
data['number'] = {i:len(item) for i,item in enumerate(data['OtherBids'])} 
```

# c# - 添加列表 to EF I'm playing around with EF, trying to get my bearings. Right now I'm writing a blackjack game for a website. The problem is that my whenever I pull a GameState from the database, the playerHand 问问题 问问题 2012-12-15T15:04:06.687 247 次 This question shows research effort; it is useful and clear 4 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I'm playing around with EF, trying to get my bearings. Right now I'm writing a blackjack game for a website. The problem is that my whenever I pull a GameState from the database, the playerHand, dealerHand, theDeck, and dealerHidden properties are null. public class GameState { [Key] [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)] public int gameSession { get; set; } public int playerScore { get; set; } public int dealerScore { get; set; } public Deck theDeck { get; set; } public List <cards>playerHand { get; set; } public List <cards>dealerHand { get; set; } public Cards dealerHidden { get; set; } public bool gameOver { get; set; } } public class Cards { [Key] [DatabaseGenerated(DatabaseGeneratedOption.Identity)] public int cardId { get; set; } public string cardName { get; set; } public int cardValue { get; set; } } public class GameStateContext : DbContext { public GameStateContext() : base("MyContext") { } protected override void OnModelCreating(DbModelBuilder modelBuilder) { modelBuilder.Entity<gamestate>().HasRequired(e => e.theDeck); modelBuilder.Entity<gamestate>().HasRequired(e => e.dealerHand).WithMany().WillCascadeOnDelete(false); modelBuilder.Entity<gamestate>().HasRequired(e => e.playerHand).WithMany().WillCascadeOnDelete(false); modelBuilder.Entity<gamestate>().HasOptional(e => e.dealerHidden); modelBuilder.Entity<deck>().HasRequired(e => e.cards).WithMany().WillCascadeOnDelete(false); base.OnModelCreating(modelBuilder); } public DbSet <gamestate>GameStates { get; set; } public DbSet <deck>Decks { get; set; } public DbSet <card>Cards { get; set; } } The cards and deck table are populated. Where am I going wrong? How to print the contents of a two-dimensional array of characters? I'm trying to print an array of characters in C but i can't print everything. I want to print : b1 b2 My code: #include <stdio.h>#include <stdlib.h>#include <string.h>int main() { char def[3][10]; //define a multidimensional array of characters strcpy(def[0],"b1"); //insert "b1" at first line strcpy(def[1],"b2"); //insert "b2" at first line printf("%s",def); //print everything? } The above code prints just b1\. I already tried : printf("%s",def[0]); printf("%s",def[1]); But i have error "invalid use of array with unspecified bounds" c#entity-frameworklist 4 1 回答 1 This answer is useful 1 我认为您要么需要通过使它们成为虚拟属性来使导航属性（即 playerHand、dealerHand、theDeck 和dealerHidden）可延迟加载，要么您需要在查询 GameState 时急切地加载它们。 myDBContext.GameStates.Include("playerHand").Include("dealerHand").Include("theDeck").Include("dealerHidden").where(...); 这是关于实体框架如何处理相关对象的一个 不错的解释： http://msdn.microsoft.com/en-us/data/jj574232.aspx 于 2012-12-15T20:52:18.290 回答 Related 1 php - fwrite，意外的语法错误 T_BOOLEAN_AND 0 mysql - MySQL 立陶宛语排序规则 9 ruby - 用 Ruby 打印一个可读的矩阵 3 heroku - Github 和 Heroku 克隆错误 - 无效路径/语法错误 1 c# - 为 IQueryable 创建动态类型 在运行时 # 1 android - Cocos 2D NullPointer 异常 5 c - 将结构传递给函数 1 .net - lambda 搜索“包含”不返回预期结果 2 asp.net - 差异日期计算 2 java - 当 Java 中的输入缓冲区自动刷新时会发生什么？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</string.h></stdlib.h></stdio.h></card></deck></gamestate></deck></gamestate></gamestate></gamestate></gamestate></cards></cards>

> ID：13893315
> 
> 赞同：4
> 
> 时间：
> 
> 标签：c#, entity-framework, list

I'm playing around with EF, trying to get my bearings. Right now I'm writing a blackjack game for a website. The problem is that my whenever I pull a `GameState` from the database, the `playerHand`, `dealerHand`, `theDeck`, and `dealerHidden` properties are null.

```
public class GameState
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int gameSession { get; set; }
    public int playerScore { get; set; }
    public int dealerScore { get; set; }
    public Deck theDeck { get; set; }
    public List<Cards> playerHand { get; set; }
    public List<Cards> dealerHand { get; set; }
    public Cards dealerHidden { get; set; }
    public bool gameOver { get; set; }
}

public class Cards
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int cardId { get; set; }
    public string cardName { get; set; }
    public int cardValue { get; set; }
}

public class GameStateContext : DbContext
{
    public GameStateContext() : base("MyContext")
    {
    }
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<GameState>().HasRequired(e => e.theDeck);
        modelBuilder.Entity<GameState>().HasRequired(e => e.dealerHand).WithMany().WillCascadeOnDelete(false);
        modelBuilder.Entity<GameState>().HasRequired(e => e.playerHand).WithMany().WillCascadeOnDelete(false);
        modelBuilder.Entity<GameState>().HasOptional(e => e.dealerHidden);
        modelBuilder.Entity<Deck>().HasRequired(e => e.cards).WithMany().WillCascadeOnDelete(false);
        base.OnModelCreating(modelBuilder);
    }

    public DbSet<GameState> GameStates { get; set; }
    public DbSet<Deck> Decks { get; set; }
    public DbSet<Card> Cards { get; set; }
} 
```

The cards and deck table are populated. Where am I going wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T20:52:18.290

我认为您要么需要通过使它们成为虚拟属性来使导航属性（即 playerHand、dealerHand、theDeck 和dealerHidden）可延迟加载，要么您需要在查询 GameState 时急切地加载它们。

```
myDBContext.GameStates.Include("playerHand").Include("dealerHand").Include("theDeck").Include("dealerHidden").where(...); 
```

这是关于实体框架如何处理相关对象的一个​​不错的解释：

[http://msdn.microsoft.com/en-us/data/jj574232.aspx](http://msdn.microsoft.com/en-us/data/jj574232.aspx)

# c - 如何打印二维字符数组的内容？

> ID：13893316
> 
> 赞同：0
> 
> 时间：2012-12-15T15:04:09.487
> 
> 标签：c, arrays, string, printing, char

我正在尝试在 C 中打印一个字符数组，但我无法打印所有内容。我想打印：b1 b2 我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main() {
  char def[3][10];     //define a multidimensional array of characters 
  strcpy(def[0],"b1"); //insert "b1" at first line
  strcpy(def[1],"b2"); //insert "b2" at first line
  printf("%s",def);    //print everything?
} 
```

上面的代码只打印`b1`. 我已经尝试过：

```
printf("%s",def[0]);
printf("%s",def[1]); 
```

但我有错误“无效使用未指定边界的数组”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T15:07:58.997

```
printf("%s", def); 
```

`%s` conversion specification expects a string. `def` is an array of strings and not a string.

To print the first string do this:

```
printf("%s", def[0]); 
```

if you want to print the second string then do this:

```
printf("%s", def[1]); 
```

and if you want to print both strings:

```
printf("%s%s", def[0], def[1]); 
```

To print all strings in your array:

```
for (i = 0; i < sizeof def / sizeof *def; i++)
{
    printf("%s", def[i]); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T15:42:28.717

您可以通过一次调用将整个多维数组打印`char`为单个字符串：

```
printf("%s", (char*) multiDimensionalArray); 
```

因为多维数组的元素是连续的。但是，就像简单的数组一样，`printf`在第一个终止字符处停止，所以它通常是没有意义的，因为我们几乎总是在每个“行”的末尾有一个终止字符，就像你一样，或者一些未初始化的垃圾。

```
char def[3][2];

memcpy(def[0], "b1", 2);
memcpy(def[1], "b2", 2);

def[2][0] = '\0';

printf("%s", (char*) def);  // print everything 
```

但是以这种方式使用数组很痛苦，您需要的是对数组进行循环。

（您可以简单地使用`*puts`打印字符串）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T15:39:20.237

您首先使用语法初始化数组，就像整个数组获取空值一样。然后执行相同的过程，您可以在输出中获取字符串。

语法：char def[3][10]={};

或者首先定义这个数组，然后通过 bzero 函数使整个数组为零值。

bzero(def,sizeof(def));

您需要在程序中包含 stdlib.h 头文件。

# python - python inheritance - referencing base class methods

> ID：13893318
> 
> 赞同：0
> 
> 时间：2012-12-15T15:04:26.440
> 
> 标签：python, class, inheritance

```
# Derived class that inherits from Base class. Only one of the 
# parent methods should be redefined. The other should be accessible
# by calling child_obj.parent_method().
class Derived(Base):
    def result(self,str):
        print "Derived String (result): %s" % str

# Base class that has two print methods
class Base():
    def result(self,str):
        print "Base String (result): %s" % str

    def info(self,str):
        print "Base String (info): %s" % str 
```

I think what I want to do is simple, but I've never dealt with inheritance in Python. Nothing I'm trying seems to work. What I want to do is create a class that redefines a handful of the original methods in the base class while still being able to access all of the other methods in the base class. In the above example, I would want to be able to do this:

```
derived_obj.result("test")
derived_obj.info("test2") 
```

And the output would be this:

```
Derived String (result): test
Base String (info): test2 
```

Am I missing something or should this work as it's currently written?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T15:07:25.177

Yes, it'll work (almost) as-is:

```
class Base(object):

    def result(self, s):
        print "Base String (result): %s" % s

    def info(self, s):
        print "Base String (info): %s" % s

class Derived(Base):

    def result(self, s):
        print "Derived String (result): %s" % s

derived_obj = Derived()
derived_obj.result("test")
derived_obj.info("test2") 
```

I have:

1.  derived `Base` from `object`;
2.  moved `Base` to appear before `Derived`;
3.  renamed `str` since it's bad form to shadow [builtin functions](http://docs.python.org/2/library/functions.html);
4.  added code to instantiate `Derived`.

# asp.net - ASP NET Custom Routing

> ID：13893323
> 
> 赞同：1
> 
> 时间：2012-12-15T15:05:06.910
> 
> 标签：asp.net, routing

I have following patterns

```
/invitation/mission/busstop  -- return the list of busstops
/invitation/mission/busstop/id  -- return a specific busstop
/invitation/mission/driver  -- return the list of drivers
/invitation/mission/driver/id  -- return a specific driver
/invitation/mission/driver/city/model/limit  -- query driver accoring to city, model and age limit
...
/invitation/questionair  -- return the list of questionairs
/invitation/questionair/id  -- return a specific questionair
/invitation/questionair/create  -- create a new questionair
/invitation/questionair/update/id  -- update a questionair
... 
```

I expect the 'invitation' to be controller, and the rest to be action. Each of the above url should corresponds to a dedicated view page.

Can anyone help me to design the routes?

=====================================================================

I update the patterns, and add my expectation at the end of each url. Any suggest on the url patterns?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T06:45:11.190

其他答案是有效的，但我认为有一种更简单、更清晰、更易于维护的方式来定义你的路由：**使用基于属性的路由映射器**。

我发现最容易使用的是[RiaLibrary.Web 路由映射器](http://maproutes.codeplex.com/)。您所要做的就是在您想要为其设置路线的每个方法上添加一个属性 - 然后指定您的路线详细信息。

要进行设置，您必须按照 RiaLibrary.Web 页面上列出的几个步骤进行操作。完成这些步骤后，您可以将任何控制器操作更改为如下所示：

```
[Url("Articles/{id}")]
public ActionResult Details(int id)
{
    // process
    return View();
} 
```

如果您有任何可选参数，请将它们声明为`{param?}`在路由字符串中，然后`int? param`在您的方法声明中。

**而已！**您还可以包含一些其他参数来指定是否只有某些类型的 HTTP 调用匹配此路由，定义参数约束，并固定匹配此路由的顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T05:02:21.277

这是使您的控制器保持简单并且仍然具有良好 url 模式的答案：

**控制器：**

```
 public class InvitationController : Controller
    {
        public ActionResult GetAllBusStops()
        {
            //Logic to show all bus stops
            //return bus stops 
            return View();
        }

        public ActionResult GetBusStopById(string id)  //Assumed your id to be a string
        {
            //Logic to get specific bus stop
            //return bus stop

            return View();
        }

        public ActionResult GetAllDrivers()
        {
            //Logic for driver list
            //return driver list 
            return View();
        }

        public ActionResult GetDriverById(int id)  //Assumed your id to be an integer
        {
            //Logic to get specific driver
            //return driver

            return View();
        }
        public ActionResult GetDriver(string city, string model,int limit)  //Assumed datatypes 
        {
            //Logic to get specific driver with this criteria
            //return driver

            return View();
        }
         public ActionResult GetAllQuestionairs()
        {
            //Logic for questionair list
            //return the list 
            return View();
        }
        public ActionResult GetQuestionairById(int id)  //Assumed your id to be an integer
        {
            //Logic to get specific questionair
            //return it

            return View();
        }
        public ActionResult CreateQuestionair(QuestionairCreateModel model)
        {
            //logic to create questionair
            return View();

        }
        public ActionResult GetQuestionairById(int id)  //Assumed your id to be an integer
        {
            //Logic to get specific questionair
            //return it

            return View();
        }

        public ActionResult UpdateQuestionairById(int id)  //Assumed your id to be an integer
        {
            //Logic to update specific questionair
            //return it

            return View();
        }
    } 
```

现在转到您的`App_Start`文件夹，打开`RouteConfig.cs,`开始在路由中添加 REST url，如下所示：

```
routes.MapRoute(
                "List Bus Stops", // Route name
                "invitation/mission/busstop", // No parameters for Getting bus stop list
                new { controller = "Invitation", action = "GetAllBusStops"}, // Parameter defaults
                new { httpMethod = new HttpMethodConstraint("GET") }
                );

            routes.MapRoute(
                "Get Bus stop by id", // Route name
                "invitation/mission/busstop/{id}", // URL with parameters
                new { controller = "Invitation", action = "GetBusStopById" }, // Parameter defaults
                new { httpMethod = new HttpMethodConstraint("GET") }
                );
             routes.MapRoute(
                "Get All Drivers", // Route name
                "invitation/mission/driver", // No parameters for Getting driver list
                new { controller = "Invitation", action = "GetAllDrivers"}, // Parameter defaults
                new { httpMethod = new HttpMethodConstraint("GET") }
                );
            routes.MapRoute(
                "Get Driver by id", // Route name
                "invitation/mission/driver/{id}", // URL with parameters
                new { controller = "Invitation", action = "GetDriverById" }, // Parameter defaults
                new { httpMethod = new HttpMethodConstraint("GET") }
                );

            routes.MapRoute(
                "Get driver for city, model, limit", // Route name
                "invitation/mission/driver/{city}}/{model}/{limit}", // URL with parameters
                new { controller = "invitation", action = "GetDriver"}, // Parameter defaults
                new { httpMethod = new HttpMethodConstraint("GET") }
                );
            routes.MapRoute(
                "Get All Questionairs", // Route name
                "invitation/questionair", // No parameters for Getting questionair list
                new { controller = "Invitation", action = "GetAllQuestionairs"}, // Parameter defaults
                new { httpMethod = new HttpMethodConstraint("GET") }
                );
             routes.MapRoute(
                "Get questionair by id", // Route name
                "invitation/questionair/{id}", // URL with parameters
                new { controller = "Invitation", action = "GetQuestionairById" }, // Parameter defaults
                new { httpMethod = new HttpMethodConstraint("GET") }
                );
            routes.MapRoute(
               "Create New Questionair, // Route name
               "invitation/questionair/create", // URL with parameters
               new { controller = "invitation", action = "CreateQuestionair" }, // Parameter defaults
               new { httpMethod = new HttpMethodConstraint("POST") }
               );   

            routes.MapRoute(
               "Update Questionair, // Route name
               "invitation/questionair/update/{id}", // URL with parameters
               new { controller = "invitation", action = "UpdateQuestionairById" }, // Parameter defaults
               new { httpMethod = new HttpMethodConstraint("POST") }
               ); 
```

许多事情都被假定为数据类型和模型名称。你可以从中弄清楚它是如何工作的......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T15:19:53.173

在 global.asax 中添加路由

```
routes.MapRoute(
   "Default",
   "{controller}/{id}",
   new { controller = "invitation", action = "Index" }
); 
```

然后在你的控制器中使用类似的东西：

```
public class InvitationController : Controller
{
    public ActionResult Index(string id)
    {
        switch(id.ToLower())
        {
            case "mission/busstop/list":
                return View("busstop/list");
            case "mission/driver/query":
                return View("driver/query");
        }
        //Return default view    
        return View();
    }
} 
```

# java - Which method will be called when overriding a method with different parameters in the following case?

> ID：13893324
> 
> 赞同：3
> 
> 时间：2012-12-15T15:05:26.213
> 
> 标签：java, object, equals

Let's say I want to override the method equals() of Object:

```
 public boolean equals(Object o){
      //something
    }

    public boolean equals(SomeClass s){
      //something else
    } 
```

SomeClass is obviously also an Object, so which method will be called if I use equals with an Instance of SomeClass as parameter?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T15:07:36.773

That's not overriding, it's overloading. If you do that you'll end up with two `equals` methods: one that will be invoked for (subclasees of) `SomeClass` instances and one for any other objects.

One thing to note is that the method binding will be static: the compiler will decide which one to call based on the declared type of your reference. Therefore, the following will invoke the `equals(Object)`, not `equals(SomeClass)`:

```
Object o = new SomeClass();
o.equals(o);  // invokes SomeClass.equals(Object) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T15:22:53.227

当您`public boolean equals(SomeClass s)`使用参数`SomeClass`或`SomeClass`.

对于任何其他对象，它都会被`public boolean equals(Object o)`调用。

但是，当您在其他 API 中调用 equals 方法时，它们将调用`public boolean equals(Object o)`. 这将导致错误的行为。Java 集合 API 就是一个例子。

所以不要像这样重载equals方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T15:15:26.203

如果您像示例中那样重载该函数，并正常实例化该对象，则如果您向 equals 函数提供 SomeClass ，则将调用以 SomeClass 作为参数的 equals 函数。对于任何其他类，将调用以 Object 作为参数的 equals 函数。

但是，如果将对象实例化为父类，则行为会有所不同。这与动态绑定有关，这里解释得很好：[关于 Java 重载和动态绑定的问题](https://stackoverflow.com/questions/5658553/question-about-java-overloading-dynamic-binding)

请注意，如果您希望在 Object 属于 SomeClass 类型时执行其他操作，您也可以`instanceof SomeClass`在标准 equals 函数中使用。（不是试图开始讨论，但这是一种选择）

# kohana - 无法使用 Kohana 3.3.0 ORM Auth 登录

> ID：13893326
> 
> 赞同：4
> 
> 时间：2012-12-15T15:05:43.733
> 
> 标签：kohana, kohana-orm, kohana-auth

我正在尝试在 Kohana 3.3.0 中将 Auth 模块与 ORM 驱动程序一起使用，但我唯一能做的就是在数据库中插入新用户。我不能用他们登录。

我从一个空白的 Kohana 项目、一个简单的路由、数据库配置文件开始，然后导入了 ORM 模块中包含的 auth SQL 模式（没有其他表）。我没有为用户创建新的模型文件。

这是我复制到我的应用程序路径/配置目录的配置文件：

```
<?php defined('SYSPATH') or die('No direct access allowed.');

return array(

        'driver'       => 'ORM',
        'hash_method'  => 'sha256',
        'hash_key'     => 'secretkey',
        'lifetime'     => 1209600,
        'session_type' => Session::$default,
        'session_key'  => 'auth_user',
        'users'        => array()

); 
```

现在这是我的简单控制器。我尝试将用户加载到 te 数据库中，然后使用同一用户登录。

```
<?php defined('SYSPATH') or die('No direct script access.');

class Controller_User extends Controller {

    public function action_index(){

        // Enter a new user manually
        $user = ORM::factory('user');
        $user->username = 'mylogin';
        $user->password = 'mypassword';
        $user->email = 'me@email.fr';

        try{
            $user->save();
        }
        catch(ORM_Validation_Exception $e){
            $errors = $e->errors();
        }

        if(isset($errors)){
            $this->response->body(var_dump($errors));
        }else{

            // Login with this user
            $success = Auth::instance()->login('mylogin','mypassword');
            if ($success){
                $this->response->body("Welcome !");
            }else{
                $this->response->body("Not welcome...");
            }
        }
    }
} 
```

该控制器无法登录。但是当我检查我的数据库时，我看到用户已正确保存密码散列。我忘记了我的配置吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T17:42:05.617

每个用户都必须有一个`login`角色：

```
...
$user->save();
$user->add('roles', ORM::factory('role')->where('name', '=', 'login')->find()); 
```

# database - Minimum cover of set of functional dependency

> ID：13893327
> 
> 赞同：0
> 
> 时间：2012-12-15T15:05:54.090
> 
> 标签：database, relational-database, functional-dependencies

I was going through the conditions of minimum cover of a set of function dependencies.

[Here](http://en.wikipedia.org/wiki/Functional_dependency#Irreducible_function_depending_set), it is mentioned that the right hand side can have only single attribute. So `{A1A2 → B1B2}` is not possible. It should be split as `{A1A2 → B1, A1A2 → B2}`.

But in DBMS by Korth, the following condition is there

```
Each left side of a functional dependency in Fc is unique. That is, there are no
two dependencies A1 → B1 and A2 → B2 in Fc such that A1 = A2. 
```

So, according to this `{A1A2 → B1, A1A2 → B2}` is not possible. The dependencies should be combined as `{A1A2 → B1B2}` to avoid repetition.

Please clarify which is correct.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T13:31:20.987

在我看来，这似乎是符号上的差异，仅此而已。这两组 FD 是等价的。

*   {A1A2 → B1}
*   {A1A2 → B2}

*   {A1A2 → B1B2}

正如您在第一组中看到的那样，我使用的大多数自动化工具都表达了最小覆盖率。你的文字似乎更喜欢第二组。

这两种不同的表达式对可约性或覆盖率或闭包没有影响，这是计算最小覆盖率的真正问题。您*可能会*争辩说，第一个版本在右侧不超过一个非主属性，因为它更接近于 6NF 中的分解，所以它更好。

但是你应该使用你的课文和教授要求的版本，记住这是一个错误的要求。从某种意义上说，将符号从第二个版本更改为第一个版本对您是否确实找到了最小覆盖没有影响，并且它对计算最小覆盖所需的工作没有实质性影响，这是错误的。

# nhibernate - additional restrictions in a nhibernate join

> ID：13893329
> 
> 赞同：2
> 
> 时间：2012-12-15T15:06:15.247
> 
> 标签：nhibernate

Is it possible to add additional restrictions in a join in hql?

The sql:

```
LEFT JOIN dbo.PersonOrder OP ON OP.ID_PERSON = P.ID AND OP.ID_ORDER = 3 
```

Is it possible to get this in hql, linq or queryover? I have a many to many relation between *Person* and *Order*. On the left side, I want all Person objects and on the right side, i need null or the order with id 3 (if there is a link between that person and order number 3).

Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:57:28.890

使用`with`关键字

```
LEFT JOIN dbo.PersonOrder OP WITH OP.ID_ORDER = 3 
```

# c++ - C++ Opengl - 使用聚光灯照明

> ID：13893332
> 
> 赞同：7
> 
> 时间：2012-12-15T15:07:17.937
> 
> 标签：c++, opengl, glut

我有一个模型需要在聚光灯/定向光下，

意思是，我需要在模式（聚光灯和定向）之间切换。

这是带有一些解释的代码：

我可以用鼠标移动来旋转模型/光源，所以我正在使用

glRotate 和 glTranslate 。

一旦用户按下“L”键，我应该在模式之间切换。

这是闪电的代码：

```
void LightBall::projectLight(void)
{
if(LIGHT == _lightMode){
    printf("Entering LIGHT mode\n"); <--- Supposed to be a directional light
    glDisable(GL_LIGHT1);
    glEnable(GL_LIGHT0);
    glLightfv(GL_LIGHT0, GL_POSITION, _light_position);
}

if(SPOT_LIGHT == _lightMode){
    printf("Entering SPOTLIGHT mode\n"); <--- Supposed to be a spotlight
    glDisable(GL_LIGHT0);
    glEnable(GL_LIGHT1);
    glLightfv(GL_LIGHT1, GL_POSITION, _light_position);
    glLightf(GL_LIGHT1, GL_SPOT_CUTOFF, 10.0);
    glLightf(GL_LIGHT1, GL_SPOT_EXPONENT, 2.0);
    glLightfv(GL_LIGHT1,GL_SPOT_DIRECTION,_spotlight_position);
}
} 
```

问题是我在它们之间切换时总是得到相同的灯光模式，

以下是：

![定向的](../Images/07d6e6dc2848177d7b637ca0f4359e2a.png)

另一个例子是在两种光模式之间切换后仍然获得相同的光

光源旋转（小球）：

![回转](../Images/8f073998d34590cfab396d453ef017e6.png)

我怎样才能得到想要的结果？

以下是 LIGHT0 和 LIGHT1 定义：

```
 GLfloat light_ambient[] = { 1.0, 0.0, 0.0, 1.0 };
GLfloat light_diffuse[] = { 1.0, 0.0, 0.0, 1.0 };
GLfloat light_specular[] = { 1.0, 1.0, 1.0, 1.0 };
_light_position[0] =  0.0;
_light_position[1] = 1.0;
_light_position[2] = 0.0;
_light_position[3] = 0.0;

_spotlight_position[0] = 0.0;
_spotlight_position[1] = -1.0;
_spotlight_position[2] = 0.0;

glLightfv(GL_LIGHT0, GL_AMBIENT, light_ambient);
glLightfv(GL_LIGHT0, GL_DIFFUSE, light_diffuse);
glLightfv(GL_LIGHT0, GL_SPECULAR, light_specular);

glLightfv(GL_LIGHT1, GL_AMBIENT, light_ambient);
glLightfv(GL_LIGHT1, GL_DIFFUSE, light_diffuse);
glLightfv(GL_LIGHT1, GL_SPECULAR, light_specular); 
```

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-15T15:28:41.173

GL 灯是定向灯还是聚光灯取决于其位置的*w*（第 4）分量。如果坐标为 0，则它是有方向的。如果非零（通常为 1），则为聚光灯。您必须`_lightPosition`在调用之前进行相应的修改`glLightfv(..., GL_POSITION, ...)`。

# c - 在 Mint 中运行 Clutter 示例代码时出错

> ID：13893334
> 
> 赞同：0
> 
> 时间：2012-12-15T15:07:20.423
> 
> 标签：c, compiler-errors, gtk, gnome, clutter

我从 LFS (Ver 1.12.2) 下载了 clutter 并尝试从 Netbeans 运行示例。我已将 libclutter 包含在项目中，但出现以下错误：

**未定义符号：clutter_actor_set_pivot_point**

有什么建议或经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:03:08.790

问题很奇怪......终于找到了可能对以后的人有用

Mint 已经在 /usr/lib/i386-linux-gnu 中有一些文件用于 libclutter .. Netbeans 正在从那里读取 .. 一个快速的 readelf 显示 clutter_actor_set_pivot_point 不存在..

但是在全新安装 libclutter1.12.2 文件后转到 /usr/local/lib/libclutter-1.0.so.0

只需删除 i386-linux-gnu 文件夹中的文件并从 usr>local>lib 复制粘贴

# c++ - Poco Mutex 在程序关闭后导致未处理的异常

> ID：13893342
> 
> 赞同：0
> 
> 时间：2012-12-15T15:09:01.810
> 
> 标签：c++, mutex, poco-libraries

如果我使用 Poco 互斥锁关闭我的程序，我会得到一个未处理的异常。

我使用全局

```
 Poco::Mutex mymutex ; 
```

在我的 cpp 文件中，因为我有一个用于日志记录的静态类（我也尝试将其声明为静态成员，但我得到了同样的错误）。

我的代码的相关部分（它是一个静态函数）：

```
void Log::log(std::string message)
{
    try
    {
        Poco::Mutex::ScopedLock lock(mymutex);

        std::ofstream f("log.txt", std::ios_base::app) ;
        f << message << std::endl ;
        f.close() ;
    }
    catch (...)
    {
    }
} 
```

这部分代码在我的程序中运行良好（在使用互斥锁之前，彼此之间没有行），但是在我关闭程序后，我收到以下错误消息：

```
Unhandled exception at 0x77c3a710 in myprogram.exe: 0xC0000005: 
Access violation writing location 0x00000014. 
```

我还尝试在写入文件之前和之后使用 mymutex.lock() 和 mymutex.unlock() ，但我得到了同样的错误。

我也试过这段代码：

```
while(!mymutex.tryLock())
    Poco::Thread::sleep(30); 
```

但它导致了一个无限循环，程序在关闭它的窗口后并没有停止。

我使用 Visual Studio 2010 和 Poco 1.4。

# c# - GridLookUpEdit 设置索引

> ID：13893344
> 
> 赞同：1
> 
> 时间：2012-12-15T15:09:30.813
> 
> 标签：c#, winforms, devexpress

在`GridLookUpEdit`我想用两个按钮改变位置我可以得到索引

```
XGridLookUpEdit.Properties.GetIndexByKeyValue(XGridLookUpEdit.EditValue); 
```

但我不知道如何设置它

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:04:57.567

```
int x = XGridLookUpEdit.Properties.GetIndexByKeyValue(XGridLookUpEdit.EditValue);
XGridLookUpEdit.EditValue = 
    XGridLookUpEdit.Properties.View.GetRowCellValue(x + 1, "id"); 
```

# php - 在 php 中使用多维数组创建 ul 和 li

> ID：13893347
> 
> 赞同：7
> 
> 时间：2012-12-15T15:09:53.630
> 
> 标签：php, multidimensional-array, html-lists

我有以下数组：

$tree_array

当我执行 var_dump 时，我得到：

```
array(6) {
    [0]=> string(23) "$100,000 Cash Flow 2013"
    [1]=> array(6) {
        [0]=> string(1) "2" ["Goal_ID"]=> string(1) "2"
        [1]=> string(13) "Sell Iron Oak" ["Opportunity"]=> string(13) "Sell Iron Oak"
        [2]=> string(2) "10" ["OID"]=> string(2) "10"
    }
    [2]=> array(2) {
        [0]=> string(32) "ask her if she would like to buy" ["Activity"]=> string(32) "ask her if she would like to buy"
    }
    [3]=> array(6) {
        [0]=> string(1) "2" ["Goal_ID"]=> string(1) "2"
        [1]=> string(8) "Sell Car" ["Opportunity"]=> string(8) "Sell Car"
        [2]=> string(2) "11" ["OID"]=> string(2) "11"
    }
    [4]=> array(2) {
            [0]=> string(52) "Call Roy back to see if he would like to purchase it" ["Activity"]=> string(52) "Call Roy back to see if he would like to purchase it"
    }
    [5]=> array(1) {
        ["tot_opp"]=> NULL
    }
} 
```

我的最终目标是使用这些数据创建无序列表和列表 (ul, li)。随着数据库的更新，将有更多的数据添加到数组中，因此它将继续增长。我的目标是遍历数组并让它创建以下代码，并能够随着数据的增长继续创建列表。我是 php 新手，不知道如何做到这一点。

```
<ul>
<li>$100,000 Cash Flow 2013</li>
<ul>
<li>Sell Iron Oak</li>
<ul>
<li>ask her if she would like to buy</li>
</ul>
<ul>
<li>Sell Car</li>
</ul>etc... 
```

任何帮助将不胜感激！先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T15:24:32.953

对我来说似乎是一个足够简单的递归：

```
function arrayToList($in) {
  echo "<ul>";
  foreach($in as $v) {
    if( is_array($v)) arrayToList($v);
    else echo '<li>' . $v . '</li>';
  }
  echo "</ul>";
} 
```

看起来你那里有一些重复的值。你在用`mysql_fetch_array`吗？您应该使用`mysql_fetch_assoc`或`mysql_fetch_row`取决于您是否需要关联数组或索引数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T15:26:27.013

为此，您需要一个递归函数，而不是循环。这样，它将处理源数组的任何深度。

```
function make_list($arr)
{
    $return = '<ul>';
    foreach ($arr as $item)
    {
        $return .= '<li>' . (is_array($item) ? make_list($item) : $item) . '</li>';
    }
    $return .= '</ul>';
    return $return;
}
echo make_list($source_array); 
```

# c++ - 在 XCode 中放入不同的编译单元时，静态 unordered_map 被擦除

> ID：13893349
> 
> 赞同：1
> 
> 时间：2012-12-15T15:09:56.133
> 
> 标签：c++, c++11, xcode4.5, unordered-map

我的 C 类中有一个静态 unordered_map。如果我将类定义和声明放在与包含函数 main 的文件不同的文件中，我会遇到行为差异。

问题是我观察到如果类 C 与函数 main 在同一个编译单元中，一切都很好，我只看到一次文本“创建新字符串：c”。但是，如果我将代码拆分为三个文件（参见下面的清单），我会看到两次“创建新字符串：c”，这意味着**我的静态 unordered_map 在进入 main 之前就被擦除了**。

我的问题是：为什么会发生这种情况？（**仅在使用 Apple LLVM 编译器 4.1 进行编译时才会出现差异**。我已经使用 g++4.7 -std=c++11 对其进行了测试，并且拆分代码运行良好。）
提前感谢您的任何想法！

```
// would go to My_header.h

#include <unordered_map>
#include <string>
#include <iostream>

using namespace std;    

class C{
public:
  C(const string & s);
private:
  static unordered_map<string, string*> m;
  string *name;
};

// would go to My_code.cpp    
// (when separated, add #include "My_header.h")

unordered_map<string, string*> C::m;

C::C(const string & s):
name(NULL)
{
  string*& rs = m[s];
  if(rs)
  {
    name = rs;
  }
  else
  {
    cout<<"new string created: "<<s<<endl;
    rs = name = new string(s);
  }
}

// would go to main.cpp
// (when separated, add #include "My_header.h")

C c("c");

int main(int argc, const char * argv[])
{
  cout << "main" << endl;
  C c1("c");
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T15:20:26.770

全局对象的初始化顺序仅在一个翻译单元内定义。在不同的翻译之间，不能保证顺序。`std::unordered_map`因此，您可能会看到在构造之前被访问所产生的行为。

避免这些问题的方法当然是不使用全局对象。如果您真的需要使用全局对象，最好用函数包装对象。这样可以保证对象在第一次被访问时被构造。使用 C++ 2011，构造甚至是线程安全的：

```
T& global() {
    static T rc;
    return rc;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T15:31:05.847

多谢你们！按照 Dietmar 的建议，我这样做了：

```
class C{
//...
private:
  static unordered_map<string, string*>& m();
};

unordered_map<string, string*>& C::m()
{
  static unordered_map<string, string*> m;
  return m;
} 
```

然后我一直提到`m()`。奇怪的是以前没有发生过。我想我很幸运。但是，这应该是一个警告信息的情况，不是吗？

* * *

为避免此类错误，我将使用以下宏来声明和定义静态变量：

```
/// Use this macro in classes to declare static variables
#define DECLARE_STATIC(type, name) static type& name();

/// Use this macro in definition files to define static variables
#define DEFINE_STATIC(type, name) type& name(){static type local; return local;} 
```

这种情况下的用法：

```
class C{
//...
private:
  DECLARE_STATIC(unordered_map<string, string*>, m);
}
DEFINE_STATIC(unordered_map<string, string*>, m) 
```

# css - 流体和流体网格设计 CSS 的区别

> ID：13893355
> 
> 赞同：2
> 
> 时间：2012-12-15T15:10:59.873
> 
> 标签：css, layout, grid

我无法确定流体和流体网格设计之间的区别。可以说，流体布局中的任何元素都将共享一个最低公分母，因此任何布局肯定都是基于 LCD 的网格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T22:45:47.033

基于网格的布局基于使用预定义的“列”来设置页面上元素的宽度。

正如您可能知道的那样，流畅的布局是会按比例调整到浏览器宽度的东西。这仍然适用于流体网格系统，具有也使用列的附加优势。

网格布局比标准（或非网格）布局具有更多优势：

*   设计一致性
*   快速、简单的布局开发
*   鼓励不同页面元素之间的相关性和一致性
*   有助于产生视觉平衡的布局
*   通常允许在设置列数、排水沟等方面具有灵活性。

流体网格系统只是具有流体样式的网格系统（列宽是成比例的，而不是固定的）。

如果您还没有使用基于网格的布局，那么我绝对可以推荐使用它们！

给你一些参考：

*   （固定网格）[http://960.gs/](http://960.gs/)
*   （流体网格）[http://www.tinyfluidgrid.com/](http://www.tinyfluidgrid.com/)
*   （固定、流体、固定网格、流体网格）[http://twitter.github.com/bootstrap/scaffolding.html#gridSystem](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)

# php - 原则 2：在未更改的实体上强制 scheduleForUpdate

> ID：13893356
> 
> 赞同：4
> 
> 时间：2012-12-15T15:11:01.040
> 
> 标签：php, mysql, zend-framework, doctrine-orm

当没有实际更改属性时，如何手动安排实体进行更新？

我试过`$entityManager->getUnitOfWork()->scheduleForUpdate($entity)`了，但它在核心中给出了一个错误，我没有调试 Doctrine 的意图。

如果重要，则对实体进行管理：`$entity = $repository->findOne(1)`

我需要这个，所以教义会召唤我`EventSubscriber`。`flush()`

我也尝试过类似的东西`$entityManager->getEventManager()->dispatchEvent(\Doctrine\ORM\Events::preUpdate)`，但后来我的听众`preUpdate()`收到`EventArgs`了而不是`PreUpdateEventArgs`.

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-15T15:56:22.130

Wpigott 提到的方法对我不起作用（至少在学说/orm v2.4.2 中），而是我使用这个：

```
$entityManager->getUnitOfWork()->setOriginalEntityProperty(spl_object_hash($entity), 'field_name', '__fake_value__'); 
```

其中`field_name`存在的属性名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-03T20:54:49.153

该解决方案有点hacky，但我能够通过执行以下操作来实现这一点。

```
$objectManager->getUnitOfWork()->setOriginalDocumentData($object, array('__fake_field'=>'1')); 
```

这实质上会导致 Doctrine 认为文档已从原始文档更改，并将其计算为将导致事件在刷新时执行的更改。

该示例适用于 MongoODM 解决方案，但相同的技术应该适用于 ORM，如下所示。

```
$objectManager->getUnitOfWork()->setOriginalEntityData($object, array('__fake_field'=>'1')); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-09T09:28:30.850

尽管这个问题有点老了，但我只是找到了一种更优雅的方法来解决我想使用 Doctrine ORM 2.6.2 在这里分享的这个问题：

您可以简单地告诉`ClassMetadataInfo`您的表的对象只是将这些字段声明为您传递`propertyChanged`给`UnitOfWork`. 这里的重要部分是**setChangeTrackingPolicy**和**propertyChanged**调用：

```
$unitOfWork = $entityManager->getUnitOfWork();
$classMeta  = $entityManager->getClassMetadata('Your\Table\Class');
$ctp        = $classMeta->changeTrackingPolicy; # not a function but a variable

# Tell the table class to not automatically calculate changed values but just
# mark those fields as dirty that get passed to propertyChanged function
$classMeta->setChangeTrackingPolicy(ORM\ClassMetadataInfo::CHANGETRACKING_NOTIFY);

# tell the unit of work that an value has changed no matter if the value
# is actually different from the value already persistent
$oldValue = $entity->getValue('fieldName'); # some custom implementation or something
$newValue = $oldValue;
$unitOfWork->propertyChanged($entity, 'fieldName', $oldValue, $newValue);

# field value will be updated regardless of whether its PHP value has actually changed
$entityManager->flush();

# set the change tracking policy back to the previous value to not mess things up
$classMeta->setChangeTrackingPolicy($ctp); 
```

您可能还想看看`Doctrine\Common\NotifyPropertyChanged`界面。

我希望这对某人有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T13:42:22.447

目标是什么？如果没有属性更改，您为什么要计划更新？

# jquery - 访问控制允许来源 - 本地主机

> ID：13893361
> 
> 赞同：10
> 
> 时间：2012-12-15T15:12:21.117
> 
> 标签：jquery, ajax, json, api, http-headers

我在通过 ajax 接收 json 时遇到问题，错误如下。根据我迄今为止发现的有关该错误的信息，这似乎是某种跨域问题，但我不知道这意味着什么以及如何解决它。

响应头可能有问题（我自己创建了 API，之前没有经验），但是如果直接在浏览器中访问 url，则会收到 200 OK。

如果直接在浏览器中访问 url 会显示有效的 json，那么这应该不是问题。

如何解决？

**注意：该 url 转到 Apache 服务器，而不是我在 Stack 上阅读过的有关该问题的 95% 问题的文件。**

## 检查员错误：

```
XMLHttpRequest cannot load http://localhost/api/v1/products?_=1355583847077.
Origin null is not allowed by Access-Control-Allow-Origin.
Error: error 
```

## 编码：

```
 $.ajaxSetup ({
      url: "http://localhost/api/v1/products", // <--- returns valid json if accessed in the browser
      type: "GET",
      dataType: "json",
      cache: false,
      contentType: "application/json"
    })
    $.ajax({
        success: function(data){

            console.log("You made it!");
        },
        error: function(xhr) {
           console.log("Error: " + xhr.statusText);
       }
    }).done(function(data){
        console.log(data);
    }) 
```

## 参数

_ 1355583610778

## 标头

**响应标头：**

```
Connection  Keep-Alive
Content-Length  3887
Content-Type    application/json
Date    Sat, 15 Dec 2012 14:50:53 GMT
Keep-Alive  timeout=5, max=100
Server  Apache/2.2.14 (Unix) DAV/2 mod_ssl/2.2.14 OpenSSL/0.9.8l PHP/5.3.1 mod_perl/2.0.4 Perl/v5.10.1
X-Powered-By    PHP/5.3.1 
```

**请求标头：**

```
Accept  application/json, text/javascript, */*; q=0.01
Accept-Encoding gzip, deflate
Accept-Language sv-SE,sv;q=0.8,en-US;q=0.5,en;q=0.3
Connection  keep-alive
Host    localhost
Origin  null
User-Agent  Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:17.0) Gecko/17.0 Firefox/17.0 
```

## 回复

这里没有什么...

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-15T15:41:07.873

是的，这绝对是一个跨域问题。但不要担心，这个问题有两种解决方案。

### 使用 JSONP

您可以在服务器上实现对 JSONP（带填充的 JSON）的支持（即[Fergus Morrow 的解决方案](https://stackoverflow.com/questions/13893361/#13893673)）。JSONP 可以开箱即用地跨域工作，基本上是用函数调用填充 JSON。

在您的`.ajaxSetup`设置`dataType`中`jsonp`，然后在服务器端，您应该确保检查`callback`请求中命名的 url 参数。如果设置了该参数，则必须相应地填充 JSON 响应。

```
parseThis({ "json": "can", "be": "put", "in": "here" }); 
```

以上假设`callback`设置为`parseThis`。jQuery 将默认生成一个函数名称，但您可以通过`jsonpCallback`在`.ajaxSetup`.

您还可以使用快捷方式告诉 jQuery 您正在请求 JSONP，只需添加`?callback=?`到请求 url。

### 使用访问控制允许来源

另一种解决方案是`Access-Control-Allow-Origin`在响应中设置标题。

```
Access-Control-Allow-Origin: * 
```

以上将允许**任何**资源跨域使用服务。阅读下面链接的文章，了解有关如何配置的更多信息`Access-Control-Allow`。

* * *

如果您想了解有关 Access-Control-Origin 和 CORS 的更多信息，我推荐[MDN 上的这篇文章](https://developer.mozilla.org/en/docs/HTTP_access_control)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-15T19:54:19.890

通过将以下标头添加到我的服务器代码（php）中，我以一种非常简单的方式解决了它：

```
header('Access-Control-Allow-Origin: *'); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-15T15:52:50.397

尝试并实现某种形式的[JSONP](http://en.wikipedia.org/wiki/JSONP)机制。如果您使用的是 PHP，它可能就像这样简单......

```
/* If a callback has been supplied then prepare to parse the callback
 ** function call back to browser along with JSON. */
$jsonp = false;
if ( isset( $_GET[ 'callback' ] ) ) {
    $_GET[ 'callback' ] = strip_tags( $_GET[ 'callback' ] );
    $jsonp              = true;

    $pre  = $_GET[ 'callback' ] . '(';
    $post = ');';
} //isset( $_GET[ 'callback' ] )

/* Encode JSON, and if jsonp is true, then ouput with the callback
 ** function; if not - just output JSON. */
$json = json_encode( /* data here */ );
print( ( $jsonp ) ? $pre . $json . $post : $json ); 
```

所有这一切都会检查一个名为*callback*`$_GET`的var ，然后将输出包装在一个函数调用中 - 将名称作为函数名称。*`$_GET['callback']`*

 *然后你的 AJAX 调用就变成了这样......

```
$.ajax({
  type: 'GET',
  url: '/* script here */ ', 
  data: /* data here - if any */,
  contentType: "jsonp", // Pay attention to the dataType/contentType
  dataType: 'jsonp', // Pay attention to the dataType/contentType
  success: function (json) {
    /* call back */
  }
}); 
```

当 jQuery`'jsonp'`作为 dataType/contentType 给出时，它将负责为您提供回调函数名称 - 并设置回调函数等；这意味着您实际上不必做任何事情！

**来自 jQuery 文档：**

> “jsonp”：使用 JSONP 加载到 JSON 块中。添加一个额外的“？callback =？” 到 URL 的末尾以指定回调。通过将查询字符串参数“_=[TIMESTAMP]”附加到 URL 来禁用缓存，除非缓存选项设置为 true。

[来源](http://api.jquery.com/jQuery.ajax/)

最后；JSONP 将是你最好的选择——我已经包含了 PHP 代码，以防你的服务器端脚本使用 PHP；如果不是，那么原则是相同的。不管服务器端技术如何，jQuery/客户端的东西都保持不变。（*一般*）

祝你好运 ：）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-15T15:54:45.887

如果它是一个 ASP.NET WEB 应用程序，那么你也可以把它放在你的 Global.aspx 中：

HttpContext.Current.Response.AddHeader("Access-Control-Allow-Origin", "*");

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-05T15:07:49.457

更多 PHP 标头设置

```
header('Access-Control-Allow-Origin: '.$_SERVER['HTTP_ORIGIN']);
header('Access-Control-Allow-Methods: POST, GET, OPTIONS');
header('Access-Control-Max-Age: 1000');
header('Access-Control-Allow-Headers: Content-Type'); 
```

祝你好运*

# ruby-on-rails - gmap-autocomplete 不使用 Twitter-bootstrap 显示地图

> ID：13893362
> 
> 赞同：0
> 
> 时间：2012-12-15T15:12:23.123
> 
> 标签：ruby-on-rails

我在我的 Rails 应用程序中使用 gmaps-autocomplete ( rjshade @ [https://github.com/rjshade/gmaps-autocomplete/blob/master/js/gmaps.js )。](https://github.com/rjshade/gmaps-autocomplete/blob/master/js/gmaps.js)文本字段自动完成运行良好，开始键入地址会产生下拉选择，用户可以从中选择地址

但是完成后，谷歌地图应显示在相应的 div #gmaps-canvas... 中，纬度/经度数据也应显示在相应的 div #gmaps-output-latitude , #gmaps-output-longitude 中。 .

但实际上什么都没有显示..

我正在使用 Twitter-bootstrap ，两者都使用有什么问题吗？如何检查任何错误（控制台中没有 javascript 错误）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T17:49:12.477

gem 工作正常，我忘记为#gmap-canvas div 设置高度/宽度

```
#gmaps-canvas{:style => "width: 100%; height: 100%; min-height: 200px; border: solid 1px;"} 
```

# web-crawler - 如何扩展 Nutch 以进行文章抓取

> ID：13893369
> 
> 赞同：10
> 
> 时间：2012-12-15T15:13:37.523
> 
> 标签：web-crawler, nutch

我正在寻找一个框架来抓取文章，然后我找到了 Nutch 2.1。这是我的计划和每个问题：

1

将文章列表页面添加到 url/seed.txt 这是一个问题。我真正想要被索引的是文章页面，而不是文章列表页面。但是，如果我不允许列表页被索引，Nutch 将什么也不做，因为列表页是入口。那么，我怎样才能只索引没有列表页面的文章页面呢？

2

编写一个插件来解析“作者”、“日期”、“文章正文”、“标题”以及可能来自 html 的其他信息。Nutch 2.1 中的 'Parser' 插件接口是： Parse getParse(String url, WebPage page) 并且 'WebPage' 类有一些预定义的属性：

```
public class WebPage extends PersistentBase {
  // ...
  private Utf8 baseUrl;
  // ...
  private ByteBuffer content; // <== This becomes null in IndexFilter
  // ...
  private Utf8 title;
  private Utf8 text;
  // ...
  private Map<Utf8,Utf8> headers;
  private Map<Utf8,Utf8> outlinks;
  private Map<Utf8,Utf8> inlinks;
  private Map<Utf8,Utf8> markers;
  private Map<Utf8,ByteBuffer> metadata;
  // ...
}

So, as you can see, there are 5 maps I can put my specified attributes in. But, 'headers', 'outlinks', 'inlinks' seem not used for this. Maybe I could put those information into markers or metadata. Are they designed for this purpose?
BTW, the Parser in trunk looks like: 'public ParseResult getParse(Content content)', and seems more reasonable for me. 
```

3

文章索引到 Solr 后，另一个应用程序可以通过“日期”查询它，然后将文章信息存储到 Mysql 中。我这里的问题是：Nutch 可以将文章直接存入Mysql 吗？或者我可以编写一个插件来指定索引行为吗？

Nutch 是否适合我的目的？如果没有，你们会为我推荐另一个优质的框架/库吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T18:27:25.907

如果您只需要从几个网站提取文章，请查看[http://www.crawl-anywhere.com/](http://www.crawl-anywhere.com/)

它带有一个管理 UI，您可以在其中指定要使用锅炉管道文章提取器（这很棒）。您还可以通过 URL 模式匹配您想要抓取的页面与您想要抓取和编入索引的页面来指定。

# f# - F# fsi.AddPrinter：AddPrinter 有能力拆分列表吗？

> ID：13893375
> 
> 赞同：0
> 
> 时间：2012-12-15T15:13:58.433
> 
> 标签：f#, fsi

在我们的[项目](https://github.com/jack-pappas/fsharp-logic-examples)中，我们`fsi.AddPrinter`用于打印类型`formula<fol>.`

为了更容易，我们`fsi.AddPrinter sprint_fol_formula`在 fsx 文件中包含将 AST 结果转换为人类可读的结果。

```
val inline sprint_fol_formula : formula<fol> -> string 
```

在创建测试用例的过程中，我们还输出 AST 结果和人类可读的结果。

AST 结果是处理公式的结果。为了在单元测试中将 AST 转换为人类可读的格式，我们只需使用`sprint_fol_formula astResult`.

现在如果结果`formula<fol> list`不是`formula<fol>`，使用 FSI 时会输出正确的结果，但`sprint_fol_formula`不接受`formula<fol> list`。

对于差异，我可以得出的唯一合理答案是它`fsi.AddPrinter`具有将列表分开然后单独打印每种类型的内置能力。

这是真的，还是我错过了什么？

如果这是真的，您能否在记录的地方添加参考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T17:38:49.400

发生的事情很简单。有一个打印机`'a list`，它打印列表中的每个元素（或仅打印第一个元素，取决于它们的文本长度和列表的长度），并很好地格式化它（`[ _; _; _; ... ]`。打印项目时，它使用**您的**打印机。

# java - 在多个线程之间划分计算

> ID：13893379
> 
> 赞同：1
> 
> 时间：2012-12-15T15:14:15.577
> 
> 标签：java, multithreading, concurrency

我刚刚开始使用java中的线程。我有一个简单的算法，可以进行大量计算。我需要做的是在不同的线程之间划分这些计算。它看起来像这样：

```
while(...) {
      ....
      doCalculations(rangeStart, rangeEnd);
} 
```

我想做的是这样的：

```
while(...) {
     ...
     // Notify N threads to start calculations in specific range

     // Wait for them to finish calculating

     // Check results

     ... Repeat

} 
```

计算线程不必具有临界区或彼此之间同步，因为它们不会更改任何共享变量。

我不知道如何命令线程开始并等待它们完成。

thread[n].start() 和 thread[n].join() 抛出异常。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T15:31:21.047

我使用 ExecutorService

```
private static final int procs = Runtime.getRuntime().availableProcessors();
private final ExecutorService es = new Executors.newFixedThreadPool(procs);

int tasks = ....
int blockSize = (tasks + procss -1) / procs;
List<Future<Results>> futures = new ArrayList<>();

for(int i = 0; i < procs; i++) {
    int start = i * blockSize;
    int end = Math.min(tasks, (i + 1) * blockSize);
    futures.add(es.submit(new Task(start, end));
}

for(Future<Result> future: futures) {
    Result result = future.get();
    // check/accumulate result.
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-15T15:20:58.273

使用 CountDownLatch 开始，使用另一个 CountDownLatch 结束：

```
CountDownLatch start = new CountDownLatch(1);
CountDownLatch finish = new CountDownLatch(NUMBER_OF_THREADS);
start.countDown();
finish.await(); 
```

在每个工作线程中：

```
start.await();
// do the computation
finish.countDown(); 
```

如果您需要多次这样做，那么 a`CyclicBarrier`可能是您应该使用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T15:33:20.573

学习[MapReduce](http://www.joelonsoftware.com/items/2006/08/01.html)和[Hadoop](http://hadoop.apache.org/)。我认为这可能是比自己滚动更好的方法，但代价是更大的依赖关系。

# android - 如果它的 onStop() 我可以从 Acitivity 调用一个函数吗

> ID：13893382
> 
> 赞同：-1
> 
> 时间：2012-12-15T15:14:22.830
> 
> 标签：android

我想可能不是我错了有不同的方法吗？问题是我有一个可以从活动访问的功能，但我无法在服务中定义相同的功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T15:57:03.133

您的问题有点模棱两可，但无论如何我都会尝试回答：

*   是的，您可以从-method*内部*调用任何方法（不会花费太长时间） 。`onStop()`
*   *但是，在当前处于停止状态*的 Activity 上调用方法并不是一个好主意。

不要滥用`Activity`函数集合的类！它里面应该只有**直接**与 Activity 本身一起工作的方法。

对于函数集合，或者如果您需要从多个活动中访问具有一种状态的类，请考虑以下其中之一：

*   覆盖[`Application`](http://developer.android.com/reference/android/app/Application.html)
*   使用[单例](http://en.wikipedia.org/wiki/Singleton_pattern)（推荐）

# javascript - Javascript切换/切换？

> ID：13893385
> 
> 赞同：2
> 
> 时间：2012-12-15T15:15:01.863
> 
> 标签：javascript, jquery, toggle, switch-statement

有没有比我使用的更好的方法来实现切换/切换。它有效，但对我来说似乎很笨拙。

```
var foo = true;

$(document).on("click","$element",function(){
    if(foo){
     //code
     foo = false;
    }
    else{
      //code
      foo = true;
    }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T15:18:34.033

这更短更甜：

```
 foo = !foo 
```

除非中间代码不同，在这种情况下解决方案取决于该代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T15:20:25.530

你可以这样做：

```
var foo = true;
$(document).on("click","$element",function(){ foo=!foo; } 
```

但是因为您使用的是 jQuery，您可能希望将其存储在数据属性中：

```
$(document).on("click","$element",function(){
  $(this).data('foo', !$(this).data('foo'));
}); 
```

# jquery - 如何使 jQuery 事件触发一次

> ID：13893386
> 
> 赞同：1
> 
> 时间：2012-12-15T15:15:03.410
> 
> 标签：jquery

我有一个基本图像，它位于主容器之上，一旦用户访问该站点，该容器就会淡入。我希望此事件**仅**在初始加载时发生。这可以实现吗？

这是.js

```
 <script type="text/javascript">
    $(document).ready(function () {
        $('#landing').animate({opacity: 0.01}, 5000, function () {
            $(this).hide();
            $('#main').children().fadeIn(5000);
        });   
    });
</script> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T15:19:29.897

您可以设置一个 cookie，然后仅在未设置 cookie 时运行动画。

如果你想使用 jQuery，那么我的建议是使用这个 jQuery 插件： [https ://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

并执行以下操作：

```
if (!$.cookie('intro_animation')) {
    $.cookie('intro_animation', 'true');

    // Do your animation
    $('#landing').animate({opacity: 0.01}, 5000, function () {
        $(this).hide();
        $('#main').children().fadeIn(5000);
    }); 
} 
```

# jquery - jQuery Animate - 不为绝对 DIV 设置动画

> ID：13893389
> 
> 赞同：9
> 
> 时间：2012-12-15T15:15:17.277
> 
> 标签：jquery, animation, css-position

你知道为什么我不能用 jQuery 为绝对定位的 div 设置动画吗？

请在此处显示（这是我的示例）：

[http://jsfiddle.net/2VJe8/](http://jsfiddle.net/2VJe8/)

HTML：

```
<html>
<body>
    <div class="test">
        <div class="box">
            <div class="arrow"></div> 
        </div>
        <a href="#" class="btnStartAni">Animate</a>
    </div>
</body> 
```

​</p>

CSS：

```
.test { margin: 0; padding: 0;}
.test .box { width: 150px; height: 140px; background-color: red; position: relative; }
.test .box .arrow { width: 50px; height: 50px; background-color: black; position: 
absolute; bottom: 0; right: -50px;}​ 
```

JavaScript：

```
jQuery(".test a.btnStartAni").on("click", function(e){
   e.preventDefault();
  jQuery(".box").animate({ width: 400}, 800);
}); 
```

​</p>

黑匣子在动画隐藏期间！但我不知道为什么？

你能帮我吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-15T15:23:41.470

jQuery会在你使用时导致溢出隐藏`.animate`，所以将你的代码更改为

```
jQuery(".test a.btnStartAni").on("click", function(e){
    e.preventDefault();
    jQuery(".box").animate({ width: 400}, 800).css('overflow', 'visible');
});
​ 
```

它应该工作

JsFiddle：http: [//jsfiddle.net/2VJe8/1/](http://jsfiddle.net/2VJe8/1/)

来源：[jQuery .animate() 强制样式“溢出：隐藏”](https://stackoverflow.com/questions/3363035/jquery-animate-forces-style-overflowhidden)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T15:23:25.443

`overflow: hidden``.box`当 jQuery 为框设置动画时被设置。`.arrow`溢出，`.box`然后消失。考虑更改标记。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T15:35:05.033

您还可以重新排列元素以获得相同的效果（使用`float:left`and `display:inline-block`）

[http://jsfiddle.net/mkVrL/](http://jsfiddle.net/mkVrL/)

# io - 如何在 Rakudo Perl6 中读取 STDIN？

> ID：13893392
> 
> 赞同：11
> 
> 时间：2012-12-15T15:15:34.253
> 
> 标签：io, stdin, raku, rakudo

就这么简单，**如何在 Perl6 中从 STDIN 读取输入？**

我认为有很多方法可以做到这一点，但我对最惯用的 Perl6 解决方案感兴趣。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-15T15:15:34.253

Perl6 中的标准输入文件描述符是`$*IN`（在 Perl5 中，`*STDIN`typeglob 对 STDIN 文件描述符的引用为`*STDIN{IO}`）。

从标准输入读取的一种方法如下：

```
for lines() {
    say "Read: ", $_
} 
```

事实上，`lines()`没有调用对象默认为`$*IN.lines()`.

使用局部变量的另一种方法是：

```
for $*IN.lines() -> $line {
    say "Read: ", $line
} 
```

看到更多替代方法会很酷。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-17T20:54:17.337

您还可以使用`slurp`不带参数的方式 slurp 整个标准输入。此代码将吞下整个输入并打印出来。

```
print slurp; 
```

如果你想得到行，你可以使用`lines()`迭代器，就像`<>`在 Perl 5 中一样。请注意，与 Perl 5 不同的是，它会自动 chomps 行。

```
for lines() {
    say $_;
} 
```

当您想获得单行时`lines()`，可以使用`get`.

```
say get(); 
```

如果您需要向用户询问某事，请使用`prompt()`.

```
my $name = prompt "Who are you? ";
say "Hi, $name."; 
```

# iphone - 下一个按钮不浏览 UITextField

> ID：13893394
> 
> 赞同：1
> 
> 时间：2012-12-15T15:15:39.987
> 
> 标签：iphone, objective-c, ios, delegates, uitextfield

一段时间后，在这里搜索一些解决方案，我们发现了这篇文章：

[如何浏览文本字段（下一步/完成按钮）](https://stackoverflow.com/questions/1347779/how-to-navigate-through-textfields-next-done-buttons)

我们试过了，但不幸的是它根本不起作用。请注意，我们把`UITextFields`里面的`UITableView`.

我们认为问题出在代表身上，但我们不知道如何处理。下面我向您展示我们的代码：

**。H：**

```
#import <UIKit/UIKit.h>

@interface LoginViewController : UIViewController <UITableViewDelegate, UITableViewDataSource, UITextFieldDelegate> {

    UITableView *loginTableView;
    UITextField *textField;

}

@property UITableView *loginTableView;
@property UITextField *textField;
@property UIButton *loginButton;
@property UIButton *cancelButton;

@end 
```

**米：**

```
#import <QuartzCore/QuartzCore.h>
#import "LoginViewController.h"
#import "RootViewController.h"

@interface LoginViewController ()

@end

@implementation LoginViewController

@synthesize loginTableView, textField, loginButton, cancelButton;

- (void)viewDidLoad {

    [super viewDidLoad];

    // Make rounded corners view
    [self.view.layer setCornerRadius:4.0];
    [self.view.layer setMasksToBounds:YES];
    self.view.layer.opaque = NO;
    self.view.backgroundColor = [UIColor whiteColor];

    // Create background image view
    UIImageView *loginBackgroundImageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, self.view.bounds.size.width, self.view.bounds.size.height+20)];
    // Create background's image
    UIImage *backgroundImage = [UIImage imageNamed:@"loginbackground.png"];
    loginBackgroundImageView.image = backgroundImage;
    [self.view addSubview:loginBackgroundImageView];

    // Create logo's image
    UIImage *logoImage = [UIImage imageNamed:@"logo.png"];

    // Create logo's image view
    UIImageView *logoImageView = [[UIImageView alloc] initWithFrame:CGRectMake(self.view.bounds.size.width/2 - logoImage.size.width/2, self.view.bounds.size.height/9, logoImage.size.width, logoImage.size.height)];

    // Set image to logo's image view
    logoImageView.image = logoImage;

    [self.view addSubview:logoImageView];

    // Create login table view
    loginTableView = [[UITableView alloc] initWithFrame:CGRectMake(self.view.bounds.size.width/2 - (self.view.bounds.size.width/1.2)/2, self.view.bounds.size.height/3, self.view.bounds.size.width/1.25, 100) style:UITableViewStylePlain
                      ];
    loginTableView.delegate = self;
    loginTableView.dataSource = self;

    // Create login container table view
    UIImage *containerImage = [UIImage imageNamed:@"loginform.png"];
    UIImageView *containerImageView = [[UIImageView alloc] initWithFrame:CGRectMake(self.view.bounds.size.width/2 - containerImage.size.width/2, self.view.bounds.size.height/3, containerImage.size.width, containerImage.size.height)];
    containerImageView.image = containerImage;
    [self.view addSubview:containerImageView];

    // Custom table view
    loginTableView.backgroundColor = [UIColor clearColor];
    loginTableView.separatorColor = [UIColor clearColor];

    // Disable scroll
    loginTableView.scrollEnabled = NO;

    // Add login table view to main view
    [self.view addSubview:loginTableView];

    // Create buttons images
    UIImage *loginImage = [UIImage imageNamed:@"loginbtn2.png"];
    UIImage *cancelImage = [UIImage imageNamed:@"cancelbtn.png"];

    // Create buttons
    loginButton = [UIButton buttonWithType:UIButtonTypeCustom];
    cancelButton = [UIButton buttonWithType:UIButtonTypeCustom];

    // Set buttons' normal state image
    [loginButton setImage:loginImage forState:UIControlStateNormal];
    [cancelButton setImage:cancelImage forState:UIControlStateNormal];

    // Place buttons
    loginButton.frame= CGRectMake((self.view.bounds.size.width/2)-(loginImage.size.width/2), self.view.bounds.size.height/1.65, loginImage.size.width, loginImage.size.height);
    cancelButton.frame= CGRectMake((self.view.bounds.size.width/2)-(cancelImage.size.width/2), self.view.bounds.size.height/1.375, cancelImage.size.width, cancelImage.size.height);

    // Set buttons' action
    [loginButton addTarget:self action:@selector(loginButtonPressed:) forControlEvents:UIControlEventTouchUpInside];
    [cancelButton addTarget:self action:@selector(cancelButtonPressed:) forControlEvents:UIControlEventTouchUpInside];

    // Set button to the main view
    [self.view addSubview:loginButton];
    [self.view addSubview:cancelButton];

}

- (void)didReceiveMemoryWarning {

    [super didReceiveMemoryWarning];

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{

    return 2;

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
        cell.accessoryType = UITableViewCellAccessoryNone;
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
        if ([indexPath section] == 0) {
            textField = [[UITextField alloc] initWithFrame:CGRectMake(50, 11, 200, 25)];
            textField.adjustsFontSizeToFitWidth = NO;
            textField.textColor = [UIColor darkGrayColor];
            textField.backgroundColor = [UIColor clearColor];
            if ([indexPath row] == 0) {
                textField.placeholder = @"Username";
                textField.keyboardType = UIKeyboardTypeEmailAddress;
                textField.returnKeyType = UIReturnKeyNext;
                textField.autocorrectionType = UITextAutocorrectionTypeNo;
                textField.autocapitalizationType = UITextAutocapitalizationTypeNone;
                textField.tag = 0;
            }
            else {
                textField.placeholder = @"Password";
                textField.keyboardType = UIKeyboardTypeEmailAddress;
                textField.returnKeyType = UIReturnKeyDone;
                textField.autocorrectionType = UITextAutocorrectionTypeNo;
                textField.autocapitalizationType = UITextAutocapitalizationTypeNone;
                textField.secureTextEntry = YES;
                textField.tag = 1;
            }
            textField.clearButtonMode = UITextFieldViewModeAlways;
            textField.delegate = self;
            [textField setEnabled: YES];
            [cell addSubview:textField];
        }
    }
    if ([indexPath section] == 0) { // Email & Password Section
        if ([indexPath row] == 0) { // Email
            cell.imageView.image = [UIImage imageNamed:@"usernameico.png"];
        }
        else {
            cell.imageView.image = [UIImage imageNamed:@"passwordico.png"];
        }
    }
    else { // Login button section
        cell.textLabel.text = @"Log in";
    }
    return cell;    
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *) tableView {
    return 1;
}

-(BOOL)textFieldShouldReturn:(UITextField*) formTextField {
    NSInteger nextTag = formTextField.tag + 1;
    // Try to find next responder
    UIResponder* nextResponder = [textField.superview viewWithTag:nextTag];
    if (nextResponder) {
        // Found next responder, so set it.
        [nextResponder becomeFirstResponder];
    } else {
        // Not found, so remove keyboard.
        [formTextField resignFirstResponder];
    }
    return NO; // We do not want UITextField to insert line-breaks.
}

- (void)loginButtonPressed: (UIButton *) sender {

}

- (void)cancelButtonPressed: (UIButton *) sender {

}

@end 
```

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T15:56:39.500

一个一个地给你的 textField 标签并使用 textField 委托

```
-(BOOL)textFieldShouldReturn:(UITextField *)textField
{
    int NextTextField = textField.tag+1;

    UITextField *txt = (UITextField *) [tableView viewWithTag:NextTextField];
    [txt becomeFirstResponder];
    return NO;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T21:18:35.363

问题是桌子。当您向文本视图询问它的超级视图时，它将返回不包含任何其他同级的单元格。尝试：

```
UIResponder* nextResponder = [tableView viewWithTag:nextTag]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T06:38:28.800

在方法中使用您的 UITextField 创建一个数组`cellForRowAtIndexPath:`..

```
[txtArray addObject:textField]; 
```

然后这种波纹管方法将起作用......

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    int i=[txtArray count];
    int x=textField.tag+1;
    UITextField *nextTextField = (UITextField *)[txtArray objectAtIndex:x];
    if (x<i-1) {
        [nextTextField becomeFirstResponder];
    } else {
        [textField resignFirstResponder];
    }
    return YES;
} 
```

我希望这可以帮助你...

# mysql - 创建我的 MySQL 数据库的最有效方法是什么

> ID：13893396
> 
> 赞同：0
> 
> 时间：2012-12-15T15:15:54.810
> 
> 标签：mysql, database-design

我正在考虑做类似的事情...

```
Table Pants (20 entrees)  
| ID | Item | Description | Price   

Table Shirts (20 entrees)   
| ID | Item | Description | Price   

Table Socks (5 entrees)    
| ID | Item | Description | Price 
```

然后我在 $table 中运行一个 php foreach ID，以填充页面上的列表。

那么这是一种有效的方法吗，因为我的一些表可能没有很多主菜？或者我应该将所有主菜放在一个表中，并为不同的类别添加一个额外的字段，然后找到另一种通过新字段填充我的页面的方法？或者也许是一个更大的想法？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T15:28:06.133

您的模型不灵活且效率不高。您的第二个解决方案是创建一个名为 items 的表并添加一个名为 categories 的额外字段，该字段应该是外键。你可以查看这个[http://sqlfiddle.com/#!2/74c91/1](http://sqlfiddle.com/#!2/74c91/1)，这里就是你需要的数据库创建所需的代码：

```
/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET NAMES utf8 */;
/*!40014 SET FOREIGN_KEY_CHECKS=0 */;

-- Dumping structure for table database.categories
CREATE TABLE IF NOT EXISTS `categories` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL,
  `created` datetime DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- Dumping data for table database.categories: ~0 rows (approximately)
/*!40000 ALTER TABLE `categories` DISABLE KEYS */;
INSERT INTO `categories` (`id`, `name`, `created`) VALUES
    (1, 'Pants ', '2012-12-15 11:37:27'),
    (2, 'Shirts ', '2012-12-15 11:37:36'),
    (3, 'Socks ', '2012-12-15 10:38:47');
/*!40000 ALTER TABLE `categories` ENABLE KEYS */;

-- Dumping structure for table database.clothes
CREATE TABLE IF NOT EXISTS `clothes` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `item` varchar(255) NOT NULL,
  `description` text,
  `category_id` int(10) NOT NULL,
  `created` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `category_id` (`category_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- Dumping data for table database.clothes: ~0 rows (approximately)
/*!40000 ALTER TABLE `clothes` DISABLE KEYS */;
INSERT INTO `clothes` (`id`, `item`, `description`, `category_id`, `created`) VALUES
    (1, 'red socks', 'Red Socks Rocks', 3, '2012-12-15 10:39:06'),
    (2, 'blue socks', 'nice socks too', 3, '2012-12-15 10:39:18'),
    (3, 'grey pants', 'pretty cool', 1, '2012-12-15 10:40:34'),
    (4, 'Blue Shirt', 'Nice blue shirt', 2, '2012-12-15 10:40:10');
/*!40000 ALTER TABLE `clothes` ENABLE KEYS */;
/*!40014 SET FOREIGN_KEY_CHECKS=1 */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */; 
```

这是检索数据的代码：

```
 SELECT 
clothes.id AS clotheId, 
clothes.item AS clotheItem, 
clothes.description AS clotheDescription, 
categories.id AS categoryId, 
categories.name AS categoryName 
FROM clothes 
LEFT JOIN categories 
ON clothes.category_id=categories.id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T15:22:38.707

我会选择后者。

```
 ID | Item | Description | Price | Type 
```

然后使用如下查询：

```
SELECT * FROM items WHERE type='$type' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T15:24:18.663

我不会将这些数据存储在单独的表中。创建一个表，然后包含一个关于项目类型的指示符。

与此类似：

```
create table ClothingItems
(
  id,
  typeid,
  item,
  description,
  price
);

create table clothingType
(
  typeid,
  name
); 
```

然后查询您可以使用：

```
select *
from clothingitems i
left join clothingType t
  on t.typeid = t.typeid
where t.name = 'socks' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T15:29:24.893

好吧，它目前可能没有那么多主菜。但也许在未来？不要把自己放在角落里:)。

问自己这个问题；-一篇文章可以属于多个类别吗？

如果否，您应该创建至少 2 个表（一对多关系）：

**类别**

id|标题|描述|...

**文章**

id|category_id|标题|价格|...

如果是，您应该创建至少 3 个表（多对多关系）：

**类别**

id|标题|描述|...

**文章**

id|category_id|标题|价格|...

**文章_类别**

article_id|category_id

祝你好运:)

# php - 使用android从mysql中检索数据

> ID：13893398
> 
> 赞同：0
> 
> 时间：2012-12-15T15:16:48.240
> 
> 标签：php, android, mysql

我遇到了一个问题，例如：我们有 2 个用户，所以用户 A 将数据插入数据库，并且可以毫无问题地检索它。用户 B 将数据插入数据库，当用户 B 想要检索数据时，用户 B 获取的是用户 A 而不是用户 B 的数据。

什么会导致这个问题？

这是我从 mysql 数据库获取数据的 php 代码：

```
<?php

// array for JSON response
$response = array();

// include db connect class
require_once __DIR__ . '/db_connect.php';

// connecting to db
$db = new DB_CONNECT();

// check for post data
if (isset($_GET["subject_id"])) {
    $subject_id = $_GET['subject_id'];

    // get a product from products table
    $result = mysql_query("SELECT * FROM subject_offered WHERE subject_id = $subject_id");

    if (!empty($result)) {
        // check for empty result
        if (mysql_num_rows($result) > 0) {

            $result = mysql_fetch_array($result);

            $product = array();
            $product["subject_id"] = $result["subject_id"];
            $product["lecturer_name"] = $result["lecturer_name"];
            $product["time_offered"] = $result["time_offered"];
            $product["subject_details"] = $result["subject_details"];

            //$product["updated_at"] = $result["updated_at"];
            // success
            $response["success"] = 1;

            // user node
            $response["product"] = array();

            array_push($response["product"], $product);

            // echoing JSON response
            echo json_encode($response);
        } else {
            // no product found
            $response["success"] = 0;
            $response["message"] = "No subject found";

            // echo no users JSON
            echo json_encode($response);
        }
    } else {
        // no product found
        $response["success"] = 0;
        $response["message"] = "No subject found";

        // echo no users JSON
        echo json_encode($response);
    }
} else {
    // required field is missing
    $response["success"] = 0;
    $response["message"] = "Required field(s) is missing";

    // echoing JSON response
    echo json_encode($response);
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T16:43:57.253

```
 // get a product from products table
    $result = mysql_query("SELECT * FROM subject_offered WHERE subject_id = $subject_id"); 
```

应该

```
 // get a product from products table
       $result = mysql_query("SELECT * FROM subject_offered WHERE subject_id = '$subject_id' ");
//some times when you miss '' this single commas then it also create a problem 
```

# python - 带有新行的 Python 打印数组

> ID：13893399
> 
> 赞同：26
> 
> 时间：2012-12-15T15:17:22.210
> 
> 标签：python

我是 python 新手，有一个简单的数组：

```
op = ['Hello', 'Good Morning', 'Good Evening', 'Good Night', 'Bye'] 
```

当我使用 pprint 时，我得到这个输出：

```
['Hello', 'Good Morning', 'Good Evening', 'Good Night', 'Bye'] 
```

无论如何我可以删除引号、逗号和括号并在单独的行上打印。所以输出是这样的：

```
Hello
Good Morning
Good Evening
Good Night
Bye 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-12-15T15:19:17.703

您可以[`join`](http://docs.python.org/2/library/stdtypes.html#str.join)使用换行符来显示字符串，并打印结果字符串：

```
print "\n".join(op) 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2018-12-02T22:52:21.933

对于 Python 3，我们还可以使用列表解包
[https://docs.python.org/3.7/tutorial/controlflow.html#unpacking-argument-lists](https://docs.python.org/3.7/tutorial/controlflow.html#unpacking-argument-lists)

```
print(*op, sep='\n') 
```

这是一样的

```
print('Hello', 'Good Morning', 'Good Evening', 'Good Night', 'Bye', sep='\n') 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-12-15T18:13:53.610

你似乎很困惑。让我帮你澄清一些你心中的事情=）

1.  首先，您拥有的是一个`list`，而不是一个数组。不同之处在于列表是一种更加动态和灵活的数据结构（在 Python 等动态语言中的列表中）。例如，您可以拥有多个不同类型的对象（例如，有 2 `string`s、3 `int`s、one`socket`等）
2.  列表中单词周围的引号表示它们是 type 的对象`string`。
3.  当您执行`print op` （或`print(op)`在 python 3+ 中）时，您实际上是在要求 python 向您显示该特定列表对象及其内容的可打印表示。因此引号，逗号，括号等。
4.  在 python 中，您有一个非常简单的`for each`循环，可用于遍历可迭代对象的内容，例如`list`. 只需这样做：

`for greeting in op: print greeting`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-15T15:18:16.333

逐行打印

```
for word in op:
    print word 
```

这样做的好处是，如果`op`碰巧很长，那么您不必纯粹为了打印目的而创建新的临时字符串。

# rspec - Rspec比较：应该eq，match，be，==之间的区别？

> ID：13893400
> 
> 赞同：5
> 
> 时间：2012-12-15T15:17:50.563
> 
> 标签：rspec

开始对黄瓜使用 rspec 断言，我对使用哪种方式进行字符串比较感到怀疑。我尝试了以下 4 种方法，它们似乎都产生了相同的结果，所以我想知道其中一种方法是否比其他方法更好？

而且，这四种方法之间的区别是否容易解释？也许举个例子？

```
page.first('div#navigation a').text.should == 'Radio')
page.first('div#navigation a').text.should eq('Radio')
page.first('div#navigation a').text.should match('Radio')
page.first('div#navigation a').text.should (be 'Radio') 
```

非常感谢！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T15:20:31.700

对于您正在执行的字符串比较`==`，`eq`和`(be .)`基本相同。

is 模式匹配并将匹配部分，因此将`match`匹配 bRadioity 如果这是`a`锚标记中的整个文本，则对于其他方法将不正确

例如

```
1.9.3-p194 :001 > a="text with radio"
 => "text with radio" 
1.9.3-p194 :002 > a.=='radio'
 => false 
```

和

```
1.9.3-p194 :013 > b="radioz"
 => "radioz" 
1.9.3-p194 :014 > b.=="radio"
 => false 
1.9.3-p194 :015 > b.match "radio"
 => #<MatchData "radio"> 
```

笔记：

```
== is ruby (which also has .eql? available though not shown here).
.eq is an rspec helper as is the (be .) construct 
```

就我个人而言，我`==`最喜欢字符串比较。其他人更喜欢`.eql`它，因为它与`=`（更突出，更少混乱）不同。我可能`==`更喜欢它，因为它似乎更易于跨语言移植。

# security - Acegi 在浏览器或服务器中编码密码

> ID：13893401
> 
> 赞同：-1
> 
> 时间：2012-12-15T15:17:54.250
> 
> 标签：security, spring-security, passwords, md5, encode

我正在使用 acegi 安全性，我在 .xml 文件中看到：

```
<property name="passwordEncoder">
     <bean class="org.acegisecurity.providers.encoding.Md5PasswordEncoder" />
</property> 
```

但我现在不知道我的密码会从浏览器或服务器编码吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T19:36:07.030

这看起来像是非常旧的代码（因为它仍在使用`org.acegisecurity`命名空间），但行为是相同的。从客户端（浏览器）发送到服务器的密码在与存储在数据源（可能是也可能不是数据库）中的值进行比较之前，会使用给定的类进行编码。

指针 1：[摘自](http://www.packtpub.com/article/spring-security-configuring-secure-passwords?utm_source=springsecuritybook.com&utm_medium=blog&utm_content=authorsite&utm_campaign=mdb_003541)涵盖该主题的优秀“Spring Security 3”一书

指针 2：[Javadoc](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/crypto/password/PasswordEncoder.html)

# android - 将变量添加到末尾

> ID：13893412
> 
> 赞同：-1
> 
> 时间：2012-12-15T15:18:55.513
> 
> 标签：android, variables, android-intent

我有一个变量

```
address = getIntent().getStringExtra("id"); 
```

我可以在 R.raw 之后将此地址添加到此行的末尾以代替 HERE

```
 myvid.setVideoURI(Uri.parse("android.resource://" + getPackageName() +"/"+R.raw.HERE)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T15:39:35.583

尝试：

```
address = getIntent().getStringExtra("id");

String strUri = "android.resource://"+ getPackageName()+ "/" + "raw/"+address;
Uri uri = Uri.parse(strUri);
myvid.setVideoURI(uri); 
```

# spring-security - 在 Spring Security 中配置记住我

> ID：13893415
> 
> 赞同：0
> 
> 时间：2012-12-15T15:19:25.090
> 
> 标签：spring-security, remember-me

我如何在spring security中配置remember-me服务。我正在使用spring3.0 +hibernate3+ struts2。我尝试过如下。

登录.jsp

```
<input type="checkbox" name="_spring_security_remember_me"/>remember-me 
```

applicationContext-security.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:s="http://www.springframework.org/schema/security"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.springframework.org/schema/beans
          http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
          http://www.springframework.org/schema/security
          http://www.springframework.org/schema/security/spring-security-3.0.3.xsd">

    <description>SpringSecurity安全配置</description>

    <!-- http安全配置 -->
    <s:http auto-config="true" use-expressions="true" >
        <s:intercept-url pattern="/css/**" filters="none" />
        <s:intercept-url pattern="/img/**" filters="none" />
        <s:intercept-url pattern="/js/**" filters="none" />

        <s:intercept-url pattern="/account/user!save*" access="hasAnyRole('ROLE_修改用户')" />
        <s:intercept-url pattern="/account/user!delete*" access="hasAnyRole('ROLE_修改用户')" />
        <s:intercept-url pattern="/account/user*" access="hasAnyRole('ROLE_浏览用户')" />
        <s:intercept-url pattern="/account/role!save*" access="hasAnyRole('ROLE_修改角色')" />
        <s:intercept-url pattern="/account/role!delete*" access="hasAnyRole('ROLE_修改角色')" />
        <s:intercept-url pattern="/account/role*" access="hasAnyRole('ROLE_浏览角色')" />

        <s:form-login login-page="/login.action" default-target-url="/" authentication-failure-url="/login.action?error=true" />
        <s:logout logout-success-url="/" />
        <s:remember-me/>
    </s:http>

    <!-- 认证配置, 使用userDetailsService提供的用户信息 -->
    <s:authentication-manager erase-credentials="false">

        <s:authentication-provider user-service-ref="userDetailsService">
            <s:password-encoder hash="plaintext" />
        </s:authentication-provider>
    </s:authentication-manager>

    <!-- 项目实现的用户查询服务 -->
    <bean id="userDetailsService" class="net.top.system.service.account.UserDetailsServiceImpl" />
</beans> 
```

但根本没有用。我还需要在我的应用程序中配置什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T18:19:00.290

为了创建一个已经被 Spring 保护的应用程序，需要在 XML 中添加以下内容：

```
<sec:http authentication-manager-ref="authenticationManager">
    <sec:intercept-url pattern="/secure/**" access="ROLE_USER" />
       <sec:form-login/>
    <sec:custom-filter … />

    <sec:remember-me 
        data-source-ref="dataSource"
        user-service-ref="userDetailsService"/>
</sec:http> 
```

请注意，使用“数据源”不是“必须”，但它实际上声明您要使用 JDBC 持久令牌。（在这种情况下，Spring 使用 PersistentTokenBasedRememberMeServices。）当然，数据源 bean 必须在 XML 中声明。

正如[Spring 所记录的](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#remember-me)，数据库中必须存在一个名为 persistent_logins 的表。

“userDetailsS​​ervice”是对 UserService bean 的引用，其中声明了用户和密码。它可以在 XML 中，也可以指向数据库。

在运行时，Spring 创建一个名为 SPRING_SECURITY_REMEMBER_ME_COOKIE( ) 的 Cookie。它与“JSESSION”Cookie 一起出现。如果我们删除 JSESSION（意味着我们打开一个全新的会话，就像重新打开浏览器一样），“记住我”cookie 会记住上次登录，并创建一个新的 JSESSION。

HTH :-)

# django - 从tastepie中的URI获取完整实例

> ID：13893417
> 
> 赞同：0
> 
> 时间：2012-12-15T15:19:35.417
> 
> 标签：django, tastypie

在 POST 上，我使用该`obj_create`函数创建工作区模型的新实例。工作区有一个所有者，它是用户的外部字段。从客户端发送的数据仅包含表单用户的 URI `"/api/v1/users/1/"`。如何从我的数据库中获取完整的实例？

我已经使用`hydrate`和`get_via_uri`来自文档，但它没有用。另一种可能性是从 URI 中获取该用户的 id 并查询数据库中的实例。但是我不确定这是我应该怎么做的（我是新来的美味派）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T15:26:26.103

文件对此非常清楚：`full=True`

[http://django-tastypie.readthedocs.org/en/latest/fields.html](http://django-tastypie.readthedocs.org/en/latest/fields.html#tastypie.fields.RelatedField.full)

# codeigniter - CodeIgniter URL 重写不起作用

> ID：13893421
> 
> 赞同：0
> 
> 时间：2012-12-15T15:20:16.900
> 
> 标签：codeigniter

我正在尝试使用**www.hostname.com/crm/some/url**将 CodeIgniter 框架中的 url 重定向到**www.hostname.com/index.php?/some/url**

我在我的 .htacess 中写了以下规则

```
RewriteEngine on
RewriteRule ^crm(.*)$ index.php?/$1     [L] 
```

当我在浏览器中尝试此操作时，我从 codeIngnitor 获得页面未找到 404。但是，如果在重定向规则中添加 [R] 标志，它可以正常工作，并且我可以在更改后按预期看到新的 url。

我试过apache重写日志。一切看起来都很合适。我没有重写后 CodeIgniter 框架看到的 URL。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T03:40:11.337

您是否有理由不使用典型的 Codeigniter .htaccess？

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-15T06:39:32.020

> 您可以按照此操作，将此代码复制并粘贴到您的 .htaccess 文件中。我想它会对你有所帮助。

```
RewriteEngine on
RewriteCond $1 !^(index\.php|(.*)\.swf|forums|images|css|uploads|themes|downloads|jquery|js|robots\.txt|favicon\.ico)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ ./index.php?$1 [L,QSA] 
```

# python - 如何执行 Python 程序并使用 exec() 获取变量？

> ID：13893427
> 
> 赞同：1
> 
> 时间：2012-12-15T15:20:45.503
> 
> 标签：python, exec, python-3.3

我想使用执行正确的 Python 程序`exec()`，然后在执行后获取变量及其值。谷歌说我应该创建一个字典并在那里写下执行结果：`exec(code_object)`在变量中。但不幸的是，这在 Python 3 中没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-26T22:27:16.377

Python 3 中的代码应该是：

```
exec(code_object, variables) 
```

此语法也[与 Python 2 兼容](https://stackoverflow.com/a/29456463/918959)。

* * *

```
exec(code_object) in variables 
```

将在 Python 3 中*编译*和运行，但做的事情与 Python 2 完全不同——它将`code_object`在当前范围内执行；将`exec`返回`None`；然后表达式`None in variables`将评估`False`，因为`None`它不是`variables`; 结果将被丢弃——因此除了`code_object`看到错误的范围外，既不会发生编译时错误，也不会发生运行时错误。

# ruby-on-rails - 如何用 belongs_to 对象编写范围？

> ID：13893429
> 
> 赞同：9
> 
> 时间：2012-12-15T15:21:04.687
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord, scopes

我有以下型号

*楷模*

```
Job
  belongs_to :company
Company
  has_many :jobs 
```

现在，我使用以下方法选择所有`Jobs` 已接受的内容：`Company`

```
def self.with_accepted_company
  Job.all.reject {|job| job.company.state != "accepted" }
end 
```

但我想为此使用范围并将其与其他范围一起使用。这是否可以在`Job`模型中编写该范围？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-15T15:28:15.633

我会做这样的事情（来自[http://guides.rubyonrails.org/active_record_querying.html](http://guides.rubyonrails.org/active_record_querying.html)）

```
class Job
  scope :accepted_with_active_company, ->() {
    joins(:company).where('companies.state' => "accepted") 
  }
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-22T14:17:03.790

这是 where 子句的另一种语法：

```
class Job
  scope :accepted_with_active_company, ->() {
    joins(:company).where(companies: { state: 'accepted' }) 
  }
end 
```

# python - 获取字符串/列表中的第一个元素

> ID：13893430
> 
> 赞同：0
> 
> 时间：2012-12-15T15:21:24.780
> 
> 标签：python

好的，我有这个数据的文件：

```
data = """4,sons,hey,what,Z,U   
          3,dogs,watch,who,U,H
          2,times,did,1,won,G""" 
```

我想知道，如何从这些数据中提取第一个元素？

在这种情况下，第一位是数字，所以我尝试了：

```
filter(str.isdigit, data) 
```

但由于我在数据中有其他数字，它对我不起作用。有什么新想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T15:23:35.340

那是一个csv文件。使用[`csv`](http://docs.python.org/2/library/csv.html)模块解析它：

```
import csv
with open('file.csv') as f:
    csvreader = csv.reader(f)
    for row in csvreader: 
        print row[0] 
```

或者如果你发现你想要所有的列：

```
import csv
with open('file.csv') as f:
    csvreader = csv.reader(f)
    for number, what, are, these, entries, called in csvreader:
        print number 
```

# sql - 一个事务中的 ADD 和 DROP SQL Server 表约束命令导致错误

> ID：13893434
> 
> 赞同：1
> 
> 时间：2012-12-15T15:21:41.320
> 
> 标签：sql, sql-server, ado.net, transactions

我有更多的 SQL 脚本（每个用于不同版本的应用程序），我想在一个事务中执行所有脚本。

我正在使用 c# 执行它：

```
ExecuteNonQuery(command, conn, trans) 
```

上`SqlCommand`。

脚本中的 SQL 命令由`GO`分隔符分隔。我的 C# 代码遍历所有脚本并`SqlCommand`基于`GO`分隔符创建集合。`GO`分隔符被排除在执行`SqlCommand`之外。它只是脚本文件中的分隔符。

一切正常，但我发现了一个问题。我在一个脚本中有以下命令：

```
ALTER TABLE [dbo].[RoleDataPermissions]  WITH NOCHECK ADD  CONSTRAINT     
[FK_RoleDataPermissions_OrganizationUnits] FOREIGN KEY([OrganizationUnitID])
REFERENCES [OrganizationUnits] ([ID]) 
```

在另一个脚本中（在另一个版本的应用程序中，这个约束被删除了）我有：

```
ALTER TABLE [dbo].[RoleDataPermissions] 
DROP CONSTRAINT FK_RoleDataPermissions_OrganizationUnits 
```

第一个命令顺利通过，但第二个命令抛出异常：

> *'FK_RoleDataPermissions_OrganizationUnits' 不是约束。无法删除约束。请参阅以前的错误。*

我正在尝试找出导致此问题的原因。我认为，问题在于，如果所有命令都在一个事务下执行，那么第一个命令没有提交，然后第二个命令找不到这个约束。我也尝试过将隔离级别更改为`readuncommited`，但它没有帮助。

你知道如何处理这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T16:40:09.043

您的分析不正确，因为事务可以看到它自己未提交的数据。这很容易证明如下。

```
CREATE TABLE T1
  (
     ID INT PRIMARY KEY
  )

CREATE TABLE T2
  (
     ID INT
  )

BEGIN TRAN

ALTER TABLE T2
  WITH NOCHECK ADD CONSTRAINT FK_Test FOREIGN KEY(ID) REFERENCES T1

GO

ALTER TABLE T2
  DROP CONSTRAINT FK_Test

COMMIT

DROP TABLE T1, T2 
```

您发布的语法无效，但是很可能由于语法错误而没有创建约束，并且由于某种原因，您的应用程序中没有报告异常。或者（如果你的实际语法是正确的）你可能会放弃约束两次。

# python - Python：将不均匀的行转换为列

> ID：13893435
> 
> 赞同：4
> 
> 时间：2012-12-15T15:21:43.090
> 
> 标签：python, list-comprehension, reportlab

我有一个包含奇数元素的列表列表：

```
[['a','b','c'], ['d','e'], [], ['f','g','h','i']] 
```

我在 Reportlab 中显示一个表格，我想将它们显示为列。据我了解，RL 仅以我上面的行形式获取表格（鸭嘴兽）的数据。

我可以使用循环来进行切换，但我觉得有一个更快、更 Pythonic 的列表理解。我也需要在元素用完的列中留一个空格。

所需的产品将是：

```
[['a','d','','f'],['b','e','','g'],['c','','','h'],['','','','i']] 
```

编辑：示例应该是字符串，而不是数字

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-15T15:27:48.173

[`itertools.izip_longest()`](http://docs.python.org/2/library/itertools.html#itertools.izip_longest)接受一个`fillvalue`论点。在 Python 3 上，它是[`itertools.zip_longest()`](http://docs.python.org/3.3/library/itertools.html#itertools.zip_longest).

```
>>> l = [[1,2,3], [4,5], [], [6,7,8,9]]
>>> import itertools
>>> list(itertools.izip_longest(*l, fillvalue=""))
[(1, 4, '', 6), (2, 5, '', 7), (3, '', '', 8), ('', '', '', 9)] 
```

如果您确实需要子列表而不是元组：

```
>>> [list(tup) for tup in itertools.izip_longest(*l, fillvalue="")]
[[1, 4, '', 6], [2, 5, '', 7], [3, '', '', 8], ['', '', '', 9]] 
```

当然这也适用于字符串：

```
>>> l = [['a','b','c'], ['d','e'], [], ['f','g','h','i']]
>>> import itertools
>>> list(itertools.izip_longest(*l, fillvalue=""))
[('a', 'd', '', 'f'), ('b', 'e', '', 'g'), ('c', '', '', 'h'), ('', '', '', 'i')] 
```

它甚至可以这样工作：

```
>>> l = ["abc", "de", "", "fghi"]
>>> list(itertools.izip_longest(*l, fillvalue=""))
[('a', 'd', '', 'f'), ('b', 'e', '', 'g'), ('c', '', '', 'h'), ('', '', '', 'i')] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T16:06:00.867

这是另一种方式：

```
>>> map(lambda *z: map(lambda x: x and x or '', z), *l)
[['a', 'd', '', 'f'], ['b', 'e', '', 'g'], ['c', '', '', 'h'], ['', '', '', 'i']] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-25T12:01:24.080

```
grid = [['a','b','c'], ['d','e'], [], ['f','g','h','i']]
i = 0
result = []
do_stop = False
while not do_stop:
    result.append([])
    count = 0
    for block in grid:
        try:
            result[i].append(block[i])
        except:
            result[i].append('')
            count = count +1
            continue
    if count ==len(grid):
        result.pop(i)
        do_stop = True
    i = i + 1

print result 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T16:10:30.637

如果您可以容忍 None 值而不是空字符串，我认为另一种方法更简单：

```
a = [['a','b','c'], ['d','e'], [], ['f','g','h','i']]
map(lambda *z: list(z), *a)
#[['a', 'd', None, 'f'], ['b', 'e', None, 'g'], ['c', None, None, 'h'], [None, None, None, 'i']] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-18T15:50:36.533

```
map(lambda *z: [s if s else '' for s in z], *a) 
```

或者

```
map(lambda *z: [('', s)[s>None] for s in z], *a) 
```

# c - C-Free Pro-5 中的 HelloWorld C 程序中的编译错误称为 Dwarf Error

> ID：13893437
> 
> 赞同：2
> 
> 时间：2012-12-15T15:22:17.473
> 
> 标签：c

我正在使用 Windows 8 专业版。我最近在其中安装了 C-free Professional 5。当我编译一个简单的 hello world c 程序时，我在编译它时遇到了一个错误，称为 dwarf 错误。它说了这样的话。

```
[Error] Dwarf Error: Offset (700) greater than or equal to (null) size (4954657). 
```

hello world程序如下：

```
#include <stdio.h> 
int main()
{
    printf("Hello World!\n");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-13T07:34:04.743

该代码绝对*没有*问题，尽管使用以下两种规范形式之一会更好`main`：

```
int main (void) { ... 
```

因此，您的问题在于环境。从一些调查中可以看出：

*   CFree 网站和产品在过去三年多的时间里没有更新过；
*   它只声称最多支持 Windows 7；
*   它看起来像是典型的一两个人操作之一，几乎没有积极的支持；和
*   它使用专有许可。

正因为如此，我*强烈*建议切换到可以为您提供更好支持的产品。

例如，Code::Blocks 似乎拥有 C-Free 声称的大部分（如果不是全部）功能。最重要的是，它使用 GPL3 许可证，您可以零成本获得并使用它，并且在其背后有一个非常活跃的社区来提供支持服务，而不是在中国某处可能会或可能不会回复的单个电子邮件地址/存在 ：-）

[顺便说一句， Dwarf](http://en.wikipedia.org/wiki/DWARF)是一种调试格式，所以我对这个问题的最佳猜测是 IDE 与底层工具的匹配度不是很好，我认为这是避免它的一个很好的理由。

# javascript - jquery 和 javascript 代码，随后的执行给出了意外的输出，第一个是期望的输出

> ID：13893439
> 
> 赞同：0
> 
> 时间：2012-12-15T15:22:32.230
> 
> 标签：javascript, jquery, variables, animation, jquery-animate

我有一个图像网格，我希望放大一个 div id=box，从单击的图像到具有指定动画的整个网格空间，并以相同的方式关闭。第一轮完美地进行，但随后的几轮以意想不到的有趣方式执行。javascript 只是将 div 定位在单击的图像上。动画，出现和消失是使用 jquery 完成的。我对 jquery 不是很好，但无法抗拒动画选项。请针对这种不寻常的行为提出合适的替代方案或解决方案。谢谢。

```
function box(id)
{var tpos = document.getElementById(id).offsetTop;
var lpos = document.getElementById(id).offsetLeft;
document.getElementById('box').style.top= tpos;
document.getElementById('box').style.left= lpos;
setTimeout(function(){jqueryfunc();},800);}

jqueryfunc = function(){
var box= $('#box');
$('#close').show();
box.show();
var ileft=box.css("left");
var itop=box.css("top");
box.animate({width:'793px',left:'06px'},1000);
box.animate({height:'446px',top:'31px'},1000);

jqueryclose = $(function(){
$('#close').click(function(){
$('#close').hide();
box.animate({width: '157px', left: ileft},1000);
box.animate({height: '110px', top: itop},1000);
box.fadeOut('slow');
}); }); }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T15:35:56.013

您正在将 DOM 就绪函数分配给一个变量，并期望变量在不同的范围内工作等。尝试更像这样的东西：

```
function box(id) {
    var elem = $('#'+id),
        offset = elem.offset(),
        box = $('#box');

    elem.css({top: offset.top, left: offset.left});
    setTimeout(jqueryfunc, 800);
}

function jqueryfunc() {
    $('#close').show();
    $('#box').show().animate({width: 793, left: 6}, 1000)
             .animate({height: 446, top: 31}, 1000);

}

$(function() {
    $('#close').click(function() {
        var box = $('#box'),
            ileft = box.css("left"),
            itop = box.css("top");
        $('#close').hide();
            box.animate({width: 157, left: ileft}, 1000)
               .animate({height: 110, top: itop}, 1000)
               .fadeOut('slow');
    });
});​ 
```

看起来您也没有在任何地方调用 box() 函数？

# r - r中的anova分区和比较（正交单df）

> ID：13893444
> 
> 赞同：5
> 
> 时间：2012-12-15T15:23:02.220
> 
> 标签：r, anova, contrast, orthogonal

我想在方差分析（固定或混合模型）中进行单 df 正交对比。这里只是一个例子：

```
require(nlme)
data (Alfalfa)
  Variety: a factor with levels Cossack, Ladak, and Ranger
  Date : a factor with levels None S1 S20 O7
  Block: a factor with levels 1 2 3 4 5 6
  Yield : a numeric vector 
```

这些数据在 Snedecor 和 Cochran (1980) 中作为裂区设计的一个例子进行了描述。实验中使用的处理结构为3×4全因子，三个苜蓿品种和4个1943年第三次扦插日期。实验单元分为6个区组，每个区又细分为4个小区。紫花苜蓿品种（Cossac、Ladak 和 Ranger）被随机分配到块中，第三次切割的日期（无、S1-9 月 1 日、S20-9 月 20 日和 O7-10 月 7 日）被随机分配到地块。每个区块都使用了所有四个日期。

```
model<-with (Alfalfa, aov(Yield~Variety*Date +Error(Block/Date/Variety)))

    > summary(model)

Error: Block
          Df Sum Sq Mean Sq F value Pr(>F)
Residuals  5   4.15    0.83

Error: Block:Date
          Df Sum Sq Mean Sq F value   Pr(>F)
Date       3 1.9625  0.6542   17.84 3.29e-05 ***
Residuals 15 0.5501  0.0367
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1

Error: Block:Date:Variety
             Df Sum Sq Mean Sq F value Pr(>F)
Variety       2 0.1780 0.08901   1.719  0.192
Variety:Date  6 0.2106 0.03509   0.678  0.668
Residuals    40 2.0708 0.05177 
```

我想进行一些比较（组内的正交对比），例如对于日期，两个对比：

```
 (a) S1 vs others (S20 O7)
   (b) S20 vs 07, 
```

对于品种因素两个对比：

```
 (c)  Cossack vs others (Ladak and Ranger)
   (d) Ladak vs Ranger 
```

因此，方差分析输出看起来像：

```
Error: Block
              Df Sum Sq Mean Sq F value Pr(>F)
Residuals  5   4.15    0.83

Error: Block:Date
          Df Sum Sq Mean Sq F value   Pr(>F)
Date       3 1.9625  0.6542   17.84 3.29e-05 ***
       (a) S1 vs others    ?        ?
       (b)  S20 vs 07       ?        ?
Residuals 15 0.5501  0.0367
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1

Error: Block:Date:Variety
             Df Sum Sq Mean Sq F value Pr(>F)
Variety       2 0.1780 0.08901   1.719  0.192
     (c)  Cossack vs others ?        ?    ?
     (d)  Ladak vs Ranger    ?       ?     ?
Variety:Date  6 0.2106 0.03509   0.678  0.668
Residuals    40 2.0708 0.05177 
```

我该怎么做？.....................

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T20:19:52.703

首先，为什么要使用方差分析？您可以`lme`从`nlme`包中使用，除了提供的假设检验之外`aov`，您还可以获得效应大小和效应方向的可解释估计值。无论如何，我想到了两种方法：

*   手动指定变量的对比，如此[处](https://stats.stackexchange.com/questions/52252/how-to-specify-a-contrast-matrix-in-r-for-the-difference-between-one-level-and)所述。
*   安装`multcomp`软件包并使用`glht`.

`glht`对预测变量中的多元模型有点固执己见。不过，长话短说，如果您要创建一个与模型`cm0`具有相同维度和暗名的对角矩阵`vcov`（假设它是一个`lme`名为 的拟合`model0`），那么`summary(glht(model0,linfct=cm0))`应该给出相同的估计、SE 和测试统计信息`summary(model0)$tTable`（但*不正确*p 值）。现在，如果你弄乱了行的线性组合，`cm0`并创建具有与行数相同`cm0`但这些线性组合与行相同的新矩阵，你最终会找出创建矩阵的模式，该矩阵将为你提供截距估计每个单元格（检查它对`predict(model0,level=0)`）。现在，另一个具有该矩阵各行之间差异的矩阵将为您提供相应的组间差异。可以使用相同的方法但将数值设置为 1 而不是 0 来获取每个单元格的斜率估计值。然后这些斜率估计之间的差异可用于获得组间斜率差异。

要记住三件事：

*   `lm`正如我所说的，对于除, （可能没有尝试过）`aov`和某些生存模型之外的模型，p 值将是错误的。这是因为默认情况下`glht`假定`z`分布而不是`t`分布（除了`lm`）。要获得正确的 p 值，请`glht`计算检验统计量并手动执行`2*pt(abs(`**STAT** `),df=`**DF**`,lower=F)`以获取双尾 p 值，其中**STAT**是返回的检验统计量`glht`，**DF**是 中`df`相应类型的默认对比`summary(model0)$tTable`。
*   您的对比可能不再测试独立假设，并且如果还没有进行多次测试校正是必要的。通过 运行 p 值`p.adjust`。
*   这是我自己对教授和同事的大量支持以及对相关主题的 Crossvalidated 和 Stackoverflow 的大量阅读的提炼。我可能在很多方面都错了，如果我错了，希望有更博学的人能纠正我们俩。

# php - 我的数据库显示 160 个条目，但我只有 80 个

> ID：13893452
> 
> 赞同：0
> 
> 时间：2012-12-15T15:23:50.520
> 
> 标签：php, mysql, sql, ajax

正如标题所说，我在网站上遇到了一些问题。我的数据库统计了 80 个条目，但是在首页上，当我尝试使用 ajax 查询来获取条目总数时，它以 160 响应。

此外，尽管该网站在过去 5 天内运行良好，但今天出现了这个问题。

感谢阅读，我为我的英语水平道歉。

ajax 查询：

```
 $(document).ready(function() {
 $("#responsecontainer").load("countPost.php");
var refreshId = setInterval(function() {
  $("#responsecontainer").load('countPost.php?randval='+ Math.random());
}, 1);
$.ajaxSetup({ cache: false });
}); 
```

还有countPost.php：

```
$nb_messages_requete = mysql_query("SELECT id FROM mybase");
$nb_entrees = mysql_num_rows($nb_messages_requete); 
echo ''.$nb_entrees.'' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T15:36:25.933

这是因为您正在加载`countPOST.php`两次

尝试这个

```
 $(document).ready(function() {

var refreshId = setInterval(function() {
 $("#responsecontainer").load('countPost.php?randval='+ Math.random());
}, 1);
 $.ajaxSetup({ cache: false });
}); 
```

如果您的意思是每秒执行一次代码，则将其替换`1`为`1000`

编辑：

您的缓存在函数内部看起来已失效

尝试这样使用它

```
 $.ajaxSetup ({
// Disable caching of AJAX responses */
cache: false
  });
    $(document).ready(function() {

var refreshId = setInterval(function() {
 $("#responsecontainer").load('countPost.php?randval='+ Math.random());
}, 1);

}); 
```

# asp.net - 是否可以使用查询清除 SQL Server 2008 中的日志？

> ID：13893454
> 
> 赞同：1
> 
> 时间：2012-12-15T15:23:57.867
> 
> 标签：asp.net, sql-server-2008

我注意到我的数据库服务器上有一些可疑活动。我使用以下 T-SQL 语句检查最近在我的服务器上执行的 300 个查询：

```
SELECT TOP 50 * 
FROM
    (SELECT 
        COALESCE(OBJECT_NAME(s2.objectid),'Ad-Hoc') AS ProcName,
        execution_count, s2.objectid,
        (SELECT TOP 1 SUBSTRING(s2.TEXT,statement_start_offset / 2+1 ,
           ( (CASE WHEN statement_end_offset = -1
                    THEN (LEN(CONVERT(NVARCHAR(MAX),s2.TEXT)) * 2)
                    ELSE statement_end_offset 
              END)- statement_start_offset) / 2+1)) AS sql_statement,
    last_execution_time
FROM 
    sys.dm_exec_query_stats AS s1
CROSS APPLY 
    sys.dm_exec_sql_text(sql_handle) AS s2 ) x
WHERE 
    sql_statement NOT like 'SELECT TOP 50 * FROM(SELECT %'
--and OBJECTPROPERTYEX(x.objectid,'IsProcedure') = 1
ORDER BY 
    last_execution_time DESC 
```

我相信昨天有人从我的服务器中删除了日志。

我想知道这是否可以使用 SQL Server Management Studio 删除带有查询或远程访问数据库的最近查询日志。如果可能，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T16:09:00.547

`DBCC FREEPROCCACHE`清除过程缓存。

`sys.dm_exec_query_stats`仅报告缓存中的查询。重新启动机器或由于内存压力或由于索引或统计信息维护而被刷新的计划是 DMV 不包含旧查询的其他可能原因。

# opengl - OpenGL 光照问题

> ID：13893458
> 
> 赞同：0
> 
> 时间：2012-12-15T15:24:18.230
> 
> 标签：opengl, 3d, lwjgl

我一直致力于使用 LWJGL 加载、渲染和照明 3D 模型。它主要工作，但目前照明存在问题，我认为这是照明正常但我无法修复它。这是问题的图片；

![在此处输入图像描述](../Images/1d16def1072f490f0fbb2bb0e35b986c.png)

照明代码：

```
public class Light {

private Vector4f position;

public Light(Vector3f position)
{
    this.position = new Vector4f(position.x, position.y, position.z, 1);

    glShadeModel(GL_SMOOTH);
    glEnable(GL_DEPTH_TEST);
    glEnable(GL_LIGHTING);
    glEnable(GL_LIGHT0);
    glLightModel(GL_LIGHT_MODEL_AMBIENT, getFlipedFloatBuffer(new Vector4f(0.05f, 0.05f, 0.05f, 1)));
    glLight(GL_LIGHT0, GL_POSITION, getFlipedFloatBuffer(this.position));
    glEnable(GL_CULL_FACE);
    glCullFace(GL_BACK);
    glEnable(GL_COLOR_MATERIAL);
    glColorMaterial(GL_FRONT, GL_DIFFUSE);
}

private FloatBuffer getFlipedFloatBuffer(Vector4f values)
{
    return (FloatBuffer)BufferUtils.createFloatBuffer(4).put(new float[]{values.x, values.y, values.z, values.w}).flip();
}

public void update() {
    glLight(GL_LIGHT0, GL_POSITION, getFlipedFloatBuffer(this.position));
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T16:24:19.600

法线的方向不均匀。如果您确实从几何图形中自己计算法线，则首先必须重新对齐所有法线以指向相同的表面方向。但是，要正确使用此算法有点乏味。

最好将模型加载到 3D 建模器中，使用该建模器的“修复法线方向”工具并将模型与法线一起保存。Blender 具有通过热键 CTRL+N 访问的功能

# linux - 仅在 c 文件中插入任何模块时如何显示内核版本？

> ID：13893459
> 
> 赞同：2
> 
> 时间：2012-12-15T15:24:21.757
> 
> 标签：linux, module, kernel, version

我对从我的内核模块的 C 程序中显示内核版本有疑问。所以插入后，当我通过 dmesg 显示日志消息时，我能够看到我的内核版本。

所以我的简单 C 代码如下，任何人都可以告诉我如何在插入后显示内核版本，如果我想在程序中插入“谁”也一样。所以在这里你给我解决方案如何编程或我需要包含哪个结构，以便我能够在插入模块后显示主机名和内核版本。

程序：

```
#include<linux/init.h>      //for init modules
#include<linux/module.h>    //for kernel modules
#include<linux/kernel.h>    //for kernel function

MODULE_LICENSE("GPL");      //For giving licence to module
MODULE_AUTHOR("RAVI BHUVA");    //For authorization of module

static int __init init_hello(void)  //for initialation of module this function is used
{
  printk(KERN_INFO "Hello Master. \nYou are currently using linux ");
  return(0);
}

static void __exit exit_hello(void) //for exiting from module this function is used
{
  printk(KERN_INFO "Good Bye\n");
}

module_init(init_hello);        //for initialation of module
module_exit(exit_hello);        //for exiting from module 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T06:09:11.877

您可以使用 UTS_RELEASE 变量打印 linux 的版本。只是打印它。和广告头文件#include

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T06:45:49.320

按宏用法。

```
#include<linux/init.h>      //for init modules
#include<linux/module.h>    //for kernel modules
#include<linux/kernel.h>    //for kernel function
#include<generated/utsrelease.h>//For UTS_RELEASE MACRO

MODULE_LICENSE("GPL");      //For giving licence to module
MODULE_AUTHOR("RAVI BHUVA");    //For authorization of module

static int __init init_hello(void)  //for initialation of module this function is used
{
printk(KERN_INFO "Hello Master. \nYou are currently using linux %s\n",UTS_RELEASE);//By using macro here i print version of kernel.
return(0);
}

static void __exit exit_hello(void) //for exiting from module this function is used
{
printk(KERN_INFO "Good Bye\n");
}

module_init(init_hello);        //for initialation of module
module_exit(exit_hello);        //for exiting from module 
```

通过这种方式，您可以显示内核版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-26T03:03:48.603

上述解决方案将打印您的模块**编译**时使用的内核版本。因此，如果您希望模块打印正在**运行**的内核版本，这将起作用：

```
#include <linux/init.h>
#include <linux/module.h>
#include <linux/kernel.h>
#include <linux/utsname.h>

static int __init hello_init(void)
{
        pr_alert("You are currently using Linux %s\n", utsname()->release);
        return 0;
}

static void __exit hello_exit(void)
{
        pr_alert("Bye");
}

module_init(hello_init);
module_exit(hello_exit);
MODULE_LICENSE("GPL"); 
```

如果您查看 proc 文件系统，则在 path 中有一个文件，`/proc/version`它会吐出一个`Linux version 3.2.0-56-generic (buildd@batsu) (gcc version 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5) ) #86-Ubuntu SMP Wed Oct 23 17:31:43 UTC 2013`描述正在运行的内核版本的字符串。在进一步检查`/proc/version.c`实际在 proc fs 中实现版本文件的内核源代码时，您将看到负责输出字符串的这段代码：

```
static int version_proc_show(struct seq_file *m, void *v)
{
        seq_printf(m, linux_proc_banner,
                utsname()->sysname,
                utsname()->release,
                utsname()->version);
        return 0;
} 
```

# file - 从文件名中删除扩展名

> ID：13893460
> 
> 赞同：0
> 
> 时间：2012-12-15T15:24:25.203
> 
> 标签：file, batch-file, zip, 7zip

在`folder1`我有一个文件列表：

```
file1.exe
ahahdf.exe
ahdfkqkq.exe 
```

我想运行一个脚本并让它在文件夹 2 中创建以下文件：

```
file1.zip
ahahdf.zip
ahdfkqkq.zip 
```

我的尝试：

```
for %%f in (*.*) do "c:\program files\7-zip\7z.exe" a %%f.zip %%f 
```

这会创建`file1.exe.zip`, ... 但我需要`file1.zip`, ... （没有`.exe`扩展名）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T15:47:29.510

应该

`for %%f in (*.*) do "c:\program files\7-zip\7z.exe" a %%~nf.zip %%f`

注意`%%~nf`-`~n`告诉命令解释器选择不带扩展名的文件名部分。

此外，我会将参数括在双引号（“param”）中，以确保正确处理包含空格的文件名。

# ruby-on-rails - 回形针：nil:NilClass 的未定义方法“exitstatus”

> ID：13893462
> 
> 赞同：2
> 
> 时间：2012-12-15T15:24:37.153
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paperclip, jruby, torquebox

我正在尝试使用回形针来处理上传到 S3 的图像文件。在我的用户模型中：

`validates_attachment :avatar, :content_type => { :content_type => ["image/jpg", "image/png"] }, :size => { :in => 0..500.kilobytes }`

上传图片时出现以下错误：

```
Command :: identify -format %wx%h "C:/Users/Tom/AppData/Local/Temp/rails121215-6332-1o1oxtk-30333.png[0]"
Completed 500 Internal Server Error in 277ms

NoMethodError (undefined method `exitstatus' for nil:NilClass) 
```

此处的类似问题表明运行某些 imageMagick 命令时存在问题。但是，我已经设置`Paperclip.options[:command_path]`了，这没有什么区别。Imagemagick 也在路径上，如果我`identify -format %wx%h "C:/Users/Tom/AppData/Local/Temp/rails121215-6332-1o1oxtk-30333.png[0]"`在命令提示符下执行，我会`50x64`返回。此外，我正在使用扭矩箱，并且在扭矩箱窗口中出于某种原因打印了以下内容：`14:59:11,205 INFO [stdout] (Thread-144) 50x64`因此该命令显然是以某种方式执行的。

我也尝试过使用`Cocaine::CommandLine.runner = Cocaine::CommandLine::BackticksRunner.new`，但这只会导致以下错误： `Errno::EINVAL (Invalid argument - =ExitCode)`

如果有任何区别，我正在使用带有 Torquebox 的 JRuby。

这是跟踪：

```
cocaine (0.4.2) lib/cocaine/command_line.rb:80:in `run'
paperclip (3.3.1) lib/paperclip/helpers.rb:31:in `run'
paperclip (3.3.1) lib/paperclip/geometry.rb:23:in `from_file'
activesupport (3.2.8) lib/active_support/core_ext/kernel/reporting.rb:43:in `silence_stream'
paperclip (3.3.1) lib/paperclip/geometry.rb:22:in `from_file'
paperclip (3.3.1) lib/paperclip/thumbnail.rb:35:in `initialize'
paperclip (3.3.1) lib/paperclip/processor.rb:33:in `make'
paperclip (3.3.1) lib/paperclip/attachment.rb:410:in `post_process_style'
org/jruby/RubyArray.java:1615:in `each'
org/jruby/RubyEnumerable.java:830:in `inject'
paperclip (3.3.1) lib/paperclip/attachment.rb:409:in `post_process_style'
paperclip (3.3.1) lib/paperclip/attachment.rb:402:in `post_process_styles'
org/jruby/RubyHash.java:1186:in `each'
paperclip (3.3.1) lib/paperclip/attachment.rb:401:in `post_process_styles'
paperclip (3.3.1) lib/paperclip/attachment.rb:394:in `post_process'
activesupport (3.2.8) lib/active_support/callbacks.rb:406:in `_run__1796712306__avatar_post_process__1832820880__callbacks'
org/jruby/RubyBasicObject.java:1698:in `__send__'
org/jruby/RubyKernel.java:2097:in `send'
activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.8) lib/active_support/callbacks.rb:390:in `_run_avatar_post_process_callbacks'
org/jruby/RubyBasicObject.java:1704:in `__send__'
org/jruby/RubyKernel.java:2101:in `send'
activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
paperclip (3.3.1) lib/paperclip/callbacks.rb:26:in `run_paperclip_callbacks'
paperclip (3.3.1) lib/paperclip/attachment.rb:393:in `post_process'
activesupport (3.2.8) lib/active_support/callbacks.rb:406:in `_run__1796712306__post_process__1832820880__callbacks'
org/jruby/RubyBasicObject.java:1698:in `__send__'
org/jruby/RubyKernel.java:2097:in `send'
activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.8) lib/active_support/callbacks.rb:390:in `_run_post_process_callbacks'
org/jruby/RubyBasicObject.java:1704:in `__send__'
org/jruby/RubyKernel.java:2101:in `send'
activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
paperclip (3.3.1) lib/paperclip/callbacks.rb:26:in `run_paperclip_callbacks'
paperclip (3.3.1) lib/paperclip/attachment.rb:392:in `post_process'
paperclip (3.3.1) lib/paperclip/attachment.rb:107:in `assign'
paperclip (3.3.1) lib/paperclip.rb:196:in `avatar='
org/jruby/RubyBasicObject.java:1704:in `__send__'
org/jruby/RubyKernel.java:2101:in `send'
activerecord (3.2.8) lib/active_record/attribute_assignment.rb:85:in `assign_attributes'
org/jruby/RubyHash.java:1186:in `each'
activerecord (3.2.8) lib/active_record/attribute_assignment.rb:78:in `assign_attributes'
activerecord (3.2.8) lib/active_record/persistence.rb:215:in `update_attributes'
activerecord (3.2.8) lib/active_record/transactions.rb:295:in `with_transaction_returning_status'
activerecord (3.2.8) lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
torquebox-transactions (2.1.2) lib/torquebox/active_record_adapters.rb:37:in `transaction'
activerecord (3.2.8) lib/active_record/transactions.rb:208:in `transaction'
activerecord (3.2.8) lib/active_record/transactions.rb:293:in `with_transaction_returning_status'
activerecord (3.2.8) lib/active_record/persistence.rb:214:in `update_attributes'
app/controllers/users_controller.rb:11:in `update'
org/jruby/RubyBasicObject.java:1698:in `__send__'
org/jruby/RubyKernel.java:2097:in `send'
actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.8) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.8) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.8) lib/abstract_controller/callbacks.rb:18:in `process_action'
activesupport (3.2.8) lib/active_support/callbacks.rb:418:in `_run__841617381__process_action__1679400720__callbacks'
activesupport (3.2.8) lib/active_support/callbacks.rb:225:in `_conditional_callback_around_260'
activesupport (3.2.8) lib/active_support/callbacks.rb:326:in `around'
org/jruby/RubyBasicObject.java:1704:in `__send__'
org/jruby/RubyKernel.java:2101:in `send'
activesupport (3.2.8) lib/active_support/callbacks.rb:314:in `_callback_around_23'
activesupport (3.2.8) lib/active_support/callbacks.rb:224:in `_conditional_callback_around_260'
activesupport (3.2.8) lib/active_support/callbacks.rb:417:in `_run__841617381__process_action__1679400720__callbacks'
org/jruby/RubyBasicObject.java:1698:in `__send__'
org/jruby/RubyKernel.java:2097:in `send'
activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.8) lib/active_support/callbacks.rb:390:in `_run_process_action_callbacks'
org/jruby/RubyBasicObject.java:1704:in `__send__'
org/jruby/RubyKernel.java:2101:in `send'
activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.8) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.8) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
activesupport (3.2.8) lib/active_support/notifications.rb:123:in `instrument'
activesupport (3.2.8) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.8) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.8) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.8) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.8) lib/action_controller/metal.rb:246:in `action'
org/jruby/RubyProc.java:258:in `call'
actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
journey (1.0.4) lib/journey/router.rb:68:in `call'
org/jruby/RubyArray.java:1615:in `each'
journey (1.0.4) lib/journey/router.rb:56:in `call'
actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
sass (3.1.20) lib/sass/plugin/rack.rb:54:in `call'
warden (1.2.1) lib/warden/manager.rb:35:in `call'
org/jruby/RubyKernel.java:1197:in `catch'
warden (1.2.1) lib/warden/manager.rb:34:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.1) lib/rack/etag.rb:23:in `call'
rack (1.4.1) lib/rack/conditionalget.rb:35:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
torquebox-web-2.1.2 (java) lib/torquebox/session/servlet_store.rb:31:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
activesupport (3.2.8) lib/active_support/callbacks.rb:408:in `_run__2062687110__call__1832820880__callbacks'
org/jruby/RubyBasicObject.java:1698:in `__send__'
org/jruby/RubyKernel.java:2097:in `send'
activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.8) lib/active_support/callbacks.rb:390:in `_run_call_callbacks'
org/jruby/RubyBasicObject.java:1698:in `__send__'
org/jruby/RubyKernel.java:2097:in `send'
activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.8) lib/rails/engine.rb:479:in `call'
railties (3.2.8) lib/rails/application.rb:223:in `call'
org/jruby/RubyBasicObject.java:1704:in `__send__'
org/jruby/RubyKernel.java:2101:in `send'
railties (3.2.8) lib/rails/railtie/configurable.rb:30:in `method_missing' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:44:46.467

我认为**JRUBY**不能产生它必须采取的进程。

按照您的描述尝试此`Cocaine::CommandLine.runner = Cocaine::CommandLine::BackticksRunner.new`操作，并结合将可卡因降级到 0.3.2

*（在 JRuby 1.7.1 + Webrick 和 Ruby on Rails 上测试）*

# image-processing - 在opencv中，如何将灰度图像复制并缩放为另一个彩色图像

> ID：13893464
> 
> 赞同：3
> 
> 时间：2012-12-15T15:25:07.263
> 
> 标签：image-processing, opencv, scale, grayscale, image-conversion

我想将多个图像合成到 openCV 中的单个窗口中。我发现我可以在一个图像中创建一个 ROI 并将另一个彩色图像复制到该区域而没有任何问题。

将源图像切换到我已经进行了一些处理的图像虽然不起作用。

最终我发现我已将 src 图像转换为灰度图像，并且在使用 copyTo 方法时它没有复制任何内容。

我已经用我的基本解决方案回答了这个问题，该解决方案只适用于灰度颜色。如果您使用其他 Mat 图像类型，则必须执行额外的测试和转换。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T15:25:07.263

我意识到我的问题是我试图将灰度图像复制到彩色图像中。因此，我必须先将其转换为适当的类型。

```
drawIntoArea(Mat &src, Mat &dst, int x, int y, int width, int height)
{
    Mat scaledSrc;
    // Destination image for the converted src image.
    Mat convertedSrc(src.rows,src.cols,CV_8UC3, Scalar(0,0,255));

    // Convert the src image into the correct destination image type
    // Could also use MixChannels here.
    // Expand to support range of image source types.
    if (src.type() != dst.type())
    {
        cvtColor(src, convertedSrc, CV_GRAY2RGB);
    }else{
        src.copyTo(convertedSrc);
    }

    // Resize the converted source image to the desired target width.
    resize(convertedSrc, scaledSrc,Size(width,height),1,1,INTER_AREA);

    // create a region of interest in the destination image to copy the newly sized and converted source image into.
    Mat ROI = dst(Rect(x, y, scaledSrc.cols, scaledSrc.rows));
    scaledSrc.copyTo(ROI);
} 
```

我花了一段时间才意识到图像源类型不同，我忘记了我已将图像转换为灰度以进行其他一些处理步骤。

# json - 收集上的骨干更改事件，为什么它有效？

> ID：13893466
> 
> 赞同：0
> 
> 时间：2012-12-15T15:25:45.717
> 
> 标签：json, events, backbone.js

为什么事件“更改”适用于模型评论 1？怎么修？如果我删除行（'comment'：[]），事件'change'不起作用。我明白这是因为我使用数组，但我需要使用它，但我没有事件，如果他没有任何变化。谢谢/

* * *

> 创建新集合

```
var commentCollection = new VPRS.Comment.CommentCollection([
  {
    "id": "comment1",
    "questionId": "post1",
    "name": "Alex",
    "text": "text 1",
    "comment":[]
  },
  {
    "id": "comment2",
    "questionId": "post1",
    "name": "Alex",
    "text": "Text2"
  }
]);

----------

    json = [
      {
        "id": "comment1",
        "questionId": "post1",
        "name": "Alex",
        "text": "text 1",
        "comment":[]
      },
      {
        "id": "comment2",
        "questionId": "post1",
        "name": "Alex",
        "text": "Text2"
     }]

--------------
wallItemCollection.on('change', function (model) {
  console.log('model change')
}
 ------------
wallItemCollection.fetch({
  update: true,
  merge: true,
  success: function () {
    console.log('fetch compleate')
  }
}); 
```

# .net - 如何从自定义编辑器更新 PropertyGrid？

> ID：13893467
> 
> 赞同：3
> 
> 时间：2012-12-15T15:25:45.607
> 
> 标签：.net, propertygrid, uitypeeditor

我正在使用`PropertyGrid`（在 CollectionEditor 中）来编辑类的一些属性。这些属性实际上包装在实现`ICustomTypeDescriptor`. 其中一个使用继承自`UITypeEditor`. 当用户在自定义编辑器中更改此属性的值时，另一个属性的值也会被更新（通过自定义编辑器中的代码；因此，属性包装器引用了另一个属性）。到现在为止还挺好。

但是当用户关闭自定义编辑器时，`PropertyGrid`只会显示已编辑属性的新值，而不会刷新其他属性（即使它的值肯定已更改）。

如何`PropertyGrid`从自定义编辑器刷新整个包含？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T15:41:41.967

我自己找到了解决方案：

自定义编辑器的 EditValue 方法应该返回一个新对象，而不是传入的值对象。然后 PropertyGrid 也会自动刷新其他属性。

我不需要在任何地方使用 RefreshProperties 属性。

# android - 如何在android中使用sqlite数据库创建表？

> ID：13893473
> 
> 赞同：1
> 
> 时间：2012-12-15T15:27:26.383
> 
> 标签：android, database, android-sqlite

```
public class MyAct extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        SQLiteDatabase db = openOrCreateDatabase("MyDb",MODE_PRIVATE,null);
        db.execSQL("CREATE TABLE IF NOT EXISTS MyTab (Month INT(2),Date INT(2),Year INT(4),Event VARCHAR;");
        db.execSQL("INSERT INTO MyTab VALUES (0,1,2012,'mini_proj');");
        db.close();

    }
} 
```

我写了这个小片段来创建一个表，但它不起作用。这段代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T15:35:42.253

在您的第一个查询中，您缺少一个右大括号：

```
CREATE TABLE IF NOT EXISTS MyTab (
    Month INT(2),
    Date INT(2),
    Year INT(4),
    Event VARCHAR; 
```

它应该是：

```
CREATE TABLE IF NOT EXISTS MyTab (
    Month INT(2),
    Date INT(2),
    Year INT(4),
    Event VARCHAR
) 
```

另外，请注意，查询不需要以 a 结尾`;`，如文档中所述：

> **参数**
> *sql*要执行的 SQL 语句。**不支持以分号分隔的多个语句。**

此外，您应该**始终**检查您的 LogCat 输出，因为这应该会抛出一个`SQLiteException`.

* * *

一些进一步的 SQLite 注释：

1.  SQLite 没有`VARCHAR`-type。它[只有`TEXT`](http://www.sqlite.org/datatype3.html)并将任何类似文本的类型转换为它。
2.  请注意，SQLite 也忽略了数据类型的长度：

> SQLite**不对`SQLITE_MAX_LENGTH`**字符串、BLOB 或数值的长度施加任何长度限制（除了大的全局**限制） 。**

# jquery-mobile - Jquery mobile：多页表单

> ID：13893474
> 
> 赞同：4
> 
> 时间：2012-12-15T15:27:39.573
> 
> 标签：jquery-mobile, multipage

我有一个围绕两个页面的 jquery 移动表单：

```
<form ...>
<div data-role="page">
...
</div>
<div data-role="page">
...
</div>
</form> 
```

通过浏览器加载此页面时效果很好。

但是，当通过 Ajax 调用页面时，正如您所料，表单标签不会导入到 dom 中，因此表单会损坏。

除了重写孔流之外还有什么解决办法吗？

谢谢 ！

**编辑：我想保留ajax导航，我知道我可以通过调用这个页面来解决这个问题。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T20:42:01.310

您可以序列化表单数据并将其保存为本地数据，`var`直到最后一步/页面。这篇文章很好地涵盖了这一点：[http ://www.raymondcamden.com/index.cfm/2011/11/22/Demo-of-a-multistep-form-in-jQuery-Mobile-Part-2](http://www.raymondcamden.com/index.cfm/2011/11/22/Demo-of-a-multistep-form-in-jQuery-Mobile-Part-2)

干杯!

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-05T17:45:36.573

我终于设法做到了，因为没有简单的方法来实现这一点......

# maven - MissingResourceException - 在 Maven 集成测试阶段找不到捆绑包

> ID：13893479
> 
> 赞同：0
> 
> 时间：2012-12-15T15:28:14.490
> 
> 标签：maven

我正在使用 maven 构建一个多语言网站。

属性文件存储在 /src/main/resources

maven在构建阶段生成的war包含WEB-INF/classes中的*.properties文件。如果我将此 war 文件部署到生产环境，则不会抛出 MissingResourceException。

因此，除了在存在 MissingResourceException 的集成测试期间一切正常。顺便说一句，由于 failsafe-maven-plugin 可以执行集成测试。

那么在集成测试阶段出了什么问题呢？

真正奇怪的是我可以在集成测试期间加载另一个属性文件（不是为了 I18N 目的）。唯一的区别是我使用 FileReader 而不是使用 ResourceBundle.getBundle。

我错过了什么吗？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T15:37:11.150

使用 FileReader 无法设置字符编码。更好地使用`new InputStreamReader(new FileInputStream(file), "ISO-8859-1")`，这是明确的，独立于操作系统的。而 ISO-8859-1 是属性的标准编码（丑陋）。

除了 /src/test/resources 还应该找到 /src/main/resources。

你检查/target/classes 了吗？

复制阶段可能出错（准备资源、准备测试资源等）。也许是类亲戚`getClass().getResourceAsStream(relativePath)`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T23:15:11.623

好的，问题是“只是”我用来获取捆绑包的 baseName ：

ResourceBundle.getBundle("/MyBundle");

代替

ResourceBundle.getBundle("MyBundle");

然而，这是一个奇怪的行为，因为第一行代码在部署 .war 时运行良好，但在集成测试期间却不行。如果有人知道为什么，我对答案真的很感兴趣！

# javascript - 为什么服务器端 Javascript 不流行？

> ID：13893483
> 
> 赞同：0
> 
> 时间：2012-12-15T15:28:36.000
> 
> 标签：javascript, web-deployment

有谁知道为什么服务器端 Javascript 不像使用多语言方法进行 Web 开发那样流行？IE JavaScript+C#、JavaScript+perl；为什么不只是 Javascript 到处都是？如果每个人都使用一种语言，与 Web 开发相关的特定成本不会减少吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T15:37:06.967

我自己从未使用过服务器端 javascript，老实说，与 PHP、Python、Ruby、Java 等相比，它出现的时间并不长，而且优点还没有被广泛宣传。

读过一些关于它的东西，听起来真的很有趣，我认为随着时间的推移，MVC javascript 前端与服务器端相结合将成为一种更广泛采用的解决方案。

我想到的另一个原因是有些人真的很喜欢 X 或 Y 语言。

例如，我喜欢 python/django，我不喜欢 ruby​​/rails。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T15:38:49.997

虽然它不是服务器端最常用的语言，但 Javascript 在服务器端已经流行了几年。

例如，您应该查看[node.js](/questions/tagged/node.js "显示标记为“node.js”的问题")。

它曾经被认为只是一种显示弹出广告的玩具语言，但现在人们正在意识到它的力量。

你可以阅读一篇名为[JavaScript: The World's Most Misunderstood Programming Language](http://www.crockford.com/javascript/javascript.html)的文章来了解原因。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-12-15T15:31:59.423

Javascript是浏览器操作。您使用服务器端语言来填充页面，然后使用客户端语言使其美观。

# c - tmpfile_s 中限制的目的是什么？

> ID：13893485
> 
> 赞同：7
> 
> 时间：2012-12-15T15:28:44.447
> 
> 标签：c, c11, restrict, restrict-qualifier

来自 C11 草案：

> **C11 (n1570), § K.3.5.1.1`tmpfile_s`功能**
> `errno_t tmpfile_s(FILE * restrict * restrict streamptr);`

这里限定词的目的是什么`restrict`？

因为没有其他参数，编译器能够知道`streamptr`没有别名`restrict`，不是吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T16:25:36.140

周围有几个全局变量具有`FILE*`诸如`stdout`和`stderr`例如的类型。所以最左边`restrict`清楚地表明这些都不能返回，返回的`FILE*`不会与任何其他别名。第二个`restrict`提供相同的保证，但更高一级，你不能`&stderr`在那个函数中传递类似的东西。（嗯`stderr`，不一定是通常意义上的变量，但我希望你看到图片。）

# python - python中的文本或数据库，速度和资源消耗

> ID：13893486
> 
> 赞同：3
> 
> 时间：2012-12-15T15:28:57.350
> 
> 标签：python, database, text, python-2.7

只是对个人经验和对限制的理解等的查询。例如，如果我有一个包含 100,000 行（条目）的文本文件和一个包含 100,000 个相同条目的数据库，每个条目包含一个单词且没有双精度词，我会是哪个能够更快地处理并且哪个会消耗最少的内存？

据我了解，我可以在开始时将整个文本文件加载到内存中的列表中（仅约 1MB。）此信息用于确认字符串内容。字符串中的每个单词（由空格分隔）都必须存在于文件中，否则它会更改为列表中最相似的条目。简而言之，它是非常高级的自动更正。然而，可悲的是，我不得不重新发明轮子。

所以无论如何，我的问题仍然存在。哪个是我最好的选择？我正在尝试使用尽可能少的外部模块，所以我想我可能会坚持使用 SQLite（它是标准的，不是吗？尽管再多一个也无妨）如果换行符分隔的文本文件既是我最快的也是最经济的选项，我应该以特定的方式处理它们吗？我希望这个脚本能够在一秒钟内执行至少 100 次匹配操作，如果使用 Python 等语言在计算上是可行的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T15:57:07.000

如果您将所有 100,000 个单词加载到 Python 集中，确定给定单词是否在该集中将是[`O(1)`](https://en.wikipedia.org/wiki/Big_O_notation)- 它不会比这更快。启动 python 应用程序时的惩罚将是延迟，因为 Python 必须加载所有数据，大约需要几秒钟。

如果将单词加载到 SQLite（或任何其他 SQL 数据库）中，则需要基于哈希的索引来实现相同的性能顺序。我不确定 SQLite 是否具有该索引类型。MySQL 没有。

SQL 数据库通常没有查找“相似”词的功能，因为每个用户都有自己的“相似”定义。在 Python 中实现它会容易得多，但也许您选择的数据库有一些正是您正在寻找的东西。

最佳选择取决于您未提及的其他要求。100,000字经常变化吗？其他人（非程序员）是否需要维护他们？如果是这样，数据库可能更方便，您可能希望为此牺牲速度。另外，您多久启动一次 Python 应用程序？如果你运行它来测试单个单词，你会为每个单词等待几秒钟。另一方面，如果您编写一个守护程序/服务器并添加一个接口（套接字、HTTP 等），您只需加载一次数据，您就可以向它抛出大量单词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T16:09:24.547

免责声明：与性能一样，**不要依赖假设，而是衡量。**

话虽如此，这里有一些注意事项：

*   无论您使用数据库还是纯文本文件，数据结构和算法的选择都可能对性能产生重大影响。例如，在任何一种情况下，通过列表进行蛮力搜索都是低效的。
*   优化的内存数据结构可能比磁盘数据库更快。
*   另一方面，数据库解决方案可以更有效地使用内存。

# m2crypto - m2crypto 线程使用

> ID：13893487
> 
> 赞同：0
> 
> 时间：2012-12-15T15:29:01.853
> 
> 标签：m2crypto

文档有点稀疏。我打算在网络服务器中使用 m2crypto，似乎应该使用 m2crypto.threading.init()。

我的 python 函数是否应网络请求调用为：

```
def do_something():
   M2Crypto.threading.init()
   sign something with m2crypto
   M2Crypto.threading.cleanup()
   return httpresponse 
```

或者是其他东西？关于这个线程使用的任何网络参考？

谢谢内纳德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T17:26:34.493

你的部署模型是什么？如果你使用 mod_wsgi 之类的东西，你有单独的进程，你需要在 python 进程的生命周期内只设置一次线程。

# arrays - 将舞台上的所有电影剪辑添加到数组中？

> ID：13893488
> 
> 赞同：0
> 
> 时间：2012-12-15T15:29:18.830
> 
> 标签：arrays, actionscript-3, flash, movieclip

是否可以使用舞台上（或另一个电影剪辑中）的电影剪辑填充数组？

例如，如果 '_level' 是一个包含更多影片剪辑的影片剪辑，我想做这样的事情：

```
var currentClip:MovieClip;
for (var i:int = 0; i < _level.numChildren; i++) {
    currentClip = _level[i];
    .....
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T16:21:08.260

您可以使用 for 循环遍历它们：

```
var array:Array=new Array();
for(var i:int=0; i < stage.numchildren ; i++) {
   array.push(stage.getChildAt(i));
} 
```

您可以为此执行递归函数以获取孩子的孩子等，例如：

```
public var array:Array=new Array();
public function getChildren(do:DisplayObject){
  var arr:Array=new Array();
  for(var i:int=0; i < do.numchildren ; i++) {
       getChildren(getChildAt(i));
  }
  array.push(do);
} 
```

并将其称为：

```
getChildren(stage); 
```

# c# - 在 for 循环中优化正则表达式替换？

> ID：13893497
> 
> 赞同：1
> 
> 时间：2012-12-15T15:29:57.770
> 
> 标签：c#, regex, optimization, replace

[这基本上是我之前的问题](https://stackoverflow.com/questions/13654250/combining-substrings-in-c-sharp-with-a-custom-format)的后续。我一直在使用这段代码来替换数组中包含的字符串：

```
string[] replacements = {"these",
                         "words",
                         "will",
                         "get",
                         "replaced"};

string newString = "Hello.replacedthesewordswillgetreplacedreplaced";

for (int j = 0; j < replacements.Length; j++)
{
    newString = Regex.Replace(newBase,
    @"((?<firstMatch>(" + replacements[j] + @"))(\k<firstMatch>)*)",
    m => "[" + j + "," + (m.Groups[3].Captures.Count + 1) + "]");
} 
```

运行此代码`newString`后将是：

> 你好。[4,1][0,1][1,1][2,1][3,1][4,2]

这适用于像上面这样的小型替换。它基本上会立即替换字符串 - 但是对于大量替换它往往会变慢。

谁能看到我可以优化它以便更快地替换它的方法？

我假设 for 循环是它减慢速度的原因。数组中总是包含一些不需要替换的字符串（因为它们不包含在主`newString`字符串中）所以我想知道是否有办法在 for 循环之前检查它。不过，这可能会变得更慢......

我想不出更好的方法来做到这一点，所以我想我会问。谢谢你们的帮助！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T15:32:03.090

有几种方法可以尝试（NB 都未经测试，但我相信它们应该可以工作并且比您当前的代码更快）。

一个使用静态编译的正则表达式：

```
private static readonly Dictionary<string, int> Indexes = new Dictionary<string, int> 
{
  { "these", 0 },
  { "words", 1 },
  { "will", 2 },
  { "be", 3 },
  { "replaced", 4 },
};

private static readonly Regex ReplacementRegex = new Regex(string.Join("|", Indexes.Keys), RegexOptions.Compiled)

...
var occurrences = Indexes.Keys.ToDictionary(k => k, k => 0);
return ReplacementRegex.Replace(newString, m => {
  var count = occurences[m.Value];
  occurences[m.Value] = count + 1;
  return "[" + Indexes[m.Value] + "," + count + "]";
}); 
```

并且没有正则表达式：

```
for (int j = 0; j < replacements.Length; j++)
{
  var index = 0;
  var count = 0;
  var replacement = replacements[j];
  while((index = newString.IndexOf(replacement, index)) > -1) 
  {
    count++;
    newString = newString.Substring(0, index) + "[" + j + "," + count + "]" + newString.Substring(index + replacement.Length);
  }
} 
```

# struts2 - 如何在 struts2 标签中使用 css 样式？

> ID：13893498
> 
> 赞同：2
> 
> 时间：2012-12-15T15:30:03.073
> 
> 标签：struts2

我在我的 struts2 应用程序中使用 Metro CSS 主题。我正在使用带有 CSS 类的 html 标签，效果很好。但是在创建验证逻辑时，我发现它确实验证了表单但没有显示任何错误。

```
<form action="register.action" method ="post" validate="true">
 <div class="input-control text span3">
    <input type="text" name="username" placeholder="Enter User Name" value="" />
    <span class="helper"></span>
 </s:div> 
</form> 
```

然后我切换到 struts2 html 标签，它开始显示错误，但现在我没有附加样式。我使用 struts2 html 标记的 cssClass 属性为表单和 div 标记提供样式，效果很好，但是在将`<input type="text">`标记更改为`<s:textfield>`附加到输入框的所有样式之后就消失了。

请建议我如何使用 struts 标签保留 CSS 样式。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-15T15:52:00.857

您可以使用标签`cssClass`的属性`<s:textfield>`并添加 CSS 样式来样式化您的表单。

```
<s:textfield cssClass="mytext" ... />

//css
.mytext {
} 
```

这里值得注意的一点是 Struts2 标签默认使用**xhtml**主题。因此它会生成大量的 html 代码以及表单。您可能希望将默认主题更改为**css_xhtml**以应用您自己的样式，而不是使用 Struts2 默认。

在文件中添加以下内容`struts.properties`。struts.ui.theme = css_xhtml

参考：[在 Struts 2 中覆盖默认主题](http://viralpatel.net/blogs/struts-2-override-default-theme/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-15T17:52:09.687

如果您已经拥有所有具有自己样式和元素的 JSP，请使用 Struts2`simple`主题。此主题不会创建其他元素，也不会显示验证错误。但是您可以使用`fielderror`标签来显示验证错误[http://struts.apache.org/2.x/docs/fielderror.html](http://struts.apache.org/2.x/docs/fielderror.html)。所以你的表格看起来像这样：

```
<form action="register.action" method ="post" validate="true">
  <div class="input-control text span3">
    <s:fielderror fieldName="username"/>
    <s:textfield name="username" placeholder="Enter User Name"/>
    <span class="helper"></span>
  </s:div>
</form> 
```

您可以`struts.xml`使用`struts.ui.theme`常量为文件中的整个应用程序定义默认主题。

```
<constant name="struts.ui.theme" value="simple" /> 
```

# python - 使用python向大型couchDB中的每个文档添加字段的最快方法

> ID：13893501
> 
> 赞同：0
> 
> 时间：2012-12-15T15:30:55.443
> 
> 标签：python, random, couchdb, couchdb-python

我有一个 couchDB，有超过 100 万个条目分布在几个数据库中。我需要从中抽取随机样本，以便记录每个样本的成员。为此，在[这个](https://stackoverflow.com/questions/3779605/how-do-i-load-a-random-document-from-couchdb-efficiently-and-fairly)问题之后，**我想在我的 couchDB 中的每个文档中添加一个带有随机数的字段。**

**添加随机数的代码**

```
def add_random_fields():
    from numpy.random import rand
    server = couchdb.Server()
    databases = [database for database in server if not database.startswith('_')]
    for database in databases:
        print database
        for document in server[database]:
            if 'results' in server[database][document].keys():
                for tweet in server[database][document]['results']:
                    if 'rand_num' not in tweet.keys():
                        tweet['rand_num'] = rand()
                        server[database].save(tweet) 
```

这失败了，因为我没有足够的 RAM 来保存所有 CouchDB 数据库的副本。

**第一次尝试-分块加载数据库**

按照[这个](https://stackoverflow.com/questions/434287/what-is-the-most-pythonic-way-to-iterate-over-a-list-in-chunks)问题。

```
def grouper(n, iterable, fillvalue=None):
    "Collect data into fixed-length chunks or blocks"
    # grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx
    args = [iter(iterable)] * n
    return izip_longest(fillvalue=fillvalue, *args)

# ..Just showing relevant part of add_random_fields()

   #..
        chunk_size=100
        for tweet in grouper(server[database][document]['results'],chunk_size): 
```

如果我在 python 中迭代一个大列表，我会编写一个生成器表达式。我怎样才能在 couchdb-python 中做到这一点？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T05:03:04.643

**使用生成器避免将大型列表加载到内存中**

从[Marcus Brinkmann](http://blog.marcus-brinkmann.de/2011/09/17/a-better-iterator-for-python-couchdb/)那里，我找到了在 couchDB 数据库中的所有文档上生成生成器的代码。让那个生成器被调用`couchdb_pager`。

原来的功能变成如下。

```
def add_random_fields():
    from numpy.random import rand
    server = couchdb.Server()
    databases = [database for database in server if not database.startswith('_')]
    for database in databases:
        for document in couchdb_pager(server[database]):
            if 'results' in server[database][document]:
                for tweet in server[database][document]['results']:
                    if tweet and 'rand_num' not in tweet:
                        print document
                        tweet['rand_num'] = rand()
                        server[database].save(tweet) 
```

# android - 下载文件 Apache FTP Android

> ID：13893503
> 
> 赞同：-1
> 
> 时间：2012-12-15T15:31:15.880
> 
> 标签：android

我在 android apache ftp 客户端下载一个文件。虽然我没有收到错误但在 Logcat 中收到警告

这是代码

```
public void downloadFile(String filename) {
        BufferedOutputStream desFileStream = null;
        try {
            desFileStream = new BufferedOutputStream(new FileOutputStream(
                    Environment.getExternalStorageDirectory()),
                    8 * 1024);
            mFtp.retrieveFile(filename, desFileStream);
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    } 
```

我的堆栈跟踪是

```
12-15 20:17:30.170: W/System.err(19182): java.io.FileNotFoundException: /mnt/sdcard: open failed: EISDIR (Is a directory)
12-15 20:17:30.180: W/System.err(19182):    at libcore.io.IoBridge.open(IoBridge.java:406)
12-15 20:17:30.180: W/System.err(19182):    at java.io.FileOutputStream.<init>(FileOutputStream.java:88)
12-15 20:17:30.180: W/System.err(19182):    at java.io.FileOutputStream.<init>(FileOutputStream.java:73)
12-15 20:17:30.215: W/System.err(19182):    at com.murtaza.msftp.myftpTask.downloadFile(myftpTask.java:82)
12-15 20:17:30.220: W/System.err(19182):    at com.murtaza.msftp.MainActivity$1.onItemClick(MainActivity.java:74)
12-15 20:17:30.281: W/System.err(19182):    at android.widget.AdapterView.performItemClick(AdapterView.java:292)
12-15 20:17:30.281: W/System.err(19182):    at android.widget.AbsListView.performItemClick(AbsListView.java:1058)
12-15 20:17:30.307: W/System.err(19182):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:2514)
12-15 20:17:30.320: W/System.err(19182):    at android.widget.AbsListView$1.run(AbsListView.java:3168)
12-15 20:17:30.330: W/System.err(19182):    at android.os.Handler.handleCallback(Handler.java:605)
12-15 20:17:30.330: W/System.err(19182):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-15 20:17:30.330: W/System.err(19182):    at android.os.Looper.loop(Looper.java:137)
12-15 20:17:30.330: W/System.err(19182):    at android.app.ActivityThread.main(ActivityThread.java:4340)
12-15 20:17:30.330: W/System.err(19182):    at java.lang.reflect.Method.invokeNative(Native Method)
12-15 20:17:30.340: W/System.err(19182):    at java.lang.reflect.Method.invoke(Method.java:511)
12-15 20:17:30.340: W/System.err(19182):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-15 20:17:30.340: W/System.err(19182):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-15 20:17:30.340: W/System.err(19182):    at dalvik.system.NativeStart.main(Native Method)
12-15 20:17:30.359: W/System.err(19182): Caused by: libcore.io.ErrnoException: open failed: EISDIR (Is a directory)
12-15 20:17:30.380: W/System.err(19182):    at libcore.io.Posix.open(Native Method)
12-15 20:17:30.380: W/System.err(19182):    at libcore.io.BlockGuardOs.open(BlockGuardOs.java:98)
12-15 20:17:30.380: W/System.err(19182):    at libcore.io.IoBridge.open(IoBridge.java:390)
12-15 20:17:30.380: W/System.err(19182):    ... 17 more 
```

实施后

```
Environment.getExternalStorageDirectory() + "/"+ filename 
```

给出空指针异常。StackTrace 是

```
12-15 20:47:26.350: E/AndroidRuntime(26296): FATAL EXCEPTION: main
12-15 20:47:26.350: E/AndroidRuntime(26296): java.lang.NullPointerException
12-15 20:47:26.350: E/AndroidRuntime(26296):    at org.apache.commons.net.SocketClient.getRemoteAddress(SocketClient.java:651)
12-15 20:47:26.350: E/AndroidRuntime(26296):    at org.apache.commons.net.ftp.FTPClient._openDataConnection_(FTPClient.java:732)
12-15 20:47:26.350: E/AndroidRuntime(26296):    at org.apache.commons.net.ftp.FTPClient._retrieveFile(FTPClient.java:1778)
12-15 20:47:26.350: E/AndroidRuntime(26296):    at org.apache.commons.net.ftp.FTPClient.retrieveFile(FTPClient.java:1769)
12-15 20:47:26.350: E/AndroidRuntime(26296):    at com.murtaza.msftp.myftpTask.downloadFile(myftpTask.java:85)
12-15 20:47:26.350: E/AndroidRuntime(26296):    at com.murtaza.msftp.MainActivity$1.onItemClick(MainActivity.java:74)
12-15 20:47:26.350: E/AndroidRuntime(26296):    at android.widget.AdapterView.performItemClick(AdapterView.java:292)
12-15 20:47:26.350: E/AndroidRuntime(26296):    at android.widget.AbsListView.performItemClick(AbsListView.java:1058)
12-15 20:47:26.350: E/AndroidRuntime(26296):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:2514)
12-15 20:47:26.350: E/AndroidRuntime(26296):    at android.widget.AbsListView$1.run(AbsListView.java:3168)
12-15 20:47:26.350: E/AndroidRuntime(26296):    at android.os.Handler.handleCallback(Handler.java:605)
12-15 20:47:26.350: E/AndroidRuntime(26296):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-15 20:47:26.350: E/AndroidRuntime(26296):    at android.os.Looper.loop(Looper.java:137)
12-15 20:47:26.350: E/AndroidRuntime(26296):    at android.app.ActivityThread.main(ActivityThread.java:4340)
12-15 20:47:26.350: E/AndroidRuntime(26296):    at java.lang.reflect.Method.invokeNative(Native Method)
12-15 20:47:26.350: E/AndroidRuntime(26296):    at java.lang.reflect.Method.invoke(Method.java:511)
12-15 20:47:26.350: E/AndroidRuntime(26296):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-15 20:47:26.350: E/AndroidRuntime(26296):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-15 20:47:26.350: E/AndroidRuntime(26296):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T15:49:11.807

错误消息指出：

> java.io.FileNotFoundException：**/mnt/sdcard：打开失败**：EISDIR（**是一个目录**）

在您的代码中，您正在执行以下操作：

```
new FileOutputStream(
  Environment.getExternalStorageDirectory() // <- This points to /mnt/sdcard
); 
```

现在，正如[`FileOutputStream`-documentation 所述](http://docs.oracle.com/javase/6/docs/api/java/io/FileOutputStream.html#FileOutputStream%28java.io.File%29)：

> **抛出：**
> *FileNotFoundException* -**如果文件存在但是是目录而不是常规文件**，不存在但无法创建，或者由于任何其他原因无法打开

所以，使用类似这样的参数：

```
new FileOutputStream(
  Environment.getExternalStorageDirectory()+"/"+filename
); 
```

这将创建一个名称存储在`filename`SD 卡中的文件并写入其中。

# javascript - 平滑显示/隐藏元素的 JavaScript 库

> ID：13893505
> 
> 赞同：4
> 
> 时间：2012-12-15T15:31:21.150
> 
> 标签：javascript, css, show-hide

我需要动画显示和隐藏 div 元素。是否有任何 JS 库或 CSS 技巧可以使它成为可能？我知道 jQuery 和类似的东西，但它们太大了——我不想使用超过 ~5 KB。

我也尝试过 CSS 过渡，但它不允许使用显示属性。可见性发生在页面中，这是不可取的。

* * *

**编辑：** 例如： [jQuery.toggle()](http://api.jquery.com/toggle/)。从顶部开始的第二个演示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T16:23:40.903

使用 CSS 过渡。您无需触摸显示属性。

您可以将 div 的高度/宽度（或两者）设置为 0，然后设置为所需的大小，然后激活过渡。

或者，如果您为它们的位置设置动画，您可以从页面飞入/飞出 div（从页面外部开始并飞入所需位置，反之亦然）。您可以从顶部或从左/右将它们滑入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T15:36:04.593

此页面似乎显示了在没有 jQuery 的情况下执行此操作所需的代码：

[http://brugbart.com/Articles/javascript-fade](http://brugbart.com/Articles/javascript-fade)

不过，还没有完全通读该页面，所以我不能说它是否合法。

# python - 在python中定义具有1个参数的方法时出错

> ID：13893507
> 
> 赞同：0
> 
> 时间：2012-12-15T15:31:32.933
> 
> 标签：python

我尝试`up`在 class 中使用 1 个参数定义函数`X`，如下所示：

```
class X:

    def __init__(self):
        self.elem=[]

    def i(self, new):
        self.elem.append(new)
        self.up(self,len(self.elem)-1)                    <= error here

    def up(self, n):
        print n

border = X()

a = [2,4,3,1]

for i in a:
    border.i (i) 
```

错误如下所示：

```
$ Traceback (most recent call last):
  File "p.py", line 60, in <module>
    border.i (i)
  File "prim.py", line 50, in i
    self.up(self,len(self.elem)-1)
TypeError: up() takes exactly 2 arguments (3 given)
$ 
```

如果我这样调用`i`，`self.up(self)`它会编译并`print n`显示如下：

```
$ <__main__.X instance at 0x7f7a7ddf0128>
<__main__.X instance at 0x7f7a7ddf0128>
<__main__.X instance at 0x7f7a7ddf0128>
<__main__.X instance at 0x7f7a7ddf0128>
$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T15:33:45.413

您不需要传递`self`给`up()`：

```
def i(self, new):
    self.elem.append(new)
    self.up(len(self.elem)-1) 
```

Python 为你做这件事；通过查找`self.up`，你会得到一个*绑定的方法*，这意味着 Python 会在你调用时*自动*添加。`self``up()`

你实际上是在打电话`up(self, self, len(self.elem)-1)`；三个元素，其中只有 2 个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T15:33:48.023

您不必将 self 传递给该方法。它是由python直接完成的

这就是我们使用类和方法的原因之一：你没有显式传递对象，因为它在一个类中，因此使用了那个特定的实例

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T15:34:36.057

您不需要`self`明确传递：

```
self.up(self, len(self.elem)-1)
        ^^^^^ this needs to be removed 
```

当我进行此更改并运行您的程序时，我得到

```
0
1
2
3 
```

# php - 如何从 GROUP_CONCAT 中删除单个行？

> ID：13893509
> 
> 赞同：5
> 
> 时间：2012-12-15T15:31:39.330
> 
> 标签：php, mysql

我正在编写一个带有评论的新闻更新系统。我有三张桌子。

> 1.  `news_tbl`
> 2.  `users_tbl`（新闻文章的作者）
> 3.  `comments_tbl`（与外键连接 - news_id）

我尝试了两种方法，有和没有`GROUP_CONCAT`。

我试过这个：

```
SELECT *, COUNT(comments_tbl.comments_id) AS `comments_count` 
FROM news_tbl AS n
LEFT JOIN users_tbl AS u
ON n.user = u.username 
LEFT JOIN comments_tbl AS c
ON c.news_id = n.news_id
GROUP BY n.news_id; 
```

它有效，但我只能显示第一个书面评论，但是，我想显示所有评论，附加到新闻更新中。

我也使用`GROUP_CONCAT`了评论，因此对于每个评论，新闻帖子都不会重复。我不确定这是否是正确的方法，但它有效。

我的问题是，我有一个登录系统，我希望用户能够单独删除评论，每个评论都有一个删除按钮。但我不知道如何单独分隔评论，并从每个评论中获取 id。我已经尝试过使用 PHP `explode`，但它对我不起作用。

这是我的代码：

```
<?php
require_once('connect.inc.php');
$conn = dbConnect('pdo') or die('no connection');

$sqlquery = "SELECT news_tbl.*, users_tbl.*,
GROUP_CONCAT(comments_tbl.comments_id) AS commentsid,
GROUP_CONCAT(CONCAT ('<hr><h6>Navn: ', comments_tbl.name,'</h6>','<p>',comments_tbl.comment, '</p>') SEPARATOR '<br><br>') AS comments, 
COUNT(comments_tbl.comments_id) AS comments_count
FROM news_tbl
LEFT JOIN comments_tbl ON comments_tbl.news_id = news_tbl.news_id
LEFT JOIN users_tbl ON news_tbl.user = users_tbl.username
GROUP BY news_tbl.news_id
ORDER BY news_tbl.news_id DESC LIMIT 5";

$result = $conn->query($sqlquery);
foreach($result as $row) {
  // AS
  $commentsid = $row['commentsid'];
  $comments = $row['comments'];
  $count = $row['comments_count'];

  //users_tbl
  $username = $row['username'];

  //news_tbl
  $newsid = $row['news_id'];
  $headline = $row['headline'];
  $bodytext = $row['bodytext'];
  $picture = $row['picture'];
  $date = $row['date'];

  //comments_tbl
  $commentid = $row['comments_id'];
  $name = $row['name'];
  $comment = $row['comment'];
?>

  <div class="row-fluid">
    <div class="news">
      <div class="text-left">
        <h3 class="pull-top"><?php echo $headline ?></h3>
          <div class="row-fluid span12">
            <img src="<?php echo 'upload/'.$picture ?>" class="span9 img-news"/>
          </div>
          <div class="row-fluid">
            <div class="span3">
              <p class="author"><i><span class="red">Skrevet af: </span> </i><?php echo $username ?></p>
            </div>
            <div class="span4">
              <p><i ><span class="red">Oprettet:</span> </i> <?php echo $date ?></p>
            </div>
          </div><!--/ End author-row -->
        <!--<p class="author"><i><span class="red">Skrevet af: </span> </i><?php echo $username ?>&nbsp;&nbsp;|&nbsp;&nbsp;<i ><span class="red">Oprettet:</span> </i> <?php echo $date ?></p>-->
        <p class="push-top-bottom"><?php echo $bodytext ?></p>
      </div>
      <hr>
      <p class="text-left pull-top3"> <b><?php echo $count ?> kommentar</b></p>
      <hr class="grey">
      <div class="row-fluid pull-top2">
        <div class="pull-left span12 text-left well">
          <?php echo $comments; ?>
        </div>
        <!-- Opret kommentar -->
        <div class="row-fluid pull-left">
          <form action="insert.php?<?php echo 'news_id=' . $newsid; ?>" method="post" class="pull-left leave-comment">
            <input type="text" name="name" id="name" class="comment" placeholder="Navn" required/> <br> <br>
            <textarea type="text" name="comment" id="comment" class="comment" placeholder="Skriv kommentar" rows="5" required></textarea> <br> <br>
            <input type="submit" value="Opret kommentar" class="btn pull-left"/>
          </form>
        </div>
      </div><!--/ End comments-row -->
    </div><!--/ End news-container -->
  </div><!--/ End news row -->
<?php  
  if (isset($_SESSION['valid_user'])) {
    // onClick slet nyhed med alert box
    echo '<div class="row-fluid">';
    echo '  <div class="pull-left">';
    echo '    <a class="btn btn-danger" onclick="deleteNews('. $newsid.')" style="margin-right:20px;">Slet nyhed</a>';
    echo '    <a href=update.php?news_id='.$newsid.'&username='. $username .' class="btn btn-info">Updater nyhed</a>';
    echo '    <br><br><br><br>';
    echo '  </div>';
    echo '</div>';
  }
?>
  <hr>
<?php  
  //End foreach
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T06:30:05.383

函数 GROUP_CONCAT 对生成的连接字符串的长度有限制。您很可能通过尝试连接 HTML 或可能很长的注释来快速达到此限制。

我发现最好从 news_tbl 运行第一个查询，并在 PHP 中使用来自 news_tbl 的所有唯一 ID 构建一个数组。接下来，运行第二个查询以获取新闻记录的所有评论。例如：

```
$sqlquery = "SELECT * FROM news_tbl LIMIT 10";

$result = $conn->query($sqlquery);
$newsIds = array();
foreach($result as $row) {
    $newsIds[] = $row['id'];
}
$sql = "SELECT * FROM comments_tbl WHERE news_id IN (".implode(', ', $newsIds).")";
$result2 = $conn->query($sql);

// process each comment individually from $result2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:01:53.567

如果我正确理解了您的问题，您可以将 group_concat(comments_tbl.comments_id) 和您当前的 group_concat() 内容作为一列，例如：

```
GROUP_CONCAT(CONCAT(comments_tbl.comments_id,'|||','<hr><h6>Navn: ', comments_tbl.name,'</h6>','<p>',comments_tbl.comment, '</p>')) as something 
```

然后在 php

```
list($comment_id,$comment_content) = explode('|||',$row['something']); 
```

# javascript - 使用 CanvasRenderer 产生不和谐角落的全景图

> ID：13893515
> 
> 赞同：0
> 
> 时间：2012-12-15T15:32:07.967
> 
> 标签：javascript, html5-canvas, three.js

我使用[three.js](http://mrdoob.github.com/three.js/) Canvas Renderer API() 开发了Panaroma，我在旋转时观察到破碎和震动的角落，我怎样才能使我的过渡\输出平滑？

![在此处输入图像描述](../Images/f48cff30f008d389c10b063da0da0a7c.png)

![在此处输入图像描述](../Images/6c0e0e2eefe0918b61ef4c7af9850233.png)

## 代码：

***全景.html***

```
<!doctype html>
<html>
<head>
<title>A Simple Panaroma</title>
<script src="three.js"></script>
<script src="panaroma.js"></script>
<link rel="stylesheet" href="panaroma.css"></link>
</head>
<body></body>
</html> 
```

***panaroma.css***

```
html,body{
    margin:0px;
    padding:0px;
    border:0px;
    overflow:hidden;
    width:100%;
    height:100%;
} 
```

***panaroma.js***

```
function Panorama() {
    var width = window.innerWidth,
        height = window.innerHeight; // Capture the width and height of window
    var scene = new THREE.Scene(); // Create a Scene
    var camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000); // Create a Camera width aspect ratio,zoomin and zoomout properties
    var renderer = new THREE.CanvasRenderer(); // Create a Canvas Renderer as we are using a canvas here
    var textureCanvas, materials, lon = 90,
        onMouseDownLon = 0,
        lat = 0,
        onMouseDownMouseX = 0,
        onMouseDownMouseY = 0,
        onMouseDownLat = 0,
        phi = 0,
        theta = 0,
        target = new THREE.Vector3(),
        isUserInteracting = false;

    //Set size of render

    renderer.setSize(width, height);

    addTextureCanvas();
    document.addEventListener('mousedown', onDocumentMouseDown, false);
    document.addEventListener('mousemove', onDocumentMouseMove, false);
    document.addEventListener('mouseup', onDocumentMouseUp, false);
    document.addEventListener('mousewheel', onDocumentMouseWheel, false);

    function addTextureCanvas() {
        //Create a Canvas Element
        textureCanvas = document.createElement('canvas');

        addMaterials();
    }

    function addMaterials() {
        materials = [

        loadTexture('http://img528.imageshack.us/img528/3751/righthf.jpg'), // Right
        loadTexture('http://img827.imageshack.us/img827/931/leftag.jpg'), // Left
        loadTexture('http://img94.imageshack.us/img94/4195/topfz.jpg'), // Top
        loadTexture('http://img856.imageshack.us/img856/1772/bottomi.jpg'), // Bottom
        loadTexture('http://img266.imageshack.us/img266/8257/backkmk.jpg'), // Back
        loadTexture('http://img189.imageshack.us/img189/3938/frontnmb.jpg') // Front

        ];
        addToScene();
    }

    function addToScene() {
        mesh = new THREE.Mesh(new THREE.CubeGeometry(100, 100, 100, 7, 7, 7), new THREE.MeshFaceMaterial(materials));
        scene.add(mesh);
        mesh.scale.x = -1.6;
        document.body.appendChild(renderer.domElement);
    }

    function loadTexture(path) {

        var texture = new THREE.Texture(textureCanvas);
        var material = new THREE.MeshBasicMaterial({
            map: texture,
            overdraw: true
        });

        var image = new Image();
        image.onload = function () {

            texture.needsUpdate = true;
            material.map.image = this;

            render();

        };
        image.src = path;

        return material;

    }

    function render() {

        lat = Math.max(-85, Math.min(85, lat));
        phi = (90 - lat) * Math.PI / 180;
        theta = lon * Math.PI / 180;

        target.x = Math.sin(phi) * Math.cos(theta);
        target.y = Math.cos(phi);
        target.z = Math.sin(phi) * Math.sin(theta);

        camera.lookAt(target);
        renderer.render(scene, camera);
    }

    function onDocumentMouseDown(event) {

        event.preventDefault();

        isUserInteracting = true;

        onPointerDownPointerX = event.clientX;
        onPointerDownPointerY = event.clientY;

        onPointerDownLon = lon;
        onPointerDownLat = lat;

    }

    function onDocumentMouseMove(event) {

        if (isUserInteracting) {

            lon = (onPointerDownPointerX - event.clientX) * 0.1 + onPointerDownLon;
            lat = (event.clientY - onPointerDownPointerY) * 0.1 + onPointerDownLat;
            render();

        }

    }

    function onDocumentMouseUp(event) {

        isUserInteracting = false;
        render();

    }

    function onDocumentMouseWheel(event) {

        camera.fov -= event.wheelDeltaY * 0.05;
        camera.updateProjectionMatrix();

        render();

    }
}

document.addEventListener("DOMContentLoaded", function () {
    new Panorama();
}); 
```

如何使输出平滑？任何建议都受到高度赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T17:28:01.060

增加 CubeGeometry 上的分割。

```
mesh = new THREE.Mesh( new THREE.CubeGeometry( 100, 100, 100, 16, 16, 16 ), new THREE.MeshFaceMaterial( materials ) ); 
```

如果您想了解有关此问题*的更多信息，请阅读*[本文](http://extremelysatisfactorytotalitarianism.com/blog/?p=2120)。

提示：避免这种情况：

```
mesh.scale.x = -1.6; 
```

相反，保持比例为正，并像这样定义你的材料：

```
var material = new THREE.MeshBasicMaterial({
    map: texture,
    side: THREE.BackSide,
    overdraw: true
}); 
```

# maven-2 - maven如何找到工件？

> ID：13893516
> 
> 赞同：1
> 
> 时间：2012-12-15T15:32:09.263
> 
> 标签：maven-2, repository, conventions

我正在尝试将一个文档记录不佳的软件用作库。在网站上，他们列出了其依赖项的*工件 ID*，但后来我猜他们删除了其中一个部分。

该`mvn compile`命令（在我的项目中，使用另一个作为依赖项）我得到以下依赖项之一的错误：

```
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building <my software> 0.1
[INFO] ------------------------------------------------------------------------
[WARNING] The POM for <my dependency> no dependency information available
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 0.426s
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal on project <my project>: Could not resolve dependencies for project <my project>: Failure to find <my dependency> in http://repo.maven.apache.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced -> [Help 1] 
```

在 Internet 上搜索，我发现 Maven 默认使用*ibiblio.org 上*的全球集中式存储库，但他们**不太**可能使用它。

由于他们不支持我，我需要通过他们的东西找到我的方式，所以我的问题是：是否有发布 maven 存储库的标准方式？

例如，是否有与*groupId*相关联的查找系统（通常为 形式`org.example.something`）？

* * *

**相关问题：** [Maven - 如何/在哪里发布工件](https://stackoverflow.com/questions/3266519/maven-how-where-to-publish-artifacts?rq=1)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T22:47:12.723

Maven 获取工件的默认位置是[Maven Central](http://repo.maven.apache.org/maven2)，而*ibiblio.org*只是 Maven Central 的镜像（[请参阅存储库指南](http://docs.codehaus.org/display/MAVENUSER/Mirrors+Repositories)）。请参阅[存储库指南](http://maven.apache.org/repository/index.html)。

[此外， groupId 和 maven repository](http://maven.apache.org/guides/introduction/introduction-to-repositories.html)之间没有关系。最好的方法是[在 Maven central 中搜索工件](http://search.maven.org/)。

除此之外，您应该删除所请求工件所在的本地存储库 (.m2/repository/) 的一部分，因为根据您收到的消息，您似乎试图获取一个没有给定 groupId/artifactId/ 的工件版本坐标。

解决此类问题的最佳方法是安装[存储库管理器](http://maven.apache.org/repository-management.html)并将所需的工件安装到存储库管理器中。

另一方面，[将工件上传到 maven Central](http://maven.apache.org/guides/mini/guide-central-repository-upload.html)并不是真正的问题。

# c# - 在 .NET 中提取图像的一部分

> ID：13893517
> 
> 赞同：4
> 
> 时间：2012-12-15T15:32:11.187
> 
> 标签：c#, .net, vb.net, image, playing-cards

我有一张卡片的 PNG 作为 1 张图像（它将所有 52 张卡片组合成 1 个图像文件）。如何根据需要提取单个卡（或在启动时将它们全部提取到单独的图像文件中）。

我了解知道要获取哪一行和哪一列的逻辑，它是我遇到问题的实际图像处理代码。

我正在使用 Visual Studio 2010 和 VB（尽管任何 .NET 语言的示例代码都可以）。

我不允许发布图像本身，但这是一个示例图像

[http://www.jfitz.com/cards/windows-playing-cards.png](http://www.jfitz.com/cards/windows-playing-cards.png)

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-15T15:40:02.693

这将加载原件并创建一个从 (0,0) 开始且尺寸为 100x100 的裁剪版本。您必须编写逻辑来迭代每张卡片，知道何时移动到下一行等。但是，一旦您知道坐标和尺寸，这应该有助于您取出卡片。

```
Bitmap cards = new Bitmap(@"C:\SomePath\");
Rectangle srcRect = new Rectangle(0, 0, 100, 100);
Bitmap card = (Bitmap)cards.Clone(srcRect, cards.PixelFormat); 
```

顺便说一句，我没有包括对 card.Save() 的调用，因为在保存期间有很多选项需要设置，这有点超出了你的问题范围。但是，有关如何将其保存到磁盘的信息，[请参阅 http://msdn.microsoft.com/en-us/library/ytz20d80.aspx](http://msdn.microsoft.com/en-us/library/ytz20d80.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T15:43:53.787

我非常无聊，看看这是否有帮助。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Drawing;

namespace CardDeck
{
    public class CardCropper
    {
        private Bitmap _source;
        private int _cardsPerRow;
        private int _rowCount;
        private int _cardCount;
        private int _cardWidth;
        private int _cardHeight;

        public CardCropper(Bitmap source, int rowCount, int cardsPerRow)
        {
            _source = source;
            _cardsPerRow = cardsPerRow;
            _rowCount = rowCount;
            _cardCount = _cardsPerRow * _rowCount;
            _cardWidth = source.Width / _cardsPerRow;
            _cardHeight = source.Height / _rowCount;
        }

        public Bitmap[,] CropCards()
        {
            var cards = new Bitmap[_rowCount, _cardsPerRow];

            for (int y = 0; y < _rowCount; y++)
            {
                for (int x = 0; x < _cardsPerRow; x++)
                {
                    cards[y, x] = CropCard(x, y);
                }
            }

            return cards;
        }

        private Bitmap CropCard(int x, int y)
        {
            var rect = new Rectangle(x * _cardWidth, y * _cardHeight, _cardWidth, _cardHeight);

            return _source.Clone(rect, _source.PixelFormat);
        }
    }

    public class CardDeck
    {
        private int _limit;
        private int _cardsPerRow;
        private int _index = 0;
        private Bitmap[,] _cards;

        public int Index
        {
            get
            {
                CheckLimits();
                return _index;
            }
            set
            {
                _index = value;
                CheckLimits();
            }
        }

        public CardDeck(Bitmap[,] cards, int rowCount, int cardsPerRow)
        {
            _cards = cards;
            _limit = rowCount * cardsPerRow;
            _cardsPerRow = cardsPerRow;            
        }

        public Image GetCardFromIndex()
        {
            var point = GetPointFromIndex();

            return _cards[point.Y, point.X];
        }

        private void CheckLimits()
        {
            if (_index >= _limit)
            {
                _index = 0;
            }

            if (_index < 0)
            {
                _index = _limit - 1;
            }
        }

        private Point GetPointFromIndex()
        {
            int x = this.Index % _cardsPerRow;
            int y = this.Index / _cardsPerRow;

            return new Point(x, y);
        }
    }
} 
```

用法：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace CardDeck
{
    public partial class CardDeckForm : Form
    {
        private CardDeck _cardDeck = null;

        public CardDeckForm()
        {
            InitializeComponent();

            LoadCards();

            ShowImage();
        }

        private void LoadCards()
        {
            using (var source = new Bitmap(@"AllCards.png"))
            {
                var cards = new CardCropper(source, rowCount: 4, cardsPerRow: 13).CropCards();
                _cardDeck = new CardDeck(cards, rowCount: 4, cardsPerRow : 13);
            }
        }

        private void NextButton_Click(object sender, EventArgs e)
        {
            _cardDeck.Index++;
            ShowImage();
        }

        private void PreviousButton_Click(object sender, EventArgs e)
        {
            _cardDeck.Index--;
            ShowImage();
        }

        private void ShowImage()
        {
            this.cardPictureBox.Image = _cardDeck.GetCardFromIndex();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T15:44:21.477

```
public static System.Drawing.Image CropBitmap(Bitmap bitmap, int cropX, int cropY, int cropWidth, int cropHeight)
        {
            System.Drawing.Rectangle rect = new System.Drawing.Rectangle(cropX, cropY, cropWidth, cropHeight);
            System.Drawing.Image cropped = bitmap.Clone(rect, bitmap.PixelFormat);
            return cropped;
        } 
```

# mysql - 如果我使用 DBI/DBD，如何从 Perl 调用 mysql 函数（如 mysql_insert_id）？

> ID：13893519
> 
> 赞同：1
> 
> 时间：2012-12-15T15:32:28.707
> 
> 标签：mysql, perl

> **可能重复：**
> [如何获取使用 DBI 插入的最后一行？](https://stackoverflow.com/questions/1906896/how-can-i-fetch-the-last-row-i-inserted-using-dbi)

我需要能够调用mysql中的函数。一个例子是：

```
$dbh = DBI->connect(......)
$sqlQuery = "INSERT INTO xxx VALUES ......";
$sth = $dbh->prepare($sqlQuery);
$sth->execute();

#The missing code is here
#Call the function mysql_insert_id to retrieve the id of the last inserted record
#Do something with the id 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T15:39:24.023

来自`perldoc DBI`：

```
$rv = $dbh->last_insert_id($catalog, $schema, $table, $field); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T15:39:57.583

文档：[https ://metacpan.org/pod/DBI#last_insert_id](https://metacpan.org/pod/DBI#last_insert_id)

```
my $id = $dbh->last_insert_id(); 
```

MySQL 忽略参数

# c - 深度优先目录遍历导致 C 中的分段错误

> ID：13893524
> 
> 赞同：1
> 
> 时间：2012-12-15T15:33:01.260
> 
> 标签：c, unix, directory, depth-first-search

我正在编写一个代码来使用`depth first`算法遍历目录。问题是程序没有显示任何内容并给出`Segmentation Fault error`. 我试图调试它，但它毫无价值，因为我还在学习东西。所以现在我需要专家的帮助。这是代码：

```
void func(char path[]);

int main(int argc, char *argv) {
    char buf[255];

    scanf("%s",buf);
    func(buf);
    return 0;
}

void func(char path[]) {
    DIR *dirp;
    struct stat states;
    struct dirent *direntp;
    printf("Inside\n");
    dirp=opendir(path);
    stat(path, &states);

    while ((direntp=readdir(dirp)) != NULL) {
        if (S_ISDIR(states.st_mode)) {
            printf("Calling Func\n");
            func(direntp->d_name);
            chdir("..");
        } else if (!S_ISDIR(states.st_mode)) {
            printf("  %s\n", direntp->d_name);
        } else if (!strcmp(direntp->d_name, ".") || !strcmp(direntp->d_name, "..")) {
            continue;
        }
    }
    return ;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T15:51:36.677

在 func 里面，在 while 前面，放上：

```
dirp=opendir (path);
if (!dirp)
  return; 
```

而且，顺便说一句，它的`int main (int argc, char *argv[])`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T18:57:44.847

用于调试打印，打印到`stderr`; 它是行缓冲的，因此看起来更可靠。

概括地说，您的功能是：

```
void func(char path[])
{
    DIR *dirp;
    struct stat states;
    struct dirent *direntp;
    printf("Inside\n");
    dirp=opendir(path);
    stat(path,&states);

    while ((direntp = readdir(dirp)) != NULL)
    {
        if (S_ISDIR(states.st_mode))
        {
            printf("Calling Func\n");
            func(direntp->d_name);
            chdir("..");
        }
        else if (!S_ISDIR(states.st_mode))
        {
            printf("  %s\n",direntp->d_name);
        }
        else if (!strcmp(direntp->d_name,".") || !strcmp(direntp->d_name,".."))
        {
            continue;
        }
    }
} 
```

`chdir("..")`是不明智的；您既没有`chdir()`对相关目录进行操作，也没有确保该目录是当前目录的直接子目录，这意味着这段代码将会变得混乱……如果它到达那一点。

您这样做`stat(path, &states);`但不检查它是否有效。

您这样做`dirp = opendir(path);`但不检查它是否有效。

您不会`stat()`在每个条目上都这样做；您不断使用来自 的初始统计信息`path`。这可能是您测试时的一个目录，因此您然后递归调用该函数，该函数将读取`.`，这是一个目录，如果您没有先用完指针，​​您可能最终会用完堆栈`DIR`。

即使您`stat()`对文件进行了排列，您在循环中的测试顺序也是错误的——这是一个非常重要的操作，因为您刚刚读取的名称必须附加到目录的路径中才能形成正确的文件名。你的代码是：

```
if (is a directory)
else if (is not a directory)
else if (name is . or ..)
else ...missing... 
```

首先，the`if`和以下`else if`涵盖了所有选项，因此`else`永远不会执行名称 test 和 final（不存在）。您可能首先需要名称 test （伪代码）：

```
if (name is a "." or "..")
    print "Skipping";
else if (name is a directory)
{
    create "path/name" as string;
    recurse with "path/name";
}
else
    print "Skipping non-directory"; 
```

请注意，这总是在每次迭代中打印一些东西。这在调试时非常重要。您不希望代码在执行您不期望的事情时保持安静。

请注意，您不要调用`closedir()`; 这意味着您将用完目录描述符，获得一个 NULL 值，`dirp`当您使用它时会崩溃。

请注意，伪代码不包含任何`chdir()`操作。使用它们时要非常、非常、非常谨慎。了解`fchdir()`.

阅读[`ftw()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/ftw.html)和[`nftw()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/nftw.html); 有关于这些功能面临的复杂性的注释。

# php - 有人对这个 zip 脚本有想法吗？

> ID：13893530
> 
> 赞同：0
> 
> 时间：2012-12-15T15:33:54.560
> 
> 标签：php, archive

这是我用来将文件夹（名称在`$id`变量中）放入存档的脚本。

```
$sourcefolder="../uploads/fail/$id/";
$zipfilename="fordownload/$id.zip";
$timeout=5000;
$dirlist = new RecursiveDirectoryIterator($sourcefolder);
$filelist = new RecursiveIteratorIterator($dirlist);
ini_set('max_execution_time', $timeout);
$zip = new ZipArchive();
if ($zip->open("$zipfilename", ZipArchive::CREATE) !== TRUE) {
    die ("Error");
}
foreach ($filelist as $key=>$value)
{
    $zip->addFile(realpath($key), $key) or die ("Error");
}
$zip->close();
redict("$zipfilename",0); 
```

问题是我只想把文件夹`$id`放在存档中，没有前缀`../uploads/fail/`，但我不知道怎么做。你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T19:34:11.557

因此，这是您代码的核心：

```
$dirlist = new RecursiveDirectoryIterator($sourcefolder);
$filelist = new RecursiveIteratorIterator($dirlist);
$zip = new ZipArchive();
foreach ($filelist as $key => $value) {
    $zip->addFile(realpath($key), $key) or die ("Error");
} 
```

您正在调用一个[RecursiveDirectoryIterator](http://php.net/class.recursivedirectoryiterator)，它是一个[FilesystemIterator](http://php.net/class.filesystemiterator)，它本身就是一个[DirectoryIterator](http://php.net/class.directoryiterator)。在你的`foreach`,里面`$value`是一个[SplFileInfo](http://php.net/class.splfileinfo)。

我们的第一个镜头是这样的：

```
foreach ($filelist as $path => $fileinfo) {
    $zip->addFile($fileinfo->getRealPath(), $fileinfo->getBasename()) or die ("Error");
} 
```

[getRealPath](http://php.net/splfileinfo.getrealpath)返回相同的东西`realpath`，而[getBasename](http://php.net/splfileinfo.getbasename)只返回文件名本身，就像`basename`会一样。

但是，这不会按预期工作。看，它是一个*递归*目录迭代器，这会展平子目录中任何文件的路径。如果你不能自己破解它，我会在一段时间后回来编辑这个解决方案。

# google-app-engine - 解析大型 excel 文件失败 - Google AppEngine

> ID：13893532
> 
> 赞同：0
> 
> 时间：2012-12-15T15:34:07.403
> 
> 标签：google-app-engine, apache-poi

我将 .xlsx 文件上传到 appengine blobstore。如果文件有超过 10000 条记录，GAE 无法解析它。我使用 POI 库来读取 excel 文件

* * *

AppEngineFile 文件 = service.getBlobFile(blobKey);

FileReadChannel readChannel = service.openReadChannel(file, true);

InputStream inputStream = Channels.newInputStream(readChannel);

OPCPackage pkg = OPCPackage.open(inputStream); **//这里崩溃了**

XSSFReader r = 新 XSSFReader(pkg);

* * *

有人可以给我一个提示吗？

谢谢

# python - 烧瓶@route错误

> ID：13893533
> 
> 赞同：3
> 
> 时间：2012-12-15T15:34:28.180
> 
> 标签：python, web-applications, routes, flask

我在 API 项目中使用 Flask 0.9，@router 装饰器上似乎有一个错误，或者我在这里做了一些非常错误的事情。

我有这 2 个 URL，/twitter/authorize 和 /facebook/authorize，我正在使用@route。问题是，当我请求 /twitter/authorize 时，实际上是 /facebook/authorize 函数在回答它。

如果我评论 /facebook/authorize 函数和路由的行，/twitter/authorize 会回答请求（应该如此）。

我试图在 /facebook/authorize 中打印 request.path，它返回了

> /推特/授权

但它怎么可能，因为它在 /facebook/authorize 里面（那是请求的 url）？

两个函数的代码：

```
@app.route('/facebook/authorize')
def facebook_autorize():
    callback = request.args.get('callback', None)
    if not callback:
        return error_as_json("must send callback")

    scope = request.args.get('scope', 'email')

    api = instantiate_facebook()

    response = api.authorize(callback = callback)
    response = jsonify(info = response)
    response.status_code = 200
    return response

@app.route('/twitter/authorize')
def twitter_autorize():
    callback = request.args.get('callback', None)
    api = instantiate_api()
    response = api.authorize(callback = callback)
    response = jsonify(info = response)
    response.status_code = 200
    return response 
```

对 instantiate_api() 和 instantiate_facebook() 的调用只返回我的客户做 facebook 和 twitter 的有效实例。

当然，这两个函数都有不同的名称。我真的不明白发生了什么事。这是一个错误吗？以前有人经历过吗？如果这是一个错误，有人可以提出解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:17:41.570

（已经在评论中回答，提供了一个实际的答案，所以这个问题不会再没有答案了。）

问题是实际代码（不是问题中提供的）看起来像这样：

```
@app.route('/facebook/authorize')
def facebook_authorize():
    ...

@app.route('/twitter/authorize')
def facebook_authorize():
    ... 
```

两个函数具有*相同的名称*，因此`facebook_authorize`定义了两次，第二个定义“获胜”。

为避免将来出现此类问题，您应该定期对您的 python 代码运行[pylint](http://pypi.python.org/pypi/pylint)和/或[pyflakes 。](http://pypi.python.org/pypi/pyflakes/0.5.0)您可以将大多数编辑器配置*为在您键入*时自动运行它们。在我的编辑器（vim）中，我使用[pyflakes.vim](http://www.vim.org/scripts/script.php?script_id=2441)突出显示第二`app.route`行并给我这个警告：

> 从第 5 行重新定义函数“facebook_authorize”

[为了阻止其他人签入损坏的代码，您可以针对您的版本控制系统（ subversion 手册](http://svnbook.red-bean.com/en/1.7/svn.ref.reposhooks.pre-commit.html)`.py`）的“预提交挂钩”中的所有文件运行 pyflakes 和/或 pylint，如果存在此类错误，它将拒绝提交。

希望这可以帮助。

# java - 添加密码字段 - GUI

> ID：13893534
> 
> 赞同：3
> 
> 时间：2012-12-15T15:34:28.647
> 
> 标签：java, swing, jtextfield, jpasswordfield

我有一个`JTextField`. 同样`JTextField`将用于获取用户的名称和密码。因此，如果它获取用户名，我将显示用户在文本字段中输入的内容。但如果他正在插入密码，则该字段不应显示密码（而是显示 * 字符）。

如何让 JTextField 隐藏他/她键入的字符？

伪代码：

```
If (usernameBool!=true) {
 // Display normal text - user is able to see the password
} else {
// This is going to be a password field, so i need to not show the password to the user instead show it as ******* instead.

} 
```

注意：我不想`JPasswordField`用于此

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T15:51:17.263

同样，一种可能的解决方案是使用 CardLayout 来交换组件：

```
import java.awt.CardLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;

import javax.swing.*;

public class SwapFields {
   private static final String TEXT_FIELD = "text field";
   private static final String PASS_FIELD = "pass field";

   public SwapFields() {
      // TODO Auto-generated constructor stub
   }

   private static void createAndShowGui() {
      final JTextField textField = new JTextField(10);
      final JPasswordField passwordField = new JPasswordField(10);

      final CardLayout cardLayout = new CardLayout();
      final JPanel cardPanel = new JPanel(cardLayout);
      cardPanel.add(textField, TEXT_FIELD);
      cardPanel.add(passwordField, PASS_FIELD);

      JToggleButton toggleBtn = new JToggleButton("Entering Password");
      toggleBtn.addItemListener(new ItemListener() {

         @Override
         public void itemStateChanged(ItemEvent iEvt) {
            if (iEvt.getStateChange() == ItemEvent.SELECTED) {
               cardLayout.show(cardPanel, PASS_FIELD);
               passwordField.requestFocusInWindow();
            } else {
               cardLayout.show(cardPanel, TEXT_FIELD);
               textField.requestFocusInWindow();
            }
         }
      });

      JButton showNamePasswordBtn = new JButton("Show Results");
      showNamePasswordBtn.addActionListener(new ActionListener() {

         @Override
         public void actionPerformed(ActionEvent arg0) {
            System.out.println("Name: " + textField.getText());

            // never do this!
            System.out.println("Pass: " + new String(passwordField.getPassword()));
         }
      });

      JPanel mainPanel = new JPanel();
      mainPanel.add(cardPanel);
      mainPanel.add(toggleBtn);
      mainPanel.add(showNamePasswordBtn);

      JFrame frame = new JFrame("SwapFields");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-15T15:42:14.503

有`JPasswordField`一个方法是`setEchoChar()`。正如文件所述：

> 设置此 JPasswordField 的回显字符。... 将值设置为 0 表示您希望看到键入的文本，类似于标准 JTextField 的行为。

然后，您可以只使用 a并为密码`JPasswordField`启用回显字符（例如）。`'*'`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-15T15:42:10.733

我建议你使用`JPasswordField`. 然后当你`usernameBool`为真时，将其设置为显示字符，否则隐藏字符，如下所示：

```
if (usernameBool) {
     password.setEchoChar((char) 0);
} else {
     password.setEchoChar('*');
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-15T15:41:34.067

您可以创建您自己的 JTextField 以实现您自己的策略。例如，您可以保留最后一个字符（如果我记得的话，就像 iOS）或不显示任何内容（Linux 风格）。

# android - 关于来电 Galaxy s2 和 Galaxy note 上的有趣行为

> ID：13893536
> 
> 赞同：3
> 
> 时间：2012-12-15T15:34:51.130
> 
> 标签：android, android-intent

我开发了一个应用程序，它接收 PHONE_STATE 意图并仅在状态为 RINGING 时启动活动。（如此处所述：[https](https://stackoverflow.com/a/5491773/1027400) ://stackoverflow.com/a/5491773/1027400 ）

我开始的活动是顶部位置的对话框活动，这意味着背景是透明的，我还将它设置为不可触摸，因此所有触摸事件都将返回到系统 ANSWER 活动。

系统 ANSWER 活动的底部隐藏在 S2 上并注意。在其他手机上它工作正常。

任何线索将不胜感激！谢谢。

# magento - magento total_due，grand_total_due

> ID：13893539
> 
> 赞同：-1
> 
> 时间：2012-12-15T15:35:10.467
> 
> 标签：magento

Magento 主题。

谁能解释一下sales_flat_order 的grand_total_due 或total_due 列有哪些店铺？

有些订单的这两列等于 0.01 并且向客户收取费用（总价格 + 0.01），但在结帐页面客户看不到这个价格（表示 0.01）

有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T17:17:15.370

简单来说，“到期”金额就是尚未支付的金额。它在每张已付发票后更新。发票并不总是必须是订单的全部金额，尽管我只知道管理员而不是客户结帐的一种方法。当进行另一笔付款时，它包括到期金额，以便客户不再欠任何款项。

# r - R 情节就像“电影的潮起潮落——纽约时报”

> ID：13893543
> 
> 赞同：0
> 
> 时间：2012-12-15T15:35:53.773
> 
> 标签：r, plot, meta

> **可能重复：**
> [R中的流图？](https://stackoverflow.com/questions/13084998/streamgraphs-in-r)

我想在 R 中制作这样的情节： [http ://www.nytimes.com/interactive/2008/02/23/movies/20080223_REVENUE_GRAPHIC.html](http://www.nytimes.com/interactive/2008/02/23/movies/20080223_REVENUE_GRAPHIC.html)

但我希望看到的不是电影，而是 stackexchange 网站 superuser.com 上标签使用的演变。我不介意不能交互式地点击图形的不同部分，使用 R 的静态图就可以了。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T15:40:12.417

这不是用 R 完成的——看看[d3](http://www.d3js.org)，一个 Javascript 库。纽约时报甚至聘请了它的作者[迈克·博斯托克](http://bost.ocks.org/mike/)。

NYT Graphics 团队也发布了许多演示文稿，例如见[革命博客条目](http://blog.revolutionanalytics.com/2011/03/how-the-new-york-times-uses-r-for-data-visualization.html)。

# java - 在 Android 2.2 中访问 DataConnectionTracker 方法

> ID：13893548
> 
> 赞同：2
> 
> 时间：2012-12-15T15:36:16.060
> 
> 标签：java, android, mobile, reflection

要为 Android 2.3+ 启用移动数据连接，我目前使用以下代码：

```
Method setMobileDataEnabled = ConnectivityManager.class.getDeclaredMethod("setMobileDataEnabled", boolean.class);
setMobileDataEnabled.setAccessible(true);
setMobileDataEnabled.invoke(connectivityManager, true); 
```

但是，这不适用于 Android 2.2 及更早版本。我的研究告诉我，它可以通过`DataConnectionTracker`（http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/com/android/internal /telephony/DataConnectionTracker.java#DataConnectionTracker.setDataEnabled%28boolean%29) - 但我不知道怎么做。

有人可以详细告诉我如何访问（通过反射？）`getDataEnabled()`和`setDataEnabled()`方法。

# asp.net - 在mvc中登录后如何重定向到另一个页面

> ID：13893549
> 
> 赞同：0
> 
> 时间：2012-12-15T15:36:16.497
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4

在我的 MVC4 项目中成功登录后，我在尝试重定向到另一个页面时遇到问题。我修改了 MVC4 模板，使其在主页上显示登录用户名和密码文本框，而不是重定向到另一个登录页面。一旦我成功登录

成功登录后，我想重定向到另一个页面，但我遇到了 2 个问题，具体取决于我选择的方法。

1.  问题1：它显示我的页面，即一个包含数据网格的页面，作为我在主页上的标题的一部分。

2.  问题 2：它处理包含带有数据的网格的页面，但随后抛出错误，表明我的模型无效，因为它需要登录模型而不是 griddata 模型。

两者显然行为不正确。成功登录后，我想在主页的右上角显示用户名，这意味着我确实需要使用登录模型，但我希望我的主要部分显示来自其他页面的网格，所以我需要griddata 模型，但我不太明白如何做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T15:49:29.307

这是一个多部分的答案，但您需要做的是：

1.  在您的登录页面上，有一个指向您的登录控制器的表单
2.  在您的帐户控制器中，处理登录操作
3.  在您的布局页面中，您可以像这样引用当前登录的用户

示例如下：

1) 您的登录页面

```
@using(Html.BeginForm("Logon", "Account")) {
    @Html.TextBox("username")
    @Html.Password("password")
} 
```

2）您的登录/帐户控制器

```
public class AccountController : Controller {
    public ActionResult Logon(string username, string password) {
          // login logic here

          // save the username
          Session["Username"] = username;

          // Or you can reference user the user identity
          Session["Username"] = User.Identity.Name;

          // Redirect somewhere when you're done
          return Redirect("LoggedInPage", "Home");
    }
} 
```

3）在你的 _Layout 标题中

```
@if(HttpContext.User.Identity.IsAuthenticated) {
   @Session["Username"]
   // or
   @HttpContext.User.Identity.Name
} else {
   <div>You should log in!</div>
} 
```

# html - 按照窗口大小的比例缩放 HTML 页面上的所有项目（包括文本）

> ID：13893558
> 
> 赞同：-1
> 
> 时间：2012-12-15T15:37:44.250
> 
> 标签：html, css, window, font-size

[在此页面上，](https://dl.dropbox.com/u/107533178/Brochure/Home.html)请注意在拖动窗口时所有内容的大小都是错误的。

我希望“iframe”在放大或缩小时保持 1.778（640*360、1280*720 等）的比率。（当用户将窗口拖出时，将其放大。当用户将窗口拖入时，将其按比例缩小。）

我希望页面周围的“边框”始终为 8px x 8px。（使用边距的问题是窗口大小增加并且用户必须滚动。-出于我的目的，我不希望这种情况发生。）

最后，文本需要随着窗口的大小上下变化。（目前我正在使用 '%' 来实现这一点，[但显然](http://www.w3schools.com/cssref/pr_font_font-size.asp)'%' 在字体大小的上下文中意味着“将**字体大小设置****为父元素字体大小**的百分比。”所以我需要一个不同的靠近这里。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T15:43:12.150

您需要使用 jquery 将 resize 事件绑定到窗口，并对要重新缩放的元素进行适当的更改：

```
$(window).resize(function() {
    var currentwidth = $(this).css('width'); //just one way to get the window width
    var scaledwidth = parseInt(currentwidth) * 0.75; //calculate a new width
    $('#iframeId').css('width', scaledwidth); //one way to set an element's width (iframe in this case)

/* Do your other element re-sizing here. */
} 
```

该行`var scaledwidth = parseInt(currentwidth) * 0.75;`用于`parseInt`从 currentwidth 中去除“px”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T16:14:13.257

编辑：

如果只关心元素大小，将body元素的大小设置为width: 100%; 并以百分比而不是像素设置所有子元素的大小。然后你什么都不用做：你的布局会在不同尺寸的屏幕上自动改变。

或者，如果您只支持现代浏览器（即在手机和平​​板电脑上），您可以使用简单的 CSS3 行：transform: scale()。然后，您可以创建所需尺寸的 iFrame（或其他对象），并根据需要放大或缩小它。

见 [http://www.w3schools.com/cssref/css3_pr_transform.asp](http://www.w3schools.com/cssref/css3_pr_transform.asp)

或者，您可以在 ems 或 rems 中指定所有字体大小、元素大小、填充和边距。然后你只需要改变你的 em 或 rem 基数，所有元素都会相应地缩放。

要使用 scale()、ems 或 rems，您有两种选择：

(1) JavaScript：在您的 Window 对象上附加一个调整大小的侦听器，以在屏幕大小发生变化时设置 body 元素的属性。

(2)针对不同的屏幕尺寸使用不同的CSS文件。唯一的区别在于正文元素规则。请参阅： [http ://css-tricks.com/resolution-specific-stylesheets/](http://css-tricks.com/resolution-specific-stylesheets/)

# .net-3.5 - 应用程序关闭时“此程序已停止工作”（W8 Pro 64 位）

> ID：13893562
> 
> 赞同：1
> 
> 时间：2012-12-15T15:38:44.427
> 
> 标签：.net-3.5, windows-8, 64-bit

我有一个使用 VB.NET 2008 (NET Framework 3.5) 开发的程序。为 x86 编译。

现在我已经在 W8 Pro 64bits 电脑上安装了这个软件。该软件运行良好，除非我关闭应用程序。关闭后显示警告：“程序已停止工作”。

> 事件 ID::1000
> 
> 错误的应用程序名称：XXXXX.exe，版本：1.0.4689.31692，marca de tiempo：0x5093f694
> 
> 错误模块名称：KERNELBASE.dll，版本：6.2.9200.16451，marca de tiempo：0x50988950
> 
> 异常代码：0xc0020001 故障偏移：0x00014b32

该软件在所有以前版本的 windows8 上都可以正常运行：W7、Vista、2008、2003、XP...：32 位和 64 位。

我在电脑上试过 W8 Consumer Preview - 32bits 并且运行良好。没有显示警告。

我尝试了“兼容模式”，但仍然显示相同的消息

有什么办法解决吗？

# c - 动态改变材质的颜色

> ID：13893569
> 
> 赞同：0
> 
> 时间：2012-12-15T15:39:34.730
> 
> 标签：c, opengl, glut

在调用 glutMainLoop() 之前，我初始化了灯光和材质颜色：

```
glShadeModel(GL_FLAT);

glMaterialfv(GL_FRONT, GL_AMBIENT, (const GLfloat[]){1,0.2,0} );
glMaterialfv(GL_FRONT, GL_DIFFUSE, (const GLfloat[]){1,0.6,0} );
glMaterialfv(GL_FRONT, GL_SPECULAR, (const GLfloat[]){1,0.8,0} );
glMaterialfv(GL_FRONT, GL_SHININESS, (const GLfloat[]){1,1,0} );

glLightfv(GL_LIGHT0, GL_AMBIENT, (const GLfloat[]){1,1,1});
glLightfv(GL_LIGHT0, GL_DIFFUSE, (const GLfloat[]){1,1,1});
glLightfv(GL_LIGHT0, GL_SPECULAR, (const GLfloat[]){1,1,1});

glEnable(GL_LIGHT0);
glEnable(GL_LIGHTING); 
```

现在在程序执行期间，我想更改材质颜色。
我有一个键盘功能可以更改材质颜色，然后调用 glutPostRedisplay()：

```
glMaterialfv(GL_FRONT, GL_AMBIENT, (const GLfloat[]){0,0.2,1} );
glMaterialfv(GL_FRONT, GL_DIFFUSE, (const GLfloat[]){0,0.6,1} );
glMaterialfv(GL_FRONT, GL_SPECULAR, (const GLfloat[]){0,0.8,1} );
glMaterialfv(GL_FRONT, GL_SHININESS, (const GLfloat[]){0,1,1} );
glutPostRedisplay(); 
```

但这是一个问题，因为如果我调用该函数，我绘制的对象就会消失。所以我画了一个茶壶，但如果我按一个键改变颜色，它就会消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T16:17:05.190

> 在调用 glutMainLoop() 之前，我初始化了灯光和材质颜色

错误的做法。OpenGL 未初始化。这是一个基于状态的绘图机，您应该在绘制需要该状态的东西之前设置每个状态。这也意味着您不会将 OpenGL 操作放入用户交互和事件处理程序中。将所有内容放入绘图代码中，在您需要的地方，在您需要的时候。

# code-analysis - Visual Studio 代码分析：CA0001 错误运行代码分析 - 对象引用未设置为对象的实例

> ID：13893570
> 
> 赞同：1
> 
> 时间：2012-12-15T15:39:35.027
> 
> 标签：code-analysis

对于在 VS 2012 (Ultimate) 中开发的 WPF 应用程序，当禁用特定项目的代码分析时，应用程序运行良好。启用它会导致上述错误。

直到最近，这一直运行良好（即在为特定项目启用代码分析的情况下运行），我能想到的唯一最近的变化是删除 NHibernate Profiler（使用 NuGet）。

将不胜感激有关如何调试此问题的任何指示，或查看更详细的日志/错误消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T23:01:22.157

问题原来是以下代码：

```
IContact contact = personViewModel.Model ?? companyViewModel.Model; 
```

用不同的格式重写它解决了这个问题：

```
IContact person = personViewModel.Model;
Icontact company = companyViewModel.Model;
IContact contact = person ?? company; 
```

我不确定为什么代码分析在它编译和运行良好时会出错。

通过使用源代码控制有选择地更新最近的工作副本，我发现了有问题的代码（代码分析除了指出哪个项目之外完全没有任何线索）。

# javascript - 将限定符/标签添加到命名空间

> ID：13893572
> 
> 赞同：1
> 
> 时间：2012-12-15T15:39:35.947
> 
> 标签：javascript, design-patterns, prototype

我正在开发一个 Javascript API。它的一部分是一个 JSON 解码器，它接受一个 JSON 字符串，然后构建适当的对象供程序员使用。其中一些对象是 API 中的标准对象，但其中大多数将是这些标准对象的应用程序*临时子对象。*

这些应用程序*特别*对象将在 Javascript 开发之前自动生成，并且它们将存在于命名空间中（其名称因应用程序而异）。

假设其中一个 JSON 字符串可以`{"Foo":{"bar":"Hello world!"}}`并且应该生成一个`Foo`属性`bar`具有`Hello, world!`值的对象。这个 JSON 解码器将检查是否`Foo`是标准原型之一，如果不是，那么它应该检查所有应用程序的*临时*命名空间（我们可以假设只有一个，但这个问题也适用于多个命名空间）。

所以第一个问题：找到那些命名空间。让我们找到一些选项：

*   其中一个选项可能是在 JSON 解码器中创建一个方法，该方法存储命名空间以供以后检查（每次创建这些命名空间之一时都应调用此方法）。然而，这引入了一些耦合，因为定义这些名称空间的脚本要求 JSON 解码器已经可用。我不想要这个。

*   另一种选择可能是有一个全局变量，其中命名空间在构造时注册自己，解码器在那里浏览。此选项与第一个选项非常相似，但它会污染全局命名空间。我不想要这个。

*   第三种选择可能是以某种方式标记这些命名空间，因此 JSON 解码器可以（在加载时）`window`在本地浏览和存储具有该标签的所有命名空间。例如，这意味着向这些命名空间添加一个属性，`IsAFoo`但它必须具有一个在这种情况下根本不会使用的值。然后我们将简单地遍历窗口键并检查是否`window[entry].hasOwnProperty("IsAFoo");`存储它们。由于无趣的价值，我不想要这个。

*   我的最后一个选择是让这些命名空间成为“超级命名空间”的一个实例。我们可以想象我们有一个对象将充当命名空间。我们甚至可以让它们继承这个超级命名空间，但这不是必需的。所以让我们再扩展一下第四个选项，因为它是我选择的那个。

想象一下，我们有这个对象，它是标准 API 的一部分，也就是我们所说的“超级命名空间”：

```
var MyCustomQualifier = function (objects) {
    // copy all of the entries to the namespace
    for(var entry in objects) {
        if(objects.hasOwnProperty(entry)) {
            this[entry] = objects[entry];
        }
    }
}; 
```

假设我们有这样的标准 API 对象之一：

```
var SuperFoo = function () {

}; 
```

现在，以下代码将是自动生成的代码，包括命名空间的名称：

```
var MyGlobalNamespace = MyGlobalNamespace || (function () {
    var Foo = function (bar) {
        this.bar = bar;
    };
    Foo.prototype = new SuperFoo();
    Foo.prototype.constructor = Foo;

    Foo.prototype.say = function () {
        return this.bar;
    };

    return new MyCustomQualifier({
        Foo : Foo
    });
})(); 
```

因此，通过这种方式`MyGlobalNamespace`，我们使用标准 API 对象为我们的应用程序获取所有对象，并为其提供自定义业务逻辑。

例如，我们可以执行以下代码来检查一切是否按预期工作：

```
// this variable would be what the decoder would build,
// but we create it manually here
var foo = new MyGlobalNamespace.Foo("Hello, world!");

console.log("Foo says:", foo.say());
console.log("foo is instance of Foo?", foo instanceof MyGlobalNamespace.Foo);
console.log("foo is instance of SuperFoo?", foo instanceof SuperFoo);

for(var entry in window) {
    if(window[entry] instanceof MyCustomQualifier) {
        console.log(entry + " is a MyCustomQualifier!");
    }
} 
```

它将输出：

```
Foo says: Hello, world!
foo is instance of Foo? true
foo is instance of SuperFoo? true
MyGlobalNamespace is a MyCustomQualifier! 
```

那么您如何看待这些选项以及我对第四个选项的回答？你有什么额外的方法可以做到这一点吗？代码是纯 Javascript 且没有框架，这一点很重要。

谢谢！

# .net - 使用 PrintForm 打印时如何停止进纸

> ID：13893573
> 
> 赞同：0
> 
> 时间：2012-12-15T15:39:36.127
> 
> 标签：.net, vb.net, printing, zebra-printers, printform

我正在使用[PrintForm](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.powerpacks.printing.printform%28v=vs.80%29.aspx)将当前表单的快照打印到[点阵打印机](http://www.tvs-e.in/product.aspx?pid=10)。它打印得很好，但是打印机在打印后会滚动整个纸卷。它应该在打印结束时停止。

打印表格的代码：

```
PrintForm1.Print() 
```

打印完成后如何让打印机停止进纸？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T08:59:10.143

使用 PrintForm 的 PrinterSettings 属性，我们可以将纸张大小更改为我们想要的方式。一旦达到上述高度，打印机将停止进纸。

```
 Dim customSize As New PaperSize("Custom", 500, Me.Height)
        PrintForm1.PrinterSettings.DefaultPageSettings.PaperSize = customSize
        PrintForm1.PrinterSettings.DefaultPageSettings.Margins.Top = 0
        PrintForm1.PrinterSettings.DefaultPageSettings.Margins.Right = 0
        PrintForm1.PrinterSettings.DefaultPageSettings.Margins.Bottom = 50
        PrintForm1.PrinterSettings.DefaultPageSettings.Margins.Left = 0
        PrintForm1.Print() 
```

# android - 在代码中更改 RelativeLayout 中的 ImageView 重力

> ID：13893575
> 
> 赞同：0
> 
> 时间：2012-12-15T15:39:56.517
> 
> 标签：android, imageview

我有：

```
 <ImageView
    android:id="@+id/logo"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:contentDescription="@string/logo"
    android:onClick="LogoAnimate"
    android:src="@drawable/logo" /> 
```

我需要改变：

```
android: layout_centerHorizontal = "true"
android: layout_centerVertical = "true" 
```

到：

```
android: layout_alignParentBottom = "true"
android: layout_alignParentLeft = "true" 
```

*如何在代码中实现这一点？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T15:44:03.177

这样做`LayoutParams`：

```
RelativeLayout.LayoutParams params = 
   new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, 
                                   RelativeLayout.LayoutParams.WRAP_CONTENT);
params.addRule(RelativeLayout.ALIGN_PARENT_LEFT, RelativeLayout.TRUE);
params.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM, RelativeLayout.TRUE);
params.addRule(RelativeLayout.CENTER_HORIZONTAL, RelativeLayout.FALSE);
params.addRule(RelativeLayout.CENTER_VERTICAL, RelativeLayout.FALSE);

ImageView img1 = (ImageView) findViewById(R.id.logo);
img1.setLayoutParams(params): 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-12-15T15:54:26.137

试试这个

```
 ImageView image= (ImageView)findViewById(R.id.logo);
  image.setLayoutParams(new RelativeLayout.LayoutParams(width, height, Gravity.BOTTOM | Gravity.LEFT)); 
```

# prolog - 面向初学者的关于逻辑和语法的 Prolog

> ID：13893576
> 
> 赞同：3
> 
> 时间：2012-12-15T15:40:01.213
> 
> 标签：prolog

我有这个**问题：**

我需要创建一个paradict“rightGuesses”，它将获得3个参数，每个参数都是一个字母列表，

1.  猜到的字母列表
2.  我不得不猜的词
3.  到目前为止猜到的字母。

例如 ：

```
rightGuesses([n,o,p,q], [p,r,o,l,o,g], Ans). 
```

会给我们

```
Ans = [p, -, o, -, o, -]. 
```

我做了：

```
rightGuesses([],T2,[ANS])  
rightGuesses([A|T1],T2,[ANS]):-
   (member(A,T2))=\=true,
   rightGuesses(T1,T2,[ _ |'-']).
rightGuesses([A|T1],T2,[ANS]):-
   member(A,T2),
   rightGuesses(T1,T2,[ _ |A]). 
```

但我得到：

> `ERROR: c:/users/leonid/desktop/file3.pl:5:0: Syntax error: Operator expected Warning: c:/users/leonid/desktop/file3.pl:6:`

当我尝试编译它时，我的问题是什么，有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T17:02:20.750

在`rightGuesses([],T2,[ANS])`你错过一个点之后。我无法发现其他语法错误，但您有一个“语义”错误：这没有意义：`(member(A,T2))=\=true`，请`\+member(A,T2)`改用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-20T21:16:48.623

除了@CapelliC 观察到的错误之外，还有更多错误。喜欢`[_|'-']`和更多。

第一个观察是第二个和第三个参数是相同长度的列表。实际上，每个元素都对应于另一个列表中相同位置的元素。所以我们对每个字母都有一个关系`guesses_letter_sofar/3`：：

```
guesses_letter_sofar(Xs, C, -) :-
   maplist(dif(C), Xs).
guesses_letter_sofar(Xs, C, C) :-
   member(C, Xs). 
```

这可以更简洁地表达[`all//1`](https://stackoverflow.com/questions/21971037/prolog-removing-unique-elements-only/21994498#21994498)为：

```
guesses_letter_sofar(Xs, C, S) :-
   phrase(( all(dif(C)), ({S=(-)}|[C],{S=C}) ). 
```

现在鉴于此，您的关系是：

```
rightGuesses(Guesses, Word, Sofars) :-
   maplist(guesses_letter_sofar(Guesses), Word, Sofars). 
```

或者，更详细地说：

```
rightGuesses(_Guesses, [], []).
rightGuesses(Guesses, [C|Cs], [Sofar|Sofars]) :-
   guesses_letter_sofar(Guesses, C, Sofar),
   rightGuesses(Guesses, Cs, Sofars). 
```

# java - 多帧/用户输入（可见性）

> ID：13893578
> 
> 赞同：0
> 
> 时间：2012-12-15T15:40:10.747
> 
> 标签：java, swing, jframe

我有一个带有一堆按钮的主框架。每个都将创建额外的帧和从那里产生的更多帧。但是：当一个框架被创建并设置为可见时，之前创建和显示的所有框架都不应该是可选的，但仍然是可见的（即那里应该没有用户输入）。在处理完最新的框架之前，如何防止旧框架中的活动？之后如何恢复先前帧的焦点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T16:04:43.137

What you describe is called a modal dialog box. Checkout [JDialog](http://docs.oracle.com/javase/6/docs/api/javax/swing/JDialog.html) and the [swing tutorial about dialogs](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html).

# c - 调用 stat 从 失败并出现“值对于定义的数据类型而言太大”错误

> ID：13893580
> 
> 赞同：8
> 
> 时间：2012-12-15T15:40:14.407
> 
> 标签：c, posix, runtime-error, system-calls

给定 tmp.c：

```
#include <sys/stat.h>
#include <errno.h>
#include <stdio.h>

int main(int argc, const char *argv[])
{
    struct stat st;
    if (stat(argv[1], &st) != 0)
    {
        perror("Error calling stat");
    }

    return 0;
} 
```

`Error calling stat: Value too large for defined data type`当我在一个大文件（~2.5 Gb）上运行程序时，我得到了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-15T15:40:14.407

需要`#define _FILE_OFFSET_BITS 64`：要么在您之前添加它，要么 `#include <sys/stat.h>`以特定于平台的方式定义它，例如，对于 gcc，请参见 -D 选项；对于 Visual Studio，请转到项目属性 -> 配置属性 -> C/C++ -> 预处理器 -> 预处理器定义

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T19:07:35.767

如果其他人有这个问题并且`_FILE_OFFSET_BITS 64`之前`#include "sys/stat.h"`还没有解决它，只需将它移动到所有其他包含的前面。我没有发现哪些标题也依赖于此，但它解决了问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T15:52:14.947

看看这个[链接](http://www.gnu.org/software/coreutils/faq/coreutils-faq.html#Value-too-large-for-defined-data-type)。它为您提供了处理此类问题的方法。

这通常通过定义 -D_FILE_OFFSET_BITS=64 或类似来完成。它取决于系统。一旦完成并切换到这种新模式，大多数程序都会很好地支持大文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T15:54:58.090

您可以通过在程序中包含头文件**config.h**来消除此限制。这不是必须包含整个文件，但您也可以放置一个宏#define _FILE_OFFSET_BITS 64 来消除限制。

# jquery - 动态修改 jquery 过滤列表中的 data-filtertext

> ID：13893582
> 
> 赞同：1
> 
> 时间：2012-12-15T15:40:20.017
> 
> 标签：jquery, jquery-mobile

我有一个像这样的过滤 jquery 列表：

```
<ul id="myFilteredList" data-role="listview" data-filter="true">
  <li data-theme="b"  id="Li0" data-filtertext="selected_"><a href="#">Li element 1 </a></li>
  <li data-theme="b"  id="Li1" data-filtertext="selected_"><a href="#">Li element 2 </a></li>
  <li data-theme="b"  id="Li2" data-filtertext="selected_"><a href="#">Li element 3 </a></li>
  <li data-theme="b"  id="Li3" data-filtertext="selected_"><a href="#">Li element 4 </a></li>
  <li data-theme="b"  id="Li4" data-filtertext="selected_"><a href="#">Li element 5 </a></li>
</ul> 
```

属性**data-filtertext="selected_"**可以通过编程方式更改为（**data-filtertext="selected_blocked_"**）

```
<li data-theme="b"  id="Li4" data-filtertext="selected_ blocked_"><a href="#">Li element 5 </a></li> 
```

使用此代码：

```
$('#myFilteredList').children('#Li4').attr('data-filtertext', 'selected_ blocked');
$('#myFilteredList').listview('refresh'); 
```

问题是当我尝试过滤**被阻塞**的元素时，它不显示**Li 元素 5**，我错过了什么？

在这里演示：http: [//jsfiddle.net/SU6xY/](http://jsfiddle.net/SU6xY/)

重现步骤：

1.  转到演示。
2.  在过滤栏输入阻塞，结果显示 Lielement 2
3.  按 Alter Filter 按钮，将 li2 元素过滤器更改为无，将 li4 元素过滤器更改为阻塞。
4.  在过滤栏再次输入被阻止，它仍然显示 Lielement 2 ，它必须显示 Lielement 4

它仅在从不过滤列表时才有效。如果您尝试过滤然后应用新的 data-filtertext，则过滤器不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T15:52:48.853

失去：

```
$('#myFilteredList').listview('refresh'); 
```

您在这里不需要它，它用于重新设置列表视图的样式。

没有它，它在我的 jsFiddle 示例中工作：http: [//jsfiddle.net/Gajotres/5f3By/](http://jsfiddle.net/Gajotres/5f3By/)

如果您的内容是动态添加的，则在列表视图刷新后修改 data-filtertext。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T15:43:30.433

我不确定这是否是解决方案，但您也许可以尝试使用 jQuery .data() 方法来更改数据属性的值？

[http://api.jquery.com/data/](http://api.jquery.com/data/)

# javascript - 如何让浏览器检测到 hashchange

> ID：13893594
> 
> 赞同：1
> 
> 时间：2012-12-15T15:41:47.373
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3

我正在使用[hashchange 插件](http://benalman.com/projects/jquery-hashchange-plugin/)。我可以让我的链接将 hashchange 添加到 URL，但我无法让浏览器识别链接中的哈希。

浏览器只是加载

`localhost:3000/pages#?type=1`作为`localhost:3000/pages`

忽略整个哈希部分。

JS如下...

```
$(function(){

  $(window).hashchange( function(){
    var hash = location.hash;

    $('.links a').each(function(){
      var that = $(this);
      that[ that.attr( 'href' ) === hash ? 'addClass' : 'removeClass' ]( 'selected' );
    });
  })

  $(window).hashchange();

}); 
```

显然我在这里遗漏了一些东西，尽管这段代码本质上是插件文档演示中提供的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T18:44:06.400

`window.location.hash` is the way to get the string of the hash. From there, manipulate the string as you need.

# while-loop - Sikuli如何用于等待按钮直到它显示然后单击它？

> ID：13893595
> 
> 赞同：1
> 
> 时间：2012-12-15T15:42:04.977
> 
> 标签：while-loop, wait, sikuli, time-wait

我在网页上应用了一个 sikuli 脚本，以便它在页面加载时等待特定按钮出现时它会单击它，如果不是它会等待特定时间直到按钮出现在网页上..我已经完成了以下脚本..它适用于 2 或 3 个循环，但之后程序停止并出现 sikuli 窗口..这是我的代码。

虽然存在（“img1.png”）：

```
 click("img1.png")
    wait("img2",30*60)
    click("img2.png")
    click("window close button.png") // here it closes the 2nd popup tab after clicking on img2 then it return to its page 
```

他在哪里等待img1按钮再次出现..所以等待（“img1.png”，30 * 60）//这个脚本成功地在3 -4迭代上工作，但随后它停止并且sikuli窗口出现没有错误。感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T17:56:55.977

如果没有任何错误消息，很难说出您的脚本为什么不起作用。但我最好的猜测是`while exists("img1.png")`返回 false 因为 img1.png 找不到。也许Sikuli找不到img1.png，因为页面还没有重新加载。尝试在语句`wait(1)`末尾添加一个。`while`

或者尝试使用**Region**类的`onAppear`和`observe`方法： [Region.observe()](http://doc.sikuli.org/region.html?highlight=observ#Region.observe)

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T08:57:16.540

不确定你是否已经解决了你的问题。

像你这样的效果总是时间问题：由鼠标动作触发的事情要么发生得太快，要么发生得太慢，所以下一个 Sikuli 脚本语句不会“看到”你的工作流程期望在屏幕上显示的内容。

因此，正如上面 eostrows 已经提到的，如果脚本以静默方式结束且没有错误消息，那么“while exists()”给出了一个 NotFound 条件并停止了循环，因为 img1 在 click(" 后 3 秒内没有出现窗口关闭按钮.png")。必须如此，因为循环内的所有其他操作要么正常工作，要么以 FindFailed 异常结束脚本。

您可以通过这种方式使工作流程更加健壮：

```
while exists("img1.png", 10): # wait max 10 secs
    click("img1.png")
    click(wait("img2.png",30*60)) # this saves one search for same image
    click("window close button.png")
else:
    print "img1 not seen after window close" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T18:05:47.533

> 等待（“img2”，30*60）

请注意，这与 wait("img2.png",30*60) 不同

此外，为了调试，请尝试[find](http://doc.sikuli.org/region.html?highlight=wait#Region.find) ("img2.png")，它会在 img2.png 出现在屏幕上时将鼠标悬停在 img2.png 上。如果img2.png出现后鼠标没有悬停在它上面，可以使用[similar](http://doc.sikuli.org/match.html?highlight=match#creating-a-match-getting-attributes) ()命令降低搜索的准确性。**

# macos - Video.js 不支持 osx 上的 Firefox 中的 flash

> ID：13893599
> 
> 赞同：0
> 
> 时间：2012-12-15T15:42:18.827
> 
> 标签：macos, flash, firefox, mp4, video.js

我目前正在一个需要包含视频播放器的网站上工作，但他们只有 MP4 视频。考虑到 Firefox 不支持 MP4，我需要原生（如果可能）和 flash 支持。

我使用这段代码强制回退到 Firefox 中的 flash：

```
if (_V_.isFF()) {
    _V_.options.techOrder = ["flash"];
} 
```

这确实发生了，如果我通过 chrome 中的控制台设置上述内容，我确实会得到一个闪退。问题是，当我使用 Firefox 时，我看不到任何对象标签，只有一个黑色方块（以及源代码中的视频标签）。即使在 videojs.com 本身上也没有对象标签而是视频标签？！（编辑；澄清：我确实点击了那里的“闪光”按钮。）

我对此有点困惑。有其他人遇到这种情况/知道可能是什么原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T19:33:23.360

mp4 文件必须转换为 webm 和 videojs 播放器中使用的两个文件，句号。

在伟大的媒体大战中，flash 已经从 androids 中被淘汰，这就是为什么 webm 文件是 videojs 中的关键组件。mp4 文件必须转换为 webm 文件，并且使用两个源。您也可以将 webm vid 上传到文件服务器并在播放器中链接两个源。服务器链接中的文件名必须以 .mp4 和 .webm 结尾才能被识别。

2 必读 - [http://www.zdnet.com/androids-flash-player-is-dead-live-with-it-7000002668/](http://www.zdnet.com/androids-flash-player-is-dead-live-with-it-7000002668/)

[http://www.pcadvisor.co.uk/how-to/google-android/3417930/how-get-flash-in-android-jelly-bean/](http://www.pcadvisor.co.uk/how-to/google-android/3417930/how-get-flash-in-android-jelly-bean/)

在没有软件的情况下将 mp4 转换为 webm 的最快方法是将其上传到 youtube，一旦视频在那里复制链接并转到 keepvid.com，然后下载 webm。请记住，最高质量的 webm 文件并不总是最适合移动设备的大小和全球互联网连接速度慢的情况。videojs 上的视频质量切换功能正在进行中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T19:41:20.583

考虑到有几十个视频，使用 webm（很遗憾）不是一种选择。此外，没有发现 videojs 在 android 设备上流畅。因此，我们决定只链接到视频（带有海报图片）并在 android 上本地播放视频。

# java - 仅使用 Java JSch 在远程机器上运行图形应用程序，不使用 X11Fordward

> ID：13893603
> 
> 赞同：0
> 
> 时间：2012-12-15T15:42:40.183
> 
> 标签：java, ssh, remote-access, jsch

我想在任何带有仅在该远程机器上运行的 JSch 操作系统中运行远程图形应用程序，例如我想运行 gedit（Ubuntu），它会出现在桌面机器中，我不需要在SSH 的外壳，它就像一个远程启动器。

是否可以为此使用任何选项？

```
/*Adding an option in session that allow this...*/
ChannelExec channelExec = (ChannelExec)session.openChannel("exec");
channelExec.setCommand("gedit"); //channelExec.setCommand("notepad"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T16:36:16.317

您可以尝试设置`DISPLAY=localhost:0`，尽管您可能会遇到安全问题；如果是这样，请更新问题。

# algorithm - 如何创建一个已经填充了一些数字的幻方？

> ID：13893610
> 
> 赞同：2
> 
> 时间：2012-12-15T15:43:28.253
> 
> 标签：algorithm, magic-square

我想这样做：我有一个矩阵 N x N。它可以包含从 1 到 n^2 的数字。这个矩阵有几个用正数填充的单元格。我必须决定，这个已经填充的矩阵可以是一个魔法矩阵（魔方）。例如：

```
0 0 0 7 4

0 1 0 0 8

0 0 3 0 0

0 0 0 0 0

0 0 0 0 0 
```

我们可以从这个矩阵创建一个幻方。有什么算法可以决定这个吗？你能给我推荐点什么吗？谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T16:01:40.250

我不确定这是否是最有效的方法，但您可以确定魔法常数：如

```
magic_constant = n*(n^2+1)/2 
```

一旦你有了魔法常数，你就可以像数独谜题一样工作，确定哪些可能的值适用于每个未填充的单元格，然后从具有最少可能值的单元格开始尝试每个值。当您用数字填充单元格时，您会更新其余未填充单元格的可能值。如果您遇到单元格没有可能值的情况，那么您将回溯。如果你用尽了可能性，那么答案是“不”。如果您用完了未填充的单元格，那么答案是“是”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T20:53:10.663

有一种算法不仅仅适用于奇数行和列：

1.  将 1 放在第一行的中间
2.  向上移动一个单元格，然后向左移动一个单元格（您应该考虑一个循环矩阵）
3.  在这个单元格中输入越来越多的数字
4.  只要达到 n^2 就转到第 2 步

这是一个 C++ 代码：

```
#include <iostream>
#include <iomanip>
#define For(i,n) for(int i=0; i<n; i++)
#define FOR(i,j,n) for(int i=0; i<n; i++) for(int j=0; j<n; j++)
using namespace std;

void print(int**, int);
void calc(int**, int);
void test(int**, int);

int main()
{
    int n;
    a:cout<<"Enter an odd number:";
    cin>>n;
    if (n % 2 == 0)
    {
        cout<<"You entered an even number!\n\n";
        goto a;
    }
    int** ary = new int*[n];
    For(i,n)
        ary[i] = new int[n];

    //Fill array entires with NULL
    FOR(i,j,n)
        ary[i][j] = NULL;   

    calc(ary,n);
    print(ary,n);
    test(ary,n);

    cin>>n;
}
void print(int** ary, int n)
{
    cout<<endl;
    For(i,n)
    {
        For(j,n)
        {
            if (ary[i][j] == NULL) {cout<<"N  "; continue;}
        cout<<setw(4)<<ary[i][j];
        }
        cout<<endl;
    }
}

void calc(int** ary, int n)
{
    int c=1, i=0, j=n/2;
    while(true)
    {
        if (ary[i][j] == NULL) ary[i][j] = c++;
        else
        {
            j++;
            i+=2;
            if (j == n) j = 0;
            if (i == n) i = 0;
            else if (i == n+1) i = 1;
            continue;
        }
        //cout<<"Filled ary["<<i<<"]["<<j<<"]\n";
        i--;
        j--;
        if (i < 0) i = n-1;
        if (j < 0) j = n-1;
        if (c> n*n) break;
    }
}

void test(int** ary, int n)
{
    cout<<"\nTesting Sums. . .";
    int rSum = 0, cSum = 0, mDiagSum = 0, sDiagSum = 0;
    For(i,n)
    {
        For(j,n)
        {
            rSum += ary[i][j];
            cSum += ary[j][i];
            if (i == j) mDiagSum +=ary[i][j];
            if (n - 1 == i + j) sDiagSum += ary[i][j];
        }
        cout<<"\nSum of row #"<<i+1<<"= "<<rSum
            <<"\nSum of Column #"<<i+1<<"= "<<cSum;
        rSum = 0;
        cSum = 0;
    }
    cout<<"\nSum of main diagonal= "<<mDiagSum
        <<"\nSum of sub diagonal= "<<sDiagSum<<endl;
} 
```

# objective-c - 您的第二个 iOS 应用程序 - 启用持久主列表

> ID：13893612
> 
> 赞同：0
> 
> 时间：2012-12-15T15:43:41.463
> 
> 标签：objective-c, ios

所以我在这里关注 ios 教程

[http://developer.apple.com/library/ios/documentation/iPhone/Conceptual/SecondiOSAppTutorial/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011318-CH1-SW1](http://developer.apple.com/library/ios/documentation/iPhone/Conceptual/SecondiOSAppTutorial/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011318-CH1-SW1)

表格视图的数据是一个只包含字符串和日期的自定义类。

这是它的样子

[http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/DesigningDataModel/DesigningDataModel.html](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/DesigningDataModel/DesigningDataModel.html)

谁能建议如何在应用程序启动之间将其保存到数据中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T04:36:42.133

让应用程序基于 Document .. 即使用[UIDocument](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDocument_Class/UIDocument/UIDocument.html)怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T16:05:23.197

你可以`NSCoding`用来存储这样简单的数据。你甚至可以使用`NSUserDefaults`，但我不推荐它。Core Data 确实是要走的路，除非你知道你永远不需要稍微复杂一点的东西。

查看[本指南](http://www.raywenderlich.com/1914/how-to-save-your-app-data-with-nscoding-and-nsfilemanager)，了解如何使用[www.raywenderlich.com 保存](http://www.raywenderlich.com)`NSCoding`简单数据 - 对于开始 iOS 开发的人来说，这是一个非常好的教程网站。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T16:32:25.547

您*可以*使用`NSCoding`或`NSUserDefaults`。

但是对于任何具有比示例数据更多的实际应用程序，您最终会看到像[Core Data这样的东西。](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)

从您的评论中，我看到您认为仅对几个领域来说这太过分了。但是，这是学习和练习设置 Core Data 模型并将其连接到带有 Fetched 结果控制器的表视图的理想时机。

# java - 我正在尝试在 JLabel 下设置 JTextField

> ID：13893613
> 
> 赞同：0
> 
> 时间：2012-12-15T15:43:51.357
> 
> 标签：java, swing, layout, jlabel, jtextfield

我正在尝试将文本字段放在`JLabel`. 目前，文本字段显示在同一行。它应该在下方并居中。我需要帮助。

```
package Gui;

import javax.swing.*;
import java.awt.*;
import java.awt.GridLayout;

public class ShowGridLayout extends JFrame {

    public ShowGridLayout() {
        // Set GridLayout, 3 rows, 2 columns, and gaps 5 between
        // components horizontally and vertically
        setLayout(new GridLayout(3, 2, 5, 5));

        // Add labels and text fields to the frame

        JLabel firstname = new JLabel("First Name");
        add(firstname);

        JTextField fistnametextField = new JTextField(8);
        add(fistnametextField);

        JLabel mi = new JLabel("Mi");
        add(mi);

        JTextField miTextField = new JTextField(1);
        add(miTextField);

        JLabel lastname = new JLabel("Last Name");
        add(lastname);

        JTextField lastnameTextField = new JTextField(8);
        add(lastnameTextField);
    }

    /**
    * Main method
    */
    public static void main(String[] args) {
        ShowGridLayout frame = new ShowGridLayout();
        frame.setTitle("ShowGridLayout");
        frame.setSize(200, 125);
        frame.setLocationRelativeTo(null); // Center the frame
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T16:01:23.543

您可以简单地将 a`GridLayout`与单列一起使用：

```
setLayout(new GridLayout(0, 1)); 
```

请注意，`GridLayout`将忽略首选大小，`JTextFields`因此使用构造函数`JTextField(int columnSize)`将无效，因此默认构造函数会起作用。

此外，我将删除此处的内部间距并在以下位置添加边框`JFrame`：

```
(JComponent)getContentPane()).setBorder(   
      BorderFactory.createEmptyBorder(10, 10, 10, 10) ); 
```

这将产生一个看起来像

![居中的 JTextFields](../Images/8608da6857740f1815893a50cf1bb0b8.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T16:01:53.367

您正在创建一个 3x2 网格。也就是说，3 行，每行 2 列。第一次调用 add() 会将组件放入第 1 行第 1 列，第二次调用会将组件放入第 1 行第 2 列。因此它们彼此相邻。使用 GridLayout，您对此没有太多控制权。如果您希望项目一个接一个，您可以尝试 3x1 网格。或者您可以尝试以不同的顺序添加组件。或者，您可以尝试其他布局管理器，例如 GridBagLayout，您可以在其中拥有更多控制权。

# wpf - WPF - INSTALLSHIELD LE - 附加文件

> ID：13893615
> 
> 赞同：1
> 
> 时间：2012-12-15T15:43:57.877
> 
> 标签：wpf, installshield-le

我有以下情况：

*   WPF 应用程序
*   我知道不同的部署方式。（曹，InstallShield，..）
*   项目包括一些报告文件 (.rdlc)，通过路径调用它们来使用它们 - 现在在我的 PRojectfolder 的子目录中
*   路径在设置中定义

但：

我绝对不知道在安装期间和之后如何处理这种情况。

如果我将 rdlc 文件作为附加文件提供，如何在安装后自动更改路径（以便 App 可以找到它们），因为在新客户端机器的路径之前我不知道。还是我误解了 InstallShield 正在自动管理这些文件和路径！

任何人都可以帮助我制定正确的策略（我不是在寻找代码）！？！？提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:59:14.777

在安装程序中，放置相对于 INSTALLDIR 目录的文件。INSTALLDIR 可以在安装过程中由用户修改。您可能希望将该值保存在注册表或配置文件中。对于注册表，创建所需的配置单元和键并将其值设置为 [INSTALLDIR]。对于配置文件，您需要编写一个自定义操作，使用所选的 INSTALLDIR 修改文件。

# android - 将 Eclipse 项目导出到文本文件

> ID：13893617
> 
> 赞同：1
> 
> 时间：2012-12-15T15:44:08.813
> 
> 标签：android, eclipse

我想打印出我在 Eclipse 中制作的 Android 项目的代码，以便将其展示给其他人。因此我需要一个包含所有代码的文本文件。

是否可以将整个项目导出到单个文本文件？还是我必须手动复制粘贴所有 java 和 xml 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T15:54:18.163

我真的没有看到您希望将所有代码放在一个文本文件中的用例，这会非常混乱。

但是，我不确定 Eclipse 中是否有这样的功能，但如果您了解 Java，我很确定编写您自己的 Java 程序为您执行此操作不会花费超过 15 分钟的时间。递归遍历所有文件并将所有内容输出到新文件。20行代码左右。

# ruby - RSpec any_instance 返回自我

> ID：13893618
> 
> 赞同：17
> 
> 时间：2012-12-15T15:44:09.757
> 
> 标签：ruby, rspec

我正在尝试存根某个类的任何实例。我需要存根`fetch`方法，它用一些数据填充自我。

如何访问`self`变量、修改变量并返回`fetch`方法？

```
MyObject.any_instance.stub(:fetch) { self } 
```

不返回`MyObject`实例。

也许，模拟在这种情况下更有用。不幸的是，我还没有理解它们。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-15T19:40:00.517

有一个[开放的 rspec-mocks 问题](https://github.com/rspec/rspec-mocks/issues/175)可以解决这个问题。我希望在某个时候解决它，但是以一种不会破坏`any_instance`与块实现一起使用的现有规范套件的方式添加它并不简单，因为我们将开始产生一个额外的参数（例如对象实例）。

总体而言，`any_instance`在某些情况下可以派上用场，但它有点异味，如果您能找到模拟或存根单个实例的方法，您通常会遇到更少的问题。

这是我尚未测试但应该可以解决的解决方法：

```
orig_new = MyObject.method(:new)
MyObject.stub(:new) do |*args, &block|
  orig_new.call(*args, &block).tap do |instance|
    instance.stub(:fetch) { instance }
  end
end 
```

本质上，我们在`any_instance`这里通过挂钩来模拟，`MyObject.new`以便我们可以`fetch`对每个实例化的新实例进行存根。

综上所述，“倾听您的测试”很重要，并且，当某些东西难以测试时，请考虑一下您的设计所代表的内容，而不是立即使用`any_instance`. 您最初的问题没有为我提供足够的背景信息来推测您的设计，但这绝对是我在需要这样做时开始的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T18:06:57.540

据我所知，由于某种原因，这似乎是不可能的。我检查了当前的`rspec-mocks`实现，实际调用存根实现的方法似乎如下：

```
# lib/rspec/mocks/message_expectation.rb:450
def call_implementation(*args, &block)
    @implementation.arity == 0 ? @implementation.call(&block) : @implementation.call(*args, &block)
end 
```

看起来，该块只是由自身调用而不是通过`instance_eval`. 也许还有另一种技术可以实现您想要的，毕竟我无论如何都不是 RSpec 专家。

# python - Python 方式打开一个文本文件，选择每第 n 个值，然后保存到一个文本文件。

> ID：13893621
> 
> 赞同：-1
> 
> 时间：2012-12-15T15:44:27.937
> 
> 标签：python, python-2.7

我有一个包含 57,600,000 百万行值的文本文件。这些值位于文本文件的单个列中。它们代表一个重复 2400 次的 150（列）x 160（行）矩阵。我希望完成 2 个不同的操作，每个操作有 3 个目标。

操作 1（列）

1.  打开文本文件
2.  选择每第 n 个数据点
3.  将所选值保存到另一个文本或 .csv 文件

操作 2（行）

1.  打开文本文件
2.  从每第 n 行开始选择一系列值 (150)
3.  将所选值保存到另一个文本或 .csv 文件

这样做的目的是先打印一个矩阵列，然后再打印一行。我是新手 python 用户，正在使用 spyder 运行其他脚本。如果您愿意为我编写脚本，请描述我需要替换的内容以获得所需的结果。我浏览了其他类似的帖子，但找不到足够相似的线程，我可以根据我的需要进行编辑，我的知识有限。

非常感谢您寻找和提供任何帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-15T15:48:46.217

Python 中的文件是迭代器，这意味着它们可以被循环，或者对它们应用迭代操作。

例如，要获取每 5 行，将是：

```
import itertools

with open(filename, 'r') as f:
    fifthlines = itertools.islice(f, 0, None, 5)
    for line in fifthlines:
        # do something with line 
```

您也可以使用`islice()`跳过行；这里我们跳过 10 行，然后阅读 10：

```
for line in itertools.islice(f, 10, 20):
    # do something with this 10th line 
```

You can swallow a series; because skipping, then reading 0 lines raises a `StopIteration` signal, we swallow that by using `next()` and passing in a default value to be returned instead:

```
next(itertools.islice(f, 42, 42), None)  # skip 42 lines, don't read more 
```

With the [`itertools` library](http://docs.python.org/2/library/itertools.html), and a quick scan through the [Python tutorial](http://docs.python.org/2/tutorial/) you can figure out the rest of the script easily enough.

# json - 与 JSON 集成的 WCF 问题

> ID：13893623
> 
> 赞同：0
> 
> 时间：2012-12-15T15:45:06.687
> 
> 标签：json, wcf

我在通过 jquery / JSON 调用我的 WCF 服务时遇到问题。

到目前为止，我已经完成了以下工作：

1.  在 VS 2010 中，启动一个新的“WCF 服务应用程序”项目。然后 Visual Studio 会自动生成一个名为 IService / Service 的示例服务，它具有以下功能

    ```
    string GetData(int value); 
    ```

2.  在 IService.cs 中，我添加了 WebGet 属性，如下所示：

    ```
    [OperationContract]
    [WebGet(ResponseFormat = WebMessageFormat.Json)]
    string GetData(int value); 
    ```

3.  在我的 web.config 里面我有

    ```
    <?xml version="1.0"?>
    <configuration>
      <system.web>
        <compilation debug="true" targetFramework="4.0" />
      </system.web>
      <system.serviceModel>
        <services>
          <service name="WcfService1.Service1"
                   behaviorConfiguration="ServiceBehavior">
            <endpoint contract="WcfService1.IService1"
                      binding="webHttpBinding"
                      behaviorConfiguration="AjaxBehavior" />
          </service>
        </services>
        <behaviors>
          <serviceBehaviors>
            <behavior>
              <serviceMetadata httpGetEnabled="true"/>
              <serviceDebug includeExceptionDetailInFaults="false"/>
            </behavior>
            <behavior name="ServiceBehavior">
              <serviceDebug includeExceptionDetailInFaults="true"/>
              <serviceMetadata httpGetEnabled="true"/>
            </behavior>
          </serviceBehaviors>
          <endpointBehaviors>
            <behavior name="AjaxBehavior">
              <enableWebScript />
            </behavior>
          </endpointBehaviors>
        </behaviors>
        <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
      </system.serviceModel>
      <system.webServer>
        <modules runAllManagedModulesForAllRequests="true"/>
      </system.webServer>
    </configuration> 
    ```

4.  我构建并运行服务，并在打开时

    ```
    http://localhost:58403/Service1.svc/GetData?value=1 
    ```

    在我的网络浏览器中打印出来（如预期的那样）

{"d":"你输入了：1"}

5、我新建了一个asp.net web应用项目。在 default.aspx 中，我添加

```
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var request = $.ajax({
                type: "GET",
                url: "http://localhost:58403/Service1.svc/GetData",
                data: { value: "1" }
            });

            request.done(function (msg) {
                alert(msg);
            });

            request.fail(function (jqXHR, textStatus) {
                alert("Request failed: " + textStatus);
            });
        });
    </script> 
```

6，我构建并运行它，但不是点击完成回调，而是点击错误回调并警告“请求失败：错误”

如果我在服务代码中设置断点，我可以看到 GetData 函数被命中并且似乎成功返回。我还可以在 firebug 网络控制台中看到 Web 服务调用返回“200 OK”的状态代码，但正在命中错误处理程序回调而不是成功回调。有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T04:36:25.057

好吧，我设法自己解决了这个问题。万一有人正在阅读这篇文章并且很好奇，我更改了 WCF 服务和 Web 应用程序，以便它们现在都通过 IIS 而不是 Visual Studio 的 Web 服务器运行。

所以我现在有

```
 http://localhost/WcfService1/Service1.svc/GetData?value=1
    http://localhost/WebApplication1/ 
```

我相信由于跨域请求，它以前无法正常工作。即使它是同一个域，只是不同的端口号，我相信这仍然算作跨域？

# javascript - yii 框架 CActiveform 依赖下拉菜单在 pjax 内容中不起作用

> ID：13893626
> 
> 赞同：0
> 
> 时间：2012-12-15T15:46:15.110
> 
> 标签：javascript, jquery, yii, yii-extensions, pjax

这是我依赖的下拉 php 代码：

```
<?php $find= new SomeModule;
      $form=$this->beginWidget('CActiveForm', array(
         'action'=> Yii::app()->createUrl('someurl'),
         'method'=>'post',
         'id'=>'filter-id',
         'enableAjaxValidation'=>true,
      )); ?>

<?php 
echo $form->dropDownList($find,'category',
    CHtml::listData(BaseCategory::model()->findAll(array(
       'order' => 'name', 
       'condition'=>'type=:postID',
       'params'=>array(':postID'=>1),
    )), 'id', 'name'),
    array(
       'prompt'=>'Select Category', 
       'ajax'=>array(
       'type'=>'POST',
       'url'=>CController::createUrl('someurl/searchCategory'),
       'update'=>'#'.CHtml::activeId($find,'category2')
    ),
 )
 );
?>
<?php 
 echo $form->dropDownList($find,'category2', array(), array(
    'prompt'=>'Select Sub Category',
   )
);
?> 
```

我需要将此 php 代码放在 pjax 内容中。页面刷新时工作正常。但是当它使用 pjax 加载时，这个依赖下拉菜单将不起作用。

**问题：**
如何在使用 pjax 加载这个依赖下拉菜单时工作？我应该添加什么代码：

```
 $(document)
    .on('pjax:success', function() {

    }) 
```

使这个依赖下拉有效？是否有任何脚本可以“重新加载”这个 php 代码，所以依赖下拉菜单有效？还是有其他解决方案？

# javascript - 保存使用 Ajax 并包含注意事项 - Rails

> ID：13893627
> 
> 赞同：0
> 
> 时间：2012-12-15T15:46:28.540
> 
> 标签：javascript, ruby-on-rails, ruby, ajax

我已将 :remote => true 添加到 _form.html.erb 中，现在想知道如何获取它，以便当用户保存页面上的内容时，它会保存并随后发出通知。

在我的documents_controller.rb 中，我有；

```
def create
  @document = current_user.documents.build(params[:document])

  if @document.save
    redirect_to @document.edit, notice: 'Saved'
  else
    render action: "new"
  end
end

def update
  @document = current_user.documents.find_by_url_id(params[:id])

  if @document.update_attributes(params[:document])
    redirect_to @document, notice: 'Saved'
  else
    render action: "edit"
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T15:59:15.290

您需要编写适当的 JavaScript 以使用以下 jQuery 事件：

```
ajax:beforeSend
ajax:complete
ajax:success
ajax:error 
```

例如

```
$(document).ready(
    $(".ajax_rails_link").bind("ajax:success", function(evt, data, status, xhr){
        console.log(data);

        // Display your notice logic goes here
    })
}); 
```

更多信息可以在这里找到：http: [//guides.rubyonrails.org/ajax_on_rails.html](http://guides.rubyonrails.org/ajax_on_rails.html)

# validation - ZF2 Http uri 验证

> ID：13893631
> 
> 赞同：4
> 
> 时间：2012-12-15T15:46:58.793
> 
> 标签：validation, uri, zend-framework2

我尝试使用 ZF2 验证 URI。问题是当我将 $value 设置为“http://google.com”或“google/com”时，它给了我一个输出“bool(false)”。

我的代码；

```
use Zend\Uri\Http as ValidateUri;
use Zend\Uri\Exception as UriException;

    class Domain
    {
        public function domain($value)
        {
            return $this->validate($value);
        }

        public function validate($value)
        {   
            if (empty($value) || !is_string($value)) {
                return false;
            }

            try {
                $uriHttp = ValidateUri::validateHost($value);
                var_dump($uriHttp);
            } catch (UriException $e) {
                return false;
            }

            return true;
        }
    } 
```

提前致谢！缺口

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T18:59:31.683

我推荐使用验证器 Zend\Validator\Hostname。文档中的示例：

```
$hostname  = 'http://google.com';
$validator = new Zend\Validator\Hostname(Zend\Validator\Hostname::ALLOW_DNS);

if ($validator->isValid($hostname)) {
    // hostname appears to be valid
   echo 'Hostname appears to be valid';
} else {
    // hostname is invalid; print the reasons
    foreach ($validator->getMessages() as $message) {
        echo "$message\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-16T14:23:24.213

截至目前，您的验证器将失败，因为[http://google.com](http://google.com)不是有效的主机名。但是，google.com 是有效的。

你应该有什么： $hostname = 'google.com';

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-26T06:05:12.537

尝试一下：

```
public function isValidUrl($url) {
    $uri = new \Zend\Validator\Uri();
    if (!$uri->isValid($url)) {
        return FALSE;
    }
    $parseUrl = parse_url($url);
    if(!isset($parseUrl['host']) || empty($parseUrl['host'])) {
        return FALSE;
    }
    $validator = new \Zend\Validator\Hostname(\Zend\Validator\Hostname::ALLOW_DNS);
    if (!$validator->isValid($parseUrl['host'])) {
        return FALSE;
    }
    if (!filter_var($parseUrl['host'], FILTER_VALIDATE_URL) === false) {
        return FALSE;
    }
    return TRUE;
} 
```

# javascript - 字符串拆分并计算出现次数以及

> ID：13893634
> 
> 赞同：6
> 
> 时间：2012-12-15T15:47:32.247
> 
> 标签：javascript, jquery, string, split

我有一个字符串

```
var stringIHave = "Java$$Java$$jQuery$$Java$$jQuery$$Java$$Java$$Java$$Hibernate$$Java$$Java$$Spring$$Instagram$$jQuery$$jQuery$$"; 
```

如何获取每个条目的出现次数，我得到的出现次数来自 Java = 8 等 JSON 等...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T15:56:10.263

首先，您需要将 srting 拆分为数组：

```
var keywordsArr = stringIHave.split( '$$' ); 
```

那么你需要一个对象来存储计数：

```
var occur = {}; 
```

然后只需创建简单的 for 循环来计算所有出现次数：

```
for( var i = 0; i < keywordsArr.length; i++ ) {
    occur[ keywordsArr[ i ] ] = ( occur[ keywordsArr[ i ] ] || 0 ) + 1;
} 
```

现在您的对象`occur`将以名称作为键并计为值。

请参阅 jsFiddle[演示](http://jsfiddle.net/antyrat/BSeLU/)。

同样，正如您在字符串末尾所拥有的那样，`$$`您可能需要从中删除最后一项，`keywordsArr`因此只需在`split`函数调用后执行：

```
keywordsArr.pop(); 
```

请参阅没有最后一个元素的[演示。](http://jsfiddle.net/antyrat/BSeLU/1/)

所以最终的代码会是这样的：

```
var stringIHave = "Java$$Java$$jQuery$$Java$$jQuery$$Java$$Java$$Java$$Hibernate$$Java$$Java$$Spring$$Instagram$$jQuery$$jQuery$$",
  keywordsArr = stringIHave.split( '$$' ),
  occur = {};

keywordsArr.pop();

for( var i = 0; i < keywordsArr.length; i++ ) {
    occur[ keywordsArr[ i ] ] = ( occur[ keywordsArr[ i ] ] || 0 ) + 1;
}

for( var key in occur ) {
    document.write( key + ' - ' + occur[key] + '<br/>' );        
} ​ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-15T15:58:33.093

我建议如下：

```
function stringCount(haystack, needle) {
    if (!needle || !haystack) {
        return false;
    }
    else {
        var words = haystack.split(needle),
            count = {};
        for (var i = 0, len = words.length; i < len; i++) {
            if (count.hasOwnProperty(words[i])) {
                count[words[i]] = parseInt(count[words[i]], 10) + 1;
            }
            else {
                count[words[i]] = 1;
            }
        }
        return count;
    }
}

console.log(stringCount("Java$$Java$$jQuery$$Java$$jQuery$$Java$$Java$$Java$$Hibernate$$Java$$Java$$Spring$$Instagram$$jQuery$$jQuery$$", '$$'));
​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/g6kpu/)。

参考：

*   [`Object.hasOwnProperty()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty).
*   [`parseInt()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt).
*   [`String.split()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split).

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-15T16:07:29.677

最终目标是什么并不完全清楚。以下从字符串创建一个对象，看起来像

创建的对象：

```
{
 "Java": 8,
 "jQuery": 4,
 "Hibernate": 1,
 "Spring": 1,
 "Instagram": 1
} 
```

JS：

```
var str = 'Java$$Java$$jQuery$$Java$$jQuery$$Java$$Java$$Java$$Hibernate$$Java$$Java$$Spring$$Instagram$$jQuery$$jQuery$$';
var arr = str.split('$$')
var obj = {};

for (i = 0; i < arr.length; i++) {
    if (arr[i] != '') {
        if (!obj[arr[i]]) {
            obj[arr[i]] = 0;
        }
        obj[arr[i]]++;

    }
} 
```

您可以遍历对象以获取所有值或简单地查找一个值

```
var jQueryOccurences= obj['jQuery']; 
```

演示：http: [//jsfiddle.net/25hBV/1/](http://jsfiddle.net/25hBV/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-15T16:00:36.023

将字符串拆分为数组，并将数组放入对象中处理重复项并将出现次数作为对象中的键/值对进行计数，请参见小提琴！

```
var stringIHave = "Java$$Java$$jQuery$$Java$$jQuery$$Java$$Java$$Java$$Hibernate$$Java$$Java$$Spring$$Instagram$$jQuery$$jQuery$$",
    s = stringIHave.split('$$');
    obj = {};

for (var i=s.length; i--;) {
    obj[s[i]] = (s[i] in obj) ? obj[s[i]]+1 : 1;
}

//    obj.Java == 8 
```

[**小提琴**](http://jsfiddle.net/uK4VU/2/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-15T16:46:14.243

如果你想要它简短而甜美：

```
// variable declarations
var arParts = stringIHave.match(/\w+/g), 
    result = {}, 
    i = 0, 
    item;

// Copy the array to result object      
while (item = arParts[i++]) result[item] = (result[item] || 0 ) + 1; 
```

[演示](http://jsbin.com/akixuv/3/watch)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-07-29T10:15:52.740

现在一天你可以做

```
 const str = "Java$$Java$$jQuery$$Java$$jQuery$$Java$$Java$$Java$$Hibernate$$Java$$Java$$Spring$$Instagram$$jQuery$$jQuery$$";

    var result = str.split("$$").reduce(function(acc, curr) {
    curr &&  (acc[curr] = (acc[curr] + 1) || 1);
    	return acc
    }, {});
    console.log(result);
```

# php - 在 CakePHP 中保存 GET 请求的数据

> ID：13893636
> 
> 赞同：0
> 
> 时间：2012-12-15T15:47:40.067
> 
> 标签：php, cakephp

我正在构建一个简单的机制，用户可以通过单击链接来喜欢帖子。我使用的是 GET 而不是 POST，因为我想允许该方法通过 URL 触发。

有人说过如何使用 GET 保存数据？由于在这种情况下不存在请求数据......我的模型看起来像：

```
class Like extends AppModel
{
    public $name = 'Like';

    public $belongsTo = array('User','Post');

} 
```

添加方法如下：

```
public function add( $id )
{
    $post = $this->Post->find('first', array( 
                'conditions' => array('Post.id'=>Tiny::reverseTiny($id)) 
            ));

    if (!$post)
    {
        throw new NotFoundException('404');
    }

    if($post['Post']['user_id'] == $this->Auth->user('id'))
    {
        $this->Session->setFlash('You can\'t like your own post... That\'s just silly!');
    }

    if ($this->Like->create())
    {
            $liked = $this->Like->find('first', array( 
                'conditions' => array('Like.id'=>Tiny::reverseTiny($id), 'Like.user_id'=>$this->Auth->user('id') ) 
            ));

            if(!$liked){
                $this->Like->saveField('user_id', $this->Auth->user('id'));
                $this->Like->saveField('post_id', $post['Post']['id']);

                $this->redirect(array('controller'=>'posts','action'=>'view','id'=>Tiny::toTiny($post['Post']['id']),'slug'=>$post['Post']['slug']));
            } else {
                $this->Session->setFlash('You already like this post!');
            }
    else
    {
        $this->Session->setFlash('Server broke!');
    }   
} 
```

任何人都可以帮忙吗？

`<?php echo $this->Html->link('1', array('controller'=>'followers','action'=>'add','id'=>Tiny::toTiny($post['Post']['id'])), array('title'=>'Follow','class'=>'follow')); ?>`

这部分一切正常。它在我正在努力解决的 GET 上的数据库中保存了一个新行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T16:01:58.393

嗨，您只需要链接到您的控制器操作并在 url 中传递您的变量。

要清除帖子上要喜欢的链接在您的帖子视图中： $this->Html->link('like this post', array('controller' => 'like', 'action' => 'add' , $postId))

它应该呈现这样的链接：www.yourWebSite/likes/add/1 喜欢 postId 1，

您的操作（添加）之后的变量被解释为您的控制器操作的变量

如果你的函数添加是

```
public function add($postId, $wathever){

} 
```

url 应该看起来像 www.yourWebSite/likes/add/1/blabla ，其中 1 是添加操作的第一个变量，blabla 是第二个变量，依此类推。

这相当于非重写 url：?postId=1&whatever=blabla

编辑 ：

```
if(!$liked){
                //simulate the post behaviour
                $this->request->data['Like']['user_id'] = $this->Auth->user('id');
                $this->request->data['Like']['post_id'] = $post['Post']['id'];

                //save the data
                if ($this->Like->save($this->request->data)) {
                    $this->Session->setFlash(__('Thanks for your support !'));
                    $this->redirect(array('controller'=>'posts','action'=>'view','id'=>Tiny::toTiny($post['Post']['id']),'slug'=>$post['Post']['slug']));
                } else {
                    $this->Session->setFlash('Server broke!');
                } 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T16:13:08.030

使用`save with id=0`而不是怎么样`create`？

```
<?php

    $like = array(
        "Like" => array
        (
            "id" => 0,
            "user_id" => $this->Auth->user("id"),
            "post_id" => $post['Post']['id']
        )
    );
    $result = $this->Like->save($like);
    if(!$result){$this->Session->setFlash('Server broke!');}

    $this->redirect(array('controller'=>'posts','action'=>'view','id'=>Tiny::toTiny($post['Post']['id']),'slug'=>$post['Post']['slug']));

?> 
```

# c++ - C++ 在 32 位应用程序之间传输大量数据以进行视频播放的方法

> ID：13893639
> 
> 赞同：1
> 
> 时间：2012-12-15T15:48:23.467
> 
> 标签：c++, windows, macos, streaming, shared-memory

我知道共享内存和进程间通信的基础知识，但由于我的应用程序相当具体，所以我问这个问题以获得一般反馈。

我正在使用 32 位可视化编码工具包在 64 位机器（MacOS 和 Win 64）上工作。目前将工具包移植到 64 位是不切实际的，所以我有内存限制。

我正在开发一个应用程序，该应用程序必须能够快速擦洗（根据用户输入来回移动）高质量视频。显而易见的解决方案是： 1 - 将其全部保存在内存中。2 - 从磁盘流式传输。目前将其全部放入内存需要将视频质量降低到不可接受的程度，并且从磁盘流式传输会导致擦除在加载时挂起。

我目前的思路是运行一个主程序和多个从属程序。每个从机将一段视频加载到内存中，当主程序需要加载视频的不同部分时，它会从从机请求这些数据并将其传输过来。

我的问题是，这样做的合适方法是什么？我怀疑共享内存不允许我超越我的应用程序当前的 32 位内存限制。我可以做一些像管道一样简单的事情，但我想知道是否还有其他更合适的东西。

理想情况下，这个解决方案应该是 Mac/Win 可移植的，但由于最终解决方案必须驻留在 Windows 盒子上，我将选择 Windows 解决方案。也越容易越好，因为我不想在这方面花费数周的开发时间。

先谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T16:26:18.903

我猜您正在（或至少可以）使用具有 64 位操作系统的 64 位机器，即使将所有代码移植到 64 位是不切实际的。我还假设你的机器*有*足够的内存来保存你关心的数据——真正的问题是从 32 位代码中获得足够的内存。

如果是这种情况，那么我会查看 Windows 的地址窗口扩展 (AWE) 函数，例如[`AllocateUserPhysicalPages`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366528.aspx)和[`MapUserPhysicalPages`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366753.aspx). 这些工作有点像文件映射，只是当您将数据映射到地址空间时，它已经在物理内存中，而不必从磁盘中读取（即映射要快得多）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T15:58:25.883

根据您对分发的要求，我会嵌入或安装一个或多个[Memcached](http://splinedancer.com/memcached-win32/)实例，并让一个（或多个，如果需要）线程将块从磁盘馈送到 memcache。

一旦将数据移到 memcached 上，您就几乎不受 32 位限制的影响，尤其是当[memcached 本身作为 64 位](http://www.urielkatz.com/archive/detail/memcached-64-bit-windows/)进程运行时。

基本上你会在你的程序中从一个套接字而不是文件中读取，而 memcached 将是一个花哨的文件缓存。

# mysql - Sql 到文本文件

> ID：13893640
> 
> 赞同：1
> 
> 时间：2012-12-15T15:48:26.330
> 
> 标签：mysql

我有一个 SQL 数据库，想编写一个脚本，将表“European_option_info”作为 txt（或 excel）文件保存到本地文件夹。

我使用以下代码：

```
use database;
select * into outfile 'C:\[...]\Dropbox\Employees.txt' FIELDS TERMINATED BY ';' from European_option_info; 
```

这给了我以下错误：

```
"Error Code: 1\. Can't create/write to file 'C:[]\Employees.txt' (Errcode: 22)" 
```

问候，丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T16:11:01.557

一个问题可能是您指定的文件路径，您需要指定整个路径，并且在执行此查询时不能打开该文件。

另一个问题可能是允许在其中创建/更改某些内容`C:\\`（这里我假设您使用的是 Windows 操作系统，如果不是，那么也可以尝试其他操作系统的此解决方案），因为它可能需要`administrative rights`作为执行查询的应用程序可能不在`run as administrator`windows 模式下。（假设`C:`驱动器包含您的 Windows 安装）。

因此，请尝试将目录更改为 PC 的其他目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T15:53:31.667

看起来您的文件名不正确。对Employees.txt 的路径使用完整路径。

例如

```
USE database; 
SELECT * INTO OUTFILE 'C:\Users\Username\Dropbox\Employees.txt' 
FIELDS TERMINATED BY ';' 
FROM European_option_info; 
```

或者您的 Dropbox 文件夹的完整路径是什么。

# razor - Asp.net MVC4 Razor 语法错误

> ID：13893644
> 
> 赞同：1
> 
> 时间：2012-12-15T15:49:02.940
> 
> 标签：razor

```
<input type="button" value="Delete" onclick="deleteNote(@note.id)" /> 
```

以上代码有2个语法错误，错误指向**（@note.id）**

但我不知道如何解决该错误。

并且编译和运行不会出错。

我应该如何解决这个错误？

# c# - 文件实际上是资源时未找到文件异常

> ID：13893653
> 
> 赞同：1
> 
> 时间：2012-12-15T15:50:37.900
> 
> 标签：c#, file, resources, filenotfoundexception

朋友们请你检查一下这段代码并告诉我为什么我得到一个`FileNotFoundException`和`PathIsIllegal`例外......？

```
 void AddSearchTermLog(String term)
        {
            String data = File.ReadAllText(global::BenisImageDownloader.Properties.Resources.SearchTerms);
            if (data != String.Empty)
            {
                String temp = String.Empty;
                for (int i = 0; i < data.Length; i++)
                {
                    if (data[i] == (char)Keys.Enter)
                    {
                        if (temp == term)
                            return;
                        temp = String.Empty;
                    }
                    else
                        temp += data[i];
                }
            }
            File.AppendAllText(global::BenisImageDownloader.Properties.Resources.SearchTerms, term + Environment.NewLine);
        } 
```

如果我做错了什么，请用正确的方法纠正我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T15:55:58.983

[`File.ReadAllText()`](http://msdn.microsoft.com/en-us/library/ms143368.aspx)方法将 a`string`作为您尝试打开、读取和关闭文件的参数。从 MSDN 中查看。

我不认为这`global::BenisImageDownloader.Properties.Resources.SearchTerms`是一个`string`。

# android - Android：如何使用 access_token 获取 facebook 用户图像

> ID：13893654
> 
> 赞同：6
> 
> 时间：2012-12-15T15:50:40.100
> 
> 标签：android, facebook-graph-api, facebook-android-sdk

我正在开发一个需要`login with facebook`. 这是我第一次在我的应用程序中集成 Fb API。我已经从[开始使用 Facebook SDK for Android 开始](http://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)并成功获得 fb `access_token`。
我的应用程序中有三个`Activitie`，我需要管理的是`Activities`当用户使用 facebook 成功登录时，在所有这些上登录用户的个人资料图像和名称。
我知道，我可以使用 access_token 查询 fb[`GraphAPI`](http://developers.facebook.com/docs/reference/api/user/)并获取当前登录用户的完整个人资料数据。`access_token`我通过使用有效的using_成功获取用户的个人资料数据
`https://graph.facebook.com/me?<access_token>&format=json`
我还需要登录用户的个人资料图片（需要用户的个人资料`fb_id`）
`http://graph.facebook.com/<fb_id>/picture?type=large`
**是否可以使用获取用户的个人资料图片`access_token`？**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-22T10:56:31.617

最后，经过长时间的搜索，我得到了访问登录用户图像的方法，仅`access_token` `https://graph.facebook.com/me/picture?access_token=<your_access_token_here>`
感谢@Jess您的宝贵回答！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T19:41:04.790

您不需要访问令牌来检索用户的个人资料图像。[只需在http://graph.facebook.com/YOUR_ID_HERE/picture](http://graph.facebook.com/YOUR_ID_HERE/picture)上发出一个 http GET 请求，例如：

[http://graph.facebook.com/4/picture](http://graph.facebook.com/4/picture)为您获取用户 id 4 的图片，无需访问令牌。

编辑：

要在不知道他们的 fb id 而是使用他们的访问令牌的情况下获取图片，只需执行一个 GET 请求`/me?fields=name,picture`，您将收到带有他们个人资料图片 URL 的响应。

请参阅图形 API 工具示例：

[https://developers.facebook.com/tools/explorer/?method=GET&path=me%3Ffields%3Dname%2Cpicture](https://developers.facebook.com/tools/explorer/?method=GET&path=me%3Ffields%3Dname%2Cpicture)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-07T17:59:45.870

因此，在使用了 facebook graph apis 之后，我发现您可以通过两种方式获取个人资料图片：

1.  通过替换用户 ID 将其用作个人资料图片 url： [https ://graph.facebook.com/USER_ID/picture?return_ssl_resources=1](https://graph.facebook.com/USER_ID/picture?return_ssl_resources=1)

2.  使用访问令牌： [https ://graph.facebook.com/me/picture?access_token=ACCESS_TOKEN](https://graph.facebook.com/me/picture?access_token=ACCESS_TOKEN)

希望这会有所帮助。

# java - Java - 将 system.out.println 重定向到 JLabel

> ID：13893655
> 
> 赞同：4
> 
> 时间：2012-12-15T15:51:06.623
> 
> 标签：java, swing, jlabel, println, system.out

我想将 sytem.out.println 重定向到另一个类中的 JLabel。

我有 2 个课程，NextPage 和 Mctrainer。

NextPage 基本上只是一个 Jframe（我项目的 gui），我使用此代码在 Nextpage 中创建了一个 Jlabel；

```
public class NextPage extends JFrame {

    JLabel label1; 

    NextPage() {
        label1 = new JLabel();
        label1.setText("welcome");
        getContentPane().add(label1); 
```

这是 Mctrainer 的代码：

```
public class Mctrainer {

    JLabel label1;

    Mctrainer() {
        HttpClient client2 = new DefaultHttpClient();
        HttpPost post = new HttpPost("http://oo.hive.no/vlnch");
        HttpProtocolParams.setUserAgent(client2.getParams(),"android");
        try {
            List <NameValuePair> nvp = new ArrayList <NameValuePair>();
            nvp.add(new BasicNameValuePair("username", "test"));
            nvp.add(new BasicNameValuePair("password", "test"));
            nvp.add(new BasicNameValuePair("request", "login"));
            nvp.add(new BasicNameValuePair("request", "mctrainer"));
            post.setEntity(new UrlEncodedFormEntity(nvp));

            HttpContext httpContext = new BasicHttpContext();

            HttpResponse response1 = client2.execute(post, httpContext);
            BufferedReader rd = new BufferedReader(new InputStreamReader(response1.getEntity().getContent()));
            String line = "";
            while ((line = rd.readLine()) != null) {
                System.out.println(line);
            } 
        } 
        catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

Mctrainer 基本上只是使用 system.out.println 从服务器打印出 JSON 数据。我想重定向它以显示在我的 GUI（NextPage）而不是控制台的 JLabel 中。关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-15T15:58:17.550

您只需要更改默认输出...

查看[System.setOut(printStream)](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#setOut%28java.io.PrintStream%29)

```
public static void main(String[] args) throws UnsupportedEncodingException
{
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    System.setOut(new PrintStream(bos));
    System.out.println("outputing an example");
    JOptionPane.showMessageDialog(null, "Captured: " + bos.toString("UTF-8"));
} 
```

* * *

[另外，您的问题与另一个](https://stackoverflow.com/questions/12945537/how-to-set-output-stream-to-textarea)问题非常相似，因此我可以调整[这个公认的答案](https://stackoverflow.com/a/12945678/804976)以使用`JLabel`

```
public static void main(String[] args) throws UnsupportedEncodingException
{
    CapturePane capturePane = new CapturePane();
    System.setOut(new PrintStream(new StreamCapturer("STDOUT", capturePane, System.out)));

    System.out.println("Output test");

    JFrame frame = new JFrame();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setLayout(new BorderLayout());
    frame.add(capturePane);
    frame.setSize(200, 200);
    frame.setLocationRelativeTo(null);
    frame.setVisible(true);

    System.out.println("More output test");
}

public static class CapturePane extends JPanel implements Consumer {

    private JLabel output;

    public CapturePane() {
        setLayout(new BorderLayout());
        output = new JLabel("<html>");
        add(new JScrollPane(output));
    }

    @Override
    public void appendText(final String text) {
        if (EventQueue.isDispatchThread()) {
            output.setText(output.getText() + text + "<br>");
        } else {

            EventQueue.invokeLater(new Runnable() {
                @Override
                public void run() {
                    appendText(text);
                }
            });

        }
    }        
}

public interface Consumer {        
    public void appendText(String text);        
}

public static class StreamCapturer extends OutputStream {

    private StringBuilder buffer;
    private String prefix;
    private Consumer consumer;
    private PrintStream old;

    public StreamCapturer(String prefix, Consumer consumer, PrintStream old) {
        this.prefix = prefix;
        buffer = new StringBuilder(128);
        buffer.append("[").append(prefix).append("] ");
        this.old = old;
        this.consumer = consumer;
    }

    @Override
    public void write(int b) throws IOException {
        char c = (char) b;
        String value = Character.toString(c);
        buffer.append(value);
        if (value.equals("\n")) {
            consumer.appendText(buffer.toString());
            buffer.delete(0, buffer.length());
            buffer.append("[").append(prefix).append("] ");
        }
        old.print(c);
    }        
} 
```

# matlab - 如何在matlab中将L*a*b*转换为灰度

> ID：13893657
> 
> 赞同：4
> 
> 时间：2012-12-15T15:51:20.180
> 
> 标签：matlab, image-processing, colors, color-space, lab-color-space

我已经将`RGB`图像转换为`La*b*`色彩空间，但我想将其转换为灰度。我不确定我是否可以使用`rgb2gray`。

任何的想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T16:34:59.810

颜色空间的`L`通道`Lab`是灰度部分。照原样使用它。使用`rgb2gray`不会按预期工作，因为它期望您作为输入提供给它的三个通道来自`RGB`色彩空间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-15T23:20:51.260

`Lab2RGB`如果您有 CIELa*b* 颜色空间表示中的图像，您可以使用（可在[此处](http://www.mathworks.com/matlabcentral/fileexchange/24010)找到）将其转换回 RGB ，然后使用该函数`rgb2gray`将图像转换为灰度。

请注意，由 生成的灰度图像`rgb2gray`和由`L`生成的通道存在差异`RGB2Lab`。

在 Matlab 中，灰度是简单地实现的

```
0.2989 * R + 0.5870 * G + 0.1140 * B 
```

这`L`是通过更复杂的方式实现的（[参见源代码](https://www.eecs.berkeley.edu/Research/Projects/CS/vision/bsds/code/Util/RGB2Lab.m)），因此给出了不同的结果。

因此，请根据您的需要或要求明智地选择！

# ruby-on-rails - 在“lib”目录的子目录中扩展 Rails 时遇到问题

> ID：13893659
> 
> 赞同：0
> 
> 时间：2012-12-15T15:51:31.133
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, validation, extending

我正在使用 Ruby on Rails 3.2.9，我想使用位于目录子目录中的[自定义验证器](http://guides.rubyonrails.org/active_record_validations_callbacks.html#custom-validators)`lib/`来扩展框架。我实现了以下内容：

```
# lib/extension/rails/custom_validator.rb
module Extension
  module Rails
    class CustomValidator < ActiveModel::EachValidator
      # ...
    end
  end
end 
```

重新启动服务器后，我收到`Unknown validator: 'CustomValidator'`错误消息。我该如何解决这个问题？

* * *

*注意 I*：在`config/application.rb`我所说的文件`config.autoload_paths += %W(#{config.root}/lib)`中。

*注意二*：如果我将`custom_validator.rb`文件“直接放在”`lib/`目录下（即，没有“子目录”文件）并且我使用以下代码，那么它可以工作。

```
# lib/custom_validator.rb
class CustomValidator < ActiveModel::EachValidator
  # ...
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T16:26:37.183

尝试在 lib 文件夹中有一个名为“extension.rb”的文件，内容如下

```
$:.unshift File.expand_path(File.dirname(__FILE__))

module Extension
    module Rails
        autoload :CustomValidator, "extension/rails/custom_validator"
    end
end 
```

结帐[http://www.rubyinside.com/ruby-techniques-revealed-autoload-1652.html](http://www.rubyinside.com/ruby-techniques-revealed-autoload-1652.html)和[https://github.com/macournoyer/thin/blob/c8f4627bf046680abb85665f28ab926e36c931db/lib/thin.rb](https://github.com/macournoyer/thin/blob/c8f4627bf046680abb85665f28ab926e36c931db/lib/thin.rb)了解如何使用这种技术.

前面的代码假设您已经编写了验证器，如下所示

```
# lib/extension/rails/custom_validator.rb
module Extension
  module Rails
    class CustomValidator < ActiveModel::EachValidator
      # ...
    end
  end
end 
```

并且您已将其包含在您的模型中，如下所示

```
class MyModel
  validates_with Extension::Rails::CustomValidator
end 
```

另一种选择是定义验证器如下

```
# lib/extension/rails/custom_validator.rb

class CustomValidator < ActiveModel::EachValidator
  # ...
end 
```

然后将其目录添加到应用程序的加载路径中

```
# config/application.rb
config.autoload_paths += %W(#{config.root}/lib/extension/rails) 
```

并在您的模型中使用以下内容进行验证

```
class MyModel
  validates :my_property, :presence => true, :custom => true
end 
```

# c# - 通过递归使用 XElement 动态构建 Xml

> ID：13893662
> 
> 赞同：3
> 
> 时间：2012-12-15T15:51:37.817
> 
> 标签：c#, xml, linq, reflection, linq-to-xml

我是 linq to Xml 的新手。
我有一个递归方法，它作为参数`XElement root`保存 XML 数据，它表示给定递归深度的相关子树根。

`void recursiveMethod(XElement root);`
更具体地说，还请查看此 XML 示例：

```
<start>
      <Class>
           <Worker>
                <Name> Dan </Name>
                <Phone> 123 </Phone> 
                <Class>
                      <Address>
                           <Street> yellow brick road </Street>
                           <Zip Code> 123456 </Zip Code>
                      </Address>
                </Class>
            </Worker>
      </Class>
...
</start> 
```

可以想象，`Name`是值类型，`Address`而是类引用。
Xml 信息应通过反射动态添加（以自上而下的方法）。

长话短说，想象我正在调查`Worker`Class 并到达`Address`Class 并且想要“向下钻取”，所以我想用当前 Worker 类的子节点的正确引用调用我的递归方法作为新的 XElement 根，所以我将能够在下面的`Address`第一类递归深度中添加我通过反射找到的内容。

请注意，此引用应为 XElement 类型。

我怎样才能做到这一点？

**编辑**：如果你对做所有这些事情有另一个想法，但`XElement`我也很乐意听到，尽管我更喜欢`XElement`参数。

**另一个问题**：
我已经开始以一种天真的方式实现它，例如遍历所有字段（FieldInfo [] 的变量），如果遇到值类型（IsValueType），我正在做类似的事情

```
 root.Add(new XElement("Field",
                      new XElement("Type", ...),
                      new XElement("Variable Name", ...),
                      new XElement("Value", ...))); 
```

所以，只是为了一般知识：
1.有没有办法只获得一个节点对其后代的引用，这样在较低的递归级别我就可以像上面一样做另一个 root.Add(...) 但是这个根将是对前一个根的孩子的引用？（这意味着在没有 Linq 语法的情况下进行整个操作）

2.我已经设法通过反射获得私有字段值而不使用属性，这有问题吗？我应该总是通过反射中的属性来获取值吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T16:33:08.573

此扩展方法将以所需格式构建 XElement：

```
public static class Extensions
{
    public static XElement ToXml<T>(this T obj)
    {
        Type type = typeof(T);

        return new XElement("Class",
                    new XElement(type.Name,
                        from pi in type.GetProperties()
                        where !pi.GetIndexParameters().Any()
                        let value = (dynamic)pi.GetValue(obj, null)
                        select pi.PropertyType.IsPrimitive || 
                               pi.PropertyType == typeof(string) ?
                                new XElement(pi.Name, value) : 
                                Extensions.ToXml(value)
                        )
                    );
    }
} 
```

这里会发生什么：

*   我们获取传递对象的公共属性（您可以添加 BindingFlags 来过滤属性）。
*   接下来我验证属性是否具有索引参数并跳过这些属性。
*   接下来我将属性值作为`dynamic`对象。这很重要，否则将`object`在递归调用`ToXml<T>`方法期间推断属性值类型。
*   我检查属性类型是原始类型（int、byte、long、single、double 等）还是字符串
*   对于原始类型，我们编写具有属性值的元素。对于其他类型（复杂），我们递归地开始构建 XElement

用法：

```
Worker worker = new Worker()
{
    Name = "Serge",
    Phone = "911",
    Address = new Address() { Street = "Elm street", ZipCode = 666 }
};

XElement xml = worker.ToXml(); 
```

结果：

```
<Class>
  <Worker>
    <Name>Serge</Name>
    <Phone>911</Phone>
    <Class>
      <Address>
        <Street>Elm street</Street>
        <ZipCode>666</ZipCode>
      </Address>
    </Class>
  </Worker>
</Class> 
```

**但是** *你应该小心两个对象相互引用的情况*（在这种情况下会发生无限递归）

在这种情况下，您可以使用字典或哈希集之类的东西来存储 xml 中已经存在的所有对象：

```
Type type = obj.GetType();
if (set.Contains(obj))
    return new XElement("Class", new XAttribute("name", type.Name));
set.Add(obj);
return new XElement("Class", ...); 
```

# ruby - 守卫在 Bundler 警告之外运行

> ID：13893668
> 
> 赞同：0
> 
> 时间：2012-12-15T15:52:37.930
> 
> 标签：ruby, guard

当我运行该`guard`命令时，它会给出以下警告：

> 守在这里！看起来您的项目有一个 Gemfile，但您在`guard`Bundler 之外运行。如果这是您的意图，请随时忽略此消息。否则，请考虑使用`bundle exec guard` 以确保正确加载您的依赖项。

这是在暗示我 Rails 没有正确配置为与 Bundler 一起工作，还是正常？这不是我所关注的教程中的预期行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T16:25:48.967

你应该跑`bundle exec guard`。或者，或者， run `bundle install --binstubs`，然后你可以运行 guard with `bin/guard`（它在这个位置创建一个脚本）。这是运行来自安装的 gem 的所有命令的推荐方式`bundle install`。

（如果我理解正确的话）它确保您运行捆绑包中指定的 gem 的特定版本，并且该 gem 将无法运行安装在您的计算机上但不包含在 Gemfile 中的 gem（这可能欺骗您，让您相信您的项目很好，直到您尝试在另一台计算机或生产服务器上运行它，而其他 gem 会丢失）。它还做了很多事情，坦率地说，我不知道。

[文档中的](http://gembundler.com/man/bundle-exec.1.html)更多信息。

# actionscript-3 - Flash Action Script 3：拖动影片剪辑问题

> ID：13893669
> 
> 赞同：0
> 
> 时间：2012-12-15T15:52:39.073
> 
> 标签：actionscript-3, flash

我是 as3 的新手。我创建一个矩形并将其转换为符号。然后我进入符号并创建两个滑块。另外，我使符号可拖动。

```
controlPanel_mc.addEventListener(MouseEvent.MOUSE_DOWN, dragStartF);
controlPanel_mc.addEventListener(MouseEvent.MOUSE_UP, dragEndF);

function dragStartF(e:MouseEvent){
    e.currentTarget.startDrag();
}
function dragEndF(e:MouseEvent){
        e.currentTarget.stopDrag();
} 
```

它工作正常，但我不能使用滑块。如果我拖动滑块，整个影片剪辑就会移动。我怎么解决这个问题？干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T16:21:49.197

如果没有有关 FLA 文件结构的更多信息，我假设 controlPanel_mc 是包含矩形 [背景] 和两个滑块的容器。

您在代码中所做的似乎是将事件侦听器添加到容器中，这意味着“如果在此对象上的任何位置发生单击，请执行以下操作”。由于该剪辑“拥有” 2 个滑块，因此滑块不会收到任何 MOUSE_DOWN 事件，因为父级始终是第一个处理事件的人。

您可能希望将背景转换为符号并将 eventListeners 添加到该对象。

```
bg.addEventListener(MouseEvent.MOUSE_DOWN, onBgClick);
bg.addEventListener(MouseEvent.MOUSE_UP, onBgRelease);

function onBgClick(e:MouseEvent){
    controlPanel_mc.startDrag();
}
function onBgRelease(e:MouseEvent){
    controlPanel_mc.stopDrag();
} 
```

那应该可以解决您的问题:)

# php - 创建带有评论的新闻更新，如何加入表格？

> ID：13893671
> 
> 赞同：0
> 
> 时间：2012-12-15T15:52:48.497
> 
> 标签：php, mysql

我想创建一个新闻更新系统，使用 MySQL 和 PHP。但我无法让它工作，加入语句和 PHP 有问题，所以我可以显示新闻更新和所有附加的评论（如果有效用户登录，该人可以单独删除每条评论）。但这只是我遇到问题的 JOIN 语句。

我有这些表和数据库架构

1.  news_tbl（news_id、日期、用户（fk to users_tbl.username）、标题、正文和图片）
2.  users_tbl（用户名、电子邮件、密码、用户类型）
3.  comments_tbl (comments_id, name, comment, news_id(fk to news_id))

我试过这个：

```
$sqlquery ="SELECT news_tbl.*, users_tbl.*, comments_tbl.*,
COUNT(comments_tbl.comments_id) AS comments_count
FROM news_tbl
LEFT JOIN users_tbl
ON news_tbl.user = users_tbl.username
LEFT JOIN comments_tbl
ON comments_tbl.news_id = news_tbl.news_id
GROUP BY news_tbl.news_id "; 
```

但后来我只能显示一条评论，我想要所有评论，我想知道每条评论的 ID，所以用户可以单独删除每条评论。如果没有写评论，我也无法获得新闻ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T17:47:09.590

这应该大致得到您想要的，尽管您应该始终共享您的查询并准确指定您假装要实现的目标。

```
Select ut.user_id,nt.news_id,nt.headline, nt.body,ct.comments_id,
ct.comment,count(ct.comments_id) as total
from news_tbl nt
inner join users_tbl ut on ut.user_id=nt.user_id
left join comments_tbl ct on ct.news_id=nt.news_id
group by ut.user_id,nt.news_id 
```

祝你好运。

# c# - EF 将对象插入 DB 得到验证错误

> ID：13893675
> 
> 赞同：0
> 
> 时间：2012-12-15T15:53:19.473
> 
> 标签：c#, entity-framework

我正在尝试将具有一对多关系的模型插入数据库：

我有两个模型：

```
public class User
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Surname { get; set; }     

    public virtual Country Country { get; set; }
}

public class Country
{
    public int Id { get; set; }
    public string CountryName { get; set; }

    public virtual ICollection<User> Users { get; set; }
}

User user = new User()
{
     Name = model.Name,
     Surname = model.Surname,  
     Country = new Country { Id = 1 }
}; 
```

当我尝试将其插入数据库时​​出现异常

> *一个或多个实体的验证失败。*

该`CountryName`字段是必需的（`CoutryName`数据库中的列是必需的）

我不希望每次调用数据库来获取完整的 Country 对象，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T15:56:51.837

而不是实例化一个新的国家，做这样的事情：

```
public class User
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Surname { get; set; }     
    public int CountryId { get; set; }

    [ForeignKey("CountryId")]
    public virtual Country Country { get; set; }
}

public class Country
{
    public int Id { get; set; }
    public string CountryName { get; set; }

    public virtual ICollection<User> Users { get; set; }
}

User user = new User()
{
     Name = model.Name,
     Surname = model.Surname,  
     CountryId = 1;
}; 
```

这明确设置了用户的 CountryID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T17:24:54.667

您应该使用“FK 关联”而不是“独立关联”这是创建关于它的文章：http: [//blogs.msdn.com/b/efdesign/archive/2009/03/16/foreign-keys-in-the-entity -framework.aspx](http://blogs.msdn.com/b/efdesign/archive/2009/03/16/foreign-keys-in-the-entity-framework.aspx)

# delphi - Delphi反序列化中sql查询的访问冲突

> ID：13893680
> 
> 赞同：0
> 
> 时间：2012-12-15T15:54:02.727
> 
> 标签：delphi, delphi-xe2

我通过序列化和反序列化表单及其内容到Delphi编写了以下代码

```
unit SerAndDeser;

interface

  uses Classes,MainForm,ListOfTables,DataOfTable,SerialForms,sysutils,ActiveX, DatabaseClasses, UnloadProcs;

  procedure Ser();
  procedure Deser();
  function GetGUID(): string;
  function DeleteSymbols(inputstr : string) : string;
implementation

  function GetGUID(): string;
  var
  GUID : TGUID;
  begin
  Result := '';
  if CoCreateGuid(GUID) = 0 then
    Result := GUIDToString(GUID);
    Result := StringReplace(Result, '{', '', []);
    Result := StringReplace(Result, '}', '', []);
    Result := StringReplace(Result, '-', '', [rfReplaceAll]);
  end;

  function DeleteSymbols(inputstr : string): string;
  begin
  Result := '';
    Result := StringReplace(inputstr, '-', '', [rfReplaceAll]);
    Result := StringReplace(Result, ' ', '', [rfReplaceAll]);
    Result := StringReplace(Result, '\', '', [rfReplaceAll]);
    Result := StringReplace(Result, '/', '', [rfReplaceAll]);
  end;

  procedure Ser();

    var mForm : MainFormInfo;
        tForm : TableFormInfo;
        lForm : ListFormInfo;
        tempFmtable : TfmTableData;
        i,j : integer;
        MyFileStream : TFileStream;
        MyMemoryStream : TMemoryStream;
        field : TableFieldInfo;
  begin
        try
      mForm := nil;

      mForm := MainFormInfo.Create(
        nil,
        MainWindow.Left,
        MainWindow.Top,
        MainWindow.Height,
        MainWindow.Width,
        MainWindow.partofconnectstring,
        MainWindow.dbname,
        MainWindow.dbfilename);
      mForm.Name := 'MainWindow';

      //table forms
      try
        tForm := nil;
        field := nil;

        for i := 0 to MainWindow.ComponentCount - 1 do
          if (MainWindow.Components[i] is TfmTableData) then
            begin
              tempFmtable := MainWindow.Components[i] as TfmTableData;
              tForm := TableFormInfo.Create(
                mForm,
                tempFmtable.Left,
                tempFmtable.Top,
                tempFmtable.Height,
                tempFmtable.Width,
                tempFmtable.tname);
              tForm.Name := tempFmtable.Name;

              //fields
              for j := 0 to tempFmtable.DBGrid1.Columns.Count - 1 do
              begin
                field := nil;

                field := TableFieldInfo.Create(
                  tForm,
                  tempFmtable.DBGrid1.Columns[j].FieldName,
                  tempFmtable.DBGrid1.Columns[j].Title.Caption,
                  tempFmtable.DBGrid1.Columns[j].Index,
                  tempFmtable.DBGrid1.Columns[j].Visible);
                  field.Name := DeleteSymbols(tempFmtable.DBGrid1.Columns[j].FieldName);{tempFmtable.DBGrid1.Columns[j].FieldName} {+ GetGUID;}
              end;
              //

            end;
      except
        field.Free;
        tForm.Free;
      end;
      //

      //List form
      try
        lForm := nil;
        lForm := ListFormInfo.Create(
          mForm,
          fmListOfTables.Left,
          fmListOfTables.Top,
          fmListOfTables.Height,
          fmListOfTables.Width);
        lForm.Name := 'fmListOfTables';
      except
        lForm.Free;
      end;
      //

      //save
      MyFileStream := nil;
      MyMemoryStream := nil;

      MyFileStream := TFileStream.Create('test.txt', fmCreate);
      MyMemoryStream := TMemoryStream.Create;
      MyMemoryStream.WriteComponent(mForm);
      MyMemoryStream.Position := 0;
      ObjectBinaryToText(MyMemoryStream,MyFileStream);
      MainWindow.Panel1.DockManager.SaveToStream(MyFileStream);
      //

    finally
      mForm.Free;
      MyFileStream.Free;
      MyMemoryStream.Free;
    end;
  end;

  procedure Deser();

    var mForm : MainFormInfo;
        tForm : TableFormInfo;
        lForm : ListFormInfo;
        tempFmtable : TfmTableData;
        i,j : integer;
        MyFileStream : TFileStream;
        MyMemoryStream : TMemoryStream;
        table : TTableSpec;
        descr : string;
        field : TableFieldInfo;

  begin
    try
      //destroy environment
      i := 0;
      while (i <= MainWindow.ComponentCount - 1) do
      begin
        if MainWindow.Components[i] is TfmTableData then
          try
            tempFmTable := nil;
            tempFmTable := MainWindow.Components[i] as TfmTableData;
            tempFmTable.IBQuery1.Close;
            tempFmtable.Free;
          except
            tempFmTable.Free;
          end
        else
          inc(i);
      end;
      fmListOfTables.Free;
      DBSchema.Free;
      //

      //read
      mForm := nil;
      MyFileStream := nil;
      MyMemoryStream := nil;

      mForm := MainFormInfo.Create(nil, -1, -1, -1, -1, MainWindow.partofconnectstring, MainWindow.dbname, MainWindow.dbfilename);

      MyFileStream := TFileStream.Create('test.txt', fmOpenRead);
      MyMemoryStream := TMemoryStream.Create;
      ObjectTextToBinary(MyFileStream,MyMemoryStream);
      MyMemoryStream.Position := 0;
      MyMemoryStream.ReadComponent(mForm);
      //

      //go
      UnloadProcs.ConnectToDatabase(MainWindow.partofconnectstring, MainWindow.SQLConnection1);
      //UnloadProcs.CreateObjs(MainWindow.SQLConnection1, MainForm.DBSchema);
      //fmListOfTables.Show;

      MainWindow.Left := mForm.LeftValue;
      MainWindow.Top := mForm.TopValue;
      MainWindow.Height := mForm.HeightValue;
      MainWindow.Width := mForm.WidthValue;

      //list
      i := 0;
      while i <= mForm.ComponentCount - 1 do
      begin
        if mForm.Components[i] is ListFormInfo then
          try
            lForm := nil;
            lForm := mForm.Components[i] as ListFormInfo;
            fmListOfTables.Left := lForm.LeftValue;
            fmListOfTables.Top := lForm.TopValue;
            fmListOfTables.Height := lForm.HeightValue;
            fmListOfTables.Width := lForm.WidthValue;
            fmListOfTables.Show;
            inc(i);
          finally
            lForm.Free;
          end
        else
          inc(i);
      end;
      //

      //fmListOfTables.Show;
      //tables
      for j := 0 to mForm.ComponentCount - 1 do
        if mForm.Components[j] is TableFormInfo then
          try
            table := nil;
            tempFmtable := nil;
            tForm := nil;

            tForm := mForm.Components[j] as TableFormInfo;

            table := TTableSpec(DBSchema.Tables.FindComponent(tForm.Table));
            tempFmtable := TfmTableData.Create(MainWindow);
            tempFmtable.Name := tForm.Name;
            tempFmtable.tname := tForm.Table;
            //tempFmtable.Caption := Utf8ToAnsi(table.Description);
            tempFmtable.Left := tForm.LeftValue;
            tempFmtable.Top := tForm.TopValue;
            tempFmtable.Height := tForm.HeightValue;
            tempFmtable.Width := tForm.WidthValue;

            tempFmTable.IBQuery1.SQL.Clear;
            tempFmtable.IBQuery1.SQL.Add('select * from ' + table.Name);
            tempFmtable.IBQuery1.Open;

            i := 0;
            while i <= tForm.ComponentCount - 1 do
              if tForm.Components[i] is TableFieldInfo then
              begin
                field := nil;

                field := tForm.Components[i] as TableFieldInfo;
                tempFmtable.DBGrid1.Columns[i].FieldName := field.FieldNameValue;
                tempFmtable.DBGrid1.Columns[i].Title.Caption := field.DescriptionValue;
                tempFmtable.DBGrid1.Columns[i].Index := field.IndexValue;
                tempFmtable.DBGrid1.Columns[i].Visible := field.VisibleValue;
                //tempFmtable.CheckListBox1.Items.Add(field.Description);
                //tempFmtable.CheckListBox1.Checked[i] := field.Visible;
                inc(i);
              end
              else
                inc(i);

            {for i := 0 to table.Fields.ComponentCount - 1 do
            begin
              descr := Utf8ToAnsi(((table.Fields.Components[i]) as TFieldSpec).Description);
              tempFmtable.CheckListBox1.Items.Add(descr);
              tempFmtable.DBGrid1.Columns[i].Title.Caption := descr;
              tempFmtable.CheckListBox1.Checked[i] := true;
            end; }

            tempFmtable.Show;

          except
            tempFmtable.Free;
            tForm.Free;
            table.Free;
          end;
      //

      //dock
      MainWindow.Panel1.DockManager.BeginUpdate;
      MainWindow.Panel1.DockManager.LoadFromStream(MyFileStream);
      MainWindow.Panel1.DockManager.ResetBounds(TRUE);
      MainWindow.Panel1.DockManager.EndUpdate;

      //
    finally
      MyFileStream.Free;
      MyMemoryStream.Free;
    end;

  end;

end. 
```

调试时我发现给出了

```
'Project GUI.exe raised exception class $C0000005 with message 'access violation at 0x00821dae: read of address 0x00000044'. 
```

线上异常

```
tempFmtable.IBQuery1.SQL.Add('select * from ' + table.Name); 
```

在以下代码块中的代码更高

```
 //tables
  for j := 0 to mForm.ComponentCount - 1 do
    if mForm.Components[j] is TableFormInfo then
      try
        table := nil;
        tempFmtable := nil;
        tForm := nil;

        tForm := mForm.Components[j] as TableFormInfo;

        table := TTableSpec(DBSchema.Tables.FindComponent(tForm.Table));
        tempFmtable := TfmTableData.Create(MainWindow);
        tempFmtable.Name := tForm.Name;
        tempFmtable.tname := tForm.Table;
        //tempFmtable.Caption := Utf8ToAnsi(table.Description);
        tempFmtable.Left := tForm.LeftValue;
        tempFmtable.Top := tForm.TopValue;
        tempFmtable.Height := tForm.HeightValue;
        tempFmtable.Width := tForm.WidthValue;

        tempFmTable.IBQuery1.SQL.Clear;
        tempFmtable.IBQuery1.SQL.Add('select * from ' + table.Name);
        tempFmtable.IBQuery1.Open;

        i := 0;
        while i <= tForm.ComponentCount - 1 do
          if tForm.Components[i] is TableFieldInfo then
          begin
            field := nil;
            //tempFmtable.Show;
            field := tForm.Components[i] as TableFieldInfo;
            tempFmtable.DBGrid1.Columns[i].FieldName := field.FieldNameValue;
            tempFmtable.DBGrid1.Columns[i].Title.Caption := field.DescriptionValue;
            tempFmtable.DBGrid1.Columns[i].Index := field.IndexValue;
            tempFmtable.DBGrid1.Columns[i].Visible := field.VisibleValue;
            //tempFmtable.CheckListBox1.Items.Add(field.Description);
            //tempFmtable.CheckListBox1.Checked[i] := field.Visible;
            //tempFmtable.Show;
            inc(i);
          end
          else
            inc(i);

        {for i := 0 to table.Fields.ComponentCount - 1 do
        begin
          descr := Utf8ToAnsi(((table.Fields.Components[i]) as TFieldSpec).Description);
          tempFmtable.CheckListBox1.Items.Add(descr);
          tempFmtable.DBGrid1.Columns[i].Title.Caption := descr;
          tempFmtable.CheckListBox1.Checked[i] := true;
        end; }

        tempFmtable.Show;

      except
        tempFmtable.Free;
        tForm.Free;
        table.Free;
      end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T16:22:07.037

失败的行是：

```
tempFmtable.IBQuery1.SQL.Add('select * from ' + table.Name); 
```

在此行运行之前，您分配`table`如下：

```
table := TTableSpec(DBSchema.Tables.FindComponent(tForm.Table)); 
```

似乎`FindComponent`又回来了`nil`。

我相信你知道，你必须有一个有效的对象实例才能调用方法、访问字段和属性等。你的代码应该检查这个条件并做出相应的响应。

您可以在调试器中很容易地看到所有这些。调试器将在该行中断，当您检查变量时，它会告诉您`table`是`nil`. 然后你必须查看代码并找出原因。我建议您花一些时间提高您的调试技能并学习如何使用可用的工具。

# php - 正则表达式匹配特殊字符

> ID：13893682
> 
> 赞同：1
> 
> 时间：2012-12-15T15:54:15.310
> 
> 标签：php, regex

我有以下正则表达式，它适用于针对数组的正常字符串匹配，

```
preg_grep( "/^". $name . "$/i", $values); 
```

但是，它不适用于具有“娱乐（常规）”等特殊字符的字符串。

找到一个相关的[线程](https://stackoverflow.com/questions/5155910/regex-match-with-special-characters)，但是它用于 java 脚本，也没有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T15:56:54.600

使用该[`preg_quote`](http://php.net/preg_quote)函数转义字符串中可能存在的任何特殊字符：

```
preg_grep( "/^". preg_quote($name, '/') . "$/i", $values); 
```

从[文档](http://php.net/preg_quote)中：

> `preg_quote()`在作为正则表达式语法一部分的每个字符前面放置一个反斜杠。如果您有一个需要在某些文本中匹配的运行时字符串并且该字符串可能包含特殊的正则表达式字符，这将非常有用。

# ruby-on-rails - Rails 跨域请求安全问题

> ID：13893691
> 
> 赞同：1
> 
> 时间：2012-12-15T15:55:09.320
> 
> 标签：ruby-on-rails, ajax, security, rest, authentication

我正在开发一个 Rails 应用程序，它以 JSON 的形式依赖于对服务器的大量 jQuery AJAX 请求。该应用程序没有身份验证（它向公众开放）。这些请求中的数据在小块中不敏感，但我想避免外部代理访问数据或自动请求（因为服务器负载和数据本身）。

理想情况下，我希望包括某种身份验证，即只能从同一域中的javascript（即我的网站上的客户端）发出请求，但我不知道如何或是否可以这样做。我也在考虑加密查询字符串和/或响应。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T16:03:47.980

What do you mean only your app should request these JSONs? A client will eventually have to trigger an event, otherwise no request will be sent to the server.

Look at the source code of any of your app's pages. You will notice an authenticity token, generated by the [protect_from_forgery](http://api.rubyonrails.org/classes/ActionController/RequestForgeryProtection/ClassMethods.html) method in your application controller - from the api:

> Turn on request forgery protection. Bear in mind that only non-GET, HTML/JavaScript requests are checked.

By default, this is enabled and included in your application controller.

If you really need to check whether a request comes from your own IP, have a look at this [great question.](https://stackoverflow.com/questions/42566/getting-the-hostname-or-ip-in-ruby-on-rails)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T13:35:11.740

我最终传入`token=$('meta[name=csrf-token]').attr("content")`了请求 URL 并`session[:_csrf_token]`在控制器中进行了比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T17:04:26.880

> ```
> I want to avoid external agents from having access to the data... because of the server load and because of the data itself. 
> ```

1.  如果您真的关心安全性，这个其他问题详细说明了如何实现 API 密钥：[当任何查看 js 代码的人都可以看到 javascript API 密钥时，它的意义何在](https://stackoverflow.com/questions/4907243/whats-the-point-of-a-javascript-api-key-when-it-can-be-seen-to-anyone-viewing-t)

2.  你不应该解决你还没有的问题，服务器负载不应该是一个问题，直到它实际上是一个问题。如果您注意到来自其他代理的负载过多，为什么不监控服务器流量并实施此功能？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T16:41:28.990

```
def check_api
  redirect_to root_url, :alert => 'effoff' unless request.host =~ /yourdomain.com/
end 
```

这应该可以检查您的域。不确定你是否需要 js 部分，但它是一些东西。

# html - 如何在左下角设置 html5 画布的原点

> ID：13893693
> 
> 赞同：1
> 
> 时间：2012-12-15T15:55:22.237
> 
> 标签：html, canvas

我想将画布的原点设置在左下角，就像经典的 (O, x, y) 笛卡尔地标一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T17:35:48.323

转换`canvas`上下文相当于改变原点。

```
<canvas width="100" height="100" id="mycanvas"></canvas>

<script>
var c = document.getElementById('mycanvas');
var ctx = c.getContext('2d');

ctx.transform(-1, 0, 0, 1, 100, 0);

ctx.beginPath();
ctx.moveTo(0, 0);
ctx.lineTo(100,100);
ctx.closePath();

ctx.lineWidth = 5;
ctx.stroke();
</script> 
```

[演示](http://jsfiddle.net/robertc/DZqV5/)。

# c# - 当我无法使用“IN”时将 SQL 转换为 LINQ 查询

> ID：13893694
> 
> 赞同：2
> 
> 时间：2012-12-15T15:55:35.793
> 
> 标签：c#, sql, linq, linq-to-sql

我正在尝试将这段非常简单的 SQL 转换为 LINQ：

```
select * from Projects p
inner join Documents d
    on p.ProjectID = d.ProjectID
left join Revisions r
    on r.DocumentID = d.DocumentID 
    and r.RevisionID IN (SELECT max(r2.RevisionID) FROM Revisions r2 GROUP BY r2.DocumentID) 
WHERE p.ProjectID = 21 -- Query string in code 
```

这表示，如果文档存在任何修订，请返回最高修订 ID。由于它是左连接，如果不存在修订，我仍然希望返回结果。

这按预期工作，显示存在的任何修订（并返回最高修订 ID），所有没有任何修订的文档也是如此。

尝试使用 LINQ 编写此内容时，我只得到文档存在修订的结果。

到目前为止，这是我的尝试：

```
 var query = from p in db.Projects
                              join d in db.Documents on new { ProjectID = p.ProjectID } equals new { ProjectID = Convert.ToInt32(d.ProjectID) }
                              join r in db.Revisions on new { DocumentID = d.DocumentID } equals new { DocumentID = Convert.ToInt32(r.DocumentID) } into r_join
                              from r in r_join.DefaultIfEmpty()
                              where
                               (from r2 in db.Revisions
                                   group r2 by new { r2.DocumentID }
                                       into g
                                       select new { MaxRevisionID = g.Max(x => x.RevisionID) }).Contains(
                                       new { MaxRevisionID = r.RevisionID }) &&
                                p.ProjectID == Convert.ToInt32(Request.QueryString["projectId"])
                              select new { d.DocumentID, d.DocumentNumber, d.DocumentTitle, RevisionNumber = r.RevisionNumber ?? "<No rev>", Status = r.DocumentStatuse == null ? "<Not set>" : r.DocumentStatuse.Status }; 
```

我不太擅长 LINQ，一直在使用转换器“Linqer”来帮助我，但是在尝试时我收到以下消息：

> “SQL 无法转换为 LINQ：只能使用 JOIN 表达式中的“=”运算符。“IN”运算符无法转换。”

你会看到我`.DefaultIfEmpty()`在修订表上。如果我删除了`where (`进行分组的代码，无论文档是否存在修订，我都会得到所需的结果。但是如果有链接，where 子句应该返回文档的最高修订号，如果没有，我仍然想返回所有其他数据。与我的 SQL 代码不同，这不会发生。它只返回有指向修订表链接的数据。

我希望这有点道理。**按代码分组**是什么弄乱了我的结果集。无论是否有指向修订表的链接，我仍然希望返回我的结果。请帮忙！

谢谢。

=======

感谢 Gert，我现在使用的代码。

```
 var query = from p in db.Projects
                    from d in p.Documents
                    where p.ProjectID == Convert.ToInt32(Request.QueryString["projectId"])
                    select new
                               {
                                   p.ProjectID,
                                   d.DocumentNumber,
                                   d.DocumentID,
                                   d.DocumentTitle,
                                   Status = d.Revisions
                                    .OrderByDescending(rn => rn.RevisionID)
                                    .FirstOrDefault().DocumentStatuse.Status,
                                   RevisionNumber = d.Revisions
                                    .OrderByDescending(rn => rn.RevisionID)
                                    .FirstOrDefault().RevisionNumber
                               };

        gvDocumentSelection.DataSource = query;
        gvDocumentSelection.DataBind(); 
```

虽然这可行，但您会看到我通过运行相同的代码从修订表中选择了两个字段，但选择了两个不同的字段。我猜有更好，更有效的方法来做到这一点？理想情况下，我想加入修订表，以防我需要访问更多字段，但随后我又遇到了相同的分组问题。

```
 Status = d.Revisions
            .OrderByDescending(rn => rn.RevisionID)
            .FirstOrDefault().DocumentStatuse.Status,
           RevisionNumber = d.Revisions
            .OrderByDescending(rn => rn.RevisionID)
            .FirstOrDefault().RevisionNumber 
```

最终工作代码：

```
 var query = from p in db.Projects
                    from d in p.Documents
                    where p.ProjectID == Convert.ToInt32(Request.QueryString["projectId"])
                    select new
                               {
                                   p.ProjectID,
                                   d.DocumentNumber,
                                   d.DocumentID,
                                   d.DocumentTitle,
                                   LastRevision = d.Revisions
                        .OrderByDescending(rn => rn.RevisionID)
                        .FirstOrDefault()
                               };

        var results = from x in query
                      select
                          new
                              {
                                  x.ProjectID,
                                  x.DocumentNumber,
                                  x.DocumentID,
                                  x.DocumentTitle,
                                  x.LastRevision.RevisionNumber,
                                  x.LastRevision.DocumentStatuse.Status
                              };

        gvDocumentSelection.DataSource = results;
        gvDocumentSelection.DataBind(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T13:28:53.410

如果您有 1:n 导航属性，则有一种更简单（且推荐）的方法来实现此目的：

```
from p in db.Projects
from d in p.Documents
select new { p, d,
             LastRevision = d.Revisions
                            .OrderByDescending(r => r.RevisionId)
                            .FirstOrDefault() } 
```

如果没有导航属性，它是类似的：

```
from p in db.Projects
join d in db.Documents on new { ProjectID = p.ProjectID } 
                   equals new { ProjectID = Convert.ToInt32(d.ProjectID) }
select new { p, d,
             LastRevision = db.Revisions
                 .Where(r => d.DocumentID = Convert.ToInt32(r.DocumentID))
                 .OrderByDescending(r => r.RevisionId)
                 .FirstOrDefault() } 
```

**编辑**
您可以使用各种投影修改这个非常广泛的基本查询，例如：

```
from x in query select new { x.p.ProjectName,
                             x.d.DocumentName,
                             x.LastRevision.DocumentStatus.Status,
                             x.LastRevision.FieldA,
                             x.LastRevision.FieldB
                            } 
```

# android - 当我结合 ActionBarSherlock 和 SlidingMenu 时，SLIDING_MENU 不能正常工作？

> ID：13893695
> 
> 赞同：-1
> 
> 时间：2012-12-15T15:55:42.977
> 
> 标签：android, actionbarsherlock

当我一起使用 SlidingMenu 和 ActionBarSherlock 时，我注意到当我调用

```
attachToActivity(.. SLIDING_CONTENT ..) 
```

它不起作用。

我认为必须是因为 ActionBarSherlock 将主题更改为 NO TITLE BAR。

问题：我怎样才能使 SLIDING_CONTENT 工作？

这是我的 onCreate 函数（从 SherlockFragmentActivity 扩展的类）

```
 super.onCreate(savedInstanceState);
    mContext = this;
    setContentView(R.layout.activity_main);

    // start SlidingMenu configuration
    mSlidingMenu = new SlidingMenu(this);
    mSlidingMenu.setMode(SlidingMenu.LEFT);
    mSlidingMenu.setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
    mSlidingMenu.setBehindOffsetRes(R.dimen.slidingmenu_offset);
    mSlidingMenu.setFadeDegree(0.35f);
    mSlidingMenu.setMenu(R.layout.sliding_menu);
    mMenuView = mSlidingMenu.getMenu();
    mSlidingMenu.attachToActivity(this, SlidingMenu.SLIDING_CONTENT);
    mSlidingMenu.setOnClosedListener(this); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T16:22:32.997

如果您想将[SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)与ActionBarSherlock 一起使用，则必须将库中的所有活动更改为SherlockActivity，将所有FragmentActivites 更改为SherlockFragmentActivity，将所有ListActivities 更改为SherlockListActivity 等。更改[this](https://github.com/jfeinstein10/SlidingMenu/blob/master/library/src/com/slidingmenu/lib/app/SlidingActivity.java)、[this](https://github.com/jfeinstein10/SlidingMenu/blob/master/library/src/com/slidingmenu/lib/app/SlidingListActivity.java)、[this](https://github.com/jfeinstein10/SlidingMenu/blob/master/library/src/com/slidingmenu/lib/app/SlidingFragmentActivity.java)和[this](https://github.com/jfeinstein10/SlidingMenu/blob/master/library/src/com/slidingmenu/lib/app/SlidingMapActivity.java)。

# c++ - 使用char数组存储数据

> ID：13893704
> 
> 赞同：1
> 
> 时间：2012-12-15T15:56:26.157
> 
> 标签：c++, byte, arrays

我需要在它运行时创建一个程序，它应该提取一个图像文件。为此，我使用了一个 char 数组来存储数据。前任：

```
char data[]="ÿØÿà......"; 
```

我用十六进制编辑器打开了图像，复制了数据并将其粘贴到上面。但它给出了许多错误。（这可能是因为图像数据有一些字节，ascii 字符不可用。例如：nul，）

骗局有人给我一些关于如何做到这一点的建议。如何创建字节数组。

感谢任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T16:08:57.527

您应该使用数字初始化程序而不是字符串文字......例如

```
const unsigned char data[] = { 0x01, 0x02, 0x03, 0x04,
                               0x05, 0x06, 0x07, 0x08 }; 
```

一种简单的方法是编写一个小脚本，通过读取文件来生成源代码......在Python中它会像

```
data = open("datafile", "rb").read()
i = 0
while i < len(data):
    chunk = data[i:i+8]
    print ("0x%02x, " * len(chunk)) % tuple(map(ord, chunk))
    i += 8 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T15:59:58.457

使用 fopen 或 fstream 从文件中读取数据。如果要使用资源编译器将文件嵌入到 exe 中。

# php - 继续加载我的脚本

> ID：13893712
> 
> 赞同：-5
> 
> 时间：2012-12-15T15:57:12.593
> 
> 标签：php, cron, crontab

> **可能重复：**
> [在 php 中安排电子邮件](https://stackoverflow.com/questions/12893499/schedule-an-email-in-php)

每小时后如何在我的服务器上继续加载 PHP 文件？

它会给我寄一些东西。实际上，当我访问它时，它会给我邮寄一些东西。但我希望它每隔一小时给我发邮件。所以有人应该每小时访问一次，或者我必须使用类似的 cron 作业。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T16:07:56.333

您应该使用 cronjob。首先打开你的终端并运行

```
crontab -e 
```

如果这是您第一次使用 crontab，您可能需要配置您的 crontab 设置（默认编辑器）。现在，在您的编辑器中，您必须像这样调用 php 脚本：（设置为每小时调用一次）

```
0 * * * * /path/to/php /path/to/your/script.php 
```

您也可以使用每小时的别名。

```
@hourly /path/to/php /path/to/your/script.php 
```

# jquery - 从脚本加载img时jquery加载div

> ID：13893713
> 
> 赞同：0
> 
> 时间：2012-12-15T15:57:23.720
> 
> 标签：jquery, image, load

此代码在 img src 已设置时有效，例如：

```
<div id="images">
<img src="something.jpg" />
</div>
<script type="text/javascript">
    $(document).ready(function(){
        $("div#images").hide();
        $("div#images").find("img").load(function(){
            $(this).closest("div#images").show();
        });
    });
</script> 
```

但如果 images src 正在调用脚本，则它不起作用：

```
<img src="getimage.php?img=something.jpg" /> 
```

在 getimage.php 我做 echo readfile($_GET["img"]);

我怎样才能使这项工作？

帕特里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T16:10:02.060

使用`window.onload`而不是`$(document).ready`.

`$(document).ready`当 html 准备好时 `window.onload`发生，而在图像和竞争加载后发生。

我认为您的代码的问题在于，当加载“div#images”中的任何图像时，即使尚未加载其他图像，也会调用`div`显示相同图像的函数。`div`

您可以尝试隐藏“div#images”`$(document).ready`并将其显示在`window.onload`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T16:01:52.350

如果你想操作 SRC 属性，你可以使用 JQuery 的`attr()`函数：

```
$("#myImg").attr("src","newImage.png"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T22:25:22.970

谢谢！

这就是我所做的：

```
<script type="text/javascript">
$("div#images").hide();
var $images = $('div#images img');
var loaded_images_count = 0;
$images.load(function(){
    loaded_images_count++;
    if (loaded_images_count == $images.length) {
        $("div#images").show();
    }
});
</script> 
```

# google-chrome - Chrome 扩展程序清单错误

> ID：13893714
> 
> 赞同：0
> 
> 时间：2012-12-15T15:57:26.330
> 
> 标签：google-chrome, google-chrome-extension

我收到以下错误`Manifest is not valid JSON. Line: 5, column: 25, Syntax error.`

我的**manifest.json**文件

```
{
    "name":"webrun",
    "manifest_version":0.5.1,
    "description":"Let code run in web!",
    "browser_action":{
        "default_icon":"icon.png",
        "default_title":"webrun",
        "default_popup":"index.html"
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T16:28:52.960

通常，[http://jsonlint.com/](http://jsonlint.com/)可用于验证任何 JSON 文件。`0.5.1`是 JSON 中的无效值。

[`manifest_version`必须是整数](https://developer.chrome.com/extensions/manifest.html#manifest_version)，它可以取值 1 或 2。检查[文档](https://developer.chrome.com/extensions/manifestVersion.html)。

要指定 Chrome 扩展程序的版本，请使用`"version"`键并引用值：

```
{
    "name": "webrun",
    "manifest_version": 2,
    "version": "0.5.1",
    "description": "Let code run in web!",
    "browser_action": {
        "default_icon": "icon.png",
        "default_title": "webrun",
        "default_popup": "index.html"
    }
} 
```

# c# - 无法打开数据库

> ID：13893715
> 
> 赞同：0
> 
> 时间：2012-12-15T15:57:52.233
> 
> 标签：c#, .net, sql-server, sql-server-express, sql-server-2008-express

不知道为什么这会失败......我确定这是我的错。任何帮助将不胜感激。

我得到了经典

> *无法打开登录请求的数据库“Northwind”。登录失败。用户“MyMachine\MyUserName”登录失败。*

我可以通过 SQL Server Management Studio 使用 Windows 身份验证登录。

我检查了 SQL Server Management Studio 以确保我的用户有权使用 Northwind 数据库。我还尝试了在 stackoverflow 上发布的对这个问题的大多数其他回复。

这是我的代码：

```
 SqlConnection dataConnection = new SqlConnection();
        try
        {
            SqlConnectionStringBuilder builder = new SqlConnectionStringBuilder();
            builder.DataSource = ".\\SQLExpress";
            builder.InitialCatalog = "Northwind";
            builder.IntegratedSecurity = true;
            dataConnection.ConnectionString = builder.ConnectionString;
            dataConnection.Open(); 
```

... .

我正在使用 SQL Server 2008 Express

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T16:00:46.570

1.  在您的 MS SQL Studio 中，右键单击服务器并转到属性`Security`并选择`SQL Server and Windows Authencation mode`

![在此处输入图像描述](../Images/71af7dd11561f8400638f59868bb48c6.png)

然后重新启动您的服务器。

2.  在您的服务器中。转到安全文件夹并创建一个新的登录![在此处输入图像描述](../Images/0052cde360298f561fd5c06425ae6667.png)

3.  输入用户名和密码。只需取消选中`Enforced Security`（仅用于测试目的）![在此处输入图像描述](../Images/03d4ec669c3078d58e0b2c229c10bb9b.png)

4.  转到用户映射并检查您要在新登录帐户下处理的数据库（NorthWind），然后 db_accessadmin![在此处输入图像描述](../Images/f28437b01436054addd98bd768c226ec.png)

5.  点击确定

并尝试您的代码

```
SqlConnection dataConnection = new SqlConnection();
            try
            {
                SqlConnectionStringBuilder builder = new SqlConnectionStringBuilder();
                builder.DataSource = "UNKNOWN01-PC\\SQLEXRESS2008R2";
                builder.InitialCatalog = "Northwind";
                //builder.IntegratedSecurity = true;
                builder.UserID = "testlogin";
                builder.Password = "1234";
                dataConnection.ConnectionString = builder.ConnectionString;
                dataConnection.Open();
            }
            catch  (Exception)
            {
                throw;
            } 
```

> 我怀疑这里的真正问题是，`SqlConnectionStringBuilder`但我无法解释。我只是一个初学者。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-22T15:55:04.313

我只是写这个，这样我就不会一次又一次地陷入同一个陷阱......数据库的默认名称是“NORTHWND”而不是“NORTHWIND”这个名称是由windows sql server在导入.bak文件时自动创建的从官方网站。所以这没关系

```
static string connectionString = "data source=GMDESK028\\SQLSERVER2;initial catalog=NORTHWND;Integrated Security=SSPI;"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T19:10:14.190

尝试这样做，它总是对我有用，也更简单，因为您可以通过将字符串指定为参数直接从连接字符串创建新的 SQL 连接对象，如下所示：

```
string connectionString = @"Server=server\instance;Database=Northwind;Integrated Security=True";
SqlConnection dataConnection = new SqlConnection(connectionString);
try
{
dataConnection.Open();
}
catch (sqlexception e)
{
Messagebox.Show("Error");
} 
```

# c# - 在 C# 中实现 DISPID_VALUE 并从 C++ 中调用它

> ID：13893717
> 
> 赞同：1
> 
> 时间：2012-12-15T15:58:05.357
> 
> 标签：c#, c++, com

我有一个接受 IDispatch 接口的 C++ COM 模块，并在某些情况下使用`DISPID_VALUE`. 此方法在 C++ 中运行良好。现在我有一个 C# 客户端，我想实现一个对象，该对象实现`IDispatch`并具有`DISPID`= 0( `DISPID_VALUE`) 的方法。我已经尝试过了：

```
// This will generate invalid cast
[ComVisible(true)]
class Callback1
{
    [DispId(0)]
    void Execute(object arg) {...}
}

// This also generate invalid cast
[ComVisible(true)]
[Guid("163AC24E-90DB-47D4-8580-EBB21E981FBF"),
    InterfaceType(ComInterfaceType.InterfaceIsIDispatch)]
interface ICallback2
{
    [DispId(0)]
    void Execute(object arg) ;
}
[Guid("842A7754-7CE6-4991-9E12-3FAB2367591A"),
    ClassInterface(ClassInterfaceType.None),
    ComSourceInterfaces(typeof(ICallback2))]
class Callback2 : ICallback2
{
    public void Execute(object arg) {}
} 
```

另外我不记得怎么做了，但我也写了一个成功转换但什么都不调用的代码。现在我想知道我应该如何编写一个实现并在= 0`IDispatch`时调用特定方法的类。`DISPID`

演员表例外是：

```
System.InvalidCastException was unhandled
  Message=Specified cast is not valid.
  Source=mscorlib
  StackTrace:
   at System.StubHelpers.InterfaceMarshaler.ConvertToNative(Object objSrc, IntPtr itfMT, IntPtr classMT, Int32 flags)
   at nmclientLib.INMAsyncOperation.AddCallback(Object pCallback)
   at NMTools.RecorderRegistration.BeginConnection(OperationDoneHandler h) in D:\Programming\Version 0.9\A_Project\NMTools\RecorderRegistration.cs:line 166
   at NMTools.ConnectionManager.NoRequestRegisterConnection(RecorderRegistration r, Boolean bConnect) in D:\Programming\Version 0.9\A_Project\NMTools\ConnectionManager.cs:line 396
   at NMTools.ConnectionManager.<InitializeFromDatabase>b__0(Object s, EventArgs e) in D:\Programming\Version 0.9\A_Project\NMTools\ConnectionManager.cs:line 339
   at System.Windows.Forms.Timer.OnTick(EventArgs e)
   at System.Windows.Forms.Timer.TimerNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
   at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
   at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)
   at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
   at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
   at System.Windows.Forms.Application.Run(Form mainForm)
   at TestApp1.Program.Main() in D:\Programming\Version 0.9\A_Project\TestApp1\Program.cs:line 18 
```

内部异常：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T16:48:42.887

好的，从评论中可以清楚地看出问题所在。您必须声明 [ComVisible] 接口和类**public**。CLR 尊重可访问性，当 .NET 程序也不能这样做时，COM 客户端不能使用内部类型。

一个更好的异常消息会很好，但这对于 COM 错误处理课程来说是一样的。它没有任何与可访问性约束类似的东西，因此没有比 E_NOINTERFACE 更具体的错误代码。它被翻译成 InvalidCastException。

值得注意的是，这种情况非常少见，在 .NET 应用程序中使用 [ComVisible] .NET 类没有多大意义。只需通过添加对程序集的引用来直接使用该类。您将摆脱注册要求、笨拙的错误消息和方法调用中的大量开销。模某种你无法摆脱的 COM 层，这种情况发生了。

# javascript - Web 应用程序和使用绝对布局

> ID：13893724
> 
> 赞同：0
> 
> 时间：2012-12-15T15:58:50.373
> 
> 标签：javascript, web-applications, layout, css-position

我正在开发一个网络应用程序，我希望它更像一个标准的操作系统应用程序。它在布局上与 iTunes 类似，其中我有一个顶部标题、一个菜单栏，然后​​是一个左侧栏和一个主要内容区域。目标是所有内容都保持在屏幕上的位置，并且只有主要部分滚动（因为它有一个网格/目录）。

我可以通过使用绝对定位、添加溢出、指定顶部/左侧/顶部/底部以及在适用时自动滚动来实现这一点。但是，我不确定这是最好的方法。我在这里对 SO 和网络进行了一些研究，但没有找到确凿的答案。

我知道它有效，但这是一种有效或可接受的方法吗？我的目标是让它工作，但使用适当的标准和可接受的方法工作。

我也可以使用 Javascript 框架来完成此操作（extjs、一些 jquery 库等），但我认为他们做同样的事情，他们只是在页面加载时动态地做，而不是预先指定它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T17:18:46.983

CSS 对 Web 应用程序风格的 UI 布局的支持非常糟糕。有一些很有希望的规范，比如 css3-grids 和 css3-flexbox。但是缺乏浏览器支持，尤其是css3-grid。

当我今天实现一个网络应用程序时，位置：绝对，似乎是最不糟糕的选择。它足够灵活，可以满足大多数要求。

有一篇很好的博客文章对此进行了更多讨论：http: [//blog.stevensanderson.com/2011/10/05/full-height-app-layouts-a-css-trick-to-make-it-easier/](http://blog.stevensanderson.com/2011/10/05/full-height-app-layouts-a-css-trick-to-make-it-easier/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T16:33:32.513

老实说，如果有效，则有效，如果无效，则无效。标准、最佳实践等都很棒，但只是因为它们可以帮助您实现实际目标。一旦每个人都弄清楚了正确的方法是什么，一个以“错误的方式”完成但运行起来的应用程序比最终将要构建的“正确”构建的应用程序要好得多。也就是说，听起来您的方法完全有意义。

# javascript - 带有淡入淡出的随机幻灯片

> ID：13893726
> 
> 赞同：-1
> 
> 时间：2012-12-15T15:59:02.047
> 
> 标签：javascript, jquery, slideshow, fade

我正在做一个网站，在该网站的标题中，我想要一个显示 RANDOM 图像的“幻灯片”——我已经使用 javascript。

我想让图像淡入/淡出，而不是仅仅改变它们。

除此之外，我真的很想知道是否有任何方法可以让脚本从目录本身加载图片，而不是每次上传图片时都必须手动更新脚本。

这甚至可以用 javascript、php、css 或 jquery 来完成吗？有什么选择吗？div随淡出随机改变背景？任何事物？

这是我现在正在使用的代码..它可以毫无问题地更改图片。

```
<script language="javascript">

var delay=1000 //set delay in miliseconds
var curindex=0

var randomimages=new Array()

randomimages[0]="1.jpg"
randomimages[1]="5.jpg"
randomimages[2]="2.jpg"
randomimages[3]="4.jpg"
randomimages[4]="3.jpg"
randomimages[5]="6.jpg"

var preload=new Array()

for (n=0;n<randomimages.length;n++)
{
preload[n]=new Image()
preload[n].src=randomimages[n]
}

document.write('<img name="defaultimage" src="'+randomimages[Math.floor(Math.random()*(randomimages.length))]+'">')

function rotateimage()
{

if (curindex==(tempindex=Math.floor(Math.random()*(randomimages.length)))){
curindex=curindex==0? 1 : curindex-1
}
else
curindex=tempindex

document.images.defaultimage.src=randomimages[curindex]
}

setInterval("rotateimage()",delay)

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T16:52:17.290

是的，所有这些都可以用 javascript 完成（几乎），javascript 本身无法扫描文件夹内容，因为您需要某种服务器语言，很可能您会使用 PHP 扫描文件夹内容并将它们返回给客户端。

所以基本上你需要一个 jquery ajax 函数，我强烈推荐[**post**](http://api.jquery.com/jQuery.post/)

因此，现在使用 ajax，您可以获得有关该文件夹的所有所需数据。

现在关于淡入淡出效果，你需要使用类似[**这样**](http://api.jquery.com/fadeIn/)或[**这样的东西**](http://api.jquery.com/animate/)

至于随机性，我很确定您可以弄清楚，只需获取完整的图像列表，将它们放入数组中，然后使用 javascript [**random**](http://www.w3schools.com/jsref/jsref_random.asp)函数从该数组中获取随机图像。

# yii - 带有特殊字符的 URL 参数值在视图中提供错误

> ID：13893728
> 
> 赞同：1
> 
> 时间：2012-12-15T15:59:14.997
> 
> 标签：yii, yii-components

我编辑了 Url manager 以提供 SEO 友好的 url，但是当 url 的值带有特殊字符时出现问题，例如`. or () or - or any other special character`

```
http://localhost/nbnd/search/city/delhi

In city action
var_dump($_GET);

output: array(1) { ["city"]=> string(6) "delhi" } 

but when url is with some special character
http://localhost/nbnd/search/city/north-delhi or
http://localhost/nbnd/search/city/north.delhi or
http://localhost/nbnd/search/city/(north)delhi

In city action
var_dump($_GET);

Output : array(1) { ["north-delhi"]=> string(0) "" } 
and so for other 
```

数组值的这种变化会导致错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T16:30:54.033

由于您需要各种字符，请从相关[问题/答案](https://stackoverflow.com/a/13882286/720508)更改您的规则：

```
'<controller:\w+>/<action:\w+>/<city>'=>'<controller>/<action>',
// omit the pattern \w+ from city:\w+ 
```

[文档](http://www.yiiframework.com/doc/guide/1.1/en/topics.url#using-named-parameters "http://www.yiiframework.com/doc/guide/1.1/en/topics.url#using-named-parameters")：

> 如果省略 ParamPattern，则表示参数应匹配除斜杠 / 之外的任何字符。

# scala - 当一个类在Scala中定义.map函数时，有没有办法通过继承（或其他方式）知道？

> ID：13893730
> 
> 赞同：6
> 
> 时间：2012-12-15T15:59:16.477
> 
> 标签：scala

我的问题在下面的代码中表达。我正在尝试获取一些包含 .map 函数的输入。我知道如果我调用 .map ，它会返回一个 Int 给我。

```
 // In my case, they are different representations of Ints
  // By that I mean that in the end it all boils down to Int
  val list: Seq[Int] = Seq(1,2,3,4)
  val optInt: Option[Int] = Some(1)
  // I can use a .map with a Seq, check!
  list.map {
    value => println(value)
  }
  // I can use it with an Option, check!
  optInt.map {
    value => println(value)
  }
  // Well, you're asking yourself why do I have to do it,
  // Why don't I use foreach to solve my problem. Check!
  list.foreach(println)
  optInt.foreach(println)

  // The problem is that I don't know what I'm going to get as input
  // The only thing I know is that it's "mappable" (it has the .map function)
  // And that if I were to apply .map it would return Ints to me
  // Like this:
  def printValues(genericInputThatHasMap: ???) {
    genericInputThatHasMap.map {
      value => println(value)
    }
  }

  // The point is, what do I have to do to have this functionality?
  // I'm researching right now, but I still haven't found anything.
  // That's why I'm asking it here =(

  // this works:
  def printValues(genericInputThatHasMap: Seq[Int]) {
    genericInputThatHasMap.map {
      value => println(value)
    }
  } 
```

提前致谢！干杯!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-15T17:10:17.200

首先简要介绍一下`map`和`foreach`。如果您只对对集合中的每个项目执行具有副作用的操作（例如，打印到标准输出或文件等）感兴趣，请使用`foreach`. 如果您有兴趣通过转换旧集合中的每个元素来创建新集合，请使用`map`. 当您编写`xs.map(println)`时，实际上您将打印集合的所有元素，但您也会得到一个（完全无用的）单元集合，并且还可能使您的代码的未来读者（包括您自己）感到困惑，他们希望`foreach`成为在这种情况下使用。

现在谈谈你的问题。您遇到了我认为 Scala 标准库中最丑陋的缺陷之一——名为`map`and `foreach`(and `flatMap`) 的方法在语言级别上得到了神奇的处理，而与定义它们的特定类型无关。例如，我可以这样写：

```
case class Foo(n: Int) {
  def foreach(f: Int => Unit) {
    (0 until n) foreach f
  }
} 
```

并在这样的`for`循环中使用它，仅仅是因为我已经命名了我的方法`foreach`：

```
for (i <- Foo(10)) println(i) 
```

您可以使用[结构类型](http://docs.scala-lang.org/style/types.html#structural_types)在您自己的代码中执行类似的操作：

```
def printValues(xs: { def foreach(f: (Int) => Unit): Unit }) {
  xs foreach println
} 
```

在这里，任何`xs`具有适当类型`foreach`方法的方法（例如 an`Option[Int]`或 a `List[Int]`）都将按预期编译和工作。

当您尝试使用时，结构类型会变得更加混乱`map`，`flatMap`并且在其他方​​面并不令人满意——例如，由于它们使用运行时反射，它们会带来一些难看的开销。由于这些原因，它们实际上必须[在 Scala 2.10 中显式启用以避免警告。](https://stackoverflow.com/a/13338908/334519)

正如 senia 的回答所指出的，[Scalaz 库](http://code.google.com/p/scalaz/)通过使用[*类型类*](http://en.wikipedia.org/wiki/Type_class)（如`Monad`. 但是，在这种情况下，您不会想使用`Monad`：它是一个比您需要的更强大的抽象。您将使用`Each`to`foreach`和`Functor`for `map`。例如，在 Scalaz 7 中：

```
import scalaz._, Scalaz._

def printValues[F[_]: Each](xs: F[Int]) = xs foreach println 
```

或者：

```
def incremented[F[_]: Functor](xs: F[Int]) = xs map (_ + 1) 
```

总而言之，你可以用一种标准的、惯用的、但可以说是丑陋的结构类型来做你想做的事，或者你可以使用 Scalaz 来获得一个更干净的解决方案，但代价是新的依赖。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T18:19:44.377

我对这两种方法的看法。

## 结构类型

您可以为 使用结构类型`foreach`，但对于`map`它似乎无法构造一个以跨多种类型工作。例如：

```
import collection.generic.CanBuildFrom

object StructuralMap extends App {
  type HasMapAndForeach[A] = {
//    def map[B, That](f: (A) ⇒ B)(implicit bf: CanBuildFrom[List[A], B, That]): That
    def foreach[B](f: (A) ⇒ B): Unit
  }

  def printValues(xs: HasMapAndForeach[Any]) {
    xs.foreach(println _)
  }

//  def mapValues(xs: HasMapAndForeach[Any]) {
//    xs.map(_.toString).foreach(println _)
//  }

  def forComp1(xs: HasMapAndForeach[Any]) {
    for (i <- Seq(1,2,3)) println(i)
  }

  printValues(List(1,2,3))

  printValues(Some(1))

  printValues(Seq(1,2,3))

//  mapValues(List(1,2,3))
}

scala> StructuralMap.main(new Array[String](0))
1
2
3
4
5
6
7
8
9
10 
```

请参阅`map`上面注释掉的方法，它已硬编码为隐式`List`中的类型参数。`CanBuildFrom`可能有一种方法可以通用地选择类型 - 我将把它作为一个问题留给 Scala 类型专家。我尝试用 and 代替`HasMapAndForeach`，`this.type`但`List`这些都不起作用。

关于结构类型的常见性能警告适用。

## 斯卡拉兹

因为如果你想支持结构类型是一个死胡同，`map`那么让我们看看 Travis 的 scalaz 方法，看看它是如何工作的。以下是他的方法：

```
def printValues[F[_]: Each](xs: F[Int]) = xs foreach println

def incremented[F[_]: Functor](xs: F[Int]) = xs map (_ + 1) 
```

（如果我错了，请在下面纠正我，我将其用作scalaz学习经验）

类型类`Each`和`Functor`分别用于将 的类型限制为`F`隐式可用于`Each[F]`或的类型`Functor[F]`。例如，在通话中

```
printValues(List(1,2,3)) 
```

编译器将寻找满足`Each[List]`. `Each`特点是

```
trait Each[-E[_]] {
  def each[A](e: E[A], f: A => Unit): Unit
} 
```

在`Each`对象中有一个隐含的 for `Each[TraversableOnce]`(`List`是的子类型`TraversableOnce`并且特征是逆变的)：

```
object Each {
  implicit def TraversableOnceEach[A]: Each[TraversableOnce] = new Each[TraversableOnce] {
    def each[A](e: TraversableOnce[A], f: A => Unit) = e foreach  f
  }
} 
```

请注意，“上下文绑定”语法

```
def printValues[F[_]: Each](xs: F[Int]) 
```

是简写

```
def printValues(xs: F[Int])(implicit ev: Each[F]) 
```

这两个都表示它`F`是类型类的成员`Each`。满足类型类的隐式作为`ev`参数传递给`printValues`方法。

在`printValues`or`incremented`方法内部，编译器不知道`xs`有`map`or`foreach`方法，因为类型参数`F`没有任何上限或下限。据它所知`F`并`AnyRef`满足上下文绑定（是类型类的一部分）。有`foreach`或的范围是什么`map`？ `MA`from scalaz 有两种`foreach`方法`map`：

```
trait MA[M[_], A] {
  def foreach(f: A => Unit)(implicit e: Each[M]): Unit = e.each(value, f)

  def map[B](f: A => B)(implicit t: Functor[M]): M[B] = t.fmap(value, f)
} 
```

请注意，`foreach`and`map`方法`MA`受`Each`or类型类的约束`Functor`。这些与原始方法的约束相同，因此满足约束并`MA[F, Int]`通过该`maImplicit`方法进行隐式转换：

```
trait MAsLow extends MABLow {
  implicit def maImplicit[M[_], A](a: M[A]): MA[M, A] = new MA[M, A] {
    val value = a
  }
} 
```

`F`原始方法中的类型变为 type `M`in `MA`。

传递给原始调用的隐式参数然后作为隐式参数传递给`foreach`or `map`。在 的情况下`foreach`，`each`对其隐式参数调用`e`。在上面的示例中，隐式`ev`是类型`Each[TraversableOnce]`，因为原始参数是 a `List`，所以`e`是相同的类型。 `foreach`调用哪些代表`each`on 。`e``foreach``TraversableOnce`

所以调用顺序`printValues(List(1,2,3))`是：

`new Each[TraversableOnce]`-> `printValues`-> `new MA`-> `MA.foreach`-> `Each.each`->`TraversableOnce.foreach`

正如他们所说，没有任何问题无法通过额外的间接级别解决:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-15T16:46:21.473

您可以[使用`MA`](http://scalaz.github.com/scalaz/scalaz-2.9.1-6.0.4/doc.sxr/scalaz/MA.scala.html)来自[`scalaz`](http://code.google.com/p/scalaz/)：

```
import scalaz._
import Scalaz._

def printValues[A, M[_]](ma: MA[M, A])(implicit e: Each[M]) {
  ma |>| { println _ }
}

scala> printValues(List(1, 2, 3))
1
2
3

scala> printValues(Some(1))
1 
```

# r - 在R中的特定字符串之前提取整数（不同长度）

> ID：13893734
> 
> 赞同：2
> 
> 时间：2012-12-15T15:59:55.427
> 
> 标签：r

我正在尝试从已知字符串之前的数据框列（$description）中提取不同长度的整数。例如，我希望提取出现在以下字符串“yard”之前的整数（每行代表数据框列中的一个单独条目）：

(3:18) B.Green-Ellis 左端到 NE 28 为 -1 码 (A.Ross)。

(1:07) (No Huddle Shotgun) B.Green-Ellis 右后卫到 NYG 27 4 码 (C.Blackburn)。

(14:00) B.Green-Ellis 右端在 NYG 33 处将 ob 推了 17 码 (K.Phillips)。

问题在于整数的长度可以变化（即 4 或 17），但它也可以是负数。

我真的已经尝试了我能想到的一切，并且整天都在寻找相关的线程！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T16:24:04.340

您可以使用一些简单的正则表达式`gsub`并从字符串*的末尾开始工作：*

```
temp <- c("(3:18) B.Green-Ellis left end to NE 28 for -1 yards (A.Ross).", 
          "(1:07) (No Huddle Shotgun) B.Green-Ellis right guard to NYG 27 for 4 yards (C.Blackburn).", 
          "(14:00) B.Green-Ellis right end pushed ob at NYG 33 for 17 yards (K.Phillips).")
as.numeric(gsub("^(.*)( [-1-9]+)(.*)$", "\\2", temp))
# [1] -1  4 17 
```

查看正则表达式：

*   `^.*`-- 匹配任何东西......直到......
*   ...它进入一个空格，后跟任意数量的数字`[-0-9]+`，有些可能`-`在它们之前有 a，然后是...
*   ...任何东西`.*$`，直到输入结束。

括号用于“反向引用”。您会注意到在上面的示例中有三个组，我们只对第二组的结果感兴趣，因此`\\2`我们将其替换为 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T16:12:29.967

A very simple solution would be

```
s1 <- "(3:18) B.Green-Ellis left end to NE 28 for -1 yards (A.Ross)."
ss1 <- strsplit(s1, split = " ")[[1]]
as.numeric(ss1[grep("yards", ss1) -1]) 
```

now you just have to put this in a loop and apply to every row, i.e

```
s1 <- "(3:18) B.Green-Ellis left end to NE 28 for -1 yards (A.Ross)."
s2 <- "(1:07) (No Huddle Shotgun) B.Green-Ellis right guard to NYG 27 for 4 yards  (C.Blackburn)."
s3 <- "(14:00) B.Green-Ellis right end pushed ob at NYG 33 for 17 yards (K.Phillips)."

df <- rbind(s1,s2,s3)

splits <- strsplit(df[, 1], split = " ")
sapply(splits, function(z) z[grep("yards", z) - 1]) 
```

you can also do this in one step, as @joshua suggested!

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-15T16:17:49.173

有点复杂......但对我来说假设数字前有一个空格......我无法获得正则表达式来提取数字本身......

```
# the data...
yards <- c("(3:18) B.Green-Ellis left end to NE 28 for -1 yards (A.Ross).", 
"(1:07) (No Huddle Shotgun) B.Green-Ellis right guard to NYG 27 for 4 yards (C.Blackburn).", 
"(14:00) B.Green-Ellis right end pushed ob at NYG 33 for 17 yards (K.Phillips).")

# handy function from http://r.789695.n4.nabble.com/reverse-string-td2288532.html
strReverse <- function(x) sapply(lapply(strsplit(x, NULL), rev), paste, collapse="")
# remove everything after ' yard'
y1 <- gsub(' *yard.*$', '', yard)
# reverse and remove everything after the space and reverse again
as.numeric(strReverse(gsub(' .*$','', strReverse(y1)))) 
```

# php - SELECT *, MATCH 是什么意思？

> ID：13893737
> 
> 赞同：-1
> 
> 时间：2012-12-15T15:59:59.033
> 
> 标签：php, mysql

我知道`SELECT * FROM table`，但我以前从未见过`SELECT *, MATCH`。

我的工作查询如下

```
$query = $this->dbi
        ->prepare("SELECT *, MATCH(title, content) AGAINST (?) AS score FROM tmp_comments WHERE MATCH(title, content) AGAINST(?)")
        ->execute($this->key,$this->key)
        ->results(); 
```

`,`如果我删除后它不起作用`SELECT *`

请帮帮我，我尝试了谷歌搜索，但找不到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T16:06:55.817

这里是一个例子

```
 SELECT * FROM users WHERE MATCH(username) AGAINST ('LU*' IN BOOLEAN MODE) 
```

从这里 [问题与 IE 和 setInterval() 不刷新/更新](https://stackoverflow.com/questions/3426510/problem-with-ie-and-setinterval-not-refreshing-updating)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T16:03:01.540

[http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)

就这样，没用多少谷歌搜索

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T16:03:25.317

MATCH 是一个 mysql 函数。它只是结果集中的另一列。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-15T16:06:13.363

您所说的是“从查询中的所有表中获取所有字段”（“ `*`”位）并将[全文搜索查询（MATCH 语句）](http://dev.mysql.com/doc/refman/5.5/en/fulltext-search.html)的值作为“分数”变量返回。

顺便说一句，除非您*真的*需要所有字段，否则使用`SELECT *`可能非常低效。如果可能，请通过...列出必填字段

 *```
SELECT fieldname_a, fieldname_b, MATCH(title, content) AGAINST (?) AS score ... 
```

通过这样做，您将不会不必要地传输不需要的数据。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-15T16:06:31.370

`Select *`用于选择表中的所有列。但是，在您的情况下，查询正在选择除`relevancy figure`ie 之外的所有列 using `MATCH(title, content) AGAINST (?) AS score`。

有关通过 MATCH AGAINST 查询获取相关性/分数的更多详细信息，您可以咨询[FULLTEXT Search](http://dev.mysql.com/doc/refman/5.5/en/fulltext-search.html)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-15T16:07:27.820

这基本上意味着首先打印出所需结果集的所有列，然后找到匹配项（根据给定规则）。

看看以下示例是否让您清楚：

```
mysql> SELECT id, MATCH (title,body) AGAINST ('Tutorial')
    -> FROM articles;
+----+-----------------------------------------+
| id | MATCH (title,body) AGAINST ('Tutorial') |
+----+-----------------------------------------+
|  1 |                        0.65545833110809 |
|  2 |                                       0 |
|  3 |                        0.66266459226608 |
|  4 |                                       0 |
|  5 |                                       0 |
|  6 |                                       0 |
+----+-----------------------------------------+
6 rows in set (0.00 sec) 
```*

# java - 从原始类型到对象的隐式转换

> ID：13893742
> 
> 赞同：4
> 
> 时间：2012-12-15T16:00:23.703
> 
> 标签：java

这是这段代码：

```
int[] someArray = {0, 1, 2, 3};
//System.out.println(someArray[0].toString()); int cannot be dereferenced
// creating Object element with use of primitive element fails
//Object newObject = new Object(someArray[0]); constructor Object in class java.lang.Object cannot be applied to given types;
for(Object someObject : someArray)
{
    // here int is casted to Object
    System.out.println(someObject.toString()); // prints 0, 1, 2, 3
} 
```

原始类型变量（数组的元素）不能显式转换为 Object 是如何发生的，但是在 for 循环中，这个原始元素以某种方式转换为 Object？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-15T16:25:05.717

从 1.5 开始，Java 编译器会在上下文调用时自动对原始类型进行*装箱*和*拆箱。*（也就是说，an`int`被包裹在一个`Integer`对象中，反之亦然。）这发生在原语和对象变量之间进行赋值**时。**（或将原语转换为对象类型。）例如，以下代码是有效的：

```
int i = 123;
Object o = i; 
```

`Object someInt = someArray[…]`编译器为 foreach 循环发出的隐式赋值也是如此。

`someArray[0].toString()`不起作用的原因是您没有分配`someArray[0]`给对象类型的变量或做任何其他会告诉编译器自动装箱的事情 - 尝试在原语上调用方法根本不被识别为条件之一这应该发生。

# backbone.js - 使用 Yeoman 刷新主干路由时中断

> ID：13893746
> 
> 赞同：2
> 
> 时间：2012-12-15T16:00:43.713
> 
> 标签：backbone.js, yeoman

我正在用 Backbone 和 Yeoman 构建一个应用程序。我遇到了路由问题。

我设置了以下路线：

```
'test' : testMethod,
'' : index 
```

我已经设置了 pushstate：

```
Backbone.history.start({pushState: true}); 
```

我正在使用 Chrome

如果输入`myApp.com#test`网址更改为`myApp.com/test`并`testMethod()`正确触发。

但是，如果我在浏览器将 url 从 # 更改为 / 后直接尝试 goto`myApp.com/test`或刷新，那么我会得到 404。

我正在使用内置服务器的 Yeoman 来测试页面。这会导致问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T06:03:04.640

我不确定您是否在 Yeoman 中使用 BBB。如果你是，这应该不是问题。如果您不使用 BBB，这是一个已知[问题](https://github.com/yeoman/yeoman/issues/468)。BBB 正确设置了重写规则以使用 pushstate，但 yeoman 的内置服务器似乎没有采用这一点。您可以使用自己的重写规则编辑 grunt.js 文件，以使 pushstate 正常工作。上述链接中的一些用户已成功完成此操作。

当您的应用程序上线时，您将需要通过您的服务器提供这些 url，或者编辑您的重写规则以执行相同的操作。如果是后者，并且您的应用程序依赖于 SEO，那么 SEO 将受到很大影响。

# java - jsf 应用程序中的 org.apache.jasper.JasperException

> ID：13893747
> 
> 赞同：0
> 
> 时间：2012-12-15T16:00:44.983
> 
> 标签：java, jsp, jsf, tomcat, icefaces

打开 jspx 页面时出现以下错误。

```
org.apache.jasper.JasperException: /login.jspx(9,54) Document root element "ui:composition", must match DOCTYPE root "composition".
    at org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:40)
    at org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:407)
    at org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:88)
    at org.apache.jasper.compiler.JspDocumentParser.parse(JspDocumentParser.java:214)
    at org.apache.jasper.compiler.ParserController.doParse(ParserController.java:239)
    at org.apache.jasper.compiler.ParserController.parseDirectives(ParserController.java:120)
    at org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:180)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:347)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:327)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:314)
    at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:589)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:317)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) 
```

JSF 文件内容：

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition
    template="/jsp/common/classic-template-login.jspx"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:c="http://java.sun.com/jstl/core"
        xmlns:ice="http://www.icesoft.com/icefaces/component"
        xmlns:ui="http://java.sun.com/jsf/facelets" >

    <div align="left"><ui:define name="title">OES Admin</ui:define></div>

    <ui:define name="toolbar">
    </ui:define>

    <ui:define name="pageView">

    <ui:decorate template="/jsp/common/page-include-template.jspx">

        <ui:define name="pageName" ></ui:define>

        <ui:define name="pageActions">
        </ui:define>

        <ui:define name="pageContent">
            <ui:include src="/WEB-INF/includes/login.jspx"/>
        </ui:define>        
      </ui:decorate>
    </ui:define>
</ui:composition> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:20:46.503

请注意您的术语：这是一个 facelets 页面，而不是 JSP 页面。仅仅因为您将您的 url 映射到 '*.jspx' 并没有做到这一点。您可能会认为这是一件小事，但 facelets 完全替代了 JSP 技术，并且在底层的工作方式完全不同。

我唯一能发现我自己的 facelets 页面之间的区别是我的有一个额外的命名空间声明。

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
```

# php - PHP中的覆盖方法？

> ID：13893749
> 
> 赞同：5
> 
> 时间：2012-12-15T16:00:51.617
> 
> 标签：php, oop, overriding, implements

在其他 OO 语言（如 Java）中，我们可以覆盖一个函数，可能使用关键字/注解`implements`等`@override`。

有没有办法在 PHP 中这样做？我的意思是，例如：

```
class myClass {
    public static function reImplmentThis() { //this method should be overriden by user
    }
} 
```

我希望用户实现自己的`myClass::reImplementThis()`方法。

我怎样才能在 PHP 中做到这一点？如果可能，我可以将其设为可选吗？

我的意思是，如果用户没有实现该方法，我可以指定默认方法还是可以确定该方法未定义（我可以使用 来执行此操作`method_exists`）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T16:04:37.797

```
<?php
abstract class Test
{
    abstract protected function test();

    protected function anotherTest() {

    }
}

class TestTest extends Test
{
    protected function test() {

    }
}

$test = new TestTest();
?> 
```

This way the class TestTest must override the function test.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-02T11:22:21.757

这涉及到几个 OOP 主题。

首先，简单地覆盖父类中声明的方法就像在继承类中重新声明该方法一样简单。

例如：

```
class Person {

    public function greet(string $whom) {
        echo "hello $whom!";
    }

}

class Tommy extends Person {
    public function greet(string $whom = "everyone") {
        echo "Howdy $whom! How are you?";
    }
}

$a = new Tommy();
$a->greet('World');

// outputs:
// Howdy World! How are you? 
```

如果在覆盖方法上您想重用被覆盖方法的逻辑，只需从扩展类调用父方法::

```
class Tommy
{
    public function greet(string $whom)
    {
        // now with more emphasis!!!
        echo parent::greet(strtoupper($whom)) . "!!!!";
    }
} 
```

现在`Tommy::greet()`调用`Person::greet()`，但在返回之前修改结果。

需要注意的一点是，覆盖方法必须与被覆盖的方法兼容：方法可见性不能比原始方法更具限制性（可以增加可见性），并且**所需**参数的数量和类型不能冲突与原始声明。

这是可行的，因为参数的类型与原始参数没有冲突，而且我们需要的参数比父级要*少：*

```
class Leo extends Person {
    public function greet(string $whom = "gorgeous", string $greet = "Whatsup" ) {
        echo "$greet $whom. How are you?";
    }
} 
```

但事实并非如此，因为还有额外的必需参数。这将不可能透明地切换原始类，因此会抛出一个`Warning`：

```
 class BadBob extends Person {
    public function greet(string $whom, string $greet ) {
        echo "$greet $whom. How are you?";
    }
} 
```

此外，您在问题中提到*“此方法应由用户覆盖”*。如果您需要客户端类来实际实现该方法，您有几个选择：

**抽象类和方法**

这些方法的实现是空的，扩展类**必须**实现才有效。在我们将原来的类更改`Person`为：

```
abstract class Person {

    public function greet(string $whom) {
        echo "hello $whom!";
    }

    public abstract function hide();

} 
```

*   由于现在该类包含一个抽象方法，因此也需要将其声明为抽象类。
*   现在无法`Person`直接实例化，只能在其他类中扩展。
*   现在我们所有现有的`Person`扩展类都会出错，尝试执行前面的代码会抛出致命错误。

`Person`现在扩展的有效类的示例是：

```
class Archie extends Person {

    public function hide() {
        echo "Hides behind a bush";
    }
} 
```

任何扩展的类都`Person` **必须**声明一个公共`hide()`方法。

**接口**

最后，您提到了接口。接口是实现类必须履行的契约。他们声明了一组**没有实现主体**的公共方法。

例如：

```
 interface Policeman {
    public function arrest(Person $person) : bool;

    public function help($what): bool;
} 
```

现在我们可以拥有扩展`Person`和实现的类`Policeman`：

```
class Jane extends Person implements Policeman {

    public function hide() {
        echo "Jane hides in her patrol-car";
    }

    public function arrest(Person $person): bool{
        // implement arrest method

        return false;
    }

    public function shoot($what): bool {
        // implements shoot() method

        return false;
    }
} 
```

重要的是，虽然可以只扩展**一个**类（PHP 中没有多重继承），但可以实现多个接口，并且必须满足每个接口的要求才能使类有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-10T18:31:46.547

就在这里。您可以选择通过扩展类并定义具有与基类中相同的名称、函数签名和访问说明符（公共或受保护）的方法来覆盖方法。该方法不应在基类中声明为抽象的，否则您将需要在派生类中实现它。在您的示例中，它看起来像这样：

```
class MyClass {
    public static function reImplmentThis() { //this method should be overriden by user
    }
}

class MyDerivedClass extends MyClass {
    public static function reImplmentThis() { //the method you want to call
    }
} 
```

如果用户不重写它，MyDerivedClass 仍将有一个 reImplmentThis() 方法，即从 MyClass 继承的方法。

也就是说，在从派生类调用扩展静态方法时需要非常小心，以免遇到麻烦。我鼓励您重构代码以扩展实例方法，除非您非常需要扩展静态类。如果您认为没有比扩展静态类更好的方法，请务必很好地理解[后期静态绑定。](http://php.net/manual/en/language.oop5.late-static-bindings.php)

[是的，它可以检查方法是否已实现，并使用PHP Reflection](http://php.net/manual/en/book.reflection.php)获取有关类的更多信息。

# java - 简单位置 API 此方法必须返回布尔类型的结果

> ID：13893750
> 
> 赞同：0
> 
> 时间：2012-12-15T16:01:00.360
> 
> 标签：java, blackberry, blackberry-eclipse-plugin

我有以下问题：
我使用 BB Eclipse 插件作为我的 IDE，最近我导入了新项目，以便在 BlackBerry [Simple Location API 上轻松使用位置 API](http://supportforums.blackberry.com/t5/Java-Development/Simple-Location-API/ta-p/1145951)。

我不知道为什么，但在第[593](https://github.com/blackberry/Samples-for-Java/blob/master/Simple%20Location%20API/src/rimx/location/simplelocation/SimpleLocationProvider.java#L593)行的 SimpleLocationProvider 类（这是一个注释行）中我收到错误：

*此方法必须返回布尔类型的结果*

我有点困惑，因为这是在评论返回*BlackBerryLocation*之前下载的示例和方法，而评论后的方法不返回任何内容。这是我的 Eclipse 的打印屏幕的一部分 ![在此处输入图像描述](../Images/48415f5ca04dab5a5c74cae59f4312bf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T06:53:49.070

通过删除所有包含`//#ifdef`and的行来解决问题`//#endif`。

谢谢！

# javascript - 为什么在javascript中计算时差时会得到+1小时？

> ID：13893754
> 
> 赞同：2
> 
> 时间：2012-12-15T16:01:13.887
> 
> 标签：javascript, time

我试图创建一个非常简单的时差计算。只是“结束时间 - 开始时间”。我得到了+1小时。我怀疑它与我的时区有关，因为我是 GMT+1。

无论如何，这不应该影响差异，因为开始时间和结束时间都在同一个时区。

在此处检查我正在运行的示例代码：

[http://jsfiddle.net/kaze72/Rm3f3/](http://jsfiddle.net/kaze72/Rm3f3/)

```
$(document).ready(function() {
    var tid1 =  (new Date).getTime();

    $("#tid").click(function() {
        var nu = (new Date).getTime();
        var diff = new Date(nu - tid1);
        console.log(diff.getUTCHours() + ":" +
                diff.getUTCMinutes() + ":" +
               diff.getUTCSeconds());  
        console.log(diff.toLocaleTimeString());
    });
}) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-15T16:10:50.937

您必须了解`Date`对象代表什么以及它如何存储日期。基本上，每个`Date`都是自 1970 年以来的毫秒数（所谓的*纪元时间*）的薄包装。通过从另一个日期中减去一个日期，您不会得到日期：您只会得到两者之间的毫秒数。

话虽这么说，这条线没有多大意义：

```
var diff = new Date(nu - tid1); 
```

你真正需要的是：

```
var diffMillis = nu - tid1; 
```

...然后简单地提取秒、分钟等：

```
var seconds = Math.floor(diffMillis / 1000);
var secondsPart = seconds % 60;
var minutes = Math.floor(seconds / 60);
var minutesPart = minutes % 60;
var hoursPart = Math.floor(minutes / 60);
//...
console.log(hoursPart + ":" + minutesPart + ":" + secondsPart); 
```

[工作小提琴](http://jsfiddle.net/mJZ45/)。

# git - 如何询问 git 存储库是否处于冲突阶段？

> ID：13893763
> 
> 赞同：8
> 
> 时间：2012-12-15T16:01:58.933
> 
> 标签：git, state, status

作为人类，有很多方法可以查看存储库是否存在需要解决的冲突。

但是，我正在寻找一种在脚本中检查这一点的方法。也就是说，检查存储库是否处于开始对其进行操作的良好状态，或者是否处于用户必须修复冲突的阶段。

我可以想到一种方法，例如：

```
__git_ps1 "%s" | grep MERGING > /dev/null 2>&1 && echo "In merge state" 
```

但是，我怀疑这不是推荐的方法。首先，因为`__git_ps1`从`__`C 程序员开始，我倾向于认为它不适合我使用，其次我猜测有一种更合适的方法，例如：

```
git repo-status --is-merging 
```

这将具有返回值或类似的东西。

那么，如果存储库处于合并状态，我如何询问 git（作为脚本）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-17T18:16:59.233

在大型存储库上使用`git status`或类似操作会很慢，因为它需要检查整个工作副本的状态以及索引。我们只对索引感兴趣，所以我们可以使用更快的命令来检查索引状态。

具体来说，我们可以使用`git ls-files --unmerged`. 如果没有处于冲突状态的文件，该命令将不会产生任何输出，如果有，则类似于以下内容：

```
$ git ls-files --unmerged
100644 e69de29bb2d1d6434b8b29ae775ad8c2e48c5391 1       filename
100644 4a58007052a65fbc2fc3f910f2855f45a4058e74 2       filename
100644 65b2df87f7df3aeedef04be96703e55ac19c2cfb 3       filename 
```

所以我们可以检查该文件是否产生任何输出：`[[ -z $(git ls-files --unmerged) ]]`. 如果存储库是干净的，该命令将返回零代码，如果存储库有冲突，则返回非零代码。替换`-z`为`-n`相反的行为。

您可以将以下内容添加到您的`~/.gitconfig`：

```
[alias]
    conflicts = ![[ -n $(git ls-files --unmerged) ]]
    list-conflicts = "!cd ${GIT_PREFIX:-.}; git ls-files --unmerged | cut -f2 | sort -u" 
```

这将产生如下行为：

```
$ git st
# On branch master
nothing to commit (working directory clean)

$ git conflicts && echo 'Conflicts exist' || echo 'No conflicts'
No conflicts

$ git merge other-branch
Auto-merging file
CONFLICT (content): Merge conflict in file
Automatic merge failed; fix conflicts and then commit the result.

$ git conflicts && echo 'Conflicts exist' || echo 'No conflicts'
Conflicts exist

$ git list-conflicts
file 
```

（`cd ${GIT_PREFIX:-.}`第二个别名的一部分意味着您只能获得当前目录中冲突文件的列表，而不是整个存储库。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-15T16:26:00.073

在 GNU/我会做的任何事情上

```
$ if { git status --porcelain | sed -nr '/^U.|.U|AA|DD/q1'; }
> then # no merge conflicts
> else # merge conflicts
> fi 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T16:27:13.707

这对你有用吗？

```
$ git merge origin/master
Auto-merging file
CONFLICT (content): Merge conflict in file
Automatic merge failed; fix conflicts and then commit the result.

$ git status
# On branch master
# Your branch and 'origin/master' have diverged,
# and have 1 and 1 different commit each, respectively.
#
# Unmerged paths:
#   (use "git add/rm <file>..." as appropriate to mark resolution)
#
#       both modified:      file
#
no changes added to commit (use "git add" and/or "git commit -a")

$ git status -s         
UU file 
```

您可以告诉您处于合并状态，因为它告诉您一个文件有 2 个修改并且两者都未合并。实际上，如果你有`XY file`where`X`和`Y`are 两个字母，你可能有一个需要解决的冲突。

# android - Android + Python + webView的一些问题

> ID：13893765
> 
> 赞同：0
> 
> 时间：2012-12-15T16:02:06.013
> 
> 标签：android, python, webview

**问题一：**

我正在尝试使用 python 和 WebView 制作一个 android 应用程序。

我想知道我是否可以获得一个 python 变量并将其发送到 html 并将它们保存在 javascript 中的一个变量中。

我试过这个但不起作用：

**脚本.py**

```
import android
import os, sys

ruta_del_proyecto = os.path.dirname(os.path.realpath(__file__))

droid = android.Android()
droid.webViewShow(ruta_del_proyecto + '/ui/prueba.html?ruta_del_proyecto=5')

print ruta_del_proyecto + '/ui/prueba.html?ruta_del_proyecto=5' 
```

**prueba.html**

```
<html>
    <!--urta cel: file:///sdcard/sl4a/scripts/test1/ -->
  <head>
    <title>prueba</title>
    <script>
        var droid = new Android(); 

        function getUrlVars() {
        var vars = {};
        var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
            vars[key] = value;
        });
        return vars;
        }

        var ruta_del_proyecto = getUrlVars()["ruta_del_proyecto"];

        alert (ruta_del_proyecto);
    </script>
  </head>
  <body>
  </body>
</html> 
```

**问题2：**

当我使用 "The Android Java IDE (AIDE)" 将 script.py 放入 APK，然后安装并打开时，WebView 无法打开

python 代码已执行，但 WebView 未打开

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:07:40.057

你可以做一个简单的黑客攻击。Webkit WebView 具有在页面加载后触发的“load-finished”事件，之后您可以执行 JavaScript 函数：

```
def on_load_finished(webview, frame):
    browser.execute_script('your-js-function('+yourVariable+');')

browser = webkit.WebView()
browser.connect("load-finished", on_load_finished) 
```

请记住，您可以通过使用 json 模块将字典序列化并在 JS 中反序列化它们来将字典作为参数传递！

# sql - 分组答案所需的 SQL 查询解决方案

> ID：13893766
> 
> 赞同：0
> 
> 时间：2012-12-15T16:02:21.037
> 
> 标签：sql

我不是 SQL 专家，我很难找到一种解决方案来针对以下情况进行 SQL 查询。我希望有人可以帮助我解决这个问题！

我有几个表，其中 Answer 表包含 20 个问题表中的答案。答案的值可以是 1 到 5。

这些问题有一个 types_id，它将标记相关的问题。

我需要的是对答案表的查询并获得以下信息：

将相关的问题分组（= same types_id = same teamid and = same date）并从具有相同 types_id 的答案中获取 AVG。

所以结果可能是这样的：

```
---------------------------------------------------------
|                                       types_id        |
|teamid | date                |   1  |  2  |   3   |  4 | 
---------------------------------------------------------
|    12 | 2012-12-31 00:00:00 |   2  |  4  |   3   |  5 | <- holds the average answers from the related questions ( = same types_id)
--------------------------------------------------------- 
```

作为示例，问题 1、5、9、13 和 17 与 types_is 为 1 相关。因此有 4 组相关问题。

下面是表结构示例：

`Answers`桌子：

```
-----------------------------------------------------------------------------------------------------------------------------------------------------
id teamid   userid  date                    Q1  Q2  Q3  Q4  Q5  Q6  Q7  Q8  Q9  Q10 Q11 Q12 Q13 Q14 Q15 Q16 Q17 Q18 Q19 Q20 timestamp           done
-----------------------------------------------------------------------------------------------------------------------------------------------------
1      12        1  2012-12-31 00:00:00     1   1   1   1   1   1   2   2   2   2   2   3   3   3   3   3   4   4   4   4   2012-12-11 08:30:27 0
2      12        2  2012-12-31 00:00:00     5   2   5   5   5   5   4   4   4   4   4   3   3   3   3   3   2   2   2   2   2012-12-11 08:50:08 0
3      12        3  2012-12-31 00:00:00     1   3   1   1   1   1   2   2   2   2   2   4   4   4   4   4   5   5   5   5   2012-12-11 08:20:37 0
1       9       11  2012-12-31 00:00:00     1   1   1   1   1   1   2   2   2   2   2   3   3   3   3   3   4   4   4   4   2012-12-11 08:30:27 0
2       9       12  2012-12-31 00:00:00     5   2   5   5   5   5   4   4   4   4   4   3   3   3   3   3   2   2   2   2   2012-12-11 08:50:08 0
3       9       23  2012-12-31 00:00:00     1   3   1   1   1   1   2   2   2   2   2   4   4   4   4   4   5   5   5   5   2012-12-11 08:20:37 0
    ----------------------------------------------------------------------------------------------------------------------------------------------------- 
```

`Questions`桌子

```
---------------------------------
id  question            types_id
---------------------------------
1   Question  1 text        1
2   Question  2 text        2
3   Question  3 text        3
4   Question  4 text        4
5   Question  5 text        1
6   Question  6 text        2
7   Question  7 text        3
8   Question  8 text        4
9   Question  9 text        1
10  Question 10 text        2
11  Question 11 text        3
12  Question 12 text        4
13  Question 13 text        1
14  Question 14 text        2
15  Question 15 text        3
16  Question 16 text        4
17  Question 17 text        1
18  Question 18 text        2
19  Question 19 text        3
20  Question 10 text        4
--------------------------------- 
```

任何帮助将不胜感激！

谢谢阿伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T16:59:03.470

首先，您需要取消透视问题数据。如果您不准备以这种方式存储数据，我会为此创建视图。您需要将此扩展到所有 20 个问题：

```
Create View UnpivotedAnswers As
Select
  teamid,
  date,
  1 as QuestionID,
  Q1 as Answer
From
  Answers
Union All
Select
  teamid,
  date,
  2 as QuestionID,
  Q2 as Answer
From
  Answers
Union All
Select
  teamid,
  date,
  5 as QuestionID,
  Q5 as Answer
From
  Answers 
```

一旦你有了这种格式的数据，就可以像这样得到平均值：

```
Select
  u.teamid,
  u.date,
  avg(case When q.types_id = 1 Then Answer End) as type1,
  avg(case When q.types_id = 2 Then Answer End) as type2,
  avg(case When q.types_id = 3 Then Answer End) as type3,
  avg(case When q.types_id = 4 Then Answer End) as type4,
  avg(case When q.types_id = 5 Then Answer End) as type5
From
  UnpivotedAnswers u
    Inner Join
  Questions q
    On u.QuestionID = q.id
Group By
  u.teamid,
  u.date 
```

[http://sqlfiddle.com/#!2/b1b718/1](http://sqlfiddle.com/#!2/b1b718/1)

# css - 获取所有id以“ABC”开头的节点

> ID：13893767
> 
> 赞同：0
> 
> 时间：2012-12-15T16:02:31.337
> 
> 标签：css, ruby, nokogiri

我正在尝试使用 Ruby 和 Nokogiri 抓取一个包含大约 10 列的页面，其中大多数列都非常简单，因为它们具有唯一的类名。但是，其中一些具有类 id，似乎在标准类名称后面附加了长数字字符串。

例如，比赛时间都用 来表示`.eventLine-time`，球队名称用 来`.team-name`表示，但是这个特定的有，例如：

```
<div class="eventLine-book-value" id="eventLineOpener-118079-19-1522-1">-3&nbsp;-120</div> 
```

`.eventLine-book-value`不特定于此列，因此没有用处。每场比赛的 13 位数字都是不同的，尝试如下：

```
def nodes_by_selector(filename,selector)
file = open(filename)
doc = Nokogiri::HTML(file)
doc.css(^selector)
end 
```

给我留下了错误。我已经看到 ^ 和 ~ 在其他语言中使用，但我是新手，我尝试寻找方法来获取所有数据`id=eventLineOpener-XXXX`，但无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T17:17:45.113

要获取 下的所有数据`id=eventLineOpener-XXXX`，您需要`'div[id*=eventLineOpener]'`作为选择器传递：

```
def nodes_by_selector(filename,selector)
  file = open(filename)
  doc = Nokogiri::HTML(file)
  doc.css(selector)  #doc.css('div[id*=eventLineOpener]')
end 
```

上述方法将返回一个`Nokogiri::XML::Element`对象数组，其中包含`id=eventLineOpener-XXXX`.

此外，要提取这些对象中的每一个的内容`Nokogiri::XML::Element`，您需要遍历这些对象中的每一个并在这些对象上使用该`text`方法。例如：

```
doc.css('div[id*=eventLineOpener]')[0].text 
```

# scala - 〜在scala中做什么？

> ID：13893771
> 
> 赞同：3
> 
> 时间：2012-12-15T16:03:07.433
> 
> 标签：scala, playframework

> **可能重复：**
> [理解 Scala 解析器组合器中的波浪号](https://stackoverflow.com/questions/6818390/understanding-the-tilde-in-scalas-parser-combinators)

我在这个 play2[教程](http://www.playframework.org/documentation/2.0.4/ScalaTodoList)中看到了以下内容：

```
 val task = {
    get[Long]("id") ~
    get[String]("label") map {
      case id~label => Task(id, label)
    }
  } 
```

是什么`~`意思？（在 Google 中搜索`~`没有返回任何内容）。为什么它似乎首先在一行的末尾，然后似乎连接了两个属性？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-15T16:05:15.710

Scala 语法允许方法名称使用特殊字符，例如`+`,`*`和`:`，并将它们用作中缀运算符，这有效地允许运算符重载以及创建新运算符。这可以使代码更简洁，但也很难弄清楚特定 Scala 运算符的作用，因为您无法有效地在 Google 上搜索`\:`or`++`或`~`or`::`或几乎任何 Scala 运算符方法名称。更困难的是，可能会对操作数之一应用隐式转换，因此提供操作符方法的类可能与源代码中操作数的声明类不同。

**更新**：使用[**Scalex**](http://scalex.org/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-15T19:20:42.577

Scalex，可以进行所有那些 ascii 和 unicode 字符搜索（在 Horstmann 的“不耐烦”一书中也进行了很好的讨论

[http://scalex.org/?q=~](http://scalex.org/?q=~)

[http://scalex.org/?q=%E2%8A%9B](http://scalex.org/?q=%E2%8A%9B)

[http://www.artima.com/pins1ed/book-index.html#indexanchor](http://www.artima.com/pins1ed/book-index.html#indexanchor)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T17:03:15.983

这是一个[组合解析器](http://www.artima.com/pins1ed/combinator-parsing.html)

[活生生的例子](http://scala.masgui.cloudbees.net/50cca736e4b0a825d655e7d6)

这是我在大学的编译器课程中完成的一项作业，它简化了代数表达式

```
( x + 0 ) - ( 1 * --x )
x + - ( 1 * --x )
x + - ( --x )
x + - ( x )
0 
```

建一个sql表是类似的

第一部分

```
get[Long]("id") ~
get[String]("label") 
```

解析两行

地图案例为您提供解析结果

看看[那个](https://github.com/playframework/Play20/blob/master/framework/src/anorm/src/main/scala/anorm/SqlParser.scala#L106)和[那个](https://github.com/playframework/Play20/blob/master/framework/src/anorm/src/main/scala/anorm/Anorm.scala)

我记得这是我开始学习 scala/play 时看到的第一件事。我建议你好好休息一下，阅读整本书（[scala 2nd edition 编程](http://www.artima.com/shop/programming_in_scala_2ed)），然后上这个[在线课程](https://www.coursera.org/course/progfun)

您还应该考虑电梯

# objective-c - Condensing Code

> ID：13893777
> 
> 赞同：0
> 
> 时间：2012-12-15T16:03:37.657
> 
> 标签：objective-c, arrays, loops, uiimage

I have 28 UIImage objects in my .h file

```
IBOutlet UIImageView *blackdot0, *blackdot1, *blackdot2, *blackdot3, *blackdot4, *blackdot5, *blackdot6, *blackdot7, *blackdot8, *blackdot9, *blackdot10, *blackdot11, *blackdot12, *blackdot13, *blackdot14, *blackdot15, *blackdot16, *blackdot17, *blackdot18, *blackdot19, *blackdot20, *blackdot21, *blackdot22, *blackdot23, *blackdot24, *blackdot25, *blackdot26, *blackdot27, *blackdot28; 
```

I need to call blackdotx, where x is the number of times a button is clicked, to unhide itself in my .m file

```
 if (clickcount==0) {
            blackdot0.hidden = FALSE;
        }
        else if (clickcount==1){
            blackdot1.hidden = FALSE;
        }
        else if (clickcount==2){
            blackdot2.hidden = FALSE;
        }
        else if (clickcount==3){
            blackdot3.hidden = FALSE;
        } 
```

Is there a more efficient way to accomplish this and how can I accomplish this? (Using arrays/concatenating strings with integers to call for loops?)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T16:19:44.637

这次这样做：

```
NSString* key= [NSString stringWithFormat: @"blackdot%d",clickcount];
UIImageView* imageView= [self valueForKey: key];
imageView.hidden= FALSE; 
```

但下次我建议使用 NSArray 或 C 样式数组（最好是第一个）。

**编辑**

我当然知道他应该使用数组，但他问如何做到这一点。

# jquery - Jquery Tabs - going from external page(tab) back to tabs of one page again

> ID：13893780
> 
> 赞同：0
> 
> 时间：2012-12-15T16:03:54.317
> 
> 标签：jquery, jquery-ui, tabs, jquery-ui-tabs, jquery-tabs

Here is how I have done it, when at page containing all the tabs, I can go to tab 1, tab 2 etc. But when Im going to link Testpage, I would like to go to tab1 and tab2 etc. again without going to the tabpage. I I want to have one meny that I can include in all pages.

```
<li class="active" id="information_btn"><a href="#" title="" class="not_link">tab1</a></li>
<li><a href="testpage.php" title="">Testpage</a></li>
<li id="dns_btn"><a href="#" class="not_link" title="">Tab2</a></li>

$(document).ready(function(){   
    $('li#information_btn').click(function(){
        $('ul.submenu-accounts > li').removeClass('active');
            $('div.tab_selected').removeClass('tab_selected');
        $('div.tab_content').hide();
        $('div#information_tab_content').show();
        $(this).addClass('active');
    });
    $('li#dns_btn').click(function(){
        $('ul.submenu-accounts > li').removeClass('active');
        $('div.tab_selected').removeClass('tab_selected');
        $('div.tab_content').hide();
        $('div#nameservers_tab_content').show();
        $(this).addClass('active');
    });
    $('a.not_link').click(function(event){event.preventDefault();}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T16:10:39.913

添加条件语句来检查`href`属性。然后使用`.load()`if 它是要显示到 content 的 url `div`。

# python - Change the text from a file

> ID：13893783
> 
> 赞同：-1
> 
> 时间：2012-12-15T16:04:22.480
> 
> 标签：python

Data form like this:

```
line1
text1
text2
line2
something text1

line3 
```

Making an output:

```
line1 text1 text2
line2 something text1

line3 
```

how could I make it to delete?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T16:20:51.437

可以这样删除空行：

```
with open('input') as fin, open('output', 'w') as fout:
    non_blank = (line for line in fin if line.strip())
    fout.writelines(non_blank) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T17:55:35.993

也许这可以满足您的要求：

```
import sys

i = 2
for line in sys.stdin:
    if line.startswith('line%d' % i):
        i += 1
        sys.stdout.write('\n')
    if line == '\n':
        sys.stdout.write('\n')
    else:
        sys.stdout.write(line.rstrip() + ' ')

sys.stdout.write('\n') 
```

这将贯穿输入行并收集文本，直到找到一个输入行`lineN`。这样的一行在输入中开始新的一行。此外，输入中的空白行作为输出中的空白行传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T16:17:13.767

我*认为*您的目标是删除空白，对吗？如果是这样的话：

```
inputfile = open('example.txt', 'r')
outputfile = open('examplelines.txt', 'w')

for line in inputfile:
    if line.strip('\n') != '':
        outputfile.write(line)

inputfile.close()
outputfile.close() 
```

# php - mongodb 消息传递 - 获取每个消息

> ID：13893790
> 
> 赞同：0
> 
> 时间：2012-12-15T16:05:01.463
> 
> 标签：php, mongodb

我正在通过 mongodb 开发一个简单的消息传递系统。

假设我是用户 A，有来自 B 和 C 的私人消息：在我的收件箱视图中，我希望能够显示来自每个人的最后一条消息，无论是从我还是从 B 或 C 发送的；

以 facebook 消息页面为例。这就是我想做的。

目前我有一个名为“last.message”的字段，其中存储了两个人发送的最后一条消息，但是，有没有更好的方法来实现这个？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T16:50:06.590

您可以维护 2 个集合。

第一次收藏，

```
{ sender: UserA,
  receiver: UserB,
  latest_message: {message: String, timestamp: Date}
} 
```

第二个集合存储所有用户之间的所有消息，

```
{ sender: UserA,
  receiver: UserB,
  message: String,
  timestamp: Date
} 
```

在第一个集合中，仅写入最新消息，并且第一个集合需要频繁更新。索引可以是`{receiver : 1}`和`{sender : 1}`。

第二个集合存储每条消息。这将有频繁的插入。索引可以类似于`{receiver : 1, timestamp : -1}`或`{receiver : 1, sender : 1, timestamp : -1}`取决于您的要求。

通过这种方法，您可以快速而简单地从一组朋友那里获得最新消息。只需 2 个没有复杂条件的简单查找查询。虽然有一个小缺点，但您需要维护 2 个集合。对于每条新消息，您都有 2 次写入。但在我个人看来，它很干净。

您还可以考虑使用像 Redis 这样的内存数据库来维护第一个集合。虽然它不会有那么大的区别，因为 mongo 具有内置的缓存机制并利用最大的 RAM。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T11:24:25.843

您可以将这样的模式用于消息：

```
{ sender: userA,
  receip: userB,
  participants: [userA, userB],
  date: < >,
  message: "xxx"
} 
```

如果您索引 {参与者：1，日期：-1 }，您现在可以使用索引来查找 userX 是参与者的所有记录，并且您可以在聚合框架查询中使用该索引，如下所示：

```
db.messages.aggregate( [ 
    {$match:{participants:userX}}, 
    {$sort:{date:-1}}, 
    {$unwind:"$participants"}, 
    {$match:{participants:{$ne:userX}}, 
    {$group:{_id:"$participants", message:{$first:"$message"}, date: {$first:"$date"}} } 
] ) 
```

您不需要保留额外的集合（因此没有额外的写入），并且聚合查询将使用参与者上的索引，$match 和 $sort 操作的日期，所以它应该非常快。

# routing - WebApi 可选参数 - 是必需的吗？

> ID：13893793
> 
> 赞同：8
> 
> 时间：2012-12-15T16:05:24.580
> 
> 标签：routing, asp.net-web-api

我有一个 web api 控制器（TasksController），它的 get 方法如下：

```
public IEnumerable<TimeUnitModel> Get(DateTime startDate, DateTime endDate, string projectCode = "") 
```

如果我打电话

```
/api/tasks?startDate=2012%2F12%2F08&endDate=2012%2F12%2F15 
```

返回正确的结果。

如果我打电话

```
/api/tasks?startDate=2012%2F12%2F08&endDate=2012%2F12%2F15&projectCode= 
```

然后我得到：

```
{"projectCode.String":"A value is required but was not present in the request."} 
```

知道为什么会这样吗？谢谢。

**编辑：** 这是我在路线配置中的内容：

```
config.Routes.MapHttpRoute(
            name: "tasks_get",
            routeTemplate: "api/tasks",
            defaults: new { controller = "tasks", projectCode = RouteParameter.Optional}
        ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-27T21:22:41.763

您的第一次调用： `/api/tasks?startDate=2012%2F12%2F08&endDate=2012%2F12%2F15` *是*您如何使用可选参数调用方法（即参数是可选的，因此您没有指定它）。当您在查询字符串中指定 "&projectCode=" 时，您*正在*指定参数，并且您将其指定为*null*。由于字符串可以为空，因此 api 假定您*要*发送一个空值。如果您希望该方法使用空字符串运行，只需按照您之前所做的方式调用它，而无需发送该参数。

# java - 按已设置的顺序迭代 HashMap

> ID：13893794
> 
> 赞同：17
> 
> 时间：2012-12-15T16:05:34.587
> 
> 标签：java, hashmap, iteration

我已经按特定顺序设置了 HashMap，但它以奇怪的顺序迭代！

请考虑以下代码：

```
HashMap<String, String> map = new HashMap<String, String>();
map.put("ID", "1");
map.put("Name", "the name");
map.put("Sort", "the sort");
map.put("Type", "the type");

...

for (String key : map.keySet()) {
    System.out.println(key + ": " + map.get(key));
} 
```

结果：

```
Name: the name
Sort: the sort
Type: the type
ID: 1 
```

我需要迭代它以便我放置条目。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-15T16:06:41.707

这就是`HashMap`内部运作的方式。Replace `HashMap`with [`LinkedHashMap`](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashMap.html)which 还记得插入的顺序：

```
Map<String, String> map = new LinkedHashMap<String, String>(); 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-12-15T16:07:30.483

顺序取决于`hashCode()`您插入的键中函数的结果，除非您做了一些奇怪的事情，否则它将大部分是随机的（但一致）。您正在寻找的是一个排序的地图，如[LinkedHashMap](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)

如果您对详细信息感兴趣，请在此处查看有关[哈希表](http://en.wikipedia.org/wiki/Hashmap)如何工作的一些信息。

# asp.net - ASP.NET 树视图 D

> ID：13893796
> 
> 赞同：0
> 
> 时间：2012-12-15T16:05:54.850
> 
> 标签：asp.net, css

我有这样的树视图

```
<asp:TreeView ID="MyTree" runat="server">
    <Nodes>
        <asp:TreeNode Text="Red">
            <asp:TreeNode Text="Green">
                <asp:TreeNode Text="Blue" />
            </asp:TreeNode>

            <asp:TreeNode Text="Green 1">
                <asp:TreeNode Text="Blue 1" />
            </asp:TreeNode>

        </asp:TreeNode>
    </Nodes>
</asp:TreeView> 
```

输出是

```
Red
   Green
   Green 1 
```

可以这样显示吗？

```
Red
   Green         Green 1 
```

我打算使用 css 适配器，但在级联树视图中似乎有错误。

如果有人可以帮助我使用 css 样式，那就太好了。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T18:21:53.210

难介绍，你的视觉上必须如何在TreeView中呈现项目3级。我认为您可以尝试使用[asp:Menu](http://www.asp.net/CSSAdapters/Menu.aspx)。

# python - 在 Python 中解析输入文件

> ID：13893803
> 
> 赞同：0
> 
> 时间：2012-12-15T16:06:47.737
> 
> 标签：python, file-io

我有一个包含一些数据的纯文本文件，我正在尝试使用 Python（ver 3.2）程序打开和读取该文件，并尝试将该数据加载到程序中的数据结构中。

这是我的文本文件的样子（文件名为“data.txt”）

```
NAME: Joe Smith
CLASS: Fighter
STR: 14
DEX: 7 
```

这是我的程序的样子：

```
player_name = None
player_class = None
player_STR = None
player_DEX = None
f = open("data.txt")
data = f.readlines()
for d in data:
    # parse input, assign values to variables
    print(d)
f.close() 
```

**我的问题是，如何将值分配给变量（例如在程序中设置 player_STR = 14）？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T16:11:35.160

```
player = {}
f = open("data.txt")
data = f.readlines()
for line in data:
    # parse input, assign values to variables
    key, value = line.split(":")
    player[key.strip()] = value.strip()
f.close() 
```

now the name of your player will be `player['name']`, and the same goes for all other properties in your file.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T16:12:44.023

```
import re

pattern = re.compile(r'([\w]+): ([\w\s]+)')

f = open("data.txt")
v = dict(pattern.findall(f.read()))
player_name = v.get("name")
plater_class = v.get('class')
# ...

f.close() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T16:13:40.730

The most direct way to do it is to assign the variables one at a time:

```
f = open("data.txt")              
for line in f:                       # loop over the file directly
    line = line.rstrip()             # remove the trailing newline
    if line.startswith('NAME: '):
        player_name = line[6:]
    elif line.startswith('CLASS: '):
        player_class = line[7:]
    elif line.startswith('STR: '):
        player_strength = int(line[5:])
    elif line.startswith('DEX: '):
        player_dexterity = int(line[5:])
    else:
        raise ValueError('Unknown attribute: %r' % line)
f.close() 
```

That said, most Python programmers would stored the values in a dictionary rather than in variables. The fields can be stripped (removing the line endings) and split with: `characteristic, value = data.rstrip().split(':')`. If the value should be a number instead of a string, convert it with *float()* or *int()*.

# actionscript - Actionscript3 ArgumentError：错误 #2109：

> ID：13893806
> 
> 赞同：0
> 
> 时间：2012-12-15T16:07:22.563
> 
> 标签：actionscript, platform

以 Gary Rosenzweig 的游戏为基础制作基于动作脚本 3 的基于触摸的平台游戏，直到今天一切顺利，我一直在尝试在不更改大部分动作脚本的情况下换掉地板对象等，我有以下错误.

ArgumentError：错误 #2109：在场景跳转中找不到帧标签跳转。在 flash.display::MovieClip/gotoAndStop() 在 PlatformGame/moveCharacter()[C:\Users\Michael\Desktop\platformGame\PlatformGame.as:418] 在 PlatformGame/moveEnemies()[C:\Users\Michael\Desktop \platformGame\PlatformGame.as:314] 在 PlatformGame/gameLoop()[C:\Users\Michael\Desktop\platformGame\PlatformGame.as:303]

这似乎也会导致碰撞检测问题。

代码如下。（不是我没有更改原始场景或标签名称，但它仍然显示错误）。

```
package {
    import flash.display.*;
    import flash.events.*;
    import flash.text.*;
    import flash.utils.getTimer;
    import flash.ui.Multitouch;
    import flash.ui.MultitouchInputMode;

    public class PlatformGame extends MovieClip {
        // movement constants
        static const gravity:Number = .004;

        // screen constants
        static const edgeDistance:Number = 100;

        public var rightButton:SimpleButton;

        // object arrays
        private var fixedObjects:Array;
        private var otherObjects:Array;

        // hero and enemies
        private var hero:Object;
        private var enemies:Array;

        // game state
        private var playerObjects:Array;
        private var gameScore:int;
        private var gameMode:String = "start";
        private var playerLives:int;
        private var lastTime:Number = 0;

        // start game
        public function startPlatformGame() {
            playerObjects = new Array();
            gameScore = 0;
            gameMode = "play";
            playerLives = 3;
        }

        // start level
        public function startGameLevel() {

            // create characters
            createHero();
            addEnemies();

            // examine level and note all objects
            examineLevel();

            // add listeners
            this.addEventListener(Event.ENTER_FRAME,gameLoop);
            Multitouch.inputMode = MultitouchInputMode.TOUCH_POINT;
            gamelevel["rButton"].addEventListener(TouchEvent.TOUCH_BEGIN,touchRight);
            gamelevel["rButton"].addEventListener(TouchEvent.TOUCH_END,touchRightReleased);
            gamelevel["lButton"].addEventListener(TouchEvent.TOUCH_BEGIN,touchLeft);
            gamelevel["lButton"].addEventListener(TouchEvent.TOUCH_END,touchLeftReleased);
            gamelevel["jButton"].addEventListener(TouchEvent.TOUCH_BEGIN,jump);
            gamelevel["jButton"].addEventListener(TouchEvent.TOUCH_END,jumpReleased);

            trace("hi"+gamelevel["rButton"]);

            // set game state
            gameMode = "play";
            addScore(0);
            showLives();
        }

        // start level
        public function startGameLevelHarder() {

            // create characters
            createHero();
            addHardEnemies();

            // examine level and note all objects
            examineLevel();

            // set game state
            gameMode = "play";
            addScore(0);
            showLives();
        }

        // start level
        public function startGameLevelHardest() {

            // create characters
            createHero();
            addHardestEnemies();

            // examine level and note all objects
            examineLevel();

            // set game state
            gameMode = "play";
            addScore(0);
            showLives();
        }

        // creates the hero object and sets all properties
        public function createHero() {
            hero = new Object();
            hero.mc = gamelevel.hero;
            hero.dx = 0.0;
            hero.dy = 0.0;
            hero.inAir = false;
            hero.direction = 0;
            hero.animstate = "stand";
            hero.walkAnimation = new Array(2,3,4,5,6,7,8);
            hero.animstep = 0;
            hero.jump = false;
            hero.moveLeft = false;
            hero.moveRight = false;
            hero.jumpSpeed = .8;
            hero.walkSpeed = .15;
            hero.width = 15.0;
            hero.height = 35.0;
            hero.startx = hero.mc.x;
            hero.starty = hero.mc.y;
        }

        // finds all enemies in the level and creates an object for each
        public function addEnemies() {
            enemies = new Array();
            var i:int = 1;
            while (true) {
                if (gamelevel["enemy"+i] == null) break;
                var enemy = new Object();
                enemy.mc = gamelevel["enemy"+i];
                enemy.dx = 0.0;
                enemy.dy = 0.0;
                enemy.inAir = false;
                enemy.direction = 1;
                enemy.animstate = "stand"
                enemy.walkAnimation = new Array(2,3,4,5);
                enemy.animstep = 0;
                enemy.jump = false;
                enemy.moveRight = true;
                enemy.moveLeft = false;
                enemy.jumpSpeed = 1.0;
                enemy.walkSpeed = .08;
                enemy.width = 30.0;
                enemy.height = 30.0;
                enemies.push(enemy);
                i++;
            }
        }

        // finds all enemies in the level and creates an object for each
        public function addHardEnemies() {
            enemies = new Array();
            var i:int = 1;
            while (true) {
                if (gamelevel["enemy"+i] == null) break;
                var enemy = new Object();
                enemy.mc = gamelevel["enemy"+i];
                enemy.dx = 0.0;
                enemy.dy = 0.0;
                enemy.inAir = false;
                enemy.direction = 1;
                enemy.animstate = "stand"
                enemy.walkAnimation = new Array(2,3,4,5);
                enemy.animstep = 0;
                enemy.jump = false;
                enemy.moveRight = true;
                enemy.moveLeft = false;
                enemy.jumpSpeed = 1.0;
                enemy.walkSpeed = .15;
                enemy.width = 56.0;
                enemy.height = 80.0;
                enemies.push(enemy);
                i++;
            }
        }

        // finds all enemies in the level and creates an object for each
        public function addHardestEnemies() {
            enemies = new Array();
            var i:int = 1;
            while (true) {
                if (gamelevel["enemy"+i] == null) break;
                var enemy = new Object();
                enemy.mc = gamelevel["enemy"+i];
                enemy.dx = 0.0;
                enemy.dy = 0.0;
                enemy.inAir = false;
                enemy.direction = 1;
                enemy.animstate = "stand"
                enemy.walkAnimation = new Array(2,3,4,5);
                enemy.animstep = 0;
                enemy.jump = false;
                enemy.moveRight = true;
                enemy.moveLeft = false;
                enemy.jumpSpeed = 1.0;
                enemy.walkSpeed = .25;
                enemy.width = 40.0;
                enemy.height = 40.0;
                enemies.push(enemy);
                i++;
            }
        }

        // look at all level children and note walls, floors and items
        public function examineLevel() {
            fixedObjects = new Array();
            otherObjects = new Array();
            for(var i:int=0;i<this.gamelevel.numChildren;i++) {
                var mc = this.gamelevel.getChildAt(i);

                // add floors and walls to fixedObjects
                if ((mc is Floor) || (mc is Wall) || (mc is ground1) || (mc is wall1) || (mc is ledge1) || (mc is ledge2) || (mc is rock) ||(mc is rocktip)) {
                    var floorObject:Object = new Object();
                    floorObject.mc = mc;
                    floorObject.leftside = mc.x;
                    floorObject.rightside = mc.x+mc.width;
                    floorObject.topside = mc.y;
                    floorObject.bottomside = mc.y+mc.height;
                    fixedObjects.push(floorObject);

                // add treasure, key and door to otherOjects
                } else if ((mc is Treasure) || (mc is Key) || (mc is Door) || (mc is Chest)) {
                    otherObjects.push(mc);
                }
            }
        }

        // note key presses, set hero properties
        public function touchRight(event:TouchEvent) {
            trace("touchRight");
            hero.moveRight = true;
        }

        public function touchRightReleased(event:TouchEvent) {
            hero.moveRight = false;
        }
        public function touchLeft(event:TouchEvent) {
            hero.moveLeft = true;
        }

        public function touchLeftReleased(event:TouchEvent) {
            hero.moveLeft = false;
        }

        public function jump(event:TouchEvent) {
            if (!hero.inAir) {
                    hero.jump = true;
                }
        }

        public function jumpReleased(event:TouchEvent) {
            if (!hero.inAir) {
                    hero.jump = false;
                }
        }
        // note key presses, set hero properties
        //public function keyDownFunction(event:KeyboardEvent) {
            //if (gameMode != "play") return; // don't move until in play mode

            //if (event.keyCode == 37) {
                //hero.moveLeft = true;
            //} else if (event.keyCode == 39) {
                //hero.moveRight = true;
            //} else if (event.keyCode == 32) {
                //if (!hero.inAir) {
                    //hero.jump = true;
                //}
            //}
        //}

        //public function keyUpFunction(event:KeyboardEvent) {
            //if (event.keyCode == 37) {
                //hero.moveLeft = false;
            //} else if (event.keyCode == 39) {
                //hero.moveRight = false;
            //}
        //}

        // perform all game tasks
        public function gameLoop(event:Event) {

            // get time differentce
            if (lastTime == 0) lastTime = getTimer();
            var timeDiff:int = getTimer()-lastTime;
            lastTime += timeDiff;

            // only perform tasks if in play mode
            if (gameMode == "play") {
                moveCharacter(hero,timeDiff);
                moveEnemies(timeDiff);
                checkCollisions();
                scrollWithHero();
            }
        }

        // loop through all enemies and move them
        public function moveEnemies(timeDiff:int) {
            for(var i:int=0;i<enemies.length;i++) {

                // move
                moveCharacter(enemies[i],timeDiff);

                // if hit a wall, turn around
                if (enemies[i].hitWallRight) {
                    enemies[i].moveLeft = true;
                    enemies[i].moveRight = false;
                } else if (enemies[i].hitWallLeft) {
                    enemies[i].moveLeft = false;
                    enemies[i].moveRight = true;
                }
            }
        }

        // primary function for character movement
        public function moveCharacter(char:Object,timeDiff:Number) {
            if (timeDiff < 1) return;

            // assume character pulled down by gravity
            var verticalChange:Number = char.dy*timeDiff + timeDiff*gravity;
            if (verticalChange > 15.0) verticalChange = 15.0;
            char.dy += timeDiff*gravity;

            // react to changes from key presses
            var horizontalChange = 0;
            var newAnimState:String = "stand";
            var newDirection:int = char.direction;
            if (char.moveLeft) {
                // walk left
                horizontalChange = -char.walkSpeed*timeDiff;
                newAnimState = "walk";
                newDirection = -1;
            } else if (char.moveRight) {
                // walk right
                horizontalChange = char.walkSpeed*timeDiff;
                newAnimState = "walk";
                newDirection = 1;
            }
            if (char.jump) {
                // start jump
                char.jump = false;
                char.dy = -char.jumpSpeed;
                verticalChange = -char.jumpSpeed;
                newAnimState = "jump";
            }

            // assume no wall hit, and hanging in air
            char.hitWallRight = false;
            char.hitWallLeft = false;
            char.inAir = true;

            // find new vertical position
            var newY:Number = char.mc.y + verticalChange;

            // loop through all fixed objects to see if character has landed
            for(var i:int=0;i<fixedObjects.length;i++) {
                if ((char.mc.x+char.width/2 > fixedObjects[i].leftside) && (char.mc.x-char.width/2 < fixedObjects[i].rightside)) {
                    if ((char.mc.y <= fixedObjects[i].topside) && (newY > fixedObjects[i].topside)) {
                        newY = fixedObjects[i].topside;
                        char.dy = 0;
                        char.inAir = false;
                        break;
                    }
                }
            }

            // find new horizontal position
            var newX:Number = char.mc.x + horizontalChange;

            // loop through all objects to see if character has bumped into a wall
            for(i=0;i<fixedObjects.length;i++) {
                if ((newY > fixedObjects[i].topside) && (newY-char.height < fixedObjects[i].bottomside)) {
                    if ((char.mc.x-char.width/2 >= fixedObjects[i].rightside) && (newX-char.width/2 <= fixedObjects[i].rightside)) {
                        newX = fixedObjects[i].rightside+char.width/2;
                        char.hitWallLeft = true;
                        break;
                    }
                    if ((char.mc.x+char.width/2 <= fixedObjects[i].leftside) && (newX+char.width/2 >= fixedObjects[i].leftside)) {
                        newX = fixedObjects[i].leftside-char.width/2;
                        char.hitWallRight = true;
                        break;
                    }
                }
            }

            // set position of character
            char.mc.x = newX;
            char.mc.y = newY;

            // set animation state
            if (char.inAir) {
                newAnimState = "";
            }
            char.animstate = newAnimState;

            // move along walk cycle
            if (char.animstate == "walk") {
                char.animstep += timeDiff/60;
                if (char.animstep > char.walkAnimation.length) {
                    char.animstep = 0;
                }
                char.mc.gotoAndStop(char.walkAnimation[Math.floor(char.animstep)]);

            // not walking, show stand or jump state
            } else {
                char.mc.gotoAndStop(char.animstate);
            }

            // changed directions
            if (newDirection != char.direction) {
                char.direction = newDirection;
                char.mc.scaleX = char.direction*1.35;
            }
        }

        // scroll to the right or left if needed
        public function scrollWithHero() {
            var stagePosition:Number = gamelevel.x+hero.mc.x;
            var rightEdge:Number = stage.stageWidth-edgeDistance;
            var leftEdge:Number = edgeDistance;
            if (stagePosition > rightEdge) {
                gamelevel.x -= (stagePosition-rightEdge);
                gamelevel["rButton"].x += (stagePosition-rightEdge);
                gamelevel["lButton"].x += (stagePosition-rightEdge);
                gamelevel["jButton"].x += (stagePosition-rightEdge);
                if (gamelevel.x < -(gamelevel.width-stage.stageWidth)) gamelevel.x = -(gamelevel.width-stage.stageWidth);
            }
            if (stagePosition < leftEdge) {
                gamelevel.x += (leftEdge-stagePosition);
                gamelevel["rButton"].x -= (leftEdge-stagePosition);
                gamelevel["lButton"].x -= (leftEdge-stagePosition);
                gamelevel["jButton"].x -= (leftEdge-stagePosition);
                if (gamelevel.x > 0) gamelevel.x = 0;
            }
        }

        // check collisions with enemies, items
        public function checkCollisions() {

            // enemies
            for(var i:int=enemies.length-1;i>=0;i--) {
                if (hero.mc.hitTestObject(enemies[i].mc)) {

                    // is the hero jumping down onto the enemy?
                    if (hero.inAir && (hero.dy > 0)) {
                        enemyDie(i);
                    } else {
                        heroDie();
                    }
                }
            }

            // items
            for(i=otherObjects.length-1;i>=0;i--) {
                if (hero.mc.hitTestObject(otherObjects[i])) {
                    getObject(i);
                }
            }
        }

        // remove enemy
        public function enemyDie(enemyNum:int) {
            var pb:PointBurst = new PointBurst(gamelevel,"Got Em!",enemies[enemyNum].mc.x,enemies[enemyNum].mc.y-20);
            gamelevel.removeChild(enemies[enemyNum].mc);
            enemies.splice(enemyNum,1);
        }

        // enemy got player
        public function heroDie() {
            // show dialog box
            var dialog:Dialog = new Dialog();
            dialog.x = 175;
            dialog.y = 100;
            addChild(dialog);

            if (playerLives == 0) {
                gameMode = "gameover";
                dialog.message.text = "Game Over!";
            } else {
                gameMode = "dead";
                dialog.message.text = "He Got You!";
                playerLives--;
            }

            hero.mc.gotoAndPlay("die");
        }

        // player collides with objects
        public function getObject(objectNum:int) {
            // award points for treasure
            if (otherObjects[objectNum] is Treasure) {
                var pb:PointBurst = new PointBurst(gamelevel,100,otherObjects[objectNum].x,otherObjects[objectNum].y);
                gamelevel.removeChild(otherObjects[objectNum]);
                otherObjects.splice(objectNum,1);
                addScore(100);

            // got the key, add to inventory
            } else if (otherObjects[objectNum] is Key) {
                pb = new PointBurst(gamelevel,"Got Key!" ,otherObjects[objectNum].x,otherObjects[objectNum].y);
                playerObjects.push("Key");
                gamelevel.removeChild(otherObjects[objectNum]);
                otherObjects.splice(objectNum,1);

            // hit the door, end level if hero has the key
            } else if (otherObjects[objectNum] is Door) {
                if (playerObjects.indexOf("Key") == -1) return;
                if (otherObjects[objectNum].currentFrame == 1) {
                    otherObjects[objectNum].gotoAndPlay("open");
                    levelComplete();
                }

            // got the chest, game won
            } else if (otherObjects[objectNum] is Chest) {
                otherObjects[objectNum].gotoAndStop("open");
                gameComplete();
            }

        }

        // add points to score
        public function addScore(numPoints:int) {
            gameScore += numPoints;
            scoreDisplay.text = String(gameScore);
        }

        // update player lives
        public function showLives() {
            livesDisplay.text = String(playerLives);
        }

        // level over, bring up dialog
        public function levelComplete() {
            gameMode = "done";
            var dialog:Dialog = new Dialog();
            dialog.x = 175;
            dialog.y = 100;
            addChild(dialog);
            dialog.message.text = "Level Complete!";
        }

        // game over, bring up dialog
        public function gameComplete() {
            gameMode = "gameover";
            var dialog:Dialog = new Dialog();
            dialog.x = 175;
            dialog.y = 100;
            addChild(dialog);
            dialog.message.text = "You Got the Treasure!";
        }

        // dialog button clicked
        public function clickDialogButton(event:MouseEvent) {
            removeChild(MovieClip(event.currentTarget.parent));

            // new life, restart, or go to next level
            if (gameMode == "dead") {
                // reset hero
                showLives();
                hero.mc.x = hero.startx;
                hero.mc.y = hero.starty;
                gameMode = "play";
            } else if (gameMode == "gameover") {
                cleanUp();
                gotoAndStop("start");
            } else if (gameMode == "done") {
                cleanUp();
                nextFrame();
            }

            // give stage back the keyboard focus
            stage.focus = stage;
        }           

        // clean up game
        public function cleanUp() {
            removeChild(gamelevel);
            this.removeEventListener(Event.ENTER_FRAME,gameLoop);
        }       

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T00:52:54.463

错误出现在以下行中，并且正在发生，因为引用`MovieClip`的帧没有标记为“jump”的帧：

```
char.mc.gotoAndStop(char.animstate); 
```

我的猜测是您对`MovieClip`包含您的角色的内容进行了更改，并在此过程中删除了上面代码引用的标签。

# java - 在 JRuby 中使用现有的 Java 对象

> ID：13893807
> 
> 赞同：1
> 
> 时间：2012-12-15T16:07:25.473
> 
> 标签：java, jruby

谁能告诉我，我应该如何在 JRuby 脚本中使用现有的 Java 对象？

我知道如何在 JRuby 中创建 Java 类的新实例，但就我而言，我已经有一个 Java 实例，我想在我的 JRuby 脚本中检查/修改它的一些属性。

```
//Java

public class MyClass 
{
private int size;

public int getSize() {
    return size;
}

public void setSize(int size) {
    this.size = size;
}
}

//...

MyClass myClass = new MyClass();
myClass.setSize(5);

//...

String script = "..????.."
ScriptingContainer rubyContainer = new ScriptingContainer();
rubyContainer.runScriptlet(script); 
```

我应该在脚本变量中写入什么来检查和修改 size 属性，如下所示：

```
if (myClass.getSize() > 3)
    myClass.setSize(10)
else
    myClass.setSize(0); 
```

修改后，我希望能够在我的 Java 代码中使用该属性的新值。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T16:11:48.407

直接来自[ScriptingContainer的 javadoc](http://jruby.org/apidocs/org/jruby/embed/ScriptingContainer.html)

> 第二个示例展示了如何在 Java 和 Ruby 之间共享变量。在此示例中，共享了一个局部变量“x”。[...]
> 
> 示例 2：
> 
> ```
>  ScriptingContainer container = new ScriptingContainer();
>     container.put("x", 12345);
>     container.runScriptlet("puts x.to_s(2)"); 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T18:40:34.683

问题已解决，非常感谢您的帮助！

设置“LocalVariableBehavior.PERSISTENT”以便能够在多次评估期间使用该对象非常重要。处理完脚本后，Java 代码中对象的值与 JRuby 脚本中的值相同。

```
//Java

rubyContainer = new ScriptingContainer(LocalVariableBehavior.PERSISTENT);
rubyContainer.put("myClass", myClass);

String script = 
    "if myClass.getSize() > 3 then " +
    "myClass.setSize(10) " +
    "else " +
    "myClass.setSize(0)" +
    "end";

rubyContainer.runScriptlet(script); 
```

# jquery - jQuery 动画数据视图排序器

> ID：13893811
> 
> 赞同：-2
> 
> 时间：2012-12-15T16:07:49.733
> 
> 标签：jquery, extjs4, tablesorter, dataview, animated

有谁知道 jQuery 中的 dataview 排序器类似于这个（用 extjs 构建）[http://docs.sencha.com/ext-js/4-1/#!/example/view/animated-dataview.html](http://docs.sencha.com/ext-js/4-1/#!/example/view/animated-dataview.html)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T15:32:45.883

查看[jQuery Quicksand](http://razorjack.net/quicksand/)插件。

# c - 如何替换双向链表中的元素

> ID：13893816
> 
> 赞同：0
> 
> 时间：2012-12-15T16:08:39.373
> 
> 标签：c, doubly-linked-list

我有三个相同类型的链表节点，schcurr、search 和 schtemp。但是只有搜索有链接。schcurr 和 schtemp 没有链接。我使用搜索来找到我想放置 schcurr 的地方，我使用 schtemp 只是为了帮助我保持链接。如果以下条件成立，则 schcurr 支配搜索。所以，我想用 schcurr 替换搜索。搜索已经在列表中，而 schcurr 尚未连接到任何东西。

我把代码的相关部分如下，但我被困在那里:(

PS：TC1 是 int 和 WF1 是 float 并且它们不是 NULL。

```
if(schcurr.TC1==search.TC1)
    {
       if(schcurr.WF1>search.WF1)
           {                  
               //schcurr dominates search.
               schcurr.next=seach.next;
               schcurr.prev=seach.prev; 
            }
      } 
```

现在我需要更正search.prev 的next 和search.next 的prev。我想我不能设置 search.prev.next=schcurr; 和 seach.next.prev=schcurr; 我可以吗？

任何帮助表示赞赏。

节点信息定义：

```
struct schedules{
float WF1;
int TC1;    
schedules *prev;
schedules *next;
            };
struct schedules *sch;
struct schedules *head;
struct schedules *tail;
struct schedules *schtemp;
struct schedules *search; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T17:45:18.393

如果您的双向链表是正确的，因为您可以从搜索节点（上一个和下一个）遍历两种方式，那么您可以完全按照您所说的去做。

```
search.prev.next = schcurr;
search.next.prev = schurr; 
```

编辑：但是，如果你这样做，你需要做空检查。因为`search.prev`，例如，如果你已经在你的链表的头部，它可能指向 null 。同样，如果您位于链表的末尾，`search.next`则为空，因此如果您这样做`search.next.prev = something`，您实际上是在做`null.next = something`并且违反了。

# javascript - 使用backbone.js 的主要好处是什么？

> ID：13893817
> 
> 赞同：-2
> 
> 时间：2012-12-15T16:08:48.267
> 
> 标签：javascript, model-view-controller, backbone.js

我想知道backbone.js 是否只是一个MVC 架构？与 AngularJs 等相比，使用它的主要优势是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T16:13:58.203

主干.js 是*客户端*MVC。您可以（并且可能应该）将backbone.js*与*服务器端框架一起使用。

在您希望构建相当复杂的单页应用程序的任何地方，backbone.js 都非常有用。

一旦你对backbone.js 有了感觉，我也建议你检查[backbone-marionette.js 。](http://marionettejs.com/)

# php - php while循环选择类别

> ID：13893818
> 
> 赞同：1
> 
> 时间：2012-12-15T16:08:48.687
> 
> 标签：php, for-loop, while-loop, categories

我在数据库上有 1 个表 :( SQL )

```
-- id
-- city_name
-- image 
```

我想查看他们城市内的每张图片，例如：美国有 3 张图片，加拿大有 2 张，看起来像：

```
USA
image 01
image 02
image 03

CANADA
image 01
image 02 
```

我试过这段代码，它将查看所​​有混合的记录

```
$results1 = mysql_query("SELECT * FROM gallery");
while($r = mysql_fetch_array($results1)) {

    echo $r[city_name]."<hr>";

    $city = $r[city_name];
    $results2 = mysql_query("SELECT * FROM gallery WHERE city_name='$city'");

    while($r = mysql_fetch_array($results2)){
        echo '<img border="0" src="'.$r['image'].'">';
    }
} 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T16:13:38.003

**更正您的代码：**

您正在将第一个查询的 `result set $r 覆盖到第二个 while 循环中

```
 $last='';
    $results1 = mysql_query("SELECT * FROM gallery order by city_name ASC");
    while($r = mysql_fetch_array($results1)){

    if($last!=$r['city_name']) {    
    echo $r['city_name']."<hr>";
       $last = $r['city_name']; 
    }

    $city = $r['city_name'];

    $results2 = mysql_query("SELECT * FROM gallery WHERE city_name='$city'");

        while($r1 = mysql_fetch_array($results2)){ //change this variable

                    echo $r1['image'];

        }
   } 
```

**第二种解决方案：**

```
$data = array();
$results1 = mysql_query("SELECT * FROM gallery");
while($r = mysql_fetch_array($results1)){
    $data[$r['city_name']][]=$r;
}
foreach($data as $key=>$images){
     echo $key.PHP_EOL; //city name
     foreach($images as $image){
         echo $image['id'].PHP_EOL; // each image id
         echo $image['image'].PHP_EOL; // each image for city
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T16:19:20.017

只需一个查询即可简化您的代码。

```
<?php
$cityImages = array();
$res = mysql_query("SELECT * FROM gallery");
while ($row = mysql_fetch_array($res)) {
 $cityImages[$row['city_name']][] = $row['image'];
};
?> 
```

然后你可以使用 $cityImages 数组。

# typo3 - 从 TYPO3 v4.5.0 更新到 v4.5.22

> ID：13893822
> 
> 赞同：0
> 
> 时间：2012-12-15T16:09:02.993
> 
> 标签：typo3

简短的问题：

我目前在一个启动并运行 TYPO3 v 4.5.0 的客户那里。我现在可以直接更新到 v4.5.22 吗？

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T18:14:47.100

您可以在此处找到重要的升级说明：[http ://wiki.typo3.org/Upgrade](http://wiki.typo3.org/Upgrade)

是的，在这种情况下，您无需逐个版本升级即可做到这一点。

[您应该始终在http://wiki.typo3.org](http://wiki.typo3.org)上查看每个版本的发行说明。

# jquery - Jquery 找到一个 .parents() 一个标签和 addClass

> ID：13893823
> 
> 赞同：0
> 
> 时间：2012-12-15T16:09:05.087
> 
> 标签：jquery, siblings

我一直在尝试定位`.parents()`一个标签

我正在使用此代码-

```
$('#nav li li:has(a.current)').parents('li').find('a').addClass('current'); 
```

它确实针对父母一个标签并添加正确的类，但它也将该类添加到它的所有兄弟姐妹中。

关于为什么我也有兄弟姐妹的任何提示？

[看看小提琴](http://jsfiddle.net/webthread/dDqhU/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T16:12:18.050

听起来你只想要`A`那个是父母的孩子，切换`find()`到`children()`

```
$('#nav li li:has(a.current)').parents('li').children('a').addClass('current'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T16:17:07.450

从锚点开始，找到列表周围`.current`最近的，找到 parent ，然后使用获取直接子锚点，因为将找到所有锚点，并添加类，如下所示：`UL``LI``children('a')``find()`

```
$('#nav a.current').closest('ul').parent('li').children('a').addClass('current');​ 
```

[**小提琴**](http://jsfiddle.net/dDqhU/5/)

# php - 将 PHP 转换为 Python（Rest-API 连接）

> ID：13893824
> 
> 赞同：4
> 
> 时间：2012-12-15T16:09:04.617
> 
> 标签：php, python, python-2.7, bitcoin

我正在学习 Python，作为练习，我尝试编写一个程序来在比特币市场上进行交易：[https](https://bitcurex.com) ://bitcurex.com 。这是一个 API 参考：[https](https://bitcurex.com/reading-room/API) ://bitcurex.com/reading-room/API 。有一个 PHP 客户端示例，所以我尝试将其翻译成 Python，所以我得到了：

```
import math
import time
import simplejson
import urllib
import urllib2
import hmac,hashlib

def microtime():
    return '%f %d' % math.modf(time.time())

def query( path, key, secret, data={} ):
    mt = microtime().split()
    nonce = mt[1] + mt[0][2:]
    data['nonce'] = nonce

    post_data = urllib.urlencode( data )

    sign = hmac.new( secret.decode('base64'), post_data, hashlib.sha512 ).digest()

    headers = {'Rest-Key' : key,
               'Rest-Sign': sign.encode('base64').strip(),
               'User-Agent' : 'Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)',
               'Content-type': 'application/x-www-form-urlencoded'}
    print headers

    url = 'https://bitcurex.com/api/0/' + path

    req = urllib2.Request( url, post_data, headers )
    response = urllib2.urlopen(req)

    return simplejson.loads(response.read())

print query('getFunds', '29a28e8fe234537056a8b256c0df50413f50da9c49ca61991ea8b8f108a88e09',  'y2NDxKGa/xvhtXrDP+3oscbBUFSac9+T8jzu2nRmt0vBdHbbl8NRqdmxKFr2IwwY5LAskTQZGyy2XONaNN6Jrg==') 
```

**这些 API 密钥正在工作 - 您只能使用它们进行 getFunds 查询。**

它不断返回错误“我必须登录”。我试图通过 Fiddler Proxy Debugger 查看该请求，这里有该尝试的标题：

```
POST /api/0/getFunds HTTP/1.1
Accept-Encoding: identity
Rest-Sign: Dd1WBn2T5SYTbqMMohOxr46IaLDrkelgH7AgkrrB0mT0PxKfv15vSJ3b6xNdc5PO2Yz9cDpu0u/H
WIc7bH56sQ==: 
Content-Length: 22
Rest-Key: 29a28e8fe234537056a8b256c0df50413f50da9c49ca61991ea8b8f108a88e09
Connection: close
User-Agent: Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)
Host: bitcurex.com
Content-Type: application/x-www-form-urlencoded 
```

Fiddler 向我显示一个错误：

```
Incorrectly formed request headers.
Missing colon in header #3, WIc7bH56sQ== 
```

有任何想法吗？好像我的 Rest-Sign 太长或类似的东西。我认为我的代码应该与 PHP 示例完全相同。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T17:12:54.213

这条线很可疑：

```
'Rest-Sign': sign.encode('base64').strip() 
```

您真的希望标头的值包含文字 '\n' 符号吗？这就是 encode('base64') 返回的内容---在您的示例中，此字符串：

```
'Dd1WBn2T5SYTbqMMohOxr46IaLDrkelgH7AgkrrB0mT0PxKfv15vSJ3b6xNdc5PO2Yz9cDpu0u/H\nWIc7bH56sQ==' 
```

注意`\n`中间的。我不确定，但可能删除所有`\n`标志会给你你需要的东西。

# asp.net - 允许用户更改其帐户页面配色方案的方法

> ID：13893827
> 
> 赞同：0
> 
> 时间：2012-12-15T16:09:34.090
> 
> 标签：asp.net, css, asp.net-mvc-3, database-design

好吧，这个标题可能不太清楚，我正在为一个客户建立一个网站，允许他的客户销售他的商品。我们会打电话给他的客户经销商。经销商希望能够更改网站的徽标和配色方案以匹配他们的网站。我不想去每一个 div 和 table 等并在数据库中为它创建一个字段，但同时我不能让他们完全控制 CSS 并可能破坏他们的网站的样子。处理此问题的最佳方法是什么，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T03:22:00.490

在查看了此处给出的选项并认真思考之后，我决定真正适合我的情况的最佳选择实际上是限制人们能够更改颜色并将选项存储在数据库中的项目。一开始需要做更多的工作，但可以节省未来的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T16:45:00.903

您可以使用 SASS，[http](http://sass-lang.com/) ://sass-lang.com/ 来实现此目的。

custom.scss: - 这是你给客户的，可以根据他们的需要进行定制

```
/* COLORS */
$backgroundColor: #bada55;
$h1color: #red;
$navigationBackground: #yellow;
$navigationText: #black;
$navigationHover: #red;
$navigationFont: Tahoma;
...etc..

/* WIDGETS */
$arcticleBorderRadius: 5px;
...etc...

/* OTHER CATEGORIES */ 
```

在您的 app.scss 中导入 custom.scss：

```
@import "custom.scss";

/* YOUR "PRIVATE" CSS RULES /*
body {
  background-color: $backgroundColor;
}

aside#nav {
   background-color: $navigationBackground;
   color: navigationText;

   > ul > li:hover {
        background-color: $navigationHover;
   }
}

/* etc, etc */ 
```

您还可以使用函数来变亮、变暗、反转客户可以在 custom.scss 中覆盖的基色。

“工作流程”可以是：

1.  客户覆盖他们想要的内容，以及 custom.scss 中可用的内容。
2.  您从客户端获得 custom.scss，编译一个新的 css，例如 acme-app.css。
3.  客户端使用请求属性“acme”或路径变量[http://www.myawesomesite.com/acme](http://www.myawesomesite.com/acme)在标识要加载哪个生成的 css 的 url 中调用站点。

# django - 在 django 中创建不检查数据库连接的自定义命令行

> ID：13893828
> 
> 赞同：0
> 
> 时间：2012-12-15T16:09:37.783
> 
> 标签：django

我有一个要求，有时我们的数据库引擎会出现故障，我需要通过 django 的命令行自动执行某个过程。我正在尝试编写一个代码来运行以执行一些报告并启动一些服务，我需要从 django 上下文中运行，以便我可以使用 django 的库和项目设置。

有什么办法，有没有办法开发一个可以在不检查数据库是否存在的情况下执行的命令行，或者我可以捕获异常？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T16:19:38.450

NVM，我查看了命令“shell”的源代码并看到了“requires_model_validation”参数。我在我的命令中使用它并且它通过了，这是一个例子

```
class Command(NoArgsCommand):
    args = '<No arguments>'
    help = 'This command will init the database.'
    requires_model_validation = False

    def handle(self, *args, **options):
        try:
            print 'ss'
        except Exception :
            raise CommandError('Cannot find default database settings') 
```

# powershell - Powershell从.txt文件中获取链接，抓取源码，获取字符串，导出到csv

> ID：13893833
> 
> 赞同：-1
> 
> 时间：2012-12-15T16:10:08.550
> 
> 标签：powershell, csv, foreach, get-childitem

为了，我必须：
1）从 txt 文件中获取所有链接

> [http://example1.htm](http://example1.htm)
> http://example2.htm
> http://example3.htm
> ...

2) 从每个链接获取源代码
3) 从源代码获取我的字符串
4) 将字符串导出到 csv

它适用于一个链接。例子：

```
$topic1 = "kh_header.><b>((?<=)[^<]+(?=</b>))"
$topic2 = "<b>Numer ogłoszenia:\s([^;]+(?=;))"
 Select-String -Path strona1.htm -pattern $topic1 | foreach-object {
 $_.line -match $topic1 > $nul
 $out1 = $matches[1]
 }
 Select-String -Path strona1.htm -pattern $topic2 | foreach-object {
 $_.line -match $topic2 > $nul
 $out2 = $matches[1]
 }
echo $out1';'$out2';' | Set-content out.csv -force 
```

, 但我无法通过 txt 文件中的许多链接获得它。我试试看：

```
$topic = "kh_header.><b>((?<=)[^<]+(?=</b>))"
$topic2 = "<b>Numer ogłoszenia:\s([^;]+(?=;))"
 $folder = Get-ChildItem e:\sk\html
  ForEach ($htmfile in $folder){
   If ($_.extension -eq ".htm"){
    $htmfile = ForEach-Object  {
            $WC = New-Object net.webclient
            $HTMLCode = $WC.Downloadstring($_.fullname)
            }
       Select-String -Path $HTMLCode -pattern $topic | foreach-object {
       $_.line -match $topic > $nul
       $out1 = $matches[1]
       }    
       Select-String -Path $HTMLCode -pattern $topic2 | foreach-object {
       $_.line -match $topic2 > $nul
       $out2 = $matches[1]
       }      
       echo $out1';'$out2';' | Set-content out.csv -force     
    }
} 
```

我怎么才能得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T19:55:19.050

默认情况`Select-String`下，它只会在任何特定行上找到第一个匹配项。您可以使用该`AllMatches`参数来修复它，例如：

```
foo.txt contains: "static void Main(string[] args)"

Select-String foo.txt -pattern '\W([sS]..)' -AllMatches | 
    Foreach {$_.Matches} |
    Foreach {$_.Groups[1].Value} 
```

此外，Select-String 是面向行的，因此它不会跨行找到模式匹配。为了找到这些，您需要将文件作为字符串读取，例如：

```
$text = [io.file]::readalltext("$pwd\foo.txt") 
```

然后使用一些特殊的正则表达式指令，例如：

```
$text | Select-String -pattern '(?si)\W([sS]..)' -AllMatches |
        Foreach {$_.Matches} |
        Foreach {$_.Groups[1].Value} 
```

# c# - BitmapImage 缺少 BeginInit() 和 EndInit() 函数？

> ID：13893837
> 
> 赞同：2
> 
> 时间：2012-12-15T16:10:32.027
> 
> 标签：c#, xaml, windows-phone

正如我所发现的，我似乎无法使用上述功能。我正在导入 BitmapImage 类

```
 using System.Windows.Media.Imaging; 
```

但是在以下代码中：

```
public static void loadCardImage(Card card, ref Image image)
{
    BitmapImage src = new BitmapImage();

    src.BeginInit(); <--Cannot find this function
    src.UriSource = new Uri(card.imageLink, UriKind.Relative); <-- this is fine

    [..NotFinishedCoding..]
} 
```

我在 src.BeginInit() 函数上收到解析器错误和构建错误。我似乎也缺少 EndInit() 函数以及该类中的更多函数。我已经查阅了文档，看看我是否搞砸了导入或引用了其他类，但据我所知，我指的是正确的类。（悬停在它上面显示它指的是 System.Windows.Media.Imaging.BitmapImage 类）

关于可能发生的事情有什么想法吗？非常感谢任何帮助，如果需要更多信息，请告诉我！

参考文档：http: [//msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapimage.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapimage.aspx)

Windows Phone OS 设置为 8（我假设它使用 .NET 4.5）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T16:40:17.460

这是[Windows Phone 版本的 BitmapImage](http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.windows.media.imaging.bitmapimage%28v=vs.105%29.aspx)。查找 Windows Phone 版本的类等可能有点令人困惑 - 我通常从[dev.windowsphone.com](http://dev.windowsphone.com)进行搜索并将结果限制为“库”。

# jenkins - 詹金斯 - 自定义工作属性？

> ID：13893839
> 
> 赞同：4
> 
> 时间：2012-12-15T16:10:45.607
> 
> 标签：jenkins, jenkins-plugins

我想在我的工作中添加一些新的工作属性，并在 Jenkins 列表视图中显示这些属性的值。我用谷歌搜索并查看了 Jenkins 插件列表，但找不到任何提示。有没有插件可以做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T02:19:15.763

这取决于“作业属性”和“列表视图”的含义。

如果您指的是列出所有工作的仪表板，您可以通过安装 Extra Columns 插件并在工作描述中设置您的信息来管理它。

# java - 尝试打印数组时Java中的NullPointerException

> ID：13893842
> 
> 赞同：2
> 
> 时间：2012-12-15T16:11:12.087
> 
> 标签：java, arrays, exception, nullpointerexception

问题是我正在尝试打印先前在构造函数中创建的矩阵，但它似乎是空的。

这是构造函数的代码：

```
public Matrix(int row_col){
    int [][] randomMatrix = new int[row_col][row_col];
    Random rand = new Random();
    if (row_col > 0 && row_col < ROW_LIMIT && row_col < COL_LIMIT)
    for (int i = 0; i < randomMatrix.length; i++) 
     for (int j = 0; j < randomMatrix[0].length; j++)
         randomMatrix[i][j] = rand.nextInt(51);
} 
```

方法打印的代码：

```
public void print(){
    int row = randomMatrix.length;
    int col = randomMatrix[0].length;
    for(int i=0 ; i < row ; i++)
     for(int j=0 ; j < col ; j++)
        System.out.print(randomMatrix[i][j]);
} 
```

问候！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T16:13:41.853

代替

```
int [][] randomMatrix = new int[row_col][row_col]; 
```

经过

```
this.randomMatrix = new int[row_col][row_col]; 
```

构造函数初始化并填充一个*局部变量*，而不是初始化和填充方法使用的*实例字段*`print()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T16:14:06.830

看起来 randomMatrix 是直接在构造函数的范围内定义的，而不是存储在类的字段中。

如果您已经有一个 randomMatrix 作为字段，请删除构造方法的第一行中的 int[][]，这样您就可以引用该字段而不是声明一个新变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T16:14:06.210

这是因为您已经`randomMatrix`在构造函数中声明并初始化了数组，并且一旦执行构造函数的代码，您的`randomMatrix`数组就会超出`print`方法的范围。

所以当你尝试在`print`方法中访问它时没有这样的`randomMatrix`对象，所以你得到`NullPointerException`

# javascript - charIDToTypeID Photoshop Javascript

> ID：13893844
> 
> 赞同：8
> 
> 时间：2012-12-15T16:11:23.837
> 
> 标签：javascript, photoshop

好的，我知道 charIDToTypeID 将字符串转换为 photoshop 可以实际使用的 ID，但我看到的那些我找不到参考：

```
 var idLyr = charIDToTypeID( "Lyr " );
 var idOrdn = charIDToTypeID( "Ordn" );
 var idTrgt = charIDToTypeID( "Trgt" ); 
```

什么是“Lyr”、“Ordn”和“Trgt” - 我用谷歌搜索找到参考，但它们没有出现在 adobe 参考信息中：[http ://cssdk.host.adobe.com/sdk/1.0/docs/网页帮助/app_notes/photoshop.htm](http://cssdk.host.adobe.com/sdk/1.0/docs/WebHelp/app_notes/photoshop.htm)

我试图找出这个人是如何在那里编写代码的，我想知道当没有在线引用它们时，他们如何选择使用这些 ID。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-16T04:17:48.357

这段代码本身不是“编写的”，而是由[Script Listener 插件自动生成的。](https://helpx.adobe.com/photoshop/kb/downloadable-plugins-and-content.html#ScriptingListenerplugin)

并非 Photoshop API 的所有属性和方法都在对象模型中可用，但它们通常仍然可以访问。要使用这些未记录的功能，您可以安装脚本侦听器插件并在 Photoshop 中执行操作。脚本侦听器将生成反映您执行的操作的代码。

例如，Brush 对象没有明确的方法或属性，但使用脚本侦听器，您可以打开 Photoshop，手动调整画笔大小属性，脚本侦听器将自动生成工作代码，尽管代码很隐晦。您执行的任何操作都将被脚本侦听器记录下来，因此请注意不要执行太多操作，否则您将很难将结果缩小到那些特定的方法。

无论如何，我倾向于将它用作最后的手段，但是每当您在 Photoshop API 中处理未记录的方法时，脚本侦听器就会成为必要的恶魔。不要仅仅因为没有记录就认为方法或属性不可用。希望有帮助。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-16T10:32:54.923

这是我通常引用 charIDToTypeID 的网站：

[http://web.archive.org/web/20140121053819/http://www.pcpix.com/Photoshop/char.htm](http://web.archive.org/web/20140121053819/http://www.pcpix.com/Photoshop/char.htm)

（注意链接内容来自2013年）

使用它，您可以从 ScriptListener 插件中找到字符串表示形式。在你的情况下，这就是他们的意思......

```
phClassLayer -> 1283027488 -> "Lyr "  layer
phTypeOrdinal -> 1332896878 -> "Ordn"  ordinal
phEnumTarget -> 1416783732 -> "Trgt"  targetEnum 
```

# c# - 接收 XAML 按钮名称

> ID：13893863
> 
> 赞同：0
> 
> 时间：2012-12-15T16:13:17.157
> 
> 标签：c#, xaml, windows-8, textbox, parameter-passing

我在一个页面上有大约 100 个文本框，每个文本框在数组中都有自己对应的值，每个文本框都有一个方法，当文本框中的值发生更改时调用该方法，并更新数组的相应元素，以反映它已更改为的值。（理论上）

但是，有没有一种方法可以调整以下方法，而不是将其写出 100 次，更改名称**"_8_8_TextChanged"**，并手动更改它更改的值，然后调用 1 个方法由所有文本框，该方法识别哪个文本框调用它，并更新数组中的相关元素？

*该方法在下面定义，功能在“Solver.xaml.cs”页面上。*

```
private void _8_8_TextChanged(object sender, TextChangedEventArgs e)
    {
        int number = int.Parse(_8_8.Text);
        if ((number >= 1) && (number <= 9))
        {
            for (int i = 0; i <= 8; i++)
            {
                if (i == (number - 1))
                {
                    content[8, 8, i] = true;
                }
                else
                {
                    content[8, 8, i] = false;
                }
            }
        }
    } 
```

*XAML 文本框本身在下面定义，并在“Solver.xaml”页面上提供，为简单起见删除了其样式元素。*

```
<TextBox x:Name="_8_8" TextChanged="_8_8_TextChanged"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T16:52:30.867

我真的希望你有充分的理由使用这么多的文本框。在任何情况下，您都可以对所有 TextChange 事件使用相同的事件处理程序，如下所示。

所有文本框都将设置为使用相同的处理程序：

```
<TextBox x:Name="_8_8" TextChanged="_x_y_TextChanged"/>
<TextBox x:Name="_8_9" TextChanged="_x_y_TextChanged"/> 
```

然后，您可以根据发送文本框更新您的数组：

```
private void _x_y_TextChanged(object sender, TextChangedEventArgs e)
    {
        TextBox tb = (TextBox)sender;

        // use the Name of the textbox to determine x, y value
        string[] tmp_x_y = tb.Name.Split("_");
        // you may have to adjust these indices based on how Split actually
        // does its work.
        int x = int.Parse(tmp_x_y[0]);
        int y = int.Parse(tmp_x_y[1]);

        int number = int.Parse(tb.Text);
        if ((number >= 1) && (number <= 9))
        {
            for (int i = 0; i <= 8; i++)
            {
                if (i == (number - 1))
                {
                    content[x, y, i] = true;
                }
                else
                {
                    content[x, y, i] = false;
                }
            }
        }
    } 
```

我实际上并没有编译上面的代码，但它应该给你一个很好的起点。

# java - Java：抽象类中的静态方法调用抽象非静态方法？

> ID：13893864
> 
> 赞同：2
> 
> 时间：2012-12-15T16:13:24.333
> 
> 标签：java, methods, static, instance

我有一个抽象类 A

我有大约 10 个类扩展 A

A 类有一个或两个静态方法，它们是静态的是有道理的，因为它们属于 10 个类，而不是它们的实例。例如，一种静态方法称为getAllFromX，它从X 中获取类的所有实例，不管它是什么，它可能是一个服务器，实际上它是，但没关系。因此，您会发现这些方法是静态的并且不绑定到实例是有道理的。

同时A类有一个非静态抽象方法，每个子类都覆盖这个方法（只返回一个字符串）。我不能让它成为静态的，因为静态方法不能被覆盖（...）。

总结一下：抽象类 A 有一个静态方法和一个抽象非静态方法，它被子类覆盖。我不能将第二种方法设为静态，因为它必须被覆盖。另一方面，我可以使第一个方法成为非静态的，但它会非常丑陋和糟糕的编程风格，所以我将保持这种方式。

捕获？类 A 中的静态方法必须获取非静态方法返回的值（对于继承静态方法的子类，当然）。

使用反射来完成这项工作是“最简单”的方法吗？我是说……真的吗？

例如，我得到了静态方法所在的类：

```
Class<?> cl=new Object(){}.getClass().getEnclosingClass(); (a hack I found here, thank god...) 
```

然后我使用 getConstructor 来构造这个子类的对象。

然后我使用这个对象来调用非静态方法。

真的？？难道不能更容易吗？我的意思是，如果我想在概念上正确地设计我的程序......

来自 C# 我不喜欢那样（以及类型擦除）。这很丑陋。可行但丑陋。和一个很大的绊脚石，至少对于初学者来说。编辑：再次阅读后，我会添加：/rant end。对不起，但我真的很在乎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T16:34:52.293

我认为您实际上需要的是以下内容：

```
public class A {
    public static Set<A> getAllFromX() {
        ...
    }
}

public class B extends A {
    public static Set<B> getAllFromX() {
        ...
    }
}

public class C extends A {
    public static Set<C> getAllFromX() {
        ...
    }
} 
```

（就像枚举中的`valueOf()`and`values()`方法一样，在每个 Enum 子类中都会重新定义，因为静态方法不能被继承）

在这种情况下，每个类都有自己的静态方法来做任何事情。但是您的问题没有多大意义，因为它说：

> 类 A 中的静态方法必须获取非静态方法返回的值（对于继承静态方法的子类，当然）。

事实上，静态方法**不会**被子类继承。静态方法永远不会被继承。如果`foo()`在 A 中定义一个静态方法，并调用

```
B.foo(); 
```

编译器不会拒绝编译它，而是将其转换为

```
A.foo(); 
```

所以，没有办法做`foo()`依赖于`foo()`被调用的类的事情，因为它总是 A。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T16:22:09.097

您始终可以使用反射来调用使用类名的方法，例如

```
 Object objectX = ClassX.class.newInstance();
    //get your method passing argument types as second param
    Method method = ClassX.class.getDeclaredMethod("methodX", null);
    //invoke your method passing arguments as second param
    method.invoke(objectX, null); 
```

由于您提到您的静态方法不使用任何实例，但您使用反射来获取实例，因此我真的不确定，它是否符合您的要求。

**我认为将其作为抽象类中的实现方法（非静态）是一个更好的选择。**这样你就实现了一次，但它在你所有的 10 个扩展类中都可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T16:42:35.417

我认为您的问题是更大的设计之一。一个不同的对象应该负责检索 A 或其子类的实例。如您所见，依靠静态方法被子类替换并不能很好地工作。在不了解问题域的情况下，很难给出一个好的答案，但我会考虑类似于抽象工厂模式的东西。

概括地说：定义一个抽象类，AFactory，使用方法 Collection getInstances()。为 A 的每个具体子类扩展 AFactory ，您需要在重写的 getInstances() 方法中适当地返回并实现该逻辑。您还可以在抽象 AFactory 上提供静态方法 getFactory(Class)，以在运行时获取适当的工厂子类型。

# java - 我可以以人类可读的方式将一组对象保存在文件中吗？

> ID：13893877
> 
> 赞同：-1
> 
> 时间：2012-12-15T16:14:27.833
> 
> 标签：java, arrays, file

我想创建一个对象数组，每个对象由一些字符串组成，我想以人类可读的方式将这些对象保存在一个文件中，是否有一种方法可以一次写入和读取整个数组，或者我必须保存它们逐个元素？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T17:14:35.613

人类可读的方式到底是什么意思？如果您觉得 json 数据对您来说足够好，请序列化数组并将其打印到文件中。

理想情况下，逐个元素会更好，因为每个对象都是独立的，因为我看不到为所有这些对象应用通用逻辑的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T17:18:52.087

听起来您要问的主要问题是“我可以一次写...整个数组吗”。

当然：

```
String[] things = { "ABC", "XYZ" };
System.out.println(Arrays.toString(things)); 
```

我相信你在问这个问题，因为当你尝试这个时：

```
System.out.println(things) 
```

你会得到类似的东西：

```
[Ljava.lang.String;@35a8767 
```

您在这里看到的是数组引用本身。你想要的是一个像上面这样漂亮的印刷版。这些漂亮的输出来自该函数的自定义实现，该`toString`函数存在于 Java 中的所有对象上，来自`Object`对象本身。由于数组是“原始”而不是对象，因此它没有`toString`功能。因此，该对象为此目的`Arrays`提供了一个实用静态函数。`toString`

另一种解决方案是使用 a`List`而不是数组。`List`是一个对象并且有一个漂亮的`toString`功能。

```
List<String> thingList = Arrays.asList(things);
System.out.println(thingList); 
```

现在，如果你把它写到一个文件中并想把它读回来（就像你提到的那样），你将进入解析的世界。如果您打算将对象写入文件并将其读回，则绝对应该研究现有的工具来将对象序列化和反序列化为 XML 或 JSON（它们在某种程度上是人类可读的序列化格式）。

# css - 将 CSS 链接到子文件夹中的图像

> ID：13893878
> 
> 赞同：3
> 
> 时间：2012-12-15T16:14:30.853
> 
> 标签：css, url, directory-structure

我想不出在我的 CSS 文件中使用的正确路径

```
 html { background-image: url('backgroundImage.jpg'); } 
```

我的文件夹结构如下：

`..\MySite\ <!-- HTML files here -->`

`..\MySite\css\`

`..\MySite\js\`

`..\MySite\images\ <!-- backgroundImage.jpg here -->`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T16:15:47.610

```
 html{ background-image: url('../images/backgroundImage.jpg'); } 
```

`../`告诉您的 CSS 文件返回一个目录并从该文件夹（在本例中为您的根文件夹）中搜索图像

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T16:15:38.823

采用`html{ background-image: url('/images/backgroundImage.jpg'); }`

开始`/`意味着您从站点的根目录开始

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T16:16:42.357

很琐碎的问题。如果您使用的是内联样式（HTML 文件中的样式），那么以下内容就足够了。

```
html { 
    background-image: url('images/backgroundImage.jpg'); 
} 
```

但是，如果您从`css`文件夹中引用图像，则必须先使用`..`遍历才能到达父文件夹。

```
html { 
    background-image: url('../images/backgroundImage.jpg'); 
} 
```

# android - 最后一个元素在整个数组列表中被覆盖？

> ID：13893880
> 
> 赞同：0
> 
> 时间：2012-12-15T16:14:39.703
> 
> 标签：android, listview, collections

我正在整个数组列表中复制最后一个元素。这里 MyContact 包含一个 ID(int)、name(String)、Number(String, primary key)。

例如。我添加了 name = John，number = 99999 并提交。name = Jonny, number = 99998 并提交。

在数据库中我可以正确地看到它们（条目是正确的）

现在我希望他们在列表视图中看到

```
-------------
  John 
  99999
-------------
  Jonny
  99998
------------- 
```

但实际结果是

```
-------------
  Jonny
  99998
-------------
  Jonny
  99998
------------- 
```

来自 DataBaseHelper.java 的代码

// 获取所有联系人

```
public List<MyContact> getAllContacts() {
        Log.d(ContactManagerUtil.TAG_ENTER, ContactManagerUtil.getInstance()
                .getMehtodName());
    List<MyContact> contactList = new ArrayList<MyContact>();
    // Select All Query
    String selectQuery = "SELECT  * FROM " + TABLE_CONTACTS;
    db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);
    cursor.moveToFirst();

    while (!cursor.isAfterLast()) {
        MyContact contact = MyContact.getInstance();
        if (cursor.getString(0) != null)
            contact.setId(Integer.parseInt(cursor.getString(0)));
        contact.setName(cursor.getString(1));
        contact.setNumber(cursor.getString(2));
        // Adding contact to list
        contactList.add(contact);
        contact = null;
        cursor.moveToNext();
    }

    Log.d(ContactManagerUtil.TAG_EXIT, contactList.toString());
    Log.d(ContactManagerUtil.TAG_EXIT, ContactManagerUtil.getInstance()
            .getMehtodName());
    cursor.close();
    db.close();

    // return contact list
    return contactList;
} 
```

从下面我调用 getAllContactMethod。公共类 ContactView 扩展 ListActivity {

```
DataBaseHelper db;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Log.d("@gaurav","IN ContactView.onCreate");
    db = new DataBaseHelper(getApplicationContext());
    ArrayAdapter<MyContact> adapter = new MyContactAdapter(this,
            db.getAllContacts());
    setListAdapter(adapter);
    Log.d("@gaurav","OUT ContactView.onCreate");
}
} 
```

适配器如下

```
public class MyContactAdapter extends ArrayAdapter<MyContact> {

    public MyContactAdapter(Activity context, List<MyContact> obj) {
        super(context, R.layout.layout_contact_view, obj);
        contactlist = obj;
        this.context = context;
    }

    private List<MyContact> contactlist;
    private Activity context;

    static class ViewHolder {
        protected QuickContactBadge contactbadge;
        protected TextView contactname;
        protected TextView contactnumber;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        ViewHolder viewHolder;
        if (convertView == null) {
            LayoutInflater inflator = context.getLayoutInflater();
            convertView = inflator.inflate(R.layout.layout_contact_view, null);
            viewHolder = new ViewHolder();
            viewHolder.contactname = (TextView) convertView
                    .findViewById(R.id.contactname);
            viewHolder.contactnumber = (TextView) convertView
                    .findViewById(R.id.contactnumber);
            viewHolder.contactbadge = (QuickContactBadge) convertView.findViewById(R.id.contactBadge);
            convertView.setTag(viewHolder);
        } else {
            viewHolder = (ViewHolder) convertView.getTag();
        }

        if(contactlist.get(position) == null){
            Log.d(ContactManagerUtil.TAG_ENTER, "In adapter getView, found: contact null");
            return null;
        }
        viewHolder.contactname.setText(contactlist.get(position).getName());
        viewHolder.contactnumber.setText(contactlist.get(position).getNumber());
        viewHolder.contactbadge.setFocusable(true);
        return convertView;
    }
} 
```

MyContact.java

```
public static MyContact getInstance() {
        if (contact == null) {
            contact = new MyContact();
        }
        return contact;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T16:17:40.240

你的`MyContact`类看起来是一个单例（例如，`getInstance()`方法）：

```
MyContact contact = MyContact.getInstance();
...
contactList.add(contact); // Always the same instance--sad panda. 
```

列表中的每个引用都指向同一个实例，其中包含数据库中最后一项的值。您需要为每个列表项创建一个新实例。

# jquery - 附加到（这个）类

> ID：13893883
> 
> 赞同：0
> 
> 时间：2012-12-15T16:15:33.307
> 
> 标签：jquery, html, html-lists

所以我有这样的代码：

```
$(".list").append('<li>hi</li>'); 
```

这是一个工作示例：http: [//jsfiddle.net/pXaSC](http://jsfiddle.net/pXaSC/)

当您单击该`+`按钮时，它会将 a 添加`button`到`ul`.

如果您复制并粘贴`.buttons` `div`（复制按钮和列表）并单击其中`+`任何一个上的按钮，它将在它们上附加一个列表项（[http://jsfiddle.net/pXaSC/1/](http://jsfiddle.net/pXaSC/1/)）。

然而，我想要实现的是让两个列表独立工作。

我知道我需要以某种方式使用`(this)`and`.parent()`选择器，但我就是想不通。**我不想使用`id`'s。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T16:20:01.827

在按钮单击的事件处理程序中，`this`对应于按钮。因此，您需要通过 DOM 树导航到所需的位置`<ul class="list">`：

```
$(this).parent().find('ul.list').append(...); 
```

上一层到父级（封闭`<div>`），然后找到该`<ul>`div 的内部。

[http://jsfiddle.net/pXaSC/4/](http://jsfiddle.net/pXaSC/4/)

# php - PHP include 和 SSI include，搜索引擎读什么？

> ID：13893886
> 
> 赞同：-2
> 
> 时间：2012-12-15T16:15:49.190
> 
> 标签：php, include, search-engine, ssi

我将动态包含`<head>`我的代码的一部分，以便我可以从一个文件中更改多个页面。

我的“include.php”看起来像：

```
<?php echo '<meta name="description" content="page description"><meta name="keywords" content="keyword1, keyword2, keyword3">'; ?> 
```

哪个更快：

*   `<?php include 'include.php'; ?>`
*   `<!-- #include file="include.php" -->`

搜索引擎爬虫也可以读取两者吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T16:18:12.223

搜索引擎会读取 Web 服务器返回的内容，无论是 PHP 代码生成还是 SSI 包含。

至于您关于哪个更快的问题，这取决于您，您不必担心。

# objective-c - 使 UIPinchGestureRecognizer 和 UIRotationGestureRecognizer 一起工作

> ID：13893887
> 
> 赞同：2
> 
> 时间：2012-12-15T16:15:53.997
> 
> 标签：objective-c, xcode, uiview, uigesturerecognizer

我尝试使用手势缩放和旋转 UIImageView。我在 Internet 上看到了几个示例并且我已经实现了它，但是它不能一起工作。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    imgView = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, self.view.bounds.size.width, self.view.bounds.size.height)];
   // imgView.frame = CGRectMake(0, 0, self.view.bounds.size.width, self.view.bounds.size.height);
    imgView.image = [UIImage imageNamed:@"spotItInLondonIcon.png"];
    [imgView setContentMode:UIViewContentModeScaleAspectFit];
    [imgView setMultipleTouchEnabled:YES];
    [imgView setUserInteractionEnabled:YES];
    [self.view addSubview:imgView];

    UIPinchGestureRecognizer *pinch = [[UIPinchGestureRecognizer alloc]initWithTarget:self action:@selector(pinch:)];
    [imgView addGestureRecognizer:pinch];
    pinch.delegate = self;

    UIRotationGestureRecognizer *rotate = [[UIRotationGestureRecognizer alloc]initWithTarget:self action:@selector(rotation:)];
    [imgView addGestureRecognizer:rotate];
    rotate.delegate = self;
}
-(void)pinch: (UIPinchGestureRecognizer*)sender
{
    CGFloat scale = sender.scale;
    imgView.transform = CGAffineTransformScale(imgView.transform, scale, scale);
    sender.scale = 1.0;
    NSLog(@"pinch executed");
}
-(void)rotation: (UIRotationGestureRecognizer*)rotationDetected
{
    CGFloat angle = rotationDetected.rotation;
    imgView.transform = CGAffineTransformRotate(imgView.transform, angle);
    rotationDetected.rotation = 0.0;
    NSLog(@"rotation executed");
} 
```

然后我将委托添加到 .h 文件和方法到 app delegate.m 但当时仍然只有一个手势有效。

```
@interface ViewController : UIViewController <UIGestureRecognizerDelegate>

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    return YES;
} 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T09:27:48.860

应用程序 delegate.m 的方法？？您必须在要添加手势的类中添加方法，在您的情况下，viewcontroller.m

```
 - (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    return YES;
} 
```

viewcontroller.m 中的此方法不在 appdelegate.m 中

# c# - c#递归函数并非所有代码路径都返回一个值

> ID：13893889
> 
> 赞同：5
> 
> 时间：2012-12-15T16:16:27.810
> 
> 标签：c#, function, recursion

我尝试创建递归函数，但出现此错误：**并非所有代码路径都返回一个值**我知道为什么会出现此错误，因为`if`没有返回某些内容但我不希望它返回某些内容...如何绕过此错误? （这应该只是警告）

```
 private double calculate(double money, int months)
    {
        months--;
        if (months != 0)
            calculate(profit * 0.3, months);
        else
            return profit;
    } 
```

编辑：当用户单击按钮时，我这样称呼它

```
 private void bCalculate_Click(object sender, EventArgs e)
    {
        profit = double.Parse(tbMoney.Text);
        months = int.Parse(tbMonth.Text);
        tbPpofit.Text = calculate(profit,months+1).ToString();
    } 
```

如果我像你说的那样写 return 它不会给出我需要的结果

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-15T16:18:05.367

只需将 return 添加到递归分支：

```
 if (months != 0)
        return calculate(profit * 0.3, months);
  ... 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-15T16:18:58.953

为您的代码添加一个`return`值以进行递归：

```
 if (months != 0)
        return calculate(profit * 0.3, months); 
```

# segmentation-fault - Segmentation fault 和砸栈不一样吗？

> ID：13893890
> 
> 赞同：1
> 
> 时间：2012-12-15T16:16:31.840
> 
> 标签：segmentation-fault, exploit

由于编程错误，我们得到分段错误。但是作为一个必要的工具，我们尝试了同样的事情，但是内核检测到它破坏了堆栈。内核究竟是如何看到差异的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T16:21:37.460

简而言之，没有。分段错误是指内核能够检测到无效的内存访问，然后终止进程。内核无法检测到一些无效的内存访问，堆栈溢出就是建立在这些之上的。但是，编译器可以检测到堆栈溢出，并且在最新版本的 gcc (4.1+) 中，它具有针对堆栈粉碎攻击的内置保护。基本上，“金丝雀”值被放置在堆栈帧之间的堆栈上。检查以确保金丝雀仍然具有正确的值；如果没有（因为它被覆盖并且覆盖者无法猜测正确的值），则执行堆栈粉碎保护例程。有关详细信息，请参阅： [http://en.wikipedia.org/wiki/Buffer_overflow_protection#GCC_Stack-Smashing_Protector_.28ProPolice。](http://en.wikipedia.org/wiki/Buffer_overflow_protection#GCC_Stack-Smashing_Protector_.28ProPolice.29)[http://wiki.osdev.org/GCC_Stack_Smashing_Protector](http://wiki.osdev.org/GCC_Stack_Smashing_Protector)

您可以使用“-fno-stack-protector”禁用 gcc 保护，有关此内容的更多信息，请参阅：[堆栈粉碎代码在 Linux 内核 2.6.38.7 上不起作用...请帮助](https://stackoverflow.com/questions/7133176/stack-smashing-code-not-working-on-linux-kernel-2-6-38-7-please-help)

相反，分段错误只是发生在程序任何地方的无效内存访问，这意味着内核检测到对不在程序允许的内存区域中的内存的访问。AFAIK 这是使用 x86 段和虚拟内存的组合来检查的。内核/操作系统没有真正的方法可以知道访问是在原始程序代码中还是代码被某种方式利用；无论哪种方式，程序都试图访问它无法访问的内存，因此它被强制终止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T16:28:25.540

> Segmentation fault 和砸栈不一样吗？

不，分段错误是指操作系统检测到无效的内存访问并终止您的进程。粉碎堆栈是指覆盖（返回）堆栈上的地址的行为，通常是通过溢出本地声明的数组。

当您破坏堆栈（作为攻击者）时，您的目标是让进程执行您选择的代码。您希望避免分段错误，因为它们会终止您尝试接管的进程。

> 由于编程错误，我们得到分段错误。

好吧，一些错误会导致分段错误，是的。其他错误什么都不做或只是导致错误结果（例如当攻击者成功利用缓冲区溢出并使程序运行完全不同的代码时）。

> 但是作为一个必要的工具，我们尝试了同样的事情，但是内核检测到它破坏了堆栈。

我不知道你刚才说了什么，但内核没有检测到“粉碎堆栈”。

> 内核究竟是如何看到差异的？

有什么区别？

# java - 从 Date 对象中删除毫秒部分

> ID：13893902
> 
> 赞同：0
> 
> 时间：2012-12-15T16:18:04.687
> 
> 标签：java, hibernate, jsp, struts2

我正在使用 struts2、mysql、hibernate 创建一个网站（用于表到类的映射）

在 Mysql 中存储的值是 2012-12-10 00:04:52

将其获取到变量“ addedDate”后，我尝试打印它

```
class d{
Date addedDate;
} 
```

添加日期为 2012-12-10 00:04:52.0

在 Hibernate 映射（xml 文件）中，我给出了

```
<property name="addedDate" type="timestamp">
            <column name="ADDED_DATE" length="19" not-null="true" />
        </property> 
```

在我创建的 Action 类中

```
List<d> dList 
```

在jsp中

```
<s:iterator value="dList" >
<td><s:property value="addedDate" /></td>   
</s:iterator> 
```

我在屏幕上得到的输出 12/10/12 12:04:52 AM.000

我想删除我的输出中的“.000”任何建议请

我尝试将类型休眠 xml 文件更改为 Date 1st 然后更改为时间。每次它只给出时间或日期，但我想要两者都没有毫秒。

一种方法是在 d 类中创建一个字符串变量，将其添加到该字符串，然后进行修改并在 jsp 上显示。在那种情况下，我不知道要从 24 小时格式转换为 12 小时格式

如果有任何其他方式，或者如果您需要任何澄清，请向我提出建议，请询问我。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T16:21:58.207

看看[`date`](http://struts.apache.org/2.1.8/docs/date.html)标签。

来自文档的样本（改编）：

```
<s:iterator value="dList" >
    <s:date name="addedDate" format="dd/MM/yyyy" />
</s:iterator> 
```

（未测试）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T16:40:33.197

正如戴夫建议的那样， a[`DateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html)绝对是去这里的方式。

背负已经实现的东西一开始`toString`看起来很优雅，但是随着代码的增长，显式地格式化你的日期以显示到用户界面会更易读、更稳定并且更不容易出错。`System.out`正如您所看到的，当您使用它打印它以及当您要求 JSP 为您“打印”它时，您已经得到了不同的行为。

对于你想做的事，一个[`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)会做的伎俩。首先，它的 JavaDocs 对它的工作原理和一堆示例有很好的解释。

给男人一条鱼...

```
SimpleDateFormat formatter = new SimpleDateFormat("MM/dd/yyyy hh:mm:ss a");
Date now = Calendar.getInstance().getTime();
System.out.println(formatter.format(now)); 
```

将打印：

```
12/15/2012 05:39:13 PM 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T11:05:28.177

如果你的休眠然后使用下面的注释它只在数据库中存储日期

```
@Column(name="BIRTH_DATE")
    @Temporal (TemporalType.DATE)
    private Date birthDate; 
```

# android - 带有 jQ uery 移动隐藏地址栏的 WebApp 不起作用，因为谷歌浏览器存在高度错误

> ID：13893903
> 
> 赞同：1
> 
> 时间：2012-12-15T16:18:05.070
> 
> 标签：android, jquery-mobile, hide, fullscreen, address-bar

当您在 WebbApps 中隐藏地址栏时，您几乎可以获得原生应用程序的感觉。不幸的是，只有在内容足够大的情况下，才能在 jQuery mobile 中隐藏地址栏。如果内容太小，它不起作用 - 也适用于全屏和固定页脚 - 请参阅[http://jquerymobile.com/demos/1.2.0/docs/toolbars/bars-fixed.html](http://jquerymobile.com/demos/1.2.0/docs/toolbars/bars-fixed.html)。原因似乎是 Android 浏览器中的错误。如果内容太小，jQuery funktion $(window).height() 仅提供 450px 作为屏幕高度（我使用的是带有 Galaxy S2 的 Android 2.3.6）。地址栏的高度缺失。内容是否足够大，功能是否按预期提供 508 像素。也是一个很好的方法 - [http://www.semicomplete.com/blog/tags/jquery%20mobile](http://www.semicomplete.com/blog/tags/jquery%20mobile)- 不工作。我找到了一个可行的解决方案，但需要延迟 500 毫秒。当您加载页面一小段时间时，它会带来一个翻转地址栏。是否有另一种方法，即没有地址栏的翻转？

但也许有人知道这如何能更好地工作。它适用于 iOS 吗？如果有人可以用 iPhone 来测试，那就太好了。提前致谢。

这里的代码：

```
var fixgeometry = function() {                
            /* Calculate the geometry that our content area should take */
            var header = $(".header:visible");
            var footer = $(".footer:visible");
            var content = $(".content:visible");                
            var viewport_height = $(window).height()+60; /*Here is the idea! Make it bigger here and make it later smaller*/
            var content_height = viewport_height - header.outerHeight() - footer.outerHeight();

            /* Trim margin/border/padding height */
            content_height -= (content.outerHeight() - content.height());
            content.height(content_height);
            setTimeout(function(){
                window.scrollTo(0, 1);
                content.height(content_height-60); }, 500 );
        };

$(document).ready(function(){                           
            $(window).bind("orientationchange resize pageshow", fixgeometry);   
      }); 
```

scrollTo 函数在 jQuery 中实现，但在方向更改或文本字段中的输入之后不起作用。所以它在 setTimeout 函数中是必要的。

# ios - GPUImage：如何将不同的过滤器应用于图像，缩小它们并将结果平铺到输出图像

> ID：13893905
> 
> 赞同：2
> 
> 时间：2012-12-15T16:18:16.817
> 
> 标签：ios, gpuimage

我是[GPUImage](https://github.com/BradLarson/GPUImage)库的新手。

我正在使用它从相机获取帧并实时过滤它们。我正在为我正在开发的过滤器使用不同的过滤器参数。

我想出了如何使用不同的过滤器并行过滤相机图像，但我现在想做的是输出一个结果图像，其中 4 个过滤后的图像平铺在一起以制作一个大的输出图像。

我的想法是我可以链接`GPUImageTransformFilter`实例和`GPUImageAddBlendFilter`实例来获得组合图像。例如，在缩小两个图像并将它们并排放置的最简单情况下：

```
self.transform1 = [[GPUImageTransformFilter alloc] init];
_transform1.affineTransform = CGAffineTransformScale(CGAffineTransformIdentity, 0.5, 0.5);

self.transform2 = [[GPUImageTransformFilter alloc] init];
_transform2.affineTransform = CGAffineTransformTranslate(CGAffineTransformScale(CGAffineTransformIdentity, 0.5, 0.5), 1.0, 0.0);

self.blendFirst1 = [[GPUImageAddBlendFilter alloc] init];

[_transform1 addTarget:_blendFirst1];
[_transform2 addTarget:_blendFirst1]; 
```

然而，这会导致两个图像被缩放并相互重叠，结果被转换到图像的边缘而另一半为空。

我将不胜感激有关如何缩放和平铺较小图像以制作大图像的任何指示。

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T18:16:37.343

虽然您可以使用变换来做到这一点，但您正在查看三个混合以将您的四个图像放入一个静止帧中。这不会是完成这项工作的最快或最节省内存的途径。

相反，我建议继承 GPUImageTwoInputFilter 或基于此创建一个全新的多输入过滤器，然后使用该过滤器将所有四个图像拉入以进行渲染。人们已经通过这样做制作了三个或四个过滤器输入混合，这可能是您最有效的路径。

过滤器的片段着色器可以渲染四个四边形，每个输入图像一个，或者具有选择性地从四个纹理中采样的着色器以在给定像素处提供适当的颜色。前者会更快，但可能需要您编写更多的 OpenGL ES 代码来修改基本混合过滤器。后者将对顶点和片段着色器使用简单的调整，但这些着色器中的条件可能会减慢速度。

# wordpress - wordpress 列出自定义类别，下面有帖子列表

> ID：13893906
> 
> 赞同：0
> 
> 时间：2012-12-15T16:18:18.313
> 
> 标签：wordpress, custom-post-type, custom-taxonomy

我得到了为他们制作的自定义帖子类型和类别。我要做的就是列出所有自定义类别以及属于该类别的所有帖子的列表（带有标题和摘录）。我找到的解决方案都不起作用。我可以显示自定义类别，但无法列出属于这些类别的帖子。这是我的代码

```
<?php
    $show_count = 0; 
    $pad_counts = 0; 
    $hierarchical = 1; 
    $taxonomy = 'timeline_category';
    $title = '';
    $description = true;

    $args = array(
    'show_count' => $show_count,
    'pad_counts' => $pad_counts,
    'hierarchical' => $hierarchical,
    'taxonomy' => $taxonomy,
    'use_desc_for_title' => $description,
    'title_li' => $title
     );

   $categories=get_categories($args);
   foreach($categories as $category) { 
  echo '<p>Category: <a href="' . get_category_link( $category->term_id ) . '" title="' . sprintf( __( "View all posts in %s" ), $category->name ) . '" ' . '>' . $category->name.'</a> </p> ';
echo '<p> Description:'. $category->description . '</p>';
echo '<p> Post Count: '. $category->count . '</p>'; 

    //display posts
$cat_new = $category->term_id;
$post_args = array( 'numberposts' => 5, 'category' => $cat_new, 'caller_get_posts' => 0 );

$myposts = get_posts( $post_args );
    foreach( $myposts as $post ) :  setup_postdata($post); ?>

<li><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></li>

   <?php endforeach; }    ?> 
```

上面的代码甚至显示此类别中有 1 个帖子（帖子计数），所以问题出在 foreach 帖子的某个地方。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T16:29:49.707

我不太熟悉`endforeach;`，但是在快速[谷歌搜索](http://php.net/manual/en/control-structures.alternative-syntax.php)之后，看起来你有一个语法错误。

```
<?php foreach($foo as $bar):
    // Stuff
endforeach; // No trailing "}" ?> 
```

或者

```
<?php foreach($foo as $bar){
    // Stuff
} ?> 
```

# jquery - 加载所有图像时的jquery div

> ID：13893908
> 
> 赞同：12
> 
> 时间：2012-12-15T16:18:39.740
> 
> 标签：jquery, image, load

我可以在加载图像时加载图像，方法是：

```
<img style="display:none;" src="big3.jpg">
<script type="text/javascript">
    $('img').load(function(){
        $(this).css({'display':'block'})
    });
</script> 
```

但是我想要的是在加载所有img时加载div，但这不起作用，为什么？：

```
<div style="display:none;">
    <img src="big3.jpg">
</div>
<script type="text/javascript">
    $('div').load(function(){
        $(this).css({'display':'block'})
    });
</script> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-15T16:22:42.503

正如@Kolink 所说，div 不会加载。当 div 中的所有图像都已加载时，此代码将显示 div。（未经测试）

```
var $images = $('div img');
var loaded_images_count = 0;

$images.load(function(){
    loaded_images_count++;

    if (loaded_images_count == $images.length) {
        $("div").show();
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T16:20:04.550

`<div>`元素不加载，图像加载。您想监听图像何时加载，然后获取`<div>`并显示它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-12T10:29:51.483

我知道回答这个问题为时已晚，但对于任何查看此线程的人来说，有一个简单易用的 jQuery 插件以及许多其他技巧来完成这项工作。[你可以在这里查看](http://imagesloaded.desandro.com/)。然后检查所有图像加载，你只需要这样做

```
$('#container').imagesLoaded()
  .always( function( instance ) {
    console.log('all images loaded');
  }) 
```

# c# - 适用于 WPF 的 Windows 8 现代 UI 样式

> ID：13893909
> 
> 赞同：21
> 
> 时间：2012-12-15T16:18:42.127
> 
> 标签：c#, .net, wpf, xaml, windows-runtime

我希望我的 WPF 应用程序看起来像 WinRT 应用程序：

![](../Images/3558144f451ec7f8f95a3383f61cc5b7.png)

是否有任何现成的 WPF 样式或控件可以让我们实现这一目标？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-12-15T17:40:38.713

看看[MahApps.Metro](http://mahapps.com/MahApps.Metro/)

像[Github for Windows 之类的应用程序都基于它。](https://github.com/blog/1151-designing-github-for-windows)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-05-19T14:16:51.933

另一个用于 WPF 应用程序 Metroesque 样式的不错的库是[Modern UI for WPF](http://mui.codeplex.com)。可以通过 NuGet 或作为项目模板安装。

# mongodb - 如何打印一个mongodb游标？

> ID：13893913
> 
> 赞同：0
> 
> 时间：2012-12-15T16:19:00.427
> 
> 标签：mongodb, coffeescript

```
#Database Testing Method.
            socket.on 'databaseTesting', ->
                db.collection 'documents', (err, collection) ->
                    console.log 'Printing documents...'
                    console.log cursor.item for cursor in collection.find() when cursor.hasNext isnt false 
                    console.log 'Documents printed.' 
```

我正在尝试将此集合的内容打印到在 nodejs localhost 服务器上运行的 mongo 数据库的控制台。第一个和最后一个 console.log 显示正常，但不是光标本身。并且不会抛出任何错误。有任何想法吗？以上是 CoffeeScript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T16:47:53.973

MongoDB 游标不是数组，因此您应该在倒数第二行使用类似的内容：

```
collection.find().each (err, item) -> console.log item if item 
```

# visual-studio-2010 - CUDA __syncthreads() 编译良好，但带有红色下划线

> ID：13893919
> 
> 赞同：4
> 
> 时间：2012-12-15T16:19:57.793
> 
> 标签：visual-studio-2010, cuda

我已经使用 CUDA 4.2 一个星期了，但我遇到了一个小问题。当我编写 __syncthreads() 函数时，它会变成下划线，看起来好像是错误的......

然后，如果我将鼠标放在功能上，则会出现一条消息：

> 标识符 __syncthreads(); 未定义。

但是当我编译我的项目时，输出表单 build 说：

> ========== 构建：1 成功，0 失败，0 最新，0 跳过 ==========

所以我猜测一切正常，但 Visual Studio 强调该函数的事实让我感到困惑......我怎样才能让 Visual Studio 知道这个函数是在编译过程之前定义的？

注意：内核调用也会发生同样的事情： kernel<<<...,...>>> 其中第三个“<”也带有红色下划线...

我知道这可能是一个小问题，但我想解决它......非常感谢！我在带有 Cuda 4.2 和 Nsight 2.2 的 win7 上使用 Visual Studio 2010

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-03T15:21:42.340

我在 cu 文件的顶部添加了以下几行，它开始识别这些函数。出于某种原因，Intellisense 没有选择这个#define：

```
#ifndef __CUDACC__  
    #define __CUDACC__
#endif 
```

我在代码中丢失了一些颜色编码，但我不再遇到奇怪的误报错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-25T05:09:37.607

我正在使用`CUDA 9.1`和`Visual Studio 2017 15.6.4`。以下代码帮助我消除“__syncthreads() 未定义”错误。

```
//for __syncthreads()
#ifndef __CUDACC__ 
#define __CUDACC__
#endif
#include <device_functions.h> 
```

但是，不推荐这种方法，因为它可能会带来不可预知的副作用。解决此智能感知警告的另一种方法是：

```
#ifdef __INTELLISENSE___
// in here put whatever is your favorite flavor of intellisense workarounds
#endif 
```

参考： [__syncthreads(); 未定义需要帮助](https://devtalk.nvidia.com/default/topic/513485/__syncthreads-is-undefined-need-a-help/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-18T19:59:43.773

我有`CUDA 8.0`和`Visual Studio 2015`我有同样的问题。以下几行帮助了我：
在这些行之后：（已经在代码中）

```
#include "cuda_runtime.h"
#include "device_launch_parameters.h" 
```

我添加了这些行：

```
//for __syncthreads()
#ifndef __CUDACC_RTC__ 
#define __CUDACC_RTC__
#endif // !(__CUDACC_RTC__)

#include <device_functions.h> 
```

它基于此链接：[https ://devtalk.nvidia.com/default/topic/1009723/__syncthreads-and-atomicadd-are-undefined-in-visual-studio-2015/](https://devtalk.nvidia.com/default/topic/1009723/__syncthreads-and-atomicadd-are-undefined-in-visual-studio-2015/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-01T12:38:22.787

尝试`__global__`在文件中定义函数体时遇到过这种情况`.cuh`。将函数体移动到`.cu`源文件中解决了它。

但是，这意味着我的一些模板化函数不能使用基本的东西，例如`__syncthreads()`，因为模板可能必须在`.cuh`标题中定义。

因此，您可能需要放弃函数模板，而是坚持使用几个函数，每个函数的名称略有不同。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-08-17T21:14:27.820

其他解决方案要么没有解决 Eclipse 2021-06 中使用 CMake 3.16.3 发生的相同问题，要么使用 CUDA Runtime Version = 10.1 产生以下警告：

```
/usr/include/device_functions.h:54:2: warning: #warning "device_functions.h is an internal header file and must not be used directly.  This file will be removed in a future CUDA release. 
```

以下在 Eclipse 中给出了正确的突出显示和代码完成，并且没有产生编译警告：

```
#ifndef __CUDACC__
    #define __CUDACC__
    #include <device_functions.h>
#endif 
```

# python - 如何获得 libicui18n.so.36 DEB？

> ID：13893923
> 
> 赞同：0
> 
> 时间：2012-12-15T16:20:29.640
> 
> 标签：python, linux, ubuntu

在安装 PyICU ImportError : libicui18n.so.36 时，Ubuntu的终端上没有显示这样的目录。没有它，我无法安装 PyICU 有人请帮帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T21:40:23.747

我猜你试图手动安装 pyicu，在 ubuntu 上你可能想使用现有的包：

在您的终端中以 root 身份：

```
$ apt-get install python-pyicu 
```

# javascript - 奇怪的 sessionStorage 行为

> ID：13893930
> 
> 赞同：1
> 
> 时间：2012-12-15T16:21:30.253
> 
> 标签：javascript, html, sessionstorage

好的，请耐心等待，我会尽可能详细地解释这个问题。

我有 3 个 HTML（和适当的 .js）文件。我可以向 sessionStorage 添加内容，当我位于任一 HTML 文件中时，我会显示 sessionStorage 的内容。我在最新版本的 firefox 上本地运行文件，据我所知，它支持 file:// 中的 sessionStorage 所以，一切都很好，我可以在 HTML1 中向 sessionStorage 添加东西并转到 HTML2 和数据是正确显示。我得到了 sessionStorage 的概念，一切都很好。

但这就是奇怪的地方：当我在 HTML1 中向 sessionStorage 添加内容并通过 a-href 转到 HTML2 时，sessionStorage 的内容就在那里。但是，如果我在 url 栏中单击并按 enter，则内容将丢失。会话存储为“空”。我回到 HTML1 并按 ctrl+r（重新加载），仍然为空。但是当我在 url 栏中单击并按 Enter 时（当我在 HTML1 页面中时）， sessionStorage 内容会返回。

我已经进行了几次检查，似乎当我在 url 栏中单击并按 Enter 时，会创建另一个 sessionStorage 实例。

但是，如果我将项目上传到某个服务器上，则不会发生这种情况。我想知道为什么 - 如果 Firefox 支持 sessionStorage - 当我在本地运行应用程序时会发生这种情况，那里到底发生了什么？感谢您的任何解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T17:24:22.013

I'm quite sure that if you looks at files from the filesystem, browsers consider every single file like a domain. So no Ajax, no shared cookies, sessions etc. The thing I find weird is that you get to keep some sessions...

Imagine you have a user stupid enough to open an html file he downloaded, without those protections, that html file could see everything on the system. And as much as antiviruses and the OS warn you when you open a .exe (or equivalent), you won't get any kind of warning when opening a .html file.

You'll have to use a local server, something like WAMP probably. Or Apache if you can.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T11:25:02.757

好的，它在本地不起作用，因为您正在打开文件，您需要在服务器上运行它。

浏览器将使用 URL（当然还有其他内部内容）将会话绑定在一起，这就是为什么它可以在您上传到的任何服务器上工作的原因。这不适用于文件 URL，因为浏览器将它们视为来自不同位置的不同页面，因此不会共享会话。

如果您在本地设置 WAMP 或其他东西并通过它运行它，它将起作用。这正是 xavierm02 所建议的。

# core-data - 将核心数据设置为延迟加载一对一的关系

> ID：13893938
> 
> 赞同：2
> 
> 时间：2012-12-15T16:22:18.803
> 
> 标签：core-data, afnetworking, afincrementalstore

我正在使用[AFIncrementalStore](https://github.com/AFNetworking/AFIncrementalStore)将我的 iOS 应用程序连接到我的 REST API。`Events`当我加载我的初始视图控制器时，我创建了一个将最新的 100 个（NSManagedObjects）加载到视图中的 NSFetchRequest。问题是每个`Event`都与一个`Group`对象具有 1:1 的关系，并且一旦`Event`加载，增量存储就会被要求填充该`Group`对象，在我的情况下，这会触发对每个 100 的服务器的单独请求`Events`。

我可以看到几种解决此问题的方法，例如`Groups`如果它们已经保存在本地，则不向服务器请求，缓存网络请求，或者不将关系存储在 NSManagedObject 中。但理想情况下，该`Group`对象可以作为故障开始，并且仅在访问其字段之一时才请求填充，类似于一对多关系发生的情况。不幸的是，我找不到任何说明如何强制核心数据中的一对一关系延迟加载的文档。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:01:00.387

也许这就是你要找的？

来自 AFIncrementalStore.h：

```
/**
Returns whether the client should fetch remote relationship values for a
particular managed object. This method is consulted when a managed object
faults on a particular relationship, and will call
`-requestWithMethod:pathForRelationship:forObjectWithID:withContext:` if `YES`.
@param relationship The relationship of the specifified managed object
@param objectID The object ID for the specified managed object.
@param context The managed object context for the managed object.
@return `YES` if an HTTP request should be made, otherwise `NO.  */

- (BOOL)shouldFetchRemoteValuesForRelationship:(NSRelationshipDescription*)
        relationship forObjectWithID:(NSManagedObjectID *)objectID
        inManagedObjectContext:(NSManagedObjectContext *)context; 
```

如果是这样，您可以使用

```
- (BOOL)shouldFetchRemoteValuesForRelationship:(NSRelationshipDescription *)relationship forObjectWithID:(NSManagedObjectID *)objectID inManagedObjectContext:(NSManagedObjectContext *)context
{
    return NO;
} 
```

在你的`AFRESTClient <AFIncrementalStoreHTTPClient>`子类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T17:19:32.497

我也一直在为此苦苦挣扎。看起来一对一的关系总是会被急切地加载。解决此问题的一种方法是将其声明为一对多关系，以便它自动执行延迟加载。然后在你的模型类中，你可以有一个方法返回集合中的第一个。

# eclipse - Eclipse C++ 格式化程序在方法标识符之前放置新行

> ID：13893942
> 
> 赞同：24
> 
> 时间：2012-12-15T16:22:42.190
> 
> 标签：eclipse, formatting, eclipse-cdt

我遇到了 Eclipse 格式化程序的问题。在类声明中声明方法时，它不会正确格式化我的代码。它在方法的返回类型之后放置一个新行。

我已经导出了样式 xml 文件并检查了其中的设置，但是没有任何设置与这个问题有任何明显的联系，并且 Eclipse 中的设置编辑器在其方法声明的示例代码中没有显示同样的问题。

这是我想要发生的代码示例：

```
class MyClass
{
    public:
        MyClass();
        void myMethod();
}; 
```

但是，这就是我得到的：

```
class MyClass
{
    public:
        MyClass();
        void
        myMethod();
}; 
```

同样，在样式编辑器中，代码没有这个问题，看起来就像我想要的那样，但在实际代码中，情况有所不同。

我使用的是 3.8.0 版。任何帮助表示赞赏。

编辑：我删除了那些格式不正确的源文件（在多次格式化代码后无济于事）并将它们替换为具有相同方法、相同结构等的“相同”文件。这次我格式化了代码并且它有效。这可能是一个错误，但我将其保留以防万一其他人遇到类似问题或有解决方案来避免这个问题。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-10T15:03:59.267

我在主 eclipse 项目目录下手动编辑了两个文件

```
.metadata\.plugins\org.eclipse.core.runtime\.settings 
```

两个文件：

```
file 1: org.eclipse.cdt.core.prefs, change this line from "insert" to "do not insert"
 org.eclipse.cdt.core.formatter.insert_new_line_before_identifier_in_function_declaration=do not insert

file 2: org.eclipse.cdt.ui.prefs,
scan this file for "insert_new_line_before_identifier_in_function_declaration" and make a similar change from insert to do not insert next to it, should be obvious 
```

注意我在 indigo 和 juno 上看到了这个问题，上面描述的修复是在 juno 中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-11-12T18:36:50.797

如果您有自定义格式化程序配置，请先将其导出（设置>C/C++ 常规>格式化程序>编辑>导出）。然后将以下行更改为“不插入”。保存 XML。

```
<setting id="org.eclipse.cdt.core.formatter.insert_new_line_before_identifier_in_function_declaration" value="do not insert"/> 
```

删除当前配置并导入您更改的配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-22T09:07:27.000

从 Eclipse 2019-06 中包含的 cdt 9.8 开始，格式化程序选项中有一个特定的首选项。

# c++ - 调用栈字节偏移

> ID：13893945
> 
> 赞同：1
> 
> 时间：2012-12-15T16:23:00.373
> 
> 标签：c++, visual-studio-2010

在`Call Stack`Visual Studio 2010 的窗口中，行号旁边的字节偏移指的是什么？

```
Test.exe!__tmainCRTStartup()  Line 547 + 0x2c bytes 
```

为什么有些堆栈帧有字节偏移，而有些则没有？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T16:28:52.293

调试器通常只有公共符号的地址，如 __tmainCRTStartup()。但是代码可能在该函数内部执行，位于函数开头的任何偏移处。没有任何符号。所以你看到的是符号地址的偏移量。

值得注意的是，在调试发布构建代码的情况下，由于在函数内部执行的代码没有进入 .pdb 文件，您可能会看到较大的偏移量。然后行号也会丢失，这对于发布构建代码来说非常典型，因为在代码优化器移动代码后行号变得毫无意义。*链接器的 / PDBSTRIPPED*选项从 .pdb 文件中删除了行号。

像 +0x2c 这样的偏移量是一个非常可靠的指示，它实际上在命名函数内部。偏移量越大，赔率越低。你看到的符号，比如说，+0x2000 偏移量几乎肯定是不可靠的。当您使用 Windows 系统 DLL 的符号文件进行调试时，这种情况并不少见。

长话短说：您会看到执行指令与函数开头的偏移量。

# string - 真/假评估在 Scheme 中无法按预期工作

> ID：13893947
> 
> 赞同：0
> 
> 时间：2012-12-15T16:23:11.970
> 
> 标签：string, functional-programming, scheme, racket

我正在尝试比较两个布尔值：

```
(if (equal? #f (string->number "123b"))
      "not a number"
      "indeed a number") 
```

**当我在DrRacket**的命令行中运行它时，我得到了`"not a number"`，但是，当我将那段代码放入较大的代码中时，该函数不会返回该字符串 ( `"not a number"`)，代码如下：

```
(define (testing x y z)

    (define badInput "ERROR")  

    (if (equal? #f (string->number "123b"))
          "not a number"
          "indeed a number")  

    (display x)) 
```

并从命令行：`(testing "123" 1 2)` 显示：`123`

为什么 ？

此外，我怎样才能返回一个值，无论何时我选择？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T16:35:18.427

尝试这个：

```
(define (testing x)
  (if (equal? #f (string->number "123b"))
      (display "not a number")
      (display "indeed a number"))
  (display x)) 
```

您正在丢弃`if`表达式的结果。条件工作正常，但没有对结果字符串做任何事情，它只是被忽略了。整个过程现在正在返回`#<void>`，因为`display`它是一个没有自身价值的副作用操作。另外，我删除了`badInput`变量和`y`and`z`参数，因为它们根本没有被使用。

要从过程中返回值，只需将带有要返回的值的表达式放在过程主体的末尾 - 这解释了为什么您的代码不起作用，只有*最后一个*表达式返回一个值，尽管您可以做侧-`display`在最后一个表达式之前和包括最后一个表达式的情况下执行操作（例如，调用）。

事实上，您的代码可以通过返回一个值以更惯用的方式编写，注意`if`now 中的条件实际上取决于`x`传递的参数：

```
(define (testing x)
  (if (not (string->number x))
      (string-append "not a number " x)
      (string-append "indeed a number " x)))

(displayln (testing "123"))
=> indeed a number 123

(displayln (testing "123b"))
=> not a number 123b 
```

**编辑：**

关于您问题的最后一次编辑，我相信您正在寻找这样的东西：

```
(define (convert originalNumber s_oldBase s_newBase)
  (if (or (not (string->number originalNumber)) ; validate error conditions first
          (not (string->number s_oldBase))
          (not (string->number s_newBase)))
      "ERROR"     ; if one of the input values is wrong, return an error message
      (begin      ; else
        <body>))) ; put the rest of the procedure's body in here 
```

或者这个，如果你喜欢使用`cond`：

```
(define (convert originalNumber s_oldBase s_newBase)
  (cond ((or (not (string->number originalNumber)) ; validate error conditions
             (not (string->number s_oldBase))
             (not (string->number s_newBase)))
         "ERROR")  ; if one of the input values is wrong, return an error message
        (else      ; else
         <body>))) ; put the rest of the procedure's body in here 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T16:29:26.290

这样做的原因是即使您的条件评估为假，您只是丢弃了该结果。

您输入的内容相当于：

```
(define (testing x y z)

    (define badInput "ERROR")  

    "not a number"

    (display x)) 
```

`"not a number"`刚刚丢弃的地方。

要退货，请尝试类似

```
(define (testing x y z)

    (define badInput "ERROR")  
    (cond

        ((equal? #f (string->number "123b"))
              "not a number")  

        (else (display x)))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T18:00:29.283

这将是一个矫枉过正，但您可以通过调用`call/cc`（或`call-with-current-continuation`）设置的延续直接从任何地方返回值：

```
(define (primo args ...)
   (call/cc (lambda (k) (secundo k args ...))))

(define (secundo k args ... )
  ... do your stuff and whenever you feel like it,
  ... return a value by calling
  (k value)
  ....
  .... ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-15T16:28:30.907

函数的值是其主体中最后一个表达式的值。`testing`函数体中的最后一个表达式是`(display x)`，这就是函数的值。由于 your`if`不是正文中的最后一个表达式并且它没有任何副作用，因此它基本上什么都不做。

如果您`if`在调用后将您的移动到`display`，`testing`将显示`x`然后返回“不是数字”。

# algorithm - 后缀树和尝试。有什么不同？

> ID：13893950
> 
> 赞同：87
> 
> 时间：2012-12-15T16:23:39.603
> 
> 标签：algorithm, data-structures, trie, suffix-tree

我正在阅读`Tries`通常称为前缀树和`Suffix Trees`.
虽然我找到了 a 的代码，但`Trie`我找不到 a 的示例`Suffix Tree`。我也觉得构建 a 的代码与 a 的代码`Trie`相同，`Suffix Tree`唯一的区别是在前一种情况下我们存储前缀但在后缀中。
这是真的？任何人都可以帮我清除这个问题吗？一个示例代码会很有帮助！

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-12-15T16:52:40.113

后缀树可以看作是建立在 trie 之上的数据结构，其中不仅将字符串本身添加到 trie 中，还可以添加该字符串的每个可能的后缀。例如，如果您想在后缀树中索引字符串**香蕉**，您将使用以下字符串构建一个 trie：

```
banana
anana
nana
ana
na
a 
```

完成后，您可以搜索任何 n-gram 并查看它是否存在于您的索引字符串中。换句话说，n-gram 搜索是对字符串所有可能后缀的前缀搜索。

这是构建后缀树的最简单和最慢的方法。事实证明，这种数据结构有许多更高级的变体，可以改善空间和构建时间。我对这个领域不够精通，无法给出概述，但您可以从研究[后缀数组](http://en.wikipedia.org/wiki/Suffix_array)或此类[高级数据结构](http://courses.csail.mit.edu/6.851/spring12/lectures/)（第 16 和第 18 讲）开始。

这个[答案](https://stackoverflow.com/a/9513423/499649)也很好地解释了这种数据结构的变体。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-15T17:18:29.740

如果您想象一个 Trie，其中放置了一些单词的后缀，您将能够非常轻松地查询它以查找字符串的子字符串。这是后缀树背后的主要思想，它基本上是一个“后缀树”。

但是使用这种幼稚的方法，为大小为 n 的字符串构建这棵树将是 O(n^2) 并且占用大量内存。

由于这棵树的所有条目都是同一字符串的后缀，它们共享大量信息，因此有优化的算法可以让您更有效地创建它们。例如，Ukkonen 的算法允许您以 O(n) 的时间复杂度在线创建后缀树。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-11T22:24:23.300

区别很简单。后缀树的“虚拟”节点比后缀树少。这些虚拟节点是增加树上查找操作的单个字符

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-05T02:47:43.933

Trie 的节点具有指向较短上下文的链接，“树”没有它。如果 Tree 的节点链接到较短的上下文，那么它会转向 Trie ;o)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-04T21:30:19.940

给定文本的后缀树是给定文本的所有后缀的压缩树。

参考：[https ://www.geeksforgeeks.org/pattern-searching-using-suffix-tree/](https://www.geeksforgeeks.org/pattern-searching-using-suffix-tree/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-03T03:46:51.853

我会给你一些片段，让你的理解更清楚。免责声明：我不是专家，并且从编码面试准备中了解这些 DS。

首先，如上所述：suffix trie 是由哈希表（最简单的变体）组成的结构，我们在其中存储所有可能的变体。因此，如果需要，我们可以搜索子字符串。例如：'abc'。

```
{'a': True, 
  'a': {'b': True},
  'a': {'b': {'c': True}}, 
  'b': True,
  'b': {'c': True},
  'c': True} 
```

Trie 是我们存储完整字符串以检查它们是否存在的时候。前任：`{'t': {'h': {'i': {'s': {'*': 'this'}}}}, 'y': {'o': {'*': 'yo'}}`

你可以在 Leetcode 上查看更多解释问题：Implement Trie (Prefix Tree)。链接：[https ://leetcode.com/problems/implement-trie-prefix-tree/](https://leetcode.com/problems/implement-trie-prefix-tree/)

# android - 带有自定义 View 元素的自定义 LinearLayout 什么也不显示

> ID：13893955
> 
> 赞同：0
> 
> 时间：2012-12-15T16:24:24.827
> 
> 标签：android, android-layout

我有一个`CustomView`扩展类`LinearLayout`。我有另一个类`CustomElement`也扩展了`LinearLayout`. 当我尝试在 XML 中使用我的类时，什么都没有出现。

这是我的自定义视图类：

```
private static int NUMBER_OF_ELEMENTS = 4;

public CustomView(final Context context, AttributeSet attrs) {
    super(context, attrs);
    init(context);
}

private void init(Context context) {
        // get size for each element
    int width = getWidth() / NUMBER_OF_ELEMENTS;
    int height = getHeight() / NUMBER_OF_ELEMENTS;

    for (int i = 0; i < NUMBER_OF_ELEMENTS; i++) {
        CustomElement element = new CustomElement(context);
        addView(element, width, height);
    }
} 
```

这是我的自定义元素类：

```
public CustomElement(final Context context) {
    super(context);
    m_context = context;
    init(context);
}

private void init(Context context) {
    LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    inflater.inflate(R.layout.custom_elem, this);
} 
```

当我现在尝试`CustomView`在 XML 中添加我的时，它不显示任何内容。这是我的 XML 代码：

```
 <?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/layout_mainleft"
   android:layout_width="match_parent"
   android:layout_height="match_parent" >

   <com.package.views.CustomView
      android:id="@+id/layout_elements"
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:layout_alignParentBottom="true"
      android:layout_alignParentLeft="true" />

 </RelativeLayout> 
```

我错过了什么吗？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:22:08.333

I was able to resolve the question with the help of Luksprog!

The problem was, that I was overwriting the `onLayout(boolean arg0, int arg1, int arg2, int arg3, int arg4)` method without calling the super method! Therefore it didn't work!

Thanks again to Luksprog at this point.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:35:08.603

据我所知，要创建自定义布局，您应该扩展 ViewGroup，并且您必须覆盖方法 protected void onLayout(boolean arg0, int arg1, int arg2, int arg3, int arg4)。在这里你实现你的逻辑并放置你的customView。如果您只是扩展 LinearLayout 并且不以某种方式更改其行为，为什么要扩展它？

# excel - 在日期字段值上使用 VBScript 选择错误的数据

> ID：13893957
> 
> 赞同：-2
> 
> 时间：2012-12-15T16:24:36.763
> 
> 标签：excel, vbscript, vba

我有一张包含以下数据的表格：

![在此处输入图像描述](../Images/8cf65be9a0a86e6817412ab2daa0b680.png)

![在此处输入图像描述](../Images/33ad1c484670998c04ae7c215d9ae890.png)

现在 Excel 共有 36 个任务，每个任务有 4 列。第一个任务 .ie Task1 名称将始终从 L 列开始。36 个任务已被描述为 144 列。现在我们需要逐行检查并检查 TNStart Start date < T(N+1) Start date.then 该行将被选为坏行。简而言之，当任务编号从 1 增加到 36 时，开始日期应分别需要按递增顺序。如果随时失败，则应将行标记为坏数据。

你们能帮我以时尚的方式做到这一点吗？

```
Option Explicit

Dim objExcel1
Dim strPathExcel1
Dim objSheet1,objSheet2
Dim IntRow1,IntRow2
Dim ColStart

Set objExcel1 = CreateObject("Excel.Application")'Object for Condition Dump

strPathExcel1 = "D:\AravoVB\Copy of Original   Scripts\CopyofGEWingtoWing_latest_dump_21112012.xls"
objExcel1.Workbooks.Open strPathExcel1
Set objSheet1 = objExcel1.ActiveWorkbook.Worksheets(1)
Set objSheet2 = objExcel1.ActiveWorkbook.Worksheets("Bad Data")

objExcel1.ScreenUpdating = False
objExcel1.Calculation = -4135  'xlCalculationManual

IntRow2=2
IntRow1=4
Do Until IntRow1 > objSheet1.UsedRange.Rows.Count
    ColStart = objExcel1.Application.WorksheetFunction.Match("Parent Business Process ID", objSheet1.Rows(3), 0) + 1 
    Do Until ColStart > objSheet1.UsedRange.Columns.Count And objSheet1.Cells(IntRow1,ColStart) = ""
        If objSheet1.Cells(IntRow1,ColStart + 1) > objSheet1.Cells(IntRow1,ColStart + 5) and objsheet1.cells(IntRow,ColStart + 5) <> "" Then
            objSheet1.Range(objSheet1.Cells(IntRow1,1),objSheet1.Cells(IntRow1,objSheet1.UsedRange.Columns.Count)).Copy
            objSheet2.Range(objSheet2.Cells(IntRow2,1),objSheet2.Cells(IntRow2,objSheet1.UsedRange.Columns.Count)).PasteSpecial
            IntRow2=IntRow2+1
            Exit Do
        End If
        ColStart=ColStart+4
    Loop

    IntRow1=IntRow1+1
Loop

objExcel1.ScreenUpdating = True
objExcel1.Calculation = -4105   'xlCalculationAutomatic 
```

**表现不佳**

*我的工作表有 2000 行，错误的数据选择标准在 144 列上。现在输出在 25 分钟后出现。所以它提高了整体性能。因此，我请求你们帮助我，让它变得更快。*

***将坏行处理到另一张表时是否也有可能，还用红色标记了坏列***

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T09:50:55.060

我建议通过 ADODB 连接到 Excel 电子表格，并使用 SQL 检索数据。`CopyFromRecordset`然后，您可以使用该方法非常简单地将数据导出到新的 Excel 电子表格。

```
Option Explicit

Dim conn, cmd, rs
Dim clauses(34), i
Dim xlApp, xlBook

Set conn = CreateObject("ADODB.Connection")
With conn
    .Provider = "Microsoft.ACE.OLEDB.12.0"
    .ConnectionString = "Data Source=""C:\path\to\excel\file.xlsx"";" & _
        "Extended Properties=""Excel 12.0;HDR=Yes"""

    'If you don't have Office 2007 or later, your connection string should look like this:
    '.ConnectionString = "Data Source=""C:\path\to\excel\file.xls"";" & _
    '    "Extended Properties=""Excel 8.0;HDR=Yes"""

    .Open
End With

For i = 0 To 34
    clauses(i) = "[Task" & i + 1 & " Start Date] < [Task" & i + 2 & " Start Date]"
Next

Set cmd = CreateObject("ADODB.Command")
cmd.CommandText = "SELECT * FROM [WorksheetName$] WHERE " & Join(clauses, " OR ")
cmd.ActiveConnection = conn
Set rs = cmd.Execute

Set xlApp = CreateObject("Excel.Application")
xlApp.Visible = True
Set xlBook = xlApp.Workbooks.Add
xlBook.Sheets(1).Range("A1").CopyFromRecordset cmd.Execute 
```

将`C:\path\to\excel\file.xlsx`和替换`WorksheetName`为适当的值。

* * *

**更新**

一些链接：

VBScript / WSH / 脚本运行时

*   [JScript 和 VBScript](http://msdn.microsoft.com/en-us/library/d1et7k7c%28v=vs.84%29.aspx)，特别是[VBScript](http://msdn.microsoft.com/en-us/library/t0aew7h6%28v=vs.84%29.aspx)、[Script Runtime](http://msdn.microsoft.com/en-us/library/bstcxhf7%28v=vs.84%29.aspx)和[Windows Script Host](http://msdn.microsoft.com/en-us/library/9bbdkx3k%28v=vs.84%29.aspx)部分。另请查看[正则表达式](http://msdn.microsoft.com/en-us/library/6wzad2b2%28v=vs.84%29.aspx)部分

ADODB - ActiveX 数据对象

*   [如何使用连接对象](http://msdn.microsoft.com/en-us/library/ms807027.aspx)
*   [Microsoft ActiveX 数据对象](http://msdn.microsoft.com/en-us/library/ms675532%28v=vs.85%29.aspx)
*   [如何打开 ADO 连接和记录集对象](http://support.microsoft.com/kb/168336)
*   [如何使用 ADO 读取和写入 Excel 工作簿中的数据](http://support.microsoft.com/kb/278973)
*   [VBScript ADO 编程](http://msdn.microsoft.com/en-us/library/windows/desktop/ms676526%28v=vs.85%29.aspx)- 因为大多数 ADO 示例都在 VB6/VBA 中

[办公客户端开发](http://msdn.microsoft.com/en-us/library/office/bb726434%28v=office.12%29.aspx)

MSDN 上的许多示例都使用 VBA 或 VB6。有关将 VBA/VB6 移植到 VBScript 的简短介绍，请参见[此处](https://stackoverflow.com/a/13446037/111794)。要记住的主要一点是这些主题（ADODB、Excel、脚本运行时）中的大多数不是 VBScript 特定的；它们是任何支持 COM 的语言都可用的对象模型，它们的用法看起来非常相似（请参阅[此处](https://stackoverflow.com/a/13509702/111794)以获取 Python 中的示例）。

[Google](https://www.google.co.il/search?num=100&hl=en&tbo=d&site=&source=hp&q=vbscript&btnG=Search)是[您的](https://www.google.co.il/search?num=100&hl=en&tbo=d&site=webhp&source=hp&q=excel.application+vbscript&oq=excel.application+vbscript&gs_l=hp.3..0l3j0i30l7.1678342.1684521.0.1686398.17.17.0.0.0.0.765.6459.0j3j7j1j0j3j3.17.0.les%3B..0.0...1c.1._l_SiNdCaW0) [朋友](https://www.google.co.il/search?num=100&hl=en&tbo=d&site=webhp&q=adodb.connection+vbscript&oq=adodb.connection+vbscript&gs_l=serp.3..0i20l2j0l8.9560.10825.0.12293.9.6.0.0.0.0.354.415.1j3-1.2.0.les%3B..0.0...1c.1.K7tDy7BwsMU)，[StackOverflow](https://meta.stackexchange.com/a/5230)也是如此。

# objective-c - 花栗鼠物理的锚点和位置

> ID：13893958
> 
> 赞同：0
> 
> 时间：2012-12-15T16:24:36.933
> 
> 标签：objective-c, ios, cocos2d-iphone, physics, chipmunk

我目前正在开发一款必须在 iPhone 屏幕上绘制一系列气泡的游戏。每个气泡都有自己的花栗鼠身体，它是使用名为 PhysicsEditor 的多边形物理编辑器绘制的。有了它，我创建了一个 .plist 文件，其中包含创建花栗鼠身体所需的信息（质量、弹性、锚点等）。

下面是我用来创建具有给定坐标的气泡的代码。

```
- (cpBody *)drawBubblesWithX:(int)x andY:(int)y {

    NSString *name = names[arc4random() % 7];
    CCSprite *sprite; // Will contain the sprite object if name isn't Nil

    // create physics shape
    [[GCpShapeCache sharedShapeCache] anchorPointForShape:@"BubbleSlot"];
    cpBody *body = [[GCpShapeCache sharedShapeCache] createBodyWithName:@"BubbleSlot" inSpace:space withData:nil];

    cpBodySetPos(body, cpv(x, y));
    if (name != nil) { // If a color has been selected

        // create and add sprite
        sprite = [CCSprite spriteWithFile:[NSString stringWithFormat:@"%@.png", name]];
        [self addChild:sprite];

        // set the position of the sprite to be the same as the physics body
        sprite.position = CGPointMake(x, y);

        // set the position of body based on the sprite object
        cpBodySetUserData(body, (__bridge cpDataPointer)(sprite));

    }
    return body;
} 
```

[[GCpShapeCache sharedShapeCache] 对象包含用于创建主体的 .plist 文件。在 .plist 中，只有 1 个主体，名为“BubbleSlot”，用作创建游戏中所有气泡的模板。

身体的锚点约为 (0.5, 0.5)。

My problem is that the cpBodySetPos() function does not set the position of my physics object. It is changed by the anchor point. For example, to set the position of my cpBody object in the center of the iPhone screen, I would do cpBodySetPos(body, cpv(160,240)). But for some reason, I must set the anchorpoint of the body in the .plist file with the values of (160,240) , then create the body accordingly.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T21:28:08.533

So I don't know exactly what the anchor point property is used for in Physics Editor, but Chipmunk has no such concept. A body's position is the same thing as it's center of gravity, the same point it rotates around when torque is applied.

Shapes are attached to a body relative to it's position. If you have a polygon shape with vertex of (0,0) it will be at the body's center of gravity. A vertex of (1, 0) will lie to the right of the body's center of gravity (if it's not rotated), etc.

My best guess is that the anchor point is where Physics Editor is treating as (0, 0). That doesn't quite make sense with what you described above though. Hrm.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T02:42:00.103

Sprites have an anchor point too. You probably want to set that to the anchor point you've set in Physics Editor ((0.5, 0.5) style). This way the sprite shows correctly where the center of the body is.

```
self.sprite.anchorPoint = [[GCpShapeCache sharedShapeCache] anchorPointForShape:@"BubbleSlot"]; 
```

That's all I can think the Anchor Point in PE is for. PE's plist loading code sets the body's position to the anchor point, but that's rather useless as you're going to set the body's position anyway to somewhere more meaningful. So I just use it to set the sprite's anchor point, as above.

You are also updating the sprite's position with the body's position each frame, right? Something like this in an "update" or "step" method:

```
 CGPoint pt = cpBodyGetPos(self.body);
    self.sprite.position = pt; 
```

From your symptoms it sounds like you may be updating the body's position yourself, rather than letting Chipmunk update it. You should only be setting the position once, when you're creating the body and adding it to the world.

# c# - 如何绘制正方形的边框？

> ID：13893959
> 
> 赞同：10
> 
> 时间：2012-12-15T16:25:02.893
> 
> 标签：c#, xna, rectangles, monogame

我正在使用 monogame（它使用 XNA API 接口）来编写我的游戏。到目前为止它很棒，但我在一些应该很简单的事情上遇到了障碍。

我需要画一个二维正方形。但我只想要边框（无填充）。

我看过很多例子，展示了如何做一个填充的。但是没有一个只会显示边框。

我想我可以制作图像并使用它。但我怀疑它会很好地调整大小。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-15T17:03:50.567

我刚刚以这种方式创建了一个扩展方法`Texture2D`：

```
static class Utilities {
    public static void CreateBorder( this Texture2D texture,  int borderWidth, Color borderColor ) {
        Color[] colors = new Color[ texture.Width * texture.Height ];

        for ( int x = 0; x < texture.Width; x++ ) {
            for ( int y = 0; y < texture.Height; y++ ) {
                bool colored = false;
                for ( int i = 0; i <= borderWidth; i++ ) {
                    if ( x == i || y == i || x == texture.Width - 1 - i || y == texture.Height - 1 - i ) {
                        colors[x + y * texture.Width] = borderColor;
                        colored = true;
                        break;
                    }
                }

                if(colored == false)
                    colors[ x + y * texture.Width ] = Color.Transparent;
            }
        }

        texture.SetData( colors );
    }
} 
```

然后我测试了它：

```
//...

protected override void Initialize( ) {
   // TODO: Add your initialization logic here
   square = new Texture2D( GraphicsDevice, 100, 100 );
   square.CreateBorder( 5, Color.Red );

   base.Initialize( );
}

//...

protected override void Draw( GameTime gameTime ) {
   GraphicsDevice.Clear( Color.CornflowerBlue );

   // TODO: Add your drawing code here
   spriteBatch.Begin( );
   spriteBatch.Draw( square, new Vector2( 0.0f, 0.0f ), Color.White );
   spriteBatch.End( );

   base.Draw( gameTime );
} 
```

结果如下：

![在此处输入图像描述](../Images/494e920793c86ac5db80369efe2e5904.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-15T17:07:57.243

也许您可以使用 1x1 像素纹理通过精灵批次**绘制各个边缘**。在 XNA 中，您可以这样做：

```
class RectangleSprite
{
    static Texture2D _pointTexture;
    public static void DrawRectangle(SpriteBatch spriteBatch, Rectangle rectangle, Color color, int lineWidth)
    {
        if (_pointTexture == null)
        {
            _pointTexture = new Texture2D(spriteBatch.GraphicsDevice, 1, 1);
            _pointTexture.SetData<Color>(new Color[]{Color.White});
        }

        spriteBatch.Draw(_pointTexture, new Rectangle(rectangle.X, rectangle.Y, lineWidth, rectangle.Height + lineWidth), color);
        spriteBatch.Draw(_pointTexture, new Rectangle(rectangle.X, rectangle.Y, rectangle.Width + lineWidth, lineWidth), color);
        spriteBatch.Draw(_pointTexture, new Rectangle(rectangle.X + rectangle.Width, rectangle.Y, lineWidth, rectangle.Height + lineWidth), color);
        spriteBatch.Draw(_pointTexture, new Rectangle(rectangle.X, rectangle.Y + rectangle.Height, rectangle.Width + lineWidth, lineWidth), color);
    }     
} 
```

生成的绘图`lineWidth`将比传递的矩形更宽（和更高）像素。

![在此处输入图像描述](../Images/3ac5bfa6ed56fba55a4b5663dc7d00fb.png)

上面是用这段代码绘制的：

```
sb.Begin(); //spritebatch
RectangleSprite.DrawRectangle(sb, new Rectangle(10, 10, 50, 100), Color.Red, 1);
RectangleSprite.DrawRectangle(sb, new Rectangle(30, 20, 80, 15), Color.Green, 4);
RectangleSprite.DrawRectangle(sb, new Rectangle(70, 40, 40, 70), Color.Blue, 6);
sb.End(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-16T20:12:53.227

我制作了一个用于绘制图元的实用程序类。你可能会发现它很有用

```
static public class PrimiviteDrawing
{
    static public void DrawRectangle(Texture2D whitePixel, SpriteBatch batch, Rectangle area, int width, Color color)
    {
        batch.Draw(whitePixel, new Rectangle(area.X, area.Y, area.Width, width), color);
        batch.Draw(whitePixel, new Rectangle(area.X, area.Y, width, area.Height), color);
        batch.Draw(whitePixel, new Rectangle(area.X + area.Width - width, area.Y, width, area.Height), color);
        batch.Draw(whitePixel, new Rectangle(area.X, area.Y + area.Height - width, area.Width, width), color);
    }
    static public void DrawRectangle(Texture2D whitePixel, SpriteBatch batch, Rectangle area)
    {
        DrawRectangle(whitePixel, batch, area, 1, Color.White);
    }
    public static void DrawCircle(Texture2D whitePixel, SpriteBatch spritbatch, IntegerVector2 center, float radius, Color color, int lineWidth = 2, int segments = 16)
    {
        Vector2[] vertex = new Vector2[segments];

        double increment = Math.PI * 2.0 / segments;
        double theta = 0.0;

        for (int i = 0; i < segments; i++)
        {
            vertex[i] = center.ToVector2() + radius * new Vector2((float)Math.Cos(theta), (float)Math.Sin(theta));
            theta += increment;
        }

        DrawPolygon(whitePixel, spritbatch, vertex, segments, color, lineWidth);
    }
    public static void DrawPolygon(Texture2D whitePixel, SpriteBatch spriteBatch, Vector2[] vertex, int count, Color color, int lineWidth)
    {
        if (count > 0)
        {
            for (int i = 0; i < count - 1; i++)
            {
                DrawLineSegment(whitePixel, spriteBatch, vertex[i], vertex[i + 1], color, lineWidth);
            }
            DrawLineSegment(whitePixel, spriteBatch, vertex[count - 1], vertex[0], color, lineWidth);
        }
    }
    public static void DrawLineSegment(Texture2D whitePixel, SpriteBatch spriteBatch, Vector2 point1, Vector2 point2, Color color, int lineWidth)
    {
        float angle = (float)Math.Atan2(point2.Y - point1.Y, point2.X - point1.X);
        float length = Vector2.Distance(point1, point2);

        spriteBatch.Draw(whitePixel, point1, null, color,
        angle, Vector2.Zero, new Vector2(length, lineWidth),
        SpriteEffects.None, 0f);
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-12-15T18:19:51.537

这是我的做法：

```
 private void OutLine_Box(SpriteBatch sbatch, Rectangle rect)
    {
        List<Vector2> pixels = new List<Vector2>();
        for (int x = rect.X; x < rect.X + rect.Width; x++)
        {
            for (int y = rect.Y; y < rect.Y + rect.Height; y++)
            {
                if (y == rect.Y || y == rect.Y + rect.Height - 1)
                    pixels.Add(new Vector2(x, y));
                if (x == rect.X || x == rect.X + rect.Width - 1)
                    pixels.Add(new Vector2(x, y));
            }
        }

        foreach (Vector2 v in pixels)
            sbatch.Draw(PixelTexture, v, OutLineColor);
    } 
```

# python - 在没有内置函数的情况下按降序排列文件中的元素

> ID：13893961
> 
> 赞同：0
> 
> 时间：2012-12-15T16:25:15.103
> 
> 标签：python, file, list, sorting

我按照冒泡排序重新执行了程序。

```
def main():
try:
    array=[]
    file=open(input("Please enter the name of the file you wish to open:" ))
    A =file.read().split()

    file.close()

    n = len(A)
    print ("These following", n,"numbers are in the inputted file:\n", A)
    for i in range(n):
        for j in range(1,n-i):

            if A[j-1] < A[j]:

                (A[j-1], A[j]) = (A[j],A[j-1])
    print("We can now organize it in descending order:\n", A)

except IOError as e:
    print("({})".format(e))

Output_File = input("Where would you like to save this data?")
fileObject = open(Output_File, 'a')
fileObject.write(str(Output_File)+'\n')
print("Your file is now saved as", Output_File,". \n Have a nice day!")
fileObject.close() 
```

如果**名称**== '**主要**': main()

问题是，它对列表中的每 3 个数字进行排序。所以如果我有 9 个数字，它将有 3 个不同的数字。例如, 1 -3 10 6 5 0 3 -5 20, 将是, ['6', '5', '3', '20', '10', '1', '0', '-5 '，'-3']。现在可能出了什么问题？我做对了输出文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T16:28:12.563

你有这条线的地方：

```
x = minimum 
```

我想你的意思是：

```
minimum = x 
```

好像你刚刚得到的分配顺序不正确。`x`在迭代期间分配给变量`A`不会有任何副作用。

**编辑**

正如我在评论中发现的那样，您的问题是您正在使用该`readlines()`功能，但文件中只有一行。您真正想要做的是阅读该行，然后用于`split()`生成一个列表：

```
A = file.read().split() 
```

请记住，由于在与“<”进行比较时使用的是字符串，因此在代码运行后您将不会获得数字顺序，您将获得字典顺序。

例子：

输入：

```
5 4 14 6 -1 2 0 9 8 7 3 4 -10 200 
```

输出：

```
['-1']
['-1', '-10']
['-1', '-10', '0']
['-1', '-10', '0', '14']
['-1', '-10', '0', '14', '2']
['-1', '-10', '0', '14', '2', '200']
['-1', '-10', '0', '14', '2', '200', '3']
['-1', '-10', '0', '14', '2', '200', '3', '4']
['-1', '-10', '0', '14', '2', '200', '3', '4', '4']
['-1', '-10', '0', '14', '2', '200', '3', '4', '4', '5']
['-1', '-10', '0', '14', '2', '200', '3', '4', '4', '5', '6']
['-1', '-10', '0', '14', '2', '200', '3', '4', '4', '5', '6', '7']
['-1', '-10', '0', '14', '2', '200', '3', '4', '4', '5', '6', '7', '8']
['-1', '-10', '0', '14', '2', '200', '3', '4', '4', '5', '6', '7', '8', '9'] 
```

请注意上面如何`200`不是在末尾而是在之后`2`，要获得数字顺序，您需要将字符串强制转换为数字数据类型，可能是`int`. 当您使用以下函数从文件中读取数字时，您可以轻松地做到这一点`map`：

```
A = map(int, file.read().split()) 
```

这将在将元素存储到 A*之前*`int`对split 返回的每个元素调用 cast 函数。在此更改之后，这是我从您的程序中看到的输出：

 *输入：

```
5 4 14 6 -1 2 0 9 8 7 3 4 -10 200 
```

输出：

```
[-10]
[-10, -1]
[-10, -1, 0]
[-10, -1, 0, 2]
[-10, -1, 0, 2, 3]
[-10, -1, 0, 2, 3, 4]
[-10, -1, 0, 2, 3, 4, 4]
[-10, -1, 0, 2, 3, 4, 4, 5]
[-10, -1, 0, 2, 3, 4, 4, 5, 6]
[-10, -1, 0, 2, 3, 4, 4, 5, 6, 7]
[-10, -1, 0, 2, 3, 4, 4, 5, 6, 7, 8]
[-10, -1, 0, 2, 3, 4, 4, 5, 6, 7, 8, 9]
[-10, -1, 0, 2, 3, 4, 4, 5, 6, 7, 8, 9, 14]
[-10, -1, 0, 2, 3, 4, 4, 5, 6, 7, 8, 9, 14, 200] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:12:38.000

我完成了！我只需要想出一种不同的方法将我的列表变成整数。这里是：

```
def main():
try:
    file=open(input("Please enter the name of the file you wish to open:" ))
    A = []
    #Here I convert the list to integers to separate as numbers in order to sort later
    for val in file.read().split():
        A.append(int(val))
    file.close()
    n = len(A)
    print ("These following", n,"numbers are in the inputted file:\n", A)

    for i in range(n):
        for j in range(1,n-i):
            if A[j-1] < A[j]:
                (A[j-1], A[j]) = (A[j],A[j-1]) #swap
    print("We can now organize it in descending order:\n", A)

    Output_File = input("Where would you like to save this data?")
    fileObject = open(Output_File, 'a')
    fileObject.write(str(Output_File)+'\n')
    print("Your file is now saved as",Output_File,".\nHave a nice day!")
    fileObject.close()

except IOError as e:
    print("({})".format(e))

if __name__ == '__main__':
main() 
```*

# c++ - 在另一台 Mac 上运行应用程序

> ID：13893962
> 
> 赞同：2
> 
> 时间：2012-12-15T16:25:20.283
> 
> 标签：c++, xcode, macos, cmake

我在 Xcode、C++ 中创建了一个非常简单的 Hello World 应用程序：

```
#include <iostream>

using namespace std;

int main(int argc,  char * argv[])
{
   cout << "Hello World!" << endl;
   return 0;
} 
```

Xcode 项目是用 Cmake 创建的：

```
cmake_minimum_required(VERSION 2.6)

set (CMAKE_VERBOSE_MAKEFILE ON)

PROJECT ( Prueba )

SET ( GedcomToHtml_SRCS         
    main.cpp
)
INCLUDE_DIRECTORIES( ${CMAKE_BINARY_DIR} ${PROJECT_SOURCE_DIR} )

#enable all warnings
ADD_DEFINITIONS ( -Wall )

#Here we instruct to build sample executable from all the source files
ADD_EXECUTABLE ( Prueba ${GedcomToHtml_SRCS} 
)

#last thing that we need to do is to tell CMake what libraries our executable needs
#Luckily FIND_PACKAGE preparted QT_LIBRARIES variable for us
TARGET_LINK_LIBRARIES( Prueba ) 
```

当我编译它时，会在 Debug 文件夹中创建一个终端应用程序。我已将此应用程序发送到另一台计算机并尝试运行它，但另一台计算机响应分段错误。

原mac的OS是10.8.2，目标mac的OS是10.6.8。

如何在目标 Mac 中运行在我的原始 Mac 中创建的应用程序？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T18:46:52.223

You should instruct the compiler what the earliest Mac OS X version is on which the program will run. To do this you can use `-mmacosx-version-min=10.6` in your case given it should also run on 10.6.8\. And additionally you should set the root directory for headers using the `-isysroot <10.6 SDK directory>` flag.

So in CMake this would amount to the following:

```
SET(SDK "10.6")
SET(DEV_SDK "/Developer/SDKs/MacOSX${SDK}.sdk")

ADD_DEFINITIONS(
  -isysroot ${DEV_SDK} 
  -mmacosx-version-min=${SDK}
  )

SET(
  CMAKE_EXE_LINKER_FLAGS
  "${CMAKE_EXE_LINKER_FLAGS} -isysroot ${DEV_SDK} -mmacosx-version-min=${SDK}"
  )
SET(
  CMAKE_SHARED_LINKER_FLAGS
  "${CMAKE_SHARED_LINKER_FLAGS} -isysroot ${DEV_SDK} -mmacosx-version-min=${SDK}"
  )
SET(
  CMAKE_MODULE_LINKER_FLAGS
  "${CMAKE_MODULE_LINKER_FLAGS} -isysroot ${DEV_SDK} -mmacosx-version-min=${SDK}"
  ) 
```

Note that your SDK might be located somewhere else so substitute the correct directory.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T12:54:14.317

原来我需要做的就是将此行添加到我的 CMakeLists.txt 文件中：

设置（CMAKE_OSX_DEPLOYMENT_TARGET 10.6）

谢谢您的帮助。

# javascript - KineticJS 中的约束/比例缩放

> ID：13893966
> 
> 赞同：1
> 
> 时间：2012-12-15T16:25:44.317
> 
> 标签：javascript, jquery, html, canvas, kineticjs

当拖动图像的 4 个角手柄中的任何一个时，图像应按比例向上或向下缩放。

**问题：**使用下面链接的 jsfiddle 中所示的当前尝试，当`topLeft`垂直拖动手柄时，图像会按比例重新缩放，但其他手柄会闪烁。当`topLeft`水平拖动相同的手柄时，图像只是移动而不调整大小。

KineticJS 如何实现比例缩放？谢谢！！！

**jsfiddle：http:** [//jsfiddle.net/zb3Km/](http://jsfiddle.net/zb3Km/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T19:28:02.480

通过这个......
[数学/算法适合图像到屏幕保留纵横比](https://stackoverflow.com/questions/6565703/math-algorithm-fit-image-to-screen-retain-aspect-ratio)

我懂了.....

```
function update(group, activeAnchor) {
    var topLeft     = group.get(".topLeft")[0];
    var topRight     = group.get(".topRight")[0];
    var bottomRight = group.get(".bottomRight")[0];
    var bottomLeft     = group.get(".bottomLeft")[0];
    var image         = group.get(".image")[0];

    // update anchor positions
    switch(activeAnchor.getName()) {
        case "topLeft":

            topRight.attrs.y = activeAnchor.attrs.y;
            //topRight.attrs.x = activeAnchor.attrs.x + image.getWidth();
            bottomLeft.attrs.x = activeAnchor.attrs.x;
           // bottomRight.attrs.x = activeAnchor.attrs.x + image.getWidth();

            break;
        case "topRight":
            topLeft.attrs.y = activeAnchor.attrs.y;
            bottomRight.attrs.x = activeAnchor.attrs.x;
            break;
        case "bottomRight":
            bottomLeft.attrs.y = activeAnchor.attrs.y;
            topRight.attrs.x = activeAnchor.attrs.x;
            break;
        case "bottomLeft":
            bottomRight.attrs.y = activeAnchor.attrs.y;
            topLeft.attrs.x = activeAnchor.attrs.x;
            break;
    }

    //https://stackoverflow.com/questions/6565703/math-algorithm-fit-image-to-screen-retain-aspect-ratio

    var ws= topRight.attrs.x - topLeft.attrs.x;
    var hs = bottomLeft.attrs.y - topLeft.attrs.y;
    var wi =   image.getWidth();
    var hi = image.getHeight();
    var rs = ws/hs;
    var ri = wi/hi;
    if (rs>ri){
        var width =wi * hs/hi;
        image.setSize(width, hs);
        image.setPosition( topLeft.attrs.x+((ws-width)/2), bottomLeft.attrs.y-((hi)));

    } else {
        var height=hi * ws/wi;
        image.setSize(ws, height);
         image.setPosition( topRight.attrs.x-wi, topLeft.attrs.y+((hs-height)/2));
    }

} 
```

[http://jsfiddle.net/zb3Km/2/](http://jsfiddle.net/zb3Km/2/)
编辑： http:
[//jsfiddle.net/zb3Km/3/](http://jsfiddle.net/zb3Km/3/)
在完成调整大小后使锚点恢复原状

EDIT2：现在将调整大小锚定到对角。
[http://jsfiddle.net/jdA3y/](http://jsfiddle.net/jdA3y/)

# django - 多对多字段的详细名称

> ID：13893967
> 
> 赞同：0
> 
> 时间：2012-12-15T16:25:45.417
> 
> 标签：django, django-models, django-admin

我是 django 的新手。我的 ManyToManyField 需要一个 verbose_name，所以我使用了这个：

```
#encoding:UTF-8
name = models.ManyToManyField(Name, verbose_name = "طبقه") 
```

但在管理界面我看到这个： ![第一的](../Images/f55e2119e5fbaf35cfa19e00e58701f6.png)

当我使用英文名称时它工作正常，我看到了这个！

```
name = models.ManyToManyField(Name, verbose_name = "Test") 
```

![第二](../Images/41b442271ed1ac77ed2d720e92b52d50.png)

我应该怎么办？

# telerik - Kendo UI ASP.NET MVC 包装器许可

> ID：13893972
> 
> 赞同：2
> 
> 时间：2012-12-15T16:26:23.800
> 
> 标签：telerik, licensing, kendo-ui

**问题：**

nopCommerce 当前使用 TelerikMVC 扩展，它具有客户端代码的服务器端包装器，可免费用于开源项目。

对于 Kendo UI（TelerikMVC 的替代品）是否正确，只有客户端库可用于开源项目，而不是服务器端包装器？

**评论：**

如果是这样，Telerik，这将烧毁开源社区。就服务器端包装器而言，您发布了一个对开源友好的版本，然后用另一种不友好的产品替换它。不酷！

我非常想更新 nopCommerce 以使用 KendoUI，但是手动执行所有客户端标记/脚本编写工作量太大。

事后诸葛亮总是 20/20。Ubmbraco 5, TelerikMVC, ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T16:50:36.870

是的。只有 Kendo UI Web 在 GPL 许可下可用。Kendo UI Complete for ASP.NET MVC**不**作为开源提供。

你有两个选择：

1.  继续使用 Telerik Extensions for ASP.NET MVC。如果您不需要 Kendo UI 的任何功能，则根本不需要升级。

2.  使用 Kendo UI Web GPL。是的，您需要编写 JavaScript 而不是 C# 代码。

# shell - SSH 查找某天修改过的文件

> ID：13893974
> 
> 赞同：2
> 
> 时间：2012-12-15T16:26:31.737
> 
> 标签：shell, unix, ssh, terminal

我试图从某一天发现一个修改过的文件。我一直在使用`find . -mtime -2`，但我需要更进一步，上周四和周四。

我对unix命令并不精通，所以任何帮助都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T16:39:51.100

如果要查找上周四**之后修改的文件，请使用此命令**

```
find . -newermt 'last Thursday' 
```

上周四之前

```
find . -type f \
    -not \
    -newermt "2012-12-13 00:00:00" 
```

只有星期四

```
find . -type f \
    -newermt "2012-12-13 00:00:00" 
    -not \
    -newermt "2012-12-14 00:00:00" 
```

上个星期四是`2012-12-13`。当您搜索任何修改日期低于星期四的文件时，`find`它应该是`-not newermt '2012-12-13'`. 当您搜索仅在本周四修改的文件时，它低于周三但高于周四。是的，如果您愿意，您可以省略`00:00:00`部分。

**注意：** POSIX`find`没有`-newerXY`. 它只有`-newer`. 要转换`-newermt "2012-12-13 00:00:00"`使用它。

```
touch -d "2012-12-13 00:00:00" pointA

find . -type f \
        -not \
        -newer pointA 
```

# android - 如何将自定义 CursorAdapter 与 AutoCompleteTextView 一起使用？

> ID：13893977
> 
> 赞同：4
> 
> 时间：2012-12-15T16:27:00.180
> 
> 标签：android

我正在尝试使用自定义`CursorAdapter`（通过继承 from `CursorAdapter`）覆盖`bindView(...)`并`newView(...)`按照此处的建议（[examplecursoradapter](http://blog.cluepusher.dk/2009/11/16/creating-a-custom-cursoradapter-for-android/)）。

但是，当与 一起使用时`AutoCompleteTextView`，插入的自动完成值（即用户从下拉列表中选择值时输入的值）是 的`toString()`值`SqliteCursor`。如何使用此方法获取下拉列表中的值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-15T17:59:31.447

您还需要`convertToString(Cursor)`为您的自定义 CursorAdapter 定义方法。

例如：

```
public static class YourAdapter extends CursorAdapter implements Filterable{
    //bindView(), newView() etc...

    @Override
    public String convertToString(Cursor cursor) {
        //returns string inserted into textview after item from drop-down list is selected.
        return cursor.getString(cursor.getColumnIndexOrThrow(NAME_OF_COLUMN_DISPLAYED_IN_DROP_DOWN));
    }
} 
```

您还可以查看 ApiDemos 中的示例（文件 AutoComplete4.java 和 AutoComplete5.java 来自`<android-sdk-dir>\samples\android-15\ApiDemos\src\com\example\android\apis\view`

# javascript - 加快在 html5 画布中加载和绘制多幅图像

> ID：13893980
> 
> 赞同：0
> 
> 时间：2012-12-15T16:27:14.403
> 
> 标签：javascript, html, canvas

我目前在加载图像和在画布中绘制时遇到问题。在 localhost 中，它运行顺利，但是当放到我的网络服务器上时，它根本不像 localhost 那样运行顺利。我需要将第二页刷新到树时间然后它才能工作。那么是否有其他方法来处理这个问题。以下是我的示例代码

```
function action1() {
 var imgObj = new Image()
 timer = setInterval(function(){
         imgObj.src = 'img/velOpen/' + (index++) + '.png';
         imgObj.onload = function(){
                 context.clearRect(0,0, context.canvas.width, context.canvas.height);
                 context.drawImage(imgObj, X, y);   
         }
        },100);
}; 
```

注意：我有一些尺寸只有 32 kb 的图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T17:10:08.730

在开始绘制到画布之前，您需要等到所有图像都加载完毕。

这是一个如何在最后一张图像加载后立即调用函数的示例。

```
function loadImageGroup(urls, onCompleteFunc) {
    var numImagesNotYetLoaded = urls.length;
    var urlToImageMap = {};    
    var markLoaded = function() {
        if (--numImagesNotYetLoaded == 0)
            onCompleteFunc(urlToImageMap);
    }

    for (var i = 0; i < urls.length; i++) {
        var img = new Image();
        img.onload = markLoaded;
        img.src = urls[i];
        urlToImageMap[urls[i]] = img;
    }
}
var urls = [
    'http://www.google.com/images/srpr/logo3w.png'
  , 'http://www.google.com/images/icons/product/chrome-48.png'
];
loadImageGroup(urls, function(urlToImageMap) {
    //all are loaded. draw to canvas here
    var imgObject = urlToImageMap['http://www.google.com/images/srpr/logo3w.png'];
    alert(imgObject.width)
}); 
```

[http://jsfiddle.net/vHwKr/1/](http://jsfiddle.net/vHwKr/1/)

那只是一个样本。我这么说是因为它并不完全健壮。想象一下，如果由于某种原因无法加载图像 - 永远不会调用 on complete 函数。也许你会想要一个超时或什么的......

# groovy - 构建面板后如何将按钮组动态添加到面板

> ID：13893983
> 
> 赞同：3
> 
> 时间：2012-12-15T16:27:41.917
> 
> 标签：groovy, swingbuilder

我正在使用 Groovy Swingbuilder，并且我想在构建初始面板后动态填充单选按钮 - 按钮组。示例：我有一个有几个选项的面板。根据选择的选项，我需要用一组单选按钮填充按钮组。每个选项的单选选项都不同。

我的面板看起来像这样：

```
panel(id:"chooseClass", visible:true, layout: new BL()){
             vbox(constraints: BL.CENTER){
                 label("Player Statistics", horizontalAlignment: 0)
                 label(id: 'raceLabel', text: raceLabelText, horizontalAlignment: 0)
                 label(id: 'statLabel', text: statLabelText, horizontalAlignment: 0)
                 panel(id:'classGroupPanel', layout: new GridLayout(1,9)){
                    myButtonGroup = buttonGroup(id:'classGroup')
                 }
             }
         } 
```

然后稍后在我的代码中我有这个方法：

```
def void setClassGroup(){
    def classButtons = plyGen.getAvailibleClass()
    // this is one way I've tried it
            gPane.edt{panel(id:'classGroupPanel', layout: new GridLayout(1,9)){
        buttonGroup(id:'classGroup').with{ group ->
            classButtonGroup.each{ radioButton(id: '${it.name}', CreateRadio("${it.name}"), mnemonic:"${it.mnenomic}", buttonGroup: group)}}
     }
    }
            // and this is another way I've tried it
    gPane.doOutside {
        this.classGroupPanel{ 
        buttonGroup(id:'classGroup').with{group ->
            classButtons.each{ gPane.radioButton(id: '${it.name}', CreateRadio("${it.name}"), mnemonic:"${it.mnenomic}", buttonGroup: myButtonGroup) }
            }   

        }
    }               

} 
```

这两种尝试都编译并运行没有错误，但我没有得到单选按钮列表。我希望有更多关于 swingbuilder 的文档。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T17:25:18.873

失踪`panel.revalidate()`？这家伙显示了一个单选按钮组，其中包含一些基于您选择的乐队的歌曲。歌曲呈现为单选按钮：

```
import groovy.swing.*
import javax.swing.*
import java.awt.*
import java.awt.BorderLayout as BL

def drawSongsPanel(songs) {
  def p
  new SwingBuilder().edt {
    p = panel(visible: true) {
      vbox(constraints: BL.CENTER) {
        buttonGroup().with { btn ->
          songs.each { 
            radioButton text:it, buttonGroup: btn
          }
        }
      }
    }
  }
  p
}

def getSongs(band) {
  switch ( band ) {
    case "stones": return ['start me up', 'jumpin jack flash', 'satisfaction']
    case "beatles": return ['hey jude', 'yellow submarine', 'yesterday']
  }
}

def chooseBand(event, panelBands) {
  panelBands.add drawSongsPanel(getSongs(event.actionCommand))
  panelBands.revalidate()
}

new SwingBuilder().edt {
  frame(defaultCloseOperation: JFrame.EXIT_ON_CLOSE, visible: true, size: [600,500]) {
    panel( visible: true, layout: new BL() ) {
      vbox(constraints: BL.CENTER){
        def panelBands
        panelBands = panel(id:'classGroupPanel', layout: new GridLayout(1,9)) {
          buttonGroup(id: 'classGroup').with { 
            radioButton text:"beatles", buttonGroup: it, actionPerformed:{e->chooseBand(e, panelBands)}
            radioButton text:"stones", buttonGroup: it, actionPerformed:{e->chooseBand(e, panelBands)}
          }
        }
      }
    }
  }
} 
```

# java - 在 IntelliJ IDEA 中编辑并继续？

> ID：13893984
> 
> 赞同：10
> 
> 时间：2012-12-15T16:27:42.440
> 
> 标签：java, debugging, intellij-idea

是否可以在使用 IntelliJ IDEA 社区版进行调试时编辑一些代码？我在选项中找不到此功能。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-15T16:53:54.050

是的，它被称为“热插拔”。您可以在调试过程中编译修改后的代码，类文件将被替换，直到您停止调试。确保在调试器设置中启用 HotSwap 选项。

**注意**：当您更改方法签名时，热插拔不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-01T13:23:32.447

如果您像我一样对“热插拔”上瘾，您会喜欢 DCEVM ( [https://dcevm.github.io/](https://dcevm.github.io/) )

使用 DCEVM，您几乎不需要重新加载调试会话。

不幸的是，我还没有为 .NET 找到类似的东西 :(

# javascript - 如果超过 10 个则删除

> ID：13893985
> 
> 赞同：3
> 
> 时间：2012-12-15T16:27:48.540
> 
> 标签：javascript, html, regex, ckeditor

我只想`&nbsp;`在任意两个单词之间最多允许 10 个单词并删除剩余的`&nbsp;`. 如何使用正则表达式在 JavaScript 中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T16:35:39.180

```
str.replace(/\ {11,}/g, "          "); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T17:45:28.180

我会首先创建一个 10 的`&nbsp;`变量

```
for (var spaces = '', i = 0; i < 10; i++) spaces += '&nbsp;'; 
```

然后我会在下面的正则表达式（p）中使用它作为替换

```
str = str.replace(/([^\s])?(\s|&nbsp;){11,}(?=[^\s]|$)/g, '$1'+spaces) 
```

以下是模式的细分：

```
([^\s])?          # 0 or 1 character other than white space
(\s|&nbsp;){11,}  # any white space or &nbsp; used more than 10
(?=[^\s]|$)       # followed by a character other than a white space
                  # or it is the end of string 
```

**编辑：**我替换了模式中的单词边界字符 ( `\b`)，因为它与 unicode 字符边界不匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T16:46:40.650

或者：

```
str.replace(/(\ {10})\ */g, "$1") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T17:01:59.193

您不必为此要求使用正则表达式。我们将在一个简单的函数中使用 JavaScript String 对象的[split](http://www.w3schools.com/jsref/jsref_split.asp)方法，如下所示：

```
function firstTen(txt){
arr = txt.split(" ");
out = '';
for (i = 0; i < arr.length; i++){
if (i < 10){
out += arr[i]+" ";
}
else{
out += arr[i];
}
}
    return out;
}
txt = "1 2 3 4 5 6 7 8 9 10 Apple Egypt Africa"
    alert(firstTen(txt));​ 
```

以下是一个演示：http: [//jsfiddle.net/saidbakr/KMQAV/](http://jsfiddle.net/saidbakr/KMQAV/)

# c# - 从 Windows Server 2003 机器上的 Winforms 应用程序建立 SQL Server 连接

> ID：13893987
> 
> 赞同：-1
> 
> 时间：2012-12-15T16:28:14.343
> 
> 标签：c#, windows, sql-server-2005

这个问题可能听起来有点幼稚。

用户需要在服务器上保留数据库，为此他购买了一台 HP 服务器机器，另一个终端将添加到该服务器上，我的 Winforms 应用程序将安装在该服务器上。所以我需要知道我应该建议他安装哪个操作系统，Windows Server 2003/2008，或者只是普通的WIN XP，并通过共享终端进行正常的联网，这样我的SQL Server 2005数据库就可以轻松安装。

其次，如果 SQL Server 安装在 Windows Server 2003/2008 或 WIN XP 上，我需要知道我需要对连接类进行哪些更改。目前我在同一台机器上有数据库和 Winforms 应用程序，所以我当前的连接没有问题

```
public SqlConnection con = 
    new sqlConnection("server=.;database=Database1;integrated security=sspi;username=sa;password=sa"); 
```

如果您需要任何其他详细信息，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T16:54:26.210

您不需要根据安装 SQL Server 的平台调整连接字符串 - 这与 ADO.NET 完全无关。

您的连接字符串将类似于

```
server=YourServerMachineNameHere;database=Database1;....... 
```

另外：您需要决定是否要使用`Integrated Security`（使用您当前的 Windows 凭据登录）

```
server=YourServerMachineNameHere;database=Database1;Integrated Security=SSPI; 
```

或者然后您将`user id/password`其用于您的应用程序：

```
server=YourServerMachineNameHere;database=Database1;user id=YourAppUser;pwd=top$ecret 
```

但不要在同一个连接字符串中指定两者（并且**永远不要**用作`sa`您的`user id`- 只是不要 - 甚至不要考虑它）。

[这个网站](http://www.connectionstrings.com)有**大量**的例子，说明连接字符串是什么样的，所有的选项是什么等等 - 去看看吧！

# android - 在蓝牙上共享一个 zip 文件

> ID：13893997
> 
> 赞同：2
> 
> 时间：2012-12-15T16:28:55.573
> 
> 标签：android, android-intent, bluetooth, zip, share

我在我的应用程序中创建了一个 Zip 文件，现在我想在 android 手机中的其他应用程序上共享这个 zip 文件，如蓝牙或 Gmail 或...。我用这个：

```
Intent shareIntent = new Intent();
shareIntent.setAction(Intent.ACTION_SEND);
shareIntent.putExtra(Intent.EXTRA_STREAM, zipName);
shareIntent.setType("*/*");
activity.startActivity(Intent.createChooser(shareIntent,activity.getResources().getText(R.string.send_to))); 
```

zipname 是我的 zip 文件路径。此代码通过按下按钮执行。将弹出一个包含所有应用程序的列表，但通过单击蓝牙，弹出窗口将关闭，没有别的！

为什么？请帮我。我需要打开蓝牙并打开蓝牙，......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T13:07:45.300

我自己解决了，zipname 是文件的路径，但它需要是 uri，所以我使用了这个代码

```
shareIntent.putExtra(Intent.EXTRA_STREAM, uri.fromfile(new File(zipName))); 
```

代替

```
shareIntent.putExtra(Intent.EXTRA_STREAM, zipName); 
```

# javascript - 如何使用javascript处理jsp页面并插入到主页

> ID：13893999
> 
> 赞同：0
> 
> 时间：2012-12-15T16:29:29.037
> 
> 标签：javascript, jquery, jsp

我正在尝试通过ajax请求处理一个jsp页面并将其插入到这样的主页中。

> $.get('链接到页面', function(data) { $('#formContainer').html(data); });

在我从服务器返回的 jsp 页面中，有一些我想包含在 html 中的 javascript 代码，并将处理表单事件（我有很多表单，每个表单都有不同的功能）

似乎没有将 javascript 代码添加到带有 html 代码的页面中。

有什么办法可以做我想要的吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T16:34:20.250

`$.get()`将去除`script`标签（请参阅文档）；

您可以使用`load()`which 将尊重脚本。您需要在它影响的 html 之后放置脚本，因为`document.ready`它已经在主页中出现。

```
$('#formContainer').load('link to page') 
```

API 参考：[http ://api.jquery.com/load/](http://api.jquery.com/load/)

文档解释脚本执行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T16:34:30.283

是的，正如您所注意到的，`<script>`当您将标签放入`.html()`. 我找到的唯一解决方案是遍历容器，找到所有脚本标签，然后手动执行它们。

**编辑：** charlietfl 有一个优越的解决方案（我以前对此一无所知）。我会将这篇文章留给无法使用该解决方案的任何人。