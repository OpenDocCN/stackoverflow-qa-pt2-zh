# StackOverflow 问答 15719000-15719999

# php - Cron 产生的结果与手动运行文件时不同吗？

> ID：15719001
> 
> 赞同：-2
> 
> 时间：2013-03-30T13:21:12.453
> 
> 标签：php, mysql, cron

我完全被难住了。我有一个文件，我需要每天运行两次，查询数据库并在满足某些条件时向我发送电子邮件。

这个文件，我们称之为 abc.php，如果我在浏览器中输入“www.mysite.com/abc.php”，文件运行完美。如果满足条件，我会收到一封电子邮件，上面写着（例如）“某某，这是信息：a、b、c。”

但是当我用 cron 调用文件时，由于某种原因，电子邮件出现了乱码。我得到“某某，这是信息部分”，但没有得到“a，b，c”。

我完全被难住了。“某某”也来自数据库，因为这两个地方都显示了我知道数据库查询正在工作。

我不明白为什么某些东西在 http 调用中可以正常工作，但在通过 cron 调用时却不能正常工作。是否有应该以不同方式设置的权限？以不同方式描述的目录树？我应该使用完整路径而不是相对路径吗？

在搜索中，我发现一个似乎与 php.ini 文件不同的问题，但我认为情况并非如此，因为我得到了一个数据库查询。我不认为这是一个编码问题，因为它在从浏览器调用时可以完美运行。但我确实怀疑这可能是由于路径设置不正确或 cron 作为不同用户运行或需要不同权限造成的。

任何帮助或建议都会很棒。

编辑：这是 cron 行。当我从浏览器运行文件时，我可以编辑它以匹配正在使用的任何 php.ini 吗？

```
/ramdisk/bin/php5 -c /my/home/php.ini /my/home/sendmetheemail.php 
```

它是否也有可能使用不同的mysql配置文件？php 部分似乎工作正常，但问题在于数据。

刚刚测试并且 wget 工作正常：

```
wget http://mydomain.com/sendmetheemail.php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T13:34:17.913

您有一个文件，您假设应该以相同的方式运行，但会产生不同的结果，因此显然您的假设是错误的。

当我遇到这种困境时，我`syslog(LOG_INFO,"Display some data.");`在我的代码中使用了一堆行。直接通过 cron verse 运行时检查它们之间的结果。如果一切都一样，那么您还没有遇到问题。

# css - 如何删除仅在 IE 中出现的动画？

> ID：15719012
> 
> 赞同：0
> 
> 时间：2013-03-30T13:22:08.347
> 
> 标签：css

我有一个关键帧动画，我相信 IE 10 是唯一能够播放此动画的 IE 浏览器。如果浏览器是 IE 并保留它（Chrome、Safari、FireFox），我怎么能删除这个动画？

动画如下所示：

```
// Animations
@-webkit-keyframes fadeIn { from { opacity:0; } to { opacity:1; } }
@-moz-keyframes fadeIn { from { opacity:0; } to { opacity:1; } }
@keyframes fadeIn { from { opacity:0; } to { opacity:1; } }
.fade-in { 
    opacity: 0; 
    -webkit-animation: fadeIn ease-in 1; 
    -moz-animation: fadeIn ease-in 1; 
    animation: fadeIn ease-in 1; 
    -webkit-animation-fill-mode: forwards; 
    -moz-animation-fill-mode: forwards; 
    animation-fill-mode: forwards; 
    -webkit-animation-duration: .5s; 
    -moz-animation-duration: .5s; 
    animation-duration: .5s;
}
.fade-in.one { 
    -webkit-animation-delay: 0.5s; 
    -moz-animation-delay: 0.5s; 
    animation-delay: 0.5s;
}
.fade-in.two { 
    -webkit-animation-delay: 1.2s; 
    -moz-animation-delay: 1.2s; 
    animation-delay: 1.2s;
} 
```

**小提琴** [http://jsfiddle.net/mkerny45/6yYC9/](http://jsfiddle.net/mkerny45/6yYC9/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:11:11.910

使用条件注释来关闭动画。您需要使用 javascript 为 ie10 附加 cc，它应该如下所示：

```
<!--[if !IE]><!-->  
<script> 
// detect ie10, attach class of ie10 to html element 
if(/*@cc_on!@*/false){document.documentElement.className+=' ie10';}  
</script>  
<!-->![endif]-->  
<style>  
.ie10 .animationclass{}  
</style>
```

您可以在此处查看要点：[https](https://gist.github.com/jalbertbowden/5174156)
://gist.github.com/jalbertbowden/5174156 此处 的脚本工作演示：http: [//dev.bowdenweb.com/ua/browsers/ie/ie10-detection-via-cc.html](http://dev.bowdenweb.com/ua/browsers/ie/ie10-detection-via-cc.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T13:52:53.290

我发现[IE10 不再阅读条件注释。](https://stackoverflow.com/a/9900331/2114572).

所以你可以使用jQuery：

```
if ($.browser.msie && $.browser.version == 10) {
  $("html").removeClass("someClass");
} 
```

或 JavaScript：

```
if(Function('/*@cc_on return document.documentMode===10@*/')()){
  document.documentElement.className ='';
} 
```

# matlab - 矩阵之间的行移位matlab

> ID：15719014
> 
> 赞同：0
> 
> 时间：2013-03-30T13:22:41.427
> 
> 标签：matlab, rows, shift

我正在做一个关于粒子群优化的项目，在 Matlab 中编码。我需要用矩阵 B 中的一些行替换矩阵 A 的行，并从矩阵 B 中删除这些行。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T13:32:10.253

把你的行索引放在向量中，比如说

```
indexA=[0 0 0 1 0 1 1 0].
indexB=[0 1 0 1 0 1]. 
```

分区 B 到

```
A(indexA,:) = B(indexB,:);
B(indexB,:) = []; 
```

# asp.net - how to concatenate these two regular expression in one

> ID：15719016
> 
> 赞同：0
> 
> 时间：2013-03-30T13:22:56.853
> 
> 标签：asp.net, regex, asp.net-mvc-3

I am using regular expression validation in asp.net and have two regular expressions First is to prevent special characters `[A-Za-z0-9_]+` Second is to validate min max range `(\s|.){6,15}`

I want to merge these tow in one validation expression, please suggest me how I can do it

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T13:28:35.027

If I understood the question correct:

```
[A-Za-z0-9_]{6,15} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T13:28:43.807

Maybe

```
"[A-Za-z0-9_\s]{6,15}" 
```

is what you need.

# jquery - jQuery Ajax & WebMethod Call

> ID：15719017
> 
> 赞同：0
> 
> 时间：2013-03-30T13:23:00.647
> 
> 标签：jquery, ajax, webmethod

I am trying to call SendInfo method by clicking on some label from codebehind file for aspx with jQuery.ajax. But all the time it goes to 'error' part, not success, and string isn't returning from method.

So tell me, please, what am i doing wrong here?

*just started to learn ajax.*

Index.aspx :

```
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
<script type='text/javascript' src='../../Scripts/jquery-1.4.1.min.js'></script>
<script type="text/javascript" >
    $(document).ready(function () {
        $("#Result").click(function () {
            $.ajax({
                type: "POST",
                url: "Index.aspx/SendInfo",
                data: "{}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#Result").text(msg.d);
                },
                error: function () {
                    $("#Result").text("adas");
                }
            });
        });
    });
</script>
<div id="Result">Click here for the time.</div>
</asp:Content> 
```

Codebehind file :

```
public class Index : ViewPage
{
    [WebMethod]
    public static string SendInfo()
    {
        return "Info actually sended";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T14:31:25.100

At a quick glance I would say it might be due to the "dataType" parameter being set to "json". As this tells it you are expecting a JSON object back, so it will try to parse the response as such and consequently fail due to it being plain-text.

You can just remove the "dataType" parameter completely (and also the empty "data" one) and jQuery will hazard a guess about the content returned and should in this case correctly predict that the response is plain-text.

You may also need to specify the fully qualified URL of your AJAX location and change the "msg.d" in the success function to just be "msg", though this depends on the particular options set on the server (the ".d" is a security feature introduced by Microsoft).

# ruby - 使用 Mechanize for Ruby 上传文件

> ID：15719021
> 
> 赞同：4
> 
> 时间：2013-03-30T13:23:33.543
> 
> 标签：ruby, mechanize

文件上传无法使用：

```
form.file_upload_with(:name => 'image[1]').file_name = '/tmp/image.jpg'
form.submit 
```

这是一个过时的例子：[https ://github.com/sparklemotion/mechanize/blob/master/examples/flickr_upload.rb](https://github.com/sparklemotion/mechanize/blob/master/examples/flickr_upload.rb)

我在两个不同的网站上试过这个。

我正在使用机械化 2.6.0。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-02-23T08:41:31.620

有点题外话，但是我发现使用 Mechanize 上传文件的另一种方法很有用，特别是如果您没有方便的 HTML 表单，那就是只使用`Mechanize.post`一个`File`实例：

```
a = Mechanize.new
a.post(url, {
    "file1" => File.new("/tmp/image.jpg")
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-27T05:43:40.913

尝试这个：

```
file = File.join( APP_ROOT, 'tmp', 'image.jpg')
form.file_uploads.first.file_name = file 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-30T14:16:55.137

尝试：

```
form_with(:method => /POST/) do |form|
    form.file_uploads.first.file_name = '/tmp/image.jpg'
end.submit 
```

# objective-c - Objective C - fatal error

> ID：15719023
> 
> 赞同：-2
> 
> 时间：2013-03-30T13:23:39.710
> 
> 标签：objective-c, button

I have a problem with my Xcode app, When I push a button, my app crashes.

Here is my button's action, I also declared variables, strings, etc... but it isn't in this code:

```
{
    NSLog(@" - Writing Data.plist Labels");
    NSString *error;
    NSString *rootPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

    NSString *plistPath = [rootPath stringByAppendingPathComponent:@"Data.plist"];
    NSDictionary *plistDict = [NSDictionary dictionaryWithObjects:
                               [NSArray arrayWithObjects: compteur01, compteur02, compteur03, compteur04, compteur05, compteur06, nil]
                                                          forKeys:[NSArray arrayWithObjects: @"name1", @"name2", @"name3", @"name4", @"name5", @"name6", nil]];
    NSData *plistData = [NSPropertyListSerialization dataFromPropertyList:plistDict
                                                                   format:NSPropertyListXMLFormat_v1_0
                                                         errorDescription:&error];
    if(plistData) {
        [plistData writeToFile:plistPath atomically:YES];
    }
    else {
        NSLog(@"Error writeToFile:plistData:labels");
        [error release];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T13:30:42.223

Aparently `compteur01` is nil. Most likely the other compteur0x are nil too. But for this message at least the first one is nil.

Make sure that none of the objects added to the dictionary are nil. Use `NSNULL` instead if you need them to represent a nil/null value.

# reporting-services - Tablix row sum by one column value

> ID：15719026
> 
> 赞同：0
> 
> 时间：2013-03-30T13:23:48.933
> 
> 标签：reporting-services, expression, ssrs-tablix

I have a tablix with two columns. One is for tax rate (0%, 5%, 10%... - `=Fields!TaxRate.Value`), other for total tax values (`=Fields!TotalTax.Value`).

In my report I receive these values as:

1.  Tax rate 20% - $500
2.  Tax rate 5% - $20
3.  Tax rate 20% - $450
4.  Tax rate 5% - $25

How can I put all the same tax rates in one row and sum up the values, by same tax rate, such that the result is:

1.  Tax rate 20% - $950
2.  Tax rate 5% - $45

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T13:37:06.700

You'll need to add a **Group** based on `TaxRate` to the **Tablix**. The **Group** will be grouped on `Fields!TaxRate.Value`. When adding the **Group**, make sure to include a Header or Footer.

In the Header or Footer row that's created, you can add a field with the expression `=Sum(Fields!TotalTax.Value)`, which will display the total tax for each different `TaxValue` **Group**.

See [Add or Delete a Group in a Data Region](http://msdn.microsoft.com/en-us/library/ms156487%28v=sql.100%29.aspx) for specific implementation details.

# codeigniter - CodeIgniter：第一次启动时找不到 404 页面

> ID：15719038
> 
> 赞同：0
> 
> 时间：2013-03-30T13:25:04.577
> 
> 标签：codeigniter, http-status-code-404

美好的一天，我使用了一点 codeIgniter，但是每当我们从他们的网站下载 codeIgniter 框架并提取到服务器根文件夹后。如果我们访问框架，我们通常会看到一个**欢迎**页面。但这是另一种情况，我看到**404** page not found 错误页面。我已经尝试了很多，但无法确定显示**404**页面而不是漂亮的**欢迎**页面背后的黑客是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T13:28:40.780

不确定它是否有帮助，但请检查 .htaccess 和路由。我刚刚回答了一个类似的问题，在这里[将变量传递给 codeigniter 中的默认控制器](https://stackoverflow.com/questions/15718850/passing-variable-to-default-controller-in-codeigniter)

# ios - Custom UITableViewCell with UIImageView not showing image

> ID：15719039
> 
> 赞同：1
> 
> 时间：2013-03-30T13:25:21.337
> 
> 标签：ios, objective-c, ios5, ios6

I have a custom cell with UIImageView, and it is not showing the image. I have tried setting image to default cell.imageView.image property, and it works just fine, but doesn't work with my custom ImageView.

I load my custom Cell from Xib, and I believe it has to do with lazy loading of UIImageView. How do I make it work? Here is my code:

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"MyCell";
    DVGTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    cell.tag = indexPath.row;

    if (self.loader.parsedData[indexPath.row] != nil)
    {
        cell.imageCustom.image = nil;

        dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);
            dispatch_async(queue, ^(void) {

                NSString *url = [self.loader.parsedData[indexPath.row] objectForKey:@"imageLR"];
                NSData *imageData = nil;
                if ([self.cache objectForKey:url] != nil)
                {
                    imageData = [self.cache objectForKey:url];
                }

                else
                {
                    imageData = [NSData dataWithContentsOfURL:[NSURL URLWithString:url]];
                [self.cache setObject:imageData forKey:[self.loader.parsedData[indexPath.row] objectForKey:@"imageLR"]];
                }
                dispatch_async(dispatch_get_main_queue(), ^{

                    if (cell.tag == indexPath.row) {
                        UIImage *image = [[UIImage alloc] initWithData:imageData];
                        cell.imageCustom.image = image;
                        [cell setNeedsLayout];
                    }
                });
            });
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T14:27:19.247

I usually do Lazy loading for ImageViews with this piece of code, hope it helps:

```
- (void) loadImageForImageView:(UIImageView *)theImageView WithURL:(NSURL *)url {    

    NSOperationQueue *queue = [NSOperationQueue new];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url cachePolicy:NSURLRequestReturnCacheDataElseLoad timeoutInterval:3.0];
    [NSURLConnection sendAsynchronousRequest:request queue:queue completionHandler:^(NSURLResponse *reponse, NSData *data, NSError *error) {

        UIImage *image = [UIImage imageWithData:data];

        dispatch_async(dispatch_get_main_queue(), ^{

            theImageView.image = image;
            for (UIActivityIndicatorView *spinner in theImageView.subviews) {
                [spinner removeFromSuperview];
                break;
            }
        });

    }];
} 
```

In your cellForRowAtIndexPath:

```
UIActivityIndicatorView *spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
[spinner setColor:[UIColor darkGrayColor]];
spinner.frame = CGRectMake(130 , 53, 20, 20);
[spinner startAnimating];
[imageCell addSubview:spinner];
[self loadImageForImageView:imageCell WithURL:imageURL]; 
```

Where imageCell is your UIImageView.

# node.js - Nodejitsu 和 Twitter 流 API - 多次断开连接

> ID：15719041
> 
> 赞同：0
> 
> 时间：2013-03-30T13:25:26.593
> 
> 标签：node.js, twitter, streaming, socket.io, nodejitsu

嗨，我这几天一直在努力解决这个问题。我有一个简单的 node.js 应用程序，它连接到 Twitter 的流 API 并跟踪一些术语。作为一个术语，客户端会收到一个 websocket 通知。我已确保我的 OAuth 凭据仅由该应用程序使用，并且与流 API 的连接仅在应用程序启动时发生。一直发生的事情是我得到 200 ok 响应，但随后流断开连接。我将其设置为在 30 秒内重新连接，但这变得荒谬。重新启动应用程序后几分钟似乎没问题，然后又回到反复断开连接。错误是 {"disconnect":{"code":7,"stream_name":"XXXXX-statuses158325","re​​ason":"admin logout"}}。我已经通过多个客户端连接在本地运行了同一个应用程序并且没有遇到问题。我查看了其他托管服务，但我找不到支持 websockets 的服务，而无需恢复到 socket.io 上的慢长轮询选项（这不适用于我的应用程序的目的）。

关于为什么这种情况不断发生的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T14:55:09.270

该错误意味着您正在使用相同的凭据再次连接 ( [https://dev.twitter.com/discussions/11251](https://dev.twitter.com/discussions/11251) )。一个原因可能是运行超过 1 架无人机。

如果这没有帮助，请加入我们[http://webchat.jit.su](http://webchat.jit.su)，我们会尽力帮助您：D

-打哈欠

# winforms - 管理 GridView 中的选项卡索引

> ID：15719047
> 
> 赞同：0
> 
> 时间：2013-03-30T13:25:54.190
> 
> 标签：winforms, gridview, key-value, tabindex

我在 gridview 中有 3 列 - 代码、数量、名称。如果单元格（说代码）处于编辑模式，按箭头或 Tab 键将触发“CellEndEdit”事件，然后将选择移动到下一个细胞。如果它是箭头键，我希望选择不同的单元格，如果它是选项卡，我希望选择另一个单元格。例如：
在右箭头键上：代码 -> 数量
在选项卡上按：代码 -> 名称

单元格进入编辑模式后，datagridview 的键事件（向下、向上、按下）不会触发。那么，当单元格处于编辑模式时，如何获取最后按下的键的值。我必须在 CellEndEdit 事件中编写代码/方法/函数。这可以是这样的：

```
private void DataGridView1_CellEndEdit(object sender, DataGridViewCellEventArgs e)       
{  
  //Some calculations;  
  //Get the key if it is tab or arrow to decide which cell should be selected next  
 If((bool)OnKeyDown()==true)   
    then do this;
}          
void OnKeyDown(KeyEventArgs e)
 { 
   if(e.KeyValue==9)//tab key     
     return true;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T03:12:12.450

使用这个解决方案[`link`](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/0283fe97-c0ad-4768-8aff-cb4d14d48e15)，我能够想出一些可以帮助你的东西。

首先，您要创建自己的用户类，该类派生自`DataGridView`并覆盖该`ProcessCmdKey`函数。无论您的单元格是否处于编辑模式，都会调用此函数。

```
public partial class MyDataGridView : DataGridView
{
    protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
    {
        if (keyData == Keys.Tab)
        {
            this.CurrentCell = this.Rows[this.CurrentCell.RowIndex].Cells[1];
            return true;
        }
        else if (keyData == Keys.Right)
        {
            this.CurrentCell = this.Rows[this.CurrentCell.RowIndex].Cells[2];
            return true;
        }
        else
            return base.ProcessCmdKey(ref msg, keyData);
    }
} 
```

您现在需要做的就是更改此函数内部的逻辑，以根据已按下的键转到相应的列，并使用此自定义类而不是默认的`DataGridView`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T12:53:05.273

我根据一个soln以这种方式解决了它。这里：
[http ://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/0283fe97-c0ad-4768-8aff-cb4d14d48e15/](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/0283fe97-c0ad-4768-8aff-cb4d14d48e15/)

```
bool IsTabKey;
private void DataGridView1_CellEndEdit(object sender, DataGridViewCellEventArgs e)       
{  
   //Some calculations;  
  //Get the key if it is tab or arrow to decide which cell should be selected next  
    If(IsTabKey==true)   
      //then do this;
}  
protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{
    if(GridViewSale.CurrentCell.ColumnIndex == 1 && keyData == Keys.Tab)
       IsTabKey = true;
       return false;
} 
```

# excel - Excel 2007 - 条件格式 - 如何将颜色代码转换为颜色？

> ID：15719053
> 
> 赞同：0
> 
> 时间：2013-03-30T13:26:48.947
> 
> 标签：excel, excel-2007, vba

我有一个非常简单的宏代码，它显示了记录在单元格内的颜色代码的颜色：

```
Sub ShowColour()
    ColCod = Selection()
    With Selection.Interior
        .Pattern = xlSolid
        .PatternColorIndex = xlAutomatic
        .Color = ColCod
        .TintAndShade = 0
        .PatternTintAndShade = 0
    End With
End Sub 
```

我现在正在寻找某种方法将单元格的内容更改为另一种颜色代码并立即显示它的颜色。我已经尝试过条件格式，但似乎我只能在预定义的格式中进行选择。任何人都可以给我一个提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:55:20.027

如果我猜对了，您需要将此代码添加到适当的工作表模块中，例如名为“Sheet1 (Sheet1)”的模块（而不是像 Module1 这样的标准模块）。因此，此代码将为您触发适当的事件。

```
Private Sub Worksheet_Change(ByVal Target As Range)

On Error GoTo ErrorHandler
With Target.Interior
    .Pattern = xlSolid
    .PatternColorIndex = xlAutomatic
    .Color = Target.Value
    .TintAndShade = 0
    .PatternTintAndShade = 0
End With

Exit Sub
ErrorHandler:
    MsgBox "Color number rather doesn't exists"
End Sub 
```

我将您的基本代码保留在里面，因为它对您来说更容易。

# python - 如何在 Python 中执行函数之前进行预检查...？

> ID：15719058
> 
> 赞同：3
> 
> 时间：2013-03-30T13:27:37.480
> 
> 标签：python

我有正在执行数据库操作的函数。我想做一些特别的事情，在尝试从数据库中获取数据之前，我想检查游标对象是否为空以及连接是否由于超时而断开。如何在 Python 中进行预检查？

我的功能，foo，bar：

```
 Class A:
   connect = None
   cursor = None

   def connect(self)
      self.connect = MySQLdb.connect ( ... )
      self.cursor = self.connect.cursor()
   def foo (self) :
       self.cursor.execute("SELECT * FROM car_models");
   def bar (self) :
       self.cursor.execute("SELECT * FROM incomes"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T13:37:18.553

操作前检查的问题在于，您要检查的不良情况可能发生在检查和操作之间。

例如，假设您有一个方法`is_timed_out()`来检查连接是否超时：

```
if not self.cursor.is_timed_out():
    self.cursor.execute("SELECT * FROM incomes") 
```

从表面上看，这看起来您已经避免了执行调用中出现 CursorTimedOut 异常的可能性。但是你有可能调用is_timed_out，得到一个False，然后光标超时，然后你调用execute函数，得到一个异常。

是的，它会在正确的时刻发生的机会非常小。但是在服务器环境中，百万分之一的机会每天会发生几次。坏的东西。

您必须准备好让您的操作因异常而失败。一旦你为这些问题进行了异常处理，你就不再需要预先检查，因为它们是多余的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T13:32:01.710

您可以轻松检查光标是否为空：

```
if cursor is None:
     ... do something ... 
```

否则，Python 中通常的做法是“请求宽恕而不是许可”：使用您的数据库连接，如果它已超时，则捕获异常并处理它（否则您可能会发现它在您的测试和您的测试点之间超时用它）。

# php - 在阿拉伯语单词中搜索阿拉伯语字母

> ID：15719060
> 
> 赞同：7
> 
> 时间：2013-03-30T13:27:58.830
> 
> 标签：php, html, search, arabic

这是我的工作代码：

```
<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
    </head>
    <body>
        <?php
            $arabic = "صحيفة اسبوعية مستقلة شاملة تتابع الاخبار فى المنطقة العربية";
            $french = "que voulez vous dire?";

            if (isset($_POST['search'])) {
                $search = $_POST['search'];
                $key = $_POST['key'];
                $td = substr_count($arabic, $key);
                echo $td;
            }

            echo "<br />" . $arabic;

            function count_occurences($char_string, $haystack, $case_sensitive = true) {
                if ($case_sensitive === false) {
                    $char_string = strtolower($char_string);
                    $haystack = strtolower($haystack);
                }

                $characters = preg_split('//u', $char_string, -1, PREG_SPLIT_NO_EMPTY);
                //$characters = str_split($char_string);
                $character_count = 0;

                foreach ($characters as $character) {
                    $character_count = $character_count + substr_count($haystack, $character);
                }

                return $character_count;
            }
        ?>
        <form name="input" action="" method="post">
            <input  type= "text" name="key" value=""/>
            <input  type ="submit" name="search" value =" find it !"/>
        </form> 
    </body>
</html> 
```

因为`$french`它工作得很好，但`$arabic`它没有。当然没有错误，但是如果我输入例如`ح`搜索那个字母，它总是显示`0`我输入的每个字母。

有什么不对吗？还是我缺少阿拉伯语的东西？我不知道为什么`$french`如果我输入`v`它会`2`在结果中显示效果很好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T13:30:07.360

您需要使用[多字节字符串函数](http://www.php.net/manual/en/ref.mbstring.php)。

您也可以`mbstring.func_overload = 7`在您的`php.ini`, 和 php 中设置标准字符串函数自动使用多字节对应项。

如果您想为重载函数使用其他值以更好地满足您的需求，请查看[mbstring 重载文档](http://www.php.net/manual/en/mbstring.overload.php)

另外，更换

`$characters = str_split($char_string);`

和

`$characters = preg_split('//u', $char_string, -1, PREG_SPLIT_NO_EMPTY);`

因为`str_split`不是多字节安全的，而且别无选择

另外，如果您提交表单后没有在标题中发送编码，或者它们存在一些问题，您可以在您的 php.ini 中设置

`default_charset = "UTF-8"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T14:03:15.053

我用编码 UTF-8 测试了你的代码，它的工作..

我添加了一个元标记：

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
```

# pdf - PDF：多列到一列

> ID：15719063
> 
> 赞同：4
> 
> 时间：2013-03-30T13:28:21.287
> 
> 标签：pdf

我找不到任何可以将多列正确转换为一列的软件。输出文件夹类型并不重要，但列必须在正确的范围内。有没有什么软件可以做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2017-08-27T07:44:59.263

你在哪个系统？Windows、Mac 还是 Linux？

1.  有一个多平台工具[k2pdfopt](http://willus.com/k2pdfopt/)，它有一个转换预设，用于将 2 列转换为 1 列布局，并在 Windows 上带有一个 GUI
2.  在 Windows 上，您可以使用最新版本的 MS-Word >= 2013 进行转换。
    *   使用 MS Word 文件打开文件 -> 打开
    *   确认转换
    *   选择文档或段落
    *   更改列布局 -> 列 -> 1 列

# c# - asp .net 浏览本地或任何驱动器并获取确切的文件路径

> ID：15719066
> 
> 赞同：0
> 
> 时间：2013-03-30T13:28:27.730
> 
> 标签：c#, asp.net, filepath

我被要求创建一个程序，用户可以从他的本地或任何网络驱动器浏览一些 txt 文件，用分隔符每行解析它并将其存储在 DB 中。问题是我的代码无法获取确切的 URL，而是返回安装应用程序解决方案的 URL，因此返回错误提示文件未找到。我一直在环顾四周，我知道 asp .net 无法获得确切的文件路径，最好有文件上传。有没有一种方法可以让我在阅读之前不必将其保存在解决方案文件夹/服务器中？

我的代码是这样的：

```
protected void btnUploadSave_Click(object sender, EventArgs e)
    {
        string path =
                string.Format(
                    CultureInfo.InvariantCulture,
                    Strings.NewObjectPath,
                    _root,
                    fuUpload.FileName);
        //string x = fuUpload.PostedFile.FileName;

        OpenFile(path);

    } 
```

它返回路径，但不返回项目的实际位置。前任。实际位置是 c:\my docs\download\someFile.txt，它返回 c:\my docs\vs 2010\Project\myAppSoltn\someFile.txt

如果由于安全问题无法获得确切的文件位置，有没有办法只知道文件名就可以打开文件？下面的 lcode 不起作用，但我想得到类似的东西？

```
private void OpenFile(String path)
    {
        path = @"~\someFile.txt";

        // Delete the file if it exists. 

        AirDataAccess access = new AirDataAccess();
        using (TextFieldParser parser = new TextFieldParser(path))
        {
            parser.Delimiters = new string[] { "," };
            while (true)
            {
                string[] words = parser.ReadFields();
                if (words == null)
                      break;
                else
                {
                    AirData airData = null;
                    if (words != null)
                    {

                        airData = new AirData();
                        airData.DateAired = Convert.ToDateTime(words[0]);

                        if (adBusiness.isValidUniqueCode(airData.UniqueCode))
                            access.InsertAirData(airData);

                    }
                }

            }
        }

    } 
```

这是我的页面：

```
 <asp:View ID="vUpload" runat="server">
<asp:Panel ID="pnlUpload" runat="server" DefaultButton="btnUploadSave">
<table border="0" cellpadding="5" cellspacing="0">
<thead>
<tr>
    <td class="header">Upload a File</td>   
</tr>
</thead>
<tbody>
<tr>
    <td>
        <asp:RequiredFieldValidator ID="rfvUpload" runat="server" ErrorMessage="A file name is required" ControlToValidate="fuUpload" SetFocusOnError="true">*&nbsp;</asp:RequiredFieldValidator>
        <asp:FileUpload ID="fuUpload" runat="server" CssClass="button" Width="400px" />
    </td>
</tr>
</tbody>
<tfoot>
<tr>
    <td align="right">
        <asp:Button ID="btnUploadCancel" runat="server" CausesValidation="false" CssClass="button" Text="Cancel" UseSubmitBehavior="false" onclick="Cancel" />
        <asp:Button ID="btnUploadSave" runat="server" CssClass="button" Text="Upload" onclick="btnUploadSave_Click" />
    </td>
</tr>
</tfoot>
</table>
</asp:Panel>
</asp:View> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T13:59:55.417

可以`TextFieldParser`把 a`Stream`作为输入吗？还是一个`StreamReader`？

如果它可以采用流，则可以在`OpenFile`方法中使用此行：

```
using (TextFieldParser parser = new TextFieldParser(fuUpload.PostedFile.InputStream)) 
```

这样您就不必在处理之前将文件保存到服务器。

但如果`TextFieldParser`只对文件有效，您可以将上传的文件保存在临时文件中，然后将其删除：

```
string tempFileName = System.IO.Path.GetTempFileName();
fuUpload.PostedFile.SaveAs(tempFileName);
// process your file
System.IO.File.Delete(tempFileName); 
```

# c# - C# ODBC 连接字符串

> ID：15719069
> 
> 赞同：0
> 
> 时间：2013-03-30T13:28:42.647
> 
> 标签：c#, asp.net, odbc

我目前正在创建与 Web 托管的远程服务器的 ODBC 连接。访问文件位于 ftp 主目录中。

在此代码中运行时，在 m_connection.Open();

```
 var m_result = new DataTable();

    try
    {
        using (OdbcConnection m_connection = new OdbcConnection(connectionDBString))
        {
            string sql = "SELECT * FROM product";
            m_connection.Open();
            OdbcDataAdapter dataadapter = new OdbcDataAdapter(sql, m_connection);
            dataadapter.Fill(m_result);
            m_connection.Dispose();
            m_connection.Close();
        }
    }
    catch (Exception e)
    {

    }
    return m_result; 
```

以下异常失败

> 错误 [IM002] [Microsoft][ODBC Driver Manager] 未找到数据源名称且未指定默认驱动程序

无论如何要为 ODBC 连接声明数据源？在cPanel中，我只设置了DSN和Path如下：

DSN : 财富网-网站

路径：e:\virtualhost\domains\wealthhonesthk\home\website.mdb

以下是我的 web.config 的一部分

```
 <connectionStrings>
    <add 
      name="ODBCDataConnectionString" 
      connectionString="DSN=wealthhonesthk-website;Driver={Microsoft Access Driver (*.mdb)};FILEDSN=ftp:/210.245.166.72/home/website.mdb;Dbq=ftp:/210.245.166.72/home/website.mdb;Uid=;Pwd=; curly=false;"
      providerName="System.Data.Odbc"
    />
  </connectionStrings> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:52:38.933

You tend to use a DSN when you don't define a connection string in a config file (like in old VB6 days). Since you're using a config file, you really don't need a DSN. Why not use a connection string like:

`Driver={Microsoft Access Driver (*.mdb)};Dbq=ftp://210.245.166.72/home/website.mdb;Uid=Admin;Pwd=;`?

Also, having your MDB file mapped to a FTP location may be a problem; why not map a network drive to that location? This way, your connection string might look like:

`Driver={Microsoft Access Driver (*.mdb)};Dbq=X:\myNetworkLocation\website.mdb;Uid=Admin;Pwd=;`

Lastly, why are you defining a FILEDSN and a Dbq parameter for your connection string?

In short, I'd recommend getting rid of the DSN part of your connection string and use a non-ftp location for your MDB file.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T13:35:44.443

以下是您需要的有关连接字符串的所有信息：

[http://www.connectionstrings.com/access](http://www.connectionstrings.com/access)

[http://www.connectionstrings.com/access-2007](http://www.connectionstrings.com/access-2007)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T15:07:31.037

看看以下

[http://www.connectionstrings.com/](http://www.connectionstrings.com/)

应该能帮到你。

As you are trying to connect to Oracle Database, you might need to have Oracle Client installed.

# javascript - Keep track of changes in html table/form

> ID：15719074
> 
> 赞同：0
> 
> 时间：2013-03-30T13:29:12.293
> 
> 标签：javascript, jquery, html

What I'm trying to achieve is to keep track of any changes (e. g. user input, field added, ...) within a `<table>`-element. In my specific scenario users can edit fields, add rows, add fields, remove fields and rows, select something in `<select>`-elements, etc.

Of course I could just attach my "change"-listener to all of those actions, but I think there must be a better way.

I tried attaching a `$('#myTable tbody').change()`-listener to it, but that doesn't fire...

Maybe some of you know of a way to keep track of table changes without having to subscribe to every possible user action manually?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T13:39:01.620

Edit: As I understand it, jQuery 1.4+ should actually support the described behavior. I'll leave the rest of my post for reference.

You can add the event to every changeable element, because that is where they are fired. However, you won't have to do it manually:

```
$('#myTable input, #myTable select, ...).change(...) 
```

If, as you said, there are elements added later on, you might want to look into the `.live` method that allows you to bind event listeners to elements that are to be created later on.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T13:40:53.180

You can use [Jquery liveQuery Plugin](http://docs.jquery.com/Plugins/livequery)

Below is the example for mouse over and mouse out. you can do it for all the events likewise

```
 $('table') 
    .livequery(function(){ 
    // use the helper function hover to bind a mouseover and mouseout event 
        $(this) 
            .hover(function() { 
                $(this).addClass('hover'); 
            }, function() { 
                $(this).removeClass('hover'); 
            }); 
    }, function() { 
        // unbind the mouseover and mouseout events 
        $(this) 
            .unbind('mouseover') 
            .unbind('mouseout'); 
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T21:29:54.023

To answer my own question:

I decided on doing it kinda like @mdsl suggested:

I now listen for changes like this:

`$('#myTable tbody').on('focusout', 'input, select, checkbox', myListener);`

# android - 从drawable中检索图像并将String转换为Int问题

> ID：15719078
> 
> 赞同：0
> 
> 时间：2013-03-30T13:29:24.223
> 
> 标签：android, android-imageview, parseint

我目前正在做一个从php服务器检索数据的页面，现在尝试使用setImageResource从drawable中检索和图像但不工作，我不知道它有什么问题，我是否可以将图像名称保存在数据库中然后检索使用图像名称的图像？除此之外，我尝试为数量做一个简单的加减按钮，但是一旦我点击按钮，应用程序就会强制停止..

```
public class FoodDetailActivity extends Activity 
{
TextView FoodName;
TextView FoodDesc;
TextView FoodPrice;
ImageView FoodImg;
EditText Number;
Button plus;
Button minus;
Button Addcart;

String fid;
int number;

// Progress Dialog
private ProgressDialog pDialog;

// JSON parser class
JSONParser jsonParser = new JSONParser();

// single product url
private static final String url_food_details = "http://10.0.2.2/android_user/FoodDetail.php";

// JSON Node names
private static final String TAG_SUCCESS = "success";
private static final String TAG_FOOD = "food";
private static final String TAG_FID = "fid";
private static final String TAG_FOODNAME = "food_name";
private static final String TAG_FOODPRICE = "food_price";
private static final String TAG_FOODDESCRIPTION = "food_description";
private static final String TAG_FOODURL = "food_url";

@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_food_detail);

    // button
    plus = (Button)findViewById(R.id.btn_plus);
    plus.setOnClickListener(increase);
    minus = (Button)findViewById(R.id.btn_minus);
    minus.setOnClickListener(decrease);
    Addcart = (Button)findViewById(R.id.btn_submit);
    Number = (EditText)findViewById(R.id.text_number);

    // getting food details from intent
    Intent i = getIntent();

    // getting food id (fid) from intent
    fid = i.getStringExtra(TAG_FID);

    // Getting complete product details in background thread
    new GetFoodDetails().execute();
}

// Increase number of quantity
    private OnClickListener increase = new OnClickListener()
    {
        public void onClick(View v) 
        {
            String quantity = Number.getText().toString().trim();
            number = Integer.parseInt(quantity);
            if(number > 0 && number < 99)
            {
                number = number + 1;
                Number.setText(Integer.toString(number));
            }
            else if(number == 99)
            {
                number = 1;
                Number.setText(Integer.toString(number));
            }
        }
    };
 // Decrease number of quantity
    private OnClickListener decrease = new OnClickListener()
    {
        public void onClick(View v) 
        {
            String quantity = Number.getText().toString();
            number = Integer.valueOf(quantity);
            if(number > 1 && number <= 99)
            {
                number = number - 1;
                Number.setText(Integer.toString(number));
            }
            else if(number == 1)
            {
                number = 99;
                Number.setText(Integer.toString(number));
            }
        }
    };

class GetFoodDetails extends AsyncTask<String, String, String> 
{
    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() 
    {
        super.onPreExecute();
        pDialog = new ProgressDialog(FoodDetailActivity.this);
        pDialog.setMessage("Loading food details. Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        pDialog.show();
    }

    /**
     * Getting product details in background thread
     * */
    protected String doInBackground(String... params) 
    {

        // updating UI from Background Thread
        runOnUiThread(new Runnable() 
        {
            public void run() 
            {
                // Check for success tag
                int success;
                try {
                    // Building Parameters
                    List<NameValuePair> params = new ArrayList<NameValuePair>();
                    params.add(new BasicNameValuePair("fid", fid));

                    // getting product details by making HTTP request
                    // Note that product details url will use GET request
                    JSONObject json = JSONParser.makeHttpRequest(url_food_details, "GET", params);

                    // check your log for json response
                    Log.d("Single Food Details", json.toString());

                    // json success tag
                    success = json.getInt(TAG_SUCCESS);

                    if (success == 1) 
                    {
                        // successfully received food details
                        JSONArray foodObj = json.getJSONArray(TAG_FOOD); // JSON Array

                        // get first product object from JSON Array
                        JSONObject food = foodObj.getJSONObject(0);

                        // Loader image - will be shown before loading image
                        int loader = R.drawable.loader;

                        String image_url = food.getString(TAG_FOODURL);

                        // product with this fid found
                        // Edit Text
                        FoodName = (TextView)findViewById(R.id.food_name);
                        FoodPrice = (TextView)findViewById(R.id.food_price);
                        FoodDesc = (TextView)findViewById(R.id.food_desc);
                        FoodImg = (ImageView)findViewById(R.id.img_food);

                        // display product data in EditText
                        FoodName.setText(food.getString(TAG_FOODNAME));
                        FoodPrice.setText("RM" + food.getString(TAG_FOODPRICE));
                        FoodDesc.setText(food.getString(TAG_FOODDESCRIPTION));

                        // ImageLoader class instance
                        ImageLoader imgLoader = new ImageLoader(getApplicationContext());

                        // display image
                        imgLoader.DisplayImage(image_url, loader, FoodImg);

                    }
                    else
                    {
                        // no food detail found
                        // Launch error message
                        AlertDialog.Builder ad = new AlertDialog.Builder(FoodDetailActivity.this);
                        ad.setTitle("Error");
                        ad.setMessage("Food Detail is empty!");
                        ad.setPositiveButton("OK", new DialogInterface.OnClickListener() 
                        {
                            public void onClick(DialogInterface dialoginterface, int i)
                            {

                            }
                        });
                        ad.show();
                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }
        });

        return null;
    }

    protected void onPostExecute(String file_url) 
    {
        // dismiss the dialog once got all details
        pDialog.dismiss();
    }
} 
```

}

问题已经解决，我在服务器端使用 ImageLoader 检索图像，并将 url 存储在数据库中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T13:33:14.300

在这里：

```
Drawable d = getResources().getDrawable(R.drawable.mcchicken); //<<<< 
```

您正在尝试在`onCreate`调用之前使用 Activity 的上下文。在Activity 方法内部移动`Drawable d`初始化为：`onCreate``setContentView`

```
Drawable d; //<<< declare d here
@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_food_detail);
    d = getResources().getDrawable(R.drawable.mcchicken);  //<< initialize d here
    ....
} 
```

**编辑 :**`doInBackground` :您尝试访问 UI 元素的内部方法。而不是使用 doInBackground 更新 UI `runOnUiThread`。`onPostExecute`在 doInBackground 执行完成后，您将需要移动所有调用 UI 线程的 UI 相关代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T13:38:49.387

在您的代码中有很多杂乱无章的材料。从一开始就很好。首先是唯一的问题。

为什么要放入[doInBackground()](http://developer.android.com/reference/android/os/AsyncTask.html#doInBackground)方法[runOnUiThread()](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread)？如果您想`UI`使用后台运行的任务中的一些信息来更新您的信息，为此您可以使用与 UI 线程同步并允许其更新的**onProgressUpdate()**或方法。**doInBackground()**方法直接指定用于后台处理，您不应该破坏它。`onPostExecute()`

 **Then this line:

```
if (food.getString(TAG_FOODNAME) == "McChicken") 
```

will always return false because you are comparing references and not values. Always you are comparing strings, you have to use `equals()` method that makes a trick.

And last thing is this:

```
Drawable d = getResources().getDrawable(R.drawable.mcchicken); 
```

You can't call that before `setContentView()` is called. Reason is that main purpose of `setContentView()` is that it creates all instances of UI elements and resources and if you something that requires resources call before this method, always you will get **`NPE`****

# c++ - How to use lambda function as hash function in unordered_map?

> ID：15719084
> 
> 赞同：42
> 
> 时间：2013-03-30T13:30:08.463
> 
> 标签：c++, c++11

I wonder if it is possible to use lambda function as custom hash function for unordered_map in C++11? If so, what is the syntax?

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-30T14:38:17.373

```
#include<unordered_map>
#include<string>

int main() {
    auto my_hash = [](std::string const& foo) {
        return std::hash<std::string>()(foo);
    };

    std::unordered_map<std::string, int, decltype(my_hash)> my_map(10, my_hash); 
} 
```

You need to pass lambda object to `unordered_map` constructor, since lambda types are not default constructible.

As @mmocny suggested in comment, it's also possible to define make function to enable type deduction if you really want to get rid of `decltype`:

```
#include<unordered_map>
#include<string>

template<
        class Key,
        class T,
        class Hash = std::hash<Key>
        // skipped EqualTo and Allocator for simplicity
>
std::unordered_map<Key, T, Hash> make_unordered_map(
        typename std::unordered_map<Key, T, Hash>::size_type bucket_count = 10,
        const Hash& hash = Hash()) {
    return std::unordered_map<Key, T, Hash>(bucket_count, hash);
}

int main() {
    auto my_map = make_unordered_map<std::string, int>(10,
            [](std::string const& foo) {
                return std::hash<std::string>()(foo);
            });
} 
```

# python - Word count statistics on a web page

> ID：15719086
> 
> 赞同：2
> 
> 时间：2013-03-30T13:30:36.857
> 
> 标签：python, nlp, web-crawler, beautifulsoup

I am looking for a way to extract basic stats (total count, density, count in links, hrefs) for words on an arbitrary website, ideally a Python based solution.

While it is easy to parse a specific website using, say BautifulSoup and determine where the bulk of the content is, it requires you to define the location of the content in the DOM tree ahead of processing. This is easy for, say, hrefs or any arbitraty tag but gets more complicated when determining where the rest of the data (not enclosed in well defined markers) is.

If I understand correctly, robots used by the likes of Google (GoogleBot?) are able to extract data from any website to determine the keyword density. My scenario is similar, obtain the info related to the words that define what the website is about (i.e. after removing js, links and fillers).

My question is, are there any libraries or web APIs that would allow me to get statistics of meaningful words from any given page?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T13:36:39.470

There is no APIs but there could be few libraries that you can use it as a tool.

you should count the meaningful words and record them by the time.

you can also Start from something like this:

```
 string Link= "http://www.website.com/news/Default.asp";
        string itemToSearch= "Word";

        int count = new Regex(itemToSearch).Matches(Link).Count;
        MessageBox.Show(count.ToString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-24T09:20:20.647

There are multiple libraries that deal with more advanced processing of web articles, this question should be a duplicate of [this one](https://stackoverflow.com/questions/14164350/identifying-large-bodies-of-text-via-beautifulsoup-or-other-python-based-extract).

# php - PHP - 选择当前使用的数据库

> ID：15719092
> 
> 赞同：0
> 
> 时间：2013-03-30T13:31:51.967
> 
> 标签：php, mysql, database

我在获取当前选定数据库的字符串名称时遇到问题。这就是我所做的......我试图回显数据库的名称，但它会产生错误“警告：mysql_fetch_array() 期望参数 1 是资源”

```
<?php
$dbcon = mysql_connect("localhost", "root", "")
        or die(mysql_error()."Not Connected");

$sql = mysql_query("select database()");
$row = mysql_fetch_array($sql);
echo "db ".$row[0]; 
```

?>

我需要获取选定的数据库名称，因为我将使用它

```
mysql_select_db() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T13:35:56.397

您应该在使用您的登录凭据连接后立即选择一个数据库。或者，如果您想查看`root`用户可以访问哪些数据库，请使用：

```
SHOW DATABASES; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T13:36:35.983

`select Database()`显示所选数据库的名称。只有在您已经使用`mysql_select_db()`.

如果您想获取可用的数据库的名称，请使用`SHOW DATABASES`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-30T13:34:19.463

连接MySQL后需要自己选择一个数据库，默认不选择，像这样：

```
$dbcon = mysql_connect("localhost", "root", "")
    or die(mysql_error()."Not Connected");

mysql_select_db("databasename");  # add this line

$sql = mysql_query("select database()");
$row = mysql_fetch_array($sql);
echo "db ".$row[0]; 
```

请不要使用 mysql_* 函数，因为它们已被弃用，而是使用 mysqli_*。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-30T13:36:00.547

首先，我建议您使用 mysqli 函数而不是 mysql，因为它们已被弃用。

然后，您只需通过将参数中的数据库名称添加到 mysql_select_db() 来选择数据库：

```
 mysql_select_db('dbname'); 
```

请注意，mysqli 的另一个优点是您可以在连接字符串中指定数据库

# android - TouchListView is not working when parent activity finishes

> ID：15719106
> 
> 赞同：0
> 
> 时间：2013-03-30T13:33:27.767
> 
> 标签：android, android-activity, android-listview, commonsware-cwac

I'm using a `TouchListView` by CommonWare and so far it's working fine, But it fails in the following case:

*   `activity A` has a TouchListView and button to add an item , now when i click over a button,
*   `activity B` opens up and once the user choose the item i am calling `finish` to end `activity B`
*   and it comes back to `activity A`.

Now here drag n drop in `TouchListView` doesn't work I mean items are getting dragged but not able to be placed where a user wants, I tried a lot but could not find a way to fix it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T14:35:20.050

I suspect you're doing some setup in onCreate() that's not getting called when you return to Activity A because you're entering it the 2nd (and subsequent) time(s) via onResume().

[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

![enter image description here](../Images/868717342cdc7746af0f15340ba662eb.png)

```
BaseAdapter adapter;
List<myStuff> stuffs;

if (adapter == null) {
    adapter = new BaseAdapter()
    if (stuffs == null) {
        stuffs = new List<myStuff>();
    }
} 
```

You're going to need to do something like that and add List to your savedInstanceState bundle in onSaveInstanceState() then dig it out when the activity restarts.

# javascript - 异步调用后返回值

> ID：15719107
> 
> 赞同：2
> 
> 时间：2013-03-30T13:33:53.200
> 
> 标签：javascript, jquery, json, asynchronous

嗨，我一直在尝试执行以下操作。
我目前正在设计的系统中有一个模块，如下所示

```
var queryDispatcher = {

  init: function () {

  var g = new Array() ; 
  var b = new Array() ; 
  var y = new Array() ; 

  var total_google = 0 ; 
  var total_bing = 0 ; 
  var total_yahoo = 0 ;

  return {

      callGoogle: function (query) {

       var url = 'http://localhost/meta/public/google/'+query ; 
        $.getJSON(url, function(data) {
            total_google = data.searchInformation.totalResults; 
            var i = 0 ; 
            $.each(data.items, function() {
              var obj = new res(i+1, this.title, this.snippet, this.link, 0) ; 
              g.push(obj) ; 
              i=i+1 ;
            });
        });
        return true ; 
      },

      callBing: function (query) {

          var url = 'http://localhost/meta/public/bing/'+query ; 
            $.getJSON(url, function(data) {
              total_bing = data.d.results[0].WebTotal;
              var j = 0 ; 
                $.each(data.d.results[0].Web, function() {
                  var obj = new res(j+1, this.Title, this.Description, this.Url, 0) ; 
                  b.push(obj) ; 
                  j=j+1 ;
                });
            });
      },

      callYahoo: function (query) {
          var url = 'http://localhost/meta/public/yahoo/'+query ; 
          $.getJSON(url, function(data) {
                      total_yahoo = data.bossresponse.web.totalresults;
                      var k = 0 ; 
                      $.each(data.bossresponse.web.results, function() {
                        var obj = new res(k+1, this.title, this.abstract, this.url, 0) ; 
                        y.push(obj) ; 
                        k=k+1 ;
                      });
          });
      },
      getGoogle: function () {
      }
}
}
}; 
```

现在，例如，如果我按如下方式实例化 queryDispatcher：

```
var qd = queryDispatcher.init(); 
var google = qd.callGoogle("hey there"); 
```

我应该能够检索结果。目前，结果被推入最初为空的数组 g 中，并且由于异步 getJSON 调用，当我尝试返回 g 时，它始终为空。

如何等待异步调用完成，以便返回数组 g 和 total_google 变量？

# ios - iOS，如何在 facebook 上点赞页面？

> ID：15719109
> 
> 赞同：1
> 
> 时间：2013-03-30T13:34:17.193
> 
> 标签：ios, facebook, facebook-like

有没有办法喜欢一个按钮点击一个页面。我试过很多这样的片段

```
NSURL *baseURL = [NSURL URLWithString:@"https://graph.facebook.com/"];
    AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:baseURL];

    NSString *link = [NSString stringWithFormat:@"/%@/likes", @"6783623567"];
    NSDictionary *params = @{@"access_token" : [[[FBSession activeSession] accessTokenData] accessToken]};

    [httpClient postPath:link parameters:params success:^(AFHTTPRequestOperation *op, id result) {

        NSLog(@"result %@", result);

    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {

        NSLog(@"error %@", error);

    }]; 
```

但它失败了“应用程序没有能力进行这个 API 调用。”，“类型”：“OAuthException”，“代码”：3”。我现在正在做的是在 web 视图中打开链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T14:50:57.043

[这里](http://www.techotopia.com/index.php/IPhone_iOS_6_Facebook_and_Twitter_Integration_using_SLRequest#Using_SLRequest_and_the_Account_Framework)的所有内容都是代码，[这里](https://developers.facebook.com/docs/reference/api/publishing/)是 Facebook 上的发布操作，比如点赞...... :)

# matlab - 我可以知道如何为具有正弦换向的 BLDC 电机设计三相转换器吗？

> ID：15719111
> 
> 赞同：0
> 
> 时间：2013-03-30T13:34:18.343
> 
> 标签：matlab, simulink, brush

我使用 simulink 设计了一个带有霍尔传感器的 BLDC 电机模型。它与梯形换向完美配合，具有完美的梯形反电动势，但是当我进行正弦换向时，霍尔传感器似乎无法检测到电角度序列。我想知道如何生成用于驱动正弦换向 bldc 电机的三相输入电压。目前我正在使用霍尔传感器感测电角度并以每 60 度更改一次霍尔状态并切换相应的开关，但这不知何故似乎不起作用。我想我必须做一些事情，比如使用 PWM 信号或其他东西。请帮帮我。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-03T03:50:06.087

近年来，随着能源效率、耐用性和免维护运行越来越受到重视，BLDC 电机的应用显着增加。电机控制设计人员正在利用 BLDC 电机固有的性能特性，使其与类似应用中使用的普通交流感应电机和有刷直流电机相比具有明显的优势。三相[电源转换器](http://www.staticon.ca/industry-applications/motive-power/)可以完成，因为设计人员可以简单地选择合适的控制算法，然后专注于开发和评估他们自己的目标应用......

# node.js - Verify access/group in Passport.js

> ID：15719116
> 
> 赞同：32
> 
> 时间：2013-03-30T13:34:33.220
> 
> 标签：node.js, passport.js

I would like to use passport.js to verify that when users hit certain endpoints that they not only have the correct password but are a member of a specific group or have a certain access.

For simplicity sake if I have access levels of USER and ADMIN.

I can use passport to authenticate a password:

```
passport.use(new LocalStrategy(
  function(username, password, done) {
    User.findOne({ username: username }, function(err, user) {
      if (err) { return done(err); }
      if (!user) {
        return done(null, false, { message: 'Incorrect username.' });
      }
      if (!user.validPassword(password)) {
        return done(null, false, { message: 'Incorrect password.' });
      }
      return done(null, user);
    });
  }
)); 
```

Then with a route I can make sure the user passes auth:

```
app.get('/api/users',
  passport.authenticate('local'),
  function(req, res) {
    res.json({ ... });
  }); 
```

But lets say you need to have ADMIN acess to hit /api/users'. Do I need to write my own Strategies? IE do I need to have a local-user, and local-admin strategy, and in each verify the proper access levels?

I think I can do this pretty easily, but the problem arises when I need my site to have different auth methods (maybe sometimes use oauth), I would need to write custom *-user, *-admin strategies for each. Seems like overkill.

Other option is to just verify access/group in each route after the user has been authenticated. But I would prefer to do this in the middle-ware if possible.

Thanks

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-03-30T13:57:32.503

You could create a simple middleware that checks the group:

```
var needsGroup = function(group) {
  return function(req, res, next) {
    if (req.user && req.user.group === group)
      next();
    else
      res.send(401, 'Unauthorized');
  };
};

app.get('/api/users', 
  passport.authenticate('local'),
  needsGroup('admin'), 
  function(req, res) {
    ...
  }); 
```

This assumes that the object stored in `req.user` has a property `group`. This object is the one passed along from the strategy implementation and `deserializeUser`.

An alternative could be [connect-roles](https://github.com/ForbesLindesay/connect-roles), but I don't know how well that integrates with Passport.

**EDIT:** you could also combine Passport and the group-checking middleware:

```
var needsGroup = function(group) {
  return [
    passport.authenticate('local'),
    function(req, res, next) {
      if (req.user && req.user.group === group)
        next();
      else
        res.send(401, 'Unauthorized');
    }
  ];
};

app.get('/api/users', needsGroup('admin'), function(req, res) {
}); 
```

# jquery - IE8+ JQuery Ajax子域调用和oververiding响应响应

> ID：15719117
> 
> 赞同：0
> 
> 时间：2013-03-30T13:34:43.443
> 
> 标签：jquery, ajax, internet-explorer-8, internet-explorer-9, cross-domain

对于 IE 浏览器 8 及更高版本的 IE 和 Ajax 调用，我遇到了一些问题。我有一个站点对返回 json 数据的子域进行 ajax 调用。对于 IE8，我为 Ajax 调用找到并添加了这个 ovveride，代码如下：

```
if ('XDomainRequest' in window && window.XDomainRequest !== null) {
  // override default jQuery transport
  jQuery.ajaxSettings.xhr = function() {
      try { return new XDomainRequest(); }
      catch(e) { 
        console.log(e); 
      }
  };

  // also, override the support check
  jQuery.support.cors = true;
  jQuery.ajaxSettings.dataType = 'json';

} 
```

问题是响应，它不是以 json 形式返回，而是以纯文本形式返回。如何为所有 Ajax 调用全局解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T13:46:01.240

尝试将 jQuery AJAX 参数“dataType”设置为“json”，这告诉它您想要返回一个 JavaScript JSON 对象，而不是让它根据响应 mime 类型进行智能猜测。

如果这不起作用，我想您可以尝试为纯文本添加一个自定义转换器，该转换器通过 JSON 解析器运行响应。

# jquery - 在 xmlhttp 发布请求后触发 Greasemonkey

> ID：15719119
> 
> 赞同：0
> 
> 时间：2013-03-30T13:34:55.307
> 
> 标签：jquery, greasemonkey

我编写了以下 Greasemonkey 脚本以使站点[http://www.pib.nic.in/newsite/erelease.aspx?relid=0](http://www.pib.nic.in/newsite/erelease.aspx?relid=0)的阅读体验更轻松。

代码工作得很好。但只针对一个问题。在选择左侧的下拉框以查看旧档案时，我无法调用通过 xmlhttp 请求发生的函数 contentreplace()。最后我尝试通过匿名函数使用时间延迟来实现它。由于加载时间每次都不同，因此函数调用并不总是发生。

如果有一种方法可以在 xmlhttp 发布请求之后调用函数 contentreplace()，这将有助于使代码完美。

```
// ==UserScript==
// @name            Press Information Bureau Main
// @description     PIB Open links in new tab, Color change on click, make scrollable
// @include         http://pib.nic.in*
// @include         http://www.pib.nic.in*
// @require         http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js
// @grant           GM_addStyle
// @version         3
// ==/UserScript==
/*- The @grant directive is needed to work around a design change
introduced in GM 1.0\.   It restores the sandbox.
*/

if( window.location.toString() =='http://www.pib.nic.in/'  ) {
  //do nothing
}
else if( window.location.toString() =='http://www.pib.nic.in/newsite/mainpage.aspx'  )     {
  //do nothing
}

else if($.trim(window.location.toString())=='http://www.pib.nic.in/newsite/erelease.aspx?relid=0' ) {

contentreplace();
makescroll();
lichangecolor();
}
else {

deletenodes();
}

//------------ function contentreplace() ---------------//

//Function to replace the Getrelease to the url

function contentreplace(){

//-- Use jQuery selector to get just the <li>s that have an onclick.
var articleLinks    = $("#lreleaseID li[onclick]");

//-- jQuery .each()
articleLinks.each ( function () {
var jThis           = $(this);  // "this" is a special var inside .each()
var onClickVal      = jThis.attr ("onclick");
var articleMatch    = onClickVal.match (/Getrelease\s*\((\d+)\)/i);

if (articleMatch  &&  articleMatch.length == 2) {
    var articleId   = articleMatch[1];
    var articleUrl  = "http://www.pib.nic.in/newsite/erelease.aspx?relid="
                    + articleId
                    ;

    jThis.attr ("onclick", "window.open('" + articleUrl + "')");

}
} );
}

//------------- function makescroll() -------------------------------//

//Function to change the left side scorllable
function makescroll(){
$('.leftrightdiv').css('height','300px');
$('.leftrightdiv').css('overflow','scroll');
}

//--------------- function lichangecolor() ---------------------------------------//

//li item change color on click
function lichangecolor(){
$("li").click(function(){

$(this).css("color","red");
});
}

//-------------------- function deletenodes() --------------------------//
//Function to remove nodes
function deletenodes(){

//delete this for ministry delete
ministry=document.getElementById('minID').parentNode;
ministry.parentNode.removeChild(ministry);

//delete this for newslinks delete
newslins=document.getElementById('relhead').parentNode;
newslins.parentNode.removeChild(newslins);

//delete this for newslinks near by delete
    newslinksadj=document.getElementById('relhead').parentNode.parentNode.getElementsByTagName('td')[9];
newslinksadj.parentNode.removeChild(newslinksadj);

}

//---------------- function $() -----------------------//

//Function for detecting drop down change
(function($) {
$.fn.selected = function(fn) {
    return this.each(function() {
        var clicknum = 0;
        $(this).click(function() {
            clicknum++;
            if (clicknum == 2) {
                clicknum = 0;
                fn(this);
            }
        });
    });
}
})(jQuery);

//------------ Anonymous functions () ---------//

//On change of Ministry

$('#minID').selected(function() {

setTimeout(
  function() 
  {
    contentreplace();
    lichangecolor();
  }, 900);

});

//On change of Date Drop down
$('#rdateID').selected(function() {
setTimeout(
  function() 
  {
    contentreplace();
    lichangecolor();
  }, 900);

});

//On change of Month Drop down
$('#rmonthID').selected(function() {
setTimeout(
  function() 
  {
contentreplace();
lichangecolor();
  }, 900);

});

//On change of year Drop down
$('#ryearID').selected(function() {
setTimeout(
  function() 
  {
    contentreplace();
    lichangecolor();
  }, 900);

}); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-22T05:51:58.173

很难从页面脚本中找到然后修改 XMLHttpRequest 实例。

但是还有其他方法，听 dom 更改然后重新运行您的替换功能。您可以使用[MutationObserver](https://developer.mozilla.org/en-US/docs/DOM/MutationObserver)。

这是监听存档列表更改的代码片段

```
var contentreplace = function(mutation) {
    alert('changed');
};

var target = document.querySelector('#lreleaseID');
var observer = new MutationObserver(function(mutations) {
    mutations.forEach(contentreplace);
});
observer.observe(target, {childList: true}); 
```

# c# - MonoDevelop - Detect Enter Keypress in TextBox

> ID：15719124
> 
> 赞同：0
> 
> 时间：2013-03-30T13:35:23.913
> 
> 标签：c#, mono, gtk, monodevelop, gdk

I am currently making a web browser in MonoDevelop using C#, but I am having problems implementing the Keypress event.

I already know the code for how to make the web browser navigate, but the problem is that the keypress event for the enter key won't fire in the textbox.

I have tried other alphabetic keys (like Gdk.Key.a), and they work properly, but the enter key does not work.

I have also tried add [GLib.ConnectBefore] attribute before the keypress event, but it still doesn't make a difference.

Can someone please give me the whole code, if you don't mind? Because there are three different types of Enter keys in the Gdk.Key function, and I don't know which one to use.

I am using MonoDevelop 2.6

Thanks for your help

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T23:19:26.927

I have figured out how to solve this problem.

I was using the wrong event.

You do NOT use the OnKeyPress or OnKeyRelease events to get the signal of the Enter key. You would need to use the Control.Activated event.

The Activated event fires only when the return (enter) key is pressed.

I hope it's the same for every one!

Thanks for trying to help!

# knockout.js - Navigation logic seems to work only one time (durandal)

> ID：15719131
> 
> 赞同：1
> 
> 时间：2013-03-30T13:35:53.513
> 
> 标签：knockout.js, durandal, hottowel

I am working on an ASP.NET MVC project with the durandal template.

I am facing a problem and need some help to find the more elegant solution. I have a header bar (blue) and a sidebar (grey). Both contains an element (link) to create a new transport. In the screenshot below this is showed with the bullets 1 & 2.

![enter image description here](../Images/fee35a1e798f592ef36cbf2b6348ad30.png)

My idea was to proceed like this:

*   When clicked these 2 links navigate to `#/newTransport`
*   In the activate of this module I call my datacontext to create an entity with initial values and get back with the id of the transport created
*   Next, (still in this activate) I navigateTo `#detailTransport/:id`
*   Then the detail of this newly created transport id displayed

Here is the code:

```
var activate = function () {
    var id = datacontext.createTransport();
    var url = '#/detailTransport/' + id;
    router.navigateTo(url);
    return true;
}; 
```

So this newTransport view is not really showed, I used this to have a link allowing me to create the transport before showing it.

**My problem** is that it works only the first time and furthermore it seems to break the router logic someway.

I noticed that if I move the code from the activate to a button inside the view, I don't have problem anymore.

So for resume: I need to execute some code (create an entity) before navigating to the detail of this entity. My attempt (explained above) does not seems to work.

Any idea?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T12:48:56.040

The first click should be a method in the viewmodel, not a route to activate and then redirect. Its likely confused on what you want. Navigatng in an activate is not std practice. Just make the first click bind to a method in the root vm. Then navigate.

# macos - 如何在 Mac OS X 中禁用键盘快捷键？

> ID：15719135
> 
> 赞同：63
> 
> 时间：2013-03-30T13:36:12.313
> 
> 标签：macos, keyboard-shortcuts

我想在 Mac OS X 10.8 Mountain Lion 中`Command`禁用键盘`W`快捷键`Command`。`Q`

这是因为它们干扰了我从 xQuartz 运行的终端内部运行的 emacs 命令。如何禁用键盘快捷键？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-09-12T13:18:34.077

> ## BetterTouchTool 不再免费。

我到达此页面是因为我想禁用系统偏好设置中未显示的 command-h（隐藏应用程序）。这是我的解决方案。

BetterTouchTool 是一个可以禁用键盘快捷键的实用程序（还有许多其他用途）。 [http://www.boastr.de/](http://www.boastr.de/)

全局禁用 command-w

1.  安装 BetterTouchTool
2.  单击 BetterTouchTool 菜单栏项并选择“首选项”
3.  点击“手势”
4.  点击“键盘”
5.  点击“全球”
6.  点击“添加新快捷方式”
7.  点击“键盘快捷键”
8.  键入要禁用的快捷方式（例如，command-w）
9.  将触发器预定义操作设置为“无操作”（这是默认设置）

请注意，您还可以为特定应用程序设置键盘快捷键。

仅对终端禁用 command-w

1.  安装 BetterTouchTool
2.  单击 BetterTouchTool 菜单栏项并选择“首选项”
3.  点击“手势”
4.  点击“键盘”
5.  单击“选择应用程序”窗格底部的加号
6.  选择终端（在 Applications/Utilities 文件夹中）
7.  点击“添加新快捷方式”
8.  点击“键盘快捷键”
9.  键入要禁用的快捷方式（例如，command-w）
10.  将触发器预定义操作设置为“无操作”（这是默认设置）

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-30T13:42:56.293

查看或更改键盘快捷键：

1.  打开系统偏好设置->键盘
2.  单击键盘快捷键选项卡
3.  要更改快捷方式，请双击现有快捷方式，然后按构成新快捷方式的键。
4.  如果输入有误，请单击“恢复默认值”以将键盘快捷键恢复为出厂默认值

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-12-19T21:30:45.043

BetterTouch 无法更改或禁用导致我悲伤的键：*ctrl-cmd-d*。

这是我删除它的方法：

1.  编辑`open ~/Library/Preferences/com.apple.symbolichotkeys.plist`
2.  找到 kCGHotKeyLookUpWordInDictionary (70) 的代码，并将 'enabled' 设置为 OFF（如果不存在，只需创建一个条目 '70' 且 'enabled' = OFF）。
3.  重新启动系统

* * *

从这个站点我了解了符号热键并找到了它们的列表： [http ://www.theregister.co.uk/2009/02/24/hotkeys_framework2/](http://www.theregister.co.uk/2009/02/24/hotkeys_framework2/)

这些站点有 plist 文件中使用的代码列表，因此可以实际更改快捷方式，而不仅仅是删除它们： http: [//krypted.com/mac-os-x/defaults-symbolichotkeys/](http://krypted.com/mac-os-x/defaults-symbolichotkeys/)和 [Documenting com.apple。 symbolichotkeys.plist](https://web.archive.org/web/20141112224103/http://hintsforums.macworld.com/showthread.php?t=114785)。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2015-01-18T19:17:59.990

一种可能适用于与您所需分配冲突的单个应用程序中的工厂热键的解决方案：

使用内置热键管理：

系统偏好 | 键盘 | 捷径 | 应用程序快捷方式

...将预先存在的映射到一些难以击中的键盘组合（如 Cmd-Opt-Shift-反斜杠）。这将释放旧的组合键以进行分配。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-09-29T09:25:12.660

强烈推荐的是[hammerspoon](http://www.hammerspoon.org/)，谁定义的`GOD LIKE`！

1.  安装锤子勺

2.  vim`~/.hammerspoon/init.lua`

3.  粘贴`hs.hotkey.bind("cmd", 'H', function()end)`这个

4.  `:wq`然后是 StatusBar -> Hammerspoon -> ReloadConfig

5.  完毕！

哈克快乐！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-12-05T02:12:50.113

一个解决方案是配置 XQuartz 以在 Preferences/Input 下启用“Option keys send Alt_L and Alt_R”。

然后将其添加到您的 ~/.emacs 中：

`(setq x-alt-keysym 'meta)`

它并不完美，因为有时您可能仍会使用 Cmd-W 而不是 Option-W，但至少它是功能性的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-15T15:46:50.113

在一篇关于[如何编写快捷方式](https://www.raizlabs.com/dev/2015/02/how-to-script-os-x-keyboard-shortcuts/)的文章之后，我尝试将快捷方式设置为`''`无济于事，但将其设置为`NULL`工作正常。这是一个例子：

```
TAB_KEY_SYMBOL="\\U21e5"
COMMAND_KEY_SYMBOL="@"
SHIFT_KEY_SYMBOL="$"

defaults write com.apple.finder NSUserKeyEquivalents "{ 'Show Package Contents' = '${COMMAND_KEY_SYMBOL}${SHIFT_KEY_SYMBOL}O'; }"

defaults write com.apple.finder NSUserKeyEquivalents -dict-add 'Add to Sidebar' '\U0000'
defaults write com.apple.finder NSUserKeyEquivalents -dict-add 'Add to Dock' '\U0000'

# kill finder and prefs daemon
killall Finder
killall cfprefsd

# *only* if absent, add bundle id to make it show up in keyboard prefs pane
defaults read com.apple.universalaccess "com.apple.custommenu.apps"
defaults write com.apple.universalaccess "com.apple.custommenu.apps" -array-add "com.apple.finder"

$ defaults read com.apple.finder NSUserKeyEquivalents 
{
    "Add to Dock" = "";
    "Add to Sidebar" = "";
    "Show Package Contents" = "@$O";
} 
```

# ios - iOS Core Data serialization

> ID：15719136
> 
> 赞同：0
> 
> 时间：2013-03-30T13:36:21.907
> 
> 标签：ios, objective-c, json, core-data

I'm looking to serialize a collection of Core Data objects (probably into JSON) and have been doing [reading on the subject](https://stackoverflow.com/a/2363996/274405). I'll likely be serializing/deserializing JSON data as a means of allowing iOS users to easily export and re-import their data. This could be a case of backing up and restoring on the same device, or importing the data onto an entirely new device.

My main question at this point is how I handle the identification of existing data during import. If I'm reimporting objects that already exist in the store I'd ideally like to update them. Likewise, I'd like to leave any existing data that's not included in the import alone. What's the best practice in this situation? Should I assign each NSManagedObject a unique ID as and when it's created and compare this ID when determining whether an object is equal?

I'm aware that each NSManagedObject has an objectID assigned to it, but I'm not entirely sure I can rely on this given that exported data could be imported onto an entirely separate device (where objectID's could well collide or, more likely, the object would be assigned a new objectID upon creation).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:24:32.343

> > How do I handle the identification of existing data during import?

I would assign my own unique identifier for each item so an import/sync/export would be posible for other architectures as well (you might also need to include versioning information). This will allow identification of objects across devices.

You cannot rely on the objectID when exporting to other devices:

There is no way to create a managed object with a specific object id ( [see here](https://stackoverflow.com/questions/3951803/how-to-set-nsmanagedobjectid-manually) ), this would make it imposible to avoid assigning you own identifier to use for import/sync/export (unless you upload/download the entire DB file to the other device).

Bear in mind, Uniquing (primary key) in CoreData is not trivial and might effect performance if not done correctly.

# xml - Inno Setup - 如何将节点保存在特定行中

> ID：15719138
> 
> 赞同：4
> 
> 时间：2013-03-30T13:36:34.770
> 
> 标签：xml, inno-setup

我需要有关 inno 设置的帮助，我需要在特定行中保存一些 xml 节点，但我不知道该怎么做。

这是我的代码

```
procedure SaveValueToXML(const AFileName, APath, AValue: string);
var
  XMLNode: Variant;
  XMLDocument: Variant;  
begin
  XMLDocument := CreateOleObject('Msxml2.DOMDocument.6.0');
  try
    XMLDocument.async := False;
    XMLDocument.load(AFileName);
//    if (XMLDocument.parseError.errorCode <> 0) then
//      MsgBox('Install the software. ' +
//        XMLDocument.parseError.reason, mbError, MB_OK)
//    else
    begin
      XMLDocument.setProperty('SelectionLanguage', 'XPath');
      XMLNode := XMLDocument.selectSingleNode(APath);
      XMLNode.text := AValue;
      XMLDocument.save(AFileName);
    end;
  except
    MsgBox('Install the software', mbError, MB_OK);
  end;
end;

function NextButtonClick(PageID: Integer): Boolean;
var
  XMLFile: string;
begin
  Result := True;
  if (PageId = wpFinished) then
  begin
    XMLFile := ExpandConstant('{pf}\Hell\0\Config.xml');
    if FileExists(XMLFile) then
    begin
      SaveValueToXML(XMLFile, '//@param', PEdit.Text);  //PEdit.text is from a custom input text box in the installer, ignore.
      SaveValueToXML(XMLFile, '//@path',
        ExpandConstant('{reg:HKCU\SOFTWARE\Craps,InstallPath}\Test.exe'));
    end;
  end;
end; 
```

这是我的 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<stuffs>
        <stuff ident="555" path="C:\Program Files (x86)\Other thing\Other.exe" param="-alive" display="1" priority="0"/>
        <stuff ident="666" path="C:\Program Files (x86)\Craps\test.exe" param="-dead" display="1" priority="0"/>    
</stuffs> 
```

问题是我的脚本总是写在第一行。我需要的是始终保存以开头的行中的节点`<stuff ident="666"`

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T14:03:42.173

您将需要使用[`setAttribute`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms754616%28v=vs.85%29.aspx)设置`text`属性的方法。下面是修改节点属性值的过程：

```
procedure SaveAttributeValueToXML(const AFileName, APath, AAttribute, 
  AValue: string);
var
  XMLNode: Variant;
  XMLDocument: Variant;  
begin
  XMLDocument := CreateOleObject('Msxml2.DOMDocument.6.0');
  try
    XMLDocument.async := False;
    XMLDocument.load(AFileName);
    if (XMLDocument.parseError.errorCode <> 0) then
      MsgBox('The XML file could not be parsed. ' + 
        XMLDocument.parseError.reason, mbError, MB_OK)
    else
    begin
      XMLDocument.setProperty('SelectionLanguage', 'XPath');
      XMLNode := XMLDocument.selectSingleNode(APath);
      XMLNode.setAttribute(AAttribute, AValue);
      XMLDocument.save(AFileName);
    end;
  except
    MsgBox('An error occured!' + #13#10 + GetExceptionMessage, 
      mbError, MB_OK);  
  end;
end; 
```

以下是如何查询`ident`参数值为666且`param`属性值将更改为的节点`-alive`：

```
SaveAttributeValueToXML('d:\File.xml', '//stuffs/stuff[@ident=''666'']',
  'param', '-alive'); 
```

有关此处使用的 XPath 查询的更多信息，请参阅例如[`this article`](http://blogs.msdn.com/b/davidklinems/archive/2007/03/13/quick-tip-using-xpath-to-find-nodes-by-attribute-value.aspx)。

# java - Widget onReceive doesnt increment int

> ID：15719144
> 
> 赞同：0
> 
> 时间：2013-03-30T13:36:52.567
> 
> 标签：java, android, android-widget

I am currently learning about widgets in Android. I want to increment counter value, but when I click on widget it increment it from 0 to 1 and stops to increase it. My `onRecieve` method work fine. Here is my code:

```
public static CheckDate CheckDate;
public static EventList EventList;

public static String EVENT_CLICK = "EventClick";
public String msg;

public RemoteViews rviews;
public AppWidgetManager manager;
public Context cntxt;
public Intent intnt;
public int[] ids;

public int counter = 0;

public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds){
    super.onUpdate(context, appWidgetManager, appWidgetIds);

    CheckDate = new CheckDate();
    EventList = new EventList();

    manager = appWidgetManager;
    RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget_layout);
    ids = appWidgetIds;

    Intent intent = new Intent(context, DayWidget.class);
    intent.setAction(EVENT_CLICK);
    intent.putExtra("msg", "change");

    PendingIntent actionPendingIntent = PendingIntent.getBroadcast(context, 0, intent, 0);

    views.setOnClickPendingIntent(R.id.Event, actionPendingIntent);

    CheckDate.Check();

    views.setTextViewText(R.id.Today, CheckDate.Today);
    views.setTextViewText(R.id.Event, String.valueOf(counter));

    manager.updateAppWidget(ids, views);
}

public void UpdateWidget(){
    Bundle extras = intnt.getExtras();
    if(extras!=null) {
        AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(cntxt);
        ComponentName AppWidget = new ComponentName(cntxt.getPackageName(), DayWidget.class.getName());
        int[] appWidgetIds = appWidgetManager.getAppWidgetIds(AppWidget);

        rviews = new RemoteViews(AppWidget.getPackageName(), R.layout.widget_layout);
        counter ++;
        rviews.setTextViewText(R.id.Event, String.valueOf(counter));

        appWidgetManager.updateAppWidget(appWidgetIds, rviews);
    }
}

public void onReceive(Context context, Intent intent){
    intnt = intent;
    cntxt = context;

    if(EVENT_CLICK.equals(intent.getAction())){
        try{
            msg = intent.getStringExtra("msg");
        }catch(NullPointerException e){
            e.printStackTrace();
        }
        UpdateWidget();
        Toast toast = Toast.makeText(cntxt, "OnClick", Toast.LENGTH_LONG);
        toast.show();
    }
    super.onReceive(context, intent);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T13:53:46.433

make your `public int counter = 0;` `static` to be `public static int counter = 0;` Or save it on shared preference

# c - Strtok：我不知道为什么这个程序总是失败

> ID：15719145
> 
> 赞同：0
> 
> 时间：2013-03-30T13:36:53.690
> 
> 标签：c

在这个程序中，char *token 被初始化为一个奇怪的垃圾值。我无法对其进行排序。这是源代码：

```
#include<iostream>
#include<string.h>
#include<stdlib.h>

void fetch_value(char *string,int pos,char *dest)
{
    char *token;
    int i=0;
    token=strtok(string,",");
    if(pos>1)
    {
        token=strtok(NULL,",");
        while(i<pos-1){
            token=strtok(NULL,",");
            printf("token =%s\n",token);
            i++;
        }
        strcpy(dest,token);
    }
    else
    {
        strcpy(dest,token);
    }
}

int main(void)
{
    char checking[100];
    memset(checking,0x00,sizeof(checking));
    fetch_value("14174000100,35679700322,35679700322,35679700322,
            35679700322,14174000999,919440710210000,1",0,checking);
    printf("checking=%s\n",checking);
    return 0;
} 
```

非常感谢您的帮助、反馈或建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T13:38:58.540

的第一个参数`strtok`必须是可修改的。您的代码传递了一个*不可*修改的字符串文字。这会导致未定义的行为。

将解决问题的最简单的修改如下：

```
char numList[] = "14174000100,35679700322,35679700322,35679700322,35679700322,14174000999,919440710210000,1";
fetch_value(numList, 0, checking); 
```

您还应该注意，这`strtok`是一个不可重入的旧函数，因为它使用静态变量来保存其状态。在新代码中，您应该使用函数的可重入版本 - [`strtok_r`](http://linux.die.net/man/3/strtok_r)，这需要您传递内存以保存状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T13:40:24.177

改为这样做：

```
 int main(void)
   {
     char checking[100];
     memset(checking,0x00,sizeof(checking));
     char string[] = "14174000100,35679700322,35679700322,35679700322,
     35679700322,14174000999,919440710210000,1";
     //now string can be modified.
     fetch_value(&string[0],0,checking);
     printf("checking=%s\n",checking);
     return 0;
    } 
```

# android - How to integrate native runtime library with dlopen on NDK?

> ID：15719149
> 
> 赞同：7
> 
> 时间：2013-03-30T13:37:31.733
> 
> 标签：android, android-ndk

For my native c++ project I've to set up a runtime loading of a precompiled shared library, which could be changed by client side on start up using configurations. What is the proper way of calling dlopen on android? No matter what I do, dlopen can never open any shared library, if I not define this library as precompiled library in my Android.mk file like this:

```
LOCAL_PATH := $(call my-dir)

LOCAL_CFLAGS += -DDEBUG 
LOCAL_CFLAGS += -DANDROID 

include $(CLEAR_VARS)
LOCAL_MODULE := bar
LOCAL_SRC_FILES := bar/bar.cpp
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/bar
include $(BUILD_SHARED_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE := native_activity
LOCAL_SRC_FILES := main.cpp

LOCAL_LDLIBS := -llog 
LOCAL_LDLIBS += -landroid 

LOCAL_SHARED_LIBRARIES := bar

LOCAL_STATIC_LIBRARIES += android_native_app_glue

include $(BUILD_SHARED_LIBRARY)
$(call import-module, android/native_app_glue) 
```

In my native activity main class I try to load the library with:

```
void* lib = dlopen("/system/lib/armeabi-v7a/libbar.so", RTLD_NOW);
if (lib == NULL) {
    fprintf(stderr, "Could not dlopen(\"libbar.so\"): %s\n",
    dlerror());
    exit(1);
}else{
    LOGI("Library successfully loaded!");

    if (dlsym(lib, "bar") == NULL) {
        fprintf(stderr, "Symbol 'bar' is missing from shared library!!\n");        
    }else{
        LOGI("Library symbol found!"); 
    }

    int x = bar(25);
    LOGI("Bar return value: %i", x);
} 
```

The disadventage of this implementation is that is not really a runtime loading, because I've to load this library also on JNI startup using JAVA mechanisms.

If I remove the bar library precompile defintions from Android.mk, disable JNI loading on startup and add a copy of the precompiled library to the systems/lib folder where it should be (same place where it is stored using precompile definitions), the loading of the library fails. I've checked the apk package it contains my manually copied library at lib folder as expected.

Why this will not work? Is it possible to perform a strict native runtime library loading of an external precompiled library? And what is the best way to ensure that my library is added to the apk package?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-30T16:56:23.790

The best strategy on Android is to load all native libraries from Java, even if you choose which libraries to load, by some runtime rules. You can use **dlsym(0, ...)** then to access exported functions there.

APK builder will pick up all **.so** files it finds in `libs/armeabi-v7a` and the installer will unpack them into `/data/data/<your.package>/lib` directory.

# html - 如何将 html 粘贴到文本框中？

> ID：15719161
> 
> 赞同：0
> 
> 时间：2013-03-30T13:38:53.407
> 
> 标签：html, copy-paste

我希望用户突出显示网页的一部分并将其粘贴到我网站上的文本框中。但我希望以某种方式保留原始站点的格式。所以我想复制的不仅仅是文本。在撰写电子邮件时，Gmail 似乎能够做到这一点。

我不知道从哪里开始这个问题。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:02:02.397

如果你有windows7，请使用截图工具并将其从屏幕上剪切为.jpg。

然后使用简单的html

```
<img src="sth.jpg" alt="sth" height="" width=""> 
```

# php - 如何执行这个过程并得到结果？

> ID：15719162
> 
> 赞同：0
> 
> 时间：2013-03-30T13:38:56.067
> 
> 标签：php, oracle

我有这个 oracle 程序：

```
procedure ACCOUNT_STATMENT(p_customerid masteraccounts.customerid%type,

                             p_date1      date,

                             p_date2      date,

                             p_val1       out number,

                             p_val2       out number,

                             p_grid       out sys_refcursor) 
```

我使用 PHP 调用它：

```
$DATE1 = "1-1-2013";
$DATE2 = "1-4-2013";
$ID = 53721;
$sth1 = $conn->prepare("CALL ISPPRO.USERPKG.ACCOUNT_STATMENT(:p_customerid, :DATE1, :DATE2, :p_val1, :p_val2, :p_grid)");
            $sth1->bindParam(":p_customerid", $ID, PDO::PARAM_STR);
            $sth1->bindParam(':DATE1', $DATE1, PDO::PARAM_STR); 
            $sth1->bindParam(':DATE2', $DATE2, PDO::PARAM_STR);
            $sth1->bindParam(':p_val1', $p_val1, PDO::PARAM_STR|PDO::PARAM_INPUT_OUTPUT, 4000); 
            $sth1->bindParam(':p_val2', $p_val2, PDO::PARAM_STR|PDO::PARAM_INPUT_OUTPUT, 4000); 
            $sth1->bindParam(':p_grid', $p_grid, PDO::PARAM_STR|PDO::PARAM_INPUT_OUTPUT, 4000); 
            $sth1->execute();
    print_r($conn->errorInfo());
    $result = $sth1->fetchAll();
    print_r($result);
    print_r($p_val1);
    print_r($p_val2);
    print_r($p_grid); 
```

我得到这个错误：

```
Array
(
    [0] => HY000
    [1] => 6553
    [2] => OCIStmtExecute: ORA-06553: PLS-306: wrong number or types of arguments in call to 'ACCOUNT_STATMENT'
 (/root/downloads/PDO_OCI-1.0/oci_statement.c:142)
) 
```

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:34:28.843

在 php.ini 中调用此过程之前，您是否创建了绑定变量。您正在使用 :p_customerid,::DATE1 作为输出变量，您必须创建绑定变量，或者您可以在 oracle 中执行此过程

例如

var i 编号；\在甲骨文中

# javascript - 试图重新打开关闭的弹出窗口

> ID：15719168
> 
> 赞同：0
> 
> 时间：2013-03-30T13:39:26.670
> 
> 标签：javascript, popup, window.open

我不明白是什么原因使这两个用 javascript 编写的脚本以不同的方式运行。

脚本 1

```
var w;
function f1() {
    w = window.open("pg1.html","wind","left=0,top=0,width=480,height=480");
}
function f2() {
    w.close();
}
function f3() {
    w.open("pg1.html","wind","left=0,top=0,width=480,height=480");
} 
```

脚本 2

```
function f() {
    var w = window.open("pg1.html","wind","left=0,top=0,width=480,height=480");
    w.close();
    w.open("pg1.html","wind","left=0,top=0,width=480,height=480");
} 
```

在脚本 1 的情况下，如果我执行`function f1()`，那么`f2()`（如您所见，`f1()`创建新窗口对象并将对该对象的引用分配给变量`w`，`f2()`关闭由创建的窗口对象`f1()`）然后尝试执行函数`f3()`，关闭的弹出窗口（`w`）不会t 打开并在 Firefox 19 中出现错误：

> 错误：NS_ERROR_NOT_AVAILABLE：组件返回失败代码：0x80040111 (NS_ERROR_NOT_AVAILABLE) [nsIDOMJSWindow.open]，

在 IE8 中我得到错误：

> 调用的对象已与其客户端断开连接，

在 Chrome 25 中，我没有收到任何错误。

执行脚本 2（`function f()`创建新窗口对象，将该对象的引用分配给变量`w`，关闭创建的窗口，然后尝试重新打开它）不会在浏览器中导致任何错误，但在 Firefox `f()`中会重新打开关闭的弹出窗口，而在IE 和 Chrome 的弹出窗口 ( `w`) 保持关闭。

您能否尝试这两个脚本并帮助我理解这种奇怪行为的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:28:18.567

首先，我希望你没有做这个问题所暗示的事情。然后，我在 firebug 控制台中运行了以下命令，并获得了示例 2 和 3 的不同参考：

```
console.log('sample 1', w); // undefined
f1();
console.log('sample 2', w); // Window about:blank
f2();
console.log('sample 3', w); // Window 
```

它似乎`w.close();`破坏了对新窗口的引用。

# sqlite - 不明确的列名时间戳

> ID：15719170
> 
> 赞同：0
> 
> 时间：2013-03-30T13:39:52.397
> 
> 标签：sqlite

我正在尝试将平滑的测量数据选择到另一个表中：

```
INSERT INTO data (channel_id, timestamp, value) 
SELECT 1 AS channel_id, m1.timestamp*1000 AS timestamp, -IFNULL((m3.generation + 2*m1.generation + m2.generation)/4.0, 0) AS value
FROM meterreading m1
LEFT JOIN meterreading m2 ON (m1.timestamp = m2.timestamp-300) 
LEFT JOIN meterreading m3 ON (m1.timestamp = m3.timestamp+300) 
```

这将导致

```
sqlite3.OperationalError: ambiguous column name: timestamp 
```

一旦语句的 INSERT 部分被删除，错误就会消失。由于 INSERT() 列应该与目标表相关，并且所有其他列都是别名，我不明白错误或如何解决问题？

# python - 从 json2cvs 格式转换时出错

> ID：15719171
> 
> 赞同：0
> 
> 时间：2013-03-30T13:39:54.187
> 
> 标签：python, json, csv

有人给我发了这段代码来从 json 转换为 csv 格式。

这是 json2csv 的代码。

```
import sys, json, csv

input = open(sys.argv[1])
json_array = json.load(input)
input.close()

item_data = json_array
if len(item_data) >= 1:
    first_item_id = item_data[0]['item_id']
    columns = item_data[0].keys()

csv_file = open(sys.argv[2], "wb")
writer = csv.writer(csv_file)
# there is currently a known bug where column names are partially uppercase, this    will  be fixed soon. the "map(lambda x: x.lower(), columns)" fixes this issue in the mean time
writer.writerow(map(lambda x: x.lower(), columns)) 

# here .items() is a standard python function
for item in item_data:
    row = []
    for column_name in columns:
        if column_name.lower() == 'name_part': # lower required due to above issue
            row.append(" ".join(item[column_name]))
        else:
            row.append(item[column_name])
    writer.writerow(row) 
```

这是我的 json 数据。我保存为 transaction.json

```
{"comment": "Developer test ", "invoice_intern_external_ids": "", "invoice_payments": [{"payment_id": 8, "payment_method": "Refund", "timestamp": "2013-03-05", "invoice_id": 12, "writeoff_reason": "", "payment": 160.0}, {"payment_id": 9, "payment_method": "Cash", "timestamp": "2013-03-05", "invoice_id": 12, "writeoff_reason": "", "payment": 160.0}], "tax": 0.0, "pay_to_external_id": -1, "total": 0.0, "pay_to_contact_id": 13, "client_external_id": 11, "is_draft": false, "invoice_clinician_external_id": 999925, "location": "Therapy A", "invoice_clinician_id": 7, "bill_to_external_id": 11, "timestamp": "2013-03-05", "client_contact_id": 16, "subtotal": 0.0, "invoice_id": 26, "write_off": 0.0, "invoice_items": [{"item_tax": 0.0, "item_name": "InitialVisit_O", "timestamp": "2013-03-05", "item_unit_price": 160.0, "tax": 0.0, "invoice_item_id": 21, "invoice_instance_id": 26, "total": 0.0, "subtotal": 0.0, "item_description": "Initial Assessment/hour", "quantity": 0.0}], "billing_date": "2013-03-05", "invoice_intern_ids": "[]", "bill_to_contact_id": 16, "balance": 0.0, "invoice_instance_id": 12}
{"comment": "", "invoice_intern_external_ids": null, "invoice_payments": [], "tax": 0.0, "pay_to_external_id": -1, "total": 260.0, "pay_to_contact_id": 13, "client_external_id": -1, "is_draft": false, "invoice_clinician_external_id": null, "location": "Sports Medicine", "invoice_clinician_id": 7, "bill_to_external_id": -1, "timestamp": "2013-02-25", "client_contact_id": 15, "subtotal": 260.0, "invoice_id": 23, "write_off": 0.0, "invoice_items": [{"item_tax": 0.0, "item_name": "CompAsses", "timestamp": "2013-02-25", "item_unit_price": 260.0, "tax": 0.0, "invoice_item_id": 36, "invoice_instance_id": 23, "total": 260.0, "subtotal": 260.0, "item_description": "Comp Assess Report", "quantity": 1.0}], "billing_date": "2013-02-22", "invoice_intern_ids": "[]", "bill_to_contact_id": 15, "balance": 260.0, "invoice_instance_id": 10} 
```

我试着做`c:\python.exe c:\json2csv.py c:\transaction.json c:\transaction.txt` 我得到了错误

```
Extra data line2 column 1 - line 12 column1 (char 1105 - char 11267) 
```

如果有人可以更正代码以获取所有字段，那就太好了。我什至不需要csv中的所有字段。我只需要`client_external_id`, `invoice_clinician_id`, `invoice_id`, `location`, i `tem_name`, `item_unit_price`, `item_description`, `quantity`, `billing_date`.

这已经挂了很长时间了。我需要今天完成。请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:21:35.133

这里有多个问题：

1.  您的 JSON 数据实际上是多个 JSON 数据。如果您有大量数据，这将很难解决，尽管 Martijns 建议每行读取可能会有所帮助，假设数据确实是每行一个 JSON 映射。否则需要修复数据，如下所示：

    ```
    [{"comment": "Developer test ", "invoice_intern_external_ids": "" ...},
     {"comment": "", "invoice_intern_external_ids": null, ...}] 
    ```

    注意每个 JSON {} 之后的左括号和右括号以及逗号（最后一个除外）。

2.  你得到的脚本不是特别通用。它假设在给定的第一个 JSON 对象中有一个“item_id”，但实际上没有。不过，这是可以解决的。

3.  您的 invoice_payments 数据是一个字典列表。这意味着您的数据是分层的。你想如何转换为 CVS，它只是一个扁平的数据列表？这并不明显。您显示的脚本不处理该问题，它是通用的，并假设您的 json 数据是平坦的。

固定转换器：

```
import sys, json, csv

input = open(sys.argv[1])
json_array = []
for data in input.readlines():
     json_array.append(json.loads(data))
input.close()

item_data = json_array
if len(item_data) >= 1:
    columns = item_data[0].keys()

csv_file = open(sys.argv[2], "wb")
writer = csv.writer(csv_file)
# there is currently a known bug where column names are partially uppercase, this    will  be fixed soon. the "map(lambda x: x.lower(), columns)" fixes this issue in the mean time
writer.writerow(map(lambda x: x.lower(), columns)) 

# here .items() is a standard python function
for item in item_data:
    row = []
    for column_name in columns:
        if column_name.lower() == 'name_part': # lower required due to above issue
            row.append(" ".join(item[column_name]))
        else:
            row.append(item[column_name])
    writer.writerow(row) 
```

将此结果生成为 CSV：

```
comment,invoice_intern_external_ids,invoice_payments,tax,pay_to_external_id,total,pay_to_contact_id,client_external_id,is_draft,invoice_clinician_external_id,location,invoice_instance_id,invoice_clinician_id,bill_to_external_id,timestamp,client_contact_id,subtotal,invoice_id,write_off,invoice_items,invoice_intern_ids,bill_to_contact_id,balance,billing_date
Developer test ,,"[{u'payment_id': 8, u'payment_method': u'Refund', u'invoice_id': 12, u'timestamp': u'2013-03-05', u'writeoff_reason': u'', u'payment': 160.0}, {u'payment_id': 9, u'payment_method': u'Cash', u'invoice_id': 12, u'timestamp': u'2013-03-05', u'writeoff_reason': u'', u'payment': 160.0}]",0.0,-1,0.0,13,11,False,999925,Therapy A,12,7,11,2013-03-05,16,0.0,26,0.0,"[{u'item_tax': 0.0, u'item_name': u'InitialVisit_O', u'timestamp': u'2013-03-05', u'item_unit_price': 160.0, u'tax': 0.0, u'subtotal': 0.0, u'invoice_item_id': 21, u'total': 0.0, u'invoice_instance_id': 26, u'item_description': u'Initial Assessment/hour', u'quantity': 0.0}]",[],16,0.0,2013-03-05
,,[],0.0,-1,260.0,13,-1,False,,Sports Medicine,10,7,-1,2013-02-25,15,260.0,23,0.0,"[{u'item_tax': 0.0, u'item_name': u'CompAsses', u'timestamp': u'2013-02-25', u'item_unit_price': 260.0, u'tax': 0.0, u'subtotal': 260.0, u'invoice_item_id': 36, u'total': 260.0, u'invoice_instance_id': 23, u'item_description': u'Comp Assess Report', u'quantity': 1.0}]",[],15,260.0,2013-02-22 
```

请注意您的 invoice_payments 数据是如何转换为字符串的：

```
"[{u'payment_id': 8, u'payment_method': u'Refund', u'invoice_id': 12, u'timestamp': u'2013-03-05', u'writeoff_reason': u'', u'payment': 160.0}, {u'payment_id': 9, u'payment_method': u'Cash', u'invoice_id': 12, u'timestamp': u'2013-03-05', u'writeoff_reason': u'', u'payment': 160.0}]",0.0,-1,0.0,13,11,False,999925,Therapy A,12,7,11,2013-03-05,16,0.0,26,0.0,"[{u'item_tax': 0.0, u'item_name': u'InitialVisit_O', u'timestamp': u'2013-03-05', u'item_unit_price': 160.0, u'tax': 0.0, u'subtotal': 0.0, u'invoice_item_id': 21, u'total': 0.0, u'invoice_instance_id': 26, u'item_description': u'Initial Assessment/hour', u'quantity': 0.0}]" 
```

导入 CSV 没有任何实际意义。您的 JSON 数据无法简单地转换为 CSV，您必须决定并指定 CSV 数据的外观。

# python - Overload () operator in Python

> ID：15719172
> 
> 赞同：46
> 
> 时间：2013-03-30T13:39:54.800
> 
> 标签：python, operator-overloading

I am trying to learn currying in Python for my class and I have to overload the () operator for it. However, I do not understand how can I can go about overloading the () operator. Can you explain the logic behind overloading the parentheses? Should I overload first ( and then ) or can I do any of these? Also, is there special name for parentheses operator?

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-03-30T13:49:02.680

You can make an object callable by implementing the `__call__` method:

```
class FunctionLike(object):
    def __call__(self, a):
        print("I got called with {!r}!".format(a))

fn = FunctionLike()
fn(10)

# --> I got called with 10! 
```

# list - how to filter the minimums haskell

> ID：15719173
> 
> 赞同：0
> 
> 时间：2013-03-30T13:39:54.963
> 
> 标签：list, haskell

now I already have a function that takes the minimum of the list of tuples' first element, for example;

```
mymin [(3,4),(3,2),(4,3)] = 3 
```

By using this function, I'd like to take all the tuples which has 3 as its first element. I tried to filter the ones that has 3 on its first element but;

```
filter (\a -> mymin (x:xs) == fst x) (x:xs) 
```

which gives

```
[(3,4),(3,2),(4,3)] 
```

again because everytime it cuts the list, it finds mymin again, but I just want to take the

```
[(3,4),(3,2)] 
```

part, what track should I follow, I stuck. Thanks for any help.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-30T13:44:35.510

Why not use `let` or `where` to precompute the minimum value prior to filtering based on it?

```
yourFilter list = 
  let m = yourMin list
  in filter (\(a, _) -> a == m) list 
```

Alternatively, with a point-free style lambda:

```
yourFilter list = 
  let m = yourMin list
  in filter ((== m) . fst) list 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T13:58:15.217

You only have to replace `x` with `a` in

> filter (\a -> mymin (x:xs) == fst x) (x:xs)

(fst **a** instead of fst **x**)

# python - Possible to go over nested lists with for loops in a similar way to dicts?

> ID：15719178
> 
> 赞同：0
> 
> 时间：2013-03-30T13:40:53.733
> 
> 标签：python, python-2.7

My function is made to get the area of any arbitrary triangle.

Here is the way that I know works

```
def areaOfTriangle(vertices):
    x1 = vertices[0][0]
    y1 = vertices[0][1]
    x2 = vertices[1][0]
    y2 = vertices[1][1]
    x3 = vertices[2][0]
    y3 = vertices[2][1]
    area = (1.0/2.0)*(x2*y3 - x3*y2 - x1*y3 + x3*y1 + x1*y2 - x2*y1)
    return area 
```

However, I think this is crap so here's what I had as a sketched out thought,

```
def areaOfTriangle(vertices):
    coord1 = vertices[0]
    coord2 = vertices[1]
    coord3 = vertices[2]
    for x1,y1 in coord1:
        for x2, y2 in coord2:
            for x3, y3 in coord3:
                area = (1.0/2.0)*(x2*y3 - x3*y2 - x1*y3 + x3*y1 + x1*y2 - x2*y1)
    return area 
```

However, this apparently doesn't play too nice with lists. I thought this would work in the way that once can get keys and values from dictionaries...but lists don't have the iteritems() method. Then I thought about converting the lists into dictionaries, but the keys are unique in dicts and hence they only pop up once....which would make my function not work properly.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T14:02:18.303

You use tuple unpacking:

```
(x1, y1), (x2, y2), (x3, y3) = vertices 
```

Python can unpack nested sequences into separate variables, as long as you create the *same* nesting structure on the left-hand-side.

The looping will not work because you are trying to unpack 2-value tuples *per loop iteration*, where the iteration would only yield only 1 value.

This works across python versions.

Demonstration:

```
>>> vertices = [(1,2), (3, 4), (5, 6)]
>>> (x1, y1), (x2, y2), (x3, y3) = vertices
>>> print x1, y1, x2, y2, x3, y3
1 2 3 4 5 6 
```

# c++ - c ++访问在c中工作的双数组错误

> ID：15719183
> 
> 赞同：1
> 
> 时间：2013-03-30T13:41:22.947
> 
> 标签：c++, c

```
#include<stdio.h>
using namespace std;
void fun(int** a){}
int main()
{
    int n;
    scanf("%d",&n);
    int a[n][n];
    fun(a);
    return 0;
} 
```

在 C++ 中出现此错误，但它在 C 中工作正常，但适用于类型转换为 (void*)a 然后转换为 array=(int**)a：

```
test_.cpp:9:8: error: cannot convert
   ‘int (*)[(((unsigned int)(((int)n) + -0x00000000000000001)) + 1)]’
to ‘int**’ for argument ‘1’ to ‘void fun(int**)’
tried to pass a[][size] but size is not known 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T13:43:56.207

双精度数组不会转换为双指针。

将双精度数组传递给您的函数，如下所示：

```
void fun(int arr[][5]); 
```

现在它将起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T13:44:26.247

当`T[N][N]`衰减时，它变成`T*[N]`在数组中传递时没有可行的转换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T13:44:41.750

将二维数组传递给函数时，您必须指定第二维大小。否则，编译器无法在不知道第二维大小的情况下对二维数组元素进行寻址。采用

```
f(a[][5]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-30T15:09:50.303

您的代码有几个问题。一个是 C 语言，另一个是 C++。

**The C problem**:
Even in C, your multidimensional array `int a[n][n]` does not convert to an `int**`. There's a huge difference between ragged (or jagged) multidimensional arrays and contiguous multidimensional arrays. Ragged arrays are declared and allocated as

*   `int ** jagged_array`
    A jagged array declared in this style can obviously be passed as an `int**` argument to some function; there's no conversion involved. With this type of array, the programmer must allocate (and eventually free) storage for an array of `int*` pointers to each of the rows in the array and must also allocate (and eventually free) storage for each of the array's rows.

*   `int * jagged_array[size_spec]`.
    A jagged array declared in this style can also be passed as an `int**` argument to some function because of the way arrays decay to pointers in C (and C++). With this type of array, the programmer must allocate (and eventually free) storage for each of the array's rows.

Note that in both forms, there is an explicit place in memory for the `int*` pointers that point to the zeroth elements of the rows of the array. That is not the case with multidimensional arrays. A pointer to a row in a multidimensional array is computed, not stored. A multidimensional array declared as `int a[n][n]` cannot decay to an `int**`. It instead decays into an `int*[n]`. In C, a function that receives a variable length multidimensional array such as your `int a[n][n]` should be declared as `<return_type> fund (int n, int vla[n][n])`. (The array argument could also be specified as `vla[][n]`; the outer dimension is not needed.)

**The C++ problem**:
You are using variable length arrays. C++ does not support that C99 concept. That concept didn't exist in C with the original 1998 version of C++. The 2003 C++ standard was a minor revision to the 1998 C++ standard, so it didn't jump to C99\. The authors of the most recent C++ standard, C++11, explicitly rejected supporting those C99 variable length arrays. You can't use variable length arrays in C++, at least not portably.

# node.js - Winston not logging at any log level, what could be wrong?

> ID：15719184
> 
> 赞同：3
> 
> 时间：2013-03-30T13:41:28.953
> 
> 标签：node.js, express, winston

I have run in to a weird bug and don't know how to proceed/debug. I have an app that's written in Nodejs and uses Winston for logging. Everything was working fine until I brought up a new production server yesterday and retired the old one.

My prod server has 4 Nodejs processes running. On the new production server, Winston logs the very first log message per .js file, period. It stops logging after that, and changing the log level doesn't work. My app has got about 6 .js files, and in case of any error on any of those files, the very first error message gets logged but any subsequent errors/warning/info are not logged.

The funny thing is Winston was working just fine on the old prod server and the dev server still works fine.

I am on Winston 0.6.2 on both dev and prod. As far as I know, all the sw packages are the same between dev and prod.

How can I debug this issue?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T21:14:14.413

After some research, I came across this issue => [https://github.com/flatiron/winston/issues/227](https://github.com/flatiron/winston/issues/227)

Looks like, the new way of handling streams in the latest version of node has broken file transport in winston. I am going back to node v0.8.22 for the time being as a work around.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T15:15:07.070

What transports are you using for logging? Does the console transport work? Perhaps the new production server has a network issue that prevents it logging to a remote service such as CouchDB or Loggly.

If you add a simple console.log('...') line next to your winston log lines do those get fired. This will confirm or deny that your winston log lines are getting called on the production server

```
winston.info('winston log test')
console.log('console log test') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-07T14:53:30.863

You can can expose the logger instance and have a URL to trigger the required log level. I had the same need so I came up with a dynamic log level setter for Winston [https://github.com/yannvr/Winston-dynamic-loglevel](https://github.com/yannvr/Winston-dynamic-loglevel)

# php - 如何从php中的多个日期范围获取总时间

> ID：15719186
> 
> 赞同：2
> 
> 时间：2013-03-30T13:41:40.533
> 
> 标签：php, datetime, sum, range

我有几个日期范围，形式为`DateTime $begin, DateTime $end`. 这些范围可以以各种可能的方式重叠：

```
|-------|
               |=======|
           |------|
                     |======|
           |------------|
|=======|
  |---| 
```

等等

我要做的是获取`DateInterval`第一个开始到最新一个结束（在上述情况下为第四个）之间的这些范围的长度（以秒或 为单位），不包括任何范围未涵盖的区域。

只有两个范围没有问题，但我不知道如何扩展它以处理两个以上。

**编辑：**

```
class Range {
    public DateTime $begin;
    public DateTime $end;
}

$ranges = getRanges(); # function that returns array of Range objects

function getActiveHours($_ranges = array()) {
  $sum = 0;
  # this is the function I'd like to have
  return $sum;
} 
```

仅对于两个范围，我有一个返回`DateInterval`对象的函数：

```
function addTimeRanges(DateTime $b1, DateTime $e1, DateTime $b2, DateTime $e2) {
    $res = null;
    if ($e1 < $b2 || $e2 < $b1) { # separate ranges
        $r1 = $b1->diff($e1);
        $r2 = $b2->diff($e2);
        $res = addIntervals($r1, $r2);
    } else if ($b1 <= $b2 && $e1 >= $e2) { # first range includes second
        $res = $b1->diff($e1);
    } else if ($b1 > $b2 && $e1 < $e2) { # second range includes first
        $res = $b2->diff($e2);
    } else if ($b1 < $b2 && $e1 <= $e2 && $b2 <= $e1) { # partial intersection
        $res = $b1->diff($e2);
    } else if ($b2 < $b1 && $e2 <= $e1 && $b1 <= $e2) { # partial intersection
        $res = $b2->diff($e1);
    }
    return $res;
} 
```

where`addIntervals`是一个将两个`DateInterval`对象之和作为另一个`DateInterval`对象返回的函数。

这是一些基本版本，在我的生产代码中我使用了很多其他不相关的东西。

为了简化，假设我们只有时间部分`DateTime`：('06:00:00' to '08:00:00'), ('07:00:00' to '09:00:00'), ('06 :00:00', '08:00:00'), ('11:00:00' to '12:00:00') （会有很多这样的范围）。我现在想要的结果是 4 小时（从 6:00 到 9:00 + 从 11:00 到 12:00）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:04:31.890

```
$ranges = array(
    array(date_create_from_format('U', 1364654958), date_create_from_format('U', 1364655758)), //800s (intersect with 2 row, 700s) = 100s
    array(date_create_from_format('U', 1364654658), date_create_from_format('U', 1364655658)), //1000s (intersect with 1 row)
    array(date_create_from_format('U', 1364656858), date_create_from_format('U', 1364656958)), //100s
);  //total 1200s = 20m
array_multisort($ranges, SORT_ASC, array_map(function($a){return $a[0];}, $ranges));
$count = count($ranges)-1;
for ($i=0; $i < $count; $i++) {
    if ($ranges[$i+1][0] < $ranges[$i][1]) {
        $ranges[$i][1] = max($ranges[$i][1], $ranges[$i+1][1]);
        unset($ranges[$i+1]);
        $i--;
        $count--;
    }
}
$sum = date_create();
foreach ($ranges as $value) {
    date_add($sum, date_diff($value[0],$value[1]));
}
print_r(date_diff(date_create(), $sum)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T16:55:21.470

我建议您创建一个函数，该函数返回 Range 类的一个实例，该实例的属性设置为整个周期的开始和结束。像这样的东西： -

```
class Range
{
    public $startDate;
    public $endDate;

    public function __construct(\DateTime $startDate, \DateTime $endDate)
    {
        $this->startDate = $startDate;
        $this->endDate = $endDate;
    }

    public function getInterval()
    {
        return $this->startDate->diff($this->endDate);
    }

    public function getSeconds()
    {
        return $this->endDate->getTimestamp() - $this->startDate->getTimestamp();
    }
} 
```

我选择创建一个最小的工厂类，除其他外，它可以为你做这种类型的计算：

```
class Ranges
{
    private $ranges = array();

    public function addRange(\Range $range)
    {
        $this->ranges[] = $range;
    }

    public function getFullRange()
    {
        $fullRange = new \Range($this->ranges[0]->startDate, $this->ranges[0]->endDate);
        foreach($this->ranges as $range){
            if($range->startDate < $fullRange->startDate){
                $fullRange->startDate = $range->startDate;
            }
            if($range->endDate > $fullRange->endDate){
                $fullRange->endDate = $range->endDate;
            }
        }
        return $fullRange;
    }
} 
```

一些代码来证明它的工作原理： -

```
$ranges = new \Ranges();
$ranges->addRange(new \Range(new \DateTime(), new \DateTime('+ 2 hours')));
$ranges->addRange(new \Range(new \DateTime('1st Jan 2012'), new \DateTime('3rd Jan 2012')));
$ranges->addRange(new \Range(new \DateTime('- 4 days'), new \DateTime('+ 30 days')));
$fullRange = $ranges->getFullRange();
var_dump($fullRange);
var_dump($fullRange->getInterval());
var_dump($fullRange->getSeconds()); 
```

在我运行它时，我得到了以下结果：-

```
object(Range)[11]
  public 'startDate' => 
    object(DateTime)[6]
      public 'date' => string '2012-01-01 00:00:00' (length=19)
      public 'timezone_type' => int 3
      public 'timezone' => string 'Europe/London' (length=13)
  public 'endDate' => 
    object(DateTime)[10]
      public 'date' => string '2013-05-14 19:36:06' (length=19)
      public 'timezone_type' => int 3
      public 'timezone' => string 'Europe/London' (length=13)

object(DateInterval)[12]
  public 'y' => int 1
  public 'm' => int 4
  public 'd' => int 13
  public 'h' => int 19
  public 'i' => int 36
  public 's' => int 6
  public 'invert' => int 0
  public 'days' => int 499

int 43180566 
```

这将以任何顺序处理任意数量的 Range 对象，并始终返回一个 Range 对象，该对象为您提供所提供的所有范围所跨越的最早和最晚日期。

我还添加了一些方法，允许您以 DateInterval 实例或秒数的形式获取结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-12T11:49:24.850

给定任务的示例

```
class DateRange
{
    private $startDate;
    private $endDate;

    public function getStart(){
        return clone $this->startDate;
    }

    public function getEnd(){
        return clone $this->endDate;
    }

    public function __construct(\DateTime $startDate, \DateTime $endDate = null)
    {
        $this->startDate = $startDate;
        if (is_null($endDate)) {
            $this->endDate = new \DateTime();
        } else {
            $this->endDate = $endDate;
        }
    }
}

class DateRanges
{
    private $ranges = array();

    public function addRange(\DateRange $range)
    {
        $this->ranges[] = $range;
    }

    private function _RageToArray(\DateRange $_in)
    {
        $_r = array();
        $start = $_in->getStart();
        $end = $_in->getEnd();
        while($start<$end){
            $_r[$start->format('Y-m-d')] = null;
            $start->modify('+1 days');
        }
        return $_r;
    }

    public function getDaysCount()
    {
        $_r = array();

        foreach($this->ranges as $range){
            $_r += $this->_RageToArray($range);
        }
        return count($_r);
    }
}

$today = new DateTime();
$ranges = new DateRanges();

$x = new stdClass();
$x->start = (clone $today);
$x->start->modify('-3 years');
$x->end = (clone $x->start);
$x->end->modify('+1 month');
$ranges->addRange(new DateRange($x->start, $x->end));

$x = new stdClass();
$x->start = (clone $today);
$x->start->modify('-3 years');
$x->end = (clone $x->start);
$x->end->modify('+15 days');
$ranges->addRange(new DateRange($x->start, $x->end));

$x = new stdClass();
$x->start = (clone $today);
$x->start->modify('-4 years');
$x->end = (clone $x->start);
$x->end->modify('+15 days');
$ranges->addRange(new DateRange($x->start, $x->end));

echo $ranges->getDaysCount() . ' must be near ' . (31 + 15) . PHP_EOL; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-08T17:19:43.297

将日期转换为时间戳后，以下代码可用作解决方案的一部分： [https ://stackoverflow.com/a/3631016/1414555](https://stackoverflow.com/a/3631016/1414555)

一旦 $data 是带有时间戳的数组，您就可以使用它：

```
usort($data, function($a, $b) { return $a[0] - $b[0]; });

$n = 0; $len = count($data);
for ($i = 1; $i < $len; ++$i) {
    if ($data[$i][0] > $data[$n][1] + 1)
        $n = $i;
    else {
        if ($data[$n][1] < $data[$i][1])
            $data[$n][1] = $data[$i][1];
        unset($data[$i]);
    }
}

$duration = 0; //Duration in seconds
foreach ($data as $range)
    $duration += ($range[1] - $range[0]); 
```

# types - 无法在 Ember 模型中设置数字和字符串类型的默认值

> ID：15719188
> 
> 赞同：4
> 
> 时间：2013-03-30T13:41:59.490
> 
> 标签：types, model, ember.js, default, ember-data

我正在尝试在 Ember 模型中设置默认类型，但只有某些类型有效：

```
 createdDate: DS.attr('date', {defaultValue: new Date()}) // Works
  createdDate: DS.attr('boolean', {defaultValue: false}) // Works
  createdDate: DS.attr('string', {defaultValue: "example"}) // Doesn't work - attribute null
  createdDate: DS.attr('number', {defaultValue: 99}) // Doesn't work - attribute null 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-25T17:30:51.513

根据[这里](http://emberjs.com/api/data/classes/DS.Model.html#method_attr)，你所有的代码都很好。但是，[看起来](https://github.com/emberjs/data/blob/b4a415e1be4db3673a102b3fdc45b6bd22d46d59/packages/ember-data/lib/system/model/attributes.js#L63-65)defaultValue 只处理`undefined`案例（您的布尔值和日期）。您可以尝试`null`使用将传递第二个参数的函数来处理这些情况。

# mysql - 获取 MySQL 数据库中每个团队的最后 6 条记录

> ID：15719190
> 
> 赞同：3
> 
> 时间：2013-03-30T13:42:07.553
> 
> 标签：mysql, sql, greatest-n-per-group

我有一个包含足球结果的 MySQL 数据库，并且只想检索该数据的特定子集。

数据由一张表组成，其中包含 MatchDate、HomeTeam、AwayTeam、HomeGoals、AwayGoals

如何检索包含每个团队参与的最后 6 场比赛的数据子集？

虽然我可以为单个团队执行此操作，但如何获得包含表中每个团队的最后 6 场比赛的单个子集？（我不担心子集可能包含一些重复项）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T15:06:09.340

你的问题不是专门关于主队或客队的，所以我认为一场比赛可能两者兼而有之。

以下查询将获取前六场比赛，无论它们在哪里进行：

```
select MatchDate, HomeTeam, AwayTeam, HomeGoals, AwayGoals
from (select m.*,
             (select count(*)
              from matches m2
              where (m.hometeam = m2.hometeam or m.hometeam = m2.awayteam) and
                    m.matchdate <= m2.matchdate
             ) GameCounter
      from matches m
     ) m
where GameCounter <= 6 
```

它使用相关子查询来获取匹配项。

为了性能，我放弃了相关子查询的想法。这是从 @sgeddes 借用的想法，用于在组内计数：

```
 select m.*
      from (select team, matchdate,
                   @teamCounter:=IF(@prevTeam=Team, @teamCounter+1,1) as teamCounter,
                   @prevTeam:=Team
            from ((select m.hometeam as team, m.*
                   from matches m
                   group by h.hometeam
                  ) union all
                  (select m.awayteam as team, m.*
                   from matches m
                   group by m.awayteam
                  )
                 ) m cross join
                 (select @teamCounter:=0) const
            group by team
            order by team, matchdate desc
           ) m
      where TeamCounter <= 6 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T14:09:46.533

这是使用 a 的一种方法`user-defined variable`：

```
select MatchDate, HomeTeam, AwayTeam, HomeGoals, AwayGoals
from (
  select 
    MatchDate, HomeTeam, AwayTeam, HomeGoals, AwayGoals,
    @teamCounter:=IF(@prevHome=HomeTeam,@teamCounter+1,1) teamCounter,
    @prevHome:=HomeTeam
  from yourtable
    join (select @teamCounter:=0) t
  order by HomeTeam, MatchDate desc
  ) t 
where teamCounter <= 6 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/f8e52/2)

这是 Fiddle 的更新：

```
select team, MatchDate, HomeTeam, AwayTeam, HomeGoals, AwayGoals
from (
  select 
    team, yourtable.MatchDate, HomeTeam, AwayTeam, HomeGoals, AwayGoals,
    @teamCounter:=IF(@prevHome=team,@teamCounter+1,1) teamCounter,
    @prevHome:=team
  from yourtable
    join (
      select distinct matchdate, hometeam team
      from yourtable
      union 
      select distinct matchdate, awayteam
      from yourtable
    ) allgames on yourtable.matchdate = allgames.matchdate
        and (yourtable.hometeam = allgames.team or yourtable.awayteam = allgames.team)
    join (select @teamCounter:=0) t
  order by team, yourtable.MatchDate desc
  ) t 
where teamCounter <= 6
order by team 
```

[更新的 SQL Fiddle](http://sqlfiddle.com/#!2/8bb31/8)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T13:53:02.283

我会使用类似的东西：

使用 IN（较新的 mysql）

```
select *,HomeTeam AS HOME from myTable
where HomeTeam in
    (select HomeTeam from myTable 
    where Hometeam = HOME 
    order by created_date limit 6)
group by HomeTeam 
```

没有 IN（旧的 mysql）

```
select * from myTable t1
where HomeTeam IN
    (select HomeTeam from myTable t2
    where t2.HomeTeam = t1.HomeTeam
        order by created_date 
        limit 6)
group by t1.HomeTeam 
```

请注意，您确实应该在这里使用和标记 ID。

如果还没有，这个表应该有一个主键。理想情况下称为 ID 或 [table_name]_id。这将使您能够使用此 ID 进行子选择和连接。永远不要假设这些记录无论如何都是唯一的。使用 ID 自动递增主键作为一般做法，它将对您有很大帮助。

# yii-extensions - 如何将hebo html模板集成到yii框架中

> ID：15719192
> 
> 赞同：0
> 
> 时间：2013-03-30T13:42:39.210
> 
> 标签：yii-extensions, yii, yii-events

[如何将hebo html模板集成到yii框架中](https://stackoverflow.com/questions/15246555/how-to-integrate-hebo-html-tempalte-into-yii-framework)

我是使用 yii 框架的新手。我从下载 hebo 模板

[http://www.webapplicationthemes.com/hebo-responsive-html5-theme/](http://www.webapplicationthemes.com/hebo-responsive-html5-theme/)

我可以安装模板 hebo，但我不使用 ie。

不要使用流体引导程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-16T14:41:16.870

转到views/layouts/main.php 并删除html 注释“<- 需要标头->”，而不是您可以将其添加为php 注释。此注释出现在标记之前，它导致 IE 不理解 HTML5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:19:20.827

您是否将主题转换为与 Yii 一起使用？

这种主题的一个问题是它有多种页面类型，这在 Yii 中很难复制。默认情况下，Yii 没有页面类型的概念，除非您使用布局将其编码到控制器中......

在最简单的级别上，转换可以基于全宽页面，将 mainContent div 转换为注入 $content。然后，您需要更改布局以使用单列...

我刚刚为他们的另一个模板完成了这个，并且不需要太长时间 - 虽然如果有人对页面类型有更好的想法，我会非常感兴趣....

# dart - 从 const 对象返回的 const 值应该是 const 吗？

> ID：15719193
> 
> 赞同：1
> 
> 时间：2013-03-30T13:42:44.157
> 
> 标签：dart

我正在使用下面的样式类来模仿枚举（来自[Dart 支持枚举吗？](https://stackoverflow.com/questions/13899928/does-dart-support-enumerations)）它工作正常，因为这个片段产生了预期的结果。

```
void main() {
  InterpolationType it = InterpolationType.LINEAR;
  print("it is $it and stringified ${stringify(it)}");
  print(InterpolationType.fromJson(it.toJson()));
} 
```

但是 DartEditor 在 fromJson 方法的 case 语句中抱怨“预期的常量表达式”。有没有我可以在某处扔掉这个投诉的 const ？

```
class InterpolationType { 
  static const LINEAR = const InterpolationType._(0);
  static const STEP = const InterpolationType._(1);
  static const CUBIC = const InterpolationType._(2);

  static get values => [
    LINEAR,
    STEP,
    CUBIC
  ];

  final int value;

  const InterpolationType._(this.value);

  String toString() { 
    switch(this) { 
      case LINEAR: return "LINEAR";
      case STEP: return "STEP";
      case CUBIC: return "CUBIC";
    }
  }

  int toJson() { 
    return this.value;
  }

  static InterpolationType fromJson(int v) { 
    switch(v) { 
      case LINEAR.value: return LINEAR;
      case STEP.value: return STEP;
      case CUBIC.value: return CUBIC;
    }
  }

  static InterpolationType fromString(String s) { 
    switch(s) { 
      case "LINEAR": return LINEAR;
      case "STEP": return STEP;
      case "CUBIC": return CUBIC;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T14:36:17.393

正如您所发现的：从 const 对象访问字段不是一个常量操作。所以编辑器（以及 VM 和 dart2js）是正确的。

With the current syntax there is no way to express a (informal) contract that a field of a class will always be a final field. For example, I could change the value-field to be a getter instead of a field. The interface-contract of the class definitely allows me to do that, because I never told anybody that I would keep "value" as a field. However if I did that it would break every program that relied on the existence of this final field.

As a consequence the current behavior is very unlikely to change.

However: in theory it would be possible to improve the Dart language so that you could use "const" instead of "final" for local fields, and initialize them with initializer lists. And in this case accessing the field could be considered a constant operation. I currently don't see any downsides to this behavior and it would be backwards-compatible.

```
// WARNING: What follows DOES NOT WORK, just a potential example
class InterpolationType {
  const value;  // Note the "const" instead of "final".
  const InterpolationType._(this.value);
} 
```

The language is already pretty stable but you can open a bug at [http://dartbug.com/](http://dartbug.com/) and suggest this behavior. It's not very likely that the feature-request would be accepted, but it's definitely worth a try.

# ios - 重新排序 UICollectionView 的单元格

> ID：15719196
> 
> 赞同：43
> 
> 时间：2013-03-30T13:43:09.857
> 
> 标签：ios, ios6, uicollectionview, uicollectionviewlayout

考虑一个`UICollectionView`带有流式布局和水平方向的布局。默认情况下，单元格按从上到下、从左到右的顺序排列。像这样：

```
1 4 7 10 13 16
2 5 8 11 14 17
3 6 9 12 15 18 
```

在我的例子中，collection view 是分页的，并且它的设计使得特定数量的单元格适合每个页面。因此，更自然的排序将是：

```
1 2 3   10 11 12
4 5 6 - 13 14 15
7 8 9   16 17 18 
```

除了实现我自己的自定义布局之外，最简单的实现方式是什么？特别是，我不想放弃任何免费提供的功能`UICollectionViewFlowLayout`（例如插入/删除动画）。

或者一般来说，您如何`f(n)`在流布局上实现重新排序功能？例如，这同样适用于从右到左的排序。

## 到目前为止我的方法

我的第一种方法是子类化`UICollectionViewFlowLayout`和覆盖`layoutAttributesForItemAtIndexPath:`：

```
- (UICollectionViewLayoutAttributes *)layoutAttributesForItemAtIndexPath:(NSIndexPath *)indexPath
{
    NSIndexPath *reorderedIndexPath = [self reorderedIndexPathOfIndexPath:indexPath];
    UICollectionViewLayoutAttributes *layout = [super layoutAttributesForItemAtIndexPath:reorderedIndexPath];
    layout.indexPath = indexPath;
    return layout;
} 
```

`reorderedIndexPathOfIndexPath:`在哪里`f(n)`。通过调用`super`，我不必手动计算每个元素的布局。

此外，我必须覆盖`layoutAttributesForElementsInRect:`，这是布局用来选择要显示哪些元素的方法。

```
- (NSArray *)layoutAttributesForElementsInRect:(CGRect)rect
{
    NSMutableArray *result = [NSMutableArray array];
    NSInteger sectionCount = 1;
    if ([self.collectionView.dataSource respondsToSelector:@selector(numberOfSectionsInCollectionView:)])
    {
        sectionCount = [self.collectionView.dataSource numberOfSectionsInCollectionView:self.collectionView];
    }
    for (int s = 0; s < sectionCount; s++)
    {
        NSInteger itemCount = [self.collectionView.dataSource collectionView:self.collectionView numberOfItemsInSection:s];
        for (int i = 0; i < itemCount; i++)
        {
            NSIndexPath *indexPath = [NSIndexPath indexPathForItem:i inSection:s];
            UICollectionViewLayoutAttributes *layout = [self layoutAttributesForItemAtIndexPath:indexPath];
            if (CGRectIntersectsRect(rect, layout.frame))
            {
                [result addObject:layout];
            }
        }
    }
    return result;
} 
```

在这里，我只是尝试每个元素，如果它在给定的范围内`rect`，我将其返回。

如果这种方法是要走的路，我有以下更具体的问题：

*   有什么办法可以简化`layoutAttributesForElementsInRect:`覆盖，或者提高效率？
*   我错过了什么吗？至少交换不同页面的单元格会产生奇怪的结果。我怀疑它与`initialLayoutAttributesForAppearingItemAtIndexPath:`and相关`finalLayoutAttributesForDisappearingItemAtIndexPath:`，但我无法准确指出问题所在。
*   就我而言，`f(n)`取决于每页的列数和行数。除了自己硬编码之外，有没有什么方法可以从中提取这些信息`UICollectionViewFlowLayout`？我想过用集合视图的边界进行[查询`layoutAttributesForElementsInRect:`](https://stackoverflow.com/a/15720380/143378)，并从那里推导出行和列，但这也感觉效率低下。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-09T07:09:38.890

我对您的问题考虑了很多，并考虑了以下几点：

子类化 FlowLayout 似乎是对单元格重新排序和使用流布局动画的最正确和最有效的方法。您的方法有效，除了两件重要的事情：

1.  假设您有一个只有 2 个单元格的集合视图，并且您已将页面设计为可以包含 9 个单元格。第一个单元格将位于视图的左上角，就像在原始流布局中一样。但是，您的第二个单元格应位于视图的顶部，并且它具有索引路径 [0, 1]。重新排序的索引路径将是 [0, 3]（将在其位置上的原始流布局单元的索引路径）。在你的`layoutAttributesForItemAtIndexPath`覆盖中，你会发送这样的消息`[super layoutAttributesForItemAtIndexPath:[0, 3]]`，你会得到一个`nil`对象，只是因为只有 2 个单元格：[0,0] 和 [0,1]。这将是您最后一页的问题。
2.  即使您可以通过覆盖`targetContentOffsetForProposedContentOffset:withScrollingVelocity:`和手动设置诸如 和 之类的属性来实现分页行为，但要使您的项目对称、定义分页边界等`itemSize`，还是需要做很多工作。`minimumLineSpacing``minimumInteritemSpacing`

我认为，子类化流布局正在为您准备很多实现，因为您想要的不再是流布局。但是让我们一起考虑一下。关于你的问题：

*   您的`layoutAttributesForElementsInRect:`覆盖正是原始苹果实现的方式，因此无法简化它。但是，对于您的情况，您可以考虑以下内容：如果每页有 3 行项目，并且第一行中的项目框架与矩形框架相交，那么（如果所有项目的大小相同）第二和第三行项目的框架与此矩形相交。
*   对不起，我不明白你的第二个问题
*   在我的情况下，重新排序函数如下所示：（a 是每页上的行/列的*整数，行=列）*

> f(n) = (n % a²) + (a - 1)(col - 行) + a²(n / a²); col = (n % a²) % a; 行 = (n % a²) / a;

回答这个问题时，流布局不知道每列中有多少行，因为这个数字可能因每个项目的大小而异。它也可以不说每页上的列数，因为它取决于滚动位置并且也可以变化。所以没有比查询更好的方法了`layoutAttributesForElementsInRect`，但这也包括单元格，这些单元格只是部分可见。由于您的单元格大小相等，理论上您可以通过水平滚动方向找出您的集合视图有多少行：通过开始迭代每个单元格来计算它们并在它们`frame.origin.x`发生变化时中断。

**所以，我认为，你有两种选择来实现你的目的：**

1.  子类`UICollectionViewLayout`。实现所有这些方法似乎需要做很多工作，但这是唯一有效的方法。例如，您可以具有 , 之类的`itemSize`属性`itemsInOneRow`。然后你可以很容易地找到一个公式来根据它的编号计算每个项目的框架（最好的方法是把`prepareLayout`所有的框架存储在数组中，这样你就可以访问你需要的框架`layoutAttributesForItemAtIndexPath`）。实现`layoutAttributesForItemAtIndexPath`,`layoutAttributesForItemsInRect`也`collectionViewContentSize`将非常简单。在中`initialLayoutAttributesForAppearingItemAtIndexPath`，`finalLayoutAttributesForDisappearingItemAtIndexPath`您可以将 alpha 属性设置为 0.0。这就是标准流布局动画的工作原理。通过覆盖`targetContentOffsetForProposedContentOffset:withScrollingVelocity:`，您可以实现“分页行为”。

2.  考虑使用流布局、`pagingEnabled = YES`水平滚动方向和项目大小等于屏幕大小的集合视图。每个屏幕尺寸一个项目。对于每个单元格，您可以将新的集合视图设置为具有垂直流布局的子视图以及与其他集合视图相同的数据源，但具有偏移量。它非常有效，因为这样您就可以重用包含 9 个（或其他）单元块的整个集合视图，而不是使用标准方法重用每个单元格。所有动画都应该正常工作。

[在这里](https://www.box.com/s/sti5p434fsu426mawy1o)，您可以使用布局子类化方法下载示例项目。(#2)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T14:09:03.023

**拥有两个**带有标准的集合视图不是一个简单的解决方案`UICollectionViewFlowLayout`吗？

**甚至更好：拥有一个具有水平滚动的页面视图控制器，并且每个页面都是具有正常流布局的集合视图。**

这个想法如下：在`UICollectionViewController -init method`你创建第二个集合视图，框架偏移到你的原始集合视图宽度的右侧。然后将其作为子视图添加到原始集合视图。要在集合视图之间切换，只需添加一个滑动识别器。要计算偏移值，您可以将集合视图的原始帧存储在 ivar 中`cVFrame`。要识别您的集合视图，您可以使用标签。

方法示例`init`：

```
CGRect cVFrame = self.collectionView.frame;
UICollectionView *secondView = [[UICollectionView alloc] 
              initWithFrame:CGRectMake(cVFrame.origin.x + cVFrame.size.width, 0, 
                             cVFrame.size.width, cVFrame.size.height) 
       collectionViewLayout:[UICollectionViewFlowLayout new]];
    [secondView setBackgroundColor:[UIColor greenColor]];
    [secondView setTag:1];
    [secondView setDelegate:self];
    [secondView setDataSource:self];
    [self.collectionView addSubview:secondView];

UISwipeGestureRecognizer *swipeRight = [[UISwipeGestureRecognizer alloc]
                      initWithTarget:self action:@selector(swipedRight)];
    [swipeRight setDirection:UISwipeGestureRecognizerDirectionRight];

UISwipeGestureRecognizer *swipeLeft = [[UISwipeGestureRecognizer alloc] 
                       initWithTarget:self action:@selector(swipedLeft)];
    [swipeLeft setDirection:UISwipeGestureRecognizerDirectionLeft];

    [self.collectionView addGestureRecognizer:swipeRight];
    [self.collectionView addGestureRecognizer:swipeLeft]; 
```

例子`swipeRight`和`swipeLeft`方法：

```
-(void)swipedRight {
    // Switch to left collection view
    [self.collectionView setContentOffset:CGPointMake(0, 0) animated:YES];
}

-(void)swipedLeft {
    // Switch to right collection view
    [self.collectionView setContentOffset:CGPointMake(cVFrame.size.width, 0) 
                                 animated:YES];
} 
```

然后实现 DataSource 方法不是一个大问题（在您的情况下，您希望每个页面上有 9 个项目）：

```
-(NSInteger)collectionView:(UICollectionView *)collectionView 
    numberOfItemsInSection:(NSInteger)section {
    if (collectionView.tag == 1) {
         // Second collection view
         return self.dataArray.count % 9;
    } else {
         // Original collection view
         return 9; // Or whatever
} 
```

在方法`-collectionView:cellForRowAtIndexPath`中，如果它是第二个集合视图，您将需要从具有偏移量的模型中获取数据。

也不要忘记为您的第二个集合视图注册可重用单元格的类。您还可以只创建一个手势识别器并识别左右滑动。由你决定。

我想，现在应该可以了，试试看:-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-30T22:33:49.437

您有一个实现该`UICollectionViewDataSource`协议的对象。里面`collectionView:cellForItemAtIndexPath:`只需返回您要返回的正确项目。不明白哪里会出问题。

编辑：好的，我看到了问题。这是解决方案：[http](http://www.skeuo.com/uicollectionview-custom-layout-tutorial) ://www.skeuo.com/uicollectionview-custom-layout-tutorial ，具体步骤17到25。这不是一个巨大的工作量，并且可以很容易地重复使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-22T16:16:45.427

这是我的解决方案，我没有用动画进行测试，但我认为只要稍作改动就可以了，希望对您有所帮助

```
CELLS_PER_ROW = 4;
CELLS_PER_COLUMN = 5;
CELLS_PER_PAGE = CELLS_PER_ROW * CELLS_PER_COLUMN;

UICollectionViewFlowLayout* flowLayout = (UICollectionViewFlowLayout*)collectionView.collectionViewLayout;
flowLayout.scrollDirection = UICollectionViewScrollDirectionHorizontal;
flowLayout.itemSize = new CGSize (size.width / CELLS_PER_ROW - delta, size.height / CELLS_PER_COLUMN - delta);
flowLayout.minimumInteritemSpacing = ..;
flowLayout.minimumLineSpacing = ..;
..

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView
                  cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    NSInteger index = indexPath.row;
    NSInteger page = index / CELLS_PER_PAGE;
    NSInteger indexInPage = index - page * CELLS_PER_PAGE;
    NSInteger row = indexInPage % CELLS_PER_COLUMN;
    NSInteger column = indexInPage / CELLS_PER_COLUMN;

    NSInteger dataIndex = row * CELLS_PER_ROW + column + page * CELLS_PER_PAGE;

    id cellData = _data[dataIndex];
    ...
} 
```

# ios - Find single finger tap target

> ID：15719197
> 
> 赞同：2
> 
> 时间：2013-03-30T13:43:12.290
> 
> 标签：ios, objective-c

I have an array of similar objects (thumbnails) on which I appended a singleFingerTap recognizer like this:

```
UITapGestureRecognizer *singleFingerTap =
    [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(backgroundThumbnailTapped)];
    [self addGestureRecognizer:singleFingerTap]; 
```

How can I know in my selector (backgroundThumbnailTapped) which of the thumbnails was tapped?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T13:53:19.733

Change the signature of your selector to accept the gesture recognizer, like this:

```
-(void) backgroundThumbnailTapped:(UIGestureRecognizer *)gestureRecognizer {
    // Below, you can get the view to which the recognizer is attached:
    [gestureRecognizer.view doSomething];
    //                 ^^^
    //                  |
    //     This is the view in which the tap was triggered
} 
```

You need to put a colon when adding the recognizer:

```
UITapGestureRecognizer *singleFingerTap =
    [[UITapGestureRecognizer alloc] initWithTarget:self
        action:@selector(backgroundThumbnailTapped:)];
//                                 Here ----------^
    [self addGestureRecognizer:singleFingerTap]; 
```

# java - Cloudfroundry 本地 MongoDB 部署

> ID：15719200
> 
> 赞同：1
> 
> 时间：2013-03-30T13:43:45.467
> 
> 标签：java, spring, deployment, web-deployment, cloud-foundry

我们想用spring和mongodb启动一个项目，最后想把它部署在cloudfoundry上。将有三个不同的应用程序应该绑定到一个 mongodb 服务，即所有三个应用程序都需要访问 mongodb 数据库。现在我们想使用本地 mongodb 和 tomcat 进行本地开发（而不实际部署到云端），...）因为这样我们可以获得更好的调试功能、热部署等...（这甚至可以通过 cloudfoundry 实现吗？）如何我可以配置我的 Spring 应用程序，使其在本地部署时使用本地安装的 mongodb 并绑定到 cloudfoundry 中部署的 cloudfoundry mongodb 服务吗？这甚至是在本地开发/部署并最终部署到云的好主意吗？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:36:25.340

[基于Cloud Foundry](http://cloudfoundry.org)的应用程序的设想开发模型是使用所谓的*Micro Cloud Foundry*来满足您的本地开发需求，目前/通常是基于虚拟机 (VM) 的单节点，但在其他情况下可以“在盒子中”完成 Cloud Foundry 安装。

*   这种方法的唯一缺点是（默认情况下）您总是需要求助于远程调试技术（即使在本地/离线开发时），而不是许多动态语言开发人员习惯使用的*更改代码和重新加载浏览器*方法。
    *   这是否重要在很大程度上取决于您的开发过程，但可以公平地说，这种方法有利于基于单元测试、持续集成等更精细/成熟的编码技术 - 假设您指定 Java/Spring 作为目标语言/框架你应该为此做好充分的准备......

### Cloud Foundry 端点定位

一旦你有了这样一个虚拟机，你只需要切换目标 Cloud Foundry 端点并以相同的方式部署到其中一个，即 Cloud Foundry 运行时会像往常一样自动处理与相应服务的绑定，参见例如[Targeting云铸造](http://docs.cloudfoundry.com/tools/vmc/vmc-quick-ref.html#targeting-cloud-foundry)：

*云中的目标 Cloud Foundry：*

```
prompt$ vmc target api.cloudfoundry.com 
```

*以在本地虚拟机上运行的独立 Micro Cloud Foundry 为目标：*

```
prompt$ vmc target api.<domain>.cloudfoundry.com 
```

### Micro Cloud Foundry 变体

大多数 Cloud Foundry 供应商都提供此类*Micro Cloud Foundry* VM 的自定义变体，例如：

*   [微云代工](https://micro.cloudfoundry.com/)
*   [Stackato 微云](http://www.activestate.com/stackato/download_vm)
*   [微型铁铸造厂](http://ironfoundry.org/download)

# html - Fixing my 'Responsive' design

> ID：15719203
> 
> 赞同：0
> 
> 时间：2013-03-30T13:43:54.573
> 
> 标签：html, css, tumblr

On my website, [kylesethgray.com](http://kylesethgray.com/), I have made a somewhat 'responsive design'. Everything seems fine except two things:

1.  If i have a list, be it `<ul>` or `<ol>`, the bullets get cut off when the browser window is shortened horizontally

2.  For some reason, when doing the same thing to imitate a mobile browser, a horizontal scrollbar appears, and scrolls to the right, even though there isn't anything there.

Is there anything I can do to fix this?

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-30T13:54:23.373

I think the YouTube embed is breaking your layout, try this CSS:

`.video iframe { width: 100% }`

Also you should consider to use a framework for responsive design like [Foundation](http://foundation.zurb.com/) or [Columnal](http://www.columnal.com/)

# google-api - 是否可以从 google places api 获得最新的 5 条 google 评论？

> ID：15719205
> 
> 赞同：1
> 
> 时间：2013-03-30T13:44:35.350
> 
> 标签：google-api, google-places-api

我开发了一个脚本来使用 google places api 获取和显示 google 评论。它获得了五条评论，但不是最新的。

google places api 会返回 5 条随机评论还是最新的 5 条评论？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-07-01T14:59:09.917

Places API 默认仅返回 5，如果您申请 GMB API 并且您管理验证可以访问帐户评论的位置，但这仅在您获得 API 批准并且您对企业进行身份验证时才有效；或者，您可以随时复制/粘贴或使用第三方服务来获取 Reviewmaker 等；但是没有其他方法可以通过 Places API 返回超过 5 个，这与 Yelp 相同，Yelp 也限制您获取超过上限的数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T13:26:00.340

如此处所述：[http ://code.google.com/p/gmaps-api-issues/issues/detail?id=2477](http://code.google.com/p/gmaps-api-issues/issues/detail?id=2477)

“这是在 Google+ Local 上显示的前 5 条评论，我认为这些评论是按相关性/有用性排名的。无法更改所请求的评论集。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-24T08:24:37.540

只需您拥有一个始终从谷歌地图位置返回最新评论的 api。

```
https://maps.googleapis.com/maps/api/place/details/json?place_id={Your Place ID}&fields=name,rating,reviews&key={GOOGLE DEV KEY} 
```

这是该 api 的响应。

```
{
  "html_attributions" : [],
  "result" : {
  "name" : "gathern app",
  "rating" : 5,
  "reviews" : [
     {
        "author_name" : "صالح وحيد Saleh Waheed",
        "author_url" : "https://www.google.com/maps/contrib/100946881376925963940/reviews",
        "language" : "en",
        "profile_photo_url" : "https://lh3.ggpht.com/-bgNhUmU_Ftg/AAAAAAAAAAI/AAAAAAAAAAA/-rLGfz7aAEk/s128-c0x00000000-cc-rp-mo-ba2/photo.jpg",
        "rating" : 5,
        "relative_time_description" : "in the last week",
        "text" : "Gathern is an online platform that helps people find vacation rentals and chalets in KSA.\n\nGreat team and great website.\n\nGathern.co",
        "time" : 1582015365
     },
     {
        "author_name" : "Hassan Raza",
        "author_url" : "https://www.google.com/maps/contrib/109666951306307815476/reviews",
        "language" : "en",
        "profile_photo_url" : "https://lh3.ggpht.com/-VrVSfhsRo28/AAAAAAAAAAI/AAAAAAAAAAA/9gJQWSdJ3TM/s128-c0x00000000-cc-rp-mo-ba3/photo.jpg",
        "rating" : 5,
        "relative_time_description" : "a week ago",
        "text" : "Great peoples and superb platform for booking online chalets.",
        "time" : 1581492666
     },
     {
        "author_name" : "Eman Alswailem",
        "author_url" : "https://www.google.com/maps/contrib/115734038039879616345/reviews",
        "language" : "ar",
        "profile_photo_url" : "https://lh4.ggpht.com/-xNiMOs2bD3A/AAAAAAAAAAI/AAAAAAAAAAA/tElDIT5zP78/s128-c0x00000000-cc-rp-mo/photo.jpg",
        "rating" : 5,
        "relative_time_description" : "2 months ago",
        "text" : "تطبيق ممتاز لحجز الشاليهات اون لاين",
        "time" : 1575659218
     },
     {
        "author_name" : "Hanan alnami",
        "author_url" : "https://www.google.com/maps/contrib/114513293972924581219/reviews",
        "language" : "ar",
        "profile_photo_url" : "https://lh6.ggpht.com/-BUEZWeWQhv4/AAAAAAAAAAI/AAAAAAAAAAA/7A8id3FGLQA/s128-c0x00000000-cc-rp-mo/photo.jpg",
        "rating" : 5,
        "relative_time_description" : "6 months ago",
        "text" : "تطبيق ممتاز دايم احجز منه شاليهات شكرا لكم",
        "time" : 1566223757
     }
  ]
},
"status" : "OK" 
```

}

# c# - C# Mail Server?

> ID：15719207
> 
> 赞同：2
> 
> 时间：2013-03-30T13:44:41.487
> 
> 标签：c#

I'm trying to understand exactly what it is I need to be implementing and am just after a little guidance. I know very little about email standards such as POP3, IMAP, SMTP which is probably what's making the getting started difficult.

What'd I'd like to do consists of a couple of things:

1.  Be notified of the arrival of an email at a specific custom address. e.g. hi.me@myapp.com.
2.  Handle multiple addresses per user.
3.  Be able to process this email and either delete it, leave it and be able to display in a web email client or forward it on based on various rules.

I've seen a few SMTP libraries and a POP3 one, but I'm not 100% sure what I need to do this. I'm guessing the best way would be to write a full C# mail server - but I'm hoping for a little guidance/suggestion.

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T14:24:50.730

If you really want to build a mailserver from scratch, the protocol specifications are all available as RFCs.

For IMAP that would be [RFC-3501](https://www.rfc-editor.org/rfc/rfc3501) and for SMTP [RFC-2821](http://www.ietf.org/rfc/rfc2821.txt), you can google for the rest.

I've been working on a C# SMTP server in my (very limited) spare time, mostly out of frustration with existing MTAs and as an exercise in C# server programming. I can tell you that there's a bit more to it than you might think. So if you want fast results, I'd seriously consider hooking into an existing MTA/mailserver setup.

Depending on how fast you want to process messages, it may be sufficient to poll one or more mailboxes. You could process the messages and, for example, forward them to another mailbox using the built-in .NET [SmtpClient](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.aspx).

On top of that, all mail servers I know of implement not just the SMTP protocol but also a slew of anti-spam measures. Most of these measures have matured over many years. You get all that for free if you build on top of an existing mail server infrastructure.

Then again, configuration of just about any mail server I know seems to be a fine art, hence my frustration with them.

# java - JButton Array Action Listener 仅适用于最后一个按钮

> ID：15719209
> 
> 赞同：1
> 
> 时间：2013-03-30T13:44:48.267
> 
> 标签：java, arrays, swing, jbutton, actionlistener

我制作了一个按钮数组，并尝试在 for 循环中为每个按钮添加一个 ActionListener，并使用 for 循环监听所有按钮，但问题是唯一响应的按钮是最后一个创建的按钮。我究竟做错了什么？

```
nums = new JButton[13];
ListenForButton lfb = new ListenForButton();
for (int i = 1; i < 13; i++) {
    nums[i].addActionListener(lfb);
} 
```

* * *

```
private class ListenForButton implements ActionListener{
    public void actionPerformed(ActionEvent e) {
        for(int i=0;i<13;i++){
            if( e.getSource() == nums[i]) {
                System.out.println("pressed");
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:06:32.313

方法 ActionEvent.getSource() 返回一个 Object 类型的实例，为此您需要将其类型转换为 JButton

```
if( e.getSource() == nums[i]) 
```

是真的，所以这样做而不是上面的陈述：

```
if( ((JButton)e.getSource()) == nums[i]) 
```

也试试这个：

```
nums = new JButton[13];

for (int i = 0; i < 13; i++) 
 {
    nums[i] = new JButton();
    nums[i].addActionListener(new ActionListener() {
       public void actionPerformed(ActionEvent ae)
       {
           System.out.println("pressed");
       }
    });
 } 
```

或使用 ActionCommand，如下所示：

```
nums = new JButton[13];

ListenerForButton lfb = new ListenerForButton();
for (int i = 0; i < 13; i++) 
 {
    nums[i] = new JButton();
    nums[i].setActionCommand("button"+i);
    nums[i].addActionListener(lfb);
 }

 private class ListenForButton implements ActionListener{

    public void actionPerformed(ActionEvent e) {

        for(int i=0;i<13;i++){

        if( e.getActionCommand().equals("button"+i)) {
               System.out.println("pressed" + i); //for  getting which button is actually clicked
           }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T13:54:20.350

我认为你应该调用 nums[i].addActionListener(new ListenForButton()); 为了让每个按钮都有一个新的监听器

# mysql - 使用计数按两列分组选择

> ID：15719210
> 
> 赞同：1
> 
> 时间：2013-03-30T13:44:51.667
> 
> 标签：mysql, sql

我在尝试了解如何构建此查询时遇到问题。

我的数据方案：

```
id category name        userid
1  sports   football    1
2  cars     ferrari     1
3  sports   basketball  1
4  film     Matrix      9
5  film     Fauno       9
6  sports   Surf        3 
```

如您所见，即使对于相同的用户 ID，*类别*也可以重复，因为*名称*字段不同。所以我的想法是**获取一组用户的类别以及**该**组每个类别的用户数量**。

假设我有一组用户 set_of_user = (1,9,3)，如果我运行查询

```
SELECT something FROM category_table WHERE userid IN set_of_user SOME CONDITION HERE 
```

正确的结果应该是：

```
category: sports
users: 2
category: cars
users: 1
category: film
users: 1 
```

我最好的镜头是：

```
SELECT userid, category, COUNT(userid) as users from interests WHERE `userid` in ' . $norm_info_ids . ' GROUP BY category 
```

但这给出了一个不好的结果，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T13:57:36.420

我认为这就是您要使用`COUNT`with 的内容`DISTINCT`，以及`GROUP BY`：

```
select category, count(distinct userid)
from interests
where userid in (1,3,9)
group by category 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/89250/2)

导致：

```
CATEGORY   COUNT(DISTINCT USERID)
cars       1
film       1
sports     2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T14:05:53.093

首先您需要选择类别和用户ID的不同配对

```
select t.category, count(t.user_id)
from
(
 SELECT distinct category,user_id 
 from tab
 where user_id in (1,3,9)
 ) t
 group by t.category 
```

# maven - Migrate the Maven repository to another machine

> ID：15719212
> 
> 赞同：0
> 
> 时间：2013-03-30T13:45:07.033
> 
> 标签：maven, maven-3

Is it possible to migrate the Maven repository to another machine without having to reconfigure each item added to it?

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T16:04:39.827

You can just copy the .m2/repository folder to another machine. FYI, you can execute mvn install and it will download all dependencies once again, but it will take while.

# jsf-2 - 无法从网页获取所有值

> ID：15719213
> 
> 赞同：0
> 
> 时间：2013-03-30T13:45:11.947
> 
> 标签：jsf-2

我正在使用 JSF 2 和 Hibernate。我有 XHTML 页面，其中 bean 从数据库中获取并插入到页面中。当我更改 bean 的值并提交 savign 时，我只得到最后一个值。我做错了什么？

**这是我的 XHTML 页面表单代码：**

```
<h:form id="edit-slide-form">

<h:panelGrid columns="2">

    <h:outputText value="#{msgs.slideTitle}" styleClass="label"/>
    <h:inputText id="title" value="#{sliderAction.newSlide.title}" name="#{sliderAction.slide.title}" required="true"/>
    <p></p><h:message for="title" errorClass="error"/>

    <h:outputText value="#{msgs.description}" styleClass="label"/>
    <h:inputTextarea id="description" value="#{sliderAction.newSlide.description}" name="#{sliderAction.slide.description}" required="true"/>                                                               
    <p></p><h:message for="description" errorClass="error"/>

    <p></p>
    <h:commandButton value="#{msgs.save}" action="#{sliderAction.saveChanges}" styleClass="button"/>
    <h:message for="edit-slide-form"/>

</h:panelGrid>

</h:form> 
```

当我提交此表单时，我只能获得最后一个值（例如 id="description"）。

**SliderAction.class**

```
@Named
@SessionScoped
public class SliderAction implements Serializable {

private static final long serialVersionUID = 1L;
private EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory("iaau");
private EntityManager entityManager;

private int id;
private Integer coordinates[] = new Integer[4];
private Image image = new Image();  
private Slide slide = new Slide();
private Slide newSlide = new Slide();
private List<Slide> slides = new ArrayList<Slide>();
private UploadedFile uploadedFile;
private boolean uploaded;

public String uploadSlideImage() {

    ImageAction imageAction = new ImageAction();

    if( uploaded ) {    
        imageAction.delete( image.getUniqueName(), image.getThumb() );
        for( int i = 0; i < coordinates.length; i++ ) {
            coordinates[i] = null;
        }
    }

    imageAction.upload(uploadedFile, false);

    setImage( imageAction.getImage() );

    uploaded = true;

    return null;
}

public String cropAndSave(){

    ImageAction imageAction = new ImageAction();
    imageAction.cropSlide( image, coordinates, 928, 318 );

    newSlide = new Slide();
    newSlide.setImage( image );

    startTransaction();
    entityManager.persist(image);
    entityManager.persist(newSlide);
    endTransaction();
    closeTransaction();

    uploaded = false;
    setId(newSlide.getId());

    return "edit";
}

public String saveChanges() {

    startTransaction();
    entityManager.merge(newSlide);
    endTransaction();
    closeTransaction();

    return "list";
}

public void deleteSlide() {
    startTransaction();
    slide = (Slide)entityManager.find(Slide.class, id);
    entityManager.remove(slide);
    endTransaction();
    closeTransaction();

    ImageAction imageAtion = new ImageAction();
    imageAtion.delete(slide.getImage().getUniqueName(), slide.getImage().getThumb());
}

public Slide getSlide() {

    startTransaction();
    slide = entityManager.find(Slide.class, id);        
    endTransaction();
    closeTransaction();

    return slide;
}

public void setSlide(Slide slide) {
    this.slide = slide;
}

public Slide getNewSlide() {

    startTransaction();
    newSlide = entityManager.find(Slide.class, id);     
    endTransaction();
    closeTransaction();

    return newSlide;
}

public void setNewSlide(Slide newSlide) {
    this.newSlide = newSlide;
}

@SuppressWarnings("unchecked")
public List<Slide> getSlides() {
    startTransaction();
    slides = entityManager.createQuery("from Slide").getResultList();
    endTransaction();
    closeTransaction();

    return slides;
}

/*Declaration of EntityManager and other getter and setter methods*/ 
```

}

**幻灯片类**

```
@Entity
public class Slide extends AbstractEntity<Integer>{

private static final long serialVersionUID = 1L;

private String title;
private String description;
private Image image;
private String link;
private Page page;
private boolean showOnFeed;
private boolean approved;   

public String getTitle() {
    return title;
}

public void setTitle(String title) {
    this.title = title;
}   

public String getDescription() {
    return description;
}

public void setDescription(String description) {
    this.description = description;
}

@OneToOne
public Image getImage() {
    return image;
}

public void setImage(Image image) {
    this.image = image;
}

public String getLink() {
    return link;
}

public void setLink(String link) {
    this.link = link;
}

@OneToOne
public Page getPage() {
    return page;
}

public void setPage(Page page) {
    this.page = page;
}
@Column(name="show_on_feed")
public boolean isShowOnFeed() {
    return showOnFeed;
}

public void setShowOnFeed(boolean showOnFeed) {
    this.showOnFeed = showOnFeed;
}

public boolean isApproved() {
    return approved;
}

public void setApproved(boolean approved) {
    this.approved = approved;
} 
```

}

我也注意到这个警告信息：

```
[org.hibernate.ejb.internal.EntityManagerFactoryRegistry] (http-localhost-127.0.0.1-8080-1) HHH000436: Entity manager factory name (iaau) is already registered.  If entity manager will be clustered or passivated, specify a unique value for property 'hibernate.ejb.entitymanager_factory_name' 
```

这会导致这样的问题吗

# javascript - getElementsByClassName 与 jquery

> ID：15719222
> 
> 赞同：12
> 
> 时间：2013-03-30T13:46:18.990
> 
> 标签：javascript, jquery

如果我原来的功能是：

```
document.getElementsByClassName('blah')[9].innerHTML = 'blah'; 
```

...我将如何更改它以便在 jquery 中获得相同的项目？我有这个，但是当我把'[9]'放在最后时它不起作用：

```
$(data).find('.blah')[9].html(); 
```

如果我把 [9] 排除在外，它只会得到第一个类名为“blah”的项目，我希望它得到第 10 个项目。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-30T13:48:41.263

相当于

```
document.getElementsByClassName('blah')[9].innerHTML = 'blah'; 
```

是使用[`:eq`伪选择器](http://api.jquery.com/eq-selector/)：

```
$(".blah:eq(9)").html('blah'); 
```

或[`eq`功能](http://api.jquery.com/eq/)：

```
$(".blah").eq(9).html('blah'); 
```

（...然后是设置内部 HTML的[`html`函数。）](http://api.jquery.com/html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T13:54:18.210

看看你要找的是`:eq()`：

```
$('.blah').eq(9).html('blah'); 
```

因为`:eq()`被`0`索引，所以`:eq(9)`会在第 10 个索引处找到该项目。

[.eq() jQuery 文档](http://api.jquery.com/eq/)

还有`:nth-child()`功能：

```
$('.blah:nth-child(10)').html('blah'); 
```

因为`:nth-child()`已`1`编入索引，所以您必须在此处排第 10 位。

[:nth-child() jQuery 文档](http://api.jquery.com/nth-child-selector/)

### 来自文档：

> 因为 jQuery 对 :nth- 选择器的实现是严格从 CSS 规范派生的，所以 n 的值是“1-indexed”，意味着从 1 开始计数。对于其他选择器表达式，例如 :eq() 或 :even jQuery JavaScript 的“0-indexed”计数。给定一个包含两个
> 
> *   s, $('li:nth-child(1)') 选择第一个*   而 $('li:eq(1)') 选择第二个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T13:49:09.873

尝试以下

```
$('.blah').eq(9).html('blah'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-30T13:54:57.213

试试这个

```
$('.blah').eq(9).html('blah'); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-21T18:16:32.923

您还应该能够使用 jQuery 的 get() 方法：

```
$('.blah').get(9) 
```

jQuery objects also function as indexed arrays as returned elements, so this should also work:

```
$('.blah')[9] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-30T13:51:36.717

另一个答案可能是：

```
$($(data).find('.blah')[9]).html(); 
```

当您使用 [9] 时，它返回一个不知道 html() 函数是什么的 DOM 对象，但没有 [9] 它返回一个 html() 函数所属的 jQuery 对象。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-30T13:52:31.227

试试这个

```
$(".blah:eq(9)").html('blah'); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-30T13:53:16.800

```
$('.blah')[9].innerHTML="BLAH"; 
```

这应该可以解决您的问题

# java - Cometd filter data for specific client in channel

> ID：15719230
> 
> 赞同：1
> 
> 时间：2013-03-30T13:48:00.533
> 
> 标签：java, comet, cometd

I'm designing a system using comet where there is a common channel where data getting published. I need to filter the data using some conditions based on client subscription details. Can anyone tell how I can do this? I thought I can do this using DataFilter.

```
Channel.addDataFilter(DataFilter filter); 
```

Is this the correct way? If so any sample code to achieve this please?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T20:22:00.990

There is no `Channel.addDataFilter(DataFilter)` method, but you can achieve the same results in a different way.

First, have a look at the available `DataFilter` implementations [already available](https://github.com/cometd/cometd/tree/2.6.x/cometd-java/cometd-java-server/src/main/java/org/cometd/server/filter).

Then it's enough that you add a `DataFilterMessageListener` to the channel you want to filter data on, and specify one or more `DataFilter` to the `DataFilterMessageListener`.

You can find an example of this in the CometD demos shipped with the CometD distribution, for example [here](https://github.com/cometd/cometd/blob/2.6.x/cometd-java/cometd-java-examples/src/main/java/org/cometd/examples/ChatService.java).

The right way to add the `DataFilterMessageListener` is during channel initialization, as it is done in the example linked above through a `@Configure` annotation, or equivalently via `ServerChannel.Initializer`.

Finally, have a look at how messages are processed on the server from the documentation: [http://docs.cometd.org/reference/#concepts_message_processing](http://docs.cometd.org/reference/#concepts_message_processing). It is important to understand that modifications made by `DataFilter` are seen by all subscribers.

# ruby - Ruby 扫描正则表达式

> ID：15719234
> 
> 赞同：4
> 
> 时间：2013-03-30T13:48:25.677
> 
> 标签：ruby, regex

我正在尝试拆分字符串：

```
"[test| blah] \n [foo |bar bar bar]\n[test| abc |123 | 456 789]" 
```

进入以下数组：

```
[
  ["test","blah"]
  ["foo","bar bar bar"]
  ["test","abc","123","456 789"]
] 
```

我尝试了以下方法，但不太正确：

```
"[test| blah] \n [foo |bar bar bar]\n[test| abc |123 | 456 789]"
.scan(/\[(.*?)\s*\|\s*(.*?)\]/)
# =>
# [
#   ["test", "blah"]
#   ["foo", "bar bar bar"]
#   ["test", "abc |123 | 456 789"]
# ] 
```

我需要在每个管道而不是第一个管道上拆分。实现这一目标的正确正则表达式是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T14:02:18.300

```
 s = "[test| blah] \n [foo |bar bar bar]\n[test| abc |123 | 456 789]"
 arr = s.scan(/\[(.*?)\]/).map {|m| m[0].split(/ *\| */)} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-30T13:59:35.620

两种选择：

```
s = "[test| blah] \n [foo |bar bar bar]\n[test| abc |123 | 456 789]"

s.split(/\s*\n\s*/).map{ |p| p.scan(/[^|\[\]]+/).map(&:strip) }
#=> [["test", "blah"], ["foo", "bar bar bar"], ["test", "abc", "123", "456 789"]]

irb> s.split(/\s*\n\s*/).map do |line|
  line.sub(/^\s*\[\s*/,'').sub(/\s*\]\s*$/,'').split(/\s*\|\s*/)
end
#=> [["test", "blah"], ["foo", "bar bar bar"], ["test", "abc", "123", "456 789"]] 
```

它们都从换行符开始（丢弃周围的空白）。

然后第一个通过查找不是 , 或的任何内容来拆分每个块，`[`然后`|`丢弃`]`额外的空格（调用`strip`每个）。

然后第二个丢弃前导`[`和尾随`]`（带有空格），然后拆分`|`（带有空格）。

* * *

您无法使用单个`scan`. 关于你能得到的最接近的是：

```
s.scan /\[(?:([^|\]]+)\|)*([^|\]]+)\]/
#=> [["test", " blah"], ["foo ", "bar bar bar"], ["123 ", " 456 789"]] 
```

…丢弃信息，或者这个：

```
s.scan /\[((?:[^|\]]+\|)*[^|\]]+)\]/
#=> [["test| blah"], ["foo |bar bar bar"], ["test| abc |123 | 456 789"]] 
```

…将每个“数组”的内容捕获为单个捕获，或者这样：

```
s.scan /\[(?:([^|\]]+)\|)?(?:([^|\]]+)\|)?(?:([^|\]]+)\|)?([^|\]]+)\]/
#=> [["test", nil, nil, " blah"], ["foo ", nil, nil, "bar bar bar"], ["test", " abc ", "123 ", " 456 789"]] 
```

…硬编码为最多四个项目，并插入`nil`您需要删除的条目`.compact`。

没有办法使用 Ruby`scan`来获取类似的正则表达式`/(?:(aaa)b)+/`并在每次匹配重复时获取多个捕获。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-30T14:03:28.680

为什么是硬路径（单个正则表达式）？为什么不是简单的拆分组合？以下是可视化过程的步骤。

```
str = "[test| blah] \n [foo |bar bar bar]\n[test| abc |123 | 456 789]"

arr = str.split("\n").map(&:strip) # => ["[test| blah]", "[foo |bar bar bar]", "[test| abc |123 | 456 789]"]
arr = arr.map{|s| s[1..-2] } # => ["test| blah", "foo |bar bar bar", "test| abc |123 | 456 789"]
arr = arr.map{|s| s.split('|').map(&:strip)} # => [["test", "blah"], ["foo", "bar bar bar"], ["test", "abc", "123", "456 789"]] 
```

这可能比 效率低得多`scan`，但至少它很简单:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-30T15:29:52.683

## “扫描、拆分、剥离和删除”火车残骸

The whole premise seems flawed, since it assumes that you will always find alternation in your sub-arrays and that expressions won't contain character classes. Still, if that's the problem you really want to solve for, then this should do it.

First, `str.scan( /\[.*?\]/ )` will net you three array elements, each containing pseudo-arrays. Then you map the sub-arrays, splitting on the alternation character. Each element of the sub-array is then stripped of whitespace, and the square brackets deleted. For example:

```
str = "[test| blah] \n [foo |bar bar bar]\n[test| abc |123 | 456 789]"
str.scan( /\[.*?\]/ ).map { |arr| arr.split('|').map { |m| m.strip.delete '[]' }}

#=> [["test", "blah"], ["foo", "bar bar bar"], ["test", "abc", "123", "456 789"]] 
```

## Verbosely, Step-by-Step

Mapping nested arrays is not always intuitive, so I've unwound the train-wreck above into more procedural code for comparison. The results are identical, but the following *may* be easier to reason about.

```
string = "[test| blah] \n [foo |bar bar bar]\n[test| abc |123 | 456 789]"
array_of_strings = string.scan( /\[.*?\]/ )
#=> ["[test| blah]", "[foo |bar bar bar]", "[test| abc |123 | 456 789]"]

sub_arrays = array_of_strings.map { |sub_array| sub_array.split('|') }
#=> [["[test", " blah]"],
#    ["[foo ", "bar bar bar]"],
#    ["[test", " abc ", "123 ", " 456 789]"]]

stripped_sub_arrays = sub_arrays.map { |sub_array| sub_array.map(&:strip) }
#=> [["[test", "blah]"],
#    ["[foo", "bar bar bar]"],
#    ["[test", "abc", "123", "456 789]"]]

sub_arrays_without_brackets =
  stripped_sub_arrays.map { |sub_array| sub_array.map {|elem| elem.delete '[]'} }
#=> [["test", "blah"], ["foo", "bar bar bar"], ["test", "abc", "123", "456 789"]] 
```

# javascript - 如何使用 JavaScript 禁用多个选择标签中的多个选项？

> ID：15719238
> 
> 赞同：0
> 
> 时间：2013-03-30T13:48:52.187
> 
> 标签：javascript, dom, option

我有一个包含多个下拉列表的页面，我想在所有这些下拉列表中禁用多个选项。

我打算禁用的选项具有某些共同特征，即它们分别被标识为两个类。所有列表中的许多选项共享相同的类，我想添加几个按钮来启用或禁用基于这些类的选项。

我的问题是，我在这里看到的标准方法是针对选项

1.  通过选择元素
2.  按编号。

但是我的是动态生成的，我试图禁用的选项并不总是彼此相邻。

这是其中一个下拉菜单的片段：

```
<select name="m1">
    <option value="Abyss Guard, Cereberus" class="Covert Beast">Abyss Guard, Cereberus</option>
    <option value="Abyss Guard, Cereberus+" class="Covert Beast">Abyss Guard, Cereberus+</option>
    <option value="Achlis+" class="Covert Beast">Achlis+</option>
    <option value="Adept Devil+" class="Impulse Demon">Adept Devil+</option>
    <option value="Agares+" class="Covert Demon">Agares+</option>
    <option value="Airship of Death+" class="Psycho Creation">Airship of Death+</option>
    <option value="Ancient Huge Statue+" class="Psycho Creation">Ancient Huge Statue+</option>
    <option value="Anna Thorn Maiden" class="Impulse Demon">Anna Thorn Maiden</option>
    <option value="Anna Thorn Maiden+" class="Impulse Demon">Anna Thorn Maiden+</option>
    <option value="Anomalocaris+" class="Impulse Beast">Anomalocaris+</option>
    <option value="Apopisu of Chaos+" class="Psycho Beast">Apopisu of Chaos+</option>
    <option value="Arachno Chi" class="Psycho Crawler">Arachno Chi</option>
    <option value="Arachno Chi+" class="Psycho Crawler">Arachno Chi+</option>
    <option value="Arbitration Demon+" class="Psycho Demon">Arbitration Demon+</option>
    <option value="Armored Black Tiger+" class="Impulse Beast">Armored Black Tiger+</option>
    <option value="Armored Bucephalus+" class="Covert Beast">Armored Bucephalus+</option>
</select> 
```

这绝不是一个详尽的列表，每个下拉列表都有数百个选项，尽管所有下拉列表都包含相同的列表。如您所见，列表是按字母顺序排序的，而不是按类别排序的。

我希望使用基于两个类之一的按钮禁用和启用选项，并且禁用状态应该覆盖启用状态。该标准`document.getElementById('m1').options[number].disabled`在这里并没有真正帮助我，因为列表是动态生成的，我不知道特定选项将在哪里结束。

该网站的部分目标是最大限度地减少所需的重新加载量，同时最大限度地减少正在执行的 javascript 的数量，以加快响应速度。有没有办法可以选择任何特定类的所有下拉列表中的所有选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:39:43.057

Here's one way of doing it. If you have that many options and they don't change, consider caching the result of document.querySelectorAll so that you don't have to find all the options again each time you want to disable/enable them.

[http://jsfiddle.net/uj86d/](http://jsfiddle.net/uj86d/)

HTML

```
<select>
    <option value="test1" class="red">Test 1</option>
    <option value="test2">Test 2</option>
    <option value="test3" class="red">Test 3</option>
    <option value="test4">Test 4</option>
</select>

<select>
    <option value="test1">Test 1</option>
    <option value="test2" class="red">Test 2</option>
    <option value="test3">Test 3</option>
    <option value="test4" class="red">Test 4</option>
</select>

<button>Disable reds!</button> 
```

JS

```
//disable all options with a red class
document.querySelector('button').addEventListener('click', function () {
    var redOptions = document.querySelectorAll('option.red'),
        i = 0,
        len = redOptions.length;

    for (; i < len; i++) {
        redOptions[i].disabled = true;
    }
}); 
```

# wordpress - 在 Wordpress 中使用 Taxonomy Meta 插件获取分类图像时遇到问题

> ID：15719242
> 
> 赞同：2
> 
> 时间：2013-03-30T13:48:56.473
> 
> 标签：wordpress, taxonomy

我正在使用 Taxonomy Meta 插件并遵循所有说明，但感觉我所做的事情有问题。我只想提取分配给每个类别的图像是自定义分类并将其显示在页面模板上..

该插件的 github repo 可以在这里找到：[https ://github.com/rilwis/taxonomy-meta](https://github.com/rilwis/taxonomy-meta)

请帮忙，我得到了所有要显示的东西，除了图像，当我查看源代码时，图像路径不只是一个空的 img 标签。

我可以使用以下方法打印要打印的图像：

```
$meta = get_option('additional');
    if (empty($meta)) $meta = array();
    if (!is_array($meta)) $meta = (array) $meta;
    $meta = isset($meta['5']) ? $meta['5'] : array();
    $images = $meta['community-image'];

        echo '<ul>';
    foreach ($images as $categories) {
    // get image's source based on size, can be 'thumbnail', 'medium', 'large', 'full' or registed post thumbnails sizes
    $src = wp_get_attachment_image_src($categories, 'thumbnail');
    $src = $src[0];
    $args=array(
        'orderby' => 'name',
        'order' => 'ASC',
        'taxonomy' => 'properties_community'
    );

    $categories=get_categories($args);
    // show image
    foreach($categories as $category) {
            echo '<li><a href="' . home_url() . '/?property_communities='. $category->slug .'" title="' . sprintf( __( "View all posts in %s" ), $category->name ) . '" ' . '><img src="'.$src.'"/>' . $category->name.'</a> </li> ';
        }
    }
    echo '</ul>'; 
```

但我不知道如何使它与显示的类别匹配。我只是把数字 5 放在那里看看它是否有效，但如果我尝试使用 $category->term_id 它不起作用，我我从这里有点迷路了..

**更新：** 我现在可以提取分配给每个类别的图像并打印名称，但我收到此错误“警告：为 /home/../themes/../my-template 中的 foreach() 提供的参数无效。第 39 行的 php"

这是我的代码

```
$args = array( 'taxonomy' => 'properties_community' );

    $terms = get_terms('properties_community', $args);

    $count = count($terms); $i=0;
    if ($count > 0) {
    $cape_list = '<p class="my_term-archive">';

    foreach ($terms as $term) {
        $meta = get_option('additional');
    if (empty($meta)) $meta = array();
    if (!is_array($meta)) $meta = (array) $meta;
    $meta = isset($meta[$term->term_id]) ? $meta[$term->term_id] : array();
    $images = $meta['community-image'];
    foreach ($images as $att) {
    // get image's source based on size, can be 'thumbnail', 'medium', 'large', 'full' or registed post thumbnails sizes
    $src = wp_get_attachment_image_src($att, 'medium');
    $src = $src[0];
    // show image

    echo '<a href="/term-base/' . $term->slug . '" title="' . sprintf(__('View all post filed under %s', 'my_localization_domain'), $term->name) . '"><img src="'.$src.'" />' . $term->name . '</a>';

    }}
    } 
```

有人知道为什么我可能会收到此错误吗？我看不出 foreach 有什么问题：/

第 39 行将是这样的：`foreach ($images as $att) {`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:12:10.037

知道了

```
$args = array( 'taxonomy' => 'properties_community' );

$terms = get_terms('properties_community', $args);

$count = count($terms); $i=0;
if ($count > 0) {
$cape_list = '<p class="my_term-archive">';

foreach ($terms as $term) {
    $meta = get_option('additional');
if (empty($meta)) $meta = array();
if (!is_array($meta)) $meta = (array) $meta;
$meta = isset($meta[$term->term_id]) ? $meta[$term->term_id] : array();
$images = $meta['community-image'];

if (empty($images)) {
    echo '<a href="/term-base/' . $term->slug . '" title="' . sprintf(__('View all post filed under %s', 'my_localization_domain'), $term->name) . '"><p style="text-align:center;">' . $term->name . '</p></a>';
} else {
foreach ($images as $att) {
// get image's source based on size, can be 'thumbnail', 'medium', 'large', 'full' or registed post thumbnails sizes
$src = wp_get_attachment_image_src($att, 'medium');
$src = $src[0];
// show image

echo '<a href="/term-base/' . $term->slug . '" title="' . sprintf(__('View all post filed under %s', 'my_localization_domain'), $term->name) . '"><img src="'.$src.'" /><p style="text-align:center;">' . $term->name . '</p></a>';

}}
}
} 
```

# css - ipad 3如何设置屏幕分辨率

> ID：15719244
> 
> 赞同：0
> 
> 时间：2013-03-30T13:49:07.347
> 
> 标签：css

嘿，我对 ipad -3 的设计有点陌生。谁能指导我如何提前为 ipad-3.thanx 设置媒体查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:02:55.210

新 iPad 的宽度和高度与第一台和第二台 iPad 相同，因此您只需应用相同的媒体查询：

```
@media all and (device-width: 768px) and (device-height: 1024px) and (orientation:portrait) {
  .ipad-portrait { color: red; } /* your css rules for ipad portrait */
}

@media all and (device-width: 768px) and (device-height: 1024px) and (orientation:landscape) {
  .ipad-landscape { color: blue; } /* your css rules for ipad landscape */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T13:52:33.773

```
 @media screen and (device-aspect-ratio: 3/4) {

          // your styles here
     } 
```

# javascript - Is it possible to loop through a set of colors with jquery?

> ID：15719247
> 
> 赞同：0
> 
> 时间：2013-03-30T13:49:40.307
> 
> 标签：javascript, jquery

So far I have this:

```
var colors = [ 'BlueViolet', 'CadetBlue', 'Coral', 'Crimson', 'DarkGoldenRod', 'DarkOliveGreen'],
    a = document.getElementById('colorthis').getElementsByTagName('a');

for(var i = 0; i < li.length; i++) {
    var elem = a[i],
        color = colors[0];
    elem.style.color = color;
    colors.push(color);
    colors.shift();
} 
```

Apprently this would work, but is there a way for me to apply this to the pseudo class of:

```
a:active
a:visited 
```

Is this something jquery's .each could do?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T13:53:12.393

try the following

```
$.each(colors,function(key,val){
alert(key+ " "+val);
}); 
```

# c# - Windows Phone 8 从手机库中获取拍摄的照片

> ID：15719250
> 
> 赞同：1
> 
> 时间：2013-03-30T13:49:45.850
> 
> 标签：c#, wpf, xaml, windows-phone-8

我正在互联网上搜索如何从我的应用程序中执行此操作。似乎有很多指南，例如以下指南：

```
http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.xna.framework.media.medialibrary.aspx 
```

但是，他们使用 XNA 来访问 MediaLibrary。不幸的是，在 Windows Phone 8 中，这不可用（至少对我而言）。

有没有办法获取手机相机应用程序已经拍摄的照片并从应用程序保存到该文件夹​​中？

我很抱歉有一个模糊的问题。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T09:04:38.017

所以你必须`Pictures`从`Camera Roll`? 尝试这个

```
 Void GetCameraPhotos()
      {
        var imageList = new ObviousCollection<Images>();
        using (var library = new MediaLibrary())
        {
            //taking all albums
            PictureAlbumCollection allAlbums = library.RootPictureAlbum.Albums;
            //taking Camera Roll album separately from all album
            PictureAlbum cameraRoll = allAlbums.Where(album => album.Name == "Camera Roll").FirstOrDefault();
            // here you will get camera roll picture list
            var CameraRollPictures = cameraRoll.Pictures

        }
      } 
```

希望对你有帮助

# f# - Why doesn't this binary_search function return 5?

> ID：15719254
> 
> 赞同：1
> 
> 时间：2013-03-30T13:50:04.263
> 
> 标签：f#

This f# program does a binary search on an int array to find the first occurrence of a number. Once it finds the number it prints the position and then returns it. Then it prints the return value, but prints a different number. I expected the same number. Why is it different?

```
let int_array = [| 1; 3; 3; 4; 4; 5; 5; 6; 6; 6; 6; 6; 6; 6; 6; 6; 6; 6; 8; 9|]

let binary_search target (array:int[]) = 
    let rec bsearch found_pos start_i end_i  =
        let mid_i = start_i + (end_i-start_i) / 2
        if start_i = end_i then
            printfn "answer is %d" found_pos
            found_pos
        elif array.[ mid_i ] = target then
            bsearch mid_i start_i mid_i-1 
        elif array.[ mid_i ] < target then
            bsearch found_pos (mid_i+1) end_i
        else
            bsearch found_pos start_i (mid_i-1)
    bsearch -1 0 ((Array.length array)-1)

let ans = binary_search 5 int_array
printfn "but it returns %d" ans 
```

Here is the output:

```
answer is 5
but it returns 3 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T14:58:58.420

Your problem is missing parentheses. The code `bsearch mid_i start_i mid_i-1` is the same as `(bsearch mid_i start_i mid_i)-1`. If you change it to `bsearch mid_i start_i (mid_i-1)`, the first and final results will be the same.

# c++ - 旧 Borland C 程序

> ID：15719255
> 
> 赞同：0
> 
> 时间：2013-03-30T12:11:59.567
> 
> 标签：c++

我用 Borlond C (Dos) 做了很多程序。如何在现代计算机中以最小的努力编译\链接这些程序？我主要是指图形程序。提前感谢'大卫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T13:52:11.487

只需选择一个新的 C/C++ 编译器，例如[MinGW/GCC](http://www.mingw.org/)。并重新编译您的源代码。它可能有很多语法问题，但这是唯一的方法。

图形 - 很难，你应该忘记旧的图形方法并使用 Qt、GDI、wxWidgets 等新工具。但是，您可以使用[用于 MingW（GCC 端口）的 Borland BGI 图形仿真来](http://winbgim.codecutter.org/)像以前一样移植您的代码。

其他替代方案是：

*   [GRX 图形库](http://grx.gnu.de/)

*   [免费软件 BGI 驱动程序](http://www.von-bassewitz.de/uz/bgi.php)

# c++ - 红黑高斯赛德尔和 OpenMP

> ID：15719259
> 
> 赞同：4
> 
> 时间：2013-03-30T13:50:35.333
> 
> 标签：c++, math, openmp, hpc, iteration

与 MPICH 相比，我试图用 OpenMP 来证明一个观点，我编写了以下示例来演示在 OpenMP 中实现高性能是多么容易。

Gauss-Seidel 迭代被分成两个独立的运行，这样在每次扫描中，每个操作都可以按任何顺序执行，并且每个任务之间应该没有依赖关系。所以理论上每个处理器都不应该等待另一个进程执行任何类型的同步。

我遇到的问题是，与问题大小无关，我发现只有 2 个处理器的加速很弱，如果有 2 个以上的处理器，它甚至可能会更慢。许多其他线性并行例程我可以获得非常好的缩放，但这一个很棘手。

我担心我无法向编译器“解释”我在数组上执行的操作是线程安全的，因此它无法真正有效。

请参见下面的示例。

任何人都知道如何使用 OpenMP 使其更有效？

```
void redBlackSmooth(std::vector<double> const & b,
                    std::vector<double> & x,
                    double h)
{
    // Setup relevant constants.
    double const invh2 = 1.0/(h*h);
    double const h2 = (h*h);
    int const N = static_cast<int>(x.size());
    double sigma = 0;

    // Setup some boundary conditions.
    x[0] = 0.0;
    x[N-1] = 0.0;

    // Red sweep.
    #pragma omp parallel for shared(b, x) private(sigma)
    for (int i = 1; i < N-1; i+=2)
    {
        sigma = -invh2*(x[i-1] + x[i+1]);
        x[i] = (h2/2.0)*(b[i] - sigma);
    }

    // Black sweep.
    #pragma omp parallel for shared(b, x) private(sigma)
    for (int i = 2; i < N-1; i+=2)
    {
        sigma = -invh2*(x[i-1] + x[i+1]);
        x[i] = (h2/2.0)*(b[i] - sigma);
    }
} 
```

补充：我现在也尝试使用原始指针实现，它与使用 STL 容器具有相同的行为，因此可以排除它是来自 STL 的一些伪关键行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T21:31:27.977

首先，确保`x`向量与缓存边界对齐。我做了一些测试，如果我强制对齐内存，我的机器（核心二重奏）上的代码会得到 100% 的改进：

```
double * x;
const size_t CACHE_LINE_SIZE = 256;
posix_memalign( reinterpret_cast<void**>(&x), CACHE_LINE_SIZE, sizeof(double) * N); 
```

其次，您可以尝试为每个线程分配更多计算（通过这种方式，您可以保持缓存行分离），但我怀疑 openmp 已经在后台做了类似的事情，所以它可能对大 N 毫无价值。

`x`在我的情况下，当没有缓存对齐时，这个实现要快得多。

```
const int workGroupSize = CACHE_LINE_SIZE / sizeof(double);
assert(N % workGroupSize == 0); //Need to tweak the code a bit to let it work with any N
const int workgroups = N / workGroupSize;
int j, base , k, i;

#pragma omp parallel for shared(b, x) private(sigma, j, base, k, i)
for ( j = 0; j < workgroups; j++ ) {
    base = j * workGroupSize;
    for (int k = 0; k < workGroupSize; k+=2)
    {
        i = base + k + (redSweep ? 1 : 0);
        if ( i == 0 || i+1 == N) continue;
        sigma = -invh2* ( x[i-1] + x[i+1] );
        x[i] = ( h2/2.0 ) * ( b[i] - sigma );
    }
} 
```

总之，你肯定有缓存冲突的问题，但考虑到 openmp 的工作方式（遗憾的是我不熟悉它），它应该足以使用正确分配的缓冲区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:23:44.940

我认为主要问题在于您使用的数组结构的类型。让我们尝试将结果与向量和数组进行比较。（数组 = 使用 new 运算符的 c 数组）。

矢量和数组大小为 N = 10000000。我强制平滑函数重复以保持运行时间 > 0.1 秒。

```
Vector Time:    0.121007        Repeat: 1       MLUPS:  82.6399

Array Time:     0.164009        Repeat: 2       MLUPS:  121.945

MLUPS = ((N-2)*repeat/runtime)/1000000 (Million Lattice Points Update per second) 
```

MFLOPS 在网格计算方面具有误导性。基本等式中的一些变化可以导致考虑相同运行时的高性能。

修改后的代码：

```
double my_redBlackSmooth(double *b, double* x, double h, int N)
{
    // Setup relevant constants.
    double const invh2 = 1.0/(h*h);
    double const h2 = (h*h);
    double sigma = 0;

    // Setup some boundary conditions.
    x[0] = 0.0;
    x[N-1] = 0.0;

    double runtime(0.0), wcs, wce;
    int repeat = 1;
    timing(&wcs);
    for(; runtime < 0.1; repeat*=2)
    {
        for(int r = 0; r < repeat; ++r)
        {
            // Red sweep.
            #pragma omp parallel for shared(b, x) private(sigma)
            for (int i = 1; i < N-1; i+=2)
            {
                sigma = -invh2*(x[i-1] + x[i+1]);
                x[i] = (h2*0.5)*(b[i] - sigma);
            }
            // Black sweep.
            #pragma omp parallel for shared(b, x) private(sigma)
            for (int i = 2; i < N-1; i+=2)
            {
                sigma = -invh2*(x[i-1] + x[i+1]);
                x[i] = (h2*0.5)*(b[i] - sigma);
            }
            //  cout << "In Array:      " << r << endl;
        }
        if(x[0] != 0) dummy(x[0]);
        timing(&wce);
        runtime = (wce-wcs);
    }
    //  cout << "Before division:   " << repeat << endl;
    repeat /= 2;
    cout << "Array Time:\t" << runtime << "\t" << "Repeat:\t" << repeat
         << "\tMLUPS:\t" << ((N-2)*repeat/runtime)/1000000.0 << endl;

    return runtime;
} 
```

除了数组类型之外，我没有更改代码中的任何内容。为了更好的缓存访问和阻塞，您应该查看数据对齐 (_mm_malloc)。

# javascript - 跨域访问元素

> ID：15719261
> 
> 赞同：1
> 
> 时间：2013-03-30T13:50:47.040
> 
> 标签：javascript, html, dom, mozilla

我们可以使用 window.postMessage 访问跨源元素或值吗？

```
https://developer.mozilla.org/en-US/docs/DOM/window.postMessage 
```

我认为为此，您的网站必须是 XSS 漏洞。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T14:21:08.230

不，您所能做的就是发布消息，您无法访问元素或值。由开发人员决定收到的消息是有效的还是黑客尝试。

# sql - When to use recursive CTE in Oracle

> ID：15719263
> 
> 赞同：2
> 
> 时间：2013-03-30T13:51:09.200
> 
> 标签：sql, performance, oracle, hierarchy

In Oracle, I've tried to run the same hierarchial queries in different ways : with CONNECT BY and recursive CTE. According to an execution plan CONNECT BY is preferable.

Are there any cases, when recursive CTE work faster in Oracle (or are there any situations at all where they are better be used)?

Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T12:44:57.590

> "According to an execution plan CONNECT BY is preferable."

That isn't surprising. The CONNECT BY syntax has been part of the Oracle toolbox for decades, so Oracle has had lots of time to tweak the optimizer to handle it in a performant fashion. Recursive CTEs are newer.

Also I suspect it will be harder for the CBO to understand the cost of a recursive CTE, because they are programmatic rather than data driven.

On the other hand, lots of people (not just beginners) have problems grasping the Oracle hierarchical syntax, whereas recursion is a standard programming concept. So perhaps that's where they are useful.

Incidentally, I don't think hierarchical queries should be used in situations where performance is crucial. If you have a large amount of data you need to retrieve quickly and often in a hierarchical format you should probably consider a different approach, such as materializing the transitive closures. [Find out more.](https://stackoverflow.com/a/3396499/146325)

# android - 游标索引越界异常：索引 -1 请求大小为 0

> ID：15719264
> 
> 赞同：1
> 
> 时间：2013-03-30T13:51:18.390
> 
> 标签：android, sqlite, exception, cursor

我只是想在多个表中搜索数据。如果第一个表（tab1）中不存在 where 条件数据，那么它必须在第二个表（tab2）中搜索，但我得到的异常显示

> 游标索引越界异常：索引 -1 请求大小为 0

这是我的代码

```
SQLiteDatabase db=openOrCreateDatabase("train",SQLiteDatabase.CREATE_IF_NECESSARY, null);
Cursor c1;
String[] table={"tab1","tab2","tab3","tab4"};
int i=0;
do {
   c1 = db.rawQuery("select * from '"+table[i]+"' where name='Triplicane'", null);
i++;    

} while(c1 == null);

int id1=c1.getInt(0);
String nam1=c1.getString(1);
Toast.makeText(fare.this,"ID no:"+id1, Toast.LENGTH_LONG).show();       
Toast.makeText(fare.this,"name"+nam1, Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-30T14:01:59.847

所以从一开始。隐式地，每个**光标**都位于第一行之前，所以如果你想使用它，你需要调用

```
cursor.moveToFirst() 
```

如果不为空，则将光标移动到第一行，然后准备工作。如果 Cursor 为空，则仅返回**false**。所以我现在提到的这个方法是非常方便的指标，你的光标是否有效。

作为我的建议，我建议您更改您的代码，因为我认为它已损坏并且听起来像“意大利面条代码”

```
Cursor c = null;
String[] tables = {"tab1", "tab2", "tab3", "tab4"};
for (String table: tables) {
   String query = "select * from '" + table + "' where name = 'Triplicane'";
   c = db.rawQuery(query, null);
   if (c != null) {
      if (c.moveToFirst()) { // if Cursor is not empty
         int id = c.getInt(0);
         String name = c.getString(1);
         Toast.makeText(fare.this, "ID: " + id, Toast.LENGTH_LONG).show();       
         Toast.makeText(fare.this, "Name: " + name, Toast.LENGTH_LONG).show();
      }
      else {
         // Cursor is empty
      }
   }
   else {
      // Cursor is null
   }
} 
```

## 笔记：

现在我想告诉你一些建议：

*   参数化语句的使用是非常好的做法，因此将来如果您要使用语句，请在其中使用占位符。然后，您的语句变得更易于阅读、更安全（[`SQL Injection`](http://en.wikipedia.org/wiki/SQL_injection)）和更快。

*   创建静态最终字段来保存您的列名、表名等，并使用 [`getColumnIndex(<columnName>)`](http://developer.android.com/reference/android/database/Cursor.html#getColumnIndex%28java.lang.String%29)方法来避免正在寻找非常糟糕的“拼写错误”，这也是一个非常好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T14:53:44.247

您的光标标志为空行，在 Sqlite 光标上指向行号 -1 ，然后如果您使用`c.moveNext()`或者`c.moveToFirst()`您将能够“逐行”读取行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T14:56:39.237

`cursor.movetoFirst()`在从游标获取数据之前写入 。

# android - Android : Different layout for different screens

> ID：15719267
> 
> 赞同：-1
> 
> 时间：2013-03-30T13:51:35.377
> 
> 标签：android, android-layout

I need to develop an app for different devices. Where to create and save different layouts. Is there is any way to share the drawable-hdpi across all the layouts. I am more concerned if I need to save the same images in different set of drawable folders as this eat up lot of space.

Kindly advice.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T13:55:45.580

This tells you almost everything you need to know about these things: [http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

The key is that in addition to drawable-hdpi and friends, you can have hyphens for all your resources, like layout-hdpi. But for layout you're probably most interested in the screen sizes, e.g. layout-large.

To answer your question about sharing, something in drawable-hdpi will be available to all screens, but will be shrunk down for mdpi and blown up for xhdpi. The same thing in drawable will use the same number of raw pixels on any density screen, looking small on xhdpi and large on mdpi.

# passbook - 存折更新标签：if-modified-since (null)

> ID：15719274
> 
> 赞同：1
> 
> 时间：2013-03-30T13:52:22.527
> 
> 标签：passbook

我正在使用 Restlet2.0 (java) 来构建存折服务器。当我使用 PushToken 向 APNs 发送推送通知时，我从服务器日志中收到消息“if-modified-since (null)”：

> entity.getText() : {"logs":["[2013-03-31 00:18:29 +1100] 获取传球任务(传球类型pass.xxxxxx.freehug, 序列号ABC, if-modified-since (null ); 使用 Web 服务 url http://192.168.1.43:8080/passbook/restlet) 遇到错误：服务器响应格式错误（缺少响应数据）"]}

此响应 URL 与为 LoggingResource 类（第 4 行）定义的路由器匹配，但与为最新 pkpass 比较定义要捕获的 passUpdatedSince={tag} 参数的 SerialNumbersPassWithDeviceResource 类（第 2 行）不匹配：

```
router.attach("/v1/devices/{deviceLibraryIdentifier}/registrations/{passTypeIdentifier}/{serialNumber}", DeviceRegistrationResource.class); //1/4\. Registration - POST/DELETE
router.attach("/v1/devices/{deviceLibraryIdentifier}/registrations/{passTypeIdentifier}?passUpdatedSince={tag}", SerialNumbersPassWithDeviceResource.class);  //2\. SerialNumbers - GET
router.attach("/v1/passes/{passTypeIdentifier}/{serialNumber}", LatestVersionPassResource.class);  //3\. LatestVersion - GET
router.attach("/v1/log", LoggingResource.class);  //5\. Logging - POST 
```

那么我在哪里可以设置更新标签 (passUpdatedSince={tag}) 以及如何在第 2 行上方的路由器下获取它？获取更新标签的路由器设置是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T14:46:01.717

该`passUpdatedSince={tag}`值是根据您的 Web 服务对请求的最后一次成功响应设置的：

```
https://{webServiceURL}/v1/devices/{deviceLibraryIdentifier}/registrations/{passTypeIdentifier} 
```

`lastUpdated`您可以通过在对上述请求的 JSON 字典响应中提供一个键来设置它。该值可以是您喜欢的任何值，但最简单的方法是使用时间戳。

该`if-modified-since`值由`Last-Modified`与接收到的最后一个 .pkpass 捆绑包一起发送的 HTTP 标头设置，与`passTypeIdentifier`和匹配`serialNumber`。同样，您可以选择在此标头中发送什么值。

The specific error that you mention above is not due to either of these. It is caused by your web service not providing a `.pkpass` bundle in response to the request to:

```
https://{webServiceURL}/v1/passes/{passTypeIdentifier}/{serialNumber} 
```

You may want to try hooking your device up to Xcode, turning on PassKit logging (Settings -> Developer), then monitoring the device's console log as you send the push. This may give you more detail as to why the device sent the message to your web service log.

# php - 在 PHPUnit 中使用命名空间时出现“找不到类”

> ID：15719293
> 
> 赞同：23
> 
> 时间：2013-03-30T13:53:27.307
> 
> 标签：php, namespaces, phpunit

我是 PHPUnit 的新手，在设置它以访问我的 PHP 文件时遇到了一些麻烦。我用于我的应用程序的目录结构是这样的：

```
./phpunit.xml

./lib/Application/
  -> Dir1/File1.php (namespace = Application\Dir1)
  -> Dir1/File2.php
  -> Dir2/File1.php (namespace = Application\Dir2)

./tests/Application/Tests
  -> Test1.php (namespace = Application\Tests)
  -> Test2.php 
```

在我的 PhpUnit.xml 中，我有：

```
<?xml version="1.0" encoding="UTF-8"?>
<phpunit verbose="false">
  <testsuites>
      <testsuite name="Application">
          <directory>./tests/Application/Tests</directory>
      </testsuite>
  </testsuites>
  <logging>
       <log type="coverage-text" target="php://stdout" showUncoveredFiles="false"/>
       <log type="json" target="/tmp/phpunit-logfile.json"/>
  </logging>
  <filter>
        <whitelist>
            <directory suffix=".php">./lib</directory>
        </whitelist>
  </filter>
</phpunit> 
```

在我的一个测试文件中，我打开：

```
namespace Application\Tests;

use Application\Dir1\File1;

class MyTest extends File1 {} 
```

但它一直在说：

> 找不到类“Application\Dir1\File1”

我哪里错了？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-04-30T21:13:47.380

如果您使用 Composer 安装 PHPUnit，那么您可以使用 Composers 自动加载器。最简单的方法是添加：

```
"autoload":{
    "psr-0":{
        "your-app-directory":""
    }
} 
```

到 composer.json

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-30T14:15:53.353

即使您使用`use`，您仍然必须通过使用`include`、`require`、`include_once`或来包含文件，`require_once`或者通过使用[`spl_autoload_register`](http://php.net/manual/en/function.spl-autoload-register.php)来包含文件，如下所示：

```
spl_autoload_register(function ($class)
{
    include '\lib\\' . $class . 'php';
}); 
```

当你再尝试使用`Application\Dir1\File1`脚本时会自动运行`include '\lib\Application\Dir1\File1.php'`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-02-25T08:11:44.733

我遇到过同样的问题。我也在使用作曲家，唯一为我解决的问题是：

1.  在 autoload 部分的 composer.json 文件中添加一个带有根命名空间的类映射部分

    ```
    "autoload":  {
            "classmap": ["namespaceRoot/"]
    } 
    ```

2.  执行`composer dump-autoload`命令以重新创建您的自动加载文件（使用所有类映射！）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-30T15:06:27.773

我发现 Jonathan Wage 这个非常有用的[类自动加载器](https://gist.github.com/jwage/221634)允许 PHPUnit 测试从不同目录访问命名空间。在我的 bootstrap.php 中，我刚刚指定了位置和关联的模块命名空间：

```
require_once 'SplClassLoader.php';

$classLoader = new SplClassLoader('Application', dirname(__FILE__) . '/../lib');
$classLoader->register(); 
```

# javascript - Knockout JS 设置 optionsValue 破坏了我的代码

> ID：15719298
> 
> 赞同：0
> 
> 时间：2013-03-30T13:54:12.307
> 
> 标签：javascript, jquery, knockout.js

下面的代码被简化了，见fiddle：http: [//jsfiddle.net/QTUqD/7/](http://jsfiddle.net/QTUqD/7/)

基本上我在数据绑定下设置设备名称，但我还需要指定发送到数据库的选项值，但是当我设置它时，显示数据绑定是空白的。

```
<script id="extItems" type="text/html">
   <tr>
        <td data-bind="text: device() && device().name"></td>
    </tr>
</script>

<script id="editExts" type="text/html">
    <tr>
        <td>

        <select data-bind="options: $root.devicesForItem($data), optionsText: 'name', value: device, optionsValue: 'id'"></select>

        </td>
    </tr>
</script> 
```

* * *

```
 window.ExtListViewModel = new function () {
    var self = this;
    window.viewModel = self;

    self.list = ko.observableArray();

    self.pageSize = ko.observable(10);
    self.pageIndex = ko.observable(0);
    self.selectedItem = ko.observable();
    self.extQty = ko.observable();
    self.devices = ko.observableArray();
    self.addressList = ko.observableArray(['addressList']);
    self.availableDevices = ko.computed(function() {        
        var usedQuantities = {}; // for each device id, store the used quantity
        self.list().forEach(function(item) {
            var device = item.device();
            if (device) {
                usedQuantities[device.id] = 1 + (usedQuantities[device.id] || 0);
            }
        });

        return self.devices().filter(function(device) {
            var usedQuantity = usedQuantities[device.id] || 0;
            return device.qty > usedQuantity;
        });
    });

    // need this to add back item's selected device to its device-options,
    // and to maintain original order of devices
    self.devicesForItem = function(item) {        
        var availableDevices = self.availableDevices();
        return self.devices().filter(function(device) {
            return device === item.device() || availableDevices.indexOf(device) !== -1;
        });
    }

    self.edit = function (item) {
        if($('#extMngForm').valid()) {
            self.selectedItem(item);
        }
    };

    self.cancel = function () {
        self.selectedItem(null);
    };

    self.add = function () {
        if($('#extMngForm').valid()) {
            var newItem = new Extension();
            self.list.push(newItem);
            self.selectedItem(newItem);
            self.moveToPage(self.maxPageIndex());
        }
    };
    self.remove = function (item) {

            if (confirm('Are you sure you wish to delete this item?')) {

                    self.list.remove(item);
                    if (self.pageIndex() > self.maxPageIndex()) {
                        self.moveToPage(self.maxPageIndex());
                    }

            }
            $('.error').hide();
    };
    self.save = function () {
        if($('#extMngForm').valid()) {
            self.selectedItem(null);
        };
    };

    self.templateToUse = function (item) {
        return self.selectedItem() === item ? 'editExts' : 'extItems';
    };

    self.pagedList = ko.dependentObservable(function () {
        var size = self.pageSize();
        var start = self.pageIndex() * size;
        return self.list.slice(start, start + size);
    });
    self.maxPageIndex = ko.dependentObservable(function () {
        return Math.ceil(self.list().length / self.pageSize()) - 1;
    });
    self.previousPage = function () {
        if (self.pageIndex() > 0) {
            self.pageIndex(self.pageIndex() - 1);
        }
    };
    self.nextPage = function () {
        if (self.pageIndex() < self.maxPageIndex()) {
            self.pageIndex(self.pageIndex() + 1);
        }
    };
    self.allPages = ko.dependentObservable(function () {
        var pages = [];
        for (i = 0; i <= self.maxPageIndex() ; i++) {
            pages.push({ pageNumber: (i + 1) });
        }
        return pages;
    });
    self.moveToPage = function (index) {
        self.pageIndex(index);
    };

};

ko.applyBindings(ExtListViewModel, document.getElementById('extMngForm'));

function Extension(extension, name, email, vmpin, device, macAddress, shipTo){
    this.extension = ko.observable(extension);
    this.name = ko.observable(name);
    this.email = ko.observable(email);
    this.vmpin = ko.observable(vmpin);
    this.device = ko.observable(device);
    this.macAddress = ko.observable(macAddress);
    this.shipTo = ko.observable(shipTo);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T16:03:45.510

当您使用时`optionsValue`，KO 将属性值写入您绑定的任何内容`value`。因此，它现在将使用 id 而不是对象填充值。

有几种方法可以解决这种情况，您需要值（用于发送到数据库）和对象（用于绑定 UI 的其他部分）。

一个非常典型的解决方案是在你的对象上创建一个计算的 observable，它接受当前选择的对象并返回 id。

所以，在你的`Extension`你会做这样的事情：

```
this.device = ko.computed({
    read: function() {
        var device = this.device.asObject();
        return device && device.id;
    },
    deferEvaluation: true, //deferring evaluation, as device.asObject has not been created yet
}, this);

//create this as a sub-observable, so it just disappears when we turn this into JSON and we are just left with the id to send to the DB
this.device.asObject = ko.observable(device); 
```

然后删除并`optionsValue`绑定`value``device.asObject`

在这种情况下，我添加了`asObject`sub-observable，因此当您将其转换为 JSON ( `ko.toJSON`) 发送到服务器时，它就会消失。这种技术唯一棘手的部分是，如果您从服务器加载现有数据，那么您需要`asObject`从您的选项中填充适当的选择。

这是一个示例：http: [//jsfiddle.net/rniemeyer/Q3PEv/](http://jsfiddle.net/rniemeyer/Q3PEv/)

Another option that I have used is to continue to use `optionsValue`, but then to create a custom binding that tracks the object in a separate observable. Here is a custom binding that creates an `asObject` sub-observable for whatever is bound against `value`. This way you really don't need to mess with it at all in your view model.

```
//when using optionsValue, still track the select object in a different observable
ko.bindingHandlers.valueAsObject = {
    init: function(element, valueAccessor, allBindingsAccessor) {
        var value = allBindingsAccessor().value,
            prop = valueAccessor() || 'asObject';

        //add an "asObject" sub-observable to the observable bound against "value"
        if (ko.isObservable(value) && !value[prop]) {
              value[prop] = ko.observable();
        }
    },
    //whenever the value or options are updated, populated the "asObject" observable
    update: function(element, valueAccessor, allBindingsAccessor) {
        var prop = valueAccessor(),
            all = allBindingsAccessor(),
            options = ko.utils.unwrapObservable(all.options),
            value = all.value,
            key = ko.utils.unwrapObservable(value),
            keyProp = all.optionsValue,
            //loop through the options, find a match based on the current "value"
            match = ko.utils.arrayFirst(options, function(option) {
               return option[keyProp] === key;
            });

        //set the "asObject" observable to our match
        value[prop](match);
    }
}; 
```

Sample here: [http://jsfiddle.net/rniemeyer/E2kvM/](http://jsfiddle.net/rniemeyer/E2kvM/)

# variables - Play music (song album or artist) with variables in AppleScript

> ID：15719303
> 
> 赞同：2
> 
> 时间：2013-03-30T13:54:45.513
> 
> 标签：variables, applescript, itunes

I'm making trying to make an apple script that understands a text command "Play song We will Rock You" or "Play artist Queen" or "Play album A Night at the opera"

using songName artistName and albumName as variables, but i don't know how to set them, as they depend on the previuos word (song,artist,album) in an answer which is "Play song songName" (PLAY must be in the field).

I know how to make them play I just need to set those variables in order to use just one textfield.

Thanks for you help (hope I was clear)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T15:42:29.397

Try:

```
set xxx to text returned of (display dialog "Play song, Play artist, Play album " buttons {"Cancel", "OK"} default button "OK" default answer "Play song Here I Come")

set myChoices to {"Play song ", "Play artist ", "Play album "}

tell application "iTunes"
    repeat with i from 1 to count myChoices
        set aChoice to (item i of myChoices)
        if xxx starts with aChoice then
            set AppleScript's text item delimiters to aChoice
            set theRest to text items 2 thru -1 of xxx
            set AppleScript's text item delimiters to {""}
            set theRest to theRest as text

            if i = 1 then
                play (first track whose name = theRest)
            else if i = 2 then
                play (first track whose artist = theRest)
            else if i = 3 then
                play (first track whose album = theRest)
            end if
            exit repeat
        end if
    end repeat
end tell 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T14:20:42.320

You can use something like this to get input:

```
display dialog "Enter the album name:" default answer "CocoaRocks"
set the albumName to the text returned of the result 
```

Hope it helps.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-10T05:04:47.240

Heres something similar, plays a mp3 file

`set audioFile to (POSIX path of (choose file of type "mp3")) do shell script "afplay " & audioFile`

# sql-server - 将最后一个 id 从 sql 增加到 vb10

> ID：15719310
> 
> 赞同：1
> 
> 时间：2013-03-30T13:55:40.087
> 
> 标签：sql-server, vb.net, visual-studio-2010

我想增加一个不。从 sql 它应该是这样的 13-001 但它使 13-1 这是我的代码

```
Private Sub getLastID()

    Dim dr As SqlDataReader
    Dim Cmd As New SqlCommand
    con.Open()
    With Cmd
        .Connection = con
        .CommandText = "SELECT * FROM tbl_student ORDER BY Student_no DESC"
    End With
    dr = Cmd.ExecuteReader

    If dr.Read Then
        lblStudentNo.Text = Val(dr.Item(0)) + 1
    End If

    con.Close()
End Sub 
```

我应该怎么办？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:40:58.017

您可以使用[PadLeft](http://msdn.microsoft.com/en-us/library/system.string.padleft%28v=vs.71%29.aspx)方法。

尝试这个：

```
 lblStudentNo.Text = Val(dr.Item(0)) & "-" & "1".PadLeft(3, "0") 
```

# c# - EventLogSession.ExportLogAndMessages query

> ID：15719312
> 
> 赞同：4
> 
> 时间：2013-03-30T13:55:52.130
> 
> 标签：c#, event-log

I need to save windows event logs in some file, now i am using:

```
var els = new EventLogSession();
els.ExportLogAndMessages("Application", PathType.LogName, "*", Path.Combine("c:\\Application.evtx"), false, CultureInfo.CurrentCulture); 
```

this works fine but i want to get logs between `DateTime` range, i suspect that 3rd parameter in `ExportLogAndMessages` "query" may help me.

now how to write this "query", and if "query" doesn't help is there anyway to do that.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-13T13:22:11.087

Both pages aren't very helpful as the query syntax isn't clear.

You can right-click any log in the Event Viewer and choose "Filter Current Log...", when you create a filter you'll see the underlying xml in the next tab. You can use it as your query.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T15:56:09.477

These links can help you to form your query:

[How to: Query for Events](http://msdn.microsoft.com/en-us/library/bb671200.aspx)

[Event Queries and Event XML](http://msdn.microsoft.com/en-us/library/bb399427.aspx)

You should compose a query to get events in some date range only.

I think you can use: TimeCreated parameter in your query.

# python - How to input Int array in Line in Python

> ID：15719314
> 
> 赞同：0
> 
> 时间：2013-03-30T13:56:10.997
> 
> 标签：python

In Ruby I can use

```
 x = gets.split(" ").map{|x| x.to_i} 
```

how to write in Python

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T13:57:27.207

```
x = [int(part) for part in input().split()] 
```

In 2.x, use `raw_input()` instead of `input()` - this is because in Python 2.x, `input()` parses the user's input as Python code, which is dangerous and slow. `raw_input()` just gives you the string. In 3.x, they changed `input()` to work that way as it is what you generally want.

This is a simple [list comprehension](http://www.youtube.com/watch?v=pShL9DCSIUw) that takes the split components of the input (using `str.split()`, which splits on whitespace) and makes each component an integer.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-30T13:59:47.610

In python 3.x

```
list(map(int, input().split())) 
```

In python 2.x

```
map(int, raw_input().split()) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-30T13:59:51.853

```
>>> x = raw_input("Int array")
Int array>? 1 2 3
>>> map(int, x.split())
[1, 2, 3] 
```

# django - Apply a never_cache to a flatpage view

> ID：15719318
> 
> 赞同：0
> 
> 时间：2013-03-30T13:56:59.390
> 
> 标签：django, django-urls, django-cache

I want to create a home view that is the same as a home view but does not cache it.

```
urlpatterns += patterns('django.contrib.flatpages.views',
    url(r'^$', 'flatpage', {'url': '/'}, name='home'),
) 
```

Something like this

```
urlpatterns += patterns('django.contrib.flatpages.views',
    url(r'^$', 'flatpage', {'url': '/'}, name='home'),
    url(r'^new/$', never_cache('flatpage', {'url': '/'}), name='nocache_home'),
) 
```

Clearly this won't work but does anyone know the trick which would enable this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:08:40.497

```
from django.conf.urls.defaults import url
from django.views.decorators.cache import never_cache

def never_cache_patterns(prefix, *args):
    pattern_list = [], tterns,
    for t in args:
        if isinstance(t, (list, tuple)): 
            t = url(prefix=prefix, *t)
        elif isinstance(t, RegexURLPattern):
            t.add_prefix(prefix)

        t._callback = never_cache(t.callback)
        pattern_list.append(t)

    return pattern_list

urlpatterns = never_cache_patterns('',
    (r'foo/$', 'myview')
) 
```

# arrays - 真正随机抽牌，而不仅仅是随机组？视觉基础 2010

> ID：15719332
> 
> 赞同：2
> 
> 时间：2013-03-30T13:58:55.923
> 
> 标签：arrays, vb.net, random

今天早上，我意识到我在为我正在转换为计算机的桌面纸牌游戏中从结构组数组中挑选卡片的编码存在缺陷。当前代码设置为随机选择特定卡片的数组，但如果组中的卡片数量<1，则跳过该组。对于我的牌组来说，这并不是真正的随机，因为每张牌都有自己的数量。有些卡有 10 张卡，其他 6 张，大多数是 4 张卡。我如何将它编码到它查看所有这些数量的整体数字并从这些数字中选择一张随机卡的位置。

```
If GameSize >= 3 Then
    For StartHands = 10 To 14
        Number = (DeckGroup(Rnd.Next(0, DeckGroup.Count)).ID)
        'Cardslots Player3
        If CardTypeArray(StartHands) = "" Then
            If DeckGroup(Number).QuantityInteger > 0 Then
                DeckGroup(Number).QuantityInteger -= 1
                Player1HandGroup(Number).QuantityInteger3 += 1
                CardTypeArray(StartHands) = Player1HandGroup(Number).CardType
                Me.NumberArray(StartHands) = Number
            Else
                'Recall Procedure if Generated Random Number is not allowed 
                'due to QuantityInteger <= 0
                Call StartButton_Click(sender, e)
            End If
        End If
    Next StartHands
End If 
```

在打牌和抽新牌时，我使用这种编码方案，以防止堆栈溢出，但虚拟相同。

```
Dim temp As IEnumerable(Of LunchMoneyGame.LunchMoneyMainForm.Group) = From r In DeckGroup Where r.QuantityInteger > 0 Select r

If temp IsNot Nothing AndAlso temp.count > 0 Then
    Number = (temp(Rnd.Next(0, temp.Count)).ID)

    DeckGroup(Number).QuantityInteger -= 1
    'Select the Player depending value of T
    Select Case T
        Case 0
            Player1HandGroup(Number).QuantityInteger += 1
        Case 1
            Player1HandGroup(Number).QuantityInteger2 += 1
        Case 2
            Player1HandGroup(Number).QuantityInteger3 += 1
        Case 3
            Player1HandGroup(Number).QuantityInteger4 += 1
        Case 4
            Player1HandGroup(Number).QuantityInteger5 += 1
    End Select 
```

Edit: Improved question: How can I weight the probably of drawing a card based on how many of a particular card are left in the decks quantity integer for each card?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T17:21:27.730

The idea of my solution is to generate a random number over the total number of availables cards in all deck groups. Finally we find the deck group this number targets within a loop:

```
Dim totalNumerOfCards As Integer = DeckGroup.Sum(Function(d) d.QuantityInteger)
Dim Number As Integer = Rnd.Next(totalNumerOfCards)
Dim numCards As Integer = 0
Dim groupIndex As Integer = 0
Dim cardIndex As Integer = 0
Dim i As Integer = 0
While i < DeckGroup.Length AndAlso numCards <= Number
    groupIndex = i
    cardIndex = Number - numCards
    numCards += DeckGroup(i).QuantityInteger
    i += 1
End While
Console.WriteLine("Your card is in DeckGroup({0}), card index {1}",
                  groupIndex, cardIndex); 
```

# c# - Accessing label from child control

> ID：15719337
> 
> 赞同：0
> 
> 时间：2013-03-30T13:59:32.720
> 
> 标签：c#, asp.net, user-controls

I have a control `Orders.ascx` in this control I have a reference to another control `Grid.ascx` something like this:

In my `Orders.ascx` I have :

```
 <asp:Label id="warnings" runat="server" />
   <uc:Grids id="uxGrid" runat="server/> 
```

Now in the grid `( Grids.ascx )` I have a drop down control that has the quantities with a event handler method for on index change, when a different quantity is chosen in a row, it posts back and updates the price depending on the quantity. I need for each time it posts back to add a message to the label warnings in `Orders.ascx`, but my problem is that this label is in the parent control. I tried using FindControl and it DOES find it and I can set the text but it never updates the warnings label.

How can I update that label text from the drop down's on index change control?. It seems that it doesnt inject everytime i select the quantity.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T14:10:55.967

The simplest, cleanest way would be to use an event.

1.  Create an event argument class, derived from EventArgs, that includes a property for the data you want to pass:

    ```
     public class PriceChangeEventArgs: EventArgs
     {
         public decimal Price { get; set; }
     } 
    ```

2.  Set up an event in the UserControl:

    ```
     public event EventHandler<PriceChangeEventArgs> PriceChanged; 
    ```

3.  Raise the event when capturing the change in the drop down list index:

    ```
     protected void DropDownList1_SelectedIndexChanged(object source, EventArg e)
     {
         PriceChangeEventArgs args = new PriceChangeEventArgs();
         args.Price = Convert.ToDecimal(DropDownList1.SelectedValue);
         PriceChanged(this, args);
     } 
    ```

4.  Handle the event in the parent control page or control:

    ```
    UserControl1.PriceChanged += new EventHandler<MyEventArgs>(page_PriceChanged);

    protected void page_PriceChanged(object source, MyEventArgs e)
    {
        Label1.Text = e.Price.ToString("C");
    } 
    ```

This way, you haven't tied your user control in to your page: you can still use the user control other places, and the page doesn't need to know how the user control works, other than that it raises an event.

ETA: Added an important step I omitted: *actually raising the event!*

# ruby-on-rails - Render partial from ApplicationController

> ID：15719342
> 
> 赞同：1
> 
> 时间：2013-03-30T14:00:03.940
> 
> 标签：ruby-on-rails, ajax

I'm trying to implement an action which will be invoked when user submits a new comment via ajax. When the comment is saved single comment partial must return. But it seems that render doesn't work as expected from ApplicationController. It displays an error that the view is not found, but it is in place (100%). When I'm adding `:partial` parameter it works, but doesn't pass any variables (and I need them!). Here's the controller code:

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  def comment
    comment = Comment.new({
      story_id: params[:story_id],
      content: params[:content]
    })
    if comment.save
      render 'shared/comments/comment', comment: comment
    else
      render nothing: true, status: 400
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T14:05:29.050

Try using this syntax:

```
render :partial => 'shared/comments/comment', :locals => { :comment => comment } 
```

# php - 根据屏幕分辨率更改 PHP 内容？

> ID：15719347
> 
> 赞同：0
> 
> 时间：2013-03-30T14:00:43.870
> 
> 标签：php, wordpress, hide, screen-resolution

我正在尝试制作一个简单的网站。我想这样做，如果您的分辨率小于 481，它将显示 X，而如果您的分辨率更大，它将显示 Y。我尝试了以下方法：（风格）

```
 @media screen and (min-width:482px)
            {
            p.troll { display: block; }
            p.troll2 { display: none; }
            }

            media screen and (max-width:482px)
            {
            p.troll { display: none; }
            p.troll2 { display: block; }
            } 
```

以及 php 页面本身中的以下内容：

```
 <p class="troll" >

                <?php bones_main_nav(); // Adjust using Menus in Wordpress Admin ?>

                <?php
                if (current_user_can('level_10')) : ?>

                <div class="adminstuff">
                <a href="/dynmap"></a>
                </div>
                <br />
                <br />
                <?php endif; ?>
                <?php dynamic_sidebar( 'sidebar1' ); ?>
            </p>

            <p class="troll2">
            i'm on my mobile
            </p> 
```

但是它在具有小分辨率的设备中显示了“troll”和“troll2”中的内容，我该如何解决？谢谢！

# javascript - jQuery上的输入键提交表单

> ID：15719351
> 
> 赞同：1
> 
> 时间：2013-03-30T14:01:37.907
> 
> 标签：javascript, jquery

我构建了一个简单的表单，只要您按 ENTER 就提交。它工作正常，但是每当我尝试在其中运行`.post`时，当我按 Enter 而不是提交时，textarea 中的文本就会中断。

**我所说的打破是什么意思**

* * *

textarea 中的文本是
| 打破

* * *

**这工作正常**

```
// Submit comment on ENTER key pressed
    $("textarea[name=comment_body]").keypress(function(event) {
        if (event.which == 13) {

            alert(comment_body);
        }
    }); 
```

**这不**

```
// Submit comment on ENTER key pressed
    $("textarea[name=comment_body]").keypress(function(event) {
        if (event.which == 13) {        
            var comment_body = $(this).val();    
            $.post("comments.php", {
                comment_body: comment_body
            }
            alert(comment_body);
        }
    }); 
```

如何在其中使用 jQuery .post 而不会失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T14:05:42.577

你应该这样做：

```
$("textarea[name=comment_body]").keypress(function(event) {
    if (event.which == 13) {        
        var comment_body = $(this).val();    
        $.post("comments.php", {cb: comment_body}, function(data){
            alert(data.cb);
        }, "json");
}); 
```

在我看来，您正在 通过jQuery 方法将数据发布`{comment_body:remove_comment}`到其中，但您没有使用其中的回调函数。`comments.php``$.post()`

您发布的任何内容都可以在回调函数中传递`comment.php`的参数中使用。`data`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T14:09:19.140

> post 的语法是：$.post(URL,data,callback);

```
$.post("comments.php",
   { 
     comment_body: remove_comment
   }, 
   function(result){
        alert(result.comment_body);
}); 
```

# html - IE textarea 换行错误？

> ID：15719352
> 
> 赞同：2
> 
> 时间：2013-03-30T14:01:51.890
> 
> 标签：html, internet-explorer, textarea, word-wrap

似乎从 IE7 到 IE10 的 IE 在使用 \n 时错误地将文本包装在 textarea 控件中（或 \r\n - 没关系 - 结果是相同的）。这是 IE 中的一个错误，还是他们对待 html 标准的方式与其他浏览器不同——谁是对的？我已经定义：

```
<textarea id="TextArea1" runat="server" style="width: 190px; height: 390px; white-space: normal; word-wrap: normal; overflow: scroll" ></textarea> 
```

当我尝试使用 JavaScript 代码 (obj.value += text;) 添加像“VeryLongStringEndingWithNewLine\n”这样的长字符串时，文本显示在一行中并带有滚动条（这没关系），但添加了一个额外的空行（\r \n) - 为什么？当我尝试多次添加像“Short\n”这样的短字符串时，再次通过JavaScript代码，文本在同一行（应该在单独的行上，因为应该应用正常的换行）。此外，当我进行回发时，所有 \r\n 都被替换为空格（为什么？），然后正确解析文本（假设我使用空格而不是 crlf 正常换行，只有在不适合该区域时才换行）。

使用 FF 或 Chrome 时，相同的控件行为正确 - 显示长行而没有额外的空下一行，短行在不同的行上，回发时不会用空格替换。

我知道我可能可以使用其他选项或空白字符，但我觉得上面关于 IE 的说法不正确。任何意见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:07:15.313

在正常情况下，textareas 按字面意思处理空白并根据需要进行换行。

但是因为你用 CSS 覆盖它，结果可能不稳定。

在这种情况下，空格 ( `\n`) 将折叠为一个空格，因为这就是这样`white-space:normal`做的。

我不完全确定您要在这里实现什么，因为我相当确定 textareas 的默认行为非常好。如果您不想要这种行为，则不应使用 textarea。

# c++ - 模板和静态对象（未定义的引用和需要）

> ID：15719353
> 
> 赞同：0
> 
> 时间：2013-03-30T14:01:53.817
> 
> 标签：c++, oop, templates, c++11

我正在使用模板和静态成员实现一些想法。尽管“真实”代码会产生另一个错误，但这是我在玩具示例[代码中仍然存在的错误](http://liveworkspace.org/code/48Ihhx%24123)

```
#include <string>
#include <iostream>

template<int dim>
class Class1 {
  public:
     Class1() {};
    ~Class1() {};
     void foo() {
        std::cout<<"foo-1"<<std::endl;
     }
   protected:
     std::string name;
};

template<int dim>
class Class2 : public Class1<dim>
{
  public:
     Class2(const int & a, const int &b) : 
        number( Class2<dim>::id_generator++ ) 
     {
        Class1<dim>::name = "My-name"; 
        foo(); // (1)
      };

 void foo() {
    Class1<dim>::foo();
    std::cout<<"foo-2"<<std::endl;
 }

 private:
    const unsigned int number;
    static unsigned int id_generator;
};

 int main() 
 {
    int a = 1, b=2;
    Class2<2> class2(a,b);   // (2)
 } 
```

与链接器错误：

```
 undefined reference to `Class2<2>::id_generator' 
```

现实生活中的例子产生2个错误

```
 (1) required from 'Class2<dim>::Class2(int, int) [with int dim = 3]'
 (2) required from here. 
```

现实生活中的错误完全没有告诉我！:(我希望如果玩具问题得到解决，现实生活中的问题也会消失，但如果有人对结构上下文中的“现实生活”错误（这两行）有任何想法，请，让我知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:03:19.370

您忘记为您的`static`数据成员添加定义`id_generator`。在全局命名空间级别添加：

```
template<int dim>
unsigned int Class2<dim>::id_generator = 0; 
```

With this addition, you can see your code [correctly compiling and linking here](http://liveworkspace.org/code/48Ihhx%24124).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T14:05:32.600

Well, as the error message says, there is no definition of the static data member. If this was an ordinary class, you'd put the definition in a source file:

```
// header:
class C {
    static int i;
};

// source:
int C::i = 3; 
```

A template is a pattern; the compiler uses it to generate code. So what you want to end up with when the compiler instantiates the template is something like the preceding code. But template code goes in headers, not source files, so you write it like this:

```
// header:
template <class T>
class C {
    static int i;
};

template <class T>
int C<T>::i = 3; 
```

# .net - 返回多值形式

> ID：15719357
> 
> 赞同：0
> 
> 时间：2013-03-30T14:02:17.987
> 
> 标签：.net, vb.net, return-value

```
Public Property [Name]() As Integer
        Get
            Return ds_DriverList.Tables("ds").Rows(ListViewDriver.SelectedItems.Item(0).Index)("DriverName")
        End Get
        Set(ByVal Value As Integer)

        End Set
    End Property

    Public Property [ID]() As Integer
        Get
            Return ds_DriverList.Tables("ds").Rows(ListViewDriver.SelectedItems.Item(0).Index)("DriverID")
        End Get
        Set(ByVal Value As Integer)

        End Set
    End Property 
```

我想同时从窗口窗体中返回名称和 ID。怎么做？
p/s：如果只返回 ID，那是有效的，但我想返回多值

## 更新

```
Public Structure NameID
        Public Name As String
        Public ID As Integer
    End Structure

    Public Property ID() As NameID
        Get
            Return New NameID With {.Name = ds_DriverList.Tables("ds").Rows(ListViewDriver.SelectedItems.Item(0).Index)("DriverName"), .ID = ds_DriverList.Tables("ds").Rows(ListViewDriver.SelectedItems.Item(0).Index)("DriverID")}
        End Get
        Set(ByVal Value As NameID)

        End Set
    End Property 
```

![在此处输入图像描述](../Images/c6e2b22c9df3f20807ef49f59b5254cd.png)
这是返回值。错误的...

`MsgBox(f.ID.ToString())`
这就是我获得返回值的方式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T14:23:57.830

这是你想要的吗？

```
Public Structure NameID
    Public Name As String
    Public ID As Integer
End Structure

Public Property NameID() As NameID
    Get
        Return New NameID with {.Name = ds_DriverList.Tables("ds").Rows(ListViewDriver.SelectedItems.Item(0).Index)("DriverName"), .ID = ds_DriverList.Tables("ds").Rows(ListViewDriver.SelectedItems.Item(0).Index)("DriverID") }
    End Get
    Set(ByVal Value As NameID)

    End Set
End Property 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T10:24:08.503

```
Public ReadOnly Property [DriverName]() As String
    Get
        Return ds_DriverList.Tables("ds").Rows(ListViewDriver.SelectedItems.Item(0).Index)("DriverName")
    End Get
End Property
Public ReadOnly Property [DriverID]() As String
    Get
        Return ds_DriverList.Tables("ds").Rows(ListViewDriver.SelectedItems.Item(0).Index)("DriverID")
    End Get
End Property 
```

如何调用获取表单返回

```
 Dim f As New DriverListForm
        If f.ShowDialog() = DialogResult.OK Then
            MsgBox(f.DriverID.ToString + " " + f.DriverName.ToString)
        Else
            MsgBox("Cancelled")
        End If
        f.Dispose() 
```

# c - 使用 fscanf() 使用 feof()

> ID：15719360
> 
> 赞同：3
> 
> 时间：2013-03-30T14:02:20.600
> 
> 标签：c, scanf, feof

这是我的代码。

```
#include<stdio.h>
void main(){
    FILE *fp;
    int a,b;
    fp=fopen("hello.txt","r");
    while(!feof(fp)){
      fscanf(fp,"%d %d",&a,&b);
      printf("%d %d\n",a,b);
    }
} 
```

我的 hello.txt 是

```
1   2
3   4 
```

我的输出是

```
1   2
3   4
4   4 
```

为什么我的最后一行被打印两次。fp还没到EOF吗？

另外，stackoverflow中的标签说`Usually, when it is used, the code using it is wrong.` 这是什么意思？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T14:07:54.017

切勿在未立即检查结果的情况下执行输入操作！

以下应该有效：

```
while (fscanf(fp,"%d %d",&a,&b) == 2)
{
    printf("%d %d\n",a,b);
} 
```

这将在第一次转换失败或文件结束时停止。或者，您可以区分转换失败（跳过错误行）和文件结尾；请参阅 的文档`fscanf`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T14:10:46.707

> 另外，stackoverflow中的标签说`Usually, when it is used, the code using it is wrong.`这是什么意思？

这意味着`feof()`函数（以及一般与 EOF 有关的其他功能）的使用方式经常被误解和错误。你的代码也是如此。

首先，`fscanf()`并不总是像您认为的那样做，从文件中获取行最好使用`fgets()`. **但是，**如果您真的倾向于使用`fscanf()`，请检查它是否可以读取某些内容，否则如果无法读取，您将多打印一次变量。所以你应该做的是：

```
fp = fopen("hello.txt", "r");

while(fscanf(fp, "%d %d", &a, &b) == 2) {
    printf("%d %d\n", a, b);
}

fclose(fp); 
```

另外，请务必**使用**空格，您的代码很难阅读。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-30T14:24:05.253

The reason you're getting an extra line is that EOF isn't set until *after* `fscanf` tries to read a third time, so it fails, and you print the results anyway. This would do the sort of thing you've intended:

```
while(1){
  fscanf(fp,"%d %d",&a,&b);
  if (feof(fp))
     break;
  printf("%d %d\n",a,b);
} 
```

(Note that this example does not check for errors, only for EOF)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T14:09:22.017

您可以执行以下操作：

```
#include <stdio.h>

void main(){
    FILE *fp;
    int a,b;
    fp=fopen("file.txt","r");
    while(fscanf(fp,"%d %d",&a,&b)==2)
    {
      printf("%d %d\n",a,b);
    }
} 
```

# android - 当我按下下一个或上一个按钮时，软键盘不会出现在屏幕上

> ID：15719361
> 
> 赞同：0
> 
> 时间：2013-03-30T14:02:36.367
> 
> 标签：android, cordova

我正在使用 PhoneGap 开发一个 Android 应用程序。我遇到了键盘上的“上一个”和“下一个”按钮的问题。当我单击“prev”按钮时，光标移动到上一个文本输入字段，单击“next”按钮使光标移动到视图中的下一个文本字段。但我的问题是键盘没有出现在屏幕上。此问题仅在我按下“下一个”和“上一个”按钮时存在。直接点击文本框就可以了。

我正在使用“Phonegap 2.4”

下面是我的 AndroidManifest.xml

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.apptivoapp.ApptivoApps"
        android:label="@string/app_name" 
        android:configChanges="locale|navigation|orientation|screenSize|keyboardHidden"
        android:allowTaskReparenting="true"
        android:alwaysRetainTaskState="true" 
        android:clearTaskOnLaunch="true"
        android:windowSoftInputMode="stateAlwaysHidden|adjustResize"
        >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

html代码

```
<article class="signup_wrapper">
<ul class="regbox " data-role="none">
  <li>
    <input id="ftName" name="FtName" type="text" placeholder="First name" data-role="none"/>
  </li>
  <li>
    <input id="ltName" name="LtName" type="text" placeholder="Last name" data-role="none"/>
  </li>

</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T14:40:25.910

问题出在您的清单文件中。您正在指示键盘在窗口本身获得焦点时隐藏，这可能发生在从一个字段转换到另一个字段的过程中。您需要更改以下行：

```
android:windowSoftInputMode="stateAlwaysHidden|adjustResize" 
```

...对此：

```
android:windowSoftInputMode="adjustResize" 
```

# javascript - 是否可以从 Chrome 包应用程序中打印？

> ID：15719362
> 
> 赞同：0
> 
> 时间：2013-03-30T14:02:43.773
> 
> 标签：javascript, google-chrome

是否可以从 Chrome 包应用程序中打印？

我正在寻找一种用户可以打印的解决方案，它会自动打印到他们的默认打印机，并带有打印对话框的提示。

我对此主题进行了大量研究，但无法找到明确的答案，或者答案有点旧。如果可能的话，可以提供一个关于如何完成它的小片段。

提前致谢。

注意：window.open() 解决方案在这种情况下不会真正起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-25T09:35:07.420

只需调用`window.print();`，它将显示打印对话框。

# asp.net-mvc - 在 Umbraco 中创建基于插件的控制器

> ID：15719365
> 
> 赞同：2
> 
> 时间：2013-03-30T14:03:06.130
> 
> 标签：asp.net-mvc, umbraco

如何在 Umbraco 中创建基于插件的控制器？我遵循了[https://github.com/Shandem/Umbraco4Docs/blob/4.8.0/Documentation/Reference/Mvc/surface-controllers.md](https://github.com/Shandem/Umbraco4Docs/blob/4.8.0/Documentation/Reference/Mvc/surface-controllers.md)上的指南。

但是当浏览到 ~/umbraco/areaname/controllername 时，我得到一个 404。没有得到这个的唯一方法是删除插件属性。但我想使用插件架构。那么除了指南中提到的说明之外，还需要做什么。

如果你想开始使用 Umbraco 和 MVC，文档真的很糟糕。

顺便说一句，我正在使用 Umbraco 6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T20:46:12.823

您所在的区域需要位于 App_Plugins 文件夹下。

抱歉误解了这个问题，但您似乎在下面链接的帖子中解释了它。

[http://our.umbraco.org/forum/developers/extending-umbraco/39704-Create-a-plugin-based-controller-in-Umbraco](http://our.umbraco.org/forum/developers/extending-umbraco/39704-Create-a-plugin-based-controller-in-Umbraco)

# jpa - JAX-RS 返回您的自定义对象的集合？

> ID：15719370
> 
> 赞同：1
> 
> 时间：2013-03-30T14:03:36.700
> 
> 标签：jpa, jax-rs

我有一个使用 JAX-RS、JPA 和 JAXB 的网络服务。我编写了一个应该从我的数据库中返回对象集合的方法。虽然这不会发生。它只返回一个项目。

我的方法：

```
@GET
    @Produces(MediaType.APPLICATION_XML)
    @Path("findMeasurementsByRunID/{runID}")
    public List<Measurement> getMeasurementByRunId(@PathParam("runID") int runID) {
        List<Measurement> results = null;
        Query query = emf.createEntityManager().createNamedQuery(
                "findMeasurementsByRunID");
        query.setParameter("runid", runID);
        results = query.getResultList();
        return results;
    } 
```

我的实体类：

```
 @Entity
    @NamedQueries({
            @NamedQuery(name = "findMeasurementsByRunID", query = "SELECT m "
                    + "FROM Measurement m "
                    + "WHERE m.runID = :runid"),
            @NamedQuery(name = "findMeasurementsByRunIDPosition", query = "SELECT m "
                    + "FROM Measurement m "
                    + "WHERE m.runID = :runid AND "
                    + "m.position = :position") })
    @XmlRootElement
    @XmlType(propOrder = { "runID", "rack", "position", "completionStatus",
            "countingTime", "cr51Counts", "cr51CPM", "cr51Error",
            "measurementDateTime", "protocolID", "protocolName" })
    public class Measurement implements Serializable {
        private static final long serialVersionUID = 1L;

        @Id
        @AttributeOverrides({
                @AttributeOverride(name = "runID", column = @Column(name = "RunID")),
                @AttributeOverride(name = "position", column = @Column(name = "Position")) })
        @Column(name = "RunID")
        private int runID;

        @Column(name = "Rack")
        private int rack;

        @Column(name = "Position")
        private int position;

        @Column(name = "Completionstatus")
        private int completionStatus;

        @Column(name = "CountingTime")
        private double countingTime;

        @Column(name = "Cr51Counts")
        private double cr51Counts;

        @Column(name = "Cr51CPM")
        private double cr51CPM;

        @Column(name = "Cr51Error")
        private double cr51Error;

        @Column(name = "MeasurementDateTime")
        @Temporal(TemporalType.TIMESTAMP)
        private Date measurementDateTime;

        @Column(name = "ProtocolID")
        private int protocolID;

        @Column(name = "ProtocolName")
        private String protocolName;

        public Measurement() {
        }

            // Getters and Setters...
} 
```

如果我调用该服务，它只会将查询中的第一项作为 xml 返回，而不是整个集合。

输出：

```
<measurements>
  <measurement>
    <runID>418</runID>
    <rack>57</rack>
    <position>1</position>
    <completionStatus>0</completionStatus>
    <countingTime>3599.97</countingTime>
    <cr51Counts>2225.53</cr51Counts>
    <cr51CPM>5.11</cr51CPM>
    <cr51Error>44.26</cr51Error>
    <measurementDateTime>2012-12-14T14:08:37.0</measurementDateTime>
    <protocolID>3</protocolID>
    <protocolName>Cr-51 GFR (almindelig blodproever)</protocolName>
  </measurement>
</measurements> 
```

我怎样才能让服务返回整个测量集合而不仅仅是一个项目？

我的数据： ![在此处输入图像描述](../Images/66106392988ee0aaaad63edba43482d4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T14:07:41.260

因此，您执行了一些查询“findMeasurementsByRunID”，将其限制为特定的“runId”，但您不明白为什么只获得 1 个测量对象？更新您的查询以删除/更改过滤器，以便它允许多个

# reporting-services - Hide row based on a value from another dataset

> ID：15719376
> 
> 赞同：0
> 
> 时间：2013-03-30T14:03:43.227
> 
> 标签：reporting-services, ssrs-tablix

I have a tablix that has one dataset, and I need to hide one row based on a value in another dataset.

Currently I have this expression under visibility:

```
=Iif(Fields!Data1.Value="0" or Fields!Data2.Value="1", TRUE, FALSE) 
```

Both of these are in another dataset called `vDataset3`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T03:41:57.467

Use this code

```
=IIF(First(Fields!UserID.Value, "DataSet2") = 0 or
 First(Fields!UserID.Value, "DataSet2") = 12, True, False) 
```

In order to call a field in another dataset you need to write:

```
First(Fields!UserID.Value, "DataSet2") 
```

The first means that you take the first row. you have to do that because a dataset is like an array you must declare the field you would like to get.

and the `"DataSet2"` is the name of the dataset

# r - 由于不需要的因素而更改代码

> ID：15719379
> 
> 赞同：2
> 
> 时间：2013-03-30T14:04:06.680
> 
> 标签：r

所以基本上我上面的代码只取每5个数字并计算每5个数字的值的标准偏差......所以如果我有这样的样本数据

```
Number  STD
1   11.15
2   11.18
3   11.21
4   11.24
5   11.3
10  11.36
11  11.42
12  11.48
13  11.54
14  11.6
15  11.66
16  11.72
17  11.78
18  11.84
19  11.9
20  11.96 
```

当我运行我的代码时，我会得到这个输出

```
 Number        STD
1      1 0.05770615
2      2         NA
3      3 0.09486833
4      4 0.09486833 
```

所以我想做的就是简单地`NA`用`0`. 也不是得到像 1,2,3,4 等因素......我想得到 5,10,15,20,25 等......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:21:51.463

我没有尝试重写您尝试做的事情，但只是为了保持连续性，您可以

1.  您可以使用参数`labels`of`cut`来设置标签结果类别。
2.  使用将 NA 更改为 0`spread[is.na(spread)] <- 0`

所有代码是：

```
hunter <- lapply(hunt, function(i) {  
  random <- cut(value[,i],seq(0,max(value[i]),5),
                labels=seq(5,max(value[i]),5))
  spread<-tapply(value[,i+1],random, sd,na.rm=TRUE)
  spread[is.na(spread)] <- 0
  Number<-levels(as.factor(random))
  d <- data.frame(Number=Number,STD=spread)
  })

  Number        STD
5       5 0.05770615
10     10 0.00000000
15     15 0.09486833
20     20 0.09486833 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T14:25:51.250

另一种方法：

```
# Generate data
number <- c(1:5, 10:20)
val <- c(11.15, 11.18, 11.21, 11.24, 11.30, 11.36, 11.42,
  11.48, 11.54, 11.60, 11.66, 11.72, 11.78, 11.84, 11.90, 11.96)

data <- data.frame(number, val)

# Calculate SD
breaks <- seq(0, 20, 5)
splitted.data <- split(data$val, f=cut(data$number, breaks, labels=F))
err <- sapply(splitted.data, sd)
err[is.na(err)] <- 0
res <- cbind(Number = breaks[-1], STD = err) 
```

导致：

```
> res
  Number        STD
1      5 0.05770615
2     10 0.00000000
3     15 0.09486833
4     20 0.09486833 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T15:27:05.057

使用 data.table 包，您可以一次调用完成此操作：

```
 library(data.table)
 DT <- data.table(value) 
```

作为一个单一的电话：

```
DT[, list(SD = ifelse(is.na(sd(STD)), 0, sd(STD))) 
   , by=list("Group" = factor(G <- (Number-1) %/% 5, labels=(unique(G) + 1)*5))]

   Group         SD
1:     5 0.05770615
2:    10 0.00000000
3:    15 0.09486833
4:    20 0.09486833 
```

分解它：

```
# you can create your groupings by 
(Number-1) %/% 5  # (ie, the remainder when divided by 5)

# you can create your factor levels by 
5 * ((Number-1) %/% 5 + 1)

# calculate the Group:
DT[, grp := factor(G <- (Number-1) %/% 5, labels=(unique(G) + 1)*5)]

# calculate the SD by Group, replacing NA's with 0:
DT[, SD := ifelse(is.na(sd(STD)), 0, sd(STD)), by=grp]
unique(DT[, list(grp, SD)]) 
```

# grails - 更改密码表单，使用 Spring Security 验证旧密码

> ID：15719381
> 
> 赞同：3
> 
> 时间：2013-03-30T14:04:29.573
> 
> 标签：grails, spring-security

我使用 grails 进行 Web 开发，使用 Spring Security 进行身份验证和授权。

我想制作一个简单的表单来允许用户更改密码。这是一个包含三个密码字段的表单。第一个用于当前（旧）密码。第二个和第三个是用于验证的新密码，以防止意外输入错误。

问题是我无法找出根据当前密码验证旧密码的正确方法。我考虑过使用`springSecurityService.encodePassword`函数并比较哈希值来手动完成。但我不确定这是否是正确的做法。

此表单仅供已经登录的用户访问。如果攻击者以某种方式控制了会话（例如用户忘记注销），则询问密码应该可以阻止攻击者更改密码

有没有弹簧安全的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T22:59:42.360

Spring Security Core 文档中有[一个使用 的示例](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/12%20Password%20and%20Account%20Protection.html)`passwordEnconder`，但`springSecurityService.encodePassword`也很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-07T16:38:19.670

这就是我在 Grails 2.3 和 spring-security-core-2.0-RC4 中使用的。

```
import com.example.User
import grails.plugin.springsecurity.SpringSecurityService

class UserController {

   SpringSecurityService springSecurityService 

   def checkUserPasswordMatches(){
      //Get current user
      User user = springSecurityService.getCurrentUser()    

      String currentPassword = params.password

      if (!springSecurityService.passwordEncoder.isPasswordValid(user.getPassword(), currentPassword, null)) {
         log.info("INFO - Password does not match!"

         //TODO: Do something now passwords match...
      } else {
         log.info("INFO - Password matches existing user password!"

         //TODO: Do something after passwords mismatch...
      }
   }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-07T18:22:38.883

这就是它为我服务的方式，我验证了新密码的确认。

```
def cambio= {
    def respuesta = [error: 1]
    SecUser user = springSecurityService.currentUser

    if (params?.j_password && params?.password && params?.old_password) {
        String oldPasword=params?.old_password
        String newPassword = params.j_password
        String newPassword2 = params.password

        if    (!springSecurityService.passwordEncoder.isPasswordValid(user.getPassword(), oldPasword, null)) {

            respuesta.error=3
            render respuesta as JSON
        }else if(newPassword == newPassword2) {

        user.setPassword(params.j_password)
        user.save()
        respuesta.error=0
        render respuesta as JSON
      }else
      {
          respuesta.error=2
          render respuesta as JSON
      }

    }else{
    render respuesta as JSON
    }
}` 
```

# objective-c - display the row count of a table in a label.text

> ID：15719386
> 
> 赞同：-5
> 
> 时间：2013-03-30T14:05:20.970
> 
> 标签：objective-c

Hi i have a table and want to display how many items are in the table in a label.text so convert the row count into a text string

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:07:52.933

You need to count the model ( array or dictionary count) and form a string:

```
NSString *rowCountString=[NSString stringWithFormat:@"%d",[yourArray count]]; //or dictionary

//if this is for osx 64 bit use %ld instead of %d 
```

then show the string in the label.

```
yourLabel.text = rowCountString; //UILabel ios

[yourLabel setStringValue:rowCountString];//NSTextField as label osx 
```

# javascript - Assign the id as attribute to newly added row using jQuery ajax method in Codeigniter

> ID：15719387
> 
> 赞同：0
> 
> 时间：2013-03-30T14:05:27.440
> 
> 标签：javascript, jquery, html, codeigniter

I am using jQuery ajax method to insert the data to database.
Able to insert the data successfully, and returning the newly inserted id.

Here the problem is, I am appending the new row immediately after submit (prior to insertion of database)

Keeping in mind that, the data will be inserted from background, without causing any delay to the user.
He must be able to keep adding rows, and they must be saved to DB in background.

```
$('#add-new-row').live('submit', function(){        
   var obj = $(this),
   newdata = obj.find('.newdata');
   $('#target').append('<div>newdata.val()+'</div>');

   $.ajax({
       url: '/insert/insertrow',
       data: $(this).serialize(),
       dataType: 'json'
       // other settings
       success: function(response) {
           alert(response.id); // response contains the newly inserted id
       }
   });

} 
```

But I need to attach the ID of new row to html for further processing.
Hence I am struck, to add this response.id to new row as one attribute.

In the above jQuery event I am appending the new row to the target as

```
<div>New row</div> 
```

It should become something like this after it got inserted to database.

```
<div rowid="123">New row</div> 
```

Any suggestions to achieve this scenario.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T14:23:01.387

How about putting this in the success:

```
 $("#target div:last-child").attr("rowid", response.id) 
```

# jquery - 用jquery改变缩略图的不透明度

> ID：15719389
> 
> 赞同：0
> 
> 时间：2013-03-30T14:05:30.390
> 
> 标签：jquery, css, jquery-ui, hover, jquery-hover

我正在为一个朋友建立一个视频库，我正在尝试使用 jQuery 淡入淡出更改悬停时的缩略图不透明度。

我可以用 CSS 改变它，但我试图用 jQuery 淡化它

任何关于我哪里出错的提示都值得赞赏

到目前为止的一切都在[这个小提琴](http://jsfiddle.net/MF3ZJ/71/)中。

我认为主要问题是jQuery代码：

```
$(".thumbnail-element").hover(function () {
$(this).find('.thumb1').fadeIn(100);
},
function () {
$(this).find('.thumb1').fadeOut(100);    
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T14:31:57.577

这是我正在寻找的解决方案

```
 $(document).ready(function() {
        $(".thumb1").hover(
            function() {
                $(this).find('.adaptive-image').stop().animate({opacity: 0}, 200);
                }, 
                function() {
                    $(this).find('.adaptive-image').stop().animate({opacity: 1}, 500);
            }
        );
    }); 
```

# javascript - 同一页面中的多个基本滑动切换不起作用

> ID：15719391
> 
> 赞同：1
> 
> 时间：2013-03-30T14:05:34.037
> 
> 标签：javascript, html, joomla, slidetoggle

我将此代码用于切换：

```
 <script language="javascript"> 
function toggle() {
    var ele = document.getElementById("toggleText");
    var text = document.getElementById("displayText");
    if(ele.style.display == "block") {
            ele.style.display = "none";
        text.innerHTML = "show";
    }
    else {
        ele.style.display = "block";
        text.innerHTML = "hide";
    }
} 
</script>

<a id="displayText" href="javascript:toggle();">show</a> 
<div id="toggleText" style="display: none"><h1>OPEN</h1></div> 
```

我尝试在我网站上的同一篇文章中多次使用此切换，但它不起作用。我没有使用 jQuery，而只使用了 javascript。如何在同一篇文章中多次使用此切换而不发生冲突？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T02:27:40.220

仅仅添加一个数字是不够的。为了使 toggle() 函数适用于不同的元素，您必须向该函数提供有关它们的信息：

```
<script type="text/javascript"> 
function toggle(id, link) {
    var elem = document.getElementById(id);
    var text = document.getElementById(link);
    if (elem.style.display != "none") {
        elem.style.display = "none";
        text.innerHTML = "show";
    } else {
        elem.style.display = "block";
        text.innerHTML = "hide";
    }
} 
</script>

<ul>
    <li>
        <a id="displayText" href="javascript:toggle('toggleText', 'displayText');">hide</a> 
        <div id="toggleText" style="display: block"><h1>OPEN</h1></div>
    </li>
    <li>
        <a id="toggler2" href="javascript:toggle('secondText', 'toggler2');">show</a> 
        <div id="secondText" style="display: none"><h1>OPEN</h1></div>
    </li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:39:34.053

下面的代码解决了保持打开状态的第一个切换问题。谢谢尼布拉！

```
<script type="text/javascript">
    // <![CDATA[
    function toggle(id, link) {
        var elem = document.getElementById(id);
        var text = document.getElementById(link);
        if (elem.style.display != "none") {
            elem.style.display = "none";
            text.innerHTML = "show";
        } else {
            elem.style.display = "block";
            text.innerHTML = "hide";
        }
    }
    // ]]>

</script>
<ul>
    <li><a id="displayText" href="javascript:toggle('toggleText', 'displayText');">show</a>
        <div id="toggleText" style="display: none;">
            <h1>OPEN</h1>
        </div></li>
    <li><a id="toggler2" href="javascript:toggle('secondText', 'toggler2');">show</a>
        <div id="secondText" style="display: none;">
            <h1>OPEN</h1>
        </div></li>
    <li><a id="toggler3" href="javascript:toggle('thirdText', 'toggler3');">show</a>
        <div id="thirdText" style="display: none;">
            <h1>OPEN</h1>
        </div></li>
    <li><a id="toggler4" href="javascript:toggle('forthText', 'toggler4');">show</a>
        <div id="forthText" style="display: none;">
            <h1>OPEN</h1>
        </div></li>
</ul> 
```

# android - Overpass API Android 示例？

> ID：15719398
> 
> 赞同：3
> 
> 时间：2013-03-30T14:06:08.910
> 
> 标签：android, osmdroid, openstreetmap

为了学习，我们必须开发一个基于位置的安卓游戏。目前我们使用 OSMDroid 来显示地图。玩家必须收集一些资源（如木头、石头……）。这些资源当前以硬编码的 long/lat 存储在我们的后端，并将通过 setMarker 添加到当前地图上。为了在全球范围内提供这款游戏，我们希望根据“真实”世界动态设置资源。所以我们需要来自 OSM 的不同层（如森林、海洋等）来自动设置我们的资源，而无需询问我们的后端。在用谷歌搜索几个小时后，我发现 Overpass API 似乎可以帮助我实现这个功能。但我找不到在 Android 中使用 Overpass API 的任何教程。我尝试了一些东西，但我不明白...所以我需要你的帮助，

这是我当前的代码，但我认为这不正确..

```
URL url = new URL("http://overpass-api.de/api/interpreter");
HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
urlConnection.setRequestMethod("GET");
urlConnection.setDoOutput(true);
urlConnection.connect();
InputStream inputStream = urlConnection.getInputStream();
inputStream.close(); 
```

以下异常将被抛出`InputStream inputStream = urlConnection.getInputStream();`：

W/System.err(3958): java.io.FileNotFoundException: [http://overpass-api.de/api/interpreter](http://overpass-api.de/api/interpreter) W/System.err(3958)：在 libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:177) W/System.err(3958)：在 de.htw.berlin.games.based.location.gui。 MapActivity$test.doInBackground(MapActivity.java:536) W/System.err(3958): 在 de.htw.berlin.games.based.location.gui.MapActivity$test.doInBackground(MapActivity.java:1) W/ System.err(3958)：在 android.os.AsyncTask$2.call(AsyncTask.java:287) W/System.err(3958)：在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305 ) W/System.err(3958): 在 java.util.concurrent.FutureTask.run(FutureTask.java:137) W/System.err(3958): 在 android.os.AsyncTask$SerialExecutor$1.run(AsyncTask. java:230) W/System.err(3958): 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076) W/System.err(3958): 在 java.util.concurrent。ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569) W/System.err(3958)：在 java.lang.Thread.run(Thread.java:856)

感谢所有有用的回复:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T14:21:47.557

`http://overpass-api.de/api/interpreter`由于 HTTP GET 调用返回`400 Bad Request`响应，因此引发了您遇到的此异常。

你想要做的是一个 POST 请求`http://overpass-api.de/api/interpreter`。传递给此 API[的示例](http://overpass-turbo.eu/)是：`form-data`

```
data='<?xml version="1.0" encoding="UTF-8"?><osm-script><!--
This is an example Overpass query.
Try it out by pressing the Run button above!
You can find more examples with the Load tool.
-->
<query type="node">
  <has-kv k="amenity" v="drinking_water"/>
  <bbox-query s="41.88659196260802" w="12.488558292388916" n="41.89248629819397" e="12.51119613647461"/><!--this is auto-completed with the
                   current map view coordinates.-->
</query>
<print/></osm-script>' 
```

要了解 API 是如何工作的，您应该使用浏览器检查在[我指出](http://overpass-turbo.eu/)`Run`的示例中单击时对 API 进行的 HTTP 查询。

**编辑**

您可以找到很多类似的示例，[这些](https://stackoverflow.com/questions/2938502/sending-post-data-in-android)示例展示了如何在 Android 中使用 HTTP 发布数据。您必须在使用的值对容器中添加*键*和 XML 查询字符串作为`data`值*，*例如：

 **```
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
nameValuePairs.add(new BasicNameValuePair("data", _The_XML_Query_String_)); 
```

Stick to the [linked example](https://stackoverflow.com/questions/2938502/sending-post-data-in-android) for the rest and you hould be fine.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-06T20:09:51.363

Check out [https://github.com/zsoltk/overpasser](https://github.com/zsoltk/overpasser). It's a Java library to ease working with the Overpass API.

1.  You don't have to write the QL string yourself
2.  It comes with a Retrofit adapter (so you can skip the networking part)
3.  It has an Android sample showing how to put them all together over a Google Maps to get you started in no time

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-08T12:08:36.843

For anyone in future who needs to find a solution with overpass api, here is what I did very often: Overpass API can be addressed with a GET-Request. A GET-Request comes with a HTTP-protocoll and can be used in (I think) every programming language. You have to make a GET-request to the overpass-interpreter with all the queries in the url. In Android it would look like this:

```
String urlOverpass = "https://overpass-api.de/api/interpreter?data=[out:json][timeout:100];(node[shop=supermarket](52.402957,13.337429,52.420730,13.379530);way[shop=supermarket](52.402957,13.337429,52.420730,13.379530););out%20body;%3E;out%20skel%20qt;"; 
/* here you speak to the interpreter and you can insert whatever query you need. As an example look at overpass-turbo.eu*/

StringRequest request = new StringRequest(urlOverpass, new Response.Listener<String>() {
            @Override
            public void onResponse(String string) {
/* Here you can do whatever you like with the data which comes from the interpreter. The "string" is the response.*/

            }
        }, new Response.ErrorListener() {
            @Override
            public void onErrorResponse(VolleyError volleyError) {
/* Here you can explain what happens when an error is coming from the interpreter*/
}
        });
        RequestQueue rQueue = Volley.newRequestQueue(MainActivity.this);
        rQueue.add(request); 
```

Dont forget to implement the library: `implementation 'com.android.volley:volley:1.1.1'` But there are multiple possibilities to fetch data from an api with a GET-request.**

# javascript - MVC 4 - Cascading Dropdown Lists - Issue with Ajax JavaScript Call

> ID：15719399
> 
> 赞同：0
> 
> 时间：2013-03-30T14:06:15.517
> 
> 标签：javascript, jquery, asp.net-mvc, html, asp.net-mvc-4

I have an MVC 4 app with a View containing two dropdown lists. The user selects a value in the first dropdown and then an Ajax call is made to populate the second dropdown based on the contents of the first.

My JavaScript code looks as follows and gets called when the user selects an item in the first dropdown:

```
function GetAutoModel(_manufacturerId) {

    var autoSellerListingId = document.getElementById("AutoSellerListingId").value;

    $.ajax({
        url: "/AutoSellerListing/GetAutoModel/",
        data: { manufacturerId: _manufacturerId, autoSellerListingId: autoSellerListingId },
        cache: false,
        type: "POST",
        success: function (data) {
            var markup = "<option value='0'>-- Select --</option>";

            for (var x = 0; x < data.length; x++) {
                **if (data[x].Selected) {**
                    markup += "<option selected='selected' value=" + data[x].Value + ">" + data[x].Text + "</option>";
                }
                else
                    markup += "<option value=" + data[x].Value + ">" + data[x].Text + "</option>";
            }
            $('#autoModel').html(markup).show();
        },
        error: function (reponse) {
            alert("error : " + reponse);
        }
    });
} 
```

The Ajax call works correctly. However, the data that gets returned for the second dropdown contains a selected item and I'm trying to detect the selected item (via the 'if' statement), and render the HTML appropriately. The problem is that 'Selected' doesn't seem to be a property of 'data' because each value evaluates to false, even though one of the values is true.

Am I doing something wrong? Or is there a better way to do this?

The following is the controller code:

```
[HttpPost]
public ActionResult GetAutoModel(int manufacturerId, int autoSellerListingId)
{
    int modelId = 0;

    // Get all the models associated with the target manufacturer
    List<AutoModel> modelList = this._AutoLogic.GetModelListByManufacturer(manufacturerId);

    // If this is an existing listing, get the auto model Id value the seller selected.
    if (autoSellerListingId > 0)
        modelId = this._systemLogic.GetItem<AutoSellerListing>(row => row.AutoSellerListingId == autoSellerListingId).AutoModel.AutoModelId;

    // Convert all the model data to a SelectList object
    SelectList returnList = new SelectList(modelList, "AutoModelId", "Description");

    // Now find the selected model in the list and set it to selected.
    foreach (var item in returnList)
    {
        if (item.Value == modelId.ToString())
            item.Selected = true;
    }

    return Json(returnList);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T00:33:50.087

Try this instead (add modelId to constructor of SelectList, and remove the foreach block):

```
// Convert all the model data to a SelectList object
SelectList returnList = new SelectList(modelList, "AutoModelId", "Description", modelId);

return Json(returnList); 
```

# php - PHP数组到树数组

> ID：15719402
> 
> 赞同：0
> 
> 时间：2013-03-30T14:06:29.347
> 
> 标签：php, arrays, tree, key

我有一个无法解决的问题。我有 2 个数组和一个字符串。第一个数组包含第二个应该使用的键。第一个是这样的：

```
Array
(
    [0] => foo
    [1] => bar
    [2] => hello
) 
```

现在我需要一个 PHP 代码将其转换为第二个数组：

```
Array
(
    [foo] => Array
        (
            [bar] => Array
                (
                    [hello] => MyString
                )
        )
) 
```

项目的数量是可变的。

有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T14:11:12.763

您应该使用引用来解决此问题：

```
$a = array (0 => 'foo', 1 => 'bar', 2 => 'hello' );

$b = array();
$ptr = &$b;
foreach ($a as $val) {
    $ptr[$val] = Array();
    $ptr = &$ptr[$val];
}
$ptr = 'MyString';
var_dump($b); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T14:11:41.877

所有你需要的是 ：

```
$path = array(
        0 => 'foo',
        1 => 'bar',
        2 => 'hello'
);

$data = array();
$t = &$data;
foreach ( $path as $key ) {
    $t = &$t[$key];
}
$t = "MyString";
unset($t);

print_r($data); 
```

[观看现场演示](http://eval.in/13953)

# sql - sql custom generated week ranges

> ID：15719405
> 
> 赞同：1
> 
> 时间：2013-03-30T14:06:43.357
> 
> 标签：sql, stored-procedures, dayofweek, week-number

I'm trying to create custom week numbers and ranges based on user entered Week Start Day.

I'm passing that User defined day with `SET Datefirst = @Userdefinedvalue` (using a function to map my weekday start values to T-SQL's). Also I have a function to gets me the last day of the current week.

What is the best approach for this?

My Goal is: if I select Tuesday as my start day of the week the Stored Procedure to generate my week numbers and start/end dates based on my selection for the entire year

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:00:34.233

The idea is to find the first day of the week. First, use SQL Server built in functions to move the start of the week to the Sunday (in the US) by subtracting `datepart(wd)`. Actually `datepart(wd)` returns values form 1 to 7 and we want them 0 to 6.

Then, add back in an offset based on your date of the week. Here is example code:

```
declare @offset int (case when @DateFirst = 'Mon' then 1
                          when @DateFirst = 'Tue' then 2
                          ...
                          when @DateFirst = 'Sun' then 0
                     end);

select dateadd(dd, @offset - (datepart(wd, thedate) - 1)
               thedate) as WeekStartDate 
```

# ios - UitableView in UitableView

> ID：15719407
> 
> 赞同：0
> 
> 时间：2013-03-30T14:06:56.960
> 
> 标签：ios, objective-c, cocoa-touch

I'm a newbie in iOS.

I have a `UITableView` and a `DetailViewController`. When I click some elements (like name of user) in a `UITableView` it will transfer to the `DetailViewController`. Then I could code for that 2 `ViewController`s.

But now I want to be able to click elemens in the `DetailViewController` so that it will move to another `DetailViewConTroller` and so on. Just like in the Facebook app where you click a username and it moves to that user's timeline. And in that user's timeline you can click on another username etc.

So do I have to write code for 3 (4, 5, 6...) `ViewControllers` or is there a reliable way I can write code for 2 `ViewController`s only?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:13:23.213

You just need to code two view controllers. From your first `DetailViewController`, you create and push a new `DetailViewController`. The one you pushed will have the exact same code, so you can push another `DetailViewController`.

If you have no top level view controller which is different from those DetailViewControllers, then you only need to code *one* type of view controller.

Note that this way of doing things needs to have your DetailViewControllers contained in a `UINavigationController`, which handles the pushing of new view controllers.

# c++ - 哪个对数组清零最快？

> ID：15719412
> 
> 赞同：0
> 
> 时间：2013-03-30T14:07:22.947
> 
> 标签：c++, arrays, memory, optimization

问题标题是不言自明的。我有一个需要动态大小的数组的运行循环。但我确实知道该大小的最大值将是，所以如果需要，我可以将其最大化而不是动态调整大小。

这是我的代码，我知道就可移植性而言，clock_t 可能不是计时的最佳选择，但 clock_t 提供的准确性很差。

```
#include <iostream>
#include <cstdlib>
#include <cstring>
#include <cstdio>
#include <ctime>

#define TEST_SIZE 1000000

using namespace std;

int main(int argc, char *argv[])
{
    int* arrayPtr = NULL;
    int  array[TEST_SIZE];
    int  it = 0;

    clock_t begin, end;

    begin = clock();
    memset(array, 0, sizeof(int) * TEST_SIZE);
    end = clock();
    cout << "Time to memset: "<< end - begin << endl;

    begin = clock();
    fill(array, array + TEST_SIZE, 0);
    end = clock();
    cout << "Time to fill: "<< end - begin << endl;

    begin = clock();
    for ( it = 0 ; it < TEST_SIZE ; ++ it ) array[it] = 0;
    end = clock();
    cout << "Time to for: "<< end - begin << endl;
} 
```

这是我的结果：

```
Time to memset: 1590
Time to fill: 2334
Time to for: 2371 
```

既然我知道 new & delete 现在会将数组清零，有没有比这些更快的方法？

请帮我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T14:12:35.333

基本上你是在比较苹果和橘子。

`memset` and the for-loop explicitly set the memory content to a particular value(*in your example `0`*). While, the `new` merely allocates sufficient memory(*atleast as requested*) and `delete` merely marks the memory free for reuse. There is no change in the content at that memory. So `new` and `delete` do not initialize/de-initialize the actual memory content.
Technically, the content in that memory has an ***Indeterminate value***. Quite literally, the values maybe anything and you cannot rely on them to be anything specific.They might be `0` but they are not guaranteed to be. In fact using these values will cause your program to have an ***Undefined Behavior***.

A `new` call for an class does two things:

*   Allocates requested memory &
*   Calls constructor for the class to initialize the object.

But note that in your case the type is an `int` and there is no default initialization for `int`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T14:12:26.013

`new`只分配一个内存块，它不会初始化分配的内存。要初始化数组，您可以使用`memset()`或手动进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T14:13:42.747

Good compiler will optimize all 4 approaches into 1 call of `memset`. Also, what's the difference between 3^(rd) and 4^(th) approach?

You can also do

```
int  array[TEST_SIZE] = {}; 
```

gain readability and save 1 line of code.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T14:35:32.600

I would resort to `memset` in this case. `fill` is generic, but the platform can offer you some really nice tricks in its implementation of `memset`. This is possible, because the function is unambigous in what it does and dumb enough:

*   It could employ (S)DMA for actual memory modification, which could have faster interface to memories. Also, while it runs the task, the CPU could do something else
*   When it knows it has to sequentially write contiguous memory region, it could do something preventive about cache invalidation
*   The implementation in ARM-based embedded systems can benefit from [burst mode](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.faqs/ka3491.html); it is realized with special assembler instruction (STMFD, STMFA etc.) and in this mode 3 writes are equal two normal writes timewise

# java - 多次从 Android 应用程序向 URL 发送请求的最佳方式是什么？

> ID：15719421
> 
> 赞同：0
> 
> 时间：2013-03-30T14:08:00.160
> 
> 标签：java, android, android-emulator

我有一个应用程序需要在位置更改时将当前用户位置发送到远程 URL。我正在使用以下代码使用一些参数调用 url。但是下面的代码只能工作一次，当我第二次不能工作时，什么也没有发生。我在服务器日志上看到一个请求，然后没有收到请求。

```
public String sendRequest(String url){
  InputStream content = null;
      try {
        HttpResponse response = httpclient.execute(new HttpGet(url));
        response.setHeader("Cache-Control", "no-cache");
        content = response.getEntity().getContent();
        content.close();
      } catch (Exception e) {
        try {
            content.close();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

      }
        return content;
} 
```

*   向 url 发送多个请求的最佳方式是什么？
*   为什么我不能使用上面的代码发送多个请求？

注意：我正在使用模拟器并手动发送位置。

## 这是错误日志，当我第二次尝试调用该方法时

```
03-30 16:48:15.205: E/ActivityThread(645): Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40ceef60 that was originally bound here
03-30 16:48:15.205: E/ActivityThread(645): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40ceef60 that was originally bound here
03-30 16:48:15.205: E/ActivityThread(645):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
03-30 16:48:15.205: E/ActivityThread(645):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
03-30 16:48:15.205: E/ActivityThread(645):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
03-30 16:48:15.205: E/ActivityThread(645):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
03-30 16:48:15.205: E/ActivityThread(645):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
03-30 16:48:15.205: E/ActivityThread(645):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
03-30 16:48:15.205: E/ActivityThread(645):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
03-30 16:48:15.205: E/ActivityThread(645):  at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116)
03-30 16:48:15.205: E/ActivityThread(645):  at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
03-30 16:48:15.205: E/ActivityThread(645):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
03-30 16:48:15.205: E/ActivityThread(645):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
03-30 16:48:15.205: E/ActivityThread(645):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
03-30 16:48:15.205: E/ActivityThread(645):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-30 16:48:15.205: E/ActivityThread(645):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
03-30 16:48:15.205: E/ActivityThread(645):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
03-30 16:48:15.205: E/ActivityThread(645):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
03-30 16:48:15.205: E/ActivityThread(645):  at java.lang.Thread.run(Thread.java:856)
03-30 16:48:15.225: E/StrictMode(645): null
03-30 16:48:15.225: E/StrictMode(645): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40ceef60 that was originally bound here
03-30 16:48:15.225: E/StrictMode(645):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
03-30 16:48:15.225: E/StrictMode(645):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
03-30 16:48:15.225: E/StrictMode(645):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
03-30 16:48:15.225: E/StrictMode(645):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
03-30 16:48:15.225: E/StrictMode(645):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
03-30 16:48:15.225: E/StrictMode(645):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
03-30 16:48:15.225: E/StrictMode(645):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
03-30 16:48:15.225: E/StrictMode(645):  at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116)
03-30 16:48:15.225: E/StrictMode(645):  at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
03-30 16:48:15.225: E/StrictMode(645):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
03-30 16:48:15.225: E/StrictMode(645):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
03-30 16:48:15.225: E/StrictMode(645):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
03-30 16:48:15.225: E/StrictMode(645):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-30 16:48:15.225: E/StrictMode(645):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
03-30 16:48:15.225: E/StrictMode(645):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
03-30 16:48:15.225: E/StrictMode(645):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
03-30 16:48:15.225: E/StrictMode(645):  at java.lang.Thread.run(Thread.java:856)
03-30 16:48:15.225: W/ActivityManager(275): Unbind failed: could not find connection for android.os.BinderProxy@4100e3e8
03-30 16:48:15.246: E/ActivityThread(645): Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d2cc28 that was originally bound here
03-30 16:48:15.246: E/ActivityThread(645): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d2cc28 that was originally bound here
03-30 16:48:15.246: E/ActivityThread(645):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
03-30 16:48:15.246: E/ActivityThread(645):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
03-30 16:48:15.246: E/ActivityThread(645):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
03-30 16:48:15.246: E/ActivityThread(645):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
03-30 16:48:15.246: E/ActivityThread(645):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
03-30 16:48:15.246: E/ActivityThread(645):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
03-30 16:48:15.246: E/ActivityThread(645):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
03-30 16:48:15.246: E/ActivityThread(645):  at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
03-30 16:48:15.246: E/ActivityThread(645):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
03-30 16:48:15.246: E/ActivityThread(645):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
03-30 16:48:15.246: E/ActivityThread(645):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
03-30 16:48:15.246: E/ActivityThread(645):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-30 16:48:15.246: E/ActivityThread(645):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
03-30 16:48:15.246: E/ActivityThread(645):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
03-30 16:48:15.246: E/ActivityThread(645):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
03-30 16:48:15.246: E/ActivityThread(645):  at java.lang.Thread.run(Thread.java:856)
03-30 16:48:15.265: E/StrictMode(645): null
03-30 16:48:15.265: E/StrictMode(645): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d2cc28 that was originally bound here
03-30 16:48:15.265: E/StrictMode(645):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
03-30 16:48:15.265: E/StrictMode(645):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
03-30 16:48:15.265: E/StrictMode(645):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
03-30 16:48:15.265: E/StrictMode(645):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
03-30 16:48:15.265: E/StrictMode(645):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
03-30 16:48:15.265: E/StrictMode(645):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
03-30 16:48:15.265: E/StrictMode(645):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
03-30 16:48:15.265: E/StrictMode(645):  at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
03-30 16:48:15.265: E/StrictMode(645):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
03-30 16:48:15.265: E/StrictMode(645):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551) 
```

我看到了问题，我必须添加

```
HttpGet getter =  new HttpGet(url);
getter.setHeader("Cache-Control", "no-cache"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:30:54.347

You're probably experiencing a caching issue. Android doesn't see any difference in your request and you're probably asking for it very close together.

add a HTTP header:

Cache-Control: no-cache

# javascript - How to parse object during asynchronously processing function?

> ID：15719422
> 
> 赞同：0
> 
> 时间：2013-03-30T14:08:07.877
> 
> 标签：javascript, node.js, asynchronous, seq

What should I do in case when I want to call seqEach on two_objects:

```
Seq()
    .seq(function() {
      pivotal.getProjects(this);
    })
    .flatten()
    .seqEach(function(data) {
      var project_ids = data.project.map(function(x) { return parseInt(x.id); })
      console.log('project_ids: '.red + project_ids );
      // pivotal.getStories(project.id, { filter: "state:finished" }, this);
    })
    .seq(function() {
        var aggregatedStories = [];
        Hash.map(this.args, (function(arg) {
            aggregatedStories.push(arg[0]);
        }));
        res.send(aggregatedStories);
    }); 
```

Logs:

```
project_ids: 644511,340755 
```

`pivotal.getProjects(this);`

returns something like

`{"project": { "id": 644511}, { "id": 340755} }`

So problem is because `data` should be replaced by `data.project` but how to do it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:05:04.687

> So problem is because `data` should be replaced by `data.project` but how to do it?

Either you add the line `data = data.project;` on top of your `seqEach` callback, or you inject a mapping function like

```
.map(function(d) { return d.project; }) 
```

into your chain. Or you just change the `pivotal.getProjects` method…</p>

# php - 在动态填充的表上打印两个单独的 SQL 表数据 - PHP

> ID：15719423
> 
> 赞同：0
> 
> 时间：2013-03-30T14:08:17.840
> 
> 标签：php

有人可以帮我解决以下代码吗？简而言之，我试图获取两个单独的 SQL 表的数据，一个位于水平侧（品牌），另一个（分销商）位于动态填充表的垂直侧。

我的问题是，如果您浏览代码，我无法从数据库中显示的每个品牌名称下填充文本框。文本框仅出现在第一个品牌名称列中。

我的第二个问题是如何在此处为动态填充的文本框分配唯一 ID 或名称？

```
 <?php
$q=$_GET["q"];

include ("../connection/index.php"); 
$sql="SELECT * FROM distributors WHERE rsm='".$q."'";
$sqlq="SELECT * FROM brands";
$result = mysqli_query($db,$sql) or die ("SQL Error_er1");
$resultq = mysqli_query($db,$sqlq) or die ("SQL Error_er2");

echo "<table border='1'>
<tr>
<th>Distributor</th>";
"<tr>";
while($rowq = mysqli_fetch_array($resultq))
    {
    echo "<td>" . $rowq['bname'] . "</td>";

    }
"</tr>";

while($row = mysqli_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['dname'] . "</td>";
  echo "<td><input type='text' name='txt1'></td>";
  echo "</tr>";
  }
echo "</table>";

mysqli_close($db);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T14:37:03.140

您正在创建不相互关联的循环，执行查询也是如此......

如果要解决它，则必须将循环嵌套在一起，例如：

```
<?php
$q=$_GET["q"];

include ("../connection/index.php"); 
$sql="SELECT * FROM distributors WHERE rsm='".$q."'";
$result = mysqli_query($db,$sql) or die ("SQL Error_er1");

echo "<table border='1'>
<tr>
<th>Distributor</th>";
"<tr>";

//Go through all distributors
while($rowq = mysqli_fetch_array($result)) {
    echo "<td>" . $rowq['bname'] . "</td>";

    //Show all brands for current distributor
    $sqlq="SELECT * FROM brands where distributor_id = " . $rowq['rsm'];
    $resultBrands = mysqli_query($db,$sql) or die ("SQL Error Brands");

    while($row = mysqli_fetch_array($resultBrands))
    {
           $id = $row['rsm'];
        echo "<tr>";
        echo "<td>" . $row['dname'] . "</td>";
        echo "<td><input type='text' name='textBox[]'></td>";
        echo "</tr>";
    }
    //End show all brands for current distributor

}
//End Go through all distributors 
```

不过，更好的解决方案是（当然，$q 必须在查询内部输入之前进行验证，并且还必须与 bind_param() 绑定）。

```
<?php
$q=$_GET["q"];

include ("../connection/index.php"); 
$sql = " SELECT * FROM distributors d";
$sql .=" LEFT JOIN brands b ON (d.brand_id = b.brand_id)";
$sql .=" WHERE d.rsm=$q";
$result = mysqli_query($db,$sql) or die ("SQL Error");

echo "<table border='1'>";

while($rowq = mysqli_fetch_array($result))
{
    $id = rowq['rsm'];
    echo "<tr>";
    echo "<td>" . $rowq['dname'] . "</td>";
    echo "<td>" . $rowq['bname'] . "</td>";
    echo "<td><input type='text' name='textBox[]'></td>";
    echo "</tr>";
}

echo "</table>";

mysqli_close($db);
?> 
```

注意 name='textBox[]'。在 PHP 中，您可以使用 $_POST['textBox'] （或 $_GET['textBox'] 并且 PHP 将返回一个数组）访问该变量。

# javascript - Modifying CSS properties associated to a given CSS class using JavaScript

> ID：15719429
> 
> 赞同：0
> 
> 时间：2013-03-30T14:09:07.667
> 
> 标签：javascript, jquery, css

I have a JavaScript color picker linked to a text input. I would like several colored elements on my to change their color on the update of that color input. I could create several classes, one for each color (blue, red, green, etc), but i would like to have the whole 24 bits coloe palette, not just a few of them. Is it possible to modify the value of the properties associated to a given CSS class ? If yes, will modifying these values apply new values on the rendered page in real time ? Thanks in advance :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T14:10:32.253

Totally possible, and yes it will be updated in real time.

Here is a function to do the class property update, tied to a mouseover event (requires jQuery 1.0+). Mousing over div with id myDiv will update the CSS background color to white for all div's with class myColorDivs:

```
$('#myDiv').mouseover(function() {

    $('.myColorDivs').css('background', '#fff');

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T14:05:38.223

Sorry, i'm late ... Had the same question some days before and didn't find a practical answer. Here's how I solved it for me (requires jquery):

Add an inline-stylesheet after all other stylesheets your page may need with the class you want to change. Assign a TITLE Attribute to this stylesheet!

```
<style title="tomrulez" type="text/css">
/*the stylesheet to change - Note the TITLE*/
.shaded{
    color:green;
}
</style> 
```

Add this function:

```
 function modCSS (stylesheet, rule, attrib, newval){
    $.each( document.styleSheets, function( skey, svalue ) {
        if(svalue.title==stylesheet){
            $.each(svalue.cssRules,function (rkey,rvalue){
                if (rvalue.selectorText==rule){
                    rvalue.style[attrib]=newval;
                }
            });
        }
    });
  } 
```

call it like this:

```
<div onclick="modCSS('tomrulez','.shaded','color','red')"> click here</div> 
```

Parameters are:

*   **stylesheet** -> the TITLE of the last stylesheet on your page
*   **rule** -> The CSS-rule you want to change
*   **attrib** -> The attribute of the rule you want the change
*   **newval** -> The new value you want to assign to that attribute

I've tested this with Firefox, Chrome and IE10. IE may not work in older Versions. But I develop mainly backends for a small group of users that do not use IE if i tell them (Yep, i'm a lucky about that!)

Btw. Here is a Plunker that works for me: [http://plnkr.co/edit/EMDpjU06U2p83Df8Lolq?p=preview](http://plnkr.co/edit/EMDpjU06U2p83Df8Lolq?p=preview)

# html - RegEx over multipe lines

> ID：15719434
> 
> 赞同：0
> 
> 时间：2013-03-30T14:09:29.093
> 
> 标签：html, regex

I want to extract only the "Mlody" string from the below code. Matching should start from `<dt>User</dt>` and end at `</dd>` on the next line. I need some help on the RegEx code required. HTML code is below.

```
<dl>
<dt>User</dt>
<dd><a href="/users/837">Mlody</a></dd>
<dd></dd>
</dl> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:47:24.370

**As a general rule, you shouldn't use a regex to match/parse the HTML text.**

Instead, try a DOM parser (if available) and search for the tag you need, and then search the text content of those results with a regex if you need to match against the contents.

Only if you don't have any other option decide to use regex.

You can try following regex for matching multiline text:

```
<dt>User</dt>((?:.|[\r\n])*?)</dd> 
```

# c# - Protobuf-net serialization of class that nests itself

> ID：15719441
> 
> 赞同：3
> 
> 时间：2013-03-30T14:10:48.663
> 
> 标签：c#, serialization, mono, protobuf-net

I have a class that doesn't seem to be working with protobuf-net serialization, and it seems to be breaking at the point that my class has a reference to another instance of itself. Here is an example (greatly simplified from my actual code):

```
[ProtoContract]
public sealed class Acorn
{
    [ProtoMember(50)]
    public string Investment;
    [ProtoMember(51)]
    public string Broker;
    [ProtoMember(52)]
    public Acorn DefaultTransferAcorn;
} 
```

As far as I can tell, it is the reference to another Acorn class inside the Acorn class that appears to be causing the problem. I get the following error message in mono:

System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> ProtoBuf.ProtoException: Possible recursion detected (offset: 4 level(s)): AcornTrail3.Acorn

Is this a limitation of protobuf-net, or is there a way to make this work?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T14:42:24.910

By default protobuf is a "tree" structure. Protobuf-net adds graph support. Add AsReference=true to the ProtoMember affected.

# sql - 将表中的数据合并到一行 T-SQL

> ID：15719445
> 
> 赞同：3
> 
> 时间：2013-03-30T14:11:00.067
> 
> 标签：sql, sql-server-2008, tsql, pivot

我在#SQL server 2008 中有一个包含事务数据的表。桌子看起来像这样。我想在 sql 语句中有这个。

TransactionId|TransactionDate|TransactionType|Amount|Balance|UserId

交易类型可以是存款、取款、利润和权益四种类型之一。我举一个例子，它在事务表中的样子。余额是金额总和列。

```
TransactionId|TransactionDate|TransactionType|Amount|Balance|UserId
1|             2013-03-25|      Deposit|         150|    150|     1
2|             2013-03-27|      Stake|           -20|    130|     1
3|             2013-03-28|      Profit |         1500|   1630|    1
4 |            2013-03-29|      Withdrawals|     -700|   930|     1
5|             2013-03-29|      Stake |          -230 |  700 |    1
6|             2013-04-04|      Stake|           -150 |  550|     1
7|             2013-04-06|      Stake |          -150 |  400|     1 
```

我现在想要的是获得一个选择语句，它为我提供按周分组的所有数据。结果应该是这样的。

```
Week|Deposit|Withdrawals|Stake|Profit|Balance|Year
13 |  150|     -700  |      -250 | 1500 |  700 |    2013
14 |  0  |     0     |      -300|  0   |   400 |    2013 
```

我也有几周的问题......我住在欧洲，一周的第一天是星期一。我有一个解决方案，但在一年结束时我有时会得到第 54 周，但一年中只有 52 周......

我希望有人可以帮助我。

这就是我到目前为止所拥有的。

```
SELECT transactionid, 
       transactiondate, 
       transactiontype, 
       amount, 
       (SELECT Sum(amount) 
        FROM   transactions AS trans_ 
        WHERE  trans_.transactiondate <= trans.transactiondate 
               AND userid = 1)         AS Balance, 
       userid, 
       Datepart(week, transactiondate) AS Week, 
       Datepart(year, transactiondate) AS Year 
FROM   transactions trans 
WHERE  userid = 1 
ORDER  BY transactiondate DESC, 
          transactionid DESC 
```

这是**示例数据**和我对 sql-fiddle 的查询：[http ://www.sqlfiddle.com/#!3/79d65/92/0](http://www.sqlfiddle.com/#!3/79d65/92/0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:43:27.327

为了将数据从行转换为列，您需要使用[PIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)函数。

您没有指定`balance`要返回的值，但根据最终结果，您似乎希望最终余额是与每一天的最后交易日期关联的值。如果这不正确，那么请澄清逻辑应该是什么。

为了获得结果，您需要使用[DATEPART](http://msdn.microsoft.com/en-us/library/ms174420.aspx)和[YEAR](http://msdn.microsoft.com/en-us/library/ms186313.aspx)函数。这些将允许按周和年值进行分组。

以下查询应该得到您想要的结果：

```
select week, 
  coalesce(Deposit, 0) Deposit, 
  coalesce(Withdrawals, 0) Withdrawals, 
  coalesce(Stake, 0) Stake, 
  coalesce(Profit, 0) Profit,
  Balance,
  Year
from
(
  select datepart(week, t1.transactiondate) week,
    t1.transactiontype,
    t2.balance,
    t1.amount,
    year(t1.transactiondate) year
  from transactions t1
  cross apply
  (
    select top 1 balance 
    from transactions t2
    where datepart(week, t1.transactiondate) = datepart(week,  t2.transactiondate)
      and year(t1.transactiondate) = year(t2.transactiondate)
      and t1.userid = t2.userid
    order by TransactionId desc
  ) t2
) d
pivot
(
  sum(amount)
  for transactiontype in (Deposit, Withdrawals, Stake, Profit)
) piv; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/79d65/56)。结果是：

```
| WEEK | DEPOSIT | WITHDRAWALS | STAKE | PROFIT | BALANCE | YEAR |
------------------------------------------------------------------
|   13 |     150 |        -700 |  -250 |   1500 |     700 | 2013 |
|   14 |       0 |           0 |  -300 |      0 |     400 | 2013 | 
```

作为旁注，您声明一周的开始是星期一，您可能必须使用[DATEFIRST](http://msdn.microsoft.com/en-us/library/ms187766.aspx)函数来设置一周的第一天。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T14:56:18.040

另一种选择，不使用 PIVOT，而是使用很少的 CASE

```
WITH CTE AS
(
    SELECT
         TransactionId 
        ,TransactionDate
        ,DATEPART(WEEK, TransactionDate) AS Week
        ,CASE WHEN TransactionType='Deposit' THEN Amount ELSE 0 END AS Deposit 
        ,CASE WHEN TransactionType='Stake' THEN Amount ELSE 0 END AS Stake 
        ,CASE WHEN TransactionType='Profit' THEN Amount ELSE 0 END AS Profit 
        ,CASE WHEN TransactionType='Withdrawals' THEN Amount ELSE 0 END AS Withdrawals 
        ,Balance
        ,DATEPART(YEAR, TransactionDate) AS Year
    FROM dbo.Transactions
)
SELECT 
  Week,  SUM(Deposit) AS Deposit, SUM(Withdrawals) AS Withdrawals, SUM(Stake) AS Stake, SUM(Profit) AS Profit, 
    (SELECT Balance FROM CTE i WHERE i.TransactionID = MAX(o.TransactionID)) AS BAlance, Year
FROM CTE o
GROUP BY Week, Year 
```

[SQLFiddle 演示](http://www.sqlfiddle.com/#!3/79d65/95)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T14:55:10.733

[http://www.sqlfiddle.com/#!3/79d65/89](http://www.sqlfiddle.com/#!3/79d65/89)

```
;WITH cte AS
(
  SELECT datepart(ww, transactiondate) wk,
  sum(CASE WHEN TransactionType = 'Deposit' THEN Amount ELSE 0 END) AS D,
  sum(CASE WHEN TransactionType = 'Withdrawals' THEN Amount ELSE 0 END)  AS W,
  sum(CASE WHEN TransactionType = 'Profit' THEN Amount ELSE 0 END) AS P,
  sum(CASE WHEN TransactionType = 'Stake' THEN Amount ELSE 0 END)  AS S,
  sum(
    CASE WHEN TransactionType = 'Deposit' THEN Amount ELSE 0 END +
    CASE WHEN TransactionType = 'Withdrawals' THEN Amount ELSE 0 END +
    CASE WHEN TransactionType = 'Profit' THEN Amount ELSE 0 END +
    CASE WHEN TransactionType = 'Stake' THEN Amount ELSE 0 END +
    CASE WHEN TransactionType = 'Balance' THEN Amount ELSE 0 END) AS wkTotal
  FROM transactions
  GROUP BY datepart(ww, transactiondate)),
  cte1 AS
  (
    SELECT *, row_number() over (ORDER BY wk) AS rowNum
    FROM cte)
  SELECT wk, d, w, p, s, wktotal
  + coalesce((SELECT top 1 wktotal FROM cte1 x WHERE x.rownum < m.rownum ), 0) AS RunningBalance
FROM cte1 m 
```

# java - 为什么两个文字存在于具有相同数据的池中

> ID：15719446
> 
> 赞同：2
> 
> 时间：2013-03-30T14:11:00.823
> 
> 标签：java, string

```
public class ConcatenationRuntime {
    public static void main(String[] args) {
        String s1 = "jim";
        String s3 = "j";
        String im = "im";
        s3=s3+= im;
        System.out.println("s3> " +s3);  // jim
        System.out.println(s1==s3);  // line 8
        System.out.println("Hel" + "lo" == "Hello");  // true
    }
} 
```

**为什么它在第 8 行打印错误？**这些都是文字，两个引用应该指向池中的同一个文字 - 我有点困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T14:15:19.673

> 为什么它在第 8 行返回 false，

因为`s3=s3+= im;`.
`Strings`在运行时通过串联计算是`objects`在堆上新创建的，并有自己的引用。这与keep in`reference`提供的参考不同。因此提供虚假。 但是，如果您实习字符串，然后检查是否相等，它会给出正确的结果。例如：`jim``StringPool``s1==s3`
`s3`

`s3.intern() == s1`=> 返回真

**为什么 ？**
因为实习`String`对象首先检查给定的字符串文字是否存在于`StringPool`. 如果`String`文字存在，`StringPool`则返回对该字符串文字的引用，否则它将该字符串文字的副本存储在 StringPool 中并返回对它的引用。由于`jim`已经存储在 StringPool 中，所以 s3.intern() 将简单地返回对`jim`存储在 Stringpool 中的引用。因此我们得到相同的参考。这使得`s3.intern() == s1`返回真。

# java - HttpServletRequest InputStream 读取返回 -1

> ID：15719450
> 
> 赞同：-1
> 
> 时间：2013-03-30T14:11:14.733
> 
> 标签：java

我正在尝试读取请求`InputStream`，但已到达流的末尾。

唯一的类（servlet）是：

```
 public class TestServlet extends HttpServlet
    {
        protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException
        {
            InputStream clientIn = request.getInputStream();
            OutputStream clientOut = response.getOutputStream();
            byte[] buffer = new byte[4096];
            int n;
            try
            {
                while ((n = clientIn.read(buffer)) != -1)    // --------->  Here, n is -1
                {
                    System.out.println(new String(buffer,0,n));
                    clientOut.write(("Ok = " + n).getBytes());
                }
            }
            catch (Exception e)
            {
                System.err.println(e);
            }
        }
    } 
```

没有任何其他类（例如过滤器、侦听器或其他 servlet）

客户端代码是：

```
    公共类主
    {
        公共静态 void main(String[] args) 抛出 IOException、InterruptedException
        {   
            字符串 postCommand = "POST / HTTP/1.1\r\n" +
                    "主机：本地主机\r\n" +
                    "内容类型：二进制/八位字节流\r\n" +
                    "连接：保持活动\r\n\r\n" +
                    “名称1=值1&名称2=值2”；

            Socket socket = new Socket("localhost", 8080);
            InputStream serverIn = socket.getInputStream();
            输出流服务器输出 = socket.getOutputStream();
            serverOut.write(postCommand.getBytes());
            整数 n = 0，计数 = 1；
            字节[]缓冲区=新字节[4096]；
            做
            {
                如果（n！= 0）
                    System.out.println(new String(buffer, 0, n));
                serverOut.write(("foo" + count).getBytes());
            } while ((n = serverIn.read(buffer)) != -1 && count++
```

先感谢您。亲切的问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-16T01:14:55.083

您的客户端未发送有效的 HTTP 1.1。没有内容长度标头，因此 Servlet 无法知道何时停止读取。没有实际的流结束，因为 HTTP 客户端必须保持连接打开才能读取响应。

使用 HttpURLConnection。

# android - logcat 警告消息：Android 中的“非活动 InputConnection 上的 showStatusIcon”

> ID：15719452
> 
> 赞同：1
> 
> 时间：2013-03-30T14:11:21.957
> 
> 标签：android, service, connection, warnings

**应用程序周期：**
我有一个`mainActivity`，它启动一个服务，与之绑定，`finish()`X 秒后，绑定应该被打破，但服务应该继续运行。
具有特定触发器的服务将再次启动 MainActivity（不会调用 startService，我检查该服务是否已经存在）。

因此，在第一次 mainActivity 完成时，不会出现警告，而在第二次则出现警告。
我尝试删除所有相关的“绑定”调用，因此不会进行绑定并且警告仍然出现，它给我们留下了一个选择：是因为我启动了服务而不是停止它吗？如果是这样，如果没有收到此消息，我应该怎么做？

我使用以下代码启动服务：

```
Intent intent = new Intent(getApplicationContext(), LockerService.class);
intent.addCategory("LockerServiceTag");
startService(intent); 
```

停止来自另一个活动并且不相关，因为它肯定不是问题。

我**不想**在退出时停止服务。

任何见解为什么会发生此警告消息？

# jquery - jQuery 1.9.1 中的“TypeError：jQuery.easing[this.easing] 不是函数”

> ID：15719456
> 
> 赞同：9
> 
> 时间：2013-03-30T14:11:42.623
> 
> 标签：jquery, jquery-ui, jquery-plugins

几个月来第一次（脸红），我升级了我的 jQuery 东西。我现在在：

*   jquery-1.9.1.js
*   jquery-ui-1.10.2.custom.js（使用 ThemeRoller，并包含所有组件，包括 Effects Core，在其描述中提到了缓动）

我还升级到了最新版本的 jquery.multiselect 和 jquery.multiselect.filter 插件。当我尝试关闭其中一个多选菜单时，出现此错误：

```
TypeError: jQuery.easing[this.easing] is not a function
jquery-1.9.1.js (line 9033) 
```

请注意，虽然我在发生错误时使用了多选插件，但实际错误在主 jQuery 文件中。代码是：

```
/*9031*/ if ( this.options.duration ) {
/*9032*/   this.pos = eased = jQuery.easing[ this.easing ](
/*9033*/     percent, this.options.duration * percent, 0, 1, this.options.duration
/*9034*/   );
/*9035*/ } 
```

我忘了更新一些文件吗？谷歌搜索，其他有同样抱怨的人似乎都在尝试使用某种额外的缓动插件，但我不是。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-08-15T04:37:56.767

首次升级到 jQuery 1.9.+ 时，整个站点的各种动画中可能会发生此错误，因为**缓动效果名称已更改！**

请参阅[http://api.jqueryui.com/easings/](http://api.jqueryui.com/easings/) 没有帮助的是 jQueryUI.com 站点中的旧示例尚未更新，导致人们认为旧的动画示例名称是正确的。

**示例：** 手风琴面板“bounceslide”动画现在是一个名为“ *easeOutBounce* ”的关闭版本。在撰写本文时，字符串“bounceslide”仍在网站的示例中：http: [//api.jqueryui.com/accordion/#option-animate](http://api.jqueryui.com/accordion/#option-animate)。

在遵循动画类型中提到的超链接并在我的代码中尝试新名称后，我才意识到动画名称已经改变。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-11-07T01:23:39.440

包括：

```
<script type="text/javascript" src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script> 
```

注意：如果需要，请更新 jquery UI 版本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-19T10:38:00.683

## 无效的第二个参数问题

如果这有助于有人像我遇到此错误时那样偶然发现这个问题，我将添加另一个可能的解决方案。我的错误是由于我的`fadeIn`函数的第二个参数不是在动画完成时执行的“回调”函数。如果第二个参数不是函数，jQuery 期望它是一种缓动类型。我的第二个论点错误地是一个对象——*我认为它是一个函数*。

所以，对我来说，

```
return {
  enter: function(element,classes,done){ //classes variable incorrectly added, making done an object
    element.fadeIn(1000,done);
  }
}; 
```

变成：

```
return {
  enter: function(element,done){ //remove classes variable as wasn't right for this situation - done is now a function
    element.fadeIn(1000,done);
  }
}; 
```

请注意，传递给我的匿名`enter`函数的参数更改。对我来说重要的是，这些变量是 AngularJS 注入，所以它们的顺序很重要，而不是它们的名字。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-30T12:26:58.320

当错误地使用效果方法时，**参数反转**可能会引发错误，`.show(duration, easing)`因为它会导致调用无效缓动。

正确的符号是`.show(easing, duration)` [https://api.jquery.com/show/](https://api.jquery.com/show/)

```
var duration = 'slow', easing = 'linear';
$("#correct").click(function() {
  $("p").show(duration, easing);
});
$("#error").click(function() {
  $("p").show(easing, duration); // fails -> see error in console
});
```

```
p { background: yellow; }
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
$("p").show(
<button id="correct">duration, easing</button>
<button id="error">easing, duration -> ERROR</button>
)
<p style="display: none">Hello</p>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-21T07:42:44.137

这与版本完全无关。

我有这段代码并得到了同样的错误：

```
$("#consoleBtn").click(function(){
    $("#consolePanel").toggle("display", {  from : { display: "block" }, to : { display: "none" } });
}); 
```

问题是我传递给切换函数的参数。所以我改为：

```
$("#consoleBtn").click(function(){
    $("#consolePanel").toggle();
}); 
```

所以在调用 jQuery-api 时要注意传递给你的函数的参数。希望这可以帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-18T13:20:22.457

感谢@Legionar 的评论，升级到他建议的版本`1.13`对我有用：

```
https://github.com/ehynds/jquery-ui-multiselect-widget/archive/1.13.zip 
```

**在此版本中**更新**`outerHeight()`，函数的使用导致小部件定位错误，因为它错过了 css 位置`top`，将第 573 行更改为以下将解决问题：**

 **```
top: pos.top + button.outerHeight(false), 
```**

# php - PHP：我无法向多个收件人发送电子邮件

> ID：15719458
> 
> 赞同：1
> 
> 时间：2013-03-30T14:11:57.213
> 
> 标签：php, email

我检查了 php 手册，但仍然无法让我的脚本工作

如果我删除密件抄送行，邮件将转到 $to1 但使用密件抄送行，它无处可去

这是代码：

```
// email stuff
$to1 = "address1@mail.com";
$to2 = "address2@mail.com";
$from = "noreply@mail.com"; 
$subject = "Subject"; 
$message = "message";

// a random hash will be necessary to send mixed content
$separator = md5(time());

// carriage return type (we use a PHP end of line constant)
$eol = PHP_EOL;

// main header
$headers  = "To: ".$to1.$eol;
$headers .= "From: ".$from.$eol;
$headers .= "Bcc: ".$to2.$eol;
$headers .= "MIME-Version: 1.0".$eol; 
$headers .= "Content-Type: multipart/mixed; boundary=\"".$separator."\"".$eol;

// no more headers after this, we start the body! //

$body = "--".$separator.$eol;
$body .= "Content-Transfer-Encoding: 7bit".$eol;
$body .= "This is a MIME encoded message.".$eol;

// message
$body .= "--".$separator.$eol;
$body .= "Content-Type: text/html; charset=\"iso-8859-1\"".$eol;
$body .= "Content-Transfer-Encoding: 8bit".$eol;
$body .= $message.$eol;

// send message
mail($to1, $subject, $body, $headers); 
```

如果有人有想法，非常感谢

# android - 解析json对象和数组android

> ID：15719460
> 
> 赞同：2
> 
> 时间：2013-03-30T14:12:01.997
> 
> 标签：android, json, arrays

我有这个 JSON 想要进入我的 android 应用程序

```
{

    "json":{

        "albums":[{"id":"1","name":"Best Sumer colections","singer":"Dj Tiresto","genre":"Trance","mix":"yes","thumb":"alb1.png","songs":
                                            [
                                             {"song":"Nothins else1","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                                             {"song":"Nothins else2","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                                             {"song":"Nothins else3","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                                             {"song":"Nothins else4","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                                             {"song":"Nothins else5","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                                             {"song":"Nothins else6","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},

                                                                                                                                 ]
                  },
                  {"id":"2","name":"Best Sumer colections","singer":"Dj Tiresto","genre":"Trance","mix":"yes","thumb":"alb1.png","songs":
                  [
                   {"song":"Nothins else1","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else2","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else3","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else4","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else5","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else6","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},

                   ]
                  },
                  {"id":"3","name":"O viatza","singer":"Maria Bieshu","genre":"Trance","mix":"no","thumb":"alb1.png","songs":
                  [
                   {"song":"Nothins else1","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else2","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else3","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else4","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else5","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else6","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},

                   ]
                  },
                  {"id":"4","name":"De petrecere","singer":"Gerghe tzopa","genre":"Trance","mix":"no","thumb":"alb1.png","songs":
                  [
                   {"song":"Nothins else1","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else2","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else3","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else4","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else5","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else6","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},

                   ]
                  },
                  {"id":"5","name":"De petrecere","singer":"Gerghe tzopa","genre":"Trance","mix":"no","thumb":"alb1.png","songs":
                  [
                   {"song":"Nothins else1","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else2","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else3","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else4","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else5","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else6","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},

                   ]
                  },
                  {"id":"6","name":"De petrecere 2013","singer":"Gerghe tzopa","genre":"Trance","mix":"no","thumb":"alb1.png","songs":
                  [
                   {"song":"Nothins else1","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else2","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else3","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else4","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else5","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},
                   {"song":"Nothins else6","artist":"ionsuruceanu","mp3":"mp3_URL","mp4":"mp4_URL","thumb":"alb1.png"},

                   ]
                  }

        ]

    }

} 
```

但我只是`Reading a NULL string not supported here.`从 logcat 得到的。所以这是我用来解析 json 的代码：

```
// Creating JSON Parser instance
        JSONParser jParser = new JSONParser();

        // getting JSON string from URL
        JSONObject json = jParser.getJSONFromUrl(url);

        try {
            // Getting Array of albums

            albums = json.getJSONArray(TAG_ALBUMS);

            // looping through All albums
            for(int i = 0; i < albums.length(); i++){
                JSONObject c = albums.getJSONObject(i);

                // Storing each json item in variable
                String album_id = c.getString(TAG_ID);
                String album_name = c.getString(TAG_NAME);
                String album_singer = c.getString(TAG_SINGER);
                String album_genre = c.getString(TAG_GENRE);
                String album_thumb = c.getString(TAG_THUMB);

                // songs are again JSON Object
                JSONObject songs = c.getJSONObject(TAG_SONGS);
                String artist = songs.getString(TAG_SONG_ARTIST);
                String mp3 = songs.getString(TAG_SONG_MP3);
                String mp4 = songs.getString(TAG_SONG_MP4);
                String song_thumb = songs.getString(TAG_SONG_THUMB);
                String song_title = songs.getString(TAG_SONG_TITLE);
                Log.v("--", "Albums \n"+" "+album_id+" "+album_name+" "+ album_genre+" "+album_singer+" "+album_thumb);
            }

        } catch (JSONException e) {
            e.printStackTrace();
        } 
```

所以谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:19:55.990

**`JSONArray songs = c.getJSONArray(TAG_SONGS);`**

**`songs`**是一个 JSONObjects 数组，您应该以与解析相同的方式处理它**`albums`**。

# c++ - OpenGL程序未到达主程序

> ID：15719470
> 
> 赞同：0
> 
> 时间：2013-03-30T14:13:35.853
> 
> 标签：c++, opengl, dll, include

我正在使用 Visual Studio 2010 在 C++ 中编写一个 3D 应用程序，在使用断点测试代码后，我发现没有达到主要方法。cmd 窗口正在打开，我相信正在加载 dll，但是我在输出窗口底部收到消息

> 线程“Win32 线程”(0x8a8) 已退出，代码为 -1073741510 (0xc000013a)。程序“[4112] 3dApp_1.exe: Native”已退出，代码为 -1073741510 (0xc000013a)。

如果有人需要更多信息来帮助，请告诉我，我很难知道要添加什么而不只是将程序放在这里。谢谢。

编辑：由于某种原因，程序在源文件目录中存在 .txt 文件和 .obj 的问题，因此删除它允许创建 openGL 窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:01:40.430

您需要更改设置中的入口点（请参阅[此处](http://progzoo.net/wiki/Creating_a_Glut_project_in_Visual_Studio_2010)或[此处](http://www.just.edu.jo/~yaser/courses/cs480/opengl/Using%20OpenGL%20and%20GLUT%20in%20Visual%20Studio.htm)）。

转到项目属性/配置属性/链接器/高级/入口点。将入口点设置为 mainCRTStartup。

# nullpointerexception - 我无法创建 SipProvider-MjSip 库

> ID：15719475
> 
> 赞同：0
> 
> 时间：2013-03-30T14:13:43.843
> 
> 标签：nullpointerexception, filenotfoundexception, createinstance, mjsip

我是 MjSip 的新手，我想创建一个 SipProvider 类的实例。所以我写了这个小代码但得到了一些错误：

```
sip_provider = new SipProvider("192.168.0.254",5060); 
```

这是错误堆栈：

```
java.io.FileNotFoundException: log\192.168.0.254.5060_events.log (The system cannot find the path specified)
at java.io.FileOutputStream.open(Native Method)
at java.io.FileOutputStream.<init>(Unknown Source)
at java.io.FileOutputStream.<init>(Unknown Source)
at org.zoolu.tools.Log.<init>(Log.java:112)
at org.zoolu.tools.RotatingLog.<init>(RotatingLog.java:73)
at org.zoolu.sip.provider.SipProvider.initLog(SipProvider.java:295)
at org.zoolu.sip.provider.SipProvider.<init>(SipProvider.java:224)
at local.ua.UA.main(UA.java:539)

java.io.FileNotFoundException: log\192.168.0.254.5060_messages.log (The system cannot find the path specified)
    at java.io.FileOutputStream.open(Native Method)
    at java.io.FileOutputStream.<init>(Unknown Source)
    at java.io.FileOutputStream.<init>(Unknown Source)
    at org.zoolu.tools.Log.<init>(Log.java:112)
    at org.zoolu.tools.RotatingLog.<init>(RotatingLog.java:73)
    at org.zoolu.sip.provider.SipProvider.initLog(SipProvider.java:296)
    at org.zoolu.sip.provider.SipProvider.<init>(SipProvider.java:224)
    at local.ua.UA.main(UA.java:539)
Exception in thread "main" java.lang.NullPointerException
    at org.zoolu.tools.Log.flush(Log.java:147)
    at org.zoolu.tools.Log.println(Log.java:177)
    at org.zoolu.sip.provider.SipProvider.printLog(SipProvider.java:1161)
    at org.zoolu.sip.provider.SipProvider.initLog(SipProvider.java:298)
    at org.zoolu.sip.provider.SipProvider.<init>(SipProvider.java:224)
    at local.ua.UA.main(UA.java:539) 
```

我使用的是局域网，IP 地址是有效的。为什么会这样？？请帮我！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-10T13:34:15.313

没有日志文件夹。您需要创建一个文件夹。或者你应该给出一个特定的目录。

```
 String home = System.getProperty("user.home");            
       File f = new File(home +"//"+SipStack.log_path);           
       try {
            if (!f.exists() || !f.isDirectory()) 
            {                                                       
                JOptionPane.showMessageDialog(null,home +"//"+SipStack.log_path + " dosyası oluşturulacak");
                File dir = new File(home +"//"+SipStack.log_path);
                dir.mkdir();
            }
       } catch (Exception e) {
           JOptionPane.showMessageDialog(null,"Log klasörü oluşturulamadı");
       }
   } catch (Exception ex) {
   }

  if (SipStack.debug_level>0)
  { 
     String home = System.getProperty("user.home");           
     String filename=home+"//"+SipStack.log_path+"//"+via_addr+"."+host_port;
     log=new RotatingLog(filename+"_events.log",SipStack.debug_level,SipStack.max_logsize*1024,SipStack.log_rotations,SipStack.rotation_scale,SipStack.rotation_time);
     message_log=new RotatingLog(filename+"_messages.log",SipStack.debug_level,SipStack.max_logsize*1024,SipStack.log_rotations,SipStack.rotation_scale,SipStack.rotation_time);
  } 
```

# php - How to Upload Image files Using Codeigniter?

> ID：15719477
> 
> 赞同：-3
> 
> 时间：2013-03-30T14:14:23.073
> 
> 标签：php, file, codeigniter, upload

How to Upload Image files Using Codeigniter? [Codeigniter's Upload class Library](http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html)

gives no hint for how to upload a image using simple form and upload the image to it's images folder which is present in the root directory...

Thanks in advance..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T18:31:23.453

Here is an example. Hope this would help you :)

in your controller. lets say `upload.php`

```
public function upload() {
    if($this->input->post('upload')) {

        $config['upload_path'] = APPPATH . 'your upload folder name here/'; 
        $config['file_name'] = filename_here;
        $config['overwrite'] = TRUE;
        $config["allowed_types"] = 'jpg|jpeg|png|gif';
        $config["max_size"] = 1024;
        $config["max_width"] = 400;
        $config["max_height"] = 400;
        $this->load->library('upload', $config);

        if(!$this->upload->do_upload()) {               
            $this->data['error'] = $this->upload->display_errors();
        } else {
            //success                                      
        }  
    }
} 
```

Then in your view

```
<?php echo form_open_multipart('upload'); ?>    
<?php echo form_upload('userfile'); ?><br />
<?php echo form_submit('upload', 'Upload');?>    
<?php echo form_close(); ?> 
```

# java - Is there a way to assign a jogl shape to a variable?

> ID：15719478
> 
> 赞同：0
> 
> 时间：2013-03-30T14:14:30.843
> 
> 标签：java, jogl, 2d-games

I am trying to create the game pong and drew a paddle with 4 vertices in jogl. I wanted to assign that jogl shape to a variable in order to test if it intersects with the ball which is just a jogl point. It would be helpful if there was something with a .intersects method but that is not necessary.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T01:14:50.657

It appears that there is no way to do this effectively in jogl.... You could assign a java rectangle or a rect to it. But, both won't be nearly as effective as they are not exact. The java rectangle matches the coordinates that are used by java not jogl. So if you matched them I suppose that would work. With the jogl rect, it is not precise and hard to assign vertices to it.

# sql - SQL表更改顺序

> ID：15719480
> 
> 赞同：2
> 
> 时间：2013-03-30T14:14:50.973
> 
> 标签：sql, delphi

我在 DBGrid 中显示了一个表格，排序顺序基于一个序列字段，我希望能够一次将一个项目向上或向下移动一个位置。我在这里进行了研究，找不到完全符合我需要的东西。

当我禁用排序顺序进行更改时，问题就出现了，列表恢复到最初输入数据的顺序，所以我丢失了下一个项目。

这就是我所拥有的...

```
Folder  Sequence
----------------
Buttons   1
Thread    2  << Current Row
Cotton    3
Rags      4 
```

单击我想要的“MoveDown”按钮...

```
Folder  Sequence
----------------
Buttons   1
Cotton    2
Thread    3  << Current Row
Rags      4 
```

但是 - 当我删除序列上的排序顺序时，我得到了输入项目的顺序......

```
Folder  Sequence
----------------
Buttons   1
Cotton    2
Rags      4
Thread    3  << Current Row 
```

到目前为止，我的尝试被证明非常麻烦，包括将 Rows 加载到列表框中，将它们洗牌，然后将它们写回 Table。必须是更好的方法，但这超出了我目前对 SQL 的掌握。

有人可以指点我去的方向吗？

如果在 SQL 中很难做到，我不想给任何人带来太多麻烦，因为我总是可以使用列表框方法。如果对 SQL 专家来说相对简单，那么我很想看看 SQL 文本。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T16:10:13.883

我的解决方案基于按`Sequence`字段排序的 TDataSet：

```
MyDataSet.Sort := 'Sequence'; 
```

*然后在当前行*和（向下）/ （向上）记录之间交换`Sequence`字段，例如：*`Next``Prior`*

 *```
type
  TDBMoveRecord = (dbMoveUp, dbMoveDown);

function MoveRecordUpDown(DataSet: TDataSet; const OrderField: string;
  const MoveKind: TDBMoveRecord): Boolean;
var
  I, J: Integer;
  BmStr: TBookmarkStr;
begin
  Result := False;
  with DataSet do
  try        
    DisableControls;
    J := -1;
    I := FieldByName(OrderField).AsInteger;
    BmStr := DataSet.Bookmark;
    try
      case MoveKind of
        dbMoveUp: Prior;
        dbMoveDown: Next;
      end;
      if ((MoveKind = dbMoveUp) and BOF) or ((MoveKind = dbMoveDown) and EOF) then
      begin
        Beep;
        SysUtils.Abort;
      end
      else
      begin
        J := DataSet.FieldByName(OrderField).AsInteger;
        Edit;
        FieldByName(OrderField).AsInteger := I;
        Post;
      end;
    finally
      Bookmark := BmStr;
      if (J <> -1) then
      begin
        Edit;
        FieldByName(OrderField).AsInteger := J;
        Post;
        Result := True;
      end;
    end;
  finally
    EnableControls;
  end;
end; 
```

***用法：***

```
MoveRecordUpDown(MyDataSet, 'Sequence', dbMoveDown);    
// or     
MoveRecordUpDown(MyDataSet, 'Sequence', dbMoveUp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T14:41:38.167

如果我理解正确，你想找到“下一个序列项目”吗？也许你可能会做一些类似“获得第一个最小值，然后是 X”的事情？这样就可以通过prev了。行序列值。*

# php - 如何使用 htaccess 更改语言 URL 以清除 URL

> ID：15719492
> 
> 赞同：0
> 
> 时间：2013-03-30T14:15:53.730
> 
> 标签：php, .htaccess, url, mod-rewrite

我想在我的网站上使用 Clean URL htaccess

这是 SEO 的重要 URL，如何更改我的 URL

```
http://www.mysite.com/?do=change&lang=en  to  http://www.mysite.com/en/ 
```

文件functions.php

```
include './lang/choose.lang.php';

function Browser_Lang(){
$lang = substr($_SERVER['HTTP_ACCEPT_LANGUAGE'],0,2);
switch ($lang){
    case 'ar': // Arabic
        return 'ar';
        break;
    default:   // English for other languages
        return 'en';
        break;
}
} 
```

文件选择.lang.php

```
if($_REQUEST['do'] == 'change'){
$lang = Secure($_GET['lang']);
Set_Cookie('language',$lang,time()+(3600*24*30*12));
}
if(isset($_COOKIE['language'])){
    $lang = Read_Cookie('language');
}else if(!isset($_COOKIE['language']) && isset($_SERVER['REMOTE_ADDR'])){
    $lang = Browser_Lang();
}else{
    $lang = 'en';
}

switch ($lang){
    case 'ar': // Arabic
        include 'ar.lang.php';
        break;
    default:   // English for other languages
        include 'en.lang.php';
        break;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:23:36.390

你想知道.htaccess 中的重写规则吗？这可能是这样的：

```
RewriteRule ^(en|ar)/?$ /?do=change&lang=$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T14:32:10.320

重写规则：

```
RewriteEngine On
RewriteRule ^([^/]*)/$ /?do=change&lang=$1 [L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T15:31:04.707

要从 to 重定向`http://www.mysite.com/?do=change&lang=en`，`http://www.mysite.com/en/`您必须捕获查询字符串参数`lang`并将[`RewriteCond`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)其插入[`RewriteRule`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)

```
RewriteCond %{QUERY_STRING} lang=(.+)
RewriteRule ^$ /%1/ [R,L] 
```

# google-maps - 如何通过map.event.addListener将参数传递给外部函数

> ID：15719495
> 
> 赞同：0
> 
> 时间：2013-03-30T14:16:10.210
> 
> 标签：google-maps, google-maps-api-3

我想向谷歌地图事件添加侦听器，但~~不使用匿名函数，而是使用命名的外部函数~~，因为这发生在循环内，我不想在那里定义匿名函数，而是使用命名的外部函数：

**不是：**

```
for (...) {
    googleMap.event.addListener(instance, eventName, function() {...});
} 
```

**而是…… 像：**

```
doSomething = function(parameter1, parameter2...) {
    ...
}

for (...) {
    googleMap.event.addListener(instance, eventName, params, doSomething);
} 
```

当“实例”是谷歌地图标记时，我可以使用将参数添加到标记`marker.set(paramName, paramValue)`，然后通过访问事件处理函数内部的参数`this.paramName`，但是当我有任何其他方法可以将值传递给事件处理函数不想使用匿名的？

欢迎任何建议，罗马。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-10T00:01:00.513

我有同样的问题。这是一个解决方案。通过使用此处描述的模式，它真正避免了循环中的创建函数问题

[在 JavaScript 中，为什么在循环中创建函数会造成计算上的浪费的具体原因是什么？](https://stackoverflow.com/questions/10834740/in-javascript-what-are-specific-reasons-why-creating-functions-within-a-loop-ca)

我称之为“函数工厂”模式。

其他成分是函数内部的“this”指的是引发函数的对象（地图上被点击的东西，或者其他什么），并且因为 JavaScript 是完全动态的，你可以随意附加额外的属性到这个东西单击它，并通过在函数内调用 this.blah 来查询它们

```
function doSomethingHandlerFactory(){
var f = function(event){
    //do something, for example call a method on a property we attached to the object which raised the event
    this.blah.clicked(event);
};
return f;
}

//add a property to the google overlay object (for example a polyline which we've already set up)
thePolyline.blah = ...;

//get a handle for a function, attach the event (in this case to a polyline), and keep  
//a reference to the event (in case we want to call removeListener later).  The latter
//is optional.
var f = doSomethingHandlerFactory();
var ev = google.maps.event.addListener(thePolyline, 'click', f); 
```

我希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T14:28:33.067

如何将您的命名函数包装在匿名函数中：

```
google.maps.event.addListener(instance, eventName, function() { doSomething(parameter1, parameter2,...) }); 
```

# c# - 获取 html 元素内的文本

> ID：15719500
> 
> 赞同：0
> 
> 时间：2013-03-30T14:16:32.573
> 
> 标签：c#, xpath, html-agility-pack

我正在使用 HTMLAgilityPack 在某些节点的列表中获取文本。基本上我正在读出一个带有以下 HTML 的 HTML 页面：

```
<div class="video-overview yt-grid-fluid">
   <h3 class="video-title-container">
       <span class="yt-badge-std">
            WATCHED
        </span>
      <a href="/watch?v=S5FCdx7Dn0o&amp;list=FLArRQZAMoAgECBIOn08gNeA&amp;index=1" title="Bob Marley - Buffalo soldier" class="yt-uix-tile-link yt-uix-sessionlink" data-sessionlink="ei=c9tWUb3eJaOzhgG6kYHYAg&amp;feature=plpp_video">
        <span class="title video-title" dir="ltr">Bob Marley - Buffalo soldier</span>
      </a>
   </h3>

      <p class="video-details">
        <span class="video-owner">
             by <span class="yt-user-name " dir="ltr">Pgroenberg</span>
        </span>

          <span class="video-view-count">
            44,342,136 views
          </span>
      </p>
  </div> 
```

我想得到文本“鲍勃马利 - 布法罗士兵”，它在里面`<span class="title video-title" dir">`。

我似乎找不到正确的模式：

```
string expression = @"//span[@class='title video-title' and @dir='ltr']/text()";
HtmlNodeCollection hnc = htmlDoc.DocumentNode.SelectNodes(expression); 
```

hnc 将为空，因为没有节点与表达式匹配。为什么我的表达不起作用？

# wpf - WPF: put an icon on a radWindow programatically

> ID：15719502
> 
> 赞同：1
> 
> 时间：2013-03-30T14:16:51.920
> 
> 标签：wpf, image, telerik, icons, radwindow

I want to put an icon on the top left of a radWindow programatically

my code is like this

> ```
>  RadWindow radWindow = new RadWindow();
> radWindow.Header = "The header";
> radWindow.Icon = new Image()
>    {
>    Source = new BitmapImage(new Uri("../ressources/enregistrer.png", UriKind.Relative))
>    };
> radWindow.Show(); 
> ```

but the icon dont show up

does anyone have an idea ?

**EDIT**

This is the architecture on my project: The file from where the above code is taken is circled in red The ressource file is circled in green

![enter image description here](../Images/86aa79d536ca80ad1c0eb58f7331fa84.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-30T07:07:11.907

```
<telerik:RadWindow.Icon>
    <Image Source="pack://application:,,,/ressources/enregistrer.png" Height="18"/>
</telerik:RadWindow.Icon>

// this seems to work.  You will need to provide a size. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T16:57:40.260

I dont know why my solution above did not work but I found a workaround like this

```
RadWindow radWindow = new RadWindow();
radWindow.Header = "The header";
radWindow.Icon = new Image()
{
                    Source = new BitmapImage(new Uri("pack://application:,,,/ressources/enregistrer.png", UriKind.RelativeOrAbsolute))
    }
 radWindow.Show(); 
```

# c++ - cc1.exe无法初始化修改过的dragonegg.dll

> ID：15719504
> 
> 赞同：2
> 
> 时间：2013-03-30T14:16:56.380
> 
> 标签：c++, c, gcc, mingw, llvm

我想从 C 和 C++ 源代码生成 LLVM 位码而不是 LLVM IR。Dragonegg 的原始版本可以正常工作。由于它没有发出 LLVM 位码的功能，我尝试添加它，但它不起作用。我的修改有什么问题？

> gcc -fplugin=dragonegg.dll -fplugin-arg-dragonegg-emit-llvm -I ..\include -c test.c
> 
> cc1.exe：错误：无法初始化插件dragonegg.dll

我把我的补丁贴到了要点上。 [https://gist.github.com/vroad/1f2dcd2c37e03005a349](https://gist.github.com/vroad/1f2dcd2c37e03005a349)

我用支持插件的 gcc for Windows 编译了最新的 LLVM 和 dragonegg。

SourceForge.net：MinGW - Windows 的极简主义 GNU：http: [//sourceforge.net/mailarchive/message.php ?msg_id=28248366](http://sourceforge.net/mailarchive/message.php?msg_id=28248366)

# ruby-on-rails - 如何将登录系统锁定在 Rails 中？

> ID：15719507
> 
> 赞同：0
> 
> 时间：2013-03-30T14:17:11.800
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, locking

我想阻止除我之外的所有用户在一段时间内登录系统。我怎样才能做到这一点？

就像我以 hello.world@email.com 身份登录并且我具有从大 CSV 文件（大约 20k 记录）导入数据的功能，所以我想防止除了 hello.world@email.com 之外的其他用户在数据导入时登录.

我尝试使用：

*   将所有用户的标志设置为已锁定：当系统增长并拥有大量用户时，此标志不好

*   添加一个类变量来`ApplicationController`点`@@system_lock_only_for`赞并将 hello.world@email.com 保留在里面并点`before_filter`赞

    ```
    if @@system_lock_only_for && @@system_lock_only_for != current_user.email
        redirect_to somewhere_path
    end 
    ```

    但我不确定这是最好的方法。

我怎样才能更好地解决这个问题？

PS。我正在使用带有 Rails 3.2 的设计

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T14:22:59.933

如果您不希望用户访问它，那么您可以关闭 Web 服务器并从命令行进行导入。

或者，您可以设置一个全局变量，检查每个请求并找出维护页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T14:23:27.077

尝试这个：

我们可以使用会话进行身份验证。

参考这个链接： [https ://github.com/binarylogic/authlogic/blob/master/lib/authlogic/session/magic_columns.rb#L65](https://github.com/binarylogic/authlogic/blob/master/lib/authlogic/session/magic_columns.rb#L65)

```
def last_request_update_allowed?
  action_name != "check_session_timed_out"
end 
```

会话过期时使用**redirect_tosomewhere_path 。**而已。

# python - 类实例中 list.append 和列表添加的区别

> ID：15719509
> 
> 赞同：0
> 
> 时间：2013-03-30T14:17:36.233
> 
> 标签：python, list, append, instance

我希望我能更好地为这个问题命名。
无论如何，这里是 test.py

```
class test(object):
    tags = []
    def __init__(self):
       self.tags= self.tags + ['tag']

testA= test()
testB = test()

print testA.tags 
```

这是输出：

> ['标签']

现在我将班级测试更改为

```
class test(object):
    tags = []
    def __init__(self):
        self.tags.append('tag') 
```

这是输出：

> ['标签'，'标签']

在这两种情况下，我都期待第一个结果`['tag']`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:22:43.097

`self.tags + ['tag']`创建一个**新**对象。然后分配给`self.tags`.

`self.tags.append`使用类中的相同`tags`对象。所以所有对象共享同一个`tags`对象并附加到它。

# php - 内联渲染 FineUploader 按钮

> ID：15719513
> 
> 赞同：0
> 
> 时间：2013-03-30T14:17:49.757
> 
> 标签：php, css, fine-uploader

所以我正在使用 FineUploader，它工作得非常好。不过只有一个问题。我一直在尝试内联渲染它，以便我可以在它之前和之后有文本。

我尝试使用`<span id='btnupload'></span>`以下 CSS：

```
#btnupload {
   display:inline-block;
   *display:inline;
   width:150px;
} 
```

但它似乎打破了上传者。关于如何做到这一点的任何建议？

PS 我不需要拖放，甚至不需要显示进度条和上传列表。我只想让按钮工作，没有其他元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T13:22:02.327

您现在的问题似乎是隐藏所有提供的 UI 元素。请注意，Fine Uploader 有两种模式。您正在使用的模式包括默认但可自定义的 UI，即 FineUploader 模式。如果您只想使用 API 并确保 Fine Uploader 不会创建任何 UI 元素，请改用 FineUploaderBasic 模式。查看[自述文件](http://docs.fineuploader.com)了解更多详细信息。

# cuda - cuda - 循环展开问题

> ID：15719515
> 
> 赞同：1
> 
> 时间：2013-03-30T14:18:16.293
> 
> 标签：cuda, nvidia, loop-unrolling

我有一个带有 a 的内核，`#pragma unroll 80`我正在使用 NVIDIA GT 285、计算能力 1.3、网格架构运行它：`dim3 thread_block( 16, 16 )`并且`dim3 grid( 40 , 30 )`它运行良好。

当我尝试使用 NVIDIA GT 580、计算能力 2.0 和上述网格架构运行它时，它运行良好。

当我将 GT 580 上的网格架构更改为

`dim3 thread_block( 32 , 32 )`并且`dim3 grid( 20 , 15 )`，因此产生与上述相同数量的线程，我得到不正确的结果。

如果我在 GT 580 中删除`#pragma unroll 80`或替换它，它工作正常。`#pragma unroll 1`如果我不这样做，那么内核就会崩溃。

有谁知道为什么会这样？先感谢您

**编辑**：检查两个设备上的内核错误，我得到“无效参数”。当我搜索此错误的原因时，我发现当网格和块的尺寸超出其限制时会发生这种情况。但对我来说情况并非如此，因为我每个块使用 16x16=256 个线程和 40x30=1200 个总块。据我所知，这些值位于 GPU 网格的边界内，计算能力为 1.3。我想知道这是否与我遇到的循环展开问题有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:34:42.460

我弄清楚了问题所在。

在修复了一些错误后，我收到了“启动请求资源过多”错误。对于循环展开，每个线程都需要额外的寄存器，并且我的寄存器用完了，因此错误和内核失败。每个线程需要 22 个寄存器，每个块有 1024 个线程。

通过将我的数据插入到 CUDA_Occupancy_calculator 中，它向我显示每个 SM 安排了 1 个块，在计算能力 2.0 设备上为整个块留下了 32678 个寄存器。

22 个寄存器 * 1024 个线程 = 22528 个寄存器<32678，这应该可以工作。但是我使用 nvcc -arch sm_13 使用每个 SM 16384 个寄存器的 CC 1.3 特性进行编译

我使用 nvcc -arch sm_20 编译，利用了 32678 个寄存器，对于所需的 22528 来说绰绰有余，现在它工作正常。感谢大家，我了解了内核错误。

# python - 低于 1.6 的 numpy 版本的自定义 count_nonzero 函数

> ID：15719519
> 
> 赞同：0
> 
> 时间：2013-03-30T14:19:21.330
> 
> 标签：python, numpy, scipy

我编写了一个小程序，我目前正在使它在不同的操作系统上工作。我的程序严重依赖于numpy 版本 1.6 引入的函数**count_nonzero 。**

我的主要工作站是带有 numpy（1.6.2 版）和 scipy（0.11 版）的 Debian Linux。但是在 Windows 上，设置可能涉及低于 1.6 的旧 numpy 版本，其中**count_nonzero**命令不可用。因此，我需要一个自定义**count_nonzero**函数，该函数适用于具有较旧 numpy 版本的系统。

> def count_nonzero(self,array):
> 
> ```
>  if hasattr(numpy,'count_nonzero'):
>         return numpy.count_nonzero(array)
>     elif hasattr(scipy,'count_nonzero'):
>         return scipy.count_nonzero(array)
>     else:
>         # Alternative ? 
> ```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:34:00.353

这应该可以解决问题：

```
(array != 0).sum() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T14:34:52.693

啊，好吧，我找到了解决方案，但我愿意接受更聪明的选择:)

```
numpy.size(array[array!=0]) 
```

# c# - WPF InnerShadow 设计问题

> ID：15719520
> 
> 赞同：1
> 
> 时间：2013-03-30T14:19:23.957
> 
> 标签：c#, .net, wpf, 3d, border

我在使用元素创建`3D`类似效果时遇到问题。`Border`我写了以下标记。但这不会`3D effect`像以下 URL 中的屏幕截图那样正确生成。

截图图片[网址](http://imm.io/11j2M)：

```
<Window x:Class="MainWindow"  
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" Title="MainWindow" 
    Height="400" Width="225" WindowStyle="None" Topmost="True" 
    AllowsTransparency="True" Background="Transparent">

<Border x:Name="border" Margin="10" CornerRadius="10,10,10,10" BorderBrush="#111111" BorderThickness="0" Background="#111111">
    <Border.Effect>
        <DropShadowEffect ShadowDepth="0" Direction="0" BlurRadius="15" Color="Black" Opacity="1"/>
    </Border.Effect>
    <Border x:Name="border1" Margin="5" CornerRadius="{Binding CornerRadius, ElementName=border}">
        <Border.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1" >
                <GradientStop Color="#FF373737" Offset="0"/>
                <GradientStop Color="#FF222222" Offset="0.75"/>
                <GradientStop Color="#FF373737" Offset="1"/>
            </LinearGradientBrush>
        </Border.Background>
        <Border.Effect>
            <DropShadowEffect ShadowDepth="0" Direction="0" BlurRadius="10" Color="White" Opacity="1"/>
        </Border.Effect>
    </Border>
</Border>
</Window> 
```

# javascript - Ant scriptdef - 引用外部库的 javascript

> ID：15719521
> 
> 赞同：1
> 
> 时间：2013-03-30T14:19:34.503
> 
> 标签：javascript, ant

有没有办法在 ant scriptdef 任务中使用像 jQuery 这样的外部库？我想在里面使用框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T10:27:10.427

该框架可能无法在 Ant 中以您希望的方式工作，但您可以使用 Ant FileUtils 类来导入 JavasSript，在您的`<script>`任务中是这样的：

```
eval( '' + org.apache.tools.ant.util.FileUtils.readFully(
                   new java.io.FileReader( 'yourscript.js' ) ) ); 
```

不幸的是，我不认为 Rhino`load()`方法在 Ant 中有效，所以上面看起来是最简单的解决方案。

# c# - 如何将图像控件绑定到用户选择的文件？

> ID：15719522
> 
> 赞同：1
> 
> 时间：2013-03-30T14:19:37.780
> 
> 标签：c#, xaml, windows-8, winrt-xaml

我有一个名为“img”的用户选择的图像文件。如何将我的图像控件（如下所示）绑定到此文件？

```
<Image Source = "{Binding ImagePath}" /> 
```

我写：

```
ImagePath = new Uri(img.Path); 
```

但它不起作用。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:37:40.467

加载图像后，创建一个`BitmapImage`.

```
 var bi = new BitmapImage();
 var fstream = await selectedFile.OpenAsync(FileAccessMode.Read);
 bi.SetSource(fstream);
 BImage = bi; 
```

然后确保您的`BImage`住宿通知 UI。我重命名`ImagePath`为`BImage`以澄清它不`Path`直接使用，但你可以随意调用它。

```
private BitmapImage _bImage;
public BitmapImage BImage
{
   get { return _bImage; }
   set
   {
      _bImage= value;
      NotifyPropertyChanged("BImage");
   }
} 
```

（您的 XAML）

```
<Image Source = "{Binding BImage}" /> 
```

# javascript - 使用 Javascript 加载外部 JSON

> ID：15719525
> 
> 赞同：0
> 
> 时间：2013-03-30T14:19:59.550
> 
> 标签：javascript, json, url, external

我正在尝试从一个站点捕获一些 JSON 信息。

我的第一个例子只是一个测试和工作：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
</script>
<script>
$(document).ready(function(){
$.get("http://www.w3schools.com/jquery/demo_test.asp",function(data,status){
      document.write("Data: " + data + "\n<br>Status: " + status);
    });
});
</script> 
```

但问题在于我的第二个示例：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
</script>
<script>
$(document).ready(function(){
$.get("https://btc-e.com/api/2/ltc_usd/ticker",function(data,status){
      document.write("Data: " + data + "\n<br>Status: " + status);
    });
});
</script> 
```

PS - 我正在尝试从页面获取信息以在博客中使用它:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T14:28:32.633

带有 jQ​​uery 的外部 JSON 意味着使用 JSONP。这可以通过页面返回一个 Javascript 脚本来实现，该脚本使用您需要的数据调用一个函数（您定义的）。您无法像普通 JSON 一样获取数据。所以响应需要如下所示：

```
json_callback({"ticker":{"high":0.77,"low":0.64,"avg":0.705,"vol":107049.5563,"vol_cur":151754.22482,"last":0.76,"buy":0.766,"sell":0.75811,"server_time":1364653244}}); 
```

而不是

```
{"ticker":{"high":0.77,"low":0.64,"avg":0.705,"vol":107049.5563,"vol_cur":151754.22482,"last":0.76,"buy":0.766,"sell":0.75811,"server_time":1364653244}} 
```

（该函数不会被调用`json_callback`，但每次都会有一个唯一的名称。）

This obviously relies on the server's assistance, so the server needs to be set up to support JSONP. The normal way of indicating this is by adding `callback=?` to the end of the URL, where `?` is the name of the function you want to call. If [we try this](https://btc-e.com/api/2/ltc_usd/ticker?callback=foo), you'll see that the script does not change. This indicates that the website does not support JSONP requests, so there is no way of accessing this data using JSONP.

There are various other methods of getting the data. The simplest is probably proxying the data from the external server with your own server.

# android - Intents directory and how to use it

> ID：15719527
> 
> 赞同：1
> 
> 时间：2013-03-30T14:20:04.943
> 
> 标签：android, android-intent

Hello I'm a new to programming and I trying to find out how does intent defined its directory (how android knows what is the extras to put in it).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:26:04.843

I strongly suggest you start here:

[http://developer.android.com/training/index.html](http://developer.android.com/training/index.html)

(Specifically) [http://developer.android.com/training/basics/firstapp/starting-activity.html](http://developer.android.com/training/basics/firstapp/starting-activity.html)

Or pick up "Beginning Android":

[http://www.amazon.com/Beginning-Android-Experts-Voice-Source/dp/1430224193](https://rads.stackoverflow.com/amzn/click/com/1430224193)

Google offers a fantastic set of tutorials. You should use them :)

# jquery - 相邻 DIV 的点击事件被不当触发

> ID：15719529
> 
> 赞同：0
> 
> 时间：2013-03-30T14:20:19.680
> 
> 标签：jquery, css, sprite

我在使用 CSS Sprite 的组合设置一些图标/按钮时遇到了一些麻烦，并且 DIV 与由 jQuery 动态设置的 Click 处理程序相结合。

虽然我相信我将 DIV 并排放置，并使用 jQuery 为每个 DIV 动态创建一个单击处理程序，但我发现发生的是，更靠右的 DIV 以某种方式获取其左侧 DIV 的单击处理程序除了我打算让他们拥有的处理程序之外。因此，例如，我打算用于我的“电子邮件”链接的点击处理程序除了启动新电子邮件之外，还打开了我的 YouTube 频道和我的 LinkedIn 个人资料，因为充当这些其他功能的按钮的 DIV 被定位到它的左边。谁能看到可能导致这种行为的原因？

这是我的代码：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <style>
        .icon
        {
            height: 68px;
            width: 56px;
            background-image: url('https://lh4.googleusercontent.com/-HylbRS7gQyA/UVbSTXQYs5I/AAAAAAAAAs8/5J8Ij9mr_qk/s800/CommsIconsCSSSprites.png');
            position: relative;
            cursor:hand; cursor:pointer;
        }

        .youTube
        {
            background-position: 0px 0px;
            background-color:yellow;
        }

        .linkedIn
        {
            background-position: -56px 0px;
            left:56px;
            background-color:green;
        }

        .email
        {
            background-position: -112px 0px;
            left:56px;
            background-color:blue;
        }

        .rss
        {
            background-position: -168px 0px;
            left:56px;
            background-color:red;
        }
    </style>

    <script src="//code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>

    <script type="text/javascript">

        function setCommsIcons() {
            $("#youTubeIcon").click(function () { window.open("http://www.youtube.com/user/RPPdotNet?feature=watch"); });
            $("#linkedInIcon").click(function () { window.open("http://www.linkedin.com/in/rachelppierson"); });
            $("#emailIcon").click(function () { window.location.href = "mailto:rachel.pierson@hotmail.co.uk"; });
            $("#rssIcon").click(function () { window.open("http://feeds.feedburner.com/RachelPiersonWorkInProgress"); });
        }

        function shiftImagesJustToSuitIE() {
            // Move the images up a fraction in i.e. to match other browsers
            if ($.browser.msie) {
                $.each($("#youTubeIcon, #linkedInIcon, #emailIcon, #rssIcon"), function (i, val) {
                    with (val) { val.style.pixelTop = val.style.pixelTop + 30; }
                });
            }
        }

        $(document).ready(function () {
            setCommsIcons();
            shiftImagesJustToSuitIE();
        });

    </script>

    <title></title>
</head>
<body>
    <div id="youTubeIcon" class="icon youTube" />
    <div id="linkedInIcon" class="icon linkedIn" />
    <div id="emailIcon" class="icon email" />
    <div id="rssIcon" class="icon rss" />
</body>
</html> 
```

注意：

*   DIV 上的彩色背景只是为了向我自己确认我没有不经意地把它们弄得太宽，从而使它们彼此重叠。
*   仅出于测试目的，相关代码已被分离到其自己的 HTML 页面中。它实际上完全生活在另一个地方。例如，我有一个包含对 jQuery 的引用的母版页；它不是只为这一页添加的，如显示的示例 HTML 中所示。出于隔离此错误的目的，我已将上述 HTML 分离出来。如果您将其剪切并粘贴到 HTML 页面中，上面的代码应该会运行并显示所描述的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T14:29:32.560

发生这种情况是因为您正在自行关闭 div，并且单击处理程序正在应用于目标中包含的所有 div。将它们更改为正确关闭将解决问题。

您的标记如何实际呈现：

```
<div id="youTubeIcon" class="icon youTube">
    <div id="linkedInIcon" class="icon linkedIn">
        <div id="emailIcon" class="icon email">
            <div id="rssIcon" class="icon rss">
            </div>
        </div>
    </div>
</div> 
```

您的标记应该如何编写：

```
<div id="youTubeIcon" class="icon youTube"></div>
<div id="linkedInIcon" class="icon linkedIn"></div>
<div id="emailIcon" class="icon email"></div>
<div id="rssIcon" class="icon rss"></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T15:18:51.980

总结一下，以防其他人发现自己遇到同样的问题。为了速度，我决定坚持使用 DIV，并通过 CSS 使它们显示内联块，以修复最初的错误修复后出现的格式问题。以下是最终代码的结束方式：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <style>
        .icon
        {
            height: 68px;
            width: 56px;
            background-image: url('https://lh4.googleusercontent.com/-HylbRS7gQyA/UVbSTXQYs5I/AAAAAAAAAs8/5J8Ij9mr_qk/s800/CommsIconsCSSSprites.png');
            position: relative;
            cursor:hand; cursor:pointer;
            display: inline-block;
            *display: inline;   /* just for Internet Explorer */
            zoom: 1;            /* just for Internet Explorer */
        }

        .youTube { background-position: 0px 0px; }

        .linkedIn { background-position: -56px 0px; }

        .email { background-position: -112px 0px; }

        .rss { background-position: -168px 0px; }
    </style>

    <script src="//code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>

    <script type="text/javascript">

        function setCommsIcons() {
            $("#youTubeIcon").click(function () { window.open("http://www.youtube.com/user/RPPdotNet?feature=watch"); });
            $("#linkedInIcon").click(function () { window.open("http://www.linkedin.com/in/rachelppierson"); });
            $("#emailIcon").click(function () { window.location.href = "mailto:rachel.pierson@hotmail.co.uk"; });
            $("#rssIcon").click(function () { window.open("http://feeds.feedburner.com/RachelPiersonWorkInProgress"); });
        }

        $(document).ready(function () {
            setCommsIcons();
        });

    </script>

    <title></title>
</head>
<body>
    <div id="youTubeIcon" class="icon youTube"></div>
    <div id="linkedInIcon" class="icon linkedIn"></div>
    <div id="emailIcon" class="icon email"></div>
    <div id="rssIcon" class="icon rss"></div>
</body>
</html> 
```

可以说我根本不应该使用 jQuery，因为它所做的只是添加一个 Click 处理程序，并且可以使用 flemingslone 指示的超链接更简洁地完成。从开发的角度来看，我使用 jQuery 的事实只是一个遗留问题，当时 jQuery 所做的远不止设置 Click 处理程序。

# c++ - 使用 C++ 库获取网页的一些视觉信息

> ID：15719531
> 
> 赞同：1
> 
> 时间：2013-03-30T14:20:26.533
> 
> 标签：c++, rendering, webpage

我想获取网页中所有元素的 x 坐标。这是我唯一需要的。我不想渲染页面以便我们可以看到它。我想要的只是像坐标一样简单的视觉信息（也许还有颜色、字体）。

我已经使用 Java [CSSBox](http://cssbox.sourceforge.net/)库实现了它。我们能在 C++ 中找到任何对应物吗？

# go - 适合解组geojson的结构类型

> ID：15719532
> 
> 赞同：8
> 
> 时间：2013-03-30T14:20:34.877
> 
> 标签：go

我想将 geojson 字符串解组为合适的结构类型。我有三个不同的 geojson 字符串，我想将它们解组到同一个结构中：

```
var jsonBlobPointString = []byte(`{"Type":"Point", "Coordinates":[1.1,2.0]}`)
var jsonBlobLineString = []byte(`{"Type":"LineString", "Coordinates":[[1.1,2.0],[3.0,6.3]]}`)
var jsonBlobPolygonString = []byte(`{"Type":"Polygon", "Coordinates":[[[1.1,2.0],[3.0,6.3],[5.1,7.0],[1.1,2.0]]]}`) 
```

我想出了一个我不完全满意的结构类型：

```
type GeojsonType struct {
    Type string
    Coordinates interface{}
} 
```

有关完整示例，请参阅此链接： [http ://play.golang.org/p/Bt-51BX__A](http://play.golang.org/p/Bt-51BX__A)

我宁愿不使用 interface{} 作为坐标。相反，我会使用一些可以验证的东西，例如 Coordinates [] float64 for Point 和 Coordinates[][] float64 for LineString。

是否可以创建一个结构类型，以便点、线串和多边形都可以在不使用接口的情况下以坐标表示？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T10:59:32.387

你想要的是从同一个 json 字典中创建 3 种不同类型的对象。

据我所知，这是不可能的，但是您可以使用[RawMessage类型来延迟 json 解码并使用](http://golang.org/pkg/encoding/json/#RawMessage)[像这样](http://play.golang.org/p/g6AmR3y4E9)的一些预处理

```
package main

import (
    "encoding/json"
    "fmt"
)

type Point struct {
    Coordinates []float64
}

type Line struct {
    Points [][]float64
}

type Polygon struct {
    Lines [][][]float64
}

type GeojsonType struct {
    Type        string
    Coordinates json.RawMessage
    Point       Point
    Line        Line
    Polygon     Polygon
}

var jsonBlob = []byte(`[
{"Type":"Point", "Coordinates":[1.1,2.0]},
{"Type":"LineString", "Coordinates":[[1.1,2.0],[3.0,6.3]]},
{"Type":"Polygon", "Coordinates":[[[1.1,2.0],[3.0,6.3],[5.1,7.0],[1.1,2.0]]]}
]`)

func main() {
    var geojsonPoints []GeojsonType
    err := json.Unmarshal(jsonBlob, &geojsonPoints)
    if err != nil {
        fmt.Println("error:", err)
    }

    // Postprocess the coordinates  

    for i := range geojsonPoints {
        t := &geojsonPoints[i]

        switch t.Type {
        case "Point":
            err = json.Unmarshal(t.Coordinates, &t.Point.Coordinates)
        case "LineString":
            err = json.Unmarshal(t.Coordinates, &t.Line.Points)
        case "Polygon":
            err = json.Unmarshal(t.Coordinates, &t.Polygon.Lines)
        default:
            panic("Unknown type")
        }
        if err != nil {
            fmt.Printf("Failed to convert %s: %s", t.Type, err)
        }
        fmt.Printf("%+v\n", t)
    }
} 
```

哪个打印

```
&{Type:Point Coordinates:[91 49 46 49 44 50 46 48 93] Point:{Coordinates:[1.1 2]} Line:{Points:[]} Polygon:{Lines:[]}}
&{Type:LineString Coordinates:[91 91 49 46 49 44 50 46 48 93 44 91 51 46 48 44 54 46 51 93 93] Point:{Coordinates:[]} Line:{Points:[[1.1 2] [3 6.3]]} Polygon:{Lines:[]}}
&{Type:Polygon Coordinates:[91 91 91 49 46 49 44 50 46 48 93 44 91 51 46 48 44 54 46 51 93 44 91 53 46 49 44 55 46 48 93 44 91 49 46 49 44 50 46 48 93 93 93] Point:{Coordinates:[]} Line:{Points:[]} Polygon:{Lines:[[[1.1 2] [3 6.3] [5.1 7] [1.1 2]]]}} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-28T22:14:46.447

基于 Nick Craig-Wood 的回答，我构建了以下 Marshal/UnMarshal 函数

```
package geojson

//https://stackoverflow.com/questions/15719532/suitable-struct-type-for-unmarshal-of-geojson

import (
    "encoding/json"
)

type Point struct {
    Coordinates []float64
}

type Line struct {
    Points [][]float64
}

type Polygon struct {
    Lines [][][]float64
}

type Geojson struct {
    Type        string          `json:"type"`
    Coordinates json.RawMessage `json:"coordinates"`
    Point       Point           `json:"-"`
    Line        Line            `json:"-"`
    Polygon     Polygon         `json:"-"`
}

func (g *Geojson) UnmarshalJSON(b []byte) error {

    type Alias Geojson
    aux := (*Alias)(g)

    err := json.Unmarshal(b, &aux)

    if err != nil {
        return err
    }

    switch g.Type {
    case "Point":
        err = json.Unmarshal(g.Coordinates, &g.Point.Coordinates)
    case "LineString":
        err = json.Unmarshal(g.Coordinates, &g.Line.Points)
    case "Polygon":
        err = json.Unmarshal(g.Coordinates, &g.Polygon.Lines)
    }

    g.Coordinates = []byte(nil)

    return err
}

func (g Geojson) MarshalJSON() ([]byte, error) {

    var raw json.RawMessage
    var err error

    switch g.Type {
    case "Point":
        raw, err = json.Marshal(&g.Point.Coordinates)
    case "LineString":
        raw, err = json.Marshal(&g.Line.Points)
    case "Polygon":
        raw, err = json.Marshal(&g.Polygon.Lines)
    }

    if err != nil {
        return nil, err
    }

    g.Coordinates = raw

    type Alias Geojson
    aux := (*Alias)(&g)
    return json.Marshal(aux)
} 
```

# uiwebview - Slide UIWebView over a ImageView (like safari)

> ID：15719538
> 
> 赞同：0
> 
> 时间：2013-03-30T14:21:00.007
> 
> 标签：uiwebview, imageview

I think the title says everything about my problem.

The ImageView is not in the UIWebView.

I want that the ImageView is pushed up by the WebView.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T14:39:56.973

It's actually pretty simple. If you go into your storyboard (or nib) and choose the the webView and choose a color for it's background property, anytime you scroll above the view that background color would appear. So all you need to do is load an image for that background color.

In your viewDidLoad method, place this bit of code:

```
self.webView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"background.png"]]; 
```

and where it says `background.png` just put the image name that you loaded into your project.

Hope this helps!

# mysql - How to insert a value after values already in the column mysql

> ID：15719540
> 
> 赞同：1
> 
> 时间：2013-03-30T14:21:22.630
> 
> 标签：mysql, vbulletin

In my user table, I have a userid column, and membergroupids column. Here is the query I have so far.

```
UPDATE `user`
SET `membergroupids`=`,100`
WHERE `userid` IN
(
  312 , 331 , 538 , 528 , 77 , 80 , 293 , 343 , 609 , 607 , 547 , 596 , 216 ,
  780 , 1 , 884 , 430 , 500 , 881 , 952 , 957 , 979 , 352 , 994 , 955 , 776 ,
  744 , 904 , 1038 , 76 , 1083 , 61 , 202 , 1001 , 1173 , 1176 , 418 , 770 ,
  1192 , 191 , 1211 , 1206 , 1247 , 402 , 423 , 584 , 1233.1282 , 167 , 1329,
  1330 , 376 , 1227 , 146 , 1113 , 1327 , 1352 , 254 , 1065 , 1406 , 1225 ,
  1230 , 1405 , 1443 , 812 , 1295 , 1510 , 1571 , 1565 , 1468 , 1349 , 1645 ,
  501 , 1312 , 1718 , 13 , 200 , 1177 , 1785 , 107 , 540 , 1591 , 1508 , 59 ,
  1867 , 222 , 1520 , 782 , 26 , 332 , 474 , 1837 , 1828 , 1431 , 1951 , 1953 ,
  1950 , 847 , 1477 , 1726 , 1669 , 1185 , 1955 , 1872 , 1926 , 1392 , 853 ,
  1892 , 2020 , 1511 , 2027 , 2197 , 2184 , 2134 , 2239 , 119 , 122
) 
```

So basically, what I am trying to do is.. I am trying to make it so the query adds ",100" to the column membergroupids if their userid is one of the ones listed in ().
However, here is the thing. All of these users already have values listed in membergroupids.
For example, the user 312 has these values already in the column membergroupids:
35,49,58,61,71,38,59
So, this query needs to do this to his field:
35,49,58,61,71,38,59,100

..and for all of the other userids listed.

Thanks if anyone can help me. I'm sure this is on google but I didn't know how to word it.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T14:27:56.840

Since you're in the unfortunate position of not being able to change the schema, you can add the value by concatenating it onto the existing values via `CONCAT()`

```
UPDATE `user` SET `membergroupids` = CONCAT(`membergroupids`, ',100') WHERE... 
```

That will force `,100` onto *every* user, even if they currently have an empty `membergroupids`. To account for the empty ones, you can use a `CASE` condition:

```
UPDATE `users`
SET `membergroupids` =  
  /* Concatenate ,100 onto the non-empty ones */
  CASE WHEN `membergroupids` IS NOT NULL AND `membergoupids` <> '' 
    THEN CONCAT(`membergroupds`, ',100')
  /* And set the empty ones to just 100 (no comma) */
  ELSE '100'
  END
WHERE ... 
```

In an ideal world, the user <--> group memberships would be handled with a proper many-to-many relationship, whereby a third table is used to assign users to groups, having two columns: `userid, groupid`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T14:30:15.863

```
UPDATE `user` SET `membergroupids`=CONCAT(`membergroupids`, ',100') 
WHERE `userid` IN ( ... ) 
```

Of course this assumes you have at least one membergroupid in the list already. Appending ',100' if the list is empty results in a list with a leading comma, which is not usually desirable. Here's a quick solution:

```
UPDATE `user` SET `membergroupids`=CONCAT_WS(COALESCE(`membergroupids`, ''), '100') 
WHERE `userid` IN ( ... ) 
```

Also what happens if the list of membergroupids grows too long, and can't fit in the length limit for the varchar column? *"I'm sorry, you can't join that group because we can't store your list of group memberships. Perhaps you'd like to join some groups with shorter values for their group ids, then you could join more groups."*

Storing lists of values in a comma-separated string is a bad design for a relational database. See a description of pitfalls in my answer to [Is storing a delimited list in a database column really that bad?](https://stackoverflow.com/questions/3653462/is-storing-a-delimited-list-in-a-database-column-really-that-bad/3653574#3653574)

It would be easier to add a membergroup for a user if you stored the memberships one per row in an intersection table. Then you don't need to know the current list of values.

```
INSERT INTO user_membergroups (userid, groupid) 
SELECT `userid`, 100 FROM `user`
WHERE `userid` IN ( ... ) 
```

# php - 如何将 PHP 闭包转发到另一个控制器

> ID：15719544
> 
> 赞同：1
> 
> 时间：2013-03-30T14:21:39.430
> 
> 标签：php

我正在尝试制作一个非常基本的路由类并通过示例学习 PHP 闭包。基本上，我想在 Laravel 中创建一个路由功能，但只能使用闭包。

```
function get($uri)
{
   if($uri == '/account')
   {
      return true;
   }
   else
   {
      return false;
   }
}

function Boo()
{
  echo "Boo";
}

$route = new Route();

$route->get('/account', function() { 
   return $route->Boo();
}); 
```

我可以在没有闭包的情况下执行此操作，并将“Boo”视为输出。

我怎么能用闭包做到这一点？我目前看到一个空白输出。

附言。函数在正确的类中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T14:35:01.907

您需要实际接受闭包作为 get 方法的参数，然后调用它，这是一个示例

```
class Route
{
    function get($uri, Closure $closure=null)
    {
        if($uri == '/account')
        {
            // if the closure exists, call it, passing it this instance as its parameter
            if (null !== $closure) {
                $closure($this);
            }
            return true;
        }
        else
        {
            return false;
        }
    }

    function Boo()
    {
        echo "Boo";
    }
}
$route = new Route();

// have the closure accept a route as it's parameter
$route->get('/account', function($route) { 
    return $route->Boo();
}); 
```

# c++ - Use relative file path with LoadImage

> ID：15719548
> 
> 赞同：2
> 
> 时间：2013-03-30T14:21:56.650
> 
> 标签：c++, winapi

I am attempting to load a file from a relative file path in win32 via the `LoadImage` function. The URL I am using definitely exists as I am, for testing purposes, using the same URL as an added bitmap in the resource file.

```
Image = (HBITMAP)LoadImage(NULL, "..\\..\\Images\\Mage default.bmp",
                           IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE); 
```

However, it is returning error code 2, indicating the file can't be found. I have googled the issue at some length, and referred to MSDN, and I can't find anything stating how to use a relative file path with `LoadImage`.

It seems to work fine with `LoadBitmap` and a pre-defined bitmap, but doesn't seem to work in this case. Any help would be much appreciated

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T14:27:53.460

First of all, check that the file exist and current directory is the one you expected.

Also, you can use function like [GetFullPathName](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364963%28v=vs.85%29.aspx) to convert relative path to absolute.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T14:25:07.450

The relative path you have is computed based on your process/run time working directory and not on your static files location in compile time.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-07T11:11:46.427

This may be an old post, but having stumbled across this problem (in my case, a header file) and found an answer, here it is:

If referencing a relative path, the first directory is not preceeded by a backslash.

In this example, the line would be:

(HBITMAP)LoadImage(NULL,"Images\\Mage default.bmp",...

# postgresql - 如何计算 PostgreSQL 中多列的总和

> ID：15719557
> 
> 赞同：57
> 
> 时间：2013-03-30T14:22:23.300
> 
> 标签：postgresql

我想知道是否有一种方法可以计算 PostgreSQL 中多列的总和。

我有一个包含 80 多列的表，我必须编写一个查询来添加每列中的每个值。

我尝试使用 SUM(col1, col2, col3 etc) 但它没有用。

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-03-30T14:31:55.977

```
SELECT COALESCE(col1,0) + COALESCE(col2,0)
FROM yourtable 
```

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2013-03-30T14:41:29.273

这取决于您希望如何对这些值求和。如果我正确阅读了您的问题，则您正在寻找此示例中的第二个 SELECT ：

```
template1=# SELECT * FROM yourtable ;
 a | b 
---+---
 1 | 2
 4 | 5
(2 rows)

template1=# SELECT a + b FROM yourtable ;
 ?column? 
----------
        3
        9
(2 rows)

template1=# SELECT SUM( a ), SUM( b ) FROM yourtable ;
 sum | sum 
-----+-----
   5 |   7
(1 row)

template1=# SELECT SUM( a + b ) FROM yourtable ;
 sum 
-----
  12
(1 row)

template1=# 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-11-13T20:18:36.570

结合当前的答案并使用它来获得总和：

```
SELECT SUM(COALESCE(col1,0) + COALESCE(col2,0)) FROM yourtable; 
```

# angularjs - 具有简单 angularjs 嵌套指令的隔离范围

> ID：15719558
> 
> 赞同：17
> 
> 时间：2013-03-30T14:22:38.183
> 
> 标签：angularjs, angularjs-directive, angularjs-scope

[请检查这个plnkr](http://plnkr.co/edit/IHftTQ?p=preview)

我已经阅读了有关指令、范围和隔离范围的所有内容。但我仍然无法理解如何完成这项工作。

只要我创建的指令没有嵌套在另一个指令中，它就可以完美地工作。

嵌套时，'localFunc: "&func"' 属性绑定到外部控制器范围就好了，但 'localAttr: "=attr"' 范围失败。

如果有人能帮助我理解原因，我将不胜感激。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-30T15:54:17.317

从图形上看，在我们输入任一文本框之前，您的作用域如下所示： ![范围](../Images/413a1c34ae3082f0e2b18ea275532712.png)

请注意，隔离范围 006 的父级是由指令创建的嵌入范围`container`。因此，`searchText`范围 006 中的数据将被数据绑定到范围 005（而不是范围 003），因为正在使用原语。

如果我们`11`在第一个文本框中输入，然后`22`在第二个文本框中输入并再次检查范围，我们可以看到数据绑定发生的位置：

![在此处输入图像描述](../Images/da5b24fdae04a21af491ba63efa2fac9.png)

`searchforThis2`在范围 005 中显示为黄色，表示已创建新属性。发生这种情况是因为使用了原语——范围 005 在这里不使用原型继承，它只是在自身上创建一个新的原语属性（即，它不在范围 003 中查找属性名称）。其他黄色项目表示原始值已更改。

正如您已经发现的，此问题的“最佳实践”解决方案是绑定到父作用域（即作用域 003）中的对象属性（而不是原语）。

在您的控制器中使用以下内容：

```
$scope.obj = {searchforThis1: "Sample Text 1", searchforThis2: "Sample Text 2"}; 
```

并在您的 HTML 中：

```
<search searchtext="obj.searchforThis1"...>
...
<div container>
  <search searchtext="obj.searchforThis2"...> 
```

范围现在如下所示： ![在此处输入图像描述](../Images/3aff21bb18a790282287f773791dcc4f.png)

如果我们`11`在第一个文本框中输入，然后`22`在第二个文本框中输入并再次检查范围，我们可以看到数据绑定发生的位置：

![在此处输入图像描述](../Images/2492d6db809ef4b2bb58cd38b10790ef.png)

因为作用域 006 是一个隔离作用域，所以它使用它`$parent`来到达作用域 005（如上）。然而，从那里开始，原型继承开始发挥作用，因为我们没有使用原语。对象属性`searchforThis2`位于范围 003 中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T14:49:55.073

从未失败。在我真正输入问题之前，数小时的谷歌搜索没有任何结果，然后我得到了搜索关键字的组合，瞧！答案出现了。

感谢[这篇非常有启发性的帖子](http://jimhoskins.com/2012/12/14/nested-scopes-in-angularjs.html)，我了解到我的问题是如此普遍，解决方案甚至有一个名字——“点规则”。

基本上，您需要引用控制器上的继承对象而不是属性，问题就消失了。

# javascript - Backbone collection validation

> ID：15719561
> 
> 赞同：1
> 
> 时间：2013-03-30T14:22:50.050
> 
> 标签：javascript, backbone.js

Mates I have the following:

```
App.Collections.Bookings = Backbone.Collection.extend({
url: 'bookings/',
model: App.Models.Booking,

howManyArriving: function() {

    var bg = _.countBy( this.models, function(model) {
        return model.get('indate') == moment().format('YYYY-MM-DD') ? 'even' : 'odd';
    });

    var lv = _.filter( this.models, function(model){
        return model.get('indate') == moment().format('YYYY-MM-DD');
    });

    var r = {
        count: bg,
        models: lv
    }
    return r;
},

availableBtwn: function(bed,indate,outdate) {
    var gf = _.filter(this.models, function(model){
        return (
            model.get('outdate') > outdate &&
            model.get('indate') <= indate &&
            model.get('id_bed') == bed
        );
    });
    return gf;
},

getBooking: function(bed, date){

    var gf = _.filter(this.models, function(model){
        return (
            model.get('outdate') > date &&
            model.get('indate') <= date &&
            model.get('id_bed') == bed
        );
    });
    return gf;
},

getFullName: function(id){
    var b = this.get(id);
    return b.get('nombre') + ' ' + b.get('apellido');
}
}); 
```

I need to check when I populate the collection and when I add a single model if there's already an existing model with determined propperties equal to the model/s that i'm attempting to create. I've tried something like this:

```
App.Collections.Bookings.prototype.add = function(bookings) {
_.each( bookings, function(book){
    var isDupe = this.any(function(_book) { 
        return _book.get('id') === book.id;
    });
    if (isDupe) {
        //Up to you either return false or throw an exception or silently ignore
        return false;
    }else{
        Backbone.Collection.prototype.add.call(this, book);
    }
    //console.log('Cargo el guest: ' + guest.get('id'));
}, this);

} 
```

The thing is, it works, but when I populate the collection, it's not populated by App.Models.Booking, but with response's JSON.

Any idea?

Thanks a lot!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T14:55:04.810

So, basically when you populate a collection, 3 flags are describing the behavior your method should have: add, remove, merge . We'll start by the default behavior of the set and add methods:

```
// Default options for `Collection#set`.
var setOptions = {add: true, remove: true, merge: true};
var addOptions = {add: true, merge: false, remove: false}; 
```

The add method in fact proxies the set method, as does the fetch method **if you don't use the reset flag** (which would cause to delete any model in your collection and create new ones each time you fetch them) which would call the reset method instead.

Now, how to use the flags. Well, it's the options specified [in the doc](http://backbonejs.org/#Collection-add). So basically, the default behavior for the add method is equivalent to this:

```
myCollection.add(myModels, {add: true, merge: false, remove: false}); 
```

Now, for the meaning of those flags:
- add: will add the news models (=the ones their id is not among the existing ones...) to the collection
- remove: will remove the old models (=the ones their id is not among the fetched models) of the collection
- merge: will update the attributes of the ones among the old and the fetched

What you should know about the merge flag: **IT'S A REAL PAIN IN THE ASS**. Really, I hate it. Why ? Because it uses an internal function that "prepares the models" :

```
if (!(model = this._prepareModel(models[i], options))) continue; 
```

It means that it will create fake, volatile models. What's the big deal? Well, it means that it will execute the initialize function of those volatile models, possibly creating a chain reaction and unwanted behavior in your app.

So, what if you want this behavior but can't have volatile models created because it breaks your app? Well, you can set the merge flag to false and override the parse method to do it, something like:

```
parse: function(models) {
  for(var i=0; i<models.length; i++) {
    var model;
    if(model = this.get(models[i].id)) {
      model.set(models[i]);
    }
  }
  return models;
} 
```

# function - Changing function type in Haskell

> ID：15719565
> 
> 赞同：1
> 
> 时间：2013-03-30T14:23:04.777
> 
> 标签：function, haskell, types

I have a function which has this type by default :

```
func :: Integer -> (Integer,Integer) -> [[String]] -> ([Char],[Char],[Char],[Char]) -> (Integer,Integer) 
```

But I want it to return (Int,Int) When I wrote this :

```
func:: Integer -> (Integer,Integer) -> [[String]] -> ([Char],[Char],[Char],[Char]) -> (Int,Int) 
```

I get this error : Main> :l play

```
ERROR "play.hs":64 - Type error in explicitly typed binding
*** Term           : func
*** Type           : Integer -> (Integer,Integer) -> [[String]] -> ([Char],[Char],[Char],[Char]) -> (Integer,Integer)
*** Does not match : Integer -> (Integer,Integer) -> [[String]] -> ([Char],[Char],[Char],[Char]) -> (Int,Int) 
```

How can I fix this? Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T14:38:27.357

Write a new wrapper function to wrap `func`, then use the wrapper function instead.

```
func' :: Integer ->
         (Integer,Integer) ->
         [[String]] ->
         ([Char],[Char],[Char],[Char]) ->
         (Int,Int)
func' a b c d = (fromInteger x, fromInteger y) where
    (x, y) = func a b c d 
```

Alternatively, you could insert the calls to `fromInteger` directly into `func`.

The issue here is that `Int` and `Integer` are different types, and the compiler does not convert between them implicitly --- you have to do so explicitly, hence the calls to `fromInteger`. `fromInteger` converts from `Integer` to any numeric type.

# python-3.x - Python 3.3 (tkinter)：值不变

> ID：15719576
> 
> 赞同：0
> 
> 时间：2013-03-30T14:24:54.920
> 
> 标签：python-3.x, tkinter, return-value, sticky, appearance

第一个问题是，当我单击“+ $16”按钮时，它没有显示增加，尽管您可以在关闭窗口并在 Python Shell 中输入**钱后看到它。**第二个问题是，在我添加了那些**sticky=SE**和**sticky=SW**窗口后，根本不会出现（没有错误消息）。

```
# money adder
import sys
from tkinter import *
import random

root = Tk()
root.geometry('360x160+800+200')
root.title('app')

money = 100

def addMoney():
    global money
    money = money + 16

def end():
    global root
    root.destroy()

appTitle = Label(root,text='Money Adder',font='Verdana 31',fg='lightblue').pack()
budget = Label(root,text='Budget: $'+str(money),font='Arial 21',fg='green').pack()
moneyButton = Button(root,text='+ $16',width=17,height=2,command=addMoney).grid(sticky=SW)
endButton = Button(root,text='Quit',width=5,height=2,command=end).grid(sticky=SE)

root.mainloop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:38:09.737

您根据;中的变量存储一个*新*字符串 标签不会为您保留对变量的引用。`money``budget` `Label``money`

每次调用`addMoney`函数时只需设置标签值：

```
def addMoney():
    global money
    money = money + 16
    budget.set('$' + str(money)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T23:17:06.230

First of all, you are storing the return value of `grid` or `pack`, which is always None, instead of the reference to the widgets. Besides, you shouldn't use both geometry managers at the same time (if you are new to Tkinter, I'd suggest grid instead of pack).

To update the text of the widget, you have to use `config` with the `text` keyword or `budget['text']`:

```
budget = Label(root,text='Budget: $'+str(money),font='Arial 21',fg='green')
budget.pack()

def addMoney():
    global money
    money += 16
    budget.config(text='Budget: $'+str(money))

moneyButton = Button(root,text='+ $16',width=17,height=2,command=addMoney) 
```

# objective-c - 使用 CGRectIntersectsRect 检测两个 CAlayer 之间的碰撞

> ID：15719577
> 
> 赞同：0
> 
> 时间：2013-03-30T14:24:59.707
> 
> 标签：objective-c, calayer, collision

我正在尝试使用 CGRectIntersectsRect 来检测两个 CAlayers 之间的碰撞。一个是层次结构的一部分，另一个是主视图的子层。我试过这个：

[访问动画的presentationLayer以检测碰撞](https://stackoverflow.com/questions/13655264/accessing-presentationlayer-of-an-animation-to-detect-collisions/13655289#13655289)

它没有任何一致性。这是我现在所拥有的。“LegLowerLeft”是 CAlayers 层次结构的一部分，“rec2”是主视图的子视图。在此先感谢您的帮助。：

```
-(void) checkForCollisionWithRec{
  if(CGRectIntersectsRect(((CALayer*)self.creature.legLowerLeft.presentationLayer).frame,
                            ((CALayer*)rec2.presentationLayer).frame))

    { NSLog(@"Collision detected"); }

   else{NSLog(@"No collision detected");}
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T14:47:43.033

图层的框架位于其父视图的坐标空间中。如果两个层有不同的超级视图，那么你不能直接比较它们的帧。您必须将它们转换为一致的坐标空间。

```
CALayer *layer1 = self.creature.legLowerLeft.presentationLayer;
CALayer *layer2 = rec2.presentationLayer;

CGRect frame1 = layer1.frame;
CGRect frame2 = [layer1 convertRect:layer2.frame fromLayer:layer2];

if(CGRectIntersectsRect(frame1, frame2))
{
  NSLog(@"Collision detected");
}
else
{
  NSLog(@"No collision detected");
} 
```

# jquery - 如何触发悬停并为 div 设置动画

> ID：15719580
> 
> 赞同：0
> 
> 时间：2013-03-30T14:25:02.677
> 
> 标签：jquery, html, css

我想使用悬停并通过动画使我的 div 变长

这有什么问题？更新：文档再次没有结果

```
 <html>
    <head>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){
    $("div").hover(function(){
        $(this).animate({ width: "200px" });
    }, function() {
        $(this).animate({ width: "100px" });
    });
    }
    </script>
    <style>
    div.ex
    {
    width:20px;
    padding:10px;
    background-color:gray;
    margin:0px;
    }
    </style>
    </head>
    <body>
    <form>
    <div class="ex"></div>
    </form>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T14:27:01.767

您必须将代码包装在`doc ready`处理程序中：

```
$(function(){
   $("div").hover(function(){
      $(this).animate({ width: "200px" });
   }, function() {
      $(this).animate({ width: "100px" });
   });
}); 
```

这

```
$(function(){
  ......
}); 
```

还有这个：

```
$(document).ready(function(){
   .......
}); 
```

两者都是一样的。

### 根据您更新的代码：

如果你看看你的结束标签`}`，`doc ready`它仍然错过了一个正确的结束`});`

```
});
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T14:27:25.610

将您的代码包装在 ready() 中

```
 $(function(){
       $("div").hover(function(){
           $(this).animate({ width: "200px" });
       }, function() {
          $(this).animate({ width: "100px" });
       });
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T14:39:40.560

**您没有关闭函数括号。**

```
 $(document).ready(function(){
$("div").hover(function(){
    $(this).animate({ width: "200px" });
}, function() {
    $(this).animate({ width: "100px" });
});
} <---- you are missing ')' 
```

更改您的代码，如下所示

```
$(document).ready(function(){
$("div").hover(function(){
    $(this).animate({ width: "200px" });
}, function() {
    $(this).animate({ width: "100px" });
});
}); 
```

[演示](http://jsbin.com/okovup/1/edit)

# c++ - 将 cv::findContours 与 Qt Gui 一起使用时程序崩溃

> ID：15719590
> 
> 赞同：0
> 
> 时间：2013-03-30T14:26:09.080
> 
> 标签：c++, qt, opencv

我已经被这个问题困扰了好几天了；

我创建了一个 Qt 控制台项目，将它与 OpenCV 连接起来，一切正常；

我创建了一个 Qt Gui 项目，添加了一个按钮并从按钮插槽中的上一个项目中复制了相同的代码，我得到了一个 windows segFault 并且程序以代码 -1073741819 退出。

所以我用调试器来检测问题，结果发现是在使用函数`cv::threshold`。

我改变了它，而是使用`cv::Canny`了，但后来我遇到了同样的问题`cv::findContours`！

奇怪的是，当我在 windows 的构造函数中调用按钮的 'MainWindow::on_pushButton_clicked()' 时，它起作用了！！！

这是调试器输出：

```
0 cv::thresh_8u(cv::Mat const&, cv::Mat&, 无符号字符, 无符号字符, int) C:\OpenCV2.4\OpenMinGw\install\bin\libopencv_imgproc240.dll 0 0x62b2c624  
1 cv::_InputArray::getMat(int) 常量 C:\OpenCV2.4\OpenMinGw\install\bin\libopencv_core240.dll 0 0x65c1a838  
2 ?? 0 0x00000000  

```

这是我得到错误的函数（我从 OpenCV 教程中得到的）：

```
void MainWindow::on_pushButton_clicked(){

    Mat src; Mat src_gray;
    int thresh = 100;
    RNG rng(12345);
    Mat canny_output;

    vector<vector<Point> > contours;

    /// Load source image and convert it to gray
    src = imread( "hat-10.bmp", 1 );

    cvtColor( src, src_gray, CV_BGR2GRAY );
    blur( src_gray, src_gray, Size(3,3) );

    /// Detect edges using canny
    Canny( src_gray, canny_output, thresh, thresh*2, 3 );
    qDebug("Ok 1");

    /// Find contours
    if(cv::sum(src_gray).val[0] > 0.0){

        qDebug("Ok 2");
        cv::findContours( src_gray, contours, CV_RETR_EXTERNAL, CV_CHAIN_APPROX_NONE );
        /// Draw contours
        Mat drawing = Mat::zeros( src_gray.size(), CV_8UC3 );
        for( int i = 0; i< contours.size(); i++ )
        {
            Scalar color = Scalar( rng.uniform(0, 255), rng.uniform(0,255), rng.uniform(0,255) );
            drawContours( drawing, contours, i, color, 2);//, 8, hierarchy, 0, Point() );
        }
        /// Show in a window
        imshow( "Contours", drawing);

    } 
```

使用：

*   视窗 7 x64

*   使用 mingw 4.1.0 编译的 OpenCV 2.4.0

*   Qt Creator 2.0.0 基于 Qt 4.7.0（32 位）

**编辑：**

这是我的代码的较短版本：

```
void MainWindow::on_toolButton_clicked(){
 std::vector<std::vector<cv::Point> > contours;

/// Load source image and convert it to gray
Mat src = imread( "C:/Users/poste/L3 ISIL/PFE Licence/new bmp/hat-10.bmp", 1);
// my image is already a binary one
Mat canny_output(src.size(), src.type());

Canny(src,canny_output,100,200,3);

imshow("Source",  canny_output); // here image is displayed before crash
waitKey(500);

/// Find contours
findContours(canny_output, contours, CV_RETR_EXTERNAL, CV_CHAIN_APPROX_NONE );

} 
```

在控制台模式下，没有问题。从 GUI 应用程序构造函数调用时也没有问题。它仅在实际单击按钮时崩溃。

**编辑：** 我截图了！[这里] [http://i.stack.imgur.com/1LyeF.png](http://i.stack.imgur.com/1LyeF.png) `canny_output`显示，这意味着图像已加载。

[在这里](http://www.mediafire.com/?a2wntt7eaqxid7d)上传项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T14:45:33.377

首先确保要阈值的图像确实是灰度图像。在 Thresholding 之后在另一个窗口中显示它。

在 cv::FindContours 之前执行此操作：

```
cvThreshold(originalImage,resultingImage,100,100,CV_THRESH_BINARY) 
```

也改变一下：

```
vector<vector<Point> > contours;

to:

vector<vector<cv::Point2f> > contours; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T18:37:49.707

试试这个：

```
/// Load source image and convert it to gray
Mat src = imread( "hat-10.bmp", 1 );

Mat src_gray(src.size(), CV_8U);
cvtColor( src, src_gray, CV_BGR2GRAY );

blur( src_gray, src_gray, Size(3,3) );

//Apply threshold
cv::Mat thres_output(src_gray.size(), src_gray.type());
cv::threshold(src_gray, thres_output, 100, 255, cv::THRESH_BINARY);
qDebug("Ok 1"); 
```

OpenCV 文档有一个关于[Basic Thresholding Operations](http://docs.opencv.org/doc/tutorials/imgproc/threshold/threshold.html#code)的完整演示。

**编辑：**

在仔细查看了您的代码和注释后，我想我知道发生了什么：这些问题可能是因为**`imread()`can't access the specified file**发生的。这使得函数返回一个空的`Mat`。要检查是否是这种情况，只需执行以下操作：

```
Mat src = imread( "hat-10.bmp", 1 );
if (src.empty())
{
    std::cout << "!!! imread failed to open image\n";
    return;
} 
```

The reason why it happens is because Qt Creator builds the **.exe** of the project in a separate folder, so when the application runs, it tries to load the image from the directory where the .exe was launched, and it fails because the image isn't there.

When calling `imread()` remember to pass the FULL PATH to the file. See if that fixes the issue.

**EDIT**:

Remember to convert the image to binary before feeding it to `findContours()`:

```
// Convert from 32F to 8U
cv::Mat binary_img;
canny_output.convertTo(binary_img, CV_8U);

std::vector<std::vector<cv::Point> > contours;
cv::findContours(binary_img, contours, CV_RETR_EXTERNAL, CV_CHAIN_APPROX_NONE); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T18:52:06.403

I used function Qtconcurrent::run() and everything started working. Even though this isn't a permanent (nor a good) solution; this is all I could come up with.

I'm still open to other answers though.

# c - 函数失去作用域时程序中的 APPCRASH (c0000005)

> ID：15719591
> 
> 赞同：-4
> 
> 时间：2013-03-30T14:26:11.450
> 
> 标签：c, scanf, crash

当我错误地遗漏了 scanf() 函数的第二个参数时，程序仍然编译并运行，但可执行文件遇到以下错误：“APPCRASH”，异常代码为“c0000005”（这意味着存在内存访问冲突 AFAIK ）。我做了一些实验，当调用 scanf() 的函数超出范围时，似乎总是发生崩溃，但我已经意识到它在实际调用中发生的更多。例子：

```
void afunction (void) {
    printf("This works fine!");
    scanf("%c");               /* NOTE the second parameter omission */
    printf("This showed up a few times, misleading me");
} 
```

我现在有三个问题：

1）为什么编译器不会编译代码失败？它甚至没有警告我！

2) scanf() 现在是否正在尝试写入内存地址 NULL？例如：scanf("%c", NULL)

3）为什么/如何在失败的 scanf() 语句下执行任何操作？

附加信息：
平台：Windows
编译器：GCC
IDE：代码::块

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T19:46:16.297

### “为什么编译器不会编译代码失败？它甚至没有警告我！”

这是因为 scanf() 的签名是`int scanf ( const char * format, ... );`表示`...`可变参数，而零参数也是有效的[可变](http://en.wikipedia.org/wiki/Stdarg.h)参数。似乎 gcc 不够聪明，无法在编译时解析格式字符串并生成警告。

### “scanf() 现在是否正在尝试写入内存地址 NULL？例如：scanf("%c", NULL)"

这很可能是依赖于实现的，但很可能它只会尝试从带有格式字符串的第一个参数所在的堆栈中读取一些数据。

### “为什么/如何在失败的 scanf() 语句下执行任何操作？？”

当`scanf()`解析第一个参数并检测到它需要一个指针时，它会在其中获得一些未初始化的内存返回随机垃圾，如果你“幸运”，你会在程序内存的某处获得一个“有效”地址，它不会出现段错误马上。这真的很不幸，因为（如您所见）有时会失败，有时却不会。这种内存损坏很难追踪，因为错误出现的点可能与它发生的点没有任何联系。

# html - php 邮件/提交一个变量跨度

> ID：15719592
> 
> 赞同：0
> 
> 时间：2013-03-30T14:26:15.707
> 
> 标签：html, forms, post, php

我正在尝试提交`<span>`要通过 php 邮寄的值。

我想提交变量 span `res1`：

```
<form method="POST" name="results" action="message.php">
      <span id="res1">Mail This:*this part varies*</span>
</form> 
```

使用这个处理程序：

```
$body .= $_REQUEST['#res1']." \n";
mail( $recipient, $subject, $body, "From: $sender" ) or die ("Mail could not be sent."); 
```

我宁愿`<span>`不在表格中；我不确定这是否可能？

原谅我的无知 - 以前从未使用过服务器端的东西！感谢任何可以帮助我的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T14:41:35.013

这部分如何*变化*到跨度？使用相同的指令添加一个

```
<input type="hidden" name="res1" value="the same value you put in the span"/> 
```

然后，在您的 PHP 代码中，您可以使用`$_REQUEST['res1']`或`$_POST['res1']`-- 注意删除的哈希值来获取值。

**更新**

对于任何可能犯类似错误的人，这里是什么可行，什么不可行。

HTML 表单仅在提交时发送表单控件的值。他们是：

*   `input`s of various types (`text`, `password`, `radio`, `checkbox`, `hidden`, `file`, `submit`, `image`, or newer HTML5 inputs like `email`, etc.)
*   `select`s
*   `textarea`s

Furthermore, the value of an input is only submitted if it has been assigned a `name`. So if the following inputs are in a form, on submitting the form whatever value *bugs* may have will be submitted, but nothing will be submitted for *bunny*:

```
<input type="text" name="bugs"/>
<input type="text" id="bunny"/> 
```

So, putting any element between `<form> ... </form>` does not cause the text inside it to be submitted. For a value to be submitted it should be one of the above form controls AND it should have a `name` property set.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T14:48:33.210

You can do this:-

```
<form method="POST" name="results" action="message.php">
  <input type="hidden" id="res1" value="some text" />
</form> 
```

You can use javascript to access and change "res1"

```
document.getElementById("res1").value=some variable or textbox content; 
```

# php - 如何避免确认表单重新提交？

> ID：15719597
> 
> 赞同：0
> 
> 时间：2013-03-30T14:26:41.310
> 
> 标签：php, html, forms, submission

有什么办法可以避免确认表格重新提交？`The page that you're looking for used information that you entered. Returning to that page might cause any action that you took to be repeated.Do you want to continue?`使用 javascript 或 jquery 函数任何类型的示例来避免确认表单重新提交？

```
function getComboB(sel) { 
var invoices=document.getElementById("invoices");
var input_val = document.getElementById("invoices").value; 
invoices.action = "searchinvoices.php?invoices="+input_val+"";
invoices.submit();
} 

<table width="371" border="2">
<form name="invoices" id="invoices">
<tr>
<td width="160"><font class="font2">&nbsp;Search By Invoice's Number:</font></td>
<td width="198"><input type="text" class="input_field" style="background:#FFF !important;" name="invoices" id="invoices" onchange="getComboB();" ></td>
</tr>
<tr>
<td colspan="2">&nbsp;</td>
</tr>
</form>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:24:28.287

似乎这是浏览器自动实现的安全功能。这不容易绕过，因为它是浏览器软件的一部分。我最好的两个建议是使用标题重定向用户（如果您可以在页面上使用一些 PHP）：

```
header("Location: http://example.com"); 
```

或者看看 Chrome 是否有一个[标志](http://blogs.adobe.com/cantrell/archives/2012/07/all-about-chrome-flags.html)。在其他浏览器中，您可能不走运。干杯!

# jquery - 访问 JSON 元素时返回“object Object”或未定义

> ID：15719604
> 
> 赞同：2
> 
> 时间：2013-03-30T14:27:09.147
> 
> 标签：jquery, ajax, json

我已经解析了 json 字符串，并且正在尝试访问这些元素。我无法访问链接 1、链接 2、链接 3

```
{
"click_title":"GO",

"links":

    {

    "commonlink":"http:\/\/bookings.com",

    "alllinks":
        [
        [
            {

                "link1":"http:\/\/xyz1.com\/get\/a",

                "link2":"http:\/\/www.anotherwebsite1.com\/c\/t",

                "link3":"http:\/\/www.newsite1.com\/v\/h"
            },

            {

                "link1":"http:\/\/xyz2.com\/get\/a",

                "link2":"http:\/\/www.anotherwebsite2.com\/c\/t",

                "link3":"http:\/\/www.newsite2.com\/v\/h"

            }
        ],

        [
            {

                "link1":"http:\/\/xyz3.com\/get\/a",

                "link2":"http:\/\/www.anotherwebsite3.com\/c\/t",

                "link3":"http:\/\/www.newsite3.com\/v\/h"
            }
        ]
        ]
    }
} 
```

var 数据 = $.parseJSON(dbData);

我可以使用以下方式访问 click_title 和 commonlink：-

```
data.click_title
data.links['commonlink'] 
```

但无法访问链接1、链接2、链接3。我试过

```
data.links['alllinks'] which returns [object Object]. 
```

如果我尝试

```
data.links['alllinks']['link1'] i get undefined 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:28:57.447

结构非常奇怪。`alllinks`是一个对象数组的数组（注意和之后的`[`第二个，每个都开始一个数组）。要获得*第*一个数组中的*第一个*，您可以：`[``"alllinks":` *`link1`*

 **```
var link = data.links.alllinks[0][0].link1; 
```

如果您一致地格式化 JSON，则更容易看到这一点。在这里，我使用[http://jsonlint.com](http://jsonlint.com)对其进行了清理，然后添加了一些评论（不是评论在 JSON 中有效）：

```
{
    "click_title": "GO",
    "links": {
        "commonlink": "http://bookings.com",
        "alllinks": [ // <== Starts the outer array
            [         // <== Starts an inner array
                {     // <== Starts the object that's the first entry
                    "link1": "http://xyz1.com/get/a",
                    "link2": "http://www.anotherwebsite1.com/c/t",
                    "link3": "http://www.newsite1.com/v/h"
                },
                {     // <== Starts the object that's the second entry
                    "link1": "http://xyz2.com/get/a",
                    "link2": "http://www.anotherwebsite2.com/c/t",
                    "link3": "http://www.newsite2.com/v/h"
                }
            ],        // <== Ends the first inner array
            [         // <== Starts the second inner array
                {
                    "link1": "http://xyz3.com/get/a",
                    "link2": "http://www.anotherwebsite3.com/c/t",
                    "link3": "http://www.newsite3.com/v/h"
                }
            ]         // <== Ends the second inner array
        ]             // <== Ends the outer array
    }
} 
```

所以总的来说，你有三个`link1`：一个在对象上`[0][0]`，一个在对象上`[0][1]`，一个在对象上`[1][0]`。**

# mysql - mysql_install_db 给出错误

> ID：15719605
> 
> 赞同：10
> 
> 时间：2013-03-30T14:27:10.573
> 
> 标签：mysql, database, installation, redhat, database-administration

我从[这里下载了](http://dev.mysql.com/downloads)**mysql-5.1.38-linux-x86_64-glibc23.tar.gz**

然后我使用下面的命令执行了它

```
groupadd mysql

useradd -g mysql mysql123

cp mysql-5.1.38-linux-x86_64-glibc23.tar.gz /home /mysql123/

su - mysql123

tar -zxvf mysql-5.1.38-linux-x86_64-glibc23.tar.gz

mv mysql-5.1.38-linux-x86_64-glibc23 mysql

mkdir tmp

cd mysql/

mv suppport-files/my-medium.cnf my.cnf

cp support-files/mysql.server bin/ 
```

然后我编辑了 my.cnf 并将 basedir 和 datadir 设置为**/home/mysql123/mysql**和**/home/mysql123/mysql/data**和 innodb_home_dir 和 logfile 目录到 datadir

现在编辑 mysql.server 并在其中正确设置 datadir 和 basedir

然后启动 mysql_install_db 作为

```
[mysql123@localhost mysql]$ ./scripts/mysql_install_db
./scripts/mysql_install_db: line 244: ./bin/my_print_defaults: cannot execute binary file
Neither host '127.0.0.1' nor 'localhost' could be looked up with
./bin/resolveip
Please configure the 'hostname' command to return a correct
hostname.
If you want to solve this at a later stage, restart this script
with the --force option 
```

在看到错误时，我认为它可能与 basedir 混淆并执行如下相同

```
[mysql123@localhost mysql]$ ./scripts/mysql_install_db -–user=mysql123 -–basedir=/home/mysql123/mysql
./scripts/mysql_install_db: line 244: ./bin/my_print_defaults: cannot execute binary file
Neither host '127.0.0.1' nor 'localhost' could be looked up with
./bin/resolveip
Please configure the 'hostname' command to return a correct
hostname.
If you want to solve this at a later stage, restart this script
with the --force option 
```

我不知道内部发生了什么并显示这种信息

我确信我有足够的磁盘空间（**df -h**）并且我有适当的所有权（**chown mysq123:mysql /home/mysql123/ -R**）和适当的权限（**chmod 755 。**）

mysql_install_db 中的行如下所示 ![在此处输入图像描述](../Images/81c719d5010748ed1b7646b030352afb.png)

请帮助解决这个问题非常有用（我必须遵循相同的安装过程）

我正在使用红帽 6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-12-12T05:47:36.290

无法使用 ./bin/resolveip 查找主机 '127.0.0.1' 和 'localhost'

只需在 /etc/hosts 中添加字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-14T02:32:14.677

请执行以下步骤来解析您的 IP 地址。

```
vi /etc/sysconfig/network
HOSTNAME=mybox

vi /etc/hosts

10.103.14.112 mybox.example.com mybox

/usr/bin/resolveip 10.103.14.112 
```

从框中注销并再次登录。

它工作正常。

试一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T00:02:02.160

根据您在屏幕截图中将您的主机标识为“localhost”的提示，该程序似乎被设计为不接受它作为有效的主机名。

请将您的主机名更改为“localhost”以外的名称。

“请配置 'hostname' 命令以返回正确的主机名。如果您想在稍后阶段解决此问题，请使用 --force 选项重新启动此脚本”

或者，上面的消息建议您可以使用 --force 选项来覆盖它。但是拥有一个合理的主机名似乎是更好的选择。

-HTH

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-02T22:31:18.057

我遇到了同样的问题，这是由于在 64 位系统中安装了 32 位 MySQL。当我跑的时候，这变得很明显`./bin/resolveip`，它说

`bash: ./bin/resolveip: No such file or directory`

尽管它存在并且可以执行。

解决方案是更改为使用 64 位 mysql。在您的情况下，您似乎需要尝试相反的方法-尝试使用 32 位。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-05T12:06:34.213

我也遇到了这个问题，只是因为我的 CNF 文件存在差异：basedir 没有设置为我的 $MYSQL_HOME。

# android - 从 GCMIntentService 获取 Android 位置

> ID：15719606
> 
> 赞同：2
> 
> 时间：2013-03-30T14:27:11.420
> 
> 标签：android, locationmanager, google-cloud-messaging

当他收到 GCM 通知时，我想在 Android 中获取用户的位置。
所以在我的`GCMIntentService extends GCMBaseIntentService`我这样做：

```
 @Override
    protected void onMessage(Context context, Intent intent) {
        Log.i(TAG, "Received message. Extras: " + intent.getExtras());
        String message = getString(R.string.gcm_message);
        displayMessage(context, message);
        syncLocations(context);

    } 
```

在syncLocation中，我正在正确地获取位置

```
public void syncLocations(Context context)
    {

        locationManager = (LocationManager)context.getSystemService(Context.LOCATION_SERVICE);

            locationManager.requestLocationUpdates(
                    LocationManager.GPS_PROVIDER, 0, 0,
                    mLocationListener);
            locationManager.requestLocationUpdates(
                    LocationManager.NETWORK_PROVIDER, 1000, 0,
                    mLocationListener);

    }
    public LocationListener mLocationListener   = new LocationListener() {
        @Override
        public void onStatusChanged(
                String provider,
                int status,
                Bundle extras)
        {}

        @Override
        public void onProviderEnabled(
                String provider)
        {}

        @Override
        public void onProviderDisabled(
                String provider)
        {}

        @Override
        public void onLocationChanged(
                Location location)
        {
//HANDLE LOCATION
        }
    }; 
```

如果从应用程序内部调用syncLocation，则它可以正常工作。

但是当我从通知 onMessage() 调用它时，它会进入方法，但永远不会调用 onLocationChanged。我怀疑这与上下文有关。

谁能给我任何信息为什么它不起作用？
谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T15:27:52.607

> 谁能给我任何信息为什么它不起作用？

Because `GCMIntentService` is an `IntentService` and goes away (via `stopSelf()`) shortly after `onMessage()` returns. You cannot reliably do things like register listeners for location changes from an `IntentService`.

Also, bear in mind that the device may be asleep when the GCM message comes in. `GCMIntentService` will keep the device awake long enough to call `onMessage()`, but once `onMessage()` returns, the device can fall back asleep.

# visual-studio-2010 - 如何在不同的环境下进行测试？

> ID：15719611
> 
> 赞同：0
> 
> 时间：2013-03-30T14:27:26.770
> 
> 标签：visual-studio-2010, coded-ui-tests

我们有一个网络应用程序。我们希望在多个环境中运行相同的测试，以确保一切仍然正常工作。

UAT -> 分期 -> 生产

我们希望在每次部署到每个环境后运行这些测试。每个环境都有一个不同的 URL。我在 MTM 中创建了三个测试计划。我只为 UAT 环境添加了测试用例，并在 Lab Center 中创建了一个环境。顺便说一句，我已经用编码的 ui 测试记录了测试用例，并且我已经将它们关联起来进行自动化测试（仅限 UAT 环境）。我该如何测试其他环境。如何在不更改录音或代码的情况下实现这一点？谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T17:00:16.900

您可能需要编辑 Coded UI 测试以更改在测试运行时启动的浏览器 URL。当我在不同浏览器上执行自动化编码 UI 测试时，当测试开始时，我从每个测试环境的 XML 配置文件中读取它，以获取正确的浏览器 URL（以及任何其他相关配置数据）。因此，换句话说，您至少需要一点代码来处理每个测试环境的不同 URL 或任何配置数据。

要在远程环境中实际运行测试，您应该下载 Microsoft 测试控制器和测试代理（[下载链接](https://www.microsoft.com/en-au/download/details.aspx?id=40750)）。这是安装和配置代理[的文档](http://msdn.microsoft.com/en-us/library/vstudio/dd648127.aspx)。

这个想法是您的主机（可能是主要的构建/测试机器）安装了测试控制器，并且测试控制器远程连接到安装在您的测试环境中的测试代理并启动自动化编码的 UI 测试。

Microsoft 测试管理器还具有命令行选项，以便您可以安排自动化测试（例如，您可以从 Windows 任务调度程序运行脚本）。

我不记得实现这些的确切细节，但希望我至少能让你朝着正确的方向前进，这样你就可以进一步研究这些东西。

使用测试代理进行自动化测试有很多细微差别，所以我准备在这方面投入大量时间。

更新：

自从我从事测试自动化工作以来已经有很长时间了，所以我不记得我的实现细节，但据我所知，在我的系统中，我有一个 XML 配置文件存储在测试环境中（例如 C: \MyTestConfig\config.xml 具有各种配置选项的 XML 值，重要的是我要启动的 URL，例如

```
<browserUrl>http://localhost:1659/whatever</browserUrl> 
```

然后，我在测试项目中有一个类，它在实例化时会获取配置 XML 文件（它将存储在每个测试环境中的同一位置），并读取值。虽然我已经很长时间没有这样做了，所以我不记得我的确切实现，但是网络上有很多文档用于在 C# .NET 中读取 XML。从我的测试类中，我继承了读取配置值的类，然后从测试类中的测试设置方法中，这将使用 XML 文件中的浏览器 URL 启动浏览器并开始测试。如果您不知道如何创建测试设置方法，我会查看您正在使用的测试框架的文档（很可能是 Visual Studio 单元测试框架，因为它默认用于编码 UI 测试）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T17:33:02.260

如果你使用默认的测试生成器生成测试，你可以尝试在你的`[CodedUITest]`类上写这样的东西：

```
[TestInitialize()] 
public void MyTestInitialize() 
{ 
    // the url I could read from a config file
    string url = "http://stackoverflow.com/"; 

    this.UIMap.RecordedMethodXXParams.XXChWindowUrl = url; 
} 
```

自动生成的位置`RecordedMethodXXParams`和位置。`XXChWindowUrl`您可以在`UIMap`类中检查生成的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-17T11:54:24.720

这为时已晚，但以防万一它对读者有所帮助。

您无需为此在 MTM 中创建多个测试计划或测试套件。您需要的是，构建足够智能，可以根据目标环境选择正确的配置。正如 Ciaran 建议的那样，您可以使用包含每个环境的所有详细信息的 xml 配置，然后编写一些过滤代码来根据目标环境过滤掉详细信息，但可维护性可能会变得有点痛苦。理想情况下，您希望 app.config 有一个 xml 布局，它将根据目标环境为每个配置加载不同的值。即app.config中的xml是根据目标环境进行转换的。

[SlowCheetah](https://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5)正是为您做到这一点。实现这一点需要一些阅读和理解。

完成所有转换后，使用 Visual Studio 中的“配置管理器”来描述所有目标环境。您可以在 Visual Studio 中绿色开始/运行按钮旁边的下拉列表中找到它。

使用构建定义的 Process>Build>Configurations 部分创建针对每个测试环境的测试代码（即编码的 UI 测试项目）的单独 CI 构建（即 trigger = checkin）。

为每个使用来自测试管理器的相同测试套件的目标环境创建一个实验室测试运行版本（即使用 LabDefaultTemplate 的版本）。确保每个构建都映射到流程工作流向导的构建部分中的相应 CI 构建。

将所有构建排成队列，您将让所有构建同时在所有环境中一起运行，并且每个构建都巧妙地选择正确的配置。

# php - 通过cron运行时从包含HTML代码的PHP变量生成图像

> ID：15719612
> 
> 赞同：1
> 
> 时间：2013-03-30T14:27:28.467
> 
> 标签：php, html, cron, screenshot

我有 PHP 变量，其中包含一些 HTML 代码。为了演示，假设变量包含

```
// abc.php file
$table =  '<table>';
$table .=    '<tr><td>Hi there!</td></tr>';
$table .=    '<tr><td>How are you</td></tr>';
$table .= '</table>';
echo $table; 
```

我打算`abc.php`完成一个 cron 作业。那么是否有可能将要生成的输出`abc.php`转换为图像并存储在文件夹中？

所以基本上当`abc.php`完成解析时，应该在 cron 作业完成时创建一个图像。这甚至可能吗？

PS：我已经查看了`Phantomjs`似乎非常适合此类任务的设计，但它存在一些问题：

(a) 它依赖于平台（Windows、Linux、Mac OS 等）

(b) 我想避免`.exe`在我的服务器上使用文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:29:01.147

如果您只需要表格，将输出保存为 .xls 文件会更容易，您可以在需要时将其包含到 ppt 文件中。

# android - 底部按钮消失

> ID：15719613
> 
> 赞同：0
> 
> 时间：2013-03-30T14:27:31.990
> 
> 标签：android, android-layout

很可能之前有人问过类似的问题，但我无法找出相关的关键字来找到相同的问题。

我正在制作一个应用程序，我设计的布局是：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".Scheduler" >

    <EditText
        android:id="@+id/addressee"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="@string/addresseeHint"
        android:inputType="number" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:weightSum="2" >

        <EditText
            android:id="@+id/date"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:hint="@string/scheduleDate"
            android:inputType="date" />

        <EditText
            android:id="@+id/time"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:hint="@string/scheduleTime"
            android:inputType="time" />
    </LinearLayout>

    <EditText
        android:id="@+id/smsText"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="top"
        android:hint="@string/smsTextHint"
        android:inputType="text" />

    <Button
        android:id="@+id/scheduleText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="onClick"
        android:text="@string/scheduleTextButton" />

</LinearLayout> 
```

出现的布局如下：

![在此处输入图像描述](../Images/12191bd40db0fd7c791ff44e093bdfc3.png)

我想要的看起来像这样：

![在此处输入图像描述](../Images/238036281f28e03b00aa46c15d884811.png)

问题是`Button`底部的 (id:scheduleText) 消失了，原因是它上面`layout_height`的集合的参数是. 但我想我不能为它提供任何特定的价值，因为布局在不同的设备上看起来会有所不同？`EditText``fill_parent`

我怎样才能修复这个错误？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T14:31:35.613

嗨，您的 EditText 有一个填充父级的高度，这使得它填充父级并且按钮将不可见，所以让它像这样：

```
<EditText
        android:id="@+id/smsText"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:gravity="top"
        android:hint="@string/smsTextHint"
        android:inputType="text" /> 
```

**更新：**

我更新了答案以扩展编辑文本并填充屏幕，但也为按钮留出空间。诀窍是使用重量..

# bash - 如何转换文本文件中的所有数字

> ID：15719615
> 
> 赞同：0
> 
> 时间：2013-03-30T14:27:55.523
> 
> 标签：bash, text, command-line

我有一个 XML 文件，其中包含数字等内容。就像是：

```
<things>
    <a name="cat">
        <vecs>(100,20),(200,40),(50,85)</vecs>
    </a>
    <b name="dog">
        <vecs>(0,10),(5,75)</vecs>
        <ratio>85.5</ratio>
    </b>
    ... many more elements and numbers ...
</things> 
```

不幸的是`<vecs>`，我文件中包含元素的所有数字都比应有的大 4 倍。我需要将它们全部乘以 0.25。中的数字`<ratio>`和其他元素都很好。例如，`<vecs>`上面的第一行*应该*是：

```
<vecs>(25,5),(50,10),(12.5,21.25)</vecs> 
```

是否有一种方便的解决方案（例如 UNIX 命令行工具、bash 脚本等）来处理文件，以便我可以找到存在于特定上下文中的所有数字（例如`<vecs>`和之间`</vecs>`），对它们执行数学运算，以及用操作的结果替换每个实例中的现有数字文本？

不，我不是要你写一个完整的程序来详细解决这个特定的问题。我想知道是否有用于此类目的的现有工具或可以完成这项工作的现有工具的巧妙组合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:05:04.473

问题本身相当简单，但语法不常见，必须使用通用脚本语言来解决问题。例如在 Python 中你会写这样的东西

```
from __future__ import print_function
import re

def transform(match):
 return '(%.2f,%.2f)' % (int(match.group(1))*0.25,
                         int(match.group(2))*0.25)

for line in file('test.xml'):
    if '<vecs>' in line:
        print(re.sub(r'\((\d+),(\d+)\)',transform,line),end='')
    else:
        print(line,end='') 
```

对于特定问题，最好的办法是学习一种脚本语言并用它来解决它们。

如果你想使用 unix 工具来做这种事情，sed 和 awk 是你的朋友。

# c# - Converting a collection of objects in a non-terminating stream into an IObservable

> ID：15719618
> 
> 赞同：2
> 
> 时间：2013-03-30T14:28:21.947
> 
> 标签：c#, stream, json.net, deserialization, system.reactive

I have a `Stream` containing a collection of objects serialized into JSON, for example:

```
{"Name":"Alice","Age":20}{"Name":"Bob","Age":30}{"Name":"Charlie","Age":35}{"Name":"Danielle","Age":50}... 
```

This stream may be very large so I want to process the items as they come in rather than reading the entire stream into a string. Also if the stream is a network stream it be open indefinitely.

Some of the objects may be quite complex so I would like to take advantage of the JSON serialization provided by JSON.NET.

Is there a way I can use Newtonsoft Json to convert the stream into an `IObservable<Person>` and process the items reactively as they arrive?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T16:13:08.933

If you could modify your input so that it looks like a JSON array, then you could use `JsonTextReader` directly to read the array parts and then use `JsonSerializer` to read the objects inside the array.

This way, the results can be streamed, while you don't have to deal with all the deserialization.

The method producing an `IObservable` could look something like:

```
public static IObservable<T> DeserializeAsObservable<T>(this TextReader reader)
{
    var jsonReader = new JsonTextReader(reader);

    if (!jsonReader.Read() || jsonReader.TokenType != JsonToken.StartArray)
        throw new Exception();

    var serializer = JsonSerializer.Create(null);

    return Observable.Create<T>(o => 
        {
            while (true)
            {
                if (!jsonReader.Read())
                    o.OnError(new Exception());
                if (jsonReader.TokenType == JsonToken.EndArray)
                    break;
                var obj = serializer.Deserialize<T>(jsonReader);
                o.OnNext(obj);
            }
            o.OnCompleted();
            return Disposable.Empty;
        });
} 
```

(Obviously use this only after replacing `new Exception()` with a more suitable exception type.)

# html - Firefox：父级感觉不到动态内容宽度

> ID：15719622
> 
> 赞同：0
> 
> 时间：2013-03-30T14:28:50.820
> 
> 标签：html, css, firefox, css-float

[例子](http://jsfiddle.net/vZkzR/1/)

如果父元素的相邻元素浮动，则父元素感觉不到元素的宽度，如果是动态的。在 chrome 和 opera 中工作正常。

```
<div class="b-wrap">
    <div class="b-content">
        <div class="b-rect-left"></div>
        <div class="b-rect-right"></div>
        <div class="b-child-cont">джигурдаололо</div>
    </div>
</div>

.b-wrap {
    background-color: red;
    height: 50px;
   float: left;
}

.b-content {
    margin: 5px;
    overflow: hidden;
}

.b-rect-left {
    width: 40px;
    height: 40px;
   float: left;
    background-color: orange;
}

.b-rect-right {
    width: 30px;
    height: 30px;
    float: right;
    background-color: green;
}

.b-child-cont {
    overflow: hidden;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T14:44:19.590

只需添加此 Firefox 异常

```
@-moz-document url-prefix() {
.b-wrap{width:175px;}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T15:11:32.703

Firefox 计算包含浮动元素的元素的宽度与 Chrome 不同。我不知道为什么。

但是，似乎正在发生的事情如下。

代码段中的实际内容是 in `b-child-cont`，一个非浮动元素。`b-child-cont`确定宽度，`b-content`因为其他两个元素是 (`b-rect-left`和`b-rect-right`) 是浮动的，并且不会影响确定内容的宽度。反过来， 的宽度`b-content`设置 的宽度`b-wrap`，因为`b-wrap`是浮动的，并采用其子元素的宽度。

You as a designer and developer, need to allow some space for the two floated elements. You can do this in many ways. I will give two examples.

(1) Add left and right margins to `b-child-cont`:

```
.b-child-cont {
    overflow: hidden;
    background-color: yellow;
    margin-left: 40px;
    margin-right: 30px;
} 
```

(Note: I added a background color to show the extend of the element.) The 40px and 30px values are based on the widths of the left and right square elements respectively.

(2) You can also specify a with to the parent element containing the floats:

```
.b-child-cont {
    overflow: hidden;
    background-color: yellow;
    text-align: center;
}
.b-content {
    width: 30em;
} 
```

In this case, I set the with of `b-content` to 30em (you can adjust this accordingly) and I centered the text in `b-child-cont`.

You have come across a cross-browser discrepancy in how the CSS box model is calculated. Once you are aware of it, you need to design around it, but that is not too hard to do.

Fiddle Reference: [http://jsfiddle.net/audetwebdesign/dzK73](http://jsfiddle.net/audetwebdesign/dzK73)

# ruby-on-rails - 在视图中分离两种类型的多态关联

> ID：15719626
> 
> 赞同：0
> 
> 时间：2013-03-30T14:29:09.850
> 
> 标签：ruby-on-rails, ruby-on-rails-3, polymorphic-associations

我在属于标签的团队和玩家之间有多态关联，每个标签都属于一篇文章。

```
class Tag < ActiveRecord::Base
  attr_accessible :article_id, :tagable_id, :tagable_type

  belongs_to :tagable, :polymorphic => true
  belongs_to :article
end 
```

由于球队和球员都有不同的领域，我如何在我的文章显示页面中将两者分开？

这不起作用

```
 <% @article.tags.each do |tag| %>
      <%= tag.nickname if tag.tagable_type = "Player" %>
      <%= tag.name if tag.tagable_type = "Team" %>
  <% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T14:45:04.480

试试这个：

```
<% @article.tags.each do |tag| %>
  <%= tag.nickname if tag.tagable_type == "Player" %>
  <%= tag.name if tag.tagable_type == "Team" %>
<% end %> 
```

# processing.js - 鼠标点击之间的时间 processing.js

> ID：15719633
> 
> 赞同：0
> 
> 时间：2013-03-30T14:30:34.663
> 
> 标签：processing.js

我想以毫秒为单位获得连续鼠标点击之间的时间。这是我尝试过的：

```
void setup(){
  size(512,512);
  background(100,100,0);
}

void draw(){
}

void mousePressed(){
  println(new Date() - oldtime);
  var oldtime=new Date();
  } 
```

问题似乎是 processing.js 不记得调用 mousePressed() 之间的 oldtime 值。

在第一次调用时，之前没有鼠标点击，oldtime 未定义，时间应该是 NaN。但是在第一次点击之后，oldtime 就设置好了，所以上面应该可以工作。我试着做

```
var oldtime=new Date(); 
```

在 mousePressed() 之外，这样第一次调用就不会是 NaN，但没有运气。

非常感谢您的帮助。

============================

问题与变量“范围”有关。这现在有效

```
var oldtime=new Date();

void setup(){
  size(512,512);
  background(100,100,0);
}

void draw(){
}

void mousePressed(){
  println(new Date() - oldtime);
  oldtime=new Date();
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T18:43:42.980

有一个内置的方法/函数`millis()`，不需要使用 Date 类。也没有理由调用 var。我还将在 setup 方法中初始化您的类和变量。以下是这些更改在处理语法时在您的代码中的外观：

```
int oldtime;

void setup(){
  size(512,512);
  background(100,100,0);
  oldtime = millis()
}

void draw(){
}

void mousePressed(){
  println(millis() - oldtime);
  oldtime = millis()
} 
```

如果您熟悉 JavaScript，您可能会发现直接在 javascript 中使用处理是有益的。这样就可以轻松混合和匹配您需要的内容并使用标准的 JavaScript 调试工具。这里有一个关于如何做到这一点的很棒的教程：

[http://processingjs.org/articles/jsQuickStart.html#javascriptonlyprocessingcode](http://processingjs.org/articles/jsQuickStart.html#javascriptonlyprocessingcode)

# excel - 创建图表，范围是用户选择的区域 - 对象不支持此属性或方法

> ID：15719635
> 
> 赞同：0
> 
> 时间：2013-03-30T14:31:01.440
> 
> 标签：excel, vba

所以我需要创建一个图表，并且所述图表中的数据需要是用户当前突出显示的范围，我做得很好并且图表创建但错误“对象不支持此属性或方法”被抛出，有人可以帮我解决这个错误吗，我尝试了多种不同的方法来创建图表，这是唯一接近工作的方法

我创建图表的代码：

```
Sub CreateChart()
ActiveSheet.Shapes.AddChart.Select
ActiveChart.ChartType = xlBarClustered
ActiveChart.SetSourceData Source:=ActiveSheet.range(Selection.Address)
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:42:53.017

您的问题几乎没有可能的答案。首先，如果您运行宏，用户可能会选择一些范围。这意味着您只需要以下代码即可成功：

```
Sub CreateChart()
    ActiveSheet.Shapes.AddChart.Select
    ActiveChart.ChartType = xlBarClustered
End Sub 
```

如果您仍然需要设置对选定范围的引用，您可以这样做：

```
Sub CreateChart_modif()
    Dim rngSel As Range
    Set rngSel = Selection

    ActiveSheet.Shapes.AddChart.Select
    ActiveChart.ChartType = xlBarClustered
    ActiveChart.SetSourceData source:=rngSel
End Sub 
```

# ios - IOS url Scheme launch custom UIView inside my application

> ID：15719648
> 
> 赞同：0
> 
> 时间：2013-03-30T14:32:26.563
> 
> 标签：ios, url-scheme

I have a custom UIView in my application that I would like to make available to other applications to call using a url scheme. How would I accomplish this?

I’m able to call the application with a url scheme and it launches the application with the custom UIView, but it does not leave the calling application in place.

I would like to just create the custom UIView and have it display over a certain part of the screen in the calling application. Can this be done? I would also like to call this from a UIWebView with JavaScript window.location.

Thank You

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:21:27.690

You can't display custom UIView over part of the screen on top of calling app. All you can do it add a url handler so your app comes to foreground when calling app initiates your custom url.

I'm not sure about your second question, but I would guess it won't work - why don't you try opening your custom url in a UIWebView?

# c# - 如何在运行时更改我的项目模板的颜色

> ID：15719651
> 
> 赞同：0
> 
> 时间：2013-03-30T14:32:38.253
> 
> 标签：c#, xaml, mvvm, windows-store-apps

我想在运行时更改网格的颜色，并在 mainpage.xaml 的 gridview 中显示此项目模板...这里我尝试过此项目模板在 StandardStyle.xaml 中...

```
<DataTemplate x:Key="Standard250x250ItemTemplate">
    <Grid Name="grid1"  HorizontalAlignment="Left" Width="370" Height="200">

        <Grid.ColumnDefinitions>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="40"></RowDefinition>
            <RowDefinition ></RowDefinition>
        </Grid.RowDefinitions>

        <Border  Grid.ColumnSpan="2" Grid.Row="0" Background="{StaticResource ListViewItemPlaceholderBackgroundThemeBrush}" Height="30">
            <!--<Image Source="{Binding Image}" Stretch="UniformToFill" AutomationProperties.Name="{Binding Title}"/>-->
            <TextBlock Text="{Binding ProjectName}"  FontSize="20" Foreground="#FFCBD3D4" Style="{StaticResource TitleTextStyle}" TextAlignment="Center"/>
        </Border>
        <StackPanel Name="spname" Width="Auto" Grid.Column="0" Grid.Row="1" Orientation="Vertical"  Background="{StaticResource ListViewItemOverlayBackgroundThemeBrush}" VerticalAlignment="Stretch">
            <TextBlock Text=" Project Code   "  FontSize="25" TextWrapping="NoWrap" Foreground="{StaticResource  ListViewItemOverlaySecondaryForegroundThemeBrush}" Height="50" Width="200" TextAlignment="Left" />
            <TextBlock Text=" ProjectManager"  FontSize="25" TextWrapping="NoWrap" Foreground="{StaticResource  ListViewItemOverlaySecondaryForegroundThemeBrush}" Height="50" Width="200"  TextAlignment="Left" />
            <TextBlock Text=" Project Status " FontSize="25" TextWrapping="NoWrap" Foreground="{StaticResource  ListViewItemOverlaySecondaryForegroundThemeBrush}" Height="50" Width="200"  TextAlignment="Left" />
        </StackPanel>
        <StackPanel Name="sp1" Width="200" Orientation="Vertical" Grid.Column="1"  Grid.Row="1"  Background="{StaticResource ListViewItemOverlayBackgroundThemeBrush}">
            <TextBlock Text="{Binding ProjectCode}" FontSize="25" TextWrapping="NoWrap" Foreground="{StaticResource ListViewItemOverlaySecondaryForegroundThemeBrush}" Height="50" TextAlignment="Center" />
            <TextBlock  Text="{Binding ProjectManagerName}" FontSize="25" TextWrapping="NoWrap" Foreground="{StaticResource  ListViewItemOverlaySecondaryForegroundThemeBrush}" Height="50" TextAlignment="Center"  />
            <TextBlock x:Name="statusblock" Text="{Binding ProjectStatus}" FontSize="25" TextWrapping="NoWrap" Foreground="{StaticResource  ListViewItemOverlaySecondaryForegroundThemeBrush}" Height="50" TextAlignment="Center"  />
        </StackPanel>
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup  x:Name="CommonStates">
                <VisualStateGroup.Transitions>
                    <VisualTransition From="Normal" To="Colored"  GeneratedDuration="00:00:01"></VisualTransition>
                </VisualStateGroup.Transitions>
                <VisualState x:Name="Normal"/>
                <VisualState x:Name="Colored">
                    <Storyboard>
                        <ColorAnimation Storyboard.TargetName="grid1" Storyboard.TargetProperty="Background" To="Red" >
                 </ColorAnimation>
                    </Storyboard>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
    </Grid>
</DataTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T17:05:08.567

如果您想`Grid color`根据`some property`自己的情况进行更改，`view-model`
也可以执行以下操作...

```
<DataTemplate>
    ...
    <DataTemplate.Triggers>
        <DataTrigger Binding="{Binding Path=Status}" Value="Error">
            <Setter Property="Background" Value="Red" TargetName="grid1" />
        </DataTrigger>
    </DataTemplate.Triggers>
</DataTemplate> 
```

就个人而言，我总是绑定到“状态”类型的属性。
然后使用或者`data trigger`直接绑定`<Grid Foreground="{Binding Status, Converter=statusToColor}" />`并使用转换器来“翻译”。

*（我不确定你是否真的在做某种动画，还是只是试错？）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T15:33:27.750

使用 mvvm，我会将网格颜色绑定到视图模型中的属性，然后您可以随时通过“代码”更改颜色：

```
 private System.Windows.Media.Brush _foregroundColor = System.Windows.Media.Brushes.DarkSeaGreen;

  public System.Windows.Media.Brush ForegroundColor
    {
        get { return _foregroundColor; }
        set
        {
            _foregroundColor = value;
            OnPropertyChanged("ForegroundColor");
        }
    } 
```

确保实现 iNotifyPropertyChanged 以通知 UI 更改

这是xaml

```
 <Grid Background="{Binding Path=ForegroundColor}" /> 
```

# java - 在处理 Twitter 应用程序中移动数据？

> ID：15719656
> 
> 赞同：0
> 
> 时间：2013-03-30T14:33:21.253
> 
> 标签：java, api, twitter, processing

我正在创建一个 twitter 提要，它将一次显示 5 条推文。

推文每五分钟更新一次。一旦找到新推文，我希望顶部的推文移出屏幕，新推文进入最后一个位置，每条推文都向上移动一个位置以允许这样做。

```
import com.francisli.processing.http.*;

HttpClient client;

HashMap Tweetzer = new HashMap();

int results_to_show = 5;
int updateTime = 10000;
int updateDiff = 0;

void setup()
{
    size(612, 612);
    textAlign(CENTER, CENTER);
}

void tweetUpdate()
{
    if(millis() > (updateTime + updateDiff))
    {
        client = new HttpClient(this, "search.twitter.com");
        client.GET("search.json?q=dublin&rpp="+results_to_show+"&result_type=recent");
        updateDiff = millis();
    }  
}

void mouseReleased()
{
    tweetUpdate();
}

void draw()
{

}

void responseReceived(HttpRequest request, HttpResponse response)
{
    if(response.statusCode == 200)
    {
        JSONObject allresults;
        allresults = response.getContentAsJSONObject();
        //JSONObject timeline_tweets = response.getContentAsJSONObject();

        for (int i=0; i<results_to_show; i++)
        {
            text(allresults.get("results").get(i).get("text").stringValue(), 50, 10+(i*100), 400, 400);
        }

    }

    else
    {
        text("UH-OH" + response.getContentAsString(), 50, 50);
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:07:34.373

在`LinkedList`Java 中将是一个很好的解决方案。`LinkedList.remove()`将摆脱最旧的项目，`LinkedList.add()`并将新项目添加到队列中。查看[队列接口](http://docs.oracle.com/javase/6/docs/api/java/util/Queue.html)的文档以获取更多信息。下面是一个简单的例子：

```
import java.util.LinkedList;

LinkedList myList;
int count = 1;

void setup() {
  myList = new LinkedList();
  for (int i = 0; i < 5; i++) {
    myList.add(count++);
  }
  frameRate(2);
}

void draw() {
  myList.remove();
  myList.add(count++);
  println(myList);
} 
```

# android - Google Playstore：使用不同证书时替换应用程序？

> ID：15719657
> 
> 赞同：3
> 
> 时间：2013-03-30T14:33:47.867
> 
> 标签：android, certificate, signature

由于硬盘损坏，我丢失了迄今为止用于所有应用程序的证书。它意外地没有存档在我的修订控制系统中。所以现在真的失传了。

此后，Playstore 不接受我的应用程序，因为它们是使用新证书签名的。那么我必须有哪些选择才能真正*替换*这些应用程序？当我搜索这个问题时，我发现的唯一建议是完全重命名应用程序并替换它。但是：同时是否有不同的解决方案？重命名/替换将导致大量用户流失，因为许多人不会意识到应用程序已经以这种方式改变......

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T14:41:03.643

不幸的是，如果您丢失了密钥库，Google Play 会假定您不是该应用的所有者。所以只有一种方法：“发布一个带有新包名和签名的新应用程序”。

我很抱歉，但没有其他办法。联系谷歌寻求帮助可能是他们可以提供帮助（可能他们不会帮助但试一试）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-04T20:04:23.653

Google Play 现在有一种机制来处理丢失和泄露的密钥。它要求您创建一个新的密钥库和相应的 pem 证书，以便他们可以针对新的密钥库注册您的应用程序。

此处描述了[丢失或泄露的私钥](https://support.google.com/googleplay/android-developer/answer/7384423?hl=en-GB)。

将此信息移动（以及出于历史记录目的）的步骤是

1.  创建新的密钥库。
2.  使用命令导出您的证书

    keytool -export -rfc -alias -file -keystore

3: Contact google play android developer support team using there predefined form [lost key support](https://support.google.com/googleplay/android-developer/contact/otherbugs)

# html - Jade：更改父模板中的活动菜单项

> ID：15719660
> 
> 赞同：31
> 
> 时间：2013-03-30T14:34:15.820
> 
> 标签：html, pug

我的父玉模板中有一个导航栏，我想突出显示当前正在查看的项目。所以如果我在博客页面上，

```
ul
  li Home
  li.active Blog
  li Contact Us
  li About 
```

如果不将导航栏结构复制到每个子模板中，有没有办法让父模板查看它正在扩展的页面并`active`相应地应用类？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-03-31T16:46:11.347

**父级玉**

```
doctype 5

html
  block link
    -var selected = 'home'; //default

  -var menu = { 'home': '/home', 'blog': '/blog', 'contact': '/contact' };

  body
    nav
      ul
        each val, key in menu
          li
            if selected === key
              a.selected(href=val, title=key)= key
            else
              a(href=val, title=key)= key 
```

**子玉**

```
extends parent

block link
  -var selected = 'blog'; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-12-16T21:55:38.823

这是一个更简单的方法：

在你的 layout.jade 中使用它（`nav`例如，活动页面的名称在哪里。nav = 'about'）

```
ul(class="#{nav}")
  li.home Home
  li.blog Blog
  li.contact Contact Us
  li.about About 
```

然后把这是你的CSS：

```
ul.home li.home,
ul.blog li.blog,
ul.contact li.contact,
ul.about li.about {
    color: red;
} 
```

唯一适用的 CSS 规则是其`ul`类存在的规则。您需要传入一个`nav`等于“about”、“home”、“contact”或“blog”的变量，具体取决于您所在的页面。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-03-07T06:03:50.033

将 [Current 对象](http://harpjs.com/docs/development/current)与三元表达式一起使用。一切都在文档中。

您可以像这样使用对象属性来生成活动菜单。如果您想在导航菜单中使用文件夹（Jade 版本）：

```
ul(class="nav-menu")
            li: a(class="#{ current.path[0] === 'index' ? 'active' : '' }", href="/") home
            li: a(class="#{ current.path[0] === 'about' ? 'active' : '' }", href="/about/") about
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-22T00:07:41.813

好吧，上面的解决方案非常清楚，但是如果有人正在寻找更多对菜单的控制，那么有一个可用于 node.js 的模块。使用它，您将完全控制菜单。

用例：当菜单基于角色可见时

[https://www.npmjs.com/package/active-menu](https://www.npmjs.com/package/active-menu)

# c# - 在 .Net 4.0 中，数据访问应用程序块仍然是实现数据连接的方式吗？

> ID：15719663
> 
> 赞同：2
> 
> 时间：2013-03-30T14:34:41.503
> 
> 标签：c#, data-access-layer

由于我的工作需要，我已经在 2.0 中停留了一段时间，我现在正努力跟上最新的 .net 框架。我开始构建一个 Mvc 应用程序，我想知道数据访问应用程序块 (SqlHelper) 是否仍然是编写数据层的可接受方法。

我知道关于 EF 存在很多争论，包括它的速度性能、延迟加载以及将数据库与应用程序分开的问题。所以我犹豫现在去那里。

但是我看到很多只使用 ADO.Net 和 DataAdapter 的代码，我想知道是否在没有帮助框架的情况下转向 ADO.net。如果这是正确的，那么我的问题是为什么？不使用某种类型的辅助类/框架来进行数据访问似乎是一种倒退。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T14:46:13.940

[如今， ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)的使用被视为最佳实践，并且随着其他更易于使用的库在 .NET 世界中的出现和突出，数据访问应用程序块已经失宠。

这些将包括 nHibernate、LINQ to SQL、实体框架，以提及大型、功能齐全的库（一些比其他功能更全）。

直接使用 ADO.Net 的人是那些希望对他们的 SQL 进行更多控制的人，而不是这些人（使用 ORM 总是可能的，但是当涉及到访问数据库而不是通过他们的习惯用法时，他们往往相当麻烦）。

一个轻量级 ORM 示例是[Dapper](https://code.google.com/p/dapper-dot-net/)，它是 ADO.Net 上的一个非常薄的层。

# c# - 如何在记事本上编写和测试 ASP.NET 4？

> ID：15719665
> 
> 赞同：1
> 
> 时间：2013-03-30T14:34:53.963
> 
> 标签：c#, asp.net, master-pages, notepad

条件：

1.  我被要求**在记事本**中开发一个简单的 ASP.NET 4(C#) 项目。我对这个领域完全陌生。

2.  完成的项目应该包括**几个 .aspx 文件**、**一个母版页**、**一个站点地图**和**一个 web.config**。

3.  我正在使用的这本书是一本初学者烹饪书，基于使用 Visual Studio 2010 Express。

4.  在记事本上开发它是这项学校作业的要求。问题：

5.  据我所知，VS2010 具有内置的开发 Web 服务器，而记事本没有。我应该通过在浏览器中打开记事本文件来测试 .aspx 文件吗？带有 runat="server" 的标签会起作用吗？

6.  有没有你知道的有用的网站或帖子？

7.  我应该如何测试母版页？

原谅我的菜鸟问题。我能找到的大多数网站是教人们如何使用 VS2010 进行开发，就像我的书一样，而不是记事本。日程安排很紧，所以我需要一些帮助。感谢您的时间。当我完成这项任务时，我也会分享我的经验。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T14:59:50.297

它比 "runat="server"" 稍微复杂一些。

要给出一点 101，您将需要：

1.  一个网络服务器。最自然的使用是 IIS。如果您喜欢冒险，我相信您也应该能够使用 Apache。

2.  应用程序框架。你猜怎么着，它是.NET！如果您不使用 IIS，还有 Mono。应用程序框架还应该包括编译器。C# 是一种编译语言，因此在运行代码之前，您必须先对其进行编译。与 PHP 相比，这略有不同。

3.  编辑。您应该可以使用记事本，但 Visual Studio 为您提供的不仅仅是精美的文本编辑器。它帮助您创建构建脚本（发送给编译器的命令），帮助您组织项目，并帮助您调试。

所以只使用记事本是可行的，但你会因为不使用像 Visual Studio Express 这样的免费工具而浪费很多时间。

**现在来实际回答你的问题：**

1.  不，它不是那样工作的。您将需要一个 Web 服务器（参见上面的第 1 点）和一个编译器（参见上面的第 2 点）。

2.  这有点太宽泛了。你的书应该是一个很好的起点。

3.  见答案 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T15:29:37.247

我已经完成了那个任务。这是我的经验：

首先，在记事本或文本板上开发一个 ASP.NET 项目是非常不明智的，除非您想测试您的编码技能或有其他原因。因为对于初学者来说，测试代码的最佳方法是使用 VS“Ctrl+F5”。如果您在记事本/文本板中编写代码并在 VS 中对其进行测试，这有点违背了最初的目的。

有一些小窍门，适合我这样的初学者。

1.  将您的站点地图文件命名为“ **web.sitemap** ”，并将其放在项目的**根目录**中，否则您可能需要经历复杂的配置过程。

PS 这不是强制要求，可以更改文件名或目录，但需要在“web.config”中添加站点地图提供者。

2 仔细选择您的解决方案或项目根目录，因为重新定义它并不容易。

PS 我花了很多时间在 Windows 资源管理器中移动文件，因为我想将当前的解决方案目录更改为另一个文件夹。

这些是我认为最有用的技巧。如果我一开始就知道这些，我会节省至少 2 个小时。

# python - listctrl 数据项的新行

> ID：15719667
> 
> 赞同：0
> 
> 时间：2013-03-30T14:35:16.680
> 
> 标签：python, wxpython, listctrl

我创建了一个 listctrl，其中 listctrl 中的一些数据很长，而不是显示它以 . 结尾的所有文本`...`。例如`Att PSSM_r1_0_T is [-10.179077,0.944198]|Att PSSM_r1_0_Y is...`. 我怎样才能使它显示所有文本。就像是

`Att PSSM_r1_0_T is [-10.179077,0.944198]|Att PSSM_r1_0_Y is [-4.820935,9.914433]|Att PSSM_r1_2_I is [-8.527803,1.953804]|Att PSSM_r1_2_K is [-12.083334,-0.183813]|Att PSSM_r1_2_V is [-14.112536,5.857771]|1`

由于文本很长，我希望它覆盖不止一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T17:51:23.440

我认为这与标准的 listctrl 无关。

尝试在 UltimateListCtrl 上四处寻找，作为一个完整的所有者绘制的 listctrl，它能够改变其外观的方式远远超过标准的 listctrl。

# linux - `make install` 后内核编译和缺少模块错误

> ID：15719669
> 
> 赞同：-1
> 
> 时间：2013-03-30T14:35:25.943
> 
> 标签：linux, linux-kernel, virtualization, rhel, vmware-workstation

我正在编译从 RHEL 6.2（VMWARE 虚拟机）上的 redhat 的 ftp 服务器下载的内核 2.6.32-220.el6。我已经从下载的 rpm 中提取了内核源代码，并在其中解压了包含源代码的实际 .bz 并将其复制到 /usr/src/kernel。之后，我执行了以下步骤：

make menuconfig /*这里我禁用了“模块版本支持”和“模块签名验证”* /

打扫干净

制作

制作模块

制作modules_install

进行安装

现在一切正常，直到`make install`. 在这一点上，它给了我以下错误：

[root@localhost linux-2.6.32-220.23.1.el6 G2]# make install

> sh /usr/src/kernels/kernel-2.6.32-220.23.1.el6.src/linux-2.6.32-220.23.1.el6/arch/x86/boot/install.sh 2.6.32 arch/x86/启动/bzImage \ System.map "/boot"
> 
> 错误：modinfo：找不到模块 vmhgfs
> 
> 错误：modinfo：找不到模块 vsock
> 
> 错误：modinfo：找不到模块 vmci

我搜索了这些模块，所有三个模块都存在于 /lib/modules/2.6.32-220.el6.x86_64/misc/ 中。

我不知道如何解决这个问题。这似乎是虚拟机问题，因为我在 VM 上执行此操作。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:41:07.573

我建议如下：

1.  首先备份您的虚拟机。
2.  卸载 VMware 工具。
3.  再次尝试上述步骤。
4.  重新安装 VMware 工具。

# java - 获取所选项目的位置...？

> ID：15719670
> 
> 赞同：3
> 
> 时间：2013-03-30T14:35:27.167
> 
> 标签：java, android, sql

我对Android很陌生。这是部分代码：

```
protected void onListItemClick(ListView l, View v, int position, long id) {
super.onListItemClick(l, v, position, id);
Note selectedName = adapter.getItem(position);
adapter.removeItem(selectedName); 
```

如您所见，位置表示选定项目的位置。那挺好的。但我更喜欢长按：

```
public boolean onContextItemSelected(MenuItem item) {
switch(item.getItemId()) {
case R.id.ctxmemu_delete:
** I need to use POSITION mentioned above! ** 
```

但是在这个方法中`getSelectedItemPosition`返回位置-9995845834585（或类似的东西）或者它给出错误（不能将光标移动到位置 - 我在我的应用程序中使用SQL）

如何正确从列表中获取位置？PS对不起我的英语不好:(

UPD：我已将此添加到我的 SQL 适配器中：

```
public int getPosition(){
return cursor.getPosition();    } 
```

并修改：

```
case R.id.ctxmemu_delete:
int position = adapter.getPosition();
Note seln = adapter.getItem(position);
adapter.removeItem(seln);
return true; 
```

现在它可以工作了......但我认为它是如此丑陋......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:41:41.900

您只需要使用 onListItemLongClick() 而不是 onListItemClick()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T14:42:04.513

为什么不使用 a**`onListItemLongClick listener`**而不是使用上下文菜单？

```
protected void onListItemLongClick(ListView l, View v, int position, long id) {
super.onListItemLongClick(l, v, position, id);
Note selectedName = adapter.getItem(position);
adapter.removeItem(selectedName);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T14:43:29.087

```
public boolean onContextItemSelected(MenuItem item) { ... } 
```

由于您正在使用[`ContextMenu`](http://developer.android.com/reference/android/view/ContextMenu.html)这与[`ItemClickListener`](http://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html)

您可以使用**MenuInfo**来获取位置`ListView`

```
AdapterView.AdapterContextMenuInfo info = 
                         (AdapterView.AdapterContextMenuInfo) item.getMenuInfo(); 
```

它具有返回显示上下文菜单的适配器中的位置的`int`属性。`info.position`

**注意：**你也可以看看[`OnItemLongClickListener`](http://developer.android.com/reference/android/widget/AdapterView.OnItemLongClickListener.html)类似的作品。

# android - 如何在布局上膨胀 ImageView 对象的新副本？

> ID：15719674
> 
> 赞同：2
> 
> 时间：2013-03-30T14:35:57.063
> 
> 标签：android, imageview, coordinates, inflate, absolutelayout

我想要做的是创建ImageView 对象的*N*个（在本例中为 9 个）副本`R.id.tile`，将它们中的每一个放置在布局上的不同坐标处，并为每个对象提供自己的唯一标识符。

**board_layout.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/backgroundcolor"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/topbar"
        ... >

        <ImageButton
            android:id="@+id/imagebutton"
            ... />

    </LinearLayout>

    <RelativeLayout
        android:id="@+id/board"
        android:layout_width="match_parent"
        android:layout_height="345dp"
        android:layout_centerVertical="true"
        android:background="@drawable/wwfboard" >

        <view class="languid.legend.xsolver.DrawView"
            android:id="@+id/myView"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" />

        <ImageView
            android:id="@+id/tile"
            android:layout_width="21dp"
            android:layout_height="21dp"
            android:src="@drawable/tile" />
    </RelativeLayout>

</RelativeLayout> 
```

**BoardLayout.class:**

```
@Override
protected void onCreate(Bundle savedInstance)
{   super.onCreate(savedInstance);
    setContentView(R.layout.board_layout);
    LayoutInflater inflater = (LayoutInflater)this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View[] tiles = new ImageView[9];
    entire_layout = (RelativeLayout)findViewById(R.layout.board_layout);

    for(int i = 0; i<tiles.length; i++){
        tiles[i] = (ImageView) inflater.inflate(R.layout.board_layout, null);
        tiles[i].setId(1000+i);
        params = new RelativeLayout.LayoutParams(-1, 345);
        params.leftMargin = 32*2*i;
        params.topMargin = 34*2*i;
        entire_layout.addView(tiles[i]);
    }
    ... 
```

但是，我在最后一行不断收到**“找不到源”**`layout.addView(tiles[i]);`错误： ..有

什么想法吗？

（附带问题：如果您使用坐标，RelativeLayout 是否比 AbsoluteLayout 更好？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T11:33:51.390

**编辑：**

**首先**创建一个带有你喜欢的属性的 ImageView 的布局

例子：

**在res/layout/singleimage.xml**中创建文件

 **```
<?xml version="1.0" encoding="utf-8"?>
<ImageView xmlns:android="http://schemas.android.com/apk/res/android"
           android:id="@+id/image2"
           android:layout_width="match_parent"
           android:layout_height="match_parent"
           android:src="@drawable/ic_launcher"
           android:contentDescription="Sample"/> 
```

然后像这样膨胀`ImageView`以获得它的副本

```
View[] tiles = new ImageView[9];
// get reference to LayoutInflater
LayoutInflater inflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

for(int i = 0; i<tiles.length; i++) {
    //Creating copy of imageview by inflating it
    ImageView image = (ImageView) inflater.inflate(R.layout.singleimage, null);
    tiles[i] = image;
    tiles[i].setId(i);
    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(-1, 345);
    params.leftMargin = 32*2*3;
    params.topMargin = 34*2*3;
    layout.addView(tiles[i]);
} 
```

* * *

您已在此处设置`id`为`i`值

```
tiles[i].setId(i); 
```

但是您（错误地）试图从您的其他资源（您想要“克隆”的资源）中获取它：

```
layout.addView(tiles[i] = (ImageView) findViewById(R.id.tile)); // INCORRECT 
```

相反，`id`如上所述手动设置，然后：

```
layout.addView(tiles[i]); 
```

而且不需要打电话`findViewById()`**

# python - 谷歌应用引擎 python 邮件 api 更改为其他语言的 utf-8？

> ID：15719675
> 
> 赞同：0
> 
> 时间：2013-03-30T14:36:00.880
> 
> 标签：python, google-app-engine

```
body = """
Welcome %s,
Congratulations, you have just joined us.

Start using our site by click the link below:
%s

We hope that you enjoy!

Team.

恭喜妳/你已成為會員。

%s

希望妳能享受使用！

""".encode('utf-8') % (username, request_url, request_url)

mail.send_mail(sender=sender_address, to=email_address, subject=subject, body=body) 
```

好的，这是我到目前为止所拥有的，但它不起作用。我该怎么做才能将 utf-8 编码为邮件 api 并使其适用于在一封电子邮件中使用多种语言？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T14:44:33.323

`.encode('utf-8')`从字符串中生成二进制。您必须使用`.decode('utf-8')` 参见： http: [//blog.notdot.net/2010/07/Getting-unicode-right-in-Python](http://blog.notdot.net/2010/07/Getting-unicode-right-in-Python)以及[http://docs.python.org/2/howto/unicode.html](http://docs.python.org/2/howto/unicode.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T22:54:01.083

我想出了怎么做。

我发现的一种方法是通过 html 发送邮件。

```
ActivationEmailMessage.html = u"""
            <html><head></head><body>
            xxxxxx
            </body></html>
            """.encode('ascii', 'xmlcharrefreplace')

ActivationEmailMessage.send() 
```

# php - PHP 表单通过 URL 传递值

> ID：15719679
> 
> 赞同：3
> 
> 时间：2013-03-30T14:36:29.957
> 
> 标签：php, forms

我有一个登录页面（本地 Intranet，所以不用担心安全问题）。此页面包含以下表单代码：

```
<form action="auth.php" method="get" class="blocklogin">    
<tr>
<td class="blocklogin" ><div align="left">Username:&nbsp; <input class="blocklogin"     type="text" name="username" id="username" /><br />
</div></td>

</tr>
<tr>
<td class="blocklogin" ><div align="left">Password: &nbsp;  <input class="blocklogin"         type="password" name="password" id="password" />
</div></td>

</tr>
<tr>
<td colspan="2" class="blockloginfoot" title="Login"><input name="Login" type="submit"     value="Login" /></td>
</form> 
```

现在我尝试通过执行以下操作通过 http 链接传递用户名和密码：

```
http://localhost/folder/user_login.php?username=user@test&password=test123 
```

但这似乎不起作用，它假设使用链接中的详细信息登录。我错过了什么吗？请帮忙

表单动作 auth.php

```
<?php
session_start();

require_once('database.php');

$username = $_GET['username'];
$password = $_GET['password'];

$sql = "SELECT * FROM access_getaccountswithinfo WHERE username='".$username."' AND     password='".$password."'";

$run = mysql_query($sql);
$row = mysql_fetch_array($run);

if (mysql_num_rows($run) == 1) {
$_SESSION['logged_in'] = true;
$_SESSION['username'] = $row['username'];
$_SESSION['password'] = $row['password'];
$_SESSION['packagename'] = $row['packagename'];
$_SESSION['creation-date'] = $row['creation-date'];
$_SESSION['cap'] = $row['cap'];
$_SESSION['total'] = $row['total'];
$_SESSION['remainingtopup'] = $row['remainingtopup'];

header("location: usage.php");
} else {
header("location: user_login.php");

}

 mysql_close($link);
?> 
```

数据库代码 - database.php ：

```
<?php
$link = mysql_connect('localhost', 'dbase', 'pass123');
if (!$link) {
die('Could not connect: ' . mysql_error());
}

// make dbase the current db
$db_selected = mysql_select_db('dbase', $link);
if (!$db_selected) {
die ('Can\'t use foo : ' . mysql_error());
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T14:45:41.740

如果您通过 url 尝试：

[http://yourserver.com/folder/user_login.php?username=user@test&password=test123](http://yourserver.com/folder/user_login.php?username=user@test&password=test123)

您应该使用`$_GET['username']`and`$_GET['password']`来检索该值。

否则，如果您提交它，请使用`$_POST['username']`和`$_POST['password']`

愿这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T14:47:37.757

您的 html 表单使用“post”方法将数据发送到您的 php 脚本。发布数据在标题中发送，您现在的设置应该可以工作。

通过 url 执行此操作时，您可以使用“$_GET”获取参数，而不是“$_POST”。

另外，请记住 htmlspecialchars() 从表单发送的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T18:37:01.840

而不是使用 URL 将值传递给表单所在的 user_login.php...您必须将其传递给 auth.php，这是实际捕获值的 php，如下所示

```
http://localhost/folder/auth.php?username=user@test&password=test123 
```

# php - PHP MD5 无法正常工作

> ID：15719680
> 
> 赞同：-2
> 
> 时间：2013-03-30T14:36:32.853
> 
> 标签：php, md5

所以我在用户注册和登录时使用 md5 对密码进行编码和解码，但是我的数据库中的密码与登录时使用的密码不匹配，即使我知道它们是同一个词：

这是我的数据库中的内容

098f6bcd4621d373cade4e832

这就是在登录屏幕上使用的密码上使用 md5 给我的

098f6bcd4621d373cade4e832627b4f6

如您所见，还有 7 个额外的字符，但我不知道为什么它们不一样。这是用于在注册时将用户详细信息插入数据库的脚本

```
$qry =  "INSERT INTO Members(fname, lname, fullname, email, login, passwd, bad_league_id) 
         VALUES('$fname','$lname',0,'$email', '$login','".md5($_POST['password'])."',0)";
$result = @mysql_query($qry); 
```

这是我的登录表单比较值的方式

```
$qry="SELECT * FROM Members WHERE login='$login' AND passwd='".md5($_POST['password'])."'";
$result=mysql_query($qry); 
```

另一方面，我目前正在从 mysql 转移到 mysqli，所以请原谅使用 mysql，因为我知道它已被弃用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T14:41:55.497

默认情况下，该函数生成的散列`MD5()`长度为 32 个字符。该`passwd`列的数据类型为 current `VARCHAR (25)`，这意味着它最多只能存储 25 个字符，比实际值少 7 个字符。

要解决此问题，您需要更改`passwd`列的数据类型以便能够存储正确的长度，例如`VARCHAR (32)`.

# ios - xcode 4.6中的“实例消息的接收器类型是前向声明”

> ID：15719681
> 
> 赞同：12
> 
> 时间：2013-03-30T14:36:39.163
> 
> 标签：ios

我想在我的 ViewController 中调用 c++ 类。所以我创建了一个这样的类：Hello.h

```
#import <Foundation/Foundation.h>

@interface Hello : NSObject{
    class NewHello{
    private:int greeting_text;
    public:
        NewHello(){
            greeting_text=5;
        }
        void say_hello(){
            printf("Greeting_Text = %d",greeting_text);
        }
    };   
    NewHello *hello;
}
-(void)sayHellooooo;
@end 
```

你好.mm

```
#import "Hello.h"
@implementation Hello
-(void)sayHellooooo{
    hello = new NewHello();
    hello->say_hello();
}
@end 
```

视图控制器.h

```
#import <UIKit/UIKit.h>
//#include "Hello.h"
@class Hello;

@interface ViewController : UIViewController{
}
@end 
```

视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()
@end
@implementation ViewController
- (void)viewDidLoad
{
    [super viewDidLoad];
        NSLog(@"dddddddd");
    Hello *aa = [[Hello alloc]init];
    [aa sayHellooooo];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}
@end 
```

在项目中运行良好：http: [//files.cnblogs.com/cpcpc/Objective-C%E8%B0%83%E7%94%A8C.rar](http://files.cnblogs.com/cpcpc/Objective-C%E8%B0%83%E7%94%A8C.rar)

但是当我将代码复制到我的项目时，会出现“接收器类型例如消息是前向声明”错误。

如果我更改“@class Hello;” 到#import "Hello.h"，在"class NewHello"中出现"Unkwon type class,did you mean Class"错误。

我使用 xcode 4.6。有人可以帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-30T22:16:49.730

问题是（如您所说） ViewController.m 的文件类型是 Obj-C 而 Hello.h 是 Obj-C++ 文件。解决方案是添加

```
#import "Hello.h" 
```

to your ViewController.m file and change the file type of ViewController.m to Obj-C++ (from the right panel)

# python-2.7 - 在 Windows 7 中为 Python 2.7.x 构建 libpcap

> ID：15719682
> 
> 赞同：0
> 
> 时间：2013-03-30T14:36:43.763
> 
> 标签：python-2.7, windows-7-x64, wireshark, libpcap, pcap-ng

我尝试了几种不同的方法，并在许多论坛上四处寻找这个问题的答案。

我的目标是使用 Python 简单地解析一个 wireshark .pcap-ng 跟踪文件。据我所知，我似乎需要 Python 或 WinCap 的 libpcap 包装器（PyCapy？）

我对 Python 比较陌生，所以如果大家对如何安装这个模块有任何指示，请告诉我。早些时候我安装了一个 32 位版本的 Python 并找到了一个 win32 安装程序，并且能够解析 .pcap 文件，但我真的希望能够解析 .pcapng 文件。谢谢大家，~Kyte

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:16:55.323

可悲的是，这是 Windows，所以 WinPcap 无济于事；libpcap 1.1.0 及更高版本可以读取 pcap-ng 文件，但目前没有基于支持 pcap-ng 的 libpcap 版本的 WinPcap 版本。

也就是说，目前，第一个尝试的软件是[VirtualBox](http://www.virtualbox.org)、[Parallels Workstation](http://www.parallels.com/products/workstation/)或[VMware Workstation](http://www.vmware.com/products/workstation/overview.html)，下一个要尝试的软件是在您的 Windows 机器上运行在虚拟化软件下的某个 Linux 发行版。对不起。

（是的，我必须抽出时间做一些 libpcap 基础设施工作，以使 WinPcap 人员更容易使他们的远程捕获支持与较新版本的 libpcap 一起工作。可悲的是，一天只有 24 小时，而且很多在诸如吃饭和睡觉之类的琐事之后剩下的时间里竞争的其他事情。:-))

*该特定*问题的解决方法是将 Wireshark 的捕获保存为 pcap 格式而不是 pcap-ng 格式，或者使用 Wireshark 工具，例如 editcap（它*可以*在 Windows 上处理 pcap-ng 文件，因为它们不使用 libpcap /WinPcap*读取*捕获文件）从 pcap-ng 转换为 pcap。

libpcap/WinPcap 有几个 Python 包装器 - [python-libpcap](https://sourceforge.net/projects/pylibpcap/)和[Pcapy](http://corelabs.coresecurity.com/index.php?module=Wiki&action=view&type=tool&name=Pcapy)。python-libpcap 页面上有一个守护进程和一个企鹅，所以他们只是在宣传 BSD 和 Linux 支持；它可能适用于其他 UN*X，因为您连接到 libpcap 的方式不应该有重大差异，但可能不适用于 Windows。然而，Pcapy 明确提到了 WinPcap 和 Win32 二进制文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T03:22:00.380

一定要试试@dirkloss 为 Python 2.7 编译的 pcap 二进制文件 | 视窗。

[这里](https://twitter.com/dloss/status/368101423634210816)

我试过了，但我收到了这个错误——所以[qn](http://t.co/QnENkPstgV)

# java - 未在特定 URL 模式上调用第二个 Servlet 过滤器

> ID：15719683
> 
> 赞同：0
> 
> 时间：2013-03-30T14:36:59.187
> 
> 标签：java, servlets, servlet-filters

我正在使用两个过滤器，但未应用第二个过滤器，

这是 InvokeServlet.do 的代码

```
request.getRequestDispatcher("/secured/securedResult.jsp").forward(request, response); 
```

和 web.xml 代码是： -

```
<servlet-mapping>
        <servlet-name>InvokeServlet</servlet-name>
        <url-pattern>/InvokeServlet.do</url-pattern>
    </servlet-mapping>

<filter>
        <filter-name>SecurityFilter</filter-name>
        <filter-class>filter.SecurityFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>SecurityFilter</filter-name>
        <url-pattern>*.do</url-pattern>
    </filter-mapping>
<filter>
        <filter-name>SecurityFilter2</filter-name>
        <filter-class>filter.SecurityFilter2</filter-class>
    </filter>
    <filter-mapping>            
        <filter-name>SecurityFilter2</filter-name>
        <url-pattern>/secured/*</url-pattern>
    </filter-mapping> 
```

在地址栏`http://localhost:8080/OnlineBankingWS/InvokeServlet.do`

但是当我点击 url`http://localhost:8080/OnlineBankingWS/secured/securedResult.jsp`过滤器时（控制台上打印了一些 sysout 语句）。

安全过滤器.java

```
package filter;

import java.io.IOException;

import javax.servlet.Filter;
import javax.servlet.FilterChain;
import javax.servlet.FilterConfig;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

public class SecurityFilter implements Filter {

    public void destroy() {
        // TODO Auto-generated method stub

    }

    public void doFilter(ServletRequest arg0, ServletResponse arg1,
            FilterChain arg2) throws IOException, ServletException {
        // TODO Auto-generated method stub

        HttpServletRequest request = (HttpServletRequest) arg0;
        HttpServletResponse response = (HttpServletResponse) arg1;
        HttpSession session = request.getSession();

        if (session.getAttribute("userSession") == null) {
            String msg = "oops! Your Session Has Been Expired";
            request.setAttribute("msg", msg);
            request.getRequestDispatcher("loginForm.jsp")
                    .forward(request, response);
        }
        arg2.doFilter(arg0, arg1);

    }

    public void init(FilterConfig arg0) throws ServletException {
        // TODO Auto-generated method stub

    }

} 
```

SecurityFilter2.java

```
package filter;

import java.io.IOException;

import javax.servlet.Filter;
import javax.servlet.FilterChain;
import javax.servlet.FilterConfig;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

public class SecurityFilter2 implements Filter {

    public void destroy() {
        // TODO Auto-generated method stub

    }

    public void doFilter(ServletRequest arg0, ServletResponse arg1,
            FilterChain arg2) throws IOException, ServletException {
        // TODO Auto-generated method stub

        String pathInfo=request.getPathInfo();
        String contextPath=request.getContextPath();
        System.out.println(" pathINfo--> " + pathInfo + " contextPath--> " + contextPath );

        arg2.doFilter(arg0, arg1);

    }

    public void init(FilterConfig arg0) throws ServletException {
        // TODO Auto-generated method stub
            System.out.println("in init method of security filter 2");
    }

} 
```

上述过滤器逻辑尚未实现，但应打印语句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T15:22:25.673

尝试使用

```
<filter-mapping>            
    <filter-name>SecurityFilter2</filter-name>
    <url-pattern>/secured/*</url-pattern>
    <dispatcher>FORWARD</dispatcher>
</filter-mapping> 
```

见
[http://www.javaworld.com/javaworld/jw-01-2006/jw-0102-servlet.html?page=3](http://www.javaworld.com/javaworld/jw-01-2006/jw-0102-servlet.html?page=3)

# redis - 来自 JSON 的 Redis 中的 Lua

> ID：15719687
> 
> 赞同：6
> 
> 时间：2013-03-30T14:37:25.777
> 
> 标签：redis, lua, servicestack.redis

我有一个存储在 Redis 中的 JSON 字符串列表，如下所示：

```
[
   { "ID": 25, "DomainID": 23455, "Name": "Stuff", "Value": 23 }, 
   { "ID": 35, "DomainID": 23455, "Name": "Stuff", "Value": 10 }
] 
```

密钥类似于“Event:23455”。

使用 Lua 脚本和 ServiceStack.Redis 如何提取仅包含值小于 20 的值的匿名对象？

所以我想要返回的内容如下所示：

```
[{ "ID": 35, "Value": 10}] 
```

谢谢。

**2013 年 3 月 31 日更新：**

在尝试了建议后，我现在遇到了一个新问题。Lua 脚本语法错误。

我收到有关“在 cjson 附近预期 '='”的 Lua 语法错误。这是我提供给 Redis 的 Lua 脚本字符串（在 C# 中）：

```
string luaScript = "local tDecoded = cjson.decode(redis.call('GET', KEYS[1]));"
+ "local tFinal = {};"
+ "for iIndex, tValue in ipairs(tDecoded) do"
+ "     if tonumber( tValue.Value ) < 20 then"
+ "        table.insert(tFinal, { ID = tValue.ID, Value = tValue.Value});"
+ "     end"
+ "end"
+ "return cjson.encode(tFinal);"; 
```

是否有任何 Lua 或 Redis Lua 专家可以看到可能是什么问题？ie Lua 语法看起来正确吗？

**2013 年 4 月 2 日更新**

通过像这样在每行的末尾添加 \n 换行符来解决解析错误。

```
string luaScript = "local tDecoded = redis.call('GET', KEYS[1]);\n"
+ "local tFinal = {};\n"
+ "for iIndex, tValue in ipairs(tDecoded) do\n"
+ "     if tonumber( tValue.Value ) < 20 then\n"
+ "        table.insert(tFinal, { ID = tValue.ID, Value = tValue.Value});\n"
+ "     else\n"
+ "         table.insert(tFinal, { ID = 999, Value = 0});\n"
+ "     end\n"
+ "end\n"
+ "return cjson.encode(tFinal);"; 
```

不幸的是，这可以正常工作，但由于某种原因仅返回“{}”或 ServiceStack RedisClient 中的空列表。所以我还没有到那里，但我更近了一步。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T04:24:24.047

你可以使用[GitHub 上提供的 LuaJSON，](https://github.com/harningt/luajson)或者你也可以尝试[这个 JSON 到 Lua 表解析器](http://regex.info/code/JSON.lua)来完成任务。用法将是这样的（对于 GitHub 链接）：

```
local json = require( "json" )  -- or JSON.lua
local tDecoded = json.decode(sJSON)  -- sJSON is the original JSON string

local tFinal = {}

for iIndex, tValue in ipairs( tDecoded ) do
    if tonumber( tValue.Value ) < 20 then
        table.insert( tFinal, { ID = tValue.ID, Value = tValue.Value} )
    end
end

print( json.encode(tFinal) ) 
```

# objective-c - Xcode 中的 SenTestingKit

> ID：15719692
> 
> 赞同：1
> 
> 时间：2013-03-30T14:37:50.353
> 
> 标签：objective-c, xcode, sentestingkit

嗨，我收到了这条警告信息，我以前没有收到过：

```
ld: warning: ignoring file /Applications/Xcode.app/Contents/Developer/Library/Frameworks/SenTestingKit.framework/SenTestingKit, missing required architecture armv7 in file /Applications/Xcode.app/Contents/Developer/Library/Frameworks/SenTestingKit.framework/SenTestingKit (2 slices) 
```

我该如何解决？

我尝试在框架搜索路径中使用“${DEVELOPER_LIBRARY_DIR}/Frameworks”，但没有任何反应。

提前致谢

# python - PyGobject TreeView 列在选择时重新调整大小

> ID：15719693
> 
> 赞同：0
> 
> 时间：2013-03-30T14:37:53.800
> 
> 标签：python, pygobject

我正在用 Python 编写一个应用程序，它使用带有几列的 TreeView。

当双击或选择一行时，TreeView 的列开始改变它们的大小几次，然后稳定下来。（看起来有点像自动配置显示器时）。

什么会导致这个问题？

**相关代码：**

 ~~~~[ui.glade](http://pastebin.com/bfanvM1N) | [主文件](http://pastebin.com/9SCdTyN5)~~

[https://bitbucket.org/Gilnaa/treeoflifepublic/src](https://bitbucket.org/Gilnaa/treeoflifepublic/src)~~

# silverlight - 在 Silverlight 中，使用来自数据表单以外的其他来源的数据填充组合框？

> ID：15719700
> 
> 赞同：0
> 
> 时间：2013-03-30T14:38:23.403
> 
> 标签：silverlight, combobox, dataform

使用 Silverlight，我有一个绑定到表 A 的数据表单，我需要用表 B 中的数据填充此数据表单的组合框。如何在 XAML 代码中声明它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T09:19:25.447

例如，如果您的数据表单位于具有名为“TableBItems”的属性的 UserControl 中，您可以编写：

```
<ComboBox SelectedItem={Binding FieldInTableA,Mode=TwoWay} 
  ItemsSource={Binding TableBItems, RelativeSource={RelativeSource AncestorType='UserControl'}} 
  DisplayMemberPath="FieldInTableBYouWantToShow"/> 
```

# ios - iOS, How to check whether the user likes a facebook page or not?

> ID：15719701
> 
> 赞同：1
> 
> 时间：2013-03-30T14:38:26.750
> 
> 标签：ios, facebook, facebook-like

How to check whether the user likes a facebook page or not in an iPhone app?

I know that I need `"user_likes"` permission. what else should be done?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T21:15:27.050

Actually you can't like a page on Facebook. The best way to achieve that is to load the page inside a uiwebview and later you can check whether the user liked the page or not.

# asp.net - Add several addresses programatically into a google map

> ID：15719707
> 
> 赞同：4
> 
> 时间：2013-03-30T14:38:57.343
> 
> 标签：asp.net, asp.net-mvc, google-maps-api-3

I have a ASP.NET MVC 4 application.

Let's say I have 4 records from my db that has a field address.

**Q:** How can I send this addresses to a google maps control(or directly to the maps.google.com website) ? ![enter image description here](../Images/2c85ed11c6fdd425ee3199d35faf6478.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-30T16:27:16.467

Use the first adress as `saddr`-parameter(start-address) and the other 3, separated by `+to:` as `daddr`-parameter(destination-address)

[http://maps.google.com/maps?saddr=strasbourg,france&daddr=troyes,france+to:paris,france+to:nantes,france](http://maps.google.com/maps?saddr=strasbourg,france&daddr=troyes,france%20to%3aparis,france%20to%3anantes,france)

**description of the parameters:** [http://www.seomoz.org/ugc/everything-you-never-wanted-to-know-about-google-maps-parameters](http://www.seomoz.org/ugc/everything-you-never-wanted-to-know-about-google-maps-parameters)

# c# - Fill List with strings from Regex.Matches

> ID：15719708
> 
> 赞同：1
> 
> 时间：2013-03-30T14:38:58.737
> 
> 标签：c#, wpf, linq

I'm writing a WPF client for an online browser game as a learning project for C#. I want to import the data that is shown on the website, store it in a model and display it through binding. Usually, i go about it this way:

Retreive data with HttpWebRequest, perform Regex to receive the wanted data, and then store it for further use in the Models. With this particular item, a list of cars and their properties in a table, i need 6 properties of the cars, which i can retrieve with 1 Regex query:

```
var carInfos = Regex.Matches(HTMLBody, @"(?<== }"">).*(?=</td>)"); 
```

I get 42 matches from that string, which means there are 7 CarModels to be filled. Now, if i want to fill the models i would go about it this way:

```
 Cars.AllCars.Add(new CarModel{
                                             Plate = carInfos[0].Value,
                                             Type = carInfos[1].Value,
                                             NetWorth = int.Parse(carInfos[3].Value,
                                             etc, etc..

                                         }); 
```

This is my CarModel:

```
 public class CarModel : INotifyPropertyChanged {
    public event PropertyChangedEventHandler PropertyChanged;
    private string _plate;

    public string Plate{
        get { return _plate; }
        set{
            if (value == _plate) return;
            _plate = value;
            OnPropertyChanged();
        }
    public string Type { get; set; }
    public int NetWorth { get; set; }
    public State CurrentWorth { get; set; }
    public State Location { get; set; }
    public int Condition { get; set; }
    public int Issues { get; set; }

    [NotifyPropertyChangedInvocator]
    protected virtual void OnPropertyChanged([CallerMemberName] string propertyName = null) {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
    } 
```

How can i do this dynamically? Every 6th property is the car type, location etc. I want to be able to bind hundreds of cars eventually.

Let's say, for instance, i get 12 matches from the Regex, i.e. two cars. the carInfos[0].value would be a Plate, and the carInfos[6].value would also contain a plate. How can i loop through the results in such a manner that these models will be filled accordingly?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T15:14:34.957

This should work for you then -

```
for (int index = 0; index < carInfos.Count/6; index++)
{
    int offest = index * 6;
    Cars.AllCars.Add(new CarModel{
                                 Plate = carInfos[0 + offest].Value,
                                 Type = carInfos[1 + offest].Value,
                                 NetWorth = int.Parse(carInfos[3 + offest].Value,
                                 etc, etc..    
                                 });
} 
```

Since you have total of 7 items that's why `(42/6) = 7` and item is at offset of `multiple of 6` hence the logic for calculation of offset `(offest = index * 6)`

# spring - 如何使用 Struts 2、Spring 和 Hibernate 处理项目中的异常

> ID：15719709
> 
> 赞同：1
> 
> 时间：2013-03-30T14:39:12.320
> 
> 标签：spring, hibernate, exception, struts2

我想知道处理异常的更好方法是什么。我的 web 项目有 Struts 2、Spring 和 Hibernate。

异常可能发生在 Struts`Action`或 Biz Layer 或 Data Layer。

如何处理每一层的异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T14:48:14.443

在 Struts 中，通过定义一个包含全局异常处理的抽象默认包来处理您可能委托给框架的异常（如果您不想手动处理它）。

并重定向到`error_page.jsp`发生此异常的时间。

[您可以在 Struts 2 和 Hibernate 的异常处理中](https://stackoverflow.com/questions/14852089/exception-handling-in-struts2-and-hibernate/14859757#14859757)找到更详细的描述：

> 在正常情况下，应该捕获、记录并重新抛出异常。但是在 Struts2 中，您可以通过创建默认的应用程序拦截器堆栈来处理未捕获的异常
> 
> ```
> <interceptor-stack name="appDefaultStack">
>  <interceptor-ref name="defaultStack">
>    <param name="exception.logEnabled">true</param>
>    <param name="exception.logLevel">ERROR</param>
>  </interceptor-ref>
> </interceptor-stack> 
> ```
> 
> > 此应用程序未捕获的任何异常都将被记录，然后由全局异常映射处理
> 
> ```
> <global-exception-mappings>
>   <exception-mapping exception="java.lang.Exception" result="error"/>
> </global-exception-mappings> >
> <global-results>
>   <result name="error">/error_page.jsp</result>
> </global-results> 
> ```

请参阅 [如何将异常全局传递给 Struts 2 中其他操作的单个操作](https://stackoverflow.com/questions/14751256/struts-2-how-to-pass-exceptions-globally-to-a-single-action-file-from-other-ac/14756187#14756187)。

# mysql - 在 mysql 中使用 datediff() 优化查询

> ID：15719710
> 
> 赞同：1
> 
> 时间：2013-03-30T14:39:22.710
> 
> 标签：mysql, optimization, query-optimization, database-administration

我有一个像下面这样的查询

```
select 
id,name,baseid,member_card_type,membercard_num,last_draw,counter 
from details_dest
where datediff(curdate(),basedate)<100; 
```

我已经使用了解释，发现它使用的是基于基础的索引，我认为 date_diff 是问题所在

所以请建议我有没有其他方法可以在没有任何功能的情况下执行它

并根据性能告诉我哪个更好 datediff() 或 to_days()

我正在使用 mysql 5.5

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T14:56:35.993

我建议以下查询：

```
select 
id,name,baseid,member_card_type,membercard_num,last_draw,counter 
from details_dest
where basedate > (curdate() - INTERVAL 100 DAY); 
```

# c# - C# recursively go through items in a List of T where T has a List of T

> ID：15719711
> 
> 赞同：0
> 
> 时间：2013-03-30T14:39:25.993
> 
> 标签：c#, methods, recursion

So let's say i have a this class T which contains a List variable. How can I go through all items inside of List and then all items inside of each items of the List and so on until every single items have been treated? I know how to do this using a recursive method but i'm wondering if there is a way without using a recursive method that calls itself. Sorry if the question is confusing, a better example using folders could be as

Folder1 > contains Folder2, Folder3, Folder4

Folder2 > contains Folder5, Folder6

```
Folder5 > contains Folder7 
```

Folder3 > contains Folder8, Folder9

```
Folder9 > contains Folder10

  Folder10 > contains Folder11 
```

I would like to iterate through all of these folders in order (f1, f2, f5, f7, f6, f3, f8, f9, f10, f11, f4)

Does this make more sense? Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T16:36:36.337

This should do the job:

```
Stack stack;
stack.Push(root folder);
while (stack.Count > 0)
{
    Folder f = stack.Pop();
    foreach (Folder subf in f in reverse order)
        stack.Push(subf);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T15:00:34.123

```
static IEnumerable<T> RecursiveEnumerator<T>( IEnumerable root ) {
     if (root is T) yield return (T)root;
     foreach (var item in root) {
         if (item is IEnumerable) {
             foreach (var result in RecursiveEnumerator<T>( (IEnumerable)item )) {
                 yield return result;
             }
         } else {
              if (item is T) yield return (T)item;
         }
     }
     yield break;
 }

 static IEnumerable<T> NonRecursiveEnumerator<T>( T root ) {
     Stack<T> Stack = new Stack<T>( );
     Stack.Push( root );

     do {
         root = Stack.Pop( );
         if (root is T) yield return (T)root;          
         if (root is IEnumerable)
            foreach (var item in ((IEnumerable<T>) root).Reverse()) 
               Stack.Push(item);
     } while (Stack.Count > 0);
     yield break;
  } 
```

T shoud be an interface similar to this:

```
interface IStorageElement {
    string Name {get}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T15:37:00.580

If the order you mentioned is important and must be exactly followed, your problem would be a [Depth First Search](http://en.wikipedia.org/wiki/Depth-first_search) over a simple tree. It a famous algorithm and you can find out how to solve it but the algorithm with a good performance is an iterative algorithm.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T14:56:01.410

I would recommend the use of the foreach. For example

```
foreach(List node in T)
    foreach(List folders in node)
        //do stuff 
```

# c# - ListBox CollectiovViewSource.Filter 更改所选项目？

> ID：15719712
> 
> 赞同：1
> 
> 时间：2013-03-30T14:39:29.087
> 
> 标签：c#, wpf

我有一个列表框，其中包含由数据模板定义的项目。我还有一个文本框，用户可以在其中键入，我使用 CollectionviewSource 上的 Filter 属性在列表框中获取文本和过滤项目...作为：

```
ICollectionView listBoxView = CollectionViewSource.GetDefaultView(myListBox.ItemsSource);

            listBoxView.Filter = ((item) => { // Filtering logic }; 
```

这很好用。但是，这也清除了 ListBox 的 SelectedItem，这是我不必要的。所以在用户开始在列表框中输入之前，假设一个项目已经被选中，过滤逻辑似乎清除了选择。有没有办法避免这种情况......？谢谢！

# linux - How to convert a char array to integer

> ID：15719719
> 
> 赞同：0
> 
> 时间：2013-03-30T14:40:26.900
> 
> 标签：linux, atoi

I have an array of 1's and 0's which is compressed in such a way that when the number of 1's is greater than 10 it writes +n+ when n in the number of 1's and when the number of 0's is greater than 10 it writes -n- when n in the number of 0's otherwise it writes them as it is.

Now the issue is, I need to decompress the array to write it back to the file. But I can't find a way to convert the number of zeros or ones to integer. It keeps giving me an error which says initializing argument 1 of ‘int atoi(const char*) and another one on the same line which says invalid conversion from ‘char’ to ‘const char*’ I'm working in Linux. Here's a peice of my code

```
else if(str[i]=='+')
{
n=atoi(str[i+1]);
for(int j=0;j<n;j++)    
{
    strcat(temp,"1");
    i=i+n-1;

}           
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:51:38.173

This is an algorithm do "expansion" - don't ever use it in production - for example, there is no error checking, so it is not safe. It is a quick example.

```
char *decode(char *q)
{
   char *all=NULL;
   long i=0;
   int n='0';
   char *p;
   if(*q== '+')
     n='1';
   ++q;
   i=strtol(q, NULL, 10);
   all=calloc( i + 1, 1);
   for(p=all; i; i--)
      *p++=n;

   return all;
}

char *decompress(char *dest, char *str)
{
    char *p=str;
    char *q=dest;
    for(; *p; p++)
    {
       if( isdigit((int)*p) )
       {
          *q++=*p;
          *q=0x0;
       }
       else  // - or +
       {
          char *tmp=decode(p);
          strcpy(q, tmp);   
          q=strchr(q, '\0');
          free(tmp);         
          p=strchr(p+1, *p);  // next 
       }
    }
    return dest;
} 
```

# codeigniter - 默认语言代码点火器

> ID：15719720
> 
> 赞同：0
> 
> 时间：2013-03-30T14:40:47.540
> 
> 标签：codeigniter

我想在我所有网页的第一个运行此代码，

我正在使用代码点火器

**代码是：**

```
if(!$this->session->userdata('lang')):
$this->session->set_userdata('lang','ar');
endif; 
```

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:44:30.267

如果您还没有，不妨看看 CodeIgniter 的[语言类](http://ellislab.com/codeigniter/user-guide/libraries/language.html)。

* * *

您可以扩展本机`CI_Controller`类。扩展此类允许您添加附加功能，同时保留本机核心类的原始功能。

为了让代码首先在所有页面上运行，您可以将代码添加到新创建的子类的构造函数中 - 如果您使用新的子类扩展控制器，那么当控制器中的任何函数（ s) 被调用。去做这个：

**创建一个子类**

`MY_Controller.php`在项目目录中创建一个名为的文件`application/core/`。这个新类需要扩展`CI_Controller`和父构造函数。该类应如下所示：

```
<?php    

class MY_Controller extends CI_Controller {

    public function __construct()
    {
        parent::__construct();  //make sure you extend the parent constructor

        //Your code:
        if( ! $this->session->userdata('lang') )
            $this->session->set_userdata('lang','ar');
    }

} 
```

**确保类前缀正确**

如果您已用作`MY_`新类的前缀，那么您不需要在这里做任何事情，但无论如何知道它是有用的。

您还需要确保在`application/config/config.php`文件中正确设置了子类前缀。

```
$config['subclass_prefix'] = 'MY_'; 
```

此前缀必须与您创建的新类的前缀匹配。默认情况下它是`MY_`，但您可以将其更改为您想要的，只要它们对应 - `FOO_`, `BAR_`, `WHATEVER_`... 例外是`CI_`，它是为 CodeIgniter 的本机库保留的。

**使用新的子类扩展所有应用程序的控制器**

您在`application/controllers/`is(/are) 中的控制器可能正在扩展`CI_Controller`. 要使用新创建的子类，您的控制器应该扩展`MY_Controller`父构造函数。

```
class Welcome extends MY_Controller {

    function __construct()
    {
        parent::__construct();
    } 

    //More functions...
} 
```

# javascript - text node ignored if present b/w html and head node?

> ID：15719723
> 
> 赞同：0
> 
> 时间：2013-03-30T14:40:58.697
> 
> 标签：javascript, google-chrome, dom

Why doesn't text node(spaces) come if we try to get firstChild node of HTMLhtmlElement?

In the attached image, there are some spaces between `<html>` and `<head>` tag and ideally firstChild Node object of html node should be text node instead of head node.

Is there any know bug?

I tried it in Chrome.

**Note:** spaces b/w head and body is properly reflected in dom traversal api call, for example nextSibling of head is Text node in this example.

![enter image description here](../Images/36d44ca46791414be6d0dc705cb72857.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T14:45:26.723

Because the content model of the [`html` element](http://www.w3.org/TR/html5/semantics.html#the-html-element) doesn't allow text, so any whitespace there can be completely ignored by the parser.

Contrast this with the content model of (say) the [`body` element](http://www.w3.org/TR/html5/sections.html#the-body-element), which is [Flow Content](http://www.w3.org/TR/html5/dom.html#flow-content-1), which lists (amongst other things) [text](http://www.w3.org/TR/html5/dom.html#text-content). Although I expect you'll find that leading whitespace after `<body>` and before another tag (say, `<p>`) will also be left out. I expect that's covered by one of the dozens of parsing states described in [§8.2](http://www.w3.org/TR/html5/syntax.html#parsing).

# javascript - Construct JSON object from array on client-side?

> ID：15719724
> 
> 赞同：0
> 
> 时间：2013-03-30T14:41:01.383
> 
> 标签：javascript, jquery, node.js

I have a string array like this:

```
['QWJvdXQ=','SG93IGl0IFdvcmtz','SG9tZQ==','Q29udHJpYnV0ZQ==','Q29udGFjdA=='] 
```

What I want to do, is turn it into something like this:

```
[
   {
       "id" : "QWJvdXQ=",
       "url": "about.html"

   },
   {
       "id" : "SG93IGl0IFdvcmtz",
       "url": "how_it_works.html"

   },
   {
       "id" : "SG9tZQ==",
       "url": "index.html"

   },
   {

       "id" : "Q29udHJpYnV0ZQ==",
       "url": "contribute.html"
   },
   {
       "id" : "Q29udGFjdA=="
       "url": "contact.html"
   }
] 
```

The attributes aren't the focus -- what I'm basically trying to do is make each item in the array an object with the value as an value of an attribute, and add another (or more) key-value pairs into those objects.

Right now, I'm trying to do this on the client-side, using jQuery and JS. I also am running node.js, so if this is easier to do on the server-side I'm open to any suggestions. Any help is appreciated!

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-30T14:46:33.043

What you need

*   [`JSON.stringify`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)
*   [`Array.prototype.map`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)
*   [`window.atob`](https://developer.mozilla.org/en-US/docs/DOM/window.atob)

all together;

```
JSON.stringify(
    ['QWJvdXQ=','SG93IGl0IFdvcmtz','SG9tZQ==','Q29udHJpYnV0ZQ==','Q29udGFjdA=='].map(
        function (e) {
            return {
                    'id': e,
                    'url': atob(e).toLowerCase().replace(/\s/g, '_') + '.html'
                   }; // I converted the string to URL as I expect you wanted
        }
    ),
0, 4); 
```

# javascript - 我想在特定时间后加载另一个 HTML 页面

> ID：15719729
> 
> 赞同：70
> 
> 时间：2013-03-30T14:41:24.560
> 
> 标签：javascript, html, timer

我有一个带有动画图像的 html 页面“form1.html”。我想在 5 秒后加载另一个页面“form2.html”。我该怎么做呢？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-03-30T14:43:15.460

```
<script>
    setTimeout(function(){
        window.location.href = 'form2.html';
    }, 5000);
</script> 
```

并且对于主页仅添加'/'

```
<script>
    setTimeout(function(){
        window.location.href = '/';
    }, 5000);
</script> 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-30T14:43:43.973

```
<meta http-equiv="refresh" content="5;URL='form2.html'"> 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-03-30T14:45:09.450

使用这个 JavaScript 代码：

```
<script>
    setTimeout(function(){
       window.location.href = 'form2.html';
    }, 5000);
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-30T14:45:44.303

使用 Javascript 的 setTimeout：

```
<body onload="setTimeout(function(){window.location = 'form2.html';}, 5000)"> 
```

# mongodb - MongoDB 副本集在单台机器上以获得更好的读取？

> ID：15719736
> 
> 赞同：1
> 
> 时间：2013-03-30T14:42:02.953
> 
> 标签：mongodb, replication

我在（Intel Xeon 8 core 2.1 Ghz，32 GB RAM）服务器上运行了一个 mongod（2.0.2）。以下是来自 mongostat 的一些示例统计数据（通常是正常平静的日子）：

```
insert  query update delete getmore command flushes mapped  vsize    res faults locked % idx miss %     qr|qw   ar|aw  netIn netOut  conn repl       time
 0    186      3      0       0       5       0  42.6g  87.8g  22.6g      2      0.8          0       0|0     0|0    35k     1m   319    M   20:36:00
 0    177      3      0       0       4       0  42.6g  87.8g  22.5g      2      0.7          0       0|0     0|0    28k   993k   319    M   20:36:30
 0    181      3      0       0       3       0  42.6g  87.8g  22.6g      1      0.6          0       0|0     0|1    28k   878k   319    M   20:37:00
 0    177      4      0       0       4       0  42.6g  87.8g  22.6g      2      0.7          0       0|0     0|0    31k   851k   319    M   20:37:30
 0    171      2      0       0       3       0  42.6g  87.8g  22.6g      2      0.4          0       0|0     1|0    25k   912k   319    M   20:38:00
 0    133      1      0       0       3       0  42.6g  87.8g  22.5g      0      0.3          0       0|0     0|0    20k   673k   319    M   20:38:30
 0    180      3      0       0       4       0  42.6g  87.8g  22.5g      1      0.6          0       0|0     1|0    29k   890k   319    M   20:39:00 
```

但有时当有 500-600 个用户在线时（我在 Mongo 中存储访问计数器，所以当访问者来的时候会有很多更新）查询跃升至每秒约 500 个，并且读取队列快速增长并保持在 40-50 左右几分钟，这使脚本超时。

可以在同一台机器上添加一个副本集成员（我没有更多的物理服务器）对我有帮助吗？我想将读取首选项设置为指向辅助成员，以便主实例上的写入不会阻止读取。

# c - Glade UI builder 不允许我将对象分配为信号的参数

> ID：15719741
> 
> 赞同：0
> 
> 时间：2013-03-30T14:42:31.987
> 
> 标签：c, gtk, glade

我正在尝试使用 Gtk+ 和 Glade 来实现我的一个项目。我无法提供任何代码，因为这是我的课程作业，这样做会危及我的资格，我现在不想这样做。

问题是我正在尝试实现一个“清除表单”按钮。我能想到的最简单的方法是创建一个“清除条目”信号处理程序，并让按钮在它处理的每个条目上调用它。问题是，在设置好之后，Glade 不会记住要传递的小部件。

我将保存它，单击关闭，单击返回按钮，“对象”列将再次为空白，尽管我明确设置它，并在设置时保存它。我尝试保存为 libglade 和 gtkbuilder 格式，但无济于事。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:42:58.570

它在这里工作（glade 3.14.2）。请记住，glade 有很多错误，因此升级可以解决问题。

这是我的测试用例的（手动简化）版本：

```
<?xml version="1.0" encoding="UTF-8"?>
<interface>
  <!-- interface-requires gtk+ 3.0 -->
  <object class="GtkWindow" id="window1">
    <child>
      <object class="GtkBox" id="box1">
        <property name="orientation">vertical</property>
        <child>
          <object class="GtkEntry" id="entry1"/>
        </child>
        <child>
          <object class="GtkButton" id="button1">
            <property name="label">gtk-clear</property>
            <property name="use_stock">True</property>
            <signal name="clicked" handler="reset" object="entry1" swapped="yes"/>
          </object>
        </child>
      </object>
    </child>
  </object>
</interface> 
```

# java - 知道鼠标是在没有监听器的情况下单击的，还是不同的方法

> ID：15719745
> 
> 赞同：2
> 
> 时间：2013-03-30T14:42:54.107
> 
> 标签：java, swing, location, mouseevent, actionlistener

我正在制作一个 undecorated `JFrame`，所以我需要一种方法来更改窗口位置。到目前为止，我可以让窗口跟随鼠标，但我不能让它停止。我添加了`ActionPerformed`一个`JButton`：

```
test = true;
while (test) {
    setLocation(MouseInfo.getPointerInfo().getLocation().x - 20, MouseInfo.getPointerInfo().getLocation().y - 20);
} 
```

偏移量用于将指针保持在 内`JButton`，在`while`. 它的效果非常好，速度非常快。但我不知道如何让它停止。我尝试添加一个`MouseClicked`设置`test`为 false 的值，但没有成功。显然，在循环运行时没有监听器工作。

有没有办法知道鼠标是否在其中被点击`while`？那么，没有侦听器或事件？还是有另一种重新定位窗口的方法？

编辑：

再次感谢 Jurgen Camilleri，但我想添加他的示例的修改版本，我认为它更简单，包含使这项工作几乎不需要的东西。

```
package testbench;

import java.awt.EventQueue;
import java.awt.HeadlessException;
import java.awt.Point;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;
import javax.swing.JFrame;
import javax.swing.WindowConstants;

public class DraggableFrame
 extends JFrame
 implements MouseListener, MouseMotionListener {

    static Point dragged = null;
    static Point pressed = null;

    public DraggableFrame () throws HeadlessException {
        addMouseListener(this);
        addMouseMotionListener(this);
        setBounds(0, 0, 320, 240);
        setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        setLocationRelativeTo(null);
        setUndecorated(true);
    }

    public static void main (String args[]) {        
        EventQueue.invokeLater(new Runnable () {
            @Override
            public void run () {
                new DraggableFrame().setVisible(true);
            }
        });
    }

    @Override
    public void mouseClicked (MouseEvent e) {}

    @Override
    public void mouseDragged (MouseEvent e) {
        dragged = e.getLocationOnScreen();
        setLocation(
         (int)(dragged.getX() - pressed.getX()),
         (int)(dragged.getY() - pressed.getY()));
    }

    @Override
    public void mouseEntered (MouseEvent e) {}

    @Override
    public void mouseExited (MouseEvent e) {}

    @Override
    public void mouseMoved (MouseEvent e) {}

    @Override
    public void mousePressed (MouseEvent e) {
        pressed = e.getPoint();
    }

    @Override
    public void mouseReleased (MouseEvent e) {}
} 
```

不要介意空的覆盖方法，它们是必要的。在我正在开发的实际程序中，我为侦听器使用了一个单独的类，它也同样有效。此外，您是实现侦听器还是扩展适配器似乎并不重要。一方面，您可以实现这两个接口。另一方面，您不需要重写扩展抽象类的所有方法。

此外，如果您将侦听器添加到框架的容器中，此方法也有效。但是，它将表现得好像该容器位于 (0, 0) 处。您必须在`setLocation()`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T15:32:34.650

> 所以我需要一种改变窗口位置的方法。

如需不同的方法，请查看[移动窗口](http://tips4java.wordpress.com/2009/06/14/moving-windows/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T15:34:34.323

试试这个：

```
public class UndecoratedJFrame extends JFrame {

    Point origin;
    Point origin2;

    public UndecoratedJFrame() {
        setUndecorated(true);
        initComponents();

        setVisible(true);
    }

    private void initComponents() {

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        addMouseListener(new java.awt.event.MouseAdapter() {
            public void mousePressed(java.awt.event.MouseEvent evt) {
                formMousePressed(evt);
            }
        });

        addMouseMotionListener(new java.awt.event.MouseMotionAdapter() {
            public void mouseDragged(java.awt.event.MouseEvent evt) {
                formMouseDragged(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 400, Short.MAX_VALUE)
        );

        layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 300, Short.MAX_VALUE)
        );

        pack();
    }                      

    private void formMouseDragged(java.awt.event.MouseEvent evt) {                                  
        origin2 = new Point(evt.getLocationOnScreen());
        setLocation((int)(origin2.getX() - origin.getX()), (int)(origin2.getY() - origin.getY()));
    }                                 

    private void formMousePressed(java.awt.event.MouseEvent evt) {                                  
       origin = new Point(evt.getPoint());
    }
} 
```

# javascript - Reveal.js 幻灯片不工作

> ID：15719747
> 
> 赞同：2
> 
> 时间：2013-03-30T14:43:12.787
> 
> 标签：javascript, slideshow, reveal.js

我正在尝试使用 Reveal.js 框架制作幻灯片，但由于某种原因，它对我不起作用。它只是显示一个空白屏幕。这是我到目前为止所拥有的（[jsfiddle](http://jsfiddle.net/T3vMQ/)）：

```
 <!DOCTYPE HTML>
    <html>
    <head>
    <link type="text/css" href="http://lab.hakim.se/reveal-js/css/reveal.min.css" rel="stylesheet" media="all">
    </head>

    <body>
    <div class="reveal">
        <div class="slides">
            <section>hello world</section>
            <section>second slide</section>
            <section>third</section>
        </div>
    </div>

    <script type="text/javascript" src="http://lab.hakim.se/reveal-js/js/reveal.min.js"></script>
    </body>
</html> 
```

编辑：解决方案是在结束正文标记之前添加以下代码：

```
<script type="text/javascript">
Reveal.initialize({

// Display controls in the bottom right corner
controls: true,

// Display a presentation progress bar
progress: true,

// Push each slide change to the browser history
history: false,

// Enable keyboard shortcuts for navigation
keyboard: true,

// Enable the slide overview mode
overview: true,

// Vertical centering of slides
center: true,

// Loop the presentation
loop: false,

// Change the presentation direction to be RTL
rtl: false,

// Number of milliseconds between automatically proceeding to the 
// next slide, disabled when set to 0, this value can be overwritten
// by using a data-autoslide attribute on your slides
autoSlide: 0,

// Enable slide navigation via mouse wheel
mouseWheel: false,

// Apply a 3D roll to links on hover
rollingLinks: true,

// Transition style
transition: 'default' // default/cube/page/concave/zoom/linear/fade/none

});
</script> 
```

[https://github.com/hakimel/reveal.js](https://github.com/hakimel/reveal.js)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:56:33.883

这是因为您将部分设置`display: none`为 css 的这一行：

```
.reveal .slides>section,.reveal .slides>section>section 
```

使用类似 Firebug 的检查器工具来查看为这些部分设置的 CSS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-07T05:12:53.640

实际上，调用 Reveal.initialize() 是必需的，但它可以是空的，所以这就足够了：

```
 Reveal.initialize({}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-27T19:25:10.527

你可以这样说

* * *

```
<script>
Reveal.initialize({
    transition: Reveal.getQueryHash().transition || 'default' 
    // choose your skin ===>>>>  default/cube/page/concave/zoom/linear/fade/none
});     
</script> 
```

# linux - 使用 GDB 读取寄存器指向的内存

> ID：15719750
> 
> 赞同：4
> 
> 时间：2013-03-30T14:43:28.787
> 
> 标签：linux, operating-system, x86, gdb

如果我知道内存位置，有没有办法从 GDB 中查看内存内容？

也就是说，我正在调试我为操作系统课程编写的 x86 汇编程序。现在，我正在尝试使用 C 和 gas（GNU 汇编器）为 x86 上的 Linux 编写用户级线程库。我分配了自己的堆栈，并使 esp 寄存器指向该内存位置。现在我想读取内存以查看我分配的堆栈中的内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T14:46:53.837

我会尝试以下命令（在 下`gdb`）

```
 p (int*)$esp
 x /20x $esp
 p ((int*)$esp)[3] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-30T14:46:25.433

有关更多详细信息，请`x addr`查看[https://visualgdb.com/gdbreference/commands/x](https://visualgdb.com/gdbreference/commands/x)

```
x command
Displays the memory contents at a given address using the specified format.

Syntax
x [Address expression]
x /[Format] [Address expression]
x /[Length][Format] [Address expression]
x
Parameters
Address expression
Specifies the memory address which contents will be displayed. This can be the address itself or any C/C++ expression evaluating to address. The expression can include registers (e.g. $eip) and pseudoregisters (e.g. $pc). If the address expression is not specified, the command will continue displaying memory contents from the address where the previous instance of this command has finished.
Format
If specified, allows overriding the output format used by the command. Valid format specifiers are:
o - octal
x - hexadecimal
d - decimal
u - unsigned decimal
t - binary
f - floating point
a - address
c - char
s - string
i - instruction
The following size modifiers are supported:

b - byte
h - halfword (16-bit value)
w - word (32-bit value)
g - giant word (64-bit value)
Length
Specifies the number of elements that will be displayed by this command. 
```

# javascript - 客户端的时间滴答

> ID：15719753
> 
> 赞同：0
> 
> 时间：2013-03-30T14:43:34.240
> 
> 标签：javascript, jquery, html, datetime

我有一个场景，我必须向帖子的用户显示滴答时间。该帖子将附带来自服务器的原始 DateTime 字符串，然后将在客户端计算这些值以查找经过时间的差异。问题是不能依赖客户端时间。所以决定是检索服务器当前时间并找到客户端和服务器之间的差异并将该差异添加到客户端日期，然后在计算经过的时间之前将差异添加到客户端时间..但是我不知道如何找到javascript中的差异并将其添加到客户端日期变量..有人可以谈论这种情况并对其进行编码..我不确定我是否做对了或者是否有替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T21:45:50.320

所以我现在想出了解决方案.. 正如我提到的使用变量来存储服务器当前时间并在 setinterval 中的每个特定间隔之后更新该变量。这个变量将作为我们的客户端时钟工作，并将发布时间与它进行比较。客户端时钟的问题是它不能被信任。

# rally - 如何使用 Rally 属性组合框 (SDK 2) 显示投资组合项目的允许值？

> ID：15719754
> 
> 赞同：0
> 
> 时间：2013-03-30T14:43:38.773
> 
> 标签：rally

我需要按投资组合项目的类型显示 State 字段的允许值列表。以下代码返回 URL 而不是值？我究竟做错了什么？

```
var typeCombobox= Ext.create('Ext.Container', {
             items: [{
                 xtype: 'rallyattributecombobox',
                 model: 'PortfolioItem/FEATURE',
                 field: 'State',
                 multiSelect: true,                                          
            }],         
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:09:32.980

Portfolio Items 的 State 属性是一个对象。理想情况下，以下语法：

`field: 'State.Name'`

将是可行的 - 构造函数将足够聪明，可以遍历对象上的名称字段。我已经向 Rally Engineering 提交了关于这个问题的缺陷。

与此同时，最好的解决方法可能是使用[Ext.form.field.ComboBox](https://developer.help.rallydev.com/apps/2.0p5/doc/#!/api/Ext.form.field.ComboBox)并通过查询有效 PI 状态来填充下拉值。谢谢让我们注意到这个！

# htmlunit - HtmlUnit error will not get second page after javascript?

> ID：15719759
> 
> 赞同：0
> 
> 时间：2013-03-30T14:44:14.500
> 
> 标签：htmlunit

Somebody please explain why am getting null pointer exception

```
HtmlPage page = null;
boolean savePagesLocally = false;
String url = "http://example.com";

WebClient webClient = new WebClient(BrowserVersion.FIREFOX_3_6);
webClient.setThrowExceptionOnScriptError(false);
try
{
    page = webClient.getPage( url );

    HtmlRadioButtonInput radioButton2 = (HtmlRadioButtonInput) page.getElementById("ctl00_phContent_ucUnifiedSearch_rdoIndvl");
    radioButton2.click();

    HtmlTextInput textField3 = (HtmlTextInput) page.getElementById("ctl00_phContent_ucUnifiedSearch_txtIndvl");
    textField3.setValueAttribute("1061726"); // null pointer occurs here! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T10:19:55.707

For those who would like to know: Replacing the line

```
HtmlTextInput textField3 = (HtmlTextInput) page.getElementById("ctl00_phContent_ucUnifiedSearch_txtIndvl"); 
```

With the following loop:

```
HtmlTextInput textField3 = (HtmlTextInput) page.getElementById("ctl00_phContent_ucUnifiedSearch_txtIndvl");
while(textField3 != null) {
  webClient.waitForBackgroundJavaScript(100)
  textField3 = (HtmlTextInput) page.getElementById("ctl00_phContent_ucUnifiedSearch_txtIndvl");
} 
```

This loop will wait until HTMLUnit has an element by that ID.

# php - 如何将带有数据库值的单选按钮的结果存储回数据库？

> ID：15719761
> 
> 赞同：1
> 
> 时间：2013-03-30T14:44:24.377
> 
> 标签：php, mysql, radio-button

一段时间以来一直停留在这段代码上。我在“do_assignments.php”（如下）中所做的是创建一个循环，输出我的数据库中的每个问题以及与该问题相关的每个可能的答案。

```
<form method="post" action="user_storeresults.php"> $query = "SELECT * FROM questions, question_choices WHERE q_topic = 'PhoneGap' AND visible = 1 AND q_type = 'Multiple' AND questions.q_id = question_choices.question_id";
           $result=mysql_query($query); 

              while($row = mysql_fetch_array($result)){ 
                     if($row['q_id'] != @$qid){
                        echo "<h4><strong>" . $row['q_string'] . "</strong></h4>";
                        @$qid = $row['q_id']; 
                     }
                     echo "<input name='".$row['choice_id']."' value='".$row['correct_choice']."' type='radio' />";
                     echo $row['choice_string'] . "<br/>";

              }
              ?>
              <p><input type="submit" name="submit" value="Submit"><p>
              </form>
              <?php 
```

每个单选按钮的值包含来自我数据库中“正确选择”字段的数据，其中与每个问题相关联的错误答案 (0) 和正确答案 (1)。

所有这一切都很好，但是因为我试图从一个没有特定名称或值的单选按钮提交一个帖子（只有它从数据库中检索的内容），我不太清楚我会怎么做能够在下一页“user_storeresults.php”中检索这些值...

任何帮助将非常感激。如果我有点太模糊了，那就说吧，我会尽可能地把它弄清楚。

# php - Adding Multiple row values to multiple columns

> ID：15719763
> 
> 赞同：1
> 
> 时间：2013-03-30T14:44:34.860
> 
> 标签：php, mysql, database, shopping-cart

So I have this CART table which stores the selected items of the customer and ORDER table which stores the ordered items of the customer, obviously, I would like to transfer/add the selected item of the customer to the ORDER table. I want to do it like `INSERT INTO` (array of product_names,size,price,etc..) into the ORDER table because customers can have multiple items in the cart. I really need your help :|

```
$query=mysql_query("select * from cart where user_id =$session_id");
while($row=mysql_fetch_assoc($query)){
    $cartItems = array('user_id'=$row[user_id],'product_name'=>$row['product_name'],     'price'=>$row['price'], 'size'=>$row['size']);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-27T21:15:07.453

You could another database for that, say `ORDER DB` and `ORDERED _ITEMS table` then when you insert items in the `ORDERED_ITEMS table` you can use `mysql_insert_id()` and insert the `user_id` into the `ORDERD DB` and from there you can join the two tables

# ssl - Amazon S3 静态网站的 HTTPS

> ID：15719764
> 
> 赞同：93
> 
> 时间：2013-03-30T14:44:43.637
> 
> 标签：ssl, https, amazon-s3, amazon-cloudfront

我想使用 Amazon S3 和 CloudFront 托管一个仅支持 HTTPS 的静态网站。这是我到目前为止所做的：

1.  为静态网站托管设置 S3 存储桶并将我的网站文件放入其中
2.  创建 CloudFront 分配并将其指向 S3 存储桶
3.  `www`在我的域的名称服务器中为指向 CloudFront 存储桶的子域添加了 CNAME 记录。

到目前为止，一切都很好 - 我可以使用该`www.example.com`地址访问我的网站。但是，我希望该站点只能通过 HTTPS 访问，为此我从 GoDaddy 购买了 SSL 证书。

现在，问题是：

1.  有没有办法在我的 S3 托管网站上安装此第三方 SSL 证书？
2.  有没有办法通过此设置自动将 http 重定向到 https ？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2014-03-10T21:49:45.623

是的，从今天开始，您可以免费进行。

您现在可以在 CloudFront 上使用 HTTPS 和 CNAME，因为它现在支持使用服务器名称指示 (SNI) 的自定义 SSL 证书：http: [//aws.typepad.com/aws/2014/03/server-name-indication-sni-and- http-重定向-for-amazon-cloudfront.html](http://aws.typepad.com/aws/2014/03/server-name-indication-sni-and-http-redirection-for-amazon-cloudfront.html)

我设法在 S3 上为我的 CloudFront 分布式静态站点设置了免费的 1 类 StartSSL 证书，没有太多麻烦（请参阅：[使用 SNI 通过 HTTPS 提供服务时出现 CloudFront 错误](https://stackoverflow.com/questions/22282137/cloudfront-error-when-serving-over-https-using-sni)）。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2016-01-29T13:05:22.667

2016 年 1 月 21 日，AWS 推出了**AWS Certificate Manager**，这是一项**免费**服务，允许您颁发 SSL 证书以用于 Elastic Load Balancer 和 Cloud Front（以及 S3）。

您可以在以下网址了解更多信息： [https ://aws.amazon.com/certificate-manager/](https://aws.amazon.com/certificate-manager/)

您可以查看如何使用 AWS 提供的免费 SSL 部署您的 S3 + Cloudfront 网站： [https ://aws.amazon.com/blogs/aws/new-aws-certificate-manager-deploy-ssltls-based-apps-on -aws/](https://aws.amazon.com/blogs/aws/new-aws-certificate-manager-deploy-ssltls-based-apps-on-aws/)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-06-13T03:05:11.577

截至今天，Cloudfront 提供自定义 SSL：[http ://aws.amazon.com/cloudfront/pricing/](http://aws.amazon.com/cloudfront/pricing/)

请记住，他们每月收费 600 美元。更多详细信息请参见上面的链接。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-05-04T03:34:53.793

For me I had to upload a simple React website to S3\. As barbolo describes you need a certificate to access site through SSL. If the static site that you want to deploy is simple enough you can:

1.  Upload to S3.
2.  Do **not** select "Static Website Hosting"
3.  Convert all relative links (to css, js, etc) to absolute links.

e.g. from /css/media.css you should convert it to [https://s3-region-amazonaws.com/bucket-name/css/media.css](https://s3-region-amazonaws.com/bucket-name/css/media.css) (for me I had to change only links in index.html)

4.  Make only the contents of bucket public.

Thats it. You can access the index file through https.

A Simple site is a site with a main index.html file that points to some css and js pages.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-31T06:48:25.293

除了@wikichen 的回答。

来自：[https ://aws.amazon.com/cloudfront/custom-ssl-domains/](https://aws.amazon.com/cloudfront/custom-ssl-domains/)

> By default, you can deliver your content to viewers over HTTPS by using your CloudFront distribution domain name in your URLs, for example, [https://dxxxxx.cloudfront.net/image.jpg](https://dxxxxx.cloudfront.net/image.jpg).
> 
> If you want to deliver your content over HTTPS using your own domain name and your own SSL certificate, you can use one of our Custom SSL certificate support features.

# java - 使用 Utilities.getRowStart 时出现 BadLocationException 按下 Enter 键

> ID：15719770
> 
> 赞同：0
> 
> 时间：2013-03-30T14:45:12.810
> 
> 标签：java, swing, jtextpane

我`Utilities.getRowStart`用来找出`JTextPane`. 但是`BadLocationException`当我按下回车键时，它给出了：

> javax.swing.text.BadLocationException：视图未表示位置

任何想法？

```
int offset = pane.getText().length();

while(offset > 0) {

    try {

    offset = Utilities.getRowStart(pane, offset) - 1;

        } catch (BadLocationException e1) {
      // TODO Auto-generated catch block
      e1.printStackTrace();

    }
    lineCount++;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T15:29:23.183

```
int offset = pane.getText().length(); 
```

只是猜测您正在使用 Windows。该代码将为每个换行符返回一个包含“\r\n”的字符串。文档仅使用“\n”，因此您的偏移量将大于文档的长度。利用：

```
int offset = pane.getDocument().getLength(); 
```

# r - ggplot2中日期列和geom_ribbon的问题

> ID：15719772
> 
> 赞同：4
> 
> 时间：2013-03-30T14:45:18.290
> 
> 标签：r, ggplot2

跟进之前提出的问题（[使用 ggplot 在“时间序列”中绘制深度范围](https://stackoverflow.com/q/14704909/2017461)），但有点完全相同。

使用 ggplot 我想要一个图来显示特定个体（例如 7303，参见下面的代码示例）深度范围如何在 3mnd 周期内围绕平均值（最小值和最大值）变化，使用`geom_ribbon()`.

数据集中的变量；

```
names(df)
[1] "ID"    "MONTH" "DAY"   "MIN"   "MEAN"  "MAX"   "date" 
```

我如何选择一个人：

```
df<-Dybde_dag_gjsn[which(Dybde_dag_gjsn$ID=="7303"),] 
```

我尝试了以下方法；

```
ggplot(data=df)+
    geom_line(aes(x=date,y=-MEAN,group=ID,colour=as.factor(ID))) +
    geom_ribbon(aes(x=date,ymin=-MIN,ymax=-MAX,group=ID),fill="grey") +
    theme(legend.position="none") 
```

但结果并不令人满意，只显示“垂直手段”而不是介于两者之间的手段：

![http://dl.dropbox.com/u/85946387/fail_7303.jpeg](../Images/c2a066c3e3a102d23660ce7da47b5619.png)

我认为这与我的`grouping factor`（参考：书“ggplot2：用于数据分析的优雅图形（使用 R！）”*第 50 页底部*）有关。我使用 ID 作为差异图的分组因素，其中我在同一个图中有很多人，但当然这在这里不起作用，因为我现在只有**一个**ID。

我该如何解决这个问题？！我一直在阅读和阅读 ggplot 但一切都是徒劳的..

下面是它的代码示例：

```
 > dput(df)
    structure(list(ID = c(7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 
    7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 
    7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 
    7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 
    7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 
    7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 
    7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 
    7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 
    7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 
    7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 
    7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 
    7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 
    7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 
    7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 
    7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 
    7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 
    7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 
    7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 
    7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 
    7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 
    7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 
    7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 
    7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 
    7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 7303L, 
    7303L, 7303L, 7303L, 7303L, 7303L, 7303L), MONTH = c(6L, 7L, 
    8L, 9L, 10L, 11L, 12L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 6L, 7L, 
    8L, 9L, 10L, 11L, 12L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 6L, 7L, 
    8L, 9L, 10L, 11L, 12L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 6L, 7L, 
    8L, 9L, 10L, 11L, 12L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 5L, 6L, 
    7L, 8L, 9L, 10L, 11L, 12L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 
    5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 
    12L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 5L, 6L, 7L, 8L, 9L, 10L, 
    11L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 
    5L, 6L, 7L, 8L, 9L, 10L, 11L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 5L, 
    6L, 7L, 8L, 9L, 10L, 11L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 5L, 6L, 
    7L, 8L, 9L, 10L, 11L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 5L, 6L, 7L, 
    8L, 9L, 10L, 11L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 5L, 6L, 7L, 8L, 
    9L, 10L, 11L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 5L, 6L, 7L, 8L, 9L, 
    10L, 11L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 5L, 6L, 7L, 8L, 9L, 10L, 
    11L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 5L, 7L, 8L, 10L), DAY = c(1L, 
    1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 
    3L, 3L, 3L, 3L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 5L, 5L, 5L, 5L, 5L, 
    5L, 5L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 
    8L, 8L, 8L, 8L, 8L, 8L, 8L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 10L, 
    10L, 10L, 10L, 10L, 10L, 10L, 10L, 11L, 11L, 11L, 11L, 11L, 11L, 
    11L, 11L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 13L, 13L, 13L, 
    13L, 13L, 13L, 13L, 13L, 14L, 14L, 14L, 14L, 14L, 14L, 14L, 15L, 
    15L, 15L, 15L, 15L, 15L, 15L, 16L, 16L, 16L, 16L, 16L, 16L, 16L, 
    17L, 17L, 17L, 17L, 17L, 17L, 17L, 18L, 18L, 18L, 18L, 18L, 18L, 
    18L, 19L, 19L, 19L, 19L, 19L, 19L, 19L, 20L, 20L, 20L, 20L, 20L, 
    20L, 20L, 21L, 21L, 21L, 21L, 21L, 21L, 21L, 22L, 22L, 22L, 22L, 
    22L, 22L, 22L, 23L, 23L, 23L, 23L, 23L, 23L, 23L, 24L, 24L, 24L, 
    24L, 24L, 24L, 24L, 25L, 25L, 25L, 25L, 25L, 25L, 25L, 26L, 26L, 
    26L, 26L, 26L, 26L, 26L, 27L, 27L, 27L, 27L, 27L, 27L, 27L, 28L, 
    28L, 28L, 28L, 28L, 28L, 28L, 29L, 29L, 29L, 29L, 29L, 29L, 29L, 
    30L, 30L, 30L, 30L, 30L, 30L, 30L, 31L, 31L, 31L, 31L), MIN = c(11.802917, 
    8.604167, 14.318936, 14.836458, 10.16625, 8.58093, 12.620833, 
    11.216667, 9.742083, 16.554167, 14.662708, 11.58375, 8.401957, 
    17.662553, 11.33413, 8.3275, 16.664167, 13.108, 12.163542, 8.024783, 
    16.394255, 12.450625, 7.730208, 17.397083, 14.680833, 12.08875, 
    8.810435, 15.019792, 10.742292, 11.911489, 17.621111, 14.555319, 
    11.092292, 10.339583, 15.487083, 9.9375, 12.747708, 16.411458, 
    13.903542, 10.94875, 10.164375, 16.915625, 7.065417, 12.83375, 
    18.342979, 13.549167, 11.229792, 10.56875, 18.430444, 6.761042, 
    12.088723, 18.041489, 12.976458, 10.995625, 9.83, 17.677083, 
    9.044737, 8.485208, 8.480833, 18.887609, 13.97125, 10.979583, 
    9.73, 12.843913, 12.495833, 9.311042, 11.773958, 17.697447, 12.004583, 
    9.507083, 8.385417, 16.856596, 13.131458, 8.656458, 10.16625, 
    17.634255, 14.123542, 9.138958, 9.999583, 18.634043, 12.649583, 
    8.672917, 13.166458, 17.596222, 13.121875, 8.397708, 10.421667, 
    20.087805, 14.496042, 10.430833, 10.553333, 17.742979, 12.378125, 
    8.736458, 8.713125, 19.968421, 13.571875, 11.819792, 8.847021, 
    18.748085, 14.197917, 8.918125, 9.3475, 11.85625, 11.089583, 
    13.461458, 18.761277, 11.001702, 8.621458, 9.194375, 11.738333, 
    12.283404, 15.249583, 17.522609, 11.655625, 8.725957, 9.024792, 
    12.361875, 12.311702, 11.959167, 16.179333, 11.733542, 11.0825, 
    11.635208, 12.139792, 10.24875, 11.147917, 15.690851, 11.7175, 
    8.537708, 8.896458, 11.342917, 9.42875, 12.289167, 13.904894, 
    13.622766, 9.262292, 10.925417, 12.507917, 9.640417, 11.619167, 
    13.693333, 12.81375, 8.737021, 8.725217, 12.851042, 9.978958, 
    11.987917, 12.68875, 13.178125, 8.613125, 8.759574, 13.125833, 
    12.803191, 10.768085, 14.104583, 12.426042, 8.590208, 10.004792, 
    11.335417, 10.126458, 11.02, 13.675625, 12.153333, 8.786667, 
    8.901522, 10.190208, 9.675417, 12.787708, 12.376875, 12.686596, 
    9.266042, 9.486875, 11.187083, 11.984583, 14.908125, 12.341042, 
    8.603617, 8.950417, 9.289574, 12.193125, 11.034583, 14.760417, 
    14.270417, 10.900426, 9.456667, 9.817333, 11.300625, 9.979362, 
    18.275532, 14.270833, 10.328333, 8.991667, 9.73234, 10.31625, 
    12.294167, 17.291875, 14.166889, 10.655625, 9.542917, 9.423542, 
    13.408542, 11.412708, 15.77875, 13.872174, 10.414583, 8.771458, 
    10.196667, 13.245957, 9.7525, 14.025625, 14.0225, 10.283333, 
    10.124375, 11.077708, 11.284375, 12.960625, 13.672917, 8.689535
    ), MEAN = c(12.770743, 10.404807, 15.731308, 15.718022, 11.039786, 
    9.592478, 13.566293, 11.997254, 11.060343, 17.321561, 15.434626, 
    12.521116, 9.173196, 20.231528, 12.183485, 9.494385, 17.661506, 
    13.833904, 13.130883, 9.006861, 17.73971, 13.204396, 8.896995, 
    18.11753, 15.600875, 13.121007, 10.101822, 16.769785, 11.697461, 
    12.764369, 18.282592, 15.310545, 12.133705, 11.40675, 16.982279, 
    11.110351, 13.55874, 17.101128, 14.624049, 11.851105, 11.142173, 
    18.371564, 8.477442, 13.410731, 18.981083, 14.22986, 12.254827, 
    11.94385, 19.470508, 8.074123, 12.675037, 18.886745, 13.915082, 
    12.136526, 11.31768, 18.839881, 10.007904, 9.772924, 9.81347, 
    19.389361, 14.811928, 12.119235, 10.951059, 14.149285, 13.293671, 
    10.514356, 12.565706, 18.040379, 12.948702, 10.605055, 9.573924, 
    18.062445, 14.017553, 9.602413, 11.364352, 18.259258, 15.170781, 
    9.967036, 11.390614, 19.553701, 13.97901, 9.462041, 13.8245, 
    18.099865, 14.177431, 9.98118, 11.685662, 20.804762, 15.019522, 
    11.354073, 11.534092, 18.394013, 13.326405, 9.616245, 9.949249, 
    20.426667, 14.46714, 12.737376, 9.717531, 19.227388, 15.078364, 
    9.844263, 10.303065, 12.92404, 12.265582, 14.105216, 19.288396, 
    12.052717, 9.491347, 10.529289, 13.096898, 13.369252, 16.28977, 
    18.160727, 12.549057, 9.604447, 10.280789, 13.554763, 13.393719, 
    12.50955, 16.820558, 12.850228, 12.094866, 12.630164, 13.385122, 
    11.273304, 11.961472, 16.330921, 12.611663, 9.617874, 10.167019, 
    12.655299, 10.373309, 13.374857, 14.925013, 14.537989, 10.447603, 
    12.508138, 13.349818, 10.680128, 12.326957, 15.049259, 13.660166, 
    9.696145, 9.914241, 13.980217, 10.761571, 12.556846, 13.99646, 
    14.085468, 9.438403, 9.728357, 14.105513, 13.989112, 11.698711, 
    14.95036, 13.363272, 9.401711, 10.865912, 12.682327, 11.131757, 
    11.846839, 14.42893, 13.07079, 9.819241, 9.933585, 11.365231, 
    10.918715, 14.062566, 13.084255, 13.71815, 10.182433, 10.690687, 
    12.208993, 13.50174, 15.4533, 13.201188, 9.811705, 9.881868, 
    10.245386, 12.971602, 11.964325, 15.679961, 15.016042, 11.940247, 
    10.361256, 10.998961, 12.15253, 11.044938, 19.022599, 14.954921, 
    11.48031, 10.01924, 10.652463, 11.569661, 13.298019, 17.929547, 
    15.186122, 11.539514, 10.618905, 10.354405, 14.389687, 12.624194, 
    16.338045, 14.791213, 11.211347, 9.772962, 12.016292, 14.260883, 
    10.820083, 14.909629, 14.889066, 11.19011, 11.194178, 12.819223, 
    12.179042, 14.309247, 14.722921, 9.69601), MAX = c(13.891875, 
    12.046875, 16.884468, 16.663333, 12.111875, 10.590465, 14.557708, 
    12.835833, 12.286458, 18.15125, 16.4475, 13.609167, 9.929783, 
    22.586596, 13.212826, 10.684792, 18.319792, 14.831333, 14.148958, 
    10.042826, 19.206383, 14.106667, 9.974375, 18.710625, 16.462917, 
    14.298958, 11.42913, 18.739583, 12.672708, 13.598723, 18.842222, 
    16.099149, 13.169167, 12.736458, 18.593125, 12.367708, 14.195833, 
    17.82625, 15.53375, 12.754375, 12.278125, 20.19, 9.94375, 13.917292, 
    19.738511, 14.916458, 13.339375, 13.453542, 20.28, 9.341042, 
    13.397234, 19.54, 14.982083, 13.249792, 12.602083, 20.058333, 
    10.945789, 11.00875, 10.901875, 19.990217, 15.745, 13.379583, 
    12.361042, 15.389565, 14.012917, 11.743958, 13.204167, 18.383404, 
    13.976667, 11.698958, 10.67125, 19.185106, 14.927083, 10.43, 
    12.549167, 18.929149, 16.060833, 10.792708, 12.95, 20.521277, 
    15.096667, 10.184792, 14.455208, 18.589778, 15.085208, 11.300208, 
    13.256875, 21.602439, 15.5625, 12.430625, 12.52375, 18.934043, 
    14.175417, 10.624792, 11.299583, 20.831579, 15.508333, 13.814792, 
    10.412766, 19.688511, 15.974583, 10.839583, 11.752083, 14.33625, 
    13.332708, 14.671667, 19.667447, 12.983404, 10.354583, 11.980833, 
    14.325833, 14.310426, 17.290833, 18.684783, 13.448958, 10.530851, 
    11.582708, 14.854375, 14.357234, 13.0875, 17.491111, 14.056458, 
    12.958125, 13.423333, 14.718542, 12.291458, 12.82125, 16.907872, 
    13.553125, 11.034375, 11.5625, 13.86375, 11.493542, 14.3025, 
    15.835957, 15.34383, 11.731667, 14.293125, 14.225625, 11.83875, 
    12.958125, 16.238333, 14.615625, 10.958085, 11.225435, 14.90375, 
    11.537083, 13.103958, 15.006458, 14.866458, 10.4675, 10.701702, 
    15.096875, 15.155319, 12.481702, 15.745208, 14.3425, 10.37875, 
    11.7625, 13.89875, 12.302708, 12.761875, 15.10625, 14.171875, 
    10.985625, 10.838696, 12.592708, 12.229167, 15.030833, 13.759792, 
    14.696809, 11.215, 12.2125, 13.277292, 14.844375, 15.933542, 
    13.974583, 11.086809, 10.918542, 11.214894, 13.733542, 12.78375, 
    16.320625, 15.781667, 12.809362, 11.3175, 12.139778, 13.163958, 
    11.853617, 19.77383, 15.644375, 12.645625, 11.055417, 11.401702, 
    12.80125, 14.210625, 18.491667, 15.958444, 12.377083, 11.693333, 
    11.346667, 15.291458, 13.693542, 16.73125, 15.604565, 12.090833, 
    10.700417, 13.640208, 15.333404, 11.697292, 15.565, 15.66375, 
    12.119583, 12.334167, 14.415833, 13.394792, 15.494583, 15.681042, 
    10.907907), date = structure(c(15522, 15553, 15492, 15522, 15553, 
    15492, 15522, 15554, 15493, 15523, 15554, 15493, 15523, 15554, 
    15494, 15524, 15555, 15494, 15524, 15555, 15494, 15525, 15556, 
    15495, 15525, 15556, 15495, 15525, 15557, 15496, 15526, 15557, 
    15496, 15526, 15557, 15497, 15527, 15558, 15497, 15527, 15558, 
    15497, 15528, 15559, 15498, 15528, 15559, 15498, 15528, 15560, 
    15499, 15529, 15560, NA, 15499, 15499, 15500, 15500, 15500, 15530, 
    15500, 15500, 15500, 15561, 15501, 15531, 15501, 15501, 15531, 
    15501, 15531, 15562, 15532, 15502, 15532, 15502, 15532, 15532, 
    15502, 15532, 15533, 15564, 15533, 15564, 15564, 15564, 15564, 
    15564, 15565, 15565, 15565, 15565, 15534, 15534, 15534, 15504, 
    15505, 15505, 15535, 15505, 15535, 15505, 15505, 15536, 15506, 
    15506, 15536, 15506, 15506, 15506, 15537, 15507, 15568, 15568, 
    15568, 15568, 15568, 15569, 15569, 15569, 15569, 15569, 15569, 
    15569, 15570, 15570, 15570, 15570, 15570, 15539, 15570, 15571, 
    15540, 15571, 15540, 15540, 15571, 15540, 15572, 15541, 15511, 
    15541, 15511, 15541, 15541, 15542, 15512, 15512, 15512, 15573, 
    15512, 15512, 15513, 15513, 15513, 15574, 15513, 15543, 15574, 
    15514, 15544, 15514, 15514, 15514, 15514, 15575, 15545, 15576, 
    15515, 15545, 15515, 15576, 15576, 15546, 15577, 15546, 15516, 
    15546, 15577, 15546, 15578, 15517, 15517, 15547, 15578, 15547, 
    15547, 15579, 15518, 15579, 15518, 15579, 15548, 15548, 15580, 
    15580, 15519, 15549, 15519, 15549, 15519, 15520, 15520, 15581, 
    15550, 15581, 15550, 15520, 15521, 15551, 15582, 15582, 15582, 
    15521, 15551, 15583, 15552, 15583, 15583), class = "Date")), .Names = c("ID", 
    "MONTH", "DAY", "MIN", "MEAN", "MAX", "date"), row.names = 1128:1346, class = "data.frame") 
```

我很感激所有的指点！干杯

**更新：问题解决了，一切都很顺利；**

![在此处输入图像描述](../Images/fd70f8e568836081e13224b2295f4cd6.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T15:09:04.553

一个问题是日期不是唯一的，这导致了那些垂直线。由于该列的月份`date`与该`MONTH`列不同，因此数据似乎有问题。此外，您需要切换 和 的顺序`geom_line`，`geom_ribbon`以便在顶部绘制线条。

您可以按如下方式重新创建日期：

```
df$date2 <- as.Date(paste("2012",df$MONTH,df$DAY,sep="-"),"%Y-%m-%d")

ggplot(data=df)+  
  geom_ribbon(aes(x=date2,ymin=-MIN,ymax=-MAX),fill="grey") +
  geom_line(aes(x=date2,y=-MEAN)) +
  theme(legend.position="none") 
```

![在此处输入图像描述](../Images/4d08198cc602581f409585611f986bf9.png)

# wcf - Windows Phone 安全传输中的 WCF

> ID：15719779
> 
> 赞同：1
> 
> 时间：2013-03-30T14:45:45.953
> 
> 标签：wcf, windows-phone-7

WP 仅支持 basicHttpBinding。我的应用程序通过 WCF 发送敏感数据并将它们存储在数据库中。数据以纯文本形式发送，这是不可接受的。我找到了一些解决方案，但它不起作用。我已将 securityMode 设置为 Transport，但出现异常。这是我的 web.config 文件：

```
<system.serviceModel>
<behaviors>
  <serviceBehaviors>
    <behavior name="serviceBehavior">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug httpHelpPageEnabled="true" includeExceptionDetailInFaults="true" />
    </behavior>
  </serviceBehaviors>
</behaviors>
<bindings>
  <basicHttpBinding>
      <binding name="baseBinding" >
          <security mode="Transport" />
      </binding>
  </basicHttpBinding>
</bindings>
<services>
  <service behaviorConfiguration="serviceBehavior" name="TestWCF.WcfNotificationService.WcfNotificationService">
    <endpoint address="base" binding="basicHttpBinding" bindingConfiguration="baseBinding"
      contract="TestWCF.WcfNotificationService.IWcfNotificationService" />
    <host>
      <timeouts openTimeout="00:05:00" />
    </host>
  </service>
</services> 
```

当我在客户端更新服务参考时出现错误：

> 找不到与绑定 BasicHttpBinding 的终结点的方案 https 匹配的基地址。注册的基地址方案是 [http]。

你能帮我吗，我该怎么办？谢谢

# css - How is MVC changing the paths to jqueryui images?

> ID：15719782
> 
> 赞同：2
> 
> 时间：2013-03-30T14:46:04.557
> 
> 标签：css, asp.net-mvc

The graphics for my jQueryUI date picker were not showing up; when I looked in the network trace I saw that I was getting a 404, but the image exists in my project but the path to the image in the trace was incorrect. ![jquery image file path](../Images/383f4ef431356a5e5898c6092b529b71.png)

The `ui-bg_flat_75_ffffff_40x100.png` file is in `~/Content/themes/base/images` and the `jquery.ui.datepicker.css` file is loaded. Looking in the css file it references the graphic `url(images/ui-bg_flat_75_ffffff_40x100.png)`. The `images` folder is in the same folder as the css so the path looks correct to me. So why is it trying to find the file at `/Content/images`?

![enter image description here](../Images/6d0a5332287d3e4677e06ed2aa7ede5b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:07:56.100

I am getting same issue as you when I deploy to production server which has IIS 6\. But if I deploy to my local IIS, it works fine.

I did quick fix by copying the "iquery > images" to "content > images", but this is not a good fix.

If you find any other solution, please kindly share me.

Thanks. Alin

# java - External call of SwingWorker custom methods

> ID：15719784
> 
> 赞同：0
> 
> 时间：2013-03-30T14:46:10.610
> 
> 标签：java, swingworker, anonymous-inner-class

```
...

SwingWorker<Boolean, Void> worker = new SwingWorker<Boolean, Void>(){
String a = "a";

    getA() {
         return a;
    }

    protected boolean doInBackground() throws Exception{
        return true;
    }
}

worker.getA();

worker.execute;

... 
```

The code above isn't working, it tells me that getA() (when called in the row before the last) is undefined for SwingWorker.

However, if I make the SwingWorker a separate class, it works without any problems. I may not understand how this works (and I probably don't), but I see no reason making SwingWorker an anonymous inner class would prevent me to call custom methods in it...

Is this even a good idea, or should I make it a separate class? I have no intention of using the SwingWorker anywhere else.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T14:49:31.747

This has nothing to do with SwingWorker per se and all to do with your trying to call a method of an anonymous inner class that is not an override of the parent class. Since this cannot be done you simply shouldn't attempt to do this. The solution is to not use an anonymous inner class but rather to use either a private inner class or a stand alone outer class. For example, see the class that I have already posted in your [previous question](https://stackoverflow.com/a/15673001/522444).

# carddav - 谷歌 CalDAV PROPFIND 响应

> ID：15719794
> 
> 赞同：1
> 
> 时间：2013-03-30T14:47:15.047
> 
> 标签：carddav

我们正在为 Roundcube 编写插件。

我们注意到 Google 停止在 PROPFIND 请求中返回 vcard URL 以...

```
https://google.com/m8/carddav/principals/__uids__/user%40gmail.com/lists/default/ 
```

由于这个问题，Thunderbird/SoGo 也停止了同步联系人。

问题于 2013 年 3 月 28 日首次报告。

有谁知道解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-19T16:41:33.123

我认为您发送请求的 URL 不再有效。您应该使用一个，可以通过发送一个`PROPFIND`to来发现`https://www.googleapis.com/.well-known/carddav`它，此时它是：

> ```
> https://www.googleapis.com/carddav/v1/principals/your@gmail.com/lists/default 
> ```

# css - 谷歌浏览器对 CSS 的解释非常错误......？

> ID：15719803
> 
> 赞同：0
> 
> 时间：2013-03-30T14:48:17.183
> 
> 标签：css, google-chrome

所以我的网站几乎完成了，它在 Firefox 甚至 IE 8 上看起来都很好！但是 Chrome 只是把它搞砸了。

这是它在 FF 上的外观： ![http://imageshack.us/a/img713/6414/firefoxtr.png](../Images/98738173284c280e6ccd6aae6eb37da1.png)

在 Chrome 上： ![http://imageshack.us/a/img600/9174/chromedv.png](../Images/9487f345eaac5644e50a7cc5c59efa23.png)

看看 Crome 如何调整第一张图片的大小，尽管它与下图的代码完全相同？

这是 HTML 代码：

```
<table id="todo" class="subview_table web_coding_table">
<tr>
    <td>
        <img src="image/preview_small/todo.jpg" alt="ToDo-App" />
    </td>
    <td>
        <h2>ToDo Webapplikation</h2>
        <p>Einfache Terminplaner-App zum Erstellen,
Bearbeiten und Löschen von Terminen</p>
    </td>
    <td>
    <div class="white_triangle">&nbsp;</div>
    </td>
 </tr>
</table>

<div id="todo_content" class="invisible_content web_coding_content">
 <p>Die ToDo-Webapplikation entstand als Semesterarbeit zusammen mit meiner     Teamkollegin ---. Die Herausforderung hierbei war die komplexe, klassenbasierte Programmierung mittels JavaScript. Die App speichert Termine cookiebasiert ab und kann daher auch lokal vom Rechner aus verwendet werden.</p>
 <a href="http://www.hs-augsburg.de/~cr/todo_app/" target="_blank" title:"ToDo-App"><img src="image/preview_big/todo.jpg" alt="ToDo Screenshot"/></a>
 <a class="big_link" href="http://www.hs-augsburg.de/~cr/todo_app/" target="_blank" title:"ToDo-App">Zur Live-Demo</a> 
```

```
<table id="resi" class="subview_table web_coding_table">
<tr>
    <td>
        <img src="image/preview_small/resi.jpg" alt="Resi bringt Bier" />
    </td>
    <td>
        <h2>Resi Bringt Bier</h2>
        <p>Getränke-Nachtlieferservice in München mit Shopsystem.</p>
    </td>
    <td>
    <div class="white_triangle">&nbsp;</div>
    </td>
 </tr>
</table>

<div id="resi_content" class="invisible_content web_coding_content">
 <p>HINWEIS!: Der Kunde dieses Projekts arbeitet selbst noch an der Website und den Inhalten weiter, daher entspricht das Erscheinungsbild möglicherweise nicht meiner eigentlichen Arbeit.</p><br />
 <p>Resi Bringt Bier ist eine Website für einen Nachtlieferanten in München. Sie wurde mit Wordpress umgesetzt und verwendet diverse Plugins sowie eine eigens kreierte Theme. Hinzu kommt die Verwendung eines eigenen JavaScript-Codes, sowie diverse Codeveränderungen in PHP.<p>
 <a href="http://www.resibringtbier.de" target="_blank" title:"Resi Bringt Bier"><img src="image/preview_big/resi.jpg" alt="Resi"/></a>
 <a class="big_link" href="http://www.resibringtbier.de" target="_blank" title:"Resi Bringt Bier">Zur Website</a>
</div> 
```

请注意，具有“Invisible_content”类的 DIV 是不可见的。

这里的CSS：

```
table h2 {
font-size:1.5em;
color:#FFFFFF;
font-style: normal;
}

table p {
color:#FFFFFF;
}

.subview_table {
height:120px;
position:relative;
margin:20px 0px 0px 0px;
background-color:#961518;
}

.subview_table h2 {
margin-top:0px;
}

.subview_table img {
padding:10px;
margin:0px;
}

.subview_table td {
min-width:70px;
}

.white_triangle {
position:absolute;
top:60px;
right:20px;
height:0;
width:0;
border-color: #FFFFFF transparent transparent transparent;
border-style: solid;
border-width: 15px;
}

.invisible_content {
display:none;
padding: 20px;
background-color:#d8d5c6;
} 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T14:57:49.707

**OP 的标题：Google Chrome 对 CSS 的解释非常错误......？**

错误的假设。如果您的代码没有遵循适当的标准，浏览器将被迫简单地猜测您的意图。换句话说，你有无效和格式错误的代码，这是真正的根本原因，而不是 Chrome。

*   Note that you have `<a href="http://www.resibringtbier.de" target="_blank" title:"Resi Bringt Bier">`, where `title:"Resi Bringt Bier"` is invalid HTML. Should be `title="Resi Bringt Bier"`. You've repeated this same mistake about five or six times.

*   You *may* have also forgotten the closing tag, `</div>` on your `<div id="todo_content"`. (depends on which version of the OP you're looking at.)

*   Regarding your image size complaint: I'm seeing absolutely nothing in your HTML or CSS that tells the browser what size the image should be rendered, nor can we see the actual native size.

*   You have a `div` inside a `td` cell, which is not a very good practice.

*   仔细检查和评估您的 CSS 技术……它缺少许多尺寸规格。`tables`当您让他们自己弄清楚时，可能会有些不可预测。在 HTML 和/或 CSS 中指定`width`每个。`td`

[http://jsfiddle.net/t2cFb/2/](http://jsfiddle.net/t2cFb/2/)

* * *

通过 W3C 在线验证器运行 HTML 并修复所有错误。

[http://validator.w3.org/](http://validator.w3.org/)

# javascript - Javascript事件只循环一次，没有输出

> ID：15719806
> 
> 赞同：1
> 
> 时间：2013-03-30T14:48:31.370
> 
> 标签：javascript, html, dom, javascript-events

我正在编写一个 JS 代码来计算给定一些个人成绩的最终成绩并在 html 页面中输出结果，但是当我触发事件和函数时，它仅在我的 for 循环中循环一次，而不会到达代码的其余部分（我检查了使用打印语句），但我不明白导致无法访问其余代码的循环有什么问题。

HTML：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Problem 2</title>
        <script src="grades.js" type="text/javascript"></script>
    </head>

    <body>
        <h1>Grade Calculator</h1>
        <form id ="myForm">
            <div id="assignments">
            HW <input type="text" size="1"/> / <input type="text" size="1"/><br/>
            HW <input type="text" size="1"/> / <input type="text" size="1"/><br/>
            HW <input type="text" size="1"/> / <input type="text" size="1"/>
            </div>

            <div>
                <input type="checkbox" id="curve"/> Curve +5?
            </div>

            <div id="resultsarea">
                <p>
                    <!--add buttons here -->
                    <button type="button" id="comp">Compute</button>
                    <button type="button" id="clr">Clear</button>
                </p>

                <!-- add results here -->
            </div>
        </form>
    </body>
</html> 
```

JS：

```
window.onload = pageLoad;

function pageLoad()
{
    var cbutton = document.getElementById("comp");
    cbutton.onclick = compute;
}

function compute()
{
    var list = document.getElementsByTagName("input");
    var marks = 0;
    var total = 0;
    for (var i=1; i <= list.length; i++)
    {
        if(list[i].type == "text")
        {
            if (i%2 != 0)
            marks += list[i].value;
            else
            total += list[i].value;
        }
    }
    var result = Math.round(marks/total);
    if (document.getElementById("curve").checked)
    result += 5;
    var out = document.createElement("div");
    var t = document.createTextNode(result);
    out.appendChild(t);
    var display = document.getElementById("resultsarea");
    display.append(out);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:17:45.313

我查看了答案，似乎没有人对此有主要问题......所以：

```
...
for (var i=0; i <= list.length-1; i++)
{
    if(list[i].type == "text")
    {
        if (i%2 == 0)
        marks += parseInt(list[i].value);
        else
        total += parseInt(list[i].value);
    }
}
var result = Math.round(parseFloat(marks / total)*100);
... 
```

你没有将值解析为整数，这意味着它们被连接而不是相加......然后你对本来应该是 0-1 的东西进行整数除法（四舍五入后总是 0 或 1），所以我乘以首先是 100 ...您的 i%2 != 0 也分配给了错误的 var，所以我更改了它.. 这是一个 jsfiddle 演示它的工作原理.. [http://jsfiddle.net/6Y8xY/1/](http://jsfiddle.net/6Y8xY/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T15:09:20.410

NodeLists（以及 JavaScript 中的数组）是零索引的，它们的最后一个元素是 at `length-1`。因此，循环需要

```
for (var i=0; i<list.length; i++)
// or
for (var i=0; i<=list.length-1; i++) // uncommon 
```

仅访问列表中存在的项目。否则，它们会导致`undefined`, 并且访问它的`value`属性会引发一个异常，从而停止你的整个函数 - 所以没有任何输出。您应该能够在[[error] 控制台](https://webmasters.stackexchange.com/questions/8525/how-to-open-the-javascript-console-in-different-browsers)中看到异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T14:58:07.017

数组值从 0 开始。尝试 i=0 和 i<=list.length-1。您不计算第一个列表元素。

您是从 list[1].type 而不是 list[0].type 开始的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T14:58:54.427

您的代码中有两个问题。

第一的：

`for (var i=1; i <= list.length; i++)`

应该：

`for (var i=1; i <= list.length - 1; i++)`

因为数组是从 0 开始的。

但是，我认为它应该从 0 而不是 1 开始，如下所示：

`for (var i=0; i < list.length; i++)`

第二：

`display.append(out);`

应该：

`display.appendChild(out);`

没有`append`方法，使用[appendChild](https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild)代替。

# php - 对一系列数字进行排序

> ID：15719810
> 
> 赞同：-7
> 
> 时间：2013-03-30T14:48:41.267
> 
> 标签：php

我在 4,5,3,6,7,8,2,1 这样的字符串中有一系列数字，我希望它们按 1,2,3,4,5,6,7,8 的顺序排列

我曾尝试使用爆炸，但从那时起就被卡住了

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T14:52:38.007

干得好，

```
$string = '4,5,3,6,7,8,2,1';

$numbers = explode(',', trim($string));
asort($numbers);
$numbers = implode(',', $numbers);

echo $numbers; // outputs 1,2,3,4,5,6,7,8 
```

**解释**

*   **explode()**将一个字符串拆分成一个数组，由分隔符指定（在这种情况下）

*   **implode()**会做相反的事情。它需要一个数组并使用您指定的分隔符转换为字符串。

我必须这样做才能通过在两者之间使用 asort() 来订购数字（数组）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T14:54:28.993

用 将字符串分割成一个数组[`explode()`](http://php.net/manual/en/function.explode.php)，然后进行自然排序 ( [`natsort()`](http://php.net/manual/en/function.natsort.php))。最后将数组组合回一个字符串[`implode()`](http://php.net/manual/en/function.explode.php)。

```
$string = '4,5,3,6,7,8,2,1';
$array = explode(',',$string);
natsort($array);
echo implode(',',$array); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T14:56:31.177

需要对数组中的字符串进行转换并对其进行排序

```
 <?php
  $string = "4,5,3,6,7,8,2,1";
  $array  = explode(',', $string);
  asort($array);
 echo implode(',', $array);
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T14:57:49.060

`Explode`将字符串转换为数组，对其进行排序，然后`implode`将其返回为字符串：

```
$arr = explode(',', '4,5,3,6,7,8,2,1');
sort($arr, SORT_NUMERIC);

echo implode(',', $arr); 
```

# c++ - 硬币找零 C++

> ID：15719812
> 
> 赞同：0
> 
> 时间：2013-03-30T14:48:46.700
> 
> 标签：c++, algorithm, recursion, coin-change

我试图以这样一种方式解决硬币找零问题，它会计算可以使用的最小硬币数量。我在[http://www.algorithmist.com](http://www.algorithmist.com)上使用了算法帖子。这是算法：

```
C(N,m) = min(C(N,m - 1),C(N - Sm,m) + 1)

with the base cases:

    C(N,m) = 1,N = 0
    C(N,m) = 0,N < 0
    C(N, m) = 0, N >= 1, m <= 0 
```

但是当我编写代码时，它会运行到无穷大。

这是代码：

```
#include <iostream>
#include <algorithm>
using namespace std;
int Types[101];
int  Coins(int N, int m)
{
    if(N==0)
    {
        return 1;
    }
    else if(N<0)
    {
        return 0;
    }
    else if(N>0 && m<=0)
    {
        return 0;
    }
    else
    {
        int a = Coins(N,m-1);
        int b = Coins(N-Types[m],m) + 1;
        int c = min(a,b);
        return c;
    }
}

 int main()
{
    int noOfCoins, Target;
    cin >> noOfCoins >> Target;
    for(int i = 0; i<noOfCoins; i++)
    {
        cin >> Types[i];
    }
    cout << Coins(Target, noOfCoins);
    return 0;
} 
```

有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T14:51:14.860

它应该是`cout << Coins(Target, noOfCoins - 1);`

代替`cout << Coins(Target, noOfCoins);`

否则，您正在访问一个`0`元素，并在这里一次又一次地进入相同的状态：

`int b = Coins(N-Types[m],m) + 1;`

# speech-recognition - HTK：HVite 找不到嗯

> ID：15719817
> 
> 赞同：3
> 
> 时间：2013-03-30T14:49:13.600
> 
> 标签：speech-recognition, htk

[我想使用 HTK 构建一个语音识别系统，因此从http://www.keithv.com/software/htk/us/](http://www.keithv.com/software/htk/us/)（训练数据：WSJ SI-84）下载了一个带有绑定状态的预训练声学模型。

但是，当我尝试使用字典运行 HVite 时，出现以下错误：

```
$ HVite -H macros -H hmmdefs -S test.scp -l '*' -i recout.mlf -w wdnet -p 0.0 -s 5.0 dict tiedlist  
ERROR [+8231]  GetHCIModel: Cannot find hmm [z-]ia[+r]
 FATAL ERROR - Terminating program HVite 
```

其中`macros`、`hmmdefs`和`tiedlist`是从上面的链接下载的文件。`test.scp`包含我的功能文件的路径。

我的`dict`文件如下所示：

```
DIAL d ay ax l
EIGHT ey t
FIVE f ay v
FOUR f ao r
NINE n ay n
OH ow
ONE w ah n
SENT-END [] sil
SENT-START [] sil
SEVEN s eh v ax n
SIX s ih k s
THREE th r iy
TWO t uw
ZERO z ia r ow 
```

`wdnet`使用 生成`HParse grammer wdnet`，其中 的内容`grammar`如下：

```
$digit = ONE | TWO | THREE | FOUR | FIVE | SIX | SEVEN | EIGHT | NINE | OH | ZERO;

( SENT-START DIAL <$digit> SENT-END ) 
```

`tiedlist`没有包含 的行`z-ia+r`，但为什么这是一个错误，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T16:24:17.433

您使用的电话名称与声学模型的电话集不匹配

```
 ZERO z ia r ow 
```

一定是

```
 ZERO z iy r ow 
```

or

```
 ZERO z ih r ow 
```

There is no such phone 'ia' in the phoneset

# c# - Cant execute SQL query , with Convert(Date,GetDate()) , C# WinForms

> ID：15719818
> 
> 赞同：-2
> 
> 时间：2013-03-30T14:49:17.837
> 
> 标签：c#, sql, winforms

I'm trying to execute this query

```
"INSERT INTO Orders Values (" + OrderId.Text + ',' + IDCustTextBox.Text + ',' + CustName.Text + ",SELECT CONVERT(DATE, GETDATE()))" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T14:52:07.380

To fix the query directly, *first*, you have mistmatched single quote. *second*, you can directly pass `GETDATE()` int the value,

```
string _insert = "INSERT INTO Orders Values ('" + OrderId.Text + "','" + IDCustTextBox.Text + "','" + CustName.Text + "',GETDATE())" 
```

***Your sql statement is very weak***. You should parameterized the value to avoid [`SQL Injection`](http://en.wikipedia.org/wiki/SQL_injection).

Assuming you are using `SQL Server`

```
string connStr = "connection string here";
string insertStatement = @"INSERT INTO Orders 
            Values (@ordID, @custID, @custName, GETDATE())";

using (SqlConnection conn = new SqlConnection(connStr))
{
    using (SqlCommand comm = new SqlCommand())
    {
        comm.Connection = conn;
        comm.CommandType = CommandType.Text;
        comm.CommandText = insertStatement;
        comm.Parameters.AddWithValue("@ordID", OrderId.Text);
        comm.Parameters.AddWithValue("@custID", IDCustTextBox.Text);
        comm.Parameters.AddWithValue("@custName", CustName.Text);
        try
        {
            conn.Open();
            conn.ExecuteNonQuery();
        }
        catch(SqlException ex)
        {
            // do something with the exception
            // ex.ToString()
            // don't hide it
        }
    }
} 
```

To improve:

*   use `Command` and `Parameter` to avoid from `SQL Injection`
*   use `Command` and `Parameter` to avoid from `SQL Injection` -- `:D`
*   use `try-catch` block to properly handle exception
*   use `using` statement to properly dispose object

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T14:52:14.797

Since you are using the `INSERT INTO ...VALUES`, you don't need a `SELECT`. You will use:

```
"INSERT INTO Orders 
 Values ('" + OrderId.Text + "','" + IDCustTextBox.Text + "','" + CustName.Text + "',GETDATE())" 
```

By the way, you do not need to convert `GETDATE()` to a date because it is already a date.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T15:10:28.947

Cant you Modify Your table with DEFAULT GETDATE()?? then You dont want to insert separately. eg: CREATE TABLE Orders ( OrderId int NOT NULL PRIMARY KEY, ProductName varchar(50) NOT NULL, OrderDate datetime NOT NULL DEFAULT GETDATE() )

# jquery - 我的 Google 热图数据数组有什么问题？

> ID：15719820
> 
> 赞同：0
> 
> 时间：2013-03-30T14:49:43.120
> 
> 标签：jquery, google-maps-api-3, heatmap

```
 <div class="container-fluid">
    <div class="row-fluid">
      <div class="span12">
          <div id="map" style="height: 550px"></div>
      </div>
</div>
</div> <script type="text/javascript"   src="http://gmaps-utility-gis.googlecode.com/svn/trunk/fusiontips/src/fusiontips_compiled.js"></script>
<script type="text/javascript"  src="http://maps.googleapis.com/maps/api/js?libraries=geometry,places,visualization&sensor=true"></script>
<script type="text/javascript" src="http://www.google.com/jsapi"></script>
<script type="text/javascript">
window.onload = function() {
$('#crime').addClass('active');
get_vehcile_theft_archive();
};

var heat =[];

function get_vehcile_theft_archive(){
$.ajax({
    url: '<?php echo URL;?>police_vehicletheft/get_vehcile_theft_archive',
    type: 'POST',
    dataType: 'json',
    success: function(data) {
        for (var i in data){
            heat[i]=new google.maps.LatLng(data[i].latitude,    data[i].longitude);
        }
        console.log(heat);

    }           
});
}

 var center_guwahati =  new google.maps.LatLng(26.171523,91.756096);
 var map;
 google.maps.event.addDomListener(window, 'load', initialize);

function initialize() {
var myOptions = {
  zoom: 12,
  center: center_guwahati,
  mapTypeId: google.maps.MapTypeId.ROADMAP,
  zoomControlOptions: {
      style: google.maps.ZoomControlStyle.SMALL
   },
};
var map = new google.maps.Map(document.getElementById('map'),myOptions);

var style = [
            {
              "stylers": [
                { "visibility": "simplified" },
                { "saturation": -100 },
                { "gamma": 0.77 }
              ]
            }

           ];
           var styledMapType = new google.maps.StyledMapType(style, {
             map: map,
             name: 'stylers'
           });    
           map.mapTypes.set('map-style', styledMapType);
           map.setMapTypeId('map-style');

  console.log(heat);  
  var heatMapData = heat;   

  var heatmap = new google.maps.visualization.HeatmapLayer({
 data: heatMapData
 });
 heatmap.setMap(map);
 } 
```

heatMapData 变量有什么问题？为什么它没有得到所有的价值？上面的 ajax 函数从 mysql 获取值，我将其设置为全局变量，但我没有在热图中获取该数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:55:36.590

调用时响应`$.ajax`不可用`initialize`，`heat`创建时仍为空`heatmap`。

你最好打电话`get_vehcile_theft_archive` `onload`并`initialize`在`success`-callback 的`$.ajax`

# ios - MonoTouch (Xamarin.iOS) Facebook 应用程序切换支持 iOS 5+

> ID：15719824
> 
> 赞同：3
> 
> 时间：2013-03-30T14:50:00.873
> 
> 标签：ios, facebook, xamarin.ios, xamarin

有没有一种解决方案可以让 iOS 5+ 用户愉快地使用带有 MonoTouch 的 Facebook 3.1+ SDK？

对于不使用 iOS 6 的用户，我希望我的游戏正常切换到 Facebook iOS 应用程序进行身份验证（如果他们有的话），以避免他们输入凭据的障碍。

Facebook iOS SDK 3.1+ (Obj-C) 允许此功能，如果用户使用的是 iOS 6，它会使用本机库。

不幸的是，对于非 iOS 6 用户，我无法找到 MonoTouch 的功能，我的应用程序可以轻松切换到 Facebook 应用程序并快速验证用户身份。

我已将我的 MonoTouch Facebook 选项缩小到以下范围，但没有一个是理想的：

1.  将我的游戏限制为 iOS 6，这将允许我使用 monotouch-bindings/facebook 原生库

2.  使用 Xamarin.Social 组件，该组件需要登录详细信息（无应用切换）并且 UI 很差

3.  使用（自 2011 年以来不受支持）MonoTouch Facebook 3.0 库，那里有几个

4.  将最新的 Facebook 3.2.1 SDK 转换为 MonoTouch，允许非原生应用切换

理想的解决方案是选项 4，它将为用户提供 iOS 上任何版本的应用切换体验。不幸的是，我不知道从哪里开始，而且我没有时间花一周时间尝试转换/绑定（？）它。

我真的不热衷于将应用程序限制为 iOS 6 用户，我们希望应用程序能够覆盖尽可能多的人。

提前感谢您的任何建议和想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T20:00:48.140

3.2.1 facebook SDK 的 Monotouch 绑定在[这里](https://github.com/mono/monotouch-bindings/tree/master/facebook)。

我上次使用它，它似乎可以做你想做的一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T19:02:31.360

Xamarin.iOS 中有一个错误。在此处关注错误修复的进度：[https ://bugzilla.xamarin.com/show_bug.cgi?id=11041](https://bugzilla.xamarin.com/show_bug.cgi?id=11041)

# mysql - 如何在具有逗号分隔值的字段上设置“where”子句？

> ID：15719825
> 
> 赞同：3
> 
> 时间：2013-03-30T14:50:09.457
> 
> 标签：mysql, sql, select

我有一个 db 表，其中有一个字段，其值以`value1,value2,value3,value4`格式存储。我想找到该字段包含定义值的所有行，例如。`value3`.

如何执行查询以搜索像这样的字段中的值？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-30T14:53:41.560

采用`FIND_IN_SET()`

```
SELECT  *
FROM    tableName
WHERE   FIND_IN_SET('value3', 'comma separated value here') > 0 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/c3e1b/2)

来源

*   [MySQL FIND_IN_SET](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_find-in-set)

MySQL Docs 中的描述：

> 如果字符串 str 在由 N 个子字符串组成的字符串列表 strlist 中，则返回 1 到 N 范围内的值。字符串列表是由以“,”字符分隔的子字符串组成的字符串。如果第一个参数是常量字符串，而第二个参数是 SET 类型的列，则 FIND_IN_SET() 函数被优化为使用位算术。如果 str 不在 strlist 中或 strlist 是空字符串，则返回 0。如果任一参数为 NULL，则返回 NULL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T14:53:45.670

您可以使用以下方法执行此操作`like`：

```
where concat(',', field, ',') like '%,value3,%' 
```

# php - 如何解析一个json数组？

> ID：15719828
> 
> 赞同：0
> 
> 时间：2013-03-30T14:50:22.107
> 
> 标签：php, arrays, json, parsing

我一直在尝试解析一个 json 数组，但没有成功。我可以得到一个根元素，但不能得到任何数组元素。下面是我的来自 Foursquare 的 json 数组的开头，它具有重复出现的场地元素。

```
 response: {
          keywords: {}
          suggestedRadius: 10000
          headerLocation: "here"
          headerFullLocation: "here"
          headerLocationGranularity: "unknown"
          headerMessage: "Suggestions for Friday evening"
          totalResults: 214
             groups: [
               {
                  type: "Recommended Places"
                  name: "recommended"
                  items: [
                      {
                       reasons: {
                       count: 0
                       items: [ ]
                        }
                       venue: {
                            id: "4b799a05f964a520b1042fe3"
                            name: "Green Gables"
                            contact: {
                            phone: "3097472496"
                            formattedPhone: "(309) 747-2496"
                                  }
                            location: {
                            address: "17485 East 2500 North Rd" 
```

下面是我尝试获取餐厅名称的 PHP 代码。

```
 $uri = file_get_contents("https://api.foursquare.com/v2/venues/explore?ll=40.7,-89&oauth_token=xxxxxxxxx", true);
        $obj = json_decode($uri, true);

         foreach($obj['response']['groups']['items']['venue'] as $p)
       {']
           if(isset($p['name))  
           echo  $p['name'];
       } 
```

当我执行此代码时，我收到一条错误消息，提示“索引无效：场地。如果我只使用 foreach($obj['response']['groups'] as $p) 我会得到结果。所以它与确定组下元素的名称有关。

好的。这是我最新的 PHP 代码。它深入到名称元素，然后给我一个错误，说“未定义的索引：名称”和“非法字符串偏移名称”。此消息出现 14 次，这是数组中每个项目的一次。那么为什么是“名称” 不承认？有什么想法。

```
 foreach($obj['response']['groups'] as $p)
   {
   if(isset($p['items']))
   {
     foreach($p['items'] as $p1)
 {
  if(isset($p1['venue']))
  {
//   echo varDumpToString($p1['venue']);  // this dump works ok and shows the elements
 foreach($p1['venue'] as $p2)
 {

     echo varDumpToString($p2['name']);   //  This is where I get the error
   }
   }
   }
   }   
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:53:59.670

因为您将 JSON 对象解析为 PHP 数组（ 的第二个参数`json_decode`），但是，您正在访问结果，就好像它是一个对象一样。

使用数组下标访问元素 ( `$obj['response']['groups']['items']['venue']`)，或解析为对象 (`json_decode($uri, false)`或`json_decode($uri)`)

# python - 在python中对多维JSON对象进行排序

> ID：15719830
> 
> 赞同：1
> 
> 时间：2013-03-30T14:50:34.540
> 
> 标签：python, json, sorting, jquery-ui-sortable

我有一个这样的对象，并希望在每个维度（简化的 json）中按时间（第一行，第二个点）对其进行排序：

```
[{
    "type":"point"
},
{
    "type":"line",
    "children": [
        {
            "type":"point"
        },
        {
            "type":"point"
        },
        {
            "type":"line"
        }
    ]

},
{
    "type":"point"     
}] 
```

这个**维度可能更深**，并且彼此之间有更多的点/线。

**排序后**的输出将是这样的：

```
[{
    "type":"line",
    "children": [
        {
            "type":"line"
        },
        {
            "type":"point"
        },
        {
            "type":"point"
        }
    ]

},
{
    "type":"point"
},
{
    "type":"point"     
}] 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T15:00:28.743

您需要递归处理：

```
from operator import itemgetter

def sortLinesPoints(data):
    if isinstance(data, dict):
        if 'children' in data:
            sortLinesPoints(data['children'])
    else:
        for elem in data:
            sortLinesPoints(elem)
        data.sort(key=itemgetter('type')) 
```

# c# - WPF C# webbrowser 禁用所有声音

> ID：15719831
> 
> 赞同：0
> 
> 时间：2013-03-30T14:50:44.413
> 
> 标签：c#, wpf, browser

我可以在我的应用程序 - 网络浏览器中禁用/删除/关闭所有声音吗？

(1) 可以在 XAML 中做吗？

(2) 我如何在 C# 中做到这一点 - 代码后面？

我的浏览器：

xml:

```
xmlns:my="clr-namespace:System.Windows.Forms.Integration;assembly=WindowsFormsIntegration"

<my:WindowsFormsHost Name="windowsFormsHost"/> 
```

后面的代码：

```
System.Windows.Forms.WebBrowser Browser = new System.Windows.Forms.WebBrowser();
            windowsFormsHost.Child = Browser; 
```

# css - 如何删除 twitter 小部件中的边框

> ID：15719835
> 
> 赞同：0
> 
> 时间：2013-03-30T14:51:48.117
> 
> 标签：css, twitter, widget, smarty, customization

我正在尝试在我的网站中包含 twitter 小部件。它是使用`Smarty`. 我正在尝试自定义小部件。现在它在右侧部分有一个滚动条。我认为我们可以通过向`overflow:hidden`class 添加样式来删除它`stream`。但我不确定我们该怎么做。我尝试过使用外部 css 文件，但它不起作用。请帮助我通过删除滚动条来自定义它。

```
 <a class="twitter-timeline"  href="https://twitter.com/username"  data-widget-id="myid" width="376" height="200">Tweets by @name</a>

{literal}
<script>
     !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];
     if(!d.getElementById(id)){
          js=d.createElement(s);
          js.id=id;js.src="//platform.twitter.com/widgets.js";
          fjs.parentNode.insertBefore(js,fjs);
     }}(document,"script","twitter-wjs");</script>
{/literal} 
```

请在此处查看页面[http://www.jobslamp.com/test.php](http://www.jobslamp.com/test.php)

新代码 -------------

```
 <div class="clear"></div>{literal}
<style TYPE="text/css">
#footer {
   background-image: none !important;
  }
    </style>{/literal}
    <a class="twitter-timeline"  href="https://twitter.com/username"  data-widget-  id="myid"    width="376" height="200" style="border:1px solid red !important;">Tweets by   @username</a>

 {literal}<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)   [0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");   </script>{/literal}
<div class="clear"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:12:38.157

试试这个CSS：

```
#footer {
background-image: none !important;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-08T19:17:26.290

无需全部禁用。只需使用 API 提供的新参数：

```
<a href="your_timeline" data-chrome="noscrollbar" ... 
```

[来源 = dev.twitter](https://dev.twitter.com/docs/embedded-timelines#customization)

# matlab - cdsbootstrap matlab function error

> ID：15719840
> 
> 赞同：0
> 
> 时间：2013-03-30T14:52:27.107
> 
> 标签：matlab, function

I am very very new to matlab, actually I only just got the program to run one code. A good friend of mine wrote a code for me however it doesn't seem to work, I have provided the link to the code and data files required, can anyone tell me what's wrong or fix it for me? Much thanks!

The error I am getting is:

Warning: No such number of days in the future exist for a 30/360 day-count basis. > In daysadd at 141 In CDS_PD at 35

[https://www.dropbox.com/s/jtjk187rpu0fhv5/cds.zip](https://www.dropbox.com/s/jtjk187rpu0fhv5/cds.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T16:32:18.310

It appears that it is only a warning and is an inherent limitation of the **"30/360 day-count basis"** as used by the daycount function. As far as I can tell it just means that the calculated day is not unique in this basis. So it doesn't necessarily mean that the program is functioning incorrectly.

See:

[http://www.mathworks.com.au/help/finance/daysadd.html](http://www.mathworks.com.au/help/finance/daysadd.html)

[http://www.mathworks.com.au/help/finance/_f0-6010.html#bsuk32t-1](http://www.mathworks.com.au/help/finance/_f0-6010.html#bsuk32t-1)

[http://www.google.com.au/search?q=30%2F360+day-count+basis](http://www.google.com.au/search?q=30%2F360+day-count+basis)

# apache-flex - Starling / Stage3d 从舞台上卸载游戏

> ID：15719844
> 
> 赞同：0
> 
> 时间：2013-03-30T14:53:18.420
> 
> 标签：apache-flex, stage3d, starling-framework

我有一个 flex 应用程序，它在某个点加载 stage3D (starling) 游戏。到目前为止一切正常，我可以隐藏应用程序并仅显示游戏层，但是当游戏完成时问题就来了，我想返回 flex 应用程序并从舞台上删除游戏。

我确实试图停止游戏并从 stage3d 中删除所有孩子，但这不起作用，下次我尝试重新显示它没有显示的游戏。

这是我正在使用的一些代码

添加游戏并启动它（一切正常）

```
starlingGame                = new Starling(Game, this.systemManager.stage);
starlingGame.antiAliasing   = 0;
starlingGame.start();
starlingGame.showStats      = true;
// this event is dispatched when stage3D is set up
starlingGame.stage3D.addEventListener(Event.CONTEXT3D_CREATE, onContextCreated); 
```

这是我尝试删除/卸载游戏的方法-由于某些原因，这第一次有效，但之后上面的代码不会使游戏第二次显示:(

```
starlingGame.stop();
starlingGame.removeEventListener(Event.CONTEXT3D_CREATE, onContextCreated);
starlingGame.stage.removeChildren();
starlingGame    = null; 
```

# objective-c - Objective-C 和 Cocoa 中本地 BOOL 变量的命名约定

> ID：15719854
> 
> 赞同：3
> 
> 时间：2013-03-30T14:54:26.537
> 
> 标签：objective-c, cocoa-touch, cocoa

我想问一下Cocoa 项目中**局部变量的命名约定。** `BOOL`以下哪个是首选？

```
// Style #1
BOOL isNightModeEnabled = NO;

// Style #2
BOOL nightModeEnabled = NO; 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T15:18:23.327

只是想多了一点。

Apple 自己的 Cocoa 方法不会`BOOL`为用作参数的变量添加前缀：

```
... whenHighlighted:(BOOL)highlighted
... animated:(BOOL)animated 
```

这同样适用于 Xcode 的 setter 自动完成功能。因此，似乎给局部变量加上前缀`is`并不是**一个好主意**，因为最终会得到一些以前缀为前缀的变量，`is`而另一些则不是。因此 using是一个很好**的 getters**`is`命名约定，而不是局部变量。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T14:56:08.503

风格 2 不错。它使属性和 KVO 样式的名称更好读：

```
-(void)setNightModeEnabled;
-(BOOL)nightModeEnabled; 
```

或者

```
@property (assign, nonatomic, getter=isNightModeEnabled) BOOL nightModeEnabled; 
```

检查文档：[可可命名指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CodingGuidelines/Articles/NamingIvarsAndTypes.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T09:08:38.237

我个人的偏好是：

```
bool isNightModeEnabled = false; 
```

它读起来更像英语，把“是”放进去。

我总是优先使用 C99 布尔类型而不是 Apple，`BOOL`除非 Cocoa API 要求这样做。这是因为`BOOL`它只是一个 char 的 typedef，这对于布尔值来说可能是有问题的。例如，以下单元测试失败，即使它不是您对 C 的期望

```
-(void) testBool
{
    int a = 513;
    int b = 257;
    STAssertTrue(a - b, @"Should be true");
} 
```

原因是 a - b 是 256，当转换为`BOOL`参数类型时，所有非零位都将丢失。如果第一个参数`STAssertTrue()`是`bool`，则强制转换将按预期工作。**

# php - 根据点击的内容自定义消息

> ID：15719857
> 
> 赞同：1
> 
> 时间：2013-03-30T14:54:58.993
> 
> 标签：php, javascript, class, html, customization

我有一个 div，里面有一些较小的 div。每个小 div 都有自己的 id，并且属于一个类。

当您单击 div 时，会弹出一条消息，上面写着“已添加到购物车”（猜猜这是关于什么的），我想知道如何获取单击的 div 内段落内的文本值。我想用 PHP 来做这件事，所以我实际上可以用用户的购物车对服务器进行一些更改。

这是我的代码的站点（我尝试包含尽可能少的代码，但有些您可能觉得不必要）

[http://jsfiddle.net/av3Da/2/](http://jsfiddle.net/av3Da/2/)

我的html：

```
<div id="shop">
    <input type="button" value="Go To Checkout" id="checkoutbutton" />
    <div class="shopitem" id="OrangeBG">
        <p class="shopitemname">Orange Background Color</p>
        <div class="buyinfo">
            <p class="buyinfoname">Buy - 40 Coins</p>
        </div>
    </div>
    <div class="shopitem" id="BlackBG">
        <p class="shopitemname">Black Background Color</p>
        <div class="buyinfo">
            <p class="buyinfoname">Buy - 40 Coins</p>
        </div>
    </div>
    <div class="shopitem" id="GreenBG">
        <p class="shopitemname">Green Background Color</p>
        <div class="buyinfo">
            <p class="buyinfoname">Buy - 40 Coins</p>
        </div>
    </div>
    <div class="shopitem" id="BlueBG">
        <p class="shopitemname">Blue Background Color</p>
        <div class="buyinfo">
            <p class="buyinfoname">Buy - 40 Coins</p>
        </div>
    </div>
    <div class="shopitem" id="YellowBG">
        <p class="shopitemname">Yellow Background Color</p>
        <div class="buyinfo">
            <p class="buyinfoname">Buy - 40 Coins</p>
        </div>
    </div>
    <div class="shopitem" id="PurpleBG">
        <p class="shopitemname">Purple Background Color</p>
        <div class="buyinfo">
            <p class="buyinfoname">Buy - 40 Coins</p>
        </div>
    </div>
</div>
<div id="confirmbox">
    <p>The item "<span id="box_item"></span>" was successfully added to your cart</p>
</div> 
```

我的JavaScript：

```
$(document).ready(function(){  
    $(".buyinfo")
    .click(AddToCart)
    .mouseout(popUpVanish);
    $('#confirmbox').hide();

});

function AddToCart() {
    $('#confirmbox').show('normal');
}

function popUpVanish() {
    $('#confirmbox').delay(2000).fadeOut() ;
} 
```

为什么我需要在 JSFIDDLE 中包含代码？

一切看起来都很混乱，但那是因为它在小提琴网站上。

因此，如果我想自定义消息说“您购买了 X 背景颜色”，然后将其添加到 PHP 数据库或 javascript 数组？

此外，我正在寻找一些关于如何将 div 上的“购买 40 个硬币”的文本更改为“已添加到购物车 - 单击以删除”的建议，以便您再次单击该按钮并从中删除该项目购物车。

如果我的问题不好，请不要只评价它，写评论，我会解决！！！！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:45:02.553

我刚刚尝试实现您所要求的大部分内容。但我不能为你做所有，你必须自己尝试，如果有问题你必须问另一个具体问题。

```
// Shop Stuff
var cart = [];

$(document).ready(function(){  
    var buttonTxt = '';

    $(".buyinfo").click(function() {
        //Store text and id of the selected element
        var txt = $(this).siblings('.shopitemname').text(); 
        var id = $(this).closest('.shopitem').attr('id');

        if(!$(this).hasClass('added')) {
           buttonTxt =  $('.buyinfoname', this).text();
           $('#box_item').text(txt);
           cart[id] = txt;            
           //Change text
           $('.buyinfoname', this).text('Added to cart - Click to remove');
           $(this).addClass('added');
           //Show and hide overlay
           $('#confirmbox').show('normal').delay(2000).fadeOut();
        } else {
           delete(cart[id]);
           $(this).removeClass('added');
           $('.buyinfoname', this).text(buttonTxt);
        }

        console.log(cart);
    });
}); 
```

默认情况下隐藏覆盖的CSS。

```
#confirmbox {
 display: none;   
} 
```

Look at that [fiddle](http://jsfiddle.net/av3Da/9/) to try it. Have a look at the console to see the output and the current state of `cart`.

# java - 异步回调结束时的gwt返回值

> ID：15719866
> 
> 赞同：1
> 
> 时间：2013-03-30T14:55:30.280
> 
> 标签：java, gwt, gwt-rpc

你好我有这样的功能：

```
 @Override
    public boolean checkExist(String name) {

        final boolean check[] = new boolean[] { false };

        getAllRecordFromServer(new SearchCallback() {

            @Override
            public void onSearchResult(Map<String, Item> itemsMap) {
            //do some action set true when map key equals name  
                 check[0] = true;
            }

            @Override
            public void onSearchError(XMLPacket error) {
                // TODO Auto-generated method stub

            }
        });

        return check[0];
    } 
```

我正在寻找解决方案并找到了一些文章，但我不知道如何在 gwt 中执行此操作：/ 此代码无法正常工作......因为您知道这是异步回调。

我该如何解决这个问题，我必须在回调结束后返回值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T15:31:25.747

不可能像您所做的那样从方法中的异步调用返回值。这就是**“异步”**调用的基本性质。您永远不知道它何时会返回（网络/服务器延迟），因此您的代码执行不会等待！！！！！！

**不要从您的方法返回布尔值。而是让您的方法接受回调。**

```
 interface MyCallback {
   execute(boolean successfl);
 }

 public void checkExist(String name, MyCallback callback) {
       getAllRecordFromServer(new SearchCallback() {
            @Override
            public void onSearchResult(Map<String, Item> itemsMap) {
            //do some action set true when map key equals name  
                 callback.execute(true);
            }

            @Override
            public void onSearchError(XMLPacket error) {
            }
        });
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T12:06:17.357

也许更清洁的解决方案可能是在您获得结果时使用事件和事件总线（它可以是您的班级私有的，也可以由所有人共享，以便其他组件可以对此做出反应）。然后监听这些事件并相应地对待它们。

```
 getAllRecordFromServer(new SearchCallback() {

    @Override
    public void onSearchResult() {
        eventBus.fireEvent(new FoundEvent());
    }

    @Override
    public void onSearchError() {            
        eventBus.fireEvent(new NotFoundEvent());
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T19:36:55.800

```
This code is not working properly ... 
```

原因是您的代码在`synchronous model`并且您正在制作`Asynchronous calls`.

我假设你在得到一些结果后正在做某事`onSearchResult`。

所以，**在你得到服务器的响应之前停止执行你的代码**，为什么因为你不知道调用有时会失败。

如果你真的想全局使用这个值，那么

```
public boolean returnVal=false;

public void checkExist(String name, MyCallback callback) {
       getAllRecordFromServer(new SearchCallback() {
            @Override
            public void onSearchResult(Map<String, Item> itemsMap) {
                  returnVal=true;
                  proceedFurther(itemsMap) //your next lines of code in this method.
            }

            @Override
            public void onSearchError(XMLPacket error) {
             stopProceedFurther(); //show  some error message to user.
            }
        }); 
```

# hadoop - 如何在 Mahout in Action 中构建和执行示例

> ID：15719867
> 
> 赞同：0
> 
> 时间：2013-03-30T14:55:37.037
> 
> 标签：hadoop, compilation, hbase, mahout

我现在正在学习 Mahout in Action 并写信询问如何构建和执行书中的示例。我可以使用 eclipse 找到说明，但我的环境不包含 UI。所以我把第一个例子（RecommenderIntro）复制到了RecommenderIntro.java中，通过javac编译。

我收到一个错误，因为未导入包。所以我正在寻找：

1.  导入缺失包的方法。

2.  我想，即使编译成功，也会生成.class文件，我该如何执行呢？通过“java RecommenderIntro”？我可以通过执行 mahout 示例`sudo -u hdfs hadoop jar mahout-examples-0.7-cdh4.2.0-job.jar org.apache.mahout.clustering.syntheticcontrol.kmeans.Job`，如何为自己的示例做类似的事情？

3.  我所有的数据都保存在 HBase 表中，但是在书中（甚至谷歌）中，我找不到将它与 HBase 集成的方法，有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T21:22:17.430

q1 和 q2，你需要一个像 maven 这样的 java 构建工具。您使用以下命令构建 hadoop-jar：'mvn clean install' 这将在 target/mia-job.jar 中创建您的 hadoop 作业然后您使用以下命令执行您的作业：hadoop jar target/mia-job.jar RecommenderIntro inputDirIgnored outputDirIgnored（RecommenderIntro 忽略参数，但是 hadoop 强制你指定至少 2 个参数，通常是输入和输出目录）

q3：你不能开箱即用。选项 1：将您的 hbase 数据导出到文本文件“intro.csv”，其内容如下：“%userId%, %ItemId%, %score%”，如书中所述。因为这是 RecommenderIntro 正在寻找的文件。选项2：修改示例代码以从hbase中读取数据...

ps1。对于开发这样的应用程序，我真的建议使用 IDE。因为它允许您使用代码完成、执行、构建等。一个简单的入门方法是使用 Cloudera 或 HortonWorks 之类的 hadoop 下载虚拟映像，然后安装 Eclipse 之类的 IDE。您还可以配置这些图像以使用您的 hadoop 集群，但对于小型数据集，您不需要这样做。ps2。RecommenderIntro 代码不是分布式实现，因此无法在大型数据集上运行。它也在本地而不是在 hadoop 集群上运行。

# c# - 有没有办法在代码中创建一个随机字符串列表来测试 C#？

> ID：15719873
> 
> 赞同：-2
> 
> 时间：2013-03-30T14:56:32.597
> 
> 标签：c#, random

出于测试目的，我通常必须创建一个巨大的字符串数组，这些字符串在代码中都是随机的或唯一的。有没有一种简单的方法可以在 C# 中执行此操作...而不是手动实例化一堆字符串。如果我们也可以使用它作为一些自定义类的数组，并初始化简单的属性，那就太好了。

编辑：我试过这样做：

```
string myItems[] = { "ONE", "TWO" , "THREE" etc..}

For( loop through 100 )
{
    Use GetRandomFileName()
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T15:03:46.757

您可以使用 GUID

这是它的代码。在 c#.NET 中

```
string id = System.Guid.NewGuid().ToString();
                Console.WriteLine(id); 
```

如果您想要其中的 100 个，请使用循环。

```
int i=0;
List<string> id = null;
while(i<100)
{ 
    id.add(System.Guid.NewGuid().ToString());
    i++;
} 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T15:02:06.397

是的，您可以，但这主要取决于您的具体要求。

## 一个随机字符串

[这是一个示例函数，它将通过为这些字符（97 到 122）生成ASCII 代码](http://www.asciitable.com/)并将它们转换为s 再将它们附加到我们的字符串来构建一个`length`由 az 字符组成的特定字符串。`char`

```
public string BuildRandomString(Random random, int length)
{
    var random = new Random();
    string text = string.Empty;

    for (int i = 0; i < length; i++)
        text += (char)random.Next(97, 122);

    return text;
} 
```

## 100 人的清单

我们可以使用它来生成`List`100 个随机字符串，如下所示：

```
var random = new Random();
var strings = new List<string>();

for (int i = 0; i < 100; i++)
    strings.Add(BuildRandomString(random, 10)); 
```

## 可变长度

这可以进一步扩展以获得不同长度的字符串，如下所示：

```
public string BuildRandomString(Random random, int minLength, int maxLength)
{
    var text = string.Empty;
    var length = random.Next(minLength, maxLength);

    for (int i = 0; i < length; i++)
        text += (char)random.Next(97, 122);

    return text;
} 
```

## 进一步扩展

可以扩展此方法以提供您喜欢的任何内容，例如改进可以确保每个生成的字符串至少有一个元音，使其看起来更像一个单词。

当扩展方法以根据您的要求提供更理想的结果时，[ASCII 表将非常方便。](http://www.asciitable.com/)

## `System.Random`

您会注意到`Random`对象被实例化并作为参数传递给方法。`BuildRandomString()`由于“伪随机”数字的工作方式，我们不能仅仅实例化一个新的。他们采用“种子”来确定第一个数字和第二个数字等是什么。`new Random(102302)`这有好处，因为如果我们想通过使用例如多次处理相同的“随机”数据，我们可以明确指定一个种子。

当您不使用种子时，将使用[默认构造函数](http://msdn.microsoft.com/en-us/library/h343ddh9.aspx)，它根据系统时钟生成种子。问题是这个数字在连续使用时会返回相同的种子，所以我们需要使用相同的变量。它也可以很容易地成为包含我们`BuildRandomString`方法的类的成员变量。

来自 MSDN：

> 默认种子值来自系统时钟并且具有有限的分辨率。因此，通过调用默认构造函数连续创建的不同 Random 对象将具有相同的默认种子值，因此将产生相同的随机数集。这个问题可以通过使用单个 Random 对象来生成所有随机数来避免。

感谢拨号器指出。

# azure-sql-database - 无法访问 SQL Azure

> ID：15719878
> 
> 赞同：3
> 
> 时间：2013-03-30T14:56:45.817
> 
> 标签：azure-sql-database

刚刚 SQL Azure 出现了一个奇怪的问题，它发生在一个小阶段，就在完全上线之前，一些用户正在做一些数据输入。

“服务器‘xxx’上的数据库‘dbname’当前不可用。请稍后重试连接。如果问题仍然存在，请联系客户支持。”

当我尝试通过 SQL Azure 数据库网站连接时，我得到：“防火墙检查失败。资源 ID：1。请求最小保证为 0，最大限制为 180，数据库的当前使用量为 0。但是，服务器当前是太忙，无法支持此数据库的大于 0 的请求。”

查看 Azure 管理网站的数据库部分，该站点报告它无法访问数据库，但不幸的是我没有捕获确切的错误消息。

奇怪的是，我的几个用户仍然能够登录我们的系统网站来访问数据库，并查看和保存数据。然而，最终他们也失去了联系。

大约一个小时后，数据库恢复了生机，我们可以再次完全访问它们。

我已经使用来自[这里](http://msdn.microsoft.com/en-us/library/windowsazure/ee730906.aspx)的查询查看了服务器主数据库事件表，并且有几个连接失败，但没有什么有趣的。没有节流或死锁，有几个失败的连接说“客户端在建立连接时可能已超时。尝试增加连接超时。” 在描述中

还有什么想法可以看吗？

因此，商业用户的信心大幅下降。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T23:58:13.737

您的描述通常是因为：

1) 达到 SQL 连接限制。假设您不经常看到这种情况，您不太可能是原因。但值得检查的是，限制连接池会有所帮助。

2）你的邻居非常嘈杂，因此节点重新调整。

3) 硬件故障和 Microsoft 使您的数据库在另一个节点上重新联机。这可能需要一些时间。

通常情况下，当微软限制或出现问题并不得不恢复所有人时，我会看到这种情况。因为您在共享系统上，所以您必须记住，他们也在恢复该节点中的其他所有人，因此有时这需要时间。

如果您担心并需要为业务寻求解决方案，最好的选择是向 MS 开一张支持票，并给他们您看到的时间和错误消息。他们会进行调查，通常他们有非常好的后端遥测，这将指向一个原因。这将使您能够为企业提供解决方案，然后您可以就未来的计划和突发事件进行调用。您必须记住，尽管 SQL Azure 是共享系统并且可能会发生暂时性错误，但您可能需要在设计中设计更多故障转移。

# c - 从这个缓冲区读取的“最安全”的方法是什么？

> ID：15719879
> 
> 赞同：1
> 
> 时间：2013-03-30T14:56:58.583
> 
> 标签：c, linux, serial-port, buffer, port

我正在尝试在 Linux（Ubuntu 12.04）中读取和写入串行端口，其中另一端的微控制器在完成特定任务时会爆炸 1 或 3 个字节。我能够成功读取和写入设备，但问题是我的读取现在有点“危险”：

```
do
{
    nbytes = read(fd, buffer, sizeof(buffer));
    usleep(50000);
} while(nbytes == -1); 
```

即简单地监视设备发送给我的内容，我每半秒轮询一次缓冲区。如果为空，则在此循环中空闲。如果它收到一些东西或错误，它就会退出。然后一些逻辑处理 1 或 3 个数据包并将其打印到终端。半秒通常是一个足够长的窗口，可以让某些东西完全出现在缓冲区中，但对于最终会看到它的人来说，它足够快，不会认为它很慢。

“通常”是关键词。如果我读取中间的缓冲区爆破 3 个字节。我会读得很糟糕；缓冲区中将包含 1 或 2 个字节，它会在数据包处理中被拒绝（如果我捕获 3 字节数据包中的第一个，它不会是有目的地发送一个字节的值）。

我考虑过/尝试过的解决方案：

1.  我想过一次简单地读取一个字节，如果它是 3 字节传输的一部分，则输入额外的字节。但是，这会产生一些丑陋的循环（因为 read() 只返回仅返回最近一次读取的字节数），如果可以的话，我想避免这些循环

2.  我试图读取 0 个字节（例如 nbytes = read(fd, buffer, 0);）只是为了查看缓冲区中当前有多少字节，然后再尝试将其加载到我自己的缓冲区中，但正如我所怀疑的那样返回 0。

如果我可以在将端口缓冲区的内容加载到我自己的缓冲区之前查看端口缓冲区的内容，那么我的很多问题似乎都会很容易解决。但是 read() 的破坏性取决于您告诉它读取的字节数。

我怎样才能从这个缓冲区中读取数据，这样我就不会在接收传输的过程中这样做，但要足够快以至于不会让用户觉得慢？我的串行信使分为发送者和接收者线程，所以我不必担心我的程序循环阻塞某处而忽略另一半。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T16:11:23.433

修复您的数据包处理。对于这样的实例，我总是最终使用状态机，所以如果我收到部分消息，我会记得（有状态的）我停止处理的地方，并且可以在其余数据包到达时恢复。

通常我必须在数据包末尾验证校验和，然后再进行其他处理，所以“我停止处理的地方”总是“等待校验和”。但是我存储了部分数据包，以便在更多数据到达时使用。

Even though you can't peek into the driver buffer, you can load all those bytes into your own buffer (in C++ a `deque` is a good choice) and peek into that all you want.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T15:02:43.090

您需要知道要发送的消息有多大。有几种方法可以做到这一点：

1.  使用消息的长度为消息添加前缀。
2.  有一个消息终止符，一个不能成为消息一部分的字节（或字节序列）。
3.  使用“命令”来计算长度，即当您读取命令字节时，您知道应该遵循多少数据，因此请读取该数量。

第二种方法最适合您可能不同步的情况，因为然后读取直到您获得消息终止序列并且您确定下一个字节将是一条新消息。

你当然可以结合这些方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T15:57:34.753

要轮询设备，您最好使用像[poll(2)](http://man7.org/linux/man-pages/man2/poll.2.html)这样的多路复用系统调用，当某些数据可用于从该设备读取时，它会成功。请注意，这`poll`是多路复用：您可以一次轮询多个文件描述符，并且`poll`只要一个（任何）文件描述符可读`POLLIN`（或可写，如果用`POLLOUT`等询问）就会成功。

一旦`poll`成功，`fd`您`POLLIN`可以从中读取[（2）](http://man7.org/linux/man-pages/man2/read.2.html)`fd`

当然，您需要了解硬件设备使用的关于其消息的约定。请注意，单个`read`消息可能会收到多条消息，或者只是一条（或多条）消息的一部分。没有办法阻止读取部分消息（或“数据包”）——可能是因为您的 PC 串行 I/O 比微控制器内部的串行 I/O 快得多。您应该忍受这一点，通过了解定义消息的约定（如果您可以更改微控制器内部的软件，请为此定义一个简单的约定）并实施适当的状态机和缓冲等......

^(注意：还有用于多路复用的较旧的[select(2)](http://man7.org/linux/man-pages/man2/select.2.html)系统调用，它具有与 C10K 问题相关的限制。我建议`poll`不要`select`使用新代码。)

# ruby-on-rails - 将应用程序部署到 heroku 后的问题

> ID：15719882
> 
> 赞同：0
> 
> 时间：2013-03-30T14:57:07.103
> 
> 标签：ruby-on-rails, heroku

我有一个我目前正在开发的网络应用程序，我刚刚在系统完成执行 git push heroku master 后遇到了一个问题。在开发中，该应用程序运行良好。我已经将数据库更改为 PostgreSQL，所以推送没有问题。但是在推送之后，当我尝试在线查看应用程序时，它告诉我有一个错误，当我通过命令搜索 heroku 日志时`Heroku logs --tail`，这是我发现的错误：

```
Completed 500 Internal Server Error in 866ms
    at parse_error (/tmp/execjs20130330-2-1s2w7pb.js:1824:17)
    at new JS_Parse_Error (/tmp/execjs20130330-2-1s2w7pb.js:1720:22)
ActionView::Template::Error (Unexpected character '#' (line: 11021, col: 1, pos: 312418)
Error
    at js_error (/tmp/execjs20130330-2-1s2w7pb.js:1728:15)

    at Object.semicolon [as 1] (/tmp/execjs20130330-2-1s2w7pb.js:2221:38)
    at simple_statement (/tmp/execjs20130330-2-1s2w7pb.js:2362:35)
    at /tmp/execjs20130330-2-1s2w7pb.js:2265:32

    at Object.next_token [as input] (/tmp/execjs20130330-2-1s2w7pb.js:2070:17)
    at next (/tmp/execjs20130330-2-1s2w7pb.js:2175:37)
    at /tmp/execjs20130330-2-1s2w7pb.js:2753:32
  (in /app/app/assets/javascripts/application.js)):
    9: <body>
    6:   <%= javascript_include_tag

    4:   <title>Pinsvault</title> 
```

我看不到去哪里修复，这似乎与 JavaScript 有关，但我在开发中没有类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T14:59:38.997

看起来你没有关闭你的`javascript_include_tag`，尝试添加`%>`

```
<%= javascript_include_tag %> 
```

您可以尝试使用 Chrome 检查器的控制台选项卡在本地验证这一点。看看那里是否有任何 javascript 错误。

# python - Python django：如何使用 django LiveServerTestCase 调用 selenium.set_speed()

> ID：15719885
> 
> 赞同：7
> 
> 时间：2013-03-30T14:57:15.860
> 
> 标签：python, django, binding, selenium, webdriver

要运行我的功能测试，我使用`LiveServerTestCase`.

我想调用不在 webdriver 中但在 selenium 对象中的`set_speed`（和其他方法，只是一个示例）。`set_speed`

[http://selenium.googlecode.com/git/docs/api/py/selenium/selenium.selenium.html#module-selenium.selenium](http://selenium.googlecode.com/git/docs/api/py/selenium/selenium.selenium.html#module-selenium.selenium)

我的子类`LiveServerTestCase`

```
from selenium import webdriver

class SeleniumLiveServerTestCase(LiveServerTestCase):

    @classmethod
    def setUpClass(cls):

        cls.driver = webdriver.Firefox()
        cls.driver.implicitly_wait(7)

        cls.driver.maximize_window()

        # how to call selenium.selenium.set_speed() from here? how to get the ref to the selenium object?

        super(SeleniumLiveServerTestCase, cls).setUpClass() 
```

如何得到它？我认为我不能在 selenium 上调用构造函数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T09:03:19.317

你没有。无法在 WebDriver 中设置速度，原因是您通常不需要这样做，并且“等待”现在在不同的级别完成。

在可以告诉 Selenium 之前，不要以正常速度运行它，以较慢的速度运行它以允许在页面加载时提供更多可用的东西，用于慢速加载页面或 AJAX 化页面。

现在，你完全消除了它。例子：

我有一个登录页面，我登录并登录后，我会看到一条“欢迎”消息。问题是欢迎消息不会立即显示并且有时间延迟（使用 jQuery）。

**Pre WebDriver Code将指示 Selenium，运行此测试，但在***这里*放慢速度，以便我们可以等到欢迎消息出现。

**较新的 WebDriver 代码**将指示 Selenium，运行此测试，但是当我们登录时，使用显式等待等待最多 20 秒以显示欢迎消息[。](http://docs.seleniumhq.org/docs/04_webdriver_advanced.jsp)

现在，如果您真的想访问“设置” Selenium 的速度，首先我建议您反对它，但解决方案是深入研究旧的、现已弃用的代码。

如果您已经大量使用 WebDriver，则可以使用`WebDriverBackedSelenium`which 可以让您访问较旧的 Selenium 方法，同时保持 WebDriver 支持相同，因此您的大部分代码将保持不变。

[https://groups.google.com/forum/#!topic/selenium-users/6E53jIIT0TE](https://groups.google.com/forum/#!topic/selenium-users/6E53jIIT0TE)

第二种选择是深入研究旧的 Selenium 代码并使用它，这将改变你现有的很多代码（因为它是在“WebDriver”概念诞生之前）。

Selenium RC 和 WebDriverBackedSelenium 的代码都在这里，好奇：

[https://code.google.com/p/selenium/source/browse/py/selenium/selenium.py](https://code.google.com/p/selenium/source/browse/py/selenium/selenium.py)

类似于以下内容：

```
from selenium import webdriver
from selenium import selenium
driver = webdriver.Firefox()
sel = selenium('localhost', 4444, '*webdriver', 'http://www.google.com')
sel.start(driver = driver) 
```

You'd then get access to do this:

```
sel.setSpeed(5000) 
```

# objective-c - 将基于 Nib 的 SQL3 Lite 项目集成到选项卡栏

> ID：15719886
> 
> 赞同：0
> 
> 时间：2013-03-30T14:57:22.517
> 
> 标签：objective-c, xcode, sqlite

我环顾了一段时间，终于找到了一个非常适合我需要的 SQL Lite 教程。我从它下载了源代码。

然而，这段代码有很多折旧的代码，我又修复了这些代码。这是我更新的项目的链接。[（这里）](http://www.blakeloizides.co.za/sql.zip)

我有相当多的经验将基于 xib 的项目集成到标签栏项目中。但我一开始就被卡住了，因为在这个项目的几乎每个文件中都有一个对**SQLAppDelegate**的引用，它是 SQL 项目的应用程序委托。

我遇到的问题是我有一个故事板项目并且已经有一个应用程序委托。如果我将 SQLAppDelegate.h 和 SQLAppDelegate.m 中的代码包含在我的故事板项目的 AppDelegate.h 和 AppDelegate.m 中，并将来自教程项目中 RootViewController 的代码包含到我的故事板标签栏项目视图控制器文件中并删除 RootViewController.xib 和将其余文件保留在我的项目中，这行得通吗？

例如，我将在教程中删除 SQLAppDelegate.h 和 SQLAppDelegate.m 和 MainWindow.xib，并将该代码集成到我的故事板 Appdelegate.h 和 AppDelegate.m 中。

然后，我将获取教程项目中的所有其他文件，然后使用正确的框架将其包含在我的项目中。我会删除 RootViewController.xib 并保留 RootViewController.h 和 .m ，然后我会将 RootViewController.xib 的设置集成到我的选项卡中，我希望它在我的选项卡故事板中。并正确引用它。我会在我的故事板中将该选项卡称为 RootViewController。

我知道我可以在我的故事板标签栏项目中包含 .xib 文件并从我的故事板中引用它们。它工作我已经做到了。

将 SQLAppDelegate 中的代码包含到我的 AppDelegate 中会干扰我其余选项卡中的代码吗？

或者我可以只将 SQLAppDelegate 和其余文件包含到我的项目中并引用它们，然后从我的项目中删除 MainWindow 和 _window 代码，然后使我的选项卡故事板项目中的相关连接到 SQLAppDelegate？

这个螨虫听起来有点混乱？

**更新** 好的...在尝试自己集成后，我遇到了许多问题，例如

```
SQLAppDelegate *appDelegate = (SQLAppDelegate *)[[UIApplication sharedApplication] delegate]; 
```

在 Arc 中不起作用，总而言之，我遇到了大约 10 个错误，我所做的只是将教程项目中的文件包含在我的 Storyboard 选项卡项目中。

谁会想到在 Storyboard Tabbar 项目中尝试使用 SQLite 如此困难？

是否有任何在其中一个选项卡中使用 SQLite 的 Storyboard Tabbar Example 示例？

这个项目的功能是如此完美。叹。

![在此处输入图像描述](../Images/81015af3c79dd78e62505f433fe76919.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:54:28.030

我从 raywenderlich.com/6603/basic-security-in-ios-5-tutorial-part-2 找到了一个圣诞节 Kepper 应用程序。一个很棒的教程，我下载了教程，除了几行折旧的代码和我设法修复的 1 个警告之外，它非常适合我想要的。:D

# php - 我可以在这里使用 foreach 进行多次上传吗？

> ID：15719887
> 
> 赞同：2
> 
> 时间：2013-03-30T14:57:34.367
> 
> 标签：php, html, image, file-upload, foreach

我在带有文本输入的表单上有一个图像上传按钮，但设计用于检查、调整大小和上传文件的脚本仅用于一次上传。

有没有办法可以使用带有以下代码的 foreach() 将每个文件提供给该脚本？

```
if (($_FILES['file']['type'] != 'image/jpeg') && ($_FILES['file']['type'] != 'image/jpg') && ($_FILES['file']['type'] != 'image/pjpeg')) {
            echo "<script>alert('Images Must be in jpg format and under 2 Mb');\n";
            echo sprintf("window.location='add.php'");
            echo "</script>";
            include('no-ad-footer.php');
                } else {
                chdir('admin/photos'); 
                require_once('upload.php');
                chdir('../../');

        if ($up->ValidateUpload()) { 
                $node = new sqlNode();
                $node->table = "photos";
                $node->push("int","TypeID",$_POST['TypeID']);
                $node->push("int","ListingID",$ListingID);          
                $node->push("text","Location",$new_name);           
                $node->push("int","POrder",$_POST['POrder']);
                $node->push("defined","DateofUpload","NOW()");

                if(($result = $mysql->insert($node)) === false)
                    die('Unable to push photo details into table photos line 38');          
            } else {
                echo "<font color='red'>Unable to upload image</font>";
                }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:52:29.710

没有尝试过，但这应该可以：

```
$ftypelist = array('image/jpeg', 'image/jpg', 'image/pjpeg');

foreach($_FILES as $file){
    if(in_array($file[type], $ftypelist){
        echo "<script>alert('Images Must be in jpg format and under 2 Mb');\n";
        echo sprintf("window.location='add.php'");
        echo "</script>";
        include('no-ad-footer.php');
    } else {
        chdir('admin/photos'); 
        require_once('upload.php');
        chdir('../../');

        if ($up->ValidateUpload()) { 
            $node = new sqlNode();
            $node->table = "photos";
            $node->push("int","TypeID",$_POST['TypeID']);
            $node->push("int","ListingID",$ListingID);          
            $node->push("text","Location",$new_name);           
            $node->push("int","POrder",$_POST['POrder']);
            $node->push("defined","DateofUpload","NOW()");

            if(($result = $mysql->insert($node)) === false)
                die('Unable to push photo details into table photos line 38');          
        } else {
            echo "<font color='red'>Unable to upload image</font>";
        }
    }
} 
```

# php - 如何使网页保留表单中的变量？

> ID：15719891
> 
> 赞同：0
> 
> 时间：2013-03-30T14:57:58.123
> 
> 标签：php, forms

抱歉，如果我在这里复制线程，但我无法在 StackOverflow 上的其他任何地方找到答案。

基本上我要做的是制作一个列表，其中可以保留用户在表单中输入的变量。目前，我有使这成为可能和功能的代码，但是在表单中输入的变量仅在用户点击提交后才会出现在列表中......只要我刷新页面或从某个地方转到页面否则，变量消失。有什么办法可以阻止这种情况发生吗？

编辑：这里是代码：

```
//Page 1
<?php

session_start(); 

$entries = array(
0 => $_POST['signup_username'],
1 => $_POST['signup_email'],
2 => $_POST['signup_city']);

$entries_unique = array_unique($entries);
$entries_unique_values = array_values($entries_unique);

echo "<a href='Page 2'>Link</a>";

$_SESSION['entries_unique_values'] = $entries_unique_values;

?>

//Page2 
<?php

session_start(); 

$entries_unique_values = $_SESSION['entries_unique_values'];

foreach($entries_unique_values as $key => $value) {
$ValueReplace = $value;
echo "<br /><a href='http://example.com/members/?s=$ValueReplace'>" . $value . "</a><br/>";
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:01:43.240

使用 PHP 会话或通过 JS 或使用 PHP 在 Cookie 中存储变量值。如果您显示您的工作代码会很好:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T15:08:08.110

您的想法很好，但是您只需要向您添加一些条件`Page 1`，仅在创建`SESSION`时设置您的值`POST`，这样即使您刷新它也会保留这些值。否则，当您访问没有 a 的页面时，`POST`这些值将被空白值覆盖，这就是您现在所看到的。你可以像这样修改它

```
<?php

session_start(); 

if(isset($_POST["signup_username"]))
{
$entries = array(
0 => $_POST['signup_username'],
1 => $_POST['signup_email'],
2 => $_POST['signup_city']);
$entries_unique = array_unique($entries);
$entries_unique_values = array_values($entries_unique);
$_SESSION['entries_unique_values'] = $entries_unique_values;
}

echo "<a href='http://localhost/Calculator/form2.1.php'>Link</a>";

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T15:23:49.660

你的问题真的很模糊。答案取决于您必须存储多少数据，以及您需要它存在多长时间。

通过变量，我假设您的意思是用户输入的数据并且您想要放入变量中。我还假设变量列表是在提交表单时由 php 创建的。

php 只会在表单提交时创建变量列表，因为 php 完全在服务器上完成，因此在提交表单之前您不会拥有或看到变量。

如果您希望能够在创建列表时看到它，您可以使用 javascript，那么一旦您拥有 php 变量，就不需要 javascript 列表。

每次您请求一个 php 页面时，无论它是否相同，服务器都会生成一个全新的页面，这意味着来自先前页面的所有非硬编码变量都将丢失，除非您在页面周围不断发布变量，服务器将不记得它们.

你有几个可行的选择。

1.  ) keep passing the user created variables in POST or GET requests so each page has the necesary info to work with. Depending on the situation it might or might not be a good idea. If the data only needs to exsits for one or two pages then it is ok, but bad if you need the data to be accessable from any page on your web.

2.) start a session and store the variables in a session. Good if the data only needs to be around while the user is connected to the site. but will be lost if user close window or after a time.

3.) place a cookie. not a good idea but ok for simple data.

4.) create a mysql database and drop the variable info in there. great for permanent data. this is how i always complex user data.

just a few ideas for you to look into as it is difficult to see what you really mean. good luck.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T15:36:47.120

You could use JavaScript and HTML5 local storage.

# ruby-on-rails - 如何验证相关文件的数量？

> ID：15719895
> 
> 赞同：0
> 
> 时间：2013-03-30T14:58:24.323
> 
> 标签：ruby-on-rails, ruby, mongoid

我有两个模型 Item 和 Tag

```
class Item
  include Mongoid::Document

  field :title, type: String
  has_many :tags

  validates_length_of :tags, minimum: 1
end

class Tag
  include Mongoid::Document

  field :title, type: String
  belongs_to :item
end 
```

商品必须至少有 1 个标签。创建项目时，验证效果很好：

```
item = Item.create(title: "black hole")
item.tags << Tag.create(title: "black")
item.tags << Tag.create(title: "heavy")

puts item.valid? # => true
item.save 
```

但是修改现有项目时验证失败：

```
item = Item.find(item.id)

item.title = "nothing"
puts item.tags.count # => 2, it's ok
puts item.valid? # => false, it's wrong 
```

如何正确验证相关文件的数量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:07:27.730

您是否尝试添加`attr_accessible`到标题？

它看起来像这样：

```
class Item
  include Mongoid::Document

  attr_accessible :title # <-- here
  field :title, type: String
  has_many :tags

  validates_length_of :tags, minimum: 1
end 
```

# maven - Could not find backup for factory javax.faces.application.ApplicationFactory

> ID：15719899
> 
> 赞同：0
> 
> 时间：2013-03-30T14:59:05.850
> 
> 标签：maven, jsf-2, jboss7.x, java-ee-6

I'm currently working on the following stack: jboss7.1.3, javaee-api and jsf 2.1.19\. And can't get around this error:

```
Unexpected exception when attempting to tear down the Mojarra runtime: java.lang.IllegalStateException: Could not find backup for factory javax.faces.application.ApplicationFactory. 
```

It's weird because when I don't thin the war the problem would not show. Thinning the war means adding the following configuration to maven war plugin:

```
<configuration>
    <failOnMissingWebXml>false</failOnMissingWebXml>
    <packagingExcludes>WEB-INF/lib/*.jar</packagingExcludes>
    <archive>
        <manifest>
            <addClasspath>true</addClasspath>
            <classpathPrefix>lib</classpathPrefix>
        </manifest>
    </archive>
</configuration> 
```

I want all my jars to be in the app/lib folder so that there will be no LinkageError. It's because my web project is also dependent on the EJB project. But the problem is I have a base class with a method signature that is being use by the 2 modules and is throwing this error:

```
java.lang.LinkageError: loader constraint violation: when resolving method "com.czetsuya.myApp.bean.MyManagedBean.getEntity()Lcom/czetsuya/myApp/model/MyEntity;" the class loader (instance of org/jboss/modules/ModuleClassLoader) of the current class, com/czetsuya/myApp/util/view/composite/BackingBeanBasedCompositeComponent, and the class loader (instance of org/jboss/modules/ModuleClassLoader) for resolved class, com/czetsuya/myApp/bean/MyManagedBean, have different Class objects for the type pship/model/MyEntity; used in the signature 
```

My idea is to have 1 class loader for the 2 modules, in the lib folder. So both modules will use the parent-first loading.

Or my approach is totally wrong? Any suggestion?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T02:17:06.257

Basically what I did was removed the jsf dependency and stick with javaee-api. This solution worked for me. Having jsf*.jar and javaee6-api jar in dependency produce several errors that are hard to debug.

# asp.net - 通过串口的 ASP.net Web 表单

> ID：15719901
> 
> 赞同：0
> 
> 时间：2013-03-30T14:59:15.980
> 
> 标签：asp.net, vb.net, microcontroller

我对我的编码进行了一些更改并对其进行了测试。它仍然无法正常工作，因此我希望在这里得到一些指导。

```
Imports System
Imports System.Data
Imports System.Configuration
Imports System.Collections
Imports System.Web
Imports System.Web.Security
Imports System.Web.UI
Imports System.Web.UI.WebControls
Imports System.Web.UI.WebControls.WebParts
Imports System.Web.UI.HtmlControls
Imports System.IO.Ports

Partial Class Main
    Inherits System.Web.UI.Page

Protected Sub form1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles form1.Load

    Dim Serialport7 As New IO.Ports.SerialPort

    With Serialport7
        .PortName = "COM7"
        .BaudRate = 9600
        .Parity = Parity.None
        .DataBits = 8
        .StopBits = StopBits.One
    End With

    Try
        Serialport7.Open()
    Catch ex As Exception
        MsgBox(ex.ToString)
    End Try

    Dim ReceivedData As String

    ReceivedData = Serialport7.ReadLine()

    If ReceivedData.Substring(0, 1) = "T" Then

        TextBox1.Text = ReceivedData.Remove(0, 1)

    ElseIf ReceivedData.Substring(0, 1) = "H" Then

        TextBox2.Text = ReceivedData.Remove(0, 1)

    End If

    TextBox3.Text = System.DateTime.Now

    Serialport7.Close()

End Sub

End Class 
```

我遇到的错误：

*   TextBox2 不显示读数，只有 TextBox1 显示读数。

*   Web 表单没有刷新，因此我的读数没有更新。有什么办法可以自动更新 Web 表单？

感谢所有指导。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T16:16:50.823

您有一个简单的解决方案来刷新您的页面，因为您的服务器无法控制客户端 Web 浏览器，所以只要有新数据可用，它就不会刷新（不应该，这不是不可能，但它很复杂而且不是很安全）。

所以你可以做的是添加一段 javascript 代码来定期刷新你的页面。

最好的方法是添加一个 javascript 函数，该函数对 web 服务进行 ajax 调用，该服务将读取串行端口数据，然后将数据发送回客户端页面。在那里你可以更新你的文本框值。

要更新您的页面，您可以使用此 javascript 代码：`window.location.reload()` 如果您需要定期更新它，您可以查看[这个 SO question](https://stackoverflow.com/questions/2295049/call-js-function-using-jquery-timer)

要在 web 表单中添加 web 服务并定期调用它，请查看以下链接： [http ://www.asp.net/web-forms/tutorials/aspnet-ajax/understanding-asp-net-ajax-web-services](http://www.asp.net/web-forms/tutorials/aspnet-ajax/understanding-asp-net-ajax-web-services)

[http://api.jquery.com/](http://api.jquery.com/)

如果您不想定期刷新页面，而只想在新数据可用时刷新您的值，请查看[websockets](http://net.tutsplus.com/tutorials/javascript-ajax/start-using-html5-websockets-today/)（当我开始回答时忘记了它们）。

**编辑关于 websockets** [另外，你应该考虑到你的方法可以被许多不同的用户调用，也可以在不同的线程中。所以你需要让你的串口读取线程安全，并将结果存储在某个地方以避免向不同的用户发送不同的数据。] **-**

图片你有一个用户 A 更新你的页面，然后用户 B 更新它。当用户A调用页面时，你已经从串口读取了一些数据，所以用户A和用户B会显示不同的数据。

如果数据是`1, 2, 3, 4`

在您当前的实现中，用户 A 将看到`1`，用户 B 将看到`2`

# html - HTML & CSS: Vertical centering of inline elements inside an inline-block

> ID：15719905
> 
> 赞同：1
> 
> 时间：2013-03-30T14:59:42.887
> 
> 标签：html, css

I've read about 20 questions and articles on vertical alignment/centering in HTML/CSS, but I'm still unable to get my specific case working a expected.

Please have a look at [http://jsfiddle.net/pf29r/3/](http://jsfiddle.net/pf29r/3/)

```
<div class="outer">
  <div>Left1</div>
  <div>Left2</div>
</div>
<div class="inner">
  <a href="#">Before</a>
  <span>Middle</span>
  <a href="#">After</a>
</div>
<div class="outer">
  <div>Right1</div>
  <div>Right2</div>
</div>

.outer {
  display: inline-block;
}

.inner {
  display: inline-block;
} 
```

I want to vertically center the content of the inner block. The best I've been able to accomplish was by using display: table and display: table-cell, which almost works, but the content isn't quite in the middle.

What am I missing?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T15:15:06.010

Add `vertical-align: middle` to `.outer`. This is counter-intuitive because you would expect to have to add it to `.inner`, but it works.

[http://jsfiddle.net/pf29r/5/](http://jsfiddle.net/pf29r/5/)

# ios - 在另一个类中将对象添加到 NSMutableArray

> ID：15719906
> 
> 赞同：0
> 
> 时间：2013-03-30T14:59:46.077
> 
> 标签：ios, properties, nsmutablearray

嗨，我有一个分组的表格视图，第一部分包含电子邮件列表，第二部分只有两行，手动添加电子邮件并从联系人中选择电子邮件。

ManualEmail.m 中的日志一直为计数记录 0，并且 EmailViewController 中的数组从未修改过，但我不知道出了什么问题

这是我目前的设置

**电子邮件视图控制器.h**

```
@property (nonatomic, retain) IBOutlet NSMutableArray *dataArray; 
```

**电子邮件视图控制器.m**

```
@synthesize dataArray;

- (void)viewDidLoad {
    [super viewDidLoad];
    dataArray = [[NSMutableArray alloc] init];
    NSMutableArray *listItems = [[NSMutableArray alloc] initWithObjects:nil];
    [listItems addObject:[ObjectArrays productWithType:@"test" Eemail:@"test@website.com" Eselected:YES]];
    NSDictionary *firstItemsArrayDict = [NSDictionary dictionaryWithObject:listItems forKey:@"data"];
    [dataArray addObject:firstItemsArrayDict];
    NSArray *secondItemsArray = [[NSArray alloc] initWithObjects:@"Add Email Address From Contacts", @"Add Email Address Manually", nil];
    NSDictionary *secondItemsArrayDict = [NSDictionary dictionaryWithObject:secondItemsArray forKey:@"data"];
    [dataArray addObject:secondItemsArrayDict];
    [tableView reloadData];
} 
```

**手动电子邮件.m**

```
 EmailViewController *emailPVC = [[EmailViewController alloc] init];
    NSDictionary *dictionary = [emailPVC.dataArray objectAtIndex:0];
    NSArray *array = [dictionary objectForKey:@"data"];
    NSMutableArray *emailArray = [NSMutableArray arrayWithArray:array];
    [emailArray addObject:[ObjectArrays productWithType:name.text Eemail:email.text Eselected:YES]];
    [emailPVC.dataArray removeObjectAtIndex:0];
    NSDictionary *firstItemsArrayDict = [NSDictionary dictionaryWithObject:emailArray forKey:@"data"];
    [emailPVC.dataArray insertObject:firstItemsArrayDict atIndex:0];
    NSLog(@"%d", [emailPVC.dataArray count]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:55:12.347

在 ManualEmail.m 中，您正在创建`EmailViewController`in 代码。但是你从来没有调用任何会调用它的`-viewDidLoad`方法的东西，所以`dataArray`不会被创建或填充。你需要打电话`emailPVC.view = <some view you created>;`才能`-viewDidLoad`被叫到。

# javascript - screen.width/height give wrong info about screen resolution

> ID：15719908
> 
> 赞同：0
> 
> 时间：2013-03-30T14:59:56.403
> 
> 标签：javascript, screen

My screen have resolution 1200 x 800 but this script give me 1429 x 893

```
<script>
if (screen) { 
var str = "Screen width:" + screen.width + "\n" + 
          "Screen height:" +  screen.height;
alert(str);
}
</script> 
```

Why it doesn't work?

p.s. On other site this code `screen.width + screen.height` but when run it on localhost it give wrong info.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:37:27.810

From [MDN](https://developer.mozilla.org/en-US/docs/DOM/window.screen.width) :

> Internet Explorer will take into account the zoom setting when reporting the screen width. It will only return the real width of the screen if the zoom is set to 100%.

So for some reason screen returns the wrong resolution when the browser is zoomed. Hitting `ctrl-zero` (zero on numpad) fixes that by zooming to 100%.

# com - 向进程外 COM 服务器添加新接口和组件后注册表项的更改

> ID：15719910
> 
> 赞同：0
> 
> 时间：2013-03-30T15:00:09.253
> 
> 标签：com, atl, out-of-process

我正在浏览一个代码，它有一个具有 COM 服务器的 exe（在 ATL 中实现的 COM 类）。它有一个定义了所有接口的 .idl 文件。现在注册 COM 服务器后，我浏览了注册表项，我可以找到以下内容。每个接口都有一个带有其 IID 并具有 ProxyStubClsid32 的条目。有一个由我提到的 COM 服务器实现的接口，它在键字段中具有 IID = ProxyStubClsid32 的值，并且每个其他接口接口条目在其 ProxyStubClsid32 字段中具有相同的 IID 条目。为什么会这样？？

接下来，当我尝试向 exe 添加一个新接口和实现该接口的新 COM 组件并进行注册时，我可以在注册表中观察到现在这个新接口的 IID 条目及其 ProxyStubClsid32 是相同的。并且新添加的 IID 现在存在于所有其他接口的 ProxyStubClsid32 中。

什么进入 ProxyStubClsid32，这是如何决定的？

即使在添加我的新接口之后，我也希望以前的 IID 出现在 ProxyStubClsid32 中。我怎样才能做到这一点 ？？

explorer.exe 也会缓存此注册表项，因为我正在实现加载组件的 shell 扩展，我认为它指的是旧条目，因此在该 exe 上查询新接口不起作用。一旦我重新启动 explorer.exe 一切正常。

任何人都可以对此发表评论。

对此的回答似乎对我的问题有一些提示：[Registry keys for out-of-process COM server](https://stackoverflow.com/questions/12979501/registry-keys-for-out-of-process-com-server)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-16T06:39:24.237

ProxyStubClsid32 中的内容实际上是 MIDL 用于编组的接口。使用它是因为您的接口继承自 IDispatch 并且是必需的，因此编译器负责编组（作为 OOP 服务器，您需要编组）。

对于我们的团队，我们在某些机器上注册服务器时遇到了一些问题（/RegServer 还不够），但是使用带有此代码的小 exe 解决了所有注册问题（因此您可能遇到的 E_NOINTERFACE 问题），只需调用它每次构建或安装后：

```
// Register the server
            String^ l_TLB = l_Path + "\\MyServer.tlb";
            IntPtr  l_TLBP = System::Runtime::InteropServices::Marshal::StringToBSTR(l_TLB);
            ITypeLib *pTypeLib;
            HRESULT hr;
            hr = LoadTypeLibEx(static_cast<LPCOLESTR>(l_TLBP.ToPointer()), REGKIND_REGISTER, &pTypeLib);
            if(SUCCEEDED(hr))
                pTypeLib->Release(); 
```

# ruby-on-rails - Force $ rake db:reset Despite Other Users with Postgres

> ID：15719912
> 
> 赞同：3
> 
> 时间：2013-03-30T15:00:10.087
> 
> 标签：ruby-on-rails, database, postgresql, reset

Is there a way to force a database reset even if Postgres has other users using it. I almost always get this error when I try a `$ rake db:reset`:

```
 Couldn't drop example_database_name :
 #<ActiveRecord::StatementInvalid: PG::Error: ERROR:  database "example_database_name" is being accessed by other users DETAIL: 
 There are 2 other session(s) using the database. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T12:31:41.567

Put this in a file `lib/database.rake` if you find yourself using `db:reset` a lot in development.

```
require 'active_record/connection_adapters/postgresql_adapter'
module ActiveRecord
  module ConnectionAdapters
    class PostgreSQLAdapter < AbstractAdapter
      def drop_database(name)
        raise "Nah, I won't drop the production database" if Rails.env.production?
        execute <<-SQL
          UPDATE pg_catalog.pg_database
          SET datallowconn=false WHERE datname='#{name}'
        SQL

        execute <<-SQL
          SELECT pg_terminate_backend(pg_stat_activity.pid)
          FROM pg_stat_activity
          WHERE pg_stat_activity.datname = '#{name}';
        SQL
        execute "DROP DATABASE IF EXISTS #{quote_table_name(name)}"
      end
    end
  end
end 
```

Obviously only designed for use on non-production databases. It will cause all existing db connections to be severed, so the next page load might be an error if unicorn/passenger/pow is pooling db connections. If this happens, a simple page refresh will cause the server to open a new connection and all will be well.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T18:22:52.520

if the connected sessions are from your rails process - you definitely want to stop rails, strange things could occur if you drop and rebuild the db from underneath the running process

anyhow the following can be run from the command line to drop postgres connections

```
psql -c "SELECT pid, pg_terminate_backend(pid) as terminated FROM pg_stat_activity WHERE pid <> pg_backend_pid();" -d 'example_database_name' 
```

# java - 无法在 Android 中获取和显示 JSON

> ID：15719914
> 
> 赞同：0
> 
> 时间：2013-03-30T15:00:12.530
> 
> 标签：java, android, json, web, http-get

我正在构建一个复杂的应用程序，但是我遇到了一个孤立的问题。我的 Android 应用程序类 UserPage.java 应该能够从网页中获取字符串，然后将其传递给布局并相应地显示它。

**用户页面.java**

```
package com.example.ams;

import java.io.IOException;
import java.net.URI;
import java.net.URISyntaxException;
import java.util.List;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import android.app.Activity;
import android.app.ProgressDialog;
import android.os.Bundle;

public class UserPage extends Activity {
        HttpPost httppost;
        StringBuffer buffer;
        HttpResponse response;
        HttpClient httpclient;
        List<NameValuePair> nameValuePairs;
        ProgressDialog dialog = null;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.userpage);
            String json = getStudents();
            //System.out.println(json);
            TextView datazer = (TextView) findViewById(R.id.data);
            datazer.setText(json);

        }

public String getStudents(){
    HttpResponse response = null;
    //String classID = "CSD2334";
    try {        
            HttpClient client = new DefaultHttpClient();
            HttpGet request = new HttpGet();
            request.setURI(new URI("http://localhost:8080/de.vogella.jersey.first/resources/hello/ids/CSD2334"));
            response = client.execute(request);
            System.out.println(response.toString());
        } catch (URISyntaxException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }   
        return response.toString();
    }

} 
```

**布局 - userpage.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content">
    <TextView  
        android:id="@+id/data"
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"     
    />
</LinearLayout> 
```

**从网络获取的内容**

```
[{"student_id":3,"student_name":"Dite Gashi","w1mo":"1","w1tue":"0","w1wed":0,"w1thu":0,"w1fri":1},{"student_id":4,"student_name":"Vullnet Dyla","w1mo":"2","w1tue":"2","w1wed":1,"w1thu":0,"w1fri":0},{"student_id":5,"student_name":"Edon Ymeri","w1mo":"0","w1tue":"0","w1wed":0,"w1thu":0,"w1fri":2},{"student_id":6,"student_name":"Ilir Kelmendi","w1mo":"2","w1tue":"0","w1wed":2,"w1thu":0,"w1fri":0}] 
```

我得到的错误很笼统，我似乎无法在任何地方找到信息

```
 03-30 17:36:15.074: E/AndroidRuntime(1458): FATAL EXCEPTION: main
03-30 17:36:15.074: E/AndroidRuntime(1458): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.ams/com.example.ams.UserPage}: android.os.NetworkOnMainThreadException
03-30 17:36:15.074: E/AndroidRuntime(1458):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
03-30 17:36:15.074: E/AndroidRuntime(1458):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
03-30 17:36:15.074: E/AndroidRuntime(1458):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
03-30 17:36:15.074: E/AndroidRuntime(1458):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
03-30 17:36:15.074: E/AndroidRuntime(1458):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-30 17:36:15.074: E/AndroidRuntime(1458):     at android.os.Looper.loop(Looper.java:137)
03-30 17:36:15.074: E/AndroidRuntime(1458):     at android.app.ActivityThread.main(ActivityThread.java:4424)
03-30 17:36:15.074: E/AndroidRuntime(1458):     at java.lang.reflect.Method.invokeNative(Native Method)
03-30 17:36:15.074: E/AndroidRuntime(1458):     at java.lang.reflect.Method.invoke(Method.java:511)
03-30 17:36:15.074: E/AndroidRuntime(1458):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-30 17:36:15.074: E/AndroidRuntime(1458):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-30 17:36:15.074: E/AndroidRuntime(1458):     at dalvik.system.NativeStart.main(Native Method)
03-30 17:36:15.074: E/AndroidRuntime(1458): Caused by: android.os.NetworkOnMainThreadException
03-30 17:36:15.074: E/AndroidRuntime(1458):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
03-30 17:36:15.074: E/AndroidRuntime(1458):     at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
03-30 17:36:15.074: E/AndroidRuntime(1458):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
03-30 17:36:15.074: E/AndroidRuntime(1458):     at java.net.InetAddress.getAllByName(InetAddress.java:220)
03-30 17:36:15.074: E/AndroidRuntime(1458):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
03-30 17:36:15.074: E/AndroidRuntime(1458):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
03-30 17:36:15.074: E/AndroidRuntime(1458):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
03-30 17:36:15.074: E/AndroidRuntime(1458):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
03-30 17:36:15.074: E/AndroidRuntime(1458):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
03-30 17:36:15.074: E/AndroidRuntime(1458):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
03-30 17:36:15.074: E/AndroidRuntime(1458):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
03-30 17:36:15.074: E/AndroidRuntime(1458):     at com.example.ams.UserPage.getStudents(UserPage.java:44)
03-30 17:36:15.074: E/AndroidRuntime(1458):     at com.example.ams.UserPage.onCreate(UserPage.java:31)
03-30 17:36:15.074: E/AndroidRuntime(1458):     at android.app.Activity.performCreate(Activity.java:4465)
03-30 17:36:15.074: E/AndroidRuntime(1458):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
03-30 17:36:15.074: E/AndroidRuntime(1458):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
03-30 17:36:15.074: E/AndroidRuntime(1458):     ... 11 more
03-30 17:36:15.363: I/dalvikvm(1458): threadid=3: reacting to signal 3
03-30 17:36:15.434: I/dalvikvm(1458): Wrote stack traces to '/data/anr/traces.txt'
03-30 17:36:15.814: I/dalvikvm(1458): threadid=3: reacting to signal 3
03-30 17:36:15.834: I/dalvikvm(1458): Wrote stack traces to '/data/anr/traces.txt' 
```

任何帮助或指示将不胜感激，D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:46:52.043

您正在主线程上运行 http 调用，这会导致错误。

```
response = client.execute(request); 
```

上面的代码应该在一个新的线程上运行。

你应该有类似的东西：

```
new Thread( new Runnable() {
        @Override
        public void run() {
            HttpResponse response = null;
            //String classID = "CSD2334";
            try {
                HttpClient client = new DefaultHttpClient();
                HttpGet request = new HttpGet();
                request.setURI(new URI("http://localhost:8080/de.vogella.jersey.first/resources/hello/ids/CSD2334"));
                response = client.execute(request);
                System.out.println(response.toString());
            } catch (URISyntaxException e) {
                e.printStackTrace();
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return response.toString();
        }
    }).start(); 
```

如果您想更新 UI 组件，您应该将代码运行到：

```
 runOnUiThread(new Runnable() {
            @Override
            public void run() {
// runs on the UI thread so update UI here
            }
        }); 
```

你应该阅读更多关于[android 上的线程](http://developer.android.com/guide/components/processes-and-threads.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T18:26:50.687

Your current code runs, as mentioned, on the [uiThread](https://stackoverflow.com/questions/3652560/what-is-the-android-uithread-ui-thread). Consider using either an [asynctask](http://developer.android.com/reference/android/os/AsyncTask.html) or a class which extends [Thread](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html). There is a lot of questions regarding this, by doing a quick [Google](http://www.google.com) search, so I feel that an example would be too much.

# android - 为什么在 Google Play 上安装的图表看起来像正弦曲线？

> ID：15719924
> 
> 赞同：0
> 
> 时间：2013-03-30T15:01:11.547
> 
> 标签：android, google-play

Google Play 上的许多流行游戏都有“INSTALLS”图形，形状像正弦曲线：

![enter image description here](../Images/8d507ec46fd0f8880fd4efc0862f6e55.png)

这个例子取自[这里](https://play.google.com/store/apps/details?id=com.halfbrick.fruitninjafree&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5oYWxmYnJpY2suZnJ1aXRuaW5qYWZyZWUiXQ..)。另一个例子：[这里](https://play.google.com/store/apps/details?id=com.halfbrick.jetpackjoyride&feature=more_from_developer#?t=W251bGwsMSwxLDEwMiwiY29tLmhhbGZicmljay5qZXRwYWNram95cmlkZSJd)和[那里](https://play.google.com/store/apps/details?id=com.rovio.angrybirds&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5yb3Zpby5hbmdyeWJpcmRzIl0.)。您可以轻松找到更多。

问题是：为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:09:05.160

It appears to be a weekly cycle. Some apps would be downloaded more often on weekdays, while others would be sought out more on weekends.

Some apps, as has already been noted, are more indifferent to weekends, and so do not exhibit a sinusoidal wave pattern of installs. These are probably the ones in demand by those who take their work home, or who play games at work, or who sleep, shower and eat 24/7 in campus-like Internet startups. Or else they are apps that are just work/play agnostic.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T15:20:42.330

不是所有的人，看看[Fing](https://play.google.com/store/apps/details?id=com.overlook.android.fing&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5vdmVybG9vay5hbmRyb2lkLmZpbmciXQ..)和[Network Mapper](https://play.google.com/store/apps/details?id=org.prowl.networkmapper&feature=related_apps#?t=W251bGwsMSwxLDEwOSwib3JnLnByb3dsLm5ldHdvcmttYXBwZXIiXQ..)来举几个例子。

**更新：**抱歉，我看到您注意到*最*流行应用程序的趋势。

IDK 为什么会这样。我无法与时区相关（即，假设市场的主要份额来自美国并推断晚上购买该应用程序的人较少），因为该图是过去 30 天的。

Maybe something to do with how often Google indexes and updates this info?

# java - Java中的矩形不移动X坐标

> ID：15719927
> 
> 赞同：1
> 
> 时间：2013-03-30T15:01:28.600
> 
> 标签：java, swing, animation, awt, keylistener

我正在尝试根据用户的按键输入向上、向下、向左和向右移动一个矩形。我的 KeyHandler 工作正常，它会向上或向下移动形状，但不会根据 X 轴（左或右）。

这是我的 KeyHandler (KeyPressed) 的代码。

```
public void keyPressed(KeyEvent e) {
    int keyCode = e.getKeyCode();

    if(keyCode == KeyEvent.VK_UP){
        System.out.println("You have pressed: " +keyCode);
        _screen.player[0].y -= 3;
        _screen.repaint();

    }else if(keyCode == KeyEvent.VK_DOWN){
        System.out.println("You have pressed: " +keyCode);
        _screen.player[0].y += 3;
        _screen.repaint();

    }else if(keyCode == KeyEvent.VK_LEFT){
        System.out.println("You have pressed: " +keyCode);
        _screen.player[0].x -= 3;
        _screen.repaint();

    }else if(keyCode == KeyEvent.VK_RIGHT){
        System.out.println("You have pressed: " +keyCode);
        _screen.player[0].x += 3;
        _screen.repaint();

    }else if(keyCode == KeyEvent.VK_ESCAPE){
        System.exit(0);

    }

} 
```

在 X 轴上移动一个矩形是否需要做一些不同的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T16:21:01.800

发布的代码中没有明显的错误。问题可能出在未显示的代码部分。发布一个可运行的示例（即[SSCCE](http://sscce.org/)）总是一个好主意。

使用关键侦听器时，请确保组件可聚焦且具有焦点。但是，不建议使用键侦听器，因为它是较低级别的接口。最好改用键绑定。有关详细信息和示例，请参阅[如何使用键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)。还看Swing[动作](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)。

这是一个简单的示例，演示了在面板周围移动矩形的键绑定和操作：

```
public class MoveRectangle extends JPanel {

    private Point rectPosition = new Point();
    public static final int RECT_SIZE = 50;

    public Point getRectPosition() {
        return rectPosition; 
    }

    public void setRectPosition(Point position) {
        this.rectPosition = position;
        repaint();
    }

    public MoveRectangle() {
        InputMap inputMap = getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW);
        ActionMap actionMap = getActionMap();

        inputMap.put(KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0, false), "up");
        actionMap.put("up", new MoveAction(this, MoveAction.Direction.UP));
        inputMap.put(KeyStroke.getKeyStroke(KeyEvent.VK_DOWN, 0, false), "down");
        actionMap.put("down", new MoveAction(this, MoveAction.Direction.DOWN));
        inputMap.put(KeyStroke.getKeyStroke(KeyEvent.VK_LEFT, 0, false), "left");
        actionMap.put("left", new MoveAction(this, MoveAction.Direction.LEFT));
        inputMap.put(KeyStroke.getKeyStroke(KeyEvent.VK_RIGHT, 0, false), "right");
        actionMap.put("right", new MoveAction(this, MoveAction.Direction.RIGHT));
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.drawRect(rectPosition.x, rectPosition.y, RECT_SIZE, RECT_SIZE);
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(200, 200); 
    }

    static class MoveAction extends AbstractAction {
        public enum Direction{
            LEFT, RIGHT, UP, DOWN
        };

        private Direction direction;
        private MoveRectangle panel;

        public MoveAction(MoveRectangle panel, Direction direction) {
            this.direction = direction;
            this.panel = panel;
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            Point position = panel.getRectPosition();
            switch(direction) {
            case LEFT:
                position.x -= 3;
                break;
            case RIGHT:
                position.x += 3;
                break;
            case UP:
                position.y -= 3;
                break;
            case DOWN:
                position.y += 3;
                break;
            }

            panel.setRectPosition(position);
        }
    }

    private static void createAndShowUI() {
        JFrame frame = new JFrame("Move Rectangle");
        frame.getContentPane().add(new MoveRectangle());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                createAndShowUI();
            }
        });
    }
} 
```

# python - 在python中取日期时间的标准差

> ID：15719928
> 
> 赞同：3
> 
> 时间：2013-03-30T15:01:32.157
> 
> 标签：python, datetime, average, standard-deviation

我正在我的 python 程序中导入 datetime 库，并且正在记录多个事件的持续时间。下面是我的代码：

```
d1 = datetime.datetime.strptime(starttime, '%Y-%m-%d:%H:%M:%S')
d2 = datetime.datetime.strptime(endtime, '%Y-%m-%d:%H:%M:%S')
duration = d2 - d1
print str(duration) 
```

现在我在变量“持续时间”中有一个值。其输出将是：

```
0:00:15
0:00:15
0:00:15
0:00:15
0:00:15
0:00:05
0:00:05
0:00:05
0:00:05
0:00:05
0:00:10
0:00:10
0:00:10
0:00:10
0:45:22 
```

我想取所有持续时间的标准偏差并确定是否存在异常。例如，00:45:22 是一个异常，我想检测它。如果我知道日期时间的格式，我可以这样做，但它似乎不是数字或任何东西..我正在考虑将值从 : 拆分出来并使用两者之间的所有值，但可能会有更好的方法。

想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T15:04:07.490

你有[`datetime.timedelta()`对象](http://docs.python.org/2/library/datetime.html#timedelta-objects)。这些具有`.microseconds`和属性，所有 3 个整数`.seconds`。字符串表示根据需要表示那些`.days`以适合所有存在的值。`str()``[D day[s], ][H]H:MM:SS[.UUUUUU]`

您*可以*对这些对象使用简单的算术运算。求和和除法按预期工作，例如：

```
>>> (timedelta(seconds=100) + timedelta(seconds=200)) / 2
datetime.timedelta(0, 150) 
```

不幸的是，您不能将两个时间增量相乘，因此计算标准偏差变得很棘手（没有偏移量的平方）。

相反，我会使用该`.total_seconds()`方法为您提供根据天、秒和微秒值计算的浮点值，然后使用这些值来计算标准偏差。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T15:14:35.750

您获得的持续时间对象是 timedelta 对象。或者从一个时间戳到另一个的持续时间。要将它们转换为总微秒数，请使用：

```
def timedelta_to_microtime(td):
    return abs(td.microseconds + (td.seconds + td.days * 86400) * 1000000) 
```

然后计算标准差：

```
def calc_std(L):
    n = len(L)
    mean = sum(L) / float(n)
    dev = [x - mean for x in L]
    dev2 = [x*x for x in dev]
    return math.sqrt(sum(dev2) / n) 
```

所以：

```
timedeltas = [your timedeltas here..]
microtimes = [timedelta_to_microtime(td) for td in timedeltas]
std = calc_std(microtimes)
print [(td, mstime) 
       for (td, mstime) in zip(timedeltas, microtimes)
       if mstime - std > X] 
```

# objective-c - 并发drawRect：

> ID：15719929
> 
> 赞同：1
> 
> 时间：2013-03-30T15:01:33.423
> 
> 标签：objective-c, cocoa, grand-central-dispatch, nsview

我有大量对象（通常为 500 - 2000）呈现到屏幕上。不幸的是，目前渲染并不完全灵活。

每个对象都需要执行一些占用大部分时间的计算，最后将自己绘制到屏幕上，即目前我的`drawRect:`方法看起来基本上是这样的
：（*为了可读性*）

```
- (void)drawRect:(NSRect)dirtyRect
{
   for (Thing *thing in [self getThings])
   {
        [thing prepareForDrawing];
        [thing draw];
   }
} 
```

并发处理的明显候选者，对吧？

我想不出一个很好的方法来将准备工作与实际绘图操作分离，即并行执行预处理并以某种方式将绘图命令排队，直到所有处理完成，然后一次性渲染所有内容。

但是，考虑到[GCD](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)的优点，我想出了以下方案。
对我来说这听起来不错，但对 GCD 来说是新手，在公开发布四周后遇到奇怪的多线程问题之前，或者通常只是使用糟糕的 GCD 设计模式，我想我会征求反馈意见。

**任何人都可以看到这种方法的问题 - 潜在问题或更好的解决方案？**

```
- (void)drawRect:(NSRect)dirtyRect
{
   [[self getThings] enumerateObjectsWithOptions:NSEnumerationConcurrent
                                      usingBlock:^(id obj, NSUInteger idx, BOOL *stop)
   {
      // prepare concurrently
      Thing *thing = (Thing*)obj;
      [thing prepareForDrawing];

      // always draw in main thread
      dispatch_async(dispatch_get_main_queue(), ^{
         [thing draw];
      });
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T15:22:53.057

那是行不通的，因为调用`[thing draw]`将`-drawRect:`在它完成之后发生。图形上下文将不再有效地绘制到该视图中。

为什么“东西”没有提前准备好？`-drawRect:`用于绘图，而不是计算。任何必要的昂贵计算都应该提前完成。

# python - pickle.load() raising EOFError in Windows

> ID：15719930
> 
> 赞同：14
> 
> 时间：2013-03-30T15:01:39.527
> 
> 标签：python, windows, file-io, newline, pickle

This is how the code is

```
with open(pickle_f, 'r') as fhand:
    obj = pickle.load(fhand) 
```

This works fine on Linux systems but not on Windows. Its showing EOFError. I have to use `rb` mode to make it work on Windows.. now this isn't working on Linux.

Why this is happening, and how to fix it?

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-30T15:04:36.767

Always use `b` mode when reading and writing pickles (`open(f, 'wb')` for writing, `open(f, 'rb')` for reading). To "fix" the file you already have, convert its newlines using `dos2unix`.

# iphone - UISearchDisplayController 重置 contentInset

> ID：15719935
> 
> 赞同：3
> 
> 时间：2013-03-30T15:01:57.303
> 
> 标签：iphone, ios, objective-c, uikit, uisearchdisplaycontroller

我尝试将自定义 contentInset 设置为 UISearchdisplayControllers searchResultsTableView。

初始化之后

```
_searchController = [[UISearchDisplayController alloc] initWithSearchBar:_searchBar contentsController:self];
_searchController.delegate = self;
_searchController.searchResultsDelegate = self;
_searchController.searchResultsDataSource = self;
_searchController.searchResultsTableView.delegate = self; 
```

我设置了 contentInset

```
_searchController.searchResultsTableView.contentInset = UIEdgeInsetsMake(0.0f, 0.0f, 2.0f, 0.0f); 
```

记录此插图正确显示底部的偏移量 2。在搜索栏激活后，控制器将值拳头重置为大约 -210px，在表格视图中滚动一点后，它将值设置回 0px。

任何想法为什么会这样？控制器和 TableView 工作正常，但我无法设置自定义 contentInset。

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-02-15T08:03:42.477

在 _searchController.delegate 中，添加以下代码

```
 - (void)searchDisplayController:(UISearchDisplayController *)controller didShowSearchResultsTableView:(UITableView *)tableView {
        controller.searchResultsTableView.contentInset = UIEdgeInsetsMake(0.0f, 0.0f, 2.0f, 0.0f);
    } 
```

# android - catchbackkey 不工作 (libgdx) Android

> ID：15719936
> 
> 赞同：3
> 
> 时间：2013-03-30T15:02:01.143
> 
> 标签：android, libgdx

我正在尝试使用 android 设备上的后退键为我的游戏设置屏幕..但它似乎不起作用..我在网上读了几篇文章，这样做了...

在菜单屏幕中，如果按下后退键，应用程序应该退出..但是没有触发任何动作......即使我多次按下后退键也不会触发任何动作......

```
public class MenuScreen extends AbstractScreen implements InputProcessor  {

@Override
   public void show()
   {
      Gdx.input.setInputProcessor(this);
      Gdx.input.setCatchBackKey(true);
      Gdx.input.setCatchMenuKey(true);

}

   @Override
   public boolean keyDown(int keycode) {
      // TODO Auto-generated method stub
        if(keycode == Keys.BACK)
        { 
             Gdx.app.exit();
          }

      return false;
   } 
```

在 LevelScreen 中按下后退键时，屏幕应设置为 menuscreen，但我的应用程序将退出 有没有办法禁用后退键？？按下后不会发生任何事情吗？

```
 public class LevelScreen extends AbstractScreen  implements InputProcessor {

@Override
   public void show()
   {
      Gdx.input.setInputProcessor(this);
      Gdx.input.setCatchBackKey(true);
      Gdx.input.setCatchMenuKey(true);

}

@Override
   public boolean keyDown(int keycode) {
      if(keycode == Keys.BACK)
      {
                game.setScreen(game.geMenuScreen());
           }
      // TODO Auto-generated method stub
      return false;
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T17:43:17.283

首先，您可能希望在输入处理器中将其从使用 keyDown() 更改为 keyUp()。keyUp() 只会在用户释放键时调用一次，但 keyDown() 将在后退键按下的每一帧被调用（大约每秒 60 次）。因此，您的应用可以切换屏幕并在 2 帧内关闭您，这可能不是您想要的。

这可能就是您从关卡屏幕看到应用关闭的原因。它将进入 LevelScreen -> ScoreScreen -> MenuScreen，然后在 3 帧（大约 50 毫秒）内退出。以下是在 ScoreScreen 中启动的应用程序的一些示例代码。当用户按下（并释放）后退按钮时，将进入菜单屏幕。接下来，当他们再次按下（并释放）后退按钮时，它会关闭应用程序。

您需要根据您的游戏调整此代码，但这应该会给您一些可以查看和使用的内容。（注意：我已经在 Android 2.3.3 和 LibGDX 0.9.8 上验证了此功能）

```
public class BackTest extends Game {
    public Screen menu;
    public Screen score;

    @Override public void create() {
        Gdx.input.setCatchBackKey(true);
        this.menu = new MenuScreen(this);
        this.score = new ScoreScreen(this);
        this.setScreen(this.score);
    }

    public static abstract class AbstractScreen implements Screen {
        @Override public void render(final float delta) {}
        @Override public void resize(final int width, final int height) {}
        @Override public void show() {}
        @Override public void hide() {}
        @Override public void pause() {}
        @Override public void resume() {}
        @Override public void dispose() {}
    }

    public static class MenuScreen extends AbstractScreen {
        public final BackTest game;

        public MenuScreen(final BackTest game) {
            this.game = game;
        }

        @Override public void show() {
            Gdx.app.log("Menu", "Show");
            Gdx.input.setInputProcessor(new InputAdapter() {
                @Override public boolean keyUp(final int keycode) {
                    if (keycode == Keys.BACK) {
                        Gdx.app.log("Menu", "Quit");
                        Gdx.app.exit();
                    }
                    return false;
                }
            });
        }
    }

    public static class ScoreScreen extends AbstractScreen {
        public final BackTest game;

        public ScoreScreen(final BackTest game) {
            this.game = game;
        }

        @Override public void show() {
            Gdx.app.log("Score", "Show");
            Gdx.input.setInputProcessor(new InputAdapter() {
                @Override public boolean keyUp(final int keycode) {
                    if (keycode == Keys.BACK) {
                        Gdx.app.log("Score", "Back");
                        ScoreScreen.this.game.setScreen(ScoreScreen.this.game.menu);
                    }
                    return false;
                }
            });
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-17T10:30:27.087

您应该改为 @Override keyUp 按钮。

```
@Override
    public boolean keyUp(int keycode) {
        if ((state == SETTING_STATE || state == TOPSCORES_STATE) && keycode == Keys.BACK) {
            state = RUNNING_STATE;
            is_game_start = true;
        } else {
            Gdx.app.exit();
        }
        return false;
    } 
```

# windows-phone-7 - 将数据绑定到 Panorama.TitleTemplate

> ID：15719938
> 
> 赞同：0
> 
> 时间：2013-03-30T15:02:03.473
> 
> 标签：windows-phone-7, data-binding, dictionary, datatemplate

我一直在尝试通过使用 Panorama.TitleTemplate 属性和用于将数据绑定到它的字典来自定义全景页面的标题区域，但没有任何成功。我的 XAML 代码如下：

```
<Grid x:Name="LayoutRoot">
    <controls:Panorama Name="siteHubPanoramaControl">
        <controls:Panorama.TitleTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal" Height="75" Margin="0,75,0,0" Width="470" DataContext="{Binding}">
                    <Image Source="{Binding imageSource}" />
                    <TextBlock Text="{Binding name}" />
                </StackPanel>
            </DataTemplate>
        </controls:Panorama.TitleTemplate>

        <!--Panorama item one-->
        <controls:PanoramaItem Header="Site Info">
            <Grid/>
        </controls:PanoramaItem>

        <!--Panorama item two-->
        <controls:PanoramaItem Header="Others">
            <Grid/>
        </controls:PanoramaItem>
    </controls:Panorama>
</Grid> 
```

我使用以下代码将字典绑定到数据模板：

```
Dictionary<string, string> dictionary = new Dictionary<string, string>();
dictionary.Add("name", this.name);
dictionary.Add("imageSource", "http://...");

siteHubPanoramaControl.DataContext = dictionary; 
```

我一直在寻找解决方案，但找不到。如果你能帮助我解决这个问题，我会很高兴。

还有学习数据绑定的好资源吗？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:08:35.050

两者都不是财产`name`。`imageSource`它只是您字典中的关键。因此，当您尝试绑定这两者时，它找不到任何具有这些名称的属性。

您必须将这些值公开到属性中。例如，

```
public string Name
{
    get { return dictionary["name"]; }
} 
```

我不确定还有其他方法，但那是我的想法。我认为它应该有效。

编辑：

好的，假设您使用的是 MVVM 模式，下面的代码应该可以工作。

视图模型

```
 public class MainPageViewModel
    {
        private Dictionary<string,string> _dictionary = new Dictionary<string, string>();

        public MainPageViewModel()
        {
            _dictionary.Add("name", "Foo");
            _dictionary.Add("imageSource", "http://");
        }

        public string Name
        {
            get { return _dictionary["name"]; }
        }

        public string ImageSource
        {
            get { return _dictionary["imageSource"]; }
        }
    } 
```

代码隐藏

```
public partial class MainPage : PhoneApplicationPage
{
    private MainPageViewModel _vm;
    // Constructor
    public MainPage()
    {
        InitializeComponent();

        _vm = new MainPageViewModel();
        DataContext = _vm;
    }
} 
```

XAML

```
<Grid x:Name="LayoutRoot">
    <phone:Panorama Name="siteHubPanoramaControl">
        <phone:Panorama.Title>
            <StackPanel Orientation="Horizontal">
                    <Image Source="{Binding ImageSource}"/>
                    <TextBlock Text="{Binding Name}" />
                </StackPanel>
        </phone:Panorama.Title>
        <!--Panorama item one-->
        <phone:PanoramaItem Header="Foo">
            <Grid/>
        </phone:PanoramaItem>

        <!--Panorama item two-->
        <phone:PanoramaItem Header="Others">
            <Grid/>
        </phone:PanoramaItem>
    </phone:Panorama>
</Grid> 
```

对于 XAML，不要使用`Panorama.TitleTemplate`和应用`DataTemplate`，`Panorama.Title`而是使用更容易的方法。我试过了`TitleTemplate`，我只能让它绑定标题而不是图像。所以最简单的解决方法是使用`Panorama.Title`.

# c++ - Multiple inheritance with QObject

> ID：15719940
> 
> 赞同：1
> 
> 时间：2013-03-30T15:02:07.460
> 
> 标签：c++, qt, polymorphism, multiple-inheritance, qobject

I want to inherit QObject and another class and got an error: undefined reference for `vtable for EduGraph' I've read some threads about it and have fixed the sequence of the inherited classes in the class definition, but it haven't solved the problem.

```
class EduGraph : public QObject, public Graph<Vertex<ENode, EEdge>*> {
private:
    std::list<Vertex<ENode, EEdge>*>::iterator firstSel;
    std::list<Vertex<ENode, EEdge>*>::iterator secSel;
public:

Q_OBJECT

    EduGraph() : firstSel(0), secSel(0) {}
    ~EduGraph();

    void NewNode(const QPoint& p);
    void RemoveNode();
    void Associate();
    void Dissociate();

signals:
    void VertexSelected();
    void VertexDeSelected();
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T15:05:10.303

```
`Undefined reference to `vtable for...'` 
```

is usually a sign of unimplemented virtual function. Make sure you have implemented (defined) the corresponding **virtual functions you inherited from the base classes**.

For example this will give you the same error because the print method in B is not implemented.

```
class A {
public:
    virtual void print() = 0;
};

class B : public A{
public:
    void print();
};

int main()
{
    B b;
} 
```

# html - Making a notification icon with notification count

> ID：15719941
> 
> 赞同：6
> 
> 时间：2013-03-30T15:02:10.817
> 
> 标签：html, css

I want to make a notification icon on my website like facebook. Facebook shows you notification icon on the top left corner. On facebook, there is number of notifications beside the icon. I want to make the same thing. I want to show the number of notifications beside the notification icon just like facebook. I have created this code for this:

```
<style>
    .icon {
        width:30px; 
        height:30px;
    }
    .txt {
        padding:-10px 0 0 10px;
        background:red; 
        font-size:xx-small;
    }
</style>

<div class="icon">
    <img src="icon.bmp" alt="none" width="100%" height="100%" />
    <div class="txt">10</div>
</div> 
```

But it is not happening. Please anyone help me how can I make it same like facebook. Thank You.

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-30T15:06:11.047

Just use `position: relative;` for the icon and `position: absolute;` for the text. Define the distance to the icon with `top` and `left`.

```
.icon {
    width:30px; 
    height:30px;
    position: relative;
}
.txt{
    background-color:red;
    font-size:xx-small;
    position: absolute;
    padding:2px;
    top: 5px;
    left: 5px;
    border-radius: 25px;
}
```

```
<div class="icon">
    <img src="https://cdn.sstatic.net/Sites/stackoverflow/img/favicon.ico?v=4f32ecc8f43d" alt="none" width="100%" height="100%" />
    <div class="txt">10</div>
</div>
```

I would also define the icon as a background image of `.icon` with css and remove the `img` tag.

# android - 在 AsyncTask Android 中获取 JSON

> ID：15719942
> 
> 赞同：3
> 
> 时间：2013-03-30T15:02:11.000
> 
> 标签：android, multithreading, android-asynctask

我正在尝试获取 JSON，但我必须在 AsyncTask 中进行，因为我在 logcat 中得到了它`AndroidRuntime(18153): Caused by: android.os.NetworkOnMainThreadException`。

这是我的代码：

```
public class LatestAlbums extends Activity {

    TextView t;

    // url to make request
    private static String url = "www.example.com";

    // JSON Node names
    private static final String TAG_ALBUMS = "albums";
    private static final String TAG_ID = "id";
    private static final String TAG_NAME = "name";
    private static final String TAG_SINGER = "singer";
    private static final String TAG_GENRE = "genre";
    private static final String TAG_MIX = "mix";
    private static final String TAG_THUMB = "thumb";
    private static final String TAG_SONGS = "songs";
    private static final String TAG_SONG_TITLE = "song";
    private static final String TAG_SONG_ARTIST = "artist";
    private static final String TAG_SONG_MP3 = "mp3";
    private static final String TAG_SONG_MP4 = "mp4";
    private static final String TAG_SONG_THUMB = "thumb";

    // albums JSONArray
    JSONArray albums = null;
    JSONArray sngs = null;
    JSONObject objects = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.favorites);
        t = (TextView) findViewById(R.id.json);
        loadJSON();
    }

    public void loadJSON() {
        // Creating JSON Parser instance
        JSONParser jParser = new JSONParser();

        // getting JSON string from URL
        JSONObject json = jParser.getJSONFromUrl(url);

        try {
            // Getting Array of albums

            albums = json.getJSONArray(TAG_ALBUMS);
            sngs=json.getJSONArray(TAG_SONGS);
            // looping through All albums
            for (int i = 0; i < albums.length(); i++) {
                JSONObject c = albums.getJSONObject(i);

                // Storing each json item in variable
                String album_id = c.getString(TAG_ID);
                String album_name = c.getString(TAG_NAME);
                String album_singer = c.getString(TAG_SINGER);
                String album_genre = c.getString(TAG_GENRE);
                String album_thumb = c.getString(TAG_THUMB);

                // songs are again JSON Object
                for (int j = 0; i < sngs.length(); j++) {
                    JSONObject s = sngs.getJSONObject(j);
                    JSONObject songs = s.getJSONObject(TAG_SONGS);
                    String artist = s.getString(TAG_SONG_ARTIST);
                    String mp3 = s.getString(TAG_SONG_MP3);
                    String mp4 = s.getString(TAG_SONG_MP4);
                    String song_thumb = s.getString(TAG_SONG_THUMB);
                    String song_title = s.getString(TAG_SONG_TITLE);
                }
                Log.v("--", "Albums \n" + " " + album_id + " " + album_name
                        + " " + album_genre + " " + album_singer + " "
                        + album_thumb);
            }

        } catch (JSONException e) {
            e.printStackTrace();
        }

    }

} 
```

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-04-18T05:52:27.793

> 读取 JSON 并将其设置为 Adapter 的最佳且简单的方法。

**AsyncTask 有三个方法。**

在`PreExecute and PostExecute`您可以设置任何**视图属性（就像您在主 UI 线程上一样）**但在`doInBackground`（与 UI 交互之外的操作在这里）它读取 JSON

```
package com.example.tabs;

import java.util.ArrayList;
import java.util.HashMap;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;
import org.json.JSONArray;
import org.json.JSONObject;
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;
import android.widget.Toast;

import com.example.adapters.CalendarAdapter;
import com.example.description.CalendarDescription;

public class Calendar extends Activity {

    String url = "Enter your URL here ";

    GetData data;

    ProgressDialog progressDialog;

    ListView list_of_calendar;

    ArrayList<HashMap<String, String>> list = new ArrayList<HashMap<String, String>>();

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.calendar);

        list_of_calendar = (ListView) findViewById(R.id.list_of_calendar);

        new GetData().execute();
        //new GetData(url).execute();//you can pass it like this and see comment in doInBackground

        //ListView listView = getListView();
        list_of_calendar.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) 
            {
                HashMap<String, String> map = list.get(position);               

                Intent intent = new Intent(Calendar.this, CalendarDescription.class);

                intent.putExtra("name", map.get("name"));

                intent.putExtra("date", map.get("date"));

                intent.putExtra("description", map.get("description"));

                startActivity(intent);

            }

        });
    }

    private class GetData extends AsyncTask<String, Void, JSONObject> {

        @Override
        protected void onPreExecute() {
            super.onPreExecute();

            progressDialog = ProgressDialog.show(Calendar.this,
                    "", "");

        }

        @Override
        protected JSONObject doInBackground(String... params) {

            String response;

            try {

                HttpClient httpclient = new DefaultHttpClient();

                HttpPost httppost = new HttpPost(url);
                //HttpPost httppost = new HttpPost(params[0]);//you can also pass it and get the Url here. 

                HttpResponse responce = httpclient.execute(httppost);

                HttpEntity httpEntity = responce.getEntity();

                response = EntityUtils.toString(httpEntity);

                Log.d("response is", response);

                return new JSONObject(response);

            } catch (Exception ex) {

                ex.printStackTrace();

            }

            return null;
        }

        @Override
        protected void onPostExecute(JSONObject result) 
        {
            super.onPostExecute(result);

            progressDialog.dismiss();

            if(result != null)
            {
                try
                {
                    JSONObject jobj = result.getJSONObject("result");

                    String status = jobj.getString("status");

                    if(status.equals("true"))
                    {
                        JSONArray array = jobj.getJSONArray("data");

                        for(int x = 0; x < array.length(); x++)
                        {
                            HashMap<String, String> map = new HashMap<String, String>();

                            map.put("name", array.getJSONObject(x).getString("name"));

                            map.put("date", array.getJSONObject(x).getString("date"));

                            map.put("description", array.getJSONObject(x).getString("description"));

                            list.add(map);
                        }

                        CalendarAdapter adapter = new CalendarAdapter(Calendar.this, list);

                        list_of_calendar.setAdapter(adapter);
                    }
                }
                catch (Exception e) 
                {
                    e.printStackTrace();
                }
            }
            else
            {
                Toast.makeText(Calendar.this, "Network Problem", Toast.LENGTH_LONG).show();
            }
        }

    }
} 
```

**编辑**

代码用于网址

[http://www.socialgeolocate.com/DayCare/webservices/Get_calender.php](http://www.socialgeolocate.com/DayCare/webservices/Get_calender.php)?

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-30T15:14:03.520

在后台加载您的 JSON 对象（执行网络操作）并在 UI 线程中处理结果，即：

```
URL requestUrl = "...";

new AsyncTask<URL, Void, JSONObject>() {

    @Override
    protected Boolean doInBackground(URL... urls) {
        loadJSON(url);
    }

    @Override
    protected void onPostExecute(JSONObject jsonData) {
        try {
            // Getting Array of albums

            albums = json.getJSONArray(TAG_ALBUMS);
            sngs=json.getJSONArray(TAG_SONGS);
            // looping through All albums

            etc.
    }
}.execute(requestUrl);

public void loadJSON(URL url) {
    // Creating JSON Parser instance
    JSONParser jParser = new JSONParser();

    // getting JSON string from URL
    JSONObject json = jParser.getJSONFromUrl(url);

    return json;
} 
```

查看[此](http://developer.android.com/reference/android/os/AsyncTask.html)以获取更多信息。

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T15:11:14.873

[这就是异步任务的工作方式](https://stackoverflow.com/questions/9671546/asynctask-android-example)

做你的解析

```
doInBackground() 
```

并用检索到的数据做这件事

```
onPostExecute() 
```

# java - 读取 excelsheet 中的行并填充到网页文本框中

> ID：15719944
> 
> 赞同：0
> 
> 时间：2013-03-30T15:02:33.947
> 
> 标签：java, selenium, selenium-rc, selenium-ide

谁能建议我如何在我的本地驱动器中读取 excel 表说“C:\company_names.xls”并填充到网页中的文本框中。

我将解释测试用例场景如下：

1) 网页应首先在 Firefox 中打开。2）左侧导航应单击**“公司列表”** 3）然后应选择 下拉值名称**公司列表（默认情况下） 。**4）然后应单击创建按钮，该按钮将页面带到另一个页面，该页面有两个文本框，名称为**“公司名称”**和**公司产品”** 5）带有这两个文本框条目的 excelsheet 位于本地驱动器“C：\ text.xls"。此 Excel 表共有 100 条记录。6) 应从 excel 表中获取公司名称和公司产品这两个条目中的每一个并填充到网页的文本框中，然后单击提交按钮。7 ) 然后是另一个提交按钮。

我可以通过为第一个条目硬编码两个示例值来创建自动化。***谁能帮助我如何从 excelsheet 中读取值并填充到网页的文本框中？***

我已经粘贴了到目前为止我已经完成的硬编码示例，请帮助我了解如何使用 excelsheet 读取数据并将数据填充到网页中。

```
public void submit()throws Exception
{
    selenium.start();
    selenium.setSpeed("1000");
    selenium.open("URL");
    selenium.windowFocus();
    selenium.windowMaximize();
    selenium.click("link=companylist");
    selenium.waitForPageToLoad("30000");
    selenium.select("//select[@name='comp_id']","label=company");
    selenium.waitForPageToLoad("30000");
    selenium.click("name=open");
    selenium.waitForPageToLoad("30000");
    selenium.type("id=company_names", "test5");
   selenium.type("id=company_products", "test6");
    selenium.click("css=input.button");
    selenium.waitForPageToLoad("30000");
    selenium.click("name=action");
    selenium.waitForPageToLoad("30000");
    selenium.click("name=action");
    selenium.waitForPageToLoad("30000");

}
public void tearDown() throws Exception 
{
    selenium.close();
    selenium.stop();
    selenium.refresh(); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:06:37.563

我会为此使用 Apache POI 库。查看Excel 库的[POI-HSSF 和 POI-XSSF](http://poi.apache.org/spreadsheet/index.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T15:54:25.820

不确定您尝试了什么，但有 Excel JDBC 驱动程序。可能有助于从 Excel 读取数据。访问：http: [//sourceforge.net/projects/xlsql/](http://sourceforge.net/projects/xlsql/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T10:42:46.900

public static String[][] readData(String readfileName, String readsheetName) 抛出 IOException, BiffException

```
 {

    File infoFile = new File(readfileName);

    Workbook infoWorkBook = Workbook.getWorkbook(infoFile);

    Sheet infoSheet = infoWorkBook.getSheet(readsheetName);
    int infoRows = infoSheet.getRows();

    int infoColumns = infoSheet.getColumns();

    String[][] column = new String[infoColumns][infoRows];

    for(int i=1; i< infoRows; i++)

    {

    for(int j1=0; j1<infoColumns; j1++)

    {
    column[j1][i] = infoSheet.getCell(j1, i).getContents(); 
```

// System.out.println(column[j1][i]);

```
 }

    }
    return column;

    } 
```

# javascript - 在 DELETE 之后计算行顺序

> ID：15719947
> 
> 赞同：1
> 
> 时间：2013-03-30T15:02:53.513
> 
> 标签：javascript, mysql, sql, sql-update, sql-delete

我正在使用 phonegap 制作一个 ios 和 android 应用程序。我正在使用 WebSql，我遇到了这个问题：当您删除任何行时，我想重新排列名为“位置”的列的值。例如。：基表是：

```
╔═════╦══════════╗
║ ID  ║ POSITION ║
╠═════╬══════════╣
║  23 ║        0 ║
║  32 ║        1 ║
║ 143 ║        2 ║
║  13 ║        3 ║
╚═════╩══════════╝ 
```

例如，如果我想删除位置为 1 的行，则下面的行的位置会自动减一，例如：

```
╔═════╦══════════╗
║ ID  ║ POSITION ║
╠═════╬══════════╣
║  23 ║        0 ║
║ 143 ║        1 ║
║  13 ║        2 ║
╚═════╩══════════╝ 
```

我的问题是：有没有办法在删除行后直接在 MySql 中执行此操作？还是我需要在 javascript 中执行此操作，例如： - 删除我的行 - 查询所有表 - 循环它们以更改它们的位置 - 更新行。

感谢帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T15:10:47.277

在执行删除语句后，运行此更新语句来修改`position`

```
UPDATE  tableName a
        INNER JOIN
        (
            SELECT  a.id, @rn := @rn + 1 New_position
            FROM    tableName a, (SELECT @rn := 0) b
            ORDER   BY a.Position
        ) b ON  a.ID = b.ID
SET     a.Position = b.New_Position 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/0e3b8/1)

这是语句执行后的输出，

```
╔═════╦══════════╗
║ ID  ║ POSITION ║
╠═════╬══════════╣
║  23 ║        1 ║
║ 143 ║        2 ║
║  13 ║        3 ║
╚═════╩══════════╝ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:47:55.743

Finally for my case, using localStorage was easier and better than WebSql.

# android - 如何以编程方式在另一个没有重叠的相对布局之后添加新的相对布局？

> ID：15719948
> 
> 赞同：0
> 
> 时间：2013-03-30T15:03:00.463
> 
> 标签：android, android-relativelayout

我尝试在另一个没有重叠的相对布局之后以编程方式添加一个新的相对布局。

```
 LinearLayout ll = (LinearLayout)findViewById(R.id.mainLL);
    ll.setOrientation(LinearLayout.VERTICAL);       

    RelativeLayout rl = new RelativeLayout(MainActivity.this);
    rl.setId(2);
    RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.MATCH_PARENT, 50);//RelativeLayout.LayoutParams.WRAP_CONTENT
    ll.addView(rl, lp);  

    TextView iTextView = new TextView(this);         
    iTextView.setTextSize(pthTextFontSize);
    iTextView.setText("ok"); 
    rl.addView(iTextView);       
    // finish adding the first relativelayout.

    RelativeLayout rl2 = new RelativeLayout(MainActivity.this);
    RelativeLayout.LayoutParams lp2 = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.MATCH_PARENT, 50);    
    lp2.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
    lp2.addRule(RelativeLayout.BELOW, rl.getId());
    rl2.setLayoutParams(lp2);
    ll.addView(rl2);

    TextView iTextView2 = new TextView(this);         
    iTextView2.setTextSize(pthTextFontSize);
    iTextView2.setText("abc"); 
    rl.addView(iTextView2); 
```

但是，“ok”和“abc”这个词是重叠的。谁能帮我检查一下有什么问题？非常感谢您的帮助。

简而言之：有一个线性布局（占据全屏）。然后我尝试添加两个线性布局。相对布局“rl2”的父级是“ll”，我尝试将“rl2”放在“ll”的 ALIGN_PARENT_LEFT 和“rl1”下方，但它们重叠。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:51:44.210

我没有测试你的代码，但看到逻辑，问题可能是因为你使用了 ALIGN_PARENT_LEFT 用于相对布局 2。简单解释一下，相对布局“rl2”的父级是 rl1。因此，文本“abc”（在 rl2 中）在 rl1 的最左侧对齐，其中存在“ok”。这就是它们重叠的原因。我自己没有尝试过，但尝试使用：

```
lp2.addRule(RelativeLayout.ALIGN_LEFT); 
```

告诉我它是否有帮助。一切顺利

# javascript - 在 Google Maps API v3 中使用多个标记自动居中地图

> ID：15719951
> 
> 赞同：248
> 
> 时间：2013-03-30T15:03:33.873
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-markers

这就是我用来显示带有 3 个图钉/标记的地图的方法：

```
<script>
  function initialize() {
    var locations = [
      ['DESCRIPTION', 41.926979, 12.517385, 3],
      ['DESCRIPTION', 41.914873, 12.506486, 2],
      ['DESCRIPTION', 41.918574, 12.507201, 1]
    ];

    var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 15,
      center: new google.maps.LatLng(41.923, 12.513),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var infowindow = new google.maps.InfoWindow();

    var marker, i;

    for (i = 0; i < locations.length; i++) {
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(locations[i][1], locations[i][2]),
        map: map
      });

      google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
          infowindow.setContent(locations[i][0]);
          infowindow.open(map, marker);
        }
      })(marker, i));
    }
  }

  function loadScript() {
    var script = document.createElement('script');
    script.type = 'text/javascript';
    script.src = 'https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&' + 'callback=initialize';
    document.body.appendChild(script);
  }

  window.onload = loadScript;
</script>

<div id="map" style="width: 900px; height: 700px;"></div> 
```

我正在寻找的是一种避免“手动”找到地图中心的方法`center: new google.maps.LatLng(41.923, 12.513)`。有没有办法让地图自动以三个坐标为中心？

* * *

## 回答 #1

> 赞同：493
> 
> 时间：2013-03-30T15:14:29.220

有一种更简单的方法，通过扩展一个空`LatLngBounds`而不是从两点显式创建一个。（有关详细信息，请参阅[此问题）](https://stackoverflow.com/questions/10268033/google-maps-api-v3-method-fitbounds)

应该看起来像这样，添加到您的代码中：

```
//create empty LatLngBounds object
var bounds = new google.maps.LatLngBounds();
var infowindow = new google.maps.InfoWindow();    

for (i = 0; i < locations.length; i++) {  
  var marker = new google.maps.Marker({
    position: new google.maps.LatLng(locations[i][1], locations[i][2]),
    map: map
  });

  //extend the bounds to include each marker's position
  bounds.extend(marker.position);

  google.maps.event.addListener(marker, 'click', (function(marker, i) {
    return function() {
      infowindow.setContent(locations[i][0]);
      infowindow.open(map, marker);
    }
  })(marker, i));
}

//now fit the map to the newly inclusive bounds
map.fitBounds(bounds);

//(optional) restore the zoom level after the map is done scaling
var listener = google.maps.event.addListener(map, "idle", function () {
    map.setZoom(3);
    google.maps.event.removeListener(listener);
}); 
```

这样，您可以使用任意数量的点，而无需事先知道顺序。

在这里演示 jsFiddle：http: [//jsfiddle.net/x5R63/](http://jsfiddle.net/x5R63/)

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-03-30T15:08:26.227

我认为你必须计算纬度最小值和经度最小值：这是一个示例，其中包含用于中心点的函数：

```
//Example values of min & max latlng values
var lat_min = 1.3049337;
var lat_max = 1.3053515;
var lng_min = 103.2103116;
var lng_max = 103.8400188;

map.setCenter(new google.maps.LatLng(
  ((lat_max + lat_min) / 2.0),
  ((lng_max + lng_min) / 2.0)
));
map.fitBounds(new google.maps.LatLngBounds(
  //bottom left
  new google.maps.LatLng(lat_min, lng_min),
  //top right
  new google.maps.LatLng(lat_max, lng_max)
)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-11-05T19:02:35.837

我已经尝试了这个主题的所有答案，但是下面的这个在我的项目上运行良好。

Angular 7 和 AGM 核心 1.0.0-beta.7

```
<agm-map [latitude]="lat" [longitude]="long" [zoom]="zoom" [fitBounds]="true">
  <agm-marker latitude="{{localizacao.latitude}}" longitude="{{localizacao.longitude}}" [agmFitBounds]="true"
    *ngFor="let localizacao of localizacoesTec">
  </agm-marker>
</agm-map> 
```

`[agmFitBounds]="true"`at`agm-marker`和`[fitBounds]="true"`at的属性`agm-map`可以完成工作

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-08-03T10:23:16.923

另一种实现，基于先前的答案，但更精简：

```
export class MapComponent {
    @ViewChild(GoogleMap) map: GoogleMap;

    markerList = [
        {
            lat: 41.926979,
            lng: 12.517385
        },
        {
            lat: 41.914873,
            lng: 12.506486
        },
        {
            lat: 41.918574, 
            lng: 12.507201
        }
    ]

    centralize() {
        const bounds = new google.maps.LatLngBounds();
        this.markerList.forEach((marker) => {
            bounds.extend(new google.maps.LatLng(marker.lat, marker.lng))
        })
        this.map.fitBounds(bounds)
    }
} 
```

您不需要创建“google.maps.Marker”，您只需从 LatLng 创建一个实例并直接作为参数传递给边界扩展函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-04T01:49:30.977

要找到地图的确切中心，您需要将纬度/经度坐标转换为像素坐标，然后找到像素中心并将其转换回纬度/经度坐标。

根据您在赤道以北或以南的距离，您可能不会注意到或介意漂移。您可以通过在 setInterval 中执行 map.setCenter(map.getBounds().getCenter()) 来查看漂移，漂移会在接近赤道时慢慢消失。

您可以使用以下内容在纬度/经度和像素坐标之间进行转换。像素坐标基于完全放大的整个世界的平面，但您可以找到该平面的中心并将其切换回纬度/经度。

```
 var HALF_WORLD_CIRCUMFERENCE = 268435456; // in pixels at zoom level 21
   var WORLD_RADIUS = HALF_WORLD_CIRCUMFERENCE / Math.PI;

   function _latToY ( lat ) {
      var sinLat = Math.sin( _toRadians( lat ) );
      return HALF_WORLD_CIRCUMFERENCE - WORLD_RADIUS * Math.log( ( 1 + sinLat ) / ( 1 - sinLat ) ) / 2;
   }

   function _lonToX ( lon ) {
      return HALF_WORLD_CIRCUMFERENCE + WORLD_RADIUS * _toRadians( lon );
   }

   function _xToLon ( x ) {
      return _toDegrees( ( x - HALF_WORLD_CIRCUMFERENCE ) / WORLD_RADIUS );
   }

   function _yToLat ( y ) {
      return _toDegrees( Math.PI / 2 - 2 * Math.atan( Math.exp( ( y - HALF_WORLD_CIRCUMFERENCE ) / WORLD_RADIUS ) ) );
   }

   function _toRadians ( degrees ) {
      return degrees * Math.PI / 180;
   }

   function _toDegrees ( radians ) {
      return radians * 180 / Math.PI;
   } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-08-18T22:10:26.020

**这在Angular 9**中为我工作：

```
 import {GoogleMap, GoogleMapsModule} from "@angular/google-maps";
  @ViewChild('Map') Map: GoogleMap; /* Element Map */

  locations = [
   { lat: 7.423568, lng: 80.462287 },
   { lat: 7.532321, lng: 81.021187 },
   { lat: 6.117010, lng: 80.126269 }
  ];

  constructor() {
   var bounds = new google.maps.LatLngBounds();
    setTimeout(() => {
     for (let u in this.locations) {
      var marker = new google.maps.Marker({
       position: new google.maps.LatLng(this.locations[u].lat, 
       this.locations[u].lng),
      });
      bounds.extend(marker.getPosition());
     }

     this.Map.fitBounds(bounds)
    }, 200)
  } 
```

它会根据指示的位置自动将地图居中。

结果：

[![在此处输入图像描述](../Images/dc626a48864de351b6d0e8e688957832.png)](https://i.stack.imgur.com/c2u5Y.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-31T15:44:47.403

我使用上面的方法设置地图边界，然后，我只计算平均 LAT 和平均 LON 并将中心点设置为该位置，而不是重置缩放级别。我将所有 lat 值加到 latTotal 中，将所有 lon 值加到 lontotal 中，然后除以标记数。然后我将地图中心点设置为这些平均值。

latCenter = latTotal / 标记计数；lonCenter = lontotal / 标记计数；

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-30T08:09:26.973

我遇到了无法更改旧代码的情况，因此添加了此 javascript 函数来计算中心点和缩放级别：

```
//input
var tempdata = ["18.9400|72.8200-19.1717|72.9560-28.6139|77.2090"];

function getCenterPosition(tempdata){
	var tempLat = tempdata[0].split("-");
	var latitudearray = [];
	var longitudearray = [];
	var i;
	for(i=0; i<tempLat.length;i++){
		var coordinates = tempLat[i].split("|");
		latitudearray.push(coordinates[0]);
		longitudearray.push(coordinates[1]);
	}
	latitudearray.sort(function (a, b) { return a-b; });
	longitudearray.sort(function (a, b) { return a-b; });
	var latdifferenece = latitudearray[latitudearray.length-1] - latitudearray[0];
	var temp = (latdifferenece / 2).toFixed(4) ;
	var latitudeMid = parseFloat(latitudearray[0]) + parseFloat(temp);
	var longidifferenece = longitudearray[longitudearray.length-1] - longitudearray[0];
	temp = (longidifferenece / 2).toFixed(4) ;
	var longitudeMid = parseFloat(longitudearray[0]) + parseFloat(temp);
	var maxdifference = (latdifferenece > longidifferenece)? latdifferenece : longidifferenece;
	var zoomvalue;	
	if(maxdifference >= 0 && maxdifference <= 0.0037)  //zoom 17
		zoomvalue='17';
	else if(maxdifference > 0.0037 && maxdifference <= 0.0070)  //zoom 16
		zoomvalue='16';
	else if(maxdifference > 0.0070 && maxdifference <= 0.0130)  //zoom 15
		zoomvalue='15';
	else if(maxdifference > 0.0130 && maxdifference <= 0.0290)  //zoom 14
		zoomvalue='14';
	else if(maxdifference > 0.0290 && maxdifference <= 0.0550)  //zoom 13
		zoomvalue='13';
	else if(maxdifference > 0.0550 && maxdifference <= 0.1200)  //zoom 12
		zoomvalue='12';
	else if(maxdifference > 0.1200 && maxdifference <= 0.4640)  //zoom 10
		zoomvalue='10';
	else if(maxdifference > 0.4640 && maxdifference <= 1.8580)  //zoom 8
		zoomvalue='8';
	else if(maxdifference > 1.8580 && maxdifference <= 3.5310)  //zoom 7
		zoomvalue='7';
	else if(maxdifference > 3.5310 && maxdifference <= 7.3367)  //zoom 6
		zoomvalue='6';
	else if(maxdifference > 7.3367 && maxdifference <= 14.222)  //zoom 5
		zoomvalue='5';
	else if(maxdifference > 14.222 && maxdifference <= 28.000)  //zoom 4
		zoomvalue='4';
	else if(maxdifference > 28.000 && maxdifference <= 58.000)  //zoom 3
		zoomvalue='3';
	else
		zoomvalue='1';
	return latitudeMid+'|'+longitudeMid+'|'+zoomvalue;
}
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-06-29T08:57:15.707

如果有人遇到此线程，这是我对此的看法：

这有助于防止非数值数据破坏确定`lat`和的最终变量`lng`。

它的工作原理是获取所有坐标，将它们解析为数组的单独元素`lat`和元素，然后确定每个坐标的平均值。`lng`该平均值应该是中心（并且在我的测试用例中证明是正确的。）

```
var coords = "50.0160001,3.2840073|50.014458,3.2778274|50.0169713,3.2750587|50.0180745,3.276742|50.0204038,3.2733474|50.0217796,3.2781737|50.0293064,3.2712542|50.0319918,3.2580816|50.0243287,3.2582281|50.0281447,3.2451177|50.0307925,3.2443178|50.0278165,3.2343882|50.0326574,3.2289809|50.0288569,3.2237612|50.0260081,3.2230589|50.0269495,3.2210104|50.0212645,3.2133541|50.0165868,3.1977592|50.0150515,3.1977341|50.0147901,3.1965286|50.0171915,3.1961636|50.0130074,3.1845098|50.0113267,3.1729483|50.0177206,3.1705726|50.0210692,3.1670394|50.0182166,3.158297|50.0207314,3.150927|50.0179787,3.1485753|50.0184944,3.1470782|50.0273077,3.149845|50.024227,3.1340514|50.0244172,3.1236235|50.0270676,3.1244474|50.0260853,3.1184879|50.0344525,3.113806";

var filteredtextCoordinatesArray = coords.split('|');    

    centerLatArray = [];
    centerLngArray = [];

    for (i=0 ; i < filteredtextCoordinatesArray.length ; i++) {

      var centerCoords = filteredtextCoordinatesArray[i]; 
      var centerCoordsArray = centerCoords.split(',');

      if (isNaN(Number(centerCoordsArray[0]))) {      
      } else {
        centerLatArray.push(Number(centerCoordsArray[0]));
      }

      if (isNaN(Number(centerCoordsArray[1]))) {
      } else {
        centerLngArray.push(Number(centerCoordsArray[1]));
      }                    

    }

    var centerLatSum = centerLatArray.reduce(function(a, b) { return a + b; });
    var centerLngSum = centerLngArray.reduce(function(a, b) { return a + b; });

    var centerLat = centerLatSum / filteredtextCoordinatesArray.length ; 
    var centerLng = centerLngSum / filteredtextCoordinatesArray.length ;                                    

    console.log(centerLat);
    console.log(centerLng);

    var mapOpt = {      
    zoom:8,
    center: {lat: centerLat, lng: centerLng}      
    }; 
```

# c++ - Automatically implement virtual functions depending on sister classes

> ID：15719953
> 
> 赞同：1
> 
> 时间：2013-03-30T15:03:42.903
> 
> 标签：c++, c++11, multiple-inheritance, virtual-functions

Is there an idiom I can use to help with implementing virtual functions that depend on the presence of a base class? For example, I have

```
class B {/* some abstract interface. */};

class A
{
public:
  virtual B* getB() {return nullptr;}
};

class C : public A, public B
{
public:
  B* getB() override {return this;}

  /* Implement B's interface here.*/
}; 
```

and I usually want to implement `getB` like this - could I somehow avoid having to repeat this for all leaf classes? I potentially have a few interface classes like B,

I know that one way to do it is to virtually inherit from A in both C and B, but I'd like to keep B unrelated from A, if at all possible.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T15:23:23.813

You can do it all in A:

```
class A
{
public:
    virtual B* getB() {return dynamic_cast<B*>(this);}
}; 
```

Note: `virtual` here is just to make class A polymorphic, a requirement of this use of `dynamic_cast`. We don't intend to override `getB()`.

# android - 如何在特殊字符前添加 \

> ID：15719960
> 
> 赞同：0
> 
> 时间：2013-03-30T15:04:18.800
> 
> 标签：android, regex

我正在尝试将字符串发送到服务器，并且需要在特殊字符之前添加 \（例如：将“test '”替换为“test \'”）。我写 ：

```
public static String handleSpecialChars(String str){
if (str!=null){
    Log.d("Common handleSpecialChars",str);
    str = str.replaceAll("[\\p{Punct}]", "\\$1");
   }
   return str;
} 
```

但我得到了“test $1”（可能是因为 \ 指的是 $）。所以我也写了：

```
str = str.replaceAll("[\\p{Punct}]", "\\\\$1"); 
```

但比我得到“java.lang.ArrayIndexOutOfBoundsException”。我究竟做错了什么 ？

# keyboard-shortcuts - How to toggle a comment in kdevelop?

> ID：15719964
> 
> 赞同：3
> 
> 时间：2013-03-30T15:04:35.703
> 
> 标签：keyboard-shortcuts, kdevelop

Kdevelop has separate commands for commenting (`ctrl`+`d`) and uncommenting (`ctrl`+`shift`+`d`).

Is there a way of using a single shortcut to toggle both?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-01T11:52:35.010

In my version of kdevelop / kate (v. 4.6.0 / 3.13.3 using KDE 4.13.3, from Ubuntu 14.04) there are two different entries in `Settings / Configure Shortcuts...` and they are both located under Kate Part grouping:

*   The first one is spelled 'Toggle comment' and always tries to use the HTML/XML style comments `<!-- -->`;
*   The second one, spelled 'Toggle Comment' has a context specific behavior, and it is probably what you would like to assign the shortcut to.

Maybe it would be a good idea to request some developers to assign it by default to `Ctrl + /`, which is somewhat the most used one to the best of my knowledge.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T15:04:35.703

Yes. Use *Settings->Configure Shortcuts* and enter `comment` in the search box.

You will see a line *Toggle Comment*, which you can assign a keyboard shortcut.

In this same list of results you'll see *Comment* and *Uncomment* which you may like to unassign bindings from.

# php - PHP : 轮播引导 CSS

> ID：15719969
> 
> 赞同：1
> 
> 时间：2013-03-30T15:05:02.157
> 
> 标签：php, javascript, css, twitter-bootstrap, carousel

我正在尝试使用 Bootstrap CSS Carousel。左右箭头不起作用，幻灯片没有自动切换......我不知道为什么。

这是我的代码：

索引.php

```
<?php
  include("header.php");
?>
  <body>

  <?php
    include("menu.php");
    include("carousel.php");
  ?>

  <footer>
    <p>&copy; 2013 Company</p>
  </footer>

  <?php
    include("script.php");
  ?>
      <script>
        !function ($) {
          $(function(){
            $('.carousel').carousel()
          })
        }(window.jQuery)
      </script>
  </body>
</html> 
```

轮播.php

```
<div id="myCarousel" class="carousel slide">
  <div class="carousel-inner">
    <div class="item active">
      <img src="img/bg1.jpg" alt="">
      <div class="container">
        <div class="carousel-caption">
          <h1>ITEM 1</h1>
          <p class="lead">Description 1.</p>
          <a class="btn btn-large btn-primary" href="#">More</a>
        </div>
      </div>
    </div>

    <div class="item">
      <img src="img/bg2.jpg" alt="">
      <div class="container">
        <div class="carousel-caption">
          <h1>ITEM 2</h1>
          <p class="lead">Description 2.</p>
          <a class="btn btn-large btn-primary" href="#">More</a>
        </div>
      </div>
    </div>

    <div class="item">
      <img src="img/bg3.jpg" alt="">
      <div class="container">
        <div class="carousel-caption">
          <h1>ITEM 3</h1>
          <p class="lead">Description 3.</p>
          <a class="btn btn-large btn-primary" href="#">More</a>
        </div>
      </div>
    </div>
  </div>
  <!-- Carousel NAV -->
  <a class="left carousel-control" href="#myCarousel" data-slide="prev">&lsaquo;</a>
  <a class="right carousel-control" href="#myCarousel" data-slide="next">&rsaquo;</a>
</div> 
```

script.php（*已编辑）

```
<script src="js/jquery.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/holder/holder.js"></script> 
```

PS：我不能在 JS 中编程，也不能在 JQuery 中编程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:24:26.450

我知道了 ！

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
  $(document).ready(function(){
      $('.carousel').carousel();
  });
</script> 
```

在页面的开头而不是结尾运行此脚本使其工作。在 script.php 文件中，我运行以下脚本：

```
<script src="js/bootstrap.js"></script>
<script src="/js/bootstrap-carousel.js"></script>
<script src="/js/jquery.js"></script> 
```

# c - 使用 GUI 制作程序

> ID：15719973
> 
> 赞同：2
> 
> 时间：2013-03-30T15:05:22.190
> 
> 标签：c, user-interface

我目前正在用 C 语言制作一个程序，我打算为其制作一个 GUI。目前我只想完成后端，以便在使用终端命令时可以正常运行，然后稍后添加 GUI。

这是一种好的方法还是我应该从一开始就尝试实现 GUI 的各个方面？我从来没有用 C 语言做过，而且我以前也只做过一个，而且是用 Java 做的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:09:51.227

将 UI 与逻辑分离不仅可以，甚至可以**鼓励。**因此，请使用您当前的方法。

# javascript - How does this function works?

> ID：15719975
> 
> 赞同：0
> 
> 时间：2013-03-30T15:05:39.900
> 
> 标签：javascript

My question is how this function works, what I don't understand is the return part `yell(n-1) + "a"` what result I expected was `3a` but the result was `hiyaaaa`. I can't figure out how.

## Function code

```
var ninja = { 
  yell: function yell(n){ 
    return n > 0 ? yell(n-1) + "a" : "hiy"; 
  } 
};
ninja.yell(4); //returns hiyaaaa 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T15:12:04.047

`yell(n-1)+"a"` calls the function again with a slightly lower value of `n`, and attaches an `a` to whatever the recursed call returns. In this case, you get this chain:

```
ninja.yell(4)
yell(3)+"a"
(yell(2)+"a")+"a"
((yell(1)+"a")+"a")+"a"
(((yell(0)+"a")+"a")+"a")+"a"
((("hiy"+"a")+"a")+"a")+"a"
"hiyaaaa" 
```

Although, personally I'd rewrite the function like so:

```
ninja = {
    yell: function(n) {return "hiy"+new Array(n+1).join("a");}
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T15:11:38.657

`yell` is a recursive function. When you call it with 4, it calls itself with 3 (4 - 1), which in turn calls itself with 2 (3 - 1), etc., as long as `n` is `> 0`.

The reason that `yell` is available to be called in this way is that the person writing the code wrote a *named function expression*:

```
yell: function yell(n){ 
  return n > 0 ? yell(n-1) + "a" : "hiy"; 
} 
```

What that does is create a function with the name `yell`, and assign it to the *property* `yell` on the object `ninja`. The property and the function happen to have the same name, but there's no reason they have to, it could have been:

```
yell: function foo(n){ 
  return n > 0 ? foo(n-1) + "a" : "hiy"; 
} 
```

`yell` (the unqualified symbol), or `foo` in my example above, is in scope within the function because it's the function's name.

It's worth a side-note here that named function expressions don't quite work correctly on IE8 and earlier (although that particular example would still work); more: [*Double take*](http://blog.niftysnippets.org/2010/09/double-take.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T15:11:13.997

```
return n > 0 ? yell(n - 1) + "a" : "hiy"; 
```

`yell(n - 1)` will be executed *before* concatenating it with `"a"`. That means as it recurses (and `n` becomes smaller), it will eventually return `"hiy"` with the other `"a"`s concatenated along with it from the previous calls.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-30T15:11:19.680

It is recursive function, invoking itself until n==0, works OK.

# java - 使用 OpenCV Java 绑定读取图像

> ID：15719977
> 
> 赞同：8
> 
> 时间：2013-03-30T15:06:03.943
> 
> 标签：java, opencv, image-processing, javacv

我正在使用新的[OpenCV Java 绑定](http://opencv.org/opencv-java-api.html)来读取图像并对图像进行一些处理。我正在尝试使用 Java 绑定将 C 代码转换为 Java，但似乎找不到相关方法：

C代码：

```
cv::Mat img = cv::imread(argv[1]);
cv::Mat gray;
cv::cvtColor(img, gray, CV_BGR2GRAY);
int erosion_size = 5;
cv::Mat element = cv::getStructuringElement(cv::MORPH_CROSS,
                                       cv::Size(2 * erosion_size + 1, 2 * erosion_size + 1),
                                       cv::Point(erosion_size, erosion_size) );
cv::erode(gray, gray, element); 
```

我找不到：

*   `imread`
*   `cvtcolor`
*   `getStructuringElement`
*   `erode`

我在这里查看了 api：http: [//docs.opencv.org/java/](http://docs.opencv.org/java/)

不幸的是，[提供的示例 java 代码](https://github.com/Itseez/opencv/blob/master/samples/java/ant/src/SimpleSample.java)甚至没有显示如何读取图像！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2016-11-06T14:49:51.963

使用 OpenCV for Java 读取图像：

### OpenCV 2.x ( [JavaDoc](http://docs.opencv.org/java/2.4.9/org/opencv/highgui/Highgui.html#imread(java.lang.String)) )

```
Mat img = Highgui.imread("path/to/img"); 
```

### OpenCV 3.x ( [JavaDoc](http://docs.opencv.org/java/3.1.0/org/opencv/imgcodecs/Imgcodecs.html#imread-java.lang.String-) )

```
Mat img = Imgcodecs.imread("path/to/img"); 
```

* * *

在这两个版本中，您都可以传递第二个参数来指定如何加载图像：

*   `CV_LOAD_IMAGE_ANYDEPTH`：当输入具有相应的深度时返回 16 位/32 位图像，否则将其转换为 8 位。
*   `CV_LOAD_IMAGE_COLOR`：始终将图像转换为彩色图像。
*   `CV_LOAD_IMAGE_GRAYSCALE`：始终将图像转换为灰度图像。

例子：

```
// OpenCV 2.x   
Mat img = Highgui.imread("path/to/img", Highgui.CV_LOAD_IMAGE_GRAYSCALE);
// OpenCV 3.x
Mat img = Imgcodecs.imread("path/to/img", Imgcodecs.CV_LOAD_IMAGE_GRAYSCALE); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-30T15:45:00.970

如果您已正确安装了支持 Java 桌面并包含`opencv-2.4.4.jar`的 Opencv，则应导入：

```
import org.opencv.imgproc.Imgproc;
import org.opencv.core.Point;
import org.opencv.core.Size;
import org.opencv.highgui.Highgui; 
```

您的代码将如下所示：

```
Mat img = Highgui.imread(argv[1], Highgui.CV_LOAD_IMAGE_GRAYSCALE);
int erosion_size = 5;
Mat element  = Imgproc.getStructuringElement(
    Imgproc.MORPH_CROSS, new Size(2 * erosion_size + 1, 2 * erosion_size + 1), 
    new Point(erosion_size, erosion_size)
);
Imgproc.erode(img, img, element); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-06T02:03:38.063

对于 macOS，您可以使用：

```
import org.opencv.imgcodecs.Imgcodecs;

Mat logo = Imgcodecs.imread("resources/images/gambar.jpg"); 
```

对我来说，我使用 opencv_java320.dll

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-12T07:57:34.147

[@David Miguel](https://stackoverflow.com/a/40450651/9640177)有一个重要的更新要回答。

`Imgcodecs.CV_LOAD_IMAGE_GRAYSCALE`在 opencv 4.x 中不再可用。您应该使用`Imgcodecs.imread("/resources/images/test.png", Imgcodecs.IMREAD_GRAYSCALE)`加载灰度图像。

# cordova - iOS iAd 横幅展示位置

> ID：15719982
> 
> 赞同：0
> 
> 时间：2013-03-30T15:06:28.750
> 
> 标签：cordova, ios6, iad

我想知道最佳做法是什么以及如何在屏幕底部显示广告横幅。我正在使用 phonegap 2.5，我可以让它显示在屏幕顶部。这就是我创建 adBannerView 的方式。

```
- (void)webViewDidFinishLoad:(UIWebView*)theWebView
{
    // Black base color for background matches the native apps
    theWebView.backgroundColor = [UIColor blackColor];

    adView = [[[ADBannerView alloc] initWithFrame:CGRectZero] autorelease];
    //adView.frame = CGRectMake(0, 410, 320, 50); // if you want the banner to be on top of the screen remove this line
    adView.delegate = self;
    adView.autoresizingMask = UIViewAutoresizingFlexibleWidth;
    [theWebView addSubview:adView];

    return [super webViewDidFinishLoad:theWebView];
} 
```

我不确定我是否要根据上面注释掉的行来修复位置，因为 iphone (4,5) 具有不同的分辨率。请让我知道如何将其放置在屏幕底部。

谢谢。

我尝试了此[链接](https://stackoverflow.com/questions/13200601/how-can-you-put-admob-banner-at-the-bottom-on-both-iphone-4s-and-iphone-5/13256266#13256266)中的内容，但我收到有关冲突约束的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:53:33.353

尝试这个 ！

```
adView = [[ADBannerView alloc] initWithFrame:CGRectZero];
adView.requiredContentSizeIdentifiers = [NSSet setWithObject:ADBannerContentSizeIdentifierPortrait];
adView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierPortrait;
CGRect adFrame = adView.frame;
adFrame.origin.y = self.view.frame.size.height-adView.frame.size.height;
adView.frame = adFrame;
[theWebView addSubview:adView]; 
```

# jquery - Parse nested xml of recursive dir list with jQuery

> ID：15719983
> 
> 赞同：0
> 
> 时间：2013-03-30T15:06:34.447
> 
> 标签：jquery, xml, parsing, recursion, nested

I have xml based recursive dir list. I want to get file list from specific directory for example .By XML I should get only img2.gif and img3.gif and img6.gif .But script also returns img4 and img5 which are actually in sub dir and i dont want to process subdirs. Objective is to get files from requested dir and ignore nested sub dirs. One way is to change xml structure from nested to normal but i dont want that. **XML**

```
<directory name=".">
   <file name="img1.gif" />
   <directory name="images">
      <file name="images/img2.gif" /> 
      <file name="images/img3.gif" /> 
      <directory name="images/delta">
         <file name="images/delta/img4.gif" /> 
         <file name="images/delta/img5.gif" /> 
      </directory>
      <file name="images/img6.gif" /> 
   </directory>
</directory> 
```

**JAVASCRIPT**

```
function parse_files(path) {
    $.ajax({
        type: "GET",
        url: "list.xml",
        dataType: "xml",
        success: function(xml) {

            $(xml).find('directory').each(function(){
                if($(this).attr('name')==path) {

                    $(this).find('file').each(function(){
                        var list = $(this).attr('name');
                        alert(list);
                    });
                 }
            });
        }

    });
}

parse_files("images");
// returns img2,img3,img4,img5,img6
// should return img2,img3,img6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:14:05.007

Find only direct children with `children()`, or `find(' > file')` or with context `$(' > file', this)` etc, as just `find()` finds *all* descendents, even the ones that are nested further down in the next directory :

```
$(xml).find('directory').each(function(){
     if($(this).attr('name')==path) {
         $(this).children('file').each(function(){
             var list = $(this).attr('name');
             alert(list);
         });
     }
}); 
```

# php - 使用大数组与 SQL 连接有什么更好的方法？

> ID：15719986
> 
> 赞同：2
> 
> 时间：2013-03-30T15:06:40.073
> 
> 标签：php, arrays, join

我不能决定 w/c 技术去 w/... 尽管我很想采用 Array 方式，因为它更直接并且更容易/更清洁编码......

让我用简单的方式解释..

对于我的消息传递应用程序，我有 2 个表

1.  联系人 - 包含姓名和电话号码（目前有 5,000 多条记录）
2.  消息 - 消息和电话号码，但不是成员的姓名

如果可能的话，我需要列出 1000 条消息，包括相应的电话号码和姓名……

例如。

1.  “嗨，伙计” - 来自 565-1111（约翰）
2.  “带奶酪” - 来自 565-2222（比伯）
3.  “呵呵呵呵” - 来自 565-2332
4.  “钢铁侠好帅！” - 从 565-7748 (阿尼)

ETC...

我通常会通过电话号码将联系人加入到消息中......非常标准的东西......（但实际上我的查询比简单的左连接要复杂一些）

现在，我一直在玩弄获取所有联系人并将其放入数组中的想法，我的应用程序/系统可以在其中以更简单、更直接和更简洁的代码使用它......其中：

1.  询问`SELECT * contacts`

并将它们存储到一个数组中：

```
contacts['555-7748'] = "John";
contacts['555-1111'] = "Joe";
contacts['555-2233'] = "Borat";
contacts['555-4234'] = "Arnie";
etc 
```

这样，我可以通过访问数组轻松查找联系人的名称，在我的页面/脚本中多次，只需执行以下操作：

```
$name = contacts[$phoneNumber]; 
```

我实际上已经实现了这一点，它真的很酷.. 没有更多的加入头痛和重新查询联系人表等..

现在的问题是..这样可以吗？实际的？或者我可以在这里达到一些内存上限或其他东西吗？

它基本上是在我的脚本输出的每条消息上运行 JOIN 查询或将所有联系人/记录存储到数组（内存）中并引用它，使查询更简单.. 我唯一担心的是，将数千条记录查询到一个数组中，可能是不是有点过分？或者这真的可以/实用吗？特别是因为有时我的脚本需要多次获取特定联系人......

另外，我还考虑将该数组存储到 Session 变量中！大声笑..所以我的脚本可以简单地共享这些数据..大声笑

期待一些好的投入谢谢大家。

* * *

---- 2013 年 3 月 31 日（星期日）更新 ----

* * *

好的......我现在正在考虑一种完全不同的方法......

1）因为这一切真的是我需要为每条消息显示“联系人姓名”以用于整洁/演示目的（最好在消息上看到联系人的姓名而不是电话号码是吗？）....

2）并且由于每条消息都需要根据他们在 MESSAGES 表中的电话号码显示 2 个联系人姓名（收件人和发件人）.....

3）我现在正在考虑将 2 个字段添加到 MESSAGES 表中......“sender_name”和“receiver_name”..我已经看到公告板/论坛软件大量使用这种技术..

4）当系统收到一条消息时，它会检查与消息相关联的号码的现有联系人条目......如果存在，获取相应的名称并将其包含到存储/插入中

5）..问题是如果在收到消息期间，联系信息不可用，因此没有保存姓名..然后创建联系信息......旧消息不会按预期显示联系人姓名......

6）3路解决方案... 1st，每次添加/更改新联系人时，我的php都会更新所有带有匹配号码的消息... 2nd，不时可能每月一次，运行“同步例程” “以确保事情是同步的..或者，当用户实际打开一条消息时，将运行强制例程以检查该特定消息的联系人姓名是否仍然与联系人表信息同步......并进行更新必要的..

嗯...更好地接近你的东西？这样，我只需要发出直接的 SELECT 查询，简单，快速..但能够显示名称..

话又说回来，我还是觉得 QUICK 数组引用的东西很酷.. lolz

*   优柔寡断

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:09:41.750

听起来您似乎已经决定如何进行，在这种情况下，我建议您寻找最有效的方法来管理您的列表。在我没有遇到过的会话中“共享”它（出于安全原因，他们不共享会话，或者不应该）。你把 redis.io 和 Memcached 说得太复杂了。

您可以做到这一点并将其对效率的影响降到最低的一种方法是设置 CRON 或配置一些工作人员定期运行将`contacts`表输出到 PHP 可解析文件的脚本。

例如：

```
<?php

// Let's not run this if the app isn't accessing it.
if (!defined('APP_RUNNING_CONST')) {
    header('HTTP/1.1 401');
    exit;
}

$contacts = $db->query()... // Get the contacts list.
$lines = array();
$num_contacts = $contacts->getRows();

while ($contact = $contacts->nextRow()) {
    $contact->field->contactname = addslashes($contact->field->contactname);

    array_push($lines, "\$contacts['$contact->field->phone'] => '$contact->field->name';");
}

if (!empty($lines)) {
    $o_array = implode(PHP_EOL, $lines);
    $c_date = date('r');

    $o_array = "<?php

// CRON contact table cache to array
// Saved $c_date by __file__
// Number rows: $num_contacts

$contacts = array();
$o_array

";
}

// Write the PHP file over the last:
$contactsfilename = 'contacts.php' ... 
```

那么你需要做的就是

```
include '/secure/lists/contacts.php'; 
```

在您需要它的页面中。您还应该注意如何替换文件（完成后复制、保存和删除）。

您可以进行的其他一些改进可能是为每个区号/前缀输出文件......

```
contacts.403.555.inc.php
contacts.403.585.inc.php
contacts.461.550.inc.php 
```

然后创建一个函数，仅在需要时自动加载适当的文件组（“延迟加载”），并使用`static`变量将引用保留在函数中。这也克服了`global`变量问题，并有助于保持*功能*代码在中心位置访问文件。当然，您可以使用一个类，也许可以使用一个数组接口实现。

无论如何，另一种选择可能是使用[ini 文件](http://www.php.net/manual/en/function.parse-ini-file.php)格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T15:36:13.390

您可以访问数据库吗？如果是这样，我建议创建一个视图，以便您的 PHP 查询更简单。也许这会为你简化事情。我仍然建议使用查询而不是简单的大数组。话虽如此，如果您知道要在这些设备上施加的负载并且阵列工作正常，则没有任何理由避免它。最佳实践是好的，但是为了便于编码，有一些话要说，这会带来更好的维护。

# asp.net - onitemdatabound 在回发后不起作用

> ID：15719987
> 
> 赞同：1
> 
> 时间：2013-03-30T15:07:15.923
> 
> 标签：asp.net, repeater, selectedindexchanged, itemdatabound

这是我的页面代码。我只想显示我的记录。页面上还有搜索面板。在搜索面板中，有几个下拉列表控件，它们具有 OnSelectedIndexChanged 方法。当我更改第一个下拉列表中的选定项目时，属于中继器的 onItemDatabound 事件不再起作用。

相反会发生什么：在这种情况`ItemDataBound`下，我会在面板上动态添加每条记录的图片。因此，当我更改下拉列表的选定项目时，图片会消失。

```
 protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        DataBindToPage();            
    }
}

protected void DataBindToPage()
{
    rptLast.DataSource = EntitiyProvider.GetAdvertListLatest();
    rptLast.DataBind();

    rptSchool.DataSource = EntitiyProvider.GetAdvertListLatest("Ders Kitabı");
    rptSchool.DataBind();

    rptBook.DataSource = EntitiyProvider.GetAdvertListLatest("Edebi Eser");
    rptBook.DataBind();
}

protected void rptLast_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.AlternatingItem || e.Item.ItemType == ListItemType.Item)
    {
        Advert adv = (Advert)e.Item.DataItem;            
        Panel pnlLastAdvertPic = (Panel)e.Item.FindControl("pnlLastAdvertPic");
        List<AdvertPicture> advPic = EntitiyProvider.GetAdvertKapakPicByAdvertId(adv.id);
        if (advPic.Count != 0)
        {
            string picPath = string.Empty;
            foreach (AdvertPicture item in advPic)
            {
                if (item.primePicture == true)
                {
                    picPath = item.picturePath;
                }
            }
            if (picPath == string.Empty)
            {
                pnlLastAdvertPic.Controls.Add(new Image { ImageUrl = "~/uploads/" + advPic[0].picturePath, Width = 140, CssClass="rpTable" });
            }
            else
            {
                pnlLastAdvertPic.Controls.Add(new Image { ImageUrl = "~/uploads/" + picPath, Width = 140, CssClass = "rpTable" });
            }
        }
        else
        {
            pnlLastAdvertPic.Controls.Add(new Image { ImageUrl = "~/images/Noimage.gif", Width = 120, CssClass = "rpTable" });
        }

     }           

 } 
```

# prolog - 在 prolog 中获取命令行参数

> ID：15719988
> 
> 赞同：0
> 
> 时间：2013-03-30T15:07:19.160
> 
> 标签：prolog, command-line-arguments, swi-prolog

prolog 中是否有标准函数来获取调用编译的 prolog 可执行文件的参数？`get_arguments/0`或类似的东西？如果没有标准，是否至少有办法在 swi-prolog 中做到这一点？

# git - 使用 Git (Dreamhost) 部署站点不起作用

> ID：15719991
> 
> 赞同：2
> 
> 时间：2013-03-30T15:07:37.450
> 
> 标签：git, deployment, dreamhost

为了使用 Git 将项目部署到远程仓库，我完全按照本[指南中的说明进行操作。](http://blog.brandonevans.ca/post/19685508893/deploying-websites-with-git-on-dreamhost)当我这样做时没有错误，但远程站点上没有任何变化。我通过这个推送时看到了这个：

```
git push dreamhost master

Counting objects: 252, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (250/250), done.
Writing objects: 100% (252/252), 994.11 KiB, done.
Total 252 (delta 100), reused 0 (delta 0)
To ssh://[username]@bartow.dreamhost.com/home/[username]/[filename].git
 * [new branch]      master -> master 
```

我还有一个应该运行的接收后挂钩设置：

```
#!/bin/sh
git --work-tree=/home/timjaeger/[sitename] --git-dir=/home/timjaeger/[sitename].git
checkout -f 
```

由于我没有收到任何错误消息，因此很难知道如何解决这个问题 - 我从哪里开始？我是使用 Git 进行部署的初学者。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T18:06:10.507

将 post-receive 更改为：

```
#!/bin/sh
GIT_WORK_TREE=/home/timjaeger/[sitename].com git checkout -f 
```

工作。[这篇文章](http://toroid.org/ams/git-website-howto)有助于找到解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T17:19:46.790

如果你有一个工作树`/home/timjaeger/[sitename]`，那么你的 git repo 不能是`/home/timjaeger/[sitename].git`.

应该是`/home/timjaeger/[sitename]/.git`，但这会产生`/home/timjaeger/[sitename]`一个非裸仓库，直接推送是不明智的。

工作树应该与裸仓库 git 目录分开`/home/timjaeger/[sitename].git`。

通过*不*提及 git-dir 选项（[OP squeezemylime](https://stackoverflow.com/users/350119/squeezemylime) [推荐](https://stackoverflow.com/a/15721717/6309)），您可以将钩子当前执行目录保留在适当的位置（即，该钩子将在那里查看 git 存储库），同时指定不同的工作树。

# asp.net-mvc - 对象引用未设置为 asp.net mvc 控制器方法中的对象实例

> ID：15719992
> 
> 赞同：0
> 
> 时间：2013-03-30T15:08:04.860
> 
> 标签：asp.net-mvc, nullreferenceexception

我有一个“ System.NullReferenceException：对象引用未设置为对象的实例。” 每当我尝试插入新文章时出错......我在没有首先使用代码的情况下做了同样的事情，即我使用 ADO.net 数据模型来处理已经存在的 DB[Article 表、Tag 表和 ArticleTag 表]，它可以工作很好，但这次我尝试先使用代码 EF...我只是希望有人帮我调查一下，也许可以帮助指出我的错误....我总是可以先使用 DB，我将使用EDMX，但我真的很想弄错。

```
public class ControlPanelController : Controller
        {
            //
            // GET: /ControlPanel/

           private IPageRepository _repositoryOne;
           private IArticleRepository _repositoryTwo;
            private ITagRepository _repositoryThree;

            public ControlPanelController(IPageRepository repo, IArticleRepository repo2,ITagRepository repo3)
            {
                 _repositoryOne = repo;
                _repositoryTwo = repo2;
                _repositoryThree = repo3;

            } 
```

那是我的控制器......

以下是给出错误的方法....

```
 [HttpPost]
        [ValidateInput(false)]
        public ActionResult ArticleCreator(string title, string mainBody, string addedBy, DateTime dateAdded, string tags)
        {
            Article article = new Article();
            article.Title = title;
            article.ShortBody = ClassAction.TruncateAtWord(mainBody, 500);
            article.MainBody = mainBody;
            article.DateAdded = dateAdded;
            article.AddedBy = addedBy;
            tags = tags ?? string.Empty;
            string[] tagNames = tags.Split(new char[] { ' ' }, StringSplitOptions.RemoveEmptyEntries);
            foreach (string tagName in tagNames)
            {
                article.Tags.Add(GetTag(tagName));

            }

            _repositoryTwo.SaveArticle(article);
            return RedirectToAction("Index");
        }

 private Tag GetTag(string tagName)
        {
            return _repositoryThree.Tags.FirstOrDefault(x => x.Name == tagName) ?? new Tag() { Name = tagName };

        } 
```

我的实体看起来像这样

```
 public class Article
    {
        [Key]
        [HiddenInput(DisplayValue = false)]
        public int ArticleId { get; set; }

        public string Title { get; set; }
        public string ShortBody { get; set; }
        public string MainBody { get; set; }
        public DateTime DateAdded { get; set; }
        public String AddedBy { get; set; }

        public ICollection<Tag> Tags { get; set; } 

    }

 public class Tag
    {
        [Key]
        public int Id { get; set; }
        public string Name { get; set; }

        public ICollection<Article> Articles { get; set; } 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:15:00.523

你完全错了。

```
(string title, string mainBody, string addedBy, DateTime dateAdded, string tags) 
```

上面的线是错误的。您不想在操作结果中参数化。您可以传递您的模型类，然后您可以从模型类属性的 ..

请参考[：](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3)

**新****编辑**

```
[HttpPost]
        [ValidateInput(false)]
        public ActionResult ArticleCreator(string title, string mainBody, string addedBy, DateTime dateAdded, string tags)
        {
            Article article = new Article();
            article.Title = "TestTitle";
            article.ShortBody = "TestBody";
            article.MainBody = "TestMainBody";
            article.DateAdded = DateTime.Now;
            article.AddedBy = "TestName";
            tags = "Test  Tagssss";
            string[] tagNames = tags.Split(new char[] { ' ' }, StringSplitOptions.RemoveEmptyEntries);
            foreach (string tagName in tagNames)
            {
                article.Tags.Add(GetTag(tagName));

            }

            _repositoryTwo.SaveArticle(article);
            _repositoryTwo.SubmitChanges();
            return RedirectToAction("Index");
        } 
```

# php - 如何为数组中的每一行创建新的 php 邮件实例

> ID：15719994
> 
> 赞同：0
> 
> 时间：2013-03-30T15:08:19.033
> 
> 标签：php, email

这是php：

```
mysqli_connect("path","my_db","password")or die(); 
mysqli_select_db("my_db")or die();
$query="SELECT * FROM table WHERE type = '$var' OR type = '$othervar'";
$result=mysqli_query($query);
$num=mysqli_numrows($result);
mysqli_close();
$i=0;
while ($i < $num) {
$email=mysqli_result($result,$i,"email");
$i++;

if (!empty($email)) {
mail($email, $subject, $body, $headers);
} 
```

我省略了为 $subject 等分配值的脚本，因为当查询仅返回 1 个电子邮件地址时，我能够成功发送电子邮件。

但是，当查询返回多个电子邮件地址时，我无法发送任何内容。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T16:46:51.593

在我的查询末尾添加“GROUP BY ...”最终对我有用。因为我是一个完全的业余爱好者，我不知道为什么:)

最终代码：

```
mysqli_connect("path","my_db","password")or die(); 
mysqli_select_db("my_db")or die();
$query="SELECT * FROM table WHERE type = '$var' OR type = '$othervar' GROUP BY email";
$result=mysqli_query($query);
$num=mysqli_numrows($result);
mysqli_close();
$i=0;
while ($i < $num) {
$email=mysqli_result($result,$i,"email");
$i++;

if (!empty($email)) {
mail($email, $subject, $body, $headers);
} 
```

# ruby-on-rails - git push heroku master - FAIL

> ID：15719998
> 
> 赞同：0
> 
> 时间：2013-03-30T15:09:02.370
> 
> 标签：ruby-on-rails, heroku, git-push

I added an SSH key to Github for committing my code. Everything worked perfectly. Then I tried to commit to Heroku to get my app live using the following steps:

```
[omrails]$heroku keys:add
# Found the following SSH public keys:
# 1) github_rsa.pub 2) id_rsa.pub

# Which would you like to use with your Heroku account? 2 
# Uploading SSH public key /Users/jackburum/.ssh/id_rsa.pub... done

[omrails]$heroku create

# Creating calm-earth-1147... done, stack is cedar
# http://calm-earth-1147.herokuapp.com/ |
# git@heroku.com:calm-earth-1147.git

[omrails]$git push heroku master

# !  Your key with fingerprint *************** is not authorized to access omrails.
# fatal: The remote end hung up unexpectedly 
```

Then I tried clearing the Heroku keys (heroku keys:clear) and adding the keys again... to no avail. I also changed my SSH key in Github to see if that was the problem. What can I do differently?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:56:47.847

I also struggled with SSH keys, specially due to my multiple accounts on Heroku. Then I found this [https://github.com/ddollar/heroku-accounts](https://github.com/ddollar/heroku-accounts) which does an amazing job helping you use multiple accounts on Heroku.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:07:34.173

Right now your I will guess that 'heroku' origin is pointing at an incorrect Heroku application. To fix this perform the following.

1.  Remove the `heroku` origin - `git remote rm heroku`
2.  Readd the `heroku` origin pointing at calm-earth-1147 app - `git remote add heroku git@heroku.com: calm-earth-1147.git`
3.  confirm it added correctly, `git remote -v`