# StackOverflow 问答 15639000-15639999

# oracle - 用于 oracle 数据库的存储过程生成器工具 (CRUD)

> ID：15639000
> 
> 赞同：0
> 
> 时间：2013-03-26T14:01:32.357
> 
> 标签：oracle

我有一个 oracle 数据库，想要一种简单的方法来为 crud 生成存储过程（创建、检索、更新、删除）。我一直在四处寻找，找不到任何可以完成这项工作的明显工具......

你有什么可以建议的吗？如果它也可以以某种方式修改，我会很高兴，因为我有我希望程序拥有的特定名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:35:37.783

我没有使用它，但有一个来自 ToadWorld 的 API 生成器：[http ://www.toadworld.com/Downloads/QuestCodeGenUtilityFreeware/tabid/686/Default.aspx](http://www.toadworld.com/Downloads/QuestCodeGenUtilityFreeware/tabid/686/Default.aspx)

上述链接**无效**或目标已**删除**。

# php - 如何使用 PHP 和 Imagick 创建动画 GIF 的静态预览？

> ID：15639001
> 
> 赞同：1
> 
> 时间：2013-03-26T14:01:37.440
> 
> 标签：php, preview, imagick

我不知道如何使用 Imagick 模块创建动画 GIF 的静态预览。有没有办法获得第一帧动画图像并保存为 GIF？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T14:58:21.303

我找到了一个解决方案：

```
$image = new Imagick('animation.gif');
$image = $image->coalesceImages();
foreach ($image as $frame) {
    $frame->cropThumbnailImage(90, 90);
    break;
}
$frame->writeImage('frame.gif'); 
```

我不知道如何从图像序列中引用第一帧，所以不得不做一个循环并立即中断。如果有人知道该怎么做，请告诉我。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:14:18.110

要在 JavaScript 中执行此操作，请查看：[http ://slbkbs.org/jsgif/](http://slbkbs.org/jsgif/)

如果您想在服务器端执行此操作，请查看 ImageMagick：[http ://www.imagemagick.org/script/index.php](http://www.imagemagick.org/script/index.php)

尽管 ImageMagick 需要存在于您的服务器上，并且 PHP 必须能够访问它。

**用法：**

```
convert 'image.gif[0]' singleframe.gif 
```

# php - Magento：无法为带有发票的订单创建装运

> ID：15639006
> 
> 赞同：2
> 
> 时间：2013-03-26T14:01:51.330
> 
> 标签：php, magento, magento-1.5

我在以编程方式为某些订单创建发货时遇到问题。对于没有发票的订单，他们可以毫无问题地发货。

我已经在这里粘贴了我的代码，你能帮我解决这个问题吗？

```
<?php 
 /*
check if orderId is set    
*/
if(isset($orderId)){
$Semail = false;
$includeComment = true;
$shipment = false;

/*
Update order control systems table with tracking 
*/
$dispatchOrder  = $sql->query("update _trackingOrders SET trackingNumber =   '".$trackingNumber."' where order_number = '".$orderId."'");
$dispatchOrderCustomer  = $sql->query("update _trackingCustomer SET orderStatus =  'dispatched' where order_number = '".$orderId."'");
/*
End of updates
   */

if(($dispatchOrder)&&($dispatchOrderCustomer)){

 /*
 Load order by id
 */
 $order = Mage::getModel('sales/order')->load($orderId);

 /*
 check if order exist
 */
  if (!$order->getId()) {
            echo 'The order no longer exists.';
            return false;
        }
**EDIT:**
    /*
check if order can be invoiced
*/
        if(!$order->canInvoice()){
            echo 'order can not be invoiced';
            return false;
        }
/*
check if order can be ship
*/
    if (!$order->canShip()) {
   echo 'Order can not be shipped';
   return false;
    }
     /*
    * New shipment coding begins here 
    */      
     $shipment = Mage::getModel('sales/service_order', $order)->prepareShipment();

      /*
      **END OF EDIT**
      */
/* 
get all items from the order
*/
foreach ($order->getAllItems() as $orderItem) {

if (!$orderItem->getQtyToShip()) {
    continue;
}
if ($orderItem->getIsVirtual()) {
    continue;
}

$item = $convertor->itemToShipmentItem($orderItem);

$qty = $orderItem->getQtyToShip();

$item->setQty($qty);
$shipment->addItem($item);
}   

/*
shipment details
*/
$tracking = array();
$tracking['carrier_code'] = 'Royalmail';
$tracking['title'] = $shippingMethod;
$tracking['number'] = $trackingNumber;

/*
add shipment tracking details
*/
$track = Mage::getModel('sales/order_shipment_track')->addData($tracking);
$shipment->addTrack($track);

/*
register current shipment
*/
Mage::register('current_shipment_'.$orderId.'', $shipment);

/*
register shipment
add comment to shipment
send shipment email
*/  
$shipment->register();
$shipment->addComment($comments, $Semail && $includeComment);
$shipment->setEmailSent(true);

/*
set order state as processign
set order is in process
set order status as complete
*/
$shipment->getOrder()->setState(Mage_Sales_Model_Order::STATE_PROCESSING, true);
$shipment->getOrder()->setIsInProcess(false);
$shipment->getOrder()->setStatus('complete');

/*
get shipment order
add statushistory
*/
$_order = $shipment->getOrder();
$_order->addStatusHistoryComment($comments, 'complete')
                ->setIsVisibleOnFront(1)
                ->setIsCustomerNotified(1);
        $_order->sendOrderUpdateEmail('1', $comments);
   $_order->save();

/*
save transactions
*/
$transactionSave = Mage::getModel('core/resource_transaction')
->addObject($shipment)
->addObject($shipment->getOrder())
->save();

echo "order has been dispatched";
?> 
```

提前致谢。

杰伊

# php - 从 SimpleXML 到变量

> ID：15639010
> 
> 赞同：0
> 
> 时间：2013-03-26T14:02:00.170
> 
> 标签：php, arrays, simplexml

我正在阅读带有 SimpleXML 的 XML。在这种模式下创建一个节点：

```
$docType    = $doc->DocumentType; 
```

如果我做

```
print_r($docType); 
```

我越来越：

```
SimpleXMLElement Object ( [0] => B ) 
```

这是正确的。现在，我需要“简单地”将“B”放入一个变量中，以实现这个目标：

```
$daneadoc['B'] = 'Scontrino / Vendita al banco';
$daneadoc['I'] = 'Fattura'; 
```

（我有一个用于“daneadoc”的多个值的数组）。

显然，如果我把

```
echo $daneadoc[$docType]; 
```

这是非法偏移类型

但如果我写

```
 $documento = $docType[0];
 echo $daneadoc[$documento]; 
```

我的服务器说相同（非法类型）。如果我写也一样

```
 echo $daneadoc[$docType[0]]; 
```

我的问题是...如何将 obkect 转换为单个变量以放入数组 $daneadoc 中？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:18:45.167

我不确定我是否理解您的问题，但请尝试：

```
$docTypeString = (string) $docType;
$daneadoc[$docTypeString] = 'Scontrino / Vendita al banco'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:07:53.437

您在寻找[`getName()`](http://www.php.net/manual/en/simplexmlelement.getname.php)方法吗？您想检索标签名称吗？

像这样使用它：`$docType->getName()`

# c# - C# OLEDB 保护查询中的撇号

> ID：15639024
> 
> 赞同：2
> 
> 时间：2013-03-26T14:02:28.320
> 
> 标签：c#, string, excel, insert, oledb

我试图找到一种方法来保护我的查询字符串中的撇号。我有一个包含撇号的字符串格式的值，当我尝试插入时它会抛出一个错误

前任 ：

```
Insert into ["excelApp.worksheetsList.ElementAt(0).Name "$"] " + ([col1], [col2]) 
values values" + " ('" + val1 + "', '" + val2 + "');") 
```

这是一个例子。这里 val1 包含“hereIsMy'value”。

谢谢你帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:04:28.837

您应该使用参数化查询，您不必担心查询中的单引号

```
using(OleDbConnection cn = new OleDbConnection(GetConnectionString()))
{
    cn.Open();
    string cmdText = "Insert into [" + excelApp.worksheetsList.ElementAt(0).Name + "$] " +   
                     "([col1], [col2]) values (?, ?)";
    OleDbCommand cmd = new OleDbCommand(cmdText, cn)
    cmd.Parameters.AddWithValue("@p1", val1);
    cmd.Parameters.AddWithValue("@p2", val2);
    cmd.ExecuteNonQuery();
} 
```

在此示例中，您的命令文本由单个字符串组成，其中包含参数值的占位符。然后声明一个命令对象具有该字符串，并在其参数集合中添加两个参数。它们是根据作为值传递的变量类型创建的。因此，如果 val1 和 val2 是字符串并且存在单引号（撇号），则它会自动格式化为插入/删除/更新或请求的选择操作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T14:04:13.433

使用[参数化命令](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html)，您就不必担心这些事情了。您不必担心撇号和一堆其他问题。

# c++ - 通过网页和 QWidgets 设置 CSS 样式

> ID：15639030
> 
> 赞同：0
> 
> 时间：2013-03-26T14:02:43.873
> 
> 标签：c++, css, qt, qtwebkit, qwidget

我正在创建一个 Qt 应用程序，其中一些网页加载在 QWebViews 上，还有一些普通的 QWidgets，都在 QMainWindow 内。网页和小部件都会在这里和那里有一些复选框，我希望它们看起来一样。好吧，起初它们看起来确实一样，因为它们从本机主题引擎继承了它们的样式，但我想为两者定义一个新的 CSS 样式。

我尝试了一些类似的东西

```
QCheckBox::indicator:unchecked {
    image: url(:/image/checkbox_unchecked.png);
} 
```

但这仅适用于我的 QWidgets 中的复选框。

我也尝试了一些简单的 CSS 样式，但它们只适用于网页复选框。

那么，有没有一种方法可以为复选框设计单一的 CSS 样式并将其应用于我的应用程序中的各种复选框？

作为记录，在文本选择方面，我完全可以做到这一点。我将主窗口样式表设置为

```
*{
    selection-color: #363636; selection-background-color: #bfebeb;
} 
```

网页和 qwidget 选择都遵循这种风格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:01:40.400

**更新**
将您的代码更改为

```
QCheckBox:!checked {
    image: url(:/image/checkbox_unchecked.png);
}

QCheckBox:checked {
    image: url(:/image/checkbox_unchecked.png);
} 
```

[http://harmattan-dev.nokia.com/docs/library/html/qt4/stylesheet-syntax.html](http://harmattan-dev.nokia.com/docs/library/html/qt4/stylesheet-syntax.html)

# ruby-on-rails - 使用设计/cancan 进行生产的 Rails wiki gem - 非个人使用

> ID：15639039
> 
> 赞同：3
> 
> 时间：2013-03-26T14:03:05.563
> 
> 标签：ruby-on-rails, devise, wiki, cancan, gollum-wiki

我一直在研究在现有 Rails 应用程序中用于生产的 wiki，而不是供个人使用 - 在这里看到了一些关于 wiki gems 的问题，但很少用于个人使用。Gollum 似乎很容易在本地运行，但是对于可能有多个用户/组且每个用户/组都有自己的安全 wiki 的生产环境，它是一个不错的选择吗？

除了咕噜，我还研究了[Instiki](http://www.instiki.org/show/HomePage)、[zena](http://zenadmin.org/en/documentation/Wiki/page735.html)和[Wagn](http://wagn.org/)。

需要考虑的一些生产要求：

1.  需要与现有模型和存储配合得很好——rails 应用程序已经在使用 S3 存储媒体（视频、图像）——这些相同的资产将与 wiki 结合。
2.  需要能够为我公司内的群组创建单独的 wiki - 与 devise/cancan 集成似乎并不太困难。为用户/组添加单独的存储库是否容易？
3.  这是一个供内部使用的通用 wiki - 来自人力资源、财务、营销等的非技术员工也将以不同级别的访问权限使用它。因此，希望将文本编辑器换成更用户友好的东西，例如[这个 wysihtml5 文本编辑器](http://jhollingworth.github.com/bootstrap-wysihtml5/)。

在投入太多时间之前，我应该关注 Gollum 的灵活性吗？非常感谢任何建议，希望这对其他人有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-26T17:32:17.827

好问题。

我建议查看[https://www.ruby-toolbox.com/categories/wiki_apps](https://www.ruby-toolbox.com/categories/wiki_apps)而不是询问 stackoverflow 的一般情况。

看起来咕噜是最流行的解决方案。

对于任何 Rails 引擎，您都必须根据需要对其进行自定义。

# php - 仅在 2 个服务器 mysql 上插入更新修改的字段

> ID：15639044
> 
> 赞同：0
> 
> 时间：2013-03-26T14:03:26.680
> 
> 标签：php, mysql

我在 2 个不同的位置有 2 个 sql 服务器。

一个是 Web 服务器，另一个是 crm 系统。

人们在网络上更新和注册，当他们进行更改时，我需要将更改插入或更新到我的 crm 服务器。

我在 Web 服务器上有一个视图，我可以从中进行选择，但我需要

```
insert into on duplicate update only fields that changed and then in a description 
show     
wich fields were updated? 
```

我不知道如何开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:08:53.767

也许是这样的？

INSERT INTO table ON DUPLICATE UPDATE table SET field = value WHERE field != 'value' 你可能想看看这个是否有[受影响的行](http://php.net/manual/en/mysqli.affected-rows.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:12:42.553

更改字段后，您无法确定字段的差异。

但是，您可以在更新之前选择并存储内容，然后将其与新内容进行比较。

那么问题就变成了：你需要**每列**的差异吗？

*   如果是：预先选择并自己做不同的事情（在应用程序中）。
*   如果否：使用@Ogelami 描述的方法（并接受他的回答：）

附带说明：当您开始使用多个 mysql 服务器时，Pre-Select 将无法正常工作，因为您可能会遇到数据漂移的问题（即，一个服务器在插入的数据中落后）。发生这种情况时，该方法将变得更加复杂。

# sql-server - T-SQL 选择有条件的连接

> ID：15639048
> 
> 赞同：4
> 
> 时间：2013-03-26T14:03:32.750
> 
> 标签：sql-server, tsql, join, max

假设我有 3 张桌子：

1.  **汽车**

    *   ID
2.  **汽车颜色历史**

    *   ID
    *   车牌
    *   颜色ID
    *   修改日期
3.  **颜色**：

    *   ID
    *   颜色名称

我想选择所有汽车及其颜色，但重要的是，汽车的颜色是`CarColorHistory`表中最后修改的颜色。

我需要使用 join 来做到这一点。

例子：

汽车：

```
1
2 
```

汽车颜色历史：

```
1 1 1 26/03/2012  -> (actual color, can be take by date or id)
2 1 2 25/03/2012
3 2 2 25/03/2012 
```

颜色：

```
1 Blue
2 Red 
```

我需要得到结果：(car id, colorName)

```
1 Blue
2 Red 
```

我尝试通过加入 Cars 表和 CarColorHistory 表来实现它，但我得到了所有颜色的汽车。我只需要实际颜色（最后添加）。

请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T14:12:33.623

尝试这个：

```
select c.id, colorname
from cars c
inner join CarColorHistory h on c.id = h.CarID
inner join Color c2 on h.colorid = c2.id
where h.ModificationDate = (select max(ModificationDate)
                            from CarColorHistory x where c.id = x.CarId) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T14:14:16.667

有几种方法可以获得结果。您可以使用子查询来获取`max(modificationdate)`：

```
select c.id, r.colorname
from cars c
inner join CarColorhistory h1
  on c.id = h1.carid
inner join
(
  select max(modificationdate) MaxDate,
    carid
  from CarColorhistory
  group by carid
) h2
  on h1.carid = h2.carid
  and h1.modificationdate = h2.maxdate
inner join color r
  on h1.colorid = r.id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/fbf087/3)

或者由于您使用的是 SQL Server，您可以使用[排名函数](http://msdn.microsoft.com/en-us/library/ms189798.aspx)：

```
select id, colorname
from
(
  select c.id, r.colorname,
    row_number() over(partition by c.id order by modificationdate desc) rn
  from cars c
  inner join CarColorhistory h1
    on c.id = h1.carid
  inner join color r
    on h1.colorid = r.id
) src
where rn = 1; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/fbf087/7)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T14:10:25.730

这应该为您解决问题：

```
SELECT c.id, (
    SELECT co.ColorName FROM Color co
    WHERE co.id = (
        SELECT TOP 1 ColorID FROM CarColorHistory
        WHERE CarID = c.id
        ORDER BY ModificationDate DESC
    )
 ) AS ColorName 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T14:22:42.447

如果你有`Sql Server 2005`或更大，你可以试试这个：

你可以在这里试试，效果如何`Common table expression`：[Sql Fiddle demo](http://www.sqlfiddle.com/#!3/3ab1d/6)

```
 ;WITH CTE_Cars(CarID, MaxDate)
    AS
    (
    SELECT CarID, MAX(ModificataionDate) AS MaxDate
    FROM CarColorHistory
    GROUP BY CarID
    )
    SELECT CTE_Cars.CarID, Color.ColorName
    FROM 
    CTE_Cars
    INNER JOIN CarColorHistory ON CarColorHistory.CarID = CTE_Cars.CarID AND
    CarColorHistory.ModificataionDate = CTE_Cars.MaxDate
    INNER JOIN Color ON Color.id = CarColorHistory.ColorId 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T14:18:59.713

一种方法可能是只使用子查询，就像之前发布的那样，因为您使用的是 t-sql，您也应该能够通过应用来做到这一点：

```
SELECT
        Cars.Id, LatestColors.ColorID, LatestColors.ModificationDate
    FROM Cars
    CROSS APPLY (
        SELECT TOP 1
                ColorID, ModificationDate
            FROM CarColorHistory
            WHERE CarID = Cars.ID
            ORDER BY ModificationDate DESC
    ) AS LatestColors 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T14:30:32.797

我不确定这是否是最好的方法，但我就是这样做的。首先使用 MAX 从表格中获取您想要的值，然后将该结果用作表格`JOIN`以消除不需要的值。

```
SELECT c.ID, Color.Color
From Cars c JOIN CarColorHistory h on c.id = h.CarID
     JOIN Color on h.ColorID = Color.ID
     JOIN

    --Create a table with only the latest value and the car ID
    ( 
    SELECT c.ID, Max(h.TimeStamp) as time
    FROM Cars c JOIN CarColorHistory h on c.id = h.CarID
         JOIN Color on h.ColorID = Color.ID
    Group by c.ID --Join the table on latest time to get rid of old timestamps
    ) Max on Max.ID = c.ID and h.TimeStamp=max.time 
```

# java - 不同尺寸屏幕的布局（Android）

> ID：15639050
> 
> 赞同：0
> 
> 时间：2013-03-26T14:03:33.190
> 
> 标签：java, android, android-layout, dpi

我正在开发一个应用程序，它在 7 英寸设备（Nexus 和 Dell streak 7）上看起来很棒。我创建了不同密度的图像，所以看起来不错。

但是，当我尝试在我的手机（三星 Galaxy 2）或平板电脑 10 上运行该应用程序时，它看起来一点也不好看。

这是它在nexus 7上的样子：

![在此处输入图像描述](../Images/7645e377db7efd7e038a824bb3225ed9.png)

以下是它在 Galaxy 2 手机上的外观： ![在此处输入图像描述](../Images/d10adbc50f0b4daa381528004a2fd00a.png)

以下是它在 10 英寸平板电脑上的外观：

![在此处输入图像描述](../Images/c412b8e6180084487655e5591363c3ec.png)

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:background="@drawable/background1" >
    <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >
        <TextView
                android:id="@+id/textView1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="10dp"
                android:gravity="center"
                android:text="@string/tour_menu"
                android:textSize="@dimen/font_large" />   
    </LinearLayout> 
    <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >
        <TextView
                android:id="@+id/tour_info"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:textSize="@dimen/font_medium" />   
    </LinearLayout> 
    <TableLayout  
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:paddingLeft="5dp"
            android:shrinkColumns="*"
            android:paddingRight="5dp"
            android:orientation="vertical" >
        <TableRow
                android:id="@+id/tableRow1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >
            <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >
                <ImageButton
                        android:id="@+id/passenger_list"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginRight="10dp"
                        android:layout_marginLeft="10dp"
                        android:gravity="center_horizontal|center_vertical"
                        android:background="@drawable/pax_list"
                        android:contentDescription="@string/pass_list"  />    
                <TextView
                        android:id="@+id/passenger_list_text"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center"
                        android:text="@string/pass_list"
                        android:textSize="@dimen/font_medium" />
            </LinearLayout>
            <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >
                <ImageButton
                        android:id="@+id/arrivals"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:gravity="center_horizontal|center_vertical"
                        android:background="@drawable/arrivals"
                        android:layout_marginRight="10dp"
                        android:layout_marginLeft="10dp"
                        android:padding="44dp"
                        android:contentDescription="@string/arrivals" />
                <TextView
                        android:id="@+id/arrivals_text"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center"
                        android:text="@string/arrivals"
                        android:textSize="@dimen/font_medium" />
            </LinearLayout>
            <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >
                <ImageButton
                        android:id="@+id/departures"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginRight="10dp"
                        android:layout_marginLeft="10dp"
                        android:background="@drawable/departures"
                        android:contentDescription="@string/departures" />
                <TextView
                        android:id="@+id/departures_text"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center"
                        android:text="@string/departures"
                        android:textSize="@dimen/font_medium" />
            </LinearLayout>
            <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >
                <ImageButton
                        android:id="@+id/master_rooming"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginRight="10dp"
                        android:layout_marginLeft="10dp"
                        android:background="@drawable/master_rooming_list"
                        android:contentDescription="@string/rooming" />
                <TextView
                        android:id="@+id/master_rooming_text"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center"
                        android:text="@string/rooming"
                        android:textSize="@dimen/font_medium" />        
            </LinearLayout>
        </TableRow>
        <TableRow
                android:id="@+id/tableRow2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:paddingTop="50dp" >
            <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >
                <ImageButton
                        android:id="@+id/itinerary"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginRight="10dp"
                        android:layout_marginLeft="10dp"
                        android:background="@drawable/itinerary"
                        android:contentDescription="@string/itinerary" />   
                <TextView
                        android:id="@+id/itinerary_text"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center"
                        android:text="@string/itinerary"
                        android:textSize="@dimen/font_medium" />    
            </LinearLayout>
            <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >
                <ImageButton
                        android:id="@+id/voucher"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginRight="10dp"
                        android:layout_marginLeft="10dp"
                        android:background="@drawable/vouchers"
                        android:contentDescription="@string/voucher" />  
                <TextView
                        android:id="@+id/voucher_text"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center"
                        android:text="@string/voucher"
                        android:textSize="@dimen/font_medium" />
            </LinearLayout>         
            <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >

                <ImageButton
                        android:id="@+id/qa"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginRight="10dp"
                        android:layout_marginLeft="10dp"
                        android:background="@drawable/qa_list"
                        android:contentDescription="@string/qa" />  

                <TextView
                        android:id="@+id/qa_text"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center"
                        android:text="@string/qa"
                        android:textSize="@dimen/font_medium" />
            </LinearLayout>
            <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >
                <ImageButton
                        android:id="@+id/optionals"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginRight="10dp"
                        android:layout_marginLeft="10dp"
                        android:background="@drawable/optionals"
                        android:contentDescription="@string/itinerary" />   
                <TextView
                        android:id="@+id/optionals_text"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center"
                        android:text="@string/optionals"
                        android:textSize="@dimen/font_medium" />
            </LinearLayout>
        </TableRow> 
        <TableRow
                android:id="@+id/tableRow3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:paddingTop="50dp" >
            <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >
                <ImageButton
                        android:id="@+id/flights"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginRight="10dp"
                        android:layout_marginLeft="10dp"
                        android:background="@drawable/flights"
                        android:contentDescription="@string/itinerary" />   
                <TextView
                        android:id="@+id/flights_text"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center"
                        android:text="@string/flights"
                        android:textSize="@dimen/font_medium" />
            </LinearLayout>             
            <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >
                <ImageButton
                        android:id="@+id/close_tour"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginRight="10dp"
                        android:layout_marginLeft="10dp"
                        android:background="@drawable/close_tour"
                        android:contentDescription="@string/close" />  

                <TextView 
                        android:id="@+id/close_tour_text"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center"
                        android:text="@string/close"
                        android:textSize="@dimen/font_medium" />                    
            </LinearLayout>
                <!--
            <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >
                <ImageButton
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginRight="10dp"
                        android:layout_marginLeft="10dp"
                        android:background="@drawable/icon"
                        android:contentDescription="@string/voucher" />  
                <TextView
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center"
                        android:text="@string/voucher"
                        android:textSize="@dimen/font_medium" />
            </LinearLayout>         
            <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >

                <ImageButton
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginRight="10dp"
                        android:layout_marginLeft="10dp"
                        android:background="@drawable/icon"
                        android:contentDescription="@string/qa" />  

                <TextView
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center"
                        android:text="@string/qa"
                        android:textSize="@dimen/font_medium" />
            </LinearLayout>
            <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >
                <ImageButton
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginRight="10dp"
                        android:layout_marginLeft="10dp"
                        android:background="@drawable/icon"
                        android:contentDescription="@string/close" />  

                <TextView 
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center"
                        android:text="@string/close"
                        android:textSize="@dimen/font_medium" />
            </LinearLayout>  -->    
        </TableRow> 

    </TableLayout>
    <!-- Time Stamp at the bottom of the screen -->
    <TextView
            android:id="@+id/timeStamp"
            android:layout_weight="1"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:gravity="bottom|center"
            android:textSize="@dimen/font_medium" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:15:04.633

好的，看到你的布局文件后，我认为你应该做以下事情之一：

1.  使用 GridView
2.  使用 ImageView 而不是 ImageButtons

使用 GridView 可以为您节省大量工作。看看这个网站，你可能会找到你需要的东西：[http ://www.androidviews.net/](http://www.androidviews.net/)

如果您选择使用 ImageViews，则应设置以下首选项：

```
adjustViewBounds="true"
scaleType="centerInside" 
```

这样，您的图像将保持其比例。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T14:40:53.813

您可能还会考虑将布局切换到 GridLayout。Cyril Mottier 讨论了它如何帮助扁平化视图层次结构。它还可能为您提供您可能正在寻找的简单、开箱即用的解决方案。

[https://plus.google.com/118417777153109946393/posts/FugJcLCfkWm](https://plus.google.com/118417777153109946393/posts/FugJcLCfkWm)

# clojure - Clojure 获取嵌套映射值

> ID：15639060
> 
> 赞同：18
> 
> 时间：2013-03-26T14:03:57.263
> 
> 标签：clojure

所以我习惯于在我的应用程序中使用嵌套数组或设置映射。我尝试像这样在 Clojure 中设置一个：

```
(def gridSettings
  {:width 50
   :height 50
   :ground {:variations 25}
   :water {:variations 25}
   }) 
```

我想知道您是否知道检索嵌套值的好方法？我试着写

```
(:variations (:ground gridSettings)) 
```

哪个行得通，但它是背单词而且相当麻烦，特别是如果我添加几个级别。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-26T14:06:06.137

这就是`get-in`：

```
(get-in gridSettings [:ground :variations]) 
```

从文档字符串：

> ```
> clojure.core/get-in
> ([m ks] [m ks not-found])
>   Returns the value in a nested associative structure,
>   where ks is a sequence of keys. Returns nil if the key
>   is not present, or the not-found value if supplied. 
> ```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-03-26T14:21:40.970

您可以使用[线程优先宏](http://clojuredocs.org/clojure_core/clojure.core/-%3E)：

```
(-> gridSettings :ground :variations) 
```

除了两种特殊情况，`->`我更喜欢：`get-in`

*   当键是在运行时确定的任意序列时。
*   当提供未找到的值时很有用。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-03-26T15:37:30.437

除了其他答案提到的（`get-in`和`->`宏）之外，有时您想从映射中获取多个值（嵌套与否），在这些情况下，解构可能真的很有帮助

```
(let [{{gv :variations} :ground
       {wv :variations} :water} gridSettings]
  [gv wv]) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-07-24T12:51:23.230

地图是部分功能（不是全部）。因此，可以简单地将它们作为函数应用。根据问题的地图：

```
(gridSettings :ground)
;=> {:variations 25} 
```

结果是一张地图。因此，它可以再次应用，这会导致问题中提出的非常相似（但不向后）的“语法”：

```
((gridSettings :ground) :variations)
;=>25 
```

# google-maps - 谷歌室内导航是如何工作的？

> ID：15639061
> 
> 赞同：18
> 
> 时间：2013-03-26T14:03:58.193
> 
> 标签：google-maps, google-maps-api-3, navigation, indoor-positioning-system

对于我大学的一个项目，我必须收集有关谷歌室内地图的信息。我花了几个小时搜索有关 Google 室内导航如何真正运作的信息。我找到了几个关于如何创建谷歌平面图的链接：

[http://support.google.com/gmm/bin/answer.py?hl=en&answer=1685896](http://support.google.com/gmm/bin/answer.py?hl=en&answer=1685896)

以及如何使用 Google Maps Floor Plan Marker 应用程序提高位置准确性：

[http://support.google.com/gmm/bin/answer.py?hl=en&answer=2667756&topic=1685871&ctx=topic](http://support.google.com/gmm/bin/answer.py?hl=en&answer=2667756&topic=1685871&ctx=topic)

他们说该应用程序收集公共广播数据。但是没有关于收集哪些信息以及如何收集的信息。这里的几个讨论和我发现的几篇文章说谷歌使用 wifi 接入点和蜂窝天线进行室内定位。但是我找不到任何可以在我的项目中使用的 Google 官方信息。

您能否建议我在哪里可以找到以下问题的答案：

1.  谷歌地图平面图标记是如何工作的？收集哪些信息以及如何收集？一份官方的谷歌技术论文会很好，所以我可以将它用于我的工作。
2.  如何通过添加 Wifi 接入点、蓝牙站或其他技术来提高 Google 室内导航的准确性？
3.  如何将紧急出口和厕所等附加信息添加到平面图中，以便用户可以使用智能手机导航到这些特殊点？
4.  是否可以添加有关房间的信息，以便用户可以用手指点击它们以获取更多信息？例如哪个部门位于这个房间等等？

我发现了很多关于室内定位和室内导航的东西。但没有关于谷歌如何使用它们的信息。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T14:21:42.547

这个项目只是提供室内场所的地图。在超出标准（GPS、WiFi 等）的这些地方增强导航并没有做任何特别的事情。

当他们谈论使用 Wifi 和蜂窝数据（增强）定位时，他们谈论的是他们在常规谷歌地图上使用的相同内容。这些数据是从手机信号塔信息中收集的，Wifi 的东西是从谷歌街景汽车中嗅出的，然后随着使用设备的人与这些设备接触并将信息发送回谷歌，通过用户数据进行增强。

它*不是*很准确 - 甚至不如 GPS 准确。这是一种“球场”估计。例如，如果 Google 街景汽车在经过您家时检测到您的 WiFi 信号——如果您没有 GPS，并且 Google 地图看到了您的 WiFi 盒子，它可以估计您在距离您家几百英尺的地方。谷歌街景汽车检测到信号。

不如 GPS 准确 - 但如果您在几百英尺范围内精简而不是“不知道”，那也不算*太糟糕。*简而言之——这些来源*不能*给你*更好*或更精细的室内场所定位。如果您在里面并且不在 GPS 覆盖范围内，它们会很好 - 例如 - 能够告诉您您在那个特定的建筑物中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-19T19:32:23.073

室内定位使用WLAN接口。为了估计用户的实时位置，定位系统必须执行许多步骤和各种计算。可以使用与多个接入点 (AP) 的多于一个距离的计算来估计确切的位置。主要原理表明，接收器的信号强度与信号传播距离的平方成反比。RSS指纹识别方法基于在特定环境中记录和采样无线电信号的模式，称为模式识别或指纹识别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-18T17:47:52.643

由于这篇文章有点旧，我想我仍然会添加我的想法。首先，您可以使用 MyMaps 对您自己的自定义地图进行编辑。正如之前的答案所述，谷歌地图使用手机数据、wifi 数据、gps 等进行跟踪。它还可以使用手机传感器数据，例如您的加速度计。以当前的 wifi 基础设施水平，使用 wifi 指纹识别方法实际上可以非常准确（接入点越多，越准确，因为它们被有效定位）。有几篇学术文章证明了它在几米精度下的可行性。我建议阅读有关 RSSI 指纹识别的文章。另请查看谷歌地图开发者文档以获取有关编辑地图信息的更多详细信息。

另外我读到他们将使用光检测来提高室内精度（不确定是否已实施）。

# python - 按回车作为命令输入

> ID：15639064
> 
> 赞同：1
> 
> 时间：2013-03-26T14:04:05.777
> 
> 标签：python, subprocess

我有一个应用程序的安装程序。它有用于 *nix/windows 操作系统的 .sh 和 .bat。在脚本中它会做一些事情并挂在那里，等待其他一些事情完成，然后需要`Enter`在该命令窗口中按下，脚本将继续。

我想用python做所有的事情。我知道 subprocess.open 可以调用脚本，但我不知道如何做“按 Enter”的事情..

任何输入都将被评估..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:06:12.303

一种是用的方法就是用的`raw_input`方法！

```
# Code
print "Please press ENTER to continue!"
raw_input()
# more code 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T15:37:48.263

您需要在安装程序的标准输入上提供换行符。

单程：

```
subprocess.Popen('sh abc.sh < a_file_that_you_prepared.txt',
                 shell=True,
                 stdout=subprocess.PIPE) 
```

另一个，大致相当于第一个：

```
input_file = open('a_file_that_you_prepared.txt', 'r')
subprocess.Popen('sh abc.sh',
                 shell=True,
                 stdout=subprocess.PIPE,
                 stdin=input_file)
input_file.close() 
```

另一种方式——可能有效，也可能无效：

```
subprocess.Popen('sh abc.sh < /dev/null',
                 shell=True,
                 stdout=subprocess.PIPE) 
```

第三种方式——很容易导致你的程序和安装程序之间出现死锁：

```
x = subprocess.Popen('sh abc.sh',
                 shell=True,
                 stdout=subprocess.PIPE,
                 stdin=subprocess.PIPE)

...

x.stdin.write('\n') 
```

# javascript - Android Native 浏览器上传的空文件

> ID：15639070
> 
> 赞同：18
> 
> 时间：2013-03-26T14:04:25.840
> 
> 标签：javascript, android

我正在为手机创建一个网站，可以调整照片大小并上传它们。

```
$('#ImgPreview canvas').each(function(pIndex) {
    vFormData.append(pIndex, canvasToJpegBlob($(this)[0]), vIssueId +'-attachment0'+ pIndex +'.jpg');
});

$.ajax({
    url: '/api/ob/issuefileupload',
    data: vFormData,
    processData: false,
    contentType: false,
    type: 'POST'
}).done(function(pData) {
    window.location = '/issue?id='+ vIssueId;
}).fail(function(pJqXHR) {
    alert(My.Strings.UploadFailed);
}); 
```

这适用于 Android 版 Chrome 和 iOS 版 Safari，但在原生 Android 浏览器中，文件的内容长度为 0，名称为 Blob + UID。当文件被添加到 formdata 时，大小似乎也相当大（900k 与 Chrome 中的 50k 相比）。

canvasToJpegBlob 函数：

```
function canvasToJpegBlob(pCanvas) {
    var vMimeType = "image/jpeg",
        vDataURI,
        vByteString,
        vBlob,
        vArrayBuffer,
        vUint8Array, i,
        vBlobBuilder;

    vDataURI = pCanvas.toDataURL(vMimeType, 0.8);
    vByteString = atob(vDataURI.split(',')[1]);

    vArrayBuffer = new ArrayBuffer(vByteString.length);
    vUint8Array = new Uint8Array(vArrayBuffer);
    for (i = 0; i < vByteString.length; i++) {
        vUint8Array[i] = vByteString.charCodeAt(i);
    }

    try {
        vBlob = new Blob([vUint8Array.buffer], {type : vMimeType});
    } catch(e) {
        window.BlobBuilder = window.BlobBuilder ||
                             window.WebKitBlobBuilder ||
                             window.MozBlobBuilder ||
                             window.MSBlobBuilder;

        if (e.name === 'TypeError' && window.BlobBuilder) {
            vBlobBuilder = new BlobBuilder();
            vBlobBuilder.append(vUint8Array.buffer);
            vBlob = vBlobBuilder.getBlob(vMimeType);
        } else if (e.name === 'InvalidStateError') {
            vBlob = new Blob([vUint8Array.buffer], {type : vMimeType});
        } else {
            alert(My.Strings.UnsupportedFile);
        }
    }

    return vBlob;
} 
```

有没有办法让它在原生 Android 浏览器中工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-03-02T12:35:32.937

我也遇到了这个问题，需要提出一个更通用的解决方案，因为在某些情况下我无法控制服务器端代码。

最终我找到了一个几乎完全透明的解决方案。方法是用一个 blob 填充损坏的部分`FormData`，该 blob 以必要的格式附加数据`multipart/form-data`。`send()`它使用将 blob 读取到在请求中发送的缓冲区的版本覆盖 XHR 。

这是主要代码：

```
var
    // Android native browser uploads blobs as 0 bytes, so we need a test for that
    needsFormDataShim = (function () {
        var bCheck = ~navigator.userAgent.indexOf('Android')
                        && ~navigator.vendor.indexOf('Google')
                        && !~navigator.userAgent.indexOf('Chrome');

        return bCheck && navigator.userAgent.match(/AppleWebKit\/(\d+)/).pop() <= 534;
    })(),

    // Test for constructing of blobs using new Blob()
    blobConstruct = !!(function () {
        try { return new Blob(); } catch (e) {}
    })(),

    // Fallback to BlobBuilder (deprecated)
    XBlob = blobConstruct ? window.Blob : function (parts, opts) {
        var bb = new (window.BlobBuilder || window.WebKitBlobBuilder || window.MSBlobBuilder);
        parts.forEach(function (p) {
            bb.append(p);
        });

        return bb.getBlob(opts ? opts.type : undefined);
    };

function FormDataShim () {
    var
        // Store a reference to this
        o = this,

        // Data to be sent
        parts = [],

        // Boundary parameter for separating the multipart values
        boundary = Array(21).join('-') + (+new Date() * (1e16*Math.random())).toString(36),

        // Store the current XHR send method so we can safely override it
        oldSend = XMLHttpRequest.prototype.send;

    this.append = function (name, value, filename) {
        parts.push('--' + boundary + '\nContent-Disposition: form-data; name="' + name + '"');

        if (value instanceof Blob) {
            parts.push('; filename="'+ (filename || 'blob') +'"\nContent-Type: ' + value.type + '\n\n');
            parts.push(value);
        }
        else {
            parts.push('\n\n' + value);
        }
        parts.push('\n');
    };

    // Override XHR send()
    XMLHttpRequest.prototype.send = function (val) {
        var fr,
            data,
            oXHR = this;

        if (val === o) {
            // Append the final boundary string
            parts.push('--' + boundary + '--');

            // Create the blob
            data = new XBlob(parts);

            // Set up and read the blob into an array to be sent
            fr = new FileReader();
            fr.onload = function () { oldSend.call(oXHR, fr.result); };
            fr.onerror = function (err) { throw err; };
            fr.readAsArrayBuffer(data);

            // Set the multipart content type and boudary
            this.setRequestHeader('Content-Type', 'multipart/form-data; boundary=' + boundary);
            XMLHttpRequest.prototype.send = oldSend;
        }
        else {
            oldSend.call(this, val);
        }
    };
} 
```

`fd.append(name, value)`就这样使用它，之后照常调用：

```
var fd = needsFormDataShim ? new FormDataShim() : new FormData(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T13:48:43.600

如何尝试在画布上绘制它，使用矩阵将其缩放到您想要的大小，然后使用`canvas.toDataURL`. 看看这个[问题](https://stackoverflow.com/questions/14876842/send-canvas-images-as-a-file-stream-html5)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-24T11:19:29.277

我用它来解决问题：

```
// not use blob, simply use key value
var form = new FormData();
// get you content type and raw data from data url
form.append( 'content_type', type);
form.append( 'content', raw); 
```

# c# - 关于 textchanged 事件的 WPF 线程和任务

> ID：15639071
> 
> 赞同：1
> 
> 时间：2013-03-26T14:04:26.313
> 
> 标签：c#, wpf, multithreading, task

**使用 Visual Studio 2012 ulti、C# .NET WPF。**

在我的 winforms 代码中使用 Tasks 过去很简单。

我要做的就是创建一个委托，为我的代码创建一个函数，创建一个任务，事件将是一个简单的按钮。容易的东西。我遇到的问题是以下...

*   像往常一样创建一个线程但是该**事件**将在**text changed**上。

我遇到的问题是考虑逻辑，如果我只是更改事件，我看不到这个工作，因为用户键入的速度可能比代码运行的速度快（在这种情况下是一个 sql 查询选择语句）。在那里它会尝试运行许多我什至认为行不通的任务。

基本上用户输入用于按名称或号码搜索帐户的文本框。在这个文本框中，我想线程化整个过程。

我能想到的唯一解决方案是，**如果**有一个**线程仍在运行，则文本会发生变化，停止该线程**并**创建新的**线程，但不确定这是否是一种干净的方法，因为它的 sql 存储过程将被调用。

那么任何机构都可以解决这个问题吗？

如果您需要更多信息，请询问。如果需要，我还将提供一些当前可以帮助您理解的代码...

**设置调用方法：**

```
private void SetDataGrid(bool AutoGenerateColumns, Object DataSource, String DataMember, DataGridViewAutoSizeColumnsMode Mode)
    {
        if (this.ParetoGrid.InvokeRequired)
        {
            this.ParetoGrid.Invoke(new Action<bool, Object, String, DataGridViewAutoSizeColumnsMode>(SetDataGrid),
                                      AutoGenerateColumns, DataSource, DataMember, Mode);
        }
        else
        {
            this.ParetoGrid.AutoGenerateColumns = AutoGenerateColumns;
            this.ParetoGrid.DataSource = DataSource;
            this.ParetoGrid.DataMember = DataMember;
            ParetoGrid.AutoResizeColumns(Mode);
        }
    } 
```

**在另一个方法中调用invoke方法：**

```
Private void GetSomething()
{
    //sql code get data
    SetDataGrid(true, dataSet1, "Pareto", DataGridViewAutoSizeColumnsMode.AllCells);
} 
```

**然后只需在事件上启动任务：**

```
private void myButton_Click(Object sender, EventArgs e)
{
    Task t = new Task(() => getSomething());
    t.Start();
} 
```

正如你所看到的简单的东西，但简单的变化事件似乎把整个逻辑搞砸了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:07:24.437

当他们进入此搜索模式时，您可以简单地缓存所有帐户。然后，当他们在文本框中输入文本时，您可以搜索缓存的帐户。为每个按键在不同的线程中进行查询对应用程序来说非常繁重。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:06:52.837

我可能会结合其他建议的答案，并尝试使用计时器或类似方法延迟 SQL 语句的触发，但如果用户延迟足够长的时间以触发 SQL，则尝试仅过滤返回的结果该点向前（仅当搜索字符串明显变得更具限制性时）。这可以为您节省昂贵的 SQL 往返行程，并在第一次命中后为您提供工作缓存（这应该比您尝试缓存所有内容时更小）。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T14:09:15.640

我建议将此逻辑从任务移动到`Timer`回调中，然后让您的`OnTextChanged`处理程序在每次触发时实际重置计时器（当然只有计时器触发一次）。通过使计时器在 0.5-1 秒或类似的时间后过去，您将等到输入所有文本后再实际调用您的逻辑。但是用户的体验仍然会非常敏感。

例子：

```
private System.Threading.Timer keyEntryTimer = new Timer(Logic,null,-1,-1);

public void HandleEvent(objet sender, EventArgs args)
{
    keyEntryTimer.Change(500,-1);
}

public void Logic(objet state)
{
    //Your task logic would go here to read from the text etc... 
    //You'll have to handle any UI updates either by firing off a task once the DB results return or using a dispatcher
} 
```

# android - Twitter 与 Android 的集成

> ID：15639072
> 
> 赞同：0
> 
> 时间：2013-03-26T14:04:27.083
> 
> 标签：android, twitter

我必须将 twitter 集成到我自己的 android 应用程序中。

我已经运行了该应用程序并显示了登录页面，如果我输入了正确的登录详细信息，它必须编写状态页面。我已经写了一些代码。单击提交按钮会弹出评论已发布的 toast 消息，但是当我检查推特墙时，该消息不存在。我的代码有什么问题？请检查一下，我该如何解决这个问题？

我有以下代码：

```
public class TestPost extends Activity {
private TwitterApp mTwitter;
private CheckBox mTwitterBtn;
private String username = "";
String review;
private boolean postToTwitter = false;
private static final String twitter_consumer_key = "xxx";
private static final String twitter_secret_key = "xxx";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.post);

    Button postBtn              = (Button) findViewById(R.id.button1);
    final EditText reviewEdit   = (EditText) findViewById(R.id.revieew);

    postBtn.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            String review = reviewEdit.getText().toString();

            if (review.equals("")) return;

            postReview(review);

            if (postToTwitter) postToTwitter(review);

        }
    });

    mTwitter = new TwitterApp(this, twitter_consumer_key,twitter_secret_key);

    mTwitter.setListener(mTwLoginDialogListener);

    mTwitterBtn = (CheckBox) findViewById(R.id.twitterCheck);

    mTwitterBtn.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            if (mTwitter.hasAccessToken()) {
                postToTwitter = mTwitterBtn.isChecked();
            } else {
                mTwitterBtn.setChecked(false);
                mTwitter.authorize();
            } 
        }
    });

    if (mTwitter.hasAccessToken()) {
        username    = mTwitter.getUsername();
        username    = (username.equals("")) ? "No Name" : username;

        mTwitterBtn.setText("  Twitter  (" + username + ")");
    }

}

private void postReview(String review) {
    //post to server

    Toast.makeText(this, "Review posted", Toast.LENGTH_SHORT).show();
}

private void postToTwitter(final String review) {
    new Thread() {
        @Override
        public void run() {
            int what = 0;

            try {
                mTwitter.updateStatus(review);
            } catch (Exception e) {
                what = 1;
            }

            mHandler.sendMessage(mHandler.obtainMessage(what));
        }
    }.start();
}

private Handler mHandler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        String text = (msg.what == 0) ? "Posted to Twitter" : "Post to Twitter failed";
        //String text = "Ve a Good Day";
        Toast.makeText(TestPost.this, text, Toast.LENGTH_SHORT).show();
    }
};
private final TwDialogListener mTwLoginDialogListener = new TwDialogListener() {
    @Override
    public void onComplete(String value) {
        username    = mTwitter.getUsername();
        username    = (username.equals("")) ? "No Name" : username;

        mTwitterBtn.setText("  Twitter  (" + username + ")");
        mTwitterBtn.setChecked(true);

        postToTwitter = true;

        Toast.makeText(TestPost.this, "Connected to Twitter as " + username, Toast.LENGTH_LONG).show();
    }

    @Override
    public void onError(String value) {
        mTwitterBtn.setChecked(false);

        Toast.makeText(TestPost.this, "Twitter connection failed", Toast.LENGTH_LONG).show();
    }
}; 
```

}

# scala - scala类构造函数参数

> ID：15639078
> 
> 赞同：51
> 
> 时间：2013-03-26T14:04:47.267
> 
> 标签：scala, constructor, scope, immutability

有什么区别：

```
class Person(name: String, age: Int) {
  def say = "My name is " + name + ", age " + age
} 
```

和

```
class Person(val name: String, val age: Int) { 
  def say = "My name is " + name + ", age " + age
} 
```

我可以将参数声明为`var`s，然后再更改它们的值吗？例如，

```
class Person(var name: String, var age: Int) {

  age = happyBirthday(5)

  def happyBirthday(n: Int) {
    println("happy " + n + " birthday")
    n
  }
} 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-26T14:08:58.537

对于第一部分，答案是范围：

```
scala> class Person(name: String, age: Int) {
     |   def say = "My name is " + name + ", age " + age
     | }

scala> val x = new Person("Hitman", 40)

scala> x.name
<console>:10: error: value name is not a member of Person
              x.name 
```

如果您为参数添加前缀`val`，`var`它们将从类外部可见，否则它们将是私有的，如您在上面的代码中所见。

是的，您可以像往常一样更改 var 的值。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-26T14:08:32.783

这个

```
class Person(val name: String, val age: Int) 
```

使类的用户可以在外部使用这些字段，例如您可以稍后执行

```
val p = new Person("Bob", 23)
val n = p.name 
```

如果将 args 指定为`var`，则范围与 for 相同`val`，但字段是可变的。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-11-23T22:39:33.403

如果你熟悉 Java，你可以从这个例子中得到想法：

```
class Person(name: String, age: Int) 
```

类似于

```
class Person {
  public Person(String name, int age) {
  }
} 
```

尽管

```
class Person(var name: String, var age: Int) // also we can use 'val' 
```

类似于

```
class Person {
  String name;
  int age;

  public Person(String name, int age) {
     this.name = name;
     this.age = age;
  }
} 
```

直觉是，没有 var/val，变量只能在构造函数内部访问。如果添加了 var/val，则该类将具有同名的成员变量。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-16T15:54:20.393

这里的答案非常好，但是我正在通过探索字节码来解决这个问题。当您申请`javap`一个类时，它会打印出所传递的类的包、受保护和公共字段和方法。我创建了一个类 Person.scala 并用以下代码填充它。

```
class Person(name: String, age: Int) {
  def say = "My name is " + name + ", age " + age
}

class PersonVal(val name: String, val age: Int) {
  def say = "My name is " + name + ", age " + age
}

class PersonVar(var name: String, var age: Int) {

  age = happyBirthday(5)

  def happyBirthday(n: Int) = {
    println("happy " + n + " birthday")
    n
  }
} 
```

用它编译代码后，`scalac Person.scala`会生成三个名称为`Person.class, PersonVal.calass , PersonVar.cass`. 通过运行`javap`这些类文件中的每一个，我们可以看到结构将如何：

```
>>javap Person.class
Compiled from "Person.scala"
public class Person {
  public java.lang.String say();
  public Person(java.lang.String, int);
} 
```

在这种情况下，它没有为 Person 创建任何类变量，因为它既没有使用 val 也没有使用 val 声明，因此名称和年龄只能在构造函数中使用。

```
>>javap PersonVal.class
public class PersonVal {
  public java.lang.String name();
  public int age();
  public java.lang.String say();
  public PersonVal(java.lang.String, int);
} 
```

在这种情况下，它有三个成员，两个用于输入构造函数，一个用于我们在构造函数中声明的成员。但是，我们没有任何输入构造函数的设置器，因此我们无法更改值。

```
>>javap PersonVar.class
public class PersonVar {
  public java.lang.String name();
  public void name_$eq(java.lang.String);
  public int age();
  public void age_$eq(int);
  public int happyBirthday(int);
  public PersonVar(java.lang.String, int);
} 
```

它与 PersonVal 示例相同，但我们可以在这种情况下使用这些`variable_$eq`方法更改值。它只是一个缩短版本`variable =`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-02T07:12:40.273

The answer by @Reza where the author explores byte code using javap helped me to clarify this concept the best. To cite a very specific example of this case please refer to below scenario that I faced in my production web app (Play + Scala): [How to inject parameters into a class/trait method in Scala](https://stackoverflow.com/questions/49034562/how-to-inject-parameters-into-a-class-trait-method-in-scala)

If I don't use val prefix to injected parameter `authorizationHandler` then compiler throws this error:

```
class MyController needs to be abstract, since method authorizationHandler in trait AuthorizationCheck of type => controllers.authapi.AuthorizationHandler is not defined
[error] class MyController @Inject() (authorizationHandler: AuthorizationHandler) extends Controller with AuthorizationCheck {
[error]       ^
[error] one error found 
```

Sadly the error didn't help me to pinpoint to the correct issue which is to prefix with `val`.

```
class MyController @Inject()(val authorizationHandler: AuthorizationHandler) extends Controller with AuthorizationCheck {

   def myAction = AuthenticatedAction { implicit request =>
     ...
   }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-12T19:02:07.677

您可以使用 a `case class`，在这种情况下，`Person`该类将在该类之外提供这些变量。 `case class Person(name: String, age: Int)`. 然后以下代码将按预期工作。`val z = new Person("John", 20); z.name //John`

# regex - sed 或正则表达式如何删除圆括号之间的所有内容

> ID：15639080
> 
> 赞同：2
> 
> 时间：2013-03-26T14:04:51.163
> 
> 标签：regex, sed

就像在我需要的主题中一样，我需要用星号 * 替换圆括号中的所有内容。.
我已经阅读了很多关于正则表达式的内容，但在这种情况下，圆括号很特别
，我很生气。
我收到了这样的文字

```
550 OU-001 (BAY0-MC2-F14) Unfortunately messages from xxx.xxx.xxx.xx 
```

所以应该是

```
550 OU-001 (*) Unfortunately messages from xxx.xxx.xxx.xx 
```

我试过这个

```
sed -e 's/\(([)]*\)/*/' file 
```

但以这种方式只替换左括号。

```
550 OU-001 *BAY0-MC2-F14) Unfortunately messages from xxx.xxx.xxx.x 
```

有人可以帮助我并向我解释解决方案吗？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:09:40.397

这有帮助吗？

```
sed 's/([^)]*/(*/g' file 
```

用你的输入

```
kent$  echo "550 OU-001 (BAY0-MC2-F14) Unfortunately messages from xxx.xxx.xxx.xx"|sed  's/([^)]*/(*/g'
550 OU-001 (*) Unfortunately messages from xxx.xxx.xxx.xx 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T14:08:14.070

这个 sed 应该工作：

```
sed 's/([^)]*)/(*)/g' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T14:09:18.253

试试这个`sed`命令-：

```
 sed 's/(.*)/(\*)/' file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T14:12:36.933

这个 sed 有效：

```
sed 's/([^)]*)/(*)/g 
```

它转变

```
foo (bar) baz (foobar) end 
```

至

```
foo (*) baz (*) end 
```

# websphere - Eclipse、WebSphere7.0、Maven：热部署时AspectJ不编织代码

> ID：15639081
> 
> 赞同：0
> 
> 时间：2013-03-26T14:04:55.460
> 
> 标签：websphere, maven-3, aspectj, myeclipse

我的系统信息：

```
IDE:    Eclipse Blue 10.0, 
Server: Websphere 7.0
Build Management Tool: Maven 3.0 
```

我使用以下配置在我的 Maven 项目中执行编译时编织：

```
<properties>    
        <maven.compiler.source>1.6</maven.compiler.source>
        <maven.compiler.target>1.6</maven.compiler.target>
    </properties>
    <build>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>aspectj-maven-plugin</artifactId>
                <version>1.4</version>
                <executions>
                        <execution>
                            <goals>
                                <goal>compile</goal>
                                <!-- <goal>test-compile</goal> -->
                            </goals>
                        </execution>
                </executions>                
                <configuration>
                    <aspectLibraries>
                        <aspectLibrary>
                            <groupId>com.xxx.logger</groupId>
                            <artifactId>my-aspect-logger</artifactId>
                        </aspectLibrary>
                    </aspectLibraries>                  
                    <showWeaveInfo>true</showWeaveInfo>
                    <outxml>true</outxml>                   
                    <Xlint>warning</Xlint>
                    <verbose>true</verbose>
                    <source>${maven.compiler.source}</source>
                    <target>${maven.compiler.target}</target>
                </configuration>                
            </plugin>            
         </plugins>
     </build> 
```

在开发过程中，我使用以下路径在 Eclipse 中以分解模式添加我的 EAR 文件：

```
Windows > Show View > Servers > WebSphere 7 > Right Click > Add Deployment 
```

我面临一个问题，即每当我更改我的 java 类时，这些类都会被编译并热部署在服务器中。但是，它们没有重新编织。但是，如果我删除 EAR，从命令提示符构建我的项目并重新部署它，它就会正常工作。

有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:15:31.793

我不熟悉 AspectJ，但 MyEclipse 不执行 maven 目标来构建和部署项目（尽管您可以添加构建器，这可能会在外部调用 maven - 请注意 Maven 项目构建器不执行 Maven 目标），因此在您的 pom 不会自动执行，但显然，您可以从 Run As 菜单项运行 maven 目标。因此，更改的 Java 类将使用配置的 JRE 重新编译并重新部署。在 pom 中指定的任何其他处理都不会运行。但是，您说删除部署然后重新部署实际上可以工作，所以如果您在重新部署之前不执行 Maven 构建，我不确定重新编织是如何完成的。

# google-visualization - 将前导“$”添加到谷歌图表

> ID：15639087
> 
> 赞同：-1
> 
> 时间：2013-03-26T14:05:23.750
> 
> 标签：google-visualization

我正在使用谷歌图表。我需要在 y 轴上的值以及气泡中的值之前添加一个“$”。

有这个设置吗？

保重，李

更新，

以下是图表使用的数据：

```
'Month','Semi-Detached in Toronto E04','Semi-Detached in Toronto E08','Condominium Townhouse in Toronto E04','Condominium Townhouse in Toronto E08',                ],
                ['7/2011', 4354000,15305800,6776500,495000],['8/2011', 700000,10514418,7060786,0],['9/2011', 6854800,17805400,12087300,0],['10/2011', 7287400,14248900,16206500,0],['11/2011', 2696245,9733270,12698090,0],['12/2011', 1965800,6054500,8854390,0],['1/2012', 2450968,9012200,5500100,0]             ]); 
```

我已经尝试在值之前添加 '$' 以及之前建议的 '%24' ，但两者都会引发语法错误。如果不引发 Google Charts 错误“轴#0 的数据列不能属于字符串×”类型，则无法引用这些值。

谢谢各位的意见。我发现了一个 99.9% 相同的问题： [How to set tooltips to display percents to match axis in Google Visualization Line Chart？](https://stackoverflow.com/questions/6724451/how-to-set-tooltips-to-display-percentages-to-match-axis-in-google-visualization)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:07:15.340

尝试使用 %24，它是 $ 的 urlencoded 形式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-06T02:51:45.203

利用：

```
var formatter = new google.visualization.NumberFormat({prefix: '$'}); 
```

在此处查看示例：

[https://developers.google.com/chart/interactive/docs/examples#interaction_example](https://developers.google.com/chart/interactive/docs/examples#interaction_example)

更多细节在这里：

[https://developers.google.com/chart/interactive/docs/reference#numberformatter](https://developers.google.com/chart/interactive/docs/reference#numberformatter)

# ios - IBOutlet 对代码没有反应

> ID：15639090
> 
> 赞同：0
> 
> 时间：2013-03-26T14:05:33.540
> 
> 标签：ios, objective-c, cocoa-touch, iboutlet

我`UIImageView`在 IB 中创建了一个并将其连接到`IBOutlet`：

```
@property (nonatomic, retain) IBOutlet UIImageView *alertImage; 
```

但是，它`UIImageView`根本不会对我的代码做出反应。我尝试设置插座，然后更改要测试的属性：

```
alertImage = [[UIImageView alloc] init];
alertImage.hidden = YES; 
```

但图像并没有消失。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T14:07:42.187

问题是您正在重新初始化`alertImage`，因此它不再连接到 IB 中定义的“原始”。

只需使用：

```
alertImage.hidden = YES; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T14:07:32.310

删除那一行：`alertImage = [[UIImageView alloc]init];` 只写`alertImage.hidden = YES;`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T14:08:44.260

您将 IBOutlet 声明为属性，那么为什么不将其用作属性呢？

尝试`self.alertImage.hidden = YES;`

# android - 超出绑定异常的索引

> ID：15639091
> 
> 赞同：-1
> 
> 时间：2013-03-26T14:05:34.320
> 
> 标签：android

我正在尝试使用地理编码器通过传递纬度和经度来获取位置。但我总是得到一个数组大小为零和错误`indexoutofboundexception index 0 size 0`。

我尝试了不同的经度和纬度值。

```
 btnShowLocation.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // create class object
                gps = new GPSTracker(MainActivity.this);

                // check if GPS enabled
                if (gps.canGetLocation()) {

                    double latitude = gps.getLatitude();
                    double longitude = gps.getLongitude();

                    List<Address> address;

                    Geocoder gcd = new Geocoder(getBaseContext(), Locale
                            .getDefault());

                    try {
                        address = gcd.getFromLocation(latitude, longitude, 1);
                        if (address != null && address.size() >= 0) {
                            loc = address.get(0).getAdminArea();

                            Toast.makeText(
                                    getApplicationContext(),
                                    "Your Location is - \nLat: " + latitude
                                            + "\nLong: " + longitude + "\nLocation: "
                                            + loc, Toast.LENGTH_LONG).show();

                        } else
                            Toast.makeText(getApplicationContext(), "no data",
                                    Toast.LENGTH_LONG).show();

                        // System.out.println("size of ade " + address.size());
                        // System.out.println(address.get(0).getLocality());
                        // loc = address.get(0).getLocality();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                    // \n is for new line
//                  Toast.makeText(
//                          getApplicationContext(),
//                          "Your Location is - \nLat: " + latitude
//                                  + "\nLong: " + longitude + "\nLocation: "
//                                  + loc, Toast.LENGTH_LONG).show();
                } else {
                    // can't get location
                    // GPS or Network is not enabled
                    // Ask user to enable GPS/network in settings
                    gps.showSettingsAlert();
                }

            }
        }); 
```

这是堆栈跟踪

```
03-26 14:01:06.592: E/AndroidRuntime(11006): FATAL EXCEPTION: main
03-26 14:01:06.592: E/AndroidRuntime(11006): java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0
03-26 14:01:06.592: E/AndroidRuntime(11006):    at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
03-26 14:01:06.592: E/AndroidRuntime(11006):    at java.util.ArrayList.get(ArrayList.java:304)
03-26 14:01:06.592: E/AndroidRuntime(11006):    at com.example.gpstracker.MainActivity$1.onClick(MainActivity.java:54)
03-26 14:01:06.592: E/AndroidRuntime(11006):    at android.view.View.performClick(View.java:4204)
03-26 14:01:06.592: E/AndroidRuntime(11006):    at android.view.View$PerformClick.run(View.java:17355)
03-26 14:01:06.592: E/AndroidRuntime(11006):    at android.os.Handler.handleCallback(Handler.java:725)
03-26 14:01:06.592: E/AndroidRuntime(11006):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-26 14:01:06.592: E/AndroidRuntime(11006):    at android.os.Looper.loop(Looper.java:137)
03-26 14:01:06.592: E/AndroidRuntime(11006):    at android.app.ActivityThread.main(ActivityThread.java:5041)
03-26 14:01:06.592: E/AndroidRuntime(11006):    at java.lang.reflect.Method.invokeNative(Native Method)
03-26 14:01:06.592: E/AndroidRuntime(11006):    at java.lang.reflect.Method.invoke(Method.java:511)
03-26 14:01:06.592: E/AndroidRuntime(11006):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-26 14:01:06.592: E/AndroidRuntime(11006):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-26 14:01:06.592: E/AndroidRuntime(11006):    at dalvik.system.NativeStart.main(Native Method) 
```

我的错误是什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:50:46.993

改变

```
if (address != null && address.size() >= 0) { 
```

至

```
 if (address != null && address.size() > 0) { 
```

# javascript - 加载/执行所有 JS 文件后，jQuery ready() 是否会触发

> ID：15639099
> 
> 赞同：0
> 
> 时间：2013-03-26T14:05:54.450
> 
> 标签：javascript, jquery

我有一些 JS 文件直接执行函数。它是通过模块模式完成的（在此处描述： // [http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth)）。所以这实际上意味着我们有一个匿名的自调用函数来定义我们的对象，所有对象都持有/封装。

看来这些自调用函数不一定要在jquery的ready函数之前执行。

1.  这是真的？

如果我们有几个具有这种模式的文件：

module_part1.js

```
 var MODULE = (function (my) {
    my.oneFunc = function () {
    // added method...
    };
      return my;
   }(MODULE)); 
```

module_part2.js

```
 var MODULE = (function (my) {
    my.twoFunc = function () {
    // added method...
    };
      return my;
   }(MODULE)); 
```

我们能确定在 jQuery 的 read 函数上该函数`Module.twoFunc`不是 undefied 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T14:11:20.583

根据定义，`document.ready`一旦加载了 DOM，就会执行。该`<script>`元素是 DOM 的一部分。当浏览器遇到`<script>`标签时，它会停止解析页面并下载并执行脚本，然后再继续处理下一个元素。因此，在 document.ready 事件中，所有脚本（在`<script>`标签中属于 DOM 的一部分）都将被加载。

# javascript - Javascript/jQuery - 替换字符串中最后出现的单词

> ID：15639102
> 
> 赞同：5
> 
> 时间：2013-03-26T14:06:07.947
> 
> 标签：javascript, jquery, regex

我有一个以固定单词结尾的字符串 - `Button`。现在我需要用`''`. 我该怎么做？另外，如果我的字符串是`ButtonButton`类似的东西，我只需要剪掉 last `Button`。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-26T14:09:06.177

```
var original = 'ButtonButton';
var newString = original.replace(/Button$/, '');
// "Button" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T14:09:26.727

如果您不必检查，如果它真的以 结尾`Button`，只需删除最后 6 个字母：

```
var str = "ButtonButton"; 
str = str.substr(0,str.length-6); 
console.log(str); //"Button" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T14:09:19.147

```
var str = "you string with button";
var newstring = str.replace(/button$/i, ''); 
```

阅读[`replace()`](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/String/replace)

# machine-learning - 使用贝叶斯规则估计概率？

> ID：15639105
> 
> 赞同：-1
> 
> 时间：2013-03-26T14:06:16.070
> 
> 标签：machine-learning

我正在写一份过去的试卷。我得到一个数据集如下：

头发 {brown, red} = {B,R}，Height {tall, short} = {T,S} 和 Country {UK, Italy} = {U,I}

(B,T,U) (B,T,U) (B,T,I)

(R,T,U) (R,T,U) (B,T,I)

(R,T,U) {R,T,U) (B,T,I)

(R,S,U) (R,S,U) (R,S,I)

问题：估计概率 P(B,T|U), P(B|U), P(T|U), P(U) 和 P(I)

正如问题所估计的那样，我猜我不需要计算任何值。是否只是将 P(B,T|U) 在整个数据集中出现的次数相加，例如 (2/12) = 16%。

那么P（U）的概率是否为0？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:21:09.040

我不这么认为。在您的 12 条记录中，有 8 条来自英国。所以 P(U) 应该是 8/12 = 2/3 ~= .66

贝叶斯定理是 P(A|B) = P(B|A)P(A)/P(B) ，您需要估计其中的一些概率。

# javascript - 零剪贴板问题

> ID：15639107
> 
> 赞同：0
> 
> 时间：2013-03-26T14:06:21.943
> 
> 标签：javascript, jquery, zeroclipboard

我正在尝试将零剪贴板集成到龙卷风 Web 应用程序中，但遇到了一些问题。

[http://jonrohan.github.io/ZeroClipboard/#demo](http://jonrohan.github.io/ZeroClipboard/#demo)这个页面工作得很好，但是当我尝试在我的本地机器上查看相同的页面（'将页面另存为..'以在本地获取所有文件）后打开 HTML 文件我得到[http://snag.gy/sT1y2.jpg](http://snag.gy/sT1y2.jpg)。即使我做了教程中写的所有事情（仅需要的代码行），也会发生这种情况（同样的错误）。

也许有人有类似的问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T08:08:17.677

我遇到了类似的问题，我通过将其上传到运行良好的服务器使其正常工作。请不要在本地测试它，而是在服务器上的某个地方测试它。

# java - 限制默认 cq5 搜索中的错误页面

> ID：15639109
> 
> 赞同：3
> 
> 时间：2013-03-26T14:06:33.270
> 
> 标签：java, javascript, aem

我正在使用 CQ5 开箱即用的搜索组件。我的问题是错误页面显示在搜索结果中。

我可以知道如何限制错误页面在搜索中显示。我们是否需要为页面添加一个新属性，以便它可以被 QueryBuilder 限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:59:33.137

如果您无法将不希望被索引的内容与您所做的内容分开，则可以将搜索索引器配置为忽略指定内容中的某些内容或属性。这在[Adob​​e CQ 帮助](http://www.adobe.com/go/learn_cq_destination_en)网站上的[“如何修改 CQ5 中的搜索引擎配置”](http://helpx.adobe.com/cq/kb/SearchIndexingConfig.html)页面中有详细描述。

本质上，索引器可以通过将属性添加到 indexing_config.xml 文件中来忽略属性，如下所示：

```
<index-rule nodeType="nt:base">
  <!-- ... existing ignored properties -->
  <property nodeScopeIndex="false">mySecretProperty</property>
</index-rule> 
```

以下内容应排除具有特定资源类型的节点及其后代的页面。

```
<index-rule nodeType="nt:base" condition="@sling:resourceType='app/components/errorPage'" />
<index-rule nodeType="nt:base" condition="ancestor::*/@excludefromindex='app/components/errorPage'" /> 
```

Jackrabbit [Indexing Configuration](http://wiki.apache.org/jackrabbit/IndexingConfiguration)页面提供了有关此文件语法的更多详细信息。

内容不会被自动重新索引，如何触发重新索引的详细信息可以在[这里](http://helpx.adobe.com/crx/kb/DisableIndexingPartOfContent.html)找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:08:25.963

在您配置搜索结果组件实例的对话框中（将在您的搜索结果页面上），查找名为“搜索路径”的字段。这映射到 CRX 中名为 的属性`searchIn`。将此属性设置为排除错误页面的内容的子树。例如，如果您将内容树设置为

```
/content
    /searchable-content
        home-page
        ...
    /error-pages
        404
        401
        ... 
```

在这种情况下，您可以将您`searchIn`的设置为`/content/searchable-content`.

# vba - 将字典清空到 Excel 工作表中的最快方法

> ID：15639129
> 
> 赞同：3
> 
> 时间：2013-03-26T14:07:40.530
> 
> 标签：vba, optimization, excel, dictionary

`Scripting.Dictionary`将a清空到Excel工作表中的最快方法是什么？这就是我现在正在做的事情，但是对于一个包含大约 3000 个元素的字典来说，它明显很慢。我已经做了我能想到的所有优化。

这是我所拥有的基本版本：

```
'wordCount and emailCount are late bound "Scripting.Dictionary" objects
Private Sub DictionaryToExcel(ByRef wordCount As Object, emailCount As Object)
    oExcel.EnableEvents = False
    oExcel.ScreenUpdating = False
    Set oWorkbook = oExcel.Workbooks.Add
    oExcel.Calculation = -4135
    With oWorkbook.Sheets(1)
        iRow = 1
        For Each strKey In wordCount.Keys()
            iWordCount = wordCount.Item(strKey)
            iEmailCount = emailCount.Item(strKey)
            If iWordCount > 2 And iEmailCount > 1 Then
                .Cells(iRow, 1) = strKey
                .Cells(iRow, 2) = iEmailCount
                .Cells(iRow, 3) = iWordCount
                iRow = iRow + 1
            End If
        Next strKey
    End With
    oExcel.ScreenUpdating = True
End Sub 
```

这是完整版本，包括我正在采取的每一项操作（主要是格式化，但有一个相对昂贵的操作是对 进行拼写检查`strKey`（尽管我认为这已经尽可能地优化：

```
'wordCount and emailCount are late bound "Scripting.Dictionary" objects
Private Sub DictionaryToExcel(ByRef wordCount As Object, emailCount As Object)
    Dim oExcel As Object, oWorkbook As Object
    Dim strKey As Variant, iRow As Long
    Dim iWordCount As Long, iEmailCount As Long, spellCheck As Boolean

    Set oExcel = CreateObject("Excel.Application")
    oExcel.EnableEvents = False
    oExcel.ScreenUpdating = False
    Set oWorkbook = oExcel.Workbooks.Add
    oExcel.Calculation = -4135
    With oWorkbook.Sheets(1)
        iRow = 1
        .Columns(1).NumberFormat = "@"
        For Each strKey In wordCount.Keys()
            iWordCount = wordCount.Item(strKey)
            iEmailCount = emailCount.Item(strKey)
            spellCheck = False
            If iWordCount > 2 And iEmailCount > 1 Then
                .Cells(iRow, 1) = strKey
                .Cells(iRow, 2) = iEmailCount
                .Cells(iRow, 3) = iWordCount
                spellCheck = oExcel.CheckSpelling(strKey)
                If Not spellCheck Then spellCheck = oExcel.CheckSpelling(StrConv(strKey, vbProperCase))
                .Cells(iRow, 4) = IIf(spellCheck, "Yes", "No")
                iRow = iRow + 1
            End If
        Next strKey

        .Sort.SortFields.Clear
        .Sort.SortFields.Add Key:=.Columns(4), Order:=1
        .Sort.SortFields.Add Key:=.Columns(2), Order:=2
        .Sort.SortFields.Add Key:=.Columns(3), Order:=2
        .Sort.SetRange .Range(.Columns(1), .Columns(4))
        .Sort.Apply

        .Rows(1).Insert
        .Rows(1).Font.Bold = True
        .Cells(1, 1) = "Word"
        .Cells(1, 2) = "Emails Containing"
        .Cells(1, 3) = "Total Occurrences"
        .Cells(1, 4) = "Is a common word?"
        .Range(.Columns(1), .Columns(4)).AutoFit
        If .Columns(1).ColumnWidth > 20 Then .Columns(1).ColumnWidth = 20
        .Range(.Columns(2), .Columns(4)).HorizontalAlignment = -4152
    End With
    oExcel.Visible = True
    oExcel.ScreenUpdating = True
End Sub 
```

我知道有一种非常快速的方法可以将二维数组发射到一系列单元格中，但我不确定字典是否有类似的东西。

***编辑***

到目前为止，我已经通过将值添加到数组而不是直接添加到 excel 单元格，然后将数组触发到 excel 来进行改进：

```
Private Sub DictionaryToExcel(ByRef wordCount As Object, emailCount As Object)
    Dim arrPaste() As Variant

    Set oWorkbook = oExcel.Workbooks.Add
    iRow = 1: total = wordCount.count
    ReDim arrPaste(1 To total, 1 To 4)
    For Each strKey In wordCount.Keys()
        iWordCount = wordCount.Item(strKey)
        iEmailCount = emailCount.Item(strKey)
        spellCheck = False
        If iWordCount > 2 And iEmailCount > 1 Then
            arrPaste(iRow, 1) = strKey
            arrPaste(iRow, 2) = iEmailCount
            arrPaste(iRow, 3) = iWordCount
            iRow = iRow + 1
        End If
        count = count + 1
    Next strKey

    With oWorkbook.Sheets(1)
        .Range(.Cells(1, 1), .Cells(total, 4)) = arrPaste 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T14:59:35.223

尝试将字典转换为数组，然后将数组传输到工作表。转换应该相对较快，因为它都在内存中。

然后，您应该能够在一个操作中将数组写入工作表，而不是在循环中。

# url - 为什么这个 URL 会在我的服务器上导致错误的请求？

> ID：15639130
> 
> 赞同：2
> 
> 时间：2013-03-26T14:07:42.360
> 
> 标签：url, character-encoding, urlencode, bad-request

我有一个以`%`. 喜欢：`/view/this-is-100%25`。不允许`%`在 URL 的末尾有吗？如果不允许，我该如何以另一种方式进行，如果允许，为什么会导致错误的请求？

谢谢。

更新：确切错误：

```
Bad Request
Your browser sent a request that this server could not understand. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:19:04.140

“%”在 URL 中用作 ASCII (?) UTF-8(?) 代码的前缀。例如，“空格”（ASCII 32 或十六进制 0x20）可以替换为“%20”。“%”前缀后跟两个十六进制数字。Web 服务器应采用“%20”并将其转换为空格。

当 URL 末尾有“%”时，“%”后面没有两个十六进制数字，因此无法进行替换，并且 URL 实际上格式错误。它实际上是一个错误的 URL。

这就是服务器不喜欢它的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T14:50:24.110

我刚刚通过替换为 解决了这个问题`%`，`percent`因为这只是我的一个 URL 中的情况。如需更好的解决方案，请参阅此链接 Sam Rad 在我的帖子中提供了我的第一条评论： [Apache: %25 in url (400 Bad Request)](https://stackoverflow.com/questions/3549747/apache-25-in-url-400-bad-request)

# java - 如何从 PHP 文件中调用 java 函数？

> ID：15639133
> 
> 赞同：0
> 
> 时间：2013-03-26T14:07:50.547
> 
> 标签：java, php, php-java-bridge

我创建了一个 JAR 文件，我需要从一个 Php 文件中调用它的方法。我尝试使用 Php-java 桥接，但它仅适用于已废弃版本的 sun java 6。另外，我觉得使用 php-java 桥并不是实现我想要的最佳方式，因为它是很久以前更新的。还有其他方法可以用来从 php 文件中调用我的 java 函数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:12:17.553

使用 shell_exec(comand to start your java programm) 从 PHP 执行您的 java 程序，它将以字符串的形式返回您的 java 程序的输出。[http://www.php.net/manual/en/function.shell-exec.php](http://www.php.net/manual/en/function.shell-exec.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:13:17.243

请参阅[从网站上的 PHP 脚本运行 Java 类文件](https://stackoverflow.com/questions/2128619/run-java-class-file-from-php-script-on-a-website)。

简而言之：使用 PHP 的 exec() 函数。如引用问题中所述，它需要非常小心地完成，但如果你做得对，（我发现）它可能是比桥接方法更清洁的解决方案。

# java - dijkstra 算法 - 如何在路径中返回边权重

> ID：15639134
> 
> 赞同：0
> 
> 时间：2013-03-26T14:07:51.967
> 
> 标签：java, algorithm, dijkstra, shortest-path

我正在开发一个项目，以在 java 中实现 Dijkstra 的最短路径算法。我在我的程序中使用了这个版本：[LINK](http://en.literateprograms.org/Dijkstra%27s_algorithm_%28Java%29)

我的程序需要一个源并给我这样的输出：

```
Distance to PE Hall: 0.0 Path: [PE Hall]

Distance to Reception: 1.0 Path: [PE Hall, Reception]

Distance to Stairs: 3.0 Path: [PE Hall, Stairs]

Distance to Refectory: 7.0 Path: [PE Hall, Stairs, Refectory] 
```

我真正想要的是输出给我路径中每个节点之间的距离，例如：

```
Distance to Refectory: 7.0 Path: [PE Hall 0.0, Stairs 3.0, Refectory 4.0] 
```

-

* * *

## 更新

我通过在每个顶点中添加一个“前一个顶点”变量来实现程序存储路径。我的输出正是我想要的，但是，我的方法通过在路径上迭代返回的距离是不正确的。

```
Target = E250 Distance = 0.0 {E250=0.0}
Target = D Distance = 10.0 {E250=0.0, D=10.0}
Target = C250Trans Distance = 35.0 {E250=0.0, C250Trans=10.0, D=10.0} 
```

这是我用来创建一个数组列表的方法，其中包含每个点之间的路径和距离

```
public static ArrayList<String> getShortestPaths(Vertex target)
  {
      ArrayList<String> path = new ArrayList<String>();
      for (Vertex vertex = target; vertex != null; vertex = vertex.previous)
        {   
             path.add(vertex.name + "=" + vertex.getDistFromPrev());
        }
      Collections.reverse(path);
      return path;
  } 
```

这是我用来获取路径中每个点之间的距离的方法，包含在顶点类中：

```
 public double getDistFromPrev()
{
    double weight = 0.;
    for(Edge e : adjacencies){
        if(e.target == this.previous){
            weight = e.weight;
        }
    }
    return weight;
} 
```

这是供参考的距离矩阵：

> E250 - D = 10
> 
> D - C250 = 25

如果有人可以澄清为什么使用每个顶点的`previous`变量迭代路径会返回不正确的边缘距离，这对我有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:27:54.863

让`s`成为路径的起始顶点，`d(v)`成为顶点`v`到顶点的距离，`s`让`e = w->v`成为路径的边缘。那么 的长度`e`为`d(v) - d(w)`。在您的示例中，边缘的长度`Stairs -> Refectory`是`7.0 - 3.0 = 4.0`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:16:51.830

你知道路径：

```
PE Hall, Stairs, Refectory 
```

您还知道到路径中每个位置的距离：

```
PE Hall: 0.0 
Reception: 1.0 
Stairs: 3.0 
Refectory: 7.0 
```

Dijkstra**为**您提供您想要的信息，您只需要适当地“格式化”它（例如，编写一个组合数据的小助手函数并在 Dijkstra 完成后调用您的助手）。

# php - 访问者在表单中输入他们的电子邮件地址后下载文件

> ID：15639135
> 
> 赞同：0
> 
> 时间：2013-03-26T14:07:52.123
> 
> 标签：php, jquery

有没有一种方法可以让我在网站上有一个“下载文件”链接，但只有在访问者首先在表单中输入他们的电子邮件地址后才下载文件？

有点像 Premium Pixels 拥有的这个系统，您必须成为会员才能下载东西 - [http://www.premiumpixels.com/freebies/social-media-sharing-buttons-psd/](http://www.premiumpixels.com/freebies/social-media-sharing-buttons-psd/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:58:09.630

验证用户后，与其发送文件的直接链接，不如将文件保存在 Web 服务器上的受保护目录中，然后使用[readfile](http://php.net/manual/en/function.readfile.php)将其发送到用户浏览器。因此，获取表单页面，处理输入并验证它，如果您的验证器满意并且提交了表单，则让它提供下载。该文件应在用户浏览器中作为下载弹出，而无需发送直接链接。您应该能够使用 PHP 文档中的示例作为指南来使其正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:11:32.310

如果您希望用户能够下载多个文件但只输入他们的电子邮件地址一次，我会使用会话。

在链接上将它们发送到发布到 PHP 页面的表单，然后它处理该表单，如果用户确实输入了电子邮件，则将会话设置为 true，例如

用户点击下载 检查下载会话是否为 yes/valid/true 如果会话无效 显示基本 HTML 表单，要求发送电子邮件 处理 HTML 表单并设置下载会话 yes/valid/true 显示“真实”下载链接

编辑：正如 Blaze 提到的，最好的选择是将链接发送到电子邮件，以确保他们提供他们的电子邮件而不是其他人

# node.js - 使用 Socket.IO 的 emit() 而不是所有 HTTP 请求是一个好习惯吗？

> ID：15639137
> 
> 赞同：4
> 
> 时间：2013-03-26T14:08:02.627
> 
> 标签：node.js, http, websocket, socket.io

我设置了一个 Node.js HTTP 服务器。它侦听路径“/”并在获取请求时返回一个空的 HTML 模板。

此模板包含 Require.js 客户端脚本，它创建与服务器的 Socket.IO 连接。

那么客户端和服务器之间的所有通信都是由 Web Sockets 提供的。

连接时，服务器需要身份验证；如果有身份验证cookie，则客户端将它们发送到服务器进行验证，如果没有cookie，则客户端呈现登录视图并等待用户输入等。

到目前为止一切正常，在验证凭据后，我为用户创建了一个 SID 并使用它来管理他的访问权限。然后我渲染主视图并启动应用程序。

问题：

*   是否需要使用 HTTPS 而不是 HTTP，因为我只使用 HTTP 将脚本发送到客户端？（注意：我打算使用本地存储而不是 cookie）

*   在没有 HTTP 的情况下使用纯 Web 套接字有什么缺点吗？

*   如果它有效，为什么没有人使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:18:01.090

> 是否需要使用 HTTPS 而不是 HTTP，因为我只使用 HTTP 将脚本发送到客户端？（注意：我打算使用本地存储而不是 cookie）

不，websockets 的握手需要 HTTP/HTTPS。选择 HTTP 或 HTTPS 是从安全角度考虑的。如果您想使用它来简单地发送脚本，那么没有什么坏处。如果您想在您的页面中实现用户登录/身份验证，则应使用 HTTPS。

> 在没有 HTTP 的情况下使用纯 Web 套接字有什么缺点吗？

Web 套接字和 HTTP 非常不同。如果您使用纯 Web 套接字，您将错过 HTTP。HTTP 是跨平台 Web 服务的首选。它有利于文档遍历/检索，但它是一种方式。Web 套接字通过单个 TCP 连接提供全双工通信通道，并允许我们摆脱 Ajax、Reverse Ajax、Comet 等变通方法和黑客攻击。需要注意的重要一点是两者可以共存。因此，针对 Web 套接字而不遗漏 HTTP。

> 如果它有效，为什么没有人使用它？

我们生活在 HTTP 时代，Web 套接字相对较新。从长远来看，Web 套接字将越来越流行，并在 Web 服务中占据更大的份额。许多浏览器直到最近才正确支持 Web 套接字。请参阅[此处](http://caniuse.com/websockets)，IE 10 是 IE 中支持 Web 套接字的最新且唯一的版本。nginx 是一个广受欢迎的服务器，直到 2013 年 2 月至 3 月才支持 Web 套接字。Web 套接字成为主流需要时间，但它会的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:00:19.067

你的问题和这个很相似

[为什么在 WebSockets 可用时使用 AJAX？](https://stackoverflow.com/questions/10377384/why-use-ajax-when-websockets-is-available)

归根结底，它们都是为不同的事物而创建的，尽管您可以在大多数情况下使用 Web 套接字，即使不是在正常 HTTP 请求中可以完成的所有事情。

我建议使用 HTTPS，因为您似乎确实通过 websockets 发送身份验证数据（它也将使用 SSL，不是吗？）但这取决于您对“需要”的定义。

失败 - 缺乏对旧浏览器的支持

它在许多其他情况下都没有使用这个，因为它不是必需的，而且它仍然是“相对较新的”。

# sql-server - 将带有属性的 XML 导入 SQL Server 表

> ID：15639140
> 
> 赞同：1
> 
> 时间：2013-03-26T14:08:11.770
> 
> 标签：sql-server, xml, import

我无法将 XML 属性“Country”的值放入我的表中。

我究竟做错了什么？

这是我的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<CustomerDetails>
      <PersonalInfo Country="USA">
          <CustID>1001</CustID>
          <CustLastName>Smith</CustLastName>
          <DOB>2011-05-05T09:25:48.253</DOB>
          <Address>
            <Addr1>100 Smith St.</Addr1>
            <City>New York</City>
          </Address> 
      </PersonalInfo>   
</CustomerDetails> 
```

这是我的 SQL：

```
Drop table #Cust
CREATE TABLE #Cust
    (CustID INT, CustLastName VARCHAR(10)
             , DOB DATETIME, Addr1 VARCHAR(100), City VARCHAR(10), Country VARCHAR(20))
insert into #Cust
select
   c3.value('CustID[1]','int'),
   c3.value('CustLastName[1]','varchar(10)'),
   c3.value('DOB[1]','DATETIME'),
   c3.value('(Address/Addr1)[1]','VARCHAR(100)'),
   c3.value('(Address/City)[1]','VARCHAR(10)'),
   c3.value('Country[1]','VARCHAR(20)')
from
(
   select 
      cast(c1 as xml)
   from 
      OPENROWSET (BULK 'C:\Users\wattronts\Documents\XMLImportTest.xml',SINGLE_BLOB) as T1(c1)
)as T2(c2)
cross apply c2.nodes('/CustomerDetails/PersonalInfo') T3(c3)

Select * from #Cust 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:12:36.740

用于`@`指定您需要一个属性。

```
T3.c3.value('@Country', 'varchar(50)') 
```

# jquery - 完整的日历可拖动

> ID：15639143
> 
> 赞同：0
> 
> 时间：2013-03-26T14:08:21.423
> 
> 标签：jquery, fullcalendar

**完整日历**：您好，我对 jquery 完整日历插件有疑问。

当我创建一个可拖动的日历时，如何在月份之间拖动事件？

您只能拖动该月的事件。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T07:57:46.717

好的，有点棘手，实际上并不是解决方案。由于您不能同时显示超过一个月，您可以在下个月的第一天拖动您的活动，然后您导航到下个月并在适当的日期或再次将其移动到下个月

# android - 导入 android.media.audiofx 无法解析

> ID：15639148
> 
> 赞同：0
> 
> 时间：2013-03-26T14:08:39.300
> 
> 标签：android

我想在我的应用程序中导入均衡器和可视化器，正如我在这里看到的那样：http: [//developer.android.com/reference/android/media/audiofx/Equalizer.html](http://developer.android.com/reference/android/media/audiofx/Equalizer.html)但我明白了：导入 android.media.audiofx 不能解决。是build sdk版本的问题吗？

```
 <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="8"> 
```

-

```
 private Visualizer mVisualizer;
        private Equalizer mEqualizer; 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:12:16.807

改变：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="> 
```

至：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="9"> 
```

您需要的类仅在 API 9 中添加。如果它们是您应用程序的组成部分，您也应该将 minSdkVersion 更改为 9，或者添加运行时检查以确保您在 API 9 或更高版本上运行。

# javascript - 带有默认文本的 jQueryUI 自动完成

> ID：15639152
> 
> 赞同：0
> 
> 时间：2013-03-26T14:08:51.157
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-autocomplete

我有一个 jQuery 自动完成小部件，它在输入中有一些默认的阴影文本，例如“输入一些东西” [http://jsfiddle.net/CwmX9/](http://jsfiddle.net/CwmX9/)。用户在输入字段中输入内容并从下拉列表中选择内容后，我希望将输入返回到阴影默认文本。我几乎让它去，但它没有阴影。此外，理想情况下，我不必重复文字默认文本（即“输入内容”）两次。应该如何修改我的脚本来做到这一点？

PS。还请解释为什么有时输入值并不总是与我在输入中实际看到的字符相同。我认为这可能与我最初的问题有关。

```
<div class="ui-widget">
    <label for="tags">Tags:</label>
    <input id="tags" value="Enter Something" class="default-value" />
</div>

$('.default-value').each(function () {
    var $t = $(this),
        default_value = this.value;
    $t.css('color', '#929292');
    $t.focus(function () {
        if (this.value == default_value) {
            this.value = '';
            $t.css('color', 'black');
        }
    });
    $t.blur(function () {
        if ($.trim(this.value) == '') {
            $t.css('color', '#929292');
            this.value = default_value;
        }
    });
});

var availableTags = [
    "ActionScript",
    "AppleScript",
    "Asp",
    "BASIC",
    "C",
    "C++",
    "Clojure",
    "COBOL",
    "ColdFusion",
    "Erlang",
    "Fortran",
    "Groovy",
    "Haskell",
    "Java",
    "JavaScript",
    "Lisp",
    "Perl",
    "PHP",
    "Python",
    "Ruby",
    "Scala",
    "Scheme"];

$("#tags").autocomplete({
    source: availableTags,
    select: function (event, ui) {
        console.log(this);
        //console.log(this,$(this).val());
        $(this).val('Enter Something').blur();
        //console.log(this,$(this).val());
        return false;
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:12:59.403

只需更换

```
$(this).val('Enter Something').blur(); 
```

和

```
$(this).val('').blur(); 
```

这是修改后的示例：http: [//jsfiddle.net/netme/beFVr/](http://jsfiddle.net/netme/beFVr/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-24T16:47:28.073

[Mikhail Chernykh](https://stackoverflow.com/users/367037/mikhail-chernykh)提供的[jsfiddle](http://jsfiddle.net/netme/beFVr/)答案很棒。但是，当我在自动完成列表中进行选择时，选择不会填充到输入中。为了让它工作，我只需要从自动完成中删除选择功能。

```
$("#tags").autocomplete({
source: availableTags,
//select: function (event, ui) {
     //console.log(this);
     //console.log(this,$(this).val());
     //$(this).val('').blur();
     //console.log(this,$(this).val());
     //    return true;
     //}
   }); 
```

# node.js - 在 Node.js 子进程中提取 tar 缓冲区的管道处理

> ID：15639159
> 
> 赞同：1
> 
> 时间：2013-03-26T14:09:00.317
> 
> 标签：node.js, pipe, child-process

我想通过 Node.js 做到这一点：

```
git archive remote=git@example.com:repo.git HEAD | tar -x - -C /path/to/extracted/ 
```

所以，我写了这样的代码：

```
git = spawn 'git', ['archive', "--remote=git@example.com:repo.git", 'HEAD']
tar = spawn 'tar', ['-x', '-', '-C /path/to/extracted']

git.stderr.on 'data', (data) ->
  console.log "git error: #{data}"

git.stdout.on 'data', (data) ->
  tar.stdin.write data

tar.stderr.on 'data', (data) ->
  console.log "tar error: #{data}"

git.on 'exit', (code) ->
  console.log "git process done with code #{code}"

tar.on 'exit', (code) ->
  console.log "tar process done with code #{code}" 
```

然而，这并不像我预期的那样工作。我应该改变什么才能使其正常工作？

提前致谢。

**更新**

`-`正确的命令实际上不需要`-x`and`-C`

```
git archive remote=git@example.com:repo.git HEAD | tar -x -C /path/to/extracted/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:27:59.200

在这种情况下，您应该使用函数 exec 而不是 spawn。如执行文档中所见，它接受管道[执行文档](http://nodejs.org/api/child_process.html#child_process_child_process_exec_command_options_callback)

```
exec('git archive remote=git@example.com:repo.git HEAD | tar -x - -C /path/to/extracted/', function (error, stdout, stderr) {
    // logic here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-10T09:32:53.317

使用 child_process.exec 时应注意命令注入。您可以使用 spawn 来完成类似的行为`.pipe`，您可以将其应用于流（这是 spawn 使用的）。[https://nodejs.org/api/stream.html#stream_event_pipe](https://nodejs.org/api/stream.html#stream_event_pipe)

# javascript - 根据属性访问 javascript 对象

> ID：15639162
> 
> 赞同：1
> 
> 时间：2013-03-26T14:09:11.713
> 
> 标签：javascript, jquery, object

使用下面的函数，可以**通过知道**父对象的名称来获取`translate`属性。如果没有匹配的对象，我希望该函数能够选择具有翻译国家文本属性的对象。解决方案应该在 jQuery/Javascript 中。这是我能走多远，我不知道从这里去哪里。

 **```
 function getCurrency(country) {
    var currency = {
      'Förenade Arabemiraten' : currData = {
        'code' : 'AED',
        'info' : 'Dirham',
        'translate' : 'United Arab Emirates'
      },
      'Afghanistan' : currData = {
        'code' : 'AFN',
        'info' : 'Afghani',
        'translate' : 'Afghanistan'
      },
      'Albanien' : currData = {
        'code' : 'ALL',
        'info' : 'Lek',
        'translate' : 'Albania'
      }
    };
    console.log(currency[country]);
    if(currency[country] !== undefined) {
      return currency[country];
    }
    else {
      for (var key in currency) {
        console.log(key);
      }
    }  
  }

var foo = getCurrency('Albanien');
// alerts 'Albania'
alert(foo.translate);

var bar = getCurrency('Albania');
alert(bar.translate);
// undefined, should output 'Albanien' and all the object properties (info, code) 
```

JS 斌：http: [//jsbin.com/enezaz/1/edit](http://jsbin.com/enezaz/1/edit)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:13:48.127

你几乎在那里：

```
for (var key in currency) {
    if(currency[key].translate == country) {
        return currency[key];
    }
} 
```

此外，您应该`currData =`从文字中删除；它只是创建一个全局变量，而不是一个名为`currData`.

* * *

要同时返回国家名称，我建议您返回一个包含它的新对象：

```
function getCurrency(country) {
    var currency = {
      'Förenade Arabemiraten' : currData = {
        'code' : 'AED',
        'info' : 'Dirham',
        'translate' : 'United Arab Emirates'
      },
      'Afghanistan' : currData = {
        'code' : 'AFN',
        'info' : 'Afghani',
        'translate' : 'Afghanistan'
      },
      'Albanien' : currData = {
        'code' : 'ALL',
        'info' : 'Lek',
        'translate' : 'Albania'
      }
    };
    if(currency[country] !== undefined) {
      return {
        country: country,
        countryData : currency[country]
      };
    } else {
      for (var key in currency) {
        if(currency[key].translate == country) {
          return {
            country: key,
            countryData : currency[key]
          };
        } 
      }
    }  
  }

var foo = getCurrency('Albanien');
// alerts 'Albanien'
alert(foo.country);
// alerts 'Albania'
alert(foo.data.translate);

var bar = getCurrency('Albania');
// alerts 'Albanien'
alert(bar.country);
// alerts 'Albania'
alert(bar.data.translate); 
```**

# vb.net - 在 Facebook 上发帖时显示单个缩略图

> ID：15639163
> 
> 赞同：0
> 
> 时间：2013-03-26T14:09:13.740
> 
> 标签：vb.net, facebook, facebook-opengraph

一点背景信息是，我和我的团队为房地产代理开发了一个网站，我被分配了将当前选定房产的图像设置为 facebook 共享功能的任务。

该属性的网页是动态的，因为有几个列表，所以我所做的是选择页面上加载的第一个图像并将其设置为**og:image**元标记。

现在假设我复制 URL 并将其发布到 Facebook，它会显示正确的缩略图，但是，它还会显示来自其他列表的多个缩略图。

![](../Images/a06132fb77c57ade139d15907f54e283.png)

网站上的所有图像都超过 200 x 200 像素，并且在 3:1 的纵横比内。

我的问题是，我如何告诉 Facebook 只拍摄我的初始图像，而不是抓住其他人。是否有我可以应用的 SelectSingleImage 属性？

我已经花了比我想要的更多的时间来寻找这个问题的答案，所以感谢您提供的任何帮助，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:34:01.967

似乎 Facebook 出于某种奇怪的原因将这些图像保存在缓存中，但要解决这个问题，我所要做的就是将 URL 输入 Facebook 的[Linter](https://developers.facebook.com/tools/debug)工具，该工具又会清除其服务器上的缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:18:39.433

我有时使用的一种方法是识别 Facebook 的服务器并简单地为其提供不同的数据。这样，您实际上只能在页面上拥有一张图片（据 Facebook 所知）。

[我对vb.net](/questions/tagged/vb.net "显示标记为“vb.net”的问题")一无所知，但这里有一个简单的 PHP 代码示例。它所做的只是在请求的用户代理上执行正则表达式以将其与字符串匹配`"facebook"`。

```
$isFacebook = false;
if(preg_match("/facebook/",strtolower($_SERVER["HTTP_USER_AGENT"]))) {
  $isFacebook = true;
} 
```

Facebook 很可能有朝一日会改变他们的用户代理签名，但就目前而言，我很确定你会很安全，但要与[开发者博客](https://developers.facebook.com/blog/)和[路线图](https://developers.facebook.com/roadmap)保持同步。

# c++ - 对数组中的元素进行位移

> ID：15639167
> 
> 赞同：0
> 
> 时间：2013-03-26T14:09:16.320
> 
> 标签：c++, arrays, sorting, bit-shift

我有一个任务，我必须从文本文件中读取 4000 个名称的列表，然后在读取它们时排序到 C 样式数组中（而不是读取它们然后排序）。由于这涉及到大量元素更改索引，是否可以使用位移来同时重新排列大量元素？例如，

1.  声明一个 20 大小的基于堆的数组
2.  放置变量 x 索引 10
3.  使用数组数据类型的大小对索引 9 执行位移，以便 x 现在位于索引 11 中

另外，如果您对一般任务有任何提示，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:15:38.320

不，这听起来根本不像你会使用位移位的东西。

您将在数组中存储不同的元素（名称），并且您需要更改整个元素的顺序。这不是移位的用途。它用于将单个整数中的位向左或向右移动。

你应该只是学习`qsort()`。

不确定“在读入时排序”要求，但最简单的解决方案是在`qsort()`添加每个名称时调用。如果不允许这样做或被认为太昂贵，请考虑如何对数组进行“排序插入”。

顺便说一句，C 中的一种典型方法是使用指向字符串的指针数组，而不是使用实际字符串的数组。这很好，因为对指针数组进行排序要容易得多。

所以你会有：

```
char *names[4000]; 
```

代替

```
char names[4000][64 /* or whatever */]; 
```

这将要求您在加载每个名称时为每个名称动态分配空间，这并不难。特别是如果你有`strdup()`. :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:22:24.163

如果不允许使用 qsort() （在每次插入后这样做会很愚蠢），您可以编写自己的插入排序。这并不是对大型数组进行排序的一种非常有效的方法，但我想这是您的老师所期望的。

# sql-server-2008 - 将每月数据分解为每日数据

> ID：15639168
> 
> 赞同：2
> 
> 时间：2013-03-26T14:09:18.193
> 
> 标签：sql-server-2008, tsql

我有一家公司的预算数据，格式如下。[SqlFiddle 链接在这里](http://sqlfiddle.com/#!3/09263/1)。

```
Dept#  YearMonth  Budget($)
--------------------------
001    201301     100
001    201302     110
001    201303     105
..     .....      ...
002    201301     200
...    .....      ... 
```

我需要将其分解为每日记录，如下所示：

```
Dept#  Date       Budget($)
--------------------------
001    20130101     xxx
001    20130102     xxx
001    20130103     xxx
..     .....      ... 
```

我需要从源表中的每条记录生成每日记录。我不想假设每个月有 30 天。如何确定每个月的实际天数并以上面显示的格式分解？

我感谢任何形式的帮助。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T14:27:16.497

尝试：

```
with cte as
(select [dept#], [YearMonth], convert(datetime,[YearMonth]+'01',112) [Date], [Budget($)]
 from budget
 union all
 select [dept#], [YearMonth], dateadd(d, 1, [Date]) [Date], [Budget($)]
 from cte
 where datediff(m,[Date],dateadd(d, 1, [Date]))=0
)
select [dept#], [Date], 
       1.0*[Budget($)] / count(*) over (partition by [dept#], [YearMonth]) [DailyBudget($)]
from cte
order by 1,2 
```

（预算中有一个从整数到浮点的隐式转换，否则每日费率将四舍五入到最接近的美元 - 如果预算数据类型已经被保存为类似的东西，这将不是必需的`numeric(10,2)`。）

[（这里](http://sqlfiddle.com/#!3/09263/16)的 SQLFiddle ）

# ios - 有没有办法允许某些类访问某些其他类的私有属性？

> ID：15639173
> 
> 赞同：2
> 
> 时间：2013-03-26T14:09:20.927
> 
> 标签：ios, objective-c, scope, encapsulation, private-members

我有 2 个类，我希望能够访问彼此的属性，但我不希望从其他任何地方访问这些属性。有没有办法做到这一点？是通过子类化来实现这一点的唯一方法吗？有没有办法在两个类之间建立“特殊”关系？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-26T14:46:54.433

如果我理解您的问题，您实际上希望与继承无关的 A 类和 B 类了解比公开宣传更多的内部信息吗？

假设 A 有一个属性，称为`innardsForB`只有 B 的实例才能访问。您可以使用类扩展来声明 A 的非公共接口。

* * *

**啊**

```
@interface A:NSObject
... regular class goop here ...
@end 
```

* * *

**A-私人.h**

```
@interface A()
@property(nonatomic, strong) Innards *innardsForB;
@end 
```

* * *

**是**

```
#import "A.h"
#import "A-Private.h"

@implementation A
// because "A-Private.h" is #import'd, `innardsForB` will be automatically @synthesized
...
@end 
```

* * *

**BM**

```
#import "B.h"
#import "A-Private.h"

@implementation B
...
- (void)someMethod
{
     A *a = [self someASomewhere];
     a.innardsForB = [[Innards alloc] initForMeaning:@(42)];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T14:15:40.230

协议就是为此目的而设计的。您不能阻止 3rd 方类实现或使用协议。其中的方法是公共的，但不一定是公共接口的一部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T14:20:19.557

对象之间的通信：

[http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CocoaFundamentals/CommunicatingWithObjects/CommunicateWithObjects.html](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CocoaFundamentals/CommunicatingWithObjects/CommunicateWithObjects.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-26T14:30:26.493

我希望classA访问classB的属性，而classC不是简单地在ClassB中声明classA的引用并且不在ClassB中声明它。

例子 ：

```
@interface ClassA
@property (nonatomic, strong) UILabel *label1;
@end

#import "ClassB.h"
#import "ClassA.h"  // To access public properties and all methods declared in ClassA.h

@implementation ClassB 

ClassA *classA = ....;
classA.label1.text = ...;

@end 
```

从这个例子中，ClassB 可以访问 ClassA 的所有公共（在 CalssA.h 中声明）属性和方法。

您也可以使用委托来执行此操作。

* * *

## 回答 #5

> 赞同：-8
> 
> 时间：2013-03-26T14:29:25.523

在 obj-c 上，属性受到保护。这意味着您只能通过继承来获得属性。

```
@interface A : NSObject{
    NSObject* prop;
}
@end

@implementation A
@end

@interface B : A
@end

@implementation B
- (void)protected{
    self->prop; // yep
}
@end

@interface XXX : NSObject
@end

@implementation XXX

- (void)test{
    A* a = [[A alloc] init];
    a->prop; // wrong, will not compile
}

@end 
```

如果你想通过方法访问隐藏的属性，你可以简单地使用隐藏在实现中的类别，或者桥接。但是没有办法在两个类之间建立“特殊”关系。但是您可以在代码设计中强制执行这种关系。

# javascript - 无法选择 ui-select2 创建的列表中的项目

> ID：15639184
> 
> 赞同：11
> 
> 时间：2013-03-26T14:09:54.100
> 
> 标签：javascript, html, angularjs, angular-ui, jquery-select2

在我的 HTML 中，我有这一行：

```
<input  ng-change="privChanged()" ng-model="selectedPriv" ui-select2="privsSelect2options"></input> 
```

和`privsSelect2options`功能：

```
$scope.privsSelect2options = {
    placeholder: "Wybierz privo",
    allowClear:true,
    minimumInputLength: function(){return  3;},
    formatInputTooShort: function (input, min) {return "Wprowadź conajmniej " + min + " znaki.";},
    formatSearching: function () { return "Wyszukiwanie..."; },
    formatNoMatches: function () { return "Nie znaleziono pasujących województw."; },
    query: function (query) {
       query.callback( {results: $filter('filter')($scope.privs,{name: query.term}) } );
    },
    formatResult: function(priv){
        return priv.name;
    },
    formatSelection: function(priv){
        return priv.name;
    }
}; 
```

当我输入 3 个字母时，一切正常，它过滤结果并显示正确，但我无法单击并从结果列表中选择任何项目。任何人都可以在这件事上帮助我吗？它甚至没有进入`formatSelection`功能。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-29T12:05:53.143

问题是`Priv`类/表没有 id 属性，其主键是字段代码。我必须添加功能：

```
id : function(priv) {
        return priv.code;
     }, 
```

在`$scope.privNameSelect2options`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-03-19T14:03:22.373

请参考[Select2 Ajax Method Not Selecting](https://stackoverflow.com/questions/14819865/select2-ajax-method-not-selecting) ,

并取正确的值：

```
id: function(data){return {id: data.id};}, 
```

或者

```
id: function(data){return data.id} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-26T23:10:12.943

尽管在 select2 文档中并未真正指定，但您需要将带有函数值的 id 键传递给 select2。

```
$scope.privsSelect2options = {
    id: function(element) { return element.name; }
    ...
}; 
```

# maven-3 - 如何跳过 maven-javadoc-plugin 中的测试 api 文档？

> ID：15639185
> 
> 赞同：7
> 
> 时间：2013-03-26T14:09:58.947
> 
> 标签：maven-3, maven-site-plugin, maven-javadoc-plugin

在使用以下配置执行 'clean skip:skip' 后，我想跳过在我的 'target/site' 文件夹中生成 'testapidocs' 文件夹。

**构建配置：**

```
<build>
<plugins>
    .................
       <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-site-plugin</artifactId>
            <version>3.2</version>
        </plugin>

    </plugins>
   .........
</build> 
```

**报告配置：**

```
 <reporting>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-javadoc-plugin</artifactId>
            <version>2.9</version>
        </plugin>
    </plugins>
</reporting> 
```

当我运行“干净的站点：站点”时，它会在“目标”目录下创建以下文件夹：

**目标/站点/apidoc**

**target/site/testapidocs** - 想跳过这个

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T01:41:19.263

[选择性 Javadocs 报告](http://maven.apache.org/plugins/maven-javadoc-plugin/examples/selective-javadocs-report.html)告诉我们

> 要有选择地运行 Javadocs 报告，您只需要包含您喜欢的 Javadocs 报告。如[常见问题解答](http://maven.apache.org/plugins/maven-javadoc-plugin/faq.html#Where_in_the_pom.xml_do_I_configure_the_Javadoc_Plugin)中所述，配置取决于使用的`<build/>`标签或`<reporting/>`标签。

### 使用`<build/>`标签

```
<project>
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-javadoc-plugin</artifactId>
        <version>2.9</version>
        <configuration>
          <!-- Default configuration for all reports -->
          ...
        </configuration>
        <executions>
          <execution>
            <goals>
              <goal>javadoc</goal>
              <goal>test-javadoc</goal>
            </goals>
            <phase>site</phase>
            <configuration>
              <!-- Specific configuration for the given reports -->
              ...
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
</project> 
```

### 使用`<reporting/>`标签

```
<project>
  ...
  <reporting>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-javadoc-plugin</artifactId>
        <version>2.9</version>
        <configuration>
          <!-- Default configuration for all reports -->
          ...
        </configuration>
        <reportSets>
          <reportSet>
            <id>default</id>
            <configuration>
              <!-- Specific configuration for the given reports -->
              ...
            </configuration>
            <reports>
              <report>javadoc</report>
              <report>test-javadoc</report>
            </reports>
          </reportSet>
          <reportSet>
            <id>aggregate</id>
            <configuration>
              <!-- Specific configuration for the given reports -->
              ...
            </configuration>
            <reports>
              <report>aggregate</report>
            </reports>
          </reportSet>
        </reportSets>
      </plugin>
    </plugins>
  </reporting>
  ...
</project> 
```

我希望这可能会有所帮助。

# c# - 在 log4net 中具有单独记录器的程序集的块记录

> ID：15639186
> 
> 赞同：2
> 
> 时间：2013-03-26T14:10:05.073
> 
> 标签：c#, logging, log4net, log4net-configuration

我有两个从我的应用程序写入的日志文件，它们具有以下方式的多个程序集：

```
Assembly1 log -> MainLog.log
Assembly2 log -> MainLog.log
Assembly3 log -> MainLog.log
Assembly4 log -> MainLog.log
Assembly5 log -> SubLog.log
Assembly6 log -> SubLog.log 
```

日志文件被正确写入，但这里的问题是，`SubLog`条目也被写入`MainLog`文件。我不希望发生这种日志记录重复。这是我的 log4net 配置。

```
<log4net>
    <appender name="RollingLogFileAppender" type="log4net.Appender.RollingFileAppender">
        <file value="Logs//MainLog.txt" />
        <appendToFile value="true" />
        <maxSizeRollBackups value="10" />
        <maximumFileSize value="100KB" />
        <rollingStyle value="Size" />
        <staticLogFileName value="true" />
        <layout type="log4net.Layout.PatternLayout">
            <conversionPattern value="%M %date [%thread] %-5level %logger [%ndc] - %message        %C, %F, %l, %L  %M %newline" />
        </layout>
    </appender>
    <appender name="NewForEveryRun" type="log4net.Appender.FileAppender">
        <file type="log4net.Util.PatternString" value="Logs//SubLog-%processid.txt"/>
        <appendToFile value="true" />
        <maximumFileSize value="10MB" />
        <staticLogFileName value="true" />
        <layout type="log4net.Layout.PatternLayout">
            <conversionPattern value="%date [%thread] %-5level %logger - %message%newline" />
        </layout>
    </appender>
    <logger name="Assembly5">
        <level value="DEBUG"/>
        <appender-ref ref="NewForEveryRun"/>
    </logger>
    <logger name="Assembly6">
        <level value="DEBUG"/>
        <appender-ref ref="NewForEveryRun"/>
    </logger>
    <root>
        <level value="DEBUG" />
        <appender-ref ref="RollingLogFileAppender" />
    </root> 
```

对于`Assembly5`and `Assembly6`，我指定了 appender `NewForEveryRun`。除此之外，我还保留了`root`, 以便根据附加程序中指定的配置记录其余程序集`RollingLogFileAppender`。我想，默认情况下，根元素会记录所有程序集，即使我提到其他程序集的不同记录器也是如此。有什么方法可以阻止root`Assembly5`的日志记录吗？`Assembly6`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:34:12.877

知道了！记录器应如下所示：

```
<logger name="Assembly5" additivity="false">
    <level value="DEBUG"/>
    <appender-ref ref="NewForEveryRun"/>
</logger>
<logger name="Assembly6" additivity="false">
    <level value="DEBUG"/>
    <appender-ref ref="NewForEveryRun"/>
</logger> 
```

设置`additivity`为 false 是解决方案。不再重复记录:)

# soap - 在 ADF Mobile 中创建 CustomSOAPProvider 时出错

> ID：15639189
> 
> 赞同：1
> 
> 时间：2013-03-26T14:10:10.053
> 
> 标签：soap, oracle11g, oracle-adf, jdeveloper, soapheader

我想将安全标头添加到从 ADF 移动应用程序到 Web 服务的 SOAP 请求中。

但是，当我尝试在我的 CustomSOAPProvider 类中扩展 oracle.adfinternal.model.adapter.webservice.provider.soap.SOAPProvider 类时，它会显示“非法内部包导入。请使用公共 api”。

我已将审计规则更改为工具 - 首选项 - 审计 - 配置文件 - 审计规则 - 应用程序开发框架 - ADF 通用 - ADF java 审计规则 - “非法内部包导入。请使用公共 api”严重性和样式为“警告”。但它仍然无法正常工作。

我正在使用 JDeveloper 11.1.2.3.0 版本。

```
<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
<wsse:UsernameToken wsu:Id="UsernameToken-1">
<wsse:Username>myuser</wsse:Username>
<wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">mypassword</wsse:Password>
<wsse:Nonce EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary">3xp9MFe3E1BDAPjr8ipA8A==</wsse:Nonce>
<wsu:Created>2013-02-13T08:58:50.649Z</wsu:Created>
</wsse:UsernameToken>
</wsse:Security> 
```

这是我的 SOAP 安全标头。

请帮忙...

# eclipse - 如何在 Eclipse 中更改我的项目名称，而不是命名它们的主名称？

> ID：15639192
> 
> 赞同：0
> 
> 时间：2013-03-26T14:10:25.493
> 
> 标签：eclipse, class, project, main

我安装了较新的 Eclipse v21.0.1 并开始导入一些 android 项目，当我注意到它的 Main 类命名所有项目时？例如，如果我正在导入一个具有 MainActivity.java 的项目，它会尝试将项目命名为 MainActivity。我很困惑，因为这从未发生过，我查看了这里的所有设置和问题，但它太笼统了，所以一切都与我正在寻找的内容无关。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:47:12.273

我想到了。我试图将它们作为 android 项目导入。现在我将它们作为一般项目导入，并且它们的名称检查得很好。:)

# crystal-reports - 链接子报告组织策略

> ID：15639195
> 
> 赞同：0
> 
> 时间：2013-03-26T14:10:38.967
> 
> 标签：crystal-reports, subreport

是否有逻辑来决定如何用子报告构建主报告？

例如，我正在尝试制作一份 360（员工反馈）报告，其中有 4 种不同的数据呈现方式。每个不同的演示文稿都有不同的页眉并使用不同的分组。因此，我认为我需要将每个演示文稿制作成一个单独的报告，然后将它们全部绑定在一个带有 subs 的主报告中。

但是，我应该如何构造主人。

例如，主报表是否应该是具有最复杂数据的那个，然后另一个更简单的子报表被塞进页眉和页脚中，相对于它们需要与该“核心”报表相关的位置？或者我应该让标题页成为“主”页，有条件地抑制页眉，然后在该报告中按顺序将每种将数据作为子报表呈现的方式放入单独的组页眉中？

即对此有什么好的组织策略？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:38:13.577

如果您需要对主报表中的每组数据或每条详细记录重复子报表，则您的子报表属于组或详细信息区域。

要考虑的另一件事是，您的子报表作为“独立”报表是否有意义——它们是否可以存在于主报表的上下文之外？在这种情况下，以这种方式设计它们，并利用最终主报告上的“重新导入子报告”功能来自动获取更改。

否则没关系，只要你能得到你想要的布局——在这种情况下，只做最简单的事情。

# c - 使用包含浮点数组的 OpenCL 将结构传递给 GPU

> ID：15639197
> 
> 赞同：3
> 
> 时间：2013-03-26T14:10:42.607
> 
> 标签：c, arrays, opencl

我目前有一些数据想传递给我的 GPU 并将其乘以 2。

我创建了一个结构，可以在这里看到：

```
struct GPUPatternData
{
    cl_int nInput,nOutput,patternCount, offest;
    cl_float* patterns;
}; 
```

这个结构应该包含一个浮点数组。浮点数数组直到运行时我才会知道，因为它是由用户指定的。

主机代码：

```
typedef struct GPUPatternDataContatiner
{

    int nodeInput,nodeOutput,patternCount, offest;
    float* patterns;
} GPUPatternData; 
__kernel void patternDataAddition(__global GPUPatternData* gpd,__global GPUPatternData* output)
{
    int index = get_global_id(0);
    if(index < gpd->patternCount)
    {
        output.patterns[index] = gpd.patterns[index]*2;
    }
} 
```

这是主机代码：

```
GPUPattern::GPUPatternData gpd;    
gpd.nodeInput = ptSet->getInputCount();
gpd.nodeOutput = ptSet->getOutputCount();
gpd.offest = gpd.nodeInput+gpd.nodeOutput;
gpd.patternCount = ptSet->getCount();
gpd.patterns = new cl_float [gpd.patternCount*gpd.offest];

GPUPattern::GPUPatternData gridC;
gridC.nodeInput = ptSet->getInputCount();
gridC.nodeOutput = ptSet->getOutputCount();
gridC.offest = gpd.nodeInput+gpd.nodeOutput;
gridC.patternCount = ptSet->getCount();
gridC.patterns = new cl_float [gpd.patternCount*gpd.offest]; 
```

所有数据都被初始化，然后用值初始化，然后传递给GPU

```
int elements = gpd.patternCount;
size_t ofsdf = sizeof(gridC);
size_t dataSize = sizeof(GPUPattern::GPUPatternData)+ (sizeof(cl_float)*elements);

cl_mem bufferA = clCreateBuffer(gpu.context,CL_MEM_READ_ONLY,dataSize,NULL,&err);
openCLErrorCheck(&err);
//Copy the buffer to the device
err = clEnqueueWriteBuffer(queue,bufferA,CL_TRUE,0,dataSize,(void*)&gpd,0,NULL,NULL);

//This buffer is being written to only
cl_mem bufferC = clCreateBuffer(gpu.context,CL_MEM_WRITE_ONLY,dataSize,NULL,&err);
openCLErrorCheck(&err);
err = clEnqueueWriteBuffer(queue,bufferC,CL_TRUE,0,dataSize,(void*)&gridC,0,NULL,NULL); 
```

一切都已构建，我只检查保持为 0 的错误

```
cl_program program = clCreateProgramWithSource(gpu.context,1, (const char**) &kernelSource,NULL,&err);

////Build program
err = clBuildProgram(program, 0, NULL, NULL, NULL, NULL);

char build[2048];
clGetProgramBuildInfo(program, gpu.device, CL_PROGRAM_BUILD_LOG, 2048, build, NULL);

////Create kernal
cl_kernel kernal = clCreateKernel(program, "patternDataAddition",&err);

////Set kernal arguments
err  = clSetKernelArg(kernal,  0, sizeof(cl_mem), &bufferA);
err |= clSetKernelArg(kernal,  1, sizeof(cl_mem), &bufferC); 
```

然后被踢掉

```
size_t globalWorkSize = 1024;
size_t localWorkSize = 512;

err = clEnqueueNDRangeKernel(queue, kernal, 1, NULL, &globalWorkSize, &localWorkSize, 0, NULL, NULL); 

clFinish(queue); 
```

在这一点上，一切都出错了

```
err = clEnqueueReadBuffer(queue, bufferC, CL_TRUE, 0, dataSize, &gridC, 0, NULL, NULL);
clFinish(queue); 
```

这种情况下的错误是 -5 (CL_OUT_OF_RESOURCES)。

另外，如果我换行：

```
err = clEnqueueReadBuffer(queue, bufferC, CL_TRUE, 0, dataSize, &gridC, 0, NULL, 
```

至：

```
err = clEnqueueReadBuffer(queue, bufferC, CL_TRUE, 0, dataSize*1000, &gridC, 0, NULL, NULL); 
```

我收到错误 -30 (CL_INVALID_VALUE)。

所以我的问题是为什么我在读回缓冲区时会遇到错误。另外我不确定我是否无法使用指向我的浮点数组的指针，因为这可能会给我错误的`sizeof()`使用方法，`datasize`从而给我错误的缓冲区大小。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T17:30:14.273

您不能将包含指针的结构传递给 OpenCL

[http://www.khronos.org/registry/cl/specs/opencl-1.2.pdf](http://www.khronos.org/registry/cl/specs/opencl-1.2.pdf)（第 6.9 节）

您可以按照 Eric Bainville 指出的那样进行纠正，或者如果您对内存的限制不是很严格，您可以执行类似的操作

```
struct GPUPatternData
{
    cl_int nInput,nOutput,patternCount, offest;
    cl_float patterns[MAX_SIZE];
}; 
```

* * *

编辑：好的，如果内存是一个问题。由于您只使用`patterns`and`patternCount`您可以从结构中复制模式并将它们分别传递给内核。

```
struct GPUPatternData
    {
        cl_int nInput,nOutput,patternCount, offest;
        cl_float patterns*;
    }; 
```

从 GPU复制`patterns`到 GPU并在GPU 上`gpd`分配空间。然后`patterns``gridC`

您可以单独传递缓冲区

```
__kernel void patternDataAddition(int gpd_patternCount,
    __global const float * gpd_Patterns,
    __global float * gridC_Patterns) {

    int index = get_global_id(0);
    if(index < gpd_patternCount)
    {
        gridC_Patterns[index] = gpd_Patterns[index]*2;
    }
} 
```

当您从内核回来时，`gridC.patterns`直接将数据复制回

* * *

多一个 ：

您不必更改 CPU 结构。它保持不变。然而这部分

```
size_t dataSize = sizeof(GPUPattern::GPUPatternData)+ (sizeof(cl_float)*elements);

cl_mem bufferA = clCreateBuffer(gpu.context,CL_MEM_READ_ONLY,dataSize,NULL,&err);
openCLErrorCheck(&err);
//Copy the buffer to the device
err = clEnqueueWriteBuffer(queue,bufferA,CL_TRUE,0,dataSize,(void*)&gpd,0,NULL,NULL); 
```

应该改为类似

```
size_t dataSize = (sizeof(cl_float)*elements);  // HERE
float* gpd_dataPointer = gpd.patterns;    // HERE

cl_mem bufferA = clCreateBuffer(gpu.context,CL_MEM_READ_ONLY,dataSize,NULL,&err);
openCLErrorCheck(&err);

// Now use the gpd_dataPointer
err = clEnqueueWriteBuffer(queue,bufferA,CL_TRUE,0,dataSize,(void*)&(gpd_dataPointer),0,NULL,NULL); 
```

同样的事情也适用于`gridC`

当您复制回来时，将其复制到`gridC_dataPointer`AKA`gridC.dataPointer`

**然后继续使用该结构，就好像什么都没发生一样。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:13:55.250

问题可能出在结构内的指针上。

在这种情况下，我建议将 nInput,nOutput,patternCount,offset 作为内核参数传递，将模式作为浮点缓冲区传递：

```
__kernel void patternDataAddition(int nInput,int nOutput,
    int patternCount,int offset,
    __global const float * inPatterns,
    __global float * outPatterns) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-12-24T07:07:26.050

我知道它现在不是实际的，但我以其他方式传递了这个问题：您的代码为结构分配内存的数据保持不变，但结构应该改为

```
typedef struct GPUPatternDataContatiner
{
    int nodeInput, nodeOutput, patternCount, offest;
    float patterns[0];
} GPUPatternData; 
```

使用这个“功能”，我为 OpenCL 创建了向量

# scala - 这个scala代码有什么问题

> ID：15639198
> 
> 赞同：1
> 
> 时间：2013-03-26T14:10:43.277
> 
> 标签：scala

这个函数应该返回列表中所有数字的总和，但是当我运行它时，我总是会返回`ans=0`。

```
def sum(st: List[Int]): Int = {
  var ans=0 

  def combine(st: List[Int], ans:Int): Int = {
    if (st.isEmpty) ans else combine(st.tail, ans)        
  }
  ans
} 
```

它有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T14:13:53.190

您需要将列表的头部添加到`ans`. 目前您正在递归但实际上并未使用列表的头部。

例如，我认为您需要类似下面的内容，其中您将列表的头部添加到其余部分的总和中。

```
scala> def sum(st: List[Int]): Int = 
     | {
     | if (st.isEmpty) {
     |    0
     | }
     | else {
     |    st.head + sum(st.tail)
     | }
     | }
sum: (st: List[Int])Int 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T15:34:06.953

1）你没有调用内部方法 combine - 你只是返回 ans，因为它被初始化为 0。

2) combine 并没有真正做任何事情

我认为您要编写的代码如下：

```
def sum(st: List[Int]): Int = {
  def combine(st: List[Int], ans:Int): Int = {
    if (st.isEmpty) ans else combine(st.tail, ans + st.head)        
  }
  combine(st, 0)
} 
```

但当然更短的版本是：

```
st.foldLeft(0)(_ + _) 
```

要不就

```
st.sum 
```

它使用 Numeric 的标准类型类实例：IntIsIntegral：

[http://www.scala-lang.org/api/current/index.html#scala.math.Numeric](http://www.scala-lang.org/api/current/index.html#scala.math.Numeric) $$IntIsIntegral$

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T14:51:08.683

您在 method 中定义了一个方法`combine`，`sum`但您没有调用`combine`（除了 within `combine`，因此它永远不会被调用）。如果不调用该方法，则不会执行；仅仅定义方法并不意味着它已被执行。

如果你想用函数式编程，你也应该避免使用可变变量（`var`）；请改用不可变值 ( `val`)。

此外，您的`combine`方法不会对任何内容求和（它不会`ans`在任何地方修改，也不会使用列表中的任何值）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T14:52:12.137

我同意 Brian 关于为什么您的解决方案不起作用的回答。

此外，使用 foldLeft 使用 Scala 的 Sequence of Scala（List 实现）的 API 有一种更短的方法：

```
def sum(st: List[Int]): Int = {
    st.foldLeft(0)(_ + _)
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T17:11:19.893

foldLeft，甚至更好， sum 是 hedefalk 提到的首选选项。

# magento - localhost 到 127.0.0.1 默认

> ID：15639199
> 
> 赞同：0
> 
> 时间：2013-03-26T14:10:48.153
> 
> 标签：magento, localhost

我正在尝试在本地主机上使用 Magento，但是当我尝试登录管理区域时，屏幕会刷新。

在地址栏中，它是 localhost/magento/.......（等）。当我将其更改为 127.0.0.1/magento/.......(etc) 时，它允许我进入。当我单击管理区域中的一个按钮时，它会返回 localhost/magento/.... ..（等），我再次面临登录页面。

如何以及在何处更改设置，以便将 127.0.0.1 用作默认值而不是 localhost。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T21:49:19.280

最后经过七个小时的建议和重新安装后，我已经修复了它，对于那些有同样问题的人，我将分享我所做的。

我正在使用 Magento 1.7.0.2。显然，当您在 Windows 上安装 Magento 时，cookie 存在问题，因为它是为 linux 系统设计的。所以你需要对cookie问题进行排序。为此，请打开您的 Magento 文件夹并转到第 85-92 行的 app>code>core>mage>core>model>session>abstract varien.php：

```
 // session cookie params
    $cookieParams = array(
        'lifetime' => $cookie->getLifetime(),
        'path'     => $cookie->getPath()
        //'domain'   => $cookie->getConfigDomain(),
        //'secure'   => $cookie->isSecure(),
        //'httponly' => $cookie->getHttponly()
    ); 
```

将代码更改为此。

显然还有其他问题，例如 php curl，我没有遇到这些问题，但以下 tut：

[http://ecommercedeveloper.com/articles/1419-tutorial-avoid-two-problems-installing-magento-on-a-localhost/](http://ecommercedeveloper.com/articles/1419-tutorial-avoid-two-problems-installing-magento-on-a-localhost/)

覆盖它。这也是我从中获取信息的地方，但是我使用的版本中的代码与该版本略有不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T05:38:16.333

如果要将 loaclhost 更改为 12.0.0.1，请执行以下操作。

如果您有数据库访问权限，请转到“*core_config_data*”表并将“ **web/unsecure/base_url** ”和“ **web/secure/base_url** ”更改为 127.0.0.1 而不是 localhost。

否则，您可以使用 tony09uk 提供的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-09T10:11:19.947

在 OS XI 上找到了一种更简单的方法 - 我正在使用运行 127.0.0.1:8888 的 MAMP，这是 MAMP 安装的默认值。

*   只需将显示 localhost 的 /app/etc/config.xml 行设置为 127.0.0.1
*   删除 var 缓存和会话内容
*   清除浏览器中的 cookie

现在，这让我可以从管理员登录屏幕登录仪表板。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-06T10:19:10.133

如果您有数据库访问打开表：`core_config_data` 搜索：`SELECT * FROM core_config_data WHERE path LIKE '%cookie%'`

更改：`cookie_domain`&`cookie_path`为 = "" （空字符串）。再次登录到管理面板。固定的！

# java - XML - 强制更新

> ID：15639204
> 
> 赞同：-1
> 
> 时间：2013-03-26T14:10:59.567
> 
> 标签：java, xml

我目前正在为我的足球队制作我的主页，我非常希望浏览器在每次访问下面提到的子页面时都强制更新 XML 部分。那可能吗？

[http://www.halfmen.dk/profiler/jens-andersen.htm](http://www.halfmen.dk/profiler/jens-andersen.htm)

Ps：我使用了来自 w3schools 的 XML 部分的编码。

提前致谢...

:o) 麦克劳德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:47:21.893

麦克劳德，

如果您遇到浏览器缓存问题，您可以轻松地向每个 xml 文件添加一个随机参数，以强制浏览器刷新数据。

修改您正在使用的代码（查看 loadXMLDoc 调用的结尾）：

```
xmlDoc=loadXMLDoc("../alltime/xml-alltimestatistik.xml?v="+Math.floor((Math.random()*5000)+1).toString());
x=xmlDoc.getElementsByTagName("KAMPSNIT")[7];
y=x.childNodes[0];
document.write(y.nodeValue); 
```

请注意，您只能在文档中创建一次 xmlDoc，然后在每次需要时重复使用它。

希望能帮助到你。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:17:53.527

```
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" /> 
```

`<head></head>`在标签之间敲打

# node.js - 如何从 package.json 生成 component.json？

> ID：15639211
> 
> 赞同：1
> 
> 时间：2013-03-26T14:11:30.843
> 
> 标签：node.js, npm, bower

我正确安装了带有凉亭的 es5-shim：

```
bower install es5-shim 
```

但它不包含主文件，因此在列出来源时，我得到一个空列表：

```
bower list --sources
{} 
```

我查看了[es5-shim 存储库](https://github.com/kriskowal/es5-shim)，它只有一个[package.json](https://github.com/kriskowal/es5-shim/blob/master/package.json)，其中包含“main”的定义：“es5-shim.js”

component.json 是如何生成的？

它似乎错过了主要属性。这是我在安装时在[components](https://gist.github.com/pdjota/5245648) /es5-shim 中得到的 component.json。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:50:46.280

Bower 不使用 package.json。当 repo 没有 component.json 时，Bower 将退回并从 repo 名称和 git 标签版本生成一个 component.json，这就是它没有`main`属性的原因。

# sql - 如何授予数据库所有者 (DBO) EXTERNAL ACCESS ASSEMBLY 权限？

> ID：15639213
> 
> 赞同：38
> 
> 时间：2013-03-26T14:11:32.907
> 
> 标签：sql, sql-server, sql-server-2008, sqlclr

当我尝试从 .Net 程序集（.Net 3.5）在 SQL 2008 中创建程序集时，出现以下错误，错误提示我必须将以下任一属性设置为 true，我该怎么做？

> 数据库所有者 (DBO) 的 EXTERNAL ACCESS ASSEMBLY 权限为 TRUE
> 
> 数据库具有 TRUSTWORTHY 数据库属性
> 
> 该程序集使用证书或非对称密钥进行签名，该密钥具有相应的登录名并具有外部访问程序集权限。

完整的错误如下，

> 为程序集“SQLLogger”创建程序集失败，因为程序集“SQLLogger”未获得 PERMISSION_SET = EXTERNAL_ACCESS 的授权。当以下任一情况为真时，程序集被授权：数据库所有者 (DBO) 具有 EXTERNAL ACCESS ASSEMBLY 权限并且数据库具有 TRUSTWORTHY 数据库属性；或者程序集使用证书或非对称密钥签名，该证书或非对称密钥具有相应的登录并具有外部访问程序集权限。

提前致谢！

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2014-06-30T10:37:36.377

This worked for me:

```
EXEC sp_changedbowner 'sa'
ALTER DATABASE [dbase] SET trustworthy ON 
```

and I also did this:

```
sp_configure 'show advanced options', 1;
GO
RECONFIGURE;
GO

sp_configure 'clr enabled', 1;
GO
RECONFIGURE;
GO

sp_configure 'show advanced options', 0;
GO
RECONFIGURE;
GO 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2015-08-23T18:16:49.350

# ⚠‼请不要*设置*... `TRUSTWORTHY ON`⚠

...除非绝对必要‼ 而且，它几乎永远不会是“必要的”，即使在加载您未构建的程序集时（您总是可以添加另一个证书，或者最坏的情况：加载到 SQL Server*后*签名），或者在加载不受“支持”并因此不在 SQL Server 的 CLR 主机中的 .NET Framework 库时（您可以[使用它们签名的证书](https://dba.stackexchange.com/a/232427/30859)，或者最坏的情况：加载到 SQL Server*后签名）。*将数据库设置为`TRUSTWORTHY ON`打开一个安全漏洞，有关此的更多信息，请参阅：

[请，请，请停止使用模拟、可信和跨数据库所有权链接](https://sqlquantumleap.com/2017/12/30/please-please-please-stop-using-impersonation-execute-as/)

## 反而，

最好*执行*以下操作：

```
USE [master];

CREATE ASYMMETRIC KEY [SomeKey]
  AUTHORIZATION [dbo]
  FROM EXECUTABLE FILE = 'C:\path\to\Some.dll';

CREATE LOGIN [SomeLogin]
  FROM ASYMMETRIC KEY [SomeKey];

GRANT EXTERNAL ACCESS ASSEMBLY TO [SomeLogin]; -- or "UNSAFE" instead of "EXTERNAL ACCESS" 
```

每个实例，每个键只需要执行上述操作一次。因此，如果您对所有程序集使用相同的`snk`/`pfx`文件，那么上面显示的步骤只需为每个 SQL Server 实例执行一次；包含这些程序集的程序集和数据库的数量无关紧要。或者，如果使用证书签名，则只需在上面显示的示例代码中替换`ASYMMETRIC KEY`为。`CERTIFICATE`

这种方法允许您在数据库上保持更好的安全性（通过保持`TRUSTWORTHY`设置为`OFF`）并允许更精细地控制甚至允许将哪些程序集设置为`EXTERNAL_ACCESS`和/或`UNSAFE`（因为您可以通过使用不同的密钥进行签名和基于登录的在那些不同的键上）。

但是，如果*必须*使用该`TRUSTWORTHY ON`方法，则***数据库所有者不必是`sa`***. 要求仅仅是注册为数据库所有者的登录已被授予`EXTERNAL ACCESS ASSEMBLY`或`UNSAFE ASSEMBLY`（与上面显示的基于非对称密钥的登录相同的两个权限）。意义：

```
USE [master];
GRANT UNSAFE ASSEMBLY TO [{Login-that-is-dbo-for-DB-containing-Assembly}]; 
```

有关安全选项的更详细演练，请参阅我在 SQL Server Central 上撰写的以下文章：[SQLCLR 级别 4 的阶梯：安全性（外部和不安全的程序集）](https://www.sqlservercentral.com/steps/stairway-to-sqlclr-level-4-security-external-and-unsafe-assemblies)。

* * *

有关如何通过 Visual Studio / SSDT 自动执行此操作的详细演练，请参阅 SQL Server Central 上的以下 3 篇文章（由 3 部分组成的系列）：

*   [SQLCLR 第 6 级的阶梯：开发工具简介](https://www.sqlservercentral.com/steps/stairway-to-sqlclr-level-6-development-tools-intro)
*   [SQLCLR 7 级阶梯：开发和安全](https://www.sqlservercentral.com/steps/stairway-to-sqlclr-level-7-development-and-security)
*   [SQLCLR 8 级阶梯：使用 Visual Studio 解决 SSDT](https://www.sqlservercentral.com/steps/stairway-to-sqlclr-level-8-using-visual-studio-to-work-around-ssdt)

另外，自从写了这 3 篇文章后，我想出了一个使用 T4 模板的更简单的方法，但还没有时间写出来。当我这样做时，我将使用该文章的链接更新此答案。

## 更新

SQL Server 2017 以名为“CLR strict security”的服务器级配置选项的形式引入了一个新的复杂功能。它默认启用，并要求所有程序集，即使是标记为 的程序`SAFE`集，都使用证书或非对称密钥进行签名，具有关联的登录名，*并且*登录名具有授予的`UNSAFE ASSEMBLY`权限（不足以授予`EXTERNAL ACCESS ASSEMBLY`）。有关此新“功能”的更多详细信息，请参阅我对以下 SO 问题的回答：

[SQL Server 2017 上的 CLR 严格安全性](https://stackoverflow.com/a/44086646/577765)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-03-26T18:10:28.580

您必须在项目文件中设置这些设置！当您右键单击您的项目时，单击项目配置中的数据库设置并选择其他选项卡。你应该看到类似于我在这里的东西：![项目设置](../Images/37061cb49b0d0ebcd14d8e400e7c1af0.png)

这与以下问题相同：[Error Running CLR Stored Proc](https://stackoverflow.com/questions/72281/error-running-clr-stored-proc)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-10-20T12:38:16.527

以下代码适用于我的集成安全性：

```
ALTER DATABASE dtabasename SET TRUSTWORTHY ON;
GO

ALTER AUTHORIZATION ON DATABASE::dtabasename TO [DOMAIN\UserName]
GO 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-04-02T21:36:53.383

这适用于：

*   Visual Studio 2015 更新 2。
*   视觉工作室 2017。
*   Visual Studio 2017 和 SQL Server 2019（感谢@Ramkumar Sambandam）。

在您的项目设置中，选择“外部访问”：

[![在此处输入图像描述](../Images/3fbbf665b78719aac6472640e4fc2eb3.png)](https://i.stack.imgur.com/fCKbL.png)

在发布时，错误消息说它不能接受“EXTERNAL_ACCESS”，除非程序集设置为“Trustworthy”。

因此，在项目设置中，将程序集设置为“可信赖”：

[![在此处输入图像描述](../Images/f9024fcd89928058f48d7841a1abb078.png)](https://i.stack.imgur.com/NpGqB.png)

这意味着我能够运行[列出本地硬盘驱动器上文件的示例用户定义函数](https://www.mssqltips.com/sqlservertip/2582/introduction-to-sql-server-clr-table-valued-functions/)。

如果安全性仍然过于严格，请将属性添加`DataAccess = DataAccessKind.Read`到您的 UDF，例如：

```
[Microsoft.SqlServer.Server.SqlFunction(FillRowMethodName = "FindFiles", DataAccess = DataAccessKind.Read, TableDefinition = "FileName nvarchar(500), FileSize bigint, CreationTime datetime")] 
```

# 2017-07-02 更新

在`SQL Server 2016`+`Visual Studio 2015`上，您可能还必须执行以下操作：

*   `use master;grant unsafe assembly to [Domain\Username];`
*   在模式下运行任何程序（例如 Visual Studio 或任何 C# 实用程序），`Administrator`以授予它们足够的权限来发布`UNSAFE`程序集。

如果不起作用，请尝试使用用户名`sa`和管理员密码进行连接。这将始终有效，无论 Visual Studio 是否在`Administrator`模式下运行。

# 2020-01-17 更新

更新了兼容的 VS + SQL Server 组合列表。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-09-30T11:05:11.727

这就是我设法使它工作的方法：

```
ALTER DATABASE databasename SET trustworthy ON

sp_configure 'show advanced options', 1;
GO
RECONFIGURE;
GO

sp_configure 'clr enabled', 1;
GO
RECONFIGURE;
GO

sp_configure 'show advanced options', 0;
GO
RECONFIGURE;
GO

/
DROP ASSEMBLY assemblyname

GO

CREATE ASSEMBLY assemblyname
FROM 0x4D5A9000.....
WITH PERMISSION_SET = EXTERNAL_ACCESS 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-10-03T08:08:10.553

this single line solves the problem for me

```
use master;
grant external access assembly to [domain\username] 
```

# php - 可以将我的 php 应用程序中的时区设置为应用程序实际位置以外的时间吗？

> ID：15639215
> 
> 赞同：0
> 
> 时间：2013-03-26T14:11:43.760
> 
> 标签：php, mysql, lamp

我有一个我支持的旧版 php 应用程序，我们正在将此应用程序从位于中西部 (CST) 的托管提供商移动到我们在东海岸 (EST) 的本地网络。当我移动应用程序时，我注意到许多日期和时间都不正确。这是一个调度/日历应用程序，它使用存储在 db (mysql) 中的 unix 时间戳。我发现如果我添加`date_default_timezone_set('America/Chicago');`到应用程序配置文件中，那么一切都很好。我通过向应用程序添加新数据进行了一些测试，一切看起来都很好。我的问题是，是否可以将应用程序的默认时区设置为 America/Chicago，即使它在 EST 中运行？如果我这样做了，我将来会面临什么影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:14:56.713

您最好在操作系统中设置时区，这样您就不会遇到任何冲突。MySQL 现在不会就时区达成一致，如果您有使用 MySQL 日期函数的查询，这可能会出现问题。或为您处理日期的任何其他软件，例如电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:17:42.580

始终建议在存储数据时使用 GMT 日期时间，并在检索后将其转换为所需的时区。

在您的情况下，在 php 中设置默认时区将起作用，但当您的某些查询使用 now() 或 CURRENT_TIMESTAMP 时，它将失败。如果可能，将机器时区更改为 CST 以避免任何未知问题。

# python - 如何在 OSX Mountain Lion 中为应用程序包设置默认语言环境

> ID：15639218
> 
> 赞同：1
> 
> 时间：2013-03-26T14:11:57.573
> 
> 标签：python, locale, osx-mountain-lion, nsbundle, py2app

如何设置在 OS X Mountain Lion 中运行应用程序的默认语言环境（LANG，LC_ALL = en_US.UTF-8）？

我正在尝试使用 py2app 运行打包到 .app 的 Python 程序。通过双击运行应用程序时，代码段

```
import locale
print locale.getlocale() 
```

返回（无，无）

但是，当通过执行从终端运行应用程序时

```
opensesame.app/Contents/MacOS/opensesame 
```

getlocale() 函数正确返回 (en_US,UTF-8)
（因为终端具有正确的环境设置）

我发现双击时应用程序在与从终端运行时不同的环境中运行，所以现在我正在尝试为应用程序设置默认编码变量。

我已经尝试了我发现的建议： [如何在 Mac OS X 上的 py2app 打包 Python 应用程序中获取系统默认语言/区域设置？](https://stackoverflow.com/questions/4719789/how-can-you-get-the-system-default-language-locale-in-a-py2app-packaged-python) 并按照以下说明操作：http: [//developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPInternational/Articles/ChoosingLocalizations.html](http://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPInternational/Articles/ChoosingLocalizations.html)

我已将*CFBundleLocalizations*和*LSEnvironment*键添加到应用程序包内的 Info.plist（在下面发布），但 getlocale() 函数不断返回（无，无）

谁能告诉我为 OS X 应用程序正确设置这些变量，以便 Python 选择这些变量？

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>CFBundleDevelopmentRegion</key>
    <string>English</string>
    <key>CFBundleDisplayName</key>
    <string>opensesame</string>
    <key>CFBundleExecutable</key>
    <string>opensesame</string>
    <key>CFBundleIconFile</key>
    <string>opensesame.icns</string>
    <key>CFBundleIdentifier</key>
    <string>org.pythonmac.unspecified.opensesame</string>
    <key>CFBundleInfoDictionaryVersion</key>
    <string>6.0</string>
    <key>CFBundleName</key>
    <string>opensesame</string>
    <key>CFBundlePackageType</key>
    <string>APPL</string>
    <key>CFBundleShortVersionString</key>
    <string>0.0.0</string>
    <key>CFBundleSignature</key>
    <string>????</string>
    <key>CFBundleVersion</key>
    <string>0.0.0</string>
    <key>CFBundleLocalizations</key>
    <string>en_US.UTF-8</string>
    <key>LSHasLocalizedDisplayName</key>
    <false/>
    <key>NSAppleScriptEnabled</key>
    <false/>
    <key>NSHumanReadableCopyright</key>
    <string>Copyright not specified</string>
    <key>NSMainNibFile</key>
    <string>MainMenu</string>
    <key>NSPrincipalClass</key>
    <string>NSApplication</string>
    <key>LSEnvironment</key>
    <dict>
        <key>LANG</key>
        <string>en_US.UTF-8</string>
        <key>LC_ALL</key>
        <string>en_US.UTF-8</string>
    </dict>
    <key>PyMainFileNames</key>
    <array>
        <string>__boot__</string>
    </array>
    <key>PyOptions</key>
    <dict>
        <key>alias</key>
        <false/>
        <key>argv_emulation</key>
        <false/>
        <key>emulate_shell_environment</key>
        <false/>
        <key>no_chdir</key>
        <false/>
        <key>prefer_ppc</key>
        <false/>
        <key>site_packages</key>
        <false/>
        <key>use_pythonpath</key>
        <false/>
    </dict>
    <key>PyResourcePackages</key>
    <array/>
    <key>PyRuntimeLocations</key>
    <array>
        <string>@executable_path/../Frameworks/Python.framework/Versions/2.7/Python</string>
    </array>
    <key>PythonInfoDict</key>
    <dict>
        <key>PythonExecutable</key>
        <string>@executable_path/../Frameworks/Python.framework/Versions/2.7/Python</string>
        <key>PythonLongVersion</key>
        <string>2.7.3 (default, Mar 19 2013, 18:26:22) 
[GCC 4.2.1 Compatible Apple LLVM 4.2 (clang-425.0.27)]</string>
        <key>PythonShortVersion</key>
        <string>2.7</string>
        <key>py2app</key>
        <dict>
            <key>alias</key>
            <false/>
            <key>template</key>
            <string>app</string>
            <key>version</key>
            <string>0.7.3</string>
        </dict>
    </dict>
</dict>
</plist> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:35:00.297

使用 py2app 的 0.7 分支的尖端（不久将是 0.7.4），我可以部分重现该问​​题，因为 locale.getlocale() 无论环境中设置了哪些 LC_* 变量，都会返回 (None, None) .

当我在调用 locale.getlocale() 之前调用 locale.setlocale(locale.LC_AL, "") 时，我确实获得了由 LC_ALL 或 LANG 环境变量指示的语言环境信息（通过 Info.plist 中的 LSEnvironment 键设置，当 double-点击应用程序）。

# c# - 实现弹出文本框效果

> ID：15639219
> 
> 赞同：1
> 
> 时间：2013-03-26T14:12:05.073
> 
> 标签：c#, wpf

当我开始在窗口中输入内容时，我想要一个文本框“弹出”，当文本框为空时，它会折叠起来。

这是我当前的 xaml：

```
<TextBox DockPanel.Dock="Top" Margin="2,0,3,2" x:Name="PopupSearchBox"
         Visibility="{Binding SearchFilter.Length,Converter={StaticResource _BooleanToVisibilityConverter}}"
         Text="{Binding SearchFilter,UpdateSourceTrigger=PropertyChanged}" /> 
```

这似乎工作，但我怎样才能让它在折叠时接收输入，以便它可以处理它并变得可见？

# javascript - 带链接的 div 在我可以使用之前消失（jquery 隐藏/显示）

> ID：15639221
> 
> 赞同：-1
> 
> 时间：2013-03-26T14:12:10.017
> 
> 标签：javascript, jquery, show-hide

我有一个图标，当我将鼠标悬停在它上面时，它会显示一个带有链接的 div。用户应该能够单击此链接，但当鼠标离开图标时它会消失。有谁知道我怎样才能防止这种情况发生？

编码：

```
$('.div1').hover(function(e){   
    e.preventDefault();
    e.stopPropagation();
    $(this).next().show('fast');
},
function(e){
    e.preventDefault();
    e.stopPropagation();    
    $(this).next().hide('fast');
}); 
```

我做了一个 JSfiddle 来显示问题：

[http://jsfiddle.net/2wrjG/5](http://jsfiddle.net/2wrjG/5)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:21:49.197

问题是您在尝试单击链接时留下了 img-tag。我建议包装所有内容并在此包装上调用悬停。

这是一个工作小提琴：http: [//jsfiddle.net/2wrjG/2/](http://jsfiddle.net/2wrjG/2/)

```
$('.wrapper').hover(function (e) {
    e.preventDefault();
    e.stopPropagation();
    $(this).children('a').show('fast');
},

function (e) {
    e.preventDefault();
    e.stopPropagation();
    $(this).children('a').hide('fast');
}); 
```

HTML部分：

```
<div class="wrapper">
<img class="domaininfo" src="http://domeinwinkel.sitestatus.nl/gfx/itje.png">
<a class="domain-info-window" id="domain-info-window-2" href="#">
Is deze domeinnaam bij een andere provider geregistreerd maar wil je profiteren van de voordelen van Domeinwinkel? Verhuizen naar Domeinwinkel is snel geregeld!
</a>
</div> 
```

CSS：

```
.domaininfo {
    position: relative;
    top: 0px;
    left: 0px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:20:29.143

```
$('.domaininfo').hover(function (e) {
    e.preventDefault();
    e.stopPropagation();
    $(this).next().show('fast');
},
function (e) {
    e.preventDefault();
    e.stopPropagation();
    $('.domain-info-window').hover(function (e) {
        e.preventDefault();
        e.stopPropagation();
    },
    function (e) {
        e.preventDefault();
        e.stopPropagation();
        $(this).hide('fast');
    });
}); 
```

[在这里演示](http://jsfiddle.net/2wrjG/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T14:33:55.413

将鼠标悬停在图像上时会显示 div。如果您希望链接仅在您单击它时消失，我想这可以帮助您。

```
enter code here

 $('.domaininfo').hover(function (e) {
          e.preventDefault();
          e.stopPropagation();
          $(this).next().show('fast');
    },function (e) {
            e.preventDefault();
            e.stopPropagation();
            $('.domain-info-window').click(function (e) {
                $(this).hide();
            });
        }); 
```

# javascript - 对象上的意外“参数”属性

> ID：15639224
> 
> 赞同：6
> 
> 时间：2013-03-26T14:12:17.993
> 
> 标签：javascript

在下文中，第二个和第三个控制台输出似乎相互矛盾：

```
function test() {

    console.log(arguments); // -> ["my", "arguments"]

    console.dir(this); // -> test function with arguments property set to null

    console.log(this.arguments); // -> ["my", "arguments"]

}

test.call(test, 'my', 'arguments'); 
```

根据我的评论，检查 show 上的属性`arguments`，同时明确记录 show 。`this``null``this.arguments``["my", "arguments"]`

`this`当您以这种方式调用函数时，究竟是什么？我没想到`this.arguments`会包含调用参数！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T14:22:00.033

> 当您以这种方式调用函数时，这到底是什么？我没想到 this.arguments 包含调用参数！

[`this`关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)确实指的是函数`test`- 这就是您[`call`编辑](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)它的内容。您可以通过记录来断言`this === test`。

那么这个`arguments`属性是什么？在函数调用期间设置为实际[对象](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)的一个[​​非常不推荐使用](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/arguments)的对象（此后被删除，这似乎是没有正确捕获它的原因）。不要使用它，也不在乎它:-)[`arguments`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)`console.dir`

```
function test() {
    console.assert(this === test);
    console.assert(this.arguments === arguments);
    console.log(Object.getOwnPropertyDescriptor(this, "arguments"));
}
test.call(test, 'my', 'arguments');

// result (in Opera):
Object {
    configurable: false,
    enumerable: false,
    value: Arguments {
        0: "my",
        1: "arguments",
        callee: Function {…},
        length: 2
    },
    writable: false
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T14:21:03.763

[MDN 说](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)

> `arguments`作为 的属性`Function`不能再使用。

因此我根本不会尝试使用`this.arguments`，而是使用局部函数变量`arguments`。很明显，还有一些魔法正在创造`arguments`。

# css - 无法在响应式布局上调整背景大小

> ID：15639227
> 
> 赞同：0
> 
> 时间：2013-03-26T14:12:26.207
> 
> 标签：css

我在一个客户网站上工作，正面临一个巨大的问题。我有一个具有 repeat-x 属性的背景图像，我需要调整它的大小以调整窗口大小（就像响应图像的行为一样，但现在有背景）

所以代码大致是这样的：

```
<style>
body {padding: 0px}
#wrapper { background: url("images/barra.fw.png") repeat-x scroll 0px 115px transparent !important;}
</style>

<body>

<div id="wrapper">

<div id="pagelayout">

    Lorem ipsum

</div>

</div> 
```

为了澄清我想要的是垂直调整背景图像以保持比例。该网站是这个：[http://supersorriso.pt](http://supersorriso.pt)。

PS：已经试图搞砸一切，无法弄清楚出了什么问题，或者这是否可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:39:23.783

我相信您可以`background-size`在需要调整其背景大小的元素上使用该属性。

在您的媒体查询中：

```
#wrapper{
  background-size:80px 60px;
} 
```

您需要进行数学运算才能获得正确的纵横比。

# c# - 行进方向的旋转地图控制，Windows Phone

> ID：15639236
> 
> 赞同：-1
> 
> 时间：2013-03-26T14:12:47.220
> 
> 标签：c#, windows-phone-7, bing-maps

我计算路线并观察用户的当前位置，当它开始移动时，我想沿行进方向旋转地图。我怎样才能做到这一点？

提前致谢！对不起我的英语不好^^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:21:56.200

您可以从字面上将 RotateTransform 应用于地图控件并使用指南针传感器（磁力计）来获取行进方向。

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202974(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202974(v=vs.105).aspx)

请阅读上述链接的“确定指南针方向模式”部分。

# node.js - 用户登录后页面刷新不适用于 Passport js

> ID：15639237
> 
> 赞同：2
> 
> 时间：2013-03-26T14:12:48.687
> 
> 标签：node.js, authentication, express, passport.js

我正在使用以下代码使用护照 js 对用户进行身份验证

```
/**
 * Module dependencies.
 */

var express = require('express')
  , routes = require('./routes')
  , http = require('http')
  , path = require('path');

var app = express();

var config = require('./config');

var User = require('./models/user');

var passport = require('passport'),
    FacebookStrategy = require('passport-facebook').Strategy;

//setting up passport
passport.serializeUser(function(user, done){
    done(null, user.id);
});

passport.deserializeUser(function(id, done){
    User.findById(id, function(err, user){
        done(err, user);
    });
});

passport.use(new FacebookStrategy({
        clientID: config.development.fb.appid,
        clientSecret: config.development.fb.appSecret,
        callbackURL: config.development.fb.url + 'fbauthed'
    },

    function (accessToken, refreshToken, profile, done) {
        User.findOne({
            'fbId': profile.id
        }, function (err, oldUser) {
            if (oldUser) {
                console.log('Existing user: ' + oldUser.name + ' found and logged in');
                done(null, oldUser);
            } else {
                var newUser = new User();
                newUser.fbId = profile.id;
                newUser.name = profile.displayName;
                newUser.email = profile.emails[0].value;
                newUser.username = profile.username;
                console.log(profile);

                newUser.save(function (err) {
                    if (err) throw err;
                    console.log('New user:' + newUser.name + 'created and logged in');
                    done(null, newUser);
                });
            }
        });
    }

));

app.configure(function(){
    app.set('port', process.env.PORT || 5000);
    app.set('views', __dirname + '/views');
    app.set('view engine', 'jade');
    app.use(express.favicon());
    app.use(express.logger('dev'));
    app.use(express.cookieParser());
    app.use(express.session({secret: 'big secret'}));
    app.use(passport.initialize());
    app.use(passport.session());
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(app.router);
    app.use(express.static(path.join(__dirname, 'public')));
});

app.configure('development', function(){
    app.use(express.errorHandler());
});

app.get('/', routes.index);
app.get('/fbauth', passport.authenticate('facebook', {scope: 'email'}));
app.get('/fbauthed', passport.authenticate('facebook',{ failureRedirect: '/'}), routes.loggedin);

app.get('/logout', function(req,res){
    req.logOut();
    res.redirect('/');
});
//app.get('/users', user.list);

http.createServer(app).listen(app.get('port'), function(){
    console.log("Express server listening on port " + app.get('port'));
}); 
```

上面的代码在用户进行身份验证时非常有用，但是在身份验证后页面刷新会引发如下错误。

```
Express
500 failed to obtain access token (status: 400 data: {"error":{"message":"This authorization code has been used.","type":"OAuthException","code":100}})
at /home/colm/javascript/facebookauth/node_modules/passport-facebook/node_modules/passport-oauth/lib/passport-oauth/strategies/oauth2.js:125:38
at exports.OAuth2.getOAuthAccessToken (/home/colm/javascript/facebookauth/node_modules/passport-facebook/node_modules/passport-oauth/node_modules/oauth/lib/oauth2.js:131:18)
at passBackControl (/home/colm/javascript/facebookauth/node_modules/passport-facebook/node_modules/passport-oauth/node_modules/oauth/lib/oauth2.js:77:9)
at IncomingMessage.exports.OAuth2._request.request.on.callbackCalled (/home/colm/javascript/facebookauth/node_modules/passport-facebook/node_modules/passport-oauth/node_modules/oauth/lib/oauth2.js:94:7)
at IncomingMessage.EventEmitter.emit (events.js:126:20)
at IncomingMessage._emitEnd (http.js:366:10)
at HTTPParser.parserOnMessageComplete [as onMessageComplete] (http.js:149:23)
at CleartextStream.socketOnData [as ondata] (http.js:1447:20)
at CleartextStream.CryptoStream._push (tls.js:544:27)
at SecurePair.cycle (tls.js:898:20) 
```

是什么原因造成的，我该如何解决这个问题？任何帮助都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:21:41.240

用于处理 FB 回调的路由应该只发出重定向（如果身份验证失败返回登录页面，或者身份验证成功时返回“登录”页面）。

您正在调用`routes.loggedin`处理该路线（如果成功）：

```
app.get('/fbauthed', passport.authenticate('facebook',{ failureRedirect: '/'}), routes.loggedin); 
```

这会将 FB 传递的所有令牌保留在 URL 中，从而导致“此授权代码已被使用”消息。

所以试试这个：

```
app.get('/loggedin', ensureLoggedIn('/'), routes.loggedin); // see below
app.get('/fbauthed', passport.authenticate('facebook',{ 
  failureRedirect: '/',
  successRedirect: '/loggedin'
})); 
```

[`ensureLoggedIn`](https://github.com/jaredhanson/connect-ensure-login)是一个中间件，它将检查用户是否登录，如果没有，将重定向到`/`（或您喜欢的任何 URL）。

# c# - 将块与存储过程一起使用

> ID：15639240
> 
> 赞同：2
> 
> 时间：2013-03-26T14:12:58.073
> 
> 标签：c#, asp.net, .net, stored-procedures

我正在尝试习惯在 C# 中使用“使用”块，但我很难理解何时应该使用它们。

这是一个例子。

我的原始代码，没有`using`块：

```
SqlConnection conn = new SqlConnection(cCon.getConn());
    SqlCommand cmd = new SqlCommand("sp_SaveSomething", conn);
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.Parameters.Add(new SqlParameter("@x", xxx));
    cmd.Parameters.Add(new SqlParameter("@ORG", ORG));        
    try
    {
        conn.Open();
        cmd.ExecuteNonQuery();
    }
    catch (Exception ex)
    { }
    finally
    {
        conn.Close();
    } 
```

但我真的应该这样做吗？还是我应该使用`(SqlConnection conn = new SqlConnection(cCon.getConn()))`？请帮助我理解这一点。我原来做的方式错了吗？

```
SqlConnection conn = new SqlConnection(cCon.getConn());
   using( SqlCommand cmd = new SqlCommand("sp_SaveSomething", conn))
{
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.Parameters.Add(new SqlParameter("@x", xxx));
    cmd.Parameters.Add(new SqlParameter("@ORG", ORG));        
    try
    {
        conn.Open();
        cmd.ExecuteNonQuery();
    }
    catch (Exception ex)
    { }
    finally
    {
        conn.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T14:15:19.933

> 但我很难理解什么时候应该使用它们。

这很简单。每次处理实现 IDisposable 接口的类时，都应该使用它们。像这样：

```
using (SqlConnection conn = new SqlConnection(cCon.getConn()))
using (SqlCommand cmd = conn.CreateCommand())
{
    conn.Open();
    cmd.CommandText = "sp_SaveSomething";
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.Parameters.Add(new SqlParameter("@x", xxx));
    cmd.Parameters.Add(new SqlParameter("@ORG", ORG));        
    cmd.ExecuteNonQuery();
} 
```

如果你想处理一些异常，你可以将你想处理的代码包装在 try/catch 语句中：

```
try
{
    using (SqlConnection conn = new SqlConnection(cCon.getConn()))
    using (SqlCommand cmd = conn.CreateCommand())
    {
        conn.Open();
        cmd.CommandText = "sp_SaveSomething";
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.Add(new SqlParameter("@x", xxx));
        cmd.Parameters.Add(new SqlParameter("@ORG", ORG));        
        cmd.ExecuteNonQuery();
    }
}
catch (Exception ex)
{
    // do something here with the exception, don't just consume it,
    // otherwise it's meaningless to catch it
} 
```

正如您所看到的，所有 IDisposable 资源（此代码片段中的 SqlConnection 和 SqlCommand）现在都正确包装在`using` 语句中，从而保证即使抛出异常也能正确处理它们。因此，您不再需要使用 finally 语句并明确地执行此操作。

还要记住，ADO.NET 使用的[`connection pool`](http://msdn.microsoft.com/en-us/library/8xx3tyca.aspx)含义是，当您`.Open()`在 SqlConnection 上调用方法时，您不会打开与数据库的物理连接。您只是从池中抽出一个。当您调用 .Close（或 .Dispose）方法时，您并没有关闭连接。您只是将它返回到连接池，以便它可以被重用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:16:15.807

如果将其放入 using 块中，则不必关闭连接。Using 块用于实现 IDisposable 的对象。IDisposable 允许对象在被 GC 收集之前清除非托管资源。这释放了内存并允许 GC 收集该对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T14:16:26.657

using 块只是一个 try/finally 子句，具有自动关闭和处置一次性对象的功能。仅当您计划以某种方式处理抛出的异常时，才添加内部 try/catch。在您的示例中，您在 catch 块中什么都不做，因此没有必要。

SqlCommand 和 SqlConnection 都是一次性的，因此您的代码应更改为

```
using(SqlConnection conn = new SqlConnection(cCon.getConn())
using( SqlCommand cmd = new SqlCommand("sp_SaveSomething", conn))
{
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.Parameters.Add(new SqlParameter("@x", xxx));
    cmd.Parameters.Add(new SqlParameter("@ORG", ORG));        
    conn.Open();
    cmd.ExecuteNonQuery();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T14:16:46.607

实际上，您应该在这里有几个 using 块，因为`SqlConnection`两者`SqlCommand`都实现了`IDisposable`. 并且`using`还负责在最后关闭连接，因此显式`conn.Close();`变得不必要。

```
 using (SqlConnection conn = new SqlConnection(cCon.getConn()))
    using (SqlCommand cmd = new SqlCommand("sp_SaveSomething", conn))
    {
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.Add(new SqlParameter("@x", xxx));
        cmd.Parameters.Add(new SqlParameter("@ORG", ORG));
        try
        {
            conn.Open();
            cmd.ExecuteNonQuery();
        }
        catch (Exception ex)
        {
            // Log error, etc.
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T14:17:45.800

它会这样：

```
using (SqlConnection conn = new SqlConnection(cCon.getConn()))
{
    using (SqlCommand cmd = new SqlCommand("sp_SaveSomething", conn))
    {
        conn.Open();
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.Add(new SqlParameter("@x", xxx));
        cmd.Parameters.Add(new SqlParameter("@ORG", ORG));        

        cmd.ExecuteNonQuery();
    }
} 
```

作为`SqlConnection`和`SqlCommand`实现`IDisposable`接口，`using`块将处理`Close`和`Dispose`方法。

# javascript - 从 JSON 数据传递变量

> ID：15639242
> 
> 赞同：0
> 
> 时间：2013-03-26T14:13:02.390
> 
> 标签：javascript, ios, titanium

我正在使用 Titanium for ios 构建一个移动应用程序，我很难让我的手臂环绕传递的变量。我正在使用本地数据库和远程数据库的组合来传递我的数据。在这种情况下，我想传递所选 tableViewRow 上的数据。显示我称之为“categorydescription”的数据的标签。在我的 table.addEventListener 中，我想将该数据作为新窗口的标题传递，并将相同的数据传递给远程服务器上的我的 php 文件。这是我尝试使用的代码：

```
var xhr = Ti.Network.createHTTPClient({
onload: function() {
Ti.API.debug(this.responseText);

var json = JSON.parse(this.responseText);
for (i = 0; i < json.cms_client.length; i++) {
    client = json.cms_client[i];
    row = Ti.UI.createTableViewRow({
        height:'44dp',
        hasChild:true
    });

var categorydescription = Ti.UI.createLabel({
        text:client.catdesc,
        font:{fontSize:'16dp', fontWeight:'bold'},
    height:'auto',
    left:'10dp',
    color:'#000'
    });

row.add(categorydescription);
    tableData.push(row);
}
table.addEventListener('click',function(e) {
    var win = Ti.UI.createWindow({url: 'clients.js', title: ??});
    var catdesc = ??;
    win.catdesc = catdesc;
    Titanium.UI.currentTab.open(win,{animated:true});
}); 
 table.setData(tableData); 
```

有人会这么好心告诉我我需要用什么代替吗？在上面的“标题”和“var catdesc”中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:04:40.910

只需将类别描述和标题添加到行对象本身：

```
row = Ti.UI.createTableViewRow({
    height:'44dp',
    hasChild:true,
    categoryDescription : client.catdesc, //Add this
    clientTitle : client.title // Add this
}); 
```

现在让它们进入监听器：

```
table.addEventListener('click',function(e) {
    var win = Ti.UI.createWindow({url: 'clients.js', title: e.row.title});
    var catdesc = e.row.categoryDescription;
    win.catdesc = catdesc;
    Titanium.UI.currentTab.open(win,{animated:true});
}); 
```

# line - 用 simplecv 和 pyqt4 画线

> ID：15639243
> 
> 赞同：0
> 
> 时间：2013-03-26T14:13:04.873
> 
> 标签：line, pyqt4, draw, simplecv

我正在尝试将 simplecv 集成到 pyqt4 并取得了一些成功。我能够通过 simplecv 在 pyqt4 中看到网络摄像头捕获，我可以使用 simplecv 修改图像，它在 pyqt4 中显示正常，但是当我尝试向图像添加几何图形或文本时，它没有在 pyqt4 中显示。如果我自己运行 simpleCV 代码，它可以正常工作。有人可以帮我理解为什么它不起作用吗？顺便说一句，正如你所见，我是 pyqt4 和 simpleCV 的新手。查看我目前拥有的代码。

```
#!/usr/bin/env python
import os
import sys
import signal
from PyQt4 import uic, QtGui, QtCore

from webcamGUI3 import *
from SimpleCV import *

class Webcam(QtGui.QMainWindow):
    def __init__(self, parent=None):

        QtGui.QWidget.__init__(self,parent)        
        self.MainWindow = Ui_MainWindow()
        self.MainWindow.setupUi(self)
        self.webcam = Camera(0,{ "width": 640, "height": 480 })

        self.timer = QtCore.QTimer()

        self.connect(self.timer, QtCore.SIGNAL('timeout()'), self.show_frame)

        self.timer.start(1);

    def show_frame(self):
        ipl_image = self.webcam.getImage()
        ipl_image.dl().circle((150, 75), 50, Color.RED, filled = True)
        data = ipl_image.getBitmap().tostring()
        image = QtGui.QImage(data, ipl_image.width, ipl_image.height, 3 * ipl_image.width, QtGui.QImage.Format_RGB888)
        pixmap = QtGui.QPixmap()
        pixmap.convertFromImage(image.rgbSwapped())
        self.MainWindow.lblWebcam.setPixmap(pixmap)

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    webcam = Webcam()
    webcam.show()
    app.exec_() 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T00:14:59.893

我有我的朋友，很简单你只需添加

  ipl_image = ipl_image.applyLayers()

看：

> ```
>  ipl_image = ipl_image = self.webcam.getImage().binarize().invert()
>     ipl_image.drawRectangle(30,50,100,100,color=Color.RED,width=3)
>     ipl_image.drawText('ola galera',80,190,fontsize=50)
>     ipl_image = ipl_image.applyLayers()
> 
>     data = ipl_image.getBitmap().tostring()
>     image = QtGui.QImage(data, ipl_image.width, ipl_image.height, 3 * ipl_image.width, QtGui.QImage.Format_RGB888)
>     pixmap = QtGui.QPixmap()
>     pixmap.convertFromImage(image.rgbSwapped())
>     self.MainWindow.label.setPixmap(pixmap) 
> ```

# css - 第 n 个范围的 CSS 选择器？

> ID：15639247
> 
> 赞同：58
> 
> 时间：2013-03-26T14:13:17.853
> 
> 标签：css, css-selectors

如何调整下面的 CSS 选择器：

```
.myTableRow td:nth-child(?){
  background-color: #FFFFCC;
} 
```

所以它适用于`td`列`2`〜`4`？

```
<table>
  <tr class="myTableRow">
    <td>column 1</td>
    <td>column 2</td>
    <td>column 3</td>
    <td>column 4</td>
    <td>column 5</td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2015-01-21T07:17:35.787

您可以使用的另一种方法是：

```
.myTableRow td:nth-child(n+2):nth-child(-n+4){
    background-color: #FFFFCC;
} 
```

这更清楚一些，因为它包含了范围 (`2`和`4`) 中的数字，而不必从末尾倒数。

它也更强大一些，因为您不必考虑项目的总数。

为了澄清：

```
:nth-child(n+X)     /* all children from the Xth position onward */
:nth-child(-n+x)    /* all children up to the Xth position       */ 
```

**例子：**

```
#nn div {
    width: 40px;
    height: 40px;
    background-color: black;
    display: inline-block;
    margin-right: 10px;
}

#nn div:nth-child(n+3):nth-child(-n+6) {
    background-color: blue;
}
```

```
<div id="nn">
    <div></div>    
    <div></div>    
    <div></div>    
    <div></div>    
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
</div>
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2013-03-26T14:15:58.437

你不能用一个单一的来做到这一点`:nth-child()`——你需要至少链接一个其他这样的伪类。例如，`:nth-child()`and的组合`:nth-last-child()`（`n+2`位表示分别从第二个孩子开始向前和向后计数）：

```
.myTableRow td:nth-child(n+2):nth-last-child(n+2){
background-color: #FFFFCC;
} 
```

或者，不使用公式，只需排除`:first-child`and `:last-child`：

```
.myTableRow td:not(:first-child):not(:last-child){
background-color: #FFFFCC;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-09-25T07:38:45.963

如果你想选择元素 2 到 4，你可以这样做：

```
td:nth-child(-n+4):nth-child(n+2) {
  background: #FFFFCC;
} 
```

提醒选择器链的顺序应该是从大到小。Safari 有一个错误阻止了这种技术的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-22T11:45:58.820

我创建了一个非常简单的代码，以便直观地清楚如何从同一页面上其他用户的响应中选择列或行。

[https://codepen.io/luis7lobo9b/pen/XWaNYXz](https://codepen.io/luis7lobo9b/pen/XWaNYXz)

[![在此处输入图像描述](../Images/f8fc3a299f53e8e5b5f34bb0e00a2d6c.png)](https://i.stack.imgur.com/bb94D.png)

```
<!doctype html>
<html lang="pt-br">
<head>
    <!-- https://stackoverflow.com/questions/15639247/css-selector-for-nth-range -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, user-scalable=yes, shrink-to-fit=no">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        table{margin: 50px auto;}
        thead tr{background-color: gray; font-weight: 700;}
        td{border: 1px solid black;padding: 2px 8px;}
        table tr:nth-child(n+2):nth-child(-n+3){background-color:blue;}
        table td:nth-child(n+2):nth-child(-n+3){background-color:red;}
    </style>
</head>
<body>
    <table>
        <thead>
            <tr>
                <td>AAA</td>
                <td>BBB</td>
                <td>CCC</td>
                <td>DDD</td>
                <td>EEE</td>
                <td>FFF</td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>111</td>
                <td>111</td>
                <td>111</td>
                <td>111</td>
                <td>111</td>
                <td>111</td>
            </tr>
            <tr>
                <td>222</td>
                <td>222</td>
                <td>222</td>
                <td>222</td>
                <td>222</td>
                <td>222</td>
            </tr>
            <tr>
                <td>333</td>
                <td>333</td>
                <td>333</td>
                <td>333</td>
                <td>333</td>
                <td>333</td>
            </tr>
            <tr>
                <td>444</td>
                <td>444</td>
                <td>444</td>
                <td>444</td>
                <td>444</td>
                <td>444</td>
            </tr>
            <tr>
                <td>555</td>
                <td>555</td>
                <td>555</td>
                <td>555</td>
                <td>555</td>
                <td>555</td>
            </tr>
        </tbody>
    </table>
</body>
</html> 
```

# if-statement - 关于 raphael g.barchar 的 if/else 语句

> ID：15639248
> 
> 赞同：0
> 
> 时间：2013-03-26T14:13:23.797
> 
> 标签：if-statement, svg, graphael

嗨，我有一个用 g.raphael 制作的条形图

粗体括号中的 47 我希望在其中放置一个 if else 语句。如果我这样做似乎会导致错误。有什么帮助吗？

paper.barchart(-5, -20, 480, 260, [ **(47)** , 52, 52, 52, 52, 52, 52, 52, 52, 52, 52, 52, 52, 52, 52, 52, 52 , 52, 52], {颜色:["RGB(45,58,65)","RGB(217,31,53)","RGB(217,31,53)","RGB(217,31, 53)","RGB(217,31,53)","RGB(217,31,53)","RGB(205,148,43)","RGB(205,148,43)","RGB(205,148,43) )","RGB(205,148,43)","RGB(73,102,20)","RGB(73,102,20)","RGB(73,102,20)","RGB(73,102,20)","RGB (73,102,20)","RGB(0,99,186)","RGB(0,99,186)","RGB(0,99,186)","RGB(0,99,186)"]})

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:48:19.143

我从未尝试过嵌套 if 块，但您可以在实例化之外定义数据数组，使用 if 语句根据您的条件构建它，然后在调用中使用您的数组变量：

```
var dataArray  = [...];
var colorArray = [...];
paper.barchart(-5, -20,
               480, 260,
               dataArray,
               {
                   colors : colorArray
               }); 
```

# string - Delphi 等价于 VB “Space”

> ID：15639254
> 
> 赞同：3
> 
> 时间：2013-03-26T14:13:38.000
> 
> 标签：string, delphi

Visual Basic "Space" 函数返回一个由指定数量的空格组成的字符串。

Visual Basic 示例：

```
Property Get Sections() As String
Dim sBuf As String
Dim iSize As String
Dim iRetCode As Integer
    sBuf = Space$(8192)
    iSize = Len(sBuf)
    iRetCode = GetPrivateProfileString(0&, 0&, m_sDefault, sBuf, iSize, m_sPath)
    If (iSize > 0) Then
        Sections = Left$(sBuf, iRetCode)
    Else
        Sections = ""
    End If
End Property 
```

“空间”的德尔福等价物是什么？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T14:17:45.853

要回答直接问题，最接近的等价物是[`StringOfChar`](http://docwiki.embarcadero.com/Libraries/en/System.StringOfChar)：

```
sBuf := StringOfChar(' ', 8192); 
```

* * *

虽然如果您将问题中的代码翻译成 Delphi，您不会用空格填充字符串。VB 代码实际上对分配字符串时包含的内容并不感兴趣，它只是`Space$`用作分配特定长度字符串的一种简单方法。空格被 API 调用返回的字符串覆盖。

在 Delphi 中，您将通过编写以下方式分配长度为 8192 的字符串：

```
SetLength(sBuf, 8192); 
```

实际上，在 Delphi 中，您将使用`TIniFile`从 INI 文件中读取。因此，如果您实际上是在尝试翻译问题中的代码，我建议您不要这样做，而是使用 Delphi 的内置库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T14:18:36.730

你可以使用`StringOfChar`：

```
// set txt to 80 spaces
txt := StringOfChar(' ', 80); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-26T20:09:48.370

或者你可以使用这个功能..

```
 function FastDupeCharA(Chr:Char;n:integer):string;assembler;
asm
 PUSH EBX
 PUSH ESI
 PUSH EDI
 XOR EBX,EBX

 MOV BL,AL
 MOV EDI,ECX
 MOV EAX,ECX
 MOV ESI,EDX
 XOR ECX,ECX
 CALL SYSTEM.@LSTRSETLENGTH
 MOV EDI,[EDI]

 MOV BH,BL  {Fill EBX  with BL (Char)}
 PUSH BX
 SHL EBX,16
 POP BX

 CMP ESI,8
 JLE @DupCarefully
 MOVD MM0,EBX
 PUNPCKLWD MM0, MM0

 @NextFill:
 MOVQ [EDI], MM0  {Fill 8 Char}
 ADD EDI,8
 SUB ESI,8
 CMP ESI,8
 JGE @NextFill
 EMMS
 TEST ESI,ESI
 JNE @DupCarefully
 JMP @FIN

 @DupCarefully:
 {If n or esi is smal than 8 }
 MOV [EDI],BL
 DEC ESI
 JE @FIN
 MOV [EDI+1],BL
 DEC ESI
 JE @FIN
 MOV [EDI+2],BL
 DEC ESI
 JE @FIN
 MOV [EDI+3],BL
 DEC ESI
 JE @FIN
 MOV [EDI+4],BL
 DEC ESI
 JE @FIN
 MOV [EDI+5],BL
 DEC ESI
 JE @FIN
 MOV [EDI+6],BL
 DEC ESI
 JE @FIN
 MOV [EDI+7],BL
 DEC ESI
 JE @FIN
 MOV [EDI+8],BL
 DEC ESI
 JE @FIN

 @FIN:
 MOV EAX,[EDI]
 POP EDI
 POP ESI
 POP EBX
 end; 
```

# c# - C# 编码新的罗马尼亚语字符 ă ș ț

> ID：15639256
> 
> 赞同：0
> 
> 时间：2013-03-26T14:13:44.447
> 
> 标签：c#, character-encoding

我正在尝试对新的罗马尼亚语字符“ă ș ț”进行编码以从 DB 导出到 CSV 文件。这些新字符是在 2000/01 的某个地方添加的，但框架中没有可用的编码（即使在 .net 4.5 中）。

[罗马尼亚网站之一在这里](http://www.secarica.ro/html/s-uri_si_t-uri.html)解释了字符的用法。我在[MSDN](http://msdn.microsoft.com/en-GB/library/system.text.encodinginfo.getencoding.aspx)上提到了详细信息，但没有提到 iso-8859-16 编码。如果我使用上述编码，则 C# 抛出异常“'ISO_8859-16' 不是受支持的编码名称。”

以前有人用过这种编码吗？

桑杰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:17:39.813

.Net 没有对 ISO 8859-16 的内置支持。最简单的解决方案是切换到 Unicode 编码，例如 UTF-8。

如果你仍然想要 ISO 8859-16，你可以自己实现它。该类[`Encoding`](http://msdn.microsoft.com/en-us/library/system.text.encoding)是可扩展的。作为参考，请参阅[Wikipedia](http://en.wikipedia.org/wiki/ISO/IEC_8859-16)或[MSDN](http://msdn.microsoft.com/en-us/library/ff536023)

有关 EBCDIC 的示例，请参见此答案：[为 Roman8 字符集创建自己的编码](https://stackoverflow.com/a/5536825/22364)

您需要实现抽象方法：

```
int GetByteCount(char[], int, int)
int GetBytes(char[], int, int, byte[], int)
int GetCharCount(byte[], int, int)
int GetChars(byte[], int, int, char[], int)
int GetMaxByteCount(int)
int GetMaxCharCount(int) 
```

也许是虚拟成员：

```
bool IsSingleByte { get; }
string EncodingName { get; } 
```

# c - 在“C”“线程池”中运行“POSIX”线程中运行“函数指针”

> ID：15639261
> 
> 赞同：0
> 
> 时间：2013-03-26T14:13:57.690
> 
> 标签：c, posix, threadpool

我正在`C`使用 pthreads 创建一个线程池，虽然我知道它是如何工作的，但我对复杂性有一些疑问。

我创建了一个结构，它应该是我的线程池表示，包含要运行的函数指针列表，我们将其称为 work_list。threadpool 结构还包含互斥锁（？）和同步访问的条件，线程数的 int 和保存每个工作线程的线程 id 的数组。 work_list 本身包含表示要完成的函数的结构，这些函数的每个实例structs 为函数保存一个 void*，为 args 保存一个 void*，为放置结果保存一个 void*。编码时，这个想法充实如下：

```
typedef struct threadpool
{
    list work_list;
    pthread_t* tidArray;
    int num_threads;
    pthread_mutex_t lock;
    pthread_cond_t condition;
} threadpool; 
```

和：

```
typedef struct fuFunction
{
    void* functionCall;
    void* functionArgs;
    void* returnValue;
    list_elem elem;
} fuFunction; 
```

我目前有一个初始化池的线程。它接受一个 int num_of_threads，并返回一个指向线程池实例的指针，其中所有成员都已初始化。我创建的主体如下所示：

```
threadpool * threadpool_init(int num_of_threads)
{
    threadpool* retPool = (threadpool*) malloc(sizeof(threadpool));

    //Initialize retPool members

    int x;
    for(x = 0; x < num_of_threads; x++)
    {
            pthread_t tid;

            if( pthread_create(&tid, NULL, thread_start, retPool) != 0)
            {
                    printf("Error creating worker thread\nExting\n");
                    exit(1);
            }

            retPool->tidArray[x] = tid;
    }

    return retPool;
} 
```

每个线程在启动时运行的函数，工作函数thread_star，到目前为止看起来像这样：

```
void *thread_start(void* args)
{
    threadpool* argue = (threadpool*) args;

    pthread_mutex_lock(&(argue->lock));
    while(\* threadpool not shut down*\)
    {
            if(!list_empty(&argue->work_list))
            {
                    fuFunction* tempFu = list_entry(list_pop_front(&argue->workQ), fuFunction, elem);

                    \\WHAT TO PUT HERE
            }

            pthread_cond_wait(&argue->condition, &argue->lock);
    }
    pthread_mutex_unlock(&(argue->lock));
} 
```

我的问题是，假设我目前拥有的这段代码是正确的，我将如何让工作线程运行它在工作函数中创建的 tempFu 中的函数？抱歉，如果这很长或令人困惑，我发现这在对话中更容易解释。如果这是 FUBAR，也请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:33:56.497

结构元素签名“void* functionCall;” 是错的。改用函数指针。例如：

```
typedef struct fuFunction
{
    void* (*functionCall)( void* arg);
    void* functionArgs;
    void* returnValue;
    list_elem elem;
} fuFunction; 
```

然后放在那里：

```
tempfu->returnValue = (*tempfu->functionCall)(tempfu->functionArgs); 
```

# python - 用python处理数据

> ID：15639262
> 
> 赞同：3
> 
> 时间：2013-03-26T14:13:58.817
> 
> 标签：python, python-2.7

我是python新手，所以请原谅我的问题。在我的工作中，我必须使用文本文件中表示的表格数据。这些值由逗号或分号分隔。此类文件的简化示例可能如下所示：

```
City;Car model;Color;Registration number
Moscow;Mercedes;Red;1234
Moscow;Mercedes;Red;2345
Kiev;Toyota;Blue;3423
London;Fiat;Red;4545 
```

我的目标是有一个脚本可以告诉我莫斯科有多少辆梅赛德斯（在我们的例子中是两个），并保存一个新的文本文件 Moscow.txt 如下

```
Moscow;Mercedes;Red;1234
Moscow;Mercedes;Red;2345 
```

我将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T14:38:37.957

我建议查看[pandas](http://pandas.pydata.org)库。您可以对表格数据进行各种巧妙的操作。首先阅读它：

```
>>> import pandas as pd
>>> df = pd.read_csv("cars.ssv", sep=";")
>>> df
     City Car model Color  Registration number
0  Moscow  Mercedes   Red                 1234
1  Moscow  Mercedes   Red                 2345
2    Kiev    Toyota  Blue                 3423
3  London      Fiat   Red                 4545 
```

以不同的方式对其进行索引：

```
>>> moscmerc = df[(df["City"] == "Moscow") & (df["Car model"] == "Mercedes")]
>>> moscmerc
     City Car model Color  Registration number
0  Moscow  Mercedes   Red                 1234
1  Moscow  Mercedes   Red                 2345
>>> len(moscmerc)
2 
```

把它写出来：

```
>>> moscmerc.to_csv("moscmerc.ssv", sep=";", header=None, index=None)
>>> !cat moscmerc.ssv
Moscow;Mercedes;Red;1234
Moscow;Mercedes;Red;2345 
```

您还可以同时处理多个组：

```
>>> df.groupby(["City", "Car model"]).size()
City    Car model
Kiev    Toyota       1
London  Fiat         1
Moscow  Mercedes     2
Dtype: int64 
```

* * *

更新：@Anthon 指出上面只处理分号分隔符的情况。如果文件始终有逗号，那么您可以使用`,`而不是`;`，所以这很简单。更有趣的情况是，如果文件中的分隔符不一致，但这也很容易处理：

```
>>> !cat cars_with_both.txt
City;Car model,Color;Registration number
Moscow,Mercedes;Red;1234
Moscow;Mercedes;Red;2345
Kiev,Toyota;Blue,3423
London;Fiat,Red;4545
>>> df = pd.read_csv("cars_with_both.txt", sep="[;,]")
>>> df
     City Car model Color  Registration number
0  Moscow  Mercedes   Red                 1234
1  Moscow  Mercedes   Red                 2345
2    Kiev    Toyota  Blue                 3423
3  London      Fiat   Red                 4545 
```

* * *

更新#2：现在文本是俄语的——当然是。:^) 不过，如果一切都正确编码，并且您的终端配置正确，那也应该可以工作：

```
>>> df = pd.read_csv("russian_cars.csv", sep="[;,]")
>>> df
     City Car model    Color  Registration number
0  Москва  Mercedes  красный                 1234
1  Москва  Mercedes  красный                 2345
2    Киев    Toyota    синий                 3423
3  Лондон      Fiat  красный                 4545 
```

# python - 是否有区分 Python 集成测试和单元测试的约定？

> ID：15639265
> 
> 赞同：45
> 
> 时间：2013-03-26T14:14:07.140
> 
> 标签：python, unit-testing, integration-testing

使用单元测试构建 Python 包的最常见方法如下：

```
package/
    __init__.py
    module_1.py
    module_2.py
    module_n.py
    test/
        __init__.py
        test_module_1.py
        test_module_2.py
        test_module_n.py 
```

我想区分单元测试（方法和函数）和集成测试（使用整个包并可能涉及其他资源）。也许这些测试应该在不同的包中，有不同的文件名，和/或包含某些文档字符串注释。

是否有这样做的标准约定？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-08T14:22:50.800

在我们的项目中，我们在每个包中都有单元测试，与您的情况相同，集成测试，系统测试，作为顶层的单独包，即：

```
package_1/
  __init__.py
  module_1.py
  module_n.py
  test/
    __init__.py
    test_module_1.py
    test_module_n.py
package_n/
  __init__.py
  module_1.py
  module_n.py
  test/
    __init__.py
    test_module_1.py
    test_module_n.py
systemtest/
  __init__.py
  systemtest_1.py
  systemtest_n.py 
```

即使您在项目中只有一个包，我也会使用此约定。但是我不确定这是否是标准约定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-02-18T02:10:49.607

我只是为自己研究了这个，发现[这个建议](https://realpython.com/python-testing/#testing-data-driven-applications)很有帮助：

```
project/
│
├── my_app/
│   └── __init__.py
│
└── tests/
    |
    └── unit/
    |   ├── __init__.py
    |   └── test_sum.py
    |
    └── integration/
        |
        ├── example_data/
        |   ├── test_basic.json
        |   └── test_complex.json
        |
        ├── __init__.py
        └── test_integration.py 
```

# html - 自动高度不扩展内容背景

> ID：15639269
> 
> 赞同：0
> 
> 时间：2013-03-26T14:14:15.427
> 
> 标签：html, css, height

我是编码新手，有一个我无法弄清楚的小问题。我有一个`#wrapper div`定义，允许我将我的内容集中在页面上并将背景着色为白色（背景颜色在 css 中定义）。每当我将 height 属性设置为 auto 时，在呈现时我的页面顶部都会有一个白框，它似乎代表我在`#wrapper`属性中设置的填充定义。渲染时我的实际页面高度很好，这意味着所有内容都按预期显示，但是使白框延伸到页面底部以使整个背景为白色的唯一方法是输入一个固定的高度值。这是我所拥有的：

```
#wrapper {
     width: 940px;
     height: auto;

    /* border-top: 1px solid #000000;
     border-right: 1px solid #000000;
     border-bottom: 1px solid #000000;
     border-left: 1px solid #000000; */

     margin-left: auto;
     margin-right: auto;
     margin-top: 10px;
     margin-bottom: 10px;

     padding-top: 10px;
     padding-right: 20px;
     padding-bottom: 10px;
     padding-left: 20px;

     position: relative      
} 
```

任何帮助肯定不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:19:17.703

```
#wrapper {overflow: hidden} 
```

或者

```
#wrapper {overflow: auto} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:24:40.353

如果您希望#wrapper div 扩展到页面底部，您需要提供明确的高度。**高度：自动**将调整以仅适合内容。如果#wrapper 是您的主页 div 的直接子元素或就在您的 body 下方，您可以将该父元素（body 或某些 div）设置为 100% 或静态值，然后将您的 #wrapper 设置为该值的百分比喜欢...

**我不提倡内联样式！！只是一个例子**

```
<body style="height: 480px">
    <div id="wrapper" style="height: 95%">
        content!
    </div>
</body> 
```

正文也可以是一个百分比，然后会调整到窗口高度，可能会起作用，但可能不是您想要的，只是另一种选择。

# ruby-on-rails - 在 OSx 10.8.3 Mountain Lion 上更新 OpenSSL

> ID：15639272
> 
> 赞同：0
> 
> 时间：2013-03-26T14:14:20.240
> 
> 标签：ruby-on-rails, openssl, rvm, osx-mountain-lion, homebrew

好的，所以我有一个全新的安装和一个干净的石板......

**在 OSx 10.8.3 上从头开始更新 OpenSSL 的正确方法是什么？**

还没有安装任何东西，但是在我可以将 OpenSSL 更新到 v1+ 之后，我通常会使用标准：RailsInstaller.org ..... 还是我应该先做 Homebrew/RVM 来设置 rails？

像[http://railsapps.github.com/rails-composer/](http://railsapps.github.com/rails-composer/)这样的东西在没有更新的 OpenSSL 的情况下会出现问题，而且他们的建议似乎并不奏效。[http://railsapps.github.com/openssl-certificate-verify-failed.html](http://railsapps.github.com/openssl-certificate-verify-failed.html)

我试过很多方法都没有运气。那里有很多讨论/建议，但希望第一次把它做好，而这次不会搞砸其他任何事情。是不是有一行需要sudo？如果我们能得到一个可靠的答案，我想把它传达给社区的其他人。

系统：15 英寸 MacBookPro Retina (2013) 和 OSx 10.8.3 Mountain Lion

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-03T07:31:41.407

聚会有点晚了……但以下非 rvm 方法对我有用：

*   [从http://openssl.org/](http://openssl.org/)拉取和解压源代码
*   ./配置darwin64-x86_64-cc
*   制作
*   做测试
*   须藤使安装

这会将可执行文件放入 中`/usr/local/ssl/bin/openssl`，因此将其添加到您的路径中（例如，在 .bash_profile 中：

```
export PATH="/usr/local/ssl/bin:$PATH" 
```

而且您可能需要重新编译 ruby​​ 以获取更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:34:50.313

使用 RVM 1.19：

```
\curl -L https://get.rvm.io | bash -s stable --ruby --autolibs=enable 
```

它将使用现有的包管理器（回退到 Homebrew），安装 ruby​​ 和 ruby​​ 本身的所有要求，现在它是 MRI Ruby`2.0.0-p0`

按照安装程序给出的说明进行操作，然后：

```
rvm use ruby
ruby -v 
```

# python - 比较列表中的列表元素

> ID：15639276
> 
> 赞同：0
> 
> 时间：2013-03-26T14:14:50.083
> 
> 标签：python

我有一个这样的列表：

```
[[846033, 365, 202], [849432, 276, 140], [821121, 209, 111], [820180, 244, 133], [849401, 971, 572], [848613, 790, 596], [846978, 914, 272]] 
```

小列表的第一个元素是“idnumber”，其他两个元素是我要比较的数据。

我想做的是：我想删除大列表中两个数据数中至少有一个小于 250 的元素。答案应该是这样的：

```
[[849401, 971, 572], [848613, 790, 596], [846978, 914, 272]]. 
```

我试图在 for 循环中创建一个 for 循环，但我失败了：

```
def zonderRuis(sigIdSpot=[[846033, 365, 202], [849432, 276, 140], [821121, 209, 111], [820180, 244, 133], [849401, 971, 572], [848613, 790, 596], [846978, 914, 272]]):
    ruisvrij=[]
    for i in range(len(sigIdSpot)):
        for r in i:
            if r[2]>=250 and r[3]>=250:
                ruisvrij.append(r)
    return ruisvrij 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T14:17:27.593

```
[x for x in data if all(y >= 250 for y in x[1:])] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T15:24:45.420

只是关于迭代的一点：

```
for i in range(len(sigIdSpot)):
    x = sigIdSpot[i]
    print x

# becomes more clear if you do the following:
for x in sigIdSpot:
    print x 
```

现在如果你想调试你的代码，你可以打印一些代码来看看你的代码发生了什么：

```
def zonderRuis(sigIdSpot=[[846033, 365, 202], [849432, 276, 140], [821121, 209, 111], [820180, 244, 133], [849401, 971, 572], [848613, 790, 596], [846978, 914, 272]]):
    ruisvrij=[]
    for i in range(len(sigIdSpot)):
        print 'i is:', i
        for r in i:
            print 'r is:', r
            if r[2]>=250 and r[3]>=250:
                ruisvrij.append(r)
                print 'r appended to ruisvrij:', ruisvrij
    return ruisvrij 
```

请记住，交互式 shell 是我们最好的朋友。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T14:22:28.413

```
list1 =  [[846033, 365, 202], [849432, 276, 140], [821121, 209, 111], [820180, 244, 133], [849401, 971, 572], [848613, 790, 596], [846978, 914, 272]]
list2 = []
for x in list1:
    if x[1] > 250 and x[2] > 250:
        lijst1.append(x) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T14:18:23.687

```
In [15]: l = [[846033, 365, 202], [849432, 276, 140], [821121, 209, 111], [820180, 244, 133], [849401, 971, 572], [848613, 790, 596], [846978, 914, 272]]

In [16]: [sub for sub in l if min(sub[1:]) >= 250]
Out[16]: [[849401, 971, 572], [848613, 790, 596], [846978, 914, 272]] 
```

# android - 数据无效时对话框如何保持或禁用关闭

> ID：15639277
> 
> 赞同：0
> 
> 时间：2013-03-26T14:14:50.213
> 
> 标签：android

我在对话框中创建一个表单。

我使用验证表单来防止数据为空

这是我的对话

```
new AlertDialog.Builder(this)

                .setTitle(R.string.add_title)
                .setView(addView)
                .setPositiveButton(R.string.ok,
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int whichButton) {
                                if (wrapper.getCode().length()==0) {CUtilities.showAlert(MainPetakTetap.this, "Code belum terisi");return;}
                                else if (wrapper.getAlamat().length()==0) {CUtilities.showAlert(MainPetakTetap.this, "Alamat belum terisi");return;}
                                else if (wrapper.getBatas().length()==0) {CUtilities.showAlert(MainPetakTetap.this, "Informasi batas belum terisi");return;}
                                else if (wrapper.getLat().equals("Unknown")) {CUtilities.showAlert(MainPetakTetap.this, "Latitude belum terdeteksi");return;}
                                else if (wrapper.getLon().equals("Unknown")) {CUtilities.showAlert(MainPetakTetap.this, "Longitude belum terdeteksi");return;}
                                else if (wrapper.getLuas().length()==0) {CUtilities.showAlert(MainPetakTetap.this, "Luas belum terisi");return;}
                                else if (wrapper.getTglA().length()==0) {CUtilities.showAlert(MainPetakTetap.this, "Tanggal Awal belum terisi");return;}
                                else if (wrapper.getTglB().length()==0) {CUtilities.showAlert(MainPetakTetap.this, "Tanggal Akhir belum terisi");return;}
                                else if (wrapper.getUser().length()==0) {CUtilities.showAlert(MainPetakTetap.this, "User Id belum terisi");return;}

                                final DatabaseConnector dbConnector = 
                                        new DatabaseConnector(MainPetakTetap.this);
                                db = new DatabaseConnector(MainPetakTetap.this);
                                dbConnector.open();
                                Cursor cursor = dbConnector.getUser(wrapper);

                                if (!cursor.moveToFirst()) {
                                    do {

                                        if (cursor!=null && cursor.getCount()==0) {
                                            db.processAddB(wrapper);
                                            constantsCursor.requery();
                                        }

                                    } while (cursor.moveToNext());
                                }
                                else{
                                    CUtilities.showAlert(MainPetakTetap.this, "Code yang anda insert sudah terdaftar!"); return;
                                }
                                if (cursor != null && !cursor.isClosed()) {
                                    cursor.close();
                                }
                                if (db != null) {
                                    db.close();
                                }

                                new AlertDialog.Builder(MainPetakTetap.this)
                                .setMessage("Data telah Tersimpan di aplikasi. Kirim ke Server?")
                                .setTitle("Pesan")

                                //.setView(addView)
                                .setPositiveButton(R.string.kirim,
                                        new DialogInterface.OnClickListener() {
                                            public void onClick(DialogInterface dialog,
                                                    int whichButton) {

                                                String code = wrapper.getCode();
                                                String alamat = wrapper.getAlamat();
                                                String batas = wrapper.getBatas();
                                                String lat = wrapper.getLat();
                                                String lon = wrapper.getLon();
                                                String luas = wrapper.getLuas();
                                                String tglA = wrapper.getTglA();
                                                String tglB = wrapper.getTglB();
                                                String userId = wrapper.getUser();
                                                new ProcessSend().execute(code, alamat, batas, lat, lon, luas, tglA, tglB, userId);
                                                //saveContact(code);
                                            }

                            })

                    .setNegativeButton(R.string.batal,
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int whichButton) {
                                    // stop the gps when cancel
                                    lman.removeUpdates(locaListener);
                                }
                            }).show();

                            }
                        })

                .setNegativeButton(R.string.cancel,
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int whichButton) {
                                // stop the gps when cancel
                                lman.removeUpdates(locaListener);
                            }
                        }).show(); 
```

这是验证

```
if (wrapper.getCode().length()==0) {CUtilities.showAlert(MainPetakTetap.this, "Code belum terisi");return;}
                                else if (wrapper.getAlamat().length()==0) {CUtilities.showAlert(MainPetakTetap.this, "Alamat belum terisi");return;}
                                else if (wrapper.getBatas().length()==0) {CUtilities.showAlert(MainPetakTetap.this, "Informasi batas belum terisi");return;}
                                else if (wrapper.getLat().equals("Unknown")) {CUtilities.showAlert(MainPetakTetap.this, "Latitude belum terdeteksi");return;}
                                else if (wrapper.getLon().equals("Unknown")) {CUtilities.showAlert(MainPetakTetap.this, "Longitude belum terdeteksi");return;}
                                else if (wrapper.getLuas().length()==0) {CUtilities.showAlert(MainPetakTetap.this, "Luas belum terisi");return;}
                                else if (wrapper.getTglA().length()==0) {CUtilities.showAlert(MainPetakTetap.this, "Tanggal Awal belum terisi");return;}
                                else if (wrapper.getTglB().length()==0) {CUtilities.showAlert(MainPetakTetap.this, "Tanggal Akhir belum terisi");return;}
                                else if (wrapper.getUser().length()==0) {CUtilities.showAlert(MainPetakTetap.this, "User Id belum terisi");return;} 
```

我尝试使用此代码并验证工作，但对话框被关闭。

我尝试`return;`在验证中删除，但数据直接处理而不验证。

我想保持对话框，直到数据得到验证。怎么做？

请问我真的需要帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:59:10.527

这是我为保留验证对话框所做的工作

```
table_array=new String[numOfTables+1];
    for(int i=1; i < numOfTables+1; i++)
    {
        table_array[0]="Select";
        table_array[i]=String.valueOf(i);
    }

    // populate spinner
    spinner=new Spinner(context);
    spinner.setAdapter( new   ArrayAdapter(context,android.R.layout.simple_dropdown_item_1line, table_array));

    final AlertDialog d = new AlertDialog.Builder(context)
    .setView(spinner)
    .setTitle("Select table number")
    .setPositiveButton(android.R.string.ok,
            new Dialog.OnClickListener() {
                @Override
                public void onClick(DialogInterface d, int which) {

                }
            })
    .setNegativeButton(android.R.string.cancel, null)
    .create();

    d.setOnShowListener(new DialogInterface.OnShowListener() {

        @Override
        public void onShow(DialogInterface dialog) {

            Button b = d.getButton(AlertDialog.BUTTON_POSITIVE);
            b.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View view) {

                    if(!spinner.getSelectedItem().toString().equals("Select"))
                        {
                               d.dismiss();

                        }
                        else
                            {
                                Toast.makeText(context, "Please select the table number", 0).show();
                            }
                }
            });
        }
    });

    d.show(); 
```

# c# - C# 正则表达式匹配/替换大文本文件

> ID：15639279
> 
> 赞同：0
> 
> 时间：2013-03-26T14:14:55.573
> 
> 标签：c#, regex, replace

我有一个大文本文件，最大可达 +500MB），我需要替换特定字符串中出现的所有日期。我正在使用正则表达式来匹配日期，效果很好。我需要捕获行号、匹配项以及匹配项所在的整行。我让那部分工作，这是我正在努力解决的替换部分。理想情况下，我想进行匹配，捕获额外的信息并通过文件进行一次替换。我怎样才能有效地做到这一点？这是我用来执行正则表达式的。

```
while ((line = InputFile.ReadLine()) != null)
{
    // Increment for each line read
    x++;

    // Try to match each line against the Regex.
    Match m = reg.Match(line);                    
    if (m.Success) 
    {
        DateTime result;
        if (!(DateTime.TryParse(m.Groups[0].Value, out result)))
        {
            // add it to the DT
            MatchTable.Rows.Add(x, m.Groups[0].Value, line);   
        }
        else if (DateTime.Parse(m.Groups[0].Value).Year <= 1753) // 1753 is the earliest date that can be stored in SQL datetime
        {
            // add it to the DT                       
            MatchTable.Rows.Add(x, m.Groups[0].Value, line);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:23:30.303

我想我可能会通过修改的行构建第二个临时文件行，然后删除旧文件并在完成时重命名新文件。

# internet-explorer - iframe 中 url 的基本身份验证

> ID：15639280
> 
> 赞同：10
> 
> 时间：2013-03-26T14:14:55.990
> 
> 标签：internet-explorer, authentication, iframe, basic-authentication

我需要验证从页面上的 iframe（通过 javascript 创建）发送的请求。身份验证将通过基本的 http 身份验证来完成。我试过做

```
http://user:password@server 
```

但显然由于安全异常，这在 IE 中不可用：

[http://support.microsoft.com/kb/834489](http://support.microsoft.com/kb/834489)

是否有另一种方法可以将身份验证添加到请求中，以便 iframe 自动向服务器进行身份验证？谢谢。

这是我目前正在使用但不起作用的代码：

```
var url = 'http://userName:test@localhost:12000/Service.svc/GetStatus';

try {
    // Attach image to cache auth
    var frame = $('<iframe />');

    frame.load(function() {
        alert('here');
    });

    $('body').append(frame);

    frame.attr('src', url);
    //img.remove();
}
catch (e) {

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T22:12:12.353

我必须解决这个确切的问题。我能想出的唯一解决方案是使用反向代理。这像这样工作：

```
Browser (request without basic authentication) -> Reverse Proxy (request with added basic authentication) -> Destination server (requires basic authentication) 
```

所以有一个反向代理在与目标服务器分开的地方运行。基本身份验证的详细信息存储在反向代理中。

假设中的 URL`iframe`看起来像这样（假设反向代理在 port 上运行`8088`）：

```
<iframe src="http://proxy_id.proxy_host.com:8088/cgi-bin/some/path"></iframe> 
```

然后反向代理将请求转换为如下所示：

```
http://destination_host.com:PORT/cgi-bin/some/path 
```

Where`destination_host`和`PORT`基本身份验证的详细信息（作为请求标头发送到目标服务器，因此它们不再在 URL 中可见）取自基于`proxy_id`原始 URL 中的反向代理配置。

反向代理将更改`host`标头（从`*.proxy_host.com`to `destination_host.com`）但不会更改路径，因此代理对来自浏览器的任何请求都是透明的，包括下载 CSS 或 JavaScript 文件的任何子请求，甚至对发起的任何请求都是透明的来自 JavaScript。

此设置需要适当的 DNS 条目，以便`proxy_id.proxy_host.com`解析到反向代理的 IP 并`destination_host.com`解析到目标服务器的 IP。取决于要求`proxy_host`实际上可以相同`destination_host`（例如，如果代理在目标服务器上运行）。

* * *

这是基本的想法。在我的项目中，代理配置可以动态添加，因此我必须确保主域的所有子域都`*.some_host.com`解析为相同的反向代理 IP。我为此使用[Acrylic DNS](http://sourceforge.net/projects/acrylic/)，因为默认的 Windows`hosts`文件不支持子域`*`（包罗万象）。

根据您项目的要求，您可能能够找到可用于该目的的合适的反向代理。我的项目是用 Erlang 编写的，我找不到任何可以使用的代理，所以我实现了自己的。在 github 上查看：[yoonka/charreada](https://github.com/yoonka/charreada)。它还没有任何文档，但代码相当简单。它可以潜在地用于以任何语言编写的任何项目，但目前的限制是使用 Erlang 调用添加配置（在我的项目中，它是从另一个 Erlang 应用程序提供的）。如果有任何需求，可以添加从静态文件中读取配置以及更好的文档：)

# javascript - 了解大型 asp.net 应用程序中的会话

> ID：15639283
> 
> 赞同：0
> 
> 时间：2013-03-26T14:15:01.233
> 
> 标签：javascript, asp.net, visual-studio-2010, web-applications

我有一个不寻常的 Web 应用程序，在某些方面类似于[DriveWorks](http://www.driveworkspro.com/)和[KBmax的实时版本](http://www.kbmax.com/home). Logic、Interface 和 Tables 由整个公司的销售团队和工程师在 Windows 应用程序中创建并存储在 sql server 中。在 Web 应用程序中，当用户单击产品菜单中的项目时，将从数据库中提取逻辑和接口，使用 CodeDOM 编译成 InMemory 可执行文件并存储在 Session 变量中。Web 应用程序中的 Front 接口是动态的，并在会话中为控制逻辑事件调用可执行文件。表也​​存储在 Session 中的 DataSet 中。无论如何，这一切都确实有效，但似乎有一些难以确定的随机怪癖。我想知道这是否可以在会话和替代方案中投入太多。

注意：我尽可能使用javascripting，但是由于代码实际上是由其他用户创建的，因此也有很多回发。当我使用本地主机运行它时，它似乎可以运行，但在主机服务器上它似乎很笨重。我有与 Windows 应用程序相同的应用程序，它工作得很好，只是试图制作网络版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:31:05.230

如果使用 64 位进程，使用 session 应该没有问题。如果使用 32 位进程，您应该查看 out-proc (db / windows server AppFabric)。关于随机怪癖，我猜想与代码有关。

# exchangewebservices - php-ews 发送邮件时如何设置重要性

> ID：15639288
> 
> 赞同：1
> 
> 时间：2013-03-26T14:15:16.343
> 
> 标签：exchangewebservices, php-ews

我正在使用 php-ews 发送邮件，但我找不到设置邮件重要性（优先级）的方法。这是我的代码：

```
 $from = $mail['from'];
    $to = $mail['to'];
    $subject = $mail['subject'];
    $body = $mail['body'];

    $msg = new EWSType_MessageType();
    if($to && count($to) > 0){
        $toAddresses = $this->getAddresses($to);
        $msg->ToRecipients = $toAddresses;
    }

    $fromAddress = new EWSType_EmailAddressType();
    $fromAddress->EmailAddress = $from['mail'];
    $fromAddress->Name = $from['name'];

    $msg->From = new EWSType_SingleRecipientType();
    $msg->From->Mailbox = $fromAddress;

    $msg->Subject = $subject;

    $msg->Body = new EWSType_BodyType();
    $msg->Body->BodyType = 'HTML';
    $msg->Body->_ = $body;

    $msgRequest = new EWSType_CreateItemType();
    $msgRequest->Items = new EWSType_NonEmptyArrayOfAllItemsType();

    $msgRequest->Items->Message = $msg;
    $msgRequest->MessageDisposition = 'SendAndSaveCopy';
    $msgRequest->MessageDispositionSpecified = true;

    $response = $this->ews->CreateItem($msgRequest);
    return $response; 
```

预先感谢您的回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:49:16.687

您需要加载 EWSType_ImportanceChoicesType 类。您的代码应如下所示：

```
$from = $mail['from'];
$to = $mail['to'];
$subject = $mail['subject'];
$body = $mail['body'];

$msg = new EWSType_MessageType();
if($to && count($to) > 0){
    $toAddresses = $this->getAddresses($to);
    $msg->ToRecipients = $toAddresses;
}

$fromAddress = new EWSType_EmailAddressType();
$fromAddress->EmailAddress = $from['mail'];
$fromAddress->Name = $from['name'];

$msg->From = new EWSType_SingleRecipientType();
$msg->From->Mailbox = $fromAddress;

$msg->Subject = $subject;

$msg->Body = new EWSType_BodyType();
$msg->Body->BodyType = 'HTML';
$msg->Body->_ = $body;

$msgRequest = new EWSType_CreateItemType();
$msgRequest->Items = new EWSType_NonEmptyArrayOfAllItemsType();

$msgRequest->Items->Message = $msg;
// Start importance code
$msgRequest->Items->Message->Importance = new EWSType_ImportanceChoicesType();
$msgRequest->Items->Message->Importance->_ = EWSType_ImportanceChoicesType::HIGH;
// End importance code
$msgRequest->MessageDisposition = 'SendAndSaveCopy';
$msgRequest->MessageDispositionSpecified = true;

$response = $this->ews->CreateItem($msgRequest);
return $response; 
```

要更改重要性，只需将以下行的结尾更改为 HIGH、LOW 或 NORMAL：

```
$msgRequest->Items->Message->Importance->_ = EWSType_ImportanceChoicesType::HIGH; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:42:13.613

我不太熟悉 php，但如果我使用 C#，邮件消息类有一个“重要性”属性，它是一个枚举，可以设置为：高、低和正常。默认为“正常”。

希望这可以帮助你...

# java - 迭代嵌套地图

> ID：15639291
> 
> 赞同：3
> 
> 时间：2013-03-26T14:15:24.733
> 
> 标签：java, generics, nested-generics

我将这些方法放在一起来帮助迭代嵌套地图（对于[另一个 SO question](https://stackoverflow.com/a/15618457/823393)）。

如您所见，前两种方法实际上几乎完全相同，除了它们的泛型以及一个调用`iV`和另一个调用`iiV`。有什么办法可以将它们折叠成一种方法，或者至少将机制的明确重复移动到一个地方？

如果做得好，应该可以迭代任何深度的嵌套地图。

```
// Iterating across Maps of Maps of Maps.
static <K1, K2, K3, V> Iterator<Iterator<Iterator<V>>> iiiV(Map<K1, Map<K2, Map<K3, V>>> mmm) {
  final Iterator<Map<K2, Map<K3, V>>> mmi = iV(mmm);
  return new Iterator<Iterator<Iterator<V>>>() {
    @Override
    public boolean hasNext() {
      return mmi.hasNext();
    }

    @Override
    public Iterator<Iterator<V>> next() {
      return iiV(mmi.next());
    }

    @Override
    public void remove() {
      mmi.remove();
    }
  };
}

// Iterating across Maps of Maps.
static <K1, K2, V> Iterator<Iterator<V>> iiV(Map<K1, Map<K2, V>> mm) {
  final Iterator<Map<K2, V>> mi = iV(mm);
  return new Iterator<Iterator<V>>() {
    @Override
    public boolean hasNext() {
      return mi.hasNext();
    }

    @Override
    public Iterator<V> next() {
      return iV(mi.next());
    }

    @Override
    public void remove() {
      mi.remove();
    }
  };
}

// Iterating across Map values.
static <K, V> Iterator<V> iV(final Map<K, V> map) {
  return iV(map.entrySet().iterator());
}

// Iterating across Map.Entries.
static <K, V> Iterator<V> iV(final Iterator<Map.Entry<K, V>> mei) {
  return new Iterator<V>() {
    @Override
    public boolean hasNext() {
      return mei.hasNext();
    }

    @Override
    public V next() {
      return mei.next().getValue();
    }

    @Override
    public void remove() {
      mei.remove();
    }
  };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:43:35.730

为什么不：

```
static <K, V> Iterator<V> iV(final Iterator<V> mei) {
   return new Iterator<V>() {
     @Override
     public boolean hasNext() {
       return mei.hasNext();
     }

     @Override
     public V next() {
       if (Iterator.class.isAssignableFrom(V.class)) {
         Iterator it = iV((Iterator)V);
         return it.hasNext() ? it.next() : ((Iterator)mei.next()).next();
       }
       else
         return mei.next().getValue();
     }

     @Override
     public void remove() {
       mei.remove();
    }
  };
} 
```

（未测试）

# compiler-construction - TypeScript 实现语言

> ID：15639293
> 
> 赞同：1
> 
> 时间：2013-03-26T14:15:33.183
> 
> 标签：compiler-construction, typescript

我一直在研究 TypeScript 编译器，并在语言规范中发现了这个奇怪的声明：

> TypeScript 编译器在 TypeScript 中实现

这甚至可能吗？我必须相信 tsc (TypeScript Compiler) 必须在很大程度上是用 Javascript 开发的，但也许我在这里遗漏了一些东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T14:52:45.917

是真的。[您可以自己阅读代码](http://typescript.codeplex.com/SourceControl/changeset/view/18631646674c#src/compiler/typeChecker.ts)。

引导这种语言的关键是你确实*从*JavaScript 开始，随着你添加语言特性逐渐将你的代码重构为 TypeScript。不过，这已经很长时间了，因为 TypeScript 编译器是纯 JS。显然，每当做出破坏性的设计决策时，这确实会引起一些痛苦（如果您在测试用例中四处寻找，您会看到对“oldclass”和“es6class”之类的引用以及其他历史上的怪事）。

# java - MapReduce 结果的增量更新

> ID：15639294
> 
> 赞同：0
> 
> 时间：2013-03-26T14:15:33.853
> 
> 标签：java, search, hadoop, mapreduce, hbase

我有一个 MapReduce 作业，它填充 HBase 中的搜索索引。这个 MapReduce 作业每天都在完整的数据集上运行。有没有一种方法可以在上次计算索引后到达的新数据上运行 MapReduce，然后正确更新 HBase 中的搜索索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T01:19:10.630

If your original data is saved in HBase, you can design your key so rows will be sorted by time. You can then scan the table with a start row defined as the last row you scanned yesterday + 1\. You can also have the key start with the day. As rows are sorted by key, you can easily start with the first row of a desired day and stop at the next day.

If you create your rows as:

```
long currentTimeMS = System.currentTimeMillis();
long currentDay = currentTimeMS / (1000 * 60 * 60 * 60 * 24);
Put put = new Put(Bytes.add(Bytes.toBytes(currentDay), "some other key stuff".getBytes()));
// add columns...
hbaseTable.put(put); 
```

You can scan a day's worth of data with:

```
long currentDay = currentTimeMS / (1000 * 60 * 60 * 60 * 24);
long yesterday = currentDay - 1;

Scan dayScan = new Scan(); 
dayScan.setStartRow(Bytes.toBytes(yesterday));
dayScan.setStopRow(Bytes.toBytes(currentDay));
// create map reduce job with dayScan 
```

There are some libraries like [Joda Time](http://joda-time.sourceforge.net/) that make time calculations easier and the code more readable.

You can also try [scan.setTimeRange()](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/client/Scan.html#setTimeRange%28long,%20long%29) for a similar outcome. But that assumes you insert and never update the source rows, as it actually operates on the *udpate* time of column versions. It might also be slower as the data might not be close together thanks to sorting by row key. Overall, this doesn't seem like the recommended way to go. But for quick and dirty prototyping, it works.

If you are scanning data straight from HDFS, then you can achieve something similar by simply saving data to a different directory every day. You can then only scan yesterday's directory and nothing else.

# memory-management - 如何将 MmMapIoSpace 从 Windows CE 5.0 移植到 6.0 或 XP Embedded？

> ID：15639296
> 
> 赞同：1
> 
> 时间：2013-03-26T14:15:38.837
> 
> 标签：memory-management, windows-ce

我们目前有一个带有微控制器的定制板，它通过双端口内存与 PC/104 windows CE 5.0 板通信。目前我们使用[MmMapIoSpace](http://msdn.microsoft.com/en-us/library/aa447863.aspx)映射 windows CE 中的双端口 ram，以便我们可以直接对其进行读写。我们希望加入 Windows CE 6.0 甚至 Windows XP 嵌入式的现代时代。我们的一个大问题是，根据微软的文档，Windows CE 6.0 和 Windows XP Embedded 中的 MmMapIoSpace 现在是在用户空间程序中无法访问的驱动程序级功能，而这正是我们一直在使用它的方式。

在我们出去购买大量硬件和可能的平台构建器副本之前，我们一直在试图弄清楚它是否真的是一个问题，如果是，我们能做些什么。我们都没有编写 Windows 驱动程序的经验，所以这似乎是一项艰巨的任务，但是我们实际上会编写一个驱动程序来处理这个功能。

将 MmMapIoSpace 从[Windows CE 5.0](http://msdn.microsoft.com/en-us/library/aa447863.aspx)移植到[Windows CE 6.0](http://msdn.microsoft.com/en-us/library/ee481674%28v=winembedded.60%29.aspx)或[Windows XP Embedded](http://msdn.microsoft.com/en-us/library/windows/hardware/ff554618%28v=vs.85%29.aspx)是否简单。（指向 Microsoft 文档的链接）。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:43:17.230

`MmMapIoSpace`确实应该首先由驱动程序使用，因此早期的 CE 版本让您从应用程序中使用它只是有点混杂。我会创建一个简单的流接口驱动程序，它使用 与 RAM 连接`MmMapIoSpace`，然后使用`ReadFile`或从您的应用程序调用该驱动程序`DeviceIoControl`。

Windows CE 中的流接口驱动程序非常简单明了。它只是一个定义了一些特定入口点的 DLL，然后是注册表项来告诉 device.exe 加载它。MSDN 有很多示例，但如果您想要更简单，[Codeplex 上有一个向导](http://cedriverwiz.codeplex.com/)也可以为您生成文件。

# php - 只允许登录用户查看页面

> ID：15639304
> 
> 赞同：0
> 
> 时间：2013-03-26T14:15:56.857
> 
> 标签：php, authentication, login, yii, session-variables

用户登录后，我将他们重定向到用户区页面。现在，如果有人拥有该网址但未登录（访客），那么他们应该无法访问该页面。目前我在我的页面顶部设置了一个条件来检查用户是否登录，我说如果用户是访客然后将他们重定向到主页。那是我应该在 Yii 中这样做还是有更好的方法？我基本上试图模仿我以前用纯 PHP 做的方式。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-26T14:19:58.533

我这样做的方式：

在 xController 中，在 actionY 处，我检查用户是访客还是登录。

如果用户是访客，将他重定向到站点/索引

否则，渲染页面。

# iphone - SocialTest - com.adobe.ane.social SocialUI 找不到

> ID：15639313
> 
> 赞同：1
> 
> 时间：2013-03-26T14:16:18.387
> 
> 标签：iphone, ios, air, adobe, flash-builder

我正在尝试运行示例 SocialTest，但始终出现此错误：

```
VerifyError: Error # 1014: Class :: com.adobe.ane.social SocialUI could not be found. 
```

这同样适用于任何其他示例 ANE，来自游戏 sdk ......

FlashBuilder 4.7
Adob​​e AIR 3.6
游戏 SDK 1.0.2
iPhone 3gs 6.1.3
模拟器 sdk 6.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T10:24:29.537

您忘记将 ANE 添加到您的包裹中。

项目 > 属性 > Flex Build Packaging > (Your OS) > Native Extensions... Add...

# ms-access - 基于智能比较的更新 - Access / VBA

> ID：15639317
> 
> 赞同：0
> 
> 时间：2013-03-26T14:16:24.967
> 
> 标签：ms-access, vba

需要智能地对访问表执行更新。需要专家 VBA / 智能思维。

```
Table1 (For reference only)
CompanyCode     Text
RegionCategory  Number (1-99)
RegionCount     Number(0 - 25000)

Table2
InvoiceNumber       Number
CompanyCode         Text    
NumRows             Number
RegionCode          FourdigitNumber
ConfirmationRemark  Y / N 
```

我们的目标是在“ConfirmationRemark”栏中填写是或否。规则：

1.仅选择那些从 Table2 中恰好有两行和不同 RegionCode 的 InvoiceNumbers。这些将具有相同的公司代码。RegionCategory 是 RegionCode 的前两位。

2.对于这两个 Invoices - 两个 RegionCategory 之间的差异必须大于两个。

3.查找 RegionCount ，来自 Table1

决策制定：我们现在基本上是在比较两张具有不同 RegionCode 的发票。想法是，具有较高 RegionCount 的 Invoice 将被标记为 Yes。

1.RegionCount之间的差异一定是相当大的。'相当大' - 我正在尝试确定正确的数字。让我们暂时取500。

2\. 区域计数较低的发票 - 区域计数应为零（最佳情况）或非常非常低。如果 Region Count 较低的 Invoice 具有较高的 RegionCount 值 > 200 ，则我们无法成功结束。

3.NumRows ，最好是 1 或小于另一个。这种比较不是强制性的，因此我们将有一个不检查的规定。将其他发票标记为“N”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T10:14:11.763

你有很多方法来处理这种复杂的更新。

如果幸运的话，您可能能够编写一个`UPDATE`包含所有更改的 SQL 语句，但通常您必须结合使用`SELECT`查询和自定义 VBA 来根据计算结果或涉及其他数据的查找来过滤它们.

### 一些提示

*   通常，我们倾向于根据“获取符合标准的数据的步骤是什么”来考虑问题。
    不过，有时更容易将问题转为正题，而是问自己“获取不符合标准的数据的步骤是什么”。
    因为在您的情况下，结果是布尔值、真或假，您可以简单地将所有记录的`ConfirmationRemark`字段设置`True`为，然后更新应该设置为的那些`False`，而不是相反。

*   分解每个步骤（如您所做的那样）并尝试找到最简单的`SELECT`查询，该查询将仅返回该步骤所需的数据。如果某个步骤太复杂，请进一步分解。

*   将您的分解`SELECT`语句组合在一起，以慢慢构建一个更复杂的查询，以实现您的目标。

*   一旦你尽你所能，构造一个`UPDATE Table2 SET ConfirmationRemark=True WHERE InvoiceNumber IN (SELECT InvoiceNumber ....)`或使用 VBA 来检查你的 complext`SELECT`语句的结果记录集，并在更新代码中的字段之前做一些更多的检查。

### 一些问题

不幸的是，尽管您努力记录您的情况，但没有足够的细节让我们真正提供帮助：

*   您没有提及哪些是主键（从您所说的来看，似乎`Table2`可能有多个相同的记录`InvoiceNumber`）

*   您正在处理的数据类型并不明显。您应该包含一个数据样本，并确定哪些数据应该以`ConfirmationRemark`集合结束。

*   你的问题真的太本地化了，这意味着它对你来说太具体了，对其他人没有价值，尽管我认为你的问题可能会更详细一些，如果只是为了展示如何处理复杂数据的例子Access 中的更新。

# ruby - 什么时候需要字符串作为哈希键

> ID：15639320
> 
> 赞同：0
> 
> 时间：2013-03-26T14:16:31.403
> 
> 标签：ruby

鉴于根据[这篇文章](https://stackoverflow.com/questions/8189416)使用符号作为散列键非常棒，你什么时候需要使用字符串作为散列键？

键连接，例如

```
 hash["name" + "xxx"] 
```

可能是这样一种情况，但我认为这种需求很少见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:22:44.743

甚至键连接也可以轻松转换：

```
 hash[ ("name" + "xxx").to_sym ] 
```

简短的回答是，避免在 Ruby 中使用字符串作为键，您可以从中受益，因为键只是语义标签，使您能够在代码中引用值。在这种情况下，很明显符号可以更有效地完成这项工作（好吧，如上所述，前提是您没有执行很多转换来生成标签）。

当您解析任意数据（例如 XMl 或 JSON）时，字符串作为键可能是表达结构的更自然方式。同样，从解析器发出的字符串到标签的转换时间可能是一个因素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:22:21.560

如果您`hash["name"+"xxx"]`在循环中执行多次，那么将键拉出循环并将其转换为符号可能会有所帮助。这只是一个性能问题。符号使用内存中的单个位置，但字符串在每次创建时都会被计算。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T14:44:36.717

如果您有一个如下所示的 .yaml 文件：

```
- thing1: value1
  thing2: value2
  thing3: value3
- thing1: value1
  thing2: value2
  thing3: value3
- thing1: value1
  thing2: value2
  thing3: value3 
```

并且您使用 加载它`YAML::load_file('filename')`，那么您将需要使用字符串作为键。

但是，如果您的 yaml 文件如下所示：

```
- :thing1: value1
  :thing2: value2
  :thing3: value3
- :thing1: value1
  :thing2: value2
  :thing3: value3
- :thing1: value1
  :thing2: value2
  :thing3: value3 
```

然后，您可以使用符号作为键。在这种情况下，ruby 方面首选符号，但 yaml 使用字符串会更干净。

# ios - 如何让 UIScrollView 垂直滚动其中包含动态数量的子视图？

> ID：15639321
> 
> 赞同：0
> 
> 时间：2013-03-26T14:16:34.240
> 
> 标签：ios, objective-c, loops, uiview, uiscrollview

所以我有一个`UIScrollView`并且在其中，我想添加一些子视图，目前我有大约 5 或 6 个，它们的`90px`高度大约是，所以很明显，当它到达屏幕底部时，我希望它滚动所以你可以看到更多，如果这有意义的话。

下面是我已经拥有`parentView`的`UIScrollView`，`newResult`是我想附加的一行。`GSResultBlock`是一个扩展的类`UIView`。

```
 for (NSObject * person in resultsCollection) {
      CGRect resultBlockFrame   = CGRectMake(0, resultCount, parentView.bounds.size.width, 90);
      GSResultBlock * newResult = [[GSResultBlock alloc] initWithFrame:resultBlockFrame];

      [parentView addSubview:[newResult getResultBlock]];

      [newResult release];

      resultCount = resultCount + 95;
} 
```

请记住，foreach`newResult`中还会有额外的子视图，例如，`UIImageView`等等。（虽然它们不包含在上面的代码中）

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:34:03.337

您需要更新使用类似`contentSize`的`UIScrollView`东西：

```
[parentView setContentSize:CGSizeMake(CGRectGetWidth(parentView.frame), resultCount)]; 
```

在你的 for 循环结束后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:34:03.793

看看[这个答案](https://stackoverflow.com/a/15197392/1219956)

```
float maxHeight = 0;

for(UIView *v in [scrollView subviews]){
    if(v.frame.origin.x + v.frame.size.height > maxHeight)
        maxHeight = v.frame.origin.x + v.frame.size.height;
}

self.scrollView.contentSize = CGSizeMake(scrollView.frame.size.width, maxHeight+5); 
```

将所有视图放入滚动视图后，运行此命令，它将使您的滚动视图滚动正确的量

# c# - HttpWebRequest.BeginGetResponse 块 30-60 秒

> ID：15639322
> 
> 赞同：3
> 
> 时间：2013-03-26T14:16:39.173
> 
> 标签：c#, .net, httpwebrequest

目前在我们的一个应用程序中，我在执行第一个 HTTP Webrequest 时看到了很大的滞后。根据我们的日志，有 30 - 60 秒的延迟。它在 HttpWebRequest.BeginGetResponse 处阻塞

这是来自 MSDN 的引用：

> BeginGetRequestStream 方法需要在此方法变为异步之前完成一些同步设置任务（例如 DNS 解析、代理检测和 TCP 套接字连接）。因此，永远不应在用户界面 (UI) 线程上调用此方法，因为它可能需要一些时间，通常是几秒钟。在某些未正确配置 webproxy 脚本的环境中，这可能需要 60 秒或更长时间。配置文件元素的 downloadTime 属性的默认值是一分钟，这占了大部分潜在的时间延迟。

我知道需要 DNS 解析、代理检测和其他东西。但是30-60秒太长了。当我在任何浏览器中输入相同的 URL 时，我会立即获得该页面。当我手动解析 DNS 时，也没有延迟。对同一 URI 的所有并发请求都不会阻塞。当我重新启动应用程序时，第一个请求再次阻塞分钟。30秒。

这是一个已知问题吗？有错误吗？我们在不同的机器上看到了这个，所以我不认为我的开发机器是问题所在。

这是一些示例代码：

```
private void TestWebRequest()
{
   HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://matrix.ag-software.de/http-bind");
   request.ContentType = "text/xml; charset=utf-8";
   request.Method = "POST";   
   request.BeginGetRequestStream(new AsyncCallback(GetRequestStreamCallback), request);            
}

private void GetRequestStreamCallback(IAsyncResult result)
{
   //
} 
```

**更新：**这一定是我的 Windows 7 安装的问题。我已经测试了另外 2 台机器，但不会出现同样的问题。我已经看到来自客户的日志文件具有完全相同的问题。这似乎在某些机器上的某些条件下发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-24T16:41:32.823

我刚刚经历过同样的事情。

我发现 Microsoft 客户端防火墙正在生成它。我用它来避免浏览我公司的代理。我的第一个解决方法是设置`request.Proxy`硬编码。为了避免那段难看的代码，我最终禁用了 Microsoft 客户端防火墙并在 Internet 选项上设置了代理。

希望这可以帮助。

正如@EricLaw 所说，System.Net 日志记录可能会有所帮助。这是一个链接到 MSDN 以[启用 System.Net 日志记录](http://msdn.microsoft.com/en-us/library/bb203855.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:27:03.967

这是一个已知的问题。这些链接中提供了更多信息：

[http://social.msdn.microsoft.com/Forums/en-US/netfxnetcom/thread/939e78bf-b9be-4d0b-894e-ae7f0d6013ff](http://social.msdn.microsoft.com/Forums/en-US/netfxnetcom/thread/939e78bf-b9be-4d0b-894e-ae7f0d6013ff)

[http://social.msdn.microsoft.com/forums/en-US/netfxnetcom/thread/2cb74a7e-6e8f-4d05-b86a-2401df5d2ed3/](http://social.msdn.microsoft.com/forums/en-US/netfxnetcom/thread/2cb74a7e-6e8f-4d05-b86a-2401df5d2ed3/)

# playframework-2.0 - 从视图传递到控制器播放框架的方法参数

> ID：15639323
> 
> 赞同：2
> 
> 时间：2013-03-26T14:16:40.827
> 
> 标签：playframework-2.0

我的应用程序控制器中有这个方法：

```
public static Result searchJourney(String address) {
    return ok(
        views.html.searchResults.render(Journey.searchByAddress(address),journeyForm)
        );
} 
```

它将字符串作为参数并将此字符串传递给模型方法*searchByAddress*。按地址搜索方法返回我的模型对象列表，这些对象是查询的结果。然后将其用于填充表单。

```
public static List<Journey> searchByAddress(String address) {
    return find.where().ilike("start_loc", "%"+address+"%").findList();
} 
```

我遇到的问题是从视图表单中获取地址参数。这是视图的样子：

```
@main("Journey Search", "search") {
<body>  
        <form>     
        Search for journeys starting in a town/city:
        <input type="text" name="arg"></br>
        <input type="submit" onsubmit="@routes.Application.searchJourney("@arg")" value="Search">
        </form>
    } 
```

所有路由都按预期工作，但我似乎无法将此参数传递给控制器​​方法。当我在文本框中输入一个值时，URL 会更新以显示我的输入：

```
http://localhost:9000/search?arg=testvalue 
```

但是结果页面永远不会像我预期的那样呈现。

更新：

```
<form action="@routes.Application.searchJourney(arg)">     

    Search for journeys starting in a town/city:
    <input type="text" name="arg"></br>
    <input type="submit" value="Search">
    </form> 
```

如果 arg 周围没有引号和 @ 符号，我会收到`not found: value arg`错误消息。

要呈现的结果 HTML

```
@(listJourneys: List[Journey], journeyForm: Form[Journey])

  @import helper._

  @main("Search Results", "search") {
      <h1>Search Results</h1>
      <table class="table table-hover">
        <thead>
            <tr>
            <th>#</th>
            <th>Starting Location</th>
            <th>End Location</th>
            <th>Participant Type</th>
            <th>Date</th>
            <th>Time</th>
            <!--<th>User</th>-->
             </thead>
              <tbody>
            </tr>

          @for(journey <- listJourneys) {
                <tr>
                  <td>@journey.id</td>
                  <td>@journey.start_loc</td>
                  <td>@journey.end_loc</td>
                  <td>@journey.participant_type</td>
                  <td>@journey.date</td>
                  <td>@journey.time</td>
                </tr>
          }
              </tbody>
      </table> 
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T14:30:49.147

利用：

```
@routes.Application.searchJourney(arg) 
```

代替

```
@routes.Application.searchJourney("@arg") 
```

顺便说一句，你为什么将它设置在`onsubmit`属性中？`action`为此目的使用通用形式不是更好吗？

**编辑**

啊，现在我明白了，一般来说，您**不能**使用未声明的参数或来自用户以 HTML 形式输入的参数来构建反向路由。它们**必须**存在于视图渲染的时刻，并且必须具有一定的价值。

为了从用户输入中获取您显示的 ( `http://domain.tld/search?arg=val`) ，`val`您需要使用带有`arg`可选参数的路由和一些默认值（在您的情况下，空字符串很可能是好的：

```
GET  /search      controllers.Application.searchJourney(arg: String ?= "") 
```

行动：

```
public static Result searchJourney(String arg) {
    return ok(
        searchResults.render(Journey.searchByAddress(arg),journeyForm);
    );
} 
```

然后您需要将`action`表单设置为此路由`arg`，并将其方法设置为`get`：

```
<form action="@routes.Application.searchJourney()" method="get">
   ...
</form> 
```

您也可以不在路由中设置任何参数：

```
GET   /search      controllers.Application.searchJourney
or
POST  /search      controllers.Application.searchJourney 
```

然后使用示例`DynamicForm`来绑定请求中的字段：

```
public static Result searchJourney() {
    String arg = form().bindFromRequest.get("arg");
    // perform some basic validation here
    return ok(
        searchResults.render(Journey.searchByAddress(arg),journeyForm);
    );
} 
```

# android - Android、iOS 和 Windows 8 软件包名称

> ID：15639325
> 
> 赞同：0
> 
> 时间：2013-03-26T14:16:42.980
> 
> 标签：android, ios, windows-8

我有一个非常简单的问题，我假设我已经知道答案（*是*），但我似乎找不到任何官方确认它是真的。

**包名称在 Android、iOS 和 Windows 8 中是否总是唯一的？**

我问这个是因为我正在开发一个通信系统，在该系统中我需要为这些平台编写的应用程序的唯一标识符。如果包名是唯一的，我很乐意使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:19:03.170

没有两个应用程序*在同一设备上*具有相同的包名称。

两个开发人员可以编写具有相同包名的应用程序并通过他们自己的第三方站点分发它们（应用程序商店不允许包名冲突）。

# java - Java：在不知道确切执行时间的情况下使用进度条

> ID：15639330
> 
> 赞同：0
> 
> 时间：2013-03-26T14:16:51.950
> 
> 标签：java, swing, progress-bar

我已经阅读了一段时间的进度条，但我仍然找不到我的问题的答案。也许这是我没有意识到的事情。

[http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html](http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html)

我有一个用java编写的程序，我还计算需要完成的时间，使用

```
static long startTime = System.currentTimeMillis();
...
long endTime   = System.currentTimeMillis();
long totalTime = endTime - startTime;
System.out.println(totalTime); 
```

我想知道，是否可以创建一个进度条，以及已完成程序的百分比。我真的很困惑，因为我不知道我是否可以计算出执行前所需的时间。

我将不胜感激任何帮助。问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:23:23.697

进度标准不显示已用时间的百分比，而是显示*工作*的百分比。

因此，如果您的代码需要处理 470 个对象（= 最大值）。每次处理一个对象时，递增`progress`1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T14:25:05.417

你需要一些方法来**衡量**你的任务进度。您是否正在处理已知数量的数据？您应该能够计算出您取得了多少进展，然后使用新值定期更新您的进度条。例如，将进度条设置为 0 到 100 的范围。

```
JProgressBar myProgressBar = new JProgressBar(0, 100); 
```

在处理数据时（在新线程中），更新 Swing 线程中的进度条：

```
int[] myData = // data to process

for (int ctr = 0; ctr < myData.length; ctr++) {
    doMyProcess(myData[ctr]);
    int percentComplete = (int)Math.round(ctr / (float)myData.length);
    myProgressBar.setValue(percentComplete);
} 
```

如果您无法以某种方式衡量您的进度，那么您将需要使用“不确定”进度条，这将表明您的程序正在做某事，但该任务是不可衡量的。

```
myProgressBar.setIndeterminate(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T14:23:42.053

很难估计程序完成所需的时间。但也许您应该专注于您正在处理的数据集（您正在复制的文件、您正在处理的数据库行等）并进行测量？这是您可能知道并且可以从中计算完成百分比的东西。如果您真的没有有限的数据集，那么也许您应该显示一个不确定的进度条，而不是向用户显示一个没有提供任何有意义信息的进度条。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T14:24:57.697

在这种情况下，您需要的是不确定的`ProgrssBar`。这是官方文档中的一段：

**有时您无法立即确定长时间运行的任务的长度，或者该任务可能会长时间停留在相同的完成状态。您可以通过将进度条置于不确定模式来显示没有可测量进度的工作。不确定模式下的进度条会显示动画以指示工作正在进行。一旦进度条可以显示更有意义的信息，您应该将其切换回其默认的确定模式。**

下面是`ProgressBar`在不确定模式下使用的片段

```
public void propertyChange(PropertyChangeEvent evt) {
if (!done) {
    int progress = task.getProgress();
    if (progress == 0) {
        progressBar.setIndeterminate(true);
        taskOutput.append("No progress yet\n");
    } else {
        progressBar.setIndeterminate(false); 
        progressBar.setString(null);
        progressBar.setValue(progress);
        taskOutput.append(String.format(
                "Completed %d%% of task.\n", progress));
    }
}
} 
```

摘录自[此处](http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html)。

# php - Zend Framework 2 - 注释表单 - 一个视图中的多个表单

> ID：15639332
> 
> 赞同：0
> 
> 时间：2013-03-26T14:16:58.787
> 
> 标签：php, forms, annotations, zend-framework2, zend-view

我正在使用`ZF2`和`AnnotationForms`。直到现在，这对我来说都很好。

我有一个例外，我想在一个视图中显示三个表单。

基本上我会做以下事情：

```
<form>
  <?php for field in form1: echo field ?>
  <?php for field in form2: echo field ?>
  <?php for field in form3: echo field ?>
  <input type="submit" />
</form> 
```

我的问题是其中一些表单具有相同名称的字段（例如“城市”）。所以一些输入数据会丢失。

我考虑过重命名字段（HTML 中的名称属性），但是操作中的映射`$entity->setData()`将不起作用......

有谁知道我如何解决这个问题而无需在纯html中静态构建我的整个表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:35:26.040

Ron，您可以使用 ComposedObject 注释，这实际上会从其他模型/实体文件创建字段集。这里解释得很好：http: [//devblog.x2k.co.uk/using-the-composedobject-zend-framework-2-form-annotation/](http://devblog.x2k.co.uk/using-the-composedobject-zend-framework-2-form-annotation/)

马丁

# php - PHP ==比较在循环中不起作用

> ID：15639334
> 
> 赞同：-4
> 
> 时间：2013-03-26T14:16:59.970
> 
> 标签：php, comparison, equals, operator-keyword

我有以下代码。它是循环内的 If 语句的集合。if 语句将字符串（从 API 的 JSON 获得）与预定义的文本进行比较。问题是“If ==”比较仅在第一次通过循环时起作用。它在循环中的后续时间不起作用。当我回显文本时，它看起来与我正在比较的文本相同。

```
$vstate = (string)$vstate;
$vstate = trim($vstate);

//THERE IS A PROBLEM HERE ON THE SECOND LOOP
if($vstate == "Alabama") {$fstate = "01";}
if($vstate == "Alaska") {$fstate = "02";}
if($vstate == "Arizona") {$fstate = "04";}
if($vstate == "Arkansas") {$fstate = "05";}
if($vstate == "California") {$fstate = "06";}
if($vstate == "Colorado") {$fstate = "08";}
if($vstate == "Connecticut") {$fstate = "09";}
if($vstate == "Delaware") {$fstate = "10";}
if($vstate == "District of Columbia") {$fstate = "11";}
if($vstate == "Florida") {$cstate = "12";}
if($vstate == "Georgia") {$cstate = "13";}
if($vstate == "Hawaii") {$cstate = "15";}
if($vstate == "Idaho") {$cstate = "16";}
if($vstate == "Illinois") {$cstate = "17";}
if($vstate == "Indiana") {$cstate = "18";}
if($vstate == "Iowa") {$cstate = "19";}
if($vstate == "Kansas") {$cstate = "20";}
if($vstate == "Kentucky") {$cstate = "21";}
if($vstate == "Louisiana") {$cstate = "22";}
if($vstate == "Maine") {$cstate = "23";}
if($vstate == "Maryland") {$cstate = "24";}
if($vstate == "Massachusetts") {$cstate = "25";}
if($vstate == "Michigan") {$cstate = "26";}
if($vstate == "Minnesota") {$cstate = "27";}
if($vstate == "Mississippi") {$cstate = "28";}
if($vstate == "Missouri") {$cstate = "29";}
if($vstate == "Montana") {$cstate = "30";}
if($vstate == "Nebraska") {$cstate = "31";}
if($vstate == "Nevada") {$cstate = "32";}
if($vstate == "New Hampshire") {$cstate = "33";}
if($vstate == "New Jersey") {$cstate = "34";}
if($vstate == "New Mexico") {$cstate = "35";}
if($vstate == "New York") {$cstate = "36";}
if($vstate == "North Carolina") {$cstate = "37";}
if($vstate == "North Dakota") {$cstate = "38";}
if($vstate == "Ohio") {$cstate = "39";}
if($vstate == "Oklahoma") {$cstate = "40";}
if($vstate == "Oregon") {$cstate = "41";}
if($vstate == "Pennsylvania") {$cstate = "42";}
if($vstate == "Rhode Island") {$cstate = "44";}
if($vstate == "South Carolina") {$cstate = "45";}
if($vstate == "South Dakota") {$cstate = "46";}
if($vstate == "Tennessee") {$cstate = "47";}
if($vstate == "Texas") {$cstate = "48";}
if($vstate == "Utah") {$cstate = "49";}
if($vstate == "Vermont") {$cstate = "50";}
if($vstate == "Virginia") {$cstate = "51";}
if($vstate == "Washington") {$cstate = "53";}
if($vstate == "West Virginia") {$cstate = "54";}
if($vstate == "Wisconsin") {$cstate = "55";}
if($vstate == "Wyoming") {$cstate = "56";}
if($vstate == "Puerto Rico") {$cstate = "72";}
if($vstate == "American Samoa") {$cstate = "60";}
if($vstate == "Federated States of Micronesia") {$cstate = "64";}
if($vstate == "Guam") {$cstate = "66";}
if($vstate == "Marshall Islands") {$cstate = "68";}
if($vstate == "Commonwealth of the Northern Mariana Islands") {$cstate = "69";}
if($vstate == "Palau") {$cstate = "70";}
if($vstate == "Puerto Rico") {$cstate = "72";}
if($vstate == "U.S. Minor Outlying Islands") {$cstate = "74";}
if($vstate == "U.S. Virgin Islands") {$cstate = "78";}
if($vstate == "Baker Island") {$cstate = "81";}
if($vstate == "Howland Island") {$cstate = "84";}
if($vstate == "Jarvis Island") {$cstate = "86";}
if($vstate == "Johnston Atoll") {$cstate = "67";}
if($vstate == "Kingman Reef") {$cstate = "89";}
if($vstate == "Midway Islands") {$cstate = "71";}
if($vstate == "Navassa Island") {$cstate = "76";}
if($vstate == "Palmyra Atoll") {$cstate = "95";}
if($vstate == "Wake Island") {$cstate = "79";}

echo("The vstate is " . $vstate . "<br>");  
echo("The cstate is " . $cstate . "<br>"); 
```

我该如何进行这项工作？我已经尝试添加 Trim() 但这并没有解决问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:23:17.057

$fstate 和 $cstate 需要在进入“循环”之前定义。它们都是在一个封装空间中创建的，并在 if 块结束时被删除。

如果你倾倒它，你会得到什么？它是否按预期正确转换为字符串？

# android - Android：每个意图/活动的堆大小是多少？

> ID：15639337
> 
> 赞同：0
> 
> 时间：2013-03-26T14:17:06.837
> 
> 标签：android, android-listview, out-of-memory, heap-memory, android-gridview

众所周知，Android 应用程序的 VM 堆大小是有限的。（主要是 16、24、32、48 或 64 MB 的 RAM，具体取决于硬件）

我们可以得到实际的堆大小

```
ActivityManager am = (ActivityManager)this.getSystemService(ACTIVITY_SERVICE);
Toast.makeText(this, "HEAP SIZE: " + am.getMemoryClass() + "MB", 1).show(); 
```

.

但是，如果我打开一个新的 Intent，内存策略是什么？？？：

```
Intent intent = new Intent(MainActivity.this, NewActivity.class);
MainActivity.this.startActivity(intent); 
```

这个新活动是否获得了完整的堆大小并且旧活动在后台保持，并且它的内存被缓存？

还是意图获得一个全新的虚拟机？

我有一个非常记忆密集的应用程序，其中大量填充了 Grid- 和 ListViews。从 Android 3.0 开始，位图是在堆内分配的，这会导致很多令人头疼的问题和 OutOfMemory 错误的麻烦……我想知道我是否可以在它们自己的 Intent 中超越内存饥饿的视图。<-- 这有意义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:36:26.430

我同意 Raghav Sood 的观点。我添加了更多关于如何在列表视图或网格视图中显示图像的内容。

我使用**通用图像加载器**在列表视图中显示大量图像。

您应该在不使用时回收位图。

[http://www.youtube.com/watch?v=_CruQY55HOk](http://www.youtube.com/watch?v=_CruQY55HOk)。讨论是关于内存管理和内存泄漏以及如何避免它。如果您遇到内存泄漏，您可以使用 MAT Analyzer 来查找内存泄漏。该视频还讨论了使用 MAT Analyzer 并演示了如何摆脱内存泄漏。

当您在列表视图中显示图像时，您需要回收视图。可见的视图不会被回收。

要在 gridview 或 listview 中显示图像，您可以使用通用图像加载器。延迟加载的改进版本。图像被缓存。您可以在本地或从服务器显示图像。

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

```
 File cacheDir = StorageUtils.getOwnCacheDirectory(context, "your folder");

 // Get singletone instance of ImageLoader
 imageLoader = ImageLoader.getInstance();
 // Create configuration for ImageLoader (all options are optional)
 ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(a)
      // You can pass your own memory cache implementation
     .discCache(new UnlimitedDiscCache(cacheDir)) // You can pass your own disc cache implementation
     .discCacheFileNameGenerator(new HashCodeFileNameGenerator())
     .enableLogging()
     .build();
 // Initialize ImageLoader with created configuration. Do it once.
 imageLoader.init(config);
 options = new DisplayImageOptions.Builder()
 .showStubImage(R.drawable.stub_id)//display stub image
 .cacheInMemory()
 .cacheOnDisc()
 .displayer(new RoundedBitmapDisplayer(20))
 .build(); 
```

在你的 getView()

```
 ImageView image=(ImageView)vi.findViewById(R.id.imageview); 
 imageLoader.displayImage(imageurl, image,options);//provide imageurl, imageview and options 
```

您可以配置其他选项以满足您的需求。

与通用图像加载器一起，您可以**查看持有人**以实现平滑滚动和性能。[http://developer.android.com/training/improving-layouts/smooth-scrolling.html](http://developer.android.com/training/improving-layouts/smooth-scrolling.html)。

[http://www.youtube.com/watch?v=wDBM6wVEO70](http://www.youtube.com/watch?v=wDBM6wVEO70)。谈话是关于观众和性能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:23:52.073

每个进程都有一个堆，无论设备指定大小（如果设备上安装了 Google Play，则至少 16 MB）。

您的应用程序的所有组件都必须在此堆中运行，因为您的应用程序是单个进程。所以你所有的活动、服务、广播接收器共享同一个堆。

当你启动一个新的 Activity 时，你之前的 Activity 会被推到后台。因此，它`onPause()`被调用，如果需要，您应该使用该方法来释放内存（删除加载的位图等）。

此外，`outsorce the memory hungry Views in their own Intents`这没有任何意义，因为 Intent 用于启动应用程序组件，如活动和服务。您不能将视图与意图一起使用。相反，您应该缩放位图并仅加载所需的大小，并使用延迟加载等技术来确保内存中的位图不会超过所需的大小。

# ajax - 使用自定义路由调用控制器动作总是指向相同的动作

> ID：15639343
> 
> 赞同：0
> 
> 时间：2013-03-26T14:17:21.880
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-routing

我正在访问采用不同数量参数的不同操作，但即使在应用自定义路由时，对同一操作的调用也总是会发生。控制器数据-----

```
[System.Web.Mvc.ActionName("Details1")]
    public string Detail1(string Name)
    {
        return null;
    }

    [System.Web.Mvc.ActionName("Details2")]
    public string Detail2(string Name, string secondName)
    {
        return null;
    } 
```

自定义路线

```
context.MapRoute(
            "M_default",
            "controllername/{action}/{id}",
            new { action = "Index", id = UrlParameter.Optional }

        );

        context.MapRoute(
            "name1",
            "controllername/{Name}",
            new { controller = "controllername", action = "Details1" }

        );

        context.MapRoute(
            "name2",
            "controllername/{Name}/{secondName}",
            new { controller = "controllername", action = "Details2" }

        ); 
```

forst路由是默认的，第二个路由是details1，第三个路由是details2。

我从视图 $.post 中调用这些，其 URL 是 Details1 调用的 URL

```
"/api/controllername/?Name="+somename+"", 
```

Details2 调用的 URL

```
"/api/controllername/?Name="+somename+"&secondName="+othername, 
```

我从[这里参考了](http://www.asp.net/mvc/tutorials/controllers-and-routing/creating-custom-routes-cs)

有什么可能的解决方案。任何建议，帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:21:06.933

尝试将默认路由放在最后。我认为它抓住了一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:25:33.140

如果我理解正确，您的问题在于框架如何解析规则。您必须记住，框架从您的规则列表的顶部开始，一直向下直到匹配一个条件。反转您的网址序列应该可以解决您的问题

您还可以使用[此路由调试器](http://mvcroutevisualizer.codeplex.com/)来检查您的所有路由是否正常工作

更新：我的意思是创建这样的路线。我刚刚看到您缺少“api”部分。使用路由调试器检查一切是否正确。

```
 context.MapRoute(
        "name2",
        "api/controllername/{Name}/{secondName}",
        new { controller = "controllername", action = "Details2" }

    );

    context.MapRoute(
        "name1",
        "api/controllername/{Name}",
        new { controller = "controllername", action = "Details1" }

    );

    context.MapRoute(
        "M_default",
        "controllername/{action}/{id}",
        new { action = "Index", id = UrlParameter.Optional }

    ); 
```

那应该正确处理

```
 /api/controllername/somename/someothername 
```

和

```
 /api/controllername/somename 
```

# iphone - 将文本和图像都复制到iphone应用程序中的剪贴板

> ID：15639344
> 
> 赞同：2
> 
> 时间：2013-03-26T14:17:24.897
> 
> 标签：iphone, ios, uipasteboard

我正在开发一个应用程序，我想在其中复制一些文本和图像并允许用户将其粘贴到任何地方。我知道它是使用 UIPasteboard 完成的，并且我已经实现了图像的复制，但现在我想同时复制图像和文本，然后让用户粘贴它。可以有多个图像和文本消息，它们可以以任何顺序出现。这就像一段用文字和图像写成的段落。这可能吗？有人可以建议我如何实现它吗？

问候
潘卡伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:40:05.740

您可以在粘贴板中添加任何您想要的内容，包括多个条目，例如 type`UIPasteboardTypeListString`和另一个 type `UIPasteboardTypeListImage`，甚至另一个 type `@"My Made-Up Type"`。把它想象成一个共享的可变字典。

由接收应用程序来了解如何处理它们。

# android - 对 Android 应用程序使用 Nfca 的 TagLostException

> ID：15639346
> 
> 赞同：4
> 
> 时间：2013-03-26T14:17:30.287
> 
> 标签：android, tags, nfc, apdu

我目前正在为 NFC 智能手机开发一个 Android 应用程序（在 JAVA 中）。我正在尝试与 Nfca 标签通信，但`TagLostException`无论我通过`transceive(byte[])`. 标签与设备连接良好。

这是重要的一段代码：

```
public void onNewIntent(Intent intent) {
    setIntent(intent);

    tag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG); // get the tag object for the discovered tag

    nfca = NfcA.get(tag); // try and get the instance for this tag
    if(nfca == null) {
        Alert("tag","the tag is not NfcA");
    } else {
        new Thread(new Runnable() {
            @Override
            public void run() {
                handler.sendEmptyMessage(1); //this will call handleMessage function and handle all error
            }
        }).start();
    }
}

final Handler handler = new Handler() {
    //handles the connection with the tag
    @Override
    public void handleMessage(final Message msgs) {
        // try to connect to the NfcA tag
        try {
            nfca.connect();
        } catch(IOException e) {
            Alert("nfca.connect","cannot open connection ><");
        }
        Toast.makeText(NfcaActivity.this, "tag connected", Toast.LENGTH_LONG).show();

    }
};

try {
    //nfca.setTimeout(3000);
    pageBuffer = nfca.transceive(command);                                                                      
} catch(IOException e) {
    Alert("pageBuffer","cannot perform transceive "+ e.toString());
} catch(Exception e) {
    Alert("exception!", e.toString());
} 
```

我正在尝试使用以下命令：`{00 CA 42 08 00}`或者`{00 A4 00 00 02 3F00}`但具有相同的结果。

当我在我的 PC 上使用智能卡读卡器和软件时，这些命令正在工作。智能卡非空。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:58:57.947

我希望这张卡也有`IsoDep`可用的技术？如果是这种情况，您应该使用它进行连接。您列出的命令之一看起来像 ISO 7816-4 APDU 以选择主文件。这应该与 ISO 14443-4 卡一起使用，这正是该`IsoDep`技术所代表的。

# c# - 在 WPF 中自定义 PrintDialog 窗口

> ID：15639348
> 
> 赞同：20
> 
> 时间：2013-03-26T14:17:38.347
> 
> 标签：c#, wpf, printing, listbox, printdialog

在我的 WPF 应用程序中，我将打印我的 ListBox 的内容。我想在 PrintDialog 框中添加一个新控件来选择要打印的行数（项目）。

是否可以自定义现有的 PrintDialog 框并添加新控件以绑定到 ListBox.Count？

还是有更好的方法来做到这一点？

![在此处输入图像描述](../Images/50f59104edaebdaa814d1fa00e17bcc6.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T10:00:47.337

实际上可以使用 .NET 扩展通用对话框。我[在 MSDN 上找到了这篇文章](http://msdn.microsoft.com/en-us/library/ms996463.aspx)。但是，我不确定这是否也适用于打印对话框或者是否仍然可以完成，但我建议您先阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T09:56:40.787

“C# 提供了一个标准的 PrintDialog，它具有所有基本的打印对话框功能。由于它被声明为密封类，因此无法通过 C# 本机语法对其进行扩展。”

请参阅以下链接： http: [//www.codeproject.com/Articles/16797/Extending-C-PrintDialog-Part-I](http://www.codeproject.com/Articles/16797/Extending-C-PrintDialog-Part-I)

您始终可以从头开始创建自己的“打印对话框屏幕”，然后您可以添加带有要打印的行数的下拉列表（下拉列表），然后您可以从列表框（连接或构建字符串）中获取并发送到指定的打印机.

# c# - 如何在 Visual Studio 2012 的设计器模式下移动控件？

> ID：15639351
> 
> 赞同：-3
> 
> 时间：2013-03-26T14:17:44.443
> 
> 标签：c#, visual-studio-2012

我刚开始使用 Visual Studio 2012。

进入设计器，添加了一个按钮，但我无法移动它。

我错过了什么吗？我认为这与 Visual c# express 非常相似。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:22:26.827

是的，您可能遗漏了一些东西，设计师应该使用拖放来移动控件。我不知道是否有阻止控制的选项（可能有），也许你按下了它

尝试进入文档大纲面板，在那里您可以阻止/取消阻止控件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:32:49.260

对不起大家！似乎我必须转到工具、HTML 设计器、CSS 样式并激活“将使用工具箱添加的控件的定位更改为绝对位置、粘贴或拖放”。

不过，不确定后果是什么。

# r - gcombobox（使用 Gtk2）事件循环

> ID：15639354
> 
> 赞同：0
> 
> 时间：2013-03-26T14:17:47.567
> 
> 标签：r, gwidgets

下面的代码显示分配一个项向量`gcombobox`将导致`gcombobox`处理程序在现有项向量的每个元素上循环（例如，尝试单击，`"a"`或者`"b"`您将看到来自 的多个打印消息`gcombobox`）。如果`b2`更改为`gradio`按钮，则不会发生此循环。此外，如果使用 tcltk 工具包，那么我们也没有问题。这在 GUI 中给我带来了问题，其中的处理程序`b2`更复杂并处理一些大数据。任何防止这种循环的建议都会很棒！

```
options("guiToolkit"="RGtk2")
library(gWidgets)

w=gwindow()
b1=gradio(c("a","b"),container=w)
b2=gcombobox(c(1:2),container=w)
addHandlerClicked(b1,handler=function(h,...) b2[,]=c(1:10))
addHandlerClicked(b2,handler=function(h,...) print("clicked b2")) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T21:33:12.160

您可以阻止处理程序，然后解除阻止，如下所示：

```
w=gwindow()
b1=gradio(c("a","b"),container=w)
b2=gcombobox(c(1:2),container=w)
id = addHandlerClicked(b2,handler=function(h,...) print("clicked b2"))
addHandlerClicked(b1,handler=function(h,...) {
  blockHandler(b2, id)
  b2[,]=c(1:10)
  unblockHandler(b2, id)
}) 
```

我翻转了分配顺序以获取处理程序 ID。

或者，在 gWidgets2（仍然只是在 Github 上）它只是工作，因为 b2 的可选项目的分配没有设置 b2 的选定值。（您可能想要手动执行）

```
options("guiToolkit"="RGtk2")
library(gWidgets2)

w=gwindow()
g = ggroup(cont=w)  ## only one child for a gwindow instance is enforced
b1=gradio(c("a","b"),container=g)
b2=gcombobox(c(1:2),container=g, expand=TRUE)
id = addHandlerChanged(b2,handler=function(h,...) print("clicked b2"))
addHandlerChanged(b1,handler=function(h,...) {
  b2[]=c(1:10)
}) 
```

# google-app-engine - 如何为 SDK v1.7.5 (with Maven) 构建 GAE 应用程序

> ID：15639356
> 
> 赞同：0
> 
> 时间：2013-03-26T14:17:56.423
> 
> 标签：google-app-engine, maven

我正在尝试使 GAE 1.7.5 与 Maven 一起工作：

```
<properties>
    <gae.version>1.7.5</gae.version>
    <gae-runtime.version>1.7.5.1</gae-runtime.version>
    <maven.gae.plugin.version>0.9.6</maven.gae.plugin.version>
</properties>

    <plugin>
      <groupId>net.kindleit</groupId>
      <artifactId>maven-gae-plugin</artifactId>
      <version>${maven.gae.plugin.version}</version>
      <configuration>
            <unpackVersion>${gae.version}</unpackVersion>
            <serverId>appengine.google.com</serverId>
            <appDir>${webappDirectory}</appDir>
        </configuration>
        <dependencies>
            <dependency>
                <groupId>net.kindleit</groupId>
                <artifactId>gae-runtime</artifactId>
                <version>${gae-runtime.version}</version>
                <type>pom</type>
            </dependency>
        </dependencies>
    </plugin> 
```

但是有这个问题：

```
[WARNING] The POM for net.kindleit:maven-gae-plugin:jar:0.9.6 is missing, no dependency information available
[WARNING] Failed to retrieve plugin descriptor for net.kindleit:maven-gae-plugin:0.9.6: Plugin net.kindleit:maven-gae-plugin:0.9.6 or one of its dependencies could not be resolved: Failed to read artifact descriptor for net.kindleit:maven-gae-plugin:jar:0.9.6
[WARNING] The POM for org.eclipse.m2e:lifecycle-mapping:jar:1.0.0 is invalid, transitive dependencies (if any) will not be available, enable debug logging for more details 
```

然后最终，将以BUILD FAILURE告终。

如何`1.7.5`使用 Maven 针对版本构建我的 GAE？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:15:19.363

您可以使用[App Engine Maven 插件](https://developers.google.com/appengine/docs/java/tools/maven)。我们在 github 上也有[一个留言簿示例应用程序。](https://github.com/GoogleCloudPlatform/appengine-guestbook-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:43:51.877

官方的 appengine-maven-plugin 支持 1.7.6，如果需要，可以使用 1.7.5 版本，但现在是 1.7.6。

# javascript - 使用 Javascript 进行 HTML 表单验证

> ID：15639357
> 
> 赞同：0
> 
> 时间：2013-03-26T14:17:56.947
> 
> 标签：javascript, html

我在 HTML 中使用 javascript 有点新。我想使用 javascript 验证 HTML 脚本，但是我写的似乎不起作用。谁能告诉我哪里出错了？？？这是Javascript：

```
<script type="text/javascript">
function mandatoryFields()
{
var x=document.forms["add"]["contract_id"].value
if (x==null || x=="")
  {
  alert("Please Enter the Contract Title");
  return false;
  }
var x=document.forms["add"]["storydiv"].value
if (x==null || x=="")
  {
  alert("Please Enter a Sprint");
  return false;
  }
var x=document.forms["add"]["storydiv"].value
if (x==null || x=="")
  { 
  alert("Please Enter a Story");
  return false
  }        
var x=document.forms["add"]["date1"].value
if ( x=="" || x==null) 
  { 
  alert("Please Enter a time");
  return false
  }  

</script> 
```

这是相应的HTML脚本

```
<form name="add" action="time-sheet/insert-time-sheet.php" method="post" onsubmit="return mandatoryFields()">
<table width="500" border="0" align="center" cellpadding="2" cellspacing="2">
  <tr>
    <td colspan="2">&nbsp;</td>
  </tr>
  <tr>
    <td width="150">Select Date:</td>
    <td width="336"><input name="date" type="text" value="YYYY-MM-DD" maxlength="100" class="datepick" id="date1" /></td>
  </tr>
  <tr>
    <td>Contract:</td>
    <td><SELECT NAME="contract_id" onChange="getSprint(this.value)"><OPTION VALUE=0>--- Select Contract ---<?php echo $options_contract?></SELECT></td>
  </tr>
  <tr>
    <td>Sprint:</td>
    <td><div id="sprintdiv"><select name="sprint" >
    <option>--- Select Sprint ---</option>
        </select></div></td>
  </tr>
  <tr>
    <td>Story:</td>
    <td><div id="storydiv"><select name="story">
    <option>--- Select Story ---</option>
        </select></div></td>
  </tr>
  <tr>
    <td>Dev Time:</td>
    <td><input name="dev_time" size="20" onkeyup="ondalikSayiKontrol(this)" /></td>
  </tr>
  <tr>
    <td>PM Time:</td>
    <td><input name="pm_time" size="20" onkeyup="ondalikSayiKontrol(this)"/></td>
  </tr>
  <tr>
    <td colspan="2"><table width="182" border="0" align="center" cellpadding="2" cellspacing="2">
      <tr>

        <td width="68"><input name="Submit" type="submit" id="Submit" value="Add Time Sheet" /></td>
        <td width="48"><label>
          <input type="reset" name="reset" value="Reset" />
        </label></td>
        <td width="46"><div align="center"><a href="javascript:history.go(-1);">Back</a></div></td>
      </tr>
      <input type="hidden" name="day" value="<?php echo $day; ?>" />
      <input type="hidden" name="employee_id" value="<?php echo $employee_id; ?>" />
    </table></td>
    </tr>
  <tr>
    <td colspan="2">&nbsp;</td>
  </tr>
</table>
</form> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:20:58.657

您缺少该函数的右大括号。如果您检查浏览器上的错误控制台，它很可能会告诉您`mandatoryFields()`未定义。添加右大括号将解决此问题。`true`如果没有任何验证失败，您也应该返回。最后一件事是你在每个 if 之前重新声明 x。不确定它是否会产生错误，但仍应修复。

```
<script type="text/javascript">
function mandatoryFields()
{
    var x=document.forms["add"]["contract_id"].value;
    if (x==null || x=="")
    {
        alert("Please Enter the Contract Title");
        return false;
    }
    x=document.forms["add"]["storydiv"].value;
    if (x==null || x=="")
    {
        alert("Please Enter a Sprint");
        return false;
    }
    x=document.forms["add"]["storydiv"].value;
    if (x==null || x=="")
    { 
        alert("Please Enter a Story");
        return false;
    }
    x=document.forms["add"]["date1"].value;
    if ( x=="" || x==null) 
    {
        alert("Please Enter a time");
        return false;
    }
    return true; // ADD THIS
} // ADD THIS
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:24:23.743

当所有字段都正确时，您的`madatoryFields()`函数不会返回**true 。**

从[这里](http://msdn.microsoft.com/en-us/library/ie/ms536972%28v=vs.85%29.aspx)：

> 如果事件处理函数被表单对象的onsubmit属性调用，代码必须使用return函数显式请求返回值，并且事件处理函数必须为事件处理函数中的每一个可能的代码路径提供一个显式的返回值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T14:50:56.760

获取正确的元素并在 sprint 和故事中的选项上执行循环。您可以使用表单的名称和选择框的名称直接访问元素。

```
var x = document.add.contract_id.value;
if(){
 ... your stuff here
} 
```

您也可以在不使用其名称属性的情况下访问第一个表单。

```
x = document.forms[0].contract_id.value; 
```

冲刺循环通过可能的选项，然后发出警报。

```
x = document.add.sprint;
var selected = false;
for (i = 0; i < x.length; ++i){
   if (x.options[i].selected == true)
      selected = true;
}
if(!selected){
   alert("Select a story please!");
   return false;
}

x = document.add.story;
selected = false;
// same procedure 
```

您还可以通过 getElementByID() 和 getElementsByTagName() 访问元素，后者返回所有匹配元素的数组。

```
document.getElementById('storydiv').getElementsByTagName('story')[0];

document.getElementsByTagName('contract_id')[0]; 
```

并且不要在每个验证步骤中重新声明 var x。

# android - 通过在两个选项卡之间切换重新加载地图片段

> ID：15639362
> 
> 赞同：3
> 
> 时间：2013-03-26T14:18:14.773
> 
> 标签：android, google-maps, fragment

我有三个活动。一个组织选项卡的人切换了两个在地图片段中显示谷歌地图的人。

如果我在这两个地图活动之间切换，我会看到两个地图。旧的作为图片，新的作为地图。例如：我从活动 A 切换到活动 B，我在活动 B 中看到活动 B 中的地图和活动 A 中地图中的图片。

如果我最小化和最大化应用程序，则活动将被更新，因此活动 A 中的图片将被删除。

![活动 A][1] ![活动 B][2]

我该如何解决这个问题？

非常感谢

# asp.net - 如何使用 WebApi 将 POST 映射到自定义操作？

> ID：15639363
> 
> 赞同：4
> 
> 时间：2013-03-26T14:18:17.460
> 
> 标签：asp.net, asp.net-web-api

我试图找出 Web API 路由背后的疯狂之处。

当我尝试发布这样的数据时：

```
curl -v -d "test" http://localhost:8088/services/SendData 
```

我收到 404 和以下错误消息：

```
{"Message":"No HTTP resource was found that matches the request URI 'http://localhost:8088/services/SendData'.","MessageDetail":"No action was found on the controller 'Test' that matches the request."} 
```

这是我的测试服务器的代码。

```
public class TestController : ApiController
{

    [HttpPost]
    public void SendData(string data)
    {
        Console.WriteLine(data);
    }
}

class Program
{
    static void Main(string[] args)
    {

        var config = new HttpSelfHostConfiguration("http://localhost:8088");

        config.Routes.MapHttpRoute(
            name: "API Default",
            routeTemplate:"services/SendData",
            defaults: new { controller = "Test", action = "SendData"},
            constraints: null);

        using (var server = new HttpSelfHostServer(config))
        {
            server.OpenAsync().Wait();  
            Console.WriteLine("Press Enter to quit.");
            Console.ReadLine();
        }

    }
} 
```

更一般地说，为什么 ASP.NET 团队决定让 MapHttpRoute 方法如此混乱。为什么它需要两个匿名对象....任何人都应该知道这些对象实际需要什么属性？

MSDN 没有提供任何帮助： http: [//msdn.microsoft.com/en-us/library/hh835483 (v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/hh835483(v=vs.108).aspx)

如果你问我，动态类型语言的所有痛苦都没有任何好处......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T14:25:19.280

同意你的观点，这太疯狂了，你需要指定`data`参数应该从 POST 有效负载中绑定，因为 Web API 自动假定它应该是查询字符串的一部分（因为它是一个简单的类型）：

```
public void SendData([FromBody] string data) 
```

更糟糕的是，您需要在 POST 有效负载前面加上`=`（是的，这不是错字，它是等号）：

```
curl -v -d "=test" http://localhost:8088/services/SendData 
```

你可以阅读更多关于疯狂的内容[`this article`](http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx)。

或者停止疯狂并尝试[`ServiceStack`](http://www.servicestack.net/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T15:28:18.650

使用此签名，它将每次都有效。

```
public class TestController : ApiController
{
    [HttpPost]
    [ActionName("SendData")]
    public HttpResponseMessage SendData(HttpRequestMessage request)
    {
        var data = request.Content.ReadAsStringAsync().Result;
        Console.WriteLine(data);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T14:31:11.980

尝试以下更改，

```
public class TestController : ApiController
{
    [HttpPost]
    [ActionName("SendData")]
    public void SendData(string data)
    {
        Console.WriteLine(data);
    }
} 
```

ActionName 属性可能会解决此问题。否则，您也可以使用命名约定“Post”

```
public void Post(string data)
{
   Console.WriteLine(data);
} 
```

并在没有 SendData 的情况下直接将 Http Post 发送到“服务”。

# css - 页面底部的div

> ID：15639381
> 
> 赞同：2
> 
> 时间：2013-03-26T14:18:51.503
> 
> 标签：css, html, footer

在我的网站上，我想要在网站底部的页脚。我将其添加到页脚 css：

```
position: fixed;
bottom: 0;
width: 100%; 
```

页脚现在在底部很好，但所有内容都在页脚 div 上。就像页脚 div 是背景一样。如何将页脚放在右下角？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:20:55.710

你似乎在问两个不同的问题。尝试提高页脚元素的 z-index 以使其高于其他内容。

要将其放在右下角，请将宽度和右侧位置设置为零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:29:40.573

Position: fixed 将元素从页面流中取出。结果是，当涉及到影响其他元素时，您的页脚“什么都没有”。您的内容最终排在首位的原因是它实际上并不知道它在那里。我的意思是，在考虑其他元素时，您需要考虑页脚。例如，如果你有一个在页脚之前结束的包装器，你可以给它一个额外的底部填充，它等于你的页脚高度。

要回答您问题的一种隐藏的第二部分：为了能够为元素提供 z-index，它需要与“静态”（默认定位）以外的其他东西一起定位。如果您尝试在两个不同的元素上计算 z-index，则需要为它们都提供一个除“静态”之外的位置值来获得完全控制。

希望其中的一些帮助，iso

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T14:22:09.700

看看这篇文章“如何在页面底部保留页脚”：

[http://matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page](http://matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T14:20:13.663

我不确定我是否理解您的问题，但您可以尝试在页脚 css 中添加/更改它

```
right: 0;
width: 50%;
z-index: 999; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T14:21:07.490

您需要使用 CSS[`z-index`](http://www.w3.org/TR/2007/CR-CSS21-20070719/visuren.html#z-index)属性并让您的主要内容容器`padding-bottom`等于页脚的高度，以防止页脚*切断*页面底部。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T14:26:44.460

您需要通过将页脚的高度添加到内容区域的底部边距来补偿页脚的高度。首先，寻找出现在每页页脚之前的元素。希望它会是这样的：

```
<div id="header">
    HEADER CONTENT
</div>
<div id="content" style="margin-bottom: 50px;">
    YOUR SITES CONTENT
</div>
<div id="footer" style="position: fixed; bottom: 0; width: 100%; height: 50px;>
    FOOTER CONTENT
</div> 
```

另外，不要像我上面那样使用内联样式。请使用propper css :) 它有助于所有的互联网。

# jquery - 使用 jquery 和 css2 旋转 div

> ID：15639382
> 
> 赞同：-1
> 
> 时间：2013-03-26T14:18:53.223
> 
> 标签：jquery, css, rotation

我有一个`div`我想在`mouseenter`事件中旋转它，

我希望旋转动画不是一个动作 - 像`:hover`- ，当然有 jQuery 任何想法来制作它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:31:26.623

如果你掏空你的搜索，你会发现很多例子。例如，从[这里](https://stackoverflow.com/a/3792085/237838)我发现了这个：

```
$(function() {
    var $elie = $(selectorForElementsToRotate);
    rotate(0);
    function rotate(degree) {

          // For webkit browsers: e.g. Chrome
        $elie.css({ WebkitTransform: 'rotate(' + degree + 'deg)'});
          // For Mozilla browser: e.g. Firefox
        $elie.css({ '-moz-transform': 'rotate(' + degree + 'deg)'});

          // Animate rotation with a recursive call
        setTimeout(function() { rotate(++degree); },5);
    }
}); 
```

# c# - 如何在与文本框控件无关的情况下将 ENTER 链接/设置到 winforms 中的函数？

> ID：15639389
> 
> 赞同：3
> 
> 时间：2013-03-26T14:19:05.380
> 
> 标签：c#, winforms

我正在使用 Winforms。

我有一个屏幕大约。10 个字段。和一个更新按钮。但我不想在屏幕上显示一个按钮（`btnUpdate`）。

我只想显示这些字段，它们可以更改一些值，然后按回车键它应该在后面的代码中执行一个函数。

我用谷歌搜索并找到了一些解决方案，例如`KeyPress`on`TextBox`或其他，但我不想将其链接到`TextBox`. 然后我发现`form.Acceptbutton = btnUpdate`......但是我必须在我的设计师上使用一个按钮。

那么如何通过不使用 Button 控件进行更新（换句话说，通过按 Enter 键在代码隐藏中执行功能）来进行设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:25:01.700

尝试覆盖 ProcessCmdKey

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{
    if (keyData == Keys.Return)
    {
        //Raise Update Event
        return true;
    }
    else if (keyData == Keys.Escape)
    {
        //Raise Cancel Event
        return true;
    }
    return base.ProcessCmdKey(ref msg, keyData);
} 
```

# android - 编写 Android 模拟器

> ID：15639393
> 
> 赞同：-2
> 
> 时间：2013-03-26T14:19:25.723
> 
> 标签：android

有谁知道android模拟器的启动过程吗模拟器是生产出来的？实际上，我想知道如何编写一个模拟器来自己加载android system.img。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:22:20.167

这是使用您自己的 system.img 启动 AVD 的命令

```
emulator -avd AVD_NAME -initdata userdata.img -ramdisk ramdisk.img -system system.img -sdcard ~/songs_for_music_app/Music_card.img 
```

对于源代码`git clone https://android.googlesource.com/platform/sdk` ，请按照此[修改 Android 模拟器源代码](https://stackoverflow.com/questions/8134089/android-emulator-source-code)。

或者按照整个android源代码 [https://source.android.com/source/downloading.html](https://source.android.com/source/downloading.html)

# jquery - Jquery 菜单 mouseout/mousemove 关闭问题 jsfiddle

> ID：15639395
> 
> 赞同：-1
> 
> 时间：2013-03-26T14:19:38.417
> 
> 标签：jquery, mouseover, mousemove

我一直在研究这个菜单，您可以在其中翻转链接并让内容 id# 出现在菜单的右侧。我将它设置为当鼠标移动到 div 包装器之外以关闭内容时，但我注意到如果有人真的快速移动鼠标，jquery 计算会在外部包装器 div 时冻结，因此菜单内容卡在最后一个翻转链接上。如果有人可以用简单的逻辑帮助我解决这个问题，那就太好了。

见 jsfiddle.net/ifelse/Qp7XC/

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:29:23.567

以您的示例为例，如果您在水平线上移动指针，内容就会卡住。问题是您`<li>`正在占用整条线的宽度，因此`onmouseout`事件不会触发。将 li 做得更小，这应该可以。

# c# - Asp.net c# Button click call a procedure and Also opens in a target_blank

> ID：15639397
> 
> 赞同：2
> 
> 时间：2013-03-26T14:19:48.350
> 
> 标签：c#, asp.net

我正在尝试制作一个按钮，当单击该按钮时会调用一个过程，但也会在弹出窗口中打开。我找不到怎么做，因为我所做的所有搜索只告诉我把它放在 te clientclick 上：

```
<asp:Button ID="cmbGen" runat="server" Width="240px" Text="Générer le rapport"          OnClick="cmbGen_Click"></asp:Button> 
```

onclick 打开一个 pdf，它在 Ie 上不能正常工作，所以，为了解决这个问题，我希望 pdf 在弹出窗口中打开

不知道我能做什么..有人有想法吗？

**编辑**

代码相当大，但基本上，根据选中的复选框，它会创建一个 pdf 文件并显示它。这很好用，但它在当前页面中打开，我想在弹出窗口中打开

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T14:29:50.877

A`Button`总是在当前窗口上向服务器提交回发，因此您不能直接将新窗口绑定到它。您需要编写一些 javascript 来执行此操作，然后打开一个弹出窗口。

您可以通过多种方式执行此操作 - 您可以将事件处理程序连接到按钮，以便在单击它时立即打开一个新窗口，并且该窗口指向您返回 PDF 的服务器代码。或者您可以定期回发，并返回一些弹出新窗口的 javascript。但无论哪种方式，javascript 都是从表单按钮获取弹出窗口的唯一方法。

Liam 建议创建链接而不是按钮可能是最简单的方法 - 如果需要，您可以在该链接上放置图像以使其看起来像按钮。

**编辑** 根据您对另一个答案的评论，您最简单的选择是在按钮单击方法上返回一些 javascript，使用`ClientScript.RegisterStartupScript`或微软最近推荐的任何东西。您可以首先执行您需要的任何逻辑，然后通过会话或查询字符串参数将其放入新的处理程序中，并让客户端弹出一个指向该处理程序的新窗口。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T14:22:42.160

看不到你 c# 所以不是 100% 确定你想要什么，但为什么要使用 a `asp:Button`：

```
<a href="myPDF.pdf" target="_blank">Générer le rapport</a> 
```

# javascript - 在 a 中显示选定的名称 通过使用 javascript 数组

> ID：15639400
> 
> 赞同：0
> 
> 时间：2013-03-26T14:20:06.337
> 
> 标签：javascript, cometd

我有一个显示在线人员姓名的 div，我在 div 中有以下成员

```
<div id="members">
<span>Amlan Karmakar</span>
<span>Atin Roy</span>
<span>Arpan Burman</span>
<span>Ramanuj Mukherjee</span>
</div> 
```

我有另一个 javascript 数组`friends[]`，它有`'Amlan Karmakar'`并且`'Ramanuj Mukherjee'`有朋友，我想显示数组中的那些成员`friends[]`，我正在插入朋友的名字`friends.push("Amlan Karmakar")`。div 中的名称是由 cometd 聊天自动生成的，为简单起见，我将名称写在 div 中。我希望有一个解决这个问题的方法。[我之前的问题](https://stackoverflow.com/questions/15623841/showing-selected-user-in-cometd-chat)没有解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:38:50.933

你应该试试 knockout.js，这个框架将帮助你处理这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:32:07.987

试试这个，只从成员列表中删除朋友：

```
var friendMembers = document.getElementById('members').split(/<br\s*[\/]?>/gi)
      .filter(function(member) { return (friends.indexOf(member) > -1) } ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T14:26:47.427

您可以尝试类似下面的方法，即拆分包含成员的 div 的 HTML，遍历它们并检查它们是否在 friendsArray 中。请注意，这是一个粗略的实现，并且它假定一个相当新的浏览器，因为它使用 Ecmascript 5 功能。这个概念也可以使用老式`for`循环来应用。

```
var all = document.getElementById('members').getElementsByTagName('span');
var friendsOnly = '';
for(var i=0; i<all.length; i++){
    if(friendsArray.some(function(friend){
        return friend == all[i].innerHTML;
    })){
        friendsOnly += '<span>' + all[i].innerHTML + '</span>';
    }
});
all.innerHTML(friendsOnly); 
```

顺便说一句，我假设friendsArray 可能包含尚未在div 中的人。如果不是这种情况，那么我不确定问题是什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T14:35:15.450

> 所以你想把朋友[]数组中的数据放入`<div id="members">`
> 
> *我只希望那些名称显示在 friends[] 数组中*

如果您只想显示朋友数组中的名称，正如您在评论中建议的那样，我想这可以解决问题：

```
var target = document.getElementById("members");

// Remove this line if you want to keep the current names in the members div.
target.innerHTML = ""; // Clean before inserting friends

for (var i = 0; i <= friends.length; i++) {
    target.innerHTML += friends[i] + "<br />"; // Add friend + break
} 
```

# android - 移除或更新模拟器上的 Google Play 服务

> ID：15639402
> 
> 赞同：3
> 
> 时间：2013-03-26T14:20:15.710
> 
> 标签：android, android-emulator

我编写了一个使用 google maps api v2 的 android 应用程序。我想在模拟器上测试它，但要显示地图它有一点问题。我用谷歌搜索并找到了我必须安装到软件包（vending.apk、android.gms.apk）的文章。我下载了软件包并安装了它。我不知道的是，安装的 android.gms.apk 不是最新的。当我在模拟器上运行该应用程序时，它会显示一个按钮和一条消息：...更新 Google Play 服务。现在我找到了.gms.apk 的最新版本。但我无法删除或更新模拟器上的 google play 服务，因为我从 cmd 变成了以下消息：

![在此处输入图像描述](../Images/e0f5e7291b7983e5ca0df2b9d451e7e7.png)

这些问题有解决方案吗？提前谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T06:04:24.060

安装谷歌服务包；gms和自动售货机

*   确保模拟器启动
*   将 com.google.android.gms-19032013.apk 和 com.google.android.vending-19032013.apk 文件复制到我的博客中的 < bundle root >\sdk\platform-tools。
*   打开命令提示符并转到 <bundel root>\sdk\platform-tools
*   然后运行命令 adb install com.google.android.gms-19032013.apk
*   然后运行命令 adb install com.android.vending-19032013.apk 如果它说已经退出然后运行命令 -adb uninstall com.android.vending -adb uninstall com.google.android.gms

我有类似的问题，所以我准备了一步一步的教程来展示如何在模拟器（android 4.2.2）上使用谷歌地图 android v2 看看我的博客：[http ://umut.tekguc.info/en/content /google-android-map-v2-step-step](http://umut.tekguc.info/en/content/google-android-map-v2-step-step)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-25T00:12:44.663

adb uninstall 不能用于系统应用程序是我发现的。Vending 和 gms 是系统应用程序。因此，即使我 su，adb uninstall com.android.vending 也会导致失败。那么这个问题没有解决办法吗？

即使我使用 -r 也无法安装它，因为证书不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-28T14:25:06.363

以下链接可帮助您逐步了解 google android map

[http://umut.tekguc.info/en/content/google-android-map-v2-step-step](http://umut.tekguc.info/en/content/google-android-map-v2-step-step)

从以下链接下载软件包

通过输入包名

[http://www.filecrop.com/search.php?w=com.google.android.gms-19032013.apk&size_i=0&size_f=100000000&engine_d=1&engine_h=1&engine_e=1&engine_m=1&engine_4=1](http://www.filecrop.com/search.php?w=com.google.android.gms-19032013.apk&size_i=0&size_f=100000000&engine_d=1&engine_h=1&engine_e=1&engine_m=1&engine_4=1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-25T00:16:47.043

user2414493 我最初尝试重新安装的原因是因为即使使用 google API 19 我的应用程序也能在三星 s3 和 Nexus 4 上崩溃。就在它崩溃之前它会打印这个

Google Play 服务已过时。需要 4132500 但找到 4033530。

事实上，在谷歌 API 19 上，甚至谷歌地图也不能完全正常工作！即使我有互联网连接和模拟 4g，我也无法获得当前位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-23T16:34:27.070

您应该在 android 而不是 google api 上尝试它，我相信它会为您工作。因为google api已经安装了这些apk。

# asp.net - 在 asp.net 的回发之间保持 Page.Init 中可访问的值

> ID：15639403
> 
> 赞同：4
> 
> 时间：2013-03-26T14:20:16.613
> 
> 标签：asp.net, postback, viewstate, dynamic-controls

好的，我已经了解到，为了在 asp.net 中保留动态（创建的）控件及其视图状态，我们必须在 Page init 事件中（重新）创建它们，因此它们在视图之前已经存在于页面的控件层次结构中状态已加载。

[正如它在这篇文章](http://aspnet.4guysfromrolla.com/articles/092904-1.aspx)中所说。

如果创建这些控件的标准在 Web 环境之外，例如数据库，则实现此行为没有问题。但是，如果我用来决定我必须创建多少个动态控件实际上是控件中的一个值，我该怎么办？

我尝试用一​​个例子来解释它，也许它更清楚：

假设我们有一个文本框和两个按钮。在文本框中，我写下我想要创建的动态控件的数量，例如 4 个复选框。当我点击 button1 时，应该创建控件。没问题。然后我检查了一些复选框并点击按钮 2 只是为了触发回发。现在我应该在页面初始化事件中重新创建控件，就像我们之前所说的那样，以维护控件及其状态。

**问题来了**。因为我处于*初始化阶段*，所以我*没有视图*状态，所以我无法访问告诉我应该创建多少个动态复选框的文本框中的值。

我认为将值存储在会话对象中可以解决问题，但事实并非如此。会话对象也无法访问。

我在哪里可以保存从 init 事件中也可以访问的值？

感谢和抱歉这么长的帖子！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:54:30.383

第一件事 - 文本框值未从视图状态存储/检索，您无法从视图状态获取文本框值。谈到实际问题，这里是（imp）事件的顺序 init -> 加载视图状态 -> 绑定回发数据 -> 页面加载。只有在绑定回发数据事件（它实际上获取发布的数据并绑定到文本框控件）之后才能检索文本框值。在初始化中，唯一的选择是使用 Request.Form{"textboxid"] 来获取文本框值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:03:49.267

You are on the right track.

If you use TextBox, you do not need another ViewState to keep track of how many controls has been created, because TextBox control has its own ViewState already.

You can use either Page_Init or Page_Load to load control back.

![enter image description here](../Images/cc2953b96ea94f25562ab1368a2782eb.png)

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs"
    Inherits="WebApplication2010.WebForm1" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:TextBox runat="server" ID="NumberTextBox" />
        <asp:Button runat="server" ID="CreateControlButton" 
            OnClick="CreateControlButton_Click"
            Text="Create Control" />
        <br />
        <asp:PlaceHolder runat="server" ID="PlaceHolder1"></asp:PlaceHolder>
    </div>
    </form>
</body>
</html>

using System;
using System.Web.UI;

namespace WebApplication2010
{
    public partial class WebForm1 : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            if (IsPostBack)
            {
                int ids;
                if (Int32.TryParse(NumberTextBox.Text, out ids))
                {
                    for (int i = 0; i < ids; i++)
                    {
                        Control ctrl = Page.LoadControl("WebUserControl.ascx");
                        ctrl.ID = i.ToString();
                        PlaceHolder1.Controls.Add(ctrl);
                    }
                }
            }
        }

        protected void CreateControlButton_Click(object sender, EventArgs e)
        {

        }
    }
}

<%@ Control Language="C#" AutoEventWireup="true" 
    CodeBehind="WebUserControl.ascx.cs"
    Inherits="WebApplication2010.WebUserControl" %>
<asp:CheckBox runat="server" ID="CheckBox1" />
<asp:Button runat="server" ID="Button1" OnClick="Button_Click" 
    Text="Post Back" />
<asp:Label runat="server" ID="Label1" />
<br />

using System;

namespace WebApplication2010
{
    public partial class WebUserControl : System.Web.UI.UserControl
    {
        protected void Button_Click(object sender, EventArgs e)
        {
            Label1.Text = " This control was posted back.";
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-24T16:49:38.110

当您使用背后的代码时，这是页面生命周期的常见悖论。例如，您将编辑 customerid 保存在 viewstate 中，但控件需要在 init 上绑定才能读取其发布的值。

现实生活中最好的解决方案是做绑定控件在回发时所做的事情，在页面加载事件中创建它们之后，显式调用所有控件实现的 IPostBackDataHandler 接口上的 LoadPostBackData。

您应该为 Controls 创建一个扩展方法并在需要时调用它： control.DataBind(); control.LoadPostedData(); // 扩展方法

# symfony - 如何正确重命名 Symfony 2 安装文件夹？

> ID：15639407
> 
> 赞同：1
> 
> 时间：2013-03-26T14:20:21.187
> 
> 标签：symfony

我以这种方式安装 Symfony 2.3.0-DEV：

```
composer self-update
git clone https://github.com/symfony/symfony-standard test1
copy .\test1\app\config\parameters.yml .\test1\app\config\parameters.yml.dist
composer install 
```

但是，每次我不得不重命名（即“test2”）项目文件夹。我的安装中断并显示错误：

```
Warning: require_once(C:\xampp\htdocs\symfony-projects\test1\web/../app/bootstrap.php.cache): failed to open stream: No such file or directory in C:\xampp\htdocs\symfony-projects\test1\web\app_dev.php on line 19

Fatal error: require_once(): Failed opening required 'C:\xampp\htdocs\symfony-projects\test1\web/../app/bootstrap.php.cache' (include_path='.;\xampp\php\PEAR') in C:\xampp\htdocs\symfony-projects\test1\web\app_dev.php on line 19 
```

我试过，删除缓存文件夹，删除 bootstrap.cache.php 文件，并重新安装/更新供应商，包括自动加载器，还有缓存：预热和缓存：清除，更改权限。而且还是什么都没有……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:47:22.760

终于解决了！这就是我所做的。

```
composer self-update
git clone https://github.com/symfony/symfony-standard test1
copy .\test1\app\config\parameters.yml .\test1\app\config\parameters.yml.dist
composer install 
```

*   加载`http://localhost/symfony-projects/test1/web/app_dev.php`一次。
*   关闭浏览器 (chrome)，停止 xampp (apache/mysql) 和 powershell
*   删除*/app/cache/* * 和*/app/bootstrap.php.cache 文件*
*   关闭 IDE，在 Windows 8 中注销我的用户会话（开始感觉偏执）
*   将文件夹重命名`test1`为`test2`
*   执行`composer update`命令调用*post-update-cmd*脚本以确保*bootstrap.php.cache*已重建
*   去了`http://localhost/symfony-projects/test2/web/app_dev.php`

然后工作。可能这个问题是由于锁定的文件......

@Touki 谢谢，APC 是一个很好的洞察力，但不需要它；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-30T17:44:36.460

这个话题很老了，但我也遇到了同样的问题。问题是：我使用命令安装了 symfony2：

```
php composer.phar create-project symfony/framework-standard-edition myProject 2.1.x-dev 
```

但我有同样的致命错误。但是，我的解决方案是转到 myProject 目录并运行命令：

```
composer update 
```

就是这样，项目被重建并且文件“bootstrap.php.cache”出现了:)

我希望这有帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-11-17T18:00:36.560

下次，只需重新启动您的机器。

# vb.net - 在 LINQ 查询中忽略“排序依据”

> ID：15639408
> 
> 赞同：1
> 
> 时间：2013-03-26T14:20:22.467
> 
> 标签：vb.net, linq, sql-order-by

我正在尝试按公司名称对列表进行排序。我已经尝试过以下代码，但这会按 CompID 而不是 CoShort 对列表进行排序。我应该如何将其更改为按 CoShort 排序？

```
Public Shared Function [SelectCompanyData](iElement() As Integer) As List(Of CompanyList)

    Dim db As New EntryDataContext()

    Dim q As IQueryable(Of CompanyList) = (From Act_Sub_Manfu_Link In db.Act_Sub_Manfu_Links _
            Join Company In db.Companies _
            On Act_Sub_Manfu_Link.CompID Equals Company.CompID _
            Where iElement.Contains(Act_Sub_Manfu_Link.ACCN) _
            And Company.In_Dir _
            Select New CompanyList With { _
                .CompID = Company.CompID, _
                .InDir = Company.In_Dir, _
                .CoShort = Company.CoShort _
                }).Distinct

    q.OrderBy(Function(c) c.CoShort)

    Dim list As List(Of CompanyList) = q.ToList

    Return list

End Function 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T14:21:07.583

您必须将有序集合分配给一个变量：

```
Dim oq As IOrderedQueryable(Of CompanyList) = q.OrderBy(Function(c) c.CoShort) 
```

并使用它来获取结果列表：

```
Dim list As List(Of CompanyList) = oq.ToList() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T15:18:32.397

除了返回值之外，不需要分配任何东西

```
Public Function SelectCompanyData(iElement() As Integer) As List(Of CompanyList)
    Dim db As New EntryDataContext()
    Return (From Act_Sub_Manfu_Link In db.Act_Sub_Manfu_Links _
            Join Company In db.Companies _
            On Act_Sub_Manfu_Link.CompID Equals Company.CompID _
            Where iElement.Contains(Act_Sub_Manfu_Link.ACCN) _
            And Company.In_Dir _
            Select New CompanyList With { _
                .CompID = Company.CompID, _
                .InDir = Company.In_Dir, _
                .CoShort = Company.CoShort _
                }).Distinct().OrderBy(Function(c) c.CoShort).ToList()
End Function 
```

# ajax - 从 JSON 向 Google Maps v3 添加多个标记

> ID：15639411
> 
> 赞同：1
> 
> 时间：2013-03-26T14:20:23.807
> 
> 标签：ajax, json, google-maps, marker

我一直在尝试制作一个在谷歌地图上显示多个标记的网络应用程序。我尝试使用[本教程](http://www.svennerberg.com/2012/03/adding-multiple-markers-to-google-maps-from-json/)并且代码运行良好，直到我需要从服务器获取 JSON 数据，而不是使用与代码相同的 js 文件中的示例 JSON 数据。

我尝试将 ajax 响应保存到变量中，但出现此错误

```
TypeError: json is null
[Break On This Error]   

for (var i = 0, length = json.length; i < length; i++) { 
```

这是我正在使用的代码。

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map-canvas { height: 100% }
    </style>
     <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
     <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
     <script src="http://code.jquery.com/jquery-migrate-1.1.1.min.js"></script>
    </script>
    <script type="text/javascript">
      function initialize() {
        var mapOptions = {
           center: new google.maps.LatLng(57.9, 14.6),
          zoom: 5,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map-canvas"),
            mapOptions);

         var json = (function () { 
            var json = null; 
                $.ajax({ 
                    'async': false, 
                    'global': false, 
                    'url': "http://myurl.com/getdata", 
                    'dataType': "json", 
                    'success': function (data) {
                     json = data; } }); 
                return json;})(); 

for (var i = 0, length = json.length; i < length; i++) {
  var data = json[i],
      latLng = new google.maps.LatLng(data.lat, data.lng); 

  // Creating a marker and putting it on the map
  var marker = new google.maps.Marker({
    position: latLng,
    map: map,
    title: data.title
  });
}

var infoWindow = new google.maps.InfoWindow();

// Attaching a click event to the current marker
google.maps.event.addListener(marker, "click", function(e) {
  infoWindow.setContent(data.description);
  infoWindow.open(map, marker);
});

// Creating a closure to retain the correct data 
//Note how I pass the current data in the loop into the closure (marker, data)
(function(marker, data) {

  // Attaching a click event to the current marker
  google.maps.event.addListener(marker, "click", function(e) {
    infoWindow.setContent(data.description);
    infoWindow.open(map, marker);
  });

})(marker, data);

      }
      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <div id="map-canvas"/>
  </body>
</html> 
```

# python - 单选按钮和消息

> ID：15639413
> 
> 赞同：-1
> 
> 时间：2013-03-26T14:20:32.120
> 
> 标签：python, radio-button, tkinter, message

当检查单选按钮时，我该如何进行此消息，然后显示一些消息（在Python 3和Tkinter中）？

例如：

```
from Tkinter import *

master = Tk()

v = IntVar()

Radiobutton(master, text="One", variable=v, value=1).pack(anchor=W)
Radiobutton(master, text="Two", variable=v, value=2).pack(anchor=W)

mainloop() 
```

并且当检查其中一个按钮时，它会显示一些消息，例如。“已选中 RadioButton1”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:44:00.743

选择单选按钮时，将调用选项中使用的函数`command`（如果存在）。记得传递事件处理函数的引用，也就是不带括号的函数名。

```
def handler():
    print "RadioButton%s is checked" % (v.get())

Radiobutton(master, text="One", variable=v, value=1, command=handler).pack(anchor=W)
Radiobutton(master, text="Two", variable=v, value=2, command=handler).pack(anchor=W) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:30:34.460

使用 tkinter Checkbutton 的命令选项...

```
from tkinter import *

class Application(Frame):
    def say_hi(self):
        if self.var.get() or self.var2.get():
            msg = ''
            if self.var.get():
                msg = 'Radio button 1 is checked\n'
            if self.var2.get():
                msg += 'Radio button 2 is checked'

            print(msg) # to sdtout...
            top = Toplevel()
            top.title("Pop-up...")
            msg = Message(top, text=msg)
            msg.pack()
            button = Button(top, text="Close", command=top.destroy)
            button.pack()

    def createWidgets(self):
        self.QUIT = Button(self)
        self.QUIT["text"] = "Close"
        self.QUIT["fg"]   = "red"
        self.QUIT["command"] =  self.quit
        self.QUIT.pack({"side": "left"})

        self.var = IntVar()
        self.checkbox = Checkbutton(self)
        self.checkbox["text"] = 'radio1'
        self.checkbox["command"] = self.say_hi
        self.checkbox["variable"] = self.var
        self.checkbox.pack({"side": "left"})

        self.var2 = IntVar()
        self.checkbox2 = Checkbutton(self)
        self.checkbox2["text"] = 'radio2'
        self.checkbox2["command"] = self.say_hi
        self.checkbox2["variable"] = self.var2
        self.checkbox2.pack({"side": "left"})

    def __init__(self, master=None):
        Frame.__init__(self, master)
        self.pack()
        self.createWidgets()

root = Tk()
app = Application(master=root)
app.mainloop() 
```

# c# - 共享接口的数据绑定错误

> ID：15639414
> 
> 赞同：5
> 
> 时间：2013-03-26T14:20:33.167
> 
> 标签：c#, xaml, mvvm, mef

嘿，我想知道是否有人可以帮助我。我尝试将我导入的测试模块绑定到我的视图，请参见下面的代码：

```
<UserControl x:Class="AvanadeTT.Controls.Views.Module"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ignore="http://www.ignore.com"
    xmlns:local="clr-namespace:InterfaceLibrary;assembly=InterfaceLibrary"
    mc:Ignorable="d ignore"
    Height="600" Width="600">
     <Grid>
      <TreeView Name="ModuleTV">
        <TreeView.Resources>
            <HierarchicalDataTemplate  DataType="{x:Type local:ITestTest}"        ItemsSource="{Binding Modules}" >
                <TextBlock Text="{Binding Name}"/>
            </HierarchicalDataTemplate>
            <HierarchicalDataTemplate  DataType="{x:Type local:ITestTest}" ItemsSource="{Binding Author}" >
                <TextBlock Text="{Binding Name}"/>
            </HierarchicalDataTemplate>
        </TreeView.Resources>
    </TreeView>
        <Button Content="OK" HorizontalAlignment="Left" Margin="488,534,0,0"     VerticalAlignment="Top" Width="94" Height="31"/>
    </Grid>
</UserControl> 
```

现在我的视图模型确实得到了数据，所以这不是问题所在。编辑器给出以下堆栈跟踪和错误：

```
'Set property 'System.Windows.ResourceDictionary.DeferrableContent' threw an exception.' Line number '13' and line position '14'. 
```

fusionlog 显示了以下内容：

```
=== Pre-bind state information ===
LOG: User = -------
LOG: DisplayName = InterfaceLibrary, PublicKeyToken=f004634844582dd6
 (Partial)
WRN: Partial binding information was supplied for an assembly:
WRN: Assembly Name: InterfaceLibrary, PublicKeyToken=f004634844582dd6 | Domain ID: 1
WRN: A partial bind occurs when only part of the assembly display name is provided.
WRN: This might result in the binder loading an incorrect assembly.
WRN: It is recommended to provide a fully specified textual identity for the assembly,
WRN: that consists of the simple name, version, culture, and public key token.
WRN: See whitepaper http://go.microsoft.com/fwlink/?LinkId=109270 for more information and common solutions to this issue.
LOG: Appbase = file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/
LOG: Initial PrivatePath = NULL
Calling assembly : (Unknown).
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: C:\Users\STEPHE~1.MAC\AppData\Local\Temp\dev4FB3.tmp
LOG: Using host configuration file: 
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
LOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/InterfaceLibrary.DLL.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/InterfaceLibrary/InterfaceLibrary.DLL.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/PublicAssemblies/InterfaceLibrary.DLL.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/PublicAssemblies/InterfaceLibrary/InterfaceLibrary.DLL.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/PrivateAssemblies/InterfaceLibrary.DLL.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/PrivateAssemblies/InterfaceLibrary/InterfaceLibrary.DLL.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/CommonExtensions/Microsoft/TemplateProviders/InterfaceLibrary.DLL.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/CommonExtensions/Microsoft/TemplateProviders/InterfaceLibrary/InterfaceLibrary.DLL.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/CommonExtensions/Platform/Debugger/InterfaceLibrary.DLL.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/CommonExtensions/Platform/Debugger/InterfaceLibrary/InterfaceLibrary.DLL.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/PrivateAssemblies/DataCollectors/InterfaceLibrary.DLL.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/PrivateAssemblies/DataCollectors/InterfaceLibrary/InterfaceLibrary.DLL.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/PrivateAssemblies/DataCollectors/x86/InterfaceLibrary.DLL.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/PrivateAssemblies/DataCollectors/x86/InterfaceLibrary/InterfaceLibrary.DLL.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/InterfaceLibrary.EXE.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/InterfaceLibrary/InterfaceLibrary.EXE.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/PublicAssemblies/InterfaceLibrary.EXE.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/PublicAssemblies/InterfaceLibrary/InterfaceLibrary.EXE.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/PrivateAssemblies/InterfaceLibrary.EXE.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/PrivateAssemblies/InterfaceLibrary/InterfaceLibrary.EXE.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/CommonExtensions/Microsoft/TemplateProviders/InterfaceLibrary.EXE.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/CommonExtensions/Microsoft/TemplateProviders/InterfaceLibrary/InterfaceLibrary.EXE.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/CommonExtensions/Platform/Debugger/InterfaceLibrary.EXE.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/CommonExtensions/Platform/Debugger/InterfaceLibrary/InterfaceLibrary.EXE.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/PrivateAssemblies/DataCollectors/InterfaceLibrary.EXE.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/PrivateAssemblies/DataCollectors/InterfaceLibrary/InterfaceLibrary.EXE.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/PrivateAssemblies/DataCollectors/x86/InterfaceLibrary.EXE.
LOG: Attempting download of new URL file:///C:/Program Files (x86)/Microsoft Visual Studio 11.0/Common7/IDE/PrivateAssemblies/DataCollectors/x86/InterfaceLibrary/InterfaceLibrary.EXE. 
```

很高兴知道我的接口定义是一个共享程序集，这是因为我通过 MEF 框架导入。

我的 InterfaceLibrary 被复制到我的调试文件夹中，这也显示在那里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:08:27.420

该错误表明您的问题是第 13 行。如果您的 ItemsSource 绑定是问题，我会感到惊讶。我猜想找到 ITestTest 类型存在某种问题。我不能告诉你为什么。

# php - isset 函数不需要的结果

> ID：15639426
> 
> 赞同：1
> 
> 时间：2013-03-26T14:20:58.997
> 
> 标签：php, forms, function, isset

```
<?php
if(isset($_REQUEST['fname'],$_REQUEST['age'],$_REQUEST['lname']))
{
    $file=fopen("guns.txt","w");
    $str1=$_POST["fname"];
    $str2=$_POST["lname"];
    $age=$_POST["age"];
    $chr="pussy";
    $cat="cat";
    vfprintf($file,"%s %s is %d years old",array($str1,$str2,$age));
    echo sprintf("HEY check out %1\$s %1\$s %2\$s %2\$s",$chr,$cat);
    fclose($file);
}
else
{
    echo "<form action='hill.php' method='post'>
    Enter your First Name:<input type='text' name='fname'></input><br>
    Enter your Last Name:<input type='text' name='lname'></input><br>
    Enter your Age:<input type='text' name='age'></input><br>
    <input type='submit' value='Submit'></input>
    </form>";
}
?> 
```

给定的代码来自**hill.php**文件

我不知道出了什么问题，但我的 isset 函数无法正常工作我希望填写所有条目，然后只继续回显输入 if 语句的消息。

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:41:14.923

您错误地使用了 vprintf()。它不会**输出**到文件句柄。格式为：

```
vprintf($format_string, array($args)); 
```

RTLM：[http://php.net/vprintf](http://php.net/vprintf)

你应该有，而不是：

```
$formatted = vprintf('%this %that', array($this, $that));
$alt_format = sprintf('%this %that', $this, $that); // alternative
file_put_contents('yourfile.txt', $formatted); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:43:45.363

检查您的错误日志。运行上面的代码会导致：

```
Warning: fopen(guns.txt) [function.fopen]: failed to open stream: Permission denied in ... on line 4

Warning: vfprintf() expects parameter 1 to be resource, boolean given in ... on line 10
HEY check out pussy pussy cat cat
Warning: fclose() expects parameter 1 to be resource, boolean given in ... on line 12 
```

您的 isset 函数*工作*正常。此外，在您的问题被编辑之前，您在结尾`'`之前有一个。`?>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T14:31:30.077

改用`empty()` [(docs)](http://php.net/empty)可能会更好，它将为空字符串和 null 之类的内容返回 true。`isset()`如果数组键存在，将对某些“虚假”值返回 true。

但我们应该注意，简单地验证值的存在不应被视为适当的输入验证。您可能希望为每个字段引入更多语义验证（例如，“年龄”是一个整数吗？）

# scala - 为什么我在 Scala-IDE 中出现“类型不匹配；找到单元，预期布尔值”？

> ID：15639431
> 
> 赞同：-1
> 
> 时间：2013-03-26T14:21:06.320
> 
> 标签：scala, scala-ide

我有以下 Scala 代码（从 Java 移植而来）：

```
import scala.util.control.Breaks._

object Main {

def pascal(col: Int, row: Int): Int = {
    if(col > row) throw new Exception("Coloumn out of bound");
    else if (col == 0 || col == row) 1;
    else pascal(col - 1, row - 1) + pascal(col, row - 1);
}
def balance(chars: List[Char]): Boolean = {
  val string: String = chars.toString()
  if (string.length() == 0) true;
  else if(stringContains(")", string) == false && stringContains("(", string) == false) true;
  else if(stringContains(")", string) ^ stringContains("(", string)) false;
  else if(getFirstPosition("(", string) > getFirstPosition(")", string)) false;
  else if(getLastPosition("(", string) > getLastPosition(")", string)) false;
  else if(getCount("(", string) != getCount(")", string)) false;
  var positionOfFirstOpeningBracket = getFirstPosition("(", string);
  var openingBracketOccurences = 1; //we already know that at the first position there is an opening bracket so we are incrementing it right away with 1 and skipping the firstPosition variable in the loop
  var closingBracketOccurrences = 0;
  var positionOfClosingBracket = 0;
  breakable {
    for(i <- positionOfFirstOpeningBracket + 1 until string.length()) {

        if (string.charAt(i) == ("(".toCharArray())(0)) {
            openingBracketOccurences += 1;
        }
        else if(string.charAt(i) == (")".toCharArray())(0) ) {
            closingBracketOccurrences += 1;
        }
        if(openingBracketOccurences - closingBracketOccurrences == 0) { //this is an important part of the algorithm. if the string is balanced and at the current iteration opening=closing that means we know the bounds of our current brackets.
            positionOfClosingBracket = i; // this is the position of the closing bracket
            break;
        }  

    }
  }
  val insideBrackets: String = string.substring(positionOfFirstOpeningBracket + 1, positionOfClosingBracket)
  balance(insideBrackets.toList) && balance( string.substring(positionOfClosingBracket + 1, string.length()).toList)

  def getFirstPosition(character: String, pool: String): Int = 
    {
        for(i <- 0 until pool.length()) {
            if (pool.charAt(i) == (character.toCharArray())(0)) {
                i;
            }
        }
        -1;
    }

def getLastPosition(character: String, pool: String): Int =
{
    for(i <- pool.length() - 1 to 0 by -1) {
        if (pool.charAt(i) == (character.toCharArray())(0)) {
            i;
        }
    }
    -1;
}

//checks if a string contains a specific character
def stringContains(needle: String, pool: String): Boolean =  {
    for(i <- 0 until pool.length()) {
        if(pool.charAt(i) == (needle.toCharArray())(0)) true;
    }
    false;
}

//gets the count of occurrences of a character in a string
def getCount(character: String, pool: String) = {
    var count = 0;
    for ( i <- 0 until pool.length()) {
        if(pool.charAt(i) == (character.toCharArray())(0)) count += 1;
    }
    count;
}
}
} 
```

问题是 Scala IDE（Scaal 2.10.1 的最新版本）在第 78 行（上面有一个闭合括号）给出了以下错误：“类型不匹配；找到单元，预期布尔值”。我真的无法理解实际问题是什么。警告没有给出错误可能在哪里的任何信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T14:27:17.063

在 Scala（和大多数其他函数式语言）中，函数的结果是块中最后一个表达式的值。函数的最后一个表达式是`balance` function 的定义`getCount`，它是类型`Unit`（Scala 等效的`void`），并且您的函数被声明为返回 a `Boolean`，因此是错误。

在实践中，您刚刚搞砸了括号，如果您使用正确的缩进（在 scala-ide 中为 Ctrl+A、Ctrl+Shift+F），这将是显而易见的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T14:31:13.590

要使其编译，您可以将以下两行放在`balance`方法的末尾而不是中间：

```
val insideBrackets: String = string.substring(positionOfFirstOpeningBracket + 1, positionOfClosingBracket)
balance(insideBrackets.toList) && balance(string.substring(positionOfClosingBracket + 1, string.length()).toList) 
```

您还必须将内部函数放在`balance`我认为的顶部 - 例如`getCount`.

# actionscript-3 - AS3 如何同步事件

> ID：15639435
> 
> 赞同：0
> 
> 时间：2013-03-26T14:21:07.700
> 
> 标签：actionscript-3, sync, flash-media-server, shared-objects

我正在尝试使用 FMS 的远程共享对象 (RSO) 构建一个小型聊天应用程序。我的问题是，当 RSO 更新后，如何调度 SyncEvent？例如，我想做的是在用户进入或离开聊天室时更新所有连接的客户端。我一直在寻找这方面的文档，但无济于事。如果你能给我一个小例子如何做到这一点，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T04:41:38.760

您不必`SyncEvent`手动分派，因为它是由共享对象本身在您向其添加属性或更新现有属性的值时自动完成的。

请注意，如果您将共享对象的属性设置为与之前相同的值，则不会调度任何事件。

[您可以在此处](https://stackoverflow.com/a/15676823/1392790)找到使用示例。

# java - 不兼容的类型（泛型）

> ID：15639438
> 
> 赞同：0
> 
> 时间：2013-03-26T14:21:23.013
> 
> 标签：java, maven, compilation, java-6

我越来越

```
incompatible types; inferred type argument(s) java.lang.Object do not conform to bounds of type variable(s) T
[ERROR] found   : <T>int
[ERROR] required: int
[ERROR] -> [Help 1] 
```

对于我的方法

```
private <T extends Comparable<T>> int useComparator(final Object o1, final Object o2, final String property) {
    final T s1 = new PropertyModel<T>(o1, property).getObject();
    final T s2 = new PropertyModel<T>(o2, property).getObject();
    return s1.compareTo(s2);
} 
```

在哪里`PropertyModel`，`org.apache.wicket.model.PropertyModel`但实际上这并不重要（这个类只是返回某个字段的值，顺便说一句：例如，在 Spring 中是否有一些具有类似功能的类？）。

问题在于调用该方法：

```
return this.useComparator(o1, o2, sortProperty); 
```

我可以解决这个问题

```
return this.<Comparable> useComparator(o1, o2, sortProperty); 
```

但我想知道..在 Eclipse 和 NetBeans 中编译此类代码时我没有问题。据我所见，我使用的是相同的 java，但在 Maven 中，我从帖子的开头得到了错误。我错过了一些编译器标志吗？

不确定这是否有帮助，但我的 Maven 版本是：

```
> mvn -version
Apache Maven 3.0.4 (r1232337; 2012-01-17 09:44:56+0100)
Maven home: c:\Programs\apache-maven-3.0.4
Java version: 1.6.0_37, vendor: Sun Microsystems Inc.
Java home: c:\Java\jdk1.6.0_37\jre
Default locale: sk_SK, platform encoding: Cp1250
OS name: "windows 7", version: "6.1", arch: "amd64", family: "windows" 
```

Maven 编译器插件设置来自`pom.xml`：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <version>2.5.1</version>
    <inherited>true</inherited>
    <artifactId>maven-compiler-plugin</artifactId>
    <configuration>
        <source>1.6</source>
        <target>1.6</target>
        <encoding>UTF-8</encoding>
    </configuration>
</plugin> 
```

**编辑：**添加了请求的代码

创建 wicket 项目（仅用于依赖项）。我使用[Wicket Quickstart 页面](http://wicket.apache.org/start/quickstart.html)生成 maven 项目。我用了：

> mvn archetype:generate -DarchetypeGroupId=org.apache.wicket -DarchetypeArtifactId=wicket-archetype-quickstart -DarchetypeVersion=6.6.0 -DgroupId=net.betlista -DartifactId=stackoverflow -DarchetypeRepository= [https://repository.apache.org/](https://repository.apache.org/) - DinteractiveMode=false

将项目导入您喜欢的 IDE。

使用此 JUnit 测试来模拟问题：

```
package net.betlista;

import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;

import junit.framework.Assert;

import org.apache.wicket.extensions.markup.html.repeater.util.SortParam;
import org.apache.wicket.model.PropertyModel;
import org.junit.Test;

public class ComparatorTest {

    @Test
    public void test() {
        final ArrayList<Person> persons = new ArrayList<Person>();

        final Person alice = new Person("Alice", 30);
        persons.add(alice);
        final Person bob = new Person("Bob", 20);
        persons.add(bob);

        Collections.sort(persons, new PropertyComparator(new SortParam<String>("name", true)));
        Assert.assertEquals(alice, persons.get(0));
        Assert.assertEquals(bob, persons.get(1));

        Collections.sort(persons, new PropertyComparator(new SortParam<String>("name", false)));
        Assert.assertEquals(alice, persons.get(1));
        Assert.assertEquals(bob, persons.get(0));

        Collections.sort(persons, new PropertyComparator(new SortParam<String>("age", true)));
        Assert.assertEquals(alice, persons.get(1));
        Assert.assertEquals(bob, persons.get(0));

        Collections.sort(persons, new PropertyComparator(new SortParam<String>("age", false)));
        Assert.assertEquals(alice, persons.get(0));
        Assert.assertEquals(bob, persons.get(1));
    }

    static class Person {
        String name;
        Integer age;

        public Person(final String name, final Integer age) {
            this.name = name;
            this.age = age;
        }
    }

    private static class PropertyComparator implements Comparator<Object> {

        private SortParam<String> sort;

        public PropertyComparator(final SortParam<String> sort) {
            this.sort = sort;
        }

        @Override
        public int compare(final Object o1, final Object o2) {
            final int dir = sort.isAscending() ? 1 : -1;

            final String sortProperty = sort.getProperty();
            return dir * this.useComparator(o1, o2, sortProperty);
        }

        private <T extends Comparable<T>> int useComparator(final Object o1, final Object o2, final String property) {
            final T p1 = new PropertyModel<T>(o1, property).getObject();
            final T p2 = new PropertyModel<T>(o2, property).getObject();
            return p1.compareTo(p2);
        }

    }

} 
```

在我的环境中，这在 Eclipse 中运行良好，但在尝试使用编译时失败

```
mvn clean install 
```

当我试图搬出`useComparator`并`PropertyComparator`使其静止时没有帮助......

# php - 加密PHP，解密Java

> ID：15639442
> 
> 赞同：9
> 
> 时间：2013-03-26T14:21:32.903
> 
> 标签：php, rsa, bouncycastle, public-key-encryption, phpseclib

我有一个 php 中的 web 服务，它生成一个密钥对来加密消息，还有一个 java 中的应用程序可以检索私钥并解密消息。

对于 php，我使用[http://phpseclib.sourceforge.net/](http://phpseclib.sourceforge.net/)并拥有这两个文件：

密钥对.php

```
<?php

set_time_limit(0);
if( file_exists('private.key') )
{
    echo file_get_contents('private.key');
}
else
{
    include('Crypt/RSA.php');
    $rsa = new Crypt_RSA();
    $rsa->createKey();
    $res = $rsa->createKey();

    $privateKey = $res['privatekey'];
    $publicKey  = $res['publickey'];

    file_put_contents('public.key', $publicKey);
    file_put_contents('private.key', $privateKey);
}

?> 
```

加密.php

```
<?php

include('Crypt/RSA.php');

//header("Content-type: text/plain");

set_time_limit(0);
$rsa = new Crypt_RSA();
$rsa->setEncryptionMode(CRYPT_RSA_ENCRYPTION_OAEP);
$rsa->loadKey(file_get_contents('public.key')); // public key

$plaintext = 'Hello World!';
$ciphertext = $rsa->encrypt($plaintext);

echo base64_encode($ciphertext);

?> 
```

在java中我有这个代码：

```
package com.example.app;

import java.io.DataInputStream;
import java.net.URL;
import java.security.Security;

import javax.crypto.Cipher;
import javax.crypto.spec.SecretKeySpec;

import sun.misc.BASE64Decoder;

public class MainClass {

    /**
     * @param args
     */
    public static void main(String[] args)
    {
        Security.addProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider());

        try {
            BASE64Decoder decoder   = new BASE64Decoder();
            String b64PrivateKey    = getContents("http://localhost/api/keypair.php").trim();
            String b64EncryptedStr  = getContents("http://localhost/api/encrypt.php").trim();

            System.out.println("PrivateKey (b64): " + b64PrivateKey);
            System.out.println(" Encrypted (b64): " + b64EncryptedStr);

            SecretKeySpec privateKey    = new SecretKeySpec( decoder.decodeBuffer(b64PrivateKey) , "AES");
            Cipher cipher               = Cipher.getInstance("RSA/None/OAEPWithSHA1AndMGF1Padding", "BC");
            cipher.init(Cipher.DECRYPT_MODE, privateKey);

            byte[] plainText            = decoder.decodeBuffer(b64EncryptedStr);

            System.out.println("         Message: " + plainText);
        }
        catch( Exception e )
        {
            System.out.println("           Error: " + e.getMessage());
        }

    }

    public static String getContents(String url)
    {
        try {
            String result = "";
            String line;
            URL u = new URL(url);
            DataInputStream theHTML = new DataInputStream(u.openStream());
            while ((line = theHTML.readLine()) != null)
                result = result + "\n" + line;

            return result;
        }
        catch(Exception e){}

        return "";
    }
} 
```

我的问题是：

1.  为什么我有一个例外说“不是 RSA 密钥！”？
2.  如何改进此代码？我使用 base64 来避免 Java 和 PHP 之间的编码和通信错误。
3.  这个概念正确吗？我的意思是，我使用正确吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T13:34:14.077

在上述答案的帮助下，我发现 SecretKeySpec 使用错误，并且我发现 OpenSSL 中的 PEM 文件不是“标准格式”，因此我需要使用 PEMReader 将其转换为 PrivateKey 类。

这是我的工人阶级：

```
package com.example.app;

import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.StringReader;
import java.net.URL;
import java.security.KeyPair;
import java.security.PrivateKey;
import java.security.Security;

import javax.crypto.Cipher;

import org.bouncycastle.openssl.PEMReader;

import sun.misc.BASE64Decoder;

public class MainClass {

    /**
     * @param args
     */
    public static void main(String[] args)
    {
        Security.addProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider());

        try {
            BASE64Decoder decoder   = new BASE64Decoder();
            String b64PrivateKey    = getContents("http://localhost/api/keypair.php").trim();
            String b64EncryptedStr  = getContents("http://localhost/api/encrypt.php").trim();

            System.out.println("PrivateKey (b64): " + b64PrivateKey);
            System.out.println(" Encrypted (b64): " + b64EncryptedStr);

            byte[] decodedKey           = decoder.decodeBuffer(b64PrivateKey);
            byte[] decodedStr           = decoder.decodeBuffer(b64EncryptedStr);
            PrivateKey privateKey       = strToPrivateKey(new String(decodedKey));

            Cipher cipher               = Cipher.getInstance("RSA/None/OAEPWithSHA1AndMGF1Padding", "BC");
            cipher.init(Cipher.DECRYPT_MODE, privateKey);

            byte[] plainText            = cipher.doFinal(decodedStr);

            System.out.println("         Message: " + new String(plainText));
        }
        catch( Exception e )
        {
            System.out.println("           Error: " + e.getMessage());
        }

    }

    public static String getContents(String url)
    {
        try {
            String result = "";
            String line;
            URL u = new URL(url);
            DataInputStream theHTML = new DataInputStream(u.openStream());
            while ((line = theHTML.readLine()) != null)
                result = result + "\n" + line;

            return result;
        }
        catch(Exception e){}

        return "";
    }

    public static PrivateKey strToPrivateKey(String s)
    {
        try {
            BufferedReader br   = new BufferedReader( new StringReader(s) );
            PEMReader pr        = new PEMReader(br);
            KeyPair kp          = (KeyPair)pr.readObject();
            pr.close();
            return kp.getPrivate();
        }
        catch( Exception e )
        {

        }

        return null;
    }
} 
```

这是我的keypair.php

```
<?php

set_time_limit(0);
if( file_exists('private.key') )
{
    echo base64_encode(file_get_contents('private.key'));
}
else
{
    include('Crypt/RSA.php');

    $rsa = new Crypt_RSA();
    $rsa->setHash('sha1');
    $rsa->setMGFHash('sha1');
    $rsa->setEncryptionMode(CRYPT_RSA_ENCRYPTION_OAEP);
    $rsa->setPrivateKeyFormat(CRYPT_RSA_PRIVATE_FORMAT_PKCS1);
    $rsa->setPublicKeyFormat(CRYPT_RSA_PUBLIC_FORMAT_PKCS1);

    $res = $rsa->createKey(1024);

    $privateKey = $res['privatekey'];
    $publicKey  = $res['publickey'];

    file_put_contents('public.key', $publicKey);
    file_put_contents('private.key', $privateKey);

    echo base64_encode($privateKey);
}

?> 
```

和我的 encrypt.php

```
<?php
    include('Crypt/RSA.php');
    set_time_limit(0);

    $rsa = new Crypt_RSA();
    $rsa->setHash('sha1');
    $rsa->setMGFHash('sha1');
    $rsa->setEncryptionMode(CRYPT_RSA_ENCRYPTION_OAEP);

    $rsa->loadKey(file_get_contents('public.key')); // public key

    $plaintext  = 'Hello World!';
    $ciphertext = $rsa->encrypt($plaintext);
    $md5        = md5($ciphertext);
    file_put_contents('md5.txt', $md5);
    file_put_contents('encrypted.txt', base64_encode($ciphertext));

    echo base64_encode($ciphertext);

?> 
```

我希望它对任何人都有帮助，谢谢。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T17:38:16.613

一些想法。

1.  你不应该在 else 中回显 $privatekey 吗？

2.  你使用的是最新的 Git 版本的 phpseclib 吗？我问是因为前一段时间有这个提交：

    [https://github.com/phpseclib/phpseclib/commit/e4ccaef7bf74833891386232946d2168a9e2fce2#phpseclib/Crypt/RSA.php](https://github.com/phpseclib/phpseclib/commit/e4ccaef7bf74833891386232946d2168a9e2fce2#phpseclib/Crypt/RSA.php)

    提交的灵感来自[https://stackoverflow.com/a/13908986/569976](https://stackoverflow.com/a/13908986/569976)

3.  如果您稍微更改一下标签以包括 bouncycastle 和 phpseclib，这可能是值得的。我会添加这些标签，但必须删除一些标签，因为你已经达到了 5 个的限制。我会让你决定要删除哪些标签（如果你甚至想这样做的话）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T05:03:18.230

```
SecretKeySpec privateKey    = new SecretKeySpec( decoder.decodeBuffer(b64PrivateKey) , "AES"); 
```

b64PrivateKey 应该包含私钥对吗？因为在文档中查找它看起来 SecretKeySpec 仅适用于对称算法（如 AES） - 而不是像 RSA 这样的非对称算法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T17:58:03.073

我对您正在使用的类进行了一些研究，您发布的内容似乎具有与您的显式参数匹配的大多数默认参数。但是，如果您使用的是较旧的实现，这并不能确保您的配置已全部设置为与当前文档相匹配。

此外，一位 Facebook 高级安全工程师最近在一次讲座中讨论了类似问题的提示；实现相同安全协议的不同库通常不兼容，甚至不同环境或语言中的相同库也经常无法协同工作。考虑到这一点，考虑到与您的设置类似的工作示例在线存在，可以尝试一些事情：

确保您使用的是最新版本的库。另请注意，不推荐使用某些 javax 函数和类，并建议现在使用 java.security （没有检查这是否适用于您的情况）。

强制密钥大小保持一致（1024 或 2048）。java实现可以做任何一个，我没有找到两个库的一致文档说明您的配置默认值将被使用（可能导致问题＃2，尽管您可能会因无效密钥大小而得到不同的异常）。

确保您的私钥符合预期（java 和 php 之间的长度/读取相同）。

强制显式定义默认值（将 CryptRSA 哈希设置为 sha1、密钥长度、您可以显式设置的任何其他值）。

尝试使用 java 和 php 加密相同的消息，看看是否可以获得相同的输出。在确保您的密钥读取相同并且在两个应用程序中使用时不要抛出异常之后执行此操作。加密单个字符可以告诉您是否实际使用了相同的填充方案（从源代码中可以看出两者都使用 MGF1，但检查输出永远不会受到伤害）。

最后尝试举一个 php 到 java 加密的例子，据说它已经工作并且一次做一个改变，直到你回到你当前的加密方案。我看到一些快速搜索的示例，它们使用不同的参数和设置与 CryptRSA 和 java 安全性，表明它们正在协同工作。举一个工作示例，尝试交换散列函数，然后交换加密等。

# css - 几个 CSS3 关键帧在 Firefox 19 中不起作用/位置错误

> ID：15639443
> 
> 赞同：0
> 
> 时间：2013-03-26T14:21:35.217
> 
> 标签：css, firefox, css-animations

我在使用 Firefox 和 CSS3 关键帧时遇到了一些问题。使用 Chrome 和 Safari 没有问题。似乎FF忽略了CSS命令'top'，但我不知道为什么。我将位置更改为相对位置，但没有成功。

编码：

```
.tile {
     position:absolute;
     z-index:10;
     background-color:#e20074;
     width:5px;
     height:5px;
 }     

#tile1 {
 animation:tile1 6s linear infinite;
 /* older Firefox: */
 -moz-animation:tile1 6s linear infinite;
 /* Safari and Chrome: */
 -webkit-animation:tile1 6s linear infinite;
 /* Opera: */
 -o-animation:tile1 6s linear infinite; 
}

@keyframes tile1 {
 0%      { left:10px; visibility:visible;}
 10%     { left:20px; top:10px; }
 20%     { left:30px; top:15px; }
 30%     { left:40px; top:10px; }
 40%     { left:50px; top:0px; }
 50%     { left:60px; top:10px; }
 60%     { left:70px; top:15px; }
 70%     { left:80px; top:10px; }
 80%     { left:90px; top:0px; }
 90%     { left:100px; top:10px; }
 100%    { left:115px; top:15px; }
} 
```

我制作了一个几乎相同的小文本框，并且可以正常工作。我无法弄清楚上面的代码有什么问题。

```
#testbox {
    position:relative;
    background-color:Blue;
    width:100px;
    height:100px;
    animation: test 5s linear infinite;
}

@keyframes test {
    0% { left:100px; top:100px; }
    100% { left:10px; top:10px; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:54:55.647

它正在寻找`top`开始的位置。

您可能想在[此处查找示例](http://jsfiddle.net/agriboz/Hq4qk/1/)

# windows-7 - 如何让 HTML5 视频使用 IE10 工作

> ID：15639444
> 
> 赞同：12
> 
> 时间：2013-03-26T14:21:36.667
> 
> 标签：windows-7, iis-7, html5-video, windows-server-2008-r2, internet-explorer-10

我希望有人知道我可以做些什么来帮助我在本地 Intranet 上播放 HTML5 视频。

我的 Web 服务器 = Windows Server 2008 R2 标准 64 位 IIS 版本 = IIS7

测试用户环境 = Windows 7 Enterprise

使用“谷歌浏览器”完美播放视频

使用“IE10”播放视频失败

我的html代码如下：

```
<!DOCTYPE html>
<html>
    <body>
        <video src="AccReadings.mp4" width="400" height="300" preload controls>
        </video>
    </body>
</html> 
```

我使用 IE10 的测试机可以播放 HTML5Rocks 视频“ [http://craftymind.com/factory/html5video/CanvasVideo.html](http://craftymind.com/factory/html5video/CanvasVideo.html) ”

问候，

克里斯

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-07-15T01:22:23.747

确保将 Web 服务器设置为使用`video/mp4`.mp4 的 MIME 类型。我不小心将 .mp4 设置为使用 MIME 类型`video/mpeg`，视频在 Chrome 中播放，但在 IE11 中没有。

您还需要确保视频使用 H264 视频编解码器和 AAC 音频编解码器

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-28T20:03:14.863

我只是遇到了类似的问题，我自己的网站 HTML5 根本不起作用。没有错误信息只是空白。

原因是 Windows7 N（欧盟 - 没有媒体播放器）。

安装**Windows Media Player**后，此问题（以及其他问题）已修复。我希望它有帮助:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-12T18:41:53.587

由于某种原因，它看起来不像在 Win7 + IE10 中工作。其他一切看起来都不错。针对以下页面进行了测试，其中包括 ie.microsoft.com 测试。

[http://ie.microsoft.com/testdrive/graphics/videoformatsupport/default.html](http://ie.microsoft.com/testdrive/graphics/videoformatsupport/default.html) [http://www.w3.org/2010/05/video/mediaevents.html](http://www.w3.org/2010/05/video/mediaevents.html)

Win7 IE9 - 好的

Win7 IE10 – 不

Win8 IE10 – 好的

Win7 IE11 - 好的

Win8 IE11 - 好的

MS 测试页面的 BrowserStack 屏幕截图。 [http://www.browserstack.com/screenshots/9083c865675d0821ee8b1030a43da5fd36bff469](http://www.browserstack.com/screenshots/9083c865675d0821ee8b1030a43da5fd36bff469)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-28T22:36:48.090

[可能您遇到了无法播放 IE10 HTML5 视频和现代 UI 应用程序视频](https://superuser.com/questions/616658/cannot-play-neither-ie10-html5-video-nor-modern-ui-apps-video/625292#625292)中提到的显卡驱动程序问题。

在 IE 中禁用 GPU 渲染为：

Internet 选项 > 高级 > 加速图形 > 使用软件渲染而不是 GPU 渲染

看看它是否有效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-26T14:38:10.580

我没有安装 IE10，但是，根据[caniuseit](http://caniuse.com/)，[IE9 和 10 支持 mp4](http://caniuse.com/#search=mp4)。

以下 html 在 IE9 和 Chrome 中适用于我，请注意您的视频文件必须与服务器上的 html 页面位于同一文件夹中（在此示例中）。

```
<!DOCTYPE html>
<html>
    <body>
        <video src="abc.mp4" width="640" height="480" preload controls></video>
    </body>
</html> 
```

**编辑：**我已经安装了 IE10 并且可以在那里确认上述工作。

**编辑：**由于 Firefox 不支持 mp4，并且较旧的浏览器根本不支持原生视频，因此最好提供多种来源（格式），然后回退，通常使用 Flash 播放器。

```
<!DOCTYPE html>
<html>
    <body>
        <video width="640" height="480" preload controls>
            <!-- mp4 supported by Chrome & IE9/10 -->
            <source src="abc.mp4" type="video/mp4"></source>
            <!-- webm supported by Firefox -->
            <source src="abc.webm" type="video/webm"></source>

            <!-- last element in video is fall back for native video support, usually a flash player -->
            <object type="application/x-shockwave-flash ...>
                <!-- last element flash player is usual fall back for flash support, usually some "not supported text" -->
                <div>
                Your browser does not natively support flash and you do not have flast installed.
            </div>
            </object>
        </video>
    </body>
</html> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-06T11:50:17.517

我在 IE10 播放 html5 视频时遇到了很多问题。我检查的最后一件事是正确的 oe：视频是 gzip 压缩的。检查你的服务器配置！！！

**编辑：** 要知道您的视频是否被服务器压缩，请使用像[Charles](http://www.charlesproxy.com/)这样的网络代理嗅探器，甚至 IE 的调试器并检查视频文件请求的响应标头。如果你找到`Content-Encoding:gzip`了，那么你应该检查你的服务器配置。就我而言，我必须在我的 .htaccess 文件中禁用视频文件的 gzip 压缩。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-22T16:25:17.113

我遇到了完全相同的问题。我最初的视频分辨率是 1920x1200。似乎IE10有问题。使用较低分辨率视频的第一次测试解决了这个问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-04T01:05:18.587

这是我用于 html5 视频的代码：

```
<div>
<video id="example_video_1" class="video-js vjs-default-skin"
controls preload="none" width="auto" height="auto"
poster="path/to/image.png"
data-setup='{"example_option":true, "autoplay": true}'>
    <source src="path/to/video.ogv" type='video/ogg' />
    <source src="path/to/video.webm" type='video/webm' />
    <source src="path/to/video.mp4" type='video/mp4' />
    <!-- Flash Fallback. Use any flash video player here. Make sure to keep the vjs-flash-fallback class. -->
    <object class="vjs-flash-fallback" width="640" height="360" type="application/x-shockwave-flash" data="http://releases.flowplayer.org/swf/flowplayer-3.2.1.swf">
        <param name="movie" value="http://releases.flowplayer.org/swf/flowplayer-3.2.1.swf" />
        <param name="allowfullscreen" value="true" />
        <param name="flashvars" value='config={"playlist":["path/to/image.png", {"url": "path/to/video.flv","autoPlay":false,"autoBuffering":true}]}' />
        <!-- Image Fallback. Typically the same as the poster image. -->
        <img src="path/to/image.png" width="640" height="264" alt="Poster Image" title="No video playback capabilities." />
    </object>
</video> 
```

这应该适用于所有设备/浏览器。我已经按特定顺序调用了wideos，以允许现代浏览器更快地加载它们（chrome可以播放ogg/webm/mp4-从测试我的视频ogg/webm似乎加载得更快它们mp4，所以它会减少缓冲时间）

# django - 使用信号或覆盖模型保存方法？

> ID：15639449
> 
> 赞同：0
> 
> 时间：2013-03-26T14:21:43.107
> 
> 标签：django, django-signals

简单用例：用户更新记录后，我想获取更改的字段并将它们保存在历史表中。我正在使用[django-ditryfields](https://github.com/smn/django-dirtyfields)来获取这段历史。所以我的想法是使用 pre_save 信号来获取所有“脏”字段并将它们存储在我的历史记录表中。

问题是我在使用信号时无法获取 request.user 。我需要这个来查看哪个用户对记录进行了更改。我的另一个想法只是覆盖我的模型的保存方法，但我也无法直接从模型中获取 request.user 。我必须从视图中发送带有用户信息的 **kwarg['user'] 才能获取此信息。这很好，但我将从代码周围的许多不同位置进行保存调用。我不想每次编辑对象时都必须传递 request.user 。这就是为什么我希望有一个位置，比如一个信号，来处理所有这些。也许一些我不熟悉的中间件？

有没有更好的方法来实现这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:25:24.343

您不能从信号访问用户对象。您可以考虑使用这个第三方包：[django-requestprovider](https://pypi.python.org/pypi/django-contrib-requestprovider)来访问信号中的请求对象。

另一种方法是覆盖模型的保存方法。

# silverlight - 在 Silverlight 中解压缩一个 zip 文件

> ID：15639458
> 
> 赞同：0
> 
> 时间：2013-03-26T14:22:10.950
> 
> 标签：silverlight, zip, silverlight-5.0

我正在尝试开发代码以从 Silverlight 5 中的 zip 文件中解压缩文件。这些文件位于 zip 文件中的目录中。

因为我们是一家 VB 商店，所以我将我在其他地方找到的这段代码从 c# 翻译成 VB。它在第四行“对象引用未设置为对象的实例。”失败。我现在意识到问题是第三行需要一个相对 uri，我正在向它传递一个文件，但我不知道如何解决这个问题。

你能告诉我这段代码有什么问题吗？我也欢迎其他想法。

谢谢。

```
Public Shared Function GetZipContents(ByVal filename As String) As String()

        Try

            Dim zipStream As System.IO.Stream = New System.IO.MemoryStream()
            Dim zipInfo As New StreamResourceInfo(zipStream, Nothing)
            Dim streamInfo As StreamResourceInfo = Application.GetResourceStream(zipInfo, New Uri(filename, UriKind.Relative))
            Dim fileStream As Stream = streamInfo.Stream

        Dim names As New List(Of String)()
        Dim reader As New BinaryReader(fileStream)
        Do While reader.ReadUInt32() = &H4034B50

            ' Skip the portions of the header we don't care about
            reader.BaseStream.Seek(14, SeekOrigin.Current)
            Dim compressedSize As UInteger = reader.ReadUInt32()
            Dim uncompressedSize As UInteger = reader.ReadUInt32()
            Dim nameLength As Integer = reader.ReadUInt16()
            Dim extraLength As Integer = reader.ReadUInt16()
            Dim nameBytes() As Byte = reader.ReadBytes(nameLength)
            names.Add(Encoding.UTF8.GetString(nameBytes, 0, nameLength))
            reader.BaseStream.Seek(extraLength + compressedSize, SeekOrigin.Current)

        Loop
        ' Move the stream back to the begining
        fileStream.Seek(0, SeekOrigin.Begin)
        Return names.ToArray()
        Catch ex As Exception
            MessageBox.Show(ex.Message)
            Return Nothing
        End Try
    End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:30:36.913

抱歉，我将有时间探索这些建议。我确实找到了自己实现目标的方法。请参阅下面的代码。我将使用此代码，因为这里的技术负责人更喜欢我使用 WCF 服务以不同的方式执行此操作。警告我无法 100% 测试此代码，因为我不打算使用它，但它接近正确。

导入 ICSharpCode.SharpZipLib.Zip

```
Public Shared Sub UnZip(ByVal SrcFile As String, ByVal DstFile As String, ByVal BufferSize As Integer)

    Try
        Dim _FileName As String
        Dim _ZipEntry As ZipEntry
        Dim _FileStreamOut As FileStream = Nothing
        Dim _Done As Boolean = False

        Dim _FileStreamIn As New FileStream(SrcFile, FileMode.Open, FileAccess.Read)
        Dim _ZipInStream As New ZipInputStream(_FileStreamIn)

        Do Until _Done = True
            _ZipEntry = _ZipInStream.GetNextEntry()
            If IsNothing(_ZipEntry) Then
                _Done = True
                Exit Do
            End If
            _FileName = DstFile & "\" & _ZipEntry.Name
            _FileName = _FileName.Replace("/", "\")

            If Right(_FileName, 1) = "\" Then
                If Directory.Exists(_FileName) = False Then
                    Directory.CreateDirectory(_FileName)
                End If
            Else
                _FileStreamOut = New FileStream(_FileName, FileMode.Create, FileAccess.Write)

                Dim size As Integer
                Dim buffer(BufferSize - 1) As Byte
                Do
                    size = _ZipInStream.Read(buffer, 0, buffer.Length)
                    _FileStreamOut.Write(buffer, 0, size)
                Loop While size > 0
            End If
        Loop

        _ZipInStream.Close()
        _FileStreamOut.Close()
        _FileStreamIn.Close()
    Catch ex As Exception
        MessageBox.Show(ex.Message)

    End Try

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:38:35.987

查看我的博文：http: [//www.sharpgis.net/post/2010/08/25/REALLY-small-unzip-utility-for-Silverlight-e28093-Part-2.aspx](http://www.sharpgis.net/post/2010/08/25/REALLY-small-unzip-utility-for-Silverlight-e28093-Part-2.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T14:25:36.643

在 Silverlight 中有一种快速而肮脏的解压缩方式。使用 Application.GetResourceStream 方法。 [http://msdn.microsoft.com/en-us/library/cc190632(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/cc190632(v=vs.95).aspx)

# php - 我收到“404 - 找不到文件或目录”有什么解决办法吗？

> ID：15639462
> 
> 赞同：1
> 
> 时间：2013-03-26T14:22:18.957
> 
> 标签：php, javascript

我正在尝试使用下面的此 JavaScript 来尝试在调用时打开文件。

```
function openFile() {
    document.getElementById("advanceSearchFrame").src = location.pathname.replace(/\/[^/]+$/, "") + "/Profiles/Options.php";
    dijit.byId("advanceSearchDialog").show();

} 
```

此 JS 在名为 Scripts 的文件夹中。

此脚本文件夹位于名为 Profiles 的文件夹中。

我试图打开的名为 Options.php 的文件也在 Profiles 文件夹中。

当我单击选项文件夹时，我得到“404 - 找不到文件或目录”

我需要更改什么来修复上面的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:03:00.633

我已经弄清楚了问题所在。我原来的语法一直都是正确的。问题是它不喜欢 Options 以大写 O 开头的事实，或者它根本不喜欢这个名字。一旦我将名称更改为 opts.php，它就起作用了

# python - webapp2 和 python3

> ID：15639475
> 
> 赞同：12
> 
> 时间：2013-03-26T14:22:42.757
> 
> 标签：python, python-3.x, compatibility, webapp2

我将 webapp2 与带有或不带有 googleAppEngine 的 python 2.7 一起使用。我现在正在尝试将它与 Python 3.3 一起使用

我使用 PIP 安装 webapp2 安装运行成功，但是当我尝试从 IDLE 导入 webapp2 时出现以下错误：

```
File "<pyshell#0>", line 1, in <module>
    import webapp2
    File "C:\Python3\lib\webapp2.py", line 571
    except Exception, e:
                    ^ 
```

我怀疑这是必须更新才能与 Python3 一起使用的东西......？有人已经这样做了，还是我应该等待 webapp2 的更新版本？有没有我们可以访问的 Python 3 的 beta 版本

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T14:26:25.117

确实，`webapp2`与Python 3*不兼容。*

该项目的问题跟踪器中有一个[关于 Python 3](https://code.google.com/p/webapp-improved/issues/detail?id=40)的问题，但该问题中几乎*没有*内容。似乎还没有对港口做出任何努力。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-09-28T17:26:13.890

似乎 webapp2 现在与 version 中的 Python3 兼容`webapp2>=3.0.0b1`。这仍然是一个“开发”版本 - 您必须指定您希望此版本安装为：

`pip install webapp2>=3.0.0b1`

希望它可以帮助像我一样遇到这个（旧）问题的人。

# css - 按钮 CSS 显示不正确

> ID：15639478
> 
> 赞同：-2
> 
> 时间：2013-03-26T14:23:01.087
> 
> 标签：css, button

我正在尝试在此页面上获取“添加到购物车”和“结帐”按钮的样式：http: [//liff2013.com/product-passes/voodoo-package.html](http://liff2013.com/product-passes/voodoo-package.html)与此页面上的完全相同： http: [//liff2013.com/workshops](http://liff2013.com/workshops)。

未点击，按钮基本相同，但是当您点击（并按住）按钮时，样式会发生变化。任何想法为什么以及如何解决它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:34:22.730

熟悉[FireBug](http://getfirebug.com/)或[Chrome 开发工具](https://developers.google.com/chrome-developer-tools/docs/overview)。这将使检查实际应用的样式变得容易。

这里的问题是您在一个实例中设置了内部`span`元素而不是按钮本身的样式，因此当`:active`应用伪类时，您会看到插入边框。如果您希望这两个按钮看起来相同，最好的选择是定义一个单一的、可重用的 CSS 类并将其应用到两者，使用相同的 HTML 标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:29:50.473

看起来不错的按钮：

```
<button onclick="setLocation('http://liff2013.com//checkout/cart/add?product=13&amp;qty=1')" class="addToCart">Add To Cart</button> 
```

看起来不太好的按钮：

```
<button type="button" title="Add to Cart" class="button btn-cart" onclick="productAddToCartForm.submit(this)">
    <span>
        <span>Add to Cart</span>
    </span>
</button> 
```

我想你应该检查一下没有`span`或没有公共类的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T14:34:33.293

您必须像这样添加相同的类：

好看的按钮代码：

```
<button onclick="setLocation('BLAH')" class="addToCart">
    Add To Cart
</button> 
```

看起来不好的按钮代码：

```
<button type="button" title="Add to Cart" class="button btn-cart" onclick="productAddToCartForm.submit(this)">
<span><span>Add to Cart</span></span>
</button> 
```

修复：

```
<button type="button" title="Add to Cart" class="addToCart " onclick="BLAH">
    Add to Cart
</button> 
```

看到不同？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T14:37:50.617

出现边框问题是因为您定义了一个 CSS 属性

```
button.button {
    border: 2px outset buttonface !important;
} 
```

单击按钮（*:active*）时，它会覆盖默认的插入边框。

其他人已经解决了字体问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T14:31:32.043

比较您从中获得的`.addToCart`样式`.button`，`.btn-cart`和`button`

# c++ - 递归函数？[初学者]

> ID：15639486
> 
> 赞同：0
> 
> 时间：2013-03-26T14:23:16.580
> 
> 标签：c++, function, recursion, global

我不懂递归函数。

我写了这段代码来帮助我，但我不明白为什么它会这样工作。

它向后打印从 0 到数字 n/2 i 输入的步骤，但不知道是什么使它打印了它从低到高跳过的每一步，因为它是递归的。我很近，但还没有……

```
#include <iostream>
#include <conio.h>
using namespace std;

int recursiv(int );

int times;

int main(){    
    int x;    
    cout<<"Imput number\n";
    cin>>x;    
    recursiv(x);

    getch();
  return 0;
}
int recursiv(int x){

    times++;
    if(x)
    recursiv(x/2);
    cout<<"We are now at "<<x/2<<endl;
    if (!x)
    cout<< "We reached "<<x<<" but it took "<<times-1<< " steps\n";
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T14:54:24.050

当你处理递归时，你必须了解函数代码的两个主要部分：一个在前进的路上执行，一个在返回的路上执行：

```
void X() {
    // way forward
    X();
    // way back
} 
```

*前进*的部分在一遍又一遍地调用函数的同时执行，直到递归结束；返回的*方式*是在从最后一次调用返回到第一次调用时执行的。

```
void print(int x) {
    if (!x) return; // end of recursion
    std::cout << x << " ";
    print(x-1);
} 
```

上面的示例包含`std::cout << x`在*前进的路上，*这意味着调用`print(5)`将打印：`5 4 3 2 1`。

```
void print(int x) {
    if (!x) return; // end of recursion
    print(x-1);
    std::cout << x << " ";
} 
```

上面的例子将实际打印移到函数的*后面*部分，这意味着相同的调用`print(5)`将打印：`1 2 3 4 5`。

让我们来看看你的功能（稍微清理一下）：

```
int recursiv(int x){
    times++;
    if(!x) return 0; // split
    recursiv(x/2);
    cout << "We are now at "<< x / 2 << endl;
    return 0;
} 
```

我们可以很容易地区分我们的两个部分。*前进*的道路是：

```
times++;
if(x) return; 
```

其中我们只是增加了我们的 int 参数`times`（我们在这里忽略了递归结束的条件）。

*回来*的路是：

```
cout<<"We are now at "<<x/2<<endl;
return 0; 
```

这将从最后一次调用到第一次调用（就像示例的第二个版本一样）执行。`0`因此，就像我们的示例一样，从递归结束前最后一次调用的最小数字（由于递归结束条件而更接近的数字）取到第一个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T14:30:40.667

如果我正确理解您的问题：

*它应该从高到低打印，但它实际上是从低到高打印。这是为什么？*

该行在`cout<<"We are now at "<<x/2<<endl;`递归调用之后。因此该函数一次又一次地以较小的数量调用自身，直到达到中断标准。具有最小数量的函数调用`std::cout`，返回第二小的数量执行`std::cout`，依此类推，直到最后一个执行。

如果您希望以其他顺序获得结果，请将上述行移高两行，以便每次迭代在调用子之前回显。

例子：

```
int recursiv(int x, int times = 0) {
  std::cout << "We are now at " << x/2 << std::endl;

  if(x)
    return recursiv(x/2, times + 1);
  else
    std::cout << "We reached " << x << " but it took " << times << " steps" << std::endl;

  return 0;
} 
```

不相关：全局变量被认为是一种不好的做法。它们有用例，这不是其中之一。我在函数中修复了它。

# python - 使用 Gunicorn 服务器在 Django 中处理多个进程请求

> ID：15639491
> 
> 赞同：4
> 
> 时间：2013-03-26T14:23:35.350
> 
> 标签：python, django, gunicorn

我只想知道当我使用 gunicorn 服务器时是否可以在 Django 中运行和处理多个进程。

如果一个客户端正在请求数据，而同时另一个客户端请求相同，则两个进程应该同时执行而不是队列。

有没有其他方法可以做到这一点。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:37:31.843

您可以启动多个工作进程：

```
gunicorn -w 4 ... 
```

这将创建 4 个进程，每个进程一次可以处理一个请求。

您还可以使用不同的工作类型，例如`gevent`or `meinheld`，使 gunicorn 异步处理请求：

```
gunicorn --worker-class=gevent ...
gunicorn --worker-class="egg:meinheld#gunicorn_worker" ... 
```

对于最后两个，您需要安装[gevent](https://github.com/SiteSupport/gevent/downloads)（rc 版本之一）或[meinheld](http://meinheld.org/)。

# python - 如何从现有数据制造 Django ORM QueySet / 从普通 SQL 返回 ORM 查询？

> ID：15639492
> 
> 赞同：1
> 
> 时间：2013-03-26T14:23:36.540
> 
> 标签：python, sql, django, orm, django-queryset

我的案例：在我的 Django 应用程序的一个地方，出于优化目的，我决定使用纯 SQL - 我需要一个复杂的连接，而 Django ORM 无法完成这项工作。但是使用纯 SQL 引起了另一个问题——这个函数最好应该返回一个 QuerySet 对象，这变得不可能了。

所以我想知道 - 有没有手动构建查询集的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T14:31:25.823

有两种方法可以立即使用。

1.  [`QuerySet.extra`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#extra) 允许您指定其他 SQL。
2.  [`Manager.raw`](https://docs.djangoproject.com/en/dev/topics/db/sql/#mapping-query-fields-to-model-fields)允许您编写将被映射到模型对象的原始 sql 查询。

# javascript - 使用 POST 进行分页

> ID：15639499
> 
> 赞同：0
> 
> 时间：2013-03-26T14:23:54.447
> 
> 标签：javascript, jquery, ruby-on-rails-3, forms, post

我有一个高级搜索表单，我从 method=GET 切换到 method=POST，因为 url 对于浏览器来说太长了。

现在我使用 gem (will_pagination) 进行分页。问题是 gem 用于合并参数和更新 page_no 以生成链接，虽然这适用于基于 GET 的表单，但它显然不适用于基于 POST 方法的表单。例如-：`http://localhost:3000/orders/advanced_search`更改`http://localhost:3000/orders/advanced_search?page=2`失败，因为这是一个后调用，而不是一个获取调用。

我的替代方案是什么？

有没有办法让链接在合并 RAILS 上的参数时发送 POST 调用？

另一件事，我在想是让页面链接点击与点击操作相关联，该操作更新我表单中的隐藏页面字段，然后重新提交。希望 jquery 的这一部分并不难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:26:20.577

简单，但未优化。
在 PHP 中，在 will_pagination 被调用之前，把这个：

```
$_GET['page_no'] = $_POST['page_no']; 
```

# inno-setup - 如何使用 InnoSetup 检查我的电脑是 32 位（或）64 位操作系统？如何使用 innosetup 检查我的电脑中是否安装了 .net framework 4.5？

> ID：15639501
> 
> 赞同：-1
> 
> 时间：2013-03-26T14:23:55.363
> 
> 标签：inno-setup

我想使用 inno setup 检查我的电脑是否是 32 位（或）64 位操作系统。我如何检查我的电脑中是否安装了 .net framework 4.5？如果未安装如何使用 innosetup 从我的设置中提供 .net framework 4.5 包？以及如何使用 innosetup 从 Web 安装 .net framework 4.5？

问候， Lokesh.J

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:32:56.060

Detect OS is 32/64 Bit 看看这个。 [如何通过脚本检测 64 位平台](https://stackoverflow.com/questions/3618049/how-to-detect-64bit-platform-by-script)。

要检查安装的 .NET 版本，请尝试使用此脚本。 [http://www.kynosarges.org/DotNetVersion.html](http://www.kynosarges.org/DotNetVersion.html)

.NET Installer 你可以看看这个。 [http://www.codeproject.com/Articles/20868/NET-Framework-1-1-2-0-3-5-Installer-for-InnoSetup](http://www.codeproject.com/Articles/20868/NET-Framework-1-1-2-0-3-5-Installer-for-InnoSetup)

只需在 Google 上搜索，您就会找到所需的所有答案。希望这可以帮助。

# asp.net-mvc - 使用 JQGrid 和 MVC 3 回发隐藏列数据

> ID：15639508
> 
> 赞同：0
> 
> 时间：2013-03-26T14:24:29.677
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jqgrid-asp.net

我有一个带有隐藏列的 JQGrid，当用户在编辑对话框中编辑它时，我希望将此列中的数据发回服务器。

就目前而言，我可以在回发中看到此表单数据的唯一方法是使用 column 属性`Editable = true`，但是，这会在对话框上显示一个文本输入框。随着`Editable = false`输入框被隐藏但值不在回发中。

在编辑对话框中显示属性并不理想，因为我不希望用户能够更改值，但出于业务逻辑原因，我需要将其发布回服务器。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-25T13:05:36.437

`$('#tr_<ColumnName>').hide();` 您可以通过在 JqGrid 的 ADD 和 EDIT 函数等适当位置使用它来隐藏客户端中的数据。我通过这种方式解决了这个问题。欢迎任何优雅的建议。PS - 实际上归功于我的队友。他们找到了路。

# vim - Vim 在文件末尾显示换行符

> ID：15639511
> 
> 赞同：40
> 
> 时间：2013-03-26T14:24:35.670
> 
> 标签：vim, newline, eof

使用`set eol`选项 Vim 会在文件保存时自动在文件末尾添加一个换行符。我有这个选项，但我希望能够在 Vim 中看到这个换行符，所以我知道它确实存在。

以 Vim 中的文件为例：![Vim 截图](../Images/31ff73630f492eb3201a612fb2622293.png)

和 TextMate 中的同一个文件：![文本伴侣截图](../Images/65eade0eda2c79be08d2cfa451e40250.png)

这总是欺骗我，我最终添加了第二条新行并最终意识到。[此处](https://stackoverflow.com/questions/1200856/can-you-force-vim-to-show-a-blank-line-at-the-end-of-a-file)发布了完全相同的问题，但被接受的答案并未回答这部分问题。

使用`set list`：![列表截图](../Images/3c5d7c69c4e7704b03a013ae1b33ae99.png)

我可以看到`$`在最后一行之后有一个表示新行的字符，但这也会在文件的其余部分中乱扔这些。我知道我可以为此设置一个切换，但我真的更喜欢 TextMate 之类的行为。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-26T15:28:45.903

`'endofline'`默认情况下处于启用状态，因此您的`~/.vimrc`.

EOL 或“换行符”并不意味着“这里后面有一个空行”，它的意思是“这标志着行的结束，任何进一步的字符都将显示在另一行上”。“换行”！=“换行”。

文件的最后一行是 #21，它以“换行符”字符结尾。由于在“换行符”字符之后没有实际的行，因此没有第 22 行，显示第 22 行不仅是错误的，而且具有误导性。

TextMate 的行为是错误的。

Vim 的行为是正确的。

如果您希望 Vim 显示第 22 行，您需要明确添加该行，但这对我来说听起来很傻。

# inno-setup - 使用 inno setup 部署数据层应用程序

> ID：15639513
> 
> 赞同：1
> 
> 时间：2013-03-26T14:24:36.900
> 
> 标签：inno-setup, setup-deployment, data-tier-applications, dacpac

我需要帮助。有一个数据层应用程序 .dacpac 需要使用 inno setup 部署在另一个用户的计算机上。脚本在目标机器上创建 SQL Server 实例，然后必须部署数据层应用程序。我认为可以使用 sqlpackage.exe，但我必须在我的安装 exe 中包含所有依赖项 ddls。还有其他方法可以部署数据层应用程序吗？

# c - Mongoose Hello.c 编译错误

> ID：15639517
> 
> 赞同：1
> 
> 时间：2013-03-26T14:24:43.440
> 
> 标签：c, mongoose-web-server

我正在尝试用猫鼬编译示例中提供的 hello.c。我不断收到错误：

```
mongoose.c:4752:27: error: '_strtoi64' was not declared in this scope 
```

我查看了 mongoose.c 并`_strtoi64`在第 109 行定义：

```
#if defined(_MSC_VER) && _MSC_VER < 1300
#define STRX(x) #x    
#define STR(x) STRX(x)    
#define __func__ __FILE__ ":" STR(__LINE__)
#define strtoull(x, y, z) strtoul(x, y, z)    
#define strtoll(x, y, z) strtol(x, y, z)    
#else    
#define __func__  __FUNCTION__    
#define strtoull(x, y, z) _strtoui64(x, y, z)    
#define strtoll(x, y, z) _strtoi64(x, y, z)    
#endif // _MSC_VER 
```

我尝试在 if 定义之外定义，但我得到了同样的错误。
我看到了： [链接](http://code.google.com/p/mongoose/issues/detail?id=93) 但它看起来像我已经有这个“修复”的代码版本。

我查看了其他一些介绍猫鼬的问题，但我没有遇到任何问题。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:35:29.640

我不会认为 Microsoft Visual C++ 是一个有效的 C 编译器。它支持 C89，它主要与 C++ 具有子集兼容性。但是，自 C89 以来，又采用了两个标准：C99 和 C11。建议 C 编译器无法编译 1999 年以来的 C 代码是不合理的。有效的 C99 编译器将正确编译此代码。

简而言之，使用 C 编译器编译 C 代码，使用 C++ 编译器编译 C++ 代码。如果需要将一些 C 代码链接到 C++ 项目，请使用 C 编译器编译 C 代码，然后使用 C++ 链接器将其链接到 C++ 项目。

# c++ - 不明确的引用和命名空间（来自两个外部库的定义冲突）

> ID：15639519
> 
> 赞同：7
> 
> 时间：2013-03-26T14:24:48.530
> 
> 标签：c++, oop, shared-libraries, static-libraries

我经历了我无法理解的定义的崩溃。

问题的示意图如下：

主项目文件有两个包括：

```
include <lib1.h>
include <lib2.h> 
```

第一个标头包括库中的几个其他标头，其中一个标头有一个直接（未包含名称空间）定义：

```
template<typename T> class SparseMatrix; 
```

lib2.h 里面有以下内容

```
namespace lib2
{
   using namespace lib3;

   class ...
   {
      ...
      SparseMatrix<double> ...
      ...
    }
} 
```

在 lib3 内部，被命名空间覆盖，还有一个 SparseMatrix 类的定义。

每个库单独编译没有问题。当我尝试编译使用 的可执行文件时，编译器会产生错误：

```
lib2.h:70:7: error: reference to 'SparseMatrix' is ambiguous 
```

这对我来说看起来很奇怪，因为我在主程序中没有写

```
using namespace lib3; 
```

因此，我认为这些定义没有理由崩溃。我将不胜感激任何可能的问题解释。

当然，我可以将 lib1 中的定义封装到它们自己的命名空间中，但是我需要在那里修改相当多的文件，而我宁愿不这样做。

评论：下面的答案是正确的，但我也能够通过更改包含文件的顺序来解决这个问题，即首先包含 lib2，然后是 lib1。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T14:27:31.727

> 我在主程序中没有写`using namespace lib3;`

但是，如果您查看`lib2.h`，确实已经写了。命名空间的内容`lib3`已被引入`lib2`，现在在定义`SparseMatrix<double>`对象时可见。

在所有包含已解决之后，您可以认为`lib2.h`是这样的：

```
template <typename T> class SparseMatrix;    // (1)

namespace lib3
{
   template <typename T> class SparseMatrix; // (2)
}

namespace lib2
{
   using namespace lib3; // (3)

   class ...
   {
      ...
      SparseMatrix<double> ... // (4)
      // ::SparseMatrix<double> would only see (1)
      // lib2::SparseMatrix<double> would only see (2)
    }
} 
```

标记为 (1) 的行声明`SparseMatrix`在 (4) 行上立即可见。第 (2) 行的声明不会是，但由于第 (3) 行将其带入 namespace `lib2`，它现在在第 (4) 行也可见。

您可以通过完全限定类型来解决此问题：

```
::SparseMatrix<double> ... 
```

`::`没有前面的命名空间表示全局命名空间。

另一种选择是不包含`using namespace lib3;`并`lib2.h`正确限定`lib3`名称空间的内容。

# javascript - 如何通过单击 contextmenus chrome 扩展来使用编程注入来引入模态窗口

> ID：15639521
> 
> 赞同：0
> 
> 时间：2013-03-26T14:24:54.250
> 
> 标签：javascript, google-chrome, google-chrome-extension, modal-dialog

我正在尝试开发一个扩展程序，当用户单击右键菜单（上下文菜单）中的按钮时，它将突出显示网页的选定文本。

有关所选文本的信息也将从用户那里获取，因为我正在尝试使用编程注入的 modalwindow 但无法执行脚本。代码中没有显示错误。代码如下：

**清单.json**

```
{
  "manifest_version": 2,
  "name": "web highlighter",
  "description": "save the content of the selected text",
  "version": "1.0",

 "background": {
    "page" : "background.html"
    },
 "icons": {
      "16": "icon.png",
      "48": "icon.png"
   },

  "minimum_chrome_version": "6",
  "content_scripts": [
        {
            "matches": [
                "<all_urls>"
            ],
           "js": [
             "background.js", "content_scripts.js"
            ]
        }
    ],
    "web_accessible_resources": [

    ],
  "permissions": [ "contextMenus", "tabs", "http://*/*" ]

} 
```

**背景.html**

```
 <html>
<head>
        <script src = "background.js"></script>  
</head>
 <body>

</body>
</html> 
```

**背景.js**

```
function get_modal(info,tab)
  {
     chrome.tabs.executeScript(null, {file: "content_scripts.js"});

   }

chrome.contextMenus.create({title: "Highlight %s with capsule", contexts:["selection"], onclick: get_modal}) 
```

**content_script.js**

```
iframeElement = document.createElement("iframe");
iframeElement.setAttribute("style","width: 100%; height: 100%;");

wrapperDiv.appendChild(iframeElement);

modalDialogParentDiv = document.createElement("div");
modalDialogParentDiv.setAttribute("style","position: absolute; width: 350px; border: 1px solid rgb(51, 102, 153); padding: 10px; background-color: rgb(255, 255, 255); z-index: 2001; overflow: auto; text-align: center; top: 149px; left: 497px;");

modalDialogSiblingDiv = document.createElement("div");

modalDialogTextDiv = document.createElement("div"); 
modalDialogTextDiv.setAttribute("style" , "text-align:center");

modalDialogTextSpan = document.createElement("span"); 
modalDialogText = document.createElement("strong"); 
modalDialogText.innerHTML = "web highlighter";

breakElement = document.createElement("br"); 
imageElement = document.createElement("img"); 
imageElement.src = chrome.extension.getURL("spinner_progress.gif");

modalDialogTextSpan.appendChild(modalDialogText);
modalDialogTextDiv.appendChild(modalDialogTextSpan);
modalDialogTextDiv.appendChild(breakElement);
modalDialogTextDiv.appendChild(breakElement);
modalDialogTextDiv.appendChild(imageElement);

modalDialogSiblingDiv.appendChild(modalDialogTextDiv);
modalDialogParentDiv.appendChild(modalDialogSiblingDiv);

document.body.appendChild(wrapperDiv);
document.body.appendChild(modalDialogParentDiv); 
```

# jquery - 如何优化 jqGrid 事件处理

> ID：15639523
> 
> 赞同：0
> 
> 时间：2013-03-26T14:24:59.373
> 
> 标签：jquery, jqgrid-asp.net

我的 jqgrid 大量使用 a`CustomFormatter`创建超链接单元格内容。

FormatFunction 看起来像这样：

```
function formatLink(cellValue, options, rowObject) {
    var res = cellValue.split(" - ");
    var filter = options['pos'] + "@" + rowObject['Filter'] + "@Compiled";
    return '<a href="#" OnClick="SearchEvaluations(' + '\'' + filter + '\'' + ')">' + res[0] + '</a> - ' + res[1];
} 
```

当网格显示很多行时，我认为运行函数所花费的时间可以而且应该被优化。

我认为我可以将带有 jQ​​uery 委托的单击处理程序附加到`<a>`网格内的所有标签。

```
$('#grid').delegate('a', 'click', function ( 
```

此时，如何访问单击的行内的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:28:54.190

jqgrid中有一个方法onSelectRow。我需要根据单击的 jQgrid 行的数据打开一个 jsp。我的代码如下所示：

```
onSelectRow : function(rowid, status, e) {
        var selRow = $(this).getGridParam("selrow");
        var selReferralId = $(this).getCell(selRow, 'referralId'); 
        $("#referralDetailsTab").load(contextRoot+"refDetailsTab?refId=" + selReferralId ); 
```

# facebook - 我如何在自己的墙上通过 facebook 页面获取帖子？

> ID：15639524
> 
> 赞同：0
> 
> 时间：2013-03-26T14:25:00.003
> 
> 标签：facebook, facebook-graph-api

我认为这将是 facebook api 中最微不足道的事情，但我似乎无法弄清楚。我想通过它自己的墙上的 facebook 页面获取帖子。就这样。`/feed`给我其他人的帖子与页面的帖子混合。`/posts`给我在其他人的墙上的页面上的帖子与它自己的帖子在它自己的墙上。当您选择“按页面发布帖子”时，我只想要我们在页面墙上看到的帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:14:56.177

> /posts 将其他人墙上的页面上的帖子与它自己的帖子混合在自己的墙上。

这并不完全正确。`/posts`提供用户自己的帖子，无论是在评论中还是在页面时间轴上粉丝的帖子中。

*页面不能在用户的时间线上书写*

Facebook 还故意向端点添加了诸如评论之类的故事，`/posts`因此您必须在之后过滤掉这些故事。

# c# - sql Top 1 vs System.Linq firstordefault

> ID：15639547
> 
> 赞同：2
> 
> 时间：2013-03-26T14:26:03.093
> 
> 标签：c#, sql, linq

我正在用 c# 重写一个 SProc。问题是在 SProc 中有这样的查询：

```
select top 1 *
from ClientDebt
where ClinetID = 11234
order by Balance desc 
```

例如：我有一个客户有 3 笔债务，所有债务的余额都相同。债务 ID 为：1,2,3

该查询的 c# 等效项是：

```
debts.OrderByDescending(d => d.Balance)
     .FirstOrDefault() 
```

债务代表客户 3 项债务

有趣的部分是 sql 用 Id 2 返回债务，但 c# 代码返回 Id 1。Id 1 对我来说很有意义但是为了保持代码功能相同，我需要更改 c# 代码以返回中间代码。

我不确定 sql top 1 背后的逻辑是什么，其中有几行与查询匹配。

该查询将选择一项债务并更新数据库。我希望 linq 使用 sql 返回相同的结果

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:33:57.087

```
debts.OrderByDescending(d => d.Balance).ThenByDescending(d => d.Id)
     .FirstOrDefault() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T14:45:43.923

您可以启动 SQL Profiler，执行存储过程，查看结果，然后通过 linq 捕获应用程序发送的查询，并再次查看结果。

此外，您可以轻松查看程序的执行计划，并尝试对其进行优化，但使用 linq 查询，您无法轻松做到这一点。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-26T14:31:32.827

AFAIK，在 SQL 中，如果您选择没有 ORDER BY 的行，它会根据主键对结果集进行排序。使用 Order BY CLAUSE [field]，下一个订单是 [primarykey]。

# jquery - jQuery 可排序表格（或表格样式布局）

> ID：15639553
> 
> 赞同：1
> 
> 时间：2013-03-26T14:26:21.527
> 
> 标签：jquery, html, jquery-ui-sortable

我想呈现一个表格，用户可以将列和行拖放到任何顺序。我已经使用 jQuery sortable 来通过 div 列或表行来实现这一点，但我想要实现的是能够同时拖动列和行。

例如：

```
(1)  (2)  (3) (4)
(a) row1 col1 col2
(b) row2 col2 col3 
```

因此，在上图中，用户将能够交换列 (2)、(3) 和 (4) 的顺序，还可以交换行 (a) 和 (b) 左右。第 1 列将被固定，标题行 (1) 也是如此，并且不可排序。

我想我可能不得不用 div 或其他东西来实现这一点，但我认为逻辑会非常复杂。

有没有人对如何实现这一目标有任何想法。我不希望实际布局看起来像网格（excel 样式）或任何东西，所以不想使用任何现有的 excel 样式网格插件。每个单元格都是一个漂亮的圆角 div，并有一个边距将它们分开，所以它就像一系列气泡，所有这些气泡都以网格形式排列，但完全可以排序。

我希望你能帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-29T19:14:26.783

我使用[了 johnny/jquery-sortable](https://github.com/johnny/jquery-sortable)。

不过，我必须修复给定示例中的 col 排序代码……[请参见此处](https://github.com/johnny/jquery-sortable/issues/173)。

现在表行和列是 dnd。

# ubuntu - 找不到一些手册页

> ID：15639557
> 
> 赞同：-1
> 
> 时间：2013-03-26T14:26:30.317
> 
> 标签：ubuntu, manpage, size-t, unistd.h

Ubuntu 12.04...

几年前我有fedora，我在那里看到了以下内容的手册页......

```
unistd.h,
系统/类型.h，
标准类型定义（以“_t”为后缀）等。

```

我试过这个...

`man unistd`

但它没有找到它:(

我认为这些页面在 Ubuntu 中不存在。

尽管`man stdio`有作品和其他手册页。

所以

*   如果 Ubuntu 没有这些页面，请告诉我如何下载它们
*   查看标准 typedef 手册页的命令是什么，即, ,`size_t`等`pid_t`的手册页。`off_t``clock_t`

试过了`man stddef`，没找到。。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:00:06.280

**解决了**

这是需要做的...

`sudo apt-get install manpages-posix-dev`

获取这些页面:)

# powershell - PowerShell Exchange 从 OU 排序中禁用 OWA

> ID：15639560
> 
> 赞同：0
> 
> 时间：2013-03-26T14:26:39.327
> 
> 标签：powershell, powershell-2.0, exchange-server-2010

我正在搜索特定的 OU，然后为 OU 中的所有用户禁用 OWA。该脚本每天运行。

我有以下脚本可以正常工作，但正在更新 OU 中的所有用户。

```
$OU='OU=SomeOU,DC=Domain,DC=com'
$ext14='00254'
Get-Mailbox -OrganizationalUnit $OU| Where {$_.CustomAttribute14 -eq $ext14} | Set-CASMailbox -OWAEnabled:$false 
```

`$True`我只想更新此 OU 和子 OU中 -OWAEnabled 设置为（并更改为 $false）的用户。这将减少我对 Exchange 的调用。不幸的是，`Set-CASMailbox`似乎没有要查询的`OU`or`CustomAttribute` 属性。

有什么建议么？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:47:56.880

CASMailbox 对象没有 OU 或 CustomAttribute 属性，但 Mailbox 对象有protocolsettings 属性集合，因此：

```
$OU='OU=SomeOU,DC=Domain,DC=com'
$ext14='00254'
Get-Mailbox -OrganizationalUnit $OU|
Where {($_.CustomAttribute14 -eq $ext14) -and ($_.protocolsettings -match 'OWA.1'} |
Set-CASMailbox -OWAEnabled:$false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:45:35.110

尝试这个：

```
Get-CASMailbox -OrganizationalUnit $OU | ? {
  $_.CustomAttribute14 -eq $ext14 -and $_.OWAEnabled
} | % {
  Set-CASMailbox -Identity $_.Identity -OWAEnabled:$false
} 
```

# c# - 使用实体模式使用 ReferenceKey 将数据插入表的 C# 代码

> ID：15639568
> 
> 赞同：-1
> 
> 时间：2013-03-26T14:26:54.433
> 
> 标签：c#, wpf, entity-framework-4, entity

谁能告诉我如何插入数据

```
Table Student has columns {stuId Name Age}
Table School has columns {classId Year sName} 
```

“ `sName`”是学生表中的参考键

我想使用实体模型 C# 插入数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T01:31:20.963

```
 String SchooID = getNewID();
                Schools schl = new Schools();
                schl.school_reference = SchooID;
                schl.school_name = "Ananda Collage";

                schl.StudentReference.Value = cecbContext.Students.First(i => i.stud_name == "Josh");

                cecbContext.AddToSchools(schl);
                cecbContext.SaveChanges(); 
```

我以这种方式找到了答案。这对我很成功。非常感谢你们的帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:30:45.010

试试这个来添加学生：

```
Student student = new Student(){studId="", Name="", Age=""};
myEntities.Students.AddObject(student);
myEntities.SaveChanges(); 
```

添加学校：

```
School school = new School(){classId="", Year = year, sName=""};
myEntities.Schools.AddObject(school);
myEntities.SaveChanges(); 
```

我希望这有帮助。

# c++ - 从字符串中提取字符

> ID：15639570
> 
> 赞同：2
> 
> 时间：2013-03-26T14:27:00.507
> 
> 标签：c++, string

有一个字符串`HelloHello`，我如何提取（即省略）第一个字符`elloHello`？

我已经想到了`.at()`，`string[n]`但是他们返回了值并且不从字符串中删除它

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T14:29:20.317

```
#include <iostream>
#include <string>

int main(int,char**)
{
  std::string x = "HelloHello";
  x.erase(x.begin());
  std::cout << x << "\n";
  return 0;
} 
```

印刷

```
elloHello 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T14:29:49.270

利用[`erase`](http://en.cppreference.com/w/cpp/string/basic_string/erase)

```
std::string str ("HelloHello");

str.erase (0,1);  // Removes 1 characters starting at 0.

// ... or

str.erase(str.begin()); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-26T14:30:00.243

您应该使用子字符串。第一个参数表示起始位置。第二个参数`string::npos`表示您希望新字符串包含从指定开始位置到字符串结尾的所有字符。

```
std::string shorterString = hellohello.substr(1,  std::string::npos); 
```

[http://www.cplusplus.com/reference/string/string/substr/](http://www.cplusplus.com/reference/string/string/substr/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-26T14:29:29.523

尝试使用 substr()

参考：[http ://www.cplusplus.com/reference/string/string/substr/](http://www.cplusplus.com/reference/string/string/substr/)

# ruby-on-rails - 来自 self.id 的未定义方法“id”

> ID：15639573
> 
> 赞同：0
> 
> 时间：2013-03-26T14:27:14.853
> 
> 标签：ruby-on-rails

我正在从头开始构建收件箱消息系统，当我将 self.id 添加到模型中的条件时，我在 MessagesController 中标题为 NoMethodError 的所有页面上都收到未定义的方法“id”错误。我尝试了一些解决方法，但我无法掌握它。

消息控制器：

```
class MessagesController < ApplicationController

  before_filter :set_user

  def index
    if params[:mailbox] == "sent"
      @messages = @user.sent_messages
    elsif params[:mailbox] == "inbox"
      @messages = @user.received_messages
    #elsif params[:mailbox] == "archieved"
     # @messages = @user.archived_messages
    end
  end

  def new
    @message = Message.new
    if params[:reply_to]
      @reply_to = User.find_by_user_id(params[:reply_to])
      unless @reply_to.nil?
        @message.recepient_id = @reply_to.user_id
      end
    end
  end

  def create
    @message = Message.new(params[:message])
    @message.sender_id = params[:user_id]
    if @message.save
      flash[:notice] = "Message has been sent"
      redirect_to user_messages_path(current_user, :mailbox=>:inbox)
    else
      render :action => :new
    end
  end

  def show
    @message = Message.readingmessage(params[:id],@user_id)
  end

  def delete_multiple
      if params[:delete]
        params[:delete].each { |id|
          @message = Message.find(id)
          @message.mark_message_deleted(@message.id,@user_id) unless @message.nil?
        }
        flash[:notice] = "Messages deleted"
      end
      redirect_to user_messages_path(@user, @messages)
  end

  private
    def set_user
      @user = current_user
    end
end 
```

用户.rb：

```
:conditions => ["messages.recipient_deleted = ? AND messages.recipient_id = ?",false,self.id]
..
 ..

 def unread_messages?
   unread_message_count > 0 ? true : false
 end

 # Returns the number of unread messages for this user
 def unread_message_count
   eval 'messages.count(:conditions => ["recepient_id = ? AND read_at IS NULL", self.user_id])'
 end 
```

# servlets - request.getParameter() 在从另一个 servlet 调用时在 java servlet 中返回 NULL

> ID：15639576
> 
> 赞同：1
> 
> 时间：2013-03-26T14:27:20.330
> 
> 标签：servlets, post, get

我制作了两个 servlet Authenticate.java 和 Accept.java

这是Authenticate.java的doGet函数

```
 PreparedStatement stmt = null;
      PrintWriter out=response.getWriter();

      response.setContentType("text/html");  
      response.setCharacterEncoding("UTF-8");  
      try{
          int cnt=0;
          Class.forName("com.ibm.db2.jcc.DB2Driver");
          Connection con= DriverManager.getConnection("jdbc:db2://localhost:50000/SSMS", "kiit", "kiit");
          con.setAutoCommit(false);
          String s=request.getParameter("userName");
          if(s==null){
              out.println("You Are Not Authorized");
              return;
          }
          stmt=con.prepareStatement("SELECT COMP_ID,NAME,CONTACT FROM COMPANYREG");

          ResultSet rs=stmt.executeQuery();
          while(rs.next()){
              cnt++;
              out.println("<form action='Accept' method='post'> <input type='text'  size='20' id='cmpid' value='"+rs.getString(1)+"'><br> Name :"+rs.getString(2)+"<br>Contact: "+rs.getString(3)+"<br><input type='submit' class='confirm' id='"+cnt+"' value='Approve'><br></form>");
          } 
```

继承人 Accept.java

```
 String user=request.getParameter("cmpid");

      PrintWriter out=response.getWriter();
      response.setContentType("text/html");  
      response.setCharacterEncoding("UTF-8"); 
      out.println("user = "+user);
      try{
          String cid = null,pss = null,nam = null,add = null,sec = null,cnt = null,ema = null;
          Class.forName("com.ibm.db2.jcc.DB2Driver");
          Connection con= DriverManager.getConnection("jdbc:db2://localhost:50000/SSMS", "kiit", "kiit");

          stmt=con.prepareStatement("SELECT * FROM COMPANYREG WHERE COMP_ID = '"+user+"'");
          ResultSet rs=stmt.executeQuery();
          out.println("query1");
          while(rs.next()){
              out.println("query2");
              cid = rs.getString(1);
              pss=rs.getString(2);
              nam=rs.getString(3);
              add=rs.getString(4);
              sec=rs.getString(5);
              cnt=rs.getString(6);
              ema=rs.getString(7);

          }
          out.println("query3");
          stmt=con.prepareStatement("INSERT INTO COMPANY VALUES ('"+cid+"','"+pss+"','"+nam+"','"+add+"','"+sec+"',"+cnt+",'"+ema+"')");

          int numRowsChanged= stmt.executeUpdate();
          if(numRowsChanged==0) out.println("Some Error Encountered Please Re-enter Information values Correctly");
          else out.println("You Were Registered Successfully.You will be allowed to login once your details are verified. Thank You"); 
```

在 Accept.java 类中，当我使用 request.getParameter("cmpid"); 引用变量“cmpid”时

它正在返回 null ......谁能告诉我这里到底是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:02:38.160

```
out.println("<form action='Accept' method='post'> <input type='text'  size='20' id='cmpid' value='"+rs.getString(1)+"'><br> Name :"+rs.getString(2)+"<br>Contact: "+rs.getString(3)+"<br><input type='submit' class='confirm' id='"+cnt+"' value='Approve'><br></form>"); 
```

在表单中添加名称属性为“name=cmpid”

# visual-studio-2010 - 未在带有 win32 控制台的 Visual Studio 中定义的标识符

> ID：15639577
> 
> 赞同：0
> 
> 时间：2013-03-26T14:27:22.607
> 
> 标签：visual-studio-2010, console

我在 Visual Studio 中使用 win32 控制台和 opencv 编写代码，它编译得很好，但是当我使用相同的 GUI 代码时，它会导致很多错误。我想在图片框中显示一个 IplImage 但是在编译它时总是显示一条消息“标识符未定义”如何解决这个问题谢谢

```
private: System::Void button1_Click_1(System::Object^ sender, System::EventArgs^ e) {
IplImage* img = 0;
int height,width,step,channels;
uchar *data;

cvNamedWindow("Fenetre_test", CV_WINDOW_AUTOSIZE);
cvMoveWindow("Fenetre_test", 100, 100);

CvCapture* capture = cvCaptureFromCAM(0);
while(cvWaitKey(600)!=' '){
img=cvQueryFrame(capture);

height = img->height;
width = img->width;
step = img->widthStep;
channels = img->nChannels;
data = (uchar *)img->imageData;
//cout << "Processing a " << width << "x" << height << " image with " << channels << " channels" << endl;

cvShowImage("Fenetre_test", img );
cvWaitKey(10);
int result=cvSaveImage("srcc.jpg",img); 
```

**错误**

```
 "CvCapture" identificatuer not declare
"img" identificatuer not declare
"height" identificatuer not declare
"width" identificatuer not declare
"step" identificatuer not declare
"channels" identificatuer not declare
"data" identificatuer not declare

however I declared its "IplImage* img = 0;
int height,width,step,channels;
uchar *data;" 
```

# javascript - 使用 jQuery 在不同的 div 中标记一行

> ID：15639579
> 
> 赞同：1
> 
> 时间：2013-03-26T14:27:39.650
> 
> 标签：javascript, jquery, html, css, select

我有两个`div`水平堆叠的布局。它们中的每一个都包含一行元素。

我怎样才能使这些行之一成为可选择的（以便人们可以将它们复制到他的剪贴板，在这个例子中`Item 1 Item2`：）用鼠标和 jQuery？充其量用户不应该看到差异，只需执行正常过程（鼠标按下>鼠标移动>鼠标释放）。

不幸的是，我无法编辑 Html。

```
<div style="float:left;">
    <p>Item 1</p>
    <p>Item 1</p>
    <p>Item 1</p>
    <p>Item 1</p>
    <p>Item 1</p>
</div>
<div>
    <p>Item 2</p>
    <p>Item 2</p>
    <p>Item 2</p>
    <p>Item 2</p>
    <p>Item 2</p>
</div> 
```

如果您现在尝试这样做，它会标记每列的一半。 [**实时预览 (JSFiddle)**](http://jsfiddle.net/netme/36dWe/)

![在此处输入图像描述](../Images/6f31aea43886fabab5b59acfea92d76a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:33:31.043

您将表格数据放入两个单独的分隔符中。无论您如何设计分隔线，在进行文本选择时，段落永远不会并排。如果您无法更改标记，您可以做的一件事是将其转换为表格：

```
/* Count the total number of children within the first divider.
 * This assumes both will always be equal. */
var total = $('div:first-child').children().length,

/* Create the table. */
    table = $('<table><tbody></tbody></table>');

/* Loop from 0 to total. */
for(i=0;i<total;i++)
{
    /* Create the table row. */
    var tr = $('<tr></tr>'),
    /* Index will be i + 1, store this as new variable. */
        j = i + 1;

    /* Loop through each matching nth-child. */
    $('div p:nth-child(' + j + ')').each(function() {
        /* Create the table cell. */
        var td = $('<td></td>');

        /* Set the cell's text to the paragraph's text. */
        td.text($(this).text());

        /* Append cell to row. */
        td.appendTo(tr);
    })

    /* Append row to table's tbody. */
    tr.appendTo($('tbody', table));
}

/* Append table to body. */
table.appendTo('body');

/* Remove dividers. */
$('div').remove(); 
```

[JSFiddle 示例](http://jsfiddle.net/36dWe/2/)。

# java - Java，从 String 读取到 ArrayList

> ID：15639586
> 
> 赞同：0
> 
> 时间：2013-03-26T14:28:07.057
> 
> 标签：java, string, arraylist

我有一个包含此内容的字符串`12345`。

将这些单独的数字读入整数的 ArrayList 的最佳方法是什么？像这样：

```
{1, 2, 3, 4, 5} 
```

这是我到目前为止所拥有的：

```
String data = getData();
this.points=new ArrayList<Integer>();
for (int i=0; i<data.length(); i++) {
    int pt = Integer.parseInt(data.valueOf(i));
    this.points.add(new Integer(pt));
} 
```

问题是我得到`[(0),(1),(2),...]`的不是所需的数字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T14:32:48.483

您需要使用该`charAt(i)`方法，`valueOf(i)`返回 i 的 String 值而不是 i char

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T14:46:32.233

此解决方案应该可以工作并将您的内存分配保持在最低限度。请注意，您需要确保数据上仅存在数值。

```
String data = getData();
this.points = new ArrayList<Integer>(); //if this is a field you should use points.clear() instead.

for (int i=0; i<data.length(); i++) {
  this.points.add(Characacter.getNumericValue(data.charAt(i)));
} 
```

您的问题是您试图[`String.valueOf`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#valueOf%28int%29)在索引上使用该方法，该方法基本上会在每次迭代中返回 i 的值

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T14:32:36.723

您可以使用从位置`String.charAt`获取相应的字符`char`。要将其添加到您需要转换为的列表中`int`。

```
String data = getData();
this.points=new ArrayList<Integer>();
List<Integer> list = new ArrayList<Integer>();

for (int i = 0; i < data.length(); i++) {
    this.points.add(Character.getNumericValue(data.charAt(i)));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T14:33:59.463

`Integer.parseInt`将取整数；你想逐位计算。为此，请`Character.getNumericValue`改用。

```
String data = getData();
this.points=new ArrayList<Integer>();
for (int i=0; i<data.length(); i++) {
    int pt = Character.getNumericValue(data.charAt(i));
    this.points.add(new Integer(pt));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T14:40:33.567

使用`data.charAt()`而不是 `valueOf`. 所以你的代码应该是这样的：

```
 String data = getData();
        for (int i = 0; i < data.length(); i++) {
            int pt = Integer.parseInt(data.valueOf(data.charAt(i)));
            this.points.add(new Integer(pt));
        }
        for (int i = 0; i < points.size(); i++) {
            System.out.println(this.points.get(i));

        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T14:47:21.373

尝试这个

```
String data = getData();
this.points=new ArrayList<Integer>();
for (int i = 0; i < data.length(); i++) {
    this.points.add(Integer.parseInt(s.charAt(i) + ""));
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-26T14:34:50.747

你得到所有这样的整数：

```
String data = "254980";
List<Integer> list = new ArrayList<Integer>();
for (int i = 0; i < data.length(); i++) {
    list.add(new Integer(data.substring(i,i+1)));
} 
```

测试：

```
for (Integer integer : list) {
    System.out.print(integer);
} 
```

印刷

```
2 
5 
4 
9 
8 
0 
```

# ios - 是否可以使用 Phonegap 开发全屏 iPad 应用程序？

> ID：15639587
> 
> 赞同：0
> 
> 时间：2013-03-26T14:28:06.997
> 
> 标签：ios, ipad, cordova

我想用 Phonegap 开发一个 iPad 应用程序，但我偶然发现它不能全屏运行（它将具有 iPhone 的屏幕大小）。有什么黑客可以防止这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:41:28.600

这是可能的。您需要在 Xcode 项目配置中指定该应用程序是 iPad 应用程序。[检查这个](https://stackoverflow.com/questions/6984044/how-to-make-a-application-with-target-is-iphone-ipad?rq=1)

# jquery-ui - jquery仅获取特定类的味精

> ID：15639589
> 
> 赞同：0
> 
> 时间：2013-03-26T14:28:15.687
> 
> 标签：jquery-ui, jquery, dom

在下文中，我试图跟踪插入到`p-msg-class`类中的最后一个元素，但我看到了很多次警报，因为还有其他元素动态插入到`.middle-ui,.flt-rt,.content-ht`. 我如何才能只跟踪`p-msg-class`动态插入的所有其他 html 并使警报停止

```
 $('.middle-ui,.flt-rt,.content-ht').bind('DOMNodeInserted', function(event) {
     if($(this).find(".visitor-msg-cont").last().find(".p-msg-class").length > 0)
     {
        alert($(this).find('.visitor-msg-cont').last().find('.p-msg-class').last().html());
     }
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T23:20:30.430

如果没有看到更多的 html 结构，就很难回答这个问题。我假设您正在动态插入可能具有或不具有类 .p-msg-class 的 DOM 元素。

与其搜索最后插入的 .p-msg-class 元素，不如在插入时抛出警报？像这样的东西（未经测试）：

```
$('.middle-ui,.flt-rt,.content-ht').bind('DOMNodeInserted', function(event) {
    if($(event).target.hasClass('p-msg-class'))
    {
        alert($(event).target.html());
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:01:16.027

好的，这样的事情可以工作。获取添加的最后一个元素的类并检查它是否为“p-msg-class”。

```
$('.middle-ui,.flt-rt,.content-ht').bind('DOMNodeInserted', function(event) {
    var newElement = $(this).find(".visitor-msg-cont").last().children().last().attr("class");
    if(newElement === "p-msg-class")        
    {
    alert($(this).find('.visitor-msg-cont').last().find('.p-msg-class').last().html());
    }
}); 
```

如果您知道子元素将全部是 div 或 p 那么您可以使用`children(div:last)`或类似的东西。

不确定这是否可行，但它可以为您指明正确的方向。

# php - 使用 preg_replace 截断 URL

> ID：15639590
> 
> 赞同：0
> 
> 时间：2013-03-26T14:28:30.090
> 
> 标签：php, preg-replace

我正在编写一个喊话框的代码，并添加了以下代码来处理 URL：

```
$shout_message = preg_replace('"\b(http://\S+)"', '<a href="$1"target="_blank">$1</a>', $shout_message);

$shout_message = preg_replace('#^ (?>((?:.*:/+)?[^/]+/.{1})) .{4,} (.{8})$ #x','$1...$2', $shout_message); 
```

第一行标识 URL 并创建一个超链接，第二行截断 URL 例如，提交时，（http:// 中的第二个 / 被删除，因为我不能发布超过 2 个链接）

> http://www.google.com/#hl=en&sclient=psy-ab&q=truncate+url+php&oq=truncate+url&gs_l=hp.1.2.0j0i22i30l3.0.0.1.12.0.0.0.0.0.0.0.0..0.0.. .0.0...1c..7.psy-ab.lWUgfxOY55k&pbx=1&bav=on.2,or.r_cp.r_qf.&bvm=bv.44158598,d.eWU&fp=b2f671f2a036cfc1&biw=1600&bih=780

变成

> http://www.google.com/#...=780

这两个代码在大多数情况下都可以正常工作。但是，如果有人在输入 URL 后键入和附加消息，超链接仍然有效，但该消息成为截断字符串的一部分 例如，如果

> http://www.google.com/#hl=en&sclient=psy-ab&q=truncate+url+php&oq=truncate+url&gs_l=hp.1.2.0j0i22i30l3.0.0.1.12.0.0.0.0.0.0.0.0..0.0.. .0.0...1c..7.psy-ab.lWUgfxOY55k&pbx=1&bav=on.2,or.r_cp.r_qf.&bvm=bv.44158598,d.eWU&fp=b2f671f2a036cfc1&biw=1600&bih=780 看看这个。

键入，则截断的字符串显示为

> http://www.google.com/#...他出局了。

有什么我可以添加的东西可以帮助我的代码只截断 URL 的一部分并留下尾随文本吗？

# jquery - MVC 4 提交特定的表单值

> ID：15639591
> 
> 赞同：0
> 
> 时间：2013-03-26T14:28:31.253
> 
> 标签：jquery, asp.net-mvc-4

我想知道如何使用剃刀从 MVC 4 应用程序提交特定的表单值。

我有以下问题。

2 下拉列表。第一个是使用列出一组**类型**的模型数据填充到控制器中（第一次自动选择默认值）。第二个由**类型**对象填充（如果回发来自第一个下拉列表，则自动选择第一个）。

我想做的就是这个。如果第一个下拉列表正在执行回发，我只想发布第一个列表的选定值，并且 dropDownList2 为 0。

如果第二个下拉列表导致回发，我想要两个值。

```
public ActionResult Index(int dropDownList1 = 0, int dropDownList2 = 0)
{
   // Get data for the dropdown lists
} 
```

这是视图文件

```
<p>
@Html.ActionLink("Create New", "Create")
@using (Html.BeginForm("Index","EditItems",FormMethod.Get)){     
     <p>Γονείς τύπων: @Html.DropDownList("dropDownList1") </p> 
     <p>Τύποι σχολείων: @Html.DropDownList("dropDownList2")  </p> 
    } 
</p>

@section Scripts {
    <script type='text/javascript'\>
        $("#parentUnit").change(function () {
            $(this).parents('form').submit();
        });

        $('#childUnit').change(function () {
            $(this).parents('form').submit();
        });
    </script>
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:38:54.403

在正常的发布情况下，您不能提交特定的值。将提交所有表单字段。没有办法阻止这种情况。

但是，您可以做的是以下三件事之一：

1）您可以使用javascript更改各个字段以清除您不想发送的字段，并在您要发送的字段中设置正确的值。

2）可以使用Ajax发布，然后可以控制发布哪些数据。

3）您可以有几个隐藏的表单，当用户单击提交时，您可以使用 javascript 将您想要提交的值复制到仅包含这些字段的表单，然后通过 javascript 提交该表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-25T08:12:00.920

```
<!DOCTYPE html>
<html>
<body>

<form action="demo_form.asp" method="get">
  First name: <input type="text" name="fname"><br>
  Last name: <input type="text" name="lname"><br>
  <button type="submit">Submit</button><br>
  <button type="submit" formaction="demo_admin.asp">Submit as admin</button>
</form>

<p><strong>Note:</strong> The formaction attribute of the button tag is not supported in Internet Explorer 9 and earlier versions.</p>

</body>
</html>
```

>

# itext - 如何在 PDF 中查找图像并在其上绘制另一个图像

> ID：15639593
> 
> 赞同：1
> 
> 时间：2013-03-26T14:28:36.960
> 
> 标签：itext

我有一个将 Word 文档转换为 PDF 的程序。转换后，我想在新的 PDF 中找到所有图像。如果图像具有特定尺寸（200x100），那么我想在其上绘制另一个图像。更好的是，如果我可以创建一个签名字段并在其上绘图。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:00:55.357

首先试试这个例子：[ExtractImages](http://developers.itextpdf.com/examples/itext-action-second-edition/chapter-15#562-extractimages.java)

我知道这个示例不能满足您的需要，但请看一下使用的[MyImageRenderListener](http://developers.itextpdf.com/examples/itext-action-second-edition/chapter-15#570-myimagerenderlistener.java)类。这是[RenderListener](http://developers.itextpdf.com/reference/com.itextpdf.text.pdf.parser.RenderListener)接口的实现。

为了满足您的要求，您应该编写自己的[RenderListener](http://developers.itextpdf.com/reference/com.itextpdf.text.pdf.parser.RenderListener)实现，更具体地说，它可以为您提供图像的坐标。iText 将通过[ImageRenderInfo](http://developers.itextpdf.com/reference/com.itextpdf.text.pdf.parser.ImageRenderInfo)对象为您提供这些坐标，更具体地说，作为方法返回的[Matrix](http://developers.itextpdf.com/reference/com.itextpdf.text.pdf.parser.Matrix)对象[`getCTM()`](http://developers.itextpdf.com/reference/com.itextpdf.text.pdf.parser.ImageRenderInfo#2nq520mht3bg)。这个矩阵可以用普通的高中代数来解释。I31 和 I32 为您提供 X 和 Y 位置。在大多数情况下，I11 和 I22 将为您提供宽度和高度（除非图像被旋转）。

一旦你有了 X、Y、宽度和高度，画你想要的任何东西都很容易。如果要添加签名字段，请阅读我写的[数字签名手册。](http://itextpdf.com/book/digitalsignatures)

# java - 我可以在 websphere 中使用外部 jdk 路径吗

> ID：15639596
> 
> 赞同：2
> 
> 时间：2013-03-26T14:28:42.693
> 
> 标签：java, eclipse, websphere, hudson

我收到错误错误版本 java

因为 hudson builder 使用 java 1.7 而 webspare 使用默认 1.6。

我如何在 websphere 中更改我的 1.7 java 路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:42:39.397

以下步骤应该做

1.  停止服务器。

2.  在`WASCE_INSTALLED_DIR\bin\setenv.bat`文件中，将`WASCE_JAVA_HOME`变量设置为指向您希望使用的 JRE。在进行此更改之前，您应该查阅 WebSphere Application Server CE 文档以了解支持的版本和供应商。

3.  启动服务器。

请注意，控制台窗口中列出的 JRE 版本现在引用了新的 Java 版本。

# ios - KeychainItemWrapper 迁移数据抛出错误

> ID：15639597
> 
> 赞同：2
> 
> 时间：2013-03-26T14:28:42.627
> 
> 标签：ios, objective-c, keychain, keychainitemwrapper

我正在使用 ARCified[`KeychainItemWrapper`](https://gist.github.com/dhoerl/1170641)并且无法将一个钥匙串项目中的数据迁移到另一个项目。基本上我正在尝试将内容从应用程序特定项目复制到共享项目。为简洁起见，我只输入了用户名，因为它在那里失败了。

```
KeychainItemWrapper *legacyKeychainItem = [[KeychainItemWrapper alloc] initWithIdentifier:@"mainLogin" accessGroup:@"C35BXHSRSA.com.foo.bar"];
NSString *legacyUser = [legacyKeychainItem objectForKey:(__bridge id)kSecAttrAccount];

self.migratedKeychainItem = [[KeychainItemWrapper alloc] initWithIdentifier:@"security" accessGroup:@"C35BXHSRSA.com.foo.security"];
// dies here
[self.migratedKeychainItem setObject:legacyUser forKey:(__bridge id)kSecAttrAccount]; 
```

它死于`KeychainItemWrapper`方法`writeToKeychain`抛出`NSAssert( result == noErr, @"Couldn't update the Keychain Item." );`

[在Keychain Services Reference](https://developer.apple.com/library/mac/#documentation/security/Reference/keychainservices/Reference/reference.html)中查找错误告诉我

> errSecDuplicateItem –25299 项目已存在。

我可以通过硬编码/更改字符串来确认这个问题，并且代码运行良好，但我正在尝试迁移数据......所以相同很重要。问题是，为什么当它是 2 个不同的钥匙串项目时会引发错误，我到底如何让它按需要工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:49:05.877

您已经有一个带有“新”用户名和相同其他主键（帐户、服务等）的钥匙串项，但它不是您要更新的项。因此，更新的项目与旧项目发生冲突，您得到 –25299。

您可以使用 SecItemCopyMatching 添加一些调试代码（请求数组结果）并查看。

如果您确定不想要旧项目，请将其删除。如果你这样做了，那么你需要一个新的命名方案。

# html - 为什么这个带有前置标签的代码不滚动？

> ID：15639600
> 
> 赞同：1
> 
> 时间：2013-03-26T14:29:00.097
> 
> 标签：html, css, pre

在我的博客中，`code`标签中的`pre`标签不会滚动。为什么？

HTML 代码：

```
<pre class="source-code"><code>sudo apt-get install git cmake build-essential libgcrypt11-dev libjson0-dev libcurl4-openssl-dev libexpat1-dev libboost-filesystem-dev libboost-program-options-dev binutils-dev</code></pre> 
```

CSS：

```
pre.source-code {
  font-family: Andale Mono, Lucida Console, Monaco, fixed, monospace; 
  color: #000000;
  background-color: #eee;
  font-size: 12px;
  line-height: 14px;
  padding: 5px;
  overflow-x: scroll;
  width: 100%;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T14:41:20.353

用于`overflow-wrap: normal`防止行自动换行。不知道为什么它`word-break`默认打开。

# html - 排序输入对话框，HTML

> ID：15639601
> 
> 赞同：-1
> 
> 时间：2013-03-26T14:29:10.647
> 
> 标签：html, forms

```
<form>
    First name: <input type="text" name="firstname"><br>
    Last name: <input type="text" name="lastname"><br>
    Email address: <input type="text" name="emailAddress">
</form> 
```

如何格式化输入字段以相互对齐？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:40:04.453

您可以将输入的相应标题包装在`<label>`-s 中，除了它具有更多语义意义之外，它还允许您按照您想要的方式设置所有内容：

***HTML***

```
<form>
    <label for="...">First name:</label> <input type="text" name="firstname"><br>
    <label for="...">Last name:</label> <input type="text" name="lastname"><br>
    <label for="...">Email address:</label> <input type="text" name="emailAddress">
</form> 
```

***CSS***

```
label {
    display: inline-block;
    width: 100px;
} 
```

[**演示**](http://jsfiddle.net/9XA2T/)

# reporting-services - 如何将一个字段值从我的父报表传递到一个子报表？

> ID：15639602
> 
> 赞同：1
> 
> 时间：2013-03-26T14:29:11.027
> 
> 标签：reporting-services, parameters, subreport

我想做的应该很简单。我以前从未使用过 SSRS 变量，这可能是一个非常好的解决方案。但这目前对我不起作用。我有一份带有几个子报告的父报告。父报表仅返回 6 列，在这种情况下，仅返回 2 行。在这两行中都有一个名为 Program 的列，它恰好是两行的相同值。现在我想将此 Program 值传递给我的一个子报表。我不知道为什么 SSRS 不让我传递这个值，但是当我为这个子报表配置参数值时，我选择了父数据集和这个 Program 字段。但是当我尝试运行父报告时，这个子报告有错误：

```
Data retrieval failed for the subreport, 'Subreport1', located at: /Incoming/Risk Assessment 25mar13\. Please check the log files for more information. 
```

所以我想我会自己测试这个子报告，看看它是否是问题所在。但是，当我使用来自父报告的程序值运行此子报告（风险评估 25mar13）时，它生成了 0 条记录。但是，当我改为选择“所有”程序时，此子报表确实显示了数据。如何将值从父报表数据集传递到这些子报表之一？我为子报表上的 Program 参数值尝试了这个表达式：

```
=Fields!program_providing_service.Value 
```

但是父报表还是有这个错误或者超时。尽管当我使用相同的 Program 值运行此子报表时，它仅在几秒钟内呈现。所以我不认为子报告是问题所在。

另一个注意事项是父报表有一个 tablix。此 tablix 有一个行组，覆盖整个 tablix。这个sureport占据了这些tablix行之一。此行组在“event_log_id”字段上的父报表数据集的字段上分组。但是，此子报告没有 event_log_id 作为其参数值之一。

但父报表数据集确实具有发送到子报表的其他值，包括程序字段值。而且我知道我正在将正确的值从父报表发送到此子报表，因为我在父报表的文本框中创建了表达式以显示父数据集中的第一个字段记录。除了一个 DATETIME 值之外，这些字段记录都是 UNIQUEIDENTIFier 值。

我还尝试将子报表参数值设置为：

```
=First(Fields!program_providing_service.Value, "DataSetName") 
```

对于每个参数，因为父数据集中有多个记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T17:29:04.863

在两个报告上设置一个通用参数。如果您使用某个 Team 作为参数。当您在报告中保留子报告时

转到子报表属性 ---> 参数 -> 添加参数 用值命名确切的参数。然后单击确定。

这将使报告运行

# java - 在具有固定纵横比的虚拟屏幕分辨率上处理输入

> ID：15639603
> 
> 赞同：0
> 
> 时间：2013-03-26T14:29:16.000
> 
> 标签：java, android, libgdx

我在我的相机上使用具有固定纵横比的虚拟屏幕分辨率。初始化看起来像这样：

```
this.cam = new OrthographicCamera(Config.VIRTUAL_VIEW_WIDTH,
                Config.VIRTUAL_VIEW_HEIGHT);
        this.cam.setToOrtho(false, Config.VIRTUAL_VIEW_WIDTH,
                Config.VIRTUAL_VIEW_HEIGHT);
        // create our stage
        this.stage = new Stage(0, 0, true);
        this.stage.clear(); // always clear the stage too to not get double
                            // stuff in a stage

        stage.setCamera(cam);
//some more stuff
@Override
    public void resize(int width, int height) {
        // this.cam.setToOrtho(false, width, height);

        // calculate new viewport
        float aspectRatio = (float) width / (float) height;
        float scale = 1f;
        Vector2 crop = new Vector2(0f, 0f);

        if (aspectRatio > Config.ASPECT_RATIO) {
            scale = (float) height / (float) Config.VIRTUAL_VIEW_HEIGHT;
            crop.x = (width - Config.VIRTUAL_VIEW_WIDTH * scale) / 2f;
        } else if (aspectRatio < Config.ASPECT_RATIO) {
            scale = (float) width / (float) Config.VIRTUAL_VIEW_WIDTH;
            crop.y = (height - Config.VIRTUAL_VIEW_HEIGHT * scale) / 2f;
        } else {
            scale = (float) width / (float) Config.VIRTUAL_VIEW_WIDTH;
        }

        float w = (float) Config.VIRTUAL_VIEW_WIDTH * scale;
        float h = (float) Config.VIRTUAL_VIEW_HEIGHT * scale;
        viewport = new Rectangle(crop.x, crop.y, w, h);
    } 
```

渲染本身很短：

```
@Override
public void render(float delta) {
    cam.update();
    // setting the viewport
    Gdx.gl.glViewport((int) viewport.x, (int) viewport.y,
            (int) viewport.width, (int) viewport.height);
    // the following code clears the screen with the given RGB color (black)
    Gdx.gl.glClearColor(0f, 0f, 0f, 1f);
    Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);

    // update and draw the stage actors
    stage.act(delta);
    stage.draw(); 
```

这真的很好，我可以使用我的虚拟分辨率。但是我遇到了触摸板的问题。我只是这样初始化它：

```
Gdx.input.setInputProcessor(stage);

skin = new Skin();
        skin.add("knob", new Texture("touchpad/touchKnob.png"));
        skin.add("background", new Texture("touchpad/touchBackground.png"));

        style = new TouchpadStyle();
        // skin.add
        style.knob = skin.getDrawable("knob");
        style.background = skin.getDrawable("background");

        pad = new Touchpad(10, style);
        pad.setBounds(0, Config.VIRTUAL_VIEW_HEIGHT - 150, 150, 150);
        this.stage.addActor(pad); 
```

如果屏幕不适合虚拟屏幕，它不会对触摸做出正确反应，甚至不会做出反应，因为垫子位于左上边缘，但实际上位于虚拟凸轮上。

任何建议如何解决？

这是它的图片。您看到的区域永远不会改变，因此您始终可以看到整个地图。我为触摸板“所在”的区域着色。菜单中的按钮也有同样的问题。

![在此处输入图像描述](../Images/235cef30c8274d8b1d7f455a9f7e8c57.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:20:34.563

在其他论坛的帮助下自己解决了这个问题。我更改了调整大小的方法，以便相机缩小/缩小：

```
@Override
    public void resize(int width, int height) {
        cam.viewportHeight = height;
        cam.viewportWidth = width;
        if (Config.VIRTUAL_VIEW_WIDTH / cam.viewportWidth < Config.VIRTUAL_VIEW_HEIGHT
                / cam.viewportHeight) {
            cam.zoom = Config.VIRTUAL_VIEW_HEIGHT / cam.viewportHeight;
        } else {
            cam.zoom = Config.VIRTUAL_VIEW_WIDTH / cam.viewportWidth;
        }
        cam.update(); // update it ;)
    } 
```

# java - 如何检查我要添加的 jTable 中是否存在值？

> ID：15639611
> 
> 赞同：2
> 
> 时间：2013-03-26T14:29:31.620
> 
> 标签：java, swing, jtable

如何检查`jTable`我尝试添加的值是否`jField`存在？我正在使用`Vector<Object>`.`jTable`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:46:22.810

`JTable`不提供此功能。

`JTable`只是表模型的可视化。您的数据模型应该具有您需要的业务功能，例如告诉您是否存在条目。您将数据模型包装在`TableModel`可以由`JTable`. 然后，您只需操作您的数据模型。这是`contains`应该存在（或类似）方法的地方。如果您的数据模型是`Set`内置的。

为方便起见，数据模型和`TableModel`可以是同一个对象，有时它是合适的。但是仅仅使用 a`Vector`并不是一个好主意。可悲的是`JTable`，有一些方便的方法允许对静态数据进行此操作。

只需`TableModel`在`AbstractTableModel`. 请参阅[JTable 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-02T09:14:37.217

这应该这样做。

```
public boolean existsInTable(JTable table, Object[] entry) {

    // Get row and column count
    int rowCount = table.getRowCount();
    int colCount = table.getColumnCount();

    // Get Current Table Entry
    String curEntry = "";
    for (Object o : entry) {
        String e = o.toString();
        curEntry = curEntry + " " + e;
    }

    // Check against all entries
    for (int i = 0; i < rowCount; i++) {
        String rowEntry = "";
        for (int j = 0; j < colCount; j++)
            rowEntry = rowEntry + " " + table.getValueAt(i, j).toString();
        if (rowEntry.equalsIgnoreCase(curEntry)) {
            return true;
        }
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T14:54:25.443

`Vector<Object>`为 JTable 制作了一个非常糟糕的模型！

您应该编写自己的模型类，可能从 javax.swing.table.AbstractTableModel 派生，类似于

```
public class FooModel extends javax.swing.table.AbstractTableModel {

  // AbstractTableModel
  public int getRowCount() { //TBD }

  public int getColumnCount() { //TBD } 

  public Object getValueAt(int row, int column) { //TBD }

  // Insert a value into model only if not exists yet

  public void insertData(String something) throws AlreadyExistsException {

      // Check if element already in model
      // Either throw exception or update model
      // Dont forget to call fireTableRowsInserted() !

  } 
```

}

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T13:49:55.127

像这样完成了我的问题！

```
private boolean isEntry(String name, String size) {
    int rowCount = jTable.getRowCount();
    String row = null, tname = null, tsize = null, input = name + "|" + size;
    for (int i = 0; i < rowCount - 1; i++) {
        tname = (String) jTable.getValueAt(i, 0);
        tsize = (String) jTable.getValueAt(i, 2);
        row = tname + "|" + tsize;
        if (input.equalsIgnoreCase(row)) {
            return true;
        }
    }
    return false;
} 
```

# c# - 如何使用 xpath 从 xml 中检索元素值？

> ID：15639617
> 
> 赞同：2
> 
> 时间：2013-03-26T14:29:51.913
> 
> 标签：c#, asp.net, xml, xpath

如何从下面的 xml 中检索站点名称元素值？

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Header>
    <To s:mustUnderstand="1" xmlns="http://schemas.microsoft.com/ws/2005/05/addressing/none">http://localhost:63630/Service.svc</To>
    <Action s:mustUnderstand="1" xmlns="http://schemas.microsoft.com/ws/2005/05/addressing/none">http://tempuri.org/IService/GetDemographic</Action>
  </s:Header>
  <s:Body>
    <GetDemographic xmlns="http://tempuri.org/">
      <userIdentifier>first value</userIdentifier>
      <sitename>second value</sitename>
      <demographicName>third value</demographicName>
    </GetDemographic>
  </s:Body>
</s:Envelope> 
```

我尝试的以下代码返回null：

```
var xmlDocument = new XmlDocument();
xmlDocument.LoadXml(myXml);
var result = xmlDocument.SelectNodes("//sitename"); 
```

问题是 Xml 命名空间吗？我可以搜索而不考虑名称空间值，因为 sitename 元素没有分配给它的名称空间吗？

我发现下面的代码可以正常工作：

```
xmlDocument.SelectNodes("//*[local-name()='sitename']"); 
```

如何使其不区分大小写？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T21:53:17.750

我有一个类似的问题。我能够通过使用命名空间管理器添加命名空间来解决它。

这是一个类似的问答：（[在 C# 中使用具有默认命名空间的 Xpath](https://stackoverflow.com/questions/585812/using-xpath-with-default-namespace-in-c-sharp)）

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:46:15.363

尝试查看这些链接；）

.NET 中不区分大小写的 XPath：http: [//blogs.msdn.com/shjin/archive/2005/07/22/442025.aspx](http://blogs.msdn.com/shjin/archive/2005/07/22/442025.aspx)

使用 XPath 通过 MSXML 执行不区分大小写的搜索：http: [//support.microsoft.com/kb/315719](http://support.microsoft.com/kb/315719)

例如 ：

```
XMLDoc.SelectNodes("Cars/car[contains(.,'Protan')]") 
```

上述选择的结果应与本次选择的结果相同

```
XMLDoc.SelectNodes("Cars/car[contains(.,'protan')]")' 
```

# java - 带有onClick事件的可绘制资源的android数组

> ID：15639618
> 
> 赞同：0
> 
> 时间：2013-03-26T14:29:52.807
> 
> 标签：java, android, arrays, android-resources

好的，所以我有我的数组，我正在调用我的数组，但它不会更新画布的背景？我究竟做错了什么？也许一些教程链接在这里会有所帮助。谢谢。

```
 int[] myImageList = {
            R.drawable.lettersa, R.drawable.lettersb,
            R.drawable.lettersc, R.drawable.lettersd,
            R.drawable.letterse, R.drawable.lettersf, R.drawable.lettersg,
            R.drawable.lettersh, R.drawable.lettersi, R.drawable.lettersj,
            R.drawable.lettersk, R.drawable.lettersl, R.drawable.lettersm,
            R.drawable.lettersn, R.drawable.letterso, R.drawable.lettersp,
            R.drawable.lettersq, R.drawable.letterss, R.drawable.letterst,
            R.drawable.lettersu, R.drawable.lettersv, R.drawable.lettersw,
            R.drawable.lettersx, R.drawable.lettersy, R.drawable.lettersz};

                 mNextBtn.setOnClickListener(new OnClickListener() {
                    public void onClick(View v) {
                        // TODO Auto-generated method stub
                        int i;
                        if (mNextBtn.equals(mNextBtn)) {

                            for   (i=0;i<myImageList.length;i++)
                            {
                                         mSCanvas.setBackgroundResource(i);
                            }

                            return;
                        }   

                        mNextBtn.setEnabled(mSCanvas.isUndoable());
                        }

                }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:34:14.010

> 基本上我希望画布背景更改为单击按钮后要跟踪的下一个字母

我推荐一种不同的方法：

```
mNextBtn.setOnClickListener(new OnClickListener() {
    int i = 0;
    public void onClick(View v) {
        mSCanvas.setBackgroundResource(myImageList[i]);
        i++;
        if(i >= myImageList.length)
             i = 0;

        // I'm not sure what you want to do here, so I left it:
        mNextBtn.setEnabled(mSCanvas.isUndoable());
        return;
    }
}); 
```

我改变了三个要点：

1.  一次只设置一个背景资源，循环在几毫秒内设置每个背景资源，并始终为您留下最后一个值。
2.  可绘制资源`myImageList[i]`不在`i``mSCanvas.setBackgroundResource()`
3.  我不知道这`mNextBtn.equals(mNextBtn)`是假的任何情况...

# javascript - 获取所有选中复选框的值并将它们放在隐藏字段中

> ID：15639623
> 
> 赞同：0
> 
> 时间：2013-03-26T14:30:07.397
> 
> 标签：javascript, jquery

如何修改这个简单的检查所有代码以在检查复选框后获取复选框的所有值，然后将它们放入隐藏输入中，每个值应该用逗号分隔，这样我就可以在 php.ini 中分解这些值。复选框位于表格行内

```
//checks all and unchecks all checkboxes based on checkbox in first row of the table.
 $('th input:checkbox').click(function(e) {
    var table = $(e.target).parents('table:first');
    $('td input:checkbox', table).attr('checked', e.target.checked);

 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:43:18.403

你可以这样做：

```
$('th input:checkbox').click(function(e) {

   var currentChecked = $('#hiddenInput').val(); 

   if($(this).is(':checked'){
        $('#hiddenInput').val(currentChecked  + ',' + $(this).val());
   }

   //deleting the unchecked checkbox from the list
   else{
       var newValue = currentChecked .replace("," + $(this).val(), "");
   }

}); 
```

活生生的例子：http: [//jsfiddle.net/mR85S/](http://jsfiddle.net/mR85S/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:30:52.850

这有帮助吗？

```
$('th input:checkbox').click(function (e) {
    var table = $(e.target).parents('table:first');
    var vals = [];
    $('td input:checkbox', table).each(function(){
        $(this).attr('checked', e.target.checked);
        vals.push($(this).attr('checked') ? $(this).val() : '');
    });
    $('#hidden').val(vals.join());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T14:45:38.853

你可以在这篇文章 jQuery 中尝试这样[来填充隐藏的输入但保留现有的内容](https://stackoverflow.com/questions/13341313/jquery-to-populate-hidden-input-but-retain-existing-content)：

> ```
> function Populate(){
>     vals = $('input[type="checkbox"]:checked').map(function() {
>         return this.value;
>     }).get().join(',');
>     console.log(vals);
>     $('#tags').val(vals);
> }
> 
> $('input[type="checkbox"]').on('change', function() {
>     Populate()
> }).change(); 
> ```
> 
> 和[jsFiddle](http://jsfiddle.net/sushanth009/YANTh/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T14:46:12.947

我假设您的代码已经可以检查所有这些复选框。基本上，您只想获取您选中的每个复选框的值。

```
//checks all and unchecks all checkboxes based on checkbox in first row of the table.
 $('th input:checkbox').click(function(e) {
    var table = $(e.target).parents('table:first');
    var checkboxes = $('td input:checkbox', table).attr('checked', e.target.checked);
    var values = '';
    if(e.target.checked) {
       for(var i=0; i<checkboxes.length; i++) {
          values += $(checkboxes[i]).val() + ','; // the val method cant retrieve all the values of a set
       }
       values = values.substr(0, values.length - 1);
    }

    //place values in your hidden input

 }); 
```

这应该够了吧。

# sql - 将 int 转换为适用于 SQL Server 和 MS-Access 的 varchar

> ID：15639626
> 
> 赞同：7
> 
> 时间：2013-03-26T14:30:14.680
> 
> 标签：sql, sql-server, ms-access-2007

我必须创建一个与 SQL Server 和 MS-Access 兼容的查询。

问题是在 SQL Server 中我尝试将数字转换为 varchar。在 SQL Server 中，我可以像这样进行转换：`convert(varchar(100), 5)`在 MS Access 中：`CStr(5)`。

是否有可能为这两个数据库兼容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T14:32:31.000

在 SQL Server 中，您可以编写一个用户定义的标量函数，调用`CStr()`该函数进行转换。

内置例程不兼容。

不幸的是，这不会真正起作用，因为您需要在函数前面加上一个模式名称。因此，您可以拥有：

```
create function cstr(@val int)
returns varchar(255) as
begin return(cast(@val as varchar(255))) end; 
```

但是您必须将其称为：

```
select dbo.cstr(4); 
```

如果值在列中，则考虑在每个数据库中的表上编写一个视图，该视图在视图中进行转换。

要让 VB 同时使用 Access 和 SQL Server，您可以放弃 Access 并使用真正的数据库。哦，我想这不是一个解决方案；）您将需要识别数据库的类型并为每个数据库设置不同的代码。您可以通过使用视图隐藏一些丑陋来最小化这种情况。

您可能会发现切换到 SQL Server 2012 是有利的，它扩展了其功能库以包含一些 Access 功能。但不是`cstr()`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T16:05:49.363

我们可以将 varchar 中的数字转换为：

```
 select format(Adress_ID,'0') ... next code 
```

此代码将从 Access 和 SQL Server 两者转换

# html - 在网页中定义多个区域（没有多边形）

> ID：15639637
> 
> 赞同：0
> 
> 时间：2013-03-26T14:30:57.463
> 
> 标签：html, css, css-shapes

我想知道是否可以在网页中定义多个区域。我不是在谈论经典的矩形分割（由“div”制作），而是更多：定义各种形状的区域，也许不是多边形，例如，如下图所示。

![以非多边形形状划分的网页](../Images/d9d86b423c918b32a9b8c1a570b2e9cb.png)

我不知道很多事情：

*   我不知道这是否可能；
*   根据GUI创建理论，我不知道这是否是一个好习惯；
*   我不知道，如果可以构建这样的东西，它是否也与大多数浏览器兼容（我不介意）。

建立一个这样的页面，也许，是一件疯狂的事情，在我没有经验的情况下，我不知道。我只是想从这个意义上理解 html 和 css 的潜力和局限性。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-20T15:29:43.393

您可以通过这种方式使用 CSS 创建圆形 DIV（例如）：

```
.circle {
    border-radius: 50%;
}

.circle1 {
    width: 100px;
    height: 100px;
    background: yellow;
    border: 3px solid red;
}
.circle2 {
    width: 50px;
    height: 50px;
    background: #ccc;
    border: 3px solid #000;
} 
```

并在您的 DIV 中使用此 CSS：

```
<div class="circle circle1"></div>

<div class="circle circle2"></div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T15:15:12.703

这样做的老派方式......图像地图，但整个网站不可行的标准是afaik

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T15:05:15.953

大多数元素都是矩形，但是有一些选项，比如“border-radius”，可以让元素看起来和表现得像一个圆。只需谷歌搜索“CSS Circles”；你会发现这样的博客：http: [//davidwalsh.name/css-circles](http://davidwalsh.name/css-circles)

另一种更复杂、更强大的方法是在 HTML5 中使用“画布”。您可以定义您的自定义形状，只需查找此站点：[http ://www.w3schools.com/html/html5_canvas.asp](http://www.w3schools.com/html/html5_canvas.asp)

最后但同样重要的是，您可以使用 SVG 图像。我不知道你要做什么，但在某些情况下（仅用于显示没有交互的可缩放元素）它工作得很好。

# sql - 在计算中使用聚合函数的结果

> ID：15639648
> 
> 赞同：0
> 
> 时间：2013-03-26T14:31:27.797
> 
> 标签：sql, sql-server

我需要在计算中使用聚合函数的结果。假设我需要使用 MAX 函数并将其添加到另一个字段。

我发现的一种方法是使用派生表：

```
SELECT DerivedTable.MaxValue, TableA.Col2 + DerivedTable.MaxValue FROM (
SELECT ID, MAX(Col1) AS MaxValue FROM TableA
) As DerivedTable 
INNER JOIN TableA ON DerivedTable.ID=TableA.ID 
```

有没有办法在单个 Select 语句中做到这一点？

TIA。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:36:25.820

在 SQL Server 2005+ 中，您可以使用`OVER()`：

```
SELECT MAX(Col1) OVER(PARTITION BY ID) MaxValue, 
       Col2 + MAX(Col1) OVER(PARTITION BY ID)
FROM TableA 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:37:14.607

这使用子选择而不是直接派生表。

```
select TableA.Col2 + (select max(col1) from tablea t2 where t2.id = tablea.id group by t2.id)
    from TableA 
```

# java - 在 Java 中的 Deque 上插入

> ID：15639651
> 
> 赞同：4
> 
> 时间：2013-03-26T14:31:32.717
> 
> 标签：java, deque, insertion

当本教程提到以下解释时，我想知道[本教程的含义。](http://docs.oracle.com/javase/tutorial/collections/interfaces/deque.html)特别是我以粗体突出显示的部分。

> ## 插入
> 
> `addfirst`和方法在实例的`offerFirst`开头插入元素。实例末尾的`Deque`方法`addLast`和插入元素。**当** **实例的容量受到限制时，首选方法是****and** **因为****如果它已满，可能无法抛出异常。**`offerLast``Deque`**`Deque``offerFirst``offerLast``addFirst`**

1.  为什么首选 offerFirst？
2.  如果 addFirst 已满，为什么会无法抛出异常？如果它保证在这种情况下抛出异常不是更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:36:52.050

我认为这两种方法都是合法的（尽管 offerXXX 方法更可能用于有界出队）。

如果您的代码假设队列中有可用空间，并且此假设对代码的正确性至关重要，请使用 addFirst/addLast。抛出的运行时异常 (IllegalStateException) 非常适合这个 bug 场景。

另一方面，如果一个完整的队列是一种正常情况，请不要使用异常来处理它。使用 offerFirst/offerLast，并检查返回值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:42:51.193

如果双端队列有达到容量的风险，OfferFirst 是首选方法。如果已达到容量 addFirst 将抛出异常，其中 offerFirst 返回一个布尔值 (true/false) 以指示添加是否成功。offerFirst 在此双端队列的前面插入指定元素，除非它违反容量限制。当使用容量受限的双端队列时，此方法通常优于 addFirst(E) 方法，后者仅通过抛出异常可能无法插入元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T14:43:27.237

为什么在使用受限版本时您不希望在添加元素失败时引发异常。这是因为您会预料到会出现一些失败，这就是您提供添加而不是坚持添加的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T15:01:59.007

这意味着`offerXXX`方法返回`boolean`，而`addXXX`方法不返回。

因此，建议您使用`offerXXX`并检查布尔值是否成功，而不是期望任何一种方法都会引发异常。

这是非常糟糕的措辞。Javadoc 也是如此。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-26T14:34:22.627

根据[文档](http://docs.oracle.com/javase/6/docs/api/java/util/Deque.html#offerFirst%28E%29)：

**报价第一：**

*`Inserts the specified element at the front of this deque unless it would violate capacity restrictions. When using a capacity-restricted deque, this method is generally preferable to the addFirst(E) method, which can fail to insert an element only by throwing an exception.`*

这意味着如果您将 addFirst 与容量受限的双端队列一起使用，它可能会引发异常，但使用 offerFirst 不会引发任何异常。

**报价最后**

*`Inserts the specified element at the end of this deque unless it would violate capacity restrictions. When using a capacity-restricted deque, this method is generally preferable to the addLast(E) method, which can fail to insert an element only by throwing an exception.`*

同样，如果您将 addLast 与容量受限的双端队列一起使用，它可能会引发异常，但使用 offerLast 不会引发任何异常。

# sql - 如何将数据从一个表复制到另一台服务器上的另一个表？

> ID：15639654
> 
> 赞同：3
> 
> 时间：2013-03-26T14:31:34.733
> 
> 标签：sql, sql-server

我有一个简单的 SQL，在生产数据库上找到大约 3000 行：

```
SELECT *
FROM [CONTOSO].[BATID] (NOLOCK)
WHERE COMPANYNO = 1
AND MEASURINGPOINT = '592-98901_NPT'
AND TIMESERIESNO = 1
AND DATE_TIME >= '2013-01-31 23:00:00'
AND DATE_TIME <= '2013-02-28 22:59:00'
ORDER BY DATE_TIME 
```

有什么方法可以将输出转换为某种大的'INSERT INTO ....'-sql，将这些数据插入到同一个表中。然后我就可以轻松地将 sql 复制到另一个 SQL Server Management Studio 窗口并执行它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:34:48.707

如果您的服务器未连接，您可以使用[SSMS 导入/导出向导](http://msdn.microsoft.com/en-us/library/ms140052.aspx)。此导出会创建一个数据文件，然后您可以将其导入远程服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T14:32:55.907

利用`INSERT INTO..SELECT`

```
INSERT INTO TableName (collName1, colName2,...)
SELECT * -- this should match to the names of column define in the INSERT clause
FROM [CONTOSO].[BATID] (NOLOCK)
WHERE COMPANYNO = 1
AND MEASURINGPOINT = '592-98901_NPT'
AND TIMESERIESNO = 1
AND DATE_TIME >= '2013-01-31 23:00:00'
AND DATE_TIME <= '2013-02-28 22:59:00' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T14:39:14.983

如果您的 SQL 版本中可以使用 create table as select ，那么您可以使用以下命令：

```
Create table tab_name AS
 SELECT... your query... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T15:01:04.040

您还可以创建[链接服务器](http://msdn.microsoft.com/en-us/library/ms188279.aspx)，然后将数据从一个表复制到链接服务器上的另一个表。

```
sp_addlinkedserver  
  @server= N'NameofLinkedServer',
  @srvproduct= N'',
  @provider= N'SQLNCLI',
  @datasrc= N'YourRemoteServer';

sp_addlinkedsrvlogin
  @rmtsrvname = 'NameofLinkedServer' ,
  @useself = 'FALSE' ,
  @locallogin = 'local_login' ,
  @rmtuser = 'remote_login' ,
  @rmtpassword = 'remote_password' 
```

创建[链接服务器](http://msdn.microsoft.com/en-us/library/ms188279.aspx)后执行此 INSERT 语句

```
INSERT [NameofLinkedServer].[your_databaseName].[CONTOSO].[BATID](Column1, Column2, ...)
SELECT (Column1, Column2, ...)
FROM [CONTOSO].[BATID] (NOLOCK)
WHERE COMPANYNO = 1
AND MEASURINGPOINT = '592-98901_NPT'
AND TIMESERIESNO = 1
AND DATE_TIME >= '2013-01-31 23:00:00'
AND DATE_TIME <= '2013-02-28 22:59:00'
ORDER BY DATE_TIME 
```

有关详细信息，请参阅[**MSDN 文档**](http://msdn.microsoft.com/en-us/library/ms188279.aspx) 

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T14:51:18.157

SSMS Tools Pack 有一个很棒的 Generate Insert Statements 功能： [http](http://www.ssmstoolspack.com/) ://www.ssmstoolspack.com/ 它允许您轻松输入 where 子句来获取您想要导出的数据。这曾经是完全免费的，但如果与 SSMS 2012+ 一起使用，现在需要支付少量费用

如果你有更多的钱并且需要做很多这种事情，那么 Red Gate 的 SQL Data Compare 是一个很棒的工具： [https ://www.red-gate.com/products/sql-development/sql-data-compare /](https://www.red-gate.com/products/sql-development/sql-data-compare/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T14:51:49.870

您可以编写创建代码的代码。

我在这里为“MembershipProvider”数据库完成了它：http: [//granadacoder.wordpress.com/2007/11/29/membershipprovider-helper-to-transfer-data/](http://granadacoder.wordpress.com/2007/11/29/membershipprovider-helper-to-transfer-data/)

您可以根据需要进行修改。

注意双引号和单引号，他们会在计划中抛出一个活动扳手。

这是更大的代码示例的预览：

注意，它创建的代码可以在第二个 sql server 上运行。

```
 select 
    'INSERT INTO dbo.aspnet_Applications ( ApplicationName,LoweredApplicationName,ApplicationId,[Description] ) values ('  as [--Comment], 
    char(39) + t1.ApplicationName + char(39) ,  ',' , 
    char(39) + t1.LoweredApplicationName + char(39) ,  ',' , 
    char(39) + convert(varchar(38)  , t1.ApplicationId ) + char(39) ,  ',' , 
    char(39) + t1.Description + char(39) 
    , ')'
     FROM
        dbo.aspnet_Applications t1 
```

下面是一个 Northwind 示例，它处理 CompanyName 和 Address 列中的单引号，并对 PrimaryKey 进行“不存在”检查。请注意，此表没有任何整数/数字，但只需删除单引号即可。如果您想检查空值，这是一个简单的 case 语句，如传真列中所示。

```
Select 'INSERT INTO dbo.Customers ( CustomerID,CompanyName,ContactName,ContactTitle,[Address],City,Region,PostalCode,Country,Phone,Fax ) '   as [--Comment], 
'SELECT ' , 
char(39) + t1.CustomerID + char(39) ,  ',' , 
char(39) + REPLACE(t1.CompanyName , char(39) , char(39) + '+' + 'char(39)' + '+' +  char(39) ) + char(39) ,  ',' , 
char(39) + t1.ContactName + char(39) ,  ',' , 
char(39) + t1.ContactTitle + char(39) ,  ',' , 
char(39) + REPLACE(t1.[Address] , char(39) , char(39) + '+' + 'char(39)' + '+' +  char(39) ) + char(39) ,  ',' , 
char(39) + t1.City + char(39) ,  ',' , 
char(39) + t1.Region + char(39) ,  ',' , 
char(39) + t1.PostalCode + char(39) ,  ',' , 
char(39) + t1.Country + char(39) ,  ',' , 
char(39) + t1.Phone + char(39) ,  ',' , 
Fax = case
    when t1.Fax is null then 'null'
    else char(39) + t1.[Fax] + char(39) 
    end
, ' Where not exists (select null from dbo.Customers innerC where innerC.CustomerID = ' + char(39) + t1.CustomerID + char(39) + ')'
 FROM
dbo.Customers t1 
```

# matlab - 在matlab中四舍五入到最接近的0.5

> ID：15639655
> 
> 赞同：8
> 
> 时间：2013-03-26T14:31:36.593
> 
> 标签：matlab, math

如何在matlab中将小数四舍五入到最接近的0.5？例如，我希望将 16.625 四舍五入为 16.5

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-26T14:43:06.487

这是相同的逻辑，对[C#提出了相同的问题](https://stackoverflow.com/questions/1329426/how-do-i-round-to-the-nearest-0-5)

```
result = round(value*2)/2; 
```

概括地说，根据[aardvarkk](https://stackoverflow.com/users/618068/aardvarkk)的建议，如果你想四舍五入到最接近的精度`acc`，例如`acc = 0.5`：

```
acc = 0.5;
result = round(value/acc)*acc; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T14:42:25.087

如果你去乘以 2 - 轮 - 除以 2 路线，你可能会得到一些（非常小的）数字错误。您可以使用它`mod`来避免这种情况：

```
x = 16.625; 
dist = mod(x, 0.5); 
floorVal = x - dist; 
newVal = floorVal; 
if dist >= 0.25, newVal = newVal + 0.5; end 
```

你可以用更少的步骤来完成它，但在这里我已经分解了它，所以你可以看到每个步骤的作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T14:47:23.973

```
a=16.625;
b=floor(a);
if abs(a-b-0.5) <= 0.25
  a=b+.5;
else
  if a-b-0.5 < 0
    a=b;
  else
    a=b+1;
  end
end 
```

# c# - 如何为 sql 表达式编写 lambda 表达式？

> ID：15639656
> 
> 赞同：0
> 
> 时间：2013-03-26T14:31:38.693
> 
> 标签：c#, entity-framework, linq

我有一个 SQL 表达式

```
select S.SpecialtyName, COUNT(distinct SUC.SiteUserId) as Subscribers
from   SiteUserContent SUC Inner join 
       Specialties S on SUC.SpecialtyId = S.SpecialtyId Inner join 
        SiteUser SU on SUC.SiteUserId = SU.SiteUserId
where SU.DeletedFlag = 0
group by S.SpecialtyName
Order by S.SpecialtyName 
```

对应的 LINQ 表达式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:37:43.867

```
from suc in context.SiteUserContent
join s in context.Specialties on suc.SpecialtyId equals s.SpecialtyId
join su in context.SiteUser on suc.SiteUserId equals su.SiteUserId
where su.DeletedFlag == 0
select new { suc.SiteUserId, s.SpecialityName } into x
group x by x.SpecialityName into g
orderby g.Key
select new { 
    SpecialityName = g.Key, 
    Subscribers = g.Select(i => i.SiteUserId).Distinct().Count()
} 
```

生成的 SQL 不会相同，但我认为查询执行的结果应该相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:47:03.883

```
var results = contex.SiteUserContent
                    .Join(context.Specialties, suc => suc.SpecialtyId, s => s.SpecialtyId, (suc, s) => new { suc, s })
                    .Join(context.SiteUser, i = i.suc.SiteUserId, su => su.SiteUserId, (i, su) => new { suc = i.suc, s = i.s, su = su })
                    .Where(i => i.su.DeletedFlag == 0)
                    .GroupBy(i => i.s.SpecialtyName)
                    .Select(g => new {
                                     SpecialityName = g.Key,
                                     Subscribers = g.Select(i => i.suc.SiteUserId)
                                                    .Distinct()
                                                    .Count()
                                 })
                     .OrderBy(i => i.SpecialityName); 
```

# c++ - 在 C 语言中使用面向对象的风格是好还是坏？

> ID：15639659
> 
> 赞同：4
> 
> 时间：2013-03-26T14:31:52.040
> 
> 标签：c++, c, oop, microcontroller

我正在为 I/O 电路板编写 C 中的微控制器；它与运行用 C++ 编写的应用程序的计算机通信。我的伙伴正在编写 PC 代码，他帮助用 C 语言编写了 MCU 的初始通信例程。

最初的代码让我很困惑，因为它似乎是用面向对象的风格编写的，有很多传递结构、get() 和 set() 类型的例程等。

更高级的程序员在 C 中编写这样的代码是典型的吗？我是否应该尝试让我的其余代码也像这样更“面向对象”？

在 C 中使用静态全局变量和 get() set() 方法是否有益？还是应该留给面向对象的语言？

# php - 如何知道 UNION mysql 查询中的数据来自哪里

> ID：15639660
> 
> 赞同：3
> 
> 时间：2013-03-26T14:31:56.250
> 
> 标签：php, mysql, sql, union

我有这个mysql结果查询：

```
SELECT 
    * 
FROM 
   ( SELECT 
         * 
     FROM userA 
     UNION 
     SELECT 
         * 
     FROM userB 
     UNION 
     SELECT 
         * 
     FROM userC ) AS friendresult 
ORDER BY create_date DESC 
LIMIT 0 , 15 
```

为了检索数据，我使用了 mysql_fetch_array 但我想知道我获取的每一行的来源。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:33:28.413

您可以选择一个新列，以指示数据来自哪个表。就像是：

```
SELECT * 
FROM 
( 
    SELECT *, 'userA' AS ComesFrom FROM userA 
    UNION ALL
    SELECT *, 'userB'              FROM userB 
    UNION ALL
    SELECT *, 'userC'              FROM userC
) AS friendresult 
ORDER BY create_date DESC 
LIMIT 0 , 15 
```

# node.js - 如何指定 node.js npm 的包含和库路径

> ID：15639665
> 
> 赞同：4
> 
> 时间：2013-03-26T14:32:09.517
> 
> 标签：node.js, npm

我正在尝试使用 npm install 安装 node.js 模块（在本例中为 zmq）。此模块所需的 C 库未安装在标准位置。如何为 npm 指定额外的包含路径和库路径？我已经尝试过诸如“CFLAGS="-I/path/to/include" npm install" 之类的东西，但没有任何效果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-06T14:26:22.597

zeromq[模块](https://github.com/JustinTulloss/zeromq.node)可以如下构建（其他模块可能工作相同）：

*   下载 zip 文件并解压到一个临时位置，例如`/tmp/zeromq.node-master`
*   编辑`binding.gyp`文件
*   找到与您的操作系统对应的部分，并在那里添加您的包含`-I`和库`-L`路径。

例如

```
['OS=="linux"', {
  'cflags': [
    '<!(pkg-config libzmq --cflags 2>/dev/null || echo "")',
    '-I/usr/local/zeromq3/include'
  ],
  'libraries': [
    '<!(pkg-config libzmq --libs 2>/dev/null || echo "")',
    '-L/usr/local/zeromq3/lib'
  ],
}], 
```

*   在临时目录上运行 npm install： `npm install /tmp/zeromq.node-master`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-06T09:39:20.627

另一种解决方案（不需要任何文件更改）是使用 pkg-config 的`PKG_CONFIG_PATH`变量，它应该指向安装库的位置。如果 zmq 已经安装在`/opt/zmq`then`PKG_CONFIG_PATH=/opt/zmq/lib/pkgconfig pkg-config libzmq --libs`应该返回`-L/opt/zmq/lib -lzmq`并且`npm install`可以运行 `PKG_CONFIG_PATH=/opt/zmq/lib/pkgconfig npm install`

在节点应用程序启动之前`LD_LIBRARY_PATH`必须进行相应的设置，即：`LD_LIBRARY_PATH=/opt/zmq/lib node app.js`

# mercurial - Mercurial反斜杠正斜杠问题

> ID：15639666
> 
> 赞同：0
> 
> 时间：2013-03-26T14:32:13.437
> 
> 标签：mercurial, backslash

我们在 mercurial 中有一个使用 hg convert 创建的子存储库。大约三周以来，我们已经让人们修改和签入更改（在 Windows 下使用 Tortoise），然后我们才注意到我们有两个版本的原始转换文件：

例如

```
Dir\Project/FileName.ext
Dir/Project/FileName.ext 
```

我已经尝试过`hg rename`, `hg forget`, `hg remove`，但是当我们似乎总是以两个文件都消失或两个文件都存在时结束。我还查看了案例折叠建议，但它们似乎并不适用。

任何有关修复的建议将不胜感激。如果我们丢失了 \ 版本上的历史，那将不会是世界末日。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:23:22.937

我已经看到转换后的 SVN 存储库会发生这种情况（使用[hgsubversion](http://mercurial.selenic.com/wiki/HgSubversion)，但我敢打赌[`hg convert`](http://mercurial.selenic.com/wiki/ConvertExtension)有同样的问题）。在我看到的情况下，路径的 svn 属性发生了变化，这显然导致“包含反斜杠的文件名”（*不是*路径）存储在 svn 中。

在第一种情况下，我看到它是一个目录路径，导致我立即遇到问题 - 在 Windows 上使用该目录路径创建了一个零长度文件，然后在更新 Mercurial 中止，因为它无法创建目录同名。

我希望创建双重条目的序列类似于：

1.  更新到包含带反斜杠的文件路径的修订版

2.  新文件显示为未跟踪，因为 Mercurial 清单当前包含带有反斜杠的路径，但在查看工作目录时，它会将所有文件路径规范化为正斜杠 - 因此它不会出现在清单中。

3.  用户添加“新”文件。

4.  在随后的更新中，两个路径都会更新，但其中一个会覆盖工作目录中的另一个。如果你幸运的话，新版本就是最终在工作目录中的版本。

您可能无法在 Windows 上解决此问题，但您应该能够通过单引号文件名（例如`hg rm 'Dir\Project\FileName.ext'`. 如果您在 Linux 上更新到有问题的修订版，您应该会看到文件实际上命名`'Dir\Project\FileName.ext'`在工作目录的根目录中。

只需确保反斜杠版本是应该删除的版本 - 如果不是，您可能需要手动将它们合并在一起以获得您想要的结果。

# batch-processing - boto dynamodb：有没有办法优化批量写入？

> ID：15639667
> 
> 赞同：4
> 
> 时间：2013-03-26T14:32:21.687
> 
> 标签：batch-processing, boto, amazon-dynamodb

我正在将大量数据索引到 DynamoDB 并尝试批量写入以增加实际吞吐量（即使索引更快）。这是一段代码（[**这**](https://gist.github.com/griggheo/2698152)是原始来源）：

```
def do_batch_write(items,conn,table):
    batch_list = conn.new_batch_write_list()
    batch_list.add_batch(table, puts=items)
    while True:
            response = conn.batch_write_item(batch_list)
            unprocessed = response.get('UnprocessedItems', None)
            if not unprocessed:
                    break
            # identify unprocessed items and retry batch writing 
```

我正在使用 boto 2.8.0 版。如果`items`有超过 25 个元素，我会得到一个例外。**有没有办法增加这个限制？**另外，我注意到有时，即使`items`更短，它也无法一次处理所有这些。但是，这种情况发生的频率，或者尝试后有多少元素未处理，与`items`. **有没有办法避免这种情况并一次尝试编写所有内容？**现在，最终目标是加快处理速度，而不仅仅是避免重复，因此在连续尝试之间长时间休眠不是一种选择。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T15:15:23.293

从[文档](http://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_BatchWriteItem.html)中：

“BatchWriteItem 操作在一个或多个表中放置或删除多个项目。对 BatchWriteItem 的一次调用可以写入多达 16 MB 的数据，其中可以包含多达 25 个放置或删除请求。要写入的单个项目可以很大为 400 KB。”

有些不成功的原因可能是由于超出了表的预置吞吐量。您是否同时对表执行其他写入操作？您是否尝试过增加表上的写入吞吐量以查看是否处理了更多项目。

我不知道有任何方法可以增加每个请求 25 个项目的限制，但您可以尝试在 AWS 论坛或通过您的支持渠道提问。

我认为获得最大吞吐量的最佳方法是尽可能增加写入容量单元，并在多个线程或进程中并行化批量写入操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T12:55:20.033

根据我的经验，尝试使用批量写入或多线程优化写入吞吐量几乎没有什么收获。批量写入节省了一点网络时间，而多线程几乎没有节省，因为项目大小限制非常低，瓶颈通常是 DDB 限制您的请求。

所以（不管你喜不喜欢）增加你在 DynamoDB 中的写入容量是要走的路。

啊，就像 garnaat 所说，区域内的延迟通常与区域间或 AWS 外部的延迟确实不同（例如从 15 毫秒到 250 毫秒）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-02T14:33:00.393

不仅增加写入容量会使其更快。

如果您的 HASH KEY 多样性较差，那么即使您增加写入容量，也会出现吞吐量错误。

吞吐量错误取决于您的命中图。

例如：如果您的哈希键是 1-10 之间的数字，并且您有 10 条哈希值为 1-10 的记录，但有 10k 条值为 10 的记录，那么即使在增加写入容量时也会出现许多吞吐量错误。

# javascript - 如何在使用 input[type=text] 时使用 jquery 更改表单背景颜色；

> ID：15639668
> 
> 赞同：0
> 
> 时间：2013-03-26T14:32:27.987
> 
> 标签：javascript, jquery, css, forms

我知道我的标题有点混乱，也许有人可以提出不同的建议。

所以无论如何，我正在学习一些 Jquery，我想用它来进行表单验证，我会展示代码然后问这个问题。

形式：

```
<form action="" method="POST">
    <ul>
        <li>
            <label for="market_1">Market: </label>
            <input type="text" name="market_1" id="market_1" />
        </li>
   </ul>
</form> 
```

JS：

```
$(document).ready(function()
{
    $("#market_1").addClass("text_box_error");
}); 
```

CSS：

```
input[type="text"]
{
    background-color: rgba(255, 255, 255, 0.5);
    border: 1px solid #5B5B5B;
    width: 148px;
}

input[type="text"]:hover, input[type="text"]:focus 
{
    background-color: rgba(255, 255, 255, 1);
    border: 1px solid #5B5B5B;
    font-weight: bold;
}
.text_box_error 
{
    background-color: red;
} 
```

目前，我只是想让它在单击提交按钮时改变颜色。现在我可以让它工作，但是当我`input[type="text"]`用来设置输入框的样式时我不能让它工作。

我想通过这样做，我可以将所有输入框的样式设置为相同，然后使用 jquery addClass 方法我可以覆盖背景颜色。

那么，为什么这不适用于我向您展示的设置？

编辑：对不起，我已经更新了代码并在这里粘贴了错误的版本，我没有更新代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:46:14.407

这与[选择器特异性](http://www.w3.org/TR/CSS21/cascade.html#specificity)有关。

选择器`input[type="text"]`包含一个元素名称并引用一个属性，因此它的特殊性为`0,0,1,1`.

然而，选择器`.text_box_error`仅包含一个（类）属性，因此它具有特定性`0,0,1,0`- 因此它`background-color`会被具有更高特定性的另一个选择器覆盖。

只需`input[type="text"].text_box_error`用作选择器——它将具有特定性`0,0,2,1`，因此将“赢得”第一个选择器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T14:55:51.807

将您的 CSS 更改为：

```
input[type="text"].text_box_error
{
    background-color: red;
}

input[type="text"].text_box_error:hover
{
    background-color: rgba(255, 0, 0, .5);
} 
```

当文本框有错误和没有错误时，您可以正确设置两种情况的样式。

JSFiddle在这里：http: [//jsfiddle.net/5KjVC/](http://jsfiddle.net/5KjVC/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T14:36:21.570

这个选择器正在寻找类为 的元素`input_boxes`，但您的 HTML 中没有此类名称的元素。

```
$(".input_boxes") 
```

# css - CSS：子组合选择器 & :first-child?

> ID：15639671
> 
> 赞同：1
> 
> 时间：2013-03-26T14:32:38.557
> 
> 标签：css, css-selectors

我有`div`一些其他`div`的，一些段落和一些图像。它基本上看起来像这样：

```
<div id="parent">
    <div>
        This image is inside a div.
        <img src="http://www.placehold.it/100" alt="" />
    </div>
    <p>
        And this inside a paragraph.
        <img src="http://www.placehold.it/100" alt="" />
    </p>
    <img src="http://www.placehold.it/100" alt="" />
    <img src="http://www.placehold.it/100" alt="" />
</div> 
```

现在我只想选择没有嵌套在另一个`div`或`p`. 我正在使用子组合器选择器执行此操作：

```
#parent > img {
    border: 1px solid red;
} 
```

这可行，但现在我只想选择第一个非嵌套图像。我像这样尝试过，但没有任何结果：

```
#parent > img:first-child {
    border: 1px solid blue;
} 
```

[http://jsfiddle.net/vF2DU/](http://jsfiddle.net/vF2DU/)

我该怎么做？有没有办法不添加类或 id 之类的`#first`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T14:34:01.573

您可以使用`first-of-type`或`nth-of-type`选择器。

在这种情况下，`first-of-type`可能更相关，但我将向您展示以下两者的语法：

* * *

**关于第一类：**

> “ :first-of-type 选择器匹配每个元素，它是特定类型的第一个子元素，它的父元素。”

**第一类示例：**

```
#parent > img:first-of-type {
    border: 1px solid blue;
} 
```

这是一个关于您的用例的[工作 jsFiddle 。](http://jsfiddle.net/vF2DU/4/)`first-of-type`

* * *

**关于第 n 个类型：**

> “:nth-of-type(n) 选择器匹配其父元素的特定类型的第 n 个子元素。n 可以是数字、关键字或公式。”

**第 n 个类型的示例：**

```
#parent > img:nth-of-type(1) {
    border: 1px solid blue;
} 
```

这是一个关于您的用例的[工作 jsFiddle 。](http://jsfiddle.net/vF2DU/5/)`nth-of-type`

* * *

**支持：**

所有主流浏览器都支持这两种浏览器 - Chrome、Firefox、Opera 和 Internet Explorer（IE9 及更高版本）。如果您有兴趣让它们在 IE8 及之前的版本中完美运行，请查看[Selectivizr](http://selectivizr.com/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T14:36:53.933

`:first-child`表示**first-child**，不是第一个遇到的类型元素。你需要的是`:first-of-type`选择器。[工作示例](http://jsfiddle.net/vF2DU/3/)

# java - session.getServletContext() 和 session.getServletContext().getContext("/SampleProject") 的区别

> ID：15639673
> 
> 赞同：7
> 
> 时间：2013-03-26T14:32:40.243
> 
> 标签：java, tomcat, servlets

我在本地机器上运行了一个 Tomcat 6 实例。

我对其配置进行了以下更改：

*   在 /conf/ `context.xml`- 更改标签如下

    ```
    <Context crossContext="true"> 
    ```

*   在 /conf/ `server.xml` - 更改标签如下

    ```
    <Connector port="8080" protocol="HTTP/1.1" emptySessionPath="true"
           connectionTimeout="20000" 
           redirectPort="8443" /> 
    ```

假设我有一个名为`SampleProject.war`deploy here 的 WAR 文件，它提取到文件夹`SampleProject`。

在这个 WAR 的一些 servlet 中，比如说`SampleServlet`，我写了两个代码块，如下所示：

```
ServletContext context1 = session.getServletContext(); 
```

和

```
ServletContext context2 = session.getServletContext().getContext("/SampleProject"); 
```

`context1`和 和有什么不一样`context2`？我认为两者都指应用程序上下文。但是，如果我在 中设置一些属性`context1`并访问`context2`，我不会在 中获得值`context2`。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-02T20:26:57.313

我觉得你的问题有点被误解了，你已经对 API 有了基本的了解，即一旦网络应用程序设置了`crossContext="true"`它，它就可以`getContext()`用来访问与服务器上部署的其他一些网络应用程序相对应的上下文。

```
getServletContext().getContext() equals NULL unless <Context crossContext="true"> 
```

据我了解，您的问题实际上是`/SameWebApp`为什么

```
ServletContext context1 = session.getServletContext();
context1.setAttribute("contextAttribute", new Object());
ServletContext context2 = session.getServletContext().getContext("/SameWebApp");

System.out.println(context1.equals(context2)); // prints false, or 
System.out.println(context2.getAttribute("contextAttribute")); // prints null (at least they could have been clones) 
```

一言以蔽之，答案是“安全”。想象一下，如果您不能保证“adminEmail”上下文属性没有*被*具有`crossContext=true`. 一旦“忘记密码”请求出现，您的应用程序可能会帮助自己妥协！:)

## 深入了解 Tomcat 内部结构

Tomcat 7 提供了一个`class ApplicationContext implements ServletContext`从`getContext("/context-root")`as返回的

```
 if (context.getCrossContext()) {
        // If crossContext is enabled, can always return the context
        return child.getServletContext();
    } else if (child == context) {
        // Can still return the current context
        return context.getServletContext();
    } else {
        // Nothing to return
        return (null);
    } 
```

这里`context`属于当前的 web-app，`child`代表另一个 web-app。但是，等等，是什么让 Tomcat 称它为孩子？

这两个实际上不是一个类的`ApplicationContext`实例，它不是 servlet 特定的东西，而是为 web 应用程序（如 crossContext、主机名、mimeMappings 等）保存 Tomcat 特定的配置设置，因此它被称为上面的子级.`StandardContext``implements Context``StandardContext.getParent()``Container`

无论如何，我们感兴趣的情况是什么时候`child == context`为真，即`getContext()`在“/ ***SameWebApp*** ”上被调用。该调用被委派给`StandardContext.getServletContext()`已实现返回**不同实例**的`ApplicationContext`.

***这就是为什么你设置的属性`context1`在`context2`.***

但是等等，还有更多。为什么`StandardContext.getServletContext()`返回喜欢

```
return (context.getFacade()); 
```

一个 Tomcat 实例基本上执行两种类型的 Java 代码：

*   提供的容器，和
*   用户部署

容器代码是“受信任的”，有时可能需要以提升的权限运行。另一方面，用户代码不受信任，需要限制其破坏 Tomcat 内部。

Tomcat 为实现这一目标所做的其中一件事就是始终环绕`ApplicationContextFacade`（`ApplicationContext`因此也是`StandardContext`如此）。因此，回顾一下，看似简单的`ServletContext`实现实际上是`StandardContext`映射到 an`ApplicationContext`然后包装在`ApplicationContextFacade`.

有关如何将`ApplicationContextFacade`反射`Globals.IS_SECURITY_ENABLED`与`SecurityUtil.isPackageProtectionEnabled()`设置结合使用的更多信息，请查看[为什么 Servlet 通过](https://stackoverflow.com/questions/9550804/why-do-servlets-access-the-tomcat-applicationcontext-servletcontext-indirectly)SO 上的 Facade 访问 Tomcat ApplicationContext。

参考：
[Tomcat 7 源代码（下载链接）](http://apache.cs.utah.edu/tomcat/tomcat-7/v7.0.39/src/apache-tomcat-7.0.39-src.zip)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T03:14:28.890

Absolutely those two context objects are different from another.. Context1 object gives current web application servlet context obj. ( ServletContext context1 = session.getServletContext();)

and

context2 object gives the servletcontext obj of specified web application (ServletContext context2 = session.getServletContext().getContext("/SampleProject");)

you are setting object in one context and trying to retrieve using another context, so it is not possible to get attribute from another web application context by putting it in current application context. But you can get attribute resides in another web application context by using second method.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-02T05:12:05.420

想想 OO 和 Java EE 平台标准 + 安全性。

第一次调用返回当前应用程序的*最终*servlet 上下文，支持所有操作。

第二个调用返回可以用于任何应用程序的 servlet 上下文的*副本。*正如 javadoc 中所说（相当模糊！），它的目的是让您获得 a `RequestDispatcher`，以便您可以分派到其他应用程序的页面。另一个主要但隐含的要求是安全地执行此操作并尊重 Java EE 规范，这些规范不允许在应用程序之间共享会话状态或 servlet 上下文。想象一下，如果“流氓应用程序 B”可以通过蛮力更改（或读取）Servlet 上下文数据，它会对“好的应用程序 A”造成可怕的损害。这就是为什么它是一个副本。

因此，在副本上设置属性不会导致对原件的更改。您可能会争辩说副本应该抛出一些“不支持的操作异常”。或者，您可以争辩说 getRequestDispatcher 应该重构为另一个类，或者允许传入 App Context URL。...但是，不幸的是，这些都不是真的。乙^)

# replace - 序言替换

> ID：15639686
> 
> 赞同：1
> 
> 时间：2013-03-26T14:33:05.460
> 
> 标签：replace, prolog, substitution

如何将一个列表替换为另一个包含要替换的变量的列表。例如

```
rep([x, d, e, z, x, z, p], [x=z, z=x, d=c], R).
R = [z, c, e, x, z, x, p] 
```

x 到 z 和 z 被替换后不会改变。

到目前为止，我只做了一个没有清单的

```
rep([], _, []).
rep(L1, H1=H2, L2) :-
   rep(L1, H1, H2, L2).

rep([],_,_,[]).
rep([H|T], X1, X2, [X2|L]) :-
   H=X1,
   rep(T,X1,X2,L),
   !.
rep([H|T],X1,X2,[H|L]) :-
   rep(T,X1,X2,L). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:47:28.097

You should attempt to keep the code simpler than possible:

```
rep([], _, []).
rep([X|Xs], Vs, [Y|Ys]) :-
   ( memberchk(X=V, Vs) -> Y = V ; Y = X ),
   rep(Xs, Vs, Ys). 
```

Of course, note the idiomatic way (thru memberchk/2) to check for a variable value.

Still yet a more idiomatic way to do: transforming lists it's a basic building block in several languages, and Prolog is no exception:

```
rep(Xs, Vs, Ys) :- maplist(repv(Vs), Xs, Ys).
repv(Vs, X, Y) :- memberchk(X=V, Vs) -> Y = V ; Y = X . 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:12:18.753

[如果你使用 SWI-Prolog，在那里找到](http://www.complang.tuwien.ac.at/ulrich/Prolog-inedit/lambda.pl)模块 lambda.pl：http://www.complang.tuwien.ac.at/ulrich/Prolog-inedit/lambda.pl你可以写：

```
:- use_module(library(lambda)).

rep(L, Rep, New_L) :-
    maplist(\X^Y^(member(X=Z, Rep)
              ->  Y = Z
              ;   Y = X), L, New_L). 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-23T14:07:09.423

让我们通过将“递归部分”移动到[meta-predicate](/questions/tagged/meta-predicate "show questions tagged 'meta-predicate'")来改进[这个答案](https://stackoverflow.com/a/31586966/4609915)： `find_first_in_t/4`

```
:- meta_predicate find_first_in_t(2,?,?,?).
find_first_in_t(P_2,X,Xs,Truth) :-
   list_first_suchthat_t(Xs,X,P_2,Truth).

list_first_suchthat_t([]    ,_, _ ,false).
list_first_suchthat_t([E|Es],X,P_2,Truth) :-
   if_(call(P_2,E),
       (E=X,Truth=true),
       list_first_suchthat_t(Es,X,P_2,Truth)). 
```

为了填补“缺失的点点滴滴”，我们定义`key_pair_t/3`：

```
key_pair_t(Key,K-_,Truth) :-
   =(Key,K,Truth). 
```

基于`find_first_in_t/4`and `key_pair_t/3`，我们可以`assoc_key_mapped/3`这样写：

```
assoc_key_mapped(Assoc,Key,Value) :-
   if_(find_first_in_t(key_pair_t(Key),_-Value,Assoc),
       true,
       Key=Value). 
```

那么，OP 的用例是否仍然有效？

```
?- maplist(assoc_key_mapped([x-z,z-x,d-c]), [x,d,e,z,a,z,p], Rs).
Rs = [z,c,e,x,a,x,p].                            % OK. same result as before 
```

* * *

**建立在`find_first_in_t/4`**

```
memberd_t(X,Xs,Truth) :-                        % memberd_t/3
   find_first_in_t(=(X),_,Xs,Truth).

:- meta_predicate exists_in_t(2,?,?).           % exists_in_t/3
exists_in_t(P_2,Xs,Truth) :-
   find_first_in_t(P_2,_,Xs,Truth). 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-23T12:11:14.577

以下是如何继续使用[`if_/3`](https://stackoverflow.com/a/27358600/4609915)and [`(=)/3`](https://stackoverflow.com/a/27358600/4609915)。

首先，我们尝试`Key`在 pair 列表中找到一个`K-V`。一个额外的参数具体化了搜索成功。

```
pairs_key_firstvalue_t([]       ,_  ,_    ,false).
pairs_key_firstvalue_t([K-V|KVs],Key,Value,Truth) :-
   if_(K=Key,
       (V=Value, Truth=true),
       pairs_key_firstvalue_t(KVs,Key,Value,Truth)). 
```

接下来，我们需要处理“未找到”的情况：

```
assoc_key_mapped(Assoc,Key,Value) :-
   if_(pairs_key_firstvalue_t(Assoc,Key,Value),
       true,
       Key=Value). 
```

[最后，我们使用元谓词](/questions/tagged/meta-predicate "显示标记为“元谓词”的问题") 将它们放在一起[`maplist/3`](https://stackoverflow.com/a/6683502/4609915)：

```
?- maplist(assoc_key_mapped([x-z,z-x,d-c]), [x,d,e,z,a,z,p], Rs).
Rs = [z,c,e,x,a,x,p].                       % OK, succeeds deterministically 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T14:46:32.193

我发现您的代码相当混乱。一方面，您有`rep/3`and `rep/4`，但它们都没有在您传递变量绑定列表的第二个位置的列表。`H1=H2`不可能匹配列表，这`rep/3`是检查第二个参数的唯一子句。如果这是一个课堂作业，看起来你有点落后，我建议你花一些时间在以前的材料上。

解决方案比您想象的要简单：

```
rep([], _, []).
rep([X|Xs], Vars, [Y|Rest]) :-    member(X=Y, Vars), rep(Xs, Vars, Rest).
rep([X|Xs], Vars, [X|Rest]) :- \+ member(X=_, Vars), rep(Xs, Vars, Rest). 
```

我们`member/2`用来在列表中查找“变量绑定”（用引号括起来，因为这些是原子而不是真正的 Prolog 变量）。如果它在列表中，则 Y 是替换，否则我们继续使用 X。您会看到这具有预期的效果：

```
?- rep([x, d, e, z, x, z, p], [x=z, z=x, d=c], R).
R = [z, c, e, x, z, x, p] ;
false. 
```

这可以通过直接使用“或”来提高效率（并为我们节省一个选择点）：

```
rep([], _, []).
rep([X|Xs], Vars, [Y|Ys]) :- 
  (member(X=Y, Vars), ! ; X=Y), 
  rep(Xs, Vars, Ys). 
```

看：

```
?- rep([x, d, e, z, x, z, p], [x=z, z=x, d=c], R).
R = [z, c, e, x, z, x, p]. 
```

# codeigniter - 将控制器重定向到控制器时，codeigniter 中的核心 php 会话丢失

> ID：15639687
> 
> 赞同：1
> 
> 时间：2013-03-26T14:33:06.943
> 
> 标签：codeigniter

从一个控制器重定向到另一个控制器时，核心 php 会话在 codeigniter 中丢失。在第一个控制器中，当我们为其赋值时，它可以完美运行。此外，在第一个控制器中，会话被正确处理，但在重定向到另一个控制器后，会话丢失。

**这是第一个控制器：**

```
$_session['user'] = $data[0]['u_name']; // assign value to session 
echo $_session['user']  // works fine here and print user name
redirect("useraccount",'refresh'); // redirection to user account 
```

它在 useraccount.php 控制器中不起作用

**这里是第二个控制器**

```
public function index() {

    if(isset($_session['user']))
      echo $_session['user'];
    else 
      echo "no session";
    //$data['main'] = 'users/dashboard';
    //$this->load->view('index',$data);

} 
```

它没有打印任何会话。重定向到第二个控制器后，如何将会话传递给第二个控制器？

注意：我想使用核心 php 会话而不是 codeigniter 会话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:55:08.740

有什么问题吗：

```
$this->session->set_userdata('user', $data[0]['u_name']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T14:34:34.640

PHP 变量名区分大小写。它应该是

```
if (isset($_SESSION['user'])) {
            ^^^^^^^--- note: all CAPS 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T14:58:48.057

使用`session_start()`属性访问核心 php 会话

尝试这个

```
public function index()    
{
   session_start();
   if(isset($_session['user']))
   echo $_session['user'];
   else 
    echo "no session";
   //$data['main'] = 'users/dashboard';
   //$this->load->view('index',$data);

} 
```

# javascript - JavaScript 在鼠标单击时画一个圆圈 - 坐标不匹配

> ID：15639692
> 
> 赞同：2
> 
> 时间：2013-03-26T14:33:17.977
> 
> 标签：javascript

我正在编写一个简单的脚本，用户单击画布中的任意位置并出现一个圆圈。

该脚本有效但不正确。不知何故，点击事件发生的坐标与圆心不匹配。任何想法为什么？

这是代码：

```
<html>
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
jQuery(document).ready(function(){
     $("#special").click(function(e){ 

        var x = e.pageX - this.offsetLeft;
        var y = e.pageY - this.offsetTop; 

        /* var c=document.getElementById("special"); */
        var ctx= this.getContext("2d"); /*c.getContext("2d");*/
        ctx.beginPath();
        ctx.arc(x, y, 10,0, 2*Math.PI);
        ctx.stroke();

        $('#status2').html(x +', '+ y); 
   }); 
})  

</script>
<body> 
    <h2 id="status2">0, 0</h2>
    <canvas style="width: 500px; height: 500px; border:1px ridge green;" id="special">

    </canvas>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T14:40:16.647

您需要像这样将宽度和高度属性添加到您的画布元素：（您有它的样式）

```
 <canvas width="500px" height="500px" style="width: 500px; height: 500px; border:1px ridge green;" id="special"> 
```

看看这个小提琴：

[http://jsfiddle.net/7xQZ2/](http://jsfiddle.net/7xQZ2/)

添加宽度和高度参数将指定您的画布应该有多少像素。样式一只是显示它应该显示多大（它上面的所有东西都会被拉伸）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T14:47:28.890

画布元素需要高度和宽度标签。这有点奇怪，尤其是对于 HTML5 表示法。

尝试在您的文档就绪语句中添加它（在您的画布绘图代码之前），jQuery 将根据您的 CSS 样式为您添加它们。

```
$('#special').attr('height', $('#special').css('height'));
$('#special').attr('width', $('#special').css('width')); 
```

与使用手动添加属性值相比，此方法的优点是您只需要存储一次维度，如果您使用外部样式表，则可以排除将来的混乱；

**CSS**

```
#special {
    width: 500px;
    height: 500px;
    border:1px ridge green;
} 
```

**HTML**

```
<canvas id="special">Not supported</canvas> 
```

[JSfiddle](http://jsfiddle.net/XtBRN/3/)

# iphone - iPhone 和 iPad 的 self.view.bounds.size.height 不同的值

> ID：15639693
> 
> 赞同：1
> 
> 时间：2013-03-26T14:33:18.757
> 
> 标签：iphone, objective-c, ipad, position, frame

好的，除了明显的尺寸差异之外，我认为我的代码中可能存在逻辑错误导致这种不一致。

我`self.view.bounds.size.height`用来确定屏幕的底部边缘，这就是不一致的地方。

供参考，`loadingView`始终是一致的大小。

```
if (loading==TRUE) {
        [UIView animateWithDuration:0.25 animations:^{
            [loadingView setFrame:CGRectMake(loadingView.frame.origin.x, self.view.bounds.size.height-loadingView.frame.size.height, loadingView.frame.size.width, loadingView.frame.size.height)];
        }];
    } else {
        [UIView animateWithDuration:0.25 animations:^{
            [loadingView setFrame:CGRectMake(loadingView.frame.origin.x, self.view.bounds.size.height+loadingView.frame.size.height, loadingView.frame.size.width, loadingView.frame.size.height)];
        }];
    } 
```

我运行上述函数以在屏幕底部显示和隐藏“页面加载”通知。

这是我的问题：

iPad（正确）：
![在此处输入图像描述](../Images/f71b2973a2bc0806b70def8cf6378154.png)

iPhone（不正确）：
![在此处输入图像描述](../Images/8620c3ea5b5060a4e9d44a55f575af38.png)

现在，显然这里存在高度差异，我不确定为什么它只出现在 iPhone 上而不出现在 iPad 上。

我正在尝试使我的应用程序通用，显然，我不希望在我的代码中进行大量设备检查。必须有一种更优雅的方法来确定设备的底部边缘。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:52:04.060

请确保它`self.view`适合整个屏幕。（在 IB 中仔细检查您的自动调整大小蒙版等。）

# javascript - jQuery - 在提交事件上更改提交按钮的 html

> ID：15639695
> 
> 赞同：0
> 
> 时间：2013-03-26T14:33:26.237
> 
> 标签：javascript, jquery, html, events, submit

我想做的很简单。我有一个带有提交按钮的表单

```
<form accept-charset="UTF-8" action="/some_url" id="some-form" method="post">
  ...
  <button class="btn" id="remove-selected" type="submit">Send</button>`
</form> 
```

我想在提交表单时使用 jQuery 更改按钮的 html，但无法实现，似乎表单提交发生在我可以更改之前。

我现在的代码，非常简单：

```
$("#some-form").on("submit", function(e) {
  $("#remove-selected").html("Sending...");
}); 
```

感谢您的建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:37:01.537

您的东西似乎对我有用，只需通过 JS 提交表单即可更好地控制顺序和错误情况。

```
$("#some-form").on("click", function(e) {
  e.preventDefault();
  $("#remove-selected").html("Sending...");
  $(this).submit();
}); 
```

[http://jsfiddle.net/GDAhe/1/](http://jsfiddle.net/GDAhe/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T14:35:53.483

```
$("#remove-selected").click(function(){
    $(this).html("Sending...");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T14:40:37.760

您的代码是正确的，您可能忘记将其嵌入`$(document).ready()`方法中。

# java - Java/Android 的基本问题

> ID：15639697
> 
> 赞同：0
> 
> 时间：2013-03-26T14:33:30.403
> 
> 标签：java, textview

几天前我开始学习java，所以我很迷茫。我想显示从意图收到的文本并使其看起来像这样：“你已经写了：。” 它根本不起作用，我只能从意图中显示文本。

这是我的代码：

```
// Create the text view
TextView textView = new TextView(this);
textView.setTextSize(40);
System.out.print("You've written: ");
textView.setText(message);
System.out.print(".");

// Set the text view as the activity layout
setContentView(textView);
} 
```

此外，我试图在页面的第一行（或尽可能多的行）显示上面写的文本，并在下面显示一个标签，以将文本与按钮一起插入。问题是我只能从意图中看到文本。这是我的代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".DisplayMessageActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello_world" />

    <EditText android:id="@+id/edit_message"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:hint="@string/edit_message" />

    <Button 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/button_send"
        android:onClick="sendMessage"/>

</RelativeLayout> 
```

非常感谢，希望能尽快回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:36:22.720

而不是 System.out.println。

这样做。

```
<TextView
    android:id="@+id/topTextView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" /> 
```

并获取活动中的视图。

```
public void onCreate(Bundle bundle) {
    .........
   setContentView(layout_xml);
   TextView textView = (TextView)findViewById(R.id.topTextView);
   textView.setText("You've written: " + message + " .");
   .........

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:46:39.680

如果您尝试在布局中引用 TextView，则需要在 Activity 中引用它。上面的解决方案向您展示了如何处理它。setContentView(R.layout.file_name) 应该用于引用在 res/layout/file_name.xml 中存储的 xml 文件中创建的布局或在代码中手动创建的布局。如果您要为在 (Activity) 内部构建的布局调用 setContentView，则需要更多代码。如果需要显示消息，您可以随时调用 Toast.maketText(Context, message, Toast.LENGTH_SHORT).show(); 例如。另一个建议是 Java 开发人员习惯于使用 System.out.println() 调试到控制台。在 Android 中，它们有一个我们使用的称为 LogCat 的简洁功能，它可以通过说（用于调试目的的示例）Log.d（TAG，信息）; 其中 TAG 通常是为您所在的 Activity、Fragment 等定义的常量，因此您可以查看消息的来源并显示您通常在 System.out.println() 中使用的任何值。

# c# - c#中如何检测属性值（ReferenceType属性）是否改变？

> ID：15639700
> 
> 赞同：2
> 
> 时间：2013-03-26T14:33:36.097
> 
> 标签：c#, asp.net-mvc, reference-type

我有一`Customer`堂课，我想在用户更改`Customer.CityInfo`属性值时得到通知。

```
public class City
{
    public long Id {get;set;}
    public string Code {get;set;}
}

public class Customer
{

    private City cityInfo;
    private string name;

    public long Id { get; set; }
    public bool IsCityModified { get; set;}
    public bool IsCustomerNameModified { get; set; }

    public string Name 
    { 
        get{ return name;} 
        set
        {
           if(name!=value)
           {
              IsCustomerNameModified=true; }name=value;
           } 
        }
     }

    public City CityInfo 
    {
    get
        {
           if(cityInfo==null)
           {
              cityInfo=new City();
           }
           return cityInfo;
         }

      set{
          if(this.cityInfo!=value)
          {
             IsCityModified =true;
          }
          this.cityInfo=value;
       }   
  }
}

public ActionResult Save()
{
    Customer customer=this.currentCustomerSession;
    if(TryUpdateModel<Customer>(customer)){
       UpdateModel<Customer>(customer)
    }
    if(customer.IsCustomerNameModified ){
        //I am able to detect whether the customerName value has been changed in the frontend.
    }
    if(customer.IsCityModified){
        //I am not able to detect whether the city value has been changed in the frontend.
    }
} 
```

如果客户名称自其值类型以来发生更改，我可以将标志 (IsCustomerNameModified) 设置为 true。但无法检测到引用类型中所做的更改。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:36:13.767

此类问题通常通过更改通知系统处理。请参阅本文：[如何：实现属性更改通知](http://msdn.microsoft.com/en-us/library/ms743695.aspx)

片段：

```
 public string PersonName
  {
      get { return name; }
      set
      {
          name = value;
          // Call OnPropertyChanged whenever the property is updated
          OnPropertyChanged("PersonName");
      }
  }

  // Create the OnPropertyChanged method to raise the event 
  protected void OnPropertyChanged(string name)
  {
      PropertyChangedEventHandler handler = PropertyChanged;
      if (handler != null)
      {
          handler(this, new PropertyChangedEventArgs(name));
      }
  } 
```

使用此模式将帮助您避免设置标志或其他此类机制的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:39:25.357

现在我正确理解了这个问题，我建议执行以下操作：

`public bool Changed { get; private set; }`在您的`City`对象中添加一个属性。

然后在对象的每个属性中，检查值是否已更改，如果已更改，则将`Changed`标志设置为 true：

```
public int Id
{
   { get { return this.id } }
   {
      set
      {
         if (this.id != value) Changed = true;
         this.id = value;
      }
   }
} 
```

它类似于实现`IPropertyChanged`接口，但这样您可以确定您只检查对象是否被修改过一次。

似乎你的对象的引用没有改变，所以你只需要检查它的`Changed`属性（如果对象的引用真的改变了，我之前的答案会奏效）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T14:42:51.453

Paul 是正确的，您需要实施 INotifyProperty 更改。这是一个简单的例子。这很简单。

```
 public class BaseViewModel : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;
        private int _number;

        public BaseViewModel()
        {
            PropertyChanged += (o, p) =>
                                   {
                                       //this is the place you would do what you wanted to do
                                       //when the property has changed.
                                   };
        }

        [NotifyPropertyChangedInvocator]
        protected virtual void OnPropertyChanged([CallerMemberName] string propertyName = null)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null) 
                handler(this, new PropertyChangedEventArgs(propertyName));
        }

        public int Number
        {
            get { return _number; }
            set
            {
                _number = value;
                OnPropertyChanged("Number");
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T14:43:06.487

我同意 Paul 的回答，但您甚至可能需要覆盖 City 类中的 Equals() 和 GetHashCode() 函数。被覆盖的函数可以检查代码和 ID 是否已更改。

```
public override bool Equals( object obj )
{
    City other = obj as City;

    if ( ( other != null ) && ( other.Id == this.Id ) && ( other.Code == this.Code ) )
    {
        return ( true );
    }

    return ( false );
}

public override int GetHashCode( )
{
    return ( this.Id ^ this.Code.GetHashCode() ) ;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T14:56:43.580

您可以使用 INotifyPropertyChanged ，但我猜您没有将对象绑定到某个 UI 元素。在这种情况下，如果只需要知道 CityInfo 属性是否已更改，最简单的解决方案是引发自定义事件。

```
public class Customer
{

    private City cityInfo;
    private string name;

    public long Id { get; set; }
    public bool IsCityModified { get; set;}
    public event Action<City> OnCityInfoChanged;
    public bool IsCustomerNameModified { get; set; }

    public string Name 
    { 
        get{ return name;} 
        set
        {
           if(name!=value)
           {
              IsCustomerNameModified=true; }name=value;
           } 
        }
     }

    public City CityInfo 
    {
    get
        {
           if(cityInfo==null)
           {
              cityInfo=new City();
           }
           return cityInfo;
         }

      set{
          if(this.cityInfo ==value)
                  return;
             IsCityModified =true;
             this.cityInfo=value;
             if(OnCityInfoChanged != null)
                OnCityInfoChanged(value);
       }   
  }
} 
```

和

```
public ActionResult Save()
{
    Customer customer=this.currentCustomerSession;
customer.OnCityInfoChanged += new Action<CityInfo>( (cityInfo) => {//Do Something with New CityInfo});
    if(TryUpdateModel<Customer>(customer)){
       UpdateModel<Customer>(customer)
    }
    if(customer.IsCustomerNameModified ){
        //I am able to detect whether the customerName value has been changed in the frontend.
    }
    if(customer.IsCityModified){
        //I am not able to detect whether the city value has been changed in the frontend.
    }
} 
```

# jquery - 动态地将元素添加到页面，然后删除它们

> ID：15639701
> 
> 赞同：2
> 
> 时间：2013-03-26T14:33:50.707
> 
> 标签：jquery

我设置了一个 jQuery 控件，它动态地将包含文本框的表格添加到页面中。

添加部分工作正常，但是无论我在表格中的哪个位置单击，最后的删除功能都会触发......我只是希望它在我单击删除按钮时删除表格。

有没有更好的方法来设置它？

谢谢

```
 var linkCounter = 1;

    $("#btnAddLink").click(function () {
        if (linkCounter > 10) {
            alert("Only 10 learning objectives allowed per page.");
            return false;
        }

      var newTextBoxDiv = $(document.createElement('div')).attr("id", 'link' + linkCounter);
        newTextBoxDiv.after().html(
            '<table>' +
                '<tr><td>' +
                '<label>URL: </label>' +
                '</td><td>' +
                '<input type="text" name="tbLinkUrl" style="width: 300px;"' +
                '" id="tbLinkUrl' + counter + '" value="" >' +
                '</td></tr><tr><td>' +
                '<label>Label: </label>' +
                '</td><td>' +
                '<input type="text" name="tbLinkLabel" style="width: 300px;"' +
                '" id="tbLinkLabel' + counter + '" value="" >' +
                '</td></tr></table>');
           newTextBoxDiv.Append.Html(
              '&nbsp;&nbsp;<input type="button" value="Remove" class="removeLink">').click(function () {
                  $(this).remove();
                  linkCounter--;
              });
        newTextBoxDiv.appendTo("#linksGroup");
        linkCounter++;
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:41:14.153

jQuery 中的每个函数调用都返回一个 jQuery 对象，这就是您可以将多个调用串在一起的原因。但它们都是基于原始对象：

这里：

```
newTextBoxDiv.append.html(
          '&nbsp;&nbsp;<input type="button" value="Remove" class="removeLink">').click(function () {
              $(this).remove();
              linkCounter--;
          }); 
```

您将按钮类型的输入附加到 div。但是你*在 newTextBoxDiv 元素上*设置点击事件，*而不是*按钮。

创建您的按钮，添加点击功能，然后附加它：

```
$('&nbsp;&nbsp;<input type="button" value="Remove" class="removeLink">')
    .click(function () {
              $(this).siblings('table').remove();
              linkCounter--;
    }).appendTo(newTextBoxDiv); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T14:39:12.813

尝试像这样添加点击处理程序：

```
newTextBoxDiv.Append.Html(
          '&nbsp;&nbsp;<input type="button" id='removebutton' value="Remove" class="removeLink">');
$('#removebutton').click(function () {
              $('#mytable').remove();
              linkCounter--;
          }); 
```

并给你的桌子一个 'mytable' 的 id。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T14:47:14.077

我已将您的删除单击事件绑定移到 addLink 事件绑定之外。它现在是从身体委派的。在下面的示例中，该事件被委托给具有“removeLink”类的所有元素。单击按钮删除它的父级。

我做了一些小改动，让它作为演示工作。重要的部分是底部的委托（使用 on）。

[**演示**](http://jsfiddle.net/hR2hd/)

**html:**

```
<input id="btnAddLink" value="Click!" type="button" /> 
```

**Javascript：**

```
var linkCounter = 1;

$("#btnAddLink").click(function () {
    if (linkCounter > 10) {
        alert("Only 10 learning objectives allowed per page.");
        return false;
    }
    var newTextBoxDiv = $("<div>").attr("id", 'link' + linkCounter);
    $(this).after(newTextBoxDiv);
    newTextBoxDiv.html(
        '<table>' +
        '<tr><td>' +
        '<label>URL: </label>' +
        '</td><td>' +
        '<input type="text" name="tbLinkUrl" style="width: 300px;"' +
        '" id="tbLinkUrl' + linkCounter + '" value="" >' +
        '</td></tr><tr><td>' +
        '<label>Label: </label>' +
        '</td><td>' +
        '<input type="text" name="tbLinkLabel" style="width: 300px;"' +
        '" id="tbLinkLabel' + linkCounter + '" value="" >' +
        '</td></tr></table>');
    newTextBoxDiv.append('&nbsp;&nbsp;<input type="button" value="Remove" class="removeLink">');
    newTextBoxDiv.appendTo("#linksGroup");
    linkCounter++;
});

$('body').on('click','.removeLink',function(){
    $(this).parent().remove();
    linkCounter--;
}); 
```

# solr - 我可以在不重新启动 Jetty 服务器的情况下更新应用程序配置文件吗？

> ID：15639712
> 
> 赞同：1
> 
> 时间：2013-03-26T14:34:08.540
> 
> 标签：solr, jetty

我在 Jetty 服务器上运行 Solr，我希望能够更新配置文件并让我的应用程序在不重新启动整个服务器的情况下获取更改。具体来说，我在 Tomcat 中寻找类似于 touch web.xml 的东西。这有可能吗，如果可以，我该怎么做？

**编辑：**

具体来说，我想在外部文件中更新特定于应用程序的信息，并且我想让应用程序在不停止和启动服务器的情况下加载这些新数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T20:50:36.027

有几种方法可以实现这一点（假设您正在考虑重新加载常规配置）。您可以让守护线程轮询文件以获取上次更改的时间戳，并触发重新加载。或者，如果不经常发生，您可以检查每个配置值查找的时间戳。但我的首选方法是通过 JMX 或只能从“内部”访问的 URL 公开“重新加载配置”操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:30:54.037

如果您正在运行 Solr 4+ 并且正在谈论 schema.xml 和 solrconfig.xml，那么您需要“重新加载核心”，它位于核心/集合管理下的 Web Admin UI 中。您也可以从 URL 触发它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-30T06:46:11.140

从 Apache solr admin 转到 core admin 并重新加载相应的核心。如果您使用的是 solr cloud，那就太容易了。只需通过 zookeeper 重新加载配置。这些更改只有在完成复制后才可见。

# prolog - Prolog 未知变量追加

> ID：15639723
> 
> 赞同：2
> 
> 时间：2013-03-26T14:34:36.667
> 
> 标签：prolog, logic

我写了一些 Prolog 来用一个原子替换列表二中的元素，`empty`如果它们包含在列表一中：

```
replace_build([], _Inv, _Res).

replace_build([A| B], Inv, Res) :-
    replace_build2(A, Inv, Res), replace_build(B, Inv, Res).

replace_build2(_BuildItem, [], _NewInv) :- !.

replace_build2(BuildItem, [BuildItem| T], NewInv) :-
    replace_build2(BuildItem, T, NewInv1),
    append([empty], NewInv1, NewInv).

replace_build2(BuildItem, [H| T], NewInv) :-
    replace_build2(BuildItem, T, NewInv1),
    append([H], NewInv1, NewInv). 
```

但是，当我运行它时，根据以下示例，我得到一个不寻常的匿名变量（这是正确的术语吗？）：

```
?- replace_build([item3], [empty, item5, item1, item3, empty], X).
X = [empty, item5, item1, empty, empty|_G467] 
```

（它也满足了我不想要的，尽管希望我能解决这个问题！）

为什么`|_G467`在结果列表中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:55:39.490

问题一是这个条款：

```
replace_build2(_BuildItem, [], _NewInv) :- !. 
```

您可以通过放置一个`[]`for来修复它`_NewInv`：

```
replace_build2(_BuildItem, [], []) :- !. 
```

问题只是你有一个未实例化的变量被附加到：

```
?- replace_build([item3], [empty, item5, item1, item3, empty], X).
X = [empty, item5, item1, empty, empty] ;
X = [empty, item5, item1, item3, empty]. 
```

你有两个答案的原因是因为`replace_build2`匹配的第二个子句，这就是你得到`empty`并`item3`在那里的原因。Prolog 很乐意将两个变量统一为相同的值，这里没有什么可以停止`BuildItem`和`H`引用相同的值。您需要明确告诉 Prolog 这些是不同的，因此将您的最后一个`replace_build2`子句更改为：

```
replace_build2(BuildItem, [H| T], NewInv) :-
  BuildItem \= H,
  replace_build2(BuildItem, T, NewInv1),
  append([H], NewInv1, NewInv). 
```

现在你只得到你想要的解决方案：

```
?- replace_build([item3], [empty, item5, item1, item3, empty], X).
X = [empty, item5, item1, empty, empty] ;
false. 
```

你也可以`dif/2`在一些 Prologs 中使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T18:01:11.453

当您有一个“列表转换”任务时，需要处理一个“项目一次”逻辑，您可以使用[maplist](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.2%27,swi%28%27/doc/Manual/apply.html%27%29%29) /N。

然后

```
replace_build(Items, Inv, Res) :-
    maplist(replace_build_item(Inv), Items, Res).

replace_build_item(Inv, Item, Res) :-
    memberchk(Item, Inv) -> Res = empty ; Res = Item. 
```

但是要学习 Prolog，你就走在了正确的轨道上，Daniel 很好地解释了你的问题。掌握基本的列表处理任务很重要！

# html - 如何在html中的图像顶部设置画布

> ID：15639726
> 
> 赞同：19
> 
> 时间：2013-03-26T14:34:49.360
> 
> 标签：html, canvas

假设我有一个带有画布的 index.html：

```
<html>
<head>
</head>
<body style="text-align: center;background: #f2f6f8;">

<div style="display:inline-block;width:auto; margin: 0 auto; background: black; position:relative; border:5px solid black; border-radius: 10px; box-shadow: 0 5px 50px #333">
    <canvas id="gameCanvas" width="320" height="480"></canvas>
</div>
</body>
</html> 
```

这样画布就可以正常显示了~~~

现在我想在画布后面放置一个图像作为背景，并尝试在正文中添加一个 img 标签：

```
<html>
<head>
</head>
<body style="text-align: center;background: #f2f6f8;">
<img src="xxx.png" alt="" />
<div style="display:inline-block;width:auto; margin: 0 auto; background: black; position:relative; border:5px solid black; border-radius: 10px; box-shadow: 0 5px 50px #333">
    <canvas id="gameCanvas" width="320" height="480"></canvas>
</div>
</body>
</html> 
```

但随后画布似乎显示在图像之后而不是在它上面......

我真的对html一无所知，我认为完成这件事应该不难，希望有人能在这里帮忙，谢谢:)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-26T14:50:29.683

**[现场演示](http://jsfiddle.net/KNxgC/4/)**

你只需要使用[`z-index`](https://developer.mozilla.org/en-US/docs/Web/CSS/z-index). 我将图像和画布元素放在一个容器中，并定位它们，使画布始终位于图像上方。

另请注意，您不应该使用 CSS 调整画布的大小，您应该始终直接通过属性进行调整。在我的小提琴中，我通过 JS 做到了。

## 标记

```
<div id="container">
    <img class='img' src="http://lorempixel.com/320/480/" alt="" />
    <canvas id="gameCanvas" width="320" height="480"></canvas>
</div> 
```

## CSS

```
body{text-align: center;background: #f2f6f8;}
.img{position:absolute;z-index:1;}

#container{
    display:inline-block;
    width:320px; 
    height:480px;
    margin: 0 auto; 
    background: black; 
    position:relative; 
    border:5px solid black; 
    border-radius: 10px; 
    box-shadow: 0 5px 50px #333}

#gameCanvas{
    position:relative;
    z-index:20;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T14:37:44.277

你可以像这样在画布上绘制图像，而不是放在`canvas`图像上

```
var topMap = new Image();
topMap.src = "myiamge.jpeg";

function drawMap() {
    context.clearRect(0, 0, WIDTH, HEIGHT);
    context.drawImage(topMap, 0, 0);
}

function init() {
    drawMap();
}

topMap.onload = function() {
  init();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T14:45:19.307

您可以为画布设置背景图像，但如果用户在浏览器中 `background-image: url('xxx.png');`按下，则不会显示背景。`View image`

```
<canvas style="background-image: url('xxx.png');"id="gameCanvas" width="320" height="480"></canvas> 
```

**或者像Pranay Rana**所说的那样使用JavaScript （如果你有其他级别或者以后必须更改背景会更好）:)

# jquery-ui - 模态对话框中的 jQuery UI 和内容可编辑

> ID：15639731
> 
> 赞同：0
> 
> 时间：2013-03-26T14:35:03.980
> 
> 标签：jquery-ui, modal-dialog, contenteditable

是否存在围绕在 jQuery UI 中使用 contenteditable div 元素导致插入符号不出现的任何问题。这是一些代码来说明我的意思

```
<div id='diaHTMLEd' style='display:none'>
  <div id='divRTE'></div>
  <!--iframe src='xrte.html' height='300' width='500'></iframe-->
</div>

function openHTMLEditor( {
    $('#diaHTMLEd').dialog({
        height:200,
        width:450,
        modal:true,
        open:addRTE
    });
}

function addRTE() {
    $('#divRTE').html("<div contenteditable='true'>Testing</div>");
    return;
} 
```

说明 - 我正在打开一个模态 jqUI 对话框，并在其 :open 事件中将一个 contenteditable div 元素添加到对话框中的内部 div。文本显示，但单击时无法编辑。如果我替换该代码并使用注释掉的 iframe 而不是包含可内容编辑的驱动器，那么一切正常。

看起来有些东西阻止了对话框内的内容变得可编辑。

这个问题可能缺乏一些细节，但考虑到我的应用程序的复杂性，我真的无法提供更具代表性的代码。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T07:59:06.247

给遇到此线程的任何人的说明。经过大量工作，我最终发现了这个问题。在 jQuery UI 对话框中使用 contenteditable 本身并不是问题。我的问题归结为与我正在使用的优秀 jstree 插件的某种冲突。

作为一般规则 - 在使用多个插件的复杂应用程序中，您最好在 iframe 中对 contenteditable 内容进行沙盒处理

# ios - 数组中的零对象使程序崩溃，也在一定计数之后

> ID：15639732
> 
> 赞同：0
> 
> 时间：2013-03-26T14:35:05.700
> 
> 标签：ios, objective-c, json, ios6, instagram

我有一个程序可以从 Instagram 抓取数据，将其放入字典中，然后解析它。

当我尝试使用该数据时，问题就开始了，神奇地项目编号 0 使我的程序崩溃。

此外，在一定数量之后，下一项也会使程序崩溃。

这是 UITableViewCell 的代码，它从数组/字典中获取文本并将其放入单元格中。看起来，它崩溃了，如果我添加另一个检查以从数字 1 开始，它可以工作，但是当它达到某个计数时会崩溃。我不明白为什么会发生这种情况，因为我有方法告诉 TableView 表中有多少行，它返回 [self.loader.dataArray count]，所以它不可能尝试加载出界。

```
if (self.loader.dataArray[indexPath.row] != nil )
    {
    cell.textLabel.text = [[[self.loader.dataArray[indexPath.row] objectForKey:@"caption"] objectForKey:@"from"] objectForKey:@"full_name"];
    } 
```

这是我得到的错误：

instagramClient[8254:907] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[NSNull objectForKey:]：无法识别的选择器发送到实例 0x3bb8f090”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T14:42:14.180

您得到的异常并不表示越界问题，它表明您`NSNull`在您的`dataArray`（或可能在您的字典之一的“标题”对象中`dataArray`或在一个的“来自”对象中）那些字典等等）。`self.loader.dataArray`当您获得对该数组的更新时，请尝试记录所有内容，并查看它是否包含任何`NSNull`对象。

# css - 水平居中对齐内联html元素

> ID：15639751
> 
> 赞同：0
> 
> 时间：2013-03-26T14:36:10.757
> 
> 标签：css

好的，所以我在 div 中有一个固定宽度的锚元素，锚元素需要保持内联，因为它包含的文本是动态的，并且它具有背景，因为它是一个按钮。我希望按钮的背景也只有文本长度的大小。有没有办法这样做？

```
<div class="wrap">
<a class="button>Start »</a>
</div>

 .wrap{
     width:900px;
background:white;
    }

    a{
    display:inline;
background:black;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:38:48.327

我认为

```
.wrap{
    width:900px;
    text-align: center;
} 
```

会成功的

看

[http://jsfiddle.net/jEsRG/3/](http://jsfiddle.net/jEsRG/3/)

# android - 在 android 中使用 Http 进行实时视频流（录制和上传）

> ID：15639754
> 
> 赞同：3
> 
> 时间：2013-03-26T14:36:19.500
> 
> 标签：android, video-streaming, android-camera, http-live-streaming, live-streaming

在我的应用程序中，我需要从设备录制视频并同时将其发布到服务器（每 5 秒）。为此，我正在使用 Http 服务（我不想在这里使用 RTSP）。我能够记录并同时发布它。

但是服务器端的文件无法播放（即使在 VLC 中也是如此）。两个文件的大小相同（以字节为单位）（服务器文件和设备文件）。为了测试目的以找出问题出在服务器或我的端，我已经评论了服务器发布代码并将数据写入 sdcard 中的另一个文件（同时每 5 秒记录一次），但该文件也相同大小并且无法播放在设备或 VLC 中。

```
package com.techgene.instantrecorder;

import java.io.File;
import java.io.IOException;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.content.pm.ActivityInfo;
import android.hardware.Camera;
import android.media.MediaRecorder;
import android.media.MediaRecorder.OnInfoListener;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.Window;
import android.widget.Button;
import android.widget.Toast;
import android.widget.VideoView;

import com.techgene.instantrecorder.utility.Util;

public class SafeVideoRecorder extends Activity implements SurfaceHolder.Callback
{
    public static final String EXTRA_USE_FRONT_FACING_CAMERA ="frontcamera";
    private static final String ROOT_DIR = Environment.getExternalStorageDirectory().toString() + "/InstantRecorder";

    private static final int DUAL_MODE = 1;
    private static final int MONO_MODE = 2;
    private int currentMode;

    private static final String TAG = "VideoRecorder";

    public static Boolean mRecording = false;
    private Boolean mUseFrontFacingCamera = false, isFromCall = false;
    private VideoView mVideoView = null;
    private MediaRecorder mVideoRecorder = null;
    private Camera mCamera;
    private String uniqueOutFile;
    private ProgressDialog progress;
    private Button btnStop, btnStartRecord, btnDual, btnMono;

    @SuppressWarnings("deprecation")
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);

        setContentView(R.layout.activity_video_recorder);

        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

        mVideoView = (VideoView) this.findViewById(R.id.videoView);

        btnStop = (Button) findViewById(R.id.btnStop);
        btnStop.setVisibility(View.GONE);
        btnStop.setOnClickListener(new OnClickListener()
        {
            @Override
            public void onClick(View v) 
            {
                try
                {
                    stopRecording();

                    if(progress != null && progress.isShowing())
                        progress.dismiss();

                    progress = ProgressDialog.show(SafeVideoRecorder.this, "", "Uploading...");

                    new Thread(new Runnable()
                    {
                        @Override
                        public void run() 
                        {
//                          Util util = new Util();
//                          final int respCode = util.upLoad2Server(uniqueOutFile);
//                          
//                          if(currentMode == MONO_MODE)
//                          {
//                              File file = new File(uniqueOutFile);
//                              if(file.exists())
//                                  file.delete();
//                          }

                            runOnUiThread(new Runnable()
                            {
                                @Override
                                public void run() 
                                {
                                    if(progress != null && progress.isShowing())
                                        progress.dismiss();

//                                  if(respCode == 200)
//                                  {
//                                      Toast.makeText(SafeVideoRecorder.this, "Successfully uploaded to server", Toast.LENGTH_SHORT).show();
//                                  }
//                                  else
//                                  {
//                                      Toast.makeText(SafeVideoRecorder.this, "Unable to upload server", Toast.LENGTH_SHORT).show();
//                                  }

                                    try {
                                        configureCameraRecorder(mVideoView.getHolder());
                                    } catch (Exception e) {
                                        // TODO Auto-generated catch block
                                        e.printStackTrace();
                                    }

                                    btnStop.setVisibility(View.GONE);
                                    btnStartRecord.setVisibility(View.VISIBLE);

                                    btnDual.setVisibility(View.GONE);
                                    btnMono.setVisibility(View.GONE);
                                }
                            });
                        }
                    }).start();
                } 
                catch (Exception e) 
                {
                    Log.e(TAG, e.toString());
                    e.printStackTrace();
                }
            }
        });

        btnStartRecord = (Button) findViewById(R.id.btnStartRecord);
        btnStartRecord.setOnClickListener(new OnClickListener()
        {
            @Override
            public void onClick(View v) 
            {
                btnDual.setVisibility(View.VISIBLE);
                btnMono.setVisibility(View.VISIBLE);

                btnStop.setVisibility(View.GONE);
                btnStartRecord.setVisibility(View.GONE);

                startRecord();
            }
        });

        btnDual = (Button) findViewById(R.id.btnDual);
        btnDual.setOnClickListener(new OnClickListener()
        {
            @Override
            public void onClick(View v) 
            {
                currentMode = DUAL_MODE;
                isFromCall = true;
                Intent intent = new Intent(Intent.ACTION_CALL, Uri.parse("tel:"+"9703033575"));
                startActivityForResult(intent, 1010);

                btnDual.setVisibility(View.GONE);
                btnMono.setVisibility(View.GONE);
                btnStartRecord.setVisibility(View.GONE);

                btnStop.setVisibility(View.VISIBLE);
            }
        });

        btnMono = (Button) findViewById(R.id.btnMono);
        btnMono.setOnClickListener(new OnClickListener()
        {
            @Override
            public void onClick(View v) 
            {
                currentMode = MONO_MODE;

                btnDual.setVisibility(View.GONE);
                btnMono.setVisibility(View.GONE);
                btnStartRecord.setVisibility(View.GONE);

                btnStop.setVisibility(View.VISIBLE);
            }
        });

        //mUseFrontFacingCamera = getIntent().getExtras().getBoolean(EXTRA_USE_FRONT_FACING_CAMERA, false);

        if(mUseFrontFacingCamera)
        {
            // If caller wants to use front facing camera, then make sure the device has one...
            // Hard coded to only open front facing camera on Xoom (model MZ604)
            // For more universal solution try: 
            // http://stackoverflow.com/questions/2779002/how-to-open-front-camera-on-android-platform
            String deviceModel = android.os.Build.MODEL;
            if (deviceModel.contains("MZ604"))
            {
                mUseFrontFacingCamera = true;
            } 
            else 
            {
                Toast.makeText(getApplicationContext(), "The App isn't designed to use this Android's front facing camera.\n " +
                                                        "The device model is : " + deviceModel, Toast.LENGTH_LONG).show();
                mUseFrontFacingCamera = false;
            }
        }

        final SurfaceHolder holder = mVideoView.getHolder();
        holder.addCallback(this);
        holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

    @SuppressLint("NewApi") @Override
    public void surfaceCreated(SurfaceHolder holder) 
    {
        Log.e(TAG, "surfaceCreated()");

        try
        {
            if(!isFromCall)
            {
                Log.e(TAG, "configureCameraRecorder");

                configureCameraRecorder(holder);

                startRecord();
            }
            else
            {
                Log.e(TAG, "configureCamera ONLY");

                if (mCamera != null) 
                {
                    mCamera.stopPreview();
                    mCamera.release();
                    mCamera = null;
                }

                if (mUseFrontFacingCamera) 
                {
                    //hard coded assuming 1 is the front facing camera
                    mCamera = Camera.open(1);
                }
                else 
                {
                    mCamera = Camera.open();
                }

                // Camera setup is based on the API Camera Preview demo
                mCamera.setPreviewDisplay(holder);
                Camera.Parameters parameters = mCamera.getParameters();
                parameters.setPreviewSize(640, 480);
                mCamera.setParameters(parameters);
                mCamera.startPreview();
                mCamera.unlock();

                mVideoRecorder.setCamera(mCamera);
                mVideoRecorder.setPreviewDisplay(holder.getSurface());
            }
        } 
        catch (Exception e) 
        {
            Log.e(TAG, e.toString());
            e.printStackTrace();
        }
    }

    private void startRecord()
    {
        try
        {
            File file = new File(ROOT_DIR);

            if(!file.exists())
                file.mkdir();

            uniqueOutFile = ROOT_DIR + "/IR_" + System.currentTimeMillis() + ".mp4";

            File outFile = new File(uniqueOutFile);
            if (outFile.exists()) 
            {
                outFile.delete();
            }

            if(mVideoRecorder != null)
            {
                Log.e(TAG, "Recording started");

                mVideoRecorder.setOutputFile(uniqueOutFile);
                mVideoRecorder.prepare();
                mVideoRecorder.start();
                mRecording = true;

                new Thread(new Runnable()
                {
                    @Override
                    public void run() 
                    {
                        Util util = new Util();
                        final int respCode = util.upLoad2Server(uniqueOutFile);
                    }
                }).start();
            }
        } 
        catch (Exception e) 
        {
            Log.e(TAG, e.toString());
            e.printStackTrace();
        }
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) 
    {
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height)
    {
        Log.v(TAG, "Width x Height = " + width + "x" + height);
    }

    private void stopRecording() throws Exception 
    {
        Log.e(TAG, "stopRecording()");

        mRecording = false;
        if (mVideoRecorder != null) 
        {
            mVideoRecorder.stop();
            mVideoRecorder.release();
            mVideoRecorder = null;
        }

        if (mCamera != null) 
        {
            mCamera.reconnect();
            mCamera.stopPreview();
            mCamera.release();
            mCamera = null;
        }
    }

    @Override
    protected void onDestroy() 
    {
        try
        {
            stopRecording();
        } 
        catch (Exception e) 
        {
            Log.e(TAG, e.toString());
            e.printStackTrace();
        }
        super.onDestroy();
    }

    @SuppressLint("NewApi")
    private void configureCameraRecorder(SurfaceHolder holder) throws Exception 
    {
        if (mVideoRecorder != null)
        {
            mVideoRecorder.stop();
            mVideoRecorder.release();
            mVideoRecorder = null;
        }

        if (mCamera != null) 
        {
            mCamera.reconnect();
            mCamera.stopPreview();
            mCamera.release();
            mCamera = null;
        }

        try 
        {
            if (mUseFrontFacingCamera) 
            {
                //hard coded assuming 1 is the front facing camera
                mCamera = Camera.open(1);
            }
            else 
            {
                mCamera = Camera.open();
            }

            // Camera setup is based on the API Camera Preview demo
            mCamera.setPreviewDisplay(holder);
            Camera.Parameters parameters = mCamera.getParameters();
            parameters.setPreviewSize(640, 480);
            mCamera.setParameters(parameters);
            mCamera.startPreview();
            mCamera.unlock();

            mVideoRecorder = new MediaRecorder();
            mVideoRecorder.setCamera(mCamera);
            mVideoRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
            mVideoRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
            mVideoRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);// THREE_GPP

            mVideoRecorder.setVideoSize(640, 480);// YouTube recommended size: 320x240, OpenGazer eye tracker: 640x480 YouTube HD: 1280x720
            mVideoRecorder.setVideoFrameRate(20); //might be auto-determined due to lighting
            mVideoRecorder.setVideoEncodingBitRate(3000000);// 3 megapixel, or the max of the camera
            mVideoRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.H264);// MPEG_4_SP

            int sdk = android.os.Build.VERSION.SDK_INT;
            // Gingerbread and up can have wide band ie 16,000 hz recordings 
            // (Okay quality for human voice)
            if (sdk >= 10) 
            {
                mVideoRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_WB);
                mVideoRecorder.setAudioSamplingRate(16000);
            } 
            else
            {
                // Other devices only have narrow band, ie 8,000 hz 
                // (Same quality as a phone call, not really good quality for any purpose. 
                // For human voice 8,000 hz means /f/ and /th/ are indistinguishable)
                mVideoRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
            }

//            mVideoRecorder.setMaxDuration(30000); // limit to 30 seconds
            mVideoRecorder.setOnInfoListener(new OnInfoListener() 
            {
                @Override
                public void onInfo(MediaRecorder mr, int what, int extra) 
                {
                    if (what == MediaRecorder.MEDIA_RECORDER_INFO_MAX_DURATION_REACHED) 
                    {
                        try 
                        {
                            Log.e(TAG, "MEDIA_RECORDER_INFO_MAX_DURATION_REACHED reached");
                            stopRecording();

                            if(progress != null && progress.isShowing())
                                progress.dismiss();

                            progress = ProgressDialog.show(SafeVideoRecorder.this, "", "Uploading...");

                            new Thread(new Runnable()
                            {
                                @Override
                                public void run() 
                                {
                                    Util util = new Util();
                                    final int respCode = util.upLoad2Server(uniqueOutFile);

                                    runOnUiThread(new Runnable()
                                    {
                                        @Override
                                        public void run() 
                                        {
                                            if(progress != null && progress.isShowing())
                                                progress.dismiss();

                                            if(respCode == 200)
                                            {
                                                Toast.makeText(SafeVideoRecorder.this, "Successfully uploaded to server", Toast.LENGTH_SHORT).show();
                                            }
                                            else
                                            {
                                                Toast.makeText(SafeVideoRecorder.this, "Unable to upload server", Toast.LENGTH_SHORT).show();
                                            }
                                        }
                                    });
                                }
                            }).start();
                        }
                        catch (Exception e) 
                        {
                            e.printStackTrace();
                        }
                    }
                }
            });

            mVideoRecorder.setPreviewDisplay(holder.getSurface());
        }
        catch (Exception e) 
        {
            Log.e(TAG, e.toString());
            e.printStackTrace();
        }
    }

    @Override
    protected void onPause() 
    {
        super.onPause();

        if (mCamera != null) 
        {
            mCamera.stopPreview();
            mCamera.release();
            mCamera = null;
        }
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) 
    {
        super.onActivityResult(requestCode, resultCode, data);

        Log.e(TAG, "onActivityResult()");

//      if(requestCode == 1010 && resultCode == RESULT_OK)
//      {
//          
//      }

        isFromCall = true;
    }
} 
```

* * *

```
package com.techgene.instantrecorder.utility;

import java.io.BufferedReader;
import java.io.DataOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;

import android.util.Log;

import com.techgene.instantrecorder.Appconstants;
import com.techgene.instantrecorder.SafeVideoRecorder;
import com.techgene.instantrecorder.VideoRecorder;

public class Util 
{
    public int upLoad2Server(String sourceFileUri) 
    {
        int serverResponseCode = 0;
    //  String upLoadServerUri = "http://113.193.181.52:90/test/videos/add-video1.php";

        String upLoadServerUri = "http://113.193.181.52:90/test/videos/add-video1.php?name=sample&description=Sample video&lat="
                        + Appconstants.DEVICE_LAT
                        + "&lng="
                        + Appconstants.DEVICE_LANG;

        upLoadServerUri = upLoadServerUri.replace(" ", "%20");

        Log.e("Util", "Url: "+upLoadServerUri);

        HttpURLConnection conn = null;
        DataOutputStream dos = null;
        int bytesAvailable, bufferSize;
        byte[] buffer;
        int maxBufferSize = 1 * 1024 * 1024;

        File sourceFile = new File(sourceFileUri);
        if (!sourceFile.isFile())
        {
            Log.e("Util", "Source File Does not exist");
            return 0;
        }

        try 
        { 
            FileInputStream fileInputStream = new FileInputStream(sourceFile);
            URL url = new URL(upLoadServerUri);
            conn = (HttpURLConnection) url.openConnection();
            conn.setDoInput(true); // Allow Inputs
            conn.setDoOutput(true); // Allow Outputs
            conn.setUseCaches(false); // Don't use a Cached Copy
            conn.setRequestMethod("POST");
            conn.setRequestProperty("Connection", "Keep-Alive");
//          conn.setRequestProperty("Content-Type", "multipart/form-data;");
//          conn.setRequestProperty("uploaded_file", fileName);
//          FileOutputStream fos = new FileOutputStream("/mnt/sdcard/hi.mp4");

            dos = new DataOutputStream(conn.getOutputStream());

//          dos.writeBytes("Content-Disposition: form-data; name=\"uploaded_file\";filename=\""+fileName);

            bytesAvailable = fileInputStream.available(); 

            buffer = new byte[maxBufferSize];

            while (SafeVideoRecorder.mRecording || (!SafeVideoRecorder.mRecording && bytesAvailable > 0))
            {
                Log.e("Util", "available : " + bytesAvailable);

                bufferSize = Math.min(bytesAvailable, maxBufferSize);

                fileInputStream.read(buffer, 0, bufferSize);
                dos.write(buffer, 0, bufferSize);
                dos.flush();

                bytesAvailable = fileInputStream.available();
                bufferSize = Math.min(bytesAvailable, maxBufferSize);

                while (bytesAvailable <= 0 && SafeVideoRecorder.mRecording) 
                {
                    Log.e("Util", "NOT available : " + bytesAvailable);

                    Thread.sleep(5000);
                    bytesAvailable = fileInputStream.available();
                }
            }

            // Responses from the server (code and message)
            serverResponseCode = conn.getResponseCode();
            String serverResponseMessage = conn.getResponseMessage();

            Log.i("Util", "Upload file to server, HTTP Response is : " + serverResponseMessage + ": " + serverResponseCode);

            fileInputStream.close();

            dos.flush();
            dos.close();
        } 
        catch (Exception e) 
        {
            e.printStackTrace();
        }

        // this block will give the response of upload link
        try 
        {
            BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
            String line;
            while ((line = rd.readLine()) != null)
            {
                Log.i("Util", "RES Message: " + line);
            }

            rd.close();
        }
        catch (Exception ioex) 
        {
            Log.e("Util", "error: " + ioex.getMessage(), ioex);
        }

        return serverResponseCode; 
    }
} 
```

# java - 标签的舞台覆盖 - 标签很大，设置边界对比例无用

> ID：15639755
> 
> 赞同：0
> 
> 时间：2013-03-26T14:36:19.907
> 
> 标签：java, label, libgdx, stage

我有一个正在工作的 libgdx 游戏，在这个游戏中，当您点击“帮助”屏幕时，我的 Help_Manager 类使用我的“房间”舞台对象来绘制标签。房间的摄像头宽 27，高 18。舞台使用相同的相机，并将其视口设置为相同的宽度和高度。 ![在此处输入图像描述](../Images/de1f23037d2080948483c920bf24fb46.png)

如果我要使用 bounds(4,4,1,1) 将文本按钮添加到舞台，按钮会正确绘制，但是当我添加带有 bounds(0,0,16,4) 的标签时，标签“S”单独占据屏幕的一半（如上所示）（应该说“从船滑动手指到\“Fling\”船。”）。无论我将边界宽度和高度设置为什么，标签仍然是相同的大小。更改比例也没有效果。更改字体比例（标签的，而不是字体）确实有效果，但由于某种原因，文本都搞砸了： ![乱七八糟的文字](../Images/8a12d41d62bb8d403082d6880f4d1137.png)

继承人的代码片段：Room.java：

```
Stage stage = new Stage();
camera = new OrthographicCamera(WIDTH,HEIGHT);
camera.position.set(WIDTH/2,HEIGHT/2,0);
camera.update();
stage.setCamera(camera);
stage.setViewport(WIDTH, HEIGHT, false);
public void resize(int width, int height){
    ppux = width/WIDTH;
    ppuy = height/HEIGHT;
    stage.setViewport(Room.WIDTH,Room.HEIGHT,false);
}
public void render(float delta){
    stage.act(delta);
    stage.draw();
} 
```

Help_Manager.java

```
BitmapFont font = new BitmapFont();
LabelStyle style = new LabelStyle();
Label text;
style.font = font;
text = new Label(instructions[0],style);
text.setText(instructions[stage]);
text.setBounds(0,0,16,4);
//text.setFontScale(0.1f);
room.stage.addActor(text); 
```

那么如何让我的标签合作呢？提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T04:04:56.193

好吧，我发现字体默认使用整数作为位置。当使用较小的相机尺寸和舞台视口时，意味着需要更准确地放置字母，因此我不得不更改 font.setUseIntegerPositions(false); 我还发现，当您为标签设置键时，这只是定义了可以使用的空间，但仍然填充相同的字体和文本大小。你把同样的东西放在一个更大/更小的盒子里。（这解释了为什么当您增加标签的高度、提高顶部边界以及文本从顶部开始时，文本会向上移动）。要实际更改字体的大小，请使用 text.setFontScale();

# android - 按下电源按钮时限制 Android 安全模式

> ID：15639761
> 
> 赞同：5
> 
> 时间：2013-03-26T14:36:30.760
> 
> 标签：android

我需要停止在我的 nexus 7 平板电脑上进入安全模式，因为我实现了一个基于 Kiosk 的应用程序，只是简单地覆盖了主屏幕。一旦默认主屏幕更改为我的自定义主屏幕，用户就不允许重启设备以进入安全模式。是否有可能在不更改固件操作系统的情况下实现这些功能。

提前致谢！

# python - 关闭 VTK 窗口 (Python)

> ID：15639762
> 
> 赞同：8
> 
> 时间：2013-03-26T14:36:31.197
> 
> 标签：python, vtk

考虑以下脚本

```
import vtk

ren = vtk.vtkRenderer()
renWin = vtk.vtkRenderWindow()
renWin.AddRenderer(ren)
iren = vtk.vtkRenderWindowInteractor()
iren.SetRenderWindow(renWin)

an_actor = vtk....  # create an actor
ren.AddActor(an_actor)

iren.Initialize()
renWin.Render()
iren.Start() 
```

如果脚本在那里结束，一切都很好，创建的窗口将被关闭，并且在手动关闭窗口（单击 X）或按下退出键（Q 或 E）时释放资源。

但是，如果还有更多的语句，您会注意到窗口仍然存在，这是可以理解的，因为我们没有调用任何东西来放弃它，只是结束了交互循环。

通过附加以下内容自行查看：

```
temp = raw_input('The window did not close, right? (press Enter)') 
```

根据[VTK/Examples/Cxx/Visualization/CloseWindow](http://www.vtk.org/Wiki/VTK/Examples/Cxx/Visualization/CloseWindow)，这

```
iren.GetRenderWindow().Finalize()  # equivalent: renWin.Finalize()
iren.TerminateApp() 
```

应该完成工作，但事实并非如此。

**我还需要做什么才能以编程方式关闭打开的窗口？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-26T14:53:06.017

## 简短的回答

只少了一行！

```
del renWin, iren 
```

## 长答案

您可能很想制作一个函数来处理这样的窗口关闭

```
def close_window(iren):
    render_window = iren.GetRenderWindow()
    render_window.Finalize()
    iren.TerminateApp()
    del render_window, iren 
```

然后使用它（考虑问题中的脚本）：

```
...
iren.Initialize()
renWin.Render()
iren.Start()

close_window(iren) 
```

它行不通。原因是

> `del x`不直接调用`x.__del__()`——前者将 x 的引用计数减一，而后者仅在 x 的引用计数达到零时调用（[`__del__`文档](http://docs.python.org/2/reference/datamodel.html#object.__del__)）。

(在( ) 和 ( ) 上`__del__()`失败 ( ))`AttributeError``iren``vtkRenderWindowInteractor``renWin``vtkRenderWindow`

请记住，`iren`（并且`renWin`也是）在您的脚本中定义，因此它具有对函数中被删除（假定）的对象的引用。

这会起作用（尽管该函数不会管理所有关闭窗口的东西）：

```
def close_window(iren):
    render_window = iren.GetRenderWindow()
    render_window.Finalize()
    iren.TerminateApp() 
```

然后使用它：

```
...
iren.Initialize()
renWin.Render()
iren.Start()

close_window(iren)
del renWin, iren 
```

# ios - 没有我显式创建线程，怎么会在我的 xcode 项目中创建线程？

> ID：15639763
> 
> 赞同：2
> 
> 时间：2013-03-26T14:36:32.927
> 
> 标签：ios, objective-c, xcode, multithreading

我一直在尝试了解线程在 ios 项目中是如何工作的。每当我在 xcode 中设置断点并运行我的项目时，它会显示 4-5 个正在运行的线程，我不知道我是如何以及何时创建的？我发布了我的 xcode 项目的这张图片，显示了正在运行的各种线程。

![在此处输入图像描述](../Images/cf1db98816fa0726a7cee74f6ffb2c68.png)

有人可以帮助我 1\. 理解上述上下文中的线程 2\. 一些关于线程创建和管理的好教程。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:39:31.167

调试器向您显示模拟器中运行的所有线程。即使您没有明确启动它们，也总会有一些系统线程并且您的应用程序有多个线程，例如，主线程正在处理 UI，但还有另一个处理互联网连接。

总之，即使是“Hello world”应用程序也会向您显示多个线程。

# spring - Odata4J 和 Spring 自动装配

> ID：15639764
> 
> 赞同：4
> 
> 时间：2013-03-26T14:36:43.870
> 
> 标签：spring, jersey, odata, odata4j

我无法将 JpaTransactionManager transactionManagerOdata 自动连接到 Odata ExampleProducerFactory servlet。

TransactionManagerOdata 配置正常，可以在任何其他 Spring 类中自动连接。

在我的情况下 transactionManagerOdata 始终为空。请问，您对如何配置 Odata4J ExampleProducerFactory 有任何建议，以便 Spring 知道这个 servlet。

谢谢

**web.xml**

```
 <servlet>
   <servlet-name>OData</servlet-name>
   <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
   <init-param>
     <param-name>com.sun.jersey.config.property.resourceConfigClass</param-name>
     <param-value>org.odata4j.jersey.producer.resources.ODataApplication</param-value>
   </init-param>
   <init-param>
   <param-name>odata4j.producerfactory</param-name>
   <param-value>com.sungard.webapp.odata.apex.producer.ExampleProducerFactory</param-value>
   </init-param>
   <load-on-startup>1</load-on-startup>
   </servlet>

   <servlet-mapping>
   <servlet-name>OData</servlet-name>
   <url-pattern>/example.svc/*</url-pattern>
   </servlet-mapping> 
```

**ExampleProducerFactory.java**

```
 @Configurable(autowire= Autowire.BY_NAME)
    public class ExampleProducerFactory   implements ODataProducerFactory   
    {   
    @Autowired(required=true)
    private JpaTransactionManager transactionManagerOdata;  

        public ODataProducer create(Properties properties) 
        {               
    EntityManagerFactory emf = transactionManagerOdata.getEntityManagerFactory();               
    JPAProducer tmpProd = new JPAProducer(emf, "", 500);                
    return tmpProd;     
    }
} 
```

**应用程序上下文.xml**

```
 <bean class="org.springframework.orm.jpa.JpaTransactionManager"
           id="transactionManagerOdata">                
       <property name="entityManagerFactory" ref="entityManagerFactoryOdata" />
    </bean>
       <bean class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
    id="entityManagerFactoryOdata">
    <property name="persistenceUnitName" value="persistenceUnitOdata" />
    <property name="persistenceXmlLocation"
        value="classpath*:META-INF/persistence-spring-odata.xml" />
    <property name="dataSource" ref="dataSource" />
    </bean> 
```

# xslt - 使用 xpath 获取节点的文本和元素节点子节点

> ID：15639767
> 
> 赞同：0
> 
> 时间：2013-03-26T14:36:49.257
> 
> 标签：xslt, xpath

我有一个标签，其中包含标签和文本。

```
<p>

Hello world <xref rid='1234'>1234</xref> this is a new world starting
<xref rid="5678">5678</xref>
finishing the new world

</p> 
```

我将使用 xslt 对其进行转换，并且在输出中我需要替换`<xref>`for`<a>`并且文本应该具有相同的格式。

```
<p>

Hello world <a href='1234'>1234</a> this is a new world starting
<a href="5678">5678</a>
finishing the new world

</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:40:43.557

XSLT 中处理此类事情的标准方法是使用*身份模板*将所有内容逐字复制从输入到输出，然后在您想要更改某些内容时使用特定模板覆盖该模板。

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <!-- identity template to copy everything as-is unless overridden -->
  <xsl:template match="*@|node()">
    <xsl:copy><xsl:apply-templates select="@*|node()" /></xsl:copy>
  </xsl:template>

  <!-- replace xref with a -->
  <xsl:template match="xref">
    <a><xsl:apply-templates select="@*|node()" /></a>
  </xsl:template>

  <!-- replace rid with href -->
  <xsl:template match="xref/@rid">
    <xsl:attribute name="href"><xsl:value-of select="." /></xsl:attribute>
  </xsl:template>
</xsl:stylesheet> 
```

如果您知道每个`xref`元素肯定都有一个`rid`属性，那么您可以将两个“特定”模板合并为一个。

请注意，没有任何基于 XSLT 的解决方案能够保留这样一个事实，即您的某些输入元素使用单引号作为属性，而其他输入元素使用双引号，因为此信息在 XPath 数据模型中不可用（两种形式完全等同于就 XML 解析器而言）。XSLT 处理器很可能总是对它输出的所有元素使用一种或另一种，而不管输入元素的外观如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:45:52.513

**解决方案非常简单（只有两个模板）：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="xref">
   <a href="{@rid}"><xsl:apply-templates/></a>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<p>

Hello world <xref rid='1234'>1234</xref> this is a new world starting
<xref rid="5678">5678</xref>
finishing the new world

</p> 
```

**产生了想要的正确结果：**

```
<p>

Hello world <a href="1234">1234</a> this is a new world starting
<a href="5678">5678</a>
finishing the new world

</p> 
```

**说明**：

1.  **[身份规则](http://dpawson.co.uk/xsl/sect2/identity.html)**“按原样”复制选择执行的每个节点。

2.  使用**[AVT](http://www.w3.org/TR/xslt#attribute-value-templates)**（属性值模板）消除了对`xsl:attribute`

# regex - VBSCript - 访问 - 清除文本转义正则表达式

> ID：15639772
> 
> 赞同：1
> 
> 时间：2013-03-26T14:37:06.537
> 
> 标签：regex, ms-access, vbscript

我正在使用一个 vbscript 文件。-> .vbs 扩展文件。将文本片段插入访问数据库。

基本上需要能够放置任何可能插入的字符，而不会引发太多问题。

使用这个：

```
Function CleanUp (input)
     Dim objRegExp, outputStr
     Set objRegExp = New Regexp
     objRegExp.IgnoreCase = True
     objRegExp.Global = True
     objRegExp.Pattern = "[^\w+]"
     outputStr = objRegExp.Replace(input, " ")
     CleanUp = outputStr
End Function 
```

但是遗漏了很多特殊字符，只是希望能够安全地插入最常用的字符，如括号、百分比、点、逗号等。

你能推荐一个更好的正则表达式吗？

参数查询帮助：我正在使用 .vbs 文件来执行我的插入，基本上是我在系统上执行的一个脚本文件，用于将文本文件填充到访问 .mdb 文件中。

```
Dim objConn,objRS,strSQL,rsins
Set objConn = CreateObject("ADODB.Connection")
Set objRS = CreateObject("ADODB.Recordset")
filenpath = "D:\MDBFILES\"
filenname =  "test.mdb"
objConn.Open("DRIVER={Microsoft Access Driver (*.mdb)}; DBQ="& filenpath & filenname) 

strSQL = "insert into [mytable] (F1,F2,F3Date,F4,F5Integer,F6Double) values 
('"     &  rdoc  &  "','" &  rtype   & "','" &  CDate(rdate) &  "','"  &      
CleanUp(Trim(arrCells(0))) &  "','"  &  CDbl(arrCells(1)) &  "','"  &    
CDbl(Trim(arrCells(2))) &  "')" 

set rsins = objConn.Execute(strSQL) 
```

这对我来说非常有效。insert 语句位于循环中，其中的值不断更新。请告知如何创建参数查询并在每次执行时设置参数。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:53:28.520

清理输入的常见做法是定义有效字符列表并将所有不匹配的字符替换为安全字符。空间通常*不*被认为是安全的。最好改用下划线。

```
objRegExp.Global  = True
objRegExp.Pattern = "[^a-zA-ZäÄöÖüÜ0-9.,()_-]"
outputStr = objRegExp.Replace(input, "_") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:15:25.230

关于参数查询的一些注意事项：

```
Set cmd = CreateObject("ADODB.Command")

cmd.ActiveConnection = con ''A connection
cmd.CommandType = 4 ''adCmdStoredProc =4, A stored query will be used

cmd.CommandText = "TheNameOfThequery"
''adInteger=3, adVarWChar = 202
''Parameters are in the same order in which they occur in the query
cmd.Parameters.Append cmd.CreateParameter("@param1", 3, 1, , param1)
cmd.Parameters.Append cmd.CreateParameter("@param2", 202, 1, 50, param2)

''Action query, so execute
cmd.Execute 
```

**重新编辑新信息**

```
strSQL = "insert into [mytable] (F1,F2,F3Date,F4,F5Integer,F6Double) "
strSQL = strSQL & " Values (@1,@2,@3,@4,@5,@6)"    

Set cmd = CreateObject("ADODB.Command")

cmd.ActiveConnection = objConn
cmd.CommandType = 1 ''adCmdStoredProc =4, adCmdText=1

cmd.CommandText = strSQL
''adInteger=3, adVarWChar = 202, adDate = 7
''Parameters are in the same order in which they occur in the query
cmd.Parameters.Append cmd.CreateParameter("@1", 202, 1, 50, rdoc)
cmd.Parameters.Append cmd.CreateParameter("@2", 202, 1, 50, rtype)
''Not sure about this, because you have quotes on your date, so it may be text
cmd.Parameters.Append cmd.CreateParameter("@3", 7, 1, , CDate(rdate))
cmd.Parameters.Append cmd.CreateParameter("@4", 202, 1, 50, Trim(arrCells(0)))
cmd.Parameters.Append cmd.CreateParameter("@5", 202, 1, 50, Trim(arrCells(1)))
cmd.Parameters.Append cmd.CreateParameter("@6", 202, 1, 50, Trim(arrCells(2)))

''Action query, so execute
cmd.Execute  recs
''msgbox "updated " & recs 
```

您可以在一个语句中将文本更新到 Access，但您需要一个 schema.ini，因为您有一个非标准分隔符，例如[Handle TransferText Errors](https://stackoverflow.com/questions/14730093/handle-transfertext-errors/14730415#14730415)

顺便说一句，我倾向于使用：

```
objConn.Open("Provider=Microsoft.ACE.OLEDB.12.0;Data Source="& filenpath & filenname) 
```

或者

```
objConn.Open("Provider=Microsoft.Jet.OLEDB.4.0;Data Source="& filenpath & filenname) 
```

# java - JSTL 对象在 url 中，而不是在标签上下文中

> ID：15639776
> 
> 赞同：0
> 
> 时间：2013-03-26T14:37:23.453
> 
> 标签：java, html, jsp, el

所以我正在编写一个带有 JSP 视图和 JSTL 标签的 Spring 3 webapp。它们通常工作得很好，但是有一个控制器调用不能正确抓取标签。

```
ModelAndView mav = new ModelAndView(
    new RedirectView(RequestUtil.getWebAppRoot(request) + clientShortName, false)
);
mav.addObject("status","Session for interface successfully removed");
return mav; 
```

因此，当我在我的视图中引用它时，我将有一行如下所示：

```
<p>status="${status}"</p> 
```

仅显示为：

```
status="" 
```

现在我通常会认为这是导致我的视​​图呈现不正确的原因，但我实际上发现这个位置附加到我的 URL：

```
?status=Session+for+interface+zFXDEV3+successfully+removed 
```

所以这给我留下了两个问题：

1.  为什么我不能从 JSTL 标记中引用对象？
2.  如果我无法将它作为标签上下文的一部分，那么它在 URL 中做了什么？

对于任何想知道的人来说，类类型是：

```
org.springframework.web.servlet.view.RedirectView.RedirectView
org.springframework.web.servlet.ModelAndView.ModelAndView(View view) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:54:33.523

这不是 JSTL，而是[Expression Language](https://stackoverflow.com/tags/el/info)（通常称为 EL）。问题是 EL`${status}`会查看请求属性中的变量，但是当您重定向到 JSP 时，您的状态是请求参数而不是请求属性（请注意，这是重定向到页面时的正常行为）。

举个更好的例子（取自 StackOverflow 表达式语言代码），执行如下：

```
<%
  String status = (String) pageContext.findAttribute("status");
  if (status != null) {
      out.print(status);
  }
%> 
```

您在这里有两种可能的选择：

1.  正如@SotiriosDelimanolis 所述，您`@Controller`的此 URL 的类应采用请求参数并将它们添加为请求属性。如果您将来可以添加更多请求参数，则需要做很多工作。

2.  使用`${param}`来自 EL 的对象，该对象使您可以访问请求参数。使用它，您应该更改`${status}`为`${param.status}`. 故事结局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T14:40:23.593

因为它是一个`RedirectView`. javadoc 说：

> 默认情况下，所有原始模型属性（或其集合）都作为 HTTP 查询参数公开（假设它们没有被用作 URI 模板变量），但是可以通过覆盖 isEligibleProperty(String, Object) 方法来更改此行为。

因此，您的`String`对象将作为查询参数添加到新的重定向请求中。它们不再可用作新请求的模型/请求属性。

处理重定向 URL的`@Controller`应该将属性重新添加到模型中。

# python - 为什么我导入 numpy 后多处理只使用一个核心？

> ID：15639779
> 
> 赞同：137
> 
> 时间：2013-03-26T14:37:34.093
> 
> 标签：python, linux, numpy, multiprocessing, blas

我不确定这是否更多地被视为操作系统问题，但我想我会在这里问一下，以防有人对 Python 的结局有所了解。

我一直在尝试使用 并行化一个 CPU 密集型`for`循环`joblib`，但我发现不是将每个工作进程分配给不同的核心，而是将它们全部分配给同一个核心并且没有性能提升。

这是一个非常简单的例子......

```
from joblib import Parallel,delayed
import numpy as np

def testfunc(data):
    # some very boneheaded CPU work
    for nn in xrange(1000):
        for ii in data[0,:]:
            for jj in data[1,:]:
                ii*jj

def run(niter=10):
    data = (np.random.randn(2,100) for ii in xrange(niter))
    pool = Parallel(n_jobs=-1,verbose=1,pre_dispatch='all')
    results = pool(delayed(testfunc)(dd) for dd in data)

if __name__ == '__main__':
    run() 
```

...这是我在`htop`此脚本运行时看到的内容：

![htop](../Images/32d56815b1f992cd3422ef0639334253.png)

我在 4 核笔记本电脑上运行 Ubuntu 12.10 (3.5.0-26)。显然`joblib.Parallel`是为不同的工作人员生成单独的进程，但是有什么方法可以让这些进程在不同的内核上执行？

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2013-03-26T15:36:46.007

经过一番谷歌搜索后，我在[这里](http://bugs.python.org/issue17038)找到了答案。

事实证明，某些 Python 模块（`numpy`, `scipy`, `tables`, `pandas`, `skimage`...）在导入时会与核心亲和力混淆。据我所知，这个问题似乎是由它们链接多线程 OpenBLAS 库引起的。

一种解决方法是使用

```
os.system("taskset -p 0xff %d" % os.getpid()) 
```

在模块导入后粘贴此行，我的示例现在可以在所有内核上运行：

![htop_workaround](../Images/34a1c3df13ce09fce248aa7e4bdc02ca.png)

到目前为止，我的经验是，这似乎对`numpy`的性能没有任何负面影响，尽管这可能是特定于机器和任务的。

## 更新：

还有两种方法可以禁用 OpenBLAS 本身的 CPU 关联重置行为。在运行时，您可以使用环境变量`OPENBLAS_MAIN_FREE`（或`GOTOBLAS_MAIN_FREE`），例如

```
OPENBLAS_MAIN_FREE=1 python myscript.py 
```

或者，如果您从源代码编译 OpenBLAS，您可以在构建时通过编辑`Makefile.rule`包含该行来永久禁用它

```
NO_AFFINITY=1 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2015-07-12T17:56:27.500

Python 3 现在公开了直接设置亲和力的[方法](https://docs.python.org/dev/library/os.html#os.sched_setaffinity)

```
>>> import os
>>> os.sched_getaffinity(0)
{0, 1, 2, 3}
>>> os.sched_setaffinity(0, {1, 3})
>>> os.sched_getaffinity(0)
{1, 3}
>>> x = {i for i in range(10)}
>>> x
{0, 1, 2, 3, 4, 5, 6, 7, 8, 9}
>>> os.sched_setaffinity(0, x)
>>> os.sched_getaffinity(0)
{0, 1, 2, 3} 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-03-26T14:47:54.777

这似乎是 Ubuntu 上 Python 的一个常见问题，并不特定于`joblib`：

*   [从 Ubuntu 10.10 升级到 12.04 后，multiprocessing.map 和 joblib 都只使用 1 个 cpu](https://stackoverflow.com/questions/15168014/both-multiprocessing-map-and-joblib-use-only-1-cpu-after-upgrade-from-ubuntu-10)
*   [Python 多处理只使用一个核心](https://stackoverflow.com/questions/6905264/python-multiprocessing-utilizes-only-one-core)
*   [multiprocessing.Pool 进程锁定到单个核心](https://stackoverflow.com/questions/12592018/multiprocessing-pool-processes-locked-to-a-single-core)

我建议尝试 CPU 亲和性 ( [`taskset`](http://manpages.ubuntu.com/manpages/precise/en/man1/taskset.1.html))。

# c++ - 如何在 Windows 上找到 Qt5 CMake 模块

> ID：15639781
> 
> 赞同：47
> 
> 时间：2013-03-26T14:37:40.413
> 
> 标签：c++, windows, visual-c++, cmake, qt5

我正在尝试在 Windows 上使用 CMake 制作一个非常基本的 Qt5 应用程序。我使用[Qt5 的文档来使用 CMake](http://qt-project.org/doc/qt-5.0/qtdoc/cmake-manual.html#imported-targets)，我的`main.cpp`文件只包含一个`main`函数。

我`CMakeLists.txt`的正是：

```
cmake_minimum_required(VERSION 2.8.9)

project(testproject)

# Find includes in corresponding build directories
set(CMAKE_INCLUDE_CURRENT_DIR ON)
# Instruct CMake to run moc automatically when needed.
set(CMAKE_AUTOMOC ON)

# Find the QtWidgets library
find_package(Qt5Widgets)

# Tell CMake to create the helloworld executable
add_executable(helloworld hello.cpp)

# Use the Widgets module from Qt 5.
qt5_use_modules(helloworld Widgets) 
```

在 MSysGit bash 中我输入

```
$ cmake -G"Visual Studio 11" 
```

我得到这个输出：

```
$ cmake -G"Visual Studio 11"
-- The C compiler identification is MSVC 17.0.60204.1
-- The CXX compiler identification is MSVC 17.0.60204.1
-- Check for working C compiler using: Visual Studio 11
-- Check for working C compiler using: Visual Studio 11 -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working CXX compiler using: Visual Studio 11
-- Check for working CXX compiler using: Visual Studio 11 -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
CMake Warning at CMakeLists.txt:11 (find_package):
  By not providing "FindQt5Widgets.cmake" in CMAKE_MODULE_PATH this project
  has asked CMake to find a package configuration file provided by
  "Qt5Widgets", but CMake did not find one.

  Could not find a package configuration file provided by "Qt5Widgets" with
  any of the following names:

    Qt5WidgetsConfig.cmake
    qt5widgets-config.cmake

  Add the installation prefix of "Qt5Widgets" to CMAKE_PREFIX_PATH or set
  "Qt5Widgets_DIR" to a directory containing one of the above files.  If
  "Qt5Widgets" provides a separate development package or SDK, be sure it has
  been installed.

CMake Error at CMakeLists.txt:17 (qt5_use_modules):
  Unknown CMake command "qt5_use_modules".

-- Configuring incomplete, errors occurred! 
```

你有什么想法？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-27T15:46:35.583

行后

```
cmake_minimum_required(VERSION 2.8.9)

project(testproject) 
```

添加

```
set (CMAKE_PREFIX_PATH "C:\\Qt\\Qt5.0.1\\5.0.1\\msvc2010\\") 
```

这解决了问题。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-04-09T18:56:43.220

您应该设置 CMAKE_PREFIX_PATH 环境变量，或者使用 cmake-gui 设置 Qt 5 包的路径。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-04-13T10:48:34.250

您只需将 Qt 路径添加到 Windows %PATH% 变量。正如官方文档中所建议的那样：http: [//doc.qt.io/qt-4.8/install-win.html#step-3-set-the-environment-variables](http://doc.qt.io/qt-4.8/install-win.html#step-3-set-the-environment-variables)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-12-08T22:39:52.943

这是一种利用 cmake 读取注册表的能力来强制注册表值定位匹配 msvc 的技术`Qt5Config.cmake`。

`C:\Qt\`它试图通过对内部的各种“5.x”文件夹名称（例如）进行反向排序来使用最高可用的 Qt5 版本。

这也可以放在模块内，例如`QtLocator.cmake`.

```
SET(QT_MISSING True)
# msvc only; mingw will need different logic
IF(MSVC)
    # look for user-registry pointing to qtcreator
    GET_FILENAME_COMPONENT(QT_BIN [HKEY_CURRENT_USER\\Software\\Classes\\Applications\\QtProject.QtCreator.cpp\\shell\\Open\\Command] PATH)

    # get root path so we can search for 5.3, 5.4, 5.5, etc
    STRING(REPLACE "/Tools" ";" QT_BIN "${QT_BIN}")
    LIST(GET QT_BIN 0 QT_BIN)
    FILE(GLOB QT_VERSIONS "${QT_BIN}/5.*")
    LIST(SORT QT_VERSIONS)

    # assume the latest version will be last alphabetically
    LIST(REVERSE QT_VERSIONS)

    LIST(GET QT_VERSIONS 0 QT_VERSION)

    # fix any double slashes which seem to be common
    STRING(REPLACE "//" "/"  QT_VERSION "${QT_VERSION}")

    # do some math trickery to guess folder
    # - qt uses (e.g.) "msvc2012"
    # - cmake uses (e.g.) "1800"
    # - see also https://cmake.org/cmake/help/v3.0/variable/MSVC_VERSION.html
    MATH(EXPR QT_MSVC "2000 + (${MSVC_VERSION} - 600) / 100")

    # check for 64-bit os
    # may need to be removed for older compilers as it wasn't always offered
    IF(CMAKE_SYSTEM_PROCESSOR MATCHES 64)
        SET(QT_MSVC "${QT_MSVC}_64")
    ENDIF()
    SET(QT_PATH "${QT_VERSION}/msvc${QT_MSVC}")
    SET(QT_MISSING False)
ENDIF()

# use Qt_DIR approach so you can find Qt after cmake has been invoked
IF(NOT QT_MISSING)
    MESSAGE("-- Qt found: ${QT_PATH}")
    SET(Qt5_DIR "${QT_PATH}/lib/cmake/Qt5/")
    SET(Qt5Test_DIR "${QT_PATH}/lib/cmake/Qt5Test")
ENDIF() 
```

接着..

```
# finally, use Qt5 + COMPONENTS technique, compatible with Qt_DIR
FIND_PACKAGE(Qt5 COMPONENTS Core Gui Widgets Xml REQUIRED) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-08T18:56:06.593

@tresf[的解决方案](https://stackoverflow.com/a/47723189/4063520)完美地涵盖了整个想法。只需要补充一件事：微软的版本控制似乎正在变成几何级数。该系列太短尚无法确认，因此从 2019 年开始可以使用以下公式：

```
# do some math trickery to guess folder
# - qt uses (e.g.) "msvc2012"
# - cmake uses (e.g.) "1800"
# - see also https://cmake.org/cmake/help/v3.0/variable/MSVC_VERSION.html
# - see also https://dev.to/yumetodo/list-of-mscver-and-mscfullver-8nd
if ((MSVC_VERSION GREATER_EQUAL "1920") AND (IS_DIRECTORY "${QT_VERSION}/msvc2019"))
    set(QT_MSVC "2019")
elseif ((MSVC_VERSION GREATER_EQUAL "1910") AND (IS_DIRECTORY "${QT_VERSION}/msvc2017"))
    set(QT_MSVC "2017")
elseif (MSVC_VERSION GREATER_EQUAL "1900")
    set(QT_MSVC "2015")
else ()
    MATH(EXPR QT_MSVC "2000 + (${MSVC_VERSION} - 500) / 100")
endif () 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-09-19T15:21:52.847

一种方法是在 Qt Creator 中打开 CMakeLists.txt。Qt Creator 原生支持 CMake，它总是知道 Qt 在哪里。

# jquery - 使用 jquery 从 xml 表中解析记录的列和数据

> ID：15639786
> 
> 赞同：0
> 
> 时间：2013-03-26T14:37:52.853
> 
> 标签：jquery, ajax, xml-parsing

我有一个通过 ajax 调用返回的 xml 对象，其中包含 1 条记录、33 列（只有 1 条记录或没有），看起来像这样

```
 xml "<Table>
    <Supplier>false</Supplier>
    <Address>true</Address>
    <ProductInformation>true</ProductInformation>
    <ProductDetail>true</ProductDetail>
    <BusinessRef>true</BusinessRef>
    <RequiredLiveDate>true</RequiredLiveDate>
    <ActualLiveDateCheck>true</ActualLiveDateCheck>
    <ABEndCheck>true</ABEndCheck>
    <FloorRoomRackSpace>true</FloorRoomRackSpace>
    <PremisesNameNum>true</PremisesNameNum>
    <PremisesExists>true</PremisesExists>
    <IsSiteSecure>true</IsSiteSecure>
    <CheckTechPres>true</CheckTechPres>
    <CheckSepAndResil>true</CheckSepAndResil>
    <SuppConfSepAndRes>true</SuppConfSepAndRes>
    <DelDateContingency>true</DelDateContingency>
    <AwareOfTimeIssues>true</AwareOfTimeIssues>
    <VisitorsNames>true</VisitorsNames>
    <VisitorsTelNum>true</VisitorsTelNum>
    <VisitorsCompanyName>true</VisitorsCompanyName>
    <VisitorsNationality>true</VisitorsNationality>
    <VisitorsClearanceLvl>true</VisitorsClearanceLvl>
    <VisitorsCarReg>true</VisitorsCarReg>
    <SiteVisitSponserNme>true</SiteVisitSponserNme>
    <SiteVisitArrvalDate>true</SiteVisitArrvalDate>
    <SiteVisitTimeSart>true</SiteVisitTimeSart>
    <SiteVisitTimeEnd>true</SiteVisitTimeEnd>
    <WhichAreaToBeVisited>true</WhichAreaToBeVisited>
    <WhoIsToMeetVisitor>true</WhoIsToMeetVisitor>
    <FSSiteName>NA</FSSiteName>
    <WorkType>Cabling</WorkType>
    <VisitorContact>Alan Legg</VisitorContact>
    <SiteLocation>Tech Hall 1</SiteLocation>
</Table>"   String 
```

这是提取数据的代码：

```
 function getExistingCheckList() {
        var PWNum = 'PW11896';
        var testddl = $("#testddl");
        $.ajax({
            type: "POST",
            url: "Circuits_OrderManagementTracker.aspx/getAnyChecklistRecords",
            data: "{'PWNum': '" + PWNum + "'}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (response) {
                var xmlDoc = $.parseXML(response.d);
                var xml = $(xmlDoc);
                var CheckListsReturned = xml.find("Table");

              $.each(CheckListsReturned, function (index, CheckListsReturned) {
                    ColumnName = $(this).find("title").????()
                    columnsData = $(this).find("title").????()
                    testddl.append('<option>' + ColumnName + '</option>');
                    testddl2.append('<option>' + columnsData + '</option>');
                });
            },
            failure: function (msg) {
                alert(msg);
            }
        });
    } 
```

我希望遍历 xml，提取所有 33 列的列名和列值并填充 2 个下拉列表，但我在语法上苦苦挣扎，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:36:41.373

```
var checkListsReturned = xml.find("Table").children();
checkListsReturned.each(function() {
    var columnName = $(this)[0].tagName;
    var columnData = $(this).text();
    testddl.append('<option>' + ColumnName + '</option>');
    testddl2.append('<option>' + columnData + '</option>');
}); 
```

# yacc - 语法错误后如何丢弃其余行

> ID：15639790
> 
> 赞同：0
> 
> 时间：2013-03-26T14:38:13.290
> 
> 标签：yacc, lex, abstract-syntax-tree

我正在实现一个小外壳，并使用 lex&yacc 来解析命令。Lex 从 读取命令`stdin`， yacc 在 之后执行命令`yyparse`。

问题是，当出现语法错误时，yacc 会提示错误并从头开始解析。在这种情况下，`cmd1 >>> cmd2`会导致运行，`cmd2`因为`>>>`是语法错误。

我的问题是在遇到语法错误后如何丢弃当前命令的其余部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-08T01:43:31.047

如果您想编写一种交互式语言，其提示允许用户输入表达式，那么在整个输入流上简单地使用 yacc 是个坏主意。Yacc 可能会对一行中的某些内容感到困惑，然后误解后续行。例如，用户可能在第一行有一个不平衡的括号。或未关闭的字符串文字，然后 yacc 将继续使用输入的后续行，以关闭构造。

最好从用户那里收集输入行，然后将其解析为一个单元。就 Yacc 而言，行尾只是输入的结束。

如果您使用的是 lex，有一些方法可以重定向 lex 以从内存中的缓冲区而不是`FILE *`流中读取字符。查找有关`YY_INPUT`宏的文档，您可以在 Lex 文件中定义这些文档，以基本上指定 Lex 用于获取输入字符的代码。

* * *

**类比时间：**使用 lex/yacc 开发的扫描仪直接处理交互式用户输入有点像[使用`scanf`处理用户输入](http://c-faq.com/stdio/scanfprobs.html)。而将一行捕获到缓冲区然后解析它更像是使用`sscanf`. 引用：

> 用 sscanf 解析字符串是非常合适的（只要检查了返回值），因为它很容易重新获得控制，重新开始扫描，如果输入不匹配则**丢弃**等等。 [comp.lang.c FAQ , 12.20]。

# matlab - 在散点图/线性回归上以 3D 绘制 normpdf

> ID：15639792
> 
> 赞同：1
> 
> 时间：2013-03-26T14:38:19.407
> 
> 标签：matlab, gnuplot

我有一组数据`x(1000,2)`，

```
2   18.1199158925616
3   9.56472607516328
7   34.3629828698699
4   30.9865760010538
7   54.4869549747429
8   54.7696742935546
2   1.45832407805944
3   15.4231700658276
8   57.0479651194063
1   5.34909555648445
2   11.5593766410445
2   17.4392978010484
6   25.4072607558367
4   15.1248062077068
2   13.2035176450795
7   33.2507069131440
5   21.6859046133920
3   18.4458236149053
1   0.824962982951128
8   46.6322862041701
8   43.6889420657037
2   17.0930689315346
3   13.9754117410459
2   1.99260423380962
11  86.3172411757665
8   50.6244869641866
1   1.16602336459361
2   12.6604166373800
2   17.4519078987572
5   27.4799515521804 
```

我`plot(x(:,1),x(:,2),'*r');`以散点图的形式绘制： ![在此处输入图像描述](../Images/639c17ed7630bbf7d217014d1167142f.png)

但希望`normpdf`对 x(:,1) 的选定值使用如下所示的内容： ![在此处输入图像描述](../Images/f364500359c41b56405d3d0b551a619e.png)

`x(:,2)`要在对应于的列中查找值`x(:,1)==3`：

```
[x3]=x(find(x(:,1)==3),2);
mu=mean(x3);
sig=std(x3);
Y=normpdf(x3,mu,sig);

figure('color',[1,1,1]);
hhh=plot3(3*ones(length(xi)),x(find(x(:,1)==3),2),Y,'-r')
p = polyfit(x(:,1),x(:,2),1);
plin=plot(x(:,1),polyval(p,x(:,1)),'-b'); 
```

![我的版本看起来像裤子](../Images/84a239baa9c5c7aeee03074cead104b6.png) 但是我如何让红色虚线 pdf 成为平滑曲线，因为 '-r' 给了我之字形线。我必须以某种方式订购数据吗？另外，如何使法线曲线中心的红点下降到蓝线？也许最重要的是，作为一个见多识广的读者，您希望看到这种情节还是其他不那么花哨的情节？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:32:39.283

是的，对`x`-values 的排序应该会让你看到红色曲线。你也不需要`find()`在这里。我还没有测试过代码，但这些更改应该可以工作：

```
[x3]=sort(x(x(:,1)==3,2));
mu=mean(x3);
sig=std(x3);
Y=normpdf(x3,mu,sig);

figure('color',[1,1,1]);
hhh=plot3(3*ones(length(xi)),x3,Y,'-r')
p = polyfit(x(:,1),x(:,2),1);
plin=plot(x(:,1),polyval(p,x(:,1)),'-b'); 
```

至于这样一个情节的价值，我猜它会很混乱。但我想它可以用来给出数据分布的一般视图。

# git - 使用所有分支更新分叉的 Github 存储库

> ID：15639793
> 
> 赞同：2
> 
> 时间：2013-03-26T14:38:21.960
> 
> 标签：git, github, git-push, git-pull

我在我的 Github 帐户上创建了一个存储库，其中包含 1000 多个提交和 20 个分支。

然后我将它克隆到我的本地机器上。

有什么办法可以用原始的所有分支和提交更新我的本地机器的存储库和我的 Github 的存储库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-02T09:16:02.083

也许为时已晚，但迟到的答案总比没有好：

```
# add the upstream:

git remote add upstream https://github.com/whoever/whatever.git

#create a script to loop through the whole branches and merge changes or create them if not found

sync_all_branch () {
  git fetch upstream
  for upstream_branch in   $( git branch -a |awk 'BEGIN {FS="/"} $2=="upstream" {print $3}' ) ;
  do
      if git checkout $upstream_branch
      then
          echo merge $upstream_branch
          git merge -s recursive -Xours upstream/$upstream_branch 
      else
          echo create $upstream_branch
          git checkout -b $upstream_branch upstream/$upstream_branch
      fi
  done
  git checkout master
}

# then call the script

sync_all_branch

#push changes to your remote repository

git push --all 
```

如果您想在上游分支之上重新定位您的分支（删除您所做的更改但未合并到上游），您应该更改

```
git merge -s recursive -Xours upstream/$upstream_branch 
```

和

```
git rebase -s recursive -Xours upstream/$upstream_branch 
```

并在最后一个命令中添加“-f”

*sync_all_branch 脚本来自[https://stackoverflow.com/a/7766487/2481592](https://stackoverflow.com/a/7766487/2481592)

# jquery - Jquery UI .sortable() 触发选择排序

> ID：15639795
> 
> 赞同：0
> 
> 时间：2013-03-26T14:38:25.110
> 
> 标签：jquery, jquery-ui, sorting, jquery-ui-sortable, html-select

我完全坚持尝试使 ul 可排序，并在更新函数中使用 ul 中项目的新顺序对（隐藏）选择进行排序

这是我的功能

```
jQuery(document).ready(function ($) {
function sort() {
    $('.element').sortable({
        update: function (event, ui) {
            var draggingElement = $('.item');
            draggingElement.each(function () {
                var ordering = $(this).index();
                var option = 'opt' + ordering + '';
                $("#list").find('#' + option + '').index(ordering);
            });
        }
    });
};
sort();
}); 
```

这是我的 html

```
<ul class="element">
  <li class="item">0</li>
  <li class="item">1</li>
  <li class="item">2</li>
  <li class="item">3</li>
</ul>
<select name="list1" multiple="true" class="list_hidden" id="list">
  <option id="opt0" selected="selected" value="0">0</option>
  <option id="opt1" selected="selected" value="1">1</option>
  <option id="opt2" selected="selected" value="2">2</option>
  <option id="opt3" selected="selected" value="3">3</option>
</select> 
```

我真的不知道该怎么做，我也尝试制作一个选项数组，对它们进行排序并将它们附加到选择中，但我想我完全错了

也许有人已经解决了这个问题？

选择必须是一个multiple=true

这是一个可视化我的问题的小提琴

[http://jsfiddle.net/JKjD5/4/](http://jsfiddle.net/JKjD5/4/)

提前感谢，***任何***提示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:55:32.667

你可以这样做：（工作但未优化）

```
jQuery(document).ready(function ($) {
  function sort() {
    $('.element').sortable({
    update: function (event, ui) {
      var draggingElement = $('.item');
      $("#list").empty();
      draggingElement.each(function () {
        $("#list").append($('<option />').attr('id','opt'+$(this).text()).attr('value',$(this).text()).attr('selected', 'selected').text($(this).text()));
     });
  }
});
};
sort();
}); 
```

现在它可以工作[小提琴](http://jsfiddle.net/JKjD5/7/)

如果您愿意，可以将一些存储`data`到`li`列表中，以便在排序函数中使用它们，例如：

```
<li class='item' data-rel='opt45' data-value='123' >text</li> 
```

并像这样检索它们：（在`.each`排序函数中）

```
$(this).attr('data-value'); 
```

# r - Sweave 中对图形的动态引用

> ID：15639803
> 
> 赞同：1
> 
> 时间：2013-03-26T14:38:52.077
> 
> 标签：r, reference, latex, sweave

在你说使用搜索之前，我做了，我读[了这个答案](https://stackoverflow.com/questions/9023256/dynamic-references-to-figures-in-a-r-comment-within-sweave-document)，我试过了，但它没有帮助，我认为这可能是因为它来自另一个文件。（没有把握..）

我有一个使用 R studio 编写的 Sweave 文档。运行 R 代码可以完美运行，包括其他文件也可以正常运行。以下是主文件的一些示例：

```
\documentclass{report}

\begin{document}
\SweaveOpts{concordance=TRUE}

\maketitle
\tableofcontents

\input{tex/introduction}
\input{tex/methods}
\SweaveInput{tex/analysis}
\input{tex/conclusions}
\SweaveInput{tex/further}

\bibliographystyle{plain}
\bibliography{tex/literature}

\appendix
\input{tex/appendix}

\end{document} 
```

然后在我`.Rnw`引用的文件之一中`\SweaveInput{}`使用如下内容：

```
\begin{figure}[h]
 \label{fig1}
 \caption{This is a caption!}
 \centering
<<fig=TRUE, echo=FALSE>>=
...data and plotting...
@
\end{figure}

In figure \ref{fig1} we can see that there is... 
```

而不是一个数字我只是得到`[??]`

你可能知道为什么会这样吗？我该如何解决？

我也查看了`knitr`包，但我不知道如何像我的示例中那样包含外部文件，并且出现其他有趣的错误。另外，我不知道它是否会在那里工作。基本上我将不得不做更多的研究为什么我的代码不起作用，我只想让当前的代码运行。

肿瘤坏死因子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T14:45:17.060

`label`需要紧随其后`caption`。例如，参见[https://tex.stackexchange.com/q/23385](https://tex.stackexchange.com/q/23385)

# rdlc - rdlc 根据条件跳过隐藏行

> ID：15639807
> 
> 赞同：0
> 
> 时间：2013-03-26T14:39:01.740
> 
> 标签：rdlc

我知道这听起来可能微不足道，但我就是找不到答案。我有一个 rdlc 报告，我喜欢在其中交替行背景颜色，为此我使用了以下公式：

```
 =iif(RowNumber(Nothing) Mod 2, "#e5e5e5", "White") 
```

我还需要隐藏一些行，为此我使用以下公式：

```
 = Fields!MeanAeb.Value <> "" 
```

其中 MeanAeb 是我报告中的一个字段。我的问题是 rowNumber 也计算隐藏的行，所以我的表可能有两个连续的具有相同背景的行。有没有办法只考虑可见行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:08:54.333

所以如果有人有同样的问题，我有一个答案；

在 ReportProperties 的代码部分添加以下内容

```
 Dim customRowNumber as Integer = 0
    Dim previousRowNumber as integer = 0

    Function CustomRowCounter(conditionToTest as Boolean, rowNumbner as Integer) as Integer
        if(conditionToTest and rowNumbner <> previousRowNumber)
           customRowNumber = customRowNumber + 1
           previousRowNumber = rowNumbner 
        end if
        return customRowNumber
    End Function 
```

然后在列属性的背景字段上添加以下条件：

```
 =iif(Code.CustomRowCounter(Fields!MeanAeb.Value="",RowNumber(nothing)) Mod 2, "#e5e5e5", "White") 
```

这很好，因为您可以添加任何您喜欢的条件来代替 Fields!MeanAeb.Value=""。请记住在 rowVisibility 字段中使用条件的倒数，否则可能会导致奇怪的效果。

哦，如果你想要一个棋盘看看你的报告，只需删除 previousRowNumber :)

# c# - 如何在 UI 上打印，然后让 UI 线程在 Windows 手机应用程序的同一个 Click 事件中等待某个时间

> ID：15639809
> 
> 赞同：0
> 
> 时间：2013-03-26T14:39:03.987
> 
> 标签：c#, windows-phone-7, event-handling, wait, ui-thread

我有一种情况，我需要在 textbox1 中打印一些东西，然后等待一秒钟，使图像可见，然后再次等待一秒钟，然后单击一个按钮在 textbox2 中打印一些东西。当我在按钮的 Click 事件中在 textbox1 中打印后写了一个睡眠。我看到 UI 上的打印是一次完成的，即我希望它在暂停的情况下一个接一个地按顺序完成，但由于它是一个事件句柄，它一直等到结束并一次全部显示在 UI 上到底。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:48:41.003

我不知道它是否像 Windows phone 8 一样工作，但你可以“睡觉”使方法异步并调用

```
await Task.Delay(1000);

public async void myMethod(){
    printString1();
    await Task.Delay(1000);
    showImage();
    await Task.Delay(1000);
    printString2();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:58:35.037

您可以将代码放在一个线程中，并在需要更新 UI 时使用调度程序：

```
private void Process()
{
    this.Dispatcher.BeginInvoke(() => this.TextBox1.Text = "Hello");
    Thread.Sleep(1000);
    this.Dispatcher.BeginInvoke(() => this.Picture1.Visibility = Visibility.Visible);
    Thread.Sleep(1000);
    this.Dispatcher.BeginInvoke(() => this.TextBox2.Text = "World");
} 
```

然后，启动线程（当用户单击按钮时）：

```
var thread = new Thread(this.Process);
thread.Start(); 
```

# xml - Vb.Net XmlDeseralize xml 属性转换为类对象

> ID：15639810
> 
> 赞同：1
> 
> 时间：2013-03-26T14:39:06.160
> 
> 标签：xml, vb.net, serialization, deserialization

我无法将 xml 属性反序列化为类属性。

```
<?xml version="1.0" encoding="UTF-8" ?> 
<Ball clientid="xyz">
    <Name>Tommy</Name>
    <ballColor transactionid="1234">White</ballColor>
    <radius>9</radius>
    <PowerLevel>9001</PowerLevel>
    <RandomProp>This is another property</RandomProp>
</Ball> 
```

是我正在使用的 XML... 现在我将发布我拥有的代码。问题是我能够将 clientid 获取到属性中，但不能获取“transactionid”所以我无法提取子元素的属性

```
Imports System.Xml.Serialization
Public Class Ball
    Inherits ballColor
    Public Property Name As String
    Public Property radius As Double
    Public Property PowerLevel As String
    Public Property RandomProp As String
    <XmlAttribute("clientid")> Public Property clientid() As String

    Public Sub New()

    End Sub

End Class
<XmlRoot("Ball")>
Public Class ballColor
    <XmlElement("ballColor")> Public Property ballColor As String
    <XmlAttribute("transactionid")> Public Property transactionid As String
    Public Sub New()

    End Sub
End Class 
```

所以我在表单上进行了实际的反序列化调用，但这似乎不是我的问题，因为当我运行它时，除了事务 ID 之外，实际上每个属性都被正确填充。我究竟做错了什么？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:13:22.760

我宁愿将 ballColor 作为球内的属性。在下面试试这个。

```
<Serializable>
<XmlRoot("Ball")>
Public Class Ball
    Public Property Name As String
    Public Property radius As Double
    Public Property PowerLevel As String
    Public Property RandomProp As String
    <XmlAttribute("clientid")> Public Property clientid() As String
    Public Property ballColor As ballColor

    Public Sub New()
        ballColor = New ballColor
    End Sub

End Class

<Serializable>
Public Class ballColor
    <XmlText> Public Property ballColor As String
    <XmlAttribute("transactionid")> Public Property transactionid As String

    Public Sub New()

    End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T14:54:57.503

将您的 ballColor 类更改为：

```
Public Class ballColor

    <XmlAttribute("transactionid")> 
    Public Property transactionid As String   

    <XmlText> 
    Public Property Value As String
End Class 
```

这将在字段中存储属性`transactionid`值`ballcolor.transactionid`和`ballcolor`值`ballcolor.value`

更改主球类别

```
Public Class Ball
  Public Property Name As String
    Public Property radius As Double
    Public Property PowerLevel As String
    Public Property RandomProp As String
    <XmlAttribute("clientid")> Public Property clientid() As String
    Public Property _ballColor As ballColor
End Class 
```

# c++ - 在 ofstream::close() 返回后，是否保证可以立即打开文件以供读取？

> ID：15639814
> 
> 赞同：7
> 
> 时间：2013-03-26T14:39:16.577
> 
> 标签：c++, linux, file-io, race-condition

我需要我的代码（Linux 上的 C++）来调用第二个可执行文件，之前编写了一个由第二个程序读取的输出文件。天真的方法，

```
std::ofstream out("myfile.txt");
// write output here
out.close();
system("secondprogram myfile.txt"); 
```

遭受潜在的竞争条件，即使 out.close() 已经执行，文件也不能立即被`secondprogram`? 如果是这样，解决此问题的最佳做法是什么？

三个注意事项：

*   如果这是依赖于文件系统的，我对 ext3 和 tmpfs 上的行为感兴趣。
*   显然还有其他原因（文件权限等）导致第二个程序可能无法打开文件；我只是对比赛条件的可能性感兴趣。
*   上面示例中的硬编码文件名是为了简单起见；实际上我使用`mkstemp`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:04:57.933

一旦文件被关闭，所有写入的数据都保证会从`ofstream`对象的缓冲区中刷新（因为此时您可以销毁它而不会丢失任何数据，并且实际上关闭文件是由析构函数在内部完成的如果需要的话）。这并不意味着此时数据将物理存储在磁盘上（可能不会，因为操作系统磁盘驱动程序的缓存行为），但在同一操作系统中运行的任何程序都将能够一致地读取文件（因为操作系统随后将执行从缓存数据中的读取）。如果您需要将操作系统缓冲区刷新到磁盘（您的第二个程序不需要*它*来正确读取输入文件） ，那么您可能需要查看`sync()`.`<unistd.h>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T15:13:40.597

我之前错过了一种潜在的故障模式：当文件无法通过`secondprogram`. 问题*不*在于文件在返回后可能被锁定/不一致`close()`，而是另一个与您的完全无关的程序可能会在`close()`和之间打开文件`system()`（例如，一个 AV 扫描仪，有人`grep`通过包含该文件的目录，一个备份过程）。如果发生这种情况，`secondprogram`即使*您的*程序运行正确，也会失败。

TL/DR：即使一切都按预期工作，但您必须考虑`secondprogram`可能无法打开文件的情况！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T14:41:43.807

根据[cplusplus.com](http://www.cplusplus.com/reference/fstream/fstream/close/)，当所有数据都写入磁盘后，该函数将返回。所以不应该有竞争条件。

# node.js - NodeJS 和 Forever（监控和重启应用）

> ID：15639828
> 
> 赞同：4
> 
> 时间：2013-03-26T14:39:47.640
> 
> 标签：node.js, monitor, forever

我正在尝试设置`forever`并`NodeJS`监视和重新启动我的应用程序，并在退出时保持其运行。目前我有这个：

```
var forever = require("forever-monitor");

var child = new(forever.Monitor)('main.js', {
    'silent': false,
    'pidFile': '../pids/app.pid',
    'sourceDir': '.',
    'watch': true,
    'watchDirectory': '.',
    'watchIgnoreDotFiles': null,
    'watchIgnorePatterns': null,
    'logFile': '../logs/forever.log',
    'outFile': '../logs/forever.out',
    'errFile': '../logs/forever.err'
});

child.start(); 
```

它可以很好地启动我的应用程序，但是当我在文件中进行更改时它不会重新启动它。有什么我缺少的选择吗？

编辑：在深入研究问题后，我发现实际上检测到文件更改，只是进程没有重新启动。我正在查看 ~317 行 - Monitor.prototype.kill （在 monitor.js 中），但一切看起来应该可以工作。

编辑：我设法解决了这个问题。这是库代码中的一个错误。在这里查看：[https ://github.com/nodejitsu/forever-monitor/issues/27](https://github.com/nodejitsu/forever-monitor/issues/27)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T20:39:57.803

nodemon 和永远是持续运行的痛苦。我会先尝试使用 shell 脚本。如果您在 linux 上，只需在 /etc/cron.d 中放置一个 monitornode 文件

```
*/1 * * * * root  /var/www/nodejs/monitornode.sh 
```

并在您的机器上的某处有一个脚本

如果你刚开始，试试这个，创建一个文件 /var/www/nodejs/monitornode.sh 和 chmod +x ：

```
#!/bin/sh

TT_NODE="node /var/www/nodejs/node.js"

# NODEJS Watcher
if [ -z `pgrep -f -x "$TT_NODE"` ] 
then
    echo "Starting $TT_NODE."
    cmdNODE="$TT_NODE >> /var/www/logs/node.log &"
    eval $cmdNODE
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T04:39:28.417

查看`nodemon`软件包以完成整个“文件更改时重新加载”的事情。

# c# - C# Winforms 如何在调用 Application.Run() 之前更新表单（加载屏幕）

> ID：15639833
> 
> 赞同：0
> 
> 时间：2013-03-26T14:39:59.950
> 
> 标签：c#, winforms

**场景**我有一个带有标记进度条的初始屏幕，它应该是动画的，向用户指示编程正在初始化和启动。

这个（闪屏）表单是最先开始的——甚至在 Application.Run(theMainForm) 之前。

**问题：**如何更新此初始屏幕以启用功能（例如动画进度条）。

**注意**我知道 Application.Run() 是 Windows 的消息循环/泵，这不是我的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:45:30.447

你可以从Application.Run开始把它放在自己的线程中，看看： http: [//www.codeproject.com/Articles/5454/A-Pretty-Good-Splash-Screen-in-C](http://www.codeproject.com/Articles/5454/A-Pretty-Good-Splash-Screen-in-C)

# jquery - 单击按钮时使用 jQuery 从一个特定文本框元素中删除占位符文本

> ID：15639837
> 
> 赞同：-3
> 
> 时间：2013-03-26T14:40:06.787
> 
> 标签：jquery, html

我有一个文本框元素，其中包含一个名为“housenumber”的占位符。

目前，当在我的表单上按下搜索按钮时，文本“housenumber”被传递到我的 SQL 查询中，而不是什么都没有（空/空白）。

有人可以提供 jQuery 来删除 'housenumber' 占位符文本，这样如果没有输入任何内容并且点击搜索按钮，我的文本框就很清楚了吗？

请注意，搜索按钮不是表单提交按钮，只是一个 jQuery 点击事件按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:45:55.310

```
$("#button").click(function(){
    if ($("#input").val()=="housenumber") {
        $("#input").val("");
    }
}); 
```

# linq - 如何使用需要将当前项目上下文与传入值进行比较的自定义函数编写 LINQ to SQL 语句？

> ID：15639838
> 
> 赞同：2
> 
> 时间：2013-03-26T14:40:08.230
> 
> 标签：linq, linq-to-sql, lambda

我想看看数据库中是否存在记录。我正在检查空/空白，然后在各处进行字符串比较，我想放入一个函数，这样我就不必一遍又一遍地编写相同的代码。

这是我要比较的每件事的代码的样子......

```
return Db.AttributeNames.FirstOrDefault(an =>
    (!string.IsNullOrWhiteSpace(an.Name) &&
    string.Compare(attributeName.Name, an.Name, StringComparison.OrdinalIgnoreCase) == 0) &&
    (!string.IsNullOrWhiteSpace(an.Namspace) &&
    string.Compare(attributeName.Namespace, an.Namspace, StringComparison.OrdinalIgnoreCase) == 0)); 
```

我已经尝试过这样的事情......这显然是不对的。

```
public Class1 Get(string url)
{
    return Db.Class1s.FirstOrDefault(f => Equal<Class1>(f.Value, url));
}
public static Expression<Func<T, bool>> Equal<T>(string input, string url)
{
    return a => input == url; // just to test for now, I need to add null/ws check and do compare
} 
```

我知道我知道。我不知道我在做什么..但我会很感激一些帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:54:25.553

您可能需要创建一个扩展方法：

```
 public static class MyExtensions
 {
    public static bool UrlEqual(this Class1s obj, string url)
    {
         return obj.Value == url;
    }
 } 
```

然后您可以拨打以下电话：

```
 return Db.Class1s.FirstOrDefault(f => f.UrlEqual(url)); 
```

# php - 可以从 Google Maps 调用中获取 JSON

> ID：15639844
> 
> 赞同：1
> 
> 时间：2013-03-26T14:40:25.697
> 
> 标签：php, json, google-maps

我已经设法从谷歌地图获得邮政编码的经度和纬度，但我无法获得两者之间的距离。下面的 url 给了我一些 JSON：

```
https://maps.googleapis.com/maps/api/distancematrix/json?origins=51.6896118,-0.7846495&destinations=51.7651382,-3.7914676&units=imperial&sensor=false 
```

但我无法使用 PHP 将其剥离：

```
<?php
    $du = "https://maps.googleapis.com/maps/api/distancematrix/json?origins=51.6896118,-0.7846495&destinations=51.7651382,-3.7914676&units=imperial&sensor=false";
    $djd = json_decode(utf8_encode($du),true);
    print("-".$djd."-");
?> 
```

有人知道这是为什么吗？

**编辑**

以下工作得很好：

```
<?php
    $pc1 = 'SA92NH';
    $pc2 = 'HP270SW';
    $url1 = "https://maps.googleapis.com/maps/api/geocode/json?address=".$pc1."&sensor=false";
    $url2 = "https://maps.googleapis.com/maps/api/geocode/json?address=".$pc2."&sensor=false";
    $url1_data = file_get_contents($url1);
    $url2_data = file_get_contents($url2);
    $json1_data = json_decode(utf8_encode($url1_data),true);
    $json2_data = json_decode(utf8_encode($url2_data),true);
    $longlat1 = $json1_data['results'][0]['geometry']['location']['lat'].",".$json1_data['results'][0]['geometry']['location']['lng'];
    $longlat2 = $json2_data['results'][0]['geometry']['location']['lat'].",".$json2_data['results'][0]['geometry']['location']['lng'];
    print($longlat1."<br>\n");
    print($longlat2."<br>\n");
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T14:44:32.613

这是你想要的？您需要获取数据，不能只输入 url。

在我的示例中，我使用 get [file_get_contents](http://php.net/manual/en/function.file-get-contents.php)。

```
<?php
    $du = file_get_contents("https://maps.googleapis.com/maps/api/distancematrix/json?origins=51.6896118,-0.7846495&destinations=51.7651382,-3.7914676&units=imperial&sensor=false");
    $djd = json_decode(utf8_encode($du),true);
    print_r($djd);
?> 
```

[http://codepad.viper-7.com/LqxpJW](http://codepad.viper-7.com/LqxpJW)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T14:46:34.557

```
$url = 'https://maps.googleapis.com/maps/api/distancematrix/json?origins=51.6896118,-0.7846495&destinations=51.7651382,-3.7914676&units=imperial&sensor=false';

$content = file_get_contents($url);
$json = json_decode($content, true); 
```

然后像数组一样访问 $json ！像这样的东西：

```
echo $json['rows']['elements']['distance']['text']; 
```

# database - 弹簧集成 | 使用 HTTP 出站网关时如何保留消息上下文？

> ID：15639846
> 
> 赞同：0
> 
> 时间：2013-03-26T14:40:26.697
> 
> 标签：database, rest, spring-integration

我需要将 JSON 结构发布到 REST 端点并处理它返回的数据（所有这些都使用 JSON）。

为此，我计划使用 HTTP 出站网关。现在的问题是，在我将我的对象（消息的有效负载）转换为 JSON 格式之后，在我将其传输到端点之前，有效负载应该被放入数据库中，以便在端点不可用的情况下可以调用重试。

正如我想要的那样 a) 在调用后相应地设置状态
b) 使用来自 REST 端点的 uuid 更新相应的行

我需要以某种方式将来自我的对象（业务密钥）的 uuid 作为出站消息的一部分与放置在回复通道上的 REST 端点的响应相关联。由于我不能要求提供商将我的 uuid 作为响应的一部分返回，我如何才能纯粹在客户端实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:21:42.987

您可以使用`request-handler-advice-chain`. 简单的子类`AbstractRequestHandlerAdvice`。它实际上是一个“围绕”的建议，因此您可以在调用处理程序之前将其存储在数据库中，然后再更新状态。

请参阅[“向端点添加行为”](http://static.springsource.org/spring-integration/reference/html/messaging-endpoints-chapter.html#message-handler-advice-chain)

特别是[“自定义建议课程”](http://static.springsource.org/spring-integration/reference/html/messaging-endpoints-chapter.html#custom-advice)

# r - 如何获取 pvalues 列表？

> ID：15639855
> 
> 赞同：5
> 
> 时间：2013-03-26T14:40:49.287
> 
> 标签：r

我执行了 wilcox 测试，现在我想将 p.value 提取到列表或矩阵中。

```
DF <- data.frame(A1=sample(1:9, 10, T),
                     A2=sample(1:9, 10, T),
                     A3=sample(1:9, 10, T),
                     B1=sample(1:9, 10, T),
                     B2=sample(1:9, 10, T),
                     B3=sample(1:9, 10, T))

sampA <- DF[,grep('A', names(DF))]  # Sample with columns A
sampB <- DF[,grep('B', names(DF))]  # Sample with columns B

lapply(1:nrow(DF), function(i){
  wilcox.test(as.numeric(sampA[i,]), as.numeric(sampB[i,]), exact=FALSE )
}) 
```

我对每一行的 wilcox 测试的结果如下所示：我想知道如何获取列表或矩阵中的 p.value 以导出到 excel 文件？[[1]]

```
 Wilcoxon rank sum test with continuity correction

data:  as.numeric(sampA[i, ]) and as.numeric(sampB[i, ]) 
W = 3, p-value = 0.6579
alternative hypothesis: true location shift is not equal to 0 

[[2]]

    Wilcoxon rank sum test with continuity correction

data:  as.numeric(sampA[i, ]) and as.numeric(sampB[i, ]) 
W = 0, p-value = 0.0722
alternative hypothesis: true location shift is not equal to 0 

[[3]]

    Wilcoxon rank sum test with continuity correction

data:  as.numeric(sampA[i, ]) and as.numeric(sampB[i, ]) 
W = 6, p-value = 0.6579
alternative hypothesis: true location shift is not equal to 0 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T14:43:57.733

只需添加`$p.value`以从您的对象中提取您的 p.value `wilcox.test`：

```
lapply(1:nrow(DF), function(i){
  wilcox.test(as.numeric(sampA[i,]), as.numeric(sampB[i,]), exact=FALSE )$p.value
}) 
```

这使 ：

```
[[1]]
[1] 1

[[2]]
[1] 1

[[3]]
[1] 0.8247781

[[4]]
[1] 0.8247781 
```

通过使用`sapply`而不是 `lapply`你会得到一个向量而不是一个列表，这可能更容易操作。

```
sapply(1:nrow(DF), function(i){
  wilcox.test(as.numeric(sampA[i,]), as.numeric(sampB[i,]), exact=FALSE )$p.value
}) 

# [1] 1.0000000 1.0000000 0.8247781 0.8247781 0.0765225 0.8247781 1.0000000
# [8] 0.8247781 0.2682859 0.0765225 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T14:45:00.197

使用`sapply`和引用 p.value 名称...

```
sapply(1:nrow(DF), function(i){wilcox.test(as.numeric(sampA[i,]), as.numeric(sampB[i,]), exact=FALSE )$p.value})

#[1] 0.8247781 0.0765225 0.8247781 1.0000000 0.2682859 0.6625206 1.0000000
#[8] 0.1211833 0.5065552 0.8247781 
```

这将返回一个向量而不是一个列表（我通常发现向量更容易处理，例如因为你不能使用索引列表`mylist[[1:5]]`，但你可以这样做`myvector[1:5]`，但这是个人喜好

# asp.net - 使用 Visual Studio 获取多行文本框的内容

> ID：15639856
> 
> 赞同：0
> 
> 时间：2013-03-26T14:40:49.213
> 
> 标签：asp.net, sharepoint, sharepoint-2010

```
TextBox txtContent = new TextBox();

SPList announcementList = mySite.Lists["Announcements"];
SPListItem getAnnouncement = announcementList.Items[0];
txtContent.Text = getAnnouncement["Body"].ToString(); 
```

这给出了输出

```
<div class="ExternalClass61EB4AB2F639401D9141EADFC30FEDFE">
    <p>Please follow plan of action.​&lt;/p>
</div> 
```

我想要输出为

```
"Please follow plan of action." 
```

请指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T02:17:04.007

```
SPHttpUtility.ConvertSimpleHtmlToText(text, text.Length - 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:41:17.343

如果您要从内容中删除 HTML，此答案将对您有所帮助：

[如何从 ASP.NET 中的字符串中去除 HTML 标记？](https://stackoverflow.com/questions/785715/how-can-i-strip-html-tags-from-a-string-in-asp-net)

那里有许多解决方案，例如使用 Regex 的解决方案。你只需要这行代码：

```
txtContent.Text=WebUtility.HtmlDecode(Regex.Replace(getAnnouncement["Body"].ToString(), "<[^>]*(>|$)", string.Empty)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T23:46:31.067

`SPFieldMultiLineText`像下面这样使用：

```
SPListItem getAnnouncement = announcementList.Items[0];
SPFieldMultiLineText bodyField = getAnnouncement.Fields.GetField("Body") as SPFieldMultiLineText;
string txt = bodyField.GetFieldValueAsText(getAnnouncement["Body"]);
string html = bodyField.GetFieldValueAsHtml(getAnnouncement["Body"]); 
```

# ios - 来自 plist 的分段 UITableview

> ID：15639857
> 
> 赞同：0
> 
> 时间：2013-03-26T14:40:49.407
> 
> 标签：ios, objective-c, uitableview, plist

我有一个 plist 文件，内容如下（源视图）：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
    <dict>
        <key>Title</key>
        <string> Food</string>
        <key>Rows</key>
        <array>
            <dict>
                <key>name</key>
                <string>Chunky Chips</string>
                <key>price</key>
                <string>25,-</string>
            </dict>
            <dict>
                <key>name</key>
                <string>Chunky Chips w/ Cheese</string>
                <key>price</key>
                <string>29,-</string>
            </dict>
            <dict>
                <key>name</key>
                <string>Fish'n'Chips</string>
                <key>price</key>
                <string>89,-</string>
            </dict>
        </array>
    </dict>
    <dict>
        <key>Title</key>
        <string>Snacks</string>
        <key>Rows</key>
        <array>
            <dict>
                <key>name</key>
                <string>Crisps</string>
                <key>price</key>
                <string>15,-</string>
            </dict>
            <dict>
                <key>name</key>
                <string>Hot Nuts</string>
                <key>price</key>
                <string>20,-</string>
            </dict>
            <dict>
                <key>name</key>
                <string>Popcorn</string>
                <key>price</key>
                <string>25,-</string>
            </dict>
        </array>
    </dict>
    <dict>
        <key>Title</key>
        <string>Draught Beer</string>
        <key>Rows</key>
        <array>
            <dict>
                <key>name</key>
                <string>The Ale</string>
                <key>price</key>
                <string>47,-</string>
            </dict>
            <dict>
                <key>name</key>
                <string>Carlsberg</string>
                <key>price</key>
                <string>47,-</string>
            </dict>
            <dict>
                <key>name</key>
                <string>Kilkenny</string>
                <key>price</key>
                <string>47,-</string>
            </dict>
        </array>
    </dict>
</array>
</plist> 
```

我的表视图控制器：

```
#import "MenuViewController.h"

@interface MenuViewController ()

@property (copy, nonatomic) NSArray* tableData;

@end

@implementation MenuViewController

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.tableData = [NSArray arrayWithContentsOfFile: [[NSBundle mainBundle] pathForResource: @"TestList" ofType: @"plist"]];
    NSLog(@"%@",_tableData);

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:(BOOL)animated];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
        return [_tableData count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    //return [[[_tableData objectAtIndex: section] objectForKey: @"Rows"] count];
    NSDictionary *dataInSection = [[_tableData objectAtIndex: section] objectForKey: @"Rows"];
    return [dataInSection count];
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {

    return [[_tableData objectAtIndex: section] objectForKey: @"Title"];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"MenuCell";
    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = [[[_tableData objectAtIndex: indexPath.section] objectForKey: @"name"] objectAtIndex: indexPath.row];
    cell.detailTextLabel.text = [[[_tableData objectAtIndex:indexPath.section] objectForKey:@"price"]objectAtIndex: indexPath.row];

    return cell;
} 
```

我想展示带有部分的表格。Sectionheaders 确实出现了，但没有内容。我从 nslog 得到以下信息：

```
(
        {
        Rows =         (
                        {
                name = "Chunky Chips";
                price = "25,-";
            },
                        {
                name = "Chunky Chips w/ Cheese";
                price = "29,-";
            },
                        {
                name = "Fish'n'Chips";
                price = "89,-";
            }
        );
        Title = " Food";
    },
        {
        Rows =         (
                        {
                name = Crisps;
                price = "15,-";
            },
                        {
                name = "Hot Nuts";
                price = "20,-";
            },
                        {
                name = Popcorn;
                price = "25,-";
            }
        );
        Title = Snacks;
    },
        {
        Rows =         (
                        {
                name = "The Ale";
                price = "47,-";
            },
                        {
                name = Carlsberg;
                price = "47,-";
            },
                        {
                name = Kilkenny;
                price = "47,-";
            }
        );
        Title = "Draught Beer";
    }
) 
```

知道为什么表格单元没有填充相应的名称和价格吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:25:19.830

这是一个很好的例子，说明为什么你不应该在一行中有这么长的嵌套方法调用。您的线路：

```
cell.textLabel.text = [[[_tableData objectAtIndex: indexPath.section] objectForKey: @"name"] objectAtIndex: indexPath.row]; 
```

应该：

```
NSDictionary *sectionData = _tableData[indexPath.section];
NSArray *rowsData = sectionData[@"Rows"];
NSDictionary *rowData = rowsData[indexPath.row];
NSString *name = rowData[@"name"];
NSString *price = rowData[@"price"];

cell.textLabel.text = name;
cell.detailTextLabel.text = price; 
```

你拥有它的方式，你忘记了获取`Rows`密钥的数据。

像我一样拆分线路有很多好处。对于每个单元格，没有理由必须多次查找节数据、行数据和行数据。所以这样效率更高。拆分代码也使得调试更容易，也更容易阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T14:49:09.063

```
cell.textLabel.text = [[[_tableData objectAtIndex: indexPath.section] objectForKey: @"name"] objectAtIndex: indexPath.row];
cell.detailTextLabel.text = [[[_tableData objectAtIndex:indexPath.section] objectForKey:@"price"]objectAtIndex: indexPath.row]; 
```

应该是（冒昧地使用文字）

```
cell.textLabel.text = _tableData[indexPath.section][@"Rows"][indexPath.row]@"name"];
cell.detailTextLabel.text = _tableData[indexPath.section][@"Rows"][indexPath.row][@"price"]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T14:49:33.380

您错过了引用名为“行”的键。这是一个可能的解决方案：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"MenuCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
    }

    NSDictionary *product = [[[_tableData objectAtIndex:indexPath.section] objectForKey:@"Rows"] objectAtIndex:indexPath.row];
    cell.textLabel.text = [product objectForKey:@"name"];
    cell.detailTextLabel.text = [product objectForKey:@"price"];

    return cell;
} 
```

# javascript - Javascript“this”通过不同的范围

> ID：15639858
> 
> 赞同：0
> 
> 时间：2013-03-26T14:40:51.860
> 
> 标签：javascript, events, this, anonymous-function, parent-node

请阅读并尝试下面的代码。点击“foo”段落。查看浏览器控制台，我没有看到预期的结果，而如果我点击“栏”，我会看到。

为什么会这样？

```
<!DOCTYPE HTML PUBLIC
  "-//W3C//DTD HTML 4.01//EN"
  "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
  </head>
  <body>
    <div class="root">
      <div>
        <p id="foo">foo</p>
      </div>
      <p id="bar">bar</p>
    </div>
    <script type="text/javascript">
      var p_list = document.getElementsByTagName('P');
      for (var n=0; n<p_list.length; n++) {
        p_list[n].onclick = function() {
          console.log('ONCLICK - id: ' + this.id + ' - ' + getC( this ) + '\n');
        };
      }
      function getC( P ) {
        if (P.parentNode.className === 'root') {
          console.log('INSIDE FUNCTION - id: ' + P.id + ' - ' + P.parentNode);
          return P.parentNode;
        } else {
          getC( P.parentNode );
        }
      }
    </script>
  </body>
</html> 
```

实时代码：http: [//jsbin.com/izuleg/1/edit](http://jsbin.com/izuleg/1/edit)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:43:34.263

你只是在你的条款中遗漏了一个`return`陈述。`else`它应该是：

```
...

} else {
    return getC( P.parentNode );
} 
```

请注意，您正在使用递归函数（一个调用自身的函数），因此您可能应该添加额外的预防措施以使其在特殊情况下返回某些内容（例如，没有类“root”的节点），否则您'将获得无限递归和堆栈溢出错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:53:45.910

您错过了`<div>`和`</div>`标签，请检查：

```
 <div class="root">
          <div>
            <p id="foo">foo</p>
          </div>
          <div>
            <p id="bar">bar</p>
          </div>
    </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T14:51:40.493

这是你的错误。您应该返回 getC 的结果，而不是仅仅调用它。

```
function getC( P ) {
    if (P.parentNode.className === 'root') {
      console.log('INSIDE FUNCTION - id: ' + P.id + ' - ' + P.parentNode);
      return P.parentNode;
    } else {
      return getC( P.parentNode );
    }
  } 
```

# dynamics-crm-2011 - 编写 Javascript 代码以支持多浏览器

> ID：15639869
> 
> 赞同：2
> 
> 时间：2013-03-26T14:41:21.000
> 
> 标签：dynamics-crm-2011, crm, xrm

我是 CRM 2011 Javascript 的新手，任何人都可以建议我在 CRM 2011 Javascript 中编写以下行以支持多浏览器。

在 IE 中它工作正常，但在其他浏览器中却不行

```
crmForm.new_schemaname.DataValue = crmForm.all.schemaname.DataValue; 
```

我试着这样写

```
Xrm.Page.getAttribute("new_schemaname").getValue() = Xrm.Page.getAttribute("schemaname").getValue(); 
```

抛出错误说**无法分配给函数结果**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:54:37.820

您需要使用 setValue 函数

```
Xrm.Page.getAttribute("new_weightedpercentage").setValue(Xrm.Page.getAttribute("CFPoppStage").getValue());` 
```

您可能还想在盲目分配和读取值之前检查空值......

# ios - 架构 armv7 SSZipArchive 的未定义符号

> ID：15639875
> 
> 赞同：0
> 
> 时间：2013-03-26T14:41:29.610
> 
> 标签：ios, xcode, zip, armv7, ssziparchive

> 架构 armv7 的未定义符号：
> “_OBJC_CLASS_$_SSZipArchive”，引用自：LoginVC.o ld 中的 objc-class-ref：找不到架构 armv7 clang 的符号：错误：链接器命令失败，退出代码为 1（使用 -v查看调用）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:02:27.140

刚刚解决！我真的尝试了一切，但是是的，它现在也抓住了我-> CMD + alt + Return，我只需要清理它，现在它可以工作了。

请注意，如果您对 SSZipArchive 有同样的问题，请检查：

**- 检查prefix.pch：你在这里添加了一些objective-C 类？--> 所以把它移到**

```
#ifdef __OBJC__
    #import <UIKit/UIKit.h>
    #import <Foundation/Foundation.h>
#endif 
```

...因为 minizip 正在与目标类一起编译，这对 minizip 来说是个问题，所以将它移到 #ifdef 中以便清楚地工作。

**- clean baby：像我一样清理你的项目，如果你在 [CMD]+[alt]+return 之前尝试了很多错误 - 小心**

**- 添加 SSZipArchive 不作为参考：只需创建您的 SSZipArchive 即可，例如：**

```
SSZipArchive
    SSZipArchive.h
    SSZipArchive.m
    minizip(folder) 
```

..也看看[thisNiceLink ..](https://stackoverflow.com/questions/3956138/failed-build-b-c-symbols-not-found-zlib-solved)但它可以作为引用文件夹工作，看[这里](https://stackoverflow.com/questions/9398409/adding-minizip-breaks-objective-c)..两者都对我不起作用（因为我在实验后没有清理;））..我已经创建了一个像上面一样的文件夹结构在查找器上，并将其拖放到我的项目中（只需单击“创建组”）

..所以我希望它可以帮助你.. :)

# google-chrome - chrome上没有刷新

> ID：15639876
> 
> 赞同：0
> 
> 时间：2013-03-26T14:41:29.947
> 
> 标签：google-chrome, web, refresh

我在 chrome 上遇到问题，它不会刷新我的网站。

我在我的网站上更改了一张图片，当我刷新我的网站时，没有出现任何更改...

我尝试退出 chrome 并重新启动，但没有任何改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:44:22.357

尝试清除缓存并再次刷新您的页面。

1.  单击浏览器工具栏上的 Chrome 菜单。
2.  选择工具。
3.  选择清除浏览数据。
4.  在出现的对话框中，选择要移除的信息类型的复选框。
5.  使用顶部的菜单选择要删除的数据量。选择开始时间以删除所有内容。
6.  单击清除浏览数据。

来源： http: [//support.google.com/chrome/bin/answer.py ?hl=en-GB&answer=95582](http://support.google.com/chrome/bin/answer.py?hl=en-GB&answer=95582)

# mod-rewrite - 带有 mod_rewrite 的更好的 URL？

> ID：15639881
> 
> 赞同：0
> 
> 时间：2013-03-26T14:41:44.933
> 
> 标签：mod-rewrite, joomla2.5, multiple-domains

请在这件事上给予我帮助。我的网站位于 /domains/mywebsite.com 目录中，我正在使用 mod_rewrite 访问该网站，但 URL 看起来像这样： [http](http://www.mywebsite.com/domains/mywebsite.com/something) ://www.mywebsite.com/domains/mywebsite.com/something 所以请如何从 URL 中删除 /domains/mywebsite.com/ 部分？

除了更改 configuration.php（在 Joomla 中）中的公共 $live_site 之外，还有其他方法可以使其成为可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T21:11:48.773

你可以使用这个：

```
RewriteEngine On
RewriteRule ^(.*)$ /domains/mywebsite.com/$1 
```

但我同意 Bakual 的建议，即这不是解决问题的好方法。最好重新配置您的服务器，以便它使 /domains/mywebsite.com/ 目录成为该域的公共根目录。

# javascript - Durandal路由器未激活

> ID：15639882
> 
> 赞同：0
> 
> 时间：2013-03-26T14:41:45.863
> 
> 标签：javascript, messagebox, durandal

我的 Durandal 应用程序中有一个消息框，无论您单击“否”或“是”，您都会被发送到另一个页面。我想用路由器做到这一点，但页面没有切换。

我可以看到代码正在执行该行，但没有任何反应！

```
define(function(require) {
var app = require('durandal/app'),
    system = require('durandal/system'),
    router = require('durandal/plugins/router');

return {
    router: router,
    displayName: 'SometingApp Startpage',
    activate: function() {
        system.log("Application started!");
    },
    createEstimate: function() {
        app.showMessage('Do you want to create a new something?', 'New something', ['Yes', 'No']).then(function(result) {
            if (result == "Yes") {
                return router.activate('otherpage');
            }
        });
    }
}; 
```

});

用户单击绑定到 createEstimate 的按钮！

希望有人能帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:48:42.923

我认为您需要做的是调用 router.navigateTo('#/yourUrl')。

如果我理解正确的文档， router.activate 必须只调用一次，通常在 shell 激活时。

文档中列出了可用于 viewModel 导航的路由功能

[http://durandaljs.com/documentation/Router/](http://durandaljs.com/documentation/Router/)在“其他 API”部分下

# bash - 按给定顺序重新排序文件行

> ID：15639888
> 
> 赞同：2
> 
> 时间：2013-03-26T14:42:03.877
> 
> 标签：bash, file-io

我有一个包含*n*行的文档*A。*我还有一个由*n 个*整数组成的序列，它们都是唯一的并且 < *n*。我的目标是根据给定的序列创建一个与*A*内容相同但行重新排序的文档*B 。*

 *****例子：**

*答*：

```
Foo
Bar
Bat 
```

顺序：（`2,0,1`意思是：先第2行，然后第0行，然后第1行）

输出（*乙*）：

```
Bat
Foo
Bar 
```

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T15:38:28.363

另一种解决方案：

您可以通过以下方式创建序列文件（假设序列以逗号分隔）：

```
echo $sequence | sed s/,/\\n/g > seq.txt 
```

然后，只需执行以下操作：

```
paste seq.txt A.txt | sort tmp2.txt | sed "s/^[0-9]*\s//" 
```

* * *

这是一个bash函数。顺序可以由任何东西分隔。

用法：`schwartzianTransform "A.txt" 2 0 1`

```
function schwartzianTransform {
    local file="$1"
    shift
    local sequence="$@"
    echo -n "$sequence" | sed 's/[^[:digit:]][^[:digit:]]*/\
/g' | paste -d ' ' - "$file" | sort -n | sed 's/^[[:digit:]]* //'
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T15:03:43.030

an awk oneliner could do the job:

```
 awk -vs="$s" '{d[NR-1]=$0}END{split(s,a,",");for(i=1;i<=length(a);i++)print d[a[i]]}'  file 
```

`$s` is your sequence.

take a look this example:

```
kent$  seq 10 >file  #get a 10 lines file

kent$  s=$(seq 0 9 |shuf|tr '\n' ','|sed 's/,$//') # get a random sequence by shuf

kent$  echo $s     #check the sequence in var $s
7,9,1,0,5,4,3,8,6,2 

kent$  awk -vs="$s" '{d[NR-1]=$0}END{split(s,a,",");for(i=1;i<=length(a);i++)print d[a[i]]}'  file                                                                          
8
10
2
1
6
5
4
9
7
3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T14:54:27.350

一种方法（虽然对于大文件来说不是一种有效的方法）：

```
$ seq="2 0 1"
$ for i in $seq
> do
>   awk -v l="$i" 'NR==l+1' file
> done
Bat
Foo
Bar 
```

如果你的文件很大，你可以使用这个：

```
$ seq='2,0,1'
$ x=$(echo $seq | awk '{printf "%dp;", $0+1;print $0+1> "tn.txt"}' RS=,)
$ sed -n "$x" file | awk 'NR==FNR{a[++i]=$0;next}{print a[$0]}' - tn.txt 
```

第 2 行准备了一个 sed 命令打印指令，然后在第 3 行与 sed 命令一起使用。这仅打印序列中存在的行号，而不是序列的顺序。awk 命令用于根据序列对 sed 结果进行排序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T14:56:31.557

将文件读入数组，然后使用索引的力量：

```
echo "Enter the input file name"
read ip

index=0

while read line ; do
        NAME[$index]="$line"
            index=$(($index+1))
            done < $ip

echo "Enter the file having order"
read od

while read line ; do
        echo "${NAME[$line]}";
            done < $od 
```

* * *

```
[aman@aman sh]$ cat test 
Foo
Bar
Bat
[aman@aman sh]$ cat od
2
0
1
[aman@aman sh]$ ./order.sh 
Enter the input file name
test
Enter the file having order
od
Bat
Foo
Bar 
```***

# c# - Visual Studio 在开发模式下崩溃

> ID：15639889
> 
> 赞同：0
> 
> 时间：2013-03-26T14:42:05.383
> 
> 标签：c#, crash

我有一个包含一个主窗体和多个子窗体的 winforms 应用程序。当我在解决方案资源管理器中双击主窗体时，窗体显示出来，几秒钟后 Visual C# 崩溃：

> Microsoft Visual C# Express 遇到问题，需要关闭。

只有当我打开主表单时才会发生这种情况，所有其他表单和其他项目都可以正常工作。编译并执行后，它也可以正常工作。这开始突然发生在昨天。我只记得更改解决方案名称。我不确定这是否导致了问题，所以我把它改回来了，但还是一样。工作太难了，请问有什么建议吗？谢谢！

> “C:\Program Files\Microsoft Visual Studio 10.0\Common7\Packages\Debugger\X64\msvsmon.exe”的激活上下文生成失败。相关程序集 Microsoft.Windows.Common-Controls,language="*",processorArchitecture="amd64",publicKeyToken="6595b64144ccf1df",type="win32",version="6.0.0.0" 找不到。请使用 sxstrace.exe 进行详细诊断。
> 
> 错误应用程序名称：vcsexpress.exe，版本：10.0.30319.1，时间戳：0x4ba1faa8 错误模块名称：未知，版本：0.0.0.0，时间戳：0x00000000 异常代码：0xc0000005 错误偏移量：0x12026764 错误进程 id：0xfb8 错误应用程序启动时间：0x01ce2b06d9e82857 错误应用程序路径：C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE\vcsexpress.exe 错误模块路径：未知报告 ID：bbcc0a83-9754-11e2-bf54-00038a000015

更新：我试图在 VS 2012 中打开它，同样的事情发生了..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:44:55.707

尝试像这样启动视觉工作室

> devenv.exe /安全模式

这将禁用插件。很可能是其中之一导致您的问题。确认后，您应该尝试一个一个卸载插件，看看是哪个插件。

# objective-c - 适用于 OS X 应用程序（销售、客户、字典等）的适当数据库引擎

> ID：15639894
> 
> 赞同：0
> 
> 时间：2013-03-26T14:42:17.760
> 
> 标签：objective-c, macos

我正在为我的应用程序寻找合适的数据库引擎。这个应用程序是金融类应用程序，包含一些销售信息、客户群等。

SQLite 适合这类任务吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:14:56.837

是的，SQLite 适合这样的任务。

# javascript - 无法诊断：页面打开时背景位置不同

> ID：15639895
> 
> 赞同：0
> 
> 时间：2013-03-26T14:42:17.757
> 
> 标签：javascript, jquery, css, parallax, parallax.js

我在我的网页上使用 parallax.js。

[http://www.edizarca.com/karpaz/](http://www.edizarca.com/karpaz/)（页面现已更新，视差被移除，直到找到可行的解决方案）

但是打开页面并保持刷新。有时背景图像开始怪异（关闭位置）。我已经在 chrome 和 firefox 中进行了测试，但我无法弄清楚它为什么这样做。

你有什么主意吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:18:16.183

*以下是我通过检查发现的。*

parallax.js 存储应用它的元素的初始顶部偏移量。该值存储在一个名为 的变量中`firstTop`。将`background-position`根据 的值`firstTop`和当前滚动位置放置，这样`background-position`只有在为 0 时才能达到`firstTop`0 [例如，如果`firstTop`是 96`background-position`将不会小于 67]。

注：更多关于96以后。

没错，`firstTop`并不总是 0，我不时设法达到一个非零值。我怀疑它与浏览器缓存有关。

那么，价值`firstTop`从何而来？这是代码：

```
//get the starting position of each element to have parallax applied to it      
$this.each(function(){
    firstTop = $this.offset().top;
}); 
```

其中 offset 是 JQuery 中定义的函数。在查询元素的特定情况下，它将回退到 getBoundingClientRect。所以，如果问题出在哪里，那将是浏览器的错误......

所以，换个方向看……我得到的值是 96，它只是 [有时] 在缓存清理之后。在断点处，除了灰色背景和滚动条之外，还没有渲染任何内容……但如果我没有在断点处清除缓存，则页面布局是可见的。

大约 96，它是 id 为“header”的 div 的高度。当我到达断点时，高度会有所不同，这取决于我是否清理了缓存。如果我已经清除了缓存，它是 [有时] 96，如果没有它是 150（但现在 id 为“wrapper”的 div 有`position: relative`并且它的顶部偏移量是 0）。

*所以....我们如何解释这种行为？*

当然是文件`style.css`。如果缓存失效浏览器必须重新下载它，同时它会去执行javascript。如果它在应用 css 之前读取 id 为“wrapped”的 div 的位置，则偏移量是错误的。当然，当从缓存中加载样式时，它会立即应用，不会让 javascript 行为不端。

* * *

注意：我还得到了 233 的 firstTop 和 id “header”为 195.875 的 div 的高度。

* * *

解决方案？我不知道。~~我怀疑 parallax.js 可能允许以某种方式设置固定的初始偏移量。~~（没有办法按照代码设置初始偏移量）。

您可以寻找一个允许检查样式的库。（注意：使用 javascript 读取样式不起作用，因为它们可能已加载但未应用）。

~~如果我是你，我会修改 parallax.js（或尝试其他版本）~~。无需修改 parallax.js。

* * *

**编辑 1**：

您应该尝试：

*   [使用defer](http://www.w3.org/TR/html4/interact/scripts.html#adef-defer)属性运行您的代码。
*   ~~尝试使用[setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)~~

这个想法是让浏览器“稍后”执行视差的初始化，以便它会应用 css，但不会“太晚”用户开始与页面交互。

**编辑 2**：

*   将样式放在任何 javascript 之前（或将 javascript 放在文档末尾）。
*   使用`$(document).load`而不是`$(document).ready`运行 parallax.js

# primefaces - 带有树表的 Primefaces 数据表

> ID：15639896
> 
> 赞同：0
> 
> 时间：2013-03-26T14:42:18.270
> 
> 标签：primefaces

我想在primefaces中开发一个带有分页的表格。我发现 primefaces 中的数据表支持分页。但是对于该表的每一行，我都有一个树结构，在单击扩展箭头时会打开。你能告诉我如何在 primefaces 中实现这一点吗？

-- 第 1 行 -- 第 2 行 -- 第 3 行（假设用户扩展了这个） - 第 31 行 - 第 32 行 - 第 33 行 - 第 4 行

```
 < pagination links > 
```

谢谢，阿维纳什。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T15:26:53.423

我猜你想使用 primefaces treeTable

[http://www.primefaces.org/showcase/ui/treeTable.jsf](http://www.primefaces.org/showcase/ui/treeTable.jsf)

这个链接有如何使用的例子

# sql-server - 用 GROUP BY 代替 DISTINCT 有很大的收获吗

> ID：15639901
> 
> 赞同：1
> 
> 时间：2013-03-26T14:42:29.017
> 
> 标签：sql-server

在没有任何明确证据的情况下，我一直更喜欢使用以下内容来获得不同的列表`x`：

```
SELECT  x
FROM    tb_containRepeatedX
GROUP BY x 
```

相对于

```
SELECT  DISTINCT x
FROM    tb_containRepeatedX 
```

这是正确的策略吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:47:53.030

根据执行计划。一样的，

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/c3e7a/11)

与组：

![在此处输入图像描述](../Images/57fb1ea9152b940c328718b606eb58bb.png)

有不同的：

![在此处输入图像描述](../Images/57fb1ea9152b940c328718b606eb58bb.png)

# jquery - 旧版 IE 中不存在 Fancybox 覆盖

> ID：15639902
> 
> 赞同：0
> 
> 时间：2013-03-26T14:42:30.103
> 
> 标签：jquery, css, fancybox, fancybox-2

我已经制作了[这个测试页面](http://www.triairemena.com/estuc3_1fancybox.html)，用于在站点中使用 fancybox，它在所有 Mac 浏览器、iOS 和 PC 上的非 IE 浏览器上都可以。Windows 8 上的最新 IE 也可以。但是XP上的IE8、7和6不显示透明覆盖或页面上的弹出框阴影，并且弹出下的页面上的链接仍然可以点击（我不想要）。（注意，测试页面上的弹出图像不一定是正确的最终图像 - 没关系）。

可能我在某个地方搞砸了 js（除了能够更改非常基本的配置之外，我在 js 方面的专业知识为零）。我注意到 fancybox 演示页面在较旧的 IE 中运行良好。

我对旧 IE 中的框阴影并不在意，但我需要显示叠加层的模态行为。

任何指向我出错的地方都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:13:29.460

好吧，这是修改原始 fancybox 文件不是一个好主意的典型情况（除非您知道自己在做什么。）创建自己的自定义脚本来修改默认设置总是更好。

在您的“修改后的”fancybox js 文件中，您在第 1707 行添加了这个：

```
css : {
  'background' : 'rgba(200,200,200,0.35)'  // changing here does change overlay colour
},    // custom CSS properties 
```

该更改抑制了要渲染的 fancybox 覆盖图像，如 fancybox css 文件的第 151 行中所设置：

```
.fancybox-overlay {
    background: url("fancybox_overlay.png") repeat scroll 0 0 transparent;
    /* other properties here */
} 
```

IE8 及更低版本不支持`RGBa`所以不存在覆盖。不过，按照**[此处](http://css-tricks.com/rgba-browser-support/)**的建议设置后备声明以避免此类问题是一个好主意。

下一次，尝试使用您自己的自定义脚本覆盖默认设置，并保留原始文件。

**编辑**：

如果您想设置自己的 png*叠加*图像背景（具有自己的颜色和不透明度），则只需添加到您的自定义脚本中：

```
helpers: {
    overlay: {
        css: {
            'background-image': 'url("path/my_own_overlay.png")'
        }
    }
} 
```

并留下原始`fancybox_overlay.png`文件。

# ruby-on-rails - 如何验证 Rails 中的自动完成字符串字段？

> ID：15639906
> 
> 赞同：0
> 
> 时间：2013-03-26T14:42:39.557
> 
> 标签：ruby-on-rails, string, forms, validation, autocomplete

我有一个带有位置文本字段的网络应用程序，该应用程序具有自动完成功能，可以从谷歌地图中提取数据以完成输入的位置。我想要强制用户选择自动完成提供的特定拼写和格式对于在验证中键入的位置。因此，用户不能在位置字段中随机输入任何内容。

我有：

```
validates :location, :presence => true 
```

，但这并没有真正的帮助。是否有自定义验证？还是我不知道的？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:50:29.847

我想您需要使用`before_validation`以下内容

```
before_validation do
  self.location = YourClassName.find_by_location_name(location)
end 
```

让它发挥作用只是一个想法。这不是您需要的确切答案。

# sql - 如何检查同义词后面的表是否存在

> ID：15639907
> 
> 赞同：5
> 
> 时间：2013-03-26T14:42:39.383
> 
> 标签：sql, sql-server, rdbms, synonym

我正在尝试创建一个简单的脚本来将复杂视图的结果转储到表格中以进行报告。我使用了同义词来简化对视图和表名的调整。

这个想法是，脚本的用户可以将他们想要用作源的视图的名称以及目标报告表的名称放在开始和离开时的名称中。如果表不存在，那么脚本应该创建它。如果表已经存在，那么脚本应该只复制视图中尚未在表中的记录。

下面的脚本涵盖了所有这些要求，但我找不到检查同义词后面的表是否已经存在的好方法：

```
CREATE SYNONYM SourceView FOR my_view
CREATE SYNONYM TargetReportingTable FOR my_table

-- Here's where I'm having trouble, how do I check if the underlying table exists?
IF (SELECT COUNT(*) FROM information_schema.tables WHERE table_name = TargetReportingTable) = 0
  BEGIN
    -- Table does not exists, so insert into.
    SELECT * INTO TargetReportingTable FROM SourceView
  END
ELSE
  BEGIN
    -- Table already exists so work out the last record which was copied over
    -- and insert only the newer records.
    DECLARE @LastReportedRecordId INT;
    SET @LastReportedRecordId = (SELECT MAX(RecordId) FROM TargetReportingTable)
    INSERT INTO TargetReportingTable SELECT * FROM SourceView WHERE RecordId > @LastReportedRecordId
  END

DROP SYNONYM SourceView
DROP SYNONYM TargetReportingTable 
```

我知道我可以让脚本的用户将表名复制到“information_schema”行以及顶部的同义词中，但这会留下错误的余地。

我也知道我可以做一些肮脏的事情，比如将表名放入变量中并将 SQL 作为字符串输出，但这让我感觉有点恶心！

有没有一种优雅的 SQL 方法可以让我检查同义词后面的表是否存在？还是用完全不同的方式来解决问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:00:17.997

不是最优雅的解决方案，但您可以将`sys.synonyms`表连接到`sys.tables`表以检查表是否存在。

如果该表不存在，则连接将失败，您将获得 0 行（因此`IF EXISTS`为假）。如果表确实存在，则连接将成功，您将获得 1 行（并且为真）：

```
IF EXISTS(  SELECT  *
              FROM  sys.synonyms s
                INNER JOIN sys.tables t ON REPLACE(REPLACE(s.base_object_name, '[', ''), ']', '') = t.name
              WHERE s.name = 'TargetReportingTable')
BEGIN
    -- Does exist
END
ELSE
BEGIN
    -- Does not exist
END 
```

替换`'TargetReportingTable'`为您要检查的任何同义词。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-09T13:45:31.073

如果同义词引用了另一个数据库，上述解决方案对我不起作用。我最近发现了函数 [fn_my_permissions]，它对于显示特定数据库对象的权限很有用，所以我认为它可以按如下方式使用：

```
IF EXISTS
(
select *
from sys.synonyms sy
cross apply fn_my_permissions(sy.base_object_name, 'OBJECT')
WHERE sy.name = 'TargetReportingTable'
)
print 'yes - I exist!' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-16T09:33:08.060

派对迟到了，我创建了一个查询来测试它的存在`Synonyms`并与你分享。

```
DECLARE @Synonyms table
(
    ID int identity(1,1),
    SynonymsDatabaseName sysname,
    SynonymsSchemaName sysname,
    SynonymsName sysname,
    DatabaseName nvarchar(128),
    SchemaName nvarchar(128),
    ObjectName nvarchar(128),

    Remark nvarchar(max),
    IsExists bit default(0)
)

INSERT @Synonyms (SynonymsDatabaseName, SynonymsSchemaName, SynonymsName, DatabaseName, SchemaName, ObjectName)
SELECT 
    DB_NAME() AS SynonymsDatabaseName,
    SCHEMA_NAME(schema_id) AS SynonymsSchemaName,
    name AS SynonymsName,
    PARSENAME(base_object_name,3) AS DatabaseName,
    PARSENAME(base_object_name,2) AS SchemaName,
    PARSENAME(base_object_name,1) AS ObjectName
FROM sys.synonyms

SET NOCOUNT ON

DECLARE @ID int = 1, @Query nvarchar(max), @Remark nvarchar(max)

WHILE EXISTS(SELECT * FROM @Synonyms WHERE ID = @ID)
BEGIN

    SELECT 
        @Query = 'SELECT @Remark = o.type_desc FROM [' + DatabaseName + '].sys.objects o INNER JOIN sys.schemas s ON o.schema_id = s.schema_id WHERE s.name = ''' + SchemaName + ''' AND o.name = ''' + ObjectName + ''''
    FROM @Synonyms WHERE ID = @ID

    EXEC sp_executesql @Query, N'@Remark nvarchar(max) OUTPUT', @Remark OUTPUT;

    UPDATE @Synonyms SET IsExists = CASE WHEN @Remark IS NULL THEN 0 ELSE 1 END, Remark = @Remark WHERE ID = @ID

    SELECT @ID += 1, @Remark = NULL
END

SELECT * FROM @Synonyms 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T14:49:16.753

您可以使用动态 SQL 执行此操作：

```
-- create synonym a for information_schema.tables
create synonym a for b

declare @exists int = 1;
begin try
    exec('select top 0 * from a');
end try
begin catch
    set @exists = 0;
end catch
select @exists; 
```

这不适用于非动态 SQL，因为同义词引用是在编译时捕获的。这意味着代码只是失败并显示一条消息，并且不会被`try`/`catch`块捕获。使用动态 SQL，块会捕获错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-14T17:37:09.523

您可以使用 SQL Server 中可用的 Object_Id 函数测试数据库中是否存在 Synonym

```
IF OBJECT_ID('YourDatabaseName..YourSynonymName') IS NOT NULL
    PRINT 'Exist SYNONYM'
ELSE 
    PRINT 'Not Exist SYNONYM' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-29T20:56:49.703

另一个更简单的解决方案：

```
IF (EXISTS (SELECT * FROM sys.synonyms WHERE NAME ='mySynonymName'))
BEGIN
    UPDATE mySynonymName
    SET [Win] = 1
END 
```

在这种情况下，我首先进行数据库设置。我首先删除我的数据库 (database1) 中的所有同义词，然后运行 ​​SPROC 为目标数据库 (database2) 中的所有表创建同义词。database1 中的某些 SPROCS 调用 DB2 中的表。如果 DB2 中不存在表，则 SPROC 将失败。如果 DB2 中不存在表，则不会在数据库设置时自动创建同义词。所以我只是使用上面的来检查同义词是否存在，如果同义词不存在，则跳过 SPROC 的那部分。

# assembly - 调试更改其他代码。电晕SDK

> ID：15639908
> 
> 赞同：2
> 
> 时间：2013-03-26T14:42:40.187
> 
> 标签：assembly, lua, coronasdk

在 Corona SDK 中，我正在制作一个玩家可以驾驶汽车的应用程序。我有一个打印功能，当汽车受到冲击时会调用它。

```
print("@",self.frames,virtual,self.animation.rotation,self.animation.angularDamping); 
```

大约每秒60次。取消注释时，汽车控制变得更加敏感。在我看来，这是由于在调试时过度使用系统资源造成的。

我想留下 print() 的副作用，但不想在上面浪费 CPU。如果你知道当我试图在一帧中放置太多动作时，Corona Simulator 在低级代码中的作用是什么，你能解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T22:49:49.370

如何创建一个包含所有调试数据的表。然后，您可以放置​​一个计时器，每隔 x 秒将您的数据打印到终端，或者您可以将其写入文件。

```
data = {}

function onEveryFrame()

    data[#data + 1] = { }
    data.frames = self.frames
    data.virtual = virtual
    data.rotation = self.animation.angularDamping
    data.angularDamping = self.animation.angularDamping

end

function calledByTimerEveryXSeconds()

// print data table here

end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-23T00:30:17.917

我认为您对系统资源征税的假设是正确的。

也许您可以通过降低帧速率来实现类似的效果（如果您使用的是运行时功能）。无论您的真正问题是什么，这似乎都是一种解决方法。除了使用运行时函数，您还可以使用每秒调用 30 次左右的游戏循环计时器，并相应地进行调整。

# c - 堆栈上的运行时内存分配

> ID：15639912
> 
> 赞同：12
> 
> 时间：2013-03-26T14:42:46.563
> 
> 标签：c

我想了解堆栈区域上的运行时内存分配以及它与堆区域上的运行时内存分配有何不同。

我知道如何使用库函数分配内存。

```
#include<alloca.h> void *alloca(size_t size); //(for runtime memory on stack)

#include<stdlib.h> void *malloc(size_t size); //(for run time memory on heap) 
```

我也知道，如果我们使用 alloca 函数，我们不需要显式释放该内存，因为它与堆栈相关联，它会自动释放。

我想知道哪些系统调用与 alloc 和 malloc 相关联，以及它们在两者中的工作方式。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-26T14:57:05.200

简而言之，它们通常不使用系统调用，除非可用内存不足。

两者的行为不同，所以我解释不同。

### malloc

假设最初您的程序有 1MB（例如）可供分配的可用内存。`malloc`是一个（标准）库函数，它占用这 1MB，查看您要分配的内存，将 1MB 的一部分切出并给您。为了记账，它保存了一个未分配内存的链表。然后，该`free`函数将被释放的块添加回*空闲列表*，从而有效地释放内存（即使操作系统仍然没有取回任何内存，除非`free`确定您有太多内存并实际上将其归还给操作系统）。

只有当您用完 1MB 时，才会`malloc`真正向操作系统请求更多内存。系统调用本身是平台相关的。例如，您可以看一下[这个答案](https://stackoverflow.com/a/3479496/912144)。

### 阿洛卡

这不是一个标准函数，它可以通过多种方式实现，其中任何一种都可能不会调用任何系统函数（除非它们足够好来增加你的堆栈大小，但你永远不知道）。

（或等效地（C99）标准可变长度数组（VLA）所做的）是`alloca`通过调整适当的寄存器（例如`esp`在 x86 中）来增加当前函数的堆栈帧。任何碰巧在同一个堆栈帧上但位于可变长度数组（或`alloca`ed 内存）之后的变量将被寻址，`ebp + size_of_vla + constant`而不是旧的 simple `ebp + constant`。

由于堆栈指针在函数返回时（或通常在任何块退出时）恢复到前一个函数的帧，因此`{}`任何堆栈内存`alloca`ted 将被自动释放。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T14:50:08.533

该`alloca()`函数通常由编译器供应商实现，根本不必是“系统调用”。

由于它所要做的就是在本地堆栈帧上分配空间，因此它可以*非常*简单地实现，因此与`malloc()`.

它的[Linux手册页](http://linux.die.net/man/3/alloca)说：

> 内联代码通常由一条调整堆栈指针的指令组成，并且不检查堆栈溢出。

另外，我不确定您是否意识到*当调用`alloca()`exits*的函数时内存会“自动”释放。这很重要，你不能`alloca()`用来做长期分配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T14:48:51.440

`alloca`根据其[手册页](http://man7.org/linux/man-pages/man3/alloca.3.html)，该函数是一个内联函数，将由编译器特殊处理并扩展（至少对于`gcc`）。
该行为是实现定义的，因此不应使用，因为您不能保证它始终以相同的方式工作。

# php - SQL查询ORDER BY在PHP中循环

> ID：15639920
> 
> 赞同：0
> 
> 时间：2013-03-26T14:43:09.613
> 
> 标签：php, html, sql, sql-server-2008

编辑：添加了第一个 SQL 查询。

我网站的一部分有两个下拉菜单。两者中的所有选项都是使用 SQL 查询填充的。Dropdown#1 是类部分的列表（例如 A1）。一旦教授选择了一个部分，Dropdown#2 就会填充学生 ID（例如 1234567）。

学生信息见表 1。这些信息中有“教授姓名”列。为了将学生与班级部分相关联，我需要将“professorName”列与表 2 中的相同列进行匹配，因为班级部分仅在表 2 中找到。

直到这里一切都很好，因为在我的查询结束时，我输入了 ORDER BY student ID。但是，其中两个班级部分与两个不同的教授相关联。为了处理这个问题，我使用下面的代码来循环遍历每个教授的名字。

```
 $from site = $_POST['section'];

    $query = ("SELECT professorName FROM Table 2 WHERE classSection='$fromsite'");
    $NumberofProfessorNames = $objMSSQL->getAffectedRows();

    echo $NumberofProfessorNames;

    for ($j=0; $j<$NumberofProfessorNames; $j++)
    {
    $section= $query[$j][professorName];

    $output = $objMSSQL->getTable("SELECT DISTINCT StudentID from table1 WHERE professorName='$section' ORDER BY StudentID");

    for ($i=0; $i<$objMSSQL->getAffectedRows(); $i++)
    {
    echo "<option value='".$output[$i][studentID]."'>".$output[$i][studentID]."</option>";
    }
    } 
```

问题是，对于仅有的两个甚至是必要的部分（因为有两个professorNames），因为它是这样循环的，所以它最终在下拉列表#2中是这样排序的：

```
1234567
2345678
3456789
4567890
1234123
2345765
3456999
4567000 
```

我有限的编程经验使我无法理解如何解决这个看似简单的问题。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:51:44.077

在第二个查询中连接 table1 和 table2 并且只查询数据库一次，而不是遍历教授并为每个查询 table1。例如：

```
$query = [... FROM Table2...];
$NumberofProfessorNames = $objMSSQL->getAffectedRows();

echo $NumberofProfessorNames;

$output = $objMSSQL->getTable("
    SELECT DISTINCT StudentID 
    from table1 
        join table2
            on ...
    WHERE [the same clause you used in $query]
    ORDER BY StudentID"
);

for ($i=0; $i<$objMSSQL->getAffectedRows(); $i++)
{
    echo "<option value='".$output[$i][studentID]."'>".$output[$i][studentID]."</option>";
} 
```

它比生成 WHERE IN 子句更优雅（而且几乎可以肯定更有效）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T14:52:13.030

Yu可以这样做：

```
$section = "('";
for ($j=0; $j<$NumberofProfessorNames; $j++)
{
   $section.= $query[$j][professorName] . "','";
}
$section = substr($section, 0, -3) . ')'; //$section contains ('prof1','prof2')

$output = $objMSSQL->getTable("SELECT DISTINCT StudentID from table1 WHERE professorName IN $section ORDER BY StudentID");

for ($i=0; $i<$objMSSQL->getAffectedRows(); $i++)
{
   echo "<option value='".$output[$i][studentID]."'>".$output[$i][studentID]."</option>";
} 
```

那就是在一个带有[`IN()`](http://msdn.microsoft.com/en-us/library/ms177682.aspx)语法的 sql 中查询所有教授。

**更新：**我刚刚注意到您使用 sql server 而不是 mysql，所以我稍微更改了 IN() 语法并更改了指向 sql server 帮助文档的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T15:07:11.683

听起来您的表格没有标准化。好的表格应该有一个sections 表、一个students 表和一个professor 表。每个表格中的信息应特定于表格的主题。

**学生**

```
student_id
student_last_name
student_first_name
student_address
etc 
```

**部分**

```
section_id
section_name - multiple sections can tend to have the same name but differing content
section_description
section_year - sections can change from year to year 
```

**学院**

```
faculty_id
faculty_name - this is not a key field, more than one person can have the same name.
faculty_address
faculty_type - adjunct, fulltime, etc. 
```

然后，您将拥有关系表，因此您可以将教授与部分相关联，将学生与部分相关联。

**Faculty_2_sections**

```
f2s_id
faculty_id
section_id 
```

**student_2_sections**

```
s2s_id
student_id
section_id 
```

这使它变得非常简单，因为如果学生登录，那么您已经有了他们的学生 ID。如果是教授，你已经有了他们的faculty_id

如果您要吸引学生，您的 sql 可能如下所示：

```
$sql = "select * from students s,sections sc,faculty f,faculty_2_sections f2s,student_2_sections s2s where student_id='$student_id' and s2s.student_id=s.student_id and s2s.section_id=sc.section_id and f2s.faculty_id=f.faculty_id and f2s.section_id=s2s.section_id"; 
```

如果你正在为教师拉动，你会这样做：

```
$sql = "select * from students s,sections sc,faculty f,faculty_2_sections f2s,student_2_sections s2s where faculty_id='$faculty_id' and f2s.faculty_id=f.faculty_id and f2s.section_id=s2s.section_id and s2s.section_id=sc.section_id and s2s.student_id=s.student_id"; 
```

然后，您可以拉出部分列表以填充 section_ids 下拉列表，以仅显示特定部分的学生或教师。

# java - 通过 Intent Viewer 和浏览器地址栏启动 Activity - 没有任何反应 - 仅在单击链接时

> ID：15639921
> 
> 赞同：0
> 
> 时间：2013-03-26T14:43:11.387
> 
> 标签：java, android, eclipse, android-intent, intentfilter

当用户访问网站时，我试图从浏览器启动一个活动（它只显示一个警告图标），但是当我将意图过滤器添加到我的 AndroidManifest.xml 时，应用程序在加载 URL 时永远不会启动新活动。

它加载的唯一方法是它是指向 URL 的链接（例如在电子邮件中），而不是当用户实际打开 www.playboy.com 时

有什么建议么？

*   阿玛尼

显现

```
<activity
        android:name="com.app.Warning"
        android:label="@string/app_name" >
        <intent-filter>  
<action android:name="android.intent.action.VIEW"></action>  
<category android:name="android.intent.category.DEFAULT"></category>  
<category android:name="android.intent.category.BROWSABLE"></category>  
<data android:host="playboy.com" android:scheme="http"></data>  
</intent-filter> 
    </activity> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:51:36.747

如有疑问，请复制 Google。Play 商店和 YouTube 应用程序都在其意图过滤器中使用某种路径规范。尝试类似的东西`pathPrefix="/"`。

Google Play 商店的清单包括以下行：

```
<data android:scheme="http" android:host="market.android.com" android:pathPrefix="/" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:49:48.380

不带“www”试试：

```
<data android:host="playboy.com" android:scheme="http"></data> 
```

并检查您的浏览器是否设置为此主机的默认应用程序。

你的实现还有一个问题：当它工作时，当用户在 playboy.com 上冲浪时，Android 会显示一个选择器对话框，要求用户用你的应用程序的浏览器打开这个地址。只有当用户点击你的应用程序时，它才会启动，否则它会像现在一样在浏览器中继续。我认为这不是您想要实现的行为。

# version-control - 为什么我应该在一次提交中结合代码和测试？

> ID：15639928
> 
> 赞同：1
> 
> 时间：2013-03-26T14:43:23.773
> 
> 标签：version-control

假设我编写了代码的原子更改。我还编写了一些测试以确保更改有效并继续有效。

我*认为*我应该将代码更改与测试一起提交。

**亲：**

*   这确保（尽可能）分支的每个变更集都会导致运行代码并通过测试。
*   它记录了这些测试“属于”我所做的代码更改。

**缺点：**

*   我可能想在将来的某个时间退出更改而不退出测试

以一种或另一种方式做这件事还有什么理由？任何一种策略都曾让你吃过苦头吗？具体如何？

有些相关：[对代码的更改是否应该与对测试套件的相应更改分开提交？](https://stackoverflow.com/questions/6228550/should-change-to-code-be-committed-separately-from-corresonding-change-to-test-s)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:03:13.827

My only rule is to make sure that code builds prior to checking in.

Yes, ideally you want to check in atomic bits of code. However, how do you define atomic? And then what happens if, later, you have to change one of the bits? Your changes are no longer in one commit.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:01:40.607

> 我*认为*我应该将代码更改与测试一起提交。

我从不这样做，但如果我使用非分支 SCM，我会这样做。

在分支 SCM（我使用过 mercurial 和 git）中，这不是问题。

每次我开始工作时，我都会使用不同的分支；我很多时候有本地分支提交，当我移动到其他东西一段时间时，或者当我在开始重大代码更改之前只需要一个备份点时，只提交未完成的更改（甚至不编译）。我知道，当我创建它们时，大多数中间提交将永远不会被再次签出。它们不会影响任何东西，并且在需要时非常有用。

只有当我有可以在其上成功运行的编译和测试代码时，我才会合并分支。

# mysql - 如何获得相同的行数？

> ID：15639936
> 
> 赞同：-4
> 
> 时间：2013-03-26T14:43:36.870
> 
> 标签：mysql, sql

我有一个 SQL 格式的表，有 3 列和 1000 行，如下所示：

```
Name    Age
Nick    20
Msh     23
Kij     19
jkh     20
kjh     22
cbc     23
iuy     27
jhjh    19 
```

我想看看哪些名字是同龄的，有几个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:48:44.200

这更像是一个 SQL 问题而不是 python 问题。

您必须使用聚合函数（计数）

试试这个查询：

```
select name, count(*) as age from table
group by age; 
```

# haskell - Haskell 结束循环返回

> ID：15639943
> 
> 赞同：1
> 
> 时间：2013-03-26T14:43:58.020
> 
> 标签：haskell

我试图阻止我的程序在函数循环结束后停止。让我先介绍一些背景 - 在最近尝试 Haskell 失败后（[这里](https://stackoverflow.com/questions/15635012/haskell-zip-function-error-with-code/15635750?noredirect=1#15635750)），我一直在学习许多教程，并且能够成功地创建自己的列表，其中包含名称和优先级（下面，工作代码 - 抱歉，如果复制/粘贴错误缩进它）。

```
module Main where

-- Function Main, gather details, then print
main :: IO ()
main = do info <- gatherInfo
      let names = info
      putStrLn . unlines . map printDetails $ names

-- Function to Get the Info
gatherInfo :: IO [(String, Int)]
gatherInfo = do putStr "Name: "
            name <- getLine
            if name == "quit"
              then return []
              else do priority <- getPri
                      let info = (name,priority)
                      otherInfo <- gatherInfo
                      return $ info : otherInfo

 -- Function to get Priority                          
 getPri :: IO Int
 getPri = do putStr "Priority: "
        input <- getLine
        let parsed = reads input
        if parsed == []
          then do putStrLn "Incorrect Entry, please enter again"
                  getPri
          else return $ fst $ parsed !! 0

 --Function to print each detail
 printDetails :: (String, Int) -> String
 printDetails (name, priorityScore) = "Name: " ++ name ++ "Priority: " ++ show priorityScore 
```

此代码将打印以下输出（包括用户输入）：

```
 Patient Name: test1
 Patient Priority: 1

 Patient Name: test2
 Patient Priority: 2

 Patient Name: quit

 Patient name: test1 Priority: 1
 Patient name: test2 Priority: 2 
```

如您所见，输入了列表项，然后在输入“退出”时代码打印列表内容。

我遇到的问题是，在输入“退出”并打印列表项时，当我重新进入程序时，这些项目已经消失了。

我想要实现的是运行gatherInfo 函数，然后打印列表（完整），然后返回gatherInfo 函数以添加另一个项目。例如，我的输出可能是这样的：

```
 Patient Name: test1
 Patient Priority: 1

 Patient name: test1 Priority: 1

 Patient Name: test2
 Patient Priority: 2

 Patient name: test1 Priority: 1
 Patient name: test2 Priority: 2

 Patient Name: quit (Quit program, doesn't matter what happens now) 
```

我已经多次尝试实现这一点；例如，在每个gatherInfo 循环期间调用我的printDetails 函数来打印“信息”，但收效甚微。我怎样才能在我的设计中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:56:50.637

我建议您这样做：
修改您的收集信息功能，使其仅获取一名患者的信息。
然后创建另一个函数，我们称之为main'：

```
main' patients = do patient <- gatherInfo
                    if (fst patient == "quit") 
                       then return ()
                       else do 
                               let patients' = patient:patients   -- add patient to list of patients
                               putStrLn . unlines . map printDetails $ patients' -- print list of patients
                               main' patients'  -- continue 
```

我们在这里所做的是通过传递参数来记住程序的状态（这是在 Haskell 中完成的，因为您没有状态）。现在您的主要功能将如下所示：

```
main = main' []   -- start with empty list of patients 
```

您可能会注意到，当用户输入“quit”时，我假设您的函数gatherInfo 将返回名称为“quit”的患者，但是您可以通过其他方式执行此操作

# types - pyephem - 观察者纬度/经度类型

> ID：15639949
> 
> 赞同：3
> 
> 时间：2013-03-26T14:44:18.877
> 
> 标签：types, pyephem

为什么决定将观察者的纬度/经度数值视为弧度，而将字符串值视为十进制度？

在 Python 中处理 lat / lon 值时，我通常处理浮点对象。如果星星对齐正确，可能会有一个或两个 int 对象漂浮在其中，但大部分是漂浮的。我总是天真地写一些这样的代码：

```
lat = 0.0
lon = 0.0

observer = ephem.Observer()
observer.lat = lat
observer.lon = lon
# etc... etc... 
```

然后，我被烧死了。我被烧毁了，因为我的纬度/经度值是十进制度，而不是弧度。这通常很糟糕，因为我最终会挠头想知道我做错了什么。最后，我最终转换为弧度。现在理论上，我可以这样做以获得正确的结果：

```
observer = ephem.Observer()
observer.lat = str(lat)
observer.lon = str(lon) 
```

但这似乎也很不稳定，我认为我的值必须以弧度为单位！哦等等，只有当它是一个浮动。我知道接受字符串或浮点对象很好，但接受基于 python 类型的不同数字类型似乎不一致。我希望这两个分配都采用相同的数字类型，如下所示：

```
lat = lon = 0.55
observer.lat = lat  # float lat is assumed to be in radians
observer.lon = lon  # float lon is assumed to be in radians

lat = lon = '0.55'
observer.lat = lat  # string lat is assumed to be in radians
observer.lon = lon  # string lon is assumed to be in radians 
```

然后可以为十进制度/ dms提供转换运算符：

```
lat = '25.0'
lon = 25.0
observer.lat = ephem.to_rad(lat)
observer.lon = ephem.to_rad(lon) 
```

然后 to_rad 函数将明确假设十进制度数作为浮点或字符串对象提供。在这一点上，接口将是一致的。我非常简要地挖掘了 _libastro.c 并研究了 to_angle 函数，它是这个问题的核心。

我想不出一个很好的理由不实施这一点。事实上，我会自愿去做！但是在我对此进行讨论之前，我知道我不是 libastro / pyephem 专家，所以我想打开这个问题以确保这是有道理的。这样做完全有可能是有充分理由的，我只是感到非常困惑。

如果有经验的用户或熟悉软件核心的人可以发表评论，我将不胜感激。

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T17:08:51.463

第一：当您需要在当前版本的 PyEphem 中将度数显式转换为弧度时，您可以使用`degree`常数，它是以弧度为单位测量的度数。所以你可以这样写：

```
observer.lat = 33.7 * ephem.degree 
```

这个想法是，读者将学会将其视为“33.7 乘以 1 度”——我对函数名称的传统担忧`to_rad()`是，它不一定清楚它是从什么单位转换*而来的。*如果要引入一个函数或方法，那么类似的名称`from_degrees()`实际上可能更可取——但我不确定我自己是否会发现代码比简单地将一个数字乘以一个更清晰，`degree`如上图所示。

退一步说：弧度是默认角度测量的原因不是出于任何理论上的原因——比如弧度是数学中测量角度的“自然”方式，或者它们是预期的单位。 Python`sin()`和`cos()`例程适用于采用 PyEphem 角度和做三角函数的人——但主要是因为这是`libastro`PyEphem 封装的库使用的底层单元。这似乎是最明显的举措，特别是对于可能已经`libastro`在他们的 C 代码中使用过的人来说，简单地公开底层库的单元而不是隐藏它们并且总是强制在每个方向上进行转换。

回想起来，打印角度可以方便地显示小时（对于 RA）或度数（对于赤纬），这可能有点模糊，但是一旦做出决定 - 浮点 → str 转换移动到小时或度数- 然后对称性本身决定了提供 str 也应该解释为小时或度数，以便字符串输出和字符串输入将是等效的并且具有相同的单位。

您的论点的结果似乎是后一步 - 如果为类似`.lat`or的属性提供字符串，则自动 str → float 转换`.lon`- 太晦涩难懂，应该简单地禁用，因为提供一个传统上应该是数字的字符串结果在`TypeError`Python 中，不是神奇的静默转换。我实际上倾向于同意，但我认为此时禁用转换并强制人们`ephem.degree`显式乘以为时已晚，因为这会破坏很多现有代码。我希望 PyEphem 继续为那些投入时间编写针对它的程序的人工作。

但我认为你的观点很好，在我的新`skyfield`库中，我不打算进行任何你在 PyEphem 中遇到的魔法转换。相反，无论提供弧度还是度数，我都计划让编程明确说明它们提供的内容，并且永远不允许它们提供“未标记”的数字。如果您想在其发展过程中权衡其语法，您可以在 GitHub 上查看该项目：

[https://github.com/brandon-rhodes/python-skyfield](https://github.com/brandon-rhodes/python-skyfield)

# spine.js - 在spineJS中渲染视图？

> ID：15639950
> 
> 赞同：0
> 
> 时间：2013-03-26T14:44:21.070
> 
> 标签：spine.js, eco

*只是为了让您知道这是我在 stackoverflow 上的第一个问题，所以如果我的问题有问题，我深表歉意。*

好的，所以我刚刚开始使用 Spine，这是我第一次深入研究 MVC 框架，但在渲染 .eco 模板时遇到了麻烦。

这可能是非常基本的东西，但**每当我运行“hem server”时，我看到的只是一个空白页？**

这是 hello.coffee 控制器：

```
Spine = require('spine')

class Hello extends Spine.Controller
    constructor: ->
        super

    render: ->
        @html require('views/view')

module.exports = Hello 
```

这是意见/view.eco

```
<h1>Hello World</h1> 
```

这里是 app/index.coffee

```
require('lib/setup')

Spine = require('spine')
Hello = require('controllers/hello')

class App extends Spine.Controller
    constructor: ->
        super
        @hello = new Hello
        @append @hello

module.exports = App 
```

当我使用 JS 控制台打开访问应用程序时，不会产生任何错误，如果我访问*localhost:9294/test*一切都好吗？

提前感谢任何人可以帮助我和我的noobiness！;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:34:44.467

您还可以让您的控制器构造函数方法为您调用渲染：

```
class Hello extends Spine.Controller
  constructor: ->
    super
    @render()

  render: ->
    @html require('views/view') 
```

# unit-testing - maven测试中的persistence.xml依赖

> ID：15639953
> 
> 赞同：0
> 
> 时间：2013-03-26T14:44:23.773
> 
> 标签：unit-testing, maven, jpa

考虑这个结构：

```
/project
   /module-1
      /src/test/resources/META-INF/persistence.xml
   /module-2 
```

在 module-1 中创建了测试 jar。模块 1/pom.xml：

```
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-jar-plugin</artifactId>
<executions>
    <execution>
        <goals>
            <goal>test-jar</goal>
        </goals>
    </execution>
</executions>
</plugin> 
```

此测试 jar 是 module-2/pom.xml 中的依赖项：

```
<dependency>
<groupId>com.domain.test</groupId>
<artifactId>module-1</artifactId>
<scope>test</scope>
<type>jar</type>
</dependency> 
```

问题是在模块 2 的测试中，找不到 /src/test/resources/META-INF/persistence.xml 中定义的持久性单元（PU）。PU 以编程方式创建：

```
EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory(persistenceUnit);
EntityManager entityManager = entityManagerFactory.createEntityManager(); 
```

我怎样才能让它工作？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:16:05.337

您声明的依赖项不是针对您创建的 test-jar。你应该这样声明：

```
<dependency>
    <groupId>com.domain.test</groupId>
    <artifactId>test-shared</artifactId>
    <type>test-jar</type>
    <scope>test</scope>
</dependency> 
```

# c++ - 检索现有着色器属性时，glGetAttribLocation 返回 -1

> ID：15639957
> 
> 赞同：21
> 
> 时间：2013-03-26T14:44:36.043
> 
> 标签：c++, opengl, shader, vertex-shader

我正在尝试将属性传递给我的顶点着色器，但由于某种原因，它一直在第三个属性位置给我一个-1，我要求 openGl 通过 glGetAttribLocation() 检索。目前它一直给我一个-1的texCoord属性，如果我切换texAttrib和colAttrib（切换代码中的行）它会给我一个颜色属性而不是纹理的-1，我不知道为什么？由于将 -1 传递给 glVertexAttribPointer，我得到 1281 OpenGL 错误：GL_INVALID_VALUE。

我的顶点着色器：

```
#version 150

in vec3 position;
in vec3 color;
in vec2 texcoord;

out vec3 Color;
out vec2 Texcoord;

void main()
{
    Color = color;
    Texcoord = texcoord;
    gl_Position = vec4(position.x, position.y, position.z, 1.0);
} 
```

OpenGL代码：

```
basicShader.Use();

// Buffers and shaders
glGenVertexArrays(1, &vao);
glBindVertexArray(vao);

glGenBuffers(1, &vbo);
// Make it active vbo
glBindBuffer(GL_ARRAY_BUFFER, vbo);

// Build basic triangle
float vertices[] = {
    // position         // color          // textures
    -0.5f,  0.5f, 0.5f, 1.0f, 0.0f, 0.0f, 0.0f, 0.0f, // Top-left
     0.5f,  0.5f, 0.5f, 0.0f, 1.0f, 0.0f, 1.0f, 0.0f, // Top-right
     0.5f, -0.5f, 0.5f, 0.0f, 0.0f, 1.0f, 1.0f, 1.0f, // Bottom-right
    -0.5f, -0.5f, 0.5f, 1.0f, 1.0f, 1.0f, 0.0f, 1.0f// Bottom-left
};
GLuint elements[] = {
    0, 1, 2,
    2, 3, 0
};

glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);

GLint posAttrib = glGetAttribLocation(basicShader.shaderProgram, "position");
glEnableVertexAttribArray(posAttrib); // Enable attribute first before specifiying attributes
glVertexAttribPointer(posAttrib, 3, GL_FLOAT, GL_FALSE, 8 * sizeof(float), 0); // 6 float sizes is every new vertex

GLint colAttrib = glGetAttribLocation(basicShader.shaderProgram, "color");
glEnableVertexAttribArray(colAttrib);
glVertexAttribPointer(colAttrib, 3, GL_FLOAT, GL_FALSE, 8 * sizeof(float), (void*)(3 * sizeof(float))); // same for color + offset

GLint texAttrib = glGetAttribLocation(basicShader.shaderProgram, "texcoord"); // Returns -1
glEnableVertexAttribArray(texAttrib);
glVertexAttribPointer(texAttrib, 2, GL_FLOAT, GL_FALSE, 8 * sizeof(float), (void*)(6 * sizeof(float))); // 6 offset from beginning

[..] 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-26T14:52:42.623

你应该停止使用`glGetAttribLocation`. [*为每个属性分配*一个 location](http://www.opengl.org/wiki/Vertex_Shader#Inputs)，可以`glBindAttribLocation`在链接程序之前使用，也可以使用显式属性位置（如果您可以使用）。

这样，如果编译器优化了一个属性（这就是这里发生的事情；您的片段着色器可能不使用插值之一），您不会在意。您将使用属性索引的标准约定正常设置数组。另外，您不必在每次想要使用不同的程序进行渲染时一直询问属性位置是什么；你*知道*它是什么位置，因为你分配了它。

如果你不能/不会，那么你无能为力。如果您实际上没有使用它们，编译器将优化掉属性。您唯一能做的就是检测它返回 -1 并且不为该属性设置数组。

# ubuntu - sudo：无法解析主机 ServerName（“sudo su”需要很长时间）

> ID：15639960
> 
> 赞同：6
> 
> 时间：2013-03-26T14:44:47.567
> 
> 标签：ubuntu, sudo, ubuntu-12.10

我使用 vmware 并安装 ubuntu 12.10 作为我的来宾操作系统。运行我的电脑，我的网络接口是无线网卡，但是每次我尝试 sudo 时，我都应该等待很长时间。和回声

```
sudo: unable to resolve host ServerName pocUbuntu
[sudo] password for poc: 
```

我通过谷歌搜索几乎解决方案，没有解决方案可以解决我的问题。

当我输入主机名时

```
root@ServerName pocUbuntu:/home/poc# hostname
ServerName pocUbuntu 
```

还有我的主机文件

```
 cat /etc/hosts
127.0.0.1   localhost pocUbuntu
127.0.0.1   pocUbuntu
127.0.1.1   pocUbuntu

# The following lines are desirable for IPv6 capable hosts
::1     ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters 
```

我可以在 ping 服务器名 pocUbuntu 时得到确认

```
root@ServerName pocUbuntu:/home/poc# ping pocUbuntu
PING localhost (127.0.0.1) 56(84) bytes of data.
64 bytes from localhost (127.0.0.1): icmp_req=1 ttl=64 time=0.030 ms
64 bytes from localhost (127.0.0.1): icmp_req=2 ttl=64 time=0.026 ms 
```

我应该怎么做 ？解决烦人的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T14:53:48.910

尝试这个：`/etc/hosts`

```
127.0.0.1 localhost
127.0.1.1 hostname:localdomain hostname 
```

或者：

```
127.0.0.1 localhost 
```

# android - Android：无法在延迟加载列表视图上实现搜索

> ID：15639968
> 
> 赞同：0
> 
> 时间：2013-03-26T14:45:16.600
> 
> 标签：android, android-listview, android-asynctask

我的应用程序中有一个自定义列表视图。我使用 http 请求以 JSON 格式获取数据。有一个异步任务来加载列表视图的整个数据（图像除外）。

在这个异步任务的 onpostexecute() 中，我调用了另一个异步任务来获取列表视图的图像。

现在我正在尝试使用 textchangedlistener 在列表视图上实现搜索功能

问题是图像在后台加载，我经常遇到空指针异常。

谁能建议我摆脱这种情况的方法。我目前正在做的是在加载图像之前我不显示搜索框编辑文本。但这会让用户等待很多，尤其是对于长列表。

整个代码太长，无法发布。所以，我只是在这里粘贴它的简要概述。如果您需要其他任何东西，请告诉我。我也会这样做。

```
public class abcd extends Activity {
    ListView todlistview;
    List<HashMap<String, Object>> cnt = null;
    ArrayList<HashMap<String, Object>> searchResults; /

    .
    .

     /** AsyncTask to parse json data and load ListView */
    private class ListViewLoaderTask extends AsyncTask<String, Void, SimpleAdapter>{

        @Override
        protected SimpleAdapter doInBackground(String... strJson) {
        .
        .
        .

            adapter = new SimpleAdapter(getBaseContext(), cnt, com.example.promoapp.R.layout.textviewfield, from, to);

            return adapter;
        }

        @Override
        protected void onPostExecute(SimpleAdapter adapter) {

            searchResults=new ArrayList<HashMap<String, Object>> (cnt);

            // Setting adapter for the listview
            todlistview.setAdapter(adapter);

            for(int i=0;i<adapter.getCount();i++){
                HashMap<String, Object> hm = (HashMap<String, Object>) adapter.getItem(i);
                .
        .

        ImageLoaderTask imageLoaderTask = new ImageLoaderTask();
                // Starting ImageLoaderTask to download and populate image in the listview
                imageLoaderTask.execute(hm); 
            }
        }
    }

    /** AsyncTask to download and load an image in ListView */
    private class ImageLoaderTask extends AsyncTask<HashMap<String, Object>, Void, HashMap<String, Object>>{

        Dialog dil;
        @Override
        protected HashMap<String, Object> doInBackground(HashMap<String, Object>... hm) {

            InputStream iStream=null;
                  .

                // Create a hashmap object to store image path and its position in the listview
                // Storing the path to the temporary image file
                // Storing the position of the image in the listview
                // Returning the HashMap object containing the image path and position

        }

        @Override
        protected void onPostExecute(HashMap<String, Object> result) {

        }

    }

    private TextWatcher filterTextWatcher = new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence s, int start, int before,
                    int count) {

        String searchString=Search.getText().toString();
                int textLength=searchString.length();               

                searchResults.clear();

                for(int i=0;i<cnt.size();i++)
                {
                    String placeName=cnt.get(i).get("country").toString();

                    if(textLength<=placeName.length()){
                        //compare the String in EditText with Names in the ArrayList
                        if(searchString.equalsIgnoreCase(placeName.substring(0,textLength))){
                            //Toast.makeText(getApplicationContext(),placeName,1).show();
                            searchResults.add(cnt.get(i));
                        }
                    }
                }

                String[] from = { "country","flag","details"};
                 int[] to = { com.example.promoapp.R.id.tv_country,com.example.promoapp.R.id.iv_flag,com.example.promoapp.R.id.tv_country_details};
                 adapter = new SimpleAdapter(getBaseContext(), searchResults, com.example.promoapp.R.layout.textviewfield, from, to);
                 todlistview.setAdapter(adapter);
                adapter.notifyDataSetChanged(); 
              }
     };

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:10:25.947

首先，我不会在**onPostExecute**中执行像加载图像这样的繁重任务，因为此方法适用于 UI 线程。您只需使用 ImageLoaderTask 阻止 UI。我会尝试在第一个 AsyncTask 中加载图像以及其他所有内容。问题是您正在同时搜索和修改列表。尝试在 ListViewLoaderTask 的**背景上进行图像加载**

# android - NFC 空卡崩溃 NFC

> ID：15639971
> 
> 赞同：0
> 
> 时间：2013-03-26T14:45:24.430
> 
> 标签：android, tags, nfc, samsung-mobile

我目前正在开发一个 Android 应用程序来与 Nfca（14443 A 型）卡进行通信，但是当我将三星 Galaxy S II plus 触摸到一张空的 nfca 卡时，标签似乎不断断开并重新连接到我的设备（即使使用没有打开应用程序）并且在短时间内它使智能手机上的 NFC 崩溃，这意味着我无法读取任何类型的标签。

三星 Galaxy S III 不会出现此问题，它能够正确连接到标签并成功与其通信。使用 USB 非接触式智能卡读卡器和我 PC 上的软件的结果相同，一切正常。

不同的 android 设备中是否有不同的 NFC 阅读器，或者什么可以解释我的 S II plus 上的这种行为？

谢谢您的帮助

# highslide - 如何使用 Highslide Iframe 弹出窗口和 ESCape 按钮？

> ID：15639972
> 
> 赞同：0
> 
> 时间：2013-03-26T14:45:26.883
> 
> 标签：highslide

我使用 iframe 打开一个 Highslide 弹出窗口。我需要用 ESCape 键关闭它。当我在 iframe 上做某事时，它会很好用。但是当我单击 iframe 中的某些内容然后按 ESCape 按钮时，它不起作用。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:48:30.353

在 highslide.config.js 文件`hs.enableKeyListener`中设置为时，您无法使用 ESC 键关闭弹出窗口。 您需要从 highslide.config.js 文件中删除此行：`false`

```
hs.enableKeyListener = false; 
```

# android - AnimationDrawable 的问题

> ID：15639978
> 
> 赞同：0
> 
> 时间：2013-03-26T14:45:39.880
> 
> 标签：android

我对 AnimationDrawable 有一个问题。我希望停止 frameAnimation 后显示的背景与启动 frameAnimation 之前显示的背景相同。不幸的是，它不是，因为当 frameAnimation 停止时，背景图像被设置为 frameAnimation 显示的最后一个 ImageView。

有什么办法可以解决吗？

```
ImageView view;

gridview.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
            view=(ImageView)v;
            frameAnimation = (AnimationDrawable) v.getBackground();
            frameAnimation.start();
            myDataThread=new Thread(new DataThread());
            myDataThread.start();

        }
    });

public class DataThread implements Runnable {

    public void run() {
    //do smth
    view.stop();
    view.setBackgroundResource(R.drawable.connectbutton);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:33:11.520

```
gridview.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
        view=(ImageView)v;
        view.setBackgroundResource(R.drawable.your_frame_animation_id);
        AnimationDrawable frameAnimation = (AnimationDrawable) view.getBackground();
        frameAnimation.start();

        view.post(new Runnable() {

            @Override
            public void run() {

                if(frameAnimation.getCurrent() != frameAnimation.getFrame(frameAnimation.getNumberOfFrames() - 1))
                {
                    view.post(this);
                }else
                {
                    view.removeCallbacks(this);
                    view.setBackgroundResource(R.id.some_image_resource);
                }

            }
        });
    }
}); 
```

像这样更改`setOnItemClickListener`，默认情况下帧动画将循环播放。此外，您可能希望在`getView`为`Adapter`您设置的`GridView`. 对于动画侦听器，您可以执行一些操作，例如获取总帧数并将其乘以单帧的持续时间。或者这样做

视图.post()

# ruby - 如何获取所有打开的资源 ruby 进程打开

> ID：15639979
> 
> 赞同：0
> 
> 时间：2013-03-26T14:45:39.963
> 
> 标签：ruby

我知道每个 unix 进程都带有三个打开的​​资源，`STDIN`和`STDOUT`，`STDERR`如果我打开一个文件，例如：

```
passwd = File.open('/etc/passwd')
puts passwd.fileno` 
```

这些资源的数量将会增加。有什么方法可以获取 ruby​​ 进程打开的所有资源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:56:29.307

即使在 Ruby 中运行外部进程，通常也不会打开不同的`IO`对象。除非您明确更改它们，否则相同`STDERR`的`STDOUT`、 和`STDIN`将被共享。要获得所有`IO`s，您可以这样做：

```
ObjectSpace.each_object(IO).to_a
# => [
#   #<IO:<STDERR>>,
#   #<IO:<STDOUT>>,
#   #<IO:<STDIN>>,
#   #<IO:fd 1>,
#   #<IO:fd 0>,
#   #<File:/usr/local/lib/ruby/2.0.0/irb/lc/error.rb (closed)>
# ] 
```

# ruby-on-rails - Rails 迁移文件中的错字

> ID：15639980
> 
> 赞同：3
> 
> 时间：2013-03-26T14:45:41.713
> 
> 标签：ruby-on-rails, rails-migrations

伙计们，

我有一种情况，我创建了一个 Rails 迁移文件，它更新了模型中属性的值。我在几个生产部署中运行了此迁移，然后意识到由于拼写错误，该表从未更新。解决此问题的最佳做法是什么，我应该使用修复程序更新我当前的迁移文件并提交它，然后重新运行迁移，或者我应该创建一个新的迁移文件并删除此迁移。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:57:22.583

如果您运行迁移并且成功，然后您更新当前迁移文件并尝试重新运行迁移，Rails 不会更新您的架构，因为迁移版本将与当前数据库版本相同。

如果您这样做，`rake db:migrate:status`您应该能够看到迁移列表以及已应用或未应用的迁移列表。

基于此，如果您的迁移表明`status: down`它尚未应用于数据库。

如果它已经应用于数据库，您可以有许多选项。

1.  `rake db:rollback`更新您的文件，然后重新运行该迁移
2.  创建一个修复错字的新文件。请注意，即使删除包含错误数据的迁移也不会修复您的数据库，具体取决于您对表所做的操作以及在新迁移中修复它的方式。

# android - 插入数据后，第二次打开应用程序时 ANDROID 中的 SQLITE 数据库重置

> ID：15639985
> 
> 赞同：-1
> 
> 时间：2013-03-26T14:46:01.943
> 
> 标签：android, android-sqlite

我正在为我的android应用程序实现sqlite db（数据库）。当我打开我的应用程序时，我将数据插入数据库并且应用程序退出。当我第二次打开应用程序并尝试检索数据时，我刚刚插入应用程序在我点击后崩溃用于从数据库中检索数据的按钮。是每次打开我的应用程序时数据库都会重置，还是我实现数据库的方式存在问题。这是我的代码：

//用于创建表：

私有静态字符串 SAMPLE_TABLE_NAME = "PERSONS_TABLE";

私有 SQLiteDatabase sampleDB；

```
private void createTable()
{
   sampleDB.execSQL("CREATE TABLE IF NOT EXISTS " +
                SAMPLE_TABLE_NAME +
                " (COUNT INT(3),PERSON_NAME VARCHAR); ");   
} 
```

//插入

```
private void insertData()
{
    sampleDB.execSQL("INSERT INTO " + SAMPLE_TABLE_NAME + " Values ('"+c+"','"+pass+"');");
} 
```

// 仅检索第一列

```
 public int cdata()
{
    cursor = sampleDB.rawQuery("SELECT COUNT FROM " +
            SAMPLE_TABLE_NAME, null);
     if (cursor != null)
     {
          cursor.moveToFirst();

              c=cursor.getInt(cursor.getColumnIndex("COUNT"));

         cursor.close();

     }
    return c;
} 
```

然后我使用这个 c 使用按钮将我的 textview 设置为数据库中的值，以便在单击按钮时，我会知道它们是否是该列中数据库中的任何数据，但我第二次打开应用程序时。所以这次它崩溃了。

用户单击名为“是”的按钮后在数据库中存储语音识别词的代码//使用它来存储语音识别词

@Override public void onActivityResult(int requestCode, int resultCode, Intent data) {

```
 if (requestCode == REQUEST_CODE && resultCode == RESULT_OK)
    {
        // Populate the wordsList with the String values the recognition engine thought it heard
        ArrayList<String> matches = data.getStringArrayListExtra(
                RecognizerIntent.EXTRA_RESULTS);

        pass = matches.get(0); 
```

按钮是 = (Button) findViewById(R.id.button1);

```
yes.setOnClickListener(new View.OnClickListener(){
        public void onClick(View view)
        {  
            try
            {
                c=1;
                sampleDB = openOrCreateDatabase("NAME", MODE_PRIVATE, null);
                createTable();
                insertData();
                seeData();

            }
            catch (SQLiteException se)
            {
                Log.e(getClass().getSimpleName(), "Could not create or Open the database");
            }
            finally
            {

                if (sampleDB != null)
                    sampleDB.execSQL("DELETE FROM " + SAMPLE_TABLE_NAME);
                sampleDB.close();
            }
        }} );

          private void seeData()
          {
    TextView txts=(TextView)findViewById(R.id.textView2);

    cursor = sampleDB.rawQuery("SELECT COUNT,PERSON_NAME FROM " +
            SAMPLE_TABLE_NAME, null);

    if (cursor != null)
    {
         cursor.moveToFirst();

             String personName = cursor.getString(cursor.getColumnIndex("PERSON_NAME"));
             c=cursor.getInt(cursor.getColumnIndex("COUNT"));
                //String country = cursor.getString(cursor.getColumnIndex("COUNTRY"));
                //int age = cursor.getInt(cursor.getColumnIndex("AGE"));
             txts.setText(personName);
             if ( pass.equals(personName))
             {
                Toast.makeText(getApplicationContext(), "Device is unlocked", Toast.LENGTH_SHORT).show();
                finish();

             }
             else
             {
                Toast.makeText(getApplicationContext(), "WRONG PASSWORD", Toast.LENGTH_SHORT).show();
             }

        cursor.close();
    }

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:21:52.347

试试这样：

```
public int cdata()
{
    cursor = sampleDB.rawQuery("SELECT COUNT(*) FROM " +
            SAMPLE_TABLE_NAME, null);
     if (cursor != null)
     {
         cursor.moveToFirst();
         c=cursor.getInt(0);
         cursor.close();
     }
    return c;
} 
```

# python - 加载后是否可以卸载 sqlalchemy 对象的关系数据？

> ID：15639987
> 
> 赞同：1
> 
> 时间：2013-03-26T14:46:08.107
> 
> 标签：python, sqlalchemy

我在一个需要读取与另一个类具有一对多关系的对象的库中工作。以下代码表示我的库代码的高度简化版本：

```
class Plan(Base):
  __tablename__ = 'plan'
  id = Column(Integer, primary_key=True)
  name = Column(String)

  points = relationship('Point')

  def __init__(self,name):
    self.name = name

class Point(Base):
    __tablename__ = 'point'

    id          = Column(Integer, primary_key=True)
    coordinates = Column(String)
    plan_id     = Column(Integer,ForeignKey('plan.id'))

    def __init__(self, coordinates):
        self.coordinates = coordinates 
```

我需要读取关系的所有数据（上面示例中的所有点），对所有点进行操作，然后继续下一个对象（示例中 Plan 类的对象）。由于每个计划的点数很多，我无法将所有数据加载到内存中，我想做的是在完成与计划相关的点对象的操作之后（在操作），卸载它们并继续执行下一个计划的过程。我尝试了以下方法：

```
plan.points = [] 
```

或者

```
for point in plan.points:
  plan.points.remove(point) 
```

但是这些方法中的每一种都会堆叠一个更新或删除查询（取决于如何在关系中设置级联属性），这意味着进程的相当大的开销，如果总执行时间增加 2 或 3 并堆叠一个潜在有害的 SQL 操作，会话已提交。

有没有办法在不生成这些 UPDATE/DELETE 查询和增加执行时间的情况下卸载对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:52:50.153

默认情况下，您的对象仅存储在`Session`using *weak references*中，这意味着您可以简单地删除自己对对象的引用以从内存中清除它们。

也就是说，您可以随意调用[`Session.expunge_all()`](http://docs.sqlalchemy.org/en/rel_0_8/orm/session.html#sqlalchemy.orm.session.Session.expunge_all)以删除会话中仍保留的任何内容。如果您有需要提交的更改，请不要调用它，请先发出[`Session.flush()`](http://docs.sqlalchemy.org/en/rel_0_8/orm/session.html#sqlalchemy.orm.session.Session.flush)。

[您也可以使用该方法](http://docs.sqlalchemy.org/en/rel_0_8/orm/session.html#sqlalchemy.orm.session.Session.expunge)删除单个`Point`对象。[`Session.expunge()`](http://docs.sqlalchemy.org/en/rel_0_8/orm/session.html#sqlalchemy.orm.session.Session.expunge)

有关更多详细信息，请参阅[使用会话](http://docs.sqlalchemy.org/en/rel_0_8/orm/session.html#id1)。

# html - 如何使 Bootstrap 缩略图表现得像 Pinterest 上的缩略图？

> ID：15639991
> 
> 赞同：2
> 
> 时间：2013-03-26T14:46:20.077
> 
> 标签：html, css, twitter-bootstrap, thumbnails

我在我的项目中使用 Twitter Bootstrap 缩略图，但每张照片下标题的长度每次都不同，我希望它们像 Pinterest 上的这个示例一样填充所有空间：

[http://pinterest.com/all/?category=diy_crafts](http://pinterest.com/all/?category=diy_crafts)

我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T15:31:29.923

在这种情况下，您无法使用 twitter bootstrap 的缩略图来实现，因为`float:left`缩略图无法按您的意愿工作。

总是将`float:left`下一个缩略图放在布局中最后一个浮动元素的下方，并放在前一个`float:left`元素的元素的右侧。

这张图片将更好地解释它：

![浮动问题：左](../Images/f5de1450f0f09a5d4751dd27f628f254.png)

这些元素是缩略图，元素编号 5 位于第 4 个元素的下方，并且在布局中尽可能靠左。第 6 个元素被放置在第 5 个元素之下，并且尽可能地靠左，如果我们放置第 7 个元素，它将被放置在页面的左侧，在第一列中，就在元素 6 之下。

[http://jsfiddle.net/YsrtS/](http://jsfiddle.net/YsrtS/)

所以如果我们想要一个 Pinterest 布局，我们应该使用一些 javascript 或者简单地使用`columns`CSS3 的新属性（但是你会失去与旧浏览器的兼容性）。

简单的布局可以是：

```
<div id="wrapper">
    <div id="columns">
        <div class="pin">
            <img src="..." />
            <p>
                ...
            </p>
        </div>
     ... 
```

和CSS：

```
#columns {
    -webkit-column-count: 3;
    -webkit-column-gap: 10px;
    -webkit-column-fill: auto;
    -moz-column-count: 3;
    -moz-column-gap: 10px;
    -moz-column-fill: auto;
    column-count: 3;
    column-gap: 15px;
    column-fill: auto;
}

.pin {
    display: inline-block;
    padding: 15px;
    padding-bottom: 5px;
} 
```

[在这里](http://cssdeck.com/labs/css-only-pinterest-style-columns-layout)，您有一个示例，说明如何使用这个简单的布局来做到这一点。（不是我的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:29:21.830

这不是单独使用引导程序浮动布局可以完成的，因为 Miljan 建议您需要一个插件。例如砌体对齐 div 以彼此完美对齐。

这是一个链接，一路上有一些帮助：http: [//jaxenter.com/tutorial-get-a-tiled-layout-with-jquery-plugins-43514.html](http://jaxenter.com/tutorial-get-a-tiled-layout-with-jquery-plugins-43514.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-13T02:42:31.110

太好了，我使用引导程序并且工作正常。如果要更改列数，只需更改即可。

```
#columns {
   -webkit-column-count: 4;
   ...
} 
```

另一点是由于某些图像存在大小不同的框，因此一个选项是设置为固定大小，这样您将拥有一个同质的界面。

```
.pin img {
   width: 230px;
   ...
} 
```

我使用 230px 到四列大小。

# templates - Sinatra via rackup 不喜欢内联模板

> ID：15639998
> 
> 赞同：7
> 
> 时间：2013-03-26T14:46:34.447
> 
> 标签：templates, sinatra, rackup

当调用 sinatra 本身时，`$ ruby tubemp.rb`有效。但通过`rackup`它没有。该应用程序以某种方式找不到内联模板。

```
#config.ru
require 'rubygems'
require 'sinatra'

set :environment, ENV['RACK_ENV'].to_sym
disable :run, :reload

require './tubemp.rb'

run Sinatra::Application 
```

返回的错误是：

```
No such file or directory - /home/ber/Documenten/ET_tubemp/code/views/index.erb: 
```

相关部分来自`tubemp.rb`

```
get '/' do
  #...
  erb :index
end

__END__
@@ layout
<html>
...
<%= yield %>

@@ index
Welcome! 
```

不知何故，通过机架，它希望视图存在于实际的视图文件中。`__END__`我猜机架在包含左右时无法处理令牌。

除了将我的模板移动到模板文件中之外，我应该如何处理这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T15:42:11.340

从[文档](http://www.sinatrarb.com/intro.html#Inline%20Templates)：

> 在需要 sinatra 的源文件中定义的内联模板会自动加载。`enable :inline_templates`如果您在其他源文件中有内联模板，请显式调用。

在这种情况下，当您使用`rackup`它时`config.ru`，调用的是您的`require 'sinatra'`，而 Sinatra 正在该文件中查找任何模板，但没有找到任何模板。当您直接运行您的应用程序文件时，Sinatra`tubemp.rb`会搜索模板并找到它们。

要修复它，请添加

```
enable :inline_templates 
```

到您的`tubemp.rb`文件（以及任何其他具有内联模板的源文件）。