# StackOverflow 问答 14570000-14570999

# jquery - 不能调用相同的 .animate 和 scrollTop: 两次没有错误

> ID：14570007
> 
> 赞同：0
> 
> 时间：2013-01-28T19:50:56.903
> 
> 标签：jquery, callback, coffeescript

我是 javascript 的新手。我是一名 UX 设计师，我正在尝试在我的个人网站中使用一些代码。到目前为止，一切进展顺利，但我遇到了一个谷歌到目前为止还没有帮助我解决的错误。

我正在做的是有一个执行以下操作的按钮：

1.  单击时，它会统计一个带有回调的 .toggle。
2.  回调的第一部分使用 .slideDown 打开一个部分并向下滚动以显示隐藏的内容
3.  同时，它会将部分的顶部移动到距页面顶部 50px 的位置，无论您单击它时它在哪里。这就是隐藏内容现在填充页面的原因。

这部分工作正常，没有错误。这是我的问题。

1.  在回调中，我希望它使用 .slideUp 再次关闭内容区域。这工作正常。
2.  但是当我再次尝试使用 scrollTop: 时，我得到了这个错误：

    未捕获的类型错误：对象 # 的属性“顶部”不是函数

这是我的咖啡脚本：

```
jQuery(document).ready theExpander = ->
  jQuery("#expander").toggle (->
    # first callback to slide it down
    jQuery(".expanding").slideDown 1000
    jQuery(this).toggleClass "darker"
    jQuery("html, body").animate
      scrollTop: jQuery(this).offset().top - 50
    , 600
    jQuery(".more").addClass "hidden"
    jQuery(".less").addClass "shown"
  ), ->
    # second callback to slide it up
    jQuery(".expanding").slideUp 1000
    jQuery(this).toggleClass "darker"
    jQuery("html, body").animate
      scrollTop: jQuery(this).offset().top 200
    , 600
    jQuery(".more").removeClass "hidden"
    jQuery(".less").removeClass "shown" 
```

该错误出现在第二次单击启动回调的按钮上。我不知道为什么会这样。我不能让回调使用相同的 scrollTop 两次吗？

有人知道我在这里做什么吗？如果我在第二次回调中删除这些行，它可以正常工作：

```
 jQuery("html, body").animate
      scrollTop: jQuery(this).offset().top 200
    , 600 
```

我从哪里开始？我是否需要在第二次回调中重新识别`Property 'top' of object #<Object> is not a function`错误或遗漏的 ID？

我是通过极端的反复试验来写这篇文章的，这是我做过的第一次回调。如果有人能指出我的方式的错误，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:02:42.093

```
jQuery(this).offset().top 200 
```

被翻译成

```
jQuery(this).offset().top(200) 
```

由于 top 不是一个函数，而是一个属性，所以你会得到一个错误。

你是这个意思吗？

```
jQuery(this).offset().top - 200 
```

# php - 正则表达式验证推特处理程序

> ID：14570008
> 
> 赞同：-2
> 
> 时间：2013-01-28T19:50:59.227
> 
> 标签：php, regex

我发现这个函数可以验证 twitter 帐户的长度。

您的用户名最多可包含 15 个字符。

```
function validate_username($username)
{
    return preg_match('/^[A-Za-z0-9_]{1,15}$/', $username);
} 
```

如何更改此规则以使字符串开头的 @ 符号可选！

有效输入样本

abcdabcdabcdabc

@abcdabcdabcdabc

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T19:54:04.317

可`?`用于使前一个字符可选：

```
preg_match('/^@?[A-Za-z0-9_]{1,15}$/', $username); 
```

等效地：

```
preg_match('/^@{0,1}[A-Za-z0-9_]{1,15}$/', $username); 
```

# python - 解释为什么不应从源目录导入 numpy

> ID：14570011
> 
> 赞同：12
> 
> 时间：2013-01-28T19:51:04.023
> 
> 标签：python, import, numpy, matplotlib, directory

## 研究免责声明：

我检查了以下其他 StackOverflow 问题：

*   [如何在 python shell 中导入 numpy](https://stackoverflow.com/questions/11906575/how-to-import-numpy-in-python-shell/11906601#11906601)

*   [如何在不安装的情况下使用 numpy？](https://stackoverflow.com/questions/6976503/how-can-i-use-numpy-without-installing-it)

*   [从相对路径导入模块](https://stackoverflow.com/questions/279237/python-import-a-module-from-a-folder)

也许对某些人来说，那些可能会回答我的问题，但据我所知，我仍然不了解情况。

我正在尝试导入 numpy 以便 matplotlib 可以工作，但是在执行`__init__.py`numpy 文件夹中的文件时，会显示以下错误消息：

```
ImportError: Error importing numpy: you should not try to import numpy from
    its source directory; please exit the numpy source tree, and relaunch
    your python intepreter from there. 
```

解释从源目录导入某些东西而不是其他导入方式的含义。是不是说导入的时候不应该是源代码？或者这是否意味着它实际上只是我正在导入的错误目录/文件夹。我知道另一个 StackOverflow 答案是：

> 该消息是不言自明的；调用 Python 时，您的工作目录不应是 numpy 源目录；应该安装 numpy 并且您的工作目录应该是它所在的目录以外的任何目录。

但是，我不明白这一点。你不应该导入你想要使用的东西吗？我假设 import 命令在此语句中将源目录合并到您当前的工作目录中。

我还阅读了其他答案，例如：

*   用于`distutils`安装本地目录

*   用于`virtualenv`创建虚拟系统目录

*   使用 Enthought 的 EPD 将 numpy 预安装在我认为是系统目录的位置，并且

*   使用命令`$ dpkg -i --force-not-root --root=$HOME mypackagename.deb`来创建我认为是某种子系统目录，它被视为系统目录。

所以，如果我错了，请纠正我，但是 numpy 是否强烈要求以某种方式安装在主系统目录中？

## 机器状态：

我正在使用没有管理权限的 Windows 机器。他们安装了 Python 3.3 Shell 和 matplotlib。运行命令提示符时，`python`并`python3`不能识别。我必须从应用程序菜单运行 Python shell。我什至可以从我自己的目录（与他们的目录不同）开始成功导入 matplotlib，但它会在到达`__init__.py`numpy 模块时停止，如果它存在并报告上述错误。

## 更新：

幸运的是，我的管理员能够直接在`site-packages`文件夹中正确安装 numpy。谢谢你回答我的问题。因为有你，我才更了解情况。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-28T22:53:03.997

numpy 包括用 C 编写的扩展模块。您需要在 numpy 包完成之前构建这些扩展模块。最可靠的方法是构建它并像平常一样安装它`site-packages`。您也可以使用[标准的 distutils 选项](http://docs.python.org/2/install/index.html#alternate-installation)将它安装到另一个目录。但是，一旦您安装了它，您应该将您的目录从源代码树中更改出来。Python 开始在您的当前目录中寻找包，因此不完整的 numpy 包（没有必要的内置 C 扩展模块）的存在将首先被拾取并导致您引用的消息的错误。这种情况经常发生，所以我们会给出很长的信息来解释该怎么做。

# javascript - 需要回调功能

> ID：14570020
> 
> 赞同：0
> 
> 时间：2013-01-28T19:51:24.120
> 
> 标签：javascript, function

我正在尝试构建一个接受转换函数作为其参数之一的 JavaScript 函数。请记住，此转换功能是用户构建的，因此它具有多种语法，但此功能的目标是将网页从一种样式转换为另一种样式。

例如，页面当前可能具有垂直三列布局，调用此转换函数可能会将其更改为水平两列布局。

我需要的是某种类型的回调或等待/睡眠函数，直到转换完成（由特定表单对象的存在指定）。我一直在尝试使用 eval()，但是已经阅读了很多关于不使用它的帖子。下面是我正在寻找的代码示例 - 请不要使用 jquery 或其他框架。

```
// MAKE ANY WEBPAGE TRANSITIONS
if (transition != '') {
    eval(transition, callback) {
        success: alert('done with the transition eval call');
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:55:43.983

转换函数必须首先设计为接受回调。

```
function transition(callback) {
    // Do stuff
    callback();
}

transition(function () { alert("end of transition"); }); 
```

没有通用的方法来检测执行异步操作（例如 Ajax 或`setTimeout`调用）的函数何时完成。函数本身必须提供一种方式。

# java - 如何休眠注释地图 > 或地图 >

> ID：14570025
> 
> 赞同：1
> 
> 时间：2013-01-28T19:51:43.860
> 
> 标签：java, hibernate, mapping

*使用 Hibernate Core 4.1.7、JPA 注释、java 1.7*

易于理解的是有关 Map<String, Entity> 阅读 Hibernate [doc on collections](http://docs.jboss.org/hibernate/orm/4.0/manual/en-US/html/collections.html)的示例，或 Map<String, String>[此处（stackoverflow）](https://stackoverflow.com/questions/6946987/mapping-mapstring-string-using-hibernate)。

很难找到`Map<String, Set<String>>`关于为什么我在这里问这个问题的例子（甚至 Map<String, Map<String, String>> 只是为了好奇菊花）。

我想要的只是保存包含命名的多值属性（=帐户属性）的实体（帐户）。

我都使用 3 种实体类型：`Account -> @OneToMany -> AccountAttribute -> @OneToMany -> AccountAttributeValue`

但是用我自己的类包装原生 Java 类型对我**来说似乎有点傻**。克隆 Map<String, String> 示例我想要类似的东西

```
@Entity
public class Account {

    @Id @GeneratedValue(strategy = GenerationType.AUTO) 
    @Column(name="key")
    private Long key;

    @ElementCollection(fetch=FetchType.EAGER)
    @JoinTable(name = "Attribute",
            joinColumns = @JoinColumn(name = "fkAccount"))
    @MapKeyColumn(name = "name")
    // next line is working for Map<String, String>, but not here!
    @Column(name = "value")  
    private Map<String, Set<String>> attributes = new HashMap<String, Set<String>>();

    // ... omitting: constructor, getters, setters, toString()

} 
```

这给了我
`Initial SessionFactory creation failed: org.hibernate.MappingException: Could not determine type for: java.util.Set, at table: Attribute, for columns:[org.hibernate.mapping.Column(attributes)]`

作为数据库布局，我创建了 2 个表。-`Account`只有一个键指向外键的表 -`Attribute`每行中包含命名值的表。

例如，对于**多值属性**，我认为它包含**2 行**相同`fkAccount`但`name`不同的行`value`- 是的，我本可以更规范化，但我想在可接受的时间内读取我的数据 :-)

```
CREATE  TABLE IF NOT EXISTS `foo`.`Account` (
  `key` INT NOT NULL AUTO_INCREMENT ,
  ...

CREATE  TABLE IF NOT EXISTS `foo`.`Attribute` (
  `fkAccount` INT NOT NULL ,
  `name` VARCHAR(45) NOT NULL ,
  `value` VARCHAR(45) NOT NULL 
  ... 
```

任何提示或备用数据库布局建议表示赞赏。

**编辑 -**
汤姆（据我所知）为我工作的解决方案谢谢你们，1天的体验，解决方案！

我的问题中刚才提到的表格布局现在适用于此类。

```
@Entity
public class Account {
    /* ... omitting "key", see as above */

    /* NEW: now @CollectionTable 
            replaces @JoinTable / @MapKeyColumn / @Column  from above
    */
    @ElementCollection(fetch = FetchType.EAGER)
    @CollectionTable(name="AccountAttribute",
                     joinColumns=@JoinColumn(name="fkAccount"))
    private Set<AccountAttribute> attributes = null;

    // ... omitting: constructor, getters, setters, toString()
} 
```

和新的

```
 @Embeddable
    public class AccountAttribute {

        @Column(name="attributeName")
        private String attributeName = null;

        @Column(name="attributeValue")
        private String attributeValue = null;

        // ... omitting: constructor, getters, setters, toString()
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:17:57.793

JPA 没有为您提供任何方法来映射任何集合的集合。您可以映射基元、对实体的引用、可嵌入对象和上述任何事物的集合。

那里的集合意味着集合、列表或地图；这里没有可以帮助您的多地图类型。

因此，遗憾的是没有办法准确地映射您想要映射的结构。

我认为你最接近的方法是定义一个可嵌入的类`Attribute`，包含一个名称和一个值，然后映射一个`Set<Attribute>`。然后，您可以将其转换为`Map<String, Set<String>>`in 代码。

很遗憾没有办法做到这一点。我认为 JPA 规范的作者要么没有想到它，要么认为这是一个足够晦涩的极端案例，不值得处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T21:05:24.577

有两种方法可以在数据库中对此进行建模，具体取决于您想要多少表。如果您想要三个，那么您的工作方式基本上是正确的，尽管您可以将其修剪为两个实体（`Account`和`AccountAttribute`），其中`AccountAttribute`包含一组值。

您无法使用三个表和一个 Account 实体对其进行建模，因为您没有足够的标识符。该`VALUE`表必须有一个由帐户 ID 和某种属性键组成的复合键，您的表必须如下所示：

```
ACCOUNT (id, ...)
ACCOUNT_ATTRIBUTE(account_id, account_attribute_id, ...)
ACCOUNT_ATTRIBUTE_VALUE(account_id, account_attribute_id, value, ...) 
```

如果`AccountAttribute`是一个实体，那么它有一个 ID。如果不是，它不会，那么你将如何键入`ACCOUNT_ATTRIBUTE_VALUE`表？

[正如其他答案](https://stackoverflow.com/questions/5261659/is-it-possible-for-a-jpa-embeddable-to-contain-embeddable-or-collection-of-embed)中提到的，JPA 规范证实了这一点。

现在，您可以在两个表中仅使用一个`Account`实体来执行此操作，方法是将 Set 折叠为某种序列化形式并将其保存为二进制、XML 或其他形式。不确定这是否值得您努力，但您草拟的专栏 ( `value varchar(45)`) 几乎可以肯定不够长。

# javascript - 使用 iframe URL 的 jQuery UI 对话框

> ID：14570026
> 
> 赞同：12
> 
> 时间：2013-01-28T19:51:45.043
> 
> 标签：javascript, iframe, dialog, modal-dialog

我使用 nyroModal 和 Fancybox 作为网站工具，但在这种情况下，我必须使用 jQuery UI 的对话框工具。我需要这个对话框来加载页面。我相信我以前做过这个，但我遇到的一切似乎都比它应该的复杂。我不能用类似的东西...

```
$( "#dialog" ).dialog({
      autoOpen: false,
      modal: true,
      url: http://www.google.com
      });

<button id="dialog">Open Dialog</button> 
```

并在一个简单的 iframe 中打开页面？提前致谢。

* * *

我确实发现我有这个代码，

```
<script>
  //$.fx.speeds._default = 500;  
  $(function() {    
    $( "#dialog" ).dialog({      
    autoOpen: false,      
    show: "fade",   
    hide: "fade",
            modal: true,            
            open: function () {$(this).load('nom-1-dialog-add-vessels.html');},                     
            height: 'auto',            
            width: 'auto',        
            resizable: true,    
            title: 'Vessels'    });     

    $( "#opener" ).click(function() {      
    $( "#dialog" ).dialog( "open" );      
    return false;   
    });  
  });  
  </script>

<div id="dialog"></div><button id="opener">Open Dialog</button> 
```

但它没有加载实际页面。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-28T20:05:23.067

`url`不是[jQuery UI 对话框](http://api.jqueryui.com/dialog/)中的选项之一。

对我有用的一件事是在`iframe`里面有一个`div`对话框，并在`open`事件上设置它的 url 属性。

喜欢：

```
<div id="dialog">
    <iframe id="myIframe" src=""></iframe>
</div>
<button id="dialogBtn">Open Dialog</button> 
```

和 JS：

```
$("#dialog").dialog({
    autoOpen: false,
    modal: true,
    height: 600,
    open: function(ev, ui){
             $('#myIframe').attr('src','http://www.jQuery.com');
          }
});

$('#dialogBtn').click(function(){
    $('#dialog').dialog('open');
}); 
```

不过，您会发现您需要在 iframe 上进行一些样式设置以使其看起来不错。

```
#myIframe{
  height: 580px;
} 
```

编辑：工作版本 - [http://jsbin.com/uruyob/1/edit](http://jsbin.com/uruyob/1/edit)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T20:19:05.697

根据[Floyd Pink](https://stackoverflow.com/users/218882/floyd-pink)和您的代码，我整合了一个代码。检查这里[http://jsfiddle.net/Nz9Q8/](http://jsfiddle.net/Nz9Q8/)

```
 $(function () {
  $("#dialog").dialog({
    autoOpen: false,
    show: "fade",
    hide: "fade",
    modal: true,
    open: function (ev, ui) {
      $('#myIframe').src = 'http://www.w3schools.com';
    },
    height: 'auto',
    width: 'auto',
    resizable: true,
    title: 'Vessels'
  });

  $("#opener").click(function () {
    $("#dialog").dialog("open");
    return false;
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T20:02:38.663

我尝试了类似的事情。检查这个[http://jsfiddle.net/P2Q5U/](http://jsfiddle.net/P2Q5U/)

```
<div id="dialogContent" title="Basic dialog">
  <iframe src="http://www.w3schools.com"></iframe>
</div>
<button id="dialog">Open Dialog</button>

 $(function () {
   $("#dialogContent").dialog({
     autoOpen: false,
     modal: true
   });

   $('#dialog').click(function () {
     $("#dialogContent").dialog( "open" );
   });
 }); 
```

# c - 如何在c中连接多个二维数组

> ID：14570027
> 
> 赞同：0
> 
> 时间：2013-01-28T19:51:46.680
> 
> 标签：c, arrays, concatenation, multidimensional-array

嘿伙计们，我想在 c 中连接多个 2d 数组，这在我只做两个时会发生什么，但如果我做的更多，它的总和在一起。似乎每个周期它都会增加一个：

**数组 1**

```
222222222222222222222
000000000001000000000
000000000001000000000
000000000001000000000
000000000001000000000
111111111111111111111 
```

**数组 2**

```
222222222222222222222
000000000001000000000
000000000001000000000
000000000000000000000
000000000001000000000
111111111111111111111 
```

**我想要的是**

```
222222222222222222222222222222222222222222
000000000001000000000000000000001000000000
000000000001000000000000000000001000000000
000000000001000000000000000000000000000000
000000000001000000000000000000001000000000
111111111111111111111111111111111111111111 
```

**我得到了什么**

```
222222222222222222222000000000001000000000
000000000001000000000000000000001000000000
000000000001000000000000000000000000000000
000000000001000000000000000000001000000000
000000000001000000000000111111111111111111
111111111111111111111111111111111111111111 
```

连接函数

```
 #define map_height 6
 #define map_length 21
 #define map_stage_length 5

char ** concatenate(){
    char **array=create2DCharArray(map_height,map_length*map_stage_length); 
    char **mapsarray[5]={create2DCharArray(map_height,map_length),
                        create2DCharArray(map_height,map_length),
                        create2DCharArray(map_height,map_length),
                        create2DCharArray(map_height,map_length),
                        create2DCharArray(map_height,map_length)}; 

int i=0,j=0,n=0;

mapsarray[0]=load_map("./resources/maps/map1.map");
mapsarray[1]=load_map("./resources/maps/map2.map");
mapsarray[2]=load_map("./resources/maps/map2.map");
mapsarray[3]=load_map("./resources/maps/map2.map");
mapsarray[4]=load_map("./resources/maps/map2.map");

for (i = 0; i < map_height; i++)
{
    for (n = 0; n < map_stage_length; n++)
    {
        for (j = 0; j < map_length; j++)
        {

            array[i][(n*map_length)+j]=mapsarray[n][i][j];
        }

    }

}

return array;   
  } 
```

你知道为什么它会向上推吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:09:03.587

试试这个循环。

```
for(i=0; i<map_stage_length; i++){ // for each 2d Array, ith array  
   for(r=0; r<map_height; r++){ // for each col
       for(c=0; c<map_length; c++) // for each row
          array[r][ (i*map_length) + c ]  = mapsarray[i][r][c] ;    
   }
} 
```

[使用好的变量名代替 i,j ,k]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:13:15.823

这是使调试更容易的提示。使最外层循环遍历“n”。每个`mapsarray[n]`都是一个输入数组。将其余代码分解为一个函数，该函数只需将输入数组中的数据写入输出数组中的正确位置。你最终想要的是这样的：

```
for (i = 0; i < num_maps; ++i)
{
  concatenate_array(array, mapsarray[n], n);
} 
```

使用该架构，您可以`concatenate_array`单独在每个输入上执行该函数并观察数据写入的位置。这应该使您的数组索引算术或循环边界条件需要调整的地方更加明显。

# mysql - 如果内部查询一无所获，则取消插入

> ID：14570031
> 
> 赞同：0
> 
> 时间：2013-01-28T19:51:53.373
> 
> 标签：mysql, insert

我收到以下查询：

```
INSERT INTO contracts_settings (contract_id, setting_id, setting_value)
VALUES (:contract_id, (
    SELECT  setting_id
    FROM    settings
    WHERE   setting_type = :setting_type
        AND setting_name = :setting_name
    LIMIT   1
), :setting_value)
ON DUPLICATE KEY UPDATE setting_value = :setting_value 
```

带有前缀的值`:`使用 PHP 替换为数据`PDO::bindBalue`。

如果内部查询什么也没找到（它返回 NULL），还要插入一个 NULL 语句。如何避免这种情况？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:55:52.327

将`INSERT ... VALUES`语法转换为**[`INSERT ... SELECT`](http://dev.mysql.com/doc/refman/5.5/en/insert-select.html)**：

```
INSERT INTO contracts_settings 
  (contract_id, setting_id, setting_value)
SELECT 
    :contract_id,
    setting_id,
    :setting_value
FROM  settings
WHERE setting_type = :setting_type
  AND setting_name = :setting_name
LIMIT   1

ON DUPLICATE KEY UPDATE 
    setting_value = :setting_value ; 
```

# php - Joomla 添加/编辑文章和部分屏幕空白

> ID：14570036
> 
> 赞同：0
> 
> 时间：2013-01-28T19:52:32.563
> 
> 标签：php, joomla

我正在使用 Joomla v1.5.26，无论出于何种原因，当我导航到[MYSITE.com/administrator/index.php?option=com_content&task=add](http://MYSITE.com/administrator/index.php?option=com_content&task=add)或者如果我尝试编辑任何已经存在的文章（或部分）时，我都会看到一个屏幕一个空的身体标签。

管理员部分的其他页面似乎正在工作。

它似乎与此相同（或非常相似）的问题：[http](http://www.justanswer.com/computer-programming/32fo1-when-hit-new-button-article-manager-joomla.html) ://www.justanswer.com/computer-programming/32fo1-when-hit-new-button-article-manager-joomla.html但这是我能找到问题的唯一实例，并且在文章末尾没有解决。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T07:43:52.683

我的建议：

1-尝试禁用您正在使用的编辑器（在全局设置或您尝试编辑的用户上将其设置为无编辑器）

2- 尝试`components/com_content`从 Joomla 1.5.26 源重新上传到您的网站并覆盖现有文件。可能缺少一些东西。

# c# - 使用 Newtonsoft 反序列化 JSON 对象 C#

> ID：14570037
> 
> 赞同：2
> 
> 时间：2013-01-28T19:52:32.107
> 
> 标签：c#, json, json.net

我需要反序列化以下内容：

```
{"result":{"success":true,"value":"8cb2237d0679ca88db6464eac60da96345513964"}} 
```

使用 Newtonsoft.Json 到 C# 对象

```
WebClient wc = new WebClient();
var json = wc.DownloadString(url);
Worker w = JsonConvert.DeserializeObject<Worker>(json); 
```

这是课程代码：

```
public class Worker
{

    [JsonProperty("success")]
    public string success { get; set; }

    [JsonProperty("value")]
    public string value { get; set; }
} 
```

代码没有报错，但是*成功*和*值为*空。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T19:56:42.427

您缺少外部对象。

```
public class Worker
{
     [JsonProperty("result")]
     public Result Result { get; set; }
}

public class Result
{
    [JsonProperty("success")]
    public string Success { get; set; }

    [JsonProperty("value")]
    public string Value { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:56:14.667

我不熟悉那个库，但成功和结果看起来都是对象“结果”的属性

你试过`[JsonProperty("result.success")]`吗？

编辑：好吧，不管它看起来像一个范围问题。查看文档后，这是我的新建议：

```
public class Result{
 [JsonProperty("result")]
 public Worker result { get; set; }
} 
```

然后`Json.Convert.Deserialize<Result>(json)`改为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T19:58:17.190

您不需要任何课程，可以使用`dynamic`关键字

```
string json = @"{""result"":{""success"":true,""value"":""8cb2237d0679ca88db6464eac60da96345513964""}}";

dynamic dynObj = JsonConvert.DeserializeObject(json);
Console.WriteLine("{0} {1}", dynObj.result.success, dynObj.result.value); 
```

# python - 正则表达式中的意外结果

> ID：14570045
> 
> 赞同：5
> 
> 时间：2013-01-28T19:53:18.147
> 
> 标签：python, regex

```
pattern = r'[ -\\[\\]]'
regex = re.compile(pattern)
name = '123[ shiv'
new_name = regex.sub('_',name) 
```

给出结果（新名称）::

```
'_____shiv' 
```

代替：：

```
'123__shiv' 
```

..thanx提前

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T19:55:26.137

由于介于两者之间，您的正则表达式正在创建从`whitespace` *(ASCII Code - 32)*到`opening bracket - [`*(ASCII Code - 91)*`-`的范围。该范围包括数字`0 to 9` *（ASCII 码 - 48 到 57）*。

您需要将您的正则表达式更改为： -

```
pattern = '[- \\[\\]]' 
```

一开始就动`-`了。

# google-app-engine - App Engine 数据存储区索引：条目计数为空？

> ID：14570046
> 
> 赞同：10
> 
> 时间：2013-01-28T19:53:23.747
> 
> 标签：google-app-engine, google-cloud-datastore

在 Google App Engine 管理控制台中，在 Datastore Indexes 下，我的所有索引都列为 Serving。但是，其中很多在 Index Entry Count 和 Index Storage 列中是空白的。然而，这些相同的索引在数据存储统计页面上具有指定的大小。这是什么意思呢？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T17:39:02.153

数据存储索引和数据存储统计信息分别更新，因此您应该检查每个屏幕中的“最后更新”值，看看它们是否匹配。

例如，我的一个应用程序目前说：

*   统计：上次更新时间：1 天，13:14:07 前
*   索引：1 天，13:15:12 前

# c++ - 暂时将指针设为 NULL 有什么意义吗？

> ID：14570050
> 
> 赞同：24
> 
> 时间：2013-01-28T19:53:34.120
> 
> 标签：c++, c, pointers, null

我见过很多这样的代码：

```
SomeType* ptr = NULL;
ptr = SomeMethod(some, params); 
```

重点是什么？我还看到它在`ptr`其他地方声明（例如在类定义中），然后在类构造函数中会有这样的：

```
ptr = NULL;
ptr = SomeMethod(some, params); 
```

我不明白为什么要这样做。`ptr = NULL`这条线肯定没用吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-28T19:55:40.447

如果“SomeMethod”引发异常，您的 SomeType* 将继续指向您不希望它指向的东西。因此，如果您不希望指针再指向旧的东西，将指针设置为 null 绝对是一个好习惯。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-28T20:02:41.530

除了适用于 C++ 的抛出异常的优点之外，即使在 C 中，初始化所有变量也是一个好主意。当编译器可以确定不需要初始化时，它几乎总是会优化初始化。

这是一个小例子，说明如果你不这样做会发生什么。

```
SomeType* ptr;
ptr = SomeMethod(some, params); 
```

如您所见，这很好用，没有`ptr`有效值没有问题。

现在，有人认为添加更多代码是个好主意：

```
SomeType* ptr;

int x = someotherfunction;

if (x > 90)
{
     ptr = SomeMethod(some, params);
} 
```

现在突然间你`ptr`会有一些随机的废话内容 - 可能是 NULL，但很可能是别的东西。是的，我们都认为我们会记得回来查看我们的更改是否影响了其他东西，等等。但是如果你已经编程了几年，我几乎可以肯定你有一些案例“哎呀，没想到”。

想象一下，我添加“someotherfunction”的新代码是 20 或 30 行，您可以清楚地看到问题所在。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-28T19:56:23.940

在第一种情况下，在声明新值时始终分配一个值是一种很好的做法，因此您最终不会得到统一的值（保护您免受自己的错误）。但是，如果直接一个接一个，就可以看作是无用的。

在第二种情况下，它完全没用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-28T19:56:34.893

它确实没用（这被称为“死任务”）。但是，有些人更喜欢`NULL`在声明时初始化指针，然后分别显式地分配给它。也许这只是出于可读性的原因（也许有些人认为它更具可读性，或者发现即使在赋值被注释掉以进行调试时声明变量也很有用）。我不确定我会这样做/将其视为练习。

另请注意，大多数编译器会自动优化分配。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-28T21:04:48.067

这种做法不仅没有用；这是有害的。如果你刚刚写了：

```
SomeType* ptr = NULL;
/* lots of stuff in between */
ptr = SomeMethod(some, params); 
```

并且不小心`ptr`在中间代码的某个地方使用了，编译器将无法通知您此错误。如果你写：

```
SomeType* ptr;
/* lots of stuff in between */
ptr = SomeMethod(some, params); 
```

那么赋值前的任何使用`ptr`都是UB，一个好的编译器或者静态分析工具会通知你这个错误。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-28T23:03:33.653

代码现在是无用的，但也许使用预期将来的维护，其中将在冗余初始化和分配之间添加更多行，以便初始化不再是冗余的。

该代码也可能是删除的结果。也就是说，在声明和赋值之间可能存在一些代码，但后来被删除了，并且没有进行清理以将赋值合并到初始化中。当然，代码就是这样是没有*意义的。*在这种情况下，我们只是对它是如何变成这样的（也许是改变它的理由）有一个历史解释。

有时，看似无用的变量初始化是由于有人不得不让编译器对“可能未使用”的变量发出警告，如果有不止一种方法可以到达使用该变量的代码块，就会发生这种情况，并且编译器不够复杂，无法证明在所有情况下，变量都是通过赋值以某种方式初始化的。

在声明它们的地方初始化所有变量是一个好习惯，因为它减少了由于未初始化数据而导致的不可预测行为的可能性。一些人认为，当未初始化的变量被赋予不适当值的初始化所消除时，某些静态工具的工作效果会较差，从而使错误更难被发现。但是，如果错误基于初始化数据，则它们的*可重复性*更高，并且错误行为也很可能在平台之间也*可移植。*某些语言会为您初始化本地人。在 Lisp 中， (let (x) ...) 意味着在代码块`...`中，变量`x`的值为`NIL`，因为没有初始化程序。Lisp 代码的静态分析可以轻松追踪诸如`NIL`被不恰当地传递给数值函数。在 C 和相关语言中，问题有点不同，因为对于 type like `int`，没有等价的错误类型值，例如`NIL`. So`0`被替换，这是一个有效值，不会简单地因类型不匹配而破坏计算。不适当的`0`可能会导致计算中的算法错误。然而，在指针的情况下，空指针值是一个合理的复制品，`NIL`因为它是程序员可见的、可移植的域值，上面写着“我不指向任何对象”。当指针实际上暂时没有指向任何东西时，我们应该给它这个值，而不是在其中留下可能意外指向意外对象的随机位。

# asp.net - appfabric 缓存失败异常=getandlock 会话状态请求

> ID：14570056
> 
> 赞同：1
> 
> 时间：2013-01-28T19:53:54.413
> 
> 标签：asp.net, session-state, performancecounter, appfabric-cache

我在一个带有 3 个主机 appfabric 集群的 asp.net 应用程序中使用会话提供程序。集群是版本 3，在 windows server 2008 上运行。我的会话集群的辅助节点设置为 1，最小辅助节点设置为 0。

当我查看缓存统计信息时，我注意到未命中计数类别中有一个非常大的（不成比例的）数字。事实上，它几乎等于请求计数类别。因此，我决定查看性能计数器，以找出会话提供程序似乎无法正确保存对象或为什么它一直丢失的原因。

我发现 getandlocks/sec 与失败异常/秒计数器相同。它也一直在运行，考虑到我们的员工产生的流量只有这么多，这是不正常的。对象数量并不大，但拒绝率显然远高于应该从中出来的对象数量。我没有在会话中写入或修改那么多信息，在大多数情况下它不会改变，但显然我收到的请求数量远远超过我的用户可以创建的数量。

欢迎任何帮助。

PS。理想情况下，我很想知道这些失败异常的含义，但似乎无法捕获它们。

# javascript - Javascript：如果字符串以某些字符开头，则删除第一行文本

> ID：14570057
> 
> 赞同：0
> 
> 时间：2013-01-28T19:53:54.990
> 
> 标签：javascript

我为一些文本操作编写了一个脚本，并想添加一个函数，以便删除以符号“>”开头的输入字符串的第一行。我试图找到一个解决方案几个小时，但我无法让它工作：不知何故第一行没有正确删除。

我的输入文本应该按原样处理，如果它看起来像这样：“ `HABHHIKKLLMMNMNIL`”，如果它看起来像这样，则应该删除第一行：“

```
>some text
HABHHIKKLLMMNMNIL 
```

"

我当前的解决方案如下所示：

```
// remove first line if starts with '>'

if (sequence_str.substring(0) === '>'){
    // break the textblock into an array of lines
    var lines = sequence_str.split('\n');
    // remove one line, starting at the first position
    lines.splice(0,1);
    // join the array back into a single string
    var sequence_str = lines.join('\n');
}

sequence_str = sequence_str.replace(/(\r\n|\n|\r)/gm,""); //remove linebreaks 
```

我会很感激任何想法，我希望有些想法可以帮助我找出问题所在。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:56:15.987

为什么不只是这个？

```
sequence_str = sequence_str.replace(/^>.*/,''); 
```

如果它以 . 开头，这将删除第一行`>`。它将留下一个空行（换行符不受影响），但由于您稍后会删除所有换行符，所以没关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:22:57.507

试试这个

“线=线。拼接（0,1）；”

而不是“lines.splice(0,1);”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T23:04:49.453

非常感谢，我真的很喜欢你建议的短代码。

错误是我使用

```
if (sequence_str.substring(0) === '>') 
```

它应该在哪里

```
if (sequence_str.substring(0,1) === '>') 
```

我是一名 JavaScript 初学者，来自 Python 角，请原谅我的愚蠢错误

编辑：如果有人有兴趣了解最终产品的外观： [http ://bluewoodtree.zxq.net/crop_and_cleave.html](http://bluewoodtree.zxq.net/crop_and_cleave.html)

# javascript - Chrome 内容脚本 (De)/激活

> ID：14570058
> 
> 赞同：2
> 
> 时间：2013-01-28T19:53:55.793
> 
> 标签：javascript, json, google-chrome, google-chrome-extension, content-script

我试图让用户通过按钮激活/停用 Chrome 内容脚本。在我看来，最好的方法是通过 chrome.browserAction。

但是如果我添加

```
 chrome.browserAction.onClicked.addListener(function(tab) {
 chrome.tabs.executeScript(null, {file: "script.js"});
 }); 
```

到 background.html，无论是否按下按钮，脚本都在运行。脚本的其余部分运行良好。唯一的问题是浏览器按钮。问题可能出在哪里？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:57:23.713

A`contentScript`与 a`browserAction`或不同`pageAction`。如果它`manifest.json`作为内容脚本加载到您的脚本中，它将像包含在`<script>`页面上的标签中一样执行。

您可以使用内容脚本中的 Chrome[消息传递 API](http://developer.chrome.com/extensions/messaging.html)来检查 background.html 中的变量，也可以将脚本加载为[pageAction](http://developer.chrome.com/extensions/pageAction.html)，具体取决于哪种功能更适合您。

# ios - iOS 钥匙串包装器 NSInternalInconsitity 异常

> ID：14570060
> 
> 赞同：2
> 
> 时间：2013-01-28T19:54:03.177
> 
> 标签：ios, keychain

我正在使用钥匙串包装器（在另一个线程上推荐）

[https://gist.github.com/1170641](https://gist.github.com/1170641)

导致错误的代码：

```
//Save username + password to keychain
KeychainItemWrapper *keychainItem = [[KeychainItemWrapper alloc]     initWithIdentifier:@"PHP POS" accessGroup:nil];

[keychainItem setObject:username forKey:@"username"];
[keychainItem setObject:password forKey:@"password"]; 
```

例外：

```
2013-01-28 14:51:09.531 PHP POS[21078:c07] *** Assertion failure in -[KeychainItemWrapper writeToKeychain], /Users/cmuench/Desktop/PHP-Point-Of-Sale-Repos/PHP-Point-Of-Sale-iOS/KeychainWrapper/KeychainItemWrapper.m:305
2013-01-28 14:51:09.532 PHP POS[21078:c07] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Couldn't add the Keychain Item.'
*** First throw call stack:
(0x13be012 0x1186e7e 0x13bde78 0xc1cf35 0x233e4 0x22859 0x34ec 0x4ef0 0x48e2 0x19f37b 0x1a8048 0x24c9bf 0x2534df 0x252fec 0x251f5e 0x25c076 0xdf43b 0x1dce05 0x1dce05 0x1dce05 0x1dce05 0xdf495 0xdee66 0xdf24b 0xd0cf8 0x225fdf9 0x225fad0 0x1333bf5 0x1333962 0x1364bb6 0x1363f44 0x1363e1b 0x225e7e3 0x225e668 0xce65c 0x255d 0x2485)
libc++abi.dylib: terminate called throwing an exception 
```

注意：我在模拟器中运行它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T19:33:49.973

您的问题是 @"username" 和 @"password" 不是有效的键值。

您必须使用[Keychain Services Reference](http://developer.apple.com/library/ios/#documentation/Security/Reference/keychainservices/Reference/reference.html)中的一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:01:13.067

该代码不起作用，它会遇到我问[这个问题](https://stackoverflow.com/questions/4891562/ios-keychain-services-only-specific-values-allowed-for-ksecattrgeneric-key)时遇到的相同问题。查看我找到的答案和 ARCified 我的答案的另一个答案，它应该可以帮助你。

# apache-pig - apache pig按输出分组-删除“（”和“{”

> ID：14570063
> 
> 赞同：1
> 
> 时间：2013-01-28T19:54:06.697
> 
> 标签：apache-pig

我执行以下操作：

```
a = load '/hive/warehouse/' USING PigStorage('^') as (a1,b1,c1);

b = group a by (a1) ;

c = foreach b generate group, a.$2;

dump c; 
```

输出显示所有组：

```
abc  {(1),(44),(66)}
cde  {(1),(44),(66)} 
```

如何删除“{”和“(”字符，以便最终的 HDFS 文件可以作为逗号分隔文件读取？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T22:35:41.357

您不能直接在 Pig 中执行此操作。需要特殊语法，因为您正在存储一个包，并且为了让 Pig 以后能够读取这个包，它需要用大括号（用于包）和括号（用于包中包含的元组）存储。

你有几个选择。您可以将文件读回 Pig，但不是将其读取为 ，而是将其`bag`读取为`chararray`. 然后您可以执行正则表达式替换以摆脱标点符号（未经测试）：

```
a = LOAD 'output' AS (group:chararray, list:chararray);
b = FOREACH A GENERATE group, REPLACE(list, '[{()}]', ''); 
```

另一种选择是编写一个 UDF，它将一个包变成一个元组。请注意，这不是一个定义明确的操作：袋子没有特定的顺序，因此从一个运行到下一个运行，您的元组不能保证处于相同的顺序。但就您的目的而言，这听起来可能无关紧要。UDF 可能看起来像（非常粗略的草稿，未经测试）：

```
public class BAG_TO_TUPLE extends EvalFunc(Tuple) {
    public Tuple exec(Tuple input) {
        DataBag bag = input.get(0);
        Iterator<Tuple> iterator = bag.iterator();

        Tuple out = new DefaultTuple();
        while(iterator.hasNext()) {
            out.append(iterator.next().get(0));   
        }

        return out;
    }
} 
```

上面的 UDF 很糟糕——它假设你在包的每个元组中都有一个元素（你关心的），并且不检查输入是否有效等。但它应该让你达到你想要的。

但是，如果 Pig 不是下游处理的一部分，最好的解决方案是找到一种方法来处理 Pig 之外的额外标点符号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-12T17:16:37.057

此功能现在在 Pig 中作为内置函数提供（我使用的是 0.11）。

[http://pig.apache.org/docs/r0.11.0/api/org/apache/pig/builtin/BagToString.html](http://pig.apache.org/docs/r0.11.0/api/org/apache/pig/builtin/BagToString.html)

```
c = foreach b generate group, a.$2 as stuff;
d = foreach c generate group, BagToString(stuff, ','); 
```

对于我的用例，我不需要逗号分隔的文件，但我假设您可以使用 store func 来获取最终的逗号（在 group 和 now-comma-delimited-list of bag 事物之间）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T20:12:22.977

试试 FLATTEN 运算符；

c = foreach b 生成组，FLATTEN(a.$2);

# ruby-on-rails - 使用 Ruby on Rails 3.2 和 Mailchimp

> ID：14570064
> 
> 赞同：0
> 
> 时间：2013-01-28T19:54:14.343
> 
> 标签：ruby-on-rails, mailchimp

在 ruby​​ on rails 项目中是否有用于使用 mailchimp API 的实际 gem 或插件？

我尝试了宝石长臂猿和原始人。但我对他们不满意。

# grails - 在 Groovy 中测试图像验证

> ID：14570071
> 
> 赞同：0
> 
> 时间：2013-01-28T19:54:34.753
> 
> 标签：grails, groovy

我写了一个控制器来测试图像是否有效，因为它实际上包含图像还是只是一个 1000 像素的正方形。它通过 URL 获取图像。它工作正常，但我无法弄清楚如何为我的生活编写这个单元测试。我将如何模拟带有图像数据的 URL？我一直在挖掘，找不到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T05:11:14.473

本地文件可以通过使用该方案的 URL 表示。因此`file://`，只需将测试图像保存在本地可访问您的单元测试

参考： [http ://en.wikipedia.org/wiki/File_URI_scheme](http://en.wikipedia.org/wiki/File_URI_scheme)

# c# - AcroPDFlib、AxAcroPDFLib 商业用途

> ID：14570073
> 
> 赞同：7
> 
> 时间：2013-01-28T19:54:39.980
> 
> 标签：c#, axacropdf

我是 C# 开发人员，我想使用以下库： **AcroPDFlib、AxAcroPDFLib**

来自 Visual Studio COM 参考。销售使用这些库的软件是否合法？我知道需要在 PC 上安装 Adob​​e Reader。

我可以在不联系 Adob​​e 的情况下出售它吗？找到明确的信息并不容易。

最好的问候，指挥棒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-04T13:26:41.203

不，这是不合法的。目前的许可费用为：

> 一次性许可费 - 5,000 美元

以下库来自 Adob​​e，如果您想将其商业销售，则需要获得任何许可。

[http://www.datalogics.com/products/pdfl](http://www.datalogics.com/products/pdfl)

以下文件是包装器，不需要包装器的许可证：

> AxInterop.AcroPDFLib.dll
> 
> Interop.AcroPDFLib.dll

但是，如果您从 Internet 上的任何地方下载这两个文件，则将其出售给您的客户是不合法的。原始文件

> AxInterop.AcroPDFLib.dll
> 
> Interop.AcroPDFLib.dll

都需要，然后，你需要一个许可证。注意使用[http://wpfpdfviewer.codeplex.com/](http://wpfpdfviewer.codeplex.com/)阅读 PDF 文件。它似乎不是免费的商业用途。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-02T01:12:48.000

@Piotr Knut 是正确的，只要用户安装了 Reader 或 Acrobat，您就可以自由分发这些库。

当我的开发团队遇到这个线程时，我们直接从 Adob​​e 联系了我们的供应商管理部门进行澄清。Adobe 的回应是

*SDK 文档中列出了 API 的完整列表：http: [//help.adobe.com/en_US/acrobat/acrobat_dc_sdk/2015/HTMLHelp/#t=Acro12_MasterBook%2FAPI_References_SectionPage%2FAPI_References%2FAcrobat_API_Reference%2Findex.html](http://help.adobe.com/en_US/acrobat/acrobat_dc_sdk/2015/HTMLHelp/#t=Acro12_MasterBook%2FAPI_References_SectionPage%2FAPI_References%2FAcrobat_API_Reference%2Findex.html) 您是免费的使用其中任何一个来构建应用程序。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-08T23:08:50.607

[http://acrobat.adobe.com/us/en/acrobat/pdf-reader/volume-distribution.html](http://acrobat.adobe.com/us/en/acrobat/pdf-reader/volume-distribution.html) [http://www.adobe.com/products/clients/all_dist_agreement.html](http://www.adobe.com/products/clients/all_dist_agreement.html)

即使它是免费的，您仍然需要一份协议（许可证）才能分发。

# jquery - #hash 滚动，有边距？

> ID：14570075
> 
> 赞同：1
> 
> 时间：2013-01-28T19:54:41.400
> 
> 标签：jquery

我正在使用一个简单的 url.page#hash 样式 url，并使用 jquery 来调用页面上的该 ID 的滚动。

问题是，我还使用航点模块来粘贴 33 像素高的顶部导航，所以它最终完全隐藏了它下面的哈希标签位置（它是 1 行文本）

有没有办法在哈希调用上为 ID 添加保证金，这样我就可以让页面顶部的菜单挂起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:19:42.373

您可以使用`offset().top - 33`滚动到的元素。

```
$('html, body').animate({
    scrollTop: $(ID).offset().top - 33
}); 
```

这是一个例子：http: [//jsfiddle.net/ykC9U/1/](http://jsfiddle.net/ykC9U/1/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T19:56:20.563

您可以尝试使用 css：

```
<a id="mytag" style="margin-top:-33px"></a> 
```

# javascript - javascript无法检测到右键单击并删除和剪切文本

> ID：14570077
> 
> 赞同：0
> 
> 时间：2013-01-28T19:54:53.903
> 
> 标签：javascript

我有一个文本框和保存按钮。如果文本框有任何更改，则只应启用保存按钮。我可以使用 javascript 事件来处理这个问题，但是当我选择一些文本并右键单击并删除该选定文本时，我没有收到任何事件。下面是我的示例代码：

```
<!DOCTYPE html>
<html>
    <head>
        <script>
            function myFunction() {
                var hiddenfield = document.getElementById("hide").value;
                var textboxval = document.getElementById("me").value;

                if (textboxval != hiddenfield) {
                    document.getElementById("xx").disabled = false;
                } else {
                    document.getElementById("xx").disabled = true;
                }
            }

            function load() {
                document.getElementById("hide").value = document.getElementById("me").value;
            }
        </script>
    </head>
    <body onload="load();">
        <input id="me" type="text" value="test test" onkeyup="myFunction()" onmouseup="myFunction()"
        onmousedown="myFunction()">
        <input type="button" id="xx" value="Save" disabled="disabled" />
        <br>
        <input id="hide" type="hidden" value="">
    </body>
</html> 
```

有没有办法检测用户是否通过右键单击删除文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:58:28.390

试试看`onchange`，因为上下文菜单控件会更改内容。

# java - 重构此 Java 代码检查字符串是否包含这些可能性？

> ID：14570078
> 
> 赞同：3
> 
> 时间：2013-01-28T19:54:56.947
> 
> 标签：java, string, refactoring, loops

我需要检查一个字符串是否不包含**任何**这些字符串可能性：

跨国公司 BRA LEB MAR RVC 方式 GLZ WWW HYB

我当前的代码：

```
 if(selectedLocation.equals("OTH"))
 {
    if(!currentClassLocation.equals("MNC") &&
                        !currentClassLocation.equals("BRA") &&
                        !currentClassLocation.equals("LEB") &&
                        !currentClassLocation.equals("MAR") &&
                        !currentClassLocation.equals("RVC") &&
                        !currentClassLocation.equals("WAY") &&
                        !currentClassLocation.equals("GLZ") &&
                        !currentClassLocation.equals("WWW") &&
                        !currentClassLocation.equals("HYB"))
                    {
                         //Awesome, I need this string! I operate on it here.
                    }
 } 
```

长话短说，我不能使用 for 循环。有没有一种方法可以检查字符串是否在没有迭代的情况下不包含任何这些？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T19:58:36.493

使用`HashSet`：

```
Set<String> invalidSequences = new HashSet<String>();
invalidSequences.add("MNC");
invalidSequences.add("BRA");
invalidSequences.add("LEB");
// Remaining sequences ...

if (!invalidSequences.contains(currentClassLocation)) {
    // Awesome, I need this string...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T20:00:22.693

尝试将这些字符串添加到 Set 然后使用包含 O(c) 进行查找：

```
public class Filter {
   Set<String> exclusionSet = new HashSet<String>();

   public Filter( String... excludes ) {
       for( String exclusion : excludes ) {
          exclusionSet.add( exclusion );
       }
   }

   public boolean exclude( String src ) {
     return exclusionSet.contains( src );
  }

   public static void main( String[] args ) {
       Filter filter = new Filter( "MNC BRA LEB MAR RVC WAY GLZ WWW HYB".split(" ") );

       for( String arg : args ) {
           System.out.println( arg + " is excluded? " + filter.exclude( arg ) );
       }
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T20:00:22.573

为您的字符串创建一个 HashSet，并执行 O(1) 检查以查看当前类位置是否存在于您的字符串集中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T20:05:31.043

尝试一个变体（使用你的字符串）：

```
Pattern pattern = Pattern.compile("(.*(AIN|BIN|CIN|Blam).*)*");
Matcher matcher = pattern.matcher(string_to_test); 
```

在此处测试 Java 正则表达式模式：[Java Regex Tester](http://www.cis.upenn.edu/~matuszek/General/RegexTester/regex-tester.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T20:11:46.157

如果你想使用 for 循环，你可以简单地使用一个变量

```
String[] data = {"BRA","LEB","MAR","RVC","WAY","GLZ","WWW","HYB"};

if(selectedLocation.equals("OTH"))
{
   boolean chk = false;
   for(int i = 0; i < data.length; i++)
      chk |= currentClassLocation.equals(data[i]);

   if(!chk){
      //Awesome, I need this string! I operate on it here.
   }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-28T20:11:48.173

如果您不想手动添加要设置的数据，也可以使用它。

```
import java.util.Arrays;

public class StringFind {
    public static void main(String[] args) {
        String stringtotest = "MNC";
        String dataString = "MNC BRA LEB MAR RVC WAY GLZ WWW HYB";
        String[] dataArray= dataString.split(" ");
        Arrays.sort(dataArray); // You can omit this if data is already sorted.
        if(Arrays.binarySearch(dataArray, stringtotest)<0){
            System.out.println("Does not Exists");
        }else{
            System.out.println("Exists");
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-28T20:14:22.500

使用配置文件，使无效序列列表变得可配置。因为这是最臭的部分，魔法字母组合系列。将其移至一组对此无济于事。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-28T20:15:01.010

使用字符串数组：

```
String[] arr = {"MNC", "BRA", "LEB", "MAR", "RVC", "WAY", "GLZ", "WWW", "HYB"};
List list = Arrays.asList(arr);
if (!list.contains(currentClassLocation)) {
   ...
} 
```

# ios - 应用内电子邮件发出“嗖嗖”声但不发送

> ID：14570085
> 
> 赞同：1
> 
> 时间：2013-01-28T19:55:23.950
> 
> 标签：ios, objective-c, email, mfmailcomposeviewcontroller

我很好地进入了邮件程序，当我按下“发送”时，我听到了嗖嗖声，邮件关闭并将我返回到我的应用程序，但实际邮件没有发送。

这是我用来邮寄的代码。关于我做错了什么的任何想法？

（我在实际设备上使用 iOS6，而不是模拟器。）

```
-(void)openMail {

            //Open Mail program and create email with haiku attached as image.

if ([MFMailComposeViewController canSendMail])
{
    MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc] init];
    mailer.mailComposeDelegate = self;
    [mailer setSubject:[NSString stringWithFormat:@"subject"]];
    UIImage *myImage = [self createImage];
    NSData *imageData = UIImagePNGRepresentation(myImage);
    [mailer addAttachmentData:imageData mimeType:@"image/jpg" fileName:@"xxxxx"];
    NSString *emailBody = @"I thought you might like this haiku from the xxxxx iPhone app.";
    [mailer setMessageBody:emailBody isHTML:NO];
    [self presentViewController:mailer animated:YES completion:NULL];
}

            //Unless it's not possible to do so, in which case show an alert message.

else
{
    self.alert = [[UIAlertView alloc] initWithTitle:@"I'm sorry." message:@"Your device doesn't seem to be able to email this haiku. Perhaps you'd like to tweet it or post it on Facebook instead?" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil];
    [self.alert show];
}
}

-(void)mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error {
[self dismissViewControllerAnimated:YES completion:Nil];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:15:50.637

看起来这实际上是我的服务器和 iOS 6.1 更新之间的问题。我会留下这个，以防其他人有同样的问题。如果问题已解决并且我的电子邮件仍然无法发送，那么我将发布另一个问题。

# magento - Magento 对订购的项目进行排序

> ID：14570087
> 
> 赞同：0
> 
> 时间：2013-01-28T19:55:36.637
> 
> 标签：magento, skus

当我在：index.php/admin/sales_order/view/order_id/[ID]/key/[KEY]/ 我可以看到：“订购的商品”

我正在寻找在此表中加载产品的代码。我想按 SKU 对订购的商品进行排序。

有什么提示吗？

PS：我正在查看 app/code/core/Mage/Adminhtml/Block/Sales/Order/View 但找不到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-27T12:09:52.223

```
$collection->getSelect()->join(array(
            'item'=>$collection->getTable('sales/order_item')),
            'item.order_id=`main_table`.entity_id AND item.product_type="simple"',
            array(
                'skus' => new Zend_Db_Expr('group_concat(item.sku SEPARATOR ", ")'),
                'name' => new Zend_Db_Expr('group_concat(item.name SEPARATOR ", ")')
            ));

$this->addColumn('skus', array(
            'header' => Mage::helper('sales')->__('SKU'),
            'index' => 'skus',
            'type' => 'text',
        ));

        $this->addColumn('name', array(
            'header' => Mage::helper('sales')->__('NAME'),
            'index' => 'name',
            'type' => 'text'
        )); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:00:41.830

您可以在 Admin 的 Manage Attributes 菜单中将 SKU 添加为选项。完成后，在系统 > 配置 > 目录 > 目录 > 产品列表排序方式中将其设置为默认值。

或者试试[这个](http://www.magentocommerce.com/boards/viewthread/212594/) 你可能会喜欢[这个](http://magentostriker.blogspot.ie/2012/01/code-to-get-multiple-skus-in-sales.html)

# ruby-on-rails - heroku “我们很抱歉，但出了点问题。” 在雪松堆栈中

> ID：14570091
> 
> 赞同：0
> 
> 时间：2013-01-28T19:55:49.013
> 
> 标签：ruby-on-rails, ruby, heroku

基本上我的应用程序在 localhost 中可以正常工作，但页面无法在 heroku 服务器上运行。我已经阅读了关于 stackoverflow 的类似问题，但大多数似乎都没有在 cedar 堆栈中创建 repo 的问题。

这是一个非常基本的应用程序（来自教程）。

编辑：这是日志

```
 2013-01-28T19:52:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/lock.rb:15:in `call'
2013-01-28T19:52:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
2013-01-28T19:52:21+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
2013-01-28T19:52:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/content_length.rb:14:in `call'
2013-01-28T19:52:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
2013-01-28T19:52:21+00:00 app[web.1]: 
2013-01-28T19:52:21+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'
2013-01-28T19:52:21+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
2013-01-28T19:52:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/handler/webrick.rb:59:in `service'
2013-01-28T19:52:21+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/rack/log_tailer.rb:17:in `call'
2013-01-28T19:52:21+00:00 heroku[router]: at=info method=GET path=/pages/home host=vast-wave-3795.herokuapp.com fwd=91.237.136.162 dyno=web.1 queue=0 wait=12ms connect=44ms service=34ms status=500 bytes=643
2013-01-28T19:52:22+00:00 heroku[router]: at=info method=GET path=/favicon.ico host=vast-wave-3795.herokuapp.com fwd=91.237.136.162 dyno=web.1 queue=0 wait=0ms connect=2ms service=425ms status=304 bytes=0
2013-01-28T19:52:51+00:00 heroku[api]: Starting process with command `bundle exec rake db:migrate` by arisnr1client@gmail.com
2013-01-28T19:52:55+00:00 heroku[run.9316]: Await
ing client
2013-01-28T19:52:55+00:00 heroku[run.9316]: Starting process with command `bundle exec rake db:migrate`
2013-01-28T19:52:56+00:00 heroku[run.9316]: State changed from starting to up
2013-01-28T19:52:59+00:00 heroku[run.9316]: Client connection closed. Sending SIGHUP to all processes
2013-01-28T19:53:00+00:00 heroku[run.9316]: Process exited with status 1
2013-01-28T19:53:00+00:00 heroku[run.9316]: State changed from up to complete
2013-01-28T19:53:23+00:00 heroku[api]: Starting process with command `bundle exec rake db:migrate` by arisnr1client@gmail.com
2013-01-28T19:53:28+00:00 heroku[run.9652]: Starting process with command `bundle exec rake db:migrate`
2013-01-28T19:53:28+00:00 heroku[run.9652]: Awaiting client
2013-01-28T19:53:29+00:00 heroku[run.9652]: State changed from starting to up
2013-01-28T19:53:37+00:00 heroku[run.9652]: Process exited with status 1
2013-01-28T19:53:37+00:00 heroku[run.9652]: State changed from up to complete
2013-01-28T20:54:39+00:00 heroku[web.1]: Idling
2013-01-28T20:54:41+00:00 heroku[web.1]: Stopping all processes with SIGTERM
2013-01-28T20:54:42+00:00 app[web.1]: [2013-01-28 20:54:42] ERROR SignalException: SIGTERM
2013-01-28T20:54:42+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:90:in `select'
2013-01-28T20:54:51+00:00 heroku[web.1]: Stopping remaining processes with SIGKILL
2013-01-28T20:54:51+00:00 heroku[web.1]: Error R12 (Exit timeout) -> At least one process failed to exit within 10 seconds of SIGTERM
2013-01-28T20:54:53+00:00 heroku[web.1]: Process exited with status 137
2013-01-28T20:54:53+00:00 heroku[web.1]: State changed from up to down
2013-01-29T11:17:09+00:00 heroku[web.1]: Unidling
2013-01-29T11:17:09+00:00 heroku[web.1]: State changed from down to starting
2013-01-29T11:17:13+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 58836`
2013-01-29T11:17:18+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2013-01-29T11:17:18+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2013-01-29T11:17:21+00:00 app[web.1]: [2013-01-29 11:17:21] INFO  WEBrick 1.3.1
2013-01-29T11:17:21+00:00 app[web.1]: [2013-01-29 11:17:21] INFO  WEBrick::HTTPServer#start: pid=2 port=58836
2013-01-29T11:17:21+00:00 app[web.1]: [2013-01-29 11:17:21] INFO  ruby 1.9.2 (2011-07-09) [x86_64-linux]
2013-01-29T11:17:22+00:00 heroku[web.1]: State changed from starting to up
2013-01-29T11:17:23+00:
00 heroku[router]: at=info method=GET path=/ host=vast-wave-3795.herokuapp.com fwd=83.6.123.123 dyno=web.1 queue=0 wait=0ms connect=2ms service=348ms status=304 bytes=0
2013-01-29T11:17:24+00:00 heroku[router]: at=info method=GET path=/assets/rails.png host=vast-wave-3795.herokuapp.com fwd=83.6.123.123 dyno=web.1 queue=0 wait=0ms connect=1ms service=329ms status=304 bytes=0
2013-01-29T11:17:24+00:00 heroku[router]: at=info method=GET path=/favicon.ico host=vast-wave-3795.herokuapp.com fwd=83.6.123.123 dyno=web.1 queue=0 wait=0ms connect=1ms service=64ms status=304 bytes=0
2013-01-29T11:19:47+00:00 heroku[api]: Starting process with command `bundle exec rake db:schema:load` by arisnr1client@gmail.com
2013-01-29T11:19:51+00:00 heroku[run.2504]: Starting process with command `bundle exec rake db:schema:load`
2013-01-29T11:19:51+00:00 heroku[run.2504]: Awaiting client
2013-01-29T11:19:52+00:00 heroku[run.2504]: State changed from starting to up
2013-01-29T11:19:57+00:00 heroku[run.2504]: Client connection closed. Sending SIGHUP to all processes
2013-01-29T11:19:58+00:00 heroku[run.2504]: Process exited with status 1
2013-01-29T11:19:58+00:00 heroku[run.2504]: State changed from up to complete
2013-01-29T11:20:22+00:00 app[web.1]: Started GET "/pages/home" for 83.6.123.123 at 2013-01-29 11:20:22 +0000
2013-01-29T11:20:22+00:00 app[web.1]: => Ctrl-C to shutdown server
2013-01-29T11:20:22+00:00 app[web.1]: => Booting WEBrick
2013-01-29T11:20:22+00:00 app[web.1]: => Rails 3.2.11 application starting in production on http://0.0.0.0:58836
2013-01-29T11:20:22+00:00 app[web.1]: => Call with -d to detach
2013-01-29T11:20:22+00:00 app[web.1]: Connecting to database specified by DATABASE_URL
2013-01-29T11:20:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:410:in `retrieve_connection'
2013-01-29T11:20:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_specification.rb:145:in `connection'
2013-01-29T11:20:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/query_cache.rb:67:in `rescue in call'
2013-01-29T11:20:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/query_cache.rb:61:in `call'
2013-01-29T11:20:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:405:in `__run_callback'
2013-01-29T11:20:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
2013-01-29T11:20:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:81:in `run_callbacks'
2013-01-29T11:20:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
2013-01-29T11:20:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
2013-01-29T11:20:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
2013-01-29T11:20:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
2013-01-29T11:20:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
2013-01-29T11:20:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
2013-01-29T11:20:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/rack/logger.rb:32:in `call_app'
2013-01-29T11:20:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/rack/logger.rb:16:in `block in call'
2013-01-29T11:20:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/rack/logger.rb:16:in `call'
2013-01-29T11:20:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/request_id.rb:22:in `call'
2013-01-29T11:20:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/tagged_logging.rb:22:in `tagged'
2013-01-29T11:20:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/static.rb:62:in `call'
2013-01-29T11:20:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/runtime.rb:17:in `call'
2013-01-29T11:20:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
2013-01-29T11:20:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/methodoverride.rb:21:in `call'
2013-01-29T11:20:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
2013-01-29T11:20:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
2013-01-29T11:20:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/engine.rb:479:in `call'
2013-01-29T11:20:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/application.rb:223:in `call'
2013-01-29T11:20:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/content_length.rb:14:in `call'
2013-01-29T11:20:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/handler/webrick.rb:59:in `service'
2013-01-29T11:20:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/rack/log_tailer.rb:17:in `call'
2013-01-29T11:20:22+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
2013-01-29T11:20:22+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
2013-01-29T11:20:22+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'
2013-01-29T11:20:22+00:00 app[web.1]: 
2013-01-29T11:20:22+00:00 app[web.1]: 
2013-01-29T11:20:22+00:00 app[web.1]: 
2013-01-29T11:20:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/lock.rb:15:in `call'
2013-01-29T11:20:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_specification.rb:171:in `retrieve_connection'
2013-01-29T11:20:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
2013-01-29T11:20:22+00:00 app[web.1]: ActiveRecord::ConnectionNotEstablished (ActiveRecord::ConnectionNotEstablished):
2013-01-29T11:20:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:405:in `_run__891476158821333251__call__3890590830324905565__callbacks'
2013-01-29T11:20:22+00:00 heroku[router]: at=info method=GET path=/pages/home host=vast-wave-3795.herokuapp.com fwd=83.6.123.123 dyno=web.1 queue=0 wait=0ms connect=2ms service=528ms status=500 bytes=643
2013-01-29T11:20:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
2013-01-29T11:20:22+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:58:26.713

`heroku logs`从您部署的同一位置从命令提示符运行以查看发生了什么。

编辑：正如约瑟夫所说，看起来像一个数据库问题：

`Connecting to database specified by DATABASE_URL`失败的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:11:42.307

我猜你的应用程序使用 mysql、sqlite 等数据库。我曾经遇到过这样的问题。尝试运行`heroku run rake db:schema:load`。这应该将您的 schema.rb 文件加载到数据库中。这解决了我的问题

# ios5 - 故事板- UIScrollView 恐慌？

> ID：14570099
> 
> 赞同：0
> 
> 时间：2013-01-28T19:56:09.970
> 
> 标签：ios5, ios6, tabs, uiscrollview, scroll

[我按照AppCoda](http://www.appcoda.com/storyboard-tutorial-create-tab-bar-controller-and-web-view/)的本教程解决了我的 TabApplication 遇到的问题，它**不是**. 一个 webkit，我使用这种策略来解决我的标签标题不显示的问题。这是一个列出本地活动乐队的应用程序。所以你有：

```
 TabBarController > Nav1 > RELATIONSHIP > Home
                     > Nav2 > RELATIONSHIP > ARTISTS > UIBUTTON > push to new page.
                     > etc. 
```

他们都工作得很好；如果我单击艺术家图像 (UIButton)，它会将我带到他们的页面。顶部是横幅 (UIIMAGE)，底部是 UISCROLLVIEW。

这是我的问题：如果我点击艺术家按钮，将 UIScrollView 滚动到底部，然后我通过点击另一个选项卡按钮离开页面我得到冲突：当我点击按钮返回艺术家列表时（未指定艺术家）它把我带到了我离开的地方，在 UIScrollView 的底部和带有链接的标签栏之间有一个尴尬的差距。

有没有办法可以指定返回到带有 6 个 UIBUTTONS 的艺术家页面？甚至 GET RID 屏幕底部的 TabBar 选项？我不知道如何编写 UISCROLLVIEW，我只是使用 Storyboard 来绘制 ScrollView，因为这是我永远无法解决的一件事。

```
___________________________________

|                                 |
|_________ARTIST____________NAME__|
|                                 |
|            :)                   |
|                                 |
|                                 |
|                                 |
|                  :)             |
|_________________________________|
|                                 |
|                                 |
|   .....UISCROLLVIEW             |
|_________________________________|
|MAKE_BLANK __BAR_____NO LINKS____| Sorry for the horrible example. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:37:06.807

据我了解，您的导航问题是这样的：

在选项卡 2 上，您有一个导航控制器，其初始 viewController 是艺术家姓名的列表。如果您选择艺术家姓名，您将转到第二个 viewController（仍在选项卡 2 中），它会显示艺术家的详细信息。

现在，如果您导航到选项卡 1，执行其他操作，返回选项卡 2，您希望确保看到带有艺术家姓名列表的初始 viewController，而您将返回到您离开的同一艺术家页面。这会使您的应用程序处于导航不佳的状态（带有故障的滚动视图）。

因此，您要做的是阻止用户从艺术家页面上跳开，这样他们就被迫从他们*可以*在其他地方跳出的艺术家列表返回。

您可以通过从初始 viewController 中*呈现*艺术家 viewController 来实现这一点，而不是*推*送到 navigationController 的 viewControllers 堆栈（我假设您现在正在这样做）。

为此，您实际上并没有使用 tab2 中的导航控制器，因此您可能会选择摆脱它（除非您出于其他原因想要顶部导航栏）。

*在代码中*

从艺术家姓名视图控制器，制作一个带有动作的按钮：

```
- (IBAction) presentArtistsDetailViewController:(id)sender
{
     ArtistsDetailViewController* artistsDetailViewController = [ArtistsDetailViewController alloc] init];

     //set up artistsDetailViewController properties here

     [self presentViewController:artistsDetailViewController animated:YES completion:nil];
} 
```

*使用故事板*

代替代码，您可以将一条转场线从按钮拖到您的艺术家详细视图控制器，选择转场类型`modal`。如果您需要在 中初始化属性`artistsDetailViewController`，可以在`prepareForSegue`

你会看到这种类型的导航使用默认的上滑动画来显示新的 viewController，并且整个屏幕都发生了变化——你失去了你的标签栏。`modalTransitionStyle`您可以通过将属性设置为 on来更改动画`artistsDetailViewController`。

导航返回是通过添加一个“关闭”按钮来控制的，IBAction 是这样的......

```
 - (IBAction) dismiss:(id) sender
  {
    [self.presentingViewController dismissViewControllerAnimated:YES completion:nil]
  } 
```

如果您的用户位于最初的艺术家姓名视图控制器上，您的用户现在只能从选项卡 2 离开。您的滚动视图不会出现故障，因为每次您进入艺术家详细信息页面时，您都在重新创建和重新初始化它。这并没有解决您的应用程序的其他部分，您可能会遇到滚动视图问题（正如您在评论中所建议的那样），但这是一个单独的问题，我想解决您的导航逻辑。

这样，您将不会在艺术家DetailViewController 的顶部获得导航栏，因为不涉及导航控制器。如果你想要一个导航栏，你可以手动放置到情节提要中的 viewController 上。

# java - ArrayAdapter 中的 getView() 未从 AsyncTask 调用

> ID：14570117
> 
> 赞同：0
> 
> 时间：2013-01-28T19:57:20.940
> 
> 标签：java, android, android-listview, android-asynctask

在我的一个 android 活动中，我有一个`ListView lvFeedsList`. 中的每个行元素`listView`将包含 3 个文本视图 - *RSSFeedName、publishDate 和 feedLength*

提要的内容是从`HTTPRsponse`. 我在一个`AsyncTask`.

因此，在 中`doInBackground()`，我发送了`HTTPRequest`& 接收 & 解析了响应 & 准备了`ArrayList`包含上述 3 条信息。

然后在`doInBackground()`唯一的内部，我正在创建自定义`ArrayAdapter`以形成 3 `TextViews`in row 元素。我的意图是将此适配器设置为`ListView in onPostExecute()`.

但是，当我运行应用程序时，ListView 不显示任何内容。

我试图调试 & 似乎`getView()`在`ArrayAdapter`课堂上没有被调用。（但我不确定这是否是原因）。

这是代码，对不起，长度......这似乎是必要的。

**活动代码：**

```
public class GenericFeedsActivity extends Activity{

    private ListView lvFeedsList;
    private ArrayList<FeedsClass> feedList;

    protected void onCreate(Bundle savedInstanceState) {
        ...
        lvFeedsList = (ListView) findViewById(R.id.lvFeedsList);
        lvFeedsList.setOnItemClickListener(this);
        lvFeedsList.setEnabled(false);
        ...
        new AsyncResponseHandler(this).execute();
    }

    class AsyncResponseHandler extends AsyncTask {
        Context context;
        FeedListAdapter adapter;

        public AsyncResponseHandler(Context c) {
            this.context = c;
        }

        @Override
        protected Object doInBackground(Object... params) {
            ...
            /* 
             *  Sending HTTPRequest to a URL & getting list of feeds
             *  Saving this list of feeds in a ArrayList -feedList, containing elements of type FeedsClass (declared above)
             *  Below line parses the HTTPResponse XML & stores various information in feedList.
             */
            feedList = utils.parseRssResponseXML(in);   // Working fine, geeting elements
            adapter = new FeedListAdapter(
                GenericFeedsActivity.this, feedList);
            in.close();
            return null;
        }

        protected void onPostExecute(Object e) {
            // Setting Arrayadapter
            lvFeedsList.setAdapter(adapter);
            lvFeedsList.setEnabled(true);
        }
    }
} 
```

**适配器代码：**

```
public class FeedListAdapter extends ArrayAdapter {

    private Context context;
    private ArrayList<FeedsClass> feedList;

    public FeedListAdapter(Context c, ArrayList<FeedsClass> data) {
        super(c, R.layout.rowlayout);
        this.context = c;
        this.feedList = data;
    }

    class ViewHolder {
        TextView tvFeedName;
        TextView tvFeedPubDate;
        TextView tvFeedLength;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        ViewHolder holder = null;
            if (row == null) {

                LayoutInflater inflator = (LayoutInflater) context
                        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                row = inflator.inflate(R.layout.rowlayout, null);
                holder = new ViewHolder();

                holder.tvFeedName = (TextView) row.findViewById(R.id.tvFeedName);
                holder.tvFeedPubDate = (TextView) row.findViewById(R.id.tvFeedPubDate);
                holder.tvFeedLength = (TextView) row.findViewById(R.id.tvFeedLength);

                row.setTag(holder);
            } else {
                holder = (ViewHolder) row.getTag();
            }
            // Getting values of feedName, publishDate & feedLength
            String feedName = feedList.get(position).getTitle();
            String feedDate = feedList.get(position).getPublishDate();
            String feedLength = feedList.get(position).getStreamLength();

            holder.tvFeedName.setText(feedName);
            holder.tvFeedPubDate.setText(feedDate);
            holder.tvFeedLength.setText(feedLength);
        }
        return row;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T20:30:11.120

问题是您正在继承`ArrayAdapter`. 这不起作用，因为`ArrayAdapter`内部认为您的数据中没有任何元素；它不仅神奇地知道查看`lvFeedsList`变量，因为它使用的数据集是内部的。

相反，请确保在您的构造函数中调用此构造函数：

**适配器代码：**

```
public FeedListAdapter(Context c, ArrayList<FeedsClass> data) {
    super(c, R.layout.rowlayout, data); // add 'data'
    this.context = c;
    this.feedList = data;
} 
```

这将使一切正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T20:29:20.660

适配器.notifyDataSetChanged()

可以在 AsyncResponseHandler.onPostExecute() 的末尾提供帮助。如果不是 - 检查保存适配器数据的 ArrayList 是否为空。

# openfire - CANDY 与 Openfire 聊天：连接到自动登录聊天室时收到空响应

> ID：14570118
> 
> 赞同：1
> 
> 时间：2013-01-28T19:57:23.433
> 
> 标签：openfire, candy

我终于安装了 openfire 服务器 - 诚然 XMPP 的菜鸟 - 但我到了那里:)

我修改了 .htaccess & 现在尝试在我的服务器上 点击[http://166.xx.xx.xx/candy-chat-c​​andy-ca544b1/example/index.html](http://166.xx.xx.xx/candy-chat-candy-ca544b1/example/index.html)

该页面向我显示了“**正在连接..** ”消息并挂在那里。

这是我在深入研究萤火虫帖子/响应之前的设置。

我已经修改了 example/index.html ：

```
$(document).ready(function() {
    Candy.init('http://166.xx.xx.xx:7070/http-bind/', {
        core: { debug: true },
        autojoin: ['Opentalk@conference.166.xx.xx.xx'],
        view: { language : 'en' }
    });

    Candy.Core.connect('166.xx.xx.xx', null, 'Guest'); // Connect anonymously to a specific server
}); 
```

在**firebug**中，我看到响应是**空**的。但是，萤火虫中的帖子条目显示 200 OK

并且萤火虫抱怨（我认为这是因为响应是空的）-->“

> XML 解析错误：找不到元素位置：moz-nullprincipal：{80250471-6b20-4144-ad88-92777a926018} 第 1 行，第 1 列：

**这是帖子**

```
<body rid='3954428912' xmlns='http://jabber.org/protocol/httpbind' to='166.xx.xx.xx' xml:lang='en' wait='60' hold='1' content='text/xml; 
charset=utf-8' ver='1.6' xmpp:version='1.0' xmlns:xmpp='urn:xmpp:xbosh'/> 
```

由于我的调试已打开，我看到与 post 相同的消息：

```
SENT: <body rid='3954428912' xmlns='http://jabber.org/protocol/httpbind' to='166.xx.xx.xx' xml:lang='en' wait='60' hold='1' content='text/xml;
charset=utf-8' ver='1.6' xmpp:version='1.0' xmlns:xmpp='urn:xmpp:xbosh'/> 
```

**注意**：我在配置中看到的唯一区别是跨域部分。 [github](https://a248.e.akamai.net/camo.github.com/d56d2cf045146fcd830ecd56929c658c622e068d/687474703a2f2f63616e64792d636861742e6769746875622e636f6d2f63616e64792f7075626c69632f77696b692f73637265656e73686f74732f6f70656e666972652d656e61626c652d687474702d62696e642e706e67)上显示的设置屏幕截图将此字段为空，而我的有默认条目，但我不知道这是否真的有问题。

我做错了什么，但无法确定是什么......任何关于进一步调试的指针都会很棒！

* * *

## ----------------+++++++++++--------------

****更新 2/1 ****
谢谢迈克尔，似乎做出改变已经向前迈进了一步！**

 **现在我得到一个灰色页面，而不是挂在“正在连接......”。
似乎现在正在建立连接。我不确定 PrivacyListError 是否很关键（纠正我）。
我查看了 candy.js 并且似乎如果该列表不存在，它将创建一个。
下一个错误似乎很关键，因为它谈到了服务不可用..

**成功**

```
SENT: <body rid='2569503371' xmlns='http://jabber.org/protocol/httpbind' sid='b967c785'><iq type='set' id='_session_auth_2' xmlns='jabber:client'><session xmlns='urn:ietf:params:xml:ns:xmpp-session'/></iq></body> RECV: <body xmlns='http://jabber.org/protocol/httpbind'><iq xmlns='jabber:client' type='result' id='_session_auth_2' to='b967c785@myservername.com/b967c785'/></body>  
[Connection] 
Connected [Jabber] 
Anonymous login 
[Connection] Attached 
```

**成功**

```
POST http-bind/ 200 OK 101ms    

SENT: <body rid='2569503372' xmlns='http://jabber.org/protocol/httpbind' sid='b967c785'><presence xmlns='jabber:client'/><iq type='get' xmlns='jabber:client'><query xmlns='jabber:iq:private'><storage xmlns='storage:bookmarks'/></query></iq><iq type='get' from='b967c785@myservername.com/b967c785' id='get1' xmlns='jabber:client'><query xmlns='jabber:iq:privacy'><list name='ignore'/></query></iq></body>
RECV: <body xmlns='http://jabber.org/protocol/httpbind'><iq xmlns='jabber:client' type='result' to='b967c785@myservername.com/b967c785'><query xmlns='jabber:iq:private'><storage xmlns='storage:bookmarks'/></query></iq></body>
[Jabber] Bookmarks 
```

**错误**

```
POST http-bind/ 200 OK 56ms 
SENT: <body rid='2569503373' xmlns='http://jabber.org/protocol/httpbind' sid='b967c785'/>    
RECV: <body xmlns='http://jabber.org/protocol/httpbind'><iq xmlns='jabber:client'     type='error' id='get1' to='b967c785@myservername.com/b967c785'><query xmlns='jabber:iq:privacy'><list name='ignore'/></query><error code='503' type='cancel'>     <service-unavailable xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/></error></iq></body>   
[Jabber] PrivacyListError 
```

**错误 - 这似乎更严重**

```
POST http-bind/ 200 OK 74ms 
SENT: <body rid='2569503374' xmlns='http://jabber.org/protocol/httpbind' 
sid='b967c785'><iq type='set' from='b967c785@myservername.com/b967c785' id='set1'
 xmlns='jabber:client'><query xmlns='jabber:iq:privacy'><list name='ignore'><item 
action='allow' order='0'/></list></query></iq><iq type='set' 
from='b967c785@myservername.com/b967c785' id='set2' xmlns='jabber:client'><query 
xmlns='jabber:iq:privacy'><active name='ignore'/></query></iq></body>

RECV: <body xmlns='http://jabber.org/protocol/httpbind'><iq xmlns='jabber:client' 
type='error' id='set1' to='b967c785@myservername.com/b967c785'><query 
xmlns='jabber:iq:privacy'><list name='ignore'><item action='allow' order='0'/></list>
</query><error code='503' type='cancel'><service-unavailable 
xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/></error></iq></body> 
```

**错误 - 最后一个，在它挂在那里之前**

```
POST http-bind/ 200 OK 60ms 
SENT: <body rid='2569503375' xmlns='http://jabber.org/protocol/httpbind' sid='b967c785'/>
RECV: <body xmlns='http://jabber.org/protocol/httpbind'><iq xmlns='jabber:client' 
type='error' id='set2' to='b967c785@myservername.com/b967c785'><query 
xmlns='jabber:iq:privacy'><active name='ignore'/></query><error code='503' type='cancel'>
<service-unavailable xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/></error></iq></body> 
```

**最后一个 ajax 调用被触发**

```
POST http-bind/ 200 OK 60167ms  
SENT: <body rid='2569503376' xmlns='http://jabber.org/protocol/httpbind' sid='b967c785'/>
RECV: <body xmlns='http://jabber.org/protocol/httpbind'/>
POST http-bind/
SENT: <body rid='2569503377' xmlns='http://jabber.org/protocol/httpbind' sid='b967c785'/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T07:16:21.773

您的 http-bind url 以及自动加入和连接函数调用的第一个参数似乎是错误的。

如果您正确配置了 HTTP 代理配置，标准的[example/index.html](https://github.com/candy-chat/candy/blob/master/example/index.html)应该可以工作。您只需要更改/添加自动加入参数并更改连接函数调用。

关于 autojoin 参数：您在 XMPP 服务器上配置了一个虚拟主机。您需要使用这个作为主机名，而不是 IP。所以它看起来像`autojoin: ['Opentalk@conference.example.com']`。

这同样适用于`connect()`您需要提供 XMPP 服务器的虚拟主机名的第一个参数。**

# javascript - 将 JavaScript 文件导入一个文件的最佳方法？

> ID：14570123
> 
> 赞同：4
> 
> 时间：2013-01-28T19:57:42.660
> 
> 标签：javascript, oop

我有使用具有“类”概念的语言进行编码的背景。现在我正在编写 JavaScript 代码，我想以类似的方式编写代码，以便我创建的每个面向对象的“类”都是它自己的单独文件。

*   请参阅[从 javascript 类中的“私有”方法访问“公共”方法](https://stackoverflow.com/questions/2703582/accessing-public-methods-from-private-methods-in-javascript-class)

*   见[http://phrogz.net/JS/classes/OOPinJS.html](http://phrogz.net/JS/classes/OOPinJS.html)

在其他语言中，我会在类文件的顶部创建导入语句，以确保在类文件中使用其他自定义类，以便将其他自定义类编译到最终的二进制文件中。

当然 JavaScript 不是编译语言；但是，我仍然希望能够在自定义类文件的顶部包含某种“导入”语句，这样我就可以确保导入的 JS“类”文件可供用户浏览器下载。

如果有一个 3rd 方工具将我所有单独的类文件合并到一个 JS 文件中，那将是理想的，这样浏览器只需对单个 JS 文件发出一个 HTTP 请求，而不是对每个单独的 JS“类”进行多次调用。有谁知道是否存在这样的工具，它可以执行以下操作：

1.  允许我选择要包含在单个 JS 文件中的 JS 文件
2.  浏览了我在步骤 1 中选择的文件，并在每个自定义“类”文件的顶部找到了所有“导入”语句。这些“导入”语句可以只是代码中特殊格式的注释，第三方将其识别为导入语句。
3.  然后，第 3 方将使用从步骤 1 中选择的所有文件以及在步骤 2 中找到的所有导入文件创建单个 JS 文件。

一些流行的 JavaScript 框架似乎就是这样做的。例如，jQueryUI 允许您通过允许用户检查您想要使用的对象来自定义单个 jQueryUI 源文件的下载。如果您取消选中已选中的项目所需的元素，则表单会告诉您存在需要纠正的依赖关系，然后才能继续下载文件。

*   见[http://jqueryui.com/download/](http://jqueryui.com/download/)

那么是否有第三方工具允许开发人员使用某种“导入”语句注释来确保将许多依赖的 JS 文件（并且仅是开发人员需要的那些）合并到一个 JS 文件中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T19:59:34.203

[RequireJS](http://requirejs.org/)正是为此目的而构建的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T20:00:44.453

看看[Require.js](http://requirejs.org/)。它允许您以模块化方式导入各种 javascript 文件并在它们之间添加所需的依赖项。最后，您还可以使用 r.js 将它们全部缩小到一个 JS 文件中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T20:02:03.720

一个简单的批处理文件可以为您执行此操作：

```
@for %i in (classes/*.js) type %i >> build.js 
```

如果您的 JS 源文件都在一个文件夹中，则此方法效果最佳，并且此示例假定该文件夹名为`classes`. 如果您有子文件夹，它会变得有点复杂，但可以应用类似的原则。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T20:04:41.590

看看[GruntJS](http://gruntjs.com/)，JQuery 用它来构建。如果你不关心 HTTP 请求，你可以使用前面提到的 RequireJS，它也有很好的异步加载文件的方法，在某些情况下可以提高性能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-26T05:50:41.780

查看这个类[https://www.youtube.com/watch?v=KnQfGXrRoPM](https://www.youtube.com/watch?v=KnQfGXrRoPM) 这允许在类中动态导入。它还允许导入文件夹及其所有子文件夹中的所有类。它非常简单，因为它只是添加到 String 的原型函数。只需添加导入器类，您将调用“com.project.Classfile.js”.import(); 或 "com.project.*".import() 获取所有子类。分叉 - [https://github.com/jleelove/Utils](https://github.com/jleelove/Utils)

# android - 使用三星 Galaxy SII 进行 USB 调试

> ID：14570126
> 
> 赞同：2
> 
> 时间：2013-01-28T19:57:49.983
> 
> 标签：android, debugging, usb, galaxy

我曾经使用Android模拟器进行调试。一切都很好。但是当我尝试 Android 4 的模拟器时，它已经落后了很多。几乎不可能使用它。所以我尝试使用带有 Android 4.0.4 的三星 Galaxy SII 进行 USB 调试。我在设备上启用了 USB 调试，安装了驱动程序，尝试使用 Kies，但它不起作用。当我开始调试并在 Android 设备选择器中选择此设备时，它看起来像这样：

**三星-gt_i9100-0019caae19649e | 不适用 | 4.0.4 | --- | 在线的**

然后在控制台中它给了我这个代码：

```
[2013-01-28 20:30:58 - UniqueFileExplorer] Android Launch!
[2013-01-28 20:30:58 - UniqueFileExplorer] adb is running normally.
[2013-01-28 20:30:58 - UniqueFileExplorer] Performing sync
[2013-01-28 20:31:01 - UniqueFileExplorer] Uploading UniqueFileExplorer.apk onto device '0019caae19649e'
[2013-01-28 20:31:11 - UniqueFileExplorer] Failed to install UniqueFileExplorer.apk on device '0019caae19649e': timeout
[2013-01-28 20:31:11 - UniqueFileExplorer] Launch canceled! 
```

那么有人知道问题出在哪里吗？

我将不胜感激任何帮助。

* * *

并为我糟糕的英语道歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:00:47.227

使用说明：

1 重启手机。

2 重新启动计算机。

3 在手机设置中勾选启用“USB 调试”。

4 在 mainfest 中启用可调试。

# r - 带有多行标题的 print.xtable？

> ID：14570128
> 
> 赞同：7
> 
> 时间：2013-01-28T19:58:03.337
> 
> 标签：r, knitr, xtable

我一直在尝试创建一个带有包含类似中断的标题的表。我在这里并没有太大的野心，我并不真正关心我是否只是打破了极长的字符串或一般只有两行标题。

```
dat <- matrix(round(rnorm(9, 20, 10)), 3, 3)
colnames(dat) <- c("some very long colname","short","another toooooooolong colname")
require(xtable)
m <- xtable(dat)

print(m,                  
              floating=FALSE, 
              hline.after=NULL,                  
              size="\\footnotesize",
              tabular.environment="tabular",
              add.to.row=list(pos=list(-1,0,nrow(m),0
                                       ), 
              command=c('\\toprule ',
                        '\\midrule ',
                        '\\bottomrule',
                        '\\\\ \\rowcolor[gray]{.9}'
                        )
                              )
              ) 
```

有没有办法换行标题，因为我的表格不再适合页面，尽管我已经使用`landscape`了。一些`sanitize.rownames`基于技巧？摆弄着，`\shortstack`但无法让它去......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T22:36:03.900

（将我的评论写成正确的答案）

在对 的调用中`xtable`，您可以指定各种对齐参数，其中一个是`parbox`用于包装文本的固定宽度的 a。这是用`p{1in}`大括号内指定的值指定框（列）的宽度来指定的。您必须手动指定它（而不是让它适应可用空间），但它确实为您提供了一种包装文本的选项。

# ruby - 奇怪的构造函数行为

> ID：14570134
> 
> 赞同：4
> 
> 时间：2013-01-28T19:58:13.773
> 
> 标签：ruby

我注意到一个类中的一些非常奇怪的行为，我不小心在一个没有超类的类上调用了 super。显然我不应该调用 super，但我发现错误非常奇怪：

```
class SomeClass

  def initialize(someparam)
    super
  end

end 
```

然后：

```
SomeClass.new() # ArgumentError: wrong number of arguments (0 for 1)
SomeClass.new('cow') # ArgumentError: wrong number of arguments (1 for 0) 
```

为什么会发生第二个 Argument 错误，为什么不会发生与在不存在的超类上调用 super 相关的更具体的错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T20:11:03.467

`SomeClass`隐式扩展`Object`并`Object`具有隐式无参数`initialize`方法。

使用`super`bare（即没有args 或parens）向超类发送与子类收到的相同消息。在您的示例中，使用`super`in`SomeClass#initialize(arg)`实际上是发送`#initialize(arg)`到 Object - 因此出现错误。

没有更具体的错误的原因是它不是特殊情况。

# java - 如何在rest service中请求多个资源

> ID：14570139
> 
> 赞同：0
> 
> 时间：2013-01-28T19:58:28.367
> 
> 标签：java, rest

我是 RESTful Web 服务的新手，需要一些帮助。我有服务将返回产品列表。URL 如下所示：

```
/example/product/6666,6667?expand=sellers&storeIds=2,1 
```

要定义这个服务，我有这个接口：

```
@Path("/example")
public interface Service {
    @GET
    @Path("/products/{pIds}")
    @Produces( "application/json" )
    public ServiceResponse<ProductsList> getProducts(
        @PathParam("pIds") String productsIds,
        @QueryParam("expand") String expand,
        @QueryParam("storeIds") String storeIds) throws Exception;
} 
```

我在这里假设我得到的`productsIds`是一个字符串，并且我需要手动将此字符串拆分为一个 id 列表，分隔符为逗号。

有没有办法将参数作为列表获取，而不是从我这边手动执行？或者是否有一个库可以用来自动执行此操作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:23:31.273

您可以将产品 ID 直接反序列化到一个列表中，并对您的服务定义进行一些细微的更改。试试这个：

```
@Path("/example")
public interface Service {
    @GET
    @Path("/products/{pIds}")
    @Produces( "application/json" )
    public ServiceResponse<ProductsList> getProducts(
        @PathParam("pIds") List<String> productsIds,
        @QueryParam("expand") String expand,
        @QueryParam("storeIds") String storeIds) throws Exception;
} 
```

更改`String productsIds`为`List<String> productsIds`。

在旁注中，我建议将产品 ID 作为查询参数传递。您的 URI 应该标识一个唯一资源（在本例中为产品）并且它应该是无状态的。

# php - 在编译期间检测 PHP 是否正在使用给定的扩展名进行编译

> ID：14570140
> 
> 赞同：1
> 
> 时间：2013-01-28T19:58:30.573
> 
> 标签：php, c, php-internals

我正在尝试为 PHP 构建一个扩展。在遵循 Sara Golemon 的书之后，我有了一个基本扩展，我可以将其编译为共享模块，此外，我可以沿着 PHP 本身静态编译它。

现在我想修改 PHP 解释器以拦截特定的内部函数调用并将这些调用传达给我的扩展。我只想在我的扩展使用 PHP 静态编译时才这样做——否则解释器构建过程应该生成一个未修改的 PHP 二进制文件。我的理解是我应该使用 C 预处理器。然而，为了实现我的目标，**我需要一个预处理器标志，它只会在 PHP 配置为使用我的扩展进行编译时引发**（即 ./configure --enable-myextension）。不幸的是，我找不到这样的标志，配置脚本似乎也没有设置。

我应该在这里说，我已经尝试在我的扩展程序代码中设置 preprossessor 标志，但这不起作用。我的扩展在构建过程的后期首次被触及（即大致在解释器核心之后），并且在编译大量解释器代码时，我在那里设置的标志是不活动的。

有什么想法吗？以上听起来合理吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:51:03.067

> 我的理解是我应该使用 C 预处理器。

不，你不需要那个。

> 我需要一个预处理器标志，仅当 PHP 配置为使用我的扩展进行编译时才会引发

你为什么要那个？它基本上会人为地限制您的扩展的功能，尽管无论您的扩展如何编译，都可以挂钩函数调用。

> 以上听起来合理吗？

在我看来，这是不合理的。请看一下 AOP 如何挂钩函数调用：[https ://github.com/AOP-PHP/AOP](https://github.com/AOP-PHP/AOP)

如果您需要挂钩的不仅仅是函数调用，您需要通过使用`zend_set_user_opcode_handler()`. 请使用 lxr.php.net 或类似工具（fgrep 等）找出此类处理程序的使用位置和方式。我知道 laruence 去年在这里努力开发一个有趣的扩展：[http](http://svn.php.net/viewvc/pecl/taint/trunk/taint.c?view=markup) ://svn.php.net/viewvc/pecl/taint/trunk/taint.c?view=markup所以我认为这是最“最多日期”的做事方式作为参考，如果同时发生任何变化。

# jquery - JQuery AJAX 需要重新加载页面才能显示新内容

> ID：14570142
> 
> 赞同：0
> 
> 时间：2013-01-28T19:58:49.320
> 
> 标签：jquery, ajax, image

我有一个 python 脚本，可以读取并返回（以 JSON 格式）来自特定文件夹的每个图像。在一个页面上，我有一个表单，允许我向该文件夹添加一个新图像：一个简单的上传表单，一个文件输入，当我提交它时，它会将我重定向到上传它的 python 脚本，最后是 python 脚本将我重定向到上传表单页面，其中图像通过 AJAX 加载。

这是我通过 AJAX 获取所需数据的 JQuery 代码：

```
$.ajax({
    type: "GET",
    url: "images.cgi?action=list",
    success: function (data) {
        var parsed = $.parseJSON(data);
        for (d in parsed) {
            img = '<img src="images/' + parsed[d][1] + '" />';
            $('div').append(img);
        }
    }
}); 
```

当我第一次访问该页面时，图像加载良好。但是如果我上传图片，当我重定向到上传页面时，最后上传的图片没有加载，我必须手动重新加载页面才能显示它。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:41:18.260

好吧，我的问题是由于缓存。我只需要在我的 AJAX 请求中将缓存设置为 false，现在一切正常！

```
$.ajax({
    type: "GET",
    url: "images.cgi?action=list",
    cache: false,
    success: function (data) {
        var parsed = $.parseJSON(data);
        for (d in parsed) {
            img = '<img src="images/' + parsed[d][1] + '" />';
            $('div').append(img);
        }
    }
}); 
```

# sql - Oracle 从多个结果中选择最小行

> ID：14570144
> 
> 赞同：1
> 
> 时间：2013-01-28T19:59:00.723
> 
> 标签：sql, oracle

我已经尝试解决这个问题一段时间了，任何帮助将不胜感激。

我有桌子：

```
distributor(distributor_name, distributor_id)
distributed(price, movie_id, distributor_id)
movie(title, movie_id) 
```

每个发行商都有多个不同价格的电影记录。

我正在尝试为特定电影选择最低价格以及来自哪个发行商

到目前为止，我已经尝试过：

```
select min(Price), Distributor from
(select m.distributor_name as Distributor, d.price from 
distributors m, distributed d, movies mo
where
mo.title = 'Movie Name' and mo.movie_id = d.movie_id and d.distributor_id = m.distributor_id)
group by Distributor; 
```

它返回每个分销商的最低价格。

如果我运行：

```
select min(Price)
(select m.distributor_name as Distributor, d.price from 
distributors m, distributed d, movies mo
where
mo.title = 'Movie Name' and mo.movie_id = d.movie_id and d.distributor_id = m.distributor_id); 
```

它只提供该特定电影的最低价格。

如何以最低的价格获得经销商的名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:03:05.887

根据您的 Oracle 版本，您可以使用`row_number()`：

```
select price, distributor
from
(
  select d.price, 
    m.distributor_name as Distributor,
    row_number() over(order by d.price) rn
  from distributors m
  inner join distributed d
    on d.distributor_id = m.distributor_id
  inner join movies mo 
    on mo.movie_id = d.movie_id 
  where mo.title = 'Movie Name' 
) src
where rn = 1; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!4/52d13/3)

如果您想对此进行扩展并获得任何电影的最低价格，那么您可以按电影标题对数据进行分区：

```
select price, distributor
from
(
  select d.price, 
    m.distributor_name as Distributor,
    row_number() over(partition by mo.title order by d.price) rn
  from distributors m
  inner join distributed d
    on d.distributor_id = m.distributor_id
  inner join movies mo 
    on mo.movie_id = d.movie_id 
) src
where rn = 1; 
```

# grails - AppFog 上的 Grails：BIRT 报告部分显示

> ID：14570145
> 
> 赞同：0
> 
> 时间：2013-01-28T19:59:01.080
> 
> 标签：grails, birt, appfog

在我的 Grails 2.2 应用程序中，我使用 BIRT 报告插件生成（有点）复杂报告的 pdf（7 个数据集绑定到第 8 个），它在我的本地机器上工作正常，但在 AppFog 上，我只得到大约 1/3报告。问题是我得到了文档的页眉和页脚，但是在不同的尝试中，内容在不同的地方被破坏了，所以看起来像是某种超时问题，比如报告引擎没有足够的时间来生成自己。我忘记设置什么了吗？有人知道要尝试什么吗？

# css - Firefox 中的 CSS 工具提示悬停位置问题

> ID：14570146
> 
> 赞同：1
> 
> 时间：2013-01-28T19:59:00.833
> 
> 标签：css, firefox, hover, position, tooltip

我找到了一个可以在新站点中使用的完整 CSS 工具提示。它在 Safari 和 Chrome 中完美运行。但仅在 Firefox 中，无论链接在页面上的哪个位置，工具提示都会一直悬停在 DIV 的最左侧。

我在这个网站上发现这个问题非常接近，但没有给我需要的答案。 [CSS Tooltip悬停位置问题](https://stackoverflow.com/questions/9510710/css-tooltip-hovering-position-issue)

它会在 Firefox 中出错，还是我需要专门为 Firefox 添加额外的代码？

我确实根据设置规则确保相对和绝对定位是正确的。我对这一切还是很陌生。所以任何帮助将不胜感激。

谢谢你。

这是我的代码：

```
a.tip2 {
position: relative;
text-decoration: none;
}

a.tip2 span {display: none;}

a.tip2:hover span {
display: block;
position: absolute; 
padding: .5em;
content: attr(title);
min-width: 120px;
text-align: center;
width: auto;
height: auto;
white-space: nowrap;
top: -32px;
background: rgba(0,0,0,.8);
-moz-border-radius:10px;
-webkit-border-radius:10px;
border-radius:10px;    
color: #fff;
font-size: .86em;
}

a.tip2:hover span:after {
position: absolute;
display: block;
content: "";  
border-color: rgba(0,0,0,.8) transparent transparent transparent;
border-style: solid;
border-width: 10px;
height:0;
width:0;
position:absolute;
bottom: -20px;
left:1em;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T18:30:10.307

Firefox 将悬停图像定位在与 IE、Chrome 和 Safari 不同的位置时，我遇到了类似的问题。

我专门为 Firefox 更改了 css：

```
/*Firefox*/
@-moz-document url-prefix()
{
a.enlarge:hover span{top: 250px; left: 20px;}
} 
```

而对于我使用的其他浏览器 top: -200px

# mysql - 基于一天中的小时的多选子查询计数，想要添加表/列

> ID：14570152
> 
> 赞同：5
> 
> 时间：2013-01-28T19:59:29.840
> 
> 标签：mysql, sql

现在，我有一个多选子查询，它根据一天中的小时数抓取数据。我现在要做的是在该查询中引入另一个表，并根据 id 以及原始表中的日期时间进行计数。

我现在拥有的是：

```
select
(
select     count(a_date)
from     t1
where     d_date
     between     '2013-01-07 00:00:00' and '2013-01-07 00:59:59'
) AS     '00:00 to 00:59',
(
select     count(a_date)
from     t1
where     d_date
     between     '2013-01-07 01:00:00' and '2013-01-07 01:59:59'
) AS     '01:00 to 01:59' 
```

以此类推，直到一天结束。

我有另一个查询，它根据 id 和 datetime 给我计数，但只有两列，一列显示 c_name，另一列显示小时计数。

前任。

```
select  t2.c_name, count(t1.a_date)
from    t2 join t1
on t2.t1_key = t1.t2_key
where   t1.d_date
    between '2013-01-07 00:00:00' and '2013-01-07 00:59:59'
group by    t2.c_id 
```

基本上，我想将这两个查询组合成一个可以显示 c_name 和一天中所有时间的查询。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T20:20:54.220

我会考虑使用该`CASE`语句。

尝试这样的事情（添加额外的 23 列）：

```
select  c_name, 
   SUM(case when HOUR(d_date) = 0 then 1 else 0 end) '00:00 to 00:59',
   SUM(case when HOUR(d_date) = 1 then 1 else 0 end) '01:00 to 01:59'
from   t2
    join t1 on t2.t1_key = t1.t2_key 
group by c_name 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!2/1c3e2/15)。

您只需要为 d_date 添加 WHERE 标准 - 例如：

```
where  d_date between '2013-01-07 00:00:00' and '2013-01-07 23:59:59' 
```

或者

```
where  Date(d_date) = '2013-01-07' 
```

祝你好运！

# javascript - 对嵌入式服务器的 CORS 请求（无法更改）

> ID：14570155
> 
> 赞同：0
> 
> 时间：2013-01-28T19:59:52.000
> 
> 标签：javascript, ajax, html, xmlhttprequest

在 HTML4 下，我可以创建一个 XmlHttpRequest 来毫无问题地检索 AJAX 数据包；我现在正在移植到 HTML5 - 我遇到了 cors（直到今天才听说过）。我无法对服务器进行任何修改，因为它是一个提供简单内容的嵌入式 HTTP 服务器。

这是我正在使用的 JS：

```
var xmlhttp = new window.XMLHttpRequest();
xmlhttp.open("GET","http://192.168.1.100/US/1.23/dynamic/readparval.xml",false);
xmlhttp.send(null);
xmlDoc = xmlhttp.responseXML.documentElement; 
```

是的，我知道我的请求被认为是跨域的，但这同样适用于 HTML4。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:18:03.763

您可以通过其他服务器代理您的请求吗？该代理服务器不受 CORS 限制（由浏览器强加）。

浏览器扩展（在 chrome 的情况下）也可以通过将域添加到清单中的权限来绕过 CORS 检查。

# ruby-on-rails - 在 Rails 中按需禁用/启用日志的智能方法

> ID：14570156
> 
> 赞同：0
> 
> 时间：2013-01-28T19:59:52.970
> 
> 标签：ruby-on-rails, logging, ruby-on-rails-3.1, middleware, rack-middleware

我正在 Heroku Cedar 堆栈上运行 Rails 应用程序（v 3.1.10），由于日志的大小，Papertrail 附加组件变得疯狂。

我的应用程序非常冗长，日志变得越来越大（非常大）：

**有时是因为我在一个字段中序列化了大量数据，这会产生巨大的 SQL 请求。在我的模型中，我有很多：**

```
serialize :a_game_data, Hash
serialize :another_game_data, Hash
serialize :a_big_set_of_game_data, Hash
[...] 
```

*感谢我的 AS3 Flash 应用程序与大量的 json 一起工作......*

**有时因为要渲染很多部分：**

```
Rendered shared/_flash_message.html.erb (0.1ms)
Rendered shared/_header_cart_info.html.erb (2.7ms)
Rendered layouts/_header.html.erb (19.4ms)
[...] 
```

*这不是大问题，但我也添加了这个案例，因为 Jamiew 处理它，见下文......*

**有时因为同一页面上有很多 sql 查询：**

```
User Load (2.2ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
Course Load (5.3ms)  SELECT "courses".* FROM "courses" WHERE (id = '1' OR pass_token = NULL)
Session Load (1.3ms)  SELECT "sessions".* FROM "sessions" WHERE "sessions"."id" = 1 LIMIT 1
Training Load (1.3ms)  SELECT "trainings".* FROM "trainings" WHERE "trainings"."id" = 1 LIMIT 1
[...] 
```

*这是一个大（太）复杂的应用程序，我们在这里......是的......*

**有时因为有很多参数：**

```
Parameters: {"_myapp_session"=>"BkkiJTBhYWI1MUVlaVdtbE9Eb1Y2I5BjsAVEkiEF9jc3JmX3Rva2VlYVWZyM2I0dEZaR1YwNXFjZhZTQ1uBjsARkkiUkiD3Nlc3Npb25faWQGOgZFRhcmRlbi51c2yN1poVm8vdWo3YTlrdUZzVTA9BjsARkkiH3dAh7CMTQ0Yzc4ZDJmYzg5ZjZjOGQ5NVyLmFkbWluX3VzZXIua2V5BjsAVFsISSIOQWRtaW5Vc2VyBjsARlsGaQZJIiIkMmEkMTAkcmgvQ2Rwc0lrYzFEbGJFRG9jMnZvdQY7AFRJIhl3YXJkZW4udXNlci51c2VyLmtleQY7AFRbCEkiCVVzZXIGOwBGWwZpBkkiIiQyYSQxMCRBUFBST2w0aWYxQmhHUVd0b0V5TjFPBjsAVA==--e4b53a73f6b622cfe7550b2ee12678712e2973c7", "authenticity_token"=>"EeiWmlODoYXUfr3b4tFZGV05qr7ZhVo/uj7a9kuFsU0=", "utf8"=>"✓", "locale"=>"fr", "id"=>"1", "a"=>1, "a"=>1, "a"=>1, "a"=>1, "a"=>1, "a"=>1, [...] Hey! You've reach the end of the line but it's not the end of the parameters...} 
```

*AS3 Flash 应用程序将大 json 数据发送到控制器...*

我没有提到（臭名昭著的）“资产管道日志记录问题”，因为现在我正在使用 quiet_assets gem 来处理这个问题：
[https ://github.com/evrone/quiet_assets](https://github.com/evrone/quiet_assets)

* * *

那么......我尝试了什么？

*1：Dennis Reimann 的中间件解决方案：*
[http://dennisreimann.de/blog/silencing-the-rails-log-on-a-per-action-basis/](http://dennisreimann.de/blog/silencing-the-rails-log-on-a-per-action-basis/)

*2：Spagalocco 的宝石（灵感来自解决方案 #1）：*
[https ://github.com/spagalloco/silencer](https://github.com/spagalloco/silencer)

*3：jamiew 的猴子补丁（灵感来自解决方案 #1 + 奖金）：*
[https ://gist.github.com/1558325](https://gist.github.com/1558325)

没有什么能真正按预期工作，但它正在接近。

**我宁愿在我的 ApplicationController 中使用这样的方法：**

```
def custom_logging(opts={}, show_logs=true)
  disable_logging unless show_logs
  remove_sql_requests_from_logs if opts[:remove_sql_requests]
  remove_rendered_from_logs if opts[:remove_rendered]
  remove_params_from_logs if opts[:remove_params]
  [...]
end 
```

...并在任何控制器方法中调用它：`custom_logging({:remove_sql_requests=>1, :remove_rendered=>1})`

你明白了。

那么，网上有什么好的资源来处理这个问题吗？非常感谢您的建议...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:54:04.717

我是上面提到的消音器 gem 的作者。您是要过滤一般的日志记录还是针对特定操作？消音器 gem 处理后一个问题。虽然您当然可以以不同的方式使用它，但它主要用于特定操作.

听起来您正在寻找不那么冗长的日志记录。我建议你看看[lograge](https://github.com/roidrage/lograge)。我在我的大多数 Rails 应用程序中使用它，并且发现它非常有用。

如果您需要更专业的东西，您可能需要考虑实现自己的[LogSubscriber](http://api.rubyonrails.org/classes/ActiveSupport/LogSubscriber.html)，它本质上是 lograge 解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:11:20.737

在 Heroku 环境中设置日志级别

查看您当前的日志级别：

```
heroku config 
```

您很可能有“信息”，这只是很多噪音

将其更改为警告或错误

```
heroku config:add LOG_LEVEL=WARN 
```

另外，查看日志时，只指定“app”服务器

```
heroku logs --source app 
```

我个人，附加 --tail 以查看实时日志。

```
heroku logs --source app --tail 
```

# sql - 使用 SQL 命令 ALTER 更改表中的数据类型

> ID：14570157
> 
> 赞同：0
> 
> 时间：2013-01-28T19:59:55.270
> 
> 标签：sql, netbeans, sqlcommand, alter

我研究了如何更改表数据类型，并且我了解如何做到这一点，但我无法让它工作。我正在尝试使用以下命令在 APP 中更新我的表 Person：

```
ALTER TABLE APP.PERSON ALTER uName varchar; 
```

到目前为止我已经尝试过：

*   使用 Modify 但意识到，在我收到错误后，这确实应该是 ALTER。
*   将 uName 更改为 UNAME。
*   将其更改为 varchar2 的数据类型。
*   在末尾添加数据类型“(20)”和“NOT NULL”的大小。

我哪里错了？我正在使用在 Mac OS X 上运行的 Netbeans 7.3 Beta 2，这一切都在 Netbeans 的 SQL 命令部分完成，如果有任何问题，使用 Java-DB 作为我的数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:05:08.777

它已经在[这里](https://stackoverflow.com/questions/2385020/how-to-alter-a-column-datatype-for-derby-database)得到了回答。您基本上需要创建具有所需数据类型的新列并删除旧列。但是，如果您查看[Apache Derby doc](https://db.apache.org/derby/docs/10.2/ref/rrefsqlj81859.html)，有一个`SET DATA TYPE`命令，所以尝试类似

```
ALTER TABLE APP.PERSON ALTER UNAME SET DATA TYPE VARCHAR(30) 
```

**编辑**

如果上面的代码不起作用，那么您只需要按照我之前的建议重新创建该列。

```
ALTER TABLE APP.PERSON ADD COLUMN UNAME_NEW VARCHAR(30);
UPDATE APP.PERSON SET UNAME_NEW = UNAME;
ALTER TABLE APP.PERSON DROP COLUMN UNAME;
RENAME COLUMN APP.PERSON.UNAME_NEW TO UNAME; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T20:03:23.707

大多数数据库需要特定权限才能使用 DDL（数据定义语言）命令，例如`ALTER TABLE`. 很多时候，应用层中使用的数据库凭据在数据库中没有 DDL 权限。

验证您使用的连接是否具有运行权限`ALTER TABLE`。如果确实如此，请发布您正在使用的特定代码和任何特定的错误消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T20:08:43.217

我没有要测试的 JavaDB，但根据[文档](http://docs.oracle.com/javadb/10.5.3.0/ref/rrefsqlj81859.html#rrefsqlj81859__rrefsqlj37860)，它应该是；

```
ALTER TABLE APP.PERSON ALTER uName SET DATA TYPE VARCHAR(20) 
```

# android-fragments - 将常规活动添加到 ActionBarSherlock 选项卡

> ID：14570160
> 
> 赞同：0
> 
> 时间：2013-01-28T19:59:57.630
> 
> 标签：android-fragments, android-activity, actionbarsherlock, android-tabhost

我使用本教程作为我的基本代码：

[http://wptrafficanalyzer.in/blog/adding-navigation-tabs- contains-listview-to-action-bar-in-pre-honeycomb-versions-using-sherlock-library/](http://wptrafficanalyzer.in/blog/adding-navigation-tabs-containing-listview-to-action-bar-in-pre-honeycomb-versions-using-sherlock-library/)

我有一个针对 2.1 构建的项目，然后我产生了一个绝妙的想法：“哎呀，拥有我看到的那些方便的 ActionBars 肯定会膨胀”很快我就知道我必须将我的目标构建切换到 4.1 并弄清楚如何使用 ABS 以便它仍然可以在旧版本的 Android 上使用。一旦我终于想出如何让 ABS 的该死的 Actionbar 工作，我发现我的旧 Tabhost 现在已经贬值了，所以我也必须考虑更新它。现在我发现这个很容易理解的 tut，但我想知道是否有一种方法可以将 Activity 用于我的选项卡而不是片段？还是我最好做更多的研究并弄清楚如何将我现有的活动转换为片段？

```
public class BuhzHyve extends SherlockActivity implements ActionBar.TabListener {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        Log.i("onCreate Method Called","WIN WIN WIN");
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub

        Log.i("onTabSelected Method Called","WIN WIN WIN");
        TextView text=(TextView)findViewById(R.id.textView1);
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:06:24.423

在您的项目和 bam 中包含支持库，您现在可以使用片段。只要确保您从支持库中导入片段。

```
import android.support.v4.app.Fragment; 
```

[http://developer.android.com/tools/extras/support-library.html](http://developer.android.com/tools/extras/support-library.html)

# c# - 如何在 mvc 4 中自动将占位符属性添加到 html 输入类型号？

> ID：14570165
> 
> 赞同：9
> 
> 时间：2013-01-28T20:00:18.213
> 
> 标签：c#, asp.net-mvc-4, data-annotations, placeholder, mvc-editor-templates

这是一个非常具体的问题。我设法使用`EmailAddress.cshtml`保存在`~/Views/Shared/EditorTemplates/`文件夹中的名为 的编辑器模板自动将占位符属性添加到 html5 电子邮件输入类型。请看下面的代码：

```
@Html.TextBox("", ViewData.TemplateInfo.FormattedModelValue, new { @class = "text-box single-line", placeholder = ViewData.ModelMetadata.Watermark }) 
```

它之所以有效，是因为我`[DataType(DataType.EmailAddress)]`在我的视图模型中使用了 DataAnnotation。

`int?`当我使用变量时不起作用。

```
public class MiageQuotaRequestViewModel
{
    [Required]
    [DataType(DataType.EmailAddress)]
    [Display(Name = "Nombre de place demandées", Prompt = "Nombre de place")]
    [Range(0, 50, ErrorMessage = "La demande doit être comprise entre 0 et 50 places")]
    public int? RequestedQuota { get; set; }
} 
```

`@Html.EditorFor`像这样翻译这个输入：

```
<input class="text-box single-line" data-val="true" data-val-number="The field Nombre de place demandées must be a number." data-val-range="La demande doit être comprise entre 0 et 50 places" data-val-range-max="50" data-val-range-min="0" data-val-required="Le champ Nombre de place demandées est requis." id="RequestedQuota" name="RequestedQuota" type="number" value=""> 
```

问题是我无法显示`Prompt`DataAnnotation（通常由 翻译`placeholder`）。此外，`DataType`枚举没有任何“数字”或“整数”值可以让我使用 EditorTemplate，就像我对 EmailAddress DataType 所做的那样。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-28T21:42:18.937

根据[Pat Burke](https://stackoverflow.com/users/1991312/pat-burke)的评论，我可以使用 UIHint 数据属性结合良好的编辑器模板。

下面是一个例子（`Editor Template`）：

```
@Html.TextBox("", ViewData.TemplateInfo.FormattedModelValue, new { @class = "text-box single-line", placeholder = ViewData.ModelMetadata.Watermark, type = "number" }) 
```

( `ViewModel`)

```
public class MiageQuotaRequestViewModel
{
    [Required]
    [UIHint("Number")]
    [DataType(DataType.EmailAddress)]
    [Display(Name = "Nombre de place demandées", Prompt = "Nombre de place")]
    [Range(0, 50, ErrorMessage = "La demande doit être comprise entre 0 et 50 places")]
    public int? RequestedQuota { get; set; }
} 
```

最后是结果：

![在此处输入图像描述](../Images/448553e4a0d0b1fc315f9e6a9c89425a.png)

```
<input class="text-box single-line" 
    data-val="true"
    data-val-number="The field Nombre de place demandées must be a number."
    data-val-range="La demande doit être comprise entre 0 et 50 places"
    data-val-range-max="50"
    data-val-range-min="0"
    data-val-required="Le champ Nombre de place demandées est requis."
    id="RequestedQuota"
    name="RequestedQuota"
    placeholder="Nombre de place"
    type="number"
    value=""> 
```

# algorithm - 给定一组地理位置，我如何找到最受欢迎的位置？

> ID：14570169
> 
> 赞同：4
> 
> 时间：2013-01-28T20:00:23.123
> 
> 标签：algorithm, geolocation

给定一组地理位置（以纬度/经度的形式），我将如何找到最受欢迎的位置？

例如，我编译了一张包含各种点的地图：

[地图链接](http://maps.googleapis.com/maps/api/staticmap?size=420x420&maptype=hybrid&markers=color:green|label:1|51.55408173,-3.00224635&markers=color:green|label:2|51.57401885,-3.01299948&markers=color:green|label:3|51.57397544,-3.0122217&markers=color:green|label:4|51.54411881,-3.01220712&markers=color:green|label:5|51.57416773,-3.01204088&markers=color:green|label:6|51.56423048,-3.01220527&markers=color:green|label:7|51.57427249,-3.01217319&markers=color:green|label:8|51.57412032,-3.01228708&markers=color:green|label:10|51.57410989,-3.01223212&markers=color:green|label:9|51.57050048,-3.03590767&sensor=true)

我们可以看到，除了 1、4、6 和 9 之外，所有点都集中在大约一个位置。我如何计算该组的平均位置？理想情况下，随着地图的人口越来越多，我想计算第二个最受欢迎的位置，第三个最受欢迎的位置等。

我怎么能解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T20:42:10.907

如果您需要一个简单的解决方案，它会给您一个很好的估计并且易于编码......

*   选择您认为位置大小的半径（我们会说 100m）
*   遍历您的位置，使它们成为您圈子的中心
*   使用 Point-in-Circle 计算圆内有多少其他点
*   在它的圆圈内拥有最多点的位置成为您最受欢迎的位置，现在从您的集合中删除所有这些点并重复第 2 至第 n 最受欢迎。

如何将距离转换为纬度和经度？[将经度纬度转换为米](https://stackoverflow.com/questions/3024404/transform-longitude-latitude-into-meters)

例如，1 度的纬度在 110574 和 111693 米之间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-04T16:12:28.167

[DBSCAN 算法](https://en.wikipedia.org/wiki/DBSCAN)可能是您正在寻找的。

它是一种根据密度找到点簇的算法。由于在您的情况下，流行意味着密集，您可以使用它来解决此任务。它需要两个参数：

*   **eps**，每个点周围的半径，在该半径内寻找其他点以形成集群，
*   **minPts**，一个点周围半径内所需的点数，以将节点组视为一个集群。

您还需要一个函数来测量点之间的距离。由于您有（纬度，经度）对（通常为*WGS84 格式*），因此您需要[Haversize 距离。](https://en.wikipedia.org/wiki/Haversine_formula)

该算法有多种实现方式。如果您使用的是*Java*，[Apache Commons Math](https://commons.apache.org/proper/commons-math/)提供了一个不错的实现（有关更多详细信息和一些代码片段，请参见[此处](https://commons.apache.org/proper/commons-math/userguide/ml.html)）。调用*eps* = **1.0**（半径为 1 公里）和`DBSCANClusterer`minPts *=* 0 **（**集群有 1 个或更多点）。请参阅[此答案](https://stackoverflow.com/questions/3694380/calculating-distance-between-two-points-using-latitude-longitude-what-am-i-doi)以实现*Haversine 距离*（确保与*eps*使用的相同测量单位匹配）。最后通过减小大小对集群进行排序，使其按“受欢迎程度”排序：

 *******```
Collections.sort(clusters, (o1, o2) -> 
    Integer.compare(o2.getSize(), o1.getSize());
Cluster<? extends Clusterable> mostPopular = clusters.get(0); 
```

如果我没记错的话，这个实现解决了关于它的大小（点数）的二次时间问题。如果您将面临的问题的所有实例都与您的示例具有相同的大小，那么您将没有问题。*******

# .net - 在屏幕上平滑移动一条线

> ID：14570170
> 
> 赞同：0
> 
> 时间：2013-01-28T20:00:25.477
> 
> 标签：.net, wpf, winforms, graphics, gdi+

我正在尝试在屏幕上移动一条红线（无卡顿），并且我尝试了各种不同的方法。从 GDI+ 双缓冲（使用`BufferedGraphics`类）到 WPF 的`WriteableBitmap`，都失败了。可能是我使用的计时器不够准确，它可能会垂直同步撕裂，但这似乎是不可能的。我们现在是 2013 年，我有一个高端 GPU，但我仍然无法重现我的旧 8 位 SNES 没有问题的东西。

是否有人有一个 100% 流畅且无闪烁的 WinForms 代码示例，或者如果没有 DirectX，这只是不可能完成的任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:52:33.477

在 WPF 中，您可以简单地为 Line 控件设置动画。

```
<Canvas>
    <Line x:Name="line"
        X2="{Binding X1, RelativeSource={RelativeSource Mode=Self}}"
        Y2="{Binding ActualHeight, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Canvas}}" Stroke="Red" StrokeThickness="4">
    </Line>
</Canvas> 
```

您将使用如下方法创建并启动动画：

```
private void StartAnimation()
{
    var animation = new DoubleAnimation
    {
        To = ActualWidth, // width of the window
        Duration = TimeSpan.FromSeconds(ActualWidth / 32),
        RepeatBehavior = RepeatBehavior.Forever
    };

    line.BeginAnimation(Line.X1Property, animation);
} 
```

* * *

除了为`X1`Line 的属性设置动画并让`X2`属性跟随绑定之外，您还可以为 Line 的 RenderTransform 设置动画：

```
<Canvas>
    <Line Y2="{Binding ActualHeight, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Canvas}}" Stroke="Red" StrokeThickness="4">
        <Line.RenderTransform>
            <TranslateTransform x:Name="transform"/>
        </Line.RenderTransform>
    </Line>
</Canvas> 
```

StartAnimation 方法现在看起来像这样：

```
private void StartAnimation()
{
    var animation = new DoubleAnimation
    {
        To = ActualWidth, // width of the window
        Duration = TimeSpan.FromSeconds(ActualWidth / 32),
        RepeatBehavior = RepeatBehavior.Forever
    };

    transform.BeginAnimation(TranslateTransform.XProperty, animation);
} 
```

# c# - Scripts.Render 使用过时的 javascript 文件

> ID：14570171
> 
> 赞同：3
> 
> 时间：2013-01-28T20:00:28.053
> 
> 标签：c#, asp.net-mvc, razor, bundling-and-minification

我的 MVC4 应用程序`Scripts.Render`用于加载一个包，该包正在加载一个名为“functions.js”的文件。

当我在浏览器中调试此应用程序时，脚本会加载，但版本已过时。当我直接查看资源，但附加`?v=anytext`脚本看起来正确，但没有附加，脚本显示旧代码。有没有办法强制捆绑输出正确的文件而不是过时的文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T20:18:09.840

这可能是一个缓存问题。在调试模式下使用捆绑和缩小时（`<compilation debug="true" />`在您的 中设置时`web.config`），捆绑/缩小被禁用。

您可以覆盖它并通过添加来强制捆绑和缩小`BundleTable.EnableOptimizations = true;`。这将使它在您的生产环境中表现得像在您的生产环境中一样，所有内容都被捆绑和缩小，并且脚本参考包括该版本控制参数（如您提供的那样），它将强制浏览器在任何更改时重新加载您的脚本。

```
public class BundleConfig
{
    public static void RegisterBundles(BundleCollection bundles)
    {
        //all your bundle code
        BundleTable.EnableOptimizations = true;
    }
} 
```

# android - 如何在 AndroidManifest.xml 中指定要禁止在小于 4.7 英寸设备的设备上安装？

> ID：14570173
> 
> 赞同：12
> 
> 时间：2013-01-28T20:00:37.247
> 
> 标签：android, android-manifest, google-play, screen-size

我有一款在 7 英寸平板电脑上感觉最好的游戏，在 10 英寸平板电脑和 5 英寸三星 Note 大小的设备上感觉还不错。在 Nexus 4 手机或 S3 大小的设备上，它甚至可以说是相当有趣。玩更小的东西一点也不好玩。既然如此，如何编写 Manifest 以使其可以安装在从 4.7 英寸设备到 10 英寸平板电脑的任何设备上，同时又受到小型手机的限制？

**编辑**

退一步说，这个问题的原因是因为我发现 Android 开发者网站上的文档令人难以置信的混乱和冲突。让我们举一些例子来说明混淆的来源：

让我们以几个不同的设备为例。

**机器人 3**

*   4英寸显示屏
*   540x960 像素
*   275 ppi

查看 support-screens 的文档，我们可以推断出……

*   在 4 英寸处，它可能处于“大”的边缘，但可能是中等的
*   在 540x960 时，它完全在“大”的最小值之内
*   在 275 ppi 它声称是 hdpi 屏幕

然而，这个设备比我想要支持的设备小得多......但文档使它看起来像 3 个计数中的 2 个，这个设备有一个“大”屏幕。没有合理的定义是 4 英寸屏幕“大”。现在，让我们更进一步……

**连结 4**

*   4.7英寸显示屏
*   768x1280 像素
*   318ppi

查看 support-screens 的文档，我们可以推断出……

*   这个屏幕的物理尺寸*正好在中和大的边界上*
*   像素尺寸表明它可能是 xlarge
*   ppi 表明它是一个 xhdpi 设备

再一次，4.7 英寸的屏幕“xlarge”并不是一个明智的定义……屏幕的尺寸可能*刚好大到足以*让游戏变得有趣，但它是“中等”屏幕吗？“大”屏幕？你怎么可能知道？

以上两款手机都是“中”吗？Droid 会是“中型”而 Nexus 是“大型”吗？为什么或者为什么不？如果 Nexus 是“大”的，那么它与 7 英寸平板电脑有何不同，后者也应该是“大”？

**还有一个事实是，文档声称supports-screens/size 从3.2开始就被弃用了**

但是，如果一个人想要同时支持旧手机（假设适当的物理屏幕尺寸以英寸为单位）和新平板电脑，或者如果它隐藏在树林里，那么没有明确的指导来代替它使用什么。有人可以清楚地*列出*真正重要的标准以及*为什么*给定的设备会适合给定的过滤器或失败吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T21:03:53.263

我认为根据 Google 文档，这将满足您的要求（5 英寸或更小）：

```
<compatible-screens>

    <screen android:screenSize="large" android:screenDensity="ldpi" />
    <screen android:screenSize="large" android:screenDensity="mdpi" />

    <screen android:screenSize="xlarge" android:screenDensity="ldpi" />
    <screen android:screenSize="xlarge" android:screenDensity="mdpi" />
    <screen android:screenSize="xlarge" android:screenDensity="hdpi" />
    <screen android:screenSize="xlarge" android:screenDensity="xhdpi" />

</compatible-screens> 
```

或者使用这个（4.7 英寸或更小）：

```
<supports-screens android:smallScreens="false"
                  android:normalScreens="true"
                  android:largeScreens="true"
                  android:xlargeScreens="true"
                  android:requiresSmallestWidthDp="536" /> 
```

我推荐第二种方法，因为它更准确。

536是怎么计算的？基于[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)我们有（高度 x 宽度）：

*   超大屏幕至少为 960dp x 720dp
*   大屏幕至少为 640dp x 480dp
*   普通屏幕至少为 470dp x 320dp
*   小屏幕至少为 426dp x 320dp

(720 - 480) / (7 - 4) = 80, 480 + (80 * 0.7) = 536

并且不要担心“不推荐使用的警告”，因为新的建议方法适用于 UI 不是全屏的平板电脑应用程序 (IMO)，并且屏幕底部和顶部的一些空间被标题栏和/或后退、菜单占用等按钮，而您的游戏可能以全屏模式运行。

[从http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts](http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts)的 Google 文档中检查：

> 注意：您使用这些限定符指定的尺寸**不是实际的屏幕尺寸**。相反，尺寸是针对**活动窗口可用的宽度或高度（以 dp 为单位）**. Android 系统可能会将部分屏幕用于系统 UI（例如屏幕底部的系统栏或顶部的状态栏），因此部分屏幕可能无法用于您的布局。因此，您声明的尺寸应该专门针对您的活动所需的尺寸——系统在声明它为您的布局提供多少空间时会考虑系统 UI 使用的任何空间。还要注意，尽管您的布局没有声明它，但操作栏被视为应用程序窗口空间的一部分，因此它减少了可用于布局的空间，您必须在设计中考虑到它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T16:33:24.820

不幸的是，没有办法根据您想要的“物理”尺寸过滤掉设备。

有两个原因。

1.  屏幕尺寸只有四种类型：小、普通、大和超大。这太粗糙了。您需要更高的粒度：“过滤掉 LCD 小于 4.7 英寸的设备”，当前 Android 平台不支持。
2.  屏幕大小由逻辑密度决定，逻辑密度可以设置为与物理密度相差甚远的值。例如，假设一台设备有 5 英寸屏幕，物理密度为 180 ppi。这可能是您要支持的屏幕。但是，出于某种原因，制造商决定将设备的逻辑密度设置为 320 dpi。然后，无论其物理密度如何，该设备都被归类为小屏幕设备。

供大家参考，让我向您展示从逻辑密度和屏幕像素数确定屏幕尺寸的内部逻辑。

[http://androidxref.com/4.0.4/xref/frameworks/base/services/java/com/android/server/wm/WindowManagerService.java#5899](http://androidxref.com/4.0.4/xref/frameworks/base/services/java/com/android/server/wm/WindowManagerService.java#5899)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T00:27:06.533

> 既然如此，如何编写 Manifest 以使其可以安装在从 4.7 英寸设备到 10 英寸平板电脑的任何设备上，同时又受到小型手机的限制？

从技术上讲，你不能。

`android:requiresSmallestWidthDp`最接近您想要的目标。由于这是在与密度无关的像素中测量的，并且由于与密度无关的像素应该是 1/160 英寸，因此您可以`dp`通过乘以 160 得出任何英寸数的值。

但是，根据您的要求，这不是指对角线。这是指最短边的宽度（例如，纵向宽度，横向高度）。

因此，如果您可以根据最小宽度重铸您的愿望，请使用`android:requiresSmallestWidthDp`并祈祷文档在提及 Google Play 是否尊重它时只是一团糟。当您将应用程序上传到 Play 商店开发者控制台并查看哪些设备支持它时，您将能够确定 - 找到一些您知道的设备太小（但否则应该运行您的应用程序）并查看它是否被过滤。

如果文档`android:requiresSmallestWidthDp`是正确的，并且 Play 商店出于过滤目的而忽略它（grrrrr ...），那么您在很大程度上被搞砸了。下一个最接近的解决方案是使用`<compatible-screens>`其他答案，声称您只支持`large`和`xlarge`屏幕尺寸。这将淘汰您想要支持的范围低端的各种设备，但`normal`屏幕尺寸比您想要的要小得多（低至 3 英寸对角线）。

顺便说一句，`normal`对角线是 3"-5"，所以 Droid 3 是`normal`，不是`large`. 像素尺寸与屏幕尺寸完全无关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T20:30:45.360

在实际应用中似乎没有合适的方法来做到这一点。我同意你关于 android 开发指南是多么令人困惑和矛盾的观点。不过，根据我的经验，解决此类问题的一个好办法是，当您在开发人员控制台中发布应用程序时，只需更改哪些设备可以运行您的应用程序。不过，我快速浏览了一下，在这里发现了一个类似的问题：

[在 Android Market 上过滤设备屏幕尺寸](https://stackoverflow.com/questions/8577620/filter-the-device-screen-size-on-the-android-market)

似乎是最好的方法。祝你好运！

# jquery - 如何获取谷歌地图标记来控制 jscrollpane 中的滚动？

> ID：14570178
> 
> 赞同：-1
> 
> 时间：2013-01-28T20:00:54.990
> 
> 标签：jquery, google-maps, jscrollpane

我已经搜索了这个问题的答案，但是只有当你想要在谷歌地图的信息窗口中使用 jscrollpane 时才能找到答案。

我有一个谷歌地图，上面有一些标记，每个标记在它旁边的 jscrollpane div 中都有一个关联的 div。当您单击地图上的标记时，我希望 jscrollpane 滚动到相应的 div 的 Y 坐标。

关于如何做到这一点的任何想法？我在 jscrollpane scrollto 元素 ID 上找不到太多信息。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:38:45.563

您需要 2 条信息：jscrollpane 中关联 div 的位置，以及 jscrollpane 的当前滚动位置。

```
var pos = $(markerDiv).position();
var currentScroll = $(scrollPane).scrollTop();
$(scrollPane).animate({ scrollTop: currentScrollTop + pos.top }); 
```

或者，我认为您可以使用 jScrollPane 的 scrollTo 方法 $(scrollPanel).scrollTo(currentScrollTop + pos.top);

# asp.net-mvc-4 - EF DbContext 中的多个字符串连接

> ID：14570180
> 
> 赞同：0
> 
> 时间：2013-01-28T20:01:01.630
> 
> 标签：asp.net-mvc-4, repository-pattern, code-first, entity-framework-5, unit-of-work

我正在开发一个基于 codeplex EFMVC 解决方案的 MVC 网站，并且我正在使用实体框架和存储库、工作单元和命令模式。我的网站需要是一个 SaaS 解决方案（软件即服务）多个数据库。在我的旧版 Asp.Net WebForms 中，我有一个 XML 文件，其中包含所有不同的字符串连接，我正在尝试使用相同的策略。因此，在我的 LoginController 中，我创建了一个包含公司（以识别将连接到哪个数据库）用户名和密码的命令。在 Domain 项目中的 Validate() 方法中，我正在读取 XML 以获取基于公司字段的正确字符串连接。我的问题是如何设置 DatabaseFactory 或 DbContext 以使用此选定的连接字符串？它应该在构造函数中注入吗？有什么建议以正确的方式做到这一点，而不是“违反规则”吗？

请注意，我使用 AutoFac 进行依赖注入。

感谢您的关注。

最好的祝愿，

路易斯·费尔南多·瓦尔·迪奥尼齐奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:34:32.447

您可以使用 Autofaq 的 ResolveNamed 功能为同一接口获取不同的注册例如：

```
 builder.Register<IDataContext>(x => new DataContext(connectionStringOne))
          .Named<IDataContext>("CS1");

 builder.Register<IDataContext>(x => new DataContext(connectionStringTwo))
          .Named<IDataContext>("CS2"); 
```

并解决它

```
var context = ContainerAccessor.Container().ResolveNamed<IDataContext>("CS1"); 
```

另一种方法是覆盖 DataContext ctor 并从该请求的共享位置读取配置。

# javascript - 你如何硬件加速 iOS 上的窗口滚动？

> ID：14570182
> 
> 赞同：1
> 
> 时间：2013-01-28T20:01:03.393
> 
> 标签：javascript, ios, css

我想自动平滑滚动到页面上的某个位置。所以我写了一个轮询器，离那个地方越来越近。它在台式计算机上运行良好，但只有在页面非常简单时才能在 iOS 上运行良好。如果我有一些适度的 DOM 结构和 CSS，滚动会变得非常慢。有什么方法可以硬件加速 iOS 上的滚动？

```
new PeriodicalExecuter(
    function(poller) {
        if (window.scrollY < 999) {
            window.scrollTo(0, window.scrollY + 1);
        } else {
            poller.stop();
        }
    },
    0
); 
```

这是使用[原型 JS](http://prototypejs.org/)。[PeriodicalExecuter](http://prototypejs.org/doc/latest/language/PeriodicalExecuter/)基本上是[window.setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)的包装器。通过使用 0 超时，我要求只要 CPU 空闲，我的代码块就会运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:37:53.997

如何使用：

CSS 属性：-webkit-touch-callout + 溢出：自动

使用这种组合，您可以快速滚动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T00:25:33.353

我相信`-webkit-overflow-scrolling:touch;`身体元素。

# apache - 如何将具有特定子文件夹的非 www 和 www 域重定向到根目录？

> ID：14570185
> 
> 赞同：2
> 
> 时间：2013-01-28T20:01:13.440
> 
> 标签：apache, .htaccess, mod-rewrite

**我有3个域名：**

```
www.domain1.com
www.domain2.com
www.domain3.com 
```

**它们都共享相同的子文件夹 URL：**

```
www.domain1.com/sub1/sub2
www.domain2.com/sub1/sub2
www.domain3.com/sub1/sub2 
```

**我需要将 sub2 及其下方的所有内容重定向到该站点的主页：**

```
www.domain1.com/sub1/sub2  --> www.domain1.com
domain1.com/sub1/sub2 --> www.domain1.com

www.domain2.com/sub1/sub2  --> www.domain2.com
domain2.com/sub1/sub2 --> www.domain2.com

www.domain3.com/sub1/sub2  --> www.domain3.com
domain3.com/sub1/sub2 --> www.domain3.com 
```

**这是我到目前为止所拥有的：**

```
RewriteCond %{HTTP_HOST} ^domain1\.com$ [NC,OR]
RewriteCond %{HTTP_HOST} ^www\.domain1\.com$ [NC,OR]
RewriteCond %{HTTP_HOST} ^domain2\.com$ [NC,OR]
RewriteCond %{HTTP_HOST} ^www\.domain2\.com$ [NC,OR]
RewriteCond %{HTTP_HOST} ^domain3\.com$ [NC,OR]
RewriteCond %{HTTP_HOST} ^www\.domain3\.com$ [NC]
RewriteRule ^sub1/sub2(.*)$ / [NC,L,R=301] 
```

**问题：**
它只适用于`www.domain1.com, www.domain2.com, www.domain3.com`.

它不适用于没有“www”的 URL。所以不起作用：`domain1.com/sub1/sub2`

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:40:19.923

你可以试试这个：

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} ^(www\.)?(domain1|domain2|domain3)\.com
RewriteCond %{REQUEST_URI}  ^/sub1/sub2/?  [NC]
RewriteRule .*   http://%{HTTP_HOST}/     [R=301,L] 
```

使用此方案重定向任何 URL

`http://www.domain1.com/sub1/sub2`或者`http://domain1.com/sub1/sub2`

到相应的根，删除段`/sub1/sub2`。

我假设`/sub1/sub2`是固定字符串。如果不是，请更换

```
RewriteCond %{REQUEST_URI}  ^/sub1/sub2/?  [NC] 
```

和

```
RewriteCond %{REQUEST_URI}  ^/[^/]+/[^/]+/?  [NC] 
```

`/sub1/sub2/`必须保留路径中包含 2 个文件夹的 URL 方案才能使规则生效。

# javascript - youtube iframe 播放器 - 更改播放列表的 javascript

> ID：14570187
> 
> 赞同：0
> 
> 时间：2013-01-28T20:01:17.610
> 
> 标签：javascript, youtube-api

有谁知道如何以及使用什么 javascript 来更改 iframe youtube 播放器的播放列表？

我已经搜索了网络，但似乎无法找到一段简单的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T23:05:53.460

我相信您正在寻找 YouTube Player API 的[loadPlaylist()](https://developers.google.com/youtube/iframe_api_reference#loadPlaylistObj)函数。

# javascript - 将变量的值更改为可能已经存在的值

> ID：14570189
> 
> 赞同：0
> 
> 时间：2013-01-28T20:01:22.027
> 
> 标签：javascript, variables

如果我想给一个变量一个它很有可能已经拥有的值，我应该检查它是否存在并避免不必要的覆盖，还是应该这样做并避免检查？因此（在此处使用 JavaScript），哪个选项对处理器的工作量较小：

```
foo = "foo"; //foo might already be set to "foo" 
```

或者

```
if(foo != "foo") {
    foo = "foo";
} 
```

这里需要注意两点：首先，虽然我目前正在使用 JavaScript，但如果它们不同，我会对其他语言的答案感兴趣；其次，我很可能会使用比“foo”长得多的字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:11:54.143

简单的分配总是比条件检查成本更低。话虽这么说，这是如此微小，以至于它真的无关紧要。

在一些更复杂的情况下，比如如果你只想分配一些东西，`foo`如果它还没有值，你可以使用逻辑或 ( `||`) 来做到这一点：

```
var foo;
// ... some code that may initialize foo ...
foo = foo || 'someDefault'; 
```

`foo`请注意，如果它有任何“假”值，这也将默认为： `0`、空字符串、`NaN`、`null`、`undefined`或`false`。如果这些值是可以接受的，那么您希望使用`typeof`第三条语句来代替：

```
var foo;
// ... some code that may initialize foo ...
foo = typeof foo === 'undefined' ? 'someDefault' || foo; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:42:45.557

可以将变量设置为可能已经设置的值。

```
foo = "foo"; 
```

# html - CSS/HTML：如何使这些图像水平对齐？

> ID：14570192
> 
> 赞同：1
> 
> 时间：2013-01-28T20:01:29.763
> 
> 标签：html, css

我遇到的问题是我的社交媒体图像/链接是垂直显示的。我宁愿让它水平显示。

jsFiddle：http: [//jsfiddle.net/JordanSimps/DQmm6/](http://jsfiddle.net/JordanSimps/DQmm6/)

* * *

索引.html

```
<div id="wrapper2">
    <div id="twitter">
            <a href="http://www.twitter.com" title="Twitter" id="twit">

            </a>
            <a href="http://www.facebook.com" title="Facebook">
                <div id="ff">
                </div>
            </a>
            <a href="http://www.youtube.com" title="YouTube">
                <div id="youtube">
                </div>
            </a>
            <a href="http://www.vimeo.com" title="Vimeo">
                <div id="vimeo">
                </div>
            </a>
            <a href="http://www.addthis.com" title="AddThis">
                <div id="addthis">
                </div>
            </a>
            <a href="http://www.dribble.com" title="Dribble">
                <div id="dribble">
                </div>
            </a>
    </div>
</div> 
```

样式.css

```
/* Social Media Links */
    #wrapper2 {
        right: 34%;
        height: 10.850em;
        position: relative;
        float: right;
    }

    #twitter {
        position: absolute;
        list-style-type: none;
        bottom: 0;
        width: 225px;
        height: auto;
        overflow: hidden;
    }

    #twit {
        height: 32px;
        width: 32px;
        background-image: url(http://a.pictureupload.us/8067689795106d571328a7.jpg);
        background-repeat: no-repeat;
        background-color: transparent;
        background-position: top;
    }

    #twit:hover {
        background-position: bottom;
    }

    #ff {
        height: 32px;
        width: 32px;
        background-image: url(http://a.pictureupload.us/12635610355106d56e2c160.jpg);
        background-repeat: no-repeat;
        background-color: transparent;
        background-position: top;
    }

    #ff:hover {
        background-position: bottom;
    }

    #youtube {
        height: 32px;
        width: 32px;
        background-image: url(http://a.pictureupload.us/18402255565106d576a5d84.jpg);
        background-repeat: no-repeat;
        background-color: transparent;
        background-position: top;
    }

    #youtube:hover {
        background-position: bottom;
    }

    #vimeo {
        height: 32px;
        width: 32px;
        background-image: url(http://a.pictureupload.us/11318810305106d57415681.jpg);
        background-repeat: no-repeat;
        background-color: transparent;
        background-position: top;
    }

    #vimeo:hover {
        background-position: bottom;
    }

    #addthis {
        height: 32px;
        width: 32px;
        background-image: url(http://a.pictureupload.us/15195458355106d56859b0c.jpg);
        background-repeat: no-repeat;
        background-color: transparent;
        background-position: top;
    }

    #addthis:hover {
        background-position: bottom;
    }

    #dribble {
        height: 32px;
        width: 32px;
        background-image: url(http://a.pictureupload.us/8852823855106d56b1b08a.jpg);
        background-repeat: no-repeat;
        background-color: transparent;
        background-position: top;
    }

    #dribble:hover {
        background-position: bottom;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:05:30.470

```
#twitter a { display:inline-block; vertical-align:text-top } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:07:44.737

我认为您只是对 div 名称有所了解（twitter 似乎包含了其他所有内容；））但以下内容在小提琴中起作用：

```
#twitter div {
    display:inline-block;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T20:08:38.203

我已将此添加到您的样式表中。

```
 #twitter a{
        float: left;
    } 
```

你也可以让它浮动：对；取决于你想让它看起来如何。

希望有帮助，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T01:18:04.700

在所有标签中使用 float:left 并在浮动元素上给出固定宽度，然后在父 div twitter 中使用 overflow:hidden。

```
.twitter {
    overflow: hidden;
}

.twitter a {
    float: left;
    width:fixed width in px unit
} 
```

# r - 如何在Mac上将音频导入R？

> ID：14570193
> 
> 赞同：0
> 
> 时间：2013-01-28T20:01:33.350
> 
> 标签：r, macos, audio

我最近从 PC 换成了 mac，在尝试将录制的音频输入 R 时遇到了麻烦。

在 PC 上，音频需要位于“我的文档”中，以便`tuneR`包使用以下命令找到我的音频：

```
readWave('audio.wav') 
```

但是，我无法找到音频需要在 Mac 上以便 R 找到它的正确目录。

到目前为止，我已将音频文件复制到每个文件夹中，但仍然没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:06:55.960

音频可以在您喜欢的任何目录中，您只需告诉 R 确切的位置。尝试写出文件的完整路径，例如`readWave('/Users/EmmaL/audiofiles/audio.wav')`. 要查找路径，请在 Finder 中查找文件，右键单击，选择`Get Info`，然后检查 General -> Where：

# c++ - 使用 WM_DRAWITEM 闪烁

> ID：14570196
> 
> 赞同：1
> 
> 时间：2013-01-28T20:01:36.693
> 
> 标签：c++, winapi

似乎我无法通过所有者绘制控件解决此问题。我已经对状态控件进行了超分类。我正在尝试自定义但仍保留相同的功能。基本上，我想改变背景和文字。我正在使用 Direct2d（或 ID2D1DCRenderTarget 接口）进行绘图。我已经使用 WM_NCPAINT 成功更改了背景；不过，您可以根据需要使用 WM_ERASEBKGRND。然而，这两种方法在我的实验中都充当了对照，并且仍然发生闪烁。**此外，当 SB_SETTEXT 的 WPARAM 未设置**为 SBT_OWNERDRAW时，不会发生闪烁。因此，我得出一个结论，WM_DRAWITEM 是罪魁祸首。无论如何我可以用所有者绘制状态栏解决这个闪烁的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:53:10.817

如果您为您的控制打开双缓冲，您可以避免闪烁。

设置 WS_EX_COMPOSITED 扩展样式： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ff700543 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ff700543(v=vs.85).aspx)

例如在处理 WM_CREATE 时，调用（WTL 或 MFC）：

```
ModifyStyleEx(0, WS_EX_COMPOSITED); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T21:05:30.450

嗯，好像我想通了。当对状态栏进行超分类时，请遵循这些设置以避免闪烁。

**注意：这仅在视觉样式关闭的情况下进行了测试。SetWindowTheme(hWndStatus, L"", L""); 此外，父窗口必须在窗口创建期间在样式参数中设置 WS_CLIPCHILDREN。

1：覆盖 WM_SIZE。调用 InvalidateRect(m_hWnd, NULL, TRUE) 并返回 0 ，除非您想要默认大小；在这种情况下，调用 CallWindowProc。

2：覆盖 WM_ERASEBKGND 并返回 -1。

3：覆盖 WM_NCPAINT 并将您的绘图代码放在这里。

处理 WM_NCPAINT。人们似乎很难理解如何处理 WM_NCPAINT。这是我的做法。

```
if (wParam == 1) {
    hdc = GetWindowDC(m_hWnd);
} else {
    hdc = GetDCEx(m_hWnd, (HRGN) wParam, DCX_WINDOW | DCX_INTERSECTRGN | DCX_CACHE);
} 
```

然后用 DC 画图。

4：在父过程（WndProc 或其他）中，使用状态栏的句柄调用 SetWindowPos(..., SWP_DRAWFRAME)。这将调整您的状态栏的大小。

5：通过 SendMessage(hWndStatusbar, SB_SETPARTS, 1, (LPARAM) &parts) 发送消息；

6：通过 SendMessage(hWndStatusbar, SB_SETTEXT, LOBYTE(0) | SBT_OWNERDRAW, L"Ready") 发送消息。WM_DRAWITEM 的示例代码：

```
...
WM_DRAWITEM:
LPDRAWITEMSTRUCT lpDIS = (LPDRAWITEMSTRUCT) lParam;

m_pFramework->m_pD2D1RenderTarget->BindDC(lpDIS->hDC, &lpDIS->rcItem);

m_pFramework->m_pD2D1RenderTarget->BeginDraw();

m_pFramework->m_pD2D1RenderTarget->Clear(D2D1::ColorF(D2D1::ColorF::CadetBlue));

D2D1_RECT_F rf = D2D1::RectF(
    PixeltoDipX(lpDIS->rcItem.left),
    PixeltoDipY(lpDIS->rcItem.top),
    PixeltoDipX(lpDIS->rcItem.right),
    PixeltoDipY(lpDIS->rcItem.bottom)
    );

m_pFramework->m_pD2D1RenderTarget->DrawText(
    (LPCWSTR) lpDIS->itemData,
    wcslen((WCHAR*) lpDIS->itemData) + 1,
    m_pFramework->m_pTextFormat,
    rf,
    m_d2dCaptionTextColor
    );

m_pFramework->m_pD2D1RenderTarget->EndDraw();
break;
.... 
```

这应该停止闪烁。另外，不要在父级的 WM_SIZE 中调用 InvalidateRect(hWndStatus, NULL, TRUE)。这是它闪烁的主要原因。

# xcode - 无法更改/删除/提交/放弃当前分支

> ID：14570204
> 
> 赞同：1
> 
> 时间：2013-01-28T20:02:17.680
> 
> 标签：xcode, git, commit, git-branch

我从正在处理的 git 存储库创建了一个本地分支。我已经这样做了很多次，但是由于某种原因，创建了分支并在我的代码中放置了一堆随机垃圾。（如随机文本和箭头）。

所以我决定擦除分支并尝试重新创建它，因为我以前从未见过它。我去切换分支，它不会让我因为“修改了工作副本”。我试图提交更改，但它说没有提交。

然后我在终端上尝试提交、丢弃、删除分支、更改分支。所有这些都没有引起注意（“没有什么可以提交/丢弃”或“无法删除/更改未修改的当前分支”）。

我现在卡住了，无法更改分支、提交“更改”、放弃更改或删除分支。有什么想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-28T21:03:39.300

请执行下列操作：

```
git reset --hard HEAD
git checkout master
git branch -D <branch you want to delete> 
```

这将重置您当前拥有的所有更改。然后将检查主分支以继续工作。最后删除要删除的分支。

# c++ - 如何在不属于家庭的班级之间共享枚举？

> ID：14570207
> 
> 赞同：1
> 
> 时间：2013-01-28T20:02:39.020
> 
> 标签：c++, oop, class, enums

这是一个非常简单的问题，但我不知道答案。

```
 class a
   {
    public:
    enum xxx {one, two}
   }

   class b
   {
    //cant inherit from a
    //what I want to do is:
    xxx object = one;
   } 
```

如何使枚举在 b 类中为人所知？当然，我可以在两个类中声明它，但那是不干净的。正如我所说，我不能继承，因为这两个类做完全不同的事情并且应该是独立的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T20:04:51.203

范围解析运算符：

```
a::xxx object; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T20:04:30.707

由于它是公开的，您应该能够通过完全限定名称访问它：

```
a::xxx object; 
```

值将以相同的方式使用`a::one`，`a::two`等等。

编辑：有关您是否可以进行内联初始化的其他答案，请参阅评论中的讨论。

# asp.net - 全局 ASAX 中的错误：文件不存在

> ID：14570211
> 
> 赞同：7
> 
> 时间：2013-01-28T20:02:45.293
> 
> 标签：asp.net, debugging

我试图了解发生了什么错误，将我发送到 Global ASAX OnError 处理程序。

```
using System;
using System.Web;

namespace GLSS.Components.HttpModules
{
  public class ExceptionModule : System.Web.IHttpModule 
  {
    private void OnError(object sender, EventArgs e)
    {
      HttpContext context = HttpContext.Current;

      //get the last error
      Exception ex = context.Server.GetLastError();
      if(ex.InnerException.GetType().ToString() == "CSLA.DataPortalException")
        ex = ex.InnerException; 
```

这是我的异常转换为字符串

```
HttpContext.Current.Server.GetLastError().Message
"File does not exist."
HttpContext.Current.Server.GetLastError().StackTrace
"   at System.Web.StaticFileHandler.GetFileInfo(String virtualPathWithPathInfo, String physicalPath, HttpResponse response)
at System.Web.StaticFileHandler.ProcessRequestInternal(HttpContext context)
at System.Web.DefaultHttpHandler.BeginProcessRequest(HttpContext context, AsyncCallback callback, Object state)
at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)" 
```

如何确定导致此错误的代码行？我试图将我的 Debug 选项设置为在错误发生时中断，但它没有，我仍然在 ONERROR 全局处理程序中结束。

一件事是我看到代码假定会有一个内部异常，这似乎是 NULL 并导致处理程序中的第二个错误。

我假设错误发生在编译代码的某个地方。我检查了 Web.Config，唯一提到的路径是一个日志路径，这似乎有效并且日志记录似乎正在工作。

**更新** 我在这里找到了一些额外的信息：

[如何解决异常“文件不存在”？](https://stackoverflow.com/questions/3705057/how-to-solve-exception-file-does-not-exist)

当我在“立即”窗口中检查时：

```
? HttpContext.Current.Request.Url.ToString()
"http://localhost:2322/favicon.ico" 
```

然而，令我困惑的是，我使用“在文件中查找”搜索我的整个解决方案以查找 favicon.ico，但我没有看到任何参考。

当我没有看到对图标文件的引用时，为什么会收到找不到图标文件的错误消息？我猜有些组件正在使用它？但是为什么要在网络根目录中寻找它呢？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-04T15:38:49.317

大多数现代浏览器都盲目地发出对 favicon.ico 的请求，如果没有 favicon（这是正确的行为） ，他们会期待*404（未找到文件）。*[您可以在下面找到 HTML5 工作草案中关于链接类型“icon”](http://www.w3.org/TR/2011/WD-html5-20110525/links.html#rel-icon)的引用 ：

> 在没有带有 icon 关键字的链接的情况下，对于通过 HTTP 或 HTTPS 获取的文档，用户代理可能会尝试获取并使用具有绝对 URL 的图标，该绝对 URL 是通过将 URL /favicon.ico 与文档地址解析获得的，就好像该页面已使用 icon 关键字声明了该图标。

您看到异常的原因是配置为使用*托管/集成管道模式*的 Web 开发服务器或 IIS将所有请求都通过*Global.asax*（包括错误）。

您可以尝试通过创建以下指向 favicon 的虚拟链接来阻止浏览器发出请求：

```
<html>
    <head>
        <link rel="shortcut icon" href="#" />
        ...
    </head>
...
</html> 
```

您也可以尝试以下方法之一：

*   在方法的开头添加以下行`RegisterRoutes`：

    `routes.IgnoreRoute("favicon.ico");`

    甚至更扩展的版本：

    `routes.IgnoreRoute("{*favicon}", new {favicon=@"(.*/)?favicon.ico(/.*)?"});`

*   为自己创建一个 favicon 的空文件
*   通过检查*404*和/favicon.ico`HttpException.GetHttpCode()`来过滤掉*错误*。*`((System.Web.HttpApplication)Sender).Context.Request.Url`*

# ios - 如何将 NSMutableArray 转换为 CLLocationCoordinate2D

> ID：14570213
> 
> 赞同：0
> 
> 时间：2013-01-28T20:03:03.587
> 
> 标签：ios, nsmutablearray, coordinates, cllocation, valueconverter

我有 NSMutableArray：

```
 userCoordinates = [[d objectForKey:@"geo"] objectForKey:@"coordinates"];

        NSLog(@"%@",userCoordinates); 
```

NSLog 显示：

```
(
    "19.365367",
    "-99.159887"
) 
```

然后我需要将此数组转换为 CllocationCoordinate2D 以使用它来创建注释。对不起我的英语。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:06:03.113

您的数组似乎包含两个`NSString`对象 - 要将它们转换为适当的浮点数，请使用以下`doubleValue`方法`NSString`：

```
double lat = [(NSString *)[userCoordinates objectAtIndex:0] doubleValue];
double lon = [(NSString *)[userCoordinates objectAtIndex:1] doubleValue];

CLLocationCoordinate2D coords = (CLLocationCoordinate2D){ lat, lon }; 
```

# python - 要列出的字符串，python

> ID：14570217
> 
> 赞同：2
> 
> 时间：2013-01-28T20:03:19.443
> 
> 标签：python, string, list

假设我在文件中有这样的东西：

```
[[(A,B), (B,C)],[(x,y), (z,v)]] 
```

我希望这是一个 python 列表列表。我怎么做？

最后，我希望能够遍历这个数组的行和列，并获取每对相邻的值来比较它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T20:47:10.230

更深奥的做法：

```
import yaml
from string import maketrans

s = "[[(A,B), (B,C)],[(x,y), (z,v)]]"    
yaml.load(s.translate(maketrans("()", "[]"))) 
```

出去：

```
[[['A', 'B'], ['B', 'C']], [['x', 'y'], ['z', 'v']]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T21:15:00.997

这有效：

```
>>> import re,ast
>>> st='[[(A,BC), (B,C)],[(x,y), (z,v)]]'
>>> ast.literal_eval(re.sub(r'(\w+)',r"'\1'",st))
[[('A', 'BC'), ('B', 'C')], [('x', 'y'), ('z', 'v')]] 
```

如果您确实想要 LoLoL 而不是 LoLoT（如上所述），请执行以下操作：

```
def rep(match):
    if match.group(1)=='(': return '['
    if match.group(1)==')': return ']'
    return "'{}'".format(match.group(1))

st='[[(A,B), (B,C)],[(x,y), (z,v)]]'
st=re.sub(r'(\w+|[\(\)])', rep,st)
>>> ast.literal_eval(st)
[[['A', 'B'], ['B', 'C']], [['x', 'y'], ['z', 'v']]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T20:10:19.887

从文件中读取该行后：

```
import ast

parsed_list = ast.literal_eval(line) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T20:30:12.920

纯蟒...

```
s = "[[(A,B), (B,C)],[(x,y), (z,v)]]"

print s

s = filter(None, s[1:-1].replace(",[", "").replace("[", "").replace(" ", "").split(']'))

for i,t in enumerate(s):
    t = filter(None, t.replace(",(", "").replace("(", "").split(')'))
    t = [tuple(x.split(",")) for x in t]
    s[i] = t

print s 
```

输出：

```
>>> 
[[(A,B), (B,C)],[(x,y), (z,v)]]
[[('A', 'B'), ('B', 'C')], [('x', 'y'), ('z', 'v')]]
>>> 
```

# backup - 我可以使用试运行的 rsync 日志文件作为实际运行的输入吗？

> ID：14570220
> 
> 赞同：2
> 
> 时间：2013-01-28T20:03:25.983
> 
> 标签：backup, rsync, backup-strategies

我喜欢rsync。我可以看到将首先删除哪些文件。但是如果在备份过程中，源磁盘的某个扇区发生故障怎么办？文件可能会从不应该删除的目标中删除。但是，如果我先检查日志文件中的所有删除文件，然后将日志文件用作 rsync 的指令，那么备份过程中的源磁盘故障应该会导致数据丢失的可能性较低。

我已阅读手册页并得出结论，答案是否定的。如果不是 rsync，那又是什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-06T12:45:44.997

您可以使用以下方法减轻源磁盘故障风险

```
 --delete-after          receiver deletes after transfer, not during 
```

如果在复制过程中产生 IO 错误，则不会删除文件。

但是为了确保备份的完整性，我认为正确的方法是使用：

```
 --only-write-batch=FILE like --write-batch but w/o updating destination 
```

这会将差异写入文件。创建批处理后，将其移动到目标计算机，并使用以下方法应用差异：

```
 --read-batch=FILE       read a batched update from FILE 
```

# iphone - 在 UITableView 更新期间 UIView 框架可以动画吗？

> ID：14570221
> 
> 赞同：0
> 
> 时间：2013-01-28T20:03:31.527
> 
> 标签：iphone, uitableview, animation

我有一个包含相当复杂单元格的表格视图。该单元格包含一个按钮，当按下该按钮时，应展开该单元格并显示一些额外的控件。我认为这会很简单，所以我编写了以下代码（在我从 UITableViewCell 派生的类中）：

```
self.extraView = [[MyView alloc] initWithFrame:CGRectMake(0,100,300,200)];
self.extraView.clipsToBounds = YES;
[self addSubview:self.extraView];

self.extraView.transform = CGAffineTransformMakeScale(1, 0.1f);
[UIView animationWithDuration:0.5 animations:^{
    [tableView beginUpdates];
    [tableView endUpdates];
    self.extraView.transform = CGAffineTransformIdentity;
}]; 
```

令人惊讶的是，这会`extraView`在屏幕上短暂闪烁，然后消失。如果我删除对的调用`beginUpdates`，`endUpdates`然后`extraView`完全按照我的预期进行动画处理。但是，表格单元格不够大，无法显示它。我尝试将 alpha 设置为 0，然后在表更新期间将其淡入，这似乎工作正常。不幸的是，我应该让`extraView`生长在适当的位置而不褪色。

我尝试过各种修改方式，`extraView`例如更改框架，但表格更新总是会产生一些副作用。我还尝试在完成处理程序中链接比例更改，这当然也不起作用。我认为这是因为执行完成块时表格视图没有完成动画。

有没有办法在表格更新期间为单元格中的视图框架设置动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:49:42.307

看来答案是否定的。至少，在表格视图更新期间修改视图框架时，我没有发现任何看起来视觉上正确的东西。我现在要做的是稍等片刻，然后扩大视图的框架。这是代码的样子：

```
extraView.alpha = 0; // hide the view immediately after adding it
[tableView beginUpdates];
[tableView endUpdates];
[UIView animateWithDuration:0.5 animations:^{
    button.alpha = 0; // fade out old button
} completion:^(BOOL finished) {
    extraView.alpha = 1; // reappear, but not fading in
    extraView.transform = CGAffineTransformMakeScale(1, 0.01f);
    [UIView animateWithDuration:0.5 animations:^{
        extraView.transform = CGAffineTransformIdentity; // animate scale back to original size
    }];
}]; 
```

这不完全是我试图创造的效果，但它是我能够得到的最接近的效果。我将其发布为答案，以防其他人遇到类似问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T08:26:15.730

我有一个类似的问题，并且想通过基于选择的动画打开/关闭和更改单元格中的特定元素。

我首先为 uitableviewcell 创建了一个子类。

每个 tableviewcell 都有一个 open 和 close 方法，它执行背景颜色和大小的动画（除其他外）。

tableviewcell 的 open 和 close 方法如下所示：

```
- (void)open {

        [UIView animateWithDuration:0.3
                         animations:^{
                             [self.customBackgroundView setHeight:76];
                             self.deleteButton.alpha = 1;
                             self.selectedIndicator.transform = CGAffineTransformMakeRotation(M_PI);
                             [self.selectedIndicator setY:60];
                         }

         ];

}

- (void)close {
        [UIView animateWithDuration:0.3
                         animations:^{
                             [self.customBackgroundView setHeight:40];
                             self.deleteButton.alpha = 0;
                             self.selectedIndicator.transform = CGAffineTransformMakeRotation(0);
                             [self.selectedIndicator setY:24];
                         }

         ];
} 
```

它还有一个 setSelected 方法，所以当单元格被选中时，它会打开：

```
- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];
    if (selected) {
        [self open];
    } else {
        [self close];
    }
} 
```

现在，唯一剩下的就是确保在选择此单元格时关闭其他单元格。并调用 tableview beginUpdates 和 tableview endUpdates：

```
 - (void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    {

            if (_currentSelection == indexPath.row) {
                _currentSelection = -1;
                SOColumnTableViewCell *cell = (SOColumnTableViewCell *)[tableView cellForRowAtIndexPath:indexPath];
                [cell close];
            } else {
                _currentSelection = (int)indexPath.row;

            }
            [tableView beginUpdates];
            [tableView endUpdates];

        }

    } 
```

# entity-framework - ObjectContext.Attach 生成不正确的实体键

> ID：14570222
> 
> 赞同：1
> 
> 时间：2013-01-28T20:03:31.610
> 
> 标签：entity-framework

我正在使用 .NET 4.0 和 EF POCO。我有一个概念模型，其中一部分显示在图像中。一切正常，除了一件我几乎忙了 2 天但仍然无法正常工作的事情！

在我的概念模型中，WebShop 可以有一个或多个相关的 WebShopCategory 实例。每个 WebShopCategory 将 WebShop 与 Category 相关联，使我能够为 WebShop/Category 组合指定其他属性。

在此处查看图片：http: [//postimage.org/image/djrn4xh37/](http://postimage.org/image/djrn4xh37/)

在创建新的 WebShop 实例时，我当然需要保存它，我在使用 EF ObjectContext 的 WebShopRepository 的 Update 方法中执行此操作，如下面的代码所示：

```
using (MyEntities entities = new MyEntities()) {
    if (webShop.ID == 0) {
        entities.Countries.Attach(webShop.Country);

        foreach (PaymentMethod paymentMethod in webShop.PaymentMethods) {
            entities.PaymentMethods.Attach(paymentMethod);                    
        }

        foreach (QualityMark qualityMark in webShop.QualityMarks) {
            entities.QualityMarks.Attach(qualityMark);
        }

        foreach (WebShopCategory category in webShop.Categories) {                
            entities.Categories.Attach(category.Category);
        }

        entities.WebShops.AddObject(webShop);                    
    }

    entities.SaveChanges();
} 
```

需要注意的一点是，所有相关项都已存在于数据源中。因为它们还没有在 ObjectContext 中，所以我在将创建的 WebShop 添加到 ObjectContext 之前附加了它们。这似乎按预期工作：所有已附加的实体都有一个正确的 EntityState.Unchaged 状态。添加的 WebShop 处于已添加状态，这也是正确的。

但是，当我附加类别实例 (category.Category) 时，EF 会给出一个异常，指出对象上下文中已经有一个具有相同键的项目。我找到了这个 ObjectStateEntry 实例，我注意到 EntityKey 只包含 EntitySet 名称，而不是键中的 ID。其他已经添加到 context 的 EntityKeys 的形式都是`EntitySetName;ID=value`

对我来说，EF似乎无法正确确定实体密钥，因为在出​​错的地方我已经检查并确保添加的类别确实有效：它是系统中已知的类别并将其主键 (ID) 值设置为 1（这是系统中第一个添加的类别）。

我已经尝试了很多方法来解决这个问题，但无法让它发挥作用。任何帮助将不胜感激！

提前非常感谢大家！

# javascript - javascript检测用户是离开网站还是只是刷新/点击了链接

> ID：14570223
> 
> 赞同：1
> 
> 时间：2013-01-28T20:03:38.160
> 
> 标签：javascript, jquery, onbeforeunload

我正在使用 nodejs 服务器来显示在线用户，但即使用户单击链接或刷新页面，它也会激活断开连接的功能，我试图绕过这一点，仅当用户关闭选项卡时才向服务器发送消息/window 使用以下代码：

```
var socket = io.connect('http://example.com:8000');

socket.emit('started', { username: "TestUser", });

var clicked = false;

$(document).ready(function() {
    $("a[href]").click(function() {
        clicked = true;
    });

    $(document).bind('keypress keydown keyup', function(e) {
        if(e.which === 116) {
            clicked = true;
        }
        if(e.which === 82 && e.ctrlKey) {
            clicked = true;
        }
    });
});

window.onbeforeunload = function(e){
    if(!clicked) {
        socket.emit('userDisconnected', { user: "TestUser" });
    }
}; 
```

这适用于用户单击链接以及用户按下 F5 时，但我如何检测他们是否单击了浏览器刷新按钮

我基本上希望仅在用户离开我的网站时发送 userDisconnected 消息

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:55:45.443

不可能，如果是的话，它可能会被认为是一个错误。但是你在这里做的很聪明，寻找关键事件。

根据您实际想要完成的任务，您可以采用另一种方式。在每个窗口卸载时通过您的套接字发送通知。通过在该套接字上设置超时事件将该套接字置于待机状态。让您的页面在您的网站内刷新或导航时也发出重新连接信号（说明我回来了）。如果处于待机状态的套接字在 5 秒（或其他数字）内未收到此信号，则关闭服务器上的连接。如果是，请取消超时。

# php - 在php中创建文本框

> ID：14570225
> 
> 赞同：-2
> 
> 时间：2013-01-28T20:03:40.633
> 
> 标签：php, image-processing

有没有办法在php内存中创建一个预定义宽度和高度的文本框，并用自动换行将文本存储在其中，然后逐行返回并存储在变量数组中。

我实际上是在尝试实现类似于 imagettfbbox 的东西，但我不想返回尺寸，而是想逐行返回文本；所以我可以知道特定文本或句子在转换为图像后在哪一行和什么位置。

请分享你的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:13:39.603

您可以使用 chunk_split() 来包装一个长字符串，然后将字符串“分解”为一个数组，如下所示：

```
$mylongstring = 'a very long text etc';

// Place a 'newline' character every 50 characters
$mylongwrappedstring = chunk_split($mylongstring, 50);

// Split the lines to an array
$lineArray = explode("\n", $mylongwrappedstring); 
```

[http://php.net/manual/en/function.chunk-split.php](http://php.net/manual/en/function.chunk-split.php)

我会把图像处理/生成留给你:)

# mysql - SQL 在 PHP 中失败，但在命令行 mysql 中有效

> ID：14570241
> 
> 赞同：0
> 
> 时间：2013-01-28T20:04:47.543
> 
> 标签：mysql

SQL 代码：

```
SELECT id, album_date AS timestamp, CONCAT((SELECT detail_value
FROM people_db.user_details_tbl WHERE detail_field = 'first_name' AND user_id = pictures_db.albums.owner), ' uploaded pictures!') AS title_html 
FROM pictures_db.albums 
WHERE id IN 
(SELECT DISTINCT(album_id) 
FROM pictures_db.album_pics 
WHERE pic_id IN 
    (SELECT DISTINCT(picture_id) 
    FROM pictures_db.picture_access_tbl 
    WHERE grantee_group_id IN 
        (SELECT group_id 
        FROM people_db.group_membership_tbl
        WHERE member_id = '2'
        )
     )
); 
```

PHP代码：

```
$albums_sql = mysql_query("SELECT id, album_date AS timestamp, CONCAT((SELECT detail_value 
    FROM people_db.user_details_tbl 
    WHERE detail_field = 'first_name' AND user_id = pictures_db.albums.owner), ' uploaded pictures!') AS title_html 
    FROM pictures_db.albums 
    WHERE id IN (
          SELECT DISTINCT(album_id) 
          FROM pictures_db.album_pics 
          WHERE pic_id IN (
              SELECT DISTINCT(picture_id) 
              FROM pictures_db.picture_access_tbl 
              WHERE grantee_group_id IN (
                  SELECT group_id 
                  FROM people_db.group_membership_tbl 
                  WHERE member_id = '2'
                  )
               )
             )") or die(mysql_error()); 
```

当 PHP 运行时，错误是：表 'pictures_db.albums' 不存在

我尝试以同一用户身份执行，重新授予所有权限，甚至刷新权限。在 shell 中工作，而不是在 PHP 中。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:08:52.680

错误信息很清楚：MySQL 看到数据库 pictures_db 但看不到表相册。

这可能是由于权限，但您似乎已经彻底检查过了。

另一个可能的原因是您在 PHP 中使用的连接字符串指向的数据库实例与您在命令行中使用的数据库实例不同。也许连接字符串仍然指向不同的环境，例如 DEV，但您处于 QA 或指向数据库的旧测试版本？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:08:47.710

你`mysql_select_db()`在运行查询之前打电话吗？

```
mysql_select_db('pictures_db'); 
```

# ios - iOS在未来创建日期忽略夏令时

> ID：14570251
> 
> 赞同：10
> 
> 时间：2013-01-28T20:05:13.497
> 
> 标签：ios, nsdate, nscalendar, nstimezone

我正在尝试使用日期并在未来创建日期，但夏令时不断妨碍我的时间。

这是我将日期移至下个月第一天午夜的代码：

```
+ (NSDate *)firstDayOfNextMonthForDate:(NSDate*)date
{
    NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    calendar.timeZone = [NSTimeZone systemTimeZone];
    calendar.locale = [NSLocale currentLocale];

    NSDate *currentDate = [NSDate dateByAddingMonths:1 toDate:date];
    NSDateComponents *components = [calendar components:NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit
                                                    fromDate:currentDate];

    [components setDay:1];
    [components setHour:0];
    [components setMinute:0];
    [components setSecond:0];

    return [calendar dateFromComponents:components];
}

+ (NSDate *) dateByAddingMonths: (NSInteger) monthsToAdd toDate:(NSDate*)date
{
    NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    calendar.timeZone = [NSTimeZone systemTimeZone];
    calendar.locale = [NSLocale currentLocale];

    NSDateComponents * months = [[NSDateComponents alloc] init];
    [months setMonth: monthsToAdd];

    return [calendar dateByAddingComponents: months toDate: date options: 0];
} 
```

当我在某个日期迭代地运行该方法时，它给出了日期：

```
2013-02-01 00:00:00 +0000
2013-03-01 00:00:00 +0000
2013-03-31 23:00:00 +0000 should be 2013-04-01 00:00:00 +0000
2013-04-30 23:00:00 +0000 should be 2013-05-01 00:00:00 +0000 
```

我最初的想法是不使用`systemTimeZone`，但这似乎并没有什么不同。关于如何使时间恒定而不考虑夏令时变化的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T21:15:40.417

对于给定的日历日期/时间，作为一般规则，不可能预测所代表的实际时间（自纪元以来的秒数）。时区改变，DST 规则改变。这是生活中的事实。DST 在澳大利亚有一段饱受折磨的历史。DST 规则在以色列非常难以预测。DST 规则最近在美国发生了变化，这让存储秒数而不是日历日期的微软非常头疼。

`NSDate`当你的意思是永远不要保存`NSDateComponents`。如果您的意思是“2013 年 5 月 1 日在伦敦”，则将“2013 年 5 月 1 日在伦敦”保存在您的数据库中。然后计算`NSDate`尽可能接近实际事件的off。`NSDateComponents`如果您关心日历的事情（如月份），请使用所有日历数学。`NSDate`如果您真的只关心秒数，请只做数学。

编辑：有关许多非常有用的背景，请参阅[日期和时间编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DatesAndTimes/DatesAndTimes.html)。

还有一个关于日历组件的旁注：当我说“2013 年 5 月 1 日在伦敦”时，这并不意味着“5 月 1 日的午夜”。不要去添加你并不真正想要的日历组件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T20:54:19.003

请记住，您的程序打印到日志的是 GMT 时间，而不是您的本地时间。因此，在您当地时区切换到 DST 之后的日期，GMT 将偏移一小时是正确的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-03T11:42:40.623

我遇到了同样的问题，人们说这实际上不是问题（正如我在一些相关线程上看到的那样）并没有帮助解决这种情况。每当你必须处理时区和 DST 时，这种问题就会很痛苦，而且我总觉得我每次都必须重新学习它。

我尽可能地处理纪元时间（它是一个图表应用程序），但有时我需要使用 NSDate 和 NSCalendar（即，用于格式化轴标签，以及用于标记日历月、季度和年）。我为此苦苦挣扎了一天左右，试图在日历等上设置不同的时区。

最后，我发现我的应用程序委托中的以下代码行有很大帮助：-

```
// prevent DST bugs by setting default timezone for app
    if let utcZone = NSTimeZone(abbreviation: "UTC") {
        NSTimeZone.setDefaultTimeZone(utcZone)
    } 
```

最重要的是，必须对源数据进行清理，因此每当我使用`NSDateFormatter`传入数据时，我确保将其时区设置为数据源的正确时区（在我的情况下，它是 GMT）。这消除了数据源中令人讨厌的 DST 问题，并确保所有生成的 NSDates 都可以很好地转换为纪元时间，而无需担心 DST。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-26T15:22:46.097

另一种解决方案是检查日期的**小时**部分，如果它是 1 或 23（而不是 0），只需分别使用 `Calendar.current.date(byAdding: .hour, value: -1, to: currentDate)` 或更改日期`Calendar.current.date(byAdding: .hour, value: 1, to: currentDate)`。

# c# - 如何在 Web 应用程序的子目录中初始化一些类

> ID：14570252
> 
> 赞同：1
> 
> 时间：2013-01-28T20:05:13.760
> 
> 标签：c#, asp.net, global-asax

我正在开发一个现有的 Web 应用程序，我在 Web 项目下创建了一个名为 Portal 的文件夹，这个文件夹在 IIS 中被转换为一个应用程序，它现在有自己的 web.config。在 Web 项目中有一个 Global.asax，它初始化了一些我现在需要从转换为 Application 的文件夹中使用的类，问题是该文件夹没有从 web（父）全局 asax 中获取初始化. 有没有办法在应用程序启动时添加第二个全局 asax 或任何其他方式来初始化门户（子文件夹应用程序）的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:32:57.277

这绝不是一个答案，但我建议你不要跳过阅读这些链接。每个人都可能有一些东西。多个应用程序共享同一个会话将是一个挑战。

[使用 ServerManager 在 Application 中创建 Application](https://stackoverflow.com/questions/4518186/using-servermanager-to-create-application-within-application/4526489#4526489)

[http://codeidol.com/asp/c-sharp-asp-xml-ado.net/Configuration-and-Deployment/Initializing-Web-Applications-Using-Global.asax/](http://codeidol.com/asp/c-sharp-asp-xml-ado.net/Configuration-and-Deployment/Initializing-Web-Applications-Using-Global.asax/)

除了这些链接，我只能给你一些理论，没有任何实际的例子，看看你是否可以通过你的方式。

您还可以使用 post 方法在不同域之间通信应用程序对象

使用控制器操作手动将应用程序对象 POST 到另一个域，POST 将通过 SSL 连接进行

您可以使用数据库来存储和检索应用程序对象，应用程序对象是在第一次浏览网站时创建的。

您还可以使用隐藏字段。

# java - Wso2 数据服务 - 更新操作问题

> ID：14570254
> 
> 赞同：0
> 
> 时间：2013-01-28T20:05:21.940
> 
> 标签：java, mysql, sql-update, wso2, wso2dss

我正在尝试使用 MySQL 作为数据库的 WSO2 DataService 组件。我使用 WSO2 组件将 MySQL 数据库作为服务公开，并且能够使用 WSDL 生成 Java 代码。

使用 Java CXF 客户端，我能够连接到数据库并执行 CRUD 操作。我现在最关心的是 WSO2 DSS 组件如何处理脏数据。为了测试场景，我有以下代码：

```
public class TestService{

//Code to connect to service

private void callInsertOperation(HermesCompleteServicePortType port) {
        ((BindingProvider) port).getRequestContext().put(BindingProvider.SESSION_MAINTAIN_PROPERTY, true);
        port.beginBoxcar();
        port.insertOperation("Key1", "TestData", Double.valueOf(0.00));
        try {
            port.endBoxcar(null);
        } catch (DataServiceFault e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        System.out.println("Insert completed");
    }

    private void callUpdateOperation(HermesCompleteServicePortType port) {
        ((BindingProvider) port).getRequestContext().put(BindingProvider.SESSION_MAINTAIN_PROPERTY, true);
        port.beginBoxcar();
        port.updateOperation("Key2", "TestData1", Double.valueOf(10.00));
        try {
            port.endBoxcar(null);
        } catch (DataServiceFault e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        System.out.println("Update completed");
    }

} 
```

当满足以下条件时，问题出在更新操作中：

1.  更新在不存在的密钥上，即 Key2 不存在
2.  更新旧数据，即密钥存在但数据已过时

在这两种情况下，我假设 DataService 指示更新操作失败/引发异常/不影响任何行。但它没有给出任何指示，我还检查了 wso2 日志以查看是否有任何与此相关的消息/异常，但没有出现。

显然，更新操作后 db 表保持不变。

WSO2 DSS 如何处理这些场景？客户端如何知道更新操作是否成功？我在代码中遗漏了什么吗？

**编辑** 我不想使用存储过程来检查结果行的计数，如此处[所述](https://stackoverflow.com/questions/13852310/can-wso2-data-service-return-affected-rows-after-sql-update?rq=1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:32:51.200

显然，DSS 中没有这样的直接功能来识别更新操作是否影响了任何行。您指出的两种情况不会导致 SQLException。即使我们通过 mysql（数据库）命令提示符运行，这些操作也会作为正常的更新操作执行。但是它会显示结果为受影响的行= 0。在当前的 DSS 实现中，除了执行没有成功之外，我们不会向客户端返回失败消息，这里不是这种情况。

我们将把它作为一个新特性添加到 DSS 的未来版本中，它将在特定查询调用（如 INSERT/UPDATE）时返回“更新的行数”。

# android - JavaMail 在三星 Galaxy SIII 上崩溃

> ID：14570258
> 
> 赞同：0
> 
> 时间：2013-01-28T20:05:36.013
> 
> 标签：android, crash, jakarta-mail

我有以下 JavaMail 实现，它在 Android 2.2 (Froyo) 模拟器上运行良好（该项目的目标设置为最新版本 17）。当我在 Galaxy SIII 手机（安装了 Android 4.1.1）上加载它时，应用程序在“catch”上崩溃，由 LogCat 指示；甚至在 catch 中的 Toast 也没有显示出来。有什么提示吗？这是代码：

```
/**
     * Send an Email with a file in attach (the file is located in SDCARD/mailattach/ directory)
     * @param emailAddress
     * @param emailObject
     * @param emailBody
     * @param attachedFile name
     */
    public static void sendEmail(String emailAddress, String emailSubject, String emailBody, String attachedFile)   {

        Email m = new Email(email_config.get("ACCOUNT_NAME"), email_config.get("ACCOUNT_PASSWORD")); 

        String[] toArr = { emailAddress };
        // Email server static initializations
        m.setHost(email_config.get("DEFAULT_SMTP_SERVER"));
        m.setPort(email_config.get("DEFAULT_SMTP_PORT"));
        if (email_config.get("SMTP_AUTHENTICATION") == "true")  {
            m.setSauth(true);
        } else {
            m.setSauth(false);
        }
        m.setSport(email_config.get("SOCKET_FACTORY_PORT"));
        if (email_config.get("DEBUG_MODE") == "true")   {
            m.setDebug(true);
        } else {
            m.setDebug(false);
        }       
        // Email transmitted parameters
        m.setTo(toArr); 
        m.setFrom(email_config.get("ACCOUNT_NAME")); 
        m.setSubject(emailSubject); 
        m.setBody(emailBody);

        String attachPath = Environment.getExternalStorageDirectory().getAbsolutePath() +
                            File.separator + "mailattach" + File.separator + attachedFile;

        try {
            // set the attachment and send
            m.addAttachment(attachPath); 
            if(m.send()) { 
                Toast.makeText(context, "Email was sent successfully.", Toast.LENGTH_LONG).show(); 
            } else { 
                Toast.makeText(context, "Email was not sent.", Toast.LENGTH_LONG).show(); 
            } 
        } catch(Exception e) { 
          Toast.makeText(context, "Error sending the email: "+e.toString(), Toast.LENGTH_LONG).show(); 
        } 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:38:38.630

确保在不是主线程中调用 Networking，因为 Android 4 不允许这样做。

# c# - youtube url 的正则表达式验证 - 字段是可选的，根据需要返回

> ID：14570259
> 
> 赞同：0
> 
> 时间：2013-01-28T20:05:36.263
> 
> 标签：c#, regex, forms, validation, youtube

我正在使用验证表达式来验证有效的 youtube 网址。我所拥有的工作做得很好，除了在 IE 中，当我需要它作为可选时它会根据需要出现。

我做了一些研究并尝试了另一种方法，但它仍然按照 IE 的要求提供。

[C# 正则表达式通过 url 从 youtube 和 vimeo 获取视频 ID](https://stackoverflow.com/questions/3652046/c-sharp-regex-to-get-video-id-from-youtube-and-vimeo-by-url)

下面是我目前使用的。

```
<label for="you_tube">Video (Your YouTube URL):</label>
<asp:TextBox placeholder="YouTube URL to your Video" runat="server" ID="you_tube" MaxLength="150" /><br/>
<asp:RegularExpressionValidator ID="regExYouTube" SetFocusOnError="true" runat="server" ErrorMessage="Format should follow: http://youtu.be/8-qxGN4VWzY or http://www.youtube.com/watch?v=33aZX7qxgcw" CssClass="formError" ControlToValidate="you_tube" ValidationExpression="http(s)?://(www\.)?(youtu\.be|youtube\.com)[\w-/=&?]+"  Display="Dynamic" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:16:26.013

msdn 上的文档让我相信这应该可以工作......无论如何，一个简单的解决方法是修改您当前的正则表达式 ( `currentRegex|^$`) 以接受除了两种接受的 url 格式之外的空字符串。

可以在这里找到另一个解决方案；[http://forums.asp.net/t/1657041.aspx/1](http://forums.asp.net/t/1657041.aspx/1)

总而言之，您从禁用验证器开始，然后在触发 TextChanged 事件时启用它。

# python - 这个错误是什么意思：ValueError：渲染器被传递为非字典值

> ID：14570260
> 
> 赞同：3
> 
> 时间：2013-01-28T20:05:37.317
> 
> 标签：python, pylons, pyramid

现在我有一个金字塔（python）应用程序，其主页通过**init** .py 文件中的这条路线到达：

```
 config.add_route('home_page', '/') 
```

在我的 views.py 文件中，我有：

```
@view_config(route_name='home_page', renderer='templates/edit.pt')
def home_page(request):
    if 'form.submitted' in request.params:
        name= request.params['name']
        body = request.params['body']
        page=Page(name,body)
        DBSession.add(page)
        return HTTPFound(Location=request.route_url('view_page',pagename=name)) 
```

在我的 edit.pt 模板中，我有

```
<form action="${save_url}" method="post">
    <textarea name="name" tal:content="page.data" rows="10"
                    cols="60"/><br/>
    <textarea name="body" tal:content="page.name" rows="10"
                    cols="60"/><br/>
<input type="submit" name=form.submitted value="Save"/>
</form> 
```

所以基本上目标是让主页显示这个 edit.pt 模板，其中包含一个用于提交两条信息的表单，一个页面名称和页面正文。提交表单后，返回的 HTTPFound 函数应重定向到创建的 view_page，它在新的永久 url 上显示页面名称页面正文。

我不确定我应该在 home_page view_config 中的 if 语句之后添加什么。如果表单尚未提交，我不希望发生任何事情，它应该继续显示该 edit.pt 模板。现在，当我尝试访问主页时出现错误：ValueError: renderer was passed non-dictionary as value。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T20:26:00.543

看起来您缺少一个条件

```
@view_config(route_name='home_page', renderer='templates/edit.pt')
def home_page(request):
    if 'form.submitted' in request.params:
        name= request.params['name']
        body = request.params['body']
        page=Page(name,body)
        DBSession.add(page)
        return HTTPFound(Location=request.route_url('view_page',pagename=name))

    # form was not submitted here, need to return context
    # ValueError: renderer was passed non-dictionary as value < beacuase you were
    # not returning context for this case before
    return {} # template contenxt here 
```

# javascript - 如何从选项卡外部的链接打开 jquery 选项卡？

> ID：14570267
> 
> 赞同：1
> 
> 时间：2013-01-28T20:06:09.343
> 
> 标签：javascript, jquery, css, tabs, hyperlink

我在互联网上找到了一个不错的标签系统（指向标签系统的[链接](http://www.cssjunction.com/tutorials/jquery-tabs-too-easy-to-create-a-bit-jquery-a-bit-css/)），让用户可以浏览我的网站。但是我在编码方面并不是那么好。我以某种方式设法让事情正常进行。

我正在尝试/调整两天以使其正常工作。记录到此代码中，我将能够创建一个打开指定选项卡的链接。你怎么能创建一个链接——当点击它时——会打开指定的选项卡。

此代码可以解决问题，但不知道如何在我现有的 Javascript 代码中实现此代码。

代码：

```
var $tabs = $('#example').tabs(); // first tab selected

$('#my-text-link').click(function() { // bind click event to link
    $tabs.tabs('select', 2); // switch to third tab
    return false;
}); 
```

[在此网站上](http://docs.jquery.com/UI/API/1.8/Tabs#...open_links_in_the_current_tab_instead_of_leaving_the_page)找到此代码

HTML 代码：

```
<div id="tabs">

    <ul>
        <li><a class="active" href="#tab1">HOME</a></li>
        <li><a href="#tab2">SERVICES</a></li>
        <li><a href="#tab3">OPTIONS</a></li>
            <li><a href="#tab4">ABOUT US</a></li>
            <li><a href="#tab5">CONTACT US</a></li>
    </ul><!-- //Tab buttons -->

    <div class="tabDetails">
        <div id="tab1" class="tabContents">
                <h1>Title1</h1>
                <iframe src="Home.html" width="1150" height="600" frameBorder="0" scrolling="no">Browser not compatible. </iframe >
        </div><!-- //tab1 -->
        <div id="tab2" class="tabContents">
                <h1>Title2  </h1>
                <h2>  </h2>
                <h3>  </h3>
                <iframe src="Services.html" width="1150" height="640" frameBorder="0" scrolling="no">Browser not compatible. </iframe >
        </div><!-- //tab2 -->
        <div id="tab3" class="tabContents">
               <h1>Title3</h1>
               <iframe src="Options.html" width="1150" height="600" frameBorder="0" scrolling="no">Browser not compatible. </iframe >
        </div><!-- //tab3 -->
        <div id="tab4" class="tabContents">
            <h1>Title4 </h1>
            <iframe src="Aboutus.html" width="1150" height="600" frameBorder="0" scrolling="no">Browser not compatible. </iframe >
        </div><!-- //tab4 -->
        <div id="tab5" class="tabContents">
            <h1>Title5</h1>
           <iframe src="Contactus.html" width="1150" height="600" frameBorder="0" scrolling="no">Browser not compatible. </iframe >
        </div><!-- //tab5 -->
    </div><!-- //tab Details -->
</div><!-- //Tab Container --> 
```

CSS：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>jQuery Tab</title>
<style type="text/css">
*{margin:10; padding:0;}

body{

    font:normal 14px/1.5em Arial, Helvetica, sans-serif;
}
a{outline:none;}

#tabs{
    background:#f0f0f0;
    border:1x solid #fff;
    margin:100px auto;
    padding:20px;
    position:absolute;
    width:1315px;
}
    #tabs ul{
        overflow:hidden;
        border-left:0px solid #fff;
        height:80px;
        position:center;
        z-index:100;
    }
    #tabContaier li{
        float:left;
        list-style:none;
    }
    #tabs li a{
        background:#ddd;
        border:3px solid #ffff;
        border-left:0;
        color:#666;
        cursor:pointer;
        display:block;
        height:35px;
        line-height:35px;
        padding:0 98px;
        text-decoration:none;
        text-transform:bold;
    }
    #tabs li a:hover{
        background:#fff;
    }
    #tabs li a.active{
        background:#fbfbfb;
        border:px solid #fff;
        border-right:px;
        color:#333;
    }
    .tabDetails{
        background:#fbfbfb;
        border:1px solid #fff;
        margin:34px px;
    }
    .tabContents{
        padding:px

}
    .tabContents h1{
        font:normal 24px/1.1em Georgia, "Times New Roman", Times, serif;
        padding:0 0 px;
                                width:auto;

</style> 
```

JAVASCRIPT代码：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){

$( ".selector" ).tabs( "refresh" );

    // Hide all tab conten divs by default
    $(".tabContents").hide(); 

    // Show the first div of tab content by default
    $(".tabContents:first").show(); 

    //Fire the click event
    $("#tabContaier ul li a").click(function(){ 

        // Catch the click link
        var activeTab = $(this).attr("href"); 

        // Remove pre-highlighted link
        $("#tabContaier ul li a").removeClass("active"); 

        // set clicked link to highlight state
        $(this).addClass("active");         

        // hide currently visible tab content div
        $(".tabContents").hide(); 

        // show the target tab content div by matching clicked link.
        $(activeTab).fadeIn(); 
 return false;

    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:35:20.770

您的问题是您正在选择具有不同 jquery 选项卡的选项卡。使用此 Javascript 函数更改选定的选项卡。

```
function selectTab(tabIndex) {
    var selector = "a[href='#tab" + tabIndex + "']";
    var tab = "#tab" + tabIndex;
    $("#tabContaier ul li a").removeClass("active");
    $(selector).addClass("active");
    $(".tabContents").hide();
    $(tab).fadeIn();
} 
```

关联：

```
<a href="#" onclick="selectTab(2);" >Go to tab 2</a> 
```

如果您使用与现在相同的链接命名法，这将起作用（href 用于链接为“tab1，tab2”等，以及名为“tab1，tab2”等的 div ......祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:21:01.660

看起来您过于复杂化并尝试重新创建 JQuery UI 选项卡的操作。您可以消除除初始选项卡创建和点击事件之外的所有内容。您发布的其他 JS 中唯一可能真正做任何事情的部分是`fadeIn()`As for Style，不要分配和删除活动类，使用`.ui-tabs-active`该类。设置 li 的背景颜色，而不是 a 或您的 a 样式将覆盖 li.ui-tabs-active 并且即使在悬停/选择时它们也会保持灰色。请参见此处的示例：

在此处查看小提琴演示：http: [//jsfiddle.net/webchemist/Dpg2W/](http://jsfiddle.net/webchemist/Dpg2W/)

你也有一些 CSS 错误：

```
 #tabs li a.active{
        background:#fbfbfb;
        border:px solid #fff;
        border-right:px; /*no numeric value given for # of pixels*/
        color:#333;
}

.tabDetails{
        background:#fbfbfb;
        border:1px solid #fff;
        margin:34px px; /*no numeric value given for # of pixels in 2nd value*/
}

.tabContents{
        padding:px /*no numeric value given for # of pixels*/
}

.tabContents h1{
        font:normal 24px/1.1em Georgia, "Times New Roman", Times, serif;
        padding:0 0 px;
                                width:auto;

/*no closing brace for .tabContents h1*/

</style> 
```

# php - rand() 以相同方式播种会产生不同的结果

> ID：14570268
> 
> 赞同：0
> 
> 时间：2013-01-28T20:06:13.140
> 
> 标签：php, c++, c, random, srand

我正在用 PHP 和 C 开发一个应用程序，但`rand`两种语言的结果是不同的，即使我使用的是相同的种子：

PHP：

```
srand(1);
$random = rand(); // returns 32422 
```

C：

```
srand(1);
int random = rand(); // returns 41 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:29:44.663

实现伪随机数生成器的方法不止一种。

每种编程语言都可以自由地指定自己的`rand`实现，甚至什么都不指定。例如，C 规范只说“该`rand`函数计算 0 到 0 范围内的伪随机整数序列`RAND_MAX`”。没有提到`rand`应该如何工作，所以编译器编写者可以随心所欲地实现`rand`。

许多编译器使用[线性同余生成器](http://en.wikipedia.org/wiki/Linear_congruential_generator)来实现`rand`. 即使是这个简单的算法也有编译器可以自由指定的参数，这些参数会改变特定种子给出的数字序列。

![液晶参数](../Images/cba727b9c2cab63cae8199502bd2ac3e.png)

看看 Borland 和 glibc 如何使用不同的参数。您甚至不能相信`rand`在所有 C 程序中都能以相同的方式工作，更不用说所有程序了！

# c# - c# Task Scheduler，延迟任务

> ID：14570269
> 
> 赞同：0
> 
> 时间：2013-01-28T20:06:16.070
> 
> 标签：c#, task, scheduler

我正在制作这个 C# 应用程序，该应用程序创建一个在每个月的 1 日运行的任务（到目前为止一切正常），但是如果在触发时计算机已关闭，则该任务将被跳过并执行到下个月。

所以我的问题是：有没有办法，如果触发器没有触发，然后在计算机再次打开时执行另一个触发器？

到目前为止，这是我的代码：

```
using Microsoft.Win32.TaskScheduler; // this is the 2.0 library
namespace TaskSchedulerForDataUsage
{
class Program
{
    static void Main(string[] args)
    {
        using (TaskService myTaskService=new TaskService())
        {
            TaskDefinition myTaskDefinition = myTaskService.NewTask();
            myTaskDefinition.RegistrationInfo.Description = "Does Something";
            myTaskDefinition.Triggers.Add(new MonthlyTrigger(1,MonthsOfTheYear.AllMonths));

            myTaskDefinition.Actions.Add(new ExecAction("Here is a path with a  .exe ",null,null));
            myTaskService.RootFolder.RegisterTaskDefinition(@"AwesomeStuff",myTaskDefinition);
            //in case you want to erase the task
            //myTaskService.RootFolder.DeleteTask("AwesomeStuff");
        }
    }
} 
```

}

# jquery - 从字段集中获取选定的选项

> ID：14570270
> 
> 赞同：2
> 
> 时间：2013-01-28T20:06:17.973
> 
> 标签：jquery, option, fieldset

这让我很伤心，我几乎可以肯定这是愚蠢的。

为什么返回未定义而不是“测试”？

见[JSFiddle](http://jsfiddle.net/SXGTC/)

```
<fieldset class="fieldset">
    <select class="list">
        <option selected="selected">Test</option>
    </select>
</fieldset>

<script type="text/javascript">
    alert($('.fieldset').children('select.list option:selected').val());
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:14:34.307

试试这个...

```
alert($('.fieldset').children().val()); 
```

jsFiddle[示例](http://jsfiddle.net/SXGTC/6/)

问候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T20:11:47.340

您需要使用`find`而不是`children`.

`children`为您提供选择器的*直接*后代，即仅向下一级。`find`搜索所有后代。否则，你就上当了！

`select`（请记住，如果您的 中包含多个`fieldset`，则当前选择器将一次全部获取它们。如果这不是您想要的，请使用能够获得`select`您想要的东西；在您的示例中，它将是`$('.list').children('select.list option:selected').val()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T20:12:13.313

`select.list`是的直子，`.fieldset`但`option`不是。

`children`选择器应指定与选项不匹配的直接子代的选择器，因为`.fieldset`它们是列表的子代。

[**children**](http://api.jquery.com/children/)方法不是递归的，仅在直接子/后代中查找匹配项，而不是在子项的子项中查找匹配项。

您可以将`select.list`选择器作为您的首字母的一部分，`selector`然后孩子们就可以了`options`。与此类似：

```
alert($('.fieldset select.list').children('option:selected').val()); 
```

* * *

[**演示**](http://jsfiddle.net/SbHpX/)- 更正的选择器

* * *

此外，您也可以像这样完全不使用 children 方法：

```
alert($('.fieldset select.list>option:selected').val()); 
```

或者像这样：

```
alert($('select.list>option:selected', '.fieldset').val()); 
```

有很多方法可以做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T20:33:53.297

```
alert($('.fieldset select.list option:selected').val()); 
```

# c - 这在c中是什么意思？char *array[]= { "**", "**", "**" };

> ID：14570271
> 
> 赞同：6
> 
> 时间：2013-01-28T20:06:38.287
> 
> 标签：c

在我阅读的一些代码中，有一个像这样的初始化语句

```
char *array[]= { "something1", "something2", "something3" }; 
```

这是什么意思，该指针实际上指向什么？它是如何在内存中分配的，我如何访问该数组中的每个元素和元素的每个字符？

--- 已编辑 --- 请在这个例子中 char array[3]; 之间有什么区别？和 char *array[3]; --- 已编辑 ---

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T20:20:29.490

> what that means ?

It's initializing an array of strings (`char *`) with three values (three pointers to null-terminating strings)

> and what that pointer points to ?

It should point to the first element in the `char*` array

> how is that allocated in memory ?

It will allocate enough memory to store the three strings followed by null-terminators, as well as the three pointers to those strings:

```
array --> pointer to three sequential memory addresses

array[0] --> something1{\0}
array[1] --> something2{\0}
array[2] --> something3{\0} 
```

Note that the strings may not necessarily be in sequential memory

> and how can I access every element

if by "element" you mean the string, you can loop though the pointers:

```
for(int i=0; i<3; i++)
{
    char* element = array[i];
} 
```

> and every character of an element in that array

well, you could access the chars using array syntax (`element[i]`) but I would recommend using the [C string functions](http://en.wikipedia.org/wiki/C_string_handling) for safety (so you don't have to worry about accessing memory outside the range of the string)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-28T20:08:00.210

这是一种在创建数组的同时初始化数组的方法。

这段代码

```
char *array[]= { "a", "b", "c" }; 
```

将具有与此代码相同的结果。

```
char *array[3];

array[0] = "a";
array[1] = "b";
array[2] = "c"; 
```

这是获取更多信息的好来源。

[http://www.iu.hio.no/~mark/CTutorial/CTutorial.html#Strings](http://www.iu.hio.no/~mark/CTutorial/CTutorial.html#Strings)

编辑：

`char array[3];`是一个 3 的数组`char`。 `char *array[3];`是一个由 3 个指针组成的数组`char`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-28T20:10:38.203

`char *`在 C 中是一个字符串。

`array`是被声明的变量的名称。

`[]`表示它是一个数组。

`{ "something1", "something2", "something3" }`正在初始化数组的内容。

访问元素是这样完成的：

`array[0]`给出第一个元素 - “something1”。

`array[1]`给出第二个元素 - “something2”。

等等

**笔记：**

正如评论中指出的那样，从`char *`技术上讲，它不是一个字符串。

它是指向 a 的指针`char`。您可以像这样可视化内存中的字符串：

```
<-------------------------->
..134|135|136|137|138|139|..
<-------------------------->
  'H'|'e'|'l'|'l'|'o'|'\0'
<--------------------------> 
```

此内存块（位置 134-139）保存字符串。

例如：

`array[0]`实际上返回指向“something1”中第一个字符的指针。

您使用字符在内存中按顺序排列的事实以各种方式访问​​字符串的其余部分：

```
/* ch points to the 's' */
char* ch = array[0];

/* ch2 points to the 'e' */
char* ch2 = ch + 3;

/* ch3 == 'e' */
char ch3 = *ch2;

/* ch4 == 'e' */
char ch4 = *(ch + 3);

/* ch5 == 'e' */
char ch5 = ch[3]; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-28T20:10:23.727

这定义了一个 char 指针数组（又名“c 字符串”）。

要访问您可以执行的内容：

```
for (int i=0; i<sizeof(array)/sizeof(char*); i++) {
    printf("%s", array[i]);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-28T20:09:59.540

它声明`array`为一个由 3 个指向 的指针组成的数组`char`，其 3 个元素初始化为指向相应字符串的指针。内存分配给数组本身（3 个指针）和字符串。字符串内存是静态分配的。数组的内存是静态分配的（如果声明在所有函数之外）或动态分配（通常在 CPU 的执行堆栈上）如果声明在函数内部。

# cobol - 读取并跳转文件中的第一行和其他行

> ID：14570274
> 
> 赞同：1
> 
> 时间：2013-01-28T20:06:46.100
> 
> 标签：cobol, gnucobol

我如何读取具有类似结构的 .dat 文件：( A = ALPHANUMERIC && N = NUM​​ERIC )

```
0AAAAAAAANNNN (233 BLANK SPACES ) 999999 ( SEQUENTIAL NUMBER ONE BY ONE )
1NNNNNNNNNNNNAAAAAAAAAAAAAAAAAAA (194 BLANK SPACES) 999999 (SEQUENTIAL NUMBER ONE BY ONE)
2AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA (194 BLANK SPACES) 999999 (SEQUENTIAL NUMBER ONE BY ONE)
1NNNNNNNNNNNNAAAAAAAAAAAAAAAAAAA (194 BLANK SPACES) 999999 (SEQUENTIAL NUMBER ONE BY ONE)
2AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA (194 BLANK SPACES) 999999 (SEQUENTIAL NUMBER ONE BY ONE)
1NNNNNNNNNNNNAAAAAAAAAAAAAAAAAAA (194 BLANK SPACES) 999999 (SEQUENTIAL NUMBER ONE BY ONE)
2AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA (194 BLANK SPACES) 999999 (SEQUENTIAL NUMBER ONE BY ONE)
1NNNNNNNNNNNNAAAAAAAAAAAAAAAAAAA (194 BLANK SPACES) 999999 (SEQUENTIAL NUMBER ONE BY ONE)
2AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA (194 BLANK SPACES) 999999 (SEQUENTIAL NUMBER ONE BY ONE)
9 (245 BLANK SPACES) 999999 (SEQUENTIAL NUMBER ONE BY ONE) 
```

所以，我知道，我如何制作一个程序来用 C/C++ 或 C# 来阅读它，但是，我尝试用 Cobol 制作，只是为了学习....

但是，我不知道用这种样式打开文件需要使用什么命令（我只知道：

```
ORGANIZATION IS LINE SEQUENTIAL. 
```

我认为，存在另一个使用自定义指令打开的命令......我不知道......所以，顺便说一句，我如何打开文件并阅读信息？

（我只需要按时阅读第 1 行，而且，我需要阅读第 2 行和第 3 行总是配对... 4 和 5 && 6 和 7 && 8 和 9 ...）而且，我想证明显示信息（仅供学习）谢谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T22:39:32.220

你的FD下面是这样的：

```
01  INPUT-RECORD.
    05  IR-RECORD-TYPE PIC X.
        88  INPUT-RECORD-IS-HEADER VALUE '0'.
        88  INPUT-RECORD-IS-DATA1 VALUE '1'.
        88  INPUT-RECORD-IS-DATA2 VALUE '2'.
        88  INPUT-RECORD-IS-TRAILER VALUE '9'.
    05  FILLER PIC X(whatever). 
```

您可能需要一个“尾随”字节作为记录分隔符，我不知道，并且您必须整理长度，因为它们似乎有所不同。

这些在工作存储中：

```
01  INPUT-RECORD-HEADER.
    05  IRH-RECORD-TYPE PIC X.
    05  IRH-ITEM1 PIC X(8).
    05  IRH-ITEM2 PIC 9(4).
    05  FILLER PIC X(233).
    05  IRH-SEQUENCE PIC X(6)
01  INPUT-RECORD-DATA1.
    05  IRD1-RECORD-TYPE PIC X.
    05  IRD1-ITEM1 PIC 9(14).
    05  IRD1-ITEM1 PIC X(19).
    05  FILLER PIC X(194).
    05  IRD1-SEQUENCE PIC X(6)
01  INPUT-RECORD-DATA2.
    05  IRD2-RECORD-TYPE PIC X.
    05  IRD2-ITEM1 PIC X(33).
    05  FILLER PIC X(194).
    05  IRD2-SEQUENCE PIC X(6)
01  INPUT-RECORD-TRAILER.
    05  IRT-RECORD-TYPE PIC X.
    05  FILLER PIC X(245).
    05  IRT-SEQUENCE PIC X(6). 
```

您必须一次阅读每条记录。识别它。将其放入正确的 WS 定义中。当您读取“2”时，您可以处理与“2”一起存储的“1”。

我的数据名不是很好，因为我不知道你的数据是什么。此外，我还没有“格式化”定义，这将使您在执行此操作时更具可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T20:42:24.847

对于 OpenCOBOL，这是一个示例标准输入/标准输出过滤程序：

```
 >>SOURCE FORMAT IS FIXED
  *> ***************************************************************
  *><* ===========
  *><* filter
  *><* ===========
  *><* :Author:    Brian Tiffin
  *><* :Date:      20090207
  *><* :Purpose:   Standard IO filters
  *><* :Tectonics: cobc -x filter.cob
  *> ***************************************************************
   identification division.
   program-id. filter.

   environment division.
   configuration section.

   input-output section.
   file-control.
       select standard-input assign to keyboard.
       select standard-output assign to display.

   data division.
   file section.
   fd standard-input.
       01 stdin-record     pic x(32768).
   fd standard-output.
       01 stdout-record    pic x(32768).

   working-storage section.
   01  file-status         pic x  value space.
       88 end-of-file             value high-value
          when set to false is          low-value.

  *> ***************************************************************
   procedure division.
   main section.
   00-main.

   perform 01-open

   perform 01-read

   perform
        until end-of-file
            perform 01-transform
            perform 01-write
            perform 01-read
   end-perform
   .

   00-leave.
   perform 01-close
   .

   goback.
  *> end main

   support section.
   01-open.
   open input standard-input
   open output standard-output
   .

   01-read.
   read standard-input
        at end set end-of-file to true
   end-read
   .

  *> All changes here
   01-transform.
   move stdin-record to stdout-record
   .
  *>

   01-write.
   write stdout-record end-write
   .

   01-close.
       close standard-input
       close standard-output
   .

   end program filter.
  *><*
  *><* Last Update: dd-Mmm-yyyy 
```

这是一个使用 LINAGE 的演示，它恰好在文本文件中读取。

```
 *****************************************************************
  * Example of LINAGE File Descriptor
  * Author: Brian Tiffin
  * Date:   10-July-2008
  * Tectonics: $ cocb -x linage-demo.cob
  *            $ ./linage-demo <filename ["linage-demo.cob"]>
  *            $ cat -n mini-report
  *****************************************************************
   IDENTIFICATION DIVISION.
   PROGRAM-ID. linage-demo.

   ENVIRONMENT DIVISION.
   INPUT-OUTPUT SECTION.
   FILE-CONTROL.
      select optional data-file assign to file-name
          organization is line sequential
          file status is data-file-status.
      select mini-report assign to "mini-report".

   DATA DIVISION.
   FILE SECTION.
   FD  data-file.
   01  data-record.
      88 endofdata        value high-values.
      02 data-line        pic x(80).
   FD  mini-report
      linage is 16 lines
          with footing at 15
          lines at top 2
          lines at bottom 2.
   01  report-line         pic x(80).

   WORKING-STORAGE SECTION.
   01  command-arguments   pic x(1024).
   01  file-name           pic x(160).
   01  data-file-status    pic 99.
   01  lc                  pic 99.
   01  report-line-blank.
      02 filler           pic x(18) value all "*".
      02 filler           pic x(05) value spaces.
      02 filler           pic x(34)
          VALUE "THIS PAGE INTENTIONALLY LEFT BLANK".
      02 filler           pic x(05) value spaces.
      02 filler           pic x(18) value all "*".
   01  report-line-data.
      02 body-tag         pic 9(6).
      02 line-3           pic x(74).
   01  report-line-header.
      02 filler           pic x(6) VALUE "PAGE: ".
      02 page-no          pic 9999.
      02 filler           pic x(24).
      02 filler           pic x(5) VALUE " LC: ".
      02 header-tag       pic 9(6).
      02 filler           pic x(23).
      02 filler           pic x(6) VALUE "DATE: ".
      02 page-date        pic x(6).

   01  page-count          pic 9999.

   PROCEDURE DIVISION.

   accept command-arguments from command-line end-accept.
   string
      command-arguments delimited by space
      into file-name
   end-string.
   if file-name equal spaces
      move "linage-demo.cob" to file-name
   end-if.

   open input data-file.
   read data-file
      at end
          display
               "File: " function trim(file-name) " open error"
          end-display
          go to early-exit
   end-read.

   open output mini-report.

   write report-line
      from report-line-blank
   end-write.

   move 1 to page-count.
   accept page-date from date end-accept.
   move page-count to page-no.
   write report-line
      from report-line-header
      after advancing page
   end-write.

   perform readwrite-loop until endofdata.

   display
      "Normal termination, file name: "
      function trim(file-name)
      " ending status: "
      data-file-status
   end-display.
   close mini-report.

  * Goto considered harmful?  Bah!  :)
   early-exit.
   close data-file.
   exit program.
   stop run.

  ****************************************************************
   readwrite-loop.
   move data-record to report-line-data
   move linage-counter to body-tag
   write report-line from report-line-data
      end-of-page
          add 1 to page-count end-add
          move page-count to page-no
          move linage-counter to header-tag
          write report-line from report-line-header
              after advancing page
          end-write
   end-write
   read data-file
      at end set endofdata to true
   end-read
   .

  *****************************************************************
  * Commentary
  * LINAGE is set at a 20 line logical page
  *  16 body lines
  *   2 top lines
  *   A footer line at 15 (inside the body count)
  *   2 bottom lines
  * Build with:
  * $ cobc -x -Wall -Wtruncate linage-demo.cob
  * Evaluate with:
  * $ ./linage-demo
  * This will read in linage-demo.cob and produce mini-report
  * $ cat -n mini-report
  *****************************************************************
   END PROGRAM linage-demo. 
```

使用这些示例以及 Gilbert 的答案，您应该有足够的能力来解决您的问题，但需要注意的是，这些示例在正确的错误处理方面是害羞的，所以要小心这是家庭作业还是有偿作业。有关标准输入/输出或根据命令行参数（或缺少）的文件名的示例，请参阅 OpenCOBOL FAQ 中的 ocdoc.cob 程序。

题外话：通过 ocdoc.cob 本身的 ocdoc 传递的输出可以在[http://opencobol.add1tocobol.com/ocdoc.html](http://opencobol.add1tocobol.com/ocdoc.html)看到 （为什么要提到它？Pygments 的 COBOL 词典荧光笔刚刚被接受到 main 中。任何 Pygments 被拉在 1.6 版之后将允许 COBOL（无上下文）词法突出显示。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T20:14:15.200

您编写一个读取文件的普通 Cobol 程序。

记录的第一个字节（字符）是 0、1、2 或 9。

为 4 种记录类型中的每一种定义一个工作存储区域（01 级）。然后，在读取记录后，将其从输入区域移动到记录的相应工作存储区域。

然后，您可以从 4 个工作存储区域之一处理您希望的记录。

# asp.net - 必须按两次 asp.net 按钮

> ID：14570275
> 
> 赞同：0
> 
> 时间：2013-01-28T20:06:47.710
> 
> 标签：asp.net, .net, vb.net

我有一个按钮，单击时设置会话变量。但是出于某种原因，我必须单击它两次才能真正进行保存。有没有办法解决？

谢谢

```
 Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

     If CInt(Session("save")) <> 1 Then
        'save something ...
     End If

     End Sub

     Private Sub btnSave_Click(sender As Object, e As System.EventArgs) Handles btnSave.Click
           Session("save") = 1
     End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:13:38.273

Page_Load 在 btnSave_Click 之前运行。[您可以在MSDN](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx#lifecycle_events)中查看有关事件排序的更多信息。

换句话说，当单击 btnSave 时，回发运行 Page_Load 然后运行 ​​btnSave_Click 方法。要解决此问题，请将代码 'save something ... 移动到 btnSave_Click 方法中。

# c# - 无法在 Metro 应用程序中启动默认应用程序

> ID：14570276
> 
> 赞同：0
> 
> 时间：2013-01-28T20:06:50.410
> 
> 标签：c#, .net, xaml, windows-8, microsoft-metro

好的，所以 Windows 8 附带了一个很酷的 PDF 和 XLS 阅读器应用程序，称为 Reader。我有一个帮助文档，当用户单击我的应用程序中的“帮助”按钮时，我想显示该文档。我的应用程序应该使用该文档类型的默认查看器启动 PDF 文档。

但它不会。没有错误，没有异常，设置断点不会显示任何信息。我的代码是：

```
<Button x:Name="help" Style="{StaticResource HelpAppBarButtonStyle}" Tag="Help" Click="help_Click_1" /> 
```

和：

```
 private async void help_Click_1(object sender, RoutedEventArgs e)
    {

        try
        {
            Windows.Storage.StorageFile file =
                await Windows.ApplicationModel.Package.Current.InstalledLocation.GetFileAsync(@"\Assets\User Guide.pdf");
            await Windows.System.Launcher.LaunchFileAsync(file);
        }
        catch (Exception exception)
        {
            Debug.WriteLine(exception.Message);
        }
    } 
```

现在，在解决方案资源管理器中，有常用的文件和文件夹。我在根目录中还有一个 Assets 文件夹，PDF 文档位于该根文件夹中。

我不确定为什么这不起作用，但我相信这可能与我在上述代码中指向文件的方式有关：

`await Windows.ApplicationModel.Package.Current.InstalledLocation.GetFileAsync(@"\Assets\User Guide.pdf");`

如何使用该文档类型的默认应用程序正确显示包含在 Assets 文件夹中的文档？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:59:55.927

我测试了你的代码，在我让它工作之前我必须解决两个问题：

1.  确保`Build Action`pdf 文件的 设置为`Content`. `None`当我将文件包含在项目中时，它被设置为我的情况。
2.  您需要删除文件路径中的起始反斜杠：`Package.Current.InstalledLocation.GetFileAsync(@"Assets\User Guide.pdf")`.

在我更改了上述两个文件后，在我的默认 PDF 查看器中打开了文件。但即使在此之前，也出现了一个异常，描述出了什么问题，尽管由于您的静默 try/catch 代码，我一开始并没有注意到它。

如果它仍然对您不起作用，则可能与您的机器配置有关。确保 pdf 文件的默认查看器设置正确。

# javascript - 如何通过 javascript 将元素置于 contenteditable 模式

> ID：14570277
> 
> 赞同：0
> 
> 时间：2013-01-28T20:06:54.047
> 
> 标签：javascript, jquery, html, contenteditable

我有以下 HTML 元素

```
<p class="story" contenteditable="true">This is a story.</p> 
```

现在我想通过 javascript 将元素置于编辑模式。我认为像下面这样的东西会起作用，但它没有

```
$('.story').click(); 
```

如何在不单击元素的情况下手动将此元素置于编辑模式（通过 javascript 或任何其他方式）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T20:09:11.353

使用`focus`代替`click`：

```
$(".story").focus(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T20:09:49.857

```
$('.story').focus(function(){
    $(this).attr('contenteditable', 'true');
}); 
```

# c# - 循环遍历列表的更好方法

> ID：14570280
> 
> 赞同：3
> 
> 时间：2013-01-28T20:07:09.387
> 
> 标签：c#

所以我有几个不同的列表，我正在尝试处理并合并到一个列表中。

下面是一段代码，我想看看是否有更好的方法。我问的原因是其中一些列表相当大。我想看看是否有更有效的方法来做到这一点。

如您所见，我正在遍历一个列表，我要做的第一件事是检查 CompanyId 是否存在于列表中。如果是这样，那么我会在列表中找到要处理的项目。

pList 是我的进程列表。我正在将不同列表中的值添加到此列表中。

**我想知道是否有一种“更好的方法”来完成存在和查找。**

```
 boolean tstFind = false;
    foreach (parseAC item in pACList)
    {
        tstFind = pList.Exists(x => (x.CompanyId == item.key.ToString()));

        if (tstFind == true)
        {
            pItem = pList.Find(x => (x.CompanyId == item.key.ToString()));
            //Processing done here.  pItem gets updated here
            ...
         } 
```

顺便说一句，我将研究一种使用连接的方法，看看它是否更快。但我还没有到达那里。上面的代码是我第一次解决这个问题，它似乎有效。但是，由于我有时间，我想看看是否还有更好的方法。

非常感谢任何输入。

时间发现：

*   我当前的 Find and Exists 代码大约需要**84 分钟**才能遍历 pACList 中的 5.5M 项。

*   使用 pList.firstOrDefault(x=> x.CompanyId == item.key.ToString()); 循环遍历 pACList 中的 550 万个项目需要**54 分钟**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T20:10:37.407

您可以检索项目`FirstOrDefault`而不是搜索项目两次（第一次定义项目是否存在，第二次获取现有项目）：

```
var tstFind = pList.FirstOrDefault(x => x.CompanyId == item.key.ToString());

if (tstFind != null)
{            
   //Processing done here.  pItem gets updated here        
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T20:13:56.263

是的，使用哈希表，以便您的算法是 O(n) 而不是现在的 O(n*m)。

```
var pListByCompanyId = pList.ToDictionary(x => x.CompanyId);
 foreach (parseAC item in pACList)
    {
        if (pListByCompanyId.ContainsKey(item.key.ToString()))
        {
            pItem = pListByCompanyId[item.key.ToString()];
            //Processing done here.  pItem gets updated here
            ...
         } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T20:11:06.187

您可以使用 linq 遍历过滤列表

```
foreach (parseAC item in pACList.Where(i=>pList.Any(x => (x.CompanyId == i.key.ToString()))))
    {
            pItem = pList.Find(x => (x.CompanyId == item.key.ToString()));
            //Processing done here.  pItem gets updated here
            ...
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-28T20:12:56.730

对这种类型的操作使用列表是 O(MxN)（M 是 pACList 的计数，N 是 pList 的计数）。此外，您正在搜索 pACList 两次。为避免该问题，`pList.FirstOrDefault`请按照@lazyberezovsky 的建议使用。

但是，如果可能的话，我会避免使用列表。由您正在搜索的`Dictionary`键索引将大大缩短查找时间。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-28T20:36:17.130

对另一个列表中的每个项目在列表上进行线性搜索对于大型数据集来说效率不高。最好将键放入可以更有效地搜索的表或字典中，以允许您连接两个表。你甚至不需要自己编写代码，你想要的是一个`Join`操作。您希望从每个映射到相同键的每个序列中获取所有项目对。

要么拉出下面方法的实现，要么将其更改为适当的类型`Foo`并将`Bar`其用作方法。

```
public static IEnumerable<Tuple<Bar, Foo>> Merge(IEnumerable<Bar> pACList
    , IEnumerable<Foo> pList)
{
    return pACList.Join(pList, item => item.Key.ToString()
        , item => item.CompanyID.ToString()
            , (a, b) => Tuple.Create(a, b));
} 
```

您可以使用此调用的结果将这两个项目合并在一起，因为它们将具有相同的键。

在内部，该方法将创建一个查找表，以便在实际进行搜索之前进行有效搜索。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-28T20:15:51.153

1.  将 pList 转换为 HashSet，然后查询 pHashSet.Contains()。复杂度 O(N) + O(n)

2.  在 CompanyId 上对 pList 进行排序并执行 Array.BinarySearch() = O(N Log N) + O(n * Log N )

3.  如果 Max company id 不是太大，只需在第 i 个位置存在具有公司 id i 的项目时创建它们并对其进行数组。没有什么比这更快了。

其中 N 是 pList 的大小，n 是 pACList 的大小

# jquery - 使用 jQuery 编辑 Shopify 变体

> ID：14570282
> 
> 赞同：1
> 
> 时间：2013-01-28T20:07:12.503
> 
> 标签：jquery, shopify, liquid

好吧，所以我试图弄清楚如何根据某人选择的产品变体使内容出现和消失，并且在这里的一些人的帮助下，我设法获得了使内容出现和消失所需的 jQuery 代码在下拉菜单中的选定选项上，它在 Shopify 之外完美运行。唯一的问题是，一旦我尝试将其转移到 Shopify，它将无法工作。

这是我的 Shopify 页面上的代码部分：

```
<form action="/cart/add" method="post">
        {% include 'bracelet-hair' %}<br>     
        {% include 'braid-style' %}<br>
            {% if product.variants.size > 1 %}
            <div id="product-variants">      
                <select id="product-select" name="id">
                    {% for variant in product.variants %}
                        <option value="{{ variant.id }}">{{ variant.title }}</option>
                    {% endfor %}
                </select>
            </div><!-- product variants -->
             {%include 'engraving' %} 
```

这是我的雕刻片段，这是我要显示的代码和内容。（下面的 '269270608' 是我的变体 ID）

```
<script>
$("#product-select").change(function(){
 var choice = $(this).val()

 if (choice == '269270608'){

//$('#checkbox').change(function(){
    $('#hide2').removeClass('hidden2');  //remove class here
//});

 }else{
    $('#hide2').removeClass().addClass('hidden2');  //else addclass
 }

});
</script>

<div id="hide2" class="hidden2">    
        <input type="checkbox" name="vehicle" value="Bike" />Engraving?
        <br>    
    Engraving Message:
        <input type="text" name="engraving">
        <br>    
</div> 
```

不确定 Shopify 语法有多大，但我没有运气就去了他们的论坛。感谢您的帮助，如果您需要更多信息，请告诉我。

# iphone - 以不同的时间间隔读取 nsmutablearray

> ID：14570288
> 
> 赞同：0
> 
> 时间：2013-01-28T20:07:30.113
> 
> 标签：iphone, ios6

我有这个 NSMutable 数组。每两秒一读并更新textview。但现在我想要的是以不同的时间间隔从 NSMutable 数组中一一读取，而不是每两秒。我怎么能做到这一点。

```
- (void)viewDidLoad{
myArray = [[NSMutableArray alloc]initWithObjects:@"String1",@"String2",@"String3",@"String4", @"String5",..... nil];  

[NSTimer scheduledTimerWithTimeInterval:2.0
                             target:self
                           selector:@selector(updateText:)
                           userInfo:nil
                            repeats:YES];

- (void)updateText:(NSTimer *)theTimer 
    {

        if (index < [myArray count])
        {
            myTextView.text = [myArray objectAtIndex:index];
            index++;
        }
        else
            index = 0;
        }
} 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:09:15.763

很简单：每次取消计时器并以所需的时间间隔重新创建它（当然要挂在对计时器的引用上）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T20:25:42.017

如果您只需要在每次加载视图时更改间隔值，您可以尝试使用随机数，在下一个示例中，它将返回 2 到 10 之间的随机数：

```
[NSTimer scheduledTimerWithTimeInterval:arc4random() % 10 + 2
                             target:self
                           selector:@selector(updateText:)
                           userInfo:nil
                            repeats:YES]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T20:11:51.263

在您的 updateText 选择器中，只需创建一个具有不同间隔的新 NSTimer ，直到数组中没有更多对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T20:58:36.843

使用 performSelector:withObject:afterDelay，但使用随机延迟！

[self performSelector:@selector(updateText:) withObject:nil afterDelay:arc4random()%10+2];

# r - ggplot 中的特殊变量（..count..、..density.. 等）

> ID：14570293
> 
> 赞同：46
> 
> 时间：2013-01-28T20:07:50.633
> 
> 标签：r, ggplot2

考虑以下几行。

```
p <- ggplot(mpg, aes(x=factor(cyl), y=..count..))

p + geom_histogram()   
p + stat_summary(fun.y=identity, geom='bar') 
```

理论上，最后两个应该产生相同的情节。在实践中，`stat_summary`失败并抱怨缺少所需的 y 美学。

为什么我不能使用`..count..`in `stat_summary`？我在文档信息中找不到有关如何使用这些变量的任何地方。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-01-28T20:49:45.230

扩展@joran 的评论，ggplot 中带有双句点的特殊变量（`..count..`,`..density..`等）由原始数据集的统计转换返回。那些特定的由`stat_bin`隐式调用的返回`geom_histogram`（注意在文档中`stat`参数的默认值为`"bin"`）。您的第二个示例调用了一个不同的 stat 函数，该函数不创建名为`..count..`. 你可以得到相同的图表

```
p + geom_bar(stat="bin") 
```

在较新的版本中`ggplot2`，也可以使用该`stat`函数而不是封闭的`..`，因此`aes(y = ..count..)`变为`aes(y = stat(count))`.

# .net - 向远程计算机发送 ToastNotification

> ID：14570294
> 
> 赞同：0
> 
> 时间：2013-01-28T20:07:51.087
> 
> 标签：.net, windows-8, nlog

有什么方法可以向远程计算机发送 toast 通知。我想编写一个在远程计算机上显示（Windows8）Toast 的 NLog 目标。

我不知道如何完成这项任务是否有人有解决方案或有关该主题的一些信息？

如果可能的话，我宁愿在没有显示烤面包的计算机上运行的额外应用程序/程序的情况下完成此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:18:50.987

听起来您想要的是推送通知。不幸的是，如果没有注册接收推送通知的应用程序，您将无法显示敬酒。好消息是，应用程序本身不需要运行来显示祝酒词。

[推送通知的文档](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh868244%28v=win.10%29.aspx)应该为您提供良好的起点。

# html - 如何防止样式应用于某些 HTML 片段？

> ID：14570295
> 
> 赞同：0
> 
> 时间：2013-01-28T20:07:57.933
> 
> 标签：html, css

我正在为一些可重用的组件创建文档。文档页面将包含该组件的演示以及如何重新创建它的文档。例如，我可能正在演示这个 HTML：

```
<div class="top-level">
    <p>Hello</p>
</div> 
```

哪个有这个CSS：

```
.top-level { background: red; } 
```

现在，我想要一个记录如何创建重新创建它的旁白：

```
<aside>
    <p>All top level content goes into a div with a class of "top-level:</p>
    <code><div class="top-level"></div></code>
</aside> 
```

问题是“代码”标签之间的文本仍在获取 div.top-level 的样式。我希望它简单地显示为代码。我确定我可以覆盖所有内容，但是有人知道更优雅的解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:22:27.790

Any code to appear on a Web page should be placed inside a `<code>` element. Usually the content of the `<code>` element is presented in a monospaced font, just like the code in most programming books.

But you must still escape your `<` and `>` (`&lt;`,`&gt;`), that the browser knows that you don't want the tags rendered out as html.

The correct expression between your `<code>` tags would be `&lt;div class="top-level"&gt;&lt;/div&gt`.

# c++ - 在每个分号后有一个带有反斜杠的 c++ 代码块是什么意思？

> ID：14570297
> 
> 赞同：16
> 
> 时间：2013-01-28T20:08:06.273
> 
> 标签：c++, syntax

我最近看到了 C++ 代码块，其中每个分号后面都有一个“\”。我觉得这很奇怪。也许这只不过是一个错误或一些长期被遗忘的评论的残余（尽管那些有一个正斜杠“/”）。这个“\”对代码有什么影响？

她是一个代码示例。

```
#define PE_DECLARE_CLASS(class_) \
typedef class_ MyClass; \
static void setSuperClasses(); \ 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-28T20:13:12.540

反斜杠作为一行中的最后一个字符会导致该行与下一行连接以进行预处理。对于常规 C++ 解析换行符只是空格，所以这无关紧要。但是预处理器指令，特别是宏定义在行尾结束。

使用反斜杠续行允许跨多个源文本行格式化长宏主体。

# android - 在没有外部存储的设备中使用扩展补丁

> ID：14570298
> 
> 赞同：2
> 
> 时间：2013-01-28T20:08:09.463
> 
> 标签：android, sd-card, apk-expansion-files

我正在开发一个超过 50mb apk 限制的 Android 应用程序。因此，我需要使用扩展文件。我已经正确实现了从扩展补丁中读取资源的解决方案，但是我遇到了没有外部存储的设备的问题。

当设备具有外部存储时，它可以完美运行。扩展文件保存在 /mnt/sdcard/Android/obb/main.1.package.com （示例）但当设备没有 sdcard 时，此解决方案不起作用。

如何在没有外部 SD 卡的设备上使用扩展补丁？是否有另一个文件夹可以存储 .obb 文件以便我可以加载我的资源？

我正在使用谷歌的下载器实现。

编辑：

我知道 getExternalStorageDirectory 并不一定意味着“外部”，它似乎与谷歌 Nexus 设备有关......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T12:09:28.207

谷歌对此非常清楚：

> Google Play 为您的应用程序托管扩展文件，并将它们免费提供给设备。扩展文件保存到设备的共享存储位置（SD 卡或 USB 可安装分区；也称为“外部”存储），您的应用可以访问它们。

如果您想将文件保存到内部存储，我认为您必须创建自己的 Web 服务来托管您的文件并将它们下载到内部存储。我认为这会浪费工作，因为大多数手机都带有 SD 或内置 SD 卡。

# java - 通过 ANT 检索 SVN 修订版

> ID：14570300
> 
> 赞同：1
> 
> 时间：2013-01-28T20:08:16.677
> 
> 标签：java, svn, ant

所以，我有一个 Java 项目，我为它构建了一个（相当复杂的）ANT 构建文件。在这个文件中，我有编译、JAR 和测试我的代码的目标，它们都运行良好。

这个项目的有趣之处在于团队成员正在他们的个人计算机上工作，其中许多都在 Windows 7 上运行 Eclipse Juno。我不能保证我添加到 ANT 的任何库都可以在其他成员的计算机上使用. 所以，我试图在运行时引用所有必要的库。但是，当我尝试获取当前版本号时出现错误。

**错误：**

```
svntest:
[echo] Svn4Ant: JWare AntXtras/Svn4Ant 3.0.0, Aug-22-2011, SVNKit: SVN/1.7.8 SVNKit/1.7.8 (http://svnkit.com/) r9538_v20130107_2001
[svn:revget] Unable to execute svnclient subcommand revget. Reason: "svn: E155021: The path {Project Repository} appears to be part of a Subversion 1.7 or greater
[svn:revget] working copy.  Please upgrade your Subversion client to use this
[svn:revget] working copy.". 
```

**ANT 类路径：**

```
AntClassLoader[C:\Users\User\workspace\RoboLib\utils\ant-commons-net.jar;
C:\Users\User\workspace\RoboLib\utils\ant-googlecode-0.0.3.jar;
C:\Users\User\workspace\RoboLib\utils\commons-net-3.2.jar;
C:\Users\User\workspace\RoboLib\utils\jw-antxtras.jar;
C:\Users\User\workspace\RoboLib\utils\jw-svn4ant-admin.jar;
C:\Users\User\workspace\RoboLib\utils\jw-svn4ant.jar; 
C:\Users\User\workspace\RoboLib\utils\svnkit-1.7.8.jar;
C:\Users\User\workspace\RoboLib\utils\svnkit-cli-1.7.8.jar;
C:\Users\User\workspace\RoboLib\utils\svnkit-javahl16-1.7.8.jar] 
```

所有这些库都是最新版本，它们正在测试的系统是在 Windows 7 上运行的 Eclipse Juno。

**相关的 ANT 目标：**

```
<project default="run" name="WAVE RoboLib SDK" basedir="." xmlns:svn="jwaresoftware.svn4ant.client">

... 

<target name="svntest">
    <taskdef uri="jwaresoftware.svn4ant.client"     
    resource="org/jwaresoftware/svn4ant/client/antlib.xml">
        <classpath>
            <fileset dir="utils/">
                <include name="**.jar"/>
            </fileset>
        </classpath>
    </taskdef>

    <svn:libcheck/> 
    <echo message="Svn4Ant: ${svn4ant.label}, SVNKit: ${svnkit.label}"/>

    <svn:server id="my.repo" isdefault="yes" authcache="no" >
        <url value="${svn.url}"/>
        <credential username="un" password="pw"/>
    </svn:server>

    <svn:revget path="." property="build.reporev" />

    <echo message="${build.reporev}" />
</target>
</project> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:42:57.490

看起来 svn4ant 不支持 svn 1.7 存储库，请参阅有关此主题的[相关讨论](http://subversion.1072662.n5.nabble.com/Issue-with-svnkit-version-1-7-5-td175267.html)以及包括源代码参考在内的说明。

从[svn4ant 发布计划](http://jwaresoftware.org/wiki/svn4ant/ourplans)来看，没有计划很快支持 svn 1.7 工作副本。因此，您应该寻找另一种方法来获取修订信息。

一种选择是解析`svn info`输出，用于`svnversion`获取工作副本的修订版或使用提交后挂钩将修订号存储在其他地方。

# ruby-on-rails - 每当 gem 不执行任务时

> ID：14570304
> 
> 赞同：3
> 
> 时间：2013-01-28T20:08:43.747
> 
> 标签：ruby-on-rails, path, crontab, whenever, whenever-capistrano

我设置了一个 Rails 项目来使用Whenever gem。现在我使用 Capistrano 部署我的项目，并且这些任务很好地添加到了 crontab 列表中。但是当我只看到一行时：

```
/bin/bash: bundle: command not found 
```

所以我在网上阅读了几篇文章，所以我在我的 schedule.rb 文件中添加了这个

```
env 'PATH', ENV['PATH'] 
```

所以你应该认为问题已经解决了，因为这会将下一行添加到 crontab 中：

```
PATH=/var/rails/alfa_paints/shared/bundle/ruby/1.9.1/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games 
```

因此，当命令执行时，您应该认为 b​​undle 在路径中。但仍然没有运气。我使用单独的用户运行命令和部署。因此，为了确保一切都与该用户一起运行，在这种情况下是部署者。我承担了部署者的角色并按照 crontab 中的指定运行了命令。执行此命令时我没有遇到任何问题。

我的选择已经不多了，想知道是否还有其他人经历过这种奇怪的行为？我希望能给一些建议。这是我的 crontab 中的输出：

```
# Begin Whenever generated tasks for: alfa_paints
 PATH=/var/rails/alfa_paints/shared/bundle/ruby/1.9.1/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games

0 1 * * * /bin/bash -l -c 'cd /var/rails/alfa_paints/releases/20130127192223 && RAILS_ENV=production bundle exec rake alfa:cleanup --silent >> /var/rails/alfa_paints/shared/log/whenever.log 2>&1'

# End Whenever generated tasks for: alfa_paints 
```

任何帮助欢迎！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-22T17:45:12.810

您需要在 crontab 中传递必要的环境变量。

在您的 crontab 顶部添加这些行 (crontab -e)

（显然，您将修改变量的值以表示您的环境中的变量）

（在这种情况下，我使用的是 RVM）

PATH=/home/deploy/.rvm/gems/ruby-2.0.0-p247/bin:/home/deploy/.rvm/gems/ruby-2.0.0p247@global/bin:/home/deploy/.rvm/ rubies/ruby-2.0.0p247/bin:/home/deploy/.rvm/bin:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games:/usr/ bin/:/home/deploy/.rvm/bin

GEM_HOME=/home/deploy/.rvm/gems/ruby-2.0.0-p247

GEM_PATH=/home/deploy/.rvm/gems/ruby-2.0.0-p247/home/deploy/.rvm/gems/ruby-2.0.0-p247@global

MY_RUBY_HOME=/home/deploy/.rvm/rubies/ruby-2.0.0-p247

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-03T12:08:05.053

你用的是哪个外壳？因为我看到每当在作业命令中添加“bash -l -c”。无论设置

> 设置：job_template，无

或者如果您使用的是 zsh

> 设置：job_template，“zsh -l -c ':job'”

这解决了我的问题

# opengl - OpenGL glRotatef

> ID：14570305
> 
> 赞同：6
> 
> 时间：2013-01-28T20:08:45.317
> 
> 标签：opengl, glrotate

和有什么区别

```
glRotatef(angle, 1.0f, 0.0f, 0.0f);
glRotatef(angle, 0.0f, 0.0f, 1.0f); 
```

和

```
glRotatef(angle, 1.0f, 0.0f, 1.0f); 
```

为什么当我将第二个参数 1.0f 更改为 5.0f 时没有任何变化？最后，如何围绕 x=5 而不是围绕 x=0 旋转对象？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T20:11:30.560

如果你想旋转，`x=5`你应该做一个`glTranslate`to`x=5`和你的 y 坐标是什么，然后`glRotate`再`glTranslate`回到原点。

所以像

```
glTranslate(5, 0, 0);
glRotatef(...);
glTranslate(-5, 0, 0); 
```

对于第一个问题，我将包含@genpfault 的完整答案。这是由于对`glRotatef()`您传入的向量进行了向量归一化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T20:11:22.420

> 为什么当我将第二个参数 1.0f 更改为 5.0f 时没有任何变化？

您传递的向量[`glRotatef()`](http://www.opengl.org/sdk/docs/man2/xhtml/glRotate.xml)在使用前已标准化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T20:33:53.410

您不能简单地通过将轴相加来对旋转求和，它不会产生相同的结果级联变换。如果确实如此，则表明变换是可交换的，但显然不是。

拾起一个物体，绕 Y 轴旋转 90 度，然后绕 X 轴旋转 90 度。看它是如何定向的。现在返回原始位置，在 X 轴上旋转 90 度，然后在 Y 轴上旋转 90 度。注意方向不同。

虽然可以找到与任一排序产生相同结果的旋转，但它与总和不同。

当您改变其他参数（假设您统一缩放它们）时，没有任何变化，因为旋转轴是标准化的。

# r - 填充R渐变曲线

> ID：14570317
> 
> 赞同：11
> 
> 时间：2013-01-28T20:09:23.617
> 
> 标签：r, 3d

我有一条我正在使用 R 制作的曲线（参见下面的代码）：

```
library(rgl)

y = seq(-5,25,by=0.01)
x = seq(5,20,by=0.02)

sd = 0.3*x
NAs <- rep(NA, length(x)*length(y))
z <- matrix(NAs, length(x), byrow = T)
for(i in seq(1,length(x))) {
    for(j in seq(1,length(y))) {
        val = dnorm(y[j],mean=7.5,sd=sd[i])     
        z[i,j] = val
        if(z[i,j] < 0.02) {
            z[i,j] = NA
        }
    }
}

col <- rainbow(length(x))[rank(x)]        

open3d()
persp3d(x,y,z,color=col,xlim=c(5,20),ylim=c(5,10),axes=F,box=F,xlab="exp",ylab="obs",zlab="p") 
```

这就是它的作用： ![在此处输入图像描述](../Images/612f6c361bf71e1d15db81165762fc08.png)

稍微旋转一下，就可以看到这是一个空心管型的人偶。

![在此处输入图像描述](../Images/0f5cda67ceb8d36c8380c2a0c0850569.png)

但我试图让它被填充（用颜色渐变），这样它就不是空心的。想象一下在任何位置进行切片，如果有意义的话，你会得到一个 2D 平面，而不是 2D 曲线。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T09:16:27.710

要填充 3-d 中的间隙（2-d 形状），您不应该使用线条，因为它们是 1-d 对象。用三角形或四边形（具有四个角的平面对象）填充间隙。

```
library(rgl)

y <- seq(-5,25,by=0.1)
x <- seq(5,20,by=0.2)
z <- outer(.3*x, y, function(my.sd, my.y) dnorm(my.y, mean=7.5, sd=my.sd))
z[z < .02] <- NA

col <- rainbow(length(x))[rank(x)]        
xn <- length(x)
yn <- length(y)

open3d()
persp3d(x, y, z, color=col, xlim=c(5,20), ylim=c(5,10), axes=F, box=F,
        xlab="exp", ylab="obs", zlab="p")
rgl.quads(rep(x[xn], (yn-1)*4),
          sapply(2:yn, function(i) y[i-c(0:1,1:0)]),
          sapply(2:yn, function(i) c(z[xn,i-0:1], 0, 0)),
          color=col[xn]) 
```

![在此处输入图像描述](../Images/35b60a9d98e22f03635ea249ff7a0033.png)

如果您对 R 不太熟悉，and 命令可能会让人感到困惑，但可以将它们视为矢量化`outer`循环。该调用对坐标进行外连接以一次性创建所有内容，并且s 提取四边形的坐标。在 R（或任何其他高级非编译语言）中避免循环的原因是它们非常慢并且还使代码变得庞大。`sapply``for``outer``z``sapply``for`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-24T18:40:28.273

在花费大量时间找出更优雅的东西之后，最好的方法是手动添加行来填补空白：

```
yy = seq(-5, 25, by=0.01)
xx = rep(5,length(yy))
sds = 0.7 * xx
val = rep(NA, length(xx))
for(i in seq(1,length(val))) {
    val[i] = dnorm(yy[i],mean=rep(7.5,length(xx[i])),sd=sds[i])
    t = 0.06
    if(val[i] > 0.02) {
        #val[i] = t
        lines3d(c(xx[i],xx[i]),c(yy[i],yy[i]),c(0.02,val[i]),color="red")
    }
} 
```

# python - 如何使用 tkinter python 创建迷宫类型界面？

> ID：14570318
> 
> 赞同：1
> 
> 时间：2013-01-28T20:09:23.787
> 
> 标签：python, user-interface, interface, tkinter, maze

嗨，我想知道是否有一种方法可以创建迷宫类型的界面（一个非常简单的界面），因为我正在制作一款涉及 pacman 类型感觉但规模更小更简单的游戏。我想使用 python tkinter 来做到这一点。谢谢你。我希望使用网格来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:40:23.247

Tkinter 有一个[画布](http://www.tkdocs.com/tutorial/canvas.html)小部件，您可以在其上绘制迷宫。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:40:43.293

正如 gddc 指出的那样，`TkInter`可能不是最好的 API。`TkInter`旨在使从传统的 GUI 小部件（按钮、复选框、选项菜单等）创建界面变得容易。对于其他 GUI 框架（如`Qt`和`wx`. 虽然您可能可以通过在某些框架中绘制自定义边框或类似的东西来滥用网格布局或电子表格小部件，但您可能不希望这样做。（例如，在 TkInter 中，我相信使用[`Grid`](http://effbot.org/tkinterbook/grid.htm)几何管理器，经过大量工作，可以让您制作可以在您的 linux 机器上运行的东西，但对于 Windows、Mac 甚至在具有与您不同的默认主题的 linux/X 上。我认为这不是您想要的。）

话虽如此，绘制 2D 迷宫非常简单。您所要做的就是创建一个[`canvas`](http://effbot.org/tkinterbook/canvas.htm)，并使用`create_line`类似的命令在其上绘制。如果您想跟踪玩家的当前位置，您可以自己执行此操作，并使用例如`create_bitmap`. 等等。

# php - 如何根据返回的 MySQL 对象设置对象变量

> ID：14570319
> 
> 赞同：0
> 
> 时间：2013-01-28T20:09:24.570
> 
> 标签：php, mysql

我正在使用我创建的新类对象。该类包含 30 多个变量，需要根据 MySQL 查询返回的结果进行设置。

我目前正在设置这样的变量：

```
 class MyClass {
        public static $id = null;
        public static $name = null;
        public static $description = null;
        public static $tags = null;
        public static $url = null;

        public function __construct( $params = null ) {

            if( $params != null ) {
                $this->id = $params->id;
                $this->name = $params->name;
                $this->description = $params->description;
                $this->tags = $params->tags;
                $this->url = $params->url;
            }
        }
    } 
```

我想要做的是在构造函数中，循环访问 $params 变量并根据 $params 中的键->值对自动设置类中的变量。

所以在伪代码中：

```
for( size of $params ) {
    $this->($paramkeyname) = $params->($samekeyname);
} 
```

这是否可以使用动态变量调用或者任何人都可以提出更简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:10:51.520

只需使用一个`foreach`

```
foreach($params AS $key => $val){
    $this->$key = $val;
} 
```

只要确保你传入一个数组

```
public function __construct(array $params = array()) { 
```

# python - 从平面元组字典中创建一个带有诅咒的网格

> ID：14570321
> 
> 赞同：0
> 
> 时间：2013-01-28T20:09:34.333
> 
> 标签：python

好的，我一直在尝试找出最好的方法来做到这一点，但它只是没有找到我。我有一本带有网格点的字典...

```
{(0,0):...(0,1):...} 
```

我想使用`addch`in可视化这本字典`curses`。

字典中的点，要打印在屏幕上，必须像这样转换：

```
x, y
0,0 => 1,1
1,0 => 3,1
2,0 => 5,1
3,0 => 7,1

0,0 => 1,1
0,1 => 1,3
0,2 => 1,5
0,3 => 1,7 
```

![在此处输入图像描述](../Images/52d3862812f36d7ed117581086e3189c.png)

我想不出一种优雅的方式来`(0,3)`进入`(1,7)`（屏幕网格的中心）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:12:03.853

看起来转换只是

```
x1 = 2 * x_0 + 1
y1 = 2 * y_0 + 1 
```

因此，如果你想以这种方式转换字典，你可以这样做：

```
new_dict = {(2 * x + 1, 2 * y + 1): v for (x, y), v in d.items()} 
```

例如：

```
d = {(1, 3): 12, (7, 1): 90, (3, 1): 8, (1, 5): 15, (5, 1): 40, (1, 1): 1}
new_dict = {(2 * x + 1, 2 * y + 1): v for (x, y), v in d.items()}
print new_dict
# {(1, 3): 12, (7, 1): 90, (3, 1): 8, (1, 5): 15, (5, 1): 40, (1, 1): 1} 
```

# user-interface - 浏览器以一种奇怪的方式呈现

> ID：14570324
> 
> 赞同：0
> 
> 时间：2013-01-28T20:09:52.883
> 
> 标签：user-interface, jsf-2, primefaces

首先，让我给你一些信息。我正在用这个开发一个网络应用程序：

*   网豆 7.2.1
*   JSF-2 莫哈拉 2.1.1
*   Primefaces 3.4.2
*   铬/火狐

在其中一个页面（实际上是索引页面）中有一个面板（p:panel），其中包含一个数据网格（p:dataGrid）。好吧，当数据网格有几个元素（两个以上）时，整个页面以一种非常奇怪的方式呈现。最好的将向您展示部分屏幕截图。

![前](../Images/5e6dff1f2025abccb8066a3eb920f553.png)

如您所见，出现了两个滚动条（水平和垂直）。如果不是，我认为这是一个代码问题，因为只需访问浏览器的开发人员工具，页面就会重新呈现并且滚动条消失。这是结果：

![后](../Images/80611ee6e67004d595d72d597ca7f782.png)

Chrome 和 Firefox 浏览器具有相同的行为。我不知道如何面对这个问题。我什至不知道我可以给你什么样的信息，因为我不知道问题是出在我的代码中，还是 Primefaces 错误或什么。大家有遇到过类似的问题吗？我想要你的任何建议。提前致谢。

编辑 - 这是一个非常简化的视图结构：

```
<p:layoutUnit position="west" size="66%">            
    <p:layoutUnit position="center">
        <h:inputHidden .../>
        <h:inputHidden .../>
        <p:panel style="height: 95%" styleClass="transparent">   
            <p:dataGrid ...>
                <h:form>
                    <p:commandButton style="width: 100%" ...>
                        <f:setPropertyActionListener ... />
                    </p:commandButton>
                </h:form>
            </p:dataGrid> 
        </p:panel>
    </p:layoutUnit>

    <p:layoutUnit position="south" size="33%">
        <p:panel style="height: 90%" styleClass="transparent">
        </p:panel>
    </p:layoutUnit>
</p:layoutUnit>

<p:layoutUnit position="center" size="33%">
    <p:layoutUnit position="center">
        <p:panel>
            <p:panel id="map"/>
        </p:panel>
    </p:layoutUnit>

    <p:layoutUnit position="south" size="46%">
        <p:commandButton .../>
    </p:layoutUnit>
</p:layoutUnit> 
```

# android - 如何计算 Handler 中排队的消息数？

> ID：14570327
> 
> 赞同：4
> 
> 时间：2013-01-28T20:10:06.457
> 
> 标签：android, event-handling

我正在使用[处理](http://developer.android.com/reference/android/os/Handler.html)程序，我想计算待处理消息的数量。但是，我没有看到允许我获取此信息的方法。

是否可以 ？

似乎因为有一个`hasMessages(int what)`，为什么不公开类似的东西`getMessageCount(int what)`？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-14T20:54:31.927

与其使用 Handler，更好的解决方案是实现 Queue。

# opengl - OpenGL 裁剪、深度和相机

> ID：14570333
> 
> 赞同：0
> 
> 时间：2013-01-28T20:10:32.323
> 
> 标签：opengl, camera, clipping, depth, opentk

剪辑/查看问题不确定

我只是想在窗口形式（使用OpenTK）中旋转和缩放一个矩形框（线不是四边形）这很简单，但是当我缩放/缩放线条的部分时，它们不应该被剪裁

尝试使用透视和深度范围等以及观察，缩放绘图而不是移动相机等。但我似乎无法获得我想要的行为。

问题视频： [http ://www.youtube.com/watch?v=sDV4_LKOgVc&feature=youtu.be](http://www.youtube.com/watch?v=sDV4_LKOgVc&feature=youtu.be)

```
Private Sub GlControl1_Paint(sender As Object, e As PaintEventArgs) Handles GlControl1.Paint
    If (_STARTED = False) Then Return

    'Set Up
    GL.Clear(ClearBufferMask.ColorBufferBit)
    GL.Clear(ClearBufferMask.DepthBufferBit)

    Dim eye = New Vector3(cam_x, cam_y, cam_z)
    Dim lookat = New Vector3(cam_x - Pan_X / GlControl1.Width, cam_y - pan_Y / GlControl1.Height, cam_z + look_z)
    Dim camera = Matrix4.LookAt(eye, lookat, Vector3.UnitY)

    TextBox1.Text = cam_x.ToString + ", " + cam_y.ToString + ", " + cam_z.ToString
    GL.MatrixMode(MatrixMode.Modelview)

    GL.LoadIdentity()
    GL.LoadMatrix(camera)

    'Draw Items

    'Perform panning action
    'Applies to all items in GL window
    GL.Translate(Pan_X / GlControl1.Width, pan_Y / GlControl1.Height, 0.0)

    'Initial View Angle
    'GL.Rotate(45, 1.0, 1.0, 0.0)

    If show_axes Then draw_axes()

    GL.PushMatrix() 'Save matrix

    'Perform rotations
    GL.Rotate(CType(_Part.XRotation, Single), 1.0F, 0.0F, 0.0F)
    GL.Rotate(CType(_Part.YRotation, Single), 0.0F, 1.0F, 0.0F)
    GL.Rotate(CType(_Part.ZRotation, Single), 0.0F, 0.0F, 1.0F)

    'Resize
    'GL.Scale(Zoom, Zoom, Zoom)

    GL.PushMatrix() ' Save Matrix for center translation
    GL.Translate(-_Part.Length / 2, -_Part.Thickness / 2, _Part.Width / 2)   'Center Object

    'Draw the box
    draw_object(CSng(_Part.Length), CSng(_Part.Width), CSng(_Part.Thickness))

    GL.PopMatrix()

    GlControl1.SwapBuffers()

End Sub 
```

* * *

```
 Private Sub GlControl1_MouseWheel(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles Me.MouseWheel
    If e.Delta > 0 Then
        'Zoom = CSng(Zoom + Zoom_inc)
        cam_z -= cam_inc
    Else
        'Zoom = CSng(Zoom - Zoom_inc)
        cam_z += cam_inc
    End If
    GlControl1.Invalidate()
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:26:31.830

如果您使用类似[`gluPerspective()`](http://www.opengl.org/sdk/docs/man2/xhtml/gluPerspective.xml)确保`zNear`是正数且非零的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:12:04.210

我想到了。我做对了，但 OpenTK 希望你像这样声明视角

Dim perspective1 As Matrix4 = OpenTK.Matrix4.CreatePerspectiveFieldOfView(MathHelper.PiOver4, _CSng((GlControl1.Width) / (GlControl1.Height)), 0.1, 1000)

GL.LoadMatrix(perspective1)

这似乎很奇怪。使用 MathHelper.PiOver4 而不是 45.0f 解决了问题

# php - 检索当前用户的 linux 密码

> ID：14570334
> 
> 赞同：1
> 
> 时间：2013-01-28T20:10:34.540
> 
> 标签：php, linux, security, passwords

我正在尝试为需要使用其 cpanel/linux 用户名和密码的多个客户端实现一个 php 脚本。为了避免必须为每个客户单独设置它，我希望能够自动设置所需的 3 个变量、用户名和密码。用户名做了如下

$user = exec('whoami');

有没有办法找回那个密码呢？

感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T20:13:24.863

那将是一个重大的安全漏洞！您永远无法检索用户密码，只有拥有 root 权限才能更改密码。linux 中的密码以单向方式加密。即你可以从纯文本到散列，但你永远不能从必须回到纯文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T20:12:14.977

不，没有办法以纯文本形式检索 linux 用户密码。

Cpanel 有一个 API。使用它来登录您的用户。

# android - 更新文件夹修改日期

> ID：14570337
> 
> 赞同：2
> 
> 时间：2013-01-28T20:10:41.930
> 
> 标签：android, fileinfo, metatag

当文件夹内容被修改时，系统不会更新文件夹的修改日期。有没有办法在修改内容时将文件夹设置为已修改？

我尝试将文件夹重命名为其他名称并将其重命名，但这不会更改文件夹的修改日期。但是，当我重命名文件夹时，它会更新修改日期，但我不想仅仅为此重命名文件夹。. . 也许每次更改内容时都在文件夹中设置一些没什么大不了的东西？我只需要代码来更改文件夹并更新其修改日期。不需要内容更改的侦听器。

提前感谢您的回答。

ps 这对我来说是个问题，因为我正在使用 listView 的文件夹并按修改日期列出它们。单击该文件夹会在另一个活动中打开该文件夹的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:22:48.733

您看过 Android 参考资料吗？

[public boolean setLastModified（长时间）](http://developer.android.com/reference/java/io/File.html#setLastModified%28long%29)应该做你正在寻找的东西。

使用它很简单：

```
fileOrFolder.setLastModified( yourDateInMilliseconds ); 
```

# c++ - MySQL 连接器/C++ BAD ACCESS 崩溃

> ID：14570347
> 
> 赞同：4
> 
> 时间：2013-01-28T20:11:27.783
> 
> 标签：c++, exc-bad-access, mysql-connector

在 Xcode 中使用 C++ 我尝试使用 MySQL Connector/C++ 访问 MySQL 数据库。问题是程序（用 Xcode 编译）总是崩溃

```
EXC_BAD_ACCESS (code=13, address=0x0) 
```

打电话时

```
driver->connect(url, user, pass) 
```

在 Xcode 中，我创建了一个完整的新项目（OS X > 命令行工具），在 main.cpp 中插入了代码（见下文），添加了 Boost 和 MySQL 连接器标头包含路径以及 libmysqlcppconn.6.1.1.1.dylib 作为链接库并点击运行按钮。

接下来是，当我使用手动编译程序时

```
c++ -o test -I /usr/local/mysqlConnector/include/ -lmysqlcppconn main.cpp 
```

该程序运行良好，并且还在表上运行 INSERT 语句。

程序代码取自 MySQL Connector/C++ 示例，即 pthreads.cpp 示例，但被截断为基本部分：

```
/* Standard C++ includes */
#include <stdlib.h>
#include <iostream>
#include <sstream>
#include <stdexcept>

#include <mysql_connection.h>
#include <mysql_driver.h>

#include <cppconn/driver.h>
#include <cppconn/exception.h>
#include <cppconn/resultset.h>
#include <cppconn/statement.h>

std::string url;
std::string user;
std::string pass;
std::string database;

/**
 * Usage example for Driver, Connection, (simple) Statement, ResultSet
 */
int main(int argc, const char **argv)
{
    sql::Driver *driver;
    std::auto_ptr< sql::Connection > con;

    url = "tcp://127.0.0.1:3306";
    user = "appserver";
    pass = "testpw";
    database = "appserver";

    try {
        driver = sql::mysql::get_driver_instance();

        /* Using the Driver to create a connection */
        con.reset(driver->connect(url, user, pass));
        con->setSchema(database);

    sql::Statement* stmt = con->createStatement();
    stmt->execute("INSERT INTO testtable (testnumber) values (5)");
    } catch (sql::SQLException &e) {
        return EXIT_FAILURE;
    } catch (std::runtime_error &e) {
        return EXIT_FAILURE;
    }

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T23:46:13.357

好的，问题解决了。

这里的问题是一个编译标志。MySQL 连接器/C++ 是在没有
`-stdlib=libc++`标志的情况下编译的，但是 Xcode 将编译/链接标志添加到它的命令中。这导致了崩溃。这也解释了为什么手动编译的程序可以工作，因为我没有将该标志包含在编译命令中。

为了更清楚：我用`-stdlib=libc++`标志重新编译了 MySQL 连接器/C++。然后 Xcode 编译的程序对我来说很好。为了编译我添加的 MySQL 连接器/C++

```
-DMYSQL_CXXFLAGS=-stdlib=libc++ 
```

`cmake`安装连接器时需要运行的命令。

```
make VERBOSE=1 
```

然后证明在编译连接器源时实际使用了该标志。

# javascript - 如何从 jQuery .html 函数中获取值

> ID：14570352
> 
> 赞同：1
> 
> 时间：2013-01-28T20:11:49.450
> 
> 标签：javascript, jquery, html, ajax

如何从 jQuery .html() 函数中获取以下代码的值？

```
$('#div_id').html('<input name="textbox1" id="txt1" type="text" size="40" maxlength="350">'); 
```

代码的工作原理是这样的，单击按钮会生成一个文本框。我有另一个按钮（id="btn2"），单击这个按钮我想从这个文本框中获取值（id="txt1"）并将其分配给一个变量。

我制作的 btn2 的操作代码：

```
$('#btn2').bind("click", function(){
       variable = $('#txt1').val();
       alert(variable);
}); 
```

我无法检索文本框的值，因为它是使用 .html() 生成的 请帮我解决这个问题！

谢谢，~Ganesh

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:25:02.900

在我看来，您的初始文本框生成代码缺少该`value`属性。

如果我使用类似的东西，它对我有用：

```
$('#div_id').html('<input name="textbox1" id="txt1" type="text" size="40" maxlength="350" value="test">'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:58:37.957

可能无法正常工作，因为您没有等待文档加载。这可以解释为什么所有发布的小提琴都可以工作，而您的代码却不能。我相当肯定 JS fiddle 会在运行 javascript 之前等待。

```
$(document).ready(function () {
    $('#div_id').html('<input name="textbox1" id="txt1" type="text" size="40" maxlength="350">');
    $('#btn2').bind("click", function () {
        var variable = $('#txt1').val();
        alert(variable);
    });
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-28T20:23:05.917

$(function () { $('#div_id').html($('')); }); $('#btn2').live("点击", function () { var variable = $('#txt1').val(); alert(variable); });

# ios - 从 ios 应用程序的打开图表中发布意外结果。除照片外的所有参数均未显示在 facebook 中，但可在 Graph API 资源管理器中使用

> ID：14570355
> 
> 赞同：2
> 
> 时间：2013-01-28T20:11:54.427
> 
> 标签：ios, facebook-opengraph

我已经按照字面意思遵循了“5 - Publish Open Graph Story”教程，但我遇到了一些问题。当我使用 Graph API Explorer 时，代码不会生成错误或警告，它会正确显示在我的时间轴中。请点击链接查看快照（[http://drsolution.com.br/testes/starbuzz/open%20graph.png](http://drsolution.com.br/testes/starbuzz/open%20graph.png)）。但是当我的应用程序生成相同类型的代码并发布打开图时，只上传照片，而不是对象或动作。( [http://drsolution.com.br/testes/starbuzz/posted%20by%20ios%20app.png](http://drsolution.com.br/testes/starbuzz/posted%20by%20ios%20app.png) )

这是代码：

```
- (IBAction)publicar:(UIButton *)sender {

    if ([FBSession.activeSession.permissions
     indexOfObject:@"publish_actions"] == NSNotFound) {

    [FBSession.activeSession
     reauthorizeWithPublishPermissions:[NSArray arrayWithObject:@"publish_actions"]
     defaultAudience:FBSessionDefaultAudienceFriends
     completionHandler:^(FBSession *session, NSError *error) {
         if (!error) {
             // re-call assuming we now have the permission
             [self publicar:sender];
         }
     }];
    } else {
    if (self.selectedPhoto) {
        [self postPhotoThenOpenGraphAction];
    } else {
        [self postOpenGraphActionWithPhotoURL:nil];
    }
   }

}

#pragma mark - SCOGProblema and SCOGDenunciarProblema protocols

- (id<SCOGProblema>)problemaObjectForMeal:(NSString*)problema
{
    // This URL is specific to this sample, and can be used to
    // create arbitrary OG objects for this app; your OG objects
    // will have URLs hosted by your server.
    NSString *format =
    @"https://boiling-spire-2233.herokuapp.com/index.php?"
    @"fb:app_id=412805615466140&og:type=%@&"
    @"og:title=%@&og:description=%%22%@%%22&"
    @"og:image=https://s-static.ak.fbcdn.net/images/devsite/attachment_blank.png&"
    @"body=%@";

    // We create an FBGraphObject object, but we can treat it as
    // an SCOGMeal with typed properties, etc. See <FacebookSDK/FBGraphObject.h>
    // for more details.
    id<SCOGProblema> result = (id<SCOGProblema>)[FBGraphObject graphObject];

    // Give it a URL that will echo back the name of the meal as its title,
    // description, and body.
    result.url = [NSString stringWithFormat:format,
                  @"orgdrsolutionpery:problema", problema, problema, problema];

    return result;
}

-(void) postOpenGraphActionWithPhotoURL:(NSString *)photoURL
{
    // First create the Open Graph meal object for the meal we ate.
    id<SCOGProblema> problemaObject = [self problemaObjectForMeal:self.problema];
    NSLog(@"%@",problemaObject);

    // Now create an Open Graph eat action with the meal, our location,
    // and the people we were with.
    id<SCOGDenunciarProblemaAction> action =
    (id<SCOGDenunciarProblemaAction>)[FBGraphObject graphObject];
    action.problema = problemaObject;
    if (self.selectedPlace) {
        action.place = self.selectedPlace;
    }

    if (photoURL) {
        NSMutableDictionary *image = [[NSMutableDictionary alloc] init];
        [image setObject:photoURL forKey:@"url"];

        NSMutableArray *images = [[NSMutableArray alloc] init];
        [images addObject:image];

        action.image = images;
    }

    // Create the request and post the action to the
    // "me/<YOUR_APP_NAMESPACE>:eat" path.
    [FBRequestConnection startForPostWithGraphPath:@"me/orgdrsolutionpery:denuncia"
                                   graphObject:action
                             completionHandler:
     ^(FBRequestConnection *connection, id result, NSError *error) {
         NSString *alertText;
         if (!error) {
             alertText = [NSString stringWithFormat:
                      @"Posted Open Graph action, id: %@",
                      [result objectForKey:@"id"]];
         } else {
            alertText = [NSString stringWithFormat:
                      @"error: domain = %@, code = %d",
                      error.domain, error.code];
     }
     [[[UIAlertView alloc] initWithTitle:@"Result"
                                 message:alertText
                                delegate:nil
                       cancelButtonTitle:@"Thanks!"
                       otherButtonTitles:nil]
      show];
 }
 ];

}

- (void)postPhotoThenOpenGraphAction
{
    [FBSettings setLoggingBehavior:[NSSet
                                setWithObjects:FBLoggingBehaviorFBRequests,
                                FBLoggingBehaviorFBURLConnections,
                                nil]];

    FBRequestConnection *connection = [[FBRequestConnection alloc] init];

    // First request uploads the photo.
    FBRequest *request1 = [FBRequest
                       requestForUploadPhoto:self.selectedPhoto];
        [connection addRequest:request1
         completionHandler:
     ^(FBRequestConnection *connection, id result, NSError *error) {
         if (!error) {
         }
     }
            batchEntryName:@"photopost"
     ];

    // Second request retrieves photo information for just-created
    // photo so we can grab its source.
    FBRequest *request2 = [FBRequest
                       requestForGraphPath:@"{result=photopost:$.id}"];
    [connection addRequest:request2
     completionHandler:
     ^(FBRequestConnection *connection, id result, NSError *error) {
         if (!error &&
             result) {
             NSString *source = [result objectForKey:@"source"];
             [self postOpenGraphActionWithPhotoURL:source];
         }
     }
     ];

    [connection start]; 
```

# sql - 如何在 SQL 中包含“无值”的“OR”语句

> ID：14570358
> 
> 赞同：1
> 
> 时间：2013-01-28T20:12:09.987
> 
> 标签：sql, sql-server

我有一个 SQL 脚本，它告诉我我的任何员工是否有任何在过去 48 小时内未更新的未结服务订​​单。它看起来像这样（简化） -

```
select ServiceOrder, RepName from NotesTable

join OrdersTable on OrdersTable.OrderNumber=NotesTable.OrderNumber

having (DATEDIFF(day,max(NotesTable.LastModified),GETDATE()) >2) 
```

基本上只取今天的日期，减去最近注释的最后修改日期，然后吐出 48 小时内未修改的服务订单数。

我的问题是，如果服务订单*没有*备注，则此脚本不起作用。因此，即使它在 48 小时内没有更新，它也不会出现在报告中。我需要说什么样的“或”“如果它没有注释也告诉我”。

我考虑加入另一个包含“dateopened”字段的表，然后，

```
OR (DATEDIFF(day,(NotesTable.DateOpened),GETDATE()) >2) 
```

但这会返回超过 48 小时的每个服务订单，所以这无济于事。

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T20:56:05.513

实际上，您仍然缺少部分查询（`GROUP BY`例如 ），但这应该让您了解您想要什么：

```
SELECT ServiceOrder, RepName 
FROM OrdersTable 
LEFT JOIN NotesTable
    ON OrdersTable.OrderNumber = NotesTable.OrderNumber
GROUP BY ServiceOrder, RepName 
HAVING (DATEDIFF(DAY,MAX(NotesTable.LastModified),GETDATE()) >2)
OR MAX(NotesTable.LastModified) IS NULL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T20:19:16.000

如果默认情况下 [Orders] 表中的每条记录都有 [NotesTable] 记录，那么这将起作用。

将 [NotesTable].[LastModified] 更改为 Isnull([NotesTable].[LastModified],[NotesTable].[DateOpened])...
这将使用“LastModified”（如果存在），如果不存在则使用“DateOpened” “ 反而。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T20:56:17.673

您需要包含与注释相关的另一个表。也许这是一个订单表？希望该表有一些字段来指示上次修改的时间。

```
 select ServiceOrder, RepName from Orders
    left outer join NotesTable
    on Orders.OrderID = NotesTable.OrderID

    having (DATEDIFF(day,max(Coalesce(NotesTable.LastModified,
       Orders.LastModified)),GETDATE()) >2) 
```

您可能需要做一个案例陈述而不是 Coalesce 来查看哪个 LastModified 日期更近。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-28T20:19:49.543

您可以使用 ISNULL ( [http://msdn.microsoft.com/en-us/library/ms184325.aspx](http://msdn.microsoft.com/en-us/library/ms184325.aspx) )

```
select ServiceOrder, RepName 
from NotesTable
having (DATEDIFF(day,max(ISNULL(NotesTable.LastModified,NotesTable.DateOpened )),GETDATE()) >2) 
```

# android - 如何使用 EditText Android 设置消息对话框

> ID：14570364
> 
> 赞同：0
> 
> 时间：2013-01-28T20:12:31.103
> 
> 标签：android, android-edittext, gettext, android-alertdialog

我想为循环对话框创建对话框并将edittext查看到对话框中。

1.  活动开始时，对话框显示到循环对话框 1
2.  对话循环 = no.1 输入用户
3.  对话框循环显示输入对话框 3

我的错误日志：

```
1-29 14:54:23.314: E/AndroidRuntime(1099): FATAL EXCEPTION: main
01-29 14:54:23.314: E/AndroidRuntime(1099): java.lang.NullPointerException
01-29 14:54:23.314: E/AndroidRuntime(1099):     at com.example.dialog_looping.MainActivity$dialog$1.onClick(MainActivity.java:44)
01-29 14:54:23.314: E/AndroidRuntime(1099):     at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:159)
01-29 14:54:23.314: E/AndroidRuntime(1099):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-29 14:54:23.314: E/AndroidRuntime(1099):     at android.os.Looper.loop(Looper.java:123)
01-29 14:54:23.314: E/AndroidRuntime(1099):     at android.app.ActivityThread.main(ActivityThread.java:3683)
01-29 14:54:23.314: E/AndroidRuntime(1099):     at java.lang.reflect.Method.invokeNative(Native Method)
01-29 14:54:23.314: E/AndroidRuntime(1099):     at java.lang.reflect.Method.invoke(Method.java:507)
01-29 14:54:23.314: E/AndroidRuntime(1099):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-29 14:54:23.314: E/AndroidRuntime(1099):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-29 14:54:23.314: E/AndroidRuntime(1099):     at dalvik.system.NativeStart.main(Native Method) 
```

我的完整应用程序代码：

```
package com.example.dialog_looping;

import android.os.Bundle;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.activity_main);
        setContentView(new dialog(this));
    }
    public class dialog extends View {

        public dialog(Context context) {
            super(context);

            //this.setNama(name.getText().toString());
            LayoutInflater inflater = (MainActivity.this).getLayoutInflater();
            new AlertDialog.Builder(MainActivity.this)
            .setIcon(R.drawable.ic_launcher)
            .setTitle("Input Your Name")
            .setView(inflater.inflate(R.layout.dialoginputname, null))
            .setPositiveButton("Ok", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {
                EditText name;
                name = (EditText)findViewById(R.id.name);
                //String a = name.setText(name.getText().toString());
                //int z = Integer.valueOf(a);
                   new AlertDialog.Builder(MainActivity.this)
                  .setTitle("YOur Name Is")
                  .setMessage(name.getText().toString())
                  .setNeutralButton("Close", new DialogInterface.OnClickListener() {
                  public void onClick(DialogInterface dlg, int sumthin) {
                  finish();
                  }})
                  .show();
             }
              })
              .setNegativeButton("cancel", new DialogInterface.OnClickListener() {
              public void onClick(DialogInterface dialog, int whichButton) {

                 finish();
               }
               })
                .show();
                }

        protected CharSequence nama() {
            // TODO Auto-generated method stub
            return null;
        }
            };

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:15:53.653

改变

```
.setMessage(name()) 
```

至

```
.setMessage(name.getText().toString()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T20:14:45.860

为您改进的代码：

```
 EditText name;
                name = (EditText)findViewById(R.id.name);
                String a = name.getText().toString();
AlertDialog alertDialog = new AlertDialog.Builder(this).create();
alertDialog.setTitle("something");
alertDialog.setMessage(name);
alertDialog.setNegativeButton("NO", new DialogInterface.OnClickListener() {
public void onClick(DialogInterface dialog, int which) {
// here you can add functions
}
});
alertDialog.setIcon(R.drawable.icon);
alertDialog.show(); 
```

现在再试一次。如果我的回答有帮助，请采纳。

# android - Skydrive android API - 移动到根文件夹

> ID：14570366
> 
> 赞同：2
> 
> 时间：2013-01-28T20:12:43.380
> 
> 标签：android, api, onedrive

我的问题是，我无法将文件从其他文件夹移动或复制到根文件夹“me/skydrive”。我使用 android API 的 LiveConnectClient.moveAsync() 方法，其中目标 folder_id 是“me/skydrive”。

我得到这个回应：

> 输入资源 ID 参数“目标”的值无效。此参数的预期值是以下类型之一的资源 ID：“文件夹”。

是否允许通过 REST api 将文件移动或复制到根文件夹？是否可以通过 Android API 实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:25:17.357

如果设置了根文件夹的id，移动操作正确执行，可惜要先获取id

# java - Java serversocket 控制同步问题

> ID：14570372
> 
> 赞同：2
> 
> 时间：2013-01-28T20:13:19.613
> 
> 标签：java, controls, serversocket

我正在使用一些java来创建一个小客户端来监控网络。对于网络上的每个节点，我都运行一个客户端，还运行一个 ServerSocket 来监听传入的连接。我写的代码似乎挂在 ServerSocket.listen() 方法上。我正在尝试运行一些需要启动服务器套接字的测试代码，并在设置完成后向其发送一些数据。基本上我的问题是这样的：

客户端.java

```
/*snip*/
public void listen(){
    try{
        ServerSocket server = new ServerSocket(1234);
        server.listen();
        Socket client = server.accept()
        System.out.println("got connection");
        ... do stuff
    catch(IOException ex){
        ex.printStackTrace();
    }
} 
```

测试客户端.java

```
/*snip*/
Client client = new Client();
client.listen();
System.out.println("client constructed, waiting for connection");
Socket sock = new Socket("localhost", 1234);
... do stuff 
```

java ServerSocket 的所有其他示例都将它放在自己的类中，只是为了循环自身并在无限循环中运行。如果可能的话，我试图让服务器从另一个主要方法执行。据我所知，问题在于 client.listen() 方法永远不会完成，因为套接字永远不会获得它的连接。我尝试在 TestClient 中执行该行代码后建立连接：在 eclipse 中，println 都不会打印到输出中。有没有另一种方法来编写控制结构来巧妙地处理这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T20:42:26.250

也许你正在寻找这样的东西？您可以让服务器套接字在单独的线程中运行

```
package test;

import java.net.*;

public class Clerver {

    private ServerSocket serverSocket;
    private int listenPort;
    private Thread listenerThread;

    public Clerver(int listenPort) {
        this.listenPort = listenPort;
    }

    public void runIt() throws Exception {

        this.serverSocket = new ServerSocket(listenPort);
        this.listenerThread = new Thread() {
            public void run() {
                synchronized (Clerver.this) {
                    Clerver.this.notify();
                }
                try {
                    Socket clientSocket = Clerver.this.serverSocket.accept();
                    receiveDataOnServer(clientSocket);
                    clientSocket.close();
                } catch (Exception ex) {
                    ex.printStackTrace();
                }
            }
        };
        this.listenerThread.start();
        synchronized (this) {
            this.wait();
        }
        Socket sock = new Socket("localhost", listenPort);
        sendDataFromClient(sock);
        receiveDataFromServer(sock);
        System.out.println(">> All done!");
        listenerThread.join();
        System.out.println(">> Bye Bye!");
    }

    private void sendDataFromClient(Socket sock) throws Exception {
        sock.getOutputStream().write("Hello".getBytes());
        System.out.println(">> Sent HELLO");
    }

    private void receiveDataFromServer(Socket sock) throws Exception {
        byte[] buf = new byte[1024];
        int bread = sock.getInputStream().read(buf);
        String response = new String(buf, 0, bread);
        System.out.println("<< RESPONSE from SERVER: " + response);
    }

    private void receiveDataOnServer(Socket sock) throws Exception {

        byte[] buf = new byte[1024];
        int bread = sock.getInputStream().read(buf);
        String response = new String(buf, 0, bread);
        System.out.println(">> Received on Server : " + response);
        sock.getOutputStream().write("WORLD".getBytes());
        System.out.println(">> SERVER sent response back");
    }

    /**
     * @param args
     */
    public static void main(String[] args) throws Exception {
        Clerver c = new Clerver(1234);
        c.runIt();

    }

} 
```

# opencv - Lucas Kanade 光流

> ID：14570373
> 
> 赞同：1
> 
> 时间：2013-01-28T20:13:20.647
> 
> 标签：opencv

我想根据从 cvCalcOpticalFlowPyrLK 的输出中得到的所有点绘制一个边界框。我已经完成了对象的跟踪，并能够绘制显示流动方向的线条。但是，我在将所有点分组并归类为对象时遇到问题。

我正在做一个多对象跟踪项目，我正在跟踪的对象是路上的车辆。关于如何绘制边界框以便仅将相关对象绘制为汽车的任何建议？

谢谢 ![输出1](../Images/242203f7562d2f36d6e8bbdccfb24ea1.png) ![输出2](../Images/19827a3749a4d35224dd0c0d2f5de6bd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T02:01:24.713

关注你可以试试...

1.  由于您的目标正在移动，您可以进行帧区分`(diffFrame = currentFrame - prevsFrame )`以找出与其前一帧相比发生变化的区域，因此只取那些位于变化区域上的点（已经被光流检测到）。
2.  使用一些聚类技术（如 K-means 聚类）对点进行分组。
3.  将点分组后，找到最小 x 坐标、最小 y 坐标、最大 x 坐标和最大 y 坐标。画一个反应角盒子，`(Xmin,Ymin,(Xmax-Xmin+1),(Ymax-Ymin+1))`它是`(Xorigin,Yorigin,Widht,Height)`

# extjs - 地图不在 tabpanel extjs 中居中

> ID：14570377
> 
> 赞同：0
> 
> 时间：2013-01-28T20:13:28.630
> 
> 标签：extjs, extjs4

我有一个带有三个选项卡的选项卡面板。第三个选项卡是显示地图。我正在获取带有所需控件的地图，但它没有居中。点比选项卡的中心更偏西。所以我必须拖动地图将点带到 Tab 的中心。

选项卡面板代码

```
var infoPanel = new Ext.tab.Panel({
    id: 'guestTabPan',
    xtype: 'tabpanel',
    title: 'Site Information',
    autoDestroy: false,
    items:[
      {
        id: 'siteTab',
        title:'Site',
        items:[
           ....
        ]
      },{
        title: 'Pressure',
        id: 'pressureTab',
        items:[
          .....
        ]
      },{
        title: 'Map',
        id: 'mapTab',
        items:[ 
          {
            xtype: "panel",
            id: 'mapTabPanel',
            height: 1000,                         
            layout: 'fit',
            items:[
            ]
          }
        ]
      }
    ]
  }); 
```

地图代码

```
 var smallGoogleMap = {xtype: 'gmappanel',id :'gSmallSiteMap',width:'100%',height:1000,
            zoomLevel:10,
            gmapType: 'map',
            mapConfOpts: ['enableScrollWheelZoom','enableDoubleClickZoom','enableDragging'],
            mapControls: ['GSmallMapControl','GMapTypeControl','NonExistantControl'],
            setCenter: {
              lat: SiteLat,
              lng: SiteLng,
              marker:{ title: SiteTitle}
            }

};

Ext.getCmp('mapTabPanel').add(smallGoogleMap); 
```

有什么猜测吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:01:53.657

如果您在激活有助于使地图居中的选项卡时调用 GMapPanel.js 的 this.getMap().setcenter。这个对我有用。现在 setCenter 不是单独的方法，至少不是我拥有的 js 文件，我在 Map Tab 的激活事件上添加了地图的中心点，如下所示，

```
{
   title: 'Map',
   id: 'mapTab',
   listeners: {
    'activate':{
       fn:function(){
         var gsm = Ext.getCmp('gSmallSiteMap');
         var mpoint = new GLatLng(mymarker.lat,mymarker.lng);
         gsm.addMarker(mpoint,mymarker.marker,false,true, mymarker.listeners);
       }
     }  
   },
   items:[ 
          ......
         ]
} 
```

# jquery - 如何选择一个具有多个类的跨度并放置在一个锚和没有跨度的锚内

> ID：14570378
> 
> 赞同：0
> 
> 时间：2013-01-28T20:13:28.533
> 
> 标签：jquery, anchor, html

根据我之前的帖子（[如何选择具有多个类的跨度并放置在锚点内？）](https://stackoverflow.com/questions/14506319/how-to-select-a-span-with-multiple-classes-and-placed-inside-an-anchor)

我已经按照建议的解决方案实施了它，并且在我现在有一个额外的场景之前它工作得很好。

早些时候建议的溶胶：

```
 $('span.c3.c4').not('.ignore_class).parents('a').click(function (e) { alert("clicked!"); }); 
```

但是现在我有另一种情况，我想将点击事件绑定到锚点，而其中没有任何跨度。

锚定定义：

```
<a href="#">LINK_TEXT</a> 
```

所以，我已经为这种情况准备了下面的代码。

```
$('a').not('.ignore_class').click(function (e) { alert("clicked!"); }); 
```

我在这里面临的问题是当我单击具有跨度的锚点时。没有跨度的锚点上的单击事件被触发。

谁能帮我解决这种情况？非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:18:50.400

您可能想要的是确保以正确的顺序附加事件，并在您想要优先处理的事件（更具体的事件）上，完成您的功能：

```
e.stopPropagation(); 
```

这将防止您的更一般的事件（即附加到 all的事件`a`）在您的更具体的事件被触发后触发。

或者，可能是一种更简单的方法来推理这种情况，有一个事件并测试点击了哪种链接：

```
$('a').click(function()
{
   if ($(this).find('span.c3.c4').not('.ignoredClass').length > 0)
   {
      // event for special links with spans in them
   }
   else
   {
      // event for normal links
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:09:20.907

[使用:not](http://api.jquery.com/not-selector/)和[:has](http://api.jquery.com/has-selector/)选择器过滤掉`a`with`span`标签

```
$('a:not(:has(span))').click(function(){

}); 
```

然后你可以选择像这样跨度的

```
$('a:has(span)') // <-- you can also pass in your span class if you want 
```

[小提琴](http://jsfiddle.net/sFM46/)

看起来您的 .ignoreclass 处于跨度级别而不是锚点 - 使用 .not() 仅过滤当前集合中的元素，即所有锚点。所以要这样使用它，你可以这样做

```
$('a').not('a:has(.ignore_class)') 
```

# java - 为什么我的线程不循环？

> ID：14570379
> 
> 赞同：0
> 
> 时间：2013-01-28T20:13:31.187
> 
> 标签：java, multithreading

我有一个问题，我的线程没有循环，我不知道为什么。它运行一次 run 方法然后停止。这是我的代码。

```
public class LifeFrame extends JApplet{

    private Scanner scan;
    public FramePanel framePanel = new FramePanel();
    private JPanel buttonPanel = new JPanel();
    private JButton button1 = new JButton("Start");
    private JButton button2 = new JButton("Stop");
    private JButton button3 = new JButton("Reset");
    public ImageIcon onTemp = new ImageIcon(this.getClass().getResource("squareOn.png"));
    public ImageIcon offTemp = new ImageIcon(this.getClass().getResource("squareOff.png"));
    public Image lifeOn = onTemp.getImage();
    public Image lifeOff = offTemp.getImage();
    public boolean[][] lifeCheck = new boolean[20][20];
    public boolean[][] lifeHolder = new boolean[20][20];
    public boolean run = false;
    private Thread animator;

    public void init(){
        try {
            scan = new Scanner(new File("life100.txt"));
        } catch (FileNotFoundException e) {
            System.out.println("ERROR");
        }
        int temp = Integer.parseInt(scan.nextLine().trim());
        for(int i = 0; i < temp; i++)
            lifeHolder[Integer.parseInt(scan.next().trim())-1][Integer.parseInt(scan.nextLine().trim())-1] = true;

        framePanel.setSize(700,800);

        button1.setSize(100,60);
        button2.setSize(100,60);
        button3.setSize(100,60);
        ButtonHandler handler = new ButtonHandler();
        button1.addActionListener(handler);
        button2.addActionListener(handler);
        button3.addActionListener(handler);
        buttonPanel.setSize(300,60);
        buttonPanel.add(button1);
        buttonPanel.add(button2);
        buttonPanel.add(button3);
        buttonPanel.setBackground(new Color(71,68,68));

        add(framePanel, BorderLayout.NORTH);
        add(buttonPanel, BorderLayout.SOUTH);
        startThread();
        framePanel.repaint();
    }

    public void startThread(){
        animator = new Thread(framePanel);
        animator.start();
    }

    public class FramePanel extends JPanel implements Runnable{
        public FramePanel(){
            this.setLayout(new GridLayout(20, 20));
        }

        public void run(){

            long beforeTime, timeDiff, sleep;

            beforeTime = System.currentTimeMillis();

            while(run){
                cycle();

                timeDiff = System.currentTimeMillis() - beforeTime;
                sleep = 500 - timeDiff;

                if (sleep < 0)
                    sleep = 2;
                try {
                    Thread.sleep(sleep);
                } catch (InterruptedException e) {
                    System.out.println("Sleep Interrupted");
                }

                beforeTime = System.currentTimeMillis();
            }
        }

        public void cycle(){
            int neighbors = 0;
            for(int row = 0; row < lifeHolder.length; row++)
                for( int col = 0; col < lifeHolder[row].length; col++)
                    lifeCheck[row][col] = lifeHolder[row][col];

            for(int row = 0; row < lifeHolder.length; row++){
                for( int col = 0; col < lifeHolder[row].length; col++){
                    for(int r = row - 1; r <= row + 1; r++){
                        for(int c = col - 1; c <= col + 1; c++){
                            if(r >= 0 && c >= 0 && r < lifeHolder.length && c < lifeCheck[row].length)
                                if(lifeHolder[r][c])
                                    neighbors++;
                        }
                    }
                    if(lifeHolder[row][col]){
                        neighbors--;
                        if(neighbors < 2 || neighbors > 3)
                            lifeCheck[row][col] = false;
                    }else{
                        if(neighbors == 3)
                            lifeCheck[row][col] = true;
                    }
                    neighbors = 0;
                }
            }
            for(int row = 0; row < lifeHolder.length; row++)
                for( int col = 0; col < lifeHolder[row].length; col++)
                    lifeHolder[row][col] = lifeCheck[row][col];

            repaint();
        }

        public void paint(Graphics g){
            for(int r = 0; r < 20; r++)
                for(int r1 = 0; r1 < 20; r1++){
                    if(lifeHolder[r][r1]){
                        g.drawImage(lifeOn, r1*20 + 3, r*20 + 29, 20, 20, framePanel);
                    }else
                        g.drawImage(lifeOff, r1*20 + 3, r*20 + 29, 20, 20, framePanel);
                }
        }
    }

    private class ButtonHandler implements ActionListener{
        public void actionPerformed(ActionEvent event){
            if(event.getSource().equals(button1)){
                run = true;
                System.out.println(run);
            }
                if(event.getSource().equals(button2)){
                    run = false;
                    System.out.println(run);
                }else{
                    //reset
                }   
        }
    }
} 
```

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T20:19:04.233

你定义`run`为`false`。

您启动线程，线程开始执行该`run`方法，并且（因为变量`run`是`false`）它结束。

稍后，也许用户可能会单击一个按钮并将变量设置`run`为`true`. 但是当用户可以单击某些东西时，您的线程很久以前就退出了。

使用无限循环，用于`run`检查必须做某事或是否必须休眠。将线程设置为守护进程，以便 JVM 在最后一个非守护线程结束时将其终止。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T20:18:06.050

因为变量`run`是`false`在启动时定义的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T20:18:12.843

当您启动线程时，该`run`变量为假。线程遍历`run`方法一次，循环条件失败，掉出方法底部并终止。

当时间`run`被 设置为 true 时`ButtonHandler`，线程早就死了。

我建议您不要尝试管理自己的线程，而是考虑使用[`SwingWorker`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)，它专门设计用于让您从 GUI 事件触发后台线程中的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T20:19:56.203

At the beginning you set

```
public boolean run = false; 
```

and then do

```
while(run){
[...]
} 
```

# arrays - pyopencl 在数组中返回错误的 float3 值

> ID：14570380
> 
> 赞同：1
> 
> 时间：2013-01-28T20:13:38.110
> 
> 标签：arrays, opencl, pyopencl

我的 pyopencl 程序的行为很奇怪，我认为我从 opencl 内核收到了不准确的值。

给定以下示例：

```
import pyopencl as cl
import pyopencl.array as cl_array
import numpy
from pyopencl.elementwise import ElementwiseKernel

ctx = cl.create_some_context()
queue = cl.CommandQueue(ctx)

n = 20

kernel = ElementwiseKernel(ctx,
    "float3 *x",
    "x[i] = (float3)(1,1,1)",
    "assign")

x = numpy.empty(n, dtype=cl_array.vec.float3)
x_gpu = cl_array.to_device(queue, x)

kernel(x_gpu)

print x_gpu.get() 
```

我希望它返回一个充满 (1, 1, 1)s 的数组。但是，输出如下所示：

```
[(1.0, 1.0, 1.0) (0.0, 1.0, 1.0) (1.0, 0.0, 1.0) (1.0, 1.0, 0.0)
 (1.0, 1.0, 1.0) (0.0, 1.0, 1.0) (1.0, 0.0, 1.0) (1.0, 1.0, 0.0)
 (1.0, 1.0, 1.0) (0.0, 1.0, 1.0) (1.0, 0.0, 1.0) (1.0, 1.0, 0.0)
 (1.0, 1.0, 1.0) (0.0, 1.0, 1.0) (1.0, 0.0, 1.0) (1.0, 1.0, 0.0)
 (1.0, 1.0, 1.0) (0.0, 1.0, 1.0) (1.0, 0.0, 1.0) (1.0, 1.0, 0.0)] 
```

或者像这样

```
[(1.0, 1.0, 1.0) (4.588972210970911e-41, 1.0, 1.0)
 (1.0, 4.203895392974451e-45, 1.0) (1.0, 1.0, 1.3592595103950726e-43)
 (1.0, 1.0, 1.0) (0.0, 1.0, 1.0) (1.0, 0.0, 1.0) (1.0, 1.0, 0.0)
 (1.0, 1.0, 1.0) (1.401298464324817e-45, 1.0, 1.0)
 (1.0, 2.0795269210580285e-42, 1.0) (1.0, 1.0, 0.0) (1.0, 1.0, 1.0)
 (0.0, 1.0, 1.0) (1.0, 0.0, 1.0) (1.0, 1.0, 1.401298464324817e-45)
 (1.0, 1.0, 1.0) (4.792440747990874e-43, 1.0, 1.0) (1.0, 0.0, 1.0)
 (1.0, 1.0, 0.0)] 
```

我不确定这是否是 OpenCL、PyOpenCL 的问题，或者我做错了什么。

任何帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:28:34.497

按照[此处](https://devtalk.nvidia.com/default/topic/518759/bug-in-float3-addressing/)给出的建议，我已将所有代码更改为使用`float4`而不是`float3`所有问题都消失了。

> 确实，这非常令人沮丧，但是我不鼓励使用任何与 3*sizeof() 对齐的类型，因为 GPU 不能很好地处理它。如果在主机端询问这些类型的大小，您将得到 sizeof(cl_float3) = sizeof(cl_float4)。因此，即使主机端没有正确使用它，它也会变得非常混乱，即使设备可以正确使用它。GPU 针对对齐到 4 字节或 16 字节的类型进行了高度优化。即使您只需要一个向量中的 3 个变量，也可以使用 float4 并忽略最后一个元素。如果您不想浪费内存，请使用三个独立的浮点数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-24T15:01:59.330

根据[官方 OpenCL 规范](https://www.khronos.org/registry/OpenCL/specs/2.2/html/OpenCL_C.html#alignment-of-types)，任何 3 分量元素的向量都将对齐，就好像每个元素都有 4 个分量一样。

> 6.1.5 类型对齐
> 
> 在内存中声明为数据类型的数据项始终与数据类型的大小（以字节为单位）对齐。例如，float4 变量将与 16 字节边界对齐，char2 变量将与 2 字节边界对齐。对于 3 分量向量数据类型，数据类型的大小为 4 * sizeof(component)。这意味着 3 分量矢量数据类型将与 4 * sizeof(component) 边界对齐。

# c# - ProcessStartInfo 参数的挑战 ncftpget

> ID：14570385
> 
> 赞同：1
> 
> 时间：2013-01-28T20:13:43.727
> 
> 标签：c#, tsql, processstartinfo

发布了几个解决方案来解释如何将多个参数传递给 ProcessStartInfo 以运行具有多个参数的 DOS 命令。在这种特殊情况下，它们都不起作用。

尝试从 ac# 应用程序内部运行 ncftpget - 使用精确的字符串文字 (@"arg1 arg2 arg3") 将多个参数传递给可执行文件。

发生的事情是参数列表足够长以至于它被截断，但不是我期望的（最后）。

所以我通过了类似的东西：

```
Program = "ncftpget"
Arguments = @"-f host.cfg D:\ServerBackups\Windows6 2012_01_28_SQLBackupFile.bak" 
```

ncftp 得到的是

```
-f host.cfg D:\ServerBackups\Windows6 ackupfile.bak 
```

如果我不直接调用 ncftpget，而是编写一个 bat 文件并执行它，它就可以工作。

奇怪的是，使用 XP_CMDShell 从 T/SQL 调用 ncftpget 时，参数比这长得多。就好像有一些环境变量说“参数只能这么长，我要从头截断它们，而不是结束”

我试过引用这些论点，没有区别，同样的行为。

当然，如果 Microsoft 确实有一个不错的 ftp 解决方案……使用正确的模式……但这是他们永远不会修复的陈词滥调。

# php - 从主域为子域设置 cookie

> ID：14570387
> 
> 赞同：3
> 
> 时间：2013-01-28T20:13:49.820
> 
> 标签：php, cookies

我有一个网站，由三个域组成`domain.com`：`sub1.domain.com`和`sub2.domain.com`.

我现在想通过 sub1.domain.com 上的 AJAX 在 domain.com 上设置一个 cookie 的页面。此 cookie 必须可用于所有三个域。

我试过了：`setcookie('name','value',time()+3600,'/','.domain.com');`我试过了：（`setcookie('name','value',time()+3600,'/','domain.com');`注意域名前的点，我被告知旧的浏览器不会接受它。）但这不起作用。事实上，没有 cookie 集。

如何在来自子域的 AJAX 请求上设置 cookie？我已经添加`header('Access-Control-Allow-Origin: *');`到 setcookie 页面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T20:38:25.820

使用凭据时需要做几件事：

*   `withCredentials`旗帜

AJAX 请求需要`xhr.withCredentials = true;`设置。

*   `Access-Control-Allow-Credentials`

服务器还必须以`header('Access-Control-Allow-Credentials: true');`.

*   **不允许使用通配符来源**

指定`withCredentials`时，服务器不能允许`*`. 因此，您必须使用有效域列表进行响应：

```
header('Access-Control-Allow-Origin: http://sub1.domain.com,http://sub2.domain.com'); 
```

如果您仍然想要一个任意的子域列表，您可以执行以下操作：

```
if (substr($_SERVER['HTTP_ORIGIN'], -11) === '.domain.com') {
    header('Access-Control-Allow-Origin: ' . $_SERVER['HTTP_ORIGIN']);
} 
```

这会将允许的来源设置为`Origin`请求标头的值，但前提是它位于您的域中。

# python - 更改 x 轴而不更改熊猫中的索引

> ID：14570400
> 
> 赞同：1
> 
> 时间：2013-01-28T20:14:49.147
> 
> 标签：python, pandas

我有一个 DataFrame 'tso'：

```
tso=DataFrame(temp,index=datet)
#tso['Month']=tso.index.month
tso['Year']=tso.index.year
tso['Day']=tso.index.dayofyear
ax=tso.groupby(['Day','Year']).mean().unstack().plot() 
```

这是图片： ![在此处输入图像描述](../Images/051f30e8068b6f25758c900dd464b800.png)

我想将 x 轴更改为“月”而不是“日”。当我放大/缩小图形时，x 轴可以相应的变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T18:48:17.967

创建一个新的数据框：

```
tso1=tso.groupby(['Day','Year']).mean().unstack()
#################creat the datetime index#################################
date=[]
for i in range(len(tso1.index)-1):
    date.append(parser.parse(num2date(tso1.index[i]).replace(year=2000).isoformat(" ")))
date.append(parser.parse(num2date(tso1.index[len(tso1.index)-2]).replace(year=2000).isoformat(" ")))
######################################################################################################
ax = pandas.DataFrame(tso1.values,index=date).plot() 
```

# c# - KeyDown 事件，无论选择的控件如何

> ID：14570401
> 
> 赞同：1
> 
> 时间：2013-01-28T20:14:49.833
> 
> 标签：c#, wpf, events, keydown

除了为每个控件添加事件之外，有没有一种方法可以让 KeyDown 事件触发而不管所选控件如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:21:05.183

在 WPF 中，您可以使用`Keyboard.KeyDown`or`Keyboard.PreviewKeyDown`和订阅容器，而不是每个元素。Routed Event 的基本冒泡和隧道路由策略将使其正确传递到容器。

有关详细信息，请参阅在 CodePlex 上[冒泡或隧道化基本事件。](http://www.codeproject.com/Articles/464926/To-bubble-or-tunnel-basic-WPF-events)

# list - 在拆分 Scala 列表时，需要澄清

> ID：14570403
> 
> 赞同：0
> 
> 时间：2013-01-28T20:14:56.597
> 
> 标签：list, scala

给定

```
println(split(7, (1 to 15).toList)) 
```

跑步时

```
 def split[X](n: Int, xs: List[X]): (List[X], List[X]) = {
    if (n <= 0) (Nil, xs)
    else if (n >= xs.size) (xs, Nil)
    else {
      val grouped = xs.grouped(n).toList
      return (grouped(0), grouped(1))
    }
  } 
```

我明白了

```
(List(1, 2, 3, 4, 5, 6, 7),List(8, 9, 10, 11, 12, 13, 14)) 
```

为什么最后一个元素被丢弃了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T20:19:13.383

`grouped`返回三个`IndexedSeq`，而您只返回前两个。

```
scala> (1 to 15).grouped(7).toList
res0: List[scala.collection.immutable.IndexedSeq[Int]] = List(
  Vector(1, 2, 3, 4, 5, 6, 7), 
  Vector(8, 9, 10, 11, 12, 13, 14),
  Vector(15)
) 
```

`grouped`返回*一个生成大小大小列表的迭代器，如果元素不均分，则最后一个将被截断，*因此您可以看到将 15 个项目与 7 分组的位置返回一个额外的`List`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T20:18:55.073

因为你得到了三个列表。

您将 15 个元素的列表划分为（最多）7 个元素的列表。你最终得到一个 7 的列表，第二个 7 和三分之一的 1 个元素。

# linux - 如何使用 sed 在模式匹配上删除/添加行

> ID：14570406
> 
> 赞同：0
> 
> 时间：2013-01-28T20:15:02.383
> 
> 标签：linux, bash, sed

我尝试使用“sed”完成的是在模式匹配时删除一行。如果模式不匹配，则添加一行。

但我怎么能做到这一点？提前致谢

示例：我希望它在 Crontab 中使用这一行：

```
*/1 * * * * script 1 test 
```

使用其他脚本，如果此模式存在，我想删除此行，否则，如果模式不匹配，则添加此行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:43:47.680

```
awk -v tgt='*/1 * * * * script 1 test' 'index($0,tgt){found=1;next} {print} END{if (!found) print tgt}' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:50:12.173

这可能对您有用（GNU sed）：

```
sed 'x;/./{x;b};x;/pattern/{h;d};$a\append new line' file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T21:18:25.810

仅在使用 grep -qF 'line' file && echo 'line' >> file 在文件中找不到时才追加行：

```
grep -qF '*/1 * * * * script 1 test' file || echo '*/1 * * * * script 1 test' >> file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T20:51:10.987

一个好的做法是用注释标记您自动添加的 crontab 条目：

```
* * * * * script 1 test #projectfoo-testjob 
```

这使您可以轻松地删除作业：

```
sed -i.bak '/projectfoo-testjob/d' file 
```

或添加它：

```
grep -q "projectfoo-testjob" file || \
  echo '*/1 * * * * script 1 test #projectfoo-testjob' >> file 
```

通过像这样标记作业，您可以防止在用户重新格式化他们的 crontab 时出现重复，例如使用制表符而不是空格，并且可以防止删除用户为自己添加的类似作业。

# ruby-on-rails-3 - Cucumber Capybara 对象的未定义方法

> ID：14570407
> 
> 赞同：0
> 
> 时间：2013-01-28T20:15:02.620
> 
> 标签：ruby-on-rails-3, cucumber, capybara

我一直在尝试做 RSpec Book，黄瓜模拟浏览器部分。问题是它不断为任何对象抛出未定义的方法，这意味着它无法测试应用程序。

考试

```
 When /^I create a movie Caddyshack in the Comedy genre$/ do
      visit movies_path
      click_link "Add Movie"
      click_button "Save"
    end 
```

问题是它不会用视图呈现表单，从而为 ActiveRecord 对象抛出未定义的错误。

风景

```
 <%= form_for(@movie) do |f| %>
      <table>
        <tr>
          <th><%= f.label :name %></th>
          <td><%= f.text_field :name, :id => "title" %></td>
        </tr>
      </table>

      <div class="actions">
        <%= f.submit %>
      </div>
    <% end %> 
```

控制器

```
 def index
      @movies = Movie.all

      respond_to do |format|
        format.html # index.html.erb
        format.json { render json: @movies }
      end
    end

    def new
      @movie = Movie.new

      respond_to do |format|
        format.html # new.html.erb
        format.json { render json: @movie }
      end
    end 
```

该模型

```
 class Movie < ActiveRecord::Base
      attr_accessible :showtime_date, :showtime_time, :name
      has_many :genres

      def showtime
        "#{formatted_date} (#{formatted_time})"
      end

      def formatted_date
        showtime_date.strftime("%B %d, %Y")
      end

      def formatted_time
        format_string = showtime_time.min.zero? ? "%l%p" : "%l:%M%p"
        showtime_time.strftime(format_string).strip.downcase
      end
    end 
```

我的宝石文件

```
 source 'https://rubygems.org'

    gem 'rails', '3.2.8'

    gem 'sqlite3'
    gem 'awesome_print'

    group :assets do
      gem 'sass-rails',   '~> 3.2.3'
      gem 'coffee-rails', '~> 3.2.1'
      gem 'uglifier', '>= 1.0.3'
    end

    gem 'jquery-rails'

    group :development, :test do
      gem "rspec-rails", ">= 2.0.0"
    end

    group :test do
      gem 'database_cleaner'
      gem "cucumber-rails", ">= 0.3.2"
    end 
```

最后，水豚不断告诉我的错误

```
 When I create a movie Caddyshack in the Comedy genre # features/step_definitions/genre_steps.rb:6
      undefined method `name' for #<Movie:0x00000102e36590> (ActionView::Template::Error)
      /Users/Dono/.rvm/gems/ruby-1.9.3-p194/gems/activemodel-3.2.8/lib/active_model/attribute_methods.rb:407:in `method_missing'
      /Users/Dono/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/attribute_methods.rb:149:in `method_missing'
      /Users/Dono/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_view/helpers/form_helper.rb:1161:in `value_before_type_cast'
      /Users/Dono/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_view/helpers/form_helper.rb:1149:in `value_before_type_cast'
      /Users/Dono/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_view/helpers/form_helper.rb:1043:in `block in to_input_field_tag'
      /Users/Dono/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_view/helpers/form_helper.rb:1043:in `fetch'
      /Users/Dono/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_view/helpers/form_helper.rb:1043:in `to_input_field_tag'
      /Users/Dono/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_view/helpers/form_helper.rb:692:in `text_field'
      /Users/Dono/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_view/helpers/form_helper.rb:1284:in `text_field'
      ./app/views/movies/_form.html.erb:5:in `block in _app_views_movies__form_html_erb___3270649907202408240_2157451180' 
```

我的功能/支持/env.rb

```
 require 'cucumber/rails'
    require 'rspec'

    Capybara.default_selector = :css

    ActionController::Base.allow_rescue = false

    begin
      DatabaseCleaner.strategy = :transaction
    rescue NameError
      raise "You need to add database_cleaner to your Gemfile (in the :test group) if you wish to use it."
    end
    Cucumber::Rails::Database.javascript_strategy = :truncation 
```

然而，名称方法已定义，页面在我的浏览器中呈现良好。知道可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:13:07.350

正如 RobertH 在评论中所说，我没有设置测试数据库。我需要做的就是跑

```
 rake db:test:prepare 
```

# c# - 随机选择一个数组 C#

> ID：14570413
> 
> 赞同：-12
> 
> 时间：2013-01-28T20:15:35.517
> 
> 标签：c#, arrays, random

我有 6 个包含一系列字符的字符串数组。我想做的是随机选择一个数组，然后一旦选择它，就会产生最终的字符串响应。我需要一份清单来执行此操作还是有其他方法？

所有这些都只是一个使用随机变量的小数组练习。

我应该指定这是一个控制台应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T20:18:13.273

一个简单的选择是：制作一个数组数组。选择一个随机索引以获取其中一个数组。创建对此的引用，然后根据需要选择每个成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:20:21.373

```
 //let say u have an array of string
        string[] myarr = new string[] { "str1", "str3", "str3", "str4", "str5", "str6"};

        Random rnd = new Random();
        // you dont need a list, simply pick one rnd element from array
        string myRandomPickedString = myarr[rnd.Next(0, myarr.Length - 1)]; 
```

# html - 当左列在 Internet Explorer 中有内容时，表的右列折叠

> ID：14570414
> 
> 赞同：-2
> 
> 时间：2013-01-28T20:15:36.330
> 
> 标签：html, css, internet-explorer

下面的小提琴让我发疯。如果我将内容添加到左列，则右列标题在令人惊叹的 Internet Explorer 浏览器中失去其高度。有任何想法吗？

[http://jsfiddle.net/P3wBD/](http://jsfiddle.net/P3wBD/)

HTML：

```
<table class="structure">
    <tbody>
        <tr>
            <td class="left" rowSpan="2">
                <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
                <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
            </td>
            <td class="header" colSpan="2">
            </td>
        </tr>
        <tr>
            <td class="content">
            </td>
            <td class="right">
            </td>
        </tr>
    </tbody>
</table> 
```

CSS：

```
html, body {
    height: 100%;
    font-family: "Signika Negative";
}

.structure {
    width: 100%;
    height: 100%;
}

.structure > tbody > tr:first-child > td:last-child {
    height: 20px;
    line-height: 20px;
    vertical-align: middle;
}

.structure > tbody > tr > td {
    padding: 10px;
}

.structure > tbody > tr > td.left {
    width: 200px;
    background-color: #333;
    padding: 10px 0;
}

.structure > tbody > tr > td.header {
    background-color: #f0f0f0;
    border-bottom: 1px solid #d8d8d8;
    text-align: right;
}

.structure > tbody > tr > td.content {
    border-right: 1px solid #d8d8d8;
}

.structure > tbody > tr > td.right {
    width: 300px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:23:34.280

尽量不要使用表格进行布局，它们不是为此设计的，这可能就是它们不起作用的原因。

相反，请根据需要尝试使用, , ,进行[绝对定位](http://jsfiddle.net/P3wBD/1/)。`position:absolute``top``left``right``bottom`

# django - Django复杂查询否定

> ID：14570415
> 
> 赞同：2
> 
> 时间：2013-01-28T20:15:37.927
> 
> 标签：django, django-queryset

我需要从查询集中排除一些结果。这样做的条件是，我想排除`belong_to`特定对象列表的所有记录，但包括第二个值不是特定值的那些记录（即使记录属于排除的记录之一）。

在 SQL 中，我想象这看起来像：

`SELECT * FROM some_table WHERE NOT (belongs_to_id IN [1,2,3] AND NOT foo=bar)`

我期待这个工作：

`qs.exclude(Q(belongs_to__id__in=[1,2,3]) & ~Q(foo=bar))`

但是，当我检查结果时`connection.queries`，django 似乎省略了该`~Q(foo=bar)`部分。

作为参考，这将在纯 Python 中做同样的事情：

```
included_ids = qs.filter(foo=bar).values_list('id', flat=True)
excluded_ids = qs.filter(belongs_to__id__in=[1,2,3]).values_list('id', flat=True)
filtered_excluded_ids = [x for x in excluded_ids if not x in included_ids]
new_qs = qs.exclude(id__in=filtered_excluded_ids) 
```

我想避免使用这个解决方案，因为它会导致额外的不必要的查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:29:38.090

鉴于 QI 的意外结果认为您应该使用[额外的](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.extra)

```
qs.extra(where=['NOT ("customer_customer"."belongs_to_id" IN [%s] AND NOT "customer_customer"."sales_rep_id" = %d)'%(','.join(your_list),bar)]) 
```

有时 Django 查询语法本身无法表达复杂的 WHERE 子句（它甚至可能取决于 db 后端......），但正如我所说的这种行为很奇怪。

并且，如果其他任何事情都失败了（例如，如果您的查询将变得更加复杂），您可能会继续使用[raw](https://docs.djangoproject.com/en/dev/topics/db/sql/)。

# sql-server - 搜索 2 列并将它们视为 1 列

> ID：14570422
> 
> 赞同：0
> 
> 时间：2013-01-28T20:15:57.950
> 
> 标签：sql-server, sql-server-2005

我构建了这个应用程序来搜索某个列（a）。原来列（a）中的数据需要分成列。不幸的是，这使我的搜索机制搞砸了。在我做这样的事情之前。

`columnA like '%" & q & "%'`

我现在需要将搜索分成 2 列，但仍将其视为数据仍在一列中（连接）。

`columnA+columnB LIKE '%" & q & "%'`

这可能吗？多谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:19:31.770

是的，如果我理解你的问题：

```
SELECT 
        CONVERT(nvarchar(1024),(ISNULL(columnA,''))+CONVERT(nvarchar(1024),ISNULL(columnB,''))  
FROM searchTable
WHERE 
    CONVERT(nvarchar(1024),(ISNULL(columnA,''))+CONVERT(nvarchar(1024),ISNULL(columnB,'')) LIKE '%" & q & "%' 
```

那是你要找的吗？

# android - 寻找Android的“杀手”内存缓存机制

> ID：14570428
> 
> 赞同：8
> 
> 时间：2013-01-28T20:16:36.103
> 
> 标签：android, caching, bitmap, out-of-memory, heap-memory

## 背景

Android 的最大堆大小非常有限，每个设备都有不同的最大堆。

一些应用程序需要能够在内存中缓存内容（通常是图像），而不仅仅是在内部/外部存储中。

当然，有很多关于处理位图和使用尽可能少的内存的[**好技巧，但缓存也是必需的。**](http://developer.android.com/training/displaying-bitmaps/index.html)

## 问题

我已经阅读了许多可能的缓存解决方案，但没有一个提供一种可以成为杀手级缓存解决方案的缓存。我想要的是一种具有以下功能的缓存机制：

1.  无限使用堆，不用担心内存不足。应用程序需要内存并且没有足够的可用内存？所以释放一些（未引用的）项目（及其密钥）。

2.  线程安全/并发。

3.  提供基于 LRU 的缓存，以便最近使用的项目有更高的保留机会。

4.  尽可能保持活力（但不会导致任何崩溃）。然而，遗憾的是，在 Android 上，与 Java 相比，软/弱引用的 GC 速度非常快。

5.  能够处理隐藏其真实大小的对象。在 Android 上，在 API 10 及更低版本上，位图不使用堆内存，但被认为是这样的，因此 VM 无法知道何时释放它们，因为它认为使用与单个引用相同的内存量（4字节左右）。这就是为什么一些解决方案可以人为地告诉每个项目的大小，以及何时删除它。

## 一些好的可能解决方案

1.  [**LruCache**](http://developer.android.com/reference/android/util/LruCache.html) - API 12 中的一个类（尽管您可以轻松复制它的代码）。

    优点：#2（？），#3，#5。

    缺点：#1、#4，加上你需要复制它的源代码，因为它是在 API 12 上呈现的。

2.  **一个哈希图，其值具有软/弱引用**，如第 50 页所示[，](http://dl.google.com/io/2009/pres/Th_0230_TurboChargeYourUI-HowtomakeyourAndroidUIfastandefficient.pdf)取自[本讲座](http://www.google.com/events/io/2009/sessions/TurboChargeUiAndroidFast.html)。

    优点：#1（但不删除键），#2（需要使用[ConcurrentHashMap](http://developer.android.com/reference/java/util/concurrent/ConcurrentHashMap.html)）

    缺点：#3、#4、#5

3.  [**MapMaker**](http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/MapMaker.html)（可从[guava 库](http://code.google.com/p/guava-libraries/)中获得），类似于之前解决方案的高级版本。

    优点：#1、#2

    缺点：#3、#4、#5

4.  通过 guava 库[缓存解决方案。](http://code.google.com/p/guava-libraries/downloads/detail?name=JavaCachingwithGuava.pdf&can=2&q=)优点和缺点取决于您的选择。不确定哪种配置最适合需求，以及它是否在 Android 上运行良好。可悲的是，我什至无法为 Android 编译库。

5.  [Android 查询](http://code.google.com/p/android-query/)- 不确定它是如何工作的。看起来很容易使用，但不确定它的优缺点。

## 问题

有人知道杀手缓存机制吗？

我不太关心功能 #5，因为它非常先进，并且随着越来越多的人拥有更新的 Android 版本，将来不会那么需要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:41:24.560

正如我所看到的，#1 存在一个实际的禁止问题。您不能释放从应用程序的其他部分引用的对象；因此，不可能创建一个随意释放内存的构造。

我看到的唯一解决方案是创建自己的支持 LRU 并且能够处理弱引用和强引用的缓存。一个项目开始是一个强引用的东西，如果有一段时间不使用，或者强制执行内存限制，你可以将其更改为弱引用。这并不容易创建，并且必须确保在所有应用程序中进行微调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:15:43.560

看看 Android BitMap Cache，它是 LruCache 的一个大大改进的版本。

[http://www.senab.co.uk/2013/01/24/android-bitmapcache-v2-1/](http://www.senab.co.uk/2013/01/24/android-bitmapcache-v2-1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T21:02:22.330

您可能正在寻找更通用的解决方案，但如果您主要关注图像，请查看[ImageLoader](https://github.com/novoda/ImageLoader)。我已经使用了一段时间，它非常适合我需要的东西。初始化它时，您可以告诉它使用 LRUCache 并告诉它要使用的可用内存百分比。

附带说明一下，[HttpResponseCache](https://github.com/candrews/HttpResponseCache)使得缓存来自服务器的数据非常非常好。

# grails - grails 数据库迁移插件：jndi 是否支持？

> ID：14570429
> 
> 赞同：1
> 
> 时间：2013-01-28T20:16:36.283
> 
> 标签：grails, database-migration

我安装了 1.3.2。我的调查在 scripts/DbmDiff.groovy 中发现了这一点：

```
// TODO this will fail with JNDI or encryption codec
buildOtherDatabase = { String otherEnv -> 
```

在网上搜索导致我这样做：

[https://github.com/grails-plugins/grails-database-migration/commit/ac38a7310fe48ba7b5c4dda4d6e30dd8040dbeb6](https://github.com/grails-plugins/grails-database-migration/commit/ac38a7310fe48ba7b5c4dda4d6e30dd8040dbeb6)

这是 DbmDiff.groovy 的代码，但尽管有相同的 TODO 注释，但似乎可以处理 jndi。

这是否意味着带有 jndi 支持的 1.3.3 即将推出？如果是这样，那么我可以使用 url 等使用临时环境来解决一段时间。

问候，约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T00:02:14.640

我不确定 1.3.3 何时发布，因为这是迄今为止唯一的修复。不过应该不会太早。在此之前，您可以将当前脚本复制到应用程序的`scripts`文件夹中。然后你运行`grails dbm-diff`Grails 会询问你要运行两个脚本中的哪一个。

# android - 在 Android 中使用 OpenCV 从顶部垂直视图进行头部检测

> ID：14570431
> 
> 赞同：1
> 
> 时间：2013-01-28T20:16:49.460
> 
> 标签：android, opencv, face-detection

谁能提供有关使用 OpenCV 进行头部检测的任何指示。我的要求是从顶部直下视图（如天花板）检测头部。请帮忙..

谢谢， Kariyachan

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:47:45.920

为此训练你自己的分类器怎么样？

# ruby - 这是测试对象是否是类的实例的正确方法吗？

> ID：14570432
> 
> 赞同：0
> 
> 时间：2013-01-28T20:16:49.893
> 
> 标签：ruby, class, instance

```
object.class == String
object.class === String 
```

我最初使用第一个`==`，它工作正常，但[这个](http://davidrupp.blogspot.co.uk/2008/08/regarding-ruby-instanceof-kindof-and.html)网站只谈论`===`.

以这种方式使用时有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:23:41.903

这是另一种方式：

```
a = "foo"
a.is_a?(String) 
```

**笔记**

```
a = "foo"
a.kind_of?(String) 
```

`kind_of?`并`is_a?`以同样的方式行事。`instance_of?`如果是类的实例并且不考虑子类，则只会返回 true。

**例子**

```
10.class 
#=> Fixnum
10.is_a?(Integer)
#=> true
10.kind_of?(Integer)
#=> true
10.instance_of?(Integer)
#=> false 
```

# php - PHP Header Location 重定向到当前文件夹的根目录

> ID：14570433
> 
> 赞同：2
> 
> 时间：2013-01-28T20:16:50.333
> 
> 标签：php, redirect

我从一页重定向到当前目录的 index.php 文件。我在设置 GET 参数时这样做，我想做类似以下的事情。

`header("Location: ?v=30");`

这将在 page2.php 上，重定向到 index.php?v=30。我知道我可以使用以下方法修复它：

`header("Location: index.php?v=30");`

但我想保持 URL 更简单，我希望有一种方法可以做到这一点。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-28T20:18:05.643

试试这个：

```
header("Location: ./?v=30"); 
```

# javascript - 使用“Break on Next”进行调试时，如何排除 setTimeout 或 setInterval 类型的语句？

> ID：14570439
> 
> 赞同：6
> 
> 时间：2013-01-28T20:17:04.953
> 
> 标签：javascript

我目前正在使用一个大型预先存在的代码库，该代码库可能有一个或多个**setInterval** 计时器一直在运行，来自各种插件或库。这基本上使得无法尝试使用**Break on Next**来调试单击元素时发生的情况。

**问题**：一旦我单击 Break on Next，浏览器调试器（已尝试使用 Firebug 和 Chrome）在我有机会与页面交互以真正调试我想要的事件之前停止在 setInterval 函数之一中。

**具体问题**：我的复选框在未选中时保持未选中状态，无论我单击它们多少次。我也删除了 ID 和类名，但无济于事，似乎没有附加事件处理程序。

*注意：不使用 jQuery*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:05:38.173

这可能会阻止其他事情，但是如果您尝试像这样对这些调用进行猴子修补怎么办：

```
window.setInterval = function() { console.log("setInterval", arguments); };
window.setTimeout = function() { console.log("setTimeout", arguments); }; 
```

如果您发现实际上需要一些超时/间隔来重现您的问题，您可以尝试让它们通过。比代码可能是这样的：

```
window.oldSetTimeout = window.setTimeout;
window.setTimeout = function() { 
    if (arguments[0] == "code you want to allow") {
         oldSetTimeout.apply(null, arguments);
    } else {
         console.log("setTimeout", arguments); 
    }
}; 
```

注意：我不会对猴子补丁 setTimeout 不能跨浏览器工作感到惊讶，但它适用于 FF 18.0

# ios - 如何查看应用程序进入后台时 iOS 拍摄的快照图像？

> ID：14570440
> 
> 赞同：2
> 
> 时间：2013-01-28T20:17:08.877
> 
> 标签：ios

当 iOS 应用程序进入后台时，会拍摄最后一个屏幕的快照并将其放入缓存中。如何查看此图像以确保应用程序中的敏感信息不会意外存储在缓存中？

我检查了 XCode 管理器，但找不到打开和查看缓存的工具。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T20:26:16.323

不要担心查看图像 - 只需确保您不会显示任何敏感信息。

操作系统将触发对您的应用程序委托[`(void)applicationDidEnterBackground:(UIApplication *)application`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html)方法的调用。使用它来隐藏您需要的任何信息。看看这个关于 iOS 应用程序的 HIPAA 要求的帖子的[答案- 你可以弹出到你的根视图，这样应用程序就会在没有敏感信息的地方恢复。](https://stackoverflow.com/a/12612380/264775)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-31T16:38:48.627

为了方便地获取模拟器文件夹，请在代码中的某处放置断点，然后在 Xcode 调试器中：

```
po NSHomeDirectory() 
```

在终端 ->

```
cd <pathfromabove>/Library/Caches/Snapshots/<yourappid> 
```

然后

```
ls 
```

查看所有快照..然后如以下问题评论中所述..

```
open -a preview <whatevernameofsnapshot> 
```

# winforms - Microsoft.VisualStudio.Debugger.Runtime.Main.ThrowCrossThreadMessageException

> ID：14570442
> 
> 赞同：1
> 
> 时间：2013-01-28T20:17:17.730
> 
> 标签：winforms, progress-bar, backgroundworker, multithreading

我在 Visual Studio 2008 中为 Excel 2003 创建了一个 Excel 加载项，它（除其他外）根据用户选择从多个 Excel 工作表中清除对象数据。加载项按应有的方式运行，但是，在各种操作的随机时间间隔会导致 Excel 崩溃。下面的代码包含一个带有进度条、后台工作程序和打开文件对话框 (ofd) 的 Windows 窗体。在. `Microsoft.VisualStudio.Debugger.Runtime.Main.ThrowCrossThreadMessageException`_ _ 我已经尝试了几种不同的方法来解决这个问题，它可能会反映在这个代码片段中 - 也许有人可以告诉我我做错了什么以及什么 - 如果添加了任何方法 - 可能是不必要的。`Main()``this.progressbar1.Text`

```
 using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Drawing;
    using System.Linq;
    using System.Text;
    using System.Windows.Forms;
    using Excel = Microsoft.Office.Interop.Excel;
    using System.Runtime.InteropServices;
    using System.Threading;
    using Microsoft.Win32;

    namespace WindowsFormApplication
    {
        public partial class Form3 : Form
        {
            private int highestPercentageReached = 0;
            private bool skipreadonly = true;
            public Form3()
            {
                InitializeComponent();
            }

            private void Form3_Load(object sender, EventArgs e)
            {
                Thread newThread = new Thread(new ThreadStart(main));
                newThread.SetApartmentState(ApartmentState.STA);
                newThread.Start();   
            }

        [STAThread]
            private void main()
            {
                if ((bool)Invoke(new ExcelSelectHandler(ExcelSelect)))
                {
                    Invoke(new MethodInvoker(this.Show));
                    backgroundWorker1.RunWorkerAsync();
                }
                else
                {
                    Invoke(new MethodInvoker(this.Close));
                }
            } 

            private void Form3_KeyPress(object sender, KeyPressEventArgs e)
            {
                if (e.KeyChar == (Char)Keys.Escape)
                {
                    backgroundWorker1.CancelAsync();
                }
            }

        private delegate bool ExcelSelectHandler();
            private bool ExcelSelect()
            {

                Invoke(new MethodInvoker(this.Hide));
                ofd.Title = "Excel Reset";
                ofd.Multiselect = true;
                ofd.FileName = "";
                ofd.Filter = "Excel Files|*.xls;*.xlsx;*.xlt;*.xltx;*.xlsb;*.xlsm;*.xltm";
                DialogResult result = ofd.ShowDialog();
                return result == DialogResult.OK;

            }

            private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
            {
                BackgroundWorker worker = sender as BackgroundWorker;
                DataRemove(worker, e);

            }

            private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
            {
                MethodInvoker proginvoke = delegate
                {
                    progressBar1.Value = e.ProgressPercentage;
                };
                progressBar1.BeginInvoke(proginvoke);
            }

            private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
            {
                if (e.Error != null)
                {
                    MessageBox.Show(e.Error.Message);
                }
                else if (e.Cancelled)
                {
                    Invoke(new MethodInvoker(this.Close));
                }
                else
                {
                    Invoke(new MethodInvoker(this.Close));
                }
            }

            private void DataRemove(BackgroundWorker worker, DoWorkEventArgs e)
            {
                try
                {
                    object missing = System.Reflection.Missing.Value;
                    int k = ofd.FileNames.Length;
                    int l = 0;
                    Excel.Application eapp = ThisAddIn.xlApplication;
                    Excel.Workbook eawb = eapp.ActiveWorkbook;
                    Excel.Application xlApp = new Microsoft.Office.Interop.Excel.Application();
                    xlApp.ScreenUpdating = false;
                    xlApp.Visible = false;
                    Excel.Workbook xlWorkbook;
                    foreach (var filename in ofd.FileNames)
                    {
                        if (l < k)
                        {
                            if (filename != eawb.FullName)
                            {
                                xlWorkbook = xlApp.Workbooks.Open(ofd.FileNames[l].ToString(), missing, missing, missing, missing, missing, true, missing, missing, missing, true, missing, missing, missing, missing);
                                Excel.Worksheet xlWorksheet = (Excel.Worksheet)xlApp.ActiveSheet;

                                Excel.ListRows xlRows = (Excel.ListRows)xlWorksheet.ListObjects;
                                if (xlWorkbook.ReadOnly)
                                {
                                    if (skipreadonly)
                                    {
                                        xlWorkbook.Close(false, missing, missing);
                                    }
                                    else
                                    {
                                        Invoke(new MethodInvoker(this.Hide));
                                        if (MessageBox.Show("Excel document '" + ofd.SafeFileNames[l].ToString() + "' is either opened or marked read only and data will not removed from this file.  Do you want to ignore this file and continue removing data?", "Data Remover", MessageBoxButtons.YesNo) == DialogResult.No)
                                        {
                                            Invoke(new MethodInvoker(this.Show));
                                            if (worker.WorkerSupportsCancellation == true)
                                            {
                                                worker.CancelAsync();
                                                xlWorkbook.Close(false, missing, missing);
                                                break;
                                            }
                                        }
                                        else
                                        {
                                            Invoke(new MethodInvoker(this.Show));
                                            xlWorkbook.Close(false, missing, missing);
                                        }
                                    }
                                }
                                else
                                {
                                    if (xlRows.Count > 0)
                                    {
                                        foreach (Excel.ListRow xlRow in xlRows)
                                        {
                                            xlRow.Delete();
                                        }
                                    }
                                    xlWorkbook.Save();
                                    xlWorkbook.Close(true, missing, missing);

                                }
                                Marshal.ReleaseComObject(xlRows);
                                Marshal.ReleaseComObject(xlWorksheet);
                                Marshal.ReleaseComObject(xlWorkbook);
                            }

                            else
                            {
                                Excel.Worksheet exlWorksheet = (Excel.Worksheet)eawb.ActiveSheet;
                                Excel.ListRows xlRows = (Excel.ListRows)exlWorksheet.ListObjects;
                                foreach (Excel.ListRow xlRow in xlRows)
                                {
                                    xlRow.Delete();
                                }
                            }
                            l += 1;
                        }

                        if (worker.CancellationPending)
                        {
                            e.Cancel = true;
                            break;
                        }
                        else
                        {
                            int percentComplete = l / k * 100;
                            highestPercentageReached = percentComplete;
                            worker.ReportProgress(percentComplete);
                        }
                    }
                    xlApp.Quit();

                    GC.Collect();
                    GC.WaitForPendingFinalizers();
                    GC.Collect();
                    GC.WaitForPendingFinalizers();

                    Marshal.FinalReleaseComObject(xlApp);

                }

                catch (Exception ex)
                {

                    MessageBox.Show(ex.ToString());
                }
            }
        }
    } 
```

# ruby-on-rails - 在 Rails 中制作一个基本的 SO-like WYSIWYG 编辑器

> ID：14570443
> 
> 赞同：2
> 
> 时间：2013-01-28T20:17:23.520
> 
> 标签：ruby-on-rails, ruby-on-rails-3, markdown, wmd-editor

我对 Rails 比较陌生，最近完成了 Hartl 的 Rails 教程，现在正在着手我的第一个完整项目。我有兴趣添加到我的 Web 应用程序中的是类似于 SO 中的文本输入功能，您可以在其中输入，并直接查看您的文本将如何输出。在对[SO](https://stackoverflow.com/questions/3578825/rendering-markdown-text-in-rails-3)[进行](https://stackoverflow.com/questions/3602040/bluecloth-isnt-working-with-rails-3)[了一些](http://epochwolf.com/blog/2010/01/18/using-bluecloth-20/) 研究之后，我决定使用 gem ，它是用 Ruby 实现的 Markdown，但现在有以下问题： `bluecloth`

1.  我不确定如何将`bluecloth`输出与`form_for`助手联系起来。我的理解是您可以通过函数转换为字符串`html = BlueCloth.new(str).to_html()`，但是我不确定当您有一个文本字段作为其中的一部分时该怎么办`form_for`，我应该在哪里插入蓝布部分？换句话说，我仍然对在一个框中输入并看到该项目显示在页面上的其他地方的魔力感到有些困惑。
2.  WMD 栏按钮项目和功能是否包含 Markdown 编辑器（例如 bluecloth），还是我必须手动构建？如果是这样，当您键入时，我将如何在编辑器中获得类似**粗体**按钮以显示“** **”的内容？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T13:49:10.803

正如评论所指出的，Markdown 是一种类似于 HTML 的标记语言，所以它不容易做到所见即所得。

获得这种功能可能有两种方法。

**服务器端**

将您的降价文本发布到服务器并让服务器返回 HTML。我在 Python 中做了很多，但对于 Ruby，[这个 SO 答案](https://stackoverflow.com/questions/373002/better-ruby-markdown-interpreter)建议[maruku](http://maruku.rubyforge.org/)。这种方法的缺点是每次您想要查看预览时都需要一个服务器请求，然后通过某种方式将其集成回您的 UI 中而不会干扰用户。Stackoverflow 将这种方法与[WMD 编辑器和服务器上的一些 C# 一起使用](https://meta.stackexchange.com/questions/121981/stackoverflow-official-wmd-editor)。

**客户端**

另一种选择是使用客户端库来获取您的降价“代码”并生成 html，然后您可以使用 javascript 将其集成到您的页面中。一个例子是[dillinger](http://dillinger.io/)。这使用 textarea 和类似[showdown](https://github.com/coreyti/showdown)的东西在浏览器中呈现 HTML。我在我正在开发的名为[demarcate.js的 WYSIWYG Markdown 编辑器中进一步采用了这种方法](https://github.com/will-hart/demarcate.js)

**或者...抛弃 Markdown**

评论已经建议了替代的所见即所得编辑器......其中大多数不是降价编辑器，而是最终生成 HTML 的*富文本编辑器。*[TinyMCE](http://www.tinymce.com/)和[wysihtml5](http://xing.github.com/wysihtml5/)是不错的选择，我之前也使用过[CKeditor](http://ckeditor.com/)并取得了一些成功——它在最新版本中有一个很酷的“就地”功能，这激发了我上面的 Markdown 编辑器。

# sql-server-2008 - 如何在 SSRS 中设置“全选”的默认值？

> ID：14570449
> 
> 赞同：3
> 
> 时间：2013-01-28T20:17:45.933
> 
> 标签：sql-server-2008, reporting-services

> **可能重复：**
> [选择全部作为多值参数的默认值](https://stackoverflow.com/questions/2508910/select-all-as-default-value-for-multivalue-parameter)

我在 SSRS 中有一个下拉参数，通过以下查询填充：

```
select ID, name from accounts where LK_RecordStatusID = 1 order by Name asc 
```

我需要它是一个多值参数。在 SSRS 中，我可以做到这一点。但是，我也不能让它成为 null value 。但是，我希望它有一个默认值“Null”，它对应于“全选”选项。

我在网上看了看，我看到一些关于使用 -1 作为 null 的替代方法？看来我不能指定空值。任何提示表示赞赏，谢谢

![在此处输入图像描述](../Images/f9b0c620ff4257579d3a079f51af6d24.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T20:59:07.520

[在另一个问题](https://stackoverflow.com/a/2547762/763029)的帮助下，我得到了这个修复（感谢 Jeroen），只需要使“默认值”与可用 val 相同：

![在此处输入图像描述](../Images/7ebff1850b9f63bbb0d5b32e06e5d05a.png)

# java - 我正在尝试让 primefaces 出现在 websphere 8.0 的项目方面

> ID：14570459
> 
> 赞同：0
> 
> 时间：2013-01-28T20:18:21.523
> 
> 标签：java, jsf-2, primefaces, websphere

我正在尝试让 primefaces 出现在 Websphere 8.0 的项目方面。有人可以解释这是如何实现的。

# html - IE7 IE8 在布局中误解 EM？

> ID：14570460
> 
> 赞同：0
> 
> 时间：2013-01-28T20:18:23.210
> 
> 标签：html, css, internet-explorer, layout, em

该网站是 www.holmecourt.com，它在 Safari 和 IE9 中完全按照我的意图呈现，此屏幕截图直接在 Safari 中查看，在 Adob​​e Browserlab for IE9 中看起来完全一样：http: [//holmecourt.com/图像/scrn1.png](http://holmecourt.com/images/scrn1.png)

但是，问题是 Browserlab 显示 IE8 如下，与 IE7 非常相似：[http ://holmecourt.com/images/scrn2.png](http://holmecourt.com/images/scrn2.png)

IE7/8 以前在我到处使用像素时显示良好，但由于将所有内容都更改为 em，IE7/8 似乎不喜欢它。

我已经用 em 搜索了 IE 错误，但找不到任何错误，我想知道 IE7/8 如何在布局中呈现 em 是否存在已知错误？

否则，有经验的开发人员在比较屏幕截图时可能会注意到什么，我认为这可能与布局破坏、文本大小不正确有关，所以可能是字体大小被继承的问题？

我尽量不要含糊不清，但如果这篇文章是，我绝对可以尝试改写它。

所有 CSS 均可从源代码访问，但可以提供所需的任何代码。

任何帮助赞赏或寻找问题的想法赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:31:19.410

您可以实现特定的样式表以有条件地加载 ie。在html的head部分：

```
<!--[if lte IE 8]>
<link rel="stylesheet" type="text/css" href="ie.css" />
<![endif]--> 
```

这将仅在使用 ie8 或更低版本时加载 ie 特定的 .css 文件。然后，您可以将覆盖放在 ie.css 文件中，以使其在这些版本中正确显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T05:09:40.740

好的，万一有人遇到类似问题，我已经意识到发生了什么！

当我删除一些条件注释时，我不小心删除了 HTML5 Shiv。这完全改变了 IE 8 及更低版本呈现 HTML5 元素的方式。

[http://code.google.com/p/html5shiv/](http://code.google.com/p/html5shiv/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T21:23:54.640

我确实遇到了同样的问题，我现在只使用像素。你需要他们做什么？如果是为了能够调整文本大小，那么今天的用户代理能够使用像素值正确缩放内容。

# smtp - 本地 smtp 服务器发送邮件

> ID：14570471
> 
> 赞同：25
> 
> 时间：2013-01-28T20:18:55.473
> 
> 标签：smtp

我需要在运行 Windows 7 企业版的笔记本电脑上演示一个应用程序。该应用程序应该发送邮件。我如何设置本地 smtp 服务器来发送邮件并能够在我的机器上的 Outlook 中接收它。我需要能够在未连接到 Internet 的情况下进行演示。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-28T20:28:44.150

[XMail](http://www.xmailserver.org/)或[hMailServer](http://www.hmailserver.com/)应该可以解决问题。

有关此[先前问题](https://stackoverflow.com/questions/30076/need-a-lightweight-free-windows-smtp-server)的更多详细信息。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-07-31T08:02:37.297

仅限本地 smtp：[smtp4dev](http://smtp4dev.codeplex.com/)（类似于剪纸）
该应用程序会捕获发送给它的所有内容，但不会通过 Internet 发送电子邮件。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-08-30T02:02:34.703

[Papercut](https://github.com/ChangemakerStudios/Papercut)非常活跃（最后一次发布于 2015 年 6 月 25 日）：

> 是否曾经需要测试来自应用程序或网站的电子邮件，但又不希望它们被意外发送或不得不处理设置测试电子邮件服务器的麻烦？Papercut 是一个快速的电子邮件查看器，具有内置的 SMTP 服务器，旨在仅接收邮件。它不会对您发送电子邮件的方式实施任何限制。它允许您查看整个电子邮件-chilada：正文、html、标题、附件到顽皮的原始位。它可以设置为在启动时运行，并在托盘中安静地最小化，当有新消息到达时为您提供一个气球弹出窗口。

您也可以尝试[smtp4dev](https://github.com/rnwood/smtp4dev)：

> 适用于 Windows、Linux、Mac OS-X（以及可能在 .NET Core 可用的其他地方）的虚拟 SMTP 服务器

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-07T17:33:42.060

您还可以（对于演示）使用“specifiedPickupDirectory”设置来利用相同的代码，但将电子邮件消息放到本地文件夹中，从而减少对实际 SMTP 服务器的需求，但能够证明电子邮件已生成正如预期的那样。

MSDN：http: [//msdn.microsoft.com/en-us/library/ms164241.aspx](http://msdn.microsoft.com/en-us/library/ms164241.aspx)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-11-04T18:44:13.763

至于我最好的选择是 [https://www.npmjs.com/package/maildev](https://www.npmjs.com/package/maildev)

在节点上运行的无痛 smtp 服务器。因此，您需要安装节点，但它实际上会向任何 smtp 服务器发送电子邮件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-10T21:55:42.160

您可以使用 Telnet 发送电子邮件或使用套接字编程实现协议。

参考[http://www.softwareandfinance.com/Visual_CPP/TelnetEmail.html](http://www.softwareandfinance.com/Visual_CPP/TelnetEmail.html)

# java - 如何在spring项目中读取属性文件？

> ID：14570477
> 
> 赞同：15
> 
> 时间：2013-01-28T20:19:08.037
> 
> 标签：java, spring, properties, spring-annotations

在发布这个问题之前，我谷歌从 Spring 项目（它不是基于 Web 的项目）中获取属性。我很困惑，因为每个人都在谈论 application-context.xml 并且有类似的配置

但是，我正在使用 Spring 开发普通的 Java 项目（没有 Web 应用程序和类似的东西）。但我想从属性文件中获取一些需要在 JAVA 文件中使用的通用属性。如何通过使用 Spring/Spring Annotations 来实现这一点？

我应该在我的项目下配置myprops.properties文件以及如何通过spring调用？

我的理解是 application-context.xml 仅用于基于 Web 的项目。如果没有，我应该如何配置这个 application-context.xml，因为我没有 web.xml 来定义 application-context.xml

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-28T20:26:57.883

您可以创建基于 XML 的应用程序上下文，例如：

```
ApplicationContext ctx = new ClassPathXmlApplicationContext("conf/appContext.xml"); 
```

如果 xml 文件位于您的类路径上。或者，您可以使用文件系统上的文件：

```
ApplicationContext ctx = new FileSystemXmlApplicationContext("conf/appContext.xml"); 
```

[Spring 参考文档](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/resources.html#resources-app-ctx)中提供了更多信息。您还应该注册一个[关闭挂钩](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html#beans-factory-shutdown)以确保正常关闭：

```
 ctx.registerShutdownHook(); 
```

接下来，您可以使用[PropertyPlaceHolderConfigurer](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html#beans-factory-placeholderconfigurer)从“.properties”文件中提取属性并将它们注入到您的 bean 中：

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations" value="classpath:com/foo/jdbc.properties"/>
</bean>

<bean id="dataSource" destroy-method="close" class="org.apache.commons.dbcp.BasicDataSource">
    <property name="driverClassName" value="${jdbc.driverClassName}"/>
    <property name="url" value="${jdbc.url}"/>
    <property name="username" value="${jdbc.username}"/>
    <property name="password" value="${jdbc.password}"/>
</bean> 
```

最后，如果您更喜欢基于注解的配置，您可以使用`@Value`注解将属性注入到您的 bean 中：

```
@Component
public class SomeBean {

    @Value("${jdbc.url}") 
    private String jdbcUrl;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-04-04T20:43:43.590

从 Spring 4 开始，您可以在 Spring类中使用[@PropertySource](http://docs.spring.io/spring/docs/4.0.x/javadoc-api/org/springframework/context/annotation/PropertySource.html)注释：`@Configuration`

```
@Configuration
@PropertySource("application.properties")
public class ApplicationConfig {

    // more config ...
} 
```

如果你想让你的配置在你的类路径之外，你可以使用`file:`前缀：

```
@PropertySource("file:/path/to/application.properties") 
```

或者，您可以使用环境变量来定义文件

```
@PropertySource("file:${APP_PROPERTIES}") 
```

where`APP_PROPERTIES`是一个环境变量，它具有属性文件位置的值，例如`/path/to/application.properties`.

请阅读我的博[文 Spring @PropertySource](https://blog.jayway.com/2014/02/16/spring-propertysource/)以了解有关`@PropertySource`、其用法、如何覆盖属性值以及如何指定可选属性源的更多信息。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-13T09:07:54.737

您不必使用 Spring。您可以像这样使用普通的 java 阅读：

```
Properties properties = new Properties();
properties.load(Thread.currentThread().getContextClassLoader().getResourceAsStream(fileName)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-22T10:08:43.400

你能弄清楚你的项目将如何在整个应用程序中使用吗？如果你的项目是作为一个 web 应用的构建路径，而你的项目中的配置是通过 spring 注解来实现的，那么毫无疑问你对如何添加`application.xml`文件感到困惑。我的建议是你必须宣布将使用你的项目的人，告诉他们你需要什么，你只需要添加`@Value("${valuename}")`你的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-13T07:42:08.137

**在您的目录中创建新的属性文件*`src/main/resources/`*，文件扩展名必须是*`.properties`*例如*`db.properties`***

在您的 spring xml 配置文件中写入以下上下文属性：

*`<context:property-placeholder location="db.properties"/>`*

**用法：** *`${property-key}`*

# c# - 在哪里可以找到 ListView 控件样式？

> ID：14570478
> 
> 赞同：0
> 
> 时间：2013-01-28T20:19:10.047
> 
> 标签：c#, listview, interop

我花了一段时间搜索互联网，但似乎找不到 ListView 样式或 exstyles 的列表。我有兴趣找出以下方面的价值：

LVS_EDITLABELS

以及其他人。有没有列出这些的地方？我在网上看到很多例子，但没有列出样式的值。它们只是按名称来称呼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:39:39.997

Windows 平台 SDK 的头文件定义了这些值。如果您使用的是 Visual Studio，那么您可能已经在您的机器上安装了平台 SDK 的副本；查找名为“PlatformSDK”的文件夹。ListView 样式在 CommCtrl.h 中定义：

```
#define LVS_EDITLABELS          0x0200 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T20:40:52.613

它定义`CommCtrl.h`为

```
#define LVS_EDITLABELS  512 
```

# php - PHP：每个数组值丢失后

> ID：14570479
> 
> 赞同：1
> 
> 时间：2013-01-28T20:19:11.967
> 
> 标签：php, arrays, foreach

首先让我解释一下我想要实现的目标：

我有一个用户项目数组，由 ID（item_id）和数量（例如 10 个项目）组成。如果用户购买了一个项目，它会被添加到包含数量的数组中。如果用户购买（在数组中）现有项目，则将“1”添加到数量中。

在这篇文章的帮助下，我非常接近：[检查数组值是否存在于 PHP 多维数组中](https://stackoverflow.com/questions/9240251/checking-if-array-value-exists-in-a-php-multidimensional-array?rq=1)

这是我现在使用的代码：

```
 $item_id = arg(1);
  $quantity = '1';

  $found = false;
  $bought_items = null;
  $data = null;

  foreach ($user_items as $key => $data) {

    if ($data['a'] == $item_id) {
        // The item has been found => add the new points to the existing ones
        $data['b'] += 1;
        $found = true;
        break; // no need to loop anymore, as we have found the item => exit the loop
    } 
  }

  if ($found === false) {

      $bought_items = array('a' => $item_id, 'b' => $quantity);
  }

  $array = array($bought_items, $data); 
```

如果 item_id 不存在，则将其添加到数组中 如果 item_id 存在，则数量将 'receive' +1

到目前为止，一切都很好

**现在是实际问题，让我们勾画一下场景：**

我购买项目 500 -> 数组包含：id=500，数量=1

我购买项目 500 -> 数组包含：id=500，数量=2

我购买项目 600 -> 数组包含：id=500，数量=2，id=600，数量=1

**在这之后它出错了**

然后我购买项目 500**或**600，从阵列中删除另一个项目。因此，当我购买商品 500 时，商品 600 及其数量将从数组中删除。

我已经困惑了几个小时，但找不到错误，我知道我忽略了一些合乎逻辑的东西。我认为每个人都会出错。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T20:20:44.693

If bought_items is an array then you're overriding your values rather then adding them to the array.

```
$bought_items = array('a' => $item_id, 'b' => $quantity); 
```

should be:

```
$bought_items[] = array('a' => $item_id, 'b' => $quantity); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T01:17:13.690

我试过这个，它可以工作，所以你可以改变自己的使用。另一个帖子的代码对您的目的没有用

```
 $item_id = 500;
    $quantity = 1;

    $user_items = array(400, 300, 200, 500, 500, 200, 500, 500);
    $found = FALSE;
    $bought_items = null;
    $data = null;

    foreach ($user_items as $data) {

        if ($data == $item_id) {
            // The item has been found => add the new points to the existing ones
            $quantity += 1;
            $bought_items[$data]['a'] = $data;
            $bought_items[$data]['b'] = $quantity;
            $found = TRUE;
        }

        if ($found === FALSE) {

            $bought_items[$data] = array('a' => $data, 'b' => $quantity);
        }
        $found = FALSE;
    }
    print_r($bought_items); 
```

输出：

```
array(4) {
   400 => array(2) {
      a => 400
      b => 1
   }
   300 => array(2) {
      a => 300
      b => 1
   }
   200 => array(2) {
      a => 200
      b => 3
   }
   500 => array(2) {
      a => 500
      b => 5
   }
} 
```

# ios - Watching memory usage in MonoTouch App

> ID：14570486
> 
> 赞同：1
> 
> 时间：2013-01-28T20:19:33.053
> 
> 标签：ios, memory, xamarin.ios

How can I find out how much memory my App is using from inside the app itself, using MonoTouch?

I basically want this:

[Watching memory usage in iOS](https://stackoverflow.com/questions/7989864/watching-memory-usage-in-ios)

which calls things like "task_info"

but for MonoTouch (it's OK if works only on iOS). I don't want a memory tool, like Instruments, etc, I just want to know the memory used from inside the App itself, so I can display it and be able to check it isn't too much in various field trials, etc.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:52:24.243

我看到至少两个选项：

*   将“task_info”代码复制到一个新的 Xcode 项目中并从中创建一个静态库。然后在 MonoTouch 项目中链接该静态库，并使用 P/Invoke 调用 logMemUsage。

*   将所有“task_info”代码翻译成 C#（在需要时使用 P/Invokes 调用本机方法）。

我可能会选择第一个选项，我相信它不太容易出错。

# sql - How do I speed up counting rows in a PostgreSQL table?

> ID：14570488
> 
> 赞同：38
> 
> 时间：2013-01-28T20:19:39.363
> 
> 标签：sql, postgresql, count, postgresql-performance

We need to count the number of rows in a PostgreSQL table. In our case, no conditions need to be met, and it would be perfectly acceptable to get a row estimate if that significantly improved query speed.

Basically, we want `select count(id) from <table>` to run as fast as possible, even if that implies not getting exact results.

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-01-28T21:53:35.743

对于一个非常快速的估计：

```
SELECT reltuples FROM pg_class WHERE relname = 'my_table'; 
```

不过，有几个警告。一方面，`relname`不一定是唯一的`pg_class`。`relname`在数据库的多个模式中可以有多个相同的表。要明确：

```
SELECT reltuples::bigint FROM pg_class WHERE oid = 'my_schema.my_table'::regclass; 
```

如果您不对表名进行模式限定，则强制转换`regclass`观察当前[**`search_path`**](https://stackoverflow.com/questions/9067335/how-to-create-table-inside-specific-schema-by-default-in-postgres/9067777#9067777)以选择最佳匹配。如果该表在任何模式中都不存在（或看不到），`search_path`您会收到一条错误消息。请参阅[手册中的](https://www.postgresql.org/docs/current/datatype-oid.html)[*对象标识符类型*](https://www.postgresql.org/docs/current/datatype-oid.html)。

演员可以很好地`bigint`格式化`real`数字，特别是对于大计数。

此外，`reltuples`可能或多或少已经过时。有办法在一定程度上弥补这一点。使用新的和改进的选项查看稍后的答案：

*   **[在 PostgreSQL 中发现表的行数的快速方法](https://stackoverflow.com/questions/7943233/fast-way-to-discover-the-row-count-of-a-table/7945274#7945274)**

并且查询[`pg_stat_user_tables`](https://www.postgresql.org/docs/13/monitoring-stats.html#MONITORING-STATS-VIEWS-TABLE)要慢很多倍（尽管仍然比完整计数快得多），因为这是几个表的视图。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-28T20:31:46.320

大表的计数很慢，因此您可以通过以下方式进行近似估计：

```
SELECT reltuples::bigint AS estimate 
FROM pg_class 
WHERE relname='tableName'; 
```

而且它的速度非常快，结果不是浮动的，但仍然是一个接近的估计。

*   `reltuples`是表中的一列`pg_class`，它包含有关“表中的行数。这只是规划器使用的估计值。它由 VACUUM、ANALYZE 和一些 DDL 命令（如 CREATE INDEX）更新”（手动）
*   目录对`pg_class`表和大多数其他具有列或与表类似的内容进行编目。这包括索引（但另见 pg_index）、序列、视图、复合类型和一些特殊关系（手动）
*   “为什么“SELECT count(*) FROM bigtable;”很慢？：[http ://wiki.postgresql.org/wiki/FAQ#Why_is_.22SELECT_count.28.2A.29_FROM_bigtable.3B.22_slow.3F](http://wiki.postgresql.org/wiki/FAQ#Why_is_.22SELECT_count.28.2A.29_FROM_bigtable.3B.22_slow.3F)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-28T20:28:57.793

除了在索引字段（希望 'id' 是）上运行 COUNT() 之外，下一个最好的方法是使用 INSERT 上的触发器实际缓存某个表中的行数。自然，您将改为检查缓存。

对于近似值，您可以尝试这个（来自[https://wiki.postgresql.org/wiki/Count_estimate](https://wiki.postgresql.org/wiki/Count_estimate)）：

```
select reltuples from pg_class where relname='tablename'; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-01-29T15:56:58.477

您可以通过简单地使用触发器 AFTER INSERT OR DELETE 来询问表中计数的确切值

```
CREATE TABLE  tcounter(id serial primary key,table_schema text, table_name text, count serial);

insert into tcounter(table_schema, table_name,count) select 'my_schema', 'my_table', count(*) from my_schema.my_table; 
```

并使用触发器

```
CREATE OR REPLACE FUNCTION ex_count()
RETURNS trigger AS
$BODY$
BEGIN
    IF (TG_OP='INSERT') THEN
      UPDATE tcounter set count = count + 1 where table_schema = TG_TABLE_SCHEMA::TEXT and table_name = TG_TABLE_NAME::TEXT;
    ELSIF  (TG_OP='DELETE') THEN
      UPDATE tcounter set count = count - 1 where table_schema = TG_TABLE_SCHEMA::TEXT and table_name = TG_TABLE_NAME::TEXT;
    END IF;
RETURN NEW;
END$BODY$
LANGUAGE plpgsql VOLATILE
COST 100;

CREATE TRIGGER tg_counter  AFTER INSERT OR DELETE
  ON my_schema.my_table  FOR EACH ROW  EXECUTE PROCEDURE ex_count(); 
```

并要求计数

```
select * from tcounter where table_schema =  'my_schema' and table_name = 'my_table' 
```

这意味着您选择一次 count(*) 来初始化第一条记录

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-28T20:33:57.250

您可以从系统表“pg_stat_user_tables”中获得估计。

```
select schemaname, relname, n_live_tup 
from pg_stat_user_tables 
where schemaname = 'your_schema_name'
and relname = 'your_table_name'; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-18T18:49:19.173

如果您的数据库很小，您可以像@mike-sherrill-cat-recall 建议的那样估算所有表。该命令将列出所有表。

```
SELECT schemaname,relname,n_live_tup 
FROM pg_stat_user_tables 
ORDER BY n_live_tup DESC; 
```

输出将是这样的：

```
 schemaname |      relname       | n_live_tup
------------+--------------------+------------
 public     | items              |      21806
 public     | tags               |      11213
 public     | sessions           |       3269
 public     | users              |        266
 public     | shops              |        259
 public     | quantities         |         34
 public     | schema_migrations  |         30
 public     | locations          |          8
(8 rows) 
```

# unix - How to remove blank lines from a Unix file

> ID：14570489
> 
> 赞同：53
> 
> 时间：2013-01-28T20:19:40.507
> 
> 标签：unix, awk, blank-line

I need to remove all the blank lines from an input file and write into an output file. Here is my data as below.

```
11216,33,1032747,64310,1,0,0,1.878,0,0,0,1,1,1.087,5,1,1,18-JAN-13,000603221321

11216,33,1033196,31300,1,0,0,1.5391,0,0,0,1,1,1.054,5,1,1,18-JAN-13,059762153003

11216,33,1033246,31300,1,0,0,1.5391,0,0,0,1,1,1.054,5,1,1,18-JAN-13,000603211032

11216,33,1033280,31118,1,0,0,1.5513,0,0,0,1,1,1.115,5,1,1,18-JAN-13,055111034001

11216,33,1033287,31118,1,0,0,1.5513,0,0,0,1,1,1.115,5,1,1,18-JAN-13,000378689701

11216,33,1033358,31118,1,0,0,1.5513,0,0,0,1,1,1.115,5,1,1,18-JAN-13,000093737301

11216,33,1035476,37340,1,0,0,1.7046,0,0,0,1,1,1.123,5,1,1,18-JAN-13,045802041926

11216,33,1035476,37340,1,0,0,1.7046,0,0,0,1,1,1.123,5,1,1,18-JAN-13,045802041954

11216,33,1035476,37340,1,0,0,1.7046,0,0,0,1,1,1.123,5,1,1,18-JAN-13,045802049326

11216,33,1035476,37340,1,0,0,1.7046,0,0,0,1,1,1.123,5,1,1,18-JAN-13,045802049383

11216,33,1036985,15151,1,0,0,1.4436,0,0,0,1,1,1.065,5,1,1,18-JAN-13,000093415580

11216,33,1037003,15151,1,0,0,1.4436,0,0,0,1,1,1.065,5,1,1,18-JAN-13,000781202001

11216,33,1037003,15151,1,0,0,1.4436,0,0,0,1,1,1.065,5,1,1,18-JAN-13,000781261305

11216,33,1037003,15151,1,0,0,1.4436,0,0,0,1,1,1.065,5,1,1,18-JAN-13,000781603955

11216,33,1037003,15151,1,0,0,1.4436,0,0,0,1,1,1.065,5,1,1,18-JAN-13,000781615746 
```

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2013-01-28T20:25:42.650

```
sed -i '/^$/d' foo 
```

这告诉`sed`删除匹配正则表达式的每一行，`^$`即每一个空行。该`-i`标志会就地编辑文件，如果您`sed`不支持您可以将输出写入临时文件并替换原始文件：

```
sed '/^$/d' foo > foo.tmp
mv foo.tmp foo 
```

如果您还想删除仅包含空格的行（而不仅仅是空行），请使用：

```
sed -i '/^[[:space:]]*$/d' foo 
```

**编辑：**还要删除行尾的空格，因为显然您已经决定也需要它：

```
sed -i '/^[[:space:]]*$/d;s/[[:space:]]*$//' foo 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-05-02T05:56:40.620

```
awk 'NF' filename 
```

```
awk 'NF > 0' filename 
```

```
sed -i '/^$/d' filename 
```

```
awk '!/^$/' filename 
```

```
awk '/./' filename 
```

NF 还会删除仅包含空格或制表符的行，而正则表达式`/^$/`不会。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-01-28T20:21:37.460

Use [grep](http://unixhelp.ed.ac.uk/CGI/man-cgi?grep) to match any line that has nothing between the start anchor (`^`) and the end anchor (`$`):

```
grep -v '^$' infile.txt > outfile.txt 
```

If you want to remove lines with only whitespace, you can still use grep. I am using Perl regular expressions in this example, but here are other ways:

```
grep -P -v '^\s*$' infile.txt > outfile.txt 
```

or, without Perl regular expressions:

```
grep -v '^[[:space:]]*$' infile.txt > outfile.txt 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-01-28T20:26:00.203

```
sed -e '/^ *$/d' input > output 
```

删除所有仅包含空白（或完全为空）的行。您可以将空白更改为选项卡表示的`[ \t]`位置。`\t`无论您的 shell 还是您`sed`将进行扩展，都各不相同，但您可能可以直接键入制表符。如果您使用的是 GNU 或 BSD `sed`，您可以选择就地进行编辑（如果这是您想要的）`-i`。

* * *

> 如果我执行上述命令，我的输出文件中仍然有空行。可能是什么原因？

可能有几个原因。可能是您没有空行，但行尾有很多空格，所以当您将文件放到屏幕上时，看起来好像有空行。如果这是问题所在，那么：

```
sed -e 's/  *$//' -e '/^ *$/d' input > output 
```

新的正则表达式删除了行尾的重复空格；有关空白或制表符，请参见先前的讨论。

另一种可能性是您的数据文件来自 Windows 并且具有 CRLF 行结尾。Unix 在行尾看到回车；它不是空白，因此不会删除该行。有多种方法可以解决这个问题。一个可靠的方法是`tr`删除 ( `-d`) 八进制 15 字符代码，也就是 control-M 或`\r`回车：

```
tr -d '\015' < input | sed -e 's/  *$//' -e '/^ *$/d' > output 
```

如果这些都不起作用，那么您需要显示`od -c`文件前两行的十六进制转储或八进制转储（），这样我们就可以看到我们面临的问题：

```
head -n 2 input | od -c 
```

* * *

从不适合你的评论来看`sed -i`，你不是在 Linux、Mac OS X 或 BSD 上工作——你在哪个平台上工作？（AIX、Solaris、HP-UX 是相对合理的可能性，但也有很多其他不太合理的可能性。）

您可以尝试使用 POSIX 命名的字符类，例如`sed -e '/^[[:space:]]*$/d'`; 它可能会起作用，但不能保证。你可以试试：

```
echo "Hello World" | sed 's/[[:space:]][[:space:]]*/   /' 
```

如果可行，“Hello”和“World”之间将有三个空格。如果没有，您可能会从`sed`. 这可能会让您不必担心在命令行上输入标签。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-01-28T20:38:18.097

```
grep . file 
```

grep 逐行查看您的文件；点`.`匹配*除*换行符以外的任何内容。因此， grep 的输出是由单个换行符以外的内容组成的所有行。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-01-29T01:13:18.653

用 awk

`awk 'NF > 0' filename`

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-01-28T20:32:47.237

要彻底删除行*，即使*它们包含空格或制表符，在 perl 中也会这样做：

```
cat file.txt | perl -lane "print if /\S/" 
```

当然还有 awk 和 sed 等价物。最好不要假设这些行*完全*是空白的`^$` 。

干杯

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-01-28T20:24:47.517

您可以 sed 的`-i`选项在不使用临时文件的情况下就地编辑：

```
 sed -i '/^$/d' file 
```

# .net - How to end thread when exception occurs?

> ID：14570503
> 
> 赞同：1
> 
> 时间：2013-01-28T20:20:28.073
> 
> 标签：.net, multithreading, exception-handling

I read many solution over here and other places but never got it right. I kinda feel embarrassed just by asking this but here I'm...

My code:

```
private void btnStart_Click(object sender, EventArgs e)
        {
                MyClass SomeData = new MyClass()
                Thread ProcessThread = new Thread(c => StartService(SomeData));
                ProcessThread.Start();
        }

private void StartService(MyClass someData)
        {
            try
            {
                //System.Exception throws in this Execute method
                someData.Execute();
            }
            catch(Exception Ex)
            {
                Show(Ex);
//Informing me some exception occurred.
            }
        } 
```

When an exception is thrown in Excute method (which, currently I'm throwing it deliberately to test), I CANNOT `abort` or `end` the thread and start ANOTHER to run SAME method. So, basically if I would like to END that thread and then RE-RUN it again. If you think re-running is risky, I will put up a question that waits a human confirmation whether to re-run or end it. Anyways, I cannot even END it and the thread stays doing nothing at `Thread ProcessThread = new Thread(c => StartService(SomeData));` line.

Could you please help me?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:26:34.987

呼吁

```
Show(Ex); 
```

似乎暗示了一个 UI 动作。如果这是真的，并且 Show() 没有正确编组该 UI 操作，则可能会引发未处理的异常。

除了观察之外，您的线程应该在 Show() 退出后自行结束，因为之后线程的方法中没有更多的语句。您无需执行任何操作（也不应该）手动结束线程。除非在相当不寻常的情况下，最好让线程自己结束（有时通过向它们发送结束信号，或者在这种情况下，只是让方法运行完成）。

在你的`catch`块中，你当然可以启动一个新线程

```
Thread ProcessThread = new Thread(c => StartService(SomeData)); 
```

请注意，这`ProcessThread`与您的代码中的范围不同，因为它们都是在方法中定义的。如果您希望能够在您的类中访问该变量，也许将其提升为类方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:26:27.373

完成`Thread`后将自动退出。`StartService`你不需要做任何事情来“结束”它。

如果您想开始一个新线程，您可以直接在您的方法中执行此操作：

```
 private void StartService(MyClass someData)
    {
        try
        {
            //System.Exception throws in this Execute method
            someData.Execute();
        }
        catch(Exception Ex)
        {
            Show(Ex);
            // "Restart" this thread
            (new Thread(c => StartService(SomeData))).Start();
        }
    } 
```

但是，您可能需要考虑加入一些逻辑来防止线程不断地重新启动自己。一种选择是保留它重新启动次数的计数器，如果它重新启动超过几次，则在记录后优雅地退出。这将防止立即引发的异常只是不断地抽入和抽出线程......

# vim - Vim window resizing

> ID：14570508
> 
> 赞同：3
> 
> 时间：2013-01-28T20:20:50.250
> 
> 标签：vim

I split my windows in Vim horizontally. But after I split, the new window occupies half of the original window size, I want to change this and make sure the new window occupies almost the entire old window.

Basically if I open three files using horizontal split in Vim, I should see three status bars at the bottom of the screen the third file occupying the rest of the screen. The files as I already know can be navigated through `Ctrl`+`W`+arrow keys. So if I navigate to second file now, I should see one status bar at the bottom and one status bar at the top.

Kindly let me know how to configure the same. I looked up online all I could find is options to dynamically change the size or resize, but I want static one-time config (for example, in `vimrc` or `bashrc`).

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T20:32:54.883

如果将`winheight`选项设置为 999，则当前窗口尽可能多地占据屏幕，所有其他窗口仅占一行（我见过这种称为“Rolodex 模式”）：

```
set winheight=999 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-28T20:29:28.943

您可以输入命令模式`:res[ize] +N`或`:res[ize] -N`其中 N 是您的窗口将分别增长或缩小的数量。

转到第 6 点（窗口调整大小）[http://vimdoc.sourceforge.net/htmldoc/windows.html](http://vimdoc.sourceforge.net/htmldoc/windows.html)但这篇文章包含有关 VIM 中的窗口管理的所有内容

希望这可以帮助！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-28T20:39:25.450

您可能更喜欢只使用 vim 选项卡，它的工作方式与您描述的方式非常相似。

尝试这个：

```
vim -p file1 file2 file3 
```

然后使用 :tabn 和 :tabp 在选项卡之间循环前进和返回。

我也喜欢 .vimrc 中的这个映射来使用 ctrl-l 和 ctrl-h 分别循环 fwd 和 back：

```
noremap <C-h> :tabp<CR>
noremap <C-l> :tabn<CR> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T08:51:00.817

分割窗口命令：

```
:[N]sp[lit] [++opt] [+cmd] 
```

其中 N 是新窗口的高度。默认是使用当前窗口高度的一半。垂直分割也是一样的：

```
:[N]vsp[lit] [++opt] [+cmd] 
```

N 是分割窗口的宽​​度。依此类推：[N]new、[N]vnew

有关详细信息，请阅读 :help split

但我不明白你为什么不使用缓冲区？

# asp.net-mvc-3 - ASP.NET MVC3 handle Time out in AsyncController

> ID：14570509
> 
> 赞同：0
> 
> 时间：2013-01-28T20:20:50.287
> 
> 标签：asp.net-mvc-3

How do I handle Timeouts in asp.net mvc3 async controller?.

# android - 如何获取列表适配器中按钮的父视图？

> ID：14570512
> 
> 赞同：0
> 
> 时间：2013-01-28T20:21:00.263
> 
> 标签：android, view, parent, rootview

我来自巴西，我有一个包含按钮图像和文本的列表视图。我正在尝试单击按钮列表视图并获取负责我单击的行的视图。所以我可以在我的按钮所在的行上进行更改。

发生了什么，如果下面的代码，当我单击按钮时，无论列表中的哪个按钮，他总是在第一个列表项中进行更改，我希望他在各自的行中做。因此这个列表

图像 ------------ --------------- 文本 -- 按钮
图像 ------------ ----- ---------- 文本 -- 按钮
图像 ------------ --------------- 文本 -- 按钮
图像 --- --------- --------------- 文本 -- 按钮

我单击按钮，他只是更改了他的行示例的文本：

图像 ------------ --------------- 文本 -- 按钮
图像 ------------ ----- ---------更改 -- 按钮 <--单击的
图像 ------------ --------------- 文本 -- 按钮
图像------------ --------------- 文本 -- 按钮

和..

图像 ------------ --------------- 文本 -- 按钮
图像 ------------ ----- ---------- 文本 -- 按钮
图像 ------------ --------------- 文本 -- 按钮
图像 --- --------- --------------更改 -- 按钮 <--点击

回想起来并在片段列表中使用了一个适配器对不起，我的英语不好！

```
public class JAdapterList extends BaseAdapter  implements OnClickListener {

    private LayoutInflater mInflater;
    private ArrayList<JItemList> itens;

    public JAdapterList(Context context, ArrayList<JItemList> itens) {
        //Itens que preencheram o listview
        this.itens = itens;
        //responsavel por pegar o Layout do item.
        mInflater = LayoutInflater.from(context);
    }

    public int getCount() {
        return itens.size();
    }

    public JItemList getItem(int position) {
        return itens.get(position);
    }

        public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View view, ViewGroup parent) {
        //Pega o item de acordo com a posÃ§Ã£o.
        JItemList item = itens.get(position);
        //infla o layout para podermos preencher os dados

        view = mInflater.inflate(R.layout.navlistitem, null);

        ((TextView) view.findViewById(R.id.textListView)).setText(item.getNome());

        ImageButton ib = (ImageButton) view.findViewById(R.id.imageButton1);
        ib.setOnClickListener(this);

        return view;
    }

    @Override
    public void onClick(View v) {

        // TODO Auto-generated method stub

    View vv = v.getRootView();

    ImageView tv = (ImageView) vv.findViewById(R.id.imageView1);
    TextView texto = (TextView) vv.findViewById(R.id.textListView4);
    texto.setText("CHANGE");
    tv.setAnimation(AnimationUtils.loadAnimation(tv.getContext(), R.anim.motion));

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T21:34:47.507

您可以将文本视图设置为按钮的标记，这样会更容易。像这样：在getView中：

```
TextView textView = ((TextView)  view.findViewById(R.id.textListView)).setText(item.getNome());

    ImageButton ib = (ImageButton) view.findViewById(R.id.imageButton1);
    ib.setOnClickListener(this);
     ib.setTag(textView); 
```

在 onClickListener 中：

```
 public void onClick(View v) {
    TextView texto = (TextView) v.getTag();
    texto.setText("CHANGE");
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:02:34.850

例如对于一个复选框（其余视图相同）： View viewParent = (View)checkBox.getParent();

但是您想做的可能会更容易，请查看此帖子： [OnItemClick listener not working in Custom ListView](https://stackoverflow.com/questions/8294558/onitemclick-listener-not-working-in-custom-listview)

祝你好运 ：）

# python - 哪个更快，numpy转置或翻转索引？

> ID：14570513
> 
> 赞同：7
> 
> 时间：2013-01-28T20:21:02.043
> 
> 标签：python, performance, numpy, transpose

我有一个动态规划算法（修改后的 Needleman-Wunsch），它需要两次相同的基本计算，但第二次计算是在正交方向上完成的。例如，从矩阵*scoreMatrix中的给定单元格**(i,j)*中，我想从*(i,j)的“向上”值计算一个值，以及从 (* *i* )的“左侧”值计算一个值*,j)*。为了重用代码，我使用了一个函数，在第一种情况下我发送参数*i,j,scoreMatrix*，在下一种情况下我发送*j,i,scoreMatrix.transpose()*。这是该代码的高度简化版本：

 ***```
def calculateGapCost(i,j,scoreMatrix,gapcost):
  return scoreMatrix[i-1,j] - gapcost

...
gapLeft = calculateGapCost(i,j,scoreMatrix,gapcost)
gapUp = calculateGapCost(j,i,scoreMatrix.transpose(),gapcost)
... 
```

我意识到我可以另外发送一个函数，该函数在一种情况下会在从*scoreMatrix*检索值时传递参数*(i,j)*，而在另一种情况下将它们反转为*(j,i)*，而不是转置矩阵每一次。

 **```
def passThrough(i,j,matrix):
  return matrix[i,j]

def flipIndices(i,j,matrix):
  return matrix[j,i]

def calculateGapCost(i,j,scoreMatrix,gapcost,retrieveValue):
  return retrieveValue(i-1,j,scoreMatrix) - gapcost

...
gapLeft = calculateGapCost(i,j,scoreMatrix,gapcost,passThrough)
gapUp = calculateGapCost(j,i,scoreMatrix,gapcost,flipIndices)
... 
```

但是，如果 numpy transpose 使用一些我不知道的功能在几个操作中进行转置，那么转置实际上可能比我的传递函数想法更快。谁能告诉我哪个会更快（或者如果有更好的方法我没有想到）？

实际方法将调用*retrieveValue* 3 次，并涉及2 个将被引用的矩阵（如果使用该方法，则因此转置）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-28T20:31:35.257

在 NumPy 中，转置返回具有不同形状和跨步的[视图](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.strides.html)。它不接触数据。

因此，您可能会发现这两种方法具有相同的性能，因为它们本质上是完全相同的。

但是，唯一可以确定的方法是对两者进行基准测试。*****

# javascript - Locally stored Adobe Edge Animation in an iOS app?

> ID：14570514
> 
> 赞同：0
> 
> 时间：2013-01-28T20:21:04.060
> 
> 标签：javascript, iphone, adobe-edge

I'm very new to Adobe Edge animations and from my understanding, they render correctly in mobile safari, and UIWebViews embedded inside iOS apps.

However, this would mean that my device always requires an internet connection to display the above animation.

I know it's possible to display stored HTML content from within an iOS app and that there's limited possibilities for running local javascript; Is there a way this can be used to run an Adobe Edge animation locally?

PS: I have not created the animation but I can request whatever files are necessary, from the animator.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T00:40:34.147

n xCode 您所要做的就是将一个 web 视图拖到您的视图上。为它创建一个出口（我将我的命名为“webview”。）然后将 html 加载到 webview 中，如下所示：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *html = @"<html> ... the rest of your html";

    [self.webview loadHTMLString:html baseURL:nil];
} 
```

要添加 javascript adobe edge，你会给你。只需像这样将它们添加到您的 html 的标题中...

```
<script type="text/javascript">
   JavaScript statements...
</script> 
```

我相信它会自动将它们链接到文件，但您可以将其添加到您的标题中。

# jboss - Deployment scanner/folder in JBoss AS7 domain managed mode

> ID：14570518
> 
> 赞同：2
> 
> 时间：2013-01-28T20:21:13.567
> 
> 标签：jboss, jboss7.x

Is there a deployment folder where a war can be placed in the master node so that it gets deployed to all the slave nodes in a domain managed setup in JBoss AS7?

I know that we can use the JBoss CLI to deploy to a server group which places the artifact in the JBOSS_HOME/domain/data//content directory.

However I would like to find out if there is a way that it can be placed in a deployments folder under the domain of the master node (e.g. JBOSS_HOME/domain/deployments) that is similar to the one available in the standalone mode (i.e. JBOSS_HOME/standalone/deployments) so that the deployment scanner picks it up and makes it available to the slave nodes in the domain without the explicit deploy command via CLI.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:23:45.267

总结上面的评论： 域模式下没有部署目录。

*   您可以使用 CLI
*   网络控制台
*   maven[插件](https://docs.jboss.org/jbossas/7/plugins/maven/latest/)
*   或创建您自己的部署管理器。

我写了一篇关于如何在独立服务器上执行此操作的旧[博客文章](http://jamezp.blogspot.com/2011/07/jboss-application-server-deployment.html)，但可以稍作更改以在域服务器上使用。看看它是如何完成的[`jboss-as-maven-plugin`](https://github.com/jamezp/jboss-as-maven-plugin/blob/master/src/main/java/org/jboss/as/plugin/deployment/domain/DomainDeployment.java)，例如。

# python - Python Regex matching with or without

> ID：14570524
> 
> 赞同：0
> 
> 时间：2013-01-28T20:21:45.467
> 
> 标签：python, regex

This is my expression:

```
r'.*?(\d*)\s(good|bad).*\:\s(\d*)'` 
```

The strings:

```
Hello 30 good. found: 50.

Hello 10 bad. 
```

My question is: My expression matches (30, good and 50) for the first string, but how do I get it to match (10, bad) for the second one?

As of now, the expression is omitting the second line since it does not fit the description

thanks!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T20:23:10.357

只需使用`?`量词使第二部分成为可选：-

```
r'.*?(\d*)\s(good|bad)(?:.*\:\s(\d*))?' 
```

使用`(?:.*\:\s(\d*))?`使模式`.*\:\s(\d*)`可选。作为`?`手段匹配`0 or 1`。

请注意，我使用了一个`non-capturing`组，用于额外的分组以使其成为可选。通过使用它，您的捕获组编号不会与当前的编号不同。因为，在捕获的组计数中不考虑*非捕获组*-事物。`(?:...)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:50:57.753

我认为这应该有效

```
r'.*?(\d+)\s(good|bad)[^\d]*(\d*)' 
```

# eclipse - Eclipse Git Synchronize 不显示更改

> ID：14570535
> 
> 赞同：11
> 
> 时间：2013-01-28T20:22:32.757
> 
> 标签：eclipse, git, egit, synchronize

无论我做什么，Eclipse (EGit) 都不会显示更改。我已经为这个问题搜索了很多，但无法解决它。我的一个朋友也有同样的问题。过去一切正常，但从一天到另一天，问题都发生了。

当我点击*Team > Synchronize Workspace*时，只会出现对话框“ **Synchronizing Git: No changes found.** ”。当我选择*Team > Advanced > Synchronize*时，也会发生同样的情况。

我还安装了一个新的 Eclipse（带有新的 Windows）并且问题仍然存在。使用我的 Ubuntu 笔记本，一切都很好。

有人有同样的问题吗？有解决办法吗？我还尝试安装此[答案](https://stackoverflow.com/questions/12291834/eclipse-juno-mylyn-does-not-show-change-sets-in-synchronization-view)中提到的插件，但它对我不起作用。

**更新** Eclipse 还显示传入的更改（从上游获取之后）和更改的文件（带有箭头），但同步视图仍然不显示更改。

**更新 2**我已经从 Github 测试了一个项目，并且一切正常。这两个项目之间可能有什么区别？我检查了存储库设置，它们是相等的。身份验证会导致问题吗？就像我说过的，该项目在我的 Ubuntu 机器上运行良好。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-12-05T18:24:54.947

我已经尝试了新的 EGit，重新克隆了项目，除了这个没有任何效果：

1.  在同步视图中，单击同步按钮旁边的下拉箭头，然后选择“同步...”。
2.  在出现的对话框中选择 Git，然后按 Next。
3.  然后是关键部分 - 选择目标作为存储库的 HEAD 并选中“包括本地未提交的更改比较”。
4.  单击完成。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-29T17:00:03.647

我曾经遇到过同样的问题，但升级到 EGit 2.2 似乎已经解决了这个问题。现在，命令行中的“git status”和 Eclipse 中的“Team / Synchronize Workspace”之间的事情是一致的。

您可以从[这里](http://marketplace.eclipse.org/content/egit-git-team-provider#.UQf94B3m2_3)获取 EGit，也可以将更新站点[http://download.eclipse.org/egit/updates-2.2](http://download.eclipse.org/egit/updates-2.2)添加到 Eclipse。

**最新的 Egit 更新站点：http:** [//download.eclipse.org/egit/updates](http://download.eclipse.org/egit/updates)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T21:15:58.790

在您可以同步您的工作空间之前，您需要从远程存储库 ( `Team -> Fetch from Upstream`) 执行“获取”，以将所有传入的更改获取到您的本地存储库中。之后，您可以同步它们。

如果您不想点击两次进行同步，您可以在`Preferences -> Team -> Git -> Synchronize`.

![在此处输入图像描述](../Images/d5f9a4a6b66762b444b5dd4899a548f6.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-23T07:48:31.087

[分阶段更改](http://i.stack.imgur.com/bQ3kc.png)这对我有用：

每当您进行任何更改时。右键单击您的项目名称，然后转到团队并单击“添加到索引”。现在再次右键单击您的项目名称，然后转到团队并单击“提交”。现在您将看到 Git Staging 控制台已打开，并且您所做的更改开始显示在 Staged Changes 框中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-12T07:05:54.907

我们正在努力解决同样的问题。事实证明，我们必须删除 Git->Synchronize preferences 中的所有选项。

我们正在使用 Eclipse Juno 和 Kepler。删除选项解决了两者的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-13T06:32:38.533

如果它可以帮助任何人，我遇到了同样的问题。

在同步期间，在存储库选择中，未选中**在比较中包含本地未提交更改**选项并在**同步**视图中显示未**找到更改。**与该选项同步，显示更改。

 **Eclipse 版本：Luna Service Release 1 (4.4.1) - MacOS**

# ssis - 带有脚本组件的 SSIS 平衡数据分发器

> ID：14570537
> 
> 赞同：3
> 
> 时间：2013-01-28T20:22:34.143
> 
> 标签：ssis

我们有一个小型数据流任务，它将行从表导出到平面文件。

我们为转换操作添加了一个脚本组件（Converting Varbinary to String）。

由于脚本组件需要一段时间，我们决定使用新的集成服务

Balanced Data Distributor 并将导出任务分成两个平面文件。

在执行任务时，似乎 BBD 没有划分工作负载并且没有

在并行模式下工作。

你知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-14T22:36:55.890

您是否尝试过使用[NTILE](http://technet.microsoft.com/en-us/library/ms175126.aspx)并在数据流中创建多个 OLE DB 源？

下面的示例说明如何为 2 个组执行此操作。您当然可以根据需要将源拆分为多个：

```
-- SQL Command text for OLE DB Source #1 named "MyGroup NTILE 1"
SELECT v.*
FROM
  (SELECT t.* ,
          NTILE(2) OVER(
                        ORDER BY t.my_key) AS MyGroup
   FROM my_schema.my_table t) v
WHERE v.MyGroup = 1;

-- SQL Command text for OLE DB Source #2 named "MyGroup NTILE 2"
SELECT v.*
FROM
  (SELECT t.* ,
          NTILE(2) OVER(
                        ORDER BY t.my_key) AS MyGroup
   FROM my_schema.my_table t) v
WHERE v.MyGroup = 2; 
```

如果您事先对所需的 NTILE 的最大数量有一个好主意（比如 10 个），那么您可以提前创建 10 个 OLD DB Source。

# android - 需要关于 Android 布局的解释

> ID：14570538
> 
> 赞同：0
> 
> 时间：2013-01-28T20:22:44.177
> 
> 标签：android, layout

我想创建一个这样的视图：

![在此处输入图像描述](../Images/c037a9f1eb16d9865b03c8e078b3344f.png)

我尝试了这种布局架构：

```
<RelativeLayout android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView> // The blue top bar

    <ScrollView android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true" ></ScrollView>

    <LinearLayout android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:orientation="vertical">

        <TextView android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal">
        </TextView>

        <TextView android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal">
        </TextView>

        <TextView android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Description"
            android:gravity="center_horizontal">
        </TextView>

        <TextView android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal">
        </TextView>

        <TextView android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Place"
            android:gravity="center_horizontal">
        </TextView>

        <TextView android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal">
        </TextView>

    </LinearLayout>

    <RelativeLayout android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:gravity="bottom">

        <ImageView android:layout_width="wrap_content"
           android:layout_height="40dp"
           android:clickable="false"
           android:scaleType="center" />

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:gravity="left"
            android:orientation="horizontal" >

            <Button
                android:layout_width="wrap_content"
                android:layout_height="30dp"
                android:layout_gravity="center_vertical"
                android:text="Button 1" />

            <Button
                android:layout_width="wrap_content"
                android:layout_height="30dp"
                android:layout_gravity="center_vertical"
                android:text="Button 2" />

            <Button
                android:layout_width="wrap_content"
                android:layout_height="30dp"
                android:layout_gravity="center_vertical"
                android:text="Button 3" />

        </LinearLayout>

    </RelativeLayout>

</RelativeLayout> 
```

但这由于某些原因不起作用，首先它没有在底部栏中显示我想要的按钮。

我是 Android 开发的初学者，所以请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:44:49.963

1.  将**id**分配给“放置”组件，以便稍后在放置按钮时参考此 id：

    ```
     <LinearLayout
               android:id="@+id/placeLayout"
               ...
            /> 
    ```

2.  在相对布局中，您可以通过以下方式告诉您的按钮位于 id=placeLayout 的组件下：

    ```
     <Button
            android:id="@+id/button1"
            android:layout_below="@+id/placeLayout"
            ... /> 
    ```

3.  如果您希望一个按钮位于另一个按钮的右侧并位于 placeLayout 组件下，请编写：

    ```
     <Button
           android:id="@+id/button2"
           android:layout_below="@+id/placeLayout"
           android:layout_toRightOf="@+id/button1"
           ...
        />

        <Button
           android:id="@+id/button3"
           android:layout_below="@+id/placeLayout"
           android:layout_toRightOf="@+id/button2"
           ...
        /> 
    ```

这是完整的参数列表，您可以使用它来“告诉”每个元素必须放置的位置：http: [//developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T20:54:01.187

我的建议是，使用线性布局并使用“android:weightSum”（主布局）和“android:layout_weight”（内部视图）属性，一开始可能很复杂，但后来它会是最好的方法适合任何屏幕。检查此线程：[Android 中的线性布局和权重](https://stackoverflow.com/questions/2698817/linear-layout-and-weight-in-android)

使用该技术，您可以告诉主布局内的每个内部视图（或布局）它应该填充多少空间。

即：如果主布局有 android:weightSum=1 并且每个内部视图都有 android:layout_weight=0.33 它会导致每个内部视图填充可用总空间的 1/3。

# ajax - Primefaces：动态内容刷新问题

> ID：14570546
> 
> 赞同：3
> 
> 时间：2013-01-28T20:23:10.630
> 
> 标签：ajax, jsf, primefaces, graphicimage, commandbutton

我有一个网络应用程序，我可以在其中选择一些要删除的内容。一个模态弹出窗口显示所选图像/闪光灯的预览。我按下一个按钮，一切正常。但是，当我选择要删除的另一个内容时，会弹出模式，并在一微秒内显示先前删除的文件，然后将其替换为我要删除的新内容。

显示动态内容的代码如下：

**对于图像：**

```
<p:graphicImage value="#{controller.tempImage}" height="110" 
    id="imageID" /> 
```

**对于闪光灯：**

```
<p:media value="#{controller.tempImage}" width="110" height="110" 
    id="imageID" player="flash" /> 
```

**控制器：**

```
public StreamedContent getTempImage() {
    try {
        FacesContext context = FacesContext.getCurrentInstance();

        if (context.getRenderResponse() ) {
            return new DefaultStreamedContent();
        }
        else {              
                tempImage = new DefaultStreamedContent(new FileInputStream("pathToFile"), "image/jpeg");                
        }
    } catch (FileNotFoundException e) {
        tempImage = new DefaultStreamedContent();
    }

    return tempImage;
} 
```

我尝试`tempImage`在加载之前和`autoUpdate=true`模式中设置为 null 但没有运气。

**删除按钮**（显示删除模式的按钮）：

```
<p:commandButton id="btnDelete" value="Delete" onclick="deleteModal.show();"  actionListener="#{controller.initDelete}" update=":deleteForm"> 
```

**删除表单（xhtml）：**

```
<h:form  id="deleteForm" enctype="multipart/form-data" >
<p:dialog id="deleteDialog" widgetVar="deleteModal" modal="true" resizable="false" draggable="false" autoUpdate="true">
        <p:outputPanel autoUpdate="false" >
            <p:panelGrid id="panelId">
                <p:row>                 
                    <p:column>
                        <p:panelGrid id="bannerPanel">

                            <p:row>
                                <p:column>
                                 <p:graphicImage value="#{controller.tempImage}" height="110" id="imageID" />
                                </p:column>
                            </p:row>    

                        </p:panelGrid>
                    </p:column>
                </p:row>

                <f:facet name="footer">
                    <p:row>
                        <p:column>  
                                <p:commandButton id="doDeleteBtn" value="Delete"
                                     actionListener="#{controller.delete}" >                                                        
                                </p:commandButton>
                        </p:column>
                    </p:row>
                </f:facet>
            </p:panelGrid>
        </p:outputPanel>
</p:dialog> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T20:47:48.703

更改自：

```
onclick="deleteModal.show();" 
```

至：

```
oncomplete="deleteModal.show();" 
```

这将确保在 AJAX 请求完成后查看您的对话框，而不是在它启动之前查看。

`onclick`当您创建所谓的**按钮**时，您应该使用带有 的按钮`type="button"`，它们只是执行一些 JavaScript。Primefaces 中的默认按钮类型是`submit`.

# android - 在选项卡开关上停止 AsyncTask

> ID：14570555
> 
> 赞同：0
> 
> 时间：2013-01-28T20:23:55.037
> 
> 标签：android, android-asynctask, android-tabhost

我有一个有 3 个选项卡的 Android 应用程序；它们是使用 Activity (TabsFragmentActivity) 创建的，并且每个选项卡的接口都是使用 Fragments（TabProfile、TabSearch 和 TabLocations 片段）创建的。

在我的一个片段（TabLocations）中，我启动了一个 AsyncTask。一旦用户切换到不同的选项卡，我希望能够取消 AsyncTask。有没有办法让我通过填充选项卡的 Activity (TabsFragmentActivity) 来做到这一点？

我认为我需要做的是从 TabsFragmentActivity 活动中检查 AsyncTask 的状态，但我不确定如何执行此操作，因为 AsyncTask 是在其中一个片段而不是活动本身中启动的。我现在遇到的问题是，在异步任务中，它尝试填充一些列表视图，如果用户切换选项卡，列表视图不在屏幕上。

**TabFragmentActivity.java**

```
package com.example.q;

import java.util.HashMap;

import android.content.Context;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentTransaction;
import android.util.Log;
import android.view.View;
import android.widget.TabHost;
import android.widget.TabHost.TabContentFactory;

import com.parse.Parse;
import com.parse.ParseACL;
import com.parse.ParseUser;

public class TabsFragmentActivity extends FragmentActivity implements TabHost.OnTabChangeListener {
    private static final String TAG = "TabsFragmentActivity";

    private TabHost mTabHost;
    private HashMap mapTabInfo = new HashMap();
    private TabInfo mLastTab = null;

    private class TabInfo {
         private String tag;
         private Class clss;
         private Bundle args;
         private Fragment fragment;
         TabInfo(String tag, Class clazz, Bundle args) {
             this.tag = tag;
             this.clss = clazz;
             this.args = args;
         }

    }

    class TabFactory implements TabContentFactory {

        private final Context mContext;

        /**
         * @param context
         */
        public TabFactory(Context context) {
            mContext = context;
        }

        /** (non-Javadoc)
         * @see android.widget.TabHost.TabContentFactory#createTabContent(java.lang.String)
         */
        public View createTabContent(String tag) {
            View v = new View(mContext);
            v.setMinimumWidth(0);
            v.setMinimumHeight(0);
            return v;
        }

    }
    /** (non-Javadoc)
     * @see android.support.v4.app.FragmentActivity#onCreate(android.os.Bundle)
     */
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // Step 1: Inflate layout
        setContentView(R.layout.tabs_layout);
        // Step 2: Setup TabHost
        initialiseTabHost(savedInstanceState);
        mTabHost.setCurrentTab(1);
        if (savedInstanceState != null) {
            //mTabHost.setCurrentTab(1);
            mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab")); //set the tab as per the saved state
        }
        // initialize Parse
        Log.d(TAG, "initializing Parse");
        Parse.initialize(this, "rReToGbnCSdQEi7Q33UrCO4U395Rk7RcKPcNncOn", "haJKaN0zbNKhgBT1t9jGUY0ih4rYQfPMA9p31BSw"); 

        ParseUser.enableAutomaticUser();
        ParseACL defaultACL = new ParseACL();

        // If you would like all objects to be private by default, remove this line.
        defaultACL.setPublicReadAccess(true);

        ParseACL.setDefaultACL(defaultACL, true);    
    }

    /** (non-Javadoc)
     * @see android.support.v4.app.FragmentActivity#onSaveInstanceState(android.os.Bundle)
     */
    protected void onSaveInstanceState(Bundle outState) {
        outState.putString("tab", mTabHost.getCurrentTabTag()); //save the tab selected
        super.onSaveInstanceState(outState);
    }

    /**
     * Step 2: Setup TabHost
     */
    private void initialiseTabHost(Bundle args) {
        mTabHost = (TabHost)findViewById(android.R.id.tabhost);
        mTabHost.setup();
        TabInfo tabInfo = null;
        TabsFragmentActivity.addTab(this, this.mTabHost, this.mTabHost.newTabSpec("Tab1").
                setIndicator("", getResources().getDrawable(R.drawable.profile)), (tabInfo = new TabInfo("Tab1", TabProfile.class, args)));
        this.mapTabInfo.put(tabInfo.tag, tabInfo);
        TabsFragmentActivity.addTab(this, this.mTabHost, this.mTabHost.newTabSpec("Tab2").
                setIndicator("", getResources().getDrawable(R.drawable.locations) ), (tabInfo = new TabInfo("Tab2", TabLocations.class, args)));
        this.mapTabInfo.put(tabInfo.tag, tabInfo);
        TabsFragmentActivity.addTab(this, this.mTabHost, this.mTabHost.newTabSpec("Tab3").
                setIndicator("", getResources().getDrawable(R.drawable.search)), (tabInfo = new TabInfo("Tab3", TabSearch.class, args)));
        this.mapTabInfo.put(tabInfo.tag, tabInfo);

        // Default to the second tab
        this.onTabChanged("Tab2");

        mTabHost.setOnTabChangedListener(this);
    }

    /**
     * @param activity
     * @param tabHost
     * @param tabSpec
     * @param clss
     * @param args
     */
    private static void addTab(TabsFragmentActivity activity, TabHost tabHost, TabHost.TabSpec tabSpec, TabInfo tabInfo) {
        // Attach a Tab view factory to the spec
        tabSpec.setContent(activity.new TabFactory(activity));
        String tag = tabSpec.getTag();

        // Check to see if we already have a fragment for this tab, probably
        // from a previously saved state.  If so, deactivate it, because our
        // initial state is that a tab isn't shown.
        tabInfo.fragment = activity.getSupportFragmentManager().findFragmentByTag(tag);
        if (tabInfo.fragment != null && !tabInfo.fragment.isDetached()) {
            FragmentTransaction ft = activity.getSupportFragmentManager().beginTransaction();
            ft.detach(tabInfo.fragment);
            ft.commit();
            activity.getSupportFragmentManager().executePendingTransactions();
        }

        tabHost.addTab(tabSpec);
    }

    /** (non-Javadoc)
     * @see android.widget.TabHost.OnTabChangeListener#onTabChanged(java.lang.String)
     */
    public void onTabChanged(String tag) {
        Log.d(TAG, "in onTabChanged");
        TabInfo newTab = (TabInfo) this.mapTabInfo.get(tag);
        if (mLastTab != newTab) {
            Log.d(TAG, "switching to new tab");
            FragmentTransaction ft = this.getSupportFragmentManager().beginTransaction();
            if (mLastTab != null) {
                Log.d(TAG, "last tab not null");
                if (mLastTab.fragment != null) {
                    Log.d(TAG, "last tab fragment not null");
                    ft.detach(mLastTab.fragment);
                }
            }
            if (newTab != null) {
                if (newTab.fragment == null) {
                    newTab.fragment = Fragment.instantiate(this,
                            newTab.clss.getName(), newTab.args);
                    ft.add(R.id.realtabcontent, newTab.fragment, newTab.tag);
                } else {
                    ft.attach(newTab.fragment);
                }
            }

            mLastTab = newTab;
            ft.commit();
            this.getSupportFragmentManager().executePendingTransactions();
        }
    }

} 
```

**TabLocations.java**（这个文件中有很多内容，所以为了清楚起见，我已经编辑了大部分内容）：

```
public class TabLocations extends Fragment {

    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        if (container == null) {
            return null;
        }
        return (RelativeLayout)inflater.inflate(R.layout.tab_locations_layout, container, false);
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {

        // Run AsyncTask for getting Google Places
        FetchGooglePlaces places = new FetchGooglePlaces(getActivity());
        places.execute();

 }       

} 
```

**FetchGooglePlaces.java** - 我的 AsyncTask

```
package com.example.q;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;
import java.util.Comparator;
import java.util.HashMap;
import java.util.List;

import android.app.Activity;
import android.content.Intent;
import android.database.sqlite.SQLiteDatabase;
import android.os.AsyncTask;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.Toast;

import com.parse.FindCallback;
import com.parse.GetCallback;
import com.parse.ParseException;
import com.parse.ParseObject;
import com.parse.ParseQuery;

public class FetchGooglePlaces extends AsyncTask<String, PlacesList, String>{

    private static final String TAG = "FetchGooglePlaces";

     // Google Places
     GooglePlaces googlePlaces;

     // Places List
     public PlacesList nearPlaces;

     // GPS Location
     GPSTracker gps;

     // Progress layouts for qlocations and alocations
     LinearLayout qProgress;
     LinearLayout aProgress;

     // KEY Strings
     public static String KEY_REFERENCE = "reference"; // id of the place
     public static String KEY_NAME = "name"; // name of the place

     // ListView of all q locations detected
     ListView qLV;

     // ListView of all all non-q locations detected
     ListView allLV;

     // Refresh Button
     Button refresh;

     // TabLocations activity
     public Activity activity;

     PlacesDBHelper placesDBHelper;
     SQLiteDatabase db;

     // ArrayList to store the names of qLocations
     ArrayList<String[]> qLocations;

     //ArrayList for storing QLocations
     ArrayList<QLocation> qLocationData = new ArrayList<QLocation>();

     //Temporary ArrayList for storing QLocations
     ArrayList<String[]> qLocationDataString = new ArrayList<String[]>();

     //ArrayList for storing allLocations
     ArrayList<QLocation> allLocationData = new ArrayList<QLocation>();

     //Temporary ArrayList for storing allLocations
     ArrayList<String[]> allLocationDataString = new ArrayList<String[]>();

     boolean done = false;

     boolean checking = true;

     int counter = 0;

     public FetchGooglePlaces(Activity a){
         activity = a;
     }

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();

//        placesDBHelper = new PlacesDBHelper(activity);
//        Log.d(TAG, "attempting to create database");
//        
//        Log.d(TAG, "placesDBHelper: " + placesDBHelper.getDatabaseName());

        // set visibility of progress bars
        qProgress = (LinearLayout) activity.findViewById(R.id.lin_progressBar);
        qProgress.setVisibility(View.VISIBLE);
        aProgress = (LinearLayout) activity.findViewById(R.id.lin_progressBar2);
        aProgress.setVisibility(View.VISIBLE);

        // creating GPS Class object
        gps = new GPSTracker(activity);
    }

    /**
     * getting Places JSON
     * */
    protected String doInBackground(String... args) {
        // creating Places class object
        googlePlaces = new GooglePlaces();

        try {
            Log.d(TAG, "getting google places");
            String types = "cafe|restaurant"; // Listing places only cafes, restaurants

            // Radius in meters - increase this value if you don't find any places
            double radius = 1000; // 1000 meters 

            // get nearest places
            nearPlaces = googlePlaces.search(gps.getLatitude(),
                    gps.getLongitude(), radius, types);

        } catch (Exception e) {
            e.printStackTrace();
        }
        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * and show the data in UI
     * Always use runOnUiThread(new Runnable()) to update UI from background
     * thread, otherwise you will get error
     * **/
    protected void onPostExecute(String file_url) {
        Log.d(TAG, "complete");         

        /**
         * Updating parsed Places into LISTVIEW
         * */
        // Get json response status
         String status = nearPlaces.status;

        // Check for all possible status
        if(status.equals("OK")){
            // Successfully got places details
            if (nearPlaces.results != null) {

                // get current list of Q Locations + their wait times
                qLocations = new ArrayList<String[]>();
                ParseQuery qs = new ParseQuery("QLocations");
                //EDIT: THIS SHOULD ONLY QUERY LOCATIONS THAT ARE CLOSEBY (TO MINIMIZE SEARCH TIME)
                qs.findInBackground(new FindCallback() {

                    @Override
                    public void done(final List<ParseObject> qList, ParseException e) {                        
                        if (e==null){

                            // add each parse location to the qLocations array
                            for(int i= 0; i < qList.size(); i++){
                                if(checking){
                                        final String name = qList.get(i).getString("name");
                                        checking = false;

                                        //get queue length for each location
                                        ParseObject place = qList.get(i);

                                        place.getParseObject("Line").fetchIfNeededInBackground(new GetCallback() {                                            
                                            @Override
                                            public void done(ParseObject object, ParseException e) {
                                                String lineLength = Integer.toString(object.getInt("length"));
                                                String[] locationArray = new String[] {name, lineLength};
                                                qLocations.add(locationArray);
                                                //Log.d(TAG, "added " + qLocations.get(qLocations.size()-1)[0] + " to qLocations");
                                                counter++;
                                                if (counter == qList.size()){
                                                    drawListViews();                                                    
                                                }
                                            }
                                        });
                                        checking = true;
                                    }
                            }                            
                        }
                        else{
                            Log.d("Error", "Error: " + e.getMessage());
                        }  
                        }
                    });
            }
        }
        else{
            Toast.makeText(activity, "Google Places Error!", Toast.LENGTH_SHORT);
        }
    }

    public void drawListViews(){

        Log.d(TAG, "in drawListViews()");

        // loop through each place
        int counter = 0;   

        for (Place p : nearPlaces.results) {

            //limit to 10 search results
            if (counter<9){
                  HashMap<String, String> map = new HashMap<String, String>();  

                // Place reference won't display in listview - it will be hidden
                // Place reference is used to get "place full details"
                map.put(KEY_REFERENCE, p.reference);

                // Place name
                map.put(KEY_NAME, p.name);

                boolean placeExists = false;
                String lineLength = "";

                for(int i=0; i<qLocations.size(); i++){
                    // if the google places exists as a Q
                    if (p.name.equals(qLocations.get(i)[0])){
                        placeExists = true;
                        lineLength = qLocations.get(i)[1];
                        break;
                    }
                }
                if (placeExists){
                    // add to qLocationData array
                    qLocationDataString.add(new String[] {p.name, p.reference, lineLength});
                }else{
                    // add to allLocationData array
                    allLocationDataString.add(new String[] {p.name, p.reference, lineLength});
                }

        }else{
                break;
        }
            counter++;
        }

        //sort qLocationDataString by length of line
        Collections.sort(qLocationDataString, new Comparator<String[]>(){
            public int compare(String[] strings, String[] otherStrings){
                return Integer.valueOf(strings[2]).compareTo(Integer.valueOf(otherStrings[2]));
            }
        });

        // add sorted qLocationDataString to qLocationData to pass to the array adapter
        for(int i=0; i<qLocationDataString.size(); i++){
            qLocationData.add(new QLocation(qLocationDataString.get(i)[0], qLocationDataString.get(i)[1], qLocationDataString.get(i)[2] ));
        }

        //sort allLocationDataString alphabetically
        Collections.sort(allLocationDataString, new Comparator<String[]>(){
            public int compare(String[] strings, String[] otherStrings){
                return strings[0].compareTo(otherStrings[0]);
            }
        });

        // add sorted allLocationDataString to allLocationData to pass to the array adapter
        for(int i=0; i<allLocationDataString.size(); i++){
            allLocationData.add(new QLocation(allLocationDataString.get(i)[0], allLocationDataString.get(i)[1], allLocationDataString.get(i)[2] ));
        }

        // Getting qListView: List View for locations with Qs
        qLV = (ListView) activity.findViewById(R.id.qListView);

        // list adapter
        ListAdapter qAdapter = new QAdapter(activity, R.layout.google_places_item, qLocationData, "qs"); 

        // Adding data into listview
        qLV.setAdapter(qAdapter);

        // Getting allListView: List View for locations without Qs
        allLV = (ListView) activity.findViewById(R.id.allListView);

        // list adapter
        ListAdapter allAdapter = new QAdapter(activity, R.layout.google_places_item, allLocationData, "all");

        // Adding data into listview
        allLV.setAdapter(allAdapter);

        // hide progress bars
        qProgress.setVisibility(View.GONE);
        aProgress.setVisibility(View.GONE);

//        // show refresh button
//        refresh = (Button) activity.findViewById(R.id.refreshButton);
//        refresh.setVisibility(View.VISIBLE);

        returnPlaces(nearPlaces);

        Button maps = (Button) activity.findViewById(R.id.btn_show_map);

        /** Button click event for showing map */
            maps.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View view) {
                Log.d("attempting to create new intent", "show map");
            Intent i = new Intent(activity,
                    QMapActivity.class);
            // Sending user current geo location
            i.putExtra("user_latitude", Double.toString(gps.getLatitude()));
            i.putExtra("user_longitude", Double.toString(gps.getLongitude()));

            // passing near places to map activity
            i.putExtra("near_places", nearPlaces);
            // pass list of q locations to map activity
            i.putExtra("q_places", qLocationDataString);

            Log.d(TAG, nearPlaces.toString());
            // staring activity
            activity.startActivity(i);
        }
    });

}

    private PlacesList returnPlaces(PlacesList places){
        return places;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:36:56.797

看一下 Fragment 生命周期[生命周期](http://android-er.blogspot.it/2012/06/life-cycle-of-fragment.html)。您是否想过在 onStop() 或 onPause() 覆盖方法期间停止异步任务？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T20:35:42.460

您可以通过将实例保存在应用程序上下文中来做到这一点，这是一个糟糕的 oop 概念。您还可以在 Activity 中创建 AsyncTask 实例并在 Fragments 中执行它

```
class TabsFragmentActivity extends FragmentActivity implements TabHost.OnTabChangeListener{
    private static FetchGooglePlaces task;
        task=new FetchGooglePlaces ();//Create but not execute.
//You can decide to cancel it when onTabChange triggers with task.cancel();

}
class TabLocations extends Fragment {
        void onCreate(){
            TabsFragmentActivity .getTask().execute; //execute it here.
        }
} 
```

# asp.net - 应用程序池重新加载后身份验证 cookie 不起作用

> ID：14570556
> 
> 赞同：0
> 
> 时间：2013-01-28T20:23:57.617
> 
> 标签：asp.net, forms-authentication

我在我的网站中使用基于表单的身份验证在我的登录页面中，我有：

```
FormsAuthentication.SetAuthCookie(user.userName, true) 
```

当我想检查用户是否经过身份验证时，我会：

```
HttpContext.Current.User.Identity.IsAuthenticated 
```

**我没有使用 Asp.net Membership**，而是使用我的 SQL-DB 验证 **我必须使用 Asp.net Membership 吗？**

大多数情况下这对我有用问题是有时在 5 小时或 30 小时后应用程序池由于某种原因重新启动（我在共享服务器上）然后“User.Identity.IsAuthenticated”每次都返回 false，直到用户再次登录。

这对我来说很奇怪，因为我可以看到客户端仍然具有持久性 authCookie **，那么为什么用户没有经过身份验证？**

我的 Web.Config 参考：

```
<authentication mode="Forms">
<forms
name="AuthCookie"
loginUrl="~/mySite/ManageLogin.aspx"
timeout="5256000"/>
</authentication> 
```

任何帮助将不胜感激。

我的网站 www.mentallica.co.il

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:39:47.270

这可能是由于在应用程序启动时自动生成了机器密钥。您可以通过在 web.config 中为您的应用指定机器密钥来防止这种情况发生：

```
<machineKey
    validationKey="410E4E2B06BE457709F2D8C72BB02957A3B4E8BA327F3A6103696857AD3A88598D454489B9D4CAAFC2D5E35E8795B311EE2E94DAA485FD64D7184272A4AE4D8B"
    decryptionKey="EFAFA0917D0D8F137F05B26AE053397C48D34DE688E73483D15C8EDAF0D6FD4F"
    validation="SHA1"
    decryption="AES" /> 
```

[您不应该使用这个 - 您可以在http://aspnetresources.com/tools/machineKey](http://aspnetresources.com/tools/machineKey)轻松创建自己的。

有关机器密钥的更多信息：http: [//msdn.microsoft.com/en-us/library/ff649308.aspx](http://msdn.microsoft.com/en-us/library/ff649308.aspx)

# c# - 在 LINQ 查询中将枚举转换为字符串时出错

> ID：14570557
> 
> 赞同：5
> 
> 时间：2013-01-28T20:24:10.200
> 
> 标签：c#, sql-server, linq, entity-framework

我有以下查询，它使用实体框架。

```
Analytic firstSent = (from a in Repository.Query<Analytic>()
                      where a.EntityType == "Proposal" &&
                      a.EntityId == Program.ActiveProposal.Id &&
                      a.Marker == AnalyticMarker.EmailProposalUrl.ToString()
                      orderby a.TimestampUtc
                      select a).FirstOrDefault(); 
```

在运行时，我收到以下错误：

> LINQ to Entities 无法识别方法“System.String ToString()”方法，并且该方法无法转换为存储表达式。

`a.Marker`是一个字符串列，并且`AnalyticMarker.EmailProposalUrl`是一个枚举值，我想将该列与该枚举的名称进行比较。

我知道 SQL 不支持从枚举到字符串的转换，但是为什么它不解析这个字符串的值，然后将结果字符串传递给 SQL？那应该工作得很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T20:26:03.337

尝试这个：

```
var emailProposalUrl = AnalyticMarker.EmailProposalUrl.ToString();
Analytic firstSent = (from a in Repository.Query<Analytic>()
                      where a.EntityType == "Proposal" &&
                      a.EntityId == Program.ActiveProposal.Id &&
                      a.Marker == emailProposalUrl
                      orderby a.TimestampUtc
                      select a).FirstOrDefault(); 
```

[这个另一个答案](https://stackoverflow.com/a/5899740/218882)正在解释为什么这也可以工作的原因..

> 问题出现是因为`ToString()`没有真正执行，它变成了[MethodGroup](https://stackoverflow.com/questions/886822/what-is-a-method-group-in-c)，然后解析并转换为 SQL。由于没有`ToString()`等价物，因此表达式失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:48:34.700

好吧，在 C# 通常会为您解析 tostring 的地方，它通常需要一个对象。例如，在这里，您要求它将字符串与枚举进行比较。尽管 C# 可以调用 tostring()，但这样做是不正确的。

考虑一下您要与之比较的是否是 int，而不是枚举。您无法比较数字 1 和字符串。（嗯，你可以，但它涉及假设，这就是重点；语言只是试图促使你使逻辑更加明确）

# ruby-on-rails - Rails 在 Heroku 上找不到 JS 文件

> ID：14570558
> 
> 赞同：2
> 
> 时间：2013-01-28T20:24:13.387
> 
> 标签：ruby-on-rails, heroku, sprockets

`app/assets`我的Rails 应用程序的文件夹中有一个名为 components 的文件夹。我试图从我的文件中要求该目录的子目录中的 js`application.coffee`文件。

```
#= require holderjs/holder 
```

这适用于我的开发环境。但是当我部署到 Heroku 时，它失败并出现以下错误：

```
 Running: rake assets:precompile
  Updating mtimes for current assets...
  rake aborted!
  couldn't find file 'holderjs/holder'
  (in /tmp/build_s0zusz8pduh8/app/assets/javascripts/application.coffee:11) 
```

我检查以确保组件文件夹位于 Heroku 上 Sprockets 的资产路径中，而且确实如此。所以我不明白为什么 Heroku 找不到这个文件。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:47:51.107

我发现，由于 components 目录中的文件夹是从 git repo 派生的，因此 Heroku 无法跟踪它们。我不得不删除这些目录中的 .git 文件夹并再次推送，这一次成功了。

# serialization - AvalonDock 2.0 的更快的串行器

> ID：14570560
> 
> 赞同：0
> 
> 时间：2013-01-28T20:24:15.893
> 
> 标签：serialization, avalondock

内置的 Xml 序列化器非常慢，所以我正在寻找一个更快的序列化器，不能有人制作一个，所以我正在考虑自己制作一个。

我还没有找到与 LayoutRoot 对象一起使用的序列化程序，我试过了

[http://www.servicestack.net/mythz_blog/?p=344](http://www.servicestack.net/mythz_blog/?p=344)

但它给了我一个铸造错误

> 无法将“System.Security.Policy.Zone”类型的对象转换为“System.Security.Policy.Url”类型。

# autosys - Autosys R11 作业调度

> ID：14570564
> 
> 赞同：0
> 
> 时间：2013-01-28T20:24:28.447
> 
> 标签：autosys

我想使用 autosys R11 安排作业。我使用 start_time 指定作业开始时间，也使用 start_mins 指定间隔。

但现在，我想定期（10 分钟）安排从下午 1:00 到下午 5:00 的作业，以便作业将在 1:00、1:10、1:20、1:30 运行。 ...,2:00,2:10,2:30 等。如何指定结束时间（下午 5:00）？

谁能帮我解决这个问题？

谢谢，维纳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:12:15.727

使用 run_window: "13:00 - 17:00" 和 start_min: 0, 10, 20, 30, 40, 50

# c# - 访问 ArrayList 对象

> ID：14570566
> 
> 赞同：0
> 
> 时间：2013-01-28T20:24:34.130
> 
> 标签：c#, json, object, dictionary

我正在开发一个读取一些 JSON 数据并进行一些统计的应用程序，但现在我遇到了一个问题。

我有一个这样的字符串：

```
{
"position":[
  {
     "someKey1":"someVal1",
     "someKey2":"someVal2",
  },
  {
     "someKey1":"someVal3",
     "someKey2":"someVal4",
  }
} 
```

我想访问 someKeys 和 someValues。

我将它转换为这样的字典：

```
Dictionary<string, object> values = deserializeJSON(json_string); 
```

**编辑1：**对不起，忘记添加反序列化JSON：

```
private Dictionary<string, object> deserializeJSON(string p_jsonObject)
{
    JavaScriptSerializer serializer = new JavaScriptSerializer();
    return serializer.Deserialize<Dictionary<string, dynamic>>(p_jsonObject);
} 
```

现在我无法使用键“位置”访问值列表。如果我尝试打印 values["position"] 的类型，我会得到：

```
System.Collections.ArrayList 
```

所以我想我可以遍历这个，但我不能。我尝试使用枚举器（在此处阅读它可以迭代对象，并且我必须将其添加到 ArrayList 以进行转换）：

```
ArrayList arr = new ArrayList();
IEnumerable enumerable = values["position"] as IEnumerable;

foreach (object element in enumerable)
{
    arr.Add(element);
} 
```

当我打印 arr[0] 我得到：

```
System.Collections.Generic.Dictionary`2[System.String,System.Object] 
```

在这里我很困惑。我认为这是 someKeys 和 someVals 的列表，应该是正确的，对吧？现在我尝试访问这些值，但没有成功。我尝试了 arr[0]["someKey1"] 但得到一个错误，我无法将索引应用于“对象”。

关于解决方案的任何想法？理想情况下是更优雅的解决方案？:)

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T20:33:06.283

您可以使用[Linq to JSON](http://james.newtonking.com/pages/json-net.aspx)（从 NuGet 添加 Newtonsoft 的 JSON.NET）：

```
JObject jo = JObject.Parse(json);
var value = (string)jo["position"][1]["someKey1"]; // someVal3 
```

另一个样本：

```
JObject jo = JObject.Parse(json);
JArray positions = (JArray)jo["position"];
foreach (var item in positions)
{
    // use (string)item["someKey1"]
    // use (string)item["someKey2"]
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T21:05:32.327

您可以按如下方式访问元素：

![LinqPad 演示](../Images/2cccf1cf4f8ce346d09adf00383df6f9.png)

```
var enumerable = (IEnumerable)values["position"]; // Will get you the enumerable ArrayList
(Dictionary<string,object>)values["position"][0]; // Will get you the First element of the ArrayList
(string)values["position"][0]["someKey1"]; // Will get you someKey1 from the first position of position 
```

# query-builder - Eloquent ORM、查询生成器和原始 SQL 查询之间的速度比较

> ID：14570568
> 
> 赞同：4
> 
> 时间：2013-01-28T20:24:45.193
> 
> 标签：query-builder, eloquent, rawsql

有没有人有 Eloquent ORM、Query Builder 和 Raw SQL Queries 之间速度比较的数据？什么是更好的选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-08T15:35:41.560

原始 SQL 总是最快的，因为人们总是可以根据自己的喜好优化代码和脚本。查询构建器（又名 Fluent）将是第二快的，仅比 Eloquent 慢一点。这是因为 Eloquent 在其自身内部使用了 Fluent 以及它自己的模型和关系。

如果您正在寻找纯粹的处理速度，请使用原始 SQL。

否则使用 E​​loquent 进行最快的开发，除非你没有模型和关系，然后使用 Fluent。

# android - HttpURLConnection FixedLength 和 setChunked 抛出异常

> ID：14570571
> 
> 赞同：0
> 
> 时间：2013-01-28T20:24:47.223
> 
> 标签：android, httpurlconnection

我制作了一个 Android Applicatiob 来将视频上传到我的服务器，它工作正常，但如果文件大于 21MB，它会被强制关闭。所以我认为这是一个内存问题，我尝试使用 setFixedLengthStreamingMode 方法

```
 conn.setFixedLengthStreamingMode((int) new File(existingFileName).length()); 
```

但它根本不适用于小文件和大文件。我将值传递给 Log 以确保它以字节为单位的文件大小是正确的，但该方法不起作用我尝试使用此行将连接转换为块模式

```
 conn.setChunkedStreamingMode(100); 
```

但这条线也使应用程序失败，所以我不知道该怎么办

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T06:35:30.433

可能您正在将整个文件加载到内存中。此链接可能有助于解决您的问题[https://stackoverflow.com/a/9630475/830945](https://stackoverflow.com/a/9630475/830945)

# domain-driven-design - 在域服务中封装进程

> ID：14570573
> 
> 赞同：0
> 
> 时间：2013-01-28T20:25:06.363
> 
> 标签：domain-driven-design

注意 - 所有引述均来自[DDD：解决软件核心的复杂性](https://rads.stackoverflow.com/amzn/click/com/0321125215)

第一次引用（第 222 页）：

> 作为域对象的进程
> 
> 首先让我们同意我们不想让程序成为我们模型的突出方面。对象旨在封装过程，让我们考虑它们的目标或意图。
> 
> 我所说的是域中存在的过程，我们必须在模型中表示它们。当这些出现时，它们往往会导致尴尬的对象设计。
> 
> 本章的第一个例子描述了一个运送货物的运输系统。这个路由过程是有商业意义的。服务是明确表达这种过程的一种方式，同时仍然封装了极其复杂的算法。

第二次引用（第 104,106 页）：

> 有时，它只是不是一件事。在某些情况下，最清晰和最实用的设计包括在概念上不属于任何对象的操作。我们可以遵循问题空间的自然轮廓，并在模型中明确包含服务，而不是强制解决问题。
> 
> 当域中的重要过程或转换不是实体或值对象的自然责任时，将操作添加到模型中作为声明为服务的独立接口。根据模型的语言定义接口，并确保操作名称是通用语言的一部分。

我不知道在第一次引用中作者是否使用术语“**流程**”来描述与第二次引用中相同类型的行为（也应该封装在*Service*中），或者是否使用术语“**流程**”来描述描述一种与他在第 104、106 页上描述的行为完全不同的行为？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:28:34.677

这些概念非常接近，但对我来说，第一个引用看起来更像是关于在没有软件的情况下存在的大型现实世界域过程（例如“货物路由过程”）。

第二个不太清楚，但我认为它描述了在域的建模版本中发生的较小的操作/流程/转换。

虽然第一种应该从早期分析阶段立即单击“服务”，但后者更微妙，可能需要更多时间才能与常规实体行为区分开来 - 你一开始可以将它包含在一个实体中，但意识到它没有当您改进模型时，t 非常适合它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T05:05:21.377

我*认为*在p。222 他在谈论一种特定的过程。就像在p中一样。102 引用，它们可以作为服务实现。然而，一些过程是指实际的域过程，并且可以从模型中的显式表示中受益。这可能不会立即显而易见，并且可能需要服务之外的更复杂的对象模型。

# cakephp - Cake PHP - 如何访问 Pagination 找到的特殊模型？

> ID：14570576
> 
> 赞同：1
> 
> 时间：2013-01-28T20:25:27.790
> 
> 标签：cakephp, join, model, pagination

我有以下代码来获取与另一个与实际对象相关的模型相关的特殊模型：（我想要 Entry-model - 在 Rubric-model-view 中）

```
$this->paginate = array(
            'Entrieslocation' => array(
                'conditions' => array('Entrieslocation.rubric_id' => $this->Rubric->id, 'Entrieslocation.subrubric_id' => '0'),
                'joins' => array(
                    array(
                        'alias' => 'Entry',
                        'table' => 'entries',
                        'type' => 'INNER',
                        'conditions' => 'Entry.id = Entrieslocation.entry_id'
                    )
                )
            )
        ); 
```

然后我想我可以通过这样的方式得到它：

```
$this->set('entries', $this->paginate('Entry')); 
```

但是变量是空的，如何访问视图中的分页内的条目？

上面代码生成的查询是正确的，我通过在phpmyadmin中输入查询来检查它。那么我怎样才能访问结果（仅限条目）？

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:42:26.977

首先，您必须在控制器类下面定义 $paginate 变量。例如

```
class UsersController extends AppController {

     public $paginate = array();

} 
```

然后在您的操作中按照以下模式获取分页结果。

```
$this->paginate = array(
            'recursive' => -1,
            'limit' => 10,
            'conditions' => array('Your conditions'),
            'fields'     => array('Entry.*, Entrieslocations.*'),
            'joins' => array(
                array(
                  'table' => 'Entrieslocations',
                  'alias' => 'Entrieslocation',
                  'type' => 'inner',
                  'conditions' => 'Entry.id = Entrieslocation.entry_id'
                 ),
            ), 
            'order' => array(
                'Entry.id' => 'desc'
            )

        );

$entries = $this->paginate('Entry'); 
```

要将结果集传递给视图，请使用以下命令：

```
$this->set('entries', $entries); 
```

# mongodb - 在嵌套文档 MongoDB 中求和

> ID：14570577
> 
> 赞同：13
> 
> 时间：2013-01-28T20:25:29.107
> 
> 标签：mongodb, sum, aggregation-framework

我正在尝试对一组文档中的一些值求和，但没有运气。

这是文件

db.Cuentas.find().pretty()

```
{
    "Agno": "2013",
    "Egresos": [
        {
            "Fecha": "28-01-2013",
            "Monto": 150000,
            "Detalle": "Pago Nokia Lumia a @josellop"
        },
        {
            "Fecha": "29-01-2013",
            "Monto": 4000,
            "Detalle": "Cine, Pelicula fome"
        }
    ],
    "Ingresos": [],
    "Mes": "Enero",
    "Monto": 450000,
    "Usuario": "MarioCares"
    "_id": ObjectId(....)
} 
```

所以，我需要“Usuario”的“Egresos”中所有“Monto”的总和**：“MarioCares”**。在这个例子**中 154000**

使用聚合我使用这个：

```
db.Cuentas.aggregate(
    [
        { $match: {"Usuario": "MarioCares"} },
        { $group: 
            {
                _id: null,
                "suma": { $sum: "$Egresos.Monto" }
            }
        }
    ]
) 
```

但我总是得到

```
{ "result" : [{ "_id" : null, "suma" : 0 }], "ok" : 1 } 
```

我究竟做错了什么 ？

**警察局**已经看到[了这个](https://stackoverflow.com/questions/12162681/mongodb-2-1-aggregate-framework-sum-of-array-elements-matching-a-name)和[这个](https://stackoverflow.com/questions/8874671/taking-sum-of-column-in-mongodb)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-28T20:34:04.130

正如 Sammaye 所指出的，您需要[`$unwind`](http://docs.mongodb.org/manual/reference/aggregation/unwind/#_S_unwind)在`Egresos`数组中复制每个数组元素匹配的文档，以便您可以`$sum`覆盖每个元素：

```
db.Cuentas.aggregate([
    {$match: {"Usuario": "MarioCares"} }, 
    {$unwind: '$Egresos'}, 
    {$group: {
        _id: null, 
        "suma": {$sum: "$Egresos.Monto" }
    }}
]) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-01-10T11:10:38.933

你也可以通过这种方式。不需要分组只是项目你的领域。

```
db.Cuentas.aggregate([
    { $match: { "Usuario": "MarioCares" } },
    {
        $project: {
            'MontoSum': { $sum: "$Egresos.Monto" }
        }
    }
]) 
```

# ios - Objective-C 转换为 X 和 Y

> ID：14570584
> 
> 赞同：3
> 
> 时间：2013-01-28T20:25:54.327
> 
> 标签：ios, objective-c, cgaffinetransform

我一直在研究 CGAffineTransforms，想知道是否有办法让您查看并放大 x、y 坐标。我使用以下功能缩小了比例：

```
 CGAffineTransformMakeScale(4.00 ,4.00); 
```

但是我不确定如何将缩放与可能的 x,y 坐标联系起来。有没有人做过这样的事情？我可能不正确地使用这些功能吗？

```
 -(void)buttonSelected:(id)sender
       {
          UIButton *b = sender;
          CGPoint location = b.frame.origin;

          [UIView animateWithDuration:1.3f delay:0.0f options:UIViewAnimationCurveEaseIn animations:^{
               CGAffineTransform totalTransform =
               CGAffineTransformMakeTranslation(-location.x  , -location.y );
               totalTransform = CGAffineTransformScale(totalTransform, 4.0f, 4.0f);
               totalTransform = CGAffineTransformTranslate(totalTransform, location.x , location.y );
               [self.view setTransform:totalTransform];
           }completion:^(BOOL finished) {
           }];

       } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T20:31:36.810

您可以构建一个执行三个步骤的转换：

*   将要缩放的点移动到图层的中心；
*   规模;
*   将物体向后移动，使原来的中心回到中心。

所以，例如

```
// to use a point that is (109, 63) from the centre as the point to scale around
CGAffineTransform totalTransform =
                  CGAffineTransformMakeTranslation(-109.0f, -63.0f);
totalTransform = CGAffineTransformScale(totalTransform, 4.0f, 4.0f);
totalTransform = CGAffineTransformTranslate(totalTransform, 109.0f, 63.0f); 
```

或者，可以说更简单地调整`view.layer`'s [`anchorPoint`](https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html#//apple_ref/occ/instp/CALayer/anchorPoint)。第二个想法的问题是，当你第一次调整锚点时，你会立即得到变换，因为所有其他定位都是以中心为单位的。

# html - HTML/CSS：使用不同的屏幕分辨率使我的布局更加用户友好

> ID：14570585
> 
> 赞同：2
> 
> 时间：2013-01-28T20:25:54.117
> 
> 标签：html, css

我一直在编写我现在正在处理的布局，只使用百分比 (%) 和 edm。即使我不使用像素进行编码，我的布局在我的 1920x1080 计算机上看起来也很混乱。在我的 1280x800 电脑上看起来不错。我还能做些什么来使我的布局在不同的屏幕分辨率下更加用户友好？

* * *

1920x1080： [http ://a.pictureupload.us/18160038325106dbaecbca8.png](http://a.pictureupload.us/18160038325106dbaecbca8.png)

1280x800： [http ://a.pictureupload.us/15860427595106dba43723e.png](http://a.pictureupload.us/15860427595106dba43723e.png)

* * *

**索引.html：**

```
<div id="blog">
        <h2>Lorem Ipsum</h2>

</div>
<div id="blog-description">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam ut tortor
    nec turpis rutrum suscipit eget ut ligula. Curabitur sit amet velit odio,
    id commodo nisl. Morbi non metus risus. Pellentesque vulputate, nisi id
    interdum imperdiet, lectus erat scelerisque risus, sed viverra mi lorem
    a neque. Sed et erat tristique arcu laoreet eleifend. Fusce libero ipsum,
    rhoncus at porta eu, consectetur quis...</div>
<div class="readmore"> <a href="./blog/" title="Read more...">
    <img src="http://a.pictureupload.us/14850301725106d9f0cc927.jpg" /><div class="readtext">
    <p>Read more...</p></a>

</div>
</div>
<img src="http://a.pictureupload.us/4249066075106d9f3bfe03.jpg" class="blogimg" /> 
```

**样式.css：**

```
 #blog {
    position: relative;
    left: 15%;
    top: 8.000em;
    width: 15.000em;
}
#blog-description {
    position: relative;
    top: 8.300em;
    width: 25.000em;
    left: 16%;
    font-family: District Pro Thin;
    font-size: 1.100em;
}
.blogimg {
    position: relative;
    float: right;
    top: -15px;
    right: 16%;
    width: auto;
    height: auto;
    border: #000 thin solid;
    -moz-box-shadow: 0em 0em 0.375em #000;
    -webkit-box-shadow: 0em 0em 0.375em #000;
    box-shadow: 0em 0em 0.375em #000;
    /* For IE 8 */
    -ms-filter:"progid:DXImageTransform.Microsoft.Shadow(Strength=6, Direction=0, Color='#000000')";
    /* For IE 5.5 - 7 */
    filter: progid:DXImageTransform.Microsoft.Shadow(Strength=6, Direction=0, Color='#000000');
}
.readmore {
    position: relative;
    float: left;
    top: 140px;
    left: 44.5%;
    width: auto;
    height: auto;
}
.readmore .readtext a {
    font-size: 14px;
    font-family: District Pro Thin;
    text-decoration: none;
    color: #000;
    position:absolute;
    top:10px;
    /* in conjunction with left property, decides the text position */
    left:10px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:43:34.327

您可以做的一件事是将所有内容放在包装器 div 中，并将其设置为屏幕宽度的某个百分比。这不是一个完美的解决方案，但它确实缩小了您必须填充的屏幕空间 - 对于像您的示例这样的低内容页面特别有用。

```
<div id="wrap"> ... </div>

#wrap{
  width:80%;
  display:block;
  margin:auto;
} 
```

[OOCSS](http://oocss.org/)有一些基本的[布局](http://oocss.org/template.html)和[基于百分比的列](http://oocss.org/grids_docs.html)也可以提供帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T20:33:04.227

看看[http://goldengridsystem.com/](http://goldengridsystem.com/)

它是一个简单的网格系统，可让您为所有类型的屏幕和设备构建响应式设计。

# .net - 如何对VS2012 profiler中的每一行代码进行计时？

> ID：14570586
> 
> 赞同：3
> 
> 时间：2013-01-28T20:25:57.790
> 
> 标签：.net, optimization, visual-studio-2012, profiling

从 MSDN 看来，VS2012 分析器似乎可以对每一行代码进行计时，但我就是不知道怎么做。

我有 Visual Studio Ultimate 2012。

我需要在一个线程中运行的方法中分析每一行。现在我只能得到一个方法计时。

是否有关于如何分析**每条线**的演练？

*PS 请注意 - 这个问题是关于工作室附带的分析器而不是 3d 派对分析器。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T17:19:19.893

您使用的是仪器分析还是 CPU 采样？Visual Studio 分析器将显示每行的 CPU 样本计数，但它不会收集每行在检测模式下运行所需的时间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T23:35:52.440

我还没有经常使用它，但对我来说，当我在 VS 的上窗格中导航分析会话的调用层次结构时，分析器确实识别了下窗格中的调用行。

# sql - 如何设置可以输出数据然后重用该数据发送电子邮件的存储过程

> ID：14570592
> 
> 赞同：1
> 
> 时间：2013-01-28T20:26:09.083
> 
> 标签：sql, sql-server

我需要执行以下操作：

每当特定行中的字段发生更改时，我都需要它来触发对表的副本 ( `dbo.StatusChange`)，将更改的内容插入到它更改的内容中。我还需要这个日期/时间戳。

接下来我需要触发一封电子邮件发送到同一行中列出的 3 个字段。我被告知不要使用触发器，而是使用存储过程。我想设置输出变量，但不知道如何设置。

我有 dbmail 并且已经知道如何设置和使用它（已经测试过这部分）。

因此，每当`[Site_Status]`更改字段时，我都需要将已删除和更新类型的副本触发到名为 的新表中`[dbo.statuschange]`，删除列在`[previous]`列下，更新后放入`[new]`列。这也需要时间戳。我需要将这些变量声明为`@oldstatus`和`@newstatus`。

接下来我需要声明变量`@Reseller Email`（来自表`[siteinformation.reselleremail]`（每条记录都有不同的电子邮件）我不知道这是否正确。

# php - Wordpress：搜索输入值返回具有该名称的类别的帖子 - 可能吗？

> ID：14570593
> 
> 赞同：0
> 
> 时间：2013-01-28T20:26:12.130
> 
> 标签：php, javascript, sql, wordpress, search

是否有可能当用户输入与预定义术语匹配的术语时，它会输出该类别名称中的所有帖子？通过这种方式，我可以消除不属于该类别或具有该搜索值的帖子。

```
Search: COMEDY matches Category: COMEDY display ALL POSTS FROM CATEGORY COMEDY 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T12:10:41.430

您可以根据帖子的类别查询帖子，如果这是您所要求的。文档中有一个清晰而具体的示例，解释了如何从特定类别中查询帖子 - [http://codex.wordpress.org/Function_Reference /query_posts#All_Posts_in_a_Category](http://codex.wordpress.org/Function_Reference/query_posts#All_Posts_in_a_Category)

其他任何东西..只是设计正确的用户界面（html/js/css）

# php - 与号导致返回的文本在 URL 中被截断

> ID：14570596
> 
> 赞同：0
> 
> 时间：2013-01-28T20:26:15.270
> 
> 标签：php, urlencode

我从之前维护代码的人那里继承了几个 php 脚本。他没有编程经验，而且大部分时间都尽可能地把东西放在一起。今天我不得不为wordpress重写一个插件文件，现在我不知道出了什么问题。

我面临的问题是，在作为表 ( `<?php echo $result->display_name; ?>`) 一部分的 else 语句中显示返回的文件名时，我得到了意想不到的结果。假设我们的数据库有一个名为 Black & White.pdf 的文件。它没有返回 display_name “Black & White.pdf”，而是返回“Black”。我尝试了以下方法：

```
<?php echo htmlentities($result->display_name); ?> 
```

和

```
<?php echo htmlspecialchars($result->display_name); ?> 
```

两者都没有产生预期的结果。出了什么问题？这是我对 PHP 的无知，还是这与 WP 如何返回结果有关（我认为这不会产生影响，因为我不相信 WP 可以改变 php 的解析方式）。以下是代码供参考：

```
function display_files($assn_id) {
    global $wpdb;
    $second_db = new wpdb("xxxxxx", "xxxxxx", "xxxxxx", "xxxxxx");

    $results = $second_db->get_results("SELECT
        community_files.id,
        community_files.display_name,
        community_files.filename,
        community_files.sort,
        community_files.file_type
        FROM
        community_files
        WHERE
        community_files.comm_id = '".$assn_id."'
        ORDER BY
        community_files.sort ASC");

        if (!$results) {
            echo "<li>The next meeting has not been posted yet.</li>";
        } else {

            echo "<table>";
            // keeps getting the next row until there are no more to get

            foreach ($results as $result) {
                if (!$result->display_name) {
                    $display_name = str_replace("_", " ", $result->filename);
                    $display_name_fake = str_replace(" .", ".", $display_name);
                    $file_array[$x] = $result->id;
                } else {
                    $display_name = $result->display_name;
                    $display_name_fake = str_replace(" .", ".", $display_name);
                    $file_array[$x] = $result->id;
                } ?>
                    <tr>
                        <td>
                        <?php
                        if ($result->display_name == "") {
                        ?>
                            <a href="renamefiles.php?action=rename&amp;file_id=<?php echo $result->id; ?>&amp;filename=<?php echo $display_name; ?>&amp;assn_id=<?php echo $assn_id; ?>"><?php echo $display_name_fake; ?></a>
                        <?php
                        } else {
                        ?>
                            <a href="renamefiles.php?action=rename&amp;file_id=<?php echo $result->id; ?>&amp;filename=<?php echo $display_name; ?>&amp;assn_id=<?php echo $assn_id; ?>"><?php echo $result->display_name; ?></a>
                        <?php
                        }
                        ?>
                        </td>
                    </tr>
                <?php   
            }
            echo "</table>";
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:49:02.363

[`urlencode`](http://php.net/manual/en/function.urlencode.php)当您将它插入到您正在构建的 URL 中时，听起来您需要该文件名。根据上面的评论，不这样做会破坏你的`GET`字符串。

```
array(5) { 
  ["action"]=> string(6) "rename" 
  ["file_id"]=> string(5) "24086" 
  ["filename"]=> string(8) "Black " 
  ["White_pdf"]=> string(0) "" 
  ["assn_id"]=> string(2) "25" 
} 
```

这导致您得出结论，您发布的代码失败了。它不是。它只是在构建格式错误的 HTML，然后当您单击类似内容时会失败。

这段代码：

```
<a href="renamefiles.php?action=rename&amp;file_id=<?php echo $result->id; ?>&amp;filename=<?php echo $display_name; ?>&amp;assn_id=<?php echo $assn_id; ?>"><?php echo $result->display_name; ?></a> 
```

应该是这样的：

```
<a href="renamefiles.php?action=rename&amp;file_id=<?php echo $result->id; ?>&amp;filename=<?php echo urlencode($display_name;) ?>&amp;assn_id=<?php echo $assn_id; ?>"><?php echo $result->display_name; ?></a> 
```

然后，您在处理请求时需要这样做。[`urldecode`](http://php.net/manual/en/function.urldecode.php) `$_GET['filename']`

我建议您不要`&`在文件名中使用空格和特殊字符（如果您实际上将此名称用作文件系统文件名）。你是在自找麻烦。

# android - Android模拟器关闭后无法启动

> ID：14570604
> 
> 赞同：2
> 
> 时间：2013-01-28T20:26:57.617
> 
> 标签：android, android-emulator

使用安装了 Android SDK 和 Virtual Device Manager 的 Eclipse (4.2.1)，我能够成功启动带有设备映像、运行代码等的模拟器 - 但是，如果我关闭模拟器，任何后续尝试重新启动它失败并出现以下错误：

```
emulator: Failed to open the hax module
HAX is not working and emulator runs in emulation mode 
```

如果我重新创建虚拟设备并覆盖现有定义，它将再次启动（但只是一次）。运行 OSX 10.8.2，AVD 为 4.2，级别 17。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:14:02.690

呃……想通了。我有多个屏幕，并且仅在将模拟器移动到其中一个辅助监视器后才会出现此问题。在这种情况下，将向 emulator-user.ini 写入负位置值。删除文件可以解决问题（或者只是将模拟器留在笔记本电脑的主屏幕上）。

在 code.google.com 上的[这个问题](http://code.google.com/p/android/issues/detail?id=40038)中找到它

# javascript - 没有文件上传表单元素的 XHR2 文件上传

> ID：14570606
> 
> 赞同：0
> 
> 时间：2013-01-28T20:27:13.993
> 
> 标签：javascript, file-upload, xmlhttprequest

我在使用 XHR2 将文件发布到服务器时遇到问题。我有以下问题：

我想使用两个参数和 FILE 对 URL 执行 POST。我希望 POST 请求的行为就像我在后端使用 input=file 一样。

目标是这样的：

```
function sendForm(FILE_URI, GO_TO) {
  var formData = new FormData();

  formData.append('param1', "param1");
  formData.append('param2', "Param2");

  // Now we add the file
  formData.append("file", FILE_URI);

  var xhr = new XMLHttpRequest();
  xhr.open('POST', GO_TO, true);
  xhr.onload = function(e) { ... };

  xhr.send(formData);

  return false; // Prevent page from submitting.
} 
```

此代码不起作用，服务器不会将“文件”参数视为 $_FILE（我使用的是 PHP）。请记住 - 表单中没有文件上传元素，它只是一个带有 URI 的隐藏输入：

```
<input type="hidden" id="file_item" value="/path/to/image" /> 
```

对此有何指导？

**更新**

我知道编辑 INPUT 文件很糟糕——我不想那样做。我想找到其他方法在没有 FORM 的情况下将文件发布到服务器。我可以使用 XHR2 上传没有表单的 BLOB - 但我正在寻找使用 XHR2 让 Params + File（或 Blob）的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:36:21.943

想想这个。您转到某个随机页面，有人可以在页面上放置一个隐藏字段并从您的计算机上传任何文件。这是一个好的设计吗？这就是为什么您不能设置文件输入的值的原因。这是禁区。这是一场安全噩梦。

如果它是 Internet 上某个文件的路径，为什么网络服务器不获取它？

现在可以使用画布在您的 server r上使用[代理并](http://www.maxnov.com/getimagedata/#download)[以这种方式上传文件](https://stackoverflow.com/questions/11843115/uploading-canvas-context-as-image-using-ajax-and-php)来绕过它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T20:37:59.197

您的表单需要具有值 multipart/form-data 的属性 enctype

```
<form enctype="multipart/form-data">...</form> 
```

您还应该使用 file 元素，并通过 css 将其隐藏（隐藏字段将不起作用）。

```
<input type="file" id="file_item" value="/path/to/image" style="visibility: hidden;"> 
```

您可能正在这样做，因为您无法设置文件元素的样式？看到这个打开文件对话框（通过触发文件元素点击）

HTML：

```
<input type="file" id="file_item" value="/path/to/image" style="visibility: hidden;">
<button id="my-btn">click me for opening file dialog</button> 
```

JS：

```
document.getElementById('my-btn').onclick = function () {
  document.getElementById('file_item').click();
}; 
```

在这里工作小提琴：http: [//jsfiddle.net/LM6zQ/](http://jsfiddle.net/LM6zQ/)

# javascript - 从一个简单的一维数组中选择一组元素，目标元素在中间

> ID：14570609
> 
> 赞同：3
> 
> 时间：2013-01-28T20:27:20.803
> 
> 标签：javascript, math, matrix

由于我的大脑中缺乏数学神经元，我很难找到解决这个问题的方法。

我需要创建一个简单的 javascript 函数，它将接收三个参数：

*   具有 X 元素的一维正常索引数组（值是唯一 ID）
*   要选择的目标 ID
*   要返回的元素数量

第三个参数将要求函数返回一组元素，具有目标 ID 的元素要么位于结果的中心，要么位于结果的旁边。

函数的结果也应该是一个数组。

几个例子使它更直观的解释：

```
function([100,120,140,160,180,200], 120, 3)
// should return [100,120,140]

function([100,120,140,160,180,200], 160, 4)
// should return [140,160,180,200]

function([100,120,140,160,180,200], 180, 5)
// should return [140,160,180,200,100] 
```

最后一个示例所涵盖的情况是在编写代码时让我感到困惑的地方，我目前正在尝试这样做，但我发现自己编写了奇怪的条件、大量的 if 语句和通常看起来像是一种解决方法的代码。此外，参数 3 大于参数 1 中元素数量的情况对我来说有点过分。

我觉得继续使用这段代码很不安全，因为它感觉有问题而且根本不合适。当然，具有适当数学技能的人可以为我提供我需要了解如何以更优雅的方式完成此任务的理论。

理论或伪代码就足够了，但如果有人手头有类似的东西，请不要犹豫分享。

谢谢你！

（这是我目前所写的——基于原型 JS 类的实现）

```
var CBasicMatrix=Class.create({

    initialize: function(elementList){
        this.elementList=elementList;
    },

    select: function(id, amount){
        if(amount>this.elementList.length) 
            amount=this.elementList.length;
        if(!this.elementList.length) return false;
        var elementIndex=this.elementList.indexOf(id);
        if(elementIndex==-1) return false;
        var isRound=amount%2==0;
        var amountHalf=isRound ? (amount/2) : (Math.ceil(amount/2)-1);
        // [464,460,462,461,463]
        var result=[];
        if(elementIndex-amountHalf >= 0) {
            var startIndex=(elementIndex-amountHalf);
            for(i=startIndex;i<=startIndex+amount;i++){
                result.push(this.elementList[i];
            }
        } else {
            // more seemingly stupid iterative code coming here 
        }

    }

}); 
```

编辑：为了使这更容易理解，我将说明目的。此代码应该用于一种幻灯片，其中多个元素（参数 3）同时可见。参数 1 是所有元素（的 ID）的列表，它们按照它们出现在 HTML 声明中的正确顺序排列。参数 2 是当前选择的元素，因此应该出现在中间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T21:22:08.200

### 这是我的解决方案：

```
function method(arr, value, n) {
    var result = [],
        len = arr.length,
        index = arr.indexOf(value);

    for (var i = 0; index > -1 && i < n ; i++) {
        result.push(arr[(len + index - ~~(n / 2) + (n % 2 ^ 1) + i) % len]);
    }

    return result;
} 
```

**测试：**

```
var arr = [100, 120, 140, 160, 180, 200];

method(arr, 120, 3);  // [100, 120, 140]
method(arr, 160, 4);  // [140, 160, 180, 200]
method(arr, 180, 5);  // [140, 160, 180, 200, 100]
method(arr, 100, 3);  // [200, 100, 120] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:39:43.923

我将通过提供伪代码来帮助您：

1\. 如果没有匹配，您应该返回一个空数组。

2\. 如果匹配，则只需将第三个参数除以 2，然后获取结果，然后从找到的元素的索引减去前一个结果循环，直到第三个参数的值，然后将元素存储在一个新数组中。

3\. 您返回新数组。

**更新：** 我看到了你的代码，我认为它没有任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T21:15:16.573

经过一些仔细的调试和过度思考我的方法后，我设法找到了一个看起来合适且安全的解决方案。我相信这可以进一步优化，如果有人有任何建议，请随时分享。

```
var CBasicMatrix=Class.create({

    initialize: function(elementList){
        this.elementList=elementList;
    },

    select: function(id, amount){
        if(amount>this.elementList.length) 
            amount=this.elementList.length;
        if(!this.elementList.length) return false;
        var elementIndex=this.elementList.indexOf(id);
        if(elementIndex==-1) return false;
        var isRound=amount%2==0;
        var amountHalf=isRound ? (amount/2) : (Math.floor(amount/2));
        var result=[];
        var startIndex=(elementIndex-amountHalf);
        var endIndex=(startIndex+amount-1);
        var targetIndex=0;
        for(i=startIndex;i<=endIndex;i++){
            targetIndex=i;
            if(i>this.elementList.length-1) targetIndex=i-this.elementList.length;
            if(i<0) targetIndex=i+this.elementList.length;
            result.push(this.elementList[targetIndex]);
        }
        return result;
    }

}); 
```

# python - python中的k-means：确定哪些数据与每个质心相关联

> ID：14570610
> 
> 赞同：5
> 
> 时间：2013-01-28T20:27:24.380
> 
> 标签：python, scipy, cluster-analysis, k-means

我一直在使用`scipy.cluster.vq.kmeans`k-means 聚类，但想知道是否有办法确定每个数据点（推定）与哪个质心相关联。

显然，您可以手动执行此操作，但据我所知，kmeans 函数不会返回这个？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-28T20:34:52.833

其中也有一个返回标签的函数`kmeans2`。`scipy.cluster.vq`

```
In [8]: X = scipy.randn(100, 2)

In [9]: centroids, labels = kmeans2(X, 3)

In [10]: labels
Out[10]: 
array([2, 1, 2, 1, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 2, 2, 1, 2, 1, 2, 1, 2, 0,
       1, 0, 2, 0, 1, 2, 0, 1, 0, 1, 1, 2, 2, 2, 2, 1, 2, 1, 1, 1, 2, 0, 0,
       2, 2, 0, 1, 0, 0, 0, 2, 2, 2, 0, 0, 1, 2, 1, 0, 0, 0, 2, 1, 1, 1, 1,
       1, 0, 0, 1, 0, 1, 2, 1, 1, 0, 1, 0, 0, 1, 0, 1, 0, 0, 2, 0, 2, 2, 0,
       1, 1, 0, 1, 0, 0, 0, 2]) 
```

否则，如果必须使用`kmeans`，也可以使用`vq`来获取标签：

```
In [17]: from scipy.cluster.vq import kmeans, vq

In [18]: codebook, distortion = kmeans(X, 3)

In [21]: code, dist = vq(X, codebook)

In [22]: code
Out[22]: 
array([1, 0, 1, 0, 2, 2, 2, 0, 1, 1, 0, 2, 1, 0, 1, 1, 0, 1, 0, 1, 0, 1, 1,
       2, 2, 1, 2, 0, 1, 1, 0, 2, 2, 0, 1, 0, 1, 0, 2, 1, 2, 0, 2, 1, 1, 1,
       0, 1, 2, 0, 1, 2, 2, 1, 1, 1, 2, 2, 0, 0, 2, 2, 2, 2, 1, 0, 2, 2, 2,
       0, 1, 1, 2, 1, 0, 0, 0, 0, 1, 2, 1, 2, 0, 2, 0, 2, 2, 1, 1, 1, 1, 1,
       2, 0, 2, 0, 2, 1, 1, 1]) 
```

[文档：scipy.cluster.vq](http://docs.scipy.org/doc/scipy/reference/cluster.vq.html#module-scipy.cluster.vq)

# javascript - 从 Ctr+V 事件上传图像文件 (javascript)

> ID：14570612
> 
> 赞同：0
> 
> 时间：2013-01-28T20:27:34.897
> 
> 标签：javascript, file-upload, canvas, base64, blob

我正在尝试使用此处显示的技术：http: [//joelb.me/blog/2011/code-snippet-accessing-clipboard-images-with-javascript/](http://joelb.me/blog/2011/code-snippet-accessing-clipboard-images-with-javascript/)来捕获用户粘贴到网页上的图像。这与 Chrome 和 Firefox 兼容。

一切正常。图像数据应该存储在`pastedImage.src`. 我能够在页面上显示图像（进入 img 元素，或在画布上绘制）。

但是，`pastedImage.src`在 Chrome 和 Firefox 中存储的内容有所不同。Firefox 将实际图像存储在 base64 编码的数据 URL 中，我可以对其进行解析和上传；Chrome 以 http://[domain]/[string] 的形式存储了一个指向图像的临时 URL。请在此处查看：http: [//test.vapenerd.com/paste.html](http://test.vapenerd.com/paste.html)

我真的不知道如何从中获取实际的图像数据 - 我尝试了`FileReader()`它，但它似乎不起作用。

现在我的解决方法是将图像绘制到画布中，然后使用`toDataURL()`返回 base64 编码数据 URL 的方法获取它。

对不起，我不是网络开发人员，希望这不会太混乱。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T20:49:25.157

只需将其读取为数据 uri

```
var reader = new FileReader();
reader.onload = function(event){
    createImage(event.target.result);
}; // data url!
reader.readAsDataURL(blob); 
```

[**演示**](http://jsfiddle.net/x6Up6/2/)

# objective-c - 在一个库中声明一个变量或函数并在另一个库中定义它

> ID：14570613
> 
> 赞同：2
> 
> 时间：2013-01-28T20:27:43.640
> 
> 标签：objective-c, c, frameworks, forward-declaration

我有一个在所有应用程序中都使用的库，其中包含通用代码。我将它编译为 Mac 的“框架”和 iOS 的“静态库”。

**我希望库能够引用由最终包含项目定义的变量。**

例如，该库有一个功能：

```
void printAppID(void);

void printAppID(void) {
    NSLog(@"App ID is: %@", kAppID);
} 
```

自然，如果未声明此变量，库将抛出警告，因此我将其声明为：

```
NSString *kAppID; 
```

而且由于`kAppID` 库事先不知道（每个项目都不同），最终项目会执行以下操作：

```
NSString *kAppID = @"ABCD1234" 
```

这会引发编译器错误：

> 建筑的未定义符号

我尝试过使用`extern`，或将其设为函数，或`#define`，但无法破解。

**在库中声明变量并在其他地方定义它**的规范方法是什么？我认为这在 C 中和在 Obj-C 中是一样的。

## 编辑：更普遍的情况

**如何拥有一个包含在应用程序项目中的已编译静态库以及一个 Constants.h 头文件，其值可以在该项目中编辑并由库使用？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:57:25.547

规范的方法可能是`setAppID`在库中的某个地方有一个方法，应用程序必须调用该方法来设置 ID。

也就是说，`kAppID`是库的一部分：

```
static NSString* kAppID = nil;

void setAppID (NSString* appID) {
    kAppID = appID;
}

// ...library can use kAppID as necessary... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T20:57:41.660

extern 是正确的方法。

在你的库中：

```
extern NSString* const kAppID; 
```

在您的项目中的某处：

```
NSString* const kAppID = @"ABCD1234"; 
```

在您的库中使用可以从您的项目中配置的单例对象可能是一种更好的方法。但是，如果您希望链接器在未设置某些内容时崩溃，那么使用 extern 是正确的方法。

# .net - .Net 正则表达式从文本中提取 URL 永远不会返回

> ID：14570615
> 
> 赞同：5
> 
> 时间：2013-01-28T20:27:48.357
> 
> 标签：.net, regex

我有一个 .Net Regex 表达式，它从字符串中提取所有看起来有效的 Urls。它通过了我的所有 20 个单元测试，除了一个：当 Url 包含问号时。这会导致正则表达式引擎挂起进程并造成严重破坏。

我在这个表达式上花了很多时间，但我不确定如何解决这个问题。希望那里的正则表达式专业人士可以伸出援助之手！两部分问题：

**1）如何改进这种正则表达式模式，使其在评估字符串“ [http://www.example.com/?a=1](http://www.example.com/?a=1) ”时不会挂起：**

正则表达式模式：

```
(?<URL>(\s|^)((?<Scheme>[A-Za-z]{3,9})[:][/][/])?([A-Za-z0-9-]+[.])+([A-Za-z]+){2,4}(?(Scheme)|[/])(((?:[\+~%\/.\w-_]*[/]?)?\??#?(?:[\w]*))?)*(\s|$)) 
```

我建议使用这个很棒的在线 .Net Regex 测试引擎：[http ://regexhero.net/tester/](http://regexhero.net/tester/)

**2) 我可以在调用代码中做什么来防止/从 Regex 引擎挂起中恢复？这是调用代码：**

```
 Regex linkParser = new Regex(UrlMatchRegex, RegexOptions.Compiled | RegexOptions.IgnoreCase);

        // Find matches and add them to the result
        foreach (Match m in linkParser.Matches(message))
        {
            result.Add(m.Value.Trim());
        } 
```

我在这个特殊的正则表达式模式上花了很多时间，并且已经尝试了至少 7 种我发现的替代方法（包括这个页面中的大部分：http: [//mathiasbynens.be/demo/url-regex](http://mathiasbynens.be/demo/url-regex)）。我更愿意改进我现有的模式，而不是使用完全不同的模式，但我愿意接受选择。

**最终正则表达式 v1：**

经过几次修改，在下面的帮助下，我的最终正则表达式匹配如下所示：

```
(?<URL>((?<=\s)|^)((?<Scheme>[A-Za-z]{3,9})[:][/][/])?([A-Za-z0-9-]+[.])+[A-Za-z]{2,4}(?(Scheme)|[/]?)(((?:[\+~%\/.\w-_]*[/]?)?\??#?&?(?:[\w=]*))?)*((?=\s)|$)) 
```

**Regex v2：更新为包含一组域、端口号、主题标签列表，但不包含尾部斜杠

```
(?<URL>((?<=\b)|^)((?<Scheme>[A-Za-z]{3,9})[:][/][/])?([A-Za-z0-9-]+[.])+((?<TLD>\b(aero|asia|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cx|cy|cz|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mn|mn|mo|mp|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|nom|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ra|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sj|sk|sl|sm|sn|so|sr|st|su|sv|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw|arpa)\b))+(\/?)+((((?:[:\+~%/.\w-_\/])?[\?]?[#]?[&]?(?:[\w=]*))?)+(?=\?|\b))) 
```

测试用例：这是一个测试#

不应该匹配：

```
like when you a/b test something
this sentence ends with a/
just a #hashtag 
```

应该匹配：

```
sos.me extra
sos.me. extra <-- not period
sos.me, extra <-- not comma
sos.me/ extra <-- should match traililng /
sos.me/#hashtag? extra <-- not questionmark
sos.me? extra <-- not questionmark
www.sos.me? extra <-- not questionmark
sos.me/abcde extra
sos.me/abcde#hashtag extra
sos.me/abcdf/0 extra
sos.me/abcdf/0#hashtag extra
sos.me/something.aspx extra
sos.me/something.aspx#hashtag extra
http://something.com: extra <-- not colon
sos.me/something.aspx?name=value extra
sos.me/something.aspx?name=value#hashtag extra
http://something.com extra
https://something.com extra
http://something.com:80 extra
http://something.com:80/ extra <-- should match trailing /
http://something.com:80/?a=v&1=2 extra
http://something.com:80/?a=v&1=2#hashtag extra
http://something.com:80/?a=v&1=2# extra <-- should match trailing # 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T20:34:48.037

**问题 1**

这导致[灾难性的回溯](http://www.regular-expressions.info/catastrophic.html)：

```
([A-Za-z]+){2,4} 
```

和：

```
[\+~%\/.\w-_]*[/]? 
```

我猜你的意思是：

```
([A-Za-z]{2,4}) 
```

和：

```
[\+~%\/.\w-_]* 
```

您的正则表达式当前不匹配带有等号的 URL，这就是灾难性回溯首先发生的原因：

```
\??#?(?:[\w]*) 
```

不匹配 '?a **=** 1' 因为`\w`不包括 '='。你可以很容易地解决这个问题：

```
\??#?(?:[\w=%]*) 
```

（我也把 '%' 扔进去了）

此外，您的正则表达式匹配 URL 前后的空格。您可能更喜欢环视，`\s`因为这将匹配空白之前或之后的位置，而不是空白本身：

```
(?<URL>((?<=\s)|^)((?<Scheme>[A-Za-z]{3,9})[:][/][/])?([A-Za-z0-9-]+[.])+[A-Za-z]{2,4}(?(Scheme)|[/])(((?:[\+~%\/.\w-_]*[/]?)?\??#?(?:[\w=]*))?)*((?=\s)|$)) 
```

**问题2**

您无法检测灾难性回溯正则表达式或从中恢复。您可以尝试的最好的方法是将正则表达式旋转到一个独立的线程中，然后在某个超时后终止该线程。究竟如何做到这一点将是一个完全不同的问题，但在网上找到 .NET 教程并不难。

看：

*   [多线程应用程序（C# 和 Visual Basic）](http://msdn.microsoft.com/en-us/library/ck8bc5c6.aspx)
*   [我如何识别邪恶的正则表达式？](https://stackoverflow.com/questions/12841970/how-can-i-recognize-an-evil-regex)

# powerbuilder - PowerBuilder 9 是否与 Office 2010 兼容

> ID：14570626
> 
> 赞同：0
> 
> 时间：2013-01-28T20:28:40.223
> 
> 标签：powerbuilder

当我创建一个 Word oleobject 时，我有一个 PowerBuilder 9 应用程序与 Word 2003 一起工作得很好。我们在较新的服务器上安装了 Office 2010 并将应用程序移植到它，但我尝试打开的 Word 文档失败并出现错误 35。这可能是兼容性问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:24:39.867

我的经验是，兼容性与 PowerBuilder 版本的关系不大，而与 Microsoft 在版本之间滑入 Office 的 OLE API 中的细微变化有关。我建议检查您的 OLE 代码并在新的 Office 下重新研究它们，以确保它们没有被淘汰。

祝你好运，

特里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:11:16.440

是的 - PB9 在 Office 2010 发布前大约 6 年问世。它们不兼容。

您需要升级到 PB10 之后的版本...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T19:37:44.023

我有从 6.5 回来的 PB 代码，它用 Excel 做了一些真正欺骗 OLE 的东西。从未更改过该代码（如果我没记错的话）。

仍然适用于 PB 12 和 Office 2013。

YMMV

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T20:35:38.120

我可能错误地表达了我的问题。我以前能够使用带有 PB9 的 Office 2003 并且打开文档没有问题。当服务器安装了 Office 2010 时，我们被错误 35 所掩盖，并且如果不给代码带来很大的延迟就无法运行。从 Microsoft 下载成功了，我们使用的是 Office 2010。

# ios - 将 card.io sdk 添加到项目时链接器命令失败

> ID：14570630
> 
> 赞同：1
> 
> 时间：2013-01-28T20:28:49.490
> 
> 标签：ios, card.io

当我将 card.io sdk 添加到我的项目中时，我在尝试编译时得到以下信息：

```
 duplicate symbol _CGSizeSwap in:
    /ProjectX/CardIO/libCardIO.a(CardIOShutterView.o)
    /ProjectX/CardIO/libCardIO.a(CardIODataEntryViewController.o)
duplicate symbol _CGSizeSwap in:
    /ProjectX/CardIO/libCardIO.a(CardIOShutterView.o)
    /ProjectX/CardIO/libCardIO.a(CardIOResource.o)
duplicate symbol _CGSizeSwap in:
    /ProjectX/CardIO/libCardIO.a(CardIOShutterView.o)
    /ProjectX/CardIO/libCardIO.a(CardIOModalActivityIndicator.o)
ld: 3 duplicate symbols for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

帮助赞赏[使用 xcode 4.6 和 card.io 版本 3.0.4]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T00:31:39.213

来自 card.io 的 Josh 在这里。感谢您报告此事！

这是 card.io iOS SDK 3.0.4 版中的一个错误。我们刚刚发布了 3.0.5；[请在https://www.card.io/integrate/ios](https://www.card.io/integrate/ios)上试一试，并确认它为您解决了问题。

# java - 用 Java 打开一个新的控制台窗口并让一个控制台对象引用它

> ID：14570631
> 
> 赞同：2
> 
> 时间：2013-01-28T20:28:50.067
> 
> 标签：java

我正在尝试在 java 中打开一个新的控制台窗口并让一个 Console 对象引用它。我知道以下代码在 Windows 中打开了一个控制台，

```
Process p = Runtime.getRuntime().exec("cmd /c start cmd.exe");
p.waitFor(); 
```

有没有办法`Console cons = ...`结合上述方法使控制台对象引用我刚刚打开的新对象？还是我完全不正确地这样做并且有更好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T20:34:57.973

您误解了`Console`Java 中的对象代表什么。从[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/io/Console.html)：

> 访问与当前 Java 虚拟机关联的基于字符的控制台设备（如果有）的方法。

它代表与 JVM 进程关联的控制台设备，并且它也不存在。如果您想与从 Java 进程启动的系统控制台进行交互，则需要通过其输入和输出流来进行。

# jquery - 使用jqgrid和coldfusion生成excel报告

> ID：14570637
> 
> 赞同：2
> 
> 时间：2013-01-28T20:29:14.263
> 
> 标签：jquery, excel, jqgrid, coldfusion

有没有人有关于如何使用 jqgrid 和 Coldfusion 实现报告生成的教程或代码示例。

我在网格中添加了一个按钮，但不确定如何进一步处理数据。Excel 报告必须在新窗口弹出。

基本上，我的问题是，我可以从网格本身捕获数据，还是从网格中获取参数并使用与生成网格相同的查询在新的冷融合页面上生成报告？

先感谢您。

热那

```
).navButtonAdd('#pager',{caption:"To Excel", onClickButton:
            function(){
                    document.location.href=''  // call processing file
            },
            position:"last", title:'Export to Excel' }
        ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T21:16:42.690

您需要让按钮调用生成 Excel 文件的新页面。在新页面中，重新运行查询，然后输出到内容类型为的 HTML 表，`application/vnd.ms-excel`或用于`<CFSPREADSHEET>`从新页面生成 Excel 文件。

# c# - 在 c# 中设置属性后使用一个类

> ID：14570646
> 
> 赞同：1
> 
> 时间：2013-01-28T20:30:01.480
> 
> 标签：c#, asp.net

我有一个小班，里面只有几个属性。

这是一个例子：

```
public class clsRepLogs

public string those;
public string these;

    public void setThoseandThese
    {
    //call a stored procedure
    //get results

    this.those = something;
    this.these   = somethingElse;
    }} 
```

从我的 first.aspx.cs

我调用 set 函数：

```
clsRepLogs cLog - new clsRepLogs()
cLog.setThoseandThese() 
```

所以现在属性已经被赋值了。

我现在想在另一个 aspx.cs 文件中使用它们来填充表单……但不知道如何找到它们……

我试过

```
clsRepLogs cLog;

lblThese.text = cLog.these; 
```

但它给了我一个错误：“使用未分配的局部变量'cLog'

基本上，我如何告诉它使用我之前已经分配给该类实例的值？

我希望我能正确解释这一点，但我可能是我正在做的事情的方式。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T20:34:37.537

听起来您想从多个 ASPX 页面访问该类的同一个实例。有多种方法可以做到这一点；每个用户的解决方案是使用会话状态。

```
// page 1
var c = new clsRepLogs();
c.setThoseAndThese();
Session["mykey"] = c;

// page 2
var c = (clsRepLogs)Session["mykey"]; 
```

“mykey”可以是任何字符串。您可能还想在访问之前检查 Session 是否包含该值，例如`if( Session["mykey"] != null ){ ... }`

记住：

*   会话不持久；重新启动 web worker 进程将重置所有进程内会话。
*   在 Session 中存储许多大对象通常不是一个好主意。
*   如果数据是机密的，请注意[会话固定攻击](http://en.wikipedia.org/wiki/Session_fixation)。
*   会话可以跨服务器进行负载平衡，因此该解决方案可以扩展。

供参考（替代方法）：

*   `Cache`当您不关心每个用户的隔离并希望控制数据过期时，您可以使用该对象。
*   您可以使用该`Application`对象；类似于`Cache`但无法控制到期。
*   您可以将对象存储在数据库中并将其加载到每个页面上。当您不想要繁重的会话和/或希望更永久地保存数据（例如跨多个会话持续存在的购物车）时，这很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:31:23.633

您需要初始化或设置为您想要`cLog`的实例`clsReport`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T20:31:32.903

你没有实例化你的类。它应该是

```
clsRepLogs cLog = new clsRepLogs(); 
```

或者，如果我误解了您的代码，

```
clsReport cLog = new clsReport(); 
```

编辑：

如果你需要保留这些，它应该是一个静态类，这样它就不能被实例化。

```
public static class clsReport
{
    public static string those;
    public static string these;

    public static void setThoseandThese
    {
        //call a stored procedure
        //get results

        this.those = something;
        this.these   = somethingElse;
    }
} 
```

这在很大程度上取决于您需要它如何运作。此外，我不是在 Webforms 应用程序的内存中永久保存对象/类的专家。如果您想重新访问该类以获取这些值，我不确定它们是否仍在内存中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T20:32:11.493

您将需要初始化您的 cLog 类：

```
clsRepLogs cLog = new clsReport();
lblThese.text = cLog.these; 
```

# jquery - 动态更改 jQuery Mobile 中的数据位置

> ID：14570649
> 
> 赞同：0
> 
> 时间：2013-01-28T20:30:06.633
> 
> 标签：jquery, jquery-mobile

我的 jQuery Mobile 布局中有一个标题项...

```
 <div data-role="header" data-theme="b" class="textHeader">
 <h3>My Text</h3>
 </div> 
```

...未设置为 data-position=fixed。它设置为在用户向下滚动时显示和滚动屏幕。

但是，当手机/设备的方向更改为横向时，我希望它变得固定。所以我测试了方向并尝试更改属性：

```
$(window).resize(function() { resizeCanvas() });

function resizeCanvas() {

    if(window.innerHeight > window.innerWidth) //portrait
    {

        $(".textHeader").attr("data-position","inline");

    }

    else //landscape
    { 

            $(".textHeader").attr("data-position", "fixed");
    }
 } 
```

但是，这不起作用。

似乎发生的是标题在页面加载时显示。这意味着，如果我对其进行测试并将其加载到横向浏览器上，它的行为始终是固定的；但如果我做肖像，它一直没有固定。我正在考虑的一件事是，我需要类似于如何执行 .listview('refresh') 的方法，但对于标题。

关于如何使这项工作的任何想法？

# php - Yii：如何在标签内制作带有 html 标签的按钮

> ID：14570651
> 
> 赞同：8
> 
> 时间：2013-01-28T20:30:11.027
> 
> 标签：php, twitter-bootstrap, yii

我正在尝试使用一些引导功能，例如 Yii CHtml 类中的图标字形，这是我的代码：

```
<?php 
   echo CHtml::submitButton('<i class="icon-user"></i> Login', 
       array(
           'class' => 'btn btn-large pull-right'
       )); 
 ?> 
```

但它有点不“识别”标签，只是像下面的图片一样渲染标签。![在此处输入图像描述](../Images/b71a6534be2bedb2eb7b5442cdbe659e.png)

有谁知道如何解决它（不输入html标签本身）。

感谢你们。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-28T21:23:56.997

`CHtml::submitButton`生成一个`<input type="submit">`不能接受附加 HTML 作为其内容的。但是，您可以做一些事情来品尝`CHtml::tag`：

```
echo CHtml::tag('button',
                array('class' => 'btn btn-large pull-right'),
                '<i class="icon-user"></i> Login'); 
```

这将生成一个`<button>`可以将任意 HTML 作为其内容的标签。

**更新：**正如frostyterrier 在评论中指出的那样，有一个内置方法[`CHtml::htmlButton`](http://www.yiiframework.com/doc/api/1.1/CHtml#htmlButton-detail)可以让您更轻松地做到这一点：

```
echo CHtml::htmlButton('<i class="icon-user"></i> Login',
                       array('class' => 'btn btn-large pull-right')); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T20:38:30.543

尝试在 htmlOptions 参数中将 'encode' 设置为 false。

```
<?php
    echo CHtml::submitButton('<i class="icon-user"></i> Login',
        array(
            'encode' => false,
            'class' => 'btn btn-large pull-right'
        ));
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T20:55:26.067

`CHTML::submitbutton`生成`<intput type="submit" />`标签，您正试图将 HTML 塞进它的`value`属性中。

为什么不简单地将`icon-user`CSS 类添加到按钮本身？

```
echo CHtml::submitButton('Login', array(
   'class' => 'btn btn-large pull-right icon-user'
)); 
```

如果它是 Bootstrap 定义的类，它应该很好地设置输入按钮的样式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-13T10:44:18.023

尝试这个

```
$this->widget("bootstrap.widget.TbButton", array(
'buttonType'=>'submit',
'label=>'Login',
'type'=>'success', //or default or warning... as you like
'icon'=>'user',
'size'=>'large', //small, mini, or just comment line for default

)); 
```

文档：[http ://www.cniska.net/yii-bootstrap/#tbButton](http://www.cniska.net/yii-bootstrap/#tbButton)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-20T17:11:15.083

首先你应该从 subbmitButton 更改为 htmlButton，例如编写以下代码：

```
<?php echo CHtml::htmlButton('<span>Log in!</span>',array('type'=>'submit','class'=>'tbutton small pad')); ?> 
```

# mysql - MySQL Workbench 加载数据本地 Infile 错误

> ID：14570668
> 
> 赞同：2
> 
> 时间：2013-01-28T20:30:59.940
> 
> 标签：mysql, mysql-workbench

我遇到了 MySQL 的 Load Data Local Infile 命令的问题。我知道由于安全威胁，他们默认禁用它。我有一个我想在 MySql Workbench 中运行的 SQL 脚本。我不断收到错误“1148。此 MySQL 版本不允许使用的命令。” 我已经能够使用命令行争论从命令行让它工作。但是我在工作台上没有任何成功。任何帮助，将不胜感激。这是我的脚本。

```
DROP DATABASE IF EXISTS a2004TS;

CREATE DATABASE IF NOT EXISTS a2004TS;

USE a2004TS;

DROP TABLE IF EXISTS a2004TS_1;

CREATE TABLE a2004TS_1(
Version CHARACTER(25),
Dsetid CHARACTER(6),
V040001 DOUBLE,
..
.
);

SET GLOBAL local_infile = 1;

LOAD DATA LOCAL INFILE '/home/output/sqlCSV/a2004TS.sqlscripts.table1.csv'
INTO TABLE a2004TS_1
FIELDS TERMINATED BY ',' ENCLOSED BY'"'
LINES TERMINATED BY'
'(columns......); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T07:41:44.410

如果服务器以禁用 LOAD DATA 的选项启动，则客户端必须显式调用 mysql_options(...) 以启用它（[http://dev.mysql.com/doc/refman/5.5/en/load-data -local.html](http://dev.mysql.com/doc/refman/5.5/en/load-data-local.html) )。这在 WB 中不会发生，因此您目前无法使用它来加载文件。而是为此使用命令行客户端。

[您可以在http://bugs.mysql.com](http://bugs.mysql.com)提交功能请求以实现允许导入的处理（例如首选项设置）。

# javascript - Phonegap：javascript 或本机代码中的异步调用？

> ID：14570669
> 
> 赞同：1
> 
> 时间：2013-01-28T20:31:00.673
> 
> 标签：javascript, android, cordova, android-asynctask

我正在为Android开发一个原型Phonegap应用程序，其中我有几个（xml）列表，这些列表是通过“Java层”中的restful获取的。获取和解析这些列表可能需要一些时间。我在 UI 线程中运行所有内容，但决定采取下一步并将此处理移动到 AsyncTask 子类，并且一切都“异步正常”工作。我的问题是，使用 AsyncTask 真的有效还是我应该以某种方式（还没有完全想到如何）异步调用 Cordova exec 函数？我问这个的原因是因为我们最终也会为 iOS 和 WP 开发相同的应用程序（因此使用 Phonegap），我认为如果我用 Java 编写异步调用，我还必须用 C# 编写它们和Objective-C。但是，如果可以通过 Javascript/jQuery 使其异步运行，那不是更好吗，因为它可以节省我在其他平台上编码的时间？就像我之前说的，它与 AsyncTask 一起工作得很好，我不太确定是否有可能只用 JS/jQ 实现相同的行为（我远不及你所说的这两个专家）但应该它是一种有效的方法还是 JS 最终会成为瓶颈？

PS：我知道使用 AsyncTask 是 Android 的主要功能，但我不知道其他两个的行为（目前）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T22:10:32.830

除非您将它们指定为同步，否则 JavaScript 中的 AJAX 请求本质上是异步的。您应该希望使用 AJAX 功能来执行这些任务。即使您计划对 ReST 响应的结果进行本地处理，它也会减少使用 JavaScript 执行 ReST 请求的本地代码量。

既然你说你对 JS 和 jQuery 比较陌生，这里有一些参考资料可以开始学习 AJAX。任何超出此范围的问题都应该在 SO 的某个地方彻底解决。

[https://developer.mozilla.org/en-US/docs/AJAX](https://developer.mozilla.org/en-US/docs/AJAX)

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# c - 是否可以用 OR 将表达式拆分为两种情况？

> ID：14570671
> 
> 赞同：3
> 
> 时间：2013-01-28T20:31:17.477
> 
> 标签：c

我想使用 switch 语句，我的 if 条件是：

```
if (userInput%2 == 0 || userInput != 0) 
```

我可以从这段代码中得到两种情况来执行不同的操作`userInput == 0`和不同的操作吗`userInput == 0`

```
case ?:

case ?: 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T20:33:52.120

您不能，因为满足这两个条件的值集*重叠*。具体来说，所有偶数都满足您的两个条件。这就是为什么如果不首先确定条件的哪一部分优先，就不能执行不同的操作。

您可以在`switch`语句中使用 fall-through 小技巧，如下所示：

```
switch(userInput%2) {
    case 0:
        // Do things for the case when userInput%2 == 0
        ...
        // Note: missing "break" here is intentional
    default:
        if (userInput == 0) break;
        // Do things for the case when user input is non-zero
        // This code will execute when userInput is even, too,
        // because of the missing break.
        ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T20:33:42.447

为什么不直接拆分`if`语句

```
if (userInput%2 == 0) {
    // something
}
else if (userInput != 0) {
    // something else
} 
```

请注意，测试的顺序很重要，因为所有非零偶数都满足两个测试。

# css - 通过 CSS 的 Nth-Child 在 3 个不同的场景中创建 5 个开放点

> ID：14570680
> 
> 赞同：1
> 
> 时间：2013-01-28T20:31:49.873
> 
> 标签：css, html, css-selectors

在三种不同的情况下，我有一排向左浮动的 div。对于每个场景，我都试图让我的所有 div 在底部排成一行，同时为每个场景使用相同数量的 div 并制作 5 个纵横交错的开放点。听起来很混乱？让我给你我的场景..

**情景一**

43 格 每行 4 个 div，有 5 个空位。div 在底部排成一排（假设每个空白点都将被一个 div 填充）。

[http://jsfiddle.net/XXfe2/1/](http://jsfiddle.net/XXfe2/1/)

**方案二**

43 格 每行 3 个 div，有 5 个空位。div 在底部排成一排（假设每个空白点都将被一个 div 填充）。

[http://jsfiddle.net/XXfe2/9/](http://jsfiddle.net/XXfe2/9/)

**场景三（无效）**

43 格 每行 5 个 div，有 5 个空位。div 不会在底部排列，会有两个空位，假设底行的最后一个空位将被一个 div 填充。

[http://jsfiddle.net/XXfe2/8/](http://jsfiddle.net/XXfe2/8/)

因此，每行 5 个 div 的场景 3 是唯一不起作用的场景。会有两个额外的空位。我想找到一种方法让所有 div 在底部排成 5 个空位，或者如果不可能用 5 个、4 个或 6 个来做到这一点。我的数学不太好。而且我不想求助于设置 div`display:none`或`visibility:hidden`隐藏一个或两个额外的 div。

那么我将如何进行这项工作并让所有 div 在底部排列成每行 5、4 和 3 个 div，同时为每个场景提供相同数量的 div 和空位？任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:08:30.863

经过几天的测试，我发现每个场景有**64 个 div / 框**（每行 5、3 和 4 个 div），每个场景中有**6 个开放点**，并且在底部完美地排列了所有 div。

# wpf - PropertyChangedEventArgs wpf Windows 8

> ID：14570682
> 
> 赞同：0
> 
> 时间：2013-01-28T20:32:10.637
> 
> 标签：wpf

我有一个在 Windows 7 中运行良好的 wpf 应用程序。它在 Windows 8 中失败。基本上一行有一个开始和一个结束位置。这可以通过拖动线条或通过更改网格中的坐标来进行编辑。

如果线被拖动，网格应该更新。我使用一个可观察的集合，而 t 是集合中的一个项目。

这在Win 7中有效 -

```
public event PropertyChangedEventHandler PropertyChanged;
t.taskendlocation = 100;
PropertyChanged(t, new PropertyChangedEventArgs("Taskendlocation")); 
```

但在 Win 8 中失败，错误对象引用未设置为对象的实例。

任何人都可以请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:42:00.507

它可能为空，因为尚未将任何内容附加到 PropertyChanged 事件。在调用事件之前，您应该始终进行空值检查。

```
t.taskendlocation = 100;
NotifyPropertyChanged("taskendlocation");

public void NotifyPropertyChanged(string property)
{
   If (PropertyChanged != null)
   {
       PropertyChanged(this, new PropertyChangedEventArgs(property));
   }
} 
```

# php - 间隔刷新一个静态请求

> ID：14570684
> 
> 赞同：1
> 
> 时间：2013-01-28T20:32:14.053
> 
> 标签：php, jquery, html, ajax

如果这看起来很愚蠢或多余，我深表歉意，我已经搜索并阅读了相关页面，但了解甚少。

我使用此功能将我的聊天小部件调用到每个页面。（如果我想切换聊天服务器。）

```
<?PHP include "newchat.php"; ?> 
```

我想每隔 20 分钟刷新一次 newchat.php。（为了防止聊天超时。）

我在 newchat.php 上使用此代码，这会导致整个主页刷新。（即index.php）

```
<html>
<head>
<script type="text/JavaScript">
<!--
function timedRefresh(timeoutPeriod) {
    setTimeout("location.reload(true);",timeoutPeriod);
}
//   -->
</script>
</head>
<body onload="JavaScript:timedRefresh(10000);">
*chat script here* 
```

我想我可能需要在每个模板页面上放置脚本/ajax，这会告诉浏览器只刷新那个元素，但是我不理解这段代码并且不确定它是否适用。

感谢您阅读并提供您可能提供的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T04:48:14.507

尝试将 newchat.php 文件放入页面上的 iFrame 中，而不是直接包含它。IE：

```
<iframe src="newchat.php" id="chatFrame" frameborder="0" width="YOUR-WIDTH" height="YOUR-HEIGHT"> 
```

然后你可以在 newchat.php 文件中刷新。或者，如果您想从每个页面控制它，您可以使用 iframe id 来控制来自父级的刷新：

```
document.getElementById('chatFrame').contentDocument.location.reload(true); 
```

# javascript - 从选择框中删除指定的值

> ID：14570685
> 
> 赞同：0
> 
> 时间：2013-01-28T20:32:16.063
> 
> 标签：javascript, drop-down-menu

如何从下拉（选择）框中动态删除选项？需要检索该值，然后手动删除该值。

IE

```
 [DROP DOWN BOX]
    Apples
    Oranges
    Pears
    Kiwis
    Mangos
    Strawberries 
```

var option_to_delete = "梨"

一些代码可以动态搜索“Pears”的选择框选项，如果检测到，则将其删除。

预期结果：

```
 [DROP DOWN BOX]
        Apples
        Oranges
        Kiwis
        Mangos
        Strawberries 
```

请不要使用 jQuery 库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:43:10.893

您可以遍历 中的子节点并`<select>`删除等于“梨”的子节点。`innerText``value`

我提供了一个这样做的jsfiddle：http: [//jsfiddle.net/pcb8q/](http://jsfiddle.net/pcb8q/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T20:43:19.123

此代码将遍历下拉框，如果其中一个元素等于您的变量`option_to_delete`。

```
var dropdown = document.getElementById('ID_OF_DROPDOWN');
var option_to_delete = "Pears"

for (i=0;i<dropdown.length;  i++) {
   if (dropdown.options[i].value==option_to_delete) {
     dropdown.remove(i);
   }
} 
```

[我从https://stackoverflow.com/a/7601791/298051](https://stackoverflow.com/a/7601791/298051)改编了一些代码

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T20:44:49.803

你可以像这样构造你的html

```
 <select id="fruits">
        <option value="apples">Apple</option>
        <option value="oranges">Oranges</option>
        <option value="kiwis">Kiwis</option>
    </select> 
```

然后在 JS

```
 var selectBox = document.getElementById('#fruits');
    var options = selectBox.getElementsByTagName('option');
    var optionToDelete = 'apples';

    for (var i = 0; i < options.length; i++) {
        if (options[i].value === optionToDelete) {
            selectBox.removeChild(options[i]);
        }
    } 
```

# javascript - Node.js、Jsdom、HttpAgent 的内存使用情况

> ID：14570686
> 
> 赞同：0
> 
> 时间：2013-01-28T20:32:17.007
> 
> 标签：javascript, node.js, memory

我制作了一个浏览博客以获取所有标题的报废脚本。问题是 Node 在脚本运行时使用越来越多的内存（数千个 URL），直到 8 go（最大），然后脚本崩溃。

我的脚本使用循环，必须有一种简单的方法来清除内存？

这是一个代码示例：

```
var request = require('request'),
httpAgent = require('http-agent'),
jsdom = require('jsdom').jsdom,
myWindow = jsdom().createWindow(),
$ = require('jquery'),
jq = require('jquery').create(),
jQuery = require('jquery').create(myWindow),
profiler = require('v8-profiler');

profiler.startProfiling();

request({ uri:'http://www.guylabbe.ca' }, function (error, response, body) {
  if (error && response.statusCode !== 200) {
    console.log('Error when contacting URL')
  }

        var last_page_lk = $(body).find('.pane-content .pager li:last-child a').attr('href');
        var nb_pages = last_page_lk.substring(last_page_lk.indexOf('=')+1);
        var page_lk_base = last_page_lk.substring(0,last_page_lk.indexOf('='));

        var pages = Array();
        pages.push(page_lk_base);
        for(var i=1;i<=nb_pages;i++) {
            pages.push(page_lk_base+'='+i);
        }

        // parser les pages

        var fiches = Array();
        var agent2 = httpAgent.create('www.guylabbe.ca', pages);

        agent2.addListener('next', function (err, agent2) {

            var snapshot = profiler.takeSnapshot();

            $(body).find('.view span.field-content span.views-field-title').each(function(){
                fiches.push($(body).find(this).parents('a').attr('href'));
                //console.log($(body).find(this).html());
            });

            agent2.next();

        });
        agent2.start();

        agent2.addListener('stop', function (agent) {
          console.log('-------------------------------- (fini de cumuler les URL fiches) --------------------------------');

            // Parser les fiches

            var agent_fiches = httpAgent.create('www.guylabbe.ca', fiches);

            agent_fiches.addListener('next', function (err, agent_fiches) {

                console.log('log info');

                agent_fiches.next();

            });
            agent_fiches.start();

            agent_fiches.addListener('stop', function (agent) {
              console.log('-------------------------------- Eh voilà! --------------------------------');
            });

            agent_fiches.addListener('start', function (agent) {
              console.log('-------------------------------- C est parti... --------------------------------');
            });

        });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:54:25.320

在您不再需要它们的地方显式地为空变量。如果您在闭包外部创建变量，并在闭包内部使用它，那么当您不再需要它时应该将其设为空。看到这个线程并阅读接受的答案：[如何防止 node.js 中的内存泄漏？](https://stackoverflow.com/questions/5733665/how-to-prevent-memory-leaks-in-node-js)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T21:26:59.013

我遇到了与 jsdom 泄漏内存类似的问题。在我的情况下，通过解决它来关闭 jsdom 窗口。也许你应该`myWindow.close()`在完成刮擦后添加。查看相关答案[https://stackoverflow.com/a/6891729/1824928](https://stackoverflow.com/a/6891729/1824928)

# java - 使用 xslt 将一个 xml 的内容复制到另一个

> ID：14570691
> 
> 赞同：0
> 
> 时间：2013-01-28T20:32:31.213
> 
> 标签：java, xml, xslt

我正在尝试使用 Xslt 将内容从一个 xml 复制到另一个 xml。

我需要复制file1的内容

```
<?xml version="1.0"?>
<products author="Jesper">
  <product>
    <name>Delta</name>
    <price>800</price>
    <stock>
        <price>13a</price>
    </stock>
    <place>Denmark</place>
  </product>
</products> 
```

到文件 2。文件 2 具有相似的标签，但顺序混乱，

```
<?xml version="1.0"?>
<products author="Jesper">
  <product>
    <stock>
        <price>13d</price>
    </stock>
    <price>700</price>
    <place>Copenhagen</place>
     <name>Beta</name>
  </product>
</products> 
```

**预期产出**

```
<products author="Jesper">
  <product>
    <stock>
        <price>13a</price>
    </stock>
    <price>800</price>
    <place>Denmark</place>
     <name>Delta</name>
  </product>
</products> 
```

所以基本上我需要使用for-each遍历file1，然后在file2中找到匹配的标签并复制标签值。不确定这样做的有效方法......双重迭代效率低下。任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:16:13.673

这是一个非常广泛的问题，但我会尝试为您提供一些可以帮助您入门的建议。您可能希望使用该`doc()`函数来加载文件，因为 XSLT 只允许您遍历单个“主”文件。 `doc()`将新文件加载到可以应用模板的变量中，依此类推。如果您担心迭代性能，您应该了解`xsl:key`和`key()`构建索引的函数，这将有助于实现这一点。

# matlab - MATLAB中声波的基音周期和基频

> ID：14570692
> 
> 赞同：1
> 
> 时间：2013-01-28T20:32:38.600
> 
> 标签：matlab

`>> x = wavrecord( 2*fs, fs, ‘double’);`我刚刚使用该命令在 MatLab 中录制了一小段音频。

到目前为止，我已经弄清楚如何`soundsc(x, fs);`使用`plot(x)`.

这是我的波形的放大屏幕截图：

![在此处输入图像描述](../Images/07a1902dab53dfd2cf8c659ba1c6c6ec.png)

x 轴是否以毫秒为单位显示持续时间，y 轴是否显示幅度？我想我可能不小心关闭了轴名称。

在我尝试计算波的基本周期和基本频率之前，我需要确认这一点。

如果我猜对了我的轴，那么我认为基本周期是一个周期波重复自身所需的时间量是否正确`(T)`？那么在这种情况下大约`0.0050 seconds`?

而且，基频是`f0 = 1/T = 1/0.0050`?

我整天都在玩，读了很多书。我希望我没有让自己感到困惑，只是在这个网站上让自己感到尴尬。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T21:49:48.687

您的 x 轴只是样本编号。这将从 1 变为您的录音包含的样本数。采样时间是两个采样之间的时间段，为 1/fs。fs 是您的采样频率。因此 50 个样本的时间段将为 50/fs。

对于大多数波形，您无法通过查看轻松找到基本周期。正如@duffymo 提到的，您需要计算 FFT 或 PSD，然后找到不是 DC 的第一个峰值的位置。这将是您的基本频率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T20:35:00.913

这次跟踪对我来说看起来很嘈杂。这不是“频率”；这是“频率”。

如果您对此进行 FFT，您会发现涉及很多频率。您也许可以用较少的谐波再现主信号，但我怀疑它只会是一个。

# javascript - 如何让 arbor.js 在 Internet Explorer 上运行？

> ID：14570696
> 
> 赞同：1
> 
> 时间：2013-01-28T20:32:53.650
> 
> 标签：javascript, internet-explorer, cross-browser, arbor.js

我已经使用[Arbor.js](http://arborjs.org)开发了 neo4j Web 界面。后来我发现它没有在任何版本的 Internet Explorer 中显示图表，甚至在 IE10 中也没有。

在谷歌搜索时来到这个[网站](http://www.instagrok.com/grok/grok?query=internet%20explorer)，他们在 IE 中显示树形图。谁能告诉我如何让 arbor.js 在 IE 上运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T20:59:25.760

在 GitHub 上，我发现[了 ende76 的一个分支，](https://github.com/ende76/arbor)其中包含对 IE9+ 的修复。不过，我还没有测试过。另请参阅[此拉取请求](https://github.com/samizdatco/arbor/pull/11)，该请求具有另一个具有不同 IE 修复的分支，并且经过测试（截至 2 年前）。还有另外两个问题（[ [9](https://github.com/samizdatco/arbor/issues/9) ]、[ [13](https://github.com/samizdatco/arbor/pull/13) ]）开放，它们对 IE8/9 兼容性有一些评论。

但是，您可能希望考虑选择不同的库。除了使用不受支持和[明显废弃](https://github.com/samizdatco/arbor/issues/23)的库的明显缺点外，还有其他浏览器中的[性能](https://github.com/samizdatco/arbor/issues/36)[和](https://github.com/samizdatco/arbor/issues/18)[稳定性](https://github.com/samizdatco/arbor/issues/22)[问题](https://github.com/samizdatco/arbor/issues/15)[的](https://github.com/samizdatco/arbor/issues)[各种](https://github.com/samizdatco/arbor/issues/7) [问题。](https://github.com/samizdatco/arbor/issues/10)

# magento - 安装时缓存和会话清理期间的异常 - megento 中的 Zopin 实时聊天扩展

> ID：14570698
> 
> 赞同：3
> 
> 时间：2013-01-28T20:32:55.893
> 
> 标签：magento, exception

当我尝试安装 Zopim 实时聊天 megento 扩展时，我收到“缓存和会话清理期间的异常”。但安装成功。安装此错误后，我尝试打开站点，它显示“由于维护停机或容量问题，服务器暂时无法满足您的请求。请稍后再试。” 503 错误。请帮助我如何解决这个问题。

谢谢巴拉

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T20:50:52.757

您看到的错误意味着 Magento 正在显示其默认`HTTP ERROR 503`页面。发生这种情况的原因有很多，但很可能是因为安装过程（您没有提到它是 Magento Connect 标准还是其他自定义）将`maintenance.flag`文件留在站点根目录中。从您网站的根目录中删除此文件，事情应该会恢复正常。

```
$ cd /path/to/magento/root
$ rm maintenance.flag 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-02T15:29:08.647

“控制台”的 Iframe 标头中缺少 Prototype.js。

只需编辑**/downloader/Maged/Connect.php**并找到

```
var response = transport.responseJSON || transport.responseText.JSONeval(true) || {}; 
```

将其替换为

```
var response = transport.responseJSON || JSON.parse(transport.responseText) || {}; 
```

:-)

# java - 调用 android.os.Looper.loop() 需要在 AndroidManifest.xml 中指定 android.permission.RECEIVE_BOOT_COMPLETED

> ID：14570699
> 
> 赞同：3
> 
> 时间：2013-01-28T20:33:02.347
> 
> 标签：java, android, security

在工作中，我们通过安全扫描工具运行我们的应用程序，该工具对漏洞进行静态分析。有时它会标记与安全无关但可能以其他方式导致问题的事物。在这种情况下，它抱怨[Insufficient Privileges 处理不当](http://cwe.mitre.org/data/definitions/274.html)。

以下是该工具的说明：

> 此应用程序调用 android.os.Looper.loop() API，它需要 AndroidManifest.xml 中未指定的以下权限：android.permission.RECEIVE_BOOT_COMPLETED。这些调用将不会被执行。根据实现，这种情况可能会导致错误消息，或者代码将静默失败。许可不足的条件不是可利用的缺陷，但它们可能表明存在意外代码（例如，广告库试图泄露用户的 GPS 位置）。

但是，[API 文档](https://developer.android.com/reference/android/os/Looper.html)根本没有提及`android.permission.RECEIVE_BOOT_COMPLETED`值或`AndroidManifest.xml`文件。

[Looper.loop()](https://developer.android.com/reference/android/os/Looper.html#loop%28%29)调用是否`android.permission.RECEIVE_BOOT_COMPLETED`真的需要，或者这是误报？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:10:40.647

这不能是必需的。`Looper.loop`基本上每个 Android 程序都会调用，无论是在幕后还是公开地调用。我不明白他们为什么需要获得使用它的许可。即使是最简单的图形也需要显示...我敢肯定这是您使用的工具的误报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:47:30.667

它在这里：

[http://developer.android.com/reference/android/Manifest.permission.html](http://developer.android.com/reference/android/Manifest.permission.html)

它从 API 级别 1 开始就存在。不应该太复杂而无法修复。

# google-maps-api-3 - 使用自定义 url 图标样式化融合表标记？

> ID：14570710
> 
> 赞同：1
> 
> 时间：2013-01-28T20:33:39.120
> 
> 标签：google-maps-api-3, google-maps-markers, google-fusion-tables

我想根据融合表中的字段设置我的融合表标记的样式。如果我使用默认的 Google 标记，则以下代码有效：

```
 layer = new google.maps.FusionTablesLayer({
      query: {
        select: 'bizCity',
        from: '1yfyijoeC3GwDnnLutBI8IFOH8y2mfZ8LJGUDly4'
      },
    styles: [
  {where: "'bizCatSub' = 'Antique & Classic Motorcycle Dealers'", markerOptions:{ iconName:"star"}}, // other landmarks
  {where: "'bizCatSub' = 'Other moto business'", markerOptions:{ iconName:"wht_pushpin"}}, //businesses
  {where: "'bizCatSub' = 'Shop'", markerOptions:{iconName:"red_blank"}}, //town houses
  {where: "'bizCatSub' = '12'", markerOptions:{ iconName:"orange_blank"}}, //country homes
  {where: "'bizCatSub' = '15'", markerOptions:{ iconName:"target"}},
  ]  
    });
    layer.setMap(map); 
```

你可以在[这里看到 jsfiddle](http://jsfiddle.net/witold/hsnbd/)。

但是，我想使用我自己的自定义标记。为此，我尝试了这样的事情：

```
 layer = new google.maps.FusionTablesLayer({
      query: {
        select: 'bizCity',
        from: '1yfyijoeC3GwDnnLutBI8IFOH8y2mfZ8LJGUDly4'
      },
    styles: [
  {where: "'bizCatSub' = 'Antique & Classic Motorcycle Dealers'", markerOptions:{ url: "http://pollster.net/test/icons/dealer.png" }}, 
  {where: "'bizCatSub' = 'Other moto business'", markerOptions:{ url: "http://pollster.net/test/icons/othermoto.png" }}, 
  {where: "'bizCatSub' = 'Shop'", markerOptions:{ url: "http://pollster.net/test/icons/shop.png" }}
  ]  
    });
    layer.setMap(map); 
```

使用上面的代码，数据会显示在地图上，但它使用默认标记而不是按要求设置样式。 [Jsfiddle 在这里](http://jsfiddle.net/witold/jZANY/)。我查看了有关样式、标记选项和图标的文档，并尝试了不同的变体，但没有什么对我有用。我想我错过了一些简单的东西，但不确定是什么。

有人知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-28T21:05:16.460

Fusion Table Layer 实际上不允许自定义标记图标。这是一个已知问题：[http ://code.google.com/p/fusion-tables/issues/detail?id=69](http://code.google.com/p/fusion-tables/issues/detail?id=69)

但是，有一些解决方法，其中最简单的可能是几个月前 Google 员工在该线程底部附近发布的：[http://code.google.com/p/fusion-tables/issues/detail? id=69#c107](http://code.google.com/p/fusion-tables/issues/detail?id=69#c107)

解决方法的要点是您将不再使用 FusionTableLayer，而是使用 javascript 来获取融合表数据并自己添加自定义标记。这是更多的代码，但它似乎工作得很好：[https ://googledrive.com/host/0B9htKoV1ZaKUU1g3ZnJCUWQyd28/customicons_viaApi.html](https://googledrive.com/host/0B9htKoV1ZaKUU1g3ZnJCUWQyd28/customicons_viaApi.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T21:12:24.837

您不能将自己的自定义图标与 FusionTablesLayers 一起使用，您只能使用按名称定义的图标（请参见[此处](http://support.google.com/fusiontables/answer/2679986/)）。

如果您需要使用自己的并且可以承受不使用基于 FusionTablesLayer 平铺渲染的性能影响，您可以使用 GViz 或 Fusion Tables Query API 来查询表格以使用 Google Maps API v3 自定义图标。

请参阅已标记为“不可行”的[此问题，但包括](http://code.google.com/p/fusion-tables/issues/detail?id=69)[解决](http://code.google.com/p/fusion-tables/issues/detail?id=69#c107)方法。

# javascript - 如何在我的 div 中添加滚动条而不会炸毁我的网页

> ID：14570718
> 
> 赞同：1
> 
> 时间：2013-01-28T20:34:11.430
> 
> 标签：javascript, html, css, scrollbar

我有一个非常简单的页面，它有页眉、页脚、正文和左右导航。所有这些共同构成一个 100% 宽度的漂亮矩形页面。所有使用 div 在 css 表中制作。我在正文中有 20 个图像缩略图，当页面调整大小时，它们会将我的页脚推错位。为了解决这个问题，我想在 body div 中添加一个滚动条。我已经用 overflow-y: auto; 然而，添加滚动条似乎在身体右侧增加了一些空间，迫使它被放置在左右导航的下方，这一切都被炸毁了。请帮忙。

```
#headerElement {
width: 100%;
height: 50px;
border: 2px solid #000000;
background-color: #F8AA3C;
}
#bodyElement {
    margin-left: 10%;
width:  80%; 
color:  blue;
height: 400px;
background-color:  #F8883C; 
border: 2px dashed #F8AA3C;
    overflow-y: auto;
}
#leftNavigationElement {
float: left;
width: 10%; 
height: 400px;
border: 2px dashed #FF0000;
background-color: #8F883C;
}
#rightNavigationElement { 
float: right;
width: 10%; 
height: 400px;
border: 2px dashed #0000FF;
background-color: #F888FC;
}
#footerElement {
clear: both;
border: 2px dashed #00FFFF;
height: 50px;
width: 100%;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T21:12:25.790

因为滚动条不在 div 的宽度之内但仍然占用空间，所以需要给它一些空间或负边距。我猜 IE 的宽度为 18 像素，因为你不能在 IE 中设置它，所以这必须是你的默认值。[![=(](../Images/d532b18ef37d2953e35be2d1d73fe312.png)](https://i.stack.imgur.com/X503M.gif)

```
::-webkit-scrollbar { width: 18px; margin-right:-18px; }
::-moz-scrollbar { width: 18px; margin-right:-18px;}
::-o-scrollbar { width: 18px; margin-right:-18px;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:56:25.840

您需要重组页面以使其更好地流动，或者使用 {overflow-y: scroll} 强制滚动条并相应地调整宽度，以免布局中断。

# c++ - 需要确定使用 Winsock 和 recv 下载的字节数

> ID：14570724
> 
> 赞同：0
> 
> 时间：2013-01-28T20:34:38.857
> 
> 标签：c++, sockets, winsock, recv

我有使用阻塞套接字通过调用recv 接收数据的代码。一切正常。但是，无法向用户报告过程中任何时候下载的字节数。我假设为了能够做到这一点，我需要多次调用recv，并在每次调用后报告？还是有更好、更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:39:31.737

根据[MSDN](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms740121%28v=vs.85%29.aspx)，`recv`执行以下操作：

> recv 返回接收到的字节数，buf 参数指向的缓冲区将包含接收到的数据。

因此，您可以创建一个`int received`并累积接收到的字节，`recv`直到`recv`不再接收，然后报告`received`变量中累积的总数。

# http - HTTP请求的部分读取

> ID：14570730
> 
> 赞同：0
> 
> 时间：2013-01-28T20:34:48.730
> 
> 标签：http, network-programming

假设我有一个服务器 (REST) 应用程序，它不需要完全读取传入的 HTTP 请求。客户端可以发送任何大小的大型 HTTP 请求，但我只需要第一个`X`千字节。

我只想读取`X`千字节并立即关闭连接。是否有意义？就HTTP而言它*合法吗？*什么是替代品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T21:07:23.137

*我只想读取 X Kilobytes 并立即关闭连接。是否有意义？*

不适用于 REST-ful 应用程序。

*就HTTP而言它合法吗？*

是的，从技术上讲。在 HTTP 协议中，对于一个完整的事务，总是期望某种服务器响应。这将被客户端体验为连接的过早结束，即不完整或中止的事务。

*什么是替代品？*

你想达到什么目的？

如果您只想读取任何连接的客户端发送的任何内容的前 X 个字节，然后根本不费心回复，那么 HTTP 协议不适合您，更不用说 REST。

# java - 如何将bufferedImage从JAVA发送到PHP

> ID：14570739
> 
> 赞同：1
> 
> 时间：2013-01-28T20:35:12.093
> 
> 标签：java, php

我对JAVA有点菜鸟。这是我的问题：

我正在尝试截取我的 JAVA 应用程序的屏幕截图并将其发送到 PHP 页面。使用我拥有的代码，屏幕截图的 img 文件是由 PHP 创建的，但是当你打开它时，它是全黑的，减去一小行乱码的白/黑；

我错过了什么或者我做错了什么？

JAVA代码

```
File f = File.createTempFile("support", ".png");
this.imageFileName = f.getAbsolutePath();
Robot r = new Robot();
this.snapshot = r.createScreenCapture(this.frame.getBounds());
BOSHTTPClient http;
http = newBOSHTTPClient(this.config.getHttpUrlName()+"?filename="+JBOSupportGlassPane.this.imageFileName);
ImageIO.write(this.snapshot, ImageFormat.PNG, http.getOutputStream()); 
```

PHP代码

```
$fileData=file_get_contents('php://input');
$filename = substr($_REQUEST['filename'], strrpos($_REQUEST['filename'], '/')+1);
$fhandle=fopen("screenshots/".$filename, 'wb');
fwrite($fhandle, $fileData);
fclose($fhandle);
echo("Done uploading"); 
```

# ssl - WCF 自托管 SSL 不是真正的 SSL

> ID：14570741
> 
> 赞同：2
> 
> 时间：2013-01-28T20:35:20.573
> 
> 标签：ssl

我们有一个使用 SSL 的 WCF 自托管应用程序，但我们在端口 15014 上拥有它。我通过并完成了 MSDN 列出的将 SSL 证书附加到端口和代码的所有操作。当我浏览到“ [https://secure.mydomain.com:15014](https://secure.mydomain.com:15014) ”时，它可以工作。问题是当我通过wireshark查看该连接时，我只将tcp视为协议而不是SSLv？。我根本没有看到任何客户握手。这让我相信它并不真正安全。我对此是否正确？

# delphi - 为什么我的运行时创建的组件没有出现在表单上？

> ID：14570742
> 
> 赞同：4
> 
> 时间：2013-01-28T20:35:24.223
> 
> 标签：delphi

我正在测试来自此问答[组件创建的示例 - 将组件连接在一起？](https://stackoverflow.com/questions/9479872/component-creation-joining-components-together)了解如何创建自定义/复合组件。

虽然示例中安装的组件可以拖到表单上，但我似乎无法在运行时创建它。

```
procedure TForm1.Button1Click(Sender: TObject);
var
MyPanel2 : TMyPanel;
begin
MyPanel2 := TMyPanel.Create(Form1);
With MyPanel2 do
  begin
    Left := 10;
    Top := 10;
    Width := 400;
    Height := 400;
    Visible := True;
    Image.Picture.LoadFromFile('C:\test.png');
  end;
end; 
```

我尝试将 self 和 Form1 作为所有者。使用面板和图像的属性。

只是不确定我做错了什么。没有错误，除非我忘记将 pngimage 添加到我的用途中。单步执行代码就好了，运行时创建在视觉上没有发生任何事情。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T20:38:36.743

您需要[`Parent`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Controls.TControl.Parent)在运行时代码中进行设置。

```
MyPanel2 := TMyPanel.Create(Self);
with MyPanel2 do
begin
  Parent := Self;//oops, you forgot to set this
  SetBounds(10, 10, 400, 400);
  Image.Picture.LoadFromFile('C:\test.png');
end; 
```

您问题中的代码不会导致显示普通 vanilla`TPanel`或任何控件的控件。

从[文档](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Controls.TControl.Parent)中，我强调：

> 指定控件的父级。
> 
> 使用 Parent 属性获取或设置控件的父级。控件的父级是包含它的控件。例如，如果应用程序在一个组框中包含三个单选按钮，则该组框是这三个单选按钮的父级，而这些单选按钮是该组框的子控件。
> 
> 若要用作父控件，控件必须是 TWinControl 后代的实例。
> 
> **在运行时创建新控件时，为新控件分配 Parent 属性值**。通常，这是一个窗体、面板、组框或旨在包含另一个控件的控件。更改控件的父级会在屏幕上移动控件，以便它显示在新的父级中。当父控件移动时，子控件与父控件一起移动。

# intellij-idea - 如何在 IntelliJ 12 中删除项目？

> ID：14570743
> 
> 赞同：121
> 
> 时间：2013-01-28T20:35:25.727
> 
> 标签：intellij-idea

我创建了一些虚拟项目。现在我看不到任何删除我不想要的项目的方法。根据这个[建议](https://stackoverflow.com/questions/8465875/how-do-i-delete-project-in-intellij-idea-10-5)，我可以删除文件，该项目正在消失，但仍有可用的痕迹。例如，在最近的项目中，您仍然可以看到刚刚删除的项目的名称。所以我认为应该有另一种（而且非常简单的方法）来删除一个项目。

* * *

## 回答 #1

> 赞同：275
> 
> 时间：2013-01-28T20:57:50.023

按`Del`（或`fn`和`delete`）键从`Recent Projects`列表中删除项目。

[投票支持这个问题](http://youtrack.jetbrains.com/issue/IDEA-109052)，使其更加明显和用户友好。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-02-25T01:42:05.963

首先关闭项目，或者直到出现此对话框，然后将鼠标悬停在要从历史记录中删除的项目上，然后按`Del` ![主对话框](../Images/f34bc57fceaaa2d90f8dd105aa4c9ade.png)

系统会要求您确认

![确认](../Images/20e1ced02a26c22a9d9fe2a4b0547df5.png)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-03-25T21:28:12.087

有时，即使删除了项目，也会在以下 Windows 路径中留下一些花絮：

*   C:\Users\username.domain\.IntelliJIdea2017.1\system\compiler
*   C:\Users\username.domain\.IntelliJIdea2017.1\system\compile-server
*   C:\Users\username.domain\.IntelliJIdea2017.1\system\frameworks\detection
*   C:\Users\username.domain\.IntelliJIdea2017.1\system\conversion
*   C:\Users\username.domain\.IntelliJIdea2017.1\config\componentVersions
*   C:\Users\username.domain\.IntelliJIdea2017.1\config\tasks

这已被证明是有问题的 - 例如，如果使用先前删除的项目名称创建新项目，它将使用存储在上述路径中的数据创建项目，至少，这是我的经验。

真正删除项目的唯一方法是清除上述文件夹中留下的所有垃圾。我建议使用 Search Everything 在用户临时文件夹中查找更多花絮。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-17T11:18:47.243

如果您的项目作为模块导入，您还可以转到文件 --> 项目结构，然后单击左侧部分的“模块”。现在您可以点击减号按钮以从项目中远程模块。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-01-15T08:03:44.147

您也可以单击文件 -> 打开项目...

出现文件菜单时，您可以右键单击不需要的项目文件夹并选择删除。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-04-08T02:32:36.587

刚刚想通了，我正在使用 Idea Community edition 13.1.1，最干净和最简单的方法是转到**File > Reopen project > Clear List**。我今天偶然发现了这个菜单。我一直认为这只是为了从 IDE 内部的视图中清除最新项目，然后才意识到它也在从主对话框中清除项目。

-VRS

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-10-14T11:56:29.110

此外，在 IDEA 13.xx 中，您可以转到`File-> Close Project`带有选项卡的窗口`Recent Projects`。对选定`Del`的`Fn + Del`项目有帮助。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-02-03T17:46:41.293

在 OSX Mountain Lion 和 IDEA 14 上，打开并聚焦项目，您可以转到**file -> close project**，然后从文件系统中删除该项目。这删除了对项目的所有引用。

请注意，如果您要删除的项目是唯一打开的项目，关闭它将显示欢迎对话框，该对话框仍将显示该项目。下一步是从操作系统中手动删除项目，该项目仍然会出现在欢迎对话框中，直到它关闭并再次显示，通常是从列表中打开另一个项目，或者退出并重新启动 IDEA。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-12-04T10:34:18.157

就我而言，我不得不删除`home/.IntelliJIdea2017.2/config/options/recentProjects.xml` . 在我的文件系统（Ubuntu）中，这个文件出现了一些奇怪的原因，不可写，并且包含一个我无法摆脱的项目列表。删除此文件并重新启动将强制 Intellij IDEA 创建一个包含空项目列表的新文件。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2014-09-02T01:37:45.750

您所要做的就是转到文件 - 关闭项目 - 以避免在菜单列表中再次看到它们，然后将它们从项目目录中删除。

# java - 具有接口的枚举类成员在内部找不到方法

> ID：14570746
> 
> 赞同：10
> 
> 时间：2013-01-28T20:35:27.657
> 
> 标签：java, interface, enums

我遇到了一个奇怪的问题，我不确定这是编译器问题还是我对带有接口的枚举的理解。我正在使用 IntelliJ IDEA 12，构建一个 Android 项目，并且我有一个这样的类：

```
public class ClassWithEnum {
    private MyEnum myEnum;

    //Trying to access it internally here throws the error
    public boolean isActionable() {
        return myEnum.isActionable();
    }

    public enum MyEnum implements Action {
        ACTIONABLE() {
            @Override
            public boolean isActionable() { return true; }
        },
        NOT_ACTIONABLE() {
            @Override
            public boolean isActionable() { return false; }
        }
    }

    public interface Action {
        public boolean isActionable();
    }
} 
```

现在，这最初是有效的，但现在编译器抱怨（我已经在一个全新的项目中尝试过，结果相同）并出现错误：

```
java: /Users/kcoppock/Documents/Projects/EnumInterfaceTest/src/com/example/EnumInterfaceTest/ClassWithEnum.java:11: cannot find symbol
symbol  : method isActionable()
location: class com.example.EnumInterfaceTest.ClassWithEnum.MyEnum 
```

我以前做过这个（由接口定义的行为的枚举）没有问题。有什么想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T20:47:50.733

您需要自己实现`isActionable()`方法`MyEnum`。因为在and`isActionable()`里面定义的方法对他们来说是本地的。所以你需要全局方法。`ACIONABLE``NOT_ACTIONABLE``MyEnum` `enum`

请改用此代码：

```
public enum MyEnum implements Action {
        ACTIONABLE() {
            @Override
            public boolean isActionable() { return true; }
        },
        NOT_ACTIONABLE() {
            @Override
            public boolean isActionable() { return false; }
        };
        @Override
        public boolean isActionable() { return false;}
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T20:45:48.607

你可以试试这个替代方案：

```
 public enum MyEnum implements Action {
        ACTIONABLE(true), 
        NOT_ACTIONABLE(false);

        private final boolean actionable;

        MyEnum(boolean actionable) {
           this.actionable = actionable;
        }

        @Override
        public boolean isActionable() { 
           return this.actionable; 
        }
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T20:54:23.027

这看起来像一个 javac 错误。javac 在 JDK7 中可以很好地编译它。它不在 JDK6 (javac 1.6.0_24) 中，来自 IntelliJ 和命令行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T20:45:40.643

似乎 1.6 的 javac 需要对接口方法进行全局覆盖，而更高版本不需要，Eclipse 编译器也不需要。

~~似乎这只是一个错误`IntelliJ`。我将编译器设置从 更改`javac`为`Eclipse`，然后返回`javac`，它按预期编译和运行。~~

~~虚惊。:)~~

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-24T11:34:40.813

有人已经完美回答了这个问题，我只是再补充一点：你也可以在接口中保持方法抽象：

```
public enum MyEnum implements Action {
    ACTIONABLE() {
        @Override
        public boolean isActionable() { return true; }
    },
    NOT_ACTIONABLE() {
        @Override
        public boolean isActionable() { return false; }
    };
    @Override
    abstract public boolean isActionable();
} 
```

# android - Panda Board 上的 Android 4.0 - 安装自定义应用时 --> 缺少共享库

> ID：14570750
> 
> 赞同：0
> 
> 时间：2013-01-28T20:35:51.023
> 
> 标签：android, google-maps, adb, pandaboard

我有一个熊猫板，上面运行着 Android 4.0。现在我想通过 ADB 在板上安装我的自定义应用程序，但出现错误`INSTALL_FAILED_MISSING_SHARED_LIBRARY`。
原因是我的自定义应用程序使用谷歌地图和谷歌应用程序，谷歌库 a 没有集成在 android 构建中。

1.  以后可以安装谷歌应用程序/库吗？
2.  通常可以将谷歌库带到嵌入式板上还是不允许？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:57:22.523

谷歌拥有这些库的权利，我很确定你需要通过 Android 兼容性测试，然后谷歌才会正式允许你在你的设备上使用它们（这是所有设备制造商必须做的 AFAIK）。可以非正式地安装这些库。

一般来说，除非您获得 Google 的许可，否则我会对 (1) 说“是”，对 (2) 说“否”。

但是，如果您的应用程序的主要功能不太依赖 Google 的服务，您可以将下面的行添加到您的清单中，这将允许您安装该应用程序。但是，您需要考虑到您的设备上未提供 Google 的服务，并回退或禁用您应用的某些部分。

> <use-library android:name="com.google....." **android:required="false"** />

# ios - UIActivityViewController 上缺少关闭按钮

> ID：14570753
> 
> 赞同：2
> 
> 时间：2013-01-28T20:36:15.830
> 
> 标签：ios, objective-c, ios6, uiactivityviewcontroller

我目前正在为 iOS 应用程序做一些更新。对于更新，我将利用 iOS6 的功能。我正在使用 UIActivityViewController 以及一些自定义 UIActivity 活动来完成这项工作。我遇到的主要问题是没有“取消”或“关闭”按钮。您可以退出活动视图的唯一方法是，您要么在社交网络上发布内容，要么表现得像您要去的那样然后取消。

```
NSArray* dataToShare = [[NSArray alloc] initWithObjects:@"blah", nil];
// Custom activities are allocated here
NSArray* customActivities = [[NSArray alloc] initWithObjects:activities, nil];
NSArray* excludedActivities = [[NSArray alloc] initWithObjects:exclusions, nil];

activityController = [[UIActivityViewController alloc] initWithActivityItems:formatArray applicationActivities:customActivities];
activityController.excludedActivityTypes = excludedActivities;

activityController.modalPresentationStyle = UIModalPresentationFormSheet;
[[UIApplication sharedApplication].keyWindow addSubview:self.view];
[[UIApplication sharedApplication].keyWindow bringSubviewToFront:activityController.view];
[self presentViewController:activityController animated:YES completion:^{ closureCode
}]; 
```

这在网络内容方面完成了我在活动控制器内部需要的一切，我只是没有关闭按钮。我不知道这是否是同一个问题，但是当我尝试再次打开“共享”菜单时视图消失时，它会告诉我

```
<UIActivityViewController: 0x1e0db7d0>  on <ShareDelegate: 0x1e048490> which is already presenting <UIActivityViewController: 0x21b1d4f0> 
```

想法？提前致谢！

*我在用：

*   平板电脑 2
*   目标-C/C++
*   XCode 4.5
*   iOS6

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T23:12:28.770

从文档中`UIActivityViewController`（重点是我的）：

> 在呈现视图控制器时，您必须使用当前设备的适当方式来执行此操作。**在 iPad 上，您必须在弹出窗口中显示视图控制器。**在 iPhone 和 iPod touch 上，您必须以模态方式呈现。

在 iPad 上，用户在弹出框之外点击会取消弹出框。

在 iPhone/iPod touch 上，模态视图控制器将显示一个取消按钮。

简而言之，不要在 iPad 上使用表单。

# php - simplexml：访问属性国家的值

> ID：14570756
> 
> 赞同：-1
> 
> 时间：2013-01-28T20:36:27.480
> 
> 标签：php, simplexml

我需要从以下访问属性国家的值（不使用 xpath）：http: [//apps.db.ripe.net/whois/lookup/ripe/inetnum/79.6.54.99.xml](http://apps.db.ripe.net/whois/lookup/ripe/inetnum/79.6.54.99.xml)

这是我到目前为止所做的

```
$xml = simplexml_load_file("http://apps.db.ripe.net/whois/lookup/ripe/inetnum/79.6.54.99.xml");
$country = $xml->objects->object->attributes->attribute ... ??? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T21:19:24.393

```
$xml = simplexml_load_file('http://apps.db.ripe.net/whois/lookup/ripe/inetnum/79.6.54.99.xml');
foreach ($xml->objects->object->attributes->attribute as $attr) {
   if ($attr->attributes()->name == 'country') {
      echo $attr->attributes()->value;
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:07:52.107

我刚刚找到了两种方法，使用 [] 和使用 attributes()。

```
foreach(simplexml_load_file("http://apps.db.ripe.net/whois/lookup/ripe/inetnum/79.6.54.99.xml")->objects->object->attributes->attribute as $a){
if($a['name'] == 'country')
if(in_array($a['value'],array('IT'))) exit;
else break;
} 
```

我将把这个问题留到明天，以防万一其他人袖手旁观。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T21:47:44.593

这行得通；

```
$s = simplexml_load_file("http://apps.db.ripe.net/whois/lookup/ripe/inetnum/79.6.54.99.xml");
foreach ($s->objects->object->attributes->attribute as $attr) {
    $attrs = $attr->attributes();
    if ((string) $attrs->name == "country") {
        $country = (string) $attrs->value;
        break;
    }
}
print $country; // IT 
```

但也有一个选项，如果它适合你；

```
$s = file_get_contents("http://apps.db.ripe.net/whois/lookup/ripe/inetnum/79.6.54.99.xml");
preg_match_all('~<attribute\s+name="country"\s+value="(.*?)".*?/>~i', $s, $m);
print_r($m); 
```

出去;

```
大批
(
    [0] => 数组
        (
            [0] => <attribute name="country" value="IT"/>
        )

    [1] => 数组
        (
            [0] => IT
        )

)
```

# cocoa - NSWorkspace setIcon:forFile:options: 崩溃

> ID：14570758
> 
> 赞同：1
> 
> 时间：2013-01-28T20:36:31.737
> 
> 标签：cocoa

我有时在 [NSWorkspace setIcon:forFile:options:] API 上面临崩溃。

任何帮助表示赞赏。这是崩溃堆栈，

```
0   libsystem_kernel.dylib          0x00007fff85bfbe56 __semwait_signal_nocancel + 10
1   libsystem_c.dylib               0x00007fff8c04818b nanosleep$NOCANCEL + 139
2   libsystem_c.dylib               0x00007fff8bfe7c78 usleep$NOCANCEL + 53
3   libsystem_c.dylib               0x00007fff8bfe7aa6 abort + 187
4   libsystem_c.dylib               0x00007fff8c04684c free + 389
5   com.apple.CoreServices.CarbonCore   0x00007fff8df7aaf7 CSMemDisposePtr + 23
6   com.apple.CoreServices.CarbonCore   0x00007fff8df7aaba CSMemDisposeHandle + 79
7   com.apple.CoreServices.CarbonCore   0x00007fff8df7c355 DisposeHandle + 9
8   com.apple.AppKit                0x00007fff90356598 -[NSWorkspace setIcon:forFile:options:] + 566 
```

这是代码，

```
static NSImage  *FolderIcon = nil;

if(!FolderIcon) {
        FolderIcon = [[NSImage imageNamed:@"xxx.icns"] retain];
}

if(![[NSWorkspace sharedWorkspace] setIcon: FolderIcon
                                       forFile:Path
                                       options:0]) {
    NSLog(@"error");
} 
```

我使用的是静态图标，所以我认为没有悬空指针的可能性，我还检查了我们是否传递了不存在的文件路径，然后它返回“NO”。但它并没有崩溃。

这很少可重现..一旦重新产生就会粘贴错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-15T12:53:44.760

您不应该`-setIcon:forFile:options:`一次从多个线程调用。

从[文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace_Class/index.html#//apple_ref/occ/instm/NSWorkspace/setIcon:forFile:options:)：

> 从应用程序的任何线程调用此方法是安全的，但一次只能从一个线程调用它。

# asp.net-mvc - 使用 jquery ajax 传递多个复选框值

> ID：14570759
> 
> 赞同：2
> 
> 时间：2013-01-28T20:36:32.137
> 
> 标签：asp.net-mvc, jquery, asp.net-mvc-4

我在我的 ASP.NET MVC 4 视图中显示多条记录，其中每条记录都有一个复选框。我希望用户能够选择多条记录（通过选中复选框）并单击删除按钮以删除它们。到目前为止，我可以通过 jquery ajax 调用 Delete Action 方法，但问题是我的 action 方法似乎不接受传递的数组。这是我的jQuery代码：

```
 $(function () {

    $.ajaxSetup({ cache: false });

    $("#btnDelete").click(function () {
        $("#ServicesForm").submit();
    });

    $("#ServicesForm").submit(function () {
        var servicesCheckboxes = new Array();            
        $("input:checked").each(function () {
            //console.log($(this).val()); //works fine
            servicesCheckboxes.push($(this).val());
        });

        $.ajax({
            url: this.action,
            type: this.method,
            data: servicesCheckboxes,
            success: function (result) {
                if (result.success) {

                    }
                    else {
                    }

                }
        });
        return false;

    });
}); 
```

这是我的操作方法：

```
[HttpPost]
public ActionResult DeleteServices(int[] deleteservice)
{
   if (deleteservice != null)
   {
     //no hit
   }
} 
```

我错过了什么？

**编辑**

我还尝试`console.log(servicesCheckboxes);`了之前`$.ajax()`的哪些输出`["3", "4"]`，但当我按照下面的答案中指定的传递数据时仍然为空`data: { deleteservice: servicesCheckboxes }`。即使我尝试过`data: [1,2]`，但 action 方法仍然显示 null for `deleteservice`in action 方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:25:10.063

只需将数组传递给您的操作：

```
$.ajax({
    url: this.action,
    type: this.method,
    dataType: "json"
    data: { deleteservice: servicesCheckboxes }, // using the parameter name
    success: function (result) {
        if (result.success) {
        }
        else {
        }    
    }
}); 
```

或者，只需使用`serialize()`jquery 方法来序列化表单中的所有字段：

```
$.ajax({
    url: this.action,
    type: this.method,
    dataType: "json"
    data: $(this).serialize(),
    success: function (result) {
        if (result.success) {
        }
        else {
        }    
    }
}); 
```

在您的控制器中：

```
[HttpPost]
public ActionResult DeleteServices(int[] deleteservice)
{
    bool deleted = false;
    if (deleteservice != null)
    {
        // process delete
        deleted = true;
    }   

   return Json(new { success = deleted });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:09:41.063

终于让它工作了。“MVC 检测它接收的数据类型`contentType`”如此处所述[，](https://stackoverflow.com/questions/12572856/jquery-post-array-asp-net-mvc-4)因此我对以下内容进行了更改`$.ajax()`

```
$.ajax({
url: this.action,
type: this.method,
dataType: "json"
//data: { deleteservice: servicesCheckboxes }, // using the parameter name
data: JSON.stringify({ deleteservice: servicesCheckboxes }),
contentType: 'application/json; charset=utf-8',
success: function (result) {
    if (result.success) {
    }
    else {
    }    
  }
}); 
```

# pentaho - BigQuery JDBC 驱动程序不会返回超过 100,000 行

> ID：14570761
> 
> 赞同：3
> 
> 时间：2013-01-28T20:36:36.780
> 
> 标签：pentaho, google-bigquery

我在 Pentaho PDI 中为 Google BigQuery 使用 starschema JDBC 驱动程序：

[http://code.google.com/p/starschema-bigquery-jdbc/](http://code.google.com/p/starschema-bigquery-jdbc/)

我通过 BigQuery Web 控制台的查询返回 129,993 行，但是当我通过 JDBC 驱动程序执行相同的查询时，它只返回 100,000 行。是否有某种我不知道的选项或限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:57:52.530

StarSchema 代码看起来只返回结果的第一页。

[这里](https://code.google.com/p/starschema-bigquery-jdbc/source/browse/src/main/java/net/starschema/clouddb/jdbc/BQSupportFuncts.java#330)的代码应该更新以获得其余的结果。它应该看起来像：

```
public static GetQueryResultsResponse getQueryResults(Bigquery bigquery,
        String projectId, Job completedJob) throws IOException {        
    GetQueryResultsResponse queryResult = bigquery.jobs()
            .getQueryResults(projectId,
                    completedJob.getJobReference().getJobId()).execute();
    while(queryResult.getTotalRows() > queryResult.getRows().size()) {
        queryResult.getRows().addAll(
            bigquery.jobs()
                .getQueryResults(projectId,
                        completedJob.getJobReference().getJobId())
                .setStartIndex(queryResult.getRows().size())
                .execute()
                .getRows());            
    }
    return queryResult;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T08:57:00.030

根据 Jordan 的回答修改了代码，解决方案如下：

```
 public static GetQueryResultsResponse getQueryResults(Bigquery bigquery,
        String projectId, Job completedJob) throws IOException {
    GetQueryResultsResponse queryResult = bigquery.jobs()
            .getQueryResults(projectId,
                    completedJob.getJobReference().getJobId()).execute();
    long totalRows = queryResult.getTotalRows().longValue();
    if(totalRows == 0){ 
//if we don't have results we'll get a nullPointerException on the queryResult.getRows().size()
        return queryResult;
    }
    while( totalRows  > (long)queryResult.getRows().size() ) {
        queryResult.getRows().addAll(
            bigquery.jobs()
                .getQueryResults(projectId,
                        completedJob.getJobReference().getJobId())
                .setStartIndex(BigInteger.valueOf((long)queryResult.getRows().size()) )
                .execute()
                .getRows());           
    }
    return queryResult;
} 
```

这应该可以解决问题。也将新版本上传到google代码，命名为[bqjdbc-1.3.1.jar](http://code.google.com/p/starschema-bigquery-jdbc/downloads/detail?name=bqjdbc-1.3.1.jar)

# visual-studio - 应用配置转换

> ID：14570763
> 
> 赞同：1
> 
> 时间：2013-01-28T20:36:43.407
> 
> 标签：visual-studio, msbuild, config-transformation

抱歉这样的问题，但我花了太多时间在上面。我有一个 app.config 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <userSettings>
    <tbp.qa.Properties.Settings>
      <setting name="ServiceUri" serializeAs="String">
       <value>localhost</value>
     </setting>
   </tbp.qa.Properties.Settings>
 </userSettings>
</configuration> 
```

如何通过配置转换更改“值”，我尝试了以下方法，但没有任何改变：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
  <userSettings>
    <tbp.qa.Properties.Settings>
      <add name="ServiceUri" xdt:Transform="Replace" xdt:Locator="Match(name)">
        <value>localhost1</value>
      </add>
    </tbp.qa.Properties.Settings>
  </userSettings>
</configuration> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:54:32.757

您的配置文件转换 XML 结构应匹配原始配置文件的 XML 结构。

因此，在您的配置中，您有名称为的元素，`setting`但在您的转换文件中，您有名称为的元素`add`。

因此，将您的转换元素从`add`to更改为`setting`它应该可以工作

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
  <userSettings>
    <tbp.qa.Properties.Settings>
      <setting name="ServiceUri" xdt:Transform="Replace" xdt:Locator="Match(name)">
        <value>localhost1</value>
      </setting>
    </tbp.qa.Properties.Settings>
  </userSettings>
</configuration> 
```

# ruby-on-rails - 尝试在 localhost 上运行 ruby 应用程序时加载 mysql2 时出错

> ID：14570772
> 
> 赞同：0
> 
> 时间：2013-01-28T20:37:15.750
> 
> 标签：ruby-on-rails, mysql2

我正在尝试在 mylocalhost 上运行从 github 克隆的 ruby​​ 应用程序，并在命令中输入“rails s”时出现以下错误：

```
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2/mysql2.rb:2:in `require': 126: The specified module could not be found.   - C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2/1.9/mysql2.so (LoadError)
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2/mysql2.rb:2:in `<top (required)>'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2.rb:9:in `require'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2.rb:9:in `<top (required)>'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler/runtime.rb:68:in `require'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler/runtime.rb:66:in `each'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler/runtime.rb:66:in `block in require'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler/runtime.rb:55:in `each'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler/runtime.rb:55:in `require'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler.rb:122:in `require'
    from C:/Users/uklar/Documents/GitHub/Budget-Requests-New/config/application.rb:7:in `<top (required)>'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/commands.rb:53:in `require'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/commands.rb:53:in `block in <top (required)>'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/commands.rb:50:in `tap'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

C:\Users\uklar\Documents\GitHub\Budget-Requests-New [master +0 ~2 -0]>

有任何想法吗？谢谢！

**更新：**下载 libmysql.dll 文件并将其放入我的 ruby​​ 目录后，我收到以下消息：

```
 => Booting Thin
=> Rails 3.2.2 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.2/lib/action_dispatch/http/mime_type.rb:102: warning: already initialized constant JSON
Exiting
c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2/client.rb:44:in `connect': Can't connect to MySQL server on 'localhost' (10061) (Mysql2::Error)
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2/client.rb:44:in `initialize'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.2/lib/active_record/connection_adapters/mysql2_adapter.rb:16:in `new'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.2/lib/active_record/connection_adapters/mysql2_adapter.rb:16:in `mysql2_connection'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:277:in `new_connection'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:287:in `checkout_new_connection'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:235:in `block (2 levels) in checkout'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:230:in `loop'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:230:in `block in checkout'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:229:in `checkout'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:95:in `connection'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:374:in `retrieve_connection'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_specification.rb:168:in `retrieve_connection'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_specification.rb:142:in `connection'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.2/lib/active_record/model_schema.rb:308:in `clear_cache!'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.2/lib/active_record/railtie.rb:91:in `block (2 levels) in <class:Railtie>'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:418:in `_run__435324379__prepare__609126447__callbacks'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:405:in `__run_callback'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:385:in `_run_prepare_callbacks'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:81:in `run_callbacks'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.2/lib/action_dispatch/middleware/reloader.rb:74:in `prepare!'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.2/lib/action_dispatch/middleware/reloader.rb:48:in `prepare!'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/application/finisher.rb:47:in `block in <module:Finisher>'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/initializable.rb:30:in `instance_exec'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/initializable.rb:30:in `run'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/initializable.rb:55:in `block in run_initializers'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/initializable.rb:54:in `each'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/initializable.rb:54:in `run_initializers'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/application.rb:136:in `initialize!'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/railtie/configurable.rb:30:in `method_missing'
        from c:/users/uklar/documents/github/budget-requests-new/config/environment.rb:5:in `<top (required)>'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_support/dependencies.rb:251:in `require'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_support/dependencies.rb:251:in `block in require'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_support/dependencies.rb:236:in `load_dependency'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_support/dependencies.rb:251:in `require'
        from c:/users/uklar/documents/github/budget-requests-new/config.ru:4:in `block in <main>'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
        from c:/users/uklar/documents/github/budget-requests-new/config.ru:1:in `new'
        from c:/users/uklar/documents/github/budget-requests-new/config.ru:1:in `<main>'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/commands/server.rb:46:in `app'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/commands/server.rb:70:in `start'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/commands.rb:55:in `block in <top (required)>'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/commands.rb:50:in `tap'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/commands.rb:50:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:05:53.310

好的，所以解决方案是：

1.  下载 libmysql.dll 文件并放到 ruby​​ 目录下
2.  以管理员身份打开命令提示符并按以下方式启动 mysql 服务器：C:\Program Files\MySQL\MySQL Server 5.0\bin\mysqld

# variables - 将变量限制为线性规划中的一组值

> ID：14570773
> 
> 赞同：1
> 
> 时间：2013-01-28T20:37:19.153
> 
> 标签：variables, linear-programming

我正在 LINGO 中编写一个线性程序，以使用最少的重量来平衡鼓。我的问题是如何将变量限制为一组值？例如，如果我希望将名为 Weight 的变量限制为值（0、1、2、4、5 或 10），我该如何实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T18:23:47.590

实现这一点的常用方法是在公式中引入几个二元 (0,1)*指示*变量。

假设这`X`是一个感兴趣的变量，它可以取离散值 {0,1,2,4,5,10} 引入六个指标变量（Y_0, Y_1, ... Y_10） 我们只希望**其中一个**Y 取值为 1，其他都为 0。

`Y_0 + Y_1 + Y_2 + Y_4 + Y_5 + Y_10 = 1`（互斥约束）

现在将指标变量与原始变量联系起来。

`X = 0 Y_0 + 1 Y_1 + 2 Y_2 + 4 Y_4 + 5 Y_5 + 10 Y_10` （X 将取适当的值，具体取决于哪个指标变量为 1。）

现在在你的配方的其余部分使用 X。

# java - 页面加载和 Selenium - 加载后驱动程序不执行任何操作

> ID：14570775
> 
> 赞同：3
> 
> 时间：2013-01-28T20:37:31.163
> 
> 标签：java, selenium, selenium-webdriver, wait

我正在尝试自动化（Java + Selenium）网站测试，但我在等待和让它做我想做的事情时遇到了很多问题。

一旦我准备好几个单元测试，我的问题就是：
* 如果我不等待，只执行代码，firefox 启动，页面加载并且不做任何其他事情。我的印象是页面会在返回控制权之前加载，但这似乎不会在这里发生。如果我没有运行它，而是设置了一个断点，调试它并逐步运行它，一切都会完美运行，这让我相信这是一个时间问题。

如果我写这个，那么它也很好用：

```
driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS); 
```

但是，如果我希望它等待一个元素可见（如用户名或密码字段）或一个按钮可点击（如登录按钮），则光标停留在 URL 栏中，除了加载页面之外它什么也不做.

```
 WebDriverWait wait = new WebDriverWait(driver, 20);
        wait.until(ExpectedConditions.visibilityOf(driver.findElement(By.xpath("//*[@id='isc_E']")))); 
```

（是的，我知道我可以使用 ID 而不是 xpath，这是我的许多尝试之一的剩余部分）。

在那段代码之后，它应该在两个文本字段上执行几个 sendKeys()，然后在登录按钮上执行 click() 并停止。我是否需要添加任何其他内容才能实际执行等待命令，或者这是否足够？

我知道我可能以一种相当愚蠢的方式把它搞砸了，但我终生无法找到它或靠我自己解决它。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:24:15.793

我不确定您是如何单击提交按钮的。但它应该走下面的路

```
// WebDriver instance for explicit wait by default on until condition
WebDriverWait wait = new WebDriverWait(driver, 5000);
// waits until elements gets ready 
WebElement we = wait
              .until(ExpectedConditions.elementToBeClickable(By
                            .xpath("//*[@id=\"searchSubmit\"]")));

//  once elements is ready it will clicked
driver.findElement((By) we).click();

driver.findElement(By.xpath("//*[@id=\"searchSubmit\"]")).click(); 
```

[显式和隐式等待](http://seleniumhq.org/docs/04_webdriver_advanced.jsp)

我希望这可以帮助你。

# uitableview - Mono Profile vs XCode Instruments。描述

> ID：14570776
> 
> 赞同：1
> 
> 时间：2013-01-28T20:37:35.333
> 
> 标签：uitableview, mono, xamarin.ios, monotouch.dialog, xamarin

我正在 iPhone 上分析我的应用程序。我正在创建很多`UIWebView`并将它们粘贴在 MonoTouch.Dialog 表中（比如说 1000 个）。我有一个按钮可以清除表格部分并处理 webviews 和对任何 webviews 的任何引用。

我注意到 Mono Profile 的实例`UIWebview`下降到零（应该如此）。但是，如果我使用 Instruments (Allocations) 进行相同的测试，它表明“实时”Webview 的数量永远不会减少，内存也永远不会恢复。我什至尝试了 GC.Collect 并没有什么不同。

我还看到 Mono 配置文件说正在使用的总内存大约是 1.5 兆，而在仪器中显示大约 5 兆。

第一项让我更关心，因为我似乎无法恢复该内存并销毁所有这些实例。我读错了还是有其他问题？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T12:39:59.180

如果 UIWebView 实例的数量在 Mono 分析器中下降，但在 Instruments 中没有，这意味着本机代码持有对这些实例的引用，从而阻止它们被释放。

我建议您在 Allocations 工具中启用“记录引用计数”选项，然后在 UIWebView 实例仅显示在 Instruments 中时调查 retainCount - 您需要将每个保留调用与释放调用配对（但至少会有一个你不能配对，这就是你要找的那个）。此时您需要弄清楚为什么该保留调用没有相应的释放调用。

Mono 配置文件和 Allocations 工具实际上都没有告诉您正在使用的 ram 总量（并且它们测量不同的东西，这就是数字不同的原因）。Mono 分析器仅测量托管对象，而 Allocations 对象测量除托管对象外的大多数（但不是全部）本机分配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T19:59:25.180

我认为这是一个误解。

*   MonoTouch.Dialog 基于`UITableView`. 它可以隐藏很多复杂性，但底层行为仍然是相同的；

*   `UITableView`使用`UITableViewCell`实例。然而，为了尽量减少内存需求，它会尽可能重用单元。因此，一个包含 1000 个单元格的表格，在屏幕上只显示十几个，可能只需要分配（不超过）十几个单元格（而不是 1000 个）。

正常（或 MT.D）代码如下所示：

```
public override UITableViewCell GetCell(UITableView tableView, NSIndexPath indexPath)
{
    var cell = tableView.DequeueReusableCell ("cell") as MyCell;
    if (cell == null) {
        // create new cell
        cell = new MyCell ();
    } else {
        // prepare cell for reuse
    }
    // customize cell
    return cell;
} 
```

可能发生的是：

*   您创建 1000 个元素；

*   当被问及元素创建一个**新**单元格时，大约 14 次填充屏幕，然后它会重复使用它们（例如，如果你滚动）；

*   `section.Clear`清除 UI（不是`UITableView`单元缓存）；

*   Instruments 向您显示`UITableView`已分配的内容（例如 14 个缓存/可重用单元）；

*   `UITableView`当您处置由 分配的 时，这些单元格将被释放`DialogViewController`。否则（缓存的）单元格不受您的控制；

# excel - 查找日期和总和

> ID：14570782
> 
> 赞同：0
> 
> 时间：2013-01-28T20:37:53.967
> 
> 标签：excel, excel-formula

我难住了。我目前正在尝试为休假创建一个休假跟踪器。

我有两个标签。

第一个选项卡：“概述” - 此选项卡包含三列。

*   月

*   使用量

    ```
    =SUMIFS(Data!$C:$C,Data!$A:$A,"January") 
    ```

    此公式访问数据选项卡，并使用第一列信息并对当月的金额求和。

*   左一月

    ```
    =B5+$G$4 
    ```

    二月

    ```
    =C5+B6+$G$4 
    ```

    这将剩余的金额与已使用的金额相加，并与每个月的应计率相加。

然后在右边，我有“应计率”，它旁边的单元格是可变的。它是放置一个月累积的小时数的地方。（forumla 将它乘以 12 个月以简化用户）

完成第一个选项卡。

第二个选项卡：称为“数据”

这是人们可以休息的地方。

这没什么花哨的。三个无标题的专栏。

*   带有公式的单元格：

    ```
    =IF(B1="","",TEXT(B1,"mmmmmmmm")) 
    ```

*   下一列是 mm/dd/yyyy 格式的日期。
*   下一列是使用的小时数。“使用小时数”为负数，“获得小时数”为正数。

现在，也许我不需要很长的解释来问这个问题。我正在尝试删除计算月份的列。有没有办法使用 Sumif 命令在公式中按日期查找？

如果日期是：

2013 年 1 月 1 日 | -8 |

2013 年 1 月 2 日 | -8 |

2013 年 1 月 3 日 | -8 |

2013 年 1 月 4 日 | -8 |

2013 年 2 月 2 日 | -8 |

2013 年 2 月 3 日 | -8 |

2013 年 2 月 4 日 | -8 |

有没有办法说，如果月份是“1”或 Jan，则将其旁边的单元格的总数相加？在这种情况下，答案应该是 32。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:46:19.457

使用 SUMIFS，您可以在 1 月 1 日至 31 日之间求和，例如

`=SUMIFS(Data!$C:$C,Data!$B:$B,">="&DATE(2013,1,1),Data!$B:$B,"<="&DATE(2013,1,31))`

或者可能更好地引用带有日期的单元格，因此假设您在“概述”选项卡的 B3 中有 1st Jan 2013，即：

`=SUMIFS(Data!$C:$C,Data!$B:$B,">="&B3,Data!$B:$B,"<="&EOMONTH(B3,0))`

后一个公式可以复制几个月

# c - C：错误嵌套的 switch/case 块令人惊讶地工作

> ID：14570786
> 
> 赞同：12
> 
> 时间：2013-01-28T20:38:04.790
> 
> 标签：c, visual-studio-2010

我刚刚在我维护的一些代码中发现了以下部分：

```
switch (m) {
    case 62: { // opening
        // some declarations
        // do some stuff
        break;
    case 63:
        // do some other stuff
        break;
        }      // closing
    default:
        // default stuff
        break;
 } 
```

块开头是为了声明一些局部变量，但右大括号被错误放置并出现在`case 63`.

几个月来我从未注意到这一点，因为它在 Visual Studio 2010 中编译得很好。我试过调试它，两种情况都很好。

怎么可能 ？这是正确的 C 语法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-28T20:40:12.970

这些`case`语句就像 goto 标签，所以这是允许的语法。[Duff 的设备](https://en.wikipedia.org/wiki/Duffs_device)是一个著名的用例。

尽量避免这样做。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-28T20:45:29.410

**6.8.1 标记语句，C99**

> 任何语句前面都可以有一个前缀，将标识符声明为标签名称。**标签本身不会改变控制流，控制流在它们之间继续畅通无阻。**

即花括号对 switch-case 标签的工作方式没有影响，但它只是创建了一个新的范围。

这就解释了为什么看似*放错位置*的花括号不会导致语法错误。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-28T20:43:26.227

令人惊讶的是，这是符合语言标准的正确语法。你甚至可以这样做：

```
switch (m) break; 
```

或这个：

```
switch (m); 
```

`case const-expr:`工作起来非常像您使用的常规标签`goto`。

# php - 从 mysql 数据库表加载 php 脚本

> ID：14570787
> 
> 赞同：0
> 
> 时间：2013-01-28T20:38:07.243
> 
> 标签：php, mysql

我有一个 mysql 数据库，在其中一个字段中，我有一堆普通的 html 和一个 php 脚本。当我从数据库中提取并显示该字段时，php 不会呈现为 php，而是呈现为 html。想知道是否可以将 php 脚本放在 mysql 数据库字段中，然后在将它们拉到网页上时将它们呈现为 php，如果可以，我该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T20:40:19.837

我在使用 eval 函数之前已经这样做了。然而，eval 是危险的，因为如果恶意代码被注入它可能会造成严重的伤害，所以要谨慎行事。

作为替代方案，我所做的是将类名和参数存储在数据库中，然后生成给定的类以生成 html 和 php。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T20:41:40.210

您正在寻找的是`eval()`......因为当您从数据库中提取代码时，它会存储为字符串。

**但请注意！**...

> **eval()**语言结构**非常危险**，因为它允许执行任意 PHP 代码。**因此不鼓励使用它**。

直接取自[PHP 文档](http://php.net/manual/en/function.eval.php)。

如果您将用户输入带入数据库字段，请不要使用`eval()`，因为用户可能会将恶意脚本上传到您的数据库中。

事实上，为什么需要将 PHP 存储在数据库中？这听起来设计得很糟糕，我强烈建议您找到另一种方法。查看[Mustache](https://github.com/bobthecow/mustache.php)或搜索 PHP 模板引擎。

**如果您必须先`eval()`阅读大量**相关信息，请确保您了解安全风险。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T20:42:14.600

出于安全、设计和其他考虑，首先这样做并不是一个好主意。

执行此操作的常用方法称为*模板化*。

您在数据库中的 HTML 代码将包含占位符，比如

```
<h1>Title of this page: {$title}</h1>
<p>Contents: {$contents}</p>
... 
```

然后，在从数据库中提取这些占位符后，您将使用 PHP 填写这些占位符。还有成熟的模板引擎可以完成这项工作，例如[Smarty](http://www.smarty.net/)或[Twig](http://twig.sensiolabs.org/)。（后者更轻一些）

# .net - 如何接受 XMLSchema 的 dateTime 格式的变化

> ID：14570791
> 
> 赞同：2
> 
> 时间：2013-01-28T20:38:28.773
> 
> 标签：.net, xml-serialization

我需要将一个 XML 文件反序列化为一个类。我想找到处理作为 传入的 DateTime 值的最佳方法`YYYY/MM/DD hh:mm:ss`，但预期的标准是`YYYY-MM-DD hh:mm:ss`.

想法是制作类属性字符串然后处理它（根据情况，添加访问和转换的属性，添加 DateTime 扩展方法）或使用自定义序列化。

我有没有更好的方法？例如，感觉就像在序列化上可能有某种配置而无需编写自定义。只是试图不重新发明轮子。

# cakephp - 创建和上传文件的默认目录

> ID：14570793
> 
> 赞同：0
> 
> 时间：2013-01-28T20:38:32.083
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

如何在 cakephp 中更改创建文件的默认目录，例如使用以下函数：

```
$fp = fopen('data.txt', 'w');
fwrite($fp, 'example');
fclose($fp); 
```

在 cakephp 中，当我这样做时，默认情况下会在 webroot 中创建文件，我有兴趣为所有创建的文件更改此文件夹，我对每次创建文件时都更改它不感兴趣。

那么如何更改此默认目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:47:51.893

您应该从 webroot 指定路径`/path/to/the/folder/`

为了做你想做的事，你可以在 CakePHP 使用特定文件夹的路径初始化时定义一个常量，如下所示：

```
define("MY_FILES", "/path/to/the/new/folder"); 
```

当你使用 fopen 时，你可以这样做：

```
$fp = fopen(MY_FILES.'data.txt', 'w'); 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T06:47:40.127

您可以使用默认常量

`$folder_url = WWW_ROOT.$folder;`

或者

`$path = getcwd();`

```
$file_path = $path.'/file.'/'.file_name.txt;

chmod($file_path, 0777);
$xmlFile = fopen($file_path, 'w'); 
```

# python - Python——检查对象是否是某个模块中任何类的实例

> ID：14570802
> 
> 赞同：33
> 
> 时间：2013-01-28T20:39:26.827
> 
> 标签：python, class, types, module, typechecking

需要一种方法来检查对象是否是某个特定模块中任何类的实例。

我知道我可以通过从该模块显式导入每个类并使用元组检查来做到这一点：

```
from my_module import ClassOne, ClassTwo

>>> isinstance(my_obj, (ClassOne, ClassTwo))
True 
```

但实际上，我从中导入的模块中有大量的类，并且显式地导入它们似乎是不必要的冗长，使用它们来构建一个巨大的元组，并对它进行类型检查。我尝试了一些方法来避免这种情况：

```
import my_module

# Test my_obj against the module itself
>>> isinstance(my_obj, my_module)
TypeError: isinstance() arg 2 must be a class, type, or tuple of classes and types

# Try to test against a wildcard attribute on my_module
>>> isinstance(my_obj, my_module.*)
SyntaxError: invalid syntax

#Try to build a tuple of clases with iteration to check against
>>> for klass in my_module:
TypeError: 'module' object is not iterable 
```

有没有办法对 my_module 中的所有类进行类型检查，而无需在元组中明确命名它们？

**可选背景信息：**
我可能忽略了解决问题的更好方法——如果您想知道，情况如下：

我们正在将数据从 Google App Engine 应用程序导出到我们在 Rackspace 上托管的应用程序。我们使用 HTTP 请求序列化数据，`pickle`然后将其发送到我们的 Rackspace 服务器。

Google App Engine 数据库中的一些数据是 GAE 特定的数据类型，从 google.appengine.api.datastore_types 导入。如果这些数据类型中的任何一个通过网络连接到我们的 Rackspace 服务器，它们将引发错误 depickling，因为我们的 Rackspace 应用程序没有所需的 GAE 库。因此，在退出 GAE 的过程中，我正在检查是否有任何传出对象具有来自 google.appengine.api.datastore_types 的类型。如果是这样，我要么将它们转换为内置数据类型，要么从对象中删除该字段。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-28T20:41:57.927

您可以使用[`inspect.getmembers`](http://docs.python.org/2/library/inspect.html#inspect.getmembers)获取模块中的所有类：

```
inspect.getmembers(my_module,inspect.isclass) 
```

这将返回名称-类对的列表。您只需要以下课程：

```
my_module_classes = tuple(x[1] for x in inspect.getmembers(my_module,inspect.isclass)) 
```

* * *

当我最初写这个答案时，我设法忽略的一件事是检查类`__module__`属性的能力。您可能可以检查是否`__module__`是您期望的那样：

```
from somewhere import module

if getattr(obj, '__module__', None) == module.__name__:
    # obj is from module. 
```

这可能比`isinstance`检查大量的类名更便宜。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-10-12T16:04:38.443

我使用了@mgilson 简单的解决方案：

```
from somewhere import module

if getattr(obj, '__module__', None) == module.__name__:
    # obj is from module. 
```

并注意到如果你有一个模块树，并且你想确保它来自基本模块，你必须这样做：

```
from somewhere import module

if getattr(obj, '__module__', None).split('.')[0] == module.__name__:
    # obj is from module. 
```

但是，如果您`object`来自内置它会引发异常，所以我会：

```
from somewhere import module

module_tree = getattr(obj, '__module__', None)
parent = module_tree.split('.')[0] if module_tree else None

if parent == module.__name__:
    # obj is from module. 
```

# javascript - 按地理位置阻止 IP 地址

> ID：14570803
> 
> 赞同：0
> 
> 时间：2013-01-28T20:39:31.210
> 
> 标签：javascript, ip, boonex-dolphin

我想阻止 IP 地址从某些地理区域创建帐户，简而言之，我认为列出可以接受 IP 地址的特定地理区域的列表实际上更为谨慎。该网站只为当地人提供服务，并且他们是唯一被授予逐个用户访问该网站的人。

那么有没有办法只接受来自某个地理区域的 IP，同时将指定区域之外的 IP 发送到垃圾箱或类似的东西？

我们正在使用 Dolphin 来运行网站，并且禁止每天进入的 IP 地址非常耗时。我已经通读并看到了许多描述 MaxMind 服务的帖子，但我们想实现自己的一些东西。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:41:59.580

您必须能够将 IP 地址映射到地理位置。您提到了 MaxMind API，这是一种选择。他们还提供了一个可下载的数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T12:40:19.917

假设您使用的是 php，如果您可以[安装 GeoIP 包](http://www.php.net/manual/en/geoip.setup.php)，那将非常容易。

只需调用以下函数即可获取客户端的国家代码。

```
$country_code = geoip_country_code_by_name($ip_address); 
```

如果您更喜欢通过 Web 服务获取地理信息*（200.000 次查找将花费 20 美元）*，请查看 Web api：

[MaxMind Web API](http://dev.maxmind.com/geoip/web-services)

[PHP 示例](http://dev.maxmind.com/geoip/web-services#PHP-11)

以下是可能的国家代码列表：[国家代码](http://dev.maxmind.com/geoip/codes/iso3166)

# c# - 高级安装程序，通过命令行使用标志/参数调用我的自定义 MSI？

> ID：14570806
> 
> 赞同：3
> 
> 时间：2013-01-28T20:39:36.800
> 
> 标签：c#, windows-installer, advanced-installer

我创建了一个自定义 MSI 包，我正在使用 Advanced Installer 尝试添加某种`"flag"`可以触发的命令行参数。当该标志被触发时，它将导致安装程序中发生一系列事件（*删除某些文件，移动文件夹，提取 zip 文件......等等......*）

换句话说，假设我`exe`从 Advanced Installer 生成了名为`installer.exe`.

我想从命令行调用`installer.exe --triggerEvents`中触发安装程序本身内的一系列自定义事件。

经过一番研究，我发现了这篇与我的问题有关的非常好的文章：

[如何将命令行参数传递给 MSI 安装程序自定义操作](http://www.codeproject.com/Articles/16767/How-to-Pass-Command-Line-Arguments-to-MSI-Installe)

但似乎作者严格关注 MSI 而不是 Advanced Installer，我更愿意利用我正在使用的这个应用程序。

**是否可以通过传入我想要的任何参数来简单地调用安装程序，并使用会话通过自定义操作来获取它？或者有没有办法用人工智能做到这一点？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T01:33:33.957

您应该能够使用 AdvancedInstaller（安装参数页面，属性）在 MSI中创建[公共属性。](http://www.advancedinstaller.com/user-guide/properties.html)请注意，公共属性**必须**是**ALL_CAPS**，而私有属性可以包含小写字母。

请参阅自定义操作中的公共属性以在运行时检索该属性的值。

从命令行调用 msi 时，您可以像这样设置公共属性的值：

```
msiexec.exe /i "C:\MyAwesomeApp.msi" AWESOME_PROP="myValue" 
```

根据您的描述，您似乎正在将[MSI 编译为 bootstrapper](http://www.advancedinstaller.com/user-guide/exe-setup-file.html)。我的理解是，引导程序 exe 将代表您将公共属性的参数传递到 MSI，ala：

```
C:\MyAwesomeApp.exe /i AWESOME_PROP="myValue" 
```

我发现要让您的自定义操作引用公共属性的内容并按照您希望它们的方式运行，需要大量的试验和错误，但这可能是因为我不擅长创作微星的。就我而言，我发现构建小型测试安装程序作为概念证明或多或少有助于我调试我正在尝试做的事情。一旦我做对了，我就把它添加到我正在使用的实际 AIP 文件中，并在那里进行测试。冲洗并根据需要重复！

# java - 为回合制、2 人、棋盘游戏创建网络连接

> ID：14570808
> 
> 赞同：1
> 
> 时间：2013-01-28T20:39:42.307
> 
> 标签：java, networking

我正在尝试用java创建一个一对一的回合制棋盘游戏。如果玩家在同一台计算机上，则基本的游戏结构已经创建并正在运行。我现在正在努力实现在线多人游戏，因为我以前从未做过任何与网络相关的事情。

每回合玩家必须输入最多 9 个十进制数字（如果遗漏了一个数字，则视为 0）。由于我想允许任意精度，我将这些数字存储在 BigDecimals 数组中。

我想象它的工作方式，两个客户端可以通过 IP 直接相互连接，每轮交换消息，并在另一个客户端断开连接时得到通知。

我尝试查看几个不同的教程，但它们对我不起作用，因为它们实现了服务器/客户端解决方案，或者因为它们不允许我发送 BigDecimal 对象。到目前为止，我对这个主题有点困惑，不确定从哪里开始实施网络连接。这就是为什么我什至没有任何代码可以在这里发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:50:09.950

如果我从[这篇文章](https://stackoverflow.com/questions/2578254/connect-two-client-sockets)中理解的内容是正确的，则您无法在两个客户端之间创建简单的连接。您必须在两者之间有某种服务器，否则其中一个客户端必须充当服务器。连接两个“客户端套接字”没有简单的方法。

话虽如此，我不确定是否可以通过 LAN 创建连接。我个人玩过一些游戏，你需要设置一些复杂的东西才能通过互联网在线玩，但是共享 LAN 连接的两个人可以轻松连接，没有问题。我之前提到的帖子涉及到这一点，但我还没有真正做足够的研究来了解他们在那里谈论的一半。

* * *

附加信息：

[这](http://www.oracle.com/technetwork/java/socket-140484.html)就是 Oracle 关于通过服务器和套接字等进行连接时所说的。他们可能能够提供一些额外的支持，即使他们的文章讨论了三个客户端的情况，而您的只有两个。

祝你的游戏好运，希望对你有帮助！

# ruby-on-rails - 如何从轮胎结果中排除某些类型？

> ID：14570813
> 
> 赞同：0
> 
> 时间：2013-01-28T20:40:04.227
> 
> 标签：ruby-on-rails, ruby, elasticsearch, tire

```
Tire.search index do
  query do
    filtered do
      query { string term }
      filter :or, { missing: { field: :group_id } },
                  { terms: { group_id: group_ids } }
      filter :not { type: "Movie" } if current_user.has_not_permission("Movie")
    end
  end
end.results 
```

如果用户无权观看电影，我想排除所有电影结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:01:13.547

这是授权弹性搜索结果的一个很好的答案：

[使用 cancan 授权 elasticsearch 结果](https://stackoverflow.com/questions/11600867/authorize-elasticsearch-results-with-cancan)

# sql - 我可以从 WHERE 子句中排除 MSSQL 中的单个 SELECT 吗？

> ID：14570826
> 
> 赞同：0
> 
> 时间：2013-01-28T20:40:47.970
> 
> 标签：sql, sql-server, database

我有一个查询，它提取了我需要由多个 WHERE 子句过滤的大量信息。但是，我不希望我的主表（在这种情况下为 inv_data）受到所有 WHERE 子句的影响。有什么方法可以选择哪些表受哪个 WHERE 影响？

这是我当前的查询：

```
$query_ats = "SELECT
                i.prod_cd as product,
                i.descrip as description,
                i.in_stock as current_stock, 
                SUM(p.log_qty) as purchase_order,
                SUM(l.order_qty + e.order_qty) as total_so
            from
                inv_data as i
                inner join plog as p
                    on i.prod_cd = p.prod_cd
                inner join ord_log as l
                    on i.prod_cd = l.prod_cd
                inner join ediordlg as e
                    on i.prod_cd = e.prod_cd
            where
                i.class_cd = 'ALG7'
            AND 
            dateadd(day, p.EST_DT, '18001228') BETWEEN getdate() and dateadd(day, 14, getdate())
            AND 
            dateadd(day, l.SHIP_DT, '18001228') BETWEEN getdate() and dateadd(day, 14, getdate())
            AND 
            dateadd(day, e.SHIP_DT, '18001228') BETWEEN getdate() and dateadd(day, 14, getdate())
            group by
                i.prod_cd,
                i.descrip,
                i.in_stock,
            order by
                i.prod_cd ASC"; 
```

表 i (inv_data) 是我不希望受任何 dateadd 子句影响的主表。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:51:52.250

左外连接条件并将条件移动到`on`子句：

```
SELECT i.prod_cd as product,
       i.descrip as description,
       i.in_stock as current_stock, 
       SUM(p.log_qty) as purchase_order,
       SUM(l.order_qty + e.order_qty) as total_so
from inv_data i left outer join
     plog p
     on i.prod_cd = p.prod_cd and
        dateadd(day, p.EST_DT, '18001228') BETWEEN getdate() and dateadd(day, 14, getdate())
     left outer join
     ord_log l
     on i.prod_cd = l.prod_cd and
        dateadd(day, l.SHIP_DT, '18001228') BETWEEN getdate() and dateadd(day, 14, getdate()) 
     left outer join
     ediordlg e
     on i.prod_cd = e.prod_cd and
        dateadd(day, e.SHIP_DT, '18001228') BETWEEN getdate() and dateadd(day, 14, getdate())
where i.class_cd = 'ALG7'
group by i.prod_cd, i.descrip, i.in_stock,
order by i.prod_cd ASC 
```

# .net-4.0 - 已安装 4.5 时不安装 .NET Framework 4.0

> ID：14570827
> 
> 赞同：11
> 
> 时间：2013-01-28T20:40:50.667
> 
> 标签：.net-4.0, visual-studio-2012, clickonce, .net-4.5

我将 Visual Studio 2012 用于需要（至少）.NET Framework 4.0的[WPF项目。](http://en.wikipedia.org/wiki/Windows_Presentation_Foundation)我已经安装了 4.5，但是使用 Windows XP 的人无法安装该应用程序（因为 4.5 不能在 Windows XP 上运行）。我使用[ClickOnce](http://en.wikipedia.org/wiki/ClickOnce)作为部署应用程序。

当我尝试安装 4.0 版时，出现错误（从荷兰语翻译，所以英文版可能有点不同）：

> 此计算机上已安装相同或更高版本的 .NET Framework 4

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T20:49:47.617

[.NET 4.5 是 .NET 4.0 的CLR](http://en.wikipedia.org/wiki/Common_Language_Runtime)附加组件，因此，当您安装 .NET 4.5 时，它包含 4.0。在安装了 .NET 4.5 的计算机上生成 ClickOnce 时，存在一个已知问题。

Visual Studio 2012 Update 1 应该可以解决这个问题。

您可以在 Visual Studio 中为您的 .NET 应用程序设置 .NET 框架版本。当您想要发布 Windows XP 兼容版本时，您应该始终选择 .NET 4 或更低版本作为目标框架。

.NET 4.0 Framework 应与 4.5 并排列出。

![在此处输入图像描述](../Images/98608a4a3dd794d386ab567770605539.png)

这是在正常安装的 Windows 8 机器 Visual Studio 2012 Ultimate 上，无需安装任何其他框架或 SDK。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T05:48:47.980

.NET Framework 4.5 是就地更新并替换 .NET Framework 4。一旦安装了 .NET Framework 4.5，就无法返回到 .NET Framework 4。请注意，.NET Framework 4.5 程序集的主要和次要版本是没有改变。这意味着 .NET Framework 4 应用程序不会“看到”两者之间的差异，并且*应该*以同样的方式运行。由于您希望应用程序在 Windows XP 上运行，因此您需要在项目中以 .NET Framework 4 为目标。这将确保您的应用程序没有使用 .NET Framework 4.5 中添加的任何新 API。完成此操作后，您应该能够在 .NET Framework 4 和 .NET Framework 4.5 上运行您的应用程序。请注意，即使兼容性栏非常高（由于 .NET Framework 4.5 是就地更新），您仍然会发现一些细微差别（例如，在 .NET Framework 4 中导致异常的错误可能已在 .NET Framework 中修复4.5 和异常不再抛出），因此您需要在 .NET Framework 4 机器上彻底测试您的应用程序，因为在 .NET Framework 4.5 上运行它不会显示一些问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-27T13:41:57.363

很简单，只需检查控制面板并卸载更高版本并继续安装即可。

# php - 我可以调用 PHP 方法来异步运行吗？

> ID：14570830
> 
> 赞同：1
> 
> 时间：2013-01-28T20:40:53.107
> 
> 标签：php, jquery

当用户查看某个个人资料页面时，我需要向最终用户发送一封电子邮件，但如果可能的话，我希望异步执行此操作。这可以用PHP完成吗？我真的不想在呈现页面的其余部分之前等待 PHP 函数完成。它对用户应该是无缝的。

或者这是来自客户端的更好解决方案：

```
$.post("msg.php?user=xxx", function(data) {
    ....   
}, "json"); 
```

有首选方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T20:51:26.230

如果您想要交互性，请选择[`ajax()`](http://api.jquery.com/jQuery.ajax/)方法；如果你只是想点击一个监听器脚本（从而初始化一组 PHP 功能），使用[`post()`](http://api.jquery.com/jQuery.post/)它是同一方法的简写版本：

```
$(function() {

   // If you just want to activate a listener script (with no interaction)
   $.post('/path/to/script.php');

   // If you want to receive data back from your script for use in the DOM
   $.ajax({
      type: "POST",
      url: "/path/to/script.php",
      data: { name: "John", location: "Boston" }
   }).done(function( response ) {
      alert( response );
   });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:42:50.160

正如您所建议的，让您的页面执行异步操作的最佳方法是使用 AJAX。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T21:05:01.137

如果您遇到服务器端解决方案，您可以使用 proc_open 或 shell_exec 执行脚本。根据您的环境，这可能会有一些限制，但这通常是多线程 PHP 的一种快速而肮脏的方式，因此允许异步发生。

也就是说，在脚本中的某处，如果设置了一个标志（例如通知标志），它将分派一个类似 '../private/notify.php' 的进程......看看如何将参数传递给命令行调用php。还有直接调用 sendmail 的选项。

确保在尝试之前对其进行一些测试；您需要确保：

1.  您可以安全成功地生成新线程
2.  您无需等待该线程完成即可完成当前脚本执行
3.  该线程将安全地完成并自行退出，无论是错误还是成功
4.  有一种方法可以处理错误（例如邮件失败），以便您可以调试问题。日志文件可能是这里最好的答案。

# json - 我可以加密我的 JSON 数据吗？

> ID：14570831
> 
> 赞同：37
> 
> 时间：2013-01-28T20:40:57.343
> 
> 标签：json, encryption, permissions, obfuscation

我正在开发一个将从 DVD 本地执行的 JQuery Web 应用程序。该应用程序将读取 JSON 文件的所有内容。

有没有一种加密或混淆 JSON 内容的好方法，以便只有应用程序可以读取它？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-28T20:49:25.377

如果您只想阻止他们复制和粘贴到其他内容中，则可以将其存储在 BSON 而不是 JSON 中。[http://bsonspec.org/#/specification](http://bsonspec.org/#/specification)

现在只有混淆它，并且不会阻止知识渊博的人使用它，如果他们愿意的话。

您也可以对其进行加密，但您仍然会遇到类似的问题，因为您将解密密钥存储在加载加密 Json 的 javascript 中。

任何真正想要您的数据的人都可以得到它。大多数浏览器都有 javascript 调试器，可以让您在运行时提取或查看数据。

因此，这主要取决于您要付出多少努力来使您的数据难以获取。一个积极主动的人，无论您做什么，都能获取您的数据。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-28T20:46:28.723

如果你只能使用 JavaScript（没有脚本引擎，比如 php），这个库可能有用：[http ://code.google.com/p/crypto-js/](http://code.google.com/p/crypto-js/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-08T13:41:53.080

这个怎么样：[https](https://github.com/HazAT/jCryption) ://github.com/HazAT/jCryption ？它使用 RSA 进行密钥交换，使用 AES 进行加密。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-06T20:47:26.253

我不确定您的平台支持哪些语言，但请查看[Silencio](https://github.com/damianszczepanik/silencio)库，您可以使用它从 JSON 文件中删除或散列节点。您可以决定应该转换哪些节点（您可能只想混淆一些，例如密码）以及应该应用哪些更改（清除内容、哈希或自定义）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-27T08:03:50.620

我建议使用 JSON Web Encryption ( [JWE](https://en.wikipedia.org/wiki/JSON_Web_Encryption) )。

有很多库可以处理它，包括浏览器的web apis 有可以加密的crypto api。

# asp.net-web-api - 使用 ASP.NET Web API OData 和 EntitySetController 创建链接失败

> ID：14570834
> 
> 赞同：1
> 
> 时间：2013-01-28T20:41:09.093
> 
> 标签：asp.net-web-api, odata

我将 ASP.NET Web API OData 与 EntitySetController 一起使用，

试图在两个实体之间创建链接：ProductFamily 和 Product，

OData 行动：

```
public override void CreateLink([FromODataUri] int key, string navigationProperty, [FromBody] Uri link) 
```

阿贾克斯请求：

```
$.ajax({
    url: "api/ProductFamily(1)/$links/Products",
    type: "PUT",
    //data missing for the "[FromBody] Uri link"?? what is the format of the data??
    success: function (result) {
        //do something
    }
}); 
```

发送ajax请求后，成功运行到CreateLink Action，但**link参数始终为null**，

ajax请求中缺少什么样的数据？格式是什么？？

有样品吗？？

***编辑1：应该是这样的？？***

阿贾克斯请求：

```
$.ajax({
    url: "api/ProductFamily(1)/$links/Products",
    type: "PUT",
    data: {"url":"api/Products(5)"}
    success: function (result) {
        //do something
    }
}); 
```

这将导致系统。**InvalidOperationException**：“没有 MediaTypeFormatter 可用于从媒体类型为‘application/json’的内容中读取‘Uri’类型的对象。”

***更新：***

问题解决了。脚步：

1.  [使用每晚 ASP.NET Web 堆栈](http://blogs.msdn.com/b/henrikn/archive/2012/06/01/using-nightly-asp-net-web-stack-nuget-packages-with-vs-2012-rc.aspx)
2.  [通过 3 个简单步骤开始使用 ASP.NET Web API OData](http://blogs.msdn.com/b/webdev/archive/2013/01/29/getting-started-with-asp-net-webapi-odata-in-3-simple-steps.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T01:54:59.207

请求正文应如下所示：

{“网址”：“ [http://www.microsoft.com/](http://www.microsoft.com/) ”}

使用 application/json 内容类型。如果这不起作用，请尝试更新到我们的最新版本。

# java - 解组有问题的文件

> ID：14570835
> 
> 赞同：0
> 
> 时间：2013-01-28T20:41:10.967
> 
> 标签：java, jaxb, unmarshalling

我有这段代码使用 xsd 模板解组文件：

```
String schema = "/META-INF/templates/git60_data_mod1_def.xsd";
isr = new InputStreamReader(GIT60Manager.class.getResourceAsStream(schema));
Unmarshaller unmarshaller = new Unmarshaller(isr, main); 
```

这是 xsd 文件：

```
<xs:annotation>
<xs:documentation xml:lang="en">
  GIT60 schema Mod 1 (Data)
</xs:documentation>
</xs:annotation>

<xs:include id="git60_mod1_def.xsd" schemaLocation="./git60_mod1_def.xsd" />

<xs:element name="mainData" type="GIT60FileMod1Data" jrb:length="100" />

<xs:complexType name="GIT60FileMod1Data">
    <xs:sequence>
        <xs:element name="git60Tax" type="GIT60FileTaxMod1" minOccurs="1" maxOccurs="unbounded"/>
    </xs:sequence>
</xs:complexType> 
```

这是我运行应用程序时的例外：

```
 java.lang.RuntimeException: java.net.MalformedURLException
at it.assist.jrecordbind.DefinitionLoader$1.fatalError(DefinitionLoader.java:92)
at com.sun.xml.xsom.impl.parser.ParserContext$2.fatalError(ParserContext.java:207)
at com.sun.xml.xsom.impl.parser.NGCCRuntimeEx.parseEntity(NGCCRuntimeEx.java:343)
at com.sun.xml.xsom.impl.parser.NGCCRuntimeEx.includeSchema(NGCCRuntimeEx.java:234)
at com.sun.xml.xsom.impl.parser.state.includeDecl.action0(includeDecl.java:42)
at    com.sun.xml.xsom.impl.parser.state.includeDecl.leaveElement(includeDecl.java:114)
at com.sun.xml.xsom.impl.parser.state.NGCCRuntime.endElement(NGCCRuntime.java:275)
at org.xml.sax.helpers.XMLFilterImpl.endElement(XMLFilterImpl.java:546)
at org.apache.xerces.parsers.AbstractSAXParser.endElement(Unknown Source)
at org.apache.xerces.parsers.AbstractXMLDocumentParser.emptyElement(Unknown Source)
at org.apache.xerces.impl.XMLNSDocumentScannerImpl.scanStartElement(Unknown Source)
at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown Source)
at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)
at org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
at org.xml.sax.helpers.XMLFilterImpl.parse(XMLFilterImpl.java:333)
at com.sun.xml.xsom.parser.JAXPParser.parse(JAXPParser.java:115)
at com.sun.xml.xsom.impl.parser.NGCCRuntimeEx.parseEntity(NGCCRuntimeEx.java:337)
at com.sun.xml.xsom.impl.parser.ParserContext.parse(ParserContext.java:124)
at com.sun.xml.xsom.parser.XSOMParser.parse(XSOMParser.java:183)
at it.assist.jrecordbind.DefinitionLoader.findSchema(DefinitionLoader.java:107)
at it.assist.jrecordbind.DefinitionLoader.<init>(DefinitionLoader.java:71)
at it.assist.jrecordbind.AbstractUnMarshaller.<init>(AbstractUnMarshaller.java:53)
at it.assist.jrecordbind.Unmarshaller.<init>(Unmarshaller.java:245)
at it.assist.jrecordbind.Unmarshaller.<init>(Unmarshaller.java:263)
at com.samelan.gitim.core.service.io.account.impl.GIT60Manager.doImportMod1GtFile(GIT60Manager.java:1259)
at com.samelan.gitim.core.service.managers.GtFileProcessorManagerTest.testProcFilesNewTemplateGit60(GtFileProcessorManagerTest.java:717)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:592)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.net.MalformedURLException
at com.sun.xml.xsom.impl.parser.NGCCRuntimeEx.parseEntity(NGCCRuntimeEx.java:341)
... 55 more
Caused by: java.net.MalformedURLException
at java.net.URL.<init>(URL.java:600)
at java.net.URL.<init>(URL.java:463)
at java.net.URL.<init>(URL.java:412)
at org.apache.xerces.impl.XMLEntityManager.setupCurrentEntity(Unknown Source)
at org.apache.xerces.impl.XMLVersionDetector.determineDocVersion(Unknown Source)
at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)
at org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
at org.xml.sax.helpers.XMLFilterImpl.parse(XMLFilterImpl.java:333)
at com.sun.xml.xsom.parser.JAXPParser.parse(JAXPParser.java:115)
at com.sun.xml.xsom.impl.parser.NGCCRuntimeEx.parseEntity(NGCCRuntimeEx.java:337)
... 55 more 
```

任何人都可以帮助我解决这个问题吗？有谁知道是什么问题？非常感谢。

谢谢你 Perception，但如果我按照你说的做，我有这个例外：

```
 java.lang.NullPointerException
at java.io.Reader.<init>(Reader.java:61)
at java.io.InputStreamReader.<init>(InputStreamReader.java:55)
at com.samelan.gitim.core.service.io.account.impl.GIT60Manager.doImportMod1GtFile(GIT60Manager.java:1256)
at com.samelan.gitim.core.service.managers.GtFileProcessorManagerTest.testProcFilesNewTemplateGit60(GtFileProcessorManagerTest.java:717)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:592)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:46:18.717

您已打开架构验证，但未指定有效的架构 URI。我是这样理解的：

```
/META-INF/templates/git60_data_mod1_def.xsd 
```

您正在尝试为架构使用文件资源，您需要使用***有效***的文件 URI 来指示：

```
file:///META-INF/templates/git60_data_mod1_def.xsd 
```

此 URI 需要指定文件资源的*绝对*路径（我假设您实际上没有名为 META-INF 的根目录）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:49:11.867

```
String schema = "/META-INF/templates/git60_data_mod1_def.xsd"; 
```

无法读取

# php - 将变量从 awk 传递到 PHP

> ID：14570844
> 
> 赞同：1
> 
> 时间：2013-01-28T20:41:57.770
> 
> 标签：php, awk

我正在尝试将 awk 命令（从 PHP 调用）中的结果/变量传回 PHP 脚本以进行进一步操作。以下是我的脚本：

```
$cmd = "/usr/bin/awk '{if($1 >= \"$S_Date\" && $1 <= \"$E_Date\"){sum+=$5; row+=1}} END{avg=sum/row;print avg}' data.txt";
$avg = system($cmd);
echo "Avg: $avg\n"; 
```

where`$S_Date`和`$E_Date`是 PHP 变量。我可以从 var 中返回的 awk 获取平均值，`$avg`但是有以下问题。

问题：

1.  我也想避免从 awk 命令本身将 avg 回显到标准输出？
2.  如何从 awk 命令返回/存储多个变量，比如 sum 和 avg？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:48:54.763

您可能想改用[exec](http://us1.php.net/manual/en/function.exec.php)。
第二个参数允许您“捕获”命令的输出。

```
exec($cmd_to_run, $output); 
```

**注意：**如果您只需要最后一行，`$last = exec($cmd_to_run);`就足够了。

# c# - 为什么添加 beforefieldinit 会大大提高泛型类的执行速度？

> ID：14570846
> 
> 赞同：7
> 
> 时间：2013-01-28T20:41:58.997
> 
> 标签：c#, cil, reflection.emit, il

我正在研究代理，对于具有引用类型参数的泛型类，它非常慢。特别是对于泛型方法（大约 400 毫秒，而对于仅返回 null 的普通泛型方法则需要 3200 毫秒）。我决定尝试看看如果我用 C# 重写生成的类会如何执行，它的性能要好得多，与我的非泛型类代码的性能大致相同。

这是我写的 C# 类:: (注意我改变了命名方案但不是很多)::

```
namespace TestData
{
    public class TestClassProxy<pR> : TestClass<pR>
    {
        private InvocationHandler<Func<TestClass<pR>, object>> _0_Test;
        private InvocationHandler<Func<TestClass<pR>, pR, GenericToken, object>> _1_Test;
        private static readonly InvocationHandler[] _proxy_handlers = new InvocationHandler[] { 
            new InvocationHandler<Func<TestClass<pR>, object>>(new Func<TestClass<pR>, object>(TestClassProxy<pR>.s_0_Test)), 
        new GenericInvocationHandler<Func<TestClass<pR>, pR, GenericToken, object>>(typeof(TestClassProxy<pR>), "s_1_Test") };

        public TestClassProxy(InvocationHandler[] handlers)
        {
            if (handlers == null)
            {
                throw new ArgumentNullException("handlers");
            }
            if (handlers.Length != 2)
            {
                throw new ArgumentException("Handlers needs to be an array of 2 parameters.", "handlers");
            }
            this._0_Test = (InvocationHandler<Func<TestClass<pR>, object>>)(handlers[0] ?? _proxy_handlers[0]);
            this._1_Test = (InvocationHandler<Func<TestClass<pR>, pR, GenericToken, object>>)(handlers[1] ?? _proxy_handlers[1]);
        }

        private object __0__Test()
        {
            return base.Test();
        }

        private object __1__Test<T>(pR local1) where T:IConvertible
        {
            return base.Test<T>(local1);
        }

        public static object s_0_Test(TestClass<pR> class1)
        {
            return ((TestClassProxy<pR>)class1).__0__Test();
        }

        public static object s_1_Test<T>(TestClass<pR> class1, pR local1) where T:IConvertible
        {
            return ((TestClassProxy<pR>)class1).__1__Test<T>(local1);
        }

        public override object Test()
        {
            return this._0_Test.Target(this);
        }

        public override object Test<T>(pR local1)
        {
             return this._1_Test.Target(this, local1, GenericToken<T>.Token);
        }
    }
} 
```

这是在发布模式下编译为与我生成的代理相同的 IL 这里是它的代理类::

```
namespace TestData
{
    public class TestClass<R>
    {
        public virtual object Test()
        {
            return default(object);
        }

        public virtual object Test<T>(R r) where T:IConvertible
        {
            return default(object);
        }
    }
} 
```

有一个例外，我没有在生成的类型上设置 beforefieldinit 属性。我只是设置以下属性::public auto ansi

为什么使用 beforefieldinit 让性能提升如此之大？

（唯一的另一个区别是我没有命名我的参数，这在总体方案中并不重要。方法和字段的名称被打乱以避免与实际方法发生冲突。GenericToken 和 InvocationHandlers 是无关紧要的实现细节为了争论.
GenericToken 实际上只是用作类型化数据持有者，因为它允许我向处理程序发送“T”

InvocationHandler 只是委托字段目标的持有者，没有实际的实现细节。

GenericInvocationHandler 使用像 DLR 这样的调用站点技术来根据需要重写委托以处理传递的不同泛型参数）

编辑:: 这是测试工具::

```
private static void RunTests(int count = 1 << 24, bool displayResults = true)
{
    var tests = Array.FindAll(Tests, t => t != null);
    var maxLength = tests.Select(x => GetMethodName(x.Method).Length).Max();

    for (int j = 0; j < tests.Length; j++)
    {
        var action = tests[j];
        Stopwatch sw = Stopwatch.StartNew();
        for (int i = 0; i < count; i++)
        {
            action();
        }
        sw.Stop();
        if (displayResults)
        {
            Console.WriteLine("{2}  {0}: {1}ms", GetMethodName(action.Method).PadRight(maxLength),
                              ((int)sw.ElapsedMilliseconds).ToString(), j);
        }
        GC.Collect();
        GC.WaitForPendingFinalizers();
        GC.Collect();
    }
}

private static string GetMethodName(MethodInfo method)
{
    return method.IsGenericMethod
            ? string.Format(@"{0}<{1}>", method.Name, string.Join<Type>(",", method.GetGenericArguments()))
            : method.Name;
} 
```

在测试中，我执行以下操作：

```
Tests[0] = () => proxiedTestClass.Test();
Tests[1] = () => proxiedTestClass.Test<string>("2");
Tests[2] = () => handClass.Test();
Tests[3] = () => handClass.Test<string>("2");
RunTests(100, false);
RunTests(); 
```

其中 Tests 是一个`Func<object>[20]`，并且`proxiedTestClass`是我的程序集生成的类，并且`handClass`是我手动生成的类。RunTests 被调用了两次，一次是为了“热身”，另一次是运行它并打印到屏幕上。我主要从 Jon Skeet 的帖子中获取此代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T15:55:41.007

如[ECMA-335（CLI 规范）](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-335.pdf)第一部分第 8.9.5 节所述：

> 何时以及什么触发了此类初始化方法的执行的语义如下：
> 
> 1.  一个类型可以有一个类型初始化方法，也可以没有。
> 2.  一个类型可以被指定为它的类型初始化方法有一个宽松的语义（为了下面的方便，我们称之为宽松的语义**BeforeFieldInit**）。
> 3.  如果标记为**BeforeFieldInit**，则该类型的初始化方法在第一次访问为该类型定义的任何静态字段时或之前的某个时间执行。
> 4.  如果未标记**BeforeFieldInit**则该类型的初始化方法在以下位置执行（即，由以下方式触发）：
>     
>     
>     
>     一种。首次访问该类型的任何静态字段，或
>     
>     
>     
>     湾。首次调用该类型的任何静态方法，或
>     
>     
>     
>     C。如果它是值类型，则首次调用该类型的任何实例或虚拟方法，或者
>     
>     
>     
>     d。首次调用该类型的任何构造函数。

此外，正如您从上面迈克尔的代码中看到的那样，`TestClassProxy`只有一个静态字段：`_proxy_handlers`. 请注意，它只使用了两次：

1.  在实例构造函数中
2.  而在静态字段初始化器本身

因此，当`BeforeFieldInit`指定时，类型初始化器将只被调用一次：在实例构造函数中，就在第一次访问`_proxy_handlers`.

但如果`BeforeFieldInit`省略，CLR 将在**每次** `TestClassProxy's`静态方法调用、静态字段访问等之前调用类型初始化器。

`s_0_Test`特别是，每次调用`s_1_Test<T>`静态方法时都会调用类型初始化器。

当然，正如[ECMA-334 (C# Language Specification)](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-334.pdf)第 17.11 节所述：

> 非泛型类的静态构造函数在给定的应用程序域中最多执行一次。对于从类声明（第 25.1.5 节）构造的每个封闭构造类型，泛型类声明的静态构造函数最多执行一次。

但是为了保证这一点，CLR 必须检查（以线程安全的方式）该类是否已经初始化。

这些检查会降低性能。

PS：您可能会感到惊讶，一旦您更改`s_0_Test`并`s_1_Test<T>`成为实例方法，性能问题就会消失。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T16:03:57.333

首先，如果您想了解更多关于. 的信息`beforefieldinit`，请阅读 Jon Skeet 的文章[*C# 和`beforefieldinit`*](http://csharpindepth.com/Articles/General/Beforefieldinit.aspx). 该答案的部分内容基于此，我将在此处重复相关部分。

其次，你的代码做的很少，所以开销会对你的测量产生重大影响。在实际代码中，影响可能要小得多。

第三，你不需要使用 Reflection.Emit 来设置一个类是否有`beforefieldint`. 您可以通过添加静态构造函数（例如`static TestClassProxy() {}`）在 C# 中禁用该标志。

现在，`beforefieldinit`它控制何时调用类型初始化程序（称为方法`.cctor`）。在 C# 术语中，类型初始化程序包含所有静态字段初始化程序和来自静态构造函数的代码（如果有的话）。

如果您不设置该标志，则在创建类的实例或引用类的任何静态成员时将调用类型初始化程序。（取自 C# 规范，这里使用 CLI 规范会更准确，但最终结果是一样的。^*）

这意味着如果没有`beforefieldinit`，编译器在何时调用类型初始化程序方面非常受限，它不能决定更早地调用它，即使这样做会更方便（并导致更快的代码）。

知道了这一点，我们就可以查看您的代码中实际发生的情况。有问题的情况是静态方法，因为这是可能调用类型初始化程序的地方。（实例构造函数是另一个，但你没有测量它。）

我专注于方法`s_1_Test()`。而且因为我实际上不需要它来做任何事情，所以我将它简化（以使生成的本机代码更短）为：

```
public static object s_1_Test<T>(TestClass<pR> class1, pR local1) where T:IConvertible
{
    return null;
} 
```

现在，让我们看看VS中的反汇编（在Release模式下），首先没有静态构造函数，即`beforefieldinit`：

```
00000000  xor         eax,eax
00000002  ret 
```

在这里，结果设置为（[出于性能原因](https://stackoverflow.com/q/1396527/41071)`0`，它以某种模糊的方式完成）并且方法返回，非常简单。

静态构造函数（即没有`beforefieldinit`）会发生什么？

```
00000000  sub         rsp,28h
00000004  mov         rdx,rcx
00000007  xor         ecx,ecx
00000009  call        000000005F8213A0
0000000e  xor         eax,eax
00000010  add         rsp,28h
00000014  ret 
```

这要复杂得多，真正的问题是`call`指令，它可能会调用一个在必要时调用类型初始化程序的函数。

我相信这是两种情况之间性能差异的根源。

之所以需要添加检查，是因为您的类型是通用的，并且您将它与引用类型一起用作类型参数。在这种情况下，您的类的不同泛型版本的 JIT 代码是共享的，但必须为每个泛型版本调用类型初始化程序。将静态方法移至另一种非泛型类型将是解决问题的一种方法。

* * *

^*除非你做一些疯狂的事情，比如在`null`using上调用实例方法`call`（而不是`callvirt`，它会抛出 for `null`）。

# java - 如何在java中创建图像数组？

> ID：14570848
> 
> 赞同：4
> 
> 时间：2013-01-28T20:41:59.570
> 
> 标签：java, arrays

我正在尝试初始化一副卡片，并显示它们（我有 .gif 中的图像）。我遇到的唯一问题是初始化卡组本身。到目前为止，我已经尝试创建四个数组（每套一个）：

```
import java.applet.*;
import java.awt.*;

public class deckOfCards extends Applet
{
    public void init()
    {
        image clubs = new image[13];
        image hearts = new image[13];
        image spades = new image[13];
        image diamonds = new image[13];
    }
} 
```

然后为每件西装做这样的事情：

```
for( int i = 0; i <= 13; i++ )
{
    clubs[i] = getImage( getDocumentBase(), c(i).gif )
} 
```

（卡片文件保存在文件名 c1.gif、c2.gif .....c13.gif 中，每个花色）

我收到一条错误消息，提示找不到符号“图像”，但 java.awt.image 没有创建图像对象和图像方法的类吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T20:45:59.513

`image`不是`AWT`包中的有效类，请将第一个字母大写。

您有一些语法问题：

*   资本`I`金`Image`
*   缺少左侧数组括号
*   循环时不要超出`Image`数组的索引
*   `getImage`通话所需的报价

[Java 命名约定](http://java.about.com/od/javasyntax/a/nameconventions.htm)表明类以大写字母开头，您的类也应如此：

```
public class DeckOfCards extends Applet {

    public void init() {

       Image[] clubs = new Image[13];
       for (int i = 0; i < clubs.length; i++ ) {
            clubs[i] = getImage( getDocumentBase(), "c" + (i + 1) + ".gif");
        }
        ...
    }
} 
```

也是`Applet`博物馆的作品，已被轻量级取代`javax.swing.JApplet`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T20:49:45.193

这就是您使用 ArrayList 容器的方式。在实践中 ArrayList 是.. 一个数组，但更灵活。

```
ArrayList<Image> arrayName = new ArrayList<Image>();
Image imageName = getImage(getCodeBase(),"direction.jpg");
arrayName.add(imageName); 
```

# jquery - 从 farbtastic 颜色选择器获取 HEX 值并将其添加到 html 标签属性

> ID：14570850
> 
> 赞同：0
> 
> 时间：2013-01-28T20:42:03.607
> 
> 标签：jquery, html, attr, color-picker

所以，我想做的是：

我有颜色选择器“farbtastic”，效果很好。稍后在代码中，我有“img”元素，该元素具有来自另一个插件的属性，用于图像处理。我想将 farbtastic HEX 值设置为这个 img 标签的属性。我试过以下：

```
 <script type="text/javascript">
        $(document).ready(function() {
        var picker = $.farbtastic('#picker');
        picker.linkTo(function onColorChange(color) {
        $('filter-tint').attr('data-pb-tint-colour',color)
        });
    });
    </script> 
```

这是我的 img 标签：

```
 <img id="filter-tint" class="filter-tint" src="img/barva.png" data-pb-tint-opacity="1" data-pb-tint-colour="#ffffff"/> 
```

请帮忙，我已经尝试传递这个值好几天了，但没有运气:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T20:46:43.070

您缺少`#`ID 选择器：

```
$('filter-tint').attr('data-pb-tint-colour',color)
// ^---- 
```

# windows - 如何向 CreateFileMapping / OpenFileMapping 提供地址

> ID：14570855
> 
> 赞同：0
> 
> 时间：2013-01-28T20:42:26.470
> 
> 标签：windows, 64-bit, huge-pages

有没有可以用来提供映射地址的函数？

我试图找出一种方法来利用大页面，即使我必须映射小文件。我知道我会浪费内存。或者，我可以使用 VirtualAlloc 来分配一个页面大小的块，然后我可以切块并将多个文件映射到其中。我假设，由于内存映射由虚拟内存子系统支持，因此这是不可能的 - 单个内存页面可能必须由单个文件支持。

我想在我做任何事情之前我会问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:49:52.287

我怀疑这是不可能的，但只是一个想法：

地址分配决定属于`MapViewOfFile`，不属于`CreateFileMapping`。并且`MapViewOfFile`肯定*会*在`NTDLL.DLL`. 你可以弄清楚它调用了*哪个*函数来实际创建映射，谁知道呢——那个函数可能更灵活，并且允许使用`KERNEL32`. （例如，我们知道 PE 文件部分的映射方式是您无法模仿的`MapViewOfFile`）。

# xpath - 使用 text() 检索包含的 xpath 文本

> ID：14570857
> 
> 赞同：32
> 
> 时间：2013-01-28T20:42:26.587
> 
> 标签：xpath

我一直在破解这个几个小时，我就是想不通。使用 XPath 查找文本值很棘手，而且这个问题有太多移动部分。

我有一个带有大表的网页，该表中的一个部分包含分配给特定单元的用户（受让人）列表。几乎总是有多个用户分配给一个单元，我需要确保将特定用户分配给桌子上的任何单元。我几乎所有的选择器都使用了 XPath，而且我已经完成了这个选择器的一半。我似乎无法弄清楚如何在这种情况下使用`contains`with 。`text()`

这是我到目前为止所拥有的：

```
//td[@id='unit']/span [text()='asdfasdfasdfasdfasdf (Primary); asdfasdfasdfasdfasdf, asdfasdfasdfasdf; 456, 3456'; testuser] 
```

上面的 XPath 查询捕获了我正在查看的特定部分中的所有文本，这很棒。但是，我只需要知道 testuser 是否在该部分中。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-01-28T20:49:51.487

`text()`为您提供一组文本节点。我倾向于在 //span//text() 或其他内容的上下文中更多地使用它。

如果您尝试检查元素内的文本是否包含您应该`contains`在元素上使用的内容，而不是`text()`像这样的结果：

```
span[contains(., 'testuser')] 
```

XPath 非常适合上下文。如果您确切知道节点应该具有什么文本，您可以执行以下操作：

```
span[.='full text in this span'] 
```

但是如果你想做一些像正则表达式这样的事情（例如使用 exslt），你需要使用 string() 函数：

```
span[regexp:test(string(.), 'testuser')] 
```

# sql - 多对多关系的主键是否正确规范化？

> ID：14570862
> 
> 赞同：2
> 
> 时间：2013-01-28T20:42:47.167
> 
> 标签：sql, relation, 3nf

我有一个多对多表（TableAB），它只包含一个表 A 的外键和一个表 B 的外键。总感觉我还应该向表本身添加一个主键列，这就是我想要的通常会。但从学术的角度来看，这是否违反了 2nf、3nf、BCNF 规则中的任何一条？它不会添加任何真正的唯一性，并创建一个表，其中我有一个主键和一个单独的复合主键，虽然没有重叠，但是当我的 M2M 表然后被其他表引用时，确实使关系更容易解决，但感兴趣听取学者们的意见。

IE。

表A（援助int PK）

表B（投标整数PK）

表AB（Aid int，Bid int，ABID int PK ??????）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:08:28.637

从 RDBMS 理论的角度来看，您将在 TableAB 上拥有一个复合主键。

例子

```
CREATE TABLE IF NOT EXISTS `TableAB` (
  `A_id` int(11) NOT NULL,
  `B_id` int(11) NOT NULL,
  PRIMARY KEY (`A_id`,`B_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

对单独主键的需求来自与 RDBMS 一起使用的软件的需求。某些 Microsoft 工具不允许更新主键，因此必须删除并添加行来修改它。拥有单独的主键可以更轻松地更新关系。

在按照约定进行编码的世界中，像 CakePhp 或 Rails 这样的框架期望名为 ID 的列作为表的主键。[http://guides.rubyonrails.org/association_basics.html#the-has_and_belongs_to_many-association](http://guides.rubyonrails.org/association_basics.html#the-has_and_belongs_to_many-association)

Yii php 框架允许复合主键，因此我们可以将表定义为

```
$this->createTable('course_student', array(
    'course_id' => 'INT NOT NULL',
    'student_id' => 'INT NOT NULL',
    'PRIMARY KEY (`course_id`,`student_id`)',
        ), 'ENGINE=InnoDB');
$this->addForeignKey("fk_cs_course", "course_student", "course_id", "course", "id", "CASCADE", "RESTRICT");
$this->addForeignKey("fk_cs_student", "course_student", "student_id", "student", "id", "CASCADE", "RESTRICT"); 
```

# matlab - 从matlab中的矩阵中随机选择数字

> ID：14570866
> 
> 赞同：10
> 
> 时间：2013-01-28T20:42:50.537
> 
> 标签：matlab, matrix

如何从下面给定的以下矩阵中随机选择一个数字？

```
 A=[0.06 0.47 0.47] 
```

我只想从上面的矩阵中随机选择一个数字。我在matlab环境中这样做。请帮忙。另外，是否可以假设 matlab 中的变量趋于零，就像我们在极限中所做的那样？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-28T21:02:53.687

如果您的矩阵是`M`然后选择一个具有均匀概率的随机元素，您可以使用[`randi`](http://www.mathworks.com/help/matlab/ref/randi.html)：

```
 M(randi(numel(M))) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-28T21:02:44.120

是的，使用[randi](http://www.mathworks.com/help/matlab/ref/randi.html)：

```
A(randi(numel(A))) 
```

# asp.net-mvc - 在 asp.net MVC web api 中调用自定义函数

> ID：14570867
> 
> 赞同：1
> 
> 时间：2013-01-28T20:42:51.587
> 
> 标签：asp.net-mvc, asp.net-web-api

我的公司控制器中有身份验证功能

```
 [ActionName("Authenticate")]
    [HttpGet]
    public bool Authenticate(Company company)
    {
        if (Uow.Companies.AuthenticateCompany(company))            
            return true;                
        return false;
    } 
```

使用以下 ajax 查询调用

```
$.ajax({ url: "/api/company/Authenticate", type: 'get', data: company }) 
```

公司是一个js对象

```
Company: function (name, phoneNumber, password) {
    this.Name = name;
    this.PhoneNumber = phoneNumber;
    this.password = password;
}

var company = new Company($('#TextBoxCompanyName').val(),'00000000', $('#TextBoxCompanyPassword').val()); 
```

我的api路线如下

```
 config.Routes.MapHttpRoute(
        name: "Action",
        routeTemplate: "api/{controller}/{action}"
    ); 
```

当代码运行时，web api 调用公司控制器中的以下函数

```
 public Company Get(int id)
    {
        return Uow.Companies.GetById(id);
    } 
```

如何调用自定义 get 函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T20:59:23.410

Web.API 尝试按定义顺序匹配路由。

来自[Web API 路由和操作/路由和操作选择](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-and-action-selection)

> 框架尝试将 URI 路径中的段与模板匹配。模板中的文字必须完全匹配。占位符匹配任何值，除非您指定约束。该框架与 URI 的其他部分不匹配，例如主机名或查询参数。**框架选择路由表中与 URI 匹配的第一个路由。**

所以路线的定义顺序很重要。

你需要把你`"Action"` **的**`"DefaultApi"`

```
config.Routes.MapHttpRoute(
        name: "Action",
        routeTemplate: "api/{controller}/{action}"
    );

config.Routes.MapHttpRoute(
                name: "DefaultApi",
                routeTemplate: "api/{controller}/{id}",
                defaults: new { id = RouteParameter.Optional }
    ); 
```

否则，wep.api 会将您的 url 解释`/api/company/Authenticate`为 controller=company 和 id=Authenticate，因此它会路由到您的 Get 操作。

# java - 类文件 javax/transaction/SystemException 中非本机或抽象方法中的缺失代码属性

> ID：14570868
> 
> 赞同：0
> 
> 时间：2013-01-28T20:42:51.397
> 
> 标签：java, maven, jboss, transactions, java-transaction-service

我正在使用构建应用程序`JBoss AS 7.1`并且正在编写测试

```
@Test
    public void testGetLoginUser() throws Exception {
        final MarketCrudService crudService = new MarketCrudService(jpaRule.getEntityManager());
        crudService.create(new Login("user1", "password"));
    } 
```

此测试取决于`@Rule`创建的实例化一个`in-memory derby db`用于写入测试数据的测试
当我运行此测试时，我看到以下错误

```
java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/transaction/SystemException
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
    at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:264)
    at org.jboss.logging.Logger.getMessageLogger(Logger.java:2248)
    at org.jboss.logging.Logger.getMessageLogger(Logger.java:2214)
    at org.hibernate.ejb.Ejb3Configuration.<clinit>(Ejb3Configuration.java:141)
    ... snipped 
```

这发生在行

```
emFactory = Persistence.createEntityManagerFactory(persistenceUnitName, persistenceProperties); 
```

我用谷歌搜索，发现这是因为`jta.jar`丢失了，所以`pom.xml`我添加了

```
 <dependency>
        <groupId>org.jboss.spec.javax.transaction</groupId>
        <artifactId>jboss-transaction-api_1.1_spec</artifactId>
        <version>1.0.1.Final</version>
    </dependency> 
```

再次运行没有解决问题，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:12:13.150

添加这个解决了这个问题

```
 <dependency>
            <groupId>org.jboss.spec.javax.transaction</groupId>
            <artifactId>jboss-transaction-api_1.1_spec</artifactId>
        </dependency> 
```

# git - 如何在 gitweb 中查看除 master 以外的分支？

> ID：14570875
> 
> 赞同：4
> 
> 时间：2013-01-28T20:43:09.540
> 
> 标签：git, gitweb

我希望能够看到我对 master 以外的分支中的文件所做的更改。有没有办法做到这一点？

此外，如果我可以区分多个分支的头部，例如 MyBranch 的 HEAD 和 master 的 HEAD，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:45:27.967

所有的头（分支）和标签都列在项目摘要页面 ( `/?p=yourrepo.git;a=summary`) 上。Gitweb 目前不支持将完整的树与另一个提交进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-16T18:57:05.307

您可以使用 h=refs/heads/XXX 指定分支。例如，要查看项目测试的“开发”分支，请将参数 /?p=testing.git;a=log;h=refs/heads/develop

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T21:45:11.473

为了查看`README.txt`在分支上的最新提交中引入的更改`documentation`：

```
git diff -p -1 documentation -- README.txt 
```

（或`gitk documentation`用于视觉工具）。

`branchA`显示和的头之间的区别`branchB`：

```
git diff branchA branchB 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-25T20:19:09.763

列出（如[ellotheth](https://stackoverflow.com/users/1407067/ellotheth)的[回答](https://stackoverflow.com/a/14571807/6309)中所述）所有分支的项目摘要页面稍微更改了其分支订单管理：

使用 Git 2.34（2021 年第四季度），指向 GitWeb 上分支列表中相同对象的抢七分支以**显示****HEAD early 指向的**对象。

请参阅[Greg Hurrell ( ) 的](https://github.com/wincent)[提交 a45e390](https://github.com/git/git/commit/a45e390ad6ad1f26967a40e7771777f70a77d719)（2021 年 6 月 9日[）](https://github.com/wincent)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 9762646](https://github.com/git/git/commit/9762646ee42b775139b4d519d090808cbdd3bdeb))^(中，2021 年 9 月 10 日）)[`wincent`](https://github.com/wincent)
^([`gitster`](https://github.com/gitster))

> ## [`gitweb`](https://github.com/git/git/commit/a45e390ad6ad1f26967a40e7771777f70a77d719): 使用 HEAD 作为辅助排序键`git_get_heads_list()`
> 
> ^(签字人：Greg Hurrell)

> `gitweb`摘要页面上的“heads”部分按`-committerdate`顺序显示heads（即顶部最近修改的那些），使用隐式`refname`排序后备打破平局等日期参考。
> 
> 这种基于新近度的排序出现在 UI 中的多个位置，例如项目列表、标签列表，甚至是短日志和日志视图。
> 
> 然而，给定两个相同日期的 ref，将 ref 排序在`HEAD`非`HEAD`ref 之前提供比仅按 refname 排序更有用的信号。
> 例如，假设我们有 " `master`" 和 " `trunk`" 都指向同一个提交，但 " `trunk`" was `HEAD`，排序 " `trunk`" 首先有助于将其特殊状态传达为默认分支，如果您克隆 repo，您​​将检查该分支。
> 
> `-HEAD`作为辅助排序键添加到^( ^([man](https://git-scm.com/docs/git-for-each-ref)) ^)调用以提供所需的行为。 最近提交的 refs 将首先出现，但-ness 将用作决胜局。 请注意，这是隐式后备排序键，这意味着两个相同日期的非参考将继续按字典顺序排序，就像现在一样。[`git for-each-ref`](https://github.com/git/git/blob/a45e390ad6ad1f26967a40e7771777f70a77d719/Documentation/git-for-each-ref.txt)`git_get_heads_list()`
> `HEAD`
> `refname``HEAD`

# php - 使用 POST 上传带有 curl 的文件，但模拟 HTML 提交

> ID：14570880
> 
> 赞同：1
> 
> 时间：2013-01-28T20:43:28.510
> 
> 标签：php, c, post, curl, libcurl

我有以下 C 代码：

```
int main(int argc, char* argv[])
{
  CURL *curl;
  CURLcode res;
  struct stat file_info;
  double speed_upload, total_time;
  FILE *fd;

  fd = fopen(argv[1], "rb"); /* open file to upload */
  if(!fd) {

    return 1; /* can't continue */
  }

  /* to get the file size */
  if(fstat(fileno(fd), &file_info) != 0) {

    return 1; /* can't continue */
  }

  curl = curl_easy_init();
  if(curl) {
    /* upload to this place */
    curl_easy_setopt(curl, CURLOPT_URL,
                     "http://www.website.com/index.php");

    /* tell it to "upload" to the URL */
    curl_easy_setopt(curl, CURLOPT_POST, 1L);

    /* set where to read from (on Windows you need to use READFUNCTION too) */
    curl_easy_setopt(curl, CURLOPT_READDATA, fd);

    /* and give the size of the upload (optional) */
    curl_easy_setopt(curl, CURLOPT_INFILESIZE_LARGE,
                     (curl_off_t)file_info.st_size);

    /* enable verbose for easier tracing */
    curl_easy_setopt(curl, CURLOPT_VERBOSE, 1L);

    res = curl_easy_perform(curl);
    /* Check for errors */
    if(res != CURLE_OK) {
      fprintf(stderr, "curl_easy_perform() failed: %s\n",
              curl_easy_strerror(res));

    }
    else {
      /* now extract transfer info */
      curl_easy_getinfo(curl, CURLINFO_SPEED_UPLOAD, &speed_upload);
      curl_easy_getinfo(curl, CURLINFO_TOTAL_TIME, &total_time);

      fprintf(stderr, "Speed: %.3f bytes/sec during %.3f seconds\n",
              speed_upload, total_time);

    }
    /* always cleanup */
    curl_easy_cleanup(curl);
  }
  return 0;
} 
```

和以下 PHP 代码：

```
<?php
header('Access-Control-Allow-Origin: *');

if ($_SERVER['REQUEST_METHOD'] == 'POST' )
{
    if( isset( $_FILES["file_entry"] ) )
    {
    print "file ok";
    }
    else
    {
    print "no file sent";
    }
}
else
{
    print "No post method" . $_SERVER['REQUEST_METHOD'];
}
?> 
```

和html代码：

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title></title>
</head>
<body>
<form action="index.php" enctype="multipart/form-data" method="post">
    <input type="file" name="file_entry"/>
    <input type="submit" value="enviar"/>
</form>
</body>
</html> 
```

如果我尝试通过 html 发送文件，它可以正常工作，但当我使用 C 和 cURL 时就不行了。因为我不知道如何发送“file_entry”。如何像 html 一样使用 C cURL 模拟提交“file_entry”？我尝试使用 CURLOPT_POSTFIELDS，但不起作用。

任何人都可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:52:38.213

这是因为您的服务器端需要一个“multipart/form-data”POST，而您发送一个常规的“url-encoded”。

您应该查看例如[multi-post.c](http://curl.haxx.se/libcurl/c/multi-post.html)示例或[curl_formadd](http://curl.haxx.se/libcurl/c/curl_formadd.html) () 文档。

或者，您更改​​服务器端。

# java - 仅输入一个字符时使用 KeyAdapter 发生的多个 KeyEvent

> ID：14570882
> 
> 赞同：0
> 
> 时间：2013-01-28T20:43:36.023
> 
> 标签：java, eclipse, swt, keylistener

将一个`KeyListener`类添加到一个`org.eclipse.swt.widgets.Text`类。当我输入`'a'`时，我得到了多个 keyEvents。我只期待一个keyEvent。这是为什么。

```
text.addKeyListener(new KeyAdapter() {
    @Override
    public void keyReleased(KeyEvent keyEvent) {
        super.keyReleased(keyEvent);
        logger.log(Level.INFO, "keyEvent-->" + "\n" +  
                            "character :" + keyEvent.character + "\n" + 
                            "code      :" + keyEvent.keyCode + "\n" +
                            "location  :" + keyEvent.keyLocation + "\n" +
                            "stateMask :" + keyEvent.stateMask + "\n" +
                            "time      :" + keyEvent.time + "\n" +
                            "hashCode  :" + keyEvent.hashCode() + "\n" +
                            "data      :" + keyEvent.data + "\n" +
                            "doit      :" + keyEvent.doit + "\n");
    }
}); 
```

输出（在键盘上按一次“a”后）：

```
keyReleased
INFO: keyEvent-->
character :a
code      :97
location  :0
stateMask :0
time      :15626510
hashCode  :692735
data      :null
doit      :true

keyReleased
INFO: keyEvent-->
character :a
code      :97
location  :0
stateMask :0
time      :15626510
hashCode  :32967617
data      :null
doit      :true

keyReleased
INFO: keyEvent-->
character :a
code      :97
location  :0
stateMask :0
time      :15626510
hashCode  :2412752
data      :null
doit      :true

keyReleased
INFO: keyEvent-->
character :a
code      :97
location  :0
stateMask :0
time      :15626510
hashCode  :17374804
data      :null
doit      :true

keyReleased
INFO: keyEvent-->
character :a
code      :97
location  :0
stateMask :0
time      :15626510
hashCode  :27668426
data      :null
doit      :true

keyReleased
INFO: keyEvent-->
character :a
code      :97
location  :0
stateMask :0
time      :15626510
hashCode  :25933099
data      :null
doit      :true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:30:03.550

您可能在该组件的整个生命周期中添加了多个 KeyAdapter - 尝试通过查看`getKeyListeners().length`返回的内容进行检查。

# ruby-on-rails - 使用 AJAX 进行局部分页

> ID：14570883
> 
> 赞同：0
> 
> 时间：2013-01-28T20:43:41.070
> 
> 标签：ruby-on-rails, ajax, view, partial, kaminari

我以前问过这个问题，但我想我已经知道问题可能出在哪里。

我有一个页面，其中包含一个表格 div。我使用 AJAX 调用来获取一个表（不是部分的，它只是另一个 table.html.erb 在其控制器中有自己的方法）。

在这个 table.html.erb 中，我遵循了 Kaminari 的 AJAX 分页指南。如果我已经有一个 AJAX 调用，为什么还要使用另一个 AJAX 调用来分页？

因为，如果我点击分页链接，Kaminari 会将链接分页到整个页面，而不是在 div 内。

因此，为什么我在称为 table div 的 AJAX 中使用部分。但是，我现在无法转到下一页或任何其他页面。在我的控制台中，正在进行正确的查询。当我实际右键单击并在单独的选项卡中打开页面时，我可以更改链接（仅当我禁用应用程序的呈现和引导布局时）。

刚刚提到的一个原因，我怀疑的另一个原因是，由于我在另一个名为 view 的 AJAX 中有一个部分，如果我在单击 Kaminari 的另一个页面后不对表进行 AJAX 调用，则表实际上不会更新.

总结一下：

index.html.erb

```
<div id="table"><div>

<script> $.ajax({
        url: "http://localhost:3000/request/table",
        type: "GET",
        success: function(data) {
            $("#table").html(data);
        }
    });
</script> 
```

显示.html.erb

```
<table id="table">
    <thead>
        <tr>
            <th> Boop! </th>
        </tr>
    </thead>
    <tbody id="items">
    <% render @items %>
    </tbody>
    <div id="paginator">
        <%=  paginate @items, :remote => true %>
        <%= page_entries_info @items, :remote => true %>
    </div>
 </table>

<script>
    $('#analytics').html('<%= escape_javascript render(@items) %>');
    $('#paginator').html('<%= escape_javascript(paginate(@items, :remote => true).to_s) %>');
</script> 
```

部分：_item.html.erb

```
<tr>
<td> item.name </td>
<td> item.date </td>
</tr> 
```

总之，

我可以在单独的选项卡中打开分页链接（1、2、3、... Next、Previous）或作为整页 URL。我无法通过单击分页链接来更新表格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:22:58.073

When you right-click and open the links, it's requesting a "html" response.

When you click on :remote => true links, it requests a "js" response....

You will need to create a (I assume it's "index" action?) index.js.erb view with the Javascript to "update" the #table with the new data.

# javascript - 如何在 JavaScript 中用“^”（插入符号）编写数学公式？

> ID：14570889
> 
> 赞同：2
> 
> 时间：2013-01-28T20:44:05.617
> 
> 标签：javascript, math, formula

我需要一些帮助如何在 javascript 中制作这个数学公式。我尝试过搜索，但找不到真正的原因，我什至不知道 ^ 用英语叫什么。

提前致谢

```
Math.floor(20*(1.1^(x-10))); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T20:45:55.560

```
Math.floor(20*(Math.pow(1.1, (x-10)))); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T20:46:42.953

`^`是按位运算`XOR`符 - 不是你想要的。使用`Math.pow`求幂函数：

```
Math.floor( 20 * (Math.pow(1.1, x - 10)) ); 
```

在函数中设置它，以便您可以使用`x`它可能是任何值：

```
var eq = function(x) {
    return Math.floor( 20 * (Math.pow(1.1, x - 10)) );
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T20:45:56.500

[`Math.pow()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/pow)就是你要找的。

`^`，在其他语言中被称为幂或指数运算符，但在 Javascript 中，它用于不同的目的，它是按位 XOR 运算符。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-28T20:46:03.897

```
Math.floor(20*(Math.pow(1.1, x - 10))); 
```

# datagrid - 在事件中使用 JsonStore 更新 Gridx？

> ID：14570892
> 
> 赞同：1
> 
> 时间：2013-01-28T20:44:25.870
> 
> 标签：datagrid, dojo, jsonstore, dijit.tree, dojo.gridx

我是 Web UI、Dojo、Java 等的新手。如果您指的是任何高级主题，请提供一些阅读参考。我会帮你的。

语境：

1.  我有使用**JsonStore的****Gridx**设计，它采用目标 + id 作为 URL。使用固定的“id”网格可以很好地加载。

***   我有**动态树**。延迟加载等工作正常。** 

 **客观的：

基于 Tree 中给定节点的单击（或 dblclick）事件，我必须使用数据加载 Gridx。因此，如果单击树节点 "id":7，则应获取 JsonStore: /target/7 并将其加载到 Gridx 中。

问题：

1.  你可以猜到，一开始没有有效的“id”属性来填写 JsonStore。在树的单击事件处理程序中，我将在用户单击时获取此值。因此，不能在“就绪”状态下调用 gridx.startup()。尽管我已将小部件“放置”在“就绪”状态。

2.  因此，我有以下片段要处理，<

* * *

```
 // this function is called from tree event handler
function LatestTabGridxLoad( id ) {
    console.log( "ID %s fetched.", id );
    LatestTabGridxStore.idProperty = id;
    LatestTabGridx.startup();
    LatestTabGridx.body.refresh();
}

ready(function()
{
    TabLatestAssetTree.startup();
    LatestTabGridx.placeAt( "ReportMiddleTabLatestCenterContainer" );
} 
```

现在，麻烦的是，在第一次加载时，JsonStore GET 单独使用 /target/ 触发，没有任何“id”，没有任何用户点击。因此，服务器以 405 响应。随后，当用户单击时，没有“id”的相同 HTTP GET 再次导致 HTTP 405。我无法以某种方式将“id”提供给 GET URL。我检查了 JSON，它的形状很完美，因为它在独立表中工作，这是声明性（ly）定义的。

请建议我通过其“id”将树节点链接到 Gridx 的方法。还建议，如果我采取的方法是解决这个问题的正确方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-03T17:02:14.260

对不起，对问题的误解。我认为这是关于 gridx 树，但它是关于由另一个小部件控制的常规 gridx。

问题出在这一行：

console.log("已获取 ID %s。", id ); LatestTabGridxStore.idProperty = id;

“idProperty”是存储 ID 的 JSON 属性的名称。这不会随着每次选择而改变。如果未设置，JsonStore 将假定它为 'id'。您打算做的是修改商店的目标属性以包含 ID。这可以直接完成，看起来像下面这样（细节是特定于应用程序的）

LatestTabGridxStore.target = (someURL) + '/' + id;

之后，需要使用新的 store 设置替换 gridx 的内容。有几种方法可以做到这一点，最简单的方法是销毁当前的 gridx 实例并将其替换为另一个使用更改后的存储的实例。**

# uml - 读取关联关系

> ID：14570896
> 
> 赞同：4
> 
> 时间：2013-01-28T20:44:36.703
> 
> 标签：uml, class-diagram, relationships

我将[图示的关系](http://postimage.org/image/t7xfk2myj/)解读为：A 类与 B 类关联

那么，是什么意思：

1) +class B 在关联结束时

2)0..1

现在，我如何阅读这种关系？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T21:18:55.460

完全同意@Wolfgang Fahl 和@Idan Arye

这里做一些阐述

1）您的问题涉及协会的结束，在您的情况下

*可见性*(+) 后跟*角色名称*（B 类）

> 关联端指定关系一端的对象所执行的角色。关系的每一端都具有指定关联端的角色、其多重性、可见性、可导航性和约束的属性。

2）更多参与，看下面的类图：

![在此处输入图像描述](../Images/57e1394fc0968e8c52a1e92d610a3400.png)

客户可能有很多预订

但每个预订都归一位客户所有

希望这对你有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T20:50:23.880

2) - 对于 A 的每个实例，可以有 0 个或 1 个 B 实例与之关联。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T22:09:38.583

+ 表示角色的可见性。“+”是公开的。私人将显示为“-”。角色的名称是classB，它是角色所属的小写类的名称。

# java - 如何在某个时刻强制/确保 Java 热点 JIT 编译

> ID：14570899
> 
> 赞同：4
> 
> 时间：2013-01-28T20:44:43.513
> 
> 标签：java, performance, jvm-hotspot

我目前感兴趣的问题是分析/优化一些代码。使用 Java 进行分析的一般建议是“运行”、“等待热点 JIT 编译器完成其工作”、“重复测试”......

所以问题是

*   我应该等待热点启动并完成其工作多长时间？
*   当 CPU 相当饱和时（由其他线程），JIT 会运行吗？- 在现实生活中可能会发生该进程不断将 CPU 加载到 100%。
*   需要执行多少次相同的代码来识别“热点”？
*   是否有可能以某种方式神奇地（可能使用 Oracle JVM 的一些专有 API）来触发某些类的 JIT 编译？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:27:52.967

> 我应该等待热点启动并完成其工作多长时间？

大约 10,000 次调用/迭代和几毫秒。

> 当 CPU 相当饱和时（由其他线程），JIT 会运行吗？- 在现实生活中可能会发生该进程不断将 CPU 加载到 100%。

是的，这可能需要更长的时间，但是以 100% 的 CPU 执行测试通常是一个好主意，因为结果不太可能代表您在生产中所做的事情。

> 需要执行多少次相同的代码来识别“热点”？

我会等到代码在可能的情况下预热。真实的测试数据、高 CPU 利用率的几秒钟和一个体面的分析器通常就足够了。

> 是否有可能以某种方式神奇地（可能使用 Oracle JVM 的一些专有 API）来触发某些类的 JIT 编译？

除了运行它足够的次数之外。过早编译类会导致次优代码。代码根据其使用方式进行了优化。JRockit（也归 Oracle 所有）拥有/拥有这样的功能。

# python - 平面 HTML 页面的搜索索引

> ID：14570901
> 
> 赞同：1
> 
> 时间：2013-01-28T20:44:49.863
> 
> 标签：python, html, search, indexing, django-flatpages

我希望将搜索功能添加到现有的完全静态网站中。很可能，新的搜索功能本身需要是动态的，因为搜索索引需要定期更新（当人们对静态内容进行更改时），并且搜索结果需要在用户与之交互时动态生成. 我希望使用 Python 添加此功能，因为这是我的首选语言，尽管我对想法持开放态度。

在这种情况下，Google Web Search API 将不起作用，因为被索引的内容位于专用网络上。Django haystack 不适用于这种情况，因为这需要将内容存储在 Django 模型中。一个名为 mnoGoSearch 的工具可能是一种选择，因为我认为它可以像谷歌那样爬取网站，但我不确定该项目的活跃程度；项目网站似乎有点过时了。

我对使用 Solr、ElasticSearch 或 Whoosh 等工具感到好奇，尽管我相信这些工具只是索引引擎，不处理搜索内容的解析。有没有人对如何索引静态 html 内容以作为一组搜索结果进行检索有任何建议？感谢您的阅读和您的任何反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:49:16.823

使用 Solr，您将编写代码来检索要索引的内容，从每个项目中解析出目标部分，然后将其发送到 Solr 进行索引。

然后，您将与 Solr 进行交互以进行搜索，并让它返回整个索引文档的 ID 或有关原始索引内容的一些其他标识信息，使用该信息向用户显示结果。

# sql - 使用 SQL 透视数据

> ID：14570905
> 
> 赞同：0
> 
> 时间：2013-01-28T20:44:57.233
> 
> 标签：sql, plsql, pivot

我是 SQL 新手，我想知道如何旋转一个表，例如：

```
Col1 Col2 Col3
1     a    w
2     a    x 
1     b    y
2     b    z 
```

进入

```
Col1 a b
1    w y
2    x z 
```

我在玩，`GROUP BY`但我似乎无法将唯一的行变成列

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T20:50:59.753

这可以使用带有`CASE`表达式的聚合函数来完成：

```
select col1,
  max(case when col2 = 'a' then col3 end) a,
  max(case when col2 = 'b' then col3 end) b
from yourtable
group by col1 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!4/69357/1)

如果您正在使用带有`PIVOT`函数的 RDBMS（SQL Server 2005+ / Oracle 11g+），那么您的查询将与此类似（*注意：以下 Oracle 语法*）：

```
select *
from
(
  select col1, col2, col3
  from yourtable
)
pivot
(
  max(col3)
  for col2 in ('a', 'b')
) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!4/69357/4)

最后一种方法是在同一个表上使用多个连接：

```
select t1.col1, 
  t1.col3 a, 
  t2.col3 b
from yourtable t1
left join yourtable t2
  on t1.col1 = t2.col1
  and t2.col2 = 'b'
where t1.col2 = 'a' 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!4/69357/9)

都给出结果：

```
| COL1 | 'A' | 'B' |
--------------------
|    1 |   w |   y |
|    2 |   x |   z | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T20:53:45.167

如果您要求 Col2 中的不同值可以在不强制更改查询定义的情况下进行更改，您可能正在寻找像[SQL Analysis Services这样的](http://en.wikipedia.org/wiki/Microsoft_Analysis_Services)[OLAP](http://en.wikipedia.org/wiki/OLAP_cube)结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T21:09:46.587

你应该尝试类似的东西

```
select * from
(select Col1, Col2, Col3 from TableName) 
pivot xml (max(Col3)
for Col2 in (any) ) 
```

我在手机上，所以我无法测试它现在是否正常工作。

# sql - SQL 列/行分组

> ID：14570906
> 
> 赞同：3
> 
> 时间：2013-01-28T20:45:01.020
> 
> 标签：sql

我是 SQL 新手。我正在寻找一个简单的 SQL 解决方案来组合行/列，其列包含相同的数据，在本例中为邮政编码。例如，数据如下所示：

```
州、县、市、邮编、计数

"CA","阿拉米达","海沃德","94541",5371
"CA","阿拉米达","海沃德","94542",2209
"CA","阿拉米达","海沃德","94544",7179
"CA","阿拉米达","海沃德","94545",4209
"CA","阿拉米达","卡斯特罗谷","94546",7213
"CA","阿拉米达","海沃德","94546",37
"CA","阿拉米达","LIVERMORE","94550",9809
"CA","阿拉米达","LIVERMORE","94551",6558
"加州","阿拉米达","卡斯特罗谷","94552",3121
"CA","阿拉米达","海沃德","94552",12
"CA","阿拉米达","弗里蒙特","94555",5392
```

我希望最终的数据看起来像这样：

```
州、县、市、邮编、计数

"CA","阿拉米达","海沃德","94541",5371
"CA","阿拉米达","海沃德","94542",2209
"CA","阿拉米达","海沃德","94544",7179
"CA","阿拉米达","海沃德","94545",4209
"CA","ALAMEDA","CASTRO VALLEY / HAYWARD","94546",7250
"CA","阿拉米达","LIVERMORE","94550",9809
"CA","阿拉米达","LIVERMORE","94551",6558
"CA","阿拉米达","CASTRO VALLEY HAYWARD","94552",3133
"CA","阿拉米达","弗里蒙特","94555",5392
```

您可以看到两行中的数据已被合并或求和。对于包含完全相同邮政编码的行，城市名称（两者）出现在城市列中，并且计数是每行计数的总和。

有没有办法使用 SQL 来做到这一点？即使它需要两个不同的 SQL 语句也没关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T21:00:34.250

假设使用 SQL Server，您可以使用它`FOR XML`来获得您想要的结果。

```
select distinct t.state,t.county,t.zip,t2.sumcount,
STUFF(
        (
            SELECT '/' + city AS [text()]
            FROM mytable t3
            WHERE t.zip = t3.zip
            FOR XML PATH('')
        ), 1, 1, '') AS ColList
from mytable t 
  join (select zip, sum(count) as sumcount
       from mytable
       group by zip) t2 on t.zip=t2.zip 
```

还有一些[SQL Fiddle](http://sqlfiddle.com/#!3/f8ac2/1)。

如果您使用的是 MySQL，请查看 using `GROUP_CONCAT`：

```
select distinct t.state,t.county,t.zip,t2.sumcount,
GROUP_CONCAT(t.city) as cities
from mytable t 
  join (select zip, sum(count) as sumcount
       from mytable
       group by zip) t2 on t.zip=t2.zip
GROUP BY t.state,t.county,t.zip,t2.sumcount 
```

还有更多[小提琴](http://sqlfiddle.com/#!2/f8ac2/2)。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:10:25.460

我调整了 sgeddes 的出色答案以实际获得计数并避免重复条目，并添加了一个支持脚本，以便您对其进行测试。这确实假设 SQL Server。

```
IF EXISTS(SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'MYTABLE') BEGIN
  drop table MYTABLE;
END;
go

create table MYTABLE
(
  state nvarchar(2)
 ,county nvarchar(100)
 ,city nvarchar(100)
 ,zip nvarchar(10)
)
go

insert into MYTABLE(state,county,city,zip) values('CA','ALAMEDA','HAYWARD','94541');
insert into MYTABLE(state,county,city,zip) values('CA','ALAMEDA','HAYWARD','94541');
insert into MYTABLE(state,county,city,zip) values('CA','ALAMEDA','HAYWARD','94544');
insert into MYTABLE(state,county,city,zip) values('CA','ALAMEDA','HAYWARD','94545');
insert into MYTABLE(state,county,city,zip) values('CA','ALAMEDA','CASTRO VALLEY','94546');
insert into MYTABLE(state,county,city,zip) values('CA','ALAMEDA','CASTRO VALLEY','94546');
insert into MYTABLE(state,county,city,zip) values('CA','ALAMEDA','CASTRO VALLEY','94546');
insert into MYTABLE(state,county,city,zip) values('CA','ALAMEDA','CASTRO VALLEY','94546');
insert into MYTABLE(state,county,city,zip) values('CA','ALAMEDA','CASTRO VALLEY','94546');
insert into MYTABLE(state,county,city,zip) values('CA','ALAMEDA','HAYWARD','94546');
insert into MYTABLE(state,county,city,zip) values('CA','ALAMEDA','HAYWARD','94546');
insert into MYTABLE(state,county,city,zip) values('CA','ALAMEDA','HAYWARD','94546');
insert into MYTABLE(state,county,city,zip) values('CA','ALAMEDA','HAYWARD','94546');
insert into MYTABLE(state,county,city,zip) values('CA','ALAMEDA','LIVERMORE','94550');
insert into MYTABLE(state,county,city,zip) values('CA','ALAMEDA','LIVERMORE','94551');
insert into MYTABLE(state,county,city,zip) values('CA','ALAMEDA','CASTRO VALLEY','94552');
insert into MYTABLE(state,county,city,zip) values('CA','ALAMEDA','HAYWARD','94552');
insert into MYTABLE(state,county,city,zip) values('CA','ALAMEDA','FREMONT','94555');

select distinct
  t.state
 ,t.county
 ,t.zip
 ,t2.sumcount
 ,STUFF((
       SELECT distinct '/' + city AS [text()]
       FROM mytable t3
       WHERE t.zip = t3.zip
       FOR XML PATH('')
       ), 1, 1, '') AS ColList
from
  mytable t 
  inner join
  (
  select zip, sum(count) as sumcount
  from
    (
    select zip,count(*) as count
    from mytable
    group by zip
    ) x
  group by zip
  ) t2
  on t.zip=t2.zip 
```

输出如下所示：

```
state   county  zip sumcount    ColList
CA  ALAMEDA 94541   2   HAYWARD
CA  ALAMEDA 94544   1   HAYWARD
CA  ALAMEDA 94545   1   HAYWARD
CA  ALAMEDA 94546   9   CASTRO VALLEY/HAYWARD
CA  ALAMEDA 94550   1   LIVERMORE
CA  ALAMEDA 94551   1   LIVERMORE
CA  ALAMEDA 94552   2   CASTRO VALLEY/HAYWARD
CA  ALAMEDA 94555   1   FREMONT 
```

# gwt - 如何在 GWT 中放置我的面板和样式化我的页面

> ID：14570909
> 
> 赞同：0
> 
> 时间：2013-01-28T20:45:19.097
> 
> 标签：gwt, styling, uibinder

我正在开发一个 GWT 网站。我已经完成了基本的实现部分，现在我正处于我必须对我的页面进行样式化的阶段。我在这部分面临一些障碍 -

a) 我不确定如何在屏幕上放置各种面板。假设我有两个垂直面板，我希望它们能够覆盖 100% 的空间（第一个覆盖 70%，第二个覆盖剩余的 30%）。我该怎么做呢？

b) 我正在使用 UiBinder。所有这些都应该放在 UibInder xml 中吗？或者这应该是我的 CSS 的一部分。

c）在互联网上做这些事情有不同的黑客行为。我有兴趣知道的是最好和最干净的方法。

我知道我的问题含糊不清，但我正在寻找一些链接、教程，甚至是一些可以指导我完成此操作的示例代码。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:41:09.060

最好的方法是查看谷歌的[MVP](https://developers.google.com/web-toolkit/articles/mvp-architecture)教程。

您的所有问题都会得到解答，并且您具有良好的基础知识。

# .net - 名称空间的 WSDL 仍在使用“tempuri.org”

> ID：14570911
> 
> 赞同：1
> 
> 时间：2013-01-28T20:45:21.260
> 
> 标签：.net, web-services, namespaces, wsdl, asmx

我们正在将我们的站点从 SP2007 迁移到 SP2010。我们的解决方案中包含一个 Web 服务，它包含在一个 .ASMX 文件中。我知道我们应该使用 WCF，但是我们没有时间将这个 Web 服务转换为使用它，而且这个项目是从该公司的一位前开发人员那里继承的，所以我们仍在尝试理解这个代码的架构。

我们遇到的问题是，当我们调用服务时收到警告，说明“此 Web 服务正在使用[http://tempuri.org/](http://tempuri.org/)作为其默认命名空间”。

![调用 Web 服务时显示错误的屏幕截图](../Images/2007ab9e000a803b0d1d41dbf9189034.png)

我们已经在 Web 服务的定义中更改了命名空间属性，如下所示：

```
[WebService(Namespace = "http://localhost")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[ScriptService]
public class searchService : WebService
{
    [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public resultWrapper search(string query)
    {
        ....
    }
} 
```

但是，当我们查看 Web 服务的 WSDL 时，我们会得到以下信息：

```
<wsdl:definitions targetNamespace="http://tempuri.org"><wsdl:types/><wsdl:service 
name="search"/></wsdl:definitions> 
```

我们已经撤回了原始解决方案，执行了“干净的解决方案”操作并重新部署了解决方案，但到目前为止没有任何效果。我们不知道我们需要做什么来强制 WSDL 根据我们在 Web 服务定义中提供的名称空间进行自我更新，或者如果有其他地方我们需要修改 WSDL 信息更新的设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:29:39.317

所以我们团队的另一位开发人员已经解决了这个问题。

事实证明，除了更新 .asmx.cs 文件中的命名空间之外，还需要更新 .asmx 页面中的 codeBehind 和 class 属性。

基本上，codeBehind 属性需要指向我们的 .asmx.cs 文件，而 Class 属性需要正确匹配我们正在使用的命名空间和类。它引发错误，因为它指向 SharePoint 默认命名空间和类。

# c++ - 尝试从 dll 调用外部“C”函数的链接器错误

> ID：14570913
> 
> 赞同：0
> 
> 时间：2013-01-28T20:45:38.803
> 
> 标签：c++, dll, linker, c++-cli

我正在尝试在 C++/CLI .dll 项目中使用来自本机 .dll 项目的 C++ 类。视觉工作室 2010，.NET 框架 3.5。到目前为止，这就是我所拥有的：

```
// This is a common macro:
#ifdef ISDLL
#define DLL __declspec(dllexport)
#else
#define DLL __declspec(dllimport)
#endif

NativeProject:
   //INativeType.h: 
   class DLL INativeType {
       public:
           virtual void Foo() = 0;
   };

    //NativeType.h: 
    class DLL NativeType : public INativeType {
        public:
            virtual void Foo(); 
    };

    extern "C" DLL INativeType CreateNativeType();

    //NativeType.cpp: 
    void NativeType::Foo() {} 
    extern "C" DLL INativeType* CreateNativeType() { 
        return new NativeType(); 
    }

C++/CLI Project:
    // Wrapper.h:
    #include "INativeType.h"
    ref class Wrapper {
        INativeType* m_nativeType;
    };

    // Wrapper.cpp:
    #include "Wrapper.h"
    #include "NativeType.h"
    // in some method:
        m_nativeType = CreateNativeType(); 
```

这给了我以下链接器错误：

```
error LNK2028: unresolved token (...) "extern "C" class INativeType * __stdcall CreateNativeType(void)"" ... in Wrapper.obj 
```

此外，虽然函数在 NativeProject.dll 中正确导出，但正如我使用 DependencyWalker 验证的那样，链接器也给出了以下警告：

```
warning LNK4199: /DELAYLOAD:NativeProject.dll ignored; no imports found from NativeProject.dll 
```

C++/CLI 项目配置为延迟加载 NativeProject.dll，并且还在其链接器选项中包含 NativeProject.lib。此时我不知道如何诊断此链接器错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:10:00.920

为什么不让 C++/CLI 项目直接实例化类而不是使用工厂方法？

除此之外，看起来您正在重新发明 COM（通过接口使用对象）。我只是实例化成熟的 C++ 类，或者，如果你真的需要它，使用成熟的 COM。

**编辑：**确保工厂方法的调用约定在客户端和 DLL 中是相同的。

# matlab - Matlab中的虚拟数据生成？

> ID：14570916
> 
> 赞同：-3
> 
> 时间：2013-01-28T20:45:44.603
> 
> 标签：matlab, data-structures, dummy-data

我需要一些虚拟数据到诸如 <64x64 double> 之类的结构中。我能够获得 <1x64 double>`1:64`但如何`<64x64 double>`在 Matlab 中获得更多维度？我知道我可以做到这一点，`[1 2 3 4 ... 64; 1 2 3 ...64; ...; 1 2 3 ... 64]`但我确信必须有一些现成的命令可以使用任意虚拟数据快速执行此操作。我也在寻找其他虚拟数据生成命令。例如，如何验证数据结构？寻找名称/值/等属性的工作区窗口的假定方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T20:51:30.427

创建一个 64x64 全零：

```
 a = zeros( 64 ); 
```

所有的：

```
 a = ones( 64 ); 
```

随机数：

```
 a = rand( 64 ); 
```

1:64^2:

```
 a = reshape( 1 : (64^2), 64, [] ); 
```

# heuristics - 推送重新标记间隙启发式

> ID：14570918
> 
> 赞同：1
> 
> 时间：2013-01-28T20:45:53.903
> 
> 标签：heuristics, push-relabel, gaps-in-data

我不明白如何通过推送重新标记来实现间隙启发式。维基是这样描述的：

“在间隙重新标记启发式中，我们维护一个大小为 n 的数组 A，在 A[i] 中保存每个标签的节点数（最多 n）。如果找到标签 d，使得 A[d] = 0，那么所有标签 > d 的节点都被重新标记为标签 n。”

使用间隙启发式。如果有一个'k'使得没有节点height（u）=k，您可以为除source之外的所有节点设置height（u）= max（height（u），height（source）+1），其中height (u) >k。这是因为任何这样的“k”都表示图中的最小切割，并且不会有更多的流量从节点 S={u where height(u) > k} 流向 T={v, where height(v) 中的节点0。但是 height(u) > height(v)+1 与 height(u) > k 和 height(v) < k 相矛盾。

有人可以用伪代码向我解释如何将间隙启发式添加到 FIFO 推送重新标签中，如 wiki 的示例代码中所示？

谢谢，文斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-16T13:36:13.703

可能有点晚了，但这里是斯坦福大学笔记本的链接，您可以在其中找到使用 C 中的 Gap Heuristic 的推送重新标记最大流量。我希望它对您有所帮助。

[http://www.stanford.edu/~liszt90/acm/notebook.html#file3](http://www.stanford.edu/~liszt90/acm/notebook.html#file3)

# sql - 计算列规范 - 最小值？

> ID：14570923
> 
> 赞同：0
> 
> 时间：2013-01-28T20:46:03.647
> 
> 标签：sql, sql-server, aggregate, minimum

我在 SQL Server 中有一个表，并且有一列我想从其他三列（Vendor1、Vendor2 和 Vendor3）中计算最小值。我已经弄清楚如何对这些值求和，但不知道如何找到最小值 - 我不断收到一个错误，即聚合可能不会出现在计算列中。有没有一种简单的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:56:05.377

您可以使用`CASE`表达式

```
CREATE TABLE T
  (
     Vendor1 INT,
     Vendor2 INT,
     Vendor3 INT,
     MinVendor AS CASE
          WHEN Vendor1 < Vendor2
               AND Vendor1 < Vendor3 THEN Vendor1
          WHEN Vendor2 < Vendor3 THEN Vendor2
          ELSE Vendor3
        END
  ) 
```

但有列`Vendor1 - 3`可能表明您的表不是[第一范式](http://en.wikipedia.org/wiki/First_normal_form)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T21:08:33.780

试试这个：

```
CREATE FUNCTION dbo.MinOf3(@a int, @b int, @c int)
RETURNS INT
AS
BEGIN
 RETURN (SELECT MIN(a) FROM (
                            SELECT @a a UNION ALL
                            SELECT @b  UNION ALL
                            SELECT @c
                            ) T(a)
         )
END
GO

CREATE TABLE T(a1 int, a2 int, a3 int, a4 as dbo.MinOf3(a1, a2, a3)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T21:12:12.143

MIN is as it says an aggreagate. It finds the minimum value of a column across all rows for a single column. It sounds like what you are trying to do is find the minimum in each row for across three columns. SQL does not have a built in function to do that, but it can be done with a simple CASE expression as Martin SMith has already shown.

You may also want to consider using a View rather than a Computed Column, which would allow you to do it this way as well.

```
SELECT     OtherColumn,
                          (SELECT     MIN(Vendor) AS Expr1
                            FROM          (SELECT     Vendor1 AS Vendor
                                                    UNION ALL
                                                    SELECT     Vendor2
                                                    UNION ALL
                                                    SELECT     Vendor3)) AS VendorMimum
FROM         Vendors 
```

# android - 使用 Renderscript 的示例应用程序

> ID：14570928
> 
> 赞同：-1
> 
> 时间：2013-01-28T20:46:22.833
> 
> 标签：android, renderscript

我想了解更多关于 Renderscript 的信息。有哪些使用 Renderscript 的应用程序？我想在市场上看到真正的应用程序，而不是一些教程示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-18T08:13:07.730

您可以在 Android-L 源代码中签出 ImageProcessingJB 应用程序。它的：

*   渲染脚本应用
*   开源，您可以玩转、进行更改、在本地构建应用程序并在设备上运行它。
*   涵盖了 renderscript 提供的大部分 Api。

PS：源码可以在`frameworks/rs/java/tests/ImageProcessing_jb`Android-L源码树的文件夹下找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T06:58:02.637

到目前为止我知道是动态壁纸，谷歌声称有书和 youtube，但我没有在 youtube 中找到脚本代码

# youtube - Youtube 搜索结果作为播放列表，需要建议

> ID：14570933
> 
> 赞同：0
> 
> 时间：2013-01-28T20:46:49.870
> 
> 标签：youtube, wordpress, youtube-api, youtube-javascript-api

> 大家好，这是我第一次在这个很棒的社区上发帖，所以请多多包涵。

我正在使用可以将*Youtube 搜索结果*显示到*视频播放列表中的 Wordpress 插件。*

**我的设置是：**

*   关键词
*   作者
*   内容 - 渠道/关键字

* * *

**我的第一个方法是这样的：**

[以此api为参考](https://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters#formatsp)，

搜索关键字 > 按作者显示相关结果为播放列表

*我怀疑这是否可行，编码 30%

*我不确定在哪里可以使用我的*内容设置*

* * *

但是当我的编码正在进行时，我最近碰到了[一篇文章](https://developers.google.com/youtube/2.0/developers_guide_protocol_playlists#Retrieving_playlists)说 Youtube Search is differentrent on Searching a Youtube Playlist

* * *

> 现在我无法继续我的编码，因为我不确定我是否做得对。你能给我一些关于这种情况的建议或给我一些类似的项目/例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:08:48.530

您无需为此编写任何 YouTube 数据 API 代码；它是 YouTube 播放器的内置功能。

[这篇博](http://apiblog.youtube.com/2012/03/new-player-options-for-lists-of-videos.html)文有一个加载列表播放器的示例，该播放器从最近上传的频道中获取其内容。你可以通过设置来做类似的事情，你想要搜索的任何字符串`listType=search&list=SEARCH_TERM`在哪里（确保 URL 转义它）。[您可以在文档](https://developers.google.com/youtube/iframe_api_reference#loadPlaylistObj)`SEARCH_TERM`中阅读更多内容。

# c++ - C++ 标准库可移植性

> ID：14570935
> 
> 赞同：8
> 
> 时间：2013-01-28T20:46:55.963
> 
> 标签：c++, c++11, stl, g++, portability

我从事大规模、多平台、实时网络应用程序的工作。我从事的项目通常缺乏对容器或标准库的任何真正使用，没有智能指针或任何“现代”C++ 语言特性。许多原始动态分配的数组很常见。

我非常想开始使用标准库和一些 C++11 规范，但是，也有很多人反对我的项目，因为“STL / C++11 不那么可移植，我们冒险使用它”。我们确实在各种嵌入式系统以及成熟的 Ubuntu/Windows/Mac OS 系统上运行软件。

所以，对于我的问题；与标准库和 C++11 相关的可移植性的实际问题是什么？这只是让 g++ 超过某个版本的情况吗？有没有不支持的平台？是否需要编译库，如果需要，它们是否难以获取/编译？有没有人遇到过被非便携式纯 C++ 烧毁的严重问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T20:50:24.750

对于 Visual C++ 2012、gcc >= 4.7 和 Clang >= 3.1，新 C++11 标准的库支持非常完整，除了一些并发内容。编译器对所有单个语言功能的支持是另一回事。有关受支持的 C++11 功能的最新概述，请参阅此[链接。](http://wiki.apache.org/stdcxx/C++0xCompilerSupport)

对于嵌入式/实时环境中的 C++ 的深入分析，Scott Meyers 的[演示材料](http://www.artima.com/shop/effective_cpp_in_an_embedded_environment)非常棒。它讨论了虚拟功能、异常处理和模板的成本等等。特别是，您可能想看看他对 C++ 特性的分析，例如堆分配、运行时类型信息和异常，这些特性具有**不确定的最坏情况时序保证**，这对实时系统很重要。

你主要关心的是这类问题而不是便携性（如果你关心你奶奶的起搏器......）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T20:56:35.423

任何 C++ 编译器都应该支持某些版本的标准库。标准库是 C++ 的一部分。不支持它意味着编译器不是 C++ 编译器。如果您目前使用的任何编译器不支持 C++03 标准库，我会感到非常惊讶，所以没有任何借口。当然，编译器必须自 2003 年以来已经更新，但除非您正在为一些仅由过时编译器支持的过时系统进行编译，否则您不会有任何问题。

至于 C++11，目前支持还不错。GCC 和 MSVC 都已支持大部分 C++11 标准库。同样，如果您使用的是这些编译器的最新版本并且它们支持您要编译的系统，那么您没有理由不能使用它们支持的 C++11 标准库的子集——这几乎是所有的。

没有标准库的 C++ 就不是 C++。语言和库功能齐头并进。

[GCC 的 libstdc++](http://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html#status.iso.2011)和[MSVC 2012](http://msdn.microsoft.com/en-gb/library/vstudio/hh567368.aspx#sectionToggle9)有受支持的 C++11 库功能列表。对于 LLVM 的 libc++，我找不到任何类似的东西，但他们确实有一个[clang c++11 支持页面](http://clang.llvm.org/cxx_status.html)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-28T21:55:02.133

您正在与之交谈的人混淆了几个不同的问题。C++11 今天并不是真正可移植的。我认为没有任何编译器 100% 支持它（尽管我可能是错的）；如果（且仅当）您将自己限制在两个或三个平台（Windows 和 Linux，可能还有 Apple）上的最新编译器，您可以侥幸使用其中的大部分内容。虽然这些是最明显的平台，但它们仅代表所有机器的一小部分。（如果您正在处理大型网络应用程序，Solaris 可能会很重要，而 Sun CC。除非自从我上次工作以来 Sun 发生了很大变化，这意味着您甚至可以使用 C++03 的某些部分。不要指望。）

STL 是一个完全不同的问题。这部分取决于您所说的 STL 是什么意思，但今天使用`std::vector`. `locale` 在少数编译器上可能会出现问题（使用 Sun CC — 使用 Rogue Wave 和 Stlport 库）和一些算法，但在大多数情况下，您几乎可以依赖所有 C++03 .

最后，有哪些替代方案？如果你没有 `std::vector`，你最终会实现一些非常相似的东西。如果你真的担心 `std::vector`.天。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T22:00:01.717

将[STLPort](http://www.stlport.org/product.html)与您现有的编译器一起使用，如果它[支持的话](http://www.stlport.org/doc/platforms.html)。这只不过是一个代码库，你使用其他库没有问题，对吧？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-18T12:37:04.753

每个允许的实现定义的行为都列在公开的[标准草案中](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/n3242.pdf)。在 C+11 中几乎没有什么比在 C++98 中更可移植的了。

# macos - 如何将 NSView 正确绘制到 PDF 上下文？

> ID：14570937
> 
> 赞同：1
> 
> 时间：2013-01-28T20:46:57.097
> 
> 标签：macos, cocoa, drawing, quartz-graphics, cgpdfcontext

我已经有了`NSView`，为此`NSView`我添加了一些子视图，它们是`NSView`（命名为：）的子类`Square`。正方形在不同位置上是 50x50。我想`NSView`用背景颜色`Red`或`Blue`屏幕截图上的这个白色背景来渲染这个 s。

![在此处输入图像描述](../Images/7055f3843717c1ead0b39e73aed9a8da.png)

```
- (void)saveAsPDF
{

NSString *homeDirectory = NSHomeDirectory();
NSURL *fileURL = [NSURL fileURLWithPath:[homeDirectory stringByAppendingPathComponent:@"plik.pdf"]];

CGRect mediaBox = self.bounds;

CGContextRef pdfContext = CGPDFContextCreateWithURL((__bridge CFURLRef)(fileURL), &mediaBox, NULL);

CGPDFContextBeginPage(pdfContext, nil);

for (Square *square in squareGroup) {
    [square.layer renderInContext:pdfContext];
}

CGPDFContextEndPage(pdfContext);

CGContextRelease(pdfContext); 
```

只有我得到的是空白的PDF文件。如何在 pdfContext 中正确绘制这些正方形？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:02:48.580

您必须调用[CGPDFContextClose](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CGPDFContext/Reference/reference.html#//apple_ref/c/func/CGPDFContextClose)才能写入 PDF 数据：

```
// ...

CGPDFContextEndPage(pdfContext);

// Close the PDF document
CGPDFContextClose(pdfContenxt);

CGContextRelease(pdfContext);

// ... 
```

该[文档](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CGPDFContext/Reference/reference.html#//apple_ref/c/func/CGPDFContextClose)指出，关闭上下文会导致写入数据，这可能解释了为什么您在没有关闭的情况下得到一个空白 PDF：

> 关闭上下文后，所有待处理的数据都写入上下文目的地，PDF 文件就完成了。关闭 PDF 文档后，无法将其他数据写入目标上下文。

# session - 未找到当前线程的会话 (HIBERNATE)

> ID：14570939
> 
> 赞同：0
> 
> 时间：2013-01-28T20:47:03.897
> 
> 标签：session, spring-mvc, hibernate-4.x

**好的 JAVA 大师 ))**

我对spring真的很陌生，当我在登录后参考以下页面JSP安全时，我遇到了“没有找到当前线程的会话”这个麻烦。到目前为止，一切正常。

**我需要你们的帮助！！！！**

这是该页面的控制器：

```
package employee.controller;

import employee.service.AdminService;
import employee.service.UserService;
import org.apache.log4j.Logger;
import org.springframework.security.access.annotation.Secured;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

import javax.annotation.Resource;

/**
 * @author serge
 *
 * Handles and retrieves the common or admin page depending on the URI template.
 * A user must be log-in first he can access these pages. Only the admin can see
 * the adminpage, however.
 */
@Controller
@RequestMapping("/main")
public class MainController {

    protected static Logger logger = Logger.getLogger("controller");

    @Resource(name = "adminService")
    private AdminService adminService;

    @Resource(name = "userService")
    private UserService userService;

    /**
     * Handles and retrieves a /WEB-INF/jsp/employee-page.jsp
     *
     * containing all employee
     *
     * @return the name of the JSP page
     */

    @Secured("ROLE_USER")
    @RequestMapping(value = "/employee-list",method = RequestMethod.GET)
    public String getEmployeeListPage(Model model) {
        logger.debug("Received request to show all employee page");

        // Retrieve all employee and attach to model
        model.addAttribute("all-employee", userService.findAllEmployee());
        return "employee-page";
    }

    /**
     * Handles and retrieves /WEB-INF/jsp/admin-page.jsp that only admins can see
     *
     * @return the name of the JSP page
     */
    @Secured("ROLE_ADMIN")
    @RequestMapping(value = "/admin", method = RequestMethod.GET)
    public String getAdminPage() {
        logger.debug("Received request to show admin page");
        return "admin-page";
    }
} 
```

这是从控制器调用的用户服务：

```
package employee.service.impl;

import employee.DAO.EmployeeInfoDAO;
import employee.model.EmployeeInfo;
import employee.service.UserService;
import org.apache.log4j.Logger;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.security.access.annotation.Secured;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import java.util.List;

/**
 * @author serge
 * 
 * Reader level
 * 
 * Service to Retrieve info about Employees
 */

@Service("userService")
@Transactional
public class UserServiceImpl implements UserService {

    protected static Logger logger = Logger.getLogger("service");
    private EmployeeInfoDAO emplInfoDAO;

    @Autowired
    public void setEmployeeDao(EmployeeInfoDAO emplInfoDAO) {
        this.emplInfoDAO = emplInfoDAO;
    }

    /**
     * Retrieving Employee Information by id
     *
     * @return EmployeeInfo object
     */
    @Override
    @Transactional
    @Secured("ROLE_USER")
    public EmployeeInfo findEmployeeByID(Integer id) {

        logger.debug("Retrieving Employee with id= " + id);
        EmployeeInfo employeeInfo = new EmployeeInfo();
        employeeInfo.setId(id);
        emplInfoDAO.find(employeeInfo);
        return employeeInfo;
    }

    /**
     * Retrieving all Employees  
     *
     * @return List of EmployeeInfo object
     */
    @Override
    @Secured("ROLE_USER")
    @Transactional(readOnly = true)
    public List<EmployeeInfo> findAllEmployee() {

        logger.debug("Retrieving all Employee");
        return emplInfoDAO.findAll();
    }

    /**
     * Retrieving Employees by last name
     *
     * @return List of EmployeeInfo object
     */
    @Override
    @Secured("ROLE_USER")
    @Transactional(readOnly = true)
    public List<EmployeeInfo> findAllByLastName(String lastName, Object paramValue) {
        lastName = "lastName";

        logger.debug("Retrieving Employee by last name: " + paramValue);
        return emplInfoDAO.findAllByParam(lastName, paramValue);
    }

    /**
     * Retrieving Employees by first name
     *
     * @return List of EmployeeInfo object
     */
    @Override
    @Secured("ROLE_USER")
    @Transactional(readOnly = true)
    public List<EmployeeInfo> findAllByFirstName(String firstName, Object paramValue) {
        firstName = "firstName";

        logger.debug("Retrieving Employee by first name: " + paramValue);
        return emplInfoDAO.findAllByParam(firstName, paramValue);
    }
} 
```

这是自定义 DAO 支持，不确定这是否是正确的方法......：

```
package employee.DAO.impl;

import employee.DAO.DAO;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.criterion.Restrictions;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.transaction.annotation.Transactional;

import javax.annotation.Resource;
import java.io.Serializable;
import java.util.List;

public class CustomHibernateDaoSupport<T>  implements DAO<T> {
    //was extending HibernateDaoSupport

    private Class<T> clazz;
    private SessionFactory sessionFactory;

    public CustomHibernateDaoSupport(Class<T> clazz) {
        this.clazz = clazz;
    }

    @Autowired
    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

    private Session getCurrentSession() {
        return sessionFactory.getCurrentSession();
    }

    @Override
    @Transactional
    public void save(T entity) {
        getCurrentSession().save(entity);
    }

    @Override
    @Transactional
    public void update(T entity) {
        getCurrentSession().update(entity);
    }

    @Override
    @Transactional
    public void delete(Serializable key) {
        Object entity = getCurrentSession().get(clazz, key);
        if (entity != null) {
            getCurrentSession().delete(entity);
        }
    }

    @Override
    @Transactional
    public T find(Serializable key) {
        return (T) getCurrentSession().get(clazz, key);
    }

    @Override
    @Transactional
    public List<T> findAll() {
        return getCurrentSession().createCriteria(clazz).list();
    }

    @Override
    @Transactional
    public List<T> findAllByParam(final String paramName, final Object paramValue) {
        return getCurrentSession().createCriteria(clazz)
                .add(Restrictions.eq(paramName, paramValue))
                .list();
    }
} 
```

当然还有配置：

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xsi:schemaLocation="http://www.springframework.org/schema/beans 
            http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context-3.1.xsd
            http://www.springframework.org/schema/mvc 
            http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd">

    <!-- Activates annotations -->

    <context:annotation-config />

    <mvc:annotation-driven/>

    <!-- Scans for annotated components in base-package-->

    <context:component-scan base-package="employee" />

    <bean class="employee.service.impl.AdminServiceImpl"/>
    <bean class="employee.service.impl.UserServiceImpl"/>

    <!-- Shared Hibernate SessionFactory in a Spring application context. -->

    <bean id = "transactionManager" class = "org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name = "sessionFactory" ref = "sessionFactory" />
    </bean>

    <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource"/>

        <property name="annotatedClasses">
            <list>
                <value>employee.model.UserInfo</value>
                <value>employee.model.EmployeeInfo</value>
                <value>employee.model.EmployeeDiv</value>
            </list>
        </property>

        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.hbm2ddl.auto">update</prop>
            </props>
        </property>
    </bean>

    <!-- for database, imports the properties from database.properties -->

    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="${jdbc.driverClassName}" />
        <property name="url" value="${jdbc.url}" />
        <property name="username" value="${jdbc.username}" />
        <property name="password" value="${jdbc.password}" />
    </bean>

    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="location" value="classpath:database.properties"/>
    </bean>
</beans> 
```

成功登录后，我调用了 /employee-list 并得到了这个而不是页面：

```
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.hibernate.HibernateException: No Session found for current thread
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
...

org.hibernate.HibernateException: No Session found for current thread
    org.springframework.orm.hibernate4.SpringSessionContext.currentSession(SpringSessionContext.java:97)
    org.hibernate.internal.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:941)
    employee.DAO.impl.CustomHibernateDaoSupport.getCurrentSession(CustomHibernateDaoSupport.java:31)
    employee.DAO.impl.CustomHibernateDaoSupport.findAll(CustomHibernateDaoSupport.java:64)
... 
```

**请帮助我理解我的错误在哪里，也许我做了错误的配置？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-16T13:55:48.227

如果你有 dispatch-servlet.xml，添加

```
<tx:annotation-driven /> 
```

或者有一个替代方案：请看这个： [这个博客](http://java.dzone.com/articles/how-i-resolved)

# image - 增强现实显示

> ID：14570943
> 
> 赞同：1
> 
> 时间：2013-01-28T20:47:23.383
> 
> 标签：image, 3d, augmented-reality, smartphone

一个快速的问题。

为什么通过手机查看 3D AR 图像时需要纸张？每当我观看某人演示 AR 的 youtube 视频时，他们无论如何都会在相机的视野中放置纸张。它是用作参考点还是什么？可以使用任何纸张还是需要特定于正在显示的图像？它需要是纸还是任何方形或矩形表面，例如厨房桌子？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:10:55.313

1.  是的，它将用作参考点。物体可以放在纸上，因此与地面平行。否则，您将需要一些校准方法来识别地面。可以使用 IMU，但它并不总是足够准确[。](http://en.wikipedia.org/wiki/Inertial_measurement_unit)
2.  使用[Vuforia SDK](http://www.vuforia.com)，您可以预定义打印或[允许用户拍摄](https://developer.vuforia.com/resources/dev-guide/user-defined-targets)任何平面的照片。当您预定义打印时，您可以确定它适用于跟踪，并且您可以将其用作您的应用程序的广告。另一方面，允许用户使用任何具有足够详细信息的纸张，因为不需要打印机，因此更加用户友好。
3.  目标论文不需要是矩形的，它[必须包含足够的特征](https://developer.vuforia.com/resources/dev-guide/image-target-enhancement-tricks)。大多数框架使用角点作为“特征”。所以圆形是不合适的。此外，您必须确保表面有足够的对比度。

请注意，有一些方法可以在没有纸的情况下进行，但您必须解决校准问题并接受测量误差。目前没有任何免费框架支持开箱即用，但作为一个策略点，您可以阅读[Luca 对我的一个问题的回答](https://stackoverflow.com/a/14273908/199048)。

# javascript - 动力学js中的事件处理

> ID：14570944
> 
> 赞同：0
> 
> 时间：2013-01-28T20:47:23.170
> 
> 标签：javascript, event-handling, coffeescript, dom-events, kineticjs

在下面的代码中，事件在开始时（页面加载时）被调用了 10 次，因为有 10 个矩形带有“点击”事件。但是当我真正点击一个矩形时的事件不会产生任何影响。

这里是代码（我用 rect 替换了 image 以便于处理）：

```
width = window.innerWidth   || document.documentElement.clientWidth || document.body.clientWidth || 0
height = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight || 0

class Gallery 
    constructor: (config) -> 
        @first_xpos          = 0
        @first_ypos          = 0
        @vertical_spacing    = 20
        @horizontal_spacing  = 10
        @current_xpos        = @first_xpos
        @current_ypos        = @first_ypos
        @current_img_in_line = 1
        @max_pics_in_line    = 3
        @stage       = new Kinetic.Stage(config)
        @images_layer = new Kinetic.Layer
        @message_layer = new Kinetic.Layer()
        @image_width = 100
        @image_height = 100

    addImages: () ->
        for i in [0...10]
          ori = new Kinetic.Rect
                    x: @current_xpos 
                    y: @current_ypos
                    fill: 'green'
                    draggable: false
                    width: @image_width
                    height: @image_height
          ori.on('click', @.testfunc() )
          @images_layer.add ori
          @calculate_position()
        @stage.add @images_layer
        @stage.add @message_layer

    testfunc:  -> 
        console.log "event when is_clicked"

    calculate_position: ->
        @current_img_in_line++
        @current_xpos = @current_xpos + @image_width + @horizontal_spacing
        if @current_img_in_line > @max_pics_in_line
           @current_xpos = @first_xpos
           @current_ypos = @current_ypos + @vertical_spacing + @image_height
           @current_img_in_line = 1

window.onload = -> 
  stage = new Gallery
                container: "gallery_container"
                width:  width
                height: height
   stage.addImages() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T01:46:43.777

这里的错误：

```
ori.on('click', @.testfunc() ) 
```

"this" ("@") 不是 Gallery 类的实例。“@”链接到 Kinetic.Rect 实例。你可以这样做：

```
ori.on 'click', =>
  @testfunc() 
```

“=>”如何在咖啡中工作：[http://coffeescript.org/#fat_arrow](http://coffeescript.org/#fat_arrow) 您编辑的代码：http: [//jsfiddle.net/lavrton/tDVy6/3/](http://jsfiddle.net/lavrton/tDVy6/3/)

# html - 一，二，跳过几个……tabindexes，也就是

> ID：14570945
> 
> 赞同：0
> 
> 时间：2013-01-28T20:47:26.007
> 
> 标签：html, forms, tabindex

**问题：**在我的 HTML 注册表单中，我有 18 个元素。每个元素都有一个 tabindex，从 1 处的第一个文本输入开始到 18 处的最后一个表单元素。

当我从第一个文本输入开始时，填写信息然后 tab 。. . 它无处可去。至少，在我看来是这样的。然后我再次选项卡，它进入文本输入，`tabindex="2"`我不知道为什么会这样。我进入一个表单域，然后我必须按 2 x 才能进入下一个。

这就是一半表格的反应方式。此表格分布在两列中。没有任何元素可以将表单的左侧部分与表单的右侧部分分开——当然，布局除外。关键是表单的正确部分行为正确。是什么赋予了？

![在此处输入图像描述](../Images/26a1c93cbba22fc2aca7b9055232d1d9.png)

这是相关的代码：

```
<form id="form1" name="form1" class="bsf-form topLabel page1" autocomplete="off" enctype="multipart/form-data" method="post" novalidate><!--534-->
<div id="billing-form-columns" class="row"><!--536-->
<div id="billing-column-1" class="span8"><!--537-->

<!--legend>Billing Information</legend-->
<!--div class="sub-legend">Please provide your billing and payment information.</div-->

<!-- ERRORS -->                 
<div id="errors" class="alert alert-error">
    <!--button type="button" class="close" data-dismiss="alert">×</button-->
    <div class="err-info"><span class="err-txt">Please address the following issues before the order can be placed:</span></div>
    <div class="error-columns clearfix">
        <div class="err-col-left"></div>
        <div class="err-col-right"></div>                       
    </div>                      
</div>
<!--SUCCESS-->
<div id="success" class="alert alert-success"></div>                    

<div class="row-fluid height60">
    <label class="desc" for="companyName">Company Name<span class="req">*</span></label>
    <input type="text" id="companyName" name="companyName" class="input-xxlarge xxlarge-redux focus" value="" tabindex="1" placeholder="" title="Enter the name of your company" />
</div><!--/row-->  

<div class="row-fluid height60">
    <label class="desc" for="firstName">Full Name<span id="req_2" class="req">*</span></label>
    <input type="text" id="firstName" name="firstName" class="input-large" value="" tabindex="2" placeholder="" title="Enter your first name. If there is another name on the credit card, you can enter that below with the credit card information." />                       
    <input type="text" id="lastName" name="lastName" class="input-large" value="" tabindex="3" placeholder="" title="Enter your last name. If there is another name on the credit card, you can enter that below with the credit card information." />                          
</div><!--/row-->  

<div class="row-fluid height60">
    <label class="desc" for="address">Address<span class="req">*</span></label>
    <input type="text" id="address" name="address" class="input-xxlarge xxlarge-redux" value="" tabindex="4" placeholder="" title="Enter your billing address"/>                                        
</div><!--/row-->            

<div class="row-fluid height45">
    <label class="desc" for="address2"></label>
    <input type="text" id="address2" name="address2" class="input-xxlarge xxlarge-redux" value="" tabindex="5" placeholder="Address 2 (optional)" title="This field for a second address (suite, apartment, department, etc.) is optional"/>
</div><!--/row-->  

<div class="row-fluid height60 clearfix">
    <div class="label-two clearfix">
        <span class="desc-left"><label class="desc" for="city">City<span class="req">*</span></label></span>
        <span class="desc-right"><label class="desc" for="spr1">State / Province / Region</label></span>
    </div>
    <input type="text" id="city" name="city" class="input-large" value="" tabindex="6" placeholder="" title="Enter the city for your billing address" />
    <input type="text" id="spr1" name="spr1" class="input-large" value="" tabindex="7" placeholder="" title="Enter the state, province or region associated with your credit card" />
</div><!--/row-->  

<div class="row-fluid clearfix" id="city-state">
    <div class="label-two clearfix">
        <span class="desc-left"><label class="desc" for="pzc">Postal / ZIP Code<span class="req">*</span></label></span>
        <span class="desc-right"><label class="desc" for="country">Country<span class="req">*</span></label></span>
    </div>
    <input type="text" id="pzc" name="pzc" class="input-large" value="" tabindex="8" placeholder="" title="Enter the Postal or ZIP Code associated with your credit card" />                                        
    <select id="country" name="country" class="width210" tabindex="9" title="Select the name of the country associated with your credit card" >
        <option value="" selected="selected"></option>
        <option value="US" >United States</option>
        <option value="UK" >United Kingdom</option>
        <option value="AU" >Australia</option>
        <option value="ZM">Zambia</option>
        <option value="ZW">Zimbabwe</option>
    </select>                                                                   
</div><!--/row-->  

<div class="row-fluid height60 clearfix">
    <div class="label-two clearfix">
        <span class="desc-left"><label class="desc" for="emailField">E-mail<span class="req">*</span></label></span>
        <span class="desc-right"><label class="desc" for="phoneIntl">Phone Number<span class="req">*</span></label></span>
    </div>
    <input type="text" id="emailField" name="emailField" class="input-large" value="" tabindex="10" placeholder="" title="Enter a valid e-mail address" />                      
    <input type="text" id="phoneIntl" name="phoneIntl" class="input-large" value="" tabindex="11" placeholder="" title="Enter a valid phone number where we can reach you" />
</div><!--/row-->  
</div><!--537-->

<div id="billing-column-2" class="span8"><!--860-->
<div class="cc-validator clearfix">
    <div class="row-of-cards height60 clearfix">
        <span class="visa">Visa</span>
        <span class="mastercard">MasterCard</span>
        <span class="amex">American Express</span>
        <span class="discover">Discover</span>
    </div>

    <div class="row-fluid height60 clearfix">
        <label class="desc" for="card_number">Credit Card Number<span class="req">*</span></label>
        <input type="text" id="card_number" name="card_number" class="input-medium focused width210" value="" tabindex="12" placeholder="Credit Card Number" title="Enter a current and valid credit card number for any of the cards listed above." />
    </div>

    <div class="row-fluid height60 clearfix">
        <div class="label-two-apart clearfix">
            <span class="desc-left-apart-269"><label class="desc" for="expiry_date">Expiration Date<span class="req">*</span></label></span>
            <span class="desc-right-apart-left"><label class="desc" for="cvv">Security Code<span class="req">*</span></label></span>
        </div>
    </div>  

    <div class="input-two-apart-850 clearfix">
            <div class="input-left-apart clearfix">
                <span class="month-year">
                    <select id="month-list" name="month-list" tabindex="13" title="Select the credit card expiration date (month and year)."></select>
                    <select id="year-list" name="year-list" tabindex="14" title="Select the credit card expiration date (month and year)."></select>            
                </span>
                <span class="cvv-code">
                    <input type="text" id="cvv" name="cvv" class="input-mini" maxlength="3" value="" tabindex="15" placeholder="" title="Enter the security code from the back of your credit card. If you have an American Express card, the security code is on the front of the card." />                                                        
                </span>
            </div>
            <div class="input-right-apart clearfix"></div>
    </div>
</div>

<div class="row-fluid height60 clearfix">
    <label class="desc" id="lbl-name-on-cc-card" for="name_on_card">Name on Credit Card<span class="req">*</span></label>
    <input type="text" name="name_on_card" id="name_on_card" class="input-medium focused width210" value="" tabindex="16" placeholder="" title="Enter the name as it appears on the credit card"/>
</div>

<div class="row-fluid height60 clearfix">
    <label class="desc" id="lbl-password1" for="password1">Password<span class="req">*</span></label>
    <input type="password" name="password1" id="password1" class="input-medium focused width210" value="" tabindex="17" placeholder="" title="Enter a password containing uppercase and lowercase characters, numbers and special characters such as !, @, #, $, _ and %" />
</div>

<div class="row-fluid height60 clearfix">
    <label class="desc" id="lbl-password2" for="password2">Re-enter Password<span class="req">*</span></label>
    <input type="password" name="password2" id="password2" class="input-medium focused width210" value="" tabindex="17" placeholder="" title="Repeat the password you entered above" />
</div>

<div class="row-fluid clearfix" id="agreement">
    <label class="desc">Agreement<span class="req">*</span></label>
    <input type="checkbox" checked="checked" tabindex="18" value="I accept ACME INC's Terms and Conditions" class="field checkbox" name="acceptTerms" id="acceptTerms" title="You need to accept our Terms and Conditions before you can place your order.">
    <label for="acceptTerms" class="choice">I accept the ACME INC <a target="_new" href="/terms.php">Terms and Conditions</a></label>
</div>

<div class="form-actions form-actions-plus">
    <div class="btn-align-right"><button type="submit" class="btn btn-primary" id="bsfSubmit" tabindex="18">Accept Billing Information and Continue</button>
    </div>
</div>

<input type="hidden" name="telephone" />
<input type="hidden" name="jsn" />
<input type="hidden" name="ctt" />
</div>
</form> 
```

真的，我需要的只是另一双眼睛来告诉我哪里可能做错了。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:58:01.293

事实证明，删除所有 tabindex 标签完成了大约 90% 的工作。从一个表单元素到另一个表单元素不再有任何问题。

罪魁祸首是：

1）同一页面上的其他表单，我认为 tabindex 是按表单而不是按页面。

2) Select2 为其替换的每个选择元素分配 -1 的 tabindex。因此，跳到 select2 下拉菜单以及跳开它，可能会导致随机的痉挛 Web 浏览器行为。

#1 的解决方案：删除所有表单中的所有 tabindex 标签。

#2 的解决方案：编写一段 JavaScript 以确保 select2 元素始终接收焦点，当您从前一个元素切换到它时，并确保 select2 元素始终将焦点传递给下一个表单元素。

```
// COMING FROM THE ELEMENT IMMEDIATELY BEFORE THE SELECT2:

$('#postalCode').on('keydown', function(evt){
    if(evt.keyCode === 9){
        evt.preventDefault();
        var el = $('#s2id_country a');
        if(input !== undefined){
            input.focus();
        }
    }
});

// THEN FROM THE SELECT2 TO THE NEXT FORM ELEMENT
$('#s2id_country a').on('keydown', function(evt){
    if(evt.keyCode === 9){
        evt.preventDefault();
        var el = $('#emailField');
        if(el.length){
            el.focus();
        }
    }
}); 
```

也许有一个更优雅的解决方案。想一想，甚至有可能编写一个函数并使用 jQuery 术语来查找`next`and`previous`元素。无论如何，感谢所有帮助我解决这个问题的人。

# c++ - 一个线程是否有理由不访问其他线程的堆栈？

> ID：14570954
> 
> 赞同：8
> 
> 时间：2013-01-28T20:47:53.060
> 
> 标签：c++, multithreading

我只是在我的项目中使用 Intel Parallel 检查器，它显示一个警告：

> 应用程序中的一个或多个线程访问了另一个线程的堆栈。这可能表明您的应用程序中存在一个或多个错误。

我确实有一些在线程之间共享的堆栈上分配的对象。我不明白为什么这是一个问题。有什么提示吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-28T20:51:13.597

没有*错，*只是可能错了。像 Intel Parallel Inspector 这样为您的程序提供额外诊断的工具必须在误报和误报之间进行权衡，在这种情况下，开发人员似乎认为访问另一个线程的堆栈更有可能是一个错误（低假阳性率（如果报告）比不（高假阴性率，如果不报告）。

Valgrind 是另一个可以在正确的代码中发出错误信号的工具示例。

这里真正的问题是，“另一个线程在做什么？” 如果你认为，“也许它会从那个函数返回并且堆栈帧将是无效的”，那么你做的并行编程是错误的。没有关于多线程行为的答案应该用“也许”来限定。您最好确保该线程不会返回，例如，通过使其等待信号量或条件变量，或使其与其他线程连接。

## 讨论

**Pubby：** “AFAIK 效率非常低。”

它效率低下的唯一原因是您可能有多个内核修改相同的缓存行，这与其他类型的共享内存具有相同的问题。

**Collin：**你怎么知道堆栈帧在另一个线程中仍然是好的？

如果你在多个线程中使用某些东西，你会使用某种同步机制来确保它不会以无效的方式被修改。这种情况也不例外。

**H2CO3：**嗯，你有什么理由不应该走进别人的房子吗？

如果我们要进行类比，我会说进程就是房子，每个线程都是房子里的人。如果戴夫在他的房间里有一份家务清单，我每次需要查看清单时都会去他的房间。如果他停止这样做，他最好告诉我，否则我会开始在他桌子上的随机纸片上写字。

## 结论

这个程序的行为是否可以接受是一个风格问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-28T20:54:20.783

想象一下——一个线程正在执行，一个方法被调用，该方法具有一个本地（堆栈）变量（一个对象）。它将这个对象添加到工作队列中，该队列由单独的线程处理。

该线程获取第一个线程添加的项目并访问第一个线程的堆栈上的对象。

在此期间第一个线程做了什么？它可能已退出该方法并释放了该堆栈空间。释放的空间可能会或可能不会被重新使用。访问第一个线程的堆栈的第二个线程可能会或可能不会正常工作，具体取决于时间和调用图。

如果您知道堆栈变量在第二个线程处理它时将存在，那么这样做是安全的；例如，如果线程 1 将堆栈变量排队，然后阻塞，直到线程 2 通知它已完成处理，这是一个安全操作。

发出警告而不是错误是因为这可能是也可能不是合法操作，并且分析仪无法确定。

# perl - 如何在 Moose 中自动生成一组绑定到网络服务的 setter / getter？

> ID：14570959
> 
> 赞同：4
> 
> 时间：2013-01-28T20:48:18.133
> 
> 标签：perl, moose

通过自学 Moose，我正在研究与特定硬件接口的 Moose 对象。所述硬件采用许多不同的命令来设置硬件的各种属性，所有形式`PROPERTYNAME=VALUE`的设置器和`PROPERTYNAME?`获取器（请注意，这些“设置器”和“获取器”位于硬件的网络接口上）。我想要做的是创建一个对象，其中硬件的所有这些属性都使用类似属性的接口来实现。由于获取和设置各种属性对所有属性都采用相同的形式，有没有办法从这些属性的列表中自动生成 setter 和 getter？

IE：而不是这样：

```
Package MyHardware;
use Moose;
has property1 => (
    'is' => 'rw',
    'reader' => 'set_property1',
    'writer' => 'get_property1',
);

has property2 => (
    'is' => 'rw',
    'reader' => 'set_property2',
    'writer' => 'get_property2',
);

# ...

has propertyN => (
    'is' => 'rw',
    'reader' => 'set_propertyN',
    'writer' => 'get_propertyN',
); 
```

有什么我可以这样做的：

```
Package MyHardware;
use Moose;

attributes => (
    'is' => 'rw',
    'names' => [qw/property1 property2 ... propertyN/],
    'reader' => sub {
        my $self = shift;
        my $property = shift;
        return $self->_send_command("$property?");
    },
    'writer' => sub {
        my $self = shift;
        my $property = shift;
        my $value = shift;
        return $self->_send_command("$property=$value");
    },
); 
```

编辑：这就是我想要发生的事情：

```
# CALLER:
my $hw = MyHardware->new();
$hw->property1('foo');
print $hw->property2 . "\n"; 
```

和“引擎盖下”：

```
$hw->property1('foo');
# Becomes 
sub { return $hw->_send_command('property1=foo'); }

# And

$hw->property2();
# Becomes
sub { return $hw->_send_command('property2?'); } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T21:15:37.657

循环遍历属性怎么样？

```
use strict;
use warnings;

use Moose;

foreach my $prop ( qw( property1 property2 property3 property4 ) ) { 
    has $prop => (
        is => 'rw',
        isa => 'Str',
        reader => "get_$prop",
        writer => "set_$prop",
    );  
}

1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T17:32:18.903

弄清楚了。我意识到我根本不应该使用属性来做到这一点。相反，我将使用[Class::MOP::Class](http://search.cpan.org/~doy/Moose-2.0604/lib/Class/MOP/Class.pm "类::MOP::类")动态生成方法，如下所示：

```
my $meta = Class::MOP::Class->initialize(__PACKAGE__);
foreach my $prop (qw/property1 property2 property3/) {
    $meta->add_method(qq/set_$prop/, sub { 
            my $self = shift;
            my $value = shift;
            return $self->_send_command(qq/$prop=$value/);
        }
    );
    $meta->add_method(qq/get_$prop/, sub { 
            my $self = shift;
            return $self->_send_command(qq/$prop?/);
        }
    );
} 
```

调用 has() 会有效地将对象状态放在两个地方——硬件上和实例中——我只希望它在一个地方。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T01:56:18.510

您不存储任何值，因此您不需要属性。

您甚至不需要两个 sub，因为您需要一个用于获取和设置的名称。

```
for my $prop (qw( property1 property2 property3  )) { 
   my $accessor = sub {
      my $self = shift;
      if (@_) {
         $self->_send_command("$prop=$value");
      } else {
         return $self->_send_command("$prop?");
      }
   };

   no strict 'refs';
   *$prop = $accessor;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T23:56:31.597

我建议为您的每个属性使用 has 而不是单独的属性。

```
Package MyHardware;
use Moose;
has properties => (
'is' => 'rw',
'isa' => 'HashRef',
'lazy_build' => 1,
);

sub _build_properties {
    my $self = shift;
    return {
        'property1' => '',
        'property2' => '',
    };
}

print $self->properties->{property1}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-15T19:27:37.040

# 为实例数据生成 getter 和 setter

```
BEGIN 
{
    my @attr = qw(prop1 prop2 prop3 prop4);
    no strict 'refs';
    for my $a (@attr)
    {
        *{__PACKAGE__ . "::get_$a"} = sub { $_[0]->{$a}         };
        *{__PACKAGE__ . "::set_$a"} = sub { $_[0]->{$a} = $_[1] };
    }
} 
```

# ruby - Ruby 类方法命名冲突

> ID：14570960
> 
> 赞同：2
> 
> 时间：2013-01-28T20:48:20.053
> 
> 标签：ruby, class, methods

`open`是否可以在我的课堂上使用该方法`Parser`？该方法似乎与`IO::open`?

```
class Parser
    require 'nokogiri'

    def parse
        doc = open "someFile.html"
        # Get to parsin' ...
    end 

    def open str
        Nokogiri::HTML(open(str))
    end 
end 

parser = Parser.new
parser.parse 
```

当我运行脚本时，我收到此错误：

```
$ ruby parser.rb
parser.rb:10: stack level too deep (SystemStackError) 
```

我尝试了很多方法，但似乎唯一可行的方法是重命名`Parser::open`为 以外的东西`open`，比如`docopen`

我正在尝试了解 ruby​​ 的工作原理，因此**非常**感谢答案之外的任何进一步解释！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:57:22.443

似乎正在发生的是

```
def open str
  Nokogiri::HTML(open(str))
end 
```

处于递归循环中，这只会导致`SystemStackError`堆栈级别太深。

你到底想用 open(str) 做什么？当你改变`open`to时`docopen`，你到底在哪里改变它？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T20:57:46.960

您遇到`stack level too deep (SystemStackError)`错误，因为您的方法被递归调用。

```
def open str
  Nokogiri::HTML(open(str)) # here you call this same method over and over again
end 
```

发生这种情况是因为您定义的方法在上下文中更接近，因此它是选择调用的方法。

您可以按照您的想法重命名您的方法，或者您可以执行类似的操作以在一个接收器上显式调用它，该接收器具有您要使用的 open 方法定义

```
def open str
  uri = URI.parse(str)
  Nokogiri::HTML(uri.open)
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T21:18:32.727

`open`是模块内核上的一个方法，它包含在`Object`所有 Ruby 类的父类中。发生的事情是`open(str)`在

```
class Parser

  def open str
    Nokogiri::HTML(open(str))
  end 
```

正在递归调用 Parser 上定义的`open`方法。如果您将方法更改为

```
 def open str
    Nokogiri::HTML(Kernel.open(str))
  end 
```

您`open`将按预期调用内核上的方法。

# c# - 将 DropDownList 添加到 gridview 单元格

> ID：14570964
> 
> 赞同：0
> 
> 时间：2013-01-28T20:48:54.717
> 
> 标签：c#, asp.net

我正在尝试在 gridview 的一个单元格中执行 DropDownList ，但我只能添加列。

```
<Columns>
     <asp:TemplateField>
         <ItemTemplate>  
             <asp:DropDownList  ID="DropDownList1" runat="server" DataValueField="Catalog" DataSourceID="SqlDataSource1"></asp:DropDownList>
         </ItemTemplate>
     </asp:TemplateField>
</Columns> 
```

如何将唯一的下拉列表添加到网格视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:51:08.223

要将 DropDownList 添加到 GridView 单元格，您应该使用 ItemTemplates。[您可以在此处](http://msdn.microsoft.com/en-us/library/ms178294%28v=vs.80%29.aspx)找到更多详细信息

还有另一个样本在[这里](http://www.highoncoding.com/Articles/169_DropDownList_Inside_GridView__Method_1_.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:08:42.020

我在 asp.net 论坛中找到了一个解决方案，如果有人需要，这里让您提供链接： [将 DropDownList 添加到 gridview 单元格](http://forums.asp.net/p/1878760/5288343.aspx/1?Re%20Add%20DropDownList%20to%20a%20gridview%20cell)

# drop-down-menu - 在页面滚动上解构 XPages 下拉按钮菜单

> ID：14570965
> 
> 赞同：0
> 
> 时间：2013-01-28T20:48:57.907
> 
> 标签：drop-down-menu, scroll, xpages, xsp

我正在使用 xpages 扩展库在导航中生成下拉菜单，代码如下：

```
<xe:dropDownButton disableTheme="true" styleClass="menuButton">
        <xe:this.treeNodes>
            <xe:basicContainerNode styleClass="menuTopLevel">
                <xe:this.children>
                    <xe:pageTreeNode label="Create New" page="NewInspection.xsp"
                        styleClass="menuItemSub1">
                    </xe:pageTreeNode>
                    <xe:pageTreeNode label="Reports" page="View.xsp"
                        styleClass="menuItemSub1">
                    </xe:pageTreeNode>
                </xe:this.children>
            </xe:basicContainerNode>
        </xe:this.treeNodes>
    </xe:dropDownButton> 
```

我遇到的问题是，当用户在可滚动的页面上（也就是说，页面的高度超过内容区域的高度）并且他们滚动页面时，菜单会停留在原位绘制，如果它是打开的，并且不随页面内容滚动。如果页面滚动，我正在寻找一种方法来解构任何/所有打开的菜单，但我在 XPages 中对此没有任何运气。有没有人遇到过类似的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:09:01.137

我能够找到解决方案。利用代码库确定我何时使用 iPad，我加载了一个函数，该函数添加了一个事件，该事件使用 Dojo 将一个 onscroll 事件绑定到外部窗体而不是窗口本身。出于某种原因，我不得不将它嵌入到我的导航自定义控件的脚本块中，如果我把它放在其他地方，它就不会附加。如果其他人将来需要它，这是代码。

```
dojo.ready( function() {
var object = dojo.byId('view:_id1')
//console.log(object);
dojo.connect(object, 'onscroll', this, function(event) {
    // console.log('scroll');
        var object1 = dojo.byId('#{id:adminDropDown}_ab_0_dropdown')
        if (object1 != null) {
            dojo.style(object1, "display", "none")
        }
        var object1 = dojo.byId('#{id:insDropDown}_ab_0_dropdown')
        if (object1 != null) {
            dojo.style(object1, "display", "none")
        }
        var object1 = dojo.byId('#{id:emDropDown}_ab_0_dropdown')
        if (object1 != null) {
            dojo.style(object1, "display", "none")
        }
        var object1 = dojo.byId('widget_view:_id1:DateEntry_dropdown')
        if (object1 != null) {
            dojo.style(object1, "display", "none")
        }
    }); 
```

# google-app-engine - 让一个拉任务队列与 cron 一起工作

> ID：14570967
> 
> 赞同：0
> 
> 时间：2013-01-28T20:49:06.287
> 
> 标签：google-app-engine, python-2.7, cron, google-cloud-datastore, task-queue

我是 python 和 GAE 的新手，我一直在尝试通过示例学习如何为我自己的项目使用任务队列、cron 和数据存储，但一点运气都没有。我试图从 YouTube 上的 Google Developers 教程视频中修改投票者代码： [http ://www.youtube.com/watch?](http://www.youtube.com/watch?v=AM0ZPO7-lcE) **v=AM0ZPO7-lcE** 可以在这里看到：http: [//voterlator.appspot.com/](http://voterlator.appspot.com/)

我意识到代码不完整，所以我决定尝试找出缺少的内容。我做了一些替换（例如，编程语言现在是乳制品）。教程代码中有一些事情没有解决。例如，变量 LANGUAGES 没有在任何地方指定。我不清楚数据模型如何从表单中提取语言的值并将它们用作键。

我不知道为什么它不起作用。我留下了一些我试图让它在那里工作的代码并将其注释掉。

这是 app.yaml：

```
application: voting
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /static/css
  static_dir: static/css

- url: /static/css/sunny
  static_dir: static/css/sunny

- url: /static/js
  static_dir: static/js

- url: /cron/tally
  script: main.app

- url: /.*
  script: main.app 
```

这是 cron.yaml：

```
cron:
- description: vote tallying worker
  url: /cron/tally
  schedule: every 1 minutes 
```

这是 queue.yaml

```
total_storage_limit: 120M
queue:
- name: votes
  mode: pull 
```

这是main.py

```
import webapp2
from google.appengine.ext import db
from google.appengine.api import taskqueue
import os
import jinja2

jinja_environment = jinja2.Environment(
    loader=jinja2.FileSystemLoader(os.path.dirname(__file__)))

class Tally(db.Model):
    """Counting model"""

    count = db.IntegerProperty(default=0, required=True)
    #key_name = ['Milk', 'Butter', 'Cheese'] #added
    #key_name = db.StringProperty(choices=set(['Milk', 'Butter', 'Cheese'])) #added
    cls = ['Milk', 'Butter', 'Cheese'] #added

    @classmethod
    def increment_by(cls, key_name, count):
        """Increases a tally's count. Should be run in a transaction."One tally for each language"""
        """The key_name is going to be the language name"""
        """There's a convenience method there that actually will update the count"""

        tally = cls.get_by_key_name(key_name)
        if tally is None:
            tally = cls(key_name=key_name)
        tally.count += count
        tally.put()
    #db.run_in_transaction(increment_by, key_name, count) #added
        #db.run_in_transaction(cls, key_name, count) #added

    #db.run_in_transaction(Tally.increment_by, cls, count) #added

class VoteHandler(webapp2.RequestHandler):
    """Handles adding of vote tasks"""
    def get(self):
        """Displays the voting form"""

        tally_query = Tally.all() #added
        #tally_query = Tally.all(key_name)   #added  
        tallies = tally_query.fetch(3) #added

        urla = '_ah/admin/'
        url_admin = 'Admin'

        urlvh = '/'
        url_votehand = 'Votes'

        ugliest = self.request.get('ugliest')

        template_values = {
            'tallies': tallies, #added
            'ugliest': ugliest, #added               

            'url_admin': url_admin,
            'urla': urla,

            'urlvh': urlvh,
            'url_votehand': url_votehand,
        }
        template = jinja_environment.get_template('vote_handler.html')
        self.response.out.write(template.render(template_values))
    def post(self):
        """Adds to the votes queue if ugliest is valid. """

        LANGUAGES = ['Milk', 'Butter', 'Cheese'] #added: This is just a guess

        ugliest = self.request.get('ugliest')
        if ugliest and ugliest in LANGUAGES:  ### No variable specified for LANGUAGES
            q = taskqueue.Queue('votes')
            q.add(taskqueue.Task(payload=ugliest, method='PULL'))

        self.redirect('/')

    #db.run_in_transaction(Tally.increment_by(cls, key_name, count)) #added

class TallyHandler(webapp2.RequestHandler):
    def post(self):
        """Leases vote tasks, accumulates tallies and stores them"""
        q = taskqueue.Queue('votes')
        # Keep leasing tasks in a loop.
        while True:
            tasks = q.lease_tasks(300, 1000)
            if not tasks:
                return
            # accumulate tallies in memory
            tallies = {}
            for t in tasks:
                tallies[t.payload] = tallies.get(t.payload, 0) + 1
            self.store_tallies(tallies)
            q.delete_tasks(tasks)

app = webapp2.WSGIApplication([('/', VoteHandler),
                               ('/cron/tally', TallyHandler)], #called from cron, pulls votes from the queue and updating tallies
                          debug=True)

def main():
    app.run()

if __name__ == "__main__":
    main() 
```

这是 vote_handler.html 中表单的代码：

```
<form action="/" method="post">
<input type="radio" name="ugliest" value="Milk" /> Milk<br>
<input type="radio" name="ugliest" value="Butter" /> Butter<br>
<input type="radio" name="ugliest" value="Cheese" /> Cheese
<br>
<div>
<input type="submit" value="Submit">
</div>
</form>

<div class="commentary">
    {% for tally in tallies %}
      {{ tally.count }}
    {% endfor %}
</div> 
```

我试图让它在表单下方显示结果。

最终发生的事情是表单将任务添加到队列中，并且数据存储中有一个任务类型，但其中没有任何实体。我不知道出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:57:17.943

TallyHandler 的“put”方法应该重命名为“get”。（一个 cron 作业将调用一个 URL，使用一个 HTTP GET 请求。）

请注意，cron 任务不会在开发环境中自动运行，只会在生产环境中运行。使用管理控制台手动触发 cron 任务。

需要定义 store_tallies 方法。[请参阅http://google-app-engine-samples.googlecode.com/svn/trunk/voterlator/](http://google-app-engine-samples.googlecode.com/svn/trunk/voterlator/)上的原始源代码

顺便说一句，在 app.yaml 中，我建议使用限制对您的 cron URL 的访问

```
login: admin 
```

# c# - 获取任意类型的属性的 DisplayName

> ID：14570978
> 
> 赞同：1
> 
> 时间：2013-01-28T20:49:59.817
> 
> 标签：c#, asp.net-mvc

我很难找到一种干净的方法来做到这一点。我有一个`ViewModel`包含表格行集合的类。我希望能够`@Html.DisplayNameFor()`在`strongly-typed`不引用集合中的第一项或创建该类型的新实例的情况下对集合中的类型进行操作。所以为了澄清这里有一个例子：

```
public class TableViewModel
{
  public string Title { get; set; }
  public IEnumerable<Row> Rows { get; set; }
}

public class Row
{
  public int ColumnA { get; set; }
  public int ColumnB { get; set; }
}

//In the Razor view
<table>
  <tr>
    <th>@Html.DisplayNameFor(???)</th>
  </tr>
</table> 
```

有没有办法做到这一点`@Html.DisplayNameFor(x => x.Rows.First().ColumnA)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:20:00.393

您可以使用该`this.ViewData.ModelMetadata.Properties`集合并调用该`GetDisplayName`方法来生成标题单元格内容。我们通常在代码中执行此操作，以将任意模型呈现为表格。

编辑：为了对此进行扩展，我使用了一个基本模型，它代表一个表格并且只代表一个表格。我定义了 3 个类。我有一个`TableRowCell' class, a`TableRow 类（本质上是一个`TableRowCell`对象集合）和一个`Table`类。

```
public class Table
{
    public Table(String name)
    {
        this.Name = name;
        this.ContentRows = new List<TableRow>();
        this.HeaderRow = new TableRow();
        this.FooterRow = new TableRow();
    } 

    public IList<TableRow> ContentRows
    {
        get;
        private set;
    }

    public TableRow FooterRow
    {
        get;
        private set;
    }

    public TableRow HeaderRow
    {
        get;
        private set;
    }

    public String Name
    {
        get;
        private set;
    }
} 
```

当我有一个包含要在表格中显示的对象集合的视图模型时，我首先调用一个`HtmlHelper`扩展，将该集合转换为`Table`对象。在该方法中，我迭代调用以`ModelMetadataProviders.Current.GetMetadataForType(null, typeof(TModel)).Properties..Where(item => item.ShowForDisplay)`获取用于生成标题单元格的元数据对象的集合。然后，我遍历项目集合并调用`ModelMetadataProviders.Current.GetMetadataForType(() => item, typeof(TModel)).Properties..Where(item => item.ShowForDisplay)`以获取用于生成内容单元格的元数据对象集合。

从技术上讲，我的`HtmlHelper`扩展方法实际上返回一个`TableBuilder`对象，该对象将调用一个`Render`生成 html 的方法。到目前为止，这种设置对我很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:59:22.517

```
public class TableViewModel
{
  public string Title { get; set; }
  public IEnumerable<Row> Rows { get; set; }
  public Row ForNames = null;
}

@Html.DisplayNameFor(x => x.ForName.ColumnA) 
```

# osx-mountain-lion - 在 Mountain Lion 上运行 VMC

> ID：14570979
> 
> 赞同：0
> 
> 时间：2013-01-28T20:50:00.767
> 
> 标签：osx-mountain-lion, cloud-foundry

我已按照在 Mountain Lion ( `sudo gem install vmc`) 上安装 VMC 的简单说明进行操作，但出现以下错误：

```
$ vmc
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems.rb:230:in `activate': can't activate multi_json (~> 1.4.0, runtime) for ["vmc-0.4.7"], already activated multi_json-1.5.0 for ["cfoundry-0.4.19", "vmc-0.4.7"] (Gem::LoadError)
    from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems.rb:246:in `activate'
    from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems.rb:245:in `each'
    from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems.rb:245:in `activate'
    from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems.rb:1056:in `gem'
    from /usr/bin/vmc:18 
```

谁能帮我诊断一下？这是安装的 Ruby 版本的问题吗？我真的不想为了这件事而盲目地跳过箍来升级 Ruby。我尝试使用 安装旧版本的多 json `gem install multi_json -v 1.4.0`，但这似乎没有任何区别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T21:52:46.470

似乎 vmc 正在选择`multi_json`（其依赖项之一）与 1.5 版本，该版本与 1.4 不兼容

您可以做的是`sudo gem uninstall multi_json`，当出现提示时，回答删除 1.5 版。

# asp.net - 如何在 ASP.Net 融合图表中使用多个系列

> ID：14570983
> 
> 赞同：0
> 
> 时间：2013-01-28T20:50:12.253
> 
> 标签：asp.net, fusioncharts

我试图在我的融合图中使用多个系列，但到目前为止我无法成功。这是我想在其中使用的新选择语句：

```
string sqlStatement = "select  Date, Category,  COUNT(Status)TotalCount from MainTable group by  Category"; 
```

但是下面的代码可以正常工作，因为我只使用了 2 个字段：Category 和 TotalCount。我想添加如上所示的日期字段。谢谢

```
public string CreateHistoricalChart()
    {
        SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString);
        string sqlStatement = "select  Category,  COUNT(Status)TotalCount from MainTable group by  Category";
        SqlCommand cmd = new SqlCommand(sqlStatement, con);
        con.Open();
        SqlDataReader reader = cmd.ExecuteReader();
        string strXML;
        strXML = "<graph decimalPrecision='0' name='MyXScaleAnim' type='ANIMATION' duration='1' start='0' param='_xscale' showNames='1' labelDisplay='Rotate' useEllipsesWhenOverflow='1'  pieSliceDepth='30' formatNumberScale='0'>";
        while (reader.Read())
        {
            strXML += "<set name='" + reader["Category"].ToString() + "' value='" + reader["TotalCount"].ToString() + "' />";
        }
        strXML += "</graph>";
        return FusionCharts.RenderChart("../FusionCharts/Column3D.swf", "ChartID", strXML, "FactorySum6", "870", "350", false, true);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:29:31.733

A 、**创建正确的数据：**在FusionCharts中，多系列图表需要另一种XML格式，格式如下：

```
<chart>
  <categories>
    <category label='date1'/>
    <category label='date2'/>
    <category label='dateN'/>
  </categories>
  <dateset seriesName='category1'>
     <set value='1' />
     <set value='2' />
     <set value='3' />
  </dateset>
  <dateset seriesName='category2'>
     <set value='4' />
     <set value='5' />
     <set value='6' />
  </dateset>
</chart> 
```

请按照此格式创建 XML。

B.为多列 3D 图表的图表**选择正确的 SWF 文件名。**`MSColumn3D.swf`

# android - 在应用程序中存储和保护私有 API 密钥的最佳实践

> ID：14570989
> 
> 赞同：433
> 
> 时间：2013-01-28T20:50:32.847
> 
> 标签：android, reverse-engineering, proguard, api-key

大多数应用程序开发人员会将一些第三方库集成到他们的应用程序中。如果是访问服务，例如 Dropbox 或 YouTube，或者记录崩溃。第三方图书馆和服务的数量是惊人的。大多数这些库和服务都是通过以某种方式与服务进行身份验证来集成的，大多数情况下，这是通过 API 密钥发生的。出于安全目的，服务通常会生成公共和私有密钥，通常也称为秘密密钥。不幸的是，为了连接到服务，必须使用此私钥进行身份验证，因此可能是应用程序的一部分。不用说，这面临着巨大的安全问题。可以在几分钟内从 APK 中提取公共和私有 API 密钥，并且可以轻松实现自动化。

假设我有类似的东西，我该如何保护密钥：

```
public class DropboxService  {

    private final static String APP_KEY = "jk433g34hg3";
    private final static String APP_SECRET = "987dwdqwdqw90";
    private final static AccessType ACCESS_TYPE = AccessType.DROPBOX;

    // SOME MORE CODE HERE

} 
```

您认为存储私钥的最佳和最安全的方式是什么？混淆，加密，你怎么看？

* * *

## 回答 #1

> 赞同：389
> 
> 时间：2013-01-28T22:01:22.783

1.  实际上，您编译的应用程序包含密钥字符串，还包含常量名称 APP_KEY 和 APP_SECRET。从这种自记录代码中提取密钥是微不足道的，例如使用标准的 Android 工具 dx。

2.  您可以应用 ProGuard。它将保持键字符串不变，但会删除常量名称。它还将尽可能用简短、无意义的名称重命名类和方法。然后提取密钥需要更多时间，以确定哪个字符串用于哪个目的。

    *请注意，设置 ProGuard 并不像您担心的那么困难。首先，您只需要启用 ProGuard，如 project.properties 中所述。如果第三方库有任何问题，您可能需要在 proguard-project.txt 中隐藏一些警告和/或防止它们被混淆。例如：*

    ```
    -dontwarn com.dropbox.**
    -keep class com.dropbox.** { *; } 
    ```

    *这是一种蛮力方法；一旦处理的应用程序工作，您可以优化此类配置。*

3.  您可以在代码中手动混淆字符串，例如使用 Base64 编码，或者最好使用更复杂的编码；甚至可能是本机代码。然后，黑客将不得不对您的编码进行静态逆向工程或在适当的位置动态拦截解码。

4.  您可以应用商业混淆器，例如 ProGuard 的专用兄弟[DexGuard](http://www.saikoa.com/dexguard)。它还可以为您加密/混淆字符串和类。提取密钥需要更多的时间和专业知识。

5.  您也许可以在自己的服务器上运行部分应用程序。如果你能把钥匙放在那里，它们是安全的。

最后，这是你必须做出的经济权衡：密钥有多重要，你能负担多少时间或软件，对密钥感兴趣的黑客有多老练，他们想要多长时间花费，密钥被黑客入侵之前的延迟有多少价值，任何成功的黑客将分发密钥的规模等等。像密钥这样的小块信息比整个应用程序更难保护。从本质上讲，客户端没有什么是牢不可破的，但您当然可以提高标准。

（我是 ProGuard 和 DexGuard 的开发者）

* * *

## 回答 #2

> 赞同：89
> 
> 时间：2013-01-28T21:07:01.827

很少有想法，在我看来，只有第一个提供了一些保证：

1.  将您的秘密保存在互联网上的某些服务器上，并在需要时抓住它们并使用。如果用户即将使用保管箱，那么没有什么能阻止您向您的网站发出请求并获取您的密钥。

2.  将你的秘密放在 jni 代码中，添加一些可变代码以使你的库更大，更难反编译。您还可以将密钥字符串分成几部分并将它们保存在不同的地方。

3.  使用混淆器，还输入代码散列秘密，然后在需要使用时取消散列。

4.  将您的密钥作为资产中一张图像的最后一个像素。然后在需要时在您的代码中阅读它。混淆你的代码应该有助于隐藏会读取它的代码。

如果您想快速了解阅读 apk 代码是多么容易，请使用 APKAnalyser：

[http://developer.sonymobile.com/knowledge-base/tool-guides/analysis-your-apks-with-apkanalysisr/](http://developer.sonymobile.com/knowledge-base/tool-guides/analyse-your-apks-with-apkanalyser/)

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2018-02-02T21:12:47.213

另一种方法是一开始就没有设备上的秘密！请参阅[移动 API 安全技术](https://hackernoon.com/mobile-api-security-techniques-682a5da4fe10 "移动 API 安全技术")（尤其是第 3 部分）。

使用历史悠久的间接传统，在您的 API 端点和应用程序身份验证服务之间共享秘密。

当您的客户端想要进行*API 调用*时，它会要求 app auth 服务对其进行身份验证（使用强大的远程证明技术），并且它会收到一个由密钥签名的限时（通常是**JWT**）令牌。

令牌随每个*API 调用*一起发送，端点可以在处理请求之前验证其签名。

实际的秘密永远不会出现在设备上；实际上，该应用程序从不知道它是否有效，它只是请求身份验证并传递生成的令牌。作为间接的一个很好的好处，如果您想更改秘密，您可以这样做，而无需用户更新他们已安装的应用程序。

所以如果你想保护你的秘密，一开始就不在你的应用程序中包含它是一个很好的方法。

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2017-11-29T12:55:26.473

## **旧的不安全方式：**

按照 3 个简单的步骤来保护 API/密钥（**旧答案**）

我们可以使用 Gradle 来保护 API 密钥或 Secret 密钥。

**1\. gradle.properties（项目属性）：**用key创建变量。

```
GoolgeAPIKey = "Your API/Secret Key" 
```

**2\. build.gradle (Module: app) :**在 build.gradle 中设置变量，以便在活动或片段中访问它。将以下代码添加到 buildTypes {}。

```
buildTypes.each {
    it.buildConfigField 'String', 'GoogleSecAPIKEY', GoolgeAPIKey
} 
```

**3\. 通过应用的 BuildConfig 在 Activity/Fragment 中访问它：**

```
BuildConfig.GoogleSecAPIKEY 
```

## **更新 ：**

上述解决方案有助于开源项目通过 Git 提交。（感谢 David Rawson 和 riyaz-ali 的评论）。

根据 Matthew 和 Pablo Cegarra 的评论，上述方式不安全，反编译器将允许有人使用我们的密钥查看 BuildConfig。

**解决方案 ：**

我们可以使用 NDK 来保护 API 密钥。我们可以将密钥存储在本机 C/C++ 类中，并在我们的 Java 类中访问它们。

请关注[此](https://medium.com/@abhi007tyagi/storing-api-keys-using-android-ndk-6abb0adcadad)博客以使用 NDK 保护 API 密钥。

[关于如何在 Android 中安全存储令牌的后续行动](https://medium.com/google-developer-experts/a-follow-up-on-how-to-store-tokens-securely-in-android-e84ac5f15f17)

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2018-09-12T22:22:00.133

添加到@Manohar Reddy 解决方案，可以使用firebase 数据库或firebase RemoteConfig（具有Null 默认值）：

1.  加密你的密钥
2.  将其存储在 firebase 数据库中
3.  在应用程序启动期间或需要时获取它
4.  解密密钥并使用它

这个解决方案有什么不同？

*   firebase 没有凭据
*   firebase 访问受到保护，因此只有具有签名证书的应用才有权限进行 API 调用
*   加密/解密以防止中间人拦截。但是已经调用 https 到 firebase

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2013-01-28T20:54:41.890

> App-Secret 密钥应该保密 - 但是在发布应用程序时，某些人可以将其撤消。

对于那些不会隐藏的人，锁定`ProGuard`代码。这是一个重构，一些付费混淆器正在插入一些按位运算符来取回`jk433g34hg3` 字符串。如果您工作 3 天，您可以将黑客攻击时间延长 5 -15 分钟 :)

最好的方法是保持原样，恕我直言。

即使您将密钥存储在服务器端（您的 PC），也可以破解并打印出密钥。也许这需要最长的时间？无论如何，最好的情况是几分钟或几个小时。

普通用户不会反编译您的代码。

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2016-06-18T10:11:54.680

一种可能的解决方案是在您的应用程序中编码数据并在运行时使用解码（当您想要使用该数据时）。我还建议使用 progaurd 使您的应用程序的反编译源代码难以阅读和理解。例如，我在应用程序中放置了一个编码密钥，然后在我的应用程序中使用解码方法在运行时解码我的密钥：

```
// "the real string is: "mypassword" "; 
//encoded 2 times with an algorithm or you can encode with other algorithms too
public String getClientSecret() {
    return Utils.decode(Utils
            .decode("Ylhsd1lYTnpkMjl5WkE9PQ=="));
} 
```

proguarded 应用程序的反编译源代码是这样的：

```
 public String c()
 {
    return com.myrpoject.mypackage.g.h.a(com.myrpoject.mypackage.g.h.a("Ylhsd1lYTnpkMjl5WkE9PQ=="));
  } 
```

至少对我来说已经够复杂了。当我别无选择只能在我的应用程序中存储一个值时，我就是这样做的。当然我们都知道这不是最好的方法，但它对我有用。

```
/**
 * @param input
 * @return decoded string
 */
public static String decode(String input) {
    // Receiving side
    String text = "";
    try {
        byte[] data = Decoder.decode(input);
        text = new String(data, "UTF-8");
        return text;
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    }
    return "Error";
} 
```

反编译版本：

```
 public static String a(String paramString)
  {
    try
    {
      str = new String(a.a(paramString), "UTF-8");
      return str;
    }
    catch (UnsupportedEncodingException localUnsupportedEncodingException)
    {
      while (true)
      {
        localUnsupportedEncodingException.printStackTrace();
        String str = "Error";
      }
    }
  } 
```

你可以在 google 中搜索一下，找到这么多加密器类。

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2017-01-17T13:32:11.777

这个例子有很多不同的方面。我将提到我认为其他地方没有明确涵盖的几点。

**保护传输中的秘密**

首先要注意的是，使用他们的[应用身份验证](https://www.dropbox.com/developers/reference/auth-types#app "应用认证")机制访问 Dropbox API 需要您传输您的密钥和秘密。连接是 HTTPS，这意味着您无法在不知道 TLS 证书的情况下拦截流量。这是为了防止有人在从移动设备到服务器的过程中截获和读取数据包。对于普通用户来说，这是确保其流量隐私的一种非常好的方法。

它不擅长的是防止恶意人员下载应用程序并检查流量。对进出移动设备的所有流量使用中间人代理非常容易。由于 Dropbox API 的性质，在这种情况下，不需要反汇编或逆向代码工程来提取应用程序密钥和秘密。

您可以进行[固定](https://www.owasp.org/index.php/Certificate_and_Public_Key_Pinning)检查您从服务器收到的 TLS 证书是否是您期望的证书。这增加了对客户端的检查，使得拦截流量变得更加困难。这将使检查飞行中的流量变得更加困难，但固定检查发生在客户端中，因此仍有可能禁用固定测试。虽然它确实使它变得更难。

**保护静止的秘密**

作为第一步，使用诸如[proguard](https://developer.android.com/studio/build/shrink-code.html)之类的东西将有助于使任何秘密所在的位置变得不那么明显。您还可以使用 NDK 存储密钥和秘密并直接发送请求，这将大大减少具有适当技能的人来提取信息的数量。通过不将值直接存储在内存中任何时间长度，可以实现进一步的混淆，您可以按照另一个答案的建议在使用前对它们进行加密和解密。

**更高级的选项**

如果您现在偏执于将秘密放在应用程序的任何位置，并且您有时间和金钱来投资更全面的解决方案，那么您可能会考虑将凭据存储在您的服务器上（假设您有）。这将增加对 API 的任何调用的延迟，因为它必须通过您的服务器进行通信，并且由于数据吞吐量的增加可能会增加运行服务的成本。

然后，您必须决定如何最好地与您的服务器通信以确保它们受到保护。这对于防止您的内部 API 再次出现所有相同的问题非常重要。我能给出的最佳经验法则是不要因为中间人威胁而直接传输任何秘密。相反，您可以使用您的秘密对流量进行签名，并验证到达您的服务器的任何请求的完整性。执行此操作的一种标准方法是计算以密钥为密钥的消息的 HMAC。我在一家拥有安全产品的公司工作，该产品也在该领域运营，这就是我对这类东西感兴趣的原因。事实上，这是我的一位同事的[一篇博客文章，其中涵盖了大部分内容。](https://www.approov.io/blog/simple-app-authentication.html)

**我应该做多少？**

有了这样的安全建议，您需要做出成本/收益决定，确定您想让某人闯入的难度。如果您是一家保护数百万客户的银行，您的预算与支持应用程序的人完全不同。空余时间。阻止某人破坏您的安全几乎是不可能的，但实际上很少有人需要所有的花里胡哨，并且通过一些基本的预防措施，您可以获得很长的路要走。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2016-09-24T15:41:13.317

最安全的解决方案是将您的密钥保存在服务器上，并通过您的服务器路由所有需要该密钥的请求。这样，密钥永远不会离开您的服务器，因此只要您的服务器是安全的，那么您的密钥也是如此。当然，这种解决方案存在性能成本。

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2016-12-15T16:27:44.127

无论你做什么来保护你的密钥都不会是一个真正的解决方案。如果开发人员可以反编译应用程序，则无法保护密钥，隐藏密钥只是通过模糊来确保安全，代码混淆也是如此。保护密钥的问题在于，为了保护它，您必须使用另一个密钥，并且该密钥也需要得到保护。想想隐藏在一个用钥匙锁住的盒子里的钥匙。您将一个盒子放在房间内并锁定房间。您还剩下另一把钥匙来保护。并且该密钥仍将在您的应用程序中进行硬编码。

因此，除非用户输入 PIN 或短语，否则无法隐藏密钥。但要做到这一点，您必须有一个方案来管理带外发生的 PIN，这意味着通过不同的渠道。对于保护 Google API 等服务的密钥当然不切实际。

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2018-03-27T07:56:19.997

把秘密藏在**`firebase database`**里面，在应用启动时从中获取，这比调用Web服务要好得多。

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2016-03-30T15:51:53.513

年代久远的帖子，但仍然足够好。我认为将它隐藏在 .so 库中会很棒，当然使用 NDK 和 C++。.so 文件可以在十六进制编辑器中查看，但祝你反编译好运：P

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2016-05-07T18:55:33.550

保持这些隐私的唯一真正方法是将它们保存在您的服务器上，让应用程序将任何内容发送到服务器，然后服务器与 Dropbox 交互。这样您就永远不会以任何格式分发您的私钥。

# c++ - 为什么字符串文字是 const？

> ID：14570993
> 
> 赞同：16
> 
> 时间：2013-01-28T20:50:57.540
> 
> 标签：c++, string, constants, literals

众所周知，在 C++ 中，字符串文字是不可变的，修改字符串文字的结果是未定义的。例如

```
char * str = "Hello!";
str[1] = 'a'; 
```

这将带来未定义的行为。

除此之外，字符串文字被放置在静态内存中。所以它们存在于整个程序中。我想知道为什么字符串文字有这样的属性。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-28T21:06:24.963

有几个不同的原因。

一种是允许将字符串文字存储在只读内存中（正如其他人已经提到的那样）。

另一个是允许合并字符串文字。如果一个程序在几个不同的地方使用相同的字符串字面量，最好允许（但不一定要求）编译器合并它们，这样您就可以获得指向同一内存的多个指针，而不是每个指针占用一块单独的内存。这也适用于两个字符串文字不一定*相同*但结尾相同的情况：

```
char *foo = "long string";
char *bar = "string"; 
```

在这种情况下，有可能`bar`是`foo+5`（如果我计算正确的话）。

在这两种情况下，如果您允许修改字符串文字，它可能会修改恰好具有相同内容的*另一个字符串文字。*同时，老实说，强制这样做也没有什么意义——拥有足够多的字符串文字可以重叠，大多数人可能希望编译器运行得更慢只是为了节省（也许）几十个字节，这是非常罕见的左右的记忆。

在编写第一个标准时，已经有编译器使用了所有这三种技术（可能还有一些其他技术）。由于无法描述您从修改字符串文字中获得的一种行为，而且显然没有人认为这是一项重要的支持能力，因此他们做了显而易见的事情：说即使尝试这样做也会导致未定义的行为。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-28T20:53:43.870

修改文字是未定义的行为，因为标准是这样说的。标准这样说是为了允许编译器将文字放入只读内存中。它这样做有很多原因。其中之一是允许编译器优化只存储在源代码中重复多次的文字的一个实例。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-28T21:07:25.163

我相信您会询问将文字放置在只读存储器中的原因，而不是有关链接器执行此操作的技术细节或禁止此类操作的标准的法律细节。

当字符串文字的修改*起作用*时，即使在没有字符串合并的情况下也会导致细微的错误（如果我们决定允许修改，我们有理由禁止）。当你看到像这样的代码

```
char *str="Hello";
.../* some code, but str and str[...] are not modified */
printf("%s world\n", str); 
```

很自然地得出结论，您*知道*将要打印什么，因为`str`（及其内容）在初始化和使用之间的特定位置没有被修改。

但是，如果字符串文字是可写的，那么您*将不再知道它*：str[0] 可能会在以后被覆盖，在此代码中或在深度嵌套的函数调用中，并且*当再次运行代码时*，

```
char *str="Hello"; 
```

将不再保证任何关于内容的内容`str`。正如我们所料，这个初始化被实现为将链接时间中已知的地址移动到一个地方`str`。它不检查`str` 包含“Hello”的内容，也不分配它的新副本。但是，我们将此代码*理解*为重置`str`为“Hello”。很难克服这种自然的理解，也很难对无法保证的代码进行推理。当你看到类似 的表达式 `x+14`时，如果你不得不考虑 14 可能会被其他代码覆盖，所以它变成了 42 怎么办？字符串也有同样的问题。

这就是不允许在标准（不需要及早检测故障）和实际目标平台（提供检测潜在错误的好处）中修改字符串文字的原因。

我相信许多解释这件事的尝试都遭受了最糟糕的循环推理。该标准禁止写入文字，因为编译器可以合并字符串，或者可以将它们放置在只读内存中。它们被放置在只读存储器中以捕获违反标准的情况。合并文字是有效的，因为标准禁止......这是您要求的一种解释吗？

让我们看看其他语言。[通用 Lisp 标准](http://www.lispworks.com/reference/HyperSpec/) 对文字进行了未定义行为的修改，尽管之前 Lisp 的历史与 C 实现的历史非常不同。那是因为可写文字在*逻辑上*是 危险的。语言标准和内存布局仅反映了这一事实。

Python 语言只有一个地方可以发生类似于“写入文字”的事情：参数默认值，而这一事实[一直让人们感到困惑](http://effbot.org/zone/default-values.htm)。

您的问题已标记为`C++`，我不确定它在*隐式转换*为 non-const方面的当前状态`char*`：如果是转换，是否已弃用？我希望其他答案能够在这一点上提供完整的启示。当我们在这里谈论*其他*语言时，让我提一下普通 C。在这里，字符串文字*不是*const，并且要问的一个等效问题是*为什么我不能修改字符串文字*（而有更多经验的人会问，*为什么是字符串如果我不能修改它们，文字非常量*？）。但是，尽管存在这种差异，上述推理完全适用于 C。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T20:54:28.440

因为是 K&R C，所以没有“const”这样的东西。在 ANSI C++ 之前也是如此。因此，有很多代码都有类似`char * str = "Hello!";` 的东西，如果标准委员会将文本文字设为 const，那么所有这些程序都将不再编译。于是他们做出了妥协。文本文字是官方的`const char[]`，但它们有一个无声的隐式转换为`char*`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-28T21:39:20.697

在 C++ 中，字符串文字是`const`因为您不允许修改它们。在标准 C 中，它们也会`const`如此，除了当`const`被引入 C 时，有太多的代码`char* p = "somethin";`使它们成为 const 会破坏，以至于它被认为是不可接受的。（C++ 委员会选择了一个不同的解决方案来解决这个问题，不推荐使用的隐式转换允许上述情况。）

在最初的 C 中，字符串文字*不是*const 的，并且是可变的，并且保证没有两个字符串文字共享任何内存。很快就意识到这是一个严重的错误，允许出现以下情况：

```
void
mutate(char* p)
{
    static char c = 'a';
    *p = a ++;
} 
```

在另一个模块中：

```
mutate( "hello" );  //  Can't trust what is written, can you. 
```

(Some early implementations of Fortran had a similar issue, where `F(4)` might call `F` with just about any integral value. The Fortran committee fixed this, just like the C committee fixed string literals in C.)

# java - 从 Youtube 视频提要中获得超过 999 个结果的方法？

> ID：14570996
> 
> 赞同：0
> 
> 时间：2013-01-28T20:51:03.547
> 
> 标签：java, video, youtube, youtube-api, feed

我现在正在写一篇关于长尾的学士论文，并希望获得数据来研究它的行为。这就是为什么我想检索有关 youtube 视频观看次数的信息。唯一的问题是，一个特定主题（如“most_popular”）的视频提要只有 999 个条目。有没有办法将更多数据检索到特定类别或一般情况下？我将在此处发布我当前的代码（尝试检索“体育”类别的数据）：

```
public static void printVideoEntry(VideoEntry videoEntry, boolean detailed) {
      System.out.println("Title: " + videoEntry.getTitle().getPlainText());

      if(videoEntry.isDraft()) {
        System.out.println("Video is not live");
        YtPublicationState pubState = videoEntry.getPublicationState();
        if(pubState.getState() == YtPublicationState.State.PROCESSING) {
          System.out.println("Video is still being processed.");
        }
        else if(pubState.getState() == YtPublicationState.State.REJECTED) {
          System.out.print("Video has been rejected because: ");
          System.out.println(pubState.getDescription());
          System.out.print("For help visit: ");
          System.out.println(pubState.getHelpUrl());
        }
        else if(pubState.getState() == YtPublicationState.State.FAILED) {
          System.out.print("Video failed uploading because: ");
          System.out.println(pubState.getDescription());
          System.out.print("For help visit: ");
          System.out.println(pubState.getHelpUrl());
        }
      }

      if(videoEntry.getEditLink() != null) {
        System.out.println("Video is editable by current user.");
      }

      if(detailed) {

        YtStatistics stats = videoEntry.getStatistics();
        if(stats != null ) {
          System.out.println("View count: " + stats.getViewCount());
        }
        System.out.println();

      }
    }

  public static void printVideoFeed(VideoFeed videoFeed, boolean detailed) {
      for(VideoEntry videoEntry : videoFeed.getEntries() ) {
        printVideoEntry(videoEntry, detailed);
      }
    } 

  public static void printEntireVideoFeed(YouTubeService service, 
          VideoFeed videoFeed, boolean detailed) throws MalformedURLException, 
          IOException, ServiceException {
         do {
           printVideoFeed(videoFeed, detailed);
           if(videoFeed.getNextLink() != null) {
             videoFeed = service.getFeed(new URL(videoFeed.getNextLink().getHref()), 
               VideoFeed.class);
           }
           else {
             videoFeed = null;
           }
         }
         while(videoFeed != null);
        }

  public static void main(String[] args) {

  try {

      YouTubeService service = new YouTubeService("test");

      YouTubeQuery query = 
              new YouTubeQuery(new URL("http://gdata.youtube.com/feeds/api/videos"));
            query.setFullTextQuery("Sports");
            VideoFeed videoFeed = service.query(query, VideoFeed.class);
            printEntireVideoFeed(service, videoFeed, false);
  }
  catch(AuthenticationException e) {
    e.printStackTrace();
  }
  catch(MalformedURLException e) {
    e.printStackTrace();
  }
  catch(ServiceException e) {
    e.printStackTrace();
  }
  catch(IOException e) {
    e.printStackTrace();
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:29:45.643

999 个条目似乎是设计的限制。请参阅[YouTube API v2.0 – 视频供稿类型](https://developers.google.com/youtube/2.0/developers_guide_protocol_video_feeds)：

> “API 返回视频提要以响应搜索视频的请求。视频提要最多包含 999 个条目。”

看起来同样的限制也适用于网站。

您可以尝试[为 YouTube Data API 添加自定义查询参数，](https://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters)以限制您获得的结果数量，例如：

*   标题=真|假
*   持续时间=短|中|长
*   格式=1|5|6
*   time=today|this_week|this_month（而不是默认值：all_time）

这样，您可以使用查询组合来获得更多您感兴趣的结果。

**编辑**：在搜索如何使用持续时间时，我遇到了[YouTube GData API - 在 Stack Overflow 上查询具有特定持续时间的视频](https://stackoverflow.com/questions/10482203/youtube-gdata-api-query-for-videos-with-a-specific-duration?rq=1)，它指的是[YouTube API v2.0 - 检索部分响应](https://developers.google.com/youtube/2.0/developers_guide_protocol_partial)。例如，您可以使用这个实验性的“检索部分响应 API”指定最大视图计数（这可能对获取长尾有用），而这只是您可以使用它做的众多事情之一。

# php - 销毁后 print 仍然写入旧的 Session 变量值

> ID：14570999
> 
> 赞同：1
> 
> 时间：2013-01-28T20:51:11.800
> 
> 标签：php, session, destroy

我使用了一些 Session 变量。当我注销时，函数 show_number 应该写 0 数字但它没有。

注销.php：

```
<?php
session_start();
session_destroy();
require_once('upper.php');
show_number(); //this function is declared on upper.php
?> 
```

索引.php：

```
<?php
$_SESSION['var'] = 1;
echo "<a href="logout.php">Logout</a>
?> 
```

上层.php：

```
function show_number() { // shows value of $_SESSION['var'];
if (isset($_SESSION['var']))
  echo "1";
else
  echo "0";
} 
```

问题是：当我单击注销链接时，回显仍然写入数字 1，我必须重新加载页面才能看到 0 值。

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T20:53:59.523

全局`$_SESSION`对象不会被清除[`session_destroy`](http://php.net/manual/en/function.session-destroy.php)：

> 它不会取消设置与会话关联的任何全局变量，也不会取消设置会话 cookie。

要清除代码中的会话数据：

```
session_start();
session_destroy();
$_SESSION = array(); 
```

* * *

或者更彻底地消除所有会话数据（来自同一文档页面）：

```
<?php
// Initialize the session.
// If you are using session_name("something"), don't forget it now!
session_start();

// Unset all of the session variables.
$_SESSION = array();

// If it's desired to kill the session, also delete the session cookie.
// Note: This will destroy the session, and not just the session data!
if (ini_get("session.use_cookies")) {
    $params = session_get_cookie_params();
    setcookie(session_name(), '', time() - 42000,
        $params["path"], $params["domain"],
        $params["secure"], $params["httponly"]
    );
}

// Finally, destroy the session.
session_destroy();
?> 
```