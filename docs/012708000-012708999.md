# StackOverflow 问答 12708000-12708999

# iphone - 如何获得自动续订订阅的取消日期？

> ID：12708009
> 
> 赞同：3
> 
> 时间：2012-10-03T11:57:32.850
> 
> 标签：iphone, in-app-purchase

我正在开发通过 IAP 销售“自动续订订阅”的 iOS 应用程序。这个应用程序必须知道“取消订阅的日期”，但到目前为止我找不到方法。

您能告诉我如何获得自动续订订阅的取消日期吗？

我试图如下确认这一点，但我找不到任何线索。

*   我怀疑[“自动续订订阅”](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/RenewableSubscriptions/RenewableSubscriptions.html#//apple_ref/doc/uid/TP40008267-CH4-SW2)文章中描述的“expires_date”键将存储用户取消订阅的日期。但是，该文章没有明确解释。

*   我编写了一个非常简单的程序来测试 IAP 的实际行为，但它并没有像我预期的那样运行良好。（当此示例在“沙盒模式”iTunes Connect 中验证收据时，它总是在“状态”键中返回 21007，但它根本没有返回“过期日期”值）。

谢谢您的帮助。

秀彦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-14T14:27:12.053

我也有同样的问题。我确实[在文档](https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/StoreKitGuide/Chapters/Subscriptions.html)中找到了一些信息，但似乎没有任何方法可以对此进行测试。

总而言之，收据中应该有一个**cancel_date**字段。它应该在同一个收据中，您会发现 expires_date，适用于 iOS 6 和 7 交易收据！如您所见，一切都基于“应该”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-14T07:11:31.267

[您可以在文档](https://developer.apple.com/library/ios/releasenotes/General/ValidateAppStoreReceipt/Chapters/ReceiptFields.html#//apple_ref/doc/uid/TP40010573-CH106-SW1)中找到cancellation_date字符串，它表示订阅是否被取消，附加[文档](https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/StoreKitGuide/Chapters/Subscriptions.html#//apple_ref/doc/uid/TP40008267-CH7-SW6)也可能会有所帮助；

# macos - OS X 如何自动查找/注册服务（仅从非系统文件夹中的 .app 存在）？

> ID：12708017
> 
> 赞同：2
> 
> 时间：2012-10-03T11:57:46.047
> 
> 标签：macos, osx-mountain-lion

我试图了解 Mac OS（Mountain Lion，但我认为至少因为 Leopard）如何自动注册存档中存在但未安装到 /Applications 的应用程序（.app）提供的服务。我一直在用谷歌搜索，但我找不到导致这种行为的底层 Mac OS“技术”（基本搜索词“服务”、“自动”、“mac os x”不够具体，无法覆盖一般阅读材料） .

具体来说，我正在从 Time Machine Backup 重新安装，我注意到 Mac OS 会自动为尚未安装的应用程序注册服务（但存在于各种存档文件夹中）。

通常，我希望操作系统不会触及我留在非系统文件夹中的文件，但显然这里不是这种情况。当然，Spotlight 索引所有内容（无论如何都是），但它是否也注册了“有趣的”文件以供系统使用？

我只是想了解这种行为，并会感谢任何链接或参考。

# wcf - 在根据服务合同验证 WCF 服务请求之前修改它

> ID：12708021
> 
> 赞同：0
> 
> 时间：2012-10-03T11:58:00.890
> 
> 标签：wcf

我一直试图在进行服务调用之前拦截请求。

[在客户端使用 WCF 可扩展性](https://stackoverflow.com/questions/12642093/using-wcf-extensibility-at-client-side)

这背后的想法是在请求中添加某些属性，以便在针对 ServiceContract Schema 验证请求时，请求必须显示为有效。

我按照这里的建议使用了 IParameterInspector 和 BehaviorExtension -

[将 C# WCF 可扩展性代码移动到配置文件](https://stackoverflow.com/questions/12682535/move-c-sharp-wcf-extensibility-code-to-configuration-file)

然而，似乎服务请求正在客户端验证，甚至在调用到达**IParameterInspecter** `public object BeforeCall(string operationName, object[] inputs)`方法之前。我打算在其中添加属性。

但就在拨打服务电话时，出现以下错误 -

> 通信对象 System.ServiceModel.ChannelFactory`1[SomeService.IServiceContract] 无法用于通信，因为它处于故障状态。

我应该在哪里拦截服务调用，以向请求添加属性。

必须确保在客户端针对模式验证请求之前执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:20:19.217

故障通道通常是由服务响应客户端请求而引发的意外异常（未在合同中明确定义）引起的。如果它发生在`BeforeCall`它可能来自不同的原因之前。

想到的第一个是您错误地插入`IParameterInspecter`并且没有通过它，您应该首先测试它是否正确插入简化的场景。

如果不是，它可能来自`establishSecurityContext="true"`消息安全性定义的服务方法调用之前生成的身份验证请求，身份验证请求因意外异常而被拒绝，它使通道出现故障并且您不能再使用它。

没有足够的信息让我考虑其他可能的原因。您应该首先检查这些，然后返回其他代码和/或配置示例以进行进一步调查。

# mysql - 对多个 ORDER BY 列求和

> ID：12708023
> 
> 赞同：1
> 
> 时间：2012-10-03T11:58:12.180
> 
> 标签：mysql

我创建了[这个](https://stackoverflow.com/questions/12707700/how-to-order-by-field-with-group-by)问题，女巫现在得到了照顾，但我在同一个查询中遇到了另一个问题：

```
SELECT
  t.type,
  SUM( t.external_account )
FROM
  u_contracts c,
  u_data u,
  u_transactions t
WHERE
  c.user_id = u.id
  AND t.contract_id = c.id
  AND t.nulled =0
  AND DATE (c.init_date) < DATE (u.dead)
  AND u.dead IS NOT NULL
  AND t.type != 'repay'
GROUP BY
  t.type
ORDER BY
  FIELD( t.type, 'initial', 'comission', 'overpay', 'penalty', 'penalty2' ); 
```

我得到的结果如下：

```
+-----------+---------------------------+
| type      | SUM( t.external_account ) |
+-----------+---------------------------+
| prolong   |                 360560.00 |
| reg       |                   3889.00 |
| reg2      |                    301.20 |
| initial   |                 610628.54 |
| comission |                 125623.49 |
| overpay   |                   6461.57 |
| penalty   |                  21461.52 |
| penalty2  |                   4010.00 |
+-----------+---------------------------+ 
```

我需要总结类型为**prolong** + **reg** + **reg2**的结果并将它们添加到列表的末尾。

现在我完全不知道它们是如何求和的，考虑到它们是`GROUP BY t.type`请求的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T12:04:58.320

试试这个：

```
SELECT 
    t.type,
    SUM(t.external_account)
FROM
(
    SELECT
      CASE t.type
        WHEN 'prolong' THEN 'prolong + reg + reg2'
        WHEN 'reg' THEN 'prolong + reg + reg2'
        WHEN 'reg2' THEN 'prolong + reg + reg2'
        ELSE t.type
      END AS type,
      t.external_account
    FROM
      u_contracts c,
      u_data u,
      u_transactions t
    WHERE
      c.user_id = u.id
      AND t.contract_id = c.id
      AND t.nulled =0
      AND DATE (c.init_date) < DATE (u.dead)
      AND u.dead IS NOT NULL
      AND t.type != 'repay'
) t 
GROUP BY
      t.type
ORDER BY
  FIELD( t.type, 'initial', 'comission', 'overpay', 'penalty', 'penalty2' ); 
```

# python - 从同一个类调用函数

> ID：12708025
> 
> 赞同：1
> 
> 时间：2012-10-03T11:58:25.823
> 
> 标签：python

我使用以下类作为我所拥有的简化示例。那么，我怎样才能从 alfa 调用函数 beta 而不会收到错误： NameError: global name 'beta' is not defined

```
class Test:
    def alfa(self):
        beta('a')
    def beta(something):
        print " what i get:"+something
call=Test()
call.alfa() 
```

我应该`global beta`在类声明之后使用吗？如果我这样做，它会起作用，但我不确定是否是正确的做法。

问候。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T12:00:53.907

`self.beta()`.

并且 beta 应该`self`作为一个参数，完全一样`alpha`。

# content-management-system - 将 OpenCMS 与 Liferay 集成

> ID：12708027
> 
> 赞同：0
> 
> 时间：2012-10-03T11:58:33.387
> 
> 标签：content-management-system, liferay-6, opencms

我正在使用 Liferay 6.1。我想将 OpenCMS 与 Liferay 一起使用。我该怎么做 ？我已经用谷歌搜索了这个主题。但找不到任何解决方案。谁能帮我 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T15:23:35.057

Another possibility could be CMIS (see [http://en.wikipedia.org/wiki/Content_Management_Interoperability_Services](http://en.wikipedia.org/wiki/Content_Management_Interoperability_Services)). Newer versions of OpenCms can act as a CMIS Server and Liferay is able to act as a CMIS client.

This would be a standard-based integration. This means, there should be some documentation how to do certain things.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T07:14:01.263

将 OpenCms 与 Liferay Portal Server 集成有很多选择，一些

1.  OC 和 LR 集成在同一个容器中 优点：成本（如果按容器付费） 缺点：维护，对安装的影响很大

2.  通过 http pro 通信的不同容器上的 OC/LR：比 1 更容易 缺点：低级通信能力

3.  OC/LR 在不同的容器上，OC 暴露由 LR pro 调用的 WebServices：松散耦合，糟糕的安装影响 缺点：有点 IT 技能

这是一个大问题，你不能一个人做这一切。应该有一个社区来支持第三种解决方案

[看这个链接...](http://www.opencms.org/en/events/opencms_days_2009/program/sessions/t3.html)

# php - 使用 php 创建 jqplot 图

> ID：12708029
> 
> 赞同：2
> 
> 时间：2012-10-03T11:58:35.637
> 
> 标签：php, mysql, json, jqplot

对不起，我英语不太好。

我不知道如何将值传递给 jqplot 应用程序。

php 网页显示 [{"PER":"23"},{"PER":"47"},{"PER":"86"},{"PER":"25"},{"PER": "74"}] 来自 mysql 服务器。

该表有一列，值为 23、47、86、25、74

这是php代码。

```
<?php
mysql_connect("localhost","root","autoset");
mysql_select_db("test");

$q=mysql_query("SELECT PER FROM Evaluation");
while($e=mysql_fetch_assoc($q))
    $output[]=$e;

print(json_encode($output)); 

mysql_close();

?> 
```

这是 html 示例文件。

```
 $(document).ready(function(){

        var ajaxDataRenderer = function(url, plot) {
            var ret = null;
            $.ajax({
                // have to use synchronous here, else returns before data is fetched
                async: false,
                url: url,
                dataType:'json',
                success: function(data) {
                    ret = data;
                }
            });
            return ret;
        };

        var jsonurl ="http://127.0.0.1/index.php"; //"../report/jsondata.txt";

        plot1 = $.jqplot("chart2", jsonurl, {
            title: 'AJAX JSON Data Renderer',
            dataRenderer: ajaxDataRenderer,

            animate: true,
            animateReplot: true,
            cursor: {
              show: true,
              zoom: true,
              looseZoom: true,
              showTooltip: false,

            },
            series:[   
              {
                label:'a',
                color: '#FF0000',
                rendererOptions: {
                  animation: {
                    speed: 2000
                  }
                }
              },
              {
                  label:'b',
                  color: '#0000FF',
                  rendererOptions: {
                    animation: {
                      speed: 2000
                    }
                  }
                }
            ],

            axesDefaults: {
              pad: 0
            },
            axes: {
              xaxis: {
                label: "Period",
                renderer: $.jqplot.CategoryAxisRenderer,
                labelRenderer: $.jqplot.CanvasAxisLabelRenderer,

              },
              yaxis: {
                label: "PER",
                tickOptions: {
                  formatString: "%d"
                },
                rendererOptions: {
                  //forceTickAt0: true
                }
              },
              y2axis: {
                tickOptions: {
                  formatString: "%d"
                },
                rendererOptions: {
                  alignTicks: true
                  //forceTickAt0: true
                }
              }
            },

            highlighter: {
              show: true,
              showLabel: true, 
              tooltipAxes: 'y',
              sizeAdjust: 7.5 , tooltipLocation : 'ne'
            },

            legend: {
              show: true,
              location: 'sw',
              placement: 'outside'
            }  
          });
    }); 
```

当我使用

```
var jsonurl ="../report/jsondata.txt"; it worked. 
```

jsondata.txt 包括 [[ 23, 47, 86, 25, 74 ]]。

但是当我使用另一个时它没有。我想从服务器获取值。我想传递值存在问题。

请具体帮助TT

谢谢！

**编辑**

这是桌子。内容只有一张表。我想传递 PER 的值。

> **企业时期每股收益股票价格**
> 
> 232 232 23 432 **23**
> 
> 236 56 65 43 **47**
> 
> 574 53 45 75 **86**
> 
> 453 45 45 265 **25**
> 
> 46 63 67 45 **74**

我只是暂时设定值来测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:36:37.590

问题是您的 json 数据的格式，它来自（关联） $output 数组。你不想要那些“PER”！尝试替换这些代码行：

```
while($e=mysql_fetch_assoc($q))
    $output[]=$e;

print(json_encode($output)); 
```

用这些：

```
while($e=mysql_fetch_assoc($q))
    $output[]=$e["PER"];

print ('['.json_encode($output).']'); 
```

这会将 $output 从关联数组更改为标准整数数组。

并且打印行在 json 数据周围添加了额外的方括号——这是 jqplot 需要的。

# ruby - Ruby to_json on object 输出实例变量

> ID：12708034
> 
> 赞同：2
> 
> 时间：2012-10-03T11:58:49.757
> 
> 标签：ruby, json, sinatra

我正在使用 Sinatra 并尝试通过使用 'json' gem 并调用 .to_json 方法以 JSON 格式输出对象。我希望输出是 JSON，其中包含 attr_reader 部分中的符号及其值。

这是我的代码。我需要做一些特别的事情才能让它工作吗？

```
require "sinatra"
require "json"    

class Foo
  attr_reader :id, :name

  def initialize(id, name)
    @id = id
    @name = name
  end
end

get '/start' do
  content_type :json
  Foo.new(2, "john").to_json
end 
```

我从输出中得到的只是对象的默认 to_s。

```
"#<Foo:0x007fe372a3ba80>" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T12:04:18.353

你需要在你的类上指定一个 to_json 方法。

```
class Foo
  attr_reader :id, :name

  def initialize(id, name)
    @id = id
    @name = name
  end

  def to_json 
    {:id => @id, :name => @name}.to_json
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:06:58.417

看起来你需要一个`to_hash`方法

```
class Foo
  def to_hash
    {:id => @id, :name => @name}
  end
end 
```

否则 Foo 不是 json 可识别的类型。

# python - 如果在线程内运行，urllib2 开启程序会挂起

> ID：12708039
> 
> 赞同：0
> 
> 时间：2012-10-03T11:59:09.543
> 
> 标签：python, pygtk, urllib2

我有一个运行良好的代码（连接到页面，获取 PHPSESSID）。当我将该代码放在一个函数中时，然后创建了一个线程：

```
Gdk.threads_enter()
threading.Thread(target=self.do_login,args=()).start()
Gdk.threads_leave() 
```

代码挂在

`f = opener.open(req)`

任何想法为什么？

当我强制关闭应用程序时，它会完成所有内容并在终端中打印所有内容而不会出现错误。为什么它只挂在线程中的特定行上。它不在线程之外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T21:49:16.273

好的，我只是在这里重新发布评论，以便问题得到解决。

正如其他关于`pygtk`and的帖子中提到的`threading`那样，一些看起来很奇怪的挂起行为似乎与没有实现以下行有关：

```
gobject.threads_init() 
```

在调用 gtk 主循环之前。请注意，尽管已经在 stackoverflow 上报告了其他问题，但该解决方案可能适用于 Windows，也可能不适用于 Windows。

# windows - Windows XP 上的 IE 不使用 GeoTrust SSL 证书（2048 位 RSA）但回退到自签名 1024 位 RSA 证书

> ID：12708042
> 
> 赞同：1
> 
> 时间：2012-10-03T11:59:20.397
> 
> 标签：windows, ssl, windows-xp, ssl-certificate

这一直让我发疯，尽管我怀疑答案可能很简单！

我们的一个客户的域有一个 GeoTrust SSL 证书（下面有更多详细信息），问题是 Windows XP 上的用户没有在 IE 中获得该证书（我们必须为 Firefox 部署一个中间证书，所以这可能就是为什么作品）。在 IE 7 和 8 中尝试过，两者都被发送自签名证书，导致浏览错误。

Win 7 上的 IE8 和 9 很好，它们会收到正确的证书，并且可以在没有任何警告的情况下查看该站点。基于此，我推测它可能与 XP 而不是浏览器有关，尽管很高兴得到纠正。

任何人都知道为什么会发生这种情况（我假设 XP 无法处理 2048 位根证书，但谷歌建议不这样做）？我已经在我的测试机器上安装了最新的更新，但它似乎仍然收到了错误的密钥。

鉴于站点的性质，在用户的机器上安装 CA 不是一种选择，如果答案是“他们将不得不忽略它”，客户将不会太高兴，但显然如果这就是它的原因...

**证书详情**

*   由 GeoTrust DV SSL CA 发布
*   有效日期：2012 年 10 月 6 日 - 2012 年 13 月 6 日
*   证书签名算法：PKCS #1 SHA-1 with RSA
*   公钥算法：PKCS#1 RSA
*   公钥长度：2048 位

**自签名**

*   颁发者：localhost.localdomain
*   算法：sha1RSA
*   公钥长度：1024 位

更新：客户端刚刚报告他们在 Windows 7 上的 IE9 中也遇到了错误。在我的测试平台上工作正常，所以我认为还有更多的挖掘工作要做！

# xml - 将 XML 传递给 Flex 应用程序

> ID：12708045
> 
> 赞同：0
> 
> 时间：2012-10-03T11:59:40.280
> 
> 标签：xml, apache-flex

我读到将数据传递给 Flex 应用程序的方法是 flashvars 和 URL 片段。但是，似乎两者都只适用于简单数据。如果我想将一些（动态）XML 数据传递给 Flex 怎么办？哪种方式更适合这种情况？还是完全有另一种方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:03:46.300

只需在运行时从服务器加载您的 XML 数据。对于 XML，我会使用[URLLoader](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLLoader.html)或[HTTPService](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/rpc/http/mxml/HTTPService.html)调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T11:59:44.877

我最终使用了 GET 响应并将其传递到查询字符串中。我知道这很丑，但我没有找到其他方法......

# wpf - 如何在多行中显示项目

> ID：12708047
> 
> 赞同：0
> 
> 时间：2012-10-03T11:59:55.117
> 
> 标签：wpf, xaml, panel

我想在 XAML 中创建一个布局，如下所示![在此处输入图像描述](../Images/55be41769e34dcbd6b63a56a9d0aa512.png)

视图模型用于填充单元格。前两个单元格绑定到视图模型中的两个简单属性，而其余单元格显示视图模型中集合的项目。每行有四个单元格，行数由集合的项目数决定。如何定义一个面板以显示从单元格 3 开始的集合并跨越 XAML 中的多行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:19:16.887

在这里，我使用 2 uniformgrid 得到了你需要的东西：

```
<UniformGrid Columns="4"  VerticalAlignment="Top" >
   <Rectangle Fill="green" Width="50" Height="50" />
   <Rectangle Fill="green" Width="50" Height="50"/>
</UniformGrid>
<UniformGrid Columns="4"  VerticalAlignment="Top" FirstColumn="2">
   <Rectangle Fill="red"  Width="50" Height="50"/>
   <Rectangle Fill="red"  Width="50" Height="50"/>
   <Rectangle Fill="red"  Width="50" Height="50"/>
   <Rectangle Fill="red"  Width="50" Height="50"/>
</UniformGrid> 
```

我不知道您的 ViewModel 怎么样，但我认为将您的属性和列表绑定到统一网格会非常简单。

# android - 如何将模拟对象放入 Activity 的 onCreate() 中？

> ID：12708048
> 
> 赞同：1
> 
> 时间：2012-10-03T12:00:05.600
> 
> 标签：android, automated-tests

我有一个使用对象的活动。为了进行测试，我想模拟这个对象，但我找不到如何让 Activity 在 onCreate() 函数中使用模拟对象。

我正在使用 AndroidMock 在测试中创建模拟对象和 Robotium。例如：

*应用程序*（标准 Android 项目）：

```
class MainActivity extends ... {
    MyObject obj;
    MainActivity() {
        obj = new MyObject();
    }
    void onCreate(Bundle b) {
        obj.doSomething();
        ...
    }
} 
```

*测试*（标准 Android 测试项目）：

```
class MainActivityTest extends ... {
    @UsesMocks(MyObject.class)
    public void testMyObject() {
        // create the mock object
        MyObject o = AndroidMock.createMock(MyObject.class);
        AndroidMock.expect(o.doSomething()).andReturn(false);
        AndroidMock.replay(o);

        // Here some code which makes the activity use the mock object
        // and calls the onCreate() function on the activity.

        // Do some tests on the activity.
        Solo solo = new Solo(getInstrumentation(), getActivity());
        Assert.assertTrue(solo.searchText("It works!")); 
        AndroidMock.verify(o);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T06:50:05.443

我知道这两种方法。

1.  使用 DI Conrainer。 [机械果汁](http://code.google.com/p/roboguice/)

    ```
    @inject
    MyObject obj; 
    ```

2.  继承被测试的类

活动

```
 class DummyMainActivity extends MainActivity {
        Bundle b;
        @Override
        void onCreate(Bundle b) {
            this.b = b;
        }
        void onCreateSuper() {
            super(b);
        }
    } 
```

测试

```
 class MainActivityTest extends ActivityUnitTestCase<DummyMainActivity> {
        @UsesMocks(MyObject.class)
        public void testMyObject() {
             // create the mock object
             MyObject o = AndroidMock.createMock(MyObject.class);

            DummyMainActivity activity = startActivity(new Intent(), null, null);
            activity.obj = o;

            activity.onCreateSuper();
            AndroidMock.verify(o);
        }
    } 
```

# magento - magento：如何在结账时为购物车配置总量规则？

> ID：12708066
> 
> 赞同：1
> 
> 时间：2012-10-03T12:00:53.610
> 
> 标签：magento, checkout

我进行了广泛的搜索，但找不到正确的答案。

我有一家在线商店出售葡萄酒并按瓶出售。但是，我只能以 6 的倍数发货。即任何 SKU 组合中的 6、12、18、24 等等。

我已经尝试过配置->库存->“购物车中允许的最小数量”它适用于单个产品，但不适用于结帐时的总数量。

[http://www.finewineimports.com.au/all.html](http://www.finewineimports.com.au/all.html)

有没有办法（通过扩展程序、代码或管理员）在结帐期间配置规则，使得无论不同 SKU 的总数量必须是 6 的倍数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T00:04:57.320

转到系统配置->库存并将“启用数量增量”设置为是。“数量增量”字段将出现在其下方。在此处输入您的倍数（在您的情况下为 6）。保存您的设置。

# cmake - CMake，在 32 位机器上构建 64 位

> ID：12708068
> 
> 赞同：4
> 
> 时间：2012-10-03T12:00:58.103
> 
> 标签：cmake, mingw, glfw

我`make`用来构建我的项目。我有`glfw`一个依赖项，它用于`cmake`生成 Makefile。这就是我`cmake`从 Makefile 调用的方式：

```
glfw:
    $(MKDIR) $(CBUILD_PATH)$(PATH_SEP)glfw
ifeq ($(OS),"MinGW")
    cd $(CBUILD_PATH)$(PATH_SEP)glfw && \
    cmake -G "MSYS Makefiles" -DBUILD_SHARED_LIBS=ON -DGLFW_BUILD_EXAMPLES=OFF -DGLFW_BUILD_TESTS=OFF ..$(PATH_SEP)..$(PATH_SEP)src$(PATH_SEP)c$(PATH_SEP)glfw
    cd $(CBUILD_PATH)$(PATH_SEP)glfw && $(MAKE) $(MFLAGS)
    cd $(CBUILD_PATH)$(PATH_SEP)glfw$(PATH_SEP)src && echo "..\..\..\$(IMPLIB) /s glfw3.lib glfw3.dll && exit;" | cmd
else
    cd $(CBUILD_PATH)$(PATH_SEP)glfw && \
    cmake -DBUILD_SHARED_LIBS=OFF -DGLFW_BUILD_EXAMPLES=OFF -DGLFW_BUILD_TESTS=OFF ..$(PATH_SEP)..$(PATH_SEP)src$(PATH_SEP)c$(PATH_SEP)glfw
    cd $(CBUILD_PATH)$(PATH_SEP)glfw && $(MAKE) $(MFLAGS)
endif 
```

不是很优雅，但它有效。我可以`-m64`为 GCC 指定一个标志以在 32 位机器上构建 64 位二进制文​​件，但我不知道如何`cmake`将此标志添加到命令行（不修补`CMakeLists.txt`. 感觉大多数都有命令行解决方案，但我找不到它。注意，我需要这个主要用于 Windows，我在那里使用 MinGW/Msys。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T03:39:37.873

您需要在 Makefile 中检测您的拱门，然后有条件地添加

```
-D CMAKE_{C,CXX}_FLAGS=-m64 
```

`cmake`来电。

# uiviewcontroller - 如何在第二个 ViewController 中显示来自一个 ViewController 的 UIImage？

> ID：12708073
> 
> 赞同：0
> 
> 时间：2012-10-03T12:01:23.363
> 
> 标签：uiviewcontroller, uiimageview, uiimage, uitabbarcontroller, uiimagepickercontroller

所以我开始认为这会很简单，但我真的不知道该怎么做！基本上我使用的是 TabBar 应用程序，因此每个页面都由`UITabBarController`. 我创建了一个 UIImage，当您从照片库中选择它时会显示它，我希望该选择显示在不同的视图控制器中。这是我在第一个 VC 中的代码：

```
- (void)addNew:(id)sender {
    NSLog(@"Clicked");
    UIImagePickerController *controller = [[UIImagePickerController alloc] init];
    controller.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
    [self presentModalViewController:controller animated:YES];
    [controller setDelegate:self];

    [self.photoView.view removeFromSuperview];
}

-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage : (UIImage *)image editingInfo:(NSDictionary *)editingInfo {
    NSLog(@"this function has started");
    [self.view setAlpha:1.0f];
    imageV1 = [[UIImageView alloc] initWithImage:image];
    imageV1.frame = CGRectMake(10, 200, 100, 100);
    image1 = image;
    [imageV1 setImage:image];
    [scrollView addSubview:imageV1];

    [self dismissModalViewControllerAnimated:YES];
} 
```

这样就可以在此视图中显示图像（这不是我想要的）。我希望它显示在此视图中：

```
- (void)viewDidLoad
{
    [scrollView setScrollEnabled:YES];
    [scrollView setContentSize:CGSizeMake(320, 500)];

    imageV2 = [[UIImageView alloc] initWithFrame:CGRectMake(10, 50, 100, 100)];
    imageV2.backgroundColor = [UIColor blueColor];
    self.imageV2.image = VC1.imageV1.image;
    [imageV2 setImage:VC1.image1];
[scrollView addSubview:imageV2];

    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
} 
```

我通过创建 VC1 的实例链接了两个 VC

```
ViewControllerOne *VC1;

@property (nonatomic, retain) ViewControllerOne *VC1; 
```

我希望我已经很好地解释了这一点，但总而言之，当从 ViewController 1 中弹出的照片库中选择 UIImage 时，我希望能够在 ViewController 2 中显示 UIImage

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:18:21.397

我不确定哪个 VC 是哪个以及每个声明的位置，但我认为你的意思是你在初始 VC 中有一个图像和一个新声明的 VC。如果是这种情况，我会在您的初始 VC 中使用您的 UIImage 创建一个视图，然后将其添加为新 VC 的视图或子视图。

```
 newView = [[UIView alloc]init] ;

    [newView addSubView:image1] ; 
```

然后要么：

```
 [self.VC1.view addSubView:newView] ; 
```

或者：

```
 [self.VC1 setView:newView] ; 
```

对不起，如果我误解了你的问题。也许尝试标记哪个 VC 哪个更好并保持一致？

# http - 发送特殊字符作为消息；

> ID：12708074
> 
> 赞同：2
> 
> 时间：2012-10-03T12:01:26.607
> 
> 标签：http, encoding, sms

我正在运行我用作 SMS 网关的 Kannel。但是我刚刚意识到手机上没有收到应有的一些特殊符号；@、^ 和 $ 作为某个三角形发送；我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T03:50:28.613

可能是字符集问题。SMS 通常使用 GSM7 字符集接收，并且您提供的字符具有不同的 GSM7 数字代码，例如 ISO-8859-1。您应该从 GSM7 转换为您自己的字符编码。

char @ 可能由于另一个原因有问题。在 GSM7 中，它是 0（零）。如果您保持原样并且您的编程语言使用以零结尾的字符串 - 所有包含 @ 的字符串看起来就像它们在此字符之前终止一样。

有关 GSM7 字符表，请参见[此处](http://en.wikipedia.org/wiki/GSM_03.38)。

# c# - 在 AsyncCallback 中启动时计时器不工作

> ID：12708075
> 
> 赞同：1
> 
> 时间：2012-10-03T12:01:26.963
> 
> 标签：c#, visual-studio-2008, asynchronous, .net-3.5, timer

我需要每 5 秒调用一次异步操作，因为有时操作可能会更长，我想出调用方法，然后在我得到结果后等待 5 秒并再次调用它。

在主要课程中，我有这样的事情：

```
public partial class Form1 : Form
{
    private Timer loopTimer;
    public Form1()
    {
        InitializeComponent();
        loopTimer = new Timer() { Interval = 10000 /*10 seconds*/};
        loopTimer.Tick += loopTimer_Tick;
        EWS.Instance.DoOperation(Operation_OK, Operation_ERROR);
    }

    private void Operation_OK(int count)
    {
        Console.WriteLine("timer start");
        loopTimer.Start();
        Console.WriteLine("timer enabled: " + loopTimer.Enabled);
        Console.WriteLine("async result : " + count);
    }

    private void Operation_ERROR(string err)
    {
        MessageBox.Show(err);
    }

    private void loopTimer_Tick(object sender, EventArgs e)
    {
        Console.WriteLine("tick");
        loopTimer.Stop();
        EWS.Instance.DoOperation(Operation_OK, Operation_ERROR);
    }
} 
```

我的 EWS 课程如下所示：

```
class EWS : SingletonBase<EWS>
{
    private EWS()
    {
    }

    private int LongRunningMethod(Action<string> error)
    {
        Console.WriteLine("5 seconds operation");
        Thread.Sleep(5000);
        int unreadCount = 100;
        return unreadCount;
    }

    public class CommandAndCallback<TSuccess, TError>
    {
        public TSuccess Success { get; set; }
        public TError Error { get; set; }
        public Func<Action<string>, int> Delegate { get; set; }
    }

    public void DoOperation(Action<int> success, Action<string> error)
    {
        Func<Action<string>, int> dlgt = LongRunningMethod;
        CommandAndCallback<Action<int>, Action<string>> config = new CommandAndCallback<Action<int>, Action<string>>() { Success = success, Error = error, Delegate = dlgt };

        dlgt.BeginInvoke(error, MyAsyncCallback, config);
    }

    public void MyAsyncCallback(IAsyncResult ar)
    {
        int s;
        CommandAndCallback<Action<int>, Action<string>> config = (CommandAndCallback<Action<int>, Action<string>>)ar.AsyncState;
        s = config.Delegate.EndInvoke(ar);
        Console.WriteLine(s);
        if (s > -1)
            config.Success(s);
    }
} 
```

我可以异步调用我的方法，处理错误，但我不知道为什么我无法在 5 秒后再次调用它。

`loopTimer_Tick`在我打电话后不叫`loopTimer.Start();`
我重写这几次，每次我不能让那个计时器工作。

我需要循环调用方法（调用交换服务器），但调用之间有时间中断，如果有更好的方法，请写:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:31:33.853

The System.Windows.Forms.Timer class is not thread-safe. The specific failure here is that you call its Start() method on a thread pool thread. That creates a hidden window that provides the Tick event but its being created on the wrong thread. One that doesn't pump a message loop so the Tick event is never raised.

A possible workaround is to call Start() on the main thread, in the DoOperation() method for example. Or to use a System.Timers.Timer instead, beware however that its Elapsed event handler runs on an arbitrary threadpool thread so you cannot directly access the UI from it. You ought to do something about actually canceling the operation, this kind of code tends to get simpler if you use the BackgroundWorker or Task class.

# liferay - 如何在我们的自定义 portlet 中仅使用内置 portlet 的方法？

> ID：12708076
> 
> 赞同：-1
> 
> 时间：2012-10-03T12:01:30.603
> 
> 标签：liferay, portlet, liferay-6

我只想知道 Liferay 提供的任何设施，我们只使用内置 portlet 的功能吗？

例如，我有一些自定义 portlet，我想从我的自定义 portlet 中将一些文档添加到文档和媒体 portlet 的数据库表中。这可能吗？

我不想使用它的 GUI 只是我需要访问它的功能或说操作。

如果我可以在我自己的 portlet com.liferay.portal.service.UserLocalServiceUtil.addUser 中以这种方式调用任何内置 portlet 的 adduser 方法

那么我可以使用这种方式吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:42:33.387

我不确定我是否理解了这个问题，但您当然可以在您的 portlet 中的任何位置使用许多提供的服务。例如，如果您想保存从页面上传的文件，您可以使用以下内容：

```
protected FileEntry saveFile(String name, File file, ThemeDisplay themeDisplay) throws PortalException, SystemException{
    _log.debug("request of saving new file " + name);
    if (file == null){
        _log.debug("file content is null.. save aborted");
        return null;
    }
    if (!StringUtils.hasLength(name)){
        _log.debug("file name is null.. save aborted");
        return null;
    }
    long defaultRepoId = DLFolderConstants.getDataRepositoryId(themeDisplay.getScopeGroupId(), DLFolderConstants.DEFAULT_PARENT_FOLDER_ID);
        ServiceContext serviceContext = new ServiceContext();
        serviceContext.setSignedIn(true);
        serviceContext.setAddGroupPermissions(true);
        serviceContext.setAddGuestPermissions(true);
        Folder folder = fetchFolder(defaultRepoId);
        long folderId = (folder != null ? folder.getFolderId() : DLFolderConstants.DEFAULT_PARENT_FOLDER_ID);
        FileEntry entry = DLAppServiceUtil.addFileEntry(defaultRepoId, folderId, name, MimeTypesUtil.getContentType(file), name, "", "", file, serviceContext);
        _log.debug("file " + name + " saved successfully");
        return entry;
    } 
```

这是你想要的？以类似的方式，您可以添加多种类型的实体（用户、wiki 节点、文档……）

请注意，`DLAppServiceUtil`由 Liferay 提供（6.1，由于文档库的更改，可能在 6.0 中有所不同）

# php - 检查当前时间是否在 PHP 中的某个时间之间？

> ID：12708083
> 
> 赞同：3
> 
> 时间：2012-10-03T12:02:04.753
> 
> 标签：php, date, time, intervals

> **可能重复：**
> [如何检查日期是否在给定的日+月范围内？](https://stackoverflow.com/questions/11171447/how-to-check-if-a-date-is-in-a-given-range-of-daymonth)

我将如何检查当前时间是否在两个不同的时间间隔之间？

这是一个实际示例：假设 Dan 只在下午 1 点到 4 点左右，我将如何编写脚本来检查当前时间是否在下午 1 点到 4 点之间。我想使用它来显示当前可用代表的列表，该列表基于输入到数据库中的日程安排。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-03T12:03:38.863

`H`从日期开始使用-*小时的 24 小时格式*：

```
if( (date('H') >= 13) && (date('H') < 16) ){
    // between 1PM and 4PM
} 
```

# python - pip install enable 失败

> ID：12708084
> 
> 赞同：4
> 
> 时间：2012-10-03T12:02:16.537
> 
> 标签：python, python-2.7, pip, chaco

目前尝试在我的 2.7.3 环境中使用 pip 安装 Chaco。当我运行 pip install chaco 失败并出现以下错误：

> 错误：命令“llvm-gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -arch i386 -arch x86_64 -g -O2 -DNDEBUG -g -O3 -I/Developer/Headers/FlatCarbon -I/Users/ streetmapp/pythonDev/edx/lib/python2.7/site-packages/numpy/core/include -I/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c build/src.macosx-10.6 -intel-2.7/kiva/quartz/ATSFont.c -o build/temp.macosx-10.6-intel-2.7/build/src.macosx-10.6-intel-2.7/kiva/quartz/ATSFont.o" 退出状态失败1

通过常规输出，我想到了这个：

> C 编译器：llvm-gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -arch i386 -arch x86_64 -g -O2 -DNDEBUG -g -O3
> 
> 编译选项：'-I/Developer/Headers/FlatCarbon -I/Users/streetmapp/pythonDev/edx/lib/python2.7/site-packages/numpy/core/include -I/Library/Frameworks/Python.framework/Versions /2.7/include/python2.7 -c'
> 
> llvm-gcc-4.2：构建/src.macosx-10.6-intel-2.7/kiva/quartz/ATSFont.c
> 
> build/src.macosx-10.6-intel-2.7/kiva/quartz/ATSFont.c:252:21：错误：ATSFont.h：没有这样的文件或目录

我注意到这对于启用包而言是失败的，这是 Chaco 的先决条件，并且运行 pip install enable 会出现相同的结果。

目前在虚拟环境中使用 python 2.7.3 在 OS X Mountain Lion 上运行。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T16:24:13.137

启用构建失败，因为它正在寻找最新版本的 OS X SDK 中不再存在的 Carbon 库。虽然已经解决了这个问题，但它还没有成为包的发布（或标记版本）。

同时，让 Enable 在您的系统上工作的唯一方法是克隆 git 存储库[https://github.com/enthought/enable.git](https://github.com/enthought/enable.git)并自己运行 setup.py。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T23:26:54.413

你也可以

```
pip install -e git+https://github.com/enthought/enable.git@fd2e69f24dbe07eedfc8f8fbde240c15ae495677#egg=enable-dev 
```

它将安装和编译 enthought-dev

您可以稍后将其删除

```
pip remove enthought-dev 
```

# struts2 - Struts2 中的自动完成难度

> ID：12708086
> 
> 赞同：0
> 
> 时间：2012-10-03T12:02:18.187
> 
> 标签：struts2, dojo

我试图实现[这个自动完成功能](http://www.mkyong.com/struts2/struts-2-autocompleter-example/)。我正在下拉“你的幸运数字是多少？：”字段，因为它是一个硬编码列表。

但我没有得到“最喜欢的网络框架？”的下拉菜单。我尝试用谷歌搜索其他网站，如roseindia，但没有发现类似的问题。

我还注意到 autocompleter.jsp 中没有元素调用`action="autoCompleterAction"`，所以我尝试将它添加到`<sx:autocompleter>`，`action="autoCompleterAction"` 但显示错误。

请帮助我，告诉我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:12:42.583

使用 jQuery[自动完成功能](http://jqueryui.com/demos/autocomplete/) 很简单：

```
<script>
    $(function() {
        var availableTags = [
            "ActionScript",
            "AppleScript",
            "Asp"
        ];
        $( "#tags" ).autocomplete({
            source: availableTags
        });
    });
    </script> 
```

# java - 根据大小创建列表

> ID：12708088
> 
> 赞同：0
> 
> 时间：2012-10-03T12:02:22.370
> 
> 标签：java

我知道这很容易，可以用 2 行代码完成，但我很想知道是否存在任何这样的函数我有一个 int 告诉我列表的大小，我需要创建一个列表说

```
List<Integer> intList; 
```

我可以通过轻松迭代大小来创建它

```
for(int i=1 ; i <= size; i++)  // started with 1 as i want it from 1
{
  fill list
} 
```

但我只是在想，好像在 Collection API 或 Apache common 中存在任何这样的方法，我可以通过大小来获取给定大小的 List

**编辑**

可能我无法以适当的方式提出问题，我想填写我的清单，说如果 size=4 比我想的要多

```
Integer=1
Integer=2
Integer=3
Integer=4 
```

而不是一个大小为 4 的空列表

我知道问题没有多大意义，但最好还是澄清你的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:18:13.673

简短的回答：没有

您当前使用的两班轮已经是最佳选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:07:48.860

这里的问题是 List 是一个接口类，您不能创建接口类的实例。所以在你想要构建它之前，你需要知道你想要创建什么样的列表。目前让我们假设您想要一个 ArrayList。从这一刻起，您可以简单地使用正确的构造函数来初始化您的列表，例如

```
List<Integer> intList = new ArrayList<Integer>(10); 
```

它构造了一个初始容量为 10 的 ArrayList。

对于其他类型的列表，您可以查看[Java 文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/List.html)。

要使用初始数据填充列表，您可以执行以下操作：

```
int[] myArray = new int[]{ 58,63,67,72,70,63,62,63 };
List<Integer> intList = new ArrayList<Integer>(myArray ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T12:11:55.460

要在您添加编辑后回答问题：不，在标准集合 API 中没有这样的方法可以用升序整数填充列表。您必须自己编写一个循环并将元素添加到列表中。

# sip - 使用 OpenSIPS/Kamailio/OpenSER 进行 RTP 代理

> ID：12708089
> 
> 赞同：4
> 
> 时间：2012-10-03T12:02:28.177
> 
> 标签：sip, voip, kamailio

我有一个侦听多个 IP 的 OpenSIPS 服务器。如果我将呼叫路由回下一个点，我想确保所有信令和媒体都来自呼叫最初登陆的 IP（我不希望呼叫者和被呼叫者知道彼此的 IP 地址）。

我相信我需要像 RTPProxy 这样的东西。

我的问题是每个 IP 地址需要一个 RTPProxy 服务器，还是可以通过单个服务器路由多个 IP？有更好的解决方案吗？

我将自己尝试这个，但我正在努力让 RTPProxy 服务器正常运行（我的无知而不是 RTPProxy 的任何问题）。我提前询问只是想看看是否有人知道我是否在浪费时间进行设置。

[更新]

对于任何有兴趣的人，这就是我让它工作的方式，尽管我不确定我是否想以此作为最终解决方案。需要更多的测试。对于 2 个 IP，具有拓扑隐藏和 RTP 代理。除了下面的答案，我希望它对某人有所帮助。

加载 rtpproxy 进程 -

```
rtpproxy -l _your_public_ip_1_ -s udp:localhost:7722
rtpproxy -l _your_public_ip_2_ -s udp:localhost:7723 
```

然后修改 kamailio.cfg 文件 -

```
loadmodule "/usr/local/lib64/kamailio/modules/topoh.so"
modparam("topoh", "mask_key", "Your_key_here")
modparam("topoh", "mask_ip", "10.0.0.1") 
```

下一位为 RTP 代理创建两个组 - 1 和 2 -

```
#!ifdef WITH_NAT
    # ----- rtpproxy params -----
    modparam("rtpproxy", "rtpproxy_sock", "1 == udp:127.0.0.1:7722")
    modparam("rtpproxy", "rtpproxy_sock", "2 == udp:127.0.0.1:7723") 
```

然后在标准（已交付）配置的 NAT 部分中，根据入站呼叫登陆的 IP 选择要在代理中使用的组。rtp_proxy_manage 是 force_ 和 unforce_ 命令的高级版本。基本上它只是启动并为你做一切 -

```
route[NATMANAGE] {
    #!ifdef WITH_NAT
        ....
        if($Ri=="X.X.X.1")
            set_rtp_proxy_set("1");

        if($Ri=="X.X.X.2")
            set_rtp_proxy_set("2");

        rtpproxy_manage("",$Ri); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T16:48:12.300

如果您使用 RTPProxy，则每个 IP 地址需要一个 RTPProxy 服务器。您可以使用“-l”参数指定要监听的 IP：

```
# /usr/sbin/rtpproxy -l 10.10.10.10 -s unix:/var/run/rtpproxy/rtpproxy1.sock -u rtpproxy rtpproxy -p /var/run/rtpproxy/rtpproxy1.pid &
# /usr/sbin/rtpproxy -l 10.10.10.11 -s unix:/var/run/rtpproxy/rtpproxy2.sock -u rtpproxy rtpproxy -p /var/run/rtpproxy/rtpproxy2.pid & 
```

您需要将其与独立的 opensips/openser/kamailio 实例相匹配：

```
listen=udp:10.10.10.10:5060
...
loadmodule "rtpproxy.so"

modparam("rtpproxy", "rtpproxy_sock", "unix:/var/run/rtpproxy/rtpproxy1.sock")

...
unforce_rtp_proxy();
...
force_rtp_proxy(); 
```

和

```
listen=udp:10.10.10.11:5060
...
loadmodule "rtpproxy.so"

modparam("rtpproxy", "rtpproxy_sock", "unix:/var/run/rtpproxy/rtpproxy2.sock")

...
unforce_rtp_proxy();
...
force_rtp_proxy(); 
```

如果您对 C 有一定的经验，您可以想象修改 rtpproxy 模块以了解多个 rtpproxy 实例。

此外，如果通过用户空间中继 RTP 的想法困扰您，MediaProxy 是一个替代方案。

您的 openser/opensips/kamailio 不是中继 RTP 流量的用户空间守护进程，而是通过 JSON 网络帖子告诉 python MediaDispatcher 联系可用的 MediaRelay 以设置 linux 内核级 conntrack 流量转发条目。

这种方法的缺点是当前的 python media-dispatcher 和 media-relay 读取 /etc/mediaproxy/config.ini - 你需要破解 python 来获取配置参数，所以你可以想象有多个 config.ini 文件，每个实例一个以设置正确的重定向。

/etc/mediaproxy/config.ini 的示例可能如下所示：

```
[Relay]
dispatchers = 10.10.10.10:25060

[Dispatcher]
socket_path = /var/run/mediaproxy/dispatcher.sock
listen = 10.10.10.10:25060
listen_management = 10.10.10.10:25061

[OpenSIPS]
socket_path = '/var/run/opensips/socket' 
```

在您的 opensips 配置文件中：

```
modparam("mi_datagram", "socket_name", "/var/run/opensips/socket")

...

loadmodule "mediaproxy.so"

# ----- mediaproxy params -----
modparam("mediaproxy", "mediaproxy_socket", "/var/run/mediaproxy/dispatcher.sock")
#modparam("mediaproxy", "disable", 1)
#modparam("mediaproxy", "natping_interval", 60)

...
engage_media_proxy();
...
end_media_session(); 
```

听起来您可能对 rtpproxy 有更好的运气来满足您的特定需求。

# c# - 泛型是运行时还是编译时多态？

> ID：12708090
> 
> 赞同：10
> 
> 时间：2012-10-03T12:02:30.813
> 
> 标签：c#, oop, generics, polymorphism

我读到以下格式属于参数多态性，但是我们可以将它归类为运行时或编译时多态性吗？

```
public class Stack<T>
{  // items are of type T, which is known when we create the object
   T[] items;  
   int count;  
   public void Push(T item)    {...}
   //type of method pop will be decided when we create the object  
   public T Pop() 
   {...} 
 } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-03T12:06:04.967

两者都有一点。为了使用泛型类，您必须在编译时给它一个类型参数，但类型参数可以是接口或基类，因此在运行时使用的对象的实际具体类型可能会有所不同。

例如，这里我有一个带有`Stack<T>`字段的代码片段。我选择使用接口作为类型参数。这在编译时利用了[参数多态性。](http://en.wikipedia.org/wiki/Polymorphism_%28computer_science%29#Parametric_polymorphism)您必须选择您的`_stack`字段将在编译时使用的类型参数：

```
public interface IFoo { void Foo(); }

public Stack<IFoo> _stack = new Stack<IFoo>(); 
```

现在，当这段代码实际运行时，我可以使用其类 implements 的任何对象`IFoo`，并且直到运行时才需要做出决定：

```
public class Foo1 : IFoo { public void Foo() { Console.WriteLine("Foo1"); } }

public class Foo2 : IFoo { public void Foo() { Console.WriteLine("Foo2"); } }

public class Foo3 : IFoo { public void Foo() { Console.WriteLine("Foo2"); } }

_stack.Push(new Foo1());
_stack.Push(new Foo2());
_stack.Push(new Foo3()); 
```

这是在运行时使用的[子类型多态性](http://en.wikipedia.org/wiki/Polymorphism_%28computer_science%29#Subtype_polymorphism_.28or_inclusion_polymorphism.29)的一个示例。

# iphone - 如何从 Xcode 4.1 切换到 iOS 6.0 的 4.5

> ID：12708093
> 
> 赞同：0
> 
> 时间：2012-10-03T12:02:50.260
> 
> 标签：iphone, objective-c, ios, ipad

我刚刚从 Xcode 4.1 迁移到 4.5 以支持 IOS 版本 6.0。我将启动图像修改为 640x1136 像素，Base SDK 是 iOS 6.0。问题是当我启动应用程序时，它会在 main.m 上抛出 SIGABRT，我添加了异常断点以获取更多信息，但它在实现的同一行给出了断点 1.1。但是我注意到我收到了 Xcode 4.5 的新警告。警告和代码写在下面。感谢帮助。

警告：

```
Semantic Issue: 'CountrySettingsViewController' may not respond to 'initWithTitle' 
```

代码：

```
CountrySettingViewController *countrySettingView = [[[CountrySettingViewController alloc] initWithTitle:NSLocalizedString(@"selectCountry",@"Select the country title")]retain]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:48:20.323

最后，我从链接中的以下答案中解决了我的问题： [iPhone with iOS 6 and Xcode 4.2 issue](https://stackoverflow.com/questions/12621481/iphone-with-ios-6-and-xcode-4-2-issue)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:12:57.670

我还没有准备好跳到 xcode 4.5。- 因为，那么很多旧项目将不得不重新编译等

为了支持 iphone 5 显示，我简单地做了一切自动调整大小，额外检查 iphone 5 显示（设置相应的图像），并添加 iPhone 5 启动画面图像。从 4.4.1 编译，在 iPhone 5 上看起来没问题。

然后我从 5.1 复制已安装的应用程序。模拟器到 6.0 模拟器，并启动 6.0 模拟器，以检查它在 iPhone 5 上的外观（虽然我还没有任何 iPhone 5 来测试）。

希望有帮助。

（我安装了 4.4.1.sdk 和 4.5.sdk）

* * *

但是关于那个错误 -

这个“initWithTitle”函数是否也在 .h 文件中声明？否则其他类将看不到它（即使它有效）。

# magento-1.7 - 如何将 Magento 库存设置更改为网站范围而不是全球范围？

> ID：12708095
> 
> 赞同：6
> 
> 时间：2012-10-03T12:02:55.613
> 
> 标签：magento-1.7, magento, inventory

我们有一个多商店设置，magento 跨多个域运行。其中一些网站是批发 b2b 网站，有些是零售 b2c 网站。

我们对每个零售和批发网站有不同的价格（这在 magento 配置中很容易做到），我们这样做是因为我们强制批发客户使用购物车中允许的 magento 最低数量购买多个产品，并且必须以多个库存功能购买。但是，我们似乎无法为零售店关闭此功能。

我们还希望允许在批发网站上延期交货，但不允许在零售网站上延期交货，并且此设置也设置为全球，我们无法将其更改为网站。

我们发现了几个执行多库存的扩展（为多个位置等构建），但这些扩展似乎没有执行这些库存功能，或者对我们来说过于臃肿。我们只使用 1 个库存，我们只需将“允许延期交货”、“购物车中允许的最低数量”和“必须以多个方式购买”切换到网站范围而不是全球范围。

有人可以帮忙吗？如果我们需要创建和模块并且您可以做到/帮助做到这一点，我们很乐意为您的服务付费。

我们正在使用 Magento CE 1.7

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-18T09:45:15.747

没有简单的解决方案。您可以创建新属性而不是默认库存属性并覆盖方法以在网站级别使用它们。所以你需要开发小的扩展。

# batch-file - 批处理文件 - 发现的分辨率

> ID：12708098
> 
> 赞同：4
> 
> 时间：2012-10-03T12:03:06.840
> 
> 标签：batch-file, screen-resolution

我试图找出一种通过批处理文件检测用户分辨率是否高于或低于“1280 x 1024”的方法。

如果分辨率为“1280 x 1024”或更高，则执行 A。否则执行 B。

有谁知道如何做到这一点？

干杯，

艾略特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T14:38:51.363

作为注册表的替代方法，您还可以通过以下方式检查分辨率`Wmic`：
`wmic desktopmonitor where availability=3 get screenHeight,screenWidth`
更多关于**Win32_DesktopMonitor**类的信息：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa394122%28v=vs.85%29。 aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394122%28v=vs.85%29.aspx)

请注意，如果连接的监视器超过 1 个，可能会出现多行 - 您应该在脚本中处理这些情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T12:24:21.403

由于以下几个原因，这有点棘手：

1.  分辨率在注册表中，您可以使用`reg.exe`. 然而，它并不是很容易找到。对我来说，它在

    ```
    HKLM\SYSTEM\CurrentControlSet\Control\Video\{7FD4F64D-A7B2-41A9-AEEB-835BE4473FFA}\0000 
    ```

    在`DefaultSettings.XResolution`和`DefaultSettings.YResolution`。但是，GUID 可能会根据您拥有的视频卡和驱动程序而有所不同，因此您必须在`HKLM\SYSTEM\CurrentControlSet\Control\Video`.

2.  更高的分辨率是什么意思？1366 × 768 会比 1280 × 1024 高吗？你计算总像素数吗？一维更高？同时？

无论如何，我拼凑了下一批。必要时进行调整。它在我的机器上产生了正确的结果，但我没有那么多要测试的东西。

```
@echo off
setlocal enabledelayedexpansion
for /f "delims=" %%l in ('reg query HKLM\SYSTEM\CurrentControlSet\Control\Video') do (
    reg query %%l\0000 /v DefaultSettings.XResolution >nul 2>&1
    if not errorlevel 1 (
        for /f "skip=1 tokens=3 delims= " %%x in ('reg query %%l\0000 /v DefaultSettings.XResolution') do (
            set /a X=%%x
        )
        for /f "skip=1 tokens=3 delims= " %%x in ('reg query %%l\0000 /v DefaultSettings.YResolution') do (
            set /a Y=%%x
        )
    )
)
echo Resolution: %X% × %Y%

if %X% GTR 1280 if %Y% GTR 1024 echo Greater than 1280 × 1024. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-01T07:15:52.123

就我而言，`wmic desktopmonitor`没有任何回报。

这个适用于我的 Win 8.1

```
@ECHO OFF

for /f "delims=" %%# in  ('"wmic path Win32_VideoController  get CurrentHorizontalResolution,CurrentVerticalResolution /format:value"') do (
  set "%%#">nul
)

echo %CurrentHorizontalResolution%
echo %CurrentVerticalResolution% 
```

# c# - PosPrinter.PrintBarCode，PosPrinter.PrintBitmap 在 PrintNormal 工作时不工作

> ID：12708099
> 
> 赞同：0
> 
> 时间：2012-10-03T12:03:13.313
> 
> 标签：c#, javascript, activex

我创建了一个 ActiveX 控件，其中包含处理打印机（Star TSP100）的所有方法，例如实例化、打开打印机等。ActiveX 正在 com.xml 中注册。当我通过 javascript 使用打印机方法时，所有方法都可以正常工作，除了 PrintBarCode 和 PrintBitmap 方法并引发错误。

对于我使用过的位图：-

```
printer.PrintBitmap(PrinterStation.Receipt, path, percentWidth * lineWidth / 100, PosPrinter.PrinterBitmapCenter); 
```

对于条形码：-

```
printer.PrintBarCode(PrinterStation.Receipt, code, BarCodeSymbology.Code93, 80, (int)(0.9 * lineWidth), PosPrinter.PrinterBarCodeCenter, BarCodeTextPosition.Below); 
```

虽然这两种方法也在 Visual Studio 的调试模式下工作。但是在创建设置并在系统中安装之后，这两个都不起作用。

错误是： -

```
Microsoft.PointOfService.PosControlException: Method PrintBarCode threw an exception.  Attempt was made to perform an illegal or unsupported operation with the device, or an invalid parameter value was used.
   at Microsoft.PointOfService.Legacy.LegacyProxy.ThrowLegacyMethodException(String methodName, Int32 ResultCode, Exception e)
   at Microsoft.PointOfService.Legacy.LegacyProxy.InvokeMethod(String methodName, Object[]& parameters, Boolean[] byRef)
   at Microsoft.PointOfService.Legacy.LegacyProxy.InvokeMethodAndCheckImpl(String methodName, Object[]& parameters, Boolean[] byRef)
   at Microsoft.PointOfService.Legacy.LegacyProxy.InvokeMethodAndCheckImpl(String methodName, Object[] parameters)
   at Microsoft.PointOfService.Legacy.LegacyProxy.InvokeMethodAndCheck(String methodName, Object param1, Object param2, Object param3, Object param4, Object param5, Object param6, Object param7)
   at Microsoft.PointOfService.Legacy.LegacyPosPrinter.PrintBarCode(PrinterStation station, String data, BarCodeSymbology symbology, Int32 height, Int32 width, Int32 alignment, BarCodeTextPosition textPosition)
   at xyx.testclass.PrintBarCode(String code)
ErrorCode: Illegal
ErrorCodeExtended: 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:48:10.710

I have the same problem and for the Bitmap I have a workaround:

```
printer.PrintBitmap(PrinterStation.Receipt, path, PosPrinter.PrinterBitmapAsIs, PosPrinter.PrinterBitmapCenter); 
```

Maybe the printer is not able to scale bitmaps. But for it's easy to scale your bitmap before sending it to the printer, I think this is a good workaround.

For the Barcode problem I can only say, that I had the wrong BarCodeSymbology (Ean13S instead of EanJan13). If I have further insights, I'll share them here.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-21T20:10:41.737

**dlg** : 是打开文件对话框

**cbAlignment**：是包含三个值的组合框：Left、Center、Right。

**tbWidth**和**tbWidth**：用于打印的大小

**cbTextPosition** : 用于文本位置

这是一个屏幕截图：

![在此处输入图像描述](../Images/690f23e1eb9799703ab28407a103abee.png)

我有**Epson-T20**，代码对我来说很好：

```
//In the loading of the form : to init cbTextPosition
cbTextPosition.Items.Clear();
cbTextPosition.Items.AddRange(Enum.GetNames(typeof (BarCodeTextPosition))); 
```

并打印：

```
try
            {
                //Show the Open File Dialog Box
                OpenFileDialog dlg = new OpenFileDialog();
                dlg.Filter = "Image files|*.bmp;*.gif;*.jpg";

                //Try It First With Monochrome Bmp Image : try it with 384x384 px
                if (dlg.ShowDialog() == DialogResult.OK)
                {
                    //Init your stuff here
                    PosExplorer explorer;
                    DeviceInfo _device;
                    PosPrinter _oposPrinter;

                    explorer = new PosExplorer();
                    _device = explorer.GetDevice(DeviceType.PosPrinter, "T20PRINTER");

                    _oposPrinter = (PosPrinter) explorer.CreateInstance(_device);
                    _oposPrinter.Open();
                    if (!_oposPrinter.Claimed)
                    {
                        _oposPrinter.Claim(5000);
                        _oposPrinter.DeviceEnabled = true;
                        PrinterStation CurrentStation = PrinterStation.Receipt;

                        //This is a Header :
                        _oposPrinter.PrintNormal(PrinterStation.Receipt, "Here is your LOGO : ");

                        //Printing Your Logo :
                        int alignment; 
                        if (cbAlignment.Text == "Left")
                            alignment = PosPrinter.PrinterBarCodeLeft;
                        else if (cbAlignment.Text == "Center")
                            alignment = PosPrinter.PrinterBarCodeCenter;
                        else if (cbAlignment.Text == "Right")
                            alignment = PosPrinter.PrinterBarCodeRight;
                        else
                            alignment = int.Parse(cbAlignment.Text, System.Globalization.CultureInfo.CurrentCulture);

                        //Print it : you can try 384px for real size in tbWidth
                        _oposPrinter.PrintBitmap(
                            CurrentStation,
                            dlg.FileName,
                            int.Parse(tbWidth.Text, System.Globalization.CultureInfo.CurrentCulture),
                            alignment);

                        //Cutting your Paper :
                        _oposPrinter.CutPaper(95);
                    }

                }

            }
            catch (Exception c)
            {
                MessageBox.Show(c.Message);
            } 
```

对于 Codebar 从未尝试过，对不起，如果我找到了我会告诉你的东西，祝你好运。

# ruby-on-rails - rails应用程序中database.yml的差异，主机与套接字

> ID：12708101
> 
> 赞同：0
> 
> 时间：2012-10-03T12:03:20.890
> 
> 标签：ruby-on-rails, rails-migrations

以下代码通过主机，套接字访问mysql有什么区别？

```
 adapter: mysql2  
                    database: chart_development  
                    username: root
                    password: root                      
                    socket: /var/lib/mysql/mysql.sock  
                           vs
                    adapter: mysql2  
                    database: chart_development  
                    username: root
                    password: root                      
                    host: localhost 
```

如何使导轨同时适用于这两种情况？“主机：localhost”对我不起作用。之前它工作正常。所以，我现在正在使用“socket：/var/lib/mysql/mysql.sock”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:04:49.277

改变

```
host: localhost 
```

到

```
host: 127.0.0.1 
```

# objective-c - 如何限制 NSMetadataQuery 搜索结果

> ID：12708104
> 
> 赞同：4
> 
> 时间：2012-10-03T12:03:21.320
> 
> 标签：objective-c, xcode, macos, cocoa, nsmetadataquery

我正在使用 NSMetadataQuery 执行像搜索一样的聚光灯，我面临的问题是我无法限制 NSMetadataQuery 搜索特定的隐藏文件夹，如 /Users/username/Library（因为库是隐藏文件夹）。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:48:27.290

问题是 Spotlight 创建的索引并非旨在通过路径进行限制。索引经过优化，可以快速找到术语，然后您可以获取结果（或其他元数据）的相应 URL。索引未针对基于路径的搜索进行优化。

搜索索引（使用 SearchKit 构建）无论如何都经过了优化，即使有大量文件也能很快返回结果。获得结果后，您必须自己过滤这些结果。

请注意，~/Library 中的大多数文件不会包含在索引中，例如缓存、plist 文件、插件等...

# python - 使用 Django ModelForms 保存数据

> ID：12708112
> 
> 赞同：3
> 
> 时间：2012-10-03T12:03:42.207
> 
> 标签：python, django

我以前使用过这段代码，它工作得很好，另一个成员建议我使用 ModelForm，使用 form.is_valid() 函数等确实有意义。所以想试一试。

我浏览了互联网上的其他一些示例，但我的似乎由于某种原因不起作用，或者可能是我做的不对，当我在视图中打印表单时，我得到以下内容，它转到 else 语句，所以我的表格没有得到保存

```
<input id="id_product" type="text" name="product" value="aassddf" maxlength="250" />
FAIL 
```

我的模型.py

```
from django.db import models
from django.forms import ModelForm

class Category(models.Model):
    name = models.CharField(max_length=250)

    def __unicode__(self):
        return self.name

class Product(models.Model):
    category = models.ForeignKey(Category)
    product = models.CharField(max_length=250)
    quantity = models.IntegerField(default=0)
    price = models.FloatField(default=0.0)

    def __unicode__(self):
        return self.product

class ProductForm(ModelForm):
    class Meta:
        model = Product 
```

我的观点.py

```
from models import *
from django.shortcuts import render_to_response
from django.http import HttpResponseRedirect

def index(request):
    ...
    ...

def add_product(request):
    if request.method == 'POST':
        form = ProductForm(request.POST)
        print form['product']
        if form.is_valid():
            form.save()
            return HttpResponseRedirect('/product')
        else:
            print 'FAIL'
    return HttpResponseRedirect('/product') 
```

我的html

```
<form method="post" action="add_product/">
        {% csrf_token %}
        <label for="category">Category</label>
        <select name="category" id="category">
        {% for category in category_list %}
          <option> {{ category.name }} </option>
        {% endfor %}
        </select>

        <label for="product">Product</label>
        <input type="text" name="product" id="product">

        <label for="quantity">Quantitiy</label>
        <input type="text" name="quantity" id="quantity">

        <label for="price">Price</label>
        <input type="text" name="price" id="price">

        <input type="submit" value="Add New product" id="create">
    </form> 
```

有没有更好的方法可以使用 ModelForms 保存数据？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T12:11:45.780

您应该阅读[文档](https://docs.djangoproject.com/en/1.4/topics/forms/#using-a-form-in-a-view)。如果表单无效，它将有与之相关的一整套错误，这将告诉您确切的原因。但你只是把它扔掉，然后重定向到`/product`. 文档准确地显示了如何重新显示带有错误的表单。

此外，您不应该直接在模板中编写 HTML 表单字段标签：使用视图中的表单对象 -`{{ form.product }}`等 - 因为这些将在重新显示时重新填充适当的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T09:40:31.117

感谢 Daniel Roseman 和 Anuj Gupta，我想我终于重新编写了我的代码，让它以标准方式工作，以便生成 html 表单并验证错误。

因此，对于其他试图在这里使用 django 表单的人来说，这是我处理的代码。

我的**model.py**与我在问题上发布的几乎相同，但我删除了

```
class ProductForm(ModelForm):
    class Meta:
        model = Product 
```

我创建了一个新的**form.py**这里是代码-

```
from django import forms
from models import Category

class ProductForm(forms.Form):
    # Put all my Categories into a select option
    category = forms.ModelChoiceField(queryset=Category.objects.all())
    product = forms.CharField()
    quantity = forms.IntegerField()
    price = forms.FloatField() 
```

我的**views.py**改变了很多变化 -

```
def add_product(request):
    success = False

    if request.method == "POST":        
        product_form = ProductForm(request.POST)

        if product_form.is_valid():             
            success = True

            category = Category.objects.get(name=product_form.cleaned_data['category'])
            product = product_form.cleaned_data['product']
            quantity = product_form.cleaned_data['quantity']
            price = product_form.cleaned_data['price']

            new_product = Product(category = category, product = product, quantity = quantity, price = price )
            new_product.save()

            new_product_form = ProductForm()

            ctx2 = {'success':success, 'product_form':new_product_form}
            return render_to_response('product/add_product.html', ctx2 , context_instance=RequestContext(request))
    else:
        product_form = ProductForm()
    ctx = {'product_form':product_form}
    return render_to_response('product/add_product.html', ctx , context_instance=RequestContext(request)) 
```

最后在我的**html 页面**中，我使用`{{ product_form.as_p }}`它动态创建表单

```
{% if success %}
    <h3> product added successfully </h3>
{% endif %}         
<form method="post" action=".">
    {% csrf_token %}

    {{ product_form.as_p }}

    <input type="submit" value="Add New product" id="create">
    <input type="reset" value="reset" id="reset">   
</form> 
```

[这可能不是完美的解决方案，但对于像我这样的初学者来说，这听起来不错，有时您在阅读文档](https://docs.djangoproject.com/en/1.4/topics/forms/)时会迷路，哈哈，希望它对某人有所帮助。

干杯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T12:57:56.243

尝试：

```
<form method="post" action="add_product/">
    {% csrf_token %}
    {{ form.as_p }}
</form> 
```

在您的模板中，而不是手动编码表单的输入标签。此快捷方式将为您生成表单 html，以及打印验证错误。

确保在以下情况下将`form`对象返回到模板：

1.  没有request.POST（表单还没有提交）
2.  form.is_valid() 失败（表单有验证错误）

当然，这只是为了让您入门。你真的应该[阅读文档](https://docs.djangoproject.com/en/1.4/topics/forms/)

# asp.net - ASP.NET MVC 4 和 ExtensionlessUrlHandler

> ID：12708113
> 
> 赞同：24
> 
> 时间：2012-10-03T12:03:45.087
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4

我使用 VS 2012 并创建了两个应用程序：

1.  应用#1。**MVC 3** , 网络 4.5

2.  应用#2。**MVC 4** , 网络 4.5

如果我比较这些应用程序的 web.config，我会看到 app#2 (MVC 4) 注册了以下处理程序：

1.  ExtensionlessUrlHandler-ISAPI-4.0_32bit
2.  ExtensionlessUrlHandler-ISAPI-4.0_64bit
3.  ExtensionlessUrlHandler-Integrated-4.0

谁能解释一下它们是如何以及何时使用的？

还有一个问题（可选）。如果现在需要这些处理程序，我应该把我的处理程序放在哪里？在他们之前还是之后？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T13:28:21.577

这是一篇可能会有所帮助的博客文章。

[http://blogs.msdn.com/b/tmarq/archive/2010/05/26/how-extensionless-urls-are-handled-by-asp-net-v4.aspx](http://blogs.msdn.com/b/tmarq/archive/2010/05/26/how-extensionless-urls-are-handled-by-asp-net-v4.aspx)

（具有讽刺意味的是，它不使用无扩展名网址）

我的理解是，您将需要 IIS 7 或更高版本才能从集成映射中受益，并且您需要使用其他 ISAPI 处理程序之一。

# c# - 如何在 Webform 中使用 Java 脚本启用禁用字段

> ID：12708116
> 
> 赞同：1
> 
> 时间：2012-10-03T12:03:56.467
> 
> 标签：c#, javascript, asp.net

我创建了一个网页“Default.aspx”，其中我在“Default.aspx”页面下使用了以下字段：名字、姓氏、帐户标题、标题（单选按钮列表）、AccountNumber 和 AccountFormat，我使用了单选按钮列表也是，其值为 Yes 和 No。如果我选​​择 Yes，则以下字段的可见性应设置为 false：

名字，姓氏

如果我选择“否”，则以下字段可见性应设置为 true：

帐号名称、帐号

为此，我在“Default.aspx”中编写了以下 Java 脚本代码

```
function EnableDisableTaxID() {
        if (document.getElementById("<%=rdOpeningSubAccount.ClientID %>") != null) {

            var openSubAccountList = document.getElementById('<%= rdOpeningSubAccount.ClientID  %>');
            var fbo1RadioList = document.getElementById('<%=fbo1RadioButtonList.ClientID %>').value;
            var isOpenSubAccount;

            if (openSubAccountList != null) {

                var openSubAccount = openSubAccountList.getElementsByTagName("input");

                for (var i = 0; i < openSubAccount.length; i++) {

                    if (openSubAccount[i].checked) {

                        isOpenSubAccount = openSubAccount[i].value;
                        alert("Print" + isOpenSubAccount);
                    }
                }
            }
            alert(typeof(isOpenSubAccount));
            if (isOpenSubAccount == 'true') {
                FirstName.visible = true;
                LastName.visible = false;
                AccountTitling.visible = true;
                lblFirstName.visible=false;
                lblLastName.visible=false;

            }
            else if (isOpenSubAccount == 'false') {
                AccountTitling.visible = true;
                AccountNumber.visible = false;
                lblAccountTitling.visible = true;
                lblAccountNumber.visible = false;
            }
        }
    } 
```

但是，我从单选按钮列表中获取所需的值，但是，当我去检查单选按钮列表的选定值是否为真时，上面的代码不起作用。我不知道我错过了什么。我知道直接使用下面的代码是行不通的：

```
if (isOpenSubAccount == 'true') {
                FirstName.visible = true;
                LastName.visible = false;
                AccountTitling.visible = true;
                lblFirstName.visible=false;
                lblLastName.visible=false;

            } 
```

请帮忙，因为我被困在这里......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:09:24.687

对于可见 = 假；

```
document.getElementById('FirstName').style.visibility="hidden"; 
```

对于可见=真；

```
document.getElementById('FirstName').style.visibility="visible"; 
```

启用：

```
document.getElementById('FirstName').disabled = false; 
```

要禁用：

```
document.getElementById('FirstName').disabled = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:11:54.050

不; document.getElementById 只会获取具有您指定 ID 的元素（HTML 规范非常明确，页面上只有一个元素可以具有特定 ID）。

每个单选按钮都有不同的 ID 属性，但是如果您查看页面的 HTML 源代码，您会看到列表中的所有单选按钮都具有相同的 NAME 属性。这就是您应该使用的“单选按钮的名称”。

onclick="GetRadioButtonValue('<%= radiobuttonlist1.ClientID %>')"

```
function GetRadioButtonValue(id)

        {

            var radio = document.getElementsByName(id);

            for (var j = 0; j < radio.length; j++)

            {

                if (radio[j].checked)

                    alert(radio[j].value);

            }

        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T12:14:11.100

以下可以为

**不可见**

```
document.getElementById('id-name').style.display='none'; 
```

**可见的**

```
document.getElementById('id-name').style.display='block'; 
```

**禁用**

```
document.getElementById('id-name').setAttribute('disabled', 'disabled'); 
```

**使能够**

```
document.getElementById('id-name').removeAttribute('disabled'); 
```

# c# - asmx Web 服务上的大型二进制文件

> ID：12708119
> 
> 赞同：3
> 
> 时间：2012-10-03T12:04:13.173
> 
> 标签：c#, web-services, serialization, asmx, webmethod

我正在通过经典的 asmx Web 服务传输一个大的压缩文本文件。我这样做的原因是文件的大小是 20 MB 解压缩，4MB 压缩。

这就是方法。如有必要，我将提供更多信息。

```
 [WebMethod]
    public byte[] Transfer()
    {
        return File.ReadAllBytes(@"4MBFile.zip");
    } 
```

我正在使用 C# 和 .NET 4。（我将项目的初始设置从 2.0 更改为 4.0）。

webmethod 使用一种序列化，所以我想会有一些开销。

我真的只传输 4MB 吗？如果有的话，我如何衡量这个开销？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T12:15:22.287

> XML Web 服务通过标准的 Web 协议向 Web 用户公开有用的功能。在大多数情况下，使用的协议是 SOAP。

[这个问题](https://stackoverflow.com/questions/5377918/how-to-serialize-byte-array-to-xml-using-xmlserializer-in-c)表明 ASMX Web 服务使用的 XmlSerializer 默认情况下对二进制数据进行 Base64 编码，所以是的，开销会很明显。

> 我真的只传输 4MB 吗？

是什么让您无法使用[Fiddler](http://www.fiddler2.com/fiddler2/version.asp)监控服务调用？它将告诉确切的 HTTP 响应正文大小。

通过将属性归属为hexBinary[似乎有一个解决方案](http://msdn.microsoft.com/en-us/library/ms996427.aspx)，因此它不会是 Base64 编码的。

# c++ - Qt 根据参数类型触发不同的信号

> ID：12708123
> 
> 赞同：0
> 
> 时间：2012-10-03T12:04:20.670
> 
> 标签：c++, qt, polymorphism, signals

我需要根据参数类型从 SomeClass::fireSignal 成员函数中触发不同的信号。我看到的解决方案是使用 Qt 元系统。这样的任务有更正确的解决方案吗？请帮忙。提前致谢。

```
class SomeClass : public QObject
{
    Q_OBJECT
public:
    void fireSignal(BaseClass *param) {
        if(param->metaObject->className() == "DerivedClass1") {
            emit derivedClass1Signal(param)
        }
        if(param->metaObject->className() == "SecondDerivedClass") {
            emit secondDerivedClassSignal(param)
        }
        if(param->metaObject->className() == "OtherDerivedClass") {
            emit otherDerivedClassSignal(param)
        }
    }
signals:
    void derivedClass1Signal(DerivedClass1 *param);
    void secondDerivedClassSignal(SecondDerivedClass *param);
    void otherDerivedClassSignal(OtherDerivedClass *param)
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T00:10:25.300

也许尝试：

```
class SomeClass : public QObject
{
Q_OBJECT
public:
void fireSignal(BaseClass *param) {
    if(param->metaObject->className() == DerivedCass::staticMetaObject.className()) {
        emit sig(qobject_cast<DerivedClass*>(param);
    }
    if(param->metaObject->className() == SecondDerivedClass::staticMetaObject.className()) {
        emit sig(qobject_cast<SecondDerivedClass*>(param);
    }
    if(param->metaObject->className() == OtherDerivedClass::staticMetaObject.className()) {
        emit sig(qobject_cast<OtherDerivedClass*>(param);
    }
}
signals:
    void sig(DerivedClass1 *param);
    void sig(SecondDerivedClass *param);
    void sig(OtherDerivedClass *param)
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:30:41.920

一般来说，这是可以的。您可以进行一些改进，但这在很大程度上取决于您如何使用这些信号。例如，如果所有三个都连接到同一个插槽，您可以在此处减少代码，留下一个信号，该信号有一个参数，该参数是基类的指针：

```
class SomeClass : public QObject
{
    Q_OBJECT
public:
    void fireSignal(BaseClass *param) {
            emit derivedClassSignal(param);
    }
signals:
    void derivedClassSignal(DerivedClass1 *param);
}; 
```

但是，从发送者的代码中删除检查将迫使您将其包含到接收者的代码中（即检查通过了哪个精确派生类型）。但是，如果每个信号都连接到不同的插槽，并且这些插槽只需要特定类型的参数，那么这将不起作用，您的方法会更好。

# ruby-on-rails - 保持弹性搜索和数据库同步

> ID：12708128
> 
> 赞同：5
> 
> 时间：2012-10-03T12:04:36.253
> 
> 标签：ruby-on-rails, lucene, nosql, elasticsearch

我正在想办法让我的 mysql db 和 elasticsearch db 保持同步。我已经使用[jprante / elasticsearch-river-jdbc](https://github.com/jprante/elasticsearch-river-jdbc)插件为 elasticsearch 设置了一个 jdbc 河。当我执行以下请求时：

```
curl -XPUT 'localhost:9200/_river/my_jdbc_river/_meta' -d '{
"type" : "jdbc",
"jdbc" : {
    "driver" : "com.mysql.jdbc.Driver",
    "url" : "jdbc:mysql://localhost:3306/MY-DATABASE",
    "user" : "root",
    "password" : "password",
    "sql" : "select * from users",
    "poll" : "1m"
},
"index" : {
    "index" : "test_index",
    "type" : "user"
}
}' 
```

河流开始索引数据，但对于某些记录，我得到`org.elasticsearch.index.mapper.MapperParsingException`. [好吧，这里](https://github.com/elasticsearch/elasticsearch/issues/1331)有与此问题相关的讨论，但我想知道解决此问题的方法。

是否可以通过为我要索引的“类型”的所有“字段”创建[显式映射来永久解决此问题，或者是否有更好的方法来解决此问题？](http://www.elasticsearch.org/guide/reference/mapping/)

我的另一个问题是，当 jdbc-river 再次轮询数据库时，它似乎将整个数据集（在 sql 查询中给出）再次重新索引到 ES 中。我不确定，但是这样做是因为 elasticsearch 想要添加新数据以及更新现有数据中的任何更改吗？如果表的数据是静态的，是否可以只索引新数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T06:11:40.147

你看过默认映射吗？ [http://www.elasticsearch.org/guide/reference/mapping/dynamic-mapping.html](http://www.elasticsearch.org/guide/reference/mapping/dynamic-mapping.html)

我认为它可以在这里帮助你。

如果您的数据表中有一个插入日期字段，您可以使用它来过滤您必须索引的内容。见[https://github.com/jprante/elasticsearch-river-jdbc#time-based-selecting](https://github.com/jprante/elasticsearch-river-jdbc#time-based-selecting)

高温高压

大卫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-31T07:51:58.190

Elastic Search 完全放弃了河流同步的概念。这不是推荐的路径，因为通常在 Elastic Search 等文档存储中保持相同的规范化 SQL 表结构是没有意义的。

假设您将 Product 作为具有某些属性的实体，并将 Product 实体上的评论作为父子表，因为评论可以在同一个表上有多条。

```
Products(Id, name, status,... etc)
Product_reviewes(product_id, review_id)
Reviews(id, note, rating,... etc) 
```

在文档存储中，您可能希望创建一个名称为产品的单个索引，其中包括`Product{attribute1, attribute1,... Product reviews[review1, review2,...]}`

这是在这种设置中同步的方法。

假设：

1.  SQL 数据库（真实记录来源）

2.  Elastic Search 或任何其他 NoSql 文档存储

解决方案：

1.  一旦更新/更新发生在 JMS/AMQP/数据库队列/文件系统队列/Amazon SQS 等中的发布事件/事件中，完整的产品或主要对象 ID（我建议只使用 ID）
2.  如果仅将主 ID 推送到队列，则队列使用者应调用 Web 服务以获取完整对象，或者仅获取它自己的对象并将相应的更改发送到 Elastic search/NoSQL 数据库。

# php - 如何在单击图像时运行 php 代码

> ID：12708129
> 
> 赞同：-6
> 
> 时间：2012-10-03T12:04:35.740
> 
> 标签：php, javascript

> **可能重复：**
> [当用户点击链接时如何运行 PHP 代码？](https://stackoverflow.com/questions/1280767/how-do-i-run-php-code-when-a-user-clicks-on-a-link)

我有一个图像。

```
<image name="" src=""> 
```

我有一个`php`代码，只有在单击图像后才需要运行。

```
<?php

$var = somthing;
if(condition)
{
    sql stmts;
}

?> 
```

像那样。

两者都在同一个php页面中。请帮我解决这个问题。

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:08:00.113

您可以使用 javascript 发送请求。使用 jQuery，看起来像这样：

```
$.get("yourfile.php?function=imageClick", function(data){}); 
```

在您的 php 顶部某处添加：

```
if($_GET['function'] == 'imageClick'){
  // do your php stuff
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:08:18.387

您不能在客户端运行 PHP 代码。

您可以通过 AJAX 调用来做到这一点：http: [//www.w3schools.com/ajax/default.asp](http://www.w3schools.com/ajax/default.asp)

# ruby - 具有更多选项的 Yaml

> ID：12708130
> 
> 赞同：3
> 
> 时间：2012-10-03T12:04:39.037
> 
> 标签：ruby, yaml, ruby-1.9

根据 Phrogz 和我对[这个问题](https://stackoverflow.com/questions/9759302)的回答，与 Ruby 1.9 一起使用的 yaml 库似乎只允许几个选项：、、、、`indentation`（并设置为）。我想使用官方 YAML 格式允许的其他选项，包括但不限于. 是否可以通过小技巧激活其他选项，或者是否有 Ruby 1.9 的替代 yaml 库允许其他选项？为什么 yaml 库不提供其他选项？`line_width``canonical``line_wrap``line_width``-1``use_block`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:12:43.587

作为临时解决方案，我找到[了 ya2yaml](https://github.com/rkj/ya2yaml)。不过，这有一些问题。

1.  它没有阅读能力。它只用于写作。
2.  它不会完全输出带有`!ruby/class ...`符号的不受欢迎的 Ruby 类。在 yaml gem 中，完全使用了这种表示法，以便在 ruby​​-yaml-ruby 往返过程中保留 Ruby 类。
3.  它使用`!ruby/symbol ...`符号表示法，与`:...`yaml gem 中使用的表示法相比，它看起来很长。
4.  它使用`? ... \n:`yaml 语法作为哈希键，与使用 yaml gem 的更紧凑的哈希表示法相比，它看起来很长。

到目前为止，问题 2 对我来说没什么大不了的，所以我通过以下方式使用 yaml 和 ya2yaml gem 的组合来克服问题 1、3、4：

```
require "yaml" # For reading.
require "ya2yaml" # For writing.

class Object
  def to_yaml # Method for writing in yaml
    ya2yaml.
    # Put hash key on a single line if it is a symbol
    gsub(/^(\s*)\? !ruby\/symbol (\S+)\s+/, '\1:\2').
    # Use symbol literal
    gsub(/(?<=\s)!ruby\/symbol /, ':')
  end
end 
```

# joomla - joomla falang 为 ignite 画廊添加翻译

> ID：12708131
> 
> 赞同：0
> 
> 时间：2012-10-03T12:04:46.687
> 
> 标签：joomla, joomla2.5, joomla-extensions

由于我是新手，所以`joomla`我不知道如何使翻译工作正常工作......目前我正在尝试添加翻译以`ignite gallery component`使用它`xml file`来指定要翻译的内容

" `<?xml version="1.0" ?> <falang type="contentelement"> <name>Ignite Gallery v1.0 Main</name> <author>Matthew Thomson</author> <version>1.0</version> <description>Ignite Gallery v1.0 Main</description> <reference> <table name="igallery"> <field type="referenceid" name="id" translate="0">ID</field> <field type="titletext" name="name" translate="1">Name</field> <field type="htmltext" name="menu_description" translate="1">Menu Description</field> <field type="htmltext" name="gallery_description" translate="1">Gallery Description</field> <field type="text" name="alias" translate="0">Alias</field> </table> </reference> </falang>`"

现在的问题是它从英语翻译成俄语，但是当我尝试从俄语翻译成英语时，会`falang`用俄语覆盖主要语言。

如果你能解释我为什么会很好......

**编辑：**

我不是在尝试翻译画廊本身，而是在尝试使用该 xml 文件翻译图像名称、描述和菜单描述

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:59:25.823

考虑到您已经在您的网站上安装了 joomla 的俄语语言包：

*   转到您的网站根文件夹
*   找到语言文件夹
*   转到 en-GB 文件夹
*   找到 en-GB.com_ignitegallery.ini （或任何您的组件名称）
*   将其复制到语言文件夹中的 ru-RU 文件夹中
*   将其名称更改为 ru-RU.com_ignitegallery.ini
*   打开它
*   翻译它
*   完毕！

现在您只需将网站的语言更改为俄语。

# vbscript - 在团队中共享代码片段？

> ID：12708138
> 
> 赞同：0
> 
> 时间：2012-10-03T12:05:13.953
> 
> 标签：vbscript

我正在寻找某种（如果可能的话）Web 服务/本地服务器下载，它可以让我在工作中与我的团队共享代码片段。为了提高我们团队的生产力，似乎最好的方法是让团队中的每个人都提交带有他们名字的代码片段。因此，一种在本地网络（在团队中）共享代码片段的方法，以及一种告诉谁何时提交了哪个代码片段的方法。我看了一点，发现[https://snipt.net](https://snipt.net)很好，但从外观上看并没有真正为团队设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:10:24.470

如果您使用 git 进行版本控制，并且您正在使用版本控制对吗？:)。在我看来，Github 是共享和管理代码的事实标准。他们有非常实惠的免费和付费计划。也可以颠覆托管，因此您可以在两个方面都得到保障。

# java - 如果目录中存在文件名，则替换

> ID：12708149
> 
> 赞同：1
> 
> 时间：2012-10-03T12:06:17.320
> 
> 标签：java, file

这是我尝试过的代码。但是即使文件存在，这也会返回 false。变量 FilePath 和 FileName 是从 UI 获得的。

```
File exportFile = new File("\""+FilePath + "\\"+ FileName+"\"");  
boolean exists = exportFile.exists();  

if (!exists) {  

    System.out.println("File does not exists");               
}
else{  

    System.out.println( "File exists.");                                      
} 
```

这样做的正确方法是什么？顺便说一句，我如何提示用户替换或重命名文件名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:13:07.590

代替

```
File exportFile = new File("\""+FilePath + "\\"+ FileName+"\""); 
```

和

```
File exportFile = new File(FilePath + "\\" + FileName); 
```

无需引用文件名。即使它包含空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T12:14:48.137

我认为问题可能是由您获取文件路径的方式引起的，因为您是从 UI 获取它，我应该指出您不必构造路径，您可以使用`getAbsolutePath()`或类`getPath()`中提供的方法`java.io.File`。

# unit-testing - 如何运行 Nunit 测试？

> ID：12708153
> 
> 赞同：-2
> 
> 时间：2012-10-03T12:06:22.190
> 
> 标签：unit-testing, nunit

谁能告诉我 Nunit 测试的结果是什么？它是否会产生通过或失败（带有错误消息），或者它会给出它会在哪一点产生错误和更多细节？我们可以将错误结果存储在 XML 文件中吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T12:09:01.570

**[NUnit 文档](http://nunit.org/index.php?p=docHome&r=2.6.1)**可能会回答您的大部分问题。他们甚至提供了[如何运行 NUnit 测试](http://nunit.org/index.php?p=runningTests&r=2.6.1)的部分。

# redirect - JSF - 从@PostConstruct 重定向后保留面孔消息

> ID：12708156
> 
> 赞同：2
> 
> 时间：2012-10-03T12:06:50.557
> 
> 标签：redirect, jsf-2, java-ee-6, omnifaces

我的 page1 带有导航到 page2 的按钮，第 2 页添加了一些消息并导航回 page1。我想在 page1 上显示这些消息。我尝试了很多解决方案，但没有任何效果。

示例代码 page1.xhtml：

```
<p:commandButton value="edit" action="#{bean1.edit}"/> 
```

在托管 bean 中：

```
public String edit() {
  return "page2?faces-redirect=true";
} 
```

page2 托管 bean

```
@PostConstruct
private void postConstruct() {
  Faces.getFlash().setKeepMessages(true);
  Messages.addFlashGlobalError("cannot edit!");
  Faces.navigate("page1?faces-redirect=true");
} 
```

两个 bean 都是视图范围的，并且两个页面都`<p:messages>`位于正文的末尾。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:43:52.930

如果`@PostConstruct`调用太晚，就会发生这种情况。显然，bean 被引用，因此第一次在视图中相对“较晚”构建（例如，在最底部）。此时，响应可能已经提交，这是一个不归路。您无法再导航到其他视图。

您基本上想在呈现响应*之前*`init()`调用该方法。使用 OmniFaces，您可以使用以下方法：*`page2.xhtml`*

 *```
<f:metadata>
    <f:viewParam name="dummy" />
    <f:event type="postInvokeAction" listener="#{bean.init}" />
</f:metadata> 
```

*`<f:viewParam name="dummy" />`（如果您在该页面上已经有自己的视图参数，则可以删除；这只是为了确保`INVOKE_ACTION`执行该阶段，另请参见[`postInvokeAction`演示页面](http://showcase.omnifaces.org/eventlisteners/InvokeActionEventListener)）*

只是一个简单的`<f:event listener>`方法：

```
public void init() {
    Messages.addFlashGlobalError("cannot edit!");
    Faces.navigate("page1?faces-redirect=true"); // Or Faces.redirect("page1.xhtml");
} 
```

这`Faces.getFlash().setKeepMessages(true);`是不必要的，因为`Messages#addFlashGlobalError()`已经这样做了。请记住，在 Mojarra 中，如果导航到 URL 中的不同文件夹，则 Flash 范围将不起作用。这两个页面必须位于 URL 中的同一文件夹中。这已在即将发布的 Mojarra 2.1.14 中修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T04:04:00.110

首先，我不完全确定这`@PostConstruct`是执行重定向的最佳位置。看到[这个](https://stackoverflow.com/q/12168043/1530938)。话虽这么说，谷歌出现了[这个](http://ocpsoft.org/java/persist-and-pass-facesmessages-over-page-redirects/)，它看起来很合理。`preRender`尝试使用靠近页面顶部的事件标记在 facelets 页面本身内重定向。干杯

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-04T07:58:10.740

只需使用导航。它肯定会奏效。检查以下代码。公共字符串重定向（）抛出异常 { FacesContext.getCurrentInstance().addMessage("Msg1",new FacesMessage("Message 1 is"​​)); //FacesContext.getCurrentInstance().getExternalContext().redirect("/Sam/page2.jsf"); 返回“第2页”；}*

# json - 如何将 JSON 放入 Freemarker 模板 (FTL)

> ID：12708162
> 
> 赞同：2
> 
> 时间：2012-10-03T12:07:05.003
> 
> 标签：json, freemarker

我有一个我查询的 MongoDB，我序列化的结果和我发送到我的 ftl 模板的这个字符串。下面是序列化的结果：

```
 [
            {
              "id" : "10",
              "title" : "Test Title 1",
              "partner" : {
                "id" : "1",
                "name" : "partner 1 ",   
                "location" : [{
                    "locationname" : "locationname 1a",
                    "city" : ""
                  },{
                    "locationname" : "locationname 1b",
                    "city" : ""
                    }]
              }
            },
            {
              "id" : "6",
              "title" : "Test Title 2",
              "partner" : {
                "id" : "1",
                "name" : "partner 2 ",   
                "location" : [{
                    "locationname" : "locationname 2b",
                    "city" : ""
                  }]
              }
            }  
        ] 
```

我将如何在我的 ftl 模板中使用它？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:00:29.423

如果在将结果提供给 FreeMarker 之前确实必须进行序列化...地图和列表的 JSON 语法恰好是 FTL 的子集，因此假设序列化结果在 中`res`，`res?eval`将为您提供地图列表。

# java - Buildr：如何在打包前进行测试

> ID：12708165
> 
> 赞同：0
> 
> 时间：2012-10-03T12:07:13.243
> 
> 标签：java, automated-tests, integration-testing, war, buildr

我有一个带有**[生成](http://buildr.apache.org/)**器生成战争文件的项目。出于某种原因，“测试”阶段在“战争”阶段之后运行。但是，我需要在war中直接打包一些测试结果，所以我的测试直接将文件写入/src/java/webapp。然而，“战争”发生在“测试”之前。

那么，我怎样才能强制在“战争”之前执行“测试”呢？

谢谢，乌里。

# view - 如何使用 LotusNotes 公式从视图中获取第一个条目？

> ID：12708167
> 
> 赞同：1
> 
> 时间：2012-10-03T12:07:22.397
> 
> 标签：view, lotus-notes, formula

我有一个包含 2 列的视图：名称和电话。视图名称是 vwOrder。使用 Lotus @Formulas，如何获取此视图中存在的第一个条目（ Phone 的第一个值）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:31:23.963

使用@DbColumn 获取Phone 列的值列表。

```
Phones := @DbColumn("";"":"DB.NSF";"vwOrder";2) 
```

然后只需获取该列表的第一个值

```
Firstphone := Phones[1] 
```

# visual-studio-2010 - 如何在 VS 2010 中将“待更改”按钮添加到工具栏

> ID：12708168
> 
> 赞同：7
> 
> 时间：2012-10-03T12:07:36.783
> 
> 标签：visual-studio-2010

我希望能够直接从 Visual Studio 2010 的工具栏中访问“待更改”按钮，而无需单击子菜单。

我知道如何将按钮添加到工具栏，但我似乎无法在自定义窗口中找到“待更改”按钮。

我发现了一个叫做“待签入”的东西，但这似乎有所不同。

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-03T12:19:48.737

找到了。它在 View --> tfsPendingChanges 下。

您还可以找到 tfsSourceControlExplorer 和 tfsHistory。

所以我为这些项目制作了一个新的工具栏。

# jquery - 输入在 IE 上不起作用

> ID：12708170
> 
> 赞同：0
> 
> 时间：2012-10-03T12:07:44.470
> 
> 标签：jquery, css, internet-explorer, cross-browser

我用jquery写了一个js计算器，它可以在除IE之外的主要浏览器上运行，主要问题是输入元素根本不显示，输入也无法显示。输入被禁用以防止非法输入，我认为这可能是原因，但启用它们并不能解决问题。代码位于[https://github.com/ZackYovel/jQCalc/tree/master/pathTo](https://github.com/ZackYovel/jQCalc/tree/master/pathTo)，演示位于[http://jqcalc.co.nf/](http://jqcalc.co.nf/) 这里也是输入的 css：输入用这个 div：

```
#jQCalc-input-container:focus {
    border: thin solid #fff;
    background: rgb(237,247,253); /* Old browsers */
    background: -moz-linear-gradient(top, rgba(237,247,253,1) 0%, rgba(255,255,255,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(237,247,253,1)), color-stop(100%,rgba(255,255,255,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, rgba(237,247,253,1) 0%,rgba(255,255,255,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, rgba(237,247,253,1) 0%,rgba(255,255,255,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top, rgba(237,247,253,1) 0%,rgba(255,255,255,1) 100%); /* IE10+ */
    background: linear-gradient(to bottom, rgba(237,247,253,1) 0%,rgba(255,255,255,1) 100%); /* W3C */
    -ms-filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#edf7fd', endColorstr='#ffffff',GradientType=0 ); /* IE6-9 */
} 
```

这些是输入：

```
#jQCalc-expression-line, #jQCalc-result-line {
    display: table-row;
    background: none;
    width: 95%;
    margin: 0 auto;
    border: none;
    outline: none;
    font-weight: bold;
}

#jQCalc-result-line {
    letter-spacing: 1px;
    font-size: 14pt;
}

#jQCalc-expression-line {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    letter-spacing: 2px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T18:38:24.197

它只适用于 IE8 或更高版本，请查看此处的网站兼容性：

[http://www.quirksmode.org/css/css2/display.html](http://www.quirksmode.org/css/css2/display.html)

另外，请注意您的 display: table-row 元素，需要嵌套在 display: table 元素中。其他一些浏览器可能只是为您自动更正。

因此，我认为我会避免使用 display: table。您通常应该能够在没有它的情况下使用具有更高兼容性的类似 CSS 网格的系统来实现您想要的布局。

# nhibernate - 字符串值的长度超过了映射/参数中配置的长度

> ID：12708171
> 
> 赞同：40
> 
> 时间：2012-10-03T12:07:47.767
> 
> 标签：nhibernate, fluent-nhibernate

我正在尝试将一些非常长的文本插入到字符串道具中 - 它与 LinqToSql 完美配合，现在我已经切换到 NHibernate 并想要保存相同的实体，但是 nHibernate 抛出了上述异常。

我怎样才能解决这个问题？

最初我的道具被定义为：

```
 Map(x => x.Content, "fT_Content").Nullable();
        Map(x => x.Fields, "fT_Fields").Nullable(); 
```

现在他们是：**这行得通**，但为什么我必须这样做？

```
 Map(x => x.Content, "fT_Content").CustomSqlType("nvarchar(max)").Length(Int32.MaxValue).Nullable();
        Map(x => x.Fields, "fT_Fields").CustomSqlType("nvarchar(max)").Length(Int32.MaxValue).Nullable(); 
```

注意：我有最新的使用 nuget 的 nhibernate。

对于参考这里是字段：

```
 public virtual string Content
    {
        get;
        set;
    }

    public virtual string Fields
    {
        get;
        set;
    } 
```

**我想避免**去现场制作，突然插入停止在这张桌子上工作......

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-10-03T15:31:34.390

这是 NHibernate 处理 nvarchar(max) 的一个众所周知的问题，请参阅：

[http://geekswithblogs.net/lszk/archive/2011/07/11/nhibernatemapping-a-string-field-as-nvarcharmax-in-sql-server-using.aspx](http://geekswithblogs.net/lszk/archive/2011/07/11/nhibernatemapping-a-string-field-as-nvarcharmax-in-sql-server-using.aspx)

几年来，我一直在将 nvarchar(max) 列文件映射到 StringClob 而没有遇到任何问题：

```
<property name="myProp" column="MY_PROP" not-null="true" type="StringClob" access="property"></property> 
```

此链接（来自评论）描述了解决此问题所需的流畅映射：

[https://www.tritac.com/nl/blog/fluent-nhibernate-nvarchar-max-fields-truncated-to-4000-characters/](https://www.tritac.com/nl/blog/fluent-nhibernate-nvarchar-max-fields-truncated-to-4000-characters/)

```
Map(x => x.Description).CustomType("StringClob").CustomSqlType("nvarchar(max)"); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-03T14:27:59.217

NHibernate 中默认的最大字符串长度为 4000 个字符。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-08-07T19:41:51.850

如果您使用 nHibernate Mapping By Code (Not Fluent) 我在这里找到了解决方案：

[https://groups.google.com/forum/#!topic/nhusers/uDAcP4BqFUU](https://groups.google.com/forum/#!topic/nhusers/uDAcP4BqFUU)

```
Property(x => x.Description, c =>
   {
      c.Column("Product");
      c.Type(NHibernateUtil.StringClob);
   }
); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-05-23T15:05:24.503

这是一个相当古老的问题，现在似乎有一个更直接的解决方案。我遇到了同样的问题，在映射中将列的长度设置为 Int32.MaxValue 解决了这个问题：

```
Map(_ => _.Body).Length(Int32.MaxValue); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T22:21:08.830

我遇到了类似的问题，但使用了`CustomType`（派生自`IUserType`）。事实证明，它比没有自定义类型更容易修复。您需要做的就是定义 SqlTypes 以显式返回您想要的更长的字符串长度类型。

```
public SqlType[] SqlTypes
{
    get
    {
        // Explicitly specify the string max length 
        return new SqlType[] { SqlTypeFactory.GetString(Int32.MaxValue / 2) };
    }
} 
```

这很好地解决了我们的问题。

# php - Symfony 2.1 Sonata 管理包 OneToMany

> ID：12708181
> 
> 赞同：5
> 
> 时间：2012-10-03T12:08:32.803
> 
> 标签：php, symfony, doctrine, symfony-2.1, symfony-sonata

假设我有两个实体：

**一、产品**

```
/**
 * @ORM\Table()
 * @ORM\Entity
 */
class Product
{
    /*   
     * @ORM\Column(name="name", type="string", length=255)
     */
    private $name;

    /**
     * @ORM\OneToMany(targetEntity="Catalog", mappedBy="product")
     */
    public $catalogs;

    public function __construct()
    {
        $this->catalogs = new \Doctrine\Common\Collections\ArrayCollection();
    }
} 
```

**2.目录**

```
/**
 *
 * @ORM\Table()
 * @ORM\Entity
 */
class Catalog
{
    /**
     * @ORM\ManyToOne(targetEntity="Product", inversedBy="catalogs") 
     */
    private $product;

    /**
     * @ORM\Column(name="name", type="string", length=255)
     */
    private $name;
} 
```

我的`ProductAdmin`：

```
class ProductAdmin extends Admin
{
    protected function configureFormFields(FormMapper $formMapper)
    {
        $formMapper
        ->add('name')
        ->add('catalogs', 'sonata_type_model')
        ;
    }
} 
```

我无法开始`catalogs`工作（类似于 user=>groups 关联：http: [//demo.sonata-project.org/admin/sonata/user/user/create](http://demo.sonata-project.org/admin/sonata/user/user/create) credentials: admin/admin）。我只得到错误：`No entity manager defined for class Doctrine\Common\Collections\ArrayCollection`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T08:10:01.217

尝试多个选项：

```
 protected function configureFormFields(FormMapper $formMapper)
    {
        $formMapper
        ->add('name')
        ->add('catalogs', 'sonata_type_model', array('multiple' => true)
        ;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T20:43:15.850

您必须为目录实体添加一个单独的管理类。

如果您拥有与 ProductAdmin 相同的 CatalogAdmin，则只能使用 Catalog。之后，您可以使用 sonata_type_model 或 sonata_type_model_list 表单类型。

# ios5 - 通过 UIGestureRecognizer 同时处理两个不同点的点击

> ID：12708184
> 
> 赞同：1
> 
> 时间：2012-10-03T12:08:39.980
> 
> 标签：ios5, uigesturerecognizer, multi-touch

我在两个不同的位置有两个标签，当同时点击两个标签时，我希望另一个标签显示成功消息。

![见图片：](../Images/20e1f45cc3e47b86c37469ec1e56984b.png)

我该如何做到这一点？我可以通过一个或多个手指触摸识别单击或双击，但这是一种不同的情况。请帮忙。我试过这个，但它不起作用。

```
UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
        tapRecognizer.numberOfTapsRequired = 1;
        tapRecognizer.numberOfTouchesRequired = 2;
        tapRecognizer.delegate = self;
        [self.view addGestureRecognizer:tapRecognizer];

-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
{
    if (touch.view == tap2 && touch.view == tap1)
    {
        result.text = @"success";
    }
    return YES;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:31:22.543

你试图检测的并不是一个单一的手势。

我建议为每个按钮添加一个点击手势识别器。处理程序将：

1.  存储点击的时间（在调用处理程序的那一刻）
2.  将此时间与上次点击另一个按钮的时间进行比较。如果时间非常相似（可能相隔 0.25 秒），请考虑它们都被同时点击并做出相应反应。

在真实设备上玩时间间隔以找到理想的数量。

更新：

一段显然没有经过任何测试的代码片段：

```
- (void)handleButton1Tap:(UITapGestureRecognizer *)sender  {
    if (sender.state == UIGestureRecognizerStateEnded)
    {
        self.button1TapTime = CACurrentMediaTime();
        [self testForSimultaneousTap];
    }
}

- (void)handleButton2Tap:(UITapGestureRecognizer *)sender  {
    if (sender.state == UIGestureRecognizerStateEnded)
    {
        self.button2TapTime = CACurrentMediaTime();
        [self testForSimultaneousTap];
    }
}

- (void)testForSimultaneousTap
{
    if (fabs(self.button1TapTime - self.button2TapTime) <= 0.2)
    {
        // Do stuff
    }
} 
```

其中 self.button1TapTime 和 self.button2TapTime 是成员变量（双精度）。

蒂姆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T06:39:57.590

正式地，我首先接受了 termes 的回答，这也有效，但我找到了一个更简单的解决方案来解决这个过程。不需要两个手势识别器，只需一个简单的点击手势识别器即可实现，触摸次数为两次。这是代码：

```
UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
    tapRecognizer.numberOfTapsRequired = 1;
    tapRecognizer.numberOfTouchesRequired = 2;
    tapRecognizer.delegate = self;
    [self addGestureRecognizer:tapRecognizer]; 
```

现在，在handle tap 方法中，我们可以通过UIGestureRecognizer 类的实例方法“ [locationOfTouch:inView: ”轻松获取两个触摸点。](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/instm/UIGestureRecognizer/locationOfTouch%3ainView%3a)所以在`handleTap:`方法中我们需要检查两个接触点是否在想要的位置。这是代码：

```
-(void)handleTap:(UITapGestureRecognizer*)recognizer
{
    if (recognizer.state == UIGestureRecognizerStateEnded)
    {
        CGPoint point1 = [recognizer locationOfTouch:0 self];
        CGPoint point2 = [recognizer locationOfTouch:1 self];

        if ([self validateTapIn:point1 and:point2])
        {
            resultLabel.text = @"success";
        }
    }
}

-(BOOL)validateTapIn:(CGPoint)point1 and:(CGPoint)point2
{
    return
    (CGRectContainsPoint(label1.frame, point1) && CGRectContainsPoint(label2.frame,:point2)) ||
    (CGRectContainsPoint(label1.frame, point2) && CGRectContainsPoint(label2.frame, point1));
} 
```

# ios - 未在 UITableView 中选择单元格且在编辑模式下设置了allowMultipleSelectionDuringEditing

> ID：12708186
> 
> 赞同：8
> 
> 时间：2012-10-03T12:08:42.150
> 
> 标签：ios, uitableview, multiple-select

我有一个`UITableView`配置为允许在编辑模式下选择多个单元格。但是，在触摸/选择单元格后，左侧的空白色圆圈永远不会变为内部带有白色复选标记的红色圆圈。

我已经阅读了有关滑动删除问题的信息`allowsMultipleSelectionDuringEditing`，所以我的`setEditing:animinated`方法如下所示：

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated
{
    self.tableView.allowsMultipleSelectionDuringEditing = editing;
    [super setEditing:editing animated:animated];
} 
```

网上的一些资源建议设置`allowsSelectionDuringEditing = NO;`，但没有效果。另外，我的单元格编辑样式设置为`UITableViewCellEditingStyleDelete`，更改它也没有任何效果。

当在编辑模式下触摸一行时，`tableView:didSelectRowForIndexpath:`会触发，但如上所述，UI 不会反映这一点。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-03T14:05:24.110

通常情况下，这是我的错误。

问题出在我的实现中`tableView:cellForRowAtIndexPath:`，我将单元格的`selectionStyle`属性设置为`UITableViewCellSelectionStyleNone`. 出于某种原因，这增加了在多选编辑模式下禁用左侧红色复选标记的“好处”。

设置`cell.selectionStyle = UITableViewCellSelectionStyleGray;`解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-12T10:05:35.793

旧线程，但我也遇到了这个问题，但是我发现我的自定义单元格的原因是在没有调用 super 的情况下覆盖了 setSelected 和 setHighlighted 方法。

这导致单元格无法选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-26T20:13:39.550

我遇到了类似的问题，因为我非常努力地确保我的单元格永远不会显示任何选择（对于“聊天气泡”样式的表格）。

所以当然，这个修复在我的桌子上产生了很大的彩条，我不得不找到另一种方法来摆脱它们。

在你的 cellForRowAtIndexPath 中，你可以设置一个 selectedBackgroundView 而不是设置 selectionStyle，它也会启用复选框。视图可以是您单元格的背景颜色或 clearColor，然后什么都不会显示。这是我的代码：

```
static dispatch_once_t onceToken;
static UIView * selectedBackgroundView;
dispatch_once(&onceToken, ^{
    selectedBackgroundView = [[UIView alloc] initWithFrame:cell.frame];
    selectedBackgroundView.backgroundColor = APP_CELL_BACKGROUND_COLOR;
});
cell.selectedBackgroundView = selectedBackgroundView; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-05T08:31:32.587

我有同样的问题。确保`tableView:shouldHighlightRowAtIndexPath:`返回`YES`，否则将不会发生选择，至少在 iOS 7 中是这样。

```
- (BOOL)tableView:(UITableView *)tableView
    shouldHighlightRowAtIndexPath:(NSIndexPath *)indexPath
{
    return YES;
} 
```

# php - 在 localhost 上重定向适用于 hostgator 错误无法修改标头信息（php）

> ID：12708187
> 
> 赞同：1
> 
> 时间：2012-10-03T12:08:49.573
> 
> 标签：php

我有这个代码：

```
<?php
    //Search logic for Holiday.GE
    $search_variables = $_GET['s']. '+' .$_GET['cat'];
    $var_lang_now = $_GET['lang_current_search'];

        if ($var_lang_now == ru OR $var_lang_now == en) {
            $refering_page = 'http://dev.holiday.ge/' . $var_lang_now . "/";
        } else {
            $refering_page = 'http://dev.holiday.ge';
        }

    //This sends http post to url without curl
    header("Status: 301 Moved Permanently");
    header("Location:$refering_page?s=$search_variables");
    exit;
?> 
```

在我测试它的本地主机上运行良好。但是在实时服务器上，它会出错：

```
Warning: Cannot modify header information - headers already sent by (output started at /home/sandrodz/public_html/devholidayge/wp-content/themes/sweetholiday/searchlogic.php:3) in /home/sandrodz/public_html/devholidayge/wp-content/themes/sweetholiday/searchlogic.php on line 15

Warning: Cannot modify header information - headers already sent by (output started at /home/sandrodz/public_html/devholidayge/wp-content/themes/sweetholiday/searchlogic.php:3) in /home/sandrodz/public_html/devholidayge/wp-content/themes/sweetholiday/searchlogic.php on line 16 
```

15和16是出口前的线路；

我按照答案中的建议尝试了，但我得到了同样的错误！

```
<?php
ob_start();

    //Search logic for Holiday.GE
    $search_variables = $_GET['s']. '+' .$_GET['cat'];
    $var_lang_now = $_GET['lang_current_search'];

        if ($var_lang_now == ru OR $var_lang_now == en) {
            $refering_page = 'http://dev.holiday.ge/' . $var_lang_now . "/";
        } else {
            $refering_page = 'http://dev.holiday.ge';
        }

    //This sends http post to url without curl
    header("Status: 301 Moved Permanently");
    header("Location:$refering_page?s=$search_variables");
    exit;

ob_end_flush();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:11:41.100

放在`ob_start();`开头，`ob_end_flush();`结尾

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:12:28.653

在脚本开始时使用它

```
ob_start(); 
```

最后是这个

```
ob_end_flush(); 
```

它将解决这个问题。前段时间我在插入这些之后遇到了同样的问题，一切都很好。

```
header("Location: $refering_page?s=$search_variables");
                 ^ //space should present. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T12:13:10.153

请在页面顶部使用此代码：

```
<?php ob_start(); ?> 
```

和下面的代码页面底部

```
<?php ob_flush(); ?> 
```

# hadoop - 使用 Sqoop 导出到 Postgresql ltree

> ID：12708188
> 
> 赞同：2
> 
> 时间：2012-10-03T12:09:00.043
> 
> 标签：hadoop, sqoop

要将我的数据从 HDFS 导出到 Postgres，我使用的是 Sqoop (1.3.0-cdh3u4)。主要问题是我有一列 ltree 类型。

```
ERROR orm.ClassWriter: Cannot resolve SQL type 1111
ERROR orm.ClassWriter: No Java type for SQL type 1111 for column path 
```

Sqoop 即使使用 --map-column-java 强制字符串解析也无法导出。

```
java.io.IOException: org.postgresql.util.PSQLException: ERROR: column "path" is of type ltree but expression is of type character varying
Hint: You will need to rewrite or cast the expression.
Position: 106 
```

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T01:01:10.673

在将数据导入 CSV 时，Sqoop 不知道如何将这些类型强制转换为文本。您可以在 Sqoop 中添加对它们的支持...或编写 PostgreSQL 查询来执行此操作：`COLUMN_NAME::text`！

```
sqoop import \
    --connect jdbc:postgresql://localhost:5432/foobar \
    --username ryan -P --direct \
    --query "SELECT id,ip::text,my_enum::text,description FROM stuff WHERE \$CONDITIONS" \
    --target-dir stuff \
    --split-by id 
```

我还遇到`ERROR orm.ClassWriter: Cannot resolve SQL type 1111`了一个 INET 字段和一个 ENUM。

# c - SO_REUSEPORT 选项在 Linux 上是否适用于多播套接字？

> ID：12708192
> 
> 赞同：2
> 
> 时间：2012-10-03T12:09:07.483
> 
> 标签：c, network-programming

我为多播套接字设置了套接字选项 SO_REUSEPORT，但我得到了 errno 92“协议不可用”。顺便说一句，我在 socket.h 文件“/usr/include/asm-generic/socket.h”上定义了 SO_REUSEPORT。

# macos - 我试图告诉 Finder 使用 AppleScript 移动文件。但我不知道如何处理重复/替换/跳过

> ID：12708195
> 
> 赞同：2
> 
> 时间：2012-10-03T12:09:55.487
> 
> 标签：macos, applescript, move, finder, file-management

脚本如下：

```
tell application "Finder"

    set destinFolder to (choose folder)

    try
        move selection to destinFolder
    on error vMessage number -15267
        display dialog "" & vMessage
    end try

end tell 
```

基本上，如果目标文件夹中已经存在同名文件，我希望用户可以选择复制、替换或跳过该文件并**使用 AppleScript**继续下一个文件移动。就像下面的图片一样。

![在此处输入图像描述](../Images/2ba856414aabcf645409c25626fd1563.png)

**更新：**我知道如何像上面那样显示一个对话框，问题是我不知道如何在 AppleScript 中实现“复制、替换或跳过”逻辑。此外，我想保留这条线：

```
move selection to destinFolder 
```

因为这行代码在单个对话框中显示了正确的移动进度百分比，所以使用`repeat`将失去该好处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:05:45.800

你可以尝试这样的事情：

```
set destinFolder to (choose folder)
set destItems to every paragraph of (do shell script "ls " & quoted form of (POSIX path of destinFolder))

tell application "Finder"
    set mySelection to selection
    repeat with anItem in mySelection
        set itemName to anItem's name
        if itemName is in destItems then
            display alert "An item named " & itemName & " already exists in this location. Do you want to replace it with the one you're moving?" buttons {"Skip", "Replace"} default button "Replace"
            if button returned of the result = "Replace" then move anItem to destinFolder with replacing
        else
            try
                move anItem to destinFolder
            end try
        end if
    end repeat
end tell 
```

或这个：

```
 set destinFolder to (choose folder)

tell application "Finder"
    set mySelection to selection
    repeat with anItem in mySelection

        try
            move anItem to destinFolder
        on error errMsg number errNum
            if errNum = -15267 then
                display alert "An item named " & itemName & " already exists in this location. Do you want to replace it with the one you're moving?" buttons {"Skip", "Replace"} default button "Replace"
                if button returned of the result = "Replace" then move anItem to destinFolder with replacing
            else
                tell me
                    activate
                    display alert errMsg & return & return & "Error number" & errNum buttons "Cancel"
                end tell
            end if
        end try

    end repeat
end tell 
```

编辑此脚本不会让您选择目标文件夹中存在的每个项目

```
set destinFolder to (choose folder)

tell application "Finder"
    set mySelection to selection
    try
        move mySelection to destinFolder
    on error errMsg number errNum
        if errNum = -15267 then
            display alert "One or more items already exist in this location. Do you want to replace them with the ones you're moving?" buttons {"Skip", "Replace"} default button "Replace"
            if button returned of the result = "Replace" then move mySelection to destinFolder with replacing
        else
            tell me
                activate
                display alert errMsg & return & return & "Error number" & errNum buttons "Cancel"
            end tell
        end if
    end try

end tell 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:26:07.723

使用 applescript 显示查找器副本 UI 是不可能的。您应该实现自己的 UI。
你的脚本会显示这个。
![在此处输入图像描述](../Images/5c20bd0256ee1922d82aba8f99e2ecf5.png)

看看[Mac Finder 原生复制对话框](http://macscripter.net/viewtopic.php?id=28628)文章。

# android - 有什么方法可以在 android 设备上获取唯一的硬件 ID？

> ID：12708196
> 
> 赞同：2
> 
> 时间：2012-10-03T12:09:56.640
> 
> 标签：android, hardware-id

现在我的算法只基于 IMEI。这就是问题所在：某些设备没有无线电模块，因此它们也没有 IMEI 我需要唯一的参数（CPU ID、闪存 ID、MAC 等）来生成 ID，而不使用 IMEI。以及如何使用 Java 获取它们。最好不要root 谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T12:19:01.537

用于`Build.SERIAL`获取安卓设备的唯一序列号。这将返回一个字符串值。在模拟器中，此代码可能会返回字符串“未知”。但是用设备试试。真的行... ：）

```
String id=Build.SERIAL; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T12:15:51.163

ANDROID_ID

更具体地说，Settings.Secure.ANDROID_ID。这是设备首次启动时生成和存储的 64 位数量。擦除设备时会重置。

ANDROID_ID 似乎是唯一设备标识符的不错选择。有缺点：首先，它在 2.2 之前的 Android 版本（“Froyo”）上不是 100% 可靠的。此外，在主要制造商的流行手机中至少存在一个被广泛观察的错误，其中每个实例都具有相同的 ANDROID_ID。

[这可以帮助你](http://android-developers.blogspot.com/2011/03/identifying-app-installations.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-16T06:06:38.507

您可以使用`android.os.Build.getSerial()`而不是`android.os.Build.SERIAL`

> `android.os.Build.SERIAL`--> 此字段在 API 级别 O 中已弃用。请改用 getSerial()。来源： [https ://developer.android.com/reference/android/os/Build.html](https://developer.android.com/reference/android/os/Build.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T12:52:32.313

您可以使用内置的 Setting.secure 来获取设备 ID。在您重置出厂设置之前，此设备 ID 是固定的。

```
 Settings.Secure.getString(getContentResolver(),Settings.Secure.ANDROID_ID); 
```

这是您设备的唯一 ID，在您重置为出厂设置之前它是稳定的。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-03T12:13:12.787

下面的代码可以帮助您获取设备 ID

```
 String ts = Context.TELEPHONY_SERVICE;
    TelephonyManager mTelephonyMgr = (TelephonyManager) getSystemService(ts);
    String imsi = mTelephonyMgr.getSubscriberId();
    String imei = mTelephonyMgr.getDeviceId(); 
```

# ios - PresentingViewController 被设置为 nil

> ID：12708197
> 
> 赞同：0
> 
> 时间：2012-10-03T12:10:03.597
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller, modal-dialog

我有三个视图控制器，a、b 和 c。我从a开始，呈现b。如果用户已注销，则显示 c。否则我留在 b 上，下面的代码片段来自哪里。如果我只从 a 转到 b，`presentingViewController`则设置为 a，一切都很好。如果出现 c，一旦我关闭 c，`presentingViewController`就会返回`nil`并且我被困在 b 上。

```
UIViewController* parent = self.navigationController.presentingViewController;
self.navigationController.viewControllers = @[[[UIViewController alloc] init]];
[parent dismissModalViewControllerAnimated: NO];
[parent presentModalViewController: self animated: NO];
[parent dismissModalViewControllerAnimated: YES]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:39:28.467

Solved by sending a reference of a to b and using that as the parent :)

# doxygen - 在 doxygen 中包含 MS-Word 文档

> ID：12708198
> 
> 赞同：0
> 
> 时间：2012-10-03T12:10:10.947
> 
> 标签：doxygen

除了文档化的 C 源代码之外，我还想在 Doxygen 生成的 HTML 文档中包含一个关于软件架构的 MS-Word 文档。

我怎样才能做到这一点？有没有办法将 MS-Wordfile *.docx 转换为 Doxygenfile *.dox？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:16:57.513

您可以使用链接到文档

```
<a href="your_doc.docx">link name</a> 
```

在评论区。

另一种方法是将其转换为（足够简单的）HTML 文件，以便 doxygen 可以解析它，但是您可能会丢失很多文档的标记和布局。

# logging - NLog 框架 FileName 特定文件夹的路径

> ID：12708203
> 
> 赞同：0
> 
> 时间：2012-10-03T12:10:27.047
> 
> 标签：logging, frameworks, nlog

嗨团队，我正在使用 NLog 框架进行日志记录，并在某一时刻被击中，即我发现 NLog 配置只允许将日志文件存储到存储 NLog 的应用程序文件夹中，后跟指定如下的文件夹名称。

那么我的应用程序要求是它应该是一个特定的文件夹，同时它应该是可配置的。有没有办法我可以通过某种方式设置 fileName="C:\Myfolder\Log\log.txt"。对此的任何指示\建议都会有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T06:24:36.453

好吧，我只需将 fileName="c:\Logs\Trace-MyDB-Log Start Date ${shortdate:format=s}.txt" 放在配置中即可找到解决方案。

想知道是否有检测驱动器的证明，因为它并不总是安装在 c:\ 驱动器上。

# asp.net - 局部视图中的javascript mvc 3

> ID：12708205
> 
> 赞同：0
> 
> 时间：2012-10-03T12:10:29.933
> 
> 标签：asp.net, ajax, asp.net-mvc-3

我有名为 MyPView 的部分视图包含一个 javascript

```
function loadMe(){
alert('Done');
} 
```

和一个 _layout 与

```
ajax.ActionLink("MyTrouble","Controller","MyPView",
                 new ajaxOption{ OnSuccess="loadMe"}) 
```

. 我想在部分加载时运行 loadMe 函数，但它没有。

我知道我可以将 loadMe 函数放在 _layout 中，但我不想这样做，还有其他方法可以运行该函数吗？

谢谢大家，特别是回答这个问题的你。;)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:58:41.160

**使用 jQuery**，将以下 JavaScript 代码放在局部视图中：

```
$(function(){
  alert('Done');
}); 
```

或者

```
$(function(){
  loadMe();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T19:57:43.507

```
<script type="text/javascript">
$(document).ready(function () {
    alert('test');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T14:15:57.140

您可以使用`$(document).ready(loadMe)`局部视图来实现目标。加载完整文档后，它将执行您的 loadMe 函数。

# hybris - Hybris Impex 文件中列组合的唯一值

> ID：12708207
> 
> 赞同：6
> 
> 时间：2012-10-03T12:10:33.910
> 
> 标签：hybris, impex

我正在创建一个 Hybris impex 文件以导入我的数据库。

我想对文件中的数据执行 INSERT_UPDATE 操作，所以我需要告诉 Hybris 哪些列需要是唯一的，以便它知道何时更新记录而不是插入记录。

我知道要告诉 Hybris 某个列需要是唯一的，我可以将唯一属性添加到该列，如下所示：

```
INSERT_UPDATE SLEmployee;Firstname[unique=true, required=true];Lastname[required=true];Function; 
```

但是在我上面的例子中，我如何告诉 Hybris Firstname + Lastname 列的组合必须是唯一的？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-17T05:13:41.903

```
> how do I tell Hybris that the combination of the 
> columns Firstname + Lastname must be unique? 
```

将`unique`关键字添加到作为组合键一部分的每个字段

```
 INSERT_UPDATE SLEmployee;Firstname[unique=true];Lastname[unique=true];Function; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-22T17:04:57.373

在 itemtype 中创建属性时，请确保将要考虑组合的所有属性的唯一修饰符设置为 true。相应地准备数据。

# jquery - 如何更改 jquery html 内容？

> ID：12708208
> 
> 赞同：0
> 
> 时间：2012-10-03T12:10:34.050
> 
> 标签：jquery, html, css

我正在尝试隐藏 Flash 图表并将相同的图表显示为图像。在我导出之前，我试图隐藏 swf div 标签并显示 img div。这就是我在做什么？

img div 的 HTML：

```
echo '<div class="pdfimgchart">';
echo '<img src=report.jpg height="400" width="940" style="display: none;"/>';
echo '</div>' 
```

jQuery：

```
$('.pdfswfchart').hide();
$('.pdfimgchart').show();

var head = '<!DOCTYPE html><html lang="en"><head>' + $('head').html() + '</head>';
var html = '<body>' + $('body').html() + '</body></html>';

var content = head + html; 
```

当我查看内容时，我仍然看到我的 swf 图表，并且不显示 img 图表。我需要从字面上修改 HTML 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:12:53.193

看起来您需要告诉 pdfimgchart 中的图像显示；

```
$('.pdfimgchart img').show(); 
```

# c# - SharePoint 365 与本地版本不同

> ID：12708218
> 
> 赞同：1
> 
> 时间：2012-10-03T12:11:05.797
> 
> 标签：c#, office365

下面的代码尝试从共享点获取（下载）文件。如果我在我的本地版本上尝试这个，它就像一个魅力。我可以选择文档库中的所有项目。

我尝试了几种方法，如果您愿意，我可以在这里发布其中的一些。我可以下载损坏的文件，但即使链接错误。如果我在 Office 365 中的 TeamSite 上尝试此操作，我会收到链接错误的异常。但我指的是同一个站点（而不是 localhost/dev/ 我指的是[http://mysite.com/TeamSite/dev/](http://mysite.com/TeamSite/dev/)）。知道有什么区别吗？Microsoft 是否阻止某些内容，因此不允许外部连接？

```
 private void btnDownload_Click(object sender, EventArgs e)
    {
        if (comboBox1.Items.Count > 0 && comboBox1.SelectedIndex != -1)
        {
            SaveFileDialog dialog = new SaveFileDialog();
            dialog.ShowDialog();

            using (SPSite site = new SPSite("http://localhost/dev/"))
            {
                using (SPWeb web = site.OpenWeb())
                {
                    SPFolder myLibrary = web.Folders["Management"];

                    foreach (SPFile file in myLibrary.Files)
                    {
                        if (file.Name == comboBox1.SelectedItem.ToString())
                        {
                            byte[] bytes = file.OpenBinary();

                            try
                            {
                                FileStream fs = new FileStream(dialog.FileName, FileMode.Create, FileAccess.ReadWrite);
                                BinaryWriter bw = new BinaryWriter(fs);
                                bw.Write(bytes);
                                bw.Close();
                                MessageBox.Show("File downloaded to: " + dialog.FileName);
                            }
                            catch (Exception ex)
                            {
                                MessageBox.Show(ex.Message);
                            }

                        }                            
                    }
                }
            }
        }
        else
        {
            MessageBox.Show("Select file to download");
        }
    } 
```

这是异常消息：

```
The Web application at http://www.gtest.nl/TeamSite/ could not be found. Verify that you have typed the URL correctly. If the URL should be serving existing content, the system administrator may need to add a new request URL mapping to the intended application. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:18:04.953

您无法连接到共享点站点，像这样部署在另一台计算机上。您应该使用[客户端上下文](http://msdn.microsoft.com/en-us/library/ee536158.aspx)

例如：

```
 string siteUrl = "http://MyServer/sites/MySiteCollection";

    ClientContext clientContext = new ClientContext(siteUrl);
    Web oWebsite = clientContext.Web;
    ListCollection collList = oWebsite.Lists;

    clientContext.Load(collList);

    clientContext.ExecuteQuery();

    foreach (SP.List oList in collList)
    {
        Console.WriteLine("Title: {0} Created: {1}", oList.Title, oList.Created.ToString());
    } 
```

[您可以在此处](http://msdn.microsoft.com/en-us/library/ee537013.aspx)找到有关客户端上下文的更多示例

已经有一个通过clientContext从sharepoint下载文件的[例子](https://stackoverflow.com/questions/10024524/sharepoint-2010-client-object-model-with-camlquery-file-download-but-no-conten)。

# java - java覆盖 - 字段不可见

> ID：12708219
> 
> 赞同：1
> 
> 时间：2012-10-03T12:11:05.843
> 
> 标签：java, overriding

我有一个需要修改的 java 公共类（只有一种方法）。该类在一个包中，所以我正在编写一个扩展第一个类并覆盖我需要更改的方法的新类。

A类是

```
public class A {
    GL gl;
    GLU glu;
    PGraphicsOpenGL pgrap;
    //other fields

    //constructor

    public void method() {
        this.gl = pgrap.gl;
        this.glu = pgrap.glu;
        //something else I don't want in class B
    }
} 
```

B类是这样的

```
public class B extends A {

    //constructor that recalls super()

    public void method() {
        super.gl = pgrap.gl;
        super.glu = pgrap.glu;
    }
} 
```

但我得到一个错误`super.gl = pgrap.gl`：`The field A.gl is not visible`。我的包里没有写getter方法，怎么办？

谢谢。

注意：我无法重新编译包或将 B 类添加到包中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T12:13:58.397

默认访问说明符是`package-private`指同一包中的类`A`可以使用以下实例访问此变量`A`

```
A a = ....
a.gl = ...; // this works. 
```

和`package-private`成员（和`private`成员）不被继承，只有`protected`和`public`成员是。

由于`A#method()`已经在执行分配操作，因此您调用`super.method()`以`B#method()`获得所需的行为。或者您应该将它们标记为`protected`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T12:16:33.737

[控制对类成员的访问](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)

`A.gl`并且`A.glu`是包私有的（没有显式修饰符）。您能够访问它们的唯一方法是如果 B 类与 A 类在同一个包中。

如果它们受到保护，您就可以随意访问它们：

> protected 修饰符指定该成员只能在其自己的包中访问（与 package-private 一样），此外，它的类在另一个包中的子类也可以访问。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T12:14:19.790

字段`gl`并`glu`具有包访问权限。使用`protected`访问修饰符使它们在子类中可访问。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T12:15:35.703

将变量定义为`protected.`

```
protected int gl;
protected int glu; 
```

因为您的变量具有默认访问权限，您将能够在同一包中访问它们。因此，您需要移动 B 或将它们定义为`protected`以便子类可以访问它们。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-03T12:17:49.530

假设您不能`B`在同一个类包中声明您的类`A`并且您不能直接修改类`A`，那么唯一的选择就是通过反射：

```
public void method() {
  Field[] fields = this.getClass().getSuperClass().getDeclaredFields();

  for (Field field : fields) {
    if (field.getName().equals("gl")) {
      field.setAccessible(true);
      field.set(this, pgrap.gl);
    }
  }
} 
```

# c# - 按不同的整数列表分组

> ID：12708226
> 
> 赞同：2
> 
> 时间：2012-10-03T12:11:35.997
> 
> 标签：c#, linq

```
MyObject()
{
     String dept;
     List<int> id;
     Object obj;
} 
```

使用`LINQ`，我如何返回按如下方式组织的上述对象的列表：

按 [ 部门和 EQUAL id 列表 ] 对所有 obj 对象进行分组。如果列表包含相同的数字，则认为列表相等，不一定是相同的顺序（一组）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T12:15:35.313

`GroupBy`有一个接受自定义的[重载](http://msdn.microsoft.com/en-us/library/bb534334.aspx)`IEqualityComparer<MyObject>`。`dept`写一个当两个对象相等且集合相等时认为两个对象`id`相等，并将其作为参数传递。

实现集合相等的一种方便方法是编写

```
new HashSet(x.id).SetEquals(new HashSet(y.id)) 
```

虽然这最终会效率低下，如果有很多比较可能不是最好的主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T15:09:42.380

根据[Jon 的回答](https://stackoverflow.com/a/12708285/480799)，如果效率是一个问题，您可以将`HashSet`每个对象的 存储在匿名对象中：

```
myObjects.Select(x => new { myObject = x, hashSet = new HashSet(x.id) })
         .GroupBy(x => x.hashSet, HashSet<int>.CreateSetComparer())
         .SelectMany(x => x.GroupBy(y => y.myObject.dept)) 
```

如果您只想执行一个`GroupBy`，您可以将其存储`HashSet`在一个`Tuple`或自定义类中，但是您必须创建自己的`IEqualityComparer`.

# java - Jersey REST 服务输出格式

> ID：12708235
> 
> 赞同：2
> 
> 时间：2012-10-03T12:11:59.323
> 
> 标签：java, web-services, jersey

我需要根据以下场景使用 Jersey 格式化一个 restful 服务的输出（xml）

我有一个带有键值对的类，如下所示。

```
@XmlRootElement(name="columnValues")
public class KeyValueDTO {
    private String key;
    private String val;

    @XmlElement(name="column")
    public String getKey() {
        return key;
    }

    @XmlElement(name="value")
    public String getVal() {
        return val;
    }
} 
```

假设我有这样的列表，由休息服务返回：

```
List<KeyValueDTO> mylist = new ArrayList<KeyValueDTO>();
KeyValueDTO dto1 = new KeyValueDTO();
dto1.key = "Name";
dto1.val = "alex";

KeyValueDTO dto2 = new KeyValueDTO();
dto2.key = "Age";
dto2.val = 23

mylist.add(dto1);
mylist.add(dt02); 
```

我想生成如下输出

```
<Name>alex</Name>
<Age>20</Age> 
```

但目前它正在给出以下输出

```
<column>Name</column>
<value>alex</column>
<column>Age</column>
<value>20</column> 
```

谁能让我知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T20:26:17.597

您可以尝试使用 XmlAdapter：

```
public class KeyValueAdapter extends XmlAdapter<String, List<KeyValueDTO>> {

  @Override
  public List<KeyValueDTO> unmarshal(String v) throws Exception {
    // Needs implementation
    return null;
  }

  @Override
  public String marshal(List<KeyValueDTO> vs) throws Exception {
    StringBuffer buffer = new StringBuffer();
    for (KeyValueDTO v: vs) {
      buffer.append(String.format("<%s>%s</%1$s>", v.key, v.val));
    }
    return buffer.toString();
  }

} 
```

然后将该适配器添加到您的 bean：

```
@XmlRootElement
public static class Wrapper {
  @XmlJavaTypeAdapter(KeyValueAdapter.class)
  List<KeyValueDTO> dtos;
} 
```

# opencv - 在不同的目录中安装 opencv 2.2

> ID：12708240
> 
> 赞同：0
> 
> 时间：2012-10-03T12:12:33.193
> 
> 标签：opencv

我已经在我的 ubuntu 12.04 lts 系统上安装了 opencv 2.4.2。但是现在我有这样的情况，我也应该安装 opencv 2.2.0。我想保留opencv 2.4.2。是否可以？

原因：我应该使用 econ ECAM32 usb 网络摄像头使用 opencv 程序拍摄图像，但 opencv 2.4.2 不支持此摄像头。但是opencv 2.2 支持这个cam。

我想听听我们如何在系统上的任何其他目录中安装 opencv 2.2，我更喜欢主目录中的文件夹，这样安装不会损坏 opencv 2.4.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:05:12.743

我不明白为什么不。`ubuntu 12.04`在`opencv 2.3`它的存储库中，因此我假设您已经从源代码安装。当你编译源代码时，你应该`./configure --help`首先检查它可能会给你一个安装目录的选项。它通常看起来像：

```
./configure --prefix=$HOME/opencv2.2 
```

让我知道你是如何进行的..

# jquery - jQuery fullCalendar 在父元素之上显示事件

> ID：12708245
> 
> 赞同：-1
> 
> 时间：2012-10-03T12:13:06.780
> 
> 标签：jquery, css, fullcalendar

这是关于[fullCalendar](http://arshaw.com/fullcalendar)的问题。

我要做的是显示日历边缘覆盖的事件部分。这是一张图片，可以帮助您更容易理解。![](../Images/64be30e3d1c35b7da50027218bebfb69.png)
我试图让事件的一部分（由虚线表示）显示在日历边缘的顶部。

修改事件的 z 索引没有帮助。有谁知道我怎么能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T06:23:12.980

我用不同的方式提出了另一个线程来问同样的问题。有人在以下位置为我回答了这个问题：[Full Calendar CSS - 在日历画布之外显示事件](https://stackoverflow.com/questions/12765935/full-calendar-css-displaying-events-outside-the-calendar-canvas/12765948#12765948)

# java - 在 Java 中将网页响应解析为 Json

> ID：12708247
> 
> 赞同：0
> 
> 时间：2012-10-03T12:13:07.277
> 
> 标签：java, json

我有一个java代码：

```
URL oracle = new URL("https://x.x.x.x.x.x.-001");
System.out.println(oracle.openStream());
BufferedReader in = new BufferedReader(new InputStreamReader(oracle.openStream()));

String inputLine;
while ((inputLine = in.readLine()) != null)
        System.out.println(inputLine); 
```

这是打开连接并打印它的内容。内容确实是Json。输出类似于：

```
{
  "merchantId": "guest",
  "txnId": "guest-1349269250-001",
} 
```

我希望在[json](http://code.google.com/p/json-simple/) simple jar 中解析它。我改变了这样的代码循环：

```
JSONObject obj = new JSONObject();
while ((inputLine = in.readLine()) != null)
        obj.put("Result",inputLine); 
```

但这似乎不起作用。我得到的输出是：

```
{"Result":"}"} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T12:47:54.327

您应该使用[`JSONParser#Parse()`](http://alex-public-doc.s3.amazonaws.com/json_simple-1.1/org/json/simple/parser/JSONParser.html#parse%28java.io.Reader%29)方法或[`JSONValue#parse()`](http://alex-public-doc.s3.amazonaws.com/json_simple-1.1/org/json/simple/JSONValue.html#parse%28java.io.Reader%29)方法：

```
URL oracle = new URL("https://x.x.x.x.x.x.-001");
System.out.println(oracle.openStream());
Reader in = new InputStreamReader(oracle.openStream());

Object json = JSONValue.parse(in); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T12:36:28.987

您确定您正在关注有关如何解析 JSON 字符串[的文档吗？](http://code.google.com/p/json-simple/wiki/DecodingExamples)

从外观上看，您必须获取整个字符串并`JSONParse#parse()`对其调用 a ，但是您的代码正在用 JSON 的每一行填充`HashMap`(`JSONObject`的父类)。事实上，它只存储最后一行，因为您在每次迭代时都`put()`使用相同的键进行调用。`"Result"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T12:35:30.120

您应该首先将整个内容读取到 String 变量并将其解析为 json。小心`""`（双引号）。Java`\"`用于双引号。像。

```
import java.io.BufferedReader;
import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import org.json.simple.JSONObject;
import org.json.simple.parser.JSONParser;
import org.json.simple.parser.ParseException;

public class JsonSimpleExample3 {

    public static void main(String args[]) {

        JSONParser parser = new JSONParser();
        //String str = "{\"merchantId\": \"guest\",\"txnId\": \"guest-1349269250-001\",}";

        //intilize an InputStream
        InputStream is = new ByteArrayInputStream("file content".getBytes());

        //read it with BufferedReader and create string
        BufferedReader br = new BufferedReader(new InputStreamReader(is));// Instead of is, you should use oracle.openStream()
        StringBuilder sb = new StringBuilder();

        String line;
        try {
            while ((line = br.readLine()) != null) {
                sb.append(line);
            }
        } catch (IOException e1) {
            e1.printStackTrace();
        } 

        // parse string
        try {
            JSONObject jsonObject = (JSONObject) parser.parse(sb.toString());

            String merchantId = (String) jsonObject.get("merchantId");
            System.out.println(merchantId);
            String txnId = (String) jsonObject.get("txnId");
            System.out.println(txnId);

        } catch (ParseException e) {

            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-04T19:32:19.263

如果您要登录或像 [Java Json 这样简单的工作人员，请尝试此链接它真的很有帮助](http://www.studytrails.com/java/json/java-json-simple.jsp)

```
import java.io.IOException;
import java.net.URL;

import org.apache.commons.io.IOUtils;
import org.json.simple.JSONArray;
import org.json.simple.JSONObject;
import org.json.simple.JSONValue;
import org.json.simple.parser.ParseException;

public class ParseJson1 {

public static void main(String[] args) {
    String url = "http://freemusicarchive.org/api/get/genres.json?api_key=60BLHNQCAOUFPIBZ&limit=2";
    /*
     * {"title":"Free Music Archive - Genres","message":"","errors":[],"total" : "161","total_pages":81,"page":1,"limit":"2",
     * "dataset":
     * [{"genre_id": "1","genre_parent_id":"38","genre_title":"Avant-Garde" ,"genre_handle": "Avant-Garde","genre_color":"#006666"},
     * {"genre_id":"2","genre_parent_id" :null,"genre_title":"International","genre_handle":"International","genre_color":"#CC3300"}]}
     */
    try {
        String genreJson = IOUtils.toString(new URL(url));
        JSONObject genreJsonObject = (JSONObject) JSONValue.parseWithException(genreJson);
        // get the title
        System.out.println(genreJsonObject.get("title"));
        // get the data
        JSONArray genreArray = (JSONArray) genreJsonObject.get("dataset");
        // get the first genre
        JSONObject firstGenre = (JSONObject) genreArray.get(0);
        System.out.println(firstGenre.get("genre_title"));
    } catch (IOException | ParseException e) {
        e.printStackTrace();
    }
} 
```

}

# iphone - 如何修复我的 iPhone 应用程序上的这些内存泄漏？

> ID：12708248
> 
> 赞同：1
> 
> 时间：2012-10-03T12:13:07.920
> 
> 标签：iphone, ios, xcode

如何修复这些内存泄漏？

泄漏对象 Malloc 80 字节 NSURL __NSCFString __NSCFString Malloc 32 字节 NSURL Malloc 16 字节 Malloc 96 字节 __NSCFArray Malloc< 不同大小>

所有泄漏对象的责任是 libdyld.dylib 响应框架是 dlopen

当我在 iPhone 模拟器上运行项目时，没有出现这样的问题。当我在 iPad 上运行这个项目时，出现了这个问题。

我正在使用 xCode4.4 和 ios 5.0 sdk。我的 iPad 在 iOS 5.1.1 上。

为什么会出现问题？如何解决这个问题呢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-09T13:47:12.563

我也有同样的问题。我知道从现在起两年后，但有些人可能会做我所做的事情。有一个较新版本的 libdyld.dylib，称为 libdyld.dylib.1.1.3。我删除了我的活动项目的引用并添加了新版本，并且不再泄漏！

# php - 通过地点添加事件返回 404 错误：

> ID：12708251
> 
> 赞同：2
> 
> 时间：2012-10-03T12:13:21.383
> 
> 标签：php, google-places-api

如果我有任何错误，请原谅我的术语，我是 Google API 的新手

我正在尝试通过 Places API 为单个场地添加事件（列在酒吧类别下）。我已按照此处的说明进行操作：

[https://developers.google.com/places/documentation/actions?utm_source=welovemapsdevelopers&utm_campaign=places-events-screencast#event_intro](https://developers.google.com/places/documentation/actions?utm_source=welovemapsdevelopers&utm_campaign=places-events-screencast#event_intro)

这是我发布到的 URL（通过 PHP）

[https://maps.googleapis.com/maps/api/place/event/add/format?sensor=false&key=AIzaSyAFd-ivmfNRDanJ40pWsgP1](https://maps.googleapis.com/maps/api/place/event/add/format?sensor=false&key=AIzaSyAFd-ivmfNRDanJ40pWsgP1)（密钥已更改）

返回 404 错误。如果我理解正确，我已将传感器设置为 false，因为我不是移动设备，并在 Google apis 中创建了一个 API 密钥，并打开了 PLACES 服务。

我是否错过了这里的关键步骤，或者 POST 提交中的后续错误会导致 404 错误？我可以粘贴我的代码，但我想我会从基础开始。

非常感谢您的帮助、建议和时间。非常感谢。

我已将此行添加到我认为应该指定 POST 的 CurlCall 函数中，结果仍然相同。

```
curl_setopt($ch, CURLOPT_POST, 1); 
```

所以整个函数读取

```
function CurlCall($url,$topost)
        {
            $ch = curl_init();
            curl_setopt($ch, CURLOPT_HTTPHEADERS, array('Content-Type: application/json'));
            curl_setopt($ch, CURLOPT_POST, 1);
            curl_setopt($ch, CURLOPT_URL, $url);
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
            curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);
            curl_setopt($ch, CURLOPT_VERBOSE, TRUE);

            curl_setopt($ch, CURLOPT_POSTFIELDS, $topost);
            $body = curl_exec($ch);
            curl_close($ch);
            echo $body;
            echo '<br>';
            echo 'URL ' . $url;
            echo '<br>';
            return $body;

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T02:16:31.610

您需要在 URL 中指定请求的格式，方法是将 word 格式更改为`json`或者`xml`取决于您将如何构建和`POST`请求。

XML:

[https://maps.googleapis.com/maps/api/place/event/add/xml?sensor=false&key=your_api_key](https://maps.googleapis.com/maps/api/place/event/add/xml?sensor=false&key=your_api_key)

JSON：

[https://maps.googleapis.com/maps/api/place/event/add/json?sensor=false&key=your_api_key](https://maps.googleapis.com/maps/api/place/event/add/json?sensor=false&key=your_api_key)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:20:43.070

您确定您使用的是 POST 方法而不是 GET 方法吗？

# webrtc - WebRTC 是如何工作的？

> ID：12708252
> 
> 赞同：70
> 
> 时间：2012-10-03T12:13:23.423
> 
> 标签：webrtc

我对浏览器中的点对点连接感兴趣。由于 WebRTC 似乎可以做到这一点，我想知道它是如何工作的。

我已经阅读了一些解释并查看了有关它的图表，现在我很清楚，连接建立在服务器上工作。服务器似乎在愿意相互连接的客户端之间交换一些数据，以便它们可以启动直接连接，即独立于服务器。

但这正是我不明白的。到目前为止，我认为创建连接的唯一方法是侦听计算机 A 上的端口并从计算机 B 连接到该端口。但在 WebRTC 中似乎并非如此。我认为没有一个客户端开始监听端口。不知何故，他们可以在不监听端口和接受连接的情况下创建连接。客户端 A 和客户端 B 都没有开始充当服务器。

但是怎么做？通过 WebRTC 服务器交换哪些数据，客户端可以使用这些数据相互连接？

感谢您对此的解释:)

**编辑**

我找到[了这篇](http://www.h-online.com/security/features/How-Skype-Co-get-round-firewalls-747197.html)文章。它与 WebRTC 无关，但我认为它回答了我的部分问题。我不确定，很难。如果有人可以向我解释并给我一些额外的链接，它仍然会很酷。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-10-03T22:18:55.257

WebRTC 将 SDP Offer 提供给客户端 JS 应用程序以发送（无论 JS 应用程序想要）到其他设备，后者使用它来生成 SDP Answer。

诀窍在于 SDP 包括 ICE 候选者（实际上是“尝试通过此 IP 地址和此端口与我交谈”）。ICE 可以在防火墙中打开端口；虽然如果双方都是对称 NAT，一般情况下是不可能的，并且可以使用替代候选者（在 TURN 服务器上）。

一旦他们直接交谈（或通过 TURN，这实际上是一个数据包镜像），他们就可以打开一个 DTLS 连接并使用它来加密 SRTP-DTLS 媒体流，并通过 DTLS 发送 DataChannel。

编辑：这里的首字母缩略词：[http](http://blog.1click.io/10-jargons-abbreviations-for-webrtc-fans/) ://blog.1click.io/10-jargons-abbreviations-for-webrtc-fans/其余的是谷歌。其中大部分是由 IETF ( [http://ietf.org/](http://ietf.org/) )定义的

编辑 2：Firefox 和 Chrome（以及规范）已经开始对 ICE 候选者使用“涓流”，因此 ICE 候选者通常在面后添加到 PeerConnection 并独立于初始 SDP 进行交换（尽管您可以等到最初的候选人在发送报价之前已经准备好，并将它们捆绑在一起）。见[https://webrtcglossary.com/trickle-ice/](https://webrtcglossary.com/trickle-ice/)和[https://datatracker.ietf.org/doc/draft-ietf-ice-trickle/](https://datatracker.ietf.org/doc/draft-ietf-ice-trickle/)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2018-11-14T05:00:25.547

# WebRTC 的工作原理

本文档对 WebRTC 进行了快速而抽象的介绍。要获得有关 WebRTC 的更多信息，请查看本文档末尾的进一步阅读部分。

## 网络RTC

WebRTC（Web Real-Time Communication）是为浏览器之间的点对点双工实时通信而开发的一组技术。顾名思义，它与 Web 兼容，并且是[W3C 中的标准](https://www.w3.org/TR/webrtc/)WebRTC 的一个重要特性是它甚至可以在 NAT 地址后面工作。

![WebRTC 点对点](../Images/1cbea35fffa93482921de7b3fc9d0f83.png)

WebRTC 使用多种技术在浏览器之间提供实时对等通信。这些技术是

*   [SDP（会话描述协议）](https://en.wikipedia.org/wiki/Session_Description_Protocol)
*   [ICE（交互连接建立）](https://en.wikipedia.org/wiki/Interactive_Connectivity_Establishment)
*   [RTP（实时协议）](https://en.wikipedia.org/wiki/Real-time_Transport_Protocol)

还有一件事是运行 WebRTC 需要**Signaling Server 。**但是，在实现信令服务器方面并没有明确的标准。每个实现都创建自己的样式。本节稍后将提供有关 Signaling Server 的更多信息。

让我们快速了解一下上述技术。

### SDP（会话描述协议）

SDP 是一个简单的协议，它用于浏览器支持的编解码器。例如，假设有两个对等点（*客户端 A*和*客户端 B*）将通过 WebRTC 连接。*客户端 A*和*客户端 B*创建定义它们支持的编解码器的 SDP 字符串。例如，*客户端 A*可能支持视频的 H264、VP8 和 VP9 编解码器，音频的 Opus 和 PCM 编解码器。*客户端 B*可能仅支持视频的 H264 和音频的仅 Opus 编解码器。*对于这种情况，客户端 A*和*客户端 B*之间将使用的编解码器是 H264 和 Opus。如果对等体之间没有通用编解码器，则无法建立对等通信。

您可能对这些 SDP 字符串如何在彼此之间发送有疑问。这是 Signaling Server 发生的地方。

### ICE（交互连接建立）

ICE 是在对等点之间建立连接的魔法，即使它们位于 NAT 之后。让我们再次假设*客户端 A*和*客户端 B*将连接起来，并看看 ICE 是如何用于此的。

*   *客户端 A*通过 STUN 服务器找出他们的本地地址和公共 Internet 地址，并通过信令服务器将这些地址发送给*客户端 B。*从 STUN 服务器接收到的每个地址称为*ICE 候选*

    ![](../Images/24cac44fd6ba868c065424a7d87e0a34.png)

在上图中，有两台服务器。其中一个是 STUN，另一个是 TURN 服务器。

STUN 服务器用于让*客户端 A*了解其所有地址。举个例子，我们的电脑一般在 192.168.0.0 网络中有一个本地地址，我们连接到[www.whatismyip.com](http://www.whatismyip.com)时看到的还有第二个地址，这个IP地址实际上是我们的公共IP地址互联网网关（调制解调器、路由器等）所以让我们定义 STUN 服务器；STUN 服务器让对等方知道他们的公共和本地 IP 地址。顺便说一句，谷歌提供免费的 STUN 服务器（stun.l.google.com:19302）。

图中还有一个服务器，TURN Server。当对等点之间无法建立对等连接时，使用 TURN Server。TURN 服务器只是在对等点之间中继数据。

*   *客户端 B*也这样做，从 STUN 服务器获取本地和公共 IP 地址，并通过信令服务器将这些地址发送给*客户端 A。*

*   *客户端 A* 接收*客户端 B*的地址并通过发送特殊 ping 来尝试每个 IP 地址，以便创建与*客户端 B*的连接。如果*客户端 A*接收到来自任何 IP 地址的响应，它将将该地址连同其响应时间和其他性能凭据一起放入一个列表中。最后*客户端A*根据其性能选择最佳地址。

*   *客户端 B*执行相同操作以连接到*客户端 A*

### RTP（实时协议）

RTP 是一种成熟的传输实时数据的协议。它基于UDP。音频和视频在 WebRTC 中使用 RTP 传输。RTP 有一个姊妹协议，名为 RTCP（实时控制协议），它在 RTP 通信中提供 QoS。RTP 也用于 RTSP（实时流协议）

### 信令服务器

最后一部分是未在 WebRTC 中定义的信令服务器。如上所述，Signaling Server 用于在*Client A*和*Client B*之间发送 SDP 字符串和 ICE Candidates 。信令服务器还决定哪些对等方相互连接。WebSocket 技术一般用于 Signaling Server 进行通信。

![](../Images/4a27f86827ad5979df9dcb5007c488d6.png)

## 兼容性

在过去的一年里，包括 Safari、Edge 在内的所有浏览器都发布了支持 WebRTC 的新版本。Chrome、Firefox 和 Opera 已经支持 WebRTC 有一段时间了。浏览器常用的视频编解码器是 H264。对于音频，Opus 在浏览器中很常见。PCM 也可用于音频编解码器，但由于许可问题，即使所有浏览器都支持 AAC，也不使用 AAC。IP 摄像机通常支持 H264 视频编解码器和 PCM 或 AAC 音频编解码器。

## 进一步阅读和参考

*   [WebRTC 示例](https://webrtc.github.io/samples/)
*   [冰维基百科](https://en.wikipedia.org/wiki/Interactive_Connectivity_Establishment)
*   [社会民主党](https://en.wikipedia.org/wiki/Session_Description_Protocol)
*   [RTP RFC](https://www.rfc-editor.org/rfc/rfc3551)
*   [WebRTC 入门](https://www.html5rocks.com/en/tutorials/webrtc/basics/)
*   [WebRTC.org](http://webrtc.org)
*   [STUN 服务器](https://en.wikipedia.org/wiki/STUN)
*   [RTSP 维基百科](https://en.wikipedia.org/wiki/Real_Time_Streaming_Protocol)

顺便说一句，我是[Ant Media Server](https://antmedia.io)的开发人员，它支持可扩展的一对多 WebRTC 和对等 WebRTC 连接

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2017-06-08T10:57:54.227

建立 p2p WebRTC 连接有 3 个步骤（10.000 英尺概览）：

1.  第 1 步：**信令**：双方都连接到信令服务器（使用 80/443 上的 websockets、comet、SIP 等）并交换信息（关于他们的媒体功能、公共 IP：可用时的端口对等）

2.  第 2 步：**发现**：连接到 LAN 或移动网络的设备不知道可以访问它们的公共 IP（和端口），因此它们使用位于公共 Internet 上的 STUN/TURN 服务器来发现它们的 ip:port 对（ICE候选人）。在此过程中，他们在步骤 3 中使用的 NAT/路由器上打了一个洞：

3.  第 3 步：**P2P 连接**：一旦通过初始信令通道交换 ICE 候选者，每个对等点都知道彼此的 ip:port（并且在 NAT/路由器上打了孔），因此可以建立对等 UDP 连接。

[![在此处输入图像描述](../Images/8df2d74927e4fdc0795b79480b94e348.png)](https://i.stack.imgur.com/HoYqJ.png)

上面的方案解释了 2 台设备连接到本地网络的过程。这是我写的一篇文章的一部分，它[处理连接问题的故障排除](https://addpipe.com/blog/troubleshooting-webrtc-connection-issues/)，但它很好地解释了 WebRTC 的工作原理。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-06-13T14:22:38.950

**在这本书“高性能浏览器网络（O'Reilly）”** [http://chimera.labs.oreilly.com/books/1230000000545/ch03.html#STUN_TURN_ICE](http://chimera.labs.oreilly.com/books/1230000000545/ch03.html#STUN_TURN_ICE)中可以找到一个很好的解释 ，它提供了 WebRTC 如何使用的基础知识冰技术。

[![在此处输入图像描述](../Images/a051e4ac7895d9d566d6f86f0660cc10.png)](https://i.stack.imgur.com/WN8Wz.png)

特别是假设 STUN 服务器的 IP 地址已知，WebRTC 应用程序首先向 STUN 服务器发送绑定请求。STUN 服务器回复一个响应，其中包含从公共网络看到的客户端的公共 IP 地址和端口。

现在应用程序发现了它的公共 IP 和端口元组，这些元组可以通过 SDP 发送给其他对等方。（请注意，SDP 是通过外部信号通道发送的，通过网络服务建立的网络套接字）

有了这个机制，每当两个对等方想要通过 UDP 相互通信时，他们就可以使用已建立的公共 IP 和端口元组来交换数据。

不幸的是，在某些情况下，UDP 可能会被防火墙阻止。为了解决这个问题，每当 STUN 失败时，我们可以使用 Traversal Using Relays around NAT (TURN) 协议作为备用协议，该协议可以在 UDP 上运行并在其他所有方法都失败时切换到 TCP。

# python - 有没有办法用 Python 在 3D 中绘制图元？

> ID：12708253
> 
> 赞同：22
> 
> 时间：2012-10-03T12:13:33.427
> 
> 标签：python, 3d, python-2.7, kde

我想在 3D 图中绘制 3D 基元，如球体、圆柱体和平面（补丁），并且我希望能够交互式地旋转、平移和缩放场景。我想在 Python 中做到这一点。我习惯将 Matplotlib 用于 2d 图形，但我从未使用 Python 处理 3D 图形。

有什么建议么？有教程链接吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-03T12:41:02.290

如果您习惯使用 matplotlib，那么如果[mplot3d](http://matplotlib.org/mpl_toolkits/mplot3d/)满足您的要求，它可能是一个不错的选择。

或者有[VPython](http://www.vpython.org/)。这使您可以更自由地创建和操作任意对象，但当然还有更多需要学习的东西。

# javascript - jQuery 加载不同质量级别的图像

> ID：12708256
> 
> 赞同：0
> 
> 时间：2012-10-03T12:13:44.537
> 
> 标签：javascript, jquery

我在网站上显示了大量图像。

我有不同质量级别的每张图像。我有拇指（~10kb）、小（~200kb）、中（~1.2mb）和大（~2.5mb）。我想要的是显示拇指图像，然后让javascript加载小的并在加载时替换它，然后加载介质并替换它等等。这样一来，图像会立即弹出，并且质量会越来越好。

图像显示为 div 的背景，大小设置为包含，因此它将拉伸较小的图像以填充空间。

我只需要一些 jQuery 来加载图像并在加载时替换背景。

**更新**

这就是我解决它的方法。我创建了隐藏的 img 元素，它加载每个图像，然后在完成后显示。但我不会拒绝一些帮助清理它的人。

html只是

```
<img id="image_loader" style="display:none;" /> 
```

jQuery是

```
$("#image_loader").attr("src", SmallURL);
$("#image_loader").load(function() {

    $("#image_container").css("background-image", 'url('+SmallURL+')');

    $("#image_loader").attr("src", MedURL);
    $("#image_loader").load(function() {

       $("#image_container").css("background-image", 'url('+MedURL+')');

       $("#image_loader").attr("src", LargeURL);
       $("#image_loader").load(function() {

           $("#image_container").css("background-image", 'url('+LargeURL+')');
           $("#image_loader").unbind('load');

       });
    });
}); 
```

但这非常混乱。我尝试将 URL 放在一个数组中并做一个`$.each`，但它只是跳到大。

**第二次更新**

我还发现，一旦加载了所有图像，我就需要取消绑定加载函数，否则它会陷入无限循环。希望如果可以清理它，它可以以一种不会引入任何无限循环的方式完成。

关于如何整理它的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:26:11.893

[JQuery API](http://api.jquery.com/load-event/)可能是一个很好的起点，如果您还没有检查过的话。

您正在尝试做的事情听起来像是您想要以每个质量级别加载多个图像，所以像......

```
<img src="image_low.jpg" class="low"/>
<img src="image_med.jpg" class="med" style="display:none;"/>
<img src="image_high.jpg" class="high" style="display:none;"/>

<script>
    $('.low').load(function() {
        $(this).attr("src", $('.med').attr('src'));
    });

    $('.med').load(function() {
        $(this).attr("src", $('.high').attr('src'));
    });
</script> 
```

编辑：我在这里进行了自己的尝试[，](http://jsfiddle.net/Z5JMQ/3/)[在这里](http://jsfiddle.net/YfQj7/4/)得到了改进

# mysql - SQL 效率 - MySQL 案例/子选择

> ID：12708281
> 
> 赞同：1
> 
> 时间：2012-10-03T12:15:28.387
> 
> 标签：mysql, sql

下面的代码运行时间太长。我知道这是代码：

```
case when (select (concat(alias,' - ',firm))
        from publiccontact where replace(replace(replace(replace(businessnumber,'+44 (','0'),') ',''),'+44','0'),')','') =  tax.callerid1 and businessnumber <> ''
            limit 1
            ) is not null then
            (select (concat(alias,' - ',firm))
        from publiccontact where replace(replace(replace(replace(businessnumber,'+44 (','0'),') ',''),'+44','0'),')','') =  tax.callerid1 and businessnumber <> ''
            limit 1
            ) else (select (concat(alias,' - ',firm))
        from publiccontact where replace(replace(replace(replace(mobilenumber,'+44 (','0'),') ',''),'+44','0'),')','') =  tax.callerid1 and mobilenumber <> ''
            limit 1
            )
    end as callername, 
```

我可以让我的案例和子选择更有效率吗？我的代码有效，但绝对没有效率。

```
select  date(instime) as date,
    Pkey as ID,
    subscriber as user,
    SUBSCRIBERNAME as userName,
    case when (select (concat(alias,' - ',firm))
        from publiccontact where replace(replace(replace(replace(businessnumber,'+44 (','0'),') ',''),'+44','0'),')','') =  tax.callerid1 and businessnumber <> ''
            limit 1
            ) is not null then
            (select (concat(alias,' - ',firm))
        from publiccontact where replace(replace(replace(replace(businessnumber,'+44 (','0'),') ',''),'+44','0'),')','') =  tax.callerid1 and businessnumber <> ''
            limit 1
            ) else (select (concat(alias,' - ',firm))
        from publiccontact where replace(replace(replace(replace(mobilenumber,'+44 (','0'),') ',''),'+44','0'),')','') =  tax.callerid1 and mobilenumber <> ''
            limit 1
            )
    end as callername,
    (select (concat(alias,' - ',firm))
        from publiccontact where replace(replace(replace(replace(businessnumber,'+44 (','0'),') ',''),'+44','0'),')','') =  tax.destinationnumber1 and businessnumber <> ''
            limit 1
            )
    as destinationname,
    case when direction = 1 then 'incoming' else 'outgoing' end as direction,
    case when CALLDESTINATION = 1 then 'public' else 'private' end as destination,
    startdate as StartDate,
    starttime as StartTime,
    duration as DuractionSec,
    TIMETOANSWER as TimeAnswerSec,
    TAXCHARGES as Charges,
    coalesce(callerid1,callerid2,'') as CallerID,
    coalesce(destinationnumber1,destinationnumber2,'') as DestinationNumber,
    ORIGINSUBSCRIBER as UserNumber,
    completed as CallCompleted,
    coalesce(case when concat(DIRECTION,CALLDESTINATION,CALLTYPE,CALLHANDLING) = 2123 then 'Incoming Call Transfered External' else null end,
    case when concat(DIRECTION,CALLDESTINATION,CALLTYPE,CALLHANDLING) = 1132 then 'Incoming Call Transfered External' else null end,
    case when concat(DIRECTION,CALLDESTINATION,CALLTYPE,CALLHANDLING) = 1131 then 'Incoming Call Transfered Interal' else null end,
    case when concat(DIRECTION,CALLDESTINATION,CALLTYPE,CALLHANDLING) = 1132 then 'Incoming Call Transfered Interal' else null end,
    case when concat(DIRECTION,CALLDESTINATION,CALLTYPE,CALLHANDLING) = 1233 then 'AMC Call Answered' else null end, 
    case when concat(DIRECTION,CALLDESTINATION,CALLTYPE,CALLHANDLING) = 2122 then 'Incoming DDI call answered by GSM' else null end,
    case when concat(DIRECTION,CALLDESTINATION,CALLTYPE,CALLHANDLING) = 1232 then 'AMCOutgoing' else null end,
    case when concat(DIRECTION,CALLDESTINATION,CALLTYPE,CALLHANDLING) = 2111 then 'OutgoingCallTransferedInternally' else null end,
    case when concat(DIRECTION,CALLDESTINATION,CALLTYPE,CALLHANDLING) = 2121 then 'OutgoingCallTransferedInternally' else null end,
    case when concat(DIRECTION,CALLDESTINATION,CALLTYPE,CALLHANDLING) = 2123 then 'OutgoingCallTransferedtoExternal' else null end,
    case when concat(DIRECTION,CALLDESTINATION,CALLTYPE,CALLHANDLING) = 1252 then 'IncomingCallPrivateNetworkCallShouldBeIgnored' else null end,
    case when concat(DIRECTION,CALLDESTINATION,CALLTYPE,CALLHANDLING) = 1143 then 'IncACDCallUnaws' else null end,
    case when concat(DIRECTION,CALLDESTINATION,CALLTYPE,CALLHANDLING) = 1142 then 'IncACDCallAnswered' else null end,'') as type

from taxticketitem tax; 
```

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:23:51.873

[MySQL 5.0 IFNULL](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_ifnull)

在第一个选择不为空的情况下，使用 IFNULL 表达式会删除一个额外的选择...

```
ifnull (
  (select (concat(alias,' - ',firm))
  from publiccontact where replace(replace(replace(replace(businessnumber,'+44 (','0'),') ',''),'+44','0'),')','') =  tax.callerid1 and businessnumber <> ''
  limit 1),   
  (select (concat(alias,' - ',firm))
  from publiccontact where replace(replace(replace(replace(mobilenumber,'+44 (','0'),') ',''),'+44','0'),')','') =  tax.callerid1 and mobilenumber <> ''
  limit 1)
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:30:33.637

我会为您的方向/呼叫目的地/呼叫类型/呼叫处理事物添加一个子查询。

```
select
   ...,
   CallDescription

from taxticketitem
    left join 
    (
       Select 2 as Direction, 1 as CallDestination, 2 as CallType, 3 as CallHandling, 'Incoming Call Transfered External' as CallDescription
       union 
       select 1,1,3,2, 'Incoming Call Transfered External'
       ...
    ) v
         on taxticketitem.Direction = v.Direction
         and taxticketitem.CallDestination = v.CallDestination
         and taxticketitem.CallType = v.CallType
         and taxticketitem.CallHandling = v.CallHandling 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T13:58:26.420

我的解决方案是，我不知道它是否真的带来了性能加...

使用 REGEX 进行搜索，并在检索到相应的数字后执行替换以显示。

另一方面，您可以备用一个替换并使用`LTRIM`instat。首先替换 '(' 然后 ')'，然后 '+44' 最后使用 LTRIM 来摆脱空间。

# prolog - 如何编写谓词 listtran(L, R)？

> ID：12708282
> 
> 赞同：1
> 
> 时间：2012-10-03T12:15:30.913
> 
> 标签：prolog

如何写一个谓词listtran(L, R)，
L是[0,1,2,3,4,5,6,7,8,9,10]，
R是[零，一，...，十]

例子：

```
?- listtran([0,4,5], L).  
L = [zero, four, five].  
?- listtran(L, [two, ten, two]).  
L = [2, 10, 2]. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:10:34.530

如果你只需要从 0 到 10，我肯定会开始构建一个将数字转换为文本名称的谓词：

```
num(0,zero).
num(1,one).
num(2,two).
num(3,three).
num(4,four).
num(5,five).
num(6,six).
num(7,seven).
num(8,eight).
num(9,nine).
num(10,ten). 
```

然后在 listtran 谓词中使用它们很容易：

```
listtran(IntLst,TxtLst) :-
    maplist(num,IntLst,TxtLst). 
```

要在没有辅助 maplist 谓词的情况下以更清晰的方式构建它，请尝试以下操作：

```
listtran([],[]). %base rule
listtran([Int|IntRest], [Txt|TxtRest]) :-
    num(Int,Txt),
    listtran(IntRest,TxtRest). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T12:31:57.317

形成一个配对域，`PairDom = [0-zero, 1-one, 2-two, ...]`并使用`member( X1-Y1, PairDom)`：

```
pair(A,B,A-B).

listtran(L,R):-
    maplist(pair,[0,1,2,3, ...,10],[zero,one, ...,ten],PairDom),
    maplist(pair,L,R, ...),
    maplist(member, ...). 
```

要了解这可能如何工作，请尝试：

```
?- PairDom=[0-zero, 1-one, 2-two], member(1-Y1,PairDom).
Y1 = one

?- PairDom=[0-zero, 1-one, 2-two], member(X1-three,PairDom).
No. 
```

# android - 如何为不同的值显示相同的 ListView？

> ID：12708284
> 
> 赞同：-5
> 
> 时间：2012-10-03T12:15:31.507
> 
> 标签：android, listview, android-intent, globalization

我有一个类别列表，我想在我的项目中实现 History.Java。它具有与 Category List 相同的字段或参数。现在如何使用相同`ListView`的历史。我正在接受一个全局`boolean`函数。我认为它会起作用。但我想知道任何好的技术。请告诉我？我想为历史和类别列表调用相同的 Category.Java 类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T05:17:21.943

> 您还可以在 Intent 中传递一维数组列表

```
Bundle intentbundle = new Bundle();
        intentbundle.putStringArrayList("arrList",arrList);

       intent.putExtras(intentbundle);

       startActivity(intent); 
```

> 并通过 nex 活动获取值

```
Bundle extras = getIntent().getExtras();
mArrList = extras.getStringArrayList("arrList"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:28:32.233

创建 ListView 适配器。然后你将一些数据放入适配器，在 Listview 中设置，你的数据就会改变。在这里阅读：[http ://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

# java - 从 Servlet 调用 Jasper iReport

> ID：12708288
> 
> 赞同：2
> 
> 时间：2012-10-03T12:15:37.250
> 
> 标签：java, jsp, servlets, jasper-reports, ireport

我正在开发基于 JSP 和 MySql 的 Web 应用程序。基本要求是 - 我需要在用户单击超链接时显示报告并提供将报告导出到 Excel 的选项。

我使用 NetBeans 7.1.2 作为我的 IDE。我已将 iReportDesigner-4.5.0 作为插件安装在 NetBeans 中。我创建了一个示例报告并将 .jrxml 和 .jasper 文件存储在我的项目文件夹中。现在我正在尝试使用 servlet 调用报告。我在我的项目库中包含了以下 JAR 文件 -

1.  mysql-connector-java-5.1.18-bin.jar
2.  commons-beanutils-1.8.2.jar
3.  commons-collections-3.2.1.jar
4.  groovy-all-1.7.5.jar
5.  iText-2.1.7.jar
6.  jasperreports-4.5.0.jar
7.  commons-digester-1.7.jar
8.  commons-logging-1.1.jar
9.  jfreechart-1.0.12.jar
10.  commons-javaflow-20060411.jar

谁能给我一些代码来**从 servlet 调用 iReport**吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T04:01:22.070

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package com.bitsperu.academia.reporte;

import com.bitsperu.academia.utilidades.DAO.DAO;
import java.io.IOException;
import java.math.BigInteger;
import java.security.MessageDigest;
import java.sql.Connection;
import java.util.HashMap;
import java.util.Map;
import javax.servlet.ServletException;
import javax.servlet.ServletOutputStream;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import net.sf.jasperreports.engine.*;
import net.sf.jasperreports.engine.export.JRPdfExporter;
import net.sf.jasperreports.engine.util.JRLoader;

/**
 *
 * @author carlos
 */
public class Matricula extends HttpServlet {

    protected void processRequest(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        response.setContentType("application/pdf");
        ServletOutputStream out = response.getOutputStream();
        Connection cn = DAO.getConexion();

        try {
            JasperReport reporte = (JasperReport) JRLoader.loadObject(getServletContext().getRealPath("app/matricula/matricula_byid.jasper"));

            Map parametros = new HashMap();
            parametros.put("id", request.getParameter("id"));
            //parametros.put("ot_entidad_id", request.getSession().getAttribute("ot_entidad_id"));
            JasperPrint jasperPrint = JasperFillManager.fillReport(reporte, parametros, cn);

            JRExporter exporter = new JRPdfExporter();
            exporter.setParameter(JRExporterParameter.JASPER_PRINT, jasperPrint);
            exporter.setParameter(JRExporterParameter.OUTPUT_STREAM, out);
            exporter.exportReport();

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        processRequest(request, response);
    }

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        processRequest(request, response);
    }

    @Override
    public String getServletInfo() {
        return "Short description";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T12:47:30.100

这是我用来从 servlet 填充 jasper 报告的一些代码。它有点定制，但应该可以帮助你。

```
public void doGet(HttpServletRequest req, HttpServletResponse res)
        throws IOException, ServletException {
    HttpSession httpSession = req.getSession();     
    String errorMessage = null;
    String forwardTo = null;
    String reportName = req.getParameter("reportName");
    String cameFrom = req.getParameter("cameFrom");
    if (StringUtils.isEmpty(reportName)) { // direct to report menu
        String type = req.getParameter("type");
        forwardTo = "/WEB-INF/jsp/reports.jsp?cameFrom=" + cameFrom + ((StringUtils.isEmpty(type)) ? "" : "&type=" + type);
    } else { // direct to specific report
        forwardTo = "/WEB-INF/jsp/jasperreport.jsp?cameFrom=" + cameFrom;
        JasperPrint jasperPrint = null;
        Connection conn = null;
        int page = -1;
        try {
            page = new Integer(StringUtils.defaultIfEmpty(req.getParameter("page"), "-1"));
        } catch (NumberFormatException ignore) {}
        boolean isFirstTime = (page == -1);
        boolean isCSV = (page == -99);
        String reportTitle = req.getParameter("reportTitle");
        String jasperPath = (String)httpSession.getServletContext().getAttribute("jasperpath");
        String reportPath = jasperPath + "/" + reportName + ".jasper";
        File reportFile = new File(reportPath);
        if (reportFile == null || !reportFile.exists())
            throw new IOException("File " + reportPath + " not found. The report design must be compiled first.");

        try {   
            if (isFirstTime) { // Clear any leftover report session attributes.
                httpSession.removeAttribute("jasperPrint");
                httpSession.removeAttribute(ImageServlet.DEFAULT_JASPER_PRINT_SESSION_ATTRIBUTE);
                httpSession.removeAttribute("reportTitle");
                httpSession.removeAttribute("reportName");
                httpSession.removeAttribute("jasperError");
                Integer nParms = (Integer) httpSession.getAttribute("nParms");
                if (nParms == null) nParms = 0;
                httpSession.removeAttribute("nParms");
                for (int ixParm = 1; ixParm < nParms + 1; ++ixParm) {
                    httpSession.removeAttribute("parmName_" + ixParm);
                    httpSession.removeAttribute("parmValue_" + ixParm);
                }
            }
            httpSession.setAttribute("reportName", reportName);

            if (isFirstTime || isCSV) {
                JasperReport jasperReport = (JasperReport)JRLoader.loadObject(reportPath);

                conn = ReportServiceImpl.getDBConnectionForReports();

                @SuppressWarnings("rawtypes")
                Map<String, Comparable> parameters = new HashMap<String, Comparable>();
                parameters.put("SUBREPORT_DIR", String.valueOf(reportFile.getParentFile()) + java.io.File.separator);
                parameters.put("ReportTitle", reportTitle);
                parameters.put("BaseDir", reportFile.getParentFile());

                // Get report-specific parameters (if any).
                int nParms = 0;
                try {
                    if (isFirstTime) {
                        nParms = new Integer(StringUtils.defaultIfEmpty(req.getParameter("nParms"), "0"));
                        httpSession.setAttribute("nParms", nParms);
                    } else nParms = (Integer)httpSession.getAttribute("nParms");
                } catch (NumberFormatException ignore) {}
                for (int ixParm = 1; ixParm < nParms + 1; ++ixParm) {
                    String _parmName = null;
                    String _parmValue = null;
                    if (isFirstTime) { // get parms from request and place in session
                        _parmName = req.getParameter("parmName_" + ixParm);
                        _parmValue = req.getParameter("parmValue_" + ixParm);
                        httpSession.setAttribute("parmName_" + ixParm, _parmName);
                        httpSession.setAttribute("parmValue_" + ixParm, _parmValue);
                    } else { // get parms from session
                        _parmName = (String) httpSession.getAttribute("parmName_" + ixParm);
                        _parmValue = (String) httpSession.getAttribute("parmValue_" + ixParm);
                    }
                    if (!StringUtils.isEmpty(_parmName)) { // if date range not specified, use defaults
                        if (_parmName.equals("START_TIME_MS") || _parmName.equals("END_TIME_MS")) {
                            BigDecimal dateMillis = new BigDecimal(0l);
                            if (_parmValue.length() == 0) {
                                if (_parmName.equals("START_TIME_MS")) dateMillis = new BigDecimal(0l);
                                else dateMillis = new BigDecimal(System.currentTimeMillis());
                            } else {
                                if (_parmValue.contains("/"))
                                    dateMillis = new BigDecimal(ReportServiceImpl.getDateInMillis(_parmValue));
                                else dateMillis = new BigDecimal(_parmValue);
                            }
                            parameters.put(_parmName, dateMillis);
                        } else parameters.put(_parmName, _parmValue);
                    }
                }

                jasperPrint = JasperFillManager.fillReport(jasperReport, parameters, conn);
                httpSession.setAttribute("reportTitle", reportTitle);
                httpSession.setAttribute((isCSV) ? "jasperPrintCSV" : "jasperPrint", jasperPrint);
                if (isFirstTime)
                    httpSession.setAttribute(ImageServlet.DEFAULT_JASPER_PRINT_SESSION_ATTRIBUTE, jasperPrint);
            }
        } catch (LoadingException le) {
            le.printStackTrace();
            errorMessage = "Problem reading db connection properties.";
        } catch (SQLException e) {
            e.printStackTrace();
            errorMessage = "Problem opening db connection.";
        } catch (JRException jre) {
            jre.printStackTrace();
            errorMessage = "Jasper problem loading/filling report: " + reportPath;
        } catch (DatabaseException de) {
            de.printStackTrace();
            errorMessage = "Problem retrieving hibernate session.";
        } catch (HibernateException he) {
            he.printStackTrace();
            errorMessage = "Problem getting hibernate transaction or database connection.";
        } catch (IllegalArgumentException iae) {
            errorMessage = "No data found for report: \"" + reportTitle + "\"";
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } finally {
            try {
                if (conn != null) ReportServiceImpl.closeDBConnectionForReports();
            } catch (Exception ignore) {}
        }
    }
    if (!StringUtils.isEmpty(errorMessage))
        httpSession.setAttribute("jasperError", errorMessage);
    getServletConfig().getServletContext().getRequestDispatcher(forwardTo).forward(req, res);
} 
```

这是一个与 servlet 交互以创建显示和 CSV 报告的 jsp。对不起，如果你是一个脚本纯粹主义者，但我最初是从其他地方得到这个代码的，它有点毛茸茸。我敢肯定，如果需要，您可以在不使用 scriptlet 的情况下弄清楚如何完成所有工作。

```
<%@page import="java.util.HashMap"%><%@
page import="java.io.FileInputStream"%><%@
page import="net.sf.jasperreports.engine.*" %><%@
page import="net.sf.jasperreports.engine.util.*" %><%@
page import="net.sf.jasperreports.engine.export.*" %><%@
page import="net.sf.jasperreports.j2ee.servlets.*" %><%@
page import="java.sql.Connection" %><%@
page import="org.hibernate.Session" %><%@
page import="org.hibernate.Transaction" %><%@
page import="com.pa.rollupedit.common.connection.HibernateSessionFactory" %><%@
page import="com.pa.rollupedit.loader.utility.Util"%><%@
page import="org.apache.commons.lang.StringUtils"%><%
String reportTitle = StringUtils.defaultIfEmpty((String)session.getAttribute("reportTitle"), "");
String reportName = StringUtils.defaultIfEmpty((String)session.getAttribute("reportName"), "");
boolean isCSV = reportName.contains("CSV");
JasperPrint jasperPrint = (JasperPrint)session.getAttribute("jasperPrint");
JasperPrint jasperPrintCSV = (JasperPrint)session.getAttribute("jasperPrintCSV");
String errorMessage = (String)session.getAttribute("jasperError");
boolean top = new Boolean(StringUtils.defaultIfEmpty(request.getParameter("top"), "false"));
boolean hasCSV = new Boolean(StringUtils.defaultIfEmpty(request.getParameter("hasCSV"), "false"));
String cameFrom = StringUtils.defaultIfEmpty(request.getParameter("cameFrom"), "admin");
String type = StringUtils.defaultIfEmpty(request.getParameter("type"), "editing");
int pageIndex = 0;
int lastPageIndex = 0;
StringBuffer sbuffer = new StringBuffer();

if (StringUtils.isEmpty(errorMessage)) {
    if (isCSV) {
        try {
            OutputStream os = response.getOutputStream();
            JRCsvExporter exporter = new JRCsvExporter();
            exporter.setParameter(JRExporterParameter.JASPER_PRINT, jasperPrintCSV);
            exporter.setParameter(JRExporterParameter.OUTPUT_STRING_BUFFER, sbuffer);
            exporter.setParameter(JRHtmlExporterParameter.IMAGES_URI, "image?image=");
            exporter.setParameter(JRExporterParameter.PAGE_INDEX, Integer.valueOf(pageIndex));
            exporter.setParameter(JRHtmlExporterParameter.HTML_HEADER, "");
            exporter.setParameter(JRHtmlExporterParameter.BETWEEN_PAGES_HTML, "");
            exporter.setParameter(JRHtmlExporterParameter.HTML_FOOTER, "");

            exporter.exportReport();

            byte[] csvBytes = sbuffer.toString().getBytes();
            InputStream is = new ByteArrayInputStream(csvBytes);

            response.setContentType("text/comma-separated-values");
            response.setHeader("Content-Disposition",
                "attachment;filename=\"" + reportName + ".csv\"");
            byte[] fileBytes = new byte[10240000];
            int bytesRead = is.read(fileBytes, 0, 10240000);
            while (bytesRead >= 0) {
                os.write(fileBytes, 0, bytesRead);
                bytesRead = is.read(fileBytes, 0, 10240000);
            }
            is.close();
            os.flush();
            os.close();
            out.clearBuffer();
            return;
        } catch (Exception e) {
            e.printStackTrace();
            errorMessage = "Problem generating CSV download file: " + e.getMessage();
        }

    } else {
        JRHtmlExporter exporter = new JRHtmlExporter();

        if (jasperPrint.getPages() != null)
            lastPageIndex = jasperPrint.getPages().size() - 1;

        try {
            pageIndex = new Integer(StringUtils.defaultIfEmpty(request.getParameter("page"), "0"));
        } catch (NumberFormatException ignore) {}

        if (pageIndex < 0) pageIndex = 0;
        if (pageIndex > lastPageIndex) pageIndex = lastPageIndex;

        if (pageIndex < 0) errorMessage = "Report has no data.";
        else {
            exporter.setParameter(JRExporterParameter.JASPER_PRINT, jasperPrint);
            exporter.setParameter(JRExporterParameter.OUTPUT_STRING_BUFFER, sbuffer);
            exporter.setParameter(JRHtmlExporterParameter.IMAGES_URI, "image?image=");
            exporter.setParameter(JRExporterParameter.PAGE_INDEX, Integer.valueOf(pageIndex));
            exporter.setParameter(JRHtmlExporterParameter.HTML_HEADER, "");
            exporter.setParameter(JRHtmlExporterParameter.BETWEEN_PAGES_HTML, "");
            exporter.setParameter(JRHtmlExporterParameter.HTML_FOOTER, "");

            exporter.exportReport();
        }
    }
}
%>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link href="css/pearson.css" type="text/css" rel="stylesheet" />
<link href="css/portlet-specifics.css" type="text/css" rel="stylesheet" />
<link href="css/fancy.css" type="text/css" rel="stylesheet" />
<title><%=reportTitle%></title>
<script type="text/javascript" src="js/commonJS.js"></script>
<script type="text/javascript" src="js/ajax.js"></script>
<script>window.history.forward(1);</script>
<script type="text/javascript">
function back() {
    var myForm = document.getElementById("myform");
    myForm.action = "ReportController?type=<%=type%>&cameFrom=<%=cameFrom%>";
    myForm.submit();
}
function downloadCSV() {
    //document.getElementById("twirliecsv").style.visibility = "visible";
    var url = "ReportController?reportName=<%=reportName%>CSV&reportTitle=<%=reportTitle%>&top=<%=top%>&hasCSV=<%=hasCSV%>&page=-99";
    var w = window.open(url, "_blank",
        "height=700, width=1000, left=50, top=100, toolbar=0, titlebar=1, scrollbars=1, resizable=1, menubar=0, location=0, directories=0, status=0, modal=1, alwaysRaised=1");
}
</script>
</head>
<body text="#000000" link="#000000" alink="#000000" vlink="#000000">
<%if (StringUtils.isEmpty(errorMessage)) {%>
<form id="myform" action="ReportController">
  <input type="hidden" id="type" name="type" value="<%=type%>"/>
  <input type="hidden" id="cameFrom" name="cameFrom" value="<%=cameFrom%>"/>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
    <tr>
      <td width="50%">&nbsp;</td>
      <td align="left">
        <hr size="1" color="#000000">
        <table width="100%" cellpadding="0" cellspacing="0" border="0">
          <tr>
            <%if (top) {%>
                <td><input onclick="back();" type="button" class="admin-button" value="Back"/></td>
            <%} else {%>
                <td><input onclick="window.top.close();" type="button" class="admin-button" value="Close"/></td>
            <%}
            if (hasCSV) {%>
                <td><input onclick="downloadCSV();" type="button" class="admin-button" value="CSV"/></td>
            <%}%>
            <td>&nbsp;&nbsp;&nbsp;</td>
            <%if (!isCSV) {
                if (pageIndex > 0) {%>
                    <td><a href="ReportController?reportName=<%=reportName%>&reportTitle=<%=reportTitle%>&top=<%=top%>&hasCSV=<%=hasCSV%>&page=0"><img src="images/first.GIF" border="0"></a></td>
                    <td><a href="ReportController?reportName=<%=reportName%>&reportTitle=<%=reportTitle%>&top=<%=top%>&hasCSV=<%=hasCSV%>&page=<%=pageIndex - 1%>"><img src="images/previous.GIF" border="0"></a></td>
                <%} else {%>
                    <td><img src="images/first_grey.GIF" border="0"></td>
                    <td><img src="images/previous_grey.GIF" border="0"></td>
                <%}
                if (pageIndex < lastPageIndex) {%>
                    <td><a href="ReportController?reportName=<%=reportName%>&reportTitle=<%=reportTitle%>&top=<%=top%>&hasCSV=<%=hasCSV%>&page=<%=pageIndex + 1%>"><img src="images/next.GIF" border="0"></a></td>
                    <td><a href="ReportController?reportName=<%=reportName%>&reportTitle=<%=reportTitle%>&top=<%=top%>&hasCSV=<%=hasCSV%>&page=<%=lastPageIndex%>"><img src="images/last.GIF" border="0"></a></td>
                <%} else {%>
                    <td><img src="images/next_grey.GIF" border="0"></td>
                    <td><img src="images/last_grey.GIF" border="0"></td>
                <%}
            }%>
            <td width="100%">&nbsp;</td>
          </tr>
        </table>
        <hr size="1" color="#000000">
      </td>
      <td width="50%">&nbsp;</td>
   </tr>
   <tr>
      <td width="50%">&nbsp;</td>
      <td align="center">
        <%=sbuffer.toString()%>
      </td>
    </tr>
  </table>
</form>
<%} else {%>
    <form action="ReportController">
        <input type="hidden" id="cameFrom" name="cameFrom" value="<%=cameFrom%>"/>
        <div style="margin: 20px 20px;">
        <%if (top) {%>
            <a href="ReportController"><input type="submit" class="admin-button" value="Back"/></a>
        <%} else {%>
            <input onclick="window.top.close();" type="button" class="admin-button" value="Close"/>
        <%}%>
        </div>
    </form>
    <div style="color: red; margin: 20px 20px; font: bold 16px/18px Arial, sans-serif;"><%=errorMessage%></div>
<%}%>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T12:45:47.923

您可以使用 生成报告（一旦有`JasperReport`对象）[`JasperFillManager`](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/engine/JasperFillManager.html)。您可以稍后将其打印出来[`JasperExportManager`](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/engine/JasperExportManager.html)。

为了获取`JasperReport`对象，您可以`jrxml`在运行时编译文件，如[如何编译 jrxml 以获取 jasper？](https://stackoverflow.com/q/4456779/851811)或使用预编译`.jasper`文件，如[如何从已编译的 .jasper 文件创建 JasperReport 对象？](https://stackoverflow.com/q/9907489/851811)

# scripting - 在 SPSS 中通知用户进度

> ID：12708290
> 
> 赞同：1
> 
> 时间：2012-10-03T12:15:47.303
> 
> 标签：scripting, vbscript, spss

我的脚本中有以下 SPSS 代码；

```
MsgBox "Progressing"
For iCaseCount = 1 To iNumberOfCases
     'my code here
Next 
```

我想删除 MsgBox 并将“它”放在循环中并将其内容替换为；"进度记录：" & " of " & iNumberOfCases

有什么方法可以实现我想要的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:17:06.317

我终于找到了一种通过 Internet Explorer 显示进度的方法。

下面是VB脚本代码。

```
Dim objExplorer
Set objExplorer = CreateObject("InternetExplorer.Application")
objExplorer.navigate "about:blank" : objExplorer.Width = 350 : objExplorer.Height = 80 : objExplorer.toolbar = False : objExplorer.menubar = False : objExplorer.statusbar = False : objExplorer.Visible = True

For iCaseCount = 1 To iNumberOfCases
    DisplayProgress(objExplorer, iCaseCount, iNumberOfCases)
    'my code here
Next

objExplorer.Quit
Set objExplorer = Nothing 
```

显示进度的方法

```
Sub DisplayProgress(ByVal x As Object, ByVal stage As Long, ByVal total As Long)
     'in code, the colon acts as a line feed
     x.Refresh
     x.document.write "<font color=black face=Arial>"
     x.document.write  "Processing record " & stage & " of " & total
     x.document.write "</font>"
End Sub 
```

# database - 尝试使用查找在 VBA 中查找字段

> ID：12708301
> 
> 赞同：2
> 
> 时间：2012-10-03T12:17:23.550
> 
> 标签：database, vba, ms-access

我想我很接近我只是不知道确切的语法。

我正在尝试使用 VBA 根据我的表 Stock Conversion 中的 SCID（主键）的值选择一条记录。

```
If LookUp("Source PC", "Stock Conversion") Is Null Then
sc1.AddNew
sc1.Fields("[Source PC]").Value = Me.cmbSource.Value
sc1.Update
End If 
```

这是我现在拥有的代码，如您所见，我只希望在值为 Null 时填充该字段。它需要找到 SCID = Record 的 Source PC。

在此先感谢，鲍勃 P

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T12:20:11.057

这是您应该使用记录集的地方。

```
Dim rs As DAO.Recordset
Dim sSQL As String

'SQL to select a record from a table MyTable based on a field or control
'called ID in the current form
sSQL="Select Id,Field1 from MyTable Where Id=" & Me.ID

'Open the recordset
Set rs = CurrentDB.OpenRecordset(sSQL)
'Test for End Of File to see if the recordset is empty ...
If rs.Eof Then
   'add a new record
   rs.AddNew 
   rs!Field1 = "Something"
   rs.Update
Else
   '... otherwise, do what you want with the record,
   'let us say edit.
   rs.edit
   rs!Field1 = "Something"
   rs.Update
End If 
```

# c# - 遍历和 infoPath 表单

> ID：12708302
> 
> 赞同：2
> 
> 时间：2012-10-03T12:17:25.903
> 
> 标签：c#, sharepoint-2007, infopath

我有一个可能包含多个附件的信息路径表单：通过使用一组重复元素，用户可以单击“单击添加项目”选项，他将能够上传更多附件。在 Sharepoint 中，我使用工作流来提取附件并将​​它们放在单独的列表中。到目前为止，我只设法提取第一个并且工作流成功完成。

我可以放一个循环或其他东西来遍历表单吗？

我附上以下代码：

```
 public sealed partial class FileCopyFeature : SharePointSequentialWorkflowActivity
    {
        public FileCopyFeature()
        {
            InitializeComponent();
        }

        public Guid workflowId = default(System.Guid);
        public Microsoft.SharePoint.Workflow.SPWorkflowActivationProperties workflowProperties = new Microsoft.SharePoint.Workflow.SPWorkflowActivationProperties();

        private void CopyFile(object sender, EventArgs e)
        {

            // Retrieve the file associated with the item
            // on which the workflow has been instantiated
            SPFile file = workflowProperties.Item.File;

            if (file == null)
                return;

            // Get the binary data of the file
            byte[] xmlFormData = null;
            xmlFormData = file.OpenBinary();

            // Load the data into an XPathDocument object
            XPathDocument ipForm = null;

            if (xmlFormData != null)
            {
                using (MemoryStream ms = new MemoryStream(xmlFormData))
                {
                    ipForm = new XPathDocument(ms);
                    ms.Close();
                }
            }

            if (ipForm == null)
                return;

            // Create an XPathNavigator object to navigate the XML
            XPathNavigator ipFormNav = ipForm.CreateNavigator();

            ipFormNav.MoveToFollowing(XPathNodeType.Element);
            XmlNamespaceManager nsManager =
            new XmlNamespaceManager(new NameTable());

            foreach (KeyValuePair<string, string> ns
            in ipFormNav.GetNamespacesInScope(XmlNamespaceScope.All))
            {
                if (ns.Key == String.Empty)
                {
                    nsManager.AddNamespace("def", ns.Value);
                }
                else
                {
                    nsManager.AddNamespace(ns.Key, ns.Value);
                }
            }

           do
            {

                XPathNavigator nodeNav = ipFormNav.SelectSingleNode("//my:field2", nsManager);

                // Retrieve the value of the attachment in the InfoPath form
                //XPathNavigator nodeNav = ipFormNav.SelectSingleNode(
                //"//my:field2", nsManager);

                string ipFieldValue = string.Empty;
                if (nodeNav != null)
                {
                    ipFieldValue = nodeNav.Value;

                    // Decode the InfoPath file attachment
                    InfoPathAttachmentDecoder dec =
                    new InfoPathAttachmentDecoder(ipFieldValue);
                    string fileName = dec.Filename;
                    byte[] data = dec.DecodedAttachment;

                    // Add the file to a document library
                    using (SPWeb web = workflowProperties.Web)
                    {
                        SPFolder docLib = web.Folders["Doc"];
                        docLib.Files.Add(fileName, data);
                        docLib.Update();
                        // workflowProperties.Item.CopyTo(data + "/Doc/" + fileName);
                    }

                }

            }
            while (ipFormNav.MoveToNext());

        }
   }
    /// <summary>
    /// Decodes a file attachment and saves it to a specified path.
    /// </summary>
    public class InfoPathAttachmentDecoder
    {
        private const int SP1Header_Size = 20;
        private const int FIXED_HEADER = 16;

        private int fileSize;
        private int attachmentNameLength;
        private string attachmentName;
        private byte[] decodedAttachment;

        /// <summary>
        /// Accepts the Base64 encoded string
        /// that is the attachment.
        /// </summary>
        public InfoPathAttachmentDecoder(string theBase64EncodedString)
        {
            byte[] theData = Convert.FromBase64String(theBase64EncodedString);
            using (MemoryStream ms = new MemoryStream(theData))
            {
                BinaryReader theReader = new BinaryReader(ms);
                DecodeAttachment(theReader);
            }
        }

        private void DecodeAttachment(BinaryReader theReader)
        {
            //Position the reader to get the file size.
            byte[] headerData = new byte[FIXED_HEADER];
            headerData = theReader.ReadBytes(headerData.Length);

            fileSize = (int)theReader.ReadUInt32();
            attachmentNameLength = (int)theReader.ReadUInt32() * 2;

            byte[] fileNameBytes = theReader.ReadBytes(attachmentNameLength);
            //InfoPath uses UTF8 encoding.
            Encoding enc = Encoding.Unicode;
            attachmentName = enc.GetString(fileNameBytes, 0, attachmentNameLength - 2);
            decodedAttachment = theReader.ReadBytes(fileSize);
        }

        public void SaveAttachment(string saveLocation)
        {
            string fullFileName = saveLocation;
            if (!fullFileName.EndsWith(Path.DirectorySeparatorChar.ToString()))
            {
                fullFileName += Path.DirectorySeparatorChar;
            }

            fullFileName += attachmentName;

            if (File.Exists(fullFileName))
                File.Delete(fullFileName);

            FileStream fs = new FileStream(fullFileName, FileMode.CreateNew);
            BinaryWriter bw = new BinaryWriter(fs);
            bw.Write(decodedAttachment);

            bw.Close();
            fs.Close();
        }

        public string Filename
        {
            get { return attachmentName; }
        }

        public byte[] DecodedAttachment
        {
            get { return decodedAttachment; }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T11:03:25.687

您的问题似乎与您使用`MoveToNext`. [根据文档](http://support.microsoft.com/kb/308343)，此函数移动到下一个兄弟元素，并且不会导航到子元素。您的代码似乎会转到它找到的第一个元素（大概是`my:myFields`），查找第一个名为的子元素`my:field2`（它只拉出第一个，因为您正在使用`SelectSingleNode`，然后转到下一个兄弟`my:myFields`（而不是 的下一个兄弟`my:field2`）。一个解决此问题的方法可能是将当前`do-while`循环替换为[`SelectNodes`](http://msdn.microsoft.com/en-us/library/4bektfx9.aspx)对以下内容的调用，然后遍历`nodeList`.

```
XmlNodeList nodelist = ipFormNav.SelectNodes("//my:field2", nsManager); 
```

# android - 使用福昕阅读器 SDK 在 android 中打开 pdf

> ID：12708303
> 
> 赞同：0
> 
> 时间：2012-10-03T12:17:28.340
> 
> 标签：android, android-ndk, java-native-interface, foxit, foxit-reader

在我的应用程序中，我必须打开 pdf。我正在使用 FOXIT READER SDK.. 我已经成功配置 android NDK 以使用 C/C++ 代码。我正在尝试运行它的演示。

这是我的日志猫错误。

内存管理器创建 sn = XXXXDTEMP,code = XXXXXXA96AB2BF3C4021EC71EB189CD77E68DFB2 10-03 FPDFEMB TRACE: FS_LoadJbig2Decoder 调用

FPDFEMB BENCHMARK：FS_LoadJbig2Decoder，0 滴答

FPDFEMB TRACE：加载调用的 JPEG2000 解码器

FPDFEMB BENCHMARK：加载 JPEG2000 解码器，0 滴答声

FPDFEMB TRACE: FS_FontCMap_LoadGB 调用

FPDFEMB BENCHMARK: FS_FontCMap_LoadGB, 0 tick

FPDFEMB TRACE: FS_FontCMap_LoadGBExt 调用

FPDFEMB BENCHMARK: FS_FontCMap_LoadGBExt, 0 tick

FPDFEMB TRACE: FS_FontCMap_LoadCNS 调用

FPDFEMB BENCHMARK: FS_FontCMap_LoadCNS, 0 tick

FPDFEMB TRACE: FS_FontCMap_LoadKorea 调用

FPDFEMB BENCHMARK: FS_FontCMap_LoadKorea, 0 tick

FPDFEMB TRACE: FS_FontCMap_LoadJapan 调用

FPDFEMB BENCHMARK：FS_FontCMap_LoadJapan，0 滴答

FPDFEMB TRACE: FS_FontCMap_LoadJapanExt 调用

FPDFEMB BENCHMARK: FS_FontCMap_LoadJapanExt, 0 tick

FPDFEMB TRACE: FPDFEMB_SetFontMapper 调用

FPDFEMB BENCHMARK: FPDFEMB_SetFontMapper, 0 tick

FPDFEMB TRACE: FS_Memory_Alloc 调用

FPDFEMB BENCHMARK：FS_Memory_Alloc，0 滴答

**DocLoad = FPDFDocLoad：文档未正确加载**

在这里，我认为 pdf 文档无法正确加载...

我可以使用另一种方法打开 pdf 吗？但 pdf 只想在我的应用程序中打开。

提前致谢..

# php - 当页面对其自身进行操作时，停止某些代码位的运行

> ID：12708305
> 
> 赞同：1
> 
> 时间：2012-10-03T12:17:30.100
> 
> 标签：php, html

现在我有一个对自己起作用的表单。有一些代码检查用户是否应该在那里。如果在按下提交后对其自身进行了操作，是否有办法阻止脚本运行某些代码部分。

我正在考虑使用 SESSION 变量进行检查，但我脑子里一片混乱：p

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:20:01.287

当然。如果您是自行提交表单操作，只需检查是否`$_POST`为空（假设您要发布到表单）

```
if (!empty($_POST))
{
...
} 
```

当我使用 PHP 时，我在表单模板中使用输入元素，如下所示：

```
<input type="submit" name="submit" id="submit" value="Login" /></td> 
```

...在 PHP 页面中，我检查 POST 是否像这样自行提交：

```
// if page is not submitted to itself echo the form
if (!isset($_POST['submit']))
{
...
} 
```

虽然这并不安全。如果您想获得自提交的全部好处，您应该尝试通过使用随机令牌挑战客户端并要求客户端重复它来对抗[跨站点请求伪造 (XSRF)](http://en.wikipedia.org/wiki/Cross-site_request_forgery)。

就像在表单中嵌入隐藏的输入一样：

```
<input type="hidden" name="nonce" value="<? echo $NONCE_VALUE; ?>" /> 
```

# php - php合并类变量而不是替换它们

> ID：12708308
> 
> 赞同：0
> 
> 时间：2012-10-03T12:18:00.827
> 
> 标签：php, arrays, merge, multiple-inheritance

我有多个 php 类

```
// a Base class
abstract class Base_Page {
   protected static $config = array(
      'status' => 'int',
   );
}
// an inheriting class
class Page extends Base_Page{
   protected static $config = array(
      'title' => 'varchar',
      'description' => 'text',
);
// and one more level of inheritance
class Page_Redirect extends Base_Page {
   protected static $config = array(
      'href' => 'http://domain.com',
   );
} 
```

现在我想这样做：

```
$page_redirect = new Page_Redirect();
$page_redirect->getConfig(); // which i assume to be implemented (this is my problem)
// should return:
// array(
//    'status' => 'int',
//    'title' => 'varchar',
//    'description' => 'text',
//    'href' => 'http://domain.com',
// ) 
```

由于变量被扩展类覆盖，因此不知道如何实现这一点。感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:21:22.510

您不能对裸属性执行此操作。使用方法会更好：

```
abstract class Base_Page {
   protected function getConfig() {
       return array('status' => 'int');
   }
}

// an inheriting class
class Page extends Base_Page{
   protected function getConfig() {
       return array(
          'title' => 'varchar',
          'description' => 'text',
       ) + parent::getConfig();
   }
}

// and one more level of inheritance
class Page_Redirect extends Base_Page {
   protected function getConfig() {
       return array(
          'href' => 'http://domain.com',
       ) + parent::getConfig();
   }
} 
```

当然，现在您已经失去了静态获取配置的能力，但这很可能无关紧要。如果是这样（即您需要知道配置而手头没有实例，并且一时兴起创建一个实例是没有意义的），那么代码需要进一步重构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:26:49.837

```
<?php

// a Base class
abstract class Base_Page {

    protected static $config = array(
        'status' => 'int',
    );

}

// an inheriting class
class Page extends Base_Page {

    protected static $config = array_merge(
        parent::$config,
        array(
            'title' => 'varchar',
            'description' => 'text',
        )
    );

} 
```

尝试这样的事情。

# objective-c - 如何在代码中绘制图像视图

> ID：12708313
> 
> 赞同：0
> 
> 时间：2012-10-03T12:18:13.217
> 
> 标签：objective-c, ios, uiimageview

我有个问题。我希望我的核心数据数据库中的每条记录在屏幕上绘制一个 UIImage 视图。但问题是我想制作一种网格。在下面的链接中，您可以看到我想要实现的目标。

[图片](http://www.flickr.com/photos/74322780@N08/8050170687/in/photostream)

所以我的问题是，如何在代码中在屏幕上绘制图像。并将这些图像放在某种网格中。不能使用集合视图，因为应用程序应该在所有 IOS 设备上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:22:31.383

一个快速的作弊方法是使用一个表格视图，然后在每个单元格中放置另一个表格视图，但旋转 90 度。

然后，您可以使用第二个 TableView 来显示图片等...

这将为您提供一个上下滚动的表格，然后每个单元格都可以从左到右滚动。

我建议继承 UITableViewCell 并将其设置为 UITableViewDelegate 和 UITableViewDatasource。

您还必须记住将这些“子”表的内容也旋转 90 度，以便它们以正确的方式向上。

这听起来像是很多工作，但是如果您将子表的管理推送到单元格中，那么它实际上变得非常容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:24:07.080

虽然您可以实现自定义`UIView`并实现 drawRect: 方法并在那里绘制`UIImage`s，但我建议仅`UIImageView`在“主”视图上使用多个 s 作为子视图。您的视图可能嵌入在 a 中`UIScrollView`，或者您可以将 a`UITableView`与 custom 一起使用`UITableViewCell`。哪个更容易可能与您如何与视图交互有关。

构建一个巨大的图像视图是我绝对会尽量避免的——它会花费很多（可能是不必要的）内存，而且它也可能很慢。处理起来绝对不是很灵活，动态更新也很痛苦。

# javascript - 当用户在 javascript 中键入时，使文本变为粗体

> ID：12708317
> 
> 赞同：0
> 
> 时间：2012-10-03T12:18:25.630
> 
> 标签：javascript, dynamic, autocomplete

我已经在 javascript 中实现了一个自动完成列表，因此如果用户键入“a”，所有以“a”开头的名称都会显示在下拉菜单中。现在我想根据下拉菜单中的用户输入使文本变为粗体。因此，如果用户键入“ab”，字母“ab”应该在包含单词 about 的下拉菜单中显示为粗体。

这是我显示名称的 JS 代码的一部分：

```
document.getElementById('dropmenu').style.visibility='visible';
var element = document.createElement("div");
var namecontainer = document.createElement("div");
namecontainer.setAttribute('id', "name" + div_id);
namecontainer.className = "namecontainerclass";
element.setAttribute('id', "div" + div_id);
element.className = "elementclass";
var text = document.createTextNode(myArray[i].name);

element.appendChild(text);

document.getElementById('dropmenu').appendChild(namecontainer);

document.getElementById("name" + div_id).appendChild(element);

var img=document.createElement("img");

img.setAttribute("src", myArray[i].image);
img.setAttribute("width", 25);
img.setAttribute("height", 25);

namecontainer.appendChild(img); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:20:14.837

这是我想到的。您想根据名称（myArray[i].name）检查用户输入，然后创建一些`textnodes`（或`element`如果匹配），并将它们附加到容器元素（`div`在本例中为 a）。我没有测试它，但它有点伪代码来展示如何在不使用任何 javascript 框架的情况下处理这种高亮显示。

```
// searchString is the string entered by the user...
// split by the searchString, but group the selection so the matches 
// also get added to the result array.

var match = new RegExp('\\('+ searchString +')\\',"gi");

var textParts = myArray[i].name.split(match);
var nodes = [];
var element = document.createElement("div");

// only create elements for names that actually match.
// if there is only one match, there wasn't a match by the split 
if (textParts.length > 1){
  for(i = 0; i < textParts.length; i++){
     if (textParts[i] == searchString) {
       nodes[i] = document.createElement("em");
       nodes[i].createTextNode(searchString);
     } else {
       nodes[i] = document.createTextNode(textparts[i]));
     }
     element.appendChild(nodes[i]);
  }

} 
```

# ruby-on-rails - %w[].each 是否在 Rails 控制器中工作？

> ID：12708321
> 
> 赞同：0
> 
> 时间：2012-10-03T12:18:53.903
> 
> 标签：ruby-on-rails, sinatra

我正在尝试遵循 Twilio 的本教程-> http://www.twilio.com/docs/howto/search-and-buy

但是，它是用 Sinatra 编写的，我在尝试将其转换为 Rails 时感到困惑。

我想将其转换为两个操作，：创建和：显示，具有各自的视图

```
filespost '/search-numbers' do
  account_sid = 'ACXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'
  auth_token = 'YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY'

  client = Twilio::REST::Client.new(account_sid, auth_token)

  search_params = {}
  %w[in_postal_code near_number contains].each do |p|
    search_params[p] = params[p] unless params[p].nil? || params[p].empty?
  end

  begin
    local_numbers = client.account.available_phone_numbers.get('US').local
    numbers = local_numbers.list(search_params)

    unless numbers.empty?
      out = '<html><head><title>Choose a number</title></head><body><h3>Choose a number</h3>'
      numbers.each do |number|
        out << "<form method='POST' action='/buy-number'>"
        out << "<label>#{number.friendly_name}</label>"
        out << "<input type='hidden' name='PhoneNumber' value='#{number.phone_number}' />"
        out << "<input type='submit' value='BUY' /></form>"
      end
      out << '</body></html>'
    else
      '<b>Sorry!</b> Twilio doesn\'t have any numbers available that match those constraints.'
    end
  rescue StandardError => e
    '<b>Sorry!</b> ' + e.message + '.'
  end 
```

结尾

所以，我的想法是创建一个 find_numbers 控制器，带有 new、create 和 show。新的只是一种与数据库没有联系的表格。Create 动作应该创建一个数字数组，并且 show 动作应该显示它们。

我在这里感到困惑`第一个困惑是这个，我猜这会进入创建操作->

```
 search_params = {}
  %w[in_postal_code near_number contains].each do |p|
    search_params[p] = params[p] unless params[p].nil? || params[p].empty?
  end 
```

`

我不确定这是否适用于 Rails 控制器。

其余的，我猜会进入 show 动作，但这里的问题是，show 动作如何能够调用 search_params？

我已经调整了几个小时，任何指导将不胜感激！！！

* * *

**更新**

在了解了有关表单如何在 Rails 中工作的更多信息后，我尝试将此代码移至新控制器“find_numbers”，其中包含新操作、创建操作和显示操作。Show show 给出错误：

```
NoMethodError in Find_numbers#create

Showing C:/Sites/dct/app/views/find_numbers/show.html.erb where line #1 raised:

undefined method `each' for nil:NilClass 
```

我在想这是因为 numbers 实例变量是 nil，因为它之前的某些东西不起作用。

这是我的控制器：

类 FindNumbersController < ApplicationController

```
def new
    @user = current_user
end

def create
    @user = current_user
    render 'find_numbers/show'
end

def show
    @user = current_user
    client = Twilio::REST::Client.new(@user.twilio_account_sid, @user.twilio_auth_token)

    search_params = {}
    %w(in_postal_code near_number contains).each do |p|
      search_params[p] = params[p] unless params[p].blank?
    end

    local_numbers = client.account.available_phone_numbers.get('US').local
    @numbers = local_numbers.list(search_params)    

end 
```

结尾

# 请注意，我所知道的是 current_user 变量有效。我认为在 search_params 之后的某个时候它会变得混乱

我的节目视图

```
<%= number.friendly_name %>
<%= number.phone_number %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:29:38.723

在 Rails 中，这应该有效：

```
search_params = {}
%w(in_postal_code near_number contains).each do |p|
  search_params[p] = params[p] unless params[p].blank?
end 
```

如果没有....您遇到什么错误？

# qt - 使用 Qt 运行项目包含在 Visual Studio express 2008 中

> ID：12708325
> 
> 赞同：0
> 
> 时间：2012-10-03T12:19:11.830
> 
> 标签：qt, visual-studio-2008

我还是个新手，所以请多多包涵:)

我刚刚得到了一个包含一些 qt 的 vs 2008 项目，即 qtGUI。现在我从 qt-project.org 站点下载了开源预构建库（版本 4.8.3）。我已经在vs2008下添加了include和lib目录，但是我的项目还是编译不了。我收到了一些 LNK 2001 未解决的外部符号错误。有人可以告诉我我在这里缺少什么吗？

具体错误：

```
treeview.obj : error LNK2001: unresolved external symbol "public:static struct QMetaObject const    cQtTreeWidgetFilter::staticMetaObject"(?staticMetaObject@cQtTreeWidgetFilter@@2UQMetaObject@@B)
treeview.obj : error LNK2001: unresolved external symbol "public:virtual struct QMetaObject const * __thiscall    cQtTreeWidgetFilter::metaObject(void)const "    (?metaObject@cQtTreeWidgetFilter@@UBEPBUQMetaObject@@XZ)
treeview.obj : error LNK2001: unresolved external symbol "public:virtual void * __thiscall cQtTreeWidgetFilter::qt_metacast(char const    *)" (?qt_metacast@cQtTreeWidgetFilter@@UAEPAXPBD@Z)
treeview.obj : error LNK2001: unresolved external symbol "public: virtual int    __thiscall cQtTreeWidgetFilter::qt_metacall(enum QMetaObject::Call,int,void * *)"    (?qt_metacall@cQtTreeWidgetFilter@@UAEHW4Call@QMetaObject@@HPAPAX@Z) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:16:24.427

经过几天的麻烦，我在 sdk 中找到了一个参考，建议我应该将 qt 降级到以前的版本。我去下载了 4.6.2，现在它生成了 moc 文件并且编译没有错误。

感谢您的帮助 dreschjerm。

# asp.net-mvc - 如果数据在 MVC4 的下拉列表中可用，我如何显示默认消息如果没有数据和选定的值

> ID：12708327
> 
> 赞同：2
> 
> 时间：2012-10-03T12:19:12.617
> 
> 标签：asp.net-mvc

我正在将下拉列表与一些数据绑定，并在下拉列表中显示选定的数据。这适用于以下代码。

```
@Html.DropDownListFor(modelItem => item.UniformCommentSelected,
                                   new SelectList(item.UniformComment),
                                   item.UniformCommentSelected) 
```

现在我想为下拉列表添加默认消息“选择”。如果有的话，我还想在下拉列表中显示选定的值，如果没有，则显示“选择”。

如果我在 DropDownListFor 中将“Select”作为第三个参数，那么它会为所有用户显示“Select”。如果我将“选择”作为下拉列表中的第四个参数，那么什么也不会发生。

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:19:13.663

尝试使用以下代码。

```
@Html.DropDownListFor(modelItem => item.UniformCommentSelected, new SelectList(item.UniformComment),item.UniformCommentSelected == null ? "---Select---" : item.UniformCommentSelected) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:23:31.413

在我的项目中，我像这样填写我的下拉列表，如下所示

```
@Html.DropDownListFor(model => model.CountryId, new SelectList(Model.Countries, "ID", "Name"), "select", new { @ID = "ddlCountry", @class = "text", Style = "width: 150px;", onchange = "javascript:cascadingdropdown();" }) 
```

我想这会对你有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T12:46:49.333

我通常绑定到 SelectListItem 的集合，然后手动将“请选择一个...”选项的空白添加到该集合。在控制器中（或在呈现下拉列表之前的视图中），我为所选选项设置了 .Selected = true 。

# c# - 如何匹配正则表达式中用空格分隔的所有单词？

> ID：12708328
> 
> 赞同：1
> 
> 时间：2012-10-03T12:19:16.810
> 
> 标签：c#, regex

我正在学习正则表达式，但仍然很难学习。
所以我的问题是这样的，我给出了一组关键字：

> 敏捷的棕色狐狸

我必须在一堆句子中找到，例如：

> 布朗性感狐狸在后院跳得那么快……

如果与这些单词有任何匹配（不区分大小写）：

> The, the, brown, Brown, fox, Fox, quick, Quick

然后我可以说返回值是`true`

如何在正则表达式中做到这一点？我正在考虑拆分单词并放入数组并使用循环并找到它们，`.Contains(...)`但我知道这并不理想。

其实我还有一个担心。但我害怕把它作为一个新问题发布。
所以我的第二个问题是，**正则表达式如何读取模式**？优先事项和最低优先事项是什么？
无论如何，请帮助我解决我的问题。

**编辑**

抱歉回复晚了，但@PatrikW 的解决方案似乎不起作用。
我有静态类：

```
 public static bool ValidateRegex(string value, string regex)
    {
        value += ""; // Fail safe for null
        Regex obj = new Regex(regex, RegexOptions.IgnoreCase);
        if (value.Trim() == "")
            return false;
        else
        {
            return obj.IsMatch(value);
        }
    } 
```

构造正则表达式模式：

```
keyword = "maria";
            string regexPattern = "(?<=\b)(";
            string Or = string.Empty;

            foreach (string item in keyword.Split(new char[] { ' ', ',', '.' }, StringSplitOptions.RemoveEmptyEntries).ToList())
            {
                regexPattern += Or + "(" + item + ")";
                Or = "|";
            }

            regexPattern += ")(?=\b)"; 
```

数据信息：

```
List<Friend> useritems = null;
useritems = ((List<Friend>)SessonHandler.Data.FriendList).Where(i =>
    Utility.ValidateRegex(i.LastName, regexPattern) ||
    Utility.ValidateRegex(i.FirstName, regexPattern) ||
    Utility.ValidateRegex(i.MiddleName, regexPattern)).ToList();

//regexPattern = "(?<=\b)((maria))(?=\b)"
//LastName = "MARIA CALIBRI"
//FirstName = "ALICE"
//MiddleName = null 
```

可能是我对代码做错了什么。请帮忙。

**编辑 2**
我忘记了`@`标志。这现在必须工作：

```
string regexPattern = @"(?<=\b)(";
.
.
.
regexPattern += @")(?=\b)"; 
```

下面的答案是正确的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T12:45:48.157

Felice 展示的是更动态的解决方案，但这里有一个模式可以找到您所拥有的确切关键字：

```
"(?<=\b)((The)|(quick)|(brown)|(fox))(?=\b)" 
```

由于前导和尾随捕获组，它只会匹配整个单词而不是其中的一部分。

这是一个例子：

```
Regex foxey = new Regex(@"(?<=\b)((The)|(quick)|(brown)|(fox))(?=\b)");
foxey.Options = RegexOptions.IgnoreCase;
bool doesMatch = foxey.IsMatching("the Brown SexyFox Jumps soQuickly in the backyard..."); 
```

**编辑 - 正则表达式引擎：**

简而言之，正则表达式引擎一次遍历输入字符串一个字符，从最左边的一个字符开始，将其与我们编写的正则表达式模式的第一部分进行检查。如果匹配，解析器将移动到下一个字符并根据模式的下一部分检查它。如果它成功地遍历了整个模式，那就是匹配。

您可以通过搜索“正则表达式引擎”或类似的内容来了解​​正则表达式的内部工作原理。这是一个选择： [http ://www.regular-expressions.info/engine.html](http://www.regular-expressions.info/engine.html)

# c# - OleDbDataAdapter 更新到 dbf [自由表] -Syntax Error()

> ID：12708329
> 
> 赞同：0
> 
> 时间：2012-10-03T12:19:18.057
> 
> 标签：c#, oledb, dbf

当我通过 OleDbCommand 插入直接值没问题时，它工作正常

```
OleDbCommand OleCmd1 = new OleDbCommand("Insert into My_Diary (sl_no,reminder) values("+a1+",'CHECK VALUE')", OleCon1);
OleCmd1->ExecuteNonQuery(); 
```

但是当我喜欢通过参数更新时，它显示“语法错误”......我无法识别我的错误......

```
string MyConStr = "Provider=VFPOLEDB.1; Data Source='C:\\For_Dbf'; Persist Security Info=False";    
InsSavDiaryCmd = "Insert into My_Table1 (sl_no,reminder) values (@sl_no,@reminder) ";

VFPDAp=gcnew OleDbDataAdapter();
VFPDApMy_Table1InsertCommand = gcnew OleDbCommand(InsSavDiaryCmd, OleCon1);

WithInsVar = VFPDAp.InsertCommand.Parameters;
WithInsVar.Add("@sl_no", OleDbType.Integer, 10, "sl_no");
WithInsVar.Add("@reminder", OleDbType.Char, 250, "reminder");

OleCon1.ConnectionString = MyConStr;
OleCon1.Open();

OleDbTransaction Trans=OleCon1.BeginTransaction();

//VFPDAp.DeleteCommand.Transaction = Trans;
//VFPDAp.UpdateCommand.Transaction = Trans;
VFPDAp.InsertCommand.Transaction = Trans;

VFPDAp.Update(MyDataTbl);
Trans.Commit();
OleCon1.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:30:48.557

OleDbCommand 不使用命名参数。您需要更改插入语句，以便它使用问题。

```
InsSavDiaryCmd = "Insert into My_Table1 (sl_no,reminder) values (?, ?) "; 
```

您需要确保每个问号都有一个参数，并确保按照它们在插入语句中的使用顺序插入参数。

** 如果您想使用名称参数...您可以尝试使用[VfpClient](http://vfpclient.codeplex.com/)，这是我正在开发的一个项目，旨在让 .Net 的数据访问更好一些。

# javascript - 如何使用phonegap javascript获取IP地址

> ID：12708330
> 
> 赞同：2
> 
> 时间：2012-10-03T12:19:24.890
> 
> 标签：javascript, android, cordova

如何使用 phonegap javascript 获取 IP 地址。我必须将此 IP 地址作为 QueryString 发送到 php 页面。

有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T12:22:43.453

干得好：

[http://simonmacdonald.blogspot.in/2012/08/so-you-wanna-write-phonegap-200-android.html](http://simonmacdonald.blogspot.in/2012/08/so-you-wanna-write-phonegap-200-android.html)

基本上，您需要使用充当 javascript 包装器的 phonegap 插件，并使用原生 android SDK 中的方法来获取所需的 IP 地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T12:32:03.557

不要在您的 Javascript 蚂蚁中执行任何代码将其发送到 PHP 页面，但在 PHP 页面中，您可以执行以下函数调用来获取真实 IP 地址...

```
function getRealIpAddr()
{
    if (!empty($_SERVER['HTTP_CLIENT_IP']))   //check ip from share internet
    {
      $ip=$_SERVER['HTTP_CLIENT_IP'];
    }
    elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR']))   //to check ip is pass from proxy
    {
      $ip=$_SERVER['HTTP_X_FORWARDED_FOR'];
    }
    else
    {
      $ip=$_SERVER['REMOTE_ADDR'];
    }
    return $ip;
} 
```

# eclipse - 在 Eclipse 中安装 Crystal 报表

> ID：12708331
> 
> 赞同：3
> 
> 时间：2012-10-03T12:19:37.890
> 
> 标签：eclipse, crystal-reports, report, eclipse-3.6, helios

我对 Crystal Reports 很陌生，但我对 Eclipse 很熟悉，因为我已经用它在 Android 上制作了许多应用程序。现在我想在 Eclipse Helios (SDK 3.6.2) 中生成 Crystal Reports。所以对于我提到的安装[`this link`](http://scn.sap.com/docs/DOC-29757)。我按照手动下载的路径成功下载了`SAP Crystal Reports, Version for Eclipse – Manual Installation package`. 但我从那里迷路了。

我按照给出的步骤[`this pdf file`](http://downloads.businessobjects.com/akdlm/crystalreportsforeclipse/2_0/CR4E20ViaUpdateService.pdf) ，我试图继续：`help->Install new software...`。但是在最终安装时，它给出了以下错误：

> 无法完成安装，因为找不到一项或多项所需项目。
> 当前安装的软件：Crystal Reports for Eclipse 2.0.13.r1733 (com.businessobjects.crystalreports.integration.eclipse.feature.feature.group 2.0.13.r1733)
> 缺少要求：Crystal Reports Runtime Support 12.2.214.r1733 (com. businessobjects.crystalreports.integration.eclipse.facet.shared 12.2.214.r1733) 需要'bundle org.eclipse.jst.common.frameworks 0.0.0' 但找不到
> 无法满足依赖关系：
> 来自：Crystal Reports for Eclipse 2.0 .13.r1733（com.businessobjects.crystalreports.integration.eclipse.feature.feature.group 2.0.13.r1733）
> 至：com.businessobjects.crystalreports.integration.eclipse.facet.shared [12.2.214.r1733]

我搜索了这个错误（通过谷歌和stackoverflow），但找不到任何解决方案。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T07:36:29.840

我正在使用 Eclipse 32 位，并且我从[http://scn.sap.com/docs/DOC-29757](http://scn.sap.com/docs/DOC-29757)手动安装了 Crystal Reports 包。这个对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T01:17:09.740

这可能是因为您正在运行 eclipse 64 位？如果是这样，请尝试手动安装插件。从这里下载手动安装包：http: [//scn.sap.com/docs/DOC-29757](http://scn.sap.com/docs/DOC-29757)

解压缩文件并将它们复制到 eclipse 文件夹然后水晶报表插件应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-12T04:51:32.903

试试这个[http://downloads.businessobjects.com/akdlm/crystalreportsforeclipse/2_0/update_site/](http://downloads.businessobjects.com/akdlm/crystalreportsforeclipse/2_0/update_site/)它对我有用；）

谢谢你，毕竟，我意识到它只适用于 32 位......嗯，是的，我知道。

# ios - 如何为 AV Foundation 相机捕捉设置自定义帧大小？

> ID：12708332
> 
> 赞同：0
> 
> 时间：2012-10-03T12:19:38.413
> 
> 标签：ios, avfoundation, avcapturesession, avcapture

我正在使用 AVCam 示例应用程序，它使用 AV Foundation 进行相机捕捉。

当我使用以下预设时：

```
[self.captureSession setSessionPreset:AVCaptureSessionPresetMedium]; 
```

我从相机中得到一个 480 x 360 的视频帧。

但是，我想要 320 x 192 的帧大小。如何设置自定义预设以获得这种大小的帧？如果有帮助，我的目标 iOS 版本是 4.2.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T03:30:40.877

简单的方法是：将 AVCaptureVideoPreviewLayer 的帧设置为自定义值，例如 320*192。然后你可以得到你想要的图像。

# youtube - 在 YouTube 用户上传供稿中访问 start_index=1000 以外的项目

> ID：12708333
> 
> 赞同：10
> 
> 时间：2012-10-03T12:19:39.680
> 
> 标签：youtube, youtube-api, gdata

我目前正在尝试从 YouTube 用户上传提要中提取有关视频的数据。此提要包含某个用户上传的所有视频，并通过以下请求从 API 访问：

```
http://gdata.youtube.com/feeds/api/users/USERNAME/uploads 
```

其中 USERNAME 是拥有该提要的 YouTube 用户的名称。

但是，我在尝试访问超过 1000 个视频的提要时遇到了问题。由于对 API 的每个请求都可以返回 50 个项目，因此我使用 max_length 和 start_index 遍历提要，如下所示：

```
http://gdata.youtube.com/feeds/api/users/USERNAME/uploads?start-index=1&max-results=50&orderby=published
http://gdata.youtube.com/feeds/api/users/USERNAME/uploads?start-index=51&max-results=50&orderby=published 
```

依此类推，每次调用时将 start_index 递增 50。这可以完美运行，直到：

```
http://gdata.youtube.com/feeds/api/users/USERNAME/uploads?start-index=1001&max-results=50&orderby=published 
```

此时我收到 400 错误，通知我“您不能请求超过第 1000 项。” 这让我很困惑，因为我假设查询只会返回 50 个视频：1001-1051，按最近发布的顺序排列。浏览了[文档](https://developers.google.com/youtube/2.0/reference)后，我发现了这一点：

> **结果计数和可访问结果的限制**
> 
> ...
> 
> 对于任何给定的查询，即使有超过 1,000 个结果，您也无法检索到超过 1,000 个结果。如果您尝试检索超过 1,000 个结果，API 将返回错误。因此，如果您将 start-index 查询参数设置为 1001 或更大的值，API 将返回错误。如果 start-index 和 max-results 参数的总和大于 1,001，它也会返回错误。
> 
> 例如，如果将 start-index 参数值设置为 1000，则必须将 max-results 参数值设置为 1，如果将 start-index 参数值设置为 980，则必须将 max-results 参数设置为值为 21 或更低。

我不知道如何以一致的方式访问通用用户的第 1001 个最后上传的视频及以后的视频，因为仅使用 max-results 和 start-index 无法对它们进行索引。有没有人对如何避免这个问题有任何有用的建议？我希望我已经清楚地概述了困难！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-04T18:12:31.410

支持获取给定帐户的所有视频**，**但您需要确保您对上传提要的请求是针对后端数据库而不是搜索索引。因为您包含`orderby=published`在您的请求 URL 中，所以您将违反搜索索引。搜索索引提要限制为 1000 个条目。

摆脱 ，`orderby=published`你会得到你正在寻找的数据。无论如何，上传提要的默认顺序都是按时间倒序排列的。

这是一个特别容易犯的错误，我们有一篇博客文章更详细地解释了它：

[http://apiblog.youtube.com/2012/03/keeping-things-fresh.html](http://apiblog.youtube.com/2012/03/keeping-things-fresh.html)

好消息是这在 API 版本 3 中将不再是问题。

# apache - 在 .htaccess 中解析 INI 文件

> ID：12708335
> 
> 赞同：1
> 
> 时间：2012-10-03T12:19:41.523
> 
> 标签：apache, .htaccess, ini

如何解析 .htaccess 中的 ini 文件？在我的例子中，.htaccess 放在根目录 (/) 中，目标 ini 文件是 /conf/params.ini。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:53:56.213

您可以直接在文件中控制[mod_deflate](http://httpd.apache.org/docs/2.2/mod/mod_deflate.html)`.htaccess`行为，因为它是 Apache 函数而不是 PHP。`php.ini`如果需要，可以直接修改，或者您可以从脚本中更改设置，但这听起来不像您的意图。

这里有一个类似的 mod_deflate 问题，其中使用了一些相当高级的设置：[Mod_deflate 和 mod_header 设置？](https://stackoverflow.com/questions/8262163/mod-deflate-and-mod-header-settings)

# download - 如何使用Java Hessian库实现文件下载API功能

> ID：12708344
> 
> 赞同：1
> 
> 时间：2012-10-03T12:20:01.320
> 
> 标签：download, hessian

正如Hessian文档页面提到的那样，我正在尝试实现文件下载api：

> 文件下载接口
> 
> 包装示例；
> 
> 公共接口下载{公共输入流下载（字符串文件名，输入流数据）；}

但我仍然不知道该怎么做？为什么下载函数需要一个 InputStream 参数并返回另一个 InputStream？

下载方法应该是从服务器上的文件中读取数据并将数据发送出去。这两个 InputStream 指的是什么？

有人可以解释一下吗？非常感谢一个工作示例！

# php - 在 PHP curl_exec 中读取错误正文

> ID：12708348
> 
> 赞同：6
> 
> 时间：2012-10-03T12:20:13.213
> 
> 标签：php, curl, httpresponse, http-error

> **可能重复：**
> [使用 PHP curl 如何获得 400 响应的响应正文](https://stackoverflow.com/questions/6363916/using-php-curl-how-does-one-get-the-response-body-for-a-400-response)

当使用 PHP 的 curl_exec 调用 RESTful API 时，文档说[http://php.net/manual/en/function.curl-exec.php](http://php.net/manual/en/function.curl-exec.php)

> 成功时返回 TRUE，失败时返回 FALSE。但是，如果设置了 CURLOPT_RETURNTRANSFER 选项，它将在成功时返回结果，在失败时返回 FALSE。

当 curl_exec 失败时，它返回 false。但是，远程服务器可能已尝试返回有用的消息来解决该错误。当它只返回 false 时，我们如何使用 curl_exec 访问此消息？

例如，远程 API 可能会返回此消息和 HTTP 400 状态代码：

```
{"Items":[{"Field":"FirstName","Description":"FirstName is required and cannot be null."}]} 
```

目前我无法阅读已返回的此错误消息，而是我得到的都是错误的。我也看过 curl_info 。我确实设置了returntransfer。

在 C# 中，我将使用该`exception.Response.GetResponseStream`方法并编写：

```
 private static string Post(WebClient client, string uri, string postData)
    {
        string response = string.Empty;
        try
        {
            response = client.UploadString(uri, "POST", postData);
        }
        catch (WebException ex)
        {
            var stream = ex.Response.GetResponseStream(); // here
            if (stream != null)
            {
                using (var reader = new StreamReader(stream))
                {
                    response = reader.ReadToEnd();
                }
            }
        }
        return response;
    } 
```

如何在 PHP 中做到这一点？curl_exec 是正确的方法还是应该使用其他方法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-03T12:32:02.653

你应该看看`curl_error`

[http://www.php.net/manual/en/function.curl-error.php](http://www.php.net/manual/en/function.curl-error.php)

# regex - 严格十进制数的正则表达式

> ID：12708351
> 
> 赞同：1
> 
> 时间：2012-10-03T12:20:21.307
> 
> 标签：regex

我想要一个正则表达式来验证 DECIMAL 数字：

有效的 DECIMAL 数字是：

```
+123
123
-123
+123.0000
+123,123.999
.0234
+1123,233,34 
```

无效的 DECIMAL 数字是：

```
+1233+
-1233_
+12.233.33 
```

有没有人可以帮助解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:28:17.747

这个更好：

```
^[+\-]?\d+(,\d{3})*(\.\d*)?$ 
```

加号或减号，可选地，后跟任意数量的数字，可选地后跟任意数量的`,123`部分，可选地后跟小数和更多数字，这将处理除带前导小数的数字之外的任何内容。

```
^[+\-]?(\d+(,\d{3})*(\.\d*)?|\.\d+)$ 
```

添加该其他选项允许具有前导小数的数字，必须后跟数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T12:23:25.053

这适用于所有人：

```
+123
123
-123
+123.0000
+123,123.999
.0234
+1123,233,34 
```

检查演示：

```
^[+\-]?(\d+(,?\d)*(\.\d*)?|\.\d+)$ 
```

**[正则表达式演示](http://regexr.com?32bff)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T12:36:50.747

取决于您的正则表达式支持。

```
^([-+])?(\d+)?(\.\d+)?$ 
```

可选 + 或 -、数字、可选 ',' 后跟更多数字。不幸的是，也会匹配空字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T12:50:43.843

我认为这是你能得到的最简单的：

`^[+-]?\d*\.?\d+$`

小数点后总是需要数字。利用这一事实可以简化问题。

**更新：**起初我没有注意到您还需要处理逗号。这是一个简单的版本，允许在小数点左侧使用逗号。每个逗号前后必须至少有一个数字，但除此之外没有强制执行任何规则（这似乎是您的示例数据的重点）。*实际上，最后一个逗号后需要两位数。*

`^[+-]?(\d+(,\d)?)*\.?\d+$`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T12:36:27.277

你可以用这个

```
^([-+] ?)?[0-9]+(,[0-9]+)?$ 
```

# php - 出现错误 W3 总缓存（版本 0.9.2.4）

> ID：12708352
> 
> 赞同：3
> 
> 时间：2012-10-03T12:20:21.350
> 
> 标签：php, wordpress

安装**W3 Total Cache (Version 0.9.2.4)**后出现错误，如

> Blockquote W3 总缓存错误：正在使用默认设置。配置文件无法读取或不存在。请**保存设置**以创建文件。

保存设置显示为按钮，但即使单击它也没有任何变化。没有任何反应。它甚至不工作。没有 css，js 正在缩小。

有人可以告诉插件有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-07-26T16:46:35.533

从现有服务器迁移到生产服务器后，我在生产服务器上收到相同的错误“ *W3 Total Cache Error: Default settings are in use. The configuration file could not be read or not exist. Please save the settings to create the file* ”新服务器。

我注意到位置**wp-content/w3tc-config**中缺少以下两个文件**master.php**和**master-admin.php**

 **一旦我将这些文件移动到新服务器，错误消息就消失了。

您可能还需要运行以下命令

```
cp /wp-content/plugins/w3-total-cache/wp-content/advanced-cache.php /wp-content/advanced-cache.php
mkdir /wp-content/cache
chmod 777 /wp-content/cache
mkdir /wp-content/w3tc-config
chmod 777 /wp-content/w3tc-config 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T00:06:52.113

您是否尝试过重新安装插件？还是禁用它？

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-19T11:12:53.980

显然我知道我的设置在 5 台服务器上的问题，所以它无法编辑 wp 缓存的配置。现在我需要编辑它的配置并在所有 5 台服务器上同步它**

# android - imageview中位图的波纹效果

> ID：12708355
> 
> 赞同：5
> 
> 时间：2012-10-03T12:20:33.637
> 
> 标签：android

我将图像存储在服务器上，并且正在 Android 设备上获取这些图像。

现在我想在 ImageViews 的 onClick 事件期间对图像提供标准的波纹效果或“水波”效果。

最简单的方法是什么？如果可能，请提供代码。

谢谢。

# java - 替换特定符号

> ID：12708358
> 
> 赞同：-1
> 
> 时间：2012-10-03T12:21:04.857
> 
> 标签：java, android

你好朋友我得到一个字符串

```
 [1-Sept-2012 13:20 1-Oct-2012 13:20  India , 1-Sept-2012 17:42 28-Sept-2012 17:42  India ] 
```

我正在尝试实现此代码，但它不起作用

```
string.replace(",", "$");
string.replace(" ", "@"); 
```

预期输出：-

```
[1-Sept-2012 13:20@1-Oct-2012 13:20@India@$1-Sept-2012 17:42@28-Sept-2012 17:42  India@$] 
```

请帮助我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:23:21.667

这对我有用：

```
String source = "[1-Sept-2012 13:20 1-Oct-2012 13:20  India , 1-Sept-2012 17:42 28-Sept-2012 17:42  India ]";
String dest = source.replace(",", "$").replace(" ", "@"); 
```

也许您忘记将结果分配给`string.replace()`变量？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T12:23:24.257

该`replace`方法返回一个字符串，这是您在代码中没有考虑的内容。这样做应该有效：

```
String string = ...;
string = string.replace(",", "$").replace(" ", "@"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T12:23:35.737

**`String`是一个不可变的对象**，你不能改变它¹ .
您需要将新的字符串对象分配回变量才能“看到”效果。

```
string = string.replace(",", "$"); 
```

这将创建一个新`String`对象并将新对象分配给变量`string`。

* * *

（1）无论如何都不容易，它可以通过反射来完成 - 但这是不建议的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T12:30:19.410

您可以执行以下操作，也可以使用`contains()`这将有助于防止错误。

```
String str="-------your string here---";

if(str.contains(","))
    str =str.replace(",", "$");

if(str.contains(""))
   str=str.replace(" ", "@"); 
```

# blackberry - LWUIT 未捕获的异常：java.lang.OutOfMemoryError（堆栈跟踪不完整）

> ID：12708359
> 
> 赞同：1
> 
> 时间：2012-10-03T12:21:10.590
> 
> 标签：blackberry, java-me, lwuit

我使用 LWUIT 选项卡开发了一个 Rss 应用程序，我想在我的 Lwuit 选项卡屏幕上显示 Rss 提要标题和图像，但是当我运行我的应用程序时，我能够成功显示三个列表（带图像的标题）项目，之后我面临**java.lang.OutOfMemoryError（堆栈跟踪不完整）** 即使存在列表项？任何人都可以帮助......谢谢......

这是我的代码：

```
public class Process {
     protected XMLMidlet midlet;

     Form form1;
     Image image;
     Tabs tabs;
     private List myNewsList;
    private Vector topnews;
    private Vector topstory;
    private Command cmdExit;
    private Command m_backCommand;
      private List newsList;
        private Form form2;
    Process(XMLMidlet midlet) throws IOException {
           this.midlet=midlet;
           topnews = new Vector();
        topstory = new Vector();
       tabs = new Tabs();
        form1 = new Form();
        form2=new Form();
           try {
            newsList = new List(topnews);
            newsList.setScrollVisible(false);
            newsList.setRenderer(new NewsListCellRenderer());   
         m_backCommand = new Command("Back");
        cmdExit = new Command("EXIT");
           tabs.addTab("Topstory", newsList); 
            form1.addComponent(BorderLayout.CENTER, tabs);                           
}
catch(Exception e){
    e.printStackTrace();
}           }

   public void process() {
       try{
   String url = "http://www.teluguone.com/news/tonefeeds/news/news-1.rss";

       form1.show();
       ParseThread myThread = new ParseThread(this);
       myThread.getXMLFeed(url);

        } catch (Exception e) {

        }

    }
   public void addNews(News newsItem) {

try{
            topnews.addElement(newsItem);
            newsList.addActionListener(new ActionListener() {

                public void actionPerformed(ActionEvent ae) {

                    List source = (List) ae.getSource();
                    News selectedNewsItem = (News) source.getSelectedItem();
                    if (selectedNewsItem != null) {
                        displayCompleteNewsScreen(selectedNewsItem);

                    }

                }

            });
}
catch(OutOfMemoryError r){

}
        form1.show();

    }

    private void displayCompleteNewsScreen(News detailNews) {

       try{ 
        form2.removeAll();
        form2.repaint();
        form2.addCommand(m_backCommand);
        form2.addCommandListener(new ActionListener() {

            public void actionPerformed(ActionEvent ae) {
                form1.show();
            }
        });

        HTMLComponent com=new HTMLComponent();
        com.setPreferredSize(new Dimension(300,300));
com.setShowImages(false);

       com.setBodyText(detailNews.getDescription());
       form2.addComponent(com);
        //form2.addComponent(big);
        }
       catch(OutOfMemoryError e){

       }
        form2.show();

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T09:19:54.073

图片有多大？我们在这里谈论的是什么手机？

我敢打赌，您获得的图像在显示之前不会按比例缩小。我相信 LWUIT 中有一些方法可以缩小图像的大小。请记住在将图像添加到表单后处理您创建的临时图像。

# css - ExtJs 3.4 - 无法在 FireFox 的文本字段中选择文本

> ID：12708360
> 
> 赞同：1
> 
> 时间：2012-10-03T12:21:15.113
> 
> 标签：css, firefox, select, extjs

我无法在 Firefox 的 extjs 文本字段中选择键入的文本。我可以在 IE 和 chrome 中选择键入的文本。

该问题仅出现在 FF 中。

对此有任何想法或解决方案吗？

问题出在我的 css 中，它允许用户无法选择文本

```
.unselectable {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
} 
```

但我需要允许用户在不修改上述 css 的情况下选择文本。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:27:49.587

使用`selectText`方法选择文本

```
selectText( [Number start], [Number end] ); 
```

# iphone - Apple 应用内购买验证 .NET Java 21002 异常中的定期付款

> ID：12708362
> 
> 赞同：1
> 
> 时间：2012-10-03T12:21:30.320
> 
> 标签：iphone, in-app-purchase

我们正在尝试验证在 iOS 中进行的 RECURRING 应用内付款的收据。

参考堆栈上的早期问题（http://stackoverflow.com/questions/11085847/keep-getting-21002-java-lang-nullpointerexception-on-apples-verifyreceipt），我设法使用以下代码发送JSON 对象由我们的收据和 sharedSecret 键组成，但我们得到了可怕的 {"status":21002, "exception":"java.lang.NullPointerException"} 错误

```
Dim json As String ="{'receipt-data':'base64encoded receipt data','password':'YYYY'}"

Dim webRequest = System.Net.HttpWebRequest.Create("https://sandbox.itunes.apple.com/verifyReceipt")
    webRequest.ContentType = "text/plain"
    webRequest.Method = "POST"
    Dim byteArray As Byte() = Encoding.UTF8.GetBytes(json)
    webRequest.ContentLength = byteArray.Length
    Using stream = webRequest.GetRequestStream()
        stream.Write(byteArray, 0, byteArray.Length)
        stream.Flush()
    End Using

    Dim resp = webRequest.GetResponse()
    If resp IsNot Nothing Then
        Using sr = New System.IO.StreamReader(resp.GetResponseStream())
            Dim result = sr.ReadToEnd().Trim()
            ' always getting '21002' 'java.lang.NullPointerException'

            Response.Write(result.ToString())
        End Using
    End If 
```

任何帮助表示赞赏！

# matlab - matlab：如果用户按下关闭按钮，则关闭 gui

> ID：12708366
> 
> 赞同：2
> 
> 时间：2012-10-03T12:21:37.937
> 
> 标签：matlab, user-interface

我制作了一个包含 2 个元素的 GUI：文件（文件列表）和选项（我稍后会解释）。

有一个函数调用下面的函数：

```
// asume that this is my 'options'
options{1} = {'Treatment', 't1', 't2'};
options{2} = {'Tree', '1', '2'};
options{3} = {'Replica', 'r1', 'r2', 'r3'};

// asume that this is my 'files' (may be more than 2 images
files{1} = 'C:\Documents and Settings\erezalon\Desktop\gib_proj_02.10.12\fina3_32bit\IMG_4640.JPG';
files{2} = 'C:\Documents and Settings\erezalon\Desktop\gib_proj_02.10.12\fina3_32bit\grapes03.jpg';

mydata = mainGUI(options, files).

// here I want to check 'mydata'. if it is equal to zero or not. 
```

对于每个图像，GUI 在函数“mainGUI”中创建（但每次都会显示一个 GUI，直到用户按下“下一步”）。

我想做接下来的事情：

如果用户按下 GUI 中的关闭按钮，我想停止显示其他 GUI-s 并设置“数据 = 0”。然后，我将检查返回的元素（'mydata'）是什么，如果它等于 0，我将知道用户关闭了 GUI，我将根据需要采取行动。

我试图通过“cmdClose_Callback”来做到这一点，但它不起作用。

假设“文件”=两个图像，所以这是第一个图像的 GUI。

我按下关闭按钮：

![在此处输入图像描述](../Images/8dd92d8e2683b0b19e7461de76cea689.png)

尽管关闭了第一个图像的 GUI，但得到了第二个图像的 GUI。

![在此处输入图像描述](../Images/776cb86b77d7afd1402a15fea4395f4e.png)

我希望当我关闭 GUI 时，其他 GUI-s 不会出现。

这是我的代码：

```
function  data = mainGUI(options, files)
 %# current options
 j = 1;
 ops = cellfun(@(c) c(1), options, 'Uniform',false);
 data{j} =  [ops{1:length(ops)}];
 j = j + 1;

 options = cellfun(@(c) c(2:1:end), options, 'Uniform',false);
 clear ops;
 ops = cellfun(@(c) c(1), options, 'Uniform',false);
 opts =  [ops{1:length(ops)}];

%# create main figure, with plot and options button
hFig = figure('Name','window 1','Visible','Off');
a = 1
callback

%# options button callback function
function callback(o,e)
    a = 2
    %# save current options (sharing data between the two GUIs)
    setappdata(hFig, 'opts',opts);

    %# display options dialog and wait for it

    for k=1: length(files)

            hOptsGUI = secondaryGUI(hFig, options, k, length(files));

            img = imread(files{k});  %# Read the data from image file data
            hAxes = axes('Parent',hOptsGUI,'Units','pixels','Position',[362 242 424 359]);  %#   so the position is easy to define
            image(img,'Parent',hAxes);  %# Plot the image
            set(hAxes,'Visible','off');          %# Turn the axes visibility off

            a = 3

            waitfor(hOptsGUI);

            a = 4
            %# get new options, and update plot accordingly
            opts = getappdata(hFig, 'opts');
             data{j} = opts;
             j = j + 1;
    end
end

end

function hFig = secondaryGUI(hParentFig, options, k, num_files)
%# create figure

a = 5

hFig = figure('Name','Step 3 of 4: Choose data for each image','Menubar','none', 'Resize','off', ...
    'WindowStyle','modal', 'Position',[300 300 1150 600], 'CloseRequestFcn',@cmdClose_Callback);
set(gcf,'NumberTitle','off')
movegui(hFig, 'center');

options = cellfun(@(c) c(end:-1:1), options, 'Uniform',false);
num = length(options);

%# get saved settings
selected = getappdata(hParentFig, 'opts');
a = 6
%# top/bottom panels
hPanBot = uipanel('Parent',hFig, 'BorderType','none', ...
    'Units','normalized', 'Position',[0 0.0 1 0.2]);

hPanTop = uipanel('Parent',hFig, 'BorderType','none', ...
    'Units','normalized', 'Position',[0 0.2 1 0.2]);

%# buttongroups in top panel
hBtnGrp = zeros(1,num);
width = 1/num;
for i=1:num
    %# create button group
    hBtnGrp(i) = uibuttongroup('Parent',hPanTop, ...
        'Units','normalized', 'Position',[(i-1)*width 0 width 1]);
    %# populate it with radio buttons
    height = 1./numel(options{i});
    for j=1:numel(options{i})
        h = uicontrol('Parent',hBtnGrp(i), 'Style','Radio', ...
            'Units','normalized', 'Position',[0.05 (j-1)*height 0.9 height], ...
            'String',options{i}{j});
        %# set initially selected values
        if strcmp(selected{i},options{i}{j})
            set(hBtnGrp(i), 'SelectedObject',h)
        end
    end
end

if k ~= num_files
%# save button in bottom panel
uicontrol('Parent',hPanBot, 'Style','pushbutton', ...
    'Units','normalized', 'Position',[0.3 0.2 0.4 0.2], ...
    'String','next', 'Callback',@callback);

else
    uicontrol('Parent',hPanBot, 'Style','pushbutton', ...
    'Units','normalized', 'Position',[0.3 0.2 0.4 0.2], ...
    'String','start', 'Callback',@callback);
end

%# save button callback function
function callback(o,e)
    a = 7
    %# get selected values
    hObjs = get(hBtnGrp(:), 'SelectedObject');
    vals = get(cell2mat(hObjs),{'String'});

    %# update settings
    setappdata(hParentFig, 'opts',vals);

    close(hFig)
    a = 8
end

 function cmdClose_Callback(hObject,varargin)
    disp(['Close Request coming from: ',get(hObject,'Type')]);
    a = 9

    %do cleanup here
    delete(hFig);
    a = 10

 end
end 
```

如果“文件”有两个图像，我按下第一个图的“下一步”按钮，在第二个图中我关闭，我得到：

```
a = 1
a = 2
a = 5
a = 6
a = 3
a = 7
Close Request coming from: figure
a = 9
a = 10
a = 8
a = 4
a = 5
a = 6
a = 3
Close Request coming from: figure
a = 9
a = 10
a = 4 
```

行上方：hOptsGUI = secondaryGUI(hFig, options, k, length(files)); 我试着放一些线。为了测试线条，我打印了一条合适的消息：

```
if (ishandle(hFig))
     disp('exists');
else disp('was closed');
end; 
```

但它不起作用：/

**对于用户将关闭的每个 GUI，将调用下一个回调：**

```
function callback(o,e)

    %# get selected values
    hObjs = get(hBtnGrp(:), 'SelectedObject');
    vals = get(cell2mat(hObjs),{'String'});

    %# update settings
    setappdata(hParentFig, 'opts',vals);

    %# close options dialog
    close(hFig)

end 
```

**所以我只需要在下一个“for循环”中知道是否调用了这个回调：**

```
for k=1: length(files) 
```

**我怎样才能做到这一点？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:20:02.750

只需在创建第二个图形之前检查是否`hFig1`是有效句柄。

```
if ishandle(hFig1)
    hFig2 = figure(...)
else
    return;      % do something else
end 
```

根据需要重复。

* * *

```
function data = mainGUI(options, files)
    % ...
    % create main figure, with plot and options button
    hFig = figure('Name','window 1','Visible','Off');

    complete = callback;
    if complete == 1
        data = data;  
    else 
        data = 0;
    end

% options button callback function
function complete = callback(o,e)
    %save current options (sharing data between the two GUIs)
    setappdata(hFig, 'opts',opts);

    % display options dialog and wait for it
    complete = 0;
    for k = 1 : length(files)
        hOptsGUI = secondaryGUI(hFig, options, k, length(files));
        % ...
    end
    % we reached the end of the loop!
    complete = 1;
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T14:13:35.847

我成功了！

我使用 setappdata 和 getappdata 来了解是否调用了第二个回调。

@Derek ，**Derek，非常感谢您的帮助，感谢您为我花费了很多时间！**

```
function  data = mainGUI(options, files)
 %# current options
 j = 1;
 ops = cellfun(@(c) c(1), options, 'Uniform',false);
 data{j} =  [ops{1:length(ops)}];
 j = j + 1;

 options = cellfun(@(c) c(2:1:end), options, 'Uniform',false);
 clear ops;
 ops = cellfun(@(c) c(1), options, 'Uniform',false);
 opts =  [ops{1:length(ops)}];

%# create main figure, with plot and options button
hFig = figure('Name','window 1','Visible','Off');
callback

%# options button callback function
function callback(o,e)
    %# save current options (sharing data between the two GUIs)
    setappdata(hFig, 'opts',opts);

    %# display options dialog and wait for it

    for k=1: length(files)
            hOptsGUI = secondaryGUI(hFig, options, k, length(files));

            img = imread(files{k});  %# Read the data from your image file
            hAxes = axes('Parent',hOptsGUI,'Units','pixels','Position',[362 242 424 359]);  %#   so the position is easy to define
            image(img,'Parent',hAxes);  %# Plot the image
            set(hAxes,'Visible','off');          %# Turn the axes visibility off

            out = 'FALSE';
            setappdata(hFig,'some_var',out);
            % show the images
            %%Im = imread(files{k});
            %%AxesH = axes('Units', 'pixels', 'position', [0.5, 10, 400, 260], 'Visible', 'off');
            %%image('Parent', AxesH, 'CData', Im); %# add other property-value pairs as needed

            waitfor(hOptsGUI);

            some_other_var = getappdata(hFig,'some_var');

            if (strcmp(some_other_var, 'OK') == 1)
                 %# get new options, and update plot accordingly
                opts = getappdata(hFig, 'opts');
                data{j} = opts;
                j = j + 1;
            else
                k = length(files);
                data = 0;
                return;
            end;
    end
end
end

function hFig = secondaryGUI(hParentFig, options, k, num_files)
%# create figure

hFig = figure('Name','Step 3 of 4: Choose data for each image','Menubar','none', 'Resize','off', ...
    'WindowStyle','modal', 'Position',[300 300 1150 600]);
set(gcf,'NumberTitle','off')
movegui(hFig, 'center');

options = cellfun(@(c) c(end:-1:1), options, 'Uniform',false);
num = length(options);

%# get saved settings
selected = getappdata(hParentFig, 'opts');

%# top/bottom panels
hPanBot = uipanel('Parent',hFig, 'BorderType','none', ...
    'Units','normalized', 'Position',[0 0.0 1 0.2]);

hPanTop = uipanel('Parent',hFig, 'BorderType','none', ...
    'Units','normalized', 'Position',[0 0.2 1 0.2]);

%# buttongroups in top panel
hBtnGrp = zeros(1,num);
width = 1/num;
for i=1:num
    %# create button group
    hBtnGrp(i) = uibuttongroup('Parent',hPanTop, ...
        'Units','normalized', 'Position',[(i-1)*width 0 width 1]);
    %# populate it with radio buttons
    height = 1./numel(options{i});
    for j=1:numel(options{i})
        h = uicontrol('Parent',hBtnGrp(i), 'Style','Radio', ...
            'Units','normalized', 'Position',[0.05 (j-1)*height 0.9 height], ...
            'String',options{i}{j});
        %# set initially selected values
        if strcmp(selected{i},options{i}{j})
            set(hBtnGrp(i), 'SelectedObject',h)
        end
    end
end

if k ~= num_files
%# save button in bottom panel
uicontrol('Parent',hPanBot, 'Style','pushbutton', ...
    'Units','normalized', 'Position',[0.3 0.2 0.4 0.2], ...
    'String','next', 'Callback',@callback);
else
    uicontrol('Parent',hPanBot, 'Style','pushbutton', ...
    'Units','normalized', 'Position',[0.3 0.2 0.4 0.2], ...
    'String','start', 'Callback',@callback);
end
%# save button callback function
function callback(o,e)
    out = 'OK';
    setappdata(hParentFig,'some_var',out);
    %# get selected values
    hObjs = get(hBtnGrp(:), 'SelectedObject');
    vals = get(cell2mat(hObjs),{'String'});

    %# update settings
    setappdata(hParentFig, 'opts',vals);

    %# close options dialog
    close(hFig)
end

function cmdClose_Callback(hObject,varargin)  
    %do cleanup here
    delete(hFig);
end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T12:34:39.917

没有调用从第一个 GUI 关闭图窗。

您可能希望在函数`close(hFig)`末尾添加一个调用。`mainGUI`

# winapi - 如何使用缓冲处理窗口消息

> ID：12708367
> 
> 赞同：0
> 
> 时间：2012-10-03T12:21:45.457
> 
> 标签：winapi, hook, barcode-scanner

我有一个 WH_GETMESSAGE 钩子可以捕获 WM_KEYDOWN 和 WM_INPUT（现在只有 WM_KEYDOWN），我需要一种方法来测量 WM_KEYDOWN 之间的时间间隔，以查看用户输入的速度。如果输入太快，我确实需要放弃整个击键（即输入实际上不是来自用户，而是来自某些 HID 键盘设备，如条形码扫描仪）。我需要做的是对于每个符号，我将等待 30 毫秒，然后如果没有应用其他符号，我需要将它发送到它的意思的窗口。并且需要对每个 WM_KEYDOWN 执行该检查。如果应用了新符号，我会将其与任何其他符号一起推送到我的队列中，这些符号将在消息之间的 30 毫秒限制内进行（实际上我在我的计算机上进行了测试，输入符号需要 31-32 毫秒，条形码扫描仪需要 15 -16 毫秒就足够了）。

我想出了以下算法： 1\. 如果传入消息是 WM_KEYDOWN - 存储它（有时间偏离）。2\. 如果下一条传入消息不是 WM_KEYDOWN 或超过时间限制 - 将存储的消息发送给它的收件人，如果它是 WM_KEYDOWN 则存储当前消息 - 转到步骤 1。 3\. 如果下一条消息在 30 毫秒限制内到达 - 也存储它。4\. 如果下一条消息是 VK_RETURN 或序列长于 128 个符号 - 删除当前序列并将其存储为条形码。转到步骤 1。

该算法的当前缺陷是 sendMessage 的事情。我同时使用了 sendMessage 和 postMessage 但他们都只是将它重新发送到我的钩子程序（我猜这很明显）。有什么方法可以将此消息直接发送到要发送的窗口？

或者也许有其他解决方案可以解决我的问题？

我的解释可能看起来模棱两可，所以我只写我需要实现的内容：我需要在条形码扫描仪输入实际到达窗口过程之前拦截它，因此来自扫描仪的 WM_KEYDOWN 消息不会到达目标窗口。条码消息通常在单个 WM_KEYDOWN 之间有 15-16 毫秒的间隔，并以 VK_RETURN 结束。

我还需要准确地使用 WH_GETMESSAGE（或类似的钩子，它可以让我同时捕获 WM_INPUT 和 WM_KEYDOWN）。需要 WM_INPUT 来区分来自各种设备的输入（基本上我将枚举所有 HID 键盘，确定它们中的哪些发送条形码，如果发生此类事件，我会将设备标记为条形码扫描仪并将其 VID 和 PID 存储到本地数据库，它将被使用对于他人）。

# android - Android - 出现 android.os.NetworkOnMainThreadException 错误的 Web 服务客户端

> ID：12708368
> 
> 赞同：0
> 
> 时间：2012-10-03T12:22:01.743
> 
> 标签：android, webservice-client

我的目标是从 Android 设备调用 .Net 网络服务（.asmx）。

.Net Webservice 使用 .net 测试客户端和 SOAPUI 应用程序进行测试。

我正在使用 Eclipse 构建 android 应用程序 - 包括用于 Web 服务调用的 KSOAP2 项目。应用程序有`android.permission.INTERNET`标签包含在用户权限部分。

我有两个问题
[1] 如果我从（下面的代码）调用 webservice 方法，应用程序会抛出“android.os.NetworkOnMainThreadException”错误`onCreate()`（我在互联网上看到的许多示例都是相同的方法，但我没有知道为什么它在我的项目中失败）

[2] 为了解决上述问题，我在“MainActivity”中创建了一个类，但现在我在线收到“找不到源”消息`client.execute("some text as input")` （检查了构建路径，有对 KSOAP2 jar 文件的引用并且没有编译错误）

请问正确的方法是什么以及如何解决这个问题？谢谢你的帮助

**[问题 1] 的代码**

```
 //This code for calling .net webservice from Android devide.. and throws "android.os.NetworkOnMainThreadException" whilst calling.

    package com.example.wsclient;

    import org.ksoap2.SoapEnvelope;
    import org.ksoap2.serialization.SoapObject;
    import org.ksoap2.serialization.SoapSerializationEnvelope;
    import org.ksoap2.transport.HttpTransportSE;

    import android.os.Bundle;
    import android.app.Activity;
    import android.app.AlertDialog;
    import android.view.Menu;
    import android.widget.TextView;

    public class MainActivity extends Activity {
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            String SOAP_ACTION = "http://mycomp.org/GetParticipantVote";
            String METHOD_NAME = "GetParticipantVote";
            String NAMESPACE = "http://mycomp.org/";
            String URL = "http://10.0.2.2:8080/WSRating.asmx";

            try {
                SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
                request.addProperty("sID", "My_name");
                request.addProperty("sRate", "9");

                SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                envelope.dotNet=true;

                envelope.setOutputSoapObject(request);
                HttpTransportSE  androidHttpTransport = new HttpTransportSE (URL);
                androidHttpTransport.call(SOAP_ACTION, envelope);
                SoapObject result=(SoapObject)envelope.getResponse();

                //To get the data.
                String resultData=result.getProperty(0).toString();

                AlertDialog alertDialog = new AlertDialog.Builder(this).create();
                alertDialog.setTitle("Webservice Client");
                alertDialog.setMessage("Webservice Resp : " +  resultData);
                alertDialog.show();

            }
            catch (Exception eE) {

                AlertDialog alertDialog1 = new AlertDialog.Builder(this).create();
                alertDialog1.setTitle("Webservice Client");
                alertDialog1.setMessage("Error : " +  eE.getMessage());
                alertDialog1.show();
           }
        }
        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            getMenuInflater().inflate(R.menu.activity_main, menu);
            return true;
        }
    } 
```

**[问题 2] 的代码——**

```
 package com.example.wsclient;

            import org.ksoap2.SoapEnvelope;
            import org.ksoap2.serialization.SoapObject;
            import org.ksoap2.serialization.SoapSerializationEnvelope;
            import org.ksoap2.transport.HttpTransportSE;

            import android.os.Bundle;
            import android.app.Activity;
            import android.app.AlertDialog;
            import android.view.Menu;
            import android.widget.TextView;

            public class MainActivity extends Activity {
                @Override
                public void onCreate(Bundle savedInstanceState) {
                    super.onCreate(savedInstanceState);

                    CallWS client = new CallWS();
                    client.execute("some text as input");

                }
                @Override
                public boolean onCreateOptionsMenu(Menu menu) {
                    getMenuInflater().inflate(R.menu.activity_main, menu);
                    return true;
                }

                    /* AsyncTask class to remove android.os.NetworkOnMainThreadException error */
                    private class CallWS extends AsyncTask<String, Integer, String> {

                         protected String doInBackground(String... sValues) {

                                String resultData;

                                String SOAP_ACTION = "http://mycomp.org/GetParticipantVote";
                                String METHOD_NAME = "GetParticipantVote";
                                String NAMESPACE = "http://mycomp.org/";
                                String URL = "http://10.0.2.2:8080/WSRating.asmx";

                                try {
                                    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
                                    request.addProperty("sID", "My_name");
                                    request.addProperty("sRate", "9");

                                    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                                    envelope.dotNet=true;

                                    envelope.setOutputSoapObject(request);
                                    HttpTransportSE  androidHttpTransport = new HttpTransportSE (URL);
                                    androidHttpTransport.call(SOAP_ACTION, envelope);
                                    SoapObject result=(SoapObject)envelope.getResponse();

                                    //To get the data.
                                    resultData =result.getProperty(0).toString();
                                }
                                catch (Exception eE) {
                                    resultData = "Error : " +  eE.getMessage();
                               }

                               return resultData
                         }

                         protected void onProgressUpdate(Integer... values) {

                         }

                         protected void onPostExecute(String result) {
                             // do something here to display the result...
                         }
                     }

                     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T05:08:31.037

您不能在主线程上执行网络操作。结帐
[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:25:56.400

我最好的猜测是您正在 ICS 上测试此解决方案。

您可以使用 Strick 模式进行快速测试：http: [//developer.android.com/reference/android/os/StrictMode.html](http://developer.android.com/reference/android/os/StrictMode.html)。

在 ICS 中，禁止 UI 上的所有网络操作，这就是为什么您需要重建它以使用 AsyncTasks，[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-03T09:27:23.633

只需使用以下代码覆盖...

StrictMode.ThreadPolicy 策略 = new StrictMode.ThreadPolicy.Builder().permitAll().build(); StrictMode.setThreadPolicy(policy);

并且还使用...

# c# - 创建文件的副本，如 Windows7 通常做的

> ID：12708372
> 
> 赞同：2
> 
> 时间：2012-10-03T12:22:40.013
> 
> 标签：c#, wpf, windows-7, .net-3.5, copy

有时，在我的应用程序中，我想创建一个已经存在的文件的副本，但我不想测试该文件是否已经存在，我只想创建该文件的副本，就像 Windows 7 一样.

例如：文件**tips.txt**。当我的应用程序复制它时，将创建另一个名为**Tips - copy.txt**的文件。之后，如有必要，一个“副本副本”**提示 - copy - copy.txt**。

在这种情况下我能做些什么吗？

Obs：在这个应用程序中，我使用的是 .NET 3.5 和 WPF。

Obs2：我提出这个问题是因为我认为 .NET 中已经存在类似的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T12:33:26.093

您应该提取文件名和扩展名，然后使用新的格式化名称执行简单的 File.Copy

```
 string fileName = "tips.txt"; 
   string file = Path.GetFileNameWithoutExtension(fileName);
   string ext = Path.GetExtension(fileName);
   File.Copy(fileName, string.Format("{0} - Copy{1}", file, ext); 
```

如果你有一个完整的路径可以复制，事情会变得有点复杂

```
 string fileName = "C:\\test\\tips.txt"; 
   string path = Path.GetDirectoryName(fileName);
   string file = Path.GetFileNameWithoutExtension(fileName);
   string ext = Path.GetExtension(fileName);
   File.Copy(fileName, Path.Combine(path, string.Format("{0} - Copy{1}", file, ext)); 
```

但如果你真的想模仿 Windows Explorer 的行为，我们应该这样做：

```
string fileName = "C:\\test\\tips.txt"; 
string path = Path.GetDirectoryName(fileName);
string file = Path.GetFileNameWithoutExtension(fileName);
string ext = Path.GetExtension(fileName);
if(file.EndsWith(" - Copy")) file = file.Remove(0, file.Length - 7);
string destFile = Path.Combine(path, string.Format("{0} - Copy{1}", file, ext)); 
int num = 2;
while(File.Exists(destFile))
{
    destFile = Path.Combine(path, string.Format("{0} - Copy ({1}){2}", file, num, ext)); 
    num++;
}
File.Copy(fileName, destFile); 
```

如果 Windows 资源管理器复制以“-Copy”结尾的文件，它会向目标文件添加一个渐进式编号，而不是另一个“-Copy”。
您还应该考虑到字符串“Copy”是本地化的，因此它在非英语版本的操作系统中会发生变化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T12:26:34.827

不确定这是否正是您的意思，但是：

```
string fileName = "tips.txt";
File.Copy(fileName, string.format("{0} - copy", fileName); 
```

或者：

```
File.Copy(fileName, string.format("{0} - copy{1}", 
    Path.GetFileNameWithoutExtension(fileName),
    Path.GetExtension(fileName)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-03T12:34:49.033

`System.IO`如果您想获得与 Windows 复制对话框完全相同的语义，除了建议在命名空间中使用类的其他答案之外，您还可以使用[IFileOperation](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775771%28v=vs.85%29.aspx) COM 对象。这是它的[托管包装器](http://msdn.microsoft.com/en-us/magazine/cc163304.aspx)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T12:26:00.743

您可以使用`File.Copy` [http://msdn.microsoft.com/en-us/library/9706cfs5.aspx](http://msdn.microsoft.com/en-us/library/9706cfs5.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-03T12:29:56.553

关于什么 ：

```
 public static void CopyFileLikeWin7(string pathIn,string fileName, string pathOut)
    {
        string potentialFileName = Path.Combine(pathOut,fileName);
        if(File.Exists(potentialFileName))
        {
            CopyFileLikeWin7(pathIn, Path.GetFileNameWithoutExtension(fileName) + "-copy" + Path.GetExtension(fileName), pathOut);
        }
        else
        {
            File.Copy(pathIn,potentialFileName);
        }
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-03T12:31:24.673

怎么样

```
string fileName = "tips.txt";
string filenamewithoutext = Path.GetFileNameWithoutExtension(fileName);
string ext = Path.GetExtension(fileName);
File.Copy(fileName, string.format("{0} - Copy{1}", filenamewithoutext, ext); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-03T12:26:47.013

好的，不测试。只需复制文件，不处理异常

```
try
{
File.Copy("",""); 
} 
finally 
{
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-03T12:29:23.823

像这样的东西？我认为有很多更简单的方法可以做到这一点。

```
string destination = "";
var fileInfo = new FileInfo(@"c:\temp\tips.txt");
var ext = fileInfo.Extension;
var filename = fileInfo.Name.Remove(fileInfo.Name.Length - 4);
File.Copy(fileInfo.FullName, destination + filename + " - Copy" + ext); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-11T09:22:48.830

关于史蒂夫的回答（“但如果你真的想模仿 Windows 资源管理器的行为，我们应该这样做：”），我发现它非常有用，我有一条评论：

该行：

```
if (file.EndsWith(" - Copy")) file = file.Remove(0, file.Length - 7); 
```

应改为：

```
if (file.EndsWith(" - Copy")) file = file.Remove(file.LastIndexOf(" - Copy"), file.Length - 7); 
```

，因为如果文件以“ - Copy”结尾，我们会丢失文件名并仅保留“Copy”。

# symfony1 - 复制具有可排序对象的关系的对象会引发重复条目错误

> ID：12708373
> 
> 赞同：0
> 
> 时间：2012-10-03T12:22:40.340
> 
> 标签：symfony1, doctrine

在一个旧项目中使用`symfony 1.4`有一个对象`Product`链接到其他对象，例如`Translation` `ProductPlatform`...

**我想做的是`copy`Product 对象及其所有关系。**

很简单`$product->copy(true)` `BUT`

它不会复制关系，所以我需要这样做：

```
 $this->loadReference('Translation');
  $this->loadReference('ProductPlatforms');

  foreach ($this->ProductPlatforms as $platform) {
    $platform->loadReference('Translation');
  }

  $newProduct = $this->copy(true);
  $newProduct->save();

  return $newProduct; 
```

抛出的错误是这样的：

```
SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '1-131' for key 'product_platform_position_sortable_idx' 
```

我不明白的是以下请求：

```
SELECT p.id AS p__id, p.position AS p__position FROM product_platform p 
WHERE (p.product_id = 'EndNote (copie)') ORDER BY p.position desc LIMIT 1;
----
INSERT INTO product_platform (publish_configuration, product_id, platform_id, position) 
VALUES ('1', '131', '1', '1') 
```

然后，它为另一个对象重新插入相同的位置：

```
INSERT INTO product_platform (publish_configuration, product_id, platform_id, position) 
VALUES ('1', '131', '3', '1'); 
```

为什么在`Where`子句中我的对象的名称而不是 ID `WHERE (p.product_id = 'EndNote (copie)')`。**我认为这就是它尝试插入相同值的原因。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:00:51.533

好的，这是 Sortable 行为的一个错误，我们发送了一个 PR：

[https://github.com/bshaffer/csDoctrineActAsSortablePlugin/pull/25](https://github.com/bshaffer/csDoctrineActAsSortablePlugin/pull/25)

# asp.net - SharePoint 2010，如何更改 webpart 的样式？

> ID：12708374
> 
> 赞同：0
> 
> 时间：2012-10-03T12:22:40.410
> 
> 标签：asp.net, sharepoint-2010

我是 SP 的新手，我在 webpart 中有一个 listView，我需要将它放大到 100% 的宽度。我需要一个简单的方法来做到这一点。

人们一直在谈论SP css，并防止影响系统中的所有WebPart

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:26:20.483

首先，您需要将其加载到占据整个页面宽度的 Web 部件区域中。然后，您可以使用浏览器 UI 中的外观选项卡来进一步调整 Web 部件的外观。您可能需要也可能不需要使用 CSS 来调整它周围的填充。

如果 ListView 本身没有占用 100% 的 Web 部件，请尝试为其添加固定宽度，这样可以省去为 Web 部件本身调整任何 CSS 的麻烦。

如果您需要应用自定义 CSS，您有两种选择：

(1) 通过浏览器 UI（母版页管理员）添加备用样式表。理想情况下，您会将您的品牌部署为功能的一部分，这为您提供了对品牌工件进行源代码控制的好处：

[使用 Visual Studio 2010 开发 SharePoint 2010 功能](http://weblogs.asp.net/sreejukg/archive/2011/10/27/developing-sharepoint-2010-features-using-visual-studio-2010.aspx)

[创建特征](http://blog.sharepointexperience.com/servermstpageforsitecollect_feature/)

(2) 使用 SharePoint Designer 应用自定义 CSS。

# html - 没有 100% 宽度的显示块

> ID：12708381
> 
> 赞同：112
> 
> 时间：2012-10-03T12:23:14.117
> 
> 标签：html, width, block, css

我想使用 display 属性设置一个 span 元素出现在另一个元素下方。我尝试应用 inline-block 但没有成功，并认为如果我设法避免给元素提供 100% 的宽度（我不希望元素“伸展”），我可以使用 block。这可以做到吗，或者如果没有，解决这类问题的好的实践是什么？

示例：我想在每个帖子末尾设置“阅读更多”链接的新闻列表（注意：`<a>`而不是`<span>`）

```
<li>
<span class="date">11/15/2012</span>
<span class="title">Lorem ipsum dolor</span>
<a class="read-more">Read more</a> 
</li> 
```

更新：已解决。在 CSS 中，应用

```
li {
    clear: both;
}
li a {
    display: block;
    float: left;
    clear: both;
} 
```

* * *

## 回答 #1

> 赞同：176
> 
> 时间：2014-10-15T17:47:40.943

使用`display: table`.

此答案必须至少为 30 个字符；我输入了 20，所以这里还有一些。

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2012-10-03T12:57:25.803

如果我正确理解您的问题，以下 CSS 会将您的 a 浮动到跨度下方并防止其具有 100% 的宽度：

```
a {
    display: block; 
    float: left; 
    clear: left; 
} 
```

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2017-09-13T13:46:00.407

您可以使用：

`width: max-content;`

注意：支持有限，[请在此处](http://caniuse.com/#search=max-content)查看支持浏览器的完整细分

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-10-03T12:29:10.190

我会将每一行保留在自己的 div 中，所以...

```
<div class="row">
    <div class="cell">Content</div>
</div>
<div class="row">
    <div class="cell">Content</div>
</div> 
```

然后对于 CSS：

```
.cell{display:inline-block} 
```

没有看到你的原始代码很难给你一个解决方案。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-11-01T06:30:06.003

再一次：一个可能有点太晚的答案（但对于那些找到这个页面的人来说）。

而不是 `display:block;`使用`display:inline-block;`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-05-27T15:46:27.860

试试这个：

```
li a {
    width: 0px;
    white-space:nowrap;
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-01-05T23:40:51.337

我遇到了这个问题，我这样解决了：

```
.parent {
  white-space: nowrap;
  display: table;
}

.child {
  display: block;
} 
```

“空白：nowrap”确保孩子的孩子（如果有的话）在没有足够空间的情况下不会换行。

没有“空白：nowrap”：

[![在此处输入图像描述](../Images/010946b2228e073b36cef9f04f5f4591.png)](https://i.stack.imgur.com/C6v7b.png)

使用“空白：nowrap”：

[![在此处输入图像描述](../Images/457ddfecc50cc36e51a138dc47585f21.png)](https://i.stack.imgur.com/3prwg.png)

* * *

编辑：对于我来说，它似乎也可以在没有子块部分的情况下工作，所以这似乎工作正常。

```
.parent {
  white-space: nowrap;
  display: table;
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-06-06T17:17:32.290

**您可以使用以下内容：**

```
display: inline-block; 
```

在链接和其他元素上效果很好。

# java - Java中的多位TCP请求

> ID：12708383
> 
> 赞同：0
> 
> 时间：2012-10-03T12:23:20.913
> 
> 标签：java, tcp, bit, operations

我正在尝试用 Java 向已经可用的现有 TCP 服务器发出 tcp 请求。接口规范为：

```
Field           Length      Type
Length          2 bytes     16-bits binary
Message ID      1 byte      8-bits binary
MSGTYPE         1 byte      8-bits binary
Variable1       4 bytes     32-bits binary
Variable2       30 bytes    ASCII
Variable3       1 byte      8-bits binary 
```

我了解如何使用 BigInteger 将字符串转换为二进制。

```
String testing = "Test Binary";
byte[] bytes = testing.getBytes();
BigInteger bi = new BigInteger(bytes);
System.out.println(bi.toString(2)); 
```

我的理解是，如果我想发出 TCP 请求，我会先

1.  需要将每个二进制文件转换为字符串
2.  将值附加到 StringBuffer。

不幸的是，我的理解有限，所以我想要一些关于正确创建 TCP 请求的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T12:27:47.090

我不会使用 String（因为你有二进制数据）、StringBuffer（曾经）或 BigInteger（因为它不是它的设计用途）。

假设您有一个 Big Endian 数据流，我将使用 DataOutputStream

```
DataOutptuStream out = new DataOutputStream(new BufferedOutputStream(socket.getOutputStream()));

out.writeShort(length);
out.write(messageId);
out.write(msgtype);
out.write((var1+"\0\0\0\0").substring(0, 4).getBytes("ISO-8859-1"));
out.write(var2.getBytes("ISO-8859-1"));
out.write(var2);

out.flush(); // optionally. 
```

如果你有一个小端协议，你需要使用 ByteBuffer 在这种情况下我会使用阻塞 NIO SocketChannel。

顺便说一句，我会使用`ISO-8859-1`（8 位字节）而不是`US-ASCII`（7 位字节）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:28:30.190

你走错了方向。消息规范声明例如第一个字段是 16 位二进制的事实并不意味着您将发送二进制字符串。您将只发送一个（无符号？）16 位数字，事实上，它将被编码为二进制，因为它的内部表示可能就是那个数字。

`DataOutputStream`通过类似 in写入套接字时

```
int value = 123456;
out.writeInt(value); 
```

你已经用二进制写了。

# javascript - 内部 JavaScript 代码调用没有 iframe 的 html 页面

> ID：12708384
> 
> 赞同：0
> 
> 时间：2012-10-03T12:23:22.900
> 
> 标签：javascript, html

我想在 JavaScript 代码中调用 html 页面并将页面分配给没有 iframe 的变量。

谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:29:38.993

我会使用 jquery 通过 $.get 方法解决这个问题。

```
var externalHtml;
$.get('external_page.html', function(data){
    externalHtml = data;
}); 
```

# javascript - Javascript调用差异

> ID：12708387
> 
> 赞同：0
> 
> 时间：2012-10-03T12:23:25.067
> 
> 标签：javascript, jquery, internet-explorer

以下陈述之间有什么区别？

```
<tr onclick="javascript:class1.function1()">
<td>HideAlert</td>
</tr> 
```

和

```
<tr onclick="class1.function1()">
<td>HideAlert</td>
</tr> 
```

我用第二种调用函数的方法创建了一个网页，并在 Windows 2003 Server 附带的 Internet Explorer 6.0 中进行了测试。该函数未被调用。当我在浏览器地址栏中输入“javascript:class1.function1()”时，该功能起作用了。用上述方式调用函数有什么区别吗？

脚本如下：

```
<script type="text/javascript">
var class1 = function(obj) {
this.val1 = obj.val1;
}
class1.function1 = function() {
$('#alertDiv').fadeOut('slow', function() {
});
</script> 
```

jquery版本是1.4.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:26:48.353

在地址栏中（或在`href`属性中，或常规 URL 可能出现的任何其他位置）中，`javascript:`是标识要在当前页面中运行的一段 JavaScript 的协议。

在`onclick`属性（或任何其他脚本上下文）中，`javascript:`是一个可以像这样使用的标签：

```
javascript:
for( var i=0; i<100; i++) {
    while(true) {
        continue javascript;
    }
}
// bad example, but it works and doesn't cause an infinite loop! 
```

换句话说，`onclick="javascript:..."`是不必要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:25:50.720

第一个版本有一个完全多余的[标签](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/label)。

他们的行为应该是相同的。

# ipv6 - 如何获取本地 IPv6 地址（LSB 合规性）

> ID：12708390
> 
> 赞同：2
> 
> 时间：2012-10-03T12:23:31.587
> 
> 标签：ipv6, lsb

ioctl 不适用于 IPv6。

getifaddres - LSB 不支持

netlink 套接字 - LSB 不支持

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:02:20.907

1) 可能在 LSB 4.1 版本之后：

[https://lsbbugs.linuxfoundation.org/show_bug.cgi?id=2143](https://lsbbugs.linuxfoundation.org/show_bug.cgi?id=2143)

2）解析`/proc/net`树。

3) 使用 POSIX.1-2001 API [getaddrinfo](http://www.kernel.org/doc/man-pages/online/pages/man3/getaddrinfo.3.html)但与 Win32 相比支持相当有限，Win32 明确详细说明了[枚举接口](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738520%28v=vs.85%29.aspx)的操作。

# php - 在 Laravel 中切换语言的最佳逻辑是什么？

> ID：12708392
> 
> 赞同：30
> 
> 时间：2012-10-03T12:23:36.177
> 
> 标签：php, localization, laravel

我正在使用 Laravel 本地化来提供两种不同的语言。我已经设置了所有路径，mydomain.com/en/bla 提供英语并存储“en”会话变量，mydomain.com/he/bla 提供希伯来语并存储“he”会话变量。但是，我想不出一种体面的方式来提供语言切换链接。这将如何工作？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-10T19:40:22.737

我通过将其添加到 routes.php 中的 before 过滤器解决了我的问题：

```
// Default language ($lang) & current uri language ($lang_uri)
$lang = 'he';
$lang_uri = URI::segment(1);

// Set default session language if none is set
if(!Session::has('language'))
{
    Session::put('language', $lang);
}

// Route language path if needed
if($lang_uri !== 'en' && $lang_uri !== 'he')
{
    return Redirect::to($lang.'/'.($lang_uri ? URI::current() : ''));
}
// Set session language to uri
elseif($lang_uri !== Session::get('language'))
{
    Session::put('language', $lang_uri);
}

// Store the language switch links to the session
$he2en = preg_replace('/he\//', 'en/', URI::full(), 1);
$en2he = preg_replace('/en\//', 'he/', URI::full(), 1);
Session::put('he2en', $he2en);
Session::put('en2he', $en2he); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-20T08:05:36.310

这是我最初在 laravel 论坛上发布的帖子，但也许它会对其他人有所帮助，所以我也将其发布在这里。

我在为我的应用程序构建一个简单的语言切换器时遇到了一些麻烦，而且论坛上的信息有点旧（一些帖子），所以我制作了这段简单的代码，它使得在你的应用程序上更改语言变得超级容易飞。

我的观点中有以下语言字符串：

```
{{ __('languagefile.the_language_string'); }} 
```

我得到了带有 URL 的语言，我认为这是最好的方式，它也有利于 seo 和人们共享的链接。例子：

```
www.myapp.com/fi/support (Finnish)
www.myapp.com/en/support (English)
www.myapp.com/sv/support (Swedish) 
```

好的，所以问题是我想要一种简单的方法来即时更改语言，而不必弄乱会话和 cookie。下面是我是如何做到的：

在您的库文件夹中创建一个名为**chooselang.php的库**

在里面插入这段代码：

```
class Chooselang extends HTML {
    /**
     * Generate a Language changer link.
     *
     * <code>
     *      // Generate a link to the current location,
     *      // but still change the site langauge on the fly
     *      // Change $langcode to desired language, also change the Config::set('application.language', 'YOUR-LANG-HERE')); to desired language
     *      // Example
     *      echo Chooselang::langslug(URI::current() , $langcode = 'Finnish' . Config::set('application.language', 'fi'));
     * </code>
     *
     * @param  string  $url
     * @param  string  $langcode
     * @param  array   $attributes
     * @param  bool    $https
     * @return string
     */

    public static function langslug($url, $langcode = null, $attributes = array(), $https = null)
    {
        $url = URL::to($url, $https);

        if (is_null($langcode)) $langcode = $url;

        return '<a href="'.$url.'"'.static::attributes($attributes).'>'.static::entities($langcode).'</a>';
    }

} 
```

在此之后，您就可以生成您的 url 切换器 URL:s。只需像添加任何其他 Blade 链接一样添加它们。

示例如何生成芬兰语、瑞典语和英语的链接（使用 Blade）

```
 {{ Chooselang::langslug(URI::current() , $langcode = 'Fin' . Config::set('application.language', 'fi')); }}
  {{ Chooselang::langslug(URI::current() , $langcode = 'Swe' . Config::set('application.language', 'sv')); }}
  {{ Chooselang::langslug(URI::current() , $langcode = 'Eng' . Config::set('application.language', 'en')); }} 
```

以上将生成始终在当前页面上的 URL:s，并将 lang slug 更改为您想要的。这样，语言就会更改为您想要的语言，并且用户自然会停留在同一页面上。默认语言 slug 永远不会添加到 url。

生成的 url 看起来像：

```
<a href="http://localhost/laravel/public/support">Fin</a>
<a href="http://localhost/laravel/public/sv/support">Swe</a>
<a href="http://localhost/laravel/public/en/support">Eng</a> 
```

PS。如果您将它们添加到主模板文件中，这些链接将特别有用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-03T14:27:32.587

您可以有一个 Route to hand 语言更改，例如：

`Route::get('translate/(:any)', 'translator@set');`

然后在控制器中的`set`动作中`translator`可以改变会话，这取决于通过 URL 传递的语言代码。

您还可以使用更改配置设置

`Config::set('application.language', $url_variable');`

**控制器示例 - translate.php**

```
public function action_set($url_variable)
{
     /* Your code Here */
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-03-17T15:42:06.893

Just in case for future users if you want to use package for localization There is a great package at [https://github.com/mcamara/laravel-localization](https://github.com/mcamara/laravel-localization). which is easy to install and has many helpers.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-09-03T08:21:36.653

这个问题仍然出现在 Google 搜索中，所以如果您使用的是 Laravel 4 或 5，以及 mcamara/laravellocalization，这就是答案。

```
<ul>
    <li class="h5"><strong><span class="ee-text-dark">{{ trans('common.chooselanguage') }}:</span></strong> </li>
        @foreach(LaravelLocalization::getSupportedLocales() as $localeCode => $properties)
            <li>
               <a rel="alternate" hreflang="{{$localeCode}}" href="{{LaravelLocalization::getLocalizedURL($localeCode) }}">
                   <img src="/img/flags/{{$localeCode}}.gif" /> {{{ $properties['native'] }}}
               </a>
           </li>
        @endforeach
</ul> 
```

请注意，此示例显示标志（在 public/img/flags/{{locale}}.gif 中），要使用它，您需要一些 .css，但您可以根据需要修改它以显示文本。 .

供参考。mcamara/laravellocalization 文档有示例和很多帮助程序，因此请查看 github 上的文档。( [https://github.com/mcamara/laravel-localization](https://github.com/mcamara/laravel-localization) )

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-10T18:56:16.890

尝试使用 Session 的。像这样的东西：

控制器：

```
 class Language_Controller extends Base_Controller {

        function __construct(){
            $this->action_set();
            parent::__construct();
        }

       private function checkLang($lang = null){
         if(isset($lang)){
           foreach($this->_Langs as $k => $v){
             if(strcmp($lang, $k) == 0) $Check = true;
           }
       }
        return isset($Check) ? $Check : false;
       }

       public function action_set($lang = null){
        if(isset($lang) && $this->checkLang($lang)){
            Session::put('lang', $lang);
            $this->_Langs['current'] = $lang;
            Config::set('application.language', $lang);
        } else {
            if(Session::has('lang')){
                Config::set('application.language', Session::get('lang'));
                $this->_Langs['current'] = Session::get('lang');
            } else {
                $this->_Langs['current'] = $this->_Default;
            }
        }
        return Redirect::to('/');
    }
} 
```

在 Route.php 中：

```
Route::get('lang/(:any)', 'language@set'); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-05-01T10:38:01.740

我一直在这样做：

```
$languages = Config::get('lang.languages'); //returns array('hrv', 'eng')

$locale = Request::segment(1); //fetches first URI segment

//for default language ('hrv') set $locale prefix to "", otherwise set it to lang prefix
if (in_array($locale, $languages) && $locale != 'hrv') {
    App::setLocale($locale);
} else {
    App::setLocale('hrv');
    $locale = null;
}

// "/" routes will be default language routes, and "/$prefix" routes will be routes for all other languages
Route::group(array('prefix' => $locale), function() {

    //my routes here

}); 
```

来源： http: [//forumsarchive.laravel.io/viewtopic.php?pid=35185#p35185](http://forumsarchive.laravel.io/viewtopic.php?pid=35185#p35185)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-09-24T02:11:28.133

我正在做的包括两个步骤：我正在创建一个包含以下字段的语言表：

编号 | 姓名 | 蛞蝓

例如，其中包含我需要的语言数据

1 | 希腊语 | 克

2 | 英语 | zh

3 | 荷兰语 | 德

*我在下面的代码中使用的语言模型是指该表。*

所以，在我的 routes.php 我有类似的东西：

```
//get the first segment of the url
$slug = Request::segment(1);   
$requested_slug = "";

//I retrieve the recordset from the languages table that has as a slug the first url segment of request
$lang = Language::where('slug', '=', $slug)->first();

//if it's null, the language I will retrieve a new recordset with my default language
$lang ? $requested_slug = $slug :  $lang = Language::where('slug', '=', **mydefaultlanguage**')->first();

//I'm preparing the $routePrefix variable, which will help me with my forms
$requested_slug == ""? $routePrefix = "" : $routePrefix = $requested_slug.".";

//and I'm putting the data in the in the session
Session::put('lang_id', $lang->id);
Session::put('slug', $requested_slug);
Session::put('routePrefix', $routePrefix );
Session::put('lang', $lang->name); 
```

然后我可以使用请求的 slug 作为前缀来编写路由......

```
Route::group(array('prefix' =>  $requested_slug), function()
{
    Route::get('/', function () {
        return "the language here is gonna be: ".Session::get('lang');
    });

    Route::resource('posts', 'PostsController');
    Route::resource('albums', 'AlbumsController');
}); 
```

这可行，但是每次我的应用程序中的路线发生变化时，此代码都会向数据库询问语言。我不知道我怎么能，如果我应该，找出一种机制来检测路由是否更改为另一种语言。

希望有帮助。

# javascript - 如何使用 node.js express 框架从 HTML 表单中自动绑定集合？

> ID：12708394
> 
> 赞同：0
> 
> 时间：2012-10-03T12:23:55.720
> 
> 标签：javascript, node.js, express, connect, pug

我正在寻找一种在服务器端绑定集合的方法，例如：

**单绑定**

```
<input type="text" name="person[name]" /> 
```

绑定到

```
person:{
    name: 'Name from html form'
} 
```

如果我使用 express，我可以在以下位置访问此对象：

```
app.post('/person', function(req, res){
    console.log(JSON.stringify(req.body.person, null, 2));
}); 
```

**集合绑定**

但是现在我正在寻找一种拥有多个电话号码的方法，例如，我希望这个 JSON 到达：

```
person:{
    name: 'Name from html form',
    phones: [
        { number: '12345678' },
        { number: '87654321' }
    ]
} 
```

那么将输入绑定到集合字段的语法是什么？？？

我尝试`<input type="text" name="person[phone][number]" />`过但没有成功，也不知道如何使用谷歌搜索（我已经尝试过，但没有成功......）。这是 express/connect 的功能吗？如果没有，实现它的最佳方法是什么？我知道这个特性存在于一些 Java 框架上，所以这里也可能存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:33:29.240

感谢@camus，我找到了方法：

```
br
input(type="text", name="person[phones][0][type]")
input(type="text", name="person[phones][0][number]")

br
input(type="text", name="person[phones][1][type]")
input(type="text", name="person[phones][1][number]") 
```

在服务器端提供以下内容：

```
person: {
    phones:
    [{
        type: "1",
        number: "23453131"
    },
    {
        type: "2",
        number: "51254534"
    }]
} 
```

# c# - 为什么我不能在 WebSites 中创建 UC 的对象？

> ID：12708400
> 
> 赞同：1
> 
> 时间：2012-10-03T12:24:22.470
> 
> 标签：c#, asp.net, .net

我有一个 Asp.net 网站，其中有 a`user control(uc_cart.ascx)`和 a `webpage(checkout.aspx)`，我想创建一个 in 的对象，`uc_cart.ascx`但`checkout.aspx`我不能这样做，它根本不会出现在智能框中，但是当我在 Web 应用程序中做同样的事情时，我能够。

过了一会儿，我注意到我必须在我的网页中使用 注册该 UC `<%@ Register %>`，只有在那之后我才能访问该类并可以在网站中创建相同的对象，但在 Web 应用程序中我不必这样做。

那么基本上**网站和Web应用程序之间的主要区别是什么？**

**为什么我不能在没有那个块的情况下创建那个**对象`<%@ Register %>` **？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:25:53.140

使用`LoadControl`方法来实例化 Web User 控件。

```
Control control=LoadControl("~/uc_cart.ascx");
PlaceHolder1.Controls.Add(control); 
```

参考链接：

1.  [MSDN - Visual Studio 中的 Web 应用程序项目与网站项目](http://msdn.microsoft.com/en-us/library/dd547590.aspx)
2.  [StackOverflow - ASP.NET：网站还是 Web 应用程序？](https://stackoverflow.com/questions/398037/asp-net-web-site-or-web-application)

# javascript - 如何在javascript中以x等行分割字符串（文本对齐）

> ID：12708404
> 
> 赞同：3
> 
> 时间：2012-10-03T12:24:24.367
> 
> 标签：javascript, string, lines, hyphenation

我拼命地试图将一个随机字符串分成相等的部分，所以我可以分别为它们设置主题。我的目标是为我的文本制作一个扭曲的效果，但保持文本合理且没有分裂的单词..

正如您在此示例中看到的那样，我曾尝试做类似的事情，但结果真的很糟糕。：

[http://vps10937.ovh.net/hyphenator/WorkingExample1.html](http://vps10937.ovh.net/hyphenator/WorkingExample1.html)（柏拉图2）

这是我的代码：

```
jQuery(document).ready(function() {
    jQuery('p.platon2').each(function(index) {
    lengthTotal = jQuery(this).text().length
    var string = jQuery(this).text();
    string = jQuery.trim(string);
    var length = 56;
    var trimmedString = string.substring(0, length);
    jQuery(this).text('');
    lengthTotalPrev = 0;
    j=0;
    z=0
      for (i=length; i<lengthTotal;  i=i+length){
        j++;
        z=z+5;
        rowString = string.substring(lengthTotalPrev, i);
        jQuery(this).append('<span id="row'+j+'" class="rows" style="position:relative;left:-'+z+'px;">'+rowString+'</span>');
        lengthTotalPrev = i;
      }
    });
}); 
```

现在我正在尝试使用插件[hyphenator.js](http://code.google.com/p/hyphenator/)正确拆分我的文本并获得相等的行。

[http://vps10937.ovh.net/hyphenator/WorkingExample1.html](http://vps10937.ovh.net/hyphenator/WorkingExample1.html) （柏拉图1）

要调用插件，很简单：

```
Hyphenator.config({
    displaytogglebox : true,
    minwordlength : 4
});
Hyphenator.run(); 
```

结果很漂亮，但是这样我就不能在每一行上应用 CSS 来扭曲我的文本。我已经从上到下探索了[hyphenator.js （单击此处查看源代码）文件，但没有找到任何东西来拆分行上的文本..](http://vps10937.ovh.net/hyphenator/Hyphenator.js)

* * *

***编辑***

* * *

我修改[了在 github 上找到的插件](https://gist.github.com/907237)。有了这个，我现在可以做一些接近预期结果的事情。但仍然存在一些问题。

[http://vps10937.ovh.net/hyphenator/WorkingExample1.html](http://vps10937.ovh.net/hyphenator/WorkingExample1.html)（柏拉图3）

1）**脚本很慢**。是否可以缓存结果？

2）文本不再是合理的，所以行不完全等于......

3) 仅适用于**火狐！！**

[这是代码http://vps10937.ovh.net/hyphenator/jquery.truncatelines.js](http://vps10937.ovh.net/hyphenator/jquery.truncatelines.js)

```
$.fn.truncateLines = function(options) {
options = $.extend($.fn.truncateLines.defaults, options);

return this.each(function(index, container) {

    container = $(container);
    var containerLineHeight = Math.ceil(parseFloat(container.css('line-height')));

    var maxHeightFixed = containerLineHeight;
    //var maxHeight = options.lines * containerLineHeight;

    var truncated = false;
    var truncatedText = $.trim(container.text());
    //var overflowRatio = container.height() / maxHeight;

    var oldTruncatedText; // verify that the text has been truncated, otherwise you'll get an endless loop
    var oldContainerHeight;
    textArray= new Array();

    jQuery(document.body).append('<p class="paragraphProvisory1" style="display: none;"></p>');
    jQuery(document.body).append('<p class="paragraphProvisory2" style="display: none;"></p>');

    while (container.height() > 0 && oldTruncatedText != truncatedText) {
        if(oldContainerHeight!=container.height()){

            truncatedTextTest = truncatedText;
            jQuery('.paragraphProvisory1').text(truncatedTextTest);

            //11nd line 
            if(container.height()==containerLineHeight*11){
                createLine(10);
            }
            //10nd line 
            if(container.height()==containerLineHeight*10){
                createLine(9);
            }
            //9nd line  
            if(container.height()==containerLineHeight*9){
                createLine(8);
            }
            //8nd line  
            if(container.height()==containerLineHeight*8){
                createLine(7);
            }
            //7nd line  
            if(container.height()==containerLineHeight*7){
                createLine(6);
            }
            //6nd line  
            if(container.height()==containerLineHeight*6){
                createLine(5);
            }
            //5nd line  
            if(container.height()==containerLineHeight*5){
                createLine(4);
            }
            //4nd line  
            if(container.height()==containerLineHeight*4){
                createLine(3);
            }
            //3nd line  
            if(container.height()==containerLineHeight*3){
                createLine(2);
            }
            //2nd line  
            if(container.height()==containerLineHeight*2){
                createLine(1);
            }
            //1st line      
            if(container.height()==containerLineHeight*1){
                textArray[0]= "<div class='line1'>"+truncatedTextTest+"</div>";     
            }

        }

        oldTruncatedText = truncatedText;
        oldContainerHeight = container.height()
        truncatedText = truncatedText.replace(/\s.[^\s]*\s?$/, ''); // remove last word
        container.text(truncatedText);

    }

    jQuery('.platon3').text('');
    jQuery.each(textArray, function(i) {
     jQuery('.platon3').append(textArray[i]);
});

});
};
function createLine(rowNumber){
    var oldTruncatedTextTest;
    var row = 0;
    positionLeft = rowNumber * 10;
    rowNumber++;
    jQuery('.paragraphProvisory2').text(truncatedTextTest);
        containerTest = $('.paragraphProvisory2');
        while (containerTest.height() > 20 && oldTruncatedTextTest != truncatedTextTest) {
            row++;
            oldTruncatedTextTest = truncatedTextTest;
            truncatedTextTest = truncatedTextTest.substr(truncatedTextTest.indexOf(" ") + 1);
            jQuery('.paragraphProvisory2').text(truncatedTextTest);
            if(containerTest.height()==20){
                textArray[rowNumber]= "<div class='line"+rowNumber+"' style='position: relative; left: -"+positionLeft+"px;'>"+truncatedTextTest+"</div>";
            }
        }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:21:02.060

这不是您想要的，但您可以倾斜整个文本容器以适应使用 css3：

```
.platon {
  transform: skew(160deg,0deg);
  -ms-transform: skew(160deg,0deg);
  -moz-transform: skew(160deg,0deg);
  -webkit-transform: skew(160deg,0deg);
  -o-transform: skew(160deg,0deg);
  width: 367px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:36:36.960

如果我对您的理解正确，您想将自己的 CSS 应用于每个*连字符*的行...所以您可以像这样定义自己的`classname`：

```
 Hyphenator.config({                
classname : 'yourclass',             

 }) 
```

# android - 来自谷歌的 INSTALL_ASSET 功能

> ID：12708405
> 
> 赞同：0
> 
> 时间：2012-10-03T12:24:24.877
> 
> 标签：android

是否有任何代码或参考，例如如何`INSTALL_ASSET`用于远程安装应用程序。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:27:51.770

`INSTALL_ASSET`Android SDK 中没有，Android`INSTALL_ASSET`开源代码中似乎也没有。

# linux - scheduler_tick - 在 Linux 中从哪里调用它？

> ID：12708407
> 
> 赞同：1
> 
> 时间：2012-10-03T12:24:35.363
> 
> 标签：linux, interrupt, schedule

我想了解当处理器为内核代码提供机会并执行维护和调节工作时的中断机制。我所知道的是定时器中断为操作系统提供了这种便利。

**1）我想知道相关的中断号到底是什么，以及在 Linux 的情况下调用的第一个 OS 例程是什么。如果我知道这个文件和函数名会很好。**

在 Linux 的情况下，scheduler_tick 是调用来调度新任务的内核函数，但是不知道是谁调用了 scheduler_tick 及其父级？

**2）在 Linux 中是否还有其他调用 scheduler_tick 的中断？如果有的话，它们是哪些？**

```
 /*
   This function gets called by the timer code, with HZ frequency.
   We call it with interrupts disabled.
 */

 void scheduler_tick(void)
 {
         int cpu = smp_processor_id();
         struct rq *rq = cpu_rq(cpu);
         struct task_struct *curr = rq->curr;
....... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T19:46:25.173

当您可以访问交叉引用 (x-ref) 源浏览器时，这很容易回答。

单击此处： http: [//lxr.linux.no/#linux+v3.6.3/kernel/sched/core.c#L3214](http://lxr.linux.no/#linux+v3.6.3/kernel/sched/core.c#L3214)获取 Linux Kernel 的在线 x-ref 项目。（这个不会 x-ref 汇编代码。）

此链接转到 `scheduler_tick`函数定义。单击函数名称，然后在右侧的新面板中选择“函数原型或声明”链接“用法...”之后。一段时间后，将列出所有提到此功能的代码：

```
 include/linux/sched.h, line 309  << declaration
 kernel/sched/core.c, line 3214   << definition
 kernel/timer.c, line 1373        << calling 
```

因此， timer.c: 1373 [http://lxr.linux.no/#linux+v3.6.3/kernel/timer.c#L1373](http://lxr.linux.no/#linux+v3.6.3/kernel/timer.c#L1373)是`update_process_times`函数的一部分：

```
1355 /*
1356  * Called from the timer interrupt handler to charge one tick to the current
1357  * process.  user_tick is 1 if the tick is user time, 0 for system.
1358  */
1359 void update_process_times(int user_tick) 
```

该函数只能从定时器中断处理程序中调用；它应该在每个滴答声中调用。

重复交叉引用搜索过程`update_process_times`以获取列表：

```
References:
 arch/alpha/kernel/smp.c, line 520 
 arch/arm/kernel/time.c, line 108 
 arch/cris/arch-v10/kernel/time.c, line 171 
 arch/cris/arch-v32/kernel/time.c, line 206 
 arch/h8300/kernel/time.c, line 40 
 arch/ia64/kernel/time.c, line 184 
 arch/m68k/kernel/time.c, line 38 
 arch/parisc/kernel/time.c, line 163 
 include/linux/sched.h, line 308 
 kernel/time/tick-sched.c, line 683 
 kernel/time/tick-sched.c, line 841 
```

> 相关中断号

中断号取决于平台（有时甚至在引导时分配）。你没有说你对什么平台感兴趣。

> 2）在 Linux 中是否还有其他调用 scheduler_tick 的中断？如果有的话，它们是哪些？

有几种计时器实现，包括 hrtimers（高分辨率计时器，这可能与通常的系统计时器不同）。每个实现可能使用不同的中断。

# ruby-on-rails - 在heroku上返回JSON而不是HTML错误页面

> ID：12708408
> 
> 赞同：1
> 
> 时间：2012-10-03T12:24:37.097
> 
> 标签：ruby-on-rails, json, api, heroku

我正在创建由 Rails 驱动的应用程序，它充当 JSON API，并托管在 heroku 上。现在，如果引发异常，heroku 会返回正确的 http 响应代码和可自定义的 HTML 页面作为响应。但是，由于我没有使用 HTML 格式，即使我设置`Accept: application/json`了返回 HTML 响应的标题——这对我来说是不正确的。是否可以自定义响应并返回某种 JSON？（如果没有，没有正文的响应也可以）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:00:06.477

您应该在控制器中捕获异常，`head :not_found`或者类似的东西。

[http://guides.rubyonrails.org/action_controller_overview.html#rescue_from](http://guides.rubyonrails.org/action_controller_overview.html#rescue_from)

[http://rails.rubyonrails.org/classes/ActionController/Base.html#M000466](http://rails.rubyonrails.org/classes/ActionController/Base.html#M000466)

# objective-c - 在 iPhone 中更新 Localizable.strings 文件运行时

> ID：12708409
> 
> 赞同：0
> 
> 时间：2012-10-03T12:24:40.437
> 
> 标签：objective-c, ios, localization

我想更新或替换 Localizable.strings 运行时。我在服务器上有 .strings 文件。所以如果有人可以更新服务器上的 .strings 文件。然后我还需要更新值或替换成捆绑包。

或者

我可以直接读取 .strings 文件表单服务器吗？并使所有静态字符串本地化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:28:45.640

你当然可以。你必须自己动手。

如果您查看 NSLocalizableString 宏，您可以自己制作：

RMLocalizableString 不是指向资源，而是指向您在文档文件夹中下载的文件。但当然，您必须确保该文件确实存在。

# python - 机器人足球控制回路

> ID：12708412
> 
> 赞同：0
> 
> 时间：2012-10-03T12:25:11.890
> 
> 标签：python, nxt

使用带有颜色传感器和超声波传感器的乐高 nxt。试图创建一个足球控制循环，控制乐高 nxt 的行为就像在一个有 4 个侧壁和两个球门的矩形木制足球场上踢足球一样。我有以下三种方法：1\. turn_to ball 2\. move_to ball 3 . 踢球

我正在循环传递坐标：

```
screenw = 0
screenh = 0
while 1:
    client_socket.send("loc\n")
    data = client_socket.recv(8192)
    valueList = data.split()

    if (not(valueList[-1] == "eom" and valueList[0] == "start")):
        #print "continuing.."
            continue

        if(screenw != int(valueList[2])):
            screenw = int(valueList[2])
            screenh = int(valueList[3]) 
```

我如何创建一个足球控制循环来运行这三种方法turn_to ball，在循环中移动到球和踢球，因为它会避免与墙壁发生碰撞？

# c# - WCF - 设置大文件下载超时

> ID：12708418
> 
> 赞同：3
> 
> 时间：2012-10-03T12:25:40.640
> 
> 标签：c#, wcf

我编写了一对应用程序，使用 WCF 在它们之间建立客户端/服务器连接。部分功能是客户端将跨 WCF 下载（可能非常大）文件。一切正常。

我正在使用basicHttpBinding，并将我的sendTimeout 和receiveTimeout 设置为几分钟。我遇到的问题是，如果我将超时设置得更小，那么它们就没有足够的时间来下载大文件（尤其是通过慢速网络）。如果我让超时保持原样，那么当我得到一个断开的连接时，我必须等待很长时间。

有没有更好的方法来处理这个问题，仍然允许我通过 WCF 下载文件？

**编辑：**除了来自 luksan 的回答，我在之前的帖子中发现了很多有用的信息：[Timeouts WCF Services](https://stackoverflow.com/questions/229760/timeouts-wcf-services)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T12:31:10.790

您是否尝试过将其设置`SendTimeout`为较大的值并保持`ReceiveTimeout`原样？我认为`SendTimeout`超时一个长时间运行的操作，而`ReceiveTimeout`超时一个非活动通道。

# php - strtotime 功能超过 24 小时

> ID：12708419
> 
> 赞同：0
> 
> 时间：2012-10-03T12:25:44.737
> 
> 标签：php

您好，我正在尝试使用 strtotime 函数将时间与 Hours:Minutes:Seconds 格式进行比较，但如果 Hours 超过 24 则会出现问题

PHP代码：

```
$time_duration_1 = '102:44:18';
$time_duration_2 = '87:42:19';

if(strtotime($time_duration_1) > strtotime($time_duration_2))
{
   return true;
}else{
   return false;
} 
```

这种情况有什么方便的功能吗？还是我应该手动硬编码检查？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:29:18.427

做一个函数来计算你的小时、分钟和秒：

```
function formatHours($time){
    $date = explode(':', $time);
    return ($date[0]*60*60)+($date[1]*60)+$date[2];
}

if(formatHours($time_duration_1) > formatHours($time_duration_2)){
// ...... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T12:31:55.337

我解决这个问题的方法是`mktime`：

```
function getTimeFromString($time){
    $time = explode(':', $time);
    return mktime($time[0], $time[1], $time[2]);
}

if(getTimeFromString($time_duration_1) > getTimeFromString($time_duration_2)){ 
```

# java - 尝试捕获问题

> ID：12708441
> 
> 赞同：1
> 
> 时间：2012-10-03T12:26:58.953
> 
> 标签：java, exception

我从控制器抛出异常，如下所示

```
try {
    if (formValidationResult.size() > 0) {
        validationResults.put(errorMsg, formValidationResult);
    }
} catch (Exception exception) {
    LOGGER.error("Error while performing validation in FormController -->"
                    + exception.getMessage());
    throw new ServiceException(exception.getMessage());
}
if (validationResults.size() > 0) {
    throw new ValidationFailureException(validationResults,"Validation Error");
} 
```

在这里我收到一个验证错误；

> com.ge.dbt.common.exception.ValidationFailureException：验证错误

我可以包括一个 catch 块来捕捉`ValidationFailureException`这里吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T12:31:24.627

是 Java 允许。您可以使用 try catch 块抛出和处理异常

```
 try
    {
        throw new Exception();
    }
    catch (Exception e) {
        // TODO: handle exception
    } 
```

在这里，您在同一个块中抛出和处理异常。**我不知道为什么有人愿意这样做。**

**更好的方法是**让您的方法定义为`throws ValidationFailureException`并处理调用此代码的函数的异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T19:43:51.917

Assuming that validationResult and formValidationResult are collections, I don't see why there is a need to enclose the call to the size and put methods in a try catch block? What exception are you expecting anyway while checking the size of these collections or inserting a new value anyway?

I can't give you the code because I am typing from my phone but this is what you can do :

1.  Indicate that the method containing your code throws a ValidationFailureException in the method signature.

2.  Remove the try catch block you have presented and remove the if block that checks whether validationResult is non empty and the code inside the if block.

3.  If formValidationResult is not empty, store the error message in validationResult and throw a ValidationFailureException.

That's it. Clean and simple. No need for any try-catch blocks and no need to separately check if validationResult is not empty before throwing a ValidationFailureException.

# ios - 应该将 viewDidUnload 中的哪些工作移至 didReceiveMemoryWarning？

> ID：12708443
> 
> 赞同：7
> 
> 时间：2012-10-03T12:27:00.393
> 
> 标签：ios, uiviewcontroller, ios6, didreceivememorywarning, viewdidunload

在新的 iOS 6 中，`viewDidUnload`已弃用，我们被指示使用它`didReceiveMemoryWarning`来管理 UIViewController 实例和子类中的对象。将 nils 分配给内部的 UIView 种类是否同样有效，`didReceiveMemoryWarning`就像它在内部完成的方式一样`viewDidUnload`？

我问这个是因为这两种方法似乎工作方式不同。似乎`didReceiveMemoryWarning`不能保证`viewDidLoad`再次调用以重新实例化任何必要的 UIView。

我怀疑使用 iOS 6，无需手动释放 UIView 即可完成内存管理。请帮助我了解我在理解 UIViewController 的生命周期时遗漏了什么。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-03T13:36:38.147

我现在的首选方法如下：

```
- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
    if (self.isViewLoaded && !self.view.window) {
        self.view = nil;
    }
    // Do additional cleanup if necessary
} 
```

请注意，测试`self.isViewLoaded`是必不可少的，否则访问视图会导致它加载——即使是 WWDC 视频也往往会错过这一点。

如果您对子视图的其他引用是弱引用，则不必在此处将它们设为 nil，否则您也想将它们设置为 nil。

您应该完全摆脱`viewDidUnload`，并且那里的每个代码都应该移动到适当的位置。无论如何，它不能保证在 iOS 6 之前被调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T13:22:26.043

在 iOS 参考中`viewDidUnload:`，它声明这对于 iOS 6 已弃用，因为

> 在内存不足的情况下不再清除视图，因此永远不会调用此方法

它没有说明将此代码放在`didReceiveMemoryWarning:`. 由于在内存不足的情况下不再清除视图，因此您不必担心在任何一种方法中清理视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-04T10:08:22.963

Eiko 的回答是不正确的，我们不应该`self.view`在`nil`收到内存不足警告时设置。这样做是没有用的，而且可能有害。

iOS 6 将自动释放当前未显示的视图的位图，有关详细信息，请参阅[http://thejoeconwayblog.wordpress.com/2012/10/04/view-controller-lifecycle-in-ios-6/](http://thejoeconwayblog.wordpress.com/2012/10/04/view-controller-lifecycle-in-ios-6/)。

# c# - MongoDb C# 驱动程序：在 cqrs 解决方案中将事件映射到读取数据库

> ID：12708444
> 
> 赞同：3
> 
> 时间：2012-10-03T12:27:05.430
> 
> 标签：c#, mongodb, mongodb-.net-driver, cqrs

我们使用 MongoDb 作为我们应用程序的数据源，它是使用 cqrs 和事件源构建的。我们今天面临的问题是实现事件映射（非规范化）以读取数据库的最佳方法是什么。例如，我们有一个用户 MongoDb 集合，其中包含有关用户的所有信息。我们有这样的事件：

```
[Serializable]
public class PasswordChangedEvent : DomainEvent
{
    private string _hashedPassword;
    private string _salt;

    public PasswordChangedEvent()
    {
    }

    public PasswordChangedEvent(string hashedPassword, string salt, DateTime createdDate)
        :base(createdDate)
    {
        HashedPassword = hashedPassword;
        Salt = salt;
    }

    public string HashedPassword
    {
        private set { _hashedPassword = value; }
        get { return _hashedPassword; }
    }

    public string Salt
    {
        private set { _salt = value; }
        get { return _salt; }
    }
} 
```

并像阅读 DTO

```
public class User : BaseReportDataObject
    {
        public string Name { get; set; }

        public string Email { get; set; }

        public string Gender { get; set; }

        public DateTime? BirthDate { get; set; }

        public string HashedPassword { get; set; }

        public string Salt { get; set; }

        public string RestoreHash { get; set; }

        public string OpenIdIdentifyer { get; set; }
    } 
```

我们当前使用事件更新文档的解决方案如下：我们有一些事件映射代码（BsonClassMap.RegisterClassMap 等）和更新代码：

```
MongoCollection.Update(Query<PasswordChangedEvent>.EQ(ev => ev.AggregateId, evnt.AggregateId),
                                   Update<PasswordChangedEvent>
                                     .Set(ev => ev.HashedPassword, evnt.HashedPassword)
                                     .Set(ev => ev.Salt, evnt.Salt)); 
```

代码对我来说看起来有点丑陋和多余：使用所有 lambda 的东西，我们仍然需要显式地提供属性值。另一种方法是将 PasswordChangedEvent 替换为 User dto，因此我们不再需要事件映射：

```
MongoCollection.Update(Query<ReadDto.User>.EQ(u => u.Id, evnt.AggregateId),
                                   Update<ReadDto.User>.Set(u => u.HashedPassword, evnt.HashedPassword)); 
```

那么问题又来了：有没有更好的方法来进行这种类型的映射？两种类型的对象（事件和 DTO）映射到同一个 mongo db 集合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T01:53:51.077

It seems like this is actually a question about mapping data from one object to another? If so, you may want to consider using something like [Ditto](https://github.com/mnichols/ditto) or [AutoMapper](http://automapper.org/). I am the developer of ditto and have used it for a number of CQRS systems effectively...I wrote it to handle mixing in alot of different objects' data into the same View Model. These are known as OO mappers and typically have some form of bootstrapping configuration code, often using sensible conventions to avoid all the redundancy.

# javascript - 表单内输入字段的循环焦点

> ID：12708446
> 
> 赞同：1
> 
> 时间：2012-10-03T12:27:18.393
> 
> 标签：javascript, html

```
<form>
    <input tabindex="1" required>
    <input tabindex="2" required>
    <input>
    <input tabindex="3" required>
    <input>
    <input tabindex="4" required>
    <input tabindex="5" required>
    <button type="button" tabindex="6"></button>
    <button type="submit" tabindex="7"></button>
</form> 
```

在这里，我有一个`form`带有一些`input`字段和两个`button`在表单末尾...我正在**按顺序**使用它们的`tabindex`属性...现在在 tab 键上我需要在从**提交****释放焦点**后聚焦第**一个输入**字段**按钮**，就像从...的输入字段释放焦点后的表单**焦点**输入**字段**...我该怎么做...？？`focus`****`tabindex="1"`******`tabindex="3"`**`tabindex="2"`************

 ******请不要使用任何 jQuery ......只有 javascript 或 html ......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T02:38:59.613

Black Cobra 的答案有效，除非您将自己的`id`属性用于某些事情（我曾经是）。编辑他的代码以供任何人使用很容易：

```
<form>
    <input tabindex="2" autofocus required>
    <input tabindex="3" required>
    <input>
    <input tabindex="4" required>
    <input>
    <input tabindex="5" required>
    <input tabindex="6" required>
    <button type="button" tabindex="7"></button>
    <button type="submit" tabindex="8" id=""
            onFocus="this.tabIndex=1;"
            onBlur="this.tabIndex=8;">
    </button>
</form> 
```

我只是改变了这个：

```
 onFocus="this.id=this.tabIndex;this.tabIndex=1"
        onBlur="this.tabIndex=this.id"> 
```

对此：

```
 onFocus="this.tabIndex=1;"
        onBlur="this.tabIndex=8;"> 
```

它不是动态的，但它真的很容易。如果您想要动态，[请参见此处。](https://stackoverflow.com/questions/14314659/how-to-repeat-the-tabindex-from-1-after-it-has-gone-to-the-last-element-with-a-t)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T09:24:34.783

最后，我解决了我的问题......使用 HTML 和一点 javascript 可以轻松完成......意味着表单内输入字段的循环焦点......

```
<form>
    <input tabindex="2" autofocus required>
    <input tabindex="3" required>
    <input>
    <input tabindex="4" required>
    <input>
    <input tabindex="5" required>
    <input tabindex="6" required>
    <button type="button" tabindex="7"></button>
    <button type="submit" tabindex="8" id=""
            onFocus="this.id=this.tabIndex;this.tabIndex=1"
            onBlur="this.tabIndex=this.id">
    </button>
</form> 
```

在这里，我跳过`tabindex="1"`并从...开始，然后我在按钮中`tabindex="2"`再添加 2 个... & ...此外，我正在使用该属性来记忆提交按钮的主要或实际 tabindex 编号...当用户将专注于提交按钮，javascript 将其从更改为... 现在，如果用户点击选项卡按钮，表单将尝试找出具有下一个... 表示第一个输入字段的元素...再次，当焦点离开提交按钮时，javascript将从它的...中检索它的真实值，这意味着它将从更改为...以这种方式焦点将继续在表单内循环...`attribute``submit``onFocus``onBlur``id``tabindex``8``1``tabindex``tabindex``id``tabindex``1``8`

[现场演示](http://tinkerbin.com/3oqX41Br)******

# android - Android achartengine getCubeLineChartView : 添加不同平滑度的系列

> ID：12708447
> 
> 赞同：1
> 
> 时间：2012-10-03T12:27:21.850
> 
> 标签：android, achartengine

我正在使用 ChartFactory.getCubeLineChartView(context, dataset, renderer, smoothness) 返回多轴 XY 视图。（1 个 X 轴和 2 个 Y 轴）

我想在现有视图图表中添加一个新系列，但平滑度不同。是否有可能以及如何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:29:44.573

这是在每个图表的基础上设计的，而不是在每个系列的基础上。所以答案是你不能。

但是，您仍然有一些选择：

*   使用多 XY 图表
*   自己构建`CubicLineChart`实例并将其添加到视图中

# sencha-touch-2 - 检测任何组件上的点击事件？

> ID：12708448
> 
> 赞同：0
> 
> 时间：2012-10-03T12:27:23.653
> 
> 标签：sencha-touch-2

请让我知道代码。我尝试了在 app.js 中定义的 Ajax 监听器。但是我想通过在 app.js 中编写一些点击监听器来检测用户在我的应用程序中的点击。知道我应该写什么水龙头监听器吗？AJAX 监听器是：

```
Ext.Ajax.on('requestcomplete',function(connection,options) {
                   Ext.Viewport.setMasked(false);
                  anyfunction();
               }); 
```

# authentication - BE 自定义身份验证器未在 WSO2 GS 上调用

> ID：12708451
> 
> 赞同：0
> 
> 时间：2012-10-03T12:27:34.837
> 
> 标签：authentication, wso2

我们的要求是将电子邮件 ID 作为登录的用户名。我们使用了在这个[链接](http://hasini-gunasinghe.blogspot.in/2011/08/carbon-authentication-framework.html#comment-form)上找到的博文。我们在类文件中构建了业务逻辑`customauthenticator`，并刚刚部署了 BE 身份验证块。我们按照建议使用了 dropins 文件夹，并修改`authenitcators.xml`了 conf/advanced 目录中的文件。

我们尝试了`disabled=true`和`disabled=false`，以及更低和更高的优先级。根本没有变化。似乎没有提取 jar 文件。为了激活自定义身份验证，我们是否缺少任何其他配置？任何指针都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:37:38.797

您不必为您的要求编写自定义身份验证器。

如果您在 user-mgt.xml 中启用 JDBCUserStoreManager 并将以下属性设置为 true，则电子邮件 ID 将用作用户名。

属性名称="IsEmailUserName"

谢谢，哈西尼。

# regex - gawk 在处理时忽略传入的行

> ID：12708459
> 
> 赞同：1
> 
> 时间：2012-10-03T12:28:16.787
> 
> 标签：regex, gawk

我试图找到一种方法来刷新/忽略 gawk 中的行，当它使用如下脚本执行“一些工作”时：

```
BEGIN{
c = 1
}
$0 ~ /test/{
if(c == 1){
c = 0
system("sleep 3")
print "up"
c = 1
}
} 
```

输入：

```
>gawk -f test.awk
test
test
test
up 
up
up 
```

有没有办法告诉 gawk 在“工作”时忽略与模式匹配的行，并在完成后开始处理第一行？现在它正在缓冲，完成后它开始处理“输入缓冲区”中的行，但它应该忽略这些行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T23:27:37.190

输入缓冲区超出了 AWK 脚本的控制范围。

读取第一行后触发睡眠，睡眠完成后将读取下一行输入，没有办法（据我所知并且可以找到）跳过所有发生的输入，而睡眠发生了。

我在 C 中看到的最接近的事情是进行低级非阻塞读取，以在每次睡眠后消耗所有立即可用的输入。

# git - Jenkins 针对指定的 git 提交版本运行构建

> ID：12708460
> 
> 赞同：1
> 
> 时间：2012-10-03T12:28:16.850
> 
> 标签：git, jenkins

> **可能重复：**
> [使用 Hudson 构建特定的 git commit](https://stackoverflow.com/questions/4207450/use-hudson-to-build-a-specific-git-commit)

我想通过 API 开始构建，使用参数化构建。我想通过这个将提交代码传递给一个参数，这很好。

然后，我想使用提交代码通过 git 在该提交版本上运行构建。

有没有办法让詹金斯针对特定的提交运行构建？

提前致谢！

# c# - 在更短的时间内读取大尺寸文本文件并填充到网格视图中

> ID：12708462
> 
> 赞同：0
> 
> 时间：2012-10-03T12:28:20.750
> 
> 标签：c#, file, c#-4.0

我正在处理`2GB`大约 360 万条记录的大文件，在这里我想在更短的时间内读取特定文件并在 gridview 中显示空格分隔的字段。有没有人有任何想法，请在这里分享您的想法。提前致谢。

我做了一个使用streamreader及其`20 sec`读取`134MB`文件的例子，有没有其他方法可以更快地读取它？

# javascript - 如何从文本字段中获取文本并将其作为参数传递给 javascript 函数

> ID：12708464
> 
> 赞同：-1
> 
> 时间：2012-10-03T12:28:22.933
> 
> 标签：javascript, parameters, dom

我有一个文本字段，它应该在按下提交按钮时更改页面上的元素，其中包含文本。我将值传递给 javascript 函数。它不起作用，谁能告诉我该怎么做/我做错了什么？

这是我的代码：

```
<html>
<head>
<script type = "text/javascript">
function submitText(string, id)
{
document.getElementById(id).innerHTML = string;
}
</script>
</head>
<body>
<p id = "Datepara" style = "font-family:comic sans ms;color:orange;text-align:center;font-size:25px;">
Date Created: 24/9/12 <br /><br /><br/>
</p>
<input id = "changetext" type = "text" value = "Enter text to display text in this webpage!"/>
&nbsp;
<input id = "submit" type = "button" onclick = "submitText('Datepara','document.getElementById("changetext").value;'" value = "Submit" />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:34:07.800

这是我对您的代码所做的更改：我在 submitText 函数上切换了参数的顺序，我删除了引号，`document.getElementById("changetext").value`因为您传递的是字符串而不是输入控件的值

```
function submitText(id, string)
{
     document.getElementById(id).innerHTML = string;
}

<input id="submit" type="button" 
  onclick="submitText('Datepara', document.getElementById('changetext').value)"
  value="Submit" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T12:34:45.567

做这个

```
<input id = "submit" type = "button" onclick = "submitText('Datepara','changetext')" value = "Submit" /> 
```

javascript

```
function submitText(divid,txtid)
{
   document.getElementById(divid).innerHTML = document.getElementById(txtid).value;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T12:33:13.727

`'document.getElementById("changetext").value;'`是字符串文字，而不是 gEBId 调用的 value 属性。

`"submitText('Datepara','document.getElementById("`是`onclick`属性的值。看你的报价。

`submitText(string, id)`接受一个字符串然后是一个 id，而不是一个 id 然后是一个字符串。

# performance - 如何测量 Windows 应用程序响应时间？

> ID：12708465
> 
> 赞同：3
> 
> 时间：2012-10-03T12:28:24.337
> 
> 标签：performance, measurement

我正在寻找一种解决方案/软件来模仿普通桌面用户并测量软件上的不同操作需要多长时间。例如，在不同时间打开软件需要多长时间，当用户单击按钮 A 时程序响应需要多长时间等。我不想进入 API/代码级别。我想设置不同的测试，例如“1\. 打开软件 2\. 单击按钮 A 3\. 在打开的窗口中单击按钮 B 并记录执行时间”。

我在这里发现的所有问题都与代码级/服务器性能测量有关。

# real-time - 使用 SCHED_RR 的实时流程缺少最后期限

> ID：12708470
> 
> 赞同：0
> 
> 时间：2012-10-03T12:29:03.187
> 
> 标签：real-time, embedded-linux, scheduler

我在 ARMv7 嵌入式 OMAP 系统上有以下配置。sched_rt_period_us = 1000000 = 1 秒 sched_rt_runtime_us = 950000 = 0.95 秒

我有 4 个实时进程运行 SCHED_RR 和 pri = 1 并且 sched_rr_get_interval () 返回 93750000 纳秒，即系统上的 0.093750 秒。

我添加了一个新进程，SCHED_RR 和 pri 为 1，默认 rr_interval 为 0.09375 秒。

根据此配置：每秒 5 个 RT 进程必须每次执行 2 次（0.09375 * 10 = 0.9375 秒），其余 1 秒的时间间隔将由非 RT 任务使用，即 1.0 - 0.9375 = 0.0625 秒.

但正如我从执行中看到的那样，第 5 个新添加的任务错过了时间线，并且仅随机执行并且每 1 秒或不确定地产生输出。请帮助我了解如何使这个新进程具有确定性，以便它按照上述配置每秒执行两次。

我尝试将静态 pri 配置为 2，并使用 SCHED_FIFO 进行了检查，但得到了相同的结果。

或者我在这些计算中遗漏了什么。

我正在使用：Linux xxxx 2.6.33 #2 PREEMPT Tue Aug 14 16:13:05 CEST 2012 armv7l GNU/Linux

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T07:02:58.100

Are you sure that the scheduler does not fail because it is not able to honor the scheduling requests? I mean, that fifth task doesn't meet the deadline because the system is too heavily loaded?

As far as I know, sched_setscheduler does not have a way to signal that the system load is too heavy. To know if the system is able to meet the request, you need another scheduling algorithm, such as [edf](http://en.wikipedia.org/wiki/Earliest_deadline_first_scheduling). Maybe you want to check its implementation for [linux](https://github.com/jlelli/sched-deadline/wiki).

# objective-c - 错误：链接器命令失败，退出代码为 1（使用 -v 查看调用

> ID：12708482
> 
> 赞同：0
> 
> 时间：2012-10-03T12:29:45.960
> 
> 标签：objective-c, xcode, error-handling

我在下面收到此错误消息。我已经在stackoverflow上尝试了surgestion并搜索了其他解决方案，但它们不起作用。有人能帮忙吗？

```
>  setenv IPHONEOS_DEPLOYMENT_TARGET 6.0
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -bundle -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk -L/Users/stuart/Library/Developer/Xcode/DerivedData/tab_project-evwkhgsuxscoetcgithrfgftafyk/Build/Products/Debug-iphonesimulator -F/Users/stuart/Library/Developer/Xcode/DerivedData/tab_project-evwkhgsuxscoetcgithrfgftafyk/Build/Products/Debug-iphonesimulator -F/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/Developer/Library/Frameworks -F/Applications/Xcode.app/Contents/Developer/Library/Frameworks -filelist "/Users/stuart/Library/Developer/Xcode/DerivedData/tab_project-evwkhgsuxscoetcgithrfgftafyk/Build/Intermediates/tab project.build/Debug-iphonesimulator/tab projectTests.build/Objects-normal/i386/tab projectTests.LinkFileList" -bundle_loader "/Users/stuart/Library/Developer/Xcode/DerivedData/tab_project-evwkhgsuxscoetcgithrfgftafyk/Build/Products/Debug-iphonesimulator/tab project.app/tab project" -Xlinker -objc_abi_version -Xlinker 2 -fobjc-link-runtime -Xlinker -no_implicit_dylibs -mios-simulator-version-min=6.0 -framework SenTestingKit -framework UIKit -framework Foundation -o "/Users/stuart/Library/Developer/Xcode/DerivedData/tab_project-evwkhgsuxscoetcgithrfgftafyk/Build/Products/Debug-iphonesimulator/tab projectTests.octest/tab projectTests"

ld: file not found: /Users/stuart/Library/Developer/Xcode/DerivedData/tab_project-evwkhgsuxscoetcgithrfgftafyk/Build/Products/Debug-iphonesimulator/tab project.app/tab project
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:05:00.927

您可能已通过拖放将文件添加到您的解决方案/项目中。

尝试这个：

1.  选择您的项目
2.  转到构建阶段选项卡
3.  展开编译源
4.  点击“+”并添加您想要包含在构建中的所有 *.m 文件

# php - 向多个设备发送推送通知：一段时间后 APNS 响应是否定的

> ID：12708486
> 
> 赞同：1
> 
> 时间：2012-10-03T12:30:03.643
> 
> 标签：php, iphone, objective-c, push-notification, apple-push-notifications

我正在尝试为多个设备发送通知。所以我得到一个数组的令牌，打开连接，循环发送通知，关闭连接。

但是，在 9-10 个设备之后，它会停止发送。我相信苹果会以某种方式断开连接。

这是我的代码：

```
$message = 'Push';
$passphrase = 'mypass';
$ctx = stream_context_create();
stream_context_set_option($ctx, 'ssl', 'local_cert', 'MyPemFile.pem');
stream_context_set_option($ctx, 'ssl', 'passphrase', $passphrase);

// Open a connection to the APNS server
$fp = stream_socket_client(
    'ssl://gateway.push.apple.com:2195', $err,
    $errstr, 60, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx);
if (!$fp)
    exit("Failed to connect: $err $errstr" . PHP_EOL);
echo 'Connected to Apple service. ' . PHP_EOL;

// Encode the payload as JSON
$body['aps'] = array(
    'alert' => $message,
    'sound' => 'default'
    );
$payload = json_encode($body);

$result = 'Start'.PHP_EOL;
$tokenArray = array('mytoken');
foreach ($tokenArray as $item)
{
// Build the binary notification
$msg = chr(0).pack('n', 32).pack('H*', $item).pack('n', strlen($payload)).$payload;
// Send it to the server
$result = fwrite($fp, $msg, strlen($msg));
if (!$result)
    echo 'Failed message'.PHP_EOL;
else
    echo 'Successful message'.PHP_EOL;
}
// Close the connection to the server
fclose($fp); 
```

我的代码有问题吗？我想我需要打开一次连接，发送通知然后关闭。我应该用多个令牌做 fwrite() 吗？我不知道如何。任何想法或解决方案都被接受。

顺便说一句，答案是这样的：

```
Successful message  
Successful message  
Successful message  
Successful message  
Successful message  
Successful message  
Successful message  
Successful message  
Successful message  
Successful message
Failed message
Failed message
Failed message
Failed message
Failed message
...
Failed message 
```

**PS**我有相同代码的字符问题，但在[另一个问题](https://stackoverflow.com/questions/12704638/apple-push-notifications-with-foreign-accent-characters-not-receiving)中解决了，这是另一个问题，不是重复的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:48:39.663

第一条失败的消息可能有问题，此时 Apple 将关闭连接以向您发出存在问题的信号。如果您使用的是增强格式，您有机会在 Apple 关闭连接之前获得一些反馈，以查看您发送的通知有什么问题。发生这种情况后，您必须重新建立连接以发送更多消息。

它可能失败的原因有很多。您可能发送了无效的设备令牌，您的有效负载可能无效或长度错误等。

最好查看 APNS 的文档：http: [//developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingWIthAPS/CommunicatingWIthAPS.html](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingWIthAPS/CommunicatingWIthAPS.html)

# vba - Excel 中的 VBA：从 ActiveX 文本框创建图表

> ID：12708487
> 
> 赞同：1
> 
> 时间：2012-10-03T12:30:04.557
> 
> 标签：vba, excel, charts, activex

我正在尝试从我放入工作表中的 5 个 ActiveX 文本框创建一个图表。首先，用户输入值，然后按下生成图表的按钮。

这是我的方法，但它不起作用。它说类似“需要对象”

```
Private Sub CommandButton1_Click()

Dim arKurse(4) As Double

arKurse(0) = Conver.ToDouble(TextBox1.Text)
arKurse(1) = Conver.ToDouble(TextBox2.Text)
arKurse(2) = Conver.ToDouble(TextBox3.Text)
arKurse(3) = Conver.ToDouble(TextBox4.Text)
arKurse(4) = Conver.ToDouble(TextBox5.Text)

Dim oChtObj As ChartObject
Set oChtObj = ActiveSheet.ChartObjects.Add(Left:=445, Width:=385, Top:=10, Height:=245)

With oChtObj.Chart
    .SeriesCollection.NewSeries
    .SeriesCollection.Values = arKurse
    .SeriesCollection.XValues = Array("1", "2", "3", "4", "5")

    .ChartType = xlLine
    .HasLegend = False
    .HasTitle = True
    .ChartTitle.Caption = "Chart"

End With

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:43:38.993

有几件事不起作用

1.  除非您有充分的理由使用自定义方法，否则 Conver.ToDouble 应该是 CDbl？
2.  TextBox.Text 应该是用户窗体上的 Textbox.value ，并且最好用它的父级来限定文本框的位置。（在这种情况下 Userform1 但如果文本框在工作表上，则可能是 Sheet1）
3.  需要定义哪个seriescollection

以下内容已更新，希望能正常工作

```
Option Explicit

Sub SetupUserformToTest()
UserForm1.Show
UserForm1.TextBox1.Value = 1
UserForm1.TextBox2.Value = 2
UserForm1.TextBox3.Value = 3
UserForm1.TextBox4.Value = 4
UserForm1.TextBox5.Value = 1
CommandButton1_Click
End Sub

Private Sub CommandButton1_Click()

Dim arKurse(4) As Double

arKurse(0) = CDbl(UserForm1.TextBox1.Value)
arKurse(1) = CDbl(UserForm1.TextBox2.Value)
arKurse(2) = CDbl(UserForm1.TextBox3.Value)
arKurse(3) = CDbl(UserForm1.TextBox4.Value)
arKurse(4) = CDbl(UserForm1.TextBox5.Value)

Dim oChtObj As ChartObject
Set oChtObj = ActiveSheet.ChartObjects.Add(Left:=445, Width:=385, Top:=10, Height:=245)

With oChtObj.Chart
    .SeriesCollection.NewSeries
    'Assumed series 1
    .SeriesCollection(1).Values = arKurse
    .SeriesCollection(1).XValues = Array("1", "2", "3", "4", "5")

    .ChartType = xlLine
    .HasLegend = False
    .HasTitle = True
    .ChartTitle.Caption = "Chart"
End With

End Sub 
```

# css - 使用 CSS3 调整 HTML 元素的大小

> ID：12708491
> 
> 赞同：1
> 
> 时间：2012-10-03T12:30:22.170
> 
> 标签：css, resize, element

我正在使用 CSS3 resizable 属性来调整 HTML Div 元素的大小。

这是示例代码：http: [//jsfiddle.net/blunderboy/nMTm9/1/](http://jsfiddle.net/blunderboy/nMTm9/1/)

但是，我想在 div 的宽度发生变化后立即更新输入元素内的值。我们怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T13:23:08.780

使用 setInterval，您可以这样做：

[http://jsfiddle.net/nMTm9/3/](http://jsfiddle.net/nMTm9/3/)

它并不完美，但效果很好。

```
var input = $('input'), div = $('#resizable');
function calculate(){
    input.val(div.width()+"px");
}
setInterval(calculate,500);​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T13:12:40.230

不，**CSS 不能改变 input 的 value 属性**，或者任何元素的任何属性。

按样式关闭更改内容是，如果您将内容放在输入字段中或擦除内容输入字段，则标签由 css 更改。

[在此处输入链接描述](http://jsfiddle.net/centerwow/nMTm9/5/)

# css - 为什么 Firefox 会忽略来自@font-face 的自定义字体？

> ID：12708492
> 
> 赞同：1
> 
> 时间：2012-10-03T12:30:23.013
> 
> 标签：css, firefox, font-face

假设我们有一个这样的字体部分

```
@font-face {
   font-family: 'F';
   src: url("/fonts/F.eot?") format("embedded-opentype"); 
   src: local('?'),
        url("/fonts/F.woff") format("woff"),
        url("/fonts/F.ttf") format("truetype"),
        url("/fonts/F.svg") format("svg"); 
   font-weight: normal;
   font-style: normal;
} 
```

和体型

```
body {
font-family: 'F' /*, sans-serif*/;
} 
```

现在，如果我取消注释无衬线字体，它将优先于自定义字体，尽管最后提到了它。为什么？如何为无法使用可下载网络字体的用户指定备份变体？

**===更新===**

如果不确定为什么`local('?')`要使用，请看这里[http://paulirish.com/2009/bulletproof-font-face-implementation-syntax/#smiley](http://paulirish.com/2009/bulletproof-font-face-implementation-syntax/#smiley)

我认为它`sans-serif`破坏了我的 CSS 是错误的，这是显示自定义“F”字体的实际代码。如果 'Trebuchet MS' 将被取消注释，font-family 将变为 sans。

```
body {
font-family: 'F' /*, 'Trebuchet MS'*/ , sans-serif;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:36:44.803

您的语法似乎有点不正确。这 '？' 在第一个“src”属性值的末尾，旨在修复 IE 版本 6 到 8，但实际上可能会影响 Firefox。要使用的正确语法是：

```
@font-face {
        font-family: 'MyWebFont';
        src: url('webfont.eot'); /* IE9 Compat Modes */
        src: url('webfont.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
             url('webfont.woff') format('woff'), /* Modern Browsers */
             url('webfont.ttf')  format('truetype'), /* Safari, Android, iOS */
             url('webfont.svg#svgFontName') format('svg'); /* Legacy iOS */
        } 
```

资料来源：[http ://www.fontspring.com/blog/further-hardening-of-the-bulletproof-syntax](http://www.fontspring.com/blog/further-hardening-of-the-bulletproof-syntax)

# php - 通过 PHP 在 $value 更改处更新 Mysql 行

> ID：12708494
> 
> 赞同：2
> 
> 时间：2012-10-03T12:30:25.913
> 
> 标签：php, mysql, sql, sql-update

我需要一些帮助。请注意：以下代码行仅用于主要思想示例。

我有一个 php 函数来计算 mysql 表中的一些条目

```
$query = "SELECT COUNT(my_matches) FROM my_table";
$db->setQuery($query);
$value = $db->loadResult(); 
```

现在，我需要用 $value 更新另一个表的另一行

```
$query = "UPDATE my_table_reviews SET user_rating = (user_rating + '$value') WHERE listing_id = 77");
$db->setQuery($query);
$autorating = $db->loadResult();} 
```

问题是：如何仅在 $value 更改时从 my_table_review 更新行 user_rating？

换句话说...如果 $value 更改为这个（第二个查询）。如果 $value 稳定，什么也不做。

我有点困惑......任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T12:35:15.460

> 如果 $value 更改为这个（第二个查询）。如果 $value 稳定，什么也不做。

然后试试这个：

```
UPDATE my_table_reviews 
SET user_rating = (user_rating + '$value') 
WHERE listing_id = 77
-- update if only the user_rating had changed:
AND user_rating <> user_rating + $value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:48:30.797

如果您想在 PHP 变量更改 ($value) 时触发数据库更新，那么您需要抽象该变量的所有更新。例如

```
class Example {
  var $value = 0;

  function var_set($v) {
    $this->value = $v;
  }

  function var_get() {
    return $this->value;
  }
} 
```

...然后实例化您的类并访问变量：

```
$k = new Example();
$k->var_set(100);
print_r($k); 
```

一旦你的所有访问器/修改器操作都通过这个抽象，你就可以检查它是否已经改变并将其用作触发器。

```
 function var_set($v) {
    if ($v != $this->value) {
      $this->value = $v;
      // update the DB
      $query = "UPDATE my_table_reviews SET user_rating = (user_rating + '".$this->value."') WHERE listing_id = 77");
      // ...
    }
  } 
```

另一方面，如果您希望 MySQL 识别是否有更新，并且仅在更新不同时应用您的更新，那么只需运行您最初建议的 UPDATE 语句。MySQL 将测试以查看是否有更改，并且仅在有更改时才应用它。添加额外的逻辑来强制它检测更改只会减慢查询解析时间。在触发查询之前在 PHP 中进行测试要好得多。

# python - 如何在不耗尽内存的情况下对缺少记录的大型 xyz 文件进行网格化

> ID：12708496
> 
> 赞同：3
> 
> 时间：2012-10-03T12:30:34.150
> 
> 标签：python, numpy, grid

我有需要网格化的 xyz 文本文件。对于每个 xyz 文件，我都有关于原点坐标单元大小和行/列数的信息。但是，xyz 文件中缺少没有 z 值的记录，因此仅从当前记录创建网格会因为缺少值而失败。所以我尝试了这个：

```
nxyz = np.loadtxt(infile,delimiter=",",skiprows=1)

ncols = 4781
nrows = 4405
xllcorner = 682373.533843
yllcorner = 205266.898604
cellsize = 1.25

grid = np.zeros((nrows,ncols))

for item in nxyz:
    idx = (item[0]-xllcorner)/cellsize
    idy = (item[1]-yllcorner)/cellsize
    grid[idy,idx] = item[2]

outfile = open(r"e:\test\myrasout.txt","w")
np.savetxt(outfile,grid[::-1], fmt="%.2f",delimiter= " ")
outfile.close() 
```

这让我得到了 xyz 文件中没有记录的零网格。它适用于较小的文件，但对于 290Mb 大小的文件（约 8900000 条记录）出现内存不足错误。这不是我必须处理的最大文件。

因此，我尝试了 Joe Kington 的另一种（迭代）方法，我在[这里](https://stackoverflow.com/questions/8956832/python-out-of-memory-on-large-csv-file-numpy)找到了加载 xyz 文件的方法。这适用于 290MB 文件，但在下一个更大的文件（533MB，~15600000 条记录）上出现内存不足错误而失败。

如何在不耗尽内存的情况下正确网格化这些较大的文件（考虑丢失的记录）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:09:57.383

根据评论，我将代码更改为

```
ncols = 4781
nrows = 4405
xllcorner = 682373.533843
yllcorner = 205266.898604
cellsize = 1.25
grid = np.zeros((nrows,ncols))

with open(file) as f:
    for line in f:
        item = line.split() # fill with whatever is separating the values 
        idx = (item[0]-xllcorner)/cellsize
        idy = (item[1]-yllcorner)/cellsize
        #... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T12:55:12.943

您可以使用 NumPy 进行精美的索引。尝试使用这样的东西，而不是循环，这可能是你问题的根源：

```
grid = np.zeros((nrows,ncols))
grid[nxyz[:,0],nxyz[:,1]] = nxyz[:,2] 
```

使用原点和像元大小的转换，它会涉及更多：

```
grid = np.zeros((nrows,ncols))
grid[(nxyz[:,0]-x11corner)/cellsize,(nxyz[:,1]-y11corner)/cellsize] = nxyz[:,2] 
```

如果这没有帮助，则`nxyz`数组太大，但我对此表示怀疑。如果是，那么您可以分几个部分加载文本文件，然后按顺序对每个部分执行上述操作。

PS您可能知道文本文件中包含的数据范围，并且您可以通过在加载文件时明确说明这一点来限制内存使用。就像这样，如果您正在处理最多 16 位整数：`np.loadtxt("myfile.txt", dtype=int16)`.

# php - 多维数组php移动孩子

> ID：12708497
> 
> 赞同：0
> 
> 时间：2012-10-03T12:30:40.873
> 
> 标签：php, mysql, arrays

我有一个像这样的多维数组

```
Array
(
    [59] => stdClass Object
        (
            [id] => 59
            [parent_id] => 0
            [name] => detalles de los
            [order] => 1

        )

    [60] => stdClass Object
        (
            [id] => 60
            [parent_id] => 0
            [name] => Fechas varias
            [order] => 2

        )

    [62] => stdClass Object
        (
            [id] => 62
            [parent_id] => 0
            [name] => seccion de fechas dependientes
            [order] => 3

        )

    [63] => stdClass Object
        (
            [id] => 6
            [parent_id] => 0
            [name] => tabbbbb
            [order] => 5
            [children] => Array
                (
                    [61] => stdClass Object
                        (
                            [id] => 61

                            [parent_id] => 63
                            [name] => Números varios
                            [order] => 5

                        )

                    [70] => stdClass Object
                        (
                            [id] => 70
                            [parent_id] => 63
                            [name] => tablas22
                            [order] => 6

                            [children] => Array
                                (
                                    [58] => stdClass Object
                                        (
                                            [id] => 58
                                            [parent_id] => 70
                                            [name] => datos demograficos
                                            [order] => 4

                                        )

                                )

                        )

                )

        )

) 
```

我想删除条目 70

```
[70] => stdClass Object
                        (
                            [id] => 70
                            [parent_id] => 63
                            [name] => tablas22
                            [order] => 6 
```

但我希望孩子 [58] 成为 [61] 的孩子，而 [70] 成为 [61] 的孩子

我该怎么做？我尝试取消设置，但它似乎不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:33:29.627

您可以尝试以下方法

```
unset($array[63]->children[70]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:34:11.993

摆脱`70`这样做：

```
unset $yourArray[63]['children'][70]; 
```

您不能轻易更改节点密钥，因此您需要克隆它并取消设置旧的，即“重新输入”条目`58`成为`61`：

```
$yourArray[61] = $yourArray[58];
unset( $yourArray[58] ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T12:37:11.320

```
$child58 = $array[63]->children[70]->children[58];
unset($array[63]->children[70]->children);

$child70 = $array[63]->children[70];
unset($array[63]->children[70]);

$array[63]->children[61]->children = array(58 => $child58, 70 => $child70); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T12:39:57.120

问题有点复杂，因为您有一个必须移动的数据结构，并且您也有表示该数据结构的实际数据，例如，每个 stdClass 都有一个 parent_id 属性，该属性指向有用的地方。

更正您的数据结构可能很容易，但这种结构来自某个地方，您最好更改此来源。

对于动作，只需复制和删除。

首先将 [58] 移动到新位置：

```
$array[63]->children[61]->children[58] = $array[63]->children[70]->children[58];
unset ($array[63]->children[70]->children[58]); 
```

然后移动 70：

```
$array[63]->children[61]->children[70] = $array[63]->children[70];
unset ($array[63]->children[70]); 
```

# javascript - 使用 jQuery 或 JavaScript 生成 Dynamic AJAX Toolkit 控件

> ID：12708499
> 
> 赞同：0
> 
> 时间：2012-10-03T12:30:46.560
> 
> 标签：javascript, ajax, jquery, asynchronous

我想`(AsyncFileUpload)`使用 JavaScript 或 jQuery 创建（动态）AJAX 控件，是否可以创建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:36:05.953

为什么不使用[ajaxFileUpload](http://www.phpletter.com/Our-Projects/AjaxFileUpload/) jQuery 插件？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-03T14:46:49.847

基本上这样的东西应该可以工作，检查控件ID以引用您将拥有的相应控件

```
Sys.Application.add_init(function() {
    $create(Sys.Extended.UI.AjaxFileUpload, 
        { "allowedFileTypes":"jpg,png,gif",
          "clientStateField":$get("ctrlClientStateField"),
          "contextKey":"contextKey",
          "maximumNumberOfFiles":4,
          "postBackUrl":"/submitreport.aspx",
          "throbber":$get("ctrlThrobber")
        }, null, null, $get("ctrlControl"));
}); 
```

这是用于控制的客户端代码的源代码，您可以使用它来计算参数 - [http://ajaxcontroltoolkit.codeplex.com/SourceControl/changeset/view/7ab51a2e2ccf#Server%2fAjaxControlToolkit%2fAsyncFileUpload%2fAsyncFileUpload。 pre.js](http://ajaxcontroltoolkit.codeplex.com/SourceControl/changeset/view/7ab51a2e2ccf#Server%2fAjaxControlToolkit%2fAsyncFileUpload%2fAsyncFileUpload.pre.js)

# c++ - Valgrind 与目录名中断？

> ID：12708501
> 
> 赞同：1
> 
> 时间：2012-10-03T12:30:59.283
> 
> 标签：c++, valgrind, dirname

```
==11136== Invalid read of size 8
==11136==    at 0x5AFC696: memrchr (memrchr.S:289)
==11136==    by 0x5B57FAF: dirname (dirname.c:45)
==11136==    by 0x405F43: push::lg_cmd_dirname(push::Env&) (LGExtension.cpp:379)
==11136==    by 0x42533C: push::Instruction::operator()(push::Env&) const (in /home/bots/svn/eco/branches/skynet_BigPUSH/src/push3.0/extension/push_bloodline)
==11136==    by 0x488ECD: push::Env::go(int) (Env.cpp:72)
==11136==    by 0x4A84D5: main (bloodline.cpp:99)
==11136==  Address 0x640daf8 is 8 bytes inside a block of size 10 alloc'd
==11136==    at 0x4C2B6CD: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==11136==    by 0x5AEF801: strdup (strdup.c:43)
==11136==    by 0x405EF2: push::lg_cmd_dirname(push::Env&) (LGExtension.cpp:369)
==11136==    by 0x42533C: push::Instruction::operator()(push::Env&) const (in /home/bots/svn/eco/branches/skynet_BigPUSH/src/push3.0/extension/push_bloodline)
==11136==    by 0x488ECD: push::Env::go(int) (Env.cpp:72)
==11136==    by 0x4A84D5: main (bloodline.cpp:99)
==11136== 
```

这是一个合法的错误吗？看起来读取发生在有效块内。在我的程序中，调用如下所示：

```
 char *path = strdup(full_path.c_str());
        cerr << "Path is : " << path << endl;
        result = dirname(path);
        if(result < 0){
                cerr << "Dirname failed for some reason. Check log." << endl;
        } 
```

错误发生时 cerr 的输出是：

```
Path is : /tmp/tmp/ 
```

这是一个有效的路径。Dirname 对此应该没有任何问题，并且它在堆分配的副本上运行。

编辑：

**这是一个会产生此错误的最小示例：**

```
#include <string.h>
#include <stdio.h>
#include <iostream>
#include <libgen.h>

int main(){

        char *path = strdup("/tmp/tmp/");
        char* result = dirname(path);
        std::cerr << result << std::endl;
} 
```

用 g++ 编译。

用 valgrind 运行，你会得到：

```
==32466== Memcheck, a memory error detector                                                                                                                                                                                                  
==32466== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.                                                                                                                                                                    
==32466== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info                                                                                                                                                                  
==32466== Command: ./a.out                                                                                                                                                                                                                   
==32466==                                                                                                                                                                                                                                    
==32466== Invalid read of size 8                                                                                                                                                                                                             
==32466==    at 0x51C7696: memrchr (memrchr.S:289)                                                                                                                                                                                           
==32466==    by 0x5222FAF: dirname (dirname.c:45)                                                                                                                                                                                            
==32466==    by 0x400865: main (in /home/j3doucet/a.out)                                                                                                                                                                                     
==32466==  Address 0x59ff048 is 8 bytes inside a block of size 10 alloc'd                                                                                                                                                                    
==32466==    at 0x4C2B6CD: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)                                                                                                                                                   
==32466==    by 0x51BA801: strdup (strdup.c:43)                                                                                                                                                                                              
==32466==    by 0x400855: main (in /home/j3doucet/a.out)                                                                                                                                                                                     
==32466==                                                                                                                                                                                                                                    
/tmp
==32466== 
==32466== HEAP SUMMARY:
==32466==     in use at exit: 10 bytes in 1 blocks
==32466==   total heap usage: 1 allocs, 0 frees, 10 bytes allocated
==32466== 
==32466== LEAK SUMMARY:
==32466==    definitely lost: 10 bytes in 1 blocks
==32466==    indirectly lost: 0 bytes in 0 blocks
==32466==      possibly lost: 0 bytes in 0 blocks
==32466==    still reachable: 0 bytes in 0 blocks
==32466==         suppressed: 0 bytes in 0 blocks
==32466== Rerun with --leak-check=full to see details of leaked memory
==32466== 
==32466== For counts of detected and suppressed errors, rerun with: -v
==32466== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 2 from 2) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:25:38.117

Valgrind 指示从 10 字节块中的第 nr 8 字节开始读取大小为 8 的内容。此读取由 memrchr 完成。此类函数通常基于您可以读取比分配的块更多的字节的假设进行优化。为了避免报告此类问题，Valgrind 不得不用自己的重新定义函数替换此类优化函数。

memrchr 仅在 Valgrind 中从 3.8 版开始重新定义。

=> 你应该使用最新版本的 Valgrind (3.8.1) 重试。然后可能不再报告错误（假设由于未重新定义 memrchr 而实际上是误报）。

# css - css ：在内容没有下划线之后

> ID：12708502
> 
> 赞同：6
> 
> 时间：2012-10-03T12:30:59.690
> 
> 标签：css, pseudo-class, underline, text-decorations, css-content

为了分隔导航中的链接，我设置了以下内容

```
#menu-main li a:after{
    content: " * ";
} 
```

当前项目获得额外

```
text-decoration: underline; 
```

我现在的问题是，“*”也有下划线，但不应该

我试图添加

```
#menu-main li a:after{
    text-decoration: none !important;
} 
```

但它没有效果

有谁知道如何在文本中添加下划线而不是 :after 内容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T13:19:05.027

在正常流程中，伪元素扩展了元素的维度，你看到的就是链接本身下划线的下划线。添加`a:after {text-decoration: line-through;}`验证。

这是一个建议的解决方案：http: [//jsfiddle.net/Ronny/Smr38/](http://jsfiddle.net/Ronny/Smr38/)

基本上，当`position: absolute`用于伪元素时，它们不再影响其父元素的尺寸，因此下划线在正确的位置被剪切。你仍然需要处理诸如指针事件、悬停状态和焦点环之类的事情，但我至少留下了后者让你弄清楚。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T12:49:48.837

如果您可以控制标记，则可以在链接中插入跨度

```
<a href="..."><span>your link</span></a> 
```

并使用这个 CSS

```
a { text-decoration: none }
a span { text-decoration: underline } 
```

这样做，注入`:after`伪元素的内容不会加下划线

否则，您可以像这样将样式应用于`li:after`（如果可能的话）

```
#menu-main li:after{
    content: " * ";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-13T09:43:40.577

这是一个老问题，但这是您使用 Google 发现的问题，所以我想当您需要伪元素来增加“父”的大小并且由于某种原因绝对定位不是一个选项时，我会分享我的解决方案：

```
#menu-main li a:after{
    content: " * ";
    display:inline-block; /* So we can set a width */
    width: 0;
    margin-left: 10px; /* "Size" of the Pseudo-element */
} 
```

由于宽度为 0，因此它不显示`text-decoration`. 与接受的答案相比，这还涉及更少的代码和更少的样式之间的依赖关系。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-25T12:06:36.397

在我的情况下，我什至不需要宽度，它只是添加内联块。

# c# - C# 中的异步是否与 F# 中的实现相同？

> ID：12708504
> 
> 赞同：20
> 
> 时间：2012-10-03T12:31:06.187
> 
> 标签：c#, asynchronous, f#

C# 4.5 中的异步实现是否与 F# 2 中的线程使用方式完全相同？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-03T12:54:01.270

它们不一样。主要区别在于 C# 使用标准 .NET`Task<T>`来表示异步计算，而 F# 使用自己的称为 .NET 的类型`Async<T>`。

更具体地说，主要区别在于：

*   AC# async 方法创建一个`Task<T>`立即启动的（*热任务*模型），而 F# 创建一个必须显式启动的计算（*生成器*模型）。这意味着 F# 计算更易于组合（您可以编写更高级别的抽象）。

*   在 F# 中，您还可以更好地控制计算是如何开始的。您可以使用`Async.Start`在后台`Async.StartImmediate`启动它或在当前线程上启动它来启动计算。

*   F# 异步工作流支持自动*取消*，因此您不必`CancellationToken`四处走动。

*   也许第一点的另一个结果是 F# 异步工作流也支持尾递归，因此您可以编写递归工作流（这在 C# 中不容易工作，但 C# 不使用这种编程风格）

我写了一篇关于这个主题的更详细的文章：[异步 C# 和 F#（II.）：它们有何不同？](http://tomasp.net/blog/async-csharp-differences.aspx)

# gcc - cygwin中奇怪的无声cc1plus错误

> ID：12708514
> 
> 赞同：1
> 
> 时间：2012-10-03T12:31:30.023
> 
> 标签：gcc, crash, cygwin

我在 windows xp 下安装了 g++ 4.5 的最新 cygwin。编译器运行良好，但同时以某种方式损坏（通过重新启动重置环境变量？）。我有一个简短的测试程序（称为`cxx.cpp`）

```
#include<iostream>
int main(void){
    for(int i=0; i<3; i++) std::cerr<<i<<std::endl;
} 
```

我跑

```
$ g++ cxx.cpp   # no output, jsut exits
$ echo $?
1 
```

然后尝试

```
$ strace -ff g++-4 cxx.cpp
... lots of output ...
   18  151816 [main] g++-4 2804 build_env: env count 4, bytes 275
   37  151853 [main] g++-4 2804 build_env: envp 0x61274708, envc 47
  428  152281 [main] g++-4 2804 child_info::child_info: subproc_ready 0x6CC
 1399  153680 [main] g++-4 2804 child_info_spawn::worker: pid 2804, prog_arg /usr/lib/gcc/i686-pc-cygwin/4.5.3/cc1plus.exe, cmd line C:\cygwin\lib\gcc\i686-pc-cygwin\4.5.3\cc1plus.exe -quiet -D__CYGWIN32__ -D__CYGWIN__ -Dunix -D__unix__ -D__unix -idirafter /usr/lib/gcc/i686-pc-cygwin/4.5.3/../../../../include/w32api -idirafter /usr/lib/gcc/i686-pc-cygwin/4.5.3/../../../../i686-pc-cygwin/lib/../../include/w32api cxx.cpp -quiet -dumpbase cxx.cpp -mtune=generic -march=i686 -auxbase cxx -o /tmp/ccr4l3sS.s)
   28  153708 [main] g++-4 2804! child_info_spawn::worker: new process name \\?\C:\cygwin\lib\gcc\i686-pc-cygwin\4.5.3\cc1plus.exe
   19  153727 [main] g++-4 2804! child_info_spawn::worker: spawned windows pid 2816
   17  153744 [main] g++-4 2804! child_info::sync: n 2, waiting for subproc_ready(0x6CC) and child process(0x670)
--- Process 2816, exception C0000139 at 7C96671E
--- Process 2816, exception C0000139 at 7C96671E
 6683  160427 [main] g++-4 2804! child_info::sync: pid 2816, WFMO returned 1, exit_code 0xC0000139, res 0
  461  160888 [main] g++-4 2804! child_info::proc_retry: exit_code 0xC0000139 
```

我看`cc1plus`有问题。我使用 child_info_spawn::worker 揭示的内容来称呼自己

```
$ /lib/gcc/i686-pc-cygwin/4.5.3/cc1plus.exe -quiet -D__CYGWIN32__ -D__CYGWIN__ -Dunix -D__unix__ -D__unix -idir./../../include/w32api -idirafter /usr/lib/gcc/i686-pc-cygwin/4.5.3/../../../../i686-pc-cygwin/lib/../../includtune=generic -march=i686 -auxbase cxx -o /tmp/ccr4l3sS.s
$ echo $?
127 
```

任何建议如何分析出了什么问题？我应该检查什么？我对cygwin相当陌生。

**编辑：**`cc1plus`在 strace 下 运行

```
strace -ff /lib/gcc/i686-pc-cygwin/4.5.3/cc1plus.exe -quiet -D__CYGWIN32__ -D__CYGWIN__ -Dunix -D__unix__ -D__unix -idir./../../include/w32api -idirafter /usr/lib/gcc/i686-pc-cygwin/4.5.3/../../../../i686-pc-cygwin/lib/../../includtune=generic -march=i686 -auxbase cxx -o /tmp/ccr4l3sS.s 
```

导致弹出对话框显示“过程入口点 __gxx_personality_v0 无法位于动态链接库 cygstdc++-6.dll 中”：

![错误对话截图](../Images/dded3d52460d2bf56971af86fe6c094b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:18:14.703

with 的问题`cygstdc++-6.dll`让我认为以前手动安装`gcc-4.7`with`--program-suffix=-4.7`是问题所在。果然，根据[http://gcc.gnu.org/faq.html#multiple](http://gcc.gnu.org/faq.html#multiple)，两个版本的gcc即使不同也不能并行安装`--program-suffix`，因为它只适用于程序，不适用于libs，`--prefix`必须使用不同的也是。

根据[http://cygwin.com/ml/cygwin/2010-03/msg00031.html](http://cygwin.com/ml/cygwin/2010-03/msg00031.html)，重新安装一些基础包应该可以解决这个问题。

# playframework - 如何创建承诺 play2.0 框架-Java

> ID：12708515
> 
> 赞同：8
> 
> 时间：2012-10-03T12:31:31.217
> 
> 标签：playframework, playframework-2.0

如何创建一个`Promise<Result>`in Play 2.0 框架 - Java

我看到这个链接[http://www.playframework.org/documentation/2.0.4/JavaAsync](http://www.playframework.org/documentation/2.0.4/JavaAsync)。它不包含那么多细节。除了参考我之外，你知道任何教程吗？请。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-25T04:25:42.290

这是在 Play 2.2 中创建 Promise 的新方法

```
Promise<Boolean> myPromise = Promise.promise(new Function0<Boolean>() {
    public Boolean apply() throws Throwable {
        // TODO - Add Implementation here.
        return Boolean.TRUE;
    }

}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-03T17:59:21.107

James Roper（Play 框架开发人员）有一个在 Play 中与 Java 一起使用 Promise 的好例子： [https://github.com/jroper/play-promise-presentation/blob/master/src/main/java/controllers/Application。爪哇](https://github.com/jroper/play-promise-presentation/blob/master/src/main/java/controllers/Application.java)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-03T12:52:17.710

如[您提到的文档](http://www.playframework.org/documentation/2.0.4/JavaAsync)中所述，请使用`Akka.future`：

```
Promise<Result> promiseOfResult = Akka.future(
    new Callable<Result>() {
      public Result call() {
        return ok("This is a promise result !");
      }
    }
  ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-26T14:16:44.840

```
public F.Promise<Result> asyncFoo() {

          F.Promise<Integer> promise = F.Promise.promise(() -> longRunningCalculation());

          return promise.map((Integer i) -> ok("The calculation result is: " + i));

} 
```

[https://www.typesafe.com/blog/play-framework-with-java-8](https://www.typesafe.com/blog/play-framework-with-java-8)

# asp.net-mvc-4 - ASP VB。NET 突出显示行到红色

> ID：12708523
> 
> 赞同：2
> 
> 时间：2012-10-03T12:31:56.443
> 
> 标签：asp.net-mvc-4, ping

如果状态等于离线，我想选择该行并突出显示为红色。

我如何在 ASP .NET 中做到这一点？

我看到很多关于受保护的 void OnRowCreated(object sender, GridViewRowEventArgs e) 的例子。

我应该在 Controller 中创建类吗？或查看？对新的 MVC 非常困惑>_<

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:38:47.340

您应该只引用 中的行值`Online/Offline status`并相应地`model`更改`CSS`以突出显示该行。由于没有提供代码，我已经模拟了一个示例：

IE

```
public class OnlineOfflineElements {
    public List<Element> elements { get; set; }

} 

public class Element {
   public bool isOnline { get; set; }
} 
```

然后在你的`View`：

```
@foreach (var status in elements) {
   if (status.isOnline) {
      <tr class="Online">
   } else { 
      <tr class="Offline">
   }
    // Other model content here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T01:53:16.443

我尝试将 CSS TD Class 方法设置为红色，但我无法让它工作。任何的想法？

我的代码如下： -

```
 @For Each item In Model
    Dim currentItem = item
    Dim status = Html.Action("showPing", New With {.ipaddress = currentItem.IP})
    If status.Equals("Online") Then
        @<tr>
            <td>
                @Html.DisplayFor(Function(modelItem) currentItem.Name)
            </td>
            <td>
                @Html.DisplayFor(Function(modelItem) currentItem.IP)
            </td>
            <td>
                @Html.DisplayFor(Function(modelItem) currentItem.Location)
            </td>
            <td>
                @Html.Action("showPing", New With {.ipaddress = currentItem.IP})
            </td>
        </tr> 
    Else
        @<tr>
            <td class="red">
                @Html.DisplayFor(Function(modelItem) currentItem.Name)
            </td>
            <td class="red">
                @Html.DisplayFor(Function(modelItem) currentItem.IP)
            </td>
            <td class="red">
                @Html.DisplayFor(Function(modelItem) currentItem.Location)
            </td>
            <td class="red">
                @Html.Action("showPing", New With {.ipaddress = currentItem.IP})
            </td>
        </tr> 
    End If 
```

下一个

全部显示为红色。我正在使用 ASP .NET VB MVC4

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T14:25:22.557

我刚刚能够在我的网页中为 gridview 完成此操作。我需要能够在离线时将一行数据更改为红色。

```
 Protected Sub grdName_RowDataBound(ByVal sender As Object, e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles grdName.RowDataBound

    If e.Row.RowType = DataControlRowType.DataRow Then
        If DataBinder.Eval(e.Row.DataItem, "Status").ToString() = "OffLine" Then
            e.Row.BackColor = System.Drawing.Color.Red
        End If
    End If

    End Sub 
```

希望这可以帮助。

贝蒂

# ios - 哪种环境适合 iOS 中的井字游戏这样的游戏？

> ID：12708525
> 
> 赞同：4
> 
> 时间：2012-10-03T12:31:59.547
> 
> 标签：ios, opengl-es, cocos2d-iphone, game-engine

我想做一个iOS游戏，其功能可以与简单的井字游戏相媲美。我想知道哪种环境最适合我的需求。

1.  使用 UI Cocoa 组件。
2.  使用 Cocos2d。
3.  使用 OpenGL。

我想要一个易于处理的环境。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T12:34:43.180

关键点是：

> 因为我是 iOS 和 OpenGL 的新手，所以游戏并不复杂。我想要一个易于处理的环境。

所以我建议去Core Animation。在 Core Animation 中，您可以使用 CALayer 来表示井字游戏单元；适当地布置它们；并用动画改变它们的图形状态。很简单。

Cocos2D 也可以，因为它是一个简单的 2D 游戏引擎，但学习起来更复杂，因为它还可以满足更复杂游戏的需求（因此，它提供了许多抽象：精灵/节点/图层/场景/动画/精灵表...）。

OpenGL 会是矫枉过正，但学习它可能是一个不错的选择。

另外，看看这个：[iOS Development Course Fall 2010 Lecture 14 - Tic-Tac-Toe with Inheritance](http://www.youtube.com/watch?v=HKKgMWvjAKg)

从[什么是核心动画？](https://developer.apple.com/library/mac/#documentation/cocoa/conceptual/coreanimation_guide/Articles/WhatisCoreAnimation.html#//apple_ref/doc/uid/TP40004689-SW1)：

> Core Animation 是用于图形渲染、投影和动画的 Objective-C 类的集合。它使用高级合成效果提供流畅的动画，同时保留使用 Application Kit 和 Cocoa Touch 视图架构的开发人员熟悉的分层抽象。
> 
> 动态的、动画的用户界面很难创建，但 Core Animation 通过提供以下功能使创建这些界面变得更容易：
> 
> 1.  高性能合成与简单平易近人的编程模型。
>     
>     
> 2.  一种熟悉的类视图抽象，允许您使用层对象的层次结构创建复杂的用户界面。
>     
>     
>     1.  一种轻量级的数据结构。您可以同时显示数百个图层并为其设置动画。
> 3.  一个抽象动画接口，允许动画在单独的线程上运行，独立于应用程序的运行循环。一旦动画被配置并启动，Core Animation 将承担以帧速率运行它的全部责任。
>     
>     
> 4.  改进了应用程序性能。应用程序只需要在内容发生变化时重绘内容。调整大小和提供布局服务层需要最少的应用程序交互。Core Animation 还消除了以动画帧速率运行的应用程序代码。
>     
>     
> 5.  一个灵活的布局管理器模型，包括一个允许层的位置和大小相对于兄弟层的属性进行设置的管理器。
>     
>     
> 
> 使用 Core Animation，开发人员可以为他们的应用程序创建动态用户界面，而无需使用 OpenGL 等低级图形 API 来获得可观的动画性能。

# phpstorm - 如何在 PhpStorm 中获取有错误的文件列表

> ID：12708528
> 
> 赞同：41
> 
> 时间：2012-10-03T12:32:01.123
> 
> 标签：phpstorm

在 PhpStorm 中，如果文件中存在 PHP 错误，我会在代码窗口的右上角看到一个读取标记。那太棒了。我喜欢的是具有此读取标记的所有文件的列表。

有任何想法吗？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-10-03T17:32:03.083

要获取包含错误和警告的所有文件的列表，请使用`Code`| **检查代码**。可以指定要使用的检查配置文件、要扫描的目录。自定义**范围**提供了一种灵活的方式来在检查结果中包含/排除某些目录或文件。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-03-30T08:45:54.860

稍微偏离主题，但可能会有所帮助。如果您需要跳过文件（例如 CSS 文件）中的所有错误，请打开文件并点击`F2`键盘上的按钮。重复它以循环遍历所有错误。要导航回上一个错误，请点击`Shift + F2`

# java - Java JPanel，如何重叠它们（设置背景图像）

> ID：12708532
> 
> 赞同：2
> 
> 时间：2012-10-03T12:32:05.443
> 
> 标签：java, image, swing, background, jpanel

我需要在我的程序中设置背景图像。主GUI的结构是：

JFrame 包含 - 带有 BoxLayou 的 JPanel 包含...等

我需要在第一个 JPanel 后面放一张图片，但我不知道怎么做。

我写了这段代码：

```
JPanel background = new JPanel();
JLabel labl = new JLabel("This is a dummy label this is a dummy label");
background.add(labl);
// TODO insert an image in background.
Component VERT_RA = Box.createRigidArea(new Dimension(0, 10));
Component HORI_RA = Box.createRigidArea(new Dimension(10, 0));
JPanel main = new JPanel();
main.setLayout(new BoxLayout(main, BoxLayout.PAGE_AXIS));
add(background);
add(main);
main.setOpaque(false);
main.add(VERT_RA);
JPanel a = new JPanel();
a.setLayout(new BoxLayout(a, BoxLayout.LINE_AXIS));
main.add(a);
main.add(VERT_RA);
a.add(HORI_RA);
JPanel services = new JPanel();
services.setLayout(new BoxLayout(services, BoxLayout.PAGE_AXIS));
a.add(services);
a.add(HORI_RA);
JPanel right = new JPanel();
right.setLayout(new BoxLayout(right, BoxLayout.PAGE_AXIS));
a.add(right);
a.add(HORI_RA);     
JLabel lbl = new JLabel("SERVIZI");
lbl.setFont(new Font("SansSerif", Font.BOLD, 30));
lbl.setAlignmentX(Component.CENTER_ALIGNMENT);
lbl.setPreferredSize(new Dimension(100, 100));      
services.add(lbl); 
```

但如果我运行它，我只能看到“主”JPanel（“SERVIZI”标签）。如果我指定 setSize(x,y) 方法，我只能看到背景 JPanel。

有什么方法可以在我的布局中添加背景图像，而无需指定尺寸？

我也尝试使用 setLayou(null) 但我必须手动指定所有组件的尺寸（没用）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T14:08:38.670

您只需覆盖`getPreferredSize()`相应 JPanel 的方法，并使其返回一些有效的维度对象。我想这个例子可能会在这个方向上帮助你：

```
import java.awt.*;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.net.URL;
import javax.imageio.ImageIO;
import javax.swing.*;

public class PaintingExample
{
    private CustomPanel contentPane;
    private JTextField userField;
    private JPasswordField passField;
    private JButton loginButton;

    private void displayGUI()
    {
        JFrame frame = new JFrame("Painting Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        contentPane = new CustomPanel();        

        frame.setContentPane(contentPane);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new PaintingExample().displayGUI();
            }
        });
    }
}

class CustomPanel extends JPanel
{
    private BufferedImage image;

    public CustomPanel()
    {
        setOpaque(true);
        setBorder(BorderFactory.createLineBorder(Color.BLACK, 5));
        try
        {
            /*
             * Since Images are Application Resources,
             * it's always best to access them in the
             * form of a URL, instead of File, as you are doing.
             * Uncomment this below line and watch this answer
             * of mine, as to HOW TO ADD IMAGES TO THE PROJECT
             * https://stackoverflow.com/a/9866659/1057230
             * In order to access images with getClass().getResource(path)
             * here your Directory structure has to be like this
             *                 Project
             *                    |
             *         ------------------------
             *         |                      |
             *        bin                    src
             *         |                      |
             *     ---------             .java files             
             *     |       |                   
             *  package   image(folder)
             *  ( or              |
             *   .class        404error.jpg
             *   files, if
             *   no package
             *   exists.)
             */
            //image = ImageIO.read(
            //      getClass().getResource(
            //              "/image/404error.jpg"));
            image = ImageIO.read(new URL(
                        "http://gagandeepbali.uk.to/" + 
                                "gaganisonline/images/404error.jpg"));
        }
        catch(IOException ioe)
        {
            System.out.println("Unable to fetch image.");
            ioe.printStackTrace();
        }
    }

    /*
     * Make this one customary habbit,
     * of overriding this method, when
     * you extends a JPanel/JComponent,
     * to define it's Preferred Size.
     * Now in this case we want it to be 
     * as big as the Image itself.
     */
    @Override
    public Dimension getPreferredSize()
    {
        return (new Dimension(image.getWidth(), image.getHeight()));
    }

    /*
     * This is where the actual Painting
     * Code for the JPanel/JComponent
     * goes. Here we will draw the image.
     * Here the first line super.paintComponent(...),
     * means we want the JPanel to be drawn the usual 
     * Java way first, then later on we will
     * add our image to it, by writing the other line,
     * g.drawImage(...).
     */
    @Override
    protected void paintComponent(Graphics g)
    {
        super.paintComponent(g);
        g.drawImage(image, 0, 0, this);
    }
} 
```

但是，如果您不想使用继承，那么您可以简单地将图像添加到 JLabel，然后通过设置 JLabel 的布局将组件添加到 JLabel，如[本示例](https://stackoverflow.com/a/11372350/1057230)和[本示例所示](https://stackoverflow.com/a/10245045/1057230)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T12:55:27.103

您可以使用[OverlayLayout](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/OverlayLayout.html)。它使您可以将组件彼此堆叠在一起。像这样添加图像作为最低的图像应该可以：

```
JPanel backgroundPanel = new JPanel();
backgroundPanel.setLayout(new OverlayLayout(backgroundPanel));

backgroundPanel.add(/* your panel with controls */);
backgroundPanel.add(/* image component */); 
```

请注意，带有控件的面板应该是透明的，以免隐藏背景图像。您可以通过设置 panel.setOpaque(false);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T12:42:40.303

你可以这样做：

```
Image image = new ImageIcon(path);     
JLabel label=new JLabel(image); 
```

如果您想使用 JLabel 作为背景图像，我认为这可能会完成您想要的工作。

无论如何，您可能还想看看[ImageIcon](http://docs.oracle.com/javase/6/docs/api/javax/swing/ImageIcon.html) Javadoc。

# css - Safari 中的 CSS 高度

> ID：12708538
> 
> 赞同：0
> 
> 时间：2012-10-03T12:32:38.300
> 
> 标签：css, safari

我在一个[网站](http://www.centredesantementis.com/contact-us)上工作，我必须将右框（隶属关系）的底部与右框的底部（联系我们）对齐。

问题是，我可以让它在 Chrome、IE 和 Mozilla 甚至 Windows 上的 Safari 中运行，但当它是 Mac 上的 Safari 时则不行。我没有 Mac，但我正在使用 Adob​​e BrowserLab 来查看它的情况（客户说它不起作用：P）

我已经尝试了几个代码/CSS，包括@media，但仍然没有运气（如果你看到代码/布局正在改变，那么可能是我在处理它）。

标记和 CSS 都是简单和标准的，只需要帮助使其在主要浏览器、Chrome、Firefox、（现代）IE 和 Mac 上的 Safari 中工作。

当前代码：

```
#bottom-aff{
    display:inline;
    height: 145px !important;
} 
```

但正如我所说，我正在努力。

请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:24:19.020

绝对不是最优雅的解决方案，但它似乎有效：

```
#contentleft {
    position: absolute;
    top: 0;
    bottom: 0;
}

.postarea {
    position: absolute;
    top: 0;
    bottom: 10px;
    left: 0;
    right: 0;
} 
```

它基本上让右侧边栏决定#content的高度，然后强制左侧内容扩展以填充剩余空间。如果左栏比右侧栏高，内容可能会被截断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:34:45.537

请尝试使用 max-height,min-height 属性。

# python - Django - 列表索引超出范围

> ID：12708539
> 
> 赞同：0
> 
> 时间：2012-10-03T12:32:41.037
> 
> 标签：python, django, arrays, django-models

我的模型中有一个 ManyToManyField。我需要为每个查询获取第三项，如下所示。

```
class Staff(models.Model):
    status = models.BooleanField(default=True)
    person = models.ForeignKey(Person)
    staff_job_categories = models.ManyToManyField(StaffJobCategory)
    staff_titles = models.ManyToManyField(PersonTitle, null=True, blank=True)

    def get_job_categories(self):
          return self.staff_job_categories.all()[3] 
```

我对管理员 list_filter 使用 get_job_categories 函数，但我只想显示每个多对多数组中的第三项。

但是得到 **`List index out of range`**错误；顺便一提;

```
def get_job_categories(self):
    return self.staff_job_categories.all()[:3] 
```

工作正常。但得到所有的对象，直到我得到我想要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T12:37:08.050

这应该适用于绑定到少于 3 个类别的作业：

```
return ( self.staff_job_categories.all()[2] 
         if self.staff_job_categories.count() >= 3 
         else None
       ) 
```

或者：

```
return ( self.staff_job_categories.all()[2] 
         if len( self.staff_job_categories.all()[:3] ) >= 3 
         else None
       ) 
```

避免所有类别重新计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:35:38.233

序列中的第一项的索引为 0。第三项的索引为 2。也许这是您唯一的问题？

例如尝试：

```
def get_job_categories(self):
    return self.staff_job_categories.all()[2] 
```

但是，这假设您确定所有员工至少有三个工作类别并且他们的顺序是可预测的。真的是这样吗？我不*认为*Django 的 ManyToManyField 可以保证相关对象的返回顺序。

# html - 使用 sed 删除文本文件中的强标记

> ID：12708541
> 
> 赞同：1
> 
> 时间：2012-10-03T12:32:44.430
> 
> 标签：html, sed, text-files

我想删除`STRONG`文本文件中的标签。

我`sed 's/< strong>/>/g'`用于删除`STRONG`标签，效果很好。

但是当我想`< /STRONG>`用这个删除标签时，`sed 's/< /strong>//g'` 它会显示以下错误`sed: -e expression #1, char 13: Unknown option to`s'`

我相信它与`< /`-part有关，但我不知道是什么。有人可以解释一下如何解决吗？

**`<`和和其他人之间的空间`strong`是专门为这个问题而设计的**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:40:38.853

您的问题是您将`/`其用作模式/替换分隔符，如果您想匹配/替换一个（`/`），则必须以这种方式对其进行转义（如`\/`：），但更多内容见下文。

sed 不是 (X|HT)ML 处理的理想工具。如果标签不跨越多行，它可能对您有用：

```
sed 's_</\s*\?strong>_>_g' INPUTFILE 
```

这将两个`<strong>`, `< strong>`, `</strong>`,替换`< /strong>`为单个`>`（如您在问题中所写）。`sed`可以使用多个模式/替换分隔符，而不仅仅是`/`（我在`_`上面使用。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:19:28.213

我用分隔符替换了`>`它`|`，就成功了。这是其他有此问题的解决方案：

```
sed 's|</strong>||g' prut6.xml > prut7.xml 
```

Zsolt 和 Potong，谢谢！

# hibernate - 回滚后无法关闭 EntityManager

> ID：12708543
> 
> 赞同：1
> 
> 时间：2012-10-03T12:32:47.200
> 
> 标签：hibernate, jboss, entitymanager, jta

以下是我的环境规范：

服务器：JBOSS6.1 最终版

持久层：以 Hibernate 作为持久提供者的 JPA（Hibernate 版本 3.6.6.Final）

应用架构类似于：Controller -> Session Beans -> Businell Logic Layer -> Builder (Hibernate layer) - DB (MYSQL)

我们正在使用在 persistence.xml 中配置的“RESOURCE_LOCAL”事务，如下所示：

```
<persistence-unit name="test" transaction-type="RESOURCE_LOCAL">
  <provider>org.hibernate.ejb.HibernatePersistence</provider>
  <non-jta-data-source>java:/TestDS</non-jta-data-source> 
```

我们使用如下所示的交易：

```
try {
  txUtil.beginTransaction();
  <-- some entity update etc here -->
  if(some validation fail here){
      txUtil.rollbackTransaction();
  } else {
      txUtil.commitTransaction();
  } catch (Exception e) {
      txUtil.rollbackTransaction();
  } finally {
      try {
          txUtil.closeEntityManager();
      } catch (BAException e) {
          log.warn("Problem occurred while closing the EntityManager: " + e.getLocalizedMessage(), e);
      }
  } 
```

上面使用的各种方法的代码类似于（下面不是精确的 impl，而是我们所拥有的粗略表示）：

```
beginTransaction(){
    EntityManagerFactory emf = Persistence.createEntityManagerFactory("test");
    EntityManager em = emf.createEntityManager();
    if(em.isOpen())
    {
            transaction = em.getTransaction();
            if(!transaction.isActive())
            {   
                transaction.begin();
            }
    }
}

commitTransaction(){
    if(em.isOpen())
    {
        EntityTransaction transaction = em.getTransaction();
        if(transaction.isActive())
        {   
            transaction.commit();
        }
    }
}

rollbackTransaction(){
    if(em.isOpen())
    {
        EntityTransaction transaction = em.getTransaction();
        if(transaction.isActive())
        {   
            log.debug("EntityManager for thread (" + 
                Thread.currentThread().hashCode() +
                ") has active transaction (" + 
                transaction.hashCode() + "): rollback");
            transaction.rollback();
        }
    }
}

closeEntityManager() {
    if(em.isOpen()) {
        EntityTransaction tx=em.getTransaction();
        if(tx==null) {
           log.debug("No transaction associated with EntityManager");
        } else {
            if(tx.isActive()) {
               log.debug("EntityManager has active transaction, rolling out");
               tx.rollback();
            } else {
               log.debug("EntityManager transaction was not active");
            }
        }
     } try {
        em.close();
     }
} 
```

问题是，每当我们进行回滚，然后如果我们尝试关闭实体管理器，它就会引发回滚异常。相同的堆栈跟踪如下：

```
04:46:16,378 ERROR [STDERR] org.hibernate.TransactionException: could not register synchronization
04:46:16,384 ERROR [STDERR]     at org.hibernate.transaction.JTATransaction.registerSynchronization(JTATransaction.java:316)
04:46:16,385 ERROR [STDERR]     at org.hibernate.ejb.EntityManagerImpl.close(EntityManagerImpl.java:125)
04:46:16,386 ERROR [STDERR]     at com.test.builder.util.EntityManagerUtil.rollbackAndCloseEntityManager(EntityManagerUtil.java:201)
04:46:16,387 ERROR [STDERR]     at com.test.builder.util.TransactionUtilImpl.closeEntityManager(TransactionUtilImpl.java:40)
04:46:16,391 ERROR [STDERR]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
04:46:16,392 ERROR [STDERR]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
04:46:16,393 ERROR [STDERR]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
04:46:16,394 ERROR [STDERR]     at java.lang.reflect.Method.invoke(Method.java:597)
04:46:16,395 ERROR [STDERR]     at org.jboss.aop.joinpoint.MethodInvocation.invokeTarget(MethodInvocation.java:122)
04:46:16,396 ERROR [STDERR]     at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:111)
04:46:16,397 ERROR [STDERR]     at org.jboss.ejb3.interceptors.container.ContainerMethodInvocationWrapper.invokeNext(ContainerMethodInvocationWrapper.java:72)
04:46:16,398 ERROR [STDERR]     at org.jboss.ejb3.interceptors.aop.InterceptorSequencer.invoke(InterceptorSequencer.java:76)
04:46:16,399 ERROR [STDERR]     at org.jboss.ejb3.interceptors.aop.InterceptorSequencer.aroundInvoke(InterceptorSequencer.java:62)
04:46:16,401 ERROR [STDERR]     at sun.reflect.GeneratedMethodAccessor950.invoke(Unknown Source)
04:46:16,402 ERROR [STDERR]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
04:46:16,403 ERROR [STDERR]     at java.lang.reflect.Method.invoke(Method.java:597)
04:46:16,404 ERROR [STDERR]     at org.jboss.aop.advice.PerJoinpointAdvice.invoke(PerJoinpointAdvice.java:174)
04:46:16,405 ERROR [STDERR]     at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
04:46:16,406 ERROR [STDERR]     at org.jboss.ejb3.interceptors.aop.InvocationContextInterceptor.fillMethod(InvocationContextInterceptor.java:74)
04:46:16,407 ERROR [STDERR]     at org.jboss.aop.advice.org.jboss.ejb3.interceptors.aop.InvocationContextInterceptor_z_fillMethod_446939511.invoke(InvocationContextInterceptor_z_fillMethod_446939511.java)
04:46:16,408 ERROR [STDERR]     at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
04:46:16,408 ERROR [STDERR]     at org.jboss.ejb3.interceptors.aop.InvocationContextInterceptor.setup(InvocationContextInterceptor.java:90)
04:46:16,409 ERROR [STDERR]     at org.jboss.aop.advice.org.jboss.ejb3.interceptors.aop.InvocationContextInterceptor_z_setup_446939511.invoke(InvocationContextInterceptor_z_setup_446939511.java)
04:46:16,410 ERROR [STDERR]     at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
04:46:16,411 ERROR [STDERR]     at org.jboss.ejb3.async.impl.interceptor.AsynchronousServerInterceptor.invoke(AsynchronousServerInterceptor.java:128)
04:46:16,412 ERROR [STDERR]     at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
04:46:16,414 ERROR [STDERR]     at org.jboss.ejb3.connectionmanager.CachedConnectionInterceptor.invoke(CachedConnectionInterceptor.java:62)
04:46:16,415 ERROR [STDERR]     at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
04:46:16,416 ERROR [STDERR]     at org.jboss.ejb3.entity.TransactionScopedEntityManagerInterceptor.invoke(TransactionScopedEntityManagerInterceptor.java:56)
04:46:16,417 ERROR [STDERR]     at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
04:46:16,418 ERROR [STDERR]     at org.jboss.ejb3.AllowedOperationsInterceptor.invoke(AllowedOperationsInterceptor.java:47)
04:46:16,419 ERROR [STDERR]     at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
04:46:16,420 ERROR [STDERR]     at org.jboss.ejb3.tx.NullInterceptor.invoke(NullInterceptor.java:42)
04:46:16,421 ERROR [STDERR]     at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
04:46:16,422 ERROR [STDERR]     at org.jboss.ejb3.stateless.StatelessInstanceInterceptor.invoke(StatelessInstanceInterceptor.java:68)
04:46:16,423 ERROR [STDERR]     at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
04:46:16,424 ERROR [STDERR]     at org.jboss.ejb3.core.context.SessionInvocationContextAdapter.proceed(SessionInvocationContextAdapter.java:95)
04:46:16,425 ERROR [STDERR]     at org.jboss.ejb3.tx2.impl.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:247)
04:46:16,426 ERROR [STDERR]     at org.jboss.ejb3.tx2.impl.CMTTxInterceptor.required(CMTTxInterceptor.java:349)
04:46:16,427 ERROR [STDERR]     at org.jboss.ejb3.tx2.impl.CMTTxInterceptor.invoke(CMTTxInterceptor.java:209)
04:46:16,428 ERROR [STDERR]     at org.jboss.ejb3.tx2.aop.CMTTxInterceptorWrapper.invoke(CMTTxInterceptorWrapper.java:52)
04:46:16,430 ERROR [STDERR]     at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
04:46:16,431 ERROR [STDERR]     at org.jboss.aspects.tx.TxPropagationInterceptor.invoke(TxPropagationInterceptor.java:76)
04:46:16,432 ERROR [STDERR]     at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
04:46:16,434 ERROR [STDERR]     at org.jboss.ejb3.tx.NullInterceptor.invoke(NullInterceptor.java:42)
04:46:16,435 ERROR [STDERR]     at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
04:46:16,436 ERROR [STDERR]     at org.jboss.ejb3.security.Ejb3AuthenticationInterceptorv2.invoke(Ejb3AuthenticationInterceptorv2.java:182)
04:46:16,436 ERROR [STDERR]     at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
04:46:16,437 ERROR [STDERR]     at org.jboss.ejb3.ENCPropagationInterceptor.invoke(ENCPropagationInterceptor.java:41)
04:46:16,438 ERROR [STDERR]     at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
04:46:16,439 ERROR [STDERR]     at org.jboss.ejb3.BlockContainerShutdownInterceptor.invoke(BlockContainerShutdownInterceptor.java:67)
04:46:16,440 ERROR [STDERR]     at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
04:46:16,441 ERROR [STDERR]     at org.jboss.ejb3.core.context.CurrentInvocationContextInterceptor.invoke(CurrentInvocationContextInterceptor.java:47)
04:46:16,442 ERROR [STDERR]     at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
04:46:16,443 ERROR [STDERR]     at org.jboss.aspects.currentinvocation.CurrentInvocationInterceptor.invoke(CurrentInvocationInterceptor.java:67)
04:46:16,444 ERROR [STDERR]     at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
04:46:16,446 ERROR [STDERR]     at org.jboss.ejb3.interceptor.EJB3TCCLInterceptor.invoke(EJB3TCCLInterceptor.java:86)
04:46:16,447 ERROR [STDERR]     at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
04:46:16,448 ERROR [STDERR]     at org.jboss.ejb3.stateless.StatelessContainer.dynamicInvoke(StatelessContainer.java:392)
04:46:16,449 ERROR [STDERR]     at org.jboss.ejb3.remoting.IsLocalInterceptor.invokeLocal(IsLocalInterceptor.java:88)
04:46:16,450 ERROR [STDERR]     at org.jboss.ejb3.remoting.IsLocalInterceptor.invoke(IsLocalInterceptor.java:75)
04:46:16,451 ERROR [STDERR]     at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
04:46:16,452 ERROR [STDERR]     at org.jboss.ejb3.async.impl.interceptor.AsynchronousClientInterceptor.invoke(AsynchronousClientInterceptor.java:143)
04:46:16,453 ERROR [STDERR]     at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
04:46:16,454 ERROR [STDERR]     at org.jboss.aspects.remoting.PojiProxy.invoke(PojiProxy.java:62)
04:46:16,455 ERROR [STDERR]     at $Proxy215.invoke(Unknown Source)
04:46:16,456 ERROR [STDERR]     at org.jboss.ejb3.proxy.impl.handler.session.SessionProxyInvocationHandlerBase.invoke(SessionProxyInvocationHandlerBase.java:185)
04:46:16,457 ERROR [STDERR]     at $Proxy224.addMyEntity(Unknown Source)
04:46:16,458 ERROR [STDERR]     at test.mycomp.services.MyServicesImpl.addMyEntity(MyServicesImpl.java:134)
04:46:16,459 ERROR [STDERR]     at tv.mycomp.controllers.MyController.addMyEntity(MyController.java:106)
04:46:16,460 ERROR [STDERR]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
04:46:16,461 ERROR [STDERR]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
04:46:16,462 ERROR [STDERR]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
04:46:16,463 ERROR [STDERR]     at java.lang.reflect.Method.invoke(Method.java:597)
04:46:16,464 ERROR [STDERR]     at org.springframework.web.servlet.mvc.multiaction.MultiActionController.invokeNamedMethod(MultiActionController.java:472)
04:46:16,465 ERROR [STDERR]     at org.springframework.web.servlet.mvc.multiaction.MultiActionController.handleRequestInternal(MultiActionController.java:409)
04:46:16,466 ERROR [STDERR]     at org.springframework.web.servlet.mvc.AbstractController.handleRequest(AbstractController.java:153)
04:46:16,468 ERROR [STDERR]     at org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)
04:46:16,469 ERROR [STDERR]     at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:874)
04:46:16,470 ERROR [STDERR]     at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:808)
04:46:16,471 ERROR [STDERR]     at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:476)
04:46:16,472 ERROR [STDERR]     at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:441)
04:46:16,473 ERROR [STDERR]     at javax.servlet.http.HttpServlet.service(HttpServlet.java:754)
04:46:16,474 ERROR [STDERR]     at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
04:46:16,475 ERROR [STDERR]     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:324)
04:46:16,476 ERROR [STDERR]     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:242)
04:46:16,478 ERROR [STDERR]     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:274)
04:46:16,479 ERROR [STDERR]     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:242)
04:46:16,480 ERROR [STDERR]     at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275)
04:46:16,481 ERROR [STDERR]     at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)
04:46:16,482 ERROR [STDERR]     at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:181)
04:46:16,484 ERROR [STDERR]     at org.jboss.modcluster.catalina.CatalinaContext$RequestListenerValve.event(CatalinaContext.java:285)
04:46:16,485 ERROR [STDERR]     at org.jboss.modcluster.catalina.CatalinaContext$RequestListenerValve.invoke(CatalinaContext.java:261)
04:46:16,486 ERROR [STDERR]     at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:88)
04:46:16,487 ERROR [STDERR]     at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:100)
04:46:16,488 ERROR [STDERR]     at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:159)
04:46:16,489 ERROR [STDERR]     at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
04:46:16,490 ERROR [STDERR]     at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
04:46:16,491 ERROR [STDERR]     at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
04:46:16,492 ERROR [STDERR]     at org.jboss.web.tomcat.service.request.ActiveRequestResponseCacheValve.invoke(ActiveRequestResponseCacheValve.java:53)
04:46:16,493 ERROR [STDERR]     at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:362)
04:46:16,494 ERROR [STDERR]     at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877)
04:46:16,495 ERROR [STDERR]     at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:654)
04:46:16,496 ERROR [STDERR]     at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:951)
04:46:16,498 ERROR [STDERR]     at java.lang.Thread.run(Thread.java:662)
04:46:16,501 ERROR [STDERR] Caused by: javax.transaction.RollbackException: ARJUNA-16083 Can't register synchronization because the transaction is in aborted state
04:46:16,502 ERROR [STDERR]     at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.registerSynchronizationImple(TransactionImple.java:363)
04:46:16,503 ERROR [STDERR]     at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.registerSynchronization(TransactionImple.java:344)
04:46:16,504 ERROR [STDERR]     at org.hibernate.transaction.JTATransaction.registerSynchronization(JTATransaction.java:313)
04:46:16,505 ERROR [STDERR]     ... 108 more 
```

以下是persistence.xml中与事务相关的属性

```
<property name="hibernate.transaction.manager_lookup_class" value="org.hibernate.transaction.JBossTransactionManagerLookup" />

<property name="hibernate.transaction.factory_class" value="org.hibernate.transaction.JTATransactionFactory" />

<property name="hibernate.transaction.flush_before_completion" value="true" /> 
```

我在任何地方都看到并阅读了关于在回滚事务后关闭实体管理器的信息。但为什么我会得到上述异常？是预期的还是我在这里遗漏了什么？

提前非常感谢，如果您需要任何有关相同的进一步信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:55:38.280

那将是一个错误。但是，我们不再支持 Hibernate 3.6。你能在 4.1 中重现它吗？堆栈跟踪与 4.1 不同...

# android - 如何在android中的开始日期和结束日期内填充数组

> ID：12708546
> 
> 赞同：0
> 
> 时间：2012-10-03T12:33:06.817
> 
> 标签：android

假设我想要日期数组我想要日期之间

开始日期 - 26/9/2012 结束日期 - 3/10/2012

差异天数=7；我正在做的是

```
 for(int i=0;i<diffInDays;i++){

        DateArray[i]=StartDate.toString();

        SimpleDateFormat sdf= new SimpleDateFormat("dd/mm/yyyy");
        Calendar c= Calendar.getInstance();
    try {
            c.setTime(sdf.parse(StartDate));
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        c.add(Calendar.DATE, 1);
        // number of days to add

        StartDate= sdf.format(c.getTime());  // dt is now the new date
        } 
```

它添加了我的日期，但是当日期是 2012 年 9 月 30 日时，我如何添加月份？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:43:33.637

日期为 时无需添加月份`30/09/2012`。日历会自动获取你想要的天数。只需`diffinDays`在 for 循环中管理变量，您将在`DateArray`. 看看这段代码

```
 String StartDate= "30/09/2012",EndDate="7/10/2012";

    for(int i=0;i<diffinDays;i++){

        DateArray[i]=StartDate.toString();

        SimpleDateFormat sdf= new SimpleDateFormat("dd/mm/yyyy");
        Calendar c= Calendar.getInstance();
    try {
            c.setTime(sdf.parse(StartDate));
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        c.add(Calendar.DATE, 1);
        // number of days to add

        StartDate= sdf.format(c.getTime());  // dt is now the new date
        System.out.println(DateArray[i]);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-17T08:03:06.553

# 乔达时间

这在 Joda-Time 中更容易。

```
DateTimeFormatter formatter = DateTimeFormat.forPattern( "d/M/yyyy" );
LocalDate start = formatter.parseLocalDate( "26/9/2012" );
// loop
LocalDate localDate = start.plusDays( i ); 
```

# php - 如何检测浏览器是否从服务器请求某个文件

> ID：12708547
> 
> 赞同：3
> 
> 时间：2012-10-03T12:33:10.367
> 
> 标签：php, webserver

我可以检测 Web 浏览器是否正在从服务器请求某个图像吗？我想检查用户是否下载了图像，或者它是否已经从浏览器缓存。

## 主要思想：

我正在计算每个个人资料页面的唯一身份访问者。我现在使用`IPs`and`Cookies`但也想添加它。`IP`可以很容易地更改，`Cookie`可以被阻止/删除。我的想法是像使用`flash cookie`. 图像`1px x 1px`的大小将不会对用户可见。我根本没有使用 ActionScript 和 Flash 的经验，所以我无法使用`flash cookie`并想尝试使用它。

**编辑：** 正如我从 Sven 的回答中了解到的，也许我无法解释我需要什么。我的问题和斯文的回答一样。**怎么做** `wait for the request to appear on the server`？我希望浏览器缓存图像，因此只有当用户是唯一访问者时才会下载它，即他是第一次查看该页面。

我想获取这些信息并检查图像是否被请求（即它被缓存）。就像是：

```
$requested_files = $_SERVER['REQUESTS']; // Or something similar, this is the question.
$file_name = $profile_page_owner_id.'.png'; // For example.

if(in_array($file_name, $requested_files)) {
    // File is requested, so it is not cached. This is an unique visitor.
    // Of course except this I will continue to check IP and Cookie.
    // This will be the 3rd check.
} else {
    // File is not requested, so it is already cached.
    // Page is viewed before, this is not an unique visitor.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:05:18.967

假设您的图像路径设置为 ，`user_track.php`浏览器将请求文件，您在哪里进行日志记录，然后发送适当的标题和图像本身。

您甚至可以发送拒绝缓存标头，以便默认情况下不会缓存图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T07:19:12.357

只需创建一个将输出图像的 PHP 文件，在输出之前添加您需要的逻辑（计数和东西），在 html 图像中调用 php 文件并通过发送像这样的标题来强制缓存图像`header('Cache-Control: max-age=37739520, public');`

你可以看看这个帖子：[How to get the browser to cache images, with php?](https://stackoverflow.com/questions/1385964/how-to-get-the-browser-to-cache-images-with-php) 有关缓存的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T12:48:12.317

您只需等待请求出现在服务器上即可检测到它。

如果你收到一个请求，浏览器没有缓存它。

如果您不希望浏览器缓存它，只需在 http 标头中说明即可。然后你每次都会收到请求。

编辑：好的，如果您想要缓存图像，只需发送允许在浏览器中无限期缓存的缓存标头。通常图像只会被请求一次。请求的检测保持不变。

# c++ - 带有 boost asio 的 C++ 多播接收器

> ID：12708558
> 
> 赞同：1
> 
> 时间：2012-10-03T12:33:43.480
> 
> 标签：c++, boost-asio, multicast

我必须实现一个多播接收器，它能够加入多播组列表并使用 boost 在特定线程中处理接收到的数据。我确实尝试了以下代码......

```
boost::asio::io_service m_io_service;
boost::asio::ip::udp::socket m_multicast_socket(m_io_service);

// listen address
boost::asio::ip::address listen_address  
     = boost::asio::ip::address::from_string("0.0.0.0");

// listen port
unsigned short multicast_port = m_configuration->m_multicast_interface_port;

boost::asio::ip::udp::endpoint listen_endpoint( listen_address, multicast_port );

// open socket
m_multicast_socket.open( listen_endpoint.protocol() );

// set socket buffer size
m_multicast_socket.set_option( 
       boost::asio::ip::udp::socket::receive_buffer_size
               ( m_configuration->m_receiving_socket_buffer_size ) );

// other sockets could bind to listen_address
m_multicast_socket.set_option( boost::asio::ip::udp::socket::reuse_address(true) );

boost::asio::socket_base::bytes_readable num_of_bytes_readable(true);

m_multicast_socket.io_control(num_of_bytes_readable);

m_multicast_socket.bind(listen_endpoint);

// joining a list of multicast group
for ( size_t i=0; i < multicast_groups.size(); ++i )
{
    boost::asio::ip::address multicast_address 
         = boost::asio::ip::address::from_string( multicast_groups[i] );

    m_multicast_socket.set_option( 
        boost::asio::ip::multicast::join_group(
            multicast_address ) );

    std::cout << multicast_groups[i] << " multicast group joined!" << std::endl;
} 
```

然后无限循环读取数据......

```
while ( !m_exit )
{
    while ( !num_of_bytes_readable.get() )
    {
        boost::this_thread::sleep( boost::posix_time::milliseconds( 1 ) );
    }

    boost::asio::ip::udp::endpoint sender_endpoint;

    size_t bytes_received = m_multicast_socket.receive_from(
        boost::asio::buffer( m_reading_buffer.get(), m_configuration->m_reading_buffer_size )
            , sender_endpoint );

    if ( bytes_received > 0 )
    {
       // process
    }

    boost::this_thread::yield();
} 
```

但是没有接收到数据并且循环......

```
while ( !num_of_bytes_readable.get() )
{
    boost::this_thread::sleep( boost::posix_time::milliseconds( 1 ) );
} 
```

永远不会退出。

我也尝试了 boost asio 文档中的多播接收器示例的代码，但`async_recv_from`永远不会返回。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-05T15:46:53.817

需要进行一些更改：

*   正如评论中所建议的，每个多播组使用一个套接字。
*   如果发送方和接收方在同一台机器上，则验证该[`ip::multicast::enable_loopback`](http://www.boost.org/doc/libs/1_59_0/doc/html/boost_asio/reference/ip__multicast__enable_loopback.html)选项是否为真。
*   这[`socket_base::bytes_readable`](http://www.boost.org/doc/libs/1_59_0/doc/html/boost_asio/reference/socket_base/bytes_readable.html)是一个 IO 控制命令。 [`socket.io_control`](http://www.boost.org/doc/libs/1_59_0/doc/html/boost_asio/reference/basic_datagram_socket/io_control/overload1.html)在套接字上执行命令，并`bytes_readable.get()`返回命令的值。因此，每次都需要执行该命令来查询有多少字节可供读取。另一种更易读的解决方案是使用该[`socket.available()`](http://www.boost.org/doc/libs/1_59_0/doc/html/boost_asio/reference/basic_datagram_socket/available/overload1.html)函数。

* * *

下面是一个简单的例子，[演示](http://coliru.stacked-crooked.com/a/0854af10a6efef57)了`socket_base::bytes_readable`.

```
// Standard includes.
#include <iostream>

// 3rd party includes.
#include <boost/asio.hpp>
#include <boost/lexical_cast.hpp>
#include <boost/thread.hpp>

void read(boost::asio::ip::udp::socket& socket)
{
  boost::asio::ip::udp::endpoint sender;
  std::vector<char> buffer;
  std::size_t bytes_readable = 0;
  for (int i=0; i < 3; ++i)
  {
    // Poll until data is available.
    while (!bytes_readable)
    {
      // Issue command to socket to get number of bytes readable.
      boost::asio::socket_base::bytes_readable num_of_bytes_readable(true);
      socket.io_control(num_of_bytes_readable);

      // Get the value from the command.
      bytes_readable = num_of_bytes_readable.get();

      // If there is no data available, then sleep.
      if (!bytes_readable)
      {
        boost::this_thread::sleep(boost::posix_time::seconds(1));
      }
    }

    // Resize the buffer to store all available data.
    buffer.resize(bytes_readable);

    // Read available data.
    socket.receive_from(
      boost::asio::buffer(buffer, bytes_readable),
      sender);

    // Extract data from the buffer.
    std::string message(buffer.begin(), buffer.end());

    // Output data.
    std::cout << "Received message: ";
    std::cout << message << std::endl;
  }
}

void write(boost::asio::ip::udp::socket& socket,
           boost::asio::ip::udp::endpoint& destination)
{
  std::string message;
  for (unsigned int i=0; i < 3; ++i)
  {
    std::ostringstream stream;
    stream << i;
    message = stream.str();
    socket.send_to(boost::asio::buffer(message), destination);
    std::cout << "Sent message: " << message << std::endl;
  }
}

int main(int argc, char* argv[])
{
  // Extract command-line arguments.
  bool receiver = std::string(argv[1]) == "receive";
  boost::asio::ip::address address =
    boost::asio::ip::address::from_string(argv[2]);
  unsigned short port = boost::lexical_cast<unsigned short>(argv[3]);

  // Create socket.
  using boost::asio::ip::udp;
  boost::asio::io_service service;
  udp::socket socket(service);
  socket.open(boost::asio::ip::udp::v4());

  // Allow other processes to reuse the address, permitting other processes on
  // the same machine to use the multicast address.
  socket.set_option(udp::socket::reuse_address(true));

  // Guarantee the loopback is enabled so that multiple processes on the same
  // machine can receive data that originates from the same socket.
  socket.set_option(boost::asio::ip::multicast::enable_loopback(true));
  socket.bind(
    udp::endpoint(boost::asio::ip::address_v4::any(),
    receiver ? port /* same as multicast port */
             : 0 /* any */));
  udp::endpoint destination(address, port);

  // Join group.
  namespace ip = boost::asio::ip;
  socket.set_option(ip::multicast::join_group(address));

  // Start read or write loops based on command line options.
  if (receiver) read(socket);
  else          write(socket, destination);
} 
```

用法：

```
$ ./a.out receive 235.55.55.55 55555 &
$ sleep 1
$ ./a.out send 235.55.55.55 55555
Sent message: 0
Sent message: 1
Sent message: 2
Received message: 0
Received message: 1
Received message: 2 
```

# web - 使用 Sinatra/Padrino 的红宝石网站

> ID：12708560
> 
> 赞同：0
> 
> 时间：2012-10-03T12:33:44.930
> 
> 标签：web, sinatra, padrino

我在工程学校，我是网站开发的新手（不是我唯一做过的 C 语言和算法），我想让一个漂亮的。通过搜索，我了解到使用 Padrino/Sinatra 可能会很好。我安装了它，但我没有找到重新组合所有的教程。我很迷茫，因为我找到了太多信息，但没有很好的例子。在指南中，我找不到任何内容：如何设计网站，如何制作菜单......我认为我真的需要示例或模板才能开始（要阅读的代码）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:51:36.120

你可以从这里开始：http: [//www.padrinorb.com/guides/blog-tutorial](http://www.padrinorb.com/guides/blog-tutorial)

它涵盖了 padrino 和 sinatra 的大部分重要概念。

我建议的最好方法是查看一下开源网站，例如我们的：[https ://github.com/padrino/padrino-web](https://github.com/padrino/padrino-web)

在 github 上有数千个使用 padrino 或 sinatra 构建的网站，因此您可以找到更多更少/更高复杂的网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T12:34:30.963

在这里您可以找到更大的列表：

[https://github.com/padrino/padrino-framework/wiki/Projects-using-Padrino](https://github.com/padrino/padrino-framework/wiki/Projects-using-Padrino)

# java - 为什么我的“透明”覆盖视图不透明？

> ID：12708563
> 
> 赞同：1
> 
> 时间：2012-10-03T12:34:07.363
> 
> 标签：java, android, xml, overlay, transparency

我有一个布局简单的活动（一堆彩色面板），我试图在顶部的透明视图上覆盖一个小的移动图形。[就像这里](https://stackoverflow.com/questions/6565806/transparent-panel-in-activity)的@umar 一样，我正在关注[本教程](http://www.androidapps.org/tag/mapview)，但我的叠加视图拒绝透明。我可以使视图出现，它只包含它应该包含的内容，但是视图的背景是黑色的，但是我尝试使其透明失败。我已经尝试过 SO 中提到的一些解决方案，但结果总是一样的。

我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/everything"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:background="#00ffffff"
>

<LinearLayout
    android:id="@+id/row_1_bg"
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="1"
    android:orientation="horizontal"
    >

    <FrameLayout
        android:layout_height="fill_parent"
        android:layout_width="100dp"
        >

        <LinearLayout
            android:id="@+id/row_1_table"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical"
            android:background="#808080"
            >

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="0dip"
                android:layout_weight="1"
                android:orientation="horizontal"
                >

            <TextView  
                android:id="@+id/row_1_pantone"
                android:paddingLeft="6dip"
                android:textColor="#f0f0f0"
                android:textStyle="bold"
                android:gravity="center_vertical"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                >
            </TextView>
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="0dip"
            android:layout_weight="1"
            android:orientation="horizontal"
            >
            <TextView  
                android:id="@+id/row_1_rgb"
                android:paddingLeft="6dip"
                android:textColor="#f0f0f0"
                android:textStyle="bold"
                android:gravity="center_vertical"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                >
            </TextView>
        </LinearLayout>
        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="0dip"
            android:layout_weight="1"
            android:orientation="horizontal"
            >
            <TextView  
                android:id="@+id/row_1_hex"
                android:paddingLeft="6dip"
                android:textColor="#f0f0f0"
                android:textStyle="bold"
                android:gravity="center_vertical"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                >
            </TextView>
        </LinearLayout>
    </LinearLayout>
</FrameLayout>
</LinearLayout>

<LinearLayout 
android:layout_height="fill_parent" 
android:layout_width="fill_parent" 
xmlns:android="http://schemas.android.com/apk/res/android" 
android:paddingRight="5px" 
android:paddingTop="5px" 
android:paddingLeft="5px" 
android:gravity="bottom" 
android:orientation="vertical"
android:background="#00808080"> 

<barry.pantone.TransparentPanel 
        android:layout_height="wrap_content" 
        android:layout_width="fill_parent" 
        android:id="@+id/transparent_panel" 
        android:paddingRight="5px" 
        android:paddingTop="5px" 
        android:paddingLeft="5px" 
        android:paddingBottom="5px"
        android:background="#00808080"> 

        <Button 
            android:layout_height="wrap_content" 
            android:layout_width="wrap_content" 
            android:id="@+id/button_click_me" 
            android:text="Click Me!"
            /> 
</barry.pantone.TransparentPanel> 
</LinearLayout>

</LinearLayout> 
```

我的 TransparentPanel.java 直接来自教程，使用：

```
innerPaint.setARGB(225, 75, 75, 75); 
```

制作一个透明面板，这是我在主要活动中的 onCreate ：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Resources res = getResources();
    sPantone = res.getStringArray(R.array.pantone); // gets colour definitions

    iHeight = getWindowManager().getDefaultDisplay().getHeight();

    PopulateTable (); // draws colours in the various layout elements
    } 
```

**问题是无论我在视图中做什么都很好——我可以在该视图中**的其他元素上绘制一个半透明面板，但是覆盖视图本身有一个黑色背景，它会遮挡下面的布局。如果有人能帮助我理解为什么透明度不起作用，我将永远感激不尽。

非常感谢

巴兹

**编辑**

根据另一个想法，我尝试将叠加层的定义移出到它自己的 XML 文件中，并使用 LayoutInflater 来膨胀并添加新视图。没有。完全相同 - 附加视图具有纯色背景。这是 tranny.xml 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
android:background="#80000040"
android:layout_height="fill_parent" 
android:layout_width="fill_parent" 
xmlns:android="http://schemas.android.com/apk/res/android" 
android:paddingRight="5dip" 
android:paddingTop="5dip" 
android:paddingLeft="5dip" 
android:gravity="bottom" 
android:orientation="vertical"
> 
<Button 
    android:layout_height="wrap_content" 
    android:layout_width="wrap_content" 
    android:id="@+id/button_click_me" 
    android:text="Click Me!"
    /> 
</LinearLayout> 
```

这是来自 onCreate 的代码，用于扩充新视图并将其添加到主布局中：

```
private View view;
ViewGroup parent = (ViewGroup) findViewById(R.id.everything);
view = LayoutInflater.from(getBaseContext()).inflate(R.layout.tranny, parent, false);
parent.addView(view); 
```

基本上我已经开始使用不同的技术创建完全相同的结果。第一次了解 LayoutInflater 很方便，但对透明度没有帮助:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:12:29.047

好的，没有答案，所以我假设无法使用`parent.addView(view)`添加具有透明背景的覆盖视图。我曾希望在我的布局（滚动条）的右侧边缘添加一个狭窄的透明视图，我可以在其中绘制一个位图，指示在显示项目的大列表中的位置。

相反，我现在让我的整个布局稍微窄了一点，并为`LinearLayout`右边缘留下了空间，它有一个黑色的背景，然后*我*画了我的位图，所以我得到了这个：

![在此处输入图像描述](../Images/035cd770eed3d2d24ad33a82074b0969.png)

我更愿意将指针放在色块的顶部，但除非将来某个大师发现这个问题并向我们展示如何去做，否则我已经足够接近了。

巴兹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T23:04:21.813

> 我可以在该视图中的其他元素上绘制一个半透明面板

正是这个。你需要“透明度”来覆盖它背后的东西。

透明度可能有效，但父布局的背景是透明的 (#00ffffff)，因此叠加层的背景看起来是黑色的。

更改根布局的背景，您可能会看到透明度正在起作用。

如果您希望它覆盖视图的其他元素，则需要将透明度作为布局的该部分的子元素。它目前的布局方式是这样的：

```
<App>
  <Content>
  </Content>
  <Overlay>
  </Overlay>
</App> 
```

而您需要：

```
<App>
  <Content>
    <Overlay>
    </Overlay>
  </Content>
</App> 
```

如果您查看正在学习的教程的源代码，您会看到自定义透明面板是 MapView 的子项，而不是根应用程序视图。这就是它能够覆盖 MapView 内容的原因。

# android - 如何在运行时以编程方式获取活动的布局 ID

> ID：12708566
> 
> 赞同：0
> 
> 时间：2012-10-03T12:34:30.023
> 
> 标签：android, layout, resources

我有一个活动的引用，但我不知道该活动的内容视图的 ID。我需要找到布局中的所有视图。我可以在运行时以编程方式获取活动布局的 ID。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T12:41:02.937

我不确定您是否可以获得布局ID，但您可以尝试

```
activity.getWindow().getDecorView().getRootView() 
```

从这里你可以得到你想要的任何子视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:52:58.460

可能，我不明白您的问题，但我认为您可以使用以下 ID 获得视图：

查看 v = activity.findViewByID(*所需 ID* )

# xml - JaxB 转换 XML 模式

> ID：12708571
> 
> 赞同：0
> 
> 时间：2012-10-03T12:34:45.210
> 
> 标签：xml, jaxb, for-xml-path, xmladapter

我在[http://jeungun.wordpress.com/2009/09/18/binding-to-dynamically-generated-form-elements-in-spring-mvc/](http://jeungun.wordpress.com/2009/09/18/binding-to-dynamically-generated-form-elements-in-spring-mvc/)中使用过，

我正在使用 jaxb 将该输出转换为 xml，由于上面的示例返回数组列表，因此输出如下所示，

```
<item>
   <label>key1</label>
   <output>value1</output>
</item>
  <item>
   <label>key2</label>
   <output>value2</output>
</item> 
```

但我想要一个像下面这样的输出，

```
<item>
     <key1>value1</key1>
     <key2>value2</key2>
</item> 
```

如何使用 jaxb 实现这一点？

我使用了以下代码：

```
 public class item {
    public String getLabel() {
        return label;
    }

    public void setLabel(String label) {
        this.label = label;
    }

    public String getOutput() {
        return output;
    }

    public void setOutput(String output) {
        this.output= output;
    }

    private String label;
    private String output;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:50:52.987

它对我有用...... HurrAAAAAAAAAAAAAAAYYYYyyy

[http://java.dzone.com/articles/mapping-arbitrary-list-objects](http://java.dzone.com/articles/mapping-arbitrary-list-objects)

# python - Twitter Public Stream URL 时有几个跟踪关键字？

> ID：12708573
> 
> 赞同：0
> 
> 时间：2012-10-03T12:34:45.337
> 
> 标签：python, twitter, urlencode

我正在尝试使用以下网址一次跟踪多个关键字：

`https://stream.twitter.com/1.1/statuses/filter.json?track=twitter%2C%20whatever%2C%20streamingd%2C%20`

但是流只返回第一个关键字的结果？！我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:39:15.463

尝试不带空格（即 %20）。嗬！

# mysql - ForeignKey 引用同一个表

> ID：12708579
> 
> 赞同：11
> 
> 时间：2012-10-03T12:35:09.220
> 
> 标签：mysql, sql

有一个面试测试，下面是表格和结构

```
 Table Person = id, name, dob, dod, mother_id, father_id
 Primary Key (id)
 Foreign Key mother_id references Person
 Foreign Key father_id references Person 
```

有人问

> 1.  “选择所有的母亲”
> 2.  “选择那些是 'John Smith' 和 'Jane' 的孩子的孩子

我很困惑，因为我假设外键会像往常一样与其他表链接。但那时我失败了。有人知道实际的答案和原因吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-03T12:38:35.583

这种数据结构称为“自引用表”

```
SELECT DISTINCT mothers.*
FROM person
    inner join person mothers on person.mother_id = mothers.id 
```

和

```
SELECT person.*
FROM person
    inner join person fathers on person.father_id = fathers.id
    inner join person mothers on person.mother_id = mothers.id
WHERE 
    fathers.name='john smith'
and 
    mothers.name='jane' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T12:39:23.290

您始终可以拥有链接到同一个表的外键..这没有问题..

看，假设您在表中存储一个人记录，现在该人将有母亲和父亲。而且`mother`两者`father`本身就是一个人..所以，它们本身就是同一张桌子的记录..

**假设您在 Person 表中有以下两条记录：-**

```
id     name           age         mother_id
1      xyz            24          5
5      abc            57          6 
```

所以，从上表中你可以看到，`person`with`id = 5`实际上是人的母亲 with `id = 1`.. 所以，它是一个`foreign key`引用同一个表..

因此，这里不是对`join`不同的表执行操作，而是必须对同一个表执行连接。

```
SELECT p2.id FROM
Person p1 join Person p2
WHERE p1.mother_id = p2.id 
```

此查询将选择`mother`您当前记录的记录..

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T12:48:09.413

> 我假设外键会像往常一样与其他表链接。

它仍然是 - 它引用同一个 Person 表中的其他记录。

```
-- All Mothers
SELECT mom.name
   FROM Person mom
   WHERE EXISTS (SELECT 1 FROM Person WHERE mother_id = mom.id);

-- Children of John Smith and Jane
SELECT kid.name
   FROM Person kid
   INNER JOIN Person mom on kid.mother_id = mom.id
   INNER JOIN Person dad on kid.father_id = dad.id
   WHERE mom.name = 'Jane' AND
   dad.name = 'John Smith'; 
```

看看这个[SQL fiddle](http://www.sqlfiddle.com/#!2/623f6/7) here

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T12:42:24.610

```
SELECT * 
FROM Person 
WHERE father_id = (SELECT id FROM Person WHERE name = 'John Smith')
AND    mother_id = (SELECT id FROM Person WHERE name = 'Jane') 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-03T12:46:28.107

podiluska 已经给出了答案，只是解释了它是如何工作的，因为看起来你是 MySql 的新手。

通过给表赋予别名（如表人的母亲或父亲），您可以执行类似于伪表的操作，MySql 将其解释为另一个表，因此连接正常进行，想象一下现在有 3 个表。Person、Father 和 Mother，它们都通过 join 连接在一起。

# categories - Prestashop 类别作为标题菜单中的下拉菜单

> ID：12708583
> 
> 赞同：0
> 
> 时间：2012-10-03T12:35:18.370
> 
> 标签：categories, prestashop

这个问题是关于 Prestashop 的。

我想在我的自定义标题菜单中显示类别列表。我不想添加任何第三方模块来显示相同​​的内容。请让我知道我应该在标题菜单部分粘贴哪个代码片段？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T00:48:13.467

我认为该模块称为“顶级菜单”。您可以根据需要添加不同的类别和不同的 CMS 页面。看看这个！PrestaShop 1.5.2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T08:46:25.960

PrestaShop 1.5 默认添加此功能。

# objective-c - NSUserdefaults 使用 xcodebuild

> ID：12708587
> 
> 赞同：0
> 
> 时间：2012-10-03T12:35:34.437
> 
> 标签：objective-c, ios, xcode, xcodebuild

xcodebuild 有一个参数`-userdefault=value`。如何使用它来设置`NSUserDefaults`？我必须指定一个文件/plist吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:58:13.510

您只需将其用作`-name=value`语法，它会在 NSUserDefaults （在`NSArgumentDomain`级别）中定义值，以便您可以使用`[[NSUserDefaults standardUserDefaults] valueForKey:@"name"]`与通常完全相同的方式检索它。

这是一种覆盖来自其他域的默认值的方法，例如应用程序域中的默认值（由应用程序首选项的 plist 定义）。

有关更多信息（尤其是表 1-2）和“参数域”段落，请参见[文档中的此处。](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/UserDefaults/AboutPreferenceDomains/AboutPreferenceDomains.html)

* * *

> ## 参数域
> 
> 参数域包含从命令行参数设置的值（如果您从命令行启动应用程序）并由`NSArgumentDomain`常量标识。从命令行设置的值由系统自动放入该域中。要向此域添加值，请在命令行上指定首选项名称（前面带有连字符）并在其后加上相应的值。例如，以下命令启动 Xcode 并将其`IndexOnOpen`首选项的值设置为`NO`：
> 
> ```
>  localhost> Xcode.app/Contents/MacOS/Xcode -IndexOnOpen NO 
> ```
> 
> 从命令行设置的首选项临时覆盖存储在用户默认数据库中的既定值。在前面的示例中，将`IndexOnOpen`首选项设置为`NO`阻止 Xcode 自动索引项目，即使`YES`在用户默认数据库中将首选项设置为。

# android - 当我在许可证检查后尝试重新启用 Android 上的按钮时调用 CalledFromWrongThreadException

> ID：12708588
> 
> 赞同：0
> 
> 时间：2012-10-03T12:35:34.020
> 
> 标签：android, android-button

我有一个应用程序使用 Google Liense Protection LVL 来避免在许可证失败时访问我已设置禁用 buttonNewDoc 如果许可证检查成功我必须重新启用它。

不幸的是，有些东西不起作用。

这是我的代码：

```
 public class Home extends Activity {
        private static final String BASE64_PUBLIC_KEY = "mykeywithoutspaces";

        // Generate your own 20 random bytes, and put them here.
        private static final byte[] SALT = new byte[] {
            -00, 00, 30, -2, -58, -57, 00, -64, 51, 32, -95, -45, 13, -6, -36, -15, -11, 32, -64,
            89
        };

        private TextView mStatusText;
        private Button mCheckLicenseButton;

        private LicenseCheckerCallback mLicenseCheckerCallback;
        private LicenseChecker mChecker;
        // A handler on the UI thread.
        private Handler mHandler;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
            setContentView(R.layout.main);

            mStatusText = (TextView) findViewById(R.id.status_text);
buttonNewDoc = (ImageButton) findViewById(R.id.btNewDoc);
        buttonNewDoc.setOnClickListener(mNewDoc);
            mCheckLicenseButton = (Button) findViewById(R.id.check_license_button);
            mCheckLicenseButton.setOnClickListener(new View.OnClickListener() {
                public void onClick(View view) {
                    doCheck();
                }
            });

            mHandler = new Handler();

            // Try to use more data here. ANDROID_ID is a single point of attack.
            String deviceId = Secure.getString(getContentResolver(), Secure.ANDROID_ID);

            // Library calls this when it's done.
            mLicenseCheckerCallback = new MyLicenseCheckerCallback();
            // Construct the LicenseChecker with a policy.
            mChecker = new LicenseChecker(
                this, new ServerManagedPolicy(this,
                    new AESObfuscator(SALT, getPackageName(), deviceId)),
                BASE64_PUBLIC_KEY);
            doCheck();
        }

        protected Dialog onCreateDialog(int id) {
            final boolean bRetry = id == 1;
            return new AlertDialog.Builder(this)
                .setTitle(R.string.unlicensed_dialog_title)
                .setMessage(bRetry ? R.string.unlicensed_dialog_retry_body : R.string.unlicensed_dialog_body)
                .setPositiveButton(bRetry ? R.string.retry_button : R.string.buy_button, new DialogInterface.OnClickListener() {
                    boolean mRetry = bRetry;
                    public void onClick(DialogInterface dialog, int which) {
                        if ( mRetry ) {
                            doCheck();
                        } else {
                            Intent marketIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(
                                    "http://market.android.com/details?id=" + getPackageName()));
                                startActivity(marketIntent);                        
                        }
                    }
                })
                .setNegativeButton(R.string.quit_button, new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        finish();
                    }
                }).create();
        }

        private void doCheck() {
buttonNewDoc.setEnabled(false);
            mCheckLicenseButton.setEnabled(false);
            setProgressBarIndeterminateVisibility(true);
            mStatusText.setText(R.string.checking_license);
            mChecker.checkAccess(mLicenseCheckerCallback);
        }

        private void displayResult(final String result) {
            mHandler.post(new Runnable() {
                public void run() {
                    mStatusText.setText(result);
                    setProgressBarIndeterminateVisibility(false);
                    mCheckLicenseButton.setEnabled(true);
                }
            });
        }

        private void displayDialog(final boolean showRetry) {
            mHandler.post(new Runnable() {
                public void run() {
                    setProgressBarIndeterminateVisibility(false);
                    showDialog(showRetry ? 1 : 0);
                    mCheckLicenseButton.setEnabled(true);
                }
            });
        }    

        private class MyLicenseCheckerCallback implements LicenseCheckerCallback {
            public void allow(int policyReason) {
                if (isFinishing()) {
                    // Don't update UI if Activity is finishing.
                    return;
                }

                // Should allow user access.
                displayResult(getString(R.string.allow));
buttonNewDoc.setEnabled(false);
            }

            public void dontAllow(int policyReason) {
                if (isFinishing()) {
                    // Don't update UI if Activity is finishing.
                    return;
                }
                displayResult(getString(R.string.dont_allow));
                // Should not allow access. In most cases, the app should assume
                // the user has access unless it encounters this. If it does,
                // the app should inform the user of their unlicensed ways
                // and then either shut down the app or limit the user to a
                // restricted set of features.
                // In this example, we show a dialog that takes the user to Market.
                // If the reason for the lack of license is that the service is
                // unavailable or there is another problem, we display a
                // retry button on the dialog and a different message.
                displayDialog(policyReason == Policy.RETRY);
            }

            public void applicationError(int errorCode) {
                if (isFinishing()) {
                    // Don't update UI if Activity is finishing.
                    return;
                }
                String result = String.format(getString(R.string.application_error), errorCode);
                displayResult(result);
            }
        }

        @Override
        protected void onDestroy() {
            super.onDestroy();
            mChecker.onDestroy();
        }

    } 
```

这是错误：

```
10-03 14:23:01.469: E/AndroidRuntime(3457): FATAL EXCEPTION: background thread
10-03 14:23:01.469: E/AndroidRuntime(3457): android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
10-03 14:23:01.469: E/AndroidRuntime(3457):     at android.view.ViewRoot.checkThread(ViewRoot.java:3020)
10-03 14:23:01.469: E/AndroidRuntime(3457):     at android.view.ViewRoot.invalidateChild(ViewRoot.java:647)
10-03 14:23:01.469: E/AndroidRuntime(3457):     at android.view.ViewRoot.invalidateChildInParent(ViewRoot.java:673)
10-03 14:23:01.469: E/AndroidRuntime(3457):     at android.view.ViewGroup.invalidateChild(ViewGroup.java:2511)
10-03 14:23:01.469: E/AndroidRuntime(3457):     at android.view.View.invalidate(View.java:5279)
10-03 14:23:01.469: E/AndroidRuntime(3457):     at android.view.View.setEnabled(View.java:3151)
10-03 14:23:01.469: E/AndroidRuntime(3457):     at com.myapp.Home$MyLicenseCheckerCallback.allow(Home.java:143) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:37:55.353

而不是`mHandler.post`，请尝试`runOnUiThread`需要更改 UI 组件的 Runnable 对象。

更新：下面的代码行是导致您的问题的原因

```
public void allow(int policyReason) {
    if (isFinishing()) {
        // Don't update UI if Activity is finishing.
        return;
    }

    // Should allow user access.
    displayResult(getString(R.string.allow));
    buttonNewDoc.setEnabled(false); /* This is the problem line */
} 
```

该声明需要发生在现在没有发生的 UI 线程上。使该语句在 UI 线程上运行应该可以解决您的问题。

```
public void allow(int policyReason) {
    if (isFinishing()) {
        // Don't update UI if Activity is finishing.
        return;
    }

    // Should allow user access.
    displayResult(getString(R.string.allow));
    runOnUiThread(new Runnable() {
        public void run() {
            buttonNewDoc.setEnabled(false);
        }
    });
} 
```

你真的应该重做一些事情，以便所有 UI 更改语句都在主 UI 线程上，但这至少应该解决你的问题。

# c++ - 元组和向量中的布尔连接？

> ID：12708592
> 
> 赞同：0
> 
> 时间：2012-10-03T12:35:54.583
> 
> 标签：c++, binary, boolean

对于写入/读取文件，我使用元组和向量进行一些低级/二进制操作。当我做`std::vector<bool> v(8)`or`std::tuple<bool, bool, bool, bool, bool, bool...>`时，我是否保证布尔值不被连接？（因此向量和元组的权重至少为 n 个字节（其中 n 是布尔值的数量）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:16:29.217

是否[`std::vector<bool>`](http://en.cppreference.com/cpp/container/vector_bool)是位压缩是实现定义的。它的接口没有提供任何直接访问布尔值的方法，因此试图直接访问底层数组，你肯定会在某个时候被烧毁。

[`std::tuple`](http://en.cppreference.com/cpp/utility/tuple)是 的概括`std::pair`。因此`std::tuple<bool, bool, bool>`等效于`struct SomeStruct { bool a, b, c; };`，换句话说，布尔值不会被位压缩。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-03T12:43:38.803

"向量特化：vector< bool > 向量类模板对bool 类型有一个特殊的模板特化。

提供此特化以优化空间分配：在此模板特化中，每个元素仅占用一位..” 引用自[此处](http://www.cplusplus.com/reference/stl/vector/)。

# iphone - iphone 4s 不播放 m4a 文件

> ID：12708594
> 
> 赞同：0
> 
> 时间：2012-10-03T12:36:00.607
> 
> 标签：iphone, objective-c, ios, xcode, ios5

我已经实现了以 m4a 格式录制音频文件的代码。它在 ipod 中运行良好，但在 iphone 4s 中无法播放。

我的代码如下：

```
-(IBAction)recordAudio:(id)sender
{

    NSDictionary * recordSetting = [[NSMutableDictionary alloc] init];
    [recordSetting setValue:[NSNumber numberWithInt:kAudioFormatAppleLossless] forKey:AVFormatIDKey];
    [recordSetting setValue:[NSNumber numberWithFloat:44100.0] forKey:AVSampleRateKey];
    [recordSetting setValue:[NSNumber numberWithInt: 2] forKey:AVNumberOfChannelsKey];
    [recordSetting setValue:[NSNumber numberWithInt:16] forKey:AVLinearPCMBitDepthKey];
    [recordSetting setValue:[NSNumber numberWithBool:NO] forKey:AVLinearPCMIsBigEndianKey];
    [recordSetting setValue:[NSNumber numberWithBool:NO] forKey:AVLinearPCMIsFloatKey];

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    NSString *documentsDirectory = [paths objectAtIndex:0];

    NSString *task = [[NSUserDefaults standardUserDefaults]valueForKey:@"accidenttask"];

  recordPath= [[NSString stringWithFormat:@"%@/%d.m4a",DOCUMENTS_FOLDER,a_id]retain];

 url=[NSURL fileURLWithPath:recordPath];

    NSError *err = nil;
    if([recorder isRecording])
    {
        [recorder stop];
        recorder = nil;
    }
    recorder = [[ AVAudioRecorder alloc] initWithURL:url settings:recordSetting error:&err];

    if(err)
        NSLog(@"ERROR : %@", err);
    BOOL st = [recorder prepareToRecord];
    if(!st){
        NSLog(@"Failed");
    }
    recorder.meteringEnabled = YES;
    BOOL status = [recorder record];
    if(!status)
        NSLog(@"Failed");

}

-(IBAction)stop:(id)sender
{
        [stopButton setHidden:YES];
    [playButton setHidden:NO];
    [recordButton setHidden:NO];
        [recorder stop];

}

-(IBAction)playAudio:(id)sender
{
    [recorder stop];
    if (!recorder.recording)
    {

        NSError *error;

            recordPath= [[NSString stringWithFormat:@"%@/%d.m4a",DOCUMENTS_FOLDER,a_id]retain];
            NSString *filename=[[filearry objectAtIndex:0]valueForKey:@"audiofile_path"];

            url=[ NSURL fileURLWithPath:filename];
            audioPlayer = [[AVAudioPlayer alloc]  initWithContentsOfURL:[NSURL fileURLWithPath:filename] error:nil]; 
            [audioPlayer setVolume:1.0];
            [audioPlayer prepareToPlay];
            [audioPlayer play];

        }
} 
```

可能是什么问题？

# javascript - 只有在 javascript 完全驱动后才会发生 Javascript 点击事件

> ID：12708603
> 
> 赞同：1
> 
> 时间：2012-10-03T12:36:34.907
> 
> 标签：javascript, internet-explorer, click

我的页面中有 javascript，我在那里使用了 click 事件。问题是，在 ie 中，点击不会立即发生，但只有在 javascript 漏洞通过之后才会发生。然后它触发点击事件！

在其他 javascript 代码**之前**，我需要它立即发生！

```
$(document).ready(function() { 
    // sorting the list
    var myLink = document.getElementById('header3');
    myLink.click();

    // scrolling the list to where the modified row is
    if ('${rowId}') {
        var row = $('#row-${rowId}');
        row.addClass("highlight");

        var scrollParent = ((jQuery.browser.msie) ? row.parent().parent().parent()[0] : row.parent()[0]);
        row[0].scrollIntoView(false);
        if (scrollParent.scrollTop > 0)
            scrollParent.scrollTop = scrollParent.scrollTop + (scrollParent.clientHeight / 2);
    }
} 
```

这种排序应该在滚动之前发生！在即点击发生**在**滚动之后，然后滚动在错误的位置。在 Firefox 中这有效！

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:39:38.553

尝试这个。将您的代码放在一个单独的函数中，并在点击中触发该函数。

```
 $(function(){
  function yourfunction(event) 
{

       //code to be executed after the click
       // scrolling the list to where the modified row is
      if ('${rowId}') {
                            var row = $('#row-${rowId}');
                            row.addClass("highlight");
                            var scrollParent = ((jQuery.browser.msie) ? row.parent().parent().parent()[0] : row.parent()[0]);
                             row[0].scrollIntoView(false);
                           if (scrollParent.scrollTop > 0)
                           scrollParent.scrollTop = scrollParent.scrollTop + (scrollParent.clientHeight / 2);
                      }

   return false;
  }

  });

   $(document).ready(function() { 
         // sorting the list
         $('#header3').click(yourfunction);
    }); 
```

希望它有帮助， 坎普斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:27:14.417

假设（从来都不是一件好事）在单击事件代码之前执行的代码是您在 click() 调用下方输入的代码，为什么不将其重构为函数并使其成为发生的代码的一部分当您调用 click() 代码时？

# asp.net-mvc-4 - 将自定义标头添加到 asp.net MVC 4 Web API

> ID：12708604
> 
> 赞同：2
> 
> 时间：2012-10-03T12:36:35.843
> 
> 标签：asp.net-mvc-4, asp.net-web-api

是否可以将自定义标头添加到 asp.net MVC 4 Web API？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T14:01:20.517

我假设您在谈论 HTTP 标头。而且我不确定您是要自定义响应还是请求。你可以两者都做。这是一篇[博](http://www.shawnmclean.com/blog/2012/04/asp-net-webapi-same-origin-policy-workaround-using-custom-http-headers/)文，展示了如何使用 ActionFilterAttribute 在响应中添加自定义标头。如果您使用 JQuery ajax 向 Web API 发送请求，您可以使用 beforeSend 事件添加自定义标头。这是一个使用它进行基本身份验证的示例。

```
 $.ajax({
        url: _url,
        data: _data,
        type: _type,
        beforeSend: function (xhr) {
            var up = username + ":" + password;
            xhr.setRequestHeader("Authorization", "Basic " + up);
        },
        success: _successFunc,
        error: _errorFunc
    }); 
```

# php - 在 config.php 文件中定义图像目录

> ID：12708605
> 
> 赞同：1
> 
> 时间：2012-10-03T12:36:39.290
> 
> 标签：php, configuration-files

我为我的网站创建了一个 config.php 文件。它似乎正在工作，但图像未显示。

```
define('HOST' , $_SERVER['DOCUMENT_ROOT']);
define('DIR_BASE',      HOST.'/m.pdi');
define('DIR_INCLUDES',    DIR_BASE . '/includes/');
define('VIEW_HEADER',   DIR_INCLUDES . 'header.php');
define('VIEW_NAVIGATION',   DIR_INCLUDES . 'horizontalmainmenus.php');
define('VIEW_FOOTER',   DIR_INCLUDES . 'footer.php');
define('DIR_IMAGES',   DIR_BASE . '/images/');

<img src="<?PHP echo DIR_IMAGES; ?>final-logo.jpg"> 
```

我的图像位置看起来像`http://192.168.1.8/var/www/html/m.pdi/images/final-logo.jpg`

如何修复此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:38:56.097

您的图像路径必须相对于您的网络根目录

```
define('DIR_IMAGES', '/m.pdi/images/'); 
```

这意味着您的网络根目录 /m.pdi/images/

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T12:44:29.663

```
define('HOST' , $_SERVER['DOCUMENT_ROOT']); 
```

这是错误的。你可能的意思是：

```
define('HOST' , $_SERVER['HTTP_HOST']); 
```

但即便如此，生成的路径也是错误的，因为主机名不应真正出现在站点本地链接中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T12:47:36.510

你得到的`$_SERVER['DOCUMENT_ROOT']`是：

> 当前脚本在其下执行的文档根目录，如服务器的配置文件中所定义。

你得到系统路径`/var/www/html/`，你可以这样做：

```
define('DIR_IMAGES', '/m.pdi/images/'); //relative path
//OR define('DIR_IMAGES', $_SERVER['HTTP_HOST'] . '/m.pdi/images/');

<img src="<?php echo DIR_IMAGES; ?>final-logo.jpg"> 
```

[$_SERVER 更多信息..](http://php.net/manual/en/reserved.variables.server.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T12:38:55.323

那是因为您将真实路径（在服务器上）与 URL 混淆了。

查看您生成的 HTML，您会发现有什么问题。

# javascript - 循环遍历 DOM 并显示隐藏元素

> ID：12708606
> 
> 赞同：1
> 
> 时间：2012-10-03T12:36:40.477
> 
> 标签：javascript, jquery

我有一组记录，它们被分成 5 个分段，每个分段包裹在一个带有 id 和类的 div 周围。

例如

```
<div id="myid" class="myclass">
<p>record1</p>
<p>record2</p>    
</div> 
```

显示第一组 5 条记录，其余的被隐藏。我在下面有一个链接，可以点击查看更多。单击后，它将显示另一个 5 等。

每个容器都有一个带有 Off 和 On 的类。这告诉我 div 正在显示什么 div 没有。

现在我想在每次点击时显示每组记录。我已经完成了这段代码，但似乎没有用。我在 jquery 方面的知识是有限的。

```
$(document).ready(function () {

// get first reviewBulkContainer and show
$(".reviewBulkContainer:first").show().addClass("On");

$("#showMoreReviews").click(function (e) {
    e.preventDefault();
    $("#reviewContainer .reviewBulkContainer").each(function () {
        if ($(this).hasClass("Off")) {
            $(this).show();
            $(this).removeClass("Off");
            $(this).addClass("On");
            return;
        }

    });
}); 
```

但这最终会显示所有记录片段，而不仅仅是一个时间。有人可以帮我吗？

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:41:10.463

不需要使用方法，如果要显示第一个具有 .class 的元素，`each`可以使用选择器。`:first``Off`

```
$("#showMoreReviews").click(function (e) {
    e.preventDefault();
    $("#reviewContainer .reviewBulkContainer.Off:first")
                                          .show()
                                          .toggleClass("Off On");
}); 
```

# linux - 使用 awk 从文件生成报告

> ID：12708610
> 
> 赞同：0
> 
> 时间：2012-10-03T12:36:59.170
> 
> 标签：linux, unix, awk

有一个名为 list.lst 的文件，我记下了它的内容。我需要编写一个 awk 脚本，它会在文件 list.lst 中生成一份报告，其中包含所有董事的姓名、部门名称和薪水。

该脚本可以执行为：awk –f director.awk list.lst

==================================================== =========

创建一个名为 marketing.awk 的 awk 脚本，它显示营销部门所有员工的姓名、职位和薪水。该脚本可以执行为：./marketing.awk list.lst

```
22233:charles harris     :g.m.    :sales         :12/12/52: 90000.00

29876:bill johnson      :director:production    :03/12/50:130000.00

25678:robert dylan      :d.g.m   :marketing     :04/19/43: 85000.00

22365:john woodcock     :director:personnel     :05/11/47:127000.00

25423:barry wood        :chairman:admin         :08/30/56:160000.00

21006:gordon lightfoot  :director:sales         :09/03/38:140000.00

26213:michael lennon    :g.m.    :accounts      :06/05/62:105000.00

24290:neil o'bryan      :executive:production   :09/07/50: 65000.00

22476:jackie woodhouse  :manager :sales         :05/01/59:110000.00

21265:p.j. wodehouse    :manager :accounts      :02/03/55: 97000.00

26521:derryk o'brien    :d.g.m   :accounts      :12/12/55: 85000.00

22312:bill wilcocks     :director:marketing     :09/26/45:125000.00

23564:ronie trueman     :executive:personnel    :07/06/47: 75000.00

22345:james wilcox      :g.m.    :marketing     :03/12/45:110000.00

20110:julie truman      :g.m.    :marketing     :12/31/40: 95000.00

20117:john trucman      :g.m.    :accounts      :12/25/41:110000.00

20123:frank -adams      :g.m.    :accounts      :09/25/48:110000.00

20129:Robin love        :director:sales         :10/01/08:120000.00 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T12:42:06.887

```
awk -F: '$4 ~ /marketing/ {print $2, $3, $6}' list.lst 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T13:16:45.423

营销.awk

```
#!/usr/bin/awk -f
{
if($4~/marketing/)
{
print $2,$3,$6;
}
} 
```

# java - 解组简单的 xml

> ID：12708615
> 
> 赞同：1
> 
> 时间：2012-10-03T12:37:14.417
> 
> 标签：java, xml, jaxb

我有简单的架构：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified"
           xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="error"  type="xs:string">
    </xs:element>
</xs:schema> 
```

我使用 JAXB 从 XML Schema 生成 Java 代码。我只有一堂课：

```
@XmlRegistry
public class ObjectFactory {

    private final static QName _Error_QNAME = new QName("", "error");

    /**
     * Create a new ObjectFactory that can be used to create new instances of schema derived classes for package: error
     * 
     */
    public ObjectFactory() {
    }

    /**
     * Create an instance of {@link JAXBElement }{@code <}{@link String }{@code >}}
     * 
     */
    @XmlElementDecl(namespace = "", name = "error")
    public JAXBElement<String> createError(String value) {
        return new JAXBElement<String>(_Error_QNAME, String.class, null, value);
    }

} 
```

我通常使用这段代码来解析 XML：

```
 JAXBContext context = JAXBContext.newInstance(RootGenerateClass.class);
 Unmarshaller unmarshaller = context.createUnmarshaller();
 RootGenerateClass response = (RootGenerateClass) unmarshaller.unmarshal(streamWrapper.getStream()); 
```

在这种情况下我该怎么办（我没有任何 rootGenerateClass）？我试试这个：

```
JAXBContext context = JAXBContext.newInstance(String.class);
Unmarshaller unmarshaller = context.createUnmarshaller();
String response = (String) unmarshaller.unmarshal(streamWrapper.getStream()); 
```

当然不行（（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:18:58.270

假设您`ObjectFactory`在包裹中，`com.example`您应该能够做到

```
JAXBContext context = JAXBContext.newInstance("com.example");
Unmarshaller unmarshaller = context.createUnmarshaller();
JAXBElement<String> responseElt = (JAXBElement<String>) unmarshaller.unmarshal(streamWrapper.getStream());
String response = responseElt.getValue(); 
```

当你给一个包名时，`JAXBContext.newInstance`它会在那个包中寻找一个`ObjectFactory`类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:06:38.387

你还没有提到你的`RootGenerateClass`这里。解组也意味着将 XML 内容转换为 JAVA 类对象，并且该类应该具有与 XML 模式中相同的数据成员。因此，在第二种情况下，解组到`String`类对象将不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T15:05:33.340

非常感谢。:) 我只对根元素使用包装器

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified"
           xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="error" type="RetroErrorType"/>
    <xs:complexType name="RetroErrorType">
        <xs:simpleContent>
            <xs:extension base="xs:string">
            </xs:extension>
        </xs:simpleContent>
    </xs:complexType>
</xs:schema> 
```

和

```
JAXBContext context = JAXBContext.newInstance(String.class);
Unmarshaller unmarshaller = context.createUnmarshaller();
String response = (String) unmarshaller.unmarshal(streamWrapper.getStream()); 
```

好好工作

# sql - 查找给定日期之间的月份

> ID：12708616
> 
> 赞同：1
> 
> 时间：2012-10-03T12:37:18.153
> 
> 标签：sql, sql-server, sql-server-2008, tsql, date

> **可能重复：**
> [两个日期之间的月份](https://stackoverflow.com/questions/7885851/months-between-two-dates)

我需要带来结果，两个日期之间的月份是多少。

例如。假设日期是

```
Declare @FrDate datetime,@ToDate datetime
Set @FrDate ='2010-05-31 17:38:58.577' 
Set @ToDate ='2010-09-01 17:38:58.577' 
```

需要输出

```
Result
MAY
JUN
JUL
AUG
SEP 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:46:19.257

试试这个：

```
DECLARE @FrDate  DATETIME,
        @ToDate    DATETIME;

Set @FrDate ='2010-05-31 17:38:58.577' 
Set @ToDate ='2010-09-01 17:38:58.577'

;WITH MONTHS (date)
AS
(
    SELECT @FrDate
    UNION ALL
    SELECT DATEADD(month,1,date)
    from months
    where date<=@ToDate
)
SELECT Datename(month,date) AS MONTH FROM MONTHS 
```

结果：

```
MONTH
-----------------
May
June
July
August
September

(5 row(s) affected) 
```

要在结果中获得短月份名称，您可以使用以下行：

```
SELECT LEFT(CONVERT(VARCHAR,date,100),3) AS MONTH FROM MONTHS 
```

要获取大写的月份名称，您可以使用`UPPER`以下函数：

```
SELECT UPPER(LEFT(CONVERT(VARCHAR,date,100),3)) AS MONTH FROM MONTHS 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:00:16.840

创建一个[日历表](https://stackoverflow.com/questions/2459260/calendar-table-week-number-of-month)，然后你可以简单地这样写：

```
select distinct MonthName
from dbo.Calendar
where BaseDate between @StartDate and @EndDate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T13:12:59.420

另一种方法

```
Declare @FrDate datetime,@ToDate datetime 
Set @FrDate ='2010-05-31 17:38:58.577'  
Set @ToDate ='2010-09-01 17:38:58.577' 

select 
    datename(month,dateadd(month,number-1,@FrDate)) as month_name
from 
    master..spt_values 
where 
    type='p'and number between 1 and datediff(month,@frdate,@todate)+1 
```

# objective-c - 有没有办法为siri设置用户名？

> ID：12708620
> 
> 赞同：0
> 
> 时间：2012-10-03T12:37:22.390
> 
> 标签：objective-c, ios, xcode

我需要获取 iPhone 用户的名称，但是从与用户相关的设备获取数据的唯一相关事情是使用 UIDevice 类，但我能得到的只是设备名称。

有人知道我如何在不询问他们的情况下获取用户名吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:39:08.650

今天没有 Siri API。

有关更多信息，请参见：[http ://www.quora.com/Siri-API/Does-Siri-have-APIs-that-c​​an-be-used-today](http://www.quora.com/Siri-API/Does-Siri-have-APIs-that-can-be-used-today)

# ios - 添加到 NSMutableArray 而不添加 iPhone（Xcode）中的最后一个值？

> ID：12708630
> 
> 赞同：0
> 
> 时间：2012-10-03T12:37:49.497
> 
> 标签：ios, xml-parsing, nsmutablearray, nsxmlparser

我将从 XML Parser 获得的数据添加到`NSMUtableArray`，我看到除了最后一个值之外的所有值都添加了

我的 XML 响应是这样的：

```
<List1>
 <CompanyProvider>
    <TimeStart>11:00</TimeStart>
  </CompanyProvider>
  <CompanyProvider>
    <TimeStart>11:15</TimeStart>
 </CompanyProvider>
 <CompanyProvider>
    <TimeStart>11:30</TimeStart>
 </CompanyProvider>
 <CompanyProvider>
    <TimeStart>11:45</TimeStart>
 </CompanyProvider>
<List1>
<CompanyTimeList>
   <CompanyProvider>
     <TimeStart>11:00</TimeStart>
   </CompanyProvider>
   <CompanyProvider>
     <TimeStart>11:15</TimeStart>
   </CompanyProvider>
   <CompanyProvider>
     <TimeStart>11:30</TimeStart>
   </CompanyProvider>
   <CompanyProvider>
     <TimeStart>11:45</TimeStart>
   </CompanyProvider>
</CompanyTimeList> 
```

而且我必须从 CompanyTimeList 中消耗 TimeStart 的值我使用的代码是：

```
-(void)ButtonClicked
{
    arr1 = [[NSMutableArray alloc] init];
    drr1 = [[NSMutableDictionary alloc] init];

    NSString *urlString = [NSString stringWithFormat:@"http://192.168.0.101:8732/Design_Time_Addresses/IServices/AppointmentService/json/GetAppointments/?cid=999a18dd-50a6-4da0-b692-ef173834435b&pid=aee49598-6199-4f57-90e2-654da651c944&wk=Tuesday&dt=10/16/2012"];    
    NSURL *jsonUrl =[NSURL URLWithString:urlString];
    NSString *jsonStr = [[NSString alloc] initWithContentsOfURL:jsonUrl];  
    NSXMLParser *parser = [[NSXMLParser alloc] initWithContentsOfURL:jsonUrl];      

    [parser setDelegate:self];
    [parser setShouldProcessNamespaces:NO];
    [parser setShouldReportNamespacePrefixes:NO];
    [parser setShouldResolveExternalEntities:NO];
    [parser parse];
    [parser release];

    NSLog(@"%@",arr1);      
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    element = elementName;

    if([elementName isEqualToString:@"CompanyTimeList"])
    {
        arr1 = [[NSMutableArray alloc] init];
        drr1 = [[NSMutableDictionary alloc] init];   
    }

    if([elementName isEqualToString:@"CompanyProvider"])
    { 
        drr1 = [[NSMutableDictionary alloc] init];        
    }

    srr1 = [[NSMutableString alloc] init];
} 

-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    [srr1 appendString:string];
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if([elementName isEqualToString:@"TimeStart"])
    {    
        [drr1 setObject:srr1 forKey:@"TimeStart"];
        [srr1 release],srr1=nil;
        return;
    }  

    if([elementName isEqualToString:@"CompanyProvider"]) 
    { 
        [arr1 addObject:drr1]; 
    }    

    if([elementName isEqualToString:@"CompanyTimeList"])
    {      
        [drr1 release];  
    }

    [srr1 release], srr1 = nil;
} 
```

但我能看到的回应是：

```
(
    {
        TimeStart="11:00"
    },
    {
        TimeStart="11:15"
    },
    {
        TimeStart="11:30"
    }
    {
        TimeStart=""
    }
) 
```

我看不到最后一个值，即 11:45.Y 丢失。我哪里错了？

# perl - 哪一个代表空？undef 或空字符串

> ID：12708633
> 
> 赞同：9
> 
> 时间：2012-10-03T12:37:57.843
> 
> 标签：perl, oracle, dbi

我想`null`在表格的列中插入。

**哪一个代表空？`undef`或空字符串`''`。**

应该使用哪一个，为什么？我知道`defined`并且我可以检查它。

但我更多的是从数据库的角度来看。

哪一个代表`null`更恰当？

**更新：**我正在使用`DBI`模块。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-03T14:15:44.477

DBI 用于`undef`表示 SQL `NULL`。空字符串表示一个空字符串。

但是，有些*数据库*不区分`NULL`空字符串和空字符串。 [甲骨文在这里是一个特别的罪犯。](https://duckduckgo.com/?q=oracle%20null%20empty%20string) DBI 对此无能为力。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-03T12:40:05.020

假设 Perl DBI，`undef`代表一个 SQL `NULL`。

Perl 中的空字符串在 SQL 中表示完全相同（即空字符串）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-03T12:41:40.620

假设您正在使用 DBI 模块，并且正在使用绑定参数（因为如果您手动构建 SQL，您将`NULL`在字符串中使用）：

> 未定义的值或`undef`用于指示 NULL 值。

请参阅[DBI 的 perldoc](http://search.cpan.org/dist/DBI/DBI.pm#Placeholders_and_Bind_Values)

如果您没有直接使用 DBI（例如，您使用的是 DBIx::Class 或其他 ORM），那么您可能会发现它为此继承了 DBI 的行为。

# jquery - jQuery 和并行事件

> ID：12708639
> 
> 赞同：0
> 
> 时间：2012-10-03T12:38:17.627
> 
> 标签：jquery, events, click, bind, unbind

让我们看看我的问题！我有一个带有 2 个 DIV 的 HTML 页面。这两个都链接到点击事件触发的 jQuery 函数。所以我们有 div1 和 div2。这里我们有一些代码：

```
<div id="div1"></div>
<div id="div2"></div>
....
<script>
   $('#div1').click(function(){
       $('#div1').animate({some animations...},1000);
   });
   $('#div2').click(function(){
       $('#div2').animate({something else...},1000);
   });
</script> 
```

好的，我的问题是，如果用户尝试单击 div1，则 div1 必须做动画，这需要一些时间......但是如果在此动画期间用户尝试单击 div2，则不必触发此单击直到 div1 动画完成。我发布的脚本只是我的一个非常短的版本，我无法修改这些函数的结构。我尝试使用*绑定/取消绑定*，但我不能让 divX 等到其他动画停止，因为*绑定函数*会自动触发我附加到元素的事件。你能帮助我吗？

编辑：为了确保每个人都能理解，假设在我的示例中我们有 5 个 div，每个 div 都有在点击事件时触发的不同功能。如果我单击 div1，则必须在执行由 div1 触发的动画期间禁用所有其他 div，动画完成后可以再次在单击事件上启用它们....为了确保，如果我单击div1，然后直到动画完成，我可以单击所有其他 div，但必须触发任何事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:59:19.847

您可以使用延迟对象使一个动画等待另一个动画完成：

```
$('#div2').click(function() {
    $('#div1').promise().done(function() {
        $('#div2').animate(...);
    });
}); 
```

仅当任何现有动画完成`.promise().done(...)`时才会启动内部回调。`#div1`如果没有，它将立即进行。

见[http://jsfiddle.net/alnitak/NjCf4/](http://jsfiddle.net/alnitak/NjCf4/)

或者，您可以使用`.queue`：

```
$('#div1').queue(function(next) {
    $('#div2').animate(...);
    next();
}); 
```

后面的代码会将 的动画排`#div2`在当前队列的末尾`#div1`。但是，如果后续的附加动画排队，`#div1`它们仍然会在以后发生。

deferred 方法可能更好，因为 1) 它允许您等待任意一组元素，以及 2) 它专门等待直到所有动画完成，而不是将新动作放入队列中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:00:06.497

这里的问题是您正在触发需要一段时间的函数（动画在执行时可能需要一秒钟或更长时间），并且在执行此过程时进程被阻止。

Nicholas C. Zakas 在他的“高性能 Javascript”一书中建议将长时间的处理操作封装在一小段时间内，以避免这些操作阻塞其余的执行。

主要思想是使用定时器来划分每个耗时超过 50ms 的操作。我会看看我是否可以稍后在这里发布一个示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-21T21:32:49.993

通过一个标志，您可以发现动画是否正在运行。

```
flag = false;
$("#div1").click(function() {
  flag = true;
  $( "#anim1" ).animate({
    opacity: 0.25}, 1000, function() {
    flag = false;
  });
}); 
```

# oracle - 异步插入记录的过程

> ID：12708640
> 
> 赞同：0
> 
> 时间：2012-10-03T12:38:24.110
> 
> 标签：oracle, jsp, stored-procedures, plsql, oracle10g

我有一个程序包，我正在调用一个将记录插入表的过程，并且我以 2 分钟的间隔调用此过程两次，使用`sys.DBMS_LOCK.sleep (<>);`

我面临的问题是来自应用程序的调用表单在插入完成之前仍然打开。

我如何确保当我提交我的页面并且页面应该关闭时，插入应该发生在后端某种异步调用中。在数据库程序中是否有任何异步关键字来做这种活动？

谢谢

更新

```
putData(empNo,EmpName);
sys.DBMS_LOCK.sleep (<>);
putData(empNo,EmpName); 
```

由于上述原因，我的页面一直停留到第二个程序完成。我想在第一个过程完成或用户提交页面后立即关闭页面。

更新 2

```
DBMS_JOB.SUBMIT(ln_dummy, 'begin putData('||empNo,EmpName||'); end;'); 
```

给我编译错误错误的参数数量来调用提交。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T14:32:01.423

您的 PutData() 过程需要两个参数。您可能认为您正在传递两个参数，但事实并非如此。此外，如果 EmpName 是一个字符串 - 这似乎很可能 - 您需要将其包装在转义引号中。基本上，您在这里编写动态 SQL，这总是很棘手。

试试这个：

```
DBMS_JOB.SUBMIT(ln_dummy, 'begin putData('||empNo||','''||EmpName||'''); end;'); 
```

* * *

> “其他问题是如何以 10 分钟的间隔运行这些作业”

SUBMIT() 可以采用 INTERVAL 参数。它在 DBMS_JOB 的文档中。 [了解更多](http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_job.htm#BABHCBFD)。

但是，如果您希望每次迭代使用不同的参数值，您可能需要重新考虑您的应用程序设计。您应该有一个轮询表以获取要处理的值的过程。

或者使用队列。这取决于你真正想要达到的目标。

# c# - 单击并拖动到 WPF/C# 中的多选复选框

> ID：12708645
> 
> 赞同：3
> 
> 时间：2012-10-03T12:38:41.507
> 
> 标签：c#, wpf, datagrid, checkbox

**问题：**

我的应用程序要求用户能够通过一列复选框选择数据网格中的多个条目。所需的行为是，当您单击列中的复选框时，它的行为就像一个普通的复选框，但是如果您在鼠标左键按下时拖动它，它的选择状态将变为与之前相反的状态。

**到目前为止我已经尝试过：**

我已经尝试对 CheckBox 进行子类化并处理 OnMouseEnter，但是单击的第一个复选框似乎捕获了鼠标，因此没有其他复选框触发 OnMouseEnter 事件。

我已经尝试实现拖放黑客，用户单击以选择一个复选框，然后将该复选框拖到其他复选框上，以便其他人收到 DragOver 事件并可以切换状态。此解决方案会导致光标在拖放过程中未超过另一个复选框时显示为带有斜线的圆圈，这对于此应用程序是不可接受的。

**我想要什么：**

我想要一种方法来实现具有我描述的功能的复选框，理想情况下是我可以重用的 xaml 样式或子类，因为我的应用程序中的多个位置都需要此功能。

**有没有一种优雅的方式来实现这种效果？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T13:35:42.327

我在我的应用程序中这样做了，当您必须选择 30 个复选框时非常方便。
为此，我自己处理了预览鼠标事件：PreviewMouseLeftButtonDown、PreviewMouseMove、PreviewMouseLeftButtonUp。

在 PreviewMouseLeftButtonDown ：我得到鼠标相对于控件的位置。
在 PreviewMouseMove 中：如果我离 firstPoint 足够远，我会从开始到当前位置绘制一个矩形。然后我在 CheckBoxes 中进行迭代，查看它们是否与矩形相交，如果是，则突出显示它们（这样用户就知道 chesboxes 将交换）
在 PreviewMouseLeftButtonUp 中：我为相交的 CheckBoxes 进行交换。

如果它可以帮助你，这是我使用的代码。它不是 MVVM (:-)) 但工作正常，它可能会给你一些想法。它是 vb.net 代码的自动翻译。

要使其工作，您需要在 CheckBoxes 顶部有一个 Canvas（例如，=在同一个网格单元内），其属性为 IsHitTestVisible="False" 。
在这个画布中，放置一个名为“SelectionRectangle”的矩形，它具有适当的填充和描边，但不透明度为 0.0。

```
// '' <summary>
// '' When Left Mouse button is pressed, remember where the mouse move start
// '' </summary>
private void EditedItems_PreviewMouseLeftButtonDown(object sender, System.Windows.Input.MouseButtonEventArgs e) {
    StartPoint = Mouse.GetPosition(this);
}

// '' <summary>
// '' When mouse move, update the highlight of the selected items.
// '' </summary>
private void EditedItems_PreviewMouseMove(object sender, System.Windows.Input.MouseEventArgs e) {
    if ((StartPoint == null)) {
        return;
    }
    PointWhereMouseIs = Mouse.GetPosition(this);
    Rect SelectedRect = new Rect(StartPoint, PointWhereMouseIs);
    if (((SelectedRect.Width < 20) 
                && (SelectedRect.Height < 20))) {
        return;
    }
    //  show the rectangle again
    Canvas.SetLeft(SelectionRectangle, Math.Min(StartPoint.X, PointWhereMouseIs.X));
    Canvas.SetTop(SelectionRectangle, Math.Min(StartPoint.Y, PointWhereMouseIs.Y));
    SelectionRectangle.Width = Math.Abs((PointWhereMouseIs.X - StartPoint.X));
    SelectionRectangle.Height = Math.Abs((PointWhereMouseIs.Y - StartPoint.Y));
    foreach (CheckBox ThisChkBox in EditedItems.Children) {
        object rectBounds = VisualTreeHelper.GetDescendantBounds(ThisChkBox);
        Vector vector = VisualTreeHelper.GetOffset(ThisChkBox);
        rectBounds.Offset(vector);
        if (rectBounds.IntersectsWith(SelectedRect)) {
            ((TextBlock)(ThisChkBox.Content)).Background = Brushes.LightGreen;
        }
        else {
            ((TextBlock)(ThisChkBox.Content)).Background = Brushes.Transparent;
        }
    }
}

// '' <summary>
// '' When Left Mouse button is released, change all CheckBoxes values. (Or do nothing if it is a small move -->
// '' click will be handled in a standard way.)
// '' </summary>
private void EditedItems_PreviewMouseLeftButtonUp(object sender, System.Windows.Input.MouseButtonEventArgs e) {
    PointWhereMouseIs = Mouse.GetPosition(this);
    Rect SelectedRect = new Rect(StartPoint, PointWhereMouseIs);
    StartPoint = null;
    SelectionRectangle.Opacity = 0;
    //  hide the rectangle again
    if (((SelectedRect.Width < 20) 
                && (SelectedRect.Height < 20))) {
        return;
    }
    foreach (CheckBox ThisEditedItem in EditedItems.Children) {
        object rectBounds = VisualTreeHelper.GetDescendantBounds(ThisEditedItem);
        Vector vector = VisualTreeHelper.GetOffset(ThisEditedItem);
        rectBounds.Offset(vector);
        if (rectBounds.IntersectsWith(SelectedRect)) {
            ThisEditedItem.IsChecked = !ThisEditedItem.IsChecked;
        }
        ((TextBlock)(ThisEditedItem.Content)).Background = Brushes.Transparent;
    }
} 
```

编辑：我在用户控件中使用了该代码。此控件将布尔值列表和字符串列表（标题）作为参数，并（使用 WrapPanel）构建具有正确标题的 CheckBox 数组。所以你可以用矩形选择/取消选择，还有两个按钮可以选中/取消选中所有。我还尝试保持良好的列/行比率以处理具有良好列/行平衡的 7 到 200 个布尔值的选择。

![在窗口中使用 BooleanEdit 用户控件的示例](../Images/4a93ebd3958cd73a993a7f919ac75749.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T07:54:58.713

这个话题已经有几个月了，但我想我有你正在寻找的优雅答案。

由于您将拖动和检查描述为两个单独的行为，因此首先设置您的数据网格 MouseDown 处理程序...

```
yourdatagrid.MouseDown += DragCheck_MouseDownHandler; 
```

这将允许从数据网格背景开始拖动（但不是网格中的控件。）

```
 private void DragCheck_MouseDownHandler(object sender, MouseEventArgs e)
    {
        if (e.Button != MouseButtons.Left) return;
        Control dgrid = sender as Control;
        foreach (CheckBox box in dgrid.Controls.OfType<CheckBox>())
        {
            box.Tag = null;
        }
        dgrid.MouseMove += DragMove_MouseMoveHandler;
    } 
```

这将`checkbox.Tag`用作切换一次，仅在鼠标按下时拖动。如果您将 CheckBox 标签用于其他用途，我相信您可以找到自己的方式来识别这些框。为下`datagrid.MouseMove`一个处理程序设置....

```
 private void DragMove_MouseMoveHandler(object sender, MouseEventArgs e)
    {
        Control dgrid = sender as Control;

        Point now = dgrid.PointToClient(Cursor.Position);
        if (e.Button == MouseButtons.Left)
        {
            Control under = dgrid.GetChildAtPoint(now);
            if (under != null && under.GetType() == typeof(CheckBox))
            {
                //if the point has a valid CheckBox control under it
                CheckBox box = under as CheckBox;
                if (box.Tag == null)// not yet been swiped
                {
                    box.Checked = !box.Checked;
                    box.Tag = true;
                }
            }
        }
        else
        {
            //if MouseButtons no longer registers as left
            //remove the handler 

            dgrid.MouseMove -= DragMove_MouseMoveHandler;

        }
    } 
```

# iphone - ios6从横向到纵向模式的旋转问题

> ID：12708652
> 
> 赞同：5
> 
> 时间：2012-10-03T12:38:59.807
> 
> 标签：iphone, ios6

我正在使用 ios 6 的新定位方法，它工作正常。我的视图以纵向模式呈现，当我呈现viewcotrnoller 并将其旋转到 Landscape 时，关闭该视图控制器它会恢复方向。意味着它应该保持在横向，但它变成纵向。这是我的代码。

```
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAll;

}

// Tell the system It should autorotate
- (BOOL) shouldAutorotate {
    return YES;
}

// Tell the system which initial orientation we want to have
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    return UIInterfaceOrientationMaskPortrait;
} 
```

我认为这是因为preferredInterfaceOrientationForPresentation 方法而发生的，但没有得到解决方案。请帮助！

谢谢 ！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T10:51:46.603

如果您希望一开始就支持所有 interfaceOrientations，请不要编写 preferredInterfaceOrientationForPresentation 方法，因为它始终只采用首选接口方向。

# java - 使用 JButton 将变量切换为真/假

> ID：12708653
> 
> 赞同：0
> 
> 时间：2012-10-03T12:39:01.583
> 
> 标签：java, swing, jbutton

你好我想知道。如何使用 JButton 将变量设置为 true 或 false，反之亦然？我的第一个想法是创建变量，例如

```
private boolean value1, value2; 
```

和像这样的按钮

```
private JButton toggle1, toggle2; 
```

// 见下面的代码

问题是它不会以某种方式对按钮做出反应。有可能这样还是我必须使用其他东西？

编辑：这是相关代码。（我的动作监听器）

```
 public void actionPerformed(ActionEvent e) {

    if( e.getSource() == toggle1 ) {

        if(aan1 == false) {

            aan1 ^= true;
            System.out.println(aan1);

        }
        else if(aan1 == true) {

            aan1 ^= false;
        }

    }

    try {
        // controleer of de ingevulde waarde tussen de 0 en de 15 is
        if( e.getSource() == burn && Integer.parseInt(textfield.getText()) < 16 && Integer.parseInt(textfield.getText()) > 0) {
            // brand kaars
            if( height > 15 && aan1 == true) {

                int aantal = Integer.parseInt(textfield.getText());
                height -= aantal;
            }

            if( height2 > 15 && aan2 == true) {
                int aantal = Integer.parseInt(textfield.getText());
                height2 -= aantal;
            }

            // opnieuw tekenen
            repaint();

        }
        else {

            JOptionPane.showMessageDialog(null, "error: vul een getal tussen de 0 en 15 in!"); // alertbox melding

        }
    }
    catch(NumberFormatException error) {

        JOptionPane.showMessageDialog(null, "error: een van de velden bevat geen cijfer of is niet ingevuld!"); // alertbox melding

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:26:19.040

正如[*如何使用按钮*](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)中所建议的，[`JToggleButton`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JToggleButton.html)这可能是一个不错的选择，因为`isSelected()`谓词反映了按钮的状态。

```
state = button.isSelected() 
```

可以在[此处](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html#eg)、[此处](https://stackoverflow.com/a/5529043/230513)和[此处](https://stackoverflow.com/a/6036048/230513)找到示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T12:45:24.263

不确定您到底要问什么，但要切换可以使用的布尔值：

```
value1 = !value1; 
```

或者

```
value1 ^= true; 
```

然后打印你的变量：

```
System.out.println(value1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T12:47:02.883

就这样做？：

```
value1 != value1; 
```

这反转当前值：所以如果为假，它将变为真，反之亦然。

编辑：应该是：

```
value = !value; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T12:49:30.273

如果您想在按下按钮时切换布尔变量，您应该使用 a`JCheckBox`而不是`JButton`用于该目的，它具有内部布尔状态并且它会自行更新此变量。该复选框还使该布尔状态对用户可见。

当你需要布尔变量时，你可以用`JCheckBox.isSelected()`方法来询问它。

# javascript - On Enter Key Press on textbox server-side postback event没有被触发

> ID：12708655
> 
> 赞同：1
> 
> 时间：2012-10-03T12:39:04.053
> 
> 标签：javascript, asp.net, .net

我创建了一个带有文本框控件的网页，如下所示 -

```
<asp:TextBox ID="txtNumber" runat="server" size="5" MaxLength="9" AutoPostBack="True"
                    OnTextChanged="txtNumber_TextChanged" CssClass="txtBoxPage" Style="margin-left: 3px;"></asp:TextBox> 
```

在文本框中按 Enter 键时遇到问题。在 Enter 键按下回发不会发生。您能否提供帮助，以便在 Enter Key Press 上，页面应该得到回发，并且文本框服务器端会被触发。

我调试了代码，发现 WebForm_TextBoxKeyHandler 在按下 ENTER 键时返回 false。以下是渲染代码供参考 -

```
<input type="text"  onkeypress="if (WebForm_TextBoxKeyHandler(event) == false) return false;"  onchange="javascript:setTimeout('__doPostBack(\'textbox1\',\'\')', 0)"  ... /> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T13:35:28.130

尝试以下解决方法 -

```
//Page_Load method
txtNumber.Attributes.Add("onkeyup", "OnKeyUp(event);");

//JavaScript code
function OnKeyUp(event) {
       var key = (event.keyCode) ? event.keyCode : event.which;
       if (key != null) {
            key = parseInt(key, 10);
            if (key == 13) {
                document.body.setActive();
                document.body.focus();
                window.event.srcElement.focus();
            }
       }        
 } 
```

上面的代码将触发 PostBack 事件，因为焦点正在丢失并从文本框中重新获得。

# java - 是否有任何 api 可以克隆 Android Market 应用程序的行为？有可能吗？

> ID：12708656
> 
> 赞同：0
> 
> 时间：2012-10-03T12:39:05.700
> 
> 标签：java, android, google-play

使用 Android 市场应用程序，或者更确切地说，您设备中的 Google Play 应用程序，您可以搜索市场，一键下载并安装您想要的应用程序！

我正在开发一个在 android 市场上搜索关键字的项目，虽然我可以访问应用程序及其描述，但我似乎无法像在 Google Play 中那样从我的应用程序中下载该应用程序应用程序！

无论如何我们可以做到吗？也许以某种方式连接到用户设备上安装的当前 Google Play 应用程序并将其用于下载和安装过程？

谢谢，哈迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:45:50.557

如果您知道应用程序的包名称，则可以启动一个意图，将用户通过手机上的 google play 应用程序带到 Play 商店。

前任：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setData(Uri.parse("market://details?id=com.example.android"));
startActivity(intent); 
```

如果您不想去 google play store 并使用自己的类似市场的服务，那么您将找不到 API，因为这是 google 肯定不想娱乐的用例，因为他们希望人们通过他们的店铺。但是您可以自己在网络服务器上托管 apk，当用户单击应用程序中的安装按钮时，通过您自己编写的 API 从您自己的网络服务器下载 apk，默认的 android 包管理器将为您安装它。

# iphone - 如何以编程方式查看相册中的照片？

> ID：12708659
> 
> 赞同：3
> 
> 时间：2012-10-03T12:39:09.557
> 
> 标签：iphone, ios, xcode, uiimagepickercontroller

我使用以下代码从相册中获取图像。

```
UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
[imagePicker setDelegate:self];
[self presentModalViewController:imagePicker animated:YES]; 
```

和

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info 
{
    [picker dismissModalViewControllerAnimated:YES];
    [picker release];

    // Edited image works great (if you allowed editing)
    //myUIImageView.image = [info objectForKey:UIImagePickerControllerEditedImage];
    // AND the original image works great
    //myUIImageView.image = [info objectForKey:UIImagePickerControllerOriginalImage];
    // AND do whatever you want with it, (NSDictionary *)info is fine now
    //UIImage *myImage = [info objectForKey:UIImagePickerControllerEditedImage];

    UIImage *image =  [info objectForKey:UIImagePickerControllerOriginalImage];

    [customImageView setImage:image]; 

    customImageView.contentMode = UIViewContentModeScaleAspectFill;
} 
```

但我没有得到设备的任何回应。我已经完成了所有 SO 答案，但它对我不起作用。谁能告诉我如何从相册中获取图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:57:29.790

从方法中删除您的`release`声明。`didFinishPickingMediaWithInfo`写成

```
[self presentModalViewController:imagePicker animated:YES];
[imagePicker release]; 
```

# html - Dreamweaver 和 Excel

> ID：12708660
> 
> 赞同：0
> 
> 时间：2012-10-03T12:39:10.937
> 
> 标签：html, excel, google-chrome, dreamweaver, frames

我在 Dreamweaver 中导入了一些带有框架的 Excel 文件。

在 IE 中框架运行良好，但在 Chrome 中不起作用

这是[网站](http://www.abc-camera.com/leyucca/proprio/banque.htm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:48:07.370

这看起来很像 Excel 生成的“HTML”，而不是 Dreamweaver 推出的任何东西。

基本问题是它包含在 IE 之外不受支持的专有 Microsoft gubbins 中。

解决方案是根据数据构建适当的网页，并且不信任 Excel 的 HTML 导出。

# java - 如何用Java为猜谜游戏创建一个高分表？

> ID：12708661
> 
> 赞同：1
> 
> 时间：2012-10-03T12:39:10.537
> 
> 标签：java

`我刚刚在java中完成了猜谜游戏，但现在我需要为这个游戏创建一个highs核心，即使在代码停止后（我使用eclipse）也会存储名称、时间和猜测数。谁能帮我弄一张高分表？这是游戏：

```
import java.util.*;

public class Game {

public static void main (String[]args){
    Game guessing = new Game();
    guessing.start();

}
public void start() {

    System.out.println("Welcome to guessing game!"); 
    System.out.println("Please enter the number between 1 and 1000");

    Scanner input = new Scanner(System.in);
    String y = "yes";
    String n = "no";    
    String playerName;
    String currentGuess;
     String quit = "quit";
     int tries = 0;  //number of times player guessed
     int guess = 0;  //number that player inputs
     long startTime = System.currentTimeMillis();  //start timer after first guess
     int randomNumber = (int) (Math.random() * 999 + 1); // generating random number
     System.out.println(randomNumber);     // to be deleted after game is finished
     currentGuess = input.nextLine();

do{

    if (currentGuess.matches("[0-9]+")) {  //if input is non-numeric value, show message
        int numericInput = Integer.parseInt(currentGuess);
    }
    else {
    System.out.println("You have enetered non-numeric value,please try again");
    currentGuess = input.nextLine();
    continue; //allows to enter non-numeric values multiple times without crash
    }

    guess = Integer.parseInt(currentGuess);

    if(guess<1 || guess>1000 ){ //if the input number is out of range
        System.out.println("The number is out of range! Please try again");
        currentGuess = input.nextLine();
        continue;
    }

    if (guess>randomNumber){
        System.out.println("Oops,too high!");
        currentGuess = input.nextLine();
        tries++;
    }
    else if (guess<randomNumber){
        System.out.println("Sorry, to low!");
        currentGuess = input.nextLine();
        tries++;
    }

    if(currentGuess.equalsIgnoreCase(quit)){
        System.out.println("*****Thanx for playing! See you next time!*****");
    }

    if (guess==randomNumber){
        tries++;
        long endTime = System.currentTimeMillis();//stop the timer after number is guessed         correctly
        long gameTime = endTime - startTime; //display game time after input number==random   number
        System.out.println("Well done! You won the game in " + tries + " guesses " + "and " +    gameTime/1000 +  " seconds!");
        System.out.println("Please enter your name: ");
        playerName = input.nextLine();    //input for player name
        System.out.println("Would you like to play again? y/n..."); 
                currentGuess = input.nextLine();
                }                              /*input for "yes" or "no".. 
                                                  *MUST type "yes" or "no"! instead of "y" or   "n"!!*/

    if (currentGuess.equalsIgnoreCase(n)){
        System.out.println("******See you next time");

    }

    if (currentGuess.equalsIgnoreCase(y)) {
        start();

    }
    }

while(guess!=randomNumber && !currentGuess.equalsIgnoreCase(quit));  /*keep running the loop    until input
                                                                 *equals random number, or until   input equals
                                                                 * "quit" */

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:56:49.053

您可以将结果保存到用户目录中的 txt 文件中。当您的程序启动时，您可以在初始化程序时阅读它。[编写文本文件的示例](http://roseindia.net/java/beginners/WriteTextFileExample.shtml)

# javascript - 根据当前日期和出生日期计算年龄

> ID：12708662
> 
> 赞同：0
> 
> 时间：2012-10-03T12:39:12.107
> 
> 标签：javascript, html

> **可能重复：**
> [在 JavaScript 中计算年龄](https://stackoverflow.com/questions/4060004/calculate-age-in-javascript)

I have create form which includes Birth date,Current Date,Age text boxes,current date display by default in text box,when choose birth date I want calculate age & display it into age text box.. My Java script code:

```
<html>
<head>
<script language="javascript">
function aaa()
{
    date= new Date();
    var d = date.getDate();
    var m= date.getMonth()+1;
    var y= date.getFullYear();

    document.getElementById('ddd').value=m + '/' + d + '/' + y;
}
function display()
{
    var a = document.getElementById('eee').getDate.value;
    var b = document.getElementById('eee').getMonth.value;
    var c = document.getElementById('eee').getFullYear.value;

    //var aa= document.getElementById('eee').(this).('getDate').value;
    var e= y - c;
    {
      document.write("Ans="+e);
    }
alret(e);
}
</script>
</head>
<body onload="aaa();">
<form name="xyz" method="post">
    CurrentDate:<input type="text" name="ddd" id="ddd" readonly="readonly"> 
    BirthDate:<input type="date" name="eee" id="eee">
    Age:<input type="text" name="age" id="age">
<input type="submit" name="submit" value="submit" onClick="display();">
</form>
</body>
</html> 
```

# java - 如何在 HashMap 中查找元素

> ID：12708668
> 
> 赞同：0
> 
> 时间：2012-10-03T12:39:28.950
> 
> 标签：java, search, hashmap

> **可能重复：**
> [不确定我是否应该搜索或排序我的哈希图](https://stackoverflow.com/questions/12707769/not-sure-if-i-should-search-or-sort-my-hashmap)

嗨，我有一个年龄列表，我需要找到 30 岁以上的人，有没有可能在 hashmap 中搜索？（请注意，我可能还需要寻找其他年龄段的人，所以为了代码的简单性，我不想使用两个不同的列表）

简而言之：我的目标是找到一种在 HashMap 中搜索具有特定值的元素的方法

样品清单是

```
element1 40
element2 4
element3 66
element4 5 
```

我想找到值大于 40 和值大于或等于 66 的那些。

除了遍历所有值之外，还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:42:43.747

A`HashMap`仅提供按键搜索，因此您必须迭代整个集合并过滤您不想要的元素。

您可以使用 for each 循环来做到这一点：

```
for (Entry<MyKey,MyValue> e : map.entrySet()) { 
    if (e.getValue() >= 40) { ....} //e.getKey() is an element with the needed value
    if (e.getValue() >= 66) { ... }
} 
```

另一种方法是持有 a [`NavigableMap`](http://docs.oracle.com/javase/6/docs/api/java/util/NavigableMap.html)，将值映射到与它们相关的元素并使用[`NavigableMap.subMap()`](http://docs.oracle.com/javase/6/docs/api/java/util/NavigableMap.html#subMap%28K,%20K%29)（请注意，如果您可能有重复值，则值`NavigableMap`应该是 a `List`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T12:55:26.100

使用番石榴，您可以执行以下操作

```
import com.google.common.base.Predicate;
import com.google.common.collect.Maps;

public static void main(String[] args) {
        Map<String, Integer> map = new HashMap<String, Integer>();
        map.put("element1", 40);
        map.put("element2", 4);
        map.put("element3", 66);
        map.put("element4", 5);
        Map<String, Integer> filteredMap = Maps.filterValues(map,
                Predicates.equalTo(66));
    } 
```

由于您所需的年龄可能会改变，您可以拥有一个用于过滤的 AgePredicate

```
class AgePredicate implements Predicate<Integer> {
    int minAge;

    public AgePredicate(int minAge) {
        super();
        this.minAge = minAge;
    }

    @Override
    public boolean apply(Integer age) {
        return age > minAge;
    }
} 
```

并在您的过滤器中使用它，如下所示

```
Map<String, Integer> filteredMap = Maps.filterValues(map,new AgePredicate(66)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T12:44:18.720

您可以像这样遍历键值：

```
 Iterator<String> it = hm.keySet().iterator();
    while (it.hasNext()){
        String key = it.next();
        if (hm.get(key) >= 40) {
            // do some stuff...
        }
    } 
```

# jpa - JPA中延迟加载和急切加载之间的区别？

> ID：12708669
> 
> 赞同：3
> 
> 时间：2012-10-03T12:39:35.017
> 
> 标签：jpa

```
public class University {
    private String id;
    private String name;
    private String address;
    private List<Student> students;

    // setters and getters
} 
```

`University`在我从数据库中加载 a 时延迟加载时，JPA 会为我加载它`id`的`name`、 和`address`字段。`Students`不会加载。当我调用`getStudents()`方法时，JPA 将执行查询

`select * from students where universitycode=id`

我对延迟加载的理解是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T12:44:31.757

正确的。另一方面，如果您使用预先加载，JPA 将主动`students`为您加载并返回完全填充的`University`对象。

是使用单个 JOIN 查询还是两个单独的查询取决于 JPA 提供者（EclipseLink、Hibernate ...）

# wso2 - WSO2 ESB BAM 集成

> ID：12708672
> 
> 赞同：1
> 
> 时间：2012-10-03T12:39:43.210
> 
> 标签：wso2, wso2esb, wso2bam

我已经在我的环境中安装了 BAM 2.0.0、ESB 4.5.0 和 AS 5.0.0。我想看服务统计。所以我在 AS 和 ESB 上安装了 BAM 代理。但是我只能在 BAM 上看到 AS 服务统计信息。我如何在 BAM 上查看 ESB 的服务统计信息。

谢谢，

PS：这些是我为配置所遵循的步骤。首先，我在 AS 和 ESB 上安装了 BAM 代理（[http://docs.wso2.org/wiki/display/BAM200/Setting+up+Service+Statistics+Data +Agent](http://docs.wso2.org/wiki/display/BAM200/Setting+up+Service+Statistics+Data+Agent) ) 然后我在 BAM (http://docs.wso2.org/wiki/display/BAM200/Service+Statistics+Toolbox) 上配置了工具箱。我可以看到 BAM 上的 AS 服务统计信息，但是我看不到 ESB 统计信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T05:33:06.950

BAM 2.0.0 没有用于显示代理/序列/端点统计信息的仪表板。此仪表板随下一个版本一起提供。但是数据将从中介数据代理发布到 BAM 端。因此，如果您熟悉 Hive 和 UI 工作，您也可以实现自己的仪表板。

# codeigniter - 在 CodeIgniter 中使用 Twitter Bootstrap Typeahead 插件

> ID：12708673
> 
> 赞同：0
> 
> 时间：2012-10-03T12:39:43.710
> 
> 标签：codeigniter, twitter-bootstrap, typeahead

我整天都在寻找如何应用 twitter bootstrap 的 typeahead 插件但找不到任何东西。现在，如何在 codeigniter 中使用 twitter bootstrap typeahead？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:47:07.177

您可以使用[BS Typeahead fork](https://gist.github.com/1866577)，它支持 ajax 调用。

```
# This example does an AJAX lookup and is in CoffeeScript
  $('.typeahead').typeahead(
    # source can be a function
    source: (typeahead, query) ->
      # this function receives the typeahead object and the query string
      $.ajax(
        url: "/lookup/?q="+query
        # i'm binding the function here using CoffeeScript syntactic sugar,
        # you can use for example Underscore's bind function instead.
        success: (data) =>
          # data must be a list of either strings or objects
          # data = [{'name': 'Joe', }, {'name': 'Henry'}, ...]
          typeahead.process(data)
      )
    # if we return objects to typeahead.process we must specify the property
    # that typeahead uses to look up the display value
    property: "name"
  ) 
```

例如 ：-

```
$('.typeahead').typeahead({
    source: function (query, process) {
        return $.get('/typeahead', { query: query }, function (data) {
            return process(data.options);
        });
    }
}); 
```

或者你可以使用：- [Ajax-Typeahead](https://github.com/pwarelis/Ajax-Typeahead)这个插件运行良好

# .net - ASP.NET MVC 3 Forms 身份验证安全风险

> ID：12708674
> 
> 赞同：0
> 
> 时间：2012-10-03T12:39:44.517
> 
> 标签：.net, asp.net-mvc-3, c#-4.0, forms-authentication

我正在使用 ASP.Net MVC3 和 IIS 7.0。在我的网站上，我已经通过 https (requireSSL="true") 实现了表单身份验证。我为 .ASPXAUTH cookie 设置了一些过期日期（例如 5 天）。一切正常，但是从一个浏览器成功登录后，我可以将 cookie .ASPXAUTH 复制（没有问题）到另一个浏览器或另一台计算机，并在没有登录名和密码的情况下进入我的网站。

我该如何做才能仅从浏览器或我输入登录密码的计算机访问该站点，而无法从我复制了 .ASPXAUTH cookie 的另一个浏览器访问？

在此先感谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T12:43:28.567

您不能使用表单身份验证来做到这一点。围绕表单身份验证的整个概念是它依赖于客户端上的 cookie 来跟踪经过身份验证的用户。这对您来说不应该是一个问题，因为所有主要网站都以这种方式工作 - 如果您有一个有效的 cookie，客户端浏览器就不再重要了。您甚至不需要使用浏览器。您可以编写一个控制台应用程序，向您的站点发送 HTTP 请求，并随该请求发送 cookie，用户仍将通过身份验证。

没有您应该担心的风险。您已经通过启用 SSL 完成了必要的操作，这意味着该 cookie 将永远不会通过未加密的通道发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:46:49.397

您*可以*在 auth cookie 中包含用户代理和客户端 IP 地址的散列（有关如何执行此操作的一些信息，请参阅[ASP.Net 在 Auth Cookie 中存储用户数据）。](https://stackoverflow.com/questions/1070411/asp-net-store-user-data-in-auth-cookie)

**但**

当心移动浏览器和代理 - 漫游网络上的用户可以非常频繁地更改 IP 地址，并且代理将为多个用户提供一个 IP。也将两者混合在一起，就像我一样，用户可能会从家庭 Wi-Fi 迁移到移动网络，然后通过代理迁移到公司 Wi-Fi，并且您会经常让人们退出. 包含用户代理哈希还意味着安装操作系统或浏览器更新的客户端也可以将它们注销。

为什么不使用两个 cookie：一个是持久的，用于识别用户，另一个是仅会话的，用于跟踪用户是否在此次访问中登录？然后你做亚马逊做的事情——任何涉及金钱的事情都需要登录，或者更改/查看个人数据。当他们登录时，您也可以刷新 auth cookie。

也就是说 - 实际上，复制 auth cookie 的风险实际上是相当低的 - 特别是如果您将超时设置为仅几天。如果有人遇到了蠕虫/黑客/小偷可以访问他们的身份验证 cookie 的情况，那么他们已经遇到了更大的问题。

# java - 在java中使用python类方法

> ID：12708676
> 
> 赞同：4
> 
> 时间：2012-10-03T12:39:44.630
> 
> 标签：java, python

我有三个用 python 编写的不同类。它们包含几个我想在我的 java 程序中使用它们的方法（从这些 python 类创建对象并使用这些对象来调用这些方法）。实际上我在java中的水平可能是中等的。但是，我在 python 中绝对是新手。我已经读过可以在 java 中使用 Python 类方法，但是没有明确的方法可以很好地解释。所以，请帮助我提供脚本或教程或任何可以帮助理解在 java 中使用 python 类方法的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T13:08:29.890

Jython 是要走的路。如果您有几个小时的时间，我建议您[阅读教程](http://wiki.python.org/jython/LearningJython)。

如果您想了解如何在 java 中使用 jython，请跳至： [http ://wiki.python.org/jython/LearningJython#integrating-jython-python-into-java](http://wiki.python.org/jython/LearningJython#integrating-jython-python-into-java)

# java - Java SQL 连接，选择查询

> ID：12708677
> 
> 赞同：0
> 
> 时间：2012-10-03T12:39:46.197
> 
> 标签：java, sql

我创建了这个方法，但是当我尝试调用该方法时，它返回一个空指针异常。谁能告诉我怎么了？请帮帮我

```
public Talent SearchTalentQuery(int talentID){
    String SearchTalentString = "SELECT * FROM TALENT WHERE TALENTID = "+talentID+";";
    Talent talent=null;
    try{
        //error in select query
        if(getOracleXEConnection()!=null){

            Statement statement = conn.createStatement();
            ResultSet rs = statement.executeQuery(SearchTalentString);                       
                   while( rs.next()){
                   talent.setTalentName(rs.getString("talentname"));
                   talent.setTalentFocus(rs.getString("maintalentfocus"));
                   talent.setTalentNationality((rs.getString("nationality")));
                   talent.setTalentGroup(rs.getString("talentgroup"));
                   talent.setTalentHiredate(rs.getString("hiredate"));
                   talent.setTalentAge(Integer.parseInt(rs.getString("age")));
                   talent.setTalentID(Integer.parseInt(rs.getString("talentid")));
                   }

            rs.close();
            statement.close();
            conn.close();

            return talent;
        }
        else{
            return null;
        }
    }
    catch(SQLException | NumberFormatException e){
        e.printStackTrace();
    }
    return null; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T12:41:03.047

您没有*实例化*`Talent`要分配的对象。

```
Talent talent=null;
...
talent.setTalentName(... 
```

为了解决您的评论，您正在*初始化*`talent`对空指针的引用。您需要*实例化*一个对象并指向它，以便在其上调用方法。

根据您的约束等，您的方法可能希望返回此`Talent`对象，或者通过每次迭代创建一个新对象并返回这些对象的集合。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T12:44:24.513

只需在 while 块的开头实例化您的才能对象

...

```
while( rs.next()){ 
 talent = new Talent(); //or whatever
 talent.setTalentName(rs.getString("talentname")); 
```

...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T12:46:06.643

因为您的整个代码不会为人才对象初始化内存。您需要为人才对象初始化内存。

使用：天赋天赋=新天赋（）；在人才的地方人才=空；

它可能会解决您的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T12:52:32.093

你需要实例化人才，但你也应该真正使用 PreparedStatement，因为这段代码对 SQL 注入非常开放......

[http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)

最后，为了约定，searchTalentString 应该以小写字符开头（并且可能是最终字符）......

```
String searchTalentString = "SELECT * FROM TALENT WHERE TALENTID = "+talentID+";"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T12:44:33.150

改成

```
String SearchTalentString = "SELECT * FROM TALENT WHERE TALENTID = "+talentID+";";
Talent talent=new Talent(); 
```

或者类似的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-07T00:06:07.683

例子

```
 public void Insert(){
            try {
                Statement sta = conn.createStatement();
                Statement consulta = conn.createStatement();
                String query = "SELECT * FROM coches";
                System.out.println("Fecha de entrada");
                String fe = scanner.next();
                System.out.println("Fecha de salida");
                String fs = scanner.next();

                ResultSet rs = consulta.executeQuery(query);
                int i = 1;
                while (rs.next()) {
                    System.out.println(i + "," + rs.getString("matricula") + "," + rs.getString("marca") + "," + rs.getString("modelo")); 
                    i++;
                }
                System.out.println("Selecciona el numero del coche");
                int n = scanner.nextInt();
                rs.absolute(n);

                sta.executeUpdate("INSERT INTO reparaciones (fecha_entrada,fecha_salida,coche) VALUES ('"+ fe + "', '" + fs + "', '" + rs.getString("matricula") + "');");

                System.out.println("Reparación insertada, indica los materiales usados");           

                String nombre = "";

                do{
                    System.out.println("-------------------------------------------------");
                    System.out.println("Nombre :");
                    scanner.nextLine();
                    nombre = scanner.nextLine();                           
                    if(!nombre.equals("")){
                        System.out.println("Cantidad :");
                        int cant = scanner.nextInt();
                        System.out.println("Precio :");
                        int prec = scanner.nextInt();
                        sta.executeUpdate("INSERT INTO materiales (nombre,cantidad,precio,reparacion) VALUES ('"+ nombre + "', '" + cant + "', '" + prec +  "', '" + n + "');");
                    }
               } 
               while(!nombre.equals(""));   
                sta.close();
                rs.close();
                consulta.close();
            } catch (SQLException ex) {
                System.out.println("ERROR:al hacer un Insert");         
                ex.printStackTrace();
            }
        }
        public void Delete(){
            try {
                Statement baja = conn.createStatement();
                Statement consulta = conn.createStatement();
                String query = "SELECT * FROM materiales";
                ResultSet rs = consulta.executeQuery(query);
                int i = 1;
                while (rs.next()) {
                    System.out.println(rs.getInt("id") + "," + rs.getString("nombre"));
                    i++;
                }
                System.out.println("Elige una opcion");
                int opc = scanner.nextInt();

                String query2 = "SELECT reparacion FROM materiales WHERE id = " + opc;
                ResultSet rs2 = consulta.executeQuery(query2);
                if(rs2.next()){
                  if(rs2.getInt("reparacion")!=0){
                    System.out.println("No es posible darlo de baja");
                  }
                  else{
                    String queryBaja = "DELETE FROM materiales WHERE id ='" + opc +"'";
                    baja.executeUpdate(queryBaja);
                    System.out.println("Eliminado con exito");  
                  }
                }

                baja.close();
                consulta.close();
                rs.close();
                rs2.close();
            } catch (SQLException ex) {
                System.out.println("ERROR:al hacer un delete");         
                ex.printStackTrace();           
            }
        } 
```

# bash - bash 检查列表中的所有元素都在一个范围内

> ID：12708680
> 
> 赞同：0
> 
> 时间：2012-10-03T12:39:56.577
> 
> 标签：bash

```
LessThanThirty=1
GreaterThanTwenty=1

while read line 
do
    LessThanThirty=$(echo "$line <= 30.0" | bc)
    GreaterThanTwenty=$(echo "$line >= 20.0" | bc)
done < <(grep -A 26 "some text" someFile.txt | awk '/More Text/ { gsub(/M/, " "); print $4 }'     | uniq )

echo $LessThanThirty
echo $GreaterThanTwenty 
```

我有一个完整的数字列表，并想测试它们是否都在 20 - 30 的范围内。如果它们中的任何一个大于 30，那么 LessThanThirty 应该保持为假。就目前而言，我最后的 Echo 仅报告列表中最后一个元素的检查状态。如果列表中的任何数字在范围内，我需要一种方法将我的变量设置为 false。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:59:16.563

只需在中进行比较`awk`：

```
read GreaterThanTwenty LessThanThirty < <(
 grep -A 26 "some text" someFile.txt | \
 awk '/More Text/ { gsub(/M/, " "); print $4 }' | \
 awk 'BEGIN { g20=l30=1 }
      $0 < 20.0 { g20=0 }
      $0 > 30.0 { l30=0 }
      END { print g20, l30 }'
 ) 
```

您可以通过使用数组消除重复项来相当容易地消除对两个脚本的调用`uniq`并将两个脚本合并为一个，但这证明了这个想法。`awk``awk`

这通过设置两个`awk`变量来工作，`g20`最初设置`l30`为 1。如果输入行小于 20，我们设置`g20`为 0（即，并非所有输入都大于 20）。同样，`l30`如果任何输入大于 30，我们设置为 0。在消耗完所有输入后，我们打印 和 的`g20`值`l30`。这成为进程替换的输出，`bash`使用命令将其读入两个变量`read`。

（我已经删除了对 的调用`uniq`，因为它无论如何都需要对其输入进行排序，而且您似乎对计数不感兴趣，只是对范围之外的值的存在感兴趣。可能需要更多时间来排序和删除重复项而不是只运行它们`awk`以进行范围检查。这将使合并两个`awk`程序更容易，但为简单起见，我将保留它们。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:19:39.440

我想你可以把你的变量或在一起：

```
LessThanThirty=0
GreaterThanTwenty=0

while read line 
do
    LessThanThirty=$(echo "$line <= 30.0 || $LessThanThirty" | bc)
    GreaterThanTwenty=$(echo "$line >= 20.0 || $GreaterThanTwenty" | bc)
done < <(grep -A 26 "some text" someFile.txt | awk '/More Text/ { gsub(/M/, " "); print $4 }'     | uniq )

echo $LessThanThirty
echo $GreaterThanTwenty 
```

但现在变量必须以假开始。

# java - JAXB、抽象类和多模块项目

> ID：12708684
> 
> 赞同：3
> 
> 时间：2012-10-03T12:40:16.483
> 
> 标签：java, jaxb

假设我有一个包含以下类的 JAR xxx-core.jar：

```
@XmlRootElement
@XmlSeeAlso({Imp1.class, Imp2.class})
public abstract class Abst {...}

@XmlRootElement
public class Imp1 extends Abst {...}

@XmlRootElement
public class Imp2 extends Abst {...}

public class Main {
  @XmlElement
  private Abst abst;

  public static void load(File file) {
    // unmarshal this
  }
  public void save(File file) {
    // marshal this
  }
} 
```

到目前为止，一切都很好。Main 可以编组和解组，使用 Abst 的正确实现。

现在，当其他人出现并创建另一个使用 xxx-core.jar 但包含以下类的项目 xxx-extension.jar 时会发生什么：

```
@XmlRootElement
public class ExtensionImp extends Abst {...} 
```

并将这个新实现的一个实例分配给 Main 的成员变量？由于 XmlSeeAlso 注释中没有明确给出，我如何确保 ExtensionImp 将被正确编组/解组？（我玩过 JAXBContext.newInstance() 中的类列表，但这似乎并没有解决问题。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:33:25.727

`@XmlSeeAlso`注释只是一种让您的 JAXB (JSR-222) impl 知道查看其他类的机制。或者，您可以将 then 包含在用于引导`JAXBContext`. 当您创建您的时`JAXBContext`，您只需要执行以下操作：

```
JAXBContext jc = JAXBContext.newInstance(Abst.class, ExtensionImp.class); 
```

* * *

**更新 1**

> 我玩过 JAXBContext.newInstance() 中的类列表，但这似乎并不能解决问题。

这绝对应该解决问题，当你这样做时会发生什么。

* * *

**更新 2**

我怀疑您的问题是由于您正在解组的文档而不是您的引导方式。以下应该会有所帮助。

**继承 - xsi:type**

使用您当前拥有映射的方式，您需要确保您的 XML 如下所示，以便将实例`Imp2`化并填充到类的`abst`字段中`Main`。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<main>
    <abst xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="imp2"/>
</main> 
```

有关更多信息，请参阅：

*   [http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-using-xsitype.html](http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-using-xsitype.html)

**继承替换组**

如果您希望像下面这样解组 XML 文档：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<main>
    <imp2/>
</main> 
```

然后，您需要利用`@XmlElementRef`注释。

```
import javax.xml.bind.annotation.*;

@XmlRootElement
public class Main {
    @XmlElementRef
    Abst abst;
} 
```

有关更多信息，请参阅：

*   [http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-using-substitution.html](http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-using-substitution.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:50:05.373

我使用`@XmlAnyElement(lax=true)`. 尝试将此注释而不是`@XmlElement`主类。

# c++ - 无法从“const 容器”转换“this”指针 ' 到 ' 容器 &'

> ID：12708689
> 
> 赞同：3
> 
> 时间：2012-10-03T12:40:22.700
> 
> 标签：c++, stl

我`STL compilation error`在以下代码中得到关注。

```
#include <cstdio>
#include <string>

template <typename T>
class container {
public:
  container(std::string in_key="") {
    m_element_index = 0;
  }
  ~container() {
  }
  // Returns the numbers of elements in the container
  int size() {
    return m_element_index;
  }
  // Assignment operator
  // Assigns a copy of container x as the new content for the container object.
  container& operator= (const container& other) {
    if (this != &other) {
      for ( int idx = 0; idx < other.size(); idx++) {
      }
    }
    return *this;
  }
private:
  int m_element_index;
};

int main ( int argc, char** argv) {
  container<int> v1("my_container");
  container<int> v2("copy_cont");
  v2 = v1;
} 
```

获取以下行的错误

`for ( int idx = 0; idx < other.size(); idx++) {`

错误是

```
1>------ Build started: Project: test, Configuration: Debug Win32 ------
1>  test.cpp
1>e:\avinash\test\test\test.cpp(20): error C2662: 'container<T>::size' : cannot convert 'this' pointer from 'const container<T>' to 'container<T> &'
1>          with
1>          [
1>              T=int
1>          ]
1>          Conversion loses qualifiers
1>          e:\avinash\test\test\test.cpp(18) : while compiling class template member function 'container<T> &container<T>::operator =(const container<T> &)'
1>          with
1>          [
1>              T=int
1>          ]
1>          e:\avinash\test\test\test.cpp(30) : see reference to class template instantiation 'container<T>' being compiled
1>          with
1>          [
1>              T=int
1>          ]
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T12:42:12.420

你需要改变这个：

```
 int size() {
    return m_element_index;
  } 
```

对此：

```
 int size() const {
    return m_element_index;
  } 
```

告诉编译器您希望它允许`size()`在`const`实例上调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T12:44:37.167

在这里，您将一个 const 对象传递给赋值运算符：

```
container& operator= (const container& other) {
    <...>
} 
```

但是，在运算符内部，您正在调用`other`'`size()`函数：

```
for ( int idx = 0; idx < other.size(); idx++) 
```

为了使其可用于`const`对象，函数本身必须声明为`const`：

```
int size() const {
    return m_element_index;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-03T12:42:18.967

您需要声明`size()`为`const`方法：

```
int size() const {
    return m_element_index;
} 
```

因为在你的赋值运算符中

```
container& operator= (const container& other) { .... } 
```

您正在调用`other.size()`，并且`other`是 a `reference-to-const`，这意味着您只能在其上调用 const 方法。

# restler - Restler 根据最终斜线返回不同的格式

> ID：12708690
> 
> 赞同：1
> 
> 时间：2012-10-03T12:40:25.687
> 
> 标签：restler

我正在使用带有 mod_rewrite 的 restler 并使用“Accept”HTTP 标头来返回正确的资源表示。在我的生产环境中使用“接受：应用程序/json”发出请求时：

[http://example.com/site/collection/1/](http://example.com/site/collection/1/)响应正确且格式为 json。

[http://example.com/site/collection/1](http://example.com/site/collection/1)响应正确，但格式为 xml。

在我的开发环境中，这两个请求都返回以 json 格式格式化的相同结果，这就是我希望的方式。在这两种环境中，我都有 .htaccess 文件：

```
DirectoryIndex index.php
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteRule ^$ index.php [QSA,L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule>
<ifModule mod_php5.c>
    php_flag display_errors Off
</IfModule> 
```

# jquery - 防止多个点击事件触发 JQuery

> ID：12708691
> 
> 赞同：25
> 
> 时间：2012-10-03T12:40:30.613
> 
> 标签：jquery, confirm

这是场景，我的内容是基于类异步加载的。因此，如果我有一个与类 ajaxLink 的链接，它会触发如下：

```
$('a.ajaxLink').click(function (e) {
        e.preventDefault();
        var container = $(this).parents('div.fullBottomContent');
        var href = $(this).attr('href');
        container.fadeOut('fast', function () {
            $.ajax({
                url: href,
                dataType: "html",
                type: "GET",
                success: function (data) {
                    container.html(data);
                    BindEventHandlers();
                    container.fadeIn();
                    $.validator.unobtrusive.parse('form');
                },
                error: function () {
                    alert('An error has occurred');
                }
            });
        });

    }); 
```

都很可爱。现在，在一个实例中，我想向用户`confirm`显示他们想要加载页面并放弃所有更改的警告，所以我写了这个：

```
$('a.addANewHotel').click(function (e) {
        if (!confirm('Adding a new hotel will loose any unsaved changes, continue?')) {
            e.stopPropagation();
        }
    }); 
```

现在我已经尝试过了`return false`，`e.preventDefault()`但`e.stopPropagation();`不管第一种方法总是被解雇吗？如何防止触发额外的点击事件？这是事件的顺序吗？

看不出这有什么关系，但我的 HTML 是：

```
<a style="" href="/CMS/CreateANewHotel?regionID=3&amp;destinationID=1&amp;countryName=Australia" class="button wideBorderlessButton ajaxLink addANewHotel">Add a new hotel</a> 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-10-03T12:53:31.750

你有没有试过：`event.stopImmediatePropagation`？

我相信这是您正在寻找的：

[http://api.jquery.com/event.stopImmediatePropagation/](http://api.jquery.com/event.stopImmediatePropagation/)

```
$('a.addANewHotel').click(function (e) {
        if (!confirm('Adding a new hotel will loose any unsaved changes, continue?')) {
            e.stopImmediatePropagation();
            e.preventDefault();
        }
    }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T12:52:27.847

`stopPropagation`将阻止事件冒泡到父元素，而不是阻止同一元素上的其他单击处理程序触发。所以你的解决方案行不通。

例如，您可以这样做：

```
$('a.ajaxLink').click(function (e) {
    e.preventDefault();

    if($(this).hasClass("a.addANewHotel") &&
           !confirm('Adding a new hotel will loose any unsaved changes, continue?')){
        return false;
    }

    var container = $(this).parents('div.fullBottomContent');
    var href = $(this).attr('href');
    container.fadeOut('fast', function () {
        $.ajax({
            url: href,
            dataType: "html",
            type: "GET",
            success: function (data) {
                container.html(data);
                BindEventHandlers();
                container.fadeIn();
                $.validator.unobtrusive.parse('form');
            },
            error: function () {
                alert('An error has occurred');
            }
        });
    });

}); 
```

如果你有很多不同类型的链接，你应该把公共代码放在一个函数中，并使用区分类绑定处理程序。然后，这些处理程序可以在适当的时候调用公共代码。

# python - 使用 7zip 解压 .rar 文件但找不到存档

> ID：12708696
> 
> 赞同：1
> 
> 时间：2012-10-03T12:40:39.853
> 
> 标签：python, command-line, extract, 7zip

我正在使用 python 自动提取档案。我正在使用子流程：

```
command = "7z e " + self.dir + " -o" + dest
subprocess.call(command) 
```

其中 self.dir 是存档的目录（作为 .rar 文件），而 dest 是目标文件夹。

我的问题是它的工作很随意。出于某种原因，它会很好地提取一些档案，但不能提取其他档案。我还没有找到模式，但我已经阅读了命令提示符，当它不起作用时，它会打印

```
Error:
cannot find archive 
```

烦人的是，我可以使用 GUI 提取完全相同的存档。我的实际程序似乎有问题。

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:57:16.770

我认为`subprocess.call()`在传递参数时需要一个列表。尝试这个：

```
command = ["7z", "e", self.dir, "-o", dest] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T12:52:40.007

你当前的目录是什么？请检查您的“self.dir”是否为完整文件路径，而不仅仅是相对路径。试试这个来检查：

```
print os.path.abspath(self.dir)
print os.getcwd()
print os.path.isfile(self.dir) 
```

顺便说一句，使用“dir”作为属性名是不幸的。`dir`是一个内置函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-03T18:19:14.580

将引号添加到您的目录字符串。您可能有混淆 zip 程序的空格。

# django - 让我的表单集验证有效填写的表单数量

> ID：12708699
> 
> 赞同：3
> 
> 时间：2012-10-03T12:40:44.610
> 
> 标签：django

我希望用户在我的表单集中填写 3 个表单，我的前端表单集中当然只有 3 个表单，但我想确保用户不会制作自己的 POST。我想出了这个：

```
class ThisFormset(BaseInlineFormSet):
    def clean(self):
        results = super(ThisFormset, self).clean()
        count = len(filter(lambda f: f.is_valid() and f.clean(), self.forms))

        if count != 3:
            raise forms.ValidationError("Must fill in 3")

        return results 
```

有没有更好的方法来计算这个`len(filter(lambda f: f.is_valid() and f.clean(), self.forms))`部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:09:21.507

请参阅：[Django：使所有表单集表单都需要？](https://stackoverflow.com/questions/3783519/django-make-all-formset-forms-required)例如，要求表单集中的所有表单都有效。

# regex - 将 url 转换为可点击的链接

> ID：12708704
> 
> 赞同：1
> 
> 时间：2012-10-03T12:40:59.867
> 
> 标签：regex, wordpress, plugins

我的任务是编写一个 Wordpress 插件，将**帖子**内容中的每个文本 URL [http://www.website.com] 转换为可点击的链接。

现在，我不希望你给我一个完整的解决方案，我只需要你的方向。寻找什么，不该做什么等等。

我知道应该使用正则表达式，但我对它的经验为零，我不确定从哪里开始。

谢谢！

# android - eclipse for android 中 SQLite 数据库的位置，使用 phonegap

> ID：12708705
> 
> 赞同：2
> 
> 时间：2012-10-03T12:40:59.153
> 
> 标签：android, sqlite, cordova, android-emulator, phonegap-plugins

我正在使用 phonegap 并为 android 开发 html 页面，但我不知道如何在我使用 Eclipse Juno 中查看表及其相应的数据库。我知道它在 DDMS 中的某个地方，谁能告诉我我的表和数据库在 SQLite 中的路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:04:06.730

走这条路

`DDMS`-> `data`-> 再次点击`data`-> `your package name`(com.example.app)-> `databases`-> 你有你的数据库

找到你的数据库文件后[点击这个](https://stackoverflow.com/questions/2149438/tool-to-see-android-database-tables-and-data)

# asp.net - 如何将一个用户控件放入另一个用户控件

> ID：12708709
> 
> 赞同：0
> 
> 时间：2012-10-03T12:41:02.627
> 
> 标签：asp.net, user-controls

假设我有两个用户控件。用户控件A 和用户控件B。如何将 usercontrolB 包含到 usercontrolA 中。还请告诉我如何从 usercontrolA 和页面读取 usercontrolB 的控件值。寻找细节讨论。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:49:48.370

可能在下面可以帮助你

在控制 A

```
<%@ Register Src="~/UserControls/ControlB.ascx" TagName="ControlB" TagPrefix="uc" %>
<uc:ControlB ID="myControlB" runat="server" /> 
```

在控制 A.ascx.cs

```
string userName=myControlB.UserNameTextBox.Text; 
```

在用户 ControlB.ascx.cs 有一些属性，如

```
public TextBox UserNameTextBox
{
  get {return this.txtUserName;}
} 
```

# serialization - 在 Visual Studio 2010 上找不到 System.Runtime.serialization.dll

> ID：12708712
> 
> 赞同：3
> 
> 时间：2012-10-03T12:41:14.847
> 
> 标签：serialization, runtime, system

我的解决方案上有一个类类型项目，它引用了 System.Runtime.Serialization，但是，我在 Visual Studio 上找不到这个 dll 以在项目中引用。

Windows 是 7 Ultimate 并且是最新的，我的 Visual Studio 也是最新的。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T13:02:35.353

首先，您可以使用“System.Runtime.Serialization”关键字在系统中进行研究。

在我的例子中，这个 dll 位于文件夹“C:\Program Files\Reference Assemblies\Microsoft\Framework\v3.0”（Windows XP）中。

之后，如果您还没有找到它，您可以检查 Visual Studio 中的 References 文件夹：“Add Reference/.NET”

# python - 在 Python 2.7 中，为什么 grid = [["A"]*5]*5 不同于 grid = [] grid.append[...]

> ID：12708713
> 
> 赞同：4
> 
> 时间：2012-10-03T12:41:18.803
> 
> 标签：python, list, python-2.7, append, python-2.x

我正在尝试在 python 2.7 中构建一个 5x5 网格的游戏板，表示为二维列表。我尝试将其编写为`board = [["O"]*cols]*rows`（列和行已被声明为 5），但是当我尝试编辑索引处的值时，它会更改整行。例如

```
cols = 5
rows = 5
board = [["O"]*cols]*rows 
```

这打印：

```
[['O', 'O', 'O', 'O', 'O'], ['O', 'O', 'O', 'O', 'O'], ['O', 'O', 'O', 'O', 'O'], ['O', 'O', 'O', 'O', 'O'], ['O', 'O', 'O', 'O', 'O']] 
```

现在，当我尝试更改索引的值时，例如：

```
board[1][1] = "X" 
```

它打印：

```
[['O', 'X', 'O', 'O', 'O'], ['O', 'X', 'O', 'O', 'O'], ['O', 'X', 'O', 'O', 'O'], ['O', 'X', 'O', 'O', 'O'], ['O', 'X', 'O', 'O', 'O']] 
```

我只想更改第 1 列第 1 行的值。

我还尝试执行以下操作：

```
board = []
for i in xrange(5):
    board.append(["O"]*cols) 
```

这个工作就像我想要的那样。我想了解的是有什么区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T12:52:39.553

如果您评估下面的表达式，您将看到它将在您的第一个示例中返回 True，而在另一个示例中返回 False。两个列表实际上都指向内存中的同一个列表。

`board[0] is board[1]`

如果您确实想要一个简短的版本来制作不同的新列表，那么这个版本也可以正常工作。

```
board = [["O"]*cols for y in range(rows)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T13:56:00.710

因为 Python 没有隐式复制东西的习惯。`[x] * 5`意思是“一列 5 件事，每件事**都是** `x`”。如果你改变了一个，你就改变了它们，因为它们都是`x`- 而不是`x`.

当您使用 时`.append()`，您会强制复制，因为每次通过循环时，您都会从头开始创建要附加的值。

是的，`["O"] * 5`生成一个包含 5 件事情的列表，每件事情都是一样的`"O"`。但是，这实际上并不相关。没有有意义的“不同`"O"`”之类的东西，因为你不能改变`"O"`——不管你对*一个变量* `"O"`做了什么，`"O"`它仍然是`"O"`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T12:48:52.953

您的第一个表达式是创建指向单个列表对象的指针列表。因此，当您更新一个元素时，它会随处更改。

# asp.net-mvc - 为什么我不能在 MVC 中执行此操作？

> ID：12708714
> 
> 赞同：0
> 
> 时间：2012-10-03T12:41:19.367
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3

这是我的控制器动作：

```
<EmployeeAuthorize()>
Function HRA_Table() As ActionResult

    ' get current employee's id
    Dim db1 As EmployeeDbContext = New EmployeeDbContext
    Dim user1 = db1.Tbl_Employees.Where(Function(e) e.Employee_EmailAddress = User.Identity.Name).Single()
    Dim empId = user1.Employee_ID
    Dim empSSN = user1.Employee_SSN

    Dim hra = db.Tbl_HRAs.Where(Function(x) x.SSN = empSSN)

    Return View(hra.ToList)

End Function 
```

这是我的模型：

```
Public Class Tbl_HRA

    <Key()> Public Property HRA_ID() As Integer
    Public Property SSN() As String
    Public Property Height() As Double
    Public Property Weight() As Double
    Public Property Nic_EE() As String
    Public Property Nic_SP() As String
    Public Property BMI() As Double
    Public Property BP_S() As Double
    Public Property BP_D() As Double
    Public Property HDL() As Double
    Public Property LDL() As Double
    Public Property Tot_Chol() As Double
    Public Property Continine() As String
    Public Property Glucose() As Double
    Public Property Waist() As Double
    Public Property Hip() As Double
    Public Property Triglycerides() As Double
    Public Property A1C() As Double
    Public Property LDL_HDL() As Double

End Class 
```

这是我的看法：

```
@ModelType IEnumerable(Of GemcoBlog.Tbl_HRA)

@Code
    Layout = Nothing
End Code

@For Each item In Model

    @item.Height

Next 
```

我得到的错误是：

> 'Tbl_HRA' 上的 'Height' 属性无法设置为 'String' 值。您必须将此属性设置为“Double”类型的非空值。

我似乎无法理解为什么会发生此错误。我尝试`double`根据我阅读的一些文章将其更改为，但仍然无法正常工作！

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:44:54.810

这篇文章可能有用 - 看起来您的数据库架构有问题？此列是否在表中设置为可为空？

[http://digitaltoolfactory.net/blog/2012/03/how-to-fix-yet-another-you-must-set-this-property-to-a-non-null-value-of-type-double-实体框架问题/](http://digitaltoolfactory.net/blog/2012/03/how-to-fix-yet-another-you-must-set-this-property-to-a-non-null-value-of-type-double-problem-with-entity-framework/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:51:20.803

我想这会对你有所帮助

```
<ul>
    @For Each g As MvcApplication1.Genre In Model
        @<li>@g.Name</li>
    Next
</ul> 
```

并查看此网址以获得更多帮助

[http://www.asp.net/web-pages/tutorials/basics/asp-net-web-pages-visual-basic](http://www.asp.net/web-pages/tutorials/basics/asp-net-web-pages-visual-basic)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T13:14:52.223

看起来这可能是由该数据库引起的。看起来他们将这些设置为 varchar 而不是 double ，这并不理想。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T13:17:42.207

从您的评论来看，表中的列似乎是一个 varchar。因此，您的模型必须将其定义为字符串。尝试将 height 属性更改为如下：

```
 Public Property Height() As String 
```

不幸的是，您不能直接在 LINQ to SQL 实现中进行类型转换。如果需要，您可以投影到另一种类型（在 Select 子句中），但您仍然需要立即获取 (context.GetTable(Of T)) 以使数据库和模型之间的类型等效。

# objective-c - NSPathControl 与路径的每个组件的弹出窗口？

> ID：12708715
> 
> 赞同：7
> 
> 时间：2012-10-03T12:41:21.693
> 
> 标签：objective-c, cocoa, nspathcontrol

从[Apple 的示例代码](http://developer.apple.com/library/mac/#samplecode/ObjectPath/Introduction/Intro.html#//apple_ref/doc/uid/DTS10004137-Intro-DontLinkElementID_2)和阅读[文档](http://developer.apple.com/library/mac/#samplecode/ObjectPath/Introduction/Intro.html#//apple_ref/doc/uid/DTS10004137-Intro-DontLinkElementID_2)中，我看不到将其配置为与 Xcode 编辑器窗口中的“*跳转栏*`NSPathControl`”类似的行为：

 *![Xcode Editor 自定义路径控件](../Images/1aa13548f4c5947473820919d6d21de9.png)

即让它代表一个路径（或其他类型的层次结构）并使路径的每个组件成为可点击的弹出窗口以导航层次结构..？

有没有人幸运地通过`NSPathControlDelegate`听点击并在临时窗口中显示菜单来伪造这种行为？

似乎是一种常见的设计，人们甚至会期望一些 OSS 实现——但还没有这样的运气，还没有用谷歌搜索它..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-03T15:36:09.297

我创建了 NSPathControl 的子类，以便可以使用 mouseDown: 在正确位置弹出组件单元格的上下文菜单。我还在菜单中添加了一个代表，以按需创建更深层次的菜单。

```
- (void)mouseDown:(NSEvent *)event {

    NSPoint point = [self convertPoint:[event locationInWindow] fromView:nil];

    NSPathCell *cell = self.cell;
    NSPathComponentCell *componentCell = [cell pathComponentCellAtPoint:point
                                                              withFrame:self.bounds
                                                                 inView:self];

    NSRect componentRect = [cell rectOfPathComponentCell:componentCell
                                               withFrame:self.bounds
                                                  inView:self];

    NSMenu *menu = [componentCell menuForEvent:event
                                        inRect:componentRect
                                        ofView:self];

    if (menu.numberOfItems > 0) {
        NSUInteger selectedMenuItemIndex = 0;
        for (NSUInteger menuItemIndex = 0; menuItemIndex < menu.numberOfItems; menuItemIndex++) {
            if ([[menu itemAtIndex:menuItemIndex] state] == NSOnState) {
                selectedMenuItemIndex = menuItemIndex;
                break;
            }
        }

        NSMenuItem *selectedMenuItem = [menu itemAtIndex:selectedMenuItemIndex];
        [menu popUpMenuPositioningItem:selectedMenuItem
                            atLocation:NSMakePoint(NSMinX(componentRect) - 17, NSMinY(componentRect) + 2)
                                inView:self];
    }
}

- (NSMenu *)menuForEvent:(NSEvent *)event {
    if (event.type != NSLeftMouseDown) {
        return nil;
    }
    return [super menuForEvent:event];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-14T18:24:51.387

我稍微扩展了斯蒂芬的回答，以适应懒惰地加载菜单项。我创建了一个小协议来调用菜单，而不必为每个单元格提前构建菜单：

NSPathControlExtended.h

```
@protocol NSPathControlExtendedDelegate <NSPathControlDelegate>

@required
- (NSMenu *)pathControl:(NSPathControl *)pathControl menuForCell:(NSPathComponentCell *)cell;

@end

@interface NSPathControlExtended : NSPathControl

@property (weak) id <NSPathControlExtendedDelegate> delegate;

@end 
```

NSPathControlExtended.m

```
#import "NSPathControlExtended.h"

@implementation NSPathControlExtended

@synthesize delegate;

- (instancetype)initWithFrame:(NSRect)frame {
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code here.
    }
    return self;
}

- (void)drawRect:(NSRect)dirtyRect {
    [super drawRect:dirtyRect];

    // Drawing code here.
}

- (void)mouseDown:(NSEvent *)event {

    NSPoint point = [self convertPoint:[event locationInWindow] fromView:nil];

    NSPathCell *cell = self.cell;
    NSPathComponentCell *componentCell = [cell pathComponentCellAtPoint:point
                                                              withFrame:self.bounds
                                                                 inView:self];

    NSRect componentRect = [cell rectOfPathComponentCell:componentCell
                                               withFrame:self.bounds
                                                  inView:self];

    NSMenu *menu = [delegate pathControl:self menuForCell:componentCell];

    if (menu.numberOfItems > 0) {
        NSUInteger selectedMenuItemIndex = 0;
        for (NSUInteger menuItemIndex = 0; menuItemIndex < menu.numberOfItems; menuItemIndex++) {
            if ([[menu itemAtIndex:menuItemIndex] state] == NSOnState) {
                selectedMenuItemIndex = menuItemIndex;
                break;
            }
        }

        NSMenuItem *selectedMenuItem = [menu itemAtIndex:selectedMenuItemIndex];
        [menu popUpMenuPositioningItem:selectedMenuItem
                            atLocation:NSMakePoint(NSMinX(componentRect) - 17, NSMinY(componentRect) + 2)
                                inView:self];
    }
}

- (NSMenu *)menuForEvent:(NSEvent *)event {
    if (event.type != NSLeftMouseDown) {
        return nil;
    }
    return [super menuForEvent:event];
}

@end 
```*

# heroku - 将 Heroku 应用程序链接到 Github 存储库。为了什么？

> ID：12708716
> 
> 赞同：19
> 
> 时间：2012-10-03T12:41:24.003
> 
> 标签：heroku, github

最近我在我的 heroku 应用程序设置中看到了这个字段。

> 将您的应用程序链接到 GitHub 存储库以查看活动日志中的提交差异。

我尝试在此字段中添加“myusername/myrepo”，但它没有更改活动日志中的任何内容。如何使用此设置？为了什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-02T19:06:29.210

这很微妙，但是您的活动日志已更改。当您在 Heroku 设置中添加存储库时，活动日志中的提交哈希会变成指向 GitHub 的链接，如下所示：

![在此处输入图像描述](../Images/371f58ea1c4d1f1bf2975e8c6313d2f0.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-05-17T04:52:18.093

如果您想在 Github 中查看您的代码，您必须将 Github 添加为远程存储库

```
git remote add origin https://git.heroku.com/repo.git
git remote set-url --add origin https://github.com/username/repo.git 
```

每次你推送你的提交时，他们都会推送到 heroku 和 github

```
git push origin 
```

现在，当您单击提交链接时，它们会将您带到 github。

# c# - 在本地存储 Facebook 点赞 - 获取点赞数性能问题

> ID：12708718
> 
> 赞同：1
> 
> 时间：2012-10-03T12:41:30.070
> 
> 标签：c#, asp.net, .net, facebook, facebook-graph-api

我正在使用 ASP.NET 4.0 构建一个应用程序。

我有一个名为条目的表。条目可以通过 Facebook 点赞。我想实现通过喜欢排序的能力，所以我采用存储每个条目的喜欢数量并使用该列进行排序的方法。问题是获得喜欢的数量所涉及的开销。我认为我现在使用的方法可以改进，因为仅获取 13 个条目的数据需要 4 秒，这太长了。

我正在使用 FB graph api 和[JSON.NET](http://james.newtonking.com/projects/json-net.aspx)来解析响应。在下面的代码中，我有一个条目类型的列表，我使用应用程序设置和条目 ID 获得条目的类似 url。这就是我正在做的事情：

```
 foreach (Entry entry in entries)
        {
            int likes;
            try
            {
               // the url that is tied to the entry
               string url = "http://graph.facebook.com/?ids=" + Properties.Settings.Default.likeUrl + "?id=" + entry.EntryId;
               //open a WebClient and get the results of the url
                WebClient client = new WebClient();

            Stream data = client.OpenRead(url);
            StreamReader reader = new StreamReader(data);
            string s = reader.ReadToEnd();
            //parse out the response
            var json = JObject.Parse(s);
            //shares are how many likes the entry has
            likes = Convert.ToInt32(json.First.First.SelectToken("shares").ToString());

        }
        catch (Exception ex)
        {
            likes = 0;
        }

    } 
```

正如我所说，这种方法非常昂贵。如果有人可以提出更好的方法来做我在这里尝试的事情，我将非常感谢您的帮助。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:38:40.957

方法，

您没有处理您的流或流阅读器。这可能对个人性能没有帮助，但稍后您可能会看到速度变慢......也尝试使用[并行扩展](http://msdn.microsoft.com/en-us/library/dd460720.aspx)，这需要在处理变量时更加小心。这只是一个例子：

已编辑：我忘记了 webclient 也是一次性的。每次都需要处理它，否则它会在连接上挂起一段时间。这实际上可能会有所帮助。

```
private object locker;
private int _likes = 0;

private int Likes
{
    get
    {
        lock(locker)
        {
            return _likes;
        }
    }
    set
    {
        lock(locker)
        {
            _likes = value;
        }
    }
}

void MyMethod()
{
    Parallel.ForEach(entries, entry =>
    {
        using(WebClient client = new WebClient())
        using(Stream data = client.OpenRead(url))
        using(StreamReader reader = new StreamReader(data))
        {
        ....
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T14:45:36.310

由于发出网络请求的开销，对循环中的每个项目执行单独的 API 调用会很慢。您是否考虑过将所有 13 个项目的点赞查询批处理到单个 API 调用中？我不知道它是否适用于您正在运行的查询，但我知道 facebook API 支持批处理查询的方法。您可以运行批处理，以便一个输出进入同一批处理中的其他查询。您可能必须切换到通过 Graph API 进行 FQL 查询。

您还可以考虑将 API 调用移至客户端，并使用 javascript API 实现它们。这会将 API 工作卸载到用户的浏览器，这将使您的应用程序可以更好地扩展。如果您不这样做，您至少应该考虑 Robert 提出的异步调用的建议。

# ios - 在 UIScrollview 上为图像显示 UIButton Done

> ID：12708719
> 
> 赞同：0
> 
> 时间：2012-10-03T12:41:35.230
> 
> 标签：ios, iphone, objective-c, ios6, uiscrollview

想要在图像上显示`UIButton`完成。`UIScrollView`显示了下面的代码`UIButton`，但是当我滚动`UIImageView`s 时，它仅显示在第一个 imageview 上，正如我想要`UIButton`完成的那样，它应该显示在`UIScrollView`.

```
 - (void)viewDidLoad

 {
 self.view.backgroundColor = [UIColor blackColor];
UIScrollView *imageScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
UIButton *myButton = [UIButton buttonWithType:UIButtonTypeCustom];

[myButton addTarget:self action:@selector(dismissView:) forControlEvents:UIControlEventTouchUpInside];

myButton.frame = CGRectMake(0, 0, 60, 35);

[myButton.layer setMasksToBounds:YES];

[myButton.layer setCornerRadius:10.0f];

myButton.layer.borderWidth = 2;

myButton.layer.borderColor = [[UIColor whiteColor] CGColor];

[myButton setTitle:@"Done" forState:UIControlStateNormal];

myButton.backgroundColor = [UIColor blackColor];

UIBarButtonItem *button = [[UIBarButtonItem alloc] initWithCustomView:myButton];

[[self navigationItem] setRightBarButtonItem:button animated:YES];
imageScrollView.pagingEnabled = YES;
NSInteger numberOfViews = 61;
for (int i = 0; i < numberOfViews; i++) {
    CGFloat xOrigin = i * self.view.frame.size.width;

    NSString *imageName = [NSString stringWithFormat:@"image%d.png", i];
    UIImage *image = [UIImage imageNamed:imageName];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
    imageView.frame = CGRectMake(xOrigin, 0, self.view.frame.size.width, self.view.frame.size.height);
    [imageScrollView addSubview:imageView];
    [imageScrollView addSubview:myButton];
    [imageView release];
   }
imageScrollView.contentSize = CGSizeMake(self.view.frame.size.width * numberOfViews, self.view.frame.size.height);
[self.view addSubview:imageScrollView];
[imageScrollView release];
 } 
```

当我滚动它时，我应该如何编码它`UIButton`应该在所有图像视图上显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:21:27.550

添加您的`UIButton`in for 循环，即每次添加新`ImageView`的时它都可以添加。`x_Origin`并为每个更改它`imageView`-

```
- (void)viewDidLoad
{
    [super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

    UIScrollView *imageScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];

    imageScrollView.pagingEnabled = YES;
    NSInteger numberOfViews = 61;

    for (int i = 0; i < numberOfViews; i++) 
    {
        CGFloat xOrigin = i * self.view.frame.size.width;
        UIButton *myButton = [UIButton buttonWithType:UIButtonTypeCustom];
        [myButton addTarget:self action:@selector(dismissView) forControlEvents:UIControlEventTouchUpInside];
        myButton.frame = CGRectMake(xOrigin, 0, 60, 35);
        [myButton setTitle:@"Done" forState:UIControlStateNormal];
        myButton.backgroundColor = [UIColor blackColor];
        [myButton.layer setMasksToBounds:YES];

       [myButton.layer setCornerRadius:10.0f];
        myButton.layer.borderWidth = 2;
        myButton.layer.borderColor = [[UIColor whiteColor] CGColor];

        NSString *imageName = [NSString stringWithFormat:@"image%d.png", i];
        UIImage *image = [UIImage imageNamed:imageName];
        UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
        imageView.frame = CGRectMake(xOrigin, 0, self.view.frame.size.width, self.view.frame.size.height);
        [imageScrollView addSubview:imageView];
        [imageScrollView addSubview:myButton];
    }

    imageScrollView.contentSize = CGSizeMake(self.view.frame.size.width * numberOfViews, self.view.frame.size.height);
    [self.view addSubview:imageScrollView];

} 
```

删除这 2 行

```
UIBarButtonItem *button = [[UIBarButtonItem alloc] initWithCustomView:myButton];
[[self navigationItem] setRightBarButtonItem:button animated:YES]; 
```

没有必要这样做。这意味着您正在设置该按钮`rightBarButton`，`NavigationBar`但在您的情况下，我认为您不想这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:55:23.547

在 for 循环中为 myButton 设置框架，类似于 imageview 框架。

```
myButton.frame= CGRectMake(xOrigin, 0, self.myButton.frame.size.width, self.myButton.frame.size.height); 
```

# actionscript-3 - AS3 预测性碰撞（扫描测试）

> ID：12708723
> 
> 赞同：0
> 
> 时间：2012-10-03T12:41:52.440
> 
> 标签：actionscript-3, flash, collision-detection, physics, collision

我正在 AS3 中制作一个基本的平台游戏引擎，目前正在实现重力。目前，重力让玩家在着陆时会下沉几个像素（取决于玩家的速度），我不希望这样。

我希望能够提前 1 帧测试碰撞（扫描测试），如果下一帧会发生碰撞，我希望玩家停止 0px 进入地面，无论玩家的速度如何。

我还想要采用地形形状的像素完美碰撞，所以我一直在使用 Corey O'Neil 的碰撞检测套件 (CDK)，它非常适合检测碰撞，但我不知道如何制作它预测他们。我不确定这是否是最好的库。

我不确定 Box2D；我觉得这对我想要的来说太多了。

知道如何在 AS3 中进行像素完美的扫描测试吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:14:35.460

Box2D 也应该非常适合小型项目，以防您以后想扩大规模......

如果您需要更快地深入了解，请查看[Quick Box 2d](http://code.google.com/p/quickbox2d/)。

还有一些很好的教程（[这里](http://actionsnippet.com/?p=1254)和[这里](http://active.tutsplus.com/tutorials/effects/introduction-to-quickbox2d-part-1/)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T18:11:29.990

> ^(我希望能够提前 1 帧测试碰撞（扫描测试），如果下一帧会发生碰撞，我希望玩家停止 0px 进入地面，无论玩家的速度如何。)

在你的游戏循环中，你正在检查 colisions，只需添加将在下一帧中完成的运动，即当前的 Y 速度。像这样的东西：

```
if(currentYSpeed + player.y >= ground.y)
{
    player.y = ground.y
}else
{
    player.y += currentYSpeed;
} 
```

# java - netty 4.xx 中的 UDP 广播

> ID：12708728
> 
> 赞同：4
> 
> 时间：2012-10-03T12:42:12.657
> 
> 标签：java, udp, netty

我们需要使用 Netty 4.0.0 二进制文件通过 UDP 通道广播对象（Pojo）。
在 Netty 4.0.0 中，它允许我们只使用 DatagramPacket 类来发送 UDP 数据包。
此类仅接受 ByteBuf 作为参数。

还有其他方法，我们可以通过 UDP 通道发送 Pojo 吗？

为了进一步澄清，我们做了以下事情：

初始化 UDP 通道的设置

```
ConnectionlessBootstrap udpBootstrap;
udpBootstrap.setPipelineFactory(new ChannelPipelineFactory() {
            public ChannelPipeline getPipeline() throws Exception {
                return Channels.pipeline(
                        new ObjectEncoder(),
                        new ObjectDecoder(new NettyElementInfo()),
                        new UDPBroadcastHandler());
            }
        });
        udpBootstrap.setOption("broadcast", true);
        //datagramChannel = (DatagramChannel) udpBootstrap.bind(new InetSocketAddress(udp_port));
        datagramChannel = (DatagramChannel) udpBootstrap.bind(new InetSocketAddress(0)); 
```

在这里，NettyElementInfo 实现了 Serializable 和 ClassResolver 接口。我们试图广播这个 pojo，如下所示：

```
channel.write(new NettyElementInfo(), 
                new InetSocketAddress("255.255.255.255", 9555)); 
```

在接收端，我们对初始化部分进行了与上面相同的操作。但是，在处理程序中获取 Pojo 如下：

```
NettyElementInfo elementInfo = (NettyElementInfo)e.getMessage(); 
```

这是使用 netty 3.5.x 成功完成的

如何使用 Netty 4.0.0 复制此场景。请向我们提供示例代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T05:10:04.250

我认为您可以只拥有一个 MessageToMessageDecoder/MessageToMessageEncoder 将 DatagramPacket 编码/解码为 ByteBuf，实际上只是调用 DatagramPacket.content() 进行解码（仅作为示例）。在编码器/解码器之后，您可以添加通常的其他 ChannelHandler，它们将处理 ByteBuf 的解码到 Pojo。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-13T13:04:23.107

在 Netty 4 中，您必须在消息中传递地址，直到您准备好创建一个`DatagramPacket`.

您可以手动执行此操作，也可以使用内置的`DefaultAddressedEnvelope`.

您还可以使用一个`DatagramPacketEncoder`包装您的数据包`MessageToMessageEncoder`并从您的 AddressedEnvelopes 和 ByteBufs 中为您创建 DatagramPackets。这并没有真正增加太多便利，所以我不能说我推荐它。

```
pipeline.addLast (new ObjectEncoder());
...
channel.write(new NettyElementInfo(),  
            new InetSocketAddress("255.255.255.255", 9555)); 
```

变成

```
pipeline.addLast (new DatagramPacketEncoder (new ObjectEncoder()));
...
channel.write(new DefaultAddressedEnvelope<>(new NettyElementInfo(), 
            new InetSocketAddress("255.255.255.255", 9555))); 
```

# java - 从 CLI 生成 base64 编码哈希以匹配 Java

> ID：12708732
> 
> 赞同：1
> 
> 时间：2012-10-03T12:42:18.373
> 
> 标签：java, base64, gnu, sha256

我有一个 java 代码库，它从一个字符串生成一个 URL 安全的 base64 编码哈希，并且想知道这是否/如何使用 linux 命令行工具实现。我猜我在这里所做的问题与字符集/编码有关，或者与将字符串转换为字节数组有关。Java代码：

```
MessageDigest md = MessageDigest.getInstance("SHA-256");
byte[] digest = md.digest("testString".getBytes());
// ^^ this is where the difference is?
String b64url = Base64.encodeBase64URLSafeString(digest);
// b64url: Ss8LOdnEdmcJo2ifVTrAGrVQVF_6RUTfwLLOqC-6AqM 
```

命令行：

```
echo testString | sha256sum | cut -d" " -f1 | base64
# NDgxOGEyY2JkODYwOTY1NjJkODFmYzIwNmQ3ZTYyNWVlNGFjMTU5MmViNTc0MjQwMDQ4OTIzOTBl
# MDQzZTNlYwo= 
```

是否可以通过 cli 工具生成 base64 编码的 sha256？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:55:49.677

您正在对十六进制字符串进行 base64 编码，而不是哈希的字节值，这相当于：

```
MessageDigest md = MessageDigest.getInstance("SHA-256");
byte[] digest = md.digest("testString".getBytes()); // Missing charset
String hex = Hex.encodeHexString(digest);
String base64 = Base64.encodeBase64(hex.getBytes()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T13:04:24.720

您可以使用 StringBuilder 将您的十六进制转换为有意义的字符串：

```
MessageDigest md = MessageDigest.getInstance("SHA-256");
byte[] digest = md.digest("testString".getBytes());
StringBuilder sb = new StringBuuilder();
for (byte b : digest) {
    sb.append(Integer.toHexString(b & 0xff));
}
String base64 = Base64.encodeBase64(sb.toString()); 
```

结合在 echo 命令中不包括换行符，在这里工作......

# jquery - jQuery验证大于和小于

> ID：12708735
> 
> 赞同：1
> 
> 时间：2012-10-03T12:42:30.583
> 
> 标签：jquery, asp.net-mvc-3, validation, jquery-validate

如何确保用户不能输入小于或大于某个值的值？

问题在于验证一个字段的值小于或大于另一个字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:59:17.323

如果您使用的是 jquery.validation 插件，这里是 GreaterThan 方法

```
$.validator.addMethod(
"greaterThan",
function(value, element, params) {
    var target = $(params[0]).val();
    var isValueNumeric = !isNaN(parseFloat(value)) && isFinite(value);
    var isTargetNumeric = !isNaN(parseFloat(target)) && isFinite(target);
    if (isValueNumeric && isTargetNumeric) {
        return Number(value) > Number(target);
    }

    if (!/Invalid|NaN/.test(new Date(value))) {
        return new Date(value) > new Date(target);
    }

    return false;
},
'Must be greater than {1}.'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:42:30.583

```
 $(document).ready
(
    function ()
    {
        $.validator.addMethod(
        "greaterThan",
        function (value, element, param)
        {
            // bind to the blur event of the target in order to revalidate whenever the target field is updated            
            var target = $(param)
            .unbind(".validate-greaterThan")
            .bind
            (
                "blur.validate-greaterThan", 
                function ()
                {
                    $(element).valid();
                }
            );
            return parseFloat(value) >= parseFloat(target.val());
        },
        "Pretul trebuie sa fie mai mare decat valoarea initiala"
        ); 
    }
);

$('#gvProduseList input[name$=Pret]').each
    (
        function (index, domEle)
        {
            $(this).rules
            (
                "add"
                , {

                    required: true,
                    minlength: 1,
                    range: [0.1, Number.MAX_VALUE],
                    greaterThan: '#Produse_' + index + '__PretIntrare',
                    messages: 
                    {
                        required: "Pretul este necesar!",
                        minlength: "Pretul este necesar!",
                        range: "Pretul este necesar!",
                        greaterThan: "Pretul trebuie sa fie mai mare decat " + $('#Produse_' + index + '__PretIntrare').val()
                    }
                }
            );
        }
    );

$(document).ready
(
    function ()
    {
        $.validator.addMethod(
        "lessThan",
        function (value, element, param)
        {
            // bind to the blur event of the target in order to revalidate whenever the target field is updated            
            var target = $(param)
            .unbind(".validate-lessThan")
            .bind
            (
                "blur.validate-lessThan",
                function ()
                {
                    $(element).valid();
                }
            );
            return parseFloat(value) <= parseFloat(target.val());
        },
        "Valoarea trebuie sa fie mai mica sau egala decat valoarea initiala"
        );
    }
);

 $('#gvListDetaliiElemTranAdaugare input[name$=Valoare]').each
    (
        function (index, domEle)
        {
            $(this).rules
            (
                "add"
                , {

                    required: true,
                    minlength: 1,
                    range: [0.1, Number.MAX_VALUE],
                    lessThan: '#ListaDetaliiElemTranModelAdaugare_' + index + '__ValoareRamasa',
                    messages:
                    {
                        required: "Valoarea este necesara!",
                        minlength: "Valoarea este necesara!",
                        range: "Valoarea este necesara!",
                        lessThan: "Valoarea trebuie sa fie mai mica sau egala cu " + $('#ListaDetaliiElemTranModelAdaugare_' + index + '__ValoareRamasa').val()

                    }
                }
            );
        }
    ); 
```

# jboss - icefaces-facelets 1.8.2 - jboss 4.2 下的编译器初始化错误

> ID：12708741
> 
> 赞同：1
> 
> 时间：2012-10-03T12:42:43.330
> 
> 标签：jboss, facelets, icefaces

当我尝试使用 ifcefaces 1.8.2 和 icefaces-facelets 1.8.2 呈现页面时，我得到了一个神秘的错误：

```
14:27:56:994 ERROR [http-0.0.0.0-8080-2][facelets.compiler] Compiler Initialization Error
java.util.zip.ZipException: error in opening zip file
        at java.util.zip.ZipFile.open(Native Method)
        at java.util.zip.ZipFile.<init>(ZipFile.java:127)
        at java.util.jar.JarFile.<init>(JarFile.java:135)
        at java.util.jar.JarFile.<init>(JarFile.java:72)
        at com.sun.facelets.util.Classpath.getAlternativeJarFile(Classpath.java:214)
        at com.sun.facelets.util.Classpath.search(Classpath.java:71)
        at com.sun.facelets.compiler.TagLibraryConfig.loadImplicit(TagLibraryConfig.java:428)
        at com.sun.facelets.compiler.Compiler.initialize(Compiler.java:91)
        at com.sun.facelets.compiler.Compiler.compile(Compiler.java:108)
        at com.sun.facelets.impl.DefaultFaceletFactory.createFacelet(DefaultFaceletFactory.java:218)
        at com.sun.facelets.impl.DefaultFaceletFactory.getFacelet(DefaultFaceletFactory.java:149)
        at com.sun.facelets.impl.DefaultFaceletFactory.getFacelet(DefaultFaceletFactory.java:100)
        at com.icesoft.faces.facelets.D2DFaceletViewHandler.renderResponse(D2DFaceletViewHandler.java:268)
        at com.icesoft.faces.application.D2DViewHandler.renderView(D2DViewHandler.java:159)
        at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:110)
        at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:100)
        at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
        at com.icesoft.faces.webapp.http.core.JsfLifecycleExecutor.apply(JsfLifecycleExecutor.java:19)
        at com.icesoft.faces.context.View$2$1.respond(View.java:48)
        at com.icesoft.faces.webapp.http.servlet.ServletRequestResponse.respondWith(ServletRequestResponse.java:201)
        at com.icesoft.faces.context.View$2.serve(View.java:77)
        at com.icesoft.faces.context.View.servePage(View.java:149)
        at com.icesoft.faces.webapp.http.core.MultiViewServer.service(MultiViewServer.java:67)
        at com.icesoft.faces.webapp.http.common.ServerProxy.service(ServerProxy.java:11)
        at com.icesoft.faces.webapp.http.servlet.MainSessionBoundServlet$4.service(MainSessionBoundServlet.java:149)
        at com.icesoft.faces.webapp.http.common.standard.PathDispatcherServer.service(PathDispatcherServer.java:24)
        at com.icesoft.faces.webapp.http.servlet.BasicAdaptingServlet.service(BasicAdaptingServlet.java:16)
        at com.icesoft.faces.webapp.http.servlet.PathDispatcher.service(PathDispatcher.java:23)
        at com.icesoft.faces.webapp.http.servlet.SessionDispatcher.service(SessionDispatcher.java:53)
        at com.icesoft.faces.webapp.http.servlet.PathDispatcher.service(PathDispatcher.java:23)
        at com.icesoft.faces.webapp.http.servlet.MainServlet.service(MainServlet.java:131)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:173)
        at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:182)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:534)
        at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:84)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:104)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:545)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:241)
        at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:853)
        at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:579)
        at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1513)
        at java.lang.Thread.run(Thread.java:662) 
```

知道为什么会这样吗？应用程序本身部署干净。运行时是 jboss 4.2。应用程序是与 WEB-INF/libs 下的所有 icefaces 库和依赖项的简单战争。

# javascript - jQuery 购物车总结果

> ID：12708742
> 
> 赞同：1
> 
> 时间：2012-10-03T12:42:43.380
> 
> 标签：javascript, jquery

出于某种原因，我的网站显示单词“El 产品”而不是“0 产品”

这是我使用 jquery 的实际脚本：

```
cartSummary : function(){
                if (jQuery('#catCartSummary .cartSummaryItem').html() != 'Shopping cart is empty.') {
                      var summary = jQuery('#catCartSummary .cartSummaryItem').text().split(" ");
                      // url = $('#user-options .cart a').attr('href');

                      jQuery("span.cartTotal").text(summary[0]);

                }else{

                     jQuery("span.cartTotal").text("0 ");

                }  
            }, //cartSummary

    checkOutBtn : function(){
                var cartTotal =  jQuery("span.cartTotal").text();

                if(cartTotal > 0){
                    jQuery("a.view-cart").css('background-position','0 -26px');
                }

            }, // checkOutBtn 
```

我的 HTML 代码：

```
<strong><span class="cart-info"><span class="cartTotal"></span> product(s) </span></strong>&nbsp;<a class="view-cart" href="/OrderRetrievev2.aspx">View cart</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:12:23.123

```
if (jQuery('#catCartSummary .cartSummaryItem').html() != 'Shopping cart is empty.') 
```

你试图比较`html()`，`text`然后拆分`text`和设置`cartTotal`。请出示`cartSummaryItem`。

# visual-studio - 不包括 Visual Studio 2012 命令提示符预期的环境路径

> ID：12708743
> 
> 赞同：0
> 
> 时间：2012-10-03T12:42:44.873
> 
> 标签：visual-studio, visual-studio-2012, command-prompt

最近安装（并重新安装）VS 2012 Ultimate with Blend

`VS Command Prompt`似乎没有对文件夹“C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\”的引用（它们是否称为环境路径）。这意味着以下行不会从命令提示符运行（正常或管理员）

*   `msbuild buildapp.csproj /t:HelloWorld`
*   `Installutil WindowsService1.exe`

要使用 msbuild 或 Installutil，我需要指定以上运行的完整路径。

以上是MS对VS进行的设计更改吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T13:22:12.353

在我的 VS 2012 环境中，我可以找到您说缺少的路径。我打开了“VS2012 的开发人员命令提示符”并进行了 PATH 验证并成功运行了 InstallUtil.exe。

确保您打开正确的提示，我的已开始使用`%comspec% /k "C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\Tools\VsDevCmd.bat"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T07:36:48.913

这是微软对复杂路径结构的解释（err..justification :)）：

对于 32 位版本：

[为命令行构建设置路径和环境变量](http://msdn.microsoft.com/en-us/library/f2ccy3wt.aspx)

.. 和 64 位版本：

[如何：在命令行上启用 64 位 Visual C++ 工具集](http://msdn.microsoft.com/en-us/library/x4d2c09s.aspx)

# android - 即使没有问题，也没有找到类定义错误

> ID：12708744
> 
> 赞同：0
> 
> 时间：2012-10-03T12:42:52.283
> 
> 标签：android, eclipse

我正在尝试清理，更改 eclipse 中导入/导出的顺序，检查包名称 100 次现在仍然收到 java.lang.NoClassDefFoundError ......它仅适用于三个类，所有其他类都工作正常..可能是什么问题..这三个类是最近没有添加的，而是从以前开始的，我只是更改并重命名了我的包名......我的代码仍然有效，但三个类（活动）正在产生问题......这三个与其他人相同，它们在同一个包装中..

我被卡住了......请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:09:26.327

[试试这个](https://stackoverflow.com/questions/11823975/getting-noclassdeffounderror-when-using-common-lang-stringutils-in-android-java/11824038#11824038)

这对我有用..谢谢大家

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:58:09.807

如果您将 jar 文件放在 lib 文件夹中，请将其名称更改为 libs。然后从该 libs 文件夹构建路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T13:23:55.527

是的，这是因为您的 .jar 文件没有正确导入。请按照以下步骤操作 -

1.  将您的`.jar`文件放在项目的`libs`文件夹中。

2.  将其导入您的项目。和，`GoTo project -> properties -> Java build path -> order tab.`

3.  检查您的 .jar 文件是否已检查并按第一顺序放置。这是主要的事情。

希望这些步骤对您有所帮助。看看下面的图片 -

![图片](../Images/c0ae3b4e8e26d0d580f816edc23be802.png)

# mongodb - MongoDB 配置服务器 - 只读

> ID：12708748
> 
> 赞同：0
> 
> 时间：2012-10-03T12:43:00.517
> 
> 标签：mongodb, sharding

我想知道关于 mongodb 中配置服务器的声明（[来自文档](http://www.mongodb.org/display/DOCS/Sharding+Introduction#ShardingIntroduction-ConfigDBProcesses)）：

> 如果任何配置服务器关闭，集群的元数据将变为只读状态。但是，即使在这种故障状态下，MongoDB 集群仍然可以被读取和写入。

我们可以使用 1 或 3 个配置服务器。为什么如果我们使用 3 台配置服务器并且一台服务器关闭，集群会进入只读模式？从上面的链接可以看出，`Each config server has a complete copy of all chunk information`.
如果每个服务器都有所有块信息的完整副本，为什么只有在一个配置服务器关闭后才会读取？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T21:09:09.427

所以，这是因为配置服务器进行 2 阶段提交的方式。如果你有一个配置服务器并且它失败了，那么你的整个系统就会失败。如果您有 3 个并且一个失败，则所有元数据仍然可用，但是您失去了 2 个阶段提交的弹性系数。如果没有 3 个成员，您将无法进行 2 个阶段提交。

因此，您可能仍会使用其他两个进行读取，但平衡器本质上已关闭，因此不会发生块迁移或拆分（因此元数据变为只读）。这是因为您无法使用 3 节点配置设置使用的提交过程来提交拆分或迁移，因此它们不会发生。

不建议使用 1 个配置服务器运行。基本上，如果它出现故障，您将不知道您的任何数据在哪里。

2 阶段提交仅适用于 3 台机器，因为它可以确保您的数据保持一致状态。这意味着如果一台机器在更新过程中死机，则该更新将失败或持续存在，具体取决于它是否已提交到至少另一个将更新第三个节点（因此是 2 阶段提交）。因此使用剩下的 2 个配置服务器读取分片集群是安全的。

你不能用 2 个节点来做到这一点。它可能已经通过，也可能没有，您无法判断，因为您无法将最后一个剩余节点与任何其他节点进行比较，因为另一个节点已关闭。因此，安全的做法是在备份第三个节点之前不要进行任何更新，否则您可能会读取过时的数据。

如果您想要无缝抗故障，那么使用 2 是没有意义的，因为您使用 2 阶段提交。如果您宁愿什么都没有，那么它确实没有比 1 个节点更多的持久性，然后可能是不正确的数据。在分片集群中，没有任何东西和不正确的数据齐头并进，因为无论哪种方式，您都不知道在哪里可以找到您的块。

它基本上是为了保护您免受潜在的配置数据损坏和不一致的影响。

# python - Python 在文本文件上写入

> ID：12708751
> 
> 赞同：0
> 
> 时间：2012-10-03T12:43:19.657
> 
> 标签：python, file

所以我有一个 xml 文件、一个 python 代码和一个 fileList.txt。

我必须从 xml 文件中提取路径（已完成），并将其写入 fileList.txt 文件。我写它没有问题，但如果路径不存在，我想签入该文件。我只能度过这个难关。这是我写的。我尝试了for，但它没有用。提前致谢

```
fileList.txt: 
USM/src/ 
```

Python：

```
for racine in rootElements.findall('racine'):
    path = racine.find('path').text 
    if path != None: 
        f_path = f_path + path + "/"  
print f_path

file = open('fileList.txt','r') 

while 1:
     ligne = file.readline()
     if(ligne == f_path):
         print("path already present")
         sys.exit(0)
     else:
         break
file.close()

file = open('fileList.txt','a') 
f_path = f_path + "\n"  
file.write(f_path)      

file.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:51:41.840

你的无限`while`循环只会执行一次；检查第一行是否匹配，如果是，则完全退出程序，如果不是，则退出循环。

这样的事情会更好：

```
with open('fileList.txt','r+') as myfile: #file is a builtin, don't name your file 'file'
    for line in myfile:
         if line.strip() == f_path:
              print "path already present"
              break
    else:
        myfile.write(f_path) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-15T14:55:46.180

其他的都很好，但是错误地将文件对象用于迭代。要解决这个问题，请使用该`File.readlines()`方法创建一个可迭代列表。这是整个代码：

```
for racine in rootElements.findall('racine'):
    path = racine.find('path').text 
    if path != None: 
        f_path = f_path + path + "/"  
print f_path

file = open('fileList.txt','r') 

with open('fileList.txt', 'r') as myfile:
    for line in myfile.readlines() : # here is the fix
        if line.strip() == f_path:
            print("path already present")
            sys.exit(0)

with open('fileList.txt','a') as myfile:
    f_path = f_path + "\n"  
    myfile.write(f_path) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T12:46:40.107

`file.readline()`将包括行终止符“ `\n`”。您可以尝试`file.readline().strip()`删除前导和尾随空格。

此外，您的`while`循环看起来不正确。它永远不会循环超过一次，因为它要么在第一行找到匹配项并调用`sys.exit(0)`，要么没有找到匹配项并点击`break`to 结束循环。

比循环更好的方法`while`可能是：

```
for line in file:
    if line.strip() == f_path:
        print("path already present")
        sys.exit(0)
file.close() 
```

* * *

*编辑*- 您报告得到“类型对象不可迭代”。这通常意味着 for 循环（此处为“ `file`”）中的序列不是可迭代类型。在您的示例代码中，`file`是您之前打开的文件的名称。这对变量来说是个坏名字，因为 Python 已经将`file`其用作文件对象的类。也许您已经更改了代码以使用不同的文件变量名称，并且没有更新我的示例以匹配？这是您的程序的完整版本，应该可以工作：

```
for racine in rootElements.findall('racine'):
    path = racine.find('path').text 
    if path != None: 
        f_path = f_path + path + "/"  
print f_path

file = open('fileList.txt','r') 

with open('fileList.txt', 'r') as myfile:
    for ligne in myfile:
        if ligne.strip() == f_path:
            print("path already present")
            sys.exit(0)

with open('fileList.txt','a') as myfile:
    f_path = f_path + "\n"  
    myfile.write(f_path) 
```

# .net - 如何在 Windows 8 上调试 Double.TryParse 中的零星崩溃？

> ID：12708752
> 
> 赞同：1
> 
> 时间：2012-10-03T12:43:27.247
> 
> 标签：.net, windows-8, com-interop, delphi-prism, oxygene

在 Windows 8 中测试现有应用程序时，我遇到了一个非常奇怪的崩溃。主应用程序是用 Delphi XE (Win32) 编写的，它使用 COM 互操作对 .Net 程序集进行了一些调用。当前使用的 .Net 版本是 3.5。

当应用程序在全新安装的 Windows 8 上执行时，它会在突然开始正常运行之前崩溃多达 10 次。一旦它开始正常运行，它将继续这样做。不显示错误日志或错误消息。应用程序只是挂起或停止工作。

我在 4 种不同的 Win8 安装（物理和虚拟）上得到了相同的结果。

`Double.TryParse`在尝试解析非数字值时，我已经能够进行一些远程调试并设法将错误追踪到 .Net 方法。

`Double.Parse`在 Try/Catch 块中也不起作用。

主要程序集是用 Delphi Prism 编写的，但我已经能够使用 VS2010 用 C# 编写的测试程序集重现错误。

.Net 4 似乎工作正常，但由于缺少对 Oracle 的支持，我们现在无法升级。

该程序在以前版本的 Windows 以及 Windows Server 2012 上运行良好。

任何提示或建议将不胜感激。

*另外：* 当从另一个用 C#/托管代码编写的测试应用程序调用测试程序集时，我忘了提及该测试程序集可以正常工作。只有 Delphi (Win32)、.Net 3.5、COM InterOp 和 Windows 8 的组合会导致崩溃。

我也很困惑为什么应用程序在崩溃多达 10 次后突然开始工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:56:53.707

如果没有您的代码，将很难进行故障排除，但我可以提出一些建议。

您是否实际安装了 .Net 3.5 运行时？运行真正的 .Net 3.5 运行时和在 .NET 4.0（预装在 Windows 8 中）下“模拟”它之间存在一些差异。

接下来，您可以尝试通过创建/修改程序集清单来强制应用程序在特定运行时版本下运行。

[强制应用程序在特定的 .NET 运行时版本下运行？](https://stackoverflow.com/questions/2046089/force-an-application-to-run-under-specific-net-runtime-version)

最后，您可以尝试强制您的应用程序进入 32 位空间，以查看 64 位是否存在问题。不幸的是，这是由进程控制的，不能由 DLL 更改。.NET 可执行文件可以在项目属性中或通过编译器标志指定：

[http://msdn.microsoft.com/en-us/library/zekwfyz4(VS.80).aspx](http://msdn.microsoft.com/en-us/library/zekwfyz4(VS.80).aspx)

由于仅当 .NET 代码在 Delphi .NET 主机下运行时才会发生这种情况，所以我想看看您是否在 Delphi 中对所创建的 .NET AppDomain 有任何控制权。我不是 Delphi 开发人员，所以在这里我无法为您提供帮助，但看起来有一个名为 JCL 的库可以让您更好地控制代码如何加载到 AppDomain 中。

[在 Delphi 程序中托管 .NET 运行时](https://stackoverflow.com/questions/258875/hosting-the-net-runtime-in-a-delphi-program)

如果您能够追查到这一点，我建议您与 Microsoft 支持人员分享您的发现，以便他们能够潜在地解决它（假设它在他们的控制范围内以解决）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T06:12:36.397

Delphi changes the CPU bitness which .NET does not allow. It throws exceptions for overflows of some kind. Try something like this from the Delphi side:

```
var lSave: Word;

lSave := Get8087CW;

Set8087CW($037f);

<YOURCALLTO.NET>

Set8087CW(lSave); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T13:10:31.687

微软似乎已经自己解决了这个问题。如果您安装 Windows Update 上可用的 Windows 8 的最新修复程序，问题就消失了。

# c++ - 将 C++ 源代码反转为 UML 类图

> ID：12708760
> 
> 赞同：1
> 
> 时间：2012-10-03T12:43:52.460
> 
> 标签：c++, reverse-engineering, class-diagram

我想使用 MacOS 为类图生成一个 C++ 程序。

我已经尝试过 Doxygen（在 stackoverflow 的其他主题中有很多建议），但我似乎不明白它是如何工作的。

你能提出一个更简单的解决方案吗？哪个对提供类图自动反转的用户程序最友好？

（例如，NetBeans 6.5.1 对 Java 程序所做的事情）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:47:01.230

如果你使用 eclipse 作为 IDE，你可以试试[这篇](https://stackoverflow.com/questions/3155448/eclipse-plugin-for-generating-uml-diagram-from-c-code)文章的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T13:45:19.743

您可能会尝试避免使用 doxygen GUI。从终端输入您的源文件夹，然后键入

```
 $ doxygen -g  #that generates the doxygen config file "doxyfile"
 $ doxygen 
```

后者为 UML 的 HTML 和 PDF 版本生成两个文件夹。

工作完成了！

您可以编辑 doxyfile 以更改设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T12:48:35.530

我通常使用对 C++ 的理解来生成 UML 或重构代码：

[http://www.scitools.com/index.php](http://www.scitools.com/index.php)

# html - TD 宽度在 Safari 浏览器中不起作用

> ID：12708764
> 
> 赞同：1
> 
> 时间：2012-10-03T12:44:14.423
> 
> 标签：html, css

我正在使用下面的 HTML 代码在 ASP.Net 中呈现按钮

```
<table onclick=""
    title="Add New" 
    cellspacing="0" cellpadding="0" border="0" style="border-collapse: collapse;
    float: left; cursor: pointer; ">
    <tbody>
        <tr>
            <td class="ButtonLeftStyle">
            </td>
            <td class="ButtonCenterStyle" >
                <span class="ButtonTextStyle">Add New</span>
            </td>
            <td class="ButtonRightStyle">
            </td>
        </tr>
    </tbody>
</table> 
```

* * *

我在这个按钮上使用下面的 CSS 类

```
.ButtonLeftStyle
{
    width: 1px;

}

.ButtonRightStyle
{
    width: 1px;

}

.ButtonCenterStyle
{

    background:url(Images/imgButton/GenericButton_Link.gif) repeat 0 -1px transparent;
    width: 120px;
    border: 1px solid #77A2B5;
    border-collapse: collapse;
    color: #000000;
    display: inline;
    font-family: Tahoma,Arial,Verdana,Sans-Serif;
    font-size: 11px;
    line-height: 13px;
    text-align: left;
    text-decoration: none;
    vertical-align: middle;
    white-space: nowrap;
    cursor: hand;
    text-indent:25px;
    height: 18px;

}

TD.ButtonCenterStyle:hover
{
    background:url(Images/imgButton/GenericButton_Hover.gif) repeat 0 -1px transparent;   
    width: 120px; 
    border:1px solid #cccccc;
    border-collapse: collapse;
    color: #666666;
    display: block;
    font-family: Tahoma,Arial,Verdana,Sans-Serif;
    font-size: 11px;
    line-height: 13px;
    text-align: left;
    text-decoration: none;
    vertical-align: middle;
    white-space: nowrap;
    cursor: hand;
    text-indent:25px;
    height: 18px;
}

.ButtonTextStyle
{
    font-size: 10px;
    font-family: Tahoma,Arial,Verdana,Sans-Serif;
} 
```

如果我们计算表格的宽度，那么它必须为 124px，这在 IE8、9 和 Firefox 中是正确的，但在 Safari 中失败。Safari 渲染按钮的宽度 = 46px，等于 span 内的文本。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:04:47.420

放

```
display: block; 
```

在

```
.ButtonCenterStyle 
```

# c# - EDMX 没有使用 EF 中的数据库优先方法存在的关系

> ID：12708765
> 
> 赞同：0
> 
> 时间：2012-10-03T12:44:14.893
> 
> 标签：c#, entity-framework, edmx

我正在使用 Entity Framework 使用数据库优先方法来处理数据库，其中 EDMX 文件代表我的数据库。当我更改数据库中的一个属性时发生了一个问题，然后当我从 EDMX 文件中删除它并更新它以再次添加它时，它现在显示为没有与其他表的关系（Pk-Fk 关系）。

更多信息： 1\. 尝试从另一个新项目连接，结果相同。2.尝试重新创建数据库并重新创建pk-fk关系，结果相同。3\. 尝试使用 edmx 连接到另一个数据库，在这种情况下，关系存在。4\. 在 sql management studio 中，关系似乎存在于表中以及图表中。

有谁知道是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:01:21.453

当我需要更新 edmx 中的表时，它通常会创建另一个 .edmx.designer 文件，如果发生这种情况，这可能是关系不出现的原因。只需删除旧的 .edmx.designer ，它应该可以再次工作。如果这不是问题，对不起，但我是实体框架的新手，不太了解

# json - 用于 JSON 的 Grails GET 方法

> ID：12708769
> 
> 赞同：0
> 
> 时间：2012-10-03T12:44:19.020
> 
> 标签：json, grails, get, titanium

我正在尝试使用 http GET 方法来检索我创建的 JSON 对象，然后在 Titanium 中我创建了一个检索方法，但它只是检索“未定义”

```
def listJSON() {
   def converter = User.list() as JSON
   System.out.println(converter)
   render(converter)
   //response(converter)
} 
```

grails 的输出是正确的，并且页面呈现（从系统输出）：

```
[{"class":"testingmobile.User","id":1,"age":22,"email":"test@hotmail.com","name":"Ryan","occupation":"Whatever "}] 
```

Titanium中移动应用程序的代码如下：

```
var url = "http://localhost:8080/TestingMobile/user/listJSON";
var client = Ti.Network.createHTTPClient ({
onload : function(e) {
    Ti.API.info("Recieved text: "+ this.responceText);
    var jsonObj = JSON.parse(this.responseText);
    getShow(jsonObj);
    alert('success');
},
onerror : function(e) {
    Ti.API.debug(e.error);
    alert('error');
},
timeout : 5000 
});
client.open("GET", url);
client.send(); 
```

控制台输出“收到的文本：未定义”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:51:02.547

`responceText`

应该

`responseText`

用**s**，而不是**c**。

# javascript - 开放层基本示例不起作用

> ID：12708770
> 
> 赞同：0
> 
> 时间：2012-10-03T12:44:20.423
> 
> 标签：javascript, openlayers, openstreetmap

代码：

```
<script src="http://www.openlayers.org/api/OpenLayers.js"></script>
    <script type="text/javascript">
    map = new OpenLayers.Map("open_map");
    map.addLayer(new OpenLayers.Layer.OSM());

    var lonLat = new OpenLayers.LonLat( -0.1279688 ,51.5077286 )
          .transform(
            new OpenLayers.Projection("EPSG:4326"), // transform from WGS 1984
            map.getProjectionObject() // to Spherical Mercator Projection
          );

    var zoom=16;

    var markers = new OpenLayers.Layer.Markers( "Markers" );
    map.addLayer(markers);

    markers.addMarker(new OpenLayers.Marker(lonLat));

    map.setCenter (lonLat, zoom);
  </script>
<div id="open_map" style="width:100%"></div> 
```

我使用了官方网站示例，但它对我不起作用，它没有在浏览器中显示任何地图。

我在控制台中没有错误，奇怪......知道吗？

已编辑

```
<div id="open_map" style="width:100%;height:300px;position:relative;"></div>
 <script type="text/javascript">
    map = new OpenLayers.Map("open_map");
    map.addLayer(new OpenLayers.Layer.OSM());

    var lonLat = new OpenLayers.LonLat( -0.1279688 ,51.5077286 )
          .transform(
            new OpenLayers.Projection("EPSG:4326"), // transform from WGS 1984
            map.getProjectionObject() // to Spherical Mercator Projection
          );

    var zoom=16;

    var markers = new OpenLayers.Layer.Markers( "Markers" );
    map.addLayer(markers);

    markers.addMarker(new OpenLayers.Marker(lonLat));

    map.setCenter (lonLat, zoom);
  </script> 
```

现在我看到了在 div 元素之后移动脚本：

![在此处输入图像描述](../Images/1f4d15a9d4091a52702c832f582f6964.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T12:54:24.203

你有两个错误：

1.  DIV 元素必须放在你的 javascript**之前**，或者将地图创建代码放在 DOM 就绪事件中。

2.  您必须为您的 div 元素设置一个高度。

看到这个[小提琴](http://jsfiddle.net/qvWXV/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-11T21:42:48.597

您的问题是*Twitter Bootstrap*`img`在标签上设置了这个属性：

```
img { max-width:100%; } 
```

我想你想在不破坏整个主题的情况下使用 Open Layers 地图，所以你可以为你的地图 div 覆盖该指令。

示例：您映射有一个 div `class="map"`，所以 css 是：

```
.map img { max-width:none; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T12:53:19.940

根据浏览器的不同，您可能需要尝试将 a`height`和如果不起作用，则将 fix width 放到地图上，`div`例如`width:400px;height:400px`. 我知道这很奇怪，但我在 IE 和 chrome 上显示的地图上找到了这个案例，但不是 FF。

# c# - tdd 基于 FullFileName 的新函数

> ID：12708783
> 
> 赞同：1
> 
> 时间：2012-10-03T12:45:08.767
> 
> 标签：c#, file, tdd

想象一下：我想创建新功能：扫描文件中的病毒。

使用 TDD 我想进行以下测试：

*   ScanningAnInfectedFileReturnsFalse

*   扫描ACleanFileReturnsTrue

在代码中我想创建这个函数：

```
/// <summary>
    /// 
    /// </summary>
    /// <param name="fullFileName">The File To Scan</param>
    /// <returns>True: File is clean, False: File contains virus</returns>
    public static bool ScanFile(string fullFileName)
    {
        //TODO: Scan the given FullFileName
        throw new NotImplementedException();
    } 
```

我的问题：如何使用给定的函数实现这两个测试？我认为应该重构该功能以使其可测试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T12:49:39.960

您遇到的问题是，这种方法`ScanFile`通过获取文件的路径，具有太多的责任，这使得它难以测试。

*   打开文件（并处理任何错误）
*   读取文件内容
*   判断内容是否有问题`*`
*   关闭文件

带有注释的项目`*`实际上是该方法应该做的所有事情。这样，您的方法将更具可测试性。

实现此更改的一种可能方法是让该方法采用接口：

```
public bool ScanFile(IScannable file)
{

} 
```

然后，假设您的扫描方法正在寻找特定的字节序列，接口可能很简单：

```
public interface IScannable
{
    byte[] GetContent();
} 
```

然后，您的测试可以简单地为您的 2 个测试模拟此接口（参见 Rhino、NMock 等），一个返回错误的字节序列，一个返回良好的字节序列。您的实际实现就像拥有一个具体的类一样简单：

```
public class ScannableFile : IScannable
{
    private string fullFilename;
    public ScannableFile(string fullFilename)
    {
        this.fullFileName = fullFilename;
    }

    public byte[] GetContent()
    {
        return File.ReadAllBytes(this.fullFilename);
    }
} 
```

# android - 如何从我的应用程序中停止音乐播放器应用程序

> ID：12708784
> 
> 赞同：0
> 
> 时间：2012-10-03T12:45:10.990
> 
> 标签：android, audio-player, android-music-player

我正在尝试制作一个在按下按钮时停止音乐播放器的应用程序？一切正常，但我无法关闭音乐播放器应用程序？任何建议或帮助....

# javascript - Javascript - 不支持属性或方法注册

> ID：12708785
> 
> 赞同：0
> 
> 时间：2012-10-03T12:45:22.567
> 
> 标签：javascript

下面的 javascript 写在 iframe 中的文档正文中。

```
function pageLoad(sender, args)
    {
        //Register the form and upload elements
        window.parent.register(
            $get('form'),
            $get('fileUpload')
        );
    } 
```

当页面运行时，会出现错误消息 - Microsoft JScript 运行时错误：对象不支持属性或方法“注册”。

这是取自其他人的示例代码 - 奇怪的是，它第一次运行但从那以后就没有了。

# sphinx - SphinxQL 和 SPH_MATCH_ANY

> ID：12708787
> 
> 赞同：0
> 
> 时间：2012-10-03T12:45:36.200
> 
> 标签：sphinx

我正在使用 SphinxQL 来查询 Sphinxsearch 引擎。我想模拟在 php API 中实现的 SPH_MATCH_ANY，如下所示：

```
$cl->SetMatchMode(SPH_MATCH_ANY);
$cl->Query("test query", "index"); 
```

=> 搜索与“测试”或“查询”匹配的文档

因此，我编写了一个函数 (php) 来用管道 (|) 替换空格和其他特殊字符，以便将其与 SphinxQL 一起使用：

```
function formatQuery($str) {
   return trim(preg_replace('/[^-_\'a-z0-9]+/', '|', $str), ' |');
}

$str = "test query";
$sql = "SELECT * FROM index WHERE MATCH('" . addslashes(formatQuery($str)) . "')"; 
```

=> SELECT * FROM index WHERE MATCH('test|query');

问题是，对于某些字符，例如 -（减号），它可能会破坏查询，例如：

```
$str = "i-phone is great";
$sql = "SELECT * FROM index WHERE MATCH('" . addslashes(formatQuery($str)) . "')"; 
```

=> SELECT * FROM index WHERE MATCH('i-phone|is|great')

=> 好的

```
$str = "i - phone is great";
$sql = "SELECT * FROM index WHERE MATCH('" . addslashes(formatQuery($str)) . "')"; 
```

=> SELECT * FROM index WHERE MATCH('i|-|phone|is|great')

=> 由于“|-|”而导致查询中断

你知道让 SphinxQL 查询在 SPH_MATCH_ANY 模式下工作的更好方法吗？还是更好的正则表达式使其适用于所有情况？

我知道我可以使用这样的限制性更强的正则表达式：

```
preg_replace('/[^a-z0-9]+/', '|', $str) 
```

但它会在 'i|phone|is|great' 中拆分诸如“i-phone is great”之类的字符串，我不希望这样......

谢谢你，尼科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:32:54.057

一种方法可能是使用 quorom

```
$sql = "SELECT * FROM index WHERE MATCH('\"" . addslashes($str) . "\"/1')"; 
```

您需要将 - 添加到您的 charset_table 中，因此它成为单词的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:42:42.267

另一种选择是

```
$query = preg_replace('/(\w+?)[-\'](\w+?)/','$1~$2',$query);
$query = preg_replace('/[^\w\~]+/','|',$query);
$query = preg_replace('/(\w+~\w[\w~]*)/e','"\"".str_replace("~"," ","$1")."\""',$query); 
```

把它变成一个短语。

# wix - 是否可以粘贴到 Windows 安装程序中的蒙面编辑控件中？

> ID：12708788
> 
> 赞同：4
> 
> 时间：2012-10-03T12:45:36.063
> 
> 标签：wix, windows-installer, custom-action

**从我需要的最终结果开始：** 客户可以在安装过程中将格式正确的产品密钥从剪贴板粘贴到输入框中。

**我现在在哪里：** 我们使用 WiX 创建我们的 MSI。我们目前使用一个工作正常的蒙面编辑控件。按下“下一步”按钮时，产品密钥验证已使用自定义操作完成。产品密钥验证应该保持不变，只有输入法是问题。

我花了最后一天研究实现这一目标的可能方法并提出了一些想法，尽管我不确定它们中的任何一个是否可行。我已经排除了尝试在粘贴上触发自定义操作的可能性，因为我知道 MSI 无法捕获该事件。

所以，我的想法是“从剪贴板粘贴”按钮。这将触发一个自定义操作，该操作将捕获剪贴板项目，确定它是否看起来像产品密钥（这将是简单的部分），然后以某种方式将其粘贴到编辑控件中。请注意我怎么说编辑控件，我不确定它是否可以使用蒙版编辑控件，我不确定它是否可以使用标准编辑控件。我已经有一个自定义操作，可以检查是否已查看许可证文本，这是通过找到许可证所在的窗口和“richedit”类窗口并检索滚动位置来实现的。我曾认为这种方法可以让我将编辑控件设置为我的剪贴板键，但我不确定这是否可行。

我已经阅读了关于编写自己的 UI 控制器的可能性。我知道这是一项艰巨的任务，但现阶段不排除任何可能，我只是不知道从哪里开始。

我的最终想法，虽然我不知道如何实现它，但将我的蒙面编辑控件更改为标准编辑控件，这显然允许粘贴完整的产品密钥，尽管没有使用自定义操作来验证它的格式正确，我仍然不会进一步前进。但是，如果客户要手动输入产品密钥，这将需要某种类型的自动添加破折号。

任何人都可以阐明我的任何想法的可行性以及如何实施它们或实现我的目标的任何其他方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:50:46.233

我已经设法使用我最初想到的“从剪贴板粘贴”选项来做到这一点。我在我的表单中添加了一个按钮，它调用一个自定义操作来查询剪贴板，如果成功，则在安装程序中设置两个属性。一个包含格式化的产品密钥，一个是基本属性，用于判断剪贴板操作是否成功。被屏蔽的编辑控件链接到产品密钥属性，通过刷新控件，

```
<Publish Event="Reset" Value="0" Order="3">ClipboardSuccess = 1</Publish> 
```

产品密钥填充在屏蔽的编辑控件中。

# asp.net - 如何检查特定单词是否存在于共享点列表的列中

> ID：12708795
> 
> 赞同：0
> 
> 时间：2012-10-03T12:46:01.160
> 
> 标签：asp.net, sharepoint, sharepoint-2010, sharepoint-2007

我有一个 sharepoint 2007 列表，其中有一列“EmpID”，其中包含以下格式的员工 ID：12345;6789;121212

我需要查找 EmpID 列中是否存在 12345。如果我使用 asp.net 使用 caml 查询，它不会只为“12345”提供任何结果。

如果我输入整个数据“12345;6789;121212”那么只有它给了我结果。请帮忙。我只需要搜索 12345

```
using (SPSite site = new SPSite("URL"))
            {
                using (SPWeb web = site.OpenWeb())
                {

                        SPList List = web.Lists["List Name"];
                        SPQuery query = new SPQuery();

                                       query.Query = "<Where><Eq><FieldRef Name='EMP_x0020_ID' /><Value Type='Text'>" + TextBox1.Text + "</Value></Eq></Where><OrderBy><FieldRef Name='Title'/></OrderBy>";

                        SPListItemCollection items = List.GetItems(query);

                        DataTable dt = items.GetDataTable();

                        if (dt==null)
                        {
                            Label1.Text = "No data";
                        }
                        else
                        {
                            foreach (DataRow r in dt.Rows)
                            {
                                Label1.Text += r["Title"];
                            }

                        }
                } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:54:32.330

太简单了……使用 contains 而不是 EQ

# php - 如何在 LOAD DATA INFILE 后删除文件？

> ID：12708796
> 
> 赞同：0
> 
> 时间：2012-10-03T12:46:01.643
> 
> 标签：php, mysql, performance

我正在使用该`LOAD DATA INFILE`解决方案来加速大插入，如下所述：[http](http://www.mysqlperformanceblog.com/2006/07/12/insert-into-select-performance-with-innodb-tables/) ://www.mysqlperformanceblog.com/2006/07/12/insert-into-select-performance-with-innodb-tables/ 。

它工作出色，而且速度非常快。但是，当我进行选择时，我会创建一个文件，然后由`LOAD DATA INFILE`命令使用。但是在使用了这个文件之后，我就不再需要它了。我可以通过额外的查询来摆脱它吗？或者我可以以某种方式让它暂时吗？

我在我的服务器上使用它，所以文件保留在我的服务器上，不以任何方式涉及客户端。我将 PHP 与 MySQL 结合使用，因此解决方案也可能在 PHP 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-11-01T15:34:34.687

正如 air4x 所写， `if(file_exists($file)) { unlink($file); }`

# php - Data2 表：0 到 1 [MySQL]

> ID：12708799
> 
> 赞同：0
> 
> 时间：2012-10-03T12:46:12.703
> 
> 标签：php, mysql

如何更改表中的数据？

**MySql 表：**

```
ID  --   DATA1    --   DATA2    --     DATA3   

1         test1         0               asd
2         test2         0               dsa
3         test3         0               sda
..         ..           0               ...
..         ..           0               ...
2000      test4818      0               ads 
```

如何更改 Data2 中的数据？

我想做这个;

数据 2：**0 到 1**

我如何需要 PHP 代码？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:49:00.660

你不需要一个PHP代码。

只需更新它们。

```
UPDATE Tablo SET DATA2=1; 
```

您也可以从 php 使用此更新，但这是 MySQL 而非 PHP 的业务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:50:02.110

> Data2: 0 to 1 我如何需要 PHP 代码？

不，您不需要 php 代码。使用该[`UPDATE`](http://dev.mysql.com/doc/refman/5.0/en/update.html)语句执行此操作，如下所示：

```
UPDATE YourTableName
SET Data2 = 1
WHERE Data2 = 0; 
```

# android - 以开发者身份购买 Android 应用程序的通知电子邮件

> ID：12708800
> 
> 赞同：3
> 
> 时间：2012-10-03T12:46:14.683
> 
> 标签：android, google-checkout, email-notifications, android-billing

每当用户购买我的应用程序时，Google Android 开发人员是否有办法收到电子邮件通知？

我知道有 Google Checkout 购买历史记录，但更喜欢电子邮件通知。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T03:08:07.837

不知道为什么这被否决了。开发者控制台或 Google Checkout 中没有这样的选项。如果您在自己的服务器上处理 IAB 订单，您可以自己发送通知。您还可以轮询 Checkout API 并定期发送通知。

# ios - UIScrollView 停止工作添加子视图

> ID：12708801
> 
> 赞同：0
> 
> 时间：2012-10-03T12:46:17.713
> 
> 标签：ios, memory-management

我在使用 UIScrollView 时遇到了一些问题。我创建了它，设置了一些属性，并使用主视图指向这个 UIScrollView.See：

```
scrollWidth = 320.0;
scrollHeight = 410 * listRegisterPeople.count;
scrollScreenView = [[UIScrollView alloc]initWithFrame:CGRectMake(0, 0, scrollWidth,    scrollHeight)];
[scrollScreenView setScrollEnabled:YES];
[scrollScreenView setContentSize:CGSizeMake(scrollWidth, 410 * list.count)];
[scrollScreenView setShowsVerticalScrollIndicator:YES];
[scrollScreenView setShowsHorizontalScrollIndicator:YES];
[scrollScreenView setPagingEnabled:NO];
scrollScreenView.delegate = self;
[scrollScreenView setContentOffset:CGPointMake(0, 0)];
self.view = scrollScreenView; 
```

但我想将 scrollScreenView 添加为子视图 [self.view addSubview:scrollScreenView]。但是通过这种方式，我无法滚动我的视图，我不知道为什么。. .

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:57:02.857

如果 ScrollView 的框架大于或等于内容大小，则不会滚动。您的滚动视图高度等于滚动视图 contentSize ，我认为这是问题所在。使框架等于 self.view 并设置内容大小如下：尝试以下。

```
scrollWidth = 320.0;
scrollHeight = 410 * listRegisterPeople.count;
scrollScreenView = [[UIScrollView alloc]initWithFrame:CGRectMake(0, 0, 320,self.view.frame.size.height)];
[scrollScreenView setScrollEnabled:YES];
[scrollScreenView setContentSize:CGSizeMake(scrollWidth, scrollHeight)];
[scrollScreenView setShowsVerticalScrollIndicator:YES];
[scrollScreenView setShowsHorizontalScrollIndicator:YES];
[scrollScreenView setPagingEnabled:NO];
scrollScreenView.delegate = self;
[scrollScreenView setContentOffset:CGPointMake(0, 0)];
[self.view addSubview:scrollScreenView]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:54:11.270

我认为你应该更换线路

self.view = 滚动屏幕视图；

为线

[self.view addSubview:scrollScreenView]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T17:51:01.550

Autolayout 在视图加载后设置了一些约束，因此，只需将您的内容大小放在 viewDidAppear 中，您的代码就不会被重写。

这对我有用。

```
-(void)viewDidAppear:(BOOL)animated{
  [self.scrollView setContentSize:CGSizeMake(320, 1000)];
} 
```

并为我糟糕的英语感到抱歉。

# curl - Erlang curl 并排除各种文本/标签

> ID：12708806
> 
> 赞同：0
> 
> 时间：2012-10-03T12:46:24.013
> 
> 标签：curl, erlang

我正在用 erlang 卷曲一个网页，自然而然地得到了 html 代码，到目前为止一切都很好！这就是我的代码的样子：

```
startCURL()->
Cmd = "curl \"" ++ "http://mywebsite.com/something.html" ++ "\"",
Output = os:cmd(Cmd),
io:format("The HTML output: ~s~n", [Output]). 
```

现在到了这个问题，我想通过 erlang 排除 html 中的各种标签。示例： `<b>`Hello `</b>`to "Hello" 没有`<b>`and `</b>`。

我真的很感激我能得到的所有帮助！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:44:46.380

您可以使用[re 模块](http://www.erlang.org/doc/man/re.html#replace-3)中的替换功能将不需要的标签替换为空字符串。

```
re:replace(Output, "</?br>", "", [global]). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:02:43.807

[这篇博文](http://ppolv.wordpress.com/2008/05/09/fun-with-mochiwebs-html-parser-and-xpath/)展示了如何使用`mochiweb_html`HTML 文档进行各种技巧。希望这足以让你开始。

# python - Numpy 整数 nan

> ID：12708807
> 
> 赞同：59
> 
> 时间：2012-10-03T12:46:24.987
> 
> 标签：python, numpy, integer, nan

有没有办法将 NaN 存储在 Numpy 整数数组中？我得到：

```
a=np.array([1],dtype=long)
a[0]=np.nan

Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: cannot convert float NaN to integer 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-10-03T20:22:05.790

不，你不能，至少对于当前版本的 NumPy。A是**仅**`nan`适用于浮点数组的特殊值。

 **有关于引入一个特殊位的讨论，该位将允许非浮点数组存储实际上对应于 a 的内容`nan`，但到目前为止（2012/10），这只是讨论。

同时，您可能需要考虑[`numpy.ma`](http://docs.scipy.org/doc/numpy/reference/maskedarray.html)封装：您可以使用特殊`numpy.ma.masked`值来表示无效值，而不是选择像 -99999 这样的无效整数。

```
a = np.ma.array([1,2,3,4,5], dtype=int)
a[1] = np.ma.masked
masked_array(data = [1 -- 3 4 5],
             mask = [False  True False False False],
       fill_value = 999999) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-03T12:47:52.143

nan 只是一个浮点数，整数中没有它的表示，所以没有:)

选择一个无效值，例如 -99999**

# android - Android：接触点逃脱

> ID：12708811
> 
> 赞同：0
> 
> 时间：2012-10-03T12:46:35.560
> 
> 标签：android, touch

我正在做一些项目，我必须根据用户的触摸来为图像制作动画，但问题是我没有得到所有的接触点，因此我没有得到流畅的动画。我正在使用 Android 平板电脑 os 4.0.3。

```
 public class DrawView extends View implements OnTouchListener {
    private static final String TAG = "DrawView";

    List<Points> points = new ArrayList<Points>();
    Paint paint = new Paint();
    Button button = null;
    int movement = 0;

    int[] imageIds = {R.drawable.zero,R.drawable.one,R.drawable.two,R.drawable.three,R.drawable.four,
            R.drawable.five,R.drawable.six,R.drawable.seven,R.drawable.eight,R.drawable.ninie,R.drawable.ten,
            R.drawable.eleven,R.drawable.twelve,R.drawable.thirteen,R.drawable.fourteen,R.drawable.fifteen,
            R.drawable.sixteen,R.drawable.seventeen,R.drawable.eighteen,R.drawable.ninteen,R.drawable.twenty,
            R.drawable.twentyone,R.drawable.twentytwo,R.drawable.twentythree,R.drawable.twentyfour,
            R.drawable.twentyfive,R.drawable.twentysix,R.drawable.twentyseven,R.drawable.twentyeight,
            R.drawable.twentynine,R.drawable.thirty,R.drawable.thirtyone,R.drawable.thirtytwo,
            R.drawable.thirtythree,R.drawable.thirtyfour,R.drawable.thirtyfive,R.drawable.thirtysix,
            R.drawable.thirtyseven,R.drawable.thirtyeight,R.drawable.thirtynine,R.drawable.fortyone,
            R.drawable.fortytwo,R.drawable.fortytwo,R.drawable.fortyfour,R.drawable.fortyfive,
            R.drawable.fortysix,R.drawable.fortyseven,R.drawable.fortyeight,R.drawable.fortynine,
            R.drawable.fifty,R.drawable.fiftyone,R.drawable.fiftyone,R.drawable.fiftythree,R.drawable.fiftyfour,
            R.drawable.fiftyfive,R.drawable.fiftysix,R.drawable.fiftyseven,R.drawable.fiftyeight,
            R.drawable.fiftynine,R.drawable.sixty,R.drawable.sixtyone,R.drawable.sixtytwo,
            R.drawable.sixtythree,R.drawable.sixtyfour,R.drawable.sixtyfive,R.drawable.sixtysix,
            R.drawable.sixtyseven,R.drawable.sixtyeight,R.drawable.sixtynine,R.drawable.seventy,
            R.drawable.seventyone,R.drawable.seventytwo,R.drawable.seventythree,R.drawable.seventyfour,
            R.drawable.seventyfive,R.drawable.seventysix,R.drawable.seventyseven,R.drawable.seventyeight,
            R.drawable.seventynine,R.drawable.eighty,R.drawable.eightyone,R.drawable.eightytwo,R.drawable.thirtythree,
            R.drawable.eightyfour,R.drawable.eightyfive,R.drawable.eightysix,R.drawable.eightyseven,
            R.drawable.seventyeight,R.drawable.eightynine,R.drawable.ninty,R.drawable.nintyone,
            R.drawable.nintytwo,R.drawable.nintythree,R.drawable.nintyfour,R.drawable.nintyfive,
            R.drawable.nintysix,R.drawable.nintyseven,R.drawable.nintyeight,R.drawable.nintynine,
            R.drawable.hundred
    };
    int touchPoint=0,currentImage=0;
    float previousX = 0, starting = 0, difference = 0, remaining=0;
    RelativeLayout relativeLayout;
    Boolean update = false;
    int changeImageFrequency = 4;

    ImageView image;

    public DrawView(Context context) {
        super(context);
        setFocusable(true);
        setFocusableInTouchMode(true);
        this.setOnTouchListener(this);

    }

    @SuppressLint("DrawAllocation")
    @TargetApi(11)
    @Override
    public void onDraw(Canvas canvas) {
        Log.i("testing", "i am in draw");

        if (movement==0) {
            Bitmap bimap = BitmapFactory.decodeResource(getResources(), imageIds[currentImage]);
            canvas.drawBitmap(bimap, 0, 0,null);
            invalidate();
        }
        else if (movement==1) {
            if (currentImage+changeImageFrequency<100) {
                currentImage+=changeImageFrequency;
                Bitmap bimap = BitmapFactory.decodeResource(getResources(), imageIds[currentImage]);
                canvas.drawBitmap(bimap, 0, 0,null);
                invalidate();
            }
            else {
                Bitmap bimap = BitmapFactory.decodeResource(getResources(), imageIds[currentImage]);
                canvas.drawBitmap(bimap, 0, 0,null);
                currentImage=0;
            }
            movement=0;
            invalidate();
        }
        else if (movement==2) {

            if (currentImage-changeImageFrequency>=0) {
                currentImage-=changeImageFrequency;
                Bitmap bimap = BitmapFactory.decodeResource(getResources(), imageIds[currentImage]);
                canvas.drawBitmap(bimap, 0, 0,null);
                invalidate();
            }
            else {
                Bitmap bimap = BitmapFactory.decodeResource(getResources(), imageIds[currentImage]);
                canvas.drawBitmap(bimap, 0, 0,null);
                currentImage=99;
            }
            movement=0;
            invalidate();
        }
    }

    public boolean onTouch(View view, MotionEvent event) {
        // TODO Auto-generated method stub
        int action = event.getAction();
        switch(action) {
        case MotionEvent.ACTION_DOWN:
            starting = event.getX();
            invalidate();
            break;
        case MotionEvent.ACTION_MOVE:   
            difference =  event.getX()-starting;
            if (difference>0)
                movement = 1;
            else if (difference<0)
                movement = 2;
            invalidate();
            break;
        case MotionEvent.ACTION_UP:
            invalidate();
            break;
        }
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:52:35.507

如果您的图像具有平均分辨率，则`BitmapFactory.decodeResource`在主线程中加载它们 ( ) 将阻塞 UI，导致在执行加载之前跳过一些触摸事件。更好的实现是使用`SurfaceView`，而不是`View`因为它在单独的线程中执行其绘图。有关使用 SurfaceView 的更多详细信息，请查看此[链接](http://developer.android.com/guide/topics/graphics/2d-graphics.html#on-surfaceview)。

# angularjs - 对 EmberJS、AngularJS 或 BatmanJS 的 TypeScript 支持

> ID：12708818
> 
> 赞同：7
> 
> 时间：2012-10-03T12:46:51.783
> 
> 标签：angularjs, ember.js, typescript

TypeScript 会支持任何那些出色的 MV* 框架吗？

我知道现在问这个问题还为时过早，但是通过这个年轻的 javascript 计划获得支持的机会如何呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-03T13:34:09.923

TypeScript 已经支持这些以及所有其他 JavaScript 库。任何 JavaScript 代码都是有效的 TypeScript 代码。

显然，要从 TypeScript 中看到任何好处，这些库需要添加类型注释，这可以通过创建声明源文件（带有`.d.ts`扩展名的文件）不显眼地完成。这些基本上是描述与现有 JavaScript 代码相关的类型信息的头文件。

为每个流行的 JavaScript 库创建这些声明源文件显然超出了 TypeScript 项目的范围。由这些项目和社区做出贡献。

您可以查看TypeScript 示例中包含的[jQuery 示例声明源文件。](http://typescript.codeplex.com/SourceControl/changeset/view/fe3bc0bfce1f#samples/jquery/jquery.d.ts)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-13T19:56:06.760

[DefinitiveTyped](https://github.com/borisyankov/DefinitelyTyped)已经涵盖了大多数（如果不是全部）mv* JavaScript 框架。他们有 angularjs、backbone、ember、knout 等的定义。看看这个。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-03T13:34:20.997

1.  所有的 JavaScript 都是 TypeScript。
2.  MV* 框架是 JavaScript。
3.  因此，MV* 框架是 TypeScript。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-05T20:03:20.030

这是一篇关于 TypeScript 和 AngularJS 的有趣文章

[http://www.piotrwalat.net/using-typescript-with-angularjs-and-web-api/](http://www.piotrwalat.net/using-typescript-with-angularjs-and-web-api/)

# rest - 无法以编程方式启动 Windows Azure VM

> ID：12708829
> 
> 赞同：4
> 
> 时间：2012-10-03T12:47:15.093
> 
> 标签：rest, azure

我正在执行 REST API 操作**启动角色**(http://msdn.microsoft.com/en-us/library/jj157189.aspx)

在链接**https://management.core.windows.net/{subscription-id}/services/hostedservices/{service-name}/deployments/{deployment-name}/roles/{role-name}/Operations**我们有将**{service-name}**、**{deployment-name}**和**{role-name}**替换为 VM 的名称。

结果我们有下一条消息：“`ResourceNotFound`不支持资源服务名称hostedservices。”

**列出托管服务**操作 (http://msdn.microsoft.com/en-us/library/windowsazure/ee460781.aspx) 显示我们有 2 个 WM 作为托管服务。

**获取角色**操作 (http://msdn.microsoft.com/en-us/library/jj157193.aspx) 还提供有关每个 VM 的信息。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T13:21:02.043

您正在使用：

{subscription-id}/services/hostedservices/{service-name}/deployments/{deployment-name}/**角色**/{role-name}/Operations

但正确的 Uri 是：

{subscriptionID}/services/hostedservices/{serviceName}/deployments/{deploymentName}/ **roleInstances** /{roleInstanceName}/Operations

看到不同？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:02:33.243

我没有使用过这个特定的操作，但是有一些事情：

**service-name**：它应该是托管服务的名称（带有 .cloudapp.net 的服务）以及您在列出托管服务时看到的名称。

**部署名称**：一般来说，它是获取部署操作返回的 GUID (http://msdn.microsoft.com/en-us/library/windowsazure/ee460804.aspx)。

**role-name**：执行 Get Deployment 操作时也会返回角色名称。你应该使用它。我不确定它是否与您的虚拟机名称相同。

您可以在更改这些值后重试操作吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-20T20:53:12.250

就我而言，部署名称是我在此云服务中创建的第一个 VM 的名称。因此，如果我将 3 台机器添加到同一个云服务中，它们都具有相同的部署名称——第一台机器的名称。

# facebook - 我的 OG 视频嵌入标签停止工作

> ID：12708830
> 
> 赞同：2
> 
> 时间：2012-10-03T12:47:16.013
> 
> 标签：facebook, video, embed, playback

我已经绞尽脑汁 - 使用了 Lint - 调试器，但仍然无法像以前那样让嵌入的视频工作：

示例页面：

[http://www.mixtubedj.com/view/?query=GeorgeRon&file=GeorgeRon_20120802220844.flv](http://www.mixtubedj.com/view/?query=GeorgeRon&file=GeorgeRon_20120802220844.flv)

它显示图像，并显示一切正确，但我无法让嵌入播放再次工作！

它说重定向中有错误，但我看不到在哪里。我可以得到第二双眼睛吗？

# java - 制作 Java Dual-exported 服务器守护进程

> ID：12708833
> 
> 赞同：0
> 
> 时间：2012-10-03T12:47:34.340
> 
> 标签：java, rmi

我有以下为 JRMP 和 IIOP 导出自己的服务器类：

```
public class FooServer implements RemoteInt{
    FooServer(){
        UnicastRemoteObject.exportObject(this);
        PortableRemoteObject.exportObject(this);
    }

    public boolean remoteMethod() throws RemoteException{
        // some stuff
        return false;
    }
} 
```

以及以下创建服务器并将其注册到正在运行的寄存器的安装程序类：

```
public class Setup{
    public static void main(String[] args){
        RemoteInt serv = new FooServer();
        Naming.rebind("//localhost/server", this);
    }
} 
```

问题是当安装程序完成它的工作时，它会等待 FooServer 终止。相反，我想退出 Setup 类，让 FooServer 运行。我能怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:21:41.690

你不能。远程对象是从当前 JVM 中导出的，它会一直运行，直到您取消导出它为止。请注意，main() 方法确实退出了，但 RMI/JRMP 和 RMi/IIOP 侦听线程仍在运行，因此 JVM 不会退出。

# box-api - 在 box API 中为 get_account_tree 调用获取 500

> ID：12708841
> 
> 赞同：0
> 
> 时间：2012-10-03T12:47:51.893
> 
> 标签：box-api

当我进行**get_account_tree**调用时，我为少数用户获得了 500 个 http 状态代码。

对于只有一个用户，我得到了 application_restricted，这怎么可能？所有其他用户工作正常。

我正在打一个这样的卷曲电话：

```
curl https://www.box.com/api/1.0/rest?\
action=get_account_tree&api_key=XXXXXX&auth_token=XXXXX\
&par‌​ams[]=nofiles&folder_id=0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T22:15:57.353

如[文档中所述](http://developers.box.net/w/page/12923929/ApiFunction_get_account_tree)，强烈建议您使用该`onelevel`参数，因为某些 Box 帐户可能有数千个文件夹，在这种情况下，调用将不会返回。如果您将此参数添加到您的 get_account_tree 调用，它应该可以在没有 500-ing 的情况下工作。

# c++ - 关于堆损坏的错误

> ID：12708842
> 
> 赞同：-3
> 
> 时间：2012-10-03T12:47:52.567
> 
> 标签：c++, heap-corruption

我写了一个 C++ 程序，实际上它是一个游戏。我收到了这个错误：

> Windows 在 bla bla 中触发了断点...

有人能帮我吗？
那是代码，但在 AAA 行发生错误：

```
void r_motions(char **map,int size)
{
    int parameter_i,parameter_j,player_i,player_j;
    int *r_location_i = new int[1],*r_location_j = new int[1];
    player_finder(map,size,player_i,player_j);
    int r_num = robots_finder(map,size,r_location_i,r_location_j);
    for(int i=1;i<=r_num;i++)
    {
        parameter_i =0;
        parameter_j =0;
        if(r_location_i[i]>player_i) parameter_i = -1;
        if(r_location_i[i]<player_i) parameter_i =  1;
        if(r_location_j[i]>player_j) parameter_j = -1;
        if(r_location_j[i]<player_j) parameter_j =  1;
        map[r_location_i[i]][r_location_j[i]] = '.';
        r_location_i[i] = r_location_i[i]+parameter_i;
        r_location_j[i] = r_location_j[i]+parameter_j;
    }
    for(int i=1;i<=r_num;i++)
    {
        switch (map[r_location_i[i]][r_location_j[i]])
        {
        case '.': 
            map[r_location_i[i]][r_location_j[i]] = '+';
            break;
        case '@': 
            map[r_location_i[i]][r_location_j[i]] = '+';
            print_map(map,size);
            cout << "Robots win ." << endl;
            sleep(1000);
            exit(1);
            break;
        case '+':
            map[r_location_i[i]][r_location_j[i]] = '*';
            break;
        case '*': 
            map[r_location_i[i]][r_location_j[i]] = '*';
            break;
        default: cout << "what r u doin' ??";
            break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:36:41.597

好吧，对于初学者来说，看看这个：

```
int *r_location_i = new int[1], ...;
...
for(int i=1;i<=r_num;i++)
  {
    parameter_i =0;
    ...
    if(r_location_i[i]>player_i) parameter_i = -1; // reading outside the array
    ...
    r_location_i[i] = r_location_i[i]+parameter_i; // writing outside the array
    ...
  } 
```

回去研究数组。在您确切知道上面的代码有什么问题之前，**不要触摸另一个指针。**

# php - 保护 php 页面仅在浏览器中打开

> ID：12708845
> 
> 赞同：1
> 
> 时间：2012-10-03T12:47:55.813
> 
> 标签：php, jquery, ajax, json, permissions

我正在处理实时天气数据页面。我们的天气模块以 CSV 格式输出数据并将其存储在我的网络服务器上。然后，我使用 PHP 脚本将 CSV 转换为数组，然后将其编码为 JSON 并将其输出，以便我的 jQuery Ajax 脚本可以经常调用它以获取最新数据并更新页面。到目前为止，这工作得很好。

我的问题是，如何防止用于检索 JSON（上述 PHP 脚本的 URL）的 URL 在浏览器中打开和查看？我尝试调整权限，但没有成功。

提前感谢任何愿意提供帮助的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T12:51:49.330

没有真正的方法可以做到这一点，因为 Ajax 调用也来自浏览器。正确的浏览器调用和 Ajax 调用之间没有真正的区别。GET 调用是 GET 调用。

*编辑*

根据@Adeneo 的建议，通过某种密钥实现伪安全将是一种让人们更难查看页面的好方法，即使没有办法真正阻止调用。

此外，在您的 Ajax 调用中添加一个标头并在您的后端脚本中验证该标头的存在使得欺骗变得有点困难。

另一个想法是，如果每个页面视图只调用一次该服务，您可以在您的 javascript 中设置一个由服务器提供的密钥，以附加到您的 ajax 调用。调用服务器时，提供的密钥在使用后失效，防止有人使用相同的密钥调用服务两次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T12:53:56.213

没有办法（可靠地）识别浏览器，因为任何不是某种形式的“身份验证令牌”都可以被伪造。服务器依赖客户端诚实。

您可以检测请求是否是 ajax 请求。这是一种方法的链接：

[http://davidwalsh.name/detect-ajax](http://davidwalsh.name/detect-ajax)

他是这样做的：

```
/* AJAX check  */
if(!empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') {
    /* special ajax here */
    die($content);
} 
```

您将需要反转 if 中的语句，因为它`die()`是当请求是 ajax 时。

还有其他检测 ajax 的方法，它们都不是 100% 安全的，包括您设置一个 GET 变量来帮助您识别 ajax 调用（但是该 get 变量也可以通过浏览器通过地址行发送，非常好......你得到图片）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T12:55:22.700

简短的回答：你不能。

长答案：您可以实现一个简单的[Browser Sniffing](http://php.net/manual/en/function.get-browser.php)。或者搜索更高级的方法。

```
$browser = get_browser(null, true);
if ($browser[parent] == "whatever-identifies-clients-that-have-access") {
  //Code to output jSon here.
}
else {
  header('HTTP/1.1 403 Forbidden');
} 
```

但请注意，这不是安全性。最多，它会抛出一个障碍；但预防是不可能的。

**编辑**这假设客户端不是浏览器，我错误地假设某种（移动）客户端正在访问 JSON。当它是浏览器时，您不能拒绝访问。完全没有。AJAX 也来自那个浏览器。

# ruby-on-rails - 如果已经运行了来自不同分支的后续迁移，如何在 Heroku 上运行来自 Git 分支的迁移？

> ID：12708847
> 
> 赞同：1
> 
> 时间：2012-10-03T12:48:04.000
> 
> 标签：ruby-on-rails, ruby, git, heroku, database-migration

假设我创建了一个分支 ( `new_branch`)。在该分支中，创建了一个迁移 ( `migration_1`)。

后来，我切换回`master`. 然后我创建一个迁移（`migration_2`），推送到 Heroku，并在 Heroku 上运行迁移。

再后来，我合并`new_branch`到`master`，然后推`master`送到 Heroku。

当我尝试在 Heroku 上运行迁移时，不会`migration_1`被跳过并且不会运行，因为它是之前创建`migration_2`的，已经运行过？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T12:56:45.733

每个迁移都附加了一个迁移时间戳。成功应用的迁移列表存储在 Rails 应用程序内的模式表中。

当您运行时`migration_2`，此条目将添加到数据库中。合并时`migration_1`，Rails 将检测到由于模式表中缺少条目而尚未应用更改，并将运行它。

# android - 如何在android中解压缩包含名称中带有特殊字符的文件的zip文件？

> ID：12708849
> 
> 赞同：1
> 
> 时间：2012-10-03T12:48:07.413
> 
> 标签：android

如何以编程方式在 android 中解压缩包含名称中带有特殊字符的文件的 zip 文件？我的文件名类似于**<_Artist>Hello<_Artist>.txt**。

# eclipse - Mylyn 和 Bugzilla：任务初始化失败？

> ID：12708852
> 
> 赞同：0
> 
> 时间：2012-10-03T12:48:13.893
> 
> 标签：eclipse, bugzilla, mylyn

我正在尝试将 Mylyn（eclipse Juno）连接到我的 bugzilla 安装（版本 3.6.3.0-2）...我能够将 bugzilla 添加为任务存储库，但我无法添加任何任务。一旦我单击此 repo 的新任务，我就会收到此消息（甚至没有出现任务编辑器）：

任务初始化失败。提供的数据不足。

我在 Eclipse 错误日志中找不到任何内容。

知道出了什么问题吗？（谷歌搜索没有帮助）

**编辑**：

*   我已经验证了我在完成回购时的凭据
*   我创建了一个默认查询。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T18:15:26.000

我遇到了同样的问题并遇到了这篇文章。我按照 guido 的建议创建了一个查询 [右键单击任务存储库中的存储库 > 新查询]，并且能够通过任务列表区域创建新任务。右键单击任务存储库部分中的存储库本身仍然会产生该错误。

所以进入任务列表并在那里创建你的任务[单击新任务按钮]

# php - 确保 PHP 编译时启用了 php_mbstring.dll

> ID：12708855
> 
> 赞同：4
> 
> 时间：2012-10-03T12:48:25.200
> 
> 标签：php, mpdf, mbstring

我目前在使用 php 的应用程序中遇到错误。这是错误消息

```
Error - mPDF requires mb_string functions. Ensure that PHP is compiled with php_mbstring.dll enabled. 
```

我正在使用第三方库来生成 pdf 文件 (MPDF)。它在我的 loaclhost (windows) 上运行良好，但是当我们将它部署在 linux 服务器上时，它会引发上述错误。

任何人都可以帮助我了解发生了什么以及我该如何解决它。我们的 linux 服务器配置中似乎缺少 php_mbstring.dll。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T12:51:27.400

```
if (!function_exists("mb_check_encoding")) {
    die('mbstring extension is not enabled');
} 
```

如果您收到该错误，则从启用 mbstring 的源代码重新构建 PHP，或者 apt-get 将其包含在构建中

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-20T11:34:14.473

我在 CentOS Linux 上遇到了同样的问题。“yum install php-mbstring.x86_64”为我修复了它

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-15T16:20:35.180

在 Debian 或 Ubuntu 上，安装 php 时默认不会拉入 mbstring 包。您可以使用以下方法修复此 mPDF 错误：

```
apt install php-mbstring 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-11-12T05:48:52.633

编辑 php.ini 并`extension=php_mbstring.dll`删除`;`之后运行以下命令

对于 php7.0 `sudo apt-get install php7.0-mbstring` 对于 php5.6 `sudo apt-get install php5.6-mbstring`
为我工作:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-30T18:12:34.370

找到您的 php.ini，取消注释带有扩展名的行，然后重新启动服务器

# macos - 适用于 Mac 的 MongoHub mongo 数据库 GUI 不再有效

> ID：12708856
> 
> 赞同：4
> 
> 时间：2012-10-03T12:48:26.913
> 
> 标签：macos, mongodb, mongohub

安装在 Mac OS X 10.6.8 程序上的 MongoHub 在数据库管理方面存在多个问题（查询、编辑、添加、删除）。还有其他人在使用 MongoHub 时遇到过问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T12:55:58.187

**原始的 MongoHub 2.3.0 不再维护**，并且会在当前版本的 OS X 上崩溃。

[官方 MongoDB 网站上提到](http://www.mongodb.org/display/DOCS/Admin+UIs)的[Fotonauts MongoHub 分支](https://github.com/fotonauts/MongoHub-Mac)（当前为 2.7）按预期工作。

您可以[下载 Fotonaut 的 MongoHub](https://mongohub.s3.amazonaws.com/MongoHub.zip)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T12:47:26.203

如果你使用 Eclipse，那么你可以试试 MONJA 一个优秀的插件

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-26T11:52:25.587

找到[robomongo](http://robomongo.org/)。到目前为止绝对是最好的。有osx、linux和windows版本。

# redis - BinaryJedis 的管道支持

> ID：12708868
> 
> 赞同：0
> 
> 时间：2012-10-03T12:49:16.577
> 
> 标签：redis, jedis

在处理原始数据时，我正在使用 BinaryJedis 来存储和检索数据。使用 Jedis 管道，我可以将数据以 byte[] 形式保存在 redis 列表中。但是当我尝试使用“lindex”检索这个列表数据（一个条目）时，我没有找到任何接口，即 lindex 将 byte[] 作为输入但返回 Response

```
public Response<String> lindex(byte[] key, int index) {
    client.lindex(key, index);
    return getResponse(BuilderFactory.STRING);
} 
```

为什么没有返回Response的接口

# java - How to put two y-axis on a wicketcharts-highcharts chart in Java

> ID：12708869
> 
> 赞同：1
> 
> 时间：2012-10-03T12:49:16.760
> 
> 标签：java, highcharts, wicket

I am using wicket-charts to create a chart on a page. I'm trying to make a graph that looks a lot like the example on this page [http://code.google.com/p/wicket-charts/](http://code.google.com/p/wicket-charts/) I want two y-axis - one on each side of the graph. However the example code doesn't seem to do that. I can see how to do it in js from highcharts examples on [http://www.highcharts.com](http://www.highcharts.com) but I can't work out how to implement it using wicket-charts.

Please help!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T10:42:57.147

The latest code in the [wicket-charts](http://wicket-charts.googlecode.com/svn/trunk/wicked-charts-highcharts/src/main/java/com/googlecode/wicketcharts/highcharts/options/Options.java) svn has the class "Options" with a method called addyAxis.

```
/**
 * Adds an YAxis to the chart. You can use {@link #setyAxis(Axis)} if you want
 * to define a single axis only.
 * 
 * @param yAxis
 *          the YAxis to add.
 * @return the {@link Options} object for chaining.
 */
public Options addyAxis(final Axis yAxis) {
    if (this.getyAxis() == null) {
        this.setyAxis(new ArrayList<Axis>());
    }
    this.getyAxis().add(yAxis);
    return this;
} 
```

I think this method is in the wicked-charts-highcharts-1.3.0-SNAPSHOT.jar version, if not they might not have released it yet. Im pretty sure this is what you need.

# java - Semaphore.tryAcquire(...) 会阻塞或旋转直到获得许可？

> ID：12708871
> 
> 赞同：1
> 
> 时间：2012-10-03T12:49:34.717
> 
> 标签：java, concurrency, semaphore

如果不公平的 Semaphore 许可证不能立即获得，在许可证可用之前会`tryAcquire(long timeout, TimeUnit unit)`阻塞（即产生执行），还是会旋转直到许可证可用？

如果调用旋转并且系统有一堆信号量，那么系统是否会冒着大量旋转信号量的风险？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T12:55:32.830

根据 javadoc：

> 如果没有可用的许可，则当前线程将被禁用以用于线程调度目的并处于休眠状态，直到发生以下三种情况之一：
> 
> *   其他一些线程为此信号量调用 release() 方法，然后为当前线程分配一个许可；或者
> *   其他一些线程中断当前线程；或者
> *   指定的等待时间已过

这表明线程被标记为阻塞（作为灰色状态放入阻塞队列），这允许处理器执行其他工作。

# php - PHP查找多维数组的依赖关系

> ID：12708874
> 
> 赞同：0
> 
> 时间：2012-10-03T12:49:41.020
> 
> 标签：php, arrays, recursion, multidimensional-array

我能够遍历多维数组，但我还需要有关依赖关系的信息。这是我想要做的。我有一个这样的数组：

```
array(
    'top1' => 'sth',
    'top2' => array(
        'sub1' => 'sth',
        'sub2' => array(
            'line1' => 'sth',
            'line2' => 'sth'
        )
    )
    'top3' => 'sth'
) 
```

我能够遍历数组以获取所有键，结果是这样的：

```
array([0] => 'top1', [1] => 'top2', [2] => 'sub1', [3] => 'sub2', ...) 
```

但是，我需要知道当前元素的父级。所以我希望我能得到这样的东西：

```
array(
    [top1] => array('parent' => 0, 'id' => 1),
    [top2] => array('parent' => 0, 'id' => 2),
    [sub1] => array('parent' => 2, 'id' => 2.1),
    [sub2] => array('parent' => 2, 'id' => 2.2),
    [line1] => array('parent' => 2.2, 'id' => 2.2.1),
    ...
    [top3] => array('parent' => 0, 'id' => 3)
) 
```

我一直在尝试很多方法，但总是不能得到正确的结果。任何人都可以解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:35:34.463

这是一个适合您的工作示例

```
function traverse(array $input, $parent = null) {

    $result = array();
    $current = 1;
    foreach ($input as $key => $value) {

        $id = null !== $parent ? $parent . '.' . $current : $current;
        $result[$key] = array('parent' => null !== $parent ? $parent : 0, 'id' => $id);
        if (is_array($value)) {

            $result = array_merge($result, traverse($value, $id));
        }

        $current++;
    }

    return $result;
}

$input = array(
    'top1' => 'sth',
    'top2' => array(
        'sub1' => 'sth',
        'sub2' => array(
            'line1' => 'sth',
            'line2' => 'sth'
        )
    ),
    'top3' => 'sth'
);

echo '<pre>';
print_r($input);
echo '<hr>';
print_r(traverse($input));
echo '</pre>'; 
```

# jquery - IE 中的 jQuery 滑块

> ID：12708882
> 
> 赞同：1
> 
> 时间：2012-10-03T12:50:20.940
> 
> 标签：jquery, asp.net-mvc-3, jquery-slider

我正在使用一个包含很多 jquery 滑块的页面。在 Chrome、Firefox、Safari 中一切正常……但有时它在 Internet Explorer 中不起作用。有时我的意思是它真的是随机的。这真的很奇怪。大多数时候我得到所有的滑块，有时我没有得到，有时得到一些滑块。

这是一个 ASP.NET MVC 3 项目，我正在使用一个带有多个 EditorTemplate 的视图。视图内和编辑器模板内有 jquery 代码。（我只是提到这一点，看看这是否可能是一个问题）

有没有人见过这种行为？

**编辑**

这是我的代码。

我的观点：

```
 <script type="text/javascript">
    $(document).ready(function () {
        $(".guideSlider").slider({
            range: "min",
            value: 0,
            min: 0,
            max: 7,
            step: 1,
            disabled: true,
            animate: true
        });
        $(".average").slider({
            range: "min",
            min: 0,
            max: 7,
            step: 0.1,
            animate: true,
            disabled: true
        });
        var current = 0;
        var currentPage = 1;
        $(".next").click(function (e) {
            e.preventDefault();
            if (submitForm(currentPage)) {
                currentPage++;
                current += 600;
                $('#wrapper').animate({
                    scrollLeft: current
                }, 1000);
            }
            return false;
        });

        $("#toOpenQuestions").click(function (e) {
            if (!submitForm(currentPage)) {
                e.preventDefault();
                return false;
            }
            return true;
        });

        $(".previous").click(function (e) {
            e.preventDefault();
            currentPage--;
            current -= 600;
            $('#wrapper').animate({
                scrollLeft: current
            }, 1000);
            return false;
        });
        $(".matrixItem .slider").bind("slidestop", function () {
            var competenceId = $(this).parents("div[id$=competence]").attr("id");
            setAverage(competenceId);
        });
        $("form").submit(function () {
            $.ajax({
                url: this.action,
                type: this.method,
                data: $(this).serialize()
            });
            return false;
        });
    });

    function setAverage(competenceId) {
        var counter = 0;
        var value = 0;
        $("#" + competenceId + " div.matrixItem div.slider").each(function () {
            var itemValue = $(this).slider("value");
            if (itemValue > 0) {
                counter++;
                value += itemValue;
            }
        });
        if (counter > 0)
            value = value / counter;
        $("#" + competenceId + " div.ui-state-active div.average").slider("value", value);
    }

    function submitForm(currentPage) {
        var valid = true;
        $("#page" + currentPage + " .competenceWrapper").each(function () {
            var counter = 0;
            $(this).children("div.matrixItem").children("div.slider").each(function () {
                var itemValue = $(this).slider("value");
                if (itemValue > 0) {
                    counter++;
                }
            });
            if (counter < 2) valid = false;
        });
        if (valid)
            $("#matrixForm").submit();
        else
            alert("You have to provide a score for at least 2 items per Competence");

        return valid;
    }

</script>
<style type="text/css">
    .ui-slider-handle
    {
        z-index: 101 !important;
    }
</style>
<div class="myVdp">
    <div id="wrapper">
        <div id="mask">
            @using (Html.BeginForm("Matrix", "Home", FormMethod.Post, new { id = "matrixForm" }))
            {
                @Html.HiddenFor(m => m.RequestId)
                @Html.EditorFor(m => m.Pages)
            }
        </div>
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function () {
        $("div[id$=competence]").each(function () {
            var competenceId = $(this).attr("id");
            setAverage(competenceId);
        });
    });
</script> 
```

MatrixPage Editor模板

```
 @{ 
    string pageId = "page" + Model.PageNumber;
    string progressBarId = "progressBar" + Model.PageNumber;
    string guideClass = (Model.PageNumber % 2 == 0) ? "normal" : "flipBg";
}
<div id="@pageId" class="item">
    <script type="text/javascript">
        $(document).ready(function () {
            var value = ((@Model.PageNumber-1)/@ViewBag.TotalPages)*100;
            $("#@progressBarId").progressbar({ value: value });
        });     
    </script>
    <div id="guideBgColor" class="@guideClass">
        <div id="guideBgImage" class="@guideClass">
            <div id="guide">
                <span id="zero">No score</span> <span id="one">High need for improvement</span>
                <span id="seven">Being a grandmaster</span>
                <div class="sliderBackground">
                    &nbsp;</div>
                <div class="slider guideSlider">
                </div>
            </div>
            <ul id="score">
                <li>0</li>
                <li>1</li>
                <li>2</li>
                <li>3</li>
                <li>4</li>
                <li>5</li>
                <li>6</li>
                <li class="lastItem">7</li>
            </ul>
        </div>
    </div>
    @{
        <div class="innerPage">
            @Html.EditorFor(m => m.MatrixCompetences)
        </div>
        <div class="progressbar" id="@progressBarId">
        </div>
        if (Model.PageNumber > 1)
        {
            string previousPage = "page" + (Model.PageNumber - 1);
        <a href="#@previousPage" class="previous">
            <img src="@Url.Content("~/Content/Images/Left.png")" alt="previous" /></a>
        }

        if (Model.PageNumber < ViewBag.TotalPages)
        {
            string nextPage = "page" + (Model.PageNumber + 1);
        <a href="#@nextPage" class="next">
            <img src="@Url.Content("~/Content/Images/right.png")" alt="next" /></a>
        }
        else
        {
        <a href="@Url.Action("MatrixOpenQuestions", "Home", new { requestId = @ViewBag.requestId })" id="toOpenQuestions">
            <img src="@Url.Content("~/Content/Images/right.png")" alt="next" /></a>
        }
    }
</div> 
```

矩阵能力编辑器模板

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#@Model.CompetenceId.ToString()_competence .slider .ui-slider-range").css("background", "@Model.ColorHex");
        $("#@Model.CompetenceId.ToString()_competence .slider .ui-slider-handle").css("border-color", "@Model.ColorHex");
    });                     
</script>
<div id="@Model.CompetenceId.ToString()_competence" class="competenceWrapper">
    <div class="ui-state-active competence">
        <div class="competenceText">@Model.Text</div>
        <div class="slider average">
        </div>
    </div>
    @Html.EditorFor(m => Model.MatrixItems)
</div> 
```

MatrixItem Editor模板

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#@Model.ItemId").slider({
            range: "min",
            value: @Model.Score,
            min: 0,
            max: 7,
            step: 1,
            animate: true,
            slide: function(event,ui) {
                $(this).siblings("input[id$=Score]").val(ui.value);
            }
        });
        $("#@Model.ItemId  .ui-slider-range").css("background", "@Model.ColorHex");
        $("#@Model.ItemId  .ui-slider-handle").css("border-color", "@Model.ColorHex");
    });
</script>
<div class="matrixItem">
    <div class="itemText">
        @Model.Text</div>
    <div class="sliderBackground">
        &nbsp;</div>
    <div id="@Model.ItemId" class="slider">
    </div>
    @Html.HiddenFor(m=>Model.ItemId)
    @Html.HiddenFor(m => Model.Score)
</div> 
```

**编辑**

这是一个屏幕截图。可以看到生成了几个滑块，但是在 3 之后突然就不行了。 ![截屏](../Images/0beebd9e322c7560161510041e23a509.png)

按F5后，它显示了这个。从一开始就应该如此。

![刷新后](../Images/10bfbe77c9dde1a799c0f156e88cef88.png)

这是“实时”代码的一页。

```
<div id="page1" class="item">
    <script type="text/javascript">
        $(document).ready(function () {
            var value = ((1-1)/11)*100;
            $("#progressBar1").progressbar({ value: value });
        });     
    </script>
    <div id="guideBgColor" class="flipBg">
        <div id="guideBgImage" class="flipBg">
            <div id="guide">
                <span id="zero">No score</span> <span id="one">High need for improvement</span>
                <span id="seven">Being a grandmaster</span>
                <div class="sliderBackground">
                    &nbsp;</div>
                <div class="slider guideSlider">
                </div>
            </div>
            <ul id="score">
                <li>0</li>
                <li>1</li>
                <li>2</li>
                <li>3</li>
                <li>4</li>
                <li>5</li>
                <li>6</li>
                <li class="lastItem">7</li>
            </ul>
        </div>
    </div>
        <div class="innerPage">
            <script type="text/javascript">
    $(document).ready(function () {
        $("#1_competence .slider .ui-slider-range").css("background", "#004c97");
        $("#1_competence .slider .ui-slider-handle").css("border-color", "#004c97");
    });                     
</script>
<div id="1_competence" class="competenceWrapper">
    <div class="ui-state-active competence">
        <div class="competenceText">Structured</div>
        <div class="slider average">
        </div>
    </div>
    <script type="text/javascript">
    $(document).ready(function() {
        $("#1").slider({
            range: "min",
            value: 0,
            min: 0,
            max: 7,
            step: 1,
            animate: true,
            slide: function(event,ui) {
                $(this).siblings("input[id$=Score]").val(ui.value);
            }
        });
        $("#1  .ui-slider-range").css("background", "#004c97");
        $("#1  .ui-slider-handle").css("border-color", "#004c97");
    });
</script>
<div class="matrixItem">
    <div class="itemText">
        He is organised and works in a structured manner.</div>
    <div class="sliderBackground">
        &nbsp;</div>
    <div id="1" class="slider">
    </div>
    <input data-val="true" data-val-number="The field ItemId must be a number." data-val-required="The ItemId field is required." id="Pages_0__MatrixCompetences_0__MatrixItems_0__ItemId" name="Pages[0].MatrixCompetences[0].MatrixItems[0].ItemId" type="hidden" value="1" />
    <input data-val="true" data-val-number="The field Score must be a number." data-val-required="The Score field is required." id="Pages_0__MatrixCompetences_0__MatrixItems_0__Score" name="Pages[0].MatrixCompetences[0].MatrixItems[0].Score" type="hidden" value="0" />
</div>
<script type="text/javascript">
    $(document).ready(function() {
        $("#2").slider({
            range: "min",
            value: 0,
            min: 0,
            max: 7,
            step: 1,
            animate: true,
            slide: function(event,ui) {
                $(this).siblings("input[id$=Score]").val(ui.value);
            }
        });
        $("#2  .ui-slider-range").css("background", "#004c97");
        $("#2  .ui-slider-handle").css("border-color", "#004c97");
    });
</script>
<div class="matrixItem">
    <div class="itemText">
        He sets priorities and deadlines.</div>
    <div class="sliderBackground">
        &nbsp;</div>
    <div id="2" class="slider">
    </div>
    <input data-val="true" data-val-number="The field ItemId must be a number." data-val-required="The ItemId field is required." id="Pages_0__MatrixCompetences_0__MatrixItems_1__ItemId" name="Pages[0].MatrixCompetences[0].MatrixItems[1].ItemId" type="hidden" value="2" />
    <input data-val="true" data-val-number="The field Score must be a number." data-val-required="The Score field is required." id="Pages_0__MatrixCompetences_0__MatrixItems_1__Score" name="Pages[0].MatrixCompetences[0].MatrixItems[1].Score" type="hidden" value="0" />
</div>
<script type="text/javascript">
    $(document).ready(function() {
        $("#3").slider({
            range: "min",
            value: 0,
            min: 0,
            max: 7,
            step: 1,
            animate: true,
            slide: function(event,ui) {
                $(this).siblings("input[id$=Score]").val(ui.value);
            }
        });
        $("#3  .ui-slider-range").css("background", "#004c97");
        $("#3  .ui-slider-handle").css("border-color", "#004c97");
    });
</script>
<div class="matrixItem">
    <div class="itemText">
        He plans well in advance.</div>
    <div class="sliderBackground">
        &nbsp;</div>
    <div id="3" class="slider">
    </div>
    <input data-val="true" data-val-number="The field ItemId must be a number." data-val-required="The ItemId field is required." id="Pages_0__MatrixCompetences_0__MatrixItems_2__ItemId" name="Pages[0].MatrixCompetences[0].MatrixItems[2].ItemId" type="hidden" value="3" />
    <input data-val="true" data-val-number="The field Score must be a number." data-val-required="The Score field is required." id="Pages_0__MatrixCompetences_0__MatrixItems_2__Score" name="Pages[0].MatrixCompetences[0].MatrixItems[2].Score" type="hidden" value="0" />
</div>
<script type="text/javascript">
    $(document).ready(function() {
        $("#4").slider({
            range: "min",
            value: 0,
            min: 0,
            max: 7,
            step: 1,
            animate: true,
            slide: function(event,ui) {
                $(this).siblings("input[id$=Score]").val(ui.value);
            }
        });
        $("#4  .ui-slider-range").css("background", "#004c97");
        $("#4  .ui-slider-handle").css("border-color", "#004c97");
    });
</script>
<div class="matrixItem">
    <div class="itemText">
        He arrives on time.</div>
    <div class="sliderBackground">
        &nbsp;</div>
    <div id="4" class="slider">
    </div>
    <input data-val="true" data-val-number="The field ItemId must be a number." data-val-required="The ItemId field is required." id="Pages_0__MatrixCompetences_0__MatrixItems_3__ItemId" name="Pages[0].MatrixCompetences[0].MatrixItems[3].ItemId" type="hidden" value="4" />
    <input data-val="true" data-val-number="The field Score must be a number." data-val-required="The Score field is required." id="Pages_0__MatrixCompetences_0__MatrixItems_3__Score" name="Pages[0].MatrixCompetences[0].MatrixItems[3].Score" type="hidden" value="0" />
</div>

</div>
<script type="text/javascript">
    $(document).ready(function () {
        $("#2_competence .slider .ui-slider-range").css("background", "#004c97");
        $("#2_competence .slider .ui-slider-handle").css("border-color", "#004c97");
    });                     
</script>
<div id="2_competence" class="competenceWrapper">
    <div class="ui-state-active competence">
        <div class="competenceText">Result Oriented</div>
        <div class="slider average">
        </div>
    </div>
    <script type="text/javascript">
    $(document).ready(function() {
        $("#5").slider({
            range: "min",
            value: 0,
            min: 0,
            max: 7,
            step: 1,
            animate: true,
            slide: function(event,ui) {
                $(this).siblings("input[id$=Score]").val(ui.value);
            }
        });
        $("#5  .ui-slider-range").css("background", "#004c97");
        $("#5  .ui-slider-handle").css("border-color", "#004c97");
    });
</script>
<div class="matrixItem">
    <div class="itemText">
        He sets achievable goals/priorities.</div>
    <div class="sliderBackground">
        &nbsp;</div>
    <div id="5" class="slider">
    </div>
    <input data-val="true" data-val-number="The field ItemId must be a number." data-val-required="The ItemId field is required." id="Pages_0__MatrixCompetences_1__MatrixItems_0__ItemId" name="Pages[0].MatrixCompetences[1].MatrixItems[0].ItemId" type="hidden" value="5" />
    <input data-val="true" data-val-number="The field Score must be a number." data-val-required="The Score field is required." id="Pages_0__MatrixCompetences_1__MatrixItems_0__Score" name="Pages[0].MatrixCompetences[1].MatrixItems[0].Score" type="hidden" value="0" />
</div>
<script type="text/javascript">
    $(document).ready(function() {
        $("#6").slider({
            range: "min",
            value: 0,
            min: 0,
            max: 7,
            step: 1,
            animate: true,
            slide: function(event,ui) {
                $(this).siblings("input[id$=Score]").val(ui.value);
            }
        });
        $("#6  .ui-slider-range").css("background", "#004c97");
        $("#6  .ui-slider-handle").css("border-color", "#004c97");
    });
</script>
<div class="matrixItem">
    <div class="itemText">
        He focuses on the result.</div>
    <div class="sliderBackground">
        &nbsp;</div>
    <div id="6" class="slider">
    </div>
    <input data-val="true" data-val-number="The field ItemId must be a number." data-val-required="The ItemId field is required." id="Pages_0__MatrixCompetences_1__MatrixItems_1__ItemId" name="Pages[0].MatrixCompetences[1].MatrixItems[1].ItemId" type="hidden" value="6" />
    <input data-val="true" data-val-number="The field Score must be a number." data-val-required="The Score field is required." id="Pages_0__MatrixCompetences_1__MatrixItems_1__Score" name="Pages[0].MatrixCompetences[1].MatrixItems[1].Score" type="hidden" value="0" />
</div>
<script type="text/javascript">
    $(document).ready(function() {
        $("#7").slider({
            range: "min",
            value: 0,
            min: 0,
            max: 7,
            step: 1,
            animate: true,
            slide: function(event,ui) {
                $(this).siblings("input[id$=Score]").val(ui.value);
            }
        });
        $("#7  .ui-slider-range").css("background", "#004c97");
        $("#7  .ui-slider-handle").css("border-color", "#004c97");
    });
</script>
<div class="matrixItem">
    <div class="itemText">
        He meets his deadlines.</div>
    <div class="sliderBackground">
        &nbsp;</div>
    <div id="7" class="slider">
    </div>
    <input data-val="true" data-val-number="The field ItemId must be a number." data-val-required="The ItemId field is required." id="Pages_0__MatrixCompetences_1__MatrixItems_2__ItemId" name="Pages[0].MatrixCompetences[1].MatrixItems[2].ItemId" type="hidden" value="7" />
    <input data-val="true" data-val-number="The field Score must be a number." data-val-required="The Score field is required." id="Pages_0__MatrixCompetences_1__MatrixItems_2__Score" name="Pages[0].MatrixCompetences[1].MatrixItems[2].Score" type="hidden" value="0" />
</div>

</div>

        </div>
        <div class="progressbar" id="progressBar1">
        </div> 
```

希望你们能帮助我。因为我不知道该尝试什么了。

亲切的问候蒂姆

# c# - 如何获取电子邮件的“日期”？

> ID：12708886
> 
> 赞同：10
> 
> 时间：2012-10-03T12:50:30.817
> 
> 标签：c#, email, datetime, mailmessage

我创建了一个从邮件服务器获取电子邮件的应用程序。我使用“System.Net.Mail.MailMessage”接收电子邮件。现在我想获取收件箱中每封电子邮件的“日期和时间”。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-03T12:58:33.827

你会想看看这里的电子邮件标题是一些文档

[http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.headers.aspx](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.headers.aspx)

```
message.Headers["Date"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-17T14:32:49.697

我检查了 MailMessageObject 并发现了这个：

```
 Headers=HeaderCollection(5) 
  {
    "Uid",
    "DateCreated",
    "DateReceived",
    "Date",
    "IsRead" 
```

这意味着您总共可以使用三个选项。输出将采用字符串格式。

```
message.Headers["DateCreated"];
message.Headers["DateReceived"];
message.Headers["Date"]; 
```

# android - YouTube 视频未在 WebView 中播放 - Android

> ID：12708890
> 
> 赞同：46
> 
> 时间：2012-10-03T12:50:46.637
> 
> 标签：android, video, youtube, android-webview

我想在 WebView 中播放 YouTube 视频，WebView 显示带有播放按钮的视频的第一个外观，但是在单击播放按钮后启动进度条并在 2-3 秒后停止进度条并且屏幕空白为黑色。

图 1：带播放按钮的视频第一眼

Image2：点击播放按钮后屏幕变为空白。

请！帮助我为什么视频没有开始。

图片：1![这是网页视图的第一眼](../Images/5911a08bc840e26da19ca5a6d78ba707.png)

图片：2 ![在此处输入图像描述](../Images/815a8d0b904eca38a79b30102ba09d94.png)

这是我在 webview 中播放 YouTubeVideo 的源代码。请帮助我...

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    WebView wv = (WebView) findViewById(R.id.webView1);
    wv.getSettings().setJavaScriptEnabled(true);
    wv.getSettings().setPluginsEnabled(true);
    final String mimeType = "text/html";
    final String encoding = "UTF-8";
    String html = getHTML();
    wv.loadDataWithBaseURL("", html, mimeType, encoding, "");
}

public String getHTML() {
    String html = "<iframe class=\"youtube-player\" style=\"border: 0; width: 100%; height: 95%; padding:0px; margin:0px\" id=\"ytplayer\" type=\"text/html\" src=\"http://www.youtube.com/embed/"
            + "J2fB5XWj6IE"
            + "?fs=0\" frameborder=\"0\">\n"
            + "</iframe>\n";
    return html;
} 
```

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-10-05T18:09:13.800

在将 HTML 内容加载到 WebView 之前添加这些行。

```
wv.setWebChromeClient(new WebChromeClient() {
}); 
```

从文档中：

> 为了在您的应用程序中支持内联 HTML5 视频，您需要打开硬件加速，**并设置一个 WebChromeClient**。对于全屏支持，需要实现 onShowCustomView(View, WebChromeClient.CustomViewCallback) 和 onHideCustomView()，getVideoLoadingProgressView() 是可选的。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-12T01:00:29.213

需要以下代码来显示由 web 核心框架启动的视频播放器。整个流程的关键是 VideoView 被传递回 WebChromeClient 并且您需要将该视图附加到您的视图层次结构中。

*我通过查看作为 AOSP 的一部分提供的浏览器源代码来组装它。*

此代码引用了 4 个可能不明显的视图。视图层次结构是：

*   `FrameLayout mContentView`（根）
*   `WebView mWebView`（mContentView 的子级）
*   `FrameLAyout mCustomViewContainer`（mContentView 的子级）
*   `View mCustomView`（mCustomViewContainer 的子级）

视图被配置为设置容器活动的一部分。

```
<FrameLayout
    android:id="@+id/fullscreen_custom_content"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#FF000000"/>

    <FrameLayout
        android:id="@+id/main_content"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1" >

        <WebView
            android:id="@+id/webView"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" />
    </FrameLayout>
</FrameLayout> 
```

在您的活动中`onCreate`：

```
 mContentView = (FrameLayout) findViewById(R.id.main_content);
    mWebView = (WebView) findViewById(R.id.webView);
    mCustomViewContainer = (FrameLayout) findViewById(R.id.fullscreen_custom_content); 
```

注册一个`WebChromeClient`。`mWebView`该客户端应覆盖以下 2 - 4 个方法：

```
void onShowCustomView(View view, WebChromeClient.CustomViewCallback callback)
{
    // if a view already exists then immediately terminate the new one
    if (mCustomView != null)
    {
        callback.onCustomViewHidden();
        return;
    }

    // Add the custom view to its container.
    mCustomViewContainer.addView(view, COVER_SCREEN_GRAVITY_CENTER);
    mCustomView = view;
    mCustomViewCallback = callback;

    // hide main browser view
    mContentView.setVisibility(View.GONE);

    // Finally show the custom view container.
    mCustomViewContainer.setVisibility(View.VISIBLE);
    mCustomViewContainer.bringToFront();
}

void onHideCustomView()
{
    if (mCustomView == null)
        return;

    // Hide the custom view.
    mCustomView.setVisibility(View.GONE);
    // Remove the custom view from its container.
    mCustomViewContainer.removeView(mCustomView);
    mCustomView = null;
    mCustomViewContainer.setVisibility(View.GONE);
    mCustomViewCallback.onCustomViewHidden();

    // Show the content view.
    mContentView.setVisibility(View.VISIBLE);
}

public Bitmap getDefaultVideoPoster()
{
    if (mDefaultVideoPoster == null)
    {
        mDefaultVideoPoster = BitmapFactory.decodeResource(getResources(), R.drawable.default_video_poster);
    }
    return mDefaultVideoPoster;
}

public View getVideoLoadingProgressView()
{
    if (mVideoProgressView == null)
    {
        LayoutInflater inflater = LayoutInflater.from(this);
        mVideoProgressView = inflater.inflate(R.layout.video_loading_progress, null);
    }
    return mVideoProgressView;
} 
```

您可能还想添加活动生命周期绑定，例如：

```
@Override
protected void onStop()
{
    super.onStop();
    if (mCustomView != null)
    {
        if (mCustomViewCallback != null)
            mCustomViewCallback.onCustomViewHidden();
        mCustomView = null;
    }
}

@Override
public void onBackPressed()
{
    if (mCustomView != null)
    {
        onHideCustomView();
    } else
    {
        finish();
    }
} 
```

到您的活动，以在活动停止或按下后退按钮时隐藏视频。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-02-07T04:45:58.997

添加`webview.setWebChromeClient(new WebChromeClient());`并为您的视频启用插件添加：

```
if (Build.VERSION.SDK_INT < 8) {
            webview.getSettings().setPluginsEnabled(true);
        } else {
            webview.getSettings().setPluginState(PluginState.ON);
        } 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-09T18:43:31.603

在移动设备上流式传输的 youtbe 视频存在一些问题。如果您直接尝试在 Web 视图中加载 URL 并运行它，则视频将无法播放。解决此问题的一种困难方法是在视频视图中流式传输视频。我没有尝试过，但可以这样做。
播放 youtube 视频的其他方式，我称之为更简单的方式是将 web 视图设置中的用户代理从移动设备更改为桌面。用户代理指示将运行 youtube 视频的设备类型，因此服务器会发送该类型的网页。这样，可以流式传输和播放 youtube 视频。您可以这样做：

```
public static final int USER_MOBILE  = 0;
public static final int USER_DESKTOP = 1;
wv.getSettings().setUserAgent(USER_DESKTOP);   // 1 is for the desktop 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-27T14:48:10.387

我复制了提问者的代码，它对我有用....我想你必须安装 flash payer .. di u?? 你有没有添加互联网权限？？？

顺便说一句，我的代码在这里...

```
package com.example.youtube;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.os.Handler;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ProgressBar;
import android.widget.Toast;
import android.util.Log;
import android.view.Menu;
import android.view.Window;
import android.view.WindowManager;
import android.webkit.DownloadListener;
import android.webkit.WebChromeClient;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebChromeClient;
import android.webkit.WebViewClient;
import android.view.View;
import android.view.ViewGroup;
import android.view.View.OnClickListener;
import android.widget.AbsoluteLayout;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.IntentFilter;
import android.os.AsyncTask;
import android.util.Log;
import android.widget.TextView;

import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
public class MainActivity extends Activity{

    @SuppressLint("SetJavaScriptEnabled")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        getWindow().requestFeature(Window.FEATURE_PROGRESS);

            setContentView(R.layout.activity_main);

final ProgressBar Pbar;

Pbar = (ProgressBar) findViewById(R.id.pB4);
WebView wv = (WebView) findViewById(R.id.webVie1);
//wv.setWebViewClient(new Callback());
WebSettings webSettings = wv.getSettings();
webSettings.setBuiltInZoomControls(true);
webSettings.setJavaScriptEnabled(true);
//wv.setBackgroundColor(0x919191);
final String mimeType = "text/html";
final String encoding = "UTF-8";
String html = getHTML();
wv.loadDataWithBaseURL("", html, mimeType, encoding, "");

final Activity activity = this;

wv.setWebChromeClient(new WebChromeClient() {
       public void onProgressChanged(WebView view, int progress) {
         // Activities and WebViews measure progress with different scales.
         // The progress meter will automatically disappear when we reach 100%

         activity.setProgress(progress * 100);
         {
             if(progress < 100 && Pbar.getVisibility() == ProgressBar.GONE){
                 Pbar.setVisibility(ProgressBar.VISIBLE);

             }
             Pbar.setProgress(progress);
             if(progress == 100) {
                 Pbar.setVisibility(ProgressBar.GONE);

             }
          }
       }
     });
     wv.setWebViewClient(new WebViewClient() {
       public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
         Toast.makeText(activity, "Oh no! " + description, Toast.LENGTH_LONG).show();
       }
     });
     wv.setDownloadListener(new DownloadListener()
     {

        public void onDownloadStart(String url, String userAgent,String contentDisposition, String mimetype,long contentLength)
         {
             Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));

             startActivity(intent);   
         }

     });

}

    private String getHTML() {
        // TODO Auto-generated method stub
        String html1 = "<iframe class=\"youtube-player\" style=\"border: 0; width: 100%; height: 95%; padding:0px; margin:0px\" id=\"ytplayer\" type=\"text/html\" src=\"http://www.youtube.com/embed/"
                + "J2fB5XWj6IE"
                + "?fs=0\" frameborder=\"0\">\n"
                + "</iframe>\n";
        return html1;
    }

  /*  public void onPause()
    {
        super.onPause();
        System.exit(0);
    }*/

} 
```

布局文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<LinearLayout
    android:id="@+id/page_buttons"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal"
    android:orientation="horizontal" >

</LinearLayout>

<WebView
    android:id="@+id/webVie1"
    android:layout_width="316dp"
    android:layout_height="392dp"
    android:layout_alignParentBottom="true"
    android:layout_alignParentTop="true"
    android:layout_weight="0.99" />

<ProgressBar
    android:id="@+id/pB4"
    style="?android:attr/progressBarStyleHorizontal"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"/> />
</LinearLayout> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-12-06T09:34:08.003

以下适用于 Android 10。在您的 Android 活动/片段中加载“WebView”。

检查[这个](https://github.com/mayurik18/Play-Youtube-Video-In-Android-App)是否有工作项目。

```
private fun loadVideo(webView: WebView) {

    val videoUrl = "https://www.youtube.com/embed/5jJ-e278BFY"

    val embedString = "<iframe  src=\"$videoUrl\" frameborder=\"0\" allowfullscreen></iframe>"
    webView.webChromeClient = WebChromeClient()
    val webSettings = webView.settings
    webSettings.javaScriptEnabled = true
    webView.settings.loadWithOverviewMode = true

    var text = "<html><body style=\"text-align:justify;\">"
    text += embedString
    text += "</body></html>"
    webView.loadData(text, "text/html", "utf-8")
} 
```

它使用[IFrame](https://developers.google.com/youtube/iframe_api_reference) Player API。width (number) -- 视频播放器的宽度。默认值为 640。 height (number) – 视频播放器的高度。默认值为 390。 videoId (string) – 标识播放器将加载的视频的 YouTube 视频 ID。

下面是用户界面 xml

```
 <WebView
        android:id="@+id/webView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="40dp"
        android:visibility="visible"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintTop_toBottomOf="@+id/youtubeVideoFrameSubText" /> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-10T06:08:27.420

你为什么要在 webview 中播放你的视频？您可以使用此意图播放它

```
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(stringUrl))); 
```

否则，如果您想在 webView 中播放，请点击此链接

[http://www.stackoverflow.com/questions/9565533/android-how-to-play-youtube-video-in-webview?rq=1](http://www.stackoverflow.com/questions/9565533/android-how-to-play-youtube-video-in-webview?rq=1)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-05-09T14:07:05.063

我的 webview 启用了 javascript 但删除使视频正常工作

```
 webView.setLayerType(View.LAYER_TYPE_SOFTWARE, null); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-05-16T23:08:28.727

```
myWebView.getSettings().setDomStorageEnabled(true); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-01-06T23:52:46.557

对我来说，问题是设置`cleartextTrafficPermitted`为`false`. 出于某种原因，设置此项不会在 URL 播放 YouTube 视频`http://www.youtube-nocookie.com/embed/%s`，其中`%s`是 YouTube 视频的 ID。

解决方案是在**network_security_config.xml**文件中包含以下内容。

```
<?xml version="1.0" encoding="utf-8"?>
<network-security-config>
    <base-config cleartextTrafficPermitted="false">
    </base-config>
    <domain-config cleartextTrafficPermitted="true">
        <domain includeSubdomains="true">youtube-nocookie.com</domain>
    </domain-config>
</network-security-config> 
```

**在AndroidManifest.xml**、标签和参数中引用**了 network_security_config.xml**文件。**`<application>``networkSecurityConfig`**

 **希望这可以节省某人的时间！

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2013-01-24T12:48:38.470

试试这个

```
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(stringUrl))); 
```**

# c# - C# MSScriptControl 使数组可见

> ID：12708891
> 
> 赞同：1
> 
> 时间：2012-10-03T12:50:52.330
> 
> 标签：c#, arrays, msscriptcontrol

我正在使用 MS ScriptControl 向我的应用程序添加脚本。一切正常，除非我有一个对具有数组的脚本引擎可见的类。我无法从脚本访问数组元素。

示例 C# 类：

```
using System.Runtime.InteropServices;

namespace my_app
{
    [ComVisible(true)]
    public class test
    {
        public string this_works = "Hello";
        public string[] no_workey = new string[4];

        public test()
        {
            no_workey[0] = "I";
            no_workey[1] = "can't";
            no_workey[2] = "see";
            no_workey[3] = "you!";
        }
    }
} 
```

我将类添加到脚本引擎：

```
script.AddObject("test", new test(), true); 
```

我已经内置了一些功能来打印一个对象。这是我的结果：

```
test.this_works   ->  "Hello"
test.no_workey    -> System.String[]
test.no_workey[0] -> 'test.no_workey.0' is null or not an object. 
```

有谁知道我该怎么做？谢谢！

# php - Oracle 应用程序 R12 和 PHP

> ID：12708894
> 
> 赞同：0
> 
> 时间：2012-10-03T12:51:02.797
> 
> 标签：php, oracle

我的一位客户要求我做房产列表网站，他想将他的 oracle 数据库集成到这个网站，但我对 Oracle 不了解，是否可以将 oracle r12 数据库与 PHP 集成？任何建议、教程和示例都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:13:05.930

正如@APC 所指出的，Oracle 有关于将 PHP 与 Oracle 数据库结合使用的良好文档。但是，在连接到 E-Business Suite 数据库时，您需要非常注意安全性。R12 实例的主机将拥有一位经验丰富的 DBA，您可以在不损害 EBS 安全性的情况下进行访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T21:32:18.673

我们使用 PHP 和 oracle 已有 10 年了，还不错:-) PHP 有 oci 驱动程序实现，我认为在新的 PHP 中它是 OCI8。

关于 PHP -> oracle 的最佳手册在这里[http://www.oracle.com/technetwork/topics/php/underground-php-oracle-manual-098250.html](http://www.oracle.com/technetwork/topics/php/underground-php-oracle-manual-098250.html)。

# batch-file - 在批处理脚本中显示两个日期之间的文件

> ID：12708895
> 
> 赞同：1
> 
> 时间：2012-10-03T12:51:04.563
> 
> 标签：batch-file, dir

我需要使用批处理脚本在文件夹中显示两个日期之间的文件（例如日期 23-sep-2012 到 30-sep-2012）。

该文件夹中大约有 50 万个文件。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:22:03.210

批量处理文件时间戳是一件痛苦的事情。最简单的解决方案是使用 WMIC。

这是一个简单的脚本，可以做你想做的事。它可以很容易地修改为使用 CreationDate 而不是 LastModified 日期。您还可以在输出中添加和减去其他列。键入`wmic datafile get /?`以获取可用列的列表（删除名称中的空格）。如果您希望结果按日期排序，则可以将输出通过管道传输到 SORT。

日期必须以 YYYYMMDD 格式指定。

```
@echo off
:listFilesBetweenDates  Path  StartDate  EndDate
::
::  List files found in directory Path with last modified date between
::  StartDate and EndDate
::
::  path = Directory to list. Use . for current directory
::
::  startDate = YYYYMMDD format
::
::  endDate = YYYYMMDD format
::
setlocal
set "drive=%~d1"
set "folder=%~pnx1\"
set /a "start=%~2, end=%~3+1"
wmic datafile where "drive='%drive%' and path='%folder:\=\\%' and lastModified>='%start%' and lastModified<'%end%'" get lastModified, name 
```

示例用法 - 列出当前目录中 07-SEP-2012 和 17-SEP-2012 之间的文件

```
D:\test>listFilesBetweenDates . 20120907 20120917
LastModified               Name
20120917155412.408435-240  d:\test\idlist.txt
20120910160033.573531-240  d:\test\input.txt
20120907180451.138275-240  d:\test\myurls.txt
20120911115129.949457-240  d:\test\replace.bat
20120917155853.541247-240  d:\test\temp1.txt
20120917162208.635197-240  d:\test\temp2.txt
20120917162217.595287-240  d:\test\temp3.txt
20120911141557.105798-240  d:\test\test,2.txt
20120910160622.664376-240  d:\test\test.vbs
20120907161948.016121-240  d:\test\test3.bat
20120910153717.558353-240  d:\test\test3.txt 
```

示例用法：列出临时目录中 26-SEP-2012 和 27-SEP-2012 之间的文件，按最后修改日期升序排序

```
D:\test>listFilesBetweenDates "%temp%" 20100926 20120927 | sort

20120926085420.368034-240  d:\users\xxxxxx\temp\~df8a4e7af0245496b2.tmp
20120926085422.630049-240  d:\users\xxxxxx\temp\fxsapidebuglogfile.txt
20120926085433.781136-240  d:\users\xxxxxx\temp\sof8436.tmp
20120926085436.861167-240  d:\users\xxxxxx\temp\cvr941b.tmp.cvr
20120926103842.351663-240  d:\users\xxxxxx\temp\~dfe34cb61c66a1dcd7.tmp
20120926181118.453780-240  d:\users\xxxxxx\temp\~dfd0009f24c8c5eb31.tmp
20120927100903.382946-240  d:\users\xxxxxx\temp\~df559b9f2b2763ac3f.tmp
20120927100915.210126-240  d:\users\xxxxxx\temp\cvr3d51.tmp.cvr
20120927100918.680196-240  d:\users\xxxxxx\temp\sof47cf.tmp
20120927144827.689200-240  d:\users\xxxxxx\temp\tmpdbc8.tmp
20120927144828.169209-240  d:\users\xxxxxx\temp\tmpddad.tmp
20120927184908.066005-240  d:\users\xxxxxx\temp\~df401234aa9008c5e1.tmp
LastModified               Name 
```

# ninject - Ninject 构造函数绑定

> ID：12708896
> 
> 赞同：0
> 
> 时间：2012-10-03T12:51:09.337
> 
> 标签：ninject, ninject-3

我正在使用 NInject。我有一个像这样的对象

```
interface IFoo {}

class Foo : IFoo {
   public Foo(string magic, IBar bar) {}
} 
```

我希望能够通过只传递魔法来注入一些 foo 。每个类的魔法是不同的，所以这应该返回不同的实例。

```
s_Kernel.Get<IFoo>("magic");
s_Kernel.Get<IFoo>("not-so-magic"); 
```

我第一次尝试绑定它我已经完成了

```
s_Kernel.Bind<IFoo>().To<Foo>(); 
```

但是后来我必须用看起来有点不合适的东西来查找它。

```
s_Kernel.Get<IFoo>(new ConstructorArgument("magic", magic), s_Kernel.Get<IBar>()); 
```

我不想明确地将自己绑在魔线上。

我得到的印象`Bind<IFoo>().ToConstructor(ctorArg => new Foo(xxx, ctorArg.Kernel.Get<IFoo>());`几乎可以让我到达那里，但我不知道我应该为“xxx”输入什么，以便它查找参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T00:34:11.003

你要么在寻找[Ninject.Extensions.Factory](https://github.com/ninject/ninject.extensions.factory/wiki)（或者在fluent-expression 链`WithConstructorArgument`的最末端，`Bind`但我很确定你不是那个意思）。

# c - Typedef、标记和未标记的结构以及不兼容的指针类型

> ID：12708897
> 
> 赞同：8
> 
> 时间：2012-10-03T12:51:11.130
> 
> 标签：c, struct, typedef

考虑以下 C 代码片段：

```
typedef struct node{
    int val;
    struct node* left;
    struct node* right;
}node;

void inorderTraversal(node *p){
    inorderTraversal(p->left);
    printf("%d",p->val);
    inorderTraversal(p->right);
} 
```

如果我只写`typedef struct`而不是，`typedef struct node`当我调用`inorderTraversal(root)`. `main()`为什么即使程序没有显示任何错误，我也会收到此警告？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-03T13:09:17.070

如果你不给结构一个标签名称，

```
struct node* left; 
```

在结构定义中声明了一个新的（不完整的）类型`struct node`。因此，当您传递一个指向该（不完整）类型`node*`的指针时，您需要传递一个不兼容类型的指针。

当您定义的结构具有指向同一类型的指针时，您必须能够在定义中命名该类型，因此该类型必须在范围内。

如果您给`struct`a 名称，则类型 - 从那时起 - 在范围内并且可以被引用，尽管尚未完成，如`struct node`（如果标签是`node`）。在 typedef 完成后，该类型可以被称为`struct node`or 或`node`，无论您喜欢哪个。

但是如果你不给`struct`a 标签，那么在 typedef 完成之前类型是匿名的，并且在此之前不能以任何方式被引用。而自从当线

```
struct node *left; 
```

遇到，不知道`struct node`引用的类型，该行声明了一个新类型，`struct node`，其中一无所知。编译器没有理由将该类型与当前定义的类型联系起来。因此，此时，`struct`包含一个成员，该成员是指向未知不完整类型的指针。现在，在`inorderTraversal`，当你打电话

```
inorderTraversal(p->left); 
```

with `node *p`，根据 的定义`node`，`p->left`是一个指向未知不完整类型的指针`struct node`。如果`p`已创建它`p->left`实际上是一个指向 的指针`node`，那么事情仍然会起作用（可能在指向不同类型的指针具有不同表示形式的平台上除外），但是您将指针传递给一种类型的指针，而该类型的指针需要指向不同类型的指针. 由于一种类型不完整，因此与预期类型不兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:10:13.703

```
"passing argument of incompatible pointer type" 
```

因为当时节点是未知的。所以它被认为是一种新的类型。

```
struct node{
    int val;
    struct node* left;
    struct node* right;
};

void inorderTraversal(struct node *p){
    inorderTraversal(p->left);
    printf("%d",p->val);
    inorderTraversal(p->right);
} 
```

现在 node 在使用它之前被声明为结构。即 `struct node* left;`没有错误。

另请参阅：[自引用结构定义？](https://stackoverflow.com/questions/588623/self-referential-struct-definition)
[带有指向自身的指针的 C 结构体](https://stackoverflow.com/questions/1813991/c-structure-with-pointer-to-self?lq=1)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-03T13:10:13.350

你不能创建一个匿名的`typedef`，它必须有一个名字。C 不支持匿名`struct`类型。

不过，GCC 扩展将启用该功能：`-fms-extensions`

# c# - 如何使用 MVC3 Razor 格式化 DateTime 属性？

> ID：12708898
> 
> 赞同：3
> 
> 时间：2012-10-03T12:51:12.220
> 
> 标签：c#, asp.net-mvc-3, datetime, razor

我有以下 Razor 代码来为 DateTime 类型的 ValidFrom 属性呈现文本框。

```
@Html.TextBox("ValidFrom", (Model.ValidFrom.ToString("dd-MMM-yyyy")), new { @class = "FrmTextBox" }) 
```

同样的是将默认日期（01-01-0001 00:00:00）呈现为“01-Jan-0001”，同时打开我的表单，一旦我提交表单，我的值也会存储到数据库中。

但是，如果我尝试从数据库更新主题记录的 ValidFrom 属性，则记录返回为 02-10-2012 00:00:00 但日期显示在 02/10/2012 00:00:00仅格式。

如何将上述日期时间值格式化为 2012 年 10 月 2 日。？

任何人都可以请帮助..

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T13:41:28.777

尝试在您的模型中使用以下属性。

```
 [DisplayFormat(ApplyFormatInEditMode = true, 
 DataFormatString = "specify_format_string_here")] 
```

然后，在你看来：`@Html.EditorFor(m => m.ValidFrom)`。更多关于编辑器模板的信息，例如 [**在这里**](http://coding-in.net/asp-net-mvc-3-how-to-use-editortemplates/)。对于您的要求，格式字符串应该是这样的：

`"{0:dd-MMMM-yyyy}"`

# c# - Lucene.Net。如何搜索 HTML 实体

> ID：12708899
> 
> 赞同：1
> 
> 时间：2012-10-03T12:51:14.827
> 
> 标签：c#, .net, lucene, lucene.net

如何在 lucene.net 中搜索 html 实体？

我在数字 html 实体中的所有索引，所以如果我搜索例如“34”，它就会出现`&#<b>34</b>;`

同样非常有趣的是，如何像在 SQL 中一样使用不同的词在不同的字段中进行搜索。例如搜索短语“word1 word2”

```
SELECT * FROM table WHERE 
title LIKE 'word1%' OR title LIKE 'word2%' OR 
description LIKE'word1%' OR description LIKE 'word2%' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T13:08:47.813

这取决于你如何存储它。当您存储文档时，看起来您正在存储 HTML*并*在其上进行搜索。

我建议您有两个单独的字段：

*   一个存储原始 HTML，但*不*对其进行分析（不需要在标记上搜索，是吗？）
*   一个包含为搜索而处理的 HTML。该字段*不*被存储，但*被*分析。

为了填充第二个字段，您应该通过[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)之类的东西运行 HTML，以获取您正在存储/处理的 HTML 节点的内部文本，然后通过该[`HttpUtility.HtmlDecode`方法](http://msdn.microsoft.com/en-us/library/7c5fyk1k.aspx)运行该文本以获取 HTML实体表示您可以实际分析和搜索的实体。

然后，您可以在分析的字段中搜索您想要的任何内容，而无需执行任何特殊操作，然后从存储原始 HTML 的字段中检索内容。

关于通配符搜索，它们是受支持的，您只[需要适当地构建您的查询](http://wiki.apache.org/lucene-java/LuceneFAQ#What_wildcard_search_support_is_available_from_Lucene.3F)（假设您使用的是 a `QueryParser`）。请注意，默认情况下不启用通配符前缀。

# jquery - 我无法正确运行 mediaelement.js

> ID：12708902
> 
> 赞同：1
> 
> 时间：2012-10-03T12:51:27.650
> 
> 标签：jquery, html, mediaelement.js

我花了将近 2 个小时，仍然无法让它工作，我在这里放了一个测试文件（使用 mediaelement.js 的视频以避免与编解码器冲突）。在这里你可以看到它：

[ikperawang.com/test.html](http://ikperawang.com/test.html)

如您所见，我已经将其设置为 html5，路径正确，但 mediaelement.js 仍然无法播放视频

任何人都可以测试并让我知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:18:02.997

您必须告诉 MediaElementJS 通过 javascript 显式呈现您的视频。

```
<body>
<video src="images/videos/echo-hereweare.mp4" width="320" height="240"></video>
<script>
    $('video').mediaelementplayer();
</script>
</body> 
```

# c - shell程序中的分段错误

> ID：12708903
> 
> 赞同：0
> 
> 时间：2012-10-03T12:51:28.697
> 
> 标签：c, shell, segmentation-fault

我一直在尝试创建自己的 shell 程序，我一直在看的教程建议使用**strtok()**函数。虽然，我无法简单地解析我的命令行并且我不确定我做错了什么。在**parseCmd()**函数中第一次使用**strtok()**期间，我不断收到**分段错误。**

 ****到目前为止，这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/types.h>

#define MAXSIZE 512

int parseCmd(char *cmd, char *args[])
{
    printf("LOGGER: parseCmd(cmd=%s, args=%p)\n", cmd, args);

    char cmdDelims[] = " >";

    char *cmdReader;
    cmdReader = strtok(cmd, cmdDelims);

    printf("LOGGER: cmdReader=%s\n", cmdReader);

    int i = 0;
    while (cmd != NULL)
    {
        printf("LOGGER: %d counter", i);

        args[i] = strdup(cmdReader);
        cmdReader = strtok(NULL, " >");
        i++;
    }
}

int main() 
{   
    char *in;
    in = malloc(MAXSIZE);

    char *args[10];
    char *cmd = NULL;

    int errorBit = 0;
    int terminationBit = 1;

    char inDelims[] = "\n";

    while (terminationBit)
    {
        printf("mysh>");
        fgets(in, MAXSIZE, stdin);

        cmd = strtok(in, inDelims);

        errorBit = parseCmd(cmd, args);
        if (errorBit)
        {
            fprintf(stderr, "Error: Cannot parse command %s\n", cmd);
            exit(1);
        }

        if (*args == "exit")
        {
            terminationBit = 0;
        }
    }
    return 0;
} 
```

任何有关此主题的帮助或建议将不胜感激。

编辑：根据输出，**实际段错误可能不是 strtok()**。

*这是一些输出：*

```
mysh>hi sup
LOGGER: parseCmd(cmd=hi sup, args=0x7fff50ec0b80)
LOGGER: cmdReader=hi
Segmentation fault: 11 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:14:09.650

似乎是一个简单的错误：

```
while (cmd != NULL)
{
    // ...
} 
```

...应该是：

```
while (cmdReader != NULL)
{
    // ...
} 
```

...因为`cmd`很可能永远不会成为`NULL`. 另外，这个：

```
if (*args == "exit")
{
    terminationBit = 0;
} 
```

...可能不会按照你的想法去做。要比较字符串，请使用：

```
if (strcmp(*args, "exit") == 0)
{
    terminationBit = 0;
} 
```

您必须确保它也`parseCmd`返回一些东西，否则：

```
errorBit = parseCmd(cmd, args); 
```

...`parseCmd`产生未定义的行为，因此 的值`errorBit`也完全未定义，随后检查其值的条件也是如此。

最后，您的程序实际上将在您之后泄漏内存`strdup`并且`malloc`永远不会释放。`free`完成后不要忘记`args`。****

# batch-file - .bat 文件，用于从受密码保护的网络位置安装 Microsoft Office

> ID：12708911
> 
> 赞同：1
> 
> 时间：2012-10-03T12:51:41.333
> 
> 标签：batch-file

我正在尝试创建一个 .bat 文件，该文件将自动运行安装文件来安装 Microsoft Office，但我遇到的问题是，当我映射网络驱动器时，它会提示我输入设备的用户名和密码，但我会不知道如何让脚本自动登录或至少提示我输入密码。有任何想法吗？

这是我到目前为止所拥有的：

```
net use x: \\000.00.000.00\images\Service\microsoft\Office 2010 64-bit
START "Office 64-bit" x: "setup.exe"
net use x: /delete
PAUSE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:34:27.877

```
net use x: \\server\folder /user:domain\user password 
```

# android - 提示行为怪异

> ID：12708912
> 
> 赞同：0
> 
> 时间：2012-10-03T12:51:49.127
> 
> 标签：android, android-layout, android-edittext, hint

我有一个编辑文本，当我为其设置提示时，它的行为很奇怪。

XML：

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="5dip"
    android:layout_marginLeft="5dip"
    android:layout_marginTop="8dip"
    android:background="@android:drawable/edit_text"
    android:baselineAligned="false"
    android:gravity="center_vertical"
    android:orientation="horizontal"
    android:paddingRight="0dip" >

    <EditText
        android:id="@+id/pinDisplay"
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_weight="0.85"
        android:background="@null"
       />

    <ImageButton
        android:id="@+id/backspace"
        style="@android:style/Widget.Button"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_gravity="center_vertical"
        android:layout_marginBottom="2dip"
        android:layout_marginRight="8dip"
        android:layout_marginTop="2dip"
        android:layout_weight="0.15"
        android:gravity="center"
        android:src="@android:drawable/ic_input_delete" />
</LinearLayout> 
```

代码 ：

```
private float hintTextSize = 24;

private void initializeInputText() {
    input = (EditText) findViewById(R.id.pinDisplay);
    input.setInputType(InputType.TYPE_NULL);
    input.setTransformationMethod(PasswordTransformationMethod.getInstance());
    input.setTextSize(TypedValue.COMPLEX_UNIT_SP, hintTextSize);
    input.setHint("Kies pincode");
    input.setCursorVisible(false);

    input.setOnTouchListener(new OnTouchListener() {
        public boolean onTouch(View arg0, MotionEvent arg1) {
            return true;
        }
    });

    input.setFilters(new InputFilter[] { new InputFilter.LengthFilter(maxLengthInput) });
    input.addTextChangedListener(new TextWatcher() {

        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
            input.setError(null);

            if (s.length() >= maxLengthInput) {
                input.setCursorVisible(false);
                btnOk.setEnabled(true);
                btnOk.setTextColor(Color.parseColor("#00B32D")); //Green
            } else {
                btnOk.setEnabled(false);
                btnOk.setTextColor(Color.parseColor("#B8B8B8")); //Light gray
                input.setCursorVisible(true);
                input.setSelection(input.getText().length());
            }
        }

        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
        }

        public void afterTextChanged(Editable s) {
            if (!input.getText().toString().equals("")) {
                input.setTextSize(TypedValue.COMPLEX_UNIT_SP, textSize);
            } else {
                input.setTextSize(TypedValue.COMPLEX_UNIT_SP, hintTextSize);
            }
        }
    });
} 
```

这是第一个：

![在此处输入图像描述](../Images/f981d995492eb6cc40c262b153fc5616.png)

但是当我添加一个数字时，edittext 会增长并占用更多空间。

![在此处输入图像描述](../Images/9324558e4faa1d1584432dfda2012c90.png)

可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:02:03.520

只需在您的课程中删除以下代码：

```
 input.setTextSize(TypedValue.COMPLEX_UNIT_SP, hintTextSize); 
```

并尝试

# php - Facebook Graph Api - 在不记录的情况下发布到页面

> ID：12708916
> 
> 赞同：1
> 
> 时间：2012-10-03T12:52:09.570
> 
> 标签：php, facebook, facebook-graph-api, facebook-page

我正在尝试创建一个脚本，该脚本无需登录用户即可在 facebook 页面上发布状态更新。当用户授予应用程序一次时，我的应用程序和页面都有 access_token ；但我总是得到错误

```
Fatal error:  Uncaught OAuthException: (#200) The user hasn't authorized the application to perform this action 
```

尽管我已授予**manage_pages**和**publish_stream**权限。另外，如果我将 access_token 用于页面，我会收到错误

```
Fatal error:  Uncaught OAuthException: Error validating access token: The session is invalid because the user logged out. 
```

这是我使用的代码。

```
$facebook = new Facebook(array(
        'appId'  => 'XXX',
        'secret' => 'XXXXXXXXXXX'
));

$post = array(
    'message'   => 'Message to user'/*,
     access_token = "XXXXXXXX"*/
);
$feed = '/[PAGE_ID]/feed';

$post_id = $facebook->api($feed, "post", $post); 
```

谢谢。

**编辑 ：**

当该用户断开连接时，我终于设法在用户页面上发布状态更新，我必须通过服务器端身份验证方法生成 access_token。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:55:44.737

以下是关于如何在页面上发布 FB 的小代码示例：

你需要：

*   Your_authToken_for_User

*   项目清单

saved_fb_Page_Token

```
 $facebook = $facebook = new Facebook(array(
                'appId' => $fbAppId,
                'secret' => $fbAppSecret,
                'cookie' => true,
            ));
    $facebook->setAccessToken("Your_authToken_for_User");

   //Now your FB instance is authenticated.

    $pages= $facebook->api('/me/accounts'); //use the current authenticated FB instance to grab Pages. If you already know your page ID , skip this.

   //Assuming you have a pageid in $page_id,(the $page_id can be grabbed from the $pages array).

    $attachment = array(
                'access_token' => $saved_fb_Page_Token,
                'message' => "foo",
                'name' => "Bar",
                'link' => "http://foo.bar",
                'description' => "barfoo",
                'picture' => "an image url here",
            );

     $facebook->api('/' . $page_id . '/feed', 'POST', $attachment);//post to fb page 
```

# android - 在列表视图中获取所选项目

> ID：12708917
> 
> 赞同：2
> 
> 时间：2012-10-03T12:52:13.470
> 
> 标签：android, android-listview

我在视图翻转器中使用了列表视图，我希望当用户选择一个列表项时，当用户选择其他列表项或返回该“列表视图”活动时，它应该保持选中状态。这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:58:11.107

```
list.setOnItemClickListener(new OnItemClickListener() {

       public void onItemClick(AdapterView<?> arg0,
                    View arg1, int position, long arg3)
        {
            String selectedItem = list.getSelectedItem().toString();    
        }); 
```

此处 selectedItem 包含您在列表中选择的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T13:09:52.430

试试这样

```
simpleAdapter = new SimpleAdapter(this, docList, R.layout.your_layout,
            new String[] { "UserName", "Status"}, new int[] {
                    R.id.username, R.id.status});
    listView.setAdapter(simpleAdapter);
    listView.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {

            registerForContextMenu(listView);
            listView.showContextMenu();

            tv = (TextView) arg1.findViewById(R.id.username);
            getListName = tv.getText().toString();               

            tv1 = (TextView) arg1.findViewById(R.id.status);
            getFriendUserId = tv1.getText().toString();  
        }
    }); 
```

# ios - iOS：应用内购买

> ID：12708919
> 
> 赞同：0
> 
> 时间：2012-10-03T12:52:16.777
> 
> 标签：ios, itunes

我第一次使用应用内购买。我在 iTunes Connect 中创建了一个应用程序并添加了 1 个应用程序内购买。是否需要在应用购买中提交应用进行测试？我想在我的电晕代码中进入应用购买列表。为此，有必要在 AppStore 中提供应用程序吗？

感谢提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:58:15.500

在这里， [Troy Brant](http://troybrant.net/blog/2010/01/in-app-purchases-a-full-walkthrough/)有一个很棒的应用内购买教程，它可以帮助你很多。

您必须提交一次并拒绝您的二进制文件才能将您的应用程序内添加到您的应用程序中，而不是在您按下准备上传二进制文件之前，您可以从应用程序的详细信息页面编辑您的应用程序内的。

# php - 日期虚拟字段 - cakephp 2.0

> ID：12708921
> 
> 赞同：1
> 
> 时间：2012-10-03T12:52:20.457
> 
> 标签：php, date, datetime, cakephp-2.0

小逻辑问题。我正在学习 CakePHP 2.0，之前我使用过虚拟字段，但这次我想格式化这些`DATETIME`字段。

作为输出，我得到`YYYY-MM-DD`（像 2010-10-31 这样的数字）但我希望输出只是`September, 2005`

我应该应用什么逻辑来在虚拟领域得到这个，或者如果有更好的方法请给我一个方向。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T03:55:51.977

如果您使用的是 Mysql，则可以使用 DATE_FORMAT 函数。

像这样向您的模型文件添加一个虚拟字段：

```
class Yourmodel extends AppModel {

     var $virtualFields = array(
                'formateddate' => 'DATE_FORMAT(Yourmodel.mysqldate,"%d/%m/%Y")');

.
.
.
} 
```

根据您的需要更改格式字符串。

# spring - 连接未与托管连接关联，“Jboss 服务器中的 Spring 应用程序”

> ID：12708926
> 
> 赞同：1
> 
> 时间：2012-10-03T12:52:32.097
> 
> 标签：spring, jboss, jboss6.x

以下异常出现在特定服务器中，问题不一致。

```
org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is java.sql.SQLException:
Connection is not associated with a managed connection.org.jboss.resource.adapter.jdbc.jdk6.WrappedConnectionJDK6@49828f4c
    at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:296)
    at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:320)
    at org.springframework.jdbc.support.SQLErrorCodesFactory.getErrorCodes(SQLErrorCodesFactory.java:213)
    at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.setDataSource(SQLErrorCodeSQLExceptionTranslator.java:141)
    at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.<init>(SQLErrorCodeSQLExceptionTranslator.java:104)
    at org.springframework.jdbc.support.JdbcAccessor.getExceptionTranslator(JdbcAccessor.java:99)
    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:969)
    at org.springframework.jdbc.core.JdbcTemplate.call(JdbcTemplate.java:1003)
    at org.springframework.jdbc.object.StoredProcedure.execute(StoredProcedure.java:144)
    at com.watsons.tfo.sp.dao.SPSaveTransactionDetail.execute(SupplierPromotionDaoImpl.java:3354)
    at com.watsons.tfo.sp.dao.SupplierPromotionDaoImpl.savePromoTransaction(SupplierPromotionDaoImpl.java:422)
    at com.watsons.tfo.sp.service.SupplierPromotionServiceImpl.savePromoTransaction(SupplierPromotionServiceImpl.java:158)
    at sun.reflect.GeneratedMethodAccessor1010.invoke(Unknown Source) 
```

--

```
org.springframework.dao.RecoverableDataAccessException: CallableStatementCallback; SQL [{call PKG_TFO_SUPPLIER_PROMOTION.PR_INS_SAVE_TRANSACTION_DET(?, ?)}]; No more data to read from socket; nested exception is java.sql.SQLRecoverableException: No more data to read from socket
    at com.watsons.tfo.sp.service.SupplierPromotionServiceImpl.savePromoTransaction(SupplierPromotionServiceImpl.java:160)
    at sun.reflect.GeneratedMethodAccessor1010.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy206.savePromoTransaction(Unknown Source)
    at com.watsons.tfo.sp.controller.SupplierPromoTransactionController.saveSupplierPromoTransaction(SupplierPromoTransactionController.java:1077)
    at com.watsons.tfo.sp.controller.SupplierPromoTransactionController$$FastClassByCGLIB$$8994f9f9.invoke(<generated>) 
```

首先我认为是因为连接陈旧，所以我在 oracle-ds.xml 中添加了陈旧连接检查器。但是问题又来了

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T04:34:12.097

禁用 CachedConnection 管理器

```
 <Valve className="org.jboss.web.tomcat.tc5.jca.CachedConnectionValve"
    cachedConnectionManagerObjectName="jboss.jca:service=CachedConnectionManager"
    transactionManagerObjectName="jboss:service=TransactionManager" /> 
```

server.xml 中提到了上述标签。这个*`cachedconnectionvalve should be turned off in production server`*。

![当 Web 请求结束时，CCV 会自动关闭所有 JCA 连接，在生产中您希望禁用此功能。](../Images/3b1b2dbf0c605d0112432aa0e31af068.png)

有两个主要的配置参数对性能和可伸缩性有直接影响：缓存连接管理器和 HTTP 会话复制。

CachedConnectionManager 配置为处于调试模式的 servlet 容器中。它也在生产配置中配置，但调试模式关闭。

我在 server.xml 文件的末尾评论了 CachedConnectionValve。

还在 META-INF/jboss-service.xml 中评论了 CachedConnectionManager。

“连接未与托管连接关联”消失了，应用程序运行良好。

**更新：**

在 oracle 日志文件中又发现了一个相同错误的日志...

Oracle 版本：Oracle 数据库 11.2.0.2

IE `XMLSEQUENC/EEXTRACT FAILS WITH ORA-7445[__INTEL_NEW_MEMCPY()+5395]`

这是oracle DB版本中XML处理的错误，然后

经oracle人指导，更新了oracle的补丁（11666959）。

[在oracle](http://docs.oracle.com/cd/E23320_01/doc.22/e22743/instapps.htm)网站中也提到了这一点。

```
11666959 is required for the release utility; XMLSEQUENC/EEXTRACT FAILS WITH ORA-7445[__INTEL_NEW_MEMCPY()+5395] IN 11.2.0.2 
```

# javascript - 以不同的方式对抗机器人垃圾邮件

> ID：12708933
> 
> 赞同：3
> 
> 时间：2012-10-03T12:52:54.200
> 
> 标签：javascript, jquery, validation, robot, spam-prevention

我有一个形式简单的网站，可以将输入作为推文发布到 Twitter 帐户。

没有安装验证码或任何类型的反垃圾邮件系统，因此垃圾邮件机器人疯狂地发布他们的虚假内容是合乎逻辑的。

现在，我想构建一个不需要任何验证码的验证。

这是我一直在想的，我需要你诚实的意见。

如果机器人在不使用鼠标或键盘的情况下发布他们的东西（可能是通过使用某种生成的脚本），那么这实际上意味着他们无法将任何形式的焦点放在表单本身上。

我的想法是创建一个简单的 js 条件，在没有获得某种焦点的情况下无法提交表单。

你怎么看待这件事？还有其他类似的想法吗？

谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T12:58:39.343

发布未经验证的推文消息的想法本身听起来很不安全。尽管如此，仍有一些方法可以*最大限度地减少*垃圾邮件。

例如，您可以实现一个[蜜罐](http://en.wikipedia.org/wiki/Honeypot_%28computing%29)变体，将另一个字段添加到提交表单，但以对实时用户隐藏的方式。机器人会错误地填写它，您可以在服务器端拒绝提交 - 信不信由你，大多数垃圾评论来自爬虫，因此即使是这样的基本方法也可以大大减少提交的恶意内容的数量。

您假设大多数机器人*“不使用鼠标或键盘”*发布是正确的——这样做比模拟客户端活动要简单得多。同样，您可以利用它来发挥自己的优势 - 添加一个将由 JS 填充的字段并在服务器端验证其内容。

# iphone - 链接到 iPhone 应用商店的 URL

> ID：12708934
> 
> 赞同：0
> 
> 时间：2012-10-03T12:52:56.230
> 
> 标签：iphone, ios, hyperlink, app-store

请注意，我不想链接到商店中的应用程序。我想要一个通用商店链接。从 iOS 设备上点击该链接应该可以工作。我不在乎它在其他情况下是否有效。

有多个问题询问如何链接到应用程序。但这是一个不同的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:00:18.157

获取其中一个应用链接并删除特定于应用的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:02:11.240

我认为这应该对你有用。

[http://itunes.apple.com/WebObjects/MZStore.woa/wa/viewGrouping?cc=gb&id=25206&mt=8&pillIdentifier=iphone](http://itunes.apple.com/WebObjects/MZStore.woa/wa/viewGrouping?cc=gb&id=25206&mt=8&pillIdentifier=iphone)

# python - 分配给在上层范围内找到名称的局部变量失败，并出现“分配前引用”错误

> ID：12708937
> 
> 赞同：0
> 
> 时间：2012-10-03T12:53:06.427
> 
> 标签：python

显然，这有效：

```
def test_A():
    magic = str(uuid.uuid4())

    def handler(request):
        return magic

    assert handler(0) == magic 
```

虽然这因“分配前引用的局部变量”而失败：

```
def test_A():
    magic = str(uuid.uuid4())

    def handler(request):
        magic = magic
        return magic

    assert handler(0) == magic 
```

在第二个片段中，我假设它`magic`成为一个局部变量，独立于上层范围内的变量进行操作。

我知道要修改全局变量，我必须将其声明为`global`，但我在这里要做的是创建具有相同名称的独立局部变量。这根本不可能吗，我必须为局部变量选择不同的名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:27:25.797

`handler()`可以返回堆栈上的一层并获取其调用者的同名局部变量。

```
def test_A():
    magic = str(uuid.uuid4())

    def handler(request):
        magic = sys._getframe(1).f_locals['magic']
        return magic

    assert handler(0) == magic 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:58:43.503

通常，用相同的名称调用全局变量和局部变量是一种非常糟糕的做法。如果这些在类中，您可以更轻松地指定范围。

但是，您可以使用 globals() 函数访问全局变量，该函数返回带有全局变量的字典，因此您得到：

```
magic=globals()['magic'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T12:57:19.600

如果`test_A.magic`保持不变，您可以使用它的值来定义具有默认值的关键字参数：

```
def test_A():
    magic = str(uuid.uuid4())

    def handler(request, magic = magic):
        # magic here will be a local variable, whose
        # default value will be set to the value of test_A.magic 
        # at the time the def handler statement was parsed.
        return magic

    assert handler(0) == magic 
```

# joomla - 自定义 Joomla 授权

> ID：12708938
> 
> 赞同：0
> 
> 时间：2012-10-03T12:53:07.103
> 
> 标签：joomla, joomla2.5

情况相当复杂，我为什么需要它——不要问——老板想要的！

因此，在默认授权之后，我需要立即运行自定义模块，该模块将对另一个数据库中的授权进行额外测试，并且根据其结果，我需要决定是否授权用户。

除了源更正，还有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:18:41.843

用户的 Joomla 登录凭据是否与您使用的其他系统相同？如果是这样，那么您可以创建一个插件，在成功的 Joomla 登录事件中将这些凭据传递给您的其他系统。

如果没有，那就有点棘手了。您的用户必须提供两组凭据，一次用于 Joomla，然后重定向到您的其他系统以进行第二次登录，或者您必须扩展您的用户帐户，以便您可以将第二组凭据与用户相关联。然后，您可以在成功的 Joomla 登录事件后使用插件将相关凭据传递到您的辅助系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T18:42:10.840

如果您使用 Joomla 内置的“登录菜单”，您可以将“登录重定向”参数设置到另一个页面，如果您使用 Joomla 的本机登录模块，您可以将重定向参数设置到您想要的站点的任何页面。

在您的情况下，我建议创建一个简单的组件（不是模块），第二次授权您的用户，并将它们再次重定向到您想要的任何其他页面（如果第二次登录成功）或踢用户（如果第二次登录不成功）。如果您这样做，您将能够为您的组件创建一个菜单并将您的登录面板（它是一个菜单或一个简单的登录模块）重定向到您的组件的菜单。

如果您对 php 编程有一点了解，那么为 Joomla 创建组件并不是什么大不了的事情，并且有一些工具可以加快创建组件的速度，例如：[http ://www.notwebdesign.com/joomla-component-创作者/](http://www.notwebdesign.com/joomla-component-creator/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T15:42:52.200

为什么不制作一个身份验证插件并使用它而不是核心 joomla 呢？

这适用于 1.5，但现在的原则是相同的。 [http://docs.joomla.org/Creating_an_Authentication_Plugin_for_Joomla_1.5](http://docs.joomla.org/Creating_an_Authentication_Plugin_for_Joomla_1.5)

# android - Android ContentProvider 是否绝对需要同步？

> ID：12708939
> 
> 赞同：0
> 
> 时间：2012-10-03T12:53:09.913
> 
> 标签：android, database, rest, synchronization, android-contentprovider

我正在尝试编写一个应用程序，它将本地存储在 Android 手机上的数据与存储在其他地方服务器上的远程数据库中的数据同步。当然，手机上会有一个 UI 屏幕，用户可以在其中查看/编辑数据。

我决定通过 RESTful Web 服务进行同步，并观看了 Google I/0 2010 视频，该视频解释了用于创建 Android REST 客户端的 3 种不同设计模式。它们都有一个共同的组件——内容提供者。

我想知道是否绝对有必要创建一个内容提供程序来访问数据，因为我只会在我的应用程序中访问它，还是有必要因为同步代码需要在自己的进程中运行？

感谢您的帮助！。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:58:26.497

不，没有必要使用内容提供者。您可以编写一个从服务器检索数据的类，并在[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)中运行此过程。请记住，数据检索永远不应锁定您的 UI。

# php - Zend 框架 使用 ACL 处理错误

> ID：12708940
> 
> 赞同：1
> 
> 时间：2012-10-03T12:53:11.933
> 
> 标签：php, zend-framework, error-handling, acl

我已经使用控制器功能实现了数据库驱动的 ACL`plugin predispatch()`功能。

它工作正常。但它停止了在我的错误控制器上发送的请求。

例如，如果未定义指定的控制器/操作，则系统将显示消息“拒绝访问”而不是显示“未找到请求/页面”。

所以我的问题是如何在单个插件中使用`predispatch()`方法实现 ACl 和错误处理。

请提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:10:48.303

在您的控制器插件中，如有必要，重定向到错误控制器：

```
$request
  ->setModuleName('default')
  ->setControllerName('error')
  ->setActionName('access')
  ->setDispatched(true); 
```

如果您想要一个特殊页面，则必须将 accessAction 放入错误控制器中，或者您可以简单地使用现有的 errorAction

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T13:34:07.973

您应该在数据库中设置错误控制器的权限。

所以当前用户（角色 ID）应该有权访问错误控制器。

我不知道您是数据库表的结构，但以我的方式（可能是相似的）：

```
INSERT INTO "resources" ("id","name","description") VALUES (11,'error', 'Error controller');
INSERT INTO "permissions" ("role_id", "resource_id", "is_allowed") VALUES (1, 11, 't'); 
```

先插入资源表，再插入权限表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-11T08:42:27.493

默认情况下，您应该为所有用户将错误控制器添加到 ACL 插件中。

```
if (!$this->has('Default_Error')) {
    $this->addResource('Default_Error');
    $this->allow('guest', 'Default_Error');
} 
```

这样每个人都可以看到错误控制器。

# c# - 如何拆除集成测试

> ID：12708943
> 
> 赞同：0
> 
> 时间：2012-10-03T12:53:17.603
> 
> 标签：c#, visual-studio-2010, visual-studio, unit-testing

我想对我的项目做一些集成测试。现在我正在寻找一种机制，允许我在所有测试开始之前执行一些代码并在所有测试结束后执行一些代码。

请注意，我可以为每个测试设置方法和拆卸方法，但我需要对所有测试整体使用相同的功能。

请注意，我使用 Visual Studio、C# 和 NUnit。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:57:45.653

使用 NUnit.Framework.TestFixture 属性注释您的测试类，并使用 NUnit.Framework.TestFixtureSetUp 和 NUnit.Framework.TestFixtureTearDown 注释所有测试设置和所有测试拆卸方法。

这些属性的功能类似于 SetUp 和 TearDown，但每个夹具只运行一次它们的方法，而不是在每次测试之前和之后。

编辑以回应评论：为了在所有测试完成后运行方法，请考虑以下（不是最干净的，但我不确定更好的方法）：

```
internal static class ListOfIntegrationTests {
    // finds all integration tests
    public static readonly IList<Type> IntegrationTestTypes = typeof(MyBaseIntegrationTest).Assembly
        .GetTypes()
        .Where(t => !t.IsAbstract && t.IsSubclassOf(typeof(MyBaseIntegrationTest)))
        .ToList()
        .AsReadOnly();

    // keeps all tests that haven't run yet
    public static readonly IList<Type> TestsThatHaventRunYet = IntegrationTestTypes.ToList();
}

// all relevant tests extend this class
[TestFixture]
public abstract class MyBaseIntegrationTest {
    [TestFixtureSetUp]
    public void TestFixtureSetUp() { }

    [TestFixtureTearDown]
    public void TestFixtureTearDown() {
        ListOfIntegrationTests.TestsThatHaventRunYet.Remove(this.GetType());
        if (ListOfIntegrationTests.TestsThatHaventRunYet.Count == 0) {
            // do your cleanup logic here
        }
    }
} 
```

# django - 如何在 base.html 中获取用户价值？

> ID：12708946
> 
> 赞同：0
> 
> 时间：2012-10-03T12:53:21.097
> 
> 标签：django

我想在我的主模板 main base.html 中处理用户数据。

我实际上使用登录通用视图。当我在主页上登录时，它会为我提供用户信息，但在所有其他页面`user`中都是空白的。

我已经阅读了很多关于此的内容：`request`，，`RequestContext`我已添加`django.contrib.auth.context_processors.auth`到处理器列表中。

知道如何让这个变量到处显示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T13:03:42.747

两种方式：

如果您使用的是 django 1.4+，则可以在从视图返回时使用[render() ：](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#render)

```
def my_view(request):
    ...
return render(request, 'template.html', ctx) 
```

如果您使用的是较旧的 django 或者您不喜欢渲染方法，您将使用[render_to_response](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#render-to-response)返回 RequestContext ，如下所示：

```
def my_view(request):
   ...
return render_to_response('template.html', ctx, context_instance=RequestContext(request)) 
```

**编辑：**对不起，忘了实际回答问题。如果您使用上述方式之一呈现模板并且具有：

*   INSTALLED_APPS 中的 django.contrib.auth
*   中间件中的身份验证
*   在 context_processors 中进行身份验证（查看默认 settings.py 文件：[https](https://github.com/django/django/blob/master/django/conf/global_settings.py) ://github.com/django/django/blob/master/django/conf/global_settings.py ）

然后你可以使用： {{ user }} 和 {{ user.is_anonymous }} 来弄清楚发生了什么。

# hadoop - 文件未正确放入分布式缓存

> ID：12708947
> 
> 赞同：4
> 
> 时间：2012-10-03T12:53:27.993
> 
> 标签：hadoop, distributed-cache

我正在使用以下代码将文件添加到分布式缓存：

```
Configuration conf2 = new Configuration();      
job = new Job(conf2);
job.setJobName("Join with Cache");
DistributedCache.addCacheFile(new URI("hdfs://server:port/FilePath/part-r-00000"), conf2); 
```

然后我将文件读入映射器：

```
protected void setup(Context context)throws IOException,InterruptedException{
Configuration conf = context.getConfiguration();

URI[] cacheFile = DistributedCache.getCacheFiles(conf);
FSDataInputStream in = FileSystem.get(conf).open(new Path(cacheFile[0].getPath()));
BufferedReader joinReader = new BufferedReader(new InputStreamReader(in));

String line;
        try {
              while ((line = joinReader.readLine()) != null) {
              s = line.toString().split("\t");
                  do stuff to s
                } finally {
                   joinReader.close();
                } 
```

问题是我只读了一行，而不是我放入缓存的文件。而是：cm9vdA==，或 base64 中的根。

有没有其他人遇到过这个问题，或者看到我如何错误地使用分布式缓存？我正在使用完全分布式的 Hadoop 0.20.2。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-04T00:09:29.600

作业配置中的常见错误：

```
Configuration conf2 = new Configuration();      
job = new Job(conf2);
job.setJobName("Join with Cache");
DistributedCache.addCacheFile(new URI("hdfs://server:port/FilePath/part-r-00000"), conf2); 
```

创建 Job 对象后，您需要将 Configuration 对象拉回，因为 Job 会对其进行复制，并且在创建作业后配置 conf2 中的值不会对作业本身产生影响。试试这个：

```
job = new Job(new Configuration());
Configuration conf2 = job.getConfiguration();
job.setJobName("Join with Cache");
DistributedCache.addCacheFile(new URI("hdfs://server:port/FilePath/part-r-00000"), conf2); 
```

您还应该检查分布式缓存中的文件数量，可能不止一个，并且您正在打开一个随机文件，该文件为您提供了您所看到的值。

我建议您使用符号链接，这将使文件在本地工作目录中可用，并且具有已知名称：

```
DistributedCache.createSymlink(conf2);
DistributedCache.addCacheFile(new URI("hdfs://server:port/FilePath/part-r-00000#myfile"), conf2);

// then in your mapper setup:
BufferedReader joinReader = new BufferedReader(new FileInputStream("myfile")); 
```

# php - PHP中的通配符数组循环

> ID：12708949
> 
> 赞同：3
> 
> 时间：2012-10-03T12:53:33.110
> 
> 标签：php, arrays

我有一个包含大量数据的数组，这些数据是从 JSON 文件生成的。大多数数据用于填充`input`元素，但一些键包含隐藏的默认值，以便稍后用于计算。

数组看起来像这样：

```
[name] => 'My App'
[default_E17] => 0.009
[default_H17] => 0.0236
[default_K17] => 50
[default_P17] => 0.0118
[default_E19] => 0.03 
```

我想遍历所有`default_*`键，并使用 HTML 输出它们。本质上，我想要一个`foreach`循环，但仅限于格式匹配的键`default_*`。有谁知道这是否可能？

请注意，`[default_*]`键之前数组中的值是可变长度的，所以我不能轻易使用`array_splice()`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T12:56:52.780

你`strpos($key, "default_") === 0`用来表明它开始`default_`而不是在中间或结尾

```
$array = array();
$array['name'] = 'My App';
$array['default_E17'] = "0.009";
$array['default_H17'] = "0.0236";
$array['default_K17'] = "50";
$array['default_P17'] = "0.0118";
$array['default_E19'] = "0.03";
$array['E19_default_test'] = "1.03";

echo "<pre>"; 
```

*** 你可以使用`foreach`***

```
$list = array();
foreach ( $array as $key => $value ) {
    if (strpos($key, "default_") === 0) {
        $list[$key] = $value;
    }
}

var_dump($list); 
```

***你也可以`array_flip`使用`array_filter`***

```
$array = array_flip(array_filter(array_flip($array),function($var) { return (strpos($var, "default_") === 0);}));
var_dump($array); 
```

***你也可以使用`FilterIterator`***

```
class RemoveDefaultIterator extends FilterIterator {
    public function accept() {
        return (strpos($this->key(), "default_") === 0);
    }
}

$list = new RemoveDefaultIterator(new ArrayIterator($array));
var_dump(iterator_to_array($list)); 
```

他们都会输出

```
array
  'default_E17' => string '0.009' (length=5)
  'default_H17' => string '0.0236' (length=6)
  'default_K17' => string '50' (length=2)
  'default_P17' => string '0.0118' (length=6)
  'default_E19' => string '0.03' (length=4) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T12:55:49.740

```
 foreach( $arr as $k => $v ) { //iterate the array
  if( strpos($k, 'default_') !== FALSE  ) //search if the key contains 'default_' 
   $default_values[] = $v;   // if so, store the values for the 'default_' keys   
 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T12:56:13.637

只需遍历您的数组

```
Foreach( $inputArray AS $key=>$val ) {
  // check if key is the one we need
  if( ... ) {
     // it is - deal with it
  }
} 
```

根据您使用的键`if()`可以是简单的`substr()`或正则表达式匹配。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-03T13:07:11.440

您可以为此使用 FilterIterator。

它本质上与循环整个数组相同，因为这是唯一的方法，但它使您无法在生产循环中执行此操作，从而产生更少的噪音。

就是这样：

```
class Default_FilterIterator extends FilterIterator
{
    public function accept()
    {
      if (strpos($this->key(), 'default') === 0) {
        return true;
      }
      return false;
    }
}

$yourArray = array('default_stuff' => 'foo', 'otherstuff' => 'bar');

$filterdArray = new Default_FilterIterator(new ArrayIterator($yourArray));

foreach ($filteredArray as $key => $value) {
  //deal only with default values here
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-03T13:03:09.243

```
 foreach ($your_array as $key => $value) {
     // check if the $key starst with 'default_'
     if (substr($key, 0, 8) == "default_") {
      //do your thing...
      echo "<input type='text' value='" . $value . "'>";
     }
   } 
```

# java - Java Socket编程中如何在一台服务器和多个客户端之间进行通信？

> ID：12708950
> 
> 赞同：1
> 
> 时间：2012-10-03T12:53:36.527
> 
> 标签：java, sockets, client-server, serversocket

我有两个 java 应用程序，一个是 web 应用程序，另一个是简单的 java 应用程序，所以我使用 Socket 编程进行它们之间的通信。

我创建了一个 SocketServer，它是一个线程，我在其中创建`ServerSocket serverSocket = new ServerSocket(6789)` 并在我的 Web 应用程序中创建了`Socket client = new Socket("localhost", 6789);` 我的服务器向客户端发送一些数据，客户端将开始一些其他工作，但是如果我想运行另一个客户端，即服务器将发送不同的参数和客户必须开始处理我该怎么办？

因为服务器已经在“6789”端口上启动，第一个客户端也使用相同的端口。如何使用另一个端口启动客户端？

每次服务器都必须先启动，然后再启动客户端。

我认为客户端将无法找到服务器，直到两者都具有相同的端口。

我是否必须创建另一个具有不同端口的服务器实例，然后调用客户端？？？但是我的客户怎么知道是在哪个端口服务器上启动的呢？

例如：

想象一下我有这样的用户界面：

启动 MIlind

开始 xyz

开始 abc

然后点击 strart 它将调用客户端并启动进程，如果先启动 Milind 那么我将如何启动 xyz？因为“启动 Milind”在端口 6789 启动客户端和服务器，其他启动过程将如何工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T12:59:51.070

仅为 Web 应用程序与本地 Java 程序通信而创建服务器/客户端应用程序似乎有很多开销（甚至更多地复制此过程以一次做不止一件事）。如果您在 Web 应用程序的后台寻找并发处理，您总是可以只创建一个线程（或多个线程）来完成工作。还是有一个简单的java应用程序不能嵌入到网络应用程序中的原因？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T13:07:33.070

在接受套接字连接服务器端时，您需要分离线程。使用 serversocket 很容易做到这一点。一个非常基本（未经测试！）的实现：

```
import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;

class Server {

    private ServerSocket socket;

    public Server() {
        try {
            this.socket = new ServerSocket(6789);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public void go() throws IOException {
        while(true) {
            Socket sock = socket.accept();
            new Thread(new ClientSession(sock)).start();
        }
    }

    public static void main(String[] args) {
        Server server = new Server();
        try {
            server.go();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    class ClientSession implements Runnable {

        private final Socket clientsocket;

        ClientSession(Socket sock) {
            this.clientsocket = sock;
        }

        @Override
        public void run() {
            //do stuff, like read from socket.
        }

    }

} 
```

请注意，您根本不需要更改端口。

# c# - 替换非 ASCII 字符

> ID：12708957
> 
> 赞同：1
> 
> 时间：2012-10-03T12:54:18.150
> 
> 标签：c#, string, replace, non-ascii-characters

我需要编写一个辅助方法来为给定的姓名-姓氏夫妇生成用户名，这样它应该为 name = *"Amy Farrah"*和 surname = *"Fowler"返回**"amyfarrah.fowler* " 。

 ***如果 name-surname 类似于 name = "ÄLİÇEÜ TÃRIĞ"* surname = *"GRÖßERŞİLT"*，我如何确定我的用户名只有 ascii 字符。该方法应返回*"aliceutarig.grobersilt"*。可以用所需的字符替换每个非 ascii 字符，但我想知道是否有更简单的解决方案。

提前致谢。

更新：我需要使用 C#**

# sql-server - access 2007中如何使用vba刷新表格列表

> ID：12708960
> 
> 赞同：3
> 
> 时间：2012-10-03T12:54:27.930
> 
> 标签：sql-server, ms-access, ms-access-2007, vba, adp

如何使用 vba 在`Access 2007`. `Sql`我使用以下代码制作表格`vba`：

```
DoCmd.RunSQL "SELECT * INTO table2 FROM table1", True    
RefreshDatabaseWindow
DoCmd.TransferDatabase acExport, "Microsoft Access", "C:\import.mdb", , "table2", tab2, 0 
```

`RefreshDatabaseWindow`错误消息：如果手动暂停和刷新，Microsoft Office Access 找不到对象 table2`F5`并运行返回以正常工作。如何自动完成？如果表列表处于活动状态，则在 Access 2003 中可以正常工作。

我尝试暂停但不工作：

```
Private Declare Sub sApiSleep Lib "kernel32" Alias "Sleep" (ByVal dwMilliseconds As Long)
...
RefreshDatabaseWindow
Call sApiSleep(4000)
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:31:48.223

这就是我用来附加 SQL/服务器表的方法。我删除它们，然后用此代码重新链接它们。显然，您必须为每个表重复最后一部分。我不知道这是否适用于 ADP。我的环境不使用 ADP。

```
Dim vConnect As String
Dim td As New TableDef
Dim vtablename As String

vConnect = "ODBC;Driver={SQL Server Native Client 10.0};SERVER=<server>;DATABASE=" <database>; Uid=<user>; Pwd=<pwd>;TrustServerCertificate=yes;encrypt = yes;"

'Delete existing tables
For Each td In CurrentDb.TableDefs
     vattributes = td.Attributes And dbAttachedODBC
     If Left(td.Name, 4) <> "Msys" And vattributes > 0 Then CurrentDb.TableDefs.Delete td.Name
Next
Debug.Print "Old Tables Deleted"

Set td = CurrentDb.CreateTableDef("<your table name>")
td.Connect = vConnect
td.SourceTableName = "<your table name>"
vtablename = td.Name
CurrentDb.TableDefs.Append td
Debug.Print "Attached table: " & vtablename 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:55:21.503

工作于`Access 2007, 2010`（项目`.ADP`）：

```
RefreshDatabaseWindow
DoCmd.SelectObject acTable, "table2", True
DoCmd.TransferDatabase ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-28T18:12:04.223

这在 Access2010 中工作正常

在建表和 TransferDataBase 之间调用这个函数

函数 refrescarconexionBBDD()

```
Dim cadenaConexion As String

cadenaConexion = Application.CurrentProject.BaseConnectionString
Application.CurrentProject.CloseConnection

Application.CurrentProject.OpenConnection cadenaConexion 
```

结束功能

# sql - 包含数百个请求的大型 SQL 数据集

> ID：12708963
> 
> 赞同：0
> 
> 时间：2012-10-03T12:54:39.300
> 
> 标签：sql, database, sqlite

有没有人知道免费提供的大型 sql 数据集。如果它不是虚拟生成的数据，那将是最好的，因为我会针对它发出大量请求。

一个例子是 [http://www.dbis.informatik.uni-goettingen.de/Mondial/](http://www.dbis.informatik.uni-goettingen.de/Mondial/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:58:31.683

UCSC 数据库包含他们的 mysql 数据库的转储：http: [//hgdownload.cse.ucsc.edu/goldenPath/hg19/database/](http://hgdownload.cse.ucsc.edu/goldenPath/hg19/database/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:09:01.573

您可以使用一些 DNA 或蛋白质数据库，它们有大量免费数据。 [http://www.rcsb.org/](http://www.rcsb.org/)例如

# php - 数字作为php中的变量名

> ID：12708979
> 
> 赞同：6
> 
> 时间：2012-10-03T12:55:41.297
> 
> 标签：php, variables

数字作为变量名不可能吧？但这有效

```
 ${4} = 444;
 echo ${4}; 
```

问题：使用这种语法有多少合理性？文档中关于此的信息在哪里？我没有找到。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T12:58:21.253

语法包含在[变量变量](http://php.net/manual/en/language.variables.variable.php)中。不，你没有“正当”使用这种语法。你绝对不应该**这样做**，没有充分的理由使用数字作为变量名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T12:59:10.653

无论语法如何，括号之间的变量都被认为是有效的（变量变量）。

```
${'sad asda sda'} = 444;
echo ${'sad asda sda'};
// still works. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T13:01:36.580

这也有效

```
$_4 = 444;
echo $_4;  //output 444. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-09T06:34:22.873

这是一个完美的 json 字符串：

```
$json_str = '{"1": "One", "02": "Two"}'; 
```

所以如果我要解码它：

```
$json_object = json_decode($json_str); 
```

访问元素的方法是：

```
$one = $json_object->{1};
$two = $json_object->{"02"}; 
```

# mysql - MYSQL连接失败与netbeans

> ID：12708983
> 
> 赞同：0
> 
> 时间：2012-10-03T12:55:59.237
> 
> 标签：mysql, connection, database-connection

> **可能重复：**
> [无法加载 com.mysql.jdbc.Driver](https://stackoverflow.com/questions/11437178/unable-to-load-com-mysql-jdbc-driver)

您好，我正在尝试更新我的表格，但连接一直失败。以下是我的代码：

```
try {
            String driver = "com.mysql.jdbc.Driver";
            Class.forName(driver).newInstance();
            Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/mysql?zeroDateTimeBehavior=convertToNull","root","P@typd79");
            Statement stmt = con.createStatement();
            String query = "INSERT INTO project_one.personal_info(ssn,name,street,city,state,zip,class,degree,s,imm) VALUES"
                    + "(" + social + "," + Name + "," + Address + "," + City + "," + State + "," + Zip
                    + "," + Year + "," + Degree + "," + HS + "," + IMM + ")";

            stmt.executeUpdate(query);
            JOptionPane.showMessageDialog(null, "New student added successfully");

        } catch (Exception e) {

            JOptionPane.showMessageDialog(null,"Data not saved: " + e,"Error",JOptionPane.ERROR_MESSAGE);

        } 

    } 
```

连接名称和驱动程序正确，但出现以下错误`java.lang.classnotfound.exeption:com.mysql.jdbc.Driver.`

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:58:15.663

看起来你缺少 jdbc jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:59:33.710

您应该将 mysql 驱动程序 jar 添加到您的构建路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T13:00:56.893

[从http://dev.mysql.com/downloads/connector/j/](http://dev.mysql.com/downloads/connector/j/)添加 jdbc mysql 驱动程序

# linux - 记录来自 SIGTERM 的消息

> ID：12708984
> 
> 赞同：2
> 
> 时间：2012-10-03T12:56:04.547
> 
> 标签：linux, logging, sigterm

当应用程序（在我的情况下是 C++ 守护程序）收到 SIGTERM 或 SIGINT 时，记录关闭消息的正确方法是什么？

根据[CERT](https://www.securecoding.cert.org/confluence/display/seccode/SIG30-C.+Call+only+asynchronous-safe+functions+within+signal+handlers)和[signal(7) 手册页](http://linux.die.net/man/7/signal)，从信号处理程序调用许多函数（可能包括大多数日志库使用的函数）是不安全的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T14:18:21.327

[Vlad Lazarenko](https://stackoverflow.com/users/405725/vlad-lazarenko)今年早些时候就这个话题写了一篇很棒的[博文。](http://lazarenko.me/2013/01/15/how-not-to-write-a-signal-handler/)在 Linux 上，它归结为使用或[`signalfd(2)`](http://man7.org/linux/man-pages/man2/signalfd.2.html)使用事件循环创建信号描述符。这是弗拉德从描述符中读取的示例[`poll(2)`](http://man7.org/linux/man-pages/man2/poll.2.html)[`epoll_wait(2)`](http://man7.org/linux/man-pages/man2/epoll_wait.2.html)

```
#include <sys/signalfd.h>
#include <signal.h>
#include <unistd.h>
#include <stdlib.h>
#include <stdio.h>

#define handle_error(msg)                               \
    do { perror(msg); exit(EXIT_FAILURE); } while (0)

int
main(int argc, char *argv[])
{
    sigset_t mask;
    int sfd;
    struct signalfd_siginfo fdsi;
    ssize_t s;

    sigemptyset(&mask);
    sigaddset(&mask, SIGINT);
    sigaddset(&mask, SIGQUIT);

    /* Block signals so that they aren't handled
       according to their default dispositions */

    if (sigprocmask(SIG_BLOCK, &mask, NULL) == -1)
        handle_error("sigprocmask");

    sfd = signalfd(-1, &mask, 0);
    if (sfd == -1)
        handle_error("signalfd");

    for (;;) {
        s = read(sfd, &fdsi, sizeof(struct signalfd_siginfo));
        if (s != sizeof(struct signalfd_siginfo))
            handle_error("read");

        if (fdsi.ssi_signo == SIGINT) {
            printf("Got SIGINT\n");
        } else if (fdsi.ssi_signo == SIGQUIT) {
            printf("Got SIGQUIT\n");
            exit(EXIT_SUCCESS);
        } else {
            printf("Read unexpected signal\n");
        }
    }
} 
```

此示例可以轻松扩展以集成到事件循环中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T14:05:34.463

日志记录可以不是从处理程序完成，而是在它之后：

```
int received_sigterm = 0;

void
sigterm_handler(int sig)
{
  received_sigterm = 1;
}

void
loop(void)
{
  for(;;) {
    sleep(1);
    if (received_sigterm)
      log("finish\n");
  }
}

int
main()
{
  log("start\n");
  signal(SIGTERM, sigterm_handler);
  loop();
} 
```

这个概念是从 openssh-6.1 来源借来的。

# c# - Android陆地/端口布局结构不起作用

> ID：12708989
> 
> 赞同：0
> 
> 时间：2012-10-03T12:56:48.727
> 
> 标签：c#, android, xamarin

我的项目中包含以下文件夹：

```
layout    
layout-land/
layout-port/ 
```

我将我的 main.axml 文件放在所有这些文件中，当然还对 UI 进行了一些调整。但是当我改变设备上的方向时，会发生注意。

我所做的与本教程基本相同，但我正在使用 Xamarin 和 Visual Studio： http: [//www.how-to-develop-android-apps.com/how-to-make-a-landscape -布局-in-android/](http://www.how-to-develop-android-apps.com/how-to-make-a-landscape-layout-in-android/)

不太确定我做错了什么？！有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:04:01.980

好的，所以基本上我有一个名为`layout-normal`. 这导致由于`layout-land`某种或其他原因而被忽略。我从项目中删除了该文件夹，它起作用了！

# c - 通过指向指针的指针在函数内部分配内存

> ID：12708993
> 
> 赞同：-1
> 
> 时间：2012-10-03T12:57:02.203
> 
> 标签：c, memory, memory-management

我需要从我的 C++ 代码中删除所有引用，因为我对纯 C 的了解已经很老了，这就是为什么我想征求你的意见。您对这种方式的内存分配有任何疑问吗？：

```
void myallocator2(int** mystr, int* howmany)
{
    *howmany = 40;
    *mystr = (int*)malloc( (*howmany) * sizeof(int));
    for(int i=0;i<*howmany;++i)
        (*mystr)[i] = i*2;
}

  int** mystr;
  int* howmany = new int();
  *howmany = 0;
  myallocator2(mystr,howmany);
  for(int i=0;i<*howmany;++i)
      do something (*mystr)[i] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:05:14.003

这是您的代码的 C++ 版本。没有讨厌的动态分配。

```
class A
{
public:
    int a_;
};

void myallocator2(std::vector<A>& mystr, int& howmany)
{
    howmany = 40;
    mystr.clear();
    mystr.reserve(howmany);
    for(int i=0;i<howmany;++i)
        mystr[i].a_ = i*2;
}

std::vector<A> mystr;
int howmany = 0;
myallocator2(mystr,howmany);
for(int i=0;i<howmany;++i)
    do something mystr[i].a_; 
```

免责声明 - 是的，我选择忽略“我需要从我的 C++ 代码中删除所有引用”。除非你给我们一些明确的、深思熟虑的动机，否则这只是一个愚蠢的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:02:12.770

如果您想采用安全的方式，请使用共享指针

# java - java.util.ConcurrentModificationException: 并发访问 hashmap

> ID：12708994
> 
> 赞同：0
> 
> 时间：2012-10-03T12:57:11.060
> 
> 标签：java, concurrency, map, hashmap

在一个实现中，我编写了以下代码。try-catch 块在一个方法中

```
try{
    InputVals iv = task.getInputVals();
    Map<String, String> map = iv.getAllValues();
    String a = map.get("value1");
    String b = map.get("value2");
    String x = funcxy.methodGetX();
    String y = funcxy.methodGetY();
    iv.setValue(xval, x);
    iv.setValue(yval,y);

    String []names = {"name1", "name2", "name3"}
    for(int i = 0; i<names.length; i++ ){
         iv.setValue("name"+i, names[i] );
    }
  } 
```

当我多次（并非总是）发出并发请求时，它会抛出“java.util.ConcurrentModificationException：并发访问hashmap”错误。我尝试使用

```
Map<String, String> map= new ConcurrentHashMap<String, String>();
map = iv.getAllValues(); 
```

但这并没有解决问题。你能帮帮我，让我知道我在哪里犯了错误。我不能改变的实施

```
InputVals iv = task.getInputVals(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:17:28.167

我不完全确定您要实现什么，但正如其他人已经指出的那样，您可能有多个线程试图同时操作返回的映射`iv.getAllValues()`，因此抛出异常。

使用 a 复制地图`ConcurrentHashMap`将与处理本地副本一样工作。但是请记住，这样做只会在本地使用它，因此不需要它提供的并发检查。您的代码的问题在于您实际上并未将数据复制到新地图。您将需要执行以下操作：

```
Map<String, String> map= new ConcurrentHashMap<String, String>( iv.getAllValues() ); 
```

根据您在修改地图条目时的需要，最简单和最快的可能会复制地图并处理本地副本。这将防止任何并发问题。当然，如果其他线程需要访问您更新的信息，则此计划不起作用。

```
try{
    InputVals iv = task.getInputVals();
    Map<String, String> map = new HashMap<String, String>();
    // copy all map values to a local var
    map.putAll( iv.getAllValues() );
    String a = map.get("value1");
    String b = map.get("value2");
    String x = funcxy.methodGetX();
    String y = funcxy.methodGetY();
    iv.setValue(xval, x);
    iv.setValue(yval,y);

    String []names = {"name1", "name2", "name3"}
    for(int i = 0; i<names.length; i++ ){
         iv.setValue("name"+i, names[i] );
    }
  } 
```

除此之外，您需要确保对地图的任何调用都以`synchronized`块的形式进行。但是，如果您在访问此地图的代码中有几个不同的位置，这可能会非常困难和乏味。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:04:06.407

您必须同步对 getInputVals() 返回的 Map 的所有访问。它正在一个单独的线程中的某个地方进行更改。您将需要以下代码行中的内容，但同样非常重要的是**lockObj**还必须应用于使用此地图的其他任何地方，包括当前正在修改的任何地方（此代码尚未显示） .

```
try{
    InputVals iv = task.getInputVals();
    String a;
    String b;

    synchronized (lockOjb) {
        Map<String, String> map = iv.getAllValues();
        a = map.get("value1");
        b = map.get("value2");
    }
    String x = funcxy.methodGetX();
    String y = funcxy.methodGetY();
    iv.setValue(xval, x);
    iv.setValue(yval,y);

    String []names = {"name1", "name2", "name3"}
    for(int i = 0; i<names.length; i++ ){
         iv.setValue("name"+i, names[i] );
    }
  } 
```

这可能会也可能不会，取决于您是否有能力更改此代码。例如，如果它已经在库中发生，您可能只需要重新设计代码，使其不是多线程的，至少在访问此映射的任何地方都是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T05:06:01.480

你是 做什么的`InputVals.setValue()`？它是如何定义的？如果您在使用原始变量的引用时在业务逻辑中定义 ConcurrentHashMap，则没有用。您需要注意实际的 bean 本身。

如果它像下面这样

```
Class Inputvals {
  Map<String, String> map = new HashMap <String,String>();
  public void setValue(String a,String b){
    map.put(a,b);
  }
  public Map<String,String> getAllValues(){
    return map;
  }
} 
```

我建议你改变如下

```
Class Inputvals {
  Map<String, String> map = new ConcurrentHashMap<String,String>();
  public void setValue(String a,String b){
    map.put(a,b);
  }
  ..
  ... 
```

这应该可以帮助您解决多线程访问问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-03T13:08:22.320

您可能需要将地图包装在同步集合中

```
Map<String, String> map = Collections.synchronizedMap(iv.getAllValues()); 
```

然后继续访问您的地图。

# jquery - 在 Tumblr 之外使用 Tumblr 的新照片集插件

> ID：12708995
> 
> 赞同：0
> 
> 时间：2012-10-03T12:57:12.713
> 
> 标签：jquery, gallery, photo, tumblr, image-gallery

正如您在此处看到的示例：[TUMBLR 的新](http://www.tumblr.com/tagged/photoset)照片集 是 Tumblr 的一个惊人的照片库添加。但我正在开发一个有很多照片的网站，我想以同样的方式使用画廊。

那么，有没有办法在我的常用网页中使用该插件？或者有没有其他插件可以对照片集做同样美丽的事情？

特别是在这个博客中，这个添加被巧妙地使用了：[example2](http://fuel.istockphoto.com/)

很快，我想要同样的自动计算的马赛克效果。

感谢您的友好回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:17:32.160

我写了一个插件，它复制了 Tumblr 的照片集并稍微扩展了功能，你可以在这里查看：[https ://github.com/PixelUnion/Extended-Tumblr-Photoset](https://github.com/PixelUnion/Extended-Tumblr-Photoset)

它打算在 Tumblr 上使用（因为它实际上只是一种增强，包括标题和 EXIF 数据等内容），但您应该能够使用可用的 JS。

# php - PHP表单向多个收件人发送电子邮件

> ID：12708997
> 
> 赞同：32
> 
> 时间：2012-10-03T12:57:17.323
> 
> 标签：php, forms, email

我有一些 PHP 代码用于将表单发送到特定的电子邮件地址。但是，我想在 PHP 中包含更多电子邮件地址，以便在发送时使用。我怎样才能做到这一点？

```
<?php
if(isset($_POST['email'])) {

    // EDIT THE 2 LINES BELOW AS REQUIRED
    $email_to = "email@email.com";
    $email_subject = "MVP Nomination";

    function died($error) {
        // your error code can go here
        echo "We are very sorry, but there were error(s) found with the form you submitted. ";
        echo "These errors appear below.<br /><br />";
        echo $error."<br /><br />";
        echo "Please go back and fix these errors.<br /><br />";
        die();
    }

    // validation expected data exists
    if(!isset($_POST['username']) ||
        !isset($_POST['body'])||
        !isset($_POST['email'])) {
        died('We are sorry, but there appears to be a problem with the form you submitted.');       
    }

    $username = $_POST['username']; // required
    $body = $_POST['body']; // required
    $email_from = $_POST['email'];         // required

  $error_message = "";
    $email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
  if(!preg_match($email_exp,$email_from)) {
    $error_message .= 'The Email Address you entered does not appear to be valid.<br />';
  }
    $string_exp = "/^[A-Za-z .'-]+$/";
  if(!preg_match($string_exp,$username)) {
    $error_message .= 'The Username you entered does not appear to be valid.<br />';
  }

  if(strlen($error_message) > 0) {
    died($error_message);
  }
    $email_message = "Form details below.\n\n";

    function clean_string($string) {
      $bad = array("content-type","bcc:","to:","cc:","href");
      return str_replace($bad,"",$string);
    }

    $email_message .= "Name: ".clean_string($username)."\n";
    $email_message .= "Comments: ".clean_string($body)."\n";

// create email headers
$headers = 'From: '.$email_from."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
@mail($email_to, $email_subject, $email_message, $headers);  
}
header("Location: ThankYou.html");  //Redirect to Thank You HTML page after email is sent
?>​ 
```

谢谢你。

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-10-03T13:00:10.427

这将起作用：

```
$email_to = "jhewitt@amleo.com,some@other.com,yet@another.net"; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-03T13:24:00.200

使用逗号分隔值，如下所示。

```
$email_to = 'Mary <mary@example.com>, Kelly <kelly@example.com>';
@mail($email_to, $email_subject, $email_message, $headers); 
```

或为电子邮件地址运行 foreach

```
//list of emails in array format and each one will see their own to email address
$arrEmail = array('Mary <mary@example.com>', 'Kelly <kelly@example.com>');

foreach($arrEmail as $key => $email_to)
    @mail($email_to, $email_subject, $email_message, $headers); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-03T13:00:54.203

如果您需要将电子邮件添加为抄送或密送，请在您用作标题的变量中添加以下部分：

```
$headers .= "CC: sombodyelse@noplace.com".PHP_EOL;
$headers .= "BCC: hidden@special.com".PHP_EOL; 
```

问候

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-03T13:01:33.753

您可以将收件人添加到`$email_to`用逗号 ( `,`) 分隔的变量中。或者，您可以将新字段添加到标题中，即`CC:`or`BCC:`并将您的收件人放在那里。`BCC`最推荐

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-03T13:00:47.033

如果我理解正确，试试这个

```
$headers = "Bcc: someone@domain.com"; 
```

或者

```
$headers = "Cc: someone@domain.com"; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-10-24T12:09:15.533

如果这些所有答案都不起作用，那么您可以简单地为多个收件人使用多个邮件功能。

```
$email_to1 = "firstEmail@demo.com";
$email_to2 = "secondEmail@demo.com";

mail($email_to1, $email_subject, $email_message, $headers);  
mail($email_to2, $email_subject, $email_message, $headers); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-08-06T19:31:27.497

确保使用“，”而不是“；”连接多封电子邮件

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-04-28T09:45:10.840

此外，如果您的电子邮件地址存储在数组中：

```
$emails = ['jhewitt@amleo.com', 'some@other.com', 'yet@another.net'];
$email_to = implode(',', $emails); // "glue" every array elements (emails) with a comma and return a single string "jhewitt@amleo.com,some@other.com,yet@another.net"
@mail($email_to, $email_subject, $email_message, $headers); 
```

当您从外部数据源检索电子邮件地址时，这会很有用。