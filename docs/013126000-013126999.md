# StackOverflow 问答 13126000-13126999

# android - 听硬按钮作为服务触发器

> ID：13126000
> 
> 赞同：0
> 
> 时间：2012-10-29T16:44:22.547
> 
> 标签：android, android-service, android-input-method

> **可能重复：**
> [收听后台服务中的音量按钮？](https://stackoverflow.com/questions/10154118/listen-to-volume-buttons-in-background-service)

我真的需要当按下硬按钮 (VOLUME_UP) 3 秒时，它会触发显示正常活动和发送消息等操作。

AFAIK，没有像听服务中的按钮这样的事情。但我真的需要它（或类似的东西），所以我试图在互联网上找到一种解决方法。我发现只有一些按钮（而不是我想要使用的按钮）广播有关它们的事件的信息，并找到了一些关于使用自定义 IME（输入法编辑器）的东西。我正在寻找 IME 的工作原理，我在这里寻求另一个（任何）想法！

谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T23:37:58.060

您无法在后台服务中收听硬按钮。不过，您可以在前台服务中收听软按钮。

这是一项安全功能。如果允许您使用硬按钮启动某项操作，您将能够绕过锁定屏幕。

你能详细说明用例吗？可能还有其他方法可以解决您的问题。

# java - 如何在 Eclipse Java 项目中限制对包的访问

> ID：13126002
> 
> 赞同：1
> 
> 时间：2012-10-29T16:44:24.003
> 
> 标签：java, eclipse, package

有没有办法（内置或通过插件）限制从 Eclipse 中的其他包访问 Java 包？

**例子：**

包（在同一个项目中）：

com.my.project.common

com.my.project.serviceV1

com.my.project.serviceV2

现在我想限制**从**common 访问 serviceV1 和 serviceV2。但是当然应该允许这些服务访问公共包

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:49:04.917

编辑：如果您正在寻找的只是可以使用 private/protected/public/default 包范围实现的简单包级别保护，那么我同意@AlexisPigeon 的评论 - 这是最简单的路线。否则，我会考虑我在下面提出的 jdepend 解决方案。

不，这是不可能的。我建议查看[JDepend](http://clarkware.com/software/JDepend.html)。它可以生成包依赖关系的报告。如果您的依赖约束之一被违反，您可以编写一个脚本来解析输出，然后使您的构建失败（有用于 maven、ant 和 gradle 的 jdepend 插件）。

# sql - 在 VBA (excel) 中使用 MYSQL 查询连接表

> ID：13126003
> 
> 赞同：1
> 
> 时间：2012-10-29T16:44:31.717
> 
> 标签：sql, vba, join, excel

我对 Visual Basic 完全陌生。我正在使用 MYSQL 数据库，我想在 excel 中使用 VB，这样我就可以处理更复杂的查询。出于某种原因，当我尝试在 vb 中加入表时，我收到一条错误消息。有人可以告诉我我的代码有什么问题吗？

```
strSql = "SELECT COUNT(*)FROM `order`" & _
                 "JOIN user ON user.id = order.destination_id" & _
                 "WHERE payment_status = 'pay';"

    rs.Open strSql, oConn, adOpenDynamic, adLockPessimistic

    res = rs.GetRows

    rs.Close

    Range("A1", "A6") = res(0, 0) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:45:20.063

您当前的查询将生成此字符串，

```
SELECT COUNT(*)FROM `order`JOIN user ON user.id = order.destination_idWHERE payment_status = 'pay';
               ^           ^                                          ^ 
```

您在连接期间缺少空间，为了纠正这一点，只需在双引号前添加空格即可。

```
strSql = "SELECT COUNT(*) FROM `order`   " & _        
         "JOIN user ON user.id = order.destination_id   " & _
         "WHERE payment_status = 'pay';" 
```

# c# - 如何获取路径文件夹浏览器对话框

> ID：13126008
> 
> 赞同：1
> 
> 时间：2012-10-29T16:45:18.693
> 
> 标签：c#

我遇到了一些线程问题，我需要从文件夹浏览器对话框中获取路径这是一个代码

```
Thread t = new Thread(() => myFolderBrowserDialog.ShowDialog());
                    t.IsBackground = true;
                    t.SetApartmentState(ApartmentState.STA);
                    t.Start(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-29T16:53:41.023

你可以这样做：

```
Thread t = new Thread(() => myFolderBrowserDialog.ShowDialog());
t.IsBackground = true;
t.SetApartmentState(ApartmentState.STA);
t.Start();
t.Join();

var path = myFolderBrowserDialog.SelectedPath; 
```

但是线程中确实存在零点，它与此相同：

```
myFolderBrowserDialog.ShowDialog();  //this will block until the user presses OK or cancel.
var path = myFolderBrowserDialog.SelectedPath; 
```

就个人而言，我会这样做：

```
Using (var dialog = new FolderBrowserDialog())
{
    //setup here

    if (dialog.ShowDialog() == DialogResult.Ok)  //check for OK...they might press cancel, so don't do anything if they did.
    {
         var path = dialog.SelectedPath;    
         //do something with path
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T17:41:16.447

我有一个这样的问题。主线程的 apartmentState 是 [MTAThread]。

在课程开始时，我输入了以下代码：

```
public class FormWithMTA{

  delegate void ModifyTextBox(string value);
  private FolderBrowserDialog opn;
  Thread runningThread;

  ... 
```

如果我把这个：

```
...
  opn = new FolderBrowserDialog();
  runningThread = new Thread(new ThreadStart(OpenDlg));
  //Change the apartmentState of that thread to work in STA if your main ApartmentState are MTA 
  runningThread.SetApartmentState(ApartmentState.STA);
  runningThread.Start();
... 
```

并使用该部分代码在 runningThread 中获取路径：

```
 private void OpenDlg()
    {
        opn.Description = "Escolha de diretório:";
        opn.ShowNewFolderButton = false;
        opn.RootFolder = System.Environment.SpecialFolder.MyComputer;

        try
        {
            DialogResult d = opn.ShowDialog();

            if (d == DialogResult.OK)
            {
                if (opn.SelectedPath != "")
                    UpdateStatus(opn.SelectedPath);
            }
        }
        catch (InvalidCastException erro)
        {
            //When work in main with MTA everytime i get that exception with dialog result
            if (opn.SelectedPath != "")
                UpdateStatus(opn.SelectedPath);
        }
        catch (Exception er)
        {
        }

        opn.Dispose();
        opn = null;

        runningThread.Join();
    }

    void UpdateStatus(string value)
    {
        if (txtBox.InvokeRequired)
        {
            //Call the delegate for this component.
            txtBox.Invoke(new ModifyTextBox(UpdateStatus), new object[] { value });
            return;
        }

        txtBox.Text = value;
    } 
```

好吧，该代码在 Windows 7 64 位中对我有用。在调试器中以及当我在客户端机器上执行程序时。

# mysql - 在一行内匹配不同的值

> ID：13126011
> 
> 赞同：1
> 
> 时间：2012-10-29T16:45:26.603
> 
> 标签：mysql, sql

我想执行一个查询，我想检查列 A 上是否具有某些值。A 可以只有 X 、 X 和 Y 或 XY 和 Z 的组合。

为了更好的理解。我正在表格本身中检查一本书的作者。该表具有 BOOK_ID、BOOK_TITLE、AUTHOR_NAME、AUTHOR_ORDER。

因此，一本书可能有 1,2 或 3 个作者，按 AUTHOR_ORDER 行中的顺序列出。我正在努力达到一个输出，如果一本书有 3 个作者，它将相应地显示从第一作者到第三作者。我现在陷入了需要比较值并将其呈现在输出中的部分。

知道如何在 MYSQL 输出中实现这一点吗？

样本 ：

![在此处输入图像描述](../Images/41dad116fc3946188e3b76886864791f.png)

输出结果或多或少是这样的：

如果标题的 au_ord 为 1,2 和 3，则应有一个新列，所有作者姓名按升序排列。

例如，对于*标题 BU1032，作者行将是 Bennet, Green*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:11:07.223

我认为`GROUP_CONCAT`这就是你所追求的：

```
SELECT  Title_ID, 
        Title,
        GROUP_CONCAT(au_LName ORDER BY au_Ord) AS Authors
FROM    Books
GROUP BY Title_ID, Title; 
```

**[SQL 小提琴](http://www.sqlfiddle.com/#!2/46ccd/1)**

# algorithm - 哪种算法可以用来解决分区概率的这种变化？

> ID：13126012
> 
> 赞同：1
> 
> 时间：2012-10-29T16:45:28.850
> 
> 标签：algorithm, dynamic-programming, partition-problem

这就是问题：

您有两个长度相等的数组 A 和 B。您必须将它们分成两组 P 和 Q，这样：（1）它们的差异最小化。(2) 如果 A[i] 进入 P 或 Q 之一， B[i] 应该进入另一个。

这是实际问题的链接：http: [//opc.iarcs.org.in/index.php/problems/EQGIFTS](http://opc.iarcs.org.in/index.php/problems/EQGIFTS)

这是我的逻辑（解决实际问题）：

如果输入为：abcdefg，则值列表和 a,b,c,d,e,f 的索引分别为 0,1,2,3,4,5

如果 t 是 a,b,c,d,e,f,g 的索引，则程序检查 t 和 i 使得： [t] 处的值 > [ti] 处的值，从 t = 5 开始，并且 i = 1，并将 i 的值增加 1 并将 t 的值减少 1。

一旦找到匹配项，它就会交换两个索引的值并对从 [t-1] 开始的值进行排序。结果值列表是输出。

我不知道这个算法有什么问题，但它对所有测试用例产生了错误的答案。我知道它可以使用动态编程来解决，并且它是分区问题的一种变体。但我不知道如何改变分区算法来解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T16:51:49.990

 **将问题简化为分区**问题：**`D[i] = B[i] - A[i]`为每个`i`.**

 **现在问题是数组 上的一个经典[分区问题](http://en.wikipedia.org/wiki/Partition_problem)`D`，您可以使用它的 DP 解来获得伪多项式时间解。

**正确性证明：**
如果`D`( `sum(D_1) = sum(D_2)`) 上有一个解决方案 - 则`i_1,...,i_k`选择 to`D_1`并`j_1,...,j_m`选择 to `D_2`（并且每个索引都在 i 或 j 中），使得：

```
sum(D[i's]) = sum(D[j's]) 
```

从构造上来说，意味着：

```
sum(B[i]-A[i]) = sum(B[j]-A[j]) (for each relevant i's,j's) 
```

因此：

```
sum(B[i's]) - sum(A[i's]) = sum (B[j's]) - sum(A[j's]) 
```

由此：

```
sum(B[i's]) + sum(A[j's]) = sum(B[j's]) + sum(A[i's]) 
```

这正是我们想要的，因为每个“索引”都分配给两个部分，一个部分得到 B，另一个得到 A。
另一个方向是相似的。

量子点

* * *

**问题的复杂性：**
问题仍然是 NP-Hard 的简单归约：

给定分区问题 ( `S=[a_1,a_2,...,a_n]`) 的实例，创建此问题的实例：

```
A=S, B=[0,...,0] 
```

很容易看出，对这个问题给出最优解的同一解将是对原始分区问题所需的分区，因此该问题是 NP-Hard。**

# opencv - 使用 MSER 作为有趣的关键点计算描述符大小

> ID：13126014
> 
> 赞同：1
> 
> 时间：2012-10-29T16:45:36.447
> 
> 标签：opencv, keypoint, feature-descriptor, point-of-interest, mser

我正在研究一种应用于组织学图像的图像配准方法。

我有一个问题。我想使用 MSER 特征检测器来检测图像上的关键点。使用 opencv 提供的 MSER 函数检索 MSER 轮廓后，我计算每个轮廓的质心，以便将其用作有趣的点。

如果我直接对感兴趣的点进行描述，例如使用 Surf 描述符，描述符的大小是 1，无法比较它们。

因此需要将描述符的大小修改为合适的大小。

有人有想法吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-06T12:30:33.583

答案很晚，但我希望它对某人有所帮助。

MSER 返回您的区域而不是积分。为了从 MSER 区域中提取描述符，您必须将区域映射到标准大小，例如从任何椭圆形到 30x30 像素圆，然后从中提取描述符（例如 SURF）。

如果你单独使用 SURF，它会使用 Harris 角点作为兴趣点，然后在比例空间中围绕它放置固定大小的窗口。

匹配通常是通过比较描述符来完成的。您正在尝试匹配不同的关键点（或兴趣点）。

最后但并非最不重要的一点是，MSER 质心和 SURF 兴趣点不太可能出现在同一位置，因为 MSER 检测同质区域并且 SURF 使用 Harris Corners。MSER 的质心不能有角，所以从技术上讲，它们永远是彼此的异常值。

在 MATLAB 2011 及更高版本中，MSER 可以与 SURF 描述符（包含在计算机视觉系统工具箱中）结合使用。

另一种方法是使用由[http://www.robots.ox.ac.uk/~vgg/research/affine/descriptors.html共享的computer_descriptors.ln](http://www.robots.ox.ac.uk/~vgg/research/affine/descriptors.html)

此致

# python - 如何将此字符串列表拆分为整数列表列表？

> ID：13126018
> 
> 赞同：1
> 
> 时间：2012-10-29T16:45:47.670
> 
> 标签：python, list

我有一个字符串列表，就像：

```
['25 32 49 50 61 72 78 41\n',
 '41 51 69 72 33 81 24 66\n'] 
```

我想将此字符串列表转换为整数列表列表。所以我的清单是：

```
[[25, 32, 49, 50, 61, 72, 78, 41], [41, 51, 69, 72, 33, 81, 24, 66]] 
```

我一直在考虑这个问题，但找不到解决方案。顺便说一句，我上面给出的字符串列表是使用

```
open("file", "r").readlines() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T16:47:01.507

用于`split()`将字符串拆分为列表，然后用于`int()`将它们转换为整数。

使用`map()`：

```
In [10]: lis=['25 32 49 50 61 72 78 41\n',
   ....:  '41 51 69 72 33 81 24 66\n']

In [11]: [map(int,x.split()) for x in lis]
Out[11]: [[25, 32, 49, 50, 61, 72, 78, 41], [41, 51, 69, 72, 33, 81, 24, 66]] 
```

或使用列表理解：

```
In [14]: [[int(y) for y in x.split()] for x in lis]
Out[14]: [[25, 32, 49, 50, 61, 72, 78, 41], [41, 51, 69, 72, 33, 81, 24, 66]] 
```

您也可以直接从您的文件中创建此列表，无需`readlines()`：

```
with open("file") as f:
    lis=[map(int,line.split()) for line in f]
    print lis
...
[[25, 32, 49, 50, 61, 72, 78, 41], [41, 51, 69, 72, 33, 81, 24, 66]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:24:48.910

```
 b=[[int(x) for x in i.split()] for i in open("file", "r").readlines()] 
```

试试这个列表理解

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T16:53:50.717

```
x = ['25 32 49 50 61 72 78 41\n', '41 51 69 72 33 81 24 66\n']    
map(lambda elem:map(int, elem.split()), x) 
```

# pmd - 无法在 STS 3.1.0 中运行 PMD（使用 Eclipse JUNO）

> ID：13126021
> 
> 赞同：0
> 
> 时间：2012-10-29T16:46:01.720
> 
> 标签：pmd

我在我的 STS 3.1.0 中安装了 Eclipse-pmd 插件。但是“PMD”选项没有出现在我的 STS 中。无法运行 PMD。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:19:54.887

如果您在 Eclipse 中右键单击任何 Java 文件，您会看到 PMD 选项吗？如果您转到 Eclipse Preferences，您是否看到来自 PMD 的配置条目？如果以上都不是，请重新安装PMD插件。

与 FindBug 或 CheckStyle 不同，PMD 插件不会预先配置要检查的规则。您必须转到 Eclipse Preferences -> PMD -> Rule Configuration 并选择要使用的规则。

# php - 带有ajax调用php函数的jQuery json循环

> ID：13126024
> 
> 赞同：1
> 
> 时间：2012-10-29T16:46:04.517
> 
> 标签：php, jquery, ajax, json

我是 Javascript 的新手。jQuery-ajax-php-cooperation 的代码做了一些奇怪的事情。它有效 - 有时。

这就是我想要做的：

*   在表单中进行一些设置（作品）
*   按下提交按钮后读取 JSON 文件（有效）
*   **循环JSON项目，提取每个项目的值并形成一个参数字符串（问题在这里：循环不是（总是）在按钮按下功能中执行）**
*   将从每个项目值构建的参数字符串发送到 PHP 文件（如果输入循环则有效）
*   接收来自 PHP 文件（html-tag）的响应（有效）
*   使用响应值更新表单元素（尚未实现，实际上显示带有 PHP 响应的警报以用于调试目的）

JSON 文件有效（经过测试）。HTML 页面是有效的 HTML5（已测试）。PHP 脚本工作并返回一个有效的 HTML-Image-Tag（已测试）。

当我按下按钮时，我为调试目的而实施的警报中没有显示来自 PHP 文件的响应。但这有效：

*   重新加载页面
*   打开萤火虫
*   在循环开始处设置断点
*   向前跳过一个语句
*   重新加载页面
*   循环进入，一切正常

我可以关闭 Firebug 并正确执行循环。

javascript代码

```
<script type="text/javascript">
$(document).ready(function () {
   //click event of submit button
   $('#generator').click(function(){

   // GET variables
   var datafile = "my.json";
   var logo = false;

   // if checkbox is checked
   if( $('#logo').attr('checked')){
      logo = true;
   };

   // read data from json file
   $.getJSON(datafile,function(data){

   //iterate through the data-sets
   for(var i=0; i < data.length; i++) {

    // get the response from server for each data-set
    $.ajax({
       type: 'POST',
       async: false,
       cache:false,
       url: 'myfile.php',
       data: 'param1='+data[i].field1+'&param2='+data[i].field2+'&logo='+logo,
             success: function(response){

              //$('#imgdisplay').html(response);
              // alert only for debugging purposes
              alert(response);}

          }); // end of ajax-call
       };  // end of for-loop
   }  ); // end of getJSON
 }); // end of button.click
 }); // end of document.ready
</script> 
```

（抱歉格式不好）

我使用了 for 循环，无法让 each() 循环正常工作。

这是形式：

```
<form name="settings">
   <label>Source file</label>
   <select id="datasource" name="datasource">
      <option value="extract">Extract</option> 
      <option value="filter">Filter</option>
   </select><br />
   <label>Logo</label>
   <input type="checkbox" id="logo" name="logo" value="ON"/><br />
   <p>&nbsp;</p>
   <input type="submit" value="Start Generator" id="generator" name="generator" />
</form>
<div id="imgdisplay" class="imgdisplay"></div> 
```

是什么导致了这种奇怪的行为？我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:07:20.057

尝试从匿名点击方法返回 false

```
$('#generator').click(function(){
    ....
    return false;
} 
```

这将确保点击不会发布您的表单

# jquery-mobile - 为sudoslider添加滑动支持，滑动不起作用

> ID：13126026
> 
> 赞同：0
> 
> 时间：2012-10-29T16:46:16.867
> 
> 标签：jquery-mobile, slider, swipe

我尝试通过[Jquery Mobile向](http://jquerymobile.com/)[SudoSlider](http://webbies.dk/SudoSlider/)添加滑动支持，但到目前为止它似乎不起作用。尝试刷卡时，在 ipad 和 iphone 上都没有任何反应。

我的页面的最小工作示例：

```
<!doctype html>
<html>
  <head>
    <title></title>
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script type="text/javascript" src="javascripts/jquery.sudoSlider.min.js"></script>
    <script type="text/javascript" src="javascripts/jquery.mobile.custom.min.js"></script>
  </head>
    <body>
      <div id="container">
            <div id="pages">
                <ul class="pages">
                    <li class="page" id="front"></li>
                    <li class="page" id ="about"></li>
                    <li class="page" id ="who"></li>
                    <li class="page" id="services"></li>
                    <li class="page" id="projects"></li>
                    <li class="page" id="contact"></li>
              </ul>
            </div>
      </div>
<script type="text/javascript" >
$(document).ready(function(){
    var sudoSlider = $("#pages").sudoSlider({
        history:           true,
        prevNext:          false,
        continuous:        true,
        customLink:        'a.slide-controller',
        numericText:['home', 'mission', 'about', 'services', 'portfolio', 'contact']
        });

        $(document).keyup(function(e) {
        switch(e.keyCode) {
          case 37 : sudoSlider.goToSlide("prev"); break;
          case 39 : sudoSlider.goToSlide("next"); break;
        }

        $("#pages").swiperight(function() {
            sudoSlider.goToSlide("next");
        });

        $("#pages").swipeleft(function() {
            sudoSlider.goToSlide("prev");
        });
      });
    });
</script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:49:32.903

虽然我不是 jquery 移动专家，但我认为您需要将滑动事件绑定到页面，例如`$("#pages").bind("swipeleft", function() {...});`

另外，您应该查看要使用的文档，`$(document).bind('pageinit')`而不是 `$(document).ready()`

访问[http://jquerymobile.com/demos/1.2.0/docs/api/events.html](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)，看看第一个黄色框；滑动事件也在下面解释。

# jquery - 动画后更新类

> ID：13126027
> 
> 赞同：1
> 
> 时间：2012-10-29T16:46:18.303
> 
> 标签：jquery

我有以下功能：

```
setTimeout(function() { 
    $("#em")
    .animate(
    { left: -15 }, {
        duration: "slow",
        easing: "easeOutBack"
    })
    .animate(
    { left: -315 }, {
        duration: "slow",
        easing: "easeOutBack"
    });                         
}, 2000); 
```

我想在动画完成后更改另一个元素上的类

```
$('.flip').removeClass('ui-icon-carat-1-w').addClass('ui-icon-carat-1-e'); 
```

我怎么把这两个绑在一起？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:48:16.740

[`.animate()`](http://api.jquery.com/animate/)可以接受回调作为其最后一个参数；如果您为其提供函数，则该函数将在动画完成时执行。

当使用带有选项的替代语法作为对象时，使用 key 提供回调`"complete"`。所以你会有：

```
$("#em")
.animate(
{ left: -15 }, {
    duration: "slow",
    easing: "easeOutBack",
    complete: function() {
       $('.flip').removeClass('ui-icon-carat-1-w').addClass('ui-icon-carat-1-e');
    }
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T16:48:06.240

该`animate()`方法接受将在动画完成后运行的回调。

# asp.net - 在 ASP 上下载和更新插入时显示加载屏幕的简单方法？

> ID：13126037
> 
> 赞同：0
> 
> 时间：2012-10-29T16:46:42.410
> 
> 标签：asp.net, vb.net, download

我只看到了有关如何在页面本身加载时显示加载 gif 并在加载后停止的示例，但我希望它在代码下载一些 XML 文件、读取它们并更新其内容时显示加载 gif，它通过按钮单击事件执行此操作。

我想让它显示那个圆形加载 gif，并希望像“锁定”屏幕一样，我有这个想法，如果它以某种方式使页面变灰并且只在其余部分的中心显示一个 gif，它会看起来很棒页面直到进程完成，就像 Windows 上的 UAC 弹出窗口一样，但对于初学者来说，只是图像。

最好的方法是什么？谢谢！

# javascript - Jquery $.fn 不工作

> ID：13126040
> 
> 赞同：1
> 
> 时间：2012-10-29T16:46:50.533
> 
> 标签：javascript, jquery

fn 之前可以轻松创建函数/方法，但是，我现在遇到了一些问题。任何帮助将不胜感激 ：）

```
$.fn.formClass = function(class) 
{

var bad_class = (class=='input_good') ? 'input_bad' : 'input_good';
if($(this).hasClass(bad_class))$(this).removeClass(bad_class);
 $(this).addClass(class);

} 
```

我试图在这个函数中使用它：

```
function check_username()
{

var username = $('input[name="username"]');
if(username.val().length<4||username.val.length>20)
{username.formClass('input_bad');}
} 
```

Console.log 说 Uncaught TypeError: Object [object Object] has no method 'formClass'

感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T16:50:43.293

我相信您应该在使用变量名时遇到错误，`class`因为它是保留关键字。尝试将其重命名为其他名称：

```
$.fn.formClass = function(class_name) {
  var bad_class = (class_name=='input_good') ? 'input_bad' : 'input_good';
  if($(this).hasClass(bad_class))$(this).removeClass(bad_class);
  $(this).addClass(class_name);
} 
```

# php - 在php中显示逗号后分隔的每个数字

> ID：13126050
> 
> 赞同：0
> 
> 时间：2012-10-29T16:47:41.233
> 
> 标签：php, sql, command-line

我有两张桌子

类别

```
id | category
------
1  | One
2  | Two 
```

ETC

第二个是

mp_photos

```
id|name|test|CategoryID
1 |name|test|1,2 
```

所以现在我需要从 mp_photos 行 CategoryID (1,2) 中获取数据，每个 categoryid 都用逗号分隔，并将每个数字与第一个表中的 Category 名称链接起来

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:02:23.060

最好的选择是重组您的数据库并使用和使用连接创建另一个`id_mp_photos`表`id_category`。

如果你做不到，有两种选择（都很慢）：

1.  `explode()`在php中使用

2.  使用 MySQL 函数`FIND_IN_SET()`，例如：

    `SELECT mp_photos.name, mp_photos.test, category.category FROM mp_photos JOIN category ON FIND_IN_SET(category.id, mp_photos.CategoryID) > 0`

# c# - 在 Windows 窗体中嵌入 Excel 2010 文档

> ID：13126053
> 
> 赞同：1
> 
> 时间：2012-10-29T16:47:52.310
> 
> 标签：c#, .net, vb.net, excel, interop

我一整天都在尝试解决这个问题，希望这里有人已经知道如何做到这一点 - 我试图在我的 Windows 窗体中显示 Excel 2010 工作表，没想到会这么难。

所以...从我在网上看到的情况来看，最好的方法是通过 WebBrowser 控件 - 我的代码非常简单：

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

    Dim strfilename = Application.StartupPath & "\SheetXX.xlsx"
    WebBrowser1.Navigate(strfilename, False)

End Sub 
```

但它会弹出一个文件下载对话框。起初，我的问题是，即使我按下“打开”按钮，它也会在单独的窗口中打开 Excel。我设法使用[此注册表修复程序](http://support.microsoft.com/kb/927009#letmefixit)修复了这个问题，但它仍然会在我的网络浏览器中打开它之前弹出对话框，我的最终用户会抱怨。

其他在线解决方案提到了Microsoft dsoframer，但这对我也根本不起作用......

任何人都知道如何使这项工作？简单明了，我只想在我的 windows 窗体中查看 Excel 工作表。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:12:24.997

我想出了这个**解决**方法：

首先，您必须将 Excel 文件保存为 MHT 格式。然后，只需添加一个 iFrame：

```
<p style="text-align:center">

    <iframe id="ExcelID" src="Reports/ExcelFile.mht?wmode=transparent" 
     width="100%" height="800" wmode="transparent" style="z-index: -1"></iframe>
</p> 
```

`wmode="transparent" style="z-index: -1`是因为有时*菜单项*“隐藏”在 iFrame 的内容后面。我不知道你有没有，但你可以删除它。

简单的方法：

```
 <iframe src="Reports/ExcelFile.mht" width="100%" height="800"></iframe> 
```

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T12:31:55.220

对于遇到类似问题的其他任何人，我发现做我想做的最好的解决方案就是[这个](https://stackoverflow.com/questions/13144756/control-excel-within-webbrowser-control)。希望它也能帮助别人！！

# jquery - jQuery Cycle Plugin 的变量问题

> ID：13126054
> 
> 赞同：0
> 
> 时间：2012-10-29T16:47:58.630
> 
> 标签：jquery, cycle

有人可以帮助我吗？

**这是我的 JS**

```
 /* Soccer Call */   
      var hoverIn = function() {
          $('#soccer').cycle({
              fx: 'scrollLeft', 
              speed: 1000,
              timeout: 100 
           });
        },
          hoverOut = function() {
          $('#soccer').cycle({
               fx:'pause'
            });
          };

        $('#soccer').hover(hoverIn, hoverOut); 
```

我在控制台中遇到的错误是

```
[cycle] unknown transition: pause ; slideshow terminating 
```

[jQuery 选项在这里](http://jquery.malsup.com/cycle/options.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:53:55.543

看起来暂停不是 fx 支持的值。基于此，我不完全确定，但我相信你想要：

```
 var hoverIn = function() {
   $('#soccer').cycle({
     fx : 'scrollLeft', 
     speed: 1000,
     timeout: 100 
   });
 }
 var hoverOut = function() {
   $('#soccer').cycle('pause');
 };

 $('#soccer').hover(hoverIn, hoverOut); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:41:56.223

我想出了一个解决我的问题的方法。

```
 var $ss = $('#soccer').cycle({
        fx: 'scrollLeft',
        timeout: 2000
    }).hover(

    function() {
        // on hover over, advance the slide
        $ss.cycle('next').cycle('resume');
    }, function() {
        // on hover out, pause
        $ss.cycle('pause');
    }).cycle('pause'); 
```

# javascript - ruby on rails：多次上传和查看

> ID：13126056
> 
> 赞同：0
> 
> 时间：2012-10-29T16:47:59.050
> 
> 标签：javascript, ruby-on-rails, paperclip

我目前正在使用回形针上传单张照片。当用户进入显示视图时，它会显示照片和与之相关的信息。现在我想更新它以接受多张照片，以便所有照片都显示在显示视图上。我需要使用什么？（JavaScript 和更新回形针以进行多次上传？）或者还有别的吗？

我已阅读[http://sleekd.com/general/adding-multiple-images-to-a-rails-model-with-paperclip/](http://sleekd.com/general/adding-multiple-images-to-a-rails-model-with-paperclip/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:09:45.247

如果你想处理多文件上传，我建议你使用这个 jquery 库

[https://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)

它非常深入，非常适合多文件上传。

另外，这个很好的例子是关于如何用回形针实现的。

[Rails 3.1 + 回形针 + jQuery 文件上传](https://stackoverflow.com/questions/7883118/rails-3-1-paperclip-jquery-fileupload)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:08:49.580

创建一个将保存照片的 Photo 类。像这样

```
class Photo < ActiveRecord::Base

  belongs_to :your_class_having_photos

  #paperclip methods and validations ....
end 
```

在您的上传视图中：

```
<%=file_field "'photos'[]"%>
<%=file_field "'photos'[]"%>
<%=file_field "'photos'[]"%>

... 
```

通过 JS 或硬编码随心所欲地完成它。然后在提交后，会有一个名为 params[:photos] 的参数，其中包含多张照片的数组。然后你可以做

```
params[:photos].each do |p|
   photo = @your_class_object.photos.build(p)
   photo.save
end 
```

在您的控制器中，或者在您想要的更好的代码中。

# javascript - 无法将数据从 Sammy 传递到淘汰赛模板

> ID：13126057
> 
> 赞同：1
> 
> 时间：2012-10-29T16:47:59.330
> 
> 标签：javascript, jquery, knockout.js, js-amd, sammy.js

我已经看了好几个小时了，但我认为我看不到解决方案。

这是我的 router.js：

```
 define('router', ['jquery', 'config', 'nav','store'], function ($, config, nav, store) {

    var
        concepTouch = Sammy('body', function () {
        // This says to sammy to use the title plugin
            this.use(Sammy.Title);
            this.use(Sammy.Mustache);
        // Sets the global title prefix
        this.setTitle(config.title.prefix);
        // So I can access sammy inside private methods
        var sammy = this;

        function establishRoutes() {
            // Defines the main container for content then
            var mainConainer = $(config.mainContentContainerId);
            // Adds animation loading class to the main container
            mainConainer.addClass(config.loadingAnimationCssClass);
            // iterates through routes defined in config class then
            _.forEach(config.appRoutes, function(obj, key) {
                // defines each one as a route
                sammy.get(obj.hashV, function(context) {
                    // Store the requested route as the last viewed route
                    store.save(config.stateKeys.lastView, context.path);
                    // Fetches its html template
                    context.render(obj.tmpltURL, { 'routeData': context.params })
                        // Appends that htmlo template to the main container and removes loading animation
                        .then(function(content) {
                            mainConainer.removeClass(config.loadingAnimationCssClass).html(content);
                        });
                    // Finally adds the route title to the prefix
                    this.title(obj.title);
                });

                // Overriding sammy's 404
                sammy.notFound = function () {
                    // toast an error about the missing command
                    toastr.error(sammy.getLocation() + ' Does not exist yet!');
                    // Go to last visited anf if not 
                    sammy.setLocation(
                        store.fetch(config.stateKeys.lastView) || config.getDefaultRoute()
                    );
                };
            });
        }
        // Calls for routes to be established
        establishRoutes();        
        }),   
        // runs concep touch as a sammy App with the initial view of default route
        init = function () {            
            // Try to get today's last visit and if not available then fallback on default
            concepTouch.run(store.fetch(config.stateKeys.lastView) || config.getDefaultRoute());
            // Make the correct nav item active and add Click handlers for navigation menu
            nav.setStartupActiveClass(store.fetch(config.stateKeys.lastView) || sammy.getLocation())
                .addActiveClassEventHandlers();
        };    
    return {
        init: init,
        concepTouch: concepTouch
    };
}); 
```

当我提交搜索表单时，这会为我获取此模板：

```
<div id="contacts" class="view animated fadeInLeft">
    <h3>Search results for {{routeData}}</h3>
    <ul data-bind="template: { name: 'searchresults-template', foreach: searchResults }"></ul>
</div>
<script type="text/html" id="searchresults-template">
    <li data-bind="text: type"></li>
</script>

<script>
    require(['searchresults'], function (searchresults) {
        searchresults.get(to Some how Get routeData.term);
    });
</script> 
```

我找不到正确的方法让 Mustache 将这行 router.js`context.render(obj.tmpltURL, { 'routeData': context.params })`中的数据传递到`{{routeData.term}}`模板内部。

```
{{routeData}} on its own returns `SAMMY.OBJECT: {"TERM": MY SEARCH TERM}` 
```

我无法使用 . 符号。此外，即使可行，它也不能传递给 Javascript，这是我真正需要的

```
searchresults.init(); is waiting for this paramter `searchresults.init(routeData.term);` 
```

或者也许答案是在这里找到一种访问 sammy 上下文的方法？为了获得参数，在 sammy 之外？类似`Sammy.Application.context.params['term']`但ofcourse应用程序没有这样的方法所以不知道！？:(

我是否完全走错了路？如何轻松地将查询字符串参数作为模板中的可访问对象传递，以便淘汰赛可以使用它。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:50:15.410

```
<div id="contacts" class="view animated fadeInLeft">
    <h3>Search results for {{#routeData}}{{term}}{{/routeData}}</h3>
    <ul data-bind="template: { name: 'searchresults-template', foreach: searchResults }"></ul>
</div>
<script type="text/html" id="searchresults-template">
    <li data-bind="text: type"></li>
</script>

<script>

    require(['searchresults'], function (searchresults) {
        var searchTerm = "{{#routeData}}{{term}}{{/routeData}}";
        searchresults.get(searchTerm);
    });
</script> 
```

# ios - GCD @try @catch @finally

> ID：13126058
> 
> 赞同：1
> 
> 时间：2012-10-29T16:48:03.893
> 
> 标签：ios, try-catch, grand-central-dispatch

如果我放了一个 try catch 并 finally 在一个异步 GCD 调用中，finally 似乎通常不会被执行，而且我也不确定 catch，似乎有时会执行。

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
    @try {
        [self methodThatAlwaysThrowsAnException];
    }@catch (NSException *exc) {
        NSLog(@"Caught the Exception %@",exc);
    }@finally{
       NSLog(@"Should always execute");
    }
}); 
```

有人知道为什么吗？

因此，我将 finally 调用置于外部，`dispatch_async`但我更愿意知道我的尝试已完全执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:01:45.073

尽量避免`@try/@catch`控制流操作。

此外，您的代码示例对我来说也很好。`@finally`块总是被执行，`@catch`如果抛出异常，块也是如此。

# bash - 在 shell 脚本中使用 egrep 时转义单引号

> ID：13126063
> 
> 赞同：1
> 
> 时间：2012-10-29T16:48:22.933
> 
> 标签：bash, shell, sh

我需要在给定的输入字符串中找到一些特殊字符。如果字符串包含以下特殊字符，它应该找出来。我正在做 egrep 来寻找角色。我的代码适用于每个字符，但不适用于单引号。请找到我的代码片段。

```
splCharCheck='egrep "&|\"|:|\'" | wc -l'

count=`echo  "$Name" | eval $splCharCheck` 
```

谁能帮我在这里转义单引号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:41:19.503

你想达到什么目的？这闻起来像 XY 问题。

在 bash 中，您可以轻松地使用转义文本

```
printf "%q\n" "$Name" 
```

例如：

```
$ Name="Some 'intricate' value"
$ printf "%q\n" "$Name"
Some\ \'intricate\'\ value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T00:34:22.283

您正在尝试将单引号嵌入到双引号字符串中，该字符串位于单引号字符串中。问题是在单引号字符串中，双引号不被视为任何特殊内容，因此中间的单引号被视为单引号字符串的结尾而不是它的一部分。为此，您需要结束单引号字符串 ( `'egrep "&|\"|:|'`)，以其他方式（或`\'`或`"'"`​​ ）转义单独的单引号，然后使用您想要的其余部分 ( ) 开始一个新的单引号字符串`'" | wc -l'`。最终结果：

```
splCharCheck='egrep "&|\"|:|'\''" | wc -l' 
```

但是，我必须同意@sehe 的观点，您似乎正在尝试解决错误的问题。你为什么把这个命令放在一个变量中而不是直接执行它？这[通常是一个坏主意](http://mywiki.wooledge.org/BashFAQ/050)（`eval`只会增加更多让事情变得奇怪的机会）。而且，进一步备份，您真正想要做什么？

ps 如果你必须使用`eval`，至少双引号你正在评估的字符串。不这样做可能会导致一些严重难以理解的错误。最后，我建议使用`$( )`而不是反引号，因为它的解析异常更少：

```
count=$(echo  "$Name" | eval "$splCharCheck") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T16:54:46.040

不要“逃避”单引号。检查以下：

```
# cat test
'name with quotes'
no quotes

# cat test | egrep "'"
'name with quotes'

# cat test | egrep "\'"
'name with quotes'
no quotes 
```

# mysql - Django多个数据库中的不一致

> ID：13126064
> 
> 赞同：1
> 
> 时间：2012-10-29T16:48:36.583
> 
> 标签：mysql, django, multiple-databases, django-database

我已经设置了 Django 多数据库配置。我有一个用于写入的默认数据库和两个用于读取的从属数据库。我正在使用 mySql。

使用 Django shell，我写入数据库并使用 sql shell 我可以确保写入操作在默认值和从属上成功。

但是，当我尝试从 shell 查询数据库时，我找不到最新的附加值。我错过了什么吗？

# python - 如何将 pygame 库导入 Eclipse 的 pydev？

> ID：13126067
> 
> 赞同：0
> 
> 时间：2012-10-29T16:48:40.093
> 
> 标签：python, pygame, pydev, libraries

我有 Eclipse 工作并且正在使用 Pydev 插件，我需要一些有关 pygame 的帮助。我在 Mac 上，并设法让 pygame 使用自制软件为 python 3.3 工作，而 pydev 给我带来了一些麻烦。图书馆似乎不被认可。我可以根据需要使用 pygame，做类似的事情

```
import pygame 
```

和

```
pygame.init() 
```

没有问题，但 Eclipse 无法识别模块并说诸如

```
unresolved import: pygame 
```

同样，我认为这里的问题是 Eclipse 无法访问 pygame 库。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:52:06.480

Windows > 首选项 > pydev

寻找 python 解释器行

在库选项卡上，单击新文件夹并添加 pygame 文件夹路径，应用即可完成

**注意**：确保使用 python 3.x 作为项目解释器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-04T00:33:13.287

我一直在浪费时间试图让它也能正常工作。我最终找到了这些步骤（你不需要全部，这里分享我的部分努力）。

在 Python 外壳中：

```
import sys
print (sys.path) 
```

我注意到路径中没有出现 PYGAME。最终我放弃了 .exe 二进制文件，并被告知使用 .WHL 文件和 Python PIP 进行安装。但被告知无效的车轮文件。

最终工作的是（在 Windows 中，但类似的应该在其他操作系统中工作）以管理员身份运行命令提示符（只是为了确定）。也许该解决方案也适用于其他操作系统（您必须尝试）。

从`C:\>`I Changed Dir 到 my `Python.exe`（或 python 程序本身）。

从命令提示符的 python 目录中，我输入了以下内容（就像在 linux`apt-get install`命令中一样）：

```
python.exe -m pip install pygame 
```

不久之后，出现了表明正在下载的哈希标记`#####`（shell 中的 linux 类型进度条）。

在 ECLIPSE 中，无需更改 Libraries 文件夹以包含 PyGame 文件夹，我就能够运行示例 Python PYGAME 脚本示例（我得到了一个白屏，但还没有走得更远）。我很高兴不必看到追溯错误消息。

只是认为这会对某人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-18T08:20:04.423

python.exe -m pip install pygame [完美运行]

# scala - Scala：对列表对列表

> ID：13126068
> 
> 赞同：12
> 
> 时间：2012-10-29T16:48:45.827
> 
> 标签：scala, functional-programming, scala-collections

我有一个配对列表：

```
val pairs = List("a" -> 1, "b" -> 2, "c" -> 3) 
```

我想将其转换为一对列表：

```
List("a", "b", "c") -> List(1, 2, 3) 
```

基本上，我想要 zip() 的反面

有什么优雅的方法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-29T16:49:39.687

拉链的反面？那可能是什么？`unzip`也许？

```
scala> List("a" -> 1, "b" -> 2, "c" -> 3).unzip
res0: (List[java.lang.String], List[Int]) = (List(a, b, c),List(1, 2, 3)) 
```

# yii - Yii 页面的 url 不正确

> ID：13126072
> 
> 赞同：0
> 
> 时间：2012-10-29T16:49:06.273
> 
> 标签：yii

我想要 404 页面以获取不正确的 url。如果我输入`http://mysite.com/some-incorrect-url`我想要 404 页面。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:56:47.690

Yii 通过[`errorHandler`](http://www.yiiframework.com/doc/api/1.1/CApplication#getErrorHandler-detail)应用组件处理无效的 URL；您可以阅读它的[文档](http://www.yiiframework.com/doc/api/1.1/CErrorHandler)以查看将在 404 上显示的视图的放置位置。

如果您需要配置错误处理程序组件，您可以从主应用程序配置文件中进行配置。

# jquery - Twitter 引导工具提示，获取创建者对象

> ID：13126079
> 
> 赞同：0
> 
> 时间：2012-10-29T16:49:32.027
> 
> 标签：jquery, tooltip, d3.js

有没有办法将工具提示的创建者对象链接到工具提示本身。

问题是，当创建工具提示时，它的父级始终是主体，因此创建元素和工具提示本身之间的链接丢失了。

- 编辑：

当您创建一个工具提示时，twitter-bootstrap 所做的就是为该工具提示创建一个新的 DOM 元素。但是，它没有将其相对于创建它的元素放置，而是将其放在 body 元素下方。

例如，如果您`<a>`的 HTML 中有一个创建工具提示的链接，则工具提示元素本身被放置在 body 元素下，完全失去了与`<a>`创建它的元素的关系。

现在想象一下我同时有两个工具提示。没有办法告诉代码中哪个是哪个。

# c# - 预生成的 XML 序列化程序程序集

> ID：13126081
> 
> 赞同：1
> 
> 时间：2012-10-29T16:49:40.343
> 
> 标签：c#, xml, serialization, web, xamarin.ios

我有一个连接到 Web 服务和 VMware 环境的 Visual Studio 程序。该过程的一部分是连接并理解返回的 XML（即将其转换为自定义对象），这涉及编译代理文件（XML 序列化程序集 dll 文件）。

我曾尝试在我的 Monotouch 程序中使用此文件，但出于某种原因，Monotouch 似乎不想了解 XML 序列化程序程序集。它会忽略它，因此我会返回 XML 节点，而不是通过 XML 序列化程序程序集将 XML 映射回正确的自定义对象。

如何让 Monotouch 识别文件并使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:59:26.010

Mono 或任何支持 Mono 的产品（如 MonoTouch 或 MonoDroid）都不支持 XmlSerializerAssembly。

# c - 这将在 C 编程中做什么：++group[ (int) (value[i]+0.5)/10]

> ID：13126083
> 
> 赞同：0
> 
> 时间：2012-10-29T16:49:46.170
> 
> 标签：c, arrays

以下代码是如何确认输入的数字是否在特定范围内的示例。

例如，如果我输入数字说 N，那么我想要增量计数器，它表示它是否在以下范围内：

1-10 11-20 ... 91-100

```
Here is the code snip from one of the text book:

#define MAXVAL 50
#define COUNTER 11
main ()
{
float value[MAXVAL];
int i, low, high;
static group[COUNTER] = {0,0,0,0,0,0,0,0,0,0,0}

*/READING AND COUNTING*/

for(i=0; i<MAXVAL; i++)
{
/* READING OF VALUES*/

scanf("%f", &value[i]);

/* COUNTING FREQUENCY OF GROUPS */

++group[ (int) (value[i]+0.5)/10]  <<< I would like to understand how this will find if number is in specific ranges?

/* PRINTING OF FREQUENCY TABLE */

printf("\n");
printf(" GROUP RANGE FREQUENCY\N\N");

for(i=0; i< COUNTER; i++)
{
low = i*10;
if (i==10)
high =100;
else 
high=low + 9;
printf( " %2d %3dto%3d %d)\n", i+1, low,high,group[i]);

}

} 
```

这在上面的 C 程序中会做什么： ++group[ (int) (value[i]+0.5)/10]

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:02:36.770

检查组数组的索引：

```
[(int) (value[i]+0.5)/10] 
```

这有效地获取从控制台输入扫描的值，加上 0.50，将总和除以 10，然后转换为 int。更好的问题是*为什么要这样做*？

加上 0.50 是为了考虑四舍五入。如果`value[i]`等于或高于 0.50 的余量（例如`1.51, 2.50, 3.99`等），这将强制它为下一个整数 ( `2.01, 3.00, 4.49`)。

接下来，除以 10。这显然假设输入的值介于 0.00 和完全小于 109.50 之间。除以 10 可确保这些值介于 0.00 和 10.00 之间。一旦控制台输入大于 109.50 ，这当然**不会起作用。**

然后强制转换为 (int)。够直了。杀死浮点数的分数并制造您的整数。

最后，假设输入*实际上*介于 0.00 和完全小于 109.50 之间，匹配 group[] 数组中必要范围的计数器将加一。

归根结底，尝试将输入值分组并在适当范围内更新计数器是一种糟糕的机制，一旦输入值> 109.50，它就会阻塞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:54:49.120

嗯是这样的：

假设`group[0] = 0->10, group[1] = 11->20, group[2] = 21->30..` 以浮动为例：`10.3`

在那里应用公式，`10.8/10 ~= 1`。因此它在**10->20**范围内。

再举一个例子：**22.4**

在那里应用公式，`(22.4 + 0.5)/10 ~= 22.9/10 = 2`。因此它在范围内`20->30`。等等。它适用于`high = 100`和`low = 0`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T17:04:38.487

`++group[ (int) (value[i]+0.5)/10]`是

*   取浮点输入值`value[i]`，
*   将其四舍五入为 int`(int) (value[i]+0.5)`
*   然后除以 10 得到一个组索引，然后
*   将 1 添加`++group[...]`到它所属的组中。

换句话说，它正在计算介于 0..9、10..19、20..29、... 100..109、110..119 之间的值的数量

这段代码是完全**不安全**的。如果输入值大于 COUNTER * 10 或负数，则将写入随机字节的内存。扔掉这段代码或在其中进行一些安全检查。

**编辑**

安全检查，忽略超出范围的输入值。

```
int g = (int) (value[i]+0.5) /10]
if (0 <= g && g < COUNT)
  ++group[g]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T17:11:59.653

让我们分解它以了解它。

读`++group[ (int) (value[i]+0.5)/10]`作：我想将组数组的索引增加 1。哪个索引？它以某种方式取决于用户输入的值 (value[i]) 为什么要添加 0.5 呢？对浮点数进行四舍五入。更具体地说，取那个数字的 ceil() 为什么除以 10？因为你的小组是 10 人。

示例：用户输入 11。 value[i] = 11 (float) 11 + 0.5 = 11.5 (float) 11.5 / 10 = 1.15 (float) typecast 1.15 to int = 1 (int) ++group[1], 递增 group[ 1] 按 1 表示 11 属于第 1 组，即 10 - 19

另一个例子：用户输入 9。 value[i] = 9 (float) 9 + 0.5 = 9.5 (float) 9.5 / 10 = 0.95 (float) typecast 0.95 to int = 0 (int) ++group[0], 递增 group [0] 通过 1 表示 9 属于第 0 组，即 0 - 9

另一个例子：用户输入 9.1。value[i] = 9.1 (float) 9.1 + 0.5 = 9.6 (float) 9.6 / 10 = 0.96 (float) typecast 0.95 to int = 1 (int) ++group[1]，将 group[1] 增加 1 并显示9.1 属于第 1 组，即 10 - 19

注意：根据代码，您的组是 0-9、10 - 19 ... 而不是 1 - 10、11 - 20

# c++ - 使 MFC CTabCtrl 不使用绘图选项卡的完整控件宽度

> ID：13126085
> 
> 赞同：0
> 
> 时间：2012-10-29T16:49:49.003
> 
> 标签：c++, winapi, mfc, tabs, ctabctrl

我们有一个涉及更改应用程序的请求，即使我们的一个选项卡控件只能访问控件的部分宽度以绘制选项卡，以便我们可以粘贴一些额外的状态文本在侧面的剩余区域。

图片可能会有所帮助：

![复杂的 UI 请求](../Images/6fa90f0d497704f19a96dda9fff7d12e.png)

如您所见，选项卡控件一直延伸到对话框的右侧，但我们希望为“总库存成本”保留一个区域，并且我们希望确保其他选项卡（常见的）不会侵占到那个区域。

除了完全重写应用程序之外，我对几乎任何实现这一点的方法都持开放态度。如果有更好的选项卡控件，我们可以切换选项卡控件，或者在合理范围内更改选项卡设置的实现。

我原以为可以分别设置客户区和选项卡绘制矩形区域，但似乎并非如此。如果我错了，请纠正我。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:07:40.437

如果我理解正确，你得到的是这个

主窗口的客户区：

*   -> tab ctrl 占据整个区域
*   -> 选项卡控件之上的一些其他控件

你能做的是这个

主窗口的客户区：

*   -> 底部的小标签控件
*   -> 主窗口客户区中的所有其他控件

# actionscript-3 - 如何从 Actionscript 3 tcp 套接字“read_some”？

> ID：13126086
> 
> 赞同：0
> 
> 时间：2012-10-29T16:49:55.350
> 
> 标签：actionscript-3, sockets

所以我查看 as3[套接字 api](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/Socket.html)并查看`readBytes(bytes:ByteArray, offset:uint = 0, length:uint = 0):void`如何实现“读取一些”（提供 ByteArray 和要读取的所需字节长度，并从函数提供的读取数据的实际数量获得`<=`长度）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:15:35.067

使用 bytesAvailable 属性确定您是否可以读取“desiredLength”字节[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/Socket.html#bytesAvailable](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/Socket.html#bytesAvailable)

```
var desiredLength:Number = 20;

desiredLength = Math.min(desiredLength,myByteArray.bytesAvailable);
mySocket.readBytes(myByteArray, 0, desiredLength); 
```

# javascript - 自动滚动（旋转）ul

> ID：13126088
> 
> 赞同：0
> 
> 时间：2012-10-29T16:49:59.797
> 
> 标签：javascript, jquery, jquery-tools, autoscroll, autoplay

位于 php 页面中的是以下代码：

```
$(function() {
    $(".scrollable").scrollable({ items: "li", circular: true, mousewheel: false, next: ".next", prev: ".prev" }).autoscroll({autoplay: true, interval: 100});
}); 
```

这个小幻灯片应该能够在页面加载时从左到右滚动（旋转）图像。我对 php 了解不多，但是这段代码不应该足以让幻灯片自行移动吗？（当用户点击左右按钮时它会移动）

如果有更好、更快、更简单的方法来做到这一点，我真的很想在这里得到一些建议。我试过环顾四周，但我发现的任何代码对于这个小任务来说似乎都太复杂了。

**编辑**：我没有创建页面，所以我不知道这个功能是什么。我正在查看包含在其中的所有页面，看看是否可以找到调用 javascript/jquery 的位置。

**解答**： 对 jquery 的调用位于我必须找到的另一个页面上。但是，是的，这就是问题所在！只有一行 jquery 被调用，而不是我选择的答案中提到的 2 行。:/ 看起来有人开始了页面，但从未完成它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:10:15.863

你需要一些 CSS + [jQuery](http://jquery.com/) + [jQuery TOOLS](http://jquerytools.org/)插件扩展。

就像这样：http: [//jsbin.com/oviqap/1/edit](http://jsbin.com/oviqap/1/edit)

有关详细信息，请参阅[http://jquerytools.org/demos/scrollable/index.html](http://jquerytools.org/demos/scrollable/index.html)

# jquery - 画布制作从另一个

> ID：13126090
> 
> 赞同：0
> 
> 时间：2012-10-29T16:50:00.940
> 
> 标签：jquery, canvas

我有一个工作倒数计时器，唯一的事情是我需要多次显示它，我似乎无法让它为多个计数器工作。

工作代码：http: [//jsfiddle.net/3RpvJ/](http://jsfiddle.net/3RpvJ/)

我试图制作更多的 div，比如 timer1 timer2 enz。但我似乎无法让它工作

```
window.onload = function() {
    canvas  = document.getElementById('timer'),
    seconds = document.getElementById('counter'),
    ctx     = canvas.getContext('2d'), 
    sec     = 180,
    countdown = sec;

ctx.lineWidth = 8;
ctx.strokeStyle = "#528f20";

var 
startAngle = 0, 
time       = 0,
intv       = setInterval(function(){

    var endAngle = (Math.PI * time * 2 / sec);
    ctx.arc(65, 35, 30, startAngle , endAngle, false);
    ctx.clearRect(0, 0, 200, 200);

    startAngle = endAngle;
    ctx.stroke();

    countdown--;
    if ( countdown > 60){
    seconds.innerHTML = Math.floor(countdown/60);
    seconds.innerHTML += ":" + countdown%60;
    }
    else{
    seconds.innerHTML = countdown;
    }

    if (++time > sec,countdown == 0 ) 
    { 
        clearInterval(intv),
        $("#timer, #counter").remove(),
        $("#timers").prepend('<img id="theImg" src="http://ivojonkers.com/votify/upvote.png" />'); 
    }

}, 10); 
```

}​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:21:00.333

[http://jsfiddle.net/3RpvJ/5/](http://jsfiddle.net/3RpvJ/5/)

```
function Timer(dur, par, can, cnt) {
    var parent = $(par),
        canvas = can ? $(can, parent)[0] : $('.timer', parent)[0],
        seconds = cnt ? $(cnt, parent)[0] : $('.counter', parent)[0],
        //ctx = canvas.getContext('2d'),
        sec = dur,
        countdown = sec;    

    if (!canvas)
        canvas = $("<canvas>").addClass('timer')
            .attr('width', 100).attr('height', 100).appendTo(parent)[0];

    if (!seconds)
        seconds = $("<span>").addClass('counter').appendTo(parent)[0];

    var ctx = canvas.getContext('2d');
    ctx.lineWidth = 8;
    ctx.strokeStyle = "#528f20";

    var startAngle = 0,
        time = 0,
        intv = setInterval(function() {
            var endAngle = (Math.PI * time * 2 / sec);
            ctx.arc(65, 35, 30, startAngle, endAngle, false);
            ctx.clearRect(0, 0, 200, 200);

            startAngle = endAngle;
            ctx.stroke();

            countdown--;
            if (countdown > 60) {
                seconds.innerHTML = Math.floor(countdown / 60);
                seconds.innerHTML += ":" + countdown % 60;
            }
            else {
                seconds.innerHTML = countdown;
            }

            if (++time > sec, countdown == 0) {
                clearInterval(intv);
                $(canvas).remove();
                $(seconds).remove();
                $(par).prepend('<img id="theImg" src="http://ivojonkers.com/votify/upvote.png" />');
            }
        }, 10);
}

$(function() {
    Timer(180, '#timer1');
    Timer(240, '#timer2');
    Timer(300, '#timer3');
    Timer(360, '#timer4');
});​ 
```

html:

```
<div id="timers">
    <div id="timer1" class="time">
    </div>
    <div id="timer2" class="time">
    </div>
    <div id="timer3" class="time">
    </div>
    <div id="timer4" class="time">
    </div>
</div> 
```

CSS：

```
#timers canvas {
   -webkit-transform : rotate(-90deg);  
   -moz-transform : rotate(-90deg);
}
body{
    background-color: #242424;
}
#timers .time{
    position: relative; z-index: 1; height: 70px; width: 70px; }
#timers span { 
    position   : absolute; 
    z-index    : 1; 
    top        : 50%; 
    margin-top : -0.6em;
    display    : block; 
    width      : 100%;
    text-align : center;
    height     : 1.5em;
    color      : #528f20;
    font       : 1.3em Arial;
} 
```

I created a Timer function that will take a duration, a parent element, as well as optional selectors for the canvas and counter. If `can` and `cnt` aren't specified, and don't exist, it will create them. To the html, I added an extra grouping div so that all of the elements for each timer have a common parent. For the CSS, I changed your naming convention to keep it a bit more dry. Each Timer parent div will have the class "time", but that can be whatever you want. The Timer will assume that the canvas has a class of "timer" and the time output will have a class of "counter". These can also be whatever you want, but you'll have to specify the parameters in that case.

# javascript - ASP.NET MVC 提交表单调用另一个提交表单的 javascript 函数

> ID：13126092
> 
> 赞同：2
> 
> 时间：2012-10-29T16:50:08.727
> 
> 标签：javascript, asp.net-mvc, jquery, razor, submit

这里有大问题！我知道标题有点模糊，但是我整天都遇到这个问题，无法弄清楚如何解决它。我会尽量以不那么混乱的方式更具体。长话短说，我有一个控制器（LeadController）和一个搜索方法（Search）：

```
 public ActionResult Search(string prov = null, string city = null)
    {
        //if no field is compiled, return an empty view
        if (String.IsNullOrWhiteSpace(prov) && String.IsNullOrWhiteSpace(city))
            return View();

        var leads = from l in db.Leads
                    select l;

        if (!String.IsNullOrWhiteSpace(prov))
        {
            leads = leads.Where(l => l.Prov == prov).OrderBy(l => l.RagioneSoc);
        }

        if (!String.IsNullOrWhiteSpace(city))
        {
            leads = leads.Where(l => l.Comune == city).OrderBy(l => l.RagioneSoc);
        }

        return View(leads);
    } 
```

然后我有两个提交表单的搜索视图（显示要填写的搜索字段和发布操作后的结果）：第一个执行搜索

```
@using (Html.BeginForm()){
Sigla Provincia: @Html.TextBox("prov", null, new { @style = "width: 50px;"})
Città: @Html.TextBox("city", null, new { @style = "width: 150px;" })
<input type="submit" value="Ricerca" data-icon="search" data-role="button" data-mini="true" data-inline="true" />} 
```

第二个从搜索操作的潜在客户结果生成文档

```
<input type="submit" title="create doc" value="Create document" onclick="javascript:postData()" id="doc" /> 
```

最后一次提交应该调用一个 javascript 函数来对模型进行编码：

```
<script type="text/javascript">
function postData() {
    var urlact = '@Url.Action("createDoc")';
    var model = '@Html.Raw(Json.Encode(Model))';

    $.ajax({
        ...
        ...
    });
}
</script> 
```

现在，问题是：当我调用第一个提交时，应该执行研究的那个，它执行研究但它也继续进行，调用*postData()* javascript函数（即使我从未“告诉”他这样做那）。并且该站点停止在**var model = @Html.Raw(Json.Encode(Model))';** ，带有 InvalidOperationException。

如果有人理解我的问题，有没有办法避免这种行为并强制第一次提交仅向控制器传递参数以执行搜索操作？

希望有人可以帮助我，提前感谢您的考虑！

* * *

解决了

好在问题消失了。显然，我不太了解 View & Javascript 的行为。长话短说，似乎视图，加载本身，进入 js 函数以缓存模型编码，但它并没有完全运行该函数！我在感兴趣的模型中遇到了问题。我不知道我是否解释过自己，但警告是：在做任何其他事情之前要小心你的模型一致性。感谢任何帮助过我的人，在我意识到我完全错了之前！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:24:16.453

这是您应该如何处理多个提交按钮

下面是一个带有两个提交按钮的表单。请注意，这两个提交按钮具有相同的名称，即“submitButton”</p>

```
@Html.BeginForm("MyAction", "MyController"); %>
<input type="submit" name="submitButton" value="Button1" />
<input type="submit" name="submitButton" value="Button2" />
} 
```

现在转到控制器，Action 接受一个名为 string stringButton 的输入参数，其余的非常不言自明。

```
public ActionResult MyAction(string submitButton) {
        switch(submitButton) {
            case "Button1":
               // do something here
            case "Button2":
               // do some other thing here
            default:
                // add some other behaviour here
        }
...
} 
```

希望这对你有帮助！

**更新 ：**

从您的评论中，

> 嗨，我知道这个解决方法，我的问题是第二次提交不必通过控制器：它必须调用视图中的 javascript 函数。以正确的方式发布到控制器的第一篇文章，但它也运行了 javascript 函数。

好的，您可以有一个提交按钮，另一个作为普通按钮，而不是有两个提交按钮。例如：-

```
@Html.BeginForm("MyAction", "MyController"); %>
<input type="submit" name="submitButton" value="Button1" />
<input type="button" id="otherButton" value="Button2" />
} 
```

然后使用一些简单的 jquery，您可以调用 javascript 函数`postData()`。

```
<script type="text/javascript">
    $("#otherButton").bind("click", function () {
        console.log("do your stuff here");
        postData();

    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:09:04.010

尝试将您的第二次提交从更改`<input type="submit"`为`<input type="button"`

# android - 对齐一行xml中的元素

> ID：13126095
> 
> 赞同：0
> 
> 时间：2012-10-29T16:50:22.640
> 
> 标签：android, xml, android-layout, layout

xml的一些细节我不擅长，下一个问题也找不到解决办法。

我有一个列表视图。一行定义如下 xml 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:gravity="center_vertical" >

        <TextView
            android:id="@+id/date"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:textColor="#ff888888"
            android:textSize="10dp"
            android:paddingRight="5dp"
            android:paddingTop="5dp"
            android:paddingBottom="5dp"
            android:paddingLeft="5dp"
            android:text="02 OCT"
            android:textStyle="bold"
         />

        <TextView
            android:id="@+id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"

            android:textColor="#ff000000"
            android:textSize="14dp"
            android:singleLine="true"
            android:ellipsize="end"
            android:paddingLeft="5dp"
            android:paddingRight="5dp"
            android:paddingTop="5dp"
            android:paddingBottom="5dp"
            android:text="GIRLFRIEND COFFE AT STARBUCKS COFFE"
            android:maxWidth="250dip"
         />
         <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"

            android:background="@drawable/icon_clip"
            android:layout_marginTop="5dp"
            android:layout_marginBottom="5dp"
            android:id="@+id/img_posted_check"
        />
        <TextView
            android:id="@+id/relleno"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
             android:layout_weight="1"
            android:textColor="#ff000000"
            android:textSize="14dp"
            android:singleLine="true"
            android:ellipsize="end"
            android:paddingLeft="5dp"
            android:paddingRight="5dp"
            android:paddingTop="5dp"
            android:paddingBottom="5dp"
            android:text=""
         />

        <TextView
            android:id="@+id/amount"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="#ff000000"
            android:textSize="14dp"
            android:paddingLeft="5dp"
            android:paddingTop="5dp"
            android:paddingBottom="5dp"
            android:paddingRight="5dp"
            android:text="$13.34"
         />
</LinearLayout> 
```

如果文字很短，我可以看到： ![在此处输入图像描述](../Images/56648f9e62cb19bb8e8f316d6411e330.png)

但是如果文本描述太长，它会占用所有空间直到窗口的限制，并用“...”进行裁剪，弹出价格和剪辑标记： ![在此处输入图像描述](../Images/e6c7e3208c1ea627af36894b625b40ea.png)

我可以做到这一点，前提是我不使用剪辑将权重属性添加到标题 id (@+id/title) 的文本视图并且没有 ID 为“relleno”的布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:44:30.357

我想这就是你想要的

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<TextView
    android:id="@+id/date"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:paddingBottom="5dp"
    android:paddingLeft="5dp"
    android:paddingRight="5dp"
    android:paddingTop="5dp"
    android:text="02 OCT"
    android:textColor="#ff888888"
    android:textSize="10dp"
    android:textStyle="bold" />

<TextView
    android:id="@+id/title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toLeftOf="@+id/img_posted_check"
    android:layout_toRightOf="@+id/date"
    android:ellipsize="end"
    android:maxWidth="250dip"
    android:paddingBottom="5dp"
    android:paddingLeft="5dp"
    android:paddingRight="5dp"
    android:paddingTop="5dp"
    android:singleLine="true"
    android:text="GIRLFRIEND COFFE AT STARBUCKS COFFE"
    android:textColor="#ff000000"
    android:textSize="14dp" />

<ImageView
    android:id="@+id/img_posted_check"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginBottom="5dp"
    android:layout_marginTop="5dp"
    android:layout_toLeftOf="@+id/relleno"
    android:background="@drawable/ic_launcher" />

<TextView
    android:id="@+id/relleno"
    android:layout_width="0dip"
    android:layout_height="wrap_content"
    android:layout_toLeftOf="@+id/amount"
    android:ellipsize="end"
    android:paddingBottom="5dp"
    android:paddingLeft="5dp"
    android:paddingRight="5dp"
    android:paddingTop="5dp"
    android:singleLine="true"
    android:text=""
    android:textColor="#ff000000"
    android:textSize="14dp" />

<TextView
    android:id="@+id/amount"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:paddingBottom="5dp"
    android:paddingLeft="5dp"
    android:paddingRight="5dp"
    android:paddingTop="5dp"
    android:text="$13.34"
    android:textColor="#ff000000"
    android:textSize="14dp" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-23T09:32:06.687

然后你可以用 textview 替换 imageview ..，使用这个

```
<TextView
        android:id="@+id/img_posted_check"
        android:layout_width="300dp"
        android:gravity="center"
        android:layout_height="wrap_content"
        android:drawableLeft="@drawable/ic_launcher" 
        android:layout_marginBottom="5dp"
        android:layout_marginTop="5dp"

        android:text="hiiii" /> 
```

# python - 一旦包含在python模块中就执行代码

> ID：13126102
> 
> 赞同：0
> 
> 时间：2012-10-29T16:50:34.210
> 
> 标签：python, import

我正在尝试使用一个名为 interface.py 的模块，它定义了一个条件列表和一些函数来检查这些条件的参数。然而，有成千上万的条件，所以我想使用字典而不是列表来防止需要查看所有条件。为此，我使用以下代码：

```
def listToDictionary(list):
    """This function takes a list of conditions and converts it to a dictionary
    that uses the name of the condition as a key."""

    d = {}
    for condition in list:
        if condition.name.lower() not in d:
            d[condition.name.lower()] = []
        d[condition.name.lower()].append(condition)
    return d

conditionList = listToDictionary(conditions.list) #the condition list comes from another module 
```

进一步进入文件是实际的接口函数，它们接受参数与条件列表进行比较 - 这些函数是假设 conditionList 将是一个字典而编写的。

不幸的是，这不起作用。提供错误详细信息很困难，因为此代码是由 django 页面导入的，我试图避免谈论 django，所以这个问题并不复杂。本质上，包含此代码的页面将不会加载，如果我将其更改回仅使用列表，则一切正常。

我怀疑这个问题与 Python 如何处理 import 语句有关。我需要在导入 interface.py 后立即运行 listToDictionary 转换，否则接口函数将需要一个字典并获得一个列表。有什么方法可以确保这种情况发生吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:15:20.203

有根据的猜测：`conditions.list`导入模块时，列表尚未完全构建。结果，您会得到一个缺少某些条目甚至是空的字典，这会导致以后出现问题。尝试推迟字典的构建，如下所示：

```
conditionTable = None     # shouldn't call it list if it's a dict

def get_cond_table():
    global conditionTable
    if conditionTable is None:
        conditionTable = listToDictionary(conditions.list)
    return conditionTable 
```

而不是`conditionList`在您的函数中引用，请参阅`get_cond_table()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T17:46:31.160

好吧，我发现问题出在另一个函数中，它仍然希望字典是一个列表。我无法立即看到它的原因是 Django 留下了一个非常神秘的错误消息。我能够获得更好`python manage.py shell`的手动使用和导入模块。

谢谢大家的帮助。

# scala - 在 trait 中定义 val 而不是 def 有什么好处吗？

> ID：13126104
> 
> 赞同：13
> 
> 时间：2012-10-29T16:50:41.090
> 
> 标签：scala, compiler-optimization, traits

在 Scala 中， a`val`可以覆盖 a `def`，但 a`def`不能覆盖 a `val`。

那么，声明一个特征是否有好处，例如：

```
trait Resource {
  val id: String
} 
```

而不是这个？

```
trait Resource {
  def id: String
} 
```

接下来的问题是：编译器在实践中如何处理**调用** `val`s 和`def`s 以及它实际上对`val`s 做了什么样的优化？编译器坚持`val`s 是稳定的这一事实——在实践中对编译器意味着什么？假设子类实际上是`id`用`val`. 在特征中将其指定为 a 是否会受到惩罚`def`？

如果我的代码本身不需要`id`成员的稳定性，是否可以认为`def`在这些情况下始终使用 s 并仅在此处确定性能瓶颈时才切换到`val`s 是一种好习惯——尽管这不太可能？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-30T09:11:19.667

**简短的回答：**

据我所知，这些值总是通过访问器方法访问的。Using`def`定义了一个简单的方法，它返回值。Using`val`定义了一个**私有的 [*]** final 字段，带有一个访问器方法。所以在访问方面，两者的区别非常小。差异是概念性的，`def`每次都会重新评估，并且`val`只评估一次。这显然会对性能产生影响。

[*] Java 私有

**长答案：**

让我们看下面的例子：

```
trait ResourceDef {
  def id: String = "5"
}

trait ResourceVal {
  val id: String = "5"
} 
```

`ResourceDef`&产生相同的`ResourceVal`代码，忽略初始化器：

```
public interface ResourceVal extends ScalaObject {
    volatile void foo$ResourceVal$_setter_$id_$eq(String s);
    String id();
}

public interface ResourceDef extends ScalaObject {
    String id();
} 
```

对于产生的子类（包含方法的实现），`ResourceDef`产生的结果与您期望的一样，注意该方法是静态的：

```
public abstract class ResourceDef$class {
    public static String id(ResourceDef $this) {
        return "5";
    }

    public static void $init$(ResourceDef resourcedef) {}
} 
```

对于 val，我们只需调用包含类中的初始化程序

```
public abstract class ResourceVal$class {
    public static void $init$(ResourceVal $this) {
        $this.foo$ResourceVal$_setter_$id_$eq("5");
    }
} 
```

当我们开始扩展时：

```
class ResourceDefClass extends ResourceDef {
  override def id: String = "6"
}

class ResourceValClass extends ResourceVal {
  override val id: String = "6"
  def foobar() = id
}

class ResourceNoneClass extends ResourceDef 
```

在我们覆盖的地方，我们在类中获得了一个方法，它可以满足您的期望。def 是简单的方法：

```
public class ResourceDefClass implements ResourceDef, ScalaObject {
    public String id() {
        return "6";
    }
} 
```

并且 val 定义了一个私有字段和访问器方法：

```
public class ResourceValClass implements ResourceVal, ScalaObject {
    public String id() {
        return id;
    }

    private final String id = "6";

    public String foobar() {
        return id();
    }
} 
```

请注意，甚至`foobar()`不使用 field `id`，而是使用访问器方法。

最后，如果我们不重写，那么我们会得到一个调用 trait 辅助类中的静态方法的方法：

```
public class ResourceNoneClass implements ResourceDef, ScalaObject {
    public volatile String id() {
        return ResourceDef$class.id(this);
    }
} 
```

我已经删除了这些示例中的构造函数。

因此，总是使用访问器方法。我认为这是为了避免在扩展可以实现相同方法的多个特征时出现并发症。它很快变得复杂起来。

**更长的答案：**

[Josh Suereth在 Scala Days 2012](http://skillsmatter.com/podcast/scala/binary-resilience)上做了一个非常有趣的关于二元弹性的演讲，涵盖了这个问题的背景。对此的摘要是：

> 本次演讲的重点是 JVM 上的二进制兼容性以及二进制兼容的含义。*深入描述了 Scala 中二进制不兼容*机制的概要 ，然后是一组规则和指南，这些规则和指南将帮助开发人员确保他们自己的库版本既兼容二进制又具有二进制*弹性*。
> 
> 特别是，本次演讲着眼于：
> 
> *   特征和二进制兼容性
> *   Java 序列化和匿名类
> *   懒惰的 vals 的隐藏创作
> *   开发具有二进制弹性的代码

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T17:04:05.133

不同之处主要在于您可以使用 val 实现/覆盖 def 但不能相反。此外，val 只评估一次，而 def 每次使用时都会评估，在抽象定义中使用 def 将使混合 trait 的代码在如何处理和/或优化实现方面有更多自由。所以我的观点是在没有明确的理由强制使用 val 时使用 defs。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T17:05:13.103

`val`表达式在变量声明时被评估一次，它是严格且不可变的。

`def`每次调用时都会重新评估A

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-29T17:18:56.607

`def`按名称和`val`值评估。这意味着或多或少`val`必须始终返回一个实际值，而`def`更像是一个承诺，您可以在评估它时获得一个值。例如，如果你有一个函数

```
def trace(s: => String ) { if (level == "trace") println s } // note the => in parameter definition 
```

仅当日志级别设置为跟踪并且您想要记录对象时才记录事件`toString`。如果您已经`toString`用一个值覆盖，那么您需要将该值传递给`trace`函数。但是，如果`toString`是 a `def`，则只有在确定日志级别为跟踪时才会对其进行评估，这可以为您节省一些开销。 `def`为您提供更大的灵活性，同时`val`可能更快

编译器方面，`traits`被编译为 java 接口，因此在 a 上定义成员时`trait`，如果它是 a`var`或. 则没有区别`def`。性能上的差异取决于您选择如何实现它。

# c# - 如何使用属性设置表单大小

> ID：13126109
> 
> 赞同：0
> 
> 时间：2012-10-29T16:51:01.503
> 
> 标签：c#, windows

我的项目中有 2 个表单，我想在该类库中为这两个表单编写一个通用类库我想编写一个属性，以便两个表单都可以访问它并设置它们的大小、背景颜色等未来我的项目可能包含 10 多个具有相同大小、颜色等的表单。所以我将使用上面的类库来为这些表单保持相同的颜色大小等。有人可以帮我吗？很多天我都在解决这个问题。我是DotNet的新手..提前谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:56:57.883

声明一个继承`Form`并包含`protected`属性的基类

```
public class BaseClass : Form
    {
     //list common properties here
     protected int size  = 1;
    } 
```

两种形式现在都可以访问 size 属性

```
public class form1 : BaseClass
{

   public form1()
   {
      //newsize = 1
      int newsize = size;   
   }
}

public class form2 : BaseClass
{
   public form2()
   {
       //newsize = 1
       int newsize = size;
    }
} 
```

或者，如果您想在基类中设置类的属性，请`Form`在基类的构造函数中执行此操作

```
public class BaseClass : Form
        {
         public BaseClass()
         {
            //set color etc. here
         }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:54:57.887

我不确定这是你想要的，但是

```
class FormList{
 public List<System.Windows.Forms.Form> MyForms=new List<System.Windows.Forms.Form>();

 public void UpdateSomething(Color cols){
    foreach(Form ThisForm in MyForms){
        ThisForm.Color=cols
    }
 }
 //etc...
} 
```

# python - 如何使用 PyQt4 显示重叠窗口

> ID：13126110
> 
> 赞同：1
> 
> 时间：2012-10-29T16:51:05.520
> 
> 标签：python, pyqt4

我想在按下按钮时显示一个窗口。当我单击按钮时，父窗口仍保留在那里，新窗口会显示几分之一秒然后消失。如何在包含按钮的前一个窗口上显示新窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T22:51:35.603

听起来您没有保留对子窗口的引用，因此它在显示后立即被垃圾收集。

您的按钮处理程序可能看起来像这样：

```
def handleOpenWindow(self):
    window = QMainWindow()
    window.show() 
```

相反，您需要这样做：

```
 self.window = QtGui.QMainWindow()
    self.window.show() 
```

或这个：

```
 window = QtGui.QMainWindow(self)
    window.show() 
```

# android - Android 清除画布上绘制的位图

> ID：13126112
> 
> 赞同：1
> 
> 时间：2012-10-29T16:51:11.140
> 
> 标签：android, view, android-canvas

我已经按照本教程（http://www.mysamplecode.com/2011/11/android-capture-signature-using-canvas.html）使用画布捕获签名，没关系。

我对代码进行了一些改进，将签名保存为 Base64 字符串，我也想将字符串“重新加载”回 Canvas，它可以使用以下代码：

```
 @Override
    protected void onDraw(Canvas canvas) 
    {
        canvas.drawBitmap(StringToBitMap(x), 0, 0, paint); // x = Base64 String PNG
        canvas.drawPath(path, paint);
    } 
```

我可以看到加载的签名，我可以在上面画一些东西，但我无法清除加载的签名，即使它们在加载的签名上，它也会清除我所有的绘图，但我无法清除加载的签名。我用来清除的代码是：

```
 public void clear() 
    {
        path.reset();
        invalidate(); 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-15T11:33:11.100

尝试这个：

```
public void clear() {
    if (canvas != null) {
        canvas.drawColor(Color.WHITE);
        mPath.reset();
        invalidate();
    }
} 
```

# java - JSON 和 GSON 一样吗？

> ID：13126113
> 
> 赞同：0
> 
> 时间：2012-10-29T16:51:12.527
> 
> 标签：java, json, gson

我试图运行以下代码

```
Gson gson = new Gson();
String json = gson.toJson(result);
JSONObject jsonResponse = new JSONObject();
jsonResponse.put("sEcho", echo);
jsonResponse.put("iTotalRecords", iTotalRecords);
jsonResponse.put("iTotalDisplayRecords", iFilteredTotalRecords);
jsonResponse.put("aaData", json);
jsonResponse.toString();

JSONArray data = new JSONArray();
for (Object obj : result) {
    JSONArray row = new JSONArray();
    User user = (User) obj;
    row.put(user.getId()).put(user.getUserName()).put(user.isEnabled());
    data.put(row);
}
JSONObject jsonResponse2 = new JSONObject();
jsonResponse2.put("sEcho", echo);
jsonResponse2.put("iTotalRecords", iTotalRecords);
jsonResponse2.put("iTotalDisplayRecords", iFilteredTotalRecords);
jsonResponse2.put("aaData", data);
jsonResponse2.toString(); 
```

两个 jsonResponse 的 toString 函数的结果如下：

```
{"iTotalDisplayRecords":11,"iTotalRecords":11,"aaData":"[{\"creationTime\":0,\"enabled\":true,\"id\":1,\"loginDuration\":0,\"online\":false,\"password\":\"asda\",\"userName\":\"abiieez\"}]","sEcho":"1"}

{"iTotalDisplayRecords":11,"iTotalRecords":11,"aaData":[[1,"abiieez",true]],"sEcho":"1"} 
```

我想从第一个 json 响应中删除 [ 之前和之后 ] 的 " 符号，就像第二个响应一样（我注意到 " 是在将数组放入 jsonResponse 对象之后添加的）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:02:52.587

由于您首先将“结果”转换为字符串，然后将其添加到 aaData，因此它最终会被引用，就像字符串一样。如果您只想删除引号，则可以在第 2 行执行以下操作：

```
String json = "##" + gson.toJson(result) + "##"; 
```

这在第 8 行：

```
jsonResponse.toString().replace("\"##", "").replace("##\"",""); 
```

（当然，您需要选择“引用标记”##，这样它就不会在其他任何地方的数据中显示为实际的字符串内容）

但是更简洁的解决方案（虽然可能更慢）可能是将您的 String 转换为实际的 JSONObject，方法是将第 2 行更改为：

```
JSONObject json = new JSONObject(gson.toJson(result)); 
```

# django - 如何在 virtualenv 中安装 Django

> ID：13126118
> 
> 赞同：1
> 
> 时间：2012-10-29T16:51:44.177
> 
> 标签：django, virtualenv

我已经安装了 virtualenv 并像这样设置我的环境

```
sudo pip install virtualenv
sudo mkdir /vc
sudo chown ubuntu:ubuntu /vc
cd /vc/
virtualenv --no-site-packages cb-env
cd cb-env/
source bin/activate 
```

一切正常，我看到 (cb-env)ubuntu@ip: 现在当我尝试在没有 sudo 的情况下安装 django 时，它失败了：

```
pip install django

OSError: [Errno 13] Permission denied: '/vc/cb-env/build/django' 
```

我错过了什么？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T17:06:12.420

也许您可以使用 chown -R (= --recursive) 重新设置所有权： sudo chown -R yourusername /vc

# c++ - 从三列表到三条的高度图的 DirectX 顶点

> ID：13126122
> 
> 赞同：1
> 
> 时间：2012-10-29T16:51:49.233
> 
> 标签：c++, directx

我有一个加载高度图的程序，然后使用三角形列表方法将顶点排序到数组中，我的问题是如何将其更改为三角形条带？我希望它是一个条带，所以第一行从左到右，第二行从右到左等等，使用 for 循环。

到目前为止，我的 trianlge 列表方法的代码（未显示高度图加载器或顶点数定义，还显示了法线计算器，但我不需要任何帮助来调整它）：

```
for( int l = 0; l < m_HeightMapLength; ++l )
{
    for( int w = 0; w < m_HeightMapWidth; ++w )
    {   
        if( w < m_HeightMapWidth-1 && l < m_HeightMapLength-1 )
        {
            /*v0 = m_pHeightMap[mapIndex];
            v1 = m_pHeightMap[mapIndex+m_HeightMapWidth];
            v2 = m_pHeightMap[mapIndex+1];
            v3 = m_pHeightMap[mapIndex+m_HeightMapWidth+1];

            D3DXVECTOR3 vA = v0 - v1;
            D3DXVECTOR3 vB = v1 - v2;
            D3DXVECTOR3 vC = v3 - v1;

            D3DXVECTOR3 vN1;
            D3DXVec3Cross(&vN1, &vA, &vB);
            D3DXVECTOR3 vN2;
            D3DXVec3Cross(&vN2, &vB, &vC);*/

            //D3DXVec3Normalize( &vN1, &vN1);
            //D3DXVec3Normalize( &vN2, &vN2);

            //T Left, Bot Left, T Right, T Right, Bot Left, Bot Right
            //m_pMapVtxs[i++] = Vertex_Pos3fColour4ubNormal3f(D3DXVECTOR3( m_pHeightMap[mapIndex].x, m_pHeightMap[mapIndex].y,  m_pHeightMap[mapIndex].z), MAP_COLOUR, D3DXVECTOR3(vN1.x, vN1.y, vN1.z));
            //m_pMapVtxs[i++] = Vertex_Pos3fColour4ubNormal3f(D3DXVECTOR3( m_pHeightMap[mapIndex + m_HeightMapWidth].x, m_pHeightMap[mapIndex + m_HeightMapWidth].y,  m_pHeightMap[mapIndex + m_HeightMapWidth].z), MAP_COLOUR, D3DXVECTOR3(vN1.x, vN1.y, vN1.z));
            //m_pMapVtxs[i++] = Vertex_Pos3fColour4ubNormal3f(D3DXVECTOR3( m_pHeightMap[mapIndex+1].x, m_pHeightMap[mapIndex+1].y,  m_pHeightMap[mapIndex+1].z), MAP_COLOUR, D3DXVECTOR3(vN1.x, vN1.y, vN1.z));
            //m_pMapVtxs[i++] = Vertex_Pos3fColour4ubNormal3f(D3DXVECTOR3( m_pHeightMap[mapIndex+1].x, m_pHeightMap[mapIndex+1].y,  m_pHeightMap[mapIndex+1].z), MAP_COLOUR, D3DXVECTOR3(vN2.x,  vN2.y, vN2.z));
            //m_pMapVtxs[i++] = Vertex_Pos3fColour4ubNormal3f(D3DXVECTOR3( m_pHeightMap[mapIndex + m_HeightMapWidth].x, m_pHeightMap[mapIndex + m_HeightMapWidth].y,  m_pHeightMap[mapIndex + m_HeightMapWidth].z), MAP_COLOUR, D3DXVECTOR3(vN2.x,  vN2.y, vN2.z));
            //m_pMapVtxs[i++] = Vertex_Pos3fColour4ubNormal3f(D3DXVECTOR3( m_pHeightMap[mapIndex + m_HeightMapWidth+1].x, m_pHeightMap[mapIndex + m_HeightMapWidth+1].y,  m_pHeightMap[mapIndex + m_HeightMapWidth+1].z), MAP_COLOUR, D3DXVECTOR3(vN2.x,  vN2.y, vN2.z)); 
```

地图索引++；

for循环是我将其更改为条带的主要问题，我已经在纸上绘制了顶点，所以这是我的主要问题，任何见解都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:37:51.550

我假设`m_pHeightMap`是一个 3d 矢量。

条带将如下所示：

```
+--+--+--+--+
|/ |/ |/ |/ |
+--+--+--+--+
| \| \| \| \|
+--+--+--+--+ 
```

我们将从左下角开始，继续向右，然后向上一排，继续向左。但是让我们先看看如何为单行定义条带：

```
for(int x = 0; i < m_HeightMapWidth; ++x)
{
    add m_pHeightMap[x + y * m_HeightMapWidth]; //bottom vertex
    add m_pHeightMap[x + (y + 1) * m_HeightMapWidth]; //top vertex
} 
```

这适用于每第二行。最后一个顶点将是该行的右上角顶点。在那里，我们必须添加一个退化三角形。这是一个面积为 0 的三角形，将导致行分开。所以：

```
add m_pHeightMap[m_HeightMapWidth + m_HeightMapWidth - 1]; //once again the last vertex 
```

对于上面的行，我们从右到左添加顶点：

```
for(int x = m_HeightMapWidth - 1; i >= 0; --x)
{
    add m_pHeightMap[x + y * m_HeightMapWidth]; //bottom vertex
    add m_pHeightMap[x + (y + 1 ) * m_HeightMapWidth]; //top vertex
} 
```

请注意，第一个顶点是我们已经添加了两次的那个。第三次添加它将保留三角形的方向。

我们对每一行都这样做。总而言之：

```
for(int y = 0; y < m_HeightMapHeight - 1; ++y)
{
    if(y % 2 == 0)
    {
        for(int x = 0; i < m_HeightMapWidth; ++x)
        {
            add m_pHeightMap[x + y * m_HeightMapWidth]; //bottom vertex
            add m_pHeightMap[x + (y + 1) * m_HeightMapWidth]; //top vertex
        }
        add m_pHeightMap[(y + 2) * m_HeightMapWidth - 1]; //once again the last vertex
    }
    else
    {
        for(int x = m_HeightMapWidth - 1; i >= 0; --x)
        {
            add m_pHeightMap[x + y * m_HeightMapWidth]; //bottom vertex
            add m_pHeightMap[x + (y + 1 ) * m_HeightMapWidth]; //top vertex
        }
        add m_pHeightMap[(y + 1) * m_HeightMapWidth]; //once again the last vertex
    }
} 
```

* 代码未经测试

# datetime - 果园 cms - 覆盖日期字段形状

> ID：13126124
> 
> 赞同：0
> 
> 时间：2012-10-29T16:52:10.767
> 
> 标签：datetime, orchardcms, globalization, shape

对于全球化中的一些问题（ [日期时间字段中内置的果园cms](https://stackoverflow.com/questions/12989905/orchard-cms-built-in-datetime-field)），我需要更改所有现有模块中与日期时间相关的形状，形状包括（我认为）：

*   Parts.Common.Date.Edit.cshtml
*   日期时间相对
*   约会时间

如何更改所有现有模块中的所有这些形状？更改是：在编辑器中添加一些脚本以及在其他两种形状中添加一些特殊格式。最后，如果我更改了上述三个形状，那么果园站点中所有与日期相关的输入和显示都会更改吗？我为此阅读了很多文章，但我不能很好地理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T23:37:10.510

问题是这些形状主要在管理员中。您可以做的一件事是依赖于定义它们的模块（在 module.txt 中），以便您的模板可以优先。但是改变形状可能还不够，你可能必须让自己的司机在那里修复回来的日期。这有点棘手，我可能会在客户端处理脚本中所有特定于语言环境的内容，并将已经转换回公历的日期发送回服务器。

# c# - 在 C# 中将各种枚举类型的扩展方法组合成更简单的方法

> ID：13126127
> 
> 赞同：2
> 
> 时间：2012-10-29T16:52:26.490
> 
> 标签：c#, enums

> **可能重复：**
> [任何人都知道缺少枚举通用约束的好方法吗？](https://stackoverflow.com/questions/7244/anyone-know-a-good-workaround-for-the-lack-of-an-enum-generic-constraint)
> [我可以将继承与扩展方法一起使用吗？](https://stackoverflow.com/questions/13043827/can-i-use-inheritance-with-an-extension-method)

我已经为各种枚举创建了扩展方法，以便以某种格式获取它们的字符串。有没有一种更简单的方法可以让代码看起来更智能，这样我就可以添加类型，并且应该为该类型创建扩展方法。

```
 public static string GetString(this State p1)
    {
        return p1.ToString("F");
    }

    public static string GetString(this Brand p1)
    {
        return p1.ToString("F");
    }

    public static string GetString(this Status p1)
    {
        return p1.ToString("F");
    } 
```

谢谢你。

# google-sheets - 如果包含特定单词，自动复制和显示单元格的公式

> ID：13126129
> 
> 赞同：1
> 
> 时间：2012-10-29T16:52:28.510
> 
> 标签：google-sheets, google-sheets-formula, google-sheets-query

我有一个 Google 表格，用于存储 RSS 提要（在 Sheet1 中）。我想做的是创建一个公式，该公式将在 Sheet2 中复制并显示 Sheet1 中包含某些单词的所有提要。示例截图： ![示例截图](../Images/0d86b33a519fa5cc74303c250fc0ff16.png)

在这个例子中，我想复制和显示（从 Sheet1 到 Sheet2）所有带有 BLACK 和 SHIRT 的提要，从这里开始，我想自动复制和显示提要，每次它都会包含这两个词。

这可能吗？如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T21:30:43.987

要返回包含字符串 'black shirt' 的行：

`=QUERY(Sheet1!B:B;"select * where B contains 'black shirt'";1)`

要返回包含 C2:C 中列出的任何完整单词的行：

`=FILTER(Sheet1!B2:B;MMULT(SEARCH(TRANSPOSE(" "&C2:C&" ");" "&Sheet1!B2:B&" ");SIGN(ROW(Sheet1!B2:B))))`

[查询文档](http://support.google.com/drive/bin/answer.py?hl=en&answer=1388882)

[过滤器文档](https://support.google.com/drive/bin/static.py?hl=en&topic=25273&page=table.cs&tab=1240287)

[示例电子表格](https://docs.google.com/spreadsheet/ccc?key=0AiZdNQHjqWKqdGVrNXpZZExHc0FORW91LTVRN0ZQNVE#gid=1)

# api - 通过 REST 将联系人添加到 SugarCRM。如何设置邮箱？

> ID：13126133
> 
> 赞同：4
> 
> 时间：2012-10-29T16:52:54.947
> 
> 标签：api, rest, sugarcrm

我设法使用它的 set_entry REST API 方法将联系人添加到 SugarCRM。如何添加联系人的电子邮件？看起来这是来自另一个相关模块（电子邮件）的字段。那么如何使用 SET 输入方法进行设置呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T16:06:47.000

是的，我在 Contact 模块的 set_entry 的 name_value_parameters 中添加了一个 email、email1 和 email2 参数，它也可以工作，只需一次调用。

# android - Facebook SDK 只提供自己的时间线，而不是朋友的新闻提要

> ID：13126136
> 
> 赞同：1
> 
> 时间：2012-10-29T16:53:07.727
> 
> 标签：android, ios, facebook, sdk, feed

我在理解 Facebooks API 时遇到了一些问题。我设法将提要（带有“链接”和“图片”）发送到我自己的时间线，但我希望它们出现在我朋友的新闻提要上。只有不使用“链接”和“图片”，它才会出现在我朋友的新闻提要中。我正在使用 facebook-android-sdk 和 facebook-ios-sdk。这是Android示例：

```
Bundle params = new Bundle();
params.putString("name", "Some name");
params.putString("caption", "Some caption"); 
params.putString("link", "http://www.some-link.com");
params.putString("picture", "http://www.some-link.com/pic.png");
facebook.dialog(this, "feed", params, new FacebookDialogListener(FacebookDialogListener.DIALOG_FEED)); 
```

那么我怎样才能让我的应用用户在他朋友的新闻提要上发布“链接”和“图片”呢？请不要告诉我这无法完成，因为在我自己的新闻提要中，我会定期收到带有游戏图像的帖子。他们如何做到这一点？也许在我使用“链接”和“图片”发布到自己的个人资料后，我可以通过 Facebook API 分享对象吗？我得到一个 POST_ID 作为“feed”的回报。我可以对 POST_ID 做一些事情，让它出现在我朋友的动态消息中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:20:09.010

您绝对可以使用 Facebook 对话框发布到朋友的时间线。请注意，即将通过 /feed 方式发布，但您仍然可以使用该对话框。

要发布到朋友的时间线，您需要添加另一个参数“to”并将朋友 ID 传递给它：

```
params.putString("to", "<FRIEND_ID>");
facebook.dialog(this, "feed", params, 
    new FacebookDialogListener(FacebookDialogListener.DIALOG_FEED)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:09:36.823

@Andrej我不确定在android中但在iPhone中你可以`Graph Path @"user_fb_ID/feed"`像这样购买 -

```
[self.facebook requestWithGraphPath:@"123456789/feed" andParams:params andHttpMethod:@"POST" andDelegate:self]; 
```

我认为它在android中也将相同。首先，您需要取出您的 fb 朋友的 fbID。这`params`是一个`NSDictionary`对象，其中包含一些键信息，例如`@"message",@"link",@"image",@"name",@"description"`.

# c++ - Linux 上的低延迟串行通信

> ID：13126138
> 
> 赞同：16
> 
> 时间：2012-10-29T16:53:11.913
> 
> 标签：c++, linux, serial-port, low-latency, throughput

我正在 Linux 上通过串行端口实现协议。该协议基于请求应答方案，因此吞吐量受限于将数据包发送到设备并获得应答所需的时间。这些设备大多基于 arm 并运行 Linux >= 3.0。我在将往返时间减少到 10 毫秒以下时遇到了麻烦（115200 波特，8 个数据位，无奇偶校验，每条消息 7 个字节）。

哪些 IO 接口会给我最低的延迟：select、poll、epoll 或使用 ioctl 手动轮询？阻塞或非阻塞 IO 会影响延迟吗？

我尝试使用 setserial 设置 low_latency 标志。但是好像没什么效果。

我还有什么可以尝试减少延迟的方法吗？由于我控制所有设备，因此甚至可以修补内核，但最好不要。

- - 编辑 - -

串行控制器使用的是 16550A。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-30T09:51:27.387

请求/应答方案往往效率低下，并且在串行端口上很快出现。如果您对吞吐量感兴趣，请查看窗口协议，例如 kermit 文件发送协议。

现在，如果你想坚持你的协议并减少延迟，选择、轮询、读取都会给你大致相同的延迟，因为正如 Andy Ross 所指出的，真正的延迟是在硬件 fifo 处理中。

如果幸运的话，您可以在不打补丁的情况下调整驱动程序的行为，但您仍然需要查看驱动程序代码。然而，让 ARM 处理 10 kHz 的中断率肯定不会有利于整体系统性能......

另一种选择是填充您的数据包，以便您每次都达到 fifo 阈值。它还将确认是否是 fifo 阈值问题。

10 ms @ 115200 足以传输 100 个字节（假设为 8N1），所以您看到的可能是因为未设置 low_latency 标志。尝试

```
setserial /dev/<tty_name> low_latency 
```

它将设置 low_latency 标志，当在 tty 层中向上移动数据时，内核会使用该标志：

```
void tty_flip_buffer_push(struct tty_struct *tty)
{
         unsigned long flags;
         spin_lock_irqsave(&tty->buf.lock, flags);
         if (tty->buf.tail != NULL)
                 tty->buf.tail->commit = tty->buf.tail->used;
         spin_unlock_irqrestore(&tty->buf.lock, flags);

         if (tty->low_latency)
                 flush_to_ldisc(&tty->buf.work);
         else
                 schedule_work(&tty->buf.work);
} 
```

schedule_work 调用可能是您观察到的 10 毫秒延迟的原因。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-15T10:31:39.330

在与更多工程师讨论这个话题后，我得出的结论是，这个问题在用户空间中是无法解决的。由于我们需要跨过桥进入内核领域，我们计划实现一个内核模块，它与我们的协议对话并给我们提供 < 1ms 的延迟。

- - 编辑 - -

事实证明我完全错了。所需要的只是增加内核滴答率。默认的 100 个滴答声增加了 10 毫秒的延迟。1000Hz 和串行过程的负值给了我想要达到的时间行为。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-22T16:21:18.573

linux 上的串行端口被“包装”到 unix 风格的终端结构中，它会以 1 个滴答延迟（即 10 毫秒）击中您。如果有`stty -F /dev/ttySx raw low_latency`帮助，请尝试，但不能保证。

在 PC 上，您可以直接与标准串口通信，`setserial /dev/ttySx uart none`从串口硬件中解绑 linux 驱动程序，并通过`inb/outb`端口寄存器控制端口。我试过了，效果很好。

缺点是当数据到达时你不会得到中断，你必须轮询寄存器。经常。

你应该能够在 arm 设备端做同样的事情，在异国串行端口硬件上可能要困难得多。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-04-19T13:00:54.627

以下是`setserial`在端口的文件描述符上设置低延迟的方法：

```
ioctl(fd, TIOCGSERIAL, &serial);
serial.flags |= ASYNC_LOW_LATENCY;
ioctl(fd, TIOCSSERIAL, &serial); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-29T17:54:56.580

这些系统调用都不会影响延迟。如果您想从用户空间尽可能快地读取和写入一个字节，那么您真的不会比简单的`read()/write()`一对做得更好。尝试用来自另一个用户空间进程的套接字替换串行流，看看延迟是否有所改善。如果他们不这样做，那么您的问题是 CPU 速度和硬件限制。

你确定你的硬件可以做到这一点吗？发现具有引入许多字节延迟的缓冲区设计的 UART 并不少见。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-09-04T12:54:34.673

**简而言之**：使用 USB 适配器和 ASYNC_LOW_LATENCY。

我在 Modbus 上以 115.2 kbs 的速度使用了基于 FT232RL 的 USB 适配器。

我用 ASYNC_LOW_LATENCY 在大约 20 毫秒的时间内完成了大约 5 个事务（到 4 个设备）。这包括到慢速戳设备的两个事务（4 毫秒响应时间）。

没有`ASYNC_LOW_LATENCY`总时间约为 60 毫秒。

使用 FTDI USB 适配器`ASYNC_LOW_LATENCY`将芯片本身的字符间计时器设置为 1 毫秒（而不是默认的 16 毫秒）。

我目前正在使用自制的 USB 适配器，我可以将适配器本身的延迟设置为我想要的任何值。将其设置为 200 µS 可将 20 mS 的时间再缩短一个 mS。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-30T10:15:57.057

在这些线速度下，无论您如何检查准备情况，您都不应该看到那么大的延迟。

您需要确保串行端口处于原始模式（因此您执行“非规范读取”）并且 VMIN 和 VTIME 设置正确。您要确保 VTIME 为零，以便字符间计时器永远不会启动。我可能会先将 VMIN 设置为 1 并从那里进行调整。

与线路上的时间相比，系统调用开销微不足道，因此 select() 与 poll() 等不太可能产生影响。

# javascript - 列表框选项元素上的 Twitter Bootstrap 弹出框和工具提示显示在错误的位置

> ID：13126144
> 
> 赞同：6
> 
> 时间：2012-10-29T16:53:43.800
> 
> 标签：javascript, twitter-bootstrap, tooltip, popover

我已经设置了一个快速的[jsFiddle](http://jsfiddle.net/bmccord/6gezu/2/)来演示这个问题。

在选择列表的选项元素上使用来自 Bootstrap 的工具提示或弹出框时，弹出框或工具提示不会显示在项目旁边，而是显示在页面的最左上角。

我使用的 HTML 是：

```
<select size="5" id="testList">
    <option value="1" rel="popover" data-original-title="This is item 1." data-content="Lots of stuff to say" style="color: red; ">Item 1</option>
    <option value="2" rel="popover" data-original-title="This is item 2." data-content="Lots of stuff to say" style="color: green; ">Item 2</option>
    <option value="3" rel="popover" data-original-title="This is item 3." data-content="Lots of stuff to say" style="">Item 3</option>
    <option value="4" rel="popover" data-original-title="Blah" data-content="Lots of stuff to say" style="color: orange; ">Item 4</option>
</select>​ 
```

javascript调用很简单：

```
$(function () {
    $('#testList option[rel=popover]').popover({
        placement: 'right',
        trigger: 'hover'
    });
});  ​ 
```

我该怎么做才能让它出现在正确的位置？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-29T21:03:22.480

这是预期的。TB `tooltip`/`popover`根据相关元素计算它们的位置`offsetWidth`和`offsetHeight`。Option 没有这样的属性，从来没有，所以 a`popover`总是会以相对于最`body`左边/顶部的东西结束。

**但是**`select`，您可以为其自身放置一个弹出框。绑定`mouseover`选择，从中显示一个弹出框，其中填充了`option`被悬停的数据属性。

HTML，已清理`rel="popover"`和`"data-original-title"`

```
<select size="4" id="testList">
<option value="1" data-title="This is item 1." data-content="Lots of stuff to say 1" style="color:red;">Item 1</option>
<option value="2" data-title="This is item 2." data-content="Lots of stuff to say 2" style="color:green;">Item 2</option>
<option value="3" data-title="This is item 3." data-content="Lots of stuff to say 3" style="">Item 3</option>
<option value="4" data-title="Blah" data-content="Lots of stuff to say 4" style="color:orange;">Item 4</option>
</select>​​ 
```

绑定鼠标悬停，收集选项数据属性，显示弹出框

```
$("#testList").on('mouseover', function(e) {
    var $e = $(e.target); 
    if ($e.is('option')) {
        $('#testList').popover('destroy');
        $("#testList").popover({
            trigger: 'manual',
            placement: 'right',
            title: $e.attr("data-title"),
            content: $e.attr("data-content")
        }).popover('show');
    }
}); 
```

一些清理，所以当我们离开选择时弹出框消失

```
$("#testList").on('mouseleave', function(e) {
    $('#testList').popover('destroy');
}); 
```

不认为它可以为选项列表做得更好:) 您*可能会*遇到`template`困难，迫使弹出窗口或多或少地通过其索引跟随每个选项的垂直位置。

分叉代码**[http://jsfiddle.net/mM8sx/](http://jsfiddle.net/mM8sx/)**

* * *

**更新**- Windows 上的 IE 和 Chrome 问题。
我看到了一些对此答案的引用，指出它在 Windows 上的 IE 和 Chrome 中不起作用。这是因为在 Windows 上，`<option>`元素根本不接收鼠标事件。这是上述答案的“破解”，使其成为“跨浏览器”。

在 Windows 上使用 Chrome、FF、IE 和 Safari 成功测试。Ubuntu 上的 Chrome、FF 和 Opera。这个想法是`<option>`通过基于鼠标事件`clientY`/选项的高度计算索引来定位正确的鼠标移动（而不是鼠标悬停）。

```
$("#testList").on('mousemove', function(e) {
    if (!isWindows) {
        var $e = $(e.target);
    } else {
        var newIndex = Math.floor(e.clientY/optionHeight);
        if (newIndex === index) return;
        index = newIndex;
        $e = $(this).find('option:eq('+index+')');
    }    
    if ($e.is('option')) {
        $('#testList').popover('destroy');
        $("#testList").popover({
            trigger: 'manual',
            placement: 'right',
            title: $e.attr("data-title"),
            content: $e.attr("data-content")
        }).popover('show');
    }
}); 
```

有关详细信息，请参见小提琴 -> **[http://jsfiddle.net/LfrPs/](http://jsfiddle.net/LfrPs/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-14T07:34:40.100

非常努力地将相同的弹出框应用于下拉框，但没有运气：

1.  看起来下拉选择中的选项元素根本没有触发事件。
2.  'select' 元素上的悬停事件的 e.target 将始终是选择元素本身！您无法获得对悬停的“选项”标签的引用。
3.  我还尝试将“option”元素中的文本包装到“span”元素中，并尝试向该“span”元素添加“hover”或“mouseover”事件侦听器。这也不起作用。

当将下拉列表更改为列表时（即添加 size="xx" 属性），选项元素可以像普通元素一样工作。我怀疑在下拉框中，所有选项都被浏览器包装成一个单独的层。不允许与选择元素的内部元素进行交互。如果我错了，请告诉我。

# objective-c - 按字母顺序识别字符 OBJ-C

> ID：13126149
> 
> 赞同：1
> 
> 时间：2012-10-29T16:54:17.610
> 
> 标签：objective-c, ios, regex, validation, nspredicate

我正在编写一个具有注册部分的 iOS 应用程序。我的客户有这些糟糕的验证规则，这让我抓狂。最新的规则是这样的：不要接受超过 3 个按字母顺序排列的字符，例如：“abcd”、“eFgH”、“jklM”。

但我可以按“1234”、“3456”之类的顺序接受数字...

为了解决这些问题，我已经在使用 NSPredicate 和 NSRegularExpression。但我不知道用正则表达式来识别这些字符，所以我请求你的帮助。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:17:50.057

让我祝贺你他们还没有注意到键盘没有字母布局:)

```
NSString * str = [@"01234abcdsfsaasgAWEGFWAE" lowercaseString]; // make it a lower case string as you described it not case-sensitive
const char * strUTF8 = [str UTF8String]; // get char* password text for the numerical comparison

BOOL badPassword = NO;
int charIndex = 0;
int badHitCount = 0;
const int len = strlen(strUTF8);
char previousChar = strUTF8[0]; // the app is going to crash here with an empty string

// check the password
while (charIndex < len) {
    char currentChar = strUTF8[charIndex++];
    if (currentChar - previousChar == 1 && (currentChar >= 57 || currentChar <= 48)) 
    // 57 is the character '9' index at UTF8 table, letters are following this index, some characters are located before 48's '0' character though
        badHitCount++;
    else
        badHitCount = 0;
    previousChar = currentChar;

    if (badHitCount >= 3) {
        badPassword = YES;
        break;
    }
}

if (badPassword) {
    NSLog(@"You are a Bad User !");
} else {
    NSLog(@"You are a Good User !");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T17:44:22.957

从可能可行的最简单的事情开始：

```
BOOL hasAlphabetSequence(NSString *s, int sequenceLength) {
    static NSString *const alphabet = @"abcdefghijklmnopqrstuvwxyz";
    s = [s lowercaseString];
    for (int i = 0, l = (int)alphabet.length - sequenceLength; i < l; ++i) {
        NSString *sequence = [alphabet substringWithRange:NSMakeRange(i, sequenceLength)];
        if ([s rangeOfString:sequence].location != NSNotFound) {
            return YES;
        }
    }
    return NO;
} 
```

# objective-c - Objective-c 中的 const 关键字

> ID：13126152
> 
> 赞同：2
> 
> 时间：2012-10-29T16:54:33.660
> 
> 标签：objective-c, constants

```
 int main(int argc, char *argv[]) {         
    @autoreleasepool {
      const int x = 1;
      const NSMutableArray *array1 = [NSMutableArray array];
      const NSMutableString *str1 = @"1";
      NSString * const str2 = @"2";

      // x = 2; compile error
      [array1 addObject:@"2"]; // ok 
      // [str1 appendString:@"2"]; // runtime error
      // Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Attempt to mutate immutable object with appendString:'
      // str2 = @"3"; compile error
     }
 } 
```

我的问题是为什么 array1 addObject 是合法的，为什么 str1 appendString 是被禁止的？

看到这个打击：

```
NSMutableString *f2(const NSMutableString * const x) {
  [x appendString: @" world!"];
  return x;
}

int main(int argc, char *argv[]) {
    @autoreleasepool {
      NSMutableString *x = [@"Hello" mutableCopy];
      NSLog(@"%@", f2(x));
    }
    return 0;
} 
```

以及为什么这段代码是合法的，我怎样才能像在 c++ 中一样使用 'const' 关键字使对象不可变？

==============================================@see [https:// softwareengineering.stackexchange.com/questions/151463/do-people-use-const-a-lot-when-programming-in-objective-c](https://softwareengineering.stackexchange.com/questions/151463/do-people-use-const-a-lot-when-programming-in-objective-c)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T17:07:14.073

问题在于，尽管您声明`str1`为 的实例`NSMutableString`，但它实际上是不同子类的实例`NSString`——特别是，默认情况下它是 的实例 `__NSCFConstantString`，尽管[可以通过设置编译器标志来更改此类](http://www.mikeash.com/pyblog/friday-qa-2012-06-22-objective-c-literals.html#comment-9507fddba34a159ffac21fdbe7aecbab)。这是从`@""`.

要解决此问题，只需使用

```
const NSMutableString *str1 = [NSMutableString stringWithFormat:@"1"]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T17:14:12.947

'const' 对 Objective-C 对象没有任何作用。你不能做你所要求的。

# python - Django Admin - 表格内联外键字段列表的动态值

> ID：13126162
> 
> 赞同：3
> 
> 时间：2012-10-29T16:55:00.717
> 
> 标签：python, django, django-models, django-templates, django-admin

我有三个模型：

```
class Foo (models.Model):
    date = models.DateField(default = date.today)

class Bar (models.Model):
    foo = models.ForeignKey(Foo)
    another = models.ForeignKey(AnotherClass) #this class is important
    amount = models.IntegerField(default=0)

class AnotherClass (models.Model):
    name = models.CharField() 
```

现在我想以表格内联方式添加/更改 Foo+Bar 的实例。关键是每个 Bar 实例是一个数量的 AnotherClass 实例的引用，并且每个 Foo 实例必须有系统中所有 AnotherClass 的引用。

所以如果我有另一个类的实例列表

```
AnotherClass1
AnotherClass2
AnotherClass3
AnotherClass4 
```

Foo 添加/更改管理页面应该是这样的

```
Add Foo!
--------------------------------------------

date = (datePicker)

Pretty Bar TabularInline
--------------------------------------------
AnotherClass1.name        amount = intPicker
AnotherClass2.name        amount = intPicker
AnotherClass3.name        amount = intPicker
AnotherClass4.name        amount = intPicker 
```

其中 AnotherClassX.name 不可编辑，仅显示 AnotherClass 实例的名称。

有什么简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T19:46:17.923

您可以使用 django.contrib.admin 中的 TabularInline 执行类似的操作。下面是一个例子。我在与 models.py 相同的 Django 应用程序（'test_app'）中创建了 admin.py，只是为了将管理站点的内容与模型代码分开。

```
### models.py ###
from django.db import models
from datetime import date

class Foo (models.Model):
    date = models.DateField(default = date.today)

class AnotherClass (models.Model):
    name = models.CharField(max_length=128)

    def __unicode__(self):
        return u'%s' % (self.name)

class Bar (models.Model):
    foo = models.ForeignKey(Foo)
    another = models.ForeignKey(AnotherClass) #this class is important
    amount = models.IntegerField(default=0)

    class Meta:
        unique_together = (('foo', 'another'),)

### admin.py ###
from test_app.models import Foo, Bar, AnotherClass
from django.contrib import admin

class BarsInline(admin.TabularInline):
    model = Bar

class FooAdmin(admin.ModelAdmin):
    inlines = (BarsInline,)

admin.site.register(Foo, FooAdmin)
admin.site.register(Bar)
admin.site.register(AnotherClass) 
```

这将添加在创建或编辑 Foo 实例时添加或修改多个 Bar 关系的功能。请注意，AnotherClass 选项是下拉菜单，但 AnotherClass.name 字段不可编辑。

要注意的一个问题是您描述的模型模式允许相同的 AnotherClass 实例与 Foo （通过 Bar）多次关联。这可能是也可能不是您想要的。为了防止 AnotherClass 实例和 Foo 实例之间的多重关系，请使用 Bar 模型中的 Meta 选项“unique_together”，该选项在上面的示例代码中使用。如果您想允许这种行为，只需删除此 Meta 类选项。

# linux - 如何使用 p4merge 强制文本合并？

> ID：13126166
> 
> 赞同：3
> 
> 时间：2012-10-29T16:55:08.513
> 
> 标签：linux, merge, diff, perforce, p4merge

我正在使用 Perforce 及其默认的合并工具 p4merge。在集成时，`vcproj`我希望解决几个冲突。

但似乎 p4merge 试图以某种方式解释文件的内容，只说“图像文件无法合并”然后退出。这样我就无法解决冲突，甚至无法获得差异。

这要么是一个非常新的未报告的错误，要么是一个非常简单的解决方法，因为谷歌搜索完全没有显示任何与它相关的内容（除了 Twitter 帖子）。

有人知道解决方法吗？

（我使用的是 Linux 版本的 Perforce。）

更新：

Perforce 文件类型是“文本”。所以它们不是二进制的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:35:08.720

我也遇到了这个错误（使用关于框中显示“2012 年 6 月 6 日”的工具）。我刚刚从 Perforce 网站（日期为“2012 年 12 月 17 日”）下载了最新的工具，并且该错误消失了。尝试下载最新工具！

# linux - 在映射后截断共享内存对象是否安全？

> ID：13126167
> 
> 赞同：8
> 
> 时间：2012-10-29T16:55:13.640
> 
> 标签：linux, memory-management, posix, shared-memory

*   `shm_open()`
*   `mmap()`带有预定义的大`length`
*   `fork()`（几次）
*   `ftruncate()`随意

这样做的目的是确保由其产生的每个进程`fork()`在同一地址上都有一个共享段。然而，我不想让 RAM 一直忙，而是动态调整它的大小（大小跨越 0 - big `length`）。

这能行吗？有UB吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-29T17:05:54.697

不，没关系。您可以随时截断基础文件，但`SIGBUS`如果您访问超出文件范围的内存，您可能会收到。因此，您需要非常小心，不要触摸超出文件当前长度的内存（或捕​​获`SIGBUS`并处理它）。

来自`man 2 mmap`：

> 使用映射区域可能会产生以下信号：
> 
> `SIGBUS`尝试访问与文件不对应的缓冲区部分（例如，超出文件末尾，包括另一个进程截断文件的情况）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T17:55:18.207

不要调整它的大小。

> 我不想让 RAM 一直忙

这就是内核将为您使用虚拟内存所做的事情。只要您不使用`mlock()`或，它将根据需要/适当分页`MAP_LOCKED`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T18:06:11.010

创建任意大小的映射，除非您实际使用它，否则它不会“让 RAM 保持忙碌”。

如果您担心在使用完 RAM*后会*保持忙碌状态，请致电`madvise(MADV_DONTNEED)`- 如果您再次访问它们，这将清除页面并从零池中返回新页面。

# c++ - Rpp，Rinside 对 R 包的支持？

> ID：13126168
> 
> 赞同：0
> 
> 时间：2012-10-29T16:55:15.290
> 
> 标签：c++, r, package, rcpp, rinside

是否有人对某些可以与 RInside 开箱即用的 R 包有深入的了解？我正在寻找对以下 R 包的有希望的支持：quantstrat、quantmod、PerformanceAnalytics 和 TTR 换句话说，如果我使用 RInside，我可以直接在我的 C++ 列出的这些 R 包中调用 R 函数。如果没有，我是否对包或我自己的 R/C++ 代码进行了额外的编码或调整以正确实现？非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:15:26.503

您确实明白 RInside 调用 R 代码*仍然调用 R 代码*，对吗？

简单地将交互式提示或 R 脚本替换为来自 C++ 程序的调用，并不会带来神奇的速度增益。

有关具体示例，请参阅`examples/standard/rinside_sample2.cpp`和`examples/standard/rinside_sample4.cpp`两者都调用[fPortfolio](http://cran.r-project.org/package=fPortfolio)包（以响应示例的类似问题）。不，它们不能更快地解决问题，但它们可以让 C++ 程序员轻松访问某些 R 功能。

该软件包带有大量示例。随意尝试这些，也许时间或配置它们。但没有灵丹妙药...

# php - Trim 是否不足以满足我的要求？

> ID：13126169
> 
> 赞同：0
> 
> 时间：2012-10-29T16:55:19.127
> 
> 标签：php, string

```
$x = "''xx''";

echo $x, "\n";
echo trim($x, "'"); 
```

在这个程序中，我只想从开头修剪一个单引号，从结尾修剪一个。Trim 删除开头和结尾的*所有*单引号。

我希望它只删除*一个*报价。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T16:57:11.400

```
$x = preg_replace("/^'?(.*?)'?$/", '$1', $x); 
```

或者，如果您不喜欢使用正则表达式：

```
if (substr($x, 0, 1) === "'") {
    $x = substr($x, 1);
}
if (substr($x, -1) === "'") {
    $x = substr($x, 0, -1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:06:10.280

使用 preg_replace 和 "limit" 参数，解决方案不是太粗糙：

```
$str = preg_replace("/'/", "", $str, 1);
$str = strrev( preg_replace("/'/", "", strrev($str), 1) ); 
```

[http://ideone.com/RhqglD](http://ideone.com/RhqglD)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T17:12:58.330

没有正则表达式的解决方案。

```
$string = "'test'";
if ($string[0] === "'") {
    $string = substr($string, 1);
}
if ($string[strlen($string) - 1] === "'") {
    $string = substr($string, 0, -1);
} 
```

# android - Android ListView 自定义图标

> ID：13126170
> 
> 赞同：0
> 
> 时间：2012-10-29T16:55:19.070
> 
> 标签：android, listview, icons

嘿，我正在尝试将图标添加到我的 ListView。这就是我的 ListAdapter 的外观。

```
ListAdapter adapter = new SimpleAdapter(this, menuItems,R.layout.list_item, 
        new String[] { KEY_NAME, Icon }, new int[] {R.id.name, R.id.icon});

setListAdapter(adapter); 
```

这就是我获得图标的方式

```
String imgFilePath = ASSETS_DIR + ICON_NAME;
try {
    Bitmap bitmap = BitmapFactory.decodeStream(this.getResources().getAssets()
            .open(imgFilePath));
    Icon.setImageBitmap(bitmap);
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

我应该如何将图标添加到我的 ListView ？我尝试在互联网上使用一些示例，但看起来 ListAdaptar 和 ArrayList 的构建方式完全不同。

我的列表项 xml 文件。

```
<ImageView
    android:id="@+id/myicon"
    android:layout_gravity="left"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />
<TextView
    android:id="@+id/name"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textColor="#dc6800"
    android:textSize="16sp"
    android:textStyle="bold"
    android:paddingTop="6dip"
    android:paddingBottom="2dip" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:57:17.240

我认为您需要扩展 BaseAdapter 以使用自定义单元 UI 获得您自己的自定义适配器。并使用 AsyncTask 加载图标。

# powershell - 获取 PowerShell 中文件的完整路径

> ID：13126175
> 
> 赞同：186
> 
> 时间：2012-10-29T16:55:45.023
> 
> 标签：powershell, powershell-2.0

我需要获取所有文件，包括属于特定类型的子文件夹中的文件。

我正在做这样的事情，使用[Get-ChildItem](http://technet.microsoft.com/en-us/library/hh849800.aspx)：

```
Get-ChildItem "C:\windows\System32" -Recurse | where {$_.extension -eq ".txt"} 
```

但是，它只返回文件名而不是整个路径。

* * *

## 回答 #1

> 赞同：273
> 
> 时间：2012-10-29T17:01:42.217

添加`| select FullName`到上面行的末尾。如果您之后需要实际执行此操作，则可能必须将其通过管道传输到 foreach 循环中，如下所示：

```
get-childitem "C:\windows\System32" -recurse | where {$_.extension -eq ".txt"} | % {
     Write-Host $_.FullName
} 
```

* * *

## 回答 #2

> 赞同：130
> 
> 时间：2012-10-29T20:11:41.000

这应该比使用后期过滤执行得快得多：

```
Get-ChildItem C:\WINDOWS\System32 -Filter *.txt -Recurse | % { $_.FullName } 
```

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2014-06-28T16:19:50.360

您也可以像这样使用[Select-Object](http://technet.microsoft.com/en-us/library/hh849895.aspx)：

```
Get-ChildItem "C:\WINDOWS\System32" *.txt -Recurse | Select-Object FullName 
```

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2014-02-10T16:31:47.160

这是一个较短的：

```
(Get-ChildItem C:\MYDIRECTORY -Recurse).fullname > filename.txt 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2016-04-06T08:30:47.113

如果相对路径是您想要的，您可以使用该`-Name`标志。

`Get-ChildItem "C:\windows\System32" -Recurse -Filter *.txt -Name`

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2018-11-28T22:28:24.743

PS 5 中真正令人讨厌的事情，其中​​ $_ 不会是 foreach 中的完整路径。这些是 FileInfo 和 DirectoryInfo 对象的字符串版本。出于某种原因，路径中的通配符可以修复它，或者使用 Powershell 6 或 7。您也可以通过管道连接到中间的 get-item。

```
Get-ChildItem -path C:\WINDOWS\System32\*.txt -Recurse | foreach { "$_" }

Get-ChildItem -path C:\WINDOWS\System32 -Recurse | get-item | foreach { "$_" } 
```

这似乎是 .Net 的一个问题，在 .Net Core (Powershell 7) 中得到了解决： [FileInfo / Directory instances 的字符串化行为自 v6.0.2 #7132 起发生了变化](https://github.com/PowerShell/PowerShell/issues/7132#issuecomment-501451500)

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2015-08-10T11:35:24.297

尝试这个：

```
Get-ChildItem C:\windows\System32 -Include *.txt -Recurse | select -ExpandProperty FullName 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2016-03-23T19:05:49.010

```
Get-ChildItem -Recurse *.txt | Format-Table FullName 
```

那是我用的。我觉得它更容易理解，因为它不包含任何循环语法。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2016-01-28T10:27:36.880

这对我有用，并产生了一个名称列表：

```
$Thisfile=(get-childitem -path 10* -include '*.JPG' -recurse).fullname 
```

我通过 using 找到了它`get-member -membertype properties`，这是一个非常有用的命令。它为您提供的大多数选项都附加了一个`.<thing>`，就像`fullname`这里一样。你可以坚持同样的命令；

```
 | get-member -membertype properties 
```

在任何命令的末尾，以获取有关您可以使用它们执行的操作以及如何访问这些操作的更多信息：

```
get-childitem -path 10* -include '*.JPG' -recurse | get-member -membertype properties 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-12-06T12:12:32.453

我使用此行命令在“C:\Temp”中搜索“.xlm”文件，结果在文件“result.txt”中打印全名路径：

```
(Get-ChildItem "C:\Temp" -Recurse | where {$_.extension -eq ".xml"} ).fullname > result.txt 
```

在我的测试中，这种语法对我来说很漂亮。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-09-11T08:30:42.010

```
gci "C:\WINDOWS\System32" -r -include .txt | select fullname 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-12-08T17:20:06.900

为什么还没有人使用 foreach 循环？这里的优点是您可以轻松地命名变量：

```
# Note that I'm pretty explicit here. This would work as well as the line after:
# Get-ChildItem -Recurse C:\windows\System32\*.txt
$fileList = Get-ChildItem -Recurse -Path C:\windows\System32 -Include *.txt
foreach ($textfile in $fileList) {
    # This includes the filename ;)
    $filePath = $textfile.fullname
    # You can replace the next line with whatever you want to.
    Write-Output $filePath
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-11-22T10:56:06.777

[替代语法]

对于某些人来说，定向管道操作员不是他们的口味，但他们更喜欢链接。请参阅 roslyn 问题跟踪器中共享的有关此主题的一些有趣意见：[dotnet/roslyn#5445](https://github.com/dotnet/roslyn/issues/5445)。

根据案例和上下文，这种方法之一可以被认为是隐含的（或间接的）。例如，在这种情况下，对 enumerable 使用管道需要特殊令牌`$_`（aka `PowerShell's "THIS" token`）可能会让某些人感到反感。

对于这样的人，这里有一种更简洁、直接的方式，使用*点链接*：

```
(gci . -re -fi *.txt).FullName 
```

*(<rant> 请注意，PowerShell 的命令参数解析器接受部分参数名称。因此，除了`-recursive`; `-recursiv`, `-recursi`, , , , 和 之外 ; , , `-recurs`, `-recur`, `-recu`,`-rec`和`-re`被接受，但不幸的是不是.. 这是唯一对单个字符`-r`有意义的正确选择（如果我们`-`遵循 POSIXy UNIXy 约定）！</rant>）*

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-11-29T08:00:49.213

我正在使用以下脚本来提取所有文件夹路径：

```
Get-ChildItem -path "C:\" -Recurse -Directory -Force -ErrorAction SilentlyContinue | Select-Object FullName | Out-File "Folder_List.csv" 
```

没有完整的文件夹路径。113个字符后，来了：

```
Example - C:\ProgramData\Microsoft\Windows\DeviceMetadataCache\dmrccache\en-US\ec4d5fdd-aa12-400f-83e2-7b0ea6023eb7\Windows... 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-07-07T12:07:53.267

我有一个问题，我有一个可执行文件，其中包含目录路径字符串作为参数和格式。像这样：

"C:\temp\executable.exe" "C:\storage\filename" "C:\storage\dump" -jpg

我需要在不同文件夹中的 .jpg 文件中执行此命令。

```
$files = Get-ChildItem  -Path C:\storage\*.jpg -Recurse -Force | Select-Object -ExpandProperty FullName

for ($i=0; $i -lt $files.Count; $i++) {
    [string]$outfile = $files[$i]

    Start-Process -NoNewWindow -FilePath "C:\temp\executable.exe" -ArgumentList $outfile, "C:\storage\dump", "-dcm"

} 
```

# java - 如何在Java eclipse中处理两个独立包中的两个主要功能

> ID：13126177
> 
> 赞同：1
> 
> 时间：2012-10-29T16:55:54.267
> 
> 标签：java

我使用日食。我在同一个项目中有两个单独的包。在每个包中，都有一个具有主函数的类。但是，当我运行 package2 中的类时，我发现 package1 中的类的 main 函数被执行了。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:57:22.357

导航到运行/调试启动配置对话框，并将选项卡`Main class`上的字段设置为`Main`包含所需主方法的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:57:52.007

如果您在 Eclipse 中，请右键单击类并选择“运行/作为 java 应用程序”。它会正确运行`main()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T17:01:19.283

`right click the project -> run as-> run configuration.`

在那里你会找到一个指定主类的选项。选择要调用的主类，然后按运行。

# sql - 如何在sql中将行分成两组？

> ID：13126180
> 
> 赞同：1
> 
> 时间：2012-10-29T16:56:00.240
> 
> 标签：sql, group-by

假设我有这样一张桌子：

```
id|time|operation
1  2      read
2  5      write
3  3      read
4  7      read
5  2      save
6  1      open 
```

现在我想做两件事：

1.  将所有这些记录分为两组：1）操作等于“读取”的所有行 2）所有其他行。
2.  总结每组的时间。

这样我的查询只会导致两行。

到目前为止我得到的是：

```
select 
 sum(time) as total_time,
 operation
group by
 operation
; 
```

尽管这给了我很多组，具体取决于不同操作的数量。

我怎么能把它们分成两类？

干杯!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T16:57:42.917

`group by`可以采用任意子句，所以

```
GROUP BY (operation = 'read') 
```

将工作。本质上，您将根据比较的布尔结果进行分组，而不是操作字段的值，因此任何“读取”的记录都将是 group `1`，而任何未读取的记录都将是 group `0`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:04:52.283

尝试

```
SELECT T.op, sum(T.time)
FROM ( SELECT time, CASE operation 
                WHEN 'read' THEN 'read' ELSE 'not read' END AS op ) T
GROUP BY T.op 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T17:00:40.437

或者，您也可以使用`case`语句：

```
select
case when operation != 'read' then 'other'
  else operation end as operation
,sum(time) as total_time
from table
group by case when operation != 'read' then 'other'
  else operation end; 
```

# php - ZIParchive php 返回 cpgz

> ID：13126182
> 
> 赞同：0
> 
> 时间：2012-10-29T16:56:11.180
> 
> 标签：php, symfony, zip, ziparchive

我正在使用 symfony 2.0，我正在尝试动态生成一个 zip。

这是我的代码：

```
 public function downloadFontAction($slug)
        {
            $font = $this->getRepository(static::FONT_REP)->findOneBySlug($slug);

            $zip = new \ZipArchive;
            $zipName = $slug.".zip";
            if ($zip->open($zipName, \ZIPARCHIVE::CREATE | \ZIPARCHIVE::OVERWRITE) === TRUE) {
                foreach($this->container->getParameter('font_extensions') as $ext)
                {
                    $fontFile = call_user_func(array($font, "get".ucfirst($ext)));
                    //adding Fonts
                    if ($fontFile)
                    {
                        $zip->addFile('/Users/admin/Documents/public_html/GitHub/typ/web/static/'.$fontFile,$font->getSlug().".".$ext);
                    }
                }
                $zip->close();
            } else {
                echo 'failed';
            }

            $response = new Response();

            //$response->setContent(readfile($zipName));
            $response->setStatusCode(200);

            $response->headers->set('Content-Type', 'application/zip'); 
            $response->headers->set('Content-Disposition', 'attachment; filename="'.$zipName.'"');
            $response->headers->set('Content-Transfer-Encoding', 'binary');
            $response->headers->set('Content-Length', filesize($zipName));     
            $response->headers->set('Pragma', 'public');
            $response->headers->set('Expires', '0');
            $response->headers->set('Cache-Control', 'must-revalidate, post-check=0, pre-check=0');
            $response->headers->set('Cache-Control', 'private');
            @unlink($zipName);
            return $response;

        } 
```

该函数返回一个空的 zip 文件，一旦我解压缩该文件，就会出现一个执行无限 bucle 的 cpgz 文件。zip 在服务器端正确生成，但无法通过此操作下载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T23:41:03.867

I hope it is not too late. You are not setting the content of the response that is why it is an empty file. Befor returning the response, try something like this:

```
$response->setContent(file_get_contents($zipName)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:59:25.487

@unlink($zipName);

下载前要删除文件吗？也许在这里不需要取消链接:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T20:39:30.313

好吧，同样的事情发生在我身上。我意识到这是写入临时文件夹时的**权限问题**。尝试给予足够的权限来写入临时文件夹。

另外尝试为下载脚本禁用 gzip。我通过在 php 页面顶部添加以下行来完成我的工作。

```
ini_set('zlib.output_compression', 'Off'); 
```

# javascript - 在没有 Ajax 或类似的东西的情况下，您可以在 JavaScript 中调用 Web 服务的最简单方法是什么？

> ID：13126185
> 
> 赞同：3
> 
> 时间：2012-10-29T16:56:13.857
> 
> 标签：javascript, web-services

> **可能重复：**
> [使用 Javascript 使用 Web 服务](https://stackoverflow.com/questions/208051/consuming-a-web-service-using-javascript)

请注意，我仍然习惯于 JavaScript。基本上，我需要编写一个 HTML 文件，该文件使用 Javascript 来调用几个 Web 服务方法（来自与 HTML 文件相同的服务器），而无需使用 Ajax 或可能需要单独安装的其他任何东西。我们已经启动并运行良好的 Web 服务，以及一些 JS。这需要适用于 IE、FF 和 Chrome，包括“落后于时代”几年的计算机。什么是一个非常简单的方法来做到这一点？再说一次，我仍然对 JavaScript 有点摸不着头脑，所以我很难理解和使用我见过的一些例子。谢谢！

编辑：这是我一直在尝试的那种事情的一个例子：

```
<html>
<head>
   <title>Hello World</title>
   <script language="JavaScript">
      var iCallID;
      function InitializeService(){
     alert("spam");
     try {
            service.useService(<WSDL address>, 
                  "HelloWorldService");
     } catch (e) {
        alert(e.message);
     }
     alert("spam");
         service.HelloWorldService.callService("HelloWorld");
     alert("spam");
      }
      function ShowResult(){
     alert("spam");
         alert(event.result.value);
     alert("spam");
      }
</script> 
```

我收到“垃圾邮件”，然后是“对象不支持此属性或方法”，然后什么也没有。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T17:09:22.203

好吧，AJAX 从驴子时代就已经存在了，真的。但是由于你不熟悉 JS，这里有一个你可以使用的小复制粘贴功能：

```
function ajax(url,method,data)
{
    var xhr;//ajax object
    data = data || {};//default ajax request
    method = method || 'POST';
    url = url || 'default/url/ajax';
    try
    {//normal browsers
        ret = new XMLHttpRequest();
    }
    catch (error)
    {//older IE browsers, including dead IE6
        try
        {
            ret= new ActiveXObject('Msxml2.XMLHTTP');
        }
        catch(error)
        {
            try
            {
                ret= new ActiveXObject('Microsoft.XMLHTTP');
            }
            catch(error)
            {
                throw new Error('no Ajax support?');
            }
        }
    }
    if (typeof ret !== 'object')
    {//if fails (almost impossible)
        throw new Error('No Ajax, FFS');
    }
    ret.open(method, url, true);//open ajax connection
    ret.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
    ret.setRequestHeader('Content-type', 'application/x-www-form-urlencode');
    ret.onreadystatechange = function()
    {
        if (this.readyState === 4 && this.status === 200)
        {
            var response = this.responseText;
            //code you want to see executed when the call was successful
        }
    };
    return ret.send(data);
} 
```

用法：

```
ajax('your/ajax/url','POST','id=12'); 
```

这会将一个 ajax 请求发送回服务器，并带有一个 POST 参数`id`、值`12`......玩弄它。一些有用的东西：[JSON](http://json.org)和 - 虽然我不是一个大粉丝- [jQuery](http://jquery.com)，它有一个现成的内置`$.ajax`方法，只需传递一个对象文字，你就可以开始了。

随意编辑此功能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T17:13:11.623

如果要使用 Web 服务，则必须在客户端计算机上的运行页面和托管该服务的服务器之间创建连接。这样做的总称是 AJAX。它不是您安装的单独技术，而是描述 JavaScript DOM 中可用的 XMLHttpRequest 对象的使用的术语。有很多资源描述了跨浏览器的使用......

[https://developer.mozilla.org/en-US/docs/AJAX/Getting_Started](https://developer.mozilla.org/en-US/docs/AJAX/Getting_Started)

许多 JavaScript 库都有跨浏览器的实现，您可以使用它们而不必担心细节。jQuery、MooTools、原型...等。

# android - Android FB API 3.0 - 应用程序为 Facebook 配置错误

> ID：13126186
> 
> 赞同：2
> 
> 时间：2012-10-29T16:56:25.160
> 
> 标签：android, facebook, facebook-android-sdk

我在使用 FB API 时遇到问题。

星期五早上，我已经完成了设置，它运行良好，我能够将它安装在我的 2 个不同的设备上，并且在两个设备上都可以正常工作。

周日，当我想向我的朋友展示我的应用程序时，在安装了 FB 应用程序的设备上与 Facebook 的连接崩溃了，今天我第一次使用 API 3.0 看到我的应用程序被错误地配置为 Facebook 登录。

直到今天我才接触代码，今天我唯一改变的是调用我发布带有标题的图像的地方，所以我根本没有接触登录部分：

```
if (MyGlobals.INSTANCE.isOnline(getSherlockActivity())) {
if (txt.getTag() == faceLoggedIn) {
 if (session.isOpened()) {
  Log.w("ss", "Session Allready Open");
  onClickLogout();
  updateSocialView(txt, img);
  // txt.setText("Log To Facebook");
  // txt.setTag(faceLoggedOut);
  // img.setImageResource(R.drawable.facebook_icon_gray);
  // MyGlobals.INSTANCE.f_socialsSet = false;
 }
} else if (txt.getTag() == faceLoggedOut) {
 if (!session.isOpened() && !session.isClosed()) {
  Log.w("Session is not opend", "Session is not closed");
  session.openForRead(new Session.OpenRequest(getActivity()).setCallback(MyGlobals.INSTANCE.statusCallback));
 } else {
  Session.openActiveSession(getActivity(), true, MyGlobals.INSTANCE.statusCallback);
  Log.w("Open Active Session", "Status Callback");
  updateSocialView(txt, img);
 }
 updateSocialView(txt, img);
 // txt.setText("Log To Facebook");
 // txt.setTag(faceLoggedOut);
 // img.setImageResource(R.drawable.facebook_icon_gray);
 // MyGlobals.INSTANCE.f_socialsSet = true;
} 
```

那么什么会导致这种错误配置呢？App怎么可能有一天能用，然后就不能用了？我确实从 facebook 中删除了该应用程序以测试它在首次应用程序下载/登录时的行为，但我再次没有更改 FB 平台上的应用程序首选项。

如果设备上没有 FB 应用程序，一切正常，webview 出现，您登录，您发布到 FB，一切就绪。

当设置了 FB 应用程序时，我完全困惑它有什么问题？

请解释。肿瘤坏死因子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T19:41:17.970

当您使用默认的 android 调试密钥进行签名时，如果 a) 密钥过期并且您的 IDE 自动创建一个新密钥或 b) 您在另一台机器上运行/构建应用程序（具有不同的密钥哈希），则该密钥哈希可能会更改从您的仪表板上列出的那一项）。

TL;DR：您的密钥哈希不匹配

要解决此问题，请在此处阅读我们的文档 (https://developers.facebook.com/docs/mobile/android/build/#sig)。有两种方法可以检索您的密钥哈希。每次您使用不同的密钥对应用程序进行签名时（无论是因为您使用的是另一台计算机，还是因为您的旧调试密钥已过期），您都需要将其添加到仪表板。当您最终将您的应用程序上传到 Google Play 时，您必须创建自己的密钥库文件来对其进行签名，并且当您这样做时，不要忘记将该密钥库文件的密钥哈希添加到您的仪表板。

# java - 如何判断小部件是否仍处于活动状态且未处置？

> ID：13126187
> 
> 赞同：0
> 
> 时间：2012-10-29T16:56:26.617
> 
> 标签：java, swt, dispose, jface

A 类中的方法 A（非 GUI）

```
public void add() {
   if(etc...) {
      add data to a arraylist ..... 
   }
   Class B.updateTable();
 } 
```

上面的方法基本上是将数据添加到一个arraylist，然后更新b类中的tableViewer。

B 类 - GUI 对话框

在调用 Class B.updateTable() 之前，我想检查并确保 Class B 的 GUI 是打开的并且没有被释放。

用户可以在没有打开 B 类 GUI 的情况下使用 A 类（非 gui）。因为 A 类构建了一个用户选择的 ArrayList，而 B 类显示了它。因此，他们可以添加数据而无需尝试显示它。

如果我当前运行 B.updateTable() 并且 B 类未打开，我会收到一个小部件处理错误。

如果我可以添加一个检查并确保在我尝试更新表格之前没有处理小部件。

我可以检查 A 类的值还是需要编写一个静态布尔方法是 B 类，它返回类似 shell.isDisposed 的东西？

然后在 A 类方法中，我可以添加检查。

```
 public void add() {
     if(etc...) {
        add data to a arraylist ..... 
     }
     if(!Class B.isShellDisposed()) {       
        Class B.updateTable();
     }
  } 
```

这是可能的，甚至是处理错误的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T20:38:16.067

The issue I was having was refreshing my table viewer, while the GUI was closed. When my user would close the GUI to add more data to the arraylist via the Main Application. I had code in the add method to refresh the table viewer in the GUI. The main problem was even though the GUI was closed, the table viewer was not null. So my code was trying to refresh something that was already disposed. Knowing I do not need to refresh the table viewer when the GUI is closed. I set the table viewer to null in the Close Button code. Then checked the viewer for null in the update method.

```
static public void updateTableViewer() {

  if(getViewer() != null) {
     viewer.refresh();
  }
} 
```

So now when the GUI is closed the table viewer is NULL and when it is open the table viewer is not null. This seems to work for me.

# search - mvvm 视图中的动态搜索

> ID：13126189
> 
> 赞同：0
> 
> 时间：2012-10-29T16:56:45.170
> 
> 标签：search, mvvm, command

我正在 WPF 中创建一个客户搜索屏幕，试图遵循 MVVM 模式。我的场景是我目前有三个可能的搜索选项：客户姓氏；客户参考编号；客户需在 x 天后跟进。

我有一个包含 3 行的网格，每个可用搜索一个。每个单选按钮用于标识哪个搜索用户想要执行和一个按钮。我将为每个视图模型添加命令，但在 XAML 中，我将如何设置正确的命令并将正确的参数传递给命令？我能想到的唯一方法是3个按钮并折叠两个不适用???????? 这听起来令人汗流浃背......

有人指出我正确的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:13:44.790

听起来您只需要 1 个 TextBox、1 个 Button 和一些[有界 RadioButtons](https://stackoverflow.com/questions/397556/how-to-bind-radiobuttons-to-an-enum)。

然后[在命令上使用 MultiBinding](https://stackoverflow.com/questions/9108044/how-to-pass-parameters-to-command-using-multibinding) `CommandParameter`来传递所选 RadioButton 的文本和值（它们都绑定到 ViewModel 中的值）

# sql - 给定 SQL 查询的等效关系代数语句

> ID：13126191
> 
> 赞同：1
> 
> 时间：2012-10-29T16:56:48.097
> 
> 标签：sql, relational-database, relational-algebra

下面的 SQL：

```
SELECT DISTINCT a1,a2,a3.....an
FROM   R1,R2,R3......Rm
Where P
(P is any predicate) 
```

我想知道什么可能是它的等价关系代数。我认为它可能是这样的： `πa1,a2,a3...an(σP(R1 U R2 U R3 ....U Rm)`. 但是我再次不确定我是否正确。任何人都可以帮助我在关系代数中正确等效吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T19:11:04.377

好好看看 SQL 中的 FROM 子句中的逗号代表什么，然后好好看看 U（我想 UNION ？）在代数中的作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:23:20.653

SQL 表达式的 FROM 子句中的逗号表示叉积。

所以等价的关系代数表达式为：

```
π a1,a2,a3...an (σ P (R1 x R2 x ... x Rm)) 
```

# android - 防止服务器与非官方的 android 客户端通信

> ID：13126192
> 
> 赞同：2
> 
> 时间：2012-10-29T16:56:55.400
> 
> 标签：android, encryption

我有一个项目，我的服务器需要向 android 应用程序发送一个超级机密的加密密钥。应用程序使用密钥进行对称加密，以与经过批准的官方蓝牙设备进行通信。重要的是不要发现此密钥，因为它允许任何人在应用程序之外与蓝牙设备进行通信。

我的问题是，我怎样才能保护这个密钥不被发现。我知道我可以使用 SSL 在服务器和 android 应用程序之间进行通信，并且我可以确保密钥永远不会实际存储在 android 设备上。

但是我可以使用什么技术来确保它是我未经编辑的 android 应用程序与服务器通信，而不是另一个伪装成我自己的应用程序，试图获取密钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:08:57.917

> 但是我可以使用什么技术来确保它是我未经编辑的 android 应用程序与服务器通信，而不是另一个伪装成我自己的应用程序，试图获取密钥？

根据定义，这是不可能的。

拿你的应用程序。将某个字符串中的大写字母更改`A`为小写字母。`a`运行修改后的应用程序。这是“另一个伪装成您自己的应用程序”，它完全能够与您的服务器通信。任何其他“伪装成您自己的应用程序”只是比一个字母的情况有更多的变化。

因此，您有两个主要选择：

1.  使用自动（ProGuard）和手动的混淆技术来尝试隐藏与您的服务器的通信，然后希望没有人愿意继续尝试对其进行逆向工程。您可以查看人们用于保护其应用程序许可代码（例如 LVL）的特定技术的方法。更高级的混淆器，如 DexGuard，可能会有所帮助。然而，从技术上讲，仍然有人可以对应用程序进行逆向工程——你正在做的是让它变得更难。

2.  想出一个商业模式，你不关心什么应用程序与你的蓝牙设备交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:10:11.030

如果没有自定义版本的 Android，我不相信您可以做到这一点。我的理由是，为了确定调用应用程序是否为正版，它必须向服务器发送一些东西，无论是否是 SSL。必须从应用程序派生一些东西，无论它是什么（包名、IME 等），它都可以被欺骗。

您能做的最好的事情就是加密某些东西并混淆进行加密所需的密钥，但是随后，您将陷入逆向工程的成本与获得密钥的回报之间。

即使这笔费用是值得的，那么有人会花费精力来破解您的安全性并了解和接近蓝牙设备的可能性有多大？

# javascript - 为什么我的图像比正常更暗？

> ID：13126194
> 
> 赞同：-1
> 
> 时间：2012-10-29T16:57:06.027
> 
> 标签：javascript, jquery, css, image

我的标题中的图像有问题。它们比应有的颜色更暗。查看我的网站的横幅/标题，其中包含 Facebook、Twitter 等链接。将鼠标移到图片上，它们应更改为各自的颜色。出于某种原因，它们比应有的颜色更暗。我认为这与它们的不透明度降低有关，但我在我的 .css 中找不到它们的不透明度会改变的地方。有人可以帮我吗？

我的网站是[http://www.startingtofeelit.com/](http://www.startingtofeelit.com/)

正如您从 Twitter 图标中看到的那样，网站上的图标更暗。

[http://www.startingtofeelit.com/wp-content/themes/rockwell_v1.7.1/icons/twitter_hover.png](http://www.startingtofeelit.com/wp-content/themes/rockwell_v1.7.1/icons/twitter_hover.png)

在第一瞬间，似乎显示了正确的颜色，但随后直接变暗了。有人可以指出我的css这个错误在哪里吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:05:35.080

使用 Chrome 开发工具，我可以看到您的图标的`opacity`内联样式设置为`.5`. 我将“未悬停”状态更改为`opacity:1;`，但它会平稳过渡回`.5`悬停时。动态内联样式让我相信`Javascript`某个地方正在控制它。

我看了你的脚本，罪魁祸首可能是你的`main.js`文件。

（顺便说一句：您还应该在问题的第一条评论中采纳建议，将其变成一个更好的 StackOverflow 问题！）

# php - stream_socket_client() 是线程安全的吗？

> ID：13126196
> 
> 赞同：0
> 
> 时间：2012-10-29T16:57:13.780
> 
> 标签：php, sockets, thread-safety

在最近的 PHP 版本 (>5.3) 中，我找不到[`stream_socket_client()`](http://www.php.net/manual/en/function.stream-socket-client.php)和相关[`fsockopen()`](http://www.php.net/manual/en/function.fsockopen.php)的是否是合理的线程安全的。

我最感兴趣的是 Apache 上的 PHP，在 Linux 上。还有 Apache MPM-prefork 是否有所作为，以及是否存在知识，如果这一切都适用于例如 Nginx 下的 fastCGI。

一个简短的测试告诉我，每个分支都会创建自己的套接字文件，但这对于更多并发连接是否适用？这是由于 Apache 的分叉、Unix 的套接字架构还是 PHP 本身的性质？当谈到这些接近金属的问题时，我一无所知。

或者：是否可以安全地假设在读取和写入源时`stream_socket_client()`永远不会在不同的连接上发生冲突？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T00:48:01.407

关于 pthreads：

此时 PHP 的架构是一成不变的 - 阅读 PHP6 - 所以事实是，你现在或将来能够线程化任何你认为是 PHP 的唯一方法是通过 PECL 扩展，但是你不应该让这让你失望——你不会仅仅因为 APC 不是核心的一部分就从你的网络中放弃 APC 的能力。我可能有点偏见，因为我是 pthreads 的唯一作者，但我没有使用过 voodoo 或法术，我使用的是 Objects API，结合 TSRM 和扩展 API - 所有的东西多年来一直在酝酿，并进行了数十亿小时的实际测试，这并不是说 pthreads 已经准备好生产，当然不是，但总有一天它会。

pthreads 可能永远不会共享资源，我已经对此进行了长时间的试验，并且我找到了多种让它工作的方法，但没有一个是令人满意的。PHP 主要是扩展（甚至标准库也是作为扩展实现的——这是添加功能的最有效方式），它们都没有为对象级多线程环境做好准备。由于许多原因，PHP 不是多线程网络应用程序的理想选择。当您以非线性方式思考时，为什么要共享资源，（除了套接字 - 使用更合适的东西）资源可以在完全不同的线程中创建和操作，同时您继续解析您的业务模板或 json 或您的应用程序所做的任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:35:08.710

PHP 本身对线程的支持很少。它可能会或可能不会对“线程安全”的函数做出承诺，但是当解释器本身假装线程不存在时，这几乎没有什么区别。^*

不过，就 mpm_prefork 而言，这并不重要。Prefork MPM 完全是关于*分叉*（因此得名）。它不打扰线程，所以 PHP 的线程安全问题并没有真正出现。

我不太了解 FastCGI（尤其是它与老式 CGI 的区别），但除非它需要解释器的大量特殊支持，否则它也会使用多进程模型而不是多线程模型。每个解释器都有自己的进程，这使得 PHP 对线程的支持几乎无关紧要。

^(* 有一个 PECL 模块为 PHP 提供了一种使用 pthreads 的方法，但它不是核心的一部分，我想当线程开始发挥作用时，有一大堆扩展会彻底崩溃。我认为 PHP 中的线程远未成熟到足以用于生产用途，并且可能会继续这种感觉，直到 PHP 本身提供了一种创建线程的方法。)

# asp.net - 新的 azure webrole 不显示对对象的引用

> ID：13126198
> 
> 赞同：0
> 
> 时间：2012-10-29T16:57:20.020
> 
> 标签：asp.net, visual-studio, azure

我真的希望您能提供帮助，因为我花了很多时间来找出问题所在。我将我的网站从一个常规的 asp.net 项目移到了一个 azure webrole（复制并粘贴了所有类）。

该网站运行良好，但我意识到缺少很多类型检查。您可以在下图中看到它没有重新分配类： ![错误](../Images/353a03b8326c2d3e35dca770553704ca.png)

例如，智能感知不起作用，如果我 CTRL+单击（VS 生产力工具），它会显示“无法导航到 'DataClassesDataContext'。

如图所示，我尝试创建一些不存在类的新对象（new JustSomeRandomStuffImadeUp()）。在网络服务器实际运行之前，此错误不会出现。

我如何让 Visual-studio 再次识别课程？

谢谢迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:55:18.070

如果您右键单击一个未被拾取的类文件并选择“属性”，那么*构建操作*是否设置为“编译”，如下所示？

![在此处输入图像描述](../Images/2e65447e634a0c54378f3fcaff49b0f3.png)

# c++ - C++ 的 TDD 书籍

> ID：13126199
> 
> 赞同：7
> 
> 时间：2012-10-29T16:57:21.143
> 
> 标签：c++, tdd

对于需要学习使用 TDD 进行开发的顽固 C++ 开发人员，您会推荐什么材料。我想要一本书，其中包含的示例不仅仅是测试简单的函数，而是处理使用依赖注入的类的测试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T21:01:12.670

老实说，我只是看一本关于 TDD 的标准书——基本原理是重要的部分，而用于表达它们的具体技术只是细节。

我在移植[由测试指导的面向对象的软件增长](http://www.growing-object-oriented-software.com/)中的基本原则方面取得了很大的成功——它以 Java + JUnit + JMock + WindowLicker 为目标，并包含一个运行示例，虽然有点玩具，但仍然包含所有主题在您的帖子中提到 - 进入 C++ + Google Test + Google Mock + QTestLib。主要的绊脚石源于 Java 工具在许多方面都比 C++ 对应物更复杂的事实，但您通常可以找到一些方法来模拟 C++ 中的重要部分。

# struts2 - Struts2 tiles org.apache.tiles.extras.complete.CompleteAutoloadTilesListener 集成错误

> ID：13126201
> 
> 赞同：3
> 
> 时间：2012-10-29T16:57:25.197
> 
> 标签：struts2, tiles

我正在关注此处发布的答案。[OGNL 和通配符在使用 struts2-tiles-plugin 的瓷砖定义中工作？](https://stackoverflow.com/questions/10050433/ognl-and-wildcards-working-in-tiles-definitions-with-struts2-tiles-plugin/10067367#10067367)

*如果您知道答案，如果您告诉我如何使用 freemarker 将不胜感激。如果您解决我的问题以使代码正常工作，我什至不接受答案。*

一切都一样，但

```
Struts2 & Tiles plugin - 2.3.4.1 
```

**pom.xml**

1.6 UTF-8 3.1.2.RELEASE 2.3.4.1 1.6.6 2.2.2

```
<!-- Start Extras -->
<dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>4.10</version>
</dependency>
<dependency>
    <groupId>javax</groupId>
    <artifactId>javaee-web-api</artifactId>
    <version>6.0</version>
    <scope>provided</scope>
</dependency>
<!-- End Extras -->

<!-- Start sl4j dependencies -->
<dependency>
    <groupId>log4j</groupId>
    <artifactId>log4j</artifactId>
    <version>1.2.17</version>
</dependency>
<!-- End sl4j dependencies -->

<!-- Start Struts2 dependencies -->
<dependency>
    <groupId>org.apache.struts</groupId>
    <artifactId>struts2-core</artifactId>
    <version>${struts2.version}</version>
</dependency>
<!-- End struts2 dependencies -->

<!-- Start Tiles dependencies -->
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-simple</artifactId>
    <version>${slf4j.version}</version>
</dependency>
<dependency>
    <groupId>org.apache.struts</groupId>
    <artifactId>struts2-tiles-plugin</artifactId>
    <version>${struts2.version}</version>
</dependency>
<dependency>
    <groupId>org.apache.tiles</groupId>
    <artifactId>tiles-core</artifactId>
    <version>${tiles.version}</version>
</dependency>
<dependency>
    <groupId>org.apache.tiles</groupId>
    <artifactId>tiles-extras</artifactId>
    <version>${tiles.version}</version>
</dependency>
<dependency>
    <groupId>org.apache.tiles</groupId>
    <artifactId>tiles-servlet</artifactId>
    <version>${tiles.version}</version>
</dependency>
<!-- End Tiles dependencies --> 
```

**错误**

```
Oct 29, 2012 9:51:19 PM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class org.apache.tiles.extras.complete.CompleteAutoloadTilesListener
java.lang.NullPointerException
    at org.apache.tiles.el.JspExpressionFactoryFactory.getExpressionFactory(JspExpressionFactoryFactory.java:61)
    at org.apache.tiles.extras.complete.CompleteAutoloadTilesContainerFactory.createELEvaluator(CompleteAutoloadTilesContainerFactory.java:268)
    at org.apache.tiles.extras.complete.CompleteAutoloadTilesContainerFactory.createAttributeEvaluatorFactory(CompleteAutoloadTilesContainerFactory.java:204)
    at org.apache.tiles.factory.BasicTilesContainerFactory.createContainer(BasicTilesContainerFactory.java:106)
    at org.apache.tiles.startup.AbstractTilesInitializer.createContainer(AbstractTilesInitializer.java:124)
    at org.apache.tiles.startup.AbstractTilesInitializer.initialize(AbstractTilesInitializer.java:70)
    at org.apache.tiles.web.startup.AbstractTilesListener.contextInitialized(AbstractTilesListener.java:62)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Oct 29, 2012 9:51:19 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error listenerStart
Oct 29, 2012 9:51:19 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/2_Sruts2_Tiles_JSP] startup failed due to previous errors 
```

**pom依赖**

![mvn](../Images/286047b4bb66a2658c8fa2f1b2afea0c.png)

**Web.xml**

```
<listener>
        <listener-class>org.apache.tiles.extras.complete.CompleteAutoloadTilesListener</listener-class>
    </listener>

    <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping> 
```

**编辑版本：**

**POM.xml**

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.myapp</groupId>
    <artifactId>Struts2_Old_Tiles_JSP_Freemarker</artifactId>
    <packaging>war</packaging>
    <version>1.0</version>
    <name>Struts2_Old_Tiles_JSP_Freemarker WebApp</name>
    <url>http://maven.apache.org</url>

    <properties>
        <java.version>1.6</java.version>
        <endorsed.dir>${project.build.directory}/endorsed</endorsed.dir>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <netbeans.hint.deploy.server>gfv3ee6</netbeans.hint.deploy.server>
    </properties>

    <dependencies>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-core</artifactId>
            <version>2.3.1.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-tiles-plugin</artifactId>
            <version>2.3.1.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-api</artifactId>
            <version>2.2.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-core</artifactId>
            <version>2.2.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-extras</artifactId>
            <version>2.2.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-jsp</artifactId>
            <version>2.2.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-ognl</artifactId>
            <version>2.2.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-servlet</artifactId>
            <version>2.2.2</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>1.6.4</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-simple</artifactId>
            <version>1.6.4</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.14</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-freemarker</artifactId>
            <version>2.2.2</version>
        </dependency>
        <dependency>
            <groupId>javax</groupId>
            <artifactId>javaee-web-api</artifactId>
            <version>6.0</version>
            <scope>provided</scope>
        </dependency>
    </dependencies>

    <build>
        <finalName>Struts2_Old_Tiles_JSP_Freemarker</finalName>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.5.1</version>
                <configuration>
                    <source>${java.version}</source>
                    <target>${java.version}</target>
                    <compilerArguments>
                        <endorseddirs>${endorsed.dir}</endorseddirs>
                    </compilerArguments>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.1.1</version>
                <configuration>
                    <failOnMissingWebXml>false</failOnMissingWebXml>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.apache.tomcat.maven</groupId>
                <artifactId>tomcat7-maven-plugin</artifactId>
                <version>2.0</version>
            </plugin>
        </plugins>
    </build>
</project> 
```

**struts.xml**

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
        "http://struts.apache.org/dtds/struts-2.3.dtd">

<struts>
    <constant name="struts.devMode" value="true"/>
    <constant name="struts.ui.theme" value="simple"/>
    <constant name="struts.enable.SlashesInActionNames" value="true"/>
    <constant name="struts.mapper.alwaysSelectFullNamespace" value="false"/>

    <package name="basicstruts2" namespace="/" extends="tiles-default">
        <result-types>
            <result-type name="tiles" default="true" class="org.apache.struts2.views.tiles.TilesResult"/>
        </result-types>
        <action name="/**" class="com.kenmcwilliams.tiles.action.Test">
            <result>{1}</result>
        </action>
    </package>
</struts> 
```

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <listener>
        <listener-class>org.apache.tiles.extras.complete.CompleteAutoloadTilesListener</listener-class>
    </listener>
    <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
</web-app> 
```

**瓷砖.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE tiles-definitions PUBLIC
        "-//Apache Software Foundation//DTD Tiles Configuration 2.1//EN"
        "http://tiles.apache.org/dtds/tiles-config_2_1.dtd">
<tiles-definitions>
    <definition name="baseLayout" template="/WEB-INF/content/tiles/template.jsp">
        <put-attribute name="title" value="Default Title"/>
        <put-attribute name="header" value="/WEB-INF/content/tiles/header.jsp"/>
        <put-attribute name="body" value="/WEB-INF/content/tiles/body.jsp"/>
        <put-attribute name="footer" value="/WEB-INF/content/tiles/footer.jsp"/>
        <put-attribute name="variable" expression="OGNL:greeting"/>
    </definition>
    <definition name="test" extends="baseLayout">
        <put-attribute name="title" value="Test Title"/>
    </definition>
    <definition name="WILDCARD:package/*" extends="baseLayout">
        <put-attribute name="title" value="{1}" type="string"/>
        <put-attribute name="body" value="/WEB-INF/content/tiles/test.ftl"/>
    </definition>
    <definition name="" extends="baseLayout">
    </definition>
</tiles-definitions> 
```

**结论**

如果您将其与 Glassfish 一起使用，则使用代码进行测试可以正常工作**但**

经过大量测试和检查，问题在于嵌入式 tomcat7 实例无法使用上述 web.xml 配置并生成错误。下面是`pom.xml`如果运行 tomcat7:run 将产生错误的插件。不确定是什么问题。

```
 <plugin>
                <groupId>org.apache.tomcat.maven</groupId>
                <artifactId>tomcat7-maven-plugin</artifactId>
                <version>2.0</version>
                <configuration>
                    <port>8000</port>
                </configuration>
            </plugin> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:49:36.923

**注意**：以下内容已经过测试（带有 tile 2.2.2 和 freemarker 的 struts2）。由于时间限制，此解决方案适用于 struts2 2.3.1.2 和 struts2-tiles-plugin-2.3.1.2，但不适用于更高版本。尝试了 2.3.4.1，但有些东西坏了。

设置以下内容：[OGNL 和通配符在使用 struts2-tiles-plugin 的图块定义中工作？](https://stackoverflow.com/questions/10050433/ognl-and-wildcards-working-in-tiles-definitions-with-struts2-tiles-plugin/10067367#10067367)

**添加对图块的 freemarker 支持：**

**工件**：tiles-freemarker， **组**：org.apache.tiles， **版本**：2.2.2

**扩展上一个示例的测试以将 freemarker 标题合并到演示中：** 添加`/WEB-INF/content/tiles/test.ftl`其中包含：

```
<#assign s=JspTaglibs["/struts-tags"] /> 
<@s.textfield name="test"/> 
```

`<put-attribute name="body" value="/WEB-INF/content/tiles/test.ftl"/>`定义下的tiles.xml 中添加了一行`WILDCARD:package/*`。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE tiles-definitions PUBLIC
       "-//Apache Software Foundation//DTD Tiles Configuration 2.1//EN"
       "http://tiles.apache.org/dtds/tiles-config_2_1.dtd">
<tiles-definitions>
    <definition name="baseLayout" template="/WEB-INF/content/tiles/template.jsp">
        <put-attribute name="title" value="Default Title"/>
        <put-attribute name="header" value="/WEB-INF/content/tiles/header.jsp"/>
        <put-attribute name="body" value="/WEB-INF/content/tiles/body.jsp"/>
        <put-attribute name="footer" value="/WEB-INF/content/tiles/footer.jsp"/>
        <put-attribute name="variable"  expression="OGNL:greeting"/>
    </definition>
    <definition name="test" extends="baseLayout">
        <put-attribute name="title" value="Test Title"/>
    </definition>
    <definition name="WILDCARD:package/*" extends="baseLayout">
        <put-attribute name="title" value="{1}" type="string"/>
        <put-attribute name="body" value="/WEB-INF/content/tiles/test.ftl"/>
    </definition>
    <definition name="" extends="baseLayout">
    </definition>
</tiles-definitions> 
```

**测试它**：

我的应用程序上下文是`http://localhost:8080/Struts2Tiles2_2_2Example/`附加的，`package/bla`我们`http://localhost:8080/Struts2Tiles2_2_2Example/package/bla`将看到一个由速度渲染的文本字段并入视图，标题栏会显示“bla”。

**编辑**新内容：

**pom**：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.kenmcwilliams</groupId>
    <artifactId>Struts2Tiles2_2_2Example</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>war</packaging>

    <name>Struts2Tiles2_2_2Example</name>

    <properties>
        <endorsed.dir>${project.build.directory}/endorsed</endorsed.dir>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <netbeans.hint.deploy.server>gfv3ee6</netbeans.hint.deploy.server>
    </properties>

    <dependencies>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-core</artifactId>
            <version>2.3.1.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-tiles-plugin</artifactId>
            <version>2.3.1.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-api</artifactId>
            <version>2.2.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-core</artifactId>
            <version>2.2.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-extras</artifactId>
            <version>2.2.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-jsp</artifactId>
            <version>2.2.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-ognl</artifactId>
            <version>2.2.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-servlet</artifactId>
            <version>2.2.2</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>1.6.4</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-simple</artifactId>
            <version>1.6.4</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.14</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-freemarker</artifactId>
            <version>2.2.2</version>
        </dependency>
        <dependency>
            <groupId>javax</groupId>
            <artifactId>javaee-web-api</artifactId>
            <version>6.0</version>
            <scope>provided</scope>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.7</source>
                    <target>1.7</target>
                    <compilerArguments>
                        <endorseddirs>${endorsed.dir}</endorseddirs>
                    </compilerArguments>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.1.1</version>
                <configuration>
                    <failOnMissingWebXml>false</failOnMissingWebXml>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <version>2.1</version>
                <executions>
                    <execution>
                        <phase>validate</phase>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <configuration>
                            <outputDirectory>${endorsed.dir}</outputDirectory>
                            <silent>true</silent>
                            <artifactItems>
                                <artifactItem>
                                    <groupId>javax</groupId>
                                    <artifactId>javaee-endorsed-api</artifactId>
                                    <version>6.0</version>
                                    <type>jar</type>
                                </artifactItem>
                            </artifactItems>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>

</project> 
```

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <listener>
        <listener-class>org.apache.tiles.extras.complete.CompleteAutoloadTilesListener</listener-class>
    </listener>
    <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
</web-app> 
```

# jquery - jQuery CSS 不透明度问题

> ID：13126203
> 
> 赞同：0
> 
> 时间：2012-10-29T16:57:27.937
> 
> 标签：jquery, css

我到处看了看，似乎找不到适合我的答案。我在此页面上使用 JQuery 的 CSS 方法设置长全景样式图像的不透明度：http: [//www.prideoftameside.co.uk/default-redesign.htm](http://www.prideoftameside.co.uk/default-redesign.htm)。

在 Chrome 中，一切都很好，它运行良好并且在 div 之间进行动画处理。但是在 IE 中它没有设置不透明度。我已经尝试对这些元素和父母设置缩放，但它根本不起作用。有谁知道任何可能有效的修复方法？

需要集中精力的代码（不起作用）是：

```
$('.introimg:not(:eq(0))').css({ 'opacity' : '0' });
$('.introimg:eq(0)').css({ 'opacity' : '1' }); 
```

谢谢，

詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:00:29.203

对于 IE < 9，您不能使用“不透明度”属性。我不确定这是否是你的问题，但试试这个：

而不是不透明度，使用

```
filter : alpha(opacity=100); 
```

使用 jQuery：

```
$('.item').css({ 'filter' : 'alpha(opacity=100);' }); 
```

# javascript - 如何设置 jQuery 函数的顺序，以便一个在另一个完成渲染内容后触发？

> ID：13126204
> 
> 赞同：4
> 
> 时间：2012-10-29T16:57:28.710
> 
> 标签：javascript, jquery

我正在使用**Masonry**和**Embedly插件来显示嵌入的内容，我在**[这里](http://jsfiddle.net/anir/pBtbb/3/)整理了一个示例。

我的jQuery如下

```
//embedly

    $('.box').find('a').embedly({
      maxWidth: 260,
      wmode: 'transparent',
      method: 'after',
      chars: 50,
      width: 260,
      key:':cd54253e69944ae18ad5ece38b4d0e1e' //temporal
    });

//masonry

   var $container =  $('#main-container');

    $container.imagesLoaded( function(){
        $container.masonry({
          itemSelector: '.box',
          isAnimated: true,
          isFitWidth: true
      });
    }); 
```

似乎 Masonry 插件首先加载并导致重叠问题（它们仅在您调整结果窗口大小时正确显示）我读过我可以使用回调函数或在嵌入完成渲染内容后重新触发 Masonry，但我不知道该怎么做。你能帮助我吗？有没有其他解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T02:32:49.440

你有一个异步计时问题。砌体布局代码在内容有机会加载之前触发。

因此，您要做的是等待调用 masonry，直到加载完所有内容。您可能很想使用超时，这往往会导致竞争条件。

理想情况下，embedly 会有更好的 API 并以 ajax 调用的方式返回某种延迟的承诺对象。不幸的是，似乎没有什么干净的，所以我们必须做一些手架。

如果你定义了一个成功：回调，那么显然你必须自己插入内容。

幸运的是， embedly() 会在内容加载并显示后触发它自己的事件，您可以将回调绑定到该事件。

可能有很多更优雅的方法可以实现这一点，但为了使用丑陋的全局的简单示例，我们跟踪加载的内容片段的数量。每次嵌入事件触发表明已经加载了一段内容时，我们都会增加计数器。一旦我们达到匹配元素的总数，我们就知道所有内容都已加载，我们称之为 masonry。

虽然它不漂亮，但它可以工作：http: [//jsfiddle.net/sJ5vc/](http://jsfiddle.net/sJ5vc/)

```
 //embedly
var matches = $('.box').find('a').length;
var loaded = 0;

// we call this from the embedly callback after all 
// content has been loaded.
function callMasonry() {
    var $container = $('#main-container');

    $container.imagesLoaded(function() {
        $container.masonry({
            itemSelector: '.box',
            isAnimated: true,
            isFitWidth: true
        });
    });
}

var result = $('.box').find('a').embedly({
    maxWidth: 260,
    wmode: 'transparent',
    method: 'after',
    chars: 50,
    width: 260,
    key: ':cd54253e69944ae18ad5ece38b4d0e1e' //temporal
}).bind('embedly-oembed', function(e, oembed) {

    // not as elegant as I would like but increment
    // the counter. Once we have gotten to 
    // the number of matches call masonry
    //
    // It would be much cleaner if embedly could return some kind
    // of deferred object that gets resolved after all matched
    // content has been loaded. 

    loaded++;

    console.log("loaded " + oembed.title);

    if (loaded == matches) {
        callMasonry();
    }

});; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T23:07:42.427

您可以使用 JQuery 加载函数为通过 embedly (with `class="box"`) 更新的 div 包装砌体代码，如下所示：

```
//masonry
 $('.box').load(function(){
       var $container =  $('#main-container');

        $container.imagesLoaded( function(){
            $container.masonry({
              itemSelector: '.box',
              isAnimated: true,
              isFitWidth: true
          });
        });
​ });​ 
```

# jquery - 使用 JQuery 导航到元素

> ID：13126205
> 
> 赞同：0
> 
> 时间：2012-10-29T16:57:35.590
> 
> 标签：jquery, jquery-traversing

我有这个元素层次结构：

```
<div>
   <div>
      <input id="abc" .../>
   </div>
   <div>
      <span />
   </div>
</div> 
```

如何通过输入我知道的 id 访问 span 元素？

我想我必须使用

```
$("#abc").parent().parent()... 
```

...但是请在之后？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:58:57.757

尝试这个，

**[现场演示](http://jsfiddle.net/vYfzg/1/)**

```
var spanElement = $('#abc').parent().next().find('span'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T16:59:10.103

尝试这个

```
$("#abc").parent().next().children('span') 
```

[演示](http://jsfiddle.net/gRfnb/21/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T17:00:24.127

```
$("#abc").parent().next().children('span') 
```

# jquery - Fancybox2 内联内容库

> ID：13126208
> 
> 赞同：0
> 
> 时间：2012-10-29T16:57:51.127
> 
> 标签：jquery, fancybox, gallery, inline

我正在尝试使用 Fancybox 2 创建一个内联内容库，但失败得很惨。

我在网上查看了一些其他资源，它们似乎表明这样做相对容易，但是，我似乎无法让它发挥作用。

这是我的小提琴：

[http://jsfiddle.net/beefchimi/jtxHd/2/](http://jsfiddle.net/beefchimi/jtxHd/2/)

现在，我觉得小提琴没有加载资源，所以这是个问题。但即使有资源，这也不起作用，我得到了幻想框错误。

资源：

[http://fancyapps.com/fancybox/source/jquery.fancybox.pack.js?v=2.1.3](http://fancyapps.com/fancybox/source/jquery.fancybox.pack.js?v=2.1.3) http://fancyapps.com/fancybox/source/jquery.fancybox.css?v=2.1.3

任何帮助将不胜感激。

**编辑：**所以我不能在不包含一些代码的情况下提交我的问题，因为链接到 jsfiddle 是不行的，所以，这是我的标记和 fancybox 初始化，你也可以在 jsfiddle 中找到：

HTML：

```
<section><!-- Gallery 1 |begin| -->

    <!-- Inline post-1 -->
    <article>
        <a href="post-1" class="inlinepopup" rel="gallery1">Gallery 1: post-1 &gt; post-2 &gt; post-3</a>
        <div id="post-1">Inline content for #post-1\. Group is Gallery 1.</div>
    </article>

    <!-- Inline post-2 -->
    <article>
        <a href="post-2" class="inlinepopup" rel="gallery1">Gallery 1: post-1 &lt; post-2 &gt; post-3</a>
        <div id="post-2">Inline content for #post-2\. Group is Gallery 1.</div>
    </article>

    <!-- Inline post-3 -->
    <article>
        <a href="post-3" class="inlinepopup" rel="gallery1">Gallery 1: post-1 &lt; post-2 &lt; post-3</a>
        <div id="post-3">Inline content for #post-3\. Group is Gallery 1.</div>
    </article>

</section><!-- Gallery 1 |end| -->

<section><!-- Gallery 2 |begin| -->

    <!-- Inline post-4 -->
    <article>
        <a href="post-4" class="inlinepopup" rel="gallery2">Gallery 2: post-4 &gt; post-5</a>
        <div id="post-4">Inline content for #post-4\. Group is Gallery 2.</div>
    </article>

    <!-- Inline post-5 -->
    <article>
        <a href="post-5" class="inlinepopup" rel="gallery2">Gallery 2: post-4 &lt; post-5</a>
        <div id="post-2">Inline content for #post-5\. Group is Gallery 2.</div>
    </article>

</section><!-- Gallery 2 |end| --> 
```

jQuery：

```
$(document).ready(function() {

    $('a.inlinepopup').fancybox({
        'width'           : '75%',
        'height'          : '75%',
        'autoScale'       : false,
        'type'            : 'inline'
    });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:09:18.800

在您链接到内联内容的地方，您需要`#`在开头包含 a`href`

所以改变你`href="post-1"`的`href="#post-1"`

在上下文中它应该是这样的：

```
<!-- Inline post-1 -->
<article>
    <a href="#post-1" class="inlinepopup" rel="gallery1">Gallery 1: post-1 &gt; post-2 &gt; post-3</a>
    <div id="post-1">Inline content for #post-1\. Group is Gallery 1.</div>
</article> 
```

这可能不是唯一的错误，但它是第一个要查看的错误。还要检查 Firebug 或 Web Inspector 中的任何 JS 错误。

# html - 如何找到 Recaptcha ID？

> ID：13126211
> 
> 赞同：1
> 
> 时间：2012-10-29T16:57:59.753
> 
> 标签：html, ruby-on-rails, ruby, recaptcha

在过去的一天里，我一直被困在某件事上。我正在构建一个 RoR 机器人，其中一部分涉及在 mail.com 上注册一个电子邮件帐户。除了验证码（Recaptcha）之外，我已经自动完成了表格的所有填写。

我将使用 deathbycaptcha Ruby gem。但是，为了解决验证码，我需要获取其 ID 或 URL。虽然这在我使用 Firefox Web Developer 工具栏“启用表单详细信息”时出现，但它似乎不在源代码中。我怎样才能找到它？我正在使用Watir。

谢谢！

乔

[http://service.mail.com/registration.html](http://service.mail.com/registration.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T17:01:38.283

recaptcha 挑战 id 是 recaptcha URL 中 k 之后的代码。

他们只是通过一个函数运行它，而不仅仅是在源代码中显示它。

他们的站点密钥是 6LdKsrwSAAAAAHjmh-jQNZ7zskPDs1gsY-WNXAKK

# sql - 实体框架不会从调用存储过程的 SqlQuery 映射 2 列

> ID：13126213
> 
> 赞同：1
> 
> 时间：2012-10-29T16:58:11.150
> 
> 标签：sql, vb.net, entity-framework, stored-procedures, ef-code-first

我正在使用 Code First 并尝试调用存储过程并将其映射到我的一个类。我创建了一个存储过程 BOMComponentChild，它返回组件的详细信息以及 PartsPath 和 MyPath 中的层次结构信息。我有一个用于输出此存储过程的类。我遇到了一个问题，除了两列 PartsPath 和 MyPath 之外的所有内容都被正确映射，这两个属性最终为 Nothing。我四处搜索，根据我的理解，映射绕过任何实体框架名称映射，并使用列名到属性名。名称相同，我不确定为什么只有这两列。

存储过程的最后一部分是：

```
SELECT   t.ParentID
        ,t.ComponentID
        ,c.PartNumber
        ,t.PartsPath
        ,t.MyPath
        ,t.Layer
        ,c.[Description]
        ,loc.LocationID
        ,loc.LocationName
        ,CASE WHEN sup.SupplierID IS NULL THEN 1 ELSE sup.SupplierID END AS SupplierID
        ,CASE WHEN sup.SupplierName IS NULL THEN 'Default' ELSE sup.SupplierName END AS SupplierName
        ,c.Active
        ,c.QA
        ,c.IsAssembly
        ,c.IsPurchasable
        ,c.IsMachined
        ,t.QtyRequired
        ,t.TotalQty

FROM    BuildProducts                       t 
        INNER JOIN [dbo].[BOMComponent]     c       ON c.ComponentID    = t.ComponentID         
        LEFT JOIN [dbo].[BOMSupplier]       bsup    ON bsup.ComponentID = t.ComponentID AND bsup.IsDefault = 1
        LEFT JOIN [dbo].[LookupSupplier]    sup     ON sup.SupplierID   = bsup.SupplierID
        LEFT  JOIN [dbo].[LookupLocation]   loc     ON loc.LocationID   = c.LocationID
WHERE 
        (@IsAssembly IS NULL OR IsAssembly = @IsAssembly)
ORDER BY
         t.MyPath 
```

它映射到的类是：

```
Public Class BOMComponentChild

        Public Property ParentID As Nullable(Of Integer)
        Public Property ComponentID As Integer
        Public Property PartNumber As String
        Public Property MyPath As String
        Public Property PartsPath As String
        Public Property Layer As Integer
        Public Property Description As String
        Public Property LocationID As Integer
        Public Property LocationName As String
        Public Property SupplierID As Integer
        Public Property SupplierName As String
        Public Property Active As Boolean
        Public Property QA As Boolean
        Public Property IsAssembly As Boolean
        Public Property IsPurchasable As Boolean
        Public Property IsMachined As Boolean
        Public Property QtyRequired As Integer
        Public Property TotalQty As Integer

        Public Property Children As IDictionary(Of String, BOMComponentChild) = New Dictionary(Of String, BOMComponentChild)

    End Class 
```

我试图这样称呼它：

```
Me.Database.SqlQuery(Of BOMComponentChild)("EXEC [BOMComponentChild] @ComponentID, @PathPrefix, @IsAssembly", params).ToList() 
```

当我在管理工作室中运行存储过程时，这些列是正确的而不是空的。我只是无法弄清楚为什么这些不会映射，因为它们是存储过程中的重要信息。PartsPath 和 MyPath 的类型是 varchar(50)。

**编辑**

所以我意识到这些列和其他列之间的唯一区别是它们是用铸件制成的。我最后用静态字符串替换了它们，它们被正确映射。当我用“测试”替换最后一个选择时，我得到了映射的值。如果我的 CAST 在 SQL 查询中正确显示，它们有什么问题。

```
;WITH BuildProducts ( ParentID, ComponentID, PartNumber
                    ,PartsPath, MyPath, QtyRequired, TotalQty, Layer)
AS
(
    SELECT   ...
            ,@PathPrefix                        AS PartsPath
            ,CAST(@PathPrefix +  
                    CAST(ComponentID            AS varchar(4))  +
                    '/'                         AS varchar(50)
                  )                             AS MyPath
            ,... 
    FROM    [dbo].[BOMComponent]            
    WHERE   ...

    UNION ALL

    SELECT   ...
            ,CAST(b.PartsPath + 
                    CAST(a.ParentID             AS varchar(4))  +
                    '/'                         AS varchar(50)
                  )                             AS PartsPath
            ,CAST(b.PartsPath + 
                    CAST(a.ParentID             AS varchar(4))  +
                    '/'                                         +
                    CAST(a.ComponentID          AS varchar(4))  +
                    '/'                         AS varchar(50)
                  )                             AS MyPath
            ,...
    FROM    [dbo].[BOMAssembly]             a 
            INNER JOIN [dbo].[BOMComponent] c ON a.ComponentID = c.ComponentID
            ...
)

SELECT  -- t.PartsPath
        --,t.MyPath
        'test' As PartsPath
        ,'test' As MyPath
        ,...

FROM    BuildProducts                       t 
        ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:50:40.787

在我无限的智慧中，我在查询中将参数 PathPrefix 默认为“/”，但是，我将 PathPrefix 作为 DBNull 传递，这与不传递值不同。因此 NULL 通过查询传播。

对不起，如果我浪费了任何人的时间。

# c# - 你能解释一下这种泛型行为吗？如果我有解决方法？

> ID：13126215
> 
> 赞同：6
> 
> 时间：2012-10-29T16:58:14.543
> 
> 标签：c#, oop, generics, implementation

下面的示例程序：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace GenericsTest
{
    class Program
    {
        static void Main(string[] args)
        {
            IRetrievable<int, User> repo = new FakeRepository();

            Console.WriteLine(repo.Retrieve(35));
        }
    }

    class User
    {
        public int Id { get; set; }
        public string Name { get; set; }
    }

    class FakeRepository : BaseRepository<User>, ICreatable<User>, IDeletable<User>, IRetrievable<int, User>
    {
        // why do I have to implement this here, instead of letting the
        // TKey generics implementation in the baseclass handle it?
        //public User Retrieve(int input)
        //{
        //    throw new NotImplementedException();
        //}
    }

    class BaseRepository<TPoco> where TPoco : class,new()
    {
        public virtual TPoco Create()
        {
            return new TPoco();
        }

        public virtual bool Delete(TPoco item)
        {
            return true;
        }

        public virtual TPoco Retrieve<TKey>(TKey input)
        {
            return null;
        }
    }

    interface ICreatable<TPoco> { TPoco Create(); }
    interface IDeletable<TPoco> { bool Delete(TPoco item); }
    interface IRetrievable<TKey, TPoco> { TPoco Retrieve(TKey input); }
} 
```

这个示例程序代表了我的实际程序使用的接口，并演示了我遇到的问题（在 中注释掉`FakeRepository`）。我希望这个方法调用一般由基类处理（在我的真实示例中，基类能够处理给它的 95% 的情况），允许通过显式指定 TKey 的类型来覆盖子类。我对 IRetrievable 使用什么参数约束似乎并不重要，我永远无法让方法调用落入基类。

此外，如果有人可以看到实现这种行为并获得我最终想要的结果的替代方法，我会非常有兴趣看到它。

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T17:12:16.147

该代码无法编译的原因与这个更简单的示例无法编译的原因相同：

```
public interface IBar
{
    void Foo(int i);
}

public class Bar : IBar
{
    public void Foo<T>(T i)
    {
    }
} 
```

这些方法根本没有相同的签名。是的，您可以调用`someBar.Foo(5)`它，它会解析`T`为`int`，但事实仍然是`Foo`in`Bar`仍然没有与实际将 an`int`作为参数的方法相同的签名。

您可以通过在类型中同时使用非泛型和泛型方法来进一步证明这一点；这不会导致与歧义相关的错误：

```
public class Bar : IBar
{
    public void Foo(int i)
    {

    }
    public void Foo<T>(T i)
    {
    }
} 
```

至于实际解决您的问题，您可以这样做：

```
class FakeRepository : BaseRepository<User>, ICreatable<User>, IDeletable<User>, IRetrievable<int, User>
{
    public User Retrieve(int input)
    {
        return Retrieve<int>(input);
    }
} 
```

这将意味着`FakeRespository`具有通用和非通用版本`Retrieve`，但最终所有调用仍指向通用版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T17:06:28.683

编译器不知道里面有什么`TKey`，`BaseRepository`也无法将其关联`IRetreivable`（请注意，泛型方法与非泛型方法的签名不同）。

我认为您想要更多类似这些方面的东西，基类进行接口继承，并指定`TKey`：

```
class FakeRepository : BaseRepository<int, User>
{
}

class BaseRepository<TKey, TPoco> : ICreatable<TPoco>, IDeletable<TPoco>, IRetrievable<TKey, TPoco> where TPoco : class,new()
{
    public virtual TPoco Create()
    {
        return new TPoco();
    }

    public virtual bool Delete(TPoco item)
    {
        return true;
    }

    public virtual TPoco Retrieve<TKey>(TKey input)
    {
        return null;
    }
} 
```

# php - 有没有办法查询数组字段是否包含 Doctrine2 中的某个值？

> ID：13126220
> 
> 赞同：20
> 
> 时间：2012-10-29T16:58:35.603
> 
> 标签：php, mysql, symfony, doctrine-orm

从 Symfony2 + Doctrine 开始。

我有一个包含用户对象（fos_user）的表，我的架构包含一个*“数组”*类型的*角色*列。

 *Doctrine 通过将它们从 php 'array' 序列化为 'longtext' （在 mysql 的情况下）来保存这种类型的字段。

因此，假设我将以下用户保存到数据库中：

```
User1: array(ROLE_ADMIN, ROLE_CUSTOM1)
User2: array(ROLE_ADMIN, ROLE_CUSTOM2)
User3: array(ROLE_CUSTOM2) 
```

现在在我的控制器中，我想选择所有设置了 ROLE_ADMIN 的用户。有没有办法编写一个直接返回我*User1*和*User2*的 DQL 查询？或者我是否需要获取所有用户让 Doctrine 反序列化角色列，然后为每个用户执行**in_array('ROLE_ADMIN', $user->getRoles())**？

我已经搜索了[手册的 DQL 部分](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html)，但到目前为止没有找到任何与我的需求相似的东西......

**UPD：**找到一个[关于](https://stackoverflow.com/questions/9016914/symfony-2-fos-bundle-how-to-select-users-with-a-specific-role)同一事物的问题，其中包含一个有效的查询代码

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-29T17:46:43.260

您可以简单地使用`LIKE`本手册中描述的语句（是的，即使在序列化对象上也是如此）。

我建议您为角色创建一个实体类，并通过*多对多*关联将其与用户实体连接。*

# php - 登录验证总是相同的重定向

> ID：13126221
> 
> 赞同：0
> 
> 时间：2012-10-29T16:58:39.113
> 
> 标签：php, codeigniter, login, codeigniter-2

这是我的代码：

session_helper

```
if ( ! function_exists('is_login'))
{
    function is_login()
    {
        $CI =& get_instance();

        $is_logged_in = $CI->session->userdata('is_logged_in');

        if (!isset($is_logged_in) || $is_logged_in != TRUE) { 

            redirect('login');

        }               
    }   
} 
```

check_login 函数

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Check_login extends CI_Controller {

    function __construct()
    {
            parent::__construct();
            $this->is_logged_in();  
    }

    function is_logged_in()
    {
        $this->load->helper('session_helper');
                $this->load->helper('url');

        is_login();
    }       
} 
```

当我归纳这个功能时： `<?php echo anchor('check_login', 'check', 'class="link-class"') ?>`

每一次都是感应`redirect('login');`

我在数据库中有 CI_session 表，登录功能没问题。我的问题在哪里？

# c++ - 提升共享指针和内存管理

> ID：13126223
> 
> 赞同：0
> 
> 时间：2012-10-29T16:58:44.293
> 
> 标签：c++, boost, memory-leaks, shared-ptr

我最近才开始使用 boost，它提供的功能和 API 给我留下了深刻的印象。

在使用 boost::shared_ptr 时，当我用 Valgrind 检查程序时，我发现了相当多的“仍然可以访问”的内存泄漏。根据 Valgrind 的文档，这些都不是问题。但是，由于我过去只使用标准 C++ 库，因此我始终确保编写的任何程序都完全没有内存泄漏。

我的问题是，这些内存泄漏是否值得担心？我尝试使用 reset()，但是它只会减少引用计数，不会释放内存。我可以安全地忽略这些，或者以任何方式强制释放 boost::shared_ptr 分配的内存吗？

谢谢你。

编辑1：

我在这段代码中使用了 apache thrift。使用选项--show-reachable=yes 进一步检查valigrind，几乎所有泄漏消息都类似于以下内容：

```
==6813== 24 bytes in 1 blocks are still reachable in loss record 3 of 21
==6813==    at 0x4C2B6CD: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==6813==    by 0x5E7A783: CRYPTO_malloc (in /lib/x86_64-linux-gnu/libcrypto.so.1.0.0)
==6813==    by 0x5EF524A: lh_insert (in /lib/x86_64-linux-gnu/libcrypto.so.1.0.0)
==6813==    by 0x5E7BC17: ??? (in /lib/x86_64-linux-gnu/libcrypto.so.1.0.0)
==6813==    by 0x5E7C268: ??? (in /lib/x86_64-linux-gnu/libcrypto.so.1.0.0)
==6813==    by 0x5BF43C5: SSL_CTX_free (in /lib/x86_64-linux-gnu/libssl.so.1.0.0)
==6813==    by 0x4E9574F: apache::thrift::transport::SSLContext::~SSLContext() (TSSLSocket.cpp:71)
==6813==    by 0x4E95768: apache::thrift::transport::SSLContext::~SSLContext() (TSSLSocket.cpp:74)
==6813==    by 0x4E96C08:  apache::thrift::transport::TSSLSocketFactory::~TSSLSocketFactory() (sp_counted_base_gcc_x86.hpp:145)
==6813==    by 0x4E96C98: apache::thrift::transport::TSSLSocketFactory::~TSSLSocketFactory() (TSSLSocket.cpp:369)
==6813==    by 0x42A986: void boost::checked_delete<apache::thrift::transport::TSSLSocketFactory>(apache::thrift::transport::TSSLSocketFactory*) (checked_delete.hpp:34)
==6813==    by 0x42ADE3: boost::detail::sp_counted_impl_p<apache::thrift::transport::TSSLSocketFactory>::dispose() (sp_counted_impl.hpp:78) 
```

这是否意味着泄漏内存的是节俭代码？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:59:53.397

看看[http://www.gnu.org/software/libc/manual/html_node/Statistics-of-Malloc.html#Statistics-of-Malloc](http://www.gnu.org/software/libc/manual/html_node/Statistics-of-Malloc.html#Statistics-of-Malloc)

如果`uordblks`程序的开头与结尾的相同，则说明没有泄漏。因为您已设法释放所有已分配的内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T18:30:15.787

通常，如果内存仍然可以访问，则不是泄漏。如果您将泄漏定义为您使用 malloc/new 保留的一些内存，但您不能再释放它，如

```
//this leaks since p is unreachable outside the scope
int main() {
  char * p = (char*)malloc(10);
  return 0; 
} 
```

您可能会遇到这样一种情况，即您的内存总是在增长，但从技术上讲这不是泄漏，例如，您有一个全局列表，您总是将内容放入但从不将其取出。在这种情况下，可以访问列表内存并`could`释放它。

话虽如此，通过粘贴在您的问题中的调用堆栈，似乎引用的内存是 libcrypto 在销毁节俭 SSL 传输时完成的一些分配。

所以你的共享指针不是问题，很可能只是libcrypto内部使用的缓冲内存。

# c# - 每次与转换器绑定时，在按钮单击时变亮背景颜色

> ID：13126224
> 
> 赞同：3
> 
> 时间：2012-10-29T16:58:46.397
> 
> 标签：c#, wpf, xaml, binding, converter

我想在点击时减轻按钮背景。所以我做了以下事情：

```
<converter:ColorLightConverter x:Key="colorLightConverter" /> 
```

...

```
<Style BasedOn="{StaticResource default}" TargetType="{x:Type controls:Button}">            
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type controls:Button}">
                    <ControlTemplate.Triggers>                            
                        <Trigger Property="IsPressed" Value="True">
                            <Setter Property="Background">
                                <Setter.Value>
                                    <SolidColorBrush Color="{Binding Path=Background.Color, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource colorLightConverter}}" />
                                </Setter.Value>
                            </Setter>
                        </Trigger>
                    </ControlTemplate.Triggers>
                    <Border Background="{TemplateBinding Background}"
                            BorderBrush="Transparent"
                            BorderThickness="0">
                        ...                            
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

**转换器：**

```
class ColorLightConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            Color color = (Color)value;
            System.Drawing.Color lightColor = ControlPaint.Light(System.Drawing.Color.FromArgb(color.A, color.R, color.G, color.B));

            return Color.FromArgb(lightColor.A, lightColor.R, lightColor.G, lightColor.B);
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    } 
```

但是当我单击按钮时不会调用转换器。我认为绑定有什么问题，但是我看不到错误...

你能帮助我吗？

也许我完全错了。我基本上想做的事情：单击按钮时，取当前背景颜色并使其变亮。不多...

# 更新1：

我尝试了以下方法：

**稍微改变了绑定：**

```
<Trigger Property="IsPressed" Value="True">
                            <Setter Property="Background" Value="{Binding Path=Background.Color, RelativeSource={RelativeSource Self}, Converter={StaticResource colorLightConverter}}" />
                        </Trigger> 
```

**更改了转换器（现在它返回一个 SolidColorBrush）：**

```
class ColorLightConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            Color color = (Color)value;
            System.Drawing.Color lightColor = ControlPaint.Light(System.Drawing.Color.FromArgb(color.A, color.R, color.G, color.B));

            return new SolidColorBrush(Color.FromArgb(lightColor.A, lightColor.R, lightColor.G, lightColor.B));
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    } 
```

现在调用了转换器，但是一次又一次的调用，所以几秒后就抛出了stackoverflow异常。这个无限循环从何而来？我现在真的有点迷茫……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:42:43.907

您不应该在 WPF 上使用 System.Drawing.Color。请改用 System.Windows.Media.Color。另一个重要的事情是 ControlTemplate.Triggers 中的 Setter 不必使用 RelativeSource TemplatedParent 来引用控件。只是：

```
<Trigger Property="IsPressed" Value="True">
    <Setter Property="Background" Value="YourLightColor"/>
</Trigger> 
```

其余的保持不变。现在，如果您需要指定自定义逻辑（例如转换器，只需将转换器放在该设置器中。

编辑：无限循环来自于您绑定到 Background.Color，然后设置背景，这会触发 WPF 属性系统中的属性更改通知，这反过来会导致刷新绑定，依此类推。 ..我认为您可以通过将绑定模式设置为 = OneTime 来解决此问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:33:25.623

我为按钮使用了以下样式。它可能会帮助你。

```
 <Style TargetType="{x:Type Button}">
    <!-- General for all buttons -->
    <Setter Property="Foreground"
            Value="Azure" />
    <Setter Property="FontFamily"
            Value="Verdana" />
    <Setter Property="FontSize"
            Value="12" />
    <Setter Property="FontWeight"
            Value="Bold" />
    <Setter Property="Margin"
            Value="4,4,4,4"></Setter>
    <Setter Property="VerticalAlignment"
            Value="Center"></Setter>
    <Setter Property="Background">
        <Setter.Value>
            <RadialGradientBrush>
                <GradientStop Color="#145082"
                              Offset="0" />
                <GradientStop Color="Black"
                              Offset="1" />
            </RadialGradientBrush>
        </Setter.Value>
    </Setter>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Button}">
                <Grid>
                    <Rectangle x:Name="GelBackground"
                               Opacity="1"
                               RadiusX="9"
                               RadiusY="9"
                               Fill="{TemplateBinding Background}"></Rectangle>
                    <Rectangle x:Name="GelShine"
                               Margin="2,2,2,0"
                               VerticalAlignment="Top"
                               RadiusX="4"
                               RadiusY="4"
                               Opacity=".8"
                               Stroke="Transparent"
                               Height="15">
                        <Rectangle.Fill>
                            <LinearGradientBrush StartPoint="0,0"
                                                 EndPoint="0,1">
                                <GradientStop Color="#ccffffff"
                                              Offset="0" />
                                <GradientStop Color="Transparent"
                                              Offset="1" />
                            </LinearGradientBrush>
                        </Rectangle.Fill>
                    </Rectangle>
                    <ContentPresenter Margin="10,0,10,0"
                                      VerticalAlignment="Center"
                                      HorizontalAlignment="Center" />
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsMouseOver"
                             Value="true">
                        <Setter Property="Foreground"
                                Value="White" />
                        <Setter Property="FontSize"
                                Value="12" />
                        <Setter Property="Rectangle.Fill"
                                TargetName="GelBackground">
                            <Setter.Value>
                                <RadialGradientBrush>
                                    <GradientBrush.GradientStops>
                                        <GradientStopCollection>
                                            <GradientStop Color="Tomato"
                                                          Offset="0" />
                                            <GradientStop Color="Black"
                                                          Offset="1" />
                                        </GradientStopCollection>
                                    </GradientBrush.GradientStops>
                                </RadialGradientBrush>
                            </Setter.Value>
                        </Setter>
                    </Trigger>
                    <Trigger Property="IsPressed"
                             Value="true">
                        <Setter Property="Foreground"
                                Value="Black" />
                        <Setter Property="Fill"
                                TargetName="GelBackground">
                            <Setter.Value>
                                <RadialGradientBrush>
                                    <GradientStop Color="#ffcc00"
                                                  Offset="0" />
                                    <GradientStop Color="#cc9900"
                                                  Offset="1" />
                                </RadialGradientBrush>
                            </Setter.Value>
                        </Setter>
                    </Trigger>
                    <Trigger Property="IsEnabled"
                             Value="false">
                        <Setter Property="Foreground"
                                Value="Black" />
                        <Setter Property="Fill"
                                TargetName="GelBackground">
                            <Setter.Value>
                                <RadialGradientBrush>
                                    <GradientStop Color="White"
                                                  Offset="0" />
                                    <GradientStop Color="#333333"
                                                  Offset=".4" />
                                    <GradientStop Color="#111111"
                                                  Offset=".6" />
                                    <GradientStop Color="#000000"
                                                  Offset=".7" />
                                    <GradientStop Color="#000000"
                                                  Offset="1" />
                                </RadialGradientBrush>
                            </Setter.Value>
                        </Setter>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T18:48:22.847

问题出在背景上，我不知道所有属性的确切原因，背景总是以这种方式运行，但是如果您设置模板而不是背景，问题就解决了：

```
 <Style TargetType="{x:Type controls:Button}">
        <Style.Triggers>
            <Trigger Property="IsPressed" Value="True">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type controls:Button}">
                            <Border>
                                <Border.Background>
                                    <SolidColorBrush Color="{Binding RelativeSource={RelativeSource TemplatedParent}, 
                                        Path=Background.Color, Converter={StaticResource colorLightConverter}}"/>
                                </Border.Background>
                                <ContentPresenter Content="{TemplateBinding Content}"/>
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Trigger>
        </Style.Triggers>
    </Setter Property="Template">
        <Setter.Value.../>
    </Setter>
    </Style> 
```

# sml - 如何在标准 ML 中实现某种“可空”类型？

> ID：13126228
> 
> 赞同：1
> 
> 时间：2012-10-29T16:58:54.777
> 
> 标签：sml, smlnj

说在标准 ML 中定义几种数据类型：

```
datatype color = orange | navy | teal | silver | hsl of real * real * real;

datatype direction = east | north | west | south; 
```

然后我定义一个使用上述数据类型的值：

```
type Cursor = int * int * color * direction;

val cursor : Cursor = (0, 0, orange, east); 
```

它是一个具有位置、绘图颜色和方向的“光标”。**我想要的是它的属性最初是 undefined**。我可以为每个数据类型添加一个构造函数`color`（`direction`我将如何使用`int`位置值来做到这一点？），如下所示：

```
datatype color = orange | teal | silver | hsl of real * real * real | undefined;

datatype direction = east | north | west | south | undefined;

val cursor : Cursor = (0, 0, undefined, undefined); 
```

我想这样做，**而**`undefined`不必为每个数据类型显式定义一个额外的构造函数。你能想出一个好的、干净的解决方案吗？某种形式的泛型，无论类型如何，我都可以简单地使用“未定义值”的形式。`Nullable`粗略地说，类似于 Javas 。

我的动机是我的光标的属性最初是未定义的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T18:08:56.253

没有语法糖可以引用具有相同名称的不同构造函数。（换句话说：标准 ML 不允许自定义重载。）相反，首先声明的构造函数被另一种类型的类似拼写构造函数覆盖。

Haskell 有一个名为的值`undefined`，在评估时会引发异常。因此，此值的类型不受任何特定类型的限制，并且是多态的，这意味着 undefined 可以在任何地方使用。

标准 ML 不能将此值定义为引发异常的别名，因为它是经过严格评估的。这意味着在`val undefined = raise Undefined`声明的那一刻，抛出异常。但是可以`raise Undefined`在尚未编写的程序的某些部分中使用，只要它不立即评估即可。

`'a option`代数类型的一个非常重要的优势是，除非您明确地形成支持它的类型（例如使用），否则您不会意外地拥有类似 null 的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T17:02:11.297

为此，人们通常使用一种[`option`](http://www.standardml.org/Basis/option.html)类型。

您生成的机器人类型将是：

```
type Robot = (int * int * color * direction) option; 
```

或组件明智。这也与自己简单地使用两个构造函数（一个表示未定义值，一个表示初始化值）创建数据类型相同，但这`option`是一种标准方法，它也鼓励单子编程风格。

这可以确保您的类型安全，因为每当您破坏类型的值时，您都需要匹配两个构造函数。

# performance - 强制连接工作

> ID：13126235
> 
> 赞同：3
> 
> 时间：2012-10-29T16:59:27.383
> 
> 标签：performance, unix, networking, connect, telnet

我在运行 red hat 5 的 VM 上在 bash 中运行以下行：

```
 for i in {1..100000};
        do telnet 10.10.10.105 41941;
    done 
```

在某些时候，telnet 会连接到端口，即使没有人在监听它。它似乎正在连接到它的自我？当我启动应用程序的客户端**而不**启动服务器时，会出现同样的问题 - 客户端成功连接到 ip:port。客户端看起来像这样：

```
 addr.sin_family = AF_INET;
    addr.sin_port = htons(atoi(port));
    addr.sin_addr.s_addr = inet_addr(hostname);

    some_while_loop
    {
        status = ::connect(sock, (sockaddr *)&addr, sizeof(addr));
        if (status == -1)
        {
            shutdown(sock, 2);
            close(sock);
            return false;
        }
   } 
```

我发现这篇文章：[http](http://web.deu.edu.tr/doc/soket/) : //web.deu.edu.tr/doc/soket/ 在 6.2 中指出，如果您连接到正在运行的同一台机器，连接将成功。我的问题是，为什么会这样？是硬件问题还是正在使用故障安全红帽内核，或者可能是因为我正在使用的端口（例如，对于 1025，我没有这个问题）......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:13:17.583

它与端口相关。启动 TCP 连接时，对于客户端，会选择端口上限 (32786+) 中随机未使用的端口。然后完成通常的[TCP 握手](https://www.rfc-editor.org/rfc/rfc793#section-3.4)，仅在称为同时启动的特殊情况下完成。这里假设连接的双方都想同时建立一个连接，见下图来自 RFC。

您可以使用 ncat 强制执行该行为：

```
ncat -p 50000 127.0.0.1 50000 
```

这将使 ncat 连接到`127.0.0.1:50000`，同时使用源端口`50000`。您可以立即获得有效连接，而无需事先侦听传入连接。

* * *

尽管评论者说了什么，这里发生的案例被称为**同时启动**，并且在[RFC 793 第 3.4 节](https://www.rfc-editor.org/rfc/rfc793#section-3.4)中有详细说明，其中说：

> 同时启动只是稍微复杂一些，如图 8 所示。每个 TCP 循环从 CLOSED 到 SYN-SENT 到 SYN-RECEIVED 到 ESTABLISHED。
> 
> ```
>  TCP A                                            TCP B
> 
>   1\.  CLOSED                                           CLOSED
> 
>   2\.  SYN-SENT     --> <SEQ=100><CTL=SYN>              ...
> 
>   3\.  SYN-RECEIVED <-- <SEQ=300><CTL=SYN>              <-- SYN-SENT
> 
>   4\.               ... <SEQ=100><CTL=SYN>              --> SYN-RECEIVED
> 
>   5\.  SYN-RECEIVED --> <SEQ=100><ACK=301><CTL=SYN,ACK> ...
> 
>   6\.  ESTABLISHED  <-- <SEQ=300><ACK=101><CTL=SYN,ACK> <-- SYN-RECEIVED
> 
>   7\.               ... <SEQ=101><ACK=301><CTL=ACK>     --> ESTABLISHED
> 
>                 Simultaneous Connection Synchronization
> 
>                                Figure 8. 
> ```

我还更正了第一段，使其更加清晰和准确。

# python - msw中的wxpython列表框换行符

> ID：13126236
> 
> 赞同：0
> 
> 时间：2012-10-29T16:59:29.057
> 
> 标签：python, windows, wxpython, wxwidgets

我正在尝试使用向列表框添加多行消息

```
wx.listbox.Append('part1 \r\n part2') 
```

在 linux (gtk) 上我得到多行框

在 Windows (msw) 上它只是忽略换行符......

有没有办法在 Windows 中获得类似的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T21:11:39.673

The windows [ListBox control](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775146%28v=vs.85%29.aspx) doesn't implement that behavior. While it allows drawing the item yourself and adjusting its height, wxWidgets doesn't expose this functionality for the ListBox. As an alternative, you could use the [`wx.SimpleHtmlListBox`](http://www.wxpython.org/docs/api/wx.SimpleHtmlListBox-class.html) or derive from [`wx.HtmlListBox`](http://www.wxpython.org/docs/api/wx.HtmlListBox-class.html).

> **wxSimpleHtmlListBox** is an implementation of wxHtmlListBox which shows HTML content in the listbox rows.
> 
> Unlike wxHtmlListBox, this is not an abstract class and thus it has the advantage that you can use it without deriving your own class from it. However, it also has the disadvantage that this is not a virtual control and thus it's not well-suited for those cases where you need to show a huge number of items: every time you add/insert a string, it will be stored internally and thus will take memory.

It inherits from the [`ItemContainer`](http://www.wxpython.org/docs/api/wx.ItemContainer-class.html) just like wx.ListBox, so the usage is essentially the same. Keep in mind that you have to escape certain characters (as shown in the example). For that you could use [`cgi.escape`](http://docs.python.org/2/library/cgi.html#cgi.escape).

```
import wx
import cgi

class MyFrame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self,None)
        lb = wx.SimpleHtmlListBox(self)
        lb.Append( cgi.escape("foo <&> bar") )
        lb.Append("<b>Line 1</b> <br> Line 2")

app = wx.PySimpleApp()
frame = MyFrame().Show()
app.MainLoop() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:35:26.240

我对此表示怀疑。本机小部件可能不支持 Windows 上的这种行为。不过，您也许可以使用 DVC_CustomRenderer 来完成（2.9 系列中的新功能）。我知道您可以使用 UltimateListCtrl 来做到这一点，因为演示本身就表明了这一点。如果它是必备功能，我会建议走这条路线。

# c# - HTML 查找和替换 href 标签

> ID：13126238
> 
> 赞同：0
> 
> 时间：2012-10-29T16:59:38.910
> 
> 标签：c#, html, html-parsing

> **可能重复：**
> [在 C# 中解析 html 的最佳方法是什么？](https://stackoverflow.com/questions/56107/what-is-the-best-way-to-parse-html-in-c)

我正在解析一个 HTML 文件。我需要在 html 中找到所有 href 标记并将它们替换为文本友好的版本。

这是一个例子。

```
Original Text: <a href="http://foo.bar">click here</a> 
replacement value: click here <http://foo.bar> 
```

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T17:06:28.150

您可以使用[Html Agility Pack library](http://html-agility-pack.net/?z=codeplex)，代码如下：

```
 HtmlDocument doc = new HtmlDocument();
        doc.Load(myHtmlFile); // load your file

        // select recursively all A elements declaring an HREF attribute.
        foreach (HtmlNode node in doc.DocumentNode.SelectNodes("//a[@href]"))
        {
            node.ParentNode.ReplaceChild(doc.CreateTextNode(node.InnerText + " <" + node.GetAttributeValue("href", null) + ">"), node);
        }

        doc.Save(Console.Out); // output the new doc. 
```

# c# - C# winforms 使用集合绘制到图片框的问题？

> ID：13126245
> 
> 赞同：0
> 
> 时间：2012-10-29T17:00:11.730
> 
> 标签：c#, winforms

该窗体包含一个图片框（picturebox1）和一个定时器控件（timer1）...

基本上在启动时，我创建了一个包含 5 个像素类实例的列表集合。当计时器触发时，我调用调用绘制事件的图片框的刷新。在绘制事件中，我遍历列表集合并调用每个像素的绘制方法。

我遇到的问题是只有一个像素出现......也就是说.. 除非我在添加像素的点设置中断，继续，然后再次中断并重复，直到创建所有 pthe 像素。然后由于某种原因，所有的像素都出现了......

谁能告诉我为什么我只能看到一个像素？

```
public partial class Form1 : Form
{
    List<Pixel> pixels = new List<Pixel>();

    public Form1()
    {            
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        for (int ii = 0; ii < 5; ii++)
            pixels.Add(new Pixel(pictureBox1));  // <- breakpoint here...?
    }

    private void pictureBox1_Paint(object sender, PaintEventArgs e)
    {
        foreach (Pixel p in pixels)
            p.Draw(e, pictureBox1);
    }

    private void timer1_Tick(object sender, EventArgs e)
    {
        pictureBox1.Refresh();
    }
}

public class Pixel
{
    Random r = new Random(DateTime.Now.Millisecond);

    public Point Position { get; set; }

    public Pixel(PictureBox src) 
    {
        Position = new Point(r.Next(0, src.Width), r.Next(0, src.Height));
    }

    public void Draw(PaintEventArgs e, PictureBox src)
    {
        e.Graphics.DrawRectangle(new Pen(Color.Black), Position.X, Position.Y, 1, 1);
    }
} 
```

我的原始代码做得更多......但我把它全部去掉并得到了相同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:23:49.983

由于`Random r = new Random(DateTime.Now.Millisecond)`每次都使用相同的种子值调用像素，因此像素出现在完全相同的位置。我将 Random 声明移至主类并将其传递给像素类。现在它按我的预期工作。

```
public partial class Form1 : Form
{
    Random r = new Random(DateTime.Now.Millisecond);
    List<Pixel> pixels = new List<Pixel>();

    public Form1()
    {            
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        for (int ii = 0; ii < 5; ii++)
        {
            pixels.Add(new Pixel(pictureBox1, r));
        }
    }

    private void pictureBox1_Paint(object sender, PaintEventArgs e)
    {
        foreach (Pixel p in pixels)
            p.Draw(e, pictureBox1);
    }

    private void timer1_Tick(object sender, EventArgs e)
    {
        pictureBox1.Refresh();
    }
}

public class Pixel
{
    public Point Position { get; set; }

    public Pixel(PictureBox src, Random r) 
    {
        Position = new Point(r.Next(0, src.Width), r.Next(0, src.Height));
    }

    public void Draw(PaintEventArgs e, PictureBox src)
    {
        e.Graphics.DrawRectangle(new Pen(Color.Black), Position.X, Position.Y, 1, 1);
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-29T17:31:44.210

这是因为您在像素类的所有 5 个实例上的随机化器都使用完全相同的种子（这一切都发生在相同的毫秒值上）。不要宽恕使用 Thread.Sleep，至少暴露问题的最快“修复”是将您的 form_load 事件更改为如下所示（您也可以重构随机化的方式）：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        for (int ii = 0; ii < 5; ii++)
        {
            Thread.Sleep(1);
            pixels.Add(new Pixel(pictureBox1));
        }
    } 
```

# c# - 解决 ASP.NET 中不明确的名称

> ID：13126249
> 
> 赞同：2
> 
> 时间：2012-10-29T17:00:36.540
> 
> 标签：c#, asp.net, .net

输入类的全名很烦人
`myNamespace.y.calendar cal = new myNamespace.y.calendar();` （因为 asp.net 在 System.web.ui.webcontrolls 中已经有一个名为 calendar 的类名）。所以要解决这个问题，我们可以使用 like

```
using Calendar = myNamespace.y.calendar;
Calendar cal = new Calendar(); 
```

但是如何在 asp.net aspx 页面中做同样的事情呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-29T17:04:25.850

```
<%@ Import Namespace="Calendar=myNamespace.y.calendar" %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:39:19.390

[有关Namespace Alias Qualifier](http://msdn.microsoft.com/en-us/library/c3ay4x3d%28v=vs.80%29.aspx)的更多信息。如果您的类名与来自不同命名空间的另一个类不明确，则仅导入命名空间可能是不够的：

```
using colAlias = System.Collections;
namespace System
{
    class TestClass
    {
        static void Main()
        {
            // Searching the alias:
            colAlias::Hashtable test = new colAlias::Hashtable();

            // Add items to the table.
            test.Add("A", "1");
            test.Add("B", "2");
            test.Add("C", "3");

            foreach (string name in test.Keys)
            {
                // Seaching the gloabal namespace:
                global::System.Console.WriteLine(name + " " + test[name]);
            }
        }
    }
} 
```

# opengl-es-2.0 - 构建 Cg 程序的正确方法是什么？

> ID：13126250
> 
> 赞同：3
> 
> 时间：2012-10-29T17:00:35.930
> 
> 标签：opengl-es-2.0, shader, cg, hlsl2glsl

[本教程](http://http.developer.nvidia.com/CgTutorial/cg_tutorial_chapter03.html)使用显式 OUT 结构，例如：

```
struct C3E1v_Output {
  float4 position : POSITION;
  float4 color    : COLOR;
};

C3E1v_Output C3E1v_anyColor(float2 position : POSITION,
                            uniform float4 constantColor)
{
  C3E1v_Output OUT;
  OUT.position = float4(position, 0, 1);
  OUT.color = constantColor;  // Some RGBA color
  return OUT;
} 
```

但是看看我的一个着色器，我有明确的输入/输出参数：

```
float4 slice_vp(
        // Vertex Inputs
        in float4 position        : POSITION,    // Vertex position in model space
      out float4 oposition : POSITION,
        // Model Level Inputs
        uniform float4x4 worldViewProj) : TEXCOORD6
{
    // Calculate output position
    float4 p = mul(worldViewProj, position);
    oposition=p;
    return p;
} 
```

我在使用 HLSL2GLSL 时遇到了一些问题，我想知道我的 Cg 格式是否应该受到指责（即使它作为 Cg 脚本工作得很好）。是否有“正确”的方式，或者这两种方式是否完全不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T00:13:20.047

如您所见，两种方式都有效。但是，我强烈支持使用结构——尤其是对于顶点着色器的输出（片段着色器的输入）。原因与机器喜欢什么无关（它不在乎），而更多地与创建可以在项目和人员之间安全重用和共享的代码有关。您最不想发现和调试的情况是，程序员在某些情况下为 TEXCOORD1 分配了一个值，而在（某些）其他情况下试图从 TEXCOORD2 中读取它。或寄存器不匹配的任何排列。使用结构，你的生活会更好。

# c - 阴影和阴影

> ID：13126252
> 
> 赞同：1
> 
> 时间：2012-10-29T17:00:52.607
> 
> 标签：c, algorithm, graphics, pseudocode

我在网上阅读了很多光线追踪算法。但是，我对阴影和阴影没有清楚的了解。根据我的理解，下面的伪代码是否正确？

```
for each primitive 
    check for intersection
    if there is one 
         do color be half of the background color
         Ishadow = true
         break

for each ambient light in environment        
    calculate light contribution to the color

if ( Ishadow == false ) 
   for each point light 
     calculate diffuse shading
     calculate reflection direction
     calculate specular light

trace for reflection ray // (i)  
add color returned from i after multiplied by some coefficient

trace for refraction ray // (ii)
add color returned from ii after multiplied by some coefficient

return color value calculated until this point 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:31:57.533

伪代码的问题在于它很容易获得足够的“伪”，以至于它变成了我们试图通过远离自然语言来避免的歧义。“颜色是背景颜色的一半？” 这条线在您遍历光源之前出现的事实令人困惑。在迭代光源之前如何设置 Ishadow？

也许更好的描述是：

```
given a ray in space
    find nearest object with which ray intersects
    for each point light
        if normal at surface of intersected object points toward light (use dot product for this)
            cast a ray into space from the surface toward the light
                if ray intersection is closer than light* light is shadowed at this point 
```

*如果您在阴影中看到奇怪的伪影，那么每个程序员在编写他们的第一个光线追踪器时都会犯一个错误。浮点（或双精度）数学是不精确的，在进行阴影跟踪时，您会经常（大约一半时间）重新与自己相交。如果没有图表，解释有点难以描述，但让我看看我能做什么。

如果您在球体表面上有一个交点，在大多数情况下，该点在浮点寄存器中的表示在数学上并不精确。它要么稍微在球体内部，要么稍微在球体外部。如果它在球体内，并且您尝试对光源进行交叉测试，则最近的交叉点将是球体本身。相交距离将非常小，因此您可以简单地拒绝任何比 0.000001 单位更近的阴影射线相交。如果您的几何体都是凸的并且无法合法地对其自身进行阴影化，那么您可以在进行阴影测试时直接跳过对球体的测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:27:43.803

您应该将阴影与正常的光线追踪路径整合：对于每个屏幕像素，您发送一条穿过场景的光线并最终确定最近的对象交叉点：在最接近的对象交叉点处，您首先会读出像素颜色（该点对象的纹理），除了计算反射向量等（使用法线向量）之外，您现在**还**可以从该交叉点向场景中的每个光源投射光线：如果这些光线在击中光源之前与其他对象相交，则相交点处于阴影中，您可以相应地调整该点的最终颜色。

# asp.net-mvc-3 - 在 MVC3 中使用 ajax jquery 将模型发布到控制器

> ID：13126253
> 
> 赞同：1
> 
> 时间：2012-10-29T17:00:52.160
> 
> 标签：asp.net-mvc-3, jquery, asp.net-mvc-4

有人可以帮助我如何使用 jQuery 和 ajax 将模型发布回控制器。

当我发布表单时，我的控制器收到一个空模型。请纠正我在哪里做错了。

模型：

```
public class AllocateToStore
    {
        public IList<OrderLine> FailureAllocations { get; set; }
        public IList<SelectListItem> AllocationStatus
        {
            get
            {
                // code to fetch list.
            }
        }
    }

 public class OrderLine
    {
        public long Id { get; set; }
        public DateTime Date { get; set; }
        public int Status { get; set; }
    } 
```

控制器：

```
public ActionResult AutoAllocate()
        {
// This action will load the view with data.
// Get model data and send it to view.

            return View("Allocated",model);
        }

        [HttpPost]
        public ActionResult ResolveUnallocatedOrders(AllocateToStore coll)
        {
// When user changes the selection in grid and post the page I need to get the selection // here. So that I can update that record.
            return null;
        } 
```

观点是

```
 @model AllocateToStore
    @{
        ViewBag.Title = "Orders";
    }
    @{
        var grid = new WebGrid(Model.FailureAllocations, rowsPerPage: 100);
    }

        if (Model.FailureAllocations.Any())
        {
     <form>
        <div>
            @grid.GetHtml(
                    columns: grid.Columns(
                        grid.Column(columnName: "Order date", header: "Order Date", format: item => item.Order.Date),
                       grid.Column("dropdown", header: "Resolution", format:
                                                                   @<span>
                                                                       @{ var index = Guid.NewGuid().ToString(); }
                                                                       @Html.Hidden("FailureAllocations.Index", index)
                                                                       @Html.Hidden("FailureAllocations[" + index + "].Id", (long)item.Id)
                                                                       @Html.DropDownList("FailureAllocations[" + index + "].Status", new SelectList(Model.AllocationStatus, "Value", "Text", item.Status))
                                                                   </span>
                     )
                    ),
                    tableStyle: "expandable-table",
                    htmlAttributes: new { id = "gridFailureAllocations" }
                )
            <br />
            <input type="submit" value="Resolve" id="resolve-button" />
        </div>
</form>
        }

  @section scripts
{
    <script>
        $("#resolve-button").click(function () {
            debugger;
            alert("here");
            $.ajax({
                url: '/OrderProcessing/ResolveUnallocatedOrders',
                data: $('#form').serialize(),
                type: 'POST'
            });
        });
    </script>
} 
```

谢谢，纳雷什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:20:30.063

我没有测试这个答案。这只是建议。请尝试这种方式。

```
 $.ajax({
      url: o.url,
      type: 'post',
      contentType: "application/x-www-form-urlencoded",
      data: {"FailureAllocations ":JSON.stringify(FailureAllocations), "AllocationStatus":JSON.stringify(AllocationStatus)}',
       .  . . . 
     }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T23:07:45.717

我认为你这里有一个错误`data: $('#form').serialize(),`

`$('#form')`将选择 id 为“form”的所有元素。您的表单没有 id，因此您的选择器将无法正常工作。尝试将该行更改为`data: $('form').serialize(),`，选择器应该可以工作。

或者，给你的表单一个“form”的id，例如`<form id="form">`，原来的选择器`$('#form')`应该可以工作。

有关各种 jQuery 选择器的更多详细信息，请参见[此处](http://api.jquery.com/category/selectors/)。

# python - gevent的python线程？

> ID：13126254
> 
> 赞同：0
> 
> 时间：2012-10-29T17:00:59.330
> 
> 标签：python, multithreading, gevent

```
import threading,gevent,gevent.monkey 
class test(threading.Thread):
  def __init__(self):
    threading.Thread.__init__(self)
  def run(self):
    print 1  
    gevent.sleep(2)  
    print 2
gevent.monkey.patch_thread() 
t=test()  
t.start() 
```

为什么'print 2'不运行，怎么办？

如果要下载文件，多线程和gevent，哪个更快？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T08:00:01.680

这是一个有效的问题。

这是因为在 gevent 中，一旦主 greenlet 退出，程序就会退出。使用线程，Python 等待所有线程完成。

你有两个选择：

1.  `t.join()`在脚本末尾添加。这将等待`t`完成。您需要为所有非后台线程执行此操作。
2.  `gevent.wait()`在脚本末尾添加。这将等待事件循环退出 - 这意味着所有 greenlet 和线程。

请注意，这`gevent.wait()`仅在 1.0 中可用（在[此处下载 1.0rc](https://github.com/SiteSupport/gevent/downloads)）。在`join`所有版本中都可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:14:46.803

你为什么尝试使用`gevent`内部`thread`类继承器？工作示例：

```
>>> import threading, gevent, gevent.monkey 
>>> gevent.monkey.patch_thread() 
>>> def run(self):
...     print 1
...     gevent.sleep(2)
...     print 2
... 
>>> gevent.joinall([gevent.spawn(run, [])])
1
2
>>> 
```

# javascript - 错误：无法在 express + jam 中查找视图

> ID：13126257
> 
> 赞同：1
> 
> 时间：2012-10-29T17:01:11.187
> 
> 标签：javascript, express, pug

这是我的代码

```
var express = require('express');
var app = express();
app.set('view engine', 'jade');
app.set('views', __dirname + '/views');

exports.makeObservable = function(state, path, cb) {
    app.get(path, function(req, res){
        res.render('observable.jade', state);
        //call callback with new user
        cb(req);
    });

    app.listen('9999'); 
} 
```

每当我尝试到达时，`path`我都会收到以下错误： `Error: Failed to lookup view "observable.jade"`. 我也尝试在`observable`没有的情况下通过，`.jade`但它给出了同样的错误。我的`/views`文件夹中有 observable.jade 和 layout.jade。

我错过了什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T10:05:36.203

感谢评论中的建议，我终于解决了这个问题。首先，我检查了执行脚本的目录是否包含`/views`我放置`.jade`文件的目录。一开始我无法解决这个问题，因为我无法确定这个脚本是从哪里执行的，所以我`console.log(view)`在`/express/lib/application.js`. 它打印出`view`包含执行脚本的根的对象，因此我将`/views`文件夹移到那里并且一切正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-04T21:57:27.683

FWIW：我在相邻目录（即根/服务器、根/客户端）中有我的视图，并且遇到了此处描述的相同问题。我做的与 OP 不同的一件事是，当爬出服务器目录时，在我的 app.set 中添加一个“/”；IE：

这个：app.set('views', __dirname + ' **/** ../client/');

而不是：app.set('views', __dirname + '../client/');

高温高压

（非常感谢 OP 和 Pickels！）

# java - 为什么我的地板与地面不平？

> ID：13126260
> 
> 赞同：1
> 
> 时间：2012-10-29T17:01:19.177
> 
> 标签：java, android, opengl-es

我希望它在 y 轴上为 0，这就是我所说的平地。

我正在用 android 制作游戏的地板，我使用的是 opengl es 1。我有一个正方形用作地板，所以显然我希望它与地面平齐。我希望 y 轴为 0，但每当我将其设置为这个时，正方形就不会出现在屏幕上。但是如果我将所有的 y 轴设置为 0.1，那么正方形会从屏幕中心悬停到右上角，而不是与地面平齐。

这是顶点数组：

```
float w = 10;
float h = 10;
float vertices[] ={
    0f, 0.1f, 0f,
    w, 0.1f, 0f,
    0f, 0.1f, -h,
    w,  0.1f, -h
}; 
```

然后我将它存储在普通的浮动缓冲区中：

```
ByteBuffer vbb = ByteBuffer.allocateDirect(vertices.length * 4);
    vbb.order(ByteOrder.nativeOrder());
    mFVertexBuffer = vbb.asFloatBuffer();
    mFVertexBuffer.put(vertices);
    mFVertexBuffer.position(0); 
```

然后在绘制它时：

```
gl.glDrawElements( GL10.GL_TRIANGLES,2*3, GL10.GL_UNSIGNED_BYTE, mIndexBuffer); 
```

这是设置截锥体，我认为这不会有所作为，但是......

```
public void onSurfaceChanged(GL10 gl, int width, int height) {
    gl.glViewport(0, 0, width, height);
    float aspectRatio;
    float zNear =.1f;
    float zFar = 1000f;
    float fieldOfView = 1f;
    float size;
    gl.glEnable(GL10.GL_NORMALIZE);
    aspectRatio=(float)width/(float)height;
    gl.glMatrixMode(GL10.GL_PROJECTION);
    size = zNear * (float)(Math.tan((double)(fieldOfView/2.0f)));
    gl.glFrustumf(-size, size, -size /aspectRatio, 
            size /aspectRatio, zNear, zFar);
    gl.glMatrixMode(GL10.GL_MODELVIEW);
} 
```

为什么不是平的？为什么当y轴为0时，它会消失？我正在努力实现这一目标： ![](../Images/cfdfdf43113411243a3e321a68171d49.png)

白色部分是地板。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:22:32.237

您的对象正在“消失”，因为您的对象没有高度。

就像您将一张无限薄的纸平放在眼前一样。如果纸张在您的视野之上或之下，那么您可以看到它，但如果您将它与您的眼睛完全平行，您将无法看到它。

我不太清楚你期望它是什么样子。您希望这层地板看起来如何，您是从上方看还是从某个角度看？你想让它从屏幕中心填充到底部吗？也许样机图像真的可以帮助解释您要实现的目标。

# java - 登录，记住我，使用 java servlet 和 jsp 的应用程序

> ID：13126262
> 
> 赞同：6
> 
> 时间：2012-10-29T17:01:20.877
> 
> 标签：java, jsp

我正在尝试实现一个登录（记住我）应用程序，但我在管理 cookie 时遇到了问题。当我在做注册（对于新成员）或登录（对于已经注册的成员）时，我在服务器上做：

```
Cookie returnVisitorCookie = new Cookie("repeatVisitor", "yes");
returnVisitorCookie.setMaxAge(60*60*24*365); // 1 year
response.addCookie(returnVisitorCookie); 
```

我从浏览器得到的响应在哪里。例如：visitor.login(response)。

当我在做 SIGNOUT 时，我正在删除 cookie。但似乎我应该有更多的 cookie，我的意思是，如果我注册了 2 个成员并退出，我仍然有名称 =“repeatVisitor”且值 =“yes”的 cookie。

也许是因为我将 cookie 放在不同的响应中。

任何人都可以给我一个 idae 我做错了什么，我应该如何实施？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-10T22:17:35.567

我有时会发现学习或理解的最佳方式是看一个例子。这是我们用于工作网站的一些代码：

```
@WebServlet(name = "Login", urlPatterns = {"/authorization/Login"})
public class Login extends HttpServlet {

    /**
     * Processes requests for both HTTP
     * <code>GET</code> and
     * <code>POST</code> methods.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/html;charset=UTF-8");

        PrintWriter out = response.getWriter();
        try {
            System.out.println("Reached login");
            if (!Authorization.isLoggedIn(request)) {
                String login = request.getParameter("login");
                String password = request.getParameter("password");
                boolean remember = Boolean.parseBoolean(request.getParameter("remember"));

                System.out.println("Reached login "+login+", "+password+","+remember);
                if (!Authorization.validateLogin(login, password)) {
                    Logger.getLogger(Login.class.getName()).log(Level.INFO,
                            "Failed login (invalid password) from {0} for {1}",
                            new String[]{request.getRemoteAddr(), login});
                    response.sendError(HttpServletResponse.SC_UNAUTHORIZED, "Invalid username or password!");
                    return;
                }
                //So far so good... Get the user object from the database (unique login names)
                DB_User user = DB_User.get(login);
                if (!user.getActive()) {
                    response.sendError(HttpServletResponse.SC_UNAUTHORIZED, "Your account is no longer active!");
                    return;
                }
                String sessionID = Authorization.createNewSession(user, request.getRemoteAddr(), remember);
                Cookie sessionCookie = new Cookie("my_application.session_id", sessionID);
                sessionCookie.setDomain(request.getServerName());
                sessionCookie.setPath(request.getContextPath());
                if (remember) {
                    sessionCookie.setMaxAge(ServerConfig.getLoginSessionTimeout());
                }

                response.addCookie(sessionCookie);
            }
            response.sendRedirect("/app/myAccount.jsp");
        } catch (Throwable ex) {
            Logger.getLogger(Login.class.getName()).log(Level.SEVERE, null, ex);
            ServletUtils.handleException(ex, response);
        } finally {
            out.flush();
            out.close();
        }
    }

    // +HttpSerlet default methods here. (doGet, doPost, getServletInfo)
} 
```

注销 servlet 示例：

```
@WebServlet(name = "Logout", urlPatterns = {"/authorization/Logout"})
public class Logout extends HttpServlet {

    /**
     * Processes requests for both HTTP
     * <code>GET</code> and
     * <code>POST</code> methods.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();
        try {
            String sessionID = ServletUtils.getCookieValue(request.getCookies(),"my_application.session_id");

            if (sessionID != null) {
                SQLManager sql = ServerConfig.getSql();
                sql.deleteFromTable("login_session", "session_id = " + SQLString.toSql(sessionID));

                Cookie sessionCookie = new Cookie("my_application.session_id", null);
                sessionCookie.setDomain(ServletUtils.getCookieDomain(request));
                sessionCookie.setPath("/you_app_name");
                sessionCookie.setMaxAge(0);
                response.addCookie(sessionCookie);
            }
            response.sendRedirect("/security/login.jsp");

        } catch (Throwable ex) {
            Logger.getLogger(Logout.class.getName()).log(Level.SEVERE, null, ex);
            ServletUtils.handleException(ex, response);
        } finally {
            out.close();
        }
    }
} 
```

正如您会注意到的，我们已经制作了一些帮助类，但这个概念仍然存在。希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:44:17.973

您将`repeatVisitor`在后续请求中保留 cookie 至少一年，您已指示客户端的浏览器这样做，“让 cookie 保持活动一年”。从后续请求标头中删除 cookie 不会阻止浏览器简单地重新添加它。

要成功实施记住我，您需要

1.  使用安全令牌，而不仅仅是“重复用户：是”的标志。[使用java 的 UUID 类之类的](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/UUID.html#randomUUID%28%29)东西生成唯一令牌以安全地唯一标识访问者，因此有人不会拦截请求并将某些内容放在标头中供您处理

2.  **主动**管理您为每个用户生成的安全令牌。这意味着您将生成的令牌存储在一些持久性存储中，并针对该存储检查重复请求。您将在此存储中管理令牌到期等。因此，在您的持久存储中，您可以将令牌标记为非活动或过期

作为替代方案，更容易记住我的路线是将您的记住我设置为固定的持续时间，您现在将在`HttpServletRequest`对象中设置 cookie 到期日期。也就是说，您将让您的复选框显示`remember me for 2 weeks`，然后将您的 cookie 有效期设置为 2 周。相同 cookie 令牌的后续表示将被自动管理而没有压力。

# javascript - 在表单发布方法后向用户显示解析结果

> ID：13126263
> 
> 赞同：2
> 
> 时间：2012-10-29T17:01:31.350
> 
> 标签：javascript, html, xml

假设 - 我办公室里的人没那么聪明/我不想为我的以下实用程序使用任何服务器端口:)

1.  我的 Html 文件驻留在本地磁盘中（考虑跨域引用约束提示解决方案）
2.  双击时，HTML 表单打开并要求输入订单号
3.  当输入并提交表单时，服务器以 XML 的形式回复详细信息 注意：提交时我使用了 html POST 方法，到第三步一切正常，我得到服务器响应 xml 作为浏览器上的下一页。

现在，如何解析此响应 xml，以便在第三步提交表单时仅在下一页显示所需的数据，绕过来自服务器的原始响应。

JS提交函数

```
function submit1() // called when i click on submit button on my form
{
 var actionFianl = "http://URL(other data is given as form post method)";
document.form1.action = actionFianl;
document.form1.submit();
      } 
```

并显示 XML 数据，从

```
<?xml version="1.0" encoding="UTF-8" ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:33:52.767

因此，如果我理解您的问题，由于跨域问题，Ajax 调用是不可能的。我记得做过这样的事情，发现 Safari 可以工作，但由于跨源策略，Chrome 不喜欢它。这是前一阵子，我不确定这是否是同样的问题。

如果我理解正确，您希望在 Javascript 中使用 XML，而不是独立显示原始数据。如果不能使用 Ajax，就会想到有两个文件。当前的将包含表单并获取 XML。第二个文件包含 iframe 中的第一个文件，它在提交表单时读取 iframe 的内容，并且能够读取 XML。

另一种解决方案可能类似于[node-webkit](https://github.com/rogerwang/node-webkit)，具体取决于应用程序的规模。Node-webkit 是一个适用于 windows/mac/linux 的可执行文件，它附带 Webkit 和 Node，并在单个上下文中运行它们。也许您可以通过 Node 服务器获取 XML，而不是通过普通表单提交。

# android - 在不使用他们的 api 的情况下将 Android 应用程序安装报告回 facebook

> ID：13126268
> 
> 赞同：5
> 
> 时间：2012-10-29T17:01:48.490
> 
> 标签：android, facebook

从我的 Android 应用程序中，我想将其安装发布回 facebook，以允许对他们的新移动应用程序安装广告进行转化跟踪，但我想在不使用他们的 api 的情况下这样做。

所以而不是做

```
com.facebook.Settings.publishInstall(context, appId); 
```

我只想将带有所需参数的 HTTP 请求发送到某个 URL。

编辑：

我记录了发送到 facebook 以发布应用安装的两个请求，它们看起来像这样：

要求：

```
GET /[app id]?format=json&sdk=android&fields=supports_attribution HTTP/1.1

User-Agent: FBAndroidSDK.3.0.0.b

Content-Type: multipart/form-data; boundary=3i2ndDfv2rTHiSisAbouNdArYfORhtTPEefj3q2f

Host: graph.facebook.com

Connection: Keep-Alive

Accept-Encoding: gzip 
```

回复：

```
HTTP/1.1 200 OK

Access-Control-Allow-Origin: *

Cache-Control: private, no-cache, no-store, must-revalidate

Content-Type: text/javascript; charset=UTF-8

ETag: "24ea6554744eece05b90dd2e65af63277cdcaf53"

Expires: Sat, 01 Jan 2000 00:00:00 GMT

Pragma: no-cache

X-FB-Rev: 658994

X-FB-Debug: P2GE3fDVAnRJh62rBS5WXD4ce1hTy8Pwvjq5rT/I+TI=

Date: Tue, 30 Oct 2012 11:37:09 GMT

Connection: keep-alive

Content-Length: 52

{"supports_attribution":true,"id":"[app id]"} 
```

要求：

```
POST /[app id]/activities?format=json&sdk=android&migration_bundle=fbsdk%3A20120913 HTTP/1.1

User-Agent: FBAndroidSDK.3.0.0.b

Content-Type: multipart/form-data; boundary=3i2ndDfv2rTHiSisAbouNdArYfORhtTPEefj3q2f

Host: graph.facebook.com

Connection: Keep-Alive

Transfer-Encoding: chunked

Accept-Encoding: gzip

261

--3i2ndDfv2rTHiSisAbouNdArYfORhtTPEefj3q2f

Content-Disposition: form-data; name="format"

json

--3i2ndDfv2rTHiSisAbouNdArYfORhtTPEefj3q2f

Content-Disposition: form-data; name="sdk"

android

--3i2ndDfv2rTHiSisAbouNdArYfORhtTPEefj3q2f

Content-Disposition: form-data; name="migration_bundle"

fbsdk:20120913

--3i2ndDfv2rTHiSisAbouNdArYfORhtTPEefj3q2f

Content-Disposition: form-data; name="attribution"

ab175007-2725-464f-a111-b8b1a92bf1dd

--3i2ndDfv2rTHiSisAbouNdArYfORhtTPEefj3q2f

Content-Disposition: form-data; name="event"

MOBILE_APP_INSTALL

--3i2ndDfv2rTHiSisAbouNdArYfORhtTPEefj3q2f

0 
```

回复：

```
HTTP/1.1 200 OK

Access-Control-Allow-Origin: *

Cache-Control: private, no-cache, no-store, must-revalidate

Content-Type: text/javascript; charset=UTF-8

Expires: Sat, 01 Jan 2000 00:00:00 GMT

Pragma: no-cache

X-FB-Rev: 658994

X-FB-Debug: +0GWQ4cu+tFeAg3QEuwYGx+HAt7t37itzxEYBaTZF8U=

Date: Tue, 30 Oct 2012 11:38:33 GMT

Connection: keep-alive

Content-Length: 4

true 
```

我在我的应用程序中包含了一个精简版的 facebook api，它不能做任何其他事情，但只需发送这两个请求。我会尝试一下并报告它是如何工作的。

最理想的情况是，我想从服务器发送请求，而不是从电话发送。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-28T13:24:19.323

您可以通过简单的调用来做到这一点

```
FacebookHelper.appInstall(this.getApplicationContext(), "<com.your.package>",
                                   "<your facebook app id>"); 
```

和下面的图书馆。

请记住，只有安装了 facebook 应用程序才能跟踪应用程序 - 然后您就有了 attributionId。如果您想在服务器上发送此请求，您必须将 attributionId 发送到您的服务器。

```
import android.content.ContentResolver;
import android.content.Context;
import android.database.Cursor;
import android.net.Uri;

import org.apache.http.HttpResponse;
import org.apache.http.HttpStatus;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpEntityEnclosingRequestBase;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.client.methods.HttpRequestBase;
import org.apache.http.entity.mime.HttpMultipartMode;
import org.apache.http.entity.mime.MultipartEntity;
import org.apache.http.entity.mime.content.StringBody;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.protocol.HTTP;

import java.io.IOException;
import java.nio.charset.Charset;

import static com.google.common.base.Preconditions.checkArgument;
import static com.google.common.base.Preconditions.checkNotNull;

public class FacebookHelper {

    private static final Uri ATTRIBUTION_ID_CONTENT_URI =
            Uri.parse("content://com.facebook.katana.provider.AttributionIdProvider");
    private static final String ATTRIBUTION_ID_COLUMN_NAME = "aid";
    private static final String USER_AGENT = "FBAndroidSDK/3.5.0";

    private final DefaultHttpClient mHttpClient;
    private final String mApplicationPackage;
    private final String mApplicationId;

    private FacebookHelper(String applicationPackage, String applicationId) {
        checkNotNull(applicationPackage);
        checkNotNull(applicationId);
        mApplicationPackage = applicationPackage;
        mApplicationId = applicationId;

        mHttpClient = new DefaultHttpClient();
    }

    private static String getAttributionId(ContentResolver cr) {
        checkNotNull(cr);
        final String [] projection = {ATTRIBUTION_ID_COLUMN_NAME};
        final Cursor cursor = cr.query(ATTRIBUTION_ID_CONTENT_URI, projection,
                null, null, null);
        if (cursor == null) {
            return null;
        }
        try {
            if (!cursor.moveToFirst()) {
                return null;
            }
            final int attributionColumnIndex = cursor.getColumnIndex(ATTRIBUTION_ID_COLUMN_NAME);
            if (attributionColumnIndex < 0) {
                return null;
            }
            return cursor.getString(attributionColumnIndex);
        } finally {
            cursor.close();
        }
    }

    public static void appInstall(Context applicationContext, String applicationPackage,
                                   String applicationId) throws IOException {
        checkNotNull(applicationContext);
        checkNotNull(applicationPackage);
        checkNotNull(applicationId);
        final ContentResolver cr = applicationContext.getContentResolver();
        final String attributionId = getAttributionId(cr);
        if (attributionId == null) {
            // we can not send anything if facebook app is not installed
            return;
        }
        final FacebookHelper facebookHelper = new FacebookHelper(applicationPackage, applicationId);
        facebookHelper.appInstall(attributionId);
    }

    private void appInstall(String attribution) throws IOException {
        checkNotNull(attribution);
        String url = String.format("https://graph.facebook.com/%s/activities", mApplicationId);
        MultipartEntity entity = new MultipartEntity(
                HttpMultipartMode.BROWSER_COMPATIBLE);
        Charset charset = Charset.forName(HTTP.UTF_8);
        entity.addPart("sdk", new StringBody("android", charset));
        entity.addPart("format", new StringBody("json", charset));
        entity.addPart("event", new StringBody("MOBILE_APP_INSTALL", charset));
        entity.addPart("attribution", new StringBody(attribution, charset));
        entity.addPart("auto_publish", new StringBody("false", charset));
        entity.addPart("application_tracking_enabled", new StringBody("true", charset));
        entity.addPart("migration_bundle", new StringBody("fbsdk:20130708", charset));
        entity.addPart("application_package_name", new StringBody(mApplicationPackage, charset));

        HttpEntityEnclosingRequestBase request = new HttpPost(url);
        setupDefaultHeaders(request);
        request.setEntity(entity);

        HttpResponse response = getHttpClient().execute(request);
        validateResponseCode(response, HttpStatus.SC_OK);
    }

    private void validateResponseCode(HttpResponse response,
                                      int expectedStatusCode) throws IOException {
        checkNotNull(response);
        checkArgument(expectedStatusCode != HttpStatus.SC_UNPROCESSABLE_ENTITY);
        checkArgument(expectedStatusCode != HttpStatus.SC_NOT_FOUND);

        int statusCode = response.getStatusLine().getStatusCode();
        if (statusCode != expectedStatusCode) {
            throw new IOException("Wrong response code: "+
                    "expected <" +expectedStatusCode +"> was <" +statusCode+">");
        }
    }

    private HttpClient getHttpClient() {
        return mHttpClient;
    }

    private void setupDefaultHeaders(HttpRequestBase request) {
        checkNotNull(request);
        request.setHeader("Accept", "application/json");
        request.setHeader("User-Agent", USER_AGENT);
    }
} 
```

这个库使用番石榴 checkArgument 和 checkNotNull 如果你不使用番石榴，你可以跳过这些行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T19:28:10.657

如果不集成我们的 SDK，就不可能做到这一点。对于应用安装广告，SDK 必须与您的应用集成。如果您转到您的应用仪表板 > 推广 > Android Feed，则会显示一条消息：

> 注意：这仅在您集成 Facebook SDK for Android 时有效。每次有人看到您的广告时，您都需要付费。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T10:54:47.747

我最终使用他们的 api 的这个精简版本将安装从我的应用程序发布回 facebook：

```
package de.techunity.fancy.facebook.publishinstall;

import org.json.JSONException;

import android.content.ContentResolver;
import android.content.Context;
import android.content.SharedPreferences;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.util.Log;

import com.facebook.android.Util;

public class InstallPublisher {
    private static final Uri ATTRIBUTION_ID_CONTENT_URI =
            Uri.parse("content://com.facebook.katana.provider.AttributionIdProvider");
    private static final String ATTRIBUTION_ID_COLUMN_NAME = "aid";

    private static final String ATTRIBUTION_PREFERENCES = "com.facebook.sdk.attributionTracking";
    private static final String PUBLISH_ACTIVITY_PATH = "%s/activities";
    private static final String MOBILE_INSTALL_EVENT = "MOBILE_APP_INSTALL";
    private static final String SUPPORTS_ATTRIBUTION = "supports_attribution";
    private static final String APPLICATION_FIELDS = "fields";
    private static final String ANALYTICS_EVENT = "event";
    private static final String ATTRIBUTION_KEY = "attribution";

    /**
     * Manually publish install attribution to the facebook graph.  Internally handles tracking repeat calls to prevent
     * multiple installs being published to the graph.
     * @param context
     * @return returns false on error.  Applications should retry until true is returned.  Safe to call again after
     * true is returned.
     */
    public static boolean publishInstall(final Context context, final String applicationId) {
        try {
            if (applicationId == null) {
                return false;
            }
            final String attributionId = InstallPublisher.getAttributionId(context.getContentResolver());
            final SharedPreferences preferences = context.getSharedPreferences(ATTRIBUTION_PREFERENCES, Context.MODE_PRIVATE);
            final String pingKey = applicationId+"ping";
            long lastPing = preferences.getLong(pingKey, 0);
            if (lastPing == 0 && attributionId != null) {
                new Thread(new Runnable() {

                    @Override
                    public void run() {
                        try {
                            Bundle supportsAttributionParams = new Bundle();
                            supportsAttributionParams.putString(APPLICATION_FIELDS, SUPPORTS_ATTRIBUTION);
                            Request pingRequest = Request.newGraphPathRequest(applicationId, null);
                            pingRequest.setParameters(supportsAttributionParams);

                            GraphObject supportResponse = pingRequest.executeAndWait().getGraphObject();
                            Object doesSupportAttribution = supportResponse.getProperty(SUPPORTS_ATTRIBUTION);

                            if (!(doesSupportAttribution instanceof Boolean)) {
                                throw new JSONException(String.format(
                                        "%s contains %s instead of a Boolean", SUPPORTS_ATTRIBUTION, doesSupportAttribution));
                            }

                            if ((Boolean)doesSupportAttribution) {
                                GraphObject publishParams = (GraphObject) GraphObjectWrapper.createGraphObject();
                                publishParams.setProperty(ANALYTICS_EVENT, MOBILE_INSTALL_EVENT);
                                publishParams.setProperty(ATTRIBUTION_KEY, attributionId);

                                String publishUrl = String.format(PUBLISH_ACTIVITY_PATH, applicationId);

                                Request publishRequest = Request.newPostRequest(publishUrl, publishParams, null);
                                publishRequest.executeAndWait();

                                // denote success since no error threw from the post.
                                SharedPreferences.Editor editor = preferences.edit();
                                editor.putLong(pingKey, System.currentTimeMillis());
                                editor.commit();
                            }
                        }
                        catch (Exception e) {
                            Log.d("fancy", "Couldn't publish publish install to facebook", e);
                        }
                        finally {
                            Log.d("fancy", "Publish install to facebook thread completed");
                        }
                    }
                }, "facebook publish install thread").start();
            }
            return true;
        } catch (Exception e) {
            // if there was an error, fall through to the failure case.
            Util.logd("Facebook-publish", e.getMessage());
        }
        return false;
    }

    public static String getAttributionId(ContentResolver contentResolver) {
        String [] projection = {ATTRIBUTION_ID_COLUMN_NAME};
        Cursor c = contentResolver.query(ATTRIBUTION_ID_CONTENT_URI, projection, null, null, null);
        if (c == null || !c.moveToFirst()) {
            return null;
        }
        String attributionId = c.getString(c.getColumnIndex(ATTRIBUTION_ID_COLUMN_NAME));
        c.close();
        return attributionId;
    }

} 
```

# c - 在 C 中运行未到达的代码

> ID：13126270
> 
> 赞同：1
> 
> 时间：2012-10-29T17:01:52.293
> 
> 标签：c, stack

下面是一个示例 C 程序，它提供了程序之后的输出

```
#include<stdio.h>
void newfunc(int n);
int main(void)
{
    newfunc(2);
    return 0;
}
void newfunc(int n)
{
    printf("\n%d",n);
    if(n<50)
    {
        newfunc(2*n);
        printf("\n%d",n);
    }
} 
```

产生输出

```
2
4
8
16
32
64
32
16
8
4
2 
```

但是根据代码，好像是在第13行的函数调用之后， `printf`没有调用next。输出似乎不自然。我搜索了互联网，发现了一些关于堆栈的东西。有人可以详细说明为什么会这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T17:08:39.303

这是一个基本的递归调用。

首先，请注意，对于`n`小于 50 的值，您的函数将打印`n`两次，而对于其他值，`n`它将仅打印一次。这与你的输出一致，所以这里唯一要弄清楚的是顺序......

第二个注意， for 的输出`n*2`应该*位于*`n`(for )的第一行和第二行输出之间，因为您在两个s*之间*`n < 50`进行递归调用。好吧，这*也*与您的输出一致。*`printf`*

 **这正如预期的那样。

您在互联网上找到的有关堆栈的部分是指调用堆栈。为了从函数返回，程序必须跟踪调用函数时的位置。此信息被写入称为“调用堆栈”或“执行堆栈”的内存特殊部分的“末尾”；并且它从堆栈中取出（意味着当函数返回时移动'end'）。调用参数也记录在堆栈上。

这种堆叠对于递归是必不可少的。

因此，当您调用`newfunc(2)`程序时记录它在第 5 行，然后跳转到第`newfunc`8 行的开头。堆栈看起来（理论上）如下所示：

```
line 5, n=2 
```

当它到达第 13 行时，它再次调用新函数，使堆栈

```
line 5, n=2; line 13, n=4 
```

这持续了好几次，直到堆栈看起来像

```
line 5, n=2; line 13, n=4; line 13, n=8; line 13, n=16; line 13, n=32; line 13, n=64 
```

当 if 失败并`newfunc`返回时，在第 13 行之后弹出堆栈并恢复执行（因为这是我们从堆栈中得到的）

```
line 5, n=2; line 13, n=4; line 13, n=8; line 13, n=16; line 13, n=32 
```

当我们运行`printf`并弹出堆栈时，我们返回到第 13 行（我们弹出时得到的，对 >），因此堆栈是

```
line 5, n=2; line 13, n=4; line 13, n=8; line 13, n=16; 
```

等等，而它展开整个调用堆栈。

一些最后的细节：堆栈在概念上“向上”增长，所以我们经常把它写成

```
line 13, n=32
line 13, n=16
line 13, n=8 
line 13, n=4 
line 5, n=2 
```

堆栈内容的确切格式取决于芯片的体系结构和操作系统程序员做出的一些决定。

* * *

顺便说一句--ac 程序通常不使用行号来表示“位置”，这是因为行在 c 中不是很好的度量（如果我够傻的话，我可以将整个程序写成一行），而是使用值芯片上的寄存器，但这并不真正影响这里的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:01:52.293

实际发生的是，当您在第 13 行调用该函数时，该函数之后的代码当时无法执行，因此它们存储在内存中称为堆栈的特殊位置，它们从底部填充，因此较新的代码填充顶部的堆栈。因此，在第一次函数调用时，`printf("\n%d",2)`将添加到堆栈的**底部**，`printf("\n%d",4);`即**2 * n = 2 * 2 = 4** 被添加到**前**一个堆栈的顶部，并且当递归执行停止时。从顶部开始执行堆栈程序，产生上述复杂类型的输出，简单分析无法预测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T17:13:48.110

让我们把它当作小值说 10

```
1st call from main         ////returned from newfunc(2)
newfunc(2)             
//inside newfunc(2)
print 2
2<10 (correct)
newfunc(4)  --> on stack print 2  //returned from newfunc(4)
-------------------------------
//inside newfunc(4)
print 4 
4<10
newfunc(8)  --> on stack print 4 //returned from newfunc(8)
---------------------------------
//inside newfunc(8)
print 8
8<10
newfunc(16) --> on stack print 8 //returned from newfunc(16)
---------------------------
//inside newfunc(16)
print 16
16<10 failed 
```

所以它会`return`调用它之​​前的函数，所以它将继续在`-->`此示例中位于堆栈顶部的符号，`print`用于`result`在屏幕上显示

功能顺序是自上而下的......我试图在图表中显示这一点。希望你明白。

here`-->`语句将从下到上执行，因此结果将是

```
2
4
8
16
8
4
2 
```**

# c++ - C++; bitset 是我的解决方案吗？

> ID：13126273
> 
> 赞同：0
> 
> 时间：2012-10-29T17:02:03.603
> 
> 标签：c++, memcpy, bitset

我正在编写一个程序并使用 memcpy 复制一些数据字节，使用以下代码；

```
#define ETH_ALEN 6
unsigned char sourceMAC[6];
unsigned char destMAC[6];
char* txBuffer;
....
memcpy((void*)txBuffer, (void*)destMAC, ETH_ALEN);
memcpy((void*)(txBuffer+ETH_ALEN), (void*)sourceMAC, ETH_ALEN); 
```

现在我想将一些数据复制到这个缓冲区（`txBuffer`）的末尾，它小于一个字节或大于一个字节，所以它不是 8 的倍数（不会在整个字节边界上完成），所以`memcpy()`不能使用（我不相信？）。

我想再添加 16 位数据，大约 4 个字节。首先，我需要将一个值添加到`txtBuffer`我存储在 an 中的接下来的 3 位中`int`，以及始终为 0 的第四位。接下来我需要复制另一个 12 位值，我再次将它保存在 an 中`int`。

所以存储在 an`int`中的第一个十进制值介于 0 和 7 之间，我提到的第二个数字也是如此，它进入最后 12 位。存储值在 2^12 范围内。例如，我应该将最后三位“位复制”`int`到内存中，还是应该如何将所有这些值合并在一起？

有没有办法可以将这三个值编译成 4 个字节以使用 memcpy 进行复制，或者我应该使用 bitset 之类的东西一次复制它们？

我应该如何解决这个问题？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:19:48.780

假设 int 在您的平台上是 4 个字节

```
int composed = 0;

int three_bits = something;
int twelve_bits = something_else;

composed = (three_bits & 0x07) | (1 << 3) | ((twelve_bits << 4) & 0xFFFFFF0); 
```

# asp.net-mvc - 在 MVC 4 中为 WebAPI 添加路由

> ID：13126279
> 
> 赞同：0
> 
> 时间：2012-10-29T17:02:38.113
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api, asp.net-mvc-routing

我有一个 WebApi 控制器并想添加一个路由。

这是我的控制器...

```
 public class ExtraInformationController : ApiController
        {
            private readonly ExtraInformationRepository _extraInfoRepository = new ExtraInformationRepository();

            public ExtraInformation Get(int assetId)
            {
                return _extraInfoRepository.GetByAssetID(assetId).FirstOrDefault();
            }

        } 
```

这是我的路线...

```
 routes.MapHttpRoute(
            "ExtraInformation",
            "api/ExtraInformation/{assetId}",
            new { controller = "ExtraInformation", action = "Get" }
        ); 
```

我希望能够打电话...

api/额外信息/4

但我越来越...

未找到与请求 URI 'http://localhost:35188/api/ExtraInformation/4' 匹配的 HTTP 资源。在与请求匹配的控制器 'ExtraInformation' 上未找到任何操作。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:30:24.600

查看您的示例，使用通用默认路由就足够了。我会把它换成这个并试一试。

```
routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}/{id}",
    defaults: new { id = RouteParameter.Optional }
); 
```

# ios - UIDatePicker 缺少 24 小时/爱尔兰语言环境的小时数

> ID：13126280
> 
> 赞同：1
> 
> 时间：2012-10-29T17:02:42.723
> 
> 标签：ios

所以我正在加载一个 UIDatePicker 并将语言环境设置为 currentLocale，但是当它出现时，小时组件完全为空。

仅当手机的区域设置为“爱尔兰（爱尔兰）”并且时间设置为 24 小时时才会发生这种情况。如果我将其设置为“爱尔兰”，那么时间会按预期显示。

据我所知，这是 iOS 6.0 中的一个错误，但我很乐意被告知其他情况。

# android - 更新不起作用 sqlite android

> ID：13126285
> 
> 赞同：0
> 
> 时间：2012-10-29T17:03:08.160
> 
> 标签：android, sqlite

更新表中的列时出现问题。我尝试了这两种解决方案：

```
 this.openDataBase();
        String SQLStatement = "update " + TABLE_POSES;
        SQLStatement += " set " + COLUMN_SKIP + "=" + SKIP + " Where ";
        SQLStatement += COLUMN_ID + "=" + String.valueOf(skipPoseId);
        myDataBase.rawQuery(SQLStatement, null);
        this.close(); 
```

和这个：

```
 this.openDataBase();
        ContentValues args = new ContentValues();
        args.put(COLUMN_SKIP,SKIP);
        myDataBase.update(TABLE_POSES, args, COLUMN_ID + "=" +  String.valueOf(skipPoseId),null);
        this.close(); 
```

这些代码片段都不起作用，我没有抛出任何异常。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:09:30.987

您应该使用第二种方法 using`update()`并且您应该检查返回值。如果该值为零，则数据库的状态不是您所期望的，并且没有更新任何行。如果该行不为零，则更新成功。

如果您访问数据库有任何问题，将在`update()`调用之前引发异常。

我会像这样利用 args 参数`update()`：

```
myDataBase.update(TABLE_POSES, args, COLUMN_ID + " = ?", new String[]{ Long.toString(skipPoseId) }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:18:06.927

像这样使用更新，

```
 String query="UPDATE tablename SET columnname="+var+ "where columnid="+var2;
        sqlitedb.execSQL(query); 
```

只需在字符串查询中编写更新查询并执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-24T04:04:51.777

如果您`db.begintransaction()`在代码中使用，则必须先调用`db.setTransactionSuccessful()`，`db.endtransaction()`例如：

```
try {
        SQLHelper dbHelper = new SQLHelper(this);
        SQLiteDatabase db = dbHelper.getWritableDatabase();

        db.beginTransaction();
        ...................

        db.setTransactionSuccessful();

        db.endTransaction();

        db.close();

} 
catch (Exception ex){

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-12T22:35:48.120

我有完全相同的问题。经过深思熟虑和调试后，我发现 WHERE 条件没有解决表的任何行。

奇怪的是 myDatabase.update 命令给出 1 作为返回值，我将其理解为受更新影响的 1 行。

# ios - 设置 UINavigation 控制器和各种视图加载

> ID：13126290
> 
> 赞同：0
> 
> 时间：2012-10-29T17:03:23.283
> 
> 标签：ios, ios5, uiviewcontroller, uinavigationcontroller

我已经设置了一个 UINavigation 控制器，它使用 AppDelegate 作为主要联系点。

我有不同的运行方法，例如 presentHomeViewController、presentLoginViewController，它们将不同的视图控制器推送到导航控制器。

应用程序委托 - didFinishLaunching

```
welcomeViewController = [[MyWelcomeViewController  alloc] initWithNibName:@"MyWelcomeViewController" bundle:nil];
navController = [[UINavigationController alloc] initWithRootViewController:welcomeViewController];
navController.navigationBarHidden = YES;

self.revealSideViewController = [[PPRevealSideViewController alloc] initWithRootViewController:navController];

[self.revealSideViewController setDirectionsToShowBounce:PPRevealSideDirectionNone];
[self.revealSideViewController setPanInteractionsWhenClosed:PPRevealSideInteractionContentView | PPRevealSideInteractionNavigationBar];

self.window.rootViewController = self.revealSideViewController; 
```

这是正确的过程吗？

```
- (void)presentHomeViewController {
// We start by dismissing the ModalViewConrtoller which is LoginViewController from the welcomeview
[self.welcomeViewController dismissModalViewControllerAnimated:YES];

// Check if the home view controller already exists if not create one
if (!self.homeViewController) {
    NSLog(@"presentHomeViewController- Creating the Home View controller");
    homeViewController = [[MyHomeViewController alloc] initWithNibName:@"MyHomeViewController" bundle:nil];
}

// Push the homeViewController onto the navController
NSLog(@"presentHomeViewController");
self.navController.navigationBarHidden = NO;
[self.navController setTitle:@"Home"];
[self.navController pushViewController:homeViewController animated:NO]; 
```

如果我然后将以下内容添加到不同的类：

```
[self.navigationController pushViewController:accountViewController animated:NO]; 
```

没有视图被推送到堆栈，我应该像我一直在做的那样控制 AppDelegate 中的所有移动，还是有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:09:51.030

**编辑**

感谢您发布您的代码。因此，为了首先解决您的最后一个问题，我不建议从应用程序委托控制您的导航堆栈。您应该从作为导航控制器子级的视图控制器控制堆栈。

至此，请记住视图控制器的层次结构：`UINavigationController`继承自`UIViewController`，并`UIViewController`为您在导航布局中看到的所有内容（例如导航项和标题）定义了属性。更重要的是，它还具有父视图控制器、呈现它的视图控制器和导航控制器的属性。因此，考虑到层次结构，您的应用程序委托应该只实例化导航控制器的根 VC 和导航控制器本身，然后设置导航控制器的根 VC。

从那里，您应该从 VC 本身推送和弹出其他 VC。请记住，每个 VC 都有一个属性，该属性会自动设置为指向它所属的导航控制器。这就是为什么`[self.navigationController pushViewController:]`有效。例如，如果我有一个根 VC 为 a 的导航控制器`UITableViewController`，并且点击表视图中的一项将新的 VC 推送到堆栈中，我会从表 VC 中推送该 VC，而不是从导航控制器类中推送或应用程序委托。

对不起，如果这令人困惑。请让我知道是否需要澄清，我会尽力而为。否则，希望这能让你走上正轨。

# javascript - persistence.js add() 函数不起作用

> ID：13126293
> 
> 赞同：1
> 
> 时间：2012-10-29T17:03:28.847
> 
> 标签：javascript, persistence

我试图将对象保存到数据库：

```
Item = persistence.define('Item', {
imageUrl: "TEXT",
}) 
```

这是有效的，imageUrl 设置正确：

```
var c = new Item({imageUrl: "a"}); 
```

这不起作用，数据库中的 imageUrl 为空

```
var c = new Item();
c.imageUrl = "a"; 
```

这是有效的：

```
var c = new Item();
c._data.imageUrl = "a"; 
```

似乎是一个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:10:21.003

我想我找到了原因，如果您使用的是 jquery，那么您必须使用：例如

```
obj.name(newValue) 
```

设置和

```
obj.name() 
```

获取属性。

您能告诉我在哪里可以找到此类案例的文档吗？ [https://groups.google.com/forum/?fromgroups=#!topic/persistencejs/zph_wV1sEic](https://groups.google.com/forum/?fromgroups=#!topic/persistencejs/zph_wV1sEic)

# javascript - 在ajax调用后注入JavaScript

> ID：13126294
> 
> 赞同：2
> 
> 时间：2012-10-29T17:03:42.557
> 
> 标签：javascript, ajax

我正在寻找一种在 ajax 调用后动态加载 JavaScript 以加载对话框/弹出窗口的方法。

我希望对话框加载它自己的 JavaScript 文件和任何内联 JavaScript。

我已经看到使用方法执行 ajax 调用以将 html 加载到 DOM 中然后具有“完整”回调的示例，加载方法将在加载 html 后调用该回调。

但是，使用这种方法会阻止对话框上的任何 JavaScript 执行，并要求启动 JS 知道有关对话框的详细信息，以便它附加事件等。

实现此目的的唯一方法是让对话框将文档源加载到 iframe 中以便它可以运行 JavaScript？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:07:18.317

可以在 iframe 中加载外部 HTML 并执行其 JavaScript。

看到这些问题：

*   [如何在 iframe 中动态加载页面](https://stackoverflow.com/questions/5142825/how-to-load-page-dynamically-in-iframe)
*   [将外部网站动态加载到 iframe 中 - 有没有更好的方法？](https://stackoverflow.com/questions/3800542/loading-external-sites-into-iframe-dynamically-is-there-a-better-way)
*   [如何将文档内容动态加载到 iframe 中？](https://stackoverflow.com/questions/4399417/how-to-dynamic-load-the-document-content-into-an-iframe)
*   [通过ajax加载html页面时，会加载脚本标签吗？](https://stackoverflow.com/questions/2203762/when-loading-an-html-page-via-ajax-will-script-tags-be-loaded)

# jquery - 通过 Ajax 将三个下拉选择的值作为参数传递给控制器

> ID：13126295
> 
> 赞同：0
> 
> 时间：2012-10-29T17:03:43.947
> 
> 标签：jquery

在 jquery 中，三个下拉列表值通过 ajax 在按钮单击事件中作为参数传递，
但是我们存储的下拉值的值不能在更改函数中使用吗？

```
 $("#rooms").change(function () {
        var searchRooms = $("#rooms").val();       
 }); 
```

像这样我在按钮单击事件中需要三个变量（下拉值）
我有三个下拉列表。我使用上面的代码从一个下拉列表中选择了一个值。现在我需要从三个不同的下拉列表中选择三个值。所以如果我使用上面的代码从一个下拉列表中选择一个值，那么该值将存储在 searchRooms 变量中。现在我需要使用（传递）变量到控制器。如果我关闭更改功能，我将无法使用变量值。我对么？所以我需要在按钮单击事件中将三个下拉列表值传递给控制器

> 另一个问题，声明为全局变量。

```
 $(#"btn").click(function(){
    var searchRooms;
    var searchAdults;
    var searchChildren;
     $("#rooms").change(function () {
        searchRooms = $("#rooms").val();
    });

    $("#adults").change(function () {
        searchAdults = $("#adults").val();
    });

    $("#searchChildren").change(function () {
        searchChildren = $("#children").val();
    });

   $.ajax({
   i need pass the above three variable values to controller here
  });
  }); 
```

> 在这个更改后的函数中，变量 searchRooms 的值是多少？
> 在警报中，我得到的值是未定义的意思，searchRooms 没有价值吗？
> 我如何将该变量传递给控制器​​？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:13:46.007

您可以在函数`searchRooms`范围之外将变量定义为全局（或其他一些合适的封闭范围），`.change`并且在您进行 AJAX 调用时可用。或者，您可以在执行 AJAX 调用时获取所需的值，方法与在`.change`函数中执行的方式完全相同。

事实上，就目前而言，您的`.change`函数没有做任何有用的事情。您正在从中获取值`#rooms`并将其放入立即超出范围的局部变量中。所以目前还不清楚你在那里试图做什么。

所以，你可以这样做：

```
var searchRooms;
$("#rooms").change(function () {
    searchRooms = $("#rooms").val();       
 }); 
```

或者，更好的是，您可以这样做：

```
$("#mybutton").click(function() {
    var searchRooms = $("#rooms").val();
    var myotherdropdown = $("#otherdropdown").val();
    // now do your AJAX call, passing in your variables you grabbed above.
    $.ajax(//.....
}); 
```

*更新*：像这样的东西：

```
var searchRooms;
var searchAdults;
var searchChildren;

$("#rooms").change(function () {
    searchRooms = $("#rooms").val();
});

$("#adults").change(function () {
    searchAdults = $("#adults").val();
});

$("#searchChildren").change(function () {
    searchChildren = $("#children").val();
});

$(#"btn").click(function(){
   // How you pass the data here will depend on what you are calling and what format it's expecting. It *might* look something like this...
   $.ajax({
      data: { "searchRooms" : searchRooms, "searchAdults" : searchAdults, "searchChildren": searchChildren },
      // all your other settings for this ajax call...
   });
}); 
```

# java - Google java电子表格API，使用单元格网址更新单元格

> ID：13126296
> 
> 赞同：2
> 
> 时间：2012-10-29T17:03:43.543
> 
> 标签：java, google-spreadsheet-api

我希望我正确地描述了我的需求，希望也许有人可以阐明这一点。

我正在寻找基于单元格唯一地址更新工作表中特定单元格内容的能力。

正如我们可以为每个单元格获取它的 R1C1 表示法的地址，我是否可以提取该地址，根据我的需要对其进行操作（例如，获取 R1C1 的单元格，将其更改为 R1C2）并更新新地址中的单元格？

如果需要更多信息，请告诉我。

提前致谢！
梅尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-13T11:20:47.017

我知道这有点晚了，但我认为这可以帮助你： [https ://developers.google.com/google-apps/spreadsheets/](https://developers.google.com/google-apps/spreadsheets/)

特别是说：“更改单元格的内容”的部分

# c++ - C/C++ - 如何将带符号的 32 位整数转换为浮点数并返回

> ID：13126297
> 
> 赞同：1
> 
> 时间：2012-10-29T17:03:45.040
> 
> 标签：c++, c, floating-point, int

我需要能够将 C SInt32 整数转换为 [-1, 1] 范围内的浮点数并返回。我已经看到关于 24 位整数的这个问题的讨论：

[C/C++ - 将 24 位有符号整数转换为浮点数](https://stackoverflow.com/questions/2916191/c-c-convert-24-bit-signed-integer-to-float)

我试过类似的东西：

```
 // Convert int - float
 SInt32 integer = 1;
 Float32 factor = 1;
 Float32 f = integer / (0x7FFFFFF + 0.5);

 // Perform some processing on the float
 Process(f);

 // Scale the float
 f = f * factor;

 // Convert float - int
 integer = f * (0x7FFFFFF + 0.5); 
```

但是，这不起作用。我知道它不起作用，因为我正在做的工作涉及音频编程并且转换会导致嘶嘶声。

我很确定这是一个转换问题，因为当我通过将因子设置为 0.0001 使浮动变小时，噼啪声消失了。也许反向转换使 int 超出了它的限制并导致它被截断。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T17:09:29.907

阅读[IEEE 浮点格式](http://en.wikipedia.org/wiki/IEEE_floating_point)。[IEEE 32 位浮点数](http://en.wikipedia.org/wiki/Single_precision_floating-point_format)仅支持 24 位有效位，因此如果您转换 32 位整数，您将丢失低 8 位。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T17:12:01.483

```
const float recip = 1.0 / (32768.0*65536.0);
// hope that compiler will calculate this in advance
// From the expression an semi-advanced programmer can also immediately spot
// where the value comes from
float value = int_value * recip;
int value2 = value * (32768.0*65536.0); 
```

这个过程是不可逆的：一个人可能会损失多达 7 位的准确性。

# php - vtiger中的phpmyadmin缺少扩展

> ID：13126300
> 
> 赞同：0
> 
> 时间：2012-10-29T17:04:04.813
> 
> 标签：php, phpmyadmin, vtiger

尝试将 phpmyadmin 与 vtiger 一起使用并得到很多缺少的扩展错误。我已经取消了它在 php.ini 和 vtiger 中的扩展文件夹中所需的扩展名的注释，但仍然出现错误，有人有任何其他故障排除方法吗？

# windows - 如何将通配符域映射到 Windows Azure 网站实例？

> ID：13126301
> 
> 赞同：1
> 
> 时间：2012-10-29T17:04:05.327
> 
> 标签：windows, azure

创建“Web 应用程序”时，通常使用通配符域并将 Web 应用程序的每个客户端或实例放在其自己的子域中。Windows Azure 自己执行此操作，例如“yourwebsite.windowsazure.net”。由于某些未知原因，Windows Azure 网站似乎不支持通配符子域。我对这个事实感到非常沮丧，以至于完全放弃了 Windows Azure。

是否有解决方法不必手动输入您想要授权的每个域名？有这方面的API吗？我有一个特别棘手的要求，因为我需要完成超过 100,000 个子域，然后才能考虑迁移到 Azure。

如果您尝试像我已经回答的那样回答这个问题并且除了通过门户手动输入之外没有其他选择，请深入研究这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:25:19.393

我怀疑您是对的，并且 Windows Azure 网站不支持这一点。但是，您可以使用具有 Web 角色的云服务。

# php - SQL 查询包含一个范围内的到期日期，但如果它们有另一个相同类型的实例则排除

> ID：13126307
> 
> 赞同：6
> 
> 时间：2012-10-29T17:04:25.850
> 
> 标签：php, sql

这是详细模式下的问题。我在认证表上有认证实例，它们都有一个类型和一个与之关联的学生。这就是我想要发生的事情，我想提取所有到期日期范围内的证书（现在到 1 年）。如果他们符合该参数的条件，那很好，但是如果他们的证书到期时间大于范围，当它与该范围内的证书类型相同时，我想排除学生——他们不需要在那个报告。这是我的第一个查询：

```
SELECT s.student_id, s.fname, s.address1, s.lname, s.zip, s.state, s.city, s.student_type
          FROM students s, certifications c
          WHERE ( s.student_id = c.student_id )
            AND s.status='A' 
            AND s.student_type != 'B' 
            AND s.student_type != 'D'  
            AND s.student_type != 'E'
            AND s.student_type != 'W'  
            AND s.student_type != 'T'  
            AND s.student_type != 'I'  
            AND c.expiration >= CURDATE() AND c.expiration <= DATE_ADD(NOW(), INTERVAL 1 YEAR)
          GROUP BY s.student_id
             ORDER BY s.lname, s.fname 
```

那么实际得到的sql就是根据前面的sql语句得到的证书信息：

```
SELECT c.cert_num, c.date, expiration, ct.name, ct.cert_type, c.cert_id, c.student_id
              FROM  certifications c, cert_type ct 
              WHERE student_id = '{$Row['student_id']}'
              AND ct.cert_type = c.cert_type
              ORDER BY ct.name ASC, expiration DESC 
```

总而言之，我遇到的问题是，如果他们的证书到期时间在一年内，并且如果他们有另一个相同类型的证书，其到期时间大于该范围，学生就会出现。那不好。

有没有办法检查以确保某个证书类型在日期范围内，如果是，那么确保他们没有大于该范围的相同类型的证书？它不关心是否需要另一个 sql 查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:24:24.697

有可能我过度简化了问题，但你能不能只获得任何学生/类型组合的最长到期日期？例如

```
SELECT  s.student_id, 
        s.fname, 
        s.address1, 
        s.lname, 
        s.zip, 
        s.state, 
        s.city, 
        s.student_type
FROM    Students s
        INNER JOIN 
        (   SELECT  c.student_ID, 
                    c.Cert_Type, 
                    MAX(Expiration) AS Expiration
            FROM    Certifications c
            GROUP BY c.student_ID, c.Cert_Type
        ) c
            ON s.Student_ID = c.Student_ID
WHERE   s.Student_Type NOT IN ('B', 'D', 'E', 'W', 'T', 'I')
AND     c.expiration >= CURDATE() AND c.expiration <= DATE_ADD(NOW(), INTERVAL 1 YEAR)
GROUP BY s.student_id, s.fname, s.address1, s.lname, s.zip, s.state, s.city, s.student_type 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T17:29:33.777

使用子查询：

```
SELECT s.student_id, s.fname, s.address1, s.lname, s.zip, s.state, s.city, s.student_type
  FROM students s, certifications c
  WHERE ( s.student_id = c.student_id )
    AND s.status='A' 
    AND s.student_type != 'B' 
    AND s.student_type != 'D'  
    AND s.student_type != 'E'
    AND s.student_type != 'W'  
    AND s.student_type != 'T'  
    AND s.student_type != 'I'  
    AND c.expiration >= CURDATE() AND c.expiration <= DATE_ADD(NOW(), INTERVAL 1 YEAR)
    AND NOT EXISTS (
      SELECT c_inner.id 
      FROM certifications c_inner 
      WHERE c.expiration > DATE_ADD(NOW(), INTERVAL 1 YEAR)
        AND c.student_id = c_inner.student_id
    )
  GROUP BY s.student_id
    ORDER BY s.lname, s.fname 
```

我认为应该可以将其重构为连接，这样可以提供更好的性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T17:49:06.050

```
SELECT s.student_id, s.fname, s.address1, s.lname, s.zip, s.state, s.city, s.student_type
  FROM students s
  JOIN certifications c ON c.student_id = s.student_id
  LEFT JOIN certifications c2 ON c2.student_id = s.student_id
AND c2.expiration > DATE_ADD(NOW(), INTERVAL 1 YEAR)
  JOIN cert_type ct ON ct.cert_type=c.cert_type
  WHERE ( s.student_id = c.student_id )
    AND s.status='A' 
    AND s.student_type != 'B' 
    AND s.student_type != 'D'  
    AND s.student_type != 'E'
    AND s.student_type != 'W'  
    AND s.student_type != 'T'  
    AND s.student_type != 'I'  
    AND c.expiration >= CURDATE() AND c.expiration <= DATE_ADD(NOW(), INTERVAL 1 YEAR)
    AND c2.student_id is null
    ORDER BY s.lname, s.fname 
```

# c# - 在这种模式下，如何将 EF POCO 与通用 IRepository 分离？

> ID：13126308
> 
> 赞同：0
> 
> 时间：2012-10-29T17:04:27.880
> 
> 标签：c#, design-patterns, repository-pattern, dto, unit-of-work

我目前有一个 Repository/UnitOfWork 模式。但是，我无法弄清楚如何摆脱这种硬耦合。

* * *

这是我的模式的概述：

**业务逻辑层**

*   存储库
    *   用作类型约束
*   IRepository< TModel, TDTO >
    *   实现 IRepository
    *   一般 CRUD 方法
*   IEmployeeRepository<TModel>
    *   实现 IRepository< TModel, EmployeeDTO >
    *   一些员工特定的方法
*   工作单位
    *   存储库的吸气剂
    *   保存方法
*   IEntityWithId
    *   强制（和公开）DTO 和 EF POCO 具有称为 ID 的 Int32 字段的接口
    *   用作类型约束
*   EmployeeDTO（在实现的 EmployeeRepository 中使用 AutoMapper 映射）
    *   核心项目和（即将到来的）测试项目中使用的 DTO 实体

**数据层（用 Ninject 注入）**

*   工作单位
    *   基于Entity Framework的IUnitOfWork实现
*   员工资料库
    *   IEmployeeRepository<TModel>的实现
*   员工
    *   英孚波科

**核**

*   员工控制器
    *   参数化构造器EmployeesController(IUnitOfWork unitOfWork)
    *   IUnitOfWork 被注入一个 Ninject 模块作为一个 UnitOfWork（来自数据层）

* * *

这些是我的通用 IRepository 接口中的问题方法。

```
TDTO Find(Expression<Func<TModel, bool>> filter); 
```

和

```
IEnumerable<TDTO> FindAll(Expression<Func<TModel, bool>> filter); 
```

* * *

如您所见，其中有 TModel，用于构建表达式以过滤结果。我可以做一些事情，比如在 DTO 上使用表达式，但这需要映射到 DTO 的员工的完整列表（也就是它不会生成 SQL 过滤器，但它会过滤 SELECT * FROM Employee 结果列表）。所以这不是一个好的选择。

另一种更可行但不是最佳的解决方案是使用动态 LINQ。这样，我可以在 Find / FindAll 方法中传递一个简单的字符串并摆脱 TModel 要求。然而，这意味着重构变得烦人，因为它用魔术字符串填充代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:11:21.683

就像我发布这个一样，我想我知道我的问题出在哪里。

Find() 和 FindAll() 甚至不应该存在。我应该在 IEmployeeRepository 中编写更具体的方法，例如 FindEmployeeByName(string name)，然后像这样实现它：

```
EmployeeDTO FindEmployeeByName(string name)
{
    return Mapper.Map<EmployeeDTO>(dbSet.Where(o=>o.name.Contains(name)).FirstOfDefault());
} 
```

任何人都可以确认这是一种正确的方法吗？或者提出更好的建议？

**编辑**

另外，如果我想保留 Find(Expression...) 和 FindAll(Expression...) 方法，我可以，但它们只是在数据层中，并由已实现的方法使用，以避免重复代码。但它们不应该在控制器中使用，因为它们需要了解我的业务逻辑之外的底层数据结构。也就是说，它们可以在 BaseRepository<TModel> 中实现（我已经有但没有提及以使事情更简单）并使EmployeesRepository 成为BaseRepository 的扩展。这样，每个存储库都已经拥有那些模型感知的类泛型方法。

不确定我是否解释得当。如果不清楚，请告诉我，我会尝试对其进行编辑并使其变得更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:16:28.030

另一种方法是让您的数据层依赖于业务层，并将您的存储库“项目”实体放入您的业务对象 (DTO)。这样你的 BL 在底部，UI 和 Data 依赖它，但 UI 和 Data 不相互依赖。

这是 Mark Seemann 在他的依赖注入一书中所支持的方法。

# version-control - clearcase 远程回滚删除目录

> ID：13126310
> 
> 赞同：1
> 
> 时间：2012-10-29T17:04:33.563
> 
> 标签：version-control, clearcase, rollback, clearcase-remote-client

如何回滚在 CCRC 中删除目录及其内容的操作？

我已删除该目录，并且更改已在我的视图中签入。我无法运行 cleartool，我得到的错误是“您没有运行 ClearCase 的许可证”。我在 eclipse CCRC 插件中尝试过“替换为另一个透明大小写版本”，并指定了我想要的版本，但没有任何变化。

如何取回目录和文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:26:51.353

`cleartool`不适用于 CCRC。它仅包含在完整的 ClearCase 安装中。

恢复已删除元素的方法应该是相同的：签出父目录并将其先前版本（仍引用子目录）与已签出的版本合并：您将取回已删除的内容（实际上只是取消引用)

另请参见[CCRC 合并目录视图](https://publib.boulder.ibm.com/infocenter/cchelp/v7r1m0/index.jsp?topic=/com.ibm.rational.clearcase.ccrc.help.doc/topics/u_comp_merg_mrg_dir.htm)。

# android-intent - 为什么收到短信时没有调用活动？

> ID：13126319
> 
> 赞同：1
> 
> 时间：2012-10-29T17:05:02.637
> 
> 标签：android-intent

我正在使用 SMSReceiver 类来接收短信。我的主要课程代码是：

```
package com.example.receivertest;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.widget.Toast;

public class SMSReceiver extends BroadcastReceiver
{
 @Override
   public void onReceive(Context context, Intent intent) 
   {
//---get the SMS message passed in---
Bundle bundle = intent.getExtras();        
SmsMessage[] msgs = null;
String str = "";            
if (bundle != null)
{
    //---retrieve the SMS message received---
    Object[] pdus = (Object[]) bundle.get("pdus");
    msgs = new SmsMessage[pdus.length];            
    for (int i=0; i<msgs.length; i++){
        msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
        str += "SMS from " + msgs[i].getOriginatingAddress();                     
        str += " :";
        str += msgs[i].getMessageBody().toString();
        str += "\n";        
    }
    //---display the new SMS message---
    Toast.makeText(context, str, Toast.LENGTH_SHORT).show();

    if(str.startsWith("aaa")){
        Intent i = new Intent(context, MainActivity.class);
        i.putExtra("msg",str);
        i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);   
        context.startActivity(i);
        this.abortBroadcast();
    }

}

 } 
```

清单文件是：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.receivertest"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.RECEIVE_SMS"></uses-permission>
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <receiver android:name=".SMSReceiver">
    <intent-filter android:priority="100">
        <action android:name="android.provider.Telephony.SMS_RECEIVED" />
    </intent-filter>
</receiver>
</application>

</manifest> 
```

我知道上次有人问过类似的问题。但是我想知道如何在收到特定消息时调用活动。我的问题是没有任何活动被调用，而只有收件箱中的传入消息。任何人都知道它有什么问题吗？

# apache - mod_rewrite：将请求从本地主机重定向到远程服务器

> ID：13126320
> 
> 赞同：0
> 
> 时间：2012-10-29T17:05:03.973
> 
> 标签：apache, mod-rewrite

我有以下情况：

*   运行一些 webapp 的远程服务器`http://remote/webapp`
*   公司网络内的本地计算机
*   他们之间的公司代理
*   在我的本地机器上运行带有 mod_rewrite 的 Apache

我想让 mod_proxy 将每个请求都重写`http://localhost/webapp?someparams`为`http://remote/webapp?someparams`.

目前我有以下httpd.conf：

```
DocumentRoot "C:/Apache2.2/htdocs"

<Directory />
    RewriteEngine On
    RewriteRule ^(.+) http://remote/$1 
    Options FollowSymLinks
    AllowOverride All
    Order deny,allow
    Deny from all
</Directory> 
```

这导致 mod_rewrite 转换`http://localhost/webapp?someparams`为`http://remote/C:/Apache2.2/htdocs/webapp?someparams`

如何配置 mod_rewrite 以正确处理它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:26:27.563

由于看起来您可以访问 vhost/server 配置，因此您应该放弃 mod_rewrite 并只使用 mod_proxy：

```
ProxyPass /webapp http://remote/webapp
ProxyPassReverse /webapp http://remote/webapp 
```

并摆脱 2 mod_rewrite 行（这是重定向，而不是代理）：

```
RewriteEngine On
RewriteRule ^(.+) http://remote/$1 
```

请注意，如果您有 cookie，则可能需要反向映射它们的域。使用[ProxyPassReverseCookieDomain](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxypassreversecookiedomain)。

* * *

还：

> Windows 绝对路径出现在 URL 中的事实是由于 mod_rewrite 的错误配置，这是我试图避免的

这不是 mod_rewrite 的错误配置。当您将重写规则放入 a`<Directory>`时，匹配中将使用文件路径而不是 URI 路径。根据[mod_rewrite 文档](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewriterule)

> **什么是匹配的？**
> 
> 在`VirtualHost`上下文中，模式最初将与主机名和端口之后、查询字符串之前的 URL 部分进行匹配（例如“/app1/index.html”）。
> 
> 在`Directory`和 htaccess 上下文中，模式最初将与文件系统路径匹配，在删除引导服务器到当前的前缀之后`RewriteRule`（例如，“app1/index.html”或“index.html”，取决于指令的定义位置） .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T09:30:44.377

感谢 Jon 的启发，终于 mod_proxy + mod_rewrite 工作了：

```
# Global context
RewriteEngine On
RewriteRule ^(.+) http://remote/$1 [P]
ProxyPassReverse / http://remote/ 
```

我知道这是一个简化且粗略的解决方案，但适用于我的目的。

# jquery - 使用 jQuery 将图像不透明度添加到背景图像

> ID：13126324
> 
> 赞同：1
> 
> 时间：2012-10-29T17:05:14.363
> 
> 标签：jquery, css, opacity, mask, jquery-backstretch

我指的是位于[http://www.gamezilla.co.za](http://www.gamezilla.co.za)的朋友网站。

背景图像使用 jQuery 插件 (backstretch) 拉伸，但图像上有一个非常轻的网格遮罩。如何使用 CSS 或 jQuery 将此蒙版添加到背景图像？

背景图像上没有遮罩，如此处所示 (http://www.gamezilla.co.za/wp-content/uploads/2012/09/b_homepage.jpg)

知道它是如何工作的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T17:10:16.957

他有一个 ID 为 #pattern-filter 的 span，其中包含一个 2x2 像素的图像，该图像在图像顶部重复。

请参见 224add20.273d39.css 文件的第 338 行。

```
#pattern-filter {
 position:fixed;
 width:100%;
 height:100%;
 background:url(/wp-content/themes/gonzo/images/pattern-filter.png) scroll transparent
} 
```

# android - MultipartEntity 中使用 FileBody 的 UTF-8 编码

> ID：13126327
> 
> 赞同：7
> 
> 时间：2012-10-29T17:05:35.647
> 
> 标签：android, multipartentity

我想在 FileBody 中发送文件时设置 UTF-8 编码，就像在 StringBuilder 中一样。我这样做：

```
restClient.AddEntity("body", new StringBody(body, Charset.forName("UTF-8"))); 
```

如果我发送不同于 UTF-8 消息编码的消息，它可以正常工作。但如果我这样做：

```
ContentBody fbody = new FileBody(( File )file, "application/octet-stream","UTF-8");
        restClient.AddEntity("files[]", fbody); 
```

服务器获取不是 UTF-8 格式的文件名。我该如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-03T16:34:55.967

我通过以下方式简单地解决了这个问题：

```
MultipartEntity entity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE,null,Charset.forName("UTF-8")); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-23T18:08:06.367

我通过这个参数解决了这个问题：

```
entity.addPart("video_title", new StringBody(edtvideo_title.getText().toString(),Charset.forName(HTTP.UTF_8))); 
```

# macos - 在 Mac OS X 上使用 GYP 生成 Makefile？

> ID：13126330
> 
> 赞同：4
> 
> 时间：2012-10-29T17:05:47.057
> 
> 标签：macos, makefile, automake, gyp

我需要做什么才能让 GYP 为 Mac OS X 生成典型的类 unix 生成文件堆栈？

我目前使用以下配置文件生成 XCode 构建项目：

```
{
  "targets": [
    {
      "target_name": "hello",
      'type': 'executable',
      "sources": [ "hello.cc" ]
    }
  ]
} 
```

然后在 CLI 中运行以下命令：

`gyp --depth binding.gyp`

这会生成一个目录：`binding.xcodeproj`其中包含 XCode 项目。

我更希望你的标准类 unix 为 OSX 构建。另外，我想将这个项目导入到 Windows，我想使用 MS 编译器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T05:40:50.543

找到了答案。很简单，真的。感谢TooTallNate。我遇到了一个错误，就像我最初做的那样。你明确地这样做：

`gyp --depth=./ binding.gyp --format=make`

# objective-c - 识别文件中的更改

> ID：13126334
> 
> 赞同：0
> 
> 时间：2012-10-29T17:06:24.617
> 
> 标签：objective-c, ios, cocoa-touch, file, checksum

我的应用程序使用简单的`NSURLConnection`方法检查网站中的一些文件。现在我想在不下载文件的情况下识别其中一个文件是否已更改并进行比较。

我考虑过 md5 校验和，但我怎样才能做到这一点而不浪费流量下载整个文件。

你对此有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:30:02.150

检查文件上的时间戳。这应该比使用 md5 校验和更容易。我不知道您的应用程序或服务器 API 是如何实现的，但这个想法非常简单：

*   在服务器上创建一个 API，允许您查询上次修改文件的时间（跟踪修改时间戳应该已经由服务器上的操作系统处理）
*   当您在客户端下载文件时，还存储时间戳（即服务器认为文件上次修改的时间）。
*   在检查是否更新文件时，首先询问文件的服务器时间戳并将其与客户端应用程序中的时间戳进行比较 - 如果服务器时间戳比客户端上的时间戳更新，则下载新文件，否则什么也不做。

# sql - SQL 枢轴问题。得到错误的输出

> ID：13126337
> 
> 赞同：0
> 
> 时间：2012-10-29T17:06:30.403
> 
> 标签：sql

```
TCCode JobCode 总计
------ -------- -----------
L402 A 1
L402 F 16
L402 H 1
L402 小号 12
L402 W 12
L603 A 1
L603 F 5
L603 S 8
L603 W 8
```

我的查询：

```
SELECT * FROM
(
Select TCCode, JobCode, count(*) AS Totals 
From myTable
Group By JobCode, TCCode 
) t1

pivot ( Count (JobCode) for JobCode in ([A], [S], [H], [F], [W])) as Totals 
```

该表如上所示。我什么都试过了！我没有得到我想要的结果。我希望它是旋转的。我该怎么做呢？我在 SQL Server 2008 上。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:15:24.743

只需从子查询中删除分组和聚合：

```
SELECT * FROM
(
Select TCCode, JobCode
From myTable
) t1

pivot ( Count (JobCode) for JobCode in ([A], [S], [H], [F], [W])) as Totals 
```

# ios - IOS：没有 ARC 的属性

> ID：13126339
> 
> 赞同：0
> 
> 时间：2012-10-29T17:06:37.067
> 
> 标签：ios, properties

我有一个 ARC 项目，但我禁用了它，现在我的属性有问题：

```
@property (weak, nonatomic) IBOutlet UIView *frame; 
```

现在我有一个“弱”的错误，我可以替换什么？保持？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:10:57.647

最接近`weak`手动引用计数的是`assign`. 请记住，与ARC 不同的是，当属性指向的实例被解除分配时`weak`，assign 属性的值*不会自动归零。*因此，您需要小心在对象被释放之前丢弃对对象的分配引用。

为什么禁用 ARC？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T17:10:48.973

您应该将其替换为`assign`. 并`strong`与`retain`. `retain`意味着对于存储在那里的每个对象，引用计数器都会增加。如果你替换`weak`为`retain`你可以获得参考周期并泄漏一些内存。

# php - PDO 条件：创建日期是今天

> ID：13126340
> 
> 赞同：0
> 
> 时间：2012-10-29T17:06:38.083
> 
> 标签：php, date, drupal-7, mysqli

我试图在我的查询中设置“日期=今天”条件。数据库中的日期存储为“1351504197”。

这是我的尝试：

```
->condition('cord.created',REQUEST_TIME - 3600, '<=') 
```

这是完整的查询：

```
 $query = db_select('commerce_order', 'cord')->extend('TableSort');
  $query->join('commerce_line_item', 'li', 'cord.order_id = li.order_id');
  $query->join('commerce_product', 'item', 'item.sku = li.line_item_label');
  $query->fields('cord', array('order_id'))
        ->fields('li', array('quantity'))
        ->fields('item', array('title', 'sku'))
        ->groupBy('title')
        ->condition('cord.status', 'pending', '=')
        ->condition('cord.created',REQUEST_TIME - 3600, '<=')
        ->orderByHeader($header); 

  $query->addExpression("GROUP_CONCAT(li.order_id separator ', ')", 'order_id');         
  $query->addExpression('SUM(quantity)', 'quantity'); 
```

但是返回的结果当然是不正确的。

任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:10:55.163

这看起来像一个unix时间戳。如果您使用本机 MySQL 日期/时间字段，则必须使用[from_unixtime()](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_from-unixtime)或[unix_timestamp()在它们之间进行转换](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T09:40:07.310

解决方法是：

```
 $today = getdate();
  $start_time = mktime(0, 0, 0,$today['mon'],($today['mday'] - 1), $today['year']);
  $end_time = time();

  ->condition('cord.created', array($start_time, $end_time), 'BETWEEN') 
```

# frameworks - 选择框架时要牢记哪些因素？

> ID：13126341
> 
> 赞同：0
> 
> 时间：2012-10-29T17:06:55.853
> 
> 标签：frameworks

我目前正在尝试使用一个名为[object recognition kitchen](http://ecto.willowgarage.com/recognition/)的对象识别项目。该项目建立在 ecto 之上，[ecto](http://ecto.willowgarage.com/index.html)是一个轻量级的混合 C++/Python 框架，用于将计算组织为有向无环图。

我没有任何在框架之上开发项目的经验（我也不知道如何有效地找到有用的框架）。我想知道在选择项目框架时要记住的主要问题是什么。

有[一个类似的问题](https://stackoverflow.com/questions/2848288/choosing-the-correct-framework)，但答案并没有解决我的困惑。

欢迎任何意见或想法。在此先感谢:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T17:17:38.393

我是一名 php web 开发人员，当我在寻找一些可以使用的 fw 从而使我的工作变得轻松时，我一直在寻找这个。

1.  简单易学。
2.  完整的文档和教程。
3.  伟大的社区，无论是在其论坛还是其他地方。
4.  自由的。XD。许多人在世界各地使用免费的东西。所以有很多人可以帮助你。

第 3 点和第 4 点可以概括为非常受欢迎。

最重要的是：测试在您选择的每个固件中开发某些任务的难易程度。

希望这可以帮助你。

# php - 同位素砌体悬停状态不起作用

> ID：13126342
> 
> 赞同：1
> 
> 时间：2012-10-29T17:06:58.387
> 
> 标签：php, hover, z-index, jquery-masonry, jquery-isotope

我在我的新站点中使用了 Isotope，我面临的问题是，当我将单个项目悬停时，应该显示一个更大的 div，提供额外的描述，但它被其他 div 隐藏或切断。我想要实现的类似于 www.ted.com 网站。

这是我的网格的 html 部分，它从数据库中提取单个摘要

```
<div id="container" class="clearfix">

    <?php

    $sql="SELECT * FROM abstracts where year='2012' AND status='publish' order by date_added desc LIMIT 0, 15";

    $sql_query = mysql_query($sql);
    while($row=mysql_fetch_assoc($sql_query))

    {

    ?>
            <a href="http://www.painlink.org/staging/login.php"> 

            <div class="category <?php echo $specialities;?>" data-symbol="Hg" data-category="basicscience">
            <div class="Border">
                <img src="cropper.php?src=admin/images/journals/<?php echo $row['journal_image'];?>&h=180&w=120&zc=1">
                **<span><div id="filterLink_text"><?php echo $row['title']; ?></div></span>**
            </div>
            </div></a>

        <?php 
    }
    ?>
</div> 
```

我还在css中更改了以下内容，使其高于同位素项目

```
.isotope-item:hover { 
    z-index: 10; 
} 
```

隐藏的粗体跨度必须在悬停时显示。

我的网站网址是 www.painlink.org/staging

你能帮我解决这个问题吗？

干杯，内蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:20:30.737

我写了一个类似的东西，我使用了来自网站[http://www.maxmedia.com](http://www.maxmedia.com)的脚本。实现起来并不容易。您可以尝试从 maxmedia 中分解 javascript。他们使用压缩的 javascript，所以你需要一个好的编辑器。当您一次又一次地将鼠标从一个瓷砖上移出并快速将鼠标悬停在另一个瓷砖上时，也会出现问题，似乎鼠标事件有时不起作用。然后，您必须在控制器中注册事件。关于隐藏跨度，我在这里没有看到问题，但我认为您需要使用 animate 来解决它。您必须取消隐藏跨度并同时滚动图像和跨度，以便跨度完全可见，并且当您不想增大图块时隐藏图像。

# internet-explorer-8 - Internet Explorer 8 中的大空间

> ID：13126343
> 
> 赞同：1
> 
> 时间：2012-10-29T17:06:59.207
> 
> 标签：internet-explorer-8, doctype

不确定您是否可以提供帮助，但我对我建立的网页有疑问。

`109.108.140.137`

在 Firefox 和 Chrome 中它看起来不错，但在 IE (8) 中顶部有一个空白。它与任何不正确的 div 标签无关，但似乎是一个文档类型问题。我更像是一名 SQL 程序员而不是一名 Web 开发人员，但是关于如何消除这种差距有什么想法吗？

IE编码不太好..

# ruby-on-rails - Koala - 在 facebook (rails) 中创建标签

> ID：13126351
> 
> 赞同：0
> 
> 时间：2012-10-29T17:07:24.133
> 
> 标签：ruby-on-rails, facebook, tabs, koala

我想在 FB 上创建标签。

我有这个代码：

```
@graph = Koala::Facebook::API.new(Client.find(session[:id_client]).oauth_token)
@graph.put_connections("4154829881847172/tabs","POST", {:access_token => "AAABwdtYjsyoBAMcg558a4FYnZBkZBUiPKmcWWssssWoNZC2yjqE43ghoR9uTiFIhT3ErkQYx45RrrPeOD0ZCvFgnmRIUh9lqRUw5KIlWwxtRW3GvbIEUWp0yB2", :app_id => '1236553701115690'}) 
```

但我有一个问题

-> OAuthException: (#210) 主题必须是一个页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:38:04.570

4154829881847172 是您尝试添加选项卡的页面的正确 ID 吗？你确定使用页面的访问令牌吗？（与页面管理员的用户访问令牌相反）

其中任何一个不正确都意味着您传递的不是页面 ID 而是页面 ID

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:22:45.263

这对我也不起作用。我认为原因是[http://developers.facebook.com/bugs/194192344040832/](http://developers.facebook.com/bugs/194192344040832/)。在 Graph API Explorer 上运行它会得到相同的结果。

但我确实使用了以下方式

```
@graph = Koala::Facebook::GraphAPI.new("user_access_token")
@newgraph=Koala::Facebook::GraphAPI.new("page_access_token")
@newgraph.put_connections("me","tabs", {:app_id => 'your_app_id'}) 
```

您基本上使用页面访问令牌创建一个图形对象，然后运行 ​​put_connections 方法。

# javascript - jQuery 幻灯片不工作，显示：无；

> ID：13126354
> 
> 赞同：0
> 
> 时间：2012-10-29T17:07:28.290
> 
> 标签：javascript, jquery

我试图让我的 jquery 幻灯片工作只是出于某种原因它作为显示输出到浏览器：无！

有相当多的代码，所以我做了一个小提琴......

[http://jsfiddle.net/uExdD/](http://jsfiddle.net/uExdD/)

anbybody 可以看到我哪里出错了吗？我正在使用这个插件

[http://basic-slider.com/](http://basic-slider.com/)

我用以下方式调用我的插件......

```
 $('.slideshow').bjqs({
      'animation' : 'slide',
      'width' : 960,
      'height' : 335,
      'showMarkers': true
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T17:18:37.207

如文档中所述，您的`<ul>`标签需要一个`bjqs`类。

```
<section class="slideshow">
  <ul class="bjqs home-slideshow">
    <!-- ... -->
  </ul>
</section> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T17:17:01.593

这是错误的...

```
$slider         = $wrapper.find('ul.bjqs'), 
```

或者更确切地说，您的标记应该是......

```
<section class="slideshow">
        <ul class="bjqs"> 
```

您可以更改标记中的类或在脚本中使用您的自定义类而不是 .bjqs

# r - 更改列表元素中的列名

> ID：13126356
> 
> 赞同：3
> 
> 时间：2012-10-29T17:07:37.537
> 
> 标签：r

我有一个包含 data.frames 的巨大列表（列数相同，行数不同）。我成功地使用 apply - 而不是我学会避免的 for 循环 - 在每个列表元素中的特定列上创建一个平均值

```
t2<-lapply(t1, function(x) cbind(x,rowMeans(x[,c("ColumnX","ColumnY","ColumnZ")]))) 
```

我现在遇到的问题是新的列名。它是“rowMeans(x[,c("ColumnX","ColumnY","ColumnZ")])"。

如何为所有列表元素更改此设置？我可怜的“lapply”知识不足以完成这项任务。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T17:19:16.927

有两种方法可以做到这一点，它实际上与`cbind`函数而不是`lapply`函数有关：

```
cbind(x,DesiredName = rowMeans(x[,...])) 
```

或者在你绑定之后：

```
> names(x)
[1] "Column X" "Column Y" "Column Z" "rowMeans(x[,...])"
> names(x)[4]
"rowMeans(x[,...])"
> names(x)[4] <- "DesiredName" ###Assign a name to the fourth column
> names(x)
[1] "Column X" "Column Y" "Column Z" "DesiredName" 
```

这显然是很长的路要走，但如果您在`apply`or`cbind`过程中忘记命名某些东西，它很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T17:16:02.497

只需添加一个 colname，例如`RowMeans`

```
t2 <-lapply(t1, function(x) cbind(x,RowMeans=rowMeans(x[,c("ColumnX","ColumnY","ColumnZ")]))) 
```

实际上，您可以使用此替代方法来实现您的目标：

```
lapply(t1, function(x) transform(x,RowMeans=rowMeans(x[,c("ColumnX","ColumnY","ColumnZ")]))) 
```

这`RowMeans`是包含每行平均值的新变量的名称。

# perl - 我可以从 perl 中的模块调用 .pl 文件吗？

> ID：13126358
> 
> 赞同：1
> 
> 时间：2012-10-29T17:07:41.367
> 
> 标签：perl, module

我已经从一个`.pl`文件创建了一个 Perl 模块，我现在正在测试它。它一直工作到需要使用另一个`.pl`文件（提取一些 sql 语句）为止。我正在使用`require 'file.pl';`. 这是一个临时解决方案，因为该`.pl`文件将来会被更好的数据库解决方案替换，但现在我需要测试我的模块代码。但是，它不喜欢尝试查找文件，即使我已将路径名放在`@INC`using 中`use lib '/path/to/file'`。

有什么临时解决方案可以用来解决这个问题吗？我不知道`.pl`文件什么时候会被替换，所以我不能指望那个。我是否应该将 sql 语句移动到`.pm`文件中，即使我稍后必须删除它们，还是我必须搜索模块所在的文件夹并将`.pl`文件的副本放入其中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T17:11:04.527

您可以要求完整的路径名：

```
require '/path/to/file.pl'; 
```

# java - 执行公钥加密背后的数学运算

> ID：13126360
> 
> 赞同：1
> 
> 时间：2012-10-29T17:07:46.490
> 
> 标签：java, math, public-key-encryption

[我对这个公钥密码背后的简单示例](http://www.youtube.com/watch?v=3QnD2c4Xovk)非常着迷，并坐下来`Client <- Server -> Client`使用 Java 编写我自己的示例。只是一个简单的来回使用生成的秘密对消息进行编码。

我最初遇到的问题是*技术*问题。在演示中，作者确定了方程的结果：

`3 ^ (24 * 54) mod 17`

有一个值：

`= 1`

**但我的问题是，如何在 Java 中计算如此大的数字？**

还是提供的示例只是：*一个示例*，而不是实际的计算方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T17:10:35.273

这一定有一个很好的数学原因（丹尼尔·菲舍尔似乎有一个）。在任何情况下，您都可以使用 BigInteger：

```
public static void main(String[] args) {
    BigInteger bi = new BigInteger("3")
          .modPow(new BigInteger(String.valueOf(24 * 54)), new BigInteger("17"));
    System.out.println(bi);
} 
```

输出 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:10:24.717

您需要使用[BigInteger](http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigInteger.html)类来处理如此大的数字。它提供对大整数的算术运算。

# app-store - 我仍然可以将 iOS 5.1 应用程序提交到应用商店（2012 年 10 月）吗？

> ID：13126361
> 
> 赞同：2
> 
> 时间：2012-10-29T17:07:51.950
> 
> 标签：app-store, xcode4.3, xcode4.5, iphone-4, iphone-5

我开始使用 armv6 和 armv7 指令集构建带有 xCode 4.3.2 的 iOS 应用程序。我的部署目标是 iOS5.1 。现在 iPhone 5 发布了，xCode 4.5 放弃了对 armv6 的支持，取而代之的是 armv7s ，向应用商店提交应用程序的正确方法是什么？

**恐怕如果我提交的应用程序错误，应用商店审核团队会尝试在 iPhone 5 上启动该应用程序，运行 armv7s ，而该应用程序将无法运行。**

我是否应该更新到 xCode 4.5，并现在针对 iOS6 构建我的应用程序，即使我没有 iPhone 5 来测试它？

感谢您的任何澄清。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:00:54.007

> 我是否应该更新到 xCode 4.5，并现在针对 iOS6 构建我的应用程序，即使我没有 iPhone 5 来测试它？

您可以提交不利用 iPhone 特定功能（即更高的屏幕）的应用程序。如果您的应用程序可以在 iPhone 4 上运行，那么它也可以在 iPhone 5 上运行，尽管在特殊模式下，您的应用程序的视觉内容以屏幕为中心，上下都有黑色条纹。

另一方面，如果您担心的话，您可以使用 Xcode 4.5 模拟器来确保您的应用程序可以在 iPhone 5 上运行。然后，您可以更改您的代码库以使其在 iPhone 5 上运行，并且仍然为使用 Xcode 4.3 制作的 App Store 提供官方构建。除了性能调整和修复内存管理问题之外，这对所有方面都有好处；但是您可以在当前的 iPhone/iPad 上处理这些点，无论如何。

在 Xcode 4.5 中，Apple 决定停止对旧设备的支持：最初的 iPhone、iPhone 3G 和前两个版本的 iPod Touch。因此，如果您想支持 iPhone 5，您将被迫停止对这些设备的支持。我不认为这是一个大问题，虽然我自己有一个旧的 iPod Touch 2nd Gen，我无法预见它的光明未来。

如果对支持 iOS5 和 iOS6 有疑问，您也可以查看[这篇文章](https://stackoverflow.com/questions/12259926/updating-apps-to-ios6/12260063#12260063)。

希望这可以帮助。

# cocoa - 将 HTML 加载到 NSTextView 时设置默认字体和大小

> ID：13126363
> 
> 赞同：4
> 
> 时间：2012-10-29T17:08:01.560
> 
> 标签：cocoa, core-text

我正在将一个简单的 HTML 加载到 NSTextView 中。我已经为 NSTextView 设置了字体属性，但是 HTML 的加载会忽略这些字体，并且默认始终为“Times-Roman 12 大小”。目前我正在枚举属性并设置字体大小。但是仅仅为了改变大小而这样做似乎很昂贵。这是唯一的方法吗？有没有更好的办法？

HTML：

```
<p>This is just a <b>title</b></p> 
```

将 HTML 加载到 NSTextView 并随后更改字体大小：

```
 NSData *valueInDataFormat = [bodyContent dataUsingEncoding:NSUTF8StringEncoding];
    NSAttributedString *textToBeInserted = [[NSAttributedString alloc] initWithHTML:valueInDataFormat documentAttributes:nil];

    NSDictionary *rtfTextAttributes = [self defaultTextAttributesFor:RTFText];
    //inserttext mimic what user do; so it takes the typingattributes
    //ref: http://www.cocoabuilder.com/archive/cocoa/113938-setting-default-font-of-an-nstextview.html#114071
    [entryContent setString:@""];
    [entryContent setTypingAttributes:rtfTextAttributes];
    [entryContent insertText:textToBeInserted];

    //now change font size
            NSTextStorage *content = [entryContent textStorage];
            [content beginEditing];
            NSRange totalRange = NSMakeRange (0, content.length);

            [content enumerateAttributesInRange: totalRange
                                                 options: 0
                                              usingBlock: ^(NSDictionary *attributes, NSRange range, BOOL *stop) {
                                                  NSLog (@"range: %@  attributes: %@",
                                                         NSStringFromRange(range), attributes);

                                                  NSFont *font = [attributes objectForKey:NSFontAttributeName];
                                                  if (font){
                                                      [content removeAttribute:NSFontAttributeName range:range];
                                                      font = [[NSFontManager sharedFontManager] convertFont:font toSize:[font pointSize] + 3];
                                                      [content addAttribute:NSFontAttributeName value:font range:range];
                                                  }
                                              }];
            [content endEditing];
            [entryContent didChangeText]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-07T22:04:10.377

最近遇到这个问题，最后发现可以`<style>`在HTML内容的前面使用一个block，并将其设置`font-family`为系统默认值。这很好用，允许 HTML 在使用系统字体时描述所有粗体和斜体属性。

```
NSString* bodyContent = @"<p>This is just a <b>title</b></p>";

NSMutableString *htmlContent = [NSMutableString string];
[html appendString: @"<style>body { font-family: "];
[html appendString: [[NSFont systemFontOfSize: 12] fontName]];
[html appendString: @"; }</style>"];
[html appendString: bodyContent];

NSData *htmlData = [htmlContent dataUsingEncoding:NSUTF8StringEncoding];
NSAttributedString *html = [[NSAttributedString alloc] initWithHTML: htmlDescriptionData baseURL: NULL documentAttributes: NULL]; 
```

可能有一个更优雅的解决方案，但我还没有找到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-08T02:57:48.790

您可以使用`WebPreferences`对象来控制从 HTML 创建属性字符串时使用的字体。

该方法`-initWithHTML:options:documentAttributes:`需要一个`options`字典。该字典的公认键之一是`NSWebPreferencesDocumentOption`. 该值是`WebPreferences`解释 HTML 时使用的实例。

一个`WebPreferences`实例有几个字体系列设置。在 HTML 中没有指定其他字体属性时使用的字体是`-standardFontFamily`. 如果 HTML 指定了字体类（例如“sans-serif”）但没有指定特定字体，则使用该字体类的设置（例如`-sansSerifFontFamily`）。

`WebPreferences`也有字体大小的设置。

例如：

```
WebPreferences *webPreferences = [[WebPreferences alloc] initWithIdentifier:@"com.company.app.something"];
webPreferences.standardFontFamily = [someFont familyName]; // or a hard-coded family name like @"Helvetica Neue"
webPreferences.defaultFontSize = [NSFont systemFontSize];
...
[[NSAttributedString alloc] initWithHTML:htmlData
                                 options:@{NSWebPreferencesDocumentOption : webPreferences}
                      documentAttributes:NULL]; 
```

* * *

有一个警告：系统字体是一个隐藏在`WebPreferences`/中的系列`NSAttributedString`。在小牛队，它的名字是“.Lucida Grande UI”；在优胜美地，它的名字是“.Helvetica Neue UI”。由于某种原因，在使用对象将 HTML 转换为属性字符串时，不能使用这些`WebPreferences`。我最好的猜测是，这是因为它们没有列在`[[NSFontManager sharedFontManager] availableFontFamilies]`. 当您尝试使用这样的字体系列时，系统默认为 Times（糟糕！）。

# google-analytics-api - 我可以从 Google Analytics（分析）获取多长时间的数据？

> ID：13126366
> 
> 赞同：0
> 
> 时间：2012-10-29T17:08:29.827
> 
> 标签：google-analytics-api

如果我向 Google Analytics 提出请求，“开始日期”参数是否有任何限制？例如，我可以获得 5 年前的数据吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:09:56.277

是的你可以。从 2005 年开始对我来说效果很好。

# jquery - Jquery：在接收发生之前检查可排序元素是否有子元素

> ID：13126370
> 
> 赞同：0
> 
> 时间：2012-10-29T17:08:47.353
> 
> 标签：jquery, jquery-ui-sortable

我有一个纸娃娃库存。就像暗黑破坏神，你有元素，你把盔甲拖到你的角色上。盔甲放入的盒子是可分类的。当它收到时，我需要知道说“盔甲”插槽中是否已经有一个物品，所以它可以在收到新盔甲之前移除它。

所有插槽都是同一类。

会不会是这样的

```
$(".slot").sortable({
    receive: function(){
        $(this).parent().children();
    }
 }); 
```

或者

```
 $(this).sibling(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:11:40.067

你可以检查一个元素是否有孩子`$(this).children().length > 0`

例如：

```
if ($(this).children().length > 0)
{
    //has children
}
{
    //childless
} 
```

# ruby-on-rails-3.1 - 异常加载错误

> ID：13126377
> 
> 赞同：0
> 
> 时间：2012-10-29T17:09:08.290
> 
> 标签：ruby-on-rails-3.1

我收到一个不寻常的错误，我不知道如何解决。任何机构都可以帮忙。我的项目需要很长时间才能加载。

```
Rendered /Users/Ahmad/.rvm/gems/ruby-1.9.2-p320@b_finder/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.9ms[2012-10-29 22:29:43] ERROR Errno::ECONNRESET: Connection reset by peer
/Users/Ahmad/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:56:in `eof?'
/Users/Ahmad/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:56:in `run'
/Users/Ahmad/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'

Started GET "/assets/home.css?body=1" for 127.0.0.1 at 2012-10-29 22:29:43 +0530
Served asset /home.css - 304 Not Modified (3ms)

Started GET "/assets/list.css?body=1" for 127.0.0.1 at 2012-10-29 22:29:43 +0530
Served asset /list.css - 304 Not Modified (2ms)

Started GET "/assets/user.css?body=1" for 127.0.0.1 at 2012-10-29 22:29:43 +0530
Served asset /user.css - 304 Not Modified (2ms)

Started GET "/js/less.js" for 127.0.0.1 at 2012-10-29 22:29:43 +0530

ActionController::RoutingError (No route matches [GET] "/js/less.js"):
actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.8) lib/rails/engine.rb:479:in `call'
railties (3.2.8) lib/rails/application.rb:223:in `call'
rack (1.4.1) lib/rack/content_length.rb:14:in `call'
railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
/Users/Ahmad/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
/Users/Ahmad/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
/Users/Ahmad/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'

Rendered /Users/Ahmad/.rvm/gems/ruby-1.9.2-p320@b_finder/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.8ms) 
```

我不明白为什么它会给出这样的错误。我还注意到一件事。我已经使用了 twitter bootstrap `Tabbable nav`，因为这`js`是必需的。但是，如果我没有连接到互联网，那么该选项卡将不起作用。虽然我已经在资产管道中手动粘贴了 js 和引导的所有文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:45:29.950

听起来像是加载错误，在您的情况下，它找不到 less.js 文件。

你把它放在正确的位置了吗？应用程序 -> 资产 -> javascript

# android - Listview向上滚动冻结

> ID：13126380
> 
> 赞同：3
> 
> 时间：2012-10-29T17:09:25.233
> 
> 标签：android, android-layout, android-cursoradapter, android-scroll

我有带有自定义光标适配器的列表视图。它包含数百个项目。向下滚动流畅且快速，但**向后滚动 - 一直冻结**。我不在 UI 线程上加载图像或某些操作。仅从光标中获取少量值并将其设置为文本视图

```
private class EpisodesAdapter extends CursorAdapter {
        LayoutInflater inflater;
        public EpisodesAdapter(Context context) {
            super(context, null, false);
            inflater = (LayoutInflater)     context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        }

        @Override
        public View newView(Context context, Cursor cursor, ViewGroup parent) {

            View view = inflater.inflate(R.layout.list_item_episode, parent,  false);

            view.setBackgroundResource(R.drawable.abs__list_selector_holo_light);
            return view;
        }

        @Override
        public void bindView(View view, final Context context, final Cursor cursor) {
            final String title = cursor.getString(EpisodesQuery.EPISODE_TITLE);
            final String episodeId = cursor.getString(EpisodesQuery.EPISODE_ID);
            final String time = cursor.getString(EpisodesQuery.EPISODE_PUBLISHED_AT);
            final String episodeUrl = cursor.getString(EpisodesQuery.EPISODE_URL);
            final int stateId = cursor.getInt(EpisodesQuery.EPISODE_STATE_ID);

                        ((TextView) view.findViewById(R.id.title)).setText(title);
                        ...... 
                }
} 
```

一些想法可能导致这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:30:15.240

我想我明白了。游标中的一列包含一些 blob 数据。当我从查询选择中删除此列时，它平滑地向上滚动。感谢所有的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:22:00.003

[如果 SimpleCursorAdapter closed() ，则 ListView 为空](https://stackoverflow.com/questions/7901578/listview-empty-if-simplecursoradapter-closed)。此链接可能会回答关闭光标的位置。如果它向下滚动顺利，我看不出向上滚动时冻结的原因。我很好奇你面临的问题。

# android - 将更改部署到 PhoneGap 移动应用标记而不部署到市场？

> ID：13126386
> 
> 赞同：-1
> 
> 时间：2012-10-29T17:09:39.280
> 
> 标签：android, ios, cordova, mobile, jquery-mobile

我想知道在不部署到每个（苹果和安卓）市场的情况下，对 PhoneGap + jQuery Mobile 应用程序进行更改的最佳方法是什么。我最近所做的大部分更改都严格针对标记，而不是添加 Phonegap 功能。我意识到如果我将 phoneGap 功能添加到标记的某个部分，这将不得不改变。
但是在一些严格标记的页面上，我如何才能单独交付该内容，这样我就不必每次都将更改部署到市场？提前致谢。

编辑：由于 ios 服务条款，这似乎是不可能的：Apples TOS - #2.7：[https ://developer.apple.com/appstore/resources/approval/guidelines.html](https://developer.apple.com/appstore/resources/approval/guidelines.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:41:19.763

（*如果我理解正确，您已经对现有 phoneGap 应用程序进行了一些标记更改 - 可能是新内容或布局，并且您想将这些更改推广到没有市场的个人手机？您还没有做任何不过功能上的变化。*）

不幸的是，这与您实现了重大功能更改完全相同。您需要重新部署并通过市场。

**然而，由于 PhoneGap 和 Web 技术的优点——可能值得实现某种形式的功能来动态加载新内容，以防止这个问题在未来再次出现。可以在应用程序初始化时进行简单的自动检查以检查新内容；或者一个简单的*“获取新内容”*按钮向外部服务器启动 AJAX 请求就足够了。**

**这意味着内容不能被硬编码到应用程序中——但是使用本地存储选项（即*webSQL*），您可以存储内容并在加载时检索它；然后只需在更新时更新存储。**

通过这样做，您将满足要求应用程序离线运行的任何准则，同时确保您可以随意将新内容推送到设备。您也不应该违反任何应用商店指南（据我所知）；尽管正如@ninjasense 在评论中提到的那样-您需要小心它从外部资源中拖动内容的事实*。它也给了你一个去市场更新的理由——毕竟，你现在已经添加了一个主要的新功能。;)

希望这可以帮助！

*如果您打算通过 iOS 进行营销，在任何情况下都不要将其称为更新应用程序的方法。那就是说；我注意到您实际上是针对 Android 的——这应该是可以接受的。主要问题是允许从外部源下载代码，您可能会在以后引入安全漏洞、糟糕的代码或错误。（这在您使用 PhoneGap 时是可能的，理论上您可以使用这种机制将 Javascript 推送到客户端手机）

Apple TOS #2.7 仅适用于您正在下载代码 - *“以任何方式或形式下载代码的应用程序将被拒绝”*；可以说您正在下载新内容 - 因为您没有添加其他功能或任何原生内容；您正在下载类似于网络浏览器的 HTML；即 Chrome 或 Safari 或任何社交网络应用程序。因此，为什么我会避免将任何更改称为更新；只是内容发生了变化 - 并强调您正在下载标记以显示内容的事实。

对于那些无法访问应用商店批准指南的人 - 这里有一个[公共 PDF](http://stadium.weblogsinc.com/engadget/files/app-store-guidelines.pdf)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T18:47:31.190

如果您从服务器提供内容并且您的标记更改不会影响本地应用程序（意味着不需要对应用程序进行代码更改并且标记更改是从后端提供的），那么您很好并且您没有违反任何条款。事实上，如果您必须更改应用程序，您将不得不重新部署，而且您显然无法违反条款。因此，似乎只有一种明显的方法可以做到这一点。

# android - 在 Eclipse 上配置 maven 以与 android 4.1.2 一起使用

> ID：13126392
> 
> 赞同：1
> 
> 时间：2012-10-29T17:09:58.690
> 
> 标签：android, eclipse, maven

有没有人在 Eclipse 上成功配置 Maven 来开发 Android 应用程序？我可以拿你的笔记来说明你是如何做到的吗？

我正在使用 ubuntu Natty Narwha、eclipse juno、Android 4.1.2。

我尝试使用以下链接上的注释无济于事：[http ://code.google.com/p/maven-android-plugin/wiki/EclipseIntegration](http://code.google.com/p/maven-android-plugin/wiki/EclipseIntegration)

具体错误：

[当我按照教程http://rgladwell.github.com/m2e-android/](http://rgladwell.github.com/m2e-android/)创建骨架 android-project 时，出现错误：

```
Unable to resolve target 'android-10' 
```

如果我更改为 ，我会得到同样的错误`android-14`，这是我的平台工具的版本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T02:47:35.723

这不是真正的解决方案，而是一种解释。因此，在@Ricardo Gladwell 坚持本教程是正确的之后，我决定在 Mac 上尝试一下。事实证明，一切都在 mac 上运行。那时我认为我的 Ubuntu 安装有比这更多的问题。

总之，本教程有效，但我的电脑无法正常工作。

谢谢，@Ricardo Gladwell。

# web - 加载内容的最佳方式是什么？

> ID：13126403
> 
> 赞同：0
> 
> 时间：2012-10-29T17:10:37.883
> 
> 标签：web, structure

现在，我网站的基本结构相当庞大。

我对php知之甚少，但我已经成功了。

所以，我想知道 - 加载内容的最佳方式是什么？

现在，我使用一些 include() 和 require() 将所有页面保存为 .php。

我将使用 php 模型完成并更新它，但我想确保我做对了。

所以.. 我将把我的关键字、描述、其他元数据链接到我的数据库中。这样看起来不那么忙碌。在我闯入我的庞大网站之前有什么智慧之言吗？

现在：

*   （文档标签/html/元/等）
*   anchor.php *加载 css/js 和其他生命体征
*   /头
*   header.php *包含body标签
*   [内容（将内联放在静态页面上）]
*   footer.php *包含

新版本更像

*   （文档标签）
*   php 将所有内容写入 header.php
*   打破内容仍然使用静态页面？？？
*   页脚.php

也许只有 30 多个单独的页面，每个页面只有几行，而不是动态生成页面？我希望内容易于编辑。

谢谢您的帮助！*（对不起，如果它完全令人困惑）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:20:43.447

即使在开发网站时，您也必须考虑：

*   保持你的代码干燥（不要重复自己）
*   将ridondant代码封装在一些默认结构中（作为面向编程的对象）

根据您的网站必须显示的内容，根据上述 2 条规则，选项（如您所说）“30 多个带有几行的单独页面”是最好的。

这让您可以“快速”编辑网站，例如，如果您想编辑标题，您必须只编辑一个 .php 文件，所有页面都会影响编辑。在其他情况下，如果您想编辑页面“X”的内容，您可以直接进入该页面并编辑内容。

记住：尝试为必须完成的工作实现最好的文件，例如（类似的东西）：

*   head.php（所有在 head 标签中的）
*   header.php（页面顶部）
*   menu.php（菜单）
*   banner.php，banner1.php（页面之间不同的东西，但本身作为横幅是静态的）
*   sidebar.php（侧边栏）
*   footer.php（页面底部）

这样做，在 4-5 要求/包含中，您可以简单地构建一个新页面。

否则尽量避免只重复使用一次的页面。

# php - pubnub 开发控制台在我公司的 Intranet 上不起作用，php 也不能发布

> ID：13126404
> 
> 赞同：0
> 
> 时间：2012-10-29T17:10:41.813
> 
> 标签：php, https, pubnub

我想在我的公司实施 pubnub（我目前正在开发一个工作流网站）。使用 SSL 和身份验证。在测试页面上，我使用 javascript 库用我的 id 订阅 pubnub，当我通过 javascript 发布时，回调工作得很好。从这个页面我有一个 php 页面的链接，我想用相同的 id 发布到同一个频道：

```
require('../scripts/pubnub/3.1/Pubnub.php');
$pubnub = new Pubnub( $publish_key, $subscribe_key );

## Get History

echo("Requesting History...\n");
 $messages = $pubnub->history(array(
'channel' => $channelName
'limit'   => 100
)); 
```

但几分钟后页面返回 500 错误。

我公司 Intranet 上的开发控制台不再工作。

有人对这个问题有任何想法吗？特别是关于解决方案！

也许我需要使用另一个 php web 服务器通过 php 发布？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:44:31.883

请在此处使用我们最新的 3.3 版本：

[https://github.com/pubnub/pubnub-api/tree/master/php/3.3](https://github.com/pubnub/pubnub-api/tree/master/php/3.3)

请务必使用 detailHistory() 而不是 history()，因为 history() 已被弃用。

此外，测试中以及 pubnubPlaintextTests.php 文件中提供了使用示例。

另外，我会在 Firefox 中打开一个 Web 控制台，在 Chrome 中打开一个到相同的键/通道：

www.pubnub.com/console

并确保您可以使用该配置进行双向通信——这应该可以排除您所在位置的任何类型的网络/防火墙问题。

# ocaml - 取决于上下文的标记含义

> ID：13126405
> 
> 赞同：1
> 
> 时间：2012-10-29T17:10:46.113
> 
> 标签：ocaml, ocamllex

我有一个奇怪的字符串语法，其中分隔符的含义取决于上下文。在以下示例输入中：

```
( (foo) (bar) ) 
```

结果是两个字符串的列表`["foo"; "bar"]`。外圆括号进入列表模式。然后，下一对括号分隔字符串。在字符串内部，平衡的括号对将被视为字符串的一部分。

现在，词法分析器根据全局变量决定返回什么`inside`。

```
{
  open Sample_parser
  exception Error of string
  let inside = ref false (* <= to be eliminated *)
} 
```

分隔符是括号。如果词法分析器遇到左括号，则

*   如果`inside`为*false*，它会发出一个 `Enter`令牌并`inside`设置为*true*。
*   如果`inside`为*true*，它将切换到字符串词法分析器，它将任何正确嵌套的括号对视为字符串的一部分。如果嵌套级别返回零，则将字符串缓冲区传递给解析器。

如果在字符串外遇到右括号，`Leave`则会发出一个标记并`inside`取消设置。

我的问题是：*如何在没有全局变量的情况下重写词法分析器`inside`*？

Fwiw 我使用 menhir，但对于 ocamlyacc 也是如此。（对不起，如果这听起来很混乱，我真的是 yacc/lex 方法的新手。我可以表达以上所有内容而不用考虑作为 PEG，但我还没有习惯在心理上将词法分析器和解析器分开。请随意指出解决代码的其他问题！）

简单示例：*sample_lexer.mll*

```
{
  open Sample_parser
  exception Error of string
  let inside = ref false (* <= to be eliminated *)
}

let lpar  = "("
let rpar  = ")"
let ws    = [' ' '\t' '\n' '\r']

rule tokenize = parse
  | ws    { tokenize lexbuf }
  | lpar  { if not !inside then begin
              inside := true;
              Enter
            end else begin
              let buf = Buffer.create 20 in
              String (string_scanner
                        (Lexing.lexeme_start lexbuf)
                        0
                        buf
                        lexbuf)
            end }
  | rpar  { inside := false; Leave }
and string_scanner init depth buf = parse
  | rpar  { if depth = 0 then begin
              Buffer.contents buf;
            end else begin
              Buffer.add_char buf ')';
              string_scanner init (depth - 1) buf lexbuf end }
  | lpar  { Buffer.add_char buf '(';
            string_scanner init (depth + 1) buf lexbuf }
  | eof   { raise (Error (Printf.sprintf
                           "Unexpected end of file inside string, pos %d--%d]!\n"
                           init
                           (Lexing.lexeme_start lexbuf))) }
  | _ as chr { Buffer.add_char buf chr;
               string_scanner init depth buf lexbuf } 
```

*sample_scanner.mly*:

```
%token <string> String
%token Enter
%token Leave

%start <string list> process

%%

process:
  | Enter lst = string_list Leave { lst }

string_list:
  | elm = element lst = string_list { elm :: lst }
  | elm = element                   { [elm]      }

element:
  | str = String { str } 
```

*主要.ml*：

```
open Batteries

let sample_input = "( (foo (bar) baz) (xyzzy) )"
(*                  EibssssssssssssseibssssseiL
 * where E := enter inner
 *       L := leave inner
 *       i := ignore (whitespace)
 *       b := begin string
 *       e := end string
 *       s := part of string
 *
 * desired result: [ "foo (bar) baz"; "xyzzy" ] (type string list)
 *)

let main () =
  let buf = Lexing.from_string sample_input in
  try
    List.print
      String.print stdout
      (Sample_parser.process Sample_lexer.tokenize buf);
    print_string "\n";
  with
  | Sample_lexer.Error msg   -> Printf.eprintf "%s%!" msg
  | Sample_parser.Error      -> Printf.eprintf
                                    "Invalid syntax at pos %d.\n%!"
                                    (Lexing.lexeme_start buf)

let _ = main () 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T18:20:39.707

您可以将状态作为参数传递给`tokenize`. 它仍然必须是可变的，但不是全局的。

```
rule tokenize inside = 解析
  | ws { 在 lexbuf 中标记化 }
  | lpar { 如果不是 !inside 则开始
              里面：=真；
              进入
            结束否则开始
              让 buf = Buffer.create 20 in
              字符串（string_scanner
                        (Lexing.lexeme_start lexbuf)
                        0
                        缓冲区
                        lexbuf)
            结尾 }
  | rpar { 里面 := false; 离开 }

```

你调用解析器如下：

```
Sample_parser.process (Sample_lexer.tokenize (ref false)) buf

```

# jquery - 为二维区域中不同大小的非重叠四边形生成随机位置

> ID：13126408
> 
> 赞同：3
> 
> 时间：2012-10-29T17:10:50.953
> 
> 标签：jquery, algorithm, random

我正在寻找一种算法来为二维区域中不同大小的非重叠四边形生成随机位置。一个例子可以是： ![在此处输入图像描述](../Images/855a39503171d77f90b2dda09a5c596f.png)

四边形的随机大小介于 a *a 和 b* b 之间，并且它们平行于 xy 坐标。我正在使用 JQuery (javaScript)。

--如果我为每个矩形生成两个独立的随机数（用于 x 和 y 坐标），我必须检查此位置的新矩形是否与其他现有矩形重叠。如果是，则忽略此选择并生成一对新数字（新位置）。因此，也许这不是一个好的算法——

有人有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:42:24.503

您可以使用四叉树或 kd-tree 来细分曲面。空间索引也可以工作。寻找空间填充曲线和空间索引以及quadkey或geohash如何找到象限。也许 r-tree 也很好，因为空间填充曲线非常复杂。这是 bing 地图四键示例：http: [//msdn.microsoft.com/en-us/library/bb259689.aspx](http://msdn.microsoft.com/en-us/library/bb259689.aspx)。然后你可以随机使用广度优先搜索。

# java - Encog：BasicNetwork：没有预先构建的数据集的在线学习

> ID：13126413
> 
> 赞同：4
> 
> 时间：2012-10-29T17:11:00.003
> 
> 标签：java, machine-learning, neural-network, encog

我正在尝试将 encog 库用作强化学习问题的函数逼近器。更准确地说，我正在尝试启动并运行一个多层感知器（BasicNetwork）。由于我的代理会根据我选择的任何 RL 算法以某种方式探索世界，因此我无法预构建任何 BasicNeuralDataSet，如[XOR 示例](http://www.heatonresearch.com/wiki/Upgrade_to_Encog_3.0_%28Java%29)中所示。[可能](http://www.heatonresearch.com/node/1807)，我必须使用 pause() 和 resume() 函数，但由于我找不到任何关于这些的文档或示例，所以我对如何使用这些功能有些迷茫（如果它们甚至在我的版本中工作的话。我不太懂在阅读第二个链接中问题的答案后确定）。

我正在使用 Java 和 encog-core-2.5.3 jar。我目前的方法如下所示：

```
BasicNetwork network = new BasicNetwork();
network.addLayer(new BasicLayer(null, true,2));
network.addLayer(new BasicLayer(new ActivationTANH(), true,4));
network.addLayer(new BasicLayer(new ActivationTANH(), true,1));
network.getStructure().finalizeStructure();
network.reset();

TrainingContinuation cont = null;
double error = 0;

do {
    int rnd = random.nextInt(trainInputs.length);
    NeuralDataSet trainingSet = new BasicNeuralDataSet(
        new double[][] { trainInputs[rnd] },
        new double[][] { trainOutputs[rnd] });

    Backpropagation train = new Backpropagation(network, trainingSet);

    // train the neural network
    if (cont != null) {
        train.resume(cont);
    }

    train.iteration();
    cont = train.pause();

    error = train.getError();
} while (error > 0.01); 
```

这显然是一个最小的例子，我只是从玩具样本（XOR）中抽取随机数据点。发生的情况是 MLP 不收敛。日志记录向我显示完全随机的错误，所以我假设培训师正在被重置并且我的暂停/恢复方法没有正确实施。

* * *

PS：由于我不受 Encoq 约束，但可以使用任何框架，因此我也很欣赏满足我要求的示例代码。到目前为止，我尝试过 Weka 和 Neuroph，但两者似乎都缺乏真正的在线学习，只要有新样本可用就可以触发训练（也必须可以在任何时候对样本进行分类）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-20T20:01:47.510

抱歉回复慢。基本上，听起来您要求进行在线培训。也就是说，您只需提出一个案例，神经网络权重就会立即更新。这样就不需要创建整个训练集，您只需根据需要进行训练。不幸的是，Encog 对此没有很好的支持。它已经成为一个常见问题，我计划在下一个版本中添加它。

目前，您可以做到的唯一方法是创建一个包含单个项目的训练集，然后训练一次迭代。

**EDIT** 从 Encog 3.2 开始添加在线培训。有关更多信息，请参阅此常见问题解答。

[http://www.heatonresearch.com/faq/5/3](http://www.heatonresearch.com/faq/5/3)

# java - 浏览 JSTL 中的二维数组列

> ID：13126421
> 
> 赞同：2
> 
> 时间：2012-10-29T17:11:27.130
> 
> 标签：java, arrays

我有一个让我头疼的小问题:(我的课堂上有一个 2D 数组，我通过请求将它发送到我的 jsp 页面，我必须逐列遍历它！我知道我可以做到

```
 <c:forEach items="${board.cells}" var="row">
     <tr>
       <c:forEach items="${row}" var="cell">
        <td><c:out value="${cell}"/></td>
       </c:forEach>
     </tr>
    </c:forEach> 
```

并按行迭代，但我找不到一种方法，只能按列。我希望你们能理解我想要做什么，并能帮助我。来自哥伦比亚的问候，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T16:58:10.143

例如，您只能从控制器传递数组：

```
addModu..("board",array[][]); // exemple pass only array 
```

现在你可以试试这个：

```
 <c:forEach items="${board}" var="row">
     <tr>
       <c:forEach items="${row}" var="cell">
        <td><c:out value="${cell}"/></td>
       </c:forEach>
     </tr>
    </c:forEach> 
```

因为你已经在传递数组，所以 forEach 迭代数组上的每个位置

我认为您的问题是如何传递参数...

好运

# java - 矩阵忽略位置或旋转

> ID：13126422
> 
> 赞同：0
> 
> 时间：2012-10-29T17:11:39.817
> 
> 标签：java, android, bitmap, surfaceview, android-canvas

我在画布上绘制位图。我试图让这个位图旋转并改变位置。

对于使用此代码的即时消息：

```
 matrix.setTranslate(pos_x, 15);
 matrix.setRotate(30);
 canvas.drawBitmap(bitmap, matrix,paint); 
```

所有这一切都在一个循环中，因此变量“pos_x”将增加。

但似乎矩阵不会接受这两条线，setTranslate 和 setRotate。当我注释掉 setTranslate 时，位图会旋转。当我注释掉旋转时，位图正在移动。但他们不会一起工作！

我该怎么办？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:18:06.273

问题很可能在于“集合”一词的含义。

与其设置 aka 覆盖矩阵，不如逐步调整它：要么先 setTranslate 然后 Rotate，要么 setRotate 然后 Translate。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-04T14:04:52.940

对于未来的 Google 员工，

以 setXXX 开头的矩阵命令将始终重置矩阵。因此，如果您发送 setRotate 然后发送 setTranslate，setRotate 将被重置并且不会应用。

幸运的是，您必须使用其他命令集：preXXX 和 postXXX

所以你可以做 preRotate 然后 setTranslate 来实现你想做的事情。

你甚至可以：

```
matrix.preRotate(90);
matrix.setTranslate(120,120);
matrix.postScale(2.0f); 
```

# git - Git & SSH - 通过 SSH 登录到生产服务器时从本地存储库中提取

> ID：13126426
> 
> 赞同：0
> 
> 时间：2012-10-29T17:11:56.850
> 
> 标签：git, production, repository

我的代码仓库位于本地工作站的裸目录中。当我通过 SSH 登录到我的生产服务器时，我想从我的生产服务器中提取这个 repo。

`Production server => PULL from local workstation repo`

我该怎么做？

有[五种方法可以设置存储库以从](https://stackoverflow.com/questions/978052/githow-can-i-make-my-local-repository-available-for-git-pull). 似乎 SSH 和 Git 协议是我唯一的选择，但我被卡住了。我可以通过 SSH 从本地工作站连接到生产服务器，但我该如何做相反的事情呢？

编辑：简单地说，我如何将本地工作站添加为生产服务器上的远程仓库？

**回答**仅适用于可能有类似问题的其他人。您可以按照下面接受的答案进行操作。或者您可以更改初始设置。将存储库从本地存储库更改为云中的远程私有存储库。由于只需要 SSH，因此它变得更加容易。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:19:23.540

这有点倒退。你应该先推送到回购。然后登录并使用新版本执行您需要的操作。你不能拉到一个裸仓库。它没有工作树。拉取是 fetch 和 merge 或 rebase 组合。后者需要一个工作树来完成。

如果您在服务器上做一些工作，您可以在裸机旁边的远程机器上设置一个非裸机，并在那里进行任何操作。

# android - RelativeLayout 无法正常工作 Android

> ID：13126429
> 
> 赞同：1
> 
> 时间：2012-10-29T17:12:01.997
> 
> 标签：android, android-layout

我有下一个问题：我经常使用RelativeLayout，就像Android 文档告诉我的那样。但是，几天以来，我不明白为什么，这不再起作用了：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:background="@drawable/background"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Button
        android:id="@+id/boton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="Button" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/boton"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="60dp"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="#000" />

</RelativeLayout> 
```

这是我的布局，很简单。因此，根据这个，textView 应该在按钮下方，但是，它却出现在按钮上方！

![这是结果的图片](../Images/51a1ee063c92c4bb7cefbfc47c724127.png).

Сan任何人解释我会发生什么？

编辑：问题不在于我尝试在设备上运行它，而是当我在 ADT Plugin for Eclipse 的图形布局上看到它时出现问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T04:54:34.020

我试试这段代码，它工作正常。

如果您的一方无法正常工作，请尝试清理构建您的项目，然后运行。

如果仍然有问题，那么试试这个

```
android:layout_below="@+id/boton" 
```

用这个删除上面的行

```
android:layout_below="@id/boton" 
```

因为“+”创建了对 R.java 文件的新引用

这可能是问题所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-09T19:44:15.963

尝试从代码中删除以下行 android:layout_marginTop="60dp"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T08:54:00.003

我正在尝试运行它，现在，我知道出了什么问题。

在终端中运行应用程序时，它工作正常，当我尝试在 Eclipse 上的 ADT 插件的图形布局上看到它时，问题就来了！有同样问题的人吗？？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T17:27:14.970

`layout_below`从 TextView 的属性中取出“+”号。'+' 告诉它定义一个新的 id。如果没有“+”，它应该是指现有的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T17:25:06.273

我认为您的问题是`drawable`背景问题，因为我在您的预览中没有看到图像。

遇到此问题会给您一个问题，`build error`因此预览不会显示其当前状态的布局（它会恢复到最后一次成功的构建）。删除该行并保存以查看预览或检查以确保您`drawable`的文件夹中有标题为“背景”的图像

试试这个，不用drawable来检查它是否适合你：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Button
        android:id="@+id/boton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="Button" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/boton"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="60dp"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="#000" />

</RelativeLayout> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-29T17:27:02.933

在相对布局的末尾添加`</RelativeLayout>`以关闭它。

# php - MySQL 比 Redis 快。我在这里错过了什么吗？

> ID：13126431
> 
> 赞同：20
> 
> 时间：2012-10-29T17:12:09.627
> 
> 标签：php, mysql, redis

我一直在考虑在一个使用大量写入的项目中使用 Redis。

因此，在我的服务器上设置好之后，我使用 Predis 创建了一个简单的 PHP 脚本，并带有一个简单的循环来添加记录。我还创建了第二个执行类似操作的脚本，仅在使用 PHP 的 MySQLi 的 MySQL 表 (InnoDB) 上。

我运行了一个 10k 循环、一个 100k 循环和一个 500k 循环，并且 MySQL 每次都击败 Redis。事实上，我添加的记录越多，MySQL 与 Redis 相比就越快。

Redis 周围有很多嗡嗡声（炒作？），我想相信我在这里遗漏了一些东西。

请教育我:)

谢谢！

这是我的 Predis 代码：

```
for ($i=0; $i<100000; $i++) {
    $predis->set('key'.$i, $i);
} 
```

这是我的 MySQLi 代码：

```
for ($i=0; $i<100000; $i++) {
    mysqli_query($db, "INSERT INTO test (`key`, `value`) VALUES ('key$i', $i)");
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-29T17:19:59.680

## 将predis与mysqli进行比较是不合适的

[mysqli 扩展](http://php.net/manual/en/book.mysqli.php)- 是一个扩展，而predis[是](https://github.com/nrk/predis)一个 php 客户端库。即，虽然 mysqli 是编译代码，但 predis 只是普通的 php -[扩展更快](https://stackoverflow.com/questions/5992800/php-using-c-extension-will-be-faster)。

问题中显示的那种基准主要显示了 PHP 代码与扩展的性能损失。

## 比较喜欢和喜欢

如果您想比较写入性能 - 您需要与[php redis 扩展](https://github.com/nicolasff/phpredis)进行比较。

# jquery - jQuery Mobile 网站 - 隐藏 Google Analytics 跟踪代码

> ID：13126432
> 
> 赞同：0
> 
> 时间：2012-10-29T17:12:12.810
> 
> 标签：jquery, mobile, google-analytics

我开发了一个带有来自 Themeforest 的“Mobilize”移动网站主题的移动应用程序，它使用 jQuery。我将 Google Analytics for Mobile Websites 代码插入到我要跟踪的每个页面中，但问题是在每个页面加载时，代码会显示一瞬间。见下文：

[http://m.eyemagic.net](http://m.eyemagic.net)

我试过隐藏代码，但没有运气。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:18:22.513

为什么代码在`<div>`标签中？

```
<div style="display:hidden;">
$('[data-role=page]').live('pageshow', function (event, ui) {
    //...
});
</div> 
```

那是行不通的。因为首先，它使代码在页面上成为实际可呈现的文本，其次，它*不会实际执行*，所以这段代码什么也不做。

将该代码放在`<script>`标签中以解决这两个问题。

加载页面的样式表后，实际页面内容将位于此代码 div 的顶部，将其遮盖以使其无法被看到。

此外，`display: hidden`是无效的 CSS。您可能想要`display: none`，它将隐藏它并从页面流中删除它。您可能混淆了`visibility: hidden`隐藏元素但仍会占用页面空间的规则。

但无论如何，如果这实际上是一个脚本标签，那么样式根本不重要。

# sql - 在基于元组的检查中，如何引用我当前在子查询中检查的元组？

> ID：13126434
> 
> 赞同：1
> 
> 时间：2012-10-29T17:12:14.833
> 
> 标签：sql, tuples, check-constraints

这是我目前正在使用的架构：

```
Studio(name, address, presC#) 
```

我正在编写一个基于元组的检查，其中没有两个工作室可以有相同的地址。我想写这样的东西：

```
ALTER TABLE Studio ADD CONSTRAINT NoSameAddress 
    CHECK(address NOT IN (SELECT address
                          FROM Studio
                          WHERE 'the outer tuple name attribute' <> Studio.name)); 
```

如何引用属于当前正在检查的元组的名称属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T03:26:10.800

对 使用唯一约束`address`：

```
ALTER TABLE Studio ADD CONSTRAINT UNQ_ADDR UNIQUE(address) 
```

# asp.net - 通过重写的 ASP.NET 虚拟子域

> ID：13126438
> 
> 赞同：0
> 
> 时间：2012-10-29T17:12:45.617
> 
> 标签：asp.net, routes, rewrite, subdomain

我将让页面可以被子域访问，如下所示：

[http://product12.domain.com](http://product12.domain.com) 而不是 [http://domain.com/?productid=12](http://domain.com/?productid=12)

我怎样才能做到这一点？是否可以通过 ReWrite 或 RouteMap 以编程方式创建子域？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T04:08:51.340

根据定义，子域是 DNS 的一部分。您必须在域管理系统中创建适当的子域。我可能错了，但我不认为 URL 重写应该用于主机重定向；您必须设置路由以捕获查询字符串并重定向到另一台主机，或者可能使用 IIS 来执行此操作。

# maven - 多个 Maven 生成源

> ID：13126440
> 
> 赞同：1
> 
> 时间：2012-10-29T17:12:56.693
> 
> 标签：maven, maven-plugin

我有两个生成 Java 文件的插件。一个从 WSDL 文件生成代码，另一个从 XSD 模式文件生成代码。仅生成模式中的代码。

如果每个插件都有单独的 Eclipse 项目，那么所有源代码都会正确生成。但是我想在一个项目中同时使用两个插件来生成代码。

这是我的pom文件：

```
<plugins>

<!-- generate Java classes from schema files (binding files optional) -->
<plugin> 
    <groupId>org.jvnet.jaxb2.maven2</groupId>
    <artifactId>maven-jaxb2-plugin</artifactId>
    <version>0.8.2</version><!--$NO-MVN-MAN-VER$ -->
    <executions>
        <execution>
            <id>xsd_phase</id>
            <phase>generate-sources</phase>
            <goals>
                <goal>generate</goal>
            </goals>
            <configuration>
                <bindingDirectory>${project.basedir}/xsd/</bindingDirectory>
                <schemaDirectory>${project.basedir}/xsd/</schemaDirectory>
                <generateDirectory>${project.basedir}/target/src/generated/java/</generateDirectory>
                <generatePackage>com.abc.xyz.jaxb</generatePackage>
                <forceRegenerate>true</forceRegenerate>
                <episode>false</episode>
                <removeOldOutput>true</removeOldOutput>
            </configuration>
        </execution>
    </executions>
</plugin>

<!-- generate Java classes from wsdl files -->
<plugin> 
    <groupId>org.jvnet.jax-ws-commons</groupId>
    <artifactId>jaxws-maven-plugin</artifactId>
    <version>2.1</version>
    <executions>
        <execution>
            <id>wsdl_phase</id>
            <phase>generate-sources</phase>
            <goals>
                <goal>wsimport</goal>
            </goals>
            <configuration>
                <encoding>UTF-8</encoding>
                <packageName>com.abc.xyz.ws</packageName>
                <wsdlDirectory>${project.basedir}/wsdl/</wsdlDirectory>
                <sourceDestDir>${project.basedir}/target/src/generated/java/</sourceDestDir>
                <xnocompile>false</xnocompile>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-29T14:30:29.157

只需将两者都包含在`build/plugins`项目的配置中。格式中没有任何内容可以`POM`防止将来自不同插件的两个不同目标绑定到同一阶段（`generate-sources`在您的情况下）。

唯一需要注意的是，当两个执行绑定到同一阶段时，它们将按照它们在 POM 中定义的顺序执行。换句话说，如果你要将你的代码片段复制粘贴到 POM 中，在 期间`generate-sources`，`xsd_phase`将首先运行，然后是`wsdl_phase`.

# ios - UITableViewCell 中的 UIButton 在 iOS 5x 中没有响应但在 iOS 6 中响应

> ID：13126447
> 
> 赞同：1
> 
> 时间：2012-10-29T17:13:14.010
> 
> 标签：ios, ios5, uitableview, uibutton, ios6

我有一个按钮，我正在以编程方式添加到 UITableViewCell 中，它的行为非常奇怪。

在 iOS 6 中，它完全按预期工作。在 iOS 5x 中，它只响应 touch-down 事件而不响应 touch-up-inside 事件。甚至在你按住一两秒后才会触发着陆事件。

```
//Create UIButton
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
[button setBackgroundImage:buttonImage forState:UIControlStateNormal];
[button addTarget:self action:@selector(buttonTap) forControlEvents:UIControlEventTouchUpInside];
button.frame = CGRectMake(0, 0, 100, 100);

//Add to UITableViewCell
UITableViewCell *footerCell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"FOOTER_CELL"] autorelease];
[footerCell.contentView addSubview:button];
//Also tried this with just [footerCell addSubview:button];

//Fire Action
- (void)buttonTap {
    NSLog(@"Tap");
} 
```

相当标准的问题代码。事实上，我使用这个确切的代码在我的应用程序中的所有地方制作按钮，它们都可以工作，除了在表格视图中。关于细胞的结构，一定有一些我不理解的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T18:57:14.563

想通了。很久以前，出于另一个原因，我将 UITapGestureRecognizer 放在了桌面上。它干扰了按钮的功能。多谢你们。（和女孩）

# php - IE10、Iframe 和 PHP SESSION 变量

> ID：13126449
> 
> 赞同：0
> 
> 时间：2012-10-29T17:13:28.753
> 
> 标签：php, iframe, session-variables, internet-explorer-10

我在网页上有一个带有验证码的表单，这个验证码正在使用（就像我认为的所有验证码一样）SESSION 变量来存储值。此表单适用于 IE7-8 和 9，也适用于 FF、Chrome、Safari 等，但使用**IE10**我有问题。如果在IE10的网页上直接调用该表单，验证码效果很好，但如果从其他网站的**IFRAME**调用该表单，则不会存储SESSION变量。在这种情况下无法使用 SESSION 变量。

任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:15:54.757

iframe 受制于其内容的原始站点。由于您是从其他站点加载验证码/表单，因此该框架中设置的任何 cookie 都被锁定到该其他站点。

例如，您的网站是 example.com。iframe 来自 foobar.net。在 iframe 中设置的任何 cookie 都仅限于 foobar.net，并且不会对 example.com 可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:17:11.950

首先，您混淆了会话和 cookie。会话存储在服务器上，cookie 存储在客户端。如果你有一个会话，你会希望有一个 cookie 来识别你的会话。所以你真的在谈论饼干。

不允许您从其他域获取 cookie。它违反了同源策略。

如果您控制两个域，则可以设置资源共享（CORS Cross-Origin-Resource-Sharing），但这并不容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-01T20:35:52.000

这是 IE10 中的一个已知错误。请参阅[错误报告](https://connect.microsoft.com/IE/feedback/details/792123/cookie-not-sent-during-ajax-call-of-a-page-inside-an-iframe#details)。

# c# - ORM中的对象映射/关系

> ID：13126450
> 
> 赞同：0
> 
> 时间：2012-10-29T17:13:34.087
> 
> 标签：c#, asp.net, linq, object, relation

我有一个如下对象，我从数据库中填充它，然后为了获取其他对象的关系，我只使用 clnt.cl.tolist() 这将在 cl 表中获取与客户端相关的所有内容：

```
Client clnt = Manager.Get_ByID(Id);
List<Cl> lstCl = clnt.Cl.ToList(); 
```

现在，如果我有一个列表作为第一个对象，我该怎么做：

```
List<Client> clnt = Manager.Get_ListByClientID(Id);
List<Cl> lstCl = ??? 
```

**还 ：：**

在第二个列表中，如何使用 linq 仅选择一条记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:34:53.463

我不明白它在做什么`List<Client> clnt = Manager.Get_ListByClientID(Id);`，但我的意思是你需要这样的东西

```
List<Cl> lstCl = clnt.SelectMany(c=>c.Cl.ToList()).ToList(); 
```

# php - 错误！Symfony2 与 KNP Snappy Bundle 和 WKHTML2PDF

> ID：13126451
> 
> 赞同：1
> 
> 时间：2012-10-29T17:13:43.090
> 
> 标签：php, symfony, runtime, wkhtmltopdf

当我去`/fileDownload`我收到 500 内部服务器错误 - RuntimeException：

> 进程因“0”信号而停止。

控制器动作：

```
public function fileAction()
{
    $html = $this->render('MyBundle:Downloads:file.html.twig', array(
    'fileNumber'  => '1234'
    ));

    return new Response(
        $this->get('knp_snappy.pdf')->getOutputFromHtml($html),
        200,
        array(
            'Content-Type'          => 'application/pdf',
            'Content-Disposition'   => 'attachment; filename="file.pdf"'
        )
    );
} 
```

我已经为 WKHTMLTOPDF 使用了终端命令，它已经成功生成了 PDF。它只是在 Symfony2 应用程序中不起作用。

在我的 config.yml 中：

```
knp_snappy:
    pdf:
        enabled:    true
        binary:     /usr/local/bin/wkhtmltopdf
        options:    [] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:19:00.463

我假设 Symfony 在某个阶段发出了 exec() 。您需要获得返回的确切命令行错误。它在终端会话中为您工作的事实并不一定意味着当不同的用户/进程正在运行它时它会工作。

检查 wkhtmltopdf 上的权限，确保 apache 或运行您的 Web 服务器的任何人都有权运行该命令。

另外，请查看 [wkhtmltopdf: cannot connect to X server](https://stackoverflow.com/questions/9604625/wkhtmltopdf-cannot-connect-to-x-server)以及此处的第一篇文章：http: [//geekisland.org/index.php ?m=05&y=11&entry=entry110518-114630](http://geekisland.org/index.php?m=05&y=11&entry=entry110518-114630)

X Server 需要运行 wkhtmltopdf 的某些构建，并且在通过 cron 或从 apache 进程中运行时不存在。如果是这种情况，您需要使用上面第一个链接中的 bash 包装器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T03:35:48.640

确保 wkhtmltopdf 确实在您指定的文件夹中，并具有正确的权限：/usr/local/bin/wkhtmltopdf

我成功地将 KNP Snappy Bundle 与 Symfony 2.0 一起使用，在生成 html 时尝试使用 RenderView 而不是渲染（检查我的代码是否有效）：

控制器：

```
$html = $this->renderView('YOPYourOwnPoetBundle:thePoet:poemPDF.html.twig', array(
                'poem'  => $customizedPoem,
                'fontType' => $fontType,
                'fontSize' => $formData['fontSize'],
                'fontWeight' => $fontWeight,
                'fontStyle' => $fontStyle,
            ));
return new Response(
                $this->get('knp_snappy.pdf')->getOutputFromHtml($html),
                200,
                array(
                    'Content-Type'          => 'application/pdf',
                    'Content-Disposition'   => 'attachment; filename="'.$session->get('poemTitle').'.pdf"',
                )
            ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-02T16:55:31.503

我有同样的问题，我终于解决了，我的建议是如果你`wkhtmltopdf`从你的操作系统 repos 安装 lib 然后删除它，然后从谷歌代码网站下载静态版本，不要使用版本 11rc，使用版本 9静态库，它是与我一起工作的库。

[http://code.google.com/p/wkhtmltopdf/downloads/list](http://code.google.com/p/wkhtmltopdf/downloads/list)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-10T13:43:50.647

看起来 selinux 阻止了你的命令，我曾经遇到过同样的问题，但我通过禁用 SELinux 解决了它，现在我可以使用 wkhtmltopdf+php 生成 pdf 文件。

```
exec("/usr/local/bin/wkhtmltopdf http://www.google.com /var/www/html/google.pdf"); 
```

要禁用 selinux run `setenforce 0`，请再试一次，看看它是否有效。重新启用它`setenforce 1`

但是禁用 selinux 并不是最好的解决方案，您需要使用 audit2allow 对其进行扩展，它会自动创建一个自定义策略模块来解决此问题，如果尚未安装，请先安装 audit2allo

```
yum -y install policycoreutils-python
grep httpd_t /var/log/audit/audit.log | audit2allow -m httpdlocal > httpd.te
checkmodule -M -m -o httpdlocal.mod httpd.te
semodule_package -o httpdlocal.pp -m httpdlocal.mod
semodule -i httpdlocal.pp 
```

再试一次，看看它是否有效

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-12T12:13:25.740

我在使用 wkhtmltopdf 的相同场景中遇到了同样的问题。我摆脱了以下命令：

setsebool httpd_execmem on

# file - 如何替换 .m matlab 文件中的单个值？

> ID：13126455
> 
> 赞同：0
> 
> 时间：2012-10-29T17:13:50.143
> 
> 标签：file, matlab, file-io

我有一个 .m 文件，其中包含一个带有一些矩阵的结构：

```
%mymatfile.m

function [mymatrix,anothermatrix] = mymatfile;

mymatrix = [
1   2   0.0010  0.0010  0.0000  2.0000  2.0000  2.0000  1   0   1
2   3   2.0014  0.0007  0.0000  0.5000  0.5000  0.5000  0   0   1
3   4   0.0301  0.0001  4.0000  0.5000  0.5000  0.5000  1.16    0   1
4   5   0.0791  0.0450  0.0000  0.5000  0.5000  0.5000  0   0   1
5   6   1.0482  0.0233  0.0000  0.5000  0.5000  0.5000  0   0   1
5   7   7.5130  0.0467  0.0000  0.5000  0.5000  0.5000  0*  0   1
7   8   9.0161  0.0008  0.0000  0.5000  0.5000  0.5000  0   0   1
7   9   0.9070  0.2310  0.0000  0.5000  0.5000  0.5000  0   0   1
];

anothermatrix = [
2   0   0   3   0   10  0               
9   0   0   3   0   10  0   
%]; 
```

如何仅更改加星标的值 (mymatrix(3,9)) 并保存文件，同时保留其结构/格式？我需要从另一个 matlab 脚本执行更新。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T17:30:12.117

您可以将 的条目保存`mymatrix`在文本文件中，例如`mymatrix_text`.

然后你让你的函数读取那个文本文件，即

```
%mymatfile.m

  [mymatrix,anothermatrix]   = function get_my_matrices()

  fid = fopen(mymatrix_text);

  mymatrix = fscanf(fid, '%g ');

  fclose(fid);

  % anothermatrix =  %% you can do the same above..

  end 
```

现在，如果您需要修改矩阵，您应该只修改文本文件 - 这更容易并且不涉及更改`.m`文件。

（例如，您可以创建另一个函数来读取`mymatrix_text`和更改所需的值）。

* * *

这种方法对我来说看起来更健壮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:22:24.607

用一个数字代替旧的数字。这些字段似乎是制表符分隔的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T11:51:29.320

这是我最后的做法（注意这`S`是用于更新文件的值）：

```
fid = fopen('mymatfile.m')  % open settings file
fseek(fid,1196,-1)      % set read position
Line = fgets(fid)       % read in line
Refline = Line          % set reference for search and replace later
Line(47:51) = S         % update specific characters in the line with new setting
fclose(fid)             % close file
wholefile = fileread('test.m')                  % read in entire file
newfiledata = strrep(wholefile,Refline,Line)    % replace line
fid2 = fopen('mymatfile.m','w')                 % open file to write
fprintf(fid2,'%s',newfiledata)                  % save to file
fclose(fid2) 
```

在此处的帮助下：[http://www.mathworks.com/matlabcentral/answers/7066]。

# sql - 没有任何第三方工具的 EDI 文件

> ID：13126456
> 
> 赞同：0
> 
> 时间：2012-10-29T17:13:57.670
> 
> 标签：sql, ssis

我正在获取如下所示的 EDI 文件，我需要对其进行处理，并且我还需要维护主键、外键。

```
TH*4.2*857463*01**20091015*1045*P**~~IS*7564*ACME 
PHARMACY~PHA*1234567890~PAT*MA*06*987544****SMITH*JOHN****1234 MAIN 
ST**SOMEWHERE*MA*54356**19500101*M*01*01*INDIA**BURGER~ 
```

这里的列分隔符是 * ，如果没有提供值，他们也会放 *。

我需要从

```
TH*4.2*857463*01**20091015*1045*P**~~ 
```

通过分隔字段，放入 1 个表中。

所以它会是

```
th01 th02 th03 th04 th05 th06 th07 th08 th09 th10
TH 4.2 857163 01 *(无价值) 20091015 1045 p *(无价值) ~~

```

IS*7564*ACME PHARMACY 到另一个表中，依此类推。

我不能使用第三方工具，因为我不能拥有 xml 文件

有什么帮助吗？

好的。

这是我的 vb.net 代码

公共枚举段 TH PHA PAT IS1 结束枚举

```
Dim arrLine As String()
Dim segmentcode As String
Dim counter As Integer
Dim linenumber As Integer = 1
Dim segmenetsequence As Hashtable = New Hashtable()
Dim setid As Guid = Guid.NewGuid()

Public Overrides Sub Input0_ProcessInputRow(ByVal Row As Input0Buffer)

    arrLine = Row.LineText.Split("*"c)

    segmentcode = SegmentValue(arrLine, 0)
    Row.LineNumber = linenumber

    Row.Setid = setid

    counter = arrLine.Length
    linenumber += 1

    Select Case (segmentcode.ToUpper())

        Case Segments.TH.ToString.ToUpper()
            Row.TH01 = SegmentValue(arrLine, 1)
            Row.TH02 = SegmentValue(arrLine, 2)
            Row.TH03 = Convert.ToInt32(SegmentValue(arrLine, 3))
            Row.TH04 = SegmentValue(arrLine, 4)
            Row.TH05 = Convert.ToDateTime(SegmentValue(arrLine, 5))
            Row.TH06 = SegmentValue(arrLine, 6)
            Row.TH07 = SegmentValue(arrLine, 7)
            Row.TH08 = Convert.ToInt32(SegmentValue(arrLine, 8))
            Row.TH09 = SegmentValue(arrLine, 9)

        Case Segments.IS1.ToString.ToUpper()
            Row.IS01 = SegmentValue(arrLine, 1)
            Row.IS02 = SegmentValue(arrLine, 2)
            Row.IS03 = SegmentValue(arrLine, 3)

        Case Segments.PHA.ToString.ToUpper()

            Row.PHA01 = SegmentValue(arrLine, 1)
            Row.PHA02 = SegmentValue(arrLine, 2)
            Row.PHA03 = SegmentValue(arrLine, 3)
            Row.PHA04 = SegmentValue(arrLine, 4)
            Row.PHA05 = SegmentValue(arrLine, 5)
            Row.PHA06 = SegmentValue(arrLine, 6)
            Row.PHA07 = SegmentValue(arrLine, 7)
            Row.PHA08 = SegmentValue(arrLine, 8)
            Row.PHA09 = SegmentValue(arrLine, 9)
            Row.PHA10 = SegmentValue(arrLine, 10)
            Row.PHA11 = SegmentValue(arrLine, 11)
            Row.PHA12 = SegmentValue(arrLine, 12)

        Case Segments.PAT.ToString.ToUpper()

            Row.PAT01 = SegmentValue(arrLine, 1)
            Row.PAT02 = SegmentValue(arrLine, 2)
            Row.PAT03 = SegmentValue(arrLine, 3)
            Row.PAT04 = SegmentValue(arrLine, 4)
            Row.PAT05 = Convert.ToInt32(SegmentValue(arrLine, 5))
            Row.PAT06 = SegmentValue(arrLine, 6)
            Row.PAT07 = SegmentValue(arrLine, 7)
            Row.PAT08 = SegmentValue(arrLine, 8)
            Row.PAT09 = SegmentValue(arrLine, 9)
            Row.PAT10 = SegmentValue(arrLine, 10)
            Row.PAT11 = SegmentValue(arrLine, 11)
            Row.PAT12 = SegmentValue(arrLine, 12)
            Row.PAT13 = SegmentValue(arrLine, 13)
            Row.PAT14 = SegmentValue(arrLine, 14)
            Row.PAT15 = SegmentValue(arrLine, 15)
            Row.PAT16 = SegmentValue(arrLine, 16)
            Row.PAT17 = SegmentValue(arrLine, 17)
            Row.PAT18 = Convert.ToDateTime(SegmentValue(arrLine, 18))
            Row.PAT19 = SegmentValue(arrLine, 19)
            Row.PAT20 = Convert.ToInt32(SegmentValue(arrLine, 20))
            Row.PAT21 = Convert.ToInt32(SegmentValue(arrLine, 21))
            Row.PAT22 = SegmentValue(arrLine, 22)
            Row.PAT23 = SegmentValue(arrLine, 23)
            Row.PAT24 = SegmentValue(arrLine, 24)

    End Select

End Sub

Public Function SegmentValue(ByRef LineArray As String(), ByVal Counter As Integer) As String
    Throw New NotImplementedException

    If LineArray.Length > Counter Then
        Return LineArray(Counter).ToString().Trim()

    End If
    Return String.Empty

End Function 
```

结束类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T21:18:41.070

从广义上讲，我会考虑使用脚本组件作为源。文件可能包含的每个“事物”都会有一个输出集合。在您的示例中，您将有`Output 0`足够的列来描述`th`上面的行。然后，您将拥有一个`Output 1`描述`IS`数据集的集合。您还需要考虑任何键，可能是源组件中生成的代理键，以跟踪您的数据。

一旦定义了集合中的所有列，那么在 C#/VB.NET 中编写解析逻辑就很简单了。解析后，您只需将值分配给这些集合。

```
 Output0Buffer.AddRow();
    // use this to assign a value
    Output0Buffer.MyColumn = parsedValue;
    // Use this for handling a null value
    Output0Buffer.MyColumn_IsNull = true; 
```

现在您可以运行包并解析数据流顺流而下。

听起来您需要满足外键并生成代理值。如果是这种情况，我会将大部分（如果不是全部）这些数据写入各种暂存表，然后通过链接到数据流任务的执行 SQL 任务的重复查询继续验证和回填数据。

需要更多细节？编辑您的问题并自己提供一些。我们都很乐意提供建议和指导，但我们不在您的方位，也不了解您的需求。

# java - Hibernate 根据条件从数据库中检索结果

> ID：13126457
> 
> 赞同：0
> 
> 时间：2012-10-29T17:13:59.203
> 
> 标签：java, sql, hibernate

在从数据库中检索结果时，我有点迷茫。

My`MemberModel`由 4 个字段组成：`id`、`username`和。我已经能够成功地将其保存到数据库中。`password``email`

现在我需要检索一个等于“测试”`id`的成员。`username`

我尝试了一些类似的东西：

```
SQLQuery query = session.createSQLQuery("SELECT id FROM members WHERE username = :username");
query.setString("username", username);
List<MemberModel> returnedMembers = query.list();
MemberModel member = returnedMembers.get(0);
int id = member.getId(); 
```

但是我得到一个`member.getId()`无法转换为 int 的错误，因为它是`MemberModel`......但是 getter`getId()`返回`int`。

我很困惑。`id`问题是：根据条件（的值）检索成员的最简单快捷的方法是什么`username`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T17:18:55.757

您正在使用本机 SQL 查询，但应使用[HQL 查询](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html#createQuery%28java.lang.String%29)。这意味着您必须将查询更改为：

```
session.createQuery("SELECT m FROM MemberModel m WHERE m.username = :username") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T17:20:34.193

我会将您的代码更改为以下内容：

```
public MemberModel getMember(String username) {
    Query query = sessionFactory.getCurrentSession().createQuery("from  " + MemberModel.class.getName() + " where username = :username ");
    query.setParameter("username", username);
    return (MemberModel) query.uniqueResult();
} 
```

然后你应该能够做到：

```
MemberModel model = someInstance.getMember("someUsername");
int id = model.getId(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T06:21:20.840

您还可以使用标准和限制 api。

```
Criteria criteria = session.createCriteria(MemberModel.class);
criteria.add(Restrictions.eq("username", username));
MemberModel member=(MemberModel)criteria.uniqueResult(); 
```

# asp.net - asp.net中Repeater控件下的Gridview

> ID：13126458
> 
> 赞同：0
> 
> 时间：2012-10-29T17:14:04.760
> 
> 标签：asp.net, gridview, repeater

我有一个中继器控件，其中包含基于数据库中的值的网格，例如，我在中继器控件中有 2 个网格，现在两个网格都包含一个具有向上和向下按钮的列，现在当用户从任何网格单击按钮时，我如何检查按钮是从哪个网格调用的。下面是我在其中填充网格的代码`RepeaterItemDataBound Event`

```
GridView gvw = e.Item.FindControl("grid") as GridView;
gvw.DataSource = info.GetStories(sectionNames[e.Item.ItemIndex].Trim());
gvw.DataBind(); 
```

这里部分名称包含部分的名称，基于部分的数量，我生成网格。我的设计如下所示：

```
<asp:Repeater ID="rptGrids" runat="server" 
                        OnItemDataBound="rptGrids_ItemDataBound">
                        <ItemTemplate>
                            <asp:GridView ID="grid" runat="server" Width="100%" CellPadding="5" AllowPaging="true" ShowHeader="true" PageSize="10" AutoGenerateColumns="false" OnRowCommand="Stories_RowCommand">
                                <Columns>
                                    <asp:BoundField DataField="ArticleID" HeaderText="Article ID" ItemStyle-CssClass="center" />
                                    <asp:BoundField DataField="CategoryID" HeaderText="Category ID" ItemStyle-CssClass="center" />
                                    <asp:BoundField DataField="Title" HeaderText = "Article Title" />
                                    <asp:BoundField DataField="PublishDate" DataFormatString="{0:d}" HeaderText="Publish Date" ItemStyle-CssClass="center" />
                                    <asp:TemplateField HeaderText="Select Action" ItemStyle-CssClass="center">
                                        <ItemTemplate>
                                            <asp:ImageButton ID="btnMoveUp" runat="server" ImageUrl="/images/up.gif" CommandArgument="Up" CommandName='<%# Container.DataItemIndex + "," + DataBinder.Eval(Container.DataItem, "StoryType") %>' />
                                            <asp:ImageButton ID="btnMoveDown" runat="server" ImageUrl="/images/dn.gif" CommandArgument="Down" CommandName='<%# Container.DataItemIndex + "," + DataBinder.Eval(Container.DataItem, "StoryType") %>' />
                                            <asp:ImageButton ID="btnDelete" runat="server" ImageUrl="/images/deny.gif" CommandArgument="Delete" OnClientClick="return confirm('Are you sure you want to delete this article?');" CommandName='<%# Container.DataItemIndex %>' />
                                        </ItemTemplate>
                                    </asp:TemplateField>
                                    <asp:TemplateField Visible="false">
                                        <ItemTemplate>
                                            <asp:HiddenField ID="hdStoriesSortOrder" runat="server" Value='<%# Eval("SortOrder") %>' />
                                        </ItemTemplate>
                                    </asp:TemplateField>
                                </Columns>
                            </asp:GridView>
                            <div class="blank"></div>
                        </ItemTemplate>
                    </asp:Repeater> 
```

这是我的 gridviews row_command 事件

```
protected void Stories_RowCommand(object sender, GridViewCommandEventArgs e)
{
    int index = Convert.ToInt32(e.CommandName.Split(',')[0]);
    string section = e.CommandName.Split(',')[1].Trim().ToString();
    string command = e.CommandArgument.ToString();
    if (command.ToLower() == "up")
    {
        GridView grd = rptGrids.Items[1].FindControl("grid") as GridView; // If i specify the index here, i gets proper grid, but how to recognize at runtime.
        Response.Write(grd.Rows.Count);
    }
    else if (command.ToLower() == "down")
    {

    }
} 
```

谁能告诉我如何从单击了哪个网格向上/向下按钮中获取信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:24:47.303

您可以使用命令参数来传递所需的值。这是以类似方式使用 imagebutton 的示例：

```
 <asp:ImageButton ID="btnView" runat="server" ToolTip="<% $resources:AppResource,Edit %>"
                    SkinID="EditPage" CommandName="myCommand" CommandArgument='<%# Eval("CustomerId") %>'
                    PostBackUrl='<%# "~/AdminPages/Customer.aspx?id=" + Eval("CustomerId").ToString() %>' /> 
```

注意 CommandArgument 属性。您可以使用指示中继器内部特定网格视图的值对其进行设置。

这是检查值的方法：

```
 protected void EntityGridViewContacts_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        //here you can check for command name...
        switch (e.CommandName)
        {
            case "myCommand":
                //here you access command argument...
                int customerId = Convert.ToInt32(e.CommandArgument.ToString());
                break;
        }

        //here is how you access source gridview...
        GridView gridView = (GridView)sender;
        string controlId = gridView.ID;
    } 
```

您还可以使用以下方法设置 CommandArgument：

```
CommandArgument='<%# GetMySpecialValue() %>' 
```

然后你应该在页面端声明函数，如下所示：

```
public string GetMySpecialValue() 
{
     return "some value";
} 
```

# .net - 如何绑定 WPF ContextMenu ItemsSource？

> ID：13126459
> 
> 赞同：0
> 
> 时间：2012-10-29T17:14:09.580
> 
> 标签：.net, wpf, xaml, data-binding, itemssource

我正在尝试以这种方式绑定 Button 的上下文菜单：

```
<Button.ContextMenu>
    <ContextMenu ItemsSource="{Binding RelativeSource={RelativeSource AncestorType=UserControl}, Path=Values}"/>
</Button.ContextMenu> 
```

（UserControl 具有 Values 属性）。

为什么这不起作用？但是，当我将此绑定放入其他控件时，`<TextBlock Text='{Binding ...}'/>`它可以正常工作。

另一个问题，如何调试 WPF 中的绑定问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:23:21.813

它不起作用，因为 ContextMenu 不是可视树或逻辑树的一部分，因此它不会`DataContext`以与其他控件相同的方式继承。它不是你控制的孩子。

您可以做的是使用`PlacementTarget`ContextMenu 的属性来获取 ContextMenu 附加到的父元素并从那里开始。

# node.js - Node-gyp 生成非 Node.js 项目？

> ID：13126472
> 
> 赞同：0
> 
> 时间：2012-10-29T17:15:29.907
> 
> 标签：node.js, gyp, node-gyp

可以`node-gyp`用来生成非 Node.js 插件项目吗？

例如，我想用它`node-gyp`来生成一个典型的“Hello, World!”。C++ 项目。我可以这样做吗？我该怎么做？我发现股票 python GYP 文档缺少我正在寻找的示例和描述。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T05:54:58.543

是的，它可以生成常规项目。实际上，它非常自然且非常好。

# android - 在列表视图中从数据库中获取 ID onclick

> ID：13126481
> 
> 赞同：0
> 
> 时间：2012-10-29T17:15:54.197
> 
> 标签：android, database, android-listview

我有这个类，它从数据库中获取数据并显示在列表视图中。

有没有办法从数据库中获取 Id 并烤它？

现在吐司回来了：`android.database.sqlite.SQLiteCursor@4180c088`

```
 public class AndroidSQLite extends Activity { 

 private SQLiteAdapter
 mySQLiteAdapter;

 @Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
     setContentView(R.layout.main);
     ListView listContent = (ListView)findViewById(R.id.contentlist);

     mySQLiteAdapter = new SQLiteAdapter(this);
     mySQLiteAdapter.openToRead();

     Cursor cursor = mySQLiteAdapter.queueAll();
     startManagingCursor(cursor);

     String[] from = new String[]{SQLiteAdapter.KEY_NOME,SQLiteAdapter.KEY_ID};
     int[] to = new int[]{R.id.text,R.id.id};

     SimpleCursorAdapter cursorAdapter =
      new SimpleCursorAdapter(this, R.layout.row, cursor, from, to);

     listContent.setAdapter(cursorAdapter);

     listContent.setOnItemClickListener(new OnItemClickListener() {
         public void onItemClick(AdapterView<?> parent, View view, int position,
                 long id) {
                //GET ID FROM DATABASE
                Toast.makeText(getBaseContext(), parent.getItemAtPosition(position).toString(), Toast.LENGTH_LONG).show();
                //THIS TOAST IS RETURNING "android.database.sqlite.SQLiteCursor@4180c088"
         }
     });

     mySQLiteAdapter.close();
 } } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T17:17:15.657

只需使用以下`id`参数`onItemClick()`：

```
Toast.makeText(getBaseContext(), id + "", Toast.LENGTH_LONG).show(); 
```

* * *

为了将来参考，您当前正在尝试将整个 Cursor 用作字符串，您希望选择这样的列：

```
Toast.makeText(getBaseContext(), parent.getItemAtPosition(position).getLong(0), Toast.LENGTH_LONG).show(); 
```

（对于 SimpleCursorAdapter，第一列始终是该`_id`列，因此`getLong(0)`.）

# jquery - 如果不是所有字段都已填充，如何使用选项卡切换到字段集、展开以及更改类？

> ID：13126485
> 
> 赞同：1
> 
> 时间：2012-10-29T17:16:10.793
> 
> 标签：jquery, toggle, accordion, legend, fieldset

我有一个动态构建表单的系统，有些可能包含 100 多个问题。这些问题中的每一个都包含大约 3 个不同的子问题/回答字段。子问题包含在一个 div 中：`.dfcolumns`在页面加载时折叠，然后我使用 jquery 切换在单击问题/图例时展开它们。

**我需要在这里完成两件事：**

1.  Tab 到下一个字段集并打开它。（一次只打开一个会很棒，就像手风琴一样）

2.  如果填充了所有子字段，则更改字段集/图例的类（我不是在这里寻找基本的表单验证，因为我希望在此过程中发生这种情况，而不是在点击提交时）。

基本上为了更好的用户体验，我想让他的用户能够浏览问题，并知道他们在此过程中完成了哪些问题。

**的HTML：**

```
<div class="dform">
<div class="dform_element">
    <div class="dform_container">
        <fieldset>
        <legend>1\. Question/Toggle Trigger</legend>
            <div class="dfcolumns">
                *a bunch of field types here…
            </div>
        </fieldset>
    </div>
</div>
<div class="dform_element">
    <div class="dform_container">
        <fieldset>
        <legend>2\. Question/Toggle Trigger</legend>
            <div class="dfcolumns">
            <div class="dfcolumns">
                *a bunch of field types here…
            </div>
        </fieldset>
    </div>
</div> 
```

**CSS：** `.dfcolumns {display: none;}`

**切换功能：**

```
 $(function(){
    $("legend").click(function(){
            $(this).parent().find(".dfcolumns").slideToggle("slow");
    });
}); 
```

这其他两个目标中的任何一个都可能吗？如果是这样，关于我将如何去做的任何想法？

非常感谢您的任何意见！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-02-01T12:56:21.240

我使用 jquery 提供了简单的解决方案：

```
<ul class="nav nav-tabs"></ul>

<form class="fieldset-tabs">
    <fieldset>
        <legend>Tab 1</legend>
        **Tab 1 Cont**
    </fieldset>
    <fieldset>
        <legend>Tab 2</legend>
        **Tab Cont 2**
    </fieldset>
</div> 
```

和javascript是：

```
jquery(function(){
        $('.fieldset-tabs fieldset').each(function (index) {
            var text = $(this).addClass('tab tab-'+index).find('legend').text() ;
            $('.nav.nav-tabs').append('<li><a href="#" data-toggle=".tab-'+index+'">'+text+'</a></li>') ;
        });
        $('.nav.nav-tabs li a').click(function (e) {
            e.preventDefault() ;
            var $a = $(this);
            var $li =  $a.parent().addClass('active');
            $('.nav.nav-tabs li').not($li).removeClass('active');
            $('.fieldset-tabs fieldset.tab').not($a.data('toggle')).hide();
            $($a.data('toggle')).show();
        }).eq(0).trigger('click') ;
    }); 
```

# .net - 窗体关闭时可以调用 thread.Abort() 吗？如果不是，那么全球标志是否足够好？

> ID：13126486
> 
> 赞同：0
> 
> 时间：2012-10-29T17:16:19.077
> 
> 标签：.net, multithreading, threadabortexception, thread-abort

首先， Thread.Abort() 是邪恶的——明白了！现在让我解释一下我的情况...

**情况：**

我有一个只向用户显示当前运行状态的仪表板。它针对 Sql Server DB 执行各种选择查询，并执行一些最终在仪表板上显示给用户的计算。用户可以同时打开多个仪表板。我有一个计时器线程，每隔几秒钟刷新一次仪表板。该计时器线程产生另一个线程（实际上队列在线程池上工作）以执行长时间运行的计算/查询。

**问题：**

当用户点击 X 关闭 Dashboard 窗口时，它需要立即关闭（比如说在一秒钟内，我认为 2 秒太长了）。所以我使用这段代码：

```
 private void Form1_FormClosing(object sender, FormClosingEventArgs e)
    {
        _timerThread.Abort();
    }

    private void Timer_Elapsed(object sender, ElapsedEventArgs e)
    {
        // we're on the timer thread now

        try
        {
            RefreshUi();
        }
        catch (ThreadAbortException)
        {
            System.Threading.Thread.ResetAbort();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }
    } 
```

问题是有时会捕获 ThreadAbortException，有时则不会。我发现在执行查询的过程中它几乎没有被捕获。

*[更新]*我最近发现如果我检查内部异常，我可以捕获 ThreadAbortException。

**问题：**

1.  在这种情况下可以使用 Thread.Abort() 吗？如果是这样，我如何始终捕获 ThreadAbortException 以便用户在关闭表单时看不到它？（根据我的阅读，我认为这是不可能的）
2.  如果不能使用 Thread.Abort() （这是我认为你们大多数人会回答的），那么这是我对使用“全局布尔标志”来告诉线程何时关闭的其他担忧。
    *   我担心线程不会在 1 秒的时间限制内停止。（例如，我可能有一些查询需要 1-2 秒才能运行）
    *   我将不得不用 if(shouldShutdown) 语句来弄乱我的代码。
    *   我应该将 shouldShutdown 标志设为静态，以便我的所有课程都可以使用它吗？如果用户可以同时打开多个仪表板，这会带来问题吗？（我担心在所有仪表板之间共享静态变量。这是我绝对不想要的。）
    *   当工作线程看到他们必须关闭时，他们应该抛出异常还是直接返回？如果它们只是返回，那么我将不得不添加更多 if(shouldShutdown) 检查，因为某些函数返回 false 是可以的。如果抛出异常是可以的，你推荐哪个异常？定制的？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:34:05.370

正确的方法是

1.  使对 SQL Server 的所有请求异步
2.  在`ManualResetEvent`后台线程中处理并在需要关闭时从主线程中触发。
3.  中断`AutoResetEvent`处理程序中的 sql 请求并优雅地退出线程
4.  使 GUI 关闭窗口与退出线程并行，因此它们不相互依赖。
5.  如果关闭仪表板意味着退出进程，最好在关闭窗口的同时等待所有线程退出。

# ruby - 为什么即使 x 未定义 x = x 也不会引发错误

> ID：13126487
> 
> 赞同：5
> 
> 时间：2012-10-29T17:16:26.797
> 
> 标签：ruby

> **可能重复：**
> [为什么 Ruby 中的 `a = a` `nil`？](https://stackoverflow.com/questions/8908050/why-is-a-a-nil-in-ruby)

我敢肯定这种行为是有原因的，我只是好奇它是什么。

```
y = x # NameError: undefined local variable or method 'x'
x = x # => nil 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T17:31:47.623

这是由 Ruby 中变量的初始化方式引起的，这对于这种语言来说是相当独特的。基本上，Ruby 初始化（创建）一个变量，如果它可能被分配一个值。考虑这个例子：

```
if false
  x = "hello"
end 
```

`x`绝对不会在`"hello"`这里分配字符串。但是，它仍然会`nil`从静态程序分析中初始化，它可能已被分配。

你的例子是类似的。因为您将某些内容分配给`x`，所以它将在执行语句`nil` *之前被初始化。*因此，在执行过程`x`中，实际上是`nil`.

# ruby - 将字符串拆分为 2 个不同数量的字符，跳过非字母数字

> ID：13126490
> 
> 赞同：1
> 
> 时间：2012-10-29T17:16:34.347
> 
> 标签：ruby

我有一个像这样的字符串：

```
hn$8m3kj4.23hs@8; 
```

我需要将其拆分如下：第一个条目应该是一个字符长度，第二个条目应该是 2 个字符，第三个条目应该是一个字符，第四个 - 是 2 个字符，依此类推。

然后用分号将一个字符与两个字符条目连接起来`:`

如果末尾的某些字符仍未配对，则它们也应显示。

跳过所有非字母数字字符很重要。

所以最后的字符串应该是：

```
h:n8 m:3k j:42 3:hs 8: 
```

看，8 没有 2 个字符对，但它仍然显示。

我试过循环，但我得到了巨大的代码。也尝试了正则表达式，但它被错误的字符数分割。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T17:20:47.800

你可以试试这个：

```
 s = "hn$8m3kj4.23hs@8;"

 s.gsub(/\W/, '').scan(/(.)(..)?/).map { |i| i.join ':' }.join ' '
 => "h:n8 m:3k j:42 3:hs 8:" 
```

不过，这不会跳过下划线。

如果您还需要跳过它们，请使用以下内容：

```
s = "hn$8m3k_j4.23hs@8;_"

s.gsub(/\W|_/, '').scan(/(.)(..)?/).map { |i| i.join ':' }.join ' '
=> "h:n8 m:3k j:42 3:hs 8:" 
```

## 在此处查看[现场演示](http://cibox.org/slivu/stackoverflow?lang=ruby&file=split-a-string-by-2-various-number-of-chars-skipping-non-alphanumerics.rb&run=true)

# ruby-on-rails - Rails + Heroku：ActionView::Template::Error

> ID：13126497
> 
> 赞同：0
> 
> 时间：2012-10-29T17:17:10.453
> 
> 标签：ruby-on-rails, heroku

我在将我的 rails 应用程序部署到 heroku 时遇到问题。我刚刚修复了一个错误[Rails + Heroku ：我们很抱歉，但出了点问题](https://stackoverflow.com/questions/13041271/rails-heroku-were-sorry-but-something-went-wrong)，但我想还有更多。谁能帮助指导我如何调试它？我被卡住了，因为 heroku 没有告诉我错误发生在哪一行。抱歉打扰了。

如果您想看一下，这是我的所有代码。 [https://github.com/EdmundMai/pholderbeta](https://github.com/EdmundMai/pholderbeta)

如果您要我粘贴任何内容，请告诉我。

Heroku 日志：

```
2012-10-29T16:43:41+00:00 app[web.1]: Completed 500 Internal Server Error in 328ms
2012-10-29T16:43:41+00:00 app[web.1]: 
2012-10-29T16:43:41+00:00 app[web.1]: LINE 4:              WHERE a.attrelid = '"users"'::regclass
2012-10-29T16:43:41+00:00 app[web.1]: ActionView::Template::Error (PG::Error: ERROR:  relation "users" does not exist
2012-10-29T16:43:41+00:00 app[web.1]:                                         ^
2012-10-29T16:43:41+00:00 app[web.1]:                 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
2012-10-29T16:43:41+00:00 app[web.1]:               FROM pg_attribute a LEFT JOIN pg_attrdef d
2012-10-29T16:43:41+00:00 app[web.1]: :             SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
2012-10-29T16:43:41+00:00 app[web.1]:              WHERE a.attrelid = '"users"'::regclass
2012-10-29T16:43:41+00:00 app[web.1]:                AND a.attnum > 0 AND NOT a.attisdropped
2012-10-29T16:43:41+00:00 app[web.1]:              ORDER BY a.attnum
2012-10-29T16:43:41+00:00 app[web.1]: ):
2012-10-29T16:43:41+00:00 app[web.1]:     1: 
2012-10-29T16:43:41+00:00 app[web.1]:     2:        <nav class="clearfix">
2012-10-29T16:43:41+00:00 app[web.1]:     3:            <% if !signed_in? %>
2012-10-29T16:43:41+00:00 app[web.1]:     4:                <%= link_to "home", root_url %>
2012-10-29T16:43:41+00:00 app[web.1]:     5:            <% else %>
2012-10-29T16:43:41+00:00 app[web.1]:     6:                <%= link_to "my profile", current_user %>
2012-10-29T16:43:41+00:00 app[web.1]:   app/helpers/sessions_helper.rb:26:in `current_user'
2012-10-29T16:43:41+00:00 app[web.1]:   app/helpers/sessions_helper.rb:13:in `signed_in?'
2012-10-29T16:43:41+00:00 app[web.1]:   app/views/layouts/_header.html.erb:3:in `_app_views_layouts__header_html_erb__4262906123720065777_48014220'
2012-10-29T16:43:41+00:00 app[web.1]: 
2012-10-29T16:43:41+00:00 app[web.1]:   app/views/layouts/application.html.erb:13:in `_app_views_layouts_application_html_erb__2281927286696150034_48418280'
2012-10-29T16:43:41+00:00 app[web.1]: 
2012-10-29T16:43:41+00:00 heroku[router]: GET pacific-ravine-3563.herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=11ms status=200 bytes=1150
2012-10-29T16:46:26+00:00 heroku[slugc]: Slug compilation started
2012-10-29T16:46:53+00:00 heroku[web.1]: State changed from up to starting
2012-10-29T16:46:53+00:00 heroku[slugc]: Slug compilation finished
2012-10-29T16:46:56+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 30276`
2012-10-29T16:46:57+00:00 heroku[web.1]: Stopping all processes with SIGTERM
2012-10-29T16:46:58+00:00 app[web.1]: [2012-10-29 16:46:58] ERROR SignalException: SIGTERM
2012-10-29T16:46:58+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:90:in `select'
2012-10-29T16:47:04+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-10-29T16:47:04+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-10-29T16:47:08+00:00 heroku[web.1]: Error R12 (Exit timeout) -> At least one process failed to exit within 10 seconds of SIGTERM
2012-10-29T16:47:08+00:00 heroku[web.1]: Stopping remaining processes with SIGKILL
2012-10-29T16:47:08+00:00 app[web.1]: => Booting WEBrick
2012-10-29T16:47:08+00:00 app[web.1]: => Rails 3.2.8 application starting in production on http://0.0.0.0:30276
2012-10-29T16:47:08+00:00 app[web.1]: => Call with -d to detach
2012-10-29T16:47:08+00:00 app[web.1]: => Ctrl-C to shutdown server
2012-10-29T16:47:08+00:00 app[web.1]: Connecting to database specified by DATABASE_URL
2012-10-29T16:47:09+00:00 app[web.1]: [2012-10-29 16:47:09] INFO  WEBrick 1.3.1
2012-10-29T16:47:09+00:00 app[web.1]: [2012-10-29 16:47:09] INFO  ruby 1.9.2 (2011-07-09) [x86_64-linux]
2012-10-29T16:47:09+00:00 app[web.1]: [2012-10-29 16:47:09] INFO  WEBrick::HTTPServer#start: pid=2 port=30276
2012-10-29T16:47:10+00:00 heroku[web.1]: Process exited with status 137
2012-10-29T16:47:10+00:00 heroku[web.1]: State changed from starting to up
2012-10-29T16:47:46+00:00 app[web.1]: Started GET "/" for 66.108.172.226 at 2012-10-29 16:47:46 +0000
2012-10-29T16:47:46+00:00 app[web.1]: 
2012-10-29T16:47:46+00:00 app[web.1]: 
2012-10-29T16:47:46+00:00 app[web.1]: Processing by HomeController#index as HTML
2012-10-29T16:47:46+00:00 app[web.1]:   Rendered home/index.html.erb within layouts/application (12.3ms)
2012-10-29T16:47:46+00:00 app[web.1]: ActionView::Template::Error (PG::Error: ERROR:  relation "users" does not exist
2012-10-29T16:47:46+00:00 app[web.1]:                                         ^
2012-10-29T16:47:46+00:00 app[web.1]:              WHERE a.attrelid = '"users"'::regclass
2012-10-29T16:47:46+00:00 app[web.1]:               FROM pg_attribute a LEFT JOIN pg_attrdef d
2012-10-29T16:47:46+00:00 app[web.1]:                AND a.attnum > 0 AND NOT a.attisdropped
2012-10-29T16:47:46+00:00 app[web.1]:                 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
2012-10-29T16:47:46+00:00 app[web.1]:   Rendered layouts/_header.html.erb (59.5ms)
2012-10-29T16:47:46+00:00 app[web.1]: :             SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
2012-10-29T16:47:46+00:00 app[web.1]: 
2012-10-29T16:47:46+00:00 app[web.1]: Completed 500 Internal Server Error in 144ms
2012-10-29T16:47:46+00:00 app[web.1]: LINE 4:              WHERE a.attrelid = '"users"'::regclass
2012-10-29T16:47:46+00:00 app[web.1]:              ORDER BY a.attnum
2012-10-29T16:47:46+00:00 app[web.1]:     1: 
2012-10-29T16:47:46+00:00 app[web.1]:     2:        <nav class="clearfix">
2012-10-29T16:47:46+00:00 app[web.1]:     3:            <% if !signed_in? %>
2012-10-29T16:47:46+00:00 app[web.1]:     4:                <%= link_to "home", root_url %>
2012-10-29T16:47:46+00:00 app[web.1]: ):
2012-10-29T16:47:46+00:00 app[web.1]:     6:                <%= link_to "my profile", current_user %>
2012-10-29T16:47:46+00:00 app[web.1]:     5:            <% else %>
2012-10-29T16:47:46+00:00 app[web.1]:   app/helpers/sessions_helper.rb:26:in `current_user'
2012-10-29T16:47:46+00:00 app[web.1]: 
2012-10-29T16:47:46+00:00 app[web.1]:   app/helpers/sessions_helper.rb:13:in `signed_in?'
2012-10-29T16:47:46+00:00 app[web.1]:   app/views/layouts/_header.html.erb:3:in `_app_views_layouts__header_html_erb__1629561108313014440_42800200'
2012-10-29T16:47:46+00:00 app[web.1]:   app/views/layouts/application.html.erb:13:in `_app_views_layouts_application_html_erb__2023541485350786357_43765980'
2012-10-29T16:47:46+00:00 app[web.1]: 
2012-10-29T16:47:46+00:00 heroku[router]: GET pacific-ravine-3563.herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=1ms service=12ms status=200 bytes=1150
2012-10-29T17:04:22+00:00 heroku[slugc]: Slug compilation started
2012-10-29T17:04:41+00:00 heroku[slugc]: Slug compilation finished
2012-10-29T17:04:41+00:00 heroku[web.1]: State changed from up to starting
2012-10-29T17:04:43+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 38347`
2012-10-29T17:04:44+00:00 heroku[web.1]: Stopping all processes with SIGTERM
2012-10-29T17:04:44+00:00 app[web.1]: [2012-10-29 17:04:44] ERROR SignalException: SIGTERM
2012-10-29T17:04:44+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:90:in `select'
2012-10-29T17:04:50+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-10-29T17:04:50+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-10-29T17:04:50+00:00 heroku[web.1]: Stopping all processes with SIGTERM
2012-10-29T17:04:51+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:90:in `select'
2012-10-29T17:04:51+00:00 app[web.1]: [2012-10-29 17:04:51] ERROR SignalException: SIGTERM
2012-10-29T17:04:55+00:00 app[web.1]: => Booting WEBrick
2012-10-29T17:04:55+00:00 app[web.1]: => Rails 3.2.8 application starting in production on http://0.0.0.0:38347
2012-10-29T17:04:55+00:00 app[web.1]: => Call with -d to detach
2012-10-29T17:04:55+00:00 app[web.1]: => Ctrl-C to shutdown server
2012-10-29T17:04:55+00:00 app[web.1]: Connecting to database specified by DATABASE_URL
2012-10-29T17:04:55+00:00 heroku[web.1]: Error R12 (Exit timeout) -> At least one process failed to exit within 10 seconds of SIGTERM
2012-10-29T17:04:55+00:00 heroku[web.1]: Stopping remaining processes with SIGKILL
2012-10-29T17:04:55+00:00 app[web.1]: [2012-10-29 17:04:55] INFO  WEBrick 1.3.1
2012-10-29T17:04:55+00:00 app[web.1]: [2012-10-29 17:04:55] INFO  ruby 1.9.2 (2011-07-09) [x86_64-linux]
2012-10-29T17:04:55+00:00 app[web.1]: [2012-10-29 17:04:55] INFO  WEBrick::HTTPServer#start: pid=2 port=38347
2012-10-29T17:04:56+00:00 heroku[web.1]: State changed from starting to up
2012-10-29T17:04:57+00:00 heroku[web.1]: Process exited with status 137 
```

图式

```
ActiveRecord::Schema.define(:version => 20121024185036) do

create_table "albums", :force => true do |t|
  t.string   "name"
  t.datetime "created_at",  :null => false
  t.datetime "updated_at",  :null => false
  t.string   "description"
  t.string   "status"
end

create_table "friendships", :force => true do |t|
  t.integer  "user_id"
  t.integer  "friend_id"
  t.datetime "created_at", :null => false
  t.datetime "updated_at", :null => false
  t.string   "status"
end

create_table "ownerships", :id => false, :force => true do |t|
  t.integer "album_id"
  t.integer "user_id"
  t.string  "status"
end

create_table "photos", :force => true do |t|
  t.string   "avatar_file_name"
  t.string   "avatar_content_type"
  t.integer  "avatar_file_size"
  t.datetime "avatar_updated_at"
  t.datetime "created_at",          :null => false
  t.datetime "updated_at",          :null => false
  t.integer  "album_id"
end

create_table "users", :force => true do |t|
  t.string   "name"
  t.string   "email"
  t.datetime "created_at",              :null => false
  t.datetime "updated_at",              :null => false
  t.string   "password_digest"
  t.string   "remember_token"
  t.string   "profilepic_file_name"
  t.string   "profilepic_content_type"
  t.integer  "profilepic_file_size"
  t.datetime "profilepic_updated_at"
  t.string   "password_reset_token"
end

add_index "users", ["remember_token"], :name => "index_users_on_remember_token" 
```

结尾

heroku 和本地数据库：版本

```
Edmunds-MacBook-Pro:pholder edmundmai$ heroku run rake db:version
Running `rake db:version` attached to terminal... up, run.1
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
Connecting to database specified by DATABASE_URL
Current version: 20120929230317
Edmunds-MacBook-Pro:pholder edmundmai$ rake db:version
Current version: 20121024185036 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:21:59.170

根据回溯，错误位于模板中的第 3 行 - 如果您查看 postgres 错误，您收到的消息是`ERROR: relation "users" does not exist`. 您是否运行过数据库迁移？

# jquery - 单击单选按钮时提交表单 - 单击单选按钮提交表单并执行其他操作

> ID：13126501
> 
> 赞同：11
> 
> 时间：2012-10-29T17:17:15.380
> 
> 标签：jquery

我有一个关于单选按钮和表单的 jQuery 问题。

我有 5 个选项卡设置的选项卡式内容设置，每个选项卡中都有一个表单。

每个表单包含 5 个单选按钮和一个提交按钮。

我有我的 jQuery 设置来验证是否首先进行了选择，然后使用 AJAX 提交表单，关闭当前选项卡 (slideUp) 并打开下一个选项卡 (slideDown)。

我更愿意做的是删除提交按钮并在单击任何单选按钮时提交表单。这样单击单选按钮即可提交表单，关闭当前选项卡并打开下一个选项卡。

我需要做什么才能做到这一点，以便单击任何一个单选按钮将提交表单并关闭选项卡。我的 jQuery 代码发布在下面。

```
$("#selfAss1").validate({
    invalidHandler: function(e, validator) {
        var errors = validator.numberOfInvalids();
        if (errors) {
            var message = errors == 1
                ? 'You missed 1 field. It has been highlighted below'
                : 'You missed ' + errors + ' fields.  They have been highlighted below';
            $("div.error span").html(message);
            $("div.error").show();
        } else {
            $("div.error").hide();
        }
    },
    onkeyup: false,
    submitHandler: function() {
            $.post('/_action.php', $("#selfAss1").serialize(), function(data) {
                    $('.pane1').slideUp('slow');
                    $('#result1').html(data);
                    $('.pane2').slideDown('slow');

            });
    },
    debug:true
}); 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-29T17:19:57.503

从一张幻灯片到下一张幻灯片的转换由您的 处理`submitHandler`，因此所有单选按钮需要做的就是在单击时提交表单，请记住这一点：

```
$('input[type=radio]').on('change', function() {
    $(this).closest("form").submit();
}); 
```

一些笔记；首先我在这里使用了属性选择器，您可能希望将其更改为一个类或更具体的内容以满足您的需求。其次，您可能还希望包含一个“返回”方法，以允许人们更改他们的选择。使用这种方法，如果单击一次，就可以了。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-29T17:19:21.310

尝试

```
 <input type="radio" name="something" onclick="document.getElementById('myForm').submit();"/> 
```

或者

```
 <input type="radio" name="something" onclick="this.form.submit()"> 
```

在 jquery 中尝试类似

```
$('input[type=radio]').click(function() {
    $("form id or class").submit();
}); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-01-25T13:35:12.023

这对我有用：

```
<input name="myRadio" type="radio" value="1" onchange="this.form.submit()"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-04T19:17:45.380

尝试这个！！

```
 $('input[type=radio]').on('change', function() {
$('input[type=submit]').click();}); 
```

# python - python中的这个正则表达式匹配有什么问题？

> ID：13126505
> 
> 赞同：0
> 
> 时间：2012-10-29T17:17:33.583
> 
> 标签：python, regex

我在 python 中匹配这个特定的正则表达式时遇到问题，有人能看出什么问题吗？

我试图与单个正则表达式匹配的示例字符串是：

```
string = '[Pre-Avatar Mode Cost: 5.50 MP]'
string = '[Pre-Avatar Mode Cost: 1.2 MP]'
string = '[Pre-Avatar Mode Cost: 0.5 MP]'
string = '[Post-Avatar Mode: 0 MP]' 
```

我尝试了以下方法，但似乎没有一个表达式可以匹配所有这些：

```
m = re.match('\[.*(?P<cost>\d+(\.\d+)).*\]', string) # Appears to match only ones with #.#
m = re.match('\[.*(?P<cost>\d+(\.\d+)?).*\]', string) # Appears to match the 0 only, unable to print out m.groups for the others 
```

我正在尝试捕捉（5.50、1.2、0.5、0 等）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:21:58.640

您需要使第一个`.*`匹配不贪心（添加 a `?`），否则它会吞下数字：

```
r'\[.*?(?P<cost>\d+(?:\.\d+)?).*\]' 
```

我还将可选`.number`部分设为非捕获组以简化处理输出：

```
>>> import re
>>> costre = re.compile(r'\[.*?(?P<cost>\d+(?:\.\d+)?).*\]')
>>> costre.match('[Post-Avatar Mode: 0 MP]').groups()
('0',)
>>> costre.match('[Post-Avatar Mode: 5.50 MP]').groups()
('5.50',)
>>> costre.match('[Post-Avatar Mode: 1.2 MP]').groups()
('1.2',) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T17:24:35.593

我建议使用`:`作为锚点。这样，您将获得更强大的表达式：

```
r'\[.*: (?P<cost>\d+(?:\.\d+)?).*\]' 
```

`MP`如果保证在文本中，您甚至可能想要添加后缀。

# css - 悬停伪类后的 CSS 后代选择器仅适用于 Chrome

> ID：13126507
> 
> 赞同：0
> 
> 时间：2012-10-29T17:17:43.867
> 
> 标签：css, css-selectors

我正在创建一个菜单，我希望菜单项在我将鼠标悬停在它们上时淡入，并在我悬停在它们之外时淡出。我正在使用 CSS 3。此代码在 Chrome 中有效，在其他浏览器中无效。似乎是 CSS 中的行，在导致问题的悬停伪类之后有一个直接后代选择器。

**HTML**

```
<div class="mainMenu">
  <ul id="nav">
    <li class="dir">
     Menu Item
      <ul>
        <li>Item 1</li>
        <li>Item 2</li>
      </ul>
    </li>
  </ul>
</div> 
```

**CSS**

```
li.dir > ul{
  opacity: 0;
  transition: opacity .3s ease-in-out;
  -moz-transition: opacity .3s ease-in-out;
  -webkit-transition: opacity .3s ease-in-out;
}

li.dir:hover > ul {
  opacity: 1.0;
} 
```

# xcode - 使用文本字段将值设置为标签

> ID：13126509
> 
> 赞同：0
> 
> 时间：2012-10-29T17:17:54.493
> 
> 标签：xcode

我想制作一个允许用户在文本字段中输入值的应用程序，然后它应该更改标签的值。我是编程新手，所以我真的不知道如何编码。在 .m 文件中，我应该如何将文本字段的值连接到标签的值？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:25:22.780

将您的 textField 绑定到此方法

```
– textFieldShouldEndEditing:(UITextField*) txtField
{

[labelField setText: [textField text]]
return YES:
} 
```

# python - Python 石头剪刀布计分器

> ID：13126510
> 
> 赞同：2
> 
> 时间：2012-10-29T17:17:55.350
> 
> 标签：python, counter

我正在做一个石头剪刀布游戏。除了赢/输/领带计数器之外，一切似乎都运行良好。我查看了人们在这里发布的其他一些游戏，但我仍然无法让我的工作。我觉得我很接近，但我就是无法得到它！感谢您的帮助。这是我第一次在这里发帖，如果我搞砸了格式，我很抱歉。

我编辑了代码，但仍然无法让程序在不使用全局变量的情况下识别计数器。在我编辑的某个时刻，我设法让它把所有东西都算作平局……我不知道怎么回事，我在编辑过程中把它弄丢了。哈哈。-再次感谢大家！

这是我运行程序时得到的结果：

```
Prepare to battle in a game of paper, rock, scissors!
Please input the correct number according
to the object you want to choose.
Select rock(1), paper(2), or scissors(3): 1
Computer chose PAPER .
You chose ROCK .
You lose!
Play again? Enter 'y' for yes or 'n' for no. y
Prepare to battle in a game of paper, rock, scissors!
Please input the correct number according
to the object you want to choose.
Select rock(1), paper(2), or scissors(3): 2
Computer chose PAPER .
You chose PAPER .
It's a tie!
Play again? Enter 'y' for yes or 'n' for no. y
Prepare to battle in a game of paper, rock, scissors!
Please input the correct number according
to the object you want to choose.
Select rock(1), paper(2), or scissors(3): 3
Computer chose SCISSORS .
You chose SCISSORS .
It's a tie!
Play again? Enter 'y' for yes or 'n' for no. n
Your total wins are 0 .
Your total losses are 0 .
Your total ties are 0 . 
```

* * *

```
#import the library function "random" so that you can use it for computer 
#choice 
import random 

#define main 
def main(): 
    #assign win, lose, and tie to zero for tallying
    win = 0 
    lose = 0 
    tie = 0 

    #control loop with 'y' variable 
    play_again = 'y' 

    #start the game 
    while play_again == 'y': 
        #make a welcome message and give directions 
        print('Prepare to battle in a game of paper, rock, scissors!') 
        print('Please input the correct number according') 
        print('to the object you want to choose.') 

        #Get the player and computers choices and 
        #assign them to variables 
        computer_choice = get_computer_choice() 
        player_choice = get_player_choice() 

        #print choices 
        print('Computer chose', computer_choice, '.') 
        print('You chose', player_choice, '.') 

        #determine who won 
        winner_result(computer_choice, player_choice) 

        #ask the user if they want to play again 
        play_again = input("Play again? Enter 'y' for yes or 'n' for no. ") 

    #print results 
    print('Your total wins are', win, '.') 
    print('Your total losses are', lose, '.') 
    print('Your total ties are', tie, '.') 

#define computer choice 
def get_computer_choice(): 
    #use imported random function from library 
    choice = random.randint(1,3) 

    #assign what the computer chose to rock, paper, or scissors 
    if choice == 1: 
        choice = 'ROCK' 
    elif choice == 2: 
        choice = 'PAPER' 
    else: 
        choice = 'SCISSORS' 

    #return value 
    return choice 

#define player choice 
def get_player_choice(): 
    #assign input to variable by prompting user 
    choice = int(input("Select rock(1), paper(2), or scissors(3): ")) 

    #Detect invalid entry
    while choice != 1 and choice != 2 and choice != 3: 
        print('The valid numbers are rock(type in 1), paper(type in 2),') 
        print('or scissors(type in 3).') 
        choice = int(input('Enter a valid number please: ')) 

    #assign what the player chose based on entry 
    if choice == 1: 
        choice = 'ROCK' 
    elif choice == 2: 
        choice = 'PAPER' 
    else: 
        choice = 'SCISSORS' 

    #return value 
    return choice 

#determine the winner from the variables 
def winner_result(computer_choice, player_choice): 
    #if its a tie, add 1 to tie variable and display message 
    if computer_choice == player_choice:
        result = 'tie'
        print("It's a tie!")

    #if its a win, add to win tally and display message 
    elif computer_choice == 'SCISSORS' and player_choice == 'ROCK':
        result = 'win'
        print('ROCK crushes SCISSORS! You win!')
    elif computer_choice == 'PAPER' and player_choice == 'SCISSORS': 
        result = 'win'
        print('SCISSORS cut PAPER! You win!')
    elif computer_choice == 'ROCK' and player_choice == 'PAPER': 
        result = 'win'
        print('PAPER covers ROCK! You win!')

    #if it does not match any of the win criteria then add 1 to lose and 
    #display lose message 
    else: 
        result = 'lose'
        print('You lose!')

def result(winner_result,player_choice, computer_choice):

    # accumulate the appropriate winner of game total
    if result == 'win':
        win += 1
    elif result == 'lose':
        lose += 1
    else:
        tie += 1
    return result

main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:22:40.360

您的`winner_result`函数在增加获胜计数器之前返回。如果您`return`从中删除所有语句，则应更新计数器。`return`无论如何都不需要这些语句，因为该`if/elif/else`结构确保只执行一种可能的结果。

正如 Junuxx 在评论中所说，您还需要`winner_result`正确地为变量赋值，即，`winner_result = 'win'`而不是`winner_result == 'win'`. 我还会重命名`winner_result`变量或函数，因为两者使用相同的名称会令人困惑。

并且`win/lose/tie`变量当前是本地的，这意味着`main`并且`winner_result`将拥有这些变量的自己的副本，因此`main`的值将始终为零。您可以做的是使它们成为全局变量：在全局范围内（在任何函数之外）将它们分配为零，并`global win, lose, tie`在函数内添加行`winner_result`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-28T19:49:24.670

显然这个问题已经有几年了，但是当我在寻找相同的信息时它就出现了。如果有人感兴趣，这是我的代码。

```
#! usr/bin/python3
import random

def game():

    computer_count = 0
    user_count = 0

    while True:
        base_choice = ['scissors', 'paper', 'rock']
        computer_choice = random.choice(base_choice)

        user_choice = input('(scissors, paper, rock) Type your choice: ').strip().lower()
        print()
        computer_wins = 'The computer wins!'
        you_win = 'You win!'

        print(f'You played {user_choice}, the computer played {computer_choice}')
        if user_choice == 'scissors' and computer_choice == 'rock' or \
           user_choice == 'paper' and computer_choice == 'scissors' or \
           user_choice == 'rock' and computer_choice == 'paper':
            print(computer_wins)
            computer_count += 1

        elif user_choice == 'rock' and computer_choice == 'scissors' or \
            user_choice == 'scissors' and computer_choice == 'paper' or \
                user_choice == 'paper' and computer_choice == 'rock':
                print(you_win)
                user_count += 1

        else:
            if user_choice == computer_choice:
                print('Its a draw!')
                computer_count += 1
                user_count += 1

        print(f'Computer: {computer_count} - You: {user_count}')
        print()

game() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-24T21:21:22.927

我试图做同样的项目，我找到了一个适合我的解决方案。

```
from random import randint

win_count = 0
lose_count = 0
tie_count = 0

# create a list of play options
t = ["Rock", "Paper", "Scissors"]

# assign a random play to the computer
computer = t[randint(0, 2)]

# set player to false
player = False

print()
print("To stop playing type stop at any time.")
print()
while player == False:
    # set player to True
    player = input("Rock, Paper or Scissors? ")
    if player.lower() == "stop":
        print()
        print(
            f"Thanks for playing! Your final record was {win_count}-{lose_count}-{tie_count}")
        print()
        break
    if player.title() == computer:
        print()
        print("Tie!")
        tie_count += 1
        print()
    elif player.title() == "Rock":
        if computer == "Paper":
            print()
            print(f"You lose. {computer} covers {player.title()}.")
            lose_count += 1
            print()
        else:
            print()
            print(f"You win! {player.title()} smashes {computer}.")
            win_count += 1
            print()
    elif player.title() == "Paper":
        if computer == "Scissors":
            print()
            print(f"You lose. {computer} cuts {player.title()}.")
            lose_count += 1
            print()
        else:
            print()
            print(f"You win!, {player.title()} covers {computer}.")
            win_count += 1
            print()
    elif player.title() == ("Scissors"):
        if computer == "Rock":
            print()
            print(f"You lose. {computer} smashes {player.title()}.")
            lose_count += 1
            print()
        else:
            print()
            print(f"You win! {player.title()} cuts {computer}.")
            win_count += 1
            print()
    else:
        print()
        print("Sorry, we couldn't understand that.")
        print()
# player was set to True, but we want it to be false to continue loop
print(f"Your record is {win_count}-{lose_count}-{tie_count}")
print()
player = False
computer = t[randint(0, 2)] 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2022-02-10T17:40:59.577

这有效（有点）页面顶部的代码有很多问题。首先，评分不起作用。其次，没有任何缩进意味着其他 def 函数内部的任何内容都不起作用。第三，在第一个 def main 语句中引用了其他 def 函数，这导致 Python 显示无效语法，因为 Python 不知道其他函数，因为它们在引入 python 之前被引用。

# oracle - TransactionScope 处置失败

> ID：13126511
> 
> 赞同：3
> 
> 时间：2012-10-29T17:17:56.350
> 
> 标签：oracle, dispose, transactionscope

我在基于 Silverlight 和 RIA 服务的项目中使用 TransactionScope 类。每次我需要保存一些数据时，我都会创建一个 TransactionScope 对象，使用 Oracle ODP 保存我的数据，然后在我的 TransactionScope 对象上调用 Complete 方法并处理对象本身：

```
public override bool Submit(ChangeSet changeSet)
    {
        TransactionOptions txopt = new TransactionOptions();
        txopt.IsolationLevel = IsolationLevel.ReadCommitted;
        using (TransactionScope tx = new TransactionScope(TransactionScopeOption.Required, txopt))
        {
            // Here I open an Oracle connection and fetch some data
            GetSomeData();

            // This is where I persist my data
            result = base.Submit(changeSet);

            tx.Complete();
        }

        return result;
    } 
```

我的问题是，第一次调用 Submit 方法时，一切都很好，但是如果我第二次调用它，执行会在调用 Complete 后卡住几分钟（因此，在处理 tx 时） ，然后我收到 Oracle 错误“ORA-12154”。当然，我已经检查了我的持久性代码是否完整无误。有任何想法吗？

编辑：今天我重复了测试，由于某种原因，我得到了一个不同的错误，而不是 Oracle 异常：

```
System.InvalidOperationException: Operation is not valid due to the current state of the object.
at System.Transactions.TransactionState.ChangeStatePromotedAborted(InternalTransaction tx)
at System.Transactions.InternalTransaction.DistributedTransactionOutcome(InternalTransaction tx, TransactionStatus status)
at System.Transactions.Oletx.RealOletxTransaction.FireOutcome(TransactionStatus statusArg)
at System.Transactions.Oletx.OutcomeEnlistment.InvokeOutcomeFunction(TransactionStatus status)
at System.Transactions.Oletx.OletxTransactionManager.ShimNotificationCallback(Object state, Boolean timeout)
at System.Threading._ThreadPoolWaitOrTimerCallback.PerformWaitOrTimerCallback(Object state, Boolean timedOut) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:23:01.087

我以某种方式设法解决了这个问题，尽管我仍然无法弄清楚它首先出现的原因：我只是将调用 GetSomeData 移到分布式事务的范围之外。由于对 Submit 的调用可能会打开许多​​连接并在数据库上执行任何类型的操作，我只是无法说明 GetSomeData 导致此问题的原因（它只是打开一个连接，调用一个非常简单的存储函数并返回一个布尔值）。我只能猜测这与 Submit 方法的实现和/或同一事务范围内多个 oracle 连接的实例化有关。

# angularjs - 在 angularjs 应用程序中保存表单状态和进度的最佳实践？

> ID：13126515
> 
> 赞同：11
> 
> 时间：2012-10-29T17:18:15.270
> 
> 标签：angularjs

我正在用 angularjs 编写一个多步骤向导。在每个步骤中，我都希望保存到服务器，然后进入向导的下一步。

使用简单的链接进入下一步并保存到后端服务器很简单，它会更新我的位置，维护浏览器历史记录，但这种方法违反了 GET 安全和幂等的意图。

我正在采用这种方法；

```
$scope.progressToSetp2 = function() {

    $http.put('quote/' + $routeParams.quoteId, $scope.quote)....;

    $scope.OnAfterSubmit = function() {
        $location.path('/steptwo').replace();
        $scope.$apply();
    };

$scope.includeFormPartial = 'partials/steptwo.html';
}; 
```

这是一个好方法吗？有更好的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-30T14:02:01.020

当然有！为什么在每一步都保存到服务器？这不是角度的思维方式。

最佳实践是将状态保存在范围内并进行本地验证，完成后将整个步骤保存到后端发送。（本地验证不取消后端验证的需要）

如果您想要更好的实践，请使用服务来保存数据。看看[这个](http://jsfiddle.net/simpulton/VJ94U/)

```
angular.module('myApp', [])
.service('notesService', function () {
    var data = [
        {id:1, title:'Note 1'},
        {id:2, title:'Note 2'},
        {id:3, title:'Note 3'},
        {id:4, title:'Note 4'},
        {id:5, title:'Note 5'},
        {id:6, title:'Note 6'},
        {id:7, title:'Note 7'},
        {id:8, title:'Note 8'}
    ];

    return {
        notes:function () {
            return data;
        },
        addNote:function (noteTitle) {
            var currentIndex = data.length + 1;
            data.push({
                id:currentIndex, title:noteTitle
            });
        },
        deleteNote:function (id) {
            var oldNotes = data;
            data = [];

            angular.forEach(oldNotes, function (note) {
                if (note.id !== id) data.push(note);
            });
        }
    };
}) 
```

如果您关心用户在每个步骤中的输入并希望为他/她保留多个会话，您可以将输入数据暂时保存在客户端，直到完成所有步骤。

还阅读了所有 [这个](http://onehungrymind.com/)博客

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-13T06:26:21.033

更好的方法是将您的流程分解为任务并将信息序列化并在每个任务完成时将其保存到数据库中。

完成最后一步后，您也不必再次重新提交所有内容。您可以只调用处理工作流中持久步骤的 Web api。

就像您提到的那样，这使用户能够稍后继续工作流程（有意或在系统故障的情况下）。

将工作流/流程分解为任务也将帮助您更多地了解流程。这是这种方法的一个很好的副作用。

# android - Android：如何合成钢琴音色？

> ID：13126516
> 
> 赞同：1
> 
> 时间：2012-10-29T17:18:18.610
> 
> 标签：android, audio, synthesize, piano

我尝试使用 SoundPool 中的播放速度合成钢琴声音。我听到声音，但听起来……太丑了。它听起来接近正确的声音频率，但不完全正确。有时听起来比我需要的高（只是一点点），有时又低 - 但听起来很奇怪:)

```
float shift;
for ( int i = 0; i < 13; i++ ) {
    shift = ( float ) i / 12f;
    soundPool.play( soundID, 1, 1, 1, 0, ( float ) 1f + shift );
    try {
        Thread.sleep( 1500 );
    } catch (InterruptedException e) {
        e.printStackTrace();
    }   
} 
```

其中： soundID - 是加载的钢琴 C4 音符。

也许有人可以告诉我如何在 Android 中合成钢琴声音？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:26:11.477

您的主要问题是使用错误的数学来改变音高，而不是：

```
shift = ( float ) i / 12f; 
```

你应该使用：

```
shift = pow( pow(2.0, 1/12.0), (float) i ) 
```

或类似的东西。

您的另一个问题是实时转换的质量通常很差，我建议预分频 12 个键音，然后更改音高 2x、3x 等，这可以通过简单地删除每个第 n 个样本来完成。此外，如果我是你，我会对整个键盘进行预采样（你的应用程序几乎不需要超过 20-25 个键，因为屏幕空间有限等），然后将所有这些声音加载到键盘中`SoundPool`并随时可以播放时间。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-29T17:21:14.087

您可以使用 MIDI 来执行此操作。

[http://docs.oracle.com/javase/1.4.2/docs/api/javax/sound/midi/package-summary.html](http://docs.oracle.com/javase/1.4.2/docs/api/javax/sound/midi/package-summary.html)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2018-05-04T15:14:17.877

[我在这里](https://pages.mtu.edu/~suits/NoteFreqCalcs.html)找到了一个有用的链接。但是，它建议的公式与 lenik 已经发布的公式相同，只是它有额外的信息。也。

# google-reseller-api - customerId 和 customerDomain 之间的区别

> ID：13126521
> 
> 赞同：0
> 
> 时间：2012-10-29T17:18:29.963
> 
> 标签：google-reseller-api

这两个领域之间的实际区别是什么？

API 说 customerId 是非持久性的，但这并不能说明 customerDomain 是否可以更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T23:17:32.720

customerId 和 customerDomain 字段都是客户的主域名。就 API 而言，它们之间没有任何区别，只是始终需要 customerId 而不需要 customerDomain。

作为参考，此处描述了这些属性： [https ://developers.google.com/google-apps/reseller/v1/reference/customers](https://developers.google.com/google-apps/reseller/v1/reference/customers)

# sql - MFC，选择，按日期排序，放入 CRecordSet

> ID：13126525
> 
> 赞同：0
> 
> 时间：2012-10-29T17:18:37.270
> 
> 标签：sql, oracle, mfc, recordset

我需要从 SQL 中选择行，并将它们放在 CRecordSet 中。
CRecordSet 应该让它们按日期排序。
我应该在 SQL 查询上“按日期排序”，还是在 CRecordSet 中对它们进行排序，或者可能移动到对象的 CArray 并对 CArray 进行排序？

是否可以使用 SQL 查询进行排序，将它们插入 CRecordset 时，顺序将保持不变？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:28:09.610

是的，您应该在选择记录集时“按日期排序”。这样，它们将在您的 CRecordsSet 中以这种方式排序。

对 CRecordset 进行排序不会影响数据库中的顺序。行由键“排序”。它们在物理数据库中没有任何（有意义的）顺序。如果你有一个“日期”键，ORDER BY DATE 子句将（希望）运行得更快——因为它可以只使用那个键——否则它会为你排序，因此会慢一些。但无论哪种方式，CRecordset 都会出现排序。

没有必要让记录在磁盘上“保持排序”，因为索引和/或 ORDER BY 子句将随时以您想要的任何顺序为您提供记录。每次获得记录时只需说“按日期排序”，它们总是看起来是……嗯……按日期排序；-)

至于移动到数组并对其进行排序，如果可能的话，您希望 SQL 数据库为您完成工作。如果你能把它保存在服务器上——大概有更多的内存等等——那就更好了。可能有一种非常特殊的情况，您希望在本地对内存中的记录进行排序，但这看起来不像。

希望有帮助。

# c# - c# vmware sdk：获取主机系统上托管的所有来宾 vm 的列表？

> ID：13126529
> 
> 赞同：1
> 
> 时间：2012-10-29T17:18:55.663
> 
> 标签：c#, vmware

假设我有一些虚拟机（linuxtestguest、ubunuttestguest ...）托管在名为 test 的虚拟服务器上。

您如何获取托管在“测试”上的所有虚拟机的列表？

我可以按照 rootFolder (文件夹) -> childentity (datacenter) -> hostFolder(Folder) -> childentity (ComputerResource) -> host(HostSystem) 列出所有主机（在我的情况下为“测试”）

我可以按照 rootFolder (文件夹) -> childentity (datacenter) -> vmFolder(Folder) -> childentity (VirtualMachine) 列出所有可用的 Vms

但是我如何将两者联系起来？获得主机后，我如何将所有虚拟机连接到它？（如果可能的话，反过来）

这对我来说看起来很基础（这是我能想到的 SDK 的第一个实际用途），但我没有找到任何文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:58:59.117

我不确定这是否仍然相关。但是您在一个主机上有一个名为“vm”的属性，它列出了该主机上的虚拟机。

顺便说一句，我不确定您是否熟悉它，但您始终可以使用虚拟中心的**mob（托管对象浏览器）**。您可以通过浏览到此 url 来做到这一点：

```
https://<vcenter-ip>/mob 
```

输入您的凭据后，您将进入虚拟托管对象的 html 浏览器。从“内容”开始，您可以从那里前往 rootFolder->childEntity 等等。当您到达 host(HostSystem) 时，您会在属性表的末尾看到我提到的属性“vm”。祝你好运 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-08T10:43:50.407

通过 C# 代码连接到 vCenter 后，您可以获取所有 VM 信息，以下是示例代码开始，以下代码连接到您的 vCenter 服务器并获取所有 VM 的信息作为列表并使用此列表您可以遍历到您要访问的 VM 的所有属性。

```
//Include VMware C# sdk VMware.VIM dll as reference in your project
//try to invoke client connection
VMware.Vim.VimClientImpl client = new VimClientImpl();
client.Connect(@"VMware_Server_IP/sdk");
// Login using username/password credentials
UserSession session = client.Login("USERNAME", "PASSWORD");

//Getting all the virtual machine and the datastore info from the VCenter
NameValueCollection filter = new NameValueCollection();
IList vmList = client.FindEntityViews(typeof(VirtualMachine), null, filter, null);` 
```

您可以搜索*FindEntityViews*，因为它根据需要接受不同的参数，这里我使用**“VirtualMachine”**参数获取 VM 的信息，您可以使用**“Datastore”**获取所有数据存储信息等。希望它有助于解决您的问题。

# vba - Excel/VBA 细分字段

> ID：13126533
> 
> 赞同：1
> 
> 时间：2012-10-29T17:19:13.523
> 
> 标签：vba, excel

我必须完成一项复杂的任务，但我会尝试解释。我有一个包含 23000 行数据的 excel 文件，我正在将其导入网站。每个都有一个像这样的字段：

```
Category | other data | other data 2 

Foods/Dog/Treats Pre-Pack | 1223 | image.jpg 
```

我需要它来抓取每一行并在其下方为每个“/”添加一个新行，因此将上面的内容变为：

```
Category | other data | other data 2 

[blank in original line] | 1223 | image.jpg

Foods | [blank field] | [blank field]

Foods/Dog | [blank field] | [blank field]

Foods/Dog/Treats Pre-Pack | [blank field] | [blank field] 
```

因此脚本需要为每个类别添加一个新行，但将原始类别保留在其前面。所以变成`category/category2/category 3`了4行：`[blank] - category - category/category2 - category/category2/category 3`

有谁知道这样做的方法或脚本？

谢谢，西蒙

注意：工作表称为“测试”，类别列从 E2 开始，到 E23521

我有以下脚本：

```
Sub test()
    Dim a, i As Long, ii As Long, e, n As Long
    Dim b(), txt As String, x As Long
    With Range("a1").CurrentRegion
        a = .Value
        txt = Join$(Application.Transpose(.Columns(5).Value))
        With CreateObject("VBScript.RegExp")
            .Global = True
            .Pattern = "/"
            x = .Execute(txt).Count * 2
        End With
        ReDim b(1 To UBound(a, 1) + x, 1 To UBound(a, 2))
        For i = 1 To UBound(a, 1)
            If a(i, 5) <> "" Then
                For Each e In Split(a(i, 5), "/")
                    n = n + 1
                    For ii = 1 To UBound(a, 2)
                        b(n, ii) = a(i, ii)
                    Next
                    b(n, 5) = Trim$(e)
                Next
            End If
        Next
        .Resize(n).Value = b
    End With
End Sub 
```

这似乎根据我的需要创建了一个新行，但不会使斜线结构随着每个行向上移动。并且不要在所有新的上添加一个空行并将原始类别值设为空白。

解决了：

```
Sub splitEmUp()
    Dim splitter() As String 'this is storage space for the split function
    Dim i As Integer ' main-loop for counter "which cell we are on"
    Dim j As Integer ' splitter for-loop counter "which section of the split are we on"
    Range("E2").Activate 'starting in cell e2 because row 1 is headers and category is located in the B column

   For i = 0 To 24000 'from beginning to end i=0 means e2, i=1 means e3
        ActiveCell.Offset(i, 0).Value = Replace(ActiveCell.Offset(i, 0).Value, " / ", "!@#")
        splitter = Split(ActiveCell.Offset(i, 0), "/") 'split the cell based on / and store it in splitter
        If (UBound(splitter)) > 0 Then 'if a split occurred
            ActiveCell.Offset(i, 0).Value = "" 'set the activecell to blank
            Debug.Print i
            ActiveCell.Offset(i + 1, 0).EntireRow.Insert shift:=xlDown, copyorigin:=xlFormatFromLeftOrAbove 'insert a new row and shift everything down

            ActiveCell.Offset(i + 1, 0).Value = splitter(0) 'initialize the "Down" cells
            ActiveCell.Offset(i + 1, 0).Value = Replace(ActiveCell.Offset(i + 1, 0).Value, "!@#", " / ")
            For j = 1 To UBound(splitter)
                ActiveCell.Offset(i + j + 1).EntireRow.Insert shift:=xlDown, copyorigin:=xlFormatFromLeftOrAbove 'create another row if it needs to
                ActiveCell.Offset(i + (j + 1), 0).Value = ActiveCell.Offset(i + j).Value & "/" & splitter(j) 'fill out the new row
                ActiveCell.Offset(i + (j + 1), 0).Value = Replace(ActiveCell.Offset(i + (j + 1), 0).Value, "!@#", " / ")
            Next
            i = i + UBound(splitter) + 1 'need to step I past the new cells
            ReDim splitter(0)
            Erase splitter 'erase and eliminate splitter to avoid carry over.

        End If
    Next

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:34:30.217

这就是我想出的。请务必更改工作表名称以适合您的工作簿。还要确保更改输入范围以适合您自己的单元格输入范围。

```
Function SplitAndWrite(inputCell As Range, TopOfOutputRange As Range, sep As String) As Range

Dim texts() As String, i As Integer, outputText As String
texts = Split(inputCell.Value, sep)
outputText = ""
TopOfOutputRange = ""   'your blank line
For i = LBound(texts) To UBound(texts)
    outputText = outputText & sep & texts(i)
    TopOfOutputRange.Offset(i + 1) = outputText
Next i

Set SplitAndWrite = TopOfOutputRange.Offset(UBound(texts) + 1)

End Function

Sub THEPOPULATOR()

    Dim s3 As Worksheet, s4 As Worksheet
    Set s3 = Sheets("Sheet1")
    Set s4 = Sheets("Sheet2")
    Dim inputrange As Range, c As Range, outputrange As Range
    Set outputrange = s4.Range("A1")
    Set inputrange = s3.Range(s3.Cells(2, 1), s3.Cells(2, 1).End(xlDown)) 'cells(2,1) = "A1". change this to your top input cell. then the second half will find the bottom cell on its own. This is the same as pressing Ctrl+down

    For Each c In inputrange
        s3.Range(c.Offset(0, 1), c.Offset(0, c.End(xlToRight).Column)).Copy outputrange.Offset(1, 1)
        Set outputrange = SplitAndWrite(c, outputrange.Offset(1), "/")
    Next c

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:39:44.543

这是另一个解决方案的示例[How to split cell in a row with Excel](https://superuser.com/q/486294/160170)，我对其进行了一些修改以适应您的情况：

```
Public Sub solutionJook()
  Dim arr() As Variant
  Dim arrSum() As Variant
  Dim arrResult() As Variant
  Dim arrTemp As Variant

  Dim i As Long
  Dim j As Long
  Dim h As Long
  Dim lngSplitColumn As Long
  'input of array to seperate -> should cover all columns+rows of your data
  arr = Range("A1:C2")
  'specify which column has the values to be split up -> here this is the category column
  lngSplitColumn = 2

  'using the boundries of the given range,
  'arrSum has now always the right boundries for the first dimension
  ReDim Preserve arrSum(LBound(arr, 2) To UBound(arr, 2), 1 To 1)

  'create the array with seperated A B C
  For i = LBound(arr, 1) To UBound(arr, 1)
    'use split to make Foods/Dog/Treats Pre-Pack into an array, using '\' (chr(92)) as indicator
    arrTemp = Split(arr(i, lngSplitColumn), Chr(92))
    'every value of arrTemp creates a new row
    For j = LBound(arrTemp) To UBound(arrTemp)
      'loop through all input columns and create the new row
      For h = LBound(arr, 2) To UBound(arr, 2)
        If h = lngSplitColumn Then
          'setup the value of the splitted column
          Dim k as long
          arrSum(h, UBound(arrSum, 2)) = arrTemp(LBound(arrTemp))
          for k = LBound(arrTemp)+1 to j
            arrSum(h, UBound(arrSum, 2)) = arrSum(h, UBound(arrSum, 2)) & "\" & arrTemp(k)  'set Foods Foods/Dog Foods/Dog/Treats Pre-Pack
          next k
        Else
          'setup the value of any other column
          arrSum(h, UBound(arrSum, 2)) = arr(i, h) 'set Value of Column h
        End If
      Next h

      ReDim Preserve arrSum(LBound(arr, 1) To UBound(arr, 2), _
                            LBound(arrSum, 2) To (UBound(arrSum, 2) + 1))
    Next j
  Next i

  'clean up last empty row (not realy necessary)
  ReDim Preserve arrSum(LBound(arr, 1) To UBound(arr, 2), _
                        LBound(arrSum, 2) To (UBound(arrSum, 2) - 1))

  'setup transposed result array
  ReDim arrResult(LBound(arrSum, 2) To UBound(arrSum, 2), _
                  LBound(arrSum, 1) To UBound(arrSum, 1))

  'transpose the array
  For i = LBound(arrResult, 1) To UBound(arrResult, 1)
    For j = LBound(arrResult, 2) To UBound(arrResult, 2)
      arrResult(i, j) = arrSum(j, i)
    Next j
  Next i

  'specify target range
  Range(Cells(1, 5), Cells(UBound(arrResult, 1), 4 + UBound(arrResult, 2))) = arrResult

End Sub 
```

但是，您可能需要调整目标范围。

`Cells(1,5)`-> E1是粘贴的起点

# java - 消息驱动 Bean 吞下 java.lang.Error

> ID：13126536
> 
> 赞同：1
> 
> 时间：2012-10-29T17:19:20.937
> 
> 标签：java, jakarta-ee, glassfish, ejb-3.1, jboss-mdb

这是一个非常奇怪的行为：我有一个`NoSuchMethodException`（因为编译和运行时库版本不匹配），容器吞下了它，我没有机会抓住它。看看这段代码：

```
@MessageDriven(...)
public class NotificationReceiver implements MessageListener {
@Override
public void onMessage(Message message) {
    try {
        String textMessage = ((TextMessage) message).getText();
        logger.debug("NOTIFICATION RECEIVED: " + textMessage);
        ...
        String string = rootNode.get("id").asText();
        logger.debug("ID: " + string);

    } catch (Throwable e) {
        logger.debug("ERROR", e);
    }
} 
```

此代码用于收听 JSON 格式的文本消息，但每当我收到它时，我从来没有得到点 ID

```
DEBUG [p: thread-pool-1; w: 12] NotificationReceiver - NOTIFICATION RECEIVED: {"name":"X","id":"123"} 
```

在此之后，我没有收到任何日志...

后来我将这段代码移到另一个无状态 EJB 的`@Asynchronous`方法中，并从 MDB 中调用它。然后我确实收到了异常：

```
DEBUG [Ejb-Async-Thread-10] NotificationReceiverAsync - NOTIFICATION RECEIVED: {"name":"X","id":"123"}
DEBUG [Ejb-Async-Thread-10] NotificationReceiverAsync - ERROR java.lang.NoSuchMethodError: org.codehaus.jackson.JsonNode.asText()Ljava/lang/String; 
```

为什么我在 MDB 中从未收到异常？

应用服务器：Glassfish 3.1.1

# design-patterns - 设计模式 - 立面

> ID：13126542
> 
> 赞同：0
> 
> 时间：2012-10-29T17:19:40.427
> 
> 标签：design-patterns

外观设计模式的中心是“关联”而不是继承，对吗？

如果有这样的汽车系统：

车（类）

-> 身体（类）

-> 方向盘（类）

-> Chassie（类）

-> 轮子（类）

那么这些类不是从 Car 继承的吗？因为从理论上讲，我被教导继承具有“可以”关系..“人可以成为学生”......“汽车有底盘”这会推断它是关联？

有任何想法吗？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:32:32.520

是的。那是对的。立面以协会为中心。它包装了各种相关的子系统（它们大多一起工作），为客户端提供一个有意义且简单的接口。子系统不必处于相同的继承层次结构中，但几乎总是相关联的。

您的汽车示例：

[http://www.go4expert.com/forums/showthread.php?t=5127#facade](http://www.go4expert.com/forums/showthread.php?t=5127#facade)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T17:48:31.843

我会同意你的。外观模式的想法是，您将一堆*关联*的对象包装在外观中，以便更轻松地管理和操作这些对象。

正如瓦利德汗在评论中所说，这个例子有点模糊了构图的界限，因为汽车是由不同的部分组成的。我们可能会遇到这样一种情况，即构成外观的对象都一起工作，而不是直接成为某个更大实体的一部分。

汽车示例使事情变得简单，因为我们可以做一些`car.turnLeft()`可能会影响车轮和方向盘的事情。对象之间的协调由`Car`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T18:29:24.517

我**不**同意你的观点，外观既不以关联为中心，也不以继承为中心。

> 外观是一个对象，它为更大的代码体提供简化的接口

这意味着它用于提供子系统的更高级别视图并隐藏其复杂性，无论子系统的实现是基于什么，关联或继承。

外观的另一种替代方法是`transparent facade`让客户端能够通过它，并访问子系统的各个操作。

你问的汽车系统只是一个例子，模式不限于此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T18:45:32.283

我同意下面的对象是关联还是继承是一个实现细节的观点，它与模式的功能没有太大关系。

坦率地说，Facade 是一种试图完成与组件化相同的事情的模式：你不能总是让操作一堆不同的东西变得容易，但你需要一个接口。您一直看到在 Java 世界中应用 Facade 的最常见示例是提供一种使用 JavaMail 接口的方法。您甚至不想处理 Sessions。这很傻。同样，Spring 的持久性类是一个门面，尽管它们允许您使用 Aspects 忽略会话，并且它们还引入了简化的危险，因为会话在连续调用中实际上是不同的，因此[OpenSessionInView](https://community.jboss.org/wiki/OpenSessionInView)。

在想知道 Facade 是否适用时要问的关键问题是您将能够隐藏什么？你真的能做到吗？

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-29T17:31:23.693

Facade 模式是 Adapter 模式的变体。适配器模式“包装”一个接口并将其转换为另一个接口（使其适应客户期望的形式）。通常用于使新界面适应较旧的客户端软件。或者用一个崭新的、大概更干净的界面来包装旧的、笨拙的 Big-Ball-O-Mud 软件，着眼于以后替换旧的笨拙的代码。

另一方面，Facade 模式包装了一个接口，将它的简化形式呈现给客户端。

两者都与组合与继承无关。

您想查阅Eric Freeman 和 Elizabeth Freeman的《 *[Head First Design Patterns 》一书。](http://www.headfirstlabs.com/books/hfdp/)*就学习使用设计模式做一些事情而言，远比 GO4 的书，恕我直言。

![Head First 设计模式封面](../Images/e5098a870d1708fc2fbd41ca3a5c75ac.png)

# javascript - 将 LI 索引绑定到 Observable

> ID：13126544
> 
> 赞同：0
> 
> 时间：2012-10-29T17:19:47.833
> 
> 标签：javascript, jquery, html, knockout.js

我一直在思考这个问题，似乎无法就如何完成它得出结论。基本上，我使用的是 jQuery UI 和 KnockOut，并且我有一个代表优先项目组的 OL。我有 jQuery 可排序性所有工作，这是简单的部分。

我真正想要完成的是一种使用 KO 和 MVVM 将 OL 中的索引位置绑定到`priority`视图模型的属性的方法`projects collection`。这是我的数据上下文返回的对象的样子

`{ priority: ko.observable(1), title: "Lorum ipsum dolor sit amet." }`

这是我的虚拟机的简化版本。

```
var ViewModel = function () {

            this.projects = new ko.observableArray(ctx.getItems());
  } 
```

如果我可以避免它，我不想使用事件来管理同步优先级。当然，如果我必须这样做，但如果我能在 MVVM 模式中找到一种方法，我愿意这样做。

# visual-studio - 我可以使用什么正则表达式将 @Url.Content("~/path/to/resource") 替换为 "~/path/to/resource"

> ID：13126546
> 
> 赞同：0
> 
> 时间：2012-10-29T17:19:48.003
> 
> 标签：visual-studio, razor, asp.net-mvc-4

我已经将另一个 MVC 3 项目升级到 MVC 4，我已经厌倦了用它们的-less 值替换`<link>`href 和`<script>`src值。`@Url.Content()`（MVC 4 Razor 2 将自动解析任何以 开头的值的内容路径`~/`）。

我可以在 Visual Studio 中使用什么正则表达式来一次全部替换它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:19:48.003

**找什么：**

`"\@Url\.Content\({:q}\)"`

**用。。。来代替：**

`\1`

确保选中**使用**并选择**正则表达式**。

# continuous-integration - Hudson - 如何使用文件名和文件内容通过文件触发构建

> ID：13126547
> 
> 赞同：0
> 
> 时间：2012-10-29T17:19:49.010
> 
> 标签：continuous-integration, hudson

目前我正在使用 Hudson 进行持续集成服务器解决方案。

现在我正在寻找一个构建作业，每次在特定目录中找到文件时都会触发它。

我发现了一些插件，它们允许 Hudson 监视和轮询目录中的文件（文件找到触发器、FSTrigger 和 SCM 文件触发器），但它们都不允许我从找到的文件中获取文件名和文件内容并在期间使用这些值构建执行（我的想法是将这些值传递给 shell 脚本）

你们知道这是否可以通过任何其他 Hudson 插件来实现？或者也许我错过了一些东西。

谢谢，戴维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:31:01.797

两个有效的解决方案：

*   正如**[Christopher](https://stackoverflow.com/users/234938/christopher)**所建议的，在构建脚本的开头通过 Shell/Batch 命令从文件中读取值。
    （缺点是 Hudson 不会以任何方式了解这些值）

*   使用**[Envfile 插件](http://wiki.hudson-ci.org/display/HUDSON/Envfile+Plugin)**读取文件的内容并将其作为一组键值对进行交互。

请注意，如果*File Found Trigger* “吃掉”标志文件，您可能需要创建两个文件 -
一个用于保存键值对，另一个用作*File Found Trigger*的标志。

# objective-c - 在 obj-c 中与 NSArray 一起使用的长度混淆

> ID：13126559
> 
> 赞同：0
> 
> 时间：2012-10-29T17:20:33.423
> 
> 标签：objective-c, ios, nsarray, nsobject

我正在使用这行代码来遍历一个数组

```
for (int i = 0; i < [[GameP objectForKey:@"groundMap"] length]; i += 5) { 
```

来自 AS3 背景，我认为“长度”会给我一个数组/对象的长度，但我刚刚发现“计数”似乎做同样的事情，我找不到任何关于使用“长度”，但它似乎工作。

谁能告诉我..

1.  什么是“长度”以及它如何/为什么在该行中工作？
2.  计数和长度有什么区别？
3.  哪个更好用？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T17:26:57.057

假设`GameP`是一个字典，调用`objectForKey:`返回一个类型为 的对象`id`。因此，您试图`length`在`id`. 这将编译得很好，但在运行时假设“groundMap”的对象是一个数组可能是错误的。数组只有`count`方法，没有`length`方法。

对于每个循环迭代，您还可以从字典中访问一个对象。你真的应该这样写你的代码：

```
NSArray *groundMap = [GameP objectForKey:@"groundMap"];
NSUInteger count = groundMap.count;
for (int i = 0; i < count ; i += 5) {
} 
```

这更容易阅读，编译器可以进行更好的错误检查。它也更有效率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:26:42.957

首先，您必须知道字典中对象的类别`GameP`。如果`NSArray`你必须使用`count`这里是没有办法使用另一种方法。

你可以在课堂上找到`length`方法。`NSSString`

# java - jasper/jfreechart 异常错误

> ID：13126562
> 
> 赞同：0
> 
> 时间：2012-10-29T17:20:35.373
> 
> 标签：java, apache, jsp, jfreechart

我对网络开发真的很陌生...我正在尝试在 JSP 上绘制区域图（这是练习版..稍后，我必须制作从数据库读取数据的程序），当我尝试运行代码时我收到以下错误，我不知道如何解决这个问题......:(

代码

```
 <%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<%@ page  import="java.awt.*" %>
<%@ page  import="java.io.*" %>
<%@ page  import="org.jfree.chart.*" %>
<%@ page  import="org.jfree.chart.axis.*" %>
<%@ page  import="org.jfree.chart.entity.*" %>
<%@ page  import="org.jfree.chart.labels.*" %>
<%@ page  import="org.jfree.chart.plot.*" %>
<%@ page  import="org.jfree.chart.renderer.category.*" %>
<%@ page  import="org.jfree.chart.urls.*" %>
<%@ page  import="org.jfree.data.category.*" %>
<%@ page  import="org.jfree.data.general.*" %>

<%
  final double[][] data = new double[][]{
  {110, 200, 220, 165, 199},
  {100, 204, 101, 101, 240}
  };

 final CategoryDataset dataset = DatasetUtilities.createCategoryDataset("Box", "ape", data);

 final JFreeChart chart = ChartFactory.createAreaChart("Area Chart", "", "Value", dataset, PlotOrientation.VERTICAL,true, true, false);

 final CategoryPlot plot = chart.getCategoryPlot();
 plot.setForegroundAlpha(0.5f);

 chart.setBackgroundPaint(new Color(249, 231, 236));

 try {
  final ChartRenderingInfo info = new ChartRenderingInfo(new StandardEntityCollection());

     String root = getServletContext().getRealPath("/");
   String path = root + "\\" + "areachart.png";

 final File file1 = new File(path);

 ChartUtilities.saveChartAsPNG(file1, chart, 600, 400, info);
  } catch (Exception e) {
  out.println(e);
  }

%>

<html>
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>JSP Page</title>
  </head>
  <body>
  <IMG SRC="areachart.png" WIDTH="600" HEIGHT="400" BORDER="0" USEMAP="#chart">
  </body>
</html> 
```

错误：

```
org.apache.jasper.JasperException: Unable to compile class for JSP: 

An error occurred at line: 31 in the jsp file: /graph.jsp
The method createAreaChart(String, String, String, CategoryDataset, boolean, boolean, boolean) in the type ChartFactory is not applicable for the arguments (String, String, String, CategoryDataset, PlotOrientation, boolean, boolean, boolean)
28: 
29:  final CategoryDataset dataset = DatasetUtilities.createCategoryDataset("Box", "ape", data);
30: 
31:  final JFreeChart chart = ChartFactory.createAreaChart("Area Chart", "", "Value", dataset, PlotOrientation.VERTICAL,true, true, false);
32: 
33:  final CategoryPlot plot = chart.getCategoryPlot();
34:  plot.setForegroundAlpha(0.5f);

Stacktrace:
    org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:102)
    org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:331)
    org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:469)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:378)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:353)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:340)
    org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:646)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:357)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

提前致谢！

编辑：

如果我删除 PlotOrientation.VERTICAL.. 我得到这个错误是一样的吗？;/我不太确定我做错了什么:(

```
org.apache.jasper.JasperException: Unable to compile class for JSP: 

An error occurred at line: 31 in the jsp file: /graph.jsp
The method createAreaChart(String, String, String, CategoryDataset, boolean, boolean, boolean) in the type ChartFactory is not applicable for the arguments (String, String, String, CategoryDataset, boolean, boolean, boolean)
28: 
29:  final CategoryDataset dataset = DatasetUtilities.createCategoryDataset("Box", "ape", data);
30: 
31:  final JFreeChart chart = ChartFactory.createAreaChart("Area Chart", "", "Value",dataset,true, true, false);
32: 
33:  final CategoryPlot plot = chart.getCategoryPlot();
34:  plot.setForegroundAlpha(0.5f);

Stacktrace:
    org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:102)
    org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:331)
    org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:469)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:378)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:353)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:340)
    org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:646)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:357)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:28:18.110

如果您查看错误，则您传递的参数数量错误。您正在传递以下内容：

`(String, String, String, CategoryDataset, PlotOrientation, boolean, boolean, boolean)`

它期待以下参数：

`(String, String, String, CategoryDataset, boolean, boolean, boolean)`.

删除`PlotOrientation`它应该可以消除该错误。

# javascript - 数据库中要在轴上使用的日期和时间值

> ID：13126563
> 
> 赞同：0
> 
> 时间：2012-10-29T17:20:40.160
> 
> 标签：javascript, sql, dojo, dojox.charting

我正在尝试使用日期而不是默认的 1、2、3、4 等向我的 X 轴添加轴标签。

从服务器返回的 date_time 也需要转换为可读的日期/时间。

任何帮助表示赞赏。

**代码**

```
<script type="text/javascript"> 

var chart;
var store;

require(["dojo/request/xhr",
    "dojo/json",
    "dojo/store/Memory",
    "dojo/store/Observable",
    "dojox/charting/StoreSeries",
    "dojox/charting/Chart2D", 
    "dojox/charting/plot2d/Lines", 
    "dojox/charting/axis2d/Default",    
    "dojo/domReady!"], 

    function(xhr, JSON, Memory, Observable, StoreSeries, Chart) {

    xhr("json_result.php",{
            handleAs: "json"
        }).then(function(data){ 

            store = Observable(new Memory({data: data}));

            chart = new Chart("graph");

            chart.addPlot("default", {type: "Lines", markers:true});

            chart.addAxis("x", {title:"Time", titleOrientation:"away"});
            chart.addAxis("y", {vertical: true, majorTick: false, title:"Load"});

            chart.addSeries("Load Cell 1", new StoreSeries(store, { query: { load_cell_id:0 }}, "kn"));
            chart.addSeries("Load Cell 2", new StoreSeries(store, { query: { load_cell_id:1 } }, "kn"));

            chart.render();
        });         
});

</script> 
```

**JSON 结果**

```
[{"date_time":1351280845,"load_cell_id":0,"kn":56.8},{"date_time":1351280845,"load_cell_id":1,"kn":45},{"date_time":1351367241,"load_cell_id":0,"kn":23.7},{"date_time":1351367241,"load_cell_id":1,"kn":34.9},{"date_time":1351417945,"load_cell_id":0,"kn":56.9},{"date_time":1351417945,"load_cell_id":1,"kn":67.8},{"date_time":1353914066,"load_cell_id":0,"kn":12.4},{"date_time":1353914066,"load_cell_id":1,"kn":19.43},{"date_time":1353992714,"load_cell_id":0,"kn":45.8},{"date_time":1353992714,"load_cell_id":1,"kn":40.8}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T23:24:04.600

尝试以下，它关于控制索引（主要），然后在标签生成函数中格式化 data-date_time。

```
ddl =>             "dojo/date/locale", require this

chart.addAxis("x", {
    title: "Time",
    titleOrientation: "away",
    includeZero: true,
    //from: 0, to: (data.length -1),
    minorTicks: false,
    labelFunc: function(n){              
        // I am assuming that your timestamp needs to be multiplied by 1000\. 
        var date = new Date(parseInt(data[n].date_time) * 1000);
        return ddl.format(date,  {
            selector: "date",
            datePattern: "dd MMMM"
        });

    }
}); 
```

次要刻度将在当前主要刻度上产生 0.1、0.2 的加法 - 并且与数组索引配合得不好。

# barcode - 如何使用 EMDK 2.6 或 DataWedge 解释 GS1-128 UCC/EAN-128 Motorola？

> ID：13126568
> 
> 赞同：2
> 
> 时间：2012-10-29T17:20:59.950
> 
> 标签：barcode, motorola-emdk, code128, datawedge

我正在尝试使用摩托罗拉 MC3190 设备读取 ean-128。

读取示例字符串**(00)123456789012345675(15)010105**，Emdk 和 Datawedge 都返回：**]C10012345678901234567515010105**。

我读取了 FNC1 字符 (" *]C1* " )，但其他参数，在本例中为 (15)，我如何找到它？没有识别它的特殊字符！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T18:29:25.017

看起来您正在尝试读取 GS1-128。条形码中的第一个 AI (00) 是 SSCC（[此处](http://en.wikipedia.org/wiki/GS1-128#Full_list_of_Application_Identifiers "AI参考这里")为 AI 参考），它是 18 位的固定长度。所以你会知道 AI 15 将在那之后立即启动。

关于使用 DataWedge 与 EMDK 读取条码：DataWedge 在我尝试时无法处理 GS1-128 中的控制字符。当然，这是一年前的事情（使用 .NET CF 2.0，以及当时可用的最新版本 DataWedge），所以从那时起情况可能有所改善。

EMDK 应该正确读取 GS1-128s。当您尝试查看字符串表示形式（例如，在调试器中）时，您可能会看到一些奇怪的东西，因为 FNC1 是不可打印的控制字符。但在内部，所有字节都应该在那里。

# c# - 如何在用户输入中搜索特定值

> ID：13126575
> 
> 赞同：1
> 
> 时间：2012-10-29T17:21:31.763
> 
> 标签：c#, asp.net, sql, vb.net

我有一个网站，我正在尝试将多个条形码添加到数据库中。批量添加效果很好，除了我有一个“特殊”系列的条形码，最后包含一个“F”。这表示要调用一个不同的存储过程来插入书籍。但是，每当我尝试运行它时，我都会收到一个 SQL 错误。条形码末尾的 F 是问题所在。如果我尝试添加 1000 - 1005 它工作正常。如果我做 1000F - 1005F 它不是因为我的 SQL 不知道如何处理 F...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:40:10.247

首先，您的代码为 sql 注入打开，您应该尽快更正此问题。您可以在此处阅读有关 sql 注入的信息：

[http://msdn.microsoft.com/en-us/library/ff648339.aspx](http://msdn.microsoft.com/en-us/library/ff648339.aspx)

现在关于你的问题。我几乎可以肯定你在设置 mySQL 时缺少 ' 字符。使用 SqlCommand 以安全的方式传递参数。提供的链接中也描述了传递参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:39:00.420

看起来你没有用撇号包装你的条形码

试试这个：第一个 mySQL 包含文本`'`

这是假设 usp_Insert_Encrypted 正在接收字符串

```
Dim mySQL as String
    if InStr(x_sBarcode.Text, "F") > 1 then 'Encrypted Coupon Books           
       mySQL= "EXEC usp_Insert_Encrypted '" & x_sBarCode.Text & "','"  & x_sBarCodeSeriesEnd.Text & "'," & v_lBookTypeId
      ''---------------------------------^-----------------------^--^--------------------------------^
    Response.Write(mySQL)
    else
       mySQL = "EXEC sp_BulkInsert 1," & x_sBarCode.Text & "," & x_sBarCode.Text & "," & x_sBarCodeSeriesEnd.Text
    end if 
```

**更新**：

添加了一些----^指向我的意思`'`

你有：

```
mySQL= "EXEC usp_Insert_Encrypted " & x_sBarCode.Text & ","  & x_sBarCodeSeriesEnd.Text & "," & v_lBookTypeId 
```

它可能需要在哪里：（假设前两个参数是文本，最后一个是整数

```
mySQL= "EXEC usp_Insert_Encrypted '" & x_sBarCode.Text & "','"  & x_sBarCodeSeriesEnd.Text & "'," & v_lBookTypeId
      ''--------------------------^-----------------------^--^--------------------------------^ 
```

# awk - Awk 新手。与负数格式作斗争

> ID：13126577
> 
> 赞同：4
> 
> 时间：2012-10-29T17:21:38.173
> 
> 标签：awk

目标：仅输出大于 1 且小于 -1 的数据

或者

输出介于 1 和 -1 之间的数据

我有 awk 的基础知识，可以打印第 2 列（我的数据所在的位置）注意我还指定了 0-1 的范围

```
awk '/[0-1]/  {print $2}' test.dat 
```

我还需要行号，所以我添加了 NR ...

```
awk '/[0-1]/  {print $2 NR}' test.dat 
```

为了确保我清楚，重点是确定哪些数据行超出了可接受的范围，因此我们可以在分析中忽略它们。（即任何大于 1 或小于 -1 的东西变化太大）。

你能提供的任何帮助都会很棒。我在下面粘贴了一些示例数据。

[http://pastebin.com/7tpBAqua](http://pastebin.com/7tpBAqua)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T18:02:38.363

不确定是否要评估每一列中的数据，或者是否需要测试特定列。测试单个列是最简单的；测试多个或所有列是该模式的一个相当简单的重复扩展。由于您特别提到了第 2 列，假设您只想在第 2 列介于 -1 和 1 之间时打印它：

```
awk -F, '($2 >= -1) && ($2 <= 1) { print $2 }' 
```

要测试该字段是否大于 1 或小于 -1：

```
awk -F, '($2 <= -1) || ($2 >= 1) { print $2 }' 
```

打印不同的字段或整行 ( `$0`) 应该是相当明显的。`($2 >= -1) && ($2 <= 1) { print $2 }`要检查每个字段，只需为您感兴趣的每个字段重复整个子句（很快就会变得冗长），或者类似这样的内容（未经测试）：

```
awk -F, '{ for (i = 1; i <= NF; ++i) if (($i >= -1) && ($i <= 1)) print $i; }' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T19:06:58.220

```
awk -F'[ ,]' 'NR>2{for (i=2;i<=NF;i++) if ($i<-1 || $i>1) { print NR; next } }' file 
```

# sql - SQL Server 2008 - #tmp 表在 exec 命令中运行时抛出错误

> ID：13126578
> 
> 赞同：2
> 
> 时间：2012-10-29T17:21:39.860
> 
> 标签：sql, sql-server, tsql, temp-tables

> **可能重复：**
> [TSQL 从动态 SQL 写入临时表](https://stackoverflow.com/questions/688161/tsql-writing-into-a-temporary-table-from-dynamic-sql)

```
 ALTER PROCEDURE [dbo].[usp_ServicesStats1](@PERIOD VARCHAR(30) )

 AS
 BEGIN
-- SET NOCOUNT ON added to prevent extra result SETs FROM
-- interfering with SELECT statements.
SET NOCOUNT ON;

 DELETE FROM servicesstats1;
 DECLARE @QUERY  NVARCHAR(MAX);

 DECLARE @mainTable VARCHAR(50)

 SET @mainTable = '[ServicesStats' + @PERIOD + ']';

 SET @QUERY = 'INSERT INTO servicesstats1(Department,StudentUsers) 
 SELECT department,COUNT(*) FROM ' +  @mainTable + 
 'GROUP BY department';

 EXEC(@QUERY); -- runs okay!

 IF OBJECT_ID('tempdb..[##tmp5]') is not null 
BEGIN 
    drop table [##tmp5] 
END

 SET @QUERY = ' SELECT studentid
 INTO [##tmp5]
 FROM ' + @mainTable + '
 GROUP BY studentid
 having COUNT(*)=1; select * from [##tmp5];';
 PRINT @QUERY;

 EXEC sp_executesql @QUERY;

 IF OBJECT_ID('tempdb..[#tmp3]') is not null 
BEGIN 
    drop table [#tmp3] 
END

 SELECT S.department,COUNT(*) AS No INTO #TMP3 --  ONLY THIS SERVICE 
 FROM servicesstats_0511_0412 s, #TMP5 T    -- this is not being replaced yet by the @mainTable
 WHERE S.STUDENTID = T.STUDENTID
 GROUP BY S.department 
```

错误 ：

> *无效的对象名称“#TMP5”。*

问题是临时表`#tmp5`，现在如果我要运行它，它会工作，但它不是动态的。

```
SELECT studentid
INTO [#tmp5]
FROM tableName
GROUP BY studentid
having COUNT(*)=1; 
```

基本上我这样做是因为动态表名。但是`#tmp`正在抛出那个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:32:05.037

您正在使用一个本地临时表，它只存在于您的动态 sql 范围内，因此您可以按如下方式引用它而不会出错：

```
SET @QUERY = ' SELECT studentid
INTO [#tmp5]
FROM ' + @mainTable + '
GROUP BY studentid
having COUNT(*)=1; 
SELECT * 
FROM [#tmp]';

EXEC sp_executesql @QUERY; 
```

但是，当您尝试在动态 sql 范围之外访问它时，您将无法再从 SSMS 中的另一个窗口访问它。您需要使用全局临时表，然后您可以访问它：

```
SET @QUERY = ' SELECT studentid
INTO [##tmp5]
FROM ' + @mainTable + '
GROUP BY studentid
having COUNT(*)=1;';

EXEC sp_executesql @QUERY;

SELECT  *
FROM    [##Tmp5]; 
```

请注意多用户环境中可能出现的问题。

# php - PHP DOMNode::C14N() 省略根元素的第二个命名空间

> ID：13126581
> 
> 赞同：1
> 
> 时间：2012-10-29T17:21:53.157
> 
> 标签：php, xml, xml-signature, canonicalization

我正在尝试验证使用 XMLDSig 签名的 XML 消息。为了创建消息摘要，我需要先规范化消息。它工作正常，除了 DOMNode::C14N() 从下面的代码中删除了第二个命名空间：

```
<?xml version="1.0" encoding="UTF-8"?><DirectoryRes xmlns="http://www.idealdesk.com/ideal/messages/mer-acq/3.3.1" xmlns:ns2="http://www.w3.org/2000/09/xmldsig#" version="3.3.1">
    <createDateTimestamp>2012-10-29T17:04:56.374Z</createDateTimestamp>
    <Acquirer>
        <acquirerID>0050</acquirerID>
    </Acquirer>
    <Directory>
        <directoryDateTimestamp>2012-10-29T17:04:56.374Z</directoryDateTimestamp>
        <Country>
            <countryNames>Deutschland</countryNames>
            <Issuer>
                <issuerID>NLINGB2U152</issuerID>
                <issuerName>Issuer Simulator</issuerName>
            </Issuer>
        </Country>
    </Directory>
</DirectoryRes> 
```

规范化上述 XML 会产生以下 XML：

```
<DirectoryRes xmlns="http://www.idealdesk.com/ideal/messages/mer-acq/3.3.1" version="3.3.1">
    <createDateTimestamp>2012-10-29T17:04:56.374Z</createDateTimestamp>
    <Acquirer>
        <acquirerID>0050</acquirerID>
    </Acquirer>
    <Directory>
        <directoryDateTimestamp>2012-10-29T17:04:56.374Z</directoryDateTimestamp>
        <Country>
            <countryNames>Deutschland</countryNames>
            <Issuer>
                <issuerID>NLINGB2U152</issuerID>
                <issuerName>Issuer Simulator</issuerName>
            </Issuer>
        </Country>
    </Directory>
</DirectoryRes> 
```

我正在测试的远程服务器在计算消息摘要时会保留此名称空间，因此验证显然会失败。我通过在创建自己的摘要之前先重新添加命名空间来确认此问题，以与消息中嵌入的摘要进行比较（在发布之前，签名已从上面的 XML 代码中剥离）。然而，代码必须与不同的服务器一起使用，其中一些可能会或可能不会添加命名空间（它们不是规范的一部分，但据我所知，只是添加一个冗余的命名空间声明不应该受到伤害）。[我在W3C XML C14N 规范](http://www.w3.org/TR/xml-c14n#SuperfluousNSDecl "W3C XML C14N specsquot;")中查找了这个他们说根元素应该始终保留它们的命名空间，除了空的默认命名空间。消失的命名空间既不是默认的，也不是空的，所以我不确定这是否是 DOMNode::C14N() 中的一个错误，或者我是否忽略了一些重要的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-05T17:49:45.227

c14n 规范[建议额外的命名空间不会使其成为规范化形式](http://www.w3.org/TR/xml-c14n#SuperfluousNSDecl)。如果您使用 ns2 等，它们应该将其放入 ->c14n 发出的文档中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-01T19:08:38.037

您可能已经想到了这一点，但是由于您正在与 iDEAL 通信，因此您必须遵循他们的“签署 iDEAL 消息”备注：

> 为了生成主要消息的摘要，必须使用包容性规范化算法⁶。iDEAL XML 消息中并不（总是）明确指出主消息的这种规范化方法。因此，此转换未包含在本文档的示例消息中。商家无需在其消息中明确指出此转换。

**资料来源：** [https ://www.pronamic.eu/wp-content/uploads/sites/2/2016/06/Merchant-Integration-Guide-v3-3-1-ENG-February-2015.pdf](https://www.pronamic.eu/wp-content/uploads/sites/2/2016/06/Merchant-Integration-Guide-v3-3-1-ENG-February-2015.pdf)

这可能会令人困惑，因为`CanonicalizationMethod`元素算法是`http://www.w3.org/2001/10/xml-exc-c14n#`. 但是对于摘要，您始终必须使用`https://www.w3.org/TR/2001/REC-xml-c14n-20010315`. 这种规范化方法算法也将保留`xmlns:ns2="http://www.w3.org/2000/09/xmldsig#"`原位。

在`xmlseclibs`库中，iDEAL 使用了很多， `http://www.w3.org/TR/2001/REC-xml-c14n-20010315`默认是规范化方法算法：

[https://github.com/simplesamlphp/xmlseclibs/blob/v1.3.2/xmlseclibs.php#L872](https://github.com/simplesamlphp/xmlseclibs/blob/v1.3.2/xmlseclibs.php#L872)

# python - form.cleaned_data = {'name': {...}} 的奇怪值

> ID：13126590
> 
> 赞同：0
> 
> 时间：2012-10-29T17:22:23.437
> 
> 标签：python, django, django-forms, django-views

我有一个简单的表单和一个视图，它们正在做一些基本的事情：

```
from annoying.decorators import ajax_request

@require_POST
@login_required
@ajax_request
def my_view(request):
    form = MyForm(request.POST)
    if form.is_valid():
        form.save(request.user)
        return {"ok": True}
    return {"ok": False, "errors": form.errors} 
```

表格.py：

```
class MyForm(forms.Form):
    name = forms.CharField(max_length=250)

    def clean_name(self):
        cleaned_data = self.cleaned_data

        name = cleaned_data.get('name', '')
        if MyModel.objects.filter(name__iexact=name).exists():
            raise forms.ValidationError(_(u"This already exists."))
        return cleaned_data

    def save(self, user):
        obj, created = MyModel.objects.get_or_create(name=self.cleaned_data["name"], user=user)
        return obj 
```

但是我在获取 self.cleaned_data`form.save`方法时遇到了问题。在`MyForm.clean_name`我的 self.cleaned_data 很酷。

但在`form.save`级别上，self.cleaned_data = {'name': {...}} 与 self.cleaned_data['name'] 相同。等待它.. 还有 self.cleaned_data['name']['name']['name']['name']['name']...['name']['name']

type(self.cleaned_data) 它的键是`dict`

是什么让我的代码表现得像这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T17:32:55.890

您的问题是`clean_<fieldname>`应该返回清理后的值，而不是整个`cleaned_data`字典：

```
def clean_name(self):
    cleaned_data = self.cleaned_data

    name = cleaned_data.get('name', '')
    if MyModel.objects.filter(name__iexact=name).exists():
        raise forms.ValidationError(_(u"This already exists."))
    return name 
```

# python - 如何移动到下一个索引？

> ID：13126594
> 
> 赞同：1
> 
> 时间：2012-10-29T17:22:32.830
> 
> 标签：python, loops, indexing, while-loop

我有一个不同钞票的列表，我想在每个循环之后跳到下一个索引。我怎样才能做到这一点？我想在第一个循环之后使 str 除数等于 [1]，然后是 [2]，然后是 [3] 等。

```
money_list = [100,50,20,10,5,1,0.5]
dividor = money_list[0]

while change>0.5:
     print (change/100) + " X " + [0]
     change 
     dividor + [0] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T20:22:33.853

为什么不循环`money_list`数组？

无论如何，我猜您希望能够输入一定数量的钱，并获得等值的找零？

这是我的做法：

```
#!/usr/bin/python
#coding=utf-8

import sys

#denominations in terms of the sub denomination
denominations = [5000, 2000, 1000, 500, 200, 100, 50, 20, 10, 5, 2, 1]
d_orig = denominations[:]

amounts = [ int(amount) for amount in sys.argv[1:] ]

for amount in amounts:

  denominations = [[d] for d in d_orig[:]]
  tmp = amount

  for denomination in denominations:
    i = tmp / denomination[0]
    tmp -= i * denomination[0]
    denomination.append(i)

  s = "£" + str(amount / 100.0) + " = "

  for denomination in denominations:
    if denomination[1] > 0:
      if denomination[0] >= 100:
    s += str(denomination[1]) + " x £" + str(denomination[0] / 100) + ", "
      else:
    s += str(denomination[1]) + " x " + str(denomination[0]) + "p, "

  print s.strip().strip(",") 
```

然后从终端；

```
$ ./change.py 1234
£12.34 = 1 x £10, 1 x £2, 1 x 20p, 1 x 10p, 2 x 2p 
```

或者确实和数字的数量

```
$ ./change.py 1234 5678 91011
£12.34 = 1 x £10, 1 x £2, 1 x 20p, 1 x 10p, 2 x 2p
£56.78 = 1 x £50, 1 x £5, 1 x £1, 1 x 50p, 1 x 20p, 1 x 5p, 1 x 2p, 1 x 1p
£910.11 = 18 x £50, 1 x £10, 1 x 10p, 1 x 1p 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:25:17.770

您要么需要将当前索引存储在变量中：

```
money_list = [100,50,20,10,5,1,0.5]
cur_index = 0

while change>0.5:
     print (change/100) + " X " + money_list[cur_index]
     change 
     cur_index = cur_index + 1 
```

或者您可以使用迭代器：

```
money_list = [100,50,20,10,5,1,0.5]
money_iterator = iter(money_list)

while change>0.5:
    try:
        dividor = money_iterator.next()
    except StopIteration:
        break
    print (change/100) + " X " + dividor
    change 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T17:26:31.967

```
money_list = [100,50,20,10,5,1,0.5]
counter = 0

while change>0.5:
    dividor = money_list[counter]
    print (change/100) + " X " + money_list[counter])
    change 
    counter+=1 
```

# tridion - Tridion Powertools 脚本错误 (2009)

> ID：13126595
> 
> 赞同：3
> 
> 时间：2012-10-29T17:22:34.093
> 
> 标签：tridion

在 dev '09 系统上安装了 Powertools - 现在我收到脚本错误“无法设置属性 'async' 的值：对象为空或未定义”

我在想这可能是因为我在兼容模式下使用 IE9，我不相信它受支持？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T19:06:44.850

PowerTools ItemSelector ( `itemselector.asp`) 使用 MSXML2 进行 HTTP 连接。使用`GetXMLHTTPRequest`XMLHTTP 进行异步调用，在您的情况下似乎失败了。

我有 IE 9（版本：9.0.8112）并且 Powertools 项目选择器在正常模式和兼容模式下工作。原因（我假设）我安装了 MXSML2。

我使用此链接检查我拥有的 MSXML 版本：[http ://www.bayes.co.uk/xml/utils/msxml_sniffer.htm](http://www.bayes.co.uk/xml/utils/msxml_sniffer.htm)

**当我使用 URL 时从我的机器输出：**

```
MSXML        Installed 
MSXML2       Installed 
MSXML2 v2.6  Automation server can't create object 
MSXML2 v3.0  Installed 
MSXML2 v4.0  Installed 
MSXML2 v5.0  Installed 
MSXML2 v6.0  Installed 
Mode         Replace V3 
```

如果您从浏览器检查 MSXML 版本，您应该会得到类似的输出。这里的关键是 MSXML2。

除了 MXSML，第二个是您的浏览器安全性。我必须为 ItemSelector 进行以下设置才能工作，否则它只会显示一个没有出版物的空弹出窗口。

IE 本地 Intranet 设置。IE Options --> Security --> Local Intranet --> Sites --> Advanced ，然后将 CMS URL 添加为本地 Intranet。

希望这可以帮助。

# google-analytics - Shopify 的传统 Google Analytics 跨域跟踪不传递数据

> ID：13126596
> 
> 赞同：3
> 
> 时间：2012-10-29T17:22:36.283
> 
> 标签：google-analytics, cross-domain, shopify

我的网站和 Shopify.com 店面之间的 Google Analytics 传统跟踪存在问题。最终，我的分析帐户没有显示来自 Shopify.com 的任何电子商务、页面浏览量等。

我在我的网站和 Shopify.com 之间进行了各种测试：

*   两个站点上的 SetDomainName：“.mysite.com”、“mysite.com”、“none”
*   MYSITE 上的 SetDomainName：“.mysite.com”、“mysite.com”、“none”，与 SHOPIFY 上的 SetDomainName：“.mysite.com”、“mysite.com”、“none”
*   以及两者之间的每一个变化。

几周前，我确实有一笔成功的交易记录在我的 GA 帐户中，但我无法再次复制它（使用您在下面看到的相同方法，使用相同的产品，使用 Chrome）。

Shopify.com 仍然使用旧的传统 Google Anlaytics 跟踪脚本，因此我将**mysite 上的 GA 脚本**改回了以下传统脚本：

```
<script type="text/javascript">
    var pageTracker = _gat._getTracker('UA-XXXXXX-X');
    pageTracker._setDomainName('.mysite.com');
    pageTracker._setAllowLinker(true);
    pageTracker._trackPageview();
</script> 
```

以及**来自 mysite.comis 的内联代码，链接到 Shopify.com 商店页面**（绕过购物车）：

```
<a href="http://mysite.myshopify.com/cart/XXXXXXXXX:X" onclick="pageTracker._link('http://mysite.myshopify.com/cart/XXXXXXXXX:X'); return false;" alt="Buy Product">BUY NOW </a> 
```

**Shopify 的 GA 代码**呈现如下，我只能更新 UA ID# 和 ADD 自定义变量（如您所见，我在下面使用 pageTracker 和 setDomainName 所做的）。我不能删除或修改除此之外的脚本。

```
<script type="text/javascript">
    var pageTracker = _gat._getTracker('UA-XXXXXX-X');
    pageTracker._addDevId('XXXXX');
    pageTracker._setAllowLinker(true);
    pageTracker._setDomainName('none');
    try{pageTracker._setDomainName('.mysite.com');}
    catch(e){};pageTracker._trackPageview();
</script> 
```

正如您从下面的 Shopify.com 收据页面代码中看到的那样，我正在传递数据并且它正在注册 $, setDomainName 两次：一次使用 .mydomain.com，第二次使用“none”。但是——不幸的是，它没有在我的 GA 帐户中注册。

```
<script type="text/javascript">
var pageTracker = _gat._getTracker('UA-XXXXXX-X');
pageTracker._addDevId('XXXXX');
pageTracker._setAllowLinker(true);
pageTracker._setDomainName('none');
try{pageTracker._setDomainName('.mysite.com');
}catch(e){};
pageTracker._trackPageview('/checkout/orders/show'); 
```

```
<script type="text/javascript">
pageTracker._addTrans("#1270", "MySiteName", "5.00", "0.00", "0.00", "City", "State", "United States");
pageTracker._addItem("#XXXX", "SYMXXX", "Product Name", "ProjectCategory", "5.00", "1");
pageTracker._trackTrans(); 
```

有什么想法吗？

我想知道 Shopify.com 上的第一个 setDomainName（我无法控制）是否否定了我添加的第二个。我将在不添加额外的“pageTracker._setDomainName('.mysite.com');”的情况下测试上面的内容 在 Shopify 上，但我想我也会联系，因为我最后十几次测试没有产生我想要的结果。

在此先感谢您的帮助！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T21:29:12.050

_setDomainName 只是告诉 Google Analytics cookie 将自己存储在哪里。听起来您正在尝试将域设置为`.mysite.com`来自 shopify 域，例如`mystore.shopify.com`. 出于安全原因，不能像这样跨域设置 Cookie。尝试离开`gat._setDomainName('.mysite.com')`您的主站点和`gat._setDomainName('none')`您的 shopify 商店。

# php - 在 Codeigniter 插入数组中使用类似 NOW() 的东西

> ID：13126597
> 
> 赞同：2
> 
> 时间：2012-10-29T17:22:37.823
> 
> 标签：php, codeigniter

因为 NOW() 是一种 MySQL 方法，我似乎无法让它在下面的数组中工作。什么是我可以在 PHP 中使用的函数，它的作用与 NOW() 方法相同。

```
$data = array('node1id' => $leader_id,
              'node2id' => $idgen,
              'friendsSince' => NOW(),
$this->db->insert('users', $data); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T17:27:28.297

使用 codeigniter 日期助手并保持相同的符号：

```
$this->load->helper('date');

$data = array('node1id' => $leader_id,
          'node2id' => $idgen,
          'friendsSince' => now(),
$this->db->insert('users', $data); 
```

有关 CI 文档中日期助手的更多信息：http: [//ellislab.com/codeigniter/user_guide/helpers/date_helper.html](http://ellislab.com/codeigniter/user_guide/helpers/date_helper.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-29T17:23:51.043

您可以使用`date("Y-m-d");`或`date("Y-m-d H:i:s");`根据您的需要`DATE`与`DATETIME`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-30T05:05:14.360

尝试

```
$this->db->set('node1id', $leader_id);  
$this->db->set('node2id', $idgen);
$this->db->set('friendsSince', 'NOW()', FALSE); 

$this->db->insert('users'); 
```

每当使用 MySQL 函数时，使用 FALSE 作为第三个参数。

# python - 在 python 中从 HTML 中提取所有 ANCHOR 的快速方法

> ID：13126600
> 
> 赞同：1
> 
> 时间：2012-10-29T17:22:48.020
> 
> 标签：python

有没有简单、健壮和快速的方法来提取python中所有锚的href属性HTML？

我知道有一个使用 BeautifulSoup 的解决方案，但是 BeautifulSoup 的问题是它太重了，并且在某些 URL 上消耗了大量内存。

我正在谈论的任务非常简单 - 只需运行 HTML 并返回所有锚点的所有 HREF。

有人知道吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:59:50.980

你可以使用[`HTMLParser`](http://docs.python.org/2/library/htmlparser.html).

```
from HTMLParser import HTMLParser

class extract_href(HTMLParser):
    def handle_starttag(self, tag, attrs):
        if tag == "a":
            for key, val in attrs:
                if key == 'href':
                    print val

parser = extract_href()
parser.feed("""<p><a href='www.stackoverflow.com'>link</a></p>""") 
```

# android - 在 onDraw() 方法中缓冲画布

> ID：13126603
> 
> 赞同：0
> 
> 时间：2012-10-29T17:23:17.317
> 
> 标签：android, buffer, android-canvas, ondraw

如何缓冲使用 drawCircle 画布方法绘制的圆？

我需要画两个圆圈，然后当用户用手指扫过圆圈时画一个弧线。所以，两个圆总是相同的，但角度（由 drawArc 方法绘制）总是不同的。我想缓冲这些圆圈，而不是一遍又一遍地绘制它们......我让这段代码工作，但我想它可以更好。

```
@Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas); 
        /*first circle*/
        canvas.drawCircle(getWidth()/2, getHeight()/2, mRadius2, getGradient(OUTER_CIRCLE_COLOR));
        /*second circle*/
        canvas.drawCircle(getWidth()/2, getHeight()/2, mRadius, getGradient(INNER_CIRCLE_COLOR));
        rectF.set(getWidth()/2- mRadius2, getHeight()/2 - mRadius2, getWidth()/2 + mRadius2, getHeight()/2 + mRadius2);
        /*draw the arc*/
        canvas.drawArc(rectF, 180, this.getSweepAngle(), true,p);
        invalidate();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T19:08:10.933

您可以创建一个与画布大小相同的位图，并将圆圈绘制到位图中。

在`onDraw()`你`canvas.drawBitmap()`用来恢复画布中的circels。

但是，这仅在您在画布中绘制复杂或沉重的形状时才证明是合理的。对于两个圈子，我不确定你会得到任何改善。

**例子**

首先准备带圆圈的位图：

```
Bitmap bitmap = Bitmap.createBitmap(width, height , Bitmap.Config.ARGB_8888);
Canvas canvas = new Canvas(bitmap);
Canvas canvas = new Canvas(bitmap);
Paint paint = new Paint();

/*first circle*/
canvas.drawCircle(getWidth()/2, getHeight()/2, mRadius2, getGradient(OUTER_CIRCLE_COLOR));
/*second circle*/
canvas.drawCircle(getWidth()/2, getHeight()/2, mRadius, getGradient(INNER_CIRCLE_COLOR)); 
```

使用它`onDraw()`

```
@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas); 

    canvas.drawBitmap(bitmap, 0, 0, paint);

 /*draw the arc*/
    canvas.drawArc(rectF, 180, this.getSweepAngle(), true,p);
    invalidate();
} 
```

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T18:07:20.587

添加一个带有 onDraw() 方法的 Circle 类。在您的自定义视图中，创建圆形对象的集合并添加 2 个圆形。在自定义视图的onDraw方法中，调用每个圆的onDraw。

```
class Circle(){

   int mX;
   int mY;
   int mRadius;
   int mColour;

   void Circle(int x, int y, int radius, int Colour){
       this.mX = x;
       this.mY = y;
       this.mRadius = radius;
       this.mColour = colour;
   }

   void onDraw(Canvas canvas){
       canvas.drawCircle(this.mX, this.mY, this.mRadius, getGradient(this.mColour));
   }

} 
```

在您看来：

```
@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas); 

    for (Circle circle:circles){
        circle.onDraw(canvas);
    }

    rectF.set(getWidth()/2- mRadius2, getHeight()/2 - mRadius2, getWidth()/2 + mRadius2, getHeight()/2 + mRadius2);

 /*draw the arc*/
    canvas.drawArc(rectF, 180, this.getSweepAngle(), true,p);
    invalidate();
} 
```

# .htaccess - 使用 .htaccess 将不存在的子页面重定向到另一个页面

> ID：13126605
> 
> 赞同：0
> 
> 时间：2012-10-29T17:23:42.953
> 
> 标签：.htaccess, redirect, http-redirect

我想重定向：

domainname.com/instalator（不存在）到 domainname.com/install

使用.htaccess。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T06:17:54.010

使用 mod_alias：

```
Redirect 301 /instalator /install 
```

使用 mod_rewrite：

```
RewriteEngine On
RewriteRule ^/?instalator(/.*)$ /install$1 [L,R=301] 
```

如果您有其他映射`/install`到资源或某种路由器的重写规则，那么您需要坚持使用 mod_rewrite 并且**您必须将上述规则放在*任何*路由规则**之前。

# jpa - 打开 JPA：解析查询过滤器“MY_QUERY”时出错错误消息：“MyEntityClass”类中没有名为“accessAuthorizationVs”的字段

> ID：13126611
> 
> 赞同：0
> 
> 时间：2012-10-29T17:24:13.087
> 
> 标签：jpa, openjpa

我已经在我的 Rational Software Architect 8.0.4 中通过启用 JPA 1.0 方面对其进行了配置。它自动生成几乎所有我的实体类，除了 id 的。所以我手动添加它们。我正在尝试查询与 ACCESS_AUTHORIZATION 表具有一对多关系的简单表 APP_USER。有关配置和实体类，请参见下文。

![自动实体生成过程中我的表之间的关系](../Images/8ec63269c1eee33af48d5bbf114cd57d.png)

![APP_USER 实体](../Images/39acd7866d790e07eaa712f7b175be45.png)

![在此处输入图像描述](../Images/29f07a3d4e6cb056555b06b6184999ae.png)

当我尝试执行一个简单的命名查询时

```
SELECT a.accessAuthorizationVs, a.empName, a.userCnum FROM AppUserEntity a WHERE a.userCnum = :userCnum 
```

它抛出一个异常

```
**org.apache.openjpa.persistence.ArgumentException: An error occurred while parsing the query filter "SELECT a.accessAuthorizationVs, a.empName, a.userCnum FROM AppUserEntity a WHERE a.userCnum = :userCnum". Error message: No field named "accessAuthorizationVs" in class "class com.xxx.xxx.xxx.services.integration.entity.AppUserEntity".**
    at org.apache.openjpa.kernel.exps.AbstractExpressionBuilder.parseException(AbstractExpressionBuilder.java:118)
    at org.apache.openjpa.kernel.exps.AbstractExpressionBuilder.traversePath(AbstractExpressionBuilder.java:284)
    at org.apache.openjpa.kernel.jpql.JPQLExpressionBuilder.getPath(JPQLExpressionBuilder.java:1382)
    at org.apache.openjpa.kernel.jpql.JPQLExpressionBuilder.getPathOrConstant(JPQLExpressionBuilder.java:1337) 
```

这是我的 persistence.xml 的快照：

![在此处输入图像描述](../Images/c6e5fe0af7f36b9a9224e6a877b7c076.png)

谁能指导我在这里做错了什么？该名称的字段在我的实体类中明确定义。另外我想提一下，我必须增强类 [followed [this]](http://openjpa.apache.org/openjpaeclipseenhancementbuilder.html)因为之前有一个关于类没有被增强的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T03:54:57.860

当您在 OpenJPA 中创建命名查询时，请记住您正在编写 JPQL，而不是本机 SQL。语法类似，但略有不同。

在这种情况下，我建议将您的命名查询更改为以下内容：

```
SELECT a FROM AppUserEntity a WHERE a.userCnum = :userCnum 
```

这将返回 AppUserEntity 类的对象，其中将包括一组 AccessAuthorizationV 对象（[默认为延迟加载](http://openjpa.apache.org/builds/latest/docs/docbook/manual/jpa_overview_meta_field.html#jpa_overview_meta_onetomany)）。

有关更多详细信息，请参阅[JPQL 语言参考](http://openjpa.apache.org/builds/latest/docs/docbook/manual/jpa_langref.html#jpa_langref_schemaexample)。

# javascript - 如果找到则加载图像，否则加载另一个图像

> ID：13126612
> 
> 赞同：6
> 
> 时间：2012-10-29T17:24:13.667
> 
> 标签：javascript, ajax, image

我需要做的事情说起来很简单，但（对我来说）很难做到：

使用**javascript**，给定图像名称，即“image01.jpg”，我需要检查该图像是否存在于某个文件夹或路径（本地或网络上）中。如果该文件夹下不存在该图像，我需要检查另一个文件夹中是否存在相同的图像。

例如，使用伪代码

```
imageToFind = 'image01.jpg'
path1 = 'users/john/images'
path2 = 'users/mike/img'

if path1+'/'+imageToFind exists
    //do something
else
    if path2+'/'+imageToFind exists
        //do something
    else
        print('NOT FOUND') 
```

你建议什么样的方法？我尝试首先使用 ajax 来实现这一点，然后使用 javascript 的 Image() ，但在这两种情况下我都失败了。

提前感谢您的帮助，最好的问候

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T17:26:18.737

使用 onerror 回调：

```
var img = new Image();
img.onerror = function(){
   img = new Image(); // clean the error (depends on the browser)
   img.onerror = function(){
       console.log('not found at all !');
   };
   img.src = path2+'/'+imageToFind;
};
img.src = path1+'/'+imageToFind; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T17:28:04.663

您几乎可以依赖为*Image 节点*`onload`触发的本机和`onerror`事件处理程序。所以它看起来像

 *```
var images = ['users/john/images/image01.jpg','users/mike/img/image01.jpg','some/more/path/image01.jpg'];

(function _load( img ) {
    var loadImage = new Image();

    loadImage.onerror = function() {
        // image could not get loaded, try next one in list
        _load( images.shift() );
    };
    loadImage.onload = function() {
        // this image was loaded successfully, do something with it
    };

    loadImage.src = img;
}( images.shift() )); 
```

这段代码可能比你实际要求的要多一点。您基本上可以将任意数量的*图像路径*放入该数组，脚本将搜索列表，直到它可以成功加载一个图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T17:25:56.707

尝试类似的东西

```
objImg = new Image();
objImg.src = 'photo.gif';

if(!objImg.complete)
 { 
      img.src = path2+'/'+imageToFind; //load other image
  }else{
     img.src = path1+'/'+imageToFind;
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T17:25:48.360

我想你需要问自己：*为什么我不知道图像是否存在？*

我觉得你不应该有这个问题，或者想以这种方式解决它。*

# css - Twitter bootstrap - 更改默认宽度

> ID：13126614
> 
> 赞同：4
> 
> 时间：2012-10-29T17:24:29.330
> 
> 标签：css, twitter-bootstrap, width, less

我刚刚开始使用 twitter bootstrap，想知道将默认宽度从 940px 更改为 864px 的最佳方法是什么。我尝试使用自定义页面将@gridColumnWidth 变量更改为 50px。这应该使总宽度为 820 像素，但默认宽度在下载后刚刚调整为 1170 像素。我应该将默认值保留为 940px 并在我的 .row>.span12 div 中嵌套一个宽度为 864px 的 div 吗？

我也尝试使用较少的文件，但是当我尝试将它们编译为 css 文件时，我收到错误，说类、id 和变量未定义。

谢谢你的帮助，

杰森

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T17:36:39.110

[使用自定义页面](http://getbootstrap.com/2.3.2/customize.html)对我来说工作正常。

确保修改`@gridColumnWidth`、`@gridColumnWidth1200`和`@gridColumnWidth768`（以及可选`@gridGutterWidth*`的）。
您看到的 1170px 宽度对应于`@gridColumnWidth1200`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T17:32:07.370

您可以通过将另一个具有相同选择器和所需格式的 CSS 文件放在`bootstrap.css`. 或者，您也可以只使用具有更高特异性的选择器，然后文件的顺序将无关紧要。使用`!important`应该是最后的手段，因为它会使进一步的使用变得复杂。

# javascript - https://xyz.com/test/checkout 的页面运行了来自 http://xyz.com/test/checkout/css/styles.css 的不安全内容

> ID：13126617
> 
> 赞同：1
> 
> 时间：2012-10-29T17:24:43.757
> 
> 标签：javascript, asp.net, css, http, https

在 chrome 中，我的 SSL 相关页面在其他浏览器上变为空白，它工作正常。它给出了错误信息

**“ [https://xyz.com/test/checkout的页面运行了来自](https://xyz.com/test/checkout)[http://xyz.com/test/checkout/css/styles.css](http://xyz.com/test/checkout/css/styles.css)的不安全内容”**

在我的网站中，有些页面是在 SSL 上的，我只有一个母版页，它用于两种类型的页面（http 和 https），我想使用我的 css 和 js，这两种情况都可以使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:26:47.330

检查 CSS 文件中的所有资源（如图像和背景图像）。

如果它们链接到 HTTP 域，请查看是否可以将它们重写为相对路径，因此 HTTP/HTTPS 切换是自动的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T17:45:50.433

您的 CSS 文件中可能存在与非安全位置相关的链接。

我建议检查该文件，以便进行任何更新。

或者，在您的服务器上，您可以进行 URL 重写，以便通过 HTTP 的任何内容都被重写为 HTTPS。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T17:28:53.693

将通过 HTTPS 提供的 CSS 包含在通过常规 HTTP 提供的网页中是安全的（并且允许）；因此，一种选择是`https://xyz.com/test/checkout/css/styles.css`在所有情况下都使用。

由于两个版本的路径似乎相同，另一种选择是使用`//xyz.com/test/checkout/css/styles.css`（不指定协议）；那么 CSS 将使用与 HTML 相同的协议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T17:29:16.740

使用独立于协议的绝对路径是您可以利用的：

[http://blog.httpwatch.com/2010/02/10/using-protocol-relative-urls-to-switch-between-http-and-https/](http://blog.httpwatch.com/2010/02/10/using-protocol-relative-urls-to-switch-between-http-and-https/)

# jquery - Twitter Bootstrap Carousel 滑动到特定索引但通过中间索引？

> ID：13126619
> 
> 赞同：3
> 
> 时间：2012-10-29T17:24:49.860
> 
> 标签：jquery, twitter-bootstrap, carousel

目前我已经让我的旋转木马像这样滑过索引框：

```
http://50.21.181.12:3000/ 
```

但是我希望，如果您在幻灯片 1 中并单击框 4，则两个中间幻灯片会更快地通过以在幻灯片 4 中结束，例如这个滑块：

[http://www.hbs.edu/Pages/default.aspx](http://www.hbs.edu/Pages/default.aspx)

twitter-bootstrap的轮播有什么解决方法吗？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-06T22:09:25.067

我知道这是一篇旧帖子，但选择的答案不正确。您可以通过使用 javascript 设置 css 来编辑它的滑动速度。

```
var item = $('.carousel-inner .item')
$(item).css('-webkit-transition', '0.6s ease-in-out left');
$(item).css('-moz-transition', '0.6s ease-in-out left');
$(item).css('-o-transition', '0.6s ease-in-out left');
$(item).css('transition', '0.6s ease-in-out left'); 
```

以上是轮播默认使用的实际css，只需更改值即可。

编辑：为了让它在幻灯片之间滑动

```
slideTo(begin, end);

function slideTo(start_index, end_index){
    this.sliding = true;
    if(start_index != end_index) {

        var diff = start_index - end_index;
        var speed = 0.6/(Math.sqrt(Math.abs(diff))*1.5);

        var item = this.$('.carousel-inner .item')
        this.$(item).css('-webkit-transition', speed + 's linear left');
        this.$(item).css('-moz-transition'   , speed + 's linear left');
        this.$(item).css('-o-transition'     , speed + 's linear left');
        this.$(item).css('transition'        , speed + 's linear left');

        var that = this;

        if(diff < 0){
            this.$('.carousel').one('slid', function(){
                that.slideTo(start_index+1, end_index);
                return false;
            });
            this.$('.carousel').carousel(start_index+1);
        }
        else{
            this.$('.carousel').one('slid', function(){
                that.slideTo(start_index-1, end_index);
                return false;
            });
            this.$('.carousel').carousel(start_index-1);
        }
    }
    else{
        this.sliding = false;
        var item = this.$('.carousel-inner .item')
        this.$(item).css('-webkit-transition', '0.6s ease-in-out left');
        this.$(item).css('-moz-transition', '0.6s ease-in-out left');
        this.$(item).css('-o-transition', '0.6s ease-in-out left');
        this.$(item).css('transition', '0.6s ease-in-out left');
    }
} 
```

这递归地调用自己并增加一个滑得更近。它当前的滑动速度基于当前幻灯片与目标幻灯片的距离。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T19:25:10.120

**不。**

Bootstrap Carousel 视觉展示（包括动画）是基于 CSS 的。JavaScript 只是切换 CSS 类。为了实现您正在寻找的滑动类型，它需要重新构建视觉呈现的核心，而不仅仅是简单的修改或解决方法。

我的建议是找到一个不同的 jQuery 轮播。

# excel - Excel VBA 清除数据功能保护以前未受保护的单元格

> ID：13126622
> 
> 赞同：1
> 
> 时间：2012-10-29T17:25:11.777
> 
> 标签：excel, vba

当我第一次打开我的工作簿时，我调用这个函数来保护特定的单元格范围和单元格不受用户的影响：

```
' Sets protection on sheet
Public Sub LockCells_TXN_CLIENT_ORDER_ENTRY()
  ActiveSheet.Unprotect Password:="abc"
  ActiveSheet.Cells.Locked = False
  ' Lock some cells here
  ActiveSheet.Protect Password:="abc"
End Sub 
```

但是，在调用以下 Subrouting 以清除一系列行中的数据时：

```
Private Sub ClearData_Click()
  ' Declare some variables

  For currentRow = ActiveSheet.Range("STATUS_FIELDS").Row To totalRows
    ActiveSheet.Cells(currentRow, ActiveSheet.Range("STATUS_FIELDS").Column).Resize(1, 14).Clear
  Next currentRow
End Sub 
```

`ClearData_Click()`未指定为受保护的单元格现在变为受保护的单元格，这些单元格与该功能受影响的单元格完全相同。

有人可以向我解释为什么会发生这种情况以及如何避免这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:56:52.317

您的使用`.Clear`导致了问题。

请`.ClearContents`改用，或在清除范围后重新设置锁定的属性。

`.Clear`清除整个对象，包括您将其锁定属性设置为 false 的部分。

# windows-8 - 从 Windows 8/WinRT 应用程序共享“深层链接”

> ID：13126633
> 
> 赞同：3
> 
> 时间：2012-10-29T17:25:54.650
> 
> 标签：windows-8, windows-runtime, windows-store-apps, deep-linking

我使用了许多不同的术语和短语进行搜索，并浏览了许多页面的结果，但我（值得注意的是）没有看到其他人解决，甚至询问过这个问题。所以这里...

**最终目标：**允许用户在 Windows 应用商店应用程序中查看基于内容的页面（可能包含文本和图像）以与其他人共享该内容。

**描述**
我正在努力获取大量内容，并将其作为 Windows 8/WinRT/Windows 应用商店（我们需要在此处使用一致的名称）应用程序进行浏览/导航。所需功能之一是利用共享魅力，这样查看页面的人可以与其他人共享该页面。

理想的行为是应用程序实现共享源合同，该合同将共享包含一些解释性文本的电子邮件消息、从 Windows 应用商店获取应用程序的链接以及应用程序中共享页面的“深层链接”。

**考虑的解决方案**
我们最初只考虑生成页面的 PDF 表示，但很少有外部库可以在 WinRT 下工作，而且必须包含外部许可代码也会有问题。编写我们自己的 PDF 生成代码将超出范围。

我们还考虑过使用 OpenXML 生成 Word 文档或 PowerPoint 幻灯片，但同样，我们遇到了 WinRT 的限制。在这种情况下，OpenXML SDK 不太可能在 WinRT 应用程序中使用。

另一个想法是将所有页面预先生成为 .pdf 文件，将它们存储为资源，并在调用 Share Charm 时共享与当前页面关联的 .pdf 文件。这里的问题是应用程序将至少有 150 个内容页面，并且取决于我们如何分解内容，最多超过 600 个。这可能会导致严重的膨胀。

**我们**
所处的位置 因此，我们开始共享 URI。不过，据我所知，“深度链接”功能仅适用于与您的应用程序相关的辅助磁贴。我考虑的另一个途径是向操作系统注册一个协议，如“my-special-app:”，并让它启动应用程序，但这需要 HKCR 注册表访问，这在 WinRT 沙箱之外。

如果重要的话，我们倾向于使用 HTML/JS 应用程序，而不是 XAML/C#，因为转换后的内容都将是 HTML，而且 WinRT 中的 WebView 控件相当有限。不过，这个决定还不是最终决定。

**结论**
那么，这是否可能，如果可能，如何完成或在哪里可以找到相关文档？

谢谢，
戴夫帕克

# c# - 使用任务计划程序时“WebClient 请求期间发生异常”

> ID：13126637
> 
> 赞同：0
> 
> 时间：2012-10-29T17:26:21.393
> 
> 标签：c#

我有一个控制台应用程序，可以从 FTP 服务器下载某些文件。我习惯`WebClient`这样做：

```
var cred = new NetworkCredential(user, password);
var downloadRequest = new WebClient();
downloadRequest.Credentials = cred;
downloadRequest.DownloadFile(host + FileName, target + FileName); 
```

当我正常运行应用程序时，这非常有效。但是，我需要在周末运行它，所以我让任务计划程序在周日运行它。但是当我这样做时，我的日志中总是会出现这个错误：

`An exception occurred during a WebClient request`

当我手动重新运行它时，它可以完美运行。有什么我忽略的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-01-17T10:20:11.363

这可以帮助其他人寻找解决方案。

我相信这条线：

`downloadRequest.DownloadFile(host + FileName, target + FileName);`

正在做的伎俩。不知何故，它只是无法识别 FileName（第二个参数）。

对我有用的是，我将上面的行更改为以下内容：

`downloadRequest.DownloadFileAsync(new Uri(host + FileName), target + FileName);`

# java - 在Java中将函数调用分配给具有相同接口的其他类

> ID：13126638
> 
> 赞同：2
> 
> 时间：2012-10-29T17:26:25.893
> 
> 标签：java

我有两个类 A 和 B 都实现接口 Z B类。

```
public class A implements Z{

private B b;  //instantiated in constructor of A

@Override
public String f1(int p)
{
  return b.f1(p);
}
... 
```

在 Java 中有没有通用的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:31:33.780

如果您的意思`f1()`是在接口中声明该方法，`Z`那么您要实现的模式称为包装器或装饰器。

在 java 中，您可以使用 java 1.4 中引入的动态代理来创建通用实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:32:24.953

我不这么认为。但有时您的 IDE 可以帮助创建所有简单的方法来委派调用。有时您可以找到第三方类来执行此操作。例如，Guava (http://code.google.com/p/guava-libraries/) 有大量的 ForwardingXXX 类，默认情况下，它们会将所有内容委托给其他东西。例如，ForwardingMap 将所有调用委托给另一个 Map。您需要覆盖您不想委托的方法。

# javascript - Backbone.js 在视图中获取渲染回调

> ID：13126642
> 
> 赞同：2
> 
> 时间：2012-10-29T17:26:44.587
> 
> 标签：javascript, jquery, backbone.js

我有一个 Backbone 应用程序，我们有这样的东西：

```
render: function() {

   this.$el.html(_template());

   $('#id').plugin();

   return this;
} 
```

来自`#id`正在渲染的元素。这只有时有效，因为它可能需要更长的时间才能真正插入 dom。

在调用我们的函数之前，在这个视图中是否有办法定义回调或以某种方式确定 dom 已更新`plugin()`？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T18:24:10.600

你的问题是这样的：

```
$('#id').plugin(); 
```

正在 DOM 内部寻找，`#id`但`this.$el`尚未在 DOM 中；所以，如果`#id`是 inside `this.$el`，那么`#id`也不在 DOM 中并且`$('#id')`将为空。`#id`你想在里面寻找`this.$el`，Backbone 提供了[`this.$`快捷方式](http://backbonejs.org/#View-dollar)：

> **$ (jQuery 或 Zepto)** `view.$(selector)`
> 
> 如果页面中包含 jQuery 或 Zepto，则每个视图都有一个**$**函数，用于运行视图元素范围内的查询。[...] 这相当于运行：`view.$el.find(selector)`.

所以你想这样做：

```
this.$('#id').plugin(); 
```

如果您的插件需要渲染其元素（也许它需要大小和位置信息），那么您将不得不纠结一下：

1.  在将视图添加到 DOM 后，调用者可以调用视图上的方法。
2.  您可以在浏览器更新 DOM*后使用*[`setTimeout(..., 0)`或`_.defer`](https://stackoverflow.com/a/11926548/479863)绑定插件。这仅在每个人都使用通用模式时才有效。*`x.append(v.render().el)`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T18:00:08.773

Symply 触发事件：

```
MyView = Backbone.View.extend({

    initialize: function(){
        this.on('view:rendered', this.initPlugin, this);
    },
    render: function(){
        this.$el.html(_template());
        this.trigger('view:rendered', this/*or some useful data*/)
    },
    initPlugin: function(){
        this.$('#id').plugin()//watch on this.$ to apply selector inside this view only
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T18:07:31.353

我不确定，但试试看

将其作为事件绑定到视图，在呈现视图后触发它

```
var viewobject = {};

_.extend(viewobject, Backbone.Events);

viewobject.on("alert", function(msg) {
  $('#id').plugin();
});

object.trigger("alert", "an event"); 
```*

# sql - 在创建过程中从其他服务器获取数据

> ID：13126643
> 
> 赞同：0
> 
> 时间：2012-10-29T17:26:45.990
> 
> 标签：sql, sql-server, stored-procedures, procedure

我必须创建一个过程来从数据库中获取少量值，但我无权在该服务器上编写过程。因此，我想在另一台服务器上创建该过程并获取值。我想知道是否可以创建从任何其他服务器获取值的过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:16:23.720

假设在目标数据库中您具有读取数据的只读权限。在那种情况下，你可以

*   从您将要创建存储过程的数据库中创建一个数据库链接。

*   使用数据库链接（db 链接）从目标数据库中读取数据。

一旦您能够从目标数据库中获取数据，您就可以进行任何您想做的操作。要在 sql server 中创建数据库链接，您可以检查[此](http://dba010.wordpress.com/2011/01/17/how-to-create-database-link-in-sql-server-2005/)

# python - 从 Python 脚本将子进程输出附加到文件

> ID：13126645
> 
> 赞同：1
> 
> 时间：2012-10-29T17:26:48.307
> 
> 标签：python, popen, system-calls, output-redirect

我有一个 python 脚本，它遍历一些数据并每次调用一个子进程，将数据作为进程参数的一部分传入。我想将每个调用的输出附加到一个文件中，以便稍后在脚本中使用该输出。

我曾尝试使用 os.system 并在命令后放置“>> outfile.txt”。但是，在这种情况下，由于某种原因，第一次迭代会正常输出到 shell，并且只有最后一次迭代会附加到文件中。

```
def runSpecificList( streamList ):
    for line in open( streamList, 'r' ):
        getSpecificStream( 'list.txt', line )

def getSpecificStream( testList, id ):
    os.system( os.environ['path'] + r'\sub\path\to\program.exe argument' + id + ' >> ' + list ) 
```

我发现这可以使用 subprocess.popen() 来实现，所以我尝试了......但是，这次第一次迭代被写入文件，其余时间写入文件的内容似乎是随​​机片段. 而且，由于某种原因，我后来无法在脚本中正确使用该文件。

```
def getSpecificStream( testList, id ):
     log = open( testList, 'a' )
     subproc.Popen([os.environ['path'] + r'\sub\path\to\program.exe', 'argument' + id], stdout = log, stderr = log, shell = True ) 
```

有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:30:36.020

问题是您的流程不同步，因此它们以随机顺序（基于执行顺序）打印输出。

您可以使用 a`Queue`将输出返回到主进程（产生其他进程的那个），然后对其进行操作。

请参阅：[http ://docs.python.org/2/library/multiprocessing.html#exchanging-objects-between-processes](http://docs.python.org/2/library/multiprocessing.html#exchanging-objects-between-processes)

# c - C静态变量不更新

> ID：13126647
> 
> 赞同：1
> 
> 时间：2012-10-29T17:26:50.653
> 
> 标签：c, variables, static

我的 C 代码有问题，我声明了一个静态 int 变量（作为标志），然后在仅调用一次的 init() 中将其初始化为 -1，然后当我尝试将值更新为 0 或1 之后，它不断恢复到 -1。

有谁知道问题可能是什么？

我没有任何具有相同标识符的局部变量，所以我真的迷路了。

谢谢！

```
static int previousState;

void init()
{
   previousState = -1;
}

void moveForward(int currentState)
{
    if (previousState == -1)
        previousState = currentState;

    if (previousState != currentState)
    {
        /* do stuff */
        /* PROBLEM: it never goes into here, because previousState is always -1! */
    }

    /* other code */
}

void main()
{
   init();

   if (fork() == 0)
   {
        /* do stuff */
        moveForward(1);
        exit();
   }

   /* more forks */

   moveForward(0);
   exit();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T17:34:44.723

每个进程只调用一次 moveForward。进程不共享静态数据！

使用线程，或使用共享内存。还可以使用互斥锁或信号量来并发访问共享数据。最好切换到更适合并行处理的语言...

# c# - 通过 AJAX 访问 URL 时出现 404 错误

> ID：13126651
> 
> 赞同：0
> 
> 时间：2012-10-29T17:26:56.677
> 
> 标签：c#, jquery

不知道为什么，一切看起来都很好，但是在尝试访问控制器中的函数时出现 HTTP 404 错误。这是aspx：

```
function CheckIfPacked() {
  if ($("#OrderNumber").val() != "") {
    var url = "/Packing/PackageTracking/CheckIfPacked";
    $.ajax({
      url: url,
      cache: false,
      data: "orderNumber=" + $("#OrderNumber").val() + "&actionyes=GetSalesOrder()",
      success: function (data) {
      var domElement = $(data);
      if (data != "") {
        $('#MessageDiv').append(domElement);
      }
    });
  }
} 
```

这是控制器：

```
public Result CheckIfPacked(string orderNumber) {
   var mesEntity = new MESEntities();
   var packh = from packhead in mesEntity.Packing_Transaction_Headers
               where packhead.Order_No_ == orderNumber
               select packhead.Completed_by_Packer;
   if (packh.First() == 0)
   {
      return new Result { Success = true, Message = string.Format("You have not finished packing order {0}, are you sure you want to navigate away from this page?", orderNumber) };
   }
   else
   {
      return null;
   }
} 
```

我想我只是盯着这个太久了。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:27:51.873

你的方法应该是静态的，你应该为你的函数使用 webmethod 属性：

```
[WebMethod]
public static Result CheckIfPacked(string orderNumber) {
   var mesEntity = new MESEntities();
   var packh = from packhead in mesEntity.Packing_Transaction_Headers
               where packhead.Order_No_ == orderNumber
               select packhead.Completed_by_Packer;
   if (packh.First() == 0)
   {
      return new Result { Success = true, Message = string.Format("You have not finished packing order {0}, are you sure you want to navigate away from this page?", orderNumber) };
   }
   else
   {
      return null;
   }
} 
```

# eclipse-juno - 在 Eclipse Juno 中链接 ScalaFX 项目的问题

> ID：13126656
> 
> 赞同：1
> 
> 时间：2012-10-29T17:27:22.680
> 
> 标签：eclipse-juno, scalafx

这似乎是我使用 Eclipse (Juno) 进行 ScalaFX 开发之旅中的最后一个痛点。简而言之，我可以在其中编译和运行代码，`sbt`但如果我想调试（会很好），我需要 Eclipse。

不幸的是，我无法制作一个会表现出这种痛苦的小项目（我遇到了其他问题）。如果下面的快照向任何人说明了可能出现的问题，那么您将极大地帮助我。

有问题的行看起来像这样（其中没有什么特别之处）：

```
 import scalafx.scene.shape.{Shape, Line, Arc}
    ..
  new Line{ 
    startX = p.x
    startY = p.y
    endX = tmp.x
    endY = tmp.y
  } 
```

![在此处输入图像描述](../Images/fb2b4207c8a1069a031930eda16fd266.png)

这是我的`.classpath`- 如果问题出在哪里：

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
  <classpathentry kind="src" path="src"/>
  <classpathentry kind="lib" path="lib/scalafx-1.0-SNAPSHOT.jar"/>
  <classpathentry kind="con" path="org.scala-ide.sdt.launching.SCALA_CONTAINER"/>
  <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER"/>

  <!-- 
  - Some reference to JavaFX seems to be needed (otherwise: "not found: object javafx")
  -->
  <classpathentry kind="lib" path="/Library/Java/JavaVirtualMachines/jdk1.7.0_09.jdk/Contents/Home/jre/lib/jfxrt.jar"></classpathentry>

  <classpathentry kind="output" path="build/classes"/>
</classpath> 
```

所有这些都在 OS X 上，运行 Oracle Java 7u9 JDK（至少我认为是这样！）。

ps 与我使用过的其他 IDE（Visual Studio、XCode）相比，Eclipse 仍然很慢而且很麻烦，但是因为官方的[ScalaIDE](http://scala-ide.org)绑定正在使用它，所以它有点“必须”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T19:01:54.427

我正在使用 sbt、eclipse (indigo) 和 scalafx，它可以工作。以下编译和工作：

```
new Line{ 
startX = 10
startY = 10
endX = 20
endY = 20
} 
```

如果您愿意，我可以帮助您设置环境。

# apache-flex - “限制”输入但不在验证器中处理的 Flex 属性

> ID：13126658
> 
> 赞同：0
> 
> 时间：2012-10-29T17:27:27.957
> 
> 标签：apache-flex, properties, components

我有一个看起来有点奇怪的问题。我正在尝试考虑可以在组件上设置的所有属性，这些属性以验证器无法处理的方式限制/验证输入。

例如，可以在 SkinnableTextBase 类型的组件上设置“restrict”属性。restrict 是一个限制输入的属性，但验证器不处理它。

另一个例子是“最小”属性。可以在 Range 类型的组件上设置 minimum 属性，并再次限制输入。

所以我正在寻找这样的任何属性。

现在我有：最大最小限制 maxChars

谢谢！

# python - 根据词性为终端中的文本着色

> ID：13126661
> 
> 赞同：2
> 
> 时间：2012-10-29T17:27:32.150
> 
> 标签：python, nltk, colorama

我想在终端中为句子着色，以便名词为蓝色，动词为绿色。其他一切都将是黑色的。

到目前为止，我尝试为此目的使用`nltk`和模块。`colorama`

```
import nltk
from colorama import Fore 
```

此代码将找出名词和动词，因此动词是`VB`or`VBD`和名词是`NN`。

```
s = nltk.word_tokenize(sample_sentence)
tagged_text = nltk.pos_tag(s)
print tagged_text

[('Stately', 'RB'), (',', ','), ('plump', 'VB'), ('Buck', 'NNP'), ('Mulligan', 'NNP'), ('came', 'VBD'), ('from', 'IN'), ('the', 'DT'), ('stairhead', 'NN'), (',', ','), ('bearing', 'VBG'), ('a', 'DT'), ('bowl', 'NN'), ('of', 'IN'), ('lather', 'NN'), ('on', 'IN'), ('which', 'WDT'), ('a', 'DT'), ('mirror', 'NN'), ('and', 'CC'), ('a', 'DT'), ('razor', 'NN'), ('lay', 'NN'), ('crossed', 'VBD'), ('.', '.')] 
```

当我想打印彩色文本时，我将使用：

```
print Fore.BLUE + some_noun
print Fore.GREEN + some_verb
print Fore.BLACK + something_else 
```

我在打印句子时遇到问题。您将如何循环`tagged_text`以使其打印未`sample_sentence`更改的内容（仅应用所需的颜色）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:39:20.830

这个怎么样？它保留与原始文本完全相同的空白。我确实相信动词应该是红色的。

```
from colorama import Fore, init
import re
init()

tagged_text = [('Stately', 'RB'), (',', ','), ('plump', 'VB'), ('Buck', 'NNP'), ('Mulligan', 'NNP'), ('came', 'VBD'),
                ('from', 'IN'), ('the', 'DT'), ('stairhead', 'NN'), (',', ','), ('bearing', 'VBG'), ('a', 'DT'), 
                ('bowl', 'NN'), ('of', 'IN'), ('lather', 'NN'), ('on', 'IN'), ('which', 'WDT'), ('a', 'DT'),
                ('mirror', 'NN'), ('and', 'CC'), ('a', 'DT'),('razor', 'NN'), ('lay', 'NN'), ('crossed', 'VBD'),
                ('.', '.'), ('The', 'DET'), ('function', 'NN'), ('f', 'SYM'), ('(','('),('x','SYM'),(',',','),
                ('y','SYM'),(')',')'),('takes','VB'), ('two', 'CD'), ('arguments', 'NN'), ('.','.')]
origtext = 'Stately, plump Buck Mulligan came from the stairhead, bearing a bowl of lather on which a mirror and a razor lay crossed. The function f(x,y) takes two arguments.'

colordict = {'VB': Fore.GREEN, 'VBD': Fore.GREEN, 'NN': Fore.BLUE}

colorwords = ''
for word, tag in tagged_text:
    color = Fore.BLACK
    word = re.match(r'\s*%s\s*' % re.escape(word), origtext).group()
    origtext = origtext.split(word,1)[1]
    if tag in colordict:
        color = colordict[tag]
    colorwords += color + word

print colorwords 
```

# javascript - javascript清除单个输入组的内容

> ID：13126662
> 
> 赞同：1
> 
> 时间：2012-10-29T17:27:36.410
> 
> 标签：javascript

我有一个从属表格（对问题 1 的回答是可能会使问题 2 可见，但回答否可能会使其不适用并消失）

我想将输入重置为无应答（无论输入类型如何）

我正在使用

```
 document.getElementById('quest2').value = ""; 
```

直到我了解到，如果您在复选框、单选按钮或选择框上执行此操作，则无论用户是否再次单击其中一个选项（这很糟糕），您基本上都将值设置为“”，我知道我们能够

```
 switch (***field_type***)
{
case "text":
case "password":
case "textarea":
case "hidden":
    document.getElementById('quest2').value = "";
    break;
case "radio":
case "checkbox":
    if (document.getElementById('quest2').checked)
    {
        document.getElementById('quest2').checked = false;
    }
    break;
case "select-one":
case "select-multi":
    document.getElementById('quest2').selectedIndex = -1;
    break;
default:
    break;
} 
```

这是我想做的基础我的问题首先是我的语法是否正确

**首先*field_type***应该包含什么来检查 (id 'quest2') 的输入类型

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:41:11.993

如果我理解正确，我会稍微重写一下。

我会做这样的事情：

```
var q2_Elem = document.getElementById('quest2');

switch (q2_Elem.type)
{
case "text":
case "password":
case "textarea":
case "hidden":
    q2_Elem.value = "";
    break;
case "radio":
case "checkbox":
    if (q2_Elem.checked)
    {
        q2_Elem.checked = false;
    }
    break;
case "select-one":
case "select-multi":
    q2_Elem.selectedIndex = -1;
    break;
default:
    break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:29:02.867

您可以打开`element.tagName`( `input`,`textarea`等`select`)

`element.type`如果是`"input"`( `text`, `password`,等`radio`)

我建议还添加一个`.toLowerCase()`，因为较旧的浏览器喜欢他们的标签是大写的。

# python - Python：打印函数调用和命名空间

> ID：13126664
> 
> 赞同：1
> 
> 时间：2012-10-29T17:27:50.090
> 
> 标签：python, module

我想知道，出于调试目的，是否可以在执行导入后查看您正在使用的命名空间和模块，此外还可以查看调用函数的位置。

如果我的代码中有一个函数 f(x) 和一个相当复杂的结构，有没有办法在不到处添加打印的情况下查看调用 f(x) 的位置？

类似 f.print_occurance()

```
"f was called in function integrate"
"f was called in function linspace"
"f was called in function enumerate" 
```

类似的事情。

至于第一个问题，假设我导入了一个模块“import somemodule”现在如果该模块导入了其他模块，我可以在不查找 somemodule.py（或其头文件，如果它存在的话）的情况下查看已导入/使用的命名空间和模块在 c/cpp 中）。

抱歉，如果这是一个新手问题，这似乎是我应该知道的错误处理和调试的基本技巧，但谷歌搜索没有返回任何有用的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:39:07.800

您可以编写自己的 f.print_occurence() 属性。创建一个在函数启动时标记为“真”的变量，然后 f.print_occurence() 将识别该标志并相应地打印。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T17:44:08.547

您绝对应该查看[回溯](http://docs.python.org/2/library/traceback.html)并[检查](http://docs.python.org/2/library/inspect.html)模块。

一个简单的方法来做到这一点：

```
traceback.print_stack(limit=2) 
```

这将很难看，但会告诉您正在调用哪个函数以及调用它的内容。您可以查看模块以了解如何使用它们来满足您的需求。

[您可以使用sys.modules](http://docs.python.org/2/library/sys.html#sys.modules)查看导入的模块

# apache-flex - 如何在 adobe air 应用程序中设置菜单顺序？

> ID：13126665
> 
> 赞同：1
> 
> 时间：2012-10-29T17:27:49.600
> 
> 标签：apache-flex, air, flex3, adobe

如何在 adobe air 中设置菜单顺序，以便可以根据需要定位动态添加的菜单？

```
var menu1 = iconMenu.addItem(new air.NativeMenuItem('Menu 1')); 
var menu2 = iconMenu.addItem(new air.NativeMenuItem('Menu 2')); 
var menu4 = iconMenu.addItem(new air.NativeMenuItem('Menu 4'));

// Menu 3 added dynamically later
var menu3 = iconMenu.addItem(new air.NativeMenuItem('Menu 3')); 
```

我想将 menu3 定位在 menu2 和 menu4 之间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:58:00.000

我假设您正在使用`NativeMenu`该类，在这种情况下，您正在寻找该[`addItemAt`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/NativeMenu.html#addItemAt%28%29)方法，该方法采用一个 index 参数，该参数定义应添加项目的位置：

```
var menu3 = iconMenu.addItemAt(new air.NativeMenuItem('Menu 3'), 2); 
```

# delphi - 如何使用项目“通过引用”设置的配置选项

> ID：13126666
> 
> 赞同：3
> 
> 时间：2012-10-29T17:27:51.083
> 
> 标签：delphi, project, delphi-xe2, options, delphi-xe3

我花了几天时间（再次）探索 XE3 中的选项集。他们看起来很聪明，但要么他们（仍然）坏了，要么是我。我想做的是为一堆项目创建一个通用选项集文件，比如 CommonOptions.optset。这很容易使用 View | 创建和编辑。配置管理器项。在此选项集文件中，我放置了一组相对搜索路径，例如：

```
..\..\source1;..\..\source2; 
```

等等。当直接输入 DEBUG 或 BASE 构建配置时，这些路径被证明是有效的。当我使用配置管理器将此常用选项集应用为参考时，路径不起作用。如果我使用“修改值”重复应用程序，它工作正常。可以肯定的是，我删除了 DPROJ（以及所有 .local 文件）并让 Delphi 在再次应用选项集文件作为参考之前重新创建 DPROJ。仍然没有运气。

我有几个库，其中包含 10 个不同年份的 DPROJ，所以我确实需要一种指定编译器选项的通用方法，不包括版本信息等。

有没有人让这个参考的东西起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-27T11:33:42.293

引用的选项集作为普通的 MSBuild 导入实现。因此，所有相对路径都是相对于导入项目文件的。您可以将选项集视为构建配置，引用项目文件中的构建配置可以从中继承。

# git - 通过 Mediatemple 上的 Tower (gs) 进行 Git 回购

> ID：13126667
> 
> 赞同：1
> 
> 时间：2012-10-29T17:28:00.903
> 
> 标签：git, repository, mediatemple, git-tower

我在[这里按照 Mediatemple 网站](http://kb.mediatemple.net/questions/1594/Using+Git#gs)上的说明进行操作，结果很短，我无法将本地 git repo 复制到服务器。我有 ssh 访问权限并且可以访问服务器并在我的 mediatemple 服务器上创建一个存储库并通过命令行访问它，但是当我尝试从我的计算机链接到它时它不会连接。

我正在尝试使用[Tower](http://www.git-tower.com/)，并希望在我的服务器上创建一个存储库，然后从 Tower“克隆远程存储库”，然后能够将我在本地执行的提交推送到远程存储库，显然。但我似乎没有正确构建远程仓库的 URL。在 [Mediatemple 页面]((http://kb.mediatemple.net/questions/1594/Using+Git#gs) 上，他们似乎以几种不同的方式编写 URL。

```
example.com@example.com:domains/git.example.com/html/example.git

or

ssh://example.com@example.com/home/00000/domains/git.example.com/html/example.git 
```

我无法让本地应用程序找到远程 git 存储库。如果我的域是`joes.com`并且我在名为`project`. 该仓库的 URL 是什么？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:34:02.450

德鲁是对的，他完全帮助了我，并把我送到了 MediaTemple 的合适的人那里。谢谢！

我有非常简单的 ssh 问题，我正在学习。问题是我试图使用路径和所有内容登录。您需要做的是 ssh 进入服务器，然后 cd 到您想要的位置。$ ssh user@server.com 密码：$ cd where/you/want/to/go

然后在 Git 程序中，您只需添加 user@example.com:where/you/want/to/go 即可。谢谢！

# c# - 是否可以让用户使用 DataAnnotations 以精确的日期格式输入日期？

> ID：13126673
> 
> 赞同：1
> 
> 时间：2012-10-29T17:28:34.303
> 
> 标签：c#, spring-mvc

我在一个表单上有一个日期选择器，我想让用户输入带有世纪的日期，并且不允许在没有世纪的情况下插入日期。

```
 [DisplayFormat(DataFormatString = "{0:MM/dd/yyyy}")]
    [Display(Name = "Birthdate")]
    [Required]
    public DateTime? Birthdate { get; set; } 
```

但是，这仍然允许用户输入 1/1/91。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:58:04.473

使用 ApplyFormatInEditMode：

```
[DisplayFormat(ApplyFormatInEditMode=true, DataFormatString = "{0:MM/dd/yyyy}")] 
```

# c++ - 引用变量在 C++ 中不返回值

> ID：13126678
> 
> 赞同：0
> 
> 时间：2012-10-29T17:29:07.260
> 
> 标签：c++, function, variables, reference

我的参考变量在函数中存储值时遇到问题。这段代码我哪里出错了？

```
//Loads temperature from a disk file and outputs them to the screen

#include <iostream>
#include <iomanip>
#include <fstream>
#include <string>
#include "myHeader.h"
using namespace std;

//Function prototypes
void minMax (int mean[], int size, int &, int &);

//Declare Global variables
string userFile;         //variable for user input of file
string date;             //variable for inputFile date
int low;                 //variable for inputFile low
int high;                //variable for inputFile high
double sumLow = 0.0;     //variable to hold sum of low temps
double sumHigh = 0.0;    //variable to hold sum of high temps
ifstream inputFile;

const int ARRAY_SIZE = 31;
int lowTemp[ARRAY_SIZE];
int highTemp[ARRAY_SIZE];

//Accumulators
int min = 200;
int max = 0;
int count = 0;
int minTemp = 0;
int maxTemp = 0;

int main()
{
//Call the heading function
heading(8, 'A');

//Prompt user to enter a file
cout << "What file do you want to open for input? ";
cin >> userFile;
cout << endl; 

inputFile.open(userFile);

minMax(lowTemp, ARRAY_SIZE, minTemp, maxTemp);

//Close the file
inputFile.close();

return 0;
}

//******************************************
//Definition of function minMax
//******************************************

void minMax (int mean[], int size, int & min, int & max)
{

    for (int i = 0; (i < ARRAY_SIZE) && (inputFile >> date >>     low >> high); i++)
    {
        lowTemp[i] =  low;
        highTemp[i] = high;
        count = i;
        sumLow += lowTemp[i];
        sumHigh += highTemp[i];

        if (lowTemp[i] < min)
        {
            min = lowTemp[i];
        }
        if (highTemp[i] > max)
        {
            max = highTemp[i];
        }

        minTemp = min;
        maxTemp = max;
    }

    cout << "array size " << count + 1 <<  " array low " << minTemp << " array high " << maxTemp << endl << endl;
    cout << endl << count + 1 << " " << sumLow << " " << sumHigh << endl;
} 
```

程序编译并询问用户要打开哪个文件。我输入文件并返回。

数组大小 31 数组低 0 数组高 91

31 1831 2602

数组 High 是正确的；但是，根据文件，数组低位应该是 34。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:33:21.730

低初始化为零：`int minTemp = 0;`

* * *

我可以推荐阅读一本好的教科书吗？您的代码看起来像您不明白发生了什么。

您的许多全局变量未使用，因为它们被同名的局部参数隐藏。删除全局变量或用局部变量替换它们将提高您的代码质量。

例如

```
//Accumulators
int min = 200;
int max = 0;

....

void minMax (int mean[], int size, int & min, int & max)
{ 
```

全局的`min`and `max`，你称之为“累加器”的东西完全没有被使用。

# .htaccess - 基本 301 重定向不起作用

> ID：13126683
> 
> 赞同：0
> 
> 时间：2012-10-29T17:29:32.413
> 
> 标签：.htaccess

我正在尝试将一些旧博客文章重定向到新文章。这是我编写并放置在根目录中的 htaccess。请记住，该站点现在位于 linux 服务器上，而不是 windows 上。

```
redirect 301 /public/recipesdetl.aspx?id=1888 http://www.mysite.com/recipes/
redirect 301 /public/recipesdetl.aspx?id=2025 http://www.mysite.com/recipes/?p=405
redirect 301 /public/recipesdetl.aspx?id=2682 http://www.mysite.com/recipes/?p=549
redirect 301 /public/recipesdetl.aspx?id=2152 http://www.mysite.com/recipes/?p=309
redirect 301 /public/recipesdetl.aspx?id=1398 http://www.mysite.com/recipes/?p=817
redirect 301 /public/recipesdetl.aspx?id=1908 http://www.mysite.com/recipes/?p=155
redirect 301 /public/recipesdetl.aspx?id=2162 http://www.mysite.com/recipes/?p=317
redirect 301 /public/recipesdetl.aspx?id=1889 http://www.mysite.com/recipes/?p=145
redirect 301 /public/recipesdetl.aspx?id=1951 http://www.mysite.com/recipes/?p=808
redirect 301 /public/recipesdetl.aspx?id=2032 http://www.mysite.com/recipes/?p=238
redirect 301 /public/recipesdetl.aspx?id=2101 http://www.mysite.com/recipes/?p=269
redirect 301 /public/recipesdetl.aspx?id=2147 http://www.mysite.com/recipes/?p=304
redirect 301 /public/recipesdetl.aspx?id=2563 http://www.mysite.com/recipes/?p=449
redirect 301 /public/recipesdetl.aspx?id=2043 http://www.mysite.com/recipes/?p=243
redirect 301 /public/recipesdetl.aspx?id=2224 http://www.mysite.com/recipes/?p=361
redirect 301 /public/recipesdetl.aspx?id=2151 http://www.mysite.com/recipes/?p=308 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:15:15.243

您可以在语句的第一个 URI 路径中包含查询字符串`Redirect`，您需要使用 mod_rewrite 的`%{QUERY_STRING}`变量：

```
RewriteEngine On

RewriteCond %{QUERY_STRING} ^id=1888$
RewriteRule ^/?public/recipesdetl.aspx$ http://www.mysite.com/recipes/ [L,R=301]

RewriteCond %{QUERY_STRING} ^id=2025$
RewriteRule ^/?public/recipesdetl.aspx$ http://www.mysite.com/recipes/?p=405 [L,R=301]

RewriteCond %{QUERY_STRING} ^id=2682$
RewriteRule ^/?public/recipesdetl.aspx$ http://www.mysite.com/recipes/?p=549 [L,R=301]

RewriteCond %{QUERY_STRING} ^id=2152$
RewriteRule ^/?public/recipesdetl.aspx$ http://www.mysite.com/recipes/?p=309 [L,R=301] 
```

等等

# cocos2d-iphone - Cocos2d Box2d 缩放半径圆体

> ID：13126685
> 
> 赞同：1
> 
> 时间：2012-10-29T17:29:39.230
> 
> 标签：cocos2d-iphone, geometry, box2d-iphone

目前，在 cocos2d 中，我有一个应用程序可以执行以下操作：

以空白屏幕启动。当我点击屏幕时，我会弹出一个圆圈。当我握住圆圈时，圆圈将继续以恒定的速度增长。然而，尽管 sprite 正在增长，但 box2d 物理体却没有，这意味着 sprite 不会与其他物体发生碰撞。我一直在试图找出一种方法来改变随精灵缩放的半径，但对于 cocos2d，这里不存在这样的问题。我注意到除了 cocos2d 之外的其他 box2d，但我很难将它们翻译过来。

```
//smile.position = ccp(touchLocation.x, touchLocation.y);
smile.scale = .05;
[self addChild:smile];

// b2BodyDef smileBodyDef;

smileBodyDef.type = b2_dynamicBody;
smileBodyDef.position.Set(touchLocation.x/PTM_RATIO, touchLocation.y/PTM_RATIO);
smileBodyDef.userData = smile;
smileBody = world->CreateBody(&smileBodyDef);
//Radius
b2CircleShape smileCircleShape;
int radius = 80;

//Fixture
smileFixtureDef.shape = &smileCircleShape;
smileFixtureDef.density = 0.00f;
smileFixtureDef.friction = .2f;
smileBody->CreateFixture(&smileFixtureDef);

if (CGRectContainsPoint(smileRect, touchLocation)) {
growForever = [CCRepeatForever actionWithAction: [CCScaleBy actionWithDuration: .5 scale:    1.2]];
[growForever setTag:1];
[smile runAction:growForever]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T05:20:44.370

每次您想更改半径时，请获取与您为身体创建的 b2Fixture 关联的形状对象，然后相应地设置新值：

```
fixture->GetShape()->m_radius = new_radius/PTM_RATIO; 
```

# javascript - Mac OSX -- 如果 chrome/firefox/sarari 处于全屏模式，我可以使用 javascript 检测吗？

> ID：13126687
> 
> 赞同：3
> 
> 时间：2012-10-29T17:29:41.410
> 
> 标签：javascript, macos, firefox, google-chrome, fullscreen

> **可能重复：**
> [检测浏览器是否处于全屏模式](https://stackoverflow.com/questions/1047319/detecting-if-a-browser-is-in-full-screen-mode)

当 Chrome 或 FF 全屏显示时，我正在开发一个在 Mac OSX 上无法正常运行的功能。当它们刚刚最大化时，它工作正常。当（且仅当）它们处于全屏状态时，我想将这些浏览器排除在此功能之外。我很难找到一种方法来检测这一点。有没有人有经验或指点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T17:47:55.960

我认为您可以检查是否`fullscreenElement`为“非空”。不幸的是，它们在不同的浏览器中都有不同的命名，因此您需要执行以下操作：

```
if ( document.mozFullScreenElement || 
     document.webkitCurrentFullScreenElement ||
     document.fullscreenElement ) { console.log('FULLSCREEN!'); } 
```

文档（mozilla）：[https ://developer.mozilla.org/en-US/docs/DOM/document.mozFullScreenElement](https://developer.mozilla.org/en-US/docs/DOM/document.mozFullScreenElement)

您还可以附加事件处理程序以手动跟踪全屏状态：

```
document.addEventListener( 'fullscreenchange', handler, false );
document.addEventListener( 'mozfullscreenchange', handler, false );
document.addEventListener( 'webkitfullscreenchange', handler, false );

function handler() {
    // fullscreen mode changed
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T17:31:42.027

您可以检查视口的尺寸。如果它与常见的屏幕尺寸相匹配`1024x768`，`1920x1080`则您可能处于全屏模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T17:32:35.737

您可以尝试以下代码：

```
if (screen.width == window.innerWidth && screen.height == window.innerHeight) {
    //full web browser
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T17:40:22.650

您可以查看一些属性来解决这个问题，但我强烈建议您进行测试，因为我发现它们在 FF、Chrome 和 IE 中报告的值有些奇怪，尤其是在双显示器设置的情况下。

`screen.avalHeight`并`screen.availWidth`给出屏幕分辨率，同时 `window.outerHeight`给出`window.outerWidth`窗口大小。

只需检查它们是否匹配。

# sql - 使用 ORDER BY 子句加速 Oracle 多表查询

> ID：13126688
> 
> 赞同：2
> 
> 时间：2012-10-29T17:29:53.727
> 
> 标签：sql, oracle10g, query-optimization

我有以下三个表（实际上还有更多字段，但这应该可以让我了解我想要实现的目标）：

```
log (
  eventId INTEGER,
  objectId INTEGER,
  PRIMARY KEY (eventId)
)

objects (
  objectId INTEGER,
  typeId INTEGER,
  PRIMARY KEY (objectId, typeId)
)

statusBits (
  typeId INTEGER,
  bitNumber INTEGER,
) 
```

该`log`表包含非常多的记录（500,000+），而其他表非常小。我可以使用以下查询加入表：

```
SELECT l.eventId, o.typeId, s.bitNumber
FROM log l, objects o, statusBits s
WHERE (l.objectId = o.objectId) AND (o.typeId = s.typeId) 
```

此查询运行良好且快速。`ORDER BY eventId`当我在最后添加一个子句时，它也运行得很快。但是，当我添加`ORDER BY eventId, bitNumber`（因此按两个字段而不是一个字段排序）时，它变得非常缓慢。

如何优化我的查询以使其运行得更快？如果这有什么不同，我正在运行 Oracle 10g XE。

**更新：** 我已经尝试过了`CREATE INDEX ON statusBits(bitNumber)`，但它似乎没有很大的效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-05T09:57:55.147

首先，我将重构您的查询如下：

```
SELECT L.eventId
    ,O.typeId
    ,S.bitNumber
FROM log L
INNER JOIN objects O ON O.objectId = L.objectId
INNER JOIN statusBits S ON S.typeId = O.typeId 
```

它可能对您的执行时间没有帮助，但查询更具可读性并且使用`INNER JOIN`是最佳实践。

然后为了优化您的执行时间，想到的第一个解决方案是创建一个索引，但您已经对其进行了测试。尝试连接索引而不是简单索引可能会有所帮助：

```
CREATE INDEX ON statusBits (typeId, bitNumber); 
```

希望这会有所帮助。

# java - 詹金斯升级问题

> ID：13126689
> 
> 赞同：1
> 
> 时间：2012-10-29T17:30:01.840
> 
> 标签：java, maven, ubuntu, mercurial, jenkins

我重新安装了 Jenkins (1.466.2) 以及全新安装的 Kubuntu 12.10

但是现在只有一个 Job 开始了。

这是日志输出：

```
Oct 29, 2012 5:59:16 PM hudson.WebAppMain$2 run
INFO: Jenkins is fully up and running

Oct 29, 2012 5:59:16 PM hudson.DNSMultiCast <init>
WARNING: Failed to advertise the service to DNS multi-cast
java.net.SocketException: No such device
    at java.net.PlainDatagramSocketImpl.join(Native Method)
    at java.net.AbstractPlainDatagramSocketImpl.join(AbstractPlainDatagramSocketImpl.java:178)
    at java.net.MulticastSocket.joinGroup(MulticastSocket.java:319)
    at javax.jmdns.impl.JmDNSImpl.openMulticastSocket(JmDNSImpl.java:463)
    at javax.jmdns.impl.JmDNSImpl.<init>(JmDNSImpl.java:420)
    at javax.jmdns.JmDNS.create(JmDNS.java:60)
    at hudson.DNSMultiCast.<init>(DNSMultiCast.java:27)
    at jenkins.model.Jenkins.<init>(Jenkins.java:788)
    at hudson.model.Hudson.<init>(Hudson.java:81)
    at hudson.model.Hudson.<init>(Hudson.java:77)
    at hudson.WebAppMain$2.run(WebAppMain.java:217)

Oct 29, 2012 5:59:16 PM hudson.UDPBroadcastThread run
WARNING: UDP handling problem
java.net.SocketException: No such device
    at java.net.PlainDatagramSocketImpl.join(Native Method)
    at java.net.AbstractPlainDatagramSocketImpl.join(AbstractPlainDatagramSocketImpl.java:178)
    at java.net.MulticastSocket.joinGroup(MulticastSocket.java:319)
    at hudson.UDPBroadcastThread.run(UDPBroadcastThread.java:73)

Oct 29, 2012 5:59:16 PM hudson.TcpSlaveAgentListener <init>
INFO: JNLP slave agent listener started on TCP port 57955

Oct 29, 2012 5:59:15 PM jenkins.InitReactorRunner$1 onAttained
INFO: Completed initialization

Oct 29, 2012 5:59:13 PM jenkins.InitReactorRunner$1 onAttained
INFO: Loaded all jobs

Oct 29, 2012 5:59:11 PM jenkins.InitReactorRunner$1 onTaskFailed
SEVERE: Failed Loading job project1
java.lang.NoClassDefFoundError: hudson/model/Run$RunExecution
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2404)
    at java.lang.Class.getConstructor0(Class.java:2714)
    at java.lang.Class.getConstructor(Class.java:1674)
    at hudson.model.AbstractProject.loadBuild(AbstractProject.java:979)
    at hudson.model.AbstractProject$1.create(AbstractProject.java:267)
    at hudson.model.AbstractProject$1.create(AbstractProject.java:265)
    at hudson.model.RunMap.load(RunMap.java:247)
    at hudson.model.AbstractProject.onLoad(AbstractProject.java:265)
    at hudson.maven.MavenModuleSet.onLoad(MavenModuleSet.java:669)
    at hudson.model.Items.load(Items.java:115)
    at jenkins.model.Jenkins$15.run(Jenkins.java:2446)
    at org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:169)
    at org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:282)
    at jenkins.model.Jenkins$6.runTask(Jenkins.java:839)
    at org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:210)
    at org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:117)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.ClassNotFoundException: hudson.model.Run$RunExecution
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 20 more

Oct 29, 2012 5:59:11 PM jenkins.InitReactorRunner$1 onTaskFailed
SEVERE: Failed Loading job project2
java.lang.NoClassDefFoundError: hudson/model/Run$RunExecution
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2404)
    at java.lang.Class.getConstructor0(Class.java:2714)
    at java.lang.Class.getConstructor(Class.java:1674)
    at hudson.model.AbstractProject.loadBuild(AbstractProject.java:979)
    at hudson.model.AbstractProject$1.create(AbstractProject.java:267)
    at hudson.model.AbstractProject$1.create(AbstractProject.java:265)
    at hudson.model.RunMap.load(RunMap.java:247)
    at hudson.model.AbstractProject.onLoad(AbstractProject.java:265)
    at hudson.maven.MavenModuleSet.onLoad(MavenModuleSet.java:669)
    at hudson.model.Items.load(Items.java:115)
    at jenkins.model.Jenkins$15.run(Jenkins.java:2446)
    at org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:169)
    at org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:282)
    at jenkins.model.Jenkins$6.runTask(Jenkins.java:839)
    at org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:210)
    at org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:117)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.ClassNotFoundException: hudson.model.Run$RunExecution
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 20 more

[...]

Oct 29, 2012 5:59:10 PM jenkins.InitReactorRunner$1 onTaskFailed
SEVERE: Failed Loading job project5
java.lang.NoClassDefFoundError: hudson/model/Run$RunExecution
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2404)
    at java.lang.Class.getConstructor0(Class.java:2714)
    at java.lang.Class.getConstructor(Class.java:1674)
    at hudson.model.AbstractProject.loadBuild(AbstractProject.java:979)
    at hudson.model.AbstractProject$1.create(AbstractProject.java:267)
    at hudson.model.AbstractProject$1.create(AbstractProject.java:265)
    at hudson.model.RunMap.load(RunMap.java:247)
    at hudson.model.AbstractProject.onLoad(AbstractProject.java:265)
    at hudson.maven.MavenModuleSet.onLoad(MavenModuleSet.java:669)
    at hudson.model.Items.load(Items.java:115)
    at jenkins.model.Jenkins$15.run(Jenkins.java:2446)
    at org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:169)
    at org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:282)
    at jenkins.model.Jenkins$6.runTask(Jenkins.java:839)
    at org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:210)
    at org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:117)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.ClassNotFoundException: hudson.model.Run$RunExecution
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 20 more

Oct 29, 2012 5:59:10 PM jenkins.InitReactorRunner$1 onTaskFailed
SEVERE: Failed Loading job project10
hudson.util.IOException2: Unable to read /opt/jenkins/jobs/project10/config.xml
    at hudson.XmlFile.read(XmlFile.java:139)
    at hudson.model.Items.load(Items.java:114)
    at jenkins.model.Jenkins$15.run(Jenkins.java:2446)
    at org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:169)
    at org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:282)
    at jenkins.model.Jenkins$6.runTask(Jenkins.java:839)
    at org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:210)
    at org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:117)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.NoClassDefFoundError: hudson/model/Run$RunExecution
    at java.lang.Class.getDeclaredFields0(Native Method)
    at java.lang.Class.privateGetDeclaredFields(Class.java:2308)
    at java.lang.Class.getDeclaredFields(Class.java:1760)
    at com.thoughtworks.xstream.mapper.AnnotationMapper.processTypes(AnnotationMapper.java:191)
    at com.thoughtworks.xstream.mapper.AnnotationMapper.processAnnotations(AnnotationMapper.java:161)
    at com.thoughtworks.xstream.mapper.AnnotationMapper.defaultImplementationOf(AnnotationMapper.java:118)
    at hudson.util.xstream.MapperDelegate.defaultImplementationOf(MapperDelegate.java:59)
    at com.thoughtworks.xstream.mapper.MapperWrapper.defaultImplementationOf(MapperWrapper.java:54)
    at com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:64)
    at com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:60)
    at com.thoughtworks.xstream.core.TreeUnmarshaller.start(TreeUnmarshaller.java:137)
    at com.thoughtworks.xstream.core.AbstractTreeMarshallingStrategy.unmarshal(AbstractTreeMarshallingStrategy.java:33)
    at com.thoughtworks.xstream.XStream.unmarshal(XStream.java:926)
    at hudson.util.XStream2.unmarshal(XStream2.java:93)
    at com.thoughtworks.xstream.XStream.unmarshal(XStream.java:912)
    at com.thoughtworks.xstream.XStream.fromXML(XStream.java:864)
    at hudson.XmlFile.read(XmlFile.java:133)
    ... 10 more
Caused by: java.lang.ClassNotFoundException: hudson.model.Run$RunExecution
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 27 more

Oct 29, 2012 5:59:10 PM jenkins.InitReactorRunner$1 onAttained
INFO: Augmented all extensions

Oct 29, 2012 5:59:10 PM jenkins.InitReactorRunner$1 onAttained
INFO: Started all plugins

Oct 29, 2012 5:59:10 PM jenkins.InitReactorRunner$1 onAttained
INFO: Prepared all plugins

Oct 29, 2012 5:59:10 PM jenkins.InitReactorRunner$1 onAttained
INFO: Listed all plugins

Oct 29, 2012 5:59:09 PM jenkins.InitReactorRunner$1 onAttained
INFO: Started initialization 
```

前两个警告和最后一个严重错误有点不同，但其他的基本上都是说：`java.lang.ClassNotFoundException: hudson.model.Run$RunExecution`

我怎样才能解决这个问题？

**编辑：**

这是我的一项工作的 config.xml 文件：

```
<?xml version='1.0' encoding='UTF-8'?>
<maven2-moduleset>
  <actions/>
  <description></description>
  <keepDependencies>false</keepDependencies>
  <properties/>
  <scm class="hudson.plugins.mercurial.MercurialSCM">
    <installation>(Default)</installation>
    <source>/media/work/hg/windows-vm-share/project7/</source>
    <modules></modules>
    <clean>false</clean>
    <forest>false</forest>
  </scm>
  <canRoam>true</canRoam>
  <disabled>false</disabled>
  <blockBuildWhenDownstreamBuilding>false</blockBuildWhenDownstreamBuilding>
  <blockBuildWhenUpstreamBuilding>false</blockBuildWhenUpstreamBuilding>
  <jdk>Java SE 7</jdk>
  <triggers class="vector">
    <hudson.triggers.SCMTrigger>
      <spec>*/10 * * * *</spec>
    </hudson.triggers.SCMTrigger>
  </triggers>
  <concurrentBuild>false</concurrentBuild>
  <rootModule>
    <groupId>org.project7</groupId>
    <artifactId>project7-all</artifactId>
  </rootModule>
  <aggregatorStyleBuild>true</aggregatorStyleBuild>
  <incrementalBuild>false</incrementalBuild>
  <perModuleEmail>true</perModuleEmail>
  <ignoreUpstremChanges>false</ignoreUpstremChanges>
  <archivingDisabled>false</archivingDisabled>
  <resolveDependencies>false</resolveDependencies>
  <processPlugins>false</processPlugins>
  <mavenValidationLevel>-1</mavenValidationLevel>
  <runHeadless>false</runHeadless>
  <settingConfigId></settingConfigId>
  <globalSettingConfigId></globalSettingConfigId>
  <reporters/>
  <publishers/>
  <buildWrappers/>
  <prebuilders/>
  <postbuilders/>
  <runPostStepsIfResult>
    <name>FAILURE</name>
    <ordinal>2</ordinal>
    <color>RED</color>
  </runPostStepsIfResult>
</maven2-moduleset> 
```

这里安装了 Jenkins 插件：

*   蚂蚁
*   文档
*   语言环境插件
*   外部监视器作业类型插件
*   pam-auth
*   Maven 集成插件
*   Jenkins M2 额外步骤插件
*   Jenkins Subversion 插件
*   Jenkins SSH 从站插件
*   Jenkins 翻译辅助插件
*   LDAP 插件
*   Jenkins Mercurial 插件
*   Jenkins Maven 发布插件 插件
*   Jenkins CVS 插件
*   Jenkins Maven 信息插件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:09:41.800

看起来您缺少原始安装中的插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:48:32.003

正如一位同事指出的那样：Kubuntu 12.10 安装的 Jenkins 版本比我以前安装的旧版本（最新的 LTS 版本而不是最新版本）。使用最新版本就可以了。

# reverse-engineering - IDAPro 将 C++ 头文件加载到 IDAPro 用于结构

> ID：13126694
> 
> 赞同：3
> 
> 时间：2012-10-29T17:30:09.453
> 
> 标签：reverse-engineering, ida

有人知道怎么做吗？

使用 File>Load C 头文件故障转移太多错误代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:36:15.780

C++ 标准库中有太多 IDA 无法理解的依赖于编译器的宏。由于 IDA 已经识别了许多原始数据类型，例如`uint32_t`etc，因此您可以只复制和粘贴您需要的结构声明。

您**可以**在编译器设置屏幕中定义所有与编译器相关的宏，但这是一个非常繁琐的过程。

# google-chrome-extension - getBackgroundPage() 方法真正返回哪个窗口对象？

> ID：13126695
> 
> 赞同：0
> 
> 时间：2012-10-29T17:30:10.653
> 
> 标签：google-chrome-extension, return-value, window-object

在文档中，它说 getBackgroundPage()

> 返回当前扩展内运行的背景页面的 JavaScript“窗口”对象。

它是哪个窗口？它与我们使用的窗口是否相同：“chrome.windows.getCurrent()”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:40:34.980

如果您在 中指定背景页面`manifest.json`，则该页面在您的扩展程序运行时实际上是“打开的”（转到`chrome://extensions`并查找具有属性的扩展程序`Inspect views: some_background_page.html`）。尽管您实际上看不到该页面，但它确实存在，并且正如文档所述，运行`getBackgroundPage()`将返回该页面的“窗口”对象，允许您在普通窗口上执行所有可以执行的操作（请参阅[此处](http://www.w3schools.com/jsref/obj_window.asp)获取列表其中一些属性/操作）。

要回答您的第二个问题，您可以[在此处](http://developer.chrome.com/extensions/windows.html#current-window)阅读当前窗口的值在从后台页面调用时回落到最后一个活动窗口。`background.js`这是一个可能有助于解释的示例- 它会显示 和 的相同 ID `getCurrent`，`getAllinWindow`两者都将引用您调用扩展的活动/可见页面中的页面 - 而不是背景页面本身：

```
//  This gets all current window tabs
chrome.tabs.getAllInWindow(null, function(tabs){
  // This alerts the window ID when getCurrent is called from background.js
  chrome.windows.getCurrent(function(window){
    alert("Background ID: " + window.id);
    });

  // Now we loop through the tabs returned by getAllInWindow,
  // showing the window ID. The ID is identical to the one above,
  // meaning that getCurrent (when called from a background page)
  // returns the current active window - NOT the background page
  chrome.windows.get(tabs[0].windowId, function(window) {
    alert("Active Window: " + window.id);
  });
}); 
```

希望有帮助！

# animation - JQuery 动画不起作用

> ID：13126697
> 
> 赞同：0
> 
> 时间：2012-10-29T17:30:19.807
> 
> 标签：animation

好吧，我有一张通过向左移动 1000 像素来进行动画处理的图像。一旦停止，该图像将被替换为另一个图像。我的代码：

```
function image1() {
    $('#photo').animate({left: '1000px'}, 40000, function() {
        $('#photo').attr('src', 'image2.jpg');
       setTimeout(image1, "2000")
    });
} 
```

图像确实移动了，但是当它停止时，它不会改变.. :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:31:56.800

尝试这个：

```
setTimeout(image1, 2000) 
```

而不是这个

```
setTimeout(image1, "2000") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:31:38.813

首先， to 的第二个参数[`setTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)应该是一个数字[（小于`2^31`）](https://stackoverflow.com/questions/3468607/why-does-settimeout-break-for-large-millisecond-delay-values)，而不是字符串。

```
setTimeout(image1, 2000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T17:47:32.513

使用 $(this) 而不是重复选择器。

# c# - 如何从文本文件中的另一行向下读取 X 行？

> ID：13126702
> 
> 赞同：3
> 
> 时间：2012-10-29T17:30:38.703
> 
> 标签：c#, arrays, text-files

我有一个文本文件，我将其加载到字符串数组中。该文件的内容如下所示：

> OTI*IA*IX*NA~
> REF*G1*J EVERETTE~
> REF*11*0113722462~
> AMT*GW*229.8~
> NM1*QC*1*JENNNINGS*PHILLIP~
> OTI*IA*IX*NA~
> REF*G1*J EVERETTE~
> REF*11*0113722463~
> AMT*GW*127.75~
> NM1*QC*1*JENNNINGS*PHILLIP~
> OTI*IA*IX*NA~
> REF*G1*J EVERETTE~
> REF*11*0113722462~
> AMT*GW*10.99 ~
> NM1*QC*1*詹宁斯*菲利普~
> ...

我正在寻找以 OTI 开头的行，如果后面是“IA”，那么我需要从以 REF*11 开头的行中获取 10 位数字。到目前为止，我有这个：

```
string[] readText = File.ReadAllLines("myfile.txt");

foreach (string s in readText) //string contains 1 line of text from above example
{
    string[] currentline = s.Split('*');

    if (currentline[0] == "OTI")
    {
        //move down 2 lines and grab the 10 digit
        //number from the line that starts with REF*11
    }
} 
```

我需要的行总是在当前 OTI 行之后的 2 行。如何访问从当前行向下 2 行的行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T17:34:40.373

而不是使用`foreach()`你可以使用 a`for(int index = 0; index < readText.Length; index++)` 然后你知道你正在访问的线路，你可以很容易地说`int otherIndex = index + 2`

```
string[] readText = File.ReadAllLines("myfile.txt");

for(int index = 0; index < readText.Length; index++)
{
    string[] currentline = readText[index].Split('*');

    if (currentline[0] == "OTI")
    {
        //move down 2 lines and grab the 10 digit
        //number from the line that starts with REF*11
        int refIndex = index + 2;
        string refLine = readText[refIndex];
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T17:37:53.833

这看起来像一个 EDI 文件！啊，EDI，回忆……

好消息是 EDI 文件是分隔的，就像大多数 CSV 文件格式一样。您可以使用任何标准 CSV 文件库将 EDI 文件加载到一个巨大的数组中，然后按位置对其进行迭代。

我在这里发布了我的开源 CSV 库，如果有帮助，请随时使用。您可以简单地将“星号”指定为分隔符：

[https://code.google.com/p/csharp-csv-reader/](https://code.google.com/p/csharp-csv-reader/)

```
// This code assumes the file is on disk, and the first row of the file
// has the names of the columns on it
DataTable dt = CSVReader.LoadDataTable(myfilename, '*', '\"'); 
```

此时，您可以像往常一样遍历数据表。

```
for (int i = 0; i < dt.Rows.Count; i++) {
    if (dt.Rows[i][0] == "OTI") {
        Console.WriteLine("The row I want is: " + dt.Rows[i + 2][0]);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T17:43:27.547

关于什么：

```
string[] readText = File.ReadAllLines("myfile.txt");

for (int i = 0; i < readText.Length; i++)
{
    if (readText[i].StartsWith("OTI") && readText[i+2].StartsWith("REF*11")){
       string number = readText[i+2].Substring("REF*11".Length, 10);
       //do something 
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T18:50:09.023

如果您想使用正则表达式来标记项目并创建动态实体，这里是这样一个模式

```
string data = @"NM1*QC*1*JENNINGS*PHILLIP~
OTI*IA*IX*NA~
REF*G1*J EVERETTE~
REF*11*0113722463~
AMT*GW*127.75~
NM1*QC*1*JENNINGS*PHILLIP~
OTI*IA*IX*NA~
REF*G1*J EVERETTE~
REF*11*0113722462~
AMT*GW*10.99~
NM1*QC*1*JENNINGS*PHILLIP~";

string pattern = @"^(?<Command>\w{3})((?:\*)(?<Value>[^~*]+))+";

var lines = Regex.Matches(data, pattern, RegexOptions.Multiline)
                 .OfType<Match>()
                 .Select (mt => new
                 {
                    Op   = mt.Groups["Command"].Value,
                    Data = mt.Groups["Value"].Captures.OfType<Capture>().Select (c => c.Value)
                 }
                 ); 
```

这会产生一个这样的项目列表，您可以将您的业务逻辑应用于：

![在此处输入图像描述](../Images/242ebf01799c2ce6386c8f657f2f6097.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T17:35:27.160

为什么不使用 System.Text.RegularExpressions 中定义的 Regex.Match 或 Regex.Matches 使用正则表达式匹配？您还可以查看字符串模式匹配算法，例如 Knuth-Morris-Pratt 算法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-29T17:35:55.293

```
string[] readText = File.ReadAllLines("myfile.txt");
foreach (string s in readText) //string contains 1 line of text from above example
{
    string[] currentline = s.Split('*');

    if (currentline[0] == "REF"&&currentline[1] == "11")
    {
        found=false;
        needed=current+2;
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-29T17:42:04.900

```
string[] readText = File.ReadAllLines("myfile.txt");

for(int linenum = 0;linenum < readText.Length; linenum++) 
{
    string s = readText[linenum];

    string[] currentline = s.Split('*');

    if (currentline[0] == "OTI")
    {
        //move down 2 lines and grab the 10 digit
        linenum +=2;
        string refLine = readText[linenum];
        //number from the line that starts with REF*11

        // Extract your number here from refline

    }  
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-29T17:53:47.297

谢谢大家..这是我想出的，但我也在阅读您的答案，因为我知道我会学到一些东西！再次感谢！

```
string[] readText = File.ReadAllLines("myfile.txt");

int i = 0;
foreach (string s in readText)
{
    string[] currentline = s.Split('*');

    if (currentline[0] == "OTI")
    {
        lbRecon.Items.Add(readText[i+2].Substring(8, 9));
    }
i++;
} 
```

# scala - Specs2：使用 Hamcrest 匹配器

> ID：13126705
> 
> 赞同：3
> 
> 时间：2012-10-29T17:30:46.797
> 
> 标签：scala, hamcrest, specs2

对于用 Java 编写的域对象，我有大量的 Hamcrest 匹配器。我现在正在迁移到 Scala，并希望在 specs2 测试的上下文中重用这些现有的匹配器。

给定 Foo 类的 Hamcrest 匹配器：

```
public class FooMatcher extends TypeSafeMatcher[Foo] {
...
} 
```

我希望能够这样使用它：

```
val myFooMatcher = new FooMatcher(...)
foo must match (myFooMatcher)
foos must contain (myFooMatcher1, myFooMatcher2) 
```

等等。

Specs2 似乎有相反的情况，它的 Matcher[T] 特征到 org.hamcrest.Matcher 的适配器，但我正在寻找相反的方式。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T00:18:41.083

您需要添加一个隐式转换才能使其工作：

```
import org.hamcrest._
import org.specs2.matcher.MustMatchers._

implicit def asSpecs2Matcher[T](hamcrest: org.hamcrest.TypeSafeMatcher[T]):     
  org.specs2.matcher.Matcher[T] = {

  def koMessage(a: Any) = {
    val description = new StringDescription
    description.appendValue(a)
    hamcrest.describeTo(description)
    description.toString 
  }
  (t: T) => (hamcrest.matches(t), koMessage(t))  
} 
```

让我们看看它的实际效果：

```
case class Foo(isOk: Boolean = true)

// a Hamcrest matcher for Foo elements
class FooMatcher extends TypeSafeMatcher[Foo] {
  def matchesSafely(item: Foo): Boolean    = item.isOk
  def describeTo(description: Description) = description.appendText(" is ko")
}

// an instance of that matcher
def beMatchingFoo = new FooMatcher

// this returns a success
Foo() must beMatchingFoo

// this returns a failure
Foo(isOk = false) must beMatchingFoo

// this is a way to test that some elements in a collection have
// the desired property
Seq(Foo()) must have oneElementLike { case i => i must beMatchingFoo }

// if you have several matchers you want to try out
Seq(Foo()) must have oneElementLike { case i => 
  i must beMatchingFoo and beMatchingBar 
} 
```

# xslt - 获取所有包含的样式表

> ID：13126707
> 
> 赞同：2
> 
> 时间：2012-10-29T17:30:48.610
> 
> 标签：xslt

是否可以获得 xslt 进程中包含的所有样式表的列表？

我问是因为整个包含/导入过程是在执行之前完成的，我想知道我是否可以访问这些信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:52:52.960

此样式表 (Main.xslt)

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

   <xsl:include href="Sub1.xslt"/>
   <xsl:include href="Sub2.xslt"/>

   <xsl:template match="/">
      <root>
         <xsl:value-of select="document('Main.xslt')/xsl:stylesheet/xsl:include/@href"/>
      </root>
   </xsl:template>
</xsl:stylesheet> 
```

及其包含的样式表 Sub1.xslt 和 Sub2.xslt

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

    <xsl:template name="Template1">
      <xsl:text>Template 1</xsl:text>
    </xsl:template>
</xsl:stylesheet>

<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

    <xsl:template name="Template2">
      <xsl:text>Template 2</xsl:text>
    </xsl:template>
</xsl:stylesheet> 
```

会产生

```
<?xml version="1.0" encoding="UTF-8"?>
<root>Sub1.xslt Sub2.xslt</root> 
```

可能有不同的方法；我不知道。此外，我不能 100% 确定调用时如何定义基本 URI `document('Main.xslt')`，这意味着当您希望文件名相对于 XSLT 文件进行解析时，文件名可以相对于 XML 实例进行解析。在任何情况下，我使用驻留在不同于 Main.xslt 的目录中的 XML 实例运行测试，它仍然有效。

**附录：**

为了递归地遍历树，您可以执行以下操作（XSLT1）：

```
 <xsl:include href="Sub1.xslt"/>
   <xsl:include href="Sub2.xslt"/>

   <xsl:template match="/">
      <root>
         <xsl:call-template name="WalkIncludes">
            <xsl:with-param name="FileName" select="'Main.xslt'"/>
         </xsl:call-template>
      </root>
   </xsl:template>

   <xsl:template name="WalkIncludes">
      <xsl:param name="FileName"/>

         <xsl:for-each select="document($FileName)/xsl:stylesheet/xsl:include/@href">
            <xsl:value-of select="."/>

            <xsl:call-template name="WalkIncludes">
               <xsl:with-param name="FileName" select="."/>
            </xsl:call-template>
         </xsl:for-each>
   </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T00:05:29.103

**这种简短且完全通用的转换产生了一个分层结果（XML 树），它在任何样式表树中呈现所有导入/包含并避免无限循环。请注意，XSLT（1.0 和 2.0）允许循环导入**。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>
 <xsl:param name="pUri" select="'test-strSplitWordDel2.xsl'"/>
 <xsl:variable name="vVisited" select="'|'"/>

 <xsl:template match="/">
  <xsl:param name="pUri" select="$pUri"/>
  <xsl:param name="pVisited" select="$vVisited"/>

  <xsl:variable name="vVisited" select="concat($pVisited, $pUri, '|')"/>

  <stylesheet uri="{$pUri}">
   <xsl:if test="not(contains($pVisited, concat('|',$pUri,'|')))">
       <xsl:apply-templates select="*/xsl:import|*/xsl:include">
        <xsl:with-param name="pVisited" select="$vVisited"/>
       </xsl:apply-templates>
   </xsl:if>
  </stylesheet>
 </xsl:template>

 <xsl:template match="xsl:import|xsl:include">
   <xsl:param name="pVisited"/>
     <xsl:element name="{local-name()}">
       <xsl:apply-templates select="document(@href)">
        <xsl:with-param name="pUri" select="string(@href)"/>
        <xsl:with-param name="pVisited" select="$pVisited"/>
       </xsl:apply-templates>
     </xsl:element>
 </xsl:template>
</xsl:stylesheet> 
```

**例如，当我们将此转换应用于以下 FXSL 样式表 (func-standardXpathFunctions.xsl) 时：**

```
<xsl:stylesheet version="2.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema"
 xmlns:xdt="http://www.w3.org/2005/04/xpath-datatypes"
 xmlns:xdtOld="http://www.w3.org/2005/02/xpath-datatypes"
 xmlns:xdtOld2="http://www.w3.org/2004/10/xpath-datatypes"
 xmlns:f="http://fxsl.sf.net/"
 exclude-result-prefixes="xs xdt f"
>
<!--
       This module contains the FXSL versions of the "standard" XPath functions

       These are intended as convenience functions, so that they can be passed
       as parameters to other functions (e.g. to f:zipWith())
       or curried and passed as parameters (e.g. to f:map())
-->

 <xsl:import href="func-curry.xsl"/>
 <xsl:import href="func-compose-flist.xsl"/>

 <xsl:import href="func-standardArithmeticXpathFunctions.xsl"/>
 <xsl:import href="func-standardBooleanXpathFunctions.xsl"/>
 <xsl:import href="func-standardStringXpathFunctions.xsl"/>
 <xsl:import href="func-standardNodesXpathFunctions.xsl"/>
 <xsl:import href="func-standardSequencesXpathFunctions.xsl"/>
 <xsl:import href="func-standardAggregateXpathFunctions.xsl"/>
 <xsl:import href="func-standardDateTimeXpathFunctions.xsl"/>
 <xsl:import href="func-standardXSLTXpathFunctions.xsl"/>
 <xsl:import href="func-standardAxisXpathFunctions.xsl"/>

</xsl:stylesheet> 
```

**产生了想要的正确结果**：

```
<stylesheet uri="test-strSplitWordDel2.xsl">
   <import>
      <stylesheet uri="func-curry.xsl">
         <import>
            <stylesheet uri="../f/func-type.xsl">
               <import>
                  <stylesheet uri="../f/func-XpathConstructors.xsl">
                     <import>
                        <stylesheet uri="func-compose-flist.xsl">
                           <import>
                              <stylesheet uri="func-apply.xsl"/>
                           </import>
                        </stylesheet>
                     </import>
                  </stylesheet>
               </import>
               <import>
                  <stylesheet uri="../f/func-curry.xsl">
                     <import>
                        <stylesheet uri="../f/func-type.xsl"/>
                     </import>
                  </stylesheet>
               </import>
            </stylesheet>
         </import>
      </stylesheet>
   </import>
   <import>
      <stylesheet uri="func-compose-flist.xsl">
         <import>
            <stylesheet uri="func-apply.xsl"/>
         </import>
      </stylesheet>
   </import>
   <import>
      <stylesheet uri="func-standardArithmeticXpathFunctions.xsl">
         <import>
            <stylesheet uri="func-curry.xsl">
               <import>
                  <stylesheet uri="../f/func-type.xsl">
                     <import>
                        <stylesheet uri="../f/func-XpathConstructors.xsl">
                           <import>
                              <stylesheet uri="func-compose-flist.xsl">
                                 <import>
                                    <stylesheet uri="func-apply.xsl"/>
                                 </import>
                              </stylesheet>
                           </import>
                        </stylesheet>
                     </import>
                     <import>
                        <stylesheet uri="../f/func-curry.xsl">
                           <import>
                              <stylesheet uri="../f/func-type.xsl"/>
                           </import>
                        </stylesheet>
                     </import>
                  </stylesheet>
               </import>
            </stylesheet>
         </import>
         <import>
            <stylesheet uri="func-compose-flist.xsl">
               <import>
                  <stylesheet uri="func-apply.xsl"/>
               </import>
            </stylesheet>
         </import>
      </stylesheet>
   </import>
   <import>
      <stylesheet uri="func-standardBooleanXpathFunctions.xsl">
         <import>
            <stylesheet uri="func-curry.xsl">
               <import>
                  <stylesheet uri="../f/func-type.xsl">
                     <import>
                        <stylesheet uri="../f/func-XpathConstructors.xsl">
                           <import>
                              <stylesheet uri="func-compose-flist.xsl">
                                 <import>
                                    <stylesheet uri="func-apply.xsl"/>
                                 </import>
                              </stylesheet>
                           </import>
                        </stylesheet>
                     </import>
                     <import>
                        <stylesheet uri="../f/func-curry.xsl">
                           <import>
                              <stylesheet uri="../f/func-type.xsl"/>
                           </import>
                        </stylesheet>
                     </import>
                  </stylesheet>
               </import>
            </stylesheet>
         </import>
         <import>
            <stylesheet uri="func-compose-flist.xsl">
               <import>
                  <stylesheet uri="func-apply.xsl"/>
               </import>
            </stylesheet>
         </import>
      </stylesheet>
   </import>
   <import>
      <stylesheet uri="func-standardStringXpathFunctions.xsl">
         <import>
            <stylesheet uri="func-curry.xsl">
               <import>
                  <stylesheet uri="../f/func-type.xsl">
                     <import>
                        <stylesheet uri="../f/func-XpathConstructors.xsl">
                           <import>
                              <stylesheet uri="func-compose-flist.xsl">
                                 <import>
                                    <stylesheet uri="func-apply.xsl"/>
                                 </import>
                              </stylesheet>
                           </import>
                        </stylesheet>
                     </import>
                     <import>
                        <stylesheet uri="../f/func-curry.xsl">
                           <import>
                              <stylesheet uri="../f/func-type.xsl"/>
                           </import>
                        </stylesheet>
                     </import>
                  </stylesheet>
               </import>
            </stylesheet>
         </import>
         <import>
            <stylesheet uri="func-compose-flist.xsl">
               <import>
                  <stylesheet uri="func-apply.xsl"/>
               </import>
            </stylesheet>
         </import>
      </stylesheet>
   </import>
   <import>
      <stylesheet uri="func-standardNodesXpathFunctions.xsl">
         <import>
            <stylesheet uri="func-curry.xsl">
               <import>
                  <stylesheet uri="../f/func-type.xsl">
                     <import>
                        <stylesheet uri="../f/func-XpathConstructors.xsl">
                           <import>
                              <stylesheet uri="func-compose-flist.xsl">
                                 <import>
                                    <stylesheet uri="func-apply.xsl"/>
                                 </import>
                              </stylesheet>
                           </import>
                        </stylesheet>
                     </import>
                     <import>
                        <stylesheet uri="../f/func-curry.xsl">
                           <import>
                              <stylesheet uri="../f/func-type.xsl"/>
                           </import>
                        </stylesheet>
                     </import>
                  </stylesheet>
               </import>
            </stylesheet>
         </import>
         <import>
            <stylesheet uri="func-compose-flist.xsl">
               <import>
                  <stylesheet uri="func-apply.xsl"/>
               </import>
            </stylesheet>
         </import>
      </stylesheet>
   </import>
   <import>
      <stylesheet uri="func-standardSequencesXpathFunctions.xsl">
         <import>
            <stylesheet uri="func-curry.xsl">
               <import>
                  <stylesheet uri="../f/func-type.xsl">
                     <import>
                        <stylesheet uri="../f/func-XpathConstructors.xsl">
                           <import>
                              <stylesheet uri="func-compose-flist.xsl">
                                 <import>
                                    <stylesheet uri="func-apply.xsl"/>
                                 </import>
                              </stylesheet>
                           </import>
                        </stylesheet>
                     </import>
                     <import>
                        <stylesheet uri="../f/func-curry.xsl">
                           <import>
                              <stylesheet uri="../f/func-type.xsl"/>
                           </import>
                        </stylesheet>
                     </import>
                  </stylesheet>
               </import>
            </stylesheet>
         </import>
         <import>
            <stylesheet uri="func-compose-flist.xsl">
               <import>
                  <stylesheet uri="func-apply.xsl"/>
               </import>
            </stylesheet>
         </import>
      </stylesheet>
   </import>
   <import>
      <stylesheet uri="func-standardAggregateXpathFunctions.xsl">
         <import>
            <stylesheet uri="func-curry.xsl">
               <import>
                  <stylesheet uri="../f/func-type.xsl">
                     <import>
                        <stylesheet uri="../f/func-XpathConstructors.xsl">
                           <import>
                              <stylesheet uri="func-compose-flist.xsl">
                                 <import>
                                    <stylesheet uri="func-apply.xsl"/>
                                 </import>
                              </stylesheet>
                           </import>
                        </stylesheet>
                     </import>
                     <import>
                        <stylesheet uri="../f/func-curry.xsl">
                           <import>
                              <stylesheet uri="../f/func-type.xsl"/>
                           </import>
                        </stylesheet>
                     </import>
                  </stylesheet>
               </import>
            </stylesheet>
         </import>
         <import>
            <stylesheet uri="func-compose-flist.xsl">
               <import>
                  <stylesheet uri="func-apply.xsl"/>
               </import>
            </stylesheet>
         </import>
      </stylesheet>
   </import>
   <import>
      <stylesheet uri="func-standardDateTimeXpathFunctions.xsl">
         <import>
            <stylesheet uri="func-curry.xsl">
               <import>
                  <stylesheet uri="../f/func-type.xsl">
                     <import>
                        <stylesheet uri="../f/func-XpathConstructors.xsl">
                           <import>
                              <stylesheet uri="func-compose-flist.xsl">
                                 <import>
                                    <stylesheet uri="func-apply.xsl"/>
                                 </import>
                              </stylesheet>
                           </import>
                        </stylesheet>
                     </import>
                     <import>
                        <stylesheet uri="../f/func-curry.xsl">
                           <import>
                              <stylesheet uri="../f/func-type.xsl"/>
                           </import>
                        </stylesheet>
                     </import>
                  </stylesheet>
               </import>
            </stylesheet>
         </import>
      </stylesheet>
   </import>
   <import>
      <stylesheet uri="func-standardXSLTXpathFunctions.xsl">
         <import>
            <stylesheet uri="func-map.xsl">
               <import>
                  <stylesheet uri="func-apply.xsl"/>
               </import>
               <import>
                  <stylesheet uri="func-curry.xsl">
                     <import>
                        <stylesheet uri="../f/func-type.xsl">
                           <import>
                              <stylesheet uri="../f/func-XpathConstructors.xsl">
                                 <import>
                                    <stylesheet uri="func-compose-flist.xsl">
                                       <import>
                                          <stylesheet uri="func-apply.xsl"/>
                                       </import>
                                    </stylesheet>
                                 </import>
                              </stylesheet>
                           </import>
                           <import>
                              <stylesheet uri="../f/func-curry.xsl">
                                 <import>
                                    <stylesheet uri="../f/func-type.xsl"/>
                                 </import>
                              </stylesheet>
                           </import>
                        </stylesheet>
                     </import>
                  </stylesheet>
               </import>
            </stylesheet>
         </import>
         <import>
            <stylesheet uri="func-flip.xsl">
               <import>
                  <stylesheet uri="func-apply.xsl"/>
               </import>
               <import>
                  <stylesheet uri="func-curry.xsl">
                     <import>
                        <stylesheet uri="../f/func-type.xsl">
                           <import>
                              <stylesheet uri="../f/func-XpathConstructors.xsl">
                                 <import>
                                    <stylesheet uri="func-compose-flist.xsl">
                                       <import>
                                          <stylesheet uri="func-apply.xsl"/>
                                       </import>
                                    </stylesheet>
                                 </import>
                              </stylesheet>
                           </import>
                           <import>
                              <stylesheet uri="../f/func-curry.xsl">
                                 <import>
                                    <stylesheet uri="../f/func-type.xsl"/>
                                 </import>
                              </stylesheet>
                           </import>
                        </stylesheet>
                     </import>
                  </stylesheet>
               </import>
            </stylesheet>
         </import>
      </stylesheet>
   </import>
   <import>
      <stylesheet uri="func-standardAxisXpathFunctions.xsl">
         <import>
            <stylesheet uri="func-curry.xsl">
               <import>
                  <stylesheet uri="../f/func-type.xsl">
                     <import>
                        <stylesheet uri="../f/func-XpathConstructors.xsl">
                           <import>
                              <stylesheet uri="func-compose-flist.xsl">
                                 <import>
                                    <stylesheet uri="func-apply.xsl"/>
                                 </import>
                              </stylesheet>
                           </import>
                        </stylesheet>
                     </import>
                     <import>
                        <stylesheet uri="../f/func-curry.xsl">
                           <import>
                              <stylesheet uri="../f/func-type.xsl"/>
                           </import>
                        </stylesheet>
                     </import>
                  </stylesheet>
               </import>
            </stylesheet>
         </import>
         <import>
            <stylesheet uri="func-compose-flist.xsl">
               <import>
                  <stylesheet uri="func-apply.xsl"/>
               </import>
            </stylesheet>
         </import>
      </stylesheet>
   </import>
</stylesheet> 
```

# asp.net - 如何在rdlc中动态设置外部图像的高度和宽度？

> ID：13126710
> 
> 赞同：1
> 
> 时间：2012-10-29T17:31:04.470
> 
> 标签：asp.net, vb.net, rdlc

我正在使用 Visual Studio 2008，我创建了一个 rdlc 报告，其中我在标题部分有一个图像。我想动态设置该图像的高度和宽度，因为它们经常变化，请帮助我动态设置图像的高度和宽度，或者如果有人可以告诉我如何将它们设置为自动则更好。建议我是否可以在报告参数的帮助下设置高度和宽度。

# entity-framework - .Net MVC 4 REST 无法发送对象

> ID：13126711
> 
> 赞同：0
> 
> 时间：2012-10-29T17:31:13.397
> 
> 标签：entity-framework, rest, asp.net-mvc-4, asp.net-web-api

我已经构建了一个 .Net Mvc 4 应用程序，现在我想用 REST 扩展它。

我正在使用实体框架，但遇到以下问题。

我的目标是建立一个系统，其中类别具有多个产品，并且产品可以属于多个类别。

如下：

```
public class Categorie
{
    [Key]
    public int Id { get; set; }
    [Required]
    public string Naam { get; set; }
    [Required]
    public string Omschrijving { get; set; }
    public byte[] Plaatje { get; set; }
    private List<Product> producten;
    public virtual List<Product> Producten
    {
        get { return producten; }   
        set { producten = value; }
    }
}

public class Product
    {
        [Key]
        public int Id { get; set; }
        [Required]
        public string Naam { get; set; }
        [Required]
        public string Omschrijving { get; set; }
        [Required]
        public double Prijs { get; set; }
        private List<Categorie> categorien = new List<Categorie>();

        public virtual List<Categorie> Categorien
        {
            get { return categorien; }
            set { categorien = value; }
        }
        [Required]
        public byte[] Plaatje { get; set; }
    } 
```

注意：那里有虚拟属性，以便我的实体框架创建一个合并表。通常它将所有类别链接到产品，反之亦然。

我的休息看起来像：

```
// GET api/Rest/5
    public Product GetProduct(int id)
    {
        Product product = db.Producten.Find(id);
        Product newProduct = new Product();
        if (product == null)
        {
            throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.NotFound));
        }
        else
        {
            product.Categorien = null;
        }
        newProduct.Id = product.Id;
        newProduct.Naam = product.Naam;
        newProduct.Omschrijving = product.Omschrijving;
        newProduct.Plaatje = product.Plaatje;
        newProduct.Prijs = product.Prijs;
        newProduct.Categorien = product.Categorien;
        return newProduct;
    } 
```

第一个问题：我不能发送任何产品，只要它有一个类别。我必须让它为空。第二个问题：由于第一个问题，我无法发送原始产品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:06:44.817

我假设您的问题在于序列化期间的循环引用，因为类别引用多个产品而产品引用多个类别。一种解决方案是使用[数据传输对象 (DTO)](http://en.wikipedia.org/wiki/Data_transfer_object)，而不是返回用于 EF 的直接实体。为了便于将您的实体映射到 DTO，我将使用[AutoMapper](https://github.com/AutoMapper/AutoMapper)。这本质上是您在 REST API 方法中创建 newProduct 实例时所做的事情，但 AutoMapper 将硬编码和苦差事从映射中解脱出来。您的产品 DTO 看起来非常相似，但它们没有虚拟导航属性或 EF 所需的属性。产品的 DTO 看起来像这样。

```
public class Categorie
{
    public int Id { get; set; }
    public string Naam { get; set; }
    public string Omschrijving { get; set; }
    public byte[] Plaatje { get; set; }
}

public class Product
{
    public int Id { get; set; }
    public string Naam { get; set; }
    public string Omschrijving { get; set; }
    public double Prijs { get; set; }
    public List<Categorie> categorien = new List<Categorie>();

    public List<Categorie> Categorien
    {
        get { return categorien; }
        set { categorien = value; }
    }
    public byte[] Plaatje { get; set; }
} 
```

请注意，类别的 DTO 不包含产品列表，因为在这种情况下您需要产品列表。如果您保持 DTO 的字段名称与您的实体相同，AutoMapper 将自动处理映射。我通常为 DTO 保留相同的类名，并通过使用不同的命名空间将它们与实体区分开来。您的 REST API 方法看起来像这样。

```
// GET api/Rest/5
public Product GetProduct(int id)
{
    Product product = db.Producten.Find(id);
    return Mapper.Map<Product, Dto.Product>(product);
} 
```

# java - 拆分字符串，使用两个可能的分隔符将元素放入 List

> ID：13126712
> 
> 赞同：1
> 
> 时间：2012-10-29T17:31:18.127
> 
> 标签：java, string, split, delimiter, splitter

我想将字符串拆分为两个可能的分隔符“/”或“//”上的列表。但更重要的是，分隔符也应该放在同一个列表中。我不能在 Guava 或 java.util.Scanner 中使用 Splitter。

```
Scanner s = new Scanner(str);
s.useDelimiter("//|/");
while (s.hasNext()) {
    System.out.println(s.delimiter());
    System.out.println(s.next());
} 
```

`s.delimiter()`返回`//|/`。我想得到`/`or `//`。

你知道任何其他可以做到这一点的图书馆吗？

我写了一些代码，它可以工作，但它不是很好的解决方案：

```
public static ArrayList<String> processString(String s) {
    ArrayList<String> stringList = new ArrayList<String>();
    String word = "";
    for (int i = 0; i < s.length(); i++) {
        if (s.charAt(i) == '/' && i < s.length() && s.charAt(i + 1) == '/') {
            if (!word.equals(""))
                stringList.add(word);
            stringList.add("//");
            word = "";
            i++;
        } else if (s.charAt(i) == '/') {
            if (!word.equals(""))
                stringList.add(word);
            stringList.add("/");
            word = "";
        }else{
            word = word + String.valueOf(s.charAt(i));
        }
    }
    stringList.add(word);
    return stringList;
} 
```

在`"some/string//with/slash/or//two"`返回列表中`some, /, string, //, with, /, slash, /, or, //, two`

在`"/some/string//with/slash/or//two"`返回列表中`/, some, /, string, //, with, /, slash, /, or, //, two`

在`"//some/string//with/slash/or//two"`返回列表中`//, some, /, string, //, with, /, slash, /, or, //, two`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T17:36:57.803

该`useDelimiter`方法有一个[签名](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#useDelimiter%28java.util.regex.Pattern%29)，它接受一个`Pattern`对象，而不是一个`String`.

你应该改用那个：

```
Scanner s = new Scanner(str);
s.useDelimiter(Pattern.compile("/{1,2}"));
while (s.hasNext()) {
    System.out.println(s.delimiter());
    System.out.println(s.next());
} 
```

为了捕获分隔符，您将需要更改方法。

```
Pattern p = new Pattern("(/{0,2})([^/]+)");
Matcher m = p.matcher(str);
while(m.find()) {
   String token     = m.group(2);
   String delimiter = m.group(1); // (preceding delimiter. may be null)
   /*
    * ...
    */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:37:00.610

这似乎是使用正则表达式的好选择。您可以[在此处阅读有关 Java 正则表达式的](http://docs.oracle.com/javase/tutorial/essential/regex/)更多信息。

# sql - 如何将 SQL Server 2012 数据库复制到 localdb 实例？

> ID：13126726
> 
> 赞同：23
> 
> 时间：2012-10-29T17:32:08.500
> 
> 标签：sql, sql-server, sql-server-2012, localdb

我希望将 SQL Server 2012 Standard 数据库复制到我的 localdb 实例。我已经尝试过抱怨 localdb 不是*SQL Server 2005 或更高版本的快速实例*的向导。我也做了备份/恢复，但在我的 localdb 中恢复时，我收到以下错误...

运行这个...

```
RESTORE DATABASE CSODev
FROM DISK = 'C:\MyBckDir\CSODev.bak'
WITH MOVE 'CSOdev_Data' TO 'C:\Users\cblair\CSOdev_Data.mdf',
MOVE 'CSOdev_Log' TO 'C:\Users\cblair\CSOdev_Log.ldf',
REPLACE 
```

我得到的错误信息...

> 为数据库“CSODev”、文件 1 上的文件“CSOdev_Data”处理了 8752 页。为数据库“CSODev”、文件 1 上的文件“CSOdev_Log”
> 处理了 5 页。
> 
> *消息 1853，级别 16，状态 1，行 1*
> 找不到逻辑数据库文件“CSOdev_Log”。指定文件的完整路径。
> *消息 3167，级别 16，状态 1，第 1 行*
> RESTORE 无法启动数据库“CSODev”。
> *消息 3013，级别 16，状态 1，第 1 行*
> RESTORE DATABASE 异常终止。

数据库最终处于“恢复挂起”模式。日志文件似乎有问题。我尝试了 2 种不同的备份，以防其中一种刚刚损坏。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-04-27T01:45:54.983

localDB存在[已知的限制](http://connect.microsoft.com/SQLServer/feedback/details/789845/localdb-cannot-restore-a-backup-whose-original-data-and-log-files-are-in-different-folders#)（实际上是一个真正的错误）。只要您的数据库文件位于不同的文件夹中，它就会使任何带有 MOVE 的 RESTORE 失败。

您必须在原始文件夹中恢复（无 MOVE）。如果您需要伪造驱动器：/路径，请使用 cmd 工具，例如 SUBST。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-13T17:36:47.560

我有同样的问题。最终起作用的是：

1.  尝试恢复数据库（在 OP 中出现错误）
2.  分离数据库
3.  重新附加数据库

最后一步发生的事情是 SSDT 执行了数据文件的升级，显然是旧格式。完成后，数据库开始工作，没有任何问题！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-11T18:11:38.193

我遇到了同样的问题，在做了一些在线研究后，我发现了一种巧妙的方法来让它工作（虽然很老套）。基本上，你：

1.  创建一个 SqlLocalDb 实例 ( `SqlLocalDb c tmp -s`)。
2.  像上面那样恢复数据库（例如，`SqlCmd -E -S <localdb connection string> -Q "RESTORE DATABASE ..."`）。
3.  停止 SqlLocalDb 实例 ( `SqlLocalDb p tmp`)。
4.  删除 SqlLocalDb 实例 ( `SqlLocalDb d tmp`)。
5.  创建一个新的 SqlLocalDb 实例 ( `SqlLocalDb c persistent -s`)。
6.  通过附加新实例在新实例中创建数据库（`SqlCmd -E -S <persistent connection string> -Q "Create Database <dbname> On (Filename = '<Mdf file location'), (Filename = '<Ldf Filename'>) For Attach"`.

并希望它应该工作。有关原始想法，请参见[此处](http://piecesoeight.blogspot.com/2013/04/problem-restoring-database-to-sql.html)。

**编辑：**添加了[Jason Brady](https://stackoverflow.com/users/873576/jason-brady)对 create 命令的更正。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-04T15:48:13.280

尝试将您的数据库脚本化为模式和数据，然后在本地运行脚本。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-08T06:11:57.430

```
RESTORE FILELISTONLY
FROM DISK = 'D:\SQLBackups\yourdatabase.BAK'

ALTER DATABASE yourdatabasename
SET SINGLE_USER WITH
ROLLBACK IMMEDIATE

RESTORE DATABASE yourdatabasename
FROM DISK = 'D:\SQLBackups\yourdatabase.BAK'
with replace,
move 'logical name from file stream' to
'C:\yourdatabase.mdf',
move 'logical name from file stream' to 'C:\Yourdatabase.ldf'
ALTER DATABASE Qatar_DB SET MULTI_USER 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-04-27T16:32:10.630

同样的问题，谢谢帮助。我的本地数据库是 MS SQL 2014。打开“SQL Server 2014 Management Studio”

1.  右键单击数据库，转到“任务”，单击“脱机”
2.  分离数据库
3.  附加数据库

它对我有用。备份数据库后，您可以恢复数据库而不会出错。谢谢。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-25T11:07:21.283

我有同样的问题。尝试以管理员身份运行 Visual Studio 并尝试以下命令

```
RESTORE DATABASE CSODev
FROM DISK = 'C:\MyBckDir\CSODev.bak'
WITH NORECOVERY, MOVE 'CSOdev_Data' TO 'C:\Users\cblair\CSOdev_Data.mdf',
MOVE 'CSOdev_Log' TO 'C:\Users\cblair\CSOdev_Log.ldf', 
```

**更新：**这并不完全有效！

尽管上述语句没有产生任何错误并且成功完成，但数据库仍处于“PENDING RECOVERY”状态，无法以任何方式访问。当我尝试“RESTORE WITH RECOVER”以使数据库联机时，我遇到了与上述问题相同的错误。

因此，在我的情况下，我最终将备份恢复到使用 MSSQL 2008 R2 运行的 DEV 服务器，然后选择：任务 -> 生成脚本 -> 选择要编写脚本的对象并下一步 -> 单击“高级”按钮 -> 选择“脚本的数据类型”：架构和数据。现在针对本地数据库运行生成的脚本。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-02-15T11:47:07.760

试试这些脚本（以我个人测试的 Adventureworks2012 为例）：

```
RESTORE FILELISTONLY
FROM DISK = 'c:\temp\adv2012.bak' 
```

这将显示文件名：

```
AdventureWorks2012      C:\Program Files\Microsoft SQL Server\MSSQL11.MSSQL2012RTM\MSSQL\DATA\AdventureWorks2012.mdf
AdventureWorks2012_log  C:\Program Files\Microsoft SQL Server\MSSQL11.MSSQL2012RTM\MSSQL\DATA\AdventureWorks2012_log.ldf 
```

使用这些文件名来构造您的最终脚本，如下所示：

```
RESTORE DATABASE AdventureWorks2012
FROM DISK = 'C:\temp\adv2012.bak'

WITH MOVE 'AdventureWorks2012' TO 'C:\cnom_WS\Local-Databases\AdventureWorks\AdventureWorks2012.mdf',
MOVE 'AdventureWorks2012_log' TO 'C:\cnom_WS\Local-Databases\AdventureWorks\AdventureWorks2012_log.ldf',
REPLACE; 
```

顺便说一句，我通过 Visual Studio（SQL Server 对象资源管理器）运行这些，但我强烈怀疑这可以很容易地在 SSMS 上运行；-)

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2013-11-13T19:54:52.980

1.  您可以手动完成。这可以通过使用 dot net 并打开两种连接并将数据从其中一种转发到另一种来完成。但这需要在本地创建相同类型的列。
2.  您可以检查 MS Access 2007 的导入选项

# python - Python 3 中的 super() 是如何实现的？

> ID：13126727
> 
> 赞同：16
> 
> 时间：2012-10-29T17:32:15.567
> 
> 标签：python, python-3.x, metaprogramming, super, python-internals

我想知道 Python 3 中的新 super 是如何实现的。

这个问题是在我做了一个小例子之后出现在我脑海中的，我得到了一个奇怪的错误。我正在使用[Pyutilib 组件架构 (PCA)](https://software.sandia.gov/trac/pyutilib/wiki/Documentation/PyUtilibOverview)，并且我已经制作了我的自定义元类来驱动另一个类的创建：

```
from pyutilib.component.core import implements, SingletonPlugin, PluginMeta, Interface

class IPass(Interface):
    pass

class __MetaPlugin(PluginMeta):
    def __new__(cls, name, baseClasses, classdict):
        print(cls, name, baseClasses, classdict)
        if baseClasses:
            baseClasses += (SingletonPlugin,)
        return PluginMeta.__new__(cls, name, baseClasses, classdict)

class Pass(metaclass=__MetaPlugin):
    implements(IPass)

    def __init__(self, inputs=[], outputs=[]):
        self.inputs = []
        self.outputs = []

class A(Pass):
    def __init__(self):
        print(self.__class__) # <class '__main__.A'>
        print(self.__class__.__class__) # <class '__main__.__MetaPlugin'>
        print(PluginMeta.__class__) # <class 'type'>
        super().__init__() # SystemError: super(): empty __class__ cell
        #Pass.__init__(self) - this works

a = A() 
```

我收到以下错误：

```
super().__init__() SystemError: super(): empty __class__ cell 
```

我想知道 super() 到底是做什么的，它会在`super().__init__()`、`self.__class__`、`self.__class__.__class__`和全部`PluginMeta.__class__`存在时引发错误。另外“旧方式” -`Pass.__init__(self)`正在工作。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-02-19T11:52:44.283

**TL;DR**：当元类在完成其and`"empty __class__ cell"`之前尝试调用已定义类中的方法（或实例化它）并且被调用的方法使用 . 如果在类主体外部定义的函数中写入调用，并尝试将此方法添加到现有类并使用它，也会发生错误。（**更新**：此行为已在 Python 3.6 中修复）`__new__``__init__``super``super()`

 **Python 3 super 隐式引用了一个“魔术” `__class__`[*] 名称，该名称在每个类方法的命名空间中充当单元变量。

这个变量是在类创建机制*结束*时自动创建的 - 即，只要 Python 中有一个类主体，元类的`__new__`和`__init__`运行 - 当`__init__`完成时，`__class__` 单元格被填充并可供类的方法使用。

这里发生了什么，很可能（我没有查看所有代码）在`PluginMeta`初始化代码中，`__init__`在元类结束之前调用类的`__init__`- 因为这个元类的一个要点是处理单例 - 什么是可能发生的是元类机制`__instance__`在从元类返回之前实例化单个实例并填充`__init__`。super 使用的隐式`__class__`此时不存在。

因此，通过硬编码名称引用超类，就像在 Python2 之前必须做`super`的那样 - 并且是实现您想要的最佳方式。

`*`- 这不是`self.__class__`实例的属性，它是`__class__`方法中实际可用的变量：

```
class A:
   def a(self):
      print ("Instance's class: {}, "
             "actual class where this line is coded: {}".format(
                 self.__class__, __class__))

class B(A):
   pass 
```

运行这个我们有：

```
>>> B().a()
Instance's class: <class '__main__.B'>, actual class where this line is coded: <class '__main__.A'>
>>> 
```

从 Python 数据模型：

> `__class__`是编译器创建的隐式闭包引用，如果类主体中的任何方法引用`__class__`或`super`。这允许零参数形式`super()`根据词法范围正确识别正在定义的类，而用于进行当前调用的类或实例是根据传递给方法的第一个参数来识别的。

有关详细信息，请查看[PEP 3135](https://www.python.org/dev/peps/pep-3135/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-29T19:58:14.747

如何`super()`实施？这是python3.3的代码：

```
/* Cooperative 'super' */

typedef struct {
    PyObject_HEAD
    PyTypeObject *type;
    PyObject *obj;
    PyTypeObject *obj_type;
} superobject;

static PyMemberDef super_members[] = {
    {"__thisclass__", T_OBJECT, offsetof(superobject, type), READONLY,
     "the class invoking super()"},
    {"__self__",  T_OBJECT, offsetof(superobject, obj), READONLY,
     "the instance invoking super(); may be None"},
    {"__self_class__", T_OBJECT, offsetof(superobject, obj_type), READONLY,
     "the type of the instance invoking super(); may be None"},
    {0}
};

static void
super_dealloc(PyObject *self)
{
    superobject *su = (superobject *)self;

    _PyObject_GC_UNTRACK(self);
    Py_XDECREF(su->obj);
    Py_XDECREF(su->type);
    Py_XDECREF(su->obj_type);
    Py_TYPE(self)->tp_free(self);
}

static PyObject *
super_repr(PyObject *self)
{
    superobject *su = (superobject *)self;

    if (su->obj_type)
        return PyUnicode_FromFormat(
            "<super: <class '%s'>, <%s object>>",
            su->type ? su->type->tp_name : "NULL",
            su->obj_type->tp_name);
    else
        return PyUnicode_FromFormat(
            "<super: <class '%s'>, NULL>",
            su->type ? su->type->tp_name : "NULL");
}

static PyObject *
super_getattro(PyObject *self, PyObject *name)
{
    superobject *su = (superobject *)self;
    int skip = su->obj_type == NULL;

    if (!skip) {
        /* We want __class__ to return the class of the super object
           (i.e. super, or a subclass), not the class of su->obj. */
        skip = (PyUnicode_Check(name) &&
            PyUnicode_GET_LENGTH(name) == 9 &&
            PyUnicode_CompareWithASCIIString(name, "__class__") == 0);
    }

    if (!skip) {
        PyObject *mro, *res, *tmp, *dict;
        PyTypeObject *starttype;
        descrgetfunc f;
        Py_ssize_t i, n;

        starttype = su->obj_type;
        mro = starttype->tp_mro;

        if (mro == NULL)
            n = 0;
        else {
            assert(PyTuple_Check(mro));
            n = PyTuple_GET_SIZE(mro);
        }
        for (i = 0; i < n; i++) {
            if ((PyObject *)(su->type) == PyTuple_GET_ITEM(mro, i))
                break;
        }
        i++;
        res = NULL;
        /* keep a strong reference to mro because starttype->tp_mro can be
           replaced during PyDict_GetItem(dict, name)  */
        Py_INCREF(mro);
        for (; i < n; i++) {
            tmp = PyTuple_GET_ITEM(mro, i);
            if (PyType_Check(tmp))
                dict = ((PyTypeObject *)tmp)->tp_dict;
            else
                continue;
            res = PyDict_GetItem(dict, name);
            if (res != NULL) {
                Py_INCREF(res);
                f = Py_TYPE(res)->tp_descr_get;
                if (f != NULL) {
                    tmp = f(res,
                        /* Only pass 'obj' param if
                           this is instance-mode super
                           (See SF ID #743627)
                        */
                        (su->obj == (PyObject *)
                                    su->obj_type
                            ? (PyObject *)NULL
                            : su->obj),
                        (PyObject *)starttype);
                    Py_DECREF(res);
                    res = tmp;
                }
                Py_DECREF(mro);
                return res;
            }
        }
        Py_DECREF(mro);
    }
    return PyObject_GenericGetAttr(self, name);
}

static PyTypeObject *
supercheck(PyTypeObject *type, PyObject *obj)
{
    /* Check that a super() call makes sense.  Return a type object.

       obj can be a class, or an instance of one:

       - If it is a class, it must be a subclass of 'type'.      This case is
         used for class methods; the return value is obj.

       - If it is an instance, it must be an instance of 'type'.  This is
         the normal case; the return value is obj.__class__.

       But... when obj is an instance, we want to allow for the case where
       Py_TYPE(obj) is not a subclass of type, but obj.__class__ is!
       This will allow using super() with a proxy for obj.
    */

    /* Check for first bullet above (special case) */
    if (PyType_Check(obj) && PyType_IsSubtype((PyTypeObject *)obj, type)) {
        Py_INCREF(obj);
        return (PyTypeObject *)obj;
    }

    /* Normal case */
    if (PyType_IsSubtype(Py_TYPE(obj), type)) {
        Py_INCREF(Py_TYPE(obj));
        return Py_TYPE(obj);
    }
    else {
        /* Try the slow way */
        PyObject *class_attr;

        class_attr = _PyObject_GetAttrId(obj, &PyId___class__);
        if (class_attr != NULL &&
            PyType_Check(class_attr) &&
            (PyTypeObject *)class_attr != Py_TYPE(obj))
        {
            int ok = PyType_IsSubtype(
                (PyTypeObject *)class_attr, type);
            if (ok)
                return (PyTypeObject *)class_attr;
        }

        if (class_attr == NULL)
            PyErr_Clear();
        else
            Py_DECREF(class_attr);
    }

    PyErr_SetString(PyExc_TypeError,
                    "super(type, obj): "
                    "obj must be an instance or subtype of type");
    return NULL;
}

static PyObject *
super_descr_get(PyObject *self, PyObject *obj, PyObject *type)
{
    superobject *su = (superobject *)self;
    superobject *newobj;

    if (obj == NULL || obj == Py_None || su->obj != NULL) {
        /* Not binding to an object, or already bound */
        Py_INCREF(self);
        return self;
    }
    if (Py_TYPE(su) != &PySuper_Type)
        /* If su is an instance of a (strict) subclass of super,
           call its type */
        return PyObject_CallFunctionObjArgs((PyObject *)Py_TYPE(su),
                                            su->type, obj, NULL);
    else {
        /* Inline the common case */
        PyTypeObject *obj_type = supercheck(su->type, obj);
        if (obj_type == NULL)
            return NULL;
        newobj = (superobject *)PySuper_Type.tp_new(&PySuper_Type,
                                                 NULL, NULL);
        if (newobj == NULL)
            return NULL;
        Py_INCREF(su->type);
        Py_INCREF(obj);
        newobj->type = su->type;
        newobj->obj = obj;
        newobj->obj_type = obj_type;
        return (PyObject *)newobj;
    }
}

static int
super_init(PyObject *self, PyObject *args, PyObject *kwds)
{
    superobject *su = (superobject *)self;
    PyTypeObject *type = NULL;
    PyObject *obj = NULL;
    PyTypeObject *obj_type = NULL;

    if (!_PyArg_NoKeywords("super", kwds))
        return -1;
    if (!PyArg_ParseTuple(args, "|O!O:super", &PyType_Type, &type, &obj))
        return -1;

    if (type == NULL) {
        /* Call super(), without args -- fill in from __class__
           and first local variable on the stack. */
        PyFrameObject *f = PyThreadState_GET()->frame;
        PyCodeObject *co = f->f_code;
        Py_ssize_t i, n;
        if (co == NULL) {
            PyErr_SetString(PyExc_SystemError,
                            "super(): no code object");
            return -1;
        }
        if (co->co_argcount == 0) {
            PyErr_SetString(PyExc_SystemError,
                            "super(): no arguments");
            return -1;
        }
        obj = f->f_localsplus[0];
        if (obj == NULL) {
            PyErr_SetString(PyExc_SystemError,
                            "super(): arg[0] deleted");
            return -1;
        }
        if (co->co_freevars == NULL)
            n = 0;
        else {
            assert(PyTuple_Check(co->co_freevars));
            n = PyTuple_GET_SIZE(co->co_freevars);
        }
        for (i = 0; i < n; i++) {
            PyObject *name = PyTuple_GET_ITEM(co->co_freevars, i);
            assert(PyUnicode_Check(name));
            if (!PyUnicode_CompareWithASCIIString(name,
                                                  "__class__")) {
                Py_ssize_t index = co->co_nlocals +
                    PyTuple_GET_SIZE(co->co_cellvars) + i;
                PyObject *cell = f->f_localsplus[index];
                if (cell == NULL || !PyCell_Check(cell)) {
                    PyErr_SetString(PyExc_SystemError,
                      "super(): bad __class__ cell");
                    return -1;
                }
                type = (PyTypeObject *) PyCell_GET(cell);
                if (type == NULL) {
                    PyErr_SetString(PyExc_SystemError,
                      "super(): empty __class__ cell");
                    return -1;
                }
                if (!PyType_Check(type)) {
                    PyErr_Format(PyExc_SystemError,
                      "super(): __class__ is not a type (%s)",
                      Py_TYPE(type)->tp_name);
                    return -1;
                }
                break;
            }
        }
        if (type == NULL) {
            PyErr_SetString(PyExc_SystemError,
                            "super(): __class__ cell not found");
            return -1;
        }
    }

    if (obj == Py_None)
        obj = NULL;
    if (obj != NULL) {
        obj_type = supercheck(type, obj);
        if (obj_type == NULL)
            return -1;
        Py_INCREF(obj);
    }
    Py_INCREF(type);
    su->type = type;
    su->obj = obj;
    su->obj_type = obj_type;
    return 0;
}

PyDoc_STRVAR(super_doc,
"super() -> same as super(__class__, <first argument>)\n"
"super(type) -> unbound super object\n"
"super(type, obj) -> bound super object; requires isinstance(obj, type)\n"
"super(type, type2) -> bound super object; requires issubclass(type2, type)\n"
"Typical use to call a cooperative superclass method:\n"
"class C(B):\n"
"    def meth(self, arg):\n"
"        super().meth(arg)\n"
"This works for class methods too:\n"
"class C(B):\n"
"    @classmethod\n"
"    def cmeth(cls, arg):\n"
"        super().cmeth(arg)\n");

static int
super_traverse(PyObject *self, visitproc visit, void *arg)
{
    superobject *su = (superobject *)self;

    Py_VISIT(su->obj);
    Py_VISIT(su->type);
    Py_VISIT(su->obj_type);

    return 0;
}

PyTypeObject PySuper_Type = {
    PyVarObject_HEAD_INIT(&PyType_Type, 0)
    "super",                                    /* tp_name */
    sizeof(superobject),                        /* tp_basicsize */
    0,                                          /* tp_itemsize */
    /* methods */
    super_dealloc,                              /* tp_dealloc */
    0,                                          /* tp_print */
    0,                                          /* tp_getattr */
    0,                                          /* tp_setattr */
    0,                                          /* tp_reserved */
    super_repr,                                 /* tp_repr */
    0,                                          /* tp_as_number */
    0,                                          /* tp_as_sequence */
    0,                                          /* tp_as_mapping */
    0,                                          /* tp_hash */
    0,                                          /* tp_call */
    0,                                          /* tp_str */
    super_getattro,                             /* tp_getattro */
    0,                                          /* tp_setattro */
    0,                                          /* tp_as_buffer */
    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_HAVE_GC |
        Py_TPFLAGS_BASETYPE,                    /* tp_flags */
    super_doc,                                  /* tp_doc */
    super_traverse,                             /* tp_traverse */
    0,                                          /* tp_clear */
    0,                                          /* tp_richcompare */
    0,                                          /* tp_weaklistoffset */
    0,                                          /* tp_iter */
    0,                                          /* tp_iternext */
    0,                                          /* tp_methods */
    super_members,                              /* tp_members */
    0,                                          /* tp_getset */
    0,                                          /* tp_base */
    0,                                          /* tp_dict */
    super_descr_get,                            /* tp_descr_get */
    0,                                          /* tp_descr_set */
    0,                                          /* tp_dictoffset */
    super_init,                                 /* tp_init */
    PyType_GenericAlloc,                        /* tp_alloc */
    PyType_GenericNew,                          /* tp_new */
    PyObject_GC_Del,                            /* tp_free */
}; 
```

您可以`super_init`在某些时候看到检查`type == NULL`，然后它会引发您看到的错误。周围有 s 是不正常`NULL`的，因此可能在某处存在错误`super`（并注意`super`在以前的版本中已经存在错误）。至少我认为`SystemError`引发的情况应该仅由于解释器或其他一些 C 代码的“内部”故障而不是 python 代码而触发。

此外，这不仅发生在您身上，您还可以找到将这种行为视为错误的[帖子。](http://pgfoundry.org/pipermail/python-general/2009-October/000601.html)**

# ios - AVFoundation 人脸检测可以定位眼睛和嘴巴的位置吗？

> ID：13126728
> 
> 赞同：5
> 
> 时间：2012-10-29T17:32:16.347
> 
> 标签：ios, avfoundation, face-detection

使用 CoreImage 人脸检测时，我得到具有眼睛和嘴巴位置属性的 CIFaceFeature 对象。当使用 AVFoundation 和 AVMetadataObjectTypeFace 作为元数据对象类型时，我得到具有偏航角和滚动角属性的 AVMetadataFaceObject。

使用 AVFoundation 时有办法获取眼睛和嘴巴的位置吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T17:31:21.163

AVFoundation 人脸检测不会返回嘴巴和眼睛的位置。然而，嘴巴和眼睛相对于边界框的位置变化不大。例如，我发现眼睛几乎总是位于：

*   (0.3*faceWidth, 0.3*faceHeight)
*   (0.7*faceWidth, 0.3*faceHeight)

我敢肯定嘴巴也是如此。

# java - 转换为 byte[] 和 String.getBytes

> ID：13126734
> 
> 赞同：2
> 
> 时间：2012-10-29T17:32:34.553
> 
> 标签：java

作为练习的一部分，我必须编写一个远程类加载器。它从服务器下载一个类，然后使用defineClass 加载它。

我所做的是这样的：

```
in=new ObjectInputStream(s.getInputStream());
Object o = in.readObject();
return defineClass(className,o.toString().getBytes(), 0, o.toString().length()); 
```

我得到了一个`java.lang.ClassFormatError: Incompatible magic value`

但是当我写这个

```
in=new ObjectInputStream(s.getInputStream());
byte[] classData=(byte[])in.readObject();
return defineClass(className,classData, 0, classData.length); 
```

它按预期工作。

这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T17:34:57.803

`Object.toString()`string 返回你`human readable form of Object`所以如果你调用`toString`object`array`那么它会返回你`default toString`。

默认 toString 实现是

```
public String toString() {
return getClass().getName() + "@" + Integer.toHexString(hashCode());
} 
```

你可以清楚地看到这不是你想要的。

您可以使用[`String`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#String%28byte%5b%5d,%20java.nio.charset.Charset%29)带有`Charset`或默认字符集的构造函数来转换`byte[]`为字符串

```
byte[] utf8Bytes = original.getBytes("UTF8");
String roundTrip = new String(utf8Bytes, "UTF8"); 
```

* * *

参考：

*   [字节编码和字符串](http://docs.oracle.com/javase/tutorial/i18n/text/string.html)
*   [字符串 JavaDoc](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#String%28byte%5b%5d,%20java.nio.charset.Charset%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:37:57.280

我的解释是发生这种情况是因为`objectinputstream`java 中的 an 是一种`byteinputstream`. 因此，您可以使用第二种解决方案。`toString()`由于对象的实现，第一个不起作用。

# php - 从 MYSQL DB 填充的动态 SELECT TAG

> ID：13126736
> 
> 赞同：0
> 
> 时间：2012-10-29T17:32:35.967
> 
> 标签：php, html, mysql

我有问题。我需要制作动态 SELECT 标记，其中 OPTIONS 是从 mySQL DB 动态填充的。我有这个代码，但它不起作用。因此，如果您有一些更正或想法如何以其他方式制作，我将非常感谢 :) 非常感谢！

```
<SELECT>
<?php
 $con = mysql_connect("localhost", "root", "123456");
mysql_select_db("aplikace",$con);
$result = ("SELECT * kod FROM protokoly".
"ORDER BY kod");
$rs = mysql_query($result);
$nr = mysql_num_rows($rs);
for ($i=0; $i<$nr; $i++) {
    $r = mysql_fetch_array($rs);
    echo "<OPTION VALUE=\"".$r["kod"]."\">".$r["kod"]."</OPTION>";
}
?>
</SELECT> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:38:20.363

正如@Michael Berkowski 在评论中所建议的那样，`protokoly`和之间目前没有空格`ORDER BY`。这将导致 MySQL 错误，但您看不到导致难以排除故障的错误。

如果发生错误，您可以修改代码以输出错误，如下所示：

```
$rs = mysql_query($result) or die('Error during query: ' . mysql_error()); 
```

如果`mysql_query()`失败，[`die()`](http://php.net/manual/en/function.die.php)调用`mysql_error()`将输出最近 MySQL 错误的内容，帮助您发现问题。

**编辑：**

为了说明`die()`我已经编辑了您的代码的用法，如下所示：

```
<?php
// Place at top of file
error_reporting(E_ALL);
ini_set('display_errors', '1');
?>

<SELECT>
<?php
$con = mysql_connect("localhost", "root", "123456") or die('Connection failed: ' . mysql_error());
mysql_select_db("aplikace", $con) or die('Cannot select database: ' . mysql_error());
$result = ("SELECT * kod FROM protokoly ORDER BY kod");
$rs = mysql_query($result) or die('Query failed: ' . mysql_error());
$nr = mysql_num_rows($rs) or die('Failed to get num_rows: ' . mysql_error());
for ($i = 0; $i < $nr; $i++)
{
    $r = mysql_fetch_array($rs);
    echo "<OPTION VALUE=\"{$r['kod']}\">{$r['kod']}</OPTION>";
}
?>
</SELECT> 
```

请注意，使用`mysql_...()`函数的语句包含`mysql_error()`在内部`die()`，以便输出任何 MySQL 错误。我还在 echo 语句的双引号字符串中将数组引用括在括号中，以简化它并消除多重连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T23:10:47.730

```
<SELECT>
<?php

//added error checking.
if (!($con = mysql_connect("localhost", "root", "123456")))
{
    die("Could not connect to database server. " . mysql_errno() . " => " . mysql_error());
}

//added error checking.
if (!mysql_select_db("aplikace",$con))
{
    die("Could not select database. " . mysql_errno() . " => " . mysql_error());
}

//removed *, pushed ORDER BY onto same line
$sql = "SELECT kod FROM protokoly ORDER BY kod";

//added error checking. added connection parameter
if (!($rs = mysql_query($sql,$con)))
{
    die("Could not execute query. " . mysql_errno() . " => " . mysql_error());
}

//added condition
if (($nr = mysql_num_rows($rs)) == 0)
{
    die("No options to give!");
}

//changed to while loop that checks result of function return
while ($r = mysql_fetch_array($rs))
{
    //changed " to ' to get rid of \"
    echo '<OPTION VALUE="' . $r["kod"] . '">' . $r["kod"] . '</OPTION>';
}
?>
</SELECT> 
```

# haskell - 调试我的 State Monad 时，根据跟踪的位置颠倒顺序

> ID：13126741
> 
> 赞同：4
> 
> 时间：2012-10-29T17:33:15.490
> 
> 标签：haskell

所以我正在构建一个 State Monad，并遇到了一些问题，因为它的懒惰特性让我很难调试。

我的 State monad 通过获取一个值列表来运行，将它们一个一个地推送到状态的一部分，然后我分析每个值之后状态上的值以产生状态的另一部分。

我想出了这个简单的例子来说明为什么它很难调试。

```
module Main where

import Control.Monad.State
import Debug.Trace

runSim :: [Int] -> State String String
runSim [] = return =<< get
runSim (cur:xs) = do
    lst <- get
    let val =  (show $ 2*cur)
    put $ trace ((show $ length lst) ++ " " ++ (show cur)) ((val) ++ "," ++ lst)
    runSim xs

main :: IO ()
main = print $ evalState (runSim [1..10]) "" 
```

这个的输出是：

```
0 1
2 2
4 3
6 4
8 5
11 6
14 7
17 8
20 9
23 10
"20,18,16,14,12,10,8,6,4,2," 
```

但是，如果我将跟踪线更改为：

```
put $ trace ((show cur)) ((val) ++ "," ++ lst) 
```

输出反转：

```
10
9
8
7
6
5
4
3
2
1
"20,18,16,14,12,10,8,6,4,2," 
```

但最终的结果是一样的。有没有更好的方法来处理状态单子在调试中的懒惰，所以它更自然地顺序？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T19:26:57.307

问题是`trace`调用只在最后进行评估。

计算建立了类似的状态（为简洁起见，仅列出两个元素）

```
runSim [1, 2] "" ~> ( (), state1@(trace (output 1 "") (logString 1 "")))
~> runSim [2] ( (), trace (output 2 state1) (logString2 state1)) 
```

所以在最终状态下，`trace`最后推送的列表元素是最外层的。

现在在第二种情况下，

```
output i _ = show i 
```

跟踪输出不依赖于之前发生的事情，所以`trace`最后推送的先运行等等。

但在第一种情况下，

```
output i state = show (length state) ++ " " ++ show i 
```

跟踪输出取决于状态，因此必须在打印跟踪输出之前评估状态。但是`state`是对先前 push 的调用`trace`，因此 trace 需要首先运行，等等。因此，tracing 输出中的数据依赖关系确保 trace 以 push 的顺序运行。

为了确保在没有数据依赖的情况下以该顺序运行跟踪，您必须将`trace`调用拉出`put`，或强制评估`put`状态，

```
put $! trace ((show $ length lst) ++ " " ++ (show cur)) ((val) ++ "," ++ lst) 
```

或者

```
trace ((show $ length lst) ++ " " ++ (show cur)) $ put ((val) ++ "," ++ lst) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:51:47.003

1.  这是一个单子定律`m >>= return === m`。因此，您可以`return =<<`离开`runSim []`。
2.  您的最终结果是错误的，因为您将当前值添加到状态，但您想要的是附加。更改`((val) ++ "," ++ lst)`为`(lst ++ "," ++ val)`，您的输出就是您所期望的：`",2,4,6,8,10,12,14,16,18,20"`. （稍后您可以担心前导逗号。）
3.  state monad 用于读取和写入状态。在您的情况下，您要做的就是编写，这就是`Writer`monad 的用途：

    ```
    import Control.Monad.Writer
    import Data.List (intercalate)

    main = putStrLn . intercalate ", " . map show $ execWriter (runSim [1..10])

    runSim :: [Int] -> Writer [Int] ()
    runSim [] = return ()
    runSim (x:xs) = tell [2*x] >> runSim xs

    ==> "2, 4, 6, 8, 10, 12, 14, 16, 18, 20" 
    ```

    （请注意，`Writer []`当书面清单变得更长时，这可能会非常无效。`DList`如果您正在写很多东西，请使用。）

4.  一般说明：因为 Haskell 主要由组合良好的小函数组成，所以通常很容易推断出单个函数的作用。您`runSim`获取当前状态并计算列表头的两倍。之后，它会做一些跟踪工作，然后`val ++ "," ++ lst`作为新状态放回原处，然后作为最后一步进行递归。Haskell 的伟大之处在于，这是这个函数唯一能做的事情：获取状态、乘法、放置状态。如果您了解其中的一个迭代，您将了解所有迭代。我的意思是-即使在您的情况下，这不是懒惰的问题-懒惰不会影响您的程序的结果（实际上不会，除非您可能有底）。没关系`trace`给你一个中间步骤，如果 GHC 决定先用偶数向后遍历列表，然后再用奇数向前遍历，结果仍然是相同的。`trace`然而包含邪恶的魔法，所以它可能会令人困惑。我将`trace`更多地用作查看程序内部的手提钻方式，而不是推理它是如何做的。

# windows - Visual Studio 2012 上的内核模式调试

> ID：13126747
> 
> 赞同：0
> 
> 时间：2012-10-29T17:33:46.613
> 
> 标签：windows, visual-studio, debugging, credential-providers

我在 Visual Studio 2012 中的远程调试有问题

我的目标是在 vmware 播放器中运行的 Windows 7 上测试凭据提供程序。我已经安装了它，添加了注册更改，它工作正常。

我已阅读本教程：

[http://msmvps.com/blogs/alunj/archive/2011/02/21/1788561.aspx](http://msmvps.com/blogs/alunj/archive/2011/02/21/1788561.aspx) http://social.msdn.microsoft.com/Forums/nl-BE/wdk/thread/b34c45df-b724-429d -aa11-e315fd987280

我在 vmware 中创建了管道，并尝试执行与此视频中相同的操作：

[http://msdn.microsoft.com/en-us/library/windows/hardware/jj149675.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/jj149675.aspx)

但在我的视觉工作室中，传输组合框中没有 Windows 内核模式调试器。

（我只有默认和远程没有认证）

有人知道我在哪里做错了吗？

在此先感谢，我希望有人会帮助:)

附言

我有 Visual Studio Ultimate 2012，没有第 3 方调试软件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T23:33:42.440

实际上使用 VS2012 有比内核调试器更好的调试凭据提供程序的方法 - 您可以将 MSVS 远程调试工具（可以在 MSVS 2012 安装 ISO 中找到）安装到您的 VM。使用“调试->附加到进程”菜单中的“默认传输”附加（限定符 - 输入 VM 的 IP 地址）。在可用进程中选择 LogonUI.exe 进程，您就可以开始了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:54:42.597

这篇文章对我非常有帮助：

[http://msdn.microsoft.com/en-us/library/windows/hardware/hh698272%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/hh698272%28v=vs.85%29.aspx)

非常仔细地按照说明进行操作。我的 VS 2012 也没有“驱动程序”菜单，直到我安装了最新的 WDK-8。安装之后，我的 VS 2012 有一个驱动程序菜单，按照上面链接的文章中的说明进行操作，我得到了一些工作。我希望这有帮助！

# php - PHP：使用 Plupload 上传后将 URL 放入数据库（Amazon S3，Plupload）

> ID：13126750
> 
> 赞同：2
> 
> 时间：2012-10-29T17:33:53.073
> 
> 标签：php, url, upload, amazon-s3, plupload

最后，我的代码用于将图像上传到我的 Amazon S3 存储桶并为它们提供唯一的文件名。但现在我不知道如何将上传图像的 URL 放入 MySQL 数据库。谁能帮我？

* * *

在这里我将放置我的不同文件的代码，因为我发现很多人在使用 Plupload 将图像上传到他们的 Amazon S3 存储桶时遇到问题。

**crossdomain.xml** 放置在 Amazon S3 存储桶的根目录中。

```
<?xml version=”1.0″?>
<!DOCTYPE cross-domain-policy SYSTEM “http://www.macromedia.com/xml/dtds/cross-domain-policy.dtd”&gt;
<cross-domain-policy>
<allow-access-from domain=”*”/>
</cross-domain-policy> 
```

**photos.php** 上传照片

```
<?php 
/* 
In order to upload files to S3 using Flash runtime, one should start by placing crossdomain.xml into the bucket.

In our tests SilverLight didn't require anything special and worked with this configuration just fine. It may fail back
to the same crossdomain.xml as last resort.

!!!Important!!! Plupload UI Widget here, is used only for demo purposes and is not required for uploading to S3.
*/

// important variables that will be used throughout this example
$bucket = 'BUCKET';

// these can be found on your Account page, under Security Credentials > Access Keys
$accessKeyId = 'KEY';
$secret = 'SECRET';

// hash_hmac — Generate a keyed hash value using the HMAC method 
// (PHP 5 >= 5.1.2, PECL hash >= 1.1)
if (!function_exists('hash_hmac')) :
// based on: http://www.php.net/manual/en/function.sha1.php#39492
function hash_hmac($algo, $data, $key, $raw_output = false)
{
    $blocksize = 64;
    if (strlen($key) > $blocksize)
        $key = pack('H*', $algo($key));

    $key = str_pad($key, $blocksize, chr(0x00));
    $ipad = str_repeat(chr(0x36), $blocksize);
    $opad = str_repeat(chr(0x5c), $blocksize);
    $hmac = pack('H*', $algo(($key^$opad) . pack('H*', $algo(($key^$ipad) . $data))));

    return $raw_output ? $hmac : bin2hex($hmac);
}
endif;

// prepare policy
$policy = base64_encode(json_encode(array(
    // ISO 8601 - date('c'); generates uncompatible date, so better do it manually
    'expiration' => date('Y-m-d\TH:i:s.000\Z', strtotime('+1 day')),  
    'conditions' => array(
        array('bucket' => $bucket),
        array('acl' => 'public-read'),
        array('starts-with', '$key', ''),
        // for demo purposes we are accepting only images
        array('starts-with', '$Content-Type', 'image/'),
        // "Some versions of the Adobe Flash Player do not properly handle HTTP responses that have an empty body. 
        // To configure POST to return a response that does not have an empty body, set success_action_status to 201.
        // When set, Amazon S3 returns an XML document with a 201 status code." 
        // http://docs.amazonwebservices.com/AmazonS3/latest/dev/HTTPPOSTFlash.html
        array('success_action_status' => '201'),
        // Plupload internally adds name field, so we need to mention it here
        array('starts-with', '$name', ''),  
        // One more field to take into account: Filename - gets silently sent by FileReference.upload() in Flash
        // http://docs.amazonwebservices.com/AmazonS3/latest/dev/HTTPPOSTFlash.html
        array('starts-with', '$filename', ''), 
    )
)));

// sign policy
$signature = base64_encode(hash_hmac('sha1', $policy, $secret, true));

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<BASE HREF="http://www.yourwebsite.com/">
<title>Plupload to Amazon S3 Example</title>

<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/themes/base/jquery-ui.css" type="text/css" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript"></script>
<script src=" https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.min.js"></script>

<!-- Load plupload and all it's runtimes and finally the UI widget -->
<link rel="stylesheet" href="_assets/js/jquery.ui.plupload/css/jquery.ui.plupload.css" type="text/css" />

<script type="text/javascript" src="_assets/js/plupload.js"></script>
<script type="text/javascript" src="_assets/js/plupload.gears.js"></script>
<script type="text/javascript" src="_assets/js/plupload.silverlight.js"></script>
<script type="text/javascript" src="_assets/js/plupload.flash.js"></script>
<script type="text/javascript" src="_assets/js/plupload.browserplus.js"></script>
<script type="text/javascript" src="_assets/js/plupload.html4.js"></script>
<script type="text/javascript" src="_assets/js/plupload.html5.js"></script>
<script type="text/javascript" src="_assets/js/jquery.ui.plupload/jquery.ui.plupload.js"></script>
<!--<script type="text/javascript" src="http://getfirebug.com/releases/lite/1.2/firebug-lite-compressed.js"></script>-->

</head>
<body>

<h1>Plupload to Amazon S3 Example</h1>

<div id="uploader">
    <p>You browser doesn't have Flash, Silverlight, Gears, BrowserPlus or HTML5 support.</p>
</div>

<script type="text/javascript">
// Convert divs to queue widgets when the DOM is ready
$(function() {
    $("#uploader").plupload({
        runtimes : 'flash,silverlight',
        url : 'http://s3.amazonaws.com/<?php echo $bucket; ?>/',
        max_file_size : '10mb',

        multipart: true,
        multipart_params: {
            'key': 'photos/<?php echo time(); ?>.jpg', // use filename as a key
            'Filename': '${filename}', // adding this to keep consistency across the runtimes
            'acl': 'public-read',
            'Content-Type': 'image/jpeg',
            'success_action_status': '201',
            'AWSAccessKeyId' : '<?php echo $accessKeyId; ?>',       
            'policy': '<?php echo $policy; ?>',
            'signature': '<?php echo $signature; ?>'
        },

        // !!!Important!!! 
        // this is not recommended with S3, since it will force Flash runtime into the mode, with no progress indication
        resize : {width : 100, height : 100, quality : 60},  // Resize images on clientside, if possible 

        // optional, but better be specified directly
        file_data_name: 'file',

        // re-use widget (not related to S3, but to Plupload UI Widget)
        multiple_queues: true,

        // Specify what files to browse for
        filters : [
            {title : "JPEG files", extensions : "jpg"}
        ],

        // Flash settings
        flash_swf_url : '_assets/js/plupload.flash.swf',

        // Silverlight settings
        silverlight_xap_url : '_assets/js/plupload.silverlight.xap'
    });
});
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-25T00:30:16.040

您需要做的就是使用 Plupload FileUploaded 回调：

```
init : {

            // FileUploaded is called when a file has been uploaded, and contains all info about the file
        FileUploaded: function(up, file, info) {
        // add an ajax call here to store the data in db

    },

}, 
```

我不知道你的经验是什么水平，所以我再详细说明一下：

ajax 调用可能是这样的：

```
$.post( "test.php", { file: file} ); 
```

这会将文件数据发布到 php 页面 (test.php)，您可以在其中将数据插入数据库

# android - 如何通过触摸聆听绘制多个圆圈？

> ID：13126752
> 
> 赞同：1
> 
> 时间：2012-10-29T17:33:55.403
> 
> 标签：android, graphics, touch

我试图让用户使用触摸在我的图像视图上绘制多个圆圈。到目前为止，我一次只画了一张。我知道我必须在调用 invalidate() 后存储接触点并重绘每个圆圈，但还没有想出办法来做到这一点。

这是我的代码，如果有人能指出我必须添加/更改的内容或就如何实现此提供任何建议，我将不胜感激：

```
public class ImageView1 extends ImageView {

public int x;
public int y;

ImageView1 img = (ImageView1) findViewById (R.id.imageView1);

    public ImageView1(Context context, AttributeSet attrs) {
       super(context, attrs); 
       setFocusable(true);

    } 

    public boolean onTouchEvent(MotionEvent event){

       x = (int) event.getX();
       y = (int) event.getY();

    return true;
    }

    @Override   
    public void onDraw(Canvas canvas){
       super.onDraw(canvas);
       Paint p = new Paint();

   p.setAntiAlias(true);
   p.setColor(Color.RED);
   p.setStyle(Paint.Style.STROKE); 
   p.setStrokeWidth(1);

   canvas.drawCircle(x, y, 20, p);
       invalidate();
}

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:43:48.393

我通常`SparseArray`以指针 ID 作为键来收集指针位置信息；

```
private SparseArray<PointF> mPointers = new SparseArray<PointF>();

@Override
public boolean onTouchEvent(MotionEvent me) {
    switch (me.getActionMasked()) {
    case MotionEvent.ACTION_DOWN:
    case MotionEvent.ACTION_POINTER_DOWN: {
        int ai = me.getActionIndex();
        PointF pt = new PointF(me.getX(ai), me.getY(ai));
        mPointers.put(me.getPointerId(ai), pt);
        return true;
    }
    case MotionEvent.ACTION_UP:
    case MotionEvent.ACTION_POINTER_UP: {
        int pid = me.getPointerId(me.getActionIndex());
        mPointers.remove(pid);
        return true;
    }
    case MotionEvent.ACTION_MOVE: {
        for (int i = 0; i < me.getPointerCount(); ++i) {
            PointF pt = mPointers.get(me.getPointerId(i));
            pt.set(me.getX(i), me.getY(i));
        }
        return true;
    }
    }
    return false;
} 
```

然后，为了渲染单独的接触点，您可以迭代`mPointers`值。

# ruby-on-rails - Rails，为任意控制器、动作和零个或多个参数构造 url

> ID：13126753
> 
> 赞同：1
> 
> 时间：2012-10-29T17:33:57.167
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

这是我目前的工作流程：

```
c = get_some_controller # => "fruits" or nil
a = get_some_action # => "list"
p = get_some_params # => { :type => :orange, :price => 10 }

url = url_for(:controller => c, :action => a) # no option for params ?? 
```

所以，这是我的问题，`url_for`似乎没有任何选项可以传递参数。

我想这个用例很常见，但是由于某种原因，rails 不支持它或者我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:51:11.530

您只需将参数作为附加键传递：

`url_for(p.merge(:controller => c, :action => a))`

或者更清楚地说，您也可以这样做：

`url_for(:controller => c, :action => a, :type => :orange, :price => 10)`

# css - jquery ui 菜单的 zorder

> ID：13126755
> 
> 赞同：-1
> 
> 时间：2012-10-29T17:34:05.940
> 
> 标签：css, jquery-ui

我使用 jquery ui 来显示菜单。在这个网页上，有一些图像，菜单显示在图像后面。

我已经尝试过：

```
.ui-menu { z-index: 9999999; } 
```

或者

```
#menu { z-index: 9999999; } 
```

但它不起作用

当我使用 chrome 的开发者扩展时，我在图像上添加了 z-index 样式，它也不起作用？

当您进入萨尔茨堡的菜单然后测试时，您可以在[http://jsfiddle.net/fLHuR/1/](http://jsfiddle.net/fLHuR/1/)上看到问题

有人知道如何修改这种行为吗？（注：我没有时间更改整个网站）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:46:11.760

评论`z-index:3`为`#contenu` **或**使其为`z-index:0`

```
#contenu {
    position:absolute;
    left:280px;
    top:105px;
    width:519px;
    height:2012px;
    /*z-index:3;*/
} 
```

并添加

```
#menu { z-index: 9999999; } 
```

请参阅**[现场演示](http://jsfiddle.net/SivaCharan/fLHuR/3/)**

# c++ - C++ 中错误的输出顺序

> ID：13126756
> 
> 赞同：1
> 
> 时间：2012-10-29T17:34:19.430
> 
> 标签：c++

我正在编写一个 deamonizing 程序。它工作正常，但不会在提到的文件中产生任何输出。我为去魔化编写的程序是否正确？另外，这个程序以相反的顺序产生输出。有人能解释为什么吗？

输出：

```
Closing File descriptors
Child Created.Exiting Parent 
```

程序 ：

```
int main(void)
{

    pid_t pid, sid;
    int i=0;
    pid = fork();
    if (pid < 0) {
            exit(EXIT_FAILURE);
    }
    if (pid > 0)
    {
            cout<<"Child Created.Exiting Parent\n";
            exit(EXIT_SUCCESS);
    }
    umask(0);
    sid = setsid();
    if (sid < 0)
    {
            exit(EXIT_FAILURE);
    }
    if ((chdir("/home/csgrad/suryakum/checking")) < 0)
    {
          cout<<"Directory not changed\n";
          exit(EXIT_FAILURE);
    }
    cout<<"Closing File descriptors\n";
    close(STDIN_FILENO);
    close(STDOUT_FILENO);
    close(STDERR_FILENO);
    while (1)
    {
            i++;
            ofstream outputFile("program3data.txt");
            outputFile<< "Run "<<i<<"\n";
            sleep(30); /* wait 30 seconds */
    }
    exit(EXIT_SUCCESS);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:45:50.913

您在这里缺少的文件处理中的一项基本内容是，每当我们打开一个流以写入文件时，我们都必须关闭该流。写入文件后添加以下行。

```
outputFile.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:36:57.553

的声明`ofstream outputFile("program3data.txt");`应该发生在`while`.

> 此外，该程序以相反的顺序产生输出。

顺序是不确定的，`fork()`在并行发生之后执行。

# javascript - 龙卷风框架不会将数据从服务器推送到客户端

> ID：13126758
> 
> 赞同：0
> 
> 时间：2012-10-29T17:34:21.747
> 
> 标签：javascript, python, tornado, long-polling, tweepy

我试图修改 Ted Roden 的“构建实时用户体验”中的一个示例，以将实时 Twitter 数据发送到服务器推送的客户端。

我的应用程序有一个类，它通过 tweepy 调用 Twitter 流 API，并通过用户在浏览器中输入的关键字过滤结果。其目的是为了根据过滤结果将 twitter 流发送回客户端。

我一直遇到的问题是我无法向客户端显示实时数据，将来我想修改它以便我可以实时向客户端发送任何类型的数据。

我对此很陌生，我真的很挣扎......因为我认为对示例代码进行一些更改会奏效。这是我的代码：

执行器模块：

```
import tornado.httpserver
import tornado.ioloop
import tornado.options
import tornado.web
from tornado.options import define, options
import os.path, logging
from Tweeter import StreamerRt
import Queue
import threading
import simplejson as json
import uuid

queue = Queue.Queue(0)

define("port", default=8000, help='run on the given port', type=int)

class IndexHandler(tornado.web.RequestHandler):
    def get(self):
        self.render('templates/index.html')

class Tweet(object):
    waiters = []
    cache = []
    cache_size = 200
    def wait_for_messages(self, callback, cursor=None):
        cls = Tweet
        if cursor:
            index = 0
            for i in xrange(len(cls.cache)):
                index = len(cls.cache) - i - 1
                if cls.cache[index]["id"] == cursor: break
            recent = cls.cache[index + 1:]
            logging.info("%r recent tweets", len(recent))
            if recent:
                    callback(recent)
                    return
        cls.waiters.append(callback)

    def new_tweets(self, messages):
        cls = Tweet
        for callback in cls.waiters:
            try:
                callback(messages)
            except:
                logging.error("Error in waiter callback", exc_info=True)
        cls.waiters = []
        cls.cache.extend(messages)
        if len(cls.cache) > self.cache_size:
            cls.cache = cls.cache[-self.cache_size:]

class TweetsEventsHandler(tornado.web.RequestHandler, Tweet):
    @tornado.web.asynchronous
    def post(self):
        cursor = self.get_argument("cursor", None)
        self.wait_for_messages(self.async_callback(self.on_new_tweets),
                           cursor=cursor)
        self.render('templates/results.html')

    def on_new_tweets(self, tweets): 
        if not self.request.connection.stream.closed():
            self.finish(dict(tweets=tweets))

class TweetExtractor(threading.Thread):
    def run(self):

        while True:
            tweet = queue.get()
            if tweet:

                try:
                    message = {
                        "id": str(uuid.uuid4()),
                        "tweet": tweet
                        }
                    message["html"] = "<div class=\"message\" id=\"m" + message["id"] +     "\"><strong>" + ['author']['author_id'] + ": </strong>" + ['source'] + "</div>"
                    Tweet().new_tweets([message])

                except Exception, e:
                    pass

class TweetFinder(threading.Thread):
    def run(self):
        results = StreamerRt().filter(track=[self.get_argument('event')])        
        for tweets in results:
            if len(tweets)>2:
                queue.put(tweets)

local_static_path = os.path.join(os.path.dirname(__file__), "static") 

app = tornado.web.Application([
            (r"/", IndexHandler),
            (r"/results", TweetsEventsHandler),
    ],
    static_path=local_static_path)    

if __name__ == "__main__":
    print 'Listening on http://localhost:8000'
    tornado.options.parse_command_line()

    # setup the twitter threads
    threads = []
    threads.append(TweetExtractor())
    threads.append(TweetFinder())

    # for each thread, set daemon mode to true and start them up
    for t in threads:
        t.daemon = True
        t.start()

    http_server=tornado.httpserver.HTTPServer(app)
    http_server.listen(options.port) 
    tornado.ioloop.IOLoop.instance().start() 
```

js文件是这样的：

```
// -*- indent-tabs-mode: nil -*-
google.load("jquery", "1");

google.setOnLoadCallback(
    function() {
        $(document).ready(function() { T.init(); T.poll(); });
    }
);

var T = {
    cursor: false,
    types: ['hashtags', 'retweets', 'ats', 'links']
};

T.init = function() {
    $('input[type=checkbox]').click(T.click);
};

T.click = function(ev) {
    if(ev.target.id == 'all') {
        for(i in T.types)
            $('#' + T.types[i]).attr('checked', $('#all').attr('checked'));
        }
        else
            $('#all').attr('checked', false);
};

T.poll = function () {
    var args = {};
    if(T.cursor) args.cursor = T.cursor;
    $.ajax({
               url: "/results.html",
               type: "POST",
               dataType: "json",
               data: $.param(args),
               success: T.new_tweets
           });
};

T.new_tweets = function(response) {
    if(!T.cursor)
         $('#waiting').remove();

    T.cursor = response.tweets[response.tweets.length - 1].id;

    for(var i = 0; i < response.tweets.length; ++i) {
        if(T.should_show_tweet(response.tweets[i])) {
            var html = response.tweets[i].html;
            var regexp = /(http\:\/\/[^\ |\<]+)/g;
            if((result = regexp.exec(html))) {
                console.log(result);
                for (var n = 1; n < result.length; ++n)
                    html = html.replace(result[n], '<a target=blank href="' + result[n]       + '">' + result[n] + '</a>');

            }

            var d = $(html);
            d.css('display', 'none');
            $('#content').prepend(d);
            d.slideDown();
        }
    }

    // clean up the DOM
    var limit = 100;
    var messages = $('.message');
    for(var x = messages.length-1; x > limit; --x)
        $(messages[x]).remove();

    T.poll();
};

T.should_show_tweet = function(tweet) {
    show_tweet = false;

    $('#all-count').text(parseInt($('#all-count').text())+1);

     for(x in T.types) {
        var type = T.types[x];

        // does the tweet have the specified type?
        if(tweet.stats[type].length) {
            var count_div = $('#' + type + '-count');
            count_div.text(parseInt(count_div.text())+1);

            // does the user want to see it?
            if($("#" + type).attr('checked'))
                show_tweet = true;
        }
    }
    return show_tweet;
};

T.click = function(ev) {
    if(ev.target.id == 'all') {
        for(i in T.types)
            $('#' + T.types[i]).attr('checked', $('#all').attr('checked'));
    }
    else
        $('#all').attr('checked', false);
}; 
```

我是 js 的新手。

谢谢

# php - 迭代具有私有属性的对象

> ID：13126759
> 
> 赞同：4
> 
> 时间：2012-10-29T17:34:24.990
> 
> 标签：php, phpactiverecord

我正在使用带有 php 活动记录的 PHP。当我从数据库中检索记录时，属性被列为私有。我需要遍历属性并检索 key => value 对。如何才能做到这一点？

```
$row = \Models\Locations::find(2);

Models\Locations Object
(
    [errors] => 
    [attributes:ActiveRecord\Model:private] => Array
        (
            [id] => 2
            [customer_id] => 6
            [name] => test location
            [address_line1] => 123 test Drive
            [address_line2] => 
            [city] => Moon Township
            [state] => AZ
            [zip] => 12345
            [country] => USA
            [primary_phone_number] => 123.456.7890
            [latitude] => 0
            [longitude] => 0
            [coordinate_precision] => 
        )

    [__dirty:ActiveRecord\Model:private] => Array
        (
        )

    [__readonly:ActiveRecord\Model:private] => 
    [__relationships:ActiveRecord\Model:private] => Array
        (
        )

    [__new_record:ActiveRecord\Model:private] => 
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T23:41:34.167

只需使用模型的方法[属性](http://www.phpactiverecord.org/docs/ActiveRecord/Model#methodattributes)： `$row->attributes()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T17:41:57.673

如果你想遍历所有内容，那么你需要实现[`Iterator`](http://www.php.net/manual/en/class.iterator.php)接口。

```
class ModelExtended extends Model implements Iterator
{
   // implement the Iterator interface within - then extend this class instead of Model 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T18:39:40.830

你不能，除非你有一个公共的可访问的 getter 函数，它允许你获取数组。

# css - Why do some Google Fonts displayed incorrectly in Italic style

> ID：13126763
> 
> 赞同：7
> 
> 时间：2012-10-29T17:34:30.590
> 
> 标签：css, webfonts, google-webfonts

I'm experiecing a weird issue with some Google Fonts.

For example, I'm using the Muli font and in some browsers the text is displayed in italic style when the CSS rule is:

```
p {
    font-style: normal;
} 
```

I've also opened the [Google Web Fonts website](http://www.google.com/webfonts) with several browsers (I tested with 16 different browsers on 6 different PCs and Macs) and only with two of them I experienced the problem (one on a Chrome browser and another one on a Firefox browser).

[This screenshot](http://img402.imageshack.us/img402/1286/senzatitolo1loa.jpg) shows a side-by-side comparison of the font displayed in Firefox and a browser that shows the font in italic style

Why would only some browsers display these fonts as italic? What should I look for in tracking down this issue?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T20:56:51.787

Speculatory! If you are testing on 2 different computers, with the same browser and browser version, your difference in fonts is probably coming from the OS. With Googles API when a call to Firefox or Chrome is made the **local** attribute is used, calling the OS's version of that font if it is available. In which the font being called or given by the OS could be an italic version instead of a normal.

My suggestion would be to download the font and manually import yourself, without using the local attribute.

When you import the Google font API the follows happens:

A request for Inconsolata from Firefox, for example, returns the following CSS:

```
@font-face {
  font-family: 'Inconsolata';
  src: local('Inconsolata'), url('http://themes.googleusercontent.com/fonts/font?kit=J_eeEGgHN8Gk3Eud0dz8jw') format('truetype');
} 
```

A request from Internet Explorer, on the other hand, returns:

```
@font-face {
  font-family: 'Inconsolata';
  src: url('http://themes.googleusercontent.com/fonts/font?kit=J_eeEGgHN8Gk3Eud0dz8jw');
} 
```

[https://developers.google.com/webfonts/docs/technical_considerations](https://developers.google.com/webfonts/docs/technical_considerations)

# java - 配置 Spring Integration 聚合器以组合来自 RabbitMq 扇出交换的响应

> ID：13126764
> 
> 赞同：4
> 
> 时间：2012-10-29T17:34:30.873
> 
> 标签：java, rabbitmq, spring-integration, spring-amqp

我正在尝试使用 Spring Integration 配置以下内容：

1.  向频道发送消息。
2.  将此消息发布到与 n 个消费者的 rabbit fanout (pub/sub) 交换。
3.  每个消费者提供一个响应消息。
4.  在将这些响应返回给原始客户端之前，让 Spring Integration 聚合这些响应。

到目前为止，我有一些问题......

1.  我正在使用发布订阅通道来设置`apply-sequence="true"`属性，以便设置correlationId、sequenceSize 和sequenceNumber 属性。这些属性被`DefaultAmqpHeaderMapper`.`DEBUG headerName=[correlationId] WILL NOT be mapped`

2.  sequenceSize 属性仅设置为 1，即使在扇出交换中注册了 2 个队列。大概这意味着消息会过早地从聚合器中释放。我希望这是因为我误用了发布订阅频道以便使用`apply-sequence="true"`，而且说只有一个订阅者是非常正确的，`int-amqp:outbound-gateway`.

我的出站 Spring 配置如下：

```
<int:publish-subscribe-channel id="output" apply-sequence="true"/>

<int:channel id="reply">
    <int:interceptors>
        <int:wire-tap channel="logger"/>
    </int:interceptors>
</int:channel>

<int:aggregator input-channel="reply" method="combine">
    <bean class="example.SimpleAggregator"/>
</int:aggregator>

<int:logging-channel-adapter id="logger" level="INFO"/>

<int:gateway id="senderGateway" service-interface="example.SenderGateway" default-request-channel="output" default-reply-channel="reply"/>

<int-amqp:outbound-gateway request-channel="output"
                                   amqp-template="amqpTemplate" exchange-name="fanout-exchange"
                                   reply-channel="reply"/> 
```

我的 rabbitMQ 配置如下：

```
<rabbit:connection-factory id="connectionFactory" />

<rabbit:template id="amqpTemplate" connection-factory="connectionFactory" reply-timeout="-1" />

<rabbit:admin connection-factory="connectionFactory" />

<rabbit:queue name="a-queue"/>
<rabbit:queue name="b-queue"/>

<rabbit:fanout-exchange name="fanout-exchange">
    <rabbit:bindings>
        <rabbit:binding queue="a-queue" />
        <rabbit:binding queue="b-queue" />
    </rabbit:bindings>
</rabbit:fanout-exchange> 
```

消费者看起来像这样：

```
<int:channel id="input"/>

<int-amqp:inbound-gateway request-channel="input" queue-names="a-queue" connection-factory="connectionFactory" concurrent-consumers="1"/>

<bean id="listenerService" class="example.ListenerService"/>

<int:service-activator input-channel="input" ref="listenerService" method="receiveMessage"/> 
```

任何建议都会很棒，我怀疑我在某个地方弄错了棍子……

基于 Gary 评论的新出站 spring 配置：

```
<int:channel id="output"/>

<int:header-enricher input-channel="output" output-channel="output">
    <int:correlation-id expression="headers['id']" />
</int:header-enricher>

<int:gateway id="senderGateway" service-interface="example.SenderGateway" default-request-channel="output" default-reply-timeout="5000" default-reply-channel="reply" />

<int-amqp:outbound-gateway request-channel="output"
                                   amqp-template="amqpTemplate" exchange-name="fanout-exchange"
                                   reply-channel="reply"
                                   mapped-reply-headers="amqp*,correlationId" mapped-request-headers="amqp*,correlationId"/>

<int:channel id="reply"/>

<int:aggregator input-channel="reply" output-channel="reply" method="combine" release-strategy-expression="size() == 2">
    <bean class="example.SimpleAggregator"/>
</int:aggregator> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T19:24:43.000

问题是 SI 不知道扇出交换的拓扑结构。

解决此问题的最简单方法是使用自定义发布策略

```
release-strategy-expression="size() == 2" 
```

在聚合器上（假设扇出为 2）。因此，您不需要序列大小；您可以避免使用标题丰富器“滥用”发布/订阅频道...

```
 <int:header-enricher input-channel="foo" output-channel="bar">
        <int:correlation-id expression="T(java.util.UUID).randomUUID().toString()" />
    </int:header-enricher> 
```

您可以通过使用已经是唯一的消息 id 来避免创建新的 UUID...

```
<int:correlation-id expression="headers['id']" /> 
```

最后，您可以通过添加将correlationId 标头传递给AMQP

```
mapped-request-headers="correlationId" 
```

到您的 amqp 端点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-10-03T18:11:16.230

即使这个问题已经有 3 年了，我还是会回答它，因为我有同样的问题。

Spring Integration 有一个[Scatter-Gather](http://www.enterpriseintegrationpatterns.com/patterns/messaging/BroadcastAggregate.html)的实现，听起来很像你原来的问题。

这是[Spring文档中的相关部分](http://docs.spring.io/spring-integration/docs/4.3.2.RELEASE/reference/htmlsingle/#scatter-gather)

> 它是一个复合端点，其目标是向收件人发送消息并聚合结果......
> 
> 以前，可以使用分立元件来配置模式，这种增强带来了更方便的配置。
> 
> ScatterGatherHandler 是一个请求-回复端点，它结合了 PublishSubscribeChannel（或 RecipientListRouter）和 AggregatingMessageHandler。请求消息被发送到分散通道，ScatterGatherHandler 等待聚合器的回复发送到 outputChannel。

# objective-c - 从 xib 创建分组的 TableViewCell

> ID：13126767
> 
> 赞同：0
> 
> 时间：2012-10-29T17:34:41.207
> 
> 标签：objective-c, ios, xcode, interface-builder

我正在尝试使用界面生成器创建自定义 tableviewcell。问题是我似乎找不到使单元格成为分组单元格而不是普通普通单元格的设置。

当界面加载的内容（文本字段、标签等）超出分组单元格的边缘时，就会出现问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:16:29.360

通过转到界面构建器中的表格视图单元格并选择小页面图标（文件信息）并取消选中“使用自动布局”来删除新的约束功能

# android - Robolectric：findViewById 返回 null

> ID：13126769
> 
> 赞同：1
> 
> 时间：2012-10-29T17:34:44.790
> 
> 标签：android, robolectric, android-testing

我正在尝试用 Robolectric 做一个非常简单的测试，我想测试一个视图是否存在。这与 Robolectric 网站中的示例非常相似，但`findViewById`一直返回 null。

可能是什么问题？

这是活动：

```
public class SignInActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_sign_in);
    }
} 
```

这是测试：

```
@RunWith(RobolectricTestRunner.class)
public class SignInActivityTests {

    private SignInActivity mActivity;

    @Before
    public void setUp() throws Exception {
        mActivity = new SignInActivity();
        mActivity.onCreate(null);
    }

    @Test
    public void shouldHaveTheCorrectLogo() throws Exception {
        assertNotNull(mActivity.findViewById(R.id.signInLogo));
    }
} 
```

布局 XML 文件包含`ImageView`具有正确 id 和资源的，在模拟器中运行活动就可以了。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-30T08:46:50.190

我发现了问题，由于某种原因，新的活动向导使用 android1 标签而不是 android 创建了 XML。可能不是 Robolectric 想要的

# php - 从 php/ajax 中的 html 文本值获取值

> ID：13126773
> 
> 赞同：0
> 
> 时间：2012-10-29T17:34:57.930
> 
> 标签：php, mysql

我完全被困在这里，并在发布时发现了数十个示例以获取和设置值。我想做的是-

让用户在我的表单中的文本框中输入车辆年份模型

然后我需要将此值设置为可变状态

```
$vehicle_year = $_GET['vyear']; 
```

第一个错误在这里... vyear 是我的文本框的名称和 ID。没有提交表单等，因为我仍然在同一个表单/页面上。根据我下面的代码，我可以检查一个值是否不存在......如何取回实际输入的值？

```
$vehicle_year = isset($_POST['vehicleyear']) ? $_POST['vehicleyear'] : -1;                

            if ($vehicle_year == -1) {
            echo 'No Value Returned...';
                                //returns no value...
        } else {
                                //How to get the value and echo it out...
            echo $vehicle_year;
        } 
```

捕获此值后，我搜索我的数据库以返回所有附有年份（如返回）的制造商 -

```
$query = "SELECT * FROM `vehicledata` WHERE `year`='$vehicle_year'"; 
```

显然它不起作用，因为我仍然没有返回的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:06:33.960

您可以通过使用 print_r() 或 var_dump() 显示 $_POST 或 $_GET 的内容来检查是否有任何 POST/GET 提交数据，但就像 relentless 所说的那样，看起来您将这两者混合在一起了。

有关的：

*   不要使用 -1，但如果你想指示某些东西不可用，则使用 FALSE/NULL。如果您检查的值为 0，您可以使用**相同**的运算符 === 来确保不会得到误报。

*   不要将用户提交的值直接插入到您的查询中。如果您不先对它们进行清理，您的站点将容易受到[SQL 注入](http://en.wikipedia.org/wiki/Sql_injection)攻击。

# android - Android I2C 读/写速度

> ID：13126774
> 
> 赞同：2
> 
> 时间：2012-10-29T17:35:02.250
> 
> 标签：android, i2c

我一直在对通过 I2C 接口与设备通信的应用程序执行时序测量。我发现单个 I2C 读取和写入需要大约 450us 才能执行。我已验证 I2C 接口以 400KHz 运行，因此我预计单个字节上的 I2C 操作大约需要 170us。在 android 中使用 I2C 驱动程序是否会产生超过 250us 的开销？有谁知道提高这个速度的方法。

提前致谢。

马克。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:35:13.720

我猜你预期的延迟来自时间/位或类似的东西。但是，当您从具有操作系统（Android 或 Linux 或其他）的系统向 I2C 发送数据时，您必须经过所有层才能到达实际的 I2C。最有可能的是，这个驱动程序在内核中。由于它是一种硬件资源，因此还有某种形式的门控来防止几段代码同时使用 I2C。此外，有时对于某些设备，系统可能不会立即发送数据，但可能会推迟一点。不过，这可能不是你的情况。

此外，对于某些硬件设备，当您发送数据时，它不会通过常规的数据写入，而是通过其他方式发送，这对于大块可能更有效，但对于小块则更少，这会花费您开始时的一些延迟。I2C 上的音频流就是一个很好的例子。在系统中，它通常是一个数据缓冲区和一个 DMA 通道设置，以适当的速率将数据传输到 I2C 以获得您想要的音频。它对于音频流的目的非常有效，但只发送几个字节并不是很好。

所以，我对你的测量并不感到惊讶。

在我看来，如果你想改进它，你将不得不经历编写自己的驱动程序的痛苦。然后，您变得依赖于平台。如果它是一个定制系统，那很好，但如果它是一个必须在任何平板电脑上运行的消费者应用程序，那就不可行了。

# c++ - asio::read with timeout

> ID：13126776
> 
> 赞同：20
> 
> 时间：2012-10-29T17:35:09.780
> 
> 标签：c++, boost, timeout, serial-port, boost-asio

我需要知道如何在超时的情况下读取（同步或异步无关紧要）。我想检查设备是否与串行端口连接。

为此，我使用`asio::write`然后等待设备的响应。

如果设备连接`asio::read(serial, boost::asio::buffer(&r,1))`正常，但如果没有设备程序停止，这就是我需要超时的原因

我知道我需要 a`deadline_timer`但我不知道如何在`async_read`函数中使用它。

一个关于它如何工作的例子真的很有帮助。

我知道有很多类似的线程，我阅读了很多，但我找不到可以帮助我解决问题的解决方案！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-07-29T15:15:12.947

[Igor R. 发布](https://stackoverflow.com/a/13144834/487356)的代码没有为我编译。这是我改进的他的代码版本，效果很好。它使用 lambdas 来摆脱`set_result`辅助函数。

```
template <typename SyncReadStream, typename MutableBufferSequence>
void readWithTimeout(SyncReadStream& s, const MutableBufferSequence& buffers, const boost::asio::deadline_timer::duration_type& expiry_time)
{
    boost::optional<boost::system::error_code> timer_result;
    boost::asio::deadline_timer timer(s.get_io_service());
    timer.expires_from_now(expiry_time);
    timer.async_wait([&timer_result] (const boost::system::error_code& error) { timer_result.reset(error); });

    boost::optional<boost::system::error_code> read_result;
    boost::asio::async_read(s, buffers, [&read_result] (const boost::system::error_code& error, size_t) { read_result.reset(error); });

    s.get_io_service().reset();
    while (s.get_io_service().run_one())
    { 
        if (read_result)
            timer.cancel();
        else if (timer_result)
            s.cancel();
    }

    if (*read_result)
        throw boost::system::system_error(*read_result);
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-30T17:49:31.653

曾几何时，库作者提出了如下方式[来实现超时同步读取](http://lists.boost.org/Archives/boost/2007/04/120339.php)（本例涉及到`tcp::socket`，但可以改用串口）：

```
 void set_result(optional<error_code>* a, error_code b) 
  { 
    a->reset(b); 
  } 

  template <typename MutableBufferSequence> 
  void read_with_timeout(tcp::socket& sock, 
      const MutableBufferSequence& buffers) 
  { 
    optional<error_code> timer_result; 
    deadline_timer timer(sock.io_service()); 
    timer.expires_from_now(seconds(1)); 
    timer.async_wait(boost::bind(set_result, &timer_result, _1)); 

    optional<error_code> read_result; 
    async_read(sock, buffers, 
        boost::bind(set_result, &read_result, _1)); 

    sock.io_service().reset(); 
    while (sock.io_service().run_one()) 
    { 
      if (read_result) 
        timer.cancel(); 
      else if (timer_result) 
        sock.cancel(); 
    } 

    if (*read_result) 
      throw system_error(*read_result); 
  } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-30T16:36:42.523

你不使用`deadline_timer`in `async_read`。但是您可以启动两个异步进程：

1.  `async_read`串口上的一个进程。[boost::asio::serial_port](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/reference/serial_port.html)有一个[cancel](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/reference/basic_serial_port/cancel.html)方法可以取消所有异步操作。
2.  具有所需超时的截止时间计时器。在完成处理程序中，`deadline_timer`您可以`cancel`使用串行端口。这应该关闭`async_read`操作并调用其完成处理程序并出现错误。

代码：

```
#include <iostream>
#include <boost/asio.hpp>
#include <boost/bind.hpp>
#include <boost/date_time/posix_time/posix_time.hpp>
#include <boost/array.hpp>

class timed_connection
{
    public:
        timed_connection( int timeout ) :
            timer_( io_service_, boost::posix_time::seconds( timeout ) ),
            serial_port_( io_service_ )
        {
        }

        void start()
        {
              timer_.async_wait
                (
                 boost::bind
                 (
                  &timed_connection::stop, this
                 )
                );

            // Connect socket
            // Write to socket

            // async read from serial port
            boost::asio::async_read
                (
                 serial_port_, boost::asio::buffer( buffer_ ),
                 boost::bind
                 (
                  &timed_connection::handle_read, this,
                  boost::asio::placeholders::error
                 )
                );

            io_service_.run();
        }

    private:
        void stop()
        {  
            serial_port_.cancel();
        }

        void handle_read ( const boost::system::error_code& ec)
        {  
            if( ec )
            {  
                // handle error
            }
            else
            {  
                // do something
            }
        }

    private:
        boost::asio::io_service io_service_;
        boost::asio::deadline_timer timer_;
        boost::asio::serial_port serial_port_;
        boost::array< char, 8192 > buffer_;
};

int main()
{
    timed_connection conn( 5 );
    conn.start();

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T16:35:46.137

本身没有一个或*简单的答案，因为即使您进行异步读取，回调也永远不会被调用，并且您现在在某个地方有一个松散的线程。*

您认为这`deadline_timer`是可能的解决方案之一是正确的，但它需要一些摆弄和共享状态。有[阻塞 TCP 示例](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/example/timeouts/blocking_tcp_client.cpp)，但那是因为`async_connect`它在无事可做时返回，这是一件很酷的事情。`read`不会那样做，最坏的情况——它会因为无效资源而崩溃和烧毁。所以`deadline timer`事情是你的选择之一，但实际上有一个更简单的，有点像这样：

```
boost::thread *newthread = new boost::thread(boost::bind(&::try_read));
if (!newthread->timed_join(boost::posix_time::seconds(5))) {
    newthread->interrupt();
} 
```

基本上，在另一个线程中读取并在超时时将其关闭。您应该阅读[Boost.Threads](http://www.boost.org/doc/libs/1_51_0/doc/html/thread.html)。

如果中断它，请确保资源全部关闭。

# router - 在 WRT54gl v4.30.x 上安装番茄

> ID：13126777
> 
> 赞同：1
> 
> 时间：2012-10-29T17:35:15.353
> 
> 标签：router, firmware

基本上我想在我的路由器上安装番茄。我查看了该网站并注意到它说只使用具有 1.x 版本的 WRT54gl。目前我的路由器有 v4.x。为了安装番茄，我必须降级路由器然后切换固件，还是可以像现在这样安装番茄？有没有人有这样的经验。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:46:27.773

I think you are mistaken. Version on tomato site means your Linksys *hardware* version, not software, so you can't downgrade it. Here is a good link on how to determine hardware version of your Linksys router: [http://www.slideshare.net/techdude/how-to-identify-the-hardware-version-of-linksys-wrt54g-router](http://www.slideshare.net/techdude/how-to-identify-the-hardware-version-of-linksys-wrt54g-router)

# coldfusion - 将 MSSQL Express 2008 R2 移至新笔记本电脑（和 Coldfusion DSN）

> ID：13126778
> 
> 赞同：0
> 
> 时间：2012-10-29T17:35:15.560
> 
> 标签：coldfusion, sql-server-express

我的旧笔记本电脑要再见了，所以我需要将我的 sql 配置移到新笔记本电脑上。我也想移动用户帐户。我已经用谷歌搜索了这个主题，但我只找到了如何移动我已经完成的数据库，我现在需要获取用户帐户。任何帮助，将不胜感激。

Microsoft SQL Server 管理工作室 2008 R2 Coldfusion 9

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:35:41.800

如果你用 Google 搜索过，你应该从 Microsoft 看到这篇文章：

[如何在 SQL Server 实例之间传输登录名和密码](http://support.microsoft.com/kb/918992)

......以及无数其他人。

# c# - 将十进制数显示为其等效的二进制数

> ID：13126779
> 
> 赞同：2
> 
> 时间：2012-10-29T17:35:23.517
> 
> 标签：c#

我尝试使用以下代码显示数字的二进制等效项，但出现错误并且我没有得到错误背后的原因：

```
using System;

class NumToBin{
     static void main(){
        int num=7;
        for(int i=0;i<=32;i++){
            if(num &(1<<i)==1)// getting an error on this line
                Console.WriteLine("1");
            else
                Console.WriteLine("0");
        }
        Console.ReadKey(true);
    }
} 
```

上面的代码出现以下错误，我不知道这个错误背后的原因？

`Operator '&' cannot be applied to operands of type 'int' and 'bool' (CS0019)`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T17:36:25.257

错误是[运算符优先顺序的](http://msdn.microsoft.com/en-us/library/aa691323%28v=vs.71%29.aspx)结果，要修复它，您只需添加括号，更改：

```
if(num &(1<<i)==1) 
```

至

```
if((num & (1<<i)) == 1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T17:42:07.867

运算符优先级错误，试试`if ((num & (1<<i)) == 1)`

一个文件中**只有**32 位`int`。将 for 循环谓词更改为`i < 32`，而不是`i<=32`。

或者：

```
for(int i=0; i < 32; i++)
    Console.WriteLine((num & (1<<i)) == 0 ? "0" : "1"); 
```

**更新**

```
for(int i=31; 0 <= i; --i)
    Console.WriteLine(((num >> i) & 1) == 0 ? "0" : "1"); 
```

# tomcat - 由于 http/https 冲突，CAS 登录/重定向不起作用

> ID：13126780
> 
> 赞同：1
> 
> 时间：2012-10-29T17:35:23.617
> 
> 标签：tomcat, maven, https, cas

我有一个 CAS 服务器，大部分仍然是默认的，通过端口：8080 在 http 上运行，通过端口：8008 在 https 上运行

生产环境为CAS 3.4.11，tomcat 5，使用maven2部署

当有人登录时，我们尝试将 CAS 站点导航到类似`https://mydomain:8008/cas/services/manage.html`验证其登录的内容，它会将他们重定向到： `HTTP://mydomain:8008/cas/login`

Tomcat 配置为仅在端口 8008 上提供 https，从而导致毫无戒心的浏览器通过 http 接收加密字节流并将其作为下载提供给用户。

我是 CAS 新手，我知道配置中的某处是在重定向中使用 HTTPS 而不是 http 的选项，但我还没有找到它。

当你的回答，请，我厌倦了 CAS 文档网站和博客将 p:client-use-https="true" 作为他们的全部解释。我需要文件、节/小节、bean 和其他相关信息来实现最佳实践。

我还认识到，我以前从未使用过的 tomcat 可以配置为拒绝/将 http 请求重定向到选定端口上的 https。最好我想制定这两种解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T20:58:22.007

文件 tomcat/webapps/cas/WEB-INF/cas.properties 有一个 server.prefix，如果它由 http:// 处理，将强制 http 在所有 Location: 标题的开头。同样，使用 https 将强制它包含它。

Tomcat 具有连接器端口定义：

```
<!-- Define an AJP 1.3 Connector on port 8080 -->
<Connector port="8080"
           enableLookups="false" redirectPort="8443" protocol="AJP/1.3" /> 
```

redirectionPort 实际上意味着如果需要 HTTPS，请在此处发送，我必须更改它以匹配我在 8009 配置的 SSL 端口

# ruby-on-rails - Rails 生产模式：SSL 收到超过最大允许长度的记录

> ID：13126781
> 
> 赞同：5
> 
> 时间：2012-10-29T17:35:24.860
> 
> 标签：ruby-on-rails, webrick

嗨，我不确定这是否应该发生，但是当我`RAILS_ENV=production rails server`在终端中执行 a 然后尝试运行 localhost:3000 时，它给了我一个错误：

```
Secure Connection Failed

An error occurred during a connection to localhost:3000.

SSL received a record that exceeded the maximum permissible length.

(Error code: ssl_error_rx_record_too_long) 
```

我在某处读到可能是因为我的网址`https://localhost:3000/`不是`http://localhost:3000/`http 后面的“S”？但我无法更改它，因为它会自动转到 https。

这是正常的吗？我试图在生产中运行它的原因是因为当我尝试将我的应用程序部署到 heroku 时出现错误（这里提出的问题：[Rails + Heroku : ActionView::Template::Error](https://stackoverflow.com/questions/13126497/rails-heroku-actionviewtemplateerror)）所以我认为它会帮助我调试。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T06:33:26.343

在运行时尝试通过 SSL 访问 Rails 时，此错误是正常的`rails server`，除非您破解默认`rails server`脚本以支持 SSL。您可以查看[此博客文章](http://www.nearinfinity.com/blogs/chris_rohr/configuring_webrick_to_use_ssl.html)以了解如何执行此操作。也就是说，我建议您不要在本地计算机上通过 SSL 访问您的应用程序。

您的 Rails 应用程序中可能有一个配置，在您运行生产环境时重定向到 SSL。尝试暂时注释掉该配置，以便您可以在生产环境中运行，而无需在本地计算机上配置 SSL。

在 production.rb 中查找：

```
config.force_ssl = true 
```

或者，在 application_controller.rb（或任何其他控制器）中查找：

```
force_ssl 
```

注意：它们具有相同的名称，但在引擎盖下它们的工作方式非常不同。

或者，您可以通过其他 Web 服务器在本地计算机上运行 Rails `rails server`，但这超出了本问题的范围，您仍然需要对其进行配置以支持 SSL。就我个人而言，我在本地机器上安装了 nginx（带有独角兽），并带有自签名 SSL 证书，这样我就可以轻松地在我的应用程序中测试 SSL 相关的行为。

此外，除了在本地机器上的生产环境中运行应用程序之外，您还可以考虑使用其他方法来调试应用程序，但具体如何执行取决于您尝试调试的错误的性质。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-01T12:00:42.827

对我来说`config.force_ssl = true`是在**config/environments/production.rb**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-27T20:39:01.560

当我将我的机器添加`hostname`到`/etc/hosts`具有相同名称的 ipv4 和 ipv6 时，我发生了这个错误。

所以它看起来像：

```
127.0.0.1     localhost MyMachine
::1       ip6-localhost MyMachine 
```

更新 ipv6 个人机器名称以添加之前的`ip6-`Rails 开始工作。

# mediaelement.js - 没有控制 如果我使用 Adnroid 2.2.1 在我的 HTC 野火上访问http://mediaelementjs.com/ ，则不会显示音频播放器的控制。我唯一看到的是黑色区域。这是因为我的手机配置还是可以修复配置mediaelement.js？我真 问问题 问问题 2012-10-29T17:35:56.937 538 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 如果我使用 Adnroid 2.2.1 在我的 HTC 野火上访问http://mediaelementjs.com/ ，则不会显示音频播放器的控制。我唯一看到的是黑色区域。这是因为我的手机配置还是可以修复配置mediaelement.js？我真的很想知道。 我将网站上的 mp3 flashplayer 更改为 mediaelement.js，现在我在 Android 上离家更远了。 有谁能够帮助我？ 问候， 蒂门 Android 2.2 browser doesn't support this embedded player. Opera Mobile for Android does (sometimes), but a bug in Mediaelement.js prevents it from loading. I noticed that the Mediaelement.js main page wouldn't work in Android embedded (instead it should give a link that lets you download/view with relevant app). mediaelement.js 4 1 回答 1 This answer is useful 1 Android 2.2 浏览器不支持此嵌入式播放器。Opera Mobile for Android（有时）会这样做，但Mediaelement.js 中的一个错误会阻止它加载。我注意到 Mediaelement.js 主页不适用于嵌入式 Android（相反，它应该提供一个链接，让您可以下载/查看相关应用程序）。 于 2012-12-08T16:08:37.400 回答 Related 0 java - Android Paint() 默认值 1 c# - 使用 WPF .NET 3.5 构建智能感知应用程序 3 apache - 不带“/”的网站链接 1 python - Django objects.all() 方法以字符串格式返回我的列表（使用 sqlite） 1 java - Difficulty parsing rss feed for Android project 4 python - 打印列表只输出一个结果 0 c - 编写十六进制二进制修补程序 macOSX 3 c - Fill in an array from a single formatted keyboard line in C 1 jquery - 调用 .done 后 .getJSON 请求未准备好 1 r - How to loop over files in different directories Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13126789
> 
> 赞同：2
> 
> 时间：
> 
> 标签：mediaelement.js

如果我使用 Adnroid 2.2.1 在我的 HTC 野火上访问[http://mediaelementjs.com/ ，则不会显示音频播放器的控制。](http://mediaelementjs.com/)我唯一看到的是黑色区域。这是因为我的手机配置还是可以修复配置mediaelement.js？我真的很想知道。

我将网站上的 mp3 flashplayer 更改为 mediaelement.js，现在我在 Android 上离家更远了。

有谁能够帮助我？

问候，

蒂门

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T16:08:37.400

Android 2.2 浏览器不支持此嵌入式播放器。Opera Mobile for Android（有时）会这样做，但[Mediaelement.js 中的一个错误会](https://github.com/johndyer/mediaelement/issues/648)阻止它加载。我注意到 Mediaelement.js 主页不适用于嵌入式 Android（相反，它应该提供一个链接，让您可以下载/查看相关应用程序）。

# javascript - 单击时使用 jquery 从数据网格行中获取值

> ID：13126790
> 
> 赞同：0
> 
> 时间：2012-10-29T17:35:59.770
> 
> 标签：javascript, jquery, asp.net, .net, datagrid

我有以下数据网格。

它只有一列和多行：

```
<asp:DataGrid id="grid1" runat="server" AutoGenerateColumns="False">
   <Columns>
     <asp:BoundColumn DataField="something">
       <ItemStyle CssClass="myclass"></ItemStyle>
     </asp:BoundColumn>
   </Columns>
/> 
```

注意 itemstyle 中的**myclass**类。

当我单击一行时，我想获取数据源填充的行中的值。

我有以下 jquery 脚本：

```
$('.myclass').click(function () {
    // I DO NO KNOW WHAT TO ADD HERE ???
}); 
```

我尝试了很多解决方案：`$(this).text, $(this).val, $(this).attr('text')`但没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T17:38:33.840

你试过`$(this).text();`代替`$(this).text`吗？

# php - 在mysql中插入千条记录的最快方法是什么？

> ID：13126795
> 
> 赞同：0
> 
> 时间：2012-10-29T17:36:29.863
> 
> 标签：php, mysql, performance, mysqli

我想插入数千条记录，我需要这个速度很快。我阅读了很多关于这个问题的信息，所以我决定放弃我的旧方法（mysql_connect）并使用准备语句和 mysqli。所以为了测试这个的速度，我写了以下内容。

```
function load_data2db($sms_id){
$mysqli = new mysqli('localhost', 'root', 'cr3at1ve', 'tmp-clicknsend');
/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

// Create statement object
$stmt = $mysqli->stmt_init();
if ($stmt = $mysqli->prepare("INSERT INTO isec_test (sms_id, status,msgid,prmsgid,mob,sms_history_id) values (?, ?, ?, ?, ?, ?)")) {

        /* Bind our params */
        $stmt->bind_param('ssssss',$sms_id,$status,$msgid,$prmsgid,$mob,$sms_history_id);

    for($i=0;$i<100000;$i++)
    {
        /* Set our params */
        $sms_id = "110";
        $status = "OK";
        $msgid  = "msgid";
        $prmsgid = "100-0";
        $mob = "306974386068";
        $sms_history_id = 102;

        /* Execute the prepared Statement */
        $stmt->execute();
    }

        /* Close the statement */
        $stmt->close();
}
else {
        /* Error */
        printf("Prepared Statement Error: %s\n", $mysqli->error);
}
}

load_data2db(10); 
```

然后我用旧方法做了同样的事情（循环和插入）

```
include("mysql_connect.php");
 for($i=0;$i<100000;$i++)
    {
    $query = "INSERT INTO isec_test(sms_id,status,msgid) values ('1','OK','123-123')";
    $query = @mysql_query($query);
    }
mysql_close($dbc); 
```

我做了很多测试，简单的 mysql 方法总是快 1 秒。所以我很困惑。我能做些什么？使用加载数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:46:40.353

我建议您使用[`LOAD DATA LOCAL INFILE`](http://dev.mysql.com/doc/refman/5.5/en/load-data.html)，除非您在插入时需要对每行进行一些处理。

通常建议在数据库端准备 SQL 语句和绑定参数更快，因为它消除了重新解析 SQL 查询数千次的需要。

但是 PHP 扩展本身包含一些需要在应用程序端运行的代码。mysqli 扩展可能更复杂，因此与旧的 mysql 扩展相比，重复操作的运行开销略多。

在 PHP 中，如果在循环中重复足够多次，单个函数调用的开销可能会很明显。有人告诉我，这两种说法之间存在可衡量的差异：

```
$x = (int) '123';
$x = intval('123'); 
```

第二行是函数调用，因此速度较慢（尽管幅度很小）。

# ruby-on-rails - 在 Rails 中处理嵌套的 JSON 而不接受 Accept_nested_attributes_for

> ID：13126798
> 
> 赞同：4
> 
> 时间：2012-10-29T17:36:41.097
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json, backbone.js

我正在构建一个 Rails 应用程序来为 Backbone.js 前端提供 JSON API。

我们在许多案例中提供类似于 的数据`label: { id: 1, name: "My Label" }`。当它用于表单中的选择框（指定关联）时，我们当前需要`label_id: 1`在发布的数据中指定。如果可能，我们希望 API 更加对称并支持嵌套`label: { id: 1 }`形式。

到目前为止，我（毫不奇怪）收到一个`ActiveRecord::AssociationTypeMismatch`错误，因为 Rails 期待一个`Label`对象并接收到一个对象`ActiveSupport::HashWithIndifferentAccess`。我知道`accepts_nested_attributes_for`如果我们想支持标签的嵌套修改，我们可以使用，但在这种情况下，我只想使用嵌套形式为关联指定正确的标签。

在 Rails (3.2.8) 中是否有一种不涉及在将参数散列传递给模型之前修改参数散列的好方法？如果没有，有什么建议可以在参数传入时对其进行稳健转换的最佳方法？

这是我用来展平参数的当前代码，以防有帮助：

```
def flatten_params(hash)
  hash.reduce({}) do |memo, (key, value)|
    if value.class == ActiveSupport::HashWithIndifferentAccess
      memo[(key.to_s + '_id').to_sym] = value['id']
    else
      memo[key] = value
    end
    memo
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T15:45:12.807

有了这个[问题，](https://stackoverflow.com/questions/4609269/rails-how-to-extract-values-from-json)我的好友奥马尔说要使用`ActiveSupport::JSON.decode(your_json)`，第二个答案会起作用，以获得你需要的东西。

# php - 获取一个ID和两个&的字符串？

> ID：13126806
> 
> 赞同：0
> 
> 时间：2012-10-29T17:37:05.027
> 
> 标签：php, get

我为一个客户端运行一个网站，当一个获取字符串传递给它时访问它，我刚刚收到他们的新链接，我需要从链接中提取 5 件事。其中一项是 ID，因此获取字符串通常如下所示：

```
www.website.com/index.php?id=1232352346 
```

以前是这样发送的，但是这个最新的设置是这样的：

```
www.website.com/index.php?id=2345134&123461 
```

我想知道的是如果我像这样拉那个ID

```
$id=htmlspecialchars($_GET["id"], ENT_QUOTES); 
```

它会只有第二个＆之前的数字（例如：2345134）还是会有整个数字（例如：2345134&123461）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:42:00.987

**如果你想让它们分开，你可以试试这个快速修复**

```
array_walk($_GET, function(&$i,$k){empty($i) AND $i=$k;});
var_dump($_GET); 
```

输出

```
array
  'id' => string '2345134' (length=7)
  123461 => int 123461 
```

如果您**想要整个字符串**并且`id`是 URL 中的唯一键，您可以尝试

```
list($key, $value) = explode("=", $_SERVER['QUERY_STRING']);
var_dump($key,$value); 
```

输出

```
string 'id' (length=2)
string '2345134&123461' (length=14) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T17:45:37.890

如果它们不是对 进行 URL 编码`&`，则 ID 的后半部分将被视为另一个参数 - 无论您如何处理`$_GET`

有几种方法可以尝试解析它 - 一种简单的方法是检查一个空参数并假设它是 id 的另一半。您也可以忽略查询字符串的解析方式，并自行解析（可能忽略`&`两位数内的任何内容）。

但实际上，最好的办法是**确保正确编码 url** - 然后一切都会按预期工作。

以下是您提供的 URL 的解析方式（使用[`parse_str()`](http://www.php.net/manual/en/function.parse-str.php)，应该与`$_GET`填充方式相匹配）：

```
数组（2）{
  [“身份证”]=>
  字符串（7）“2345134”
  [123461]=>
  字符串（0）“”
}

```

下面是这个格式正确的 URL 的解析方式：

`/index.php?id=1234%265678`

```
数组（1）{
  [“身份证”]=>
  字符串（9）“1234&5678”
}

```

如果客户端使用 PHP 生成 URL，那么它们可以使用[`http_build_query()`](http://php.net/manual/en/function.http-build-query.php)并且所有编码都会自动处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T17:38:48.843

```
$url = "www.website.com/index.php?id=2345134&123461";
$parsed = parse_url($url);
parse_str($parsed["query"], $query);
var_dump($query); 
```

请记住，`parse_url`无效 URL 会失败。

* * *

这应该有效：

```
$id = $_GET["id"];
unset($_GET["id");
$keys = array_keys($_GET);
unset($keys);
$other = $_GET[$keys[0]];
var_dump($id, $other); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T17:40:06.797

尝试

```
$url = "2345134&123461";
$pieces = explode("&", $url);
echo $pieces[0]; // piece1
echo $pieces[1]; // piece2
 var_dump($pieces ); 
```

[**键盘**](http://codepad.org/H5tZ2Agn)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T17:47:21.247

怎么样.. www.website.com/index.php?id=2345134&123461

```
//explode it
        $string=$_GET['id'];
        list($first,$second)=explode('&',$string);
//$first = 2345134
//$second = 123461 
```

神圣的bejesus答案来得很快..

# node.js - 什么是 node.js 内存故障？

> ID：13126808
> 
> 赞同：20
> 
> 时间：2012-10-29T17:37:08.287
> 
> 标签：node.js, memory, heap-memory

我们正在部署一个 Node.js 应用程序。这个应用程序消耗的 RSS 内存似乎比它应该的要多。所以我们开始深入研究，我们发现了以下内容，感谢 `process.memoryUsage();`

*   RSS 内存快速增长到 400MB 左右，在 400MB-500MB 之间或多或少保持稳定，有小涨小跌（垃圾收集器运行？）

*   heapUsed 迅速增长到 50MB，然后保持在该级别（20MB 和 100MB 之间）。

*   heaptotal 总是比 heapUsed 多大约 30MB。

如您所见，堆和 RSS 之间存在巨大差异，我认为这是我们应该关注的地方。我们的堆中似乎没有任何非常明显的泄漏。

现在，RSS 中有什么不在堆中？我相信 C 扩展和缓冲区，对吧？如果是这样，我们如何调试它。我们还应该寻找什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T22:27:01.493

在不知道您的应用程序在做什么的情况下，不可能对此发表评论。

如果 V8 堆使用量明显低于 RSS，那么是的，它必须是外部缓冲区和非 V8 对象使用的其他内存。

你可以公开一些代码吗？

# iphone - Apple Mach-O 链接器错误 Xcode

> ID：13126809
> 
> 赞同：1
> 
> 时间：2012-10-29T17:37:17.160
> 
> 标签：iphone, xcode, build, error-handling

我尝试构建我的应用程序以在我的 iPhone 和 iPad 应用程序中存档，但我收到此错误...自从我添加 AdMob 后就开始发生这种情况。我不知道出了什么问题。我讨厌那些 Mach-O 链接器错误....

```
Ld "build/Högskoleprovet - Matematik.build/Release-iphoneos/Högskoleprovet - Matematik.build/Objects-normal/armv7s/HP-Matte" normal armv7s
cd "/Högskoleprovet - Matematik iPad Lite"
setenv IPHONEOS_DEPLOYMENT_TARGET 5.0
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
       /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang - arch armv7s -isysroot               /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk "-L/Högskoleprovet - Matematik iPad Lite/build/Release-iphoneos" "-L/Högskoleprovet - Matematik iPad Lite" "-F/Högskoleprovet - Matematik iPad Lite/build/Release-iphoneos" -filelist "/Högskoleprovet - Matematik iPad Lite/build/Högskoleprovet - Matematik.build/Release-iphoneos/Högskoleprovet - Matematik.build/Objects-normal/armv7s/HP-Matte.LinkFileList" -dead_strip -all_load -ObjC -fobjc-arc -fobjc-link-runtime -miphoneos-version-min=5.0 -framework MessageUI -framework SystemConfiguration -framework AudioToolbox -framework AdSupport -framework StoreKit -framework iAd -framework UIKit -framework Foundation -framework CoreGraphics -lGoogleAdMobAds -o "/Högskoleprovet - Matematik iPad Lite/build/Högskoleprovet - Matematik.build/Release-iphoneos/Högskoleprovet - Matematik.build/Objects-normal/armv7s/HP-Matte"

        /Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
    duplicate symbol _CFStringToCString in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _CheckJailBreakStatus in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _CompareByAddress in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _ComputeDigest in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _CopyParentMethodFromCallStack in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _CopySystemInformation in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _DoBitSlicer in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _FindSwizzling in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _GatherSignals in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _GetAdVisibility in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _GetAppUsageTime in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _GetClassMethod in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _GetDeviceBatteryLevel in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _GetDeviceBatteryState in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _GetDeviceID in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _GetDeviceOrientation in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _GetEncryptedData in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _GetInstanceMethod in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _GetIntFromDictionary in:
 /Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _GetNetworkType in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _GetOverlap in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _GetStackTrace in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _GetStrFromDictionary in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _GetViewInfo in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _InitGlobalData in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _InitNotifications in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _IsClassMethodAvailable in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _IsDeviceOrientationEnabled in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _IsInstanceMethodAvailable in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _IsPropertyAvailable in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
duplicate symbol _MD5 in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(md5.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _MD5_final in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(md5.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _MD5_init in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(md5.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _MD5_update in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(md5.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _MethodAddress in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
  duplicate symbol _ObfuscateBinaryValue in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _SetBatteryMonitoringStatus in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _SimpleWireFormatFreeBuffer in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(SimpleWireFormat.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _SimpleWireFormatMakeBuffer in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(SimpleWireFormat.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _SimpleWireFormatWriteInt64 in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(SimpleWireFormat.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _SimpleWireFormatWriteRaw in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(SimpleWireFormat.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _SimpleWireFormatWriteString in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(SimpleWireFormat.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _SimpleWireFormatWriteTag in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(SimpleWireFormat.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _SimpleWireFormatWriteVarint32 in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(SimpleWireFormat.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _SimpleWireFormatWriteVarint64 in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(SimpleWireFormat.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _do_rc4 in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(rc4.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _freeDecodedString in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _gad_bs in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(des_e.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _gad_gig in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _gad_gmcs in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _gad_gmrs in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _gad_htg in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGesture.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _gethex in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(rc4.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _htoa in:
 /Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(rc4.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _set_crypt_key in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(rc4.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 duplicate symbol _tohex in:
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(rc4.o)
/Högskoleprovet - Matematik iPad Lite/libGoogleAdMobAds.a(GADGestureCFiles.o)
 ld: 64 duplicate symbols for architecture armv7s
 clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

有什么问题？有任何想法吗？提前致谢！

/一个菜鸟

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T06:55:37.293

只需转到目标，然后构建设置，然后在其他链接器标志选项中，删除**-all_load**标志。这将帮助您解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T17:53:20.963

在构建设置中尝试其他链接器标志中的 -ObjC。

# jquery - 手风琴面板

> ID：13126810
> 
> 赞同：1
> 
> 时间：2012-10-29T17:37:43.760
> 
> 标签：jquery, accordion

我不擅长 jQuery。我找到了以下手风琴面板脚本。该脚本在加载时隐藏所有面板，并在我单击它时打开一个。但是，我希望在加载时打开所有面板，并且只单击我想要隐藏的面板。当我点击它时不想隐藏所有。

```
// accordion
    $('.accordion h5').click(function () {
        $('.accordion h5').removeClass('open');
     // close all slides
        $('.accordion ul ul').slideUp('normal');
        if ($(this).next().is(':hidden') == true) {
            $(this).addClass('open');
            $(this).next().slideDown('normal');
        }
    });
    $('.accordion h5').mouseover(function () {
        $(this).addClass('hover');
    }).mouseout(function () {
        $(this).removeClass('hover');
    });
    $('.accordion ul ul').show(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:26:58.587

以下应该给出你想要的行为。

```
 $('.accordion h5').click(function () {
        $(this).toggleClass('open').next().slideToggle(); 
 }).hover(function(){
       $(this).toggleClass('hover');    
 }); 
```

如果需要修改，请提供一些标记

# iis - 使用 get-website 的网站的 Powershell 列表？

> ID：13126811
> 
> 赞同：16
> 
> 时间：2012-10-29T17:37:46.490
> 
> 标签：iis, powershell

我在使用基本的 powershell 命令时遇到了一些麻烦。

如果我运行 get-website（在启用 webadministration snappin 之后）并运行“%SystemRoot%\system32\WindowsPowerShell\v1.0\powershell.exe -NoExit -ImportSystemModules”，我会在我的 IIS 上看到 10 个左右网站的列表Server 2008 Standard（SP2，不是 R2）上的 7.0 服务器。通过列出这些项目，它可以按预期工作：

*   姓名
*   ID
*   状态
*   物理路径
*   绑定

但是当我这样做时：

获取网站 | 导出-csv C:\my_list.csv

我得到了更多带有“Microsoft.IIs.PowerShell.Framework.ConfigurationElement”的项目，而不是实际值。

当它导出到 CSV 时，它还会在之前没有绑定时显示“Microsoft.IIs.PowerShell.Framework.ConfigurationElement”（当输出在 shell 中时）。

差不多到一半了...

有没有办法可以修改单线，这样我就可以在没有“Microsoft.IIs.PowerShell.Framework.ConfigurationElement”的情况下获得包含所有详细信息的网站列表？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-29T18:14:22.287

尝试

```
get-website | select name,id,state, physicalpath,
@{n="Bindings"; e= { ($_.bindings | select -expa collection) -join ';' }} |
Export-Csv -NoTypeInformation -Path C:\my_list.csv 
```

- 评论后编辑：

```
get-website | select name,id,state,physicalpath, 
@{n="Bindings"; e= { ($_.bindings | select -expa collection) -join ';' }} ,
@{n="LogFile";e={ $_.logfile | select -expa directory}}, 
@{n="attributes"; e={($_.attributes | % { $_.name + "=" + $_.value }) -join ';' }} |
Export-Csv -NoTypeInformation -Path C:\my_list.csv 
```

# python - 使用 eval 在全局范围内创建新变量

> ID：13126817
> 
> 赞同：2
> 
> 时间：2012-10-29T17:38:11.117
> 
> 标签：python, pygame

我试图让我的绘图程序的用户（用 pygame 用 python 编写）重命名选定的对象，然后能够通过实时解释器通过它们的名称访问它们。以下是所有可绘制对象的基类的方法。运行此代码时，我没有收到任何错误，但是当我尝试通过其新名称访问对象时，我被告知未定义具有该名称的变量。任何想法为什么会这样？

```
def rename(self,newName):

    """
    Gives this drawable a new name by which the user my reference it in
    code
    """

    #Create a new variable in the global scope
    command =  'global ' + newName + '\n'

    #Tie it to me
    command += newName + ' = self' + '\n'

    #If I already had a name, I'll remove this reference
    if self.name != None:
        command += 'del ' + self.name

    #Execute the command
    exec(command)

    #Make this adjustment internally
    self.name = newName 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:44:32.493

我认为这不会起作用，因为该`exec`函数有自己的全局变量conecpt，与您的函数看到的变量无关。

一般来说，操作模块的字典更容易。请注意，全局范围实际上是当前模块的成员名称。

例如，如果您正在使用`__main__`模块，添加一个变量：

```
sys.modules['__main__'].__setattr__('xxx', 42) 
```

并删除它：

```
sys.modules['__main__'].__delattr__('xxx') 
```

**更新**：再想一想，如果您不关心模块，最好使用`globals()`字典。要添加变量：

```
globals()['xxx'] = 42 
```

并删除它：

```
del globals()['xxx'] 
```

自然，这等同于前者，因为`globals()`返回类似 ( `sys.modules[__name__].__dict__`) 的东西。

漂亮。结论是：如果你习惯`eval`做反思，那你就做错了。

# java - 指数拟合与 apache 公共数学

> ID：13126826
> 
> 赞同：5
> 
> 时间：2012-10-29T17:38:29.160
> 
> 标签：java, math, apache-commons-math

我正在尝试使用公式 A*EXP(-BX) 对各个点 (x,y) 进行指数拟合，试图找到最适合我的点的 A 和 B。

```
double[] xx = curveFitter.fit(new ParametricUnivariateFunction() {
                public double value(double v, double... doubles) {
                    return doubles[0] * Math.exp(-1 * doubles[1] * v);
                }

                public double[] gradient(double v, double... doubles) {
                    return new double[]{v, 1};
                }
            }, new double[]{0, 0}); 
```

我得到了一些数字，但它们无论如何都不符合我的观点，似乎在上面找不到任何文档。

使用 commons-math3-3.0

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-29T17:46:56.753

如果您试图估计这一点，我建议您记录 y 的对数，这将为您提供图表

```
y' = log(y) = A - B * x; 
```

由此您可以计算斜率和截距。

```
slope = sum((x - mean(x)) * (y' - mean(y')) / sum((x - mean(x))^2) // -B

intercept = mean(y' - x * slope) // A 
```

# java - 垃圾收集器是否适用于 java 中的静态变量或方法？

> ID：13126833
> 
> 赞同：7
> 
> 时间：2012-10-29T17:39:04.663
> 
> 标签：java, reference, static, garbage-collection

我正在创建一个示例演示程序，让我了解如何使用垃圾收集器释放静态变量的引用、java 中的方法？

我使用弱引用来不阻止垃圾收集器。

班级`Sample`

```
public class Sample {

    private static String userName;
    private static String password;
    static {
        userName = "GAURAV";
        password = "password";
    }
    public static String getUserName(){
        return userName;
    }
    public static String getPassword(){
        return password;
    }
} 
```

班级`User`

```
import java.lang.ref.WeakReference;

public class User {

    public static void main(String[] args) {
        /**
         * Created one object of Sample class
         */
        Sample obj1 = new Sample();
        /**
         * I can also access the value of userName through it's class name 
         */
        System.out.println(obj1.getUserName()); //GAURAV
        WeakReference<Sample> wr = new WeakReference<Sample>(obj1);
        System.out.println(wr.get());  //com.test.ws.Sample@f62373
        obj1 = null;
        System.gc();
        System.out.println(wr.get()); // null
        /**
         * I have deallocate the Sample object . No more object referencing the Sample oblect class but I am getting the value of static variable. 
         */
        System.out.println(Sample.getUserName()); // GAURAV
    }

} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-29T17:50:05.410

静态字段与类相关联，而不是与单个实例相关联。

当持有类的 ClassLoader 被卸载时，静态字段被清理。在许多简单的程序中，这是永远不会的。

如果您希望将字段与实例关联并清理，则清理实例，使它们成为实例字段，而不是静态字段。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-29T17:49:48.380

除了程序，回答你的问题

1.  不。**方法不会被垃圾收集**，因为它们首先不存在于堆中。

2.  **静态变量属于Class实例，**一旦加载就不会被垃圾回收（对于大多数通用Classloader）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-29T17:42:37.017

System.gc() 不会强制垃圾收集器运行。这只是对 JVM 的一个建议，可能是运行垃圾收集器的好时机。看到这个问题 - [System.gc() 什么时候做任何事情](https://stackoverflow.com/questions/66540/system-gc-in-java)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-29T17:44:13.413

你应该明白，`System.gc();`不叫垃圾收集器。它只是礼貌地要求 GC 删除一些垃圾。GC 自己决定做什么以及何时开始。因此，不要指望在调用`System.gc();`、分配`null`给变量等时会立即看到效果。

GC 删除所有无法以任何方式访问的对象。因此，如果代码退出了定义变量的块，则可以删除该对象。赋值为 null 会删除引用。弱引用不会阻止 GC 删除对象。

我希望这个解释有所帮助。

# css - 图像未填充边界半径

> ID：13126841
> 
> 赞同：2
> 
> 时间：2012-10-29T17:39:40.060
> 
> 标签：css, gravatar

我为我的用户 Gravatar 图像添加了一个边框半径，并确保为 chrome 和 safari 扩展添加了正确的 CSS，但图像并没有完全填满整个圆圈。但是它在 Firefox 中正确显示。这是我的 CSS 以及一些问题的图像。

```
.gravatar{float: left; text-align: center; 
margin-top:1px; border:2px solid white;background-color:#ffffff;-webkit-border-radius:55%;-moz-border-radius:55%;border-radius:55%;box-shadow:0 0 10px rgba(0,0,0,0.3);
height: 38px;
width: 38px;
} 
```

![在此处输入图像描述](../Images/1dae743c5f6553c04c01792fbe3afd01.png) ![在此处输入图像描述](../Images/83f6c1ba2aa1a7ba2643a1b75f5a5a68.png)

CSS 中唯一提到的 gravatar 是

```
.gravatar {
    padding: 0px;
    display: inline;

} 
```

在我的 Bootstrap.min.css

我正在通过 PHP 从 Gravatar 调用图像

```
<a href="users.php?uid=<?php echo $row['user_id']; ?>"><?php echo $generic->get_gravatar($email, true, 200, 'mm', 'g', array('style' => '1')); ?> <?php echo $row['username']; ?></a><?php echo $admin . $restrict; ?> 
```

感谢您提供的任何解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T18:18:18.433

据我所知，这不是图像没有填充边框半径的问题，而是浏览器呈现边框的方式之一。如果把边框的颜色改成和图片不同的颜色，可以看到其实在Chrome中绘制的时候边框是*在图片的下方绘制的。*一个潜在的解决方法是用 div 包装图像，并将边框放在该 div 上。

我使用了 16x16 图像并得到了与您相同的结果……起初。我用 div 包裹它，问题就消失了。

```
.gravatar
{
    float: left; 
    text-align: center; 
    margin-top: 1px; 
    background-color: #ffffff;
    -webkit-border-radius:55%;
    -moz-border-radius:55%;
    border-radius:55%;
    box-shadow:0 0 10px rgba(0,0,0,0.3);
    height: 38px;
    width: 38px;
}
.gravWrap
{
    display:inline-block;
    border-radius: 55%;
    border: solid 2px blue;
}

<div class='gravWrap'><img class='gravatar' src='img/rss16.png'/></div> 
```

编辑：您可以像这样输出该标记：

```
<a href="users.php?uid=<?php echo $row['user_id']; ?>"><div class='gravWrap'><?php echo $generic->get_gravatar($email, true, 200, 'mm', 'g', array('style' => '1')); ?></div> <?php echo $row['username']; ?></a><?php echo $admin . $restrict; ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T18:16:50.687

您可以用 a 包装`img`标签`span`并将这些样式应用于该标签`span`。然后，添加`overflow: hidden`它应该可以在 WebKit 中使用。

[http://jsfiddle.net/Kg4Z3/1/](http://jsfiddle.net/Kg4Z3/1/)

PHP代码：

```
<a href="users.php?uid=<?php echo $row['user_id']; ?>"><span class="gravatar-wrapper"><?php echo $generic->get_gravatar($email, true, 200, 'mm', 'g', array('style' => '1')); ?></span> <?php echo $row['username']; ?></a><?php echo $admin . $restrict; ?> 
```

和CSS：

```
.gravatar-wrapper {
    background-color: #fff;
    border: 2px solid #fff;
    -webkit-border-radius: 55%;
    -moz-border-radius: 55%;
    border-radius: 55%;
    box-shadow: 0 0 10px rgba(0,0,0,0.3);
    float: left;
    height: 38px;
    margin-top: 1px;
    overflow: hidden;
    text-align: center;
    width: 38px;
}​ 
```

# java - 应用程序每 2 秒冻结 android

> ID：13126842
> 
> 赞同：1
> 
> 时间：2012-10-29T17:39:43.010
> 
> 标签：java, android

我有一个应用程序，它每 50 毫秒捕获一次帧（UDP）并用这些数据更新我的视图。但是我的应用程序每 2 秒在 100/200 毫秒内冻结。在 LogCat 中出现一条消息：GC_CONCURRENT。

我不知道这条消息和我的冻结之间是否存在联系。如果是，是否有解决方案来避免这种情况？

```
 try {
                view.setClientSocket(new MulticastSocket(54321));
                ip = InetAddress.getByName("224.2.2.4");
                view.getClientSocket().joinGroup(ip);

            } catch (SocketException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            int cpt = 0;
            while(true){
                cpt++;
            try {
                if (view.isPort_change() == true){
                    view.setClientSocket(new MulticastSocket(54321));
                    ip = InetAddress.getByName("224.2.2.4");
                    view.getClientSocket().joinGroup(ip);
                    view.setPort_change(false);
            }

            int result = -1;            
            if(view.isCapture() == true && listeinit==true)
            {
                DatagramPacket receivePacket = new DatagramPacket(receiveData, receiveData.length,ip,54321);    
                view.getClientSocket().receive(receivePacket); 
                String modifiedSentence = new String(receivePacket.getData(),0,receivePacket.getLength());

                for(int i=0; i<modifiedSentence.split("\\+").length; i++)
                {
                    String[] donnee = modifiedSentence.split("\\+")[i].split(":");
                    for(Hashtable.Entry<Integer, String> entry : view.getAll_parameters().entrySet()){
                        if(entry.getValue().equals(donnee[0])){
                            result = entry.getKey();
                            break;
                        }
                    }
                    if (result== -1)
                    {
                        view.getBloc().add(donnee[1]);
                    }
                    else
                    {
                        view.getBloc().set(result,donnee[1]);                           
                    }
                }
             //     if(cpt%5==0)
                    {

                        view.getHandler().sendEmptyMessage(1);
                    }
            }
        }` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:42:27.997

GC_CONCURRENT 表示正在进行垃圾回收。您正在分配/释放大量内存，JVM 必须每 2 秒进行一次垃圾收集。您应该尝试重用内存，而不是在每次发送数据包时分配和丢失对它的引用。

# ios - 查找城市边界的坐标

> ID：13126845
> 
> 赞同：0
> 
> 时间：2012-10-29T17:39:51.830
> 
> 标签：ios, mkmapview

我正在制作的应用程序的一部分使用 MKMapView 显示用户的位置并放大到附近的城市/城镇。现在作为下一步，我想突出显示城市的边缘以及某些街区（例如，在中央公园或波士顿公共广场的边缘画一条线）。我知道如何进行叠加并将其设置在地图上，但我无法弄清楚的问题是如何获取边界的坐标数据。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:44:44.850

您特别需要哪些？

*   [Zillow 社区边界](http://www.zillow.com/howto/api/neighborhood-boundaries.htm)
*   [美国人口普查局数据](http://www.census.gov/geo/www/cob/nect2003.html)，[更多](http://www.census.gov/geo/www/cob/ua2000.html)，[更多](http://www.census.gov/geo/www/cob/cc2000.html)
*   [Maptechnica 数据](http://www.maptechnica.com/map_tools_cities.php)（出售）

# javascript - 尝试在 Chrome 中运行时来自 Sigma.js 的 XMLHTTPRequest 错误[似乎是独特的运行方式]

> ID：13126846
> 
> 赞同：0
> 
> 时间：2012-10-29T17:39:55.100
> 
> 标签：javascript, css, ajax, html

我面临的问题：没有图 D：

我正在尝试做的事情：复制这个在本地运行它。[http://sigmajs.org/examples/gexf_example.html](http://sigmajs.org/examples/gexf_example.html)

当我尝试模拟网页时，我得到了什么：http: [//i.imgur.com/q93z9.png](https://i.imgur.com/q93z9.png)

当我在 Firefox 中运行它时，我什么也没有得到，我不知道为什么......

**类似的问题：**

这是[https://stackoverflow.com/questions/11572429/sigma-parsegexf-js-got-xmlhttprequest-exception-error](https://stackoverflow.com/questions/11572429/sigma-parsegexf-js-got-xmlhttprequest-exception-error)的副本，没有收到任何答案:(

也有这个，但我不明白他到底做了什么...... [Sigma.js 的图形可视化：在我头上](https://stackoverflow.com/questions/10823134/javascript-sigma-js-visualization-way-over-my-head)

我该如何解决这个问题/它只能在 Web 服务器上运行吗？

谢谢！

我尝试使用一些解决方案并更改 `gexfhttp.open('GET', gexfPath, false);`为 `gexfhttp.open('GET', gexfPath, true);` 但没有发现任何区别

相关代码：

Javascript（取自 sigma.js.org） sigma.parseGexf.js [http://pastie.org/5133355](http://pastie.org/5133355)（用上面的“解决方案”修改）prettify.js：[http](http://sigmajs.org/js/prettify.js) ://sigmajs.org/js/prettify.js sigma.min：[http ://sigmajs.org/js/sigma.min.js](http://sigmajs.org/js/sigma.min.js)

CSS [http://sigmajs.org/css/bootstrap.min.css](http://sigmajs.org/css/bootstrap.min.css) [http://sigmajs.org/css/bootstrap-responsive.min.css](http://sigmajs.org/css/bootstrap-responsive.min.css) [http://sigmajs.org/css/style.css](http://sigmajs.org/css/style.css) [http:// sigmajs.org/css/prettify.css](http://sigmajs.org/css/prettify.css)

我正在运行的 HTML 文件（再次来自 sigmajs.org） [http://pastie.org/5133367](http://pastie.org/5133367)也在[http://sigmajs.org/examples/gexf_example.html](http://sigmajs.org/examples/gexf_example.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T23:08:53.213

运行本地[apache](http://httpd.apache.org/download.cgi)或 IIS，然后在本地主机上运行它。

# session - phpunit 会话 symfony2

> ID：13126851
> 
> 赞同：1
> 
> 时间：2012-10-29T17:40:13.470
> 
> 标签：session, symfony, phpunit

谁知道如何为 phpunit 测试创建 symfony2.1.x 会话？

我找到了这个，但它不工作：

```
$account = $this->em->getRepository('BaseBundle:Account');
$user = $account->findOneById('835d278dfb30');        
$container = $this->client->getContainer();

$token = new UsernamePasswordToken($user, null, array('IS_AUTHENTICATED_FULLY', 'IS_AUTHENTICATED_ANONYMOUS'));
$this->client->getContainer()->get('security.context')->setToken($token);
$session = $this->client->getContainer()->get('session');
$session->set('_security_secured_area', serialize($token));
$session->save(); 
```

在此之后，我尝试向帐户 url 发出请求，该 url 受 symfony 的安全区域保护，我不应该重定向到登录页面:(

请帮助我，我尝试了很多东西，但没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T08:44:59.810

你可以使用 Symfony 会话模拟对象。

文档链接：[http ://symfony.com/doc/current/components/http_foundation/session_testing.html](http://symfony.com/doc/current/components/http_foundation/session_testing.html)

# excel - 使用 WSH 在“带有自定义扩展的 Excel 2003”中打开 Excel 工作表

> ID：13126852
> 
> 赞同：1
> 
> 时间：2012-10-29T17:40:13.563
> 
> 标签：excel

我正在尝试使用具有自定义构建扩展名的 Excel 2003 打开一个 Excel 工作表。

我可以使用文件路径打开具有自定义扩展名的特定版本的 excel，但我无法打开它的某个文件。

这就是我想要做的：

1) 打开带有自定义扩展名的 Excel 2003 2) 在其中打开特定文件 3) 运行宏 4) 关闭

我不能简单地打开一个 excel 文件，因为它使用没有自定义扩展的普通 Excel 2003 打开它。因此，我必须打开带有自定义扩展名的 Excel 2003，然后打开我想要打开的 Excel 文件。

我知道我到处都在问这个问题，但如果需要澄清，我会做更多解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T18:10:34.827

如果您已经有一个正在运行的 excel 实例，那么您可以使用以下内容：

```
Dim XL
On Error Resume Next
Set XL = GetObject(, "Excel.Application")
On Error Goto 0

If Not TypeName(XL) = "Empty" Then
    XL.Workbooks.Open "path to your file here"
    XL.Run "path to your macro here"
End If 
```

注意：如果打开了多个 excel 实例，则无法轻松预测返回的那个。

# javascript - 更改图像源并添加文件名后缀

> ID：13126857
> 
> 赞同：2
> 
> 时间：2012-10-29T17:40:32.533
> 
> 标签：javascript, image, url, src

如何为“-hover”图像指定确切的文件路径目录（翻转效果）？目前，这仅适用于位于子目录中的图像。

```
$(function(){
  $('.box-img').append('<span></span>').hover(
    function(){
      $(this).find('img').stop().animate({opacity:0})
    }, function(){
      $(this).find('img').stop().animate({opacity:1})
    }
  ).each(function(){
    var src=new Array()
    src=$(this).find('img').attr('src').split('.')
    src=src[0]+'-hover.'+src[1]
    $(this).find('>span').css({background:'url('+src+')'})
  });
}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T18:30:00.133

我喜欢使用带有`the background-position`css 属性的精灵，但你可以试试这个，使用`RegExp`：

```
$(document).ready(function(){
   // Change the image of hoverable images
   $(".imgHoverable").hover( function() {
       var hoverImg = HoverImgOf($(this).attr("src"));
       $(this).attr("src", hoverImg);
     }, function() {
       var normalImg = NormalImgOf($(this).attr("src"));
       $(this).attr("src", normalImg);
     }
   );
});

function HoverImgOf(filename)
{
   var re = new RegExp("(.+)\\.(gif|png|jpg)", "g");
   return filename.replace(re, "$1-hover.$2");
}
function NormalImgOf(filename)
{
   var re = new RegExp("(.+)-hover\\.(gif|png|jpg)", "g");
   return filename.replace(re, "$1.$2");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T18:12:29.273

您可以使用`basename`from`jquery.utils`从`src`. 然后用“.”分割 basename，添加“-hover”，并重建路径。所以你不必担心诸如“../../css/images/image.png”之类的名称。

或者你可以用“/”分割，然后检索数组的最后一个元素作为基本名称，然后用“.”分割*那个元素。*

```
var src=new Array()
// path/to/filename.jpg
src=$(this).find('img').attr('src').split('/')

var bname = src.pop()   // bname is now filename.jpg, src is { path to }
var bco=new Array()     
bco = bname.split('.')  // bco is now { filename jpg }
ext = bco.pop()         // ext is jpg, bco is { filename }
nam = bco.pop()         // nam is filename, bco is { }

bco.push(nam + '-hover') // bco is { filename-hover }
bco.push(ext)            // bco is { filename-hover jpg }

bname = bco.join('.')   // bname is now filename-hover.jpg

src.push(bname)

srcString = src.join('/') 
```

您还必须关心如何在基本名称中使用点命名文件（例如“ubuntu-12.02.jpg”），以及如何重新组装拆分数组。

# python - 创建不会与其他系统冲突的 UUID

> ID：13126861
> 
> 赞同：1
> 
> 时间：2012-10-29T17:41:00.927
> 
> 标签：python, uuid

我正在使用 Python 标准[`uuid`](http://docs.python.org/2/library/uuid.html)库。如果我的应用程序最终扩展到多台服务器，我应该怎么做才能确保 UUID 不会发生冲突，因为不同的系统将使用不同的机器 id？我应该使用哪个 UUID 生成器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:57:27.637

[`uuid1()`](http://docs.python.org/2/library/uuid.html#uuid.uuid1)应该足以满足您的需求，因为它考虑了主机 ID。

在RFC 4122 的[第 4.2.2 节](https://www.rfc-editor.org/rfc/rfc4122.html#section-4.2.2)中，这是关键位：

> *   将节点字段设置为 48 位 IEEE 地址，其重要性顺序与地址相同。

节点字段是 UUID 的最后 6 个字节，将反映相关主机的 MAC 地址之一。

# c++ - C++中的静态类成员

> ID：13126869
> 
> 赞同：0
> 
> 时间：2012-10-29T17:41:24.427
> 
> 标签：c++

我有一个与 C++ 中的静态类成员有关的问题。根据我对 C++ 的理解，静态类号应该在创建类的实例之前就存在。可以初始化 const 静态成员变量，但对于非 const 静态成员，我们不能在类中对其进行初始化。因此，我的问题是我们应该在哪里初始化非常量静态类。在我看来，非常量静态类的唯一阶段是在主程序运行之前，如以下代码所示：

```
 using namespace std;
    class C
    {
    public:
        static int Value;

    };

    int C::Value = 2;

    int main()
    {
        // int C::Value = 2; //ERROR!
        cout<<C::Value<<endl; 
        return 0;
    } 
```

还有其他方法来初始化它吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T23:26:47.400

C++程序中的非局部对象可以*静态*初始化，也可以*动态*初始化。简单来说，*静态*初始化是简单的 C 风格初始化，带有常量表达式，基本上在编译时执行（因此不生成代码）。同时，*动态*初始化是涉及一些必须在运行时执行的重要动作的初始化。

您可以假设*静态*初始化的对象在已经初始化的状态下开始它们的生命。即从概念上讲，它们会在您的程序启动时立即初始化。

当涉及到*动态*初始化时间和顺序时，静态类成员的处理方式与任何其他命名空间范围对象相同。该语言不保证所有具有静态存储持续时间的对象都在之前初始化`main`。相反，该语言保证此类静态对象在首次使用同一翻译单元中定义的任何函数或对象之前的某个时间进行初始化。在同一个翻译单元中定义的静态对象按照它们的定义顺序进行初始化。动态初始化的规则允许已经提到的“初始化顺序失败”。

在您的示例中 - 一个`int`由整数常量表达式初始化的对象 -将使用*静态初始化。*可以安全地假设这个`int`对象在已经初始化的状态下开始它的生命。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T17:44:16.720

你几乎一针见血。

定义是 before 还是 after 都没有关系`main`。事实上，除了考虑[静态初始化顺序惨败](http://libcw.sourceforge.net/global/global.html)之外，你在哪里写它并不重要，只要*声明*（即类定义中的那一行）在你使用成员的地方是可见的，并且作为只要您在与类定义*相同的范围内执行此操作。*

# javascript - `dd-M-yyyy` 格式的日期解析字符串

> ID：13126870
> 
> 赞同：4
> 
> 时间：2012-10-29T17:41:24.877
> 
> 标签：javascript, parsing, date

我需要从格式的字符串创建新的日期：`dd-M-yyyy`

例子：

```
var dateStr = '16-Sep-2012';
var date = new Date(dateStr); 
```

然而 IE 对此并不满意，并将`date`value 视为`NaN`. 有人会推荐我或给我一个可靠的解析器吗？10 倍的帮助，BR

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T18:32:40.693

使用该`Date.parse`函数，然后对该变量调用新的 Date 函数。[在这里](http://jsfiddle.net/TCnhe/2/)查看一个活生生的例子。

```
var date = Date.parse('16-Sep-2012');
var formatted_date = new Date(date); 
```

使用[jQuery 全球化插件](https://github.com/jquery/globalize)，您可以使用 Globalizaiton.parseDate 解析日期。该插件增加了对 IE 的支持。

# entity-framework - EF5 Code First 迁移 - 反复运行的 DB Init

> ID：13126872
> 
> 赞同：2
> 
> 时间：2012-10-29T17:41:32.757
> 
> 标签：entity-framework, ef-code-first, entity-framework-migrations

我的新 EF5 Code First 应用程序利用了新的迁移支持，发生了这种奇怪的事情。我看到的一件事是数据库播种例程在初始数据库负载上运行，但奇怪的是它似乎在应用程序一段时间未运行后再次运行。这是可以预料的吗？防止这种情况发生的最好方法是什么？

我得到了整个 .AddOrUpdate()，但与应用程序第一次运行并创建数据库模式时相比，运行它似乎仍然很奇怪。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:35:38.863

是的，这是预期的行为。即使没有要应用的架构更改，Seed 方法也会运行。

如果您在 Seed 方法中进行了大量工作并希望获得更多控制权，您可以执行一些操作，例如将应用程序设置添加到项目的 .config 文件中：

```
<appSettings>
    <add key="seedDatabase" value="true"/>
</appSettings> 
```

然后检查 Seed 方法中的设置。

```
protected override void Seed(BarDb context)
{
    if(ConfigurationManager.AppSettings["seedDatabase"] == "true")
    {
        // ... seed logic
    }            
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:20:21.070

我的理解是，`AutomaticMigrationsEnabled`在配置中设置为 true 时，每次应用启动时都会触发迁移（这可能是您在应用一段时间未运行时看到该行为的原因）。

问题是即使没有要迁移的东西，迁移代码也会运行种子。我会使用类似于@OdeToCode 的解决方案，但我宁愿使用数据库本身完成检查（例如测试表是否为空等）

实际上，新`Enable-Migrations`命令将在生成的文件中将 设置`AutomaticMigrationsEnabled`为 false 。`Configuration.cs`

初始化程序确实是设置数据库的另一种形式，正如您正确地说它们在测试/原型设计上下文中更有用，允许您每次将数据库重置为已知状态。它看起来像重复的功能，但用途不同：在生产数据库中，我不会使用预烘焙的初始化程序之一。

# android - 使用 WebView 打开位于我的应用程序内的 html 文件

> ID：13126874
> 
> 赞同：10
> 
> 时间：2012-10-29T17:41:33.973
> 
> 标签：android, webview

我刚开始Android应用程序开发。这里我有一个包含 WebView 的简单 Activity。当我尝试打开一个网站（如[http://www.google.com](http://www.google.com)）时，它工作正常。但我想打开我在应用程序的“res”目录中创建的 html 文件（假设 index.html）文件。完整路径是“res/base/index.html”。那么如何在我的 WebView 中打开这个文件呢？

在职的 ：

```
webview.loadUrl("http://www.google.com"); 
```

不工作：

```
webview.loadUrl("./res/base/index.html"); 
```

请帮我。:)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-29T17:43:16.407

将文件放在您的`/assets`目录中并使用：

```
webview.loadUrl("file:///android_asset/index.html"); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-29T17:45:28.280

首先您将 index.html 文件复制到项目中的 assets 文件夹，然后尝试此操作，它可能会对您有所帮助

```
public class WebViewDemoActivity extends Activity {  

    private WebView mWebView;  
    @Override  
    public void onCreate(Bundle savedInstanceState) {  
        super.onCreate(savedInstanceState);

        setContentView(R.layout.web_view_layout);  

        mWebView = (WebView) findViewById(R.id.web_view_id);  
        mWebView.loadUrl("file:///android_asset/index.html");  
    }  
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-29T17:43:12.583

尝试类似的东西

```
webView.loadUrl("file:///android_asset/filename.html"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-12T14:57:32.807

您不必将文件放在资产文件夹中。您可以附加`"file:///"`为文件路径的前缀。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-20T18:55:10.170

我可以确认没有必要投入评估。`path`必须通过以下方式加载文件：

```
val url = Uri.fromFile(File(path)).toString()
web_view.loadUrl(url) 
```

# python - 如何检查列表中的每个元素是否相等？

> ID：13126876
> 
> 赞同：0
> 
> 时间：2012-10-29T17:41:40.050
> 
> 标签：python, list

> **可能重复：**
> [检查列表中的所有元素是否相同](https://stackoverflow.com/questions/3844801/check-if-all-elements-in-a-list-are-identical)

我想检查列表的所有元素是否相等。我不能这样做：

```
if all (x == x for x in (a, b, c, d)):
    ... 
```

在 Python 中是否有非常简约和优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T17:44:59.463

如果列表中只有可散列的元素，则可以使用[set](http://docs.python.org/2/library/sets.html%20set)。

例如，如果您的列表被命名`lst`，您可以执行以下操作：

```
if (len(set(lst)) <= 1):
    .... 
```

该集合将消除列表中的所有重复项，因此如果集合的长度为*1*，则意味着所有元素都相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T17:44:53.620

```
all(x == items[0] for x in items) 
```

这就是你要找的。

否则，您会将每个值与自身进行比较`x==x`，而不是将每个值与第一个值进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T17:43:53.603

```
first = my_list[0]
print all(x==first for x in my_list[1:]) 
```

应该管用

也许更优雅......（我真的不这么认为......）

```
>>> if reduce(lambda item0,item1:item0 if item0==item1 else False,my_list) is not False:
...    print "OK ALL THE SAME!"
...
OK ALL THE SAME! 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-29T17:46:21.663

[在这里](https://stackoverflow.com/questions/3844801/check-if-all-elements-in-a-list-are-identical)回答，带有性能基准

我最喜欢的 ：`lst[1:] == lst[:-1]`

# java - ant 构建失败并在 Windows 平台中出现 Basedir 错误

> ID：13126877
> 
> 赞同：0
> 
> 时间：2012-10-29T17:41:49.270
> 
> 标签：java, ant, antbuilder

我正在尝试在运行 Windows 7 的笔记本电脑上设置我的项目。我无法构建项目，它会引发错误

```
BUILD FAILED
C:\Projects\apsrtc-oprs\src\build.xml:118: Basedir C:\Projects\apsrtc-oprs\src\Projectsapsrtc-oprs\src\components does not exist 
```

我的`build.properties`

```
#
# For developers/PC pls update the project.base and deploy.dir accordingly in the build.properties file
# Donot Modify or change the build.properties.console file, use the template file instead...
#
# To avoid ant quirks, the project.base here must be a full absolute path

project.base=C:\Projects\apsrtc-oprs

# Deployment directory
deploy.dir=C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps
cxf.home=C:\Projects\apache-cxf-2.6.0

# Log files
log.file.path.windows=C:\Projects\apsrtc-oprs\dist\logs\log4j.log
project.keystore.pwd=AbhS!g4n9Jar0Prod6O3P3R4S5 
```

我的`build.xml`

```
<project name="APSRTC_project" default="build" basedir=".">

    <!-- Read the system environment variables and stores them in properties, -->
    <!-- prefixed with "env.". -->
    <property environment="env."/>

    <!-- define all settings for different kinds of builds -->
    &load-flag-targets;

    <!-- setup targets to options -->
    <target name="--init">
        <tstamp />
        <copy file="build.properties.console" tofile="build.properties" overwrite="false"/>

        <!-- The build.properties file defines the project base and easuite-lib directories -->
        <!-- This must be loaded before the &set-properties; inclusion -->
        <property file="./build.properties"/>
        <echoproperties prefix="env." destfile="env.properties"/>
    </target>

    <!-- invokes build script to clean apps and components  -->
    <target name="clean" depends="--init">
        <!-- set the properties based on the build flags -->
        &set-properties;

        <ant dir="${project.base}/src/components" target="clean"/>
        <ant dir="${project.base}/src/apps" target="clean"/>
    </target> 
```

我正在尝试清理项目并在

```
 <ant dir="${project.base}/src/components" target="clean"/> 
```

通过更改 Basedir 的路径和 build.properties 文件中的其他相关路径在我的 Centos 操作系统上运行良好。我到底哪里错了？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T07:48:16.983

该值`'C:\Projects\apsrtc-oprs\src\Projectsapsrtc-oprs\src\components'`似乎是`${project.base}/src/components`. 请检查您是否正在采购 build.properties 文件。

查看命名约定，它看起来像 '/' 是需要的`Projectsapsrtc-oprs`，所以它变成`Projects/apsrtc-oprs`

# php - php从列表中循环

> ID：13126881
> 
> 赞同：0
> 
> 时间：2012-10-29T17:42:00.433
> 
> 标签：php, loops

我正在制作一个脚本。在这个脚本中，我将提供一些关键字列表。然后它将转到目标站点并获取数据。请看一下我的代码：

```
//my option start
$toplist=file_get_contents('http://mysite/list.txt');

//list grabbing

$listgrabbing=explode('target="_',$toplist);
$counting=count($listgrabbing);
$l='0';
for ($l=0 ; $l <=$counting ; $l++){
$targetsite='http://targetsite/search?q='.$listgrabbing;
$revip=file_get_contents($targetsite);

//Rest of code 
```

现在看，我有一些关键字列表，在一个 txt 文件中。. 如 ：

```
football
cricket
basketball
chase 
```

我的代码将采用第一个关键字并搜索目标站点并抓取。然后第二，第三，第四......但它不是从列表中选择关键字。这里有什么错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:50:42.730

```
$toplist=file_get_contents('http://mysite/list.txt');
$listgrabbing=explode("\n",$toplist);
foreach($listgrabbing as $item){
     $targetsite='http://targetsite/search?q='.$item;
     $revip=file_get_contents($targetsite);
} 
```

# asp.net - 我可以替换 MVC4 中整数字段的默认验证消息吗？

> ID：13126885
> 
> 赞同：1
> 
> 时间：2012-10-29T17:42:11.320
> 
> 标签：asp.net, .net, asp.net-mvc-4, data-annotations

> **可能重复：**
> [ASP.net MVC - 具有可为空属性的自定义属性错误消息](https://stackoverflow.com/questions/11134388/asp-net-mvc-custom-attribut-error-message-with-nullable-properties)

我可以替换整数字段的默认验证消息吗？我想本地化它。（对于 int：“字段 ID 必须是数字。”）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:52:07.427

您可以使用 ErrorMessageResourceName 属性：

```
[Required(ErrorMessageResourceName = "SomeResource")]
[StringLength(30, ErrorMessageResourceName = "SomeOtherResource")]
public string Name { get; set; } 
```

您可以查看此[博客文章](http://helios.ca/2010/02/17/asp-net-mvc-2-model-validation-with-localization/)作为示例。

对此作出回应

> 如何将其应用于整数验证？

首先，您如何验证整数？给我们看一些代码。

如果您使用的是正则表达式，请使用

```
 [RegularExpression("pattern", ErrorMessageResourceName = "SomeResource")] 
```

或者，如果您正在使用自定义属性，您可以以类似的方式使用它。

# facebook - 即使我添加了 OG:tags，Facebook 也无法抓取我的 Joomla 网站

> ID：13126886
> 
> 赞同：-1
> 
> 时间：2012-10-29T17:42:12.917
> 
> 标签：facebook, joomla, facebook-opengraph

我已指定所有 OG 标签，但 Facebook 仍然无法读取我的网站。怎么了？

这是我的 HEAD 部分

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
  <base href="http://www.mojadebica.pl/kryminalne/1392-akcja-trzezwy-poranek-na-podkarpaciu" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="robots" content="index, follow" />
  <meta name="keywords" content="Dębica, pizzerie, pizza, wyszukiwarka, jedzenie, na, wynos, dyżury, aptek, noclegi, reklama, strony www, portal, informacje, ogłoszenia, repertuar kin, oferty, pracy, forum, org, nasza" />
  <meta name="og:image" content="http://www.mojadebica.pl/images/thumbs/poranek.jpg" />
  <meta name="og:type" content="article" />
  <meta name="title" content="Akcja 'Trzeźwy poranek' na Podkarpaciu" />
  <meta name="og:title" content="Portal MojaDebica.pl" />
  <meta name="og:url" content="http://www.mojadebica.pl/kryminalne/1392-akcja-trzezwy-poranek-na-podkarpaciu" />
  <meta name="og:site_name" content="E-max" />
  <meta name="og:description" content="Moja Dębica - najnowsze informacje i aktualności z Dębicy. Największa baza ofert pracy, ogłoszenia z dębicy i okolic oraz wyszukiwarka pizzy!" />
  <meta name="description" content="Moja Dębica - najnowsze informacje i aktualności z Dębicy. Największa baza ofert pracy, ogłoszenia z dębicy i okolic oraz wyszukiwarka pizzy!" />
  <meta name="generator" content="Joomla! 1.5 - Open Source Content Management" />
  <title>Akcja &quot;Trzeźwy poranek&quot; na Podkarpaciu</title>
  <link href="/templates/back-to-nature/favicon.ico" rel="shortcut icon" type="image/x-icon" />
  <link rel="stylesheet" href="/media/system/css/modal.css" type="text/css" />
  <link rel="stylesheet" href="/components/com_k2/css/k2.css" type="text/css" />
  <link rel="stylesheet" href="/components/com_jcomments/tpl/default/style.css?v=12" type="text/css" />
  <script type="text/javascript" src="/media/system/js/mootools.js"></script>
  <script type="text/javascript" src="/media/system/js/modal.js"></script>
  <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
  <script type="text/javascript" src="/components/com_k2/js/k2.js"></script>
  <script type="text/javascript" src="/components/com_jcomments/js/jcomments-v2.1.js?v=7"></script>
  <script type="text/javascript" src="/components/com_jcomments/libraries/joomlatune/ajax.js?v=3"></script>
  <script type="text/javascript" src="/media/system/js/caption.js"></script>
  <script type="text/javascript">

        window.addEvent('domready', function() {

            SqueezeBox.initialize({});

            $$('a.modal').each(function(el) {
                el.addEvent('click', function(e) {
                    new Event(e).stop();
                    SqueezeBox.fromElement(el);
                });
            });
        });
var K2SitePath = '/';
  </script>

<link rel="stylesheet" href="/templates/system/css/system.css" type="text/css" />
<link rel="stylesheet" href="/templates/system/css/general.css" type="text/css" />
<link rel="stylesheet" href="/templates/mdnew/stylemd4.4.css" type="text/css" />
<link rel="shortcut icon" href="/templates/mdnew/favicon.ico" />    

<!--[if lte IE 6]>
<link href="/templates/back-to-nature/css/ieonly.css"  rel="stylesheet" type="text/css" />
<![endif]-->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-15391002-3']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>   

</head> 
```

这是示例文章：

[http://www.mojadebica.pl/video/1388-sonda-gdzie-jest-najlepsze-jedzenie-w-debicy-video-hd](http://www.mojadebica.pl/video/1388-sonda-gdzie-jest-najlepsze-jedzenie-w-debicy-video-hd)

缺少必需属性：“og:url”属性是必需的，但不存在。

但它在这里指定：

```
<meta name="og:url" content="http://www.mojadebica.pl/kryminalne/1392-akcja-trzezwy-poranek-na-podkarpaciu" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:56:40.743

您的问题在于您的网络服务器配置。

在您的响应标头中，您的服务器正在发送`Content-Encoding: none`. 这[是无效](http://validator.w3.org/check?uri=http%3A%2F%2Fwww.mojadebica.pl%2Fvideo%2F1388-sonda-gdzie-jest-najlepsze-jedzenie-w-debicy-video-hd&charset=%28detect+automatically%29&doctype=Inline&group=0)的。

那里可能有其他规则向[Facebook 解析器](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.mojadebica.pl%2Fvideo%2F1388-sonda-gdzie-jest-najlepsze-jedzenie-w-debicy-video-hd)发送`403: Forbidden`回复。

如果您使用 ISP 托管，请与他们联系以解决此问题。如果您正在滚动自己的服务器，则需要深入研究 LiteSpeed 文档。

# javascript - 无法在尝试的验证函数中访问 javascript 父函数 - 可能需要关闭

> ID：13126890
> 
> 赞同：0
> 
> 时间：2012-10-29T17:42:27.873
> 
> 标签：javascript, scope, closures

我正在尝试编写一个简单的函数来验证输入，但我无法访问父对象函数。

我**认为**问题在于我需要一个闭包，但由于我对 js 很陌生，而且我很难理解闭包，我想也许在我的代码中看到它在运行中可能会有所帮助，如果这确实是问题。

```
function validate(value, validator){

  if(validator == 'login_cred'){
    testName(value);
  }

  var test = {
    minLength: function (val, length) {
      return val.length >= length;
    }
  }

  function testName(value){
    if(!test.minLength(value, 5)){
      console.log('more chars please...');      
    }      
  }

}

//call
validate("str", 'login_cred'); 
```

当我调用该函数时，我得到*test is undefined*错误。

这是需要闭包的情况吗？..如果是这样，闭包在上面的代码中如何工作得最好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:46:34.603

不，变量在范围内，您不需要额外的闭包。只有您分配给使用它的调用`var test` *后。*`testName`将`test`对象（和`testName`声明）移到顶部：

```
function validate(value, validator) {
    function testName(value) {
        if (!test.minLength(value, 5)) {
            console.log('more chars please...');
        }
    }
    var test = {
        minLength: function (val, length) {
            return val.length >= length;
        }
    }
    if (validator == 'login_cred') {
        testName(value);
    }
}
//call
validate("str", 'login_cred'); 
```

当然，除非您在该函数中有更多代码，否则您应该将其减少到

```
function validate(value, validator) {
    if (validator == 'login_cred' && value.length < 5)
        console.log('more chars please...');
} 
```

:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T17:46:47.347

函数 testName 被提升。因此，您的代码实际上看起来像这样。

```
function validate(value, validator){

  function testName(value){
    if(!test.minLength(value, 5)){
      console.log('more chars please...');      
    }      
  }

  if(validator == 'login_cred'){
    testName(value);
  }

  var test = {
    minLength: function (val, length) {
      return val.length >= length;
    }
  }

}

//call
validate("str", 'login_cred'); 
```

如您所见， test 在调用时尚未声明，简单地将 testName 放在底部并不会改变这一点。只需将您的代码更改为此即可。

```
function validate(value, validator){

 var test = {
    minLength: function (val, length) {
      return val.length >= length;
    }
  }

  if(validator == 'login_cred'){
    testName(value);
  }

  function testName(value){
    if(!test.minLength(value, 5)){
      console.log('more chars please...');      
    }      
  }

}

//call
validate("str", 'login_cred'); 
```

# objective-c - NSUserDefaults 无法保存和读取我的自定义对象

> ID：13126891
> 
> 赞同：0
> 
> 时间：2012-10-29T17:42:29.183
> 
> 标签：objective-c, cocoa, nsuserdefaults, osx-mountain-lion, xcode4.5

我有一个实现 NSCoding 协议的类 Notification。
我有一个通知数组。我正在尝试使用 NSUserDefaults 保存通知。在我的应用程序委托通知中是一个包含通知对象的 NSMutableArray。这是我的应用程序委托：

```
+ (void) initialize
{
    NSUserDefaults* defaults=[NSUserDefaults standardUserDefaults];
    [defaults registerDefaults: [NSDictionary dictionaryWithObject: [NSKeyedArchiver archivedDataWithRootObject: [NSArray array]] forKey: @"notificationsData"]];
}

- (id) init
{
    self=[super init];
    if(self)
    {
        NSUserDefaults* defaults=[NSUserDefaults standardUserDefaults];
        NSData* notificationsData=[defaults objectForKey: @"notificationsData"];
        notifications= [[NSKeyedUnarchiver unarchiveObjectWithData: notificationsData]mutableCopy];
    }
    return self;
}

- (void) applicationWillTerminate:(NSNotification *)notification
{
    NSUserDefaults* defaults=[NSUserDefaults standardUserDefaults];
    NSData* notificationsData=[NSKeyedArchiver archivedDataWithRootObject: notifications];
    [defaults setObject: notificationsData forKey: @"notificationsData"];
} 
```

在 Notification 类中，文本和标题是 NSString 类型（都是读写），日期是 NSDate 类型（这也具有读写属性）。这就是我实现 NSCoding 协议的方式：

```
- (void) encodeWithCoder:(NSCoder *)aCoder
{
    [aCoder encodeObject: date forKey: @"date"];
    [aCoder encodeObject: title forKey: @"title"];
    [aCoder encodeObject: text forKey: @"text"];
}

- (id) initWithCoder:(NSCoder *)aDecoder
{
    self=[super init];
    if(self)
    {
        date=[aDecoder decodeObjectForKey: @"data"];
        title=[aDecoder decodeObjectForKey: @"title"];
        text=[aDecoder decodeObjectForKey: @"text"];
    }
    return self;
} 
```

所以我有这些问题：

1.  当应用程序终止时，当我尝试使用 NSKeyedArchiver 对文本进行编码时，我在 Notification 类中得到 EXC_BAD_ACCESS；
2.  通知不会被保存，并且当应用程序启动时数组总是长零。

更新：通过更多调试，我发现了应用程序崩溃的位置。还有更多代码可以查看（我正在使用表格视图来显示数据）：

```
- (NSInteger) numberOfRowsInTableView:(NSTableView *)tableView
{
    return [notifications count];
}

- (id) tableView:(NSTableView *)tableView objectValueForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row
{
    // Debug
    id obj=[[notifications objectAtIndex: row] valueForKey: [tableColumn identifier]];
    Class class=[obj class];
    // What you see above is just for debug purposes
    return [[notifications objectAtIndex: row] valueForKey: [tableColumn identifier]];
}

- (void) tableViewSelectionDidChange:(NSNotification *)notification
{
    NSInteger row=[tableView selectedRow];
    if(row >= 0 && row< [notifications count])
        [removeButton setEnabled: YES];
    else
        [removeButton setEnabled: NO];
} 
```

最后调用的方法是这样的：

```
- (id) tableView:(NSTableView *)tableView objectValueForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row; 
```

可能问题是数据以某种方式损坏并且此方法返回的值无效。无论如何应用程序不会在此方法中崩溃，而是在此方法之后。
如果我从用户默认值加载两个对象，则在崩溃之前只加载一个对象（因此该方法被调用一次）。
但是我仍然无法获得崩溃的真正原因。

更多代码：

```
- (IBAction) addNotification :(id)sender
{
    Notification* notification=[[Notification alloc]init];
    [notification setDate: [datePicker dateValue]];
    [notification setText: [textView string]];
    [notifications addObject: notification];
    [tableView reloadData];
}

- (IBAction)removeNotification:(id)sender
{
    [notifications removeObjectAtIndex: [tableView selectedRow]];
    [tableView reloadData];
} 
```

addNotification 和 removeNotification 都是由按钮触发的。

编辑：我发现我没有使用 ARC，但即使我打开它，应用程序也会崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:32:08.407

在行中：

```
date=[aDecoder decodeObjectForKey: @"data"]; 
```

`@"data"`与编码器键不匹配。你真的想要：

```
date=[aDecoder decodeObjectForKey: @"date"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T17:54:59.793

您可能需要调用 [NSUserDefaults synchronize] 因为当应用程序突然退出时它不会自动发生：

```
- (void) applicationWillTerminate:(NSNotification *)notification
{
    NSUserDefaults* defaults=[NSUserDefaults standardUserDefaults];
    NSData* notificationsData=[NSKeyedArchiver archivedDataWithRootObject: notifications];
    [defaults setObject: notificationsData forKey: @"notificationsData"];
    [defaults synchronize];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T15:27:20.930

你猜不出哪里出了问题：我的错，我忘记启用 ARC 并且一些对象在不应该的时候被释放了。

# jquery - 使用 jquery each 从表单中获取值并将其作为 ajax 请求发送

> ID：13126892
> 
> 赞同：2
> 
> 时间：2012-10-29T17:42:28.903
> 
> 标签：jquery, ajax

正如每个开发人员都希望的那样，我想让我的代码简短而简单。但有道理。

我有这个编辑配置文件字段，它有几个字段，大约 10 个文本框和 2 个单选按钮。

在一个简单的登录表单中，我可以像这样获取用户名和密码的值：

`$("#username")`并将`$("#password")` 它们分别赋值给一个变量`username` `password`，

那将变成这样：（在ajax中）

```
$.ajax({
    url : some_url,
    data: {
        username : username,
        password : password
    success : something
    }
}); 
```

但是如果我有多个字段怎么办，我不希望我的代码非常混乱，有所有这些任务。

所以我想出了一个基于输入ID的键值对的想法

```
var object;
$("#formUpdate:input").each(function(){
      var key = $(this).attr('id');
      var value = $(this).val();
      object.key = value;
}); 
```

问题，我错过了什么，但我无法让它工作，有没有更好的方法来做到这一点。你认为硬编码会好得多。

非常感谢你们！顺便说一句，今天是我的生日。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T17:46:40.433

您使用错误的语法向对象添加动态键。你需要括号符号`["string"]`

```
var obj = {};
$("#formUpdate :input").each(function(){ 
    var key = $(this).attr('id'); 
    var val = $(this).val(); 
    obj[key] = val; 
}); 
```

虽然你应该能够做到：

```
var obj = $("#formUpdate").serialzeArray(); 
```

假设您的输入也具有名称属性。

编辑：您的输入选择器中也缺少一个空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T17:45:56.607

您需要将它们作为键传递：**值：对**..试试这个

如果要存储为对象数组..

```
var arr = [];
$("#formUpdate :input").each(function() {
    arr.push( { $(this).attr('id') : $(this).val() }) ;
});​ 
```

# ajax - Zend Form：onchange select加载另一个视图内容

> ID：13126894
> 
> 赞同：1
> 
> 时间：2012-10-29T17:42:31.557
> 
> 标签：ajax, forms, zend-framework

在我的应用程序中，我在控制器/索引中有一个表单，它由 3 个选择框组成。当所有三个框都选择了一个值时，我需要根据这些选择值在同一视图中显示其他 html 和额外的表单选项。显而易见的解决方案似乎是对另一个处理数据库操作并创建视图并将该视图加载到控制器/index.phtml 的操作进行 ajax 调用

我已经能够通过使用以下方法在 index.phtml 中加载另一个操作的视图：

```
$('#select').change(function() {
    event.preventDefault();
    var id = $(this).attr('id');
    $('#results').show();
    $('#results').load('/controller/index/' + $(this).attr('value'));
    return false;
}); 
```

但是我需要传递所有三个选择框的变量，为此我交替使用：

```
$('#select1').change(function() {
var select1     = $('#select1').val();
var select2     = $('#select2').val();
var select3     = $('#select3').val();
$.ajax({
    type: 'POST',
    dataType: 'json',
    url: '/controller/index/',
    data: { select1: select1, select2: select2, select3: select3},
    success: function(result){
                var return1 = result.return1;
                var return2 = result.return2;
         }
    });

}); 
```

就我确实看到标头中传递的变量并且响应包含视图而言，最后一种方法起作用，但是我无法修复它，即仅将 ajax 视图的内容放置在索引视图中。（当然，通过不使用 AjaxContent 切换，将加载 ajax 视图，但其中也包括完整的布局。）我在 ajax 操作或 ajax 视图中回显的任何内容都不会显示在索引视图中。任何指针都会非常受欢迎

**编辑**

ajax 动作现在看起来像

```
$this->view->layout()->disableLayout();
$this->_helper->viewRenderer->setNoRender(true);

$select1 = $this->_request->getParam('select1');
$select2 = $this->_request->getParam('select2');
$select3 = $this->_request->getParam('select3');

// DO THE OTHER STUFF AND LOGIC HERE

$results = array(
 'return1' => 'value1',
 'return2' => 'value2'
);

$this->_response->setBody(json_encode($results)); 
```

和控制器初始化

```
public function init() {
$ajaxContext = $this->_helper->getHelper('AjaxContext');
$ajaxContext->addActionContext('ajax', 'json')->initContext();
} 
```

所以一切正常，我可以在浏览器中使用开发人员工具（网络）查看响应中的返回值，但是我只是不知道如何使用它来“更新”视图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T20:02:04.647

你可以做两件事：

*   您可以启用通过 ajax 调用的操作的布局。看到您已禁用布局，因此即使 ajax 操作的视图 phtml 文件包含某些内容，它也不会显示。您可以启用布局，使用 text/html dataType 代替`json`并在某处显示返回的 HTML。
*   或者，在`success`ajax 调用的情况下，编写 javascript 代码来更新 DOM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:23:40.687

感谢@Salman 的建议，因为它们引导我朝着正确的方向前进，我设法解决了这个问题。我设法通过 ajax .load() 调用传递多个参数，方法是将它们作为 get 参数传递。然后可以在 ajax.ajax.phtml 视图中格式化 ajaxAction 的结果，并在选择框所在的 index.phtml 中的 #results div 中连续显示。

### 控制器/index.phtml

```
<div id="results" style="display:block;">Select all three values</div> 
```

### IndexController 初始化和 ajaxAction

```
public function init() {
    $ajaxContext = $this->_helper->getHelper('AjaxContext');
    $ajaxContext->addActionContext('ajax', 'html')->initContext('html');
}

public function ajaxAction() {

    $select1    = $this->_request->getQuery('select1');
    $select2    = $this->_request->getQuery('select2');
    $select3    = $this->_request->getQuery('select3');

    $form   = new Application_Form();

    // Database operations and logic

    $this->view->form       = $form;
    $this->view->array      = $somearray;
    } 
} 
```

### index.phtml 中的 jquery 脚本

```
$(document).ready(function(){

    $('.selector').change(function() {
        var select1 = $('#select1').val();
        var select2 = $('#select2').val();
        var select3 = $('#select3').val();
        if ( select1 && select2 && select3) {
            $('#results').show();               
            $('#results').load('/controller/ajax?select1=' + select1 + '&select2=' + select2 + '&select3=' + select3);
        }
    });

}); 
```

### 控制器/ajax.ajax.phtml

```
<?php if ( $this->array ) : ?>
    <?php echo( $this->form ); ?>
<?php else: ?>
    Nothing found for selected values
<?php endif ?> 
```

# wordpress - wordpress 帖子列表

> ID：13126895
> 
> 赞同：1
> 
> 时间：2012-10-29T17:42:34.680
> 
> 标签：wordpress, posts

我找到了这段代码：

```
<?php
$myposts = get_posts('');
foreach($myposts as $post) :
setup_postdata($post);
?>
  <div class="post-item">
<div class="post-info">
  <h2 class="post-title">
  <a href="<?php the_permalink() ?>" title="<?php the_title_attribute(); ?>">
  <?php the_title(); ?>
  </a>
  </h2>
  <p class="post-meta">Posted by <?php the_author(); ?></p>
</div>
<div class="post-content">
<?php the_content(); ?>
</div>
  </div>
<?php comments_template(); ?>
<?php endforeach; wp_reset_postdata(); 
?> 
```

这是显示帖子的好方法吗？因为它显示了，但是如果我单击某个帖子，它会再次显示所有帖子但带有评论..是否可以仅显示我单击的主题？

（或者如果你有更好的代码来显示帖子，请写在这里）

# iphone - iOS 6 中的 LED 照明

> ID：13126903
> 
> 赞同：-4
> 
> 时间：2012-10-29T17:43:20.903
> 
> 标签：iphone, cocoa-touch, ios6, led

谁能告诉我如何使用以下方法的示例：

```
 (BOOL)setTorchModeOnWithLevel:(float)torchLevel error:(NSError **)outError 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T20:10:46.130

在此处查看 Apple 的参考资料：[AVCaptureDevice](http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVCaptureDevice_Class/Reference/Reference.html)

首先导入 AVFoundation 并将[其添加到构建阶段。](https://developer.apple.com/library/ios/#recipes/xcode_help-project_editor/Articles/AddingaLibrarytoaTarget.html#//apple_ref/doc/uid/TP40010155-CH17-SW1)

```
#import <AVFoundation/AVFoundation.h> 
```

然后使用以下代码：

```
//Get all devices (front and back camera)
for (AVCaptureDevice *device in [AVCaptureDevice devices]) {

    if ([device position] != AVCaptureDevicePositionBack) {
        NSLog(@"This is the front camera");
        continue; // go to next device
    }

    NSLog(@"This is the back camera");

    if([device hasTorch] == NO){
        NSLog(@"this camera has no torch...");
        continue; // go to next device
    }

    NSLog(@"The camera has a torch");

    if([device isTorchAvailable] == NO){
        NSLog(@"The torch is not available...");
        continue; // go to next device
    }

    NSLog(@"The torch is available");

    //get device dependent maximum (between 0 and 1)
    float level = AVCaptureMaxAvailableTorchLevel;

    NSError* outError;
    BOOL success = [device setTorchModeOnWithLevel:level error:&outError];

    if(!success){
        NSLog(@"Could not activate torch: %@", [outError localizedDescription]);
        continue; // go to next device
    }

    NSLog(@"The torch is now active!");
} 
```

# c++ - Boost.log：分别在控制台或输出文件中没有输出

> ID：13126905
> 
> 赞同：2
> 
> 时间：2012-10-29T17:43:24.317
> 
> 标签：c++, boost, mingw, eclipse-cdt, boost-log

我已经使用 mingw-4.7 在 Windows 7 下成功下载并编译了来自 svn 的 boost.log 源。IDE：带有 CDT 的 eclipse-juno。

整个 boost-sources（包括相应文件夹中的 boost.log）的编译字符串是：

**“bjam --build-type=complete mc-compiler=windmc”**

作为输出，我收到了“ **libboost_log-mgw47-1_51”和“libboost_log_setup-mgw47-mt-1_51** ”。

但是，在运行下面的 boost.log 文档中的简单示例代码时，我看不到任何输出。

```
#include <boost/log/core.hpp> 
#include <boost/log/trivial.hpp> 
#include <boost/log/utility/init/to_console.hpp> 
#include <iostream> 

using namespace boost::log; 

int main(int argc, 
const char* argv[]) {

init_log_to_file();

BOOST_LOG_TRIVIAL(trace) << "A trace severity message"; 
BOOST_LOG_TRIVIAL(debug) << "A debug severity message";
BOOST_LOG_TRIVIAL(info) << "An informational severity message";
BOOST_LOG_TRIVIAL(warning) << "A warning severity message";
BOOST_LOG_TRIVIAL(error) << "An error severity message"; 
BOOST_LOG_TRIVIAL(fatal) << "A fatal severity message";

return 0; 
} 
```

这同样适用于以下代码片段：

```
#include <boost/log/core.hpp> 
#include <boost/log/trivial.hpp> 
#include <boost/log/utility/init/to_console.hpp> 
#include <boost/log/utility/init/to_file.hpp>
#include <iostream> 

using namespace boost::log; 

int main(int argc, 
const char* argv[]) {

init_log_to_file("sample.log");

BOOST_LOG_TRIVIAL(trace) << "A trace severity message"; 
BOOST_LOG_TRIVIAL(debug) << "A debug severity message";
BOOST_LOG_TRIVIAL(info) << "An informational severity message";
BOOST_LOG_TRIVIAL(warning) << "A warning severity message";
BOOST_LOG_TRIVIAL(error) << "An error severity message"; 
BOOST_LOG_TRIVIAL(fatal) << "A fatal severity message";

return 0; 
} 
```

有人可以给我一个提示，为什么我在控制台上什么都看不到吗？

非常感谢提前，

德高

# javascript - 根据滑块内容更改多个元素内容/背景

> ID：13126909
> 
> 赞同：0
> 
> 时间：2012-10-29T17:43:36.803
> 
> 标签：javascript, jquery, html, css

我使用 Photoshop 制作了一个页面模拟设计的图像，因此您可以直观地看到我想要实现的目标。

请在尝试回答时查看此问题末尾的图像。

**更新** 的问题：此时我没有代码，我想知道是否有人可以指出我正确的方向。我正在使用 Ruby on Rails 制作一个在线应用程序。此时我不担心Rails方面，我首先要征服JQuery。我有六种调味汁，每一种都有名字、图片和描述。我要实现的是页面从如图所示的酱一开始，当点击右箭头时，酱一号变成酱二，图片发生变化，相关描述也发生变化（即酱二的描述.

我的主要问题是我不知道如何在两个箭头之间放置相关内容，然后在按下箭头时让它们发生变化。即用户可以单击右箭头一次，我可以更改内容，但是我如何设置jQuery，以便当第二次单击箭头时，它变成第二个酱，第三次成为第三个酱等等，按照时间顺序，所以当他们点击后退箭头时，它会转到当前的酱汁之前。

简而言之，一切都是**动态**发生的，**并不是**说我已经准备好 div，而 JQuery 只是截断它们（即不是 Jquery div 滑块）。

这是图像：

![图片](../Images/d2cd22d49c969dccf6c14284f37c9155.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T19:04:13.560

我建议使用一个已经制作好的 jQuery 滑块，比如这个：

[http://basic-slider.com/](http://basic-slider.com/)

对于滑块中使用的每个 li，都有一个带有图像和描述的 div。您需要稍微修改一下滑块 css，但我认为这比自己制作滑块要容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T18:23:27.887

这些是使用 jquery 实现所需功能的良好开端：

动画：[http ://api.jquery.com/animate/](http://api.jquery.com/animate/)

捕获点击：[http ://api.jquery.com/click/](http://api.jquery.com/click/)

显示/隐藏元素：[http :](http://api.jquery.com/hide/) [//api.jquery.com/show/ http://api.jquery.com/hide/](http://api.jquery.com/show/)

设置元素的html：http: [//api.jquery.com/html/](http://api.jquery.com/html/)

如果您对这些功能的任何特定问题有任何疑问，您可以再次提问或搜索 Stackoverflow，您可能已经回答了任何问题。

# python - 如何从 Python 运行 Instruments？

> ID：13126910
> 
> 赞同：-1
> 
> 时间：2012-10-29T17:43:38.970
> 
> 标签：python, instruments, ios-ui-automation, xcode-instruments

有人知道如何从 Python 运行 Instruments 吗？我厌倦了使用 os.system 并且它不起作用。

如果我从命令行运行 Instruments，我只需要运行：

```
instruments -w id -t xxxxxxxxxxxxxx xx.js 
```

我将需要在 python 中运行上述内容。我想以下将起作用

```
import os
os.system('instruments -w id -t xxxxx xx.js') 
```

我也试过 os.system ('open -a instruments xxxxxx')

两种方法都没有奏效。有人有更好的主意吗？

我希望它能够像从命令行运行它一样运行仪器。并开始使用仪器运行 javascritps。它没有发生。所发生的只是打印出来的 256。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T19:44:59.890

很难从您的代码片段中分辨出来，因为您可能已经删减了很多内容，但看起来您错误地调用了仪器命令。这是一个断行的例子：

```
instruments \
  -D [trace document to write] \
  -t [Automation Trace Template] \
  [Your App Bundle] \
  -e UIARESULTSPATH [where results should be written] \
  -e UIASCRIPT [your actual script file 
```

有关如何从命令行运行 Instruments 的完整示例，请查看我的[演示存储库](https://github.com/jonathanpenn/AutomationExample/blob/master/run_automation.sh)。

它有一个 shell 脚本，介绍了如何从命令行调用 Instruments。您可以将其用作从 Python 启动的基础。

此外，我还附上了我的`unix_instruments`包装脚本的副本。如果自动化脚本记录失败，Instruments 不会返回非零状态代码，因此此包装脚本会密切关注所有日志输出并为您返回非零状态代码。如何使用它也在 repo 中。

# stream - 在 Genlex 中跟踪位置

> ID：13126914
> 
> 赞同：2
> 
> 时间：2012-10-29T17:44:02.077
> 
> 标签：stream, ocaml

我正在为一种语言编写一个解析器，该语言对于`Genlex`+`camlp4`流解析器来说足够简单来处理它。但是，在解析错误的情况下，我仍然对拥有或多或少精确的位置（即至少一个行号）感兴趣。

`char Stream`我的想法是在 original和`token Stream`of之间使用中间流`Genlex`，它负责处理行数，就像下面的代码一样，但我想知道是否有更简单的解决方案？

```
let parse_file s =
  let num_lines = ref 1 in
  let bol = ref 0 in
  let print_pos fmt i =
    (* Emacs-friendly location *)
    Printf.fprintf fmt "File %S, line %d, characters %d-%d:" 
      s !num_lines (i - !bol) (i - !bol)
  in
  (* Normal stream *)
  let chan = 
    try open_in s
    with
      Sys_error e -> Printf.eprintf "Cannot open %s: %s\n%!" s e; exit 1
  in
  let chrs = Stream.of_channel chan in
  (* Capture newlines and move num_lines and bol accordingly *)
  let next i =
    try
      match Stream.next chrs with
       | '\n' -> bol := i; incr num_lines; Some '\n'
       | c -> Some c
   with Stream.Failure -> None
  in
  let chrs = Stream.from next in
  (* Pass that to the Genlex's lexer *)
  let toks = lexer chrs in
  let error s =
    Printf.eprintf "%a\n%s %a\n%!"
      print_pos (Stream.count chrs) s print_top toks;
    exit 1
  in
  try
    parse toks
  with
    | Stream.Failure -> error "Failure"
    | Stream.Error e -> error ("Error " ^ e)
    | Parsing.Parse_error -> error "Unexpected symbol" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:25:34.463

一个更简单的解决方案是使用[Camlp4 语法](http://caml.inria.fr/pub/docs/tutorial-camlp4/tutorial003.html)。

以这种方式构建的解析器允许人们“免费”获得体面的错误消息，这与流解析器（这是一种低级工具）的情况不同。

可能不需要定义您自己的词法分析器，因为 OCaml 的词法分析器已经适合您的需求。但是如果你真的需要你自己的词法分析器，那么你可以很容易地插入一个自定义的：

```
module Camlp4Loc = Camlp4.Struct.Loc
module Lexer = MyLexer.Make(Camlp4Loc)
module Gram = Camlp4.Struct.Grammar.Static.Make(Lexer)

open Lexer

let entry = Gram.Entry.mk "entry"

EXTEND Gram
  entry: [ [ ... ] ];
END

let parse str =
   Gram.parse rule (Loc.mk file) (Stream.of_string str) 
```

如果您是 OCaml 的新手，那么所有这些模块系统的诡计一开始可能看起来像是黑色巫术 :-) Camlp4 是一个严重缺乏记录的野兽这一事实也可能有助于体验的超现实性。

因此，请不要犹豫，在[邮件列表](https://groups.google.com/forum/?fromgroups#!forum/fa.caml)中提出问题（甚至是愚蠢的问题） 。

# css - 我可以设置 textarea 的调整大小抓取器的样式吗？

> ID：13126917
> 
> 赞同：52
> 
> 时间：2012-10-29T17:44:11.973
> 
> 标签：css, resize, textarea

我的设计师刚刚给了我带有样式调整大小抓取器的文本区域的设计。问题是：我可以设计它吗？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-04-28T13:44:56.987

`::-webkit-resizer`WebKit 为它自动添加到元素右下角的调整大小控件提供了伪`textarea`元素。

可以通过应用`display: none`或隐藏它`-webkit-appearance: none`：

```
::-webkit-resizer {
  display: none;
}
```

```
<textarea></textarea>
```

这在 OS X 上的 Chrome 26 中显示如下：

![这在 OS X 上的 Chrome 26 中显示如下：](../Images/68faa23d3b9557ecaa04804bb9d2bb0f.png)

*注意：添加`display: none`到`::-webkit-resizer`实际上并不能阻止用户调整文本区域的大小，它只是隐藏了控件。如果要禁用调整大小，请将`resize`CSS 属性设置为`none`. 这也隐藏了控件，并具有在支持调整文本区域大小的所有浏览器中工作的额外好处。*

`::-webkit-resizer`伪元素还允许一些基本的样式。如果您认为调整大小控件可以使用更多颜色，您可以添加以下内容：

```
::-webkit-resizer {
  border: 2px solid black;
  background: red;
  box-shadow: 0 0 5px 5px blue;
  outline: 2px solid yellow;
}
```

```
<textarea></textarea>
```

这在 OS X 上的 Chrome 26 中显示如下：

![这在 OS X 上的 Chrome 26 中显示如下：](../Images/bbf3a2a81a4af38a0ccf9703a1901237.png)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2017-03-18T01:56:07.860

您可以使用一些标记创建“自定义”句柄，而不是将 CSS 应用于`::-webkit-resizer`（在 Chrome 56 或 FireFox 51 中似乎不起作用）。我在谷歌搜索后找到了这个例子：

[自定义 CSS3 TextArea 调整大小句柄](http://jsfiddle.net/MM94f/)

复制标记以防将来出现死链接：

```
<div class="wrap">
  <div class="pull-tab"></div>
  <textarea placeholder="drag the cyan triangle..."></textarea>
</div> 
```

还有示例中的 CSS - 当然，您可以应用任何您喜欢的样式：

```
textarea {
    position: relative;
    margin: 20px 0 0 20px;
    z-index: 1;
}
.wrap {
    position: relative;
    display: inline-block;
}
.wrap:after {
    content:"";
    border-top: 20px solid black;
    border-left: 20px solid transparent;
    border-right: 20px solid transparent;
    -webkit-transform: rotate(-45deg);
    z-index: 1;
    opacity: 0.5;
    position: absolute;
    right: -18px;
    bottom: -3px;
    pointer-events: none;
}
.pull-tab {
    height: 0px;
    width: 0px;
    border-top: 20px solid cyan;
    border-left: 20px solid transparent;
    border-right: 20px solid transparent;
    -webkit-transform: rotate(-45deg);
    position: absolute;
    bottom: 0px;
    right: -15px;
    pointer-events: none;
    z-index: 2;
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2020-08-13T15:14:44.260

```
textarea::-webkit-resizer {
  border-width: 8px;
  border-style: solid;
  border-color: transparent orangered orangered transparent;
}
```

```
<textarea/>
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-07-15T07:07:22.850

为什么不只显示背景图像？ [http://jsfiddle.net/1n0d529p/](http://jsfiddle.net/1n0d529p/)

```
textarea {
  background: url(https://image.flaticon.com/icons/svg/133/133889.svg)no-repeat rgba(71, 108, 193, 0.52) 99.9% 100%;
  background-size: 12px;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-08-20T12:33:48.107

我设法这样做了：

```
.textarea-container:before {
    content: '';
    background-image: url(svg/textarea-resize.svg);
    background-size: 16px;
    background-repeat: no-repeat;
    position: absolute;
    width: 20px;
    height: 20px;
    bottom: 2px;
    right: 0;
    pointer-events: none;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-13T17:02:37.520

使用@HorusKol 的方法为 textarea 的大小调整抓取器设置样式

[代码笔网址](https://codepen.io/aadeshkulkarni/pen/eYRRQem)

```
textarea {
    /* Ignore this part of code - basic textarea formatting */
    margin-top: 20px;
    margin-left: 20px;
    width:300px;
    padding:20px;
    border:1px solid #CCC;
    border-radius: 4px;
    /* Comment below line to resize horizontal + vertical */
    resize:vertical 
    /* Step 1 */
    position: relative;
}
    /* Step 2 */
.wrap {
    position: relative;
    display: inline-block;
}
    /* Step 3 - - Sets the 1st line of resize icon */
.wrap:after {
    content:"";
    border-top: 2px solid #555;
    width:16px;
    transform: rotate(-45deg);
    background:transparent;
    position: absolute;
    right: 1px;
    bottom: 14px;
    pointer-events: none;
    border-radius:25%;
}
    /* Step 4 - Sets the 2nd line of resize icon */
.pull-tab {
    border-top: 2px solid #555;
    width:10px;
    transform: rotate(-45deg);
    position: absolute;
    bottom: 10px;
    right: 1px;
    pointer-events: none;
    border-radius:25%;
}
    /* Step 5 - Removes the default resizer grabber icon */
::-webkit-resizer{
  display:none;
}
```

```
<div class="wrap">
    <div class="pull-tab"></div>
    <textarea placeholder="Customized resizer grabber...">
    </textarea>
</div>
```

# c++ - 在 C++ 中优化 if-else 分支的小循环

> ID：13126928
> 
> 赞同：0
> 
> 时间：2012-10-29T17:44:46.330
> 
> 标签：c++, optimization, iterator

是否可以在以下循环中删除分支。所有迭代器都来自容器类型`std::map<type_name, T>`

```
 record_iterator beginIter = lastLookup_;                                                                                                                                                                                                                                                                                                                             
  record_iterator endIter = lastLookup_;                                                                                                                                                                                                                                                                                                                               
  ++endIter;                                                                                                                                                                                                                                                                                                                                                           
  for(;endIter != end(); ++beginIter, ++endIter){                                                                                                                                                                                                                                                                                                                      
    time_type now = beginIter->first;                                                                                                                                                                                                                                                                                                                                  
    if(ts == now){                                                                                                                                                                                                                                                                                                                                                     
      lastLookup_ = beginIter;                                                                                                                                                                                                                                                                                                                                         
      return beginIter;                                                                                                                                                                                                                                                                                                                                                
    }else if(ts > now && ts <= endIter->first){                                                                                                                                                                                                                                                                                                                        
      lastLookup_ = beginIter;                                                                                                                                                                                                                                                                                                                                         
      return endIter;
    }
  } 
```

该算法试图解决的问题是优化前向查找，该位置被假定为与上次查找的位置相同或（不太远）向前。理想情况下，我保留了上次查找位置的迭代器，并线性前进。但这似乎具有相同的性能，

```
 record_iterator it= sliceMap_.find(ts);                                                                                                                                                                                                                                                                                                                              
  if(it !=end()){                                                                                                                                                                                                                                                                                                                                                      
    return it;                                                                                                                                                                                                                                                                                                                                                         
  }else{                                                                                                                                                                                                                                                                                                                                                               
    return sliceMap_.upper_bound(ts);                                                                                                                                                                                                                                                                                                                                  
  } 
```

我觉得问题出在分支上，所以可以在这段代码中删除分支，这样我就可以分析速度的不同了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T18:21:05.407

第一种方法存在三个大问题：

*   循环内的比较太多。
*   在 a 上使用迭代器`std::map`涉及 using `std::map<>::iterator::operator++()`，这并不是很快。查看从第 62 行开始的实现：http: [//gcc.gnu.org/onlinedocs/libstdc++/libstdc++-html-USERS-3.4/tree_8cc-source.html](http://gcc.gnu.org/onlinedocs/libstdc++/libstdc++-html-USERS-3.4/tree_8cc-source.html)。
*   在 a 上使用迭代器`std::map`是一种线性搜索。在地图上搜索应该是对数的。

你的第二种方法也有问题。您正在搜索两次。

你为什么不直接使用

```
return sliceMap_.lower_bound(ts); 
```

这应该完全符合您对一次对数搜索的要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T18:21:10.113

正如一些人所说，第一种方法没有多大意义，因为您正在对有序容器进行线性搜索。我意识到该位置应该在*lastLookup附近*

关于第二种方法，我认为一个简单的优化将消除第二次查找。你正在做一个**record_iterator it= sliceMap_.find(ts);** 另一个**返回 sliceMap_.upper_bound(ts);**

编辑：
尝试这样做：

```
record_iterator it = sliceMap_.lower_bound(ts);                                                                                                                                                                                                                                                                                                                              
return it; 
```

我们在那里所做的是，使用 lower_bound() 来查找其键不小于 ts 的第一个元素（其中包括一个等于 upper_bound() 不做的元素）。

# javascript - ExtJs 4.0 MVC 教程给出

> ID：13126936
> 
> 赞同：0
> 
> 时间：2012-10-29T17:45:09.323
> 
> 标签：javascript, extjs4

我是 ExtJs 的新手，我正在尝试遵循本教程：

[http://docs.sencha.com/ext-js/4-0/#!/guide/application_architecture](http://docs.sencha.com/ext-js/4-0/#!/guide/application_architecture)

但是，当我到达实际假设网格变得可见的部分时，我在 Javascript 控制台中收到一条错误消息：“类型错误：名称未定义”。

我有以下文件，

应用程序.js：

```
Ext.application({
    name: 'AM',

    appFolder: 'app',
    controllers: ['Users'],

    launch: function() {
        Ext.create('Ext.container.Viewport', {
            layout: 'fit',
            items: {
                xtype: 'userList'
            }
        });
    }
}); 
```

应用程序/控制器/Users.js

```
Ext.define('AM.controller.Users', {
    extend: 'Ext.app.Controller',
    views: [
        'user.List'],

    init: function() {
        this.control({
            'viewport > panel': {
                render: this.onPanelRendered
            }
        });
    },

    onPanelRendered: function() {
        console.log('This panel was rendered');
    }
}); 
```

应用程序/视图/用户/List.js

```
Ext.define('AM.view.user.List' ,{
    extend: 'Ext.grid.Panel',
    alias : 'widget.userlist',

    title : 'All Users',

    initComponent: function() {
        this.store = {
            fields: ['name', 'email'],
            data  : [
                {name: 'Ed',    email: 'ed@sencha.com'},
                {name: 'Tommy', email: 'tommy@sencha.com'}
            ]
        };

        this.columns = [
            {header: 'Name',  dataIndex: 'name',  flex: 1},
            {header: 'Email', dataIndex: 'email', flex: 1}
        ];

        this.callParent(arguments);
    }
}); 
```

当然还有 Index.html

```
<html>
<head>
    <title>Hello Ext</title>

    <link rel="stylesheet" type="text/css" href="ExtJs/ext-4.1.1a/resources/css/ext-all.css">
    <script type="text/javascript" src="ExtJs/ext-4.1.1a/ext-debug.js"></script>
    <script type="text/javascript" src="app.js"></script>
</head>
<body></body>
</html> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:05:55.340

你改变了情况：

```
xtype: 'userList'

alias : 'widget.userlist' 
```

# java - lingpipe - 如何将令牌和命名实体提取到单个列表中

> ID：13126948
> 
> 赞同：0
> 
> 时间：2012-10-29T17:45:45.290
> 
> 标签：java, tokenize, named-entity-recognition

我正在开发一个需要从文本中提取标记的项目。此令牌还应包含命名实体。

例如，文本：

```
 50 Cent is almost irrelevant to hiphop 
```

我想要的输出

```
50 Cent
is
almost 
irrelevant
to
hiphop 
```

我可以使用 LingPipe 进行令牌提取，但我不知道如何使用基于精确字典的分块方法来获得我想要的输出。关于如何去做的想法/例子将不胜感激。

# javascript - 是否可以使用基于浮动 ul 高度的变量设置 div 的最小高度？

> ID：13126949
> 
> 赞同：2
> 
> 时间：2012-10-29T17:45:43.433
> 
> 标签：javascript, jquery, css

我有一个 ul 向左浮动，它是它旁边的容器 div 的垂直选项卡导航。容器 div 填充了与 ul 具有 li 相同数量的 div。基本上，我需要从 ul (.selector) 的高度计算容器 div (.selector-content) 的最小高度。由于我的页面上有几个这种排列的实例，如果每个 div 都可以根据它对应的 ul 调整大小，那就太好了。ul 和 div 都在手风琴的面板中。该功能来自 jQuery 中的选项卡。如果有一个 jQuery 函数可以做到这一点，那就太好了。有任何想法吗？

```
<html>
<head>
</head>
<body>    
<div class="accordion">
 <p class="ac-head current">Panel 1</p>
  <div class="panel">
   <ul class="selector">
    <li>Tab 1</li>
    <li>Tab 2</li>
    <li>Tab 3</li>
    <li>Tab 4</li>
    <li>Tab 5</li>
   </ul>
  <div class="selector-content">
   <div class="content">Tab 1 Content</div>
   <div class="content">Tab 2 Content</div>
   <div class="content">Tab 3 Content</div>
   <div class="content">Tab 4 Content</div>
   <div class="content">Tab 5 Content</div>
  </div> <!-- Close selector-content -->
 </div> <!-- Close panel -->
</div> <!-- Close accordion -->    
</body>
</html 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:46:59.527

您是否尝试过简单的：？

```
$("div.panel").css({ "min-height": $("ul.selector").height() }); 
```

# date - 将日期转换为具有特定格式的字符串时，是否需要提供 IFormatProvider？

> ID：13126952
> 
> 赞同：0
> 
> 时间：2012-10-29T17:45:51.777
> 
> 标签：date, formatting, fxcop, iformatprovider

如果我使用这个：

```
DateTime.Now.Date.ToString("yyyy-MM-dd") 
```

FXCop 抱怨我违反了 CA1305 并说我应该提供一个 IFormatProvider。我需要吗？无论如何，我要求以特定格式提供日期（这是我希望将其放入 XML 的格式）。

提供格式提供程序会有什么不同吗？在这种情况下，它实际上会产生错误的结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:06:56.663

为什么不想指定格式提供程序？

如果只是懒惰，那么我可以建议定义两个片段。**CultureInfo.InvariantCulture 的ic**和 CultureInfo.CurrentCulture 的**cc**。

永远不要假设转换为字符串如何使用默认文化。并非世界上每个人都使用公历。有一天，您的客户可能会聘请承包商，其计算机默认使用另一个日历，然后您没有生成正确的 XML。然后向您的客户解释您不想遵循 FxCop 的建议。

* * *

如果 .Net 包含 Xml 文化，那就最好不过了。然后你可以做

```
DateTime.Today.ToString("d", CultureInfo.Xml) 
```

出于某种原因，Microsoft 选择创建一个单独的类而不是[XmlConvert](http://msdn.microsoft.com/en-us/library/system.xml.xmlconvert.aspx)。自 .Net 1.0 以来，该课程一直存在。

```
XmlConvert.ToString(DateTime.Today, "yyyy-MM-dd") 
```

将始终创建正确的 Xml 日期。

不确定这是错误还是预期行为，但`XmlConvert.ToString(DateTime.Today, "d")`不会创建有效的 Xml 日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T19:43:43.843

因此，经过更多研究，在我的例子中似乎没有任何区别，但在一般情况下，月份可能会显示在特定的语言环境中。

更多细节在这里：

[http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

# php - APC 缓存文件但不缓存用户变量

> ID：13126954
> 
> 赞同：0
> 
> 时间：2012-10-29T17:46:00.083
> 
> 标签：php, caching, apc

出于某种原因，APC 会自动缓存文件，但在使用 apc_add 或 apc_store 时拒绝缓存用户变量。

我已经发布了 APC 和 phpinfo() 相关的屏幕截图。我最近更改了 PHP session.save_path; 这可能与它有关吗？新的缓存目录可以很好地保存文件。

![在此处输入图像描述](../Images/5e851a4fb07feda3af66de8e11e2487b.png)

![在此处输入图像描述](../Images/36bda8f769a364c6f84ae7504e5ee31c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:57:35.453

D'oh.. 问题与 cURL 请求导致的错误缓存代码有关。对不起！这是将来用于其他人的代码测试：

```
$key = '1122334455';

if (apc_exists($key)) {
    echo "Key exists: "; 
    echo apc_fetch($key);
    }
    else {
    echo "Key NON-existent.";
    echo apc_add($key, true, 2700);
} 
```

# c++ - Keil uVision4 armcc：使用 C++ 标准包括

> ID：13126957
> 
> 赞同：2
> 
> 时间：2012-10-29T17:46:11.653
> 
> 标签：c++, include, stm32, keil

我正在使用 Keil uVision4 在 STM32F2 设备上进行开发。我正在尝试使用 C++，这应该可以使用 uVision 工具链提供的 armcc（如果我错了，请纠正我）。但是uVision拒绝接受标准的C++包含方式

```
 #include <cstdint> 
```

不工作，而

```
 #include <stdint.h> 
```

完美运行。当我在 uVision（右键单击，打开文档）中打开 cstdint 时，它会打开文件，但是作为通用文件，例如不是作为头文件，没有花哨的颜色。

我错过了什么？这两个文件都在同一个文件夹 C:\Keil\ARM\ARMCC\include 中，我是否强制编译器使用 c++（通过附加 --cpp）没有任何区别。uVision 只是无法接受没有结尾的文件作为头文件吗？

编辑：响应答案（感谢您的宝贵时间！）：错误消息将是：

```
 #include <cstdint> and
    #include <cstdint.h>
    typedef uint32_t u32;
    error: #20: identifier uint32_t is undefined 
```

尽管

```
 #include <stdint.h> and
    #include <stdint>
    typedef uint32_t u32;
    and 
    #include <cstdint> 
    typedef std::uint32_t u32;
    works perfectly. 
```

这表明了问题所在。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:03:34.647

你有什么症状不工作？即错误信息是什么？可能您只需要一个`using namespace std`, 或在所有类型前面加上 std:: 前缀，因为`cstdint`标头将其声明放在`std`命名空间中。

但是请注意，这`cstdint`是一个非常新的头文件，您的编译器可能不支持。所以你可能不得不接受`stdint.h`，这同样好。

# c# - 根据日期更改列表颜色

> ID：13126959
> 
> 赞同：0
> 
> 时间：2012-10-29T17:46:17.167
> 
> 标签：c#, asp.net, datalist, textcolor

我有一个在加载时绑定的 DataList，它工作得非常好。我的问题是如何使它以不同的文本颜色显示数据库中没有日期的记录？这是我的代码：

```
<asp:DataList ID="dlS" runat="server" EnableViewState="false">
 <ItemTemplate>
<asp:Label ID="Label" runat="server" Text='<%# Eval("Name") %>' /><br />
 </ItemTemplate>
</asp:DataList> 
```

* * *

```
Guid ID = (Guid)Session["ID"];

lstL = Manager.Get_ByID(ID);

if (lstLetters != null)
{
   dlS.DataSource = lstL;
   dlS.DataBind();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:59:58.640

我不确定“数据库中没有日期的记录”的真正含义，但如果这意味着这些记录的日期为 NULL 值，那么您可以重写标签如下：

```
<asp:Label ID="Label" runat="server" Text='<%# Eval("Name") %>' ForeColor='<%# Eval("DateValue") == System.DBNull ? System.Drawing.Color.Red : System.Drawing.Color.Blue %>' /> 
```

# java - 从 COM4J 对象获取 PID（进程 ID）

> ID：13126966
> 
> 赞同：0
> 
> 时间：2012-10-29T17:46:43.343
> 
> 标签：java, pid, com4j

我正在使用 COM4J 生成 MS Office 文档，但有时某个进程停止工作。

我想知道是否有办法识别使用 COM4J 创建的应用程序的 PID。

使用进程 ID，我将终止阻塞队列的进程。

```
import com4j.Variant;
import word._Application;
import word._Document;

public class WordDemo {
    public static void main(String[] args) {
        _Application app = word.ClassFactory.createApplication();
        app.visible(true);

        Integer pid = null
        //Integer pid = app.getProcessID();

        app.documents().add( Variant.getMissing(), false, false, true);
        app.selection().typeText("Welcome to com4j");
        app.selection().typeParagraph();
        app.selection().typeText("Your Java/COM bridging solution");

        System.out.println("Process ID # " + pid)
    }
} 
```

# c - 虽然循环过早退出

> ID：13126973
> 
> 赞同：1
> 
> 时间：2012-10-29T17:47:02.540
> 
> 标签：c, function, while-loop, dynamic-memory-allocation

所以这个程序应该整理一个单词以显示相同长度的有效单词。这是一项需要在函数内进行动态内存分配的任务，并且变得相当混乱。在程序开始时，我必须为长度为 n 的字典动态分配内存。我们得到的字典长度为 10000，单词的最大长度为 20 个字符。我选择动态创建每个单词的排列数组，然后将它们与字典中的单词进行比较，使用 strcmp 进行二进制搜索（用户和字典中输入的所有单词都是大写字母，因此这是一种可行的方法）。整个程序通过第一次迭代减去作为有效单词的重复排列和 while 循环过早退出。

其他一些规格：

*   用户输入“y”或“Y”表示他们想玩

我没有尝试任何方法来解决这个问题，因为我想不出一个 while 循环会退出的任何原因。特别是因为即使我不允许扫描新值，选择仍应为“y”或“Y”。

这是主要的。

```
 int main() {

        char** dictionary;
        int num_words;

        // defined FILE* outside of file read in function to avoid returning local variable address
        FILE* ifp = fopen("Dictionary.txt", "r");

        fscanf(ifp, "%d", &num_words);

        dictionary = FileReadIn(num_words, ifp);

        char choice = Welcome();

        // main part of program Im unsure why it exits after its first iteration
        while ((choice == 'y') || (choice == 'Y')) {

            char* letters = LettersReadIn();

            // Calculates number of permutations which is (numletters)!
            long num_permutations = Factorial(strlen(letters));

            // Sets up permutations through malloc
            char** permutations = (char**)malloc((num_permutations) * sizeof(char*));

            int i;
            for (i = 0; i < num_permutations; i++) {
                permutations[i] = (char*)malloc(MAXWORDLENGTH * sizeof(char));
            }

            // Creates all permutations of the letters entered in by the user in a recursive function
           RecursivePermute(letters, 0, permutations);

           // Created the WordIndices array in order to keep track of which indices in the permutations array are valid words
           // Could not get the program to work when I created wordindices in Viable Words
           // Viable Words checks each permutation against words in the dictionary using a binary search 
           // which compared each word lexicographically with strcmp
           int* word_indices = (int*)malloc(num_permutations * sizeof(int));
           ViableWords(permutations, dictionary, num_permutations, num_words, word_indices);

           // Prints each index in permutations that is a valid word
           // valid word indices stored in word indices
           PrintWords(permutations, num_permutations, letters, word_indices);

           // frees permutations and word indices
           free(permutations);
           free(word_indices);

           choice = Welcome();
     } // End While loop

return 0;
} // End main 
```

这就是欢迎功能。

```
 char Welcome() {

         printf("Welcome to the Jumble Puzzle Solver!\n");
         printf("Would you like to enter a jumbled word?\n");

         char choice;
         scanf("%c", &choice);

   return choice;
   }// End Welcome 
```

所以基本上我的问题是为什么会导致这种情况发生，什么是解决方案。

如果您需要任何其他信息，请告诉我，如果您发现任何其他需要改进的地方，请告诉我。我对编程还很陌生，所以我喜欢一些建设性的批评。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:58:10.123

原因是`scanf`在读取输入后在输入缓冲区中留下一个换行符，在读取下一个字符之前未清除该换行符。

使用 getchar() 来使用换行符：

```
scanf("%c", &choice);
getchar(); 
```

或者通过在格式字符串中使用前导空格来告诉 scanf() 忽略输入缓冲区中的空格：

```
scanf(" %c", &choice); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T18:08:02.787

`scanf`用更简单的替换

* * *

```
choice = fgetc(stdin) 
```

* * *

你应该没事。

仅仅为了读取单个字符`scanf`有点矫枉过正，因为它与缓冲区一起工作。当您写 'q' 并按下`enter`换行符时，换行符也会进入缓冲区，然后 %c 检索一个字符，但换行符仍保留在缓冲区中

# ruby - 如何在 ruby 中进行 xml 登录

> ID：13126977
> 
> 赞同：9
> 
> 时间：2012-10-29T17:47:26.567
> 
> 标签：ruby, xml, digital-signature, digest

我需要使用 ruby​​ 对 xml 进行签名，有人知道任何方法或库吗？

我的 xml 骨架是：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<Message>
    <MessageId> 
        <ServiceId>service</ServiceId> 
        <Version>1.0</Version> 
        <MsgDesc>Service Description</MsgDesc> 
        <Code>4</Code> 
        <FromAddress>from</FromAddress> 
        <ToAddress>to</ToAddress> 
        <Date>2012-10-29</Date> 
    </MessageId> 
    <MessageBody/> 

<Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
  <SignedInfo>
    <CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
    <SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
    <Reference URI="">
    <Transforms>
      <Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/>
    </Transforms>
    <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
    <DigestValue>??????</DigestValue>
    </Reference>
  </SignedInfo>

  <SignatureValue>????????????</SignatureValue>
  <KeyInfo>
    <X509Data>
      <X509Certificate>????????</X509Certificate>
    </X509Data>
  </KeyInfo>
</Signature>
</message> 
```

我为 DigestValue 尝试了这段代码，并对其进行了测试，并将其与我的 java 示例进行了比较，但 DigestValue 与我的 java 示例的响应不匹配：

```
require 'base64'
require 'openssl'

to_sign_xml = File.read 'service.xml'
digest = OpenSSL::Digest::SHA1.digest(to_sign_xml)

digest = Base64.encode64(digest.to_s).gsub(/\n/, '')
raise digest.inspect 
```

我的文件 service.xml 包含：

```
<Message>
    <MessageId> 
        <ServiceId>service</ServiceId> 
        <Version>1.0</Version> 
        <MsgDesc>Service Description</MsgDesc> 
        <Code>4</Code> 
        <FromAddress>from</FromAddress> 
        <ToAddress>to</ToAddress> 
        <Date>2012-10-29</Date> 
    </MessageId> 
    <MessageBody/>
<Message> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T13:12:59.657

如果你仍然感兴趣，我一周前制作了这个宝石。它仍在开发中，但基本的东西已经实现。此 gem 针对使用 xmlsec 库创建的签名进行测试。 [http://www.aleksey.com/xmlsec/](http://www.aleksey.com/xmlsec/)

我目前正在积极使用这个 gem，所以应该相对快速地修复错误。

[https://rubygems.org/gems/xmldsig](https://rubygems.org/gems/xmldsig)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T14:59:06.260

不幸的是，XML 签名的创建和验证非常复杂。详细信息可以在[规范](http://www.w3.org/TR/xmldsig-core1/)中找到。[前段时间](https://github.com/emboss/ruby/tree/xmldsig/ext/xmldsig)我开始实现它以作为 stdlib 的补充，但后来因为另一个项目变得更加重要而停止，并且 Nokogiri 开始提供我需要的规范化功能，不幸的是已经直接使用 libxml 实现了。您可能想看看那里需要什么，然后将这些想法移植到普通的 Nokogiri 代码中。

使用这些，应该可以在 Ruby 中完全实现 XML-DSIG。但是要做好准备，这不是一件容易的事，很多很多小细节很有可能让你发疯......

切换到 JRuby 并集成Java 标准库附带的 XML-DSIG的[默认实现](http://docs.oracle.com/javase/7/docs/api/javax/xml/crypto/dsig/XMLSignature.html)可能会更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-08T13:38:34.683

这是一个可用于签名/摘要的 gem，但是我在规范化方面仍然存在一些问题，可能这就是为什么我没有得到正确的摘要：[https ://github.com/ebeigarts/signer](https://github.com/ebeigarts/signer)

# java - 如何将面板拆分为子面板？

> ID：13126979
> 
> 赞同：1
> 
> 时间：2012-10-29T17:47:32.877
> 
> 标签：java, swing, layout, jpanel, panel

我已经制作了一个面板（它是一排按钮），并将它放在框架的底部（南），但我想在它下面添加两行（面板/子面板）（文本输入行和输出行，如果重要的话）。现在我唯一知道要做的就是声明并添加更多面板，这很好，但是当我指定 .SOUTH 时，它们会超出前一个面板的顶部。

编辑：我使用的解决方案

按照 Ted Hopp 的建议，我将原始面板（现在称为 subPanel1）以及位于原始面板（subPanel2 和 subPanel3）之上的两个新面板添加到第四个“容器面板”（bottomCotainerPanel）。因为我只有三个 subPanel，这允许我指定每个 subPanel 在 containerPanel 中的位置（使用 NORTH、CENTER、SOUTH，如果你有超过 3 个，可能需要做一些稍微不同的事情......），然后指定哪里contianerPanel 将进入框架（南）。

```
 subPanel1.setLayout(new GridLayout(1,6)); //Layout of subPanel1
subPanel1.add(clearButton);
subPanel1.add(customerNameLabel);
subPanel1.add(customerNameTextField);
subPanel1.add(showByNameButton);
subPanel1.add(openNewSavingsButton);
subPanel1.add(openNewCheckingButton);

subPanel2.add(sendChatTextField);
subPanel2.add(sendButton);
subPanel2.add(clearButton2);

subPanel3.add(receiveChatTextField);
subPanel3.add(nextButton);
subPanel3.add(previousButton);

bottomContainerPanel.setLayout(new GridLayout(3,1));   //Layout of Container Panel
bottomContainerPanel.add(subPanel1, BorderLayout.NORTH);
bottomContainerPanel.add(subPanel2, BorderLayout.CENTER);
bottomContainerPanel.add(subPanel3, BorderLayout.SOUTH);

tellerWindow.getContentPane().add(bottomContainerPanel, BorderLayout.SOUTH); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T17:49:13.573

您需要添加一个容器面板作为框架的 SOUTH 面板。容器本身应该具有您想要的底部所有内容的布局。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T17:57:18.563

如果您只想将面板拆分为 2 个相等的部分在南和北使用`GridLayout`. 如果你想要中间的东西，你可以使用`BorderLayout`.

如果您想让您的用户能够更改子面板大小，请使用`JSplitPane`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-15T08:46:40.490

我在尝试将几行按钮放入从 ListDemo 示例借来的面板中时遇到了类似的问题。嗯，首先要做的是阅读`BorderLayout`：[如何使用 BorderLayout](https://docs.oracle.com/javase/tutorial/uiswing/layout/border.html)，或者至少看看那里显示的图像：
![在此处输入图像描述](../Images/4422dc307c69daef39f5866ddde54930.png)

您不能在`BorderLayout`. 但是您可以使用嵌套布局。我们需要的是一个，`BoxLayout`请参阅[如何使用 BoxLayout](https://docs.oracle.com/javase/tutorial/uiswing/layout/box.html)：。
![在此处输入图像描述](../Images/8f57bf953e7758612a73e8d17bf434f3.png)

我们只需要用按钮行替换上图中显示的按钮。

```
public class MyStuff extends JPanel {
  ...
  public MyStuff() {
    super(new BorderLayout());
    ...
    JPanel buttonArea = new JPanel();
    buttonArea.setLayout(new BoxLayout(buttonArea, BoxLayout.PAGE_AXIS));
    add(buttonArea, BorderLayout.PAGE_END);
    ...
    //if you dislike the default center alignment:
    //panelWithButtons1.setAlignmentX(Component.LEFT_ALIGNMENT);
    buttonArea.add(...);// add the 1st panel with buttons
    buttonArea.add(...);// add the 2nd panel with buttons
    buttonArea.add(...);// add the 3rd panel with buttons 
```

# powershell - Powershell 无法打开 Sybase isql 的输入文件

> ID：13126980
> 
> 赞同：1
> 
> 时间：2012-10-29T17:47:38.967
> 
> 标签：powershell, sybase

我正在尝试从 Powershell 进行 Sybase isql 调用。SQL 文件现在是一个简单的“选择计数”。它在标准命令提示符下工作，但在 Powershell 中失败。

命令提示符：

```
H:\>isql -SSomeServer -USomeUser -PSomePassword -DSomeDatabase -i\\path\to\sql\file\SomeFile.sql

 -----------
        81210

(1 row affected) 
```

电源外壳：

```
PS H:\> isql -SSomeServer -USomeUser -PSomePassword -DSomeDatabase -i\\path\to\sql\file\SomeFile.sql
 Unable to open input file '\\path\to\sql\file\SomeFile'. 
```

我尝试在文件周围加上单引号和双引号，但这会导致继续提示 (>>)。

有谁知道为什么这会失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T02:33:50.317

您需要用单引号包裹整个最后一个参数：

`isql -SSomeServer -USomeUser -PSomePassword -DSomeDatabase '-i\\path\to\sql\file\SomeFile.sql'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T20:54:58.340

您需要在 -i 开关周围加上引号： -i"\path\to\sql\file\SomeFile.sql"

# twitter-bootstrap - 即使删除了幻灯片类，引导轮播也会自动滑动

> ID：13126983
> 
> 赞同：1
> 
> 时间：2012-10-29T17:48:11.387
> 
> 标签：twitter-bootstrap, carousel

我的网站上有两个不同的轮播；1个自动滑动，1个不自动滑动。对于没有的我使用自定义 js 来创建分页。

问题是，在上面提到的第二个中，我删除了“slide”类，但它仍然是自动滑动的。

由于我有另一个需要自动滑动的轮播，我无法将 bootstrap.js 间隔更改为 false。（我也不想在页面上包含我需要修复的单独脚本，因为它是站点模板的一部分并且会变得混乱）。

这是我的 jsFiddle 和所有代码。[http://jsfiddle.net/cindyg/UNKeL/4/](http://jsfiddle.net/cindyg/UNKeL/4/)

可以看到包含的 div 没有“slide”类：

```
<div id="myCarousel" class="carousel"> 
```

我看到人们发布了关于相反问题的帖子，例如[Bootstrap Carousel Not Automatically Sliding](https://stackoverflow.com/questions/11233449/bootstrap-carousel-not-automatically-sliding)，并应用了一些提到的技术，但无济于事。

这是我添加的用于获取分页的自定义 js：

```
$(document).ready(
        function() {
            $('#myCarousel').each(
                    function() {
                            var html = '<div class="carousel-nav " data-target="' + $(this).attr('id') + '"><ul>';

                            for(var i = 0; i < $(this).find('.item').size(); i ++) {
                                    html += '<li><a';
                                    if(i == 0) {
                                            html += ' class="active"';
                                    }

                                    var item = $(this).find('.item').get(i);

                                    html += ' href="#">&nbsp;'  + $(item).attr('data-title') + '</a></li>';
                            }

                            html += '</ul></li>';
                            $(this).after(html);
                            $('.carousel-control.left[href="#' + $(this).attr('id') + '"]').hide();
                    }
            ).bind('slid',
                    function(e) {
                            var nav = $('.carousel-nav[data-target="' + $(this).attr('id') + '"] ul');
                            var index = $(this).find('.item.active').index();
                            var item = nav.find('li').get(index);

                            nav.find('li a.active').removeClass('active');
                            $(item).find('a').addClass('active');

                            if(index == 0) {
                                    $('.carousel-control.left[href="#' + $(this).attr('id') + '"]').fadeOut();
                            } else {
                                    $('.carousel-control.left[href="#' + $(this).attr('id') + '"]').fadeIn();
                            }

                            if(index == nav.find('li').size() - 1) {
                                    $('.carousel-control.right[href="#' + $(this).attr('id') + '"]').fadeOut();
                            } else {
                                    $('.carousel-control.right[href="#' + $(this).attr('id') + '"]').fadeIn();
                            }
                    }
            );

            $('.carousel-nav a').bind('click',
                    function(e) {
                            var index = $(this).parent().index();
                            var carousel = $('#' + $(this).closest('.carousel-nav').attr('data-target'));

                            carousel.carousel(index);
                            e.preventDefault();
                    }
            );

            $('.carousel').carousel('cycle'); // Start the animation automatically
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-03T19:11:39.460

我发现在 Carousel div 标注中调用 data-interval="false" 修复了这个问题。

IE：

```
div id="myCarousel" class="carousel slide" data-interval="false" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:51:34.913

如果你使用委托（例如使用 .on() 方法）而不是绑定，你会得到你想要的结果。您在这里遇到的问题是，当事件具有类时，它被绑定到对象......如果您绑定到父元素并在事件冒泡 DOM 并且类不存在时查找类，则事件不会在滑块上触发。

# zend-framework2 - Zend Framework 2 服务器和非 MVC 架构

> ID：13126986
> 
> 赞同：1
> 
> 时间：2012-10-29T17:48:33.013
> 
> 标签：zend-framework2

我的目标是在 ZF 2 中采用更面向 SOA 的方法，基本上我将整个视图放在我的架构中，因为它们对我没有用，并通过引导文件加载所有控制器和模型，该文件将所有这些都指向一个服务器（Zend\Json\Server\Server）。尽管 MVC 和 SOA 可以共存，但这并不是我真正要问的问题。

我发现 Zend 文档过于依赖 MVC 应用程序，是否有人遵循 ZF2 中非 MVC 方法的任何最佳实践？我知道我的问题可能有点宽泛，我所追求的是与下面针对 ZF1 提出的问题类似的方法：

[Zend 应用程序和引导程序作为非 mvc](https://stackoverflow.com/questions/3980159/zend-application-and-bootstrap-as-non-mvc)

如何删除视图，但在架构中保持与 Zend Framework 2 建议的一致性，而不会流氓或实施不可维护的混合架构。

# android - 如何在 Android 中导入声音并使用它们？

> ID：13126988
> 
> 赞同：-1
> 
> 时间：2012-10-29T17:48:47.723
> 
> 标签：android, audio

当我点击它们时，我的应用程序中有 16 个按钮可以播放声音。我想从 sd 卡中选择和导入声音。关于如何做到这一点的任何建议和例子？

这是我的 Java 代码：

```
public class App extends MultiTouchActivity {
SoundPool sp;
MediaPlayer mp;
int mSoundId, mSoundId1, mSoundId2, mSoundId3, mSoundId4, mSoundId5,
        mSoundId6, mSoundId7, mSoundId8, mSoundId9, mSoundId10, mSoundId11,
        mSoundId12, mSoundId13, mSoundId14, mSoundId15;
int mStreamId, mStreamId1, mStreamId2, mStreamId3, mStreamId4, mStreamId5,
        mStreamId6, mStreamId7, mStreamId8, mStreamId9, mStreamId10,
        mStreamId11, mStreamId12, mStreamId13, mStreamId14,
        mStreamId15 = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
    getWindow().clearFlags(
            WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    this.setVolumeControlStream(AudioManager.STREAM_MUSIC);
    sp = new SoundPool(5, AudioManager.STREAM_MUSIC, 0);
    mSoundId = sp.load(this, R.raw.dub1, 1);
    mSoundId1 = sp.load(this, R.raw.dub2, 1);
    mSoundId2 = sp.load(this, R.raw.dub3, 1);
    mSoundId3 = sp.load(this, R.raw.dub4, 1);
    mSoundId4 = sp.load(this, R.raw.dub5, 1);
    mSoundId5 = sp.load(this, R.raw.dub6, 1);
    mSoundId6 = sp.load(this, R.raw.dub7, 1);
    mSoundId7 = sp.load(this, R.raw.dub8, 1);
    mSoundId8 = sp.load(this, R.raw.dub9, 1);
    mSoundId9 = sp.load(this, R.raw.dub10, 1);
    mSoundId10 = sp.load(this, R.raw.dub11, 1);
    mSoundId11 = sp.load(this, R.raw.dub12, 1);
    mSoundId12 = sp.load(this, R.raw.dub13, 1);
    mSoundId13 = sp.load(this, R.raw.dub14, 1);
    mSoundId14 = sp.load(this, R.raw.dub15, 1);
    mSoundId15 = sp.load(this, R.raw.dub16, 1);
}

//

public void dubstep1(View view) {
    if (mStreamId != 0) {
        sp.stop(mStreamId);
    }
    mStreamId = sp.play(mSoundId, 1, 1, 1, 0, 1f);
}

public void dubstep2(View view) {
    if (mStreamId1 != 0) {
        sp.stop(mStreamId1);
    }
    mStreamId1 = sp.play(mSoundId1, 1, 1, 1, 0, 1f);
}

public void dubstep3(View view) {
    if (mStreamId2 != 0) {
        sp.stop(mStreamId2);
    }
    mStreamId2 = sp.play(mSoundId2, 1, 1, 1, 0, 1f);
}

public void dubstep4(View view) {
    if (mStreamId3 != 0) {
        sp.stop(mStreamId3);
    }
    mStreamId3 = sp.play(mSoundId3, 1, 1, 1, 0, 1f);
}

public void dubstep5(View view) {
    if (mStreamId4 != 0) {
        sp.stop(mStreamId4);
    }
    mStreamId4 = sp.play(mSoundId4, 1, 1, 1, 0, 1f);
}

public void dubstep6(View view) {
    if (mStreamId5 != 0) {
        sp.stop(mStreamId5);
    }
    mStreamId5 = sp.play(mSoundId5, 1, 1, 1, 0, 1f);
}

public void dubstep7(View view) {
    if (mStreamId6 != 0) {
        sp.stop(mStreamId6);
    }
    mStreamId6 = sp.play(mSoundId6, 1, 1, 1, 0, 1f);
}

public void dubstep8(View view) {
    if (mStreamId7 != 0) {
        sp.stop(mStreamId7);
    }
    mStreamId7 = sp.play(mSoundId7, 1, 1, 1, 0, 1f);
}

public void dubstep9(View view) {
    if (mStreamId8 != 0) {
        sp.stop(mStreamId8);
    }
    mStreamId8 = sp.play(mSoundId8, 1, 1, 1, 0, 1f);
}

public void dubstep10(View view) {
    if (mStreamId9 != 0) {
        sp.stop(mStreamId9);
    }
    mStreamId9 = sp.play(mSoundId9, 1, 1, 1, 0, 1f);
}

public void dubstep11(View view) {
    if (mStreamId10 != 0) {
        sp.stop(mStreamId10);
    }
    mStreamId10 = sp.play(mSoundId10, 1, 1, 1, 0, 1f);
}

public void dubstep12(View view) {
    if (mStreamId11 != 0) {
        sp.stop(mStreamId11);
    }
    mStreamId11 = sp.play(mSoundId11, 1, 1, 1, 0, 1f);
}

public void dubstep13(View view) {
    if (mStreamId12 != 0) {
        sp.stop(mStreamId12);
    }
    mStreamId12 = sp.play(mSoundId12, 1, 1, 1, 0, 1f);
}

public void dubstep14(View view) {
    if (mStreamId13 != 0) {
        sp.stop(mStreamId13);
    }
    mStreamId13 = sp.play(mSoundId13, 1, 1, 1, 0, 1f);
}

public void dubstep15(View view) {
    if (mStreamId14 != 0) {
        sp.stop(mStreamId14);
    }
    mStreamId14 = sp.play(mSoundId14, 1, 1, 1, 0, 1f);
}

public void dubstep16(View view) {
    if (mStreamId15 != 0) {
        sp.stop(mStreamId15);
    }
    mStreamId15 = sp.play(mSoundId15, 1, 1, 1, 0, 1f);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:12:43.420

如果要从 SD 卡加载，则获取要播放的音频文件的路径，并使用`SoundPool.load(String path, int priority)`. `Environment.getExternalStorageDirectory`将在此处对您有用，以帮助您查找文件。

另外作为旁注，您应该真正学习一些代码重用，您的手指会感谢您。没有理由为了改变一个变量而必须将相同的行为重复 16 次。

您可以将所有这 16 个函数替换为：

```
int[] mStreamIds = new int[16];
int[] mSoundIds = new int[16];

public void dubstep(int id) {
    if(mStreamIds[id] != 0){
       sp.stop(mStreamIds[id]);
    }
    mStreamIds[id] = sp.play(mSoundIds[id], 1,1,1,0,1f);
} 
```

# iphone - 如何用不同的变量重复一个动作？

> ID：13126989
> 
> 赞同：0
> 
> 时间：2012-10-29T17:48:57.553
> 
> 标签：iphone, objective-c, ios, if-statement, singleton

我不确定如何解释这一点，但我很肯定有办法做到这一点，但我还没有得到它。这是我的示例：我有 10 个变量（整数值），并使用变量的值设置一个字符串。

这是一个带有天气和云层的示例，用于确定天气状况：

```
 if (hour1cloud <= 5) {
            hour1weather = @"Clear";
        }
        if (5 < hour1cloud <= 25) {
            hour1weather = @"Mostly Clear";
        }
        if (25 < hour1cloud <= 50) {
            hour1weather = @"Partly Cloudy";
        }
        if (50 < hour1cloud <= 83) {
            hour1weather = @"Mostly Cloudy";
        }
        if (83 < hour1cloud <= 105) {
            hour1weather = @"Overcast";
        } 
```

假设我有 hour2cloud、hour3cloud、hour4cloud 等，它们对应于 hour2weather、hour3weather 等等。有没有一种方法可以制作一个通用的方法，我只需输入 hour1cloud 并检索 hour1weather？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:54:58.640

你当然可以这样做：

```
static NSString *stringForCloudiness(int cloudiness) {
    static int const kCloudinesses[] = { 5, 25, 50, 83, 105 };
    static NSString *const kStrings[] = { @"Clear", @"Mostly Clear", @"Partly Cloudy", @"Mostly Cloudy", @"Overcast" };
    static int const kCount = sizeof kCloudinesses / sizeof *kCloudinesses;
    for (int i = 0; i < kCount; ++i) {
        if (cloudiness <= kCloudinesses[i]) {
            return kStrings[i];
        }
    }
    return @"A cloudiness level unparalleled in the history of recorded weather";
} 
```

这有点复杂，但可以确保您不会忘记保持数组同步：

```
static NSString *stringForCloudiness(int cloudiness) {
    typedef struct {
        int cloudiness;
        __unsafe_unretained NSString *string;
    } CloudStringAssociation;

    static CloudStringAssociation const kAssociations[] = {
        { 5, @"Clear" },
        { 25, @"Mostly Clear" },
        { 50, @"Partly Cloudy" },
        { 83, @"Mostly Cloudy" },
        { 105, @"Overcast" },
        { INT_MAX, @"A cloudiness level unparalleled in the history of recorded weather" }
    };

    int i = 0;
    while (cloudiness > kAssociations[i].cloudiness) {
        ++i;
    }
    return kAssociations[i].string;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T17:53:51.027

为什么不写一个这样的方法：

```
- (NSString*)weatherStringFromCloud:(int)cloud {
    NSString *weather;
    if (cloud <= 5) {
        weather = @"Clear";
    } else if (cloud <= 25) {
        weather = @"Mostly Clear";
    } else if (cloud <= 50) {
        weather = @"Partly Cloudy";
    } else if (cloud <= 83) {
        weather = @"Mostly Cloudy";
    } else if (cloud <= 105) {
        weather = @"Overcast";
    } else {
        weather = nil;
    }
    return weather;
} 
```

然后用各种值调用它：

```
hour1weather = [self weatherStringFromCloud:hour1cloud];
hour2weather = [self weatherStringFromCloud:hour2cloud];
hour3weather = [self weatherStringFromCloud:hour3cloud];
hour4weather = [self weatherStringFromCloud:hour4cloud]; 
```

# r - 为什么 R 多核只使用一个核心？

> ID：13126990
> 
> 赞同：7
> 
> 时间：2012-10-29T17:49:04.043
> 
> 标签：r, multicore

> **可能重复：**
> [R 中的并行处理受限](https://stackoverflow.com/questions/12924698/parallel-processing-in-r-limited)

我已经用 R 多核编写了一些代码，并且在 24 核机器上运行它。实际上只有 12 个核心，但它们是超线程的，所以看起来有 24 个。

奇怪的是：所有线程都运行在同一个单核上！所以他们每个人都只使用少量的 cpu，而不是每个人都在一个核心上运行，并咀嚼所有可用的核心。

为简单起见，我只运行 4 个线程：

```
mclapply( 1:30, function(size) {
    # time consuming stuff that is cpu bound (think "forecast.ets" et al)
}, mc.cores = 4, mc.preschedule = F ) 
```

在运行此之前，已经有一个 R 进程在一个核心上运行，使用该核心 100% 的容量：

![在此处输入图像描述](../Images/f80a982e181e1b2ea50c00aa25c69d31.png)

接下来，我启动“多核进程”，4个额外的线程争夺同一个核心！：

![在此处输入图像描述](../Images/cf0b44febb9220422692771db5dc082b.png)

...因此，他们每个人都获得了一个核心的 12%，或大约 1% 的可用处理能力，而他们每个人都应该能够获得一个核心的 100%。此外，其他 R 进程现在只能获得 50% 的核心。

操作系统是 Ubuntu 12.04 64 位。硬件是英特尔。R 是 2.15.2 版“不给糖就捣蛋”

想法？（我知道我可以只使用降雪，但我有很多变量，我真的不想`sfExport`全部使用它们！）

编辑：哦，我猜某处有一些全局锁？但是，为什么两个完全独立的 R 进程之间会发生冲突？我可以很好地并行运行两个 R 进程，每个进程都占用一个内核的 100% 的 CPU。

Edit2：感谢 Dirk 的指点，我重建了 openblas，现在看起来更健康了！：

![在此处输入图像描述](../Images/289de18fdbf166ef62370185b82bb5a0.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T17:58:47.197

一个可能的问题是 OpenBLAS 包的一个可能的副作用，它设置了 CPU 亲和性，使得进程粘在一个内核上。有关讨论，请参阅[R 中的并行处理限制](https://stackoverflow.com/questions/12924698/parallel-processing-in-r-limited)，并链接到有关 r-sig-hpc 列表的更多讨论，该列表具有修复。

# javascript - 离开页面时自动发布表单

> ID：13126996
> 
> 赞同：1
> 
> 时间：2012-10-29T17:49:41.930
> 
> 标签：javascript

这是一个简单的 javascript 问题。

我有一个页面 C，其中有一个 textarea T。通过单击 C 上的各种按钮来添加 T 的内容（本质上，T 会累积单击按钮的时间列表）。

还有一个按钮可以通过 post 请求将 T 的内容提交到服务器（T 被表单元素包围）。

当用户忘记单击提交按钮并关闭页面窗口时，我希望无论如何都会发布 T 的内容，就像用户在关闭窗口之前单击提交按钮一样。

我知道我可以拦截页面关闭并提示用户提交，但这不是我想要的。

从 onbeforeunload 调用的函数内部提交包含 T 的表单似乎是不可能的。

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T17:50:27.500

这根本不可能：这是一种安全措施，旨在确保网站无法阻止用户在需要时立即离开页面。

您可以做的最好的事情是在每次更改字段时使用 ajax 发布您的表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:54:03.350

我在我的应用程序的一部分中使用了这个代码——虽然它没有捕获任何文本，但你可以试一试。

```
window.onbeforeunload = confirmExit;

function confirmExit(){

    data = $("#data").val();

    $.ajax({
        url: 'complete.php?data=' + data
    });

} 
```