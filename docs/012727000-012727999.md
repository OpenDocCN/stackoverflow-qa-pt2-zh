# StackOverflow 问答 12727000-12727999

# c++ - C++ 中相同类的不同定义 - 处理多个目标

> ID：12727001
> 
> 赞同：2
> 
> 时间：2012-10-04T12:10:38.203
> 
> 标签：c++, c, cross-platform

我的问题是我想组织我的代码，以便我可以拥有相同方法的*调试*和*发布*版本，并且我可以为不同的目标平台定义相同方法的多个定义。

基本上问题的核心对于两者来说都是相同的，我需要具有相同的签名但关联的定义不同。

在文件系统上组织我的代码以及编译和生产的最佳方法是什么，以便我可以保持干净和分离？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:15:43.243

```
// #define DEBUG   -  we're making a non debug version

#ifdef DEBUG

// function definition for debug

#else

// function definition for release

#endif 
```

对于不同的操作系统也可以这样做。当然还有重新编译所有这些的问题，这在 C++ 中可能是一件痛苦的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T12:20:00.353

我建议您在源代码级别进行干预，而不是对头文件进行干预（只是为了确保保持相同的接口），例如：

```
//Foo.h

class Foo{
  void methodA();
  void methodB();
};

//Foo.cpp

// common method
Foo::methodA() { }

#ifdef _DEBUG_
  Foo::methodB() { }
#elif _PLATFORM_BAR_
  Foo::methodB() { }
#else
  Foo:methodB() { }
#endif 
```

相反，如果您想将所有内容分开，则必须在更高的水平上工作，预处理器不足以有条件地包含一个 .cpp 文件而不是另一个。您将不得不使用*makefile*或任何您使用的东西。

另一种选择可能是让源文件在不在特定平台上时简单地消失，例如：

```
//Foo.h

class Foo{
  void methodA();
  void methodB();
};

//FooCommon.cpp

void Foo::methodA() { }

//FooDebug.cpp
#ifdef _DEBUG_H
void Foo::methodB() { }
#endif

//FooRelease.cpp
#ifndef _DEBUG_H_
void Foo::methodB() { }
#endif 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T12:22:14.280

如果您的编译器允许，您可以尝试将每个版本的源文件保存在单独的子文件夹（例如`#include "x86_d/test.h"`）中，然后使用全局宏定义来控制流程：

```
#define MODE_DEBUG

#ifdef MODE_DEBUG
#include "x86dbg/test.h"
#else
#include "x86rel/test.h"
#endif 
```

您还可以对成员函数定义使用类似的结构，这样您就可以在同一个文件中拥有两个不同的定义。许多编译器也使用自己的全局宏定义，因此`#define MODE_DEBUG`您可以使用类似的东西`#ifdef _CPP_RELEASE`，甚至可以通过编译器标志定义一个。

# apache-flex - 在 Flash Builder 4.6 中将太多 SWC 库项目导出发布构建失败到一个主项目中

> ID：12727005
> 
> 赞同：1
> 
> 时间：2012-10-04T12:10:48.413
> 
> 标签：apache-flex, air, flash-builder

我有一个模块化架构的 Adob​​e AIR 项目，其中包含大约 2200 个文件，构建起来花费了太多时间。

现在我们计划在多个平台上运行它，比如（网络、桌面等），所以我们把它分开在小型库项目中......

这些库项目是相互依赖的，子库项目被添加到顶级库项目的构建路径中......

还有一些库被添加到主项目的路径中......

目前我们已经将它分成了 31 个小项目，其中一个主要的 Adob​​e AIR 项目包含大约 50 个文件，另外两个库项目包含大约 500 个和 1050 个文件的主要文件......

现在我们在构建时间上得到了一些改进......

**但是，当我们为主项目导出发布版本时，flash builder 正在编译所有依赖项目，因此 flash builder 无法构建项目并且我们得到 OutOfMemory 错误...**

有时它会给出***“带有 java.NullPointer 日志的内部构建错误”***，有时会给出“***构建过程中的一个或多个错误而没有错误日志”***。我已经尝试了堆错误、内部构建错误等的所有选项。

但我仍然无法导出发布版本...

那么有什么想法可以发布或任何替代解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:15:42.847

这可能是由于 Java 堆内存造成的。这个问题恰好在 Flash Builder 4.5 及更高版本中很常见。我不确定您使用的是哪个构建器版本，但希望以下链接可以提供帮助。

[http://blogs.adobe.com/jasonsj/2010/02/improving_compiler_performance.html](http://blogs.adobe.com/jasonsj/2010/02/improving_compiler_performance.html)

[http://helpx.adobe.com/flash-builder/kb/sluggish-performance-out-memory-errors.html](http://helpx.adobe.com/flash-builder/kb/sluggish-performance-out-memory-errors.html)

[http://blogs.adobe.com/flexdoc/2011/09/improving-flash-builders-performance.html](http://blogs.adobe.com/flexdoc/2011/09/improving-flash-builders-performance.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T02:24:55.123

最后我们得到了导出版本构建的解决方案......我们尝试了另一种方法，其中没有消耗那么多内存......

首先，我们清理了所有的库项目，并逐步构建了所有项目。之后，我们构建了主项目......

然后，我们从构建路径中删除了所有库项目，并创建了一个单独的文件夹，我们将所有库 SWC 文件放在特定库项目的 bin-debug 中...

然后该文件夹包含在主项目的构建路径中......

我们已经创建了一个构建...

感谢大家的帮助...

# objective-c - 过滤正在运行的应用程序列表？

> ID：12727006
> 
> 赞同：0
> 
> 时间：2012-10-04T12:10:51.633
> 
> 标签：objective-c, macos, cocoa, appkit

我想知道应用程序是否具有 UI 或其代理或没有 UI 的应用程序。

我的方法是使用，

```
NSArray *runningApplicationsList = [[NSWorkspace sharedWorkspace] runningApplications]; 
```

有`runningApplicationsList`iTunesHelper、AirPortBaseStationAgent、iChatAgent、AppleSpell 等应用程序的条目。

我正在寻找过滤掉它们的方法？任何人都可以提出一个想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:45:22.353

尝试获取`NSRunningApplication`每个应用程序的实例，然后检查`activationPolicy`. `NSApplicationActivationPolicyProhibited`如果应用程序无法激活（没有 UI），应该是这样。

如果这不起作用，那么您可能不得不查看每个应用程序的窗口列表，但我不确定在没有提升权限的情况下这是否可能。

# mysql - 使用子字符串函数的结果来计算多列的值

> ID：12727009
> 
> 赞同：0
> 
> 时间：2012-10-04T12:11:00.373
> 
> 标签：mysql, substring, haversine

我正在尝试运行以找到最近的点和纬度。哪个工作正常是我在我的数据库中存储了单独的值，但是我有一个管道字符串，我可以用子字符串索引拆分它。但是，当我尝试在我的选择查询中组合这些功能时，我并没有得到任何快乐。

```
SELECT SUBSTRING_INDEX(SUBSTRING_INDEX(longlat, '|', 1), '|', -1) as 'lat',
SUBSTRING_INDEX(SUBSTRING_INDEX(longlat, '|', 2), '|', -1) as 'lng',
title,
( 6371 * acos( cos( radians(51.527351) ) * cos( radians( 'lat') ) * cos( radians( 'lng' ) - radians(0.765544) ) + sin( radians(51.527351) ) * sin( radians( 'lat' ) ) ) ) AS distance 
FROM locations HAVING distance < 500
ORDER BY distance
LIMIT 0 , 20 
```

任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:29:31.597

> `radians( 'lat')`

在这部分查询中，`'lat'`是一个字符串，而不是列名或类似名称。当将该字符串传递给 时`radians`，它将被转换为一个数字，在这种情况下为零。因此，您将 0 转换为弧度。

您不能将一列用作计算另一列值的输入。您要么必须重复表达式，要么使用这样的子查询：

```
SELECT lat, lng, title,
  (6371 * acos(cos(radians(51.527351)) *
   cos(radians(lat)) * cos(radians(lng) - radians(0.765544)) +
   sin(radians(51.527351)) * sin(radians(lat)))
  ) AS distance
FROM
  (SELECT title,
     SUBSTRING_INDEX(SUBSTRING_INDEX(longlat, '|', 1), '|', -1) + 0 as lat,
     SUBSTRING_INDEX(SUBSTRING_INDEX(longlat, '|', 2), '|', -1) + 0 as lng
   FROM locations
  ) AS sub
HAVING distance < 500
ORDER BY distance
LIMIT 0 , 20 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:19:34.313

这是我重复查询的解决方案。我还没有机会测试不同解决方案的基准测试，但子查询解决方案更令人愉快

```
SELECT SUBSTRING_INDEX(SUBSTRING_INDEX(longlat, '|', 1), '|', -1) as 'latitude',
       SUBSTRING_INDEX(SUBSTRING_INDEX(longlat, '|', 2), '|', -1) as 'longitude',
(
  3959 * acos(
    cos(radians({MYLAT})) * cos(radians(SUBSTRING_INDEX(SUBSTRING_INDEX(longlat, '|', 1), '|', -1)))
    * cos(radians(SUBSTRING_INDEX(SUBSTRING_INDEX(longlat, '|', 2), '|', -1))) - radians({MYLONG}) + sin(radians({MYLAT})) 
    * sin( radians(SUBSTRING_INDEX(SUBSTRING_INDEX(longlat, '|', 1), '|', -1)))
  )
)
AS distance,
title

FROM locations
ORDER BY distance
LIMIT 0 , 20 
```

原来我现在到处都在使用这个等式，很高兴能把它搞定:)

我使用平均 3959 作为地球的半径，但是我想知道对于不同的全球位置使用某种区域纬度是否会更好。

# jquery - Opera 12 和 jQuery 父选择器

> ID：12727013
> 
> 赞同：0
> 
> 时间：2012-10-04T12:11:09.967
> 
> 标签：jquery, opera

这段代码在 Opera 12 中运行起来非常奇怪。 **父**元素只是**ul**，这就是 Firefox 和 Chrome 返回的内容。
在 Opera 中**$(this).parent()**正在返回**Window**对象。

有任何想法吗？jQuery 版本是 1.7.2

```
JS
    $('.addTrait').live('click', function(e) {
        e.preventDefault();
        trait = $('li.trait.template').clone().removeClass('template');
        parent = $(this).parent();
        $(parent).after(trait);
        trait.show();
    });

HTML
<ul class="sortable traits">
    <li class="trait">
    <div class="well slim">
        <input class="trait name" type="text" name="trait[%s][name]" value=""/>
        <input class="trait id" type="hidden" name="trait[%s][id]" value=""/>
        <input class="trait parent" type="hidden" name="trait[%s][parent]" />
        <a href="" class="addTrait icon-plus"></a>
        <a href="" class="removeTrait icon-remove"></a>
    </div>
    <ul>
    </ul>
    </li>
</ul>
<li class="trait template" style="display: none;">
    <div class="well slim">
    <input class="trait name" type="text" name="trait[%s][name]" value=""/>
    <input class="trait id" type="hidden" name="trait[%s][id]" value=""/>
    <input class="trait parent" type="hidden" name="trait[%s][parent]" />
    <a href="" class="addTrait icon-plus"></a>
    <a href="" class="removeTrait icon-remove"></a>
    </div>                
    <ul>
    </ul>
</li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:47:07.263

正如@raina77ow 在评论中指出的那样，您需要将其定义`parent`为局部变量。Opera 禁止更改`parent`全局对象（为了安全起见，各种插件会查看各种内容以检查它们运行的​​来源，但不可避免地覆盖`parent`会破坏这一点）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:40:25.257

请养成将变量声明为本地变量的习惯。它不仅用于修复此类错误，还用于性能优化。以这两个片段为例：

```
function foo() {
  function bar() {
    var someUrl = 'http://example.com';
    $.getJSON(someUrl, function() { ... };
  }
}

function foo() {
  function bar() {
    someUrl = 'http://example.com';
    $.getJSON(someUrl, function() { ... };
  }
} 
```

如您所见，在两个片段中，JS`someUrl`在调用`$.getJSON`.

在第一个中，这个变量被声明为`bar`函数的局部变量，因此它的查找将非常快。

但是，在第二个中，这个变量名实际上是指全局 ( `window`) 对象的一个​​属性。但是 JS 不知道这一点：它仍然必须一直沿作用域链向上 - 只是为了失败并回退到访问`window.someUrl`。

当然，在处理一个或两个变量时，差异（通常）可以忽略不计。但通常有几十个，并且这种不断向上移动范围链（并最终诉诸属性访问）可能会对脚本的性能产生巨大影响。

# html - mailto 在浏览器中不起作用

> ID：12727014
> 
> 赞同：1
> 
> 时间：2012-10-04T12:11:15.083
> 
> 标签：html, mailto

以下是 PHP/jquerymobile 的输出。当我在 Mac 上对其进行测试并将默认浏览器设置为 FF 时，FF 会打开很多标签并冻结。在 Chrome 中，它打开 gmail 但没有抄送。我希望有人能建议如何解决这个问题。

提前致谢。

```
<a data-role="button" data-icon="gear" id="submit" href="mailto:(parent)?subject=
Design homework&cc=teacher1@myschool.com,teacher2@myschool.com,teacher3@myschool.
com &body=Dear parents,%0D%0D I am writing my ... meeting.%0D%0D ...%0D%0D 
Thank you,%0D%0D John Doe" data-corners="true" data-shadow="true" 
data-iconshadow="true" data-wrapperels="span" data-theme="b" class="ui-btn 
ui-shadow ui-btn-corner-all ui-btn-icon-left ui-btn-up-b">
<span class="ui-btn-inner ui-btn-corner-all">
<span class="ui-btn-text">Ready to GO! Click Me.</span>
<span class="ui-icon ui-icon-gear ui-icon-shadow"/>
</span>
</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:20:30.103

```
<a data-role="button" data-icon="gear" id="submit" href="mailto:(parent)?subject=
Design homework&cc=teacher1@myschool.com,teacher2@myschool.com,teacher3@myschool.
com &body=Dear parents,%0D%0D I am writing my ... meeting.%0D%0D ...%0D%0D 
Thank you,%0D%0D John Doe" data-corners="true" data-shadow="true" 
data-iconshadow="true" data-wrapperels="span" data-theme="b" class="ui-btn 
ui-shadow ui-btn-corner-all ui-btn-icon-left ui-btn-up-b">
<span class="ui-btn-inner ui-btn-corner-all">
<span class="ui-btn-text">Ready to GO! Click Me.</span>
<span class="ui-icon ui-icon-gear ui-icon-shadow"/>
</span>
</a> 
```

插入一个普通的电子邮件地址而不是（父）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T12:22:13.110

看起来您的 Firefox 中的默认电子邮件处理程序是... Firefox。我曾经遇到过 PDF 文档，Firefox 一直在打开新标签页，直到崩溃。

转到 Preferences > Applications 并检查`mailto`Content-Type 是否已正确配置。

# javascript - jqGrid 在单元格编辑模式下调用 setFrozenColumns 时给出“没有这样的方法”

> ID：12727015
> 
> 赞同：1
> 
> 时间：2012-10-04T12:11:21.053
> 
> 标签：javascript, jqgrid

我正在尝试使用冻结列，`setFrozenColumns`但出现错误“jqGrid - 没有这样的方法：setFrozenColumns”。

我正在使用 jqGrid 4.4.1 版。

谁能告诉我这个问题的确切原因？

（我还设置了 jqGrid cellEditing true 并且我知道frozenColumns 的限制。但是，仍然想冻结一些列）。

您的合作将不胜感激。

谢谢， 阿比拉什

# php - 如何在 PODS 2 框架中加入 2 个 pod？

> ID：12727019
> 
> 赞同：-1
> 
> 时间：2012-10-04T12:11:34.840
> 
> 标签：php, wordpress, podscms

如何根据第一个 pod 中关系字段的值使用第二个 pod 记录中的字段？

假设我有一个名为**国家**的 pod ，其字段为**country_name**和**country_language**

**在名为语言**的第二个窗格中，我有字段**language_name**和**language_flag**

* * *

**country_language 字段是一个关系字段下拉列表，其中包含来自语言 (language_name) 的值**

我想要的是在使用此代码时能够以某种方式回显**language_flag**字段（对应于该行的语言名称）：

```
<?php
     $params = array(
        'limit'   => -1
     );
     $countries = pods( 'countries', $params );

     if ( 0 < $countries->total() ) {
          while ( $countries->fetch() ) {
?>
     <h2><?php echo $countries->field( 'country_name' ); ?></h2>
     <br>
<?php
          } 
     } 
?> 
```

我在想这样的事情可以工作，但当然它不会：

```
<h2><?php echo $countries->field( 'country_name' ); ?></h2>
<img src="<?php echo $countries->field( 'languages.language_flag' ); ?>">
<br> 
```

我正在使用 PODS 2 并尝试在我的主题的 header.php 中显示结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:25:40.970

如果 language_flag 是一个文件字段，您可能希望改用 language.language_flag.guid。

Pods 2.0 也有一个可用的新功能，即 $countries->display('field_name')，因此您也可以尝试检查一下。

# c# - C# - NHibernate 无法将 NHibernate.Collection.Generic.PersistentGenericSet 转换为 System.Collections.Generic.IList

> ID：12727025
> 
> 赞同：5
> 
> 时间：2012-10-04T12:11:45.987
> 
> 标签：c#, mysql, nhibernate

出于某种原因，当我尝试从数据库中获取数据时，NHibernate 告诉我它无法转换`NHibernate.Collection.Generic.PersistentGenericSet[Ingredient]`为。`System.Collection.Generic.IList[Ingredient]`这是我的类映射/实现的简化版本：

```
public class Product {
    protected Product() { };

    public virtual Name { get; set; }
    public virtual IList<Ingredient> {
        get { return new List<Ingredient>(ingredients).AsReadOnly(); }
        protected set { ingredients = value; }
    }

    private IList<Ingredient> ingredients = new List<Ingredient>();
} 
```

--

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
    <class name="LanchesAdmin.Core.Domain.Product, LanchesAdmin.Core" table="product" >
        <id name="ID" generator="identity">
            <column name="id" not-null="true" />
        </id>

        <property name="Name" column="name" length="64" not-null="true" />

        <set name="Ingredients" table="ingredient" fetch="join" lazy="true" inverse="true">
            <key column="product_id" />
            <one-to-many class="LanchesAdmin.Core.Domain.Ingredient, LanchesAdmin.Core" />
        </set>
    </class>
</hibernate-mapping> 
```

我看过几个相关的问题，但他们都告诉我使用 IList，而这正是我正在做的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T12:22:28.120

原因是您使用的是集合。而且`PersistentGenericSet<T>`根本不实现`IList<T>`接口。

我认为你应该简单地制作 type 的属性`IEnumerable<Ingredient>`。
这解决了两个问题：

1.  你摆脱了你提到的错误
2.  您的类的 API 直接传达您的类的消费者不允许通过该属性添加成分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T12:22:55.617

你想要一个清单、包还是套装？您的域模型包含 a`IList<T>`但您已将其映射为`<set>`.

将您的映射更改为`<bag>`或`<list>`或将您的域模型更改为使用`ISet<T>`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T12:23:14.783

将属性的类型更改为`ISet`from `IList`。

或将映射从 更改`<set>`为`<list>`。

# android - layout_weight=1.0 没有效果

> ID：12727033
> 
> 赞同：3
> 
> 时间：2012-10-04T12:12:14.150
> 
> 标签：android, android-layout

```
<LinearLayout android:orientation="horizontal"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <TextView
        android:id="@+id/tv_label_client_host"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:ems="10"
        android:text="@string/label_host" />
    <EditText
        android:id="@+id/et_client_host"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:ems="10" 
        android:inputType="text"
        android:layout_weight="1.0"
        android:lines="1" />
</LinearLayout> 
```

我希望`EditText`通过水平填充剩余的整个空间，但`TextView`获得`EditText`可用空间的 1/2。这`LinearLayout`是放置在另一个垂直的内部`LinearLayout`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:20:47.497

去除那个

```
 android:ems="10" 
```

对于所有元素，我在这里进行了测试并且它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:15:20.887

将 TextView 的宽度设置为 0dp....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T12:24:26.963

```
<LinearLayout android:orientation="horizontal"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"

    android:weightSum="1"
>

    <TextView
        android:id="@+id/tv_label_client_host"
        android:layout_weight="0"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:ems="10"
        android:text="@string/label_host" />
    <EditText
        android:id="@+id/et_client_host"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:ems="10" 
        android:inputType="text"
        android:layout_weight="1"
        android:lines="1" />
</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T12:26:40.960

您必须为布局中的每个组件赋予权重。这样，它就会知道每个人的重量。所以你可以试试这个：

```
<LinearLayout android:orientation="horizontal"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:weightsum="1">

    <TextView
        android:id="@+id/tv_label_client_host"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:ems="10"
        android:layout_weight="0.3"
        android:text="@string/label_host" />
    <EditText
        android:id="@+id/et_client_host"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:ems="10" 
        android:inputType="text"
        android:layout_weight="0.7"
        android:lines="1" />
</LinearLayout> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T12:28:34.483

如果可能的话，`android:ems="10"`从 TextView 中删除并将 TextView 的权重添加到`android:layout_weight="0"`

# java - Java 应用程序多次抛出相同的异常

> ID：12727034
> 
> 赞同：0
> 
> 时间：2012-10-04T12:12:19.913
> 
> 标签：java, exception-handling, jboss, out-of-memory

我们在我们的应用程序中使用这些技术。Java、JBoss、JMS、EJB。

```
Package com/net/config/server/security/AccessController.java

public void checkGlobalPermissions throws NotAuthorizedException {

throw new NotAuthorizedException();
}

Package com/net/config/server/services/ejb/jboss/ServiceSecurityProxy.java

void checkCreatePermission(){
AccessController ac = AccessController.getInstance();
ac.checkGlobalPermissions();
}

Package com/net/config/server/services/ejb/ServiceBean.java
try {
        securityProxy.checkCreatePermission(type, folderId);
    } catch (Exception ex) {
        Log.error(this, "Exception in check readonly permission for     type:"+type, ex);
        return true;
    }
    return false; 
```

当我们在 jboss 服务器上运行我们的应用程序时，我们会从这段代码中得到无限的异常。这是异常堆栈跟踪。

```
2012-09-20 11:55:17,792 ERROR [com.powerup.configmgr.server.services.ejb.ServiceBean]        (http-0.0.0.0-8881-4)     
Exception in check readonly permission for type:Folder
com.net.config.server.security.NotAuthorizedException: securityException.authenFailed
       at       com.net.config.server.security.AccessController.checkGlobalResourcePermissions(AccessController.java:168)
       at com.net.config.server.services.ejb.jboss.ServiceSecurityProxy.checkCreatePermission(ServiceSecurityProxy.java:219)
    at com.net.config.server.services.ejb.ServiceBean.checkReadOnlyPermission(ServiceBean.java:92)
    at com.net.config.server.services.ejb.ServiceBean.getItemDetails(ServiceBean.java:491)
    at com.net.config.server.services.ejb.ServiceBean.getAllItemDetails(ServiceBean.java:395)
at sun.reflect.GeneratedMethodAccessor2272.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.invocation.Invocation.performCall(Invocation.java:345)
    at org.jboss.ejb.StatelessSessionContainer$ContainerInterceptor.invoke(StatelessSessionContainer.java:214)
    at org.jboss.ejb.plugins.SecurityProxyInterceptor.invoke(SecurityProxyInterceptor.java:175)
    at org.jboss.resource.connectionmanager.CachedConnectionInterceptor.invoke(CachedConnectionInterceptor.java:185)
    at org.jboss.ejb.plugins.StatelessSessionInstanceInterceptor.invoke(StatelessSessionInstanceInterceptor.java:130)
    at org.jboss.webservice.server.ServiceEndpointInterceptor.invoke(ServiceEndpointInterceptor.java:51)
    at org.jboss.ejb.plugins.CallValidationInterceptor.invoke(CallValidationInterceptor.java:48)
    at org.jboss.ejb.plugins.AbstractTxInterceptor.invokeNext(AbstractTxInterceptor.java:105)
    at org.jboss.ejb.plugins.TxInterceptorCMT.runWithTransactions(TxInterceptorCMT.java:335)
    at org.jboss.ejb.plugins.TxInterceptorCMT.invoke(TxInterceptorCMT.java:166)
    at org.jboss.ejb.plugins.SecurityInterceptor.invoke(SecurityInterceptor.java:139)
    at org.jboss.ejb.plugins.LogInterceptor.invoke(LogInterceptor.java:192)
    at org.jboss.ejb.plugins.ProxyFactoryFinderInterceptor.invoke(ProxyFactoryFinderInterceptor.java:122)
    at org.jboss.ejb.plugins.AbstractInterceptor.invoke(AbstractInterceptor.java:96)
    at com.powerup.service.jboss.plugins.RetryInterceptor.invoke(RetryInterceptor.java:81)
    at org.jboss.ejb.SessionContainer.internalInvoke(SessionContainer.java:624)
    at org.jboss.ejb.Container.invoke(Container.java:873)
at sun.reflect.GeneratedMethodAccessor319.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:141)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:80)
at org.jboss.mx.server.Invocation.invoke(Invocation.java:72)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:249)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:644)
    at org.jboss.invocation.http.servlet.InvokerServlet.processRequest(InvokerServlet.java:147)
    at org.jboss.invocation.http.servlet.InvokerServlet.doPost(InvokerServlet.java:209)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:810)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
    at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:81)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)
    at org.jboss.web.tomcat.security.CustomPrincipalValve.invoke(CustomPrincipalValve.java:39)
    at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:153)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:407)
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:59)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:856)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:744)
    at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)
    at org.apache.tomcat.util.net.MasterSlaveWorkerThread.run(MasterSlaveWorkerThread.java:112)
    at java.lang.Thread.run(Thread.java:619) 
```

此异常在 6 小时内抛出 2000 次。我无法确定这可能是什么原因。但注意到`ServiceSecurity class`不处理这个`NotAuthorized Exception`。它在生产盒中，因此无法在内部重现该问题。这会导致更多数量的`JMS`spyobject 异常并最终`Out of memory`出现错误。所以有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:19:47.810

> 但注意到`ServiceSecurity[Proxy]`该类不处理这个`NotAuthorizedException`

我怀疑`NotAuthorizedException`是 a `RuntimeException`，因此`ServiceSecurityProxy`不需要处理或声明它。

对我来说，您的代码看起来完全符合我的预期。也许您期望`ServiceSecurityProxy`注射不同的药物？

# c# - Visual Studio 2012 在错误的路径中搜索项目？

> ID：12727039
> 
> 赞同：4
> 
> 时间：2012-10-04T12:12:51.527
> 
> 标签：c#, vb.net, path, project, visual-studio-2012

当我尝试在 VS2012 中加载项目时，加载失败并说它无法在该位置找到我的项目文件`C:\...`

但是，此位置不是在项目文件或解决方案文件中找到的位置。

有谁知道我在哪里可以找到/更改错误的路径参考？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T07:57:28.427

就我而言，我关闭了解决方案；检查工作区映射；然后在 Windows 资源管理器中打开“查看隐藏文件夹”会显示一个新的（对于 VS2012）“$tf”目录和 SUO 文件

我完全删除了本地硬盘驱动器上的目录（可以肯定），然后使用“覆盖所有文件，即使本地...”选项勾选了“获取特定版本”；强制完整下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T08:35:51.500

问题已经解决了！重新启动 Team Foundation Server 后，问题就消失了。这篇文章的答案很好地总结了在 Visual Studio 中的项目出现问题时要检查的内容。谢谢大家的努力。

# c# - 通过在 XAML 中滚动检测 WebView 高度

> ID：12727041
> 
> 赞同：3
> 
> 时间：2012-10-04T12:13:00.183
> 
> 标签：c#, xaml, webview, windows-8, microsoft-metro

我真的需要能够计算出一段 HTML 在给定的`WebView`. 这对我正在尝试构建的项目非常重要。我知道这不是立即可能的，但我可以确定 WebView 上是否存在滚动条我可能能够增加视图的高度直到它消失。

对此有什么想法吗？或任何替代解决方案/建议？我考虑使用 HTMLAgilityPack（现在[移植到 Metro](http://fizzlerex.codeplex.com)）将它转换为 TextBlock，但 HTML 太复杂了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T09:06:47.930

如果您可以控制 HTML，请添加以下 javascript：

```
function getDocHeight() {
    var D = document;
    return Math.max(
        Math.max(D.body.scrollHeight, D.documentElement.scrollHeight),
        Math.max(D.body.offsetHeight, D.documentElement.offsetHeight),
        Math.max(D.body.clientHeight, D.documentElement.clientHeight)
    );
} 
```

（来自[http://james.padolsey.com/javascript/get-document-height-cross-browser/](http://james.padolsey.com/javascript/get-document-height-cross-browser/)）

并称之为而不是`alert`：

```
window.external.notify(getDocHeight()); 
```

然后实现`ScriptNotify`事件：

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webview.scriptnotify.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webview.scriptnotify.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-31T19:25:11.317

这可能是一个很好的解决方案，但设备像素密度仍然存在问题。如果您在 WP 上运行代码，则转换可能如下所示：

```
private double PixelsToLogicalPixels(double pixels)
{
     var info=Windows.Graphics.Display.DisplayInformation.GetForCurrentView();
     return pixels / info.RawPixelsPerViewPixel;
}
private double LogicalPixelsToPixels(double pixels)
{
     var info = Windows.Graphics.Display.DisplayInformation.GetForCurrentView();
     return pixels * info.RawPixelsPerViewPixel;
} 
```

# php - 默认 date() 应该提前 3 个月

> ID：12727047
> 
> 赞同：3
> 
> 时间：2012-10-04T12:13:40.117
> 
> 标签：php

我的服务器有很多应用程序实例。

我遇到了一个问题，我的一个应用程序实例需要在未来的日期进行测试。即我想测试应用程序，因为它在 2013 年运行。

如果我更改系统日期，它会正常工作，但其他实例也会生效。

我只想要一个实例的未来日期，其余的应该按原样工作。

即如果我使用 date('Ymd'); 它应该跳 3 个月并显示未来的日期。

而且我不想在默认日期中添加秒数，因为这可能是我的应用程序的巨大变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T12:17:24.040

这就是为什么您以*可测试*的方式编写应用程序的原因。

不好：

```
function doSomething() {
    $date = date('Y-m-d');
    ...
} 
```

好的：

```
function doSomething($ts = null) {
    if (!$ts) {
        $ts = time();
    }
    $date = date('Y-m-d', $ts);
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T12:19:49.183

您可以制作自己的日期功能。它将作为所有日期使用的挂钩。

```
function mydate($format) {
    $jump = ' +3 months';
    return date($format, strtotime(date($format) . $jump));
} 
```

您可以更改所有出现的`date`to `mydate`。如果您决定切换回现在，请离开`$jump = ''`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T12:16:32.227

你可以做

```
date('Y-m-d', time() + 3 * 30 * 24 * 3600); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T12:21:06.347

我推荐使用 PHP5 DateTime 类。它们有点罗嗦，但比旧式 PHP 日期处理函数要强大得多。

```
$dateNow = new DateTime();
$dateAhead = $dateNow->add(DateInterval::createFromDateString('3 months'));

print $dateAhead->format('Y-m-d'); 
```

# java - jsp中的嵌入式小程序

> ID：12727052
> 
> 赞同：0
> 
> 时间：2012-10-04T12:13:58.117
> 
> 标签：java, jsp, applet

我在jsp中嵌入了带有applet标签的applet，这不是在jsp中集成applet的方法，所以我用jsp替换了我的applet标签：plugin但我在applet中没有得到任何图像。下面是代码片段

```
<applet     name="viewerApplet"     id="TViewerApplet"     width="100%"     height="500"     code="com.applet.TViewerApplet.class"     align="baseline"     codebase="."     mayscript="mayscript"     archive="SignedViewer.jar,cmbview81.jar"> </applet> 
```

替换为以下代码

```
 <jsp:plugin code="com.applet.TViewerApplet.class" codebase="." type="applet" name="viewerApplet"     width="100%"     height="500" archive="SignedViewer.jar,cmbview81.jar"> 
    </jsp:plugin> 
```

怎么了。请指导。编辑：使用小程序标签它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:17:36.063

你混淆了术语。

JSP 是服务器技术，它呈现一个 HTML 页面。

Applet 是客户端技术，它在 HTML 页面内部工作（可能由 JSP 呈现）。

所以，当 Applet 开始运行时，JSP 早就完成了。像您一样使用applet 标记，因为对于浏览器而言，页面是否由JSP 生成并不重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:21:28.067

将您的applet jar 放在放置您的jsp 的文件夹中。

前任。

在 WEB-INF 文件夹旁边（包括 yoru jsp 和您的 applet jars）。

# tabs - 每 12 小时运行一次 cron 作业

> ID：12727054
> 
> 赞同：0
> 
> 时间：2012-10-04T12:13:58.893
> 
> 标签：tabs, cron

请帮助我在每天上午 01:00 运行一个 cron 作业。我目前使用的格式在 12:00 发送邮件，但它每分钟都在循环，任何帮助将不胜感激。这是我目前的格式

```
0 */12 * * * 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:20:09.613

我想你想要

```
0 1 * * * cmd 
```

凌晨 1 点运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:20:01.760

每天凌晨 1 点应该是这样的

```
00 1 * * * 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T12:21:21.557

每天早上 1 点：

```
0 0 1 1/1 * ? * 
```

# php - 这种场景的最优sql解决方案

> ID：12727058
> 
> 赞同：1
> 
> 时间：2012-10-04T12:14:07.827
> 
> 标签：php, sql

我正在研究链接缩短脚本。这是它的作用：

如果链接尚未缩短，它会检查链接，如果已登录，它会缩短链接并添加所有者（用户）ID，以便用户可以在他们的仪表板中看到它。
但如果它已经缩短了，它会给出缩短的版本。这可以防止缩短链接的其他用户在他们的仪表板中看到它。现在我想添加一种方法，以便缩短它的人会在他们的仪表板中看到它。
在我看来有两种可能：

1.  如果提交者 ID 不同，则创建单独的 sql 记录。
2.  添加一个类似的字段`new_owners`，每次相同的链接被不同的用户缩短时，它将以逗号分隔的用户名/ID 进行更新。

哪个是最好的选择，或者是否还有其他更好的选择？哪个占用资源少，速度快？干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:27:41.553

到目前为止，实现这一点的最简单和最快的方法是在每次缩短链接时创建一个新记录。将索引放在短链接、链接、ID 和用户 ID 上。

好处：

*   用户可以在他们的仪表板中看到缩短的链接
*   他们可以在不影响其他人的情况下删除这些链接
*   快速地
*   只有简单的查询

缺点：

*   将使用更多空间，因为每个链接都保存了多次
*   为索引使用额外的空间

# jquery - jquery中的多类选择器

> ID：12727059
> 
> 赞同：1
> 
> 时间：2012-10-04T12:14:25.467
> 
> 标签：jquery

我有这个 CSS 角色

```
.sf-menu a.sf-with-ul{padding-left:20px} 
```

我想用 jquery 改变这个角色

我尝试了以下命令但没有成功

```
$(function()
{
     $("a.sf-with-ul").css("padding-left", "10px");
     $("a").hasClass(".sf-with-ul").css("padding-left", "10px");
     $("a").filter(".sf-with-ul").css("padding-left","10px")
}); 
```

问题是什么？

ps

我是否使用 jquery 更改此 css 的滚动？

```
.sf-menu li ul li a 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:24:37.450

**尝试这个 ：**

```
$(function()
{
 $(".sf-menu a.sf-with-ul").css("padding-left", "10px");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:16:01.183

尝试像这样放置 !important ：

```
$(function()
{
     $("a.sf-with-ul").css("padding-left", "10px !important");
     $("a").hasClass(".sf-with-ul").css("padding-left", "10px !important");
     $("a").filter(".sf-with-ul").css("padding-left","10px !important")
}); 
```

# jquery - 为每个人创建 ID （包括嵌套）在 jQuery 可排序列表中

> ID：12727064
> 
> 赞同：5
> 
> 时间：2012-10-04T12:14:35.593
> 
> 标签：jquery, html, nested, jquery-ui-sortable

我有一个带有嵌套`LI`项目的可排序列表。我正在寻找为组中`ID`的每个人创建一个`LI`。

例子。如果我有这个：

```
<li class="main"> Cat 0
    <ul class="subCat">
        <li>Subcat 0
            <ul class="subCat">
                <li>Sub-Subcat 0
                    <ul class="subCat"></ul>
                </li>
            </ul>
        </li>
        <li>Subcat 1</li>
    </ul>
</li> 
```

好的，那些`ul.subCat`是用来嵌套其他`li`项目的。我想创建一个函数来将`ID`s 添加到`li`元素及其`li`子元素中。每次订单更改都会调用此函数。

结果应该是这样的：

```
<li class="main" id="cat_0"> Cat 0
    <ul class="subCat">
        <li id="cat_0_0">Subcat 0
            <ul class="subCat">
                <li id="cat_0_0_0">Sub-Subcat 0
                    <ul class="subCat"></ul>
                </li>
            </ul>
        </li>
        <li id="cat_0_1">Subcat 1</li>
    </ul>
</li> 
```

并且，对于每个`li.main`元素，重复故事以达到 4 个级别（0 到 3）。

我的实际代码是这个：

```
// level 0
target = $('#ulMenu >li');
for( i=0; i<=target.length-1; i++ ){
    target.eq(i).attr('id', 'cat_' + i).addClass('main');
}

// level 1
//------------------------------------------------------------------
$('#ulMenu >li.main').each(function(){

    target = $(this).children('ul').children('li');
    for( i=0; i<=target.length-1; i++ ){
        father = target.eq(i).parent('ul').parent('li').attr('id').split('_')[1];
        target.eq(i).attr('id', 'cat_' + padre + '_' + i);
    } 
```

我必须知道如何将`ID`s 添加到其余元素中。我正在尝试，但找不到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:32:34.127

像这样的事情应该这样做......

```
$('#ulMenu').children('li').each(function(cat) {

    $(this).attr('id', 'cat_' + cat).children('ul').children('li').each(function(sCat) {

        $(this).attr('id', 'cat_' + cat + '_' + sCat).children('ul').children('li').each(function(ssCat) {

            $(this).attr('id', 'cat_' + cat + '_' + sCat + '_' + ssCat);
        });
    });
});​ 
```

示例：http: [//jsfiddle.net/6YR5p/2/](http://jsfiddle.net/6YR5p/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T12:50:05.417

这是一个递归解决方案，可用于您想要的任何深度：

```
function menuID(el, base) {
    base = base || 'cat';
    $(el).filter('li').each(function(i) {
        this.id = base + '_' + i;
        menuID($(this).children('ul').children('li'), this.id);
    });
};

menuID('.main');​ 
```

见[http://jsfiddle.net/alnitak/XhnYa/](http://jsfiddle.net/alnitak/XhnYa/)

或者，这是一个作为 jQuery 插件的版本：

```
(function($) {
    $.fn.menuID = function(base) {
        base = base || 'cat';
        this.filter('li').each(function(i) {
            this.id = base + '_' + i;
            $(this).children('ul').children('li').menuID(this.id);
        });
    };
})(jQuery);

$('.main').menuID(); 
```

见[http://jsfiddle.net/alnitak/5hkQU/](http://jsfiddle.net/alnitak/5hkQU/)

# json - 黑莓上的 JSON 解析

> ID：12727066
> 
> 赞同：1
> 
> 时间：2012-10-04T12:14:38.710
> 
> 标签：json, blackberry

我正在使用 org.json.me 在 BlackBerry 上解析 JSON，但我无法解析结果。模拟器控制台说：**没有堆栈跟踪**

这是我在从我的 restclient 接收到 JSON 字符串后解析 JSON 的代码

```
 try {
        JSONObject outer=new JSONObject(data);     
        JSONArray ja = outer.getJSONArray("status");
        JSONArray arr=ja.getJSONArray(0);               
        System.out.println(arr);
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

这是从服务器获取 JSON 的片段代码

```
public PromoThread(final String url, final ResponseCallback callback){
    Thread t = new Thread(new Runnable(){
        public void run() {
            waitScreen = new WaitPopupScreen();

            System.out.println("Log >> Promo thread run...");
            synchronized (UiApplication.getEventLock()){
                UiApplication.getUiApplication().pushScreen(waitScreen);
            }
            //network call
            try {
                conn = (HttpConnection) new ConnectionFactory().getConnection(url).getConnection();
                conn.setRequestMethod(HttpConnection.GET);
                conn.setRequestProperty("User-Agent", "Profile/MIDP-1.0 Confirguration/CLDC-1.0");

                if (conn.getResponseCode() == HttpConnection.HTTP_OK) {
                    in = conn.openInputStream();
                    // parser.parse(in, handler);
                    //buff.append(IOUtilities.streamToBytes(in));
                    //result = buff.toString();
                    results = new String(IOUtilities.streamToBytes(in));
                    //System.out.println("Log >> Result: " + results);
                    UiApplication.getUiApplication().invokeLater(
                            new Runnable() {
                                public void run() {
                                    //UiApplication.getUiApplication().popScreen(waitScreen);
                                    callback.callback(results, waitScreen);
                                }
                    }); 
                }
            } catch (Exception ex) {
                ex.printStackTrace();
            } finally {
                try {
                    if (in != null) {
                        in.close();
                    }
                    conn.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
    });

    //start thread
    t.start(); 
} 
```

谢谢你的帮助

# javascript - 使用正则表达式替换块中的特殊字符

> ID：12727069
> 
> 赞同：-1
> 
> 时间：2012-10-04T12:14:57.580
> 
> 标签：javascript, regex

我需要替换 [code] 块之间的所有 < 和 >。我不想选择和替换 [code] 中的所有内容，我只想在其中选择 < 和 >，然后将其临时替换为另一个字符。进行其他替换，然后将它们返回到 [code] 中的 < >。

我使用的解决方案：

```
replace(/<(?=[^\[]*\[\/code\])/gi,"&_lt_;"); 
replace(/>(?=[^\[]*\[\/code\])/gi,"&_gt_;"); 

DO OTHER REPLACEMENT/CUSTOMIZATION HERE 

replace(/&_lt_;/gi,"<"); 
replace(/&_gt_;/gi,">"); 
```

唯一的问题是，如果 [code] 之间的内容包含字符 [ 它在块中的该字符之前不起作用。我怎样才能解决这个问题？

有效的例子：

```
<b>
[code]
<form action="nd.php" method="post">
<b>
<strong>
[/code]
<b> 
```

不起作用的例子：

```
<b>
[code]
<form action="nd.php" method="post">
<b>
$_POST[
<strong>
[/code]
<b> 
```

编辑：请只提供简单的正则表达式替换解决方案。我不能对这个问题使用回调函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:45:39.930

*对于“有效的示例”，*链接问题的接受答案对我不起作用。但是，另一个答案*确实如此*- 它也适用于“*不起作用的示例*”（虽然有一个错字）。

尝试以下正则表达式：

```
/(\[code\][\s\S]*?\[\/code\])|<[\s\S]*?>/g 
```

在`replace()`函数中，您将使用：

```
.replace(/(\[code\][\s\S]*?\[\/code\])|<[\s\S]*?>/g, '$1'); 
```

**编辑**
如果我理解正确，您的**最终目标**是将所有内容保持在`[code][/code]`同一范围内 - 但能够对这些标签*之外*的所有 HTML 标签进行替换（这可能意味着也可能不意味着完全剥离字符） ?

如果是这种情况，就不需要一长串正则表达式；可以使用上面的正则表达式（稍作修改），它可以涵盖很多情况。将正则表达式/替换与回调函数结合起来处理您的额外替换：

```
var replaceCallback = function(match) {
    // if the match's first characters are '[code]', we have a '[code][/code]' block
    if (match.substring(0, 6) == '[code]') {
        // do any special replacements on this block; by default, return it untouched
        return match;
    }
    // the match you now have is an HTML tag; it can be `<tag>` or `</tag>`
    // do any special replacements; by default, return an empty string
    return '';
}

str = str.replace(/(\[code\][\s\S]*?\[\/code\])|(<[\s\S]*?>)/g, replaceCallback); 
```

一个正则表达式修改是在 html-tag 部分（正则表达式的第二部分）周围添加一个组。这将允许它被传递给回调函数。

**更新**（`[code]`不是文字）
根据评论，我意识到标签`[code]`不是文字 - 你想覆盖所有 BBCode 样式标签。这和上面的例子一样简单（在回调中更容易）。代替`code`正则表达式中的单词，您可以使用它`[a-z]+`来覆盖所有字母字符。然后，在回调中，您可以只检查第*一个*字符；如果是`[`，则您在代码块中 - 否则您有一个位于代码块之外的 HTML 标记：

```
var replaceCallback = function(match) {
    // if the match's first character is '[', we have a '[code][/code]' block
    if (match.substring(0, 1) == '[') {
        // do any special replacements on this block; by default, return it untouched
        return match;
    }
    // the match you now have is an HTML tag; it can be `<tag>` or `</tag>`
    // do any special replacements; by default, return an empty string
    return '';
}

str = str.replace(/(\[[a-z]+\][\s\S]*?\[\/[a-z]+\])|(<[\s\S]*?>)/gi, replaceCallback); 
```

另请注意，我`i`在正则表达式的选项中添加了一个忽略大小写的选项（否则您需要`[a-zA-Z]`处理大写字母）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:41:16.883

这是我编辑的答案。再次抱歉。

```
str = str.replace(/(\[code\])(.*?)(\[\/code\])/gm,function(a,b,c,d) {
    return b + c.replace(/</g,'&lt;').replace(/>/g,'&gt;') + d;
}); 
```

# json - 如何编写 linq 查询或使用存储过程在 MVC4 中构建 json 对象？

> ID：12727075
> 
> 赞同：0
> 
> 时间：2012-10-04T12:15:19.710
> 
> 标签：json, asp.net-mvc-4, asp.net-web-api

大家好，我有一个数据库，其中有一些名为

```
 [Options],[ProductAttributes],[Products],[ProductSKU],[ProductSKUOptionMappings] 
```

我已将此作为实体模型添加到我的项目中，现在我想为此编写一个 linq 查询，我可以从上面指定的表中获取这些列

基于这个存储过程

```
 ALTER procedure [dbo].[GetProductDetail]
   (
     @ProductID bigint
   )
   as
   begin
   Select P.ProductName,  P.ProductDescription, PA.SKU, PA.OptionId,O.OptionName,  PA.Value, PS.ImageURL from ProductSKU PS 
   INNER JOIN ProductAttributes PA ON PS.SKU = PA.SKU 
   INNER JOIN Products P ON P.ProductId = PS.ProductId
   INNER JOIN Options O ON O.OptionsId = PA.OptionId 
   WHERE PS.ProductId = @ProductID
   end 
```

我想将此查询转换为 linq 查询或将其用作 Storedprocedure 来获取我所需的 Json 对象

我的存储过程的输出看起来像这样

```
 ProductName                     ProductDescription        SKU    OptionId    OptionName  Value   ImageURL 
Tactical Long Sleeve Shirts     Hemline side slits        Shirt_1001  1          Color      Grey    C:\Users\Administrator\Desktop\Images\LongSleeveShirt.jpg
 Tactical Long Sleeve Shirts    Hemline side slits            Shirt_1001  2      Size        S          C:\Users\Administrator\Desktop\Images\LongSleeveShirt.jpg
 Tactical Long Sleeve Shirts    Hemline side slits            Shirt_1001  3       Fit     Regular   C:\Users\Administrator\Desktop\Images\LongSleeveShirt.jpg 
```

每个产品可能有不同的 SKU，像上面这样，所以任何人都可以在这里帮助我如何构建我的 json 对象，看起来像这样

```
 i want my json object to be in this format

     var productdetails={
"productId": "1",
"productname": "Casualshirts",
"productSkus": [
    {
        "Skuimage": "URL",
        "SKU": [
            {
                "ProducSKU": "Shoe1001",
                "Options": [
                    {
                        "productOptions": [
                            {
                                "OptionID": "1",
                                "optionname": "Color",
                                "value": "Black"
                            },
                            {
                                "OptionID": "2",
                                "optionname": "Size",
                                "value": "S"
                            },
                            {
                                "OptionID": "3",
                                "optionname": "Fit",
                                "value": "Regular"
                            }
                        ]
                    }
                ]
            },
            {
                "ProducSKU": "Shoe1002",
                "Options": [
                    {
                        "productOptions": [
                            {
                                "OptionID": "1",
                                "optionname": "Color",
                                "value": "Black"
                            },
                            {
                                "OptionID": "2",
                                "optionname": "Size",
                                "value": "S"
                            },
                            {
                                "OptionID": "3",
                                "optionname": "Fit",
                                "value": "Regular"
                            }
                        ]
                    }
                ]
            },
            {
                "ProducSKU": "Shoe1003",
                "Options": [
                    {
                        "productOptions": [
                            {
                                "OptionID": "1",
                                "optionname": "Color",
                                "value": "Black"
                            },
                            {
                                "OptionID": "2",
                                "optionname": "Size",
                                "value": "S"
                            },
                            {
                                "OptionID": "3",
                                "optionname": "Fit",
                                "value": "Regular"
                            }
                        ]
                    }
                ]
            }
        ] 
```

这是我的模型课

```
 public class ProductItems
{
    public long ProductID { get; set; }
    public string ProductName { get; set; }
    public string ImageURL { get; set; }
    public List<productSKU> SKUs { get; set; }
}

public class productSKU
{
    public string productsku { get; set;}
    public string SKUImageURL { get; set;}
    public List<options> oPTIONS { get; set; }
}

public class options
{
    public long OptionID { get; set; }
    public string OptionName { get; set;}
    public string OptionValue { get; set;}
} 
```

任何人都可以帮助我如何构建我的存储过程或 linq 查询如上 json pbjkect 在此先感谢...

这就是我试图将我的数据绑定到我的模型的方式

```
 public IEnumerable<ProductItems> ProductDeatils(long ProductID)
    {
        var productdeatils = products.ExecuteStoreQuery<ProductItems>("GetProductDetail @ProductID ", new SqlParameter("@ProductID", ProductID));
        var data=new List<ProductItems>();
        foreach (var prod in productdeatils)
        {
            ProductItems items = new ProductItems();
            items.ProductID = prod.ProductID;
            items.ProductName = prod.ProductName;
            items.SKUs
        }

        return data;
    } 
```

我被我的类中的属性数量和我从我的程序中检索的数据库列的数量困住了我如何将它们映射到我的模型

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:34:38.690

假设您已从数据层检索模型的实例，您`ProductItems`可以将其投影到匿名对象中以传递给 JsonResult 以获得所需的 JSON 结构：

```
public ActionResult SomeAction()
{
    ProductItems model = ... retrieve the model from your data layer

    var result = new
    {
        productId = model.ProductID,
        productname = model.ProductName,
        productSkus = model.SKUs.Select(sku => new
        {
            Skuimage = sku.SKUImageURL,
            SKU = new[]
            {
                new 
                {
                    ProducSKU = sku.productsku,
                    Options = new[]
                    {
                        new
                        {
                            productOptions = sku.oPTIONS.Select(opt => new
                            {
                                OptionID = opt.OptionID,
                                optionname = opt.OptionName,
                                value = opt.OptionValue
                            })
                        }
                    }
                }
            }
        })
    };

    return Json(result, JsonRequestBehavior.AllowGet);
} 
```

# iphone - SLComposeViewController

> ID：12727079
> 
> 赞同：4
> 
> 时间：2012-10-04T12:15:22.523
> 
> 标签：iphone, ios, facebook, social

```
-(IBAction)post:(id)sender
{
if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {
    mySocialComposer = [[SLComposeViewController alloc]init];
    mySocialComposer = [SLComposeViewController    
    composeViewControllerForServiceType:SLServiceTypeFacebook];
    [mySocialComposer setInitialText:@"Hello World"];
    [mySocialComposer addImage:[IIImage imageNamed:@"myImage.png"]];

    [self presentViewController:mySocialComposer animated:YES completion:nil];
 }

 [mySocialComposer setCompletionHandler:^(SLComposeViewControllerResult result){

    NSString *outout = [[NSString alloc] init];

    switch (result) {
        case SLComposeViewControllerResultCancelled:
            outout = @"Post Cancled";
            break;
            case SLComposeViewControllerResultDone:
            outout = @"Post Done";

        default:
            break;
    }
    UIAlertView *myalertView = [[UIAlertView alloc]initWithTitle:@"FaceBook"  
    message:outout delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
    [myalertView show];
    }];

} 
```

我想在没有图像的情况下在 facebook 上发布一些内容，但是当我使用图像发布时它不起作用并给出错误警报。但是当我在帖子中添加图片时，它会成功发布。我只希望我发布没有图像。有没有办法做到这一点。?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:59:32.683

尝试摆脱 SLComposeViewController 的 alloc 和 init 行，因为您正在使用返回自动释放对象的类方法 composeViewControllerForServiceType 重新创建.....（除非在 ARC 下）

所以它看起来像这样：

```
-(IBAction)post:(id)sender
{
if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {
mySocialComposer = [SLComposeViewController    
composeViewControllerForServiceType:SLServiceTypeFacebook];
[mySocialComposer setInitialText:@"Hello World"];

[self presentViewController:mySocialComposer animated:YES completion:nil];
 }

 [mySocialComposer setCompletionHandler:^(SLComposeViewControllerResult result){
NSString *outout = [[NSString alloc] init];

switch (result) {
    case SLComposeViewControllerResultCancelled:
        outout = @"Post Cancled";
        break;
        case SLComposeViewControllerResultDone:
        outout = @"Post Done";

    default:
        break;
}
UIAlertView *myalertView = [[UIAlertView alloc]initWithTitle:@"FaceBook"  
message:outout delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
[myalertView show];
}]; 
```

否则代码对我来说看起来不错，除非你在其他`mySocialComposer`地方用这个实例做一些事情

# javascript - 使用javascript和Jquery检索url变量的函数？

> ID：12727081
> 
> 赞同：2
> 
> 时间：2012-10-04T12:15:34.543
> 
> 标签：javascript, jquery

在我的脚本中有一个简单的列表显示编辑链接

```
<ul>
<li><a href="edit.php?id=5" class="edit">click here</a></li>
<li><a href="edit.php?id=5" class="edit">click here</a></li>
<li><a href="edit.php?id=5" class="edit">click here</a></li>
<li><a href="edit.php?id=5" class="edit">click here</a></li>
</ul> 
```

我需要的是读取变量 id 以便我可以通过 .ajax 调用发送它，我尝试了这个函数

```
$(document).ready(function(){
    function getUrlVars() {
        var vars = [], hash;
        var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1)
                                         .split('&');
        for(var i = 0; i < hashes.length; i++)
        {
            hash = hashes[i].split('=');
            vars.push(hash[0]);
            vars[hash[0]] = hash[1];
        }
        return vars;
     }
     $('.edit').click(function(){
         var test = getUrlVars()["id"];
         alert(test);
     });
}); 
```

当我单击链接时，警报消息显示`undefined`。

我尝试了另一个功能：

```
$(document).ready(function(){
    var urlParams = {};
    (function () {
        var match,
               pl = /\+/g,  // Regex for replacing addition symbol with a space
           search = /([^&=]+)=?([^&]*)/g,
           decode = function(s) { 
               return decodeURIComponent(s.replace(pl, " ")); 
           },
           query  = window.location.search.substring(1);
           while (match = search.exec(query))
               urlParams[decode(match[1])] = decode(match[2]);
     })();
     $('.edit').click(function(){
         var test = urlParams["id"];
         alert(test);
     });
 }); 
```

...但即使这样也显示了警报消息`undefined`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:20:12.953

**您尝试的方法不以 URL 作为参数，而是解析当前的 URL 参数**（即您兄弟中的 URL）。只需像这样修改第一个方法以使其工作：

```
$(function() {
    function getUrlVars(url) {
        var vars = [], hash;
        var hashes = url.slice(url.indexOf('?') + 1).split('&');
        for(var i = 0; i < hashes.length; i++) {
            hash = hashes[i].split('=');
            vars.push(hash[0]);
            vars[hash[0]] = hash[1];
        }
        return vars;
    }
    $('.edit').click(function() {
        var href = $(this).attr("href");
        var test = getUrlVars(href)["id"];
        alert(test);
    });
}); 
```

旁注：您也可以修改第二个，它们都做同样的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-31T02:32:36.137

你可以试试这个：

## JavScript

```
function getUrlParams() {
    var params = {};
    location.search.replace(/\?/g, '').split('&').forEach(function(item) {
      params[item.split('=')[0]] = item.split('=')[1];
    });
    return params;
} 
```

### 该函数将返回一个像这样的对象：

```
{
  firstName: 'Jordan',
  lastName: 'Belfort',
  position: 'The Wolf of Wall Street',
} 
```

### 用法

```
var urlParams = getUrlParams();
alert('Hello ' + urlParams.firstName + ' ' + urlParams.lastName); 
```

**注意：**实际上不需要使用 location.href 并将 url 拆分为 '?'，因为我们可以使用`location.search`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T12:20:14.547

作为您的问题的替代方案，为什么不将`id`部分`href`放入`data`参数并读取它？它可以让您不必剖析 URL。试试这个：

```
<ul>
    <li><a href="edit.php?id=5" data-id="5" class="edit">click here</a></li>
    <li><a href="edit.php?id=6" data-id="6" class="edit">click here</a></li>
    <li><a href="edit.php?id=7" data-id="7" class="edit">click here</a></li>
    <li><a href="edit.php?id=8" data-id="8" class="edit">click here</a></li>
</ul> 
```

```
$('.edit').click(function(){
    var id = $(this).data("id");
    alert(id);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T12:18:37.297

试试这个：

```
function getParameterByName( name )
{
  name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
  var regexS = "[\\?&]"+name+"=([^&#]*)";
  var regex = new RegExp( regexS );
  var results = regex.exec( window.location.href );
  if( results == null )
    return "";
  else
    return decodeURIComponent(results[1].replace(/\+/g, " "));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T12:24:12.217

你几乎第一次就做对了，你只需要声明`vars`为 object 并摆脱`vars.push(...)`.

这是工作示例 - [http://jsfiddle.net/KN9aK/1/show/?id=yoursuperduperid](http://jsfiddle.net/KN9aK/1/show/?id=yoursuperduperid)

来源这里[http://jsfiddle.net/KN9aK/1/](http://jsfiddle.net/KN9aK/1/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-04T12:26:56.453

将其更改为使用对象，而不是数组。

```
function getUrlVars() {
    var vars = {}, //<--object
    hash;
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1)
                                     .split('&');
    for(var i = 0; i < hashes.length; i++)
    {
        hash = hashes[i].split('=');
        vars[hash[0]] = hash[1];  //<--add to the object
    }
    return vars;  //<--return the object
 } 
```

你也可以使用`window.location.search`这样你就不必做那个初始切片。

# android - 在 Android 上收听通知

> ID：12727094
> 
> 赞同：-1
> 
> 时间：2012-10-04T12:16:20.087
> 
> 标签：android, notifications

我正在开发通知服务。为此，我只想知道如何监听通知的到来。当通知到达时，我需要完成一些任务。另外，我对Android不太熟悉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:49:05.367

希望一旦你熟悉了，你就会知道什么是可能的，什么是不可能的。但就目前而言，App 只能在通知栏上发布通知。它无法控制或收听其他应用程序的通知。如果你真的想解决这个问题，你需要从 Android 源代码中打开 HomeScreen 代码，看看它是如何工作的！

# git - 我可以为此使用 Git 吗？

> ID：12727095
> 
> 赞同：1
> 
> 时间：2012-10-04T12:16:20.807
> 
> 标签：git, svn, bitbucket

我试图自己回答这个问题，但我能找到的只是太复杂或离我需要的太远了。

是否可以使用 Git/Bitbucket/Mercurial/... 在我的本地计算机 (NAS) 上维护大量网站，并在编辑完成后跟踪更改并上传正确的文件？

我不需要 github 上的在线存储库或类似的东西，不是吗？

我为什么要这个？

我是一名网络开发人员，必须维护大约 50 个网站。过去，我在本地机器上编辑文件并通过 FTP 或直接在远程服务器上上传。

两者都不安全。在第一种方式中，我需要跟踪哪些文件被编辑并上传所有文件。如果我忘记了某个文件，则页面不是最新的，或者更糟糕的是，应用程序/CMS 将无法工作。

第二种方法不是一个好习惯，因为当出现问题时，网络上的每个人都可以看到它;-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:43:20.833

我认为您真正想要的是两件事 - 版本控制，如 git，以及部署机制。Git 是一个版本控制系统。我看不出让 git 参与实际部署的必要性或好处。

你可以拥有的是

*   git（托管）来存储您的源代码
*   Jenkins或类似做CI+部署

也可能是二进制工件回购。

我看到这个过程的方式是你做你的更改并签入。从那里自动化 CI 工具执行测试，进行分析并可能部署一个测试版本。然后，您可以检查测试是否通过，代码的健康状况如何以及分析报告等。如果您愿意，您可以按下按钮将更改部署到您的站点。

要使用的实际部署工具实际上取决于您的设置细节。版本控制不依赖于此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T12:19:58.373

是的，Git 允许您保留本地存储库。尽管您的使用模式听起来更像是您想要一个中央存储库和一个可靠的部署方法，一旦您对更改正确感到满意，就可以推出您的站点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T13:48:18.390

Git 非常适合您的网站开发，因为每个网站都可以是一个单独的 Git 存储库，并且您不需要任何类型的服务器进程。它简单而干净。另外，您可以通过 FTP 甚至电子邮件共享您的 Git 存储库。想象一下，如果在一个特定的网站上，您正在与另一个人一起工作。您可以通过电子邮件传递的补丁共享您的 Git 存储库。

您真正的问题是保持 Git 存储库中的内容与 Web 服务器同步。如果有人在服务器上编辑文件会发生什么？你想要那个改变吗？

在某些站点中，Web 服务器的目录只是对源存储库的检出。这允许您在服务器上进行更改，并将它们提交到您的存储库。它还为您提供了一种将 Web 服务器上的更改同步到存储库的简单机制（执行*更新*）。事实上，我什至见过 crontab 作业每晚自动将 Web 服务器同步到存储库。

当然，这意味着运行您要避免的实际版本控制服务器进程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T12:21:19.600

是的，您可以，无需上传到互联网，您的应用程序可以直接从一个版本或某些网络版本之一的树中读取。

因此，如果您有 Web A 的代码，您可以为“Web A with configs to run on local machine”创建一个树，然后将 apache/iis 上的虚拟服务器指向 neww 树的目录，即默认树是“主人”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T12:21:31.053

是的，您可以将项目保存在 git 存储库中，例如 BitBucket，在本地计算机上编辑它们，完成后签入 ( `git commit; git push`)，然后在托管网站时登录服务器并执行`git pull`。

# jsp - 如何编写jsp struts2 for循环

> ID：12727101
> 
> 赞同：0
> 
> 时间：2012-10-04T12:16:28.710
> 
> 标签：jsp, for-loop, struts2

我想像这样在jsp中编写一个for循环

```
for(int i = 0; i< max;i++){
  print("something");
} 
```

其中“max”和“something”在动作类的变量中。写这个的标签是什么。你能给我提供示例代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:21:13.840

您可以使用 struts2 迭代器标签

**[Apache Struts2 网站上的文档和示例](http://struts.apache.org/2.3.4/docs/iterator.html)**

另外，我建议在开始 struts2-web 项目之前阅读**[文档/入门](http://struts.apache.org/2.x/docs/home.html)**或**[教程。](http://struts.apache.org/2.x/docs/tutorials.html)**

# iphone - 在网页视图中播放 url 的音频文件

> ID：12727102
> 
> 赞同：0
> 
> 时间：2012-10-04T12:16:29.520
> 
> 标签：iphone, ios, uiwebview

我有一个 web 视图，在其中我打开了 wikipedia 站点。现在我希望如果有任何音频文件出现在

维基百科网站中的任何网址在网络视图中，然后我就可以收听这个音频文件。我试过了

为此很难，但无法成功。我该如何解决这个问题？提前致谢。

# file - awk 条件过滤一个基于另一个文件（或其他解决方案）的文件

> ID：12727108
> 
> 赞同：0
> 
> 时间：2012-10-04T12:17:00.270
> 
> 标签：file, filter, awk, conditional

这里的编程初学者需要一些帮助来修改 AWK 脚本以使其有条件。替代的非 awk 解决方案也非常受欢迎。

**注意**由于 Birei 的帮助，主过滤现在可以工作，但我还有一个问题，有关详细信息，请参阅下面的相关注释。

我有一系列包含 3 列的输入文件，如下所示：

```
chr4    190499999   190999999
chr6    61999999    62499999
chr1    145499999   145999999 
```

我想使用这些行来过滤另一个文件（refGene.txt），如果文件一个中的一行与 refGene.txt 中的一行相匹配，则将 refGene.txt 中的第 13 列输出到新文件“ListofGenes_$f”。对我来说棘手的部分是，只要第一列（例如 'chr4', 'chr6', 'chr1' ）和第 2 列 AND/OR 第 3 列与 refGene 中的等效列匹配，我希望它算作匹配。 txt 文件。两个文件之间的等价列是 $1=$3, $2=$5, $3=$6。然后我不确定在 awk 中如何不从 refGene.txt 打印整行，而只打印第 13 列。

**注意**由于Birei的帮助，我已经实现了上述条件过滤。现在我需要加入一个额外的过滤条件。如果值 $2 和 $3 之间的任何区域与 refGene.txt 文件中 $5 和 $6 之间的区域重叠，我还需要从 refGene.txt 文件中输出列 $13。这似乎要复杂得多，因为它涉及到数学计算来查看区域是否重叠。

到目前为止我的脚本：

```
FILES=/files/*txt   
for f in $FILES ;
do

    awk '
        BEGIN {
            FS = "\t";
        }
        FILENAME == ARGV[1] {
            pair[ $1, $2, $3 ] = 1;
            next;
        }
        {
            if ( pair[ $3, $5, $6 ] == 1 ) {
                print $13;
            }
        }
    ' $(basename $f) /files/refGene.txt > /files/results/$(basename $f) ;
done 
```

非常感谢任何帮助。非常感谢！

鲁巴尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:50:07.127

单程。

```
awk '
    BEGIN { FS = "\t"; }

    ## Save third, fifth and seventh field of first file in arguments (refGene.txt) as the key
    ## to compare later. As value the field to print.
    FNR == NR {
        pair[ $3, $5, $6 ] = $13;
        next;
    }

    ## Set the name of the output file.
    FNR == 1 {
        output_file = "";
        split( ARGV[ARGIND], path, /\// );
        for ( i = 1; i < length( path ); i++ ) {
            current_file = ( output_file ? "/" : "" ) path[i];
        }
        output_file = output_file "/ListOfGenes_" path[i];
    }

    ## If $1 = $3, $2 = $5 and $3 = $6, print $13 to output file.
    {
        if ( pair[ $1, $2, $3 ] ) {
            print pair[ $1, $2, $3 ] >output_file;
        }
    }
' refGene.txt /files/rubal/*.txt 
```

# iphone - XCode 4.5 意外退出断言失败

> ID：12727115
> 
> 赞同：3
> 
> 时间：2012-10-04T12:17:31.447
> 
> 标签：iphone, ios, xcode

我的 XCode 崩溃、崩溃和崩溃，我无法在这里打开我的项目是我收到的错误

```
Process:         Xcode [883]
Path:            /Applications/Xcode.app/Contents/MacOS/Xcode
Identifier:      com.apple.dt.Xcode
Version:         4.5 (1839)
Build Info:      IDEApplication-1839000000000000~3
App Item ID:     497799835
App External ID: 10747437
Code Type:       X86-64 (Native)
Parent Process:  launchd [110]

Date/Time:       2012-10-04 14:53:34.748 +0300
OS Version:      Mac OS X 10.7.5 (11G56)
Report Version:  9

Interval Since Last Report:          2021 sec
Crashes Since Last Report:           9
Per-App Interval Since Last Report:  358 sec
Per-App Crashes Since Last Report:   9
Anonymous UUID:                      E9E2BB86-81A1-404E-90D8-B7F32880697C

Crashed Thread:  13  Dispatch queue: com.apple.root.default-priority

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000

Application Specific Information:
ProductBuildVersion: 4G182
ASSERTION FAILURE in /SourceCache/IDEFoundation/IDEFoundation-1877/Framework/Classes/Model/SourceControl/IDESourceControlWorkspaceMonitor.m:1054
Details:  Attempted to add repository (IDESourceControlRepository) Name:192.168.1, Type:Subversion, Location:svn://192.168.1.20 when (IDESourceControlRepository) Name:192.168.1, Type:Subversion, Location:svn://192.168.1.20 already existed.
Object:   <IDESourceControlWorkspaceMonitor: 0x402515500>
Method:   -_findWorkingTreesForFilePath:
Thread:   <NSThread: 0x402c1fe40>{name = (null), num = 11}
Hints:   None
Backtrace:
  0  0x000000010e6ad7ef -[IDEAssertionHandler handleFailureInMethod:object:fileName:lineNumber:messageFormat:arguments:] (in IDEKit)
  1  0x000000010d9752a5 _DVTAssertionFailureHandler (in DVTFoundation)
  2  0x000000010e20bcfd __block_global_5 (in IDEFoundation)
  3  0x00007fff922a3ae1 -[NSBlockOperation main] (in Foundation)
  4  0x00007fff9226a6b4 -[__NSOperationInternal start] (in Foundation)
  5  0x00007fff9227d912 ____NSOQSchedule_block_invoke_2 (in Foundation)
  6  0x00007fff8c619a82 _dispatch_call_block_and_release (in libdispatch.dylib)
  7  0x00007fff8c61a961 _dispatch_worker_thread2 (in libdispatch.dylib)
  8  0x00007fff937ac3da _pthread_wqthread (in libsystem_c.dylib)
  9  0x00007fff937adb85 start_wqthread (in libsystem_c.dylib)

objc[883]: garbage collection is ON
abort() called

Thread 0:: Dispatch queue: com.apple.main-thread
0   com.apple.CoreFoundation        0x00007fff8b25c27d CFAllocatorDeallocate + 221
1   com.apple.CoreFoundation        0x00007fff8b28b4c6 CFRunLoopRunSpecific + 294
2   com.apple.HIToolbox             0x00007fff88a1a2bf RunCurrentEventLoopInMode + 277
3   com.apple.HIToolbox             0x00007fff88a214bf ReceiveNextEventCommon + 181
4   com.apple.HIToolbox             0x00007fff88a213fa BlockUntilNextEventMatchingListInMode + 62
5   com.apple.AppKit                0x00007fff8a013779 _DPSNextEvent + 659
6   com.apple.AppKit                0x00007fff8a01307d -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 135
7   com.apple.AppKit                0x00007fff8a00f9b9 -[NSApplication run] + 470
8   com.apple.AppKit                0x00007fff8a28beac NSApplicationMain + 867
9   com.apple.dt.Xcode              0x000000010d8e6d17 0x10d8e5000 + 7447
10  com.apple.dt.Xcode              0x000000010d8e6ca8 0x10d8e5000 + 7336

Thread 1:: Dispatch queue: IDE Source Control Workspace Scanning Queue
0   libsystem_kernel.dylib          0x00007fff89c1fbca __psynch_cvwait + 10
1   libsystem_c.dylib               0x00007fff937ae2a6 _pthread_cond_wait + 890
2   com.apple.Foundation            0x00007fff922aba5c -[NSCondition waitUntilDate:] + 371
3   com.apple.Foundation            0x00007fff9227522e -[NSConditionLock lockWhenCondition:beforeDate:] + 251
4   com.apple.dt.IDEFoundation      0x000000010e20b782 __block_global_3 + 1154
5   com.apple.dt.IDEFoundation      0x000000010e172d00 -[IDESourceControlManager remoteRootPathForFilePath:sourceControlExtension:completionBlock:] + 1277
6   com.apple.dt.IDEFoundation      0x000000010e16378a -[IDESourceControlManager workingTreeRootForFilePath:sourceControlExtension:completionBlock:] + 1591
7   com.apple.dt.IDEFoundation      0x000000010e1633fc -[IDESourceControlManager workingTreeRootForFilePath:sourceControlExtension:completionBlock:] + 681
8   com.apple.dt.IDEFoundation      0x000000010e11aa99 -[IDESourceControlManager workingTreeRootForFilePath:completionBlock:] + 130
9   com.apple.dt.IDEFoundation      0x000000010e20b2f3 __65-[IDESourceControlWorkspaceMonitor _findWorkingTreesForFilePath:]_block_invoke_0 + 602
10  com.apple.dt.IDEFoundation      0x000000010e1c0a3e __66-[IDESourceControlManager workingTreeForFilePath:completionBlock:]_block_invoke_0426 + 1411
11  com.apple.Foundation            0x00007fff922a3ae1 -[NSBlockOperation main] + 116
12  com.apple.dt.IDEFoundation      0x000000010e159232 -[IDESourceControlManager performRequest:waitUntilFinished:withCompletionBlock:] + 761
13  com.apple.dt.IDEFoundation      0x000000010e172b47 -[IDESourceControlManager remoteRootPathForFilePath:sourceControlExtension:completionBlock:] + 836
14  com.apple.dt.IDEFoundation      0x000000010e16378a -[IDESourceControlManager workingTreeRootForFilePath:sourceControlExtension:completionBlock:] + 1591
15  com.apple.dt.IDEFoundation      0x000000010e1196b6 -[IDESourceControlManager workingTreeForFilePath:completionBlock:] + 811
16  com.apple.dt.IDEFoundation      0x000000010e119583 -[IDESourceControlManager workingTreeForFilePath:completionBlock:] + 504
17  com.apple.dt.IDEFoundation      0x000000010e11916f -[IDESourceControlWorkspaceMonitor _findWorkingTreesForFilePath:] + 268
18  libdispatch.dylib               0x00007fff8c619a82 _dispatch_call_block_and_release + 18
19  libdispatch.dylib               0x00007fff8c61b2d2 _dispatch_queue_drain + 264
20  libdispatch.dylib               0x00007fff8c61b12e _dispatch_queue_invoke + 54
21  libdispatch.dylib               0x00007fff8c61a928 _dispatch_worker_thread2 + 198
22  libsystem_c.dylib               0x00007fff937ac3da _pthread_wqthread + 316
23  libsystem_c.dylib               0x00007fff937adb85 start_wqthread + 13

Thread 2:: Dispatch queue: com.apple.libdispatch-manager
0   libsystem_kernel.dylib          0x00007fff89c207e6 kevent + 10
1   libdispatch.dylib               0x00007fff8c61b786 _dispatch_mgr_invoke + 923
2   libdispatch.dylib               0x00007fff8c61a316 _dispatch_mgr_thread + 54

Thread 3:
0   libsystem_kernel.dylib          0x00007fff89c20192 __workq_kernreturn + 10
1   libsystem_c.dylib               0x00007fff937ac594 _pthread_wqthread + 758
2   libsystem_c.dylib               0x00007fff937adb85 start_wqthread + 13

Thread 4:: Dispatch queue: com.apple.root.low-priority
0   com.apple.Foundation            0x00007fff92228893 _NSResolveSymlinksInPathUsingCache + 857
1   com.apple.Foundation            0x00007fff922283f9 -[NSString(NSPathUtilities) _stringByResolvingSymlinksInPathUsingCache:] + 124
2   com.apple.dt.IDEFoundation      0x000000010e1150e3 -[NSString(IDEIndexAdditions) ideIndex_stringByResolvingSymlinksInPath] + 54
3   com.apple.dt.IDEFoundation      0x000000010e112606 +[IDEIndexingEngine runLoadJob:] + 315
4   com.apple.dt.IDEFoundation      0x000000010e135e0b -[IDEIndexingJob run] + 99
5   com.apple.dt.IDEFoundation      0x000000010e25c0fa __40-[IDEIndexingJobScheduler _scheduleJobs]_block_invoke_0 + 31
6   com.apple.dt.DVTFoundation      0x000000010d998d20 __DVTDispatchAsync_block_invoke_0 + 16
7   libdispatch.dylib               0x00007fff8c619a82 _dispatch_call_block_and_release + 18
8   libdispatch.dylib               0x00007fff8c61a961 _dispatch_worker_thread2 + 255
9   libsystem_c.dylib               0x00007fff937ac3da _pthread_wqthread + 316
10  libsystem_c.dylib               0x00007fff937adb85 start_wqthread + 13

Thread 5:: Dispatch queue: com.apple.root.default-priority
0   libsystem_kernel.dylib          0x00007fff89c1e6b6 semaphore_wait_trap + 10
1   libdispatch.dylib               0x00007fff8c61d0c4 _dispatch_group_wait_slow + 91
2   com.apple.dt.IDEFoundation      0x000000010e20ae12 __51-[IDESourceControlWorkspaceMonitor _startScanTimer]_block_invoke_0 + 65
3   com.apple.dt.DVTFoundation      0x000000010d999370 __DVTDispatchSourceSetEventHandler_block_invoke_0 + 16
4   libdispatch.dylib               0x00007fff8c61e497 _dispatch_source_invoke + 649
5   libdispatch.dylib               0x00007fff8c61b13f _dispatch_queue_invoke + 71
6   libdispatch.dylib               0x00007fff8c61a928 _dispatch_worker_thread2 + 198
7   libsystem_c.dylib               0x00007fff937ac3da _pthread_wqthread + 316
8   libsystem_c.dylib               0x00007fff937adb85 start_wqthread + 13

Thread 6:: com.apple.NSURLConnectionLoader
0   libsystem_kernel.dylib          0x00007fff89c1e67a mach_msg_trap + 10
1   libsystem_kernel.dylib          0x00007fff89c1dd71 mach_msg + 73
2   com.apple.CoreFoundation        0x00007fff8b28350c __CFRunLoopServiceMachPort + 188
3   com.apple.CoreFoundation        0x00007fff8b28bc74 __CFRunLoopRun + 1204
4   com.apple.CoreFoundation        0x00007fff8b28b486 CFRunLoopRunSpecific + 230
5   com.apple.Foundation            0x00007fff92287fd7 +[NSURLConnection(NSURLConnectionReallyInternal) _resourceLoadLoop:] + 335
6   com.apple.Foundation            0x00007fff9227c72a -[NSThread main] + 68
7   com.apple.Foundation            0x00007fff9227c6a2 __NSThread__main__ + 1575
8   libsystem_c.dylib               0x00007fff937aa8bf _pthread_start + 335
9   libsystem_c.dylib               0x00007fff937adb75 thread_start + 13

Thread 7:: com.apple.CFSocket.private
0   libsystem_kernel.dylib          0x00007fff89c1fdf2 __select + 10
1   com.apple.CoreFoundation        0x00007fff8b2d4c8b __CFSocketManager + 1355
2   libsystem_c.dylib               0x00007fff937aa8bf _pthread_start + 335
3   libsystem_c.dylib               0x00007fff937adb75 thread_start + 13

Thread 8:
0   libsystem_kernel.dylib          0x00007fff89c1e67a mach_msg_trap + 10
1   libsystem_kernel.dylib          0x00007fff89c1dd71 mach_msg + 73
2   com.apple.CoreFoundation        0x00007fff8b28350c __CFRunLoopServiceMachPort + 188
3   com.apple.CoreFoundation        0x00007fff8b28bc74 __CFRunLoopRun + 1204
4   com.apple.CoreFoundation        0x00007fff8b28b486 CFRunLoopRunSpecific + 230
5   com.apple.DTDeviceKit           0x00000001159b5cff -[DTDKRemoteDeviceDataListener listenerThreadImplementation] + 298
6   com.apple.Foundation            0x00007fff9227c72a -[NSThread main] + 68
7   com.apple.Foundation            0x00007fff9227c6a2 __NSThread__main__ + 1575
8   libsystem_c.dylib               0x00007fff937aa8bf _pthread_start + 335
9   libsystem_c.dylib               0x00007fff937adb75 thread_start + 13

Thread 9:
0   libsystem_kernel.dylib          0x00007fff89c20192 __workq_kernreturn + 10
1   libsystem_c.dylib               0x00007fff937ac594 _pthread_wqthread + 758
2   libsystem_c.dylib               0x00007fff937adb85 start_wqthread + 13

Thread 10:: DYMobileDeviceManager
0   libsystem_kernel.dylib          0x00007fff89c1e67a mach_msg_trap + 10
1   libsystem_kernel.dylib          0x00007fff89c1dd71 mach_msg + 73
2   com.apple.CoreFoundation        0x00007fff8b28350c __CFRunLoopServiceMachPort + 188
3   com.apple.CoreFoundation        0x00007fff8b28bc74 __CFRunLoopRun + 1204
4   com.apple.CoreFoundation        0x00007fff8b28b486 CFRunLoopRunSpecific + 230
5   com.apple.Foundation            0x00007fff9222df7b -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 267
6   com.apple.Foundation            0x00007fff9222de67 -[NSRunLoop(NSRunLoop) run] + 62
7   com.apple.Foundation            0x00007fff9227c72a -[NSThread main] + 68
8   com.apple.Foundation            0x00007fff9227c6a2 __NSThread__main__ + 1575
9   libsystem_c.dylib               0x00007fff937aa8bf _pthread_start + 335
10  libsystem_c.dylib               0x00007fff937adb75 thread_start + 13

Thread 11:
0   libsystem_c.dylib               0x00007fff937adb78 start_wqthread + 0

Thread 12:
0   libsystem_kernel.dylib          0x00007fff89c20192 __workq_kernreturn + 10
1   libsystem_c.dylib               0x00007fff937ac594 _pthread_wqthread + 758
2   libsystem_c.dylib               0x00007fff937adb85 start_wqthread + 13

Thread 13 Crashed:: Dispatch queue: com.apple.root.default-priority
0   libsystem_kernel.dylib          0x00007fff89c1fce2 __pthread_kill + 10
1   libsystem_c.dylib               0x00007fff937ac7d2 pthread_kill + 95
2   libsystem_c.dylib               0x00007fff9379da7a abort + 143
3   com.apple.dt.IDEKit             0x000000010e6ad25f +[IDEAssertionHandler _handleAssertionWithLogString:] + 596
4   com.apple.dt.DVTFoundation      0x000000010d9752a5 _DVTAssertionFailureHandler + 128
5   com.apple.dt.IDEFoundation      0x000000010e20bcfd __block_global_5 + 696
6   com.apple.Foundation            0x00007fff922a3ae1 -[NSBlockOperation main] + 116
7   com.apple.Foundation            0x00007fff9226a6b4 -[__NSOperationInternal start] + 705
8   com.apple.Foundation            0x00007fff9227d912 ____NSOQSchedule_block_invoke_2 + 124
9   libdispatch.dylib               0x00007fff8c619a82 _dispatch_call_block_and_release + 18
10  libdispatch.dylib               0x00007fff8c61a961 _dispatch_worker_thread2 + 255
11  libsystem_c.dylib               0x00007fff937ac3da _pthread_wqthread + 316
12  libsystem_c.dylib               0x00007fff937adb85 start_wqthread + 13

Thread 14:: CVDisplayLink
0   libsystem_kernel.dylib          0x00007fff89c1fbca __psynch_cvwait + 10
1   libsystem_c.dylib               0x00007fff937ae2a6 _pthread_cond_wait + 890
2   com.apple.CoreVideo             0x00007fff888401cb CVDisplayLink::waitUntil(unsigned long long) + 279
3   com.apple.CoreVideo             0x00007fff8883f631 CVDisplayLink::runIOThread() + 559
4   com.apple.CoreVideo             0x00007fff8883f3e9 _ZL13startIOThreadPv + 148
5   libsystem_c.dylib               0x00007fff937aa8bf _pthread_start + 335
6   libsystem_c.dylib               0x00007fff937adb75 thread_start + 13

Thread 15:
0   libsystem_kernel.dylib          0x00007fff89c1e67a mach_msg_trap + 10
1   libsystem_kernel.dylib          0x00007fff89c1dd71 mach_msg + 73
2   com.apple.CoreFoundation        0x00007fff8b28350c __CFRunLoopServiceMachPort + 188
3   com.apple.CoreFoundation        0x00007fff8b28bc74 __CFRunLoopRun + 1204
4   com.apple.CoreFoundation        0x00007fff8b28b486 CFRunLoopRunSpecific + 230
5   com.apple.DebugSymbols          0x00007fff8bf082f2 _ZL20SpotlightQueryThreadPv + 434
6   libsystem_c.dylib               0x00007fff937aa8bf _pthread_start + 335
7   libsystem_c.dylib               0x00007fff937adb75 thread_start + 13

Thread 16:
0   libsystem_kernel.dylib          0x00007fff89c1fe42 __semwait_signal + 10
1   libsystem_c.dylib               0x00007fff93760dea nanosleep + 164
2   com.apple.CoreSymbolication     0x00007fff87df23bb cleaner_thread_main(void*) + 42
3   libsystem_c.dylib               0x00007fff937aa8bf _pthread_start + 335
4   libsystem_c.dylib               0x00007fff937adb75 thread_start + 13

Thread 13 crashed with X86 Thread State (64-bit):
  rax: 0x0000000000000000  rbx: 0x0000000000000006  rcx: 0x00000001177159e8  rdx: 0x0000000000000000
  rdi: 0x000000000000f023  rsi: 0x0000000000000006  rbp: 0x0000000117715a10  rsp: 0x00000001177159e8
   r8: 0x00007fff78532fb8   r9: 0x00007f944651aee0  r10: 0x00007fff89c1fd0a  r11: 0xffffff80002dad60
  r12: 0x0000000402c4afb8  r13: 0x00007fff87cf9e80  r14: 0x0000000117716000  r15: 0x0000000117715b18
  rip: 0x00007fff89c1fce2  rfl: 0x0000000000000206  cr2: 0x0000000101adc000
Logical CPU: 0

Binary Images:
       0x10d8e5000 -        0x10d8e7fff  com.apple.dt.Xcode (4.5 - 1839) <B5C20A97-D031-383A-8045-814DBC82546E> /Applications/Xcode.app/Contents/MacOS/Xcode
       0x10d8f3000 -        0x10dc0eff7  com.apple.dt.DVTFoundation (4.5 - 1828) <EBED7760-2AF1-325D-AA67-308E33DF1EEF> /Applications/Xcode.app/Contents/SharedFrameworks/DVTFoundation.framework/Versions/A/DVTFoundation

External Modification Summary:
  Calls made by other processes targeting this process:
    task_for_pid: 13
    thread_create: 0
    thread_set_state: 0
  Calls made by this process:
    task_for_pid: 0
    thread_create: 0
    thread_set_state: 0
  Calls made by all processes on this machine:
    task_for_pid: 2591
    thread_create: 0
    thread_set_state: 0

VM Region Summary:
ReadOnly portion of Libraries: Total=277.5M resident=162.0M(58%) swapped_out_or_unallocated=115.5M(42%)
Writable regions: Total=17.2G written=33.8M(0%) resident=96.8M(1%) swapped_out=0K(0%) unallocated=17.1G(99%)

REGION TYPE                        VIRTUAL
===========                        =======
CG backing stores                    5492K
CG image                              152K
CG raster data                        684K
CG shared images                     4432K
CoreAnimation                         316K
CoreGraphics                           16K
CoreImage                              24K
CoreServices                         1424K
IOKit                                11.4M
JS JIT generated code                   8K
JS JIT generated code (reserved)      1.0G        reserved VM address space (unallocated)
MALLOC                              384.8M
MALLOC (reserved)                    15.8G        reserved VM address space (unallocated)
MALLOC guard page                      80K
Memory tag=240                          4K
Memory tag=242                         12K
Memory tag=243                          4K
Memory tag=249                        156K
Memory tag=251                         68K
OpenCL                                 52K
OpenGL GLSL                          1024K
SQLite page cache                     960K
STACK GUARD                          56.1M
Stack                                15.7M
VM_ALLOCATE                          17.5M
__CI_BITMAP                            80K
__DATA                               29.8M
__IMAGE                               528K
__LINKEDIT                           64.7M
__TEXT                              212.8M
__UNICODE                             544K
mapped file                          82.5M
shared memory                        17.3M
===========                        =======
TOTAL                                17.6G
TOTAL, minus reserved VM space      908.3M

Model: Macmini5,1, BootROM MM51.0077.B10, 2 processors, Intel Core i5, 2.3 GHz, 4 GB, SMC 1.76f0
Graphics: Intel HD Graphics 3000, Intel HD Graphics 3000, Built-In, 384 MB
Memory Module: BANK 0/DIMM0, 2 GB, DDR3, 1333 MHz, 0x80CE, 0x4D34373142353737334348532D4348392020
Memory Module: BANK 1/DIMM0, 2 GB, DDR3, 1333 MHz, 0x80CE, 0x4D34373142353737334348532D4348392020
AirPort: spairport_wireless_card_type_airport_extreme (0x14E4, 0xE4), Broadcom BCM43xx 1.0 (5.106.198.19.22)
Bluetooth: Version 4.0.8f17, 2 service, 18 devices, 1 incoming serial ports
Network Service: Ethernet, Ethernet, en0
Serial ATA Device: TOSHIBA MK5065GSXF, 500.11 GB
USB Device: hub_device, 0x0424  (SMSC), 0x2513, 0xfa100000 / 2
USB Device: BRCM20702 Hub, 0x0a5c  (Broadcom Corp.), 0x4500, 0xfa110000 / 3
USB Device: Bluetooth USB Host Controller, apple_vendor_id, 0x8281, 0xfa113000 / 6
USB Device: hub_device, 0x0424  (SMSC), 0x2513, 0xfd100000 / 2
USB Device: USB Mouse, 0x09da  (A-FOUR TECH CO., LTD.), 0x000a, 0xfd120000 / 5
USB Device: Keyboard Hub, apple_vendor_id, 0x1006, 0xfd130000 / 4
USB Device: Apple Keyboard, apple_vendor_id, 0x0221, 0xfd132000 / 6
USB Device: IR Receiver, apple_vendor_id, 0x8242, 0xfd110000 / 3 
```

我尝试从无效的 .xcodeproj 文件中删除 xcuserdata 文件夹

我尝试从 XCode -> Organizer 的存储库中删除项目

我尝试删除派生的项目数据

我真的不知道问题是什么，我们在网络上使用了一个 SVN 服务器，所以我们可以同步项目的源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T12:25:01.817

很有可能在 Xcode 4.5.1 中已修复：

> 源代码控制
> 
> 与 Xcode 应用程序已知的工作副本交互的问题。12364258、12389205、12389198

发行说明可在 Apple 开发者下载网站（[此处](http://adcdownload.apple.com/Developer_Tools/xcode_4.5.1/release_notes_xcode_4.5.1.pdf)）上获得；它们似乎没有在 Apple 开发者主网站上更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:22:05.290

```
Details:  Attempted to add repository (IDESourceControlRepository) Name:192.168.1, Type:Subversion, Location:svn://192.168.1.20 when (IDESourceControlRepository) Name:192.168.1, Type:Subversion, Location:svn://192.168.1.20 already existed. 
```

我会从 Xcode 中删除您的所有存储库并再次添加它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T20:37:16.937

我正在运行 Xcode 4.5.1，今天才开始遇到这个问题。该应用程序在模拟器中运行，然后模拟器开始表现得很有趣，所以我决定停止一切并关闭 Xcode。我不得不炸掉它。当我尝试重新启动时，出现此错误并且无法再启动。显然有些事情搞砸了。

# android - Android，webview 用户代理与浏览器用户代理

> ID：12727117
> 
> 赞同：30
> 
> 时间：2012-10-04T12:17:40.783
> 
> 标签：android, android-webview, user-agent

我正在构建我的网站，我想知道用户使用的是 Android 浏览器还是带有 webview 的应用程序。

可能吗 ？？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-03-10T23:07:08.447

根据[Chrome 开发文档](https://developer.chrome.com/multidevice/user-agent#webview_user_agent)：“如果您试图区分 WebView 和 Chrome for Android，您应该在 WebView 用户代理字符串中查找 Version/ *XX*字符串。”

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-26T20:41:46.117

来自：http : [//googlewebmastercentral.blogspot.com/2011/03/mo-better-to-also-detect-mobile-user.html](http://googlewebmastercentral.blogspot.com/2011/03/mo-better-to-also-detect-mobile-user.html)

使用这样的用户代理：

> Mozilla/5.0 (Linux; U; Android 3.0; en-us; Xoom Build/HRI39) AppleWebKit/534.13 (KHTML, like Gecko) 版本/4.0 Safari/534.13

由于没有“mobile”字符串，因此为该用户提供桌面版本（或为 Android 大屏幕触摸设备定制的版本）。User-Agent 告诉我们他们来自大屏幕设备 XOOM 平板电脑。

另一方面，这个用户代理：

> Mozilla/5.0 (Linux; U; Android 2.2.1; en-us; Nexus One Build/FRG83) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1

包含“mobile”和“android”，所以在这个 Nexus One 上为网络冲浪者提供移动体验！

来自[https://stackoverflow.com/a/7327201](https://stackoverflow.com/a/7327201)

看起来 Webview 中的 User-Agent 与默认移动浏览器中的相同

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-06T17:31:28.640

仅供参考：这不能通过用户代理完成，但是可以检测到。Android 的 Web 视图会发送一个附加标头“X-Requested-With”。此标头的值将是运行 webview 的应用程序的名称空间。

例如 Dolphin 浏览器发送：“mobi.mgeek.TunnyBrowser” 我的测试应用发送：“com.jamestymann.identifyawebview”

标准浏览器实际上根本不发送此标头，因此很容易检测到这些标头。

我有两个警告：

*   “X-Requested-With”是一个标准标头，可能会从桌面的完整网页/浏览器发送。（例如，这用于检测具有这些值“X-Requested-With XMLHttpRequest”的 ajax 调用）
*   大多数 google play 商店浏览器使用 webviews 来显示网页。即使这些是成熟的浏览器，它们仍会发送此标头。因此，如果您的意图是禁用此功能，您可能需要小心，因为您可能会禁用人们的默认浏览器。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-05-25T19:15:01.020

有关更多最新信息，请查看此处[https://developer.chrome.com/multidevice/user-agent](https://developer.chrome.com/multidevice/user-agent)棒棒糖和更新的设备包含`wv)`在 UserAgent 中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-18T02:00:11.937

您可以将以下代码用于已检查的 android webview 或浏览器。

```
public static bool is_mobile_and_webview()
{
     return System.Web.HttpContext.Current.Request.Browser.IsMobileDevice && System.Web.HttpContext.Current.Request.UserAgent.Contains("; wv");
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-04T12:23:37.193

是的，您可以通过添加这些元标记来优化您的网站

```
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" />
<meta name="HandheldFriendly" content="True" /> 
```

你可以在这里找到更多信息[http://learnthemobileweb.com/2009/07/mobile-meta-tags/](http://learnthemobileweb.com/2009/07/mobile-meta-tags/)

* * *

## 回答 #7

> 赞同：-5
> 
> 时间：2012-10-04T12:33:41.500

我使用这个服务器端，在 PHP 中访问有关客户端浏览器（代理）的信息

```
...
$_SERVER['HTTP_USER_AGENT']; // Different browsers ...
... 
```

这个样板可以被解释 - 因此你会知道代理......

在客户端 - navigator.userAgent

# intellij-idea - 如何在 IDEA 的项目工具窗口中导航到打开文件的路径？

> ID：12727118
> 
> 赞同：0
> 
> 时间：2012-10-04T12:17:51.033
> 
> 标签：intellij-idea

如何在 IDEA 的项目工具窗口中导航到打开文件的路径？ctrl+mouse1 在 nautilus 中显示路径。我需要在项目工具中查看路径。我在任何地方都找不到答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:25:34.297

`Navigate`| **选择 In**、**Project View**或启用**Autoscroll from Source**选项，这同样适用于所有基于 IntelliJ IDEA 的产品，所以这个问题实际上是重复的：

*   [如何在 Intellij Idea Project Tool Window 中自动导航到当前类？](https://stackoverflow.com/q/11416111/104891)
*   [PHPstorm 项目导航](https://stackoverflow.com/q/10754709/104891)
*   [如何找出我目前在哪个班级](https://stackoverflow.com/q/11595319/104891)

# java - Java 2d 数组列打印两次

> ID：12727122
> 
> 赞同：0
> 
> 时间：2012-10-04T12:17:59.597
> 
> 标签：java, arrays, string

您好，我的二维数组列正在打印两次。请帮助我识别错误的代码。以下是我尝试过的：

```
public class ArrayExercise {
public static void main(String[] args){

    String[][] myArray = {
        {"Philippines", "South Korea", "Japan", "Israel"}, // Countries
        {"Manila", "Seoul", "Tokyo", "Jerusalem" } // capital cities
    };

    String outputString = String.format("%16s\t%9s", "Country", "City" );
    System.out.println(outputString);

    for( int col = 0; col < myArray[0].length; ++col ){
        for( int row = 0; row < myArray.length; ++row ){  
           System.out.printf( "%16s\t%9s", myArray[0][col], myArray[1][col]  );
        }         
        System.out.println();         
    }
  }

} 
```

这让我发疯，我似乎找不到错误:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:22:15.133

在您的内部循环中，您正在打印这两行：- `myArray[0][col], myArray[1][col]`

然后你使用内循环迭代那个东西两次： -

```
 for( int row = 0; row < myArray.length; ++row ){  
       System.out.printf( "%16s\t%9s", myArray[0][col], myArray[1][col]  );
    } 
```

**您需要删除此内部循环：-**

```
for( int col = 0; col < myArray[0].length; ++col ){

    System.out.printf( "%16s\t%9s", myArray[0][col], myArray[1][col]  );

    System.out.println();         
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:33:24.210

你有一个 for 循环太多，我删除了最里面的一个，它按预期工作。

```
public static void main(String[] args){

    String[][] myArray = {
        {"Philippines", "South Korea", "Japan", "Israel"}, // Countries
        {"Manila", "Seoul", "Tokyo", "Jerusalem" } // capital cities
    };

    String outputString = String.format("%16s\t%9s", "Country", "City" );
    System.out.println(outputString);

    for( int col = 0; col < myArray[0].length; col++ ){
        System.out.printf( "%16s\t%9s", myArray[0][col], myArray[1][col]  );
        System.out.println();         
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T12:34:52.140

考虑您的 Array 不像棋盘，您必须访问每一行的每一列才能访问每个方格，而更像是一个橱柜。

你知道有多少列。（二）

因此，您只需遍历第一列中的国家数量，并在第二列中检查每个条目的资本是多少。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T12:20:14.773

删除内部循环，因为您实际上不需要它来完成您要完成的工作：

```
for ( int col = 0; col < myArray[0].length; ++col ) {
  System.out.printf( "%16s\t%9s", myArray[0][col], myArray[1][col]);
  System.out.println();
} 
```

也就是说，对于每个国家 ( `myArray[0][col]`)，打印其首都 ( `myArray[1][col]`)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T12:21:54.363

内循环使它打印两次。你从不使用`row`.

```
for( int col = 0; col < myArray[0].length; ++col ){
    System.out.printf( "%16s\t%9s", myArray[0][col], myArray[1][col]  );
    System.out.println();         
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-04T12:22:27.063

代码循环两次，同时打印相同的内容。删除内部 for 循环。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-04T12:22:42.833

用这个：

```
System.out.printf( "%16s\t", myArray[row][col]  ); 
```

代替：

```
System.out.printf( "%16s\t%9s", myArray[0][col], myArray[1][col]  ); 
```

您正在打印这两行：-`myArray[0][col], myArray[1][col]`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-04T12:23:58.573

你的“myArray.length”是两个。因此，代码两次通过内部“for”循环。循环变量“row”从不在内部“for”中使用。因此，相同的东西被打印了两次。

取出内在的“为”。

# android - 应用程序出现在 Play 商店的预计时间？

> ID：12727127
> 
> 赞同：1
> 
> 时间：2012-10-04T12:18:21.907
> 
> 标签：android, publishing

我知道这个话题会在这里讨论很多次，但是即使在互联网上搜索了很多之后，我也找不到我的查询的正确答案。因此我想我应该在这里问一个问题，以便从这里的开发者那里得到答案，他们可能已经在 Play 商店中发布了应用程序。更令人困惑的一点是我的应用程序的状态显示为已**发布**，但是当我在 Play 商店中搜索时，我没有找到我的应用程序。谁能告诉我应用程序最终出现在 Play 商店中需要多长时间。

![在此处输入图像描述](../Images/f0868262ba5b5147d00973ececf9d3dc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:23:23.270

应用程序会在您发布后的短时间内显示在 Play 商店中。最多需要 1 天的时间才能显示，并且不会超过这个时间。我希望只有你的错误。最好通过单击错误超链接来检查是否存在任何错误。如果仍然没有提示，那么您必须检查其他内容。

# jquery - 如何获取未知类型的jquery列表中的元素值

> ID：12727129
> 
> 赞同：0
> 
> 时间：2012-10-04T12:18:29.990
> 
> 标签：jquery, asp.net

我在 HTML 中有以下列表

```
<ul id="sortable">
    <li id="li1" class="ui-state-default"><asp:Button Text='Test1' runat='server'/></li>
    <li id="li2" class="ui-state-default"><asp:Button Text='Test2'  runat='server'/></li>
    <li id="li3" class="ui-state-default"><asp:Button Text='Test3'  runat='server'/></li>
    <li id="li4" class="ui-state-default"><asp:TextBox runat="server" Text='testing'></asp:TextBox></li>
    <li id="li5" class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 5</li>
    <li id="li6" class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 6</li>
    <li id="li7" class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 7</li>
</ul> 
```

现在我想在拖动列表项时提醒这些值。例如，如果我拖动文本框，那么它应该显示文本框值。

编辑：我是 Jquery 的新手我已经尝试如下所示来获取有序元素现在我想知道每个列表项的值？？这个怎么做 ？？

```
 $(function() {
            $("#sortable").sortable({
                update: function() {
                    var ElementsOrder = $(this).sortable('toArray'); //.toString();                        
                    alert(JSON.stringify(ElementsOrder));
                    var xxx = { pages: $(this).sortable('toArray') };
                    alert(JSON.stringify(xxx));
                }
            });
        }); 
```

# php - ob_file_callback 和 fwrite 的问题

> ID：12727133
> 
> 赞同：0
> 
> 时间：2012-10-04T12:18:56.727
> 
> 标签：php, header, case, fwrite

```
<?php

$forks = 2;

switch ($forks) {
    case 1:
        $ob_file = fopen('case1.txt','w');
        function ob_file_callback($buffer)
{
        global $ob_file;
        fwrite($ob_file,$buffer);
}
        ob_start('ob_file_callback');
        echo $ip = $_SERVER['REMOTE_ADDR'];
        ob_end_flush();

        header("LOCATION: case1.php");

    case 2:
    $ob_file = fopen('case2.txt','w');
function ob_file_callback($buffer)
{
  global $ob_file;
  fwrite($ob_file,$buffer);
}
ob_start('ob_file_callback');
echo $ip = $_SERVER['REMOTE_ADDR'];
ob_end_flush();
    ;
     header("LOCATION: case2.php");
        }

?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head> 
```

如果我选择 $forks = 1，它会写入 case2.txt，这很疯狂，但确实如此。它不仅无法重定向 LOCATION，而且甚至不会显示默认页面。它声称标题位置存在问题，因为标题已经发送，这是超现实的。然后，即使我没有要求它重新声明 ob_file_callback 因为它在案例 2 中并且我选择了案例 1，但它声称无法在案例 2 中的 ob_file_callback 上重新声明 ob_file_callback。

如果我选择 $forks = 2，它不会写入任何文件，只是声称它不能修改头信息，所以这是另一个头重定位失败，这也是愚蠢的。然而，它确实给了我默认页面，但这只会让我更加困惑。

我对 fwrite、ob_start 或 ob_end_flush 或任何正在写入文件的东西的问题是它只会写入一次。无论是那个还是它每次打开它都会擦除文件，所以产生的问题是当forks 1确实写入case2.txt时，它总是只有1个字符串坐在那里。

* * *

第一轮更正：

```
 <?php

     function ob_file_callback($buffer)
{
     global $ob_file;
     fwrite($ob_file,$buffer);
}
$forks = 1;
switch ($forks) {
    case 1:
     $ob_file = fopen('case1.txt','w');

     ob_start('ob_file_callback');
     echo $ip = $_SERVER['REMOTE_ADDR'];
     ob_end_flush();
     header("LOCATION: case1.php");
     exit;
break;

   case 2:
    $ob_file = fopen('case2.txt','w');
    ob_start('ob_file_callback');
    echo $ip = $_SERVER['REMOTE_ADDR'];
    ob_end_flush();
    header("LOCATION: case2.php");
        }
    exit
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:26:31.210

在处理“1”的第一个案例分支中，您没有 break 语句。您*确实*发送了重定向标头，但这只是发送给客户端的标头。它不会*终止*执行！

使用评论中讨论的反馈，我试图让事情变得更清楚：

```
<?php

// writes a given string $buffer into a file handle spcified by the global $file
function ob_file_callback($buffer) 
{ 
    global $ob_file;
    fwrite($ob_file,$buffer); 
    return $buffer;
}

// main(): 

// #####
$forks = 1; // testing only !!
//$forks = 2; // testing only !!
// #####

global $ob_file = FALSE;
switch ($forks) {
    case 1:
        $ob_file = fopen('case1.txt','w');    
        ob_start('ob_file_callback');
        echo sprintf('ip = %s',$_SERVER['REMOTE_ADDR']);
        ob_end_flush();
        fclose($ob_file);
        header("Location: case1.php");
        break;
    case 2:
        $ob_file = fopen('case2.txt','w');
        ob_start('ob_file_callback');
        echo sprintf('ip = %s',$_SERVER['REMOTE_ADDR']);
        ob_end_flush();
        fclose($ob_file);
        header("Location: case2.php");
} // switch

?> 
```

我还没有测试过那个代码（所以可能有一些语法故障......）。我只想记下有关如何使其正常工作的建议...

# c# - 需要数学库来对序列/范围进行操作

> ID：12727143
> 
> 赞同：2
> 
> 时间：2012-10-04T12:19:38.420
> 
> 标签：c#, .net, windows, algorithm, math

我在某个区间内定义了三种数值范围，例如：
1.计数范围（指定区间内的任何值）
2.周期性序列（指定序列开始、步数和步数）
3.一组精确值（如1、3、7 等）

我需要联合/相交它们（从 2 到 N 的不同类型）并获得优化的结果。显然，上面的交集将返回上面一种类型的结果，将它们联合起来将产生上面 1 到 M 个类型的范围。
示例 1：
第一个范围定义为从 5 到 11 的连续范围，第二个是从 2 到 18 的周期性序列，步骤 2（因此为 8 个步骤）。
Intersection 将返回一个从 6 到 10 的周期序列，步骤
2。Union 将返回三个结果：一个周期序列从 2 到 4，步骤 2，连续范围从 5 到 11，周期序列从 12 到 18，步骤 2。
示例 2：
第 1 个范围定义为第 2 步的周期序列 0 到 10，第 2 个范围是第 2 步的从 1 到 7 的周期序列（因此，3 步）。
Intersection 将返回 null，因为它们不相交。
Union 将返回两个结果：一个从 1 到 8 的周期性序列，第 1 步（注意：优化结果）和一个精确值 10。
希望我没有犯错 :)
好吧，这些序列上的这些操作不应该太复杂并且我希望这里有一个图书馆。请提供任何建议（将在 C#.NET 中使用）。
谢谢！

**更新**
回答“我认为我如何使用图书馆”。以上三种类型都可以在编程语言中轻松定义为：
1\. Contionous: { decimal Start; 小数结束；} 其中 Start 是范围的开始，End 是结束
2\. Periodical: { decimal Start; 小数步长；整数计数；} 其中 Start 是序列的开头， Step 是增量， Count 是步数
3\. 精确数字集：{ decimal[] Values; 其中 Values 是一些小数的数组。

当我对上面列出的任何类型的任何两个范围进行交集时，我肯定会得到其中一种类型的结果，例如“连续”和“定期”范围的交集将导致“定期”、“连续”。和“精确的集合”将导致精确的集合，“续”。并且“精确”也将返回精确值。相同类型的交集将返回输入类型的结果。
2 个范围的联合有点复杂，但无论如何也会返回在上述类型中定义的 2 到 3 个范围。
拥有交集/联合功能，我将始终能够在 2 到 N 范围内运行它，并将在输入类型术语中得到结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:43:48.997

首先，遵循之前的其他答案：我不相信有一个标准库：它看起来非常像一个特例。

其次，问题/要求表述不够清楚。我将按照问题介绍，将 3 种不同的类型称为“set”、“periodic”、“continuous”。

考虑两个集合，{1,4,5,6} 和 {4,5,6,8}。它们的交点是 {4,5,6}。我们是否必须将其标记为“周期性”，因为该描述适合这种情况，或者因为它是集合的交集而标记为“集合”？

由此，更一般地，我们是否需要将“set”标签更改为“periodic”，只要它的内容是周期性的？毕竟，“周期”是“集合”的特例。

同样，考虑“周期性”{4,6,8} 和集合 {10,15,16} 的并集。我们是否必须将结果定义为一个周期性的 {4,6,8,10} 加上一个周期性的{15,16} 或者更确切地说是一个包含所有值的集合，或者另一个品种？

那么退化的情况呢：{3} 是“集合”、“周期性”，还是“连续”？“连续”{1-4} 和“集合”{4,7,8} 的交集是什么类型？以及连续{1-4}和连续{4-7}的交集？

等等：必须清楚任何结果 - 来自联合和/或交集 - 必须如何标记/描述，例如 - 两个离散类型（非连续）的交集或联合是否始终是一种类型（通常一个集合，可能是一个周期性的），或者更确切地说总是一系列周期性，或者......

第三，假设上述问题已经解决，我相信您可以按照以下准则来实现：

*   只考虑两种“类型”，即“连续”和“集合”。“周期”只是“集合”的一种特殊形式，在任何时候，如果合适的话，我们可以将“集合”标记为“周期”。

*   定义一个公共基类，并使用适当的派生（重载）方法来进行联合、交集和您可能需要的任何东西，以生成 - 例如 - 作为结果的列表（baseType）。

逐个案例的实现基本上非常简单——假设我的介绍性问题已经得到解答。无论最初的问题在哪里显得有些“困难”，这只是因为问题和规范还没有很好地定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:24:55.227

这一切听起来都很定制——所以我认为你不会找到一个可以立即完成所有这些工作的库——但那里没有什么太难的地方。

我会让你开始的。对于第一个示例来说工作正常，但该方法`Range.ConstructAppropriate`需要特别复杂才能返回“*从 2 到 4 的周期性序列，第 2 步，从 5 到 11 的连续范围，以及从 12 到 18 的周期性序列，第 2 步*”由`{ 5, 6, 7, 8, 9, 10, 11, 2, 4, 12, 14, 16, 18 }`示例 1 中的两个集合并集得到的集合。

另外（在麻烦连接所有代码之后）我从评论中注意到您需要非整数。这使事情复杂化。我想你可以想出一种创造性的方式来应用这种模式。

```
class Program
{
    static void Main(string[] args)
    {
        // Example 1:
        // 1st range is defined as continous range from 5 to 11 and 2nd is periodical sequence from 2 to 18 with step 2 (thus, 8 steps).
        // Intersection will return a periodic sequence from 6 to 10 with step 2.example 1

        ContinuousRange ex1_r1 = new ContinuousRange(5, 11);
        PeriodicRange ex1_r2 = new PeriodicRange(2, 2, 8);

        IEnumerable<int> ex1_intersection = ex1_r1.Values.Intersect(ex1_r2.Values);
        IList<Range> ex1_intersection_results = Range.ConstructAppropriate(ex1_intersection);
    }
}

abstract class Range
{
    public abstract IEnumerable<int> Values { get; }

    public static IList<Range> ConstructAppropriate(IEnumerable<int> values)
    {
        var results = new List<Range>();

        results.Add(ContinuousRange.ConstructFrom(values));
        results.Add(PeriodicRange.ConstructFrom(values));

        if (!results.Any(r => r != null))
            results.Add(Points.ConstructFrom(values));

        return results.Where(r => r != null).ToList();
    }
}

class ContinuousRange : Range
{
    int start, endInclusive;

    public ContinuousRange(int start, int endInclusive)
    {
        this.start = start;
        this.endInclusive = endInclusive;
    }

    public override IEnumerable<int> Values
    {
        get
        {
            return Enumerable.Range(start, endInclusive - start + 1);
        }
    }

    internal static ContinuousRange ConstructFrom(IEnumerable<int> values)
    {
        int[] sorted = values.ToArray();
        if (sorted.Length <= 1)
            return null;

        for (int i = 1; i < sorted.Length; i++)
        {
            if (sorted[i] - sorted[i - 1] != 1)
                return null;
        }

        return new ContinuousRange(sorted.First(), sorted.Last());
    }
}

class PeriodicRange : Range
{
    int start, step, count;

    public PeriodicRange(int start, int step, int count)
    {
        this.start = start;
        this.step = step;
        this.count = count;
    }

    public override IEnumerable<int> Values
    {
        get
        {
            var nums = new List<int>();
            int i = start;
            int cur = 0;

            while (cur <= count)
            {
                nums.Add(i);
                i += step;
                cur++;
            }

            return nums;
        }
    }

    internal static Range ConstructFrom(IEnumerable<int> values)
    {
        // check the difference is the same between all values

        if (values.Count() < 2)
            return null;

        var sorted = values.OrderBy(a => a).ToArray();

        int step = sorted[1] - sorted[0];

        for (int i = 2; i < sorted.Length; i++)
        {
            if (step != sorted[i] - sorted[i - 1])
                return null;
        }

        return new PeriodicRange(sorted[0], step, sorted.Length - 1);
    }
}

class Points : Range
{
    int[] nums;

    public Points(params int[] nums)
    {
        this.nums = nums;
    }

    public override IEnumerable<int> Values
    {
        get { return nums; }
    }

    internal static Range ConstructFrom(IEnumerable<int> values)
    {
        return new Points(values.ToArray());
    }
} 
```

# android - 三星 Galaxy S 3 上的蓝牙连接中断

> ID：12727144
> 
> 赞同：3
> 
> 时间：2012-10-04T12:19:40.457
> 
> 标签：android

我为手机开发了 android java 代码，它以 115200 的波特率从蓝牙设备接收数据。该代码在三星 Galaxy S plus 和 HTC Sensation XE 上运行良好。但在三星 Galaxy S3 上，通信通常会在几分钟后断开，我必须重新连接蓝牙。在尝试了 S3 之后，似乎我也可以在 S3 中完美地进行通信，首先将手机上的蓝牙设置为关闭，然后将手机关闭再打开，然后再次打开蓝牙。任何人都可以提示我如何在不启动手机的情况下进行通信工作？任何帮助表示赞赏。

蒂莫

# spring - 使用 jpa + hibernate + spring 在两个数据库中插入记录

> ID：12727147
> 
> 赞同：0
> 
> 时间：2012-10-04T12:19:51.010
> 
> 标签：spring, hibernate, jpa

我们需要使用 JPA 将记录插入到两个数据源中。

解决这个问题的正确方法是什么？

我们如何声明具有不同数据源的不同持久性单元并管理两个实体管理器并为默认单元名称注入默认持久性上下文，而不在第一个数据源的通用 dao 中提及单元名称并在单独的 dao 中用单元名称覆盖上下文对于第二个数据源中的其他表。

spring 文档非常有限，没有示例。

例子会有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:00:09.367

利用

```
<bean class="..." primary="true" /> 
```

或者[`@Primary`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/annotation/Primary.html)如果您正在使用注释。

这将表明一个实例是您定义多个不同实例的类型的“默认”实例（如您的 EntityManagerFactory）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T16:42:38.090

如果您遵循本教程[http://javacodegeeks.blogspot.com/2010/05/jboss-42x-spring-3-jpa-hibernate.html](http://javacodegeeks.blogspot.com/2010/05/jboss-42x-spring-3-jpa-hibernate.html) ，您可以进行以下更改以访问两个不同的数据库：

persistence.xml，为您的第二个数据库定义第二个持久性单元。spring.xml，以不同的名称定义第二个 entityManagerFactory bean，让我们说“entityManagerFactoryDB2”并将其配置为使用第二个数据库的持久单元。对于您要访问第二个数据库的每个 DAO，包括以下内容：

```
@Autowired
private EntityManagerFactory entityManagerFactoryDB2;

@PostConstruct
public void init() {
    super.setEntityManagerFactory(entityManagerFactoryDB2);
} 
```

就这样！

在 Spring 服务类上，像往常一样使用 DAO！

# magento - Magento，将属性添加到同一属性集上的多个组

> ID：12727151
> 
> 赞同：1
> 
> 时间：2012-10-04T12:20:03.280
> 
> 标签：magento, magento-1.7

那可能吗？我尝试使用管理 GUI 进行操作。当我添加属性时，它像往常一样从可用属性中消失，但是如果我将它移动到属性集的组内，则没有“复制”或类似选项。

我意识到这个问题是因为我们正在以编程方式导入产品、类别和属性。在我们拥有的语言属性上，例如*German*。它在多个地方使用，用于手动语言、标题、描述等。我们不知道它，只是在检测到该属性仅在放置它的最后创建的组中找到时才意识到。

如果不可能，那么我们如何解决这个问题？我们是否应该创建几个不同的属性以用于属性集中的不同组？也许**German_manual**，**geman_language**或类似的东西？还是已经有解决方案，我们现在知道了？

希望我已经清楚地描述了我的问题，这有点复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:29:20.983

*属性集*是属性的虚拟框（我们可以将属性视为物理属性）。一个*Attribute Set中的**Groups*只是更多的虚拟盒子来分割一个大“盒子”（*Attribute Set*），它们的创建是为了简化属性管理，在逻辑容器上划分*Attribute Set 。*

 ***现在，正如我从您的问题中了解到的那样，您希望将 1 个属性分配给 1 个*Attribute Set*内的 2 个不同的组。将1块石头放入2个盒子中是一样的...***

# c++ - 如何将数据推送到 C++ 中的第二个位置

> ID：12727154
> 
> 赞同：0
> 
> 时间：2012-10-04T12:20:12.170
> 
> 标签：c++, casting, struct

假设我有以下程序，

```
 typedef struct xyz
    {
    int abc[6];//int abc;
    //int yz;
    }xyz;
    int main()
    {
    int *ptr = new int(10);
    int *ptr1 = new int(20);

    xyz* XYZ = reinterpret_cast <xyz*>(ptr); //Initializes XYZ->abc[0]
    XYZ = reinterpret_cast <xyz*>(ptr1);//Initializes XYZ->abc[0]

    } 
```

这里的值进入`zeroth location`。如果我想将值推入`XYZ->abc[1]`，那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:23:11.227

也许你想做

```
 XYZ = reinterpret_cast<xyz*> (ptr1+1); 
```

但是这种代码很恶心，它可能是一个**未定义的行为**（因为`ptr1+1`可能不是一个有效的位置，你可能会得到一个[分段错误](http://en.wikipedia.org/wiki/Segmentation_fault)），所以你应该避免这样做。

我实际上不明白你的问题的动机（和用例）。

也许您想在堆上分配十个整数。然后编码

```
int *ptr = new int[10]; 
```

并且不要忘记初始化它们，例如`memset (ptr, 0, sizeof(int)*10);`

在 Linux 系统上，我强烈建议`g++ -Wall -g`使用[valgrind](http://valgrind.org/)进行编译和`gdb`调试程序。你真的很想知道这些工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:25:10.990

您可以在不进行任何转换的情况下执行此操作：

```
xyz val;

val.abc[0] = 1234;
val.abc[1] = 5678; 
```

或者如果您需要动态分配的实例：

```
xyz* ptr = new xyz();

ptr->abc[0] = 1234;
ptr->abc[1] = 5678; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T12:25:25.263

简单的：

```
xyz XYZ;
XYZ.abc[1] = *ptr; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T12:32:34.763

# css - 边框图像在 Chrome 和 FireFox 之间呈现不同

> ID：12727160
> 
> 赞同：4
> 
> 时间：2012-10-04T12:20:21.923
> 
> 标签：css

我目前正在使用 CSS3 `border-image`，并注意到 Chrome 和 FireFox（最新版本）之间的图像应用方式存在差异。

我有一个非常基本的例子，我正在使用它`border-image`来研究一些`textarea`标签来研究不同的效果。

在 FireFox 中，图像被分割成多个部分，并按预期应用到边界部分。正如我所期望的那样，中心是透明的。

在 Chrome 中，它对边框做同样的事情，但也显示图像的中心。

浏览器是否应用了一些默认设置/样式，导致一个浏览器透明，而另一个浏览器不透明？

这是我可以覆盖的设置/样式吗？

### [小提琴](http://jsfiddle.net/FranWahl/8hwnU/)

> **编辑**
> 
> 我想，看到浏览器只是这样做，如果不能在 CSS 中过度编写行为，我能做些什么来确保图像在 2 个浏览器之间应用相同？

万一小提琴过时了，我也包括了下面的代码。

的HTML：

```
<textarea class="no-image">some default text</textarea>
<textarea class="stretch">some default text</textarea>
<textarea class="round">some default text</textarea>
<textarea class="repeat">some default text</textarea>​ 
```

CSS：

```
textarea{
    border: 50px solid #feb515;
    border-radius: 15px;
    -moz-border-radius: 15px;
    -webkit-border-radius: 15px;
    width: 500px;
    height: 100px;
    padding: 15px;
    border-image-slice: 5;
}

textarea.stretch{
    border-image: url(http://www.w3.org/TR/css3-background/groovy-border-image-slice.png) 100 stretch;
    -moz-border-image: url(http://www.w3.org/TR/css3-background/groovy-border-image-slice.png) 100 stretch;
    -webkit-border-image: url(http://www.w3.org/TR/css3-background/groovy-border-image-slice.png) 100 stretch;
}

textarea.round{
    border-image: url(http://www.w3.org/TR/css3-background/groovy-border-image-slice.png) 100 round stretch;
    -moz-border-image: url(http://www.w3.org/TR/css3-background/groovy-border-image-slice.png) 100 round stretch;
    -webkit-border-image: url(http://www.w3.org/TR/css3-background/groovy-border-image-slice.png) 100 round stretch;
}

textarea.repeat{
    border-image: url(http://www.w3.org/TR/css3-background/groovy-border-image-slice.png) 100 repeat round;
    -moz-border-image: url(http://www.w3.org/TR/css3-background/groovy-border-image-slice.png) 100 repeat round;
    -webkit-border-image: url(http://www.w3.org/TR/css3-background/groovy-border-image-slice.png) 100 repeat round;
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:10:15.270

所以我已经让它工作了 - 我不确定它*为什么*会工作。

[http://jsfiddle.net/6ysfr/2/](http://jsfiddle.net/6ysfr/2/)

我认为可能是您的边框宽度需要与边框图像中指定的数字相匹配，并且我认为边框图像切片可能会搞砸。

没关系 - 我认为正如你所说 - 使用边框图像切片会导致 chrome 中的“填充”出现奇怪的行为。我的示例有效，因为它缺少边框切片的偏移量。

# .htaccess - 通过 htaccess 将 joomla 1.5 RSS 提要重定向到新的 onw

> ID：12727163
> 
> 赞同：1
> 
> 时间：2012-10-04T12:20:35.480
> 
> 标签：.htaccess, joomla, url-rewriting, rss, rewrite

我想通过 htaccess 将旧的 joomla 1.5 RSS Feed 重定向到新的。例如，我有一个旧 URL：[http://www.mydomain.tld/en/categories/debian.feed?type=atom](http://www.mydomain.tld/en/categories/debian.feed?type=atom) 并希望将其重定向到：[http://www.mydomain.tld/en/?format =饲料&类型=rss](http://www.mydomain.tld/en/?format=feed&type=rss)

我使用以下 htaccess 规则进行了尝试，但没有成功：

```
RewriteRule ^de/categories/([a-z]+)\.feed?type=atom$ http://www.mydomain.tld/en/?format=feed&type=rss [R=301,L]
RewriteRule ^en/categories/([a-z]+)\.feed?type=atom$ http://www.mydomain.tld/en/?format=feed&type=rss [R=301,L] 
```

有人知道我的规则有什么问题，或者有一个适合我的规则吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:19:31.247

我认为查询字符串是你的问题——你不能用重写规则来匹配它。尝试类似：

```
RewriteCond %{QUERY_STRING} ^type=atom$
RewriteRule ^de/categories/([a-z]+)\.feed$ http://www.mydomain.tld/en/?format=feed&type=rss [R=301,L] 
```

# c# - 如何获取 WMI 事件？

> ID：12727170
> 
> 赞同：0
> 
> 时间：2012-10-04T12:21:00.727
> 
> 标签：c#, powershell, wmi, wmi-query, hyper-v

如何列出注册到 Msvm_ComputerSystem 类的 WMI 事件。我创建了一个虚拟机并有一个事件来注册poweronEvent。现在我想列出注册的事件。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:23:35.820

您可以尝试使用此代码 - 基于`ObjectQuery`类

```
 VMState vmState = VMState.Undefined;
            var connectionOptions = new ConnectionOptions();
            connectionOptions.Username = userName;
            connectionOptions.Password = password;

            var managementScope= new ManagementScope(string.Format(@"\\{0}\root\virtualization", hostServer), connectionOptions );
            manScope.Connect();  

            var objectQuery= new ObjectQuery("SELECT * FROM Msvm_ComputerSystem");
            var managementObjectSearcher  = new ManagementObjectSearcher(managementScope, objectQuery);
            var collection = managementObjectSearcher.Get();

            foreach (var managementObject  in collection )
            {
               Console.WriteLine(managementObject["Yourkey"].ToString());
            } 
```

# linux - 如果未从 DHCP 获得，则设置静态 ip（脚本）

> ID：12727175
> 
> 赞同：12
> 
> 时间：2012-10-04T12:21:06.727
> 
> 标签：linux, ip, dhcp, ifconfig

我在带有 linux 的嵌入式设备上工作。我想先使用 DHCP 客户端，但如果 DHCP 服务器没有响应，我想设置静态默认 IP。我想它不应该很复杂，但我还没有找到严格的答案。

我正在考虑 2 个解决方案（不幸的是，我可以在几天内对其进行测试）：

1.  我用 ifconfig 设置静态 IP，然后调用 udhcpc。如果 udhcpc 不会获得新 IP，旧 IP 将保留。

2.  我也可以先调用udhcpc，稍等片刻，查看是否获取到IP。但这对我来说并不好。我不想在启动中添加任何等待程序。

BR巴特克

我使用 udhcpc - 类似：

```
udhcpc -n -f -i eth0 
if ifconfig | grep -A1 eth0 | grep inet 
    then 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-04T13:28:22.000

dhclient 应该通过租约声明支持回退查看`dhclient.conf`手册页。

将这样的内容添加到您的`dhclient.conf`

```
timeout 10;
lease {
interface "eth0";
fixed-address 10.0.0.10;
option subnet-mask 255.255.255.0;
renew 2 2022/1/1 00:00:01;
rebind 2 2022/1/1 00:00:01;
expire 2 2022/1/1 0:00:01;
} 
```

或者您可以为接口分配第二个 IP，例如`/etc/network/interfaces`

```
auto lo
iface lo inet loopback
iface eth0 inet dhcp

auto eth0:1
iface eth0:1 inet static
address 10.10.10.2
netmask 255.255.255.0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-26T03:29:18.660

虽然是一个老问题，但这里可能值得注意的是，Gentoo Linux 已经拥有这个功能很长时间了（我从 2004 年就开始使用它了）。Gentoo 的网络配置文件 (/etc/conf.d/net) 允许在 DHCP 失败的情况下为任何接口轻松指定备用 IP 地址，例如：

```
modules="dhclient"
config_eth0="dhcp"
config_eth1="dhcp"
dhclient_eth1="nogateway"
fallback_eth0="apipa"
fallback_eth1="192.168.10.10/24"
fallback_routes_eth1="default via 192.168.10.1" 
```

Maurizio 提供的使用 eth0:0 之类的别名的解决方案在许多（可能是大多数）情况下都很好，但不是全部。我遇到了一个软件，它不认为 eth0:0 是 eth0 的合适替代品，因为由于 DHCP 没有回答而未定义它，即使它是同一个端口。所以静态回退地址略优于别名解决方案。

# iphone - 如何禁用 NSDictionary 自动按键排序

> ID：12727176
> 
> 赞同：10
> 
> 时间：2012-10-04T12:21:12.227
> 
> 标签：iphone, ipad

当我在其中添加值时，`NSMutableDictionary`会自动设置 Key wise。我如何禁用它并按照第一组第一组和第二组第二组进行排列。

```
NSMutableDictionary* filteredDictionary = [NSMutableDictionary dictionary];

[filteredDictionary setObject:@"abc" forKey:@"1"];
[filteredDictionary setObject:@"abc" forKey:@"3"];
[filteredDictionary setObject:@"abc" forKey:@"2"];
[filteredDictionary setObject:@"abc" forKey:@"5"];
[filteredDictionary setObject:@"abc" forKey:@"4"];

NSLog(@"%@",filteredDictionary);

current output:
{
1 = abc;
2 = abc;
3 = abc;
4 = abc;
5 = abc;    
}

but i want 
{
1 = abc;
3 = abc;
2 = abc;
5 = abc;    
4 = abc;
} 
```

有什么办法可以禁用按键排序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T12:29:05.590

`NSDictionary`没有对你的键进行排序，字典中键的顺序*没有定义*，因为它是一个无序的集合。

这意味着您在获取/打印它们时不能信任元素的顺序，除非您在获取它们时使用`keysSortedByValueUsingSelector:`或对它们进行排序。`keysSortedByValueUsingComparator:`

您也可以在[allKeys](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDictionary/allKeys)的手册中看到这一点；

> 返回值
> 包含字典键的新数组，如果字典没有条目，则返回空数组。
> 
> 讨论**未定义**
> 数组中元素的顺序。

 **没有办法让键/值按你想要的`NSDictionary`顺序排列，所以如果你需要它们按照添加的顺序排列，你基本上有两个选择；

*   `NSArray`在将它们添加到 ,的同时将它们添加到有序集合中/从有序集合中删除它们`NSDictionary`，并将*该*集合用于有序访问。
*   将一个字段添加到您要添加到字典中的数据中，每次添加都会计数，然后`keysSortedByValueUsingComparator:`在从数组中获取所有键时使用该字段对其进行排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T12:36:03.803

这是一种方法：

```
NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"key" ascending:YES comparator:^(id obj1, id obj2) {

    if (obj1 > obj2) {
        return (NSComparisonResult)NSOrderedDescending;
    }
    if (obj1 < obj2) {
        return (NSComparisonResult)NSOrderedAscending;
    }
    return (NSComparisonResult)NSOrderedSame;
}];

NSArray *sortedKeys = [[filteredDictionary allKeys] sortedArrayUsingDescriptors:[NSArray arrayWithObject:sortDescriptor]];

NSMutableDictionary *orderedDictionary = [NSMutableDictionary dictionary];

for (NSString *index in sortedKeys) {
    [orderedDictionary setObject:[filteredDictionary objectForKey:index] forKey:index];
}

filteredDictionary = orderedDictionary; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T12:26:38.507

`NSDictionary`不是要排序的。您可以通过使用所有键`allKeys`并根据自己的喜好对该数组进行排序来对其进行排序。然后遍历这个数组，得到对应的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T13:14:42.270

在`NSDictionary` 您插入时，您将无法获得数据。
如果要根据插入的数据获取数据，可以使用数组，**

# javascript - WebService [Get] 请求的安全问题？

> ID：12727187
> 
> 赞同：1
> 
> 时间：2012-10-04T12:21:49.450
> 
> 标签：javascript, asp.net, web-services, security, csrf

*在阅读了关于试图解释为什么不应该允许获取请求所以我们不应该使用的著名（也是唯一的）[文章](http://weblogs.asp.net/scottgu/archive/2007/04/04/json-hijacking-and-how-asp-net-ajax-1-0-mitigates-these-attacks.aspx)之后，我仍然有一个问题：`asmxs``[ScriptMethod(UseHttpGet = true)]`*

为什么 ？

Web service ，因为它的名字是 service ，所以他不关心它是 GET 还是 POST ：

即使一个人做了一个 CSRF ：就像嵌入到他的恶意网站中一样：

```
<script type="text/javascript" src="http://contoso.com/StockService/Stock.asmx/GetQuotes?symbol=msft" /> 
```

所以呢 ？

通过 asmx POV - 这只是一个正常的请求。

有人可以帮我找出例子的问题吗？

## 编辑

新浏览器解决了许多问题。此[链接](http://www.thespanner.co.uk/2011/05/30/json-hijacking/)显示了应在新浏览器中测试的其他一些方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T12:48:40.823

[JSON 劫持在本文](http://blog.spiderlabs.com/2012/09/json-hijacking-demystified.html)中简要说明。

假设您有一个 Web 服务，它向当前经过身份验证的用户返回信用卡号码列表：

```
[{"id":"1001","ccnum":"4111111111111111","balance":"2345.15"},
 {"id":"1002","ccnum":"5555555555554444","balance":"10345.00"},
 {"id":"1003","ccnum":"5105105105105100","balance":"6250.50"}] 
```

以下是攻击的执行方式：

1.  让经过身份验证的用户访问恶意页面。

2.  恶意页面将尝试从用户登录的应用程序访问敏感数据。这可以通过在 HTML 页面中嵌入脚本标签来完成，因为同源策略不适用于脚本标签。`<script src="http://<json site>/json_server.php"></script>`. 浏览器将发出 GET 请求，`json_server.php`并且用户的任何身份验证 cookie 将与请求一起发送。

3.  此时，虽然恶意站点已执行脚本，但它无权访问任何敏感数据。可以通过使用对象原型设置器来访问数据。在下面的代码中，当尝试设置`"ccnum"`属性时，对象原型属性被绑定到定义的函数。

    ```
    Object.prototype.__defineSetter__('ccnum',function(obj) {
        secrets = secrets.concat(" ", obj); 

    }); 
    ```

至此，恶意网站已经成功劫持了`ccnum`返回的敏感财务数据() `json_server.php`。

还有其他形式的 JSON 劫持技术不依赖于浏览器对该`__defineSetter__`功能的支持。[这只是进行攻击的一种方式，但本文](http://www.thespanner.co.uk/2011/05/30/json-hijacking/)中描述的还有许多其他方式，例如`Array constructor clobbering`, `UTF-7`, `ES5 functionality`.

因此，在 ASP.NET 中默认禁用返回 JSON 的 GET 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:49:01.170

好吧，如果您按照您提供的文章中链接的文章进行操作，可以在此处找到： http: [//ajax.asp.net/docs/overview/AsynchronousLayerOverview.aspx](http://ajax.asp.net/docs/overview/AsynchronousLayerOverview.aspx)，然后您可以继续阅读，这是唯一的原因指定是这样的：

> 对于修改服务器上的数据或公开关键信息的方法调用，不建议使用 GET 请求。在 GET 请求中，消息由浏览器编码到 URL 中，因此更容易被篡改。对于 GET 和 POST 请求，您应该遵循安全准则来保护敏感数据。

# file - VBScript 获取文件前缀

> ID：12727191
> 
> 赞同：0
> 
> 时间：2012-10-04T12:21:59.183
> 
> 标签：file, vbscript

我正在尝试解析 IIS 日志，并根据日志的前缀设置文件的 InputFormat。

我将日志文件设置为一个变量：logFile（即 C:\inetpub\logs\u_ex121004.log）。

```
 Set objFileSys = CreateObject("Scripting.FileSystemObject")
 If objFileSys.FileExists(logFile) Then
    -----Here's what I need to look for -------  If FileStartsWith "u_ex" Then
       logFormat = "W3C"
    -----Here's what I need to look for -------  Else If FileStartsWith "in" Then
       logFormat = "IIS"
    End If
 End if 
```

所以，我需要的是一个函数或等效项，它将在文件名中搜索一个字符串。此外，文件名是完整的文件名，因此如果不剥离目录路径，使用 Left() 将无法工作。

感谢您在这里的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:36:34.270

获取文件名的最安全方法：

```
sFName = objFileSys.GetFileName(logFile) 
```

然后你可以比较使用`Left(sFName, 4) = "u_ex"`或检查使用`1 = Instr(sFName, "u_ex")`

# android - Android - 为什么在创建新对象后显示“无法解析或不是字段”？

> ID：12727193
> 
> 赞同：2
> 
> 时间：2012-10-04T12:22:03.600
> 
> 标签：android, eclipse, android-layout, eclipse-juno

我对 Android 开发非常陌生。当我创建一个新项目并尝试使用图形布局简单地添加一个按钮并尝试引用它时，它不会找到它。

有时做“清洁……”有时行不通。有时也重新启动 Eclipse 工作，有时它没有。

日食真的那么不稳定还是我做错了什么？

另外我应该提到我确实浏览了其他人的所有帖子（我知道这个问题被问了很多）但我仍然没有找到答案

这是 .java 文件：

```
 package com.example.testapp;

import com.example.testapp.R;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.Button;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button b = (Button) findViewById(R.id.button1);

    }

} 
```

这是xml文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world"
        tools:context=".MainActivity" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginTop="14dp"
        android:text="Button" />

</RelativeLayout> 
```

# java - 在不同的应用程序中写入和读取 Cookie

> ID：12727199
> 
> 赞同：2
> 
> 时间：2012-10-04T12:22:20.223
> 
> 标签：java, servlets, cookies

我有两个在 Jboss 中运行的应用程序，我可以在一个应用程序中写入一个 cookie 并在另一个应用程序中读取吗？

例如，如果我有两个 Servlet： - localhost:8080/Application1 上的 WriterCookieServlet - localhost:8080/Application2 上的 ReaderCookieServlet

WriterCookieServlet：

```
 Cookie cookie = new Cookie("cookie", "cookieValue");
 response.addCookie(cookie);
 response.sendRedirect("localhost:8080/Application2"); 
```

然后在 ReaderCookieServlet 上我想读取这个 cookie。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:39:15.173

我认为@galuano1 是对的：这确实应该是可能的。不过，请确保*路径*正确。它用于确定某个 cookie 是否对 Web 应用程序可见。

来自[Cookie Javadoc](http://docs.oracle.com/javaee/6/api/javax/servlet/http/Cookie.html)：

> 该 cookie 对您指定的目录中的所有页面以及该目录的子目录中的所有页面都是可见的。cookie 的路径必须包含设置 cookie 的 servlet，例如*/catalog*，这使得 cookie 对服务器上*/catalog*下的所有目录可见。
> 
> 有关为 cookie 设置路径名的更多信息，请参阅 RFC 2109（可在 Internet 上获得）。

我会说你应该使用`/`目录，因为两个应用程序都有不同的上下文根。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T12:41:15.113

只要cookie中指定的域相同（这里是localhost），cookie就可以被两个不同的应用程序读取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-28T09:16:22.210

确实如此：如果 cookie 来自同一个域，则应用程序可以从理论上读取它。这意味着应用程序有它可用，并不意味着应用程序有解释它所需的秘密

这里的问题可能与理论部分无关，而是与技术部分有关：如果 cookie 不是明文（它应该是）它需要由需要读取内容的目标应用程序

打开 如果伪造 cookie 的应用程序与需要读取它的应用程序相同，这通常是开箱即用的。
但是如果它是由应用程序 1 伪造的，并且需要由应用程序 2 解密，则需要确保使用此命令：

```
Cookie cookie = new Cookie("cookie", "cookieValue"); 
```

不使用任何特定于应用程序的秘密来加密 cookie，否则它永远不会被其他应用程序打开。
当然答案可能会根据您使用的技术而改变，不知道 Java 中的行为，我知道许多技术使用基于机器的秘密来加密和签署 cookie。

# visual-studio-2008 - 在 vb 2008 中清除组合框

> ID：12727200
> 
> 赞同：0
> 
> 时间：2012-10-04T12:22:22.710
> 
> 标签：visual-studio-2008, combobox, refresh

如果组合框的下拉样式为“dropwdownlist”，您如何清除或刷新 Visual Basic 2008 中的组合框？如果样式为“下拉列表”，我可以刷新组合框，但是当我将其更改为“下拉列表”时，我无法再清除它/

这是我用来清除文本的代码。

```
End With
    With cmbItemType
        cmbItemType.ResetText()
    End With 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T08:36:20.630

设置`selectedindex`为 -1

在你的情况下，它应该是`cmbItemType.SelectedIndex = -1`

# java - 在android中创建启动器动画

> ID：12727212
> 
> 赞同：0
> 
> 时间：2012-10-04T12:22:55.953
> 
> 标签：java, android, animation, button, android-animation

我正在考虑为android制作一个启动器，我不知道我是否会推销它。但我想我的手机处于横向模式，我看到 4 行按钮，每行 4 个按钮。有点像带有按钮的网格。然后，一旦我单击一个按钮，我希望这些按钮在中间分开并相互移动，并带有动画。然后第二个屏幕从后面进来。我怎样才能做到这一点？我想创建两个布局，每个布局都有 4 个按钮，一旦我单击一个，它应该将布局彼此移动，第二个空白屏幕会从后面飞进来，就像它在按钮后面一样。我怎样才能创建这些动画？请帮助我，非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:55:43.550

您可以添加一个宽度最初为 0dp 的中间行，然后在打开 Activity 时可以为其宽度设置动画，对于第二个屏幕，您可以在 startActivity() 之后使用带有 overridePendingTransition() 的简单 zoomIn 动画

# python - 跨套接字python发送整数

> ID：12727213
> 
> 赞同：0
> 
> 时间：2012-10-04T12:22:57.717
> 
> 标签：python, sockets

我有一个整数，我想在 python 中将它从一个套接字发送到另一个。让我们说这个整数a = 2。我如何通过连接将此整数发送到套接字。目前，我已经完成了以下代码：

```
server_socket.send(str(a))         #Server side

b=int(client_socket.recv(512))        #Client side 
```

但是对 int() 的调用给了我错误，说它的长度无效。我基本上没有得到在 recv() 方法中放入什么参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:34:24.337

您正在跨行发送一个 4 字节整数，但您试图接收 512 个字节，所以它只是分配一个未分配的内存位，如下所示：

0000000000000000000000000000 [...剪掉更多字节...]

....它收到的字节，所以它看起来像：

F34D5DD200000000000000000000 [...剪掉更多字节...]

所以你有一个 512 字节的字节数组，它不能转换为 int。recv(4) 代替，或者更好的是使用处理动态长度的协议（这是解决这个问题的唯一真正稳定的解决方案，你不能指望 recv(4) 解决这个问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:33:25.207

如果您使用 TCP 连接，您应该记住它是一个流协议，因此没有任何固定大小的消息。这意味着当您调用时，`recv`您获得的字节数可能少于请求的字节数，甚至比单次调用发送的字节数还要少`send`。如果有更多来电，您也可以收到所有请求`send`。

所有这一切意味着您的调用`recv`可能只返回已发送的字符串的一部分，或者更多。无论哪种方式，收到的字符串显然都不是有效的整数。要查看您*真正*收到的内容，您应该打印它。

# php - 向除 window.alert 以外的用户显示消息

> ID：12727214
> 
> 赞同：-5
> 
> 时间：2012-10-04T12:23:01.100
> 
> 标签：php

插入后，代码提交到数据库中，我想向用户展示他已成功插入值。之后它应该重定向到页面。

对于我使用的重定向

> 标头（“位置：header.php”）；

我希望完成剩下的事情。我已经使用 window.alert 显示了一条警报消息。我想要的不是这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T12:24:31.333

使用[`substr()`](http://php.net/manual/en/function.substr.php)函数截断字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:43:13.133

这是我用于类似情况的功能。指定要修剪的字符数。如果它比那个数字短，它什么也不做，但如果它更长，它会`substr`弹出最后一位，用`...`

```
function desc_trim($input, $cut = 65)
    {
        if (strlen($input) > $cut)
            {
                $input = substr($input, 0, $cut);
                $input = explode(" ", $input);
                array_pop($input);
                $input = implode(" ", $input);
                $input .= "...";
            }
        return $input;
    } 
```

# jqgrid - $.jgrid.useJSON = true 的目的是什么？

> ID：12727215
> 
> 赞同：0
> 
> 时间：2012-10-04T12:23:08.637
> 
> 标签：jqgrid

我经常看到这条线，但找不到答案：

```
$.jgrid.useJSON = true; 
```

什么目的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:44:18.853

通常我通过以下方式包含 jqGrid

```
<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/themes/redmond/jquery-ui.css" />
<link rel="stylesheet" type="text/css" href="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/css/ui.jqgrid.css" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>
<script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/js/i18n/grid.locale-en.js"></script>
<script type="text/javascript">
    $.jgrid.no_legacy_api = true;
    $.jgrid.useJSON = true;
</script>
<script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/js/jquery.jqGrid.min.js"></script>
<script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/json2.js"></script> 
```

所以应该首先包括`grid.locale-en.js`which defined `$.jgrid`，然后你可以设置`$.jgrid.useJSON`，`$.jgrid.no_legacy_api`并且 jqGrid 的稍后实现`jquery.jqGrid.min.js`将使用这些设置。

该选项`$.jgrid.useJSON`将`$.jgrid.parse`用于解析 JSON 字符串 with`JSON.parse`或 with `eval`。

确切地说，该方法`$.jgrid.parse`不会经常使用。大多数情况下是相关的：

1.  `datastr`如果值`datastr`具有“字符串”类型，则解析输入并且`datatype: "jsonstring"`
2.  解析`postData.filters`（用于本地数据类型和高级搜索的过滤器参数）
3.  在以下情况下解析来自服务器的 JSON 响应以获取子网格`subgridtype: "json"`
4.  `jqGridImport`方法实现内部

因此`$.jgrid.useJSON = true;`建议使用 ，但它可能不会真正影响程序的性能，因为最重要的 JSON 解析案例通常由 jQuery 内部（通常由`jQuery.ajax`）完成，而不是由 jqGrid 代码完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:26:27.797

调查来源使一切变得干净：

```
parse : function(jsonString) {
  ...
  return ($.jgrid.useJSON===true && typeof (JSON) === 'object' && typeof (JSON.parse) === 'function') 
    ? JSON.parse(js) 
    : eval('(' + js + ')');
} 
```

所以基本上它说：

*要解析 JSON 字符串`JSON`，请尽可能使用 JavaScript API 而不是`eval`*

# javascript - 如何检查每个新滚动并避免 Apple 鼠标问题（多滚动效果）

> ID：12727219
> 
> 赞同：9
> 
> 时间：2012-10-04T12:23:14.250
> 
> 标签：javascript, jquery, macos, mousewheel

我尝试制作鼠标滚轮事件脚本，但由于我使用的是 Apple Magic Mouse 及其继续滚动功能，因此遇到了一些问题。

我想这样做[http://jsfiddle.net/Sg8JQ/](http://jsfiddle.net/Sg8JQ/)（来自[jQuery Tools Scrollable with Mousewheel - 滚动一个位置并停止](https://stackoverflow.com/questions/8730356/jquery-tools-scrollable-with-mousewheel-scroll-one-position-and-stop)，使用[http://brandonaaron.net/code/mousewheel/demos](http://brandonaaron.net/code/mousewheel/demos)），但我想要一个简短的滚动到框时的动画（如 250 毫秒），以及在一个动画中多次滚动时穿过多个框的能力。（如果我滚动，动画开始滚动到第二个框，但如果我再次滚动，我想去第三个，如果我滚动两次，到第四个，等等）

我首先认为`stopPropagation`//可以“停止”鼠标滚轮速度（`preventDefault`和`return false;`var delta）——这样我就可以计算新滚动事件的数量（可能使用计时器）——但它们都没有。

想法？

编辑：如果您尝试使用这些鼠标在 Google 日历中滚动，则会切换多个日历，而不仅仅是一个。似乎他们也无法解决这个问题。

编辑2：我认为取消绑定鼠标滚轮并在可以停止鼠标滚轮侦听器之后再次绑定它（并且不要听惯性结束）。它没。

编辑3：尝试使用日期（感谢[这篇文章](https://stackoverflow.com/a/9738433/1113376)），不是最佳但总比没有好[http://jsfiddle.net/eZ6KE/](http://jsfiddle.net/eZ6KE/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-28T00:30:06.400

最好的方法是使用超时并在侦听器内部检查超时是否仍然有效：

```
var timeout = null;
var speed = 100; //ms
var canScroll = true;

$(element).on('DOMMouseScroll mousewheel wheel', function(event) {
    // Timeout active? do nothing
    if (timeout !== null) {
        event.preventDefault();
        return false;
    }

    // Get scroll delta, check for the different kind of event indexes regarding delta/scrolls
    var delta = event.originalEvent.detail ? event.originalEvent.detail * (-120) : (
            event.originalEvent.wheelDelta ? event.originalEvent.wheelDelta : (
                    event.originalEvent.deltaY ? (event.originalEvent.deltaY * 1) * (-120) : 0
    ));

    // Get direction
    var scrollDown = delta < 0;

    // This is where you do something with scrolling and reset the timeout
    // If the container can be scrolling, be sure to prevent the default mouse action
    // otherwise the parent container can scroll too
    if (canScroll) {
        timeout = setTimeout(function(){timeout = null;}, speed);
        event.preventDefault();
        return false;
    }

    // Container couldn't scroll, so let the parent scroll
    return true;
}); 
```

您可以将其应用于任何可滚动元素，在我的例子中，我使用了 jQuery 工具可滚动库，但最终对其进行了大量自定义以改进浏览器支持以及添加特定于我的用例的自定义功能。

您需要注意的一件事是确保超时时间足够长，以防止多个事件无缝触发。我的解决方案只有在您想控制元素的滚动速度以及一次应该滚动多少时才有效。如果您添加`console.log(event)`到侦听器函数的顶部并使用连续滚动外围设备进行滚动，您将看到许多鼠标滚轮事件被触发。

令人讨厌的是，Firefox 滚动 DOMMouseScroll***不会***在魔术鼠标或连续滚动设备上触发，而是在具有滚动并通过鼠标滚轮的单击循环停止的普通滚动设备上触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T17:17:32.983

我在我的网站上遇到了类似的问题，经过多次失败的尝试，我编写了一个函数，计算所选框的总偏移量并重新开始动画。它看起来像这样：

```
function getOffset() {
    var offset = 0;
    $("#bio-content").children(".active").prevAll().each(function (i) {
        offset += $(this)[0].scrollHeight;
    });
    offset += $("#bio-content").children(".active")[0].scrollHeight;

    return offset;
}

var offset = getOffset();
$('#bio-content').stop().animate( {
            scrollTop: offset
}, animationTime); 
```

我希望它能让你了解如何实现你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-11T18:29:40.517

您可以尝试检测车轮何时停止移动，但这会延迟您的响应时间

```
$(document).mousewheel(function() {
  clearTimeout($.data(this, 'timer'));
  $.data(this, 'timer', setTimeout(function() {
     alert("Haven't scrolled in 250ms!");
     //do something
  }, 250));
}); 
```

来源： [jquery mousewheel：检测滚轮何时停止？](https://stackoverflow.com/questions/3515446/jquery-mousewheel-detecting-when-the-wheel-stops)

或实施标志避免新动画的开始

```
var isAnimating=false;

$(document).bind("mousewheel DOMMouseScroll MozMousePixelScroll", function(event, delta) {
   event.preventDefault();
   if (isAnimating) return;
   navigateTo(destination);
});

function navigateTo(destination){
   isAnimating = true;
   $('html,body').stop().animate({scrollTop: destination},{complete:function(){isAnimating=false;}});
} 
```

# javascript - 如何在 extjs 组合框中使用键盘字母键搜索项目？Javascript

> ID：12727221
> 
> 赞同：1
> 
> 时间：2012-10-04T12:23:25.160
> 
> 标签：javascript, extjs

我有一个组合框，我可以获取我想要的所有数据，但是当我输入一个字母时，应该在组合框中选择数据，例如，我的变量：ankara，aston，amasya，bolu，berlin，......当我输入“a”时应该选择字母安卡拉。如果我输入 'as' 单词 aston 应该被选中，我该怎么做？谢谢..

```
 new Ext.form.ComboBox({
    id : 'il3',
    fieldLabel: dil('B Merkez İli'),
    hiddenName : 'b_il_id_hid',
    name : 'b_il_id',
    store: ilStore,
    valueField:'id',
  queryMode: 'local',
    displayField:'isim',
    typeAhead: true,
    triggerAction: 'all',
    emptyText: dil('İl Seçiniz...'),
    selectOnFocus:true,
    anchor: '100%',
    listeners:{
        select:{
            fn:function(combo, value) {
                var modelCmp = Ext.getCmp('ilce3');
                modelCmp.setDisabled(false);
                modelCmp.store.removeAll();
                modelCmp.setValue('');
                modelCmp.store.reload({
                    params: {
                        id: combo.getValue()
                    }
                });

            }
        }
    },
    allowBlank:false
})

store:

 var ilStore = new Ext.data.JsonStore({
root: 'rows',
totalProperty: 'results',
idProperty: 'id',
remoteSort: true,
autoLoad : true,

fields: [
'id', 'isim'
],
baseParams:{
    'tip':'il'
},
listeners:{
    beforeload:function(dukan,nesne){
        var modelCmp = Ext.getCmp('id-faz-yon1');
        dukan.baseParams.faz = modelCmp.getValue();
    },

         keyup: function() {
           this.store.filter('isim', this.getRawValue(), true, false);

    }

},
proxy: new Ext.data.HttpProxy({
    url: 'phps/sabit_agac_arama.php?lang=dil(lang)',
    method : 'POST'
}) 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:31:25.080

添加`queryMode: 'local',`到配置中。[请参阅API 中](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.ComboBox)的示例

# thrust - 推力 - 访问邻居

> ID：12727225
> 
> 赞同：2
> 
> 时间：2012-10-04T12:23:39.417
> 
> 标签：thrust

如果元素遵守许多约束，我想使用 Thrust 的流压缩功能 (copy_if) 从向量中提取元素的索引。这些约束之一取决于相邻元素的值（2D 中的 8 和 3D 中的 26）。我的问题是：如何在 Thrust 中获取元素的邻居？

'copy_if' 的仿函数的函数调用运算符基本上如下所示：

```
__host__ __device__ bool operator()(float x) {
    bool mark = x < 0.0f;
    if (mark) {
        if (left neighbor of x > 1.0f) return false;
        if (right neighbor of x > 1.0f) return false;
        if (top neighbor of x > 1.0f) return false;
        //etc.
    }
    return mark;
} 
```

目前我通过首先启动一个 CUDA 内核（在其中很容易访问邻居）来适当地标记元素来使用一种解决方法。之后，我将标记的元素传递给 Thrust 的 copy_if 以提取标记元素的索引。

* * *

我遇到了counting_iterator 作为一种直接使用threadIdx 和blockIdx 来获取已处理元素的索引的替代品。我尝试了下面的解决方案，但是在编译它时，它给了我一个“/usr/include/cuda/thrust/detail/device/cuda/copy_if.inl(151): Error: Unaligned memory accesses not supported”。据我所知，我并没有试图以不对齐的方式访问内存。任何人都知道发生了什么和/或如何解决这个问题？

```
struct IsEmpty2 {
    float* xi;

    IsEmpty2(float* pXi) { xi = pXi; }

    __host__ __device__ bool operator()(thrust::tuple<float, int> t) {
        bool mark = thrust::get<0>(t) < -0.01f;
        if (mark) {
            int countindex = thrust::get<1>(t);
            if (xi[countindex] > 1.01f) return false;
            //etc.
        }
        return mark;
    }
};

thrust::copy_if(indices.begin(),
                indices.end(),
                thrust::make_zip_iterator(thrust::make_tuple(xi, thrust::counting_iterator<int>())),
                indicesEmptied.begin(),
                IsEmpty2(rawXi)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:19:00.970

@phoad：您对共享内存是正确的，在我发布了我的回复之后，我感到很震惊，随后认为缓存可能会对我有所帮助。但是你的快速反应打败了我。然而，if 语句在不到 5% 的情况下执行，因此使用共享内存或依赖缓存可能对性能的影响可以忽略不计。

元组仅支持 10 个值，因此这意味着在 3D 情况下我需要元组的元组来处理 26 个值。使用元组和 zip_iterator 已经很麻烦了，所以我将通过这个选项（也是从代码可读性的角度来看）。我通过在设备函数中直接使用 threadIdx.x 等来尝试您的建议，但 Thrust 不喜欢这样。我似乎得到了一些无法解释的结果，有时我最终会出现推力错误。例如，以下程序会生成带有“未指定启动失败”的“thrust::system::system_error”，尽管它首先正确地将“Processing 10”打印到“Processing 41”：

```
struct printf_functor {
    __host__ __device__ void operator()(int e) {
        printf("Processing %d\n", threadIdx.x);
    }
};

int main() {
    thrust::device_vector<int> dVec(32);
    for (int i = 0; i < 32; ++i)
        dVec[i] = i + 10;

    thrust::for_each(dVec.begin(), dVec.end(), printf_functor());

    return 0;
} 
```

同样适用于打印 blockIdx.x 打印 blockDim.x 但是不会产生错误。我希望有一个干净的解决方案，但我想我坚持使用我目前的解决方案。

# c# - Ping 以显示应用程序中的网络状态（问题）

> ID：12727226
> 
> 赞同：0
> 
> 时间：2012-10-04T12:23:44.703
> 
> 标签：c#, wpf

我有一些关于应用程序中 ping 操作的问题。我实现了一个显示计算机是否可以访问互联网的控件和一个显示 mysql 服务器可访问性的控件。因此，我目前`TcpClient`用来检查是否可以建立与两个地址的连接。

问题 1)：ping google.com 是否有任何问题？Atm 我每 2 秒 ping www.google.com。谷歌服务器是否有可能因为垃圾邮件推定而无法响应？（我的应用程序必须运行大约 72 小时，它会在 72 小时内每 2 秒 ping 一次）

问题 2)：您对这个话题有什么有用的提示吗？实施此类事情时有什么需要注意的吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:50:11.223

InternetGetConnectedState

看看[http://msdn.microsoft.com/en-us/library/windows/desktop/aa384702(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384702(v=vs.85).aspx)

# php - 跨域登录 POST - 陷阱

> ID：12727229
> 
> 赞同：0
> 
> 时间：2012-10-04T12:23:55.360
> 
> 标签：php, html, post, ssl, https

我们在我们的域上托管了一个应用程序。所有用户都必须首先通过 POST 表单登录。登录后，表单会自动重定向到我们网站上的仪表板页面。

是否可以允许一些客户托管他们自己的登录表单（在他们的网站上），发布到我们的应用程序？跨域发帖是否以任何方式被视为不好的做法？有什么陷阱需要注意吗？最后，考虑到我们的站点总是在 HTTPS 上运行，但客户端站点可能不是，那么 SSL 是如何处理的？这可以用 iframe 规避吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:29:09.833

您要重新发明的内容称为[openid](http://openid.net/)。

您需要做的是提供一个 openid 服务，然后用户可以制作自己的登录表单来连接到您的 open id 服务器。

我有这样一个网站的一个很好的例子：http: [//www.stackoverflow.com](http://www.stackoverflow.com)，它使用 google 和其他人作为 openid 服务登录，制作自己的登录表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:54:18.027

您尝试执行的操作通常称为[单点登录](http://en.wikipedia.org/wiki/Single_sign-on)(SSO)。这可以使用多种技术来实现。

总体思路是将*服务提供者 (SP)*（有时也称为*资源提供者*）与身份提供者 (IdP) 分开，后者提供用户将要使用的实际服务，*身份提供者 (IdP)*是验证用户身份的地方.

simplePHP库使用[多种](http://simplesamlphp.org/)SSO 标准为 IdP 和 SP 身份验证层提供实现：SAML、Shibboleth（也基于 SAML）、OpenID...

请注意，如果您使用的是标准，则不需要使用与您为服务选择的实现相同的实现来实现 IdP。例如，可以使用 Shibboleth 库在 Java 中实现 IdP，并将其与使用 simplePHP 的 SP 结合使用。

您使用哪些技术将取决于您在身份验证后所需的信息类型，例如是否需要额外的属性，以及如何管理 IdP 和 SP 之间的信任。

通常，从 SP 的角度来看，一个简单的 OpenID 系统集成起来相当简单，但它对用户的断言非常有限。相比之下，Shibboleth 有许多选项来指定哪个 SP 可以看到哪些用户属性以及哪些 IdP 打算发布或不发布，但它需要更坚固的基础设施：这通常在一个联邦中完成，所有各方交换一个一组元数据配置，包括它们用来信任彼此的断言的 X.509 证书。

由于身份验证将在您的管理范围之外进行，因此您无法真正控制用户将如何进行身份验证（除非这是更正式的协议的一部分，例如在 Shibboleth 联盟中）。即使您的服务需要 HTTPS，OpenID 提供程序也可能允许用户通过纯 HTTP 进行身份验证。（话虽这么说，大多数严肃的 OpenID 提供商都会安全地做到这一点，无论如何都要由用户来选择他们信任的一个。）

永远不要在您的服务中嵌入 IdP 页面：让用户转到他们的 IdP 页面。为了使身份验证系统安全（就用户而言），用户必须能够看到他们正在输入密码的内容。通过使用 iframe，您可以有效地将真实站点隐藏在后面（并且徽标很容易抓取/伪造）。（[StackExchange OpenID 提供程序在这方面存在一些问题](https://meta.stackexchange.com/q/128733/148833)。）

# c# - 为什么我必须在调用构造函数时将 lambda 捕获到字段变量

> ID：12727232
> 
> 赞同：10
> 
> 时间：2012-10-04T12:24:04.000
> 
> 标签：c#, wpf, lambda, closures

我最近被 lambda 表达式和变量捕获的奇怪事情所困扰。该代码是使用 .NET 4.5 (VS2012) 的 WPF/MVVM 应用程序。我正在使用我的视图模型的不同构造函数来设置回调`RelayCommand`（然后此命令将绑定到我视图中的菜单项）

本质上，我有以下代码：

```
public class MyViewModel : ViewModelBase
{
    public MyViewModel(Action menuCallback)
    {
        MyCommand = new RelayCommand(menuCallback);
    }

    public MyViewModel(Func<ViewModelBase> viewModelCreator)
    // I also tried calling the other constructor, but the result was the same
    //  : this(() => SetMainContent(viewModelCreator())
    {
        Action action = () => SetMainContent(viewModelCreator());
        MyCommand = new RelayCommand(action);
    }

    public ICommand MyCommand { get; private set; }
} 
```

然后使用以下方法创建上述实例：

```
// From some other viewmodel's code:
new MyViewModel(() => new SomeViewModel());
new MyViewModel(() => new SomeOtherViewModel()); 
```

然后将这些绑定到 WPF 菜单 - 每个菜单项都有一个 MyViewModel 实例作为其数据上下文。奇怪的是菜单只工作一次。无论我尝试了哪些项目，它都会调用适当的`Func<ViewModelBase>`- 但只有一次。如果我尝试再次选择另一个菜单项甚至相同的项目，*它根本就不起作用*。VS 调试输出中没有任何关于任何错误的调用和输出。

我知道循环中变量捕获的问题，所以我猜测这个问题是相关的，所以将我的 VM 更改为：

```
public class MyViewModel : ViewModelBase
{
    public MyViewModel(Action buttonCallback)
    {
        MyCommand = new RelayCommand(buttonCallback);
    }
    private Func<ViewModelBase> _creator;
    public MyViewModel(Func<ViewModelBase> viewModelCreator)
    {
        // Store the Func<> to a field and use that in the Action lambda
        _creator = viewModelCreator;
        var action = () => SetMainContent(_creator());
        MyCommand = new RelayCommand(action);
    }

    public ICommand MyCommand { get; private set; }
} 
```

并以同样的方式称呼它。现在一切正常。

只是为了好玩，我还通过在构造函数之外`Func<ViewModelBase>`创建适当的`Action`外部来解决整个构造`MyViewModel`函数：

```
// This code also works, even without the _creator field in MyViewModel
new MyViewModel(() => SetMainContent(new SomeViewModel()));
new MyViewModel(() => SetMainContent(new SomeOtherViewModel())); 
```

所以我设法让它工作，但我仍然很好奇它为什么会这样工作。为什么编译器不能正确捕获`Func<ViewModelBase>`构造函数中的 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T18:29:15.257

我猜下面的代码也可以

```
public MyViewModel(Func<ViewModelBase> viewModelCreator)
{
    var action = () => { creator = viewModelCreator; SetMainContent(creator()); };
    MyCommand = new RelayCommand(action);
} 
```

如果是这样，那么它无法以第一种方式工作的原因是您实际上并没有关闭`viewModelCreator`变量，而是关闭了调用它的结果。

我仍在使用 LINQPad 中的代码，但实际上我似乎并没有遇到与您相同的问题。也许这是特定于`RelayCommand`. 你能发布更多你的代码吗？

# google-app-engine - NDB 查询 fetch() 和 ContextOptions

> ID：12727233
> 
> 赞同：2
> 
> 时间：2012-10-04T12:24:05.587
> 
> 标签：google-app-engine, app-engine-ndb

我只想在我的一个查询中禁用上下文缓存。我以为我可以这样做：

```
MyModel.query(ancestor=user.key).fetch(100, options=ContextOptions(use_cache=False, use_memcache=False)) 
```

或者

```
MyModel.query(ancestor=user.key).fetch(100, config=ContextOptions(use_cache=False, use_memcache=False)) 
```

但这似乎对我不起作用。所以我的问题是如何使用**fetch**禁用缓存和 memcache 查询？

PS：

对于 get() 它完美地工作：

```
MyModel.query(ancestor=user.key).get(use_cache=False, use_memcache=False) 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T16:51:00.240

你应该能写

```
MyModel.query(........).fetch(limit, use_cache=False) 
```

如果那没有达到预期的效果，那么您正在查看一些不同的错误。不需要为此设置全局缓存策略。

（的确，在过去的某个时候， fetch() 不支持 use_cache=...; 但这早已得到修复。此外，没有必要为 use_memcache=... 烦恼；它不被查询使用过程。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T16:12:09.360

仅 get() 支持缓存。从[文档](https://developers.google.com/appengine/docs/python/ndb/cache)：

> 查询不会在任何缓存中查找值。但是，如果缓存策略如此，查询结果将被写回上下文缓存（但永远不会写回 Memcache）。

如果您遇到某些似乎被缓存的实体的问题，您可能必须更改上下文缓存策略：

```
ctx.set_cache_policy(lambda key: False) 
```

set_cache_policy 的参数必须是带有一个参数（键）的函数，如果必须缓存该键，则返回布尔值。这里它总是返回 False，所以不会缓存任何实体。

# android - Android 应用程序和活动之间的静态存储

> ID：12727236
> 
> 赞同：2
> 
> 时间：2012-10-04T12:24:17.057
> 
> 标签：android, android-activity, static, singleton, storage

我有一个 Android 应用程序，我在其中使用一个类来存储活动之间的静态数据，例如：

```
class Global
{
      private static boolean mInitialized = false;
  private static String  mData        = null;

  public static void init()
  {
    mData        = "something";
    mInitialized = true;
  }

      public static boolean isInitialized()
      {
            return mInitialized;
      }

  public static String getData()
  {
    return mData;
  }
} 
```

所以在主要活动 onCreate 我做：

```
if( Global.isInitialized() == false )
    Global.init(); 
```

然后启动其他活动，动作流程为：

MainActivity -> ActionActivity -> PluginActivity

Main 是我初始化 Global 类的地方，Action & Plugin 是我使用该类的 getData() 方法的地方。

现在在某些情况下，我得到了非常奇怪的行为......如果在 PluginActivity （例如 NullPointerException ）中发生了意想不到的事情，则活动崩溃并且应用程序返回到启动它的 ActionActivity，但是，此时，在 onCreate 期间ActionActivity（应该在其中初始化 Global 类）我得到一个异常，因为 getData() 返回 null （并且 isInitialized() 为 false），因为 Global 类从未被 MainActivity 初始化。

那么，如果发生意外异常之类的事情，可以释放/清除像我的 Global 类这样的静态成员的对象吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T12:32:42.023

一般来说，活动应该相互独立。您不应该依赖它们以任何特定顺序启动，或者根本不应该依赖它们。

相反，如果您需要在活动之间共享全局状态数据，即不仅仅是通过`onActivityResult()`子类传递意图附加或结果的参数`Application`，请将初始化代码放入其中`onCreate()`并使用活动从活动中访问它`getApplication()`。还要记住在清单中声明应用程序类。当您的任何活动正在运行时，系统会注意应用程序对象是否存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:40:02.170

在 Android 中，每当应用程序崩溃时，静态变量都会被丢弃。这就是你得到`NullPointerException`. 与其使对象成为静态对象，不如创建一个`Parcelable`或`Serializable` 类并获取和设置字段，然后按意图传递该对象。在另一个活动中，您可以获得该`Parcelable`或`Serializable`类，您可以使用它的属性。

# javascript - 页面正文上指定的字体大小是否会影响其 iframe？

> ID：12727242
> 
> 赞同：0
> 
> 时间：2012-10-04T12:24:36.680
> 
> 标签：javascript, html, css, iframe, web

我有一个带有 iframe 的页面。

1.  该页面的正文大小为 81.25%，字体大小基于 em（即 13px）。
2.  我加载到 iframe 中的页面也有一个基于 em 的字体大小（即 13px）。

现在 iframe 是使用父页面正文大小，即 81.25%，还是使用其默认的 100% 正文大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:35:15.230

iframe 完全独立于调用它们的页面。将其完全视为另一个站点的窗口。除非您使用 Javascript 传递某些内容，否则 iframe 中的页面甚至不知道它在 iframe 中。

因此，iframe 中的页面以它自己的 100% 字体大小加载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T12:39:19.557

**没有** [演示](http://jsbin.com/uluyed/2/edit)

iframe 无法使用父页面 CSS

# c# - AutoFixture 是否会被深圆形对象图所淹没

> ID：12727245
> 
> 赞同：7
> 
> 时间：2012-10-04T12:24:43.330
> 
> 标签：c#, autofixture

我正在使用的域模型有很多循环引用。事实上，可以从图中的任何点到达大多数对象。许多这些循环引用也在集合中。所以 a`Booking`将有一个集合，`Students`其中有一个集合，`Courses`其中有一个集合，`Bookings`依此类推。这不是真正的模型，只是一个例子。这个问题是由大约三十个不同类别的组合引起的。

为了使用这个模型，我像这样配置和使用 AutoFixture

```
var fixture = new Fixture().Customize(new MultipleCustomization());
fixture.Behaviors.Remove(new ThrowingRecursionBehavior());
fixture.Behaviors.Add(new OmitOnRecursionBehavior());

var booking = fixture.CreateAnonymous<Booking>(); 
```

这会导致 AutoFixture 运行大约 20 分钟，直到它最终以 OutOfMemoryException 失败。

这个模型是否要求 AutoFixture 创建一个永远不会结束的无限图？如果是这样，有什么方法可以配置它来限制图形的深度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-08-18T15:25:02.340

我意识到这是一个老问题，但对于任何发现这个问题的人，我认为 的行为`OmitOnRecursionBehaviour`可能已经改变（或已修复:-)。它默认递归深度为 1。

您可以指定递归深度。如果设置得太深，它会导致 StackOverflowException，而不是 OutOfMemoryException，至少对我来说是这样。

无论如何，这是一个简单的例子。

```
void Main()
{   
    var fixture = new Fixture();
    fixture
        .Behaviors
        .OfType<ThrowingRecursionBehavior>()
        .ToList()
        .ForEach(b => fixture.Behaviors.Remove(b));

    fixture.Behaviors.Add(new OmitOnRecursionBehavior(10));
    var node = fixture.Create<Node>();      

    Console.WriteLine($"It goes {HowDeepDoesItGo(node)} levels down");  
    // Outputs:
    //     It goes 10 levels down
    // With OmitOnRecursionBehavior(), without the recursionDepth argument, then outputs:
    //     It goes 1 levels down
}

int HowDeepDoesItGo(Node node, int level = 1)
{
    if (node.Link is null) return level;
    return HowDeepDoesItGo(node.Link, level + 1);
}

public class Node
{   
    public Node Link { get; init;}
} 
```

# html - 修改 MDT 向导以自动命名计算机

> ID：12727247
> 
> 赞同：1
> 
> 时间：2012-10-04T12:24:50.233
> 
> 标签：html, xml, vbscript, mdt

情况：

> 我正在使用 MDT Lite-Touch 对新系统进行成像。我正在尝试自定义向导以自动命名新系统，以便它们包含前缀“AG-”，这是从向导页面的下拉框中选择的部门代码（例如“COMM”），以及最后是正在成像的计算机的序列号，因此在这种情况下我的结果将是“AG-COMM-1234567”

进步：

> 1.  我首先创建了 HTML 页面，我将在下面包含该页面，并在页面中添加了一个脚本以将这些片段连接到一个名为 OSDComputername 的变量中，为了进行测试，我可以在 msgbox 中输出并正确显示。
>     *   问题是我不知道如何触发脚本，然后将其分配给整个 Light-Touch 过程的其余部分使用的 OSDComputername 变量。
> 2.  我将脚本更改为函数并将其添加到 DeployWiz_Initization.vbs 然后使用 WDS 中的 Initialization 字段来调用它。我将包括下面的功能。
>     *   问题是我会得到 OSDComputername 的“未定义变量”，我不确定它是否正确地从 HTML 中提取数据。
> 3.  我尝试在“OSDComputername =”之后将脚本添加到 customsettings.ini 文件中
>     *   这导致向导仅以文本形式输出我的代码作为计算机名称。
> 4.  我现在正在尝试将变量添加到 customsettings.ini 中的“Properties=”（例如DepartmentName），从 HTML 表单中提取它们的值并将该值设置为 DeployWiz_Initization.vbs 中我的函数中的变量，并在“OSDComputername=”之后调用它们" 在 customsettings.ini 中以 "OSDComputername="AG-" & %DepartmentName%" 的方式出现
>     *   我现在正在重建，看看情况如何

任何帮助，将不胜感激。

HTML 页面：

```
<HTML>
<H1>Configure the computer name.</H1>
<span style="width: 95%;">
    <p>Please answer the following questions.  Your answers will be used to formulate the computer's name and description.</p>
        <FORM NAME="TestForm">
            <p>Departmental Prefix: <!-- <label class=ErrMsg id=DepartmentalPrefix_Err>* Required (MISSING)</label> -->
                <SELECT NAME="DepartmentalPrefix_Edit" class=WideEdit>
                    <option value="AADC">AADC</option>
                    <option value="AEM">AEM</option>
                    <option value="AIP">AIP</option>
                    <option value="COM">COM</option>
                    <option value="DO">DO</option>
                    <option value="DSOC">DSOC</option>
                    <option value="EDU">EDU</option>
                    <option value="EPE">EPE</option>
                    <option value="ITN">ITN</option>
                    <option value="LA">LA</option>
                    <option value="OAP">OAP</option>
                    <option value="SML">SML</option>

                </SELECT>
            </p>

            <p><span class="Larger">Client's Net<u class=larger>I</u>D:</span>
            <INPUT NAME="ClientNetID" TYPE="TEXT" ID="ClientNetID" SIZE="15"></p>

            <p>Building: <!-- <label class=ErrMsg id=Building_Err>* Required (MISSING)</label> -->
                <SELECT NAME="Building_Edit" class=WideEdit>
                    <option value="Academic Surge Facility A">Academic Surge Facility A</option>
                    <option value="Academic Surge Facility B">Academic Surge Facility B</option>
                    <option value="Caldwell">Caldwell</option>
                    <option value="Kennedy">Kennedy</option>
                    <option value="Roberts">Roberts</option>
                    <option value="Warren">Warren</option>
                </SELECT>
            </p>

            <p>
                <span class="Larger">Room <u class=larger>N</u>umber:</span>
                <input type=text id="RoomNumber" name=RoomNumber size=15 />
            </p>
        </FORM>           
</span>
</HTML> 
```

功能：

```
Function SetComputerName

OSDComputerName = "AG-" & oEnvironment.Item("DepartmentalPrefix_Edit")
ComputerDescription = oEnvironment.Item("DepartmentalPrefix_Edit") & ", " & oEnvironment.Item("ClientNetID") & ", " & oEnvironment.Item("RoomNumber") & " " & oEnvironment.Item("Building_Edit")

End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:54:14.577

问题解决了！

HTML 页面：

```
<H1>Configure the computer name.</H1>
<p>Please answer the following questions.  Your answers will be used to formulate the computer's name and description.</p>

<FORM NAME="SetComputerNameForm">
    <p>
        <LABEL class="Larger"><u class="Larger">D</u>epartmental Prefix:</LABEL><br />
        <SELECT NAME="DepartmentalPrefix_Edit" ID="DepartmentalPrefix_Edit" language=vbscript onpropertychange=ValidateSetComputerName AccessKey=D>
            <option value="FOO">FOO</option>
            <option value="DOE">DOE</option>
            <option value="AFK">AFK</option>
            <option value="BBL">BBL</option>
            <option value="RTFM">RTFM</option>                  
        </SELECT>
    </p>

    <p>
        <LABEL class="Larger"><u class="Larger">C</u>lient's ID:</LABEL>
        <br />
        <INPUT NAME="ClientID" ID="ClientID" TYPE="text" ID="ClientID" SIZE="15" language=vbscript onpropertychange=ValidateSetComputerName AccessKey=C />
        <label class=ErrMsg for=ClientID>* Required (MISSING)</label>

    </p>

    <p>
        <LABEL class="Larger"><u class="Larger">B</u>uilding:</LABEL><br />
        <SELECT NAME="Building_Edit" ID="Building_Edit" language=vbscript onpropertychange=ValidateSetComputerName  AccessKey=B>
                <option value="ASA">ASA</option>
                <option value="ASB">ASB</option>
                <option value="ASC">ASC</option>
        </SELECT>
    </p>

    <p>         
        <LABEL class="Larger"><u class="Larger">R</u>oom Number:</span></LABEL>
        <br />
        <INPUT NAME="RoomNumber" ID="RoomNumber" TYPE="text" ID="RoomNumber" size="15" language=vbscript onpropertychange=ValidateSetComputerName AccessKey=R>
        <label class=ErrMsg for=RoomNumber>* Required (MISSING)</label>
    </p>

</FORM> 
```

功能：

```
Function ValidateSetComputerName
    ParseAllWarningLabels

    If Len(Document.SetComputerNameForm.ClientNetID.Value) < 1 OR Len(Document.SetComputerNameForm.RoomNumber.Value) < 1 THEN
        ButtonNext.disabled = true
    Else
        Dim Department
        Dim SerialNumber
        Dim CID
        Dim RoomNumber
        Dim BuildingName
        Dim Make
        Dim Model
        Department = Document.SetComputerNameForm.DepartmentalPrefix_Edit.Value
        SerialNumber = oEnvironment.Item("SerialNumber")
        CID = Document.SetComputerNameForm.ClientID.Value
        RoomNumber = Document.SetComputerNameForm.RoomNumber.Value
        BuildingName = Document.SetComputerNameForm.Building_Edit.Value
        Make = oEnvironment.Item("Make")
        Model = oEnvironment.Item("Model")

        oEnvironment.Item("OSDComputerName") = "AG-" & Department & "-" & Right(SerialNumber,7)
        oEnvironment.Item("ComputerDescription") = Department & ", " & CID & ", " & RoomNumber & " " & BuildingName & ", " & Make & " " & Model
        ButtonNext.disabled = false
    End If

End Function 
```

真正的变化在于函数中我需要如何从我的自定义 HTML 屏幕中检索值。您将在工作函数中看到我必须使用以下格式设置每个值：Document.FormName.FieldName.Value

I could then use the built-in Environmental Items to collect the Make, Model, and Serial Number. Once I had all of the pieces, all of the user selections and built-in values, it was simply a matter of concatenating the strings in the order I wanted and assigning the value to the Environmental Items "OSDComputerName" and "ComputerDescription".

I also made use of ButtonNext.disabled to make all of the fields required before the user was able to continue to the next screen.

# javascript - 使用 JavaScript 获取动态创建的文本框的值

> ID：12727249
> 
> 赞同：0
> 
> 时间：2012-10-04T12:24:57.520
> 
> 标签：javascript, html

我正在使用 JavaScript 向表中动态添加行，我在每一行中创建了一些文本框，我在其中一个文本框中添加了一个 onkeyup 事件：

```
 var myTotal = "1";
           var spanTotal = document.createElement("span");
           spanTotal.innerHTML = "<input style=\"width:50px\" type=\"text\" name=\"total\" value=" + myTotal + ">";

spanCount.onkeyup = function ()
{
alert(spanTotal.innerHTML);
    }; 
```

然后我将此跨度（呈现为 HTML 文本框）添加到我的表格行中。我想拥有我动态创建的文本框的值，但是每当我更改此文本框时，此文本框的初始值都会显示在警报框中（即 1）。此文本框的初始值为“1”，但当我更改它（例如在文本框中键入 0）时，警报框中再次显示“1”。我想要动态创建的文本框的价值，我应该给我的跨度一个 ID 吗？我应该如何定义 spanCount.onkeyup 函数？它应该在哪里定义，以便我可以得到这个文本框的确切值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:34:35.750

我创建了一个[jsFiddle](http://jsfiddle.net/D8X7N/)。您可以使用 childNodes 获取输入框的值。您使用的代码中还有其他问题，而`spanCount`不是`spanTotal`.

修改后的代码：

```
var myTotal = "1";
var spanTotal = document.createElement("span");
spanTotal.innerHTML = "<input style=\"width:50px\" type=\"text\" name=\"total\" value=" + myTotal + ">";
document.body.appendChild(spanTotal);

spanTotal.onkeyup = function() {
    alert(spanTotal.childNodes[0].value);
};​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T12:44:47.433

下面修改的代码也许可以解决您的问题：

```
var myTotal = 1;

/* object creation */
var span = document.createElement('span');

var input = document.createElement('input');
input.setAttribute('type', 'text');
input.setAttribute('name', 'total');
input.setAttribute('style', 'width:50px;');
input.setAttribute('value', myTotal);

// append each object to respective container
span.appendChild(input);
document.appendChild(span);

/* event handler */
input.onkeyup = function(){
  alert(this.value);
} 
```

# java - 为什么静态字段（不是final）在java的内部类中受到限制

> ID：12727252
> 
> 赞同：20
> 
> 时间：2012-10-04T12:25:04.233
> 
> 标签：java, inner-classes, static-members

> **可能重复：**
> [为什么 Java 禁止内部类中的静态字段？](https://stackoverflow.com/questions/1953530/why-does-java-prohibit-static-fields-in-inner-classes)

我正在阅读规范，并了解到内部类中不可能有静态成员，这不是最终的编译时间常量。

```
class HasStatic {
    static int j = 100;
}
class myInnerClassTest {
    class Inner extends HasStatic {
        static final int x = 3;  // OK: compile-time constant
        static int y = 4;  // Compile-time error: an inner class
    }
    static class NestedButNotInner{
        static int z = 5;    // OK: not an inner class
    }
    interface NeverInner {}   // Interfaces are never inner
} 
```

而我从[为什么我们可以有静态最终成员但不能在内部类中有静态方法？](https://stackoverflow.com/questions/2482327/why-can-we-have-static-final-members-but-cant-have-static-method-in-an-inner-cla)它可以从其所有者类继承静态成员。但为什么不应该呢？它伤害了 OOP 的什么校长？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-04T12:34:39.933

您的类`myInnerClassTest`未声明为静态的。那么拥有一个静态字段究竟意味着什么呢？

可不可能是

*   无论封闭实例如何，所有实例都相同？
*   这个内部类的所有实例都具有相同的封闭实例吗？

乍一看，大多数程序员可能会认为这是第一种情况，而（非静态）内部类的封装逻辑可能会导致第二种选择。任何一种情况（或两者都具有不同的修饰符）都需要一个新的定义，`static`这可能被认为是不必要的。在任何一种情况下，程序员都会对确切的含义感到困惑。

从[规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.1.3)：

> 内部类是没有显式或隐式声明为静态的嵌套类。
> 
> 内部类包括本地（§14.3）、匿名（§15.9.5）和非静态成员类（§8.5）。
> 
> 内部类不能声明静态初始化器（第 8.7 节）或成员接口，否则会发生编译时错误。
> 
> 内部类不能声明静态成员，除非它们是常量变量（第 4.12.4 节），或者发生编译时错误。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-04T12:38:19.010

**根据[JLS](http://docs.oracle.com/javase/specs/jls/se5.0/html/j3TOC.html)：-**

> **8.1.3 内部类和封闭实例**
> 
> 内部类是没有显式或隐式声明为静态的嵌套类。内部类不能声明静态初始化器（第 8.7 节）或成员接口。内部类不能声明静态成员，除非它们是编译时常量字段（第 15.28 节）。
> 
> 任何使用但未在内部类中声明的局部变量、形式方法参数或异常处理程序参数都必须声明为 final。任何在内部类中使用但未声明的局部变量必须在内部类的主体之前明确分配（第 16 节）。

**除了这两件事**`inner classes`，我发现它们很重要。你可以从那里得到更多的东西。关于,`anonymous inner classes`和`nested classes`..有很多解释。

**更新说明**：-

考虑一下。**静态块**在类初始化期间执行，如果没有封闭类的实例，您无法初始化非静态内部类，这就是原因。

内部类与`instance`封闭类的相关联。它们就像封闭类的其他实例属性一样。现在，`static`在上下文中嵌入字段是没有意义的`non-static`。但是，如果将它们声明为**编译时间常量**他们将被允许。

**注意**： -`static final Object = null` **不是编译时常量**..所以，你**不能**把它们放在你的内部类中

另一方面，如果您的内部类`static`be ，实际上是一个嵌套类，那么您可以将您的字段声明为静态，因为它们仍将与该类关联，因此您甚至可以在将类包含在实例化之前访问它们。

我希望这是有道理的..

**更新 2**： -

```
public class A {
   class B {
        static int x = 0;
   }
} 
```

在上面的代码中，`static variable x`B 类的每个实例都是通用的。此外， , 的每个实例`class A`都有自己的副本`class B`（因为**每次**创建an时**JVM**都必须加载 B 类）。**`instance of A`**

 **因此，除非它是编译时常量，否则`static variable x`不可能在 的每个实例之间共享`class A`。（为了使其**更直接**：-您可以这样做-`B.x`如果您将 B 视为外部类..但是 B 类本身不同A 类的每个实例。因此， **`B.x`A 类的每个实例都会有所不同**。因此，静态变量`x`实际上并未在**A 类的**不同实例之间共享。对静态变量没有意义。）

我希望现在，这是有道理的..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T12:37:39.627

所有限制都记录在 [JLS #8.1.3 中。内部类和封闭实例](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.1.3)

**因为静态声明与 Class 相关联，如果您在内部类中声明它，它将与实例而不是类相关联。**

![内部阶级](../Images/e4d3a157c844e6cc4e6e5f6994fd7185.png)

非静态内部类是 Object 的成员。并且对于成员初始化仅在创建对象实例时发生。如果允许静态变量，那么初始化将在创建实例之前发生。

这就是为什么有单独的`non-static`和`static`内部的类。

您总是需要外部类实例来访问内部类，`Outer.Inner`唯一的例外是`static inner class`没有适用于非静态内部类的约束。

```
static class Inner {
    static final int x = 3; // OK: compile-time constant
    static int y = 4;// OK
    static class NestedButNotInner {// OK

    }

    interface NeverInner {// OK
    };
} 
```

然而，常量是允许的，它记录在 JLS

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T12:51:19.807

因为内部类与顶级类密切相关，所以您必须拥有外部类的实例才能创建内部通过

```
Outer o = new Outer();
Inner i = o.new Inner(); 
```

因此，这与一个实例而不是一个类相关联。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-04T12:55:19.237

如您所知，内部类可以从其所有者类继承静态成员。

```
class HasStatic {
    static int j = 100;
}
class myInnerClassTest {
    class Inner extends HasStatic {
    }      
    public static void main(String[] args){
        System.out.println(Inner.j);
    }
} 
```

它打印“100”。**

# android - Android如何通过程序卸载SD卡..？

> ID：12727256
> 
> 赞同：2
> 
> 时间：2012-10-04T12:25:10.110
> 
> 标签：android

> **可能重复：**
> [如何在 Android 上以编程方式安全移除 SD 卡](https://stackoverflow.com/questions/4632039/how-to-safely-remove-sd-card-programmatically-on-android)

大家好，我是 android 新手，在我的应用程序中，我有一个要求。我的应用程序需要不时卸载和安装 SD 卡，所以请帮助我有没有办法以编程方式卸载 SD 卡并使用程序本身重新安装。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:46:24.150

不，这是做不到的。如果是这样，人们可能会编写恶意代码从手机上卸下 SD 卡。许多用户在那里存储所有内容，如歌曲、视频、照片。因此，不允许应用程序卸载 SD 卡，而是使用它们来存储数据是一个很好的安全决定。

# oop - 接口 - 仍在尝试理解它们

> ID：12727257
> 
> 赞同：0
> 
> 时间：2012-10-04T12:25:12.017
> 
> 标签：oop, language-agnostic, interface

我认为界面有 3 个主要好处是正确的吗？

1.  必须创建的蓝图（我也听到其他人将其称为合同）。
2.  多态性。
3.  与继承（IMO 有很多相似之处）不同，您可以有许多接口

还有其他加分或减分吗？有人不同意我的3分吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:32:53.580

“蓝图”隐喻对类比对接口更有效，但“契约”隐喻非常准确。接口指定了其他类在公共方法方面的期望，而没有说明底层实现。在类之间的继承往往由*is-a*关系组成的情况下，接口可以被认为是*works-as-a*关系，尽管我认为后一个术语并不常用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T12:36:29.380

我要补充一点，接口的使用在某种程度上有助于创建自记录代码。例如，您的类实现的接口描述了该类支持的功能。因此，您最终会得到如下代码：

```
if (someClass is ISearchable)
{
   someClass.Search();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T12:36:56.580

具有相同接口的两个对象不需要以其他方式相关。

所以你可以有 - 花 - 卡车 - 恐龙

都具有相同的界面 - IColor

即使它们是完全不同的对象。

# mysql - MySQL DB：性能和分区

> ID：12727262
> 
> 赞同：0
> 
> 时间：2012-10-04T12:25:33.343
> 
> 标签：mysql, performance, database-partitioning

我已将访问数据库迁移到 MySQL 数据库。特别是，在这个数据库中，我有一个包含近 500 万行的表。此表上的大部分操作是查询（用于选择数据子集的过滤器）。

我对性能感兴趣。MySQL DB的分区可以提高性能吗？在这种情况下，哪种类型的分区更好用？

**编辑**

我认为，最常用的“数据过滤器”将是日期。但通常会使用更多的标准。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:30:11.040

你的问题太笼统了。

是的，MySQL 分区可以提高性能——这就是它的目的。当您对更频繁访问的数据子集有明确的规则时，MySQL 分区效果很好。

例如，如果您有一个时间戳列，并且您通常查询过去一年的数据，您可以设计一个分区方案来提高性能。

如果您希望获得更好的答案，请提供有关您的餐桌的更多详细信息。

# asp.net-mvc-4 - 在 mvc 发布后启用提交按钮

> ID：12727263
> 
> 赞同：0
> 
> 时间：2012-10-04T12:25:33.470
> 
> 标签：asp.net-mvc-4

我正在使用.Net MVC 4。

我在一个视图上有两个按钮，它们围绕着两个单独的 Html.BeginForm 语句。第一个是可见的，第二个不是（这取决于发布后的第一个按钮逻辑是否成功）。

在按下的第一个按钮进入控制器方法后，如何使第二个按钮可见？该方法基本上说，我很好，现在我可以使第二个按钮可见。我正在传回一个视图。是否有一个 viewbag 变量（或类似的东西）我可以设置，一旦我回到视图，我可以让第二个按钮可见？

第二个按钮只是一个带有 Id 值的输入按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-12T17:42:59.650

第一种方法：如上所述，但我担心，如果你有一个局部视图并且基于你想要显示或隐藏的东西，它不会起作用。

第二种方法：初始页面加载，按钮可见。

```
<input id='btnAdd' type='button' value='Add' style='display:block;'/> 
```

基于页面/部分视图上的一些操作

```
<script>
  function disableAdd() {
  $('#btnAdd').hide();
}
</script> 
```

*请注意，如果您在样式表中使用可见性，jquery 将无法隐藏/显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T12:33:37.077

> 是否有一个 viewbag 变量（或类似的东西）我可以设置，一旦我回到视图，我可以让第二个按钮可见？

是的，但由于我不是 ViewBag 的忠实粉丝，我建议您向模型添加一个布尔属性，然后在 POST 控制器操作中设置此属性。

```
[HttpPost]
public ActionResult SomeAction(MyViewModel model)
{
    model.IsSecondButtonVisible = true;
    return View(model);
} 
```

然后在视图内：

```
@if (Model.IsSecondButtonVisible)
{
    <input type="button" value="the second button" />
} 
```

# javascript - Javascript 中 (?<=exp) 的替代品？

> ID：12727266
> 
> 赞同：3
> 
> 时间：2012-10-04T12:25:46.040
> 
> 标签：javascript, regex

我读了一些关于正则表达式的教程，我看到了一句话：

> (?<=exp)：匹配前缀 exp 之后的任何位置

例如，我有一些字符串：

> 分享
> 
> 关心

如果我想查找所有字符串包括 "are"，但 "are" 必须跟在 "Sh": 之后`/(?<=Sh)are/i`。现在只匹配“Share”，匹配索引为2（匹配“are”，而不是“Share”中的“Share”）。

但是 Javascript 没有这个正则表达式。我怎么能在Javascript中这样做？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T12:27:41.847

你不能这样做。Javascript 的正则表达式实现中没有后向断言。

**备择方案**

*   在某些情况下，您可以改为使用分组来捕获您实际想要匹配的内容：`/Sh(are)/i`

*   如果你真的需要lookbehinds，你可以使用第三方正则表达式库。

**有关的**

*   [JavaScript：是否有完全支持环视的正则表达式库？](https://stackoverflow.com/questions/11702735/javascript-is-there-a-regular-expression-library-that-fully-supports-lookaround)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T12:39:52.210

唯一的方法（当然，这仅在您的正则表达式中没有前瞻断言时才有效）是反转字符串并使用前瞻而不是后瞻：

```
/era(?=hS)/i 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T12:27:57.477

您可以使用[非捕获组](http://javascript.about.com/library/blre16.htm)

```
/(?:sh)(are)/ 
```

这告诉正则表达式在`are`不捕获`sh`组的情况下进行查找。但是在这种情况下，由于您有一个简单的模式要匹配，所以这不是必需的，您可以在其他解决方案中找到答案并执行类似的操作

```
/sh(are)/ 
```

然后只匹配第一组

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T12:28:27.813

如果我很好理解，我会使用这个正则表达式

```
/(Sh|\b)(are)/gi 
```

where`are`只能是单个单词或以 . 开头的子字符串`Sh`。

# xaml - 调整网格项目大小 WinRt

> ID：12727267
> 
> 赞同：0
> 
> 时间：2012-10-04T12:25:47.500
> 
> 标签：xaml, gridview, windows-runtime

您可以动态调整网格项目的大小吗？

我有一个gridview，里面有一个文本框。他们的文本框有许多绑定值，可能会导致它的大小增加，但在应用程序运行后它不会这样做。

```
 <Slider x:Name="FontSizeSlider" Minimum="10" Maximum="120" />

    <GridView ItemsSource="{Binding MyList}" >
        <GridView.ItemTemplate>
            <DataTemplate>
                <TextBlock 
                    Height="{Binding ElementName=FontSizeSlider, Path=Value}"
                    Width="{Binding ElementName=FontSizeSlider, Path=Value}"
                    Text="{Binding}" 
                    FontSize="{Binding ElementName=FontSizeSlider, Path=Value}"/>
            </DataTemplate>
        </GridView.ItemTemplate>
    </GridView> 
```

我意识到这些项目也必须四处移动，以便可以放入列中。我不认为gridview 支持这个是吗？

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:42:39.010

通过添加修复它：

```
 <GridView.ItemsPanel>
            <ItemsPanelTemplate>
                <VariableSizedWrapGrid />
            </ItemsPanelTemplate>
        </GridView.ItemsPanel> 
```

# wordpress - 在 wordpress 子主题中添加两个侧边栏

> ID：12727269
> 
> 赞同：1
> 
> 时间：2012-10-04T12:26:02.897
> 
> 标签：wordpress, wordpress-theming

在`Wordpress`我想制作两个侧边栏。一个将在内容的左侧，另一个将在二十一主题的右侧（默认侧边栏）。为此，我对我的 211 子主题进行了一些定制。在functions.php中我做了这个改变

```
 register_sidebar( array(
    'name' => __( 'Left Hand Sidebar', 'buygames' ),
    'id' => 'sidebar-left',
    'before_widget' => '<aside id="%1$s" class="widget %2$s">',
    'after_widget' => "</aside>",
    'before_title' => '<h3 class="widget-title">',
    'after_title' => '</h3>',
  ) ); 
```

然后在 sidebar-page.php 我添加了这段代码

```
 <div id="left-sidebar">
  <?php dynamic_sidebar( 'sidebar-left' ); ?>
  </div><!--#left-sidebar--> 
```

就在代码之后`get_header();`和`<div id="primary">....</div>`. 这工作正常，但我认为这是错误的方法。通过这样做，它将被硬编码。那么有人可以建议我在不进行任何硬编码的情况下做到这一点的好方法吗？任何帮助和建议都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:12:39.347

您可以将两个侧边栏添加到 childtheme 的 sidebar.php 并按 css 排列它们。

```
// your sidebar
<div id="left-sidebar">
  <?php dynamic_sidebar( 'sidebar-left' ); ?>
</div><!--#left-sidebar-->
// original sidebar
<div id="sidebar">
  <?php dynamic_sidebar( 'sidebar' ); ?>
</div><!--#sidebar--> 
```

请务必添加两个侧边栏，因为您的子主题的 sidebar.php 会覆盖原来的侧边栏。

# c# - 升级到 VS 2012 后 PInvoke 停止工作

> ID：12727279
> 
> 赞同：4
> 
> 时间：2012-10-04T12:26:31.127
> 
> 标签：c#, interop, pinvoke, marshalling

我有一个通过 PInvoke 使用本机 dll 的 C# 项目。迄今为止，我一直在 XP 和 Windows 8 消费者预览版上使用 VS2010 开发该项目。

我已经更新到 Windows 8 版本和 VS2012。现在，当我点击我的第一个 PInvoke 时，同一个项目就会崩溃。C 声明是：

```
const char * func(void); 
```

C# P/Invoke 声明：

```
 [DllImport("libspotify.dll",CharSet = CharSet.Ansi)]
    internal static extern string sp_build_id(); 
```

调用约定是 stdcall。现在，这种安排一直运行良好，我的理解是 const char* 会自动编组为字符串。但是，在 Windows 8 上从 VS2012 运行时，会崩溃。如果我更改 C# 声明以返回 IntPtr，它就可以工作。

以前的版本可以正常工作是运气，还是代码没问题？有什么理由不再起作用吗？如果我需要将我的所有字符串声明更改为 IntPtrs，并手动执行编组，那么我面前就有一个漫长而无聊的任务！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T13:15:28.493

以前的版本很幸运。您的代码一直被破坏。使用字符串返回值 p/invoke marshaller

*   将上下文复制到一个新字符串，
*   然后调用`CoTaskMemFree`本机代码返回的指针。

无论出于何种原因，您在以前版本的 Windows 上都摆脱了这种情况。但这会导致您最新版本的 Windows 出现故障。

该字符串极有可能在 DLL 中静态分配。所以你不应该试图释放它。

看起来你还有一些工作要做。

# iphone - 调用者此时不拥有的对象的引用计数的不正确递减的 appDelegate 方法

> ID：12727284
> 
> 赞同：0
> 
> 时间：2012-10-04T12:26:48.953
> 
> 标签：iphone, ios, memory-leaks, appdelegate

我遇到了 SO 帖子，`incorrect decrement of RC to +0`但没有一个是**appDelegate 方法**（根据我的知识，*委托不能被保留*）

以下是我有内存泄漏的代码

```
 iPlayerAppDelegate *appDelegate = (iPlayerAppDelegate *)[[UIApplication sharedApplication] delegate];
    int currentTabIndex = appDelegate.tabcontroller.tabBarController.selectedIndex ;

    UIButton *btn = (UIButton *)sender;

    pageItem* selectedItem = nil;
    selectedItem = [appDelegate.pageData.pageItems objectAtIndex:btn.tag];

    appDelegate.bStatusValue = FALSE;

    if(pageInfo.removeCaptureFile)
    {
        [appDelegate.commonUtils removeFileFromPath:@"snap.jpeg"];
        [appDelegate.commonUtils removeFileFromPath:@"prevSnap.jpeg"];
    }

    if (appDelegate.launchTimer &&[appDelegate.launchTimer isValid]) 
    {
        [appDelegate.launchTimer invalidate];
        appDelegate.launchTimer = nil;          
       // appDelegate.timerFlag = NO;

    }

    NSArray *viewarray = [self.view subviews];

    for(int index=0;index< viewarray.count;index++)
    {

        UIView *view = [viewarray objectAtIndex:index];
        if([view  isMemberOfClass:[UITextField class]] || [view  isMemberOfClass:[UITextView class]])   
        {
            [view resignFirstResponder];
            [view removeFromSuperview];
        }

        if([view  isMemberOfClass:[scrollwinView class]])  
        {
            scrollwinView* scrollView = (scrollwinView*) view;
            [scrollView stopTimer];
        }

    }

    if(appDelegate.tabsupport)
    { //to remove the cached view from stack after pressing back
        CSNavigationController *navcon= (CSNavigationController*)appDelegate.tabcontroller.tabBarController.selectedViewController;
        [navcon removeViewData:pageInfo.screenId];
    }

    int currentscrid=pageInfo.screenId; 
    clrScreenId = pageInfo.clrScreenId;

    if (appDelegate.connMgr) 
    {               
        [appDelegate.connMgr closeHttpStream];
        //[connMgr release];        
        appDelegate.connMgr = nil;
        appDelegate.connectionstatus = FALSE;

        if(appDelegate.initAnimation.startId == 5)      
        {
            appDelegate.transition = NO ;
            [appDelegate readPageData:currentscrid isBack:NO ];
            appDelegate.transition = YES;
            return ;
        }

        [appDelegate stopAnimation]; 
```

这是内存泄漏的快照方法返回一个带有+0保留计数的Objective-C对象，![方法返回一个具有 +0 保留计数的 Objective-C 对象](../Images/2093de9eda0fec7510db36b230e6aacc.png)并且调用者此时不拥有的对象的引用计数不正确递减![调用者此时不拥有的对象的引用计数不正确递减](../Images/d6b0b13a0c17427d589e723550d95ba9.png)

为什么我得到这个泄漏？我要重新分配 appDelegate 对象吗？

我没有在那个访问器（appDelegate）的返回值上调用release，也没有将它设置为nil，我应该如何修复这个泄漏？

提前致谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-04T12:35:10.237

我认为您应该阅读有关正确使用应用程序委托的帖子：

[iPhone 正确使用 Application Delegate](https://stackoverflow.com/questions/338734/iphone-proper-usage-of-application-delegate)

例如，在您的代码中：

```
selectedItem = [appDelegate.pageData.pageItems objectAtIndex:btn.tag]; 
```

看起来很乱。一个可能更好的解决方案可能是使用单例设计模式。

至于您的内存泄漏，当您的应用程序委托动画执行动画停止回调时，可能会检查您是否没有保留任何内容。

# asp.net - MVC SelectList 在文本字段中组合多列

> ID：12727285
> 
> 赞同：59
> 
> 时间：2012-10-04T12:26:50.787
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor

我将如何生成一个选择列表，其中文本字段由两个或多个文本列组成，例如：我的数据库中有一个描述和速率字段，我想将它们组合起来显示：

```
Large--£200
Medium--£150
Small--£100 
```

控制器代码为：

```
 var stands = db.Stands.Where(s => s.ExhibitorID == null).ToList();
 ViewBag.StandID = new SelectList(stands,"StandID", "Description" + "-- £" + "Rate"); 
```

...我的观点是（目前）：

```
 <div class="editor-field"> 
        @Html.DropDownList("StandID", "--Select--") 
    </div> 
```

...但是“描述”+“-- £”+“费率”）；不会运行：

> DataBinding：“System.Data.Entity.DynamicProxies.Stand_63F8C9F623B3C0E57D3008A57081AFCD9C39E1A6B79B0380B60840F1EFAE9DB4”不包含名为“Description--£Rate”的属性。

谢谢你的帮助，

标记

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-10-04T12:31:15.207

您可以使用简单的 LINQ 投影创建一个新的匿名类，然后使用`SelectList(IEnumerable, string, string)` [构造函数重载](http://msdn.microsoft.com/en-us/library/dd505286(v=vs.118).aspx)来指定要用于`<option>`元素的值和文本字段，即：

```
var stands = 
  db.Stands
    .Where(s => s.ExhibitorID == null)
    .Select(s => new 
     { 
       StandID = s.StandID,
       Description = string.Format("{0}-- £{1}", s.Description, s.Rate) 
     })
    .ToList();

ViewBag.StandID = new SelectList(stands, "StandID", "Description") 
```

*编辑*

在 C#6 及更高版本中，[字符串插值](https://msdn.microsoft.com/en-us/library/dn961160.aspx)比`string.Format`

```
 ...
   Description = $"{s.Description}-- £{s.Rate}" 
```

如果您投影到一个强`ViewModel`类名（而不是匿名类），您无疑会希望用[`nameof`](https://msdn.microsoft.com/en-us/library/dn986596.aspx)操作符的安全性替换魔术字符串：

```
ViewBag.StandID = new SelectList(stands, nameof(Stand.StandID), nameof(Stand.Description)); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-04T12:57:03.887

```
var stands = db.Stands.Where(s => s.ExhibitorID == null).ToList();
IEnumerable<SelectListItem> selectList = from s in stands
                                         select new SelectListItem
                                                    {
                                                      Value = s.StandID,
                                                      Text = s.Description + "-- £" + s.Rate.ToString()
                                                    };
ViewBag.StandID = new SelectList(selectList, "Value", "Text"); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-03-04T20:14:44.557

您可以创建部分模型类

```
public partial class Stand
{
    public string DisplayName
    {
        get
        {
            return this.Description + "-- £" + this.Rate.ToString();
        }
    }

} 
```

然后在您的视图中

```
var stands = db.Stands.Where(s => s.ExhibitorID == null).ToList();
ViewBag.StandID = new SelectList(stands,"StandID", "DisplayName"); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-04T13:09:44.223

您使用的构造函数的格式是 SelectList(IEnumerable items, string dataValueField, string dataTextField)。

因此，当您按照您的方式使用它时，您实际上是在告诉它绑定到名为“Description-- £Rate”的文本字段，如果这不是从数据库中调用的字段，它将不知道您是什么正在指示。

只要您在 dataValueField 中的值与您放置该值的属性的名称匹配，并且 dataTextField 与您放置文本的位置的属性名称匹配，上述两种方法中的任何一种都可以使用，可能是两者的混合上面的解决方案。（只是因为我更喜欢 lambda 表达式而不是 linq。）并且使用选择列表项可以防止它在转换后必须对集合执行 ToList。您实际上是在创建自然绑定到选择列表的对象。

您可能还需要检查描述或费率，以确保它们不是空的，然后再将它们放入列表

```
var stands = db.Stands.Where(s => s.ExhibitorID == null)
                  .Select(s => new SelectListItem
                {
                    Value = s.StandID.ToString(),
                    Text = s.Description + "-- £" + s.Rate.ToString()
                });

ViewBag.StandID = new SelectList(stands, "Value", "Text"); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-12-11T03:29:11.393

我通过修改我的视图模型来做到这一点，这是我的代码：

视图模型

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using MvcEsosNew.Models;
using System.Web.Mvc;

namespace MvcEsosNew.ViewModels
{
    public class EntitlementViewModel
    {
        public int EntitlementCount { get; set; }
        public Entitlement Entitlement { get; set; }
        public SelectList Member { get; set; }
        public SelectList Job_Grade { get; set; }
        public SelectList Department { get; set; }
        public SelectList Esos_Batch { get; set; }
    }

    public class department_FullName
    {
        public int deptID { get; set; }
        public string deptCode { get; set; }
        public string deptName { get; set; }
        public string fullName { get { return deptCode + " - " + deptName; } }
    }
} 
```

控制器

```
public void getAllDepartment(EntitlementViewModel entitlementVM)
        {
            var department = from Department in db.Departments.Where(D => D.Status == "ACTIVE").ToList()
                             select new department_FullName
                             {
                                 deptID   = Department.id,
                                 deptCode = Department.department_code,
                                 deptName = Department.department_name
                             };
            entitlementVM.Department = new SelectList(department, "deptID", "fullName");
        } 
```

风景

```
 <div class="form-group row">
                <div class="col-sm-2">
                    @Html.LabelFor(model => model.Entitlement.department_id)
                </div>
                <div class="col-sm-10">
                     @Html.DropDownListFor(model => model.Entitlement.department_id, Model.Department, new { @class="form-control" })
                     @Html.ValidationMessageFor(model => model.Entitlement.department_id)
                </div>
            </div> 
```

结果：

[![结果](../Images/2f99bd32f7fa7ae6ce66f309211d6786.png)](https://i.stack.imgur.com/9KItD.png)

# syntax-highlighting - 科莫多上的specman

> ID：12727287
> 
> 赞同：0
> 
> 时间：2012-10-04T12:26:56.810
> 
> 标签：syntax-highlighting, indentation, komodo, komodoedit, specman

我有 2 个我似乎无法解决的问题：

1) 出于某种原因，Komodo 不会突出显示我的 .e 文件中的任何方法，即使默认语言是 specman-E，并且文件设置为正确的语言。我怎样才能让他突出它？

2）在我按下回车键后，如果在函数或“if”语句中，komodo 不会正确缩进。例如： **当我点击进入时，科莫多做了什么：**

```
if(injection_flag){
gen packet2inject;
}; 
```

**当我点击进入时应该是什么：**

```
if(injection_flag){
    gen packet2inject;
}; 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T01:25:29.723

```
<'
    // hello world  
    extend sys
    {
        run() is also
        {
            out ("Hello World");
        };
    };
'> 
```

[Smart Indent](http://docs.activestate.com/komodo/7.1/prefs.html#Indentation_Features)不支持 specman-E，因此使用制表符或空格手动缩进初始语句，然后换行符将以相同的缩进级别开始。语法高亮有效，但非常基础。

# php - 格式化 Datetime2 对象

> ID：12727292
> 
> 赞同：-1
> 
> 时间：2012-10-04T12:27:23.203
> 
> 标签：php, azure

我有一个 datetime2，它看起来像这样：

```
2012-10-06 22:00:00.0000000 
```

（使用 php for Microsofts Azure），我不知道如何将其格式化为：

```
October 06, 2012 at 22:00 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:33:54.713

使用`strtotime()`：

```
echo date('F d, Y \a\t H:i', strtotime('2012-10-06 22:00:00.0000000'));
// October 06, 2012 at 22:00 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:30:22.050

请参考此[Date()](http://in.php.net/manual/en/function.date.php)和[strtotime()](http://in.php.net/manual/en/function.strtotime.php)函数来实现这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T12:33:11.150

```
$currentdate="2012-10-06 22:00:00.0000000";
$timestamp=strtotime($currentdate);
$newdate=date("F d Y g:i",$timestamp);
echo $newdate; 
```

# java - Java 比较器使用非最终变量

> ID：12727299
> 
> 赞同：2
> 
> 时间：2012-10-04T12:27:41.280
> 
> 标签：java, list, sorting, collections, final

我想使用包含每个项目值的地图对列表进行排序。

```
Map<Integer, Float> map = new HashMap<>();
List<Integer> list = new ArrayList<>();

map.put(0, 0.0f);
map.put(1, 5.0f);
map.put(2, 2.0f);

list = new ArrayList<>(map.keySet());

Collections.sort(list, new Comparator<Integer>() {
    public int compare(Integer left, Integer right) {
        Float leftCost = map.get(left);
        Float rightCost = map.get(right);
        return leftCost.compareTo(rightCost);
    }
}) 
```

我希望订单是`0,2,1`因为 的值`1`高于`2`。但是java不让我这样做。我收到以下错误：`Cannot refer to a non-final variable map inside an inner class defined in a different method`

我怎么能这样做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T12:31:10.917

让它成为最终的：

```
final Map<Integer, Float> map = new HashMap<Integer, Float>();
List<Integer> list = new ArrayList<Integer>(); // this assignment is unncessary [1]

map.put(0, 0.0f);
map.put(1, 5.0f);
map.put(2, 2.0f);

list = new ArrayList<Integer>(map.keySet()); // 1\. assignment is replaced here

Collections.sort(list, new Comparator<Integer>() {
    public int compare(Integer left, Integer right) {
        Float leftCost = map.get(left);
        Float rightCost = map.get(right);
        return leftCost.compareTo(rightCost);
    }
}) 
```

由于您的地图是可变的，您仍然可以对其进行修改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T12:31:18.740

匿名内部类（您的比较器是一个）只能引用已声明的局部变量，`final`以便访问您的地图 - 您必须将其声明为`final`.

请注意，将其**声明为`final`不会阻止您修改映射对象**，只是不能将新对象分配给变量`map`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T12:30:55.277

你`Comparator`是一个匿名的内部类。在其中，您尝试访问`map`在包含匿名内部类的方法中声明的局部变量 。

Java 中有一个限制，只有当局部变量是`final`. 所以，让你的变量`map` `final`：

```
final Map<Integer, Float> map = new HashMap<>(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T12:34:05.473

在您的情况下，解决方案很简单：将您的地图标记为`final`：

`final Map<Integer, Float> map = new HashMap<>();`

您可能对 word 感到困惑`final`。它不会限制您对地图的操作。它只是不允许您更改对您的情况可以的地图的引用。

此要求的原因是您的比较器是匿名内部类。所有外部方法变量都被复制到匿名类中，因此如果在外部方法中更改它们会产生冲突。这就是编译器要求将从匿名类访问的变量标记为 final 的原因。

其他解决方案是将您的比较器提取到单独的类并将映射作为参数构造函数发送给它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T12:51:04.007

你绝对可以做到这一点。只需创建一个命名类来代替匿名类扩展`Comparator`并将`Map`变量作为参数传递。像这样：

```
 @Test
  public void test() {
    Map<Integer, Float> map = new HashMap<Integer, Float>();
    map.put(0, 0.0f);
    map.put(1, 5.0f);
    map.put(2, 2.0f);

    List<Integer> list = new ArrayList<Integer>(map.keySet());
    Collections.sort(list, new FloatComparator(map));

    System.out.println(list);
  }

  class FloatComparator implements Comparator<Integer> {
    private Map<Integer, Float> mapRef;
    public FloatComparator(Map<Integer, Float> newMap) {
      mapRef = newMap;
    }

    @Override
    public int compare(Integer left, Integer right) {
      Float leftCost = mapRef.get(left);
      Float rightCost = mapRef.get(right);
      return leftCost.compareTo(rightCost);
    }
  } 
```

这打印出来：

```
[0, 2, 1] 
```

并且还使您的代码更易于阅读，IMO。

# python - Python：纪元时间问题

> ID：12727301
> 
> 赞同：1
> 
> 时间：2012-10-04T12:27:46.807
> 
> 标签：python, datetime, epoch

我有一个问题

我有两个纪元时间

```
endTime
1349351477198

startTime
1349351468952 
```

我在[http://www.epochconverter.com/上检查时得到了正确的时间格式](http://www.epochconverter.com/)

像

```
GMT: Thu, 04 Oct 2012 11:51:08 GMT

Thu, 04 Oct 2012 11:51:17 GMT 
```

对于同一个时代，当我尝试使用 python 及时转换时（我不关心日期）

```
>>> start_time = time.strftime("%H:%M:%S", time.gmtime(1349351468952))
>>> print start_time 
20:29:12
>>> start_time = time.strftime("%H:%M:%S", time.gmtime(1349351477198))
>>> print start_time 
22:46:38 
```

如上所述，我得到了意想不到的结果，请帮帮我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T12:44:13.253

我猜你的问题是你的数字不是以秒为单位，而是以毫秒为单位。试试这个：

```
time.strftime("%H:%M:%S", time.gmtime(1349351477.198)) 
```

# xml - 关于使用 xml 的查询

> ID：12727303
> 
> 赞同：2
> 
> 时间：2012-10-04T12:27:59.823
> 
> 标签：xml

人.xml

```
<person>
  <PID>
   <Name>John</Name>
   <fruit>Orange</fruit>
  </PID>
  <PID>
   <Name>Wendy</Name>
   <fruit>Apple</fruit>
  </PID>
  <PID>
   <Name>Alex</Name>
   <fruit>Kiwi</fruit>
  </PID>
 </person> 
```

存储.xml

```
<store>
  <AU>
   <name>Star</name>
   <fruit>Orange</fruit>
  </AU>
  <AU>
   <name>Moon</name>
   <fruit>Apple</fruit>
  </AU>
 </store> 
```

我有上面的两个 xml 文件，我需要编写一个 xquery 代码来找出一个人吃的哪种水果在商店里没有。如何编写代码来检查商店中没有哪些水果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:43:25.487

**这个查询**（恰好是一个纯 XPath 2.0 表达式）：

```
doc('file:///c:/temp/delete/person.xml')
   /*/*/fruit
        [not(.
            =
             doc('file:///c:/temp/delete/store.xml')
                /*/*/fruit)
        ] 
```

**产生想要的正确结果：**

```
<fruit>Kiwi</fruit> 
```

**说明**：

使用一般比较运算符`=`（与值比较运算符相反`eq`）

# c - 什么是“传递'strstr'的参数2使指针从整数而不进行强制转换”在C中是什么意思

> ID：12727305
> 
> 赞同：1
> 
> 时间：2012-10-04T12:28:05.740
> 
> 标签：c, arguments

我正在尝试列出一份奶酪列表，您可以通过搜索找到某个奶酪。完成后，我还想添加有关每个人的信息。但是每次我运行我的代码时，我都会得到标题中显示的错误。这是我的代码：

```
#include<stdio.h>
#include<string.h>

int main()
   {    
    char cheeses[][20] = {
        "Cheddar",
        "White Cheddar",
        "Colby Jack",
        "Gouda",
        "Blue Cheese",
        "Gorgonzola",
        "Asiago", 
        "Limburger",
        "Feta",
        "Brie",
     };

         void find_cheese(char search_for)
     {
         int i;
         for (i = 0; i < 5; i++) {
             if (strstr(cheeses[i], search_for))
                 printf("Cheese %i: '%s'\n", i, cheeses[i]);
          }
    }

int main()
    {
        char search_for[20];
        printf("Search for: ");
        fgets(search_for, 20, stdin);
        find_cheese(search_for);
        return 0;
     }
} 
```

为什么会这样？我在我的书里查过，但似乎找不到答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:30:08.977

[strstr](http://linux.die.net/man/3/strstr)的第二个参数应该是`const char*`. 你正在传递一个单一的`char`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T12:30:11.470

`strstr`期望一个指针`char`作为第二个参数：

```
const char * strstr ( const char * str1, const char * str2 ); 
```

当你通过一个`char`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T12:32:47.820

```
void find_cheese(char search_for) 
```

应该

```
void find_cheese(char *search_for) 
```

因为它正在寻找一个字符串 ( `char *`)，而不是单个字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T12:32:51.543

`strstr()`将字符串 (char *) 作为第二个参数。用法见[这里](http://www.cplusplus.com/reference/clibrary/cstring/strstr/)。

您的代码中的问题是您错误地接受了传递的数组：

```
 void find_cheese(char search_for) //This line is wrong
    { 
```

你想做的是：

```
 void find_cheese(char search_for[]) 
```

**编辑：**
这就是正在发生的事情。当您在主函数中访问数组时：

```
find_cheese(search_for); 
```

你实际上在这里做的是传递一个地址。（当您访问数组时`search_for`，您会得到一个地址）。因此，当您的原型说它正在使用时`char`，编译器会看到地址（4 个字节，看起来像一个 int）并将其截断以适应一个字节的字符。

防止这种情况的方法是传递整个“字符串”（C 中的字符串是字符数组）。因此，您可以通过`search_for`作为数组或指针（字符数组的地址）传递来做到这一点。

```
void find_cheese(char search_for[]) 
```

和

```
void find_cheese(char *search_for) 
```

既可以工作，又可以满足您的需求（传递给`strstr()`）

# android - 在Android中单击外部时如何隐藏虚拟键盘

> ID：12727306
> 
> 赞同：0
> 
> 时间：2012-10-04T12:28:10.847
> 
> 标签：android, android-virtual-keyboard

我正在关注[本](https://stackoverflow.com/questions/4165414/how-to-hide-soft-keyboard-on-android-after-clicking-outside-edittext)教程。

该代码适用于一个`editText`. 但现在我有很多（近 10 个）`EditText`字段。如果我对每个字段重复此代码，代码将很长。任何人都可以让我知道在任何字段之外单击时如何禁用虚拟键盘吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T05:32:56.573

```
@Override
public boolean dispatchTouchEvent(MotionEvent event) {
View view = getCurrentFocus();
boolean ret = super.dispatchTouchEvent(event);

if (view instanceof EditText) {
    View w = getCurrentFocus();
    int scrcoords[] = new int[2];
    w.getLocationOnScreen(scrcoords);
    float x = event.getRawX() + w.getLeft() - scrcoords[0];
    float y = event.getRawY() + w.getTop() - scrcoords[1];

    if (event.getAction() == MotionEvent.ACTION_UP 
&& (x < w.getLeft() || x >= w.getRight() 
|| y < w.getTop() || y > w.getBottom()) ) { 
        InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(getWindow().getCurrentFocus().getWindowToken(), 0);
    }
}
return ret;
} 
```

可能这会帮助你..检查它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:45:21.353

在你的清单中声明

```
<activity android:name=".YourActivity"
 android:windowSoftInputMode="stateHidden"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T12:37:00.390

```
InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(myEditText.getWindowToken(), 0); 
```

只需使用此代码将键盘隐藏在绑定到父布局的 OnTouchListener 的 onTouchDown() 方法中。

希望这对您有所帮助。

# django - 与 ManyToManyField 相关的自定义唯一字段

> ID：12727309
> 
> 赞同：0
> 
> 时间：2012-10-04T12:28:20.133
> 
> 标签：django, django-models

让我们从模型开始

```
#models.py
class Project(models.Model):
    owner = models.ForeignKey(User)
    name = models.CharField(max_length=100)

class Issue(models.Model):
    project = models.ForeignKey(Project)
    title = models.CharField(max_length=100)
    status = models.ForeignKey('Status')

class Status(models.Model):
    name= models.CharField(max_length=10, help_text=u'eg open, closed...')
    default = models.BooleanField(default=False)
    project = models.ManyToManyField(Project)

    def save(self, *args, **kwargs):
        if self.default:
            #self.__class__.objects.filter(default=True, project=self.project).update(default=False)
            pass 
```

我想将所有设置`default`为`False`当用户选择另一个选项`Status`时。`default`我怎么能做到这一点？

**编辑：**

用户将能够`Status`为他的项目创建自定义。所以，假设用户有 2 个项目——它们被称为**Audi**和**BMW**。

现在用户`Status`为`Issue`. 它的名字将是`open`，他选择它作为**BMW**`Issues`中所有的默认值。项目内的所有问题**BMW**将获得默认状态。伟大的！`Project` ****`open`****

 ****现在用户`Status`为`Issue`. 这次名称将是`new`，他选择它作为**他所有项目的**默认名称！

所以，我需要的是将**BMW**`open`中的第一个状态设置为.**`default = false`**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:35:00.260

您可以创建具有`ForeignKey` `Status`关系的单实例设置模型：

```
class Settings(models.Model):
    default_status = models.ForeignKey('Status') 
```

您可能只想[强制执行](https://stackoverflow.com/questions/2138408/limit-number-of-model-instances-to-be-created-django)一个`Settings`实例。

或者，您可以在 save() 中执行取消默认设置：

```
if self.default:
    for status in self.__class__.objects.all():
        if status != self:
            status.default = False
            status.save() 
```

请注意，如果您要覆盖`Model.save()`，您将希望使用它`super()`来恢复该函数的原始行为。请参阅Django 文档中的[覆盖预定义模型方法](https://docs.djangoproject.com/en/dev/topics/db/models/#overriding-model-methods)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:30:10.577

```
 def save(self, *args, **kwargs):
        if self.default:
            for status in Status.objects.filter(default=True,project__in=self.project.all()):
                status.default=False
                status.save()
        super(Status,self).save(*args,**kwargs) 
```******

# magento - Magento - 自动订单提取 - EAV 与平面文件

> ID：12727322
> 
> 赞同：0
> 
> 时间：2012-10-04T12:29:11.003
> 
> 标签：magento, entity-attribute-value, flat-file, datamodel

我想建立一个自动化的例程，将订单从 Magento 导出到另一个 ERP。我开始了 magento SOAP/XML API 的道路。但是，对于大量订单，我们发现此解决方案速度较慢。

现在我意识到平面订单表（sales_flat_order、sales_flat_item 等）似乎包含了我需要的所有信息。该文件是否可靠并保持最新？在这种情况下我会缺少什么（当然除了自定义属性）。这些文件是否可能在升级时发生变化？

Magento API 的 [http://www.magentocommerce.com/api/soap/introduction.html](http://www.magentocommerce.com/api/soap/introduction.html)

Magento 数据模型 [http://www.magentocommerce.com/wiki/2_-_magento_concepts_and_architecture/magento_database_diagram#magento_database_downloads](http://www.magentocommerce.com/wiki/2_-_magento_concepts_and_architecture/magento_database_diagram#magento_database_downloads)

谢谢

![Magento 数据模型](../Images/4a72f52c69a577a261a4058486203ab5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:54:40.757

假设您使用的是 Magento 的新版本（1.4.2.0+），我会说 sales_flat_* 表应该是完全可靠的（也可能是事先的，我只是没有资格发表评论）。该 api 与 的实例一起使用`sales/order`，无论如何它都基于该表。

关于自定义属性，如果这些是您导出时需要的东西，您实际上可以让 Magento 将信息复制到 sales_flat_* 表中，而不用**大惊小怪**。

# android - 线程接收一个值并返回一个值

> ID：12727324
> 
> 赞同：-3
> 
> 时间：2012-10-04T12:29:12.853
> 
> 标签：android, multithreading

我想要一个方法，其中一个线程正在对该方法接收到的值进行处理。在运行方法中的进程之后，它应该存储该值，以便该方法可以返回它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:32:31.237

您应该使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)而不是`Thread`. 这是一个很好的教程：[http ://androidresearch.wordpress.com/2012/03/17/understanding-asynctask-once-and-forever/](http://androidresearch.wordpress.com/2012/03/17/understanding-asynctask-once-and-forever/)

# ios - 当 UIView 上的按钮被按下时，ViewController 中的标签会动态变化

> ID：12727330
> 
> 赞同：0
> 
> 时间：2012-10-04T12:29:51.673
> 
> 标签：ios, uibutton, uilabel

我有一个带有 VieController 和 UIView 的 singleView 应用程序。在 ViewController 我有 3 个 UILabel。在 ViewController 中的 UIView 中，我有 3 个 UIButton，标题分别为 A、B 和 C。

我需要的是：当用户从 UIView 按下按钮 A、B 或 C 之一时，它们应该以与按下时相同的顺序出现在 ViewController 的 3 个 UILabel 中。

因此，如果用户想要在 ViewController 中显示 C、B 和 A 的输出，那么他必须先按下按钮 C，然后按下 B，再按下 A。

另一个用户可能希望 ViewController 中的输出为 B、C 和 A，然后他必须先按下按钮 B，然后按下 C，再按下 A。

我只是提供这些示例以确保您正确理解我的问题。

我还为你画了一个插图：

[标签按按下的顺序显示](https://www.dropbox.com/s/un8g1wjkyxmc9ig/Question.png)

非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:49:26.677

如果我了解您要实现的目标，那么这表明相当简单。将 NSMutableArray 保留为 VC 上的属性。每次按下按钮时，都会将相应的标签添加到数组中。在将元素添加到数组之前，请检查数组计数该元素是否已存在于数组中（此存在检查不在演示中）。一个数组有三个元素设置它们的坐标并显示它们。我应该指出，这些不是您应该在 stackoverflow 上发布的问题，但我写了一个快速演示[http://www.stringcode.co.uk/random/ButtonsLabelsDemo.zip](http://www.stringcode.co.uk/random/ButtonsLabelsDemo.zip)。希望它会帮助你。

# android - 将参数从按钮传递给 android:onClick 方法

> ID：12727331
> 
> 赞同：12
> 
> 时间：2012-10-04T12:29:52.237
> 
> 标签：android, eclipse, eclipse-adt

嗨，我的活动 xml 中有类似的内容（3 个按钮）指向相同的方法：

```
 <Button
        android:id="@+id/Button_1"
        android:onClick="printNo"
        android:text="@string/Button_1" />
 <Button
        android:id="@+id/Button_2"
        android:onClick="printNo"
        android:text="@string/Button_2" />

 <Button
        android:id="@+id/Button_3"
        android:onClick="printNo"
        android:text="@string/Button_3" /> 
```

有什么方法可以确定在 printNo 方法中按下了哪个按钮？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-04T12:33:49.740

```
public void printNo( View v ) {
    switch (v.getId()) {
    case (R.id.Button_1):
        //stuff
    break;
    case (R.id.Button_2):
        //stuff
    break;
    case (R.id.Button_3):
        //stuff
    break;
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-04T12:39:23.443

正如@user1106018 所说-您可以`tag`像这样在xml中使用：

```
<Button android:onClick="f" android:tag="0"/> 
```

那么通过这种方式获取这个标签就真的很简单了：

```
public void f(View v) {
    String value =  v.getTag(); 
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-10-04T12:32:41.820

只需切换 ID：

```
public void printNo(View v){
    switch (v.getId()){
    case R.id.Button_1:
        break;
    case R.id.Button_2:
        break;
    case R.id.Button_3:
        break;
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-04T12:33:58.240

为我工作

```
public void printNo(View v) {

switch (v.getId()) {

    case R.id.Button_1:
    break;

    case R.id.Button_2:
    break;

    case R.id.Button_3:
    break;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T12:34:19.573

在 xml 添加标签，带有按钮名称的 np。

```
public void printNo(View V){
    view.getTag();
    // now you can recognize view with getTag()
} 
```

其他答案似乎也不错；）

# eclipse - JGit/EGit 在分支删除/创建时崩溃

> ID：12727333
> 
> 赞同：2
> 
> 时间：2012-10-04T12:29:58.030
> 
> 标签：eclipse, eclipse-plugin, github, egit, jgit

我正在尝试从 eclipse Juno 中的 Git 存储库视图中删除一个分支，该分支在 64 位的 Mac OS X lion 上运行。

我尝试这样做时收到以下错误日志，并且更改未反映在远程存储库中。

```
org.eclipse.jgit.errors.RevisionSyntaxException:refs/remotes/origin/IMAdNetwork_3.5.4@8578
    at org.eclipse.jgit.lib.Repository.resolve(Repository.java:649)
    at org.eclipse.jgit.lib.Repository.resolve(Repository.java:383)
    at org.eclipse.egit.ui.internal.repository.RepositoriesViewLabelProvider.decorateImage(RepositoriesViewLabelProvider.java:197)
    at org.eclipse.egit.ui.internal.repository.RepositoriesViewLabelProvider.getImage(RepositoriesViewLabelProvider.java:127)
    at org.eclipse.ui.internal.navigator.extensions.SafeDelegateCommonLabelProvider.getImage(SafeDelegateCommonLabelProvider.java:106)
    at org.eclipse.ui.internal.navigator.NavigatorContentServiceLabelProvider.findImage(NavigatorContentServiceLabelProvider.java:197)
    at org.eclipse.ui.internal.navigator.NavigatorContentServiceLabelProvider.getColumnImage(NavigatorContentServiceLabelProvider.java:105)
    at org.eclipse.ui.internal.navigator.NavigatorContentServiceLabelProvider.getImage(NavigatorContentServiceLabelProvider.java:98)
    at org.eclipse.ui.internal.navigator.NavigatorDecoratingLabelProvider$StyledLabelProviderAdapter.getImage(NavigatorDecoratingLabelProvider.java:60)
    at org.eclipse.jface.viewers.DelegatingStyledCellLabelProvider.getImage(DelegatingStyledCellLabelProvider.java:184)
    at org.eclipse.jface.viewers.DecoratingStyledCellLabelProvider.getImage(DecoratingStyledCellLabelProvider.java:167)
    at org.eclipse.jface.viewers.DelegatingStyledCellLabelProvider.update(DelegatingStyledCellLabelProvider.java:118)
    at org.eclipse.jface.viewers.DecoratingStyledCellLabelProvider.update(DecoratingStyledCellLabelProvider.java:134)
    at org.eclipse.jface.viewers.ViewerColumn.refresh(ViewerColumn.java:152)
    at org.eclipse.jface.viewers.AbstractTreeViewer.doUpdateItem(AbstractTreeViewer.java:953)
    at org.eclipse.jface.viewers.AbstractTreeViewer$UpdateItemSafeRunnable.run(AbstractTreeViewer.java:113)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:49)
    at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175)
    at org.eclipse.jface.viewers.AbstractTreeViewer.doUpdateItem(AbstractTreeViewer.java:1033)
    at org.eclipse.jface.viewers.StructuredViewer$UpdateItemSafeRunnable.run(StructuredViewer.java:485)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:49)
    at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175)
    at org.eclipse.jface.viewers.StructuredViewer.updateItem(StructuredViewer.java:2167)
    at org.eclipse.jface.viewers.AbstractTreeViewer.createTreeItem(AbstractTreeViewer.java:848)
    at org.eclipse.jface.viewers.AbstractTreeViewer$1.run(AbstractTreeViewer.java:823)
    at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
    at org.eclipse.jface.viewers.AbstractTreeViewer.createChildren(AbstractTreeViewer.java:797)
    at org.eclipse.jface.viewers.TreeViewer.createChildren(TreeViewer.java:644)
    at org.eclipse.jface.viewers.AbstractTreeViewer.createChildren(AbstractTreeViewer.java:768)
    at org.eclipse.jface.viewers.AbstractTreeViewer.handleTreeExpand(AbstractTreeViewer.java:1500)
    at org.eclipse.jface.viewers.TreeViewer.handleTreeExpand(TreeViewer.java:952)
    at org.eclipse.jface.viewers.AbstractTreeViewer$4.treeExpanded(AbstractTreeViewer.java:1511)
    at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:132)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Display.sendEvent(Display.java:4134)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1458)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1481)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1466)
    at org.eclipse.swt.widgets.TreeItem.sendExpand(TreeItem.java:1025)
    at org.eclipse.swt.widgets.Tree.expandItem_expandChildren(Tree.java:1248)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:5760)
    at org.eclipse.swt.internal.cocoa.OS.objc_msgSendSuper(Native Method)
    at org.eclipse.swt.widgets.Widget.callSuper(Widget.java:221)
    at org.eclipse.swt.widgets.Widget.mouseDownSuper(Widget.java:1093)
    at org.eclipse.swt.widgets.Tree.mouseDownSuper(Tree.java:2052)
    at org.eclipse.swt.widgets.Widget.mouseDown(Widget.java:1085)
    at org.eclipse.swt.widgets.Control.mouseDown(Control.java:2538)
    at org.eclipse.swt.widgets.Tree.mouseDown(Tree.java:2007)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:5493)
    at org.eclipse.swt.internal.cocoa.OS.objc_msgSendSuper(Native Method)
    at org.eclipse.swt.widgets.Widget.callSuper(Widget.java:221)
    at org.eclipse.swt.widgets.Widget.windowSendEvent(Widget.java:2102)
    at org.eclipse.swt.widgets.Shell.windowSendEvent(Shell.java:2284)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:5557)
    at org.eclipse.swt.internal.cocoa.OS.objc_msgSendSuper(Native Method)
    at org.eclipse.swt.widgets.Display.applicationSendEvent(Display.java:5002)
    at org.eclipse.swt.widgets.Display.applicationProc(Display.java:5151)
    at org.eclipse.swt.internal.cocoa.OS.objc_msgSend(Native Method)
    at org.eclipse.swt.internal.cocoa.NSApplication.sendEvent(NSApplication.java:128)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3616)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1022)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:916)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:585)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:540)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438) 
```

这可能是什么原因造成的？eclipse 还有其他 git 团队提供者吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:49:16.080

堆栈跟踪表明问题发生在 Eclipse 中计算其中一棵树的装饰时。因此，一种解决方法可能是禁用*Preferences -> General -> Appearance -> Label Decorations*中的 git 装饰。如果这不起作用，您可以在*Preferences -> Team -> Git -> Label Decorations*下尝试更细粒度的标签首选项。

除此之外，egit 2.1 仅在 6 天前发布，因此您很有可能没有使用最新版本的 egit，更新也可能会解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T05:34:19.023

刚刚安装了 v1.3 并且工作正常。

# python - Python：点击字符串时从文本文件中打印下 x 行

> ID：12727334
> 
> 赞同：5
> 
> 时间：2012-10-04T12:29:59.480
> 
> 标签：python, linux

情况如下：

我有一个 .txt 文件，其中包含几个 nslookups 的结果。

我想循环 tru 文件，每次它遇到字符串“非权威答案：”时，脚本必须*从*该位置打印以下 8 行。如果它有效，我应该在我的屏幕上获得所有积极的结果:)。

首先我有以下代码：

```
#!/bin/usr/python

file = open('/tmp/results_nslookup.txt', 'r')
f = file.readlines()

for positives in f:
        if 'Authoritative answers can be found from:' in positives:
                print positives
file.close() 
```

但是，只有打印的“权威答案可以从：”中找到它在 .txt 中的时间。

我现在拥有的代码：

```
#!/bin/usr/python

file = open('/tmp/results_nslookup.txt', 'r')
lines = file.readlines()

i = lines.index('Non-authoritative answer:\n')

for line in lines[i-0:i+9]:
        print line,

file.close() 
```

但是当我运行它时，它会将第一个结果很好地打印到我的屏幕上，但不会打印其他积极的结果。

ps 我知道 socket.gethostbyname("foobar.baz") 但首先我想解决这个基本问题。

先感谢您！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T12:33:42.227

您可以将该文件用作迭代器，然后在每次找到您的句子时打印接下来的 8 行：

```
with open('/tmp/results_nslookup.txt', 'r') as f:
    for line in f:
        if line == 'Non-authoritative answer:\n':
            for i in range(8):
                print(next(lines).strip()) 
```

每次您在文件对象上使用该[`next()`函数](https://docs.python.org/3/library/functions.html#next)`for`（或循环遍历它）时，它都会返回该文件中的下一行，直到您读完最后一行。

而不是`range(8)`for 循环，我实际上会使用`itertools.islice`：

```
from itertools import islice

with open('/tmp/results_nslookup.txt', 'r') as f:
    for line in f:
        if line == 'Non-authoritative answer:\n':
            print(''.join(islice(f, 8))) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T12:33:52.197

```
file = open('/tmp/results_nslookup.txt', 'r')
for line in file:
    if line=='Non-authoritative answer:\n':
        for _ in range(8):
            print file.next() 
```

顺便说一句：永远不要使用`file`变量的名称，因为它是内置函数的名称。

# boost - Boost：需要示例：超时

> ID：12727340
> 
> 赞同：0
> 
> 时间：2012-10-04T12:30:17.417
> 
> 标签：boost, timeout, boost-asio

我已经在这方面工作了很长时间，但没有成功。

想象一下，您的主要功能是这样的：

```
bool running = true;
int i = 0;
//waitHandler();
while(running)
    i++; 
```

现在我想添加并调用一个计时器，它将运行设置为假，当它到期时。

```
void waitHandler(){ 

    boost::asio::io_service timerService;

    //create and bind the timer
    boost::asio::deadline_timer timer(timerService,
    boost::posix_time::milliseconds(2000));
    timer.wait();

    running = true;
    cout<<"WaitHandler triggered"<<endl;
} 
```

当然这不起作用（当你取消注释上面的评论时），因为计时器会阻塞主线程。如果我想在不阻塞主要功能的情况下拥有此功能，该怎么办。

**编辑：**

```
//transfer some error message
void set_result(boost::system::error_code* a, boost::system::error_code b,deadline_timer &timer)
  {
     a->assign(b.value(),b.category());
  } 

 template<class SOCKET>
 void read_with_timeout(SOCKET & sock, unsigned int delay,
     const asio::mutable_buffers_1& buffers)
  {       
      //create error messages
      boost::system::error_code timer_result; 
      boost::system::error_code read_result; 

      //initialize timer
      deadline_timer timer(sock.get_io_service());        
      timer.expires_from_now(boost::posix_time::milliseconds(delay));
      timer.async_wait(boost::bind(set_result, &timer_result, _1,boost::ref(timer)));       

      //initialize receive mechanism
      sock.async_receive(buffers, boost::bind(set_result, &read_result, _1,boost::ref(timer)));    
      sock.get_io_service().reset();

      //should run for one handler
      while (sock.get_io_service().run_one())    
      {      
          if (read_result.value()==0){ //zero stands for, that the message was received properly.            
              timer.cancel();
              //cout<<"Message received: => Timer cancelled => RETURN!"<<endl;
              return;
          }

          if(timer.expires_from_now().total_milliseconds() <=0){                
              sock.cancel();                
              //cout<<"Timeout => Socket cancelled => RETURN!"<<endl;         
              return;
          }
      }   
 } 
```

如前所述，这几乎显示了预期的行为，但有一些问题：

1.  为什么即使使用`run_one`，计时器的处理程序和接收的处理程序都可以被触发
2.  当接收到 0 个字节时，为什么接收也会触发。对我来说，这听起来像是没有收到任何东西，并且该功能应该等待？
3.  这是正确的方法吗？正如我所说的，我想接收或超时。（像ping）

**实际上，当它们出现在 Wireshark 中时，它们的接收顺序是错误的——我猜它与 Wireshark 有关`async_receive`，它并没有真正等待传入的消息，而只是在函数调用之前获取缓冲区中的内容。**

该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T19:12:36.930

你让这比它需要的复杂得多。这个网站上有很多关于超时[的问题](https://stackoverflow.com/search?q=%5Bboost-asio%5D%20timeout)， Boost.Asio 网站上有一个[很好的例子。](http://www.boost.org/doc/libs/release/doc/html/boost_asio/example/cpp03/timeouts/async_tcp_client.cpp)async_tcp_client 示例中的注释有一个很好的 ASCII 图表来解释这个场景

```
// This class manages socket timeouts by applying the concept of a deadline.
// Some asynchronous operations are given deadlines by which they must complete.
// Deadlines are enforced by an "actor" that persists for the lifetime of the
// client object:
//
//  +----------------+
//  |                |
//  | check_deadline |<---+
//  |                |    |
//  +----------------+    | async_wait()
//              |         |
//              +---------+
//
// If the deadline actor determines that the deadline has expired, the socket
// is closed and any outstanding operations are consequently cancelled.
//
// Connection establishment involves trying each endpoint in turn until a
// connection is successful, or the available endpoints are exhausted. If the
// deadline actor closes the socket, the connect actor is woken up and moves to
// the next endpoint.
//
//  +---------------+
//  |               |
//  | start_connect |<---+
//  |               |    |
//  +---------------+    |
//           |           |
//  async_-  |    +----------------+
// connect() |    |                |
//           +--->| handle_connect |
//                |                |
//                +----------------+
//                          :
// Once a connection is     :
// made, the connect        :
// actor forks in two -     :
//                          :
// an actor for reading     :       and an actor for
// inbound messages:        :       sending heartbeats:
//                          :
//  +------------+          :          +-------------+
//  |            |<- - - - -+- - - - ->|             |
//  | start_read |                     | start_write |<---+
//  |            |<---+                |             |    |
//  +------------+    |                +-------------+    | async_wait()
//          |         |                        |          |
//  async_- |    +-------------+       async_- |    +--------------+
//   read_- |    |             |       write() |    |              |
//  until() +--->| handle_read |               +--->| handle_write |
//               |             |                    |              |
//               +-------------+                    +--------------+
//
// The input actor reads messages from the socket, where messages are delimited
// by the newline character. The deadline for a complete message is 30 seconds.
//
// The heartbeat actor sends a heartbeat (a message that consists of a single
// newline character) every 10 seconds. In this example, no deadline is applied
// message sending.
// 
```

您应该努力在您的应用程序中实现类似的设计。无需`read_with_timeout()`像您在问题中发布的那样编写函数来笨拙。使用`async_read()`,`async_write()`和`async_wait()`足以为您提供所需的功能。

我认为您的部分困惑源于线程。不用多想，先了解基本概念。您将需要使用单个线程（调用的线程`main()`）和单个线程`io_service`来启动。之后，您可以探索[更高级的概念](https://stackoverflow.com/a/6162575/283302)。如果您尝试将此代码集成到更大的应用程序中，那将是一个完全不同的问题。

学习前[摄器设计模式](https://stackoverflow.com/a/5291002/283302)也可能对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T14:18:56.130

您可以`io_service::run`在单独的线程中执行（并以某种方式同步对 的访问`running`）或在`io_service`循环中手动泵送`while`循环，使用[`run_one()`/ `poll()`/`poll_one()`](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/reference/io_service.html) - 任何适合您的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T15:54:23.983

我找到了某种解决方案。我可以接受，即使有些事情我不明白。

```
//transfer some error message
void set_result(boost::system::error_code* a, boost::system::error_code b,deadline_timer &timer)
  {
     a->assign(b.value(),b.category());
  } 

 template<class SOCKET>
 void read_with_timeout(SOCKET & sock, unsigned int delay,
     const asio::mutable_buffers_1& buffers)
  {       
      //create error messages
      boost::system::error_code timer_result; 
      boost::system::error_code read_result; 

      //initialize timer
      deadline_timer timer(sock.get_io_service());        
      timer.expires_from_now(boost::posix_time::milliseconds(delay));
      timer.async_wait(boost::bind(set_result, &timer_result, _1,boost::ref(timer)));       

      //initialize receive mechanism
      sock.async_receive(buffers, boost::bind(set_result, &read_result, _1,boost::ref(timer)));    
      sock.get_io_service().reset();

      //should run for one handler
      while (sock.get_io_service().run_one())    
      {      
          if (read_result.value()==0){ //zero stands for, that the message was received properly.            
              timer.cancel();
              //cout<<"Message received: => Timer cancelled => RETURN!"<<endl;
              return;
          }

          if(timer.expires_from_now().total_milliseconds() <=0){                
              sock.cancel();                
              //cout<<"Timeout => Socket cancelled => RETURN!"<<endl;         
              return;
          }
      }   
 } 
```

这实际上适用于我的情况，取自 该线程引用的[http://lists.boost.org/Archives/boost/2007/04/120339.php ：](http://lists.boost.org/Archives/boost/2007/04/120339.php)[如何在 boost asio 中设置阻塞套接字的超时？](https://stackoverflow.com/questions/291871/how-to-set-a-timeout-on-blocking-sockets-in-boost-asio)

我刚刚将其调整为 Boost 1.51。

有些事情对我来说仍然是模糊的，例如

*   io_service.run_one 实际上仍然会触发更多的事件处理程序，即使它应该只触发一个。
*   还有一些来自计时器的事件我完全不感兴趣。我只想赶上超时而不是其他东西。（我不知道为什么还有其他东西）

无论如何，到目前为止我的问题已经解决了。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-04T12:33:08.857

您必须在其自己的线程上生成计时器，然后确保保护正在运行的变量免受并发访问。

# javascript - 表单中的 javascript 验证

> ID：12727342
> 
> 赞同：0
> 
> 时间：2012-10-04T12:30:20.447
> 
> 标签：javascript, jquery

我无法让此验证正常工作。我正在验证一个选择框已被选中，并且没有留在我的表单中的默认选项上。

**形式：**

```
<label for="reason">How can we help?</label>
   <select name="reas">
    <option value="Please Select">Please Select</option>
    <option value="Web Design">Web Design</option>
        <option value="branding">Branding</option>
        <option value="rwd">Responsive Web Design</option><span id="dropdown_error"></span>
  </select> 
```

**点击事件：**

```
$(document).ready(function(){
    $('#contactForm').submit(function(){
        return checkSelect();
    });
}); 
```

**功能：**

```
function checkSelect() {
    var chosen = "";
var len = document.conform.reas.length;
var i;

for (i = 0; i < len; i++){
        if (document.conform.reas[i].selected){
            chosen = document.conform.reas[i].value;
        }
 }

    if (chosen == "Please Select") {
    document.getElementById("dropdown_error").innerHTML = "No Option Chosen";
        return false;
    }
    else{
    document.getElementById("dropdown_error").innerHTML = "";
    return true;
    }
} 
```

我也在控制台中收到此错误：

```
Uncaught TypeError: Cannot set property 'innerHTML' of null 
```

我对 javascript 真的很陌生，所以，我目前正在学习和尝试一些简单的例子，但我看不出是什么导致这无法验证。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:36:36.267

首先，您不能*在*. `<select>`将它移到`<select>`HTML 之外，这将使 JS 错误消失。

```
<label for="reason">How can we help?</label>
<select name="reas">
    <option value="select">Please Select</option>
    <option vlaue="Web Design">Web Design</option>
    <option vlaue="branding">Branding</option>
    <option vlaue="rwd">Responsive Web Design</option>
</select>
<span id="dropdown_error"></span> 
```

然后，由于您已经在使用 jQuery，您可以将整个验证功能缩短为：

```
function checkSelect() {
    var chosen = $('select[name="reas"]').val();
    if (chosen == "select") {
        $("dropdown_error").text("No Option Chosen");
        return false;
    } else {
        $("dropdown_error").text("");
        return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T12:33:07.960

您的默认值为“选择”，您正在检查“请选择”。使用相同的值。

改变这个

```
<option value="select">Please Select</option> 
```

至

```
<option value="Please Select">Please Select</option> 
```

编辑：我会使用以下代码。要修复 javascript 问题，请确保将脚本放在关闭 body 标记之前。您的脚本在文档被解析之前执行

```
<label for="reason">How can we help?</label>

<select id="reas" name="reas">
    <option value="">Please Select</option>
    <option vlaue="Web Design">Web Design</option>
    <option vlaue="branding">Branding</option>
    <option vlaue="rwd">Responsive Web Design</option><span id="dropdown_error">    </span>  </option> 
```

```
function checkSelect() {
    var chosen = document.getElementById["reas"].value;

    if (chosen == "") {
        document.getElementById("dropdown_error").innerHTML = "No Option Chosen";
        return false;
    }
    else{
        document.getElementById("dropdown_error").innerHTML = "";
        return true;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T12:33:20.363

将默认选择更改为`optgroup`：

```
<optgroup>Please Select</optgroup> 
```

然后就无法选择了

[https://developer.mozilla.org/en-US/docs/HTML/Element/optgroup](https://developer.mozilla.org/en-US/docs/HTML/Element/optgroup)

# http - 饼干——误解

> ID：12727343
> 
> 赞同：1
> 
> 时间：2012-10-04T12:30:21.327
> 
> 标签：http, cookies, http-headers, http-get, httpcookie

我的目标是我想用一些 java 代码登录一个站点，并在登录时做一些工作。（为了编写一些 java 烹饪处理，我首先需要了解这一切实际上是如何工作的）问题是我可以t 完全弄清楚如何管理 cookie 会话。这是我在使用 chrome 开发时观察到的。工具： 1) 在第一次请求网站 URL 时，我不发送任何 cookie，但我得到一些响应：

```
Set-Cookie:PHPSESSID=la2ek8vq9bbu0rjngl2o67aop6; path=/; domain=.mtel.bg; HttpOnly
Set-Cookie:PHPSESSID=d32cj0v5j4mj4nt43jbhb9hbc5; path=/; domain=.mtel.bg; HttpOnly 
```

2）在我现在发送的日志页面上移动（在 HTTP GET 上）：

```
 Cookie:PHPSESSID=d32cj0v5j4mj4nt43jbhb9hbc5; 
            __utma=209782857.1075318979.1349352741.1349352741.1349352741.1;
            __utmb=209782857.1.10.1349352741;
            __utmc=209782857;
 __utmz=209782857.1349352741.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); 
__atuvc=1%7C40 
```

事实上，当我在 chrome 的 cookie 选项卡中检查我存储的 cookie（在我第一次获取网站主 url 的请求之后）时——它们以它们在下一个 get/post 请求中传递的方式存在。你能解释一下收到我的第一个 cookie 后到底发生了什么以及为什么要存储这样的名称/值对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:47:42.183

[页面上有一个来自Google Analytics](https://stackoverflow.com/questions/1823406/what-does-utma-mean)的 Javascript，它设置了一些 cookie。

# ios - 我的 m3u8 带宽值有问题

> ID：12727345
> 
> 赞同：0
> 
> 时间：2012-10-04T12:30:49.540
> 
> 标签：ios, ffmpeg, http-live-streaming

我使用 ffmpeg 按照技术说明 TN2224 中推荐的比特率对我的示例视频进行编码，然后使用 HLS 工具对其进行分段并创建播放列表，最后创建变体 plist 文件“all.m3u8”
我使用验证工具来验证我的 HLS 内容，它最终显示除了 64k 音频只有带宽低，其他都保持在相同的带宽，我使用文本编辑器打开“all.m3u8”并看到所有其他比特率内容都使用相同的带宽。无论我如何更改 ffmpeg 命令中的参数，我仍然无法更正它们。以下命令是我用来对内容进行编码的命令：
`ffmpeg -i input.m4v -acodec libfaac -vcodec libx264 -s 480x360 -b 350k -r 29.97 -vpre medium output.mp4`

以下命令用于生成段和 plist：
`mediafilesegmenter -b http://www.example.com/stream/ -I -f ~/Documents/sample/ output.mp4`

以下命令用于生成 all.m3u8：
`variantplaylistcreator -o all.m3u8 http://www.example.com/stream/110/prog_index.m3u8 ~/Documents/sample/110/prog_index.m3u8 -iframe-url http://www.freeyourteam.com/stream/110/iframe_index.m3u8 http://www.example.com/stream/200/prog_index.m3u8 ~/Documents/sample/200/prog_index.m3u8 -iframe-url http://www.freeyourteam.com/stream/200/iframe_index.m3u8 http://www.example.com/stream/350/prog_index.m3u8 ~/Documents/sample/350/prog_index.m3u8 -iframe-url http://www.freeyourteam.com/stream/350/iframe_index.m3u8 http://www.example.com/stream/550/prog_index.m3u8 ~/Documents/sample/550/prog_index.m3u8 -iframe-url http://www.freeyourteam.com/stream/550/iframe_index.m3u8 http://www.example.com/stream/64/prog_index.m3u8 ~/Documents/sample/64/prog_index.m3u8`

在我的“all.m3u8”中，带宽都是 523894：

请允许我再问两个基本问题：
在技术说明中，推荐的比特率是 64 Kbps、110 Kbps、200 Kbps、350 Kbps、550 Kbps，我想知道这个值是包括音频比特率还是不包括音频。你如何插入关键帧来分割？因为在文档中它说：“每个片段必须包含至少一个关键帧，最好更多。如果只包含一个，请将其放在片段的开头。” 我不太明白你是怎么做到的。
非常感谢您的帮助，我非常感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T01:57:23.677

感谢大家的关注和建议。我终于弄明白了。不同比特率带宽保持不变的原因是我的 ffmpeg 命令错过了几个设置。我最终使用了以下命令：
`ffmpeg -i inputVideo.m4v -f mpegts -acodec libfaac -ar 44100 -ab 64k -vcodec libx264 -b 350k -s 480x360 -r 29.97 -flags +loop -cmp +chroma -partitions +parti4x4+partp8x8+partb8x8 -subq 5 -trellis 1 -refs 1 -coder 0 -me_range 16 -keyint_min 25 -sc_threshold 40 -i_qfactor 0.71 -bt 200k -maxrate 350k -bufsize 350k -rc_eq 'blurCplx^(1-qComp)' -qcomp 0.6 -qmin 10 -qmax 51 -qdiff 4 -level 30 -aspect 4:3 -g 30 -async 2 output.ts`

我把它放在这里，以便与我有同样问题的其他人有参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T14:53:22.687

Jason，要创建 all.m3u8，不应该给它多个 m3u8 文件，每个文件对应一个不同的比特率吗？

我猜你运行 ffmpeg 说 4 次来创建 4 个比特率文件。然后运行分段器 4 次以创建 4 组分段及其单独的 m3u8 文件。

最后，您必须告诉 variantplaylistcreator 每个比特率的各种 m3u8 文件的位置，以创建单个主 m3u8 文件。例如。

```
variantplaylistcreator -o mymedia_all.m3u8 http://mywebserver/mymedia_lo/prog_index.m3u8 mymedia_lo.plist http://mywebserver/mymedia_med/prog_index.m3u8 mymedia_med.plist http://mywebserver/mymedia_hi/prog_index.m3u8 mymedia_hi.plist 
```

我没有看到您单独提供各种文件。我希望你能得到这张照片。

编辑：回答您的其他问题：比特率包括音频。您需要做的是确保在编码中有固定的关键帧间隔。这将允许分段器定期分段文件。你不要在任何地方插入任何东西。

出于好奇，为什么不直接使用 ffmpeg 为您提供输出分段文件？它支持它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T07:20:16.943

听起来您可能已经发现了 variantplaylistcreator 中的错误。我建议验证子流确实是您期望的比特率，如果它确实输入了错误的值，请将其报告给苹果。

它可能与使用多个 -iframe-url 有关。我不明白为什么有必要多次指定它。如果子流具有不同的 I 帧位置，自适应流将不起作用——至少所有段边界必须对齐。

如果您需要以编程方式修复播放列表，我建议使用 ffprobe（来自 ffmpeg 套件）来提取每个子流的比特率，并将带宽数替换为提取的值。

# c# - Aforge.net 消耗大量 CPU 资源

> ID：12727348
> 
> 赞同：1
> 
> 时间：2012-10-04T12:31:04.703
> 
> 标签：c#, image-processing, aforge

我在我的双核 2.0 GHz 笔记本电脑上运行 Aforge.net 提供的两个相机测试样本，配备 2 GB RAM。现在，随着应用程序开始显示来自 2 个摄像头的视觉效果，我看到大量 CPU 使用率。它目前消耗了整个 CPU 功率的 60% 到 70%。谁能告诉我为什么它会消耗那么多 CPU 以及如何避免它，因为我必须构建一个需要 2 个摄像头视觉的类似应用程序，并且我将使用 C#。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:56:26.640

可能是很多东西。打开分析器并找出时间花在哪里。然后调整你的问题！

# magento - Magento - 订单状态在表格中的什么位置？

> ID：12727356
> 
> 赞同：0
> 
> 时间：2012-10-04T12:31:28.880
> 
> 标签：magento, status, orders

我正在查看 Magento 表，试图找出订单状态的存储位置——平面表或 Eav 表。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:42:33.510

它至少从 1.4.2 开始就存储在 sales_flat_order 中，但它可能取决于您的 Magento 版本。我相信它可能在早期版本中存储在 EAV 中，但我无法确切确认是哪个，因为在该版本发布之前我从未使用过 Magento。

# javascript - jquery可排序后获取div id

> ID：12727369
> 
> 赞同：0
> 
> 时间：2012-10-04T12:32:30.910
> 
> 标签：javascript, jakarta-ee, jquery, jquery-plugins

我正在尝试使用 JQuery 将 div 拖放到相应的占位符（div）`sortable`。我尝试使用以下代码从拖动 div 的位置获取占位符 id。

```
jQuery(document).ready( function(){ 
    $(function() { 
        var item,from_placeholder_div_id;   
        $("#div-container").sortable({ 
            stop: function(event, ui) { 
                from_placeholder_div_id = $(ui.item).attr('id');
                alert("Widget moved from" + from_placeholder_div_id);
            } 
        });
    }); 
```

我还想获取 div 移动到的占位符 ID。需要一些帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:43:00.997

您正在保存`$(ui.item).attr('id')`到一个变量并提醒另一个变量。您正在将其保存到`placeholder_div_id`并发出警报`from_placeholder_div_id`

改变它来`from_placeholder_div_id = $(ui.item).attr('id');`解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T15:05:36.027

它存储在发件人的 id 属性中：

```
from_placeholder_div_id = $(ui.sender).attr('id'); 
```

# html - 向所选菜单添加活动类并删除默认值

> ID：12727373
> 
> 赞同：0
> 
> 时间：2012-10-04T12:32:40.473
> 
> 标签：html, css, drop-down-menu, menubar, multi-level

我创建了要突出显示所选菜单的 Web 应用程序。

以下是我所拥有的

```
<div style="width: 80%;" align="left" >
    <span  style="display:inline-block;" align="left" >
        <div id="menubar" class="grid-block">
            <nav id="menu">
                <ul class="menu menu-dropdown ">
                    <li class="level1 item101 active">
                        <a href="index.xhtml" class="level1">
                            <span>
                                <span class="icon" style="background-image: url('images/menu/icon_menu_home.png');background-repeat: no-repeat; background-position: top center"> 
                                </span>
                                Home
                            </span>
                        </a>
                    </li>
                    <li class="level1 item102 parent makeSpace default" 
                        style="#{!PersonalInformationDataBean.pageViewData.contains('registerForPatentss') &amp;&amp; !PersonalInformationDataBean.pageViewData.contains('success') &amp;&amp; !PersonalInformationDataBean.pageViewData.contains('getReportss') &amp;&amp; !PersonalInformationDataBean.pageViewData.contains('searhPatentss')  ?'display:none':'display:inherit'};">
                        <a href="" class="level1 parent">
                            <span>
                                <span class="icon" style="background-image: url('images/menu/icon_menu_features.png');background-repeat: no-repeat; background-position: top center"> 
                                </span>Projects/Inventions
                            </span>
                        </a>
                        <div class="dropdown columns1">
                            <div class="dropdown-bg" style="overflow: hidden; width: 239px; height: 202px; ">
                                <div>
                                    <div class="width100 column">
                                        <ul class="level2">
                                            <li class="level2 item200" style="width: 210px;#{PersonalInformationDataBean.pageViewData.contains('registerForPatentss')?'display:inherit':'display:none'}">
                                                <a href="registerForPatentss.xhtml" class="level2">
                                                    <span>Register New Applicant
                                                    </span>
                                                </a>
                                            </li>
                                            <li class="level2 item201"  style="width: 210px;#{PersonalInformationDataBean.pageViewData.contains('success')?'display:inherit':'display:none'}">
                                                <a href="success.xhtml" class="level2">
                                                    <span>Register New Project
                                                    </span>
                                                </a>
                                            </li>
                                            <li class="level2 item202" style="width: 210px;#{PersonalInformationDataBean.pageViewData.contains('getReportss')?'display:inherit':'display:none'}">
                                                <a href="getReportss.xhtml" class="level2">
                                                    <span>Project Reports
                                                    </span>
                                                </a>
                                            </li>
                                            <li class="level2 item203"  style="width: 210px;#{PersonalInformationDataBean.pageViewData.contains('searhPatentss')?'display:inherit':'display:none'}">
                                                <a href="searhPatentss.xhtml" class="level2">
                                                    <span>Search For Project
                                                    </span>
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>

                    <li class="level1 item102 parent makeSpace default"  style="#{!PersonalInformationDataBean.pageViewData.contains('systemLog') &amp;&amp; !PersonalInformationDataBean.pageViewData.contains('addUser') &amp;&amp; !PersonalInformationDataBean.pageViewData.contains('changePass') &amp;&amp; !PersonalInformationDataBean.pageViewData.contains('userlistss')?'display:none':'display:inherit'}">
                        <a href="" class="level1 parent">
                            <span>
                                <span class="icon" style="background-image: url('images/menu/icon_menu_features.png');background-repeat: no-repeat; background-position: top center"> 
                                </span>Administrative
                            </span>
                        </a>
                        <div class="dropdown columns1">
                            <div class="dropdown-bg" style="overflow: hidden; width: 209px; height: 202px; ">
                                <div>
                                    <div class="width100 column">
                                        <ul class="level2">
                                            <li class="level2 item200" style="width: 180px;#{PersonalInformationDataBean.pageViewData.contains('addUserss')?'display:inherit':'display:none'}">
                                                <a href="addUserss.xhtml" class="level2">
                                                    <span>Add User Account
                                                    </span>
                                                </a>
                                            </li>
                                            <li class="level2 item201" style="width: 180px;#{PersonalInformationDataBean.pageViewData.contains('logPatentSystemss')?'display:inherit':'display:none'}">
                                                <a href="logPatentSystemss.xhtml" class="level2">
                                                    <span>System Log
                                                    </span>
                                                </a>
                                            </li>
                                            <li class="level2 item202" style="width: 180px;#{PersonalInformationDataBean.pageViewData.contains('changePass')?'display:inherit':'display:none'}">
                                                <a href="changePass.xhtml" class="level2">
                                                    <span>Change Password
                                                    </span>
                                                </a>
                                            </li>
                                            <li class="level2 item203" style="width: 180px;#{PersonalInformationDataBean.pageViewData.contains('userlistss')?'display:inherit':'display:none'}">
                                                <a href="userlistss.xhtml" class="level2">
                                                    <span>Details Of Registered Users
                                                    </span>
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                </ul>
            </nav>
        </div>
    </span>
</div> 
```

这给了我如下输出（它不一样，但有点像这样）。

```
Home  |   Projects     |     Administrative
           |                  |
           |                  |
           |- Men 1           |- Ad 1
           |- Men 2           |- Ad 2
           |- Men 3           |- Ad 3 
```

现在我想做的是

1.  When Men 1 is selected, `<li class="level1 item102 parent makeSpace default"`should change to `<li class="level1 item102 parent makeSpace active"`ie take out `default`and take in `active`class.

2.  当我单击时`Ad 2`，`<li class="level1 item102 parent makeSpace default"`应更改为`<li class="level1 item102 parent makeSpace active"`

知道如何完成这项工作吗？我在网上查了一下，但是我得到的例子是 0 级菜单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:50:05.173

查看**[演示](http://jsbin.com/uqowuk/7/edit)**

**jQuery：**

```
$("#menubar").on("click","li",function(e){
      e.preventDefault();
      e.stopPropagation();

      if($(this).hasClass("active"))
      {
        $(this).removeClass("active").addClass("default");

      }
      else
      {
                $(this).addClass("active").removeClass("default");
      }

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:39:47.103

我所做的是在下面......

```
var myURL = window.location.toString();
var endIndex = myURL.lastIndexOf(".", myURL);
var startIndex = myURL.lastIndexOf("/")+1;
var pageAccessed = myURL.substr(startIndex, endIndex-startIndex);

if (pageAccessed=="successLoginss") {
$(".homemenu").addClass("active");
$(".homemenu").removeClass("default");
}

<li class="level1 item101 default homemenu">
    <a href="index.xhtml" class="level1">
        <span>
            <span class="icon" style="background-image: url('images/menu/icon_menu_home.png');background-repeat: no-repeat; background-position: top center"> 
            </span>
            Home
        </span>
    </a>
</li> 
```

Dats it.....我知道这不是正确的方法，但我必须这样做......

# .htaccess - htaccess 不起作用重写规则

> ID：12727379
> 
> 赞同：1
> 
> 时间：2012-10-04T12:32:51.073
> 
> 标签：.htaccess, mod-rewrite

我已经为我的`.htaccess`文件苦苦挣扎了好几个星期了，我改变了很多次，但它就是行不通。

我的`.htaccess`文件中有这个：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^/([^./]+)\.html$ category.php?id=$1 
RewriteRule ^/([^./]+)\.html$ tag.php?id=$1 
RewriteRule ^/([^./]+)\.html$ play.php?id=$1 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:36:06.687

您确定在 Apache 中打开了 mod_rewrite 吗？您可以访问 httpd.conf 吗？最好在那里进行重定向而不是使用 .htaccess 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T19:16:36.170

1.  您的条件仅适用于第一条规则。每一组*都只适用于紧随其后*`RewriteCond`的。所以条件只适用，最后两条规则根本没有条件。*`RewriteRule`*`RewriteRule ^/([^./]+)\.html$ category.php?id=$1`

2.  您的条件是将**存在**的东西重写为其他东西，这将导致重写循环。你可能想要：

    ```
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d 
    ```

3.  您的第二条和第三条规则**将永远不会被应用**，因为如果有人请求`/some-page.html`第一条规则的正则表达式将匹配它并将 URI 重写为`/category.php?id=some-page`，那么 next to 规则将永远不会匹配，因为第一条规则已经将 URI 重写为`category.php`。

4.  您的正则表达式与前导斜杠匹配，在 htaccess 文件中的重写规则中应用的 URI 已去除前导斜杠，因此您希望改为：

    ```
    RewriteRule ^([^./]+)\.html$ category.php?id=$1 
    ```

1、2和4很容易。3，没那么多。您将不得不找出一种独特的方式来将 html 页面表示为类别、标签或游戏。你不能让所有 3 个看起来都一样，没有办法告诉你想要哪一个。拿：

```
/something.html 
```

这应该是一个类别吗？一个标签？还是一出戏？谁知道呢，你的重写规则肯定不会。但是，如果您在每个前面都加上一个关键字，那么您可以区分：

```
/category/something.html
/tag/something.html
/play/something.html 
```

你的规则看起来像：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^category/([^./]+)\.html$ category.php?id=$1 

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^tag/([^./]+)\.html$ tag.php?id=$1 

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^play/([^./]+)\.html$ play.php?id=$1 
```

# xcode - Xcode 4，断点在 Mac OS 命令行工具的单元测试中不起作用

> ID：12727385
> 
> 赞同：3
> 
> 时间：2012-10-04T12:33:08.927
> 
> 标签：xcode, macos, unit-testing, command-line, breakpoints

我在 Xcode 4.5 中有一个简单的*Mac OS X* **命令行工具项目。****我从Cocoa 单元测试包**模板中手动添加了一个单元测试目标（命令行工具模板没有*包含单元测试*开关）。问题：运行测试（产品>测试）时，我无法让调试器在断点处停止。

正如我在询问之前进行了谷歌搜索一样，这些是我已经尝试/检查过的一些事情：

*   单元测试确实运行（它们在例如 STFail() 上正确失败）。
*   顶部栏上的主*断点*开关已打开（将其关闭再打开无济于事）。
*   *测试目标上的构建配置*设置为*调试*（调试器是 LLDB，更改为 GDB 没有帮助）。
*   调试一般工作。在主控制台应用程序中，目标断点被击中得很好，所以只有单元测试有问题。此外，我制作了一个包含单元测试的测试 iOS 应用程序——应用程序和单元测试都很好。
*   构建设置看起来不错（让我知道是否还有其他我应该检查的）：
    *   生成调试符号 = 是
    *   优化级别 = 无 [-O0]（用于调试）
*   设置符号断点（在 -[NSException raise] 或 objc_exception_throw 上）没有帮助。
*   重新加载项目或重新启动 Xcode 没有帮助。

我还能做些什么来在单元测试中遇到断点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:05:50.620

检查单元测试目标的“构建后测试”构建设置（在“单元测试”下）。

如果此设置设置为“是”，那么在构建目标之后，测试将通过 Xcode“外部”的 shell 脚本执行，然后再通过 Xcode 执行。因此，如果在执行脚本时您的测试失败，那么第二次执行（“内部”Xcode）将不会发生，因此您的断点将不会被命中。

-或者-

如果您尝试调试的测试是失败的测试，则可能是您的 -setUp 方法中发生了失败。如果您在 setUp 中使用 OCMock 并且忘记存根在设置期间碰巧调用的方法，则可能会发生这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T23:43:07.363

我对 ios 应用程序的单元测试陷入了类似的困境。在不同的位置使用新的代码副本为我解决了这个问题。

更新：有问题的状态似乎在项目/工作空间内的 xcuserdata 目录中。当我再次遇到它时，清除它解决了这个问题。但请注意，您将丢失所有以前的状态（例如，设置断点、打开的窗口等）

# powershell - Get-ADUser 中带有变量的通配符

> ID：12727388
> 
> 赞同：6
> 
> 时间：2012-10-04T12:33:14.527
> 
> 标签：powershell

我确定这只是一个语法错误，但我试图搜索 AD 用户，但我无法弄清楚为什么这不起作用：

```
Write-Host "Enter LastName or UserName:"
$x = Read-Host
Get-ADUser -Filter { SAMAccountName -like '*$x*' } -Properties DispalyName | FT -Properties DisplayName 
```

只是不返回任何东西。我确定它是带有“*”的语法。但不知道为什么。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-04T14:43:51.643

$x 没有在过滤器脚本块内展开，这应该可以完成工作：

```
$x = 'mini'
Get-ADUser -Filter "SamAccountName -like '*$x*'" -Properties DisplayName | ft DisplayName 

DisplayName
-----------
Administrator 
```

或者，您可以使用 ldap 过滤器：

```
Get-ADUser -LDAPFilter "(samaccountname=*$x*)" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T13:34:00.147

我同意上面的海报。单引号防止变量扩展。双引号将起作用。

```
PS H:\> $s = "smith"
PS H:\> Write-Host '*$s*' 
*$s*
PS H:\> Write-Host "*$s*" 
*smith* 
```

在某些情况下，双引号无法拯救您，例如使用对象。

```
PS H:\> $psObj = New-Object PsCustomObject
PS H:\> $psobj | Add-Member -MemberType noteproperty -name s -value "smith"
PS H:\> Write-Host $psobj.s
smith
PS H:\> Write-Host "*$psobj.s*"
*@{s=smith}.s* 
```

在这种情况下，请使用字符串格式：

```
PS H:\> Write-Host ("*{0}*" -f $psobj.s)
*smith* 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T12:46:40.960

尝试改变这个：

```
{ SAMAccountName -like "*$x*" } 
```

编辑：

这应该有效：

```
$x = '*' + $(Read-Host 'Enter name') + '*'
get-aduser -Filter {name -like $x} -Properties DispalyName | FT -Properties DisplayName 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T13:59:55.217

好吧，这行得通，只是有点慢：

```
$x = Read-Host "Enter Name"

Get-ADUser -Filter * -Properties SAMAccountName | ? { $_.SAMAccountName -like "*$x*" } | Format-Table -Property SAMAccountName 
```

有点不同的方法，但工作不少！感谢所有的帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-06T16:58:01.197

在使用对象时，我在我的 powershell 学习曲线中遇到了这个问题。

我读入了一个用户 id 的 csv 文件，需要对它们进行搜索/匹配/过滤，正如前面所说的那样，双引号在那里不起作用。

我的解决方案是在我的对象上使用 ToString() 方法并将其设置为标量变量，然后在过滤器中使用该变量。工作得很好。

```
$user_records=Import-CSV .\20140430.userids.csv 
```

该表有三列“姓名、ID、部门”。为了让他们进入他们的用户 ID 的搜索过滤器，我使用了：

```
foreach ( $thisrow in $user_records ) {
$thisuser=$thisrow.Username.ToString()
Get-ADUser -Filter {SamAccountName -eq $thisuser} -SearchBase "OU=Domain Users,DC=topofthecharts,DC=com" -Properties Department 
```

}

这完全避免了我的扩展和引用的麻烦。

# javascript - 缩放画布 jsplumb/fabric.js

> ID：12727399
> 
> 赞同：1
> 
> 时间：2012-10-04T12:33:31.103
> 
> 标签：javascript, html, canvas, fabricjs, jsplumb

我正在使用一个 javascript 库（jsPlumb），它为我生成一个状态机，带有连接等。

我正在尝试向生成的图形添加放大和缩小功能。

生成的代码是这样的：

```
<div id="canvas">
    <canvas style="position: absolute; height: 4px; width: 4px; left: 907.816650390625px; top: 659.816650390625px; " class="_jsPlumb_endpoint  ui-draggable ui-droppable" height="4" width="4"></canvas>
     ... 
```

div 包装器中有很多画布元素。

所以我试图找到一个可以让我轻松缩放所有这些画布元素的库。

Fabric.js 听起来不错，但我没有找到任何方法来“加载”现有画布以将变换应用于画布本身，而只是将变换应用于画布内的元素。

有谁知道可以做到这一点的图书馆？或者，如果您曾经为 jsplumb 添加放大/缩小功能，我也会很高兴！我特别喜欢 Fabric.js 的解决方案，因为这个库提供了许多有用的其他功能。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T02:31:23.767

如果您正在寻找缩放整个画布，那么这可能会让您感兴趣......

[http://jsfiddle.net/Q3TMA/](http://jsfiddle.net/Q3TMA/)

```
canvas.setHeight(canvas.getHeight() * SCALE_FACTOR);
canvas.setWidth(canvas.getWidth() * SCALE_FACTOR); 
```

我没有创建小提琴..只是通过一些随机搜索找到的。希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-03T20:45:35.070

所以，这是我的解决方案

```
 function zoomin() {
        zoom += .1;
        zoomIt(1.1);
        $('#zoom_pct').text('%'+Math.round(zoom*100));
    }
    function zoomout() {
        zoom -= .1;
        zoomIt(.9); 
        $('#zoom_pct').text('%'+Math.round(zoom*100));
    }
    function zoomIt(factor) {
        canvas.setHeight(canvas.getHeight() * factor);
        canvas.setWidth(canvas.getWidth() * factor);
        // UPDATE: Scale Background images as well
        if (canvas.backgroundImage) {
            var bi = canvas.backgroundImage;
            bi.width = bi.width * factor; bi.height = bi.height * factor;
        }
// Do we need to scale overlayImage?
        var objects = canvas.getObjects();
        for (var i in objects) {
            var scaleX = objects[i].scaleX;
            var scaleY = objects[i].scaleY;
            var left = objects[i].left;
            var top = objects[i].top;

            var tempScaleX = scaleX * factor;
            var tempScaleY = scaleY * factor;
            var tempLeft = left * factor;
            var tempTop = top * factor;

            objects[i].scaleX = tempScaleX;
            objects[i].scaleY = tempScaleY;
            objects[i].left = tempLeft;
            objects[i].top = tempTop;

            objects[i].setCoords();
        }

        canvas.renderAll();        
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-03T11:50:13.910

我写了一个小库，它通过缩放和改变视口来扩展fabricjs：[https ://github.com/wojtek-krysiak/fabricjs-viewport](https://github.com/wojtek-krysiak/fabricjs-viewport)

示例：[http ://wojtek-krysiak.github.io/fabricjs-viewport/](http://wojtek-krysiak.github.io/fabricjs-viewport/)

# javascript - 获取数据表中页面的值？

> ID：12727402
> 
> 赞同：0
> 
> 时间：2012-10-04T12:33:40.480
> 
> 标签：javascript, jquery, datatables

有谁知道一种方法来获取用户在 Datatables 中所在页面的值？我试图在重新加载期间保留页面，但 fnStandingRedraw 和 bStateSave 对我不起作用，所以我正在手动尝试。

基本上，我希望能够存储变量，然后将用户恢复到该页面。问题是，我无法弄清楚首先要获得变量。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:26:12.693

所以我想出了如何解决这个问题。

如果您使用 fnPagingInfo (http://datatables.net/plug-ins/api#fnPagingInfo)，它将向您发送页码的值。

之后，要将它们发送到该页面，只需使用 fnPageChange 并将您想要的整数值传递给它（页面在 Datatables 中为 0），您应该一切顺利。此外，这不会在您的浏览器中放置任何 cookie！

希望这可以帮助其他有同样问题的人！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-10T18:29:46.100

在新的 API 中很简单：

```
table.page(); 
```

看这里：[https ://datatables.net/reference/api/page%28%29](https://datatables.net/reference/api/page%28%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-22T13:33:45.080

## ***fnDraw(假)***

比获取和设置页码要好。

# java - 需要对我的代码进行一些修改

> ID：12727406
> 
> 赞同：0
> 
> 时间：2012-10-04T12:33:48.480
> 
> 标签：java, sql, database, primary-key, sequence

这是应用程序的一小部分，用户可以在其中注册任意数量的员工，并且员工 ID 是通过使用 while 循环生成的......当我关闭应用程序并在第二轮再次开始填充数据时......员工 id **empid**重置为零。好吧，只要应用程序正在运行，我就会得到所需的 o/p，即为每个员工分配一个唯一的 ID。每当我启动应用程序时，我不希望**empid**的值从 0 开始。需要替代品和/或任何修改。此处提供代码

```
int empcount=0;
    public void actionPerformed(ActionEvent ae) {
            //---------------------If user wants to add data
            if(ae.getActionCommand()=="ADD EMPLOYEE") {
                System.out.println("ADDING");
        try{
            empcount=empcount+1;//----------------will assign employees with unique emp id
            //--------------------returns the text in name field to variables 
            String s_name=name.getText();
            int s_code=empcount;
            String s_dept=dept.getText();
            String s_ph=ph.getText();
            String s_bg=bg.getText();
            String s_add=add.getText();
            String s_date=date.getText();
            PreparedStatement st=null;
            Connection con = null;
            Class.forName("org.hsqldb.jdbcDriver");
            con = DriverManager.getConnection("jdbc:hsqldb:hsql://localhost/", "SA", "");
            st=con.prepareStatement("Insert into EmpReg (emp_name,emp_code,emp_ph,emp_bg,emp_add,emp_date,b_id) values(?,?,?,?,?,?,?)");
            //---------------------parameters and respective values, passed to the SQL statement
            st.setString(1,s_name);
            st.setInt(2,s_code);
            st.setString(3,s_ph);
            st.setString(4,s_bg);
            st.setString(5,s_add);
            st.setString(6,s_date);
            st.setString(7,s_dept);
            st.execute();
            JOptionPane.showMessageDialog(null,"Data is inserted into the database");
            JOptionPane.showMessageDialog(code, "employee code"+ empcount+"");
            con.close();
        }
            catch(Exception Ee){
            System.out.println(Ee);
            }
                }       
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:38:48.840

为什么不在数据库中创建一个字段，将其设置为 autoIncrementTrue 并且也可以将其用作 ID。您也可以将此字段用作员工编号。

您可以查看此链接以获取更多信息：[http ://www.w3schools.com/sql/sql_autoincrement.asp](http://www.w3schools.com/sql/sql_autoincrement.asp)

每次插入新员工时，生成的数字都会增加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:39:20.470

您可以使用 Oracle、MySQL、PostGre 等数据库，并使用序列或自动生成的 ID 列为您执行此操作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T12:44:35.710

执行此操作的标准 SQL 方法是使用“自动增量”主键 (emp_code)，对于[hsqldb](http://hsqldb.org/doc/guide/ch02.html) ，请参阅 IDENTITY。在 SQL INSERT 语句中省略主键。现在数据库生成一个唯一的新密钥。[执行后，您可以使用getGeneratedKeys](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#getGeneratedKeys%28%29)从语句中检索生成的主键。

这确保了两个并行进程不会弄乱主键。

# html - 如何在不使用图像的情况下使用 css 设置刻度线复选框的样式？

> ID：12727413
> 
> 赞同：0
> 
> 时间：2012-10-04T12:34:02.630
> 
> 标签：html, css, checkbox

有没有办法只使用 HTML 和 CSS3 而不使用图像来设置刻度线复选框的样式，就像在 Google 的登录页面中一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T00:08:43.633

您可以通过结合使用 HTML、CSS 和 jQuery 来完成此操作。请参阅我在此处编写的代码，以从`<a>`标签创建复选框并使用 CSS 设置样式。

我已经测试了这段代码，它在 Chrome、FF 和 IE 7-10 中运行良好。还没有测试过 Safari 或 Opera...

[http://jsfiddle.net/wdews/reXL6/](http://jsfiddle.net/wdews/reXL6/)

只需确保将`<a>`复选框标签嵌套在`<form>`标签中，为其提供 ID、“复选框”类和主题标签 HREF。在本质上：

```
 <form action="#" method="get">

    <a class="checkbox" id="myCheckbox" href="#"></a>

    -or-

    <a class="checkbox checked" id="myCheckbox" href="#"></a>

    </form> 
```

让我知道这对你有什么影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T20:35:18.297

这篇文章很旧，但这是我的建议：

将标签与您的复选框相关联，如下所示：

```
<input type="checkbox" value="1" id="c1" />
<label class="check" for="c1"></label> 
```

通过 CSS 隐藏您的复选框：

```
.checkboxes input[type=checkbox]{
    display:none
} 
```

根据需要设置标签样式。我创建了一个简单的 jsfiddle，它充分展示了如何使用个性化复选框。

[这](http://jsfiddle.net/KTADZ/1/)是jsfiddle

# ruby - 在 Ruby 中使用过多的堆栈内存

> ID：12727415
> 
> 赞同：-1
> 
> 时间：2012-10-04T12:34:08.637
> 
> 标签：ruby, stack-memory

> **可能重复：**
> [Ruby 中的堆栈级别太深，试图随机抽取一张卡片](https://stackoverflow.com/questions/12728186/stack-level-too-deep-in-ruby-trying-to-draw-a-random-card)

这是我制作的一个二十一点模拟器，用于检查在不同策略下一个人可以获胜的次数百分比。编码：

```
one_suit = [2,3,4,5,6,7,8,9,10,10,10,10,11]; #the value of the cards for blackjack
$full_deck = one_suit*4; #clubs, diamonds, hearts and spades
$deck = $full_deck; #start off the game with a full deck

class Player
  attr_accessor :ace_count
  attr_accessor :hand_value

  def initialize(ace_count,hand_value)
    @ace_count  = ace_count;
    @hand_value = hand_value;
  end

  def hit #instance method, vs. self.hit = class method
    choice_of_card = rand($deck.length); #choose a random card out of the deck
    drawn_card = $deck[choice_of_card]; #draw that random card from the deck
    if drawn_card != 0 #if there is a card there 
     $deck[choice_of_card] = 0; #remove that card from the deck by making the space blank
     if drawn_card == 11 #if you draw an ace
      self.ace_count += 1;
     end 
     self.hand_value += drawn_card ;
    else hit; #if there is no card at that space then redraw (recursion)
    end
  end

  def flip_aces
    while self.hand_value > 21 && ace_count > 0 #repeat until hand is below 21 or aces are all flipped
     self.ace_count -= 1 #ace gets flipped to a 1
     self.hand_value -= 10 #ace goes from 11 to 1
    end
  end

end

def oneplayergame
 $deck = $full_deck; #start a new game with a full deck 
 #generate the house and the player 
 house = Player.new(0,0);
 player1 = Player.new(0,0);
 #both the house and the player draw two cards
 house.hit; house.hit; player1.hit; player1.hit;
 while player1.hand_value <= 16 #PLAYER STRATEGY: ON WHAT CARD DOES THE PLAYER STAND
  player1.hit;
  if player1.hand_value > 21
   player1.flip_aces; 
  end
 end
 while house.hand_value <= player1.hand_value && player1.hand_value <=21 #HOUSE DRAWS CARDS IF UNDER PLAYER VALUE AND PLAYER IS NOT BUST
  house.hit;
  if house.hand_value > 21
   house.flip_aces; 
  end
 end
 #outcome
 #puts player1.hand_value;
 #puts house.hand_value;
 if player1.hand_value < house.hand_value
  return -1;
 elsif player1.hand_value > house.hand_value
  return 1;
 else return 0;
 end
end

#the simulation
wins = 0;
losses = 0;
rounds=5;

for i in 1..rounds
 if oneplayergame >0 
  wins +=1;
 elsif oneplayergame <0
  losses +=1
 end
end

print wins/(wins+losses).round(3)*100; 
```

但是，尝试运行超过 5 轮时，我遇到了以下错误：

> 错误：您的应用程序使用的堆栈内存超过了安全上限 2048K。

我想知道是否有人可以看到我在代码中的哪些地方非常低效地使用了内存。会不会是递归？但是，在每次模拟开始时，卡片会被放回套牌中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:24:08.473

我不懂游戏，但这是我对您的代码的重构。自己检查差异，想想我为什么要这样改变它。

```
$full_deck = [2, 3, 4, 5, 6, 7, 8, 9, 10, 10, 10, 10, 11] * 4

class Player
    attr_reader :ace_count, :hand_value
    def initialize(ace_count, hand_value)
        @ace_count, @hand_value = ace_count, hand_value
    end
    def hit
        drawn_card = $deck.shift
        @ace_count += 1 if drawn_card == 11
        @hand_value += drawn_card
    end
    def flip_aces
        while @hand_value > 21 and @ace_count > 0
            @ace_count -= 1
            @hand_value -= 10
        end
    end
end

def oneplayergame
    $deck = $full_deck.dup.shuffle!
    house, player1 = Player.new(0,0), Player.new(0,0)
    [house, house, player1, player1].each{|player| player.hit}
    while player1.hand_value <= 16
        player1.hit
        player1.flip_aces
    end
    while house.hand_value <= player1.hand_value and player1.hand_value <=21
        house.hit
        house.flip_aces
    end
    player1.hand_value <=> house.hand_value
end

wins = 0.0
losses = 0.0
rounds = 5

rounds.times do
    result = oneplayergame
    wins +=1 if result > 0 
    losses +=1 if result < 0
end
puts wins/(wins+losses).round(3)*100 
```

# html - 在图像周围添加透明边框

> ID：12727418
> 
> 赞同：0
> 
> 时间：2012-10-04T12:34:14.947
> 
> 标签：html, gd

我正在使用 phpThumb 覆盖几个图像，这利用了 GD 库。为了使此功能起作用，图像的大小必须相同。因此，当用户上传图片时，我必须验证尺寸。最后，为了让它正确显示，我需要在图像周围添加一个透明边框，以便底层图像大小相同。

所以我不能使用 CSS 方法。我不知道是否有其他 GD 调用可以做到这一点，但该网站目前已关闭（http://www.libgd.org/）。

你会推荐什么方法来添加透明边框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:23:43.733

CSS 中的边距就像一个透明边框。但是对于您的问题，有更好的方法：

首先，如果您使用的是 phpThumb，您可以自动调整图像大小，因此无需验证图像大小：

```
<?php

    require_once 'path/to/ThumbLib.inc.php';

    try
    {
         $thumb = PhpThumbFactory::create('/path/to/image.jpg');
    }
    catch (Exception $e)
    {
        // handle error here however you'd like
    }
    $thumb->resize(100, 100);
    $thumb->show();
?> 
```

您可以在[此处](https://github.com/masterexploder/PHPThumb/wiki/Basic-Usage)找到更多详细信息。

我不明白为什么你需要一个边框。但是，如果您想在图像上使用叠加层，则无需为图像添加边框以适合叠加层。如果您需要在图像上叠加，您可以执行以下操作：

```
 <div class="container">
   <img src="path to your image" />
   <span class="overlay"></span>
 </div> 
```

并应用一些风格：

```
.container{ // the same size as your image
  width:100px;
  height:100px;
}

.overlay{
   position: absolute;
   top:0;
   left: 0;
   width:100%;
   height:100%;
   background: ...
   ...
} 
```

# windows-phone-7 - 关于处理 Wp7 Phone App 中页面状态的疑问

> ID：12727419
> 
> 赞同：0
> 
> 时间：2012-10-04T12:34:16.750
> 
> 标签：windows-phone-7

我有应用程序，在其中我保存页面的状态并停用应用程序，一旦我进入前台应用程序，我将恢复数据。但是当我当时单击后退按钮时，我没有有上一页的对象实例。那么我该如何处理呢？

在 BackKey Press 上，我需要一些类似的东西

1）检查堆栈中的页面，删除前一页并创建页面的新实例或任何其他想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:20:23.370

当您的应用程序被停用并在您的应用程序恢复时重新加载时，您的数据应该被保存。听起来您没有正确恢复数据。

在这种情况下，使用类似于 MVVM 模型（数据与 UI 代码分离）的模型非常有用。查看 CodePlex 上的 MVVM 轻量级工具包。

[http://mvvmlight.codeplex.com/](http://mvvmlight.codeplex.com/)

这个问题太笼统了，无法给出比这更具体的答案。对不起。

尝试编写一些代码并发布有关您的代码的具体问题。

# python - 使用 API 将图像上传到 GDrive - Python

> ID：12727421
> 
> 赞同：1
> 
> 时间：2012-10-04T12:34:18.973
> 
> 标签：python, google-drive-api, google-api-python-client

我想将 aj 图片上传到 Google Drive。该图像位于我上传图像的脚本的同一目录中。我在 script.py 文件中有这段代码

```
#!/usr/bin/python

import httplib2
import pprint
from apiclient.discovery import build
from apiclient.http import MediaFileUpload
from oauth2client.client import OAuth2WebServerFlow

filename = 'image.jpg'
mimetype = 'image/jpg'

drive_service = build('drive', 'v2', developerKey='MY Simple API Access KEY')

# Insert a file
media_body = MediaFileUpload(filename, mimetype=mimetype, resumable=True)
body = {
    'title': 'This is an image',
    'description': 'This is a description',
    'mimeType': mimetype
}

file = drive_service.files().insert(body=body, media_body=media_body).execute()

pprint.pprint(file) 
```

运行**python script.py**时出现此错误：

```
Traceback (most recent call last):
  File "script.py", line 22, in <module>
    file = drive_service.files().insert(body=body, media_body=media_body).execute()
  File "/usr/local/lib/python2.7/dist-packages/oauth2client/util.py", line 120, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/apiclient/http.py", line 656, in execute
    _, body = self.next_chunk(http=http)
  File "/usr/local/lib/python2.7/dist-packages/oauth2client/util.py", line 120, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/apiclient/http.py", line 733, in next_chunk
    raise ResumableUploadError("Failed to retrieve starting URI.")
apiclient.errors.ResumableUploadError: Failed to retrieve starting URI. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:21:23.627

您没有正确执行授权，请查看 Google Drive SDK 文档中的快速入门以获取分步说明：

[https://developers.google.com/drive/quickstart](https://developers.google.com/drive/quickstart)

# html - 可以用 HTML5 指定滚动条图像吗？

> ID：12727422
> 
> 赞同：3
> 
> 时间：2012-10-04T12:34:21.657
> 
> 标签：html, css, scrollbar

我需要显示一个自定义滚动条。如果可能，我想避免使用 jQuery 插件。那么我可以用 HTML5 和 CSS3 做这样的事情吗？：

```
.myScrollableBox {
  width: 200px;
  height: 500px;

  /* Display scrollbar if content is bigger than the box */
  overflow: auto;

  /* This doesn't work, but can I do something similar? */
  scrollbar-image: url(/images/myscrollbar.png); 
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-04T12:49:36.613

如果浏览器确实支持工具栏*元素*的样式（= 基于 WebKit），这实际上是可能的。尽管在很多教程中都没有提到它（例如[这个很棒](http://css-tricks.com/custom-scrollbars-in-webkit/)的教程），但您可以只使用`background-url`属性来使用自定义图像而不是颜色。

例如，[在此页面中](http://css-tricks.com/examples/WebKitScrollbars/)，我已将（在 Chrome 开发人员工具中）样式更改为...

```
::-webkit-scrollbar-thumb {
  -webkit-border-radius: 10px;
  border-radius: 10px;
  background: url('http://cdn.css-tricks.com/wp-content/themes/CSS-Tricks-10/images/header-demos.jpg');
  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.5);
} 
```

...瞧，我有一些氰化物卷轴。)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T12:48:57.597

是的，您可以，但并非所有浏览器都支持它。Webkit（Chrome 等）使用 css 对此提供支持：

```
-webkit-scrollbar
-webkit-scrollbar-button
-webkit-scrollbar-track
-webkit-scrollbar-track-piece
-webkit-scrollbar-thumb
-webkit-scrollbar-corner
-webkit-resizer 
```

阅读更多：[https ://www.webkit.org/blog/363/styling-scrollbars/](https://www.webkit.org/blog/363/styling-scrollbars/)

在 Internet Explorer 中，您可以使用 css，如 *scrollbar-face-color*或*-ms-scrollbar-face-color*

```
-ms-scrollbar-3dlight-color
-ms-scrollbar-arrow-color
-ms-scrollbar-base-color
-ms-scrollbar-darkshadow-color
-ms-scrollbar-face-color
-ms-scrollbar-highlight-color
-ms-scrollbar-shadow-color
-ms-scrollbar-track-color 
```

阅读更多：http: [//msdn.microsoft.com/en-us/library/ie/hh772048%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ie/hh772048%28v=vs.85%29.aspx)

据我所知，目前其他浏览器不支持此功能。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-04T12:38:55.470

不，那是不可能的。浏览器使用的滚动条不是放置在 html 页面内的图像。它是浏览器逻辑的一部分。你不能简单地替换它。

# command-line - Image Magick：在一个命令中转换和合成

> ID：12727423
> 
> 赞同：0
> 
> 时间：2012-10-04T12:34:22.250
> 
> 标签：command-line, imagemagick, alpha, composite, channel

我目前正在开发一个自动化脚本来转换 imgaes 以在网站上使用。每个图像都有一个白色和黑色边框，并与准备好的 Alpha 通道图像组合在一起。完成所有操作后，与 Alpha 通道相结合的黑色边框（外边框）看起来就像一个阴影。

我有以下文件：

*   test.jpg（测试图像）
*   test.tga（阿尔法通道）

我分两步转换输入图像：（
`convert test.jpg -bordercolor #FFFFFF -border 15 -bordercolor #000000 -border 30 test.png`
将白色和黑色边框添加到图像并另存为'test.png'）
`composite -compose CopyOpacity test.tga test.png test2.png`
（从test.tga加入带有alpha通道的图像文件并保存为test2.png）

所以现在我的问题是：有没有办法将这两个步骤作为一个命令调用？我知道这`convert`也支持这些`-compose`选项，如果我从手册中得到了正确的，但我无法让它工作。如果我可以用一个命令编辑和加入带有 alpha 通道的图像，那将是最好的。（命令将从我的应用程序执行，我不想执行很多子流程）

也许有人知道这个问题的解决方案。提前致谢！

# php - 使用 php 获取最后一次提交的 zip

> ID：12727428
> 
> 赞同：3
> 
> 时间：2012-10-04T12:34:40.453
> 
> 标签：php, bitbucket, bitbucket-api

我发现下面的代码用于自动部署 php 项目。问题是“https://bitbucket.org/$username/$reponame/get/tip.zip”这个网址在bitbucket private git repo上的private git repo上不起作用：可能与身份验证有关（我还没有测试过这个公共仓库）我需要的是获取最后一次提交的 zip 文件并在我的项目中解压缩。我错过了什么？如何解决此问题

```
// your Bitbucket username
$username   = "edifreak";

// your Bitbucket repo name
$reponame   = "canvas-game-demo";

// extract to
$dest       = "./"; // leave ./ for relative destination

////////////////////////////////////////////////////////
// Let's get stuff done!

// set higher script timeout (for large repo's or slow servers)
set_time_limit(380);

// download the repo zip file
$repofile = file_get_contents("https://bitbucket.org/$username/$reponame/get/tip.zip");
file_put_contents('tip.zip', $repofile);
unset($repofile);

// unzip
$zip = new ZipArchive;
$res = $zip->open('tip.zip');
if ($res === TRUE) {
    $zip->extractTo('./');
    $zip->close();
} else {
    die('ZIP not supported on this server!');
}

// delete unnecessary .hg files
@unlink("$username-$reponame-tip/.hgignore");
@unlink("$username-$reponame-tip/.hg_archival.txt");

// function to delete all files in a directory recursively
function rmdir_recursively($dir) { 
    if (is_dir($dir)) { 
        $objects = scandir($dir); 
        foreach ($objects as $object) { 
            if ($object != "." && $object != "..") { 
                if (filetype($dir."/".$object) == "dir") rmdir_recursively($dir."/".$object); else unlink($dir."/".$object); 
            } 
        } 
        reset($objects); 
        rmdir($dir); 
    } 
} 

// function to recursively copy the files
function copy_recursively($src, $dest) {
    if (is_dir($src)) {
        if($dest != "./") rmdir_recursively($dest);
        @mkdir($dest);
        $files = scandir($src);
        foreach ($files as $file)
            if ($file != "." && $file != "..") copy_recursively("$src/$file", "$dest/$file"); 
        }
    else if (file_exists($src)) copy($src, $dest);
    rmdir_recursively($src);
}

// start copying the files from extracted repo and delete the old directory recursively
copy_recursively("$username-$reponame-tip", $dest);

// delete the repo zip file
unlink("tip.zip");

// Yep, we're done :)
echo "We're done!";

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T02:59:53.637

尝试将身份验证 ( `user:pass`) 放在 url 中：

```
$repofile = file_get_contents("https://user:pass@bitbucket.org/$username/$reponame/get/tip.zip"); 
```

身份验证必须是对存储库具有读取权限的用户。

# ajax - FLOW3中ajax调用的简单方法？

> ID：12727434
> 
> 赞同：0
> 
> 时间：2012-10-04T12:35:00.890
> 
> 标签：ajax, json, typo3-flow

实际上我正在做一个 FLOW3 项目，到目前为止，使用 FLOW3 真的很有趣，即使文档不是那么好。但是现在我遇到了问题：我希望前端中有一个 JavaScript/jQuery 函数来调用控制器操作，并且控制器返回一个 json。由于文档中没有太多关于此的内容，因此我尝试了[http://bytelude.de/2012/09/10/flow3-wie-erstelle-ich-eine-ajax-action-mit-json-ruckgabe中的方法/](http://bytelude.de/2012/09/10/flow3-wie-erstelle-ich-eine-ajax-action-mit-json-ruckgabe/)，但我总是从应用程序中得到一个没有定义视图的答案。我正在使用 FLOW3 1.1.0。也许有人可以给我一个提示，如何以简单的方式执行 ajax/json camm。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T01:47:10.560

也许你需要检查你的 Route.yaml，如果你将格式设置为 json，它会改变什么吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T20:24:39.463

FLOW3 现在使用 Mime-Types 而不是格式：[Json 视图部分](http://flow3.typo3.org/documentation/guide/partiii/modelviewcontroller.html#json-view)中的第二个示例应该可以解决问题。你必须设置

```
protected $supportedMediaTypes = array('application/json', 'text/html'); 
```

代替

```
protected $supportedFormats = array("html", "json"); 
```

现在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-08T13:10:36.447

如果您不想打扰 Json-Views 和 Mime-Types，您可以随时在控制器中执行此操作：

```
return json_encode($data); 
```

当您在 Controller-Action 中返回某些内容（字符串）时，永远不会查询视图，而是使用返回值。

# php - 如何删除水平滚动条 wordpress 管理编辑器

> ID：12727435
> 
> 赞同：1
> 
> 时间：2012-10-04T12:35:08.583
> 
> 标签：php, wordpress

这是屏幕截图：[http ://d.pr/i/QhkF](http://d.pr/i/QhkF)

我的主题是：[http ://www.templatemonster.com/wordpress-themes/37712.html](http://www.templatemonster.com/wordpress-themes/37712.html)

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:43:45.587

如果您想修复 wordpress 编辑器的内容区域，那么唯一的方法是将自定义 css 添加到默认模板中。

为此，请转到您的默认模板并将以下行添加到您的`functions.php`.

假设我已经为我的自定义 css 文件命名，例如`test.css`.

```
add_editor_style('test.css'); //in functions.php 
```

然后在你的主题目录中创建一个名为 test.css （或其他）的文件，并将这行代码放入其中：

```
html .mceContentBody {
        max-width: 400px !important; // whatever improbable size you want
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-10T14:19:02.307

当您个性化您的网站时，您需要转到网站样式 > 自定义 CSS 并添加此脚本：

```
body {
    overflow-x: hidden;
} 
```

它将启用您的水平滚动。

# php - 如何在 Pods Framework 2 中获取上传文件的 url？

> ID：12727438
> 
> 赞同：1
> 
> 时间：2012-10-04T12:35:12.677
> 
> 标签：php

我已经创建了一个名为**teams**的 pod ，在这个 pod 中我创建了一个用于上传图片的字段，名为**team_flag**

我可以在 while 循环中回显该行的标题，但不能回显文件（图像）链接。

例如，标题输出的这段代码运行良好：

```
<?php echo $teams->field( 'name' ); ?> 
```

但是，回显文件的链接不是：

```
<?php echo $teams->field( 'team_flag' ); ?> 
```

任何建议如何解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-10T20:18:28.067

.guid 不是一个可靠的属性。如果您将站点迁移到另一个域，您的所有 URL 都会中断。

你应该使用

```
wp_get_attachment_url( $teams->field( 'team_flag.ID' ) ) 
```

反而。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-09T11:37:51.117

为了澄清，@rclai89 是正确的，最好使用：

`wp_get_attachment_url( $teams->field( 'team_flag.ID' ) )`

对于一些新人来说，这可能有点令人困惑。该行的作用是获取从该字段给出的 ID 的 URL。

如果你做了一个错误日志：

`error_log(print_r($teams->field( 'team_flag.ID' ),1 ));`

你可以看到为什么使用 .guid 会给你正确的“url”。

但是在这种情况下最好让WP做艰苦的工作：

`<?php echo wp_get_attachment_url( $teams->field( 'team_flag.ID' ) ); ?>`

实际上会更有效率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T17:26:29.303

**解决方案**是在末尾添加**guid ：****`<?php echo $teams->field( 'team_flag.guid' ); ?>`

# mercurial - Mercurial 退出命令

> ID：12727440
> 
> 赞同：0
> 
> 时间：2012-10-04T12:35:27.173
> 
> 标签：mercurial

我试图运行以下命令，但它会产生错误。

> hg backout -r 2 -u Fraz --merge

我的存储库的日志如下：

[![](../Images/4d16eeb30683e278c2f198b9c9e6c088.png "由 imgur.com 主办")](https://imgur.com/aRx6R)

对于为什么我可以退出第二个变更集，我有点迷茫。当我运行上面的命令时，我得到了提交 gui，我添加了评论，保存，关闭。然后我得到一个合并错误，见下文。有人可以解释为什么会这样吗？

[![](../Images/6bdc3f9ccdced5f91f78e2870ca8ccc9.png "由 imgur.com 主办")](https://imgur.com/tie95)

**EDIT**似乎与我拥有的 .bak 文件有关。我刚刚通过记事本重新运行它，没有发生错误。另请注意，我对第一个建议答案的评论是错误的。它向存储库添加了一个新的变更集，专门撤消指定的变更集，因此为什么需要合并，因为你有两个头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:41:11.743

退出不是撤消 - 它基本上允许反向重新应用变更集，撤消它的更改。

现在，如果对要回退的变更集中更改的部分进行了更改，您将不得不处理您所看到的合并，因为无法自动应用回退（要回退的部分会发生什么情况但自从变更集的提交被撤销后发生了变化？）。

解决冲突后，您应该能够成功完成操作。

# c++ - 如何在 OpenCV 中读取 XML 字符串？

> ID：12727444
> 
> 赞同：13
> 
> 时间：2012-10-04T12:35:39.193
> 
> 标签：c++, xml, opencv

我知道如何将`cv::Mat`实例加载/保存到 XML 文件中（参见[这个问题](https://stackoverflow.com/questions/2621768/how-can-i-save-and-read-from-xml-the-new-c-style-matrix-objects-in-opencv)）。

但我真正需要的是解析包含 XML 的`std::string`（或`char *`），并获取`cv::Mat`. 假设我从数据库中而不是从文件中获取 XML。

那可能吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-04T14:44:30.670

您可以从 OpenCV 2.4.1 开始执行此操作。

这是[发行说明](http://code.opencv.org/projects/opencv/wiki/ChangeLog#241)中的​​代码示例：

```
//==== storing data ====
FileStorage fs(".xml", FileStorage::WRITE + FileStorage::MEMORY);
fs << "date" << date_string << "mymatrix" << mymatrix;
string buf = fs.releaseAndGetString();

//==== reading it back ====
FileStorage fs(buf, FileStorage::READ + FileStorage::MEMORY);
fs["date"] >> date_string;
fs["mymatrix"] >> mymatrix; 
```

# solr - 从 solr 索引中删除索引数据

> ID：12727445
> 
> 赞同：1
> 
> 时间：2012-10-04T12:35:53.557
> 
> 标签：solr, indexing

如何从 solr 索引文件中删除特定数据。例如索引

没有 | 排名 | 领域 | 正文 1 | 95 | 内容 | 数据 2 | 80 | 内容 | hrkg

（通过卢克 jar 文件查看）

所以我只需要从索引的“内容”字段中删除“hrkg”条目，而不是所有文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T14:22:37.923

很难理解你，但是：

1.  如果您想删除一个字段值，只需使用相同的文档 ID 再次插入 SOLR，但这次将字段值留空（或放入您想要的新值）。
2.  按 id 删除此文档`<delete><query>id:[DOCUMENT ID TO DELETE]</query></delete>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T09:19:19.180

好吧...我可以评论，因为我的观点还不够...但是如果您使用的是 solr 4.0（alpha 或 beta），您可以简单地对文档的特定字段运行更新查询..`curl 'localhost:8983/solr/<yourcore>/update?commit=true' -H 'Content-type:application/json' -d '[{"id":"blabla","<fieldtochange>":{"set":"new value"}}]'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T10:17:35.330

一旦您索引了一些数据并将其放入包含您不想删除的数据的字段中，就没有太多选择了。

实际上我看不到其他方法，只能从您的配置中删除 'hrkg' 并**重新索引受影响的文档**。

删除（隐藏）所有文档的整个文件要容易得多。

# javascript - .Next 消除使用 JSONP 发送数据的限制

> ID：12727453
> 
> 赞同：0
> 
> 时间：2012-10-04T12:36:13.817
> 
> 标签：javascript, json

我们可以取消使用 JSONP 发送数据的限制吗？下面是我的代码。我要做的是一次将 3000 个字符（实际上是转换为 base64 数据的图像）传递给服务（serviceCall.ashx）。由于我的数据多达 30,000-40,000 个字符，我将其分成数据包（每个 3000 个）然后发送。有什么办法可以一次性发送这些完整的数据。切换到 JSONP 的原因是避免在 IE 上弹出“此页面正在访问的信息不是......”。我知道 JSONP 使用 GET 方法显然会存在数据限制，但有什么办法可以解决这个问题。

```
$.ajax({
    type: "GET",
    url:  'http://sys108/restnew1/serviceCall.ashx',
    dataType: "jsonp",
    contentType: "application/json; charset=utf-8",
    async: false,
    data: { 
        datachunk: imgdatachunk,
        packetlen: imgdatachunk.length, 
        imagekey: imageid 
    },
    success: function (data) {},
    error: function (jqXHR, textStatus, errorThrown) {
        if (window.console) 
            console.log("Error... " + textStatus + "        " + errorThrown);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:00:04.027

不，不可能以或多或少可靠的方式发送该长度的 GET 请求：实际上，这取决于 Web 服务器的设置方式以及与之合作的人使用的客户端（= 浏览器）你的申请。

所以我建议寻找替代（JSONP）解决方案 - 例如[CORS](http://enable-cors.org/)。

# c - 代码中的 dbx WUA 错误跟踪

> ID：12727462
> 
> 赞同：0
> 
> 时间：2012-10-04T12:36:35.410
> 
> 标签：c, memory-leaks, oracle11g, dbx

我正在调试内存泄漏的程序。启用“check -memuse”时出现以下错误：

```
Write to unallocated (wua) on thread 1:
Attempting to write 8 bytes at address 0xffffffff79f001d0
t@1 (l@1) stopped in _private_pthread_atfork at 0xffffffff5bd4ce28 
```

当我发出 Where 命令时：

```
current thread: t@1
=>[1] _private_pthread_atfork(0xffffffff64d565ac, 0xffffffff64d5660c, 0xffffffff64d565dc, 0xffffffff79f001c0, 0xffffffff64eb6a50, 0xffffffff5bf4a360), at 0xffffffff5bd4ce28
  [2] _init(0x0, 0x0, 0xffffffff7f73cdf8, 0xffffffff7f617c5c, 0xffffffff5bdd6908, 0xffffffff6a700200), at 0xffffffff64d9e2d8
  [3] call_init(0xffffffff79d02670, 0x1, 0x10020204, 0xffffffff64d9e2d0, 0x80, 0xffffffff77e01d18), at 0xffffffff7f617c64
  [4] setup(0x21441, 0xffffffff7f73c278, 0xffffffff7f73c4a4, 0x25000, 0x0, 0x0), at 0xffffffff7f616f50
  [5] _setup(0xffffffff7f638f8c, 0x1401c0, 0x0, 0xffffffff7ffff578, 0x2, 0xffffffffffffffff), at 0xffffffff7f6297f4
  [6] _rt_boot(0x0, 0x0, 0x0, 0x0, 0x0, 0x0), at 0xffffffff7f608028 
```

我可以追溯到代码中发生此错误的位置吗？您能否提供一些帮助以追溯到源头？

> ## 更多信息

这是一个 proC 过程。在 10g 上编译时，它工作正常。提供的二进制文件正在加载 Oracle 10g 库。但是当用 11g 编译时会出现错误。在调试过程中，我在以下代码中发现了 10g 内存泄漏：

```
EXEC SQL CONNECT :Userid;
oraca.orastxtf = ORASTFANY;

(dbx) showleaks
Checking for memory leaks...

Actual leaks report    (actual leaks:            1  total size:       1112 bytes)

  Total     Num of  Leaked     Allocation call stack
  Size      Blocks  Block
                    Address
==========  ====== =========== =======================================
      1112       1 0x1003231c8  _nss_XbyY_buf_alloc < get_pwbuf < _getpwuid < sigunmu < kpueaudi < kpugskey < kpu8lgn < kpuauthxa

Possible leaks report  (possible leaks:          0  total size:          0 bytes) 
```

在 11g 调试相同代码期间，我得到以下内存泄漏：

```
(dbx) showleaks
Checking for memory leaks...

Actual leaks report    (actual leaks:            4  total size:      25816 bytes)

  Total     Num of  Leaked     Allocation call stack
  Size      Blocks  Block
                    Address
==========  ====== =========== =======================================
     16384       1 0x1002c9b88  calloc < slts_tls_getaddr < sltsqKeyAdd < sltskys < dbgc_tls_ini < dbgc_find_diagctx < kpeDbgInitDBGC < nlstddt_do_alter_trace
      8280       1 0x1002c7b08  calloc < slts_tls_getaddr < sltsqKeyAdd < sltskys < dbgc_tls_ini < dbgc_find_diagctx < kpeDbgInitDBGC < nlstddt_do_alter_trace
      1112       1 0x10038b7e8  _nss_XbyY_buf_alloc < get_pwbuf < _getpwuid < sigunmu < siugunmu < kpugskey < kpu8lgn < kpuauthxa
        40       1 0x10028f658  sltsqKeyAdd < sltskys < dbgc_tls_ini < dbgc_find_diagctx < kpeDbgInitDBGC < nlstddt_do_alter_trace < nlstdggo < nlstdgg 
```

任何人都可以有这样的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:54:14.607

WUA 错误是虚假的。有一个针对 RTC 的错误：7014457 RTC 在 _pthread_atfork 中报告了误报

此错误已在 dbx7.9 中修复。Oracle Studio 有一个新的代码分析器工具，可以检测内存泄漏错误以及其他静态和动态问题。[您可以在https://forums.oracle.com/forums/forum.jspa?forumID=894](https://forums.oracle.com/forums/forum.jspa?forumID=894)中找到有关这些工具的更多讨论

# php - phpseclib - 无法连接到思科交换机

> ID：12727467
> 
> 赞同：1
> 
> 时间：2012-10-04T12:36:50.447
> 
> 标签：php, cisco, phpseclib

我正在尝试使用 phpseclib 连接到 cisco SF308 交换机。我正在使用这个库成功连接到一些 HP 交换机，但由于某种原因，它无法与我的 cisco 一起使用。这是代码：

```
 set_include_path(get_include_path() . PATH_SEPARATOR . '/var/www/phpseclib');
 include('/var/www/phpseclib/Net/SSH2.php');
 define('NET_SSH2_LOGGING', NET_SSH2_LOG_COMPLEX); //add near include lines
 $cisco = new Net_SSH2('10.10.10.10');

 if (!$cisco->login('username', 'password')) {
     exit('Login Failed');
 }

 echo $cisco->write('\n');

 echo $cisco->write('help');
 echo $cisco->read('/([0-9A-Z\-])*(#)(\s*)/i', NET_SSH2_READ_REGEX);  
 echo $cisco->data;
 echo $cisco->getLog();
 echo $cisco->disconnect(); 
```

它总是因登录失败错误消息而死。

我已经尝试在 NET_SSH2 库本身中添加一些调试语句，并且它以错误号 51 终止，它被定义为“NET_SSH2_MSG_USERAUTH_FAILURE”。

hp 交换机和这个 cisco 之间的不同之处在于，当手动连接时，hp 足够“智能”，可以从初始 ssh 命令中获取用户名。例如，如果您要在命令提示符下执行此操作：

```
 ssh username@10.10.10.10 
```

然后回车，它会选择“用户名”作为用户名，它只会提示你输入密码。使用 cisco 交换机（型号为 SF302-08），它仍然提示输入用户名和密码。一旦我第二次提供用户名，然后输入密码，我就可以连接到交换机。

我不确定这是否是导致问题的原因，但这两个开关之间明显不同。我正在尝试为 cisco 查找一些文档，以查看是否有任何方法可以更改/使其在初始连接请求中获取用户名。但如果您有任何其他建议，请告诉我！我全是耳朵。

谢谢。

**编辑 1**

我打开了复杂的日志记录并获得了失败的全部细节，以防万一这有帮助。这是我的最新代码：

```
 set_include_path(get_include_path() . PATH_SEPARATOR . '/var/www/phpseclib');
 include('Net/SSH2.php');
 define('NET_SSH2_LOGGING', true); //turn on logging.

 $ssh = new Net_SSH2('10.10.10.10'); //starting the ssh connection to localhost
 if (!$ssh->login('username', 'password')) { //if you can't log on...
    echo('Login Failed');
    echo 'Error message is: <br>';
    $log = $ssh->getLog(NET_SSH2_LOG_COMPLEX);
    foreach ($log as $logitem)  {
             echo $logitem.'<br>';
     } 
```

这将返回以下输出：

```
 Login FailedError message is:
 <-
 ->
 <- NET_SSH2_MSG_KEXINIT (0.0118s)
 -> NET_SSH2_MSG_KEXINIT (0s)
 -> NET_SSH2_MSG_KEXDH_INIT (0s)
 <- NET_SSH2_MSG_KEXDH_REPLY (0.7912s)
 -> NET_SSH2_MSG_NEWKEYS (0s)
 <- NET_SSH2_MSG_NEWKEYS (0s)
 -> NET_SSH2_MSG_SERVICE_REQUEST (0s)
 <- NET_SSH2_MSG_SERVICE_ACCEPT (0.4927s)
 -> NET_SSH2_MSG_USERAUTH_REQUEST (0s)
 <- NET_SSH2_MSG_USERAUTH_FAILURE (0.0059s) 
```

所以它正在联系交换机，但正如我在最初的帖子中提到的那样，它在尝试验证用户名/密码时失败了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:00:21.483

经过一番研究，这是我们问题的解决方案。其他人可能以不同的方式解决了问题，但这似乎对我们有用。

我们注意到以下内容：

1.  由于 ssh 实现有限，流行的 ssh 库（如 phpseclib）在此开关上失败。

2.  php 的 ssh2_auth_none 函数在此开关上返回 TRUE。

这是什么意思？

似乎 ssh 协议有一种身份验证方法，称为“无”。这是不安全的，并且通常在大多数交换机上被禁用。ssh2_auth_none() 函数尝试在没有任何身份验证的情况下进行连接，如果失败，它会返回服务器接受的身份验证方法列表。在 SF300.. 的情况下，它通过并且不返回任何身份验证方法。

1.  已知的 CLI 和 SSH 限制

尽管他们无法为我们提供解决方案，但 CISCO 技术支持确实明确指出，小型企业级交换机具有有限的 CLI 和 SSH 的精简版本，因此您不能将其视为具有一个完整的 ssh 实现。

如果有帮助，这里有一小段代码展示了如何连接到这些类型的设备：

```
 <?php

      $username = 'myusername';

      $password = 'mypassword';

      $connection = ssh2_connect('123.123.123.123', 22);

      //$authentication_methods = ssh2_auth_none($connection, 'user');

      $stdio_stream = ssh2_shell($connection);

      fwrite($stdio_stream,$username."\n");

      sleep(1);

      fwrite($stdio_stream,$password."\n");

      sleep(1);

      echo "Results: " . stream_get_contents($stdio_stream); 
      echo 'sending show bonjour command:<br>';
     fwrite($stdio_stream, "show bonjour".PHP_EOL); //you can use \n instead of PHP_EOL but PHP_EOL is recommended.

     sleep(1);

     echo "<br>Results: " . stream_get_contents($stdio_stream); 

    ?> 
```

希望这可以帮助任何试图以编程方式连接到这些类型设备的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T23:35:46.087

我不熟悉您使用的库，但我不得不使用 Perl 使用 Cisco 路由器编写一些脚本。为此，我使用了 Net::Telnet::Cisco 模块，该模块处理与 Cisco 设备交互的一些特性。当我连接到 Cisco Nexus 设备而不是普通的 IOS 设备时，它就坏了。我必须通过更改模块用于识别指示 telnet 会话正在等待用户输入的字符串的正则表达式来修复它。我能够看到使用 Wireshark 从 IOS 设备和 Nexus 设备发送的确切字符串。我怀疑你需要类似的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T12:56:37.653

我会检查您使用的 IP 地址是否正确，并检查用户名和密码是否有权连接

# android - Android 上的 MediaPlayer 启动和停止

> ID：12727472
> 
> 赞同：3
> 
> 时间：2012-10-04T12:37:09.660
> 
> 标签：android, android-mediaplayer

我有一个 ListView，当我点击一行时，我会播放声音。

如果正在播放声音并且我单击另一行，则第一个应该停止，第二个应该开始。

如果我不释放 MediaPlayer，应用程序就会崩溃，但这会延迟下一个声音的执行。

我做错了什么？这是我的代码：

```
public void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);

        if(!isPlaying){
            mPlayer = MediaPlayer.create(this,soundid[position]);
            mPlayer.start();
            isPlaying = true; // reproducir es true

        }else{

            isPlaying = false;
            mPlayer.stop();
            mPlayer.reset();
            mPlayer = MediaPlayer.create(this,soundid[position]);
            mPlayer.start();
            isPlaying = true;

        }

        mPlayer.setOnCompletionListener(new OnCompletionListener() {

            public void onCompletion(MediaPlayer mPlayer) {
                mPlayer.release();
                isPlaying = false;
            }

        });
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T13:04:00.253

在这种类型的实现中，您正在创建多个媒体播放器实例，而不释放它们可能会导致异常[（请参阅此处）](http://developer.android.com/reference/android/media/MediaPlayer.html#create%28android.content.Context,%20android.net.Uri%29)。我建议您重新使用已经存在的媒体播放器实例。你可以通过做这样的事情来实现你的目标。

```
public void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);

    if(!isPlaying){
        mPlayer = new MediaPlayer();
        mPlayer.setDataSource(soundid[position]);
        mPlayer.prepare();
        mPlayer.start();
        isPlaying = true;

    }else{

        isPlaying = false;
        mPlayer.stop();
        mPlayer.reset();
        mPlayer.setDataSource(soundid[position]);
        mPlayer.prepare();
        mPlayer.start();
        isPlaying = true;

    }

    mPlayer.setOnCompletionListener(new OnCompletionListener() {

        public void onCompletion(MediaPlayer mPlayer) {
            mPlayer.release();
            isPlaying = false;
        }

    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:02:13.657

为什么要再次创建 MediaPlayer？

您可以使用`'setDataSource'`. 见这里：[android 开发者网站：MediaPlayer](http://developer.android.com/reference/android/media/MediaPlayer.html#setDataSource%28android.content.Context,%20android.net.Uri%29)

[这里的例子](http://developer.android.com/reference/android/media/MediaPlayer.html#setDataSource%28android.content.Context,%20android.net.Uri%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-08T19:47:01.807

如果您在播放完成后不需要执行任何操作；您可以考虑使用 SoundPool：http: [//developer.android.com/reference/android/media/SoundPool.html](http://developer.android.com/reference/android/media/SoundPool.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-03T12:26:33.360

更清洁的实现，

```
public class PlayMedia{
private MediaPlayer mMediaPlayer = new MediaPlayer();
Context context;
boolean isPlaying;

PlayMedia(Context c){
    mMediaPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {

        public void onCompletion(MediaPlayer mp) {
            mp.release();
            isPlaying = false;
        }
    });
    this.context = c;
}

public boolean stopResetAndPlay(int ResID){
    if(isPlaying){
         isPlaying = false;
         mMediaPlayer.stop();
         mMediaPlayer.reset();
        try {
            AssetFileDescriptor afd = context.getResources().openRawResourceFd(ResID);
            if (afd == null) return false;
            mMediaPlayer.setDataSource(afd);
            afd.close();
            mMediaPlayer.prepare();
        }catch(IOException io){
            Log.i("Playing ", io.getMessage());
            return false;
        }
        mMediaPlayer.start();
        isPlaying = true;
    }else{
        try {
            this.mMediaPlayer = new MediaPlayer();
            AssetFileDescriptor afd = context.getResources().openRawResourceFd(ResID);
            if (afd == null) return false;
            mMediaPlayer.setDataSource(afd);
            mMediaPlayer.prepare();
            mMediaPlayer.start();
            isPlaying = true;
        }catch(IOException io){
            Log.i("Playing ", io.getMessage());
            return false;
        }
    }
    return true;
}} 
```

这就是您可以在任何活动中使用该类的方式

```
PlayMedia mPlayer = new PlayMedia(context);
int resID = context.getResources().getIdentifier("identifer_string", "raw", context.getPackageName());
mPlayer.stopResetAndPlay(resID); 
```

# jquery-mobile - sencha touch 是比 jquery mobile 或 Jqtouch 更好的选择吗？

> ID：12727473
> 
> 赞同：0
> 
> 时间：2012-10-04T12:37:11.913
> 
> 标签：jquery-mobile, sencha-touch, jqtouch

由于有许多选项可用于开发触摸移动网站。那么 Sencha Touch 是比 JQuery mobile 或 JQtouch 更好的选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T13:23:55.043

此图表可能对您有所帮助。

[移动框架对比图](http://www.markus-falk.com/mobile-frameworks-comparison-chart/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-27T07:01:55.877

Sencha Touch 和 Jquery Mobile 各有各的好处。简要说明差异：

1.  Sencha 要求开发人员了解 Javascript，而 Jquery 移动开发人员应了解 html5、css3。

2.  Sencha Touch 提供框架来构建适用于 iOS、Android、BlackBerry、Windows Phone 的应用程序。

3.  Sencha 提供原生外观和感觉，建议在我们构建混合移动应用程序时使用。

4.  Sencha 图形性能在移动设备上比 JQuery Mobile 更快、更流畅

5.  JQuery 易于开发。

6.  JQuery Mobile 适用于各种浏览器。

7.  JQuery Mobile 大量 3rd 方扩展——正如您对 jQuery 社区所期望的那样

请参阅它已解释的此网址。 [http://www.gajotres.net/sencha-touch-vs-jquery-mobile/](http://www.gajotres.net/sencha-touch-vs-jquery-mobile/)

问候， 克莱奥

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T12:44:36.823

总而言之，使用 Sencha Touch 的主要原因是：

*   它提供了更多图标或内置地图。

*   它支持更 MVC 风格的应用程序设计。

您应该检查这些非常有趣的链接：

*   [http://jquerybyexample.blogspot.com/2012/02/jqtouch-vs-sencha-touch-vs-jquery.html](http://jquerybyexample.blogspot.com/2012/02/jqtouch-vs-sencha-touch-vs-jquery.html)

*   [http://jquerybyexample.blogspot.com/2012/02/jqtouch-vs-jquery-mobile.html](http://jquerybyexample.blogspot.com/2012/02/jqtouch-vs-jquery-mobile.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T19:17:25.177

取决于您的特定要求，即您正在构建什么样的应用程序。如果你比较 sencha touch 和 jqmobile，那么两者都有各自的优缺点。对于更具图形吸引力的复杂交互式应用程序，我会使用 sencha，但对于需要简单表单和页面并且需要非常快速构建的小型应用程序，我会使用 jquerymobile。

看一下这个：

[http://css.dzone.com/articles/sencha-touch-v-jquery-mobile](http://css.dzone.com/articles/sencha-touch-v-jquery-mobile)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-24T15:20:33.880

他们都有自己的优点和缺点。如果你想要更好的 UI，那么你必须使用 Sencha，但为了更好的功能，JQuery 更好。您可以[在此处](http://www.solidstategroup.com/blog/building-for-mobile-jquery-mobile-and-sencha-touch-framework-comparison/%22Here%22)查看更多详细信息。

# php - 单独的保存操作 jQuery 和 PHP

> ID：12727478
> 
> 赞同：1
> 
> 时间：2012-10-04T12:37:26.017
> 
> 标签：php, jquery

我有一个表格，用于将学生的出勤情况保存到 MySQL 数据库中。

从数据库中读取学生的数据并创建数据输入表。

该表格旨在存储每个学生的代码、姓名、在场状态以及缺勤情况下的简短描述。

我设计了数据输入表单，但似乎需要一些关于保存操作的线索，以便单击每个保存按钮，将适当的数据存储在数据库的考勤表中。![表格截图](../Images/c7b5a592c3b10c0cc772f28de95120e8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:46:34.653

如果你不关心旧的 IE（它的支持有错误`<button>`，我认为版本 7 修复了这些错误）然后（确保你处于标准模式）：

```
<button type="submit" name="row_id" value="insert row id here">Save</button>

$row_id = $_POST['row_id']; 
```

如果您确实关心旧的 IE：

```
<input type="submit" name="row_id_row_id_here" value="Save"> 
```

并遍历键以`$_POST`查找与 regex 匹配的键`/^row_id_(.*)/`。

# jquery - 如何取消 pjax 事件？

> ID：12727479
> 
> 赞同：2
> 
> 时间：2012-10-04T12:37:27.763
> 
> 标签：jquery, jquery-events, pjax, event-propagation

我以这种方式使用 pjax（来自[https://github.com/defunkt/jquery-pjax](https://github.com/defunkt/jquery-pjax)）：

> 二。略显突兀，传递一个容器并绑定一个错误处理程序：

```
<a href='/explore' class='js-pjax'>Explore</a>

$('#main').pjax('.js-pjax').on('pjax:error', function(e, xhr, err) {
  $('.error').text('Something went wrong: ' + err)
}) 
```

在某些情况下，我的链接可能有一个类应该阻止链接通过`<a href='/explore' class='js-pjax no-link'>Explore</a>`

以及阻止它的代码：

```
$('body').on('click', 'a.no-link', function() {
    return false;
}); 
```

我的问题是：在这种情况下，返回 false/preventDefault 不会阻止 pjax 触发。

如果'js-pjax'链接也有类（'no-link'），有什么建议如何停止pjax？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T02:37:43.563

`.no-link`您可以通过修改初始 PJAX 调用来阻止 PJAX 跟随元素。

```
$('#main').pjax('.js-pjax:not(.no-link)').on('pjax:error', function(e, xhr, err) {
    $('.error').text('Something went wrong: ' + err)
}) 
```

# logging - 使用 MEF 时 CallerMemberNameAttribute 为空？

> ID：12727485
> 
> 赞同：0
> 
> 时间：2012-10-04T12:37:47.143
> 
> 标签：logging, mef, .net-4.5

我正在试验这些新的 .NET 4.5 属性，这些属性有望使日志记录更容易一些。运行时应负责提供值，例如 [CallerMemberNameAttribute] 映射到应包含调用者方法名称的字符串参数。

但是，我发现 MEF 似乎在干扰。

考虑以下接口：

```
[InheritedExport]
public interface ILogger
{
    void Write(string message, string methodName = "", string srcFilePath = "", int srcLineNumber = 0, params object[] args);
} 
```

以及以下实现：

```
public sealed class Logger : ILogger
{
    [MethodImpl(MethodImplOptions.NoInlining)]
    public void Write(string message, [CallerMemberName] string methodName = "", [CallerFilePath] string srcFilePath = "", [CallerLineNumber] int srcLineNumber = 0, params object[] args)
    {
        // do some logging
    }
} 
```

如果将此 ILogger 导入应用程序的组合容器并使用 ILogger.Write 方法，则运行时应填写标有 [CallerX] 属性的可选参数。

但是，这不会发生，所有值都设置为其默认值。

有任何想法吗？或者这是一个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:40:33.230

我最终发现了问题所在：我需要将属性放在接口上，而不是（必须）放在实现类上。

如下图调整界面即可解决。

```
[InheritedExport]
public interface ILogger
{
    void Write(string message, [CallerMemberName] string methodName = "", [CallerFilePath] string srcFilePath = "", [CallerLineNumber] int srcLineNumber = 0, params object[] args);
} 
```

# ruby-on-rails - 未定义的方法“og_action！” 用于 facebook 开放图 (ROR)

> ID：12727486
> 
> 赞同：0
> 
> 时间：2012-10-04T12:37:52.693
> 
> 标签：ruby-on-rails, facebook-opengraph, fb-graph

我正在开发小型 Web 应用程序，我想在其中实现 facebook 打开图形操作。所以我的代码看起来像

```
begin
      @auth_fb = user_token
      @app = ENV['FB_KEY']
      me = @auth_fb.token

      action = me.og_action!(
        "og_follows",
        :profile => 'http://samples.ogp.me/390580850990722'
      ) 

    rescue Exception => exc
   # logger.error "Failed to publish review #{review.id} to facebook #{user.facebook_auth}"
     logger.error "Facebook error msg: #{exc.message}"
end 
```

它给了我 Error **Facebook error msg: undefined method `og_action!' for #**如果我使用 curl 命令执行此操作，它工作正常。我正在使用 fb_graph (2.4.20) 并且还阅读了[这个](https://stackoverflow.com/questions/9694334/rails-3-and-publishing-actions-with-fb-graph-gem)。有没有办法解决这个问题

需要帮助...谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T02:37:29.190

看看这个，你没有正确设置“我”。

[https://github.com/nov/fb_graph/wiki/OpenGraph](https://github.com/nov/fb_graph/wiki/OpenGraph)

# sqlite - 如何多次循环 SQLite 步骤结果

> ID：12727488
> 
> 赞同：0
> 
> 时间：2012-10-04T12:37:58.963
> 
> 标签：sqlite

有什么方法可以多次循环遍历相同的 SQLite 步骤结果。

场景： 1\. 使用 step stmt 执行查询 2\. 遍历结果并进行一些计算 3\. 遍历相同的结果并根据值 (2) 进行计算并打印结果。

有人可以建议如何做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:05:09.920

SQLite 不会保存查询的整个结果；当您单步执行结果时，会动态计算行。

如果您想再次读取结果行，则必须重新执行查询（请参阅[`sqlite3_reset`](http://www.sqlite.org/c3ref/reset.html)和[`sqlite3_step`](http://www.sqlite.org/c3ref/step.html)）。

# c# - 以编程方式设置 TextBlock 前景色

> ID：12727491
> 
> 赞同：69
> 
> 时间：2012-10-04T12:38:06.037
> 
> 标签：c#, windows-phone-7, colors, textblock

有没有办法在 Windows Phone 7 中做到这一点？

我可以在我的 C# 代码中引用 TextBlock，但我不知道如何设置它的前景色。

```
myTextBlock.Foreground = 
//not a clue... 
```

谢谢

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-10-04T12:53:02.420

```
 textBlock.Foreground = new SolidColorBrush(Colors.White); 
```

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2012-10-04T12:46:11.707

前景需要一个画笔，所以你可以使用

```
textBlock.Foreground = Brushes.Navy; 
```

如果你想使用**RGB**或**ARGB**的颜色，那么

```
textBlock.Foreground = new System.Windows.Media.SolidColorBrush(System.Windows.Media.Color.FromArgb(100, 255, 125, 35)); 
```

或者

```
textBlock.Foreground = new System.Windows.Media.SolidColorBrush(Colors.Navy); 
```

从**十六进制获取颜色**

```
textBlock.Foreground = new System.Windows.Media.SolidColorBrush((Color)ColorConverter.ConvertFromString("#FFDFD991")); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-10-04T12:42:28.027

您可以使用[`Brushes.White`](http://msdn.microsoft.com/en-us/library/system.windows.media.brushes.white.aspx)设置前景。

```
myTextBlock.Foreground = Brushes.White; 
```

该类[`Brushes`](http://msdn.microsoft.com/en-us/library/system.windows.media.brushes.aspx)位于[`System.Windows.Media`](http://msdn.microsoft.com/en-us/library/system.windows.media.aspx)命名空间中。

或者，您可以在光标位于未知类名上时按`Ctrl`+以自动添加指令。`.``using`

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-12-24T10:31:06.697

从十六进制获取颜色。

```
using System.Windows.Media;

Color color = (Color)ColorConverter.ConvertFromString("#FFDFD991"); 
```

然后设置前景

```
textBlock.Foreground = new System.Windows.Media.SolidColorBrush(color); 
```

# html - 如何在忽略显示的情况下获得圆形外观：无

> ID：12727492
> 
> 赞同：1
> 
> 时间：2012-10-04T12:38:09.497
> 
> 标签：html, email, outlook

> **可能重复：**
> [显示：无在 Outlook 2007 上不起作用](https://stackoverflow.com/questions/2719216/displaynone-doesnt-work-on-outlook-2007)

嗨，我正在创建一个 html 电子邮件，我想根据屏幕尺寸显示和隐藏某些元素，例如一个用于桌面的按钮一个用于移动设备的按钮。现在它适用于除 Outlook 2007 及更高版本之外的所有内容，其中显示了两个图像。有谁知道为什么？和/或如何解决这个问题？

# c++ - 虽然循环不会在 C++ 中中断

> ID：12727495
> 
> 赞同：0
> 
> 时间：2012-10-04T12:38:25.510
> 
> 标签：c++, while-loop

嘿，我正在用 C++ 制作游戏。这是大学的工作，简要说明不使用头文件，游戏必须是基本的。问题是，游戏结束后它仍然要求选择。我试图打破，退出，但仍然没有快乐。程序不会退出。谁能帮我这个？

这是我的代码：主要

```
int main()          //  The main function is set to int.  
    //  The return value has to be an integer value.
{
    menuText();
    while(menu)     // Loop to revert back to menu when choice is not compatable with options.
    {
        int selection;
        cout<< "Choice: ";
        cin>> selection;

        switch(selection)
        {
        case 1: 
            cout << "Start Game\n";
            playGame();
            break;
        case 2:
            cout << "Exit Game\n";
            cout << "Please press enter to exit...\n";
            menu = false ;
            break;
        }
    }

    system("pause");    //  To stop the program from exiting prematurely.
    return 0;           //  this is needed because the main is set to return
    //  an integer.
}

int playgame()
status Status = {100,20,80,80,20};// declaration of class members.
    //Contents of PlayGame().............................
    exitGame();
    return 0;
}
void exitGame()
{
    cout << "\n\nPlease press enter to exit the game.";
    return;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:48:19.203

你基本上这样做：

```
int playGame()
{
    return 0;
}

int main(){
    bool menu = true;
    while(menu){
        cout<< "Choice: ";
        cin>> selection;

        switch(selection)
        {
        case 1: 
            cout << "Start Game\n";
            playGame();
            break; // This break symbolizes that you want to end switch statement
                   // not the whole loop
        }
    }
    return 0;
} 
```

你可以这样做：

```
#define GAME_COMPLETED -1 /* Will close the game */
#define GAME_RESERVER 0

if( playGame() == GAME_COMPLETED){
    menu = false;
}

// And of course at the end of the playGame:
return GAME_COMPLETED; 
```

~~你确定你不想使用`case '1':`而不是`case 1:`吗？~~

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T12:46:55.353

我可能会误解你，但据我了解 - 你希望游戏在`playGame()`功能完成后结束（如果我错了，请纠正我）。

为此，您只需`menu=false;` 在此块中设置 - 或作为替代方案 -`break;`从这种情况下删除语句。它将使流程“下降”到出口案例。

# jquery - Ajax：创建成功时更新索引

> ID：12727497
> 
> 赞同：0
> 
> 时间：2012-10-04T12:38:40.197
> 
> 标签：jquery, ajax, asp.net-mvc

我的 Person 模型有一个 Index、一个 GET Create 和 POST Create 操作。我在父视图中显示索引，因此它被称为 ChildAction。

我想要做的是将 GET Create as a ChildAction 调用到同一个父视图或索引视图中。然后在提交创建表单时，我希望刷新索引。

我该如何实施呢？我一直在使用 Ajax.BeginForm 来解决这个问题，但它似乎多次发布到 Create 操作，所以我认为我的尝试是有缺陷的。我的主要问题是在创建 POST 成功时刷新索引操作。Create POST 应该返回什么？

所有帮助和建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:25:11.133

我不知道我是否完全理解你的问题，但我认为它可能会帮助你喜欢你使用成功：function(data){ ... some code ...} 你还必须在这里使用另一个属性

onComplete : function (data){ ... some code ...}

现在只需编写您想要在 ajax 调用完成后执行的代码。但是把它写在完整的函数中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:17:42.490

这是如何设置的：

```
public class HomeController : Controller
{
    public ActionResult MainAction()
    {
        return View();
    }

    [ChildActionOnly]
    public ActionResult Index()
    {
        return PartialView();
    }

    [ChildActionOnly]
    public ActionResult Create()
    {
        return PartialView();
    }

    [HttpPost]
    public ActionResult ProcessCreate(SomeViewModel model)
    {
        return PartialView("Index");
    }
} 
```

以及相应的观点：

`~/Views/Home/MainAction.cshtml`：

```
<div>
    This is the main view
</div>

<div id="indexContainer">
    @{Html.RenderAction("Index");}
</div> 
```

`~/Views/Home/Index.cshtml`：

```
<div>
    This is the index view @DateTime.Now.ToLongTimeString()
</div>

<div>
    @{Html.RenderAction("Create");}
</div> 
```

`~/Views/Home/Create.cshtml`：

```
@using (Ajax.BeginForm("ProcessCreate", "Home", new AjaxOptions { UpdateTargetId = "indexContainer" }))
{
    <button type="submit">OK</button>
} 
```

另外不要忘记包含`jquery.unobtrusive-ajax.min.js`Ajax.* 助手工作的脚本：

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script> 
```

你会注意到我已经重命名了 Create POST 动作，否则当 Html.RenderAction 助手在表单回发后被调用时，它将再次执行 POST 动作，你将陷入无限循环。

# java - Java Socket：NTP 应用程序总是返回空字符串

> ID：12727498
> 
> 赞同：0
> 
> 时间：2012-10-04T12:38:44.393
> 
> 标签：java, sockets, network-protocols

我使用了一些代码从 NTP（网络时间协议）中获取时间。我已经尝试了[这个列表中](http://tf.nist.gov/tf-cgi/servers.cgi)的许多服务器，但总是收到一个空字符串。我不知道这是因为服务器错误，或者我的代码有问题。

这是我的代码：

```
String machine = "utcnist2.colorado.edu";
// standart port on Computer to take time of day on normal computer
final int daytimeport = 13;

Socket socket = null;
try {
    socket = new Socket(machine, daytimeport);
    BufferedReader reader = new BufferedReader(new InputStreamReader(socket.getInputStream()));
    String time = reader.readLine();
    System.out.printf("%s says it is %s %n", machine, time);
} catch (UnknownHostException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} finally {
    try {
        socket.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:15:16.503

显然，服务器返回两行。`reader.readLine();`在之前添加`String time = reader.readLine();`使其工作。

完整的代码是：

```
 public static void main(String[] args) {
    String machine = "utcnist2.colorado.edu";
    // standart port on Computer to take time of day on normal computer
    final int daytimeport = 13;

    Socket socket = null;
    try {
        socket = new Socket(machine, daytimeport);
        BufferedReader reader = new BufferedReader(new InputStreamReader(socket.getInputStream()));
        reader.readLine();
        String time = reader.readLine();
        System.out.printf("%s says it is %s %n", machine, time);
    } catch (UnknownHostException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            socket.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

# jsf-2 - 在应用程序范围的托管 bean 中读取 web.xml 参数

> ID：12727500
> 
> 赞同：1
> 
> 时间：2012-10-04T12:38:52.723
> 
> 标签：jsf-2

我正在尝试在应用程序范围的托管 bean 中读取 web.xml 文件中的参数。当尝试获取 facescontext 时，这将返回 null。有没有其他方法可以获取 web xml 中定义的所有参数的列表？

```
<context-param>
    <param-name>SOME_NAME</param-name>
    <param-value>SOME_VALUE</param-value>
</context-param> 
```

我的托管bean：

```
@ManagedBean
@ApplicationScoped
public class ConfigurationParameters implements Serializable {
    private Map<String, Object> parameters;

    @PostConstruct
        public void init() {
        final FacesContext facesContext = FacesContext.getCurrentInstance();
        if(facesContext != null) { //this is always null
            ExternalContext ctx = facesContext.getExternalContext();
            parameters = ctx.getInitParameterMap();
        }
} 
```

# php - PHP - 我可以把这个 if else 变成一个更干净的片段，比如数组和循环吗？

> ID：12727505
> 
> 赞同：2
> 
> 时间：2012-10-04T12:39:03.073
> 
> 标签：php, arrays, loops, if-statement

```
<?
///////////////////////
///////////////////////
$OriginalUrlToDisplay=strtok($_SERVER["REQUEST_URI"],'?');
$buttonTypeForColours="radio";
///////////////////////
///////////////////////
?>
<form>
<input type="<?=$buttonTypeForColours ?>" name="colourChoice[]" <? if($_GET["filter"]=="White"){?> onclick="location.href='<?=$OriginalUrlToDisplay?>'" checked="checked" <? } else {?> onclick="location.href='?filter=White'"<? } ?>/> <img src="http://www.gc-cdn.com/mobile/white.png" /> White<br />
<input type="<?=$buttonTypeForColours ?>" name="colourChoice[]" <? if($_GET["filter"]=="Black"){?> onclick="location.href='<?=$OriginalUrlToDisplay?>'" checked="checked" <? } else {?> onclick="location.href='?filter=Black'"<? } ?>/> <img src="http://www.gc-cdn.com/mobile/black.png" /> Black<br />
</form> 
```

有没有更干净的方法来写这个。有40多种颜色。我知道它并不是真正的数据密集型，但很难阅读和管理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T12:55:52.427

您可以像这样轻松循环它：

```
<?php

$colors = array("White", "Black", "Green", "...");
foreach ($colors as $color) {
    echo '<input type="', $buttonTypeForColours, '" name="colourChoice[]"',
         $_GET["filter"] == $color
             ? 'onclick="location.href=\'?\'" checked="checked"' 
             : 'onclick="location.href=\'?filter=' . $color . '\'"',
         ' /><img src="http://www.gc-cdn.com/mobile/', strtolower($color), '.png" /> ', $color, '<br />'
         ;
}

?> 
```

它循环遍历指定的所有可能颜色`$colors`，然后使用字符串内[三元运算符显示正确的输出。](http://www.php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary)

您还可以通过更改轻松地进行不区分大小写的比较

```
$_GET["filter"] == $color 
```

到

```
strcasecmp($_GET["filter"], $color) === 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:49:09.550

做这样的事情；

```
<form>
<?php
$colours = array('black', 'white', 'yellow', 'green', '...');
foreach($colours as $colour):
    $url = $_GET['filter'] == $colour || $_GET['filter'] == ucfirst($colour) ? $OriginalUrlToDisplay : '?filter='. ucfirst($colour);
?>
    <input type="<?php echo $buttonTypeForColours; ?>" name="colourChoice[]" onclick="location.href='<?php echo $url; ?>'" checked="checked" /> <img src="http://www.gc-cdn.com/mobile/white.png" /> White<br />
<?php 
endforeach;
?>
</form> 
```

顺便提一句; 如果您使用单选按钮，请不要将 [] 附加到名称（除非您真的想在 php 中使用具有单个元素的数组）。通常，您只会将该表示法用于允许多个选项的复选框。

注意：我不建议您使用简短的 echo 语句 ( `<?="print this" ?>`)，因为默认情况下并非每台机器都支持它。此外，它几乎不会提高可读性（尽管这是个人的）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-04T12:51:23.023

打破多行并使用 PHP 的替代 sintax 怎么样？像：

```
<?php if(...): ?>
    <sometag></sometag>
<?php endif; ?> 
```

# c++ - C++ 我可以在引用成员上声明吗？

> ID：12727506
> 
> 赞同：-1
> 
> 时间：2012-10-04T12:39:06.087
> 
> 标签：c++

在 h 文件中我声明：

```
static IDataSynchronization& sync_data_; 
```

但是在 cpp 中，我对 sync_data_ 有编译错误：

```
IDataSynchronization& MasterSlaveSynchronize::sync_data_; 
```

错误是：

```
MasterSlaveSynchronize::sync_data_ declared as reference but not initialized 
```

我可以，但不想将其声明为指针，我想了解这里有什么问题以及是否有办法绕过它。

我无法在声明时初始化，因为这是一种将在设置时传递的回调（无构造函数，静态设置）。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:40:38.993

你可以，但你需要初始化它：

```
IDataSynchronization& MasterSlaveSynchronize::sync_data_ = something; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T12:46:47.397

引用必须在声明中初始化。如果从您的评论看来您无法做到这一点，那么您将不得不求助于指针。那里没有第三种选择。

# c# - C#/.Net 启动进程，退出代码为 -2146234327

> ID：12727507
> 
> 赞同：4
> 
> 时间：2012-10-04T12:39:08.050
> 
> 标签：c#, process, exit-code

我有一个 C# 4 应用程序，它启动另一个应用程序来执行一些 Python 代码。Python 代码可以毫无问题地执行（在 PythonWin 上检查）。
在我的应用程序中，我看到退出代码是 -2146234327。我一直在谷歌搜索，无法弄清楚这是什么意思。
有任何想法吗？
谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T12:42:12.427

-2146234327 是 HRESULT 代码，通常以十六进制查找。请参阅[解释从 .NET/CLR 返回的 HRESULTS：0x8013XXXX](http://blogs.msdn.com/b/yizhang/archive/2010/12/17/interpreting-hresults-returned-from-net-clr-0x8013xxxx.aspx)：

> `HOST_E_EXITPROCESS_TIMEOUT` `0x80131029`由于超时升级，进程退出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-21T13:39:43.970

基于这是一个警告而不是错误的事实，我编写了一个解决方法。

我在运行 ArcGIS 分析和索引重建过程的 DOS 批处理文件中包含以下内容

```
set myRC=%ERRORLEVEL%
echo %myRC%
set Constant=-2146234327
echo %Constant%
if %myRC% EQU %Constant% set ERRORLEVEL=0
echo %ERRORLEVEL% 
```

*   第 1 行将变量设置为调用命令返回的值，例如 call D:\Python27\ArcGIS10.2\python.exe D:\Analyze\Analyze.py >> D:\Analyze\Log\output.txt
*   第 2 行回显返回的值
*   第 3 行设置一个常量变量
*   第 4 行呼应了这一点
*   第 5 行将 CALL 命令返回的值与常量进行比较，如果它们匹配，则将 ERRORLEVEL 变量设置为零
*   第 6 行回显返回代码。

在其他地方找到了可能对这个问题有更多了解的信息：

[https://github.com/ucd-cws/arcpy_metadata/issues/13](https://github.com/ucd-cws/arcpy_metadata/issues/13)

# eclipse - Eclipse 没有为我的 Play 框架应用程序更新引用的库

> ID：12727510
> 
> 赞同：6
> 
> 时间：2012-10-04T12:39:15.110
> 
> 标签：eclipse, playframework-2.0, elasticsearch

由于我渴望在我的 Play 2 项目中使用 Elastic Search，我已经阅读了 [http://www.elasticsearch.org/guide/reference/java-api/](http://www.elasticsearch.org/guide/reference/java-api/)并添加了依赖项：

构建.scala：

```
import sbt._
import Keys._
import PlayProject._

object ApplicationBuild extends Build {

    val appName         = "test"
    val appVersion      = "1.0-SNAPSHOT"

    val appDependencies = Seq(
      // Add your project dependencies here,
      "mysql" % "mysql-connector-java" % "5.1.18",      
      "org.elasticsearch" % "elasticsearch" % "0.19.10"
    )

    val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(
      // Add your own project settings here
      resolvers += Resolver.url("GitHub Play2-elasticsearch Repository", url("http://cleverage.github.com/play2-elasticsearch/releases/"))(Resolver.ivyStylePatterns)      
    )
} 
```

找到并下载依赖项，检查播放依赖项：

```
Here are the resolved dependencies of your application:

+-------------------------------------------------------------------+---------------------------------------------------------+------------------------------------+
| Module                                                            | Required by                                             | Note                               |
+-------------------------------------------------------------------+---------------------------------------------------------+------------------------------------+
| org.elasticsearch:elasticsearch:0.19.10                           | test:test_2.9.1:1.0-SNAPSHOT                            | As elasticsearch-0.19.10.jar       |
+-------------------------------------------------------------------+---------------------------------------------------------+------------------------------------+
| org.apache.lucene:lucene-highlighter:3.6.1                        | org.elasticsearch:elasticsearch:0.19.10                 | As lucene-highlighter-3.6.1.jar    |
+-------------------------------------------------------------------+---------------------------------------------------------+------------------------------------+
| org.apache.lucene:lucene-memory:3.6.1                             | org.elasticsearch:elasticsearch:0.19.10                 | As lucene-memory-3.6.1.jar         |
|                                                                   | org.apache.lucene:lucene-highlighter:3.6.1              |                                    |
+-------------------------------------------------------------------+---------------------------------------------------------+------------------------------------+
| org.apache.lucene:lucene-queries:3.6.1                            | org.elasticsearch:elasticsearch:0.19.10                 | As lucene-queries-3.6.1.jar        |
|                                                                   | org.apache.lucene:lucene-highlighter:3.6.1              |                                    |
+-------------------------------------------------------------------+---------------------------------------------------------+------------------------------------+
| jakarta-regexp:jakarta-regexp:1.4                                 | org.apache.lucene:lucene-queries:3.6.1                  |                                    |
+-------------------------------------------------------------------+---------------------------------------------------------+------------------------------------+
| org.apache.lucene:lucene-analyzers:3.6.1                          | org.elasticsearch:elasticsearch:0.19.10                 | As lucene-analyzers-3.6.1.jar      |
+-------------------------------------------------------------------+---------------------------------------------------------+------------------------------------+
| org.apache.lucene:lucene-core:3.6.1                               | org.apache.lucene:lucene-analyzers:3.6.1                | As lucene-core-3.6.1.jar           |
|                                                                   | org.apache.lucene:lucene-queries:3.6.1                  |                                    |
|                                                                   | org.elasticsearch:elasticsearch:0.19.10                 |                                    |
|                                                                   | org.apache.lucene:lucene-memory:3.6.1                   |                                    |
|                                                                   | org.apache.lucene:lucene-highlighter:3.6.1              |                                    |
+-------------------------------------------------------------------+---------------------------------------------------------+------------------------------------+
| mysql:mysql-connector-java:5.1.18                                 | test:test_2.9.1:1.0-SNAPSHOT                            | As mysql-connector-java-5.1.18.jar |
+-------------------------------------------------------------------+---------------------------------------------------------+------------------------------------+
| play:play_2.9.1:2.0.3                                             | test:test_2.9.1:1.0-SNAPSHOT                            | As play_2.9.1.jar                  |
... 
```

但是在eclipse中我不能使用elasticsearch，因为它找不到库。我什至无法导入它。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-04T14:17:31.607

添加新依赖项后（即更新文件后） ，您必须`eclipsify`在 Play 控制台中重做。`Build.scala`

它将`.classpath`为 Eclipse 生成一个包含新依赖项的新文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T00:27:17.447

如果 Build.scala 设置正确，并且在新生成的 .classpath 文件中找到了有关所需库的信息，则尝试运行*play eclipsify*如果它不起作用，只需**重新启动 Eclipse**。它对我有用。

# java - 未呈现带有 Spring Webflow 2.3.1 组件的 JSF 2.2

> ID：12727513
> 
> 赞同：0
> 
> 时间：2012-10-04T12:39:19.463
> 
> 标签：java, spring-mvc, jsf-2, richfaces, spring-webflow

我在将应用程序迁移到 JSF 2.2（使用 Richfaces 4.0）和 Spring Webflow 2.3.1 时遇到了一些困难

服务器（Tomcat 6/7）正在启动而没有任何错误，但仅显示 jsf 组件代码。有谁知道我在哪里可以找到一些提示来解决这个错误？

该图像显示了应用程序的起始页面的结果

![结果](../Images/e9654b0f5416d973607b63a5e068632a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:50:24.880

所以有些它从未通过框架。

你的面孔配置正确吗？调查 jsf 2.2 的语法错误/差异。

网址呢？您是否使用 /faces/ 或 .jsf 通过框架传递它？仔细检查 web.xml 中的配置。

# wpf - 在 Validation.Errors 绑定中使用转换器

> ID：12727518
> 
> 赞同：1
> 
> 时间：2012-10-04T12:39:39.277
> 
> 标签：wpf, validation

在我的 WPF 应用程序 (.Net 4.5) 中，我想向 UI 提供有关验证结果的扩展视觉反馈。数据层的验证引擎通过 INotifyDataErrorInfo 接口返回警告和错误。

我有以下 XAML 来显示红色或橙色边框，具体取决于错误类型和错误消息列表。这`errorToColor`是值转换器的资源键，如果集合中至少有一个错误，则返回红色刷子，如果`Validation.Errors`只有警告，则返回橙色刷子。

```
 <TextBox Name="MappingName" Text="{Binding Path=Mapping.Name, NotifyOnValidationError=True}" >
            <Validation.ErrorTemplate>
                <ControlTemplate>
                    <DockPanel>
                        <Border BorderBrush="{Binding Converter={StaticResource errorsToColor}}" BorderThickness="1">
                            <AdornedElementPlaceholder />
                        </Border>
                        <ListView DisplayMemberPath="ErrorContent" ItemsSource="{Binding}" />
                    </DockPanel>
                </ControlTemplate>
            </Validation.ErrorTemplate>
        </TextBox> 
```

现在让我们看看当我在 TextBox 中键入一些“无效”文本时会发生什么。

*   键入“Text1”并更改焦点。
    调试器进入转换器和两个验证器，导致 ListView 中有两个项目（1 个错误和 1 个警告）和一个红色边框。[好的]
*   键入“文本”以更正错误，更改焦点。
    价值转换器甚至没有被击中！当然，同样的红色边框。但是 ListView 已经改变并且只显示一个警告。

有人可以解释发生了什么吗？为什么 ListView 收到集合更改通知而 Border 没有？是因为`ListView`is an`ItemsControl`并且 the`Validation.Errors`被包裹到了 中`CollectionView`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:19:35.163

对于那些有兴趣的人。`errorsToColor`转换器没有被触发，因为在添加或删除错误时`Validation.Errors`集合没有引发`PropertyChanged`事件（需要触发器绑定转换器）。

为了引发`PropertyChanged`事件，我们需要绑定到每个添加错误时更改的属性，例如`Count`. 我仍然需要转换器中的 Errors 集合本身，所以我在这里使用了多重绑定。

```
 <Border BorderThickness="1">
                <Border.BorderBrush>
                    <MultiBinding Converter="{StaticResource errorsToColor}">
                        <Binding Path="." />
                        <Binding Path=".Count" />
                    </MultiBinding>
                </Border.BorderBrush>
                <AdornedElementPlaceholder Name="adornedElement" />
            </Border> 
```

现在每次添加/删除新错误时都会执行`errorsToColor`转换器（现在是 implements ）。`IMultiValueConverter`

# iphone - MKMapView 中的 zoomLevel 和 mapCenter

> ID：12727520
> 
> 赞同：1
> 
> 时间：2012-10-04T12:39:43.340
> 
> 标签：iphone, objective-c, ios, xcode, mapkit

我正在使用`MKMapView`.

我确实成功地找到了我的`current location`和`zoom`在这一点上是这样的：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    self.mapView.delegate = self;

    self.locationManager = [[CLLocationManager alloc] init];
    [locationManager setDelegate:self];

    [locationManager setDistanceFilter:kCLDistanceFilterNone];
    [locationManager setDesiredAccuracy:kCLLocationAccuracyBest];

    [self.mapView setShowsUserLocation:YES];
}

-(void) mapView:(MKMapView *)mapView didAddAnnotationViews:(NSArray *)views
{
    MKAnnotationView *annotationView = [views objectAtIndex:0];
    id<MKAnnotation> mp = [annotationView annotation];

    MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance([mp coordinate], 1550, 1550);
    [self.mapView setRegion:region animated:YES];
} 
```

我要解决的问题是：

我有一个（这个代码在`location`）：`map``viewDidLoad`

```
CLLocationCoordinate2D location = [self getLocationFromAddressString:@"San Francisco, CA, United States"];
//    location.latitude = 37.78608;
//    location.longitude = -122.407398;

    MapViewAnnotation *mapAnnotation = [[MapViewAnnotation alloc] initWithTitle:@"Store location" coordinate:location];
    [self.mapView addAnnotation:mapAnnotation]; 
```

这是`mapViewAnnotation:`

```
@implementation MapViewAnnotation

@synthesize title = _title;
@synthesize coordinate = _coordinate;

- (id) initWithTitle:(NSString *) t coordinate:(CLLocationCoordinate2D) c {
    self = [super init];
    if(self) {
        _title = t;
        _coordinate = c;
    }
    return self;
}
@end 
```

我想有一个适当的`zoomLevel`和`mapCenter`为此`location`和我的`current location`.

我可以在 Android 中使用`MapController.zoomToSpan()`. 如何在 iPhone 地图中修复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:45:05.270

创建位置数组，然后使用所有 AnnotationPins 创建中心地图视图

```
-(void) RoutscenterMap 
{
        MKCoordinateRegion region;

        CLLocationDegrees maxLat = -90;
        CLLocationDegrees maxLon = -180;
        CLLocationDegrees minLat = 90;
        CLLocationDegrees minLon = 180;
        for(int idx = 0; idx < arrLocation.count; idx++)// here use your array or points
        {
            CLLocation* currentLocation = [arrLocation objectAtIndex:idx];
            if(currentLocation.coordinate.latitude > maxLat)
                maxLat = currentLocation.coordinate.latitude;
            if(currentLocation.coordinate.latitude < minLat)
                minLat = currentLocation.coordinate.latitude;
            if(currentLocation.coordinate.longitude > maxLon)
                maxLon = currentLocation.coordinate.longitude;
            if(currentLocation.coordinate.longitude < minLon)
                minLon = currentLocation.coordinate.longitude;
        }

        region.center.latitude     = (maxLat + minLat) / 2;
        region.center.longitude    = (maxLon + minLon) / 2;
        region.span.latitudeDelta  = (maxLat - minLat) * 2;
        region.span.longitudeDelta = (maxLon - minLon) * 2;

        [mapView setRegion:region animated:YES];
    } 
```

您也可以在数组中添加位置，如下所示...

```
 CLLocation *temploc=[[CLLocation alloc]initWithLatitude:latitude longitude:longtitude];
 [arrLocation addObject:temploc]; 
```

之后使用此数组将地图居中

我希望这可以帮助你...

:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:08:56.510

这是我可以实现它的方式：

```
 CLLocationCoordinate2D topLeftCoord;
    topLeftCoord.latitude = -90;
    topLeftCoord.longitude = 180;

    CLLocationCoordinate2D bottomRightCoord;
    bottomRightCoord.latitude = 90;
    bottomRightCoord.longitude = -180;

    for(id<MKAnnotation> annotation in mapView.annotations) {
        topLeftCoord.longitude = fmin(topLeftCoord.longitude, annotation.coordinate.longitude);
        topLeftCoord.latitude = fmax(topLeftCoord.latitude, annotation.coordinate.latitude);
        bottomRightCoord.longitude = fmax(bottomRightCoord.longitude, annotation.coordinate.longitude);
        bottomRightCoord.latitude = fmin(bottomRightCoord.latitude, annotation.coordinate.latitude);
    }

    MKCoordinateRegion region;
    region.center.latitude = topLeftCoord.latitude - (topLeftCoord.latitude - bottomRightCoord.latitude) * 0.5;
    region.center.longitude = topLeftCoord.longitude + (bottomRightCoord.longitude - topLeftCoord.longitude) * 0.5;
    region.span.latitudeDelta = fabs(topLeftCoord.latitude - bottomRightCoord.latitude) * 1.1;

    // Add a little extra space on the sides
    region.span.longitudeDelta = fabs(bottomRightCoord.longitude - topLeftCoord.longitude) * 1.1;

    region = [mapView regionThatFits:region];
    [mapView setRegion:region animated:YES]; 
```

# svn - SVN 身份验证失败（本地）

> ID：12727522
> 
> 赞同：0
> 
> 时间：2012-10-04T12:39:49.200
> 
> 标签：svn, unix

我正在使用 svn+ssh 连接到 svn 存储库，该存储库又使用 unix 用户名和密码进行身份验证。一切正常。

但是，我在托管存储库的同一台服务器上也有一个已检出版本的存储库。当我尝试使用在 svn+ssh 上运行良好的同一用户提交对此版本的存储库所做的更改时，我收到“身份验证失败”错误。另一方面，更新工作正常。

可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:00:24.993

您必须记住，如果您通过`svn://`它进行访问，则依赖于内部 svn 身份验证令牌来访问服务，而不是您的 ssh 凭据。

如果我创建一个 svn 存储库：

```
svnadmin create `pwd`/SVN
svnserve -d --root `pwd`/SVN 
```

从另一个窗口：

```
svn co svn://127.0.0.1
cd 127.0.0.1
touch foo; svn add foo; svn commit -m'[foo]' foo 
```

产生错误：

```
svn: Commit failed (details follow):
svn: Authorization failed 
```

然而：

```
svn co svn+ssh://127.0.0.1/home/pshanahan/SVN FRED
cd FRED
touch foo; svn add foo; svn commit -m'[foo]' foo 
```

works without error as it relies on being able to access the repository as a local file.

# python - 使用 createContentInContainer 创建内容

> ID：12727526
> 
> 赞同：1
> 
> 时间：2012-10-04T12:40:07.687
> 
> 标签：python, plone

我一直在尝试使用 Dexterity 工具在我的 plone 站点中创建内容`createContentInContainer`。

我编写了一个在我的 zopepy 实例下运行的脚本，它完成了以下任务：

*   从 SQL 表中选择数据。
*   创建一个反映我的产品中定义的自定义内容类型的元组列表。

我知道我的方法非常天真，但我通过以下方式创建了与应用程序数据库的连接：

```
storage = FileStorage.FileStorage('.../var/filestorage/Data.fs')
db = DB(storage)
conn = db.open()
dbroot = conn.root() 
```

我正在尝试通过以下方式创建内容：

```
createContentInContainer(dbroot['Application']['myapp']['existingfolder'], portal_type, checkConstraints=False, content=item) 
```

`portal_type`以前设置为我的自定义内容类型。`item`既是传递给内容接口（引发`Could not adapt`TypeError）的元组列表，也是从接口继承的未注册适配器。

该类型的接口在`mysite.Widget.xml`in 中注册`profiles/defualt/types`，但脚本不断抛出：

```
Traceback (most recent call last):
  File "./bin/zopepy", line 345, in <module>
    execfile(__file__)
  File "importdex.py", line 105, in <module>
    createContentInContainer(dbroot['Application']['myapp']['existingfolder'], portal_type, checkConstraints=False, content=item)
  File "env/mysite/eggs/plone.dexterity-1.0-py2.7.egg/plone/dexterity/utils.py", line 149, in createContentInContainer
    content = createContent(portal_type, **kw)
  File "env/mysite/eggs/plone.dexterity-1.0-py2.7.egg/plone/dexterity/utils.py", line 105, in createContent
    fti = getUtility(IDexterityFTI, name=portal_type)
  File "env/mysite/eggs/zope.component-3.9.5-py2.7.egg/zope/component/_api.py", line 169, in getUtility
    raise ComponentLookupError(interface, name)
zope.component.interfaces.ComponentLookupError: (<InterfaceClass plone.dexterity.interfaces.IDexterityFTI>, 'mysite.Widget') 
```

正如我所提到的，我知道我的方法非常天真，我可能应该得到一记耳光。如果我以令人困惑的方式提出我的问题，我深表歉意。

我的问题是：

*   我可以`createContentInContainer`从 zopepy 实例化吗？我的操纵连接是否足够，或者脚本是否需要在应用程序中运行才能继承 Dexterity/FTI 完成我所要求的内容？
*   我需要适配器吗？我从`grok.Adapter`and 继承并将接口传递给`grok.provides`and的接口`grok.context`，但它是否应该基于整个内容模式声明属性？
*   元组列表是任意的。鉴于 ZODB 的结构，这似乎是要做的事情。如果我将内容类型的模式声明为已注册适配器中的属性，则应精心制作数据以符合对象（适配器）的属性，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:49:30.757

您需要为代码工作设置更多上下文。例如，Plone 站点充当本地组件注册表。

您最好使用该`bin/instance run [scriptname]`命令，它会为您设置数据库连接并将根对象传递`app`给您的脚本。在该脚本中，使用以下样板来搭建其余的脚手架：

```
import transaction
from zope.app.component.hooks import setSite
from Testing.makerequest import makerequest
from AccessControl.SecurityManagement import newSecurityManager

plone_site_id = 'Plone' # Adjust as needed.

app = makerequest(app)
site = app[plone_site_id]
setSite(site)
user = app.acl_users.getUser('admin').__of__(site.acl_users)
newSecurityManager(None, user) 
```

有了这些，您将拥有运行代码所需的一切。最后别忘了打电话`transaction.commit()`。您的 Plone 站点可在局部变量中访问`site`。

# xml - 自动化 API 控制台的 WADL .XML 文件

> ID：12727527
> 
> 赞同：1
> 
> 时间：2012-10-04T12:40:08.160
> 
> 标签：xml, web-services, api, web-applications, wadl

我正在为我的网络应用 API构建一个 API 控制台（*使用[https://apigee.com/togo ）。](https://apigee.com/togo)*Apigee 站点要求我上传 XML WADL 以显示所有方法等。

有没有一种简单的方法来自动化这个过程，所以我不必手动创建 WADL 文件？**如果您需要有关我的 API 的任何特定信息来帮助回答问题，请告诉我。**

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T06:32:44.220

如果您使用 Java 构建 API，请查看 Apache CXF，它可以生成 WADL： [http ://cxf.apache.org/](http://cxf.apache.org/)

否则，您可以尝试查看 REST 描述： [http ://tomayac.de/rest-describe/latest/RestDescribe.html](http://tomayac.de/rest-describe/latest/RestDescribe.html)

这是一个旧项目，但它可能有助于启动您的 WADL 创建。

您可能已经知道最后一个技巧，但如果您是手动编写 WADL，请务必查看 Apigee To-Go 中提供的示例 WADL，因为它的注释相当好。

我们（我在 Apigee 工作）正在探索有关如何使 API 描述过程比创建 WADL 更痛苦的想法，但就今天而言，这些是我能提出的最佳建议。

希望有帮助，

沼泽

# ios - 如何在Objective c中推送到viewcontroller时显示activityIndi cator

> ID：12727528
> 
> 赞同：0
> 
> 时间：2012-10-04T12:40:08.077
> 
> 标签：ios, uiactivityindicatorview

我已经为activityIndi​​cator使用了单例类。然后我会在我想要的任何地方调用那个类。加载时没有问题，但在推送到其他视图控制器时没有出现加载。

```
 - (void)editBtntapped
 {
      [loading showLoadingView:self.view ForSubView:self.view];

      Screen_Participant_Edit *controller=[[Screen_Participant_Edit alloc]init];
      [self.navigationController pushViewController:controller animated:NO];
      [controller release];

 } 
```

loading 是 sigleton 类的对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:52:12.630

您必须在 MAINWINDOW 而不是 UIVIewController 上显示 ActivityIndi​​cator。

```
- (void)editBtntapped
{
     [loading showLoadingView:appDelegate.window ForSubView:appDelegate.window];

     Screen_Participant_Edit *controller=[[Screen_Participant_Edit alloc]init];
     [self.navigationController pushViewController:controller animated:NO];
     [controller release];

} 
```

您正在做的是将 ActivityIndi​​cator 添加到以前的 UIViewController，然后推送新的 UIViewController。因此，放置 ActivityIndi​​cator 的当前 UIViewController 消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:45:40.617

一个非常简单的解决方案，而不是在视图中显示 activityIndi​​cator，而是添加 activityIndi​​cator on `UIAlertView`。希望这有助于解决您的问题..

# oracle - Oracle 透视查询导致“命令未正确结束”错误

> ID：12727529
> 
> 赞同：2
> 
> 时间：2012-10-04T12:40:11.663
> 
> 标签：oracle, oracle10g, pivot

当向 10g Oracle 数据库发出以下查询时：

```
 SELECT * FROM (
        SELECT T1.ID, T2.ACCT_NO, ROW_NUMBER() OVER (PARTITION BY T1.ID ORDER BY T1.ID DESC) AS RRRRRRR 
        FROM TABLE1 T1
        INNER JOIN TABLE T2 ON T1.ID = T2.ID
        WHERE T1.ID = 666
    )
    PIVOT (MIN(T1.ID) AS ALIAS1 FOR RRRRRRR IN (1, 2, 3, 4, 5, 6, 7, 8, 9, 10)); 
```

我收到“命令未正确结束”错误。我搜索了 Oracle 数据透视示例，它们几乎都显示了相同的示例。我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T12:57:51.507

正如@APC 指出的那样`PIVOT`，oracle 10g 中没有函数，因此您可以使用聚合函数和 a `CASE`，类似于：

```
SELECT id, acct_no, 
  min(case when RRRRRRR = 1 then id end) as '1',
  min(case when RRRRRRR = 2 then id end) as '2',
  min(case when RRRRRRR = 3 then id end) as '3',
  min(case when RRRRRRR = 4 then id end) as '4',
  min(case when RRRRRRR = 5 then id end) as '5',
  min(case when RRRRRRR = 6 then id end) as '6',
  min(case when RRRRRRR = 7 then id end) as '7',
  min(case when RRRRRRR = 8 then id end) as '8',
  min(case when RRRRRRR = 9 then id end) as '9',
  min(case when RRRRRRR = 10 then id end) as '10'
FROM 
(
  SELECT T1.ID, T2.ACCT_NO, ROW_NUMBER() OVER (PARTITION BY T1.ID ORDER BY T1.ID DESC) AS RRRRRRR 
  FROM TABLE1 T1
  INNER JOIN TABLE T2 ON T1.ID = T2.ID
  WHERE T1.ID = 666
) x
GROUP BY id, acct_no 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T12:42:39.403

你的语法无可挑剔。不幸的是，PIVOT 是在 Oracle 11g 中引入的，而您正在使用 10g。

# c# - Youtube：将视频上传到多个帐户

> ID：12727531
> 
> 赞同：1
> 
> 时间：2012-10-04T12:40:19.030
> 
> 标签：c#, youtube, youtube-api, youtube.net-api

我正在开发一个 c# 应用程序来将视频从我的本地驱动器上传到 youtube 到不同的帐户。目前我没有使用 youtube API 上传视频，而是使用 webclient 类和谷歌开发人员密钥来上传视频。我能够成功地将视频上传到与开发人员密钥关联的帐户。但是，当我使用不同 youtube 帐户的凭据时，它无法上传并且出现错误

> “当前经过身份验证的用户没有对用户名 myusername 的写入权限”

我不确定这个错误的原因。还是我需要更改 youtube 帐户中的任何设置以启用应用程序上传视频的访问权限？我假设我需要使用 youtube API 来做到这一点。通过提供用户名和密码以及我的开发人员密钥，是否有任何其他方法可以将视频上传到不同的 youtube 帐户？

问题在于上传到评论的网址。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T16:59:17.003

我不知道您所指的“webclient 类”是什么意思。如果您以编程方式与 YouTube 交互，则应该使用官方的 YouTube API。

处理上传的正确方法是在构建上传 URL 时使用用户名“default”，如在

[https://developers.google.com/youtube/2.0/developers_guide_protocol_direct_uploading](https://developers.google.com/youtube/2.0/developers_guide_protocol_direct_uploading)

这将确保上传进入与当前授权令牌关联的帐户。

有使用 .NET 客户端库执行此操作的示例代码，位于

[https://developers.google.com/youtube/2.0/developers_guide_dotnet#Direct_Upload](https://developers.google.com/youtube/2.0/developers_guide_dotnet#Direct_Upload)

# java - Java - 按位比较和位移

> ID：12727533
> 
> 赞同：1
> 
> 时间：2012-10-04T12:40:32.567
> 
> 标签：java, bit-manipulation

我需要对以下语句进行一些解释，它在做什么？：

```
int result = 154 + (153 << 8) + (25 << 16) + (64 << 24);
/* what would be the value of result after this line and how it is calculated
Why we need this? */ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T12:47:02.750

**`(153 << 8)`**相当于**`153 * pow(2, 8)`**

你实际上是在向左移动你的位..

还： -

**`(153 >> 8)`**相当于**`153 / pow(2, 8)`**

你可以猜到为什么..这实际上是向右移动位..

例如：-

```
3 => 0011

3 << 2 is equal to 1100 -> (Which is code for 12)

3 >> 2 is equal to 0000 -> (Which is code for 0) -> you can see - **(3 / 4 = 0)** 
```

**注意**：- 请注意，`right shifting rounds off towards negative infinity`..

**对于 EG：-**

```
-3 >> 1 --> -2 (-1.5 is rounded to -2) 
```

让我们看看它是如何发生的：-

**在二进制字符串表示中： -**

```
-3 ==> 11111111111111111111111111111101

-3 >> 1 ==> 11111111111111111111111111111110 (-3 / 2 = -1.5 -> rounded to -2) 
```

（请注意，最左边的位由移位前最左端的位填充（在本例中为 1））

因此，该值变为**-2**（对于 -3>>1，大于`-3`）这发生在负数..`Right shifting a negative number gives a number greater than the original number..`

这与最左边的位将被填充的正数相反`0`......因此`value obtained will be less than the original..`

```
3 ==>  00000000000000000000000000000011

3 >> 1 ==> 00000000000000000000000000000001 (3 / 2 = 1.5 -> rounded to 1) 
```

（所以最左边的位保持为 0。因此，值为 1（小于 3），即，值向负无穷大四舍五入，从 1.5 变为 1）

同样，您可以为`left-shifting`正数和负数设计结果..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T12:52:26.843

答案是 1075419546。左移运算符基本上是在十进制数的二进制表示中添加 0，所以这只是为了

154 + 153 * 2^8 + 25 * 2^16 + 64*2^24

因此，您可以将 153 转换为其二进制表示，然后添加 8 个零并转换回十进制等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T12:45:48.483

实际上，如果您在数学表达式上使用给定的运算符，它的含义与以下内容相同：

123 << n 与 123 * 2 ^ n 完全相同

例如，2 << 2 是 2 * 2 ^ 2，即 8 或等于 1000

否则，您只是向左移动位：

3 = 11 然后 3 << 2 = 1100。

希望它说清楚。

# android - 了解 Android 应用程序是否从 Eclipse 运行

> ID：12727535
> 
> 赞同：2
> 
> 时间：2012-10-04T12:40:36.500
> 
> 标签：android, eclipse, debugging, android-activity

我怎么知道（例如在 Activity 中）该应用程序是从 Eclipse 安装和运行的（通过 USB 插入移动设备）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T14:04:27.677

所有应用程序都由证书签名。即使由 Eclipse 启动。在 Eclipse 中使用 android SDK 时，会默认创建一个调试密钥库，并在每次使用 IDE 构建应用程序并将其推送到设备/模拟器时使用。

您可以在代码中获取有关密钥库的信息，并验证它是您自己的签名代码还是其他代码。我在 Eclipse 中的应用程序上使用了下面的快速而肮脏的代码：

```
 try {
        PackageInfo pi = this.getPackageManager().getPackageInfo( this.getPackageName(), PackageManager.GET_SIGNATURES);
        Signature[] signatures = pi.signatures;
        byte[] cert = signatures[0].toByteArray();
        InputStream input = new ByteArrayInputStream(cert);
        CertificateFactory cf = CertificateFactory.getInstance("X509");
        X509Certificate cf509 = (X509Certificate) cf.generateCertificate(input);
        Log.d(LOG_TAG, "Certificate issued by: " + cf509.getIssuerDN() );
    } catch ( Exception e ) { 
```

结果是：

```
Certificate issued by: CN=Android Debug, O=Android, C=US 
```

更好的结构化代码和信用转到此链接： [http ://thomascannon.net/misc/android_apk_certificate/](http://thomascannon.net/misc/android_apk_certificate/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T12:51:39.030

[使用android:debuggable](http://developer.android.com/guide/topics/manifest/application-element.html#debug) =true 标志从 Eclipse 构建您的应用程序。然后你可以用这种方法从应用程序中检查它的值：[Getting "debuggable" value of androidManifest from code?](https://stackoverflow.com/questions/4276857/getting-debuggable-value-of-androidmanifest-from-code)

# php - 将日期转换为不同的格式

> ID：12727538
> 
> 赞同：-1
> 
> 时间：2012-10-04T12:41:01.990
> 
> 标签：php, mysql

> **可能重复：**
> [MySQL 日期格式](https://stackoverflow.com/questions/5367721/mysql-date-format)

我有这个日期，我需要进行比较，但自从查询以来我就需要这样做！

现在我有这个查询：

```
Select date WHERE date="$today" 
```

`$today`这种格式在哪里：`dmY` 我怎样才能直接将它转换成 dmY 呢？日期字段？就像是：

```
Select date("dmY",date) WHERE date="$today" 
```

我不知道这是否可行，但我想它可能是，所以我会很感激一点帮助，即使它很简单，是的，它是可行的，不，它不是！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:46:17.090

你需要使用[date_format](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)

`Select date_format(date, '%d%m%Y) from table_name where date = "$today"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:54:14.993

我认为您遇到问题的地方是格式化 php 日期以适应您的 mysql_query 格式化的内容

这就是我想出的。

我为您创建了一个简单的代码来处理这个问题。

程序是我使用 mysql 的 CURDATE() 函数从 mysql 获取今天的日期，然后对其进行格式化并匹配表上的现有列

**MYSQL 数据库**

```
 -- phpMyAdmin SQL Dump
-- version 3.4.5
-- http://www.phpmyadmin.net
--
-- Host: localhost
-- Generation Time: Oct 04, 2012 at 01:44 PM
-- Server version: 5.5.16
-- PHP Version: 5.3.8

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";

--
-- Database: `my_db`
--

-- --------------------------------------------------------

--
-- Table structure for table `datetable`
--

CREATE TABLE IF NOT EXISTS `datetable` (
  `dateid` int(2) NOT NULL AUTO_INCREMENT,
  `datestuff` date NOT NULL,
  PRIMARY KEY (`dateid`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=3 ;

--
-- Dumping data for table `datetable`
--

INSERT INTO `datetable` (`dateid`, `datestuff`) VALUES
(1, '2012-10-02'),
(2, '2012-10-04'); 
```

**PHP 代码（文件）**

```
 <?php
//Connect to your host
$con = mysql_connect("localhost","admin","admin");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
//select your database
mysql_select_db("my_db", $con);

//getting today's date and formating it, output is like this (4-10-2012)
$today = date('j-m-Y');

//query your table, also date has been formated like this (4-10-2012)
$result = mysql_query("SELECT DATE_FORMAT( CURDATE( ) ,  '%e-%m-%Y' ) AS today, DATE_FORMAT( datestuff,  '%e-%m-%Y' ) AS datestuff FROM datetable WHERE CURDATE( ) = datestuff");

//get the resultset
while($row = mysql_fetch_array($result))
  {
  echo "date in table: ".$row['datestuff']. "---- today's date: ". $row['datestuff'];
  echo "<br />";
  }
?> 
```

**试试看，让我知道它是否适合你....**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T12:43:38.040

```
Select date_format(date, '%d%m%Y') 
from your_table 
WHERE date="$today" 
```

见[MySQL DATE_FORMAT](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_date-format)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T13:58:19.387

```
Select date_format("2012-06-01",'%d-%m-%Y') WHERE date="$today" 
```

**注意 * : 您可以在 "%d/%m/%Y" 中使用日期分隔符 "-" 或 "/"**

比较日期示例：

```
Select * From temp where mydate > '2009-06-29 16:00:44'; 
```

# ios - 在 iOS5 中从网络服务器获取 json 的问题

> ID：12727549
> 
> 赞同：0
> 
> 时间：2012-10-04T12:41:35.047
> 
> 标签：ios, json, ios5, nsdictionary, nsjsonserialization

我有一个应用程序通过 json 从服务器接收提要。

我一直在为 iOS5 构建它，但在过去几周使用 iOS6 进行了测试。我今天用 iOS5 设备测试，一切都崩溃了。

代码如下所示：

```
NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://www.myserver.com/news.json"]];
NSDictionary *json = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error]; 
```

它工作没有问题，但现在它返回一个空值。数据不为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:10:58.380

可可错误 3840 表示

> 数据已损坏，无法读取。（字符 2 周围的对象中没有值的字符串键。）

您应该使用[http://www.jsoneditoronline.org/](http://www.jsoneditoronline.org/)或 [http://jsonformatter.curiousconcept.com/之类的验证器检查您的 json](http://jsonformatter.curiousconcept.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:00:11.280

问题是来自网络服务器的重复密钥。现在它起作用了。

但奇怪的是，该错误是在 iOS5 而不是在 iOS6 中触发的。

# c# - C# 正则表达式字符串解析

> ID：12727551
> 
> 赞同：5
> 
> 时间：2012-10-04T12:41:39.433
> 
> 标签：c#, .net, regex

我已经编写了表达式，但是每当我运行代码时，我都会得到整个字符串和一大堆空值：

```
Regex regex = new Regex(@"y=\([0-9]\)\([0-9]\)(\s|)\+(\s+|)[0-9]");
Match match = regex.Match("y=(4)(5)+6");

for (int i = 0; i < match.Length; i++)
{
    MessageBox.Show(i+"---"+match.Groups[i].Value);
} 
```

预期输出：4、5、6（在不同的 MessageBox 中

实际输出：y=(4)(5)+6

它会检查输入的字符串是否正确，但一旦正确，我就无法获得特定值（4、5 和 6）。我该怎么做才能获得该代码？这可能是非常简单的事情，但我尝试查看 MSDN match.NextMatch 文章，但这似乎也没有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T12:51:54.163

目前，您没有指定任何组。（除了周围的空间。）

您可以使用括号指定组。您当前使用的括号带有反斜杠，因此它们被用作匹配的一部分。在其中添加一组额外的括号。

像这样：

```
new Regex(@"y=\(([0-9]+)\)\(([0-9]+)\)\+([0-9]+)"); 
```

并带有空格：

```
new Regex(@"y\s*=\s*\(([0-9]+)\)\s*\(([0-9]+)\)\s*\+\s*([0-9]+)"); 
```

这也将允许部件之间的空格是可选的，因为 * 表示 0 或更多。这比上面给出的 (?:\s+|) 更好，因为您不需要为空格设置一个组。它也更好，因为管道的意思是“或”。你在说什么 \s+| 是“一个或多个空格或什么都没有”。这与 \s* 相同，即“零个或多个空格”。

另外，我使用了 [0-9]+，因为这意味着 1 个或多个数字。这允许匹配具有多个数字的数字，例如 10 或 100。另一个旁注，使用 [0-9] 比 \d 更好，因为 \d 不仅仅指我们习惯的数字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T12:49:05.840

使用（命名的）捕获组。您还需要使用`(?:)`而不是`()`用于您不想捕获的**组**。否则，它们也将在结果组中。

```
Regex regex = new Regex(@"y=(\([0-9]\))((\([0-9]\))(?:\s|)\+(?:\s+|)([0-9])");
Match match = regex.Match("y=(4)(5)+6");
Console.WriteLine("1: " + match.Groups[1] + ", 2: " + match.Groups[2] + ", 3: " + match.Groups[3]); 
```

如果模式找到匹配项，则将该匹配项的组写入可以通过索引访问的属性（索引`0`包含完整匹配项）。

您还可以命名这些组以获得更具可读性的代码：

```
Regex regex = new Regex(@"y=(?<first>\([0-9]\))(?<second>(\([0-9]\))(?:\s|)\+(?:\s+|)(?<third>[0-9])"); 
```

现在，您可以通过 using 等访问捕获组`match.Groups["first"]`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-04T12:51:29.000

您需要为您的组命名，以便稍后将它们拉出来。[如何访问 .NET Regex 中的命名捕获组？](https://stackoverflow.com/questions/906493/regex-named-capturing-groups-in-net)

```
Regex regex = new Regex(@"y=\((?<left\>[0-9])\)\((?<right>[0-9])\)(\s|)\+(\s+|)(?<offset>[0-9])"); 
```

然后你可以像这样把它们拉出来：

```
regex.Match("y=(4)(5)+6").Groups["left"]; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-04T12:49:09.703

C# 超出了我的专业领域，但这可能有效：

```
@"y=\(([0-9])\)\(([0-9])\)(?:\s|)\+(?:\s+|)([0-9])" 
```

它基本上是您的原始正则表达式，但在数字周围捕获组，并且不想要的捕获组更改为非捕获组：`(?: ... )`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-04T12:49:14.460

Group[0] 将始终为您提供匹配的字符串，空值来自 (\s|)。

这将起作用：`y=\((\d)\)\((\d)\)\s*\+\s*(\d)`

从 1 开始的组计算您使用的括号，但如果您将它们转义，它们不计算在内（因为您告诉它它们只是要匹配的文本），所以这些数字需要它们自己的括号。在类似的情况下使用它也不是一个好主意`(x|)`？或 * 会更合适，因为你没有捕捉到那一点。

这可能会更好`y=\((\d+)\)\((\d+)\)\s*\+\s*(\d+)`，因为它支持大于 10 的值。

# fortran - 如何强制编译器将省略的意图解释为意图（inout）

> ID：12727556
> 
> 赞同：4
> 
> 时间：2012-10-04T12:41:54.603
> 
> 标签：fortran

这个问题与问题有关：如何检测`intent(in)`内部子程序的违规。但我还没有在相关问题[Enforce intent(in) declared variables in Fortran as constant in called subroutines/functions 中](https://stackoverflow.com/questions/7223314/enforce-intentin-declared-variables-in-fortran-as-constant-also-in-called-subr)找到答案。

声明为的变量`intent(in)`可以被另一个子程序/函数修改，而省略了意图声明。

例如：

```
module test
  implicit none
  contains

  subroutine fun1(x)
    real(8), intent(in)::x
    call fun2(x)
  end subroutine

  subroutine fun2(x)
    real(8) :: x
    x = 10
  end subroutine
end module 
```

gfortran 和 ifort 可以编译此代码而不会出现任何错误/警告。所以我的问题是：

1.  是否可以禁止省略意图声明？
2.  是否可以强制 Fortran 编译器将省略的意图解释为`intent(inout)`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T12:50:40.327

两个答案都是NO。未指定的意图与所有其他意图根本不同。它与意图（inout）不同，因为您可以将不可定义的表达式传递给具有未指定意图的子例程。

同样在许多情况下，根本不允许指定意图（过程参数、Fortran 95 中的指针……）

如果您想要求指定意图，您可以将您的子例程定义为，`pure`但它的作用远不止于此。但这对你来说可能是正确的。它禁止任何副作用。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-14T14:51:42.467

我认为由于自动定义的接口，你应该得到一个编译错误。例如，对于错误的维度，我会期望相同（我将 fun2 虚拟参数 x 切换为 z，我认为这更清楚地说明了我的观点）。

```
module test
  implicit none
  contains

  subroutine fun1(x)
    real(8), intent(in)::x
    call fun2(x)
  end subroutine

  subroutine fun2(z)
    real(3) :: z
    z = 10
  end subroutine
end module 
```

# asp.net - RadTabStrip 回发

> ID：12727557
> 
> 赞同：0
> 
> 时间：2012-10-04T12:41:59.993
> 
> 标签：asp.net, radgrid

我有一个 RadTabStrip。我不想在所有 rad 选项卡上回发。但我想在特定选项卡上回发是否可能。是否可以在这里使用任何控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:05:14.370

如果我理解你的问题，你应该使用 Telerik ajaxupdatecontrol。 [更多信息在这里](http://www.telerik.com/help/aspnet-ajax/ajax-ajaxupdatedcontrol-properties.html)

```
<telerik:RadAjaxManager ID="RadAjaxMan" runat="server" 
    DefaultLoadingPanelID="RadAjaxLoadingPanel">
    <AjaxSettings>
        <telerik:AjaxSetting AjaxControlID="" EventName="">
            <UpdatedControls>
                //this control wil postack
                <telerik:AjaxUpdatedControl ControlID="" LoadingPanelID="ralpSinglCont" />
            </UpdatedControls>
        </telerik:AjaxSetting>
    </AjaxSettings>
</telerik:RadAjaxManager>

<telerik:RadAjaxLoadingPanel ID="ralpSinglCont" runat="server" 
    Skin="Transparent" Transparency="40">
</telerik:RadAjaxLoadingPanel> 
```

# blackberry - 黑莓 webworks 背景页面不工作

> ID：12727560
> 
> 赞同：0
> 
> 时间：2012-10-04T12:42:16.420
> 
> 标签：blackberry, background-process, blackberry-webworks

我正在研究黑莓网络。我做了一个演示，其中有一页在后台运行并在设备启动时加载。我已经使用 blackberry rim:background 来指定背景，并且已经在背景页面中开始了间隔，但是页面不工作。请帮助我摆脱这个问题，

这是我在 config.xml 中的代码

```
<content src="index.html" >
         <rim:background src="index.html" runOnStartup="true"   charset="string" />
  </content> 
```

和 HTML 代码在此处插入标题

```
<script type="text/javascript" src="timer.js" />

<script>
function background()
{

self.setInterval(interval,"3000");           
}            

function interval()
{
 i=i+10;
}
}   
</script>

<body onload=" background()" >

</body>
</html> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:13:46.600

您希望此示例针对哪个手机/操作系统？与 OS 5-7 相比，BB10 应用程序的 config.xml 的背景元素略有不同。

对于 BB OS 5-7，您可以像上面那样执行此操作

```
<content src="index.html"><rim:background src="listener.html" runOnStartup="true" /></content> 
```

[我会在这里](https://developer.blackberry.com/html5/documentation/code_sample_creating_a_bb_widget_config_document_834683_11.html)检查示例 config.xml 文档，并确保一切都已正确设置以开始。

# jquery - jQuery hover、mouseenter、mouseleave 状态（不透明动画）

> ID：12727561
> 
> 赞同：2
> 
> 时间：2012-10-04T12:42:24.967
> 
> 标签：jquery, mouseenter, mouseleave, jquery-hover

我试图理解他们，但似乎我做不到。所以我想是否有人可以帮助我更好地理解这些工作原理。

当我添加悬停状态时，无论鼠标在元素上还是鼠标离开元素时，它都会产生不透明效果......它会重复......

而且 mouseenter&leave 工作正常，但我不知道如何告诉他一次 $(this) 所以我做了一些东西并且它有效，但也许有人可能会告诉我什么是正确和更好的方法。

```
$("nav.topMenu-left li, nav.topMenu-right li").on('mouseenter', function() {
    $(this).animate({'opacity': '0.5'}, 100);
});

$("nav.topMenu-left li, nav.topMenu-right li").on('mouseleave', function() {
    $(this).animate({'opacity': '1'}, 100);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:46:06.653

您可以组合您的事件处理程序：

```
$("nav.topMenu-left li, nav.topMenu-right li").on('mouseenter mouseleave', function(e) {
   if (e.type === 'mouseenter')
      $(this).animate({'opacity': '0.5'}, 100);
   else 
      $(this).animate({'opacity': '1'}, 100);   
}); 
```

或者由于您没有委托事件，您可以使用`hover`方法：

```
$("nav.topMenu-left li, nav.topMenu-right li").hover(function(){
    $(this).animate({'opacity': '0.5'}, 100);
}, function(){
    $(this).animate({'opacity': '1'}, 100);   
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T12:49:55.333

如果你有选择，我会用 CSS 来做这件事。

[`:hover`](https://developer.mozilla.org/en-US/docs/CSS/%3ahover)使用 CSS属性的示例代码

**CSS**

```
div{
    width: 100px;
    height: 100px;
    background-color: blue;                
    opacity: .5;
}
div:hover{
    opacity: 1;
} 
```

**[例子](http://jsfiddle.net/5xUHm/)**

否则，@undefined 的解决方案就是您要寻找的 =)

# jquery - 防止底层按钮单击 JQuery Mobile

> ID：12727564
> 
> 赞同：0
> 
> 时间：2012-10-04T12:42:30.727
> 
> 标签：jquery, button, jquery-mobile, stoppropagation

嗨，我的移动网站主页上有一个自动完成功能。
当我输入文本时，一些自动完成条目将出现在按钮顶部。
当我单击悬停在按钮上方的条目时，将调用按钮事件。

是否可以更改事件的顺序？因为如果按钮事件最后调用，我可以使用 stopPropagation()。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:06:38.623

事实证明这是最好的解决方案。谢谢@贾斯汀·萨拉切诺！

*在焦点离开输入字段之前禁用按钮单击事件会满足您的需求吗？您可以将单击事件处理程序添加到按钮以防止默认，然后在焦点从输入字段移开时删除处理程序*

# tridion - 为什么 Razor 模板不显示在 Tridion 中（安装后）？

> ID：12727567
> 
> 赞同：0
> 
> 时间：2012-10-04T12:42:35.467
> 
> 标签：tridion, razor-mediator

我已经在 Tridion 服务器上安装了 Razor mediator 1.2，并且该服务器也具有 .NET 4.0。

我已经按照 Razor-mediator 文档中的建议重新启动了所有服务。

安装后，当我们尝试创建新的 TBB 时，RazorTemplate 选项未显示在 TemplateType 下拉列表中。

关于为什么 RazorTemplate 选项未在 Tridion 中显示的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T12:53:20.503

一些建议：

*   如果您已正确执行所有步骤，则应尝试清除浏览器的缓存。它经常在这些情况下发挥作用。

*   如果仍然无法正常工作，您可以检查 `Tridion.ContentManager.config`, 并搜索有关剃须刀的任何参考。如果您找不到任何内容，则表示安装程序无法正常工作。（可能以管理员权限再次执行）

*   确保您创建的是 TBB 而不是组件模板。Razor 模板是 Tbb 的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T14:12:26.123

`Tridion.ContentManager.config`假设安装程序已成功安装，请检查您的 Tridion 配置文件中的以下内容。您可以从 GAC 程序集验证这一点，也可以使用配置仔细检查 PublicKeyToken。

**调解员部分：**

```
<mediators>
...
<mediator matchMIMEType="text/x-tcm-cshtml" type="Tridion.Extensions.Mediators.Razor.RazorMediator, Tridion.Extensions.Mediators.Razor, Version=1.2.0.0, Culture=neutral, PublicKeyToken=5eeceedb34d9dfd7" />

</mediators> 
```

**配置部分：**

```
<configSections>
.....
<section name="razor.mediator" type="Tridion.Extensions.Mediators.Razor.Configuration.RazorMediatorConfigurationSection, Tridion.Extensions.Mediators.Razor, Version=1.2.0.0, Culture=neutral, PublicKeyToken=5eeceedb34d9dfd7" />
...
</configSections> 
```

**模板类型：**

```
<templateTypes>
..
      <add id="8" name="RazorTemplate" mimeType="text/x-tcm-cshtml" hasBinaryContent="false" contentHandler="Tridion.Extensions.Mediators.Razor.RazorContentHandler, Tridion.Extensions.Mediators.Razor, Version=1.2.0.0, Culture=neutral, PublicKeyToken=5eeceedb34d9dfd7">
    <webDavFileExtensions>
      <add itemType="TemplateBuildingBlock" fileExtension="cshtml" />
    </webDavFileExtensions>
     </add>
</templateTypes> 
```

如果您的所有配置都正确，那么这可能只是 UI 的缓存。

您可以通过更新(web\WebUI\WebRoot\Configuration)中的`modification`计数来强制清除缓存。这只是我的 cms 上的数字，这对于您的 CMS 可能有所不同。`System.config``8`

```
<server version="6.1.0.55920" modification="8"> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T14:49:54.610

您能否检查一下您是否在正确的位置查看 COM+，请参阅屏幕截图 ---

错误 :-![错误地点][1]

![正确的地方](../Images/61d3898b1dff7720a53733669b547575.png) 正确的：- ！[]

![在此处输入图像描述](../Images/1a1aa61bee2842d569dedd6fc4ed68dd.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T13:03:58.297

您可以尝试重新安装。

# python - 使用 pickle.dumps 散列可变对象

> ID：12727571
> 
> 赞同：1
> 
> 时间：2012-10-04T12:42:46.433
> 
> 标签：python, hash, python-3.x

我明白为什么将可变对象放入字典是危险的。但是，将所有列表/集合转换为元组/冻结集是昂贵的；对于许多类型，根本没有容易获得的不可变版本。因此，有时可能值得直接散列可变对象，并采取适当的预防措施以确保相关对象永远不会被修改。

在我开始为可变对象实现[非常复杂](https://stackoverflow.com/a/8714242/336527)的自定义散列函数之前，我想检查一下使用`pickle.dumps`散列函数是否有任何缺点——无论是在性能、冲突还是其他方面。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T04:13:03.000

出于与 dict 和 set order 不确定的类似原因，不能保证 pickle 的输出是规范的。不要使用 pickle 或 pprint 或 repr 进行散列。

# objective-c - AdMob 中的重复符号

> ID：12727575
> 
> 赞同：6
> 
> 时间：2012-10-04T12:43:12.007
> 
> 标签：objective-c, ios6, admob

归档时，会出现这样的错误：

```
Projects/Dossier/MultiDocument/Helpers/GAD/libGoogleAdMobAds.a(GADGestureCFiles.o)
    duplicate symbol _tohex in:
        /Users/shmidt/Documents/App Development/Xcode Projects/Dossier/MultiDocument/Helpers/GAD/libGoogleAdMobAds.a(rc4.o)
        /Users/shmidt/Documents/App Development/Xcode Projects/Dossier/MultiDocument/Helpers/GAD/libGoogleAdMobAds.a(GADGestureCFiles.o)
    ld: 64 duplicate symbols for architecture armv7s 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-05T00:20:17.510

如果您使用的是 Admob v6.2 库，请确保您没有使用`-all_load`链接器标志，`-ObjC`而是使用链接器标志。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T09:14:28.490

如果您找不到任何“-all_load”参数，但也会显示此错误。

您必须转到“project.xcodeproj”并在“project.pbxproj”中将“-all_load”替换为“-ObjC”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-22T11:59:28.377

我在 Unity 游戏中遇到了这个问题，并且我添加了 IronSource 中介适配器，如果是你的情况，这是我找到的解决方案：你应该使用 pod。我想你知道它，但如果你不知道，它就像 Apple 产品中的 google play 服务，旨在处理要包含在项目中的外部包和库。当您手动将框架添加到项目中时，它与可能已经在项目中的同一包的其他代码冲突。在我的案例中，解决方案是从 Google 的 Admob 框架中删除“GoogleUtilities”和“nanopb”，以及从 Facebook 广告框架（存在冲突）中删除“FBCoreKit”，并将以下代码添加到 Unity 中的依赖文件中：

```
<iosPods>
        `enter code here`<iosPod name="FBAudienceNetwork" version="5.6.0" />
        `enter code here`<iosPod name="Google-Mobile-Ads-SDK" version="7.50.0" />
</iosPods> 
```

此代码让 pod 处理冲突的库并删除不允许构建成功的重复符号。

# .net - 在 WiX Burn 自定义托管引导程序中添加 WIC 作为 .NET 4.0 之前的要求

> ID：12727583
> 
> 赞同：3
> 
> 时间：2012-10-04T12:43:19.280
> 
> 标签：.net, wix, bootstrapper, burn

我无法在某些不附带 Windows 映像组件的平台上启动带有自定义托管引导程序应用程序的刻录包，这是安装 .NET 4.0（Windows 2003 就是其中之一）所必需的。

我们使用标准方法来定义托管引导程序应用程序需要什么：

```
<WixVariable Id="WixMbaPrereqPackageId" Value="Netfx4Full"/> 
```

当这个引导程序在新安装的 Windows 2003 R2 机器上运行时，它会启动 .NET 的标准要求安装程序，然后失败并出现错误。

我们试图通过执行以下操作来解决这个问题（所有非必要的东西都被剪掉了）：

```
...
<!-- Define WIC packages -->
<PackageGroup Id="PG.WIC">      
  ...
  <ExePackage Id="EP.wic_x64_enu" Cache="no" Compressed="no"  PerMachine="yes" Permanent="yes" Vital="no"  
     DisplayName="Windows Imaging Component for Windows Server 2003 x64"
     Name="{4A85FFDB-5563-4FE9-9C0E-C780A271BCC7}\WIC\wic_x64_enu.exe"
     SourceFile="$(var.SetupPrereq_SRC)\WindowsImagingComponent\x64\wic_x64_enu.exe"
     DownloadUrl="http://download.microsoft.com/download/6/4/5/645fed5f-a6e7-44d9-9d10-fe83348796b0/wic_x64_enu.exe"
     InstallCondition="(VersionNT=v5.2 AND VersionNT64 AND NOT NETFRAMEWORK40FULL)"
     InstallCommand="/q /norestart">
  </ExePackage>
</PackageGroup>
...
<!-- Define our own .NET package, and set it to be after the WIC package -->
<PackageGroup Id="PG.NetFx40Full">
  <ExePackage Id="EP.NetFx40Full" Cache="no" Compressed="no" PerMachine="yes" Permanent="yes" Vital="yes" Protocol="netfx4" 
      DisplayName="Microsoft .NET Framework 4"
      Name="{4A85FFDB-5563-4FE9-9C0E-C780A271BCC7}\NetFx\dotNetFx40_Full_x86_x64.exe"
      SourceFile="$(var.SetupPrereq_SRC)\NetFx\dotNetFx40_Full_x86_x64.exe"
      DownloadUrl="http://download.microsoft.com/download/9/5/A/95A9616B-7A37-4AF6-BC36-D6EA96C8DAAE/dotNetFx40_Full_x86_x64.exe"
      DetectCondition="NETFRAMEWORK40FULL"
      InstallCommand="/q /norestart /ChainingPackage &quot;[WixBundleName]&quot; /log %TEMP%\PG.NetFx40Full.log"
      RepairCommand="/q /norestart /repair /ChainingPackage &quot;[WixBundleName]&quot;"        
      After="EP.wic_x64_enu"        >
  </ExePackage>
</PackageGroup>
...
<!-- Change wixmbaprereqpackageid to point to our own package-->
<WixVariable Id="WixMbaPrereqPackageId" Value="PG.Netfx4Full" Overridable="no"/>
<WixVariable Id="WixMbaPrereqLicenseUrl" Value="NetfxLicense.rtf" />
...
<Chain>
  <!--Windows Imaging Component-->
  <PackageGroupRef Id="PG.WIC"/>

  <!--.Net Framework 4 -->      
  <!--Custom offline package.-->
  <PackageGroupRef Id="PG.NetFx40Full"/>
  ...
</Chain>
... 
```

这不起作用。prereq 安装程序照常启动，但是当您单击按钮开始安装时，进度条会闪烁一秒钟，然后安装程序退出。如果捆绑包再次启动，prereq 安装程序将启动，但仅显示标题和徽标，但没有按钮。我们还尝试将 After 条件放在 .NET 包组的 PackageGroupRef 上，结果相似。

所以，我的问题是：有没有办法让刻录安装多个包作为托管引导程序的先决条件，或者有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-25T00:45:30.340

使用 WiX v3.9 及更高版本，将`bal:PrereqSupportPackage="yes"`（在 v4.x 中`bal:PrereqPackage`）添加到您希望 prereq BA 安装的包中（它遵循 InstallCondition）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T15:35:29.787

您可以使用 dotNetInstaller，它是 Windows 的设置引导程序。安装 wic（在 x86 或 x64 上）后，您可以启动 Wix 安装程序。

这是一些您可以在 dotNetInstaller **configuration.xml**中使用的代码。 其中包含三个组件：wic_x86、wic_x64 和 dot Net framework 4

```
 <component executable="&quot;#CABPATH\wic_x86_enu.exe&quot; /norestart /quiet" executable_silent="" executable_basic="" install_directory="" responsefile_source="" responsefile_target="" responsefile_format="none" uninstall_executable="" uninstall_executable_silent="" uninstall_executable_basic="" uninstall_responsefile_source="" uninstall_responsefile_target="" returncodes_success="" returncodes_reboot="" exeparameters="" exeparameters_basic="" exeparameters_silent="" uninstall_exeparameters="" uninstall_exeparameters_basic="" uninstall_exeparameters_silent="" disable_wow64_fs_redirection="False" id="Windows Imaging Component (x86)" display_name="Windows Imaging Component" uninstall_display_name="" os_filter="" os_filter_min="winXP" os_filter_max="" os_filter_lcid="" type="exe" installcompletemessage="" uninstallcompletemessage="" mustreboot="False" reboot_required="" must_reboot_required="False" failed_exec_command_continue="" allow_continue_on_error="False" default_continue_on_error="False" required_install="True" required_uninstall="True" selected_install="True" selected_uninstall="True" note="" processor_architecture_filter="x86" status_installed="" status_notinstalled="" supports_install="True" supports_uninstall="False" show_progress_dialog="True" show_cab_dialog="True">
  <embedfile sourcefilepath="#APPPATH\presetup\wic_x86_enu.exe" targetfilepath="#TEMPPATH\wic_x86_enu.exe" />
  <installedcheck filename="#SYSTEMPATH\WindowsCodecs.dll" fileversion="" comparison="exists" defaultvalue="False" type="check_file" description="Installed Check" />
</component>
<component executable="&quot;#CABPATH\wic_x64_enu.exe&quot; /norestart /quiet" executable_silent="" executable_basic="" install_directory="" responsefile_source="" responsefile_target="" responsefile_format="none" uninstall_executable="" uninstall_executable_silent="" uninstall_executable_basic="" uninstall_responsefile_source="" uninstall_responsefile_target="" returncodes_success="" returncodes_reboot="" exeparameters="" exeparameters_basic="" exeparameters_silent="" uninstall_exeparameters="" uninstall_exeparameters_basic="" uninstall_exeparameters_silent="" disable_wow64_fs_redirection="False" id="Windows Imaging Component (x64)" display_name="Windows Imaging Component" uninstall_display_name="" os_filter="" os_filter_min="winXP" os_filter_max="" os_filter_lcid="" type="exe" installcompletemessage="" uninstallcompletemessage="" mustreboot="False" reboot_required="" must_reboot_required="False" failed_exec_command_continue="" allow_continue_on_error="False" default_continue_on_error="False" required_install="True" required_uninstall="True" selected_install="True" selected_uninstall="True" note="" processor_architecture_filter="x64" status_installed="" status_notinstalled="" supports_install="True" supports_uninstall="False" show_progress_dialog="True" show_cab_dialog="True">
  <embedfile sourcefilepath="#APPPATH\presetup\wic_x64_enu.exe" targetfilepath="#TEMPPATH\wic_x64_enu.exe" />
  <installedcheck filename="#SYSTEMPATH\WindowsCodecs.dll" fileversion="" comparison="exists" defaultvalue="False" type="check_file" description="Installed Check" />
</component>
<component executable="&quot;#CABPATH\dotNetFx40_Full_x86_x64.exe&quot; /norestart /quiet" executable_silent="" executable_basic="" install_directory="" responsefile_source="" responsefile_target="" responsefile_format="none" uninstall_executable="" uninstall_executable_silent="" uninstall_executable_basic="" uninstall_responsefile_source="" uninstall_responsefile_target="" returncodes_success="" returncodes_reboot="3010" exeparameters="" exeparameters_basic="" exeparameters_silent="" uninstall_exeparameters="" uninstall_exeparameters_basic="" uninstall_exeparameters_silent="" disable_wow64_fs_redirection="False" id=".NET Framework 4 (English)" display_name="Microsoft .NET Framework 4" uninstall_display_name="" os_filter="" os_filter_min="winXP" os_filter_max="" os_filter_lcid="" type="exe" installcompletemessage="" uninstallcompletemessage="" mustreboot="False" reboot_required="" must_reboot_required="False" failed_exec_command_continue="" allow_continue_on_error="False" default_continue_on_error="False" required_install="True" required_uninstall="True" selected_install="True" selected_uninstall="True" note="" processor_architecture_filter="" status_installed="" status_notinstalled="" supports_install="True" supports_uninstall="False" show_progress_dialog="True" show_cab_dialog="True">
  <installedcheck path="SOFTWARE\Microsoft\NET Framework Setup\NDP\v4\Full" fieldname="Install" fieldvalue="1" defaultvalue="False" fieldtype="REG_DWORD" comparison="match" rootkey="HKEY_LOCAL_MACHINE" wowoption="NONE" type="check_registry_value" description="Installed Check" />
  <embedfile sourcefilepath="#APPPATH\presetup\dotNetFx40_Full_x86_x64.exe" targetfilepath="#TEMPPATH\dotNetFx40_Full_x86_x64.exe" />
</component> 
```

# java - Android - 更改了 java 版本，现在改回应用程序将无法运行

> ID：12727593
> 
> 赞同：1
> 
> 时间：2012-10-04T12:44:09.320
> 
> 标签：java, android

我想在我的应用程序中使用字符串中的开关功能。当我这样做时，eclipse说我必须升级到java 1.7，我愚蠢地让它这样做了。然后它告诉我使用 Android Fix Project 来修复它。我这样做了，随后又恢复到 1.5。好（我想）

现在我的应用程序无法运行:(

这是应用程序的结构。

![在此处输入图像描述](../Images/45126bb7605f59979bf089c20e5d1454.png)

继承人的错误：主要位：

```
10-04 13:39:04.974: D/AndroidRuntime(11532): Shutting down VM
10-04 13:39:04.974: W/dalvikvm(11532): threadid=1: thread exiting with uncaught exception (group=0x40c5c1f8)
10-04 13:39:04.974: E/AndroidRuntime(11532): FATAL EXCEPTION: main
10-04 13:39:04.974: E/AndroidRuntime(11532): java.lang.RuntimeException: Unable to instantiate application com.directenquiries.assessment.tool.Globals.Global: java.lang.ClassNotFoundException: com.directenquiries.assessment.tool.Globals.Global
10-04 13:39:04.974: E/AndroidRuntime(11532):    at android.app.LoadedApk.makeApplication(LoadedApk.java:482) 
```

完整日志可在以下网址找到：http: [//pastebin.com/rMLqkDc2](http://pastebin.com/rMLqkDc2)

这是我的安卓清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.directenquiries.assessment.tool"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" >
    </uses-permission>

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:name=".Globals.Global"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Holo" >
        <activity
            android:name=".LoginPageActivity"
            android:label="@string/title_activity_login_page" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".MainPage"
            android:label="Select Item" >
        </activity>
        <activity
            android:name=".JobSheet"
            android:label="@string/title_activity_job_sheet" >
            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="com.directenquiries.assessment.tool.MainPage" />
        </activity>
        <activity
            android:name=".LocationListView"
            android:label="@string/title_activity_location_list_view" >

        </activity>
    </application>

</manifest> 
```

我不知道该怎么办

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:47:57.763

右键单击您的项目，然后转到构建路径，然后配置构建路径...

在 JavaCompiler ---> 将 Java Compiler 更新为 1.7

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T12:48:44.530

右键单击您的项目 > 属性 > 然后单击左侧面板上的“Java 编译器”。在这里您可以更改用于编译项目的 java 版本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T13:11:27.703

好的，这就是发生的事情以及我如何修复它。android“修复”将其设置回 1.5，但我显然是 1.6。我把它改回1.6，做了一个清洁，没有用。从手机上卸载它并再次清洁它并且它工作。

# android - Android ListView 当前滚动位置 Y 像素

> ID：12727594
> 
> 赞同：31
> 
> 时间：2012-10-04T12:44:10.577
> 
> 标签：android, listview, scroll, scroll-offset

我试图检测列表视图何时滚动超过像素的某个固定阈值（通过第一项的一半）。不幸的是，listview 的 getScrollY() 似乎总是返回 0 而不是滚动位置。有没有办法按像素获取实际的滚动位置？

这是我尝试使用的代码，但如前所述，它只返回 0。

```
getListView().setOnScrollListener(new AbsListView.OnScrollListener() {
    public void onScroll(AbsListView view, int firstVisibleItem,
                         int visibleItemCount, int totalItemCount) {
        Log.d("scroll", "scroll: " + getListView().getScrollY());
    }

    public void onScrollStateChanged(AbsListView view, int scrollState) {
        if (scrollState == 0)
        Log.d("scroll", "scrolling stopped");
    }
}); 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-10-04T13:15:23.503

Android 中的 ListView 没有 Y 滚动的概念，仅仅是因为内容的总高度未知。只有显示内容的高度是已知的。

但是，可以使用以下 hack 获取可见项目的当前位置/Y 滚动：

```
getListView().getChildAt(0).getTop(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-20T08:21:41.013

Malachiasz 答案的重构代码。此函数用于动态行的高度。

调用 onScroll 监听器

```
mListView.setOnScrollListener(new AbsListView.OnScrollListener() {
            @Override
            public void onScrollStateChanged(AbsListView view, int scrollState) {

            }

            @Override
            public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
                if (mCardsListView.getChildCount() > 0) {
                    int scrollY = getScrollY();
                }
            }
        }); 
```

getScrollY 函数

```
private Dictionary<Integer, Integer> mListViewItemHeights = new Hashtable<Integer, Integer>(); 
private int getScrollY() {
        View child = mCardsListView.getChildAt(0); //this is the first visible row
        if (child == null) return 0;

        int scrollY = -child.getTop();

        mListViewItemHeights.put(mCardsListView.getFirstVisiblePosition(), child.getHeight());

        for (int i = 0; i < mCardsListView.getFirstVisiblePosition(); ++i) {
            Integer hei = mListViewItemHeights.get(i);

            //Manual add hei each row into scrollY
            if (hei != null)
                scrollY += hei;
        }

        return scrollY;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-13T13:26:52.253

您需要两件事来精确定义 listView 的滚动位置：

获取当前位置：

```
int firstVisiblePosition = listView.getFirstVisiblePosition(); 
int topEdge=listView.getChildAt(0).getTop(); //This gives how much the top view has been scrolled. 
```

设置位置：

```
listView.setSelectionFromTop(firstVisiblePosition,0);
// Note the '-' sign...  
listView.scrollTo(0,-topEdge); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T13:04:18.723

您可以尝试实现`OnTouchListener`并覆盖它并使用and`onTouch(View v, MotionEvent event)`获取 x 和 y 。我刚刚创建了一个在 ListView 行上滑动的演示，它将启用一个删除按钮，用于从 ListView 中删除特定项目。你可以从我的 github 上查看源代码。`event.getX()``event.getY()`[`ListItemSwipe`](https://github.com/lalit3686/ListItemSwipe)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-06T10:37:01.130

也许它对某人有用。快速滚动列表时，先前答案的代码将不起作用。因为在这种情况下 firstVisiblePosition 可能会发生不规则的变化。在我的代码中，我不使用数组来存储位置

```
fun setOnTouchScrollListener(lv: AbsListView, onTouchScrollListener: (isDown: Boolean, offset: Int?, isScrollWorking: Boolean) -> Unit) {

    var lastItemPosition: Int = -1
    var lastItemTop: Int? = null
    var lastItemHeight: Int? = null
    var lastScrollState: Int? = AbsListView.OnScrollListener.SCROLL_STATE_IDLE

    lv.setOnScrollListener(object : AbsListView.OnScrollListener {

        override fun onScroll(view: AbsListView, firstVisibleItem: Int, visibleItemCount: Int, totalItemCount: Int) {
            val child = lv.getChildAt(0)
            var offset: Int? = null
            var isDown: Boolean? = if (firstVisibleItem == lastItemPosition || lastItemPosition == -1) null else firstVisibleItem > lastItemPosition
            val dividerHeight = if (lv is ListView) lv.dividerHeight else 0
            val columnCount = if (lv is GridView) lv.numColumns else 1

            if (child != null) {
                if (lastItemPosition != -1) {
                    when (firstVisibleItem - lastItemPosition) {
                        0 -> {
                            isDown = if (lastItemTop == child.top) null else lastItemTop!! > child.top
                            offset = Math.abs(lastItemTop!! - child.top)
                        }
                        columnCount -> offset = lastItemHeight!! + lastItemTop!! - child.top + dividerHeight
                        -columnCount -> offset = child.height + child.top - lastItemTop!! + dividerHeight
                    }
                }

                lastItemPosition = firstVisibleItem
                lastItemHeight = child.height
                lastItemTop = child.top

                if (isDown != null && (offset == null || offset != 0)
                        && lastScrollState != AbsListView.OnScrollListener.SCROLL_STATE_IDLE) {
                    onTouchScrollListener(isDown, offset, true)
                }
            }
        }

        override fun onScrollStateChanged(view: AbsListView, scrollState: Int) {
            lastScrollState = scrollState
            if (scrollState == AbsListView.OnScrollListener.SCROLL_STATE_IDLE) {
                onTouchScrollListener(true, 0, false)
                lastItemPosition = -1
                lastItemHeight = null
                lastItemTop = null
            }
        }
    })
} 
```

然后我们可以在列表视图滚动超过阈值时使用

```
private var lastThresholdOffset = 0
private var thresholdHeight = some value

setOnTouchScrollListener(listView) { isDown: Boolean, offset: Int?, isScrollWorking: Boolean ->
    val offset = offset ?: if (isDown) 0 else thresholdHeight
    lastThresholdOffset = if (isDown) Math.min(thresholdHeight, lastThresholdOffset + offset)
    else Math.max(0, lastThresholdOffset - offset)

    val result = lastThresholdOffset > thresholdHeight
} 
```

isScrollWorking - 可用于动画

# java - 如何在Oracle中选择当前月份的记录？

> ID：12727602
> 
> 赞同：3
> 
> 时间：2012-10-04T12:44:30.257
> 
> 标签：java, oracle11g

我正在编写一个 Java 程序，我需要从 Oracle 数据库中选择当月的记录。任何时候我需要为我使用的当天选择记录：

```
select * from purchases where purchase_date = to_char(sysdate, 'DD-MON-YYYY') 
```

我应该使用什么方法从当前月份中选择记录？在表格中，日期显示如下：

```
10/4/2012 //for 4th October 2012 
```

我试过

```
select * from purchases where purchase_date like to_char(sysdate, 'MON-YYYY') 
```

这当然选择什么，请协助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T13:17:31.973

如果`purchase_date`是日期。

```
select * 
from 
   purchases 
where 
   purchase_date >= trunc(sysdate,'mm') 
```

如果`purchase_date`是 VARCHAR

```
select * 
from 
   purchases 
where 
   to_date(purchase_date,'mm/dd/yyyy') >= trunc(sysdate,'mm') 
```

trunc(sysdate,'mm') 截断当前日期，保留月份，显然是年份，因此`10/04/2012 08:58`被截断为`10/01/2012 00:00`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:55:41.733

假设 purchase_date 是 a`VARCHAR2`并且格式类似于`DD-MON-YYYY`，情况似乎如此，那么：

```
select * from purchases where trunc(to_date(purchase_date,'DD-MON-YYYY'),'MONTH') = trunc(sysdate,'MONTH') 
```

# ruby-on-rails - Rails：更改语言环境并保留页面参数

> ID：12727609
> 
> 赞同：7
> 
> 时间：2012-10-04T12:44:43.073
> 
> 标签：ruby-on-rails, internationalization

我有一个导航栏，其中包含指向不同语言的链接：

```
<%= link_to t('header.english'), locale: "en" %> 
```

问题是当用户尝试在 url 中包含附加参数的页面上切换语言时。此时更改区域设置会重新加载页面并删除所有附加参数。

那么，如何将当前页面中的所有参数传递到语言环境切换链接？

例如，当

```
/page/new?param1=1&param2=2 
```

已打开，用户切换区域设置，

```
/page/new?locale=en 
```

被打开，并且两个附加参数都从 url 中剥离。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-04-02T18:30:41.117

如果您需要语言环境参数来保留所有请求，最好使用这种方法：

```
# app/controllers/application_controller.rb
def default_url_options(options={})
  { locale: I18n.locale }
end 
```

从[导轨指南](http://guides.rubyonrails.org/i18n.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-04T13:37:14.193

**编辑：这不是一个好方法。**请参阅下面的评论。

问题是您在`link_to`创建语言环境切换器链接时没有将当前参数传递给。

将您的导航栏链接更改为：

```
<%= link_to t('header.english'), params.merge(locale: "en") %> 
```

另请参阅：[将查询字符串参数添加到 link_to](https://stackoverflow.com/questions/2695538/add-querystring-parameters-to-link-to)

# c# - 点击 LayoutView 中的 Groupcaption

> ID：12727610
> 
> 赞同：0
> 
> 时间：2012-10-04T12:44:44.623
> 
> 标签：c#, winforms, devexpress, xtragrid

我有一个 Xtragrid，我在其中使用 Layoutview。在我的卡片中，我有两个组，其中包含一些内容（没有 grouprow！）。如果用户单击 groupcaption，是否可以触发单击事件？

这是一个正常的群体！例如，选择 3 个文本编辑器，然后在设计器中右键单击-> 组。您可以在布局视图的卡片中执行相同的操作。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:27:25.460

您可以使用 View 的 MouseDown 事件处理程序并使用 HitTests 来查看它是否是一个布局项，然后测试布局项以查看它是否是一个组并检查它的边框信息以获取标题边界。

```
 LayoutView View = (sender as LayoutView);
        var hi = View.CalcHitInfo(e.Location);
        if (hi.HitTest == LayoutViewHitTest.LayoutItem && hi.LayoutItem is DevExpress.XtraLayout.LayoutControlGroup)
        {
            var Border = (hi.LayoutItem.ViewInfo.BorderInfo as DevExpress.Utils.Drawing.GroupObjectInfoArgs);
            if (Border.CaptionBounds.Contains(e.Location))
            {
                MessageBox.Show("Hit Group: " + Border.Caption);
                return;
            }
        }
        MessageBox.Show("Missed!"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:18:15.900

使用 gridview mousemove 事件获取鼠标位置。

```
 private void grvReleaseInfo_MouseMove(object sender, MouseEventArgs e)
    {
        mouseLocation = e.Location;
    } 
```

然后转到gridview的click事件并检查鼠标位置与您的项目的位置（在我的示例中为groupcaption）

```
private void grvReleaseInfo_Click(object sender, EventArgs e)
        {
            if ((mouseLocation.X > 38) &&
                (mouseLocation.X < 85) &&
                (mouseLocation.Y > 46) &&
                (mouseLocation.Y < 117))
            {
                //Do sth.
            } 
```

鼠标位置是“Point”类型的变量。如果您不知道坐标，则可以在调试器中设置断点并在单击项目的左上角然后单击右下角时观察鼠标位置。然后你有你必须检查的范围。

问候

# java - 来自一个 Maven 项目的多个程序集

> ID：12727612
> 
> 赞同：35
> 
> 时间：2012-10-04T12:44:46.423
> 
> 标签：java, maven, maven-assembly-plugin

我们有不同的java源代码“项目”。3 个项目完全相同（fatclient、相同的依赖项等）——只有另一个主类需要调用。

今天我们有一个带有主类的基础项目：

```
<project>
    <groupId>net.company.BaseTool</groupId>
    <artifactId>BaseTool</artifactId>
    <version>1.1.0-SNAPSHOT</version>
    <packaging>jar</packaging>

    <name>BaseTool</name>
    <build>
        <plugins>
            <plugin>
                <artifactId>maven-assembly-plugin</artifactId>
                <configuration>
                    <archive>
                        <manifest>
                            <mainClass>net.company.BaseTool</mainClass>
                        </manifest>
                    </archive>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

和其他依赖于基础项目的项目

```
<project>
    <groupId>net.company.AnotherTool</groupId>
    <artifactId>AnotherTool</artifactId>
    <version>1.1.0-SNAPSHOT</version>
    <packaging>jar</packaging>

    <name>AnotherTool</name>
    <build>
        <plugins>
            <plugin>
                <artifactId>maven-assembly-plugin</artifactId>
                <configuration>
                    <archive>
                        <manifest>
                            <mainClass>net.company.AnotherTool</mainClass>
                        </manifest>
                    </archive>
                </configuration>
            </plugin>
        </plugins>
    </build>
    <dependencies>
        <dependency>
            <groupId>net.company.BaseTool</groupId>
            <artifactId>BaseTool</artifactId>
            <version>1.1.0-SNAPSHOT</version>
        </dependency>
    </dependencies>
</project> 
```

我们这样做是因为我们需要简单的双击可启动应用程序。

但我不想为每个应用程序创建一个额外的 java 项目。

我的问题是：**是否可以从一个项目创建多个程序集？**如果是，应该怎么做。

**解决方案来了**

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>my.company.toolbox</groupId>
    <artifactId>toolbox</artifactId>
    <version>1.1.0-SNAPSHOT</version>
    <packaging>jar</packaging>

    <name>toolbox</name>
    <url>http://wiki.company.my/toolbox</url>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-assembly-plugin</artifactId>
                <version>2.6</version>
                <configuration>
                    <finalName>toolbox</finalName>
                    <appendAssemblyId>false</appendAssemblyId>
                    <descriptorRefs>
                        <descriptorRef>jar-with-dependencies</descriptorRef>
                    </descriptorRefs>
                </configuration>
                <executions>
                    <execution>
                        <id>ToolOne</id>
                        <phase>package</phase>
                        <goals>
                            <goal>single</goal>
                        </goals>
                        <configuration>
                            <finalName>ToolOne</finalName>
                            <archive>
                                <manifest>
                                    <mainClass>my.company.ToolOne</mainClass>
                                </manifest>
                            </archive>
                        </configuration>
                    </execution>
                    <execution>
                        <id>ToolTwo</id>
                        <phase>package</phase>
                        <goals>
                            <goal>single</goal>
                        </goals>
                        <configuration>
                            <finalName>ToolTwo</finalName>
                            <archive>
                                <manifest>
                                    <mainClass>my.company.ToolTwo</mainClass>
                                </manifest>
                            </archive>
                        </configuration>
                    </execution>
                    <execution>
                        <id>ToolThree</id>
                        <phase>package</phase>
                        <goals>
                            <goal>single</goal>
                        </goals>
                        <configuration>
                            <finalName>ToolThree</finalName>
                            <archive>
                                <manifest>
                                    <mainClass>my.company.ToolThree</mainClass>
                                </manifest>
                            </archive>
                        </configuration>
                    </execution>
                    <execution>
                        <id>ToolFour</id>
                        <phase>package</phase>
                        <goals>
                            <goal>single</goal>
                        </goals>
                        <configuration>
                            <finalName>ToolFour</finalName>
                            <archive>
                                <manifest>
                                    <mainClass>my.company.ToolFour</mainClass>
                                </manifest>
                            </archive>
                        </configuration>
                    </execution>
                </executions>
            </plugin> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-04T12:48:47.750

您可以使用程序集插件的[不同执行](http://maven.apache.org/guides/mini/guide-configuring-plugins.html#Using_the_executions_Tag)，然后[将生成的程序集附加](http://www.mojohaus.org/build-helper-maven-plugin/attach-artifact-mojo.html)到构建中。当然，您必须在程序集插件配置中为工件配置不同的最终名称。

# applescript - Applescript“混合凭据”错误

> ID：12727613
> 
> 赞同：3
> 
> 时间：2012-10-04T12:44:49.530
> 
> 标签：applescript

我在 Apple Communities 上问过这个问题，得到的回复总数为零。你们看起来聪明多了，所以我想我会在这里问一下你的想法。

当我尝试通过外部进程触发 Applescript 时，开始出现错误。控制台错误如下：

12/09/2012 11:01:39.205 osascript [269]：脚本添加加载仅限于系统域，因为此进程具有混合凭据 (issetugid=0 r/e uid=501/0 gid=20/20)

当我在 Mac（Mini - Mountain Lion 10.8.1）上本地运行脚本时，它运行良好。

发生的事情如下。

在由 Crestron 处理器驱动的家庭自动化环境中，我有一台 MacMini 作为音乐服务器。MacMini 连接到两个区域，一个通过光纤输出，另一个通过 USB 端口之一连接到 DAC。当我在两个区域之一中选择“听 iTunes”时，控制器通过 UDP 向 MacMini 上运行的程序发送命令，触发脚本更改为适当的音频输出。

一切都运行良好，直到昨天突然触发脚本的程序，同时报告它已正确执行正确的脚本，并没有切换输出并且上面的消息出现在控制台上。

我已经在这里阅读了我可以阅读的内容，因此重置了 PRAM 和 SMC（所有三个 dongs ......）并删除了脚本触发程序，运行 Clean My Mac 并重新启动，但均无济于事。

任何人都可以帮我解决这个问题，它必须是简单的，因为它正在工作......当然？我没有运行更新或更改我能想到的任何其他内容......

任何和所有的想法和意见将不胜感激。

谢谢

马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:54:47.750

从错误来看，您似乎安装了一个名为“脚本添加”的 applescript 插件，这就是导致错误的原因。您很可能不需要此插件来执行您的 applescript 代码。所以我会从我的系统中删除所有脚本添加，看看applescript是否仍然有效。

在您的系统中搜索脚本添加... ~/Library/ScriptingAdditions 和 /Library/ScriptingAdditions。

如果您确实需要做一些脚本添加正在为您做的事情，那么可能还有其他方法可以在没有附加组件的情况下执行相同的任务。

# c# - 如何添加应用栏分隔符

> ID：12727616
> 
> 赞同：4
> 
> 时间：2012-10-04T12:45:03.817
> 
> 标签：c#, xaml, windows-8

我正在寻找在我的 C#/XAML 应用程序中的应用程序栏命令之间添加分隔符。类似于[http://msdn.microsoft.com/en-us/library/windows/apps/Hh465309(v=win.10).aspx中描述的内容](http://msdn.microsoft.com/en-us/library/windows/apps/Hh465309(v=win.10).aspx)

我怎样才能以正确的方式做到这一点？

我看到了使用 Pipe 字符的建议 | 或一条线。但与 JS/HTML 中所做的相比，这些建议通常看起来略有不同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T13:16:35.740

你应该可以用一条线来做到这一点。[这里](http://www.pixelvalley.de/?p=952)有一个示例，如下所示：

```
<Line X1="0" Y1="60"  Margin="0,10,0,0" StrokeThickness="3" Stroke="White"></Line> 
```

![在此处输入图像描述](../Images/375eb546c29571b569b69755cfe06f86.png)

使用`Margin`, `X1`, `Y1`,你应该可以让它看起来像你想要的那样`StrokeThickness`。`Stroke`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-09T14:30:23.750

通用 Windows 8.1 XAML 应用程序不允许您在 BottomAppBar 中绘制一条线。相反，您可以像这样使用**AppBarSeparator**控件

```
<Page.BottomAppBar>
    <CommandBar>
        <AppBarButton
            Icon="Delete"
            Label="Delete Icon" />
        <AppBarSeparator />
        <AppBarButton
            Icon="Delete"
            Label="Delete Icon" />
    </CommandBar>
</Page.BottomAppBar> 
```

# mysql - MySql存储过程更新数据库记录

> ID：12727619
> 
> 赞同：1
> 
> 时间：2012-10-04T12:45:13.600
> 
> 标签：mysql, sql, stored-procedures

我之前没有写过任何`MySql`存储过程，所以我根本不知道它们。我有一个数据库表，其中有一些记录。主要列是`dateTime`- 这条记录何时保存在数据库中。

我编写了 MySql 存储过程来选择指定日期的每条记录：

```
CREATE PROCEDURE getMessages(IN dateFrom DATETIME)   
    SELECT * FROM EsbMessage WHERE dateTime <= dateFrom; 
```

这是电话：

```
CALL getMessages('2012-10-04 13:11:09'); 
```

这工作正常，它返回我指定日期的记录。

我需要做的是：

1.  **如果记录超过一周，我需要更新另一列。**
2.  **如果记录超过一年，我需要删除该记录。**

我可以通过编程轻松地做到这一点，但在这种情况下，我必须使用存储过程来做到这一点。

所以我在想这样的事情：

```
CREATE PROCEDURE updateMessages(IN dateFrom DATETIME)   
    BEGIN
      SELECT * FROM EsbMessage WHERE dateTime <= dateFrom;
      #for each message
      #if the message is over one week old but not over one year old:
      UPDATE EsbMessage SET body = '';
      #if message is over one year old:
      DELETE FROM EsbMessage WHERE dateTime = #message.dateTime
END 
```

但是我不知道如何在存储过程中使用 for 循环，以及如何根据我的要求编写 if 语句以及我现在不知道如何计算 MySql 中的日期。例如，如果我有当前日期，那么我需要从当前日期中减去 365 天。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:53:26.517

您不需要循环，只需将条件放在 WHERE 子句中即可：

```
#if the message is over one week old but not over one year old:
UPDATE EsbMessage SET body = ''
WHERE dateTime >= DATE_SUB(NOW(),INTERVAL 1 WEEK) AND dateTime <= DATE_SUB(NOW(),INTERVAL 1 YEAR);

#if message is over one year old:
DELETE FROM EsbMessage WHERE dateTime >= DATE_SUB(NOW(),INTERVAL 1 YEAR); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:53:58.427

此处描述了如何循环和使用 if 子句：[http ://www.mysqltutorial.org/stored-procedures-loop.aspx](http://www.mysqltutorial.org/stored-procedures-loop.aspx)

我会在没有循环的情况下做到这一点：

```
CREATE PROCEDURE updateMessages(IN dateFrom DATETIME)   
BEGIN      
  UPDATE EsbMessage SET body = '' where dateTime <= dateFrom -(86400*7); //86400 = 1 day
  #if message is over one year old:
  DELETE FROM EsbMessage where dateTime <= dateFrom -(86400*365);
END 
```

# ruby-on-rails - Rails - 在 18 年前的表单中设置 date_select

> ID：12727625
> 
> 赞同：6
> 
> 时间：2012-10-04T12:45:47.160
> 
> 标签：ruby-on-rails, date, datetime

很简单的问题，但似乎无法解决！我正在创建一个出生日期表格，以确保用户只有年满 18 岁才能注册。我有一个 date_select，可以设置开始年份，但是如何设置结束年份以便这是18年前？我也将在模型中使用验证器，但不希望有人能够首先输入错误的信息。

我已经查看了所有内容，但只能找到有关如何将 time.ago 与验证器一起使用的信息，我已经对其进行了排序，而不是在表单本身中。

或者，或者，哪个可能更好 - 有没有一种方法可以为前两个项目（日和月）设置一个 date_select 下拉菜单，以及一个用于年份的文本框？这些方面的东西：

```
<%= f.date_select :date_of_birth, :order => [:day, :month] %><%= f.text_field :date_of_birth.year, :length => 4 %> 
```

这是我到目前为止所拥有的：

```
<%= f.label :date_of_birth %><br />
<%= f.date_select :date_of_birth, :order => [:day, :month, :year], :start_year => 1900, :end_year =>  %> 
```

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T13:08:15.903

尝试

```
Time.now.year - 18 
```

或者

```
Date.today.year - 18 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T13:15:39.437

[在此页面](http://apidock.com/rails/ActionView/Helpers/DateHelper/date_select)上找到了答案。只需将其更改为 -18 而不是 +5：

```
<%= f.date_select :date_of_birth, :order => [:day, :month, :year], :start_year => 1900, :end_year => Time.now.year - 18 %> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-19T15:15:37.573

你也可以这样做：

```
18.years.ago.year 
```

# android - android中的图形和动画

> ID：12727628
> 
> 赞同：0
> 
> 时间：2012-10-04T12:45:52.083
> 
> 标签：android, animation, graphics, opengl-es, android-ndk

我在 android 中做项目我的主题是无线游戏（通过蓝牙）

我开发了一些基本游戏，例如 TicTacToy 和 SOS，但现在我想要一些游戏中的图形和动画

我有谷歌，但没有找到好的教程，否则我对此一无所知是最好的和容易的..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:48:35.813

参见[NeHe](http://insanitydesign.com/wp/projects/nehe-android-ports/)安卓教程，你可以在[这里找到源代码](http://code.google.com/p/nehe-android/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T12:48:55.017

您可以在[此处获得有关 Android 的 OpenGL 的教程](http://www.learnopengles.com/android-lesson-one-getting-started/)

# visual-studio-2010 - 如何在 Visual Studio 中为安装/部署项目配置构建后事件

> ID：12727631
> 
> 赞同：8
> 
> 时间：2012-10-04T12:46:10.273
> 
> 标签：visual-studio-2010, visual-studio, setup-deployment, pre-build-event

我的解决方案有两个项目。一个是我的实际项目，另一个是设置项目。

我的实际项目有一个报告文件夹，用于存储我的所有 ssrs 报告。我在安装项目中有一个名为“SSRS_Repor”的文件夹。现在我希望当我进行批量构建时重新生成我的项目设置，然后我想将我实际项目的报告文件夹中的所有文件复制到我的设置项目中的 SSRS_Repor。

如果我可以自动将文件从一个位置复制到我的安装项目的另一个文件夹，那么我可以摆脱手动复制 rdls 文件。我听说这可以通过设置/部署项目来实现。我在谷歌上搜索了这个以获取详细的分步说明，但我没有得到任何好的链接。所以请指导我该怎么做。

我也把它发布到另一个论坛，有人在下面告诉我：

```
Open or create a setup/deployment project in Visual Studio 2005
Press F4 to display the Properties window
Click on the name of your setup/deployment project in the Solution Explorer
Click on the PostBuildEvent item in the Properties window to cause a button labeled "..." to appear
Click on the "..." button to display the Post-build Event Command Line dialog
Add a command line of your choice in the Post-build event command line text box
Build your project in Visual Studio and verify that the post-build event is executed after the main MSI build 
```

所以没关系，但是我需要写什么才能将文件从一个位置复制到另一个位置？我不清楚。所以现在这对我来说最重要的是在安装生成期间为复制文件写什么。

我得到了另一个线索，如下所示。用于设置 Pre/Post Build Event 的脚本，但不正确。我有一个样本

**复制 /Y "$(TargetDir)$(ProjectName).dll" "$(SolutionDir)lib\$(ProjectName).dll"**

上面的陈述或行对我来说不清楚。在我的情况下我需要写什么？我需要一个分步指南。

这是我的项目结构的截图

![在此处输入图像描述](../Images/5ba6bf60c1f141a5f245894e12801618.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-17T19:02:42.833

简单回答你的问题：

您在构建事件中输入的命令（无论是 pre 还是 post）与您在命令行框中输入的命令相同。

在您的示例中：

```
copy /Y "$(TargetDir)$(ProjectName).dll" "$(SolutionDir)lib\$(ProjectName).dll" 
```

**copy**是实际的 DOS 复制命令。

**/Y**是阻止确认提示的常规开关。

**“$(TargetDir)$(ProjectName).dll”**是要复制的源文件。

**“$(SolutionDir)lib\$(ProjectName).dll”**是复制文件的目的地。

您可以参考此处以获取有关批处理文件命令的其他信息：[批处理命令列表](http://www.robvanderwoude.com/batchcommands.php)

**$({Identifier})**是可以在 Visual Studio Pre/Post Build 事件设计器中使用的宏。

有关宏的更多详细信息，您可以参考 MSDN 在线帮助：[MSDN 宏列表](http://msdn.microsoft.com/en-us/library/42x5kfw4%28v=vs.100%29.aspx)

提供给您的线路不会做您想做的事。它通常用于将 DLL 文件复制到其他项目或解决方案使用的库文件夹中。

您找到的创建新构建事件的解决方案是正确的。

您剩下要做的就是写下实际复制文件的命令。

它看起来像这样：

```
XCOPY "$(SolutionDir)TestProject\Reports\*.*" "$(SolutionDir)TestSetup1\SSRS_Repor" /Q /E /I 
```

/问：安静| 不显示正在复制的文件

/E ：递归（复制子文件夹结构和文件）

/I ：如果目标不存在，则认为它是一个文件夹（如果需要，将创建一个新文件夹）

# regex - 使用 VB.net 和 RegEx 从字符串中删除所有 web url

> ID：12727634
> 
> 赞同：1
> 
> 时间：2012-10-04T12:46:32.377
> 
> 标签：regex, vb.net, replace

我想要一个函数（在 VB.net 中），它传递一个字符串，然后使用正则表达式从该字符串中删除任何网址。它需要能够处理不同格式的 url，例如：

```
http://www.mysite.com
https://www.mysite.com
www.mysite.com
http://mysite.co.uk/mypage.htm 
```

它还应该去掉任何包含 web url 的锚标记。

基本上，它不应该期望 url 以`http`(or `https`) 为前缀，也不应该期望有`www.`or `.com`。

然后该函数返回原始字符串，尽管已删除任何网址。

到目前为止，我所能想到的只是以下内容（尽管这不适合包含在锚标签中的 url），并且我注意到如果我将 2 个 url 仅用一个空格分隔，它会留下一个他们。

```
<Extension()> _
    Public Function ReplaceWebUrls(ByVal s As String) As String
        s = " " + s + " "

        s = Regex.Replace(s, "([\s])(www\..*?|http://.*?)([\s])", " ")
        s = Regex.Replace(s, "([\s])(https://.*?)([\s])", " ")

        Return s.Trim()
    End Function 
```

VB.net 不是我通常使用的东西，但这次我别无选择，正则表达式不是我的强项:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:13:02.857

使用正则表达式模式

```
\b(?:https?://|www\.)\S* 
```

或者

```
(?:(?<=\s)|^)(?:https?://|www\.)\S* 
```

并用空字符串替换每个匹配项。

# c# - C# WPF：使用鼠标创建用于绘制形状的 UI

> ID：12727636
> 
> 赞同：3
> 
> 时间：2012-10-04T12:46:36.370
> 
> 标签：c#, .net, wpf, graphics

我正在使用 WPF 在 C# .NET 中开发应用程序。我希望用户能够在绘图区域上绘制形状。形状是曲折线和多边形。线段的端点应该是小方块，如下图所示。在某些情况下，我需要线段中间的箭头，如下图所示。

![示例图像](../Images/c245330049a12cbdd8005d26d71d4507.png)

我通过向画布添加线条并调整鼠标事件的线条大小来部分实现绘图。但是，我无法在线段和箭头的端点上创建小方块。

是否有任何包或工具可以提供绘制此类形状的功能？

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T16:34:33.200

解决此问题的常用方法是使用 Adorners。基本上，有一个为装饰者渲染的虚拟层。您可以使用它们通过一些胶水代码在屏幕上拖动/调整（除其他外）视觉元素的大小。

这是微软关于这个主题的一个页面：http: [//msdn.microsoft.com/en-us/library/ms743737.aspx ?ppud=4](http://msdn.microsoft.com/en-us/library/ms743737.aspx?ppud=4)

# linux - 查找在另一个文件一小时内修改的文件

> ID：12727642
> 
> 赞同：3
> 
> 时间：2012-10-04T12:46:56.760
> 
> 标签：linux, unix, find

例如，如果我有 3 个名为 1.txt、2.txt 和 3.txt 的文件，并且它们相隔一个小时创建，分别是下午 1 点、2 点和 3 点。我需要的是一个命令，它可以查找特定文件一小时内修改的所有文件。

我和终端里的文件在同一个目录，所有文件都是setuid权限

我一直在尝试：

寻找 。-type f -perm -4000 -newer 2.txt -mmin -60 -print

这应该返回 3.txt 但它没有

在 2.txt 之前或之后的一小时内创建的文件有什么用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:56:28.603

这是我的逻辑-

首先在某个变量中获取自 Epoch 以来最后一次访问文件的时间（以秒为单位）。

```
time_in_sec=$(stat -c %X 2.txt) 
```

获取最后一小时的时间（即返回 3600 秒）

```
one_hr_old_time_in_sec=`expr $time_in_sec - 3600` 
```

将其转换为适合 find 命令的格式

```
newerthan=$(date -d @$one_hr_old_time_in_sec '+%m-%d-%y%n %H:%M:%S') 
```

将原始文件的时间转换为适合查找命令的格式

```
olderthan=$(date -d @$time_in_sec '+%m-%d-%y%n%H:%M:%S') 
```

使用 find 命令获取两个时间段之间修改的文件列表

```
find . -newermt "$newerthan" ! -newermt "$olderthan" -print 
```

如果可行，您可以编写一个小 shell 脚本，它将文件名作为参数，也可以尝试 +3600。
老实说，我还没有尝试过。希望它有效！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T22:17:42.057

尝试这个

触摸 /tmp/temp -t time1

触摸 /tmp/ntemp -t time2

寻找 。-较新的 /tmp/temp -a ！-较新的 /tmp/ntemp -exec ls -l {} \; 2>/开发/空

在哪里

time1 = 文件创建时间 - 1 小时

time2 = 文件创建时间 + 1hr

前任：

时间1 = 201210041500

时间2 = 201210041700

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-19T13:38:03.273

可以简化先前的解决方案，因为 -newermt 应接受与“日期”相同的格式，包括自纪元以来 N 秒的 @N。

同样对于“stat”命令，最好使用-Y（最后修改时间）而不是-X（最后访问时间）。

所以查找文件修改+或-2.txt的1小时的命令是

```
N=$(stat -c %Y 2.txt)  
find . -newermt @$((N-3600)) ! -newermt @$((N+3600)) -print 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T14:35:30.803

如果您在下午 4 点之后运行它，以您的示例为例，它不会返回是有道理的，因为这`3.txt`意味着`-newer 2.txt -mmin -60`“在过去 60 分钟内修改，并且比”更近`2.txt`”，而不是“在 60 分钟后修改`2.txt`”。我认为`find`目前没有选项可以做你想做的事（至少，我没有的版本），但在`python`or中编写脚本应该不会太难`perl`。

# directory - 指南针：如何引用具有相同文件夹名称的不同精灵？

> ID：12727643
> 
> 赞同：1
> 
> 时间：2012-10-04T12:46:59.917
> 
> 标签：directory, sprite, conflict, compass-sass

假设我们在`img`标准 Compass 项目的文件夹中有 2 个 sprite 文件夹。在每个文件夹中，我们还有另外 2 个名称相同的文件夹：

```
project/img/chapter1/icons
project/img/chapter2/icons 
```

我们知道 Compass 使用最后一个文件夹名称来引用精灵。但是，在这种情况下，如何称呼他们每个人呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T01:39:22.150

不要使用魔法，使用助手：

```
$icons1-sprite: sprite-map("project/img/chapter1/icons/*.png");
$icons2-sprite: sprite-map("project/img/chapter2/icons/*.png"); 
```

请参阅此处了解更多信息：[http ://compass-style.org/reference/compass/helpers/sprites/](http://compass-style.org/reference/compass/helpers/sprites/)

# ruby-on-rails - Ruby on Rails：提交到表的两种不同方式

> ID：12727646
> 
> 赞同：0
> 
> 时间：2012-10-04T12:47:07.253
> 
> 标签：ruby-on-rails, ruby, database, controller

我有一个应用程序，用户可以在其中提交项目。对于每个字段，他们可以选择将新数据放入数据库，或者从过去的项目中选择旧数据来填充该字段。

在我的新视图中，我无法让它适用于这段代码：

```
<%= form_for(@technol) do |tech| %>   

<%= fields_for(@project_technol) do |ab| %>

<%=  text_field_tag :tech, nil, :maxlength => 30 %>
OR<br />

<%= ab.label "All Tech"%> </br>
<%= collection_select( :technols, :id, Technol.all, :id, :tech, {}, {:multiple => true } ) %>
</div>
<% end %>

<% end %> 
```

目前，用户可以从 collection_select 中选择许多技术，并将它们与项目一起保存，但我试图让他们选择通过文本框将自己的技术放入其中。

我的控制器动作：

**新的**

```
def new
   @project = Project.new
   @technol = Technol.new(params[:tech])

   @all_technols = Technol.all
   tech_ids = params[:technols][:id].reject(&:blank?) unless params[:technols].nil?

   @project_technol = @project.projecttechnols.build

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @project }
    end
  end 
```

**创造**

```
def create

    @project = Project.new(params[:project])

params[:technols][:id].each do |tech|

if !tech.empty?

@project.projecttechnols.build(:technol_id => tech) 

end

end

    respond_to do |format|
      if @project.save
        format.html { redirect_to @project, notice: 'Project was successfully created.' }
        format.json { render json: @project, status: :created, location: @project }
      else
        format.html { render action: "new" }
        format.json { render json: @project.errors, status: :unprocessable_entity }
      end
    end
  end 
```

总而言之，我希望用户可以选择将新技术输入数据库，并从下拉列表中选择现有技术，然后将所有技术保存在项目中，并将输入的新技术保存在技术表中。

有任何想法吗？我是一个 Rails 菜鸟，所以在尝试回答时请记住这一点。任何帮助都感激不尽。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:51:44.777

使用令牌字段而不是下拉和文本字段怎么样？

检查修订后的 RailsCast： [http: //railscasts.com/episodes/258-token-fields-revised](http://railscasts.com/episodes/258-token-fields-revised)

如果您没有订阅 RailsCast，这是免费的原始屏幕截图： [http ://railscasts.com/episodes/258-token-fields](http://railscasts.com/episodes/258-token-fields)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:17:48.057

我建议您使用接受多个值的自动完成功能。这将改善您的视图，并且编码将很容易

# javascript - 将jQuery 数据表 aLengthMenu 显示为链接而不是我正在尝试使用 jQuery Datatables 插件。它拥有我想要的一切，除了显示 aLengthMenu 变量的方式没有任何灵活性。它将它显示在一个 <select>下拉列表中，这很好，但我的设计不灵活，并且希望变量只是链接。这是它当前的显示方式：“aLengthMenu”：[[5,15,30,60,-1],[5,15,30,60,“All”]] 我希望它只显示链接，如这样人们只需单击一个链接，它就会 ID：12727649 赞同：4 时间：2012-10-04T12:47:17.843 标签：javascript, jquery, jquery-datatables 回答 #1 赞同：3 时间：2012-10-04T13:34:20.160 如果不打开 jquery.dataTables.js 文件并对其进行编辑，就没有简单的方法可以做到这一点。是的，你是对的......你必须编辑'_fnFeatureHtmlLength'函数。 我正在使用 jquery.dataTables.js 版本 1.9.1 转到“_fnFeatureHtmlLength”函数（在文件中搜索“函数_fnFeatureHtmlLength（oSettings）”，你应该找到它，在第 2296 行挖掘） 由于您正在编辑此文件，因此我会先进行备份。另外，注释掉你要替换的行，这样你就可以随时参考它们。 编辑 function _fnFeatureHtmlLength(oSettings) { if (oSettings.oScroll.bInfinite) { return null; } /* This can be overruled by not using the _MENU_ var/macro in the language variable */ var sName = 'name="' + oSettings.sTableId + '_length"'; //var sStdMenu = '<select size="1" '+sName+'>'; var sStdMenu = ''; var i, iLen; var aLengthMenu = oSettings.aLengthMenu; if (aLengthMenu.length == 2 && typeof aLengthMenu[0] === 'object' && typeof aLengthMenu[1] === 'object') { for (i = 0, iLen = aLengthMenu[0].length; i < iLen; i++) { //sStdMenu += '<option value="' + aLengthMenu[0][i] + '">' + aLengthMenu[1][i] + '</option>'; sStdMenu += '<a href="#" value="' + aLengthMenu[0][i] + '">' + aLengthMenu[1][i] + '</a>'; } } else { for (i = 0, iLen = aLengthMenu.length; i < iLen; i++) { //sStdMenu += '<option value="' + aLengthMenu[i] + '">' + aLengthMenu[i] + '</option>'; sStdMenu += '<a href="#" value="' + aLengthMenu[i] + '">' + aLengthMenu[i] + '</a>'; } } //sStdMenu += '</select>'; var nLength = document.createElement('div'); if (!oSettings.aanFeatures.l) { nLength.id = oSettings.sTableId + '_length'; } nLength.className = oSettings.oClasses.sLength; nLength.innerHTML = '<label>' + oSettings.oLanguage.sLengthMenu.replace('_MENU_', sStdMenu) + '</label>'; /* * Set the length to the current display length - thanks to Andrea Pavlovic for this fix, * and Stefan Skopnik for fixing the fix! */ //$('select option[value="' + oSettings._iDisplayLength + '"]', nLength).attr("selected", true); //$('select', nLength).bind('change.DT', function (e) { $('a', nLength).bind('click', function (e) { //var iVal = $(this).val(); e.preventDefault(); var iVal = $(this).attr('value'); /* Update all other length options for the new display */ var n = oSettings.aanFeatures.l; for (i = 0, iLen = n.length; i < iLen; i++) { if (n[i] != this.parentNode) { //$('select', n[i]).val(iVal); } } /* Redraw the table */ oSettings._iDisplayLength = parseInt(iVal, 10); _fnCalculateEnd(oSettings); /* If we have space to show extra rows (backing up from the end point - then do so */ if (oSettings.fnDisplayEnd() == oSettings.fnRecordsDisplay()) { oSettings._iDisplayStart = oSettings.fnDisplayEnd() - oSettings._iDisplayLength; if (oSettings._iDisplayStart < 0) { oSettings._iDisplayStart = 0; } } if (oSettings._iDisplayLength == -1) { oSettings._iDisplayStart = 0; } _fnDraw(oSettings); }); //$('select', nLength).attr('aria-controls', oSettings.sTableId); return nLength; } 我还对 datatables.css 文件进行了更改： .dataTables_length a{ margin-right:6px; } 但是你可以设置它的样式。同样在我编辑的函数中的单击事件中，您可能希望将“活动”类添加到所选的“a”标签和样式中，但是您想要。请记住从所有其他“a”中删除活动类。 我还没有完全测试这些更改，并且由于我没有编写数据表，我不知道这些更改是否会产生任何副作用。另外我没有使用任何插件进行测试...所以使用风险自负！</select>

# c# - ViewData[var] 由相同的 SelectList 填充，而不是不同的

> ID：12727652
> 
> 赞同：1
> 
> 时间：2012-10-04T12:47:30.013
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, c#-4.0

我有一个乐队标题列表，我希望根据 BandID 为每个标题附加一个 SelectList。

所以首先我得到清单： -

```
List<BandQuestionTitles> bandQuestTitles = viewModel.PopulateBandQuestionTitles(); 
```

然后我在 BandQuestionTitles 上有一个循环，以从 SelectList 填充 ViewData[var]：-

```
foreach (var bandQuestTitleItem in bandQuestTitles)
    {
        //populate the dropdownlist
        string strViewDataString = bandQuestTitleItem.BandQuestTitlesText + "Data";
        ViewData[strViewDataString] = new SelectList(viewModel.bandQuestionList.Where(p => p.BandQuestTitleID == bandQuestTitleItem.BandQuestTitlesID), "BandQuestID", "BandQuestText");
    } 
```

但是由于某种原因，虽然我得到了正确的 7 ViewData [“”]，但我总是得到相同的 SelectList

当我对其进行硬编码时，它工作正常：-

```
ViewData["PersonalData"] = new SelectList(viewModel.bandQuestionList.Where(p => p.BandQuestTitleID == 1), "BandQuestID", "BandQuestText");
ViewData["BusinessData"] = new SelectList(viewModel.bandQuestionList.Where(p => p.BandQuestTitleID == 2), "BandQuestID", "BandQuestText"); 
```

我在循环中做错了什么？

感谢您的帮助和时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:56:27.620

当您认为它执行时，您的 LINQ 似乎没有被执行。

尝试这个：

```
new SelectList(viewModel.bandQuestionList.Where(p => p.BandQuestTitleID == bandQuestTitleItem.BandQuestTitlesID)**.ToList()**, "BandQuestID", "BandQuestText"); 
```

MS的相关文章：

[http://msdn.microsoft.com/en-us/library/bb738633.aspx](http://msdn.microsoft.com/en-us/library/bb738633.aspx)

> 在返回值序列的查询中，查询变量本身从不保存查询结果，只存储查询命令。查询的执行被推迟，直到查询变量在 foreach 或 For Each 循环中被迭代。这称为延迟执行；也就是说，查询执行发生在查询构建后的某个时间。

换句话说，当执行查询时，bandQuestTitleItem.BandQuestTitlesID 将分配给您集合中所有查询的最后一个（第 7 个）ID。

添加 .ToList() 将导致查询立即执行。

# mysql - MySQL，如何合并表重复条目

> ID：12727660
> 
> 赞同：8
> 
> 时间：2012-10-04T12:47:58.253
> 
> 标签：mysql, sql, myisam

> **可能重复：**
> [如何删除重复的行？](https://stackoverflow.com/questions/18932/how-can-i-remove-duplicate-rows)
> [仅使用 MySQL 查询删除重复项？](https://stackoverflow.com/questions/3383898/remove-duplicates-using-only-a-mysql-query)

我有一张大桌子，里面有大约 1400 万个条目。表类型是 MyISAM 而不是 InnoDB。

不幸的是，我通过以下请求在此表中找到了一些重复的条目：

```
SELECT device_serial, temp, tstamp, COUNT(*) c FROM up_logs GROUP BY device_serial, temp, tstamp HAVING c > 1 
```

为了避免将来出现这些重复，我想使用 SQL request 将当前索引转换为唯一约束：

```
ALTER TABLE  up_logs DROP INDEX UK_UP_LOGS_TSTAMP_DEVICE_SERIAL,
ALTER TABLE up_logs ADD INDEX UK_UP_LOGS_TSTAMP_DEVICE_SERIAL (  `tstamp` ,  `device_serial` ) 
```

但在那之前，我需要清理我的重复项！

**我的问题是**：我怎样才能只保留一个重复条目？请记住，我的表包含 14M 条目，所以如果可能的话，我希望避免循环。

欢迎任何意见！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T12:55:58.013

在您需要作为唯一值的过度列上创建新的唯一键将自动清除表中的任何重复项。

```
ALTER IGNORE TABLE `table_name`
    ADD UNIQUE KEY `key_name`(`column_1`,`column_2`); 
```

**IGNORE**部分不允许脚本在第一个错误发生后终止。默认行为是删除重复项。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T14:03:24.837

由于 MySQL 允许在更新/删除语句中使用子查询，但如果它们引用您要更新的表，我将首先创建原始表的副本。然后：

```
DELETE FROM original_table 
WHERE id NOT IN( 
    SELECT id FROM copy_table 
    GROUP BY column1, column2, ...
); 
```

但我可以想象复制一个包含 14M 条目的表需要一些时间......在复制时选择要保留的项目可能会使其更快：

```
INSERT INTO copy_table 
    SELECT * FROM original_table 
    GROUP BY column1, column2, ...; 
```

进而

```
DELETE FROM original_table 
WHERE id IN(
    SELECT id FROM copy_table
); 
```

自从我上次使用 MySQL 和 SQL 以来已经有一段时间了，所以我很确定有一些性能更好的东西——但这应该可以；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T13:37:51.750

这就是删除重复行的方法......我会写给你我的例子，你需要应用到你的代码。我有 Actors 表，`ID`我想删除重复的行`first_name`

```
mysql> select actor_id, first_name from actor_2;
+----------+-------------+
| actor_id | first_name  |
+----------+-------------+
|        1 | PENELOPE    |
|        2 | NICK        |
|        3 | ED          |
....
|      199 | JULIA       |
|      200 | THORA       |
+----------+-------------+

200 rows in set (0.00 sec) 
```

- 现在，如果下一行具有相同的 first_name（重复，如果不是，则为 null），我使用一个名为 @a 的变量来获取 ID。

```
mysql> select if(first_name=@a,actor_id,null) as first_names,@a:=first_name from actor_2 order by first_name;
+---------------+----------------+
|  first_names  | @a:=first_name |
+---------------+----------------+
|          NULL | ADAM           |
|            71 | ADAM           |
|          NULL | AL             |
|          NULL | ALAN           |
|          NULL | ALBERT         |
|           125 | ALBERT         |
|          NULL | ALEC           |
|          NULL | ANGELA         |
|           144 | ANGELA         |
...
|          NULL | WILL           |
|          NULL | WILLIAM        |
|          NULL | WOODY          |
|            28 | WOODY          |
|          NULL | ZERO           |
+---------------+----------------+
200 rows in set (0.00 sec) 
```

- 现在我们只能得到重复的 ID：

```
 mysql> select first_names from (select if(first_name=@a,actor_id,null) as first_names,@a:=first_name from actor_2 order by first_name) as t1;
    +-------------+
    | first_names |
    +-------------+
    |        NULL |
    |          71 |
    |        NULL |
     ...
    |          28 |
    |        NULL |
    +-------------+
    200 rows in set (0.00 sec) 
```

- 最后一步，让我们删除！

```
mysql> delete from actor_2 where actor_id in (select first_names from (select if(first_name=@a,actor_id,null) as first_names,@a:=first_name from actor_2 order by first_name) as t1);
Query OK, 72 rows affected (0.01 sec) 
```

- 现在让我们检查一下我们的表格：

```
mysql> select count(*) from actor_2 group by first_name;
+----------+
| count(*) |
+----------+
|        1 |
|        1 |
|        1 |
...
|        1 |
+----------+
128 rows in set (0.00 sec) 
```

它有效，如果您有任何问题，请给我回信

# c++ - 仅针对行和列的数独解决方案

> ID：12727663
> 
> 赞同：0
> 
> 时间：2012-10-04T12:48:03.313
> 
> 标签：c++, sudoku, equations

如果有 9 行就像数独一样是 9 行，但它们却是

```
530070000
600195000
098000060
800060003
400803001
700020006
060000280
000419005
000080079 
```

转换成

```
534678912
672195348
198342567
859761423
426853791
713924856
961537284
287419635
345286179 
```

我认为它会更简单，但是一旦将它放入我的程序中，它就会留下巨大的空白。

我想我可以简单地走下每一列，如果它不妨碍任何其他数字，我可以将最小的数字放在第一列的空白处，但随着我的进步，我意识到我必须回去删除某些数字以使其更好。

请记住，唯一适用的条件是同一列中的数字不能相同，同一行中的数字不能相同，但没有框。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:28:26.323

首先确定每个单元格的所有可能数字，仅给出截至本轮填写的单元格。如果任何单元格只有一个可能的数字，请选择它并重新评估受影响的单元格（在同一行、同一列和 3x3 正方形中）。

当您再也找不到只有一种可能性的单元格时，请使用递归回溯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:23:40.503

您要做的是[递归回溯](http://en.wikipedia.org/wiki/Backtracking)。

[数独回溯算法](https://stackoverflow.com/questions/7695926/sudoku-backtracking-algorithm)

[http://en.wikipedia.org/wiki/Sudoku_algorithms#Backtracking](http://en.wikipedia.org/wiki/Sudoku_algorithms#Backtracking)

# regex - 从R中的单个字符串中提取所有数字

> ID：12727664
> 
> 赞同：21
> 
> 时间：2012-10-04T12:48:08.810
> 
> 标签：regex, r

假设你有一个字符串：

```
strLine <- "The transactions (on your account) were as follows: 0 3,000 (500) 0 2.25 (1,200)" 
```

是否有一个函数可以将数字剥离到一个数组/向量中，从而产生以下所需的解决方案：

```
result <- c(0, 3000, -500, 0, 2.25, -1200)? 
```

IE

```
result[3] = -500 
```

请注意，这些数字以会计形式呈现，因此负数出现在 () 之间。此外，您可以假设只有数字出现在数字第一次出现的右侧。我对正则表达式不是很好，所以如果需要的话，如果你能提供帮助，我将不胜感激。另外，我不想假设字符串总是相同的，所以我希望在第一个数字的位置之前删除所有单词（和任何特殊字符）。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-04T13:00:58.993

```
library(stringr)
x <- str_extract_all(strLine,"\\(?[0-9,.]+\\)?")[[1]]
> x
[1] "0"       "3,000"   "(500)"   "0"       "2.25"    "(1,200)" 
```

将括号更改为负数：

```
x <- gsub("\\((.+)\\)","-\\1",x)
x
[1] "0"      "3,000"  "-500"   "0"      "2.25"   "-1,200" 
```

然后`as.numeric()`或`taRifx::destring`完成（[下一个版本](https://github.com/gsk3/taRifx/blob/22dd0968dbb9e9225164de96f2bffc11d62eed5a/R/Rfunctions.R#L1122)将`destring`默认支持底片，因此`keep`不需要该选项）：

```
library(taRifx)
destring( x, keep="0-9.-")
[1]    0 3000  -500    0    2.25 -1200 
```

或者：

```
as.numeric(gsub(",","",x))
[1]     0  3000  -500     0     2.25 -1200 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-10-04T14:13:39.377

为了完整起见，这是基本的 R 方式...

```
x <- unlist(regmatches(strLine, gregexpr('\\(?[0-9,.]+', strLine)))
x <- as.numeric(gsub('\\(', '-', gsub(',', '', x)))
[1]     0.00  3000.00  -500.00     0.00     2.25 -1200.00 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-07T21:40:34.480

`data frame`对我来说，在（同一列中每行一个字符串）中处理单个字符串时效果很好，如下所示：

```
library(taRifx)
DataFrame$Numbers<-as.character(destring(DataFrame$Strings, keep="0-9.-")) 
```

结果在同一个新列中`data frame`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-03T18:09:32.573

由于这出现在另一个问题中，因此这是一个没有拐杖的`stringi`解决方案（与`stringr`拐杖相比）：

```
as.numeric(
  stringi::stri_replace_first_fixed(
    stringi::stri_replace_all_regex(
      unlist(stringi::stri_match_all_regex(
        "The transactions (on your account) were as follows: 0 3,000 (500) 0 2.25 (1,200)", 
        "\\(?[0-9,.]+\\)?"
      )), "\\)$|,", ""
    ),
    "(", "-"
  )
) 
```

# jsf - 验证通常失败时 JSF 中的条件样式

> ID：12727666
> 
> 赞同：11
> 
> 时间：2012-10-04T12:48:10.173
> 
> 标签：jsf, jsf-2

我有 h:messages 来显示错误消息，并且有一个组件我希望在发生验证错误时更改其样式（如果任何组件有验证错误或呈现任何验证消息，则更改此特定组件的样式） .

如果组件有验证错误，我知道更改样式的方法： [JSF：检查 <h:message for="id"/> 是否存在的更好方法](https://stackoverflow.com/questions/4522609/jsf-better-way-to-check-for-existence-of-hmessage-for-id)

但我想要一种更通用的方法，如果表单中的任何组件无效，或者换句话说，任何验证消息都被呈现，则更改样式。

请告知如何做到这一点。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-04T13:06:49.400

您可以使用它[`FacesContext#isValidationFailed()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#isValidationFailed%28%29)来检查验证是否通常失败。

```
<h:outputText ... styleClass="#{facesContext.validationFailed ? 'fail' : 'success'}" /> 
```

或者，您可以使用[`FacesContext#getMessageList()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#getMessageList%28%29)检查是否有任何面孔消息。这不一定表示一般的验证失败，也可以是在操作方法中添加的全局/成功消息。

```
<h:outputText ... styleClass="#{not empty facesContext.messageList ? 'hasmessage' : 'nomessage'}" /> 
```

# java - Toast Android中的左对齐文本

> ID：12727668
> 
> 赞同：-1
> 
> 时间：2012-10-04T12:48:12.540
> 
> 标签：java, android, toast

我有一个吐司，它显示文本为居中对齐，我想让它左对齐怎么做。生成 toast 的代码如下。

```
Toast test;
String final_status = titles[status_index];
String final_equipment = EquipmentNamePartial[equipment_index];
test = Toast.makeText(SalesBar.this, "Status: " + final_status + '\n'
         + " Equipment: " + final_equipment + '\n'
         + " Duration: " + duration_value + " hours", Toast.LENGTH_SHORT);
test.setGravity(Gravity.TOP|Gravity.LEFT, xx, yy);
test.show(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:55:18.560

创建自定义 Toast 消息。

```
TextView textview = new TextView(context);
textview.setText(text);
textview.setBackgroundColor(Color.WHITE);
textview.setTextColor(Color.BLACK);
textview.setPadding(10,10,10,10);
Toast toast = new Toast(context);
toast.setView(textview);
toast.setDuration(Toast.LENGTH_LONG);
toast.setGravity(Gravity.LEFT, 0, 0);
toast.show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T12:52:45.070

您应该创建一个视图并使用 Toast.setView。最简单的情况是创建一个 TextView 并设置它的重力

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T12:56:39.320

您可以`Toast`使用自定义布局创建：

```
Toast toast = new Toast(context);
toast.setView(toastRoot);
toast.show(); 
```

这是一些示例：[http](http://blog.webagesolutions.com/archives/161) ://blog.webagesolutions.com/archives/161，http : [//www.helloandroid.com/tutorials/how-customize-toasts](http://www.helloandroid.com/tutorials/how-customize-toasts)

# ios - AVAudioPlayer 不播放 mp3？

> ID：12727672
> 
> 赞同：3
> 
> 时间：2012-10-04T12:48:24.470
> 
> 标签：ios, xcode, mp3, avaudioplayer

我想让我`AVAudioPlayer`播放一些 mp3 文件。它播放其中一些，但我有一个文件无法播放！

要播放文件，我将其下载到我的设备上的应用程序文件夹中并以这种方式初始化：

```
[[AVAudioPlayer alloc] initWithContentsOfURL:soundPath error:nil]; 
```

如何播放文件？为什么不播放？

文件链接：[abc.mp3](http://iwheelbuy.com/abc.mp3)

**编辑：**

（这是显示错误的代码。代码中有一个 README。在设备上尝试。）

```
***.pch

#import <Availability.h>

#ifndef __IPHONE_4_0
#warning "This project uses features only available in iOS SDK 4.0 and later."
#endif

#ifdef __OBJC__
    #import <UIKit/UIKit.h>
    #import <Foundation/Foundation.h>
    #import <SystemConfiguration/SystemConfiguration.h>
    #import <MobileCoreServices/MobileCoreServices.h>
    #import <AVFoundation/AVFoundation.h>
    #import <AudioToolbox/AudioToolbox.h>
#endif

ViewController.h

#import <UIKit/UIKit.h>
#import "AFNetworking.h"

@interface SCRViewController : UIViewController <AVAudioPlayerDelegate>
{
    UIButton *button;
    __block UIProgressView *view;
    NSOperationQueue *queue;
    __block BOOL isFile;
    UIButton *play;
    NSString *path;
    AVAudioPlayer *_player;
}

@end

ViewController.m

#import "ViewController.h"

@implementation SCRViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    button = [UIButton buttonWithType:UIButtonTypeCustom];
    [button setBackgroundColor:[UIColor yellowColor]];
    [button setFrame:CGRectMake(50, 50, 220, 50)];
    [button addTarget:self action:@selector(download) forControlEvents:UIControlEventTouchUpInside];
    [button setTitle:@"Download" forState:UIControlStateNormal];
    [button setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
    [button setTitleColor:[UIColor redColor] forState:UIControlStateHighlighted];
    [self.view addSubview:button];

    play = [UIButton buttonWithType:UIButtonTypeCustom];
    [play setBackgroundColor:[UIColor yellowColor]];
    [play setFrame:CGRectMake(50, 150, 220, 50)];
    [play addTarget:self action:@selector(play) forControlEvents:UIControlEventTouchUpInside];
    [play setTitle:@"Play" forState:UIControlStateNormal];
    [play setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
    [play setTitleColor:[UIColor redColor] forState:UIControlStateHighlighted];
    [self.view addSubview:play];

    self->view = [[UIProgressView alloc] initWithProgressViewStyle:UIProgressViewStyleDefault];
    self->view.frame = CGRectMake(10, 120, 300, 20);
    [self->view setProgress:0];
    [self.view addSubview:self->view];

    queue = [[NSOperationQueue alloc] init];

    isFile = NO;
}

- (void) download
{
    [button setBackgroundColor:[UIColor brownColor]];
    [button setTitleColor:[UIColor whiteColor] forState:UIControlStateDisabled];
    [button setEnabled:NO];

    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://iwheelbuy.com/abc.mp3"]];

    //-------------------------------------------------------
    //-------------------------------------------------------
    // READ ME
    //-------------------------------------------------------
    //-------------------------------------------------------
    // Test in on device
    // I have uploaded another song for you. You can change link to http://iwheelbuy.com/def.mp3 and check the result
    // def.mp3 works fine on the device
    //-------------------------------------------------------
    //-------------------------------------------------------

    AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

    path = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    path = [path stringByAppendingPathComponent:@"song"];

    if ( [[NSFileManager defaultManager] fileExistsAtPath:path])
        [[NSFileManager defaultManager] removeItemAtPath:path error:nil];

    operation.outputStream = [NSOutputStream outputStreamToFileAtPath:path append:NO];
    [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject)
     {
         isFile = YES;
     } failure:^(AFHTTPRequestOperation *operation, NSError *error)
     {
         //
     }];
    [operation setDownloadProgressBlock:^(NSUInteger bytesRead, long long totalBytesRead, long long totalBytesExpectedToRead)
     {
         CGFloat done = (CGFloat)((int)totalBytesRead);
         CGFloat expected = (CGFloat)((int)totalBytesExpectedToRead);
         CGFloat progress = done / expected;
         self->view.progress = progress;
     }];
    [queue addOperation:operation];
}

- (void) play
{
    if (isFile)
    {
        NSError *error = nil;
        NSURL *url = [NSURL fileURLWithPath:path];
        _player = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
        if(error || !_player)
        {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:nil message:[error description] delegate:nil cancelButtonTitle:@"Try def.mp3" otherButtonTitles:nil];
            [alert show];
        }
        else
        {
            [_player play]; // plays fine
            [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil];
            [[AVAudioSession sharedInstance] setActive: YES error: nil];
        }
    }
    else
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Warning" message:@"Download the file plz" delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles: nil];
        [alert show];
    }
}

@end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T13:13:00.900

**非ARC**

您必须在播放期间保留它，因为它不会自行保留。一旦被释放，它将立即停止播放。

**弧**

您需要`AVAudioPlayer`在类中保存实例。并在它停止播放后释放它。例如，

```
#import <AVFoundation/AVFoundation.h>

@interface TAViewController () <AVAudioPlayerDelegate> {
    AVAudioPlayer *_somePlayer;   // strong reference
}
@end

@implementation TAViewController

- (IBAction)playAudio:(id)sender
{
    NSURL *url = [[NSBundle mainBundle] URLForResource:@"kogmawjoke" withExtension:@"mp3"];
    _somePlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:NULL];
    _somePlayer.delegate = self;
    [_somePlayer play];
}

- (void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag
{
    if (player == _somePlayer) {
        _somePlayer = nil;
    }
}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T01:41:11.983

```
http://bugreport.apple.com 
```

工程部门已根据以下信息确定此问题的行为符合预期：

可以使用附加的示例应用程序进行复制，但这是 AudioFile 的预期行为。

**问题是`AVAudioPlayer`正在使用没有文件扩展名的 url 进行初始化，并且相应的文件没有有效的`ID3`标签。没有文件扩展名或有效数据，我们无法确定正确的文件格式，因此此类文件将无法打开。这是预期的行为。**

在随附的示例代码中：

```
path = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

path = [path stringByAppendingPathComponent:@"song"]; 
```

--> 路径将类似于：

> /var/mobile/Applications/2FFD0147-E56B-47D4-B143-A9F19BE92818/Documents/song

--> 注意：最后没有文件扩展名。

abc.mp3 的`ID3`标签大小 (0x2EE) 无效，而 def.mp3 的标签大小 (0x927) 无效。因此，当这些被指定为没有任何扩展名的“..../song”时，AudioFile 只会查看数据并为 def.mp3 找到一个有效的同步字，而不是为 abc.mp3 找到一个有效的同步字。

但是，对于 abc.mp3，替换`stringByAppendingPathComponent:@"song"`为`stringByAppendingPathComponent:@"song.mp3"`成功，并且通常可以帮助其他 mp3 文件。

我们认为这个问题已经结束。如果您对此问题有任何疑问或疑虑，请直接更新您的报告 ( [http://bugreport.apple.com](http://bugreport.apple.com) )。

感谢您抽出宝贵时间将此问题通知我们。

# database - 什么是高事务数据库

> ID：12727674
> 
> 赞同：3
> 
> 时间：2012-10-04T12:48:32.037
> 
> 标签：database, transactions, definition, transactional

愚蠢的问题我知道，但是高事务数据库的定义是什么？每秒有多少事务构成高、中、低事务数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:56:57.777

继承人一些想法：[http](http://sqlblog.com/blogs/paul_nielsen/archive/2007/12/12/10-lessons-from-35k-tps.aspx) ://sqlblog.com/blogs/paul_nielsen/archive/2007/12/12/10-lessons-from-35k-tps.aspx 。

一般来说，任何银行和金融交易系统都可以归类为高交易系统。但现代社交网站，如 Twitter、Facebook 等也加入了该组织。我可能没有完全回答你的问题，但它肯定会给你一些观点。

[编辑：] 似乎任何 >=30k 每秒事务的事务都是高事务系统，因此类似地，任何低于该事务的事务都应该属于中低事务。

# c++ - 为什么每次构建时本地 .NET 程序集（几乎）在参考列表中出现损坏？

> ID：12727679
> 
> 赞同：0
> 
> 时间：2012-10-04T12:48:43.097
> 
> 标签：c++, .net, visual-studio-2012

我正在将 C++ .NET 解决方案移植到 MSVS 2012。我对本地构建的程序集有一个特殊的问题。在“公共属性”部分的引用列表中，添加了程序集（通过浏览“添加新引用”）。但通常（*并非总是*），链接似乎已断开（在程序集名称左侧的小图标上有一个垂直的红色条）并且项目不会编译。

我删除了引用，然后重新添加它（同一个！）并构建。我将不胜感激有关如何解决此问题的任何提示，因为我们在解决方案中有很多项目。

你遇到过这个问题吗？

随时询问更多信息...

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:26:55.763

您是在添加由该项目构建的程序集还是不同的程序集？如果是这样，那么问题是它可能不存在或可能被占用（由另一个进程（如 VS2010）独占打开）。

如果它在同一个项目中，请不要通过浏览从项目选项卡中添加它。

如果不是，则尝试将程序集复制到其他位置，然后指向它。

一般来说，指向另一个项目中的不同程序集是一个非常糟糕的主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:46:11.867

一个常见的原因是添加的程序集需要一个引用的程序集。而且您的项目有一个不包含该程序集的 .NET 框架目标。发生这种情况时，IDE 会变得很糟糕。一切看起来都很正常，例如 IntelliSense 工作。直到您编译并发现差异。错误列表窗口中有一个警告，但很容易被排除程序集生成的常见错误遗漏。

例如，System.Web 是一种常见的不可用的。将框架目标设置从客户端配置文件更改为完整版本以解决问题并重试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T14:35:05.023

这是解决我的问题的方法：

添加引用时（至少在 VS2012 中），您的左侧有 4 个选择：

*   组件 <-***好！***
*   通讯
*   解决方案
*   浏览 <-***不好***

通过反射，我选择了**浏览**，因为我想浏览文件夹中的 DLL。我找到了它（DLL），然后我错误地认为它是正确的。

我必须做的是选择**Assemblies**。然后我可以选择对话框底部的浏览来浏览我的文件夹**。**

目前我不知道第一个**Browse**有什么用。无论如何，我希望我的错误能帮助别人！

非常感谢那些给我一些提示的人！

# elasticsearch - Elasticsearch：为 Java 客户端构建映射

> ID：12727690
> 
> 赞同：3
> 
> 时间：2012-10-04T12:49:17.467
> 
> 标签：elasticsearch

在我的`elasticsearch.yml`文件中，我试图实现一些映射，其中属于一种类型的一个字段使用与其余字段不同的分析器进行索引。

目前yaml文件的结构如下：

```
index:
  bookshelf:
    types:
      book:
        mappings:
          title: {analyzer: customAnalyzer}
  analysis:
    analyzer:
      # set standard analyzer with no stop words as the default
      default:
        type: standard
        stopwords: _none_
      # set custom analyser to provide relative search results
      customAnalyzer:
        type: custom
        tokenizer: nGramTokenizer
        filter: [lowercase,stopWordsFilter,asciifolding]
    tokenizer:
      nGramTokenizer:
        type: nGram
        min_gram: 1
        max_gram: 2
    filter:
      nGramFilter:
        type: nGram
        min_gram: 1
        max_gram: 2
      stopWordsFilter:
        type: stop
        stopwords: _none_ 
```

这不会将自定义分析器应用于标题字段，所以我希望有人能够指出我将自定义分析器应用于各个字段的正确方向？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T15:38:57.590

我在毫升中回答了这个问题：

如果您使用的是 Java，则不必使用 yml 文件。你可以，但你不必这样做。

如果你使用的是 Spring，可以看看 ES spring factory 项目：  [https ://github.com/dadoonet/spring-elasticsearch](https://github.com/dadoonet/spring-elasticsearch)

如果没有，在 Java 中创建索引和映射有不同的方法：

1.  您可以通过阅读 json 映射文件来查看我是如何做到这一点的：  [https ://github.com/dadoonet/spring-elasticsearch/blob/master/src/main/java/fr/pilato/spring /elasticsearch/ElasticsearchAbstractClientFactoryBean.java#L616](https://github.com/dadoonet/spring-elasticsearch/blob/master/src/main/java/fr/pilato/spring/elasticsearch/ElasticsearchAbstractClientFactoryBean.java#L616)

2.  您还可以使用 ES 提供的 XContent 对象在 Java 中构建您的映射：  [https ://github.com/dadoonet/rssriver/blob/master/src/test/java/org/elasticsearch/river/rss/RssRiverTest.java# L14](https://github.com/dadoonet/rssriver/blob/master/src/test/java/org/elasticsearch/river/rss/RssRiverTest.java#L14)

3.  此处描述了使用此对象：  [https ://github.com/dadoonet/rssriver/blob/master/src/test/java/org/elasticsearch/river/rss/AbstractRssRiverTest.java#L98](https://github.com/dadoonet/rssriver/blob/master/src/test/java/org/elasticsearch/river/rss/AbstractRssRiverTest.java#L98)

添加映射如下：

```
node .client() .admin () .indices()
 .preparePutMapping ("yourindex" )
 .setType ( "yourtype" )
 .setSource ( mapping ())
 .execute() .actionGet (); 
```

我希望这可以帮助你

# gwt - GWT DatePicker 键盘导航

> ID：12727691
> 
> 赞同：10
> 
> 时间：2012-10-04T12:49:26.903
> 
> 标签：gwt, datepicker

我有一个 GWT 日期选择器，我正在尝试通过键盘访问它。我很难在日历中显示实际的日期元素，我想知道是否有人对此有任何运气？我真正想要的只是能够标记日历中的不同日期。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T08:36:29.783

奇怪的是。如果您启动 - [http://gwt.google.com/samples/Showcase/Showcase.html#!CwDatePicker](http://gwt.google.com/samples/Showcase/Showcase.html#!CwDatePicker)

```
Tab Click 1 - ?
Tab Click 2 - GWT Homepage
Tab Click 3 - More Examples
Tab Click 4 - Country/I18N seleciton
Tab Click 5 and Click Enter key - Month Change on Datepicker
Tab Click 6 and Click Enter key - Date 1 gets selected for current month
Tab Click 7 and Click Enter key - Date 2 gets selected for current month
.
.
.so on 
```

**`The keyboard support with tabindex seems to work with embedded DatePicker`**！！！在 FireFox 和 Chrome 上进行了测试。似乎只需要突出显示单元格来改善用户交互！！！！！！！！！

**`Sadly this is not feasible with Tabpanel or Datebox's popup Datepicker ( hides on tab click ).`**

GWT 对此有一些有趣的想法[@http://code.google.com/p/google-web-toolkit-incubator/wiki/accessibility](http://code.google.com/p/google-web-toolkit-incubator/wiki/accessibility)

它现在有了更广泛的范围@[可访问性开发指南](https://developers.google.com/web-toolkit/doc/latest/DevGuideA11y) 但是，可访问性的新范围没有列出/提及日期选择器或键盘访问。

# python - 迭代 MongoDB 集合时出现 UnicodeDecodeError

> ID：12727692
> 
> 赞同：0
> 
> 时间：2012-10-04T12:49:29.277
> 
> 标签：python, mongodb, python-2.7, pymongo

我正在尝试使用 Python 2.7 和 pymongo-2.3 使用以下内容查询 MongoDB 数据库：

```
from pymongo import Connection

connection = Connection()
db = connection['db-name']
collections = db.subName
entries = collections['collection-name']
print entries 
# > Collection(Database(Connection('localhost', 27017), u'db-name'), u'subName.collection-name')

for entry in entries.find():
    pass 
```

即使我不对`entry`对象做任何事情，迭代器也会失败：

```
Traceback (most recent call last):
File "/Users/../mongo.py", line 27, in <module>
  for entry in entries.find():
File "/Library/Python/2.7/site-packages/pymongo-2.3-py2.7-macosx-10.8-intel.egg/pymongo/cursor.py", line 778, in next
File "/Library/Python/2.7/site-packages/pymongo-2.3-py2.7-macosx-10.8-intel.egg/pymongo/cursor.py", line 742, in _refresh
File "/Library/Python/2.7/site-packages/pymongo-2.3-py2.7-macosx-10.8-intel.egg/pymongo/cursor.py", line 686, in __send_message
File "/Library/Python/2.7/site-packages/pymongo-2.3-py2.7-macosx-10.8-intel.egg/pymongo/helpers.py", line 111, in _unpack_response
UnicodeDecodeError: 'utf8' codec can't decode byte 0xfc in position 744: invalid start byte 
```

我不是我要查询的数据库的创建者。有人知道我做错了什么以及如何解决吗？谢谢。

* * *

**更新**：我设法跳过了`pymongo/helpers.py`使用 a的违规行`try-except`，但我更喜欢不涉及数据丢失的解决方案。

```
try:
    result["data"] = bson.decode_all(response[20:], as_class, tz_aware, uuid_subtype)
except:
    result["data"] = [] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T21:40:30.640

您可以使用 mongo shell 尝试相同的操作吗？我想弄清楚它是特定于 Python 的，还是数据库中的损坏：

```
$ mongo db-name  
> var collection = db.getCollection('subName.collection-name')  
> collection.find().forEach(function(doc) { printjson(doc); }) 
```

# cordova - jQuery Mobile css 和 javascript 未链接到我的代码

> ID：12727696
> 
> 赞同：2
> 
> 时间：2012-10-04T12:49:49.033
> 
> 标签：cordova, jquery-mobile

我是 jQuery Mobile 的新手，我正在尝试从教程中实现示例 jQuery Mobile 应用程序。

**这是我的代码：**

```
<html>
    <head>
        <meta charset="utf-8"/> 
            <title>Title</title>  
        <meta name="viewport" content="width=device-width, initial-scale=1"/> 

                <link rel="stylesheet" type="text/css" href="jquery.mobile.css" />       
                <script type="text/javascript" src="jquery.js"></script>
                <script type="text/javascript" src="jquery.mobile.js"></script>           
    </head>  
    <body> 

        <div  data-role="page">                                                       
            <div  data-role="header">                                                 
                <h1>Page Header</h1>  
            </div>  

            <div  data-role="content" >                                                 
                <p>Hello jQuery Mobile!</p>  
            </div>  

            <div  data-role="footer">                                                 
                <h4>Page Footer</h4>  
            </div>  
        </div> 

    </body>
</html> 
```

所有引用的文件都包含在我的项目中。但问题是我的输出是一个简单的 html 页面，没有应用任何 js 或 css 规则。

我想要像 jQuery Mobile 示例应用这样的输出。

请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T12:52:59.687

使用以下解决方案之一：

## 解决方案1：

第一个解决方案包括**在本地包含您的 jQuery Mobile 的 CSS / JS 文件**（= 在您的文件夹中`www`）

**1 -**将您的 HTML 文件包含`index.html`在您的文件夹`www`中。

**2 -**从各自的链接下载三个 CSS、JS 文件：

*   [http://code.jquery.com/mobile/1.2.0/jquery.mobile.structure-1.2.0.min.css](http://code.jquery.com/mobile/1.2.0/jquery.mobile.structure-1.2.0.min.css)

*   [http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css](http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css)

*   [http://code.jquery.com/jquery-1.8.1.min.js](http://code.jquery.com/jquery-1.8.1.min.js)

*   [http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js](http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js)

**3 -**将 CSS 文件`www/css/`和 JS 文件复制到其中`www/js/`，同时**确保 XCode 中的引用成功完成**。

**您可以执行以下操作来实现上述目的：**

1.  右键单击您的文件夹`www/css/`或`www/js/`在 XCode 中
    `New File...`-> `iOS`/ `Other`-> `Empty`-> `Next`。
    然后，输入要复制的文件（例如：`jquery.mobile.structure-1.2.0.min.css`）。

2.  将您下载的文件（例如：）的内容复制并粘贴`jquery.mobile.structure-1.2.0.min.css`到您在 XCode 中创建的新文件中。

3.  对您下载的所有 CSS/JS 文件（`jquery.mobile.structure-1.2.0.min.css`、`jquery.mobile-1.2.0.min.css`、`jquery-1.8.1.min.js`和`jquery.mobile-1.2.0.min.js`）重复步骤 1 和 2。

复制文件后，您应该具有以下目录结构：

*   **万维网**
    *   `index.html`
    *   **css**
        *   `jquery.mobile.structure-1.2.0.min.css`
        *   `jquery.mobile-1.2.0.min.css`
    *   **js**
        *   `jquery-1.8.1.min.js`
        *   `http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js`

**4 -**现在，考虑到 jQuery Mobile 的 CSS / JS 文件的路径，您可以在 HTML 文件的标题中添加它们的引用`index.html`。

**完整示例`index.html`：**

```
<html>
    <head>
        <meta name='viewport' content='minimum-scale=1.0, width=device-width, maximum-scale=1.0, user-scalable=no'/>

        <link rel="stylesheet" href="./css/jquery.mobile.structure-1.2.0.min.css" />
        <link rel="stylesheet" href="./css/jquery.mobile-1.2.0.min.css" />
        <script src="./js/jquery-1.8.1.min.js"></script>
        <script src="./js/jquery.mobile-1.2.0.min.js"></script>
    </head>  
    <body> 

        <div  data-role="page">                                                       
            <div  data-role="header">                                                 
                <h1>Page Header</h1>  
            </div>  

            <div  data-role="content" >                                                 
                <p>Hello jQuery Mobile!</p>  
            </div>  

            <div  data-role="footer">                                                 
                <h4>Page Footer</h4>  
            </div>  
        </div> 

    </body>
</html> 
```

* * *

## 解决方案2：

第二个解决方案包括从位于[http://code.jquery.com](http://code.jquery.com)的外部服务器获取 jQuery Mobile 的 CSS / JS 文件。

Phonegap 的问题是**您需要添加特定的白名单例外以允许检索外部数据**。

**关于这个白名单的更多信息，我建议你查看在线文档**（这个是针对Phonegap / Cordova 2.1版本的，你可以根据你的Phonegap / Cordova版本查看相应的链接）：[http://docs.phonegap。 com/en/2.1.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide](http://docs.phonegap.com/en/2.1.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide)

由于您使用的是 XCode（并且您正在为 iOS 开发），因此您必须按照以下步骤添加`http://code.jquery.com`到您的白名单例外：

*   `Resources/Cordova.plist`在 XCode 中打开文件。

*   右键单击该行`ExternalHosts`，然后选择`Add row`。

*   将`String`新创建的行的值设置为`code.jquery.com`。

*   保存修改后的文件并关闭它。

现在，您可以在 HTML 的标头中包含外部 CSS / JS 文件的引用`index.html`：

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile.structure-1.2.0.min.css" />
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script> 
```

**完整示例`index.html`：**

```
<html>
    <head>
        <meta name='viewport' content='minimum-scale=1.0, width=device-width, maximum-scale=1.0, user-scalable=no'/>

        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile.structure-1.2.0.min.css" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

    </head>  
    <body> 

        <div  data-role="page">                                                       
            <div  data-role="header">                                                 
                <h1>Page Header</h1>  
            </div>  

            <div  data-role="content" >                                                 
                <p>Hello jQuery Mobile!</p>  
            </div>  

            <div  data-role="footer">                                                 
                <h4>Page Footer</h4>  
            </div>  
        </div> 

    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:52:59.427

您是否检查过在 firefox 中使用 firebug 以确保实际的 javascript 库正在加载？您在哪里引用文件，这是否指向正确的位置？

我知道很简单，但可能会被忽略:)

# jquery - 如何在页面底部停止浮动菜单

> ID：12727708
> 
> 赞同：3
> 
> 时间：2012-10-04T12:50:16.970
> 
> 标签：jquery, html, menu, scroll, jquery-animate

我使用这个脚本：

```
<script>
    $(function() {
        var offset = $("#menu_border").offset();
        var topPadding = 20;
        $(window).scroll(function() {
            if ($(window).scrollTop() > offset.top) {
                $("#menu_border").stop().animate({
                    marginTop: $(window).scrollTop() - offset.top + topPadding
                });
            } else {
                $("#menu_border").stop().animate({
                    marginTop: 0
                });
            };
        });
    });
    </script> 
```

当用户滚动时，它使我的 $menu_border 跟随窗口。问题是，我在这个“下面”有一个 div，当用户（屏幕分辨率低于 1080）滚动到页面底部时，这个脚本只是继续向下推 #menu_border，使页面更长并且更长。

所以问题是；有没有简单的方法让它停在某个点？最好的事情是在容器内（在这种情况下为#container_div）。

希望我让自己明白。

最好的祝福！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T23:13:46.907

您需要停止添加到边距的时刻值`$(window).scrollTop()`与 #menu_border 的高度相结合超过身体的高度。

这是我的头等大事，我没有现场尝试，但将您的第一个条件更改为：

```
if ($(window).scrollTop() > offset.top && 
    ($(window).scrollTop() + $('#menu_border').outerHeight() <=  $('BODY').height()) { 
```

代替

```
if ($(window).scrollTop() > offset.top) 
```

应该做的伎俩。根据您是否在 #menu_border 上有填充，您可能想要使用`$('BODY').outerHeigh()`而不是`$('BODY').height()`.

让我知道你是否做到了。

# c# - 如何使用 C# .net 获取包含 HTML 标记的字符串的子字符串？

> ID：12727717
> 
> 赞同：2
> 
> 时间：2012-10-04T12:51:06.537
> 
> 标签：c#, asp.net, substring, html

我有一个包含 HTML 标记的子字符串，我需要缩短它，但以与字符串上显示的格式相同的格式显示它。

它不必完全是 X 个字符长，但它应该足够短以显示在具有特定宽度和高度的面板内？

有什么方法可以使用 c# 实现这一点吗？

使用 CSS 怎么样？即无论其内容如何都以固定高度显示面板？

谢谢..

示例：我有以下面板，其中包含一个标签，其中包含带有 html 标签的文本：

![例子](../Images/32decbd86c6c2280763da392d5acb5a7.png)

我需要删除滚动条而不使面板更长但保持这个高度和这个宽度..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T18:59:48.383

您可以使用正则表达式来查找特定标签的内容。之后使用 .substring 缩短结果。

一个例子可能是：

```
<h1>head</h1>
<p>contents</p> 
```

正则表达式可以是：

```
<p\b[^>]*>(.*?)</p> 
```

结果将是：

```
<p>contents</p> 
```

现在只需排除开始和结束标签。作为它的固定长度。

我发现有关更改 HTML 标记之间的内容的更有趣的读物。在这里阅读（正则表达式 ftw！）：

[http://www.thatsquality.com/articles/how-to-match-and-replace-content-between-two-html-tags-using-regular-expressions](http://www.thatsquality.com/articles/how-to-match-and-replace-content-between-two-html-tags-using-regular-expressions)

* * *

如果您想在 c# 中解决它，另一个可能不会让您发疯的解决方案：

[HTML 敏捷包](http://html-agility-pack.net)

查看网站的示例部分。很棒的小工具！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T05:15:35.020

如果您有以下 html 代码：

```
<div class="div1"> Some Really Bold String </div> 
```

您可以提供 css 来隐藏滚动条，

```
.div { overflow:hidden; height:200px; width:200px;} 
```

`height`和`width`值仅用于示例目的。
`overflow:hidden`不会让 div 的内容扩展到 div 之外。`overflow` [您将在此处](http://www.w3schools.com/cssref/pr_pos_overflow.asp)找到更多信息。

# php - php方法只读取远程文件的一部分

> ID：12727718
> 
> 赞同：7
> 
> 时间：2012-10-04T12:51:07.593
> 
> 标签：php, file-get-contents

我正在`file_get_contents`获取远程文件并处理它们。不幸的是，这些文件非常大，我只需要每个文件的一小部分。我确切地知道我需要阅读的偏移量及其长度，但阅读 php 手册似乎`file_get_contents`只有在本地文件上才有可能。

有没有不下载整个文件的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:53:11.843

您需要使用`fopen`,`fseek`和`fread`function 而不是`file_get contents`

这里是文档的链接

*   [开放](http://am.php.net/manual/en/function.fopen.php)
*   [寻找](http://am.php.net/manual/en/function.fseek.php)
*   [恐惧](http://am.php.net/manual/en/function.fread.php)

`fopen`将文件作为字节流打开，您可以使用`fseek`并根据需要读取所需的位置`fread`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T12:56:25.250

据我所知，没有办法打开远程文件并将文件指针移动到某个点。您需要某种为您提供该功能的远程服务。

虽然 fopen 和 fseek 似乎工作，但有一个罪魁祸首。形成[手册](http://am.php.net/manual/en/function.fseek.php)：

> 并非所有流都支持搜索。对于不支持查找的，从当前位置向前查找是通过读取和丢弃数据来完成的；其他形式的寻求将失败。

至于实现一个服务，有很多例子。我喜欢 rsync 解决方案，它只将更改的块从远程机器镜像到本地机器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T13:19:49.227

如果您从 http 服务器读取文件，则可以`Range`在删除服务器支持的情况下设置标头。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T10:22:51.990

如果有人偶然发现这是处理它的好方法，那就是使用 cURL 和`CURLOPT_WRITEFUNCTION`.

# wpf - 如何在 Visual Studio 2012 中创建选项卡控件

> ID：12727719
> 
> 赞同：0
> 
> 时间：2012-10-04T12:51:08.153
> 
> 标签：wpf, wpf-controls, visual-studio-2012

我尝试在 Visual Studio 2012 中创建类似于 WPF 中的功能选项卡控件的外观。但我无法创建它。谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:02:16.463

WPF中有一个TabControl。没错，它看起来不像 VS 2010 中的那些，但它们就在那里。剩下的只是样式它们的问题。（除非我遗漏了什么）。只需按“P”键即可更改主题。

```
<Window x:Class="WpfApplication6.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525" 
    Loaded="Window_Loaded"
    KeyUp="Window_KeyUp"
    >
<Grid>
    <TabControl>
        <TabItem Header="Test 1" >
            <Grid>
                <Button Content="Test 1" />
            </Grid>
        </TabItem>
        <TabItem Header="Test 2" >
            <Grid>
                <Button Content="Test 2" />
            </Grid>
        </TabItem>
        <TabItem Header="Test 3" >
            <Grid>
                <Button Content="Test 3" />
            </Grid>
        </TabItem>
        <TabItem Header="Test 4" >
            <Grid>
                <Button Content="Test 4" />
            </Grid>
        </TabItem>
    </TabControl>
</Grid>
</Window> 
```

这会生成一个简单的选项卡控件。至于样式，您可以应用许多样式。这是我为此创建的辅助类：

```
static class ThemeManager
{
    private static ResourceDictionary[] _themes;
    public static ResourceDictionary AeroTheme;
    //public static ResourceDictionary ClassicTheme;
    public static ResourceDictionary LunaTheme;
    public static ResourceDictionary RoyaleTheme;

    private static int _currentIndex = 0;

    public static ResourceDictionary GetNextTheme()
    {
        ResourceDictionary vDict = _themes[_currentIndex];

        if (_currentIndex == _themes.GetUpperBound(0))
            _currentIndex = 0;
        else
            _currentIndex++;

        return vDict;
    }

    static ThemeManager()
    {
        List<ResourceDictionary> vList = new List<ResourceDictionary>();
        Uri themeUri;
        //************
        themeUri = new Uri("PresentationFramework.Aero;V3.0.0.0;31bf3856ad364e35;component\\themes/aero.normalcolor.xaml", UriKind.Relative);
        AeroTheme = (ResourceDictionary)Application.LoadComponent(themeUri);
        vList.Add(AeroTheme);
        //************
        themeUri = new Uri("PresentationFramework.Luna;V3.0.0.0;31bf3856ad364e35;component\\themes/Luna.normalcolor.xaml", UriKind.Relative);
        LunaTheme = (ResourceDictionary)Application.LoadComponent(themeUri);
        vList.Add(LunaTheme);
        //************
        themeUri = new Uri("PresentationFramework.Luna;V3.0.0.0;31bf3856ad364e35;component\\themes/Luna.homestead.xaml", UriKind.Relative);
        LunaTheme = (ResourceDictionary)Application.LoadComponent(themeUri);
        vList.Add(LunaTheme);
        //************
        themeUri = new Uri("PresentationFramework.Luna;V3.0.0.0;31bf3856ad364e35;component\\themes/Luna.metallic.xaml", UriKind.Relative);
        LunaTheme = (ResourceDictionary)Application.LoadComponent(themeUri);
        vList.Add(LunaTheme);
        //************
        themeUri = new Uri("PresentationFramework.Royale;V3.0.0.0;31bf3856ad364e35;component\\themes/Royale.normalcolor.xaml", UriKind.Relative);
        RoyaleTheme = (ResourceDictionary)Application.LoadComponent(themeUri);
        vList.Add(RoyaleTheme);
        //************
        /*ClassicTheme = null;
        vList.Add(ClassicTheme);*/
        //************

        _themes = vList.ToArray();
    }
} 
```

这是 Window 类（允许切换主题）：

```
public partial class MainWindow : Window
{
    ResourceDictionary _dict;

    public MainWindow()
    {
        InitializeComponent();
    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        _dict = ThemeManager.GetNextTheme();
        Resources.MergedDictionaries.Add(_dict);
    }

    private void Window_KeyUp(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.P) {
            if (_dict != null)
                Resources.MergedDictionaries.Remove(_dict);

            _dict = ThemeManager.GetNextTheme();
            Resources.MergedDictionaries.Add(_dict);
        }

    }
} 
```

我希望这会有所帮助。如果您需要更多详细信息，请告诉我。

# c# - ConfigurationManager 的命名空间在哪里？

> ID：12727721
> 
> 赞同：35
> 
> 时间：2012-10-04T12:51:18.393
> 
> 标签：c#, .net-3.5, reference, configurationmanager, system.configuration

我有一个参考`System.Configuration`- 并且`ConfigurationSettings`没有发现问题 - 但找不到类型或命名空间' `ConfigurationManager`'！？

我已经阅读了 - 看起来它应该与`ConfigurationSettings`类属于同一个命名空间。

编辑：请注意 -**我已经明确表示我已经添加了对 System.Configuration 的引用**。已经有 4 条关于此的评论。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-10-04T13:00:59.860

ConfigurationManager 是 .Net 2.0 之后 System.Configuration 的一部分。添加对 System.Configuration dll 的引用。尝试使用 System.Configuration.ConfigurationManager。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-01-23T11:16:50.443

您需要使用系统配置命名空间，这必须以**两种方式**包含：

1.  右键单击项目并选择添加引用，浏览“程序集”并勾选**System.Configuration**程序集。

2.  在代码中包含命名空间：

    使用 System.Configuration；

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-04T12:52:47.023

您需要添加对 System.Configuration 程序集的引用。这个命名空间被分成几个程序集。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-03-04T21:47:18.940

您需要在项目的 Reference 文件夹下添加 System.Configuration 引用。仅在您的类中使用 using 语句添加 system.configuration 是不够的。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-08-19T18:01:31.367

我在 VisualStudio 2015 中工作，并且`ConfigurationManager`不再出现在`System.Configuration`命名空间中。

我只是想阅读 App.config 文件...

然后我找到了一个解决方案：

得到：

```
string str = MyProjectNamespace.Properties.Settings.Default["MySettingName"].ToString(); 
```

放：

```
MyProjectNamespace.Properties.Settings.Default["MySettingName"]="myString";
MyProjectNamespace.Properties.Settings.Default.Save(); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-02-19T00:33:31.970

我正在使用 VS 2017，我添加了“使用 System.Configuration”指令，并按照步骤向项目添加了参考程序集，但 IDE 仍然抱怨配置管理器不存在，事实证明这是由于安装了 .net 核心通过 Nuget 只需添加一个空容器。System.Configuration.Configurationmanager 4.5.0 包也需要安装。启动工具 -> Nuget 包管理器 -> 包管理器控制台并键入“Install-Package System.Configuration.ConfigurationManager -Version 4.5.0”，这解决了问题。在 VS2017 的对象浏览器中参考下面的截图

![在此处输入图像描述](../Images/a076ee53bf7dd1995d705e79f9e582c5.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-24T19:44:17.220

对我来说，当我将“BuildConnectionString”函数放在一个类中并在类页面顶部添加“Imports System.Configuration”时，这个问题就解决了。我按照微软网站本身的说法做了。 [https://docs.microsoft.com/en-us/dotnet/framework/data/adonet/connection-string-builders](https://docs.microsoft.com/en-us/dotnet/framework/data/adonet/connection-string-builders)

```
Private Sub BuildConnectionString(ByVal dataSource As String, _
ByVal userName As String, ByVal userPassword As String)

' Retrieve the partial connection string named databaseConnection
' from the application's app.config or web.config file.
Dim settings As ConnectionStringSettings = _
   ConfigurationManager.ConnectionStrings("partialConnectString")

If Not settings Is Nothing Then
    ' Retrieve the partial connection string.
    Dim connectString As String = settings.ConnectionString
    Console.WriteLine("Original: {0}", connectString)

    ' Create a new SqlConnectionStringBuilder based on the
    ' partial connection string retrieved from the config file.
    Dim builder As New SqlConnectionStringBuilder(connectString)

    ' Supply the additional values.
    builder.DataSource = dataSource
    builder.UserID = userName
    builder.Password = userPassword

    Console.WriteLine("Modified: {0}", builder.ConnectionString)
End If
End Sub 
```

重要的一点是在类中使用函数。当我这样做时，错误未能找到来源。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-21T13:45:00.523

2021 年夏季，Visual Studio 2019（核心应用程序）。我已经复制了一些代码

```
ConfigurationManager.AppeSettings["yadayada"]; 
```

只需单击出现问题的行上的灯泡图标，然后选择安装 System.Configuration Package。

# jquery - 浮动 FancyBox？

> ID：12727732
> 
> 赞同：0
> 
> 时间：2012-10-04T12:51:57.363
> 
> 标签：jquery, css, fancybox

我正在尝试开发一种解决方案，它将 FancyBox 浮动到我的内容区域的右侧（与右边距齐平）。

当设置为 1 时，内置的 leftRatio 参数让我接近，但它将框浮动到视口的右侧（而不是内容区域）。

我是使用 jQuery 并尝试学习的新手，所以如果您能简单地解释一些事情或向我指出一些可以帮助我的文档，那就太好了。

非常感谢你的帮助。

凯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:07:49.457

`fancybox-wrap`尝试在元素上应用 css ：

```
#fancybox-wrap {
    float: right;
} 
```

（您可能需要添加`!important;`）

如果失败了，你可以尝试同样的方法，但使用 jQuery：

```
$('#fancybox-wrap').css("float", "right"); 
```

# javascript - Firefox 扩展将 Javascript 数组作为对象发送

> ID：12727733
> 
> 赞同：3
> 
> 时间：2012-10-04T12:51:59.873
> 
> 标签：javascript, firefox-addon, firefox-addon-sdk, dom-events, content-script

我在将 JavaScript 数组传递给我在[Add-on Builder](https://builder.addons.mozilla.org/ "附加构建器")中编写的插件时遇到问题。

为了进行通信，我使用事件并使用数组发送事件，但附加组件（内容脚本）获取的是对象，而不是数组。

这是事件：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"> 
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
<script type="application/x-javascript">

$(function() {
    $(window).bind('Runner-PageEvent', function(event) {
        console.log('PAGE: Reakcja na Runner-PageEvent na stronie');
    });

    $(window).bind('RunnerResult', function(event) {
        console.log('PAGE: Result is ' + event.originalEvent.detail.Result);

//// PROBLEM!!!
        console.log('PAGE: Should be array: ' + event.originalEvent.detail.array); // firebug shows object

        });

    $(window).bind('Runner-DetectCallback', function(event) {
        console.log('PAGE: Reakcja na Runner-DetectCallback na stronie');
        $('#browser-detection').text('Extension detected').css('background-color', 'green').css('color', 'white');
    });

    var event = new CustomEvent("Runner-Detect", {});
    window.dispatchEvent(event);
    console.log('PAGE: Runner-Detect sent');
});

function CallExtension() {
    var event = new CustomEvent("Runner-PageEvent", { detail : {
            a: "messageA",
            b: "messageB",
            c: "messageC",
            d: "messageD",
            arrayA: ["a", "b", "c", "d"],
            arrayB: [0, "info", "info2", 3]
        }});
    window.dispatchEvent(event);
    console.log('PAGE: CALL EXTENSION clicked');
}

</script> 
</head>
<body>
<div id="browser-detection" style="background-color: red">No extension</div>
<br/>
Run extension: <button onclick="CallExtension()">Run!</button>
</body>
</html> 
```

Firebug 将事件显示为具有一个属性的对象`detail.tab`作为具有四个项目的数组。

内容脚本接收一个对象`e`，其中`e.detail.tab`是一个对象（但应该是一个数组）。

```
window.addEventListener(
    'eventname', 
    function(e) { 
        // console.log(e.detail.tab.length); -> produce an error on console (Ctrl+Shift+J)
        // console.log(e.detail.tab[0]); -> as above
        for(var x in e.detail.tab){
            console.log(x);
            console.log(e.detail.tab[x]);
        }            
        self.port.emit('SendToExtension', e.detail);
    }
); 
```

我不知道是 Add-on Builder 有问题还是我做错了什么？
请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T17:37:59.163

[`CustomEvent()`](https://developer.mozilla.org/en-US/docs/DOM/Event/CustomEvent)在沙盒 ( [XPCNativeWrapper](https://developer.mozilla.org/en-US/docs/XPCNativeWrapper) )中传输信息的方式似乎存在错误。它`CustomEventInit.detail`在某些情况下不正确地序列化该值，并且在第一个此类实例之后，根本无法传递该`detail`值——这表明正在发生某种内存/状态损坏。

1.  有关以下内容，请参阅此测试页面：[**jsbin.com/ajegib/1**](http://jsbin.com/ajegib/1)。

2.  安装或在“测试”模式下运行此 Firefox 插件：[**CustomEvent data_ across the sandbox**](https://builder.addons.mozilla.org/package/156591/latest/)。

3.  请注意，测试网页和扩展的内容脚本都有如下代码：

    ```
    window.addEventListener ("EventWithArrayData", function (zEvent) {
        console.log (
            "Event detail: ", zEvent.detail, Array.isArray (zEvent.detail)
        );
    } );

    var zEvent = new CustomEvent ("EventWithArrayData",
        {"detail": [5,6,7] }
    );
    window.dispatchEvent (zEvent) 
    ```

4.  打开Firebug***的***控制台和 Firefox 错误控制台 ( `Ctrl``Shift``J`) 以观察结果，因为发送了带有数组值的自定义事件`detail`。（您可以按下`Normal array data`按钮，发送它们。）

# *应该*发生什么：

网页和扩展程序都应该将来自这两个事件的数据视为一个数组。

1.  ***Firebug***控制台*应*显示：

    ```
    **The Normal button was pressed.**
    In web page (Normal) from page: [1, 2, 3]  true
    In web page (Normal) to page: [5, 6, 7]  true 
    ```

2.  ***FF 错误***控制台*应*显示：

    ```
    info: In Content Script (Normal) from page:  1,2,3 true
    info: In Content Script (Normal) to page:  5,6,7 true 
    ```

# *会*发生什么：

1.  在第**一个事件**：

    1.  ***Firebug***控制台显示：

        ```
        **The Normal button was pressed.**
        In web page (Normal) from page: [1, 2, 3]  true
        In web page (Normal) to page: {0: 5, 1: 6, 2: 7}  false 
        ```

    2.  ***FF 错误***控制台显示：

        ```
        info: In Content Script (Normal) from page:  [object Object] false
        info: In Content Script (Normal) to page:  5,6,7 true 
        ```

2.  关于**所有后续事件**：

    1.  ***Firebug***控制台显示：

        ```
        **The Normal button was pressed.**
        In web page (Normal) from page: [1, 2, 3]  true
        In web page (Normal) to page: null  false 
        ```

    2.  ***FF 错误***控制台显示：

        ```
        info: In Content Script (Normal) from page:  [object Object] false
        info: In Content Script (Normal) to page:  null false 
        ```

观察：

1.  在所有情况下，*网页*都正确地看到了它自己的事件发送的数组数据。它看到一个数组。
2.  但是，扩展看到的是一个类似数组的对象。
3.  从扩展程序发送的数组数据在第一次传递时正确显示给扩展程序，但在所有后续尝试中为空。
4.  从扩展程序发送的数组数据显示为页面的对象，然后根本不显示（`null`）！

# 解决方法：

[CustomEvent 文档](https://developer.mozilla.org/en-US/docs/DOM/Event/CustomEvent)和[DOM 标准](http://dom.spec.whatwg.org/#interface-customevent)状态都可以`eventInitDict.detail`具有任何类型。但对于通过附加沙箱发送的事件，情况显然并非如此。
似乎没有任何[Firefox 错误](https://bugzilla.mozilla.org/index.cgi)。也许我们应该打开一个。

无论如何，似乎可行的解决方法是对我们发送的数据进行 JSON 编码`CustomEvent()`。

像这样发送：

```
var detailVal   = JSON.stringify ( [1, 2, 3] );

var zEvent = new CustomEvent ("EventWithJSON_Data",
    {"detail": detailVal }
);
window.dispatchEvent (zEvent) 
```

像这样接收：

```
window.addEventListener ("EventWithJSON_Data", function (zEvent) {
    var datArray    = JSON.parse (zEvent.detail);
    console.log (
        "JSON data: ", datArray, Array.isArray (datArray)
    );
} ); 
```

`JSON-encoded array data`您可以通过按下按钮 在测试页 + 扩展上看到这一点。（请务必先刷新页面以清除上面讨论的损坏。）

# php - 将动态元素添加到数组

> ID：12727740
> 
> 赞同：0
> 
> 时间：2012-10-04T12:52:15.180
> 
> 标签：php, arrays, wordpress

我正在使用一个小部件来显示一些相关的帖子。

我将代码直接插入到模板中，如下所示

```
<?php
$args = array(
"post_author_url" => "no",
"post_include" => "3456",
"layout_mode" => "multi_column","layout_num_cols" => "3");
special_recent_posts($args);
?> 
```

但是，我想用我回显的用户 ID 动态填充“post_include”字段，如下所示`<?php echo get_user_meta($userID,'member_owner',true); ?>`

所以我想的代码看起来像这样

```
<?php
$args = array(
"post_author_url" => "no",
"post_include" => "<?php echo get_user_meta($userID,'member_owner',true); ?>",
"layout_mode" => "multi_column","layout_num_cols" => "3");
special_recent_posts($args);
?> 
```

我不知道如何将此动态 ID 添加到数组中，因为我所做的不起作用。

寻求一些指导

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:53:31.027

```
"post_include" => get_user_meta($userID, 'member_owner', true), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T12:53:44.237

```
<?php
$args = array(
"post_author_url" => "no",
"post_include" => get_user_meta($userID,'member_owner',true),
"layout_mode" => "multi_column","layout_num_cols" => "3");
special_recent_posts($args);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T12:56:15.187

您不能嵌套 php 开始标签。

在不重新打开 php 标签的情况下执行此操作并直接使用您的函数：

`"post_include" => get_user_meta($userID,'member_owner',true);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T12:57:16.560

如果您需要在之后设置它，您可以简单地执行以下操作：

```
$args['post_include'] = get_user_meta($userID, 'member_owner', true); 
```

# java - 字符串到json转换问题

> ID：12727742
> 
> 赞同：2
> 
> 时间：2012-10-04T12:52:18.533
> 
> 标签：java, json

我正在尝试`JSONObject`使用以下代码将字符串转换为对象，但我得到了

```
Exception in thread "main" java.lang.ClassCastException: 
org.json.simple.JSONObject cannot be cast to net.sf.json.JSONObject . 
```

来源：

```
import net.sf.json.JSONObject;
import org.json.simple.parser.JSONParser;
    public static void run(JSONObject jsonObject) {
        System.out.println("in run--");

    }

    public static void main(String[] args) throws Exception {
        System.out.println("here");
        String json = "{\"task\": \"com.ge.dbt.workers.surveytoexcel.worker.SurveyWorker\",\"prod_id\": 12345,\"survey_id\": 5666,\"person_id\": 18576567,\"req_date\": \"12\12\2012\"}";
        JSONObject jsonObj;
        JSONParser parser = new JSONParser();

        Object obj = parser.parse(json);

        jsonObj = (JSONObject) obj;

        run(jsonObj);
    } 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:54:34.220

您`JSONObject`从错误的包中导入。更改此行：

```
import net.sf.json.JSONObject; 
```

对此：

```
import org.json.simple.JSONObject; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:06:23.123

实施以下解决方案，***您甚至不必费心解析器***...

这里的问题是你试图将一个类型的对象`org.json.simple.JSONObject`转换为`net.sf.json.JSONObject`. 你可能想试试 The package `org.codehaus.jettison.json.JSONObject`。这足以完成所有必需的事情。

**简单的例子**：

首先，准备一个字符串：

`String jStr = "{\"name\":\"Fred\",\"Age\":27}";`

现在，要解析`String`对象，U 只需将字符串传递给`JSONObject();`构造函数方法

`JSONObject jObj = new JSONObject(jStr);`

那应该这样做，瞧！你有一个 JSONObject。现在你可以随心所欲地玩它了。

怎么这么简单不是吗？

**代码的修改版本可能如下所示**：

 ~~~~```
import net.sf.json.JSONObject; 
```~~  ~~```
import org.codehaus.jettison.json.JSONObject;
public static void run(JSONObject jsonObject) {
    System.out.println("in run-- "+jsonObject.getInt("person_id"));
}

public static void main(String[] args) throws Exception {
    System.out.println("here");
    String json = "{\"task\": \"com.ge.dbt.workers.surveytoexcel.worker.SurveyWorker\",\"prod_id\": 12345,\"survey_id\": 5666,\"person_id\": 18576567,\"req_date\": \"12\12\2012\"}";
    JSONObject jsonObj = new JSONObject(json);
    run(jsonObj);
} 
```

使用 JSON，这很简单~~~~

# ios5 - cocos2d画质低

> ID：12727756
> 
> 赞同：2
> 
> 时间：2012-10-04T12:53:18.313
> 
> 标签：ios5, cocos2d-iphone

我现在正在为 iOS 开发一个游戏。我用 Texturepacker 创建了一个精灵表，它产生 2 个文件 .plist 和 .png 文件。当我在我的代码中使用这些文件时，我发现所有精灵的图像质量都很低，颜色很苍白，我认为这是因为 texturepacker 程序。请告诉我我应该怎么做才能克服这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:27:55.493

我猜你没有改变后缓冲像素格式。你可以试试这个。

使用像素格式 kEAGLColorFormatRGBA8 而不是 kEAGLColorFormatRGB565。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Create the main window
    window_ = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    // Create an CCGLView with a RGB565 color buffer, and a depth buffer of 0-bits
    CCGLView *glView = [CCGLView viewWithFrame:[window_ bounds]

                                   pixelFormat:kEAGLColorFormatRGBA8    //Guru - replaced  kEAGLColorFormatRGBA8 / kEAGLColorFormatRGB565
                                   depthFormat:0    //GL_DEPTH_COMPONENT24_OES
                            preserveBackbuffer:NO
                                    sharegroup:nil
                                 multiSampling:NO
                               numberOfSamples:0]; 
```

# c# - 在 Windows 8 应用程序中显示文档库文件夹

> ID：12727760
> 
> 赞同：0
> 
> 时间：2012-10-04T12:53:29.547
> 
> 标签：c#, microsoft-metro

我正在获取文档库文件夹。但我不知道如何在 MainPage.Xaml（设计页面）中显示 geeting 文件夹。

这是我的代码：

```
var folders = await KnownFolders.DocumentsLibrary.GetFoldersAsync(); 
```

如果有人指导我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:26:20.440

假设您有一个 ListView 来显示所有文件夹。单击一个按钮，您希望在 DocumentsLibrary 中显示文件夹列表。为此，请使用以下 XAML：

```
<Button Content="Button" HorizontalAlignment="Left" Margin="216,172,0,0" VerticalAlignment="Top" Click="Button_Click_1"/>
    <ListView x:Name="FolderList" HorizontalAlignment="Left" Height="100" Margin="216,328,0,0" VerticalAlignment="Top" Width="830">
        <ListView.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding DisplayName}"></TextBlock>
            </DataTemplate>
        </ListView.ItemTemplate>
    </ListView> 
```

现在，在后面的代码中编写以下代码：

```
private async void Button_Click_1(object sender, RoutedEventArgs e)
    {
        var folders = await Windows.Storage.KnownFolders.DocumentsLibrary.GetFoldersAsync();
        var data = folders.ToList<Windows.Storage.StorageFolder>();
        FolderList.ItemsSource = data;

    } 
```

这将向您显示 ListView 中 DocumentsLibrary 中的所有文件夹。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:47:18.987

您需要在 XAML 中使用 ListView 或 GridView 或 ListBox（取决于您要使用它做什么）并将其绑定到文件夹列表。然后您需要一个 ItemTemplate 来指定您想要显示的内容，例如文件夹名称、路径、大小等

# javascript - 运行中的 Javascript 表

> ID：12727763
> 
> 赞同：0
> 
> 时间：2012-10-04T12:53:33.410
> 
> 标签：javascript, asp.net-mvc-3, gridview, devexpress

我有一些关于 javascript 的问题。这会导致一些问题。我正在使用 DevExpress MVC GridView、ASP.Net MVC 3 和 javascript。

这是我的问题：

我有一个gridview，例如客户。我希望他们选择客户，并将它们显示在由 javascript 生成的表格中，这样我们就不会得到所有这些刷新。然后他们可以添加其他信息，以便可以再次将它们保存到另一个表中，但这并不重要。

在从所选客户生成表格行之前，我执行了一些计算。另一个问题是，devexpress gridview 有一个事件会调用每个选择更改，而不是等待约 100 毫秒，这样用户就可以快速多选而不触发方法 3/4 次。

我通过数组跟踪我自己的表。DevExpress 的 GridView 有他自己的事件，可以给我正确的信息，所以不用担心。所以我得到了一个方法 receiveSelectionFields(Values){ //do something }，我从每个选择的 gridview 接收该信息。然后我检查我的数组，看看他们是否添加或删除了选择，以及哪些。然后我调用 addtablerow(customer) 或 removetablerow(customer)。这会将客户从我的表中删除，然后从我的数组中删除。

因为我在两者之间进行了一些繁重的计算，所以在计算完成之前有大约 60 毫秒的延迟（在我的计算机上）。因此，如果用户在 60 毫秒内做出 2 次选择。我的数组将有错误的值（不会被添加/删除客户的第一个调用修改），并且我的 javascript 将导致错误，例如未删除表行。我检查我自己的数组的长度和接收到的数组的长度，看看是否添加或删除了某些东西。

那么我尝试了什么？使我的方法成为递归方法，当问题发生时，它会等待 60 毫秒，然后重做该方法。但这不能正常工作。

我尝试添加一个全局变量busy，当方法仍然很忙时这是真的。结束时为假。但是我的浏览器在这样做时就退出了。这是代码：

```
 while (true) {

        setTimeout(function () {
            if (busy === false) {
                break;
            }
        }, 50);
    } 
```

但我觉得它只是无休止地循环。

这些都是变通方法，必须有一个很好的方法来解决这个问题。有什么想法吗？

简而言之：我想要一种让功能同步运行的方法。即使它们被称为异步。由用户，这样我的阵列就不会搞砸。

找到了为什么我的问题存在的答案：因为 javascript 是同步的。语言（1 个线程）。这些功能应该在正确的时间触发。问题是来自 DevExpress Gridview for MVC Extensions 的回调。它对服务器进行回调，该服务器在大约 150 毫秒内响应选定的字段值。如果您快速触发 devexpress 函数两次，这将产生错误。第二个触发器有一个比第一个触发器返回更快的窗口。这意味着我的表格编码被破坏了，因为我检查了是否添加或删除了某些东西。因此，当第一个触发器（在第二个触发器后返回）和我的表被更新时。它显示了我上次选择之前的表格。因此缺少 1 行或多 1 行，那么它应该有。

所以我必须创建一个函数来检索所有事件，然后在每个订单后按约 200 毫秒的顺序排列它们。确保有足够的时间让回调检索。虽然这当然仍然不可靠，但我想我会改变这方面的要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:50:53.810

您的 while 循环条件为真，因此循环将无休止地继续。您可能想尝试以下方法：

```
var int = setInterval(function () {
    if(busy === false) {
        clearInterval(int);
    }
}, 50); 
```

试试这个，而不是一遍又一遍地循环 setTimeout。如果我不得不猜测，break 会破坏 if 语句，而不是 while 循环，导致浏览器陷入无限循环。使用上面的代码，您可以设置运行代码的时间间隔。在这种情况下，代码每 50 毫秒运行一次。一旦 if 语句中的条件为真，setInterval 就会被清除，导致浏览器继续执行其正常功能。

希望这可以帮助。

# c# - 创建并打开word文档并将其放在前面

> ID：12727766
> 
> 赞同：2
> 
> 时间：2012-10-04T12:53:37.843
> 
> 标签：c#, ms-word, add-in, office-interop, visual-studio-addins

我正在 c# 中创建一个 word 插件，我正在创建一个文档，插入一个超链接并尝试将它放在前面。但新创建的文档没有出现在前面。它回到当前窗口的后面。下面是代码：

```
Word.Document newNoteDoc = new Word.Document();
        object oActiveDocFullName = Globals.ThisAddIn.Application.ActiveDocument.FullName;
        object oAcitiveDocNameWithoutExt = Path.GetFileNameWithoutExtension(Globals.ThisAddIn.Application.ActiveDocument.Name);
        object oActiveDocName = Globals.ThisAddIn.Application.ActiveDocument.Name;
        object oScreenTip = (GeneralHelper.pstrNoteFolder + "\\" + txtFileName.Text.Trim() + ".docx").Replace('\\', '/');
        object oScreemTipInNewDoc = Globals.ThisAddIn.Application.ActiveDocument.FullName.Replace('\\', '/');
        object oMissingReference = System.Reflection.Missing.Value;
        object oFileName = "file:///" + GeneralHelper.pstrNoteFolder + "/" + txtFileName.Text.Trim() + ".docx";
        object oHyperlinkText = txtHyperlinkText.Text.Trim();
        object oFileFormat = Word.WdSaveFormat.wdFormatDocumentDefault;
        object oAddToRecentFiles = true;
        object oReadOnlyRecommended = false;
        object oStartRange = 0;
        object oVisible = true;
        //  OopenFileName = oFileName;
        Word.Range rngCurrentRange = Globals.ThisAddIn.Application.Selection.Range;

        try
        {
            //Word.Document maindoc = Globals.ThisAddIn.Application.ActiveDocument;

            //insert hyperlink into current document
            rngCurrentRange.Hyperlinks.Add(rngCurrentRange, ref oFileName, ref oMissingReference, ref oScreenTip, ref oHyperlinkText, ref oFileName);
            Word.Range rngNewRange = newNoteDoc.Range(ref oStartRange, ref  oMissingReference);

            //insert hyperlink in the new doc.
            //Globals.ThisAddIn.Application.ActiveDocument.Activate();

            newNoteDoc.Hyperlinks.Add(rngNewRange, ref oActiveDocFullName, ref oMissingReference, ref oScreemTipInNewDoc, oAcitiveDocNameWithoutExt, oActiveDocFullName);
            //save the new doc

            newNoteDoc.SaveAs2(ref oFileName, ref oFileFormat, ref oMissingReference, ref oMissingReference, ref oAddToRecentFiles, ref oMissingReference,
                       ref oReadOnlyRecommended, ref oMissingReference, ref oMissingReference, ref oMissingReference, ref oMissingReference,
                       ref oMissingReference, ref oMissingReference, ref oMissingReference, ref oMissingReference, ref oMissingReference, ref oMissingReference);

            //Globals.ThisAddIn.AddTaskPane(newNoteDoc);

            //Application.DoEvents();

            ////newNoteDoc.Application.WindowState=1;
            //newNoteDoc.Activate();
            //newNoteDoc.Windows.Application.Visible = true;
            ////newNoteDoc.Activate();

            //Thread.Sleep(5000);

            //newNoteDoc.Application.Activate();

            //newNoteDoc.Application.WindowState = Word.WdWindowState.wdWindowStateMinimize;
            //newNoteDoc.Application.WindowState = Word.WdWindowState.wdWindowStateMaximize;

            newNoteDoc.Close(ref oMissingReference, ref oMissingReference, ref oMissingReference);
object readOnly = false;
            object isVisible = true;
            object oMissing = System.Reflection.Missing.Value;

            //Make word visible, so you can see what's happening         
            //Globals.ThisAddIn.Application.Visible = true;

            Word.Document NewDoc = Globals.ThisAddIn.Application.Documents.Open(ref oFileName, ref oMissing, ref readOnly, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref isVisible);

            NewDoc.Activate(); 
```

}

当前文档仍处于活动状态。我怎样才能激活新创建的文档并放在前面。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-25T11:13:13.667

尝试使用 DocumentChangeEvent()，然后尝试打开新文件。它应该自动使其处于活动状态。

# clickonce - ClickOnce：值不在预期范围内

> ID：12727771
> 
> 赞同：9
> 
> 时间：2012-10-04T12:53:58.450
> 
> 标签：clickonce

我有一个通过 ClickOnce 的分布式应用程序。我更新了几次，从来没有出现过问题。自上次更新（次要：一个标签）以来，当我从帖子运行我的应用程序时，单击一次启动并提示我错误：应用程序无法启动

当我查看日志时，我收到以下消息：

```
OPERATION PROGRESS STATUS
* [04/10/2012 13:24:33] : Activation of C:\Users\xxxxxxxxx.appref-ms| has started.
* [04/10/2012 13:24:33] : Performing necessary update check as specified by the deployment.

ERROR DETAILS
Following errors were detected during this operation.
* [04/10/2012 13:24:33] System.ArgumentException
- Value does not fall within the expected range.
- Source: System.Deployment
- Stack trace:
at System.Deployment.Application.NativeMethods.CorLaunchApplication(UInt32 hostType,     String applicationFullName, Int32 manifestPathsCount, String[]     manifestPaths, Int32 activationDataCount, String[] activationData, PROCESS_INFORMATION         processInformation)
at System.Deployment.Application.ComponentStore.ActivateApplication(DefinitionAppId             appId, String activationParameter, Boolean useActivationParameter)
at System.Deployment.Application.SubscriptionStore.ActivateApplication(DefinitionAppId         appId, String activationParameter, Boolean useActivationParameter)
at System.Deployment.Application.ApplicationActivator.Activate(DefinitionAppId     appId,     AssemblyManifest appManifest, String activationParameter, Boolean         useActivationParameter)
at System.Deployment.Application.ApplicationActivator.ProcessOrFollowShortcut(String      shortcutFile, String& errorPageUrl, TempFile& deployFile)
at System.Deployment.Application.ApplicationActivator.PerformDeploymentActivation(Uri activationUri, Boolean isShortcut, String textualSubId, String deploymentProviderUrlFromExtension, BrowserSettings browserSettings, String& errorPageUrl)
at System.Deployment.Application.ApplicationActivator.ActivateDeploymentWorker(Object state) 
```

我已经走遍了网络的长度和广度，但我还没有找到解决问题的方法。

我什至不明白这是什么问题。

我尝试了这个解决方案但没有成功： [ClickOnce 错误：值不在预期范围内](https://stackoverflow.com/questions/1166233/clickonce-error-value-does-not-fall-within-the-expected-range)

而这个也没有成功：[“价值不属于预期范围” ClickOnce Deployment](https://stackoverflow.com/questions/9704532/value-does-not-fall-in-the-expected-range-clickonce-deployment)

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T23:33:11.220

如果您尝试在 UNC 共享上运行 clickonce，它可能无法正常工作。我得到了和你上面一样的结果，但我只是尝试部署到 C:\ 而不是我们的共享，它运行得很好。此外，请检查以确保您的部署路径中没有任何 & 符号，因为这似乎搞砸了。

另请查看此帖子中要检查的事项列表。 [“价值不在预期范围内”ClickOnce 部署](https://stackoverflow.com/questions/9704532/value-does-not-fall-in-the-expected-range-clickonce-deployment)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-21T19:59:24.137

这有点延迟，但我发现解决我的问题的唯一解决方案是这个：

> 99.9% 的情况下，“值不在预期范围内”意味着您有循环引用，或对同一程序集的两个不同版本的引用。

从这里：[https ://social.msdn.microsoft.com/Forums/windows/en-US/e6c0a0ca-fbf0-47e2-8681-bc03471d09f6/value-does-not-fall-within-the-expected-range?forum =winforms 设置](https://social.msdn.microsoft.com/Forums/windows/en-US/e6c0a0ca-fbf0-47e2-8681-bc03471d09f6/value-does-not-fall-within-the-expected-range?forum=winformssetup)

# xml - Unix 命令行 CURL 等效于 PHP CURL

> ID：12727772
> 
> 赞同：0
> 
> 时间：2012-10-04T12:54:01.823
> 
> 标签：xml, pdf, curl

以下片段来自“ [http://pdfx.cs.man.ac.uk/usage](http://pdfx.cs.man.ac.uk/usage) ”。这个非常棒的工具，它将 pdf 格式的科学论文转换为 xml。

```
curl --data-binary @"/path/to/my.pdf"
     -H "Content-Type: application/pdf" 
     -L "http://pdfx.cs.man.ac.uk" 
```

这段代码是 unix 命令行代码，我想要它的 PHP 版本。我试过了

```
$pdfFile = fopen('jucs_18_05_0623_0649_hasan.pdf', 'r');
$fileSize = filesize ('jucs_18_05_0623_0649_hasan.pdf');
$url="http://pdfx.cs.man.ac.uk";
$ch=curl_init();
curl_setopt($ch, CURLOPT_URL, $url); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); // 
curl_setopt($ch, CURLOPT_TIMEOUT, 100);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_PUT, true);
curl_setopt($ch, CURLOPT_INFILE, $pdfFile);
curl_setopt($ch, CURLOPT_INFILESIZE, $fileSize);
curl_setopt($ch, CURLOPT_VERBOSE, true);

$fp = fopen("test.xml", "w");
curl_setopt($ch, CURLOPT_FILE, $fp);

if (! $res = curl_exec($ch))
    echo "Error: ".curl_error($ch);
else {
    echo "Success";
}   
curl_close($ch); 
```

问题是 test.xml 的输出是索引文件 html 代码，而不是所提供文章的转换 xml 版本。

等待您的专家意见...

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:19:59.450

放不需要。需要内容长度。

```
<?php
$pdfFile = fopen('1.pdf', 'r');
$fileSize = filesize ('1.pdf');
$url="http://pdfx.cs.man.ac.uk";
$ch=curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); //
curl_setopt($ch, CURLOPT_TIMEOUT, 100);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-Type: application/pdf","Content-length: ".$fileSize));
curl_setopt($ch, CURLOPT_INFILE, $pdfFile);
curl_setopt($ch, CURLOPT_INFILESIZE, $fileSize);
curl_setopt($ch, CURLOPT_VERBOSE, true);

$fp = fopen("test.xml", "w");
curl_setopt($ch, CURLOPT_FILE, $fp);

if (! $res = curl_exec($ch))
    echo "Error: ".curl_error($ch);
else {
    echo "Success";
}
curl_close($ch);
?> 
```

# udp - 为什么 UDP 会重新排序数据包

> ID：12727775
> 
> 赞同：1
> 
> 时间：2012-10-04T12:54:06.170
> 
> 标签：udp

我知道 UDP 并不总是按顺序或根本不接收数据包，但我怎样才能找出原因呢？数据包是否在传输中丢失或重新排序。例如，不同的数据包采用不同的路由并在不同的时间到达。还是损坏的数据包被重新发送并因此延迟到达？

如果可以在帖子中回答，我更愿意，但是如果您可以将我重定向到更好的来源，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:05:59.427

[单个网络交换机可能会重新排序最后两个数据包作为头部阻塞](http://en.wikipedia.org/wiki/Head-of-line_blocking)的副作用，因此级联交换机将导致进一步重新排序，然后由于距离不同和缺乏排序，多条路径无法保证排序与数据报。

这是有关该主题的论文：

*   [http://ils.unc.edu/courses/2000_spring/inls186_001/reorderingpaper.pdf](http://ils.unc.edu/courses/2000_spring/inls186_001/reorderingpaper.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:00:08.973

出于速度和效率的目的，数据包不是按顺序接收的，这意味着任何数据包都可以采用任何路由，而不必等待任何其他数据包到达/发送。因为可靠性不是 UDP 的主要关注点之一，所以它并不关心。

丢弃的数据包也不会重新发送，因为两端都没有进行检查。UDP 主要用于与丢失一些数据包无关的事情，例如流媒体、VoIP 等。

如果你想要可靠性，那么你需要使用 TCP。

# facebook-graph-api - https://graph.facebook.com/debug_token 仅适用于应用程序开发人员吗？

> ID：12727778
> 
> 赞同：3
> 
> 时间：2012-10-04T12:54:28.857
> 
> 标签：facebook-graph-api

网站工具位于： [https ://developers.facebook.com/tools/debug/](https://developers.facebook.com/tools/debug/)

任何用户都可以使用它来检查他们的令牌，但似乎 API 端点： [https ://graph.facebook.com/debug_token](https://graph.facebook.com/debug_token)

仅适用于应用程序开发人员。

首先，我只是想确认是这种情况吗？

其次，我想知道是否有 API 端点来检查任何令牌？鉴于有 UI/网页功能可以做到这一点，无法理解为什么不允许这样做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T19:25:00.747

您是在问 API 是否仅适用于开发人员？是的 - 正如 CBRoe 提供的文档所示，您需要`access_token`从您自己的应用程序中包含一个当前有效的内容，以便调试另一个应用程序的详细信息。

该 API 端点确实允许您检查应用程序中的任何令牌，您只需要指定自己的令牌来验证请求

# javascript - 点击时 JQuery 移动按钮样式更改

> ID：12727781
> 
> 赞同：2
> 
> 时间：2012-10-04T12:54:46.023
> 
> 标签：javascript, jquery, events, mobile, onclick

我正在使用 jquery mobile 和 html5 开发移动应用程序。应用程序的一个部分是一个事件日历，它应该可以通过单击下一个和上一个按钮来遍历月份。

迭代功能没有问题，但是当月份改变时，按钮的内容和功能应该更新以显示新月份的上一个和下一个按钮。

```
if (month == 11) {
  var next_month = '<input id="next" onclick = "callMonth(' + 0 + ',' + (year + 1) 
    + ');" type="button" data-icon="arrow-r" data-inline="true" value="' 
    + monthNames[0] + ' ' + (year + 1) + '" />';
} else {
  var next_month = '<input id="next" onclick="callMonth(' + (month + 1) + ',' 
    +  year + ');" type="button" data-icon="arrow-r" data-inline="true" value="' 
    + monthNames[month + 1] + ' ' + (year) + '" />';    
}

// previous month
if (month == 0) {
  var prev_month = '<input id="next" onclick = "callMonth(' + 11 + ',' 
    + (year - 1) + ');" type="button" data-icon="arrow-l" data-inline="true" value="'
    + monthNames[11] + ' ' + (year - 1) + '" />';
} else {
  var prev_month = '<input id="next" onclick="callMonth(' + (month - 1) + ',' 
    + year + ');" type="button" data-icon="arrow-l" data-inline="true" value="' 
    + monthNames[month - 1] + ' ' + (year) + '" />';
} 
```

我正在使用`onclick`输入按钮的参数，因为 jQuery 移动功能`$("#next").click()`在 if-else-block 内不起作用。同样重要的是要提到函数`callMonth(y,m)`本身将调用此代码。上面显示的代码是函数`calendarWidget()`正在调用的函数的一部分`callMonth()`。所以`onclick`参数函数触发了再次构建按钮的函数。

现在我的问题是：第一次生成按钮时，它具有应具有的正确样式（jQuery 移动、下一个/上一个图标）。单击按钮时 - 无论是上个月还是下个月 - 下个月或上个月的所有内容都会正确显示。问题是：按钮将其样式重置为浏览器的默认值，这意味着没有 jQuery 移动用户界面，没有图标。如前所述，功能更新没有问题，这意味着可以继续迭代数月。

如何防止更改按钮样式？我应该如何实现按钮的功能（无需重新加载页面？）

我很抱歉我缺乏 jQuery mobile 和英语方面的经验。我找不到任何来源来记录此错误，也许问题出在使用，`onclick`但无法在 if-else-statement 中定义 click-event-trigger。我很乐意感谢有关如何解决此问题的任何提示、帮助或线索。

提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:25:37.160

好吧，因为我的问题没有足够的细节，或者可能因为它太具体了，我找不到一个简单的解决方案，现在我写了一个简单的解决方法来解决这个问题。在进行更改后，我已经尝试`.trigger("create")`使用这两个按钮进行呼叫，但它不起作用。所以我只是在完成所有更改后添加了一个页面重新加载：

```
var callMonth = function(m, y) {
    $("#calendar").calendarWidget({month: m, year:y});
     eventData = eventFeedReader.read(function(eventData) {
                evalCalendar(m, y, eventData);
            });
    $('#events').page('destroy').page();
    } 
```

按钮的 onclick 参数仍在调用 callMonth-Function：

```
<input id="next" onclick="callMonth(' + (month + 1) + ',' 
    +  year + ');" type="button" data-icon="arrow-r" data-inline="true" value="' 
    + monthNames[month + 1] + ' ' + (year) + '" />'; 
```

所以这里没有变化。

尽管我预计该命令`.page("destroy").page()`也会撤消对日历小部件所做的所有更改，但它没有。页面被销毁和重建后，内容和功能都可以正常工作。我不知道为什么无法触发按钮的重新创建，但无论如何 - 现在一切正常。
无论如何，感谢所有试图猜测解决方案的人，并祝那些在遇到类似问题时偶然发现此问题的人好运！

# upload - 如何使用 gradle 将工件上传到网络驱动器？

> ID：12727783
> 
> 赞同：2
> 
> 时间：2012-10-04T12:55:00.227
> 
> 标签：upload, gradle, fileshare

我正在读这个：

[http://www.gradle.org/docs/current/userguide/artifact_management.html](http://www.gradle.org/docs/current/userguide/artifact_management.html)

了解如何将我的工件发布/上传到网络驱动器/文件共享，这是一个要求（我们有一个 maven repo 启动并运行，但一些工件需要转储到文件共享上）。我发现的示例更侧重于部署到存储库、maven、ivy 等。

我有一个简单的 eclipse java 项目，我使用 gradle 1.2 和以下 build.gradle 文件构建：

```
apply plugin: 'java' 

sourceSets {
  main {
    java {
      srcDir 'src'
    }
  }
  test {
    java {
      srcDir 'test'
    }
  }
}
repositories {
  flatDir {
      name "fileRepo"
      dirs "file://internal.newtwork.drive/folder/test"
  }
}

uploadArchives {
  repositories {
      add project.repositories.fileRepo
  }
} 
```

我可以在 gradle 文档中的哪个位置阅读有关如何将资源复制到远程文件共享的信息？

我已尝试根据以下答案更新协议和 dir 属性，但出现此错误：

*   出了什么问题：任务“：uploadArchives”执行失败。

    > 无法发布配置 ':archives'。java.io.FileNotFoundException：/internal.newtwork.drive/folder/test/sample-gradle-java-unspecified.jar（没有这样的文件或目录）

目的地是正确的，所以 flatDir 存储库不支持网络驱动器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-06T19:50:43.057

您应该定义以下参数：

```
archivesBaseName = 'yourappname'
group = 'your.app.package'
version = '1.0.0' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:01:21.543

您的 URL 未提及方案（http:、file: 等）。我不知道您是否可以使用 file: URL，或者您是否需要使用不同的语法来指定目录而不是 HTTP URL，但无论哪种方式，您都需要正确地形成 URI Windows UNC 路径。

有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/1878024/file-uris-and-slashes)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T13:34:59.920

看起来你正在越线。该 url 只是您显然没有使用的常春藤存储库声明的一部分。文件系统存储库将由 flatDir 块处理，然后由`add project.repositories.fileRepo`语句引用。我建议尝试 flatDir`dir`变量中的完整路径，否则阻力最小的路径可能只是将一个简单的手动文件复制（或其他传输）任务放在一起，然后将其添加到您正在使用的主要部署任务中.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-04T11:15:26.323

//尝试这个，

```
apply plugin: 'java'
apply plugin: 'maven'

repositories {
    maven {
        url "$archivaUrl"`enter code here`
    credentials {
            username = "$userName"
            password = "$passWord"
        }
    }
}

// Dependencies
dependencies { 
    // specify the lib files at compile and run time         
    compile fileTree(dir: 'lib', include: ['**/*.jar','*.jar'])
    runtime fileTree(dir: 'lib', include: ['**/*.jar','*.jar'])
}

// source path 
sourceSets {
    main {
        java {
        srcDirs 'src'
        }

    }
}

uploadArchives {
    repositories {
    mavenDeployer {
        repository(url: "$archivaUrl") {
        authentication(userName: "$userName", password: "$passWord")
        }
        pom.version = "1.0-SNAPSHOT"
        pom.artifactId = "fd-common"
        pom.groupId = "com.somename.common"
    }    

    }
} 
```

# java - 如何在 Java 中制作性感的用户界面

> ID：12727785
> 
> 赞同：5
> 
> 时间：2012-10-04T12:55:02.433
> 
> 标签：java, swing, user-interface, swt

我正计划开发一个允许管理客户端数据的桌面应用程序。我是一位经验丰富的 Java 程序员，但我从来没有真正能够在 Java 中做有吸引力的界面，例如，我个人认为默认的 Swing 组件很糟糕（当我将它与最近的 Web 界面进行比较时）。

所以第一个问题是，我怎样才能在 Java 中制作性感的接口（仍然可以在所有平台上运行）？其次，用 HTML5 制作界面不是一个好主意吗？没有网络服务器就不能运行 HTML5 界面，因为我不需要可以在线访问应用程序，因此我不需要服务器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T13:03:49.577

我同意默认的 Metal Look and Feel 并不太吸引人，但 Java 还有其他 Look and Feels。Nimbus 自 Java SE 6 Update 10 起就包含在 JRE 中，它比 Metal 更新并且看起来更酷，您可能想查看一下：

[http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/nimbus.html](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/nimbus.html)

您还可以下载许多外部外观并与您的应用程序捆绑在一起。一些例子：

[http://geeknizer.com/best-java-swing-look-and-feel-themes-professional-casual-top-10/](http://geeknizer.com/best-java-swing-look-and-feel-themes-professional-casual-top-10/)

[http://www.java2s.com/Product/Java/Swing/Look-And-Feel-LaF.htm](http://www.java2s.com/Product/Java/Swing/Look-And-Feel-LaF.htm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T13:10:29.503

*   金属外观和感觉（根本）不友好，我们甚至不考虑 Motif。

*   Nimbus 做得更好，但仍然看起来不正确，也不自然

*   但是，在每个平台上，您都可以使用“系统”的外观和感觉：看起来不错，感觉自然-->良好的用户体验。

*   如果您想创建自己的外观和感觉，请查看 Synth。这有点像您可以将 CSS 应用到 Swing 组件。

要使用系统外观，没有什么比调用它更容易（在开始任何与 UI 相关的事情之前）：

```
try {
    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
} catch (ClassNotFoundException e) {
    e.printStackTrace();
} catch (InstantiationException e) {
    e.printStackTrace();
} catch (IllegalAccessException e) {
    e.printStackTrace();
} catch (UnsupportedLookAndFeelException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T13:05:01.973

有很多非常好的APIs。最好的之一是[Substance](https://github.com/kirillcool/substance)，它已正式停产，但有一个名为[Insubstantional](https://github.com/Insubstantial/insubstantial)的活动分支。

这很简单，您可以对其进行大量自定义，[请在此处查看更多屏幕截图，](http://insubstantial.github.com/insubstantial/substance/see.html)如下所示：

![在此处输入图像描述](../Images/65826bbad710f77be704813521ce8b95.png)

您可能会发现[JGoodies](http://www.jgoodies.com/)和[SwingX](http://swingx.java.net/)项目也很有趣。

您还可以查看[JavaFX](http://docs.oracle.com/javafx/)，可以在 Swing 应用程序中包含 JavaFX 组件（您可以在[Java Magazine](http://www.oracle.com/technetwork/java/javamagazine/index.html)中找到有关这方面的有趣文章），反之亦然。您会喜欢它，因为您可以使用 CSS 来自定义 Outlook。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-04T13:07:33.440

如果你想编写一个传统的桌面应用程序，你可能想看看[SWT](http://www.eclipse.org/swt/)，一个替代的小部件 takeit。它是用于 Eclipse IDE 的小部件集；我认为这看起来不错，肯定比大多数 Swing 应用程序（咳嗽 IntelliJ）要好得多。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-04T13:22:06.917

> 我个人认为默认的 Swing 组件很糟糕（当我将它与最近的 Web 界面进行比较时）。

*   是的（自 2001/2 稳定的 GUI 以来，有很长的错误历史，一切皆有可能）

*   不，大部分网页界面看起来像马戏团

> 所以第一个问题是，我怎样才能在 Java 中制作性感的接口（仍然可以在所有平台上运行）？

为 Swing GUI使用[自定义外观](https://stackoverflow.com/a/3954646/714968)

> 其次，用 HTML5 制作界面不是一个好主意吗？没有网络服务器就不能运行 HTML5 界面，因为我不需要可以在线访问应用程序，因此我不需要服务器。

这个可能的[官方 Oracle API for JavaFX2.x](http://www.oracle.com/us/technologies/java/fx/overview/index.html)，[或者 ???](http://java.dzone.com/articles/when-use-javafx-2-instead)

# c# - 在 IIS 服务器上使用 C# 的 MS Access 数据库

> ID：12727794
> 
> 赞同：2
> 
> 时间：2012-10-04T12:55:37.963
> 
> 标签：c#, .net, web-services, ms-access, iis

我正在使用带有 C# 的 MS Access 数据库并创建一个 Web 服务。对于与数据库的连接，我使用以下代码

```
String databasePath = @"C:\inetpub\wwwroot\02 CustomerCreate\CustomerCreate\adResDemo.mdb";
String Connect = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + databasePath + ";Persist Security Info=False";

//Connection to database
con = new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + databasePath + ";Persist Security Info=False");
con.Open(); 
```

现在我正在使用代码在表中插入一些行。我为此使用以下代码

```
//Query For ZipCode Insertion
String zipQuery = "INSERT INTO ZipCodes(ZipCode, City, State, DeliveryCharge, DeliveryComp, AutoID, RowGUID) VALUES ('" + PostCode + "','" + City + "','" + State + "'," + DeliveryCharge + "," + DeliveryComp + "," + AutoID + ",'" + RowGUIDZipCode + "')";
//Inserts query ZipCodes Table
cmd = new OleDbCommand(zipQuery, con);
cmd.ExecuteNonQuery(); 
```

现在，当我直接在 Visual Studio 上运行上面的代码时，它的工作正常并且数据库中的条目发生了。但是，当我在 IIS 服务器**cmd.ExecuteNonQuery()**上部署此 Web 服务时，会引发运行时异常并且它不会在数据库中插入任何值。

### 例外

```
System.Data.OleDb.OleDbException: Operation must use an updateable query.
at System.Data.OleDb.OleDbCommand.ExecuteCommandTextErrorHandling(OleDbHResult hr)
at System.Data.OleDb.OleDbCommand.ExecuteCommandTextForSingleResult(tagDBPARAMS dbParams, Object& executeResult)
at System.Data.OleDb.OleDbCommand.ExecuteCommandText(Object& executeResult)
at System.Data.OleDb.OleDbCommand.ExecuteCommand(CommandBehavior behavior, Object& executeResult)
at System.Data.OleDb.OleDbCommand.ExecuteReaderInternal(CommandBehavior behavior, String method)
at System.Data.OleDb.OleDbCommand.ExecuteNonQuery()
at CustomerCreate.Service1.createCustomer(String FirstName, String LastName, String EmailAddress, String CompanyName, String StreetAddress, String PostCode, String City, String State, String Country, String PhoneNumber) in C:\inetpub\wwwroot\02 CustomerCreate\CustomerCreate\Service1.asmx.cs:line 141 
```

这是什么类型的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:01:18.877

不确定，但您似乎需要对包含您尝试连接的 mdb 文件的文件夹具有**修改权限。**

**要设置此权限：**

右键单击 App_Data 文件夹（或您将 mdb 文件放入的任何其他文件夹）并选择属性。查找安全选项卡。如果看不到它，则需要转到我的电脑，然后单击工具并选择文件夹选项...。​​然后单击查看选项卡。滚动到底部并取消选中“使用简单文件共享（推荐）”。返回“安全”选项卡，您需要将相关帐户添加到“组或用户名”框中。单击添加...，然后单击高级，然后单击立即查找。应列出适当的帐户。双击它以将其添加到组或用户名框中，然后检查权限中的修改选项。就是这样。你完成了。

取自[**此链接**](http://www.mikesdotnetting.com/Article/74/Solving-the-Operation-Must-Use-An-Updateable-Query-error)

# mysql - 模拟 row_number 函数

> ID：12727799
> 
> 赞同：3
> 
> 时间：2012-10-04T12:56:16.327
> 
> 标签：mysql, window-functions

我有 X 个类别、Y 个论坛和 Z 个线程。

*   主题属于一个论坛
*   论坛属于一个类别

*   我希望能够选择 X 类别和

    *   为每个类别选择前 3 个论坛和
    *   为每个论坛选择前 4 个主题。

（数字仅作为示例）

我通过变量模拟 row_numbers 来做到这一点，因为 mysql 不支持这个开箱即用。

不幸的是，行号仍然有问题。也许有人可以看看这里有什么问题。为了更好的可读性，我在此处上传了带有代码突出显示的查询和结果

```
SELECT
    CatRow,
    c_id,
    c_name,
    ForumRow,
    f_id,
    f_name,
    ThreadRow,
    t_id,
    t_title
FROM (
    SELECT
        @cat_row    := IF(@prev_cat    = c.id, @cat_row+1, 1)   AS CatRow,
        @forum_row  := IF(@prev_forum  = f.id, @forum_row+1, 1) AS ForumRow,
        @thread_row := IF(@prev_thread = t.id, @thread_row+1, 1)AS ThreadRow,
        c.id        AS c_id,
        c.name      AS c_name,
        f.id        AS f_id,
        f.name      AS f_name,
        t.id        AS t_id,
        t.title     AS t_title,
        @prev_cat   := c.id,
        @prev_forum := f.id,
        @prev_thread:= t.id
    FROM (
        SELECT
            *
        FROM
            forum_categories c,
            (SELECT @cat_row := 1) AS x,
            (SELECT @prev_cat := '') AS y
        ORDER BY @cat_row
    ) AS c

    LEFT JOIN (
        SELECT
            *
        FROM
            forum_forums AS f,
            (SELECT @forum_row := 1) AS x,
            (SELECT @prev_forum := '') AS y
        ORDER BY @forum_row
    ) AS f ON (c.id = f.fk_forum_category_id )

    LEFT JOIN (
        SELECT
            *
        FROM
            forum_threads AS t,
            (SELECT @thread_row := 1) AS x,
            (SELECT @prev_thread := '') As y
        ORDER BY @thread_row
    ) AS t ON (f.id = t.fk_forum_forums_id )

    ORDER BY c.id ASC, f.id ASC, t.id ASC
) c
-- This is for later to actually limit the joins
-- WHERE CatRow <= 3 AND
-- ForumRow <= 3 AND
-- ThreadRow <= 4 
```

结果如下所示：

```
 CatRow  c_id    c_name  ForumRow f_id   f_name      ThreadRow   t_id    t_title
4   1   General 4   2   Talk            1   42  talk
5   1   General 5   2   Talk            1   43  Talk...
6   1   General 6   2   Talk            1   44  locked thread
7   1   General 7   2   Talk            1   45  closed thread
3   1   General 3   2   Talk            1   48  :(:red::confuse::)
1   1   General 1   2   Talk            1   50  gsfdgsdg
2   1   General 2   2   Talk            1   51  asdasd
9   1   General 2   5   Voting          1   47  some title
8   1   General 1   5   Voting          1   49  sadfsad
1   2   Support 1   3   Help            1   40  Hueeelefe
2   2   Support 1   4   Features and Bugs   1   41  What is a bug?
3   2   Support 1   7   Test            1   NULL    NULL    
2   3   News    2   1   News            1   39  News by admin
1   3   News    1   1   News            1   46  further news 
```

最后我需要能够指定：

*   其中 CatRow <= 9 并且
*   论坛行 <= 3
*   AND ThreadRow <= 4

由于错误的row_numbers，这还不可能。有任何想法吗？？？

实际上我希望结果看起来像这样：

```
 CatRow  c_id    c_name  ForumRow f_id   f_name      ThreadRow   t_id    t_title
1   1   General 1   2   Talk            1   42  talk
1   1   General 1   2   Talk            2   43  Talk...
1   1   General 1   2   Talk            3   44  locked thread
1   1   General 1   2   Talk            4   45  closed thread
1   1   General 1   2   Talk            5   48  :(:red::confuse::)
1   1   General 1   2   Talk            6   50  gsfdgsdg
1   1   General 1   2   Talk            7   51  asdasd
1   1   General 2   5   Voting          1   47  some title
1   1   General 2   5   Voting          2   49  sadfsad
2   2   Support 1   3   Help            1   40  Hueeelefe
2   2   Support 2   4   Features and Bugs   1   41  What is a bug?
2   2   Support 3   7   Test            1   NULL    NULL    
3   3   News    1   1   News            1   39  News by admin
3   3   News    1   1   News            2   46  further news 
```

为了更好的可读性，我上传了带有代码突出显示的查询和结果图片：http: [//i.stack.imgur.com/9tzmH.png](http://i.stack.imgur.com/9tzmH.png) [http://i.stack.imgur.com/xXF6U.png](http://i.stack.imgur.com/xXF6U.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T17:32:17.060

[SQL小提琴](http://sqlfiddle.com/#!2/9e30b/1)

```
set @c_row := 0, @f_row := 0, @t_row := 0;
set @cat := 0, @forum := 0;

select CatRow, c_id, c_name, ForumRow, f_id, f_name, ThreadRow, t_id, title
from (
    select
        @c_row := if(@cat = c_id, @c_row, @c_row + 1) CatRow,
        @f_row := if(@forum = f_id, @f_row, if(@cat = c_id, @f_row + 1, 1)) ForumRow,
        @t_row := if(@forum = f_id, @t_row + 1, 1) ThreadRow,
        @cat := c_id as a,
        @forum := f_id as b,
        c_id,
        c_name,
        f_id,
        f_name,
        t_id,
        title
    from (
        select 
            c.id c_id, f.id f_id, t.id t_id,
            c.name c_name, f.name f_name, title
        from 
            forum_categories c
            inner join
            forum_forums f on f.c_id = c.id
            inner join
            forum_threads t on t.f_id = f.id
        order by 
            c.id, f.id, t.id
    ) s
) s;
+--------+------+---------+----------+------+-------------------+-----------+------+--------------------+
| CatRow | c_id | c_name  | ForumRow | f_id | f_name            | ThreadRow | t_id | title              |
+--------+------+---------+----------+------+-------------------+-----------+------+--------------------+
|      1 |    1 | General |        1 |    2 | Talk              |         1 |   42 | talk               |
|      1 |    1 | General |        1 |    2 | Talk              |         2 |   43 | Talk...            |
|      1 |    1 | General |        1 |    2 | Talk              |         3 |   44 | locked thread      |
|      1 |    1 | General |        1 |    2 | Talk              |         4 |   45 | closed thread      |
|      1 |    1 | General |        1 |    2 | Talk              |         5 |   48 | :(:red::confuse::) |
|      1 |    1 | General |        1 |    2 | Talk              |         6 |   50 | gsfdgsdg           |
|      1 |    1 | General |        1 |    2 | Talk              |         7 |   51 | asdasd             |
|      1 |    1 | General |        2 |    5 | Voting            |         1 |   47 | some title         |
|      1 |    1 | General |        2 |    5 | Voting            |         2 |   49 | sadfsad            |
|      2 |    2 | Support |        1 |    3 | Help              |         1 |   40 | Hueeelefe          |
|      2 |    2 | Support |        2 |    4 | Features and Bugs |         1 |   41 | What is a bug?     |
|      3 |    3 | News    |        1 |    1 | News              |         1 |   39 | News by admin      |
|      3 |    3 | News    |        1 |    1 | News              |         2 |   46 | further news       |
+--------+------+---------+----------+------+-------------------+-----------+------+--------------------+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T23:58:45.217

我现在已经解决了：这适用于所有级别。我也为每个线程添加了帖子

```
SELECT
    CatRow,
    c_id,
    c_name,
    ForumRow,
    f_id,
    f_name,
    ThreadRow,
    t_id,
    t_title,
    PostRow,
    p_id, 
    p_title
FROM (
    SELECT
        @cat_row    := IF(@prev_cat    = c.id, @cat_row, @cat_row+1)   AS CatRow,
        @forum_row  := IF(@prev_forum  = f.id, @forum_row,  IF(@prev_cat   = c.id, @forum_row+1, 1)) AS ForumRow,
        @thread_row := IF(@prev_thread = t.id, @thread_row, IF(@prev_forum = f.id, @thread_row+1, 1))AS ThreadRow,
        @post_row   := IF(@prev_post   = t.id, @post_row,   IF(@prev_thread= t.id, @post_row+1, 1))  AS PostRow,
        c.id        AS c_id,
        c.name      AS c_name,
        f.id        AS f_id,
        f.name      AS f_name,
        t.id        AS t_id,
        t.title     AS t_title,
        p.id        AS p_id,
        p.title     AS p_title,
        @prev_cat   := c.id,
        @prev_forum := f.id,
        @prev_thread:= t.id,
        @prev_post  := p.id
    FROM (
        SELECT
            *
        FROM
            forum_categories,
            (SELECT @cat_row := 0) AS x,
            (SELECT @prev_cat := '') AS y
        ORDER BY YOUR_ORDER_HERE
    ) AS c

    LEFT JOIN (
        SELECT
            *
        FROM
            forum_forums,
            (SELECT @forum_row := 0) AS x,
            (SELECT @prev_forum := '') AS y
        ORDER BY YOUR_ORDER_HERE
    ) AS f ON (c.id = f.fk_forum_category_id )

    LEFT JOIN (
        SELECT
            *
        FROM
            forum_threads,
            (SELECT @thread_row := 0) AS x,
            (SELECT @prev_thread := '') As y
        ORDER BY YOUR_ORDER_HERE
    ) AS t ON (f.id = t.fk_forum_forums_id )

    LEFT JOIN (
        SELECT
            *
        FROM
            forum_posts AS p,
            (SELECT @post_row := 0) AS x,
            (SELECT @prev_post := '') As y
        ORDER BY YOUR_ORDER_HERE
    ) AS p ON (t.id = p.fk_forum_thread_id )
) c
-- WHERE CatRow <= HOW_MANY_CATS AND ForumRow <= HOW_MANY_FORUMS_PER_CAT AND ThreadRow <= HOW_MANY_THREADS_PER_FORUM AND PostRow <= HOW_MANY_POSTS_PER_THREAD

CatRow  c_id    c_name  ForumRow f_id   f_name      ThreadRow   t_id    t_title         PostRow p_id    p_title
1   1   General 1   2   Talk            1   50  gsfdgsdg        1   NULL    NULL
1   1   General 1   2   Talk            2   51  asdasd          1   NULL    NULL
1   1   General 1   2   Talk            3   48  :(:red::confuse::)  1   80  t1
1   1   General 1   2   Talk            3   48  :(:red::confuse::)  2   79  NULL
1   1   General 1   2   Talk            3   48  :(:red::confuse::)  3   78  NULL
1   1   General 1   2   Talk            4   42  talk            1   76  NULL
1   1   General 1   2   Talk            4   42  talk            2   75  sdfg
1   1   General 1   2   Talk            4   42  talk            3   74  NULL
1   1   General 1   2   Talk            4   42  talk            4   73  NULL
1   1   General 1   2   Talk            4   42  talk            5   72  NULL
1   1   General 1   2   Talk            5   43  Talk...         1   NULL    NULL
1   1   General 1   2   Talk            6   44  locked thread       1   NULL    NULL
1   1   General 1   2   Talk            7   45  closed thread       1   NULL    NULL
1   1   General 2   5   Voting          1   49  sadfsad         1   77  NULL
1   1   General 2   5   Voting          2   47  some title      1   NULL    NULL
2   3   News    1   1   News            1   46  further news        1   NULL    NULL
2   3   News    1   1   News            2   39  News by admin       1   71  NULL
2   3   News    1   1   News            2   39  News by admin       2   68  NULL
2   3   News    1   1   News            2   39  News by admin       3   67  NULL
3   2   Support 1   3   Help            1   40  Hueeelefe       1   70  NULL
3   2   Support 1   3   Help            1   40  Hueeelefe       2   69  NULL
3   2   Support 2   4   Features and Bugs   1   41  What is a bug?      1   NULL    NULL
3   2   Support 3   7   Test            1   NULL    NULL            1   NULL    NULL 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-04T15:40:10.943

使用依赖子查询`LIMIT`可以解决您的问题：

```
SELECT CatRow, c_id, c_name, ForumRow, f_id, f_name, ThreadRow, t_id, t_title
FROM forum_categories c
INNER JOIN (SELECT * FROM forum_forums f WHERE f.fk_forum_category_id=c.id LIMIT 3) AS t1
INNER JOIN (SELECT * FROM forum_threads t WHERE t.fk_forum_forums_id=f.id LIMIT 4) AS t2 
```

# bonecp - 调整 BoneCP 池的大小

> ID：12727800
> 
> 赞同：0
> 
> 时间：2012-10-04T12:56:18.963
> 
> 标签：bonecp

是否可以动态增长和收缩池。我希望能够在需要时增加池，然后在负载较少时再次缩小池，而无需重新启动应用程序。

我尝试设置最大连接变量，但它只是默认为 9 个连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:30:28.200

您可以减少或增加“当可用连接即将用完时，BoneCP 将动态批量创建新连接”的“acquireIncrement”。

BoneCP 的默认值为 10。例如，如果您将“acquireIncrement”设置为 1，您的池将动态增加或减少 1，始终具有与 minConnectionsPerPartition 的值相对应的连接数。

[http://jolbox.com/index.html?page=http://jolbox.com/configuration.html](http://jolbox.com/index.html?page=http://jolbox.com/configuration.html)

# jsp - 如何将参数从 JSP 动态传递给 Action 类？

> ID：12727801
> 
> 赞同：1
> 
> 时间：2012-10-04T12:56:18.057
> 
> 标签：jsp, struts2

在 Struts2 上，我有一个 JSP，它根据 List 对象显示一些文章。显示的文章总是在变化。

那么，我怎样才能将它们传递给另一个 Action 类呢？如果他们有固定的名字，映射会很容易，但他们没有。

我处理任何 ListArray，而不仅仅是 ListArray，所以标签现在似乎就足够了。有没有什么好的方法可以将动态变化的参数作为集合（Map、ListArray 等）传递给 Action 类？

# javascript - arcTo 方法的替代方法？

> ID：12727804
> 
> 赞同：0
> 
> 时间：2012-10-04T12:56:30.990
> 
> 标签：javascript, html, canvas, trigonometry, kineticjs

我在 kinteicjs 中创建自定义形状，并在运行时提供参数。

此形状将包括一个弧段。我假设我必须使用 arcTo() 方法来绘制此段，而不是 arc() 方法（如果我错了，请纠正我）。

在我看来，为 arcTo() 方法找到正确的参数是地狱。问题：是否有可用的库/自定义 js 代码可以用作绘制弧线的替代方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T08:29:09.613

如果您通过 Google 搜索找到此链接：

正如我在问题中所怀疑的那样， arcTo 方法不是绘制形状所必需的。只需使用具有直观参数的 arc() 方法来绘制弧线，然后丢弃这个奇怪的 arcTo() 东西。

# vb.net - vb.net 的 file.shortpath

> ID：12727806
> 
> 赞同：3
> 
> 时间：2012-10-04T12:56:35.377
> 
> 标签：vb.net, file, vb6, converter

ho 我正在将我的项目从 vb6 转换为 vb.net 在短路径的 vb.net 中有模拟方法吗？

```
Dim DestinationFile As Scripting.File
...
DestinationFile.ShortPath 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T13:09:45.027

不，现代语言不是为使用短路径而构建的，但您可以使用内核中的 GetShortPathName 方法：

```
Declare Auto Function GetShortPathName Lib "kernel32.dll" _
(ByVal lpszLongPath As String, ByVal lpszShortPath As StringBuilder, _
ByVal cchBuffer As Integer) As Integer 
```

调用使用：

```
Dim name As String = "C:\Long Directory Name\Really really long filename.txt"

Dim sb As New StringBuilder(256)
GetShortPathName(name, sb, sb.capacity)

Dim shortName As String = sb.ToString() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T13:09:44.613

到目前为止我能找到的是没有托管代码，但你可以这样做：

```
Imports System.Text
Imports System.Runtime.InteropServices

Module Module1

    Declare Unicode Function GetShortPathName Lib "kernel32.dll" Alias "GetShortPathNameW" (ByVal longPath As String, <MarshalAs(UnmanagedType.LPTStr)> ByVal ShortPath As System.Text.StringBuilder, <MarshalAs(UnmanagedType.U4)> ByVal bufferSize As Integer) As Integer

    Sub Main()
        Dim filespec As String = "SomeLongName"

        Dim sbShortPath As StringBuilder = New StringBuilder()
        GetShortPathName(filespec, sbShortPath, 255)

        Dim shortPath As String = sbShortPath.ToString
    End Sub

End Module 
```

在[PInvoke.net上找到方法声明](http://www.pinvoke.net/default.aspx/kernel32.getshortpathname)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T13:44:33.510

您的 VB6 正在[`FileSystemObject`](http://msdn.microsoft.com/en-us/library/aa242706%28v=vs.60%29.aspx)通过 COM 使用 Windows。

.Net 中似乎没有获取短文件名的功能。与在其他答案中使用 P/Invoke 调用 Windows API 不同，在 VB.Net 中通过 COM 使用相同的 FileSystemObject 更简单。只需添加对“Microsoft Scripting Runtime”的 COM 引用。那么 VB6 代码在 VB.Net 中可能几乎没有变化。

# javascript - Bootstrap scrollspy 在 ie 中不起作用？

> ID：12727810
> 
> 赞同：0
> 
> 时间：2012-10-04T12:56:46.590
> 
> 标签：javascript, internet-explorer, magento

我在我的 magento 站点中实现了 bootstrap scrollspy。它在 FF 和 Chrome 中运行良好。

但它在 IE 中不起作用。可以帮助解决这个问题。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T10:44:45.177

您是否在标头中包含 html5.js？因为ie8需要html5.js文件

# c# - 允许Java方法中的递归调用？

> ID：12727812
> 
> 赞同：0
> 
> 时间：2012-10-04T12:56:51.837
> 
> 标签：c#, java, .net

我对这段 Java 代码（一个名为 Message 的类）感到非常困惑。我认为第二个构造函数设置为`data_length`使用一个值进行初始化，为此它调用了一个`init`如您所见命名的方法。

但是里面发生的事情`init`是什么让我把头撞在桌子上:D 这个方法里面发生了什么？为什么叫自己？？

```
 /**
   * The actual length of the message data. Must be less than or equal to
   * (data.length - base_offset).
   */
  protected int data_length;

  /** Limit no-arg instantiation. */
  protected Message() {
  }

  /**
   * Construct a new message of the given size.
   * 
   * @param data_length
   *          The size of the message to create.
   */
  public Message(int data_length) {
    init(data_length);
  }

  public void init(int data_length) {
    init(new byte[data_length]);
  } 
```

我正在将此代码转换为 C#，如果我这样做可以吗：

```
public class Message
{    
     //blah blah and more blah

     private int _dataLength;

     public Message(int dataLength)
     {
         _dataLength = dataLength;
     }
 } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T12:58:29.197

它不是在呼唤自己。如果你看这里：

```
init(new byte[data_length]); 
```

代码实际上是在构造一个 new `byte[]`，然后在调用另一个`init`方法时使用它。Java 允许方法重载，因此并非所有`init`方法都相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T12:58:54.610

```
public void init(int data_length) {
    init(new byte[data_length]);
} 
```

它不是在呼唤自己；它正在调用另一个名为`init`a`byte[]`作为参数的方法。

该类`Message`或其超类之一包含其他`init`方法 - 您没有向我们展示它。

创建具有相同名称但参数类型不同的不同方法称为[方法重载](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T12:59:16.760

Java 中允许递归，但在您的示例`init()`中不是调用自身，而是另`init()`一种将字节数组作为其参数的方法（您未包含在您发布的代码中）。

# networking - “我的 IP 是什么”站点如何知道我的内部 LAN 地址？

> ID：12727814
> 
> 赞同：18
> 
> 时间：2012-10-04T12:56:53.787
> 
> 标签：networking

我现在住在旅馆里，我想看看我的外部 IP 地址是什么。我访问了一个可以帮助解决此问题的通用网站，它报告我的地址为...（为隐私起见，省略了最后几位数字）

> 您的 IP 地址是：69.165.XXX.XXX
> 
> 检测到本地网络 IP：10.1.XXX.XXX
> 
> 检测到可能的代理：1.1 localhost:3128 (squid/2.7.STABLE9)

网络 IP 确实是正确的值。这让我很困惑，因为我认为任何浏览器都不会分享这些信息。我的猜测是 Squid 正在重写请求标头。无论如何，这是一个有点麻烦的隐私问题。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2018-04-17T07:52:01.530

它使用 WebRTC 方法来收集您的本地 IP：

> Firefox 和 Chrome 已经实现了 WebRTC，允许向 STUN 服务器发出请求，这些请求将为用户返回本地和公共 IP 地址。这些请求结果可用于 javascript，因此您现在可以在 javascript 中获取用户的本地和公共 IP 地址。

来源：[https](https://github.com/vitalets/webrtc-ips)
://github.com/vitalets/webrtc-ips PoC：[https ://vitalets.github.io/webrtc-ips/demo/](https://vitalets.github.io/webrtc-ips/demo/)

**08/2019 更新：**目前 PoC 不能完全工作，因为[Chrome 添加了`mDNS`支持以增加匿名性](https://bloggeek.me/psa-mdns-and-local-ice-candidates-are-coming/)。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-10-04T13:09:15.233

当您浏览网页（例如 whatismyip.com）时，您的计算机会将您的 IP 地址通知服务器，以便服务器可以将您请求的网页的 HTML、图形和其他元素发回给您。

考虑以下服务器变量（C# 代码）：

```
string server = Request.ServerVariables["SERVER_NAME"]; 
string url = Request.ServerVariables["URL"]; 
querystring = Request.ServerVariables["QUERY_STRING"]; 
string ipAddress = Request.ServerVariables["HTTP_X_FORWARDED_FOR"];
if (ipAddress == null || ipAddress == "")
{
    ipAddress = Request.ServerVariables["REMOTE_ADDR"];
} 
```

以下是其他一些变量：

```
"HTTP_X_COMING_FROM"
"HTTP_X_FORWARDED_FOR" 
"HTTP_X_FORWARDED" 
"HTTP_X_REAL_IP" 
"HTTP_VIA" 
"HTTP_COMING_FROM" 
"HTTP_FORWARDED_FOR" 
"HTTP_FORWARDED" 
"HTTP_FROM" 
"HTTP_PROXY_CONNECTION" 
"CLIENT_IP" 
"FORWARDED" 
```

# javascript - 不要打开OGG文件

> ID：12727820
> 
> 赞同：0
> 
> 时间：2012-10-04T12:57:08.307
> 
> 标签：javascript, html, audio, ogg

我用 html5（音频标签）打开 OGG 文件。在一个站点上工作，另一个没有。为什么？

例如：
[http](http://devluntegg.fishok.getmyip.com:39875/webim/sounds/new_user.ogg) ://devluntegg.fishok.getmyip.com:39875/webim/sounds/new_user.ogg - 工作（播放）
[http://lovisnami.ru/webim/sounds/new_user.ogg](http://lovisnami.ru/webim/sounds/new_user.ogg) - 不工作（建议维持）

html和js一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:00:47.713

第一个 URL 返回

```
Content-Type: audio/ogg 
```

第二个

```
Content-Type: application/octet-stream 
```

不同的网络服务器设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:03:15.863

其中只有一个是 ogg 文件。另一个是二进制数据块。

（至少，这是服务器告诉浏览器的）。

您需要正确配置服务器。

```
user@host:~ # curl -I http://devluntegg.fishok.getmyip.com:39875/webim/sounds/new_user.ogg | grep Content
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0 13889    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
Content-Length: 13889
Content-Type: audio/ogg

user@host:~ # curl -I http://lovisnami.ru/webim/sounds/new_user.ogg  | grep Content  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0 13889    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
Content-Type: application/octet-stream
Content-Length: 13889 
```

# c# - .NET 堆栈和堆，当我声明一个字符串时会去哪里？

> ID：12727821
> 
> 赞同：8
> 
> 时间：2012-10-04T12:57:09.773
> 
> 标签：c#, .net

如果我执行这一行，我会创建一个作为参考的字符串。

```
string mystring = "Hello World" 
```

变量是否`mystring`与我声明的对象在同一上下文中？`"Hello World"`堆上的数据呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-04T13:00:18.370

[官方回答：](http://blogs.msdn.com/b/ericlippert/archive/2009/04/27/the-stack-is-an-implementation-detail.aspx)这是一个实现细节，你不需要知道。

对于框架的特定（当前）版本当然是可知的：

1) 如果 this 在方法内部，`mystring`则为引用变量，通常在堆栈上。但是当它被捕获时，或者当方法是异步的，或者......它被移动到堆中。

2）如果这是在一个类中，那么每个实例都将包含一个`mystring`引用作为一个字段，存储在堆上。

在这两种情况下，堆上都有一个匿名字符串对象，其中包含`"Hello World"`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-04T13:03:45.920

情况很复杂。首先，编译器会保留字符串，因此您的字符串可能是对先前分配的字符串对象的引用。其次，它是一个实现细节，您不必担心，并且可以在任何下一个 C#/.NET 版本中更改。我将向您推荐 Eric Lippert 的出色帖子，他是编写 C# 编译器的人之一：[这里](http://blogs.msdn.com/b/ericlippert/archive/2009/05/04/the-stack-is-an-implementation-detail-part-two.aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-04T13:21:37.837

阅读这些……来自 Eric Lippert……他编写了 C# 编译器！应该回答你所有的问题。

[http://blogs.msdn.com/b/ericlippert/archive/2009/04/27/the-stack-is-an-implementation-detail.aspx](http://blogs.msdn.com/b/ericlippert/archive/2009/04/27/the-stack-is-an-implementation-detail.aspx)

[http://blogs.msdn.com/b/ericlippert/archive/2010/09/30/the-truth-about-value-types.aspx](http://blogs.msdn.com/b/ericlippert/archive/2010/09/30/the-truth-about-value-types.aspx)

# playframework - 使用 lighttpd 作为 play framework 的顶层添加 ssl

> ID：12727823
> 
> 赞同：2
> 
> 时间：2012-10-04T12:57:16.740
> 
> 标签：playframework, lighttpd

我想在游戏框架中使用 SSL over websocket。我明白那玩！2.1 还不支持 SSL（或者我错过了一些东西）

阅读游戏！文档显示了使用 lighttpd 的选项，我决定使用它。

我的问题是，如何配置客户端使用 WSS 连接到 lighttpd 并使用 WS 从 lighttpd 连接到 Play！的 lighttpd.conf？

非常感谢。

# actionscript-3 - 如何在中心绘制一个带有 alpha 正方形的正方形

> ID：12727830
> 
> 赞同：2
> 
> 时间：2012-10-04T12:57:50.507
> 
> 标签：actionscript-3

我知道如何画一个正方形：

```
graphics.moveTo(0, 0);
graphics.beginFill(0x00ff00, 1);
graphics.lineTo(point, 0);
graphics.lineTo(point, point);
graphics.lineTo(0, point);
graphics.lineTo(0, 0);
graphics.endFill(); 
```

现在我将如何在第一个正方形内绘制另一个 alpha 为 0.5 的正方形？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T13:11:01.467

以下代码段将绘制一个绿色正方形，然后在其中心减去一个正方形（[现场演示](http://wonderfl.net/c/v5o3)）。

```
// Size of the main square
var point:uint = 100;

// Create two sprites
var s1:Sprite = new Sprite();
var s2:Sprite = new Sprite();

// Shortcuts to graphics objects
var g1:Graphics = s1.graphics;
var g2:Graphics = s2.graphics;

// Draw the main square
g1.beginFill(0x00ff00, 1.0);
g1.drawRect(0, 0, point, point);
g1.endFill();

// Draw the eraser square 
g2.beginFill(0x000000, 0.5);
g2.drawRect(0, 0, point/2, point/2);
g2.endFill();

// Configure blend modes to erase the center of the first square
s1.blendMode = BlendMode.LAYER;
s2.blendMode = BlendMode.ERASE;

// Add the eraser square to the first one and adjust its position
s1.addChild(s2);
s2.x = s2.y = point/4;

// Add the first square to the stage
addChild(s1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T13:15:28.407

```
var squ1:Sprite = new Sprite();
with(squ1.graphics){
    beginFill(0xFF0000);
    drawRect(0,0,100,100);
    endFill();
}
addChild(squ1);
var inSq:Sprite = new Sprite();
with(inSq.graphics){
    beginFill(0x00FF00,.5);
    drawRect(0,0,25,25);
    endFill();
}
squ1.addChild(inSq);
inSq.x = squ1.width/2 - inSq.width/2;
inSq.y = squ1.height/2 - inSq.height/2; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T00:10:18.107

无需使用任何混合模式，您可以通过在结束填充之前绘制（擦除）所需部分来**排除绘制形状的部分。**

这是一个例子：

```
import flash.display.Shape;

var squares:Shape = new Shape();
squares.graphics.beginFill(0xFF0000, 1.0);
squares.graphics.drawRect(0, 0, 200, 200);
squares.graphics.drawRect(50, 50, 100, 100); //exclude
squares.graphics.endFill();
squares.graphics.beginFill(0x0000FF, 0.5);
squares.graphics.drawRect(75, 75, 100, 100);
squares.graphics.endFill();

addChild(squares); 
```

![在此处输入图像描述](../Images/0400279505723d53a3b7eff41c5d31e4.png)

# php - 将卡支付与 Codeigniter 集成

> ID：12727831
> 
> 赞同：1
> 
> 时间：2012-10-04T12:57:58.213
> 
> 标签：php, e-commerce, codeigniter-2

我已经构建了一个 Web 应用程序，我希望将cardsave 的直接支付 API 集成到应用程序中。我想知道是否有人对最好的方法有任何建议。

Cardsave 提供标准的集成代码：[下载网关集成包 ZIP 文件](https://mms.cardsaveonlinepayments.com/SiteFiles/VirtualFiles/GATEWAY_INTEGRATION_PACK/IntegrationPack.zip)

付款后，我需要将 CrossPaymentsReference 和付款金额存储在我的数据库中，其余的我将留给cardsave 的 api 我已经想到了一些可能可行的解决方案：

1) 对所有代码和成功支付使用 Views，并使用 Ajax 在成功完成时使用 crossPaymentReference 和支付金额更新数据库，因为它涉及对代码的最少编辑，但确实存在轻微的安全风险，因为它发送在客户端参考。

2) 使用支付系统类创建一个库，将预处理支付和处理支付代码放入控制器并将表单复制到视图中，并且只需一个小模型来更新成功支付的数据库。（我猜这是最好的方法。）

3) 编辑所有内容并构建代码的 MVC 版本

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T13:49:51.237

我最新的项目在 CI 2.0 上运行。我已经成功集成了诸如 Card Save 之类的支付系统（在我的例子中，我使用的是比利时公司 Ogone）。

下面我详细介绍了我是如何实现订单和支付系统的。

我能给你的建议如下。

*   将您的产品、订单和付款保存在单独的表格中。通过参考表将产品链接到订单（不要在订单的字段中存储例如产品 ID 列表）
*   允许一个付款只能有一个订单，但一个订单可以有多个付款（但只能支付一个）。这样，当付款失败时（例如，用户在 Card Saves 付款页面上按下取消），您可以在您身边创建一个新的付款并让用户重试（除非 Card Save 接受您使用相同的付款 ID 进行 2 次付款请求）。
*   创建一个单独的库（不是控制器）来处理成功支付的订单。例如，该库将激活用户购买的订阅，或为某人发出工作订单以运送产品。通过将其保存在单独的库中，您可以扩展其功能（例如，如果对于特定产品，您需要做一些新的事情）而无需触及您的支付逻辑（从而防止大量重新测试）。
*   在发布数据时生成哈希，或将用户重定向到结帐页面、准备付款的页面并每次重新计算哈希以防止有人篡改您发布的数据或 URL 中的数据。
*   确保在没有 AJAX 的情况下一切正常，然后添加 AJAX。

* * *

基本上我想出的订购流程分为如下：

1.  用户将服务（我不销售实体产品）添加到购物篮（使用 CI 购物车的修改版本）
2.  完成后，用户单击“订购产品”，向控制器 Place_order 发送 POST。控制器 Place_order 执行以下操作：
    *   检查用户是否仍然登录（在我的情况下，每个人都需要先注册）
    *   获取购物车中的产品并检查它们是否真的存在于数据库中（你永远不知道）
    *   在数据库中创建一个新订单并将产品添加到数据库中的订单中
3.  Place_order 不输出任何内容，但在成功时将用户重定向到控制器 Checkout。这里我不使用 POST。这样您可以重复使用 URL（例如，如果用户决定停止，他可以稍后继续付款）。URL 包含订单 ID 和哈希。
4.  Checkout 控制器执行以下操作
    *   重新计算hash，看看是否没有人篡改URL
    *   检查订单是否存在且尚未付款
    *   检查订单是否属于登录用户
    *   如果付款尚不存在，请创建付款
    *   显示带有“取消订单”和“支付订单”按钮的视图。这实际上是一个在隐藏字段中包含支付 ID 和支付 ID 哈希的表单。
5.  单击“支付订单”时，会对控制器 Pay_order 进行 POST。我不使用 GET，因为我希望用户仅通过发布由 Checkout 控制器设置的数据来访问此页面。如果他们使用 GET 进入页面，则会引发错误。该控制器执行以下操作：
    *   重新计算哈希以查看没有人篡改发布的数据
    *   检查付款是否存在且尚未付款
    *   如果一切正常，则编写包含要发布到支付服务的必要信息的视图
    *   显示视图。
    *   当用户按下“转到支付服务”时，所有数据都会发布到用户执行支付的 Ogone
6.  当支付完成（正确与否）时，Ogone 将用户重定向回我到控制器 Payment_successfull 或 Payment_other（用于错误等）。在 Payment_succesfull 中，我调用了一个以支付 ID 作为输入的库 Purchase_activator。这个查找订单并激活用户刚刚支付的服务。在另一种情况下（出错时），用户会看到一个带有正确错误消息的视图以及重试或取消的选项。

# c - OpenMP 的 Eclipse 构建配置

> ID：12727834
> 
> 赞同：8
> 
> 时间：2012-10-04T12:58:08.760
> 
> 标签：c, eclipse, build, openmp, eclipse-cdt

我正在尝试学习 OpenMP，从以下简单片段开始

```
#include <stdio.h>
#include <stdlib.h>

int main(void) {

    #pragma omp parallel
    printf("Hello OpenMP!\n");

    return 0;
} 
```

只需从命令行编译即可：

```
cls ~/Desktop $ gcc -fopenmp HelloOpenMP.c -o HelloOpenMP
cls ~/Desktop $ ./HelloOpenMP 
Hello OpenMP!
Hello OpenMP! 
```

但是，我想将 Eclipse 与 CDT 一起使用。我创建了一个新的构建配置“OpenMP”并尝试`-fopenmp`在“杂项”下添加标志，从“调试”构建配置中复制其他设置。

![在此处输入图像描述](../Images/bd690d9c062b7588aed78c4e702d741a.png)

构建失败

```
14:56:16 **** Incremental Build of configuration OpenMP for project HelloOpenMP ****
make all 
Building file: ../src/HelloOpenMP.c
Invoking: GCC C Compiler
gcc -O0 -g3 -Wall -c -fmessage-length=0 -fopenmp -MMD -MP -MF"src/HelloOpenMP.d" -MT"src/HelloOpenMP.d" -o "src/HelloOpenMP.o" "../src/HelloOpenMP.c"
Finished building: ../src/HelloOpenMP.c

Building target: HelloOpenMP
Invoking: MacOS X C Linker
gcc  -o "HelloOpenMP"  ./src/HelloOpenMP.o   
Undefined symbols for architecture x86_64:
  "_GOMP_parallel_end", referenced from:
      _main in HelloOpenMP.o
  "_GOMP_parallel_start", referenced from:
      _main in HelloOpenMP.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status
make: *** [HelloOpenMP] Error 1 
```

所以我猜这不是添加 -fopenmp 编译器选项的正确位置吗？我应该使用什么配置来构建 OpenMP？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-04T13:43:20.470

也将标志添加`-fopenmp`到链接器部分。

# mysql - 带有更新的 mySQL 查询循环中的基本数学

> ID：12727837
> 
> 赞同：0
> 
> 时间：2012-10-04T12:58:25.430
> 
> 标签：mysql

我想弄清楚我是否可以在 mySQL (5.1) 中完全做一些数学运算，但不确定这是否可能。我不是 SQL 专家。

我有两张桌子。一种用于跟踪总体时间，一种用于单独的时间条目。我们的想法是根据表 2 中使用的内容在表 1 中保持运行总计。

表格1：

```
UserID (INT),
TotalTime (INT) 
```

表2：

```
UserID (INT),
TimeUsed (INT),
isCalculated (bool) 
```

我想做的是遍历表 2，其中 isCalculated 为假，然后从 Table1.TotalTime 中减去每个条目的 Table2.TimeUsed，其中 Table1.UserID=Table2.UserID。

计算后，我需要将 isCalculated 切换为 true。

似乎这可以在循环中完成，但我不确定 mySQL 中的正确语法。

感谢您的任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:32:23.303

```
UPDATE
    Table1
    JOIN Table2 ON Table1.UserID = Table2.UserID
SET
    Table1.TotalTime = Table1.TotalTime - Table2.TimeUsed,
    Table2.isCalculated = TRUE
WHERE
    NOT Table2.isCalculated 
```

# javascript - Google Maps API v3 活动标记 onClick

> ID：12727840
> 
> 赞同：2
> 
> 时间：2012-10-04T12:58:38.433
> 
> 标签：javascript, google-maps, google-maps-api-3

我有`addListener`一个谷歌地图上标记的点击方法（在`setMarkers`函数中）：

```
var infowindow = null;

$(document).ready(function () { initialize();  });

function initialize() {

    var centerMap = new google.maps.LatLng(39.828175, -98.5795);

    var myOptions = {
        zoom: 4,
        center: centerMap,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }

    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    setMarkers(map, sites);
    infowindow = new google.maps.InfoWindow({
            content: "loading..."
        });

    var bikeLayer = new google.maps.BicyclingLayer();
    bikeLayer.setMap(map);
}

var sites = [
    ['Mount Evans', 39.58108, -105.63535, 4, 'This is Mount Evans.'],
    ['Irving Homestead', 40.315939, -105.440630, 2, 'This is the Irving Homestead.'],
    ['Badlands National Park', 43.785890, -101.90175, 1, 'This is Badlands National Park'],
    ['Flatirons in the Spring', 39.99948, -105.28370, 3, 'These are the Flatirons in the spring.']
];

function setMarkers(map, markers) {
    var myContentDiv = document.getElementById('myDivID');//Reference to you DOM elem  

    for (var i = 0; i < markers.length; i++) {
        var sites = markers[i];
        var siteLatLng = new google.maps.LatLng(sites[1], sites[2]);
        var marker = new google.maps.Marker({
            position: siteLatLng,
            map: map,
            title: sites[0],
            zIndex: sites[3],
            html: sites[4]
        });

        var contentString = "Some content";
        //marker.xtraData = 'SomeExtraData';//You can even add more data this way

        google.maps.event.addListener(marker, "click", function () {
            //alert(this.html);
            var myTemplate = '<h1>'+this.title+'<h1><p>'+this.html+'</p>';

            myContentDiv.innerHTML = myTemplate;//Inset this html inside link
            //infowindow.setContent(this.html);
            //infowindow.open(map, this);
        });
    }
} 
```

我想要做的是将“活动”标记更改为不同的图像。我确实看到了[google.maps.MarkerImage](https://developers.google.com/maps/documentation/javascript/reference#MarkerImage)类，但是当我到目前为止的所有尝试都用 URL 替换了“a”标记（不是我选择的那个）时，但是标记在下次单击时不会转换回正常状态（或关闭信息框）。我觉得我已经很接近了，但此刻我却陷入了泥潭。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T13:18:27.313

这是我的示例（来自[Mike Williams 的 v2 教程](http://econym.org.uk/gmap/mouseover.htm)）：

[http://www.geocodezip.com/v3_MW_example_hoverchange.html](http://www.geocodezip.com/v3_MW_example_hoverchange.html)

一种方法（上一个问题中的 jsfiddle，已更新）：http: [//jsfiddle.net/geocodezip/r7fu3a1y/1/](http://jsfiddle.net/geocodezip/r7fu3a1y/1/)

工作代码片段：

```
var infowindow = null;
var gmarkers = [];

var defaultIcon = {
  url: 'http://maps.google.com/mapfiles/ms/micons/red-dot.png',
  // This marker is 32 pixels wide by 32 pixels tall.
  size: new google.maps.Size(32, 32),
  // The origin for this image is 0,0.
  origin: new google.maps.Point(0, 0),
  // The anchor for this image is the base of the flagpole at 0,32.
  anchor: new google.maps.Point(16, 32)
};

var activeIcon = {
  url: 'http://maps.google.com/mapfiles/ms/micons/yellow-dot.png',
  // This marker is 20 pixels wide by 32 pixels tall.
  size: new google.maps.Size(32, 32),
  // The origin for this image is 0,0.
  origin: new google.maps.Point(0, 0),
  // The anchor for this image is the base of the flagpole at 0,32.
  anchor: new google.maps.Point(16, 32)
};
// Shapes define the clickable region of the icon.
// The type defines an HTML &lt;area&gt; element 'poly' which
// traces out a polygon as a series of X,Y points. The final
// coordinate closes the poly by connecting to the first
// coordinate.
var shape = {
  coord: [9, 0, 6, 1, 4, 2, 2, 4, 0, 8, 0, 12, 1, 14, 2, 16, 5, 19, 7, 23, 8, 26, 9, 30, 9, 34, 11, 34, 11, 30, 12, 26, 13, 24, 14, 21, 16, 18, 18, 16, 20, 12, 20, 8, 18, 4, 16, 2, 15, 1, 13, 0],
  type: 'poly'
};

$(document).ready(function() {
  initialize();
});

function initialize() {

  var centerMap = new google.maps.LatLng(39.828175, -98.5795);

  var myOptions = {
    zoom: 4,
    center: centerMap,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }

  var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

  setMarkers(map, sites);
  infowindow = new google.maps.InfoWindow({
    content: "loading..."
  });

  var bikeLayer = new google.maps.BicyclingLayer();
  bikeLayer.setMap(map);
}

var sites = [
  ['Mount Evans', 39.58108, -105.63535, 4, 'This is Mount Evans.'],
  ['Irving Homestead', 40.315939, -105.440630, 2, 'This is the Irving Homestead.'],
  ['Badlands National Park', 43.785890, -101.90175, 1, 'This is Badlands National Park'],
  ['Flatirons in the Spring', 39.99948, -105.28370, 3, 'These are the Flatirons in the spring.']
];

function setMarkers(map, markers) {

  for (var i = 0; i < markers.length; i++) {
    var sites = markers[i];
    var siteLatLng = new google.maps.LatLng(sites[1], sites[2]);
    var marker = new google.maps.Marker({
      position: siteLatLng,
      map: map,
      title: sites[0],
      icon: defaultIcon,
      zIndex: sites[3],
      html: sites[4]
    });

    var contentString = "Some content";

    google.maps.event.addListener(marker, "click", function() {
      //alert(this.html);
      for (var i = 0; i < gmarkers.length; i++) {
        gmarkers[i].setIcon(defaultIcon);
      }
      this.setIcon(activeIcon);
      infowindow.setContent(this.html);
      infowindow.open(map, this);
    });
    gmarkers.push(marker);
  }
}
```

```
#map_canvas {
  width: 600px;
  height: 600px;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://maps.google.com/maps/api/js?key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk"></script>
<h1>Map</h1>
<div id="map_canvas"></div>
```

# android - 加载后将图库中的父布局调整为远程图像的宽度

> ID：12727841
> 
> 赞同：0
> 
> 时间：2012-10-04T12:58:40.477
> 
> 标签：android, android-layout

我有一个画廊项目，其中`RelativeLayout`包含一个`ImageView`和一个`TextView`。（见下面我的绘画杰作）

![LayoutProblem 巧妙的可视化](../Images/e860812cd66d7892999ca6c85a975a09.png)

在活动开始时，一个画廊项目占据了屏幕的所有空间，使图像在左侧看起来丢失并且文本视图（蓝色横幅）太长了。我想根据图像宽度将几个项目彼此相邻。

图像在从服务器加载后被替换，所以我不知道当我开始/布局活动时图像到底有多宽。

我现在想`RelativeLayout`在图像加载并放入视图后将其宽度调整为图像的宽度。

我已经使用`getLayoutParams()`了 Gallery 的 ListAdapter 中的方法，但这会导致 ANR 并且根本没有结果。

这是我的画廊项目的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/item_wrap"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="@dimen/item_margin"
        >

    <ImageView
            android:id="@+id/item_image"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:adjustViewBounds="true"
            />

    <TextView
            android:id="@+id/item_name"
            android:layout_width="fill_parent"
            android:layout_height="@dimen/item_title_height"
            android:layout_alignParentBottom="true"
            android:text="Some longer title so you can see how the text behaves"
            android:singleLine="true"
            android:gravity="left|center_vertical"
            android:paddingLeft="10dip"
            android:background="@drawable/title_gradient_grey"
            />

</RelativeLayout> 
```

插入图像后如何重新布局有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:09:46.353

您应该在从服务器下载后调整图像大小。这是必要的，因为您正在下载的图像可能更大，并将 ImageView 的属性设置为

`<ImageView ... android:scaleType="fitXY"`这将导致您进行扩展。

另一个选择是

`<ImageView ... android:scaleType="center"`如果你不想缩放。

# azure - 在 azure 上增加数据传出

> ID：12727844
> 
> 赞同：0
> 
> 时间：2012-10-04T12:59:11.467
> 
> 标签：azure, azure-storage

是否可以增加 Azure 上的数据传输？我目前正在使用 5 GB 的 1383.203%，红色条看起来很不祥

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:42:23.170

5GB 的“[限制](https://www.windowsazure.com/en-us/pricing/details/)”就是您免费获得的：

*我们将在 2013 年 6 月 30 日之前开展一项促销活动，每月使用的前 5 GB 数据传输是免费的。*

默认情况下，Windows Azure 使用[按需付费](https://www.windowsazure.com/en-us/pricing/purchase-options/)，您可以在出口流量中传输您喜欢的多少，您只需为超过 5 GB 免费数据（每月）的每 GB 支付固定价格。

# c# - 如何使用会话将我的 SQL 链接到我的 ASP.Net(C#) 网页？

> ID：12727846
> 
> 赞同：1
> 
> 时间：2012-10-04T12:59:18.150
> 
> 标签：c#, asp.net, sql-server

我的 asp.net 页面有一个 C# SQL 查询，它使用存储在我的页面会话中的值（称为 tournyName）查询数据库。我有查询工作，我正在使用 SqlDataReader（称为 myReader）来读取查询结果。但是，我无法将结果显示在我页面的 HTML 区域。我一直在拼凑从其他人的问题中找到的一些代码，此时的代码不完整。它看起来像这样：

C# (snppit):

```
 conn.Open();
    query = "SELECT GamePlayer1 AS [Player 1], GamePlayer2 AS [Player 2], GamePlayer1Score AS [Score1], GamePlayer2Score AS [Score2] FROM Games WHERE (TournyName = '@TournyName')";

    com = new SqlCommand(query, conn);

    com.Parameters.Add(new SqlParameter("@TournyName", SqlDbType.VarChar, 200));
    com.Parameters["@TournyName"].Value = Server.HtmlDecode(tournyName.Trim());

    SqlDataReader myReader;
    myReader = com.ExecuteReader();
    myRepeater.DataSource = myReader;
    myRepeater.DataBind(); 
```

还有我的 HTML，我想在其中显示结果：

```
<asp:Repeater id="myRepeater" runat="server">
<HeaderTemplate><table border="1"></HeaderTemplate>
<ItemTemplate>
<tr><td>
</td>
<td>
<%# Eval('Player 1')%>
</td>
<td>
 <%# Eval('Player 2')%>  
<td>
 <%# Eval('Score1')%>  
</td>
<td>
 <%# Eval('Score2')%>  
</td>
</tr>
</ItemTemplate>
<FooterTemplate></table></FooterTemplate>
</asp:Repeater> 
```

无论我尝试什么，页面都显示为空白。任何人都可以告诉我如何显示这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T13:29:28.740

有几件事：

*   由于您使用的是参数（好！），因此您不能在 SQL 查询中使用引号转义参数标记，即

> 选择 GamePlayer1 AS [Player 1]，GamePlayer2 AS [Player 2]，GamePlayer1Score AS [Score1]，GamePlayer2Score AS [Score2] 从游戏 WHERE（TournyName = @TournyName）

*   eval 需要双引号，即`<%# Eval("Player 1")%>`

另外，请记住 Dispose 您的连接、命令和 SQLReader。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-04T13:10:23.047

您需要在您的 asp 中添加一个 ObjectDataSource，例如

```
<asp:ObjectDataSource ID="getPersonsDataSource" runat="server" SelectMethod="GetData" TypeName="Players.Data" /> 
```

这是实际运行您的查询并使其可用于 Eval 方法的内容。

# java - 在这个给定的示例中是否存在同步冲突？

> ID：12727848
> 
> 赞同：0
> 
> 时间：2012-10-04T12:59:29.680
> 
> 标签：java, concurrency, synchronized

在我的代码中，我`set`在同一资源上的另一个同步块内的资源上使用了一个同步块。到目前为止，这并没有给我带来任何问题，但我很好奇：如果有的话，会有什么后果？这些同步的块会相互冲突吗？

```
Set<myClass> set = Collections.synchronizedSet(new HashSet<myClass>());

synchronized(set) {
    set.add(new myClass());
    ...
    writeSetContentsToFile();
}

public synchronized void writeSetContentsToFile() {
    synchronized(set) {
        ...
    }
} 
```

该集合被其他线程不断地访问和更改。我同步`writeSetContentsToFile()`了，所以文件资源不会有任何冲突，而且里面有一个同步块`writeSetContentsToFile()`，以确保在迭代它时不会对集合进行任何更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:01:54.593

> 到目前为止，这并没有给我带来任何问题，但我很好奇：如果有的话，会有什么后果？

在某些方面，您回答了自己的问题，它有效，但令人困惑。如果可以的话，最好简化代码。您需要查看其余代码以确定这是否可行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:20:29.833

这里有两把锁，一把开着，`this`一把开着`set`。如果两个线程以不同的顺序锁定它们，BANG。僵局。您还没有显示所有代码，所以这可能是不可能的，但是当有人更改类以添加新方法时呢？

正如 Peter Lawrey 所说，您应该尝试简化此代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T13:23:58.067

如果您的操作表示为

```
synchronized(set) {
    set.add(new myClass());
    ...
    writeSetContentsToFile();
} 
```

是原子的，将其封装在单独的类中，例如，`ThreadSafeFileStorableSet`在专用方法下，例如，`synchronized writeContentsToFile()`.

例如：

```
class ThreadSafeFileStorableSet {
    private final Set set;

    ThreadSafeFileStorableSet(Set set) {
        this.set = set;
    }

    synchronized void writeSetContentsToFile() {
        // 
    }

    synchronized void addElements(Object[] elems) {
        // 
    }

    private void doWrite() {
        // use instance set
    }
} 
```

`ThreadSafeFileStorableSet`也制作类的所有其他非私有方法`synchronized`，因此所有操作对彼此都是原子的。那么你就不需要`synchronized (set)`这个类中的片段了。

这将简化您的代码，但可能会使并发级别变得更糟。但是我没有足够的信息来建议阅读您的代码可能会变得更糟。

# yui3 - 获取 YUI 3 节点的 nodeType

> ID：12727849
> 
> 赞同：1
> 
> 时间：2012-10-04T12:59:31.740
> 
> 标签：yui3

我想知道是否有人可以告诉我检查 YUI3 节点实例的节点类型的正确方法。即`node.nodeType==3`用于文本节点等。

```
Y.one('body').nodeType; //does not work 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:34:24.577

好的，我找到了解决方案。这有点难看，但是......原始 DOM 节点的任何属性（即 nodeType、NodeValue 等）都可以通过调用 get 方法来检索：

```
var type=Y.one("body").get('nodeType'); 
alert (type);        //1 for element(3 for text etc) 
```

这对于迭代文本/元素节点非常有用。希望这对某人有帮助！

# c# - twitter 引导按钮在 chrome 上看起来很有趣，在 FF 上是灰色的

> ID：12727854
> 
> 赞同：0
> 
> 时间：2012-10-04T12:59:47.973
> 
> 标签：c#, asp.net, css, button, twitter-bootstrap

我一直在我的网站 (ASP.NET) 上使用很多引导功能，它们都运行良好。但是当我添加一个按钮时，它看起来很有趣： ![为了您的观赏乐趣，我添加了一张图片。](../Images/ce1254bc5562b051c6cef365f112d55d.png)

这是标签：

```
<asp:Button ID="btnCheck" runat="server" Text="Bla" CssClass="btn btn-success" OnClick="btnCheck_Click" /> 
```

FF 看起来也很奇怪： ![在此处输入图像描述](../Images/fb8b0e64fec839e9128e7c1b36827688.png)

我确保所有指向 bootstrap.css 和 bootstrap.js 的链接都正常。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T12:35:50.627

好吧，看来我使用了旧版本的引导程序，它已更新到 2.1.1 ，我下载了新版本，一切看起来都很好。谢谢您的帮助！

# excel - Excel公式：对范围内的所有单元格求和，但当单元格> 10时加10

> ID：12727859
> 
> 赞同：0
> 
> 时间：2012-10-04T13:00:15.827
> 
> 标签：excel, spreadsheet, worksheet-function

好的，我正在尝试对 5 个单元格求和，但是当单元格中的数字大于 10 时，添加 10

例子：

```
A1: 10
B1: 9
C1: 13
D1: 10
E1: 11 
```

答案：应该是 49，因为 10 + 9 + 10 + 10 + 10

我目前使用的公式是 =SUMIF(A1:E1, "<= 10") + COUNTIF(A1:E1, ">10")*10

我想知道是否有更简单的方法可以做到这一点。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T13:05:46.493

我认为无论如何你都有最好的方法，除非你想要一个“数组公式”

`=SUM(IF(A1:E1>10,10,A1:E1))`

确认`CTRL+SHIFT+ENTER`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:34:09.143

我认为解决此问题的最佳方法是简单地用 =IF(A1<10, A1, 10) 填充 A2 并将其向下拖动。之后，只需在该列的底部进行自动求和。

# php - php增加x天的日期/连接/管理休息日和周末

> ID：12727862
> 
> 赞同：0
> 
> 时间：2012-10-04T13:00:21.183
> 
> 标签：php, javascript, date, increment, weekend

我正在尝试做一个简单的添加，只是为了显示一些日期

我做过这样的事情：

```
 while($row = mysql_fetch_assoc($qry)): 

   echo  $req="INSERT INTO `agenda` SET
     `code_s`= '".$row['code_s']."',
     `titre` ='".$row['titre']."',
     `action` ='".$row['action']."',
     `libelle`='".$row['libelle']."',
      `date_action`='".date('Y-m-d',strtotime('+"'.$row['jour'].'" days'))."',
      `qualite`='".$da['qualite']."',
      `n_doss`='".mysql_real_escape_string($_GET['n_doss'])."',
      `code_client`='".$creance['code_client']."'<br>";
      endwhile;     }; 
```

Amm 在以下行中，没有显示任何错误：

```
 `date_action`='".date('Y-m-d',strtotime('+"'.$row['jour'].'" days'))."', 
```

我试图显示 var $row['jour'] 中包含的天数递增的日期，但实际上它只显示给我 1970-01-01，所以我不明白为什么，因为所有var 在该 var 中有一个正数。

此外，我有一个 javascript 函数：

像那样：

```
<script type="text/javascript">
    function getdate2() {
        var items = new Array();
        var itemCount = document.getElementsByClassName("datepicker hasDatepicker");

        for (var i = 0; i < itemCount.length; i++) {
            items[i] = document.getElementById("date" + (i + 1)).value;
        }

        for (var i = 0; i < itemCount.length; i++) {
            items[i] = document.getElementById("date" + (i + 1)).value;
            var itemDtParts = items[i].split("-");
            var itemDt = new Date(itemDtParts[2], itemDtParts[1] - 1, itemDtParts[0]);
        <?php $sql="SELECT * FROM `societe` WHERE `id`=1"; $result=mysql_query($sql) or die; $data=mysql_fetch_assoc($result);?><?php if($data['samedi']==0) {?>
            if (itemDt.getDay() == 6) {

                itemCount[i].value = (itemDt.getDate() < 9 ? "0" : "")+ (itemDt.getDate()+2)+ "-" + (itemDt.getMonth() < 9 ? "0" : "") + (itemDt.getMonth() + 1) + "-" + itemDt.getFullYear();

            }
            <?php } ?>
            if (itemDt.getDay() == 0) {

               itemCount[i].value = (itemDt.getDate() < 9 ? "0" : "")+ (itemDt.getDate()+1)+ "-" + (itemDt.getMonth() < 9 ? "0" : "") + (itemDt.getMonth() + 1) + "-" + itemDt.getFullYear();

            }

        }
       return items;
       }
</script> 
```

实际上，如果一天是星期天或星期六，此函数只会增加日期，它取决于此行中数据库中的参数设置：

```
<?php $sql="SELECT * FROM `societe` WHERE `id`=1"; $result=mysql_query($sql) or die; $data=mysql_fetch_assoc($result);?><?php if($data['samedi']==0) {?>
                if (itemDt.getDay() == 6) {

                    itemCount[i].value = (itemDt.getDate() < 9 ? "0" : "")+ (itemDt.getDate()+2)+ "-" + (itemDt.getMonth() < 9 ? "0" : "") + (itemDt.getMonth() + 1) + "-" + itemDt.getFullYear();

                } ?> 
```

因为有时有些公司确实在星期六工作。

我想知道在插入数据库之前如何在新日期上应用此功能？

有没有办法可以将 javascript 函数应用于 php 中的非对象项？

接受我最大的尊重。

亲切的问候。

SP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:11:04.410

试试这个问题的 php 部分：

```
`date_action` = '". date('Y-m-d', strtotime(date("Y-m-d"). "+".$row['jour']."days"))."' 
```

**编辑：**

```
 `date_action` = '". date('Y-m-d', strtotime(date("Y-m-d"). "+".$row['jour']."days"))."' 
```

# rabbitmq - 如何在 rabbitMQ 中重新排队消息以模拟 sleep()？正确的路

> ID：12727863
> 
> 赞同：4
> 
> 时间：2012-10-04T13:00:20.240
> 
> 标签：rabbitmq

我正在从队列中获取消息，对其进行处理，并且对于某些消息，我知道在尝试处理它之前我必须等待几秒钟。

选项是：

*   我可以调用 sleep() 并等待，但有时可能会有数百条消息，并且不能选择大量的工人。

*   我可以简单地重新排队消息，但这是个好主意吗？我将一次又一次地处理它，结果相同。（处理包括数据库排队等）

*   我可以给自己发送一条新消息，包括时间戳，以了解是否该处理消息了。所以在到达时我只是要检查时间戳，如果它是好的procceed到通常的处理。

显然，第三种方式更好，但我应该将此消息发送到相同的交换/队列，还是创建不同的交换“processing_pass2”是个好主意？或者可能有一些内置功能@rabbitMQ 来执行这样的任务？重新排队消息在给定的秒数后再次出现？

# jsf-2 - Primefaces 时间表未显示在应用程序中

> ID：12727866
> 
> 赞同：1
> 
> 时间：2012-10-04T13:00:34.070
> 
> 标签：jsf-2, primefaces, schedule

我遇到了 Primefaces 的问题`<p:schedule>`。

它没有显示在我使用`<ui:include>`和`<ui:composition>`标签的应用程序中。但是，如果我将计划放在没有这些标签组合的独立页面中，它会按预期工作。

我的`app.xhtml`页面包括由`<p:Layout>`组件定义的布局。我在左侧定义了一个带有`<f:ajax>`标签的菜单，以便每次单击菜单时都会更新 contentPanel。

其中包含的页面之一是`hldyplanning.xhtml`- 在此页面中`<p:schedule>`应该显示。为了测试，我创建了一个新站点。`test.xhtml`。_ 我决定实施 Primefaces ShowCase Example 来测试它。

我希望我做错了什么，而不是错误或类似的东西。

这是`app.xhtml`：

```
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

    <f:view contentType="text/html">
        <h:head>
            <f:facet name="first">
                <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
                <meta http-equiv="refresh" content="#{session.maxInactiveInterval};url=/LEAN" />
                <title>Lean - Menü</title> 
            </f:facet>
        </h:head>

        <h:body style="background: white;">

            <p:layout fullPage="true">

                <p:layoutUnit position="west" size="175" header="Menü" collapsible="true" style="background: wheat;">
                    <h:form id="frm_menu">
                        <f:ajax render=":contentPanel" execute="@this">
                            <p:menu model="#{appController.menu}" style="font-size: 12px; width: 96%" />                                
                        </f:ajax>
                    </h:form>
                </p:layoutUnit>

                <p:layoutUnit position="center" style="background: wheat;">
                    <h:panelGroup id="contentPanel">
                        <ui:include src="#{appController.content}.xhtml" />
                    </h:panelGroup>
                </p:layoutUnit>

            </p:layout>

            <p:growl autoUpdate="true" showDetail="true"/>

        </h:body>

    </f:view>
</html> 
```

这`appController.java`

```
package lean.controller.view;

import java.util.Map;
import javax.annotation.PostConstruct;
import javax.el.ExpressionFactory;
import javax.el.MethodExpression;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;
import javax.faces.context.FacesContext;
import javax.servlet.http.HttpServletResponse;
import org.primefaces.model.DefaultMenuModel;
import org.primefaces.model.MenuModel;
import org.primefaces.component.menuitem.MenuItem;  
import org.primefaces.component.submenu.Submenu;  

@ManagedBean
@RequestScoped
public class AppController {

    private String content = "/app/includes/dashboard";

    private MenuModel menu;
    private Submenu submenu;
    private MenuItem item;

    final private String[] submenu_urlb = { "Urlaubsübersicht", "/app/includes/urlaubsubersicht", 
                                            "Urlaubsplanung", "/app/includes/hldyplanning", 
                                            "Abteilungsübersicht", "/app/includes/abt_ubersicht", 
                                            "Persönliche Übersicht", "/app/includes/per_uberischt",
                                            "Urlaubsanträge", "/app/includes/urlaubsantrage"};

    FacesContext fc;
    ExpressionFactory exfactory;
    HttpServletResponse response;
    Map cookieMap;
    MethodExpression me;

    //<editor-fold defaultstate="collapsed" desc="GETTER UND SETTER">

    public MenuModel getMenu(){
        return menu;
    }

    public MethodExpression getMe() {
        return me;
    }

    public void setMe(MethodExpression me) {
        this.me = me;
    }

    public ExpressionFactory getExfactory() {
        return exfactory;
    }

    public void setExfactory(ExpressionFactory exfactory) {
        this.exfactory = exfactory;
    }

    public String getContent() {
        return content;
    }

    public void setContent(String content) {
        this.content = content;
    }

    public FacesContext getFc() {
        return fc;
    }

    public void setFc(FacesContext fc) {
        this.fc = fc;
    }

    public HttpServletResponse getResponse() {
        return response;
    }

    public void setResponse(HttpServletResponse response) {
        this.response = response;
    }

    public Map getCookieMap() {
        return cookieMap;
    }

    public void setCookieMap(Map cookieMap) {
        this.cookieMap = cookieMap;
    }

    //</editor-fold>

    /**
     *
     */
    @PostConstruct
    public void init() {

        setFc(FacesContext.getCurrentInstance());
        setResponse((HttpServletResponse) FacesContext.getCurrentInstance().getExternalContext().getResponse());
        setCookieMap(FacesContext.getCurrentInstance().getExternalContext().getRequestCookieMap());
        setExfactory(FacesContext.getCurrentInstance().getApplication().getExpressionFactory());

        menu = new DefaultMenuModel();

        //erstes Submenu erzeugen

        submenu = new Submenu();
        submenu.setLabel("Urlaubsplanung");

        for(int i = 0; i <= (submenu_urlb.length-1); i=i+2){
            item = new MenuItem();  
            item.setValue(submenu_urlb[i]);
            setMe(getExfactory().createMethodExpression( fc.getELContext(), "#{appController.doNav(\""+submenu_urlb[i+1]+"\")}", void.class, new Class[0]));
            item.setActionExpression(me);
            item.setUpdate(":contentPanel");
            submenu.getChildren().add(item);
        }

        menu.addSubmenu(submenu);

        //zweites Submenu erzeugen
        submenu = new Submenu();
        submenu.setLabel("Account");

        item = new MenuItem();  
        item.setValue("Dashboard");
        setMe(getExfactory().createMethodExpression( fc.getELContext(), "#{appController.doNav(\"/app/includes/dashboard\")}", void.class, new Class[0]));
        item.setActionExpression(me);
        item.setUpdate(":contentPanel");
        submenu.getChildren().add(item);

        item = new MenuItem();  
        item.setValue("Ausloggen");
        setMe(getExfactory().createMethodExpression( fc.getELContext(), "#{appController.menuitem_logout()}", void.class, new Class[0]));
        item.setActionExpression(me);
        item.setUpdate(":contentPanel");
        submenu.getChildren().add(item);

        menu.addSubmenu(submenu);

    }

    public String menuitem_logout(){

        FacesContext.getCurrentInstance().getExternalContext().invalidateSession();
        return "backToStart";

    }

    public void doNav(String nav){

        setContent(nav);

    }
} 
```

这`hldyplanning.xhtml`

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">

    <h:form id="frm_urlbubersicht">

        <p:panelGrid style="width: 100%;">
            <f:facet name="header">
                <p:row>
                    <p:column colspan="2" style="height:50px;">
                        Urlaubsplanung
                    </p:column>
                </p:row>
            </f:facet>
            <p:row>
                <p:column style="width: 420px;" colspan="1">
                    <p:panel style="font-size: 12px; width: 420px; position: relative; border: 1px solid gray">

                        <f:facet name="header">
                            Urlaubsantrag Formular
                        </f:facet>

                    <p:panelGrid id="pnl_userinfo" style="font-size: 12px; width: 400px; border: 1px solid gray">

                        <f:facet name="header">  
                            <p:row>
                                <p:column colspan="2">Persönliche Informationen</p:column>
                            </p:row>
                        </f:facet>
                        <p:row>
                            <p:column style="width:120px">
                                <h:outputText value="Name:"/>
                            </p:column>
                            <p:column>
                                <h:outputText value="#{loginController.sessionData.user_name}" />
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column style="width:120px">
                                <h:outputText value="Team:" />
                            </p:column>
                            <p:column>
                                <h:outputText value="#{loginController.sessionData.teams_name}" />
                            </p:column>
                        </p:row>
                    </p:panelGrid>
                    <br/>
                    <p:panelGrid id="pnl_time" style="font-size: 12px; width: 400px; border: 1px solid gray">
                        <f:facet name="header">  
                            <p:row>
                                <p:column colspan="2">Zeitraum</p:column>
                            </p:row>
                        </f:facet>
                        <p:row>
                            <p:column style="width:120px">
                                <p:outputLabel for="cld_startdate" value="Startdatum:" />
                            </p:column>
                            <p:column>
                                <p:calendar value="#{hldyPlanningController.startdate}" id="cld_startdate" showOn="button" pattern="dd.MM.yyyy" required="true" requiredMessage=""/>
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column style="width:120px">
                                <p:outputLabel for="cld_enddate" value="Enddatum:" />
                            </p:column>
                            <p:column>
                                <p:calendar value="#{hldyPlanningController.enddate}" id="cld_enddate" showOn="button" pattern="dd.MM.yyyy" required="true" requiredMessage=""/>
                            </p:column>             
                        </p:row>
                    </p:panelGrid>
                    <br/>
                    <p:panelGrid id="pnl_misc" style="font-size: 12px; width: 400px; border: 1px solid gray">
                        <f:facet name="header">  
                            <p:row>
                                <p:column colspan="2">Weiteres</p:column>
                            </p:row>
                        </f:facet>
                        <p:row>
                            <p:column style="width:120px">
                                <p:outputLabel for="opt_hType" value="Typ:"/>
                            </p:column>
                            <p:column>
                                <p:selectOneButton value="#{hldyPlanningController.type}" id="opt_hType">  
                                    <f:selectItem itemLabel="Urlaub" itemValue="U" />  
                                    <f:selectItem itemLabel="Absetzen" itemValue="A" />  
                                </p:selectOneButton> 
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column style="width:120px">
                                <p:outputLabel for="txta_note" value="Bemerkung:"/>
                            </p:column>
                            <p:column>
                                <p:inputTextarea maxlength="45" rows="2" cols="30" value="#{hldyPlanningController.note}" id="txta_note"/>  
                            </p:column>
                        </p:row>
                    </p:panelGrid>                    
                    <br/>
                    <p:panelGrid id="pnl_actions" style="font-size: 12px; width: 400px; border: 1px solid gray">
                        <f:facet name="header">  
                            <p:row>
                                <p:column colspan="2">Aktion</p:column>
                            </p:row>
                        </f:facet>
                        <p:row>
                            <p:column>
                                <h:commandButton id="btn_plan" value="Planen" action="#{hldyPlanningController.sendAFL()}" style="width: 170px; height: 30px"/>
                            </p:column>
                            <p:column>
                                <h:commandButton id="btn_submit" value="Beantragen" action="#{hldyPlanningController.sendAFL()}" style="width: 170px; height: 30px" />
                            </p:column>
                        </p:row>
                    </p:panelGrid>
                    </p:panel>                    
                </p:column>
                <p:column colspan="1" style="vertical-align: top;">
                    <p:panel style="font-size: 12px; border: 1px solid gray;">
                        <f:facet name="header">
                            Mitarbeiter, die in diesem Zeitraum auch Urlaub geplant haben
                        </f:facet>

                    </p:panel>

                </p:column>
            </p:row>     
        </p:panelGrid>

        <p:schedule value="#{calendarController.eventModel}" widgetVar="myschedule">  

        </p:schedule>  

        <p:dialog widgetVar="eventDialog" header="Event Details" showEffect="clip" hideEffect="clip">  
            <h:panelGrid id="eventDetails" columns="2">  
                <h:outputLabel for="title" value="Title:" />  
                <p:inputText id="title" value="#{calendarController.event.title}" required="true"/>  
                <h:outputLabel for="from" value="From:" />  
                <p:inputMask id="from" value="#{calendarController.event.startDate}" mask="99/99/9999">  
                    <f:convertDateTime pattern="dd/MM/yyyy" />  
                </p:inputMask>  
                <h:outputLabel for="to" value="To:" />  
                <p:inputMask id="to" value="#{calendarController.event.endDate}" mask="99/99/9999">  
                    <f:convertDateTime pattern="dd/MM/yyyy" />  
                </p:inputMask>  
                <h:outputLabel for="allDay" value="All Day:" />  
                <h:selectBooleanCheckbox id="allDay" value="#{calendarController.event.allDay}" />  
                <p:commandButton type="reset" value="Reset" />  
                <p:commandButton value="Save" actionListener="#{calendarController.addEvent}" oncomplete="myschedule.update();eventDialog.hide();"/>  
            </h:panelGrid>  
        </p:dialog>

    </h:form>

</ui:composition> 
```

这`test.xhtml`

```
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <f:view contentType="text/html">
        <h:head>
            <f:facet name="first">
                <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
                <title>TEST</title> 
            </f:facet>
        </h:head>
        <h:body>
            <h:form>  

                <p:growl id="messages" showDetail="true" />  

                <p:schedule value="#{calendarController.eventModel}" widgetVar="myschedule">  

                    <p:ajax event="dateSelect" listener="#{calendarController.onDateSelect}" update="eventDetails" oncomplete="eventDialog.show()" />  
                    <p:ajax event="eventSelect" listener="#{calendarController.onEventSelect}" update="eventDetails" oncomplete="eventDialog.show()" />  
                    <p:ajax event="eventMove" listener="#{calendarController.onEventMove}" update="messages" />  
                    <p:ajax event="eventResize" listener="#{calendarController.onEventResize}" update="messages" />  

                </p:schedule>  

                <p:dialog widgetVar="eventDialog" header="Event Details" showEffect="clip" hideEffect="clip">  
                    <h:panelGrid id="eventDetails" columns="2">  
                        <h:outputLabel for="title" value="Title:" />  
                        <p:inputText id="title" value="#{calendarController.event.title}" required="true"/>  
                        <h:outputLabel for="from" value="From:" />  
                        <p:inputMask id="from" value="#{calendarController.event.startDate}" mask="99/99/9999">  
                            <f:convertDateTime pattern="dd/MM/yyyy" />  
                        </p:inputMask>  
                        <h:outputLabel for="to" value="To:" />  
                        <p:inputMask id="to" value="#{calendarController.event.endDate}" mask="99/99/9999">  
                            <f:convertDateTime pattern="dd/MM/yyyy" />  
                        </p:inputMask>  
                        <h:outputLabel for="allDay" value="All Day:" />  
                        <h:selectBooleanCheckbox id="allDay" value="#{calendarController.event.allDay}" />  
                        <p:commandButton type="reset" value="Reset" />  
                        <p:commandButton value="Save" actionListener="#{calendarController.addEvent}" oncomplete="myschedule.update();eventDialog.hide();"/>  
                    </h:panelGrid>  
                </p:dialog>  
            </h:form> 
        </h:body>
    </f:view>
</html> 
```

这`calendarController.java`

```
package lean.controller.view;

import java.io.Serializable;
import java.util.Calendar;
import java.util.Date;
import java.util.List;
import javax.annotation.PostConstruct;

import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import javax.faces.context.FacesContext;
import javax.faces.event.ActionEvent;
import lean.dataobjects.HolidayDataObj;

import org.primefaces.event.DateSelectEvent;
import org.primefaces.event.ScheduleEntryMoveEvent;
import org.primefaces.event.ScheduleEntryResizeEvent;
import org.primefaces.event.ScheduleEntrySelectEvent;
import org.primefaces.model.DefaultScheduleEvent;
import org.primefaces.model.DefaultScheduleModel;
import org.primefaces.model.LazyScheduleModel;
import org.primefaces.model.ScheduleEvent;
import org.primefaces.model.ScheduleModel;

@ManagedBean(name = "calendarController")
@SessionScoped
public class CalendarController implements Serializable {

        private ScheduleModel eventModel;
        private List<HolidayDataObj> holidayData;

        private ScheduleModel lazyEventModel;

        private ScheduleEvent event = new DefaultScheduleEvent();

        @PostConstruct
        public void init() {
                eventModel = new DefaultScheduleModel();
                eventModel.addEvent(new DefaultScheduleEvent("Champions League Match", previousDay8Pm(), previousDay11Pm()));
                eventModel.addEvent(new DefaultScheduleEvent("Birthday Party", today1Pm(), today6Pm()));
                eventModel.addEvent(new DefaultScheduleEvent("Breakfast at Tiffanys", nextDay9Am(), nextDay11Am()));
                eventModel.addEvent(new DefaultScheduleEvent("Plant the new garden stuff", theDayAfter3Pm(), fourDaysLater3pm()));

                try {
                    holidayData = lean.sql.QueryMySQL.getHolidaysForAll();

                for(int i=0; i<=holidayData.size()-1; i++ ) {
                    eventModel.addEvent( new DefaultScheduleEvent(holidayData.get(i).getUser_name(),holidayData.get(i).getHldy_startdate(),holidayData.get(i).getHldy_enddate()));
                }                    

                }catch(Exception e){
                    FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, "HolidayCollector ", e.getMessage()));
                }

                lazyEventModel = new LazyScheduleModel() {

                        @Override
                        public void loadEvents(Date start, Date end) {
                                clear();

                                Date random = getRandomDate(start);
                                addEvent(new DefaultScheduleEvent("Lazy Event 1", random, random));

                                random = getRandomDate(start);
                                addEvent(new DefaultScheduleEvent("Lazy Event 2", random, random));
                        }       
                };
        }

        public Date getRandomDate(Date base) {
                Calendar date = Calendar.getInstance();
                date.setTime(base);
                date.add(Calendar.DATE, ((int) (Math.random()*30)) + 1);        //set random day of month

                return date.getTime();
        }

        public Date getInitialDate() {
                Calendar calendar = Calendar.getInstance();
                calendar.set(calendar.get(Calendar.YEAR), Calendar.FEBRUARY, calendar.get(Calendar.DATE), 0, 0, 0);

                return calendar.getTime();
        }

        public ScheduleModel getEventModel() {
                return eventModel;
        }

        public ScheduleModel getLazyEventModel() {
                return lazyEventModel;
        }

        private Calendar today() {
                Calendar calendar = Calendar.getInstance();
                calendar.set(calendar.get(Calendar.YEAR), calendar.get(Calendar.MONTH), calendar.get(Calendar.DATE), 0, 0, 0);

                return calendar;
        }

        private Date previousDay8Pm() {
                Calendar t = (Calendar) today().clone();
                t.set(Calendar.AM_PM, Calendar.PM);
                t.set(Calendar.DATE, t.get(Calendar.DATE) - 1);
                t.set(Calendar.HOUR, 8);

                return t.getTime();
        }

        private Date previousDay11Pm() {
                Calendar t = (Calendar) today().clone();
                t.set(Calendar.AM_PM, Calendar.PM);
                t.set(Calendar.DATE, t.get(Calendar.DATE) - 1);
                t.set(Calendar.HOUR, 11);

                return t.getTime();
        }

        private Date today1Pm() {
                Calendar t = (Calendar) today().clone();
                t.set(Calendar.AM_PM, Calendar.PM);
                t.set(Calendar.HOUR, 1);

                return t.getTime();
        }

        private Date theDayAfter3Pm() {
                Calendar t = (Calendar) today().clone();
                t.set(Calendar.DATE, t.get(Calendar.DATE) + 2);         
                t.set(Calendar.AM_PM, Calendar.PM);
                t.set(Calendar.HOUR, 3);

                return t.getTime();
        }

        private Date today6Pm() {
                Calendar t = (Calendar) today().clone();
                t.set(Calendar.AM_PM, Calendar.PM);
                t.set(Calendar.HOUR, 6);

                return t.getTime();
        }

        private Date nextDay9Am() {
                Calendar t = (Calendar) today().clone();
                t.set(Calendar.AM_PM, Calendar.AM);
                t.set(Calendar.DATE, t.get(Calendar.DATE) + 1);
                t.set(Calendar.HOUR, 9);

                return t.getTime();
        }

        private Date nextDay11Am() {
                Calendar t = (Calendar) today().clone();
                t.set(Calendar.AM_PM, Calendar.AM);
                t.set(Calendar.DATE, t.get(Calendar.DATE) + 1);
                t.set(Calendar.HOUR, 11);

                return t.getTime();
        }

        private Date fourDaysLater3pm() {
                Calendar t = (Calendar) today().clone();
                t.set(Calendar.AM_PM, Calendar.PM);
                t.set(Calendar.DATE, t.get(Calendar.DATE) + 4);
                t.set(Calendar.HOUR, 3);

                return t.getTime();
        }

        public ScheduleEvent getEvent() {
            System.out.println("Getting event: " + event.getId() + " " + event.getTitle());
                return event;
        }

        public void setEvent(ScheduleEvent event) {
            System.out.println("Setting event");
                this.event = event;
        }

        public void addEvent(ActionEvent actionEvent) {
            System.out.println("Adding event");
                if(event.getId() == null){
                        eventModel.addEvent(event);}
                else{
                        eventModel.updateEvent(event);
                }
                event = new DefaultScheduleEvent();
                System.out.println("");
        }

        public void onEventSelect(ScheduleEntrySelectEvent selectEvent) {
            System.out.println("Selected event");
                event = selectEvent.getScheduleEvent();
        }

        public void onDateSelect(DateSelectEvent selectEvent) {
            System.out.println("Selected date");
                event = new DefaultScheduleEvent("", selectEvent.getDate(), selectEvent.getDate());
        }

        public void onEventMove(ScheduleEntryMoveEvent event) {
            System.out.println("Moved event");
                FacesMessage message = new FacesMessage(FacesMessage.SEVERITY_INFO, "Event moved", "Day delta:" + event.getDayDelta() + ", Minute delta:" + event.getMinuteDelta());

                addMessage(message);
        }

        public void onEventResize(ScheduleEntryResizeEvent event) {
            System.out.println("Resized event");
                FacesMessage message = new FacesMessage(FacesMessage.SEVERITY_INFO, "Event resized", "Day delta:" + event.getDayDelta() + ", Minute delta:" + event.getMinuteDelta());

                addMessage(message);
        }

        private void addMessage(FacesMessage message) {
                FacesContext.getCurrentInstance().addMessage(null, message);
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T06:05:18.923

几个月前，我也学到了同样的方法，在存在 p:schedule 的页面上使用 ajax="false"，但如果绝对必要，您的页面“不需要”禁用 AJAX (ajax="false")。

我在下面的页面呈现了一个其中 ajax="false" 的菜单，而且它具有 p:calendar 和 p:commandButton 来更新 p:schedule 的月份视图。

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pe="http://primefaces.org/ui/extensions"
      xmlns:o="http://omnifaces.org/ui"
      xmlns:of="http://omnifaces.org/functions">

    <ui:composition>

        <pe:layoutPane position="north">
            <ui:include src="/orders/pf_BrowseLayoutPaneHeaderFacet.xhtml"/>

            <h:form id="ordersScheduleForm_north" >

                <ui:include src="/orders/pf_BrowseMenu.xhtml"/>

                <h:panelGrid columns="2" width="100%">
                    <h:panelGroup layout="block" style="text-align: left !important;" >
                        <h:panelGrid columns="3" cellspacing="5">
                            <h:outputText value="Select Date:" />
                            <p:calendar value="#{pf_ordersController.filterTripDateFrom}"
                                        mode="popup" showOn="button"
                                        navigator="true" effect="fadeIn" pattern="MM/dd/yyyy" size="12">
                                <p:ajax partialSubmit="false" event="dateSelect"
                                        listener="#{pf_ordersController.filterTripDateFromSelected}"
                                        update=":ordersScheduleForm_north :ordersScheduleForm_center"
                                        oncomplete="ordersSchedule.update();"/>
                            </p:calendar>
                        </h:panelGrid>
                    </h:panelGroup>

                    <h:panelGroup layout="block">
                        <h:panelGrid columns="2" width="100%">
                            <h:panelGroup style="text-align: left !important; font-size: larger !important;">
                                <h:outputText value="#{pf_ordersController.filterTripDateFrom}">
                                    <f:convertDateTime pattern="MMMM yyyy" />
                                </h:outputText>
                            </h:panelGroup>

                            <h:panelGroup layout="block" style="text-align: right !important;" >
                                <p:commandButton value="Previous" icon="ui-icon-arrowthick-1-w"
                                                actionListener="#{pf_ordersController.previousScheduleMonth()}"
                                                update=":ordersScheduleForm_north :ordersScheduleForm_center"
                                                oncomplete="ordersSchedule.update();"/>
                                <p:commandButton value="Next" icon="ui-icon-arrowthick-1-e"
                                                actionListener="#{pf_ordersController.nextScheduleMonth()}"
                                                update=":ordersScheduleForm_north :ordersScheduleForm_center"
                                                oncomplete="ordersSchedule.update();"/>
                            </h:panelGroup>
                        </h:panelGrid>

                    </h:panelGroup>

                </h:panelGrid>

            </h:form>

        </pe:layoutPane>

        <pe:layoutPane position="center">

            <h:form id="ordersScheduleForm_center" >

                <p:messages id="formMessages" showDetail="true" showSummary="false" globalOnly="false" />

                <p:schedule draggable="false" widgetVar="ordersSchedule"
                            aspectRatio="0.30" showHeader="false" view="month"
                            initialDate="#{pf_ordersController.filterTripDateFrom}"
                            value="#{pf_ordersController.lazyEventModel}">
                    <p:ajax partialSubmit="false" event="eventSelect"
                            listener="#{pf_ordersController.onEventSelect}"
                            update=":pageContentPanel"/>
                </p:schedule>

            </h:form>

        </pe:layoutPane>

    </ui:composition>

</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T06:44:31.843

问题解决了：

在您的应用程序中搜索使用 Ajax 的菜单项或组件。如果您不需要它，请禁用 Ajax`ajax="false"`并显示您`<p:schedule>`的。

[资源](http://forum.primefaces.org/viewtopic.php?p=78926#p78926)

# java - Lucene：如何存储文件内容？

> ID：12727868
> 
> 赞同：0
> 
> 时间：2012-10-04T13:00:44.610
> 
> 标签：java, lucene

我正在尝试索引和存储文件内容（纯文本），但似乎使用这种方式是不可能的：

```
protected Document getDocument(File f) throws Exception {
  Document doc = new Document();
  Field contents = new Field("contents", new FileReader(f));
  Field filename = new Field("filename", f.getName(), Field.Store.YES, Field.Index.ANALYZED);
  doc.add(contents);
  return doc;
} 
```

如何存储纯文本文件的内容（没有任何标签）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:51:03.523

只需读取文件内容并使用另一个 Field 构造函数，例如

```
protected Document getDocument(File f) throws Exception {
  Document doc = new Document();
  Field contents = new Field("contents", new Scanner(f).useDelimiter("\\A").next(), Store.YES, Index.NO);  // you should actually close the scanner
  Field filename = new Field("filename", f.getName(), Store.YES, Index.ANALYZED);
  doc.add(contents);
  doc.add(filename);
  return doc;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:22:08.310

看看 Apache Tika (http://tika.apache.org/)。他们有一个很好的库，可以从 HTML 和其他结构化文档中提取文本。这将有助于从 HTML 中提取文本。

至于存储在 lucene 索引中，根据您的需要，您可以在存储之前去掉标签。或者，您可以使用它创建一个分析器，以便在索引时标记标签。

# linux - 用于显示 shell 脚本注释的简单命令

> ID：12727870
> 
> 赞同：0
> 
> 时间：2012-10-04T13:00:52.330
> 
> 标签：linux, shell, comments, command

假设您有以下脚本：

```
# My comment line 1
# My comment line 2
# My comment line 3

echo "My script"
cd $MY_PATH
./anotherScript.ksh 
```

有什么命令可以显示：

```
# My comment line 1
# My comment line 2
# My comment line 3 
```

或者，我可以编写一个脚本来检测第一块评论。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T13:02:22.700

试试这个：

```
grep '^\#.*$' myscript.sh 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:02:51.780

您`cat script.sh | grep ^\#`只能显示这些行。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-04T13:03:42.620

这会将您的文件输出到 grep 命令，该命令将使用“#”打印每一行

`echo "My script" | grep "#"`

**编辑我很笨**

你需要做的就是`grep '#' file`如果我这次理解正确。

# python - 具有各种独特情况的 Python 中的字符串解析

> ID：12727873
> 
> 赞同：2
> 
> 时间：2012-10-04T13:01:17.457
> 
> 标签：python, string, parsing

我的目标是将字符串转换为字典。这是它的样子：

```
[exploit] => 1
[hits] => 1
[completed] => 1
[is_malware] => 1
[summary] => 26.0@13965: suspicious.warning: object contains JavaScript
76.0@14467: suspicious.obfuscation using eval
76.0@14467: suspicious.obfuscation using String.fromCharCode

[severity] => 4
[engine] => 60 
```

所以我尝试了几种方法来做到这一点，第一次尝试是`split`at `\n`，但我遇到了 [summary] 的问题，内容被拆分，因此不起作用。然后我的第二次尝试是`split`在`=>`但是我遇到了一个问题，即一旦我在 => 处拆分它就不会知道它必须`\n`在下一个键处拆分。本质上它最终应该看起来像这样 {exploit:1, hits:1, completed:1....} 依此类推

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T13:06:25.697

您可以使用`re.findall`来解析文本：

```
>>> import re
>>> re.findall('\[([^]]+)\] => (.*?)(?=\n\[|$)', s, re.S)
[('exploit', '1'), ('hits', '1'), ('completed', '1'), ('is_malware', '1'), ('summary', '26.0@13965: suspicious.warning: object contains JavaScript\n76.0@14467: suspicious.obfuscation using eval\n76.0@14467: suspicious.obfuscation using String.fromCharCode\n'), ('severity', '4'), ('engine', '60')] 
```

您可以通过调用将这些值放入字典中`dict`。

```
>>> dict(re.findall('\[([^]]+)\] => (.*?)(?=\n\[|$)', s, re.S))
{'engine': '60', 'hits': '1', 'severity': '4', 'is_malware': '1', 'summary': '26.0@13965: suspicious.warning: object contains JavaScript\n76.0@14467: suspicious.obfuscation using eval\n76.0@14467: suspicious.obfuscation using String.fromCharCode\n', 'exploit': '1', 'completed': '1'} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:54:01.037

```
total_string = """\
[exploit] => 1
[hits] => 1
[completed] => 1
[is_malware] => 1
[summary] => 26.0@13965: suspicious.warning: object contains JavaScript
76.0@14467: suspicious.obfuscation using eval
76.0@14467: suspicious.obfuscation using String.fromCharCode

[severity] => 4
[engine] => 60
"""

import re

pattern_RE = '\[([^]]+)\] => (.*?)(?=\n\[|$)'
report_dict = dict(re.findall(pattern_RE, total_string, re.S))

for k, v in report_dict.items():
    print('[{}]: {}'.format(k, v))

print(report_dict) 
```

现在您向我们展示的是这个，但可能隐藏了换行符和回车符。对于我们所看到的，正则表达式似乎没问题。

```
{   'engine': '60', 
    'hits': '1', 
    'severity': '4', 
    'is_malware': '1', 
    'summary': '(all three captured)',
    'exploit': '1', 
    'completed': '1'
} 
```

因此，如果正则表达式没有捕捉到这一点，那么 total_string 的 repr() 必须与您粘贴的内容略有不同（可能是尾随换行符或其他内容）

# visual-studio-2010 - 在 VS2010 中运行的单元测试中的“Out\Foldername\”中找不到路径

> ID：12727877
> 
> 赞同：1
> 
> 时间：2012-10-04T13:01:27.943
> 
> 标签：visual-studio-2010, unit-testing

我正在使用 VS2010 进行开发和单元测试。我的一个模块从特定文件夹中读取一些 dll（比如“.\Plugin”）。当我运行单元测试时，它会说找不到路径的一部分“\TestResult\Out\Plugin”。这是因为我在 out 目录中没有“插件”。

如何在每次测试运行时在 Out 目录中创建“插件”文件夹。

# javascript - 如何在 ruby on rails 中隐藏 javascript 中的字段？

> ID：12727879
> 
> 赞同：0
> 
> 时间：2012-10-04T13:01:31.177
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3

```
var generic_lookup_Enr_Rds_Section2009_selected = function(id, to_s) {
  $(".cross-reference-section-value-id").text(id);
  $(".cross-reference-section-value").text(to_s);
  $(".cross-reference-section-value").css('display', 'inline');
  $("#modal_popup").dialog("destroy");
  $(".cross-reference-clear-img").removeData([id, to_s]);
}; 
```

通过这个 javascript，我将 id 和字符串存储到我的 html 页面的标签字段中。现在，我通过 css 属性隐藏 id。我只是为了显示字符串。我在字符串旁边添加了一个清晰符号的图像。当我单击该图像时，它应该清除 id 和 string 字段并隐藏图像图标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:10:16.857

此外，还有一个小优化：您可以连接 jQuery 函数以提高速度

```
$("#cross-reference-section-value")
  .data('id', id);
  .text(to_s);
  .css('display', 'inline'); 
```

更进一步，将 $("#cross-reference-section-value") 保存在变量中：

```
var my_div = $("#cross-reference-section-value")
my_div
  .data('id', id);
  .text(to_s);
  .css('display', 'inline'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:03:46.177

不隐藏它会容易得多`id`，只是将它存储在另一个地方。例如：

```
var generic_lookup_Enr_Rds_Section2009_selected = function(id, to_s) {
    $("#cross-reference-section-value").data('id', id);
                                       .text(to_s);
                                       .css('display', 'inline');
    $("#modal_popup").dialog("destroy");
}; 
```

要访问此属性，只需使用相同的[.data](http://api.jquery.com/data/)方法：

```
var id = $("#cross-reference-section-value").data('id'); 
```

# c - C: 头文件中的'extern'有什么用？

> ID：12727881
> 
> 赞同：20
> 
> 时间：2012-10-04T13:01:44.303
> 
> 标签：c, extern

如果这听起来是一个已经被问过很多次的问题，请原谅我，但我向你保证这有点不同。

我使用 Codeblocks 进行 C 编程，最近我开始想知道为什么有人会在 C 中使用头文件。我知道它用于声明和/或定义变量结构。但这是我尝试过的东西，现在我很困惑。

我有一个名为的头文件

**测试1.h**

```
#ifndef TEST1_H_INCLUDED
#define TEST1_H_INCLUDED

static int testvar = 233;
extern int one;
extern void show();

#endif // TEST1_H_INCLUDED 
```

和另外两个文件

**头文件测试.c**

```
#include"test1.h"
#include<stdio.h>

int one = 232;

int main()
{
    testvar = 12;
    printf("The address of one is %p and value is %d",&testvar,testvar);
    printf("value of one is %d",one);
    show();
    return 0;
} 
```

**headertest2.c**

```
#include "test1.h"
#include<stdio.h>

extern int one;
extern void show()
{
    //extern int one;
    testvar = 34;
    printf("\nThe address of one is %p and value is %d",&testvar, testvar);
    printf("The value of one is %d", one);
} 
```

现在我的观点是，即使我将声明 extern int one 注释掉；外部无效显示（）；从头文件 test1.h 我在编译和执行期间没有收到任何警告或错误。当我可以从 headertest.c 直接访问 int one 和 void show() 因为它们隐式地具有外部链接时，那么这里的 Header 文件有什么用？为什么有人会在可以直接访问的头文件中将某些变量或函数声明为 extern！

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-04T13:09:31.850

使用头文件，这样您就不会重复自己。在您的示例中，您无需编写

```
extern int one; 
```

in `headertest2.c`，因为它已经通过头文件包含在该文件中。

不重复自己不是一件小事。想象一下，您有一百个文件使用这个全局变量 ( `one`)。你想把它们都写`extern int one`进去*吗*？如果有 20 个这样的变量和 50 个以上的函数呢？如果你想改成`int`怎么`uint32_t`办？

当然，重复定义既乏味又容易出错。

让我们看一个`stdio.h`例子。如果没有标头，您将不得不在每个想要执行 I/O 的文件中复制粘贴以下代码：

```
/* Define ISO C stdio on top of C++ iostreams.
   Copyright (C) 1991, 1994-2008, 2009, 2010 Free Software Foundation, Inc.
   This file is part of the GNU C Library.

   The GNU C Library is free software; you can redistribute it and/or
   modify it under the terms of the GNU Lesser General Public
   License as published by the Free Software Foundation; either
   version 2.1 of the License, or (at your option) any later version.

   The GNU C Library is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
   Lesser General Public License for more details.

   You should have received a copy of the GNU Lesser General Public
   License along with the GNU C Library; if not, write to the Free
   Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA
   02111-1307 USA.  */

/*
 *  ISO C99 Standard: 7.19 Input/output <stdio.h>
 */

#ifndef _STDIO_H

#if !defined __need_FILE && !defined __need___FILE
# define _STDIO_H   1
# include <features.h>

__BEGIN_DECLS

# define __need_size_t
# define __need_NULL
# include <stddef.h>

# include <bits/types.h>
# define __need_FILE
# define __need___FILE
#endif /* Don't need FILE.  */

#if !defined __FILE_defined && defined __need_FILE

/* Define outside of namespace so the C++ is happy.  */
struct _IO_FILE;

__BEGIN_NAMESPACE_STD
/* The opaque type of streams.  This is the definition used elsewhere.  */
typedef struct _IO_FILE FILE;
__END_NAMESPACE_STD
#if defined __USE_LARGEFILE64 || defined __USE_SVID || defined __USE_POSIX \
    || defined __USE_BSD || defined __USE_ISOC99 || defined __USE_XOPEN \
    || defined __USE_POSIX2
__USING_NAMESPACE_STD(FILE)
#endif

# define __FILE_defined 1
#endif /* FILE not defined.  */
#undef  __need_FILE

#if !defined ____FILE_defined && defined __need___FILE

/* The opaque type of streams.  This is the definition used elsewhere.  */
typedef struct _IO_FILE __FILE;

# define ____FILE_defined   1
#endif /* __FILE not defined.  */
#undef  __need___FILE

#ifdef  _STDIO_H
#define _STDIO_USES_IOSTREAM

#include <libio.h>

#if defined __USE_XOPEN || defined __USE_XOPEN2K8
# ifdef __GNUC__
#  ifndef _VA_LIST_DEFINED
typedef _G_va_list va_list;
#   define _VA_LIST_DEFINED
#  endif
# else
#  include <stdarg.h>
# endif
#endif

#ifdef __USE_XOPEN2K8
# ifndef __off_t_defined
# ifndef __USE_FILE_OFFSET64
typedef __off_t off_t;
# else
typedef __off64_t off_t;
# endif
# define __off_t_defined
# endif
# if defined __USE_LARGEFILE64 && !defined __off64_t_defined
typedef __off64_t off64_t;
# define __off64_t_defined
# endif

# ifndef __ssize_t_defined
typedef __ssize_t ssize_t;
# define __ssize_t_defined
# endif
#endif

/* The type of the second argument to `fgetpos' and `fsetpos'.  */
__BEGIN_NAMESPACE_STD
#ifndef __USE_FILE_OFFSET64
typedef _G_fpos_t fpos_t;
#else
typedef _G_fpos64_t fpos_t;
#endif
__END_NAMESPACE_STD
#ifdef __USE_LARGEFILE64
typedef _G_fpos64_t fpos64_t;
#endif

/* The possibilities for the third argument to `setvbuf'.  */
#define _IOFBF 0        /* Fully buffered.  */
#define _IOLBF 1        /* Line buffered.  */
#define _IONBF 2        /* No buffering.  */

/* Default buffer size.  */
#ifndef BUFSIZ
# define BUFSIZ _IO_BUFSIZ
#endif

/* End of file character.
   Some things throughout the library rely on this being -1\.  */
#ifndef EOF
# define EOF (-1)
#endif

/* The possibilities for the third argument to `fseek'.
   These values should not be changed.  */
#define SEEK_SET    0   /* Seek from beginning of file.  */
#define SEEK_CUR    1   /* Seek from current position.  */
#define SEEK_END    2   /* Seek from end of file.  */

#if defined __USE_SVID || defined __USE_XOPEN
/* Default path prefix for `tempnam' and `tmpnam'.  */
# define P_tmpdir   "/tmp"
#endif

/* Get the values:
   L_tmpnam How long an array of chars must be to be passed to `tmpnam'.
   TMP_MAX  The minimum number of unique filenames generated by tmpnam
        (and tempnam when it uses tmpnam's name space),
        or tempnam (the two are separate).
   L_ctermid    How long an array to pass to `ctermid'.
   L_cuserid    How long an array to pass to `cuserid'.
   FOPEN_MAX    Minimum number of files that can be open at once.
   FILENAME_MAX Maximum length of a filename.  */
#include <bits/stdio_lim.h>

/* Standard streams.  */
extern struct _IO_FILE *stdin;      /* Standard input stream.  */
extern struct _IO_FILE *stdout;     /* Standard output stream.  */
extern struct _IO_FILE *stderr;     /* Standard error output stream.  */
/* C89/C99 say they're macros.  Make them happy.  */
#define stdin stdin
#define stdout stdout
#define stderr stderr

__BEGIN_NAMESPACE_STD
/* Remove file FILENAME.  */
extern int remove (__const char *__filename) __THROW;
/* Rename file OLD to NEW.  */
extern int rename (__const char *__old, __const char *__new) __THROW;
__END_NAMESPACE_STD

#ifdef __USE_ATFILE
/* Rename file OLD relative to OLDFD to NEW relative to NEWFD.  */
extern int renameat (int __oldfd, __const char *__old, int __newfd,
             __const char *__new) __THROW;
#endif

__BEGIN_NAMESPACE_STD
/* Create a temporary file and open it read/write.

   This function is a possible cancellation points and therefore not
   marked with __THROW.  */
#ifndef __USE_FILE_OFFSET64
extern FILE *tmpfile (void) __wur;
#else
# ifdef __REDIRECT
extern FILE *__REDIRECT (tmpfile, (void), tmpfile64) __wur;
# else
#  define tmpfile tmpfile64
# endif
#endif

#ifdef __USE_LARGEFILE64
extern FILE *tmpfile64 (void) __wur;
#endif

/* Generate a temporary filename.  */
extern char *tmpnam (char *__s) __THROW __wur;
__END_NAMESPACE_STD

#ifdef __USE_MISC
/* This is the reentrant variant of `tmpnam'.  The only difference is
   that it does not allow S to be NULL.  */
extern char *tmpnam_r (char *__s) __THROW __wur;
#endif

#error Omitted due to post length limit

__BEGIN_NAMESPACE_STD
#ifndef __USE_FILE_OFFSET64
/* Get STREAM's position.

   This function is a possible cancellation point and therefore not
   marked with __THROW.  */
extern int fgetpos (FILE *__restrict __stream, fpos_t *__restrict __pos);
/* Set STREAM's position.

   This function is a possible cancellation point and therefore not
   marked with __THROW.  */
extern int fsetpos (FILE *__stream, __const fpos_t *__pos);
#else
# ifdef __REDIRECT
extern int __REDIRECT (fgetpos, (FILE *__restrict __stream,
                 fpos_t *__restrict __pos), fgetpos64);
extern int __REDIRECT (fsetpos,
               (FILE *__stream, __const fpos_t *__pos), fsetpos64);
# else
#  define fgetpos fgetpos64
#  define fsetpos fsetpos64
# endif
#endif
__END_NAMESPACE_STD

#ifdef __USE_LARGEFILE64
extern int fseeko64 (FILE *__stream, __off64_t __off, int __whence);
extern __off64_t ftello64 (FILE *__stream) __wur;
extern int fgetpos64 (FILE *__restrict __stream, fpos64_t *__restrict __pos);
extern int fsetpos64 (FILE *__stream, __const fpos64_t *__pos);
#endif

__BEGIN_NAMESPACE_STD
/* Clear the error and EOF indicators for STREAM.  */
extern void clearerr (FILE *__stream) __THROW;
/* Return the EOF indicator for STREAM.  */
extern int feof (FILE *__stream) __THROW __wur;
/* Return the error indicator for STREAM.  */
extern int ferror (FILE *__stream) __THROW __wur;
__END_NAMESPACE_STD

#ifdef __USE_MISC
/* Faster versions when locking is not required.  */
extern void clearerr_unlocked (FILE *__stream) __THROW;
extern int feof_unlocked (FILE *__stream) __THROW __wur;
extern int ferror_unlocked (FILE *__stream) __THROW __wur;
#endif

__BEGIN_NAMESPACE_STD
/* Print a message describing the meaning of the value of errno.

   This function is a possible cancellation point and therefore not
   marked with __THROW.  */
extern void perror (__const char *__s);
__END_NAMESPACE_STD

/* Provide the declarations for `sys_errlist' and `sys_nerr' if they
   are available on this system.  Even if available, these variables
   should not be used directly.  The `strerror' function provides
   all the necessary functionality.  */
#include <bits/sys_errlist.h>

#ifdef  __USE_POSIX
/* Return the system file descriptor for STREAM.  */
extern int fileno (FILE *__stream) __THROW __wur;
#endif /* Use POSIX.  */

#ifdef __USE_MISC
/* Faster version when locking is not required.  */
extern int fileno_unlocked (FILE *__stream) __THROW __wur;
#endif

#if (defined __USE_POSIX2 || defined __USE_SVID  || defined __USE_BSD || \
     defined __USE_MISC)
/* Create a new stream connected to a pipe running the given command.

   This function is a possible cancellation point and therefore not
   marked with __THROW.  */
extern FILE *popen (__const char *__command, __const char *__modes) __wur;

/* Close a stream opened by popen and return the status of its child.

   This function is a possible cancellation point and therefore not
   marked with __THROW.  */
extern int pclose (FILE *__stream);
#endif

#ifdef  __USE_POSIX
/* Return the name of the controlling terminal.  */
extern char *ctermid (char *__s) __THROW;
#endif /* Use POSIX.  */

#ifdef __USE_XOPEN
/* Return the name of the current user.  */
extern char *cuserid (char *__s);
#endif /* Use X/Open, but not issue 6\.  */

#ifdef  __USE_GNU
struct obstack;         /* See <obstack.h>.  */

/* Write formatted output to an obstack.  */
extern int obstack_printf (struct obstack *__restrict __obstack,
               __const char *__restrict __format, ...)
     __THROW __attribute__ ((__format__ (__printf__, 2, 3)));
extern int obstack_vprintf (struct obstack *__restrict __obstack,
                __const char *__restrict __format,
                _G_va_list __args)
     __THROW __attribute__ ((__format__ (__printf__, 2, 0)));
#endif /* Use GNU.  */

#if defined __USE_POSIX || defined __USE_MISC
/* These are defined in POSIX.1:1996\.  */

/* Acquire ownership of STREAM.  */
extern void flockfile (FILE *__stream) __THROW;

/* Try to acquire ownership of STREAM but do not block if it is not
   possible.  */
extern int ftrylockfile (FILE *__stream) __THROW __wur;

/* Relinquish the ownership granted for STREAM.  */
extern void funlockfile (FILE *__stream) __THROW;
#endif /* POSIX || misc */

#if defined __USE_XOPEN && !defined __USE_XOPEN2K && !defined __USE_GNU
/* The X/Open standard requires some functions and variables to be
   declared here which do not belong into this header.  But we have to
   follow.  In GNU mode we don't do this nonsense.  */
# define __need_getopt
# include <getopt.h>
#endif  /* X/Open, but not issue 6 and not for GNU.  */

/* If we are compiling with optimizing read this file.  It contains
   several optimizing inline functions and macros.  */
#ifdef __USE_EXTERN_INLINES
# include <bits/stdio.h>
#endif
#if __USE_FORTIFY_LEVEL > 0 && defined __extern_always_inline
# include <bits/stdio2.h>
#endif
#ifdef __LDBL_COMPAT
# include <bits/stdio-ldbl.h>
#endif

__END_DECLS

#endif /* <stdio.h> included.  */

#endif /* !_STDIO_H */ 
```

**这**就是我们有头文件的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T13:08:41.353

在头文件中提供函数声明**至少**可以保护您免受愚蠢的错误，例如传递不兼容类型的参数。

此外，标头不仅用于函数声明。`struct`/`enum`定义、全局`typedef`、宏、内联函数等是什么？

最后，可以将标头视为模块的外部 API。可以简单地看一下标题以了解如何在不处理实现的情况下使用它（有时根本不可用）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T13:11:02.673

C 头文件是一种共享全局指针、宏 (#define ...)、声明为非状态结构或 typedef 的通用结构类型的方法。头文件的最大用途之一是在 C 模块之间共享函数声明。

# macos - qmake 和 osx 捆绑包

> ID：12727884
> 
> 赞同：0
> 
> 时间：2012-10-04T13:02:04.140
> 
> 标签：macos, qt, qmake

我想将一些额外的信息（文本文件、背景图片或其他）放置到 .app-bundle 中，然后从 QT 访问这些项目。好的，可以使用资源文件添加它们，但我想让用户能够相对容易地更改内容。工作方法是手动完成 - 这是有效的。但是，如果我可以直接从 qmake .pro 文件中执行此操作，则更有益。我如何以优雅的方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T17:30:07.477

使用[`QMAKE_BUNDLE_DATA`](http://qt-project.org/doc/qt-4.8/qmake-variable-reference.html#qmake-bundle-data)：

```
RESFILES.files = background.png copyright.txt
RESFILES.path = Contents/Resources
QMAKE_BUNDLE_DATA += RESFILES 
```

# jquery - 无法从 jquery 对话框中删除图像

> ID：12727885
> 
> 赞同：0
> 
> 时间：2012-10-04T13:02:04.873
> 
> 标签：jquery, jquery-ui, drag-and-drop, draggable, jquery-ui-draggable

我无法将 jquery 对话框中的图像拖放到放置区域...

图像可以拖动但不能拖放到放置区域的新位置...

掉落时它会向后移动...

我从jquery网站修改了代码，

任何人都可以帮助我....

我真的不知道如何修复这个错误......

```
<HTML>
    <head>
        <link rel="stylesheet" type="text/css" href="jquery-ui-1.8.24.custom.css" />
        <script type="text/javascript" src="jquery-1.8.2.min.js"></script>   
        <script type="text/javascript" src="jquery-ui-1.8.24.custom.min.js"></script>   
        <script type="text/javascript" src="jquery.easydrag.js"></script>   
        <style>
            #droppable { width: 150px; height: 150px; padding: 0.5em; float: left; margin: 0px;}
        </style>
        <script>
            var draggableArguments={
                scope: "items",
                cursor: 'hand',
                revert:'invalid',
                helper:'clone',
                appendTo: '#droppable',
                scroll: false,
                containment: 'DOM',
                zIndex: 1500,
                addClasses: false,
            }
            $(function() {
                $( "#dialog" ).dialog({title: 'Some title', width:300, eight:600});
                $("#drag").draggable(draggableArguments);
                $( "#droppable" ).droppable()
            });
        </script>
    </head>
    <body>
        <div class="demo">
            <div id="dialog" title="Basic dialog">
                <div id="drag">
                    <img src="low.gif"/>
                </div>  
            </div>
            <div id="droppable" class="ui-widget-header">
                <p>Drop here</p>
            </div>
        </div><!-- End demo -->
    </body>
</HTML> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:41:23.403

我更正了您的代码：

```
<HTML>
<head>
<link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.8.24/themes/base/jquery-ui.css" />
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js"></script>   
<script type="text/javascript" src="http://code.jquery.com/ui/1.8.24/jquery-ui.min.js"></script>   
<script>
var draggableArguments={
    cursor: 'hand',
    appendTo: '#droppable',
    scroll: false,
    containment: 'DOM',
    zIndex: 1500,
    addClasses: false
}
$(function() {
    $("#drag").draggable(draggableArguments);
    $( "#droppable" ).droppable({
        drop: function( event, ui ) {
            $( ui.draggable ).remove();
            $( ui.draggable.html() ).appendTo( this );
        }
    });
});
</script>
</head>
<body>
<div id="dialog" title="Basic dialog">
<div id="drag">
    <img src="low.gif"/>
</div>  
</div>
<div id="droppable" class="ui-widget-header">
    <p>Drop here</p>
</div>
</body>
</HTML> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:19:16.357

Hye，您需要指定放置元素时会发生什么：如果要将可拖动元素插入到可放置元素中，则需要编写此操作。

jquery-ui 文档的来源：

```
 drop: function( event, ui ) {
            $( this ).find( ".placeholder" ).remove();
            $( "<li></li>" ).text( ui.draggable.text() ).appendTo( this );
        } 
```

放置时，它们会在列表中添加一个元素，其中包含可拖动元素的文本。

# android - 安装的 Android 应用程序是 apk 大小的两倍

> ID：12727892
> 
> 赞同：1
> 
> 时间：2012-10-04T13:02:37.430
> 
> 标签：android, memory, size, double, apk

我将我的 Eclipse ADT 工具升级到 r20（从 r17 左右），现在安装在设备上的应用程序使用两倍的 apk 大小。该应用程序本身运行良好。

发布版本和调试版本都会发生这种情况，以及我是使用 ant 生成 apk（并通过 usb 安装）还是从 eclipse 启动应用程序。

我尝试了各种目标版本，但总是一样的。

有关信息 - 我不使用“复制保护”或许可，这是直接安装，而不是通过 Play 商店。- 我使用 proguard 来优化/混淆我的代码。我解压缩/分析了我的 apk，一切看起来都很正常（与以前没有出现此问题的 apk 相比）。

在此先感谢您提供有关此的任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:24:02.183

已安装应用的大小始终大于 apk。becoz apk 只是一个压缩文件（压缩文件），安装的应用程序已解压缩（未压缩）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T11:46:41.610

发现了问题。

sdk更新的同时，manifest也更新了，首选存储选项（外部）也被删除了，所以完全安装在手机内存上。并且应用程序管理器中报告的内存是 apk 大小的两倍。

现在它安装在 SD 卡上，它使用几乎和以前一样的系统内存中的 apk 大小。

# asp.net - 通过 Web Api 上传文件在第二次上传时失败

> ID：12727893
> 
> 赞同：3
> 
> 时间：2012-10-04T13:02:44.687
> 
> 标签：asp.net, asp.net-web-api

我正在使用 Web Api 创建一种通过 Web api 上传文件的方法。我找到了几篇关于如何完成此操作的博客文章，并且代码都非常相似，其中一个关键的共同点是 Request.Content.ReadAsMultipartAsync() 调用。我遇到的问题是第一次上传工作正常，但随后 IIS 进入故障状态，后续上传失败。第一个 32Kb 进入，但随后退出。调试仅显示在 ASP.NET 框架中某处发生的空引用异常。

这是我的 ApiController 定义...

```
public class FileUploadController : ApiController
{
    public void Post()
    {
        if (Request.Content.IsMimeMultipartContent())
        {
            var path = HttpContext.Current.Server.MapPath("~/App_Data");
            var provider = new MultipartFormDataStreamProvider(path);
            var task = Request.Content.ReadAsMultipartAsync(provider);
            task.ContinueWith(t =>
            {
                if (t.IsFaulted || t.IsCanceled)
                    throw new HttpResponseException(HttpStatusCode.InternalServerError);
            });
        }
        else
        {
            throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.NotAcceptable, "This request is not properly formatted"));
        }
    }
} 
```

另外，这是我发布的页面...

```
<!doctype html>
<head>
    <title>File Upload Progress Demo #3</title>
</head>
<body>
    <h1>File Upload Progress Demo #3</h1>
    <code>&lt;input type="file" name="myfile[]"></code><br>
    <form action="/api/fileupload" method="post" enctype="multipart/form-data">
    <input type="file" name="myfile"><br>
    <input type="submit" value="Upload File to Server">
    </form>

    <div class="progress">
        <div class="bar"></div>
        <div class="percent">0%</div>
    </div>

    <div id="status"></div>
</body> 
```

上面的代码可以从[https://github.com/JohnLivermore/FileUploadTest](https://github.com/JohnLivermore/FileUploadTest)下载到默认的 WebApi 解决方案中。运行并导航到`http://localhost:{port}/FormPost.html`。第一次上传成功（上传到 App_Data），但后续上传只上传前 32 Kb，然后失败。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T20:08:32.757

您的代码的主要问题是在不等待所有异步任务完成的情况下退出您的方法。您可以`.Wait()`为此目的使用：

```
public class FileUploadController : ApiController
{
    public void Post()
    {
        if (Request.Content.IsMimeMultipartContent())
        {
            var path = HttpContext.Current.Server.MapPath("~/App_Data");
            var provider = new MultipartFormDataStreamProvider(path);
            var readAsMultipartTask = Request.Content.ReadAsMultipartAsync(provider);
            var continueWithTask = readAsMultipartTask.ContinueWith(t =>
            {
                if (t.IsFaulted || t.IsCanceled)
                throw new HttpResponseException(HttpStatusCode.InternalServerError);
            });
            continueWithTask.Wait();
        }
        else
        {
            throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.NotAcceptable, "This request is not properly formatted"));
        }
    }
} 
```

这将使上传正常工作，但您应该知道您的方法正在破坏 HTTP 协议，因为在正确上传的情况下您没有发回任何响应。你的方法应该更像这样：

```
public class FileUploadController : ApiController
{
    public async Task<HttpResponseMessage> Post()
    {
        if (Request.Content.IsMimeMultipartContent())
        {
            var path = HttpContext.Current.Server.MapPath("~/App_Data");
            var provider = new MultipartFormDataStreamProvider(path);
            await Request.Content.ReadAsMultipartAsync(provider).ContinueWith(t =>
            {
                if (t.IsFaulted || t.IsCanceled)
                    throw new HttpResponseException(HttpStatusCode.InternalServerError);
            });
            //Here you should return a meaningful response
            return Request.CreateResponse(HttpStatusCode.OK); 
        }
        else
        {
            throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.NotAcceptable, "This request is not properly formatted"));
        }
    }
} 
```

（感谢使用 async/await 异步任务的同步由框架处理）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T20:36:27.433

您不应该使用 void 方法。

由于多种原因，Void 和 async 不能很好地配合使用。

```
 public Task<HttpResponseMessage> Post()
   {
      var rootUrl = "c:/uploads";

      if (Request.Content.IsMimeMultipartContent())
      {
         var streamProvider = new MultipartFormDataStreamProvider(rootUrl);
         var task = Request.Content.ReadAsMultipartAsync(streamProvider).ContinueWith<HttpResponseMessage>(t =>
         {
            if (t.IsFaulted || t.IsCanceled)
               throw new HttpResponseException(HttpStatusCode.InternalServerError);

            //do stuff with files if you wish

            return new HttpResponseMessage(HttpStatusCode.OK);
         });
      return task;
      }

      throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.NotAcceptable, "This request is not properly formatted"));
   } 
```

# c++ - 使用列表 STL 时出错

> ID：12727897
> 
> 赞同：0
> 
> 时间：2012-10-04T13:02:59.333
> 
> 标签：c++, list, stl

> **可能重复：**
> [这是 getline() 的错误，还是我做错了什么。使用 getline() 的正确方法？](https://stackoverflow.com/questions/11144834/is-this-a-bug-with-getline-or-am-i-doing-something-wrong-right-way-to-use-ge)

我试图在 STL 列表和字符串上学习这个主题。所以作为一个集成，我尝试了这个程序：

```
#include<iostream>
#include<list>
#include<string>
using namespace std;

int main(){
    list<string> obj1, obj2;
    string obj;
    int n;
    cout<<"Enter the number of elements in string list 1:\t";
    cin>>n;
    cin.clear();
    cout<<"Enter the string:\n";
    for( int i=0; i<n; i++){
        getline(cin, obj);
        cout<<"The string is:\t"<<obj<<" and i is "<<i<<endl;
        obj1.push_back(obj);
    }
    obj1.sort();
    cout<<"The string in sorted order is:\n";
    list<string>::reverse_iterator rit;
    for( rit = obj1.rbegin(); rit != obj1.rend(); rit++)
        cout<<*rit<<endl;
    return 0;
} 
```

我得到以下输出：

```
Enter the number of elements in string list 1:  4
Enter the string:
The string is:   and i is 0
goat
The string is:  goat and i is 1
boat
The string is:  boat and i is 2
toad
The string is:  toad and i is 3
The string in sorted order is:
toad
goat
boat 
```

程序中的错误是第一个字符串是自动插入到列表中的空白字符串。为了避免这种情况，我尝试使用 cin.clear() 但我无法克服错误。任何人都可以找出错误并帮助我回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:06:00.090

在同一个程序中使用`operator>>`和使用时必须特别小心。`getline`在`operator>>`输入流中留下一个行尾指示符，它`getline`接受。

尝试`std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n')`在`getline`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:09:09.490

`cin.clear()`不做你认为它做的事。查一下。然后按照您在 Rob 的回答中得到的建议进行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T13:09:09.683

这是因为在你输入数字之后，换行符还在缓冲区中，所以第一个`getline`得到那个换行符。`getline`最简单的解决方案是在循环之前使用虚拟调用。

# objective-c - UIKeyboard 避免和自动布局

> ID：12727898
> 
> 赞同：27
> 
> 时间：2012-10-04T13:03:01.530
> 
> 标签：objective-c, ios, cocoa-touch, uiviewcontroller, ios6

鉴于 iOS 6 中对 Auto Layout 的关注，以及 Apple 工程师的建议（*参见 WWDC 2012 视频*）我们不再直接操作视图的框架，如何避免仅使用 Auto Layout 和 NSLayoutConstraint 的键盘？

**更新**

这看起来是一个合理的解决方案：[键盘敏感布局示例](http://www.think-in-g.net/ghawk/blog/2012/09/practicing-auto-layout-an-example-of-keyboard-sensitive-layout/)（[GitHub 源）](https://github.com/ghawkgu/keyboard-sensitive-layout)，但我看到的一个潜在问题是当用户旋转设备并且键盘已经在屏幕上时会发生什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-23T01:09:11.300

那篇博客文章很棒，但我想建议对其进行一些改进。首先，您可以注册观察帧变化，因此您不需要注册观察显示和隐藏通知。其次，您应该将键盘的 CGRects 从屏幕转换为视图坐标。最后，您可以复制 iOS 为键盘本身使用的确切动画曲线，以便键盘和跟踪视图同步移动。

把它们放在一起，你会得到以下结果：

```
@interface MyViewController ()
// This IBOutlet holds a reference to the bottom vertical spacer
// constraint that positions the "tracking view",i.e., the view that
// we want to track the vertical motion of the keyboard
@property (weak, nonatomic) IBOutlet NSLayoutConstraint *bottomVerticalSpacerConstraint;
@end

@implementation MyViewController
-(void)viewDidLoad
{
  [super viewDidLoad];
  // register for notifications about the keyboard changing frame
  [[NSNotificationCenter defaultCenter] addObserver:self
                                           selector:@selector(keyboardWillChangeFrame:)
                                               name:UIKeyboardWillChangeFrameNotification
                                             object:self.view.window];
}

-(void)keyboardWillChangeFrame:(NSNotification*)notification
{
  NSDictionary * userInfo = notification.userInfo;
  UIViewAnimationCurve animationCurve  = [userInfo[UIKeyboardAnimationCurveUserInfoKey] intValue];
  NSTimeInterval duration = [userInfo[UIKeyboardAnimationDurationUserInfoKey] doubleValue];

  // convert the keyboard's CGRect from screen coords to view coords
  CGRect kbEndFrame = [self.view convertRect:[[userInfo objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue]
                                    fromView:self.view.window];
  CGRect kbBeginFrame = [self.view convertRect:[[userInfo objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue]
                                      fromView:self.view.window];
  CGFloat deltaKeyBoardOrigin = kbEndFrame.origin.y - kbBeginFrame.origin.y;

  // update the constant factor of the constraint governing your tracking view
  self.bottomVerticalSpacerConstraint.constant -= deltaKeyBoardOrigin;
  // tell the constraint solver it needs to re-solve other constraints.
  [self.view setNeedsUpdateConstraints];

  [UIView beginAnimations:nil context:NULL];
  [UIView setAnimationDuration:duration];
  [UIView setAnimationCurve:animationCurve];
  [UIView setAnimationBeginsFromCurrentState:YES];
  // within this animation block, force the layout engine to apply 
  // the new layout changes immediately, so that we
  // animate to that new layout. We need to use old-style
  // UIView animations to pass the curve type.
  [self.view layoutIfNeeded];
  [UIView commitAnimations];
}

-(void)dealloc {
  [[NSNotificationCenter defaultCenter] removeObserver:self
                                                  name:UIKeyboardWillChangeFrameNotification
                                                object:nil];
}
@end 
```

只要您在键盘启动时不更改方向，这将起作用。

[这是关于如何在 iOS 7 上模拟键盘动画以将“完成”按钮添加到数字键盘](https://stackoverflow.com/questions/18837166/how-to-mimic-keyboard-animation-on-ios-7-to-add-done-button-to-numeric-keyboar)的答案？展示了如何正确模仿键盘动画曲线。

关于所有这些基于通知的解决方案要注意的最后一件事是：如果您的应用程序中的某些其他屏幕也使用键盘，它们可能会产生意想不到的效果，因为您的视图控制器仍然会收到通知，只要它没有被释放，即使它的视图已卸载。对此的一种补救方法是在通知处理程序中放置一个条件，以确保它仅在视图控制器在屏幕上时运行。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-01T17:05:02.347

在[Spring](https://github.com/MengTo/Spring)框架中使用[KeyboardLayoutConstraint](https://github.com/MengTo/Spring/blob/master/Spring/KeyboardLayoutConstraint.swift)是迄今为止我发现的最简单的解决方案。 ![键盘布局约束](../Images/0b7f22ab5674c268a63fcafeb229df59.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-28T21:07:06.313

我的想法是创建一个`UIView`，我们称之为*键盘视图*，并将其放置到您的视图控制器的视图中。然后观察键盘框架更改通知`UIKeyboardDidChangeFrameNotification`并将键盘框架与*键盘视图*匹配（我建议对更改进行动画处理）。观察此通知可以处理您提到的旋转以及 iPad 上的移动键盘。

然后简单地创建与此*键盘视图*相关的约束。不要忘记将约束添加到他们的公共超级视图中。

要使键盘框架正确翻译并旋转到您的视图坐标，请查看`UIKeyboardFrameEndUserInfoKey`.

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-07-17T23:54:20.093

我创建了一个像这样的视图，当键盘打开/关闭屏幕时，它会观察键盘并改变它自己的约束。

```
@interface YMKeyboardLayoutHelperView ()
@property (nonatomic) CGFloat desiredHeight;
@property (nonatomic) CGFloat duration;
@end

@implementation YMKeyboardLayoutHelperView

- (id)init
{
    self = [super init];
    if (self) {
        self.translatesAutoresizingMaskIntoConstraints = NO;

        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow:) name:@"UIKeyboardWillShowNotification" object:nil];
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillHide:) name:@"UIKeyboardWillHideNotification" object:nil];
    }
    return self;
}

- (void)keyboardWillShow:(NSNotification *)notification
{
    // Save the height of keyboard and animation duration
    NSDictionary *userInfo = [notification userInfo];
    CGRect keyboardRect = [userInfo[@"UIKeyboardBoundsUserInfoKey"] CGRectValue];
    self.desiredHeight = CGRectGetHeight(keyboardRect);
    self.duration = [userInfo[@"UIKeyboardAnimationDurationUserInfoKey"] floatValue];

    [self setNeedsUpdateConstraints];
}

- (void)keyboardWillHide:(NSNotification *)notification
{
    // Reset the desired height (keep the duration)
    self.desiredHeight = 0.0f;

    [self setNeedsUpdateConstraints];
}

- (void)updateConstraints
{
    [super updateConstraints];

    // Remove old constraints
    if ([self.constraints count]) {
        [self removeConstraints:self.constraints];
    }

    // Add new constraint with desired height
    NSString *constraintFormat = [NSString stringWithFormat:@"V:[self(%f)]", self.desiredHeight];
    [self addVisualConstraints:constraintFormat views:@{@"self": self}];

    // Animate transition
    [UIView animateWithDuration:self.duration animations:^{
        [self.superview layoutIfNeeded];
    }];

}

- (void)dealloc
{
    [[NSNotificationCenter defaultCenter] removeObserver:self];
}

@end 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-15T00:47:02.403

我编写了一个库，可以为您完成所有工作（支持 Auto Layout 和 Springs & Struts）

IHKeyboardAvoiding [https://github.com/IdleHandsApps/IHKeyboardAvoiding](https://github.com/IdleHandsApps/IHKeyboardAvoiding)

只需调用 [IHKeyboardAvoiding setAvoidingView:self.myView];

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-02T17:59:48.480

对于带键盘盒的自动布局，我使用静态表格视图。这使您的代码更加简单，并且不需要跟踪键盘高度。我学到的关于表格视图的一件事是使每个表格行尽可能窄。如果将太多 UI 垂直放在一行中，可能会出现键盘重叠。

# asp.net - 使用 asp.net 按钮启动 html 代码

> ID：12727901
> 
> 赞同：2
> 
> 时间：2012-10-04T13:03:13.180
> 
> 标签：asp.net, html, vb.net, visual-studio

我想使用 asp.net 按钮使用以下 html 启动 Outlook 窗口。

```
<a href="mailto:sample@website.com?subject=Insurance Text"> 
```

我需要做什么才能从我的 onClick 事件中归档 html 代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:06:28.280

试试这个

```
<asp:Button runat="server" 
            ID="btn" 
            OnClientClick="document.location = 'mailto:sample@website.com?subject=Insurance Text'; return false;"
            Text="Mail" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:07:12.943

有两种方法。如果你想要标准按钮，你可以使用这样的东西：

```
<asp:Button ID="MailToButton"
            Text="Send Email"
            OnClientClick="javascript: navigate('mailto:blah@blah.com'); return false;"
            runat="server" /> 
```

*编辑2：不要介意`UseSubmitBehavior`财产-我不正确。你只需要使用`return false;`. 显然 ASP.NET 不会呈现常规的非提交按钮。[如何在asp按钮上禁用回发](https://stackoverflow.com/questions/683746/how-to-disable-postback-on-an-asp-button)*

如果你想要一个锚标签，你可以使用超链接标签的 NavigateUrl 属性：

```
<asp:HyperLink ID="MailToHyperlink"
               Text="Send Email"
               NavigateUrl="mailto:blah@blah.com"
               runat="server" /> 
```

但是，您不能从后面代码中的标准单击事件启动 Outlook。点击事件背后的代码发生在服务器上，而不是客户端机器上，所以无论你做什么都需要通过标准 HTML 或通过 javascript 在客户端机器上发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T13:07:39.880

为什么是 ASP.NET 按钮？只需使用一个简单的 HTML 按钮。

它们是网络上的大量示例。这个应该工作：[使用mailto按钮点击事件](http://bytes.com/topic/asp-net/answers/463376-using-mailto-button-click-event)

# opencms - OpenCms8 中没有靶心 - “未指定服务实现 URL”

> ID：12727903
> 
> 赞同：0
> 
> 时间：2012-10-04T13:03:23.327
> 
> 标签：opencms

在我的一个测试服务器中，我的 OpenCms 安装以某种方式损坏：登录后，ADE 栏为空，我无法编辑任何内容：

![ADE没有靶心](../Images/74461463beb0728892062cd03596d4a8.png)

我在日志中没有收到任何类型的错误或警告。

经过一些研究，我发现与理智的安装相比，这个损坏的安装`Service implementation URL not specified`在通常包含这个靶心的一个 div 中呈现一条消息（仅显示相关的 html）：

```
<body class="GMQ4TUIBKGB GMQ4TUIBFO">
   +<div id="window">
   +<iframe id="editprovider" src="javascript:''" style="position: absolute; width: 0px; height: 0px; border: medium none;" tabindex="-1">
    <div style="display: none;"></div>
   -<div class="GMQ4TUIBLEB">
       -<div class="GMQ4TUIBJEB" style="visibility: hidden;">
            <div class="GMQ4TUIBEBB"></div>
           -<div class="GMQ4TUIBABB">
                <span class="GMQ4TUIBPAB"></span>
                <br>
                <span class="GMQ4TUIBCBB GMQ4TUIBN1 GMQ4TUIBE2">Service implementation URL not specified</span>
            </div>
        </div>
       +<div class="GMQ4TUIBMEB">
    </div>
</body> 
```

用萤火虫渲染： ![未指定服务实现 URL](../Images/c4d065631338d5cec81485ea075f9521.png)

我怎样才能解决这个问题？

* * *

环境注意事项：

*   OpenCms 8.04（官方自编译）
*   雄猫 6.0.35
*   我复制了使用 OCEE 的可操作 OpenCms 数据库，并将其配置为在我的测试环境中不使用任何 OCEE 组件。在这个配置阶段，恐怕我已经破坏了一些东西。
*   我们的生产数据库非常大（大约 100 GB），并且希望避免重新克隆它并从头开始安装 OpenCms 来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:21:01.730

我已经解决了**（重新）安装`org.opencms.ade.editprovider`模块**的问题：

![靶心已恢复](../Images/d036a7e6856e1f8db0c59d7049779e15.png)

显然，我的*OpenCms 8.04*和运行版本的“继承”OpenCms 模块之间存在版本不匹配。（在这种情况下，*org.opencms.ade.editprovider 8.0.4*匹配*OpenCms 8.0.4*。）

# android - Android AlertDialog setOnCanceledOnTouchOutside

> ID：12727906
> 
> 赞同：3
> 
> 时间：2012-10-04T13:03:27.417
> 
> 标签：android, android-dialog

我创建`AlertDialog`、设置`setOnCanceledOnTouchOutside`和`setCancelable`参数，然后单击它隐藏的外部对话框。也许有人可以帮助我？

```
dialog = new AlertDialog.Builder(getContext()).setView(table).setTitle(R.string.order_start_title)
.setNegativeButton(R.string.dialog_cancel, new DialogInterface.OnClickListener() {

    public void onClick(DialogInterface dialog, int whichButton) {
        onOrderStartCancel(context);
    }
}).setPositiveButton(R.string.dialog_start_order, new DialogInterface.OnClickListener() {

    public void onClick(DialogInterface dialog, int whichButton) {
        onOrderStart(context, goodsTypeId, goodType);
    }
}).create();
dialog.setCanceledOnTouchOutside(true);
dialog.setCancelable(true);
dialog.show(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:07:17.240

如果您不想让用户取消对话框，那么

利用

```
dialog.setCancelable(false);
                     ^^^^^ 
```

代替

```
dialog.setCancelable(true); 
```

`dialog.setCanceledOnTouchOutside(true); <---` 如果不需要，也将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:05:16.673

利用

```
dialog.setCancelable(false); 
```

# iphone - 如何从 Youtube URL 获取缩略图？

> ID：12727907
> 
> 赞同：1
> 
> 时间：2012-10-04T13:03:27.550
> 
> 标签：iphone, ios, xcode, youtube, youtube-api

```
NSURL *youTubeURL = [NSURL URLWithString:@"http://www.youtube.com/watch?v=HPwyVw_6vsQ&feature=youtu.be"]; // URL is a string which needs to be placed in @"" and close method call with ].
MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL:youTubeURL];
imageSel = [player thumbnailImageAtTime:1.0 timeOption:MPMovieTimeOptionNearestKeyFrame]; 
```

我正在使用此代码从视频中获取缩略图，并在 imagesel 中返​​回 null 值。谁能帮我解决这个问题我正在使用 YouTube URL。当我将此代码用于主包中的视频时它工作正常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T13:14:07.417

做这个：

首先从视频 URL 链接中提取 videoID。

现在参考[此](https://stackoverflow.com/a/2068371/1106035)链接获取视频缩略图。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T10:19:35.070

每个 youtube 链接都有 4 个缩略图

```
 http://img.youtube.com/vi/<insert-youtube-video-id-here>/0.jpg
   http://img.youtube.com/vi/<insert-youtube-video-id-here>/1.jpg
   http://img.youtube.com/vi/<insert-youtube-video-id-here>/2.jpg
    http://img.youtube.com/vi/<insert-youtube-video-id-here>/3.jpg 
```

这段代码非常适合

例如我有这个链接：

```
 http://www.youtube.com/watch?v=HPwyVw_6vsQ&feature=youtu.be 
```

youtube 视频 ID 是：

```
 HPwyVw_6vsQ 
```

从这个链接生成的缩略图是：

```
 http://img.youtube.com/vi/HPwyVw_6vsQ/1.jpg 
```

这很容易使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T16:55:35.957

如果您有 YouTube 观看页面 URL，并且想要获取缩略图 URL，那么“正确”的方法是使用 oEmbed：

[http://apiblog.youtube.com/2009/10/oembed-support.html](http://apiblog.youtube.com/2009/10/oembed-support.html)

这样您就不必尝试从 URL 中解析视频 ID。

但是......您真正应该做的是使用`iframe`嵌入在您的网页（或`UIWebView`）中显示视频。YouTube API 服务条款涵盖了访问 YouTube 内容的受支持方式：

[https://developers.google.com/youtube/terms](https://developers.google.com/youtube/terms)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-22T10:02:37.543

如果有人想要总部图片，请使用此链接

```
https://img.youtube.com/vi/<insert-youtube-video-id-here>/maxresdefault.jpg 
```

# clojure - lein 项目命名指南

> ID：12727908
> 
> 赞同：2
> 
> 时间：2012-10-04T13:03:30.497
> 
> 标签：clojure, leiningen

我想要一个指向调用时命名项目的正确方法的指针

`lein new <projectname>`

我的问题与我最近提出的一个[问题有关。](https://stackoverflow.com/questions/12718658/why-does-java-complain-that-namespace-is-not-found)

具体来说，我见过的很多项目都使用破折号，比如 clojure-csv。然而，我无法让项目在 Windows 上运行。

所以我的具体问题是有没有一种方法可以在调用`lein new`时创建项目，以及在使用 lein 在 Windows（在我的情况下为 Windows 7）上创建 Clojure 项目时，我应该期望对 project.clj 和 core.clj 进行哪些其他调整？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:53:20.123

您可以将灵感形式搜索`clojars.org`到[https://clojars.org/search?q=the](https://clojars.org/search?q=the)。

模式似乎是`namespace/name-with-dashes`或`name-with-dashes`。例如 ：

```
 cool-stuff
 stackoverflow/cool-stuff
 com.stackoverflow/cool-stuff 
```

命名命名空间的推荐方法是使用反向域，如`com.stackoverflow.subsection`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T18:01:21.633

有一个“官方”***禁止进一步的项目谁的名字是 Clojure 这个词的双关语**......请，这必须停止;-) 特别是动词 + jure 形式的项目名称

*   所以如果你的项目是 foo 请不要把它命名为 foojure

像 compojure (compose+jure) 这样的现有项目很酷，因为它们早于这种集体意图。

*绝不是官方的;-)

# c++ - 停止 boost::asio 操作的规范方法

> ID：12727909
> 
> 赞同：0
> 
> 时间：2012-10-04T13:03:30.750
> 
> 标签：c++, multithreading, boost-asio

我`boost::asio::io_service`在执行某些操作的线程中运行：

```
struct clicker
{
    clicker(boost::asio::io_service& io) : timer_(io) { wait_for_timer(); }

    void stop() { timer_.cancel(); }

    void wait_for_timer()
    {
        timer_.expires_from_now(std::chrono::milliseconds(500));
        timer_.async_wait(std::bind(&clicker::wait_completed, this, _1));
    }

    void wait_completed(const boost::system::error_code& err)
    {
        if (!err) {
            std::cout << "Click" << std::endl;
            wait_for_timer();
        }
    }

    boost::asio::steady_timer timer_;
};

int main()
{
    boost::asio::io_service io;
    clicker cl(io);

    std::thread io_thread(&boost::asio::io_service::run, &io);

    while (true) { // the run loop
        // gather input
        if (user_clicked_stop_button()) { cl.stop(); break; }
    }

    io_thread.join();
} 
```

现在调用`stop()`应该取消等待计时器并触发`wait_completed()`错误。但是，我们在这里有一个竞争条件：有时，`stop()`将在`wait_for_timer()`运行时和在`async_wait`调度之前调用。然后，代码将无限期地运行。

处理这种情况的推荐方法是什么？`clicker`内部测试的布尔标志`wait_completed`？互斥体？

## 更新：

这只是一个简化的例子，在实际代码中我有几个操作在运行`io_service`，所以这里调用`io_service::stop()`不是一个选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:15:35.927

将操作发布到 io_service 线程：

```
void stop() 
{ 
  timer_.get_io_service().post([=] { timer_.cancel(); }); 
} 
```

（如果您的编译器与 c++11 不兼容，请使用`bind`来创建 lambda。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:11:33.897

我想你想调用[io.stop()](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/reference/io_service.html)来停止 io_service 对象。

# asp.net - 使用 .Append 属性创建动态表并显示数据表中的值

> ID：12727915
> 
> 赞同：0
> 
> 时间：2012-10-04T13:03:46.573
> 
> 标签：asp.net

我想在我的动态表中显示数据表值，我循环了一遍，但我不能成功。dtplants 是我的数据表。你能帮我用下面的代码吗？

```
 StringBuilder builder = new StringBuilder();
        builder.Append("<table class=table1>");
        builder.Append("<thead>");
        builder.Append("<th>Configuration</th>");
        builder.Append("<th>Key Figures</th>");
        for (int i = 0; i < numberofplants; i++)
        {
            builder.Append("<th>");
            builder.Append(Convert.ToString(dtplants.Rows[i]));
            builder.Append("</th>");               
        }
        builder.Append("<thead>");
        builder.Append("<table>");

        Literal1.Text = builder.ToString(); 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:07:14.410

你必须调整你`end tags`的才能关闭你的桌子

```
 ....    
  builder.Append("</thead>"); 
  builder.Append("</table>"); 
```

你的代码

```
 StringBuilder builder = new StringBuilder();
    builder.Append("<table class=table1>");
    builder.Append("<thead>");
    builder.Append("<th>Configuration</th>");
    builder.Append("<th>Key Figures</th>");
    for (int i = 0; i < numberofplants; i++)
    {
        builder.Append("<th>");
        builder.Append(Convert.ToString(dtplants.Rows[i]));
        builder.Append("</th>");               
    }
    builder.Append("</thead>");
    builder.Append("</table>"); 
```

# iphone - 通过我的应用程序从 iphone 的内置日历中提取信息

> ID：12727923
> 
> 赞同：0
> 
> 时间：2012-10-04T13:04:19.873
> 
> 标签：iphone, ios, xcode, calendar, xcode4.3

我是一名新的 xcode 开发人员，我想问一下如何将用户在 iphone 日历中编写的事件放入我的应用程序中？可能吗？

谢谢你！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:12:58.893

您必须查看[活动套件](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/EventKitProgGuide/Introduction/Introduction.html)以从内置日历中获取详细信息

# vb.net - 在 DataTables 中处理多层数据？

> ID：12727928
> 
> 赞同：0
> 
> 时间：2012-10-04T13:04:55.380
> 
> 标签：vb.net, datatable

我想使用 DataTables 来存储多个“层”数据。一些程序为我计算平均值、绝对值和百分比。这三层具有完全相同的有序行和列，但值会发生变化。当我删除或插入一行时，其他两个表也必须进行类似的操作。有人有好主意吗？

进一步说明：

```
 Dim absTable as DataTable
 Dim meanTable as DataTable
 Dim percTable as DataTable
 abstable.rows(2).delete 
```

我如何保证这个操作也在其他两个表上执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:46:56.327

您可能想要使用 a`DataSet`而不是 multiple `DataTable`。因为，在 中`DataSet`，您可以`DataTable`使用`.Tables(Index|TableName)`属性来操作多个，确保您在正确的表上进行操作。你需要一个更高层次的对象来做你想做的事。

因此，如果要删除所有表中的一行，只需循环所需的表并调用该`delete`方法：

```
Dim aDataSet as New DataSet 
Dim absTable as New DataTable 
Dim meanTable as New DataTable 
Dim percTable as New DataTable

aTable.Tables.Add(absTable) aTable.Tables.Add(meanTable) aTable.Tables.Add(percTable)

For each table as DataTable in aDataSet.Tables
    table.rows(2).delete 
Next 
```

您还可以使用交叉表引用来确保或操作或做任何您想做的事情。

```
aDataSet.Tables(0) = aDataSet.Tables(1) 'only if the talbes 0 and 1 have same columns 
```

希望这是你所要求的。

有关 DatsSet 的更多详细信息，请参阅[http://msdn.microsoft.com/en-us/library/system.data.dataset.aspx](http://msdn.microsoft.com/en-us/library/system.data.dataset.aspx)。

# authentication - Joomla onUserAuthenticate

> ID：12727931
> 
> 赞同：0
> 
> 时间：2012-10-04T13:05:02.280
> 
> 标签：authentication, joomla, authorization

在 Joomla 源代码中，我找到了一个方法 caled `onUserAuthenticate`，在 API 中找不到（通过谷歌），但它的功能类似于[onLoginUser](http://docs.joomla.org/Plugin/Events/User#onLoginUser) ...所以，在登录/密码检查后，我需要通过运行更多代码这个功能。结果，我有`true/false`- 根据它我需要完全设置用户的授权。即使用户的登录名/密码正确，但我的代码返回 false -> 授权失败...

我正在尝试类似的东西：

```
functionon UserAuthenticate($credentials,$options,&$response){

  jimport('joomla.user.helper');

  $username=mysql_real_escape_string($credentials['username']);
  $password=mysql_real_escape_string(md5($credentials['password']));

  //my code returns $result

  if($result!=NULL){
    $response->status=JAUTHENTICATE_STATUS_SUCCESS;
    $response->error_message='';
  }
  else{
    $response->status=JAUTHENTICATE_STATUS_FAILURE;
    $response->error_message=JText::_('JGLOBAL_AUTH_INVALID_PASS');
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:25:16.577

onUserAuthenticate 是一个事件而不是一个方法。您使用插件来侦听 Joomla 事件，在这种情况下，通常用户插件会侦听此事件。当事件发生时，您的代码将运行。 [http://docs.joomla.org/Plugin](http://docs.joomla.org/Plugin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:37:46.100

你可以试试这个自定义登录表单 -

```
$app = JFactory::getApplication();
$data = array();
$data['return']     = '';
$data['username']   = JRequest::getVar('username', '', 'method', 'username');
$data['password']   = JRequest::getString('password', '', 'post', JREQUEST_ALLOWRAW);

// Get the log in options.
$options = array();

// Get the log in credentials.
$credentials = array();
$credentials['username'] = $data['username'];
$credentials['password'] = $data['password'];

// Perform the log in.
$error = $app->login($credentials, $options);

if (!JError::isError($error)) {
    $response->status=JAUTHENTICATE_STATUS_SUCCESS;
    $response->error_message='';                    
}else{
    $response->status=JAUTHENTICATE_STATUS_FAILURE;
    $response->error_message=JText::_('JGLOBAL_AUTH_INVALID_PASS');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T09:16:25.917

如果您想对功能“onUserAuthenticate”进行身份验证解决方案，您应该自己检查用户凭据是否有效并且您使用以下代码执行此操作：

```
 function onUserAuthenticate($credentials, $options, &$response)
   {
    $response->type = 'Joomla';
    // Joomla does not like blank passwords
    if (empty($credentials['password'])) {
      $response->status = JAuthentication::STATUS_FAILURE;
      $response->error_message = JText::_('JGLOBAL_AUTH_EMPTY_PASS_NOT_ALLOWED');
      return false;
    }

    // Initialise variables.
    $conditions = '';

    // Get a database object
    $db   = JFactory::getDbo();
    $query  = $db->getQuery(true);

    $query->select('id, password');
    $query->from('#__users');
    $query->where('username=' . $db->Quote($credentials['username']));

    $db->setQuery($query);
    $result = $db->loadObject();

    if ($result) {
      $parts  = explode(':', $result->password);
      $crypt  = $parts[0];
      $salt = @$parts[1];
      $testcrypt = JUserHelper::getCryptedPassword($credentials['password'], $salt);

      if ($crypt == $testcrypt) {

        $user = JUser::getInstance($result->id); // Bring this in line with the rest of the system
        $response->email = $user->email;
        $response->fullname = $user->name;

        $response->status = JAuthentication::STATUS_SUCCESS;
        $response->error_message = '';

        print_r("You login correct Sir");
        die();        

      } else {
        print_r("you enter wrong credential");
        die();

        $response->status = JAuthentication::STATUS_FAILURE;
        $response->error_message = JText::_('JGLOBAL_AUTH_INVALID_PASS');

      }

    } else {

    print_r("you enter blank credential");
    die();
      $response->status = JAuthentication::STATUS_FAILURE;
      $response->error_message = JText::_('JGLOBAL_AUTH_NO_USER');

    }
      return true;
   } 
```

# sql - 应用基于存储在单独表中的多个标准的计算？

> ID：12727932
> 
> 赞同：0
> 
> 时间：2012-10-04T13:05:05.250
> 
> 标签：sql, database, vba, ms-access, database-design

我需要创建一个包含“规则”的表格，例如覆盖价格和对股票价格应用百分比增长。

例如：

销售价格是从包含产品信息的表中选择的，然后系统需要检查另一个表，以查看该客户/产品/产品类别是否有针对它设置的任何价格规则，例如百分比折扣或要覆盖的设置价格。

如何访问首先检查表中是否存在相关客户，然后检查产​​品是否存在，然后检查类别是否存在；然后应用存储的价格变化？

到目前为止，我们有一个包含标题的 PriceRules 表：

**规则 ID | 客户ID | 产品编号 | 类别 | 价格 | 百分比 | 申请日期 | 申请者**

计划是将不同的变量存储在每列中，然后根据列进行搜索。

我相信这听起来真的很令人困惑，所以我会尽快回答查询。

提前致谢，

**鲍勃·P**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:14:44.407

您可以使用 SQL JOIN 获得这些结果：

```
SELECT ...
Product.ProductPrice as Price,
CustomerRules.ProductPriceRules as Rules
FROM Product
LEFT JOIN Customer
ON ...
LEFT JOIN CustomerRules
ON Product.ProductID = CustomerRules.ProductID
AND Customer.CustomerID = CustomerRules.CustomerID 
```

LEFT JOIN 将仅返回匹配结果（如果存在），如果记录不存在，则所有 CustomerRules 字段将包含 NULL 值

# sql-server - 我可以按未知数量的列分组吗？

> ID：12727942
> 
> 赞同：1
> 
> 时间：2012-10-04T13:05:37.343
> 
> 标签：sql-server, sql-server-2008, tsql, sql-server-2005, stored-procedures

我目前正在尝试重新编写一个存储过程以考虑我们其中一个表的规范化。在原始过程中，我们有两个表：

```
CREATE TABLE #t_batch
(batch_id   integer, 
thread_group NVARCHAR(60),
dye_code_1  NVARCHAR(10),
dye_conc_1  NUMERIC(19, 7),
dye_code_2  NVARCHAR(10),
dye_conc_2  NUMERIC(19, 7),
dye_code_3  NVARCHAR(10),
dye_conc_3  NUMERIC(19, 7),
dye_code_4  NVARCHAR(10),
dye_conc_4  NUMERIC(19, 7),
dye_code_5  NVARCHAR(10),
dye_conc_5  NUMERIC(19, 7),
dye_code_6  NVARCHAR(10),
dye_conc_6  NUMERIC(19, 7))

CREATE TABLE #t_group
(group_id   INTEGER IDENTITY(1, 1),
dye_code_1  NVARCHAR(10),
dye_conc_1  NUMERIC(19, 7),
dye_code_2  NVARCHAR(10),
dye_conc_2  NUMERIC(19, 7),
dye_code_3  NVARCHAR(10),
dye_conc_3  NUMERIC(19, 7),
dye_code_4  NVARCHAR(10),
dye_conc_4  NUMERIC(19, 7),
dye_code_5  NVARCHAR(10),
dye_conc_5  NUMERIC(19, 7),
dye_code_6  NVARCHAR(10),
dye_conc_6  NUMERIC(19, 7),
thread_group NVARCHAR(60), 
num_batches INTEGER) 
```

在一些操作之后，#t_batch 填充了许多记录。然后我们通过以下方式将数据插入#t_group：

```
INSERT INTO #t_group
(dye_code_1, dye_conc_1, dye_code_2, dye_conc_2, dye_code_3, dye_conc_3,
dye_code_4, dye_conc_4, dye_code_5, dye_conc_5, dye_code_6, dye_conc_6, 
thread_group, num_batches)
SELECT dye_code_1, dye_conc_1, dye_code_2, dye_conc_2, dye_code_3, dye_conc_3, 
dye_code_4, dye_conc_4, dye_code_5, dye_conc_5, dye_code_6, dye_conc_6, 
thread_group, COUNT(batch_id_fk)
FROM #t_batch
GROUP BY dye_code_1, dye_conc_1, dye_code_2, dye_conc_2, dye_code_3, dye_conc_3, 
dye_code_4, dye_conc_4, dye_code_5, dye_conc_5, dye_code_6, dye_conc_6, 
thread_group
ORDER BY dye_code_1, dye_conc_1, dye_code_2, dye_conc_2, dye_code_3, dye_conc_3, 
dye_code_4, dye_conc_4, dye_code_5, dye_conc_5, dye_code_6, dye_conc_6, 
thread_group 
```

因此，我们有一系列记录，这些记录按染料列分组，每个独特的染料组合及其浓度都有一个独特的 group_id。此外，每个组都有一个批次记录的计数。

然而，由于实际上对批次的染料数量没有限制，所以表格已经标准化：

```
CREATE TABLE #t_batch
(batch_id   INTEGER, 
thread_group NVARCHAR(60))

CREATE TABLE #t_batch_dye
(batch_id_fk INTEGER, 
stage   INTEGER,
sequence    INTEGER, 
dye_code    NVARCHAR(10),
dye_conc    NUMERIC(19,7))

CREATE TABLE #t_group
(group_id   INTEGER IDENTITY(1, 1),
thread_group NVARCHAR(60), 
num_batches INTEGER)

CREATE TABLE #t_group_dye
(group_id   INTEGER, 
stage   INTEGER,
sequence    INTEGER,
dye_code    NVARCHAR(10),
dye_conc    NUMERIC(19,7)) 
```

现在，我的问题是：假设我们填充了#t_batch 和#t_batch_dye，并且#t_batch 中的每条记录都有不同数量的#t_batch_dye 记录，我如何将记录插入到#t_group 中，每个唯一组合都有一个唯一的group_id染料及其浓度以及每组的批次计数？

这是我可以使用 PIVOT 关键字的东西吗？我在网上找到的示例似乎都假设预先知道旋转字段的数量。

非常感谢，

大卫

苏格兰格拉斯哥

* * *

更新：

我所做的是使用一个函数，它返回一个串联的代码和 concs 字符串，并用它来对数据进行分组。

```
DECLARE @dyes NVARCHAR(2000)  

 SELECT @dyes = ISNULL(@dyes,'') + dye_code + ' ' + convert(nvarchar,      requested_dye_conc) + ' '
 FROM   #t_batch_dye
 WHERE  batch_id_fk = @batch_id
 ORDER BY dye_code ASC 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T15:05:59.727

您假设`PIVOT`和更传统的交叉表查询方法期望您提前知道需要多少列是正确的。那时，您需要使用一些动态 SQL 来获得您所追求的：

*   [SQL Server 中的动态透视](http://www.codeproject.com/Articles/27776/Dynamic-Pivoting-in-SQL-Server)
*   [SQL Server 动态 PIVOT 查询？](https://stackoverflow.com/questions/10404348/sql-server-dynamic-pivot-query)
*   [SQL Server 中具有动态列的数据透视表](https://stackoverflow.com/questions/7822004/pivots-with-dynamic-columns-in-sql-server)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T15:42:01.863

一个部分答案，而不是一个理想的答案：如果您知道永远不会超过 20 种染料组合，您可以创建另一个临时表

```
select b.thread_group, 
case when d.sequence=1  then d.dye_code end as code1,
case when d.sequence=1  then d.dye_conc end as conc1,
case when d.sequence=2  then d.dye_code end as code2,
case when d.sequence=2  then d.dye_conc end as conc2,
case when d.sequence=3  then d.dye_code end as code3,
case when d.sequence=3  then d.dye_conc end as conc3,
<lots of boring copy&paste...>
case when d.sequence=20 then d.dye_code end as code20,
case when d.sequence=20 then d.dye_conc end as conc20
from #t_batch t, #t_batch_dye d
where t.batch_id  = d.batch_id 
```

然后使用所有code1到conc20从中选择您的组。它不漂亮，但很清楚。而且我知道它首先否定了将表格标准化的全部意义！祝你好运。

# knockout.js - Knockoutjs css，函数调用

> ID：12727945
> 
> 赞同：1
> 
> 时间：2012-10-04T13:05:47.600
> 
> 标签：knockout.js

我正在阅读官方网站上的教程：

[Knockout 单页应用教程](http://learn.knockoutjs.com/#/?tutorial=webmail)

这是视图：

```
<!-- Folders -->
<ul class="folders" data-bind="foreach: folders">
    <li data-bind="text: $data, 
                   css: { selected: $data == $root.chosenFolderId() },
                   click: $root.goToFolder"></li>
</ul> 
```

和脚本：

```
function WebmailViewModel() {
    // Data
    var self = this;
    self.folders = ['Inbox', 'Archive', 'Sent', 'Spam'];
    self.chosenFolderId = ko.observable();

    // Behaviours    
    self.goToFolder = function(folder) { self.chosenFolderId(folder); };    
};

ko.applyBindings(new WebmailViewModel()); 
```

我不明白两件事：

1.  'click:' 事件正在调用 javascript 函数 goToFolder，但是，没有参数，它如何知道单击哪个文件夹来设置 selectedFolderId ？

2.  如果我错了，请纠正我，这行 css: { selected: $data == $root.chosenFolderId() } 表示如果当前选择的对象 $data 等于 selectedFolderId()，因此选择名称的 css 是 enable 吗？

祝大家欢呼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:17:19.883

以下是答案：

1.  默认情况下，敲除将当前上下文传递给被调用的函数。在您的情况下，这是`$data`包含以下字符串之一的对象“收件箱”、“存档”、“已发送”、“垃圾邮件”。

2.  是的你是对的。这意味着`selected`css 类将应用于`<li>`$`data`等于`chosenFolderId`视图模型属性的元素。

# ios - 如何在 iOS 中绘制带纹理的按钮？

> ID：12727957
> 
> 赞同：0
> 
> 时间：2012-10-04T13:06:48.353
> 
> 标签：ios, opengl-es, uibutton, core-graphics, textures

我想在 iOS 应用程序中绘制纹理按钮。我不会使用 Photoshop 而不是 CoreGraphics，因为我想要一个通用的解决方案，它可以与不同大小的按钮一起使用。它的基本原理是什么？我需要什么技术？

我的第一步是子类化 UIButton，但我怎样才能给它添加斜角效果呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T13:18:11.520

最好的方法是继承你的按钮类（你的新类必须继承自 UIButton）。通过这样做，您也可以为您的按钮提供一些定制的详细信息.. 下面是一个示例..

```
//interface of custom button class
 @interface myButton : UIButton
    {
        int orderNo;

        CAGradientLayer *gradientLayer;
        CALayer *wrapperLayer;
        CGColorRef _borderColor;

    }
    @property (assign) int orderNo;
    @property (nonatomic) CGColorRef _borderColor;
    @property (nonatomic, retain) CALayer *wrapperLayer;
    @property (nonatomic, retain) CAGradientLayer *gradientLayer;

    - (void)setBorderColor:(CGColorRef)color;
    - (void)setCornerRadius:(float)radius; 
```

实施..

```
#import "Button.h"

@implementation Button
@synthesize orderNo,wrapperLayer,_borderColor,gradientLayer;

- (id)initWithFrame:(CGRect)frame
{if ((self = [super initWithFrame:frame])) {
    CGFloat radius = self.bounds.size.width / 2;
    CGFloat borderWidth = self.bounds.size.width / 10;

    self.layer.backgroundColor = [[UIColor blackColor] CGColor];
    self.layer.borderColor = [[UIColor whiteColor] CGColor];
    self.layer.borderWidth = borderWidth;
    self.layer.cornerRadius = radius;

    if ([self.layer respondsToSelector:@selector(setShadowOffset:)])
        self.layer.shadowOffset = CGSizeMake(0.25, 0.25);

    if ([self.layer respondsToSelector:@selector(setShadowColor:)])
        self.layer.shadowColor = [[UIColor blackColor] CGColor];

    if ([self.layer respondsToSelector:@selector(setShadowRadius:)])
        self.layer.shadowRadius = borderWidth;

    if ([self.layer respondsToSelector:@selector(setShadowOpacity:)])
        self.layer.shadowOpacity = 0.75;

    [self setNeedsDisplay];
}
    return self;
}
- (void)drawRect:(CGRect)rect {
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGContextSetShouldAntialias(ctx, true);

    CGFloat xsize = self.bounds.size.width / 6;
    CGFloat borderWidth = self.bounds.size.width / 10;

    CGContextSaveGState(ctx);

    CGContextSetLineCap(ctx, kCGLineCapRound);
    CGContextSetLineWidth(ctx, borderWidth);
    CGContextSetStrokeColorWithColor(ctx, [[UIColor whiteColor] CGColor]);

    CGFloat width = self.bounds.size.width;
    CGPoint start1 = CGPointMake(width / 2 - xsize, width / 2 - xsize);
    CGPoint end1 = CGPointMake(width / 2 + xsize, width / 2 + xsize);
    CGPoint start2 = CGPointMake(width / 2 + xsize, width / 2 - xsize);
    CGPoint end2 = CGPointMake(width / 2 - xsize, width / 2 + xsize);

    CGContextBeginPath(ctx);
    CGContextMoveToPoint(ctx, start1.x, start1.y);
    CGContextAddLineToPoint(ctx, end1.x, end1.y);
    CGContextStrokePath(ctx);

    CGContextBeginPath(ctx);
    CGContextMoveToPoint(ctx, start2.x, start2.y);
    CGContextAddLineToPoint(ctx, end2.x, end2.y);
    CGContextStrokePath(ctx);

    CGContextRestoreGState(ctx);
}
- (void)setBorderColor:(CGColorRef)color
{
    [[self layer] setBorderColor:color];
    [[self layer] setNeedsDisplay];
}

- (void)setCornerRadius:(float)radius
{
    [[self layer] setCornerRadius:radius];
    // and get the wrapper for the gradient layer too
    [wrapperLayer setCornerRadius:radius];
}

@end 
```

# pysvn - pysvn和乌龟颠覆

> ID：12727958
> 
> 赞同：0
> 
> 时间：2012-10-04T13:06:50.050
> 
> 标签：pysvn

我必须承认我在使用 pysvn 模块时遇到了极大的困难。与其他模块不同，这带来了相当多的工作，不幸的是，它不像包含电池的蟒蛇座右铭。我有一个 win 64 ，windows 7 和运行乌龟 svn1.7.5。我的python版本是2.7.2。谁能解释我如何在没有得到 ImportError 的情况下进行简单的 import pysvn ？

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:03:38.207

虽然我有一台 64 位机器，但安装 32 位 python27 而不是 64 位 python2.7 解决了这个问题。

# java - log4j 到数据库

> ID：12727959
> 
> 赞同：-2
> 
> 时间：2012-10-04T13:06:51.540
> 
> 标签：java, log4j

我使用 log4j 向数据库报告错误：

```
log4j.rootLogger=DEBUG, CUBRID

# CUBRID Database
log4j.appender.CUBRID = org.apache.log4j.jdbc.JDBCAppender
log4j.appender.CUBRID.driver = org.postgresql.Driver
log4j.appender.CUBRID.user = postgres
log4j.appender.CUBRID.password = postgres
log4j.appender.CUBRID.URL = jdbc:postgresql://localhost:5432/logs
log4j.appender.CUBRID.sql = INSERT INTO LOGS VALUES('%x','%d{yyyy-MM-dd  HH:mm:ss.SSS}','%C','%p','%m')
log4j.appender.CUBRID.layout=org.apache.log4j.PatternLayout 
```

我有一个代码：

```
public class LogTest extends BaseDAO<Object> {

    public void show()
    {
        Logger log = Logger.getLogger(LogTest.class.getName());
        log.info("Wystartowal");
        log.warn("Trwanie aplikacji");
        try {
            if ( 1 / 0 == 0 ) {
                System.out.println("Czekaj...");
            }
        } catch( Exception ex) {
            log.error("Komunikat bledu", ex);
        }
        log.fatal("Koniec aplikacji");
    }
} 
```

所有写入数据库，但它保存了我所有的日志，我想只写我使用命令 log.warn()、log.fatal() 等给自己的内容。怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T13:09:16.220

这可以通过调整 logLevel 来完成。尝试像这样更改值

```
log4j.rootLogger=WARN, CUBRID 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T13:09:11.970

您必须将日志级别更改为`DEBUG`.

```
log4j.rootLogger=WARN, CUBRID 
```

本教程非常全面：[log4j 简介](http://logging.apache.org/log4j/1.2/manual.html)。

* * *

仅记录您自己的信息消息，但允许 >=`WARN`更改为以下内容的其他警告：

```
log4j.rootLogger=WARN, CUBRID

log4j.logger.LogTest = INFO, CUBRID
log4j.additivity.LogTest = false

# CUBRID Database
log4j.appender.CUBRID = org.apache.log4j.jdbc.JDBCAppender
log4j.appender.CUBRID.driver = org.postgresql.Driver
log4j.appender.CUBRID.user = postgres
log4j.appender.CUBRID.password = postgres
log4j.appender.CUBRID.URL = jdbc:postgresql://localhost:5432/logs
log4j.appender.CUBRID.sql = INSERT INTO LOGS VALUES('%x','%d{yyyy-MM-dd  HH:mm:ss.SSS}','%C','%p','%m')
log4j.appender.CUBRID.layout=org.apache.log4j.PatternLayout 
```

在这里，我假设这`LogTest`不是任何包的一部分。如果您已将其放入包中，则更改两行以包含该包（这里我使用`my.package`：

```
log4j.logger.my.package.LogTest = INFO, CUBRID
log4j.additivity.my.package.LogTest = false 
```

* * *

现在，如果您想`INFO`在包中的所有记录器上应用级别，请执行以下操作：

```
log4j.logger.my.package = INFO, CUBRID
log4j.additivity.my.package = false 
```

甚至在顶级包上：

```
log4j.logger.my = INFO, CUBRID
log4j.additivity.my = false 
```

# java - 如何在android上将几个视频合二为一

> ID：12727960
> 
> 赞同：0
> 
> 时间：2012-10-04T13:06:52.563
> 
> 标签：java, android, video

在 Android 的一个剪辑中组合几个视频的最佳方式是什么？

我需要将几个视频一个接一个地连接起来，然后用它们制作一部长电影吗？

有什么建议从哪里开始？是否有某种图书馆或可以帮助我的东西？

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:52:42.063

您可以为此使用[ffmpeg](http://en.wikipedia.org/wiki/FFmpeg)。当然，这不是 Java 库，因此您必须使用[NDK](http://developer.android.com/tools/sdk/ndk/index.html)。有多种方法可以将视频文件与 ffmpeg 连接起来，如下[所述](http://ffmpeg.org/faq.html#How-can-I-join-video-files_003f)：

> 一些多媒体容器（MPEG-1、MPEG-2 PS、DV）允许通过仅连接文件来连接视频。
> 
> 因此，您可以连接您的多媒体文件，首先将它们转码为这些特权格式，然后使用不起眼的 cat 命令（或在 Windows 下同样不起眼的副本），最后转码回您选择的格式。
> 
> ```
> ffmpeg -i input1.avi -qscale:v 1 intermediate1.mpg
> ffmpeg -i input2.avi -qscale:v 1 intermediate2.mpg
> cat intermediate1.mpg intermediate2.mpg > intermediate_all.mpg
> ffmpeg -i intermediate_all.mpg -qscale:v 2 output.avi 
> ```

链接的文档还显示了其他连接方式。

# c# - 为测试创建自定义 http 标头 -

> ID：12727962
> 
> 赞同：1
> 
> 时间：2012-10-04T13:06:57.873
> 
> 标签：c#, http-headers, request, response

我正在用 c# 编写一个授权管理模块。凭据将从 http 标头中提取。我的问题是：我只定义了 http 标头的外观（txt 文件）。所以我需要在代码中准备标题进行测试，（在default.aspx的标题中添加键和值）：

```
Response.AppendHeader("contractualData", "03346-b0-t-vg");
Response.AppendHeader("Location", "Default.aspx");
Response.Redirect("page2.aspx"); 
```

并且比当我阅读 page2.aspx 页面加载中的标题时

```
Request.Headers["contractualData"]; 
```

我看不到新添加的键和值。（我可以看到它在 IEWatch 的响应标头中，但我无法使用 request.headers 读取它。我也尝试过使用 Response.AddHeader 或 Response.Headers.Add。同样的行为！） 我应该怎么办？

一般来说，我如何准备自定义标头并使用该标头测试我的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:28:17.250

我找到了解决方案。创建请求标头并发布它。以下代码有效：

```
protected void Page_Load(object sender, EventArgs e)

        {

            string path = Request.Url.Scheme + "://" + Request.Url.Host + ":" + Request.Url.Port + "/";

            myRedirect(path + "TestRedirectTo.aspx", "test", "testValue");

        }

        protected void myRedirect(string url, string headerName, string headerValue)

        {

            Response.Clear();

            System.Net.WebRequest request = System.Net.WebRequest.Create(url);

            request.Headers.Add(headerName, headerValue);

            System.Net.WebResponse response = request.GetResponse();

            System.IO.StreamReader sr = new System.IO.StreamReader(response.GetResponseStream(), System.Text.Encoding.Default);

            string content = sr.ReadToEnd();

            sr.Close();

            Response.Write(content);

            sr.Close();

            Response.End();

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:36:12.060

除非我让事情倒退——在发送页面请求中用于发送标题。在接收页面请求时应该使用读取它们。

# c# - 如何通过代码检测我的机器是 x32 还是 x64？

> ID：12727965
> 
> 赞同：0
> 
> 时间：2012-10-04T13:07:13.793
> 
> 标签：c#

我的应用程序需要知道机器上是否安装了程序才能工作，并且我想知道**Program Files 文件**夹是否仅存在于（32 位机器）中或是否还有**Program Files (x86)**文件夹（64位机）。

通过我的代码执行此操作的最佳方法是什么？

我在机器上需要的应用程序是 Wireshark，它可以安装在 32 位和 64 位（在适当的 Program Files 文件夹中），我不知道该怎么做，因为我正在使用 Wireshark 制作安装程序文件并尝试找到最好的选择知道要安装什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T13:13:15.293

要动态获取正确的程序文件 (x86) 路径，请使用

```
Environment.GetFolderPath(Environment.SpecialFolder.ProgramFilesX86) 
```

在 32 位系统上，这将返回常规的 Program Files 目录。在 64 位系统上，这将返回 Program Files (x86) 目录。

据我了解，在您的具体情况下，您希望在 64 位系统上安装 64 位 Wireshark，因此您希望启动 64 位安装程序，除非它已经可用。如果是这种情况，您可以完全忽略 Program Files (x86)，只检查 Program Files。但是，如果您想使用现有的 32 位 Wireshark（如果可用），则需要检查可以安装 Wireshark 的每个位置：检查 ProgramFiles，如果未找到，请检查 ProgramFilesX86，如果未找到，请启动安装程序。可以根据`Environment.Is64BitOperatingSystem`（来自 Furqan 的回答）确定要使用的安装程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:09:20.380

这样您就可以获得程序文件的路径：

```
string programFilePath = Environment.Is64BitOperatingSystem

   // If 64 bit locate the 32 bit folder
   ? @"C:\Program Files (x86)\"

   // Else 32 bit
   : @"C:\Program Files\"; 
```

使用 System.Environment：

```
bool is64Bit = System.Environment.Is64BitOperatingSystem; 
```

或者

使用环境变量：

```
System.Environment.GetEnvironmentVariable("PROCESSOR_ARCHITECTURE") 
```

或者

使用 P/Invoke：

```
public static ProcessorArchitecture GetProcessorArchitecture()
{
    SYSTEM_INFO si = new SYSTEM_INFO();
    GetNativeSystemInfo(ref si);
    switch (si.wProcessorArchitecture)
    {
        case PROCESSOR_ARCHITECTURE_AMD64:
            return ProcessorArchitecture.Amd64;

        case PROCESSOR_ARCHITECTURE_IA64:
            return ProcessorArchitecture.IA64;

        case PROCESSOR_ARCHITECTURE_INTEL:
            return ProcessorArchitecture.X86;

        default:
            return ProcessorArchitecture.None; // that's weird :-)
    }
} 
```

和

```
[DllImport("kernel32.dll")]
private static extern void GetNativeSystemInfo(ref SYSTEM_INFO lpSystemInfo);

private const int PROCESSOR_ARCHITECTURE_AMD64 = 9;
private const int PROCESSOR_ARCHITECTURE_IA64 = 6;
private const int PROCESSOR_ARCHITECTURE_INTEL = 0;

[StructLayout(LayoutKind.Sequential)]
private struct SYSTEM_INFO
{
    public short wProcessorArchitecture;
    public short wReserved;
    public int dwPageSize;
    public IntPtr lpMinimumApplicationAddress;
    public IntPtr lpMaximumApplicationAddress;
    public IntPtr dwActiveProcessorMask;
    public int dwNumberOfProcessors;
    public int dwProcessorType;
    public int dwAllocationGranularity;
    public short wProcessorLevel;
    public short wProcessorRevision;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T13:21:21.493

在回答OP的具体问题...

```
if (!Directory.Exists(Environment.SpecialFolder.ProgramFilesX86.ToString())) {
    if (Directory.Exists(Environment.SpecialFolder.ProgramFiles.ToString())) {
        \\ Program Files folder exists, but Program Files (x86) does not
    } else {
        \\ Neither folder exists
    }
} else {
    if (Directory.Exists(Environment.SpecialFolder.ProgramFiles.ToString())) {
        \\ Both folders exist
    } else {
        \\ Program Files (x86) exists but Program Files does not
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T13:21:42.767

你可以使用 WMI

```
using System.Management;

WqlObjectQuery wqlQuery =new WqlObjectQuery("select * from Win32_Processor where         DeviceID='CPU0' AND AddressWidth='64' ");
ManagementObjectSearcher searcher =new ManagementObjectSearcher(wqlQuery);

if (searcher.Get().Count > 0)
   Console.Write("64 Bit"); 
```

一旦你知道它是什么类型的系统，你可以检查特定的目录

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T13:12:27.777

您应该查看这两个文件夹，因为在 64 位计算机上安装 32 位应用程序是非常合法的，即使存在 64 位版本。

另外，不要检查硬编码的文件夹名称，`Environment.GetSpecialFolder`而是使用。

如果您要查找的程序在注册表上留下标记，则可以改为检查。这将是最好的解决方案，因为用户几乎可以在任何地方安装程序。

安装的 Wireshark 会写入一个您可以查找的卸载注册表项。见[这里](http://ask.wireshark.org/questions/7978/uninstalling-wireshark-164)。检查，而不是其他一切。

# mysql - 以下查询的mysql更新错误

> ID：12727970
> 
> 赞同：1
> 
> 时间：2012-10-04T13:07:16.930
> 
> 标签：mysql, jsp

我正在使用以下查询进行更新。我的更新函数和连接字符串在 jar 文件中。我正在使用 JSP useBean 从 jar 文件中调用函数。我能够在数据库上运行选择查询。只是在更新时遇到问题。为什么我现在更早收到此错误，它工作正常。

查询

```
String sql="INSERT INTO tm_visitor(VDT,VID,VISITOR_TEXT,COMPANY_TEXT,CONTACT,PERSON_TO_MEET,DEPARTMENT_TEXT,FLOOR)SELECT REPLACE(LEFT(NOW(), 10), '-', ''), LPAD(COALESCE(MAX(VID) + 1, 000001),6,'0'),?,?,?,?,?,? FROM tm_visitor"; 
```

查询2

```
String sql2="INSERT INTO tm_belonging(BID,BELONGING_TYPE,BELONGING_TEXT)VALUES(LAST_INSERT_ID(),?,?)"; 
```

错误：

```
Error in DBConnect  com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Y
ou have an error in your SQL syntax; check the manual that corresponds to your M
ySQL server version for the right syntax to use near '?,?,?,?,?,? FROM tm_visito
r' at line 1
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in
your SQL syntax; check the manual that corresponds to your MySQL server version
for the right syntax to use near '?,?,?,?,?,? FROM tm_visitor' at line 1
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)

        at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)

        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Sou
rce)
        at java.lang.reflect.Constructor.newInstance(Unknown Source)
        at com.mysql.jdbc.Util.handleNewInstance(Util.java:406)
        at com.mysql.jdbc.Util.getInstance(Util.java:381)
        at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1030)
        at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:956)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3536)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3468)
        at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1957)
        at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2107)
        at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2642)
        at com.mysql.jdbc.StatementImpl.executeUpdate(StatementImpl.java:1634)
        at com.mysql.jdbc.StatementImpl.executeUpdate(StatementImpl.java:1553)
        at com.vms.util.MyDBConnect.exeUpdate(Unknown Source)
        at org.apache.jsp.applicationservices.fileshare.vm.apps.admin.visitorSub
mit_jsp._jspService(visitorSubmit_jsp.java:148)
        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper
.java:377)
        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:3
13)
        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Appl
icationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationF
ilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperV
alve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextV
alve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.j
ava:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.j
ava:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineVal
ve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.jav
a:298)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java
:857)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.proce
ss(Http11Protocol.java:588)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:48
9)
        at java.lang.Thread.run(Unknown Source)
Error in DBConnect  com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Y
ou have an error in your SQL syntax; check the manual that corresponds to your M
ySQL server version for the right syntax to use near '?,?)' at line 1
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in
your SQL syntax; check the manual that corresponds to your MySQL server version
for the right syntax to use near '?,?)' at line 1
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)

        at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)

        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Sou
rce)
        at java.lang.reflect.Constructor.newInstance(Unknown Source)
        at com.mysql.jdbc.Util.handleNewInstance(Util.java:406)
        at com.mysql.jdbc.Util.getInstance(Util.java:381)
        at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1030)
        at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:956)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3536)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3468)
        at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1957)
        at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2107)
        at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2642)
        at com.mysql.jdbc.StatementImpl.executeUpdate(StatementImpl.java:1634)
        at com.mysql.jdbc.StatementImpl.executeUpdate(StatementImpl.java:1553)
        at com.vms.util.MyDBConnect.exeUpdate(Unknown Source)
        at org.apache.jsp.applicationservices.fileshare.vm.apps.admin.visitorSub
mit_jsp._jspService(visitorSubmit_jsp.java:151)
        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper
.java:377)
        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:3
13)
        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Appl
icationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationF
ilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperV
alve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextV
alve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.j
ava:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.j
ava:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineVal
ve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.jav
a:298)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java
:857)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.proce
ss(Http11Protocol.java:588)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:48
9)
        at java.lang.Thread.run(Unknown Source) 
```

编辑

JSP代码：

```
<jsp:useBean id="mdc" class="com.vms.util.MyDBConnect"/>
boolean status=false;

String VisitorName="",Company="",Contact="",WhomeToMeet="",Department="",DepartmentFloor="";
String Belonging="",BType="",Belonging2="",BType2="",Belonging3="",BType3="";
String Btype="",Belong="";
try
    {

VisitorName=(String)request.getParameter("VisitorName");
        out.println(","+VisitorName);
        Company=(String)request.getParameter("Company");
        out.println(","+Company);
        Contact=(String)request.getParameter("Contact");
        out.println(","+Contact);
        WhomeToMeet=(String)request.getParameter("WhomeToMeet");
        out.println(","+WhomeToMeet);
        Department=(String)request.getParameter("Department");
        out.println(","+Department);
        DepartmentFloor=(String)request.getParameter("DepartmentFloor");
        out.println(","+DepartmentFloor);
        BType=(String)request.getParameter("BType0");
        out.println(","+BType);
        Belonging=(String)request.getParameter("Belonging0");
        out.println(","+Belonging);
String sql="INSERT INTO tm_visitor(VDT,VID,VISITOR_TEXT,COMPANY_TEXT,CONTACT,PERSON_TO_MEET,DEPARTMENT_TEXT,FLOOR)SELECT REPLACE(LEFT(NOW(), 10), '-', ''), LPAD(COALESCE(MAX(VID) + 1, 000001),6,'0'),?,?,?,?,?,? FROM tm_visitor";
        //System.out.println(sql);
        String sql2="INSERT INTO tm_belonging(BID,BELONGING_TYPE,BELONGING_TEXT)VALUES(LAST_INSERT_ID(),?,?)";
        //System.out.println(sql2);
mdc.exeUpdate(sql);
mdc.exeUpdate(sql2);
}
    catch(Exception e)
    {
        e.printStackTrace();
        //System.out.println("eRROR>>\n"+e);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:52:38.447

每当你使用 ? 在您的陈述中，意味着它将被参数“替换”。

执行查询时必须绑定这些参数。

使用标准 JDBC 语法，它将类似于：

```
 PreparedStatement prepStmt = connection.prepareStatement(sql);
    prepStmt.setString(1, paramValue1);
    prepStmt.setInt(2, paramValue2);
    ....
    prepStmt.setInt(n, paramValueN);
    prepStmt.execute(); 
```

希望能帮助到你

# typescript - 如何在 tsc 上执行分离的 .ts 文件？

> ID：12727971
> 
> 赞同：1
> 
> 时间：2012-10-04T13:07:17.953
> 
> 标签：typescript, tsc

我制作了两个 TypeScript 文件`A.ts`和`TestA.ts`.

### A.ts

```
class A {
    constructor( private name : string ){}
    disp(){ console.log( this.name ); }
} 
```

### 测试A.ts

```
/// <reference path="A.ts"/>
var a1 = new A( "Jun" );
a1.disp(); 
```

*   `tsc TestA.ts`
    好的。它制作 A.js 和 TestA.js。

*   `tsc TestA.ts -e`
    吴。“参考错误：`A`未定义”

*   `tsc A.ts TestA.ts -e`
    也会引发同样的错误

我哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T14:52:46.503

`/// <reference path="A.ts"/>`仅在编译时用于引用另一个文件中的类型。当你使用这个结构时，TypeScript 假定这些类型在运行时已经以某种方式可用。也就是说，您有责任自己加载它们。

您想要做的是在*运行时*引用其他文件。这是使用模块和`import`and`export`关键字完成的。

尝试这个：

**A.ts**

```
export class A {   
  constructor(private name : string ) {}
  disp() {
    console.log(this.name);
  }
} 
```

**测试A.ts**

```
import a = module('./a');
var a1 = new a.A( "Jun" );
a1.disp(); 
```

然后你就可以用它`tsc TestA.ts -e`来编译和执行代码了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T14:06:10.070

您的代码中有一个错误（缺少“）”）。这个编译：

```
class A {   
  constructor(private name : string ) {}
  disp() {
    console.log(this.name);
  }
} 
```

编辑 ：

关于您的初始问题，您需要导出第一个模块，然后将其导入第二个文件。

**您需要使用外部模块加载器（如 RequireJS）才能执行它，因为编译器将实现 require 函数调用（如 CommonJS 模块）。**

请参阅：[模块加载如何使用 TypeScript](https://stackoverflow.com/questions/12681155/how-does-module-loading-work-with-typescript)

A.ts

```
export class A {
  constructor(private name : string ){}
  disp() {
    console.log(this.name);
  }
} 
```

测试A.js

```
var A = require("./A")
var a1 = new A.A("Jun");
a1.disp(); 
```

# xaml - 鼠标悬停时使 XAML 控件“置于”其他控件之上

> ID：12727973
> 
> 赞同：0
> 
> 时间：2012-10-04T13:07:26.167
> 
> 标签：xaml

我有三个按钮，在 XAML 中一个在另一个之上，如下所示：

```
<Grid>
    <Button
        Width="50"
        Height="50"
        Background="Red"/>
    <Button
        Margin="10"
        Width="50"
        Height="50"
        Background="Blue"/>
    <Button
        Margin="20"
        Width="50"
        Height="50"
        Background="Green"/>
</Grid> 
```

当鼠标悬停在它们上方时，如何更改它们的 Z-Order？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:13:56.543

把这个放到`Grid.Resources`

```
<Style TargetType="{x:Type Button}">
    <Style.Triggers>
        <Trigger Property="IsMouseOver" Value="True">
            <Setter Property="Panel.ZIndex" Value="99999"/>
        </Trigger>
    </Style.Triggers>
</Style> 
```

当`IsMouseOver`为 false 时，按钮实例取回其原始 zindex 值

# java - 我怎样才能自动装箱这个课程？

> ID：12727978
> 
> 赞同：0
> 
> 时间：2012-10-04T13:07:41.290
> 
> 标签：java, boxing, autoboxing

我有以下课程：

```
public class IntegerKey extends Number implements Comparable<IntegerKey> {

    private Integer m_key;

    public IntegerKey(Integer key) {
        m_key = key;
    }

    public IntegerKey(int key) {
        m_key = key;
    }

} 
```

我想使用这个类作为关注：

假设我有以下泛型：

```
Map<IntegerKey, MyCache> map = new HashMap<IntegerKey, MyCache>();

map.put(5, new MyCache()); 
```

这不编译，为什么？我不想这样做：

```
map.put(new IntegerKey(5), new MyCache()); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T13:09:34.683

> 这不编译，为什么？

因为没有从`int`to的隐式转换`IntegerKey`。您不能在 Java 中创建用户定义的隐式转换。你被语言定义的那些卡住了。

您*要么*必须以某种方式显式获取 a `IntegerKey`，要么必须将地图的类型更改为`Map<Integer, MyCache>`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T13:09:51.250

> 这不编译，为什么？

只有原始类型会自动装箱到它们的包装器中。Java 中不允许其他组合。

> 我不想这样做：

```
map.put(new KeyInteger(5), new MyCache()); 
```

在这种情况下，不要使用 KeyInteger，只需使用 Integer。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T13:10:04.010

自动装箱仅适用于`java.lang`. 在您的示例中，您可以尝试`IntegerKey`完全删除并简单地使用`Integer`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-20T17:25:43.167

Seeing the comment concerning the special functionality of `IntegerKey`, it seems logical to wrap the functionality you are asking for in a new class (MHashMap in the following examples):

```
import java.util.HashMap;

class IntegerKey extends Number implements Comparable<IntegerKey> {
  private Integer m_key;
  public IntegerKey(Integer key) {
    m_key = key;
  }

  public IntegerKey(int key) {
    m_key = key;
  }
  //...Functionality
  //...required methods to include to actually test
  @Override
  public int compareTo (IntegerKey arg0) {
    // TODO Auto-generated method stub
    return 0;
  }

  @Override
  public double doubleValue () {
    // TODO Auto-generated method stub
    return 0;
  }

  @Override
  public float floatValue () {
    // TODO Auto-generated method stub
    return 0;
  }

  @Override
  public int intValue () {
    // TODO Auto-generated method stub
    return 0;
  }

  @Override
  public long longValue () {
    // TODO Auto-generated method stub
    return 0;
  }

}
class MyCache {}
class MHashMap extends HashMap<IntegerKey, MyCache> {
  public void put (int key, MyCache value) {
    super.put(new IntegerKey(key), value);
  }
  public void put (Integer key, MyCache value) {
    super.put(new IntegerKey(key), value);
  }
  //...Useful to include other wrappings
  public MyCache get (int key) {
    return super.get(new IntegerKey(key));
  }
  public MyCache get (Integer key) {
    return super.get(new IntegerKey(key));
  }
}
public class AutoboxFix {
  public static void main (String[] args) {
    //needed to explicitly declare map as MHashMap for "override" to work
    MHashMap map = new MHashMap();
    //compiles
    map.put(5, new MyCache());
    //... get probably works with your extended functionality
  }
} 
```

This should provide the functionality your looking for. The get method will depend on the methods in `Comparable`. There may be more methods that you want to reimplement to auto cast from `int` or `Integer` to `IntegerKey`, but you should be able to use the rest of the HashMap functionality normally. It is necessary to declare map as `MHashMap` type, because using `Map` won't compile. It would be sensible to separate classes into their own files and make them public.

This approach won't work if it's absolutely necessary to declare map as `Map<IntegerKey, MyCache>`. You could make a static method where ever your using map and such to do the casting for you:

```
public class AClass {
  public static void myPutMethod (Map<Integer, MyCache> map, int key,
       MyCache value) {
    map.put(new IntegerKey(key), value);
  }
} 
```

Use:

```
myPutMethod(map, 5, new MyCache()); 
```

Then you can define more methods for `Integer` and `Map.get`.

# r - Create block matrices with identical value in R

> ID：12727980
> 
> 赞同：4
> 
> 时间：2012-10-04T13:07:46.993
> 
> 标签：r, matrix

I want to create k blocks with identical values in a n*n matrix (k can be divided exactly by the row number times the columns number as n*n ):

for example, when n = 4 and k = 4, (k can be divided exactly by 4*4=16), a matrix is create like this:

```
1 1 2 2
1 1 2 2
3 3 4 4
3 3 4 4 
```

How can I do this without a for loop?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-04T13:13:08.667

There's a fantastically useful mathematical operator called a [*Kronecker product*](https://en.wikipedia.org/wiki/Kronecker_product):

```
m1 <- matrix(1:4,nrow=2,byrow=TRUE)
m2 <- matrix(1,nrow=2,ncol=2)
kronecker(m1,m2) 
```

The `Matrix` package has methods for Kronecker products of sparse matrices (`?"kronecker-methods"`), so that you can easily build huge sparse patterned matrices as long as you can find a way to express the pattern in terms of Kronecker products.

# c# - 选择 C# 超时

> ID：12727981
> 
> 赞同：0
> 
> 时间：2012-10-04T13:07:47.573
> 
> 标签：c#, select

我有以下问题：我正在等待选择套接字。

```
ArrayList a = new ArrayList();    
a.Add(Socket1);   
print_time_before  
Select(a, null, null, 8000000);  
print_time_after 
```

1.  我可以看到打印之间的时间不是 8 秒，尽管没有其他应用程序写入该套接字。怎么了 ？

2.  ia a 包含套接字，这意味着没有可读取的内容或存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:11:57.417

它在[手册](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.select(v=vs.100).aspx)中：

> 如果您处于侦听状态，可读性意味着对 Accept 的调用将成功而不会阻塞。如果您已经接受了连接，则可读性意味着数据可供读取。在这些情况下，所有接收操作都会成功而不会阻塞。可读性还可以指示远程 Socket 是否已关闭连接；在这种情况下，对 Receive 的调用将立即返回，返回零字节。
> 
> 当至少一个感兴趣的套接字（checkRead、checkWrite 和 checkError 列表中的套接字）满足其指定条件或超过 microSeconds 参数时，Select 返回，以先到者为准。将 microSeconds 设置为 -1 指定无限超时。

那么，套接字的状态是什么？

# dotnet-httpclient - 在 C# 中使用 Post 方法 HttClient 时请求超时

> ID：12727984
> 
> 赞同：0
> 
> 时间：2012-10-04T13:07:56.540
> 
> 标签：dotnet-httpclient, wcf-rest-starter-kit

在我的应用程序中，我使用一段代码将内容发送到一个带有 URL 的 Web 代理，每个帖子之间的间隔为 2 秒。在以下代码中发布的消息以静态字符串的形式给出，但在原始应用程序代码中将是动态的。

```
for (ic = 0; ic < 30; ic++)
{
    using(HttpClient httpClient = new HttpClient())
    {
        Encoder encoder = new Encoder(); //This is a class which we created
        AuthorizationHeaders authorizationHeaders = encoder.getAuthorization(PARTNER_ID, PARTNER_KEY, URL, "POST", "application/xml");

        httpClient.DefaultHeaders.Add("Accept", "*/*");
        httpClient.DefaultHeaders.Add("Authorization", authorizationHeaders.getAuthorizationHeader());
        httpClient.DefaultHeaders.Add("Expires", authorizationHeaders.getExpiresHeader());
        httpClient.DefaultHeaders.Add("origPartnerId", "MyWebSite");
        httpClient.DefaultHeaders.Add("appId", "440");
        httpClient.DefaultHeaders.Add("Content-Type", "application/xml");
        string inputUrl = ConfigurationManager.AppSettings["url"];
        String detailRequest = "<?xml version=\"1.0\" encoding=\"utf-8\"?><Message><Details><Name>Bob</Name><Age>45</Age></Details></Message>";
        var content = HttpContent.Create(detailRequest, Encoding.UTF8, "application/xml");
        response = httpClient.Post(inputUrl, content).EnsureStatusIsSuccessful();
        Thread.Sleep(2000);
    }
} 
```

但是我在联系代理时遇到了以下异常。我不是一直都明白，消息确实经过了一段时间，但最终，这个异常来了。

*GetResponse 超时 ---> System.TimeoutException: GetResponse 超时 ---> System.Net.WebException ---> System.Net.WebException: 该操作在 Microsoft 的 System.Net.HttpWebRequest.GetResponse() 处超时.Http.HttpWebRequestTransportStage.HttpTransportAsyncResult.PopulateWebResponseSync(WebRequest request, IAsyncResult result) at Microsoft.Http.HttpWebRequestTransportStage.HttpTransportAsyncResult.PopulateWebResponse(HttpTransportAsyncResult self, IAsyncResult result, Func`3 getResponse) --- 内部异常堆栈跟踪结束 --- - -- 内部异常堆栈跟踪结束 --- 在 Microsoft.Http.AsyncResult.End[TAsyncResult](IAsyncResult result, Boolean throwException) 在 Microsoft.Http.HttpWebRequestTransportStage.EndProcessRequestAndTryGetResponse(IAsyncResult 结果, HttpResponseMessage&response, Object& state) 在 Microsoft.Http.Http.HttpWebRequestTransportStage.ProcessRequestAndTryGetResponse(HttpRequestMessage request, HttpResponseMessage& response, Object& state) 在 Microsoft.Http.HttpStageProcessingAsyncResult.NextRequest(HttpStageProcessingAsyncResult self) --- End of internal exception stack trace--- 在 Microsoft。 Http.HttpStageProcessingAsyncResult.Complete(HttpStage stage, Exception e) at Microsoft.Http.HttpStageProcessingAsyncResult.NextRequest(HttpStageProcessingAsyncResult self) at Microsoft.Http.HttpClient.Send(HttpRequestMessage request) at Microsoft.Http.HttpClient.Send(HttpMethod method, Uri uri , RequestHeaders headers, HttpContent content) 在 Microsoft.Http.HttpMethodExtensions.Method(HttpClient client, HttpMethod method, Uri uri, HttpContent body) 在 Microsoft。Http.HttpMethodExtensions.Method（HttpClient 客户端，HttpMethod 方法，String uri，HttpContent 正文）*

但是这个代理只是重定向到另一个代理。所以我也直接尝试了那个。在那里，我能够成功地执行此操作 2 或 3 次，但之后又产生了另一个异常。我又试了一次，但这一次，第一次尝试本身就出现了异常。我等了一段时间，然后再次尝试，令人惊讶的是，它确实经历了 2 或 3 次，然后异常再次出现。这次我得到的例外是不同的，就是这个......

*Microsoft.Http.HttpStageProcessingException ---> System.Net.WebException ---> System.Net.WebException：底层连接已关闭：连接意外关闭。在 System.Net.HttpWebRequest.GetResponse() 在 Microsoft.Http.HttpWebRequestTransportStage.HttpTransportAsyncResult.PopulateWebResponseSync(WebRequest request, IAsyncResult result) 在 Microsoft.Http.HttpWebRequestTransportStage.HttpTransportAsyncResult.PopulateWebResponse(HttpTransportAsyncResult self, IAsyncResult result, Func`3 getResponse) --- End of inner exception stack trace --- at Microsoft.Http.AsyncResult.End[TAsyncResult](IAsyncResult result, Boolean throwException) at Microsoft.Http.AsyncResult.End[TAsyncResult](IAsyncResult result) at Microsoft.Http.AsyncResult`1.在 Microsoft.Http.HttpWebRequestTransportStage.ProcessRequestAndTryGetResponse(HttpRequestMessage request, HttpResponseMessage& response, Object& state) 在 Microsoft.Http.HttpStageProcessingAsyncResult 的 Microsoft.Http.HttpWebRequestTransportStage.EndProcessRequestAndTryGetResponse(IAsyncResult 结果, HttpResponseMessage& 响应, Object& 状态) 的结束(IAsyncResult 结果)。 NextRequest(HttpStageProcessingAsyncResult self) --- 内部异常堆栈跟踪结束 --- Microsoft.Http.HttpStageProcessingAsyncResult.Complete(HttpStage stage, Exception e) 在 Microsoft.Http.HttpStageProcessingAsyncResult.NextRequest(HttpStageProcessingAsyncResult self) 在 Microsoft.Http.HttpStageProcessingAsyncResult ..ctor（HttpStageProcessingAsyncState 状态，AsyncCallback 回调，对象用户）在 Microsoft.Http.HttpClient。在 Microsoft.Http.HttpClient.Send(HttpMethod method, Uri uri, HttpContent content) 在 Microsoft.Http.HttpMethodExtensions 在 Microsoft.Http.HttpClient.Send(HttpMethod method, Uri uri, HttpContent content) 在 Microsoft.Http.HttpMethodExtensions 发送（HttpRequestMessage 请求） .Method(HttpClient 客户端, HttpMethod 方法, Uri uri, HttpContent body) 在 Microsoft.Http.HttpMethodExtensions.Method(HttpClient 客户端, HttpMethod 方法, String uri, HttpContent body) 在 Microsoft.Http.HttpMethodExtensions.Post(HttpClient 客户端, String uri , HttpContent 正文）Microsoft.Http.HttpMethodExtensions.Post（HttpClient 客户端，字符串 uri，HttpContent 正文）上的 Http.HttpMethodExtensions.Method（HttpClient 客户端，HttpMethod 方法，字符串 uri，HttpContent 正文）Microsoft.Http.HttpMethodExtensions.Post（HttpClient 客户端，字符串 uri，HttpContent 正文）上的 Http.HttpMethodExtensions.Method（HttpClient 客户端，HttpMethod 方法，字符串 uri，HttpContent 正文）*

在这方面的任何帮助将不胜感激，因为过去几天我一直在关注此问题，并且我也阅读了一些文章，甚至还阅读了 stackoverflow 中的一些问题，但没有任何帮助。提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:24:51.473

一些公司的代理规则会导致 POST 请求出现问题。

GET 请求工作正常。检查您的操作系统代理设置是否已禁用。

Windows 7：控制面板 > Internet 选项 > 连接（选项卡）。

然后单击“LAN 设置”按钮，然后取消选中“为 LAN 使用代理服务器”。

或者，尝试让您的网络管理员将您正在使用的连接添加到排除列表中。

# java - jax ws获取客户端IP

> ID：12727989
> 
> 赞同：11
> 
> 时间：2012-10-04T13:08:13.880
> 
> 标签：java, web-services, jax-ws

我正在尝试使用 JAX-WS 检索客户端 IP，我使用了：

```
@Resource
WebServiceContext wsContext; 

MessageContext mc = wsContext.getMessageContext();
HttpServletRequest req = (HttpServletRequest)mc.get(MessageContext.SERVLET_REQUEST); 

log.info("["+req.getRemoteAddr()+"]) 
```

我得到一个`NullPointerException`in req，mc 不为空。

我的问题是使用哪个 JAR，`HttpServletRequest`因为我使用的是 Java 独立应用程序？

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-03T22:37:27.007

如何获取 jax-ws 服务的 webservice 客户端地址取决于您是否：

*   将 Web 服务作为 servlet（在 Java EE 容器中）运行，或者
*   将 Web 服务作为独立应用程序（Java SE 6 或 7）运行。

**Servlet Webservices** 如果您的 Web 服务是一个 servlet，那么请使用包含以下内容的第一篇文章的解决方案：

```
HttpServletRequest req = (HttpServletRequest)mc.get(MessageContext.SERVLET_REQUEST); 
```

**应用程序 Web 服务：JAX-WS 2.1** 如果您使用的是 Java 应用程序 (Java SE)，则您没有 servlet 上下文，因此`HttpServletRequest`将为空。您需要使用后面帖子的方法，即具有以下行的方法：

```
HttpExchange exchange = (HttpExchange)msgx.get(JAXWSProperties.HTTP_EXCHANGE); 
```

注意：这只适用于 JAX-WS 2.1 堆栈/参考实现。

**应用程序 Web 服务：JAX-WS 2.2**

在 JAX-WS 2.2 中， 的值`JAXWSProperties.HTTP_EXCHANGE`已从“com.sun.xml.ws.http.exchange”（它在 JAX-WS 2.1 中的值）更改为“com.sun.xml.internal.ws.http.exchange” ”。这意味着调用

```
HttpExchange exchange = (HttpExchange)msgx.get(JAXWSProperties.HTTP_EXCHANGE);
InetSocketAddress remoteAddress = exchange.getRemoteAddress();
String remoteHost = remoteAddress.getHostName(); 
```

将在 JAX-WS 2.2 中返回 null，您将`NullPointerException`在第二行得到 a，更重要的是，无法获取客户端的远程地址。

如果您改用以下调用（使用文字值，呃！）：

```
HttpExchange exchange = (HttpExchange)msgx.get("com.sun.xml.ws.http.exchange");
InetSocketAddress remoteAddress = exchange.getRemoteAddress();
String remoteHost = remoteAddress.getHostName(); 
```

您将获得一个非空值，并且能够获得客户端地址。

因此，如何获取客户端的远程地址取决于您如何部署代码（servlet 或应用程序）以及您使用的 JAX-WS 版本（JAX-WS 2.1 或 2.2）。

**建议**

*   **Servlet**：如果您在 servlet 中部署 JAX-WS Web 服务，则`MessageContext.SERVLET_REQUEST`无论您使用什么版本的 JAX-WS 2，您都可以始终使用调用来获取属性。

*   **应用程序**：如果您在应用程序中部署 JAX-WS Web 服务，`HttpExchange exchange = (HttpExchange)msgx.get("com.sun.xml.ws.http.exchange");`无论您使用的是 JAX-WS 2.1 还是 2.2，您始终可以使用该调用，因此在代码中使用字符串文字可能比使用符号更好`JAXWSProperties.HTTP_EXCHANGE`.

与使用文字一样令人反感的是，最好有更健壮的代码可以跨 JAX-WS 版本工作，而不是更漂亮的代码不能。

我希望 JAX-WS 团队在某个时候纠正这个问题，并`JAXWSProperties.HTTP_EXCHANGE`再次将 的值恢复到有用的值。

非常感谢早期的海报展示了查找 JAX-WS 客户端远程地址的各种方法。这些信息非常有用:)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-10T09:34:28.080

如果我们使用嵌入式 Http 服务器，我们可以像这样获取客户端 IP：

```
@Resource
WebServiceContext wsContext; 
```

然后在网络方法中：

```
@WebMethod
MessageContext msgx = wsContext.getMessageContext();
HttpExchange exchange = (HttpExchange)msgx.get(JAXWSProperties.HTTP_EXCHANGE);
log.info("[" + exchange.getRemoteAddress().getAddress() + "]"); 
```

希望它可以帮助别人

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T13:20:18.460

这是一个答案，我认为您应该在 WebMethod 注释方法中初始化 mc 和 req 。 [获取 Web 服务的客户端 IP 地址](https://stackoverflow.com/questions/1641594/geting-the-ip-address-of-a-client-for-a-webservice)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-05-21T08:43:27.707

以下代码可能有效：

```
HttpServletRequest request = (HttpServletRequest) messageContext.get("transport.http.servletRequest");
String hostIp = request.getRemoteAddr(); 
```

# php - 如何在 mySQL 数据库中插入在 datepicker 中选择的日期

> ID：12727991
> 
> 赞同：0
> 
> 时间：2012-10-04T13:08:17.157
> 
> 标签：php, mysql

我搜索了这个网站和其他网站，但我只找到插入手动日期值或使用日期选择器的方法。现在我想将日期选择器中的日期插入到 mySQL 中的日期字段中。

```
$date = $_POST['calendar2b'];

$sql4 = "Insert into geschiedenis(login_fk, status_fk, code_fk, uitleendatum,inleverdatum,uitleenuur,inleveruur) Values ('".$login."','beschikbaar','".$code."',Now(),DATE_ADD(curdate(), INTERVAL 1 DAY),curtime(),curtime())"; 
```

如果我现在使用这可行，但我需要使用日期选择器中的日期。

# qt - 使用 QPrinter 打印 VtkBmpWriter

> ID：12727992
> 
> 赞同：1
> 
> 时间：2012-10-04T13:08:19.980
> 
> 标签：qt, vtk, qprinter

我可以通过执行以下操作将我的渲染窗口保存为位图：

```
vtkWindowToImageFilter *winToImg = vtkWindowToImageFilter::New();
winToImg->SetInput(mRenderWindow);
vtkBMPWriter *writer = vtkBMPWriter::New();
writer->SetInput(winToImg->GetOutput());
writer->SetFileName(aFilename.c_str());
writer->Write(); 
```

我可以使用 QPrinter 打印准备好的位图图像：

```
QPrinter printer;
QPrintDialog *dialog = new QPrintDialog(&printer);
dialog->setWindowTitle(tr("Print Document"));
if (dialog->exec() != QDialog::Accepted) {
    return;
}
QImage testbild("C:\\test.bmp");
QPainter painter(&printer);
painter.drawImage(QPoint(0, 0), testbild);
painter.end(); 
```

但我不知道如何将两者结合起来并从 vtkbmpwriter 打印图像。如何从 vtkbmpwriter 提取 bmp 图像并将其传递给画家/打印机？

# javascript - 动态创建的按钮在 IE 不兼容模式下不起作用

> ID：12727993
> 
> 赞同：0
> 
> 时间：2012-10-04T13:08:23.487
> 
> 标签：javascript, jquery, html

所以我有大量的 div，当用户将鼠标悬停在 div 上时，我正在做的是显示一个按钮。当用户点击按钮时，它会做一些事情。目前的问题是，在 IE 中，当我单击按钮时，按钮就会消失并且什么也不做。当它打开兼容模式时，它可以在 Chrome FF 甚至 IE 中运行。代码如下。

```
 function highlightUnmarked ( field ) {
    $( field ).addClass("hover-markedfields");

    var selectedText = $('<div>').append( $( field ).clone() ).html();

    if ( ( selectedText.search( 'triangle-isosceles' ) == -1 )
        && ( selectedText.search( 'triangle-isosceles-blue' ) == -1 )   ) {

        var markButtonsDiv = document.createElement( "div" );
        markButtonsDiv.id = "markButton";

        var initialLink = document.createElement('a');
        initialLink.setAttribute('href', '#');
        initialLink.setAttribute('id', 'initial');
        initialLink.onclick = function() { initial() };

        var initialImg = document.createElement('img');
        initialImg.setAttribute('src', '<?php echo Yii::app()->params['DIRECTORY_NAME'] ?>/images/initial.png');

        initialLink.appendChild( initialImg );

        markButtonsDiv.appendChild( initialLink );

        $(field ).prepend( markButtonsDiv );

    } 

} 
```

刚刚调用的函数不执行。我已将警报作为函数的第一部分，它只是没有被调用。最糟糕的是没有抛出错误，所以我似乎无法弄清楚出了什么问题。

下面是被调用函数的代码。它只是抛出一个弹出窗口。

```
 function initial () {

        $.blockUI({
            message: $('#popup2'),
            centerY: true,
            css: {
                top:  ($(window).height() - 200) /2 + 'px',
                left: ($(window).width() ) /2 + 'px',
                width: '400px',
                height: '',
                margin:'50px 10px',
                padding: '10px 20px 5px 5px',
                color: 'black'
            }
        });
} 
```

谢谢你的帮助。

编辑：对不起，简单的错误是阻止它在 FF 中工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:16:51.933

你的代码不能在 IE 中运行吗？如果你的代码甚至不能在 chrome 中运行，那么下面是解决方案......

Jquery UI 组件与 GoogleChrome 版本 18+ 兼容。这可能是您的问题。

# c# - 在并行 for 循环中添加到 sortedlist 错误：ArgumentException 未被用户代码错误处理

> ID：12727994
> 
> 赞同：0
> 
> 时间：2012-10-04T13:08:26.337
> 
> 标签：c#, collections, sortedlist, parallel.foreach

```
items.AsParallel().ForAll(i =>
{
string[] splitter = i.Split('\t');
Console.WriteLine(string.Format("Converted: {0} - {1} - {2}", splitter[0], splitter[1], splitter[2]));
productList.Add(Convert.ToInt32(splitter[0]), splitter[1] + "\t" + splitter[2]);
// the above line is where the error prompts
}); 
```

“items”是一个 ConcurrentStack，它的值是产品 id、名称和详细信息，由选项卡分隔。

前任：

items[0] = 1\tshampoo\t清洁你的头发

我有一个并行循环，将项目拆分为 3 个数组索引（拆分器），然后将其添加到“productList”，“productList”是一个 SortedList。当我将拆分后的值添加到 productList 时，id 现在应该是键，名称 + 详细信息是值。

前任：

分离器 [0] = 1; 分离器[1] = 洗发水；splitter[2] = 清洁头发

产品列表 [0] 键 = 1；productList[1] value = 洗发水\t清洁你的头发

奇怪的是，有时程序运行完美，有时会提示错误 ArgumentException is unhandled by user code error。这是错误的详细信息：“偏移量和长度超出了数组的范围或计数大于从索引到源集合末尾的元素数。”。使用并行与此有关吗？问题是我必须使用并行来更快地执行循环。

注：数据仅为样本。

更新：我尝试使用 var splitter 更改 string[] 拆分器并收到此错误：“目标数组不够长。检查 destIndex 和长度，以及数组的下限。”。我在即时窗口中检查了产品列表，并在出现此错误之前添加了一些数据。

# ruby-on-rails - Rails 中的资产丢失（也使用片段缓存）。没有内存缓存

> ID：12727995
> 
> 赞同：0
> 
> 时间：2012-10-04T13:08:28.027
> 
> 标签：ruby-on-rails, caching, memcached, fragment-caching

在 Heroku 上使用 Rails 3.1.1，运行两个 web dyno。

我目前不使用内存缓存。我正在[成功使用片段缓存](https://stackoverflow.com/questions/12724876/cache-only-the-main-content-in-rails)。

我的日志中有很多缓存未命中（而且很少有新鲜的）。应该注意的是，facebox-2（实际上获得了“新鲜缓存”）在缓存片段**之外。**

如您所见，据我所知，未命中并没有跟随“商店”，它们实际上并没有被缓存：

```
cache: [GET /assets/facebox2-e2da8b69b260f5c7f70e22a7b3e6bb26.css] fresh
cache: [GET /assets/application-282064ad715b6798765bdeb777974e9b.js] miss
cache: [GET /assets/seasons/fall_top_background2.png] miss
cache: [GET /assets/tell-a-friend-afd54b062dd0d649f6595b96bf7450a2.png] miss
cache: [GET /assets/banners/annons-884c9fbe7f6805249247ef02438fca08.jpg] miss
cache: [GET /assets/admarker-c709fa0ac510720b8ffb56e3a63a8bb3.jpg] miss
cache: [GET /assets/gifts/skolett-b97b0e5b262df6e15b95470f06917758.jpg] miss
cache: [GET /assets/closelabel.png] miss
cache: [GET /assets/loading.gif] miss 
```

**生产.rb**

```
 config.serve_static_assets = true
  config.action_controller.perform_caching = true 
```

我`rake assets:precompile`在本地成功以生产模式运行并成功将其上传到 Heroku。

[我认为我的问题与这个问题](https://stackoverflow.com/questions/9256815/cache-miss-with-rails-3-2-and-page-caching-in-development-anyone-else)密切相关，尽管我在生产模式下运行它（应该没有任何区别，对吧？）。

我已经对 Memcached 进行了一些实验，但我仍然是如何使用它的初学者。

我个人的看法是，我试图从缓存中获取缓存的图像，这会破坏验证。例如，在我正在寻找的碎片缓存中

`banners/annons-884c9fbe7f6805249247ef02438fca08.jpg`

而它可能会与另一个“代码”一起缓存，例如

```
banners/annons-121b1b12b12b1b1b11b1b.jpg 
```

这个对吗？

对于我的问题：

1.  我和[这个问题](https://stackoverflow.com/questions/9256815/cache-miss-with-rails-3-2-and-page-caching-in-development-anyone-else)有同样的问题吗？可以这么说，是我在缓存中缓存吗？

2.  Memcached 和 Rake::Cache 是处理这个问题的方法吗？如果是这样，我更希望将碎片化的 html 页面存储为文件，而不是存储在内存缓存中（它们是 1.000 x 3 Mb）。我怎样才能做到这一点？

3.  fragment_caching 实际上并没有在 Heroku 上创建这些文件是否正确，因为应用程序没有写权限？

4.  这是否可能会影响我的应用程序的性能（它很慢）？

5.  简而言之，解决这个问题的简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T05:43:11.780

我开始使用 Memcache，这解决了这个问题。为什么，我不太确定，但现在它按预期工作（Miss Store ---> Fresh）。