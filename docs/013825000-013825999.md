# StackOverflow 问答 13825000-13825999

# actionscript-2 - AS2 固定大小的影片剪辑

> ID：13825000
> 
> 赞同：1
> 
> 时间：2012-12-11T17:06:03.383
> 
> 标签：actionscript-2, lightbox, scale, movieclip, moviecliploader

我目前正在使用 Flash 网站，当单击特定热点时，它会在顶部打开一个新的 .swf。它打开的这个 .swf 的样式类似于 Lightbox。它有一个 (x) 来关闭卸载电影，以及一个 (<) 和 (>) 来浏览图像。

问题是，在调整资源管理器窗口时，flash 元素会缩放到调整后的大小，并保持成比例。

我想要的是，虽然它在 HTML 页面中，但只有背景 Flash 图像可以缩放，但要让覆盖的“灯箱”.swf 具有固定的宽度/高度，因此它永远不会根据大小进行缩放用户的窗口。

我找到了一个例子来帮助解决这个问题：

[http://newsletters.plainpicture.com/static/newsletters/com/news-1208/index.html](http://newsletters.plainpicture.com/static/newsletters/com/news-1208/index.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T15:04:03.807

您的“灯箱”swf 是如何实现的？它是充当外部 swf 电影容器的实际 html 灯箱吗？或者它是您在同一个 swf 网站电影中的编码灯箱？

如果它是 html 灯箱，那么您必须提供有关它是哪种灯箱的信息，并且可能查看灯箱文档。

如果它是同一 Flash 电影中的“灯箱”，则调整同一 swf 的特定部分而不是另一个的可能方法是将电影（在“发布设置”中，ctrl+12 中）发布为不可缩放，并调整大小仅通过舞台侦听器上的 resize 事件手动只需要电影的一部分

```
var stageListener:Object = new Object ();
Stage.addListener (stageListener);

orig_ratio=Stage.width/Stage.height;
stageListener.onResize = function(){//resized page
   something_to_resize_only._height=Stage.height;
   something_to_resize_only._width=something_to_resize_only._height*ratio; 
   //...etc etc... you may include current_ratio/orig_ratio comparison conditions too
} 
```

如果您需要手动调整大小的帮助，您应该创建一个新问题，因为它与该问题无关。不过不要害怕，这不是一项艰巨的任务，您甚至可以找到很多关于比例缩放/调整大小的教程

# php - 如何将变量插入 Kohana DB::expr？

> ID：13825012
> 
> 赞同：0
> 
> 时间：2012-12-11T17:06:47.313
> 
> 标签：php, mysql, kohana, query-builder

我想在 Kohana 做这样的事情：

```
$var=someFunction($id); 
$q=DB::select(array(DB::expr('table.field-',**$var**),'aliasname'))->from('table')->where('id','=',$id); 
```

我想做的是获取一个字段的值，但是我想从它的值中减去一个 PHP 变量。

但问题是我不能执行（）查询，因为我必须将它作为它的参数传递给一个方法（没有执行），所以我不能执行它，我不能从结果数组，并从中减去我的变量。我必须以某种方式在 MySQL 查询中做到这一点，我希望 DB::expr 可以做到这一点。

这是任何可能的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T05:24:50.707

怎么样：

```
$var=someFunction($id); 
$q=DB::select(array(DB::expr("(table.field - {$var})"),'aliasname'))->from('table')->where('id','=',$id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-22T16:12:44.460

```
$var = 5;  $q = DB::select(array(DB::expr("(table.field - 0)", [$var]),'aliasname'))->from('table')->where('id','=',$id); 
```

# maven - 项目 A 发布时更新项目 B 中的依赖项

> ID：13825016
> 
> 赞同：1
> 
> 时间：2012-12-11T17:06:58.683
> 
> 标签：maven, maven-release-plugin

我有两个多模块项目。一是主项目树。另一个项目树从第一个项目中提取工件（WAR、JAR 等）。他们每个人都有自己独立的父 pom。

我想保持它们的版本号相同。项目 2 有一个依赖管理部分，其中包含来自项目 1 的工件。这样做的问题是由于快照，我无法发布项目。

例如。版本号（对于两个项目）是 3.4-SNAPSHOT。我可以发布项目 1 的 3.4 版本，所有 pom 版本都将从 3.4-SNAPSHOT 设置为 3.5。当我进入项目 2 时，我想做同样的事情。问题是项目 1 的依赖项是 3.4-SNAPSHOT，我不知道如何自动将它们变为 3.5。就像我希望在实际发布之前将依赖项更新到发布版本一样。

我知道如果我让两个树都从同一个父 pom 扩展，maven 发布插件会将依赖项检测为子模块并自动更新它们。

我阅读了一些关于[版本插件](http://mojo.codehaus.org/versions-maven-plugin/use-latest-versions-mojo.html)的信息，但我不喜欢其中的 use-latest-versions 部分（这似乎很危险）。Update-properties 看起来很有希望，但粗略一看，它看起来像是打包的 use-latest-versions 插件略有不同。

此外，我尝试使用`${project.version}`，但这与将 3.4-SNAPSHOT 作为依赖项基本相同 - 它会错误地说由于快照而无法发布，因为版本实际上尚未更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:27:47.040

您配置项目的方式是完全独立的。您可能还要求您的 log4j 依赖项的版本与您当前的项目 B 版本相同。

虽然它不是自动的，但您应该替换项目 B 中对项目 A 的所有引用的版本，以使用在项目 B 的父 pom 中定义的属性。然后，当您发布项目 A 时，您只需更改一个 pom，所以该`project.a.version`属性现在是发布版本而不是 SNAPSHOT。发布 B 后，您可以将其更改回`${project.version}`以保持同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T20:24:06.360

正如您承认的那样，这里的正确答案是重新安排您的项目以拥有一个共同的父级。其他任何事情都只是一种解决方法。

但是，在我看来，它[`versions:use-releases`](http://mojo.codehaus.org/versions-maven-plugin/use-releases-mojo.html)可能会实现您的目标。您可以指定包含列表以确保仅更新项目 1 依赖项。

~~如果您希望这是自动的，您可以考虑将此目标[绑定](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference)到`compile`.~~

**编辑**：可悲的是，这看起来不可能。至少，这就是我对页面顶部提到的“*仅通过直接调用执行”的理解。*

# backbone.js - 我可以阻止 Backbone LayoutManager 生成额外的 年代？

> ID：13825018
> 
> 赞同：1
> 
> 时间：2012-12-11T17:06:59.907
> 
> 标签：backbone.js, backbone-layout-manager

鉴于这些模板：

```
<script id="template1" type="layout">
    Template 1 contents
</script>

<script id="template2 type="layout">
   Template 2 contents
   <section class="subview"></section>
</script> 
```

这个视图设置：

```
var View1 = Backbone.LayoutView.extend({
    template: "#template1"
});

var View2 = Backbone.LayoutView.extend({
    template: "#template2",
    views: {
        ".subview": new View1();
    }
}); 
```

我得到这个输出：

```
Template 2 contents
<section class="subview"><div>Template 1 contents</div></section> 
```

我怎样才能得到这个输出？

```
Template 2 contents
<section class="subview">Template 1 contents</section> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T06:56:05.567

我会在您的模板中使用以下内容，保持模板 1 的模板相同：

```
<script id="template2 type="layout">
    Template 2 contents
</script> 
```

那么在你看来

```
var View2 = Backbone.LayoutView.extend({
    template: "#template2",
    beforeRender: function() {
        this.insertView(new View1());
    }
});

var View1 = Backbone.LayoutView.extend({
    template: "#template1",
    tagName: "section",
    className: "subview"
}); 
```

这会给你以下

```
<div>
   Template 2 contents
   <section class="subview">Template 1 contents</section>
</div> 
```

除非通过指定 tagName 属性，否则我没有找到其他删除“div”的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-02T07:57:49.093

如果 template1 有以下内容：

```
<div class="myContents"></div> 
```

那么你可以使用 jQuery 的unwrap [()](https://api.jquery.com/unwrap/)来删除主干布局管理器[afterRender()](https://github.com/tbranyen/backbone.layoutmanager/wiki/0.6.6-documentation)函数中的元素

```
afterRender: function() {
    this.getView('.subView').$el.find('.myContents').unwrap();        
}, 
```

# scala - 使用参数化类型表现的 Scala

> ID：13825022
> 
> 赞同：2
> 
> 时间：2012-12-11T17:07:06.143
> 
> 标签：scala

是否可以获取类对象中包含的清单类型的类型参数。

我可能没有正确描述，所以我的意思是，给定这种类型。

```
Resultset[Band[Coldplay]] 
```

我想要一个代表完整类型的manfiest，这样就应该可以获得一个具有该类型的类实例

```
Class[Resultset[Band[Coldplay]]] 
```

我能得到的只有

```
Class[Resultset[_]] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T17:43:31.857

您可以将清单构建到一个类中：

```
case class Manifesting[A](value: A)(implicit val mf: Manifest[A]) { }

scala> Manifesting(5).mf.erasurescala> Manifesting(5).mf.erasure
res1: Class[_] = int 
```

或者您可以将所有清单构建到一个方法中：

```
def nested[A, B[A]](x: B[A])(implicit ma: Manifest[A], mb: Manifest[B[A]]) = 
  (ma.erasure, mb.erasure)

scala> nested(List("fish"))
res2: (Class[_$1], Class[_$1]) forSome { type _$1; type _$1 } =
  (class java.lang.String,class scala.collection.immutable.List) 
```

或者，在 Scala 2.10 中，您可以使用`TypeTag`：

```
def nest2[A: scala.reflect.runtime.universe.TypeTag](x: A) = 
  implicitly[scala.reflect.runtime.universe.TypeTag[A]]

scala> nest2(Right(List("salmon","herring")))
res3: reflect.runtime.universe.TypeTag[scala.util.Right[Nothing,List[String]]] =
  TypeTag[scala.util.Right[Nothing,List[String]]] 
```

# php - SocialEngine 4 计算会员剩余天数

> ID：13825030
> 
> 赞同：0
> 
> 时间：2012-12-11T17:07:31.803
> 
> 标签：php, zend-framework, socialengine

我想做的是在主页上显示一个小部件，让用户知道他们的会员资格何时到期。这是我当前的代码

```
$subExpire = Engine_Api::_()->getDbtable('subscriptions', 'payment');
$db2 = $streamTable->getAdapter();
$stmt2 = $db2->query("select * from engine4_payment_subscriptions where `user_id`='$user_id'");
$arr2 = $stmt2->fetch();

if ($arr2['expiration_date']=="NULL")
{
    $exp = "NEVER";
}
echo $exp; 
```

我认为主要问题与 Engine_Api::_()->getDbtable('subscriptions', 'payment');

最终，一旦它返回一个日期，我想计算从当前日期起会员资格还剩多少天。

有什么建议么？

PS， $user_id 已定义并返回一个数值

还有一件事，实际的表名是engine4_payment_subscriptions

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:16:45.553

这是在社交引擎中进行查询的一种奇怪方式，试试这个：

> $table = Engine_Api::_()->getDbtable('subscriptions', 'payment');
> 
> $select = $table->select()->where('user_id = ?', $user_id);
> 
> $arr2 = $table->fetchAll($select);
> 
> if ($arr2['expiration_date']=="NULL")
> 
> {
> 
> $exp = "从不";
> 
> }
> 
> 回声 $exp;

# mongoose - Mongoose - 查询 $ 或 slug / id

> ID：13825031
> 
> 赞同：6
> 
> 时间：2012-12-11T17:07:32.840
> 
> 标签：mongoose

我正在尝试创建一个可以通过 slug 或 id 查询的 mongoose 查询，但是问题在于我不知道要处理哪一个，因为我将其作为 Express 路由：

```
app.get('/animals/dogs/:id', function (req, res, next) {
     Dogs.find({$or: [{slug: id}, {_id: id}]}, function (err, docs) {
         if (err) {
             return next(err);
         }
         // ....
     });
}); 
```

我希望能够通过其中任何一个进行搜索，但是上面的这种方法会引发`Invalid ObjectId`错误。

另一种方法是嵌套查询，但这感觉有点麻烦：

```
app.get('/animals/dogs/:id', function (req, res, next) {
     Dogs.find({slug: id}, function (err, docs) {
         if (err) {
             return next(err);
         }
         if (!docs) {
             Dogs.findById(id, function (err, docs) {
             // ...
             });
         }
         // ....
     });
}); 
```

还有其他我没有考虑过的方法吗？我知道我可以将我的 slug 变成 ObjectId，但如果可能的话，我宁愿避免这种情况。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T18:10:00.993

测试是否`id`是有效的 ObjectId，然后仅在查询中包含该术语（如果有效）：

```
app.get('/animals/dogs/:id', function (req, res, next) {
    var query = {$or: [{slug: id}]};
    if (id.match(/^[0-9a-fA-F]{24}$/)) {
        query.$or.push({_id: id});
    }
    Dogs.find(query, function (err, docs) {
        if (err) {
            return next(err);
        }
        // ....
    });
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-01-04T09:19:02.023

我绝对更喜欢以下语法（使用 Mongoose 验证器`ObjectId`）：

```
const mongoose   = require('mongoose');
const isObjectId = mongoose.ObjectId.isValid;

app.get('/animals/dogs/:id', function (req, res, next) {
  const id = req.params.id;
  const promise = isObjectId(id) ? Dogs.find(id) : Dogs.findOne({ slug: id });

  promise.then(dog => res.send(dog)).catch(next)
}); 
```

# database - PostgreSQL 时间数据库中的移动平均值

> ID：13825037
> 
> 赞同：3
> 
> 时间：2012-12-11T17:07:54.443
> 
> 标签：database, postgresql, moving-average, temporal

如何在时态数据库中应用移动平均值。我的数据包括温度，我想为每 15 条记录应用移动平均值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T17:13:50.860

您可以按以下方式触发查询

```
marc=# SELECT entity, name, salary, start_date,
        avg(salary) OVER (ORDER BY entity, start_date
                          ROWS BETWEEN 1 PRECEDING AND 1 FOLLOWING)
        FROM salary;

 entity     | name      | salary  | start_date    |         avg         
 -----------+-----------+---------+---------------+----------------------
 Accounting | millicent |  850.00 | 2006-01-01    | 825.0000000000000000
 Accounting | jack      |  800.00 | 2010-05-01    | 916.6666666666666667
 R&D        | tom       | 1100.00 | 2005-01-01    | 966.6666666666666667
 R&D        | john      | 1000.00 | 2008-07-01    | 933.3333333333333333
 R&D        | maria     |  700.00 | 2009-01-01    | 733.3333333333333333
 R&D        | kevin     |  500.00 | 2009-05-01    | 633.3333333333333333
 R&D        | marc      |  700.00 | 2010-02-15    | 600.0000000000000000 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T17:37:11.857

```
 WITH moving_avrag AS (
  SELECT 0 AS [lag] UNION ALL
  SELECT 1 AS [lag] UNION ALL
  SELECT 2 AS [lag] UNION ALL
  SELECT 3 AS [lag] --ETC
)
SELECT
  DATEADD(day,[lag],[date]) AS [reference_date],
  [otherkey1],[otherkey2],[otherkey3],
  AVG([value1]) AS [avg_value1],
  AVG([value2]) AS [avg_value2]
FROM [data_table]
CROSS JOIN moving_avg
GROUP BY [otherkey1],[otherkey2],[otherkey3],DATEADD(day,[lag],[date])
ORDER BY [otherkey1],[otherkey2],[otherkey3],[reference_date]; 
```

# linux - 将变量列表传递给简单的 bash 命令

> ID：13825040
> 
> 赞同：2
> 
> 时间：2012-12-11T17:08:09.610
> 
> 标签：linux, bash, ssh

我希望将文本文件中的变量列表传递给一个简单的 bash 命令。基本上我有一个所有 linux 命令的列表（commands.txt）。我想将该文件中的每个命令（每个命令都在一个新行上）传递给 man 命令并将每个命令打印到一个新的 .txt 文件中，以便将每个变量传递给它：

```
man $command > $command.txt 
```

因此每个变量都会将其手册页打印到其名称 .txt 中。请帮忙！我想在 bash 脚本中执行此操作，但任何可行的方法都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:15:39.657

使用内置命令`read`：

```
cat commands.txt | while read command; do
  man $command > $command.txt
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T17:26:58.090

您**不能**将手册页的输出重定向到这样的文件中：

```
man man > man.txt # DON'T DO THIS 
```

上面的问题是输出的 man.txt 文件也会包含很多额外的格式化字符。

这是编写脚本的正确方法：

```
while read command; do
   man $command | col -b > $command.txt
done < commands.txt 
```

注意使用`col -b`此处删除所有格式字符。

# c# - 此模式所需的正则表达式：point(latitude,longitude)

> ID：13825041
> 
> 赞同：3
> 
> 时间：2012-12-11T17:08:10.230
> 
> 标签：c#, regex

我正在尝试验证遵循以下模式的文本：

*   必须以文本“point(”开头
*   后面必须跟一个最多 5 位小数的纬度数值（例如：42.12345）
*   后面必须用逗号“,”
*   后面必须跟一个最多 5 位小数的经度数值（例如：-81.12345）
*   后面必须有一个右括号“)”

匹配示例：

*   点(42.12345,-81.12345)

任何帮助是极大的赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T17:11:26.737

您可以在此处稍作分解，轻松构建您的正则表达式。

*   `point(`要在开头匹配，请使用 -`^point\(`
*   要匹配纬度或经度数字，请使用 -`[-]?\d+(?:\.\d+)?`
*   再次，为了匹配`)`最后，使用`\)$`.

对于`[-]?\d+(?:\.\d+)?`，这里有一个解释：-

*   `[-]?` - 匹配`negative (-)`开头的可选符号（`? quantifier`结尾表示 0 或 1）
*   `\d+` - 匹配一位或多位数字
*   `(?:\.\d+)?` - 匹配一个可选的`decimal`，后跟`one or more digits`. dot(.) 是 Regex 中的特殊元字符，因此如果要匹配它，则需要对其进行转义。

此外，要将您的位数限制为`5`，您可以使用 -`\d{1,5}`而不是`\d+`，它匹配最小 1 位和最大 5 位数字。

`^(caret)`和`$(dollar)`anchors 匹配字符串的开头和结尾。

所以，这是你的正则表达式： -

```
^point\([-]?\d+(?:\.\d{1,5})?,[-]?\d+(?:\.\d{1,5})?\)$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T17:12:04.507

试试这个：

```
^point\(\-?\d+\.\d{1,5},\-?\d+\.\d{1,5}\)$ 
```

*   必须以文本“point(”开头：`^point\(`
*   后面必须跟一个最多 5 位小数的纬度数值（例如：42.12345）：`\-?\d+\.\d{1,5}`
*   后面必须跟一个逗号“，”：`,`
*   后面必须跟一个最多 5 位小数的经度数值（例如：-81.12345）：`\-?\d+\.\d{1,5}`
*   后面必须有一个右括号“)”：`\)$`

纬度和经度逻辑可以像这样进一步分解。

*   `\-?`= 如果存在，则匹配负号（必须转义，`\`因为`-`在 RegEx 中具有特殊含义）
*   `\d+`= 匹配一个或多个十进制字符（即`0`通过`9`）
*   `\.`= 匹配句号（`.`单独有特殊含义，必须转义）
*   `\d{1,5}`= 匹配一到五个十进制字符

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T17:12:39.847

像这样的东西：

```
point\((?<lat>-?\d+\.\d{1,5}),(?<long>-?\d+\.\d{1,5})\) 
```

尝试使用正则表达式工具，例如 expresso：[http ://www.ultrapico.com/Expresso.htm](http://www.ultrapico.com/Expresso.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T17:11:10.223

怎么样：

```
^point\((\-?\d+(\.\d+)?),\s*(\-?\d+(\.\d+)?)\)$ 
```

# sql - 无论深度如何，如何找到添加到邻接列表中的最新项目？

> ID：13825042
> 
> 赞同：1
> 
> 时间：2012-12-11T17:08:10.420
> 
> 标签：sql, sql-server-2008, hierarchical-data, common-table-expression, adjacency-list

我在 SQL Server 中有一些分层类别，定义如下：

```
CREATE TABLE [dbo].[CategoryDesc] (
    [CategoryId] [int] IDENTITY(1,1) NOT NULL,
    [Name] [nvarchar](255) NOT NULL
)

CREATE TABLE [dbo].[CategoryRelationship] (
    [RelationshipId] [int] IDENTITY(1,1) NOT NULL,
    [CategoryId] [int] NOT NULL,
    [ParentId] [int] NULL
)

CREATE TABLE [dbo].[Machine] (
    [MachineId] [int] IDENTITY(1,1) NOT NULL,
    [Make] [varchar](50) NOT NULL,
    [Model] [varchar](255) NOT NULL,
    [CreateDate] [datetime] NOT NULL,
    [CategoryId] [int] NOT NULL
) 
```

注意：为简洁起见，省略了主键、关系和一些字段。

我已经使用 CTE 来生成一棵完整的树，其输出的摘录：

```
Foundry/Forging
Foundry/Forging > Core Equipment
Foundry/Forging > Furnaces
Foundry/Forging > Furnaces > Induction
Glass
Glass > Bevelling
Glass > Cutting
Glass > Cutting > Laminated Glass
Glass > Cutting > Manual
Glass > Cutting > Shape
Glass > Cutting > Straight
Glass > Decorating
Glass > Drilling
Glass > Drilling > Horizontal
Glass > Drilling > Vertical
etc 
```

我需要一个给定顶级 categoryId 的查询，返回最新添加的机器（基于 CreateDate），而不管它添加了哪个子类别和在哪个级别。

我遇到的问题是机器可能被添加到第 2 或第 3 级类别（尽管从来不是顶级）并且 CTE 不允许在递归部分进行左连接。

提前感谢您提供的任何帮助。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:46:33.760

我已将您的架构简化为：

```
create table cat( id int, name varchar(100) );
create table tree ( id int , parent_id int);
create table item( id int, name varchar(100), cat_id int);

insert into cat values 
( 1, 'HW'),
( 2, 'HW-PC'),
( 3, 'HW-M' ),
( 4, 'Soft'),
(5,'HW-M-N');

insert into tree values
(2,1),
(3,1),
(5,3);

insert into item values 
( 1, 'A', 2),
( 2, 'B', 3); 
```

对于根类别 = 1，您请求的查询是：

```
with child_id as
( 
  select parent_id as id
      from tree
      where parent_id = 1                         --here cat = 1
   union all
   select tree.id
   from child_id  c
   inner join tree on tree.parent_id = c.id
),
productes as (
   select item.*,
    row_number() over (order by item.id ) as rn  --set your order criteria
   from item 
   inner join child_id c on c.id = item.cat_id
)
select * 
 from productes
where rn = 1 
```

[结果](http://sqlfiddle.com/#!3/7659e/15/0)：

```
| ID | NAME | CAT_ID | RN |
---------------------------
|  1 |    A |      2 |  1 | 
```

# jakarta-ee - 字段瞬态中的结果映射

> ID：13825044
> 
> 赞同：0
> 
> 时间：2012-12-11T17:08:22.540
> 
> 标签：jakarta-ee, jpa

我可以映射一个字段瞬态。结果映射狗为null，怎么实现映射。

```
@Entity
@SqlResultSetMapping(name = "DogMapping",
entities = {
    @EntityResult(entityClass = Dog.class, fields = {
        @FieldResult(name = "Id", column = "ID"),
        @FieldResult(name = "name", column = "NAME"),

    })
}))
public class Dog implements Serializable {
  @Id 
   private Long id;
   @Transient 
    private String name;

} 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-12T16:03:11.247

`@Transient`如果您想阅读它，请不要这样做。

# php - Xpath解析xml并在mysql中输入

> ID：13825054
> 
> 赞同：0
> 
> 时间：2012-12-11T17:08:55.773
> 
> 标签：php, mysql, xml-parsing, feed

我正在尝试将 xpath 与 DOMDocument 结合使用来尝试解析我的 xml 并插入到表中。

除了 $halftimescore 之外，我所有的变量都正确插入 - 这是为什么呢？

这是我的代码：

```
<?php

  define('INCLUDE_CHECK',true);
  require 'db.class.php';

  $dom = new DOMDocument();
  $dom ->load('main.xml');

  $xpath = new DOMXPath($dom);
  $queryResult = $xpath->query('//live/Match/Results/Result[@name="HT"]');
  foreach($queryResult as $resulty) {
    $halftimescore=$resulty->getAttribute("value");
  }      

  $Match = $dom->getElementsByTagName("Match"); 
  foreach ($Match as $match) {

    $matchid = $match->getAttribute("id");
    $home = $match->getElementsByTagName("Home");
    $hometeam = $home->item(0)->getAttribute("name");
    $homeid = $home->item(0)->getAttribute("id");
    $away = $match->getElementsByTagName("Away");
    $awayid = $away->item(0)->getAttribute("id");
    $awayteam = $away->item(0)->getAttribute("name");

    $leaguename = $match->getElementsByTagName("league");
    $league = $leaguename->item(0)->nodeValue;
    $leagueid = $leaguename->item(0)->getAttribute("id");

    foreach ($match->getElementsByTagName('Result') as $result) {
      $resulttype = $result->getAttribute("name");
      $score = $result->getAttribute("value");
      $scoreid = $result->getAttribute("value");
    }

    mysql_query("
      INSERT INTO blabla
        (home_team, match_id, ht_score, away_team)
      VALUES
        ('".$hometeam."', '".$matchid."', '".$halftimescore."', '".$awayteam."')
    ");

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:48:42.773

因为您在主循环之外填充`$halftimescore`，在它自己的循环中，它只有一个值（最后一个值），因为每次迭代都会覆盖前一个。

您需要做的是在主循环中运行 XPath 查询，并使用当前节点的基节点，如下所示：

```
 // ...

  $xpath = new DOMXPath($dom);
  /*
  Remove these lines from here...
  $queryResult = $xpath->query('//live/Match/Results/Result[@name="HT"]');
  foreach($queryResult as $resulty) {
    $halftimescore=$resulty->getAttribute("value");
  }
  */

  $Match = $dom->getElementsByTagName("Match"); 
  foreach ($Match as $match) {

    // and do the query here instead:
    $result = $xpath->query('./Results/Result[@name="HT"]', $match);
    if ($result->length < 1) {
      // handle this error - the node was not found
    }
    $halftimescore = $result->item(0)->getAttribute("value");

  // ... 
```

# syntax - 如何在 Makefile.am 中更改程序名称

> ID：13825059
> 
> 赞同：0
> 
> 时间：2012-12-11T17:09:16.413
> 
> 标签：syntax, makefile, autotools

目前makefile.am中的代码是这样的：

```
performancetestsdir = $(prefix)/tests/@PACKAGE@/performance-test
performancetests_PROGRAMS = eventwindowperformancetest 
```

我想在构建后以“oldeventwindowperformancetest”的名义制作程序“eventwindowperformancetest”

我应该怎么办？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:05:47.210

几种可能性：

*   将 Makefile.am 中的名称更改为您想要的名称（当您真的想将其设置为 XX 时，将程序构建为 XY 有什么意义？）*   使用“--program-transform-name”标志来配置转换输出程序的名称*   添加一个为您重命名文件的构建后挂钩。就像是：

    ```
    all-local: oldeventwindowperformancetest
    oldeventwindowperformancetest: eventwindowperformancetest
            cp "$^" "$@" 
    ```

# python - Python无法解释的关键字'sub'

> ID：13825066
> 
> 赞同：1
> 
> 时间：2012-12-11T17:09:47.257
> 
> 标签：python

```
def foo(self, sub, **kwargs):
    accounts = kwargs.get('accounts')        
    start    = kwargs.get('start', 0)        
    end      = kwargs.get('end', 0)          
    return json.dumps(                       
        sub(accounts, start, end),           
    ) 
```

你能解释一下，这个“子”是什么以及它的作用是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:11:42.470

它只是函数的一个参数，代码期望它是可调用的。

Python 函数、方法和带有`__call__`方法的对象都是可调用的，并且可以用来提供`foo`参数`sub`。

如果没有更多的上下文，我们对此无话可说。

# inotify - 单次 inotify 读取导致无限循环

> ID：13825069
> 
> 赞同：1
> 
> 时间：2012-12-11T17:09:57.990
> 
> 标签：inotify

如题。程序将等待第一个事件，然后进入无限循环——为什么不一次只处理一个事件？

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/inotify.h>
#include <unistd.h>

int main (int argc, char **argv)
{
    int id, wd;
    int a;
    struct inotify_event e;

    id = inotify_init ();
    wd = inotify_add_watch (id, "/home/andrea/Downloads", IN_CREATE);
    puts ("waiting...");
    while (read (id, &e, sizeof (struct inotify_event)))
      {
          printf ("created %s\n", e.name);
          puts ("waiting...");
      }
return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-09T17:29:53.423

首先，由 inotify 报告的事件的大小不是 inotify_event，因为还报告了一个附加名称。将 ioctl 与 FIONREAD 一起使用以获取可供读取的字节数。

```
int avail;
ioctl(id, FIONREAD, &avail); 
```

其次，您使用了阻塞 I/O。如果您改为使用 inotify_init1(O_NONBLOCK) 来初始化 inotify，如果没有可用数据，read() 将立即返回并将 errno 设置为 EAGAIN。当然，如果您首先使用 FIONREAD 检查是否有可用数据，则这是可选的。

# java - 列表#add(new MyClass()) 无法编译

> ID：13825071
> 
> 赞同：2
> 
> 时间：2012-12-11T17:10:01.683
> 
> 标签：java, generics, extends

```
MyClass e = new MyClass();

List<Object> ok = new ArrayList<Object>();
List<? extends Object> ko = new ArrayList<Object>();

ok.add(e);
ko.add(e); // doesn't compile 
```

为什么它不编译？`MyClass`是`Object`...的子类

有关信息，我收到以下消息：

```
The method add(capture#1-of ? extends Object) in the type List<capture#1-of ? extends Object> is not applicable for the arguments (MyClass) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T17:11:50.897

这是你的问题：

```
List<? extends Object> 
```

这意味着“它是扩展 Object 的某种类型 T 的列表，但我不在乎 T 是什么”。

所以这将是有效的：

```
List<? extends Object> ko = new ArrayList<Banana>(); 
```

...但你不会想要：

```
ko.add(e); 
```

在那个时候编译，你会吗？因为 a`MyClass`不是`Banana`.

有关*更多*信息，请参阅[Java 泛型常见问题解答。](http://www.angelikalanger.com/GenericsFAQ/FAQSections/TypeArguments.html#Wildcard%20Bounds)

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T18:30:06.537

Josh Block 在*Effective Java*中教给我们**PECS**：生产者 = `extends`，消费者 = `super`。

由于您`ko`作为*消费者*使用（向其添加对象），您应该声明为：

```
List<? super Object> ko = new ArrayList<Object>(); 
```

也许对这个概念的更好说明是：

```
List<? super MyClass> ko = new ArrayList<Object>(); 
```

您可能会这样想，您只能将 MyClass 对象分配给类型为 MyClass 或任何超类型的变量——您只能将 MyClass 对象添加到类型为 MyClass 或任何超类型的 List 中.

回到你的例子，`List<? extends Object> ko`不能是正确的类型声明，因为它也会接受这个：

```
List<? extends Object> ko = new ArrayList<String>(); 
```

您在这里看到，基于 的泛型类型`ko`，编译器无法确定*实际*的List 是否接受 MyClass 的实例。*

# cakephp - 总是在 cakePhp 中调用函数

> ID：13825073
> 
> 赞同：4
> 
> 时间：2012-12-11T17:10:13.220
> 
> 标签：cakephp

我想知道如何在 cakePHP 中使用加载页面时始终调用的函数？

这个例子更精确：

我有我的主页：index.ctp 我还有另一个页面：profil.ctp

我想要的是，当我尝试访问 profil.ctp 时，如果我没有登录，它会自动将我重定向到 index.ctp 页面。

我已经做了什么：

用户控制器：

```
function index() {
    if (!empty($this->data))
        $this->Session->write(array('User' => array('connected' => true)));
} 
```

配置文件控制器：

```
function index() {
  if (!$this->Session->read('connected'))
    $this->redirect(array('controller' => 'users', 'action' => 'index'));
} 
```

问题是我不想将此代码添加到每个页面以及所有控制器的每个功能中。

有任何想法吗 ？

问候。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T17:13:54.180

将代码放入您`AppController.php`的 s beforeFilter()

如果您`beforeFilter`在其他控制器中使用，请确保`parent`在其他代码之前调用。

```
public function beforeFilter() {
    parent::beforeFilter();
    // your other code
} 
```

在每个控制器中，`beforeFilter()`都会调用 ，然后触发 AppController (parent) `beforeFilter()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T18:14:50.620

把代码放在你的`AppController` `beforeFilter()`

应用控制器：

```
public function beforeFilter()
{
  //call your code here
} 
```

`beforeFilter()`在您的控制器中，仅当您需要运行每次调用特定控制器中的操作时必须执行的特定代码时才覆盖该函数。

一些例子：

用户控制器：

```
UsersController extends AppController
{
  public function beforeFilter()
  {
    parent::beforeFilter();

    //add some code here that must be run before each UsersController's action
  }

  ...

} 
```

日志控制器：

如果您在使用 LogsController 的操作之前不需要调用任何特定代码，请不要添加任何`beforeFilter()`功能。`beforeFilter()`由于对象继承，将使用AppController 。

```
LogsController extends AppController
{
  //no need for a beforeFilter() here ! 
  //AppController's beforeFilter() will be used automatically

  ...

} 
```

# git - 为什么我必须一遍又一遍地解决相同的“git rebase”冲突？

> ID：13825079
> 
> 赞同：50
> 
> 时间：2012-12-11T17:10:32.143
> 
> 标签：git, git-rebase, git-merge-conflict

当我这样做`git rebase branch1`时，我`branch1-local`会遇到冲突。我解决了冲突，`git add <conflicted-add>`然后`git rebase --continue`按照 git 的要求做。之后应用新的提交。新的冲突出现了。但是在同一个文件中又是同样的冲突。我再做一次，`git add`，`git rebase --continue`，然后一切都重复一遍，直到我对每个被重新基于的提交重复这个。

为什么 rebase 让我一遍又一遍地重做相同的冲突解决方案？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-11T18:32:30.343

您想要的是`git rerere`为您记录冲突解决方案。我所见过的最好的介绍现在是[Git Book，工具一章](https://git-scm.com/book/en/v2/Git-Tools-Rerere)的一部分。实际上，当您执行变基时，您最终会像以前一样停止，但您只需检查合并冲突是否仍然解决，然后`git add`继续。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T19:33:51.727

你不应该一遍又一遍地遇到同样的冲突。**Rerere 不会在这里为您提供帮助。**它只是意味着您尝试重放提交的代码库是如此不同，以至于每个提交都需要您的帮助来调整它。这是赞成合并而不是变基的原因之一。在我看来，rebase 应该只在必要时使用，而不是你常规工作流程的一部分。Rerere 将在合并/重置类型的工作流程中提供更多帮助。这是我避免变基的工作流程：http: [//dymitruk.com/blog/2012/02/05/branch-per-feature/](http://dymitruk.com/blog/2012/02/05/branch-per-feature/)

减轻一些痛苦的一种方法是使用像 Beyond Compare 这样的智能合并程序。它具有语法意识，可以解决很多 Git 会（理所当然地）拒绝为你做的冲突。很多时候，这些工具在被调用时甚至不会打开它们的 UI、解决问题并允许您的`git mergetool`命令继续处理下一个冲突。请记住将“信任合并工具退出代码”设置为 true。

# java - 丰富：自动完成需要两次单击才能隐藏弹出窗口

> ID：13825082
> 
> 赞同：0
> 
> 时间：2012-12-11T17:10:44.483
> 
> 标签：java, javascript, jsf, richfaces

在 Internet Explorer 9 中，当通过单击箭头按钮打开自动完成弹出窗口时，需要在其外部单击两次才能将其关闭。

这可以使用以下代码重现：

```
<f:view>
    <h:head></h:head>
    <h:body>
        <rich:autocomplete mode="client" minChars="0" autofill="false" showButton="true"
            autocompleteList="#{fn:split('Test 1, Test 2, Test 3', ',')}" />
    </h:body>
</f:view> 
```

问题是，第一次单击时不会触发 blur 事件的处理程序。

这似乎是 RichFaces 中的一个错误，所以我提交了一个[错误报告](https://issues.jboss.org/browse/RF-12653)。由于我认为它不会很快修复并且我无法升级到较新的版本，因此我正在寻找一种解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T08:06:38.107

当我将以下代码添加到我的页面时，它可以工作：

```
jQuery(document).ready(function () {
    jQuery('.rf-au-fld-btn').click(function(e) {
        jQuery(e.target).focus();
    }); 
}); 
```

# objective-c - 关闭模态视图控制器后在根视图控制器中执行操作

> ID：13825084
> 
> 赞同：0
> 
> 时间：2012-12-11T17:10:58.973
> 
> 标签：objective-c, cocoa-touch, modalviewcontroller

如果我想在关闭模态视图控制器后立即执行某种操作，我究竟应该把代码放在哪里？我知道它不会在 viewDidLoad 中，因为 rootviewcontroller 已经加载到内存中（因为它只是暂时被模态视图隐藏）并且我不确定 viewWillAppear 或 viewDidAppear 因为当然视图已经加载到内存中.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:16:16.223

当模式被解除时，ViewWillAppear 将在调用者视图控制器中再次被调用，因此使用一些逻辑可能是一个好地方。

否则，您可以考虑实现委托，或者如果不考虑同步性，则可以发送自定义 NSNotification 以被模态调用者捕获。

# c# - 无法使用 c# 导航到 Windows Metro App 上的页面

> ID：13825085
> 
> 赞同：11
> 
> 时间：2012-12-11T17:11:00.237
> 
> 标签：c#, navigation, microsoft-metro, windows-runtime

当我的`UserLogin`页面加载时，我想检查用户数据库，如果它不存在或无法读取，我想将它定向到`NewUser`页面。

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    CheckForUser();
    if (UserExists == false)
        this.Frame.Navigate(typeof(NewUser));
} 
```

问题是它永远不会导航到`NewUser`，即使我注释掉了`if`条件。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-12T05:40:27.080

`Navigate`不能直接调用form`OnNavigatedTo`方法。您应该通过调用您的代码`Dispatcher`，它将起作用：

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    base.OnNavigatedTo(e);
    CheckForUser();
    if (UserExists == false)
        Dispatcher.RunAsync(CoreDispatcherPriority.Normal, 
                            () => this.Frame.Navigate(typeof(NewUser)));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-04T13:06:24.620

发生这种情况是因为您的应用程序尝试在当前帧完全加载之前进行导航。Dispatcher 可能是一个不错的解决方案，但您必须遵循以下语法。

使用 Windows.UI.Core；

```
 private async void to_navigate()
    {
        await Dispatcher.RunAsync(CoreDispatcherPriority.Normal, () => this.Frame.Navigate(typeof(MainPage)));
    } 
```

1.  将 MainPage 替换为您想要的页面名称。
2.  调用此 to_navigate() 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T17:15:42.573

你可以试试这个，看看这是否有效

```
frame.Navigate(typeof(myPage)); // the name of your page replace with myPage 
```

完整的例子

```
 var cntnt = Window.Current.Content;
    var frame = cntnt as Frame;

    if (frame != null)
    { 
        frame.Navigate(typeof(myPage));
    }
    Window.Current.Activate(); 
```

或者

如果您想使用 Telerik 之类的第 3 方工具，也请尝试此链接

[经典的 Windows 窗体，令人惊叹的用户界面](http://www.telerik.com/products/winforms.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T02:24:20.313

我看到您覆盖 OnNavigatedTo 方法但不调用基本方法。这可能是问题的根源。尝试在任何逻辑之前调用基本方法：

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    base.OnNavigatedTo(e);
    CheckForUser();
    if (UserExists == false)
        this.Frame.Navigate(typeof(NewUser));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-19T01:54:56.300

其他的都是正确的，但是由于 Dispatcher 在视图模型中不起作用，这里是如何在视图模型中执行的：

```
SynchronizationContext.Current.Post((o) =>
{
    // navigate here
}, null); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T16:03:26.090

使用 Dispatcher.RunIdleAsync 将导航推迟到另一个页面，直到 UserLogin 页面完全加载。

# wpf - WPF 将“资源”项目添加到具有多个 WPF 应用程序的解决方案中

> ID：13825086
> 
> 赞同：0
> 
> 时间：2012-12-11T17:11:07.163
> 
> 标签：wpf, fonts, project-structure

我正在 WPF 中开发三个类似信息亭的应用程序。它们将具有相似的外观和感觉，我希望在同一个解决方案中创建所有项目。我想做的是将一个项目添加到仅包含共享资源（例如字体和图像）的解决方案中。

我的问题是，是否可以跨应用程序共享嵌入式字体等资源，如果可以，那么适合这种用途的项目类型是什么？（类库？WPF 用户控件？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:14:25.750

我将创建一个 WPF 自定义控件库，然后创建一个 ResourceDictionary 来保存资源，在您的启动项目的 App.xaml 中，我将链接资源字典。

```
 <Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="pack://application:,,,/myResourceLibrary;component/myResourceDictionary.xaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources> 
```

这样，您只需将 DLL 移动到您想要使用它的任何解决方案中。

# r - 将函数应用于R中的粘贴字符串

> ID：13825088
> 
> 赞同：0
> 
> 时间：2012-12-11T17:11:19.663
> 
> 标签：r, function, paste

我有一个数据框，df，有许多列 cola，colb 等，每列都由整数序列 0 或 1 组成

```
df$cola 
[1] 1 0 0 1 0 1 0 0 etc. 
```

我正在使用 doBy 包中的 subSeq 函数来获取一些序列并希望将其应用于所有列

我尝试将列放入向量中

```
cols <- colnames(df) # "cola" "colb" etc. 
```

并尝试过这种方法但没有成功

```
subSeq(get(paste0("df$",cols[1]))) # error object 'df$cola' not found 
```

无法通过搜索在网站上轻松找到等价物

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:16:12.297

我想你正在寻找`df[[cols[1]]]`.

请注意，`df[["foo"]]`与 相同`df$foo`。

# wordpress - 更改 wordpress（图片）附件页面的 url？

> ID：13825090
> 
> 赞同：1
> 
> 时间：2012-12-11T17:11:19.390
> 
> 标签：wordpress, .htaccess, url-rewriting, permalinks

我遇到以下问题，不知道如何解决：

在 Wordpress 中，我使用附件页面，这些页面是在您将图像添加到帖子/页面时自动生成的。然而，附件页面 url 是基于页面和子页面的，这使得 url 很长而且不漂亮。

附件 url 现在的样子：

**domain.com/page/subpage1/subsubpage/image-title/**

我想将这些附件页面的 url 更改为更简洁的内容，例如：

**domain.com/media/image-title/**

我怎样才能做到这一点？有没有办法重写这些网址？

# c - 多个 realloc 比一个巨大的 malloc 贵吗？

> ID：13825096
> 
> 赞同：4
> 
> 时间：2012-12-11T17:11:38.997
> 
> 标签：c, arrays, malloc, realloc

我正在使用动态数组来表示最小堆。有一个循环删除最小值，并将随机元素添加到最小堆，直到某些条件发生。虽然我不知道堆的长度在运行时会如何变化（有很多随机性），但我知道上限，即 1000 万。我有两个选择：

**1)**使用 malloc 声明一个小数组，然后在堆中的元素数量超过长度时调用 realloc。

**2）**使用malloc声明一个1000万条目数组。这避免了调用 realloc。

**问题**

选项 2 是否比选项 1 更有效？

我用我的代码对此进行了测试，使用 2 似乎显着减少了 (20%) 运行时间。这是由于代码中的随机性而估计的。用 malloc 预先声明一个 10-5000 万的大型条目数组有什么缺点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T17:14:23.380

如果您可以腾出内存来进行大量的前期分配，并且它提供了值得的性能提升，那么一定要这样做。

如果您坚持使用`realloc`，那么您可能会发现每次将大小加倍而不是增加固定数量可以在性能和有效内存使用之间取得良好的折衷。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T18:29:41.143

不是说用realloc的时候，内存会从同一个地方扩展，也有可能会发生内存被移到另一个区域的情况。
因此，使用 realloc 可能会导致复制您之前拥有的内存块。
还要考虑系统调用可能需要一些开销，所以你最好调用一次 malloc 。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T17:15:33.727

缺点是，如果您没有使用所有空间，您将占用大量可能需要的内存。如果您确切知道需要多少字节，由于系统调用开销，一次分配会更有效率，然后逐个分配它。通常你可能有一个上限但不知道确切的数字。花时间分配空间来处理上限可能需要 1 秒。但是，如果这种特殊情况只有上限的一半，则可能需要 0.75 秒来逐个分配。因此，这取决于您认为您将获得的上限有多接近。

# computer-vision - PCLVisualizer 未保持打开状态

> ID：13825097
> 
> 赞同：1
> 
> 时间：2012-12-11T17:11:40.177
> 
> 标签：computer-vision, point-clouds, point-cloud-library

我有以下代码来估计和显示点云中点的法线向量：

```
int main(int argc, char* argv[]) {

      pcl::PointCloud<pcl::PointXYZ>::Ptr cloud (new pcl::PointCloud<pcl::PointXYZ>);

      if (pcl::io::loadPCDFile<pcl::PointXYZ> ("coffee_mug_1_1_1.pcd", *cloud) == -1) //* load the file
      {
        PCL_ERROR ("Couldn't read file coffee_mug_1_1_1.pcd \n");
        return (-1);
      }
      std::cout << "Loaded "
                << cloud->width * cloud->height
                << " data points from test_pcd.pcd with the following fields: "
                << std::endl;

      pcl::NormalEstimation<pcl::PointXYZ, pcl::Normal> ne;
      ne.setInputCloud (cloud);

      // Create an empty kdtree representation, and pass it to the normal estimation object.
      // Its content will be filled inside the object, based on the given input dataset (as no other search surface is given).
      pcl::search::KdTree<pcl::PointXYZ>::Ptr tree (new pcl::search::KdTree<pcl::PointXYZ> ());
      ne.setSearchMethod (tree);

      // Output datasets
      pcl::PointCloud<pcl::Normal>::Ptr cloud_normals (new pcl::PointCloud<pcl::Normal>);

      // Use all neighbors in a sphere of radius 3cm
      ne.setRadiusSearch (0.03);

      // Compute the features
      ne.compute (*cloud_normals);

      cout << "Computed normals " << cloud_normals->width * cloud_normals->height << cloud_normals->points[0] << endl;    

      pcl::visualization::PCLVisualizer viewer("PCL Viewer");

      viewer.setBackgroundColor(0.0, 0.0, 0.5);
      viewer.addPointCloud(cloud);
      viewer.addPointCloudNormals<pcl::PointXYZ,pcl::Normal>(cloud, cloud_normals);
      while (!viewer.wasStopped ())
      {
          viewer.spinOnce ();
      }
} 
```

但是，当我运行它时，PCLVisualizer 在屏幕上闪烁，然后程序终止。我不知道为什么它不留下来。如果我只使用 CloudViewer 来显示点云（而不是法线），那么它可以正常工作并保留在屏幕上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T23:26:56.913

您可以检查 3 件事：

1.  检查您确实没有错误地阅读您的文件。你可以在后面加上一个`cin.get()`right ，`PCL_ERROR ("Couldn't read file coffee_mug_1_1_1.pcd \n");`这样它就不会直接退出，以防它无法读取文件。
2.  如果你想可视化它们，可能你应该给你的法线一个不同的 id，因为我认为现在，你的云和法线都使用 id“云”。检查[正常可视化的 PCL 示例](http://pointclouds.org/documentation/tutorials/pcl_visualizer.php)。（例如`viewer.addPointCloud(cloud, "cloud"); viewer.addPointCloudNormals<pcl::PointXYZ,pcl::Normal>(cloud, cloud_normals, 10, 0.05, "normals"`）；
3.  确保获得法线的有效值。

如果这些作品没有任何效果，您能否将您的咖啡杯 pcd 上传到某个地方并提供链接？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:10:19.670

我发现了我在这里遇到的问题，我没有链接到我正在编译的 boost 库，因为我的链接库路径中有 /usr/lib

# html - 下拉菜单宽度对齐

> ID：13825101
> 
> 赞同：1
> 
> 时间：2012-12-11T17:11:48.990
> 
> 标签：html, css, menu

我之前刚刚针对同一主题发布了我的问题，即[Here](https://stackoverflow.com/questions/13823284/drop-down-menu-width-arrangement)。我从西蒙先生那里得到了正确的答案，多亏了他。我又发现了一个问题，下拉菜单的宽度非常小，而且不是一行，请[点击这里](http://www.fedri.com/bh/)了解详情。我希望文字排成一行...

此外，他说使用以下代码删除菜单文件中的最后一个拆分器。我不知道把这个放在哪里。你能帮我吗。。谢谢。。

```
$('.green ul.mega-menu li:last-child a').css('background','none'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:21:55.723

尝试将此添加到您的 CSS 中：

```
.mega-menu a { white-space: nowrap; } 
```

对于第二个问题（导航项目的宽度）：

删除以下 CSS 声明中的固定宽度（我将更`text-align: center`改为）：`text-align: left`

```
.green ul.mega-menu li a {
    background: url("images/bg_green.png") repeat-x scroll 100% 0 transparent;
    color: #000000;
    display: block;
    float: left;
    padding: 12px 38px 12px 25px;
    text-align: center; /* <--- Change this to text-align: left; */
    text-decoration: none;
    text-shadow: 1px 1px 1px #FFFFFF;
    width: 102px; /* <--- Remove this */
} 
```

# php - 未定义函数 mysql_connect()

> ID：13825108
> 
> 赞同：94
> 
> 时间：2012-12-11T17:12:12.137
> 
> 标签：php, mysql, ubuntu, mysql-connect, undefined-function

我已经运行`aptitude install php5-mysql`（并重新启动了 MySQL/Apache 2），但我仍然收到此错误：

> 致命错误：在第 21 行的 /home/validate.php 中调用未定义函数 mysql_connect()

`phpinfo()`表示 /etc/php5/apache2/conf.d/pdo_mysql.ini 文件已被解析。

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2016-06-17T09:15:04.057

如果您已经在使用 PHP7，则以前不推荐使用的函数`mysql_*`已被完全删除，因此您应该使用 PDO 函数或`mysqli_*`函数来更新您的代码。

如果这不可能，作为一种**解决方法**，我创建了一个小的 PHP 包含文件，它`mysql_*`使用 -functions 重新创建旧函数`mysqli_*()`：[fix_mysql.inc.php](https://github.com/rubo77/php-mysql-fix)

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2012-12-11T17:31:45.400

我看到你用 Ubuntu 标记了这个。很可能没有安装 MySQL 驱动程序（也可能是 MySQL）。假设您具有[SSH](http://en.wikipedia.org/wiki/Secure_Shell)或终端访问权限和 sudo 权限，请登录服务器并运行以下命令：

```
sudo apt-get install mysql-server mysql-client php5-mysql 
```

如果 MySQL 包或 php5-mysql 包已经安装，这将更新它们。

* * *

**更新**

由于这个答案仍然偶尔点击我将更新它以包括**PHP 7**。PHP 7 需要不同的 MySQL 包，因此您需要为 apt-get 命令使用不同的参数。

```
# Replace 7.4 with your version of PHP
sudo apt-get install mysql-server mysql-common php7.4 php7.4-mysql 
```

重要的是，`mysql_connect()`自 PHP v5.5.0 起已弃用。请参阅此处的官方文档：[PHP：mysql_connect()](http://php.net/manual/en/function.mysql-connect.php)

* * *

## 回答 #3

> 赞同：58
> 
> 时间：2012-12-11T17:13:48.940

好吧，这是你的机会！看起来[PDO](http://php.net/manual/en/book.pdo.php)已经准备好了；改用它。

尝试检查是否正在加载 PHP MySQL 扩展模块：

```
<?php
    phpinfo();
?> 
```

如果不存在，请将以下内容添加到`php.ini`文件中：

```
extension=php_mysql.dll 
```

* * *

## 回答 #4

> 赞同：51
> 
> 时间：2016-08-04T03:07:28.187

如果有人遇到[docker php official images](https://hub.docker.com/_/php/)的问题，请在 docker 容器中输入以下命令。

```
$ docker-php-ext-install mysql mysqli pdo pdo_mysql 
```

有关更多信息，请参阅上面的链接`How to install more PHP extensions`部分（但这对我来说有点困难......）。

或者这个文档可以帮助你。

> [https://docs.docker.com/samples/library/php/](https://docs.docker.com/samples/library/php/)

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2017-08-12T11:26:25.070

我也遇到了未定义的 MySQL_connect() 的相同问题。我试图在 PHP.ini 文件中进行更改，但它给了我同样的错误。然后我来到了这个解决方案，我将代码从折旧的 php 函数更改为新函数。

```
$con=mysqli_connect($host,$user,$password);

mysqli_select_db($con,dbname); 
//To select the database

session_start(); //To start the session

$query=mysqli_query($con,your query); 
//made query after establishing connection with database. 
```

我希望这能帮到您 。这个解决方案对我来说是正确的。

编辑：

如果你从旧的 php 升级，你需要`apt-get install php7.0-mysql`

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2012-12-11T17:39:44.947

尝试：

```
<?php
  phpinfo();
?> 
```

运行页面并搜索`mysql`. 如果未找到，请在 shell 中运行以下命令并重新启动 Apache 服务器：

```
sudo apt-get install mysql-server mysql-client php5-mysql 
```

还要确保在 apache2.conf（或 conf.d/php.ini）文件中的某处未注释以下所有行，来自

```
;extension=php_mysql.so 
```

到

```
extension=php_mysql.so 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2016-09-20T13:18:12.010

在 php.ini 文件中

改变这个

```
;extension=php_mysql.dll 
```

进入

```
extension=php_mysql.dll 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2012-12-11T17:40:41.270

我的猜测是您的 PHP 安装没有使用 MySQL 支持编译。

检查您的配置命令 ( `php -i | grep mysql`)。你应该看到类似的东西`'--with-mysql=shared,/usr'`。

[您可以在http://php.net/manual/en/mysql.installation.php](http://php.net/manual/en/mysql.installation.php)查看完整的说明。虽然，我宁愿采用@wanovak 提出的解决方案。

不过，我认为您需要 MySQL 支持才能使用 PDO。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-12-09T16:48:53.830

该问题被标记为`ubuntu`，但取消注释的解决方案`extension=mysqli.dll`是特定于 windows 的。我在这里很困惑？！无论如何，首先运行并在标题下`<? php phpinfo ?>`搜索。如果你没有看到这样的东西意味着你没有安装或启用。所以先安装`mysql*``Configuration``php-mysql``php-mysql`

`sudo apt get install php-mysql`

此命令将`php-mysql`根据`php`您已安装的版本进行安装，因此无需担心版本！！。

然后是unix特定的解决方案，在`php.ini`文件中取消注释该行

```
extension=msql.so 
```

验证`msql.so`是否存在`/usr/lib/php/<timestamp_folder>`于 **ELSE**

```
extension=path/to/msql.so 
```

然后最后重新启动`apache`和`mysql`服务，您现在应该看到标题`mysql`下的部分`Configrations``phpinfo page`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-08-09T19:16:21.590

我收到此错误是因为我正在处理的项目是在 php 5.6 上开发的，安装后，该项目无法在 php7.1 上运行。

对于任何在 ubuntu/nginx 中使用 Vagrant 的人，在 nginx 目录（/etc/nginx/）中，有一个名为“sites-available”的目录，其中包含一个名称类似于为 vagrant 机器配置的 url 的文件。在我的例子中是 homestead.app。在这个文件中有一行写着类似

```
 fastcgi_pass unix:/var/run/php/php7.1-fpm.sock; 
```

在那里，您可以将 php 版本更改为该特定站点所需的版本。

谷歌搜索了这个，但并没有真正找到一个简单的答案，说明在哪里寻找和改变什么。

希望这对任何人都有帮助。谢谢。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-10-07T21:32:21.587

适用于 CentOS 7.8 和 PHP 7.3

```
yum install rh-php73-php-mysqlnd 
```

然后重启apache/php。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2016-05-04T08:19:16.017

如果您收到错误消息

> 致命错误：调用未定义函数 mysql_connect()

请登录 cPanel **>>**点击选择 PHP 版本**>>**选择扩展名 MYSQL

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2015-07-11T18:10:00.530

一定有一些语法错误。复制/粘贴此代码，看看它是否有效：

```
<?php
    $link = mysql_connect('localhost', 'root', '');
    if (!$link) {
        die('Could not connect:' . mysql_error());
    }
    echo 'Connected successfully';
    ? 
```

我有同样的错误信息。原来我使用的是`msql_connect()`函数而不是`mysql_connect()`.

* * *

## 回答 #14

> 赞同：-3
> 
> 时间：2016-04-24T14:29:24.247

（Windows mysql 配置）

第 1 步：转到 Apache 控制面板 > Apache > 配置 > PHP.ini

第 2 步：在记事本 (Ctrl+F) 中搜索：（`;extension_dir = ""`可以用 注释`;`）。将此行替换为：（`extension_dir = "C:\php\ext"`请不要删除`;`句子开头的）。

第 3 步：搜索：`extension=php_mysql.dll`并删除`;`开头的。

第 4 步：保存并重新启动 Apache HTTP 服务器。（在 Windows 上，这通常通过 UI 完成）

就是这样 ：）

如果您收到有关丢失的错误，`php_mysql.dll`您可能需要从 php.net 站点或 pecl.php.net 下载此文件。（请注意你从哪里得到它）

有关 PHP 的更多信息[：在 Windows 上安装扩展 - 手册](http://php.net/manual/it/install.windows.extensions.php)

# kendo-ui - 无法在 KendoUI 树视图中取消选择选定节点

> ID：13825109
> 
> 赞同：4
> 
> 时间：2012-12-11T17:12:12.360
> 
> 标签：kendo-ui, kendo-treeview

我有一个使用 Kendo UI 树视图的树状结构。每个节点都显示为一个超链接，单击每个节点时，`kendotabstrip`将打开一个新节点。我的问题是，如果我选择一个节点，结果会在新选项卡中正常显示，但是如果我关闭新打开的选项卡然后选择同一个节点，则不会打开新选项卡，因为该节点已被选中。如果我必须选择同一个节点，那么我必须访问另一个节点，然后再回到节点。

使用以下代码段打开新选项卡后，我尝试取消选择所选项目：

```
var treeview=$(#grpTree).data("KendoTreeView");

var selNode=treeview.select(); 

selNode.find("span.k-state-selected").removeClass("k-state-selected") 
```

但该节点没有被取消选择。有没有其他方法可以做到这一点，或者我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-26T18:41:31.883

我知道这篇文章有点过时了，但是随着 Telerik 不断升级它的组件，我想我会把它放在这里，以便人们可以意识到这一变化正在向前发展。

您可以使用以下语法取消选择所有选定的节点：

```
 var treeView = $("#treeView").data("kendoTreeView");
    treeView.select($()); 
```

资料来源：[Kendo UI Treeview Documentation for Select](http://docs.kendoui.com/api/web/treeview#methods-select)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T21:48:58.490

是的，这是设计使然。如果你想附加一个每次都会触发的点击处理程序（无论节点是否已经被选中）。您可以附加一个委托事件，如下所示：

```
$('#treeviewName').on('click','.k-item',function(e){
      var clickedNode = $(this);
      var treeViewClientObject = $(e.delegateTarget).data().kendoTreeView;
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-17T04:27:13.623

我的代码：

```
var treeview=$(#grpTree).data("KendoTreeView");

treeview.select(null); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-15T12:36:04.707

这总是调用 change 函数，所以这可以是另一种解决方案：

```
 $("#favorite_tree").kendoTreeView({
change: function () {
    if (this.dataItem(this.select())) {
        var treeView = $("#calendar_tree").data("kendoTreeView");
        treeView.select($());
    }
}
}).data('kendoTreeView');

$("#calendar_tree").kendoTreeView({
change: function () {
    if (this.dataItem(this.select())) {
        var treeView = $("#favorite_tree").data("kendoTreeView");
        treeView.select($());
    }
 }
}).data('kendoTreeView'); 
```

# perl - 如何检测 __WARN__ 处理程序是否由于显式警告（）而被调用？

> ID：13825110
> 
> 赞同：2
> 
> 时间：2012-12-11T17:12:14.343
> 
> 标签：perl

我有一个`$SIG{__WARN__}`处理程序。有没有办法确定它是由于显式`warn`调用还是 Perl 生成的警告（例如使用未定义的变量）而被调用的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T20:37:43.580

警告消息是传递给处理程序的内容，如

```
$SIG{__WARN__} = sub {
    my $warning = shift;
    #do something with warning.
} 
```

# c# - C#为同一个键数组多个值

> ID：13825111
> 
> 赞同：0
> 
> 时间：2012-12-11T17:12:26.523
> 
> 标签：c#, winforms, collections, dictionary

我正在尝试遍历 xmlnodecollection 并获取谷歌地图标记的一些值。我正在尝试使用字典，但它不适用于集合中的多个节点。

我希望能够为同一个键保存一个以上的键值对。这是我所拥有的：

```
 Dictionary<string, string> mapValues = new Dictionary<string, string>();
        foreach (XmlNode node in listProperties)
        {
            row = tblResults.NewRow();                
            row["Id"] = node.Attributes[0].Value;           
            row["Latitude"] = node["Location"].Attributes[0].Value;
            row["Longitude"] = node["Location"].Attributes[1].Value;
            row["City"] = node["Location"].Attributes[2].Value;
            row["Address"] = node["Location"].Attributes[3].Value;
            row["ZipCode"] = node["Location"].Attributes[4].Value;
            row["State"] = node["Location"].Attributes[5].Value;
            mapValues.Add("Latitude", node["Location"].Attributes[0].Value);
            mapValues.Add("Longitude", node["Location"].Attributes[1].Value);
            mapValues.Add("City", node["Location"].Attributes[2].Value);
            mapValues.Add("Address", node["Location"].Attributes[3].Value);
            mapValues.Add("ZipCode", node["Location"].Attributes[4].Value);
            mapValues.Add("State", node["Location"].Attributes[5].Value);

            tblResults.Rows.Add(row);
        }
       GenerateMap(mapValues); 
```

然后在 GenerateMap 我想使用这些值并将标记放在地图对象上：

```
 private void GenerateMap(Dictionary<string, string> mapInfo)
        {
            gMapControl1.SetCurrentPositionByKeywords("USA");
            gMapControl1.MinZoom = 3;
            gMapControl1.MaxZoom = 17;
            gMapControl1.Zoom = 4;

            gMapControl1.Manager.Mode = GMap.NET.AccessMode.ServerAndCache;
            gMapControl1.Position = new GMap.NET.PointLatLng(29.60862, -82.43821);
            gMapControl1.MapProvider = GMap.NET.MapProviders.GoogleMapProvider.Instance;
            GMap.NET.WindowsForms.GMapOverlay address_overlay = new GMap.NET.WindowsForms.GMapOverlay(gMapControl1, "Address1");

            foreach (KeyValuePair<string, string> info in mapInfo)
            {
                PointLatLng pnl = new PointLatLng(Convert.ToDouble(info.Value[0]), Convert.ToDouble(info.Value[1]));
                GMapMarkerGoogleRed marker = new GMapMarkerGoogleRed(pnl);
                MarkerTooltipMode mode = MarkerTooltipMode.OnMouseOver;
                marker.ToolTipMode = mode;
                marker.ToolTipText = info.Value[2] + ", " + info.Value[3] + ", " + info.Value[4] + ", " + info.Value[5];
                address_overlay.Markers.Add(marker);
            }
            gMapControl1.Overlays.Add(address_overlay);
        } 
```

我怎样才能做到这一点？我在 Windows 窗体应用程序中使用此代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:52:17.227

您应该创建一个包含您需要的属性的类，然后创建一个列表，而不是做您当前正在做的事情。它很简单，而且更容易阅读。

```
public class MapValues
{
    public string Latitude { get; set; }
    public string Longitude{ get; set; }
    public string City{ get; set; }
    public string Address{ get; set; }
    public string ZipCode{ get; set; }
    public string State{ get; set; }

    public MapValues(string latitude, string longitude, string city, string address, string zipCode, string state)
    {
        this.Latitude = latitude;
        this.Longitude= longitude;
        this.City= city;
        this.Address= address;
        this.ZipCode= zipCode;
        this.State= state;
    }
} 
```

将您的代码更改为以下内容：

```
 List<MapValues> mapValues = new List<MapValues>();
    foreach (XmlNode node in listProperties)
    {
        row = tblResults.NewRow();                
        row["Id"] = node.Attributes[0].Value;           
        row["Latitude"] = node["Location"].Attributes[0].Value;
        row["Longitude"] = node["Location"].Attributes[1].Value;
        row["City"] = node["Location"].Attributes[2].Value;
        row["Address"] = node["Location"].Attributes[3].Value;
        row["ZipCode"] = node["Location"].Attributes[4].Value;
        row["State"] = node["Location"].Attributes[5].Value;

        mapValues.Add(
            new MapValues(
               row["Latitude"],
               row["Longitude"],
               row["City"],
               row["Address"],
               row["ZipCode"],
               row["State"]));

        tblResults.Rows.Add(row);
    }
    GenerateMap(mapValues); 
```

您更新的方法：

```
 private void GenerateMap(List<MapValues> mapInfo)
    {
        gMapControl1.SetCurrentPositionByKeywords("USA");
        gMapControl1.MinZoom = 3;
        gMapControl1.MaxZoom = 17;
        gMapControl1.Zoom = 4;

        gMapControl1.Manager.Mode = GMap.NET.AccessMode.ServerAndCache;
        gMapControl1.Position = new GMap.NET.PointLatLng(29.60862, -82.43821);
        gMapControl1.MapProvider = GMap.NET.MapProviders.GoogleMapProvider.Instance;
        GMap.NET.WindowsForms.GMapOverlay address_overlay = new GMap.NET.WindowsForms.GMapOverlay(gMapControl1, "Address1");

        foreach (MapValues info in mapInfo)
        {
            PointLatLng pnl = new PointLatLng(Convert.ToDouble(info.Latitude), Convert.ToDouble(info.Longitude));
            GMapMarkerGoogleRed marker = new GMapMarkerGoogleRed(pnl);
            MarkerTooltipMode mode = MarkerTooltipMode.OnMouseOver;
            marker.ToolTipMode = mode;
            marker.ToolTipText = info.City + ", " + info.Address + ", " + info.ZipCode + ", " + info.State;
            address_overlay.Markers.Add(marker);
        }
        gMapControl1.Overlays.Add(address_overlay);
    } 
```

# c# - 方法覆盖和可选参数

> ID：13825113
> 
> 赞同：31
> 
> 时间：2012-12-11T17:12:34.217
> 
> 标签：c#, inheritance, optional-parameters, overriding

有人愿意解释这段代码如何产生以下输出吗？

```
using System;

namespace ConsoleApplication1
{
    class Test
    {
        public override string ToString() { return "ToString override"; }
        public string ToString(string optional = "")
          { return String.Format("ToString with optional parameter {0}", optional); }
    }

    class Test2
    {
        public new string ToString() { return "ToString new"; }
        public string ToString(string optional = "")
          { return String.Format("ToString with optional parameter {0}", optional); }
    }

    class Program
    {
        static void Main(string[] args)
        {
            Test one = new Test();
            Test2 two = new Test2();
            Console.WriteLine(one);
            Console.WriteLine(one.ToString());
            Console.WriteLine(one.ToString("foo"));
            Console.WriteLine("--");
            Console.WriteLine(two);
            Console.WriteLine(two.ToString());
            Console.WriteLine(two.ToString("bar"));
            Console.ReadKey();
        }
    }
} 
```

> ToString 覆盖
> 
> 带有可选参数的 ToString
> 
> 带有可选参数 foo 的 ToString
> 
> --
> 
> ConsoleApplication1.Test2
> 
> 新的 ToString
> 
> 带有可选参数 bar 的 ToString

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-12-11T17:27:04.857

好的，由于普遍感兴趣，这里有一个快速版本：

**Console.WriteLine(一)**

这将使用`WriteLine(object)`重载，而重载将依次执行`object.ToString()`被覆盖的虚方法`One`- 因此输出`ToString override`

**Console.WriteLine(one.ToString())**

这将查看`One`并查看哪些方法具有*新声明的方法*- 折扣覆盖。只有一种这样的方法是适用的——带有可选参数的方法。这样就可以使用默认值执行，导致输出`ToString with optional parameter`.

**Console.WriteLine(one.ToString("foo"))**

再次相同，但这次编译器不需要使用默认值，因此`ToString with optional parameter foo`

**Console.WriteLine(二)**

同样，这`object.ToString()`将从`WriteLine(object)`. 该方法尚未被覆盖，因此使用返回类型名称的默认实现，导致输出`ConsoleApplication1.Test2`.

**Console.WriteLine(two.ToString())**

编译器查看所有声明的方法，`Two`其中*没有*覆盖虚拟方法。在这种情况下，有两种这样的方法——一种是无参数的，另一种是带可选参数的。包含无参数的方法是因为它是*新*的，而不是覆盖基类方法。

无参数方法被认为是“更好”的候选方法，因为编译器更喜欢调用不需要填充任何可选参数的方法。因此输出为`ToString new`

**Console.WriteLine(two.ToString("bar"))**

同样，编译器会查看所有声明的方法，`Two`其中*没有*覆盖虚拟方法。在这种情况下，有两种这样的方法 - 但无参数的方法不适用，只留下带有可选参数的方法。编译器不需要在这里*使用*可选参数的默认值，因为它有一个参数......所以输出是`ToString with optional parameter bar`

有关这方面的更多信息，请阅读 C# 语言规范 - 或者对于中途之家，请参阅我[关于重载的文章](http://csharpindepth.com/Articles/General/Overloading.aspx)。

# c# - OpacityMask 动画

> ID：13825114
> 
> 赞同：0
> 
> 时间：2012-12-11T17:12:35.743
> 
> 标签：c#, .net, wpf

这个擦除动画只发生一次。为什么不能重复？

**XAML**

```
<Grid>
      <MediaElement Source="" x:Name="Player1" Stretch="Fill"   />
</Grid> 
```

**C＃**

```
 DispatcherTimer timer = new DispatcherTimer(priority: DispatcherPriority.Background);

    public MainWindow()
    {
                InitializeComponent();
                timer.Tick += timer_Tick;
                timer.Interval = TimeSpan.FromSeconds(10);
                timer.Start();

                Loaded += MainWindow_Loaded;
                Player1.LoadedBehavior = MediaState.Manual;

                Player1.Source = new Uri(@"C:\Temp\3.mov");   
    }

    void timer_Tick(object sender, EventArgs e)
    {

                Player1.Stop();
                Player1.Play();
                WipeAnimation(Player1);
    }

    GradientStop BlackStop = new GradientStop(Colors.Black, 0);
    GradientStop TransparentStop = new GradientStop(Colors.Transparent, 0);

    public void WipeAnimation(FrameworkElement ObjectToAnimate)
    {   
                ObjectToAnimate.OpacityMask = null;
                LinearGradientBrush OpacityBrush = new LinearGradientBrush();

                OpacityBrush.GradientStops.Add(BlackStop);
                OpacityBrush.GradientStops.Add(TransparentStop);

                ObjectToAnimate.OpacityMask = OpacityBrush;

                Duration d = TimeSpan.FromSeconds(4);
                Storyboard sb = new Storyboard() { Duration = d };
                DoubleAnimation DA = new DoubleAnimation() { By = 1, Duration = d };
                DoubleAnimation DA2 = new DoubleAnimation() { By = 1, Duration = d };
                this.RegisterName("TransparentStop", TransparentStop);
                this.RegisterName("BlackStop", BlackStop);

                sb.Children.Clear();
                sb.Children.Add(DA); sb.Children.Add(DA2);
                Storyboard.SetTargetName(DA, "TransparentStop");
                Storyboard.SetTargetName(DA2, "BlackStop");
                Storyboard.SetTargetProperty(DA, new PropertyPath("Offset"));
                Storyboard.SetTargetProperty(DA2, new PropertyPath("Offset"));
                sb.Completed += sb_Completed;
                sb.Begin(this);
    }

    void sb_Completed(object sender, EventArgs e)
    {
    } 
```

****** *****更新* ***** ** *** ** *** ** *** *****

 **我用 WPF Image 控件做了同样的测试，得到了同样的结果。动画仅通过 1 次。

为什么？

```
 public partial class MainWindow : Window
    {
        DispatcherTimer timer = new DispatcherTimer(DispatcherPriority.Background);
        GradientStop BlackStop = new GradientStop(Colors.Black, 0);
        GradientStop TransparentStop = new GradientStop(Colors.Transparent, 0);

        public MainWindow()
        {
            InitializeComponent();

            imgFace.CacheMode = new BitmapCache();

            this.RegisterName("TransparentStop", TransparentStop);
            this.RegisterName("BlackStop", BlackStop);

            timer.Interval = TimeSpan.FromSeconds(10);
            timer.Tick += timer_Tick;
            timer.Start();

            LinearGradientBrush OpacityBrushReset = new LinearGradientBrush(); 
         GradientStop TransparentStopReset = new GradientStop(Colors.Transparent, 0);
         OpacityBrushReset.GradientStops.Add(TransparentStopReset);
         imgFace.OpacityMask = OpacityBrushReset;
        }

        void timer_Tick(object sender, EventArgs e)
        {          
            WipeAnimation(imgFace);
            Debug.WriteLine("A");
        }

        public void WipeAnimation(FrameworkElement ObjectToAnimate)
        {
            LinearGradientBrush OpacityBrush = new LinearGradientBrush();
            OpacityBrush.StartPoint = new Point(1, 0);
            OpacityBrush.EndPoint = new Point(0, 0);

            OpacityBrush.GradientStops.Add(BlackStop);
            OpacityBrush.GradientStops.Add(TransparentStop);
            ObjectToAnimate.OpacityMask = OpacityBrush;         

            Duration d = TimeSpan.FromSeconds(4);
            Storyboard sb = new Storyboard() { Duration = d };
            DoubleAnimation DA = new DoubleAnimation() { By = 1, Duration = d };
            DoubleAnimation DA2 = new DoubleAnimation() { By = 1, Duration = d };
            sb.Children.Add(DA); sb.Children.Add(DA2);
            Storyboard.SetTargetName(DA, "TransparentStop");
            Storyboard.SetTargetName(DA2, "BlackStop");
            Storyboard.SetTargetProperty(DA, new PropertyPath("Offset"));
            Storyboard.SetTargetProperty(DA2, new PropertyPath("Offset"));
            sb.Completed += sb_Completed;
            sb.Begin(this);
        }

        void sb_Completed(object sender, EventArgs e)
        {
            imgFace.OpacityMask = null;
        }
    }

<Grid>

    <Image x:Name="imgFace" Source="face_avril.jpg" Stretch="Fill" HorizontalAlignment="Left" Height="176" Margin="24,34,0,0" VerticalAlignment="Top" Width="319">
        <!--<Image.OpacityMask>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                <GradientStop Offset="0" Color="Black" x:Name="BlackStop"/>
                <GradientStop Offset="0" Color="Transparent" x:Name="TransparentStop"/>
            </LinearGradientBrush>
            </Image.OpacityMask>-->
    </Image>
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:43:14.767

你有没有尝试过：

```
DoubleAnimation DA = new DoubleAnimation() { From = 0, To = 1, Duration = d };
DoubleAnimation DA2 = new DoubleAnimation() { From = 0, To = 1, Duration = d }; 
```

这样，`Offset`在动画再次开始之前，属性将被重置为其原始值**

# c# - 不同进程中表单之间的通信

> ID：13825115
> 
> 赞同：0
> 
> 时间：2012-12-11T17:12:36.990
> 
> 标签：c#, winforms, wcf

我正在尝试执行以下操作：

我有一个带有 textBox 的 form1 和以下方法：

```
public void ChangeText()
{
    textBox.Text = "A";
} 
```

应用程序运行 Form1 类的表单——我们将其称为 mainForm。该主窗体启动了另一个进程，该进程创建了 Form1 类的另一种形式——我们称之为 childForm。

我现在想单击 mainForm 上的一个按钮并`ChangeText()`调用 childForm 的方法，以便 childForm 的 textBox 是受影响的。

我一直在寻找一段时间，我似乎无法让它工作。我不完全确定这是否可能。

API 似乎根本没有给我选项，并且使用 WCF 正在调用该方法，但无法识别原始形式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T17:02:36.740

当然，这是可能的，但由于这两种形式位于不同的进程中，因此您需要一个进程间通信 (IPC) 机制，例如[.NET Remoting](http://msdn.microsoft.com/en-us/library/kwdt6w2k%28v=vs.100%29.aspx)或[Windows Communication Foundation](http://msdn.microsoft.com/en-us/library/dd456779.aspx)。或者你可以使用[这种技术](http://code.msdn.microsoft.com/windowsdesktop/CSSendWMCOPYDATA-97e6644e)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-11T17:17:07.517

假设您要在途中编辑逻辑

--

如果 mainForm 实例化 childForm 那么它也应该持有对它的引用。

即私有Form childForm = new Form();

调用 mainForm.ChangeText() ，它看起来像这样（这被事件调用，因此参数实际上是事件和发送者参数）：

```
public void ChangeText(EventArgs e, Sender sender)
{
   this.childForm.ChangeText(EventArgs e, Sender sender)
} 
```

如果您将其公开，您也可以直接访问文本框

IE

```
this.childForm.textBox1.Text = text 
```

*   更正了另一个用户指出的访问者错误

# php - 循环遍历 PHP 数组

> ID：13825117
> 
> 赞同：1
> 
> 时间：2012-12-11T17:12:41.470
> 
> 标签：php, arrays, loops

我有以下 PHP 数组结构：

```
$set = array();
$set[] = array('firstname'=>'firstname 1',
           'lastname'=>'lastname 1',
            "bio"=>array('paragraph 1 of the bio, 'paragraph 2 of the bio','paragraph 3 of the bio'),
           ); 
```

然后我使用以下命令访问数组：

```
 <?php $counter = 0;
  while ($counter < 1) :  //1 for now
  $item = $set[$counter]?>  

    <h1><?php echo $item['firstname'] ?></h1>
    <h1><?php echo $item['lastname'] ?></h1>

  <?php endwhile; ?> 
```

我不确定如何循环遍历数组的“bio”部分并回显每个段落。

所以作为最终输出，我应该有两个 h1（名字和姓氏）和三个段落（简历）。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T17:14:40.277

使用`foreach`循环

```
foreach($item['bio'] as $listitem) {
   echo $listitem;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T17:17:54.853

在while循环中也加入这个：

```
 <?php foreach ($item['bio'] as $paragraph): ?>
    <p><?php echo $paragraph; ?></p>
  <?php endforeach; ?> 
```

*请注意，使用的编码风格不是最佳的。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T17:18:13.240

您不需要使用手动计数器，您可以使用 foreach。这通常是最简单的方法，可以防止出现错误。

然后你需要第二个内部循环来循环遍历生物。

```
<?php foreach ($set as $item): ?>  
    <h1><?php echo $item['firstname'] ?></h1>
    <h1><?php echo $item['lastname'] ?></h1>
    <?php foreach ($item['bio'] as $bio): ?>
        <p><?php echo $bio; ?></p>
    <?php endforeach; ?>
<?php endforeach; ?> 
```

在相关说明上；您可能想研究转义您的输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T17:27:06.140

尝试：

```
foreach($set as $listitem) {
if(is_array($listitem)) {
 foreach($listitem as $v) //as $set['bio'] is an array
  echo '<h1>' .$v . '</h1>';
} else  
 echo '<p>'.$listitem.'</p>';
} 
```

# java - 在 jDesktopPane 中打开新的 jInternalFrame 时如何关闭以前的 jInternalFrame

> ID：13825120
> 
> 赞同：1
> 
> 时间：2012-12-11T17:13:13.377
> 
> 标签：java, swing, netbeans-7, jinternalframe, jdesktoppane

我在使用时创建了`MDI`（多文档界面），其中我有两个 jbuttons 和一个 jdesktoppane，所以当单击两个按钮时，两个 jinternalframes 都在同一个 jdesktoppane 中打开，所以我想在什么时候打开？`java``netbeans``close previous jinternalframe``open new jinternalframe``jdesktoppane`

检查快照以更好地了解我的问题我想要什么... ![在此处输入图像描述](../Images/7b87e98e95058ce0bca4663b0b6b67de.png)

**第一个 jButton 代码：**

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
      try
      {

       tst t = new tst();
        JInternalFrame internalFrame1 = new JInternalFrame("Test Window1"); 
        internalFrame1.add(t.getContentPane());
        internalFrame1.pack();

        internalFrame1.setVisible(true);
        q.add(internalFrame1);

        internalFrame1.setClosable(true);  

        BasicInternalFrameUI ui = (BasicInternalFrameUI)internalFrame1.getUI();
        Container north = (Container)ui.getNorthPane();
        north.remove(0);
        north.validate();
        north.repaint();

        for(MouseListener listener : ((javax.swing.plaf.basic.BasicInternalFrameUI) internalFrame1.getUI()).getNorthPane().getMouseListeners()){
        ((javax.swing.plaf.basic.BasicInternalFrameUI) internalFrame1.getUI()).getNorthPane().removeMouseListener(listener);
        }

         internalFrame1.setSelected(true);

      }
      catch(Exception ex)
      {
          JOptionPane.showMessageDialog(null, ex);
      }
    } 
```

**第二个按钮代码：**

```
private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {                                         
        try
        {

        zxy z = new zxy();
        JInternalFrame internalFrame = new JInternalFrame("Test Window2"); 
        internalFrame.add(z.getContentPane());
        internalFrame.pack();
        internalFrame.setSize(570,420);

        internalFrame.setVisible(true);
        q.add(internalFrame);

        internalFrame.setClosable(true);  

        BasicInternalFrameUI ui = (BasicInternalFrameUI)internalFrame.getUI();
        Container north = (Container)ui.getNorthPane();
        north.remove(0);
        north.validate();
        north.repaint();

        for(MouseListener listener : ((javax.swing.plaf.basic.BasicInternalFrameUI) internalFrame.getUI()).getNorthPane().getMouseListeners()){
        ((javax.swing.plaf.basic.BasicInternalFrameUI) internalFrame.getUI()).getNorthPane().removeMouseListener(listener);
        }

         internalFrame.setSelected(true);

        }
      catch(Exception ex)
      {
          JOptionPane.showMessageDialog(null, ex);
      }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T17:22:51.960

只需调用`dispose()`实例`JInternalFrame`。

为此，您需要将`JInternalFrame`声明移出方法，以便我们可以检查实例是否不`null`存在（因此存在现有实例，`dispose()`然后在创建新实例之前调用该实例：

```
JInternalFrame internalFrame1;

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
      try
      {

       if(internalFrame1 !=null) {//make sure its not null
           internalFrame1.dispose();//close the previos internalframe
       }

        tst t = new tst();
        internalFrame1 = new JInternalFrame("Test Window1"); //create new instance of internal frame
        internalFrame1.add(t.getContentPane());
        internalFrame1.pack();

        internalFrame1.setVisible(true);
        q.add(internalFrame1);

        internalFrame1.setClosable(true);  

        BasicInternalFrameUI ui = (BasicInternalFrameUI)internalFrame1.getUI();
        Container north = (Container)ui.getNorthPane();
        north.remove(0);
        north.validate();
        north.repaint();

        for(MouseListener listener : ((javax.swing.plaf.basic.BasicInternalFrameUI) internalFrame1.getUI()).getNorthPane().getMouseListeners()){
        ((javax.swing.plaf.basic.BasicInternalFrameUI) internalFrame1.getUI()).getNorthPane().removeMouseListener(listener);
        }

         internalFrame1.setSelected(true);

      }
      catch(Exception ex)
      {
          JOptionPane.showMessageDialog(null, ex);
      }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-06T17:41:41.407

试试这个。

将此添加到您的 JButton 事件中：

```
JDesktopPane.removeAll();
JDesktopPane.updateUI();

//then add the JInternalFrame into the JDesktopPane
```

我知道，我知道，这个问题是 2 年前的，但希望这对其他人有帮助:)

# python - Python - 我如何编写一个“getter”函数来返回一个存储在我的模块中的变量（如果需要，首先启动它）？

> ID：13825122
> 
> 赞同：0
> 
> 时间：2012-12-11T17:13:23.723
> 
> 标签：python

> **可能重复：**
> [UnboundLocalError：分配前引用的局部变量“url_request”](https://stackoverflow.com/questions/13798609/unboundlocalerror-local-variable-url-request-referenced-before-assignment)

这是我的模块的完整代码，称为`util.py`：

```
import my_other_module

__IMPORTANT_OBJECT__ = None

def getImportantObject():
    if __IMPORTANT_OBJECT__ is None:
        __IMPORTANT_OBJECT__ = my_other_module.ImportantObject()
    return __IMPORTANT_OBJECT__ 
```

我的理解是带有双下划线前缀的变量被认为是模块私有的。这里的想法是我想存储对重要对象的私有引用，并将其返回给通过该`getImportantObject()`方法请求它的任何人。但我不希望在第一次调用此方法之前启动对象。

但是，当我运行代码时，出现以下错误：

```
File "/Users/Jon/dev/util.py", line 6, in getImportantObject
    if __IMPORTANT_OBJECT__ is None:
UnboundLocalError: local variable '__IMPORTANT_OBJECT__' referenced before assignment 
```

完成我在这里尝试做的事情的推荐方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T17:15:07.673

该变量不被认为是私有的；相反，它被视为局部变量。

使用`global`关键字将其标记为：

```
def getImportantObject():
    global __IMPORTANT_OBJECT__
    if __IMPORTANT_OBJECT__ is None:
        __IMPORTANT_OBJECT__ = my_other_module.ImportantObject()
    return __IMPORTANT_OBJECT__ 
```

# java - JButton中不透明像素的事件检测

> ID：13825123
> 
> 赞同：2
> 
> 时间：2012-12-11T17:13:37.023
> 
> 标签：java, swing, jbutton, paintcomponent

我有一个扩展类`JButton`，我正在尝试将*.png*图像应用到该类。图像形状不规则，被透明像素包围。我已经覆盖了`paintComponent()`将`JButton`我的缓冲图像应用于按钮的方法。现在，图像是唯一被绘制的东西，这就是我想要的。

但是，该按钮仍在检测其周围矩形中的事件。有没有办法将检测限制在仅包含不透明像素的区域（或者*不*检测透明像素上的事件）？

按钮类的代码如下。

```
public class DrawButton extends JButton{

    private BufferedImage bi;

    public DrawButton(BufferedImage bi){
        setPreferredSize(new Dimension(bi.getWidth(), bi.getHeight()));
        this.bi = bi;
    }

    @Override
    protected void paintComponent(Graphics g){
        g.drawImage(bi, 0, 0, null);
        g.dispose();
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T17:42:07.093

好吧，我建议使用`MouseAdapter`, 和 override `mouseClicked(..)`。`mouseClicked`检查像素在点击时是否为alpha *，*如果它什么都不做，如果不做某事。

*   始终`super.paintComponent(..)`在覆盖`paintComponent`方法中作为第一次调用调用，但是因为，特别是对于按钮，这将重绘实例上的后台`JButton`调用以停止此操作。你可能也想要。`setContentAreaFilled(false)``JButton``setBorderPainted(false)`

这是我制作的一个小例子（改编自[这里](https://stackoverflow.com/a/6742602/1133011)）：

![在此处输入图像描述](../Images/f108472426b48355021b38ff148d1aec.png)

如果点击笑脸：

![在此处输入图像描述](../Images/ca728aab0d6e52a7bf2404dd7d1adf37.png)

```
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.RenderingHints;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.image.BufferedImage;
import java.net.URL;
import javax.imageio.ImageIO;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.SwingUtilities;

public class TransparentButton {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                final JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                MyButton button = null;

                try {
                    button = new MyButton(scaleImage(100, 100, ImageIO.read(new URL("http://2.bp.blogspot.com/-eRryNji1gQU/UCIPw0tY5bI/AAAAAAAASt0/qAvERbom5N4/s1600/original_smiley_face.png"))));
                } catch (Exception ex) {
                    ex.printStackTrace();
                }

                button.addMouseListener(new MouseAdapter() {
                    @Override
                    public void mouseClicked(MouseEvent me) {
                        super.mouseClicked(me);
                        MyButton mb = ((MyButton) me.getSource());
                        if (!isAlpha(mb.getIconImage(), me.getX(), me.getY())) {
                            JOptionPane.showMessageDialog(frame, "You clicked the smiley");
                        }
                    }

                    private boolean isAlpha(BufferedImage bufImg, int posX, int posY) {
                        int alpha = (bufImg.getRGB(posX, posY) >> 24) & 0xFF;
                        return alpha == 0;
                    }
                });

                frame.add(button);

                frame.pack();
                frame.setVisible(true);
            }
        });
    }

    public static BufferedImage scaleImage(int w, int h, Image img) throws Exception {
        BufferedImage bi;
        bi = new BufferedImage(w, h, BufferedImage.TRANSLUCENT);
        Graphics2D g2d = (Graphics2D) bi.createGraphics();
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        g2d.addRenderingHints(new RenderingHints(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY));
        g2d.drawImage(img, 0, 0, w, h, null);
        return bi;
    }
}

class MyButton extends JButton {

    BufferedImage icon;

    MyButton(BufferedImage bi) {
        this.icon = ((BufferedImage) bi);
        setContentAreaFilled(false);
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(icon.getWidth(), icon.getHeight());
    }

    public BufferedImage getIconImage() {
        return icon;
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.drawImage(icon, 0, 0, this);
    }
} 
```

# sql - 在单个查询中组合不同时间段的每日平均值

> ID：13825124
> 
> 赞同：0
> 
> 时间：2012-12-11T17:13:37.647
> 
> 标签：sql, sql-server

我有一张表，其中包含可追溯到 2 年的多种产品的每小时条目。我正在尝试编写一个看起来像这样的查询：

```
PRODUCT, TODAY'S AVERAGE, LAST MONTHS DAILY AVERAGE, YEAR TO DATE DAILY AVERAGE 
```

我可以通过为每个平均值编写单独的查询然后将它们加入到`PRODUCT NAME`. 但是，我希望能够通过编写一个查询来做到这一点。

他们是我可以应用的标准算法/方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T23:15:09.857

这是一个聚合查询。但是，它会为您想要的每个时间段获取变量，并按天汇总以进行最终计算。

```
select product,
       sum(DailySum*IsToday) as Today,
       sum(1.0*DailySum*IslastMonth) / sum(IslastMonth)
       sum(1.0*DailySum*IsYTD) / sum(IsYTD)
from (select product, cast(dt as date) as thedate, sum(val) as DailySum
             (case when cast(dt as date) = cast(getdate() as date) then 1 else 0 end) as IsToday,
             (case when year(dt) = year(dateadd(month, -1, getdate()) and month(dt) = month(dateadd(month, -1, getdate())
                   then 1 else 0
              end) as IslastMonth,
             (case when year(dt) = year(getdate()) tehn 1 else 0
              end) as IsYTD
       from t
       group by product, cast(dt as date)
     ) t
     ) t 
```

# java - Spring JPA Hsqldb 持久化

> ID：13825134
> 
> 赞同：1
> 
> 时间：2012-12-11T17:14:11.960
> 
> 标签：java, spring, jpa, hsqldb

我是 spring 新手，所以我不知道所有配置是否正确。虽然我使用了 spring IDE 和提供的单元测试是正确的。

我有一个用户类

```
@Entity
@NamedQuery(name="findUser4Email",
query="SELECT * " +
      "FROM User " +
      "WHERE email = :userEmail")
public class User extends AbstractNamedDomain {

private String name;
private String email;
private String password;
... 
```

我想通过数据库保持这个类的持久性。我使用 hsqldb 将查询发送到我的数据库等等。

现在我的用户有一个 DAO 层，如下所示：

```
public class UserManager implements IUserManager {

    @PersistenceContext 
    private EntityManager em;

public User findUser4Email(String email) {
    return (User) em.createNamedQuery("findUser4Email").setParameter("userEmail",
            email).getSingleResult();
}

public User storeUser(User user) {
    //User u = em.merge(user);
    em.persist(user); 
    return user;
}
... 
```

 ``my beans look like this :

```
 <?xml version="1.0" encoding="UTF-8" ?>

   <beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:aop="http://www.springframework.org/schema/aop"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xsi:schemaLocation="
   http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
   http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
   http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd">

    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
            <property name="dataSource" ref="dataSource" />
            <property name="persistenceUnitName" value="BankingWeb" />
            <property name="jpaVendorAdapter">
                    <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                            <property name="generateDdl" value="true" />
                            <property name="showSql" value="true" />
                            <property name="databasePlatform" value="${hibernate.dialect}" />
                    </bean>
            </property>
    </bean>

    <bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />

    <bean name="AccountManager" class="ssel.banking.dao.jpa.AccountManager" />

    <bean name="UserManager" class="ssel.banking.dao.jpa.UserManager" />

    <bean id="txManager" class="org.springframework.orm.jpa.JpaTransactionManager">
            <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

    <tx:annotation-driven transaction-manager="txManager"/>

    </beans> 
```

When I try to store a User in a unittest (just by calling the store(User) from the dao the test fails. Nor do I see any table created in my DB when I look at it with hsqldb. What is wrong my code ? Or what do I miss?

this is what my datasourcebean looks like` 

```
 <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
    <property name="url" value="${jdbc.url}"/>
    <property name="driverClassName" value="${jdbc.driverClassName}"/>
    <property name="username" value="${jdbc.username}"/>
    <property name="password" value="${jdbc.password}"/>
</bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:49:11.423

您必须像这样定义一个 DataSource bean：

```
<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
    <property name="url" value="jdbc:mysql://192.0.0.1:3306/yourDB"/>
    <property name="username" value=""/>
    <property name="password" value=""/>
</bean> 
```

（或 JNDI 查找）

```
<jee:jndi-lookup jndi-name="jdbc/datasource" id="dataSource" /> 
```

您可以按照本[教程](http://www.techbrainwave.com/?p=725)来帮助您设置所有内容。`

# nosql - 如何复制像 Neo4J 这样的图形数据库

> ID：13825143
> 
> 赞同：1
> 
> 时间：2012-12-11T17:14:44.447
> 
> 标签：nosql, neo4j

我是 NoSQL 世界的菜鸟。但是在了解了 Neo4J 工作原理的基础知识之后，我不明白与列或文档数据库或普通键值数据库相比，复制将如何快速。

它有节点和边，它们只是这些节点之间的关系，类似于 RDBMS 中的连接。

那么，与 RDBMS 相比，复制在这里是如何工作的呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:46:12.610

每个 NoSQL 数据库在复制时都会以不同的方式运行。NoSQL 是一个相当广泛的术语，因此您不应该期望所有这些都具有良好的复制性能。事实上 Neo4j Enterprise 对复制有一定的支持，但是 Neo4j 的设计并不会自然地导致扩展。与 Cassandra 等其他人不同，这当然不是核心目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T21:08:17.237

复制是什么意思？Neo4j 企业版带有一个高可用性集群，可以在多台机器上复制您的数据。

如果只是复制数据，您还可以关闭数据库并复制数据库文件（或在企业中执行在线备份）。

# php - MySQL的问题

> ID：13825144
> 
> 赞同：-2
> 
> 时间：2012-12-11T17:14:46.543
> 
> 标签：php, mysql

> **可能重复：**
> [如何防止 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection)

当我从 Gmail 复制一个主题并将其粘贴到我的脚本上以将其添加为主题时，我的脚本突然遇到了这个问题。

```
 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'no matter where the" at line 2 
```

这个问题发生在我从 Gmail 复制时，虽然我在记事本上粘贴了它，然后我将它复制到我的脚本

这是我添加主题的代码：

```
<?php 
@session_start();

if (!$_SESSION['username']){
 echo "<meta http-equiv='refresh' content='0; url=../login.php'/>";
  exit();
}

?>

<?php include "../config.php";?>
<html>
<head>

<meta charset="utf-8"/>
<link rel="stylesheet" type="text/css" href="admin.css" media="screen"/>

</head>
<body>

 <!-- TinyMCE -->
<script type="text/javascript" src="../editor/tiny_mce.js"></script>
<script type="text/javascript">
    tinyMCE.init({
        // General options
        mode : "textareas",
        theme : "advanced",
        plugins : "autolink,lists,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,wordcount,advlist,autosave",

        // Theme options
        theme_advanced_buttons1 : "bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,styleselect,formatselect,fontselect,fontsizeselect",
        theme_advanced_buttons2 : "bullist,numlist,|,link,unlink,anchor,cleanup,insertdate,inserttime,preview,|,forecolor,backcolor,hr,|,fullscreen,,ltr,rtl",
        theme_advanced_buttons3 : "media,removeformat,cleanup",
        theme_advanced_buttons4 : "",
        theme_advanced_toolbar_location : "top",
        theme_advanced_toolbar_align : "right",
        theme_advanced_statusbar_location : "bottom",
        theme_advanced_resizing : true,

        // Example content CSS (should be your site CSS)
        content_css : "css/content.css",

        // Drop lists for link/image/media/template dialogs
        template_external_list_url : "lists/template_list.js",
        external_link_list_url : "lists/link_list.js",
        external_image_list_url : "lists/image_list.js",
        media_external_list_url : "lists/media_list.js",

        // Style formats
        style_formats : [
            {title : 'Bold text', inline : 'b'},
            {title : 'Red text', inline : 'span', styles : {color : '#ff0000'}},
            {title : 'Red header', block : 'h1', styles : {color : '#ff0000'}},
            {title : 'Example 1', inline : 'span', classes : 'example1'},
            {title : 'Example 2', inline : 'span', classes : 'example2'},
            {title : 'Table styles'},
            {title : 'Table row 1', selector : 'tr', classes : 'tablerow1'}
        ],

        // Replace values for the template plugin
        template_replace_values : {
            username : "Some User",
            staffid : "991234"
        }
    });
</script>
<!-- /TinyMCE --> 

<?php 

#=======================================insert news==========================================
if ($_POST['submit']){

$topic_title    =$_POST['topic_title'];
$topic          =$_POST['topic'];
$id_topic       =$_POST['topic_sec'];
$image1         =$_POST['image1'];
$image2         =$_POST['image2'];
$today          =gmdate("d,m,Y");
$date           =$_POST['date'];
$status         =$_POST['status'];

$insert=mysql_query("insert into topics values('','$topic_title','$image1','$image2',
'$id_topic','$topic','$today','','$status')")or die (mysql_error());
}
if ($insert){echo "<script>alert(\"topic has been added\");</script>
<meta http-equiv='refresh' content='0; url=topics.php'/>
";}

?>

<div id='right'>add a new topic</div>

<form action='' method='post'  dir='rtl'>
<table width='100%' cellpadding='5' cellspacing='10'  dir='rtl'>
<tr>
<td>topic title</td>
<td><input type='text' name='topic_title'  id='topic_title'/></td>
</tr>

<tr>
<td>upper image</td>
<td><input type='text' name='image1' size='70%'/></td>
</tr>

<td>left image</td>
<td><input type='text' name='image2' size='70%'/></td>
</tr>

<tr>
<td>topic section</td>
<td>
<select name='topic_sec'>

<?php
$select=mysql_query("select * from sections")or die (mysql_error());
while ($row=mysql_fetch_object($select)){
echo "<option value='$row->id_sec'>$row->sec_name</option>";
}

?>

</select>
</td>
</tr>

<tr>
<td>topic</td>
<td  >
<textarea  cols='100' rows='25' name='topic' ></textarea>
</td>
</tr>

<tr>
<td>state</td>
<td>
<select name='status'>
<option value='1'>active</option>
<option value='2'>unactive</option>
</select>
</td>
</tr>

<tr>
<td colspan='2' ><input type='submit' id='subbot' name='submit' value='add'/></td>
</tr>

</table>
<input type='hidden' name='date' value='<?=$today;?>'/>

</form>
<br/>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:34:31.160

您可以使用[mysql_real_escape_string()](http://php.net/manual/en/function.mysql-real-escape-string.php)在将变量插入数据库之前对其进行清理 - 这应该可以解决单引号等的任何问题。

顺便说一句，您应该在将 POST 变量（至少 mysql_real_escape_string()）插入数据库之前对它们进行一些清理，以避免 SQL 注入攻击。

# php - 错误：您的 SQL 语法在第 1 行的 '' 附近有错误

> ID：13825146
> 
> 赞同：0
> 
> 时间：2012-12-11T17:14:55.893
> 
> 标签：php, mysql

我不断收到此错误...但是我看不到任何不合适的语法...有什么想法吗？这是我的 PHP 代码。我知道我的其他页面是正确的，因为我可以毫无问题地运行代码的所有其他部分。

```
<?php 

// this connects To database
$hostname="";    
$username="";   
$password="";    
$dbname="";     

mysql_connect($hostname,$username,$password) OR DIE ("Connection Failed");
mysql_select_db($dbname);

$action = $_REQUEST["action"];
if ($action == 'a') {
$custFirst = null;
$custLast = null;
$custAddress = null;
$custCity = null;   
$custState = null;
$custZip = null;
$custEmail = null;
$custPhone = null;
 } else {
$id = $_REQUEST["id"];
    $query = "select * from custTab where custNo = $id";
    $result = mysql_query($query) 
        or die(mysql_error());
    $row = mysql_fetch_array($result);
    $custFirst = $row['custFirst'];  
    $custLast = $row['custLast'];  
    $custAddress = $row['custAddress'];  
    $custCity = $row['custCity'];
    $custState = $row['custState'];
    $custZip = $row['custZip'];
    $custEmail = $row['custEmail'];
    $custPhone = $row['custPhone'];
} // end if

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:16:40.513

尝试`quotes`将`$id`,

```
$query = "select * from custTab where custNo = '$id'"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T17:17:55.647

根据`custNo`字段包含的内容，这是危险和错误的：

```
$id = $_REQUEST["id"];
$query = "select * from custTab where custNo = $id"; 
```

如果 id 是整数，则应使用：

```
$id = (int) $_REQUEST["id"];
$query = "select * from custTab where custNo = $id"; 
```

否则，您将不得不引用它并转义变量：

```
$id = mysql_real_escape_string($_REQUEST["id"]);
$query = "select * from custTab where custNo = '$id'"; 
```

但是你真的应该切换到 PDO / mysqli 和准备好的语句来完全避免这个问题。

# asp.net - 在按钮 onClick 事件中获取当前 TextBox 文本值 - asp.net

> ID：13825148
> 
> 赞同：7
> 
> 时间：2012-12-11T17:15:00.373
> 
> 标签：asp.net, button, textbox, onclick, controls

我有这样一个页面

```
<form runat="server" id="NewForm">
    Name: <asp:TextBox ID="Name" runat="server"></asp:TextBox>
    <asp:Button ID="AddNewName" runat="server" Text="Add" OnClick="AddNewName_Click" />
    <asp:Label ID="NewName" runat="server"></asp:Label>
</form> 
```

在后面的代码中，我有一个 Page_Load，它为 TextBox 名称分配了一个值。

```
protected void Page_Load(object sender, EventArgs e)
{
    Name.Text = "Enter Your Name Here";
} 
```

然后单击 AddNewName 按钮，我将它写在 Label NewName 中

```
protected void AddNewDivision_Click(object sender, EventArgs e)
{
    NewName.Text = Name.Text;
} 
```

但是，无论我在名称文本框中输入什么，标签都只显示“在此处输入您的姓名”。它永远不会更新到名称文本框中的实际内容。我对这段代码做错了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-11T17:17:13.167

问题是你总是覆盖`Page_Load`. 相反，请检查`IsPostBack`属性：

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!IsPostBack)
        Name.Text = "Enter Your Name Here";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T17:20:24.037

`re-assigning`每次覆盖您在到达事件`Page_Load`之前在 TextBox 中输入的文本时，您都是要命名的文本。`AddNewDivision_Click`要在页面加载时分配一次并且不要覆盖后续调用，您可以使用`Page.IsPostBack`属性。

```
 if(!Page.IsPostBack)
      Name.Text = "Enter Your Name Here"; 
```

或者您可以分配设计 html 中的文本`remove`和`statement`来自`page_load`

```
<asp:TextBox ID="Name" runat="server" Text="Enter Your Name Here"></asp:TextBox> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-04T14:01:00.790

另一个显而易见的问题是：

```
<form runat="server" id="NewForm">
    Name: <asp:TextBox ID="Name" runat="server"></asp:TextBox>
    <asp:Button ID="AddNewName" runat="server" Text="Add" **OnClick="AddNewName_Click"** />
    <asp:Label ID="NewName" runat="server"></asp:Label>
</form> 
```

不是上面的星号。然后，您想知道为什么它没有运行：

```
protected void **AddNewDivision_Click**(object sender, EventArgs e)
{
    NewName.Text = Name.Text;
} 
```

再次注意星号。您没有调用正确的 void，实际上您可能正在调用一个甚至不存在的 void。

# php - 在 PHP 中将 UTC 日期舍入到午夜

> ID：13825149
> 
> 赞同：0
> 
> 时间：2012-12-11T17:15:02.603
> 
> 标签：php, time

我的数据库中有需要在给定时间段后过期的项目。为了保持事情的合理性并确保它们每天只过期一次，我想使用 php 来舍入我的 UTC 日期。有没有人看到使用此代码这样做有任何巨大的问题：

```
echo date('D, d M Y H:i:s',strtotime(date('d M Y', time()))); 
```

抱歉，代码将给出当前日期，但在上午 12:00。有没有更简单/更好的方法来做我在这里想做的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:22:37.920

如果要使用特定时间，则只需输入实际时间：

```
echo date('D, d M Y 00:00:00', strototime($date)); 
```

# android - 谷歌地图 android api v2 标记阴影

> ID：13825163
> 
> 赞同：7
> 
> 时间：2012-12-11T17:15:45.380
> 
> 标签：android, shadow, marker, google-maps-android-api-2

在官方文档中找不到答案，那么有没有办法让 GoogleMap 像旧的 MapView 那样自动绘制标记阴影？
我知道我可以手动绘制它，但我想知道这种方便的行为是否仍然存在

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T14:24:31.450

据我所知，谷歌和研究答案是否定的。你可以在代码中做一些事情来自动创建它等等，但我认为最好的选择是绘制它。

# c++ - SQLite 不存储包含 \0 字节的 blob

> ID：13825164
> 
> 赞同：2
> 
> 时间：2012-12-11T17:15:51.433
> 
> 标签：c++, sqlite, blob

使用 C/C++ 接口将二进制数据插入 sqlite 数据库：

```
 // Previously: "create table tt(i integer primary key, b blob)"
  sqlite3 *sqliteDB;
  if(sqlite3_open("example.db", &sqliteDB) == 0)
    {

    // "insert" statement
    const char *sqlText = "insert into tt (i,b) values (?,?)";
    sqlite3_stmt *preparedStatement;
    sqlite3_prepare_v2(sqliteDB, sqlText, (int)strlen(sqlText), &preparedStatement, 0);

    // add the number
    sqlite3_bind_int(preparedStatement, 1, 1);

    // add the data
    char myBlobData[] = "He\0llo world"; // sizeof(myBlobData) is 13 bytes
    sqlite3_bind_blob(preparedStatement, 2, myBlobData, sizeof(myBlobData), 0); // returns SQLITE_OK

    // store in database
    sqlite3_step(preparedStatement); // returns SQLITE_DONE

    sqlite3_close(sqliteDB);
    } 
```

这将存储一个包含“He”的 2 字节 blob，而不是要求存储的 13 字节 blob。为什么？

它似乎在第一个 0 字节处结束，但 blob 不是字符串（因此需要 sqlite3_bind_blob 的大小参数）那么为什么它将任意二进制数据视为 c 样式字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:39:26.510

您如何将 BLOB 从数据库中取出？那时它可能会被截断；也许您的代码在提取后将其视为字符串。

您可以通过 BLOB API 检查实际的 BLOB 大小。sqlite3_blob_open() 然后调用 sqlite3_blob_bytes()。

# objective-c - NSMutableDictionary 和 NSMutableArray

> ID：13825165
> 
> 赞同：0
> 
> 时间：2012-12-11T17:15:52.837
> 
> 标签：objective-c, xcode, nsmutablearray, nsmutabledictionary

您好，我正在为 ios 制作纸牌游戏，这是国王饮酒游戏，

为此，我使用以下代码填充字典

```
 cardValues = [[NSMutableArray alloc] init];

for (card1 = 1; card1 <= 13; card1++) {

    card2 = card1;

    [cardValues addObject:[NSNumber numberWithInt:card2]];
    [cardValues addObject:[NSNumber numberWithInt:card2]];
    [cardValues addObject:[NSNumber numberWithInt:card2]];
    [cardValues addObject:[NSNumber numberWithInt:card2]];
}
 dict = [[NSDictionary alloc] initWithObjects:cardValues forKeys:cardKeys]; 
```

cardvalues 是一个 NSMutableArray，经过 1 到 13 次，4 次为 4 套牌

cardkeys 是一个 NSArray，其中填充了 52 张卡片的名称，例如

```
 cardKeys = [[NSArray alloc] initWithObjects:
@"clubace",
@"diamondace",
@"heartace",
@"spadeace",

@"club2",
@"diamond2",
@"heart2",
@"spade2", 
```

等等通过数组。

我在获取与数字匹配的卡片值以显示所绘制卡片所遵循的规则时遇到问题

例如，如果红心 5 被抽中，我将显示一条消息喝 5 秒，其他任何红心 5 都一样

我希望有人能告诉我如何完成这项工作。

任何帮助表示赞赏

感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:24:15.913

我认为更好的方法是创建一个`PlayingCard`既包含花色又包含卡片价值的类。然后，您可以拥有一个包含 52 个`PlayingCard`对象的数组。您可以从数组中随机拉出这 52 个`PlayingCard`对象中的任何一个（和/或从数组中删除它们）。该类`PlayingCard`还可以有一个`UIImage`属性，您可以使用该属性将卡片绘制到屏幕上。

如果您发现自己将相关数据存储在两个或多个单独的容器中，那么您最好将这些数据封装在一个类中并使用单个容器来存储类的实例。

# c# - 树视图绘制故障

> ID：13825167
> 
> 赞同：8
> 
> 时间：2012-12-11T17:15:54.290
> 
> 标签：c#, winforms, colors, treeview

我为每个`TreeView`节点实现了一个多色系统。但是每次我扩展一个子节点时，它都会扩展，但也会在我的 rootNode 上绘制节点（图 2 和 3）。代码来自[我之前的问题](https://stackoverflow.com/questions/13824052/treenode-text-different-colored-words)，这就是错误的样子

![在此处输入图像描述](../Images/3c3140ba7973b443adcd48761afff2cb.png)

如果我决定关闭每个节点并重新扩展，故障就消失了。（图 4）

问题似乎与`Bounds`这就是为什么平局不在正确的地方。知道为什么吗？

* * *

```
 private void treeView1_DrawNode(object sender, DrawTreeNodeEventArgs e)
  {
    string[] texts = e.Node.Text.Split();
    using (Font font = new Font(this.Font, FontStyle.Regular))
    {
        using (Brush brush = new SolidBrush(Color.Red))
        {
            e.Graphics.DrawString(texts[0], font, brush, e.Bounds.Left, e.Bounds.Top);
        }

        using (Brush brush = new SolidBrush(Color.Blue))
        {
            SizeF s = e.Graphics.MeasureString(texts[0], font);
            e.Graphics.DrawString(texts[1], font, brush, e.Bounds.Left + (int)s.Width, e.Bounds.Top);
        }
    }
  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T18:48:51.763

绘图故障似乎是一个准确的描述。

您可以通过订阅 AfterExpand 事件来尝试解决此问题：

```
void treeView1_AfterExpand(object sender, TreeViewEventArgs e) {
  treeView1.Invalidate();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-30T19:34:35.947

只需确保每次填充 TreeView 时都使用：“ **BeginUpdate()** ”和“ **EndUpdate() ”**

“ **EndUpdate()** ”<- 是摆脱这种故障最重要的事情！

祝你好运！:)

干杯，J

# solr - 在 Solr 中的查询时忽略 tf/idf

> ID：13825170
> 
> 赞同：6
> 
> 时间：2012-12-11T17:15:58.330
> 
> 标签：solr, lucene

我正在尝试根据字段值提升特定文档。它通常工作正常，但一些文档返回更高的分数，即使它们具有较小的提升值。

在使用请求参数调试查询后，`debugQuery=on`我注意到该`idf`函数为特定文档返回了更高的分数，这影响了整体分数。

有没有办法在查询时忽略 tf/idf 评分？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T18:51:44.423

您需要创建一个自定义的[Similarity](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/search/Similarity.html)来覆盖 tf 和 idf 方法，并使用它来代替 DefaultSimilarity。

就像是：

```
class CustomSimilarity extends DefaultSimilarity {

    @Override
    public float tf(float freq) {
        return 1.0;
    }

    @Override
    public float tf(int freq) {
        return 1.0;
    }

    @Override
    // Note the signature of this method may now take longs:
    //   public float idf(long docFreq, long numDocs)
    public float idf(int docFreq, int numDocs) {
        return 1.0;
    }
} 
```

将其设置为在您的 schema.xml 中使用该相似性：

```
<similarity class="myorg.mypackage.CustomSimilarity"/> 
```

# javascript - Jquery 函数式编程风格

> ID：13825173
> 
> 赞同：3
> 
> 时间：2012-12-11T17:16:06.100
> 
> 标签：javascript, jquery

有没有更优雅的方法来编写这种函数而不必初始化数组：

```
function getStuff () {
    var some_array= [];

    $("#some-id ul li span.key").each(function() {
          some_array.push($(this).text());
    });

    return some_array;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T17:19:59.833

[`jQuery.map`](http://api.jquery.com/jQuery.map/)

```
function getStuff () {
    return $.map($("#some-id ul li span.key"), function(el) {
          return $(el).text();
    });
} 
```

[**小提琴**](http://jsfiddle.net/295Ch/)

[性能](http://jsperf.com/jquerymapvseachpush/3)方面，差异很小。此外，正如 Lix 所说，选择您认为更具可读性和可维护性的方法。最后，两者最终都会创建一个数组，迭代元素，将字符串值推送到数组并返回数组。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-11T17:39:58.247

另一种更实用的感觉方式可能是：

定义一个“方法”函数：

```
var method = function (method) {
    return function (item) {
        return $(item)[method]();
    };
}; 
```

你可以像这样使用它：

```
var text = method('text');
var html = method('html');
var fadeIn = method('fadeIn'); 
```

要重新工作您的`getStuff`功能：

```
var getText = function (arr) {
    return $.map(arr, text);
}; 
```

`$.map`遍历传入的数组，应用从 返回的函数`var text = method('text')`，这只是`$(array item).method()`.

I just threw this together to demonstrate a way you can use these kinds of techniques. You would probably name things differently and define the "method" function as a custom library/helper that is meant to be used app-wide.

# android - Android opengl es 真机白屏

> ID：13825174
> 
> 赞同：2
> 
> 时间：2012-12-11T17:16:06.723
> 
> 标签：android, opengl-es, avd

在虚拟设备上一切正常。哪里会出问题？设备 - Nexus。也许我需要清单中的一些功能，或者一些 glFunction 错误或纹理格式。我使用 PNG 纹理（无论有无 alpha） 代码的主要部分：

活动：

```
package com.example;
//imports
public class wheel extends Activity {
    private GLSurfaceView mGLSurfaceView;
    // some buttons, views
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.main);
        mGLSurfaceView = (TouchSurfaceView)findViewById(R.id.glsurfaceview);
        mGLSurfaceView.requestFocus();
        mGLSurfaceView.setFocusableInTouchMode(true);
        mGLSurfaceView.requestRender();
        // other interface
    }
    @Override
    protected void onResume() {
        super.onResume();
    }
    @Override
    protected void onPause() {
        super.onPause();
    }
} 
```

表面视图：

```
package com.example;
//imports
public class TouchSurfaceView extends GLSurfaceView {
    public TouchSurfaceView(Context context) {
        super(context);
        mRenderer = new CylinderRenderer(context);
        setEGLConfigChooser(8, 8, 8, 8, 16, 0);
        getHolder().setFormat(PixelFormat.TRANSLUCENT);
        setRenderer(mRenderer);
        setRenderMode(GLSurfaceView.RENDERMODE_WHEN_DIRTY);
    }
    public TouchSurfaceView(Context context, AttributeSet attr) {
        super(context, attr);
        mRenderer = new CylinderRenderer(context);
        setEGLConfigChooser(8, 8, 8, 8, 16, 0);
        getHolder().setFormat(PixelFormat.TRANSLUCENT);
        setRenderer(mRenderer);
        setRenderMode(GLSurfaceView.RENDERMODE_WHEN_DIRTY);
    }
    @Override
    public boolean onTrackballEvent(MotionEvent e) {
        // some rotation
        requestRender();
        return true;
    }
    @Override
    public boolean onTouchEvent(MotionEvent e) {
        // some rotation
        return true;
    }
    private class CylinderRenderer implements GLSurfaceView.Renderer {
        public CylinderRenderer(Context context) {
            mCylinder = new Cylinder(0);
        }
        public void onDrawFrame(GL10 gl) {
            gl.glTexEnvx(GL10.GL_TEXTURE_ENV, GL10.GL_TEXTURE_ENV_MODE, GL10.GL_MODULATE);
            gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

            gl.glMatrixMode(GL10.GL_MODELVIEW);
            gl.glLoadIdentity();
            gl.glTranslatef(0, 0.3f, -2.5f);
            gl.glScalef(1.0f, 1.0f, 0.5f);

            gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
            gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);

            gl.glActiveTexture(GL10.GL_TEXTURE0);
            gl.glBindTexture(GL10.GL_TEXTURE_2D, mTextureID[5]);
            gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_LINEAR);
            gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);
            gl.glTexParameterx(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_S, GL10.GL_REPEAT);
            gl.glTexParameterx(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_T, GL10.GL_REPEAT);
            mCylinder.draw(gl);
            requestRender();
        }
        public void onSurfaceChanged(GL10 gl, int width, int height) {
            gl.glViewport(0, 0, width, height);
            float ratio = (float) width / height;
            gl.glMatrixMode(GL10.GL_PROJECTION);
            gl.glLoadIdentity();
            gl.glFrustumf(-ratio, ratio, -1, 1, 1, 10);
        }
        private void loadTextures(GL10 gl) {
            int[] textures = new int[6];
            mTextureID = new int[6];
            int[] resources = {R.raw.a, R.raw.b, R.raw.c, R.drawable.d, R.drawable.e, R.drawable.f};
            gl.glGenTextures(6, textures, 0);

            for(int i = 0; i < 6; i++)
            {
                mTextureID[i] = textures[i];
                gl.glBindTexture(GL10.GL_TEXTURE_2D, mTextureID[i]);
                gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_LINEAR);
                gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);
                gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_S, GL10.GL_CLAMP_TO_EDGE);
                gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_T, GL10.GL_CLAMP_TO_EDGE);
                gl.glTexEnvf(GL10.GL_TEXTURE_ENV, GL10.GL_TEXTURE_ENV_MODE, GL10.GL_REPLACE);

                InputStream is = mContext.getResources().openRawResource(resources[i]);
                Bitmap bitmap;
                try {
                    bitmap = BitmapFactory.decodeStream(is);
                } finally {
                    try {
                        is.close();
                    } catch(IOException e) {
                    }
                }    
                GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, bitmap, 0);
                bitmap.recycle();
            }
        }
        public void onSurfaceCreated(GL10 gl, EGLConfig config) {
            gl.glClearColor(0.0f, 0.0f, 0.0f, 0);
            gl.glEnable(GL10.GL_CULL_FACE);
            gl.glEnable(GL10.GL_DEPTH_TEST);
            gl.glEnable(GL10.GL_TEXTURE_2D);
            loadTextures(gl);
            requestRender();
        }
        private Cylinder mCylinder;
        private Context mContext;
        private int mTextureID[];
    }

    private CylinderRenderer mRenderer;
} 
```

圆筒：

```
package com.example;

import java.nio.ByteBuffer;
import java.nio.ByteOrder;
import java.nio.FloatBuffer;
import javax.microedition.khronos.opengles.GL10;

public class Cylinder
{
    private final static int verticesCount = 40;
    private final static int indicesCount = verticesCount * 3;
    private FloatBuffer mVertexBuffer;
    private FloatBuffer mTexBuffer;
    private ByteBuffer  mIndexBuffer;
    private float vertices[];

    public Cylinder(int type)
    {
        vertices = new float[(verticesCount + 1) * 12];
        byte indices[] = new byte[indicesCount * 2];
        float texture[] = new float[verticesCount * 8 + 1];
        float tx, ty, dx, size, dz, dy;
        // generate indices, texture, vertices
        ByteBuffer vbb = ByteBuffer.allocateDirect(vertices.length * 4);
        vbb.order(ByteOrder.nativeOrder());
        mVertexBuffer = vbb.asFloatBuffer();
        mVertexBuffer.put(vertices);
        mVertexBuffer.position(0);

        ByteBuffer tbb = ByteBuffer.allocateDirect(texture.length * 4);
        tbb.order(ByteOrder.nativeOrder());
        mTexBuffer = tbb.asFloatBuffer();
        mTexBuffer.put(texture);
        mTexBuffer.position(0);

        mIndexBuffer = ByteBuffer.allocateDirect(indices.length);
        mIndexBuffer.put(indices);
        mIndexBuffer.position(0);
    }
    public void draw(GL10 gl)
    {
        gl.glFrontFace(GL10.GL_CW);
        gl.glVertexPointer(3, GL10.GL_FLOAT, 0, mVertexBuffer);
        gl.glEnable(GL10.GL_TEXTURE_2D);
        gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, mTexBuffer);
        gl.glDrawElements(GL10.GL_TRIANGLES, indicesCount * 2, GL10.GL_UNSIGNED_BYTE, mIndexBuffer);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:16:59.027

您的图像大小可能不是 2 的幂（例如 512x512 或 512x256 等）。

# c# - 如何使用 MVVM Light 在 WPF 中访问模型属性

> ID：13825175
> 
> 赞同：0
> 
> 时间：2012-12-11T17:16:08.500
> 
> 标签：c#, .net, wpf, mvvm

我是 MVVM 和 WPF 的新手，所以这可能是一个广泛或愚蠢的问题，但是：

我正在使用 MVVM 模式，并且有 1 个 Viewmodel、几个视图和几个模型。所有视图都只是放在我的 mainwindow.xaml 上的用户控件。

有问题的视图绑定到具有多个属性的模型，我想使用其中一个属性来动态更改用户控件中的图片。

我很难尝试访问此属性，我的问题是我如何以“正确的”MVVM 方式做到这一点。

**我的 mainwindow.xaml：**

```
<Window.Resources>
    <DataTemplate DataType="{x:Type Model:Device}">
        <Canvas>
            <View:DeviceUserControl/>
        </Canvas>
    </DataTemplate>
</Window.Resources>

//---- SNIP----

 <Grid Name="grid1">
   <ItemsControl ItemsSource="{Binding Devices}" />
 </Grid> 
```

**DeviceUserControl.xaml**

```
//--- SNIP ---
Image Name="DeviceImage" Source="{StaticResource IconAdd}"/> 
```

**设备型号**

```
//--- SNIP ---
public enum Typeenum
{
 FrequenceGenerator,
 Oscilloscope,
 Test1,
 Test2
};
public Typeenum Type { get { return type; } set { type = value; NotifyPropertyChanged("Type"); } } 
```

我想根据对象的类型更改*DeviceImage*。我已经尝试过依赖属性，但它没有按预期工作（它每次都返回相同的类型）。我真的不需要 notifyPropertyChanged，因为我只对在实例化 Usercontrol 时更改图像源感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:35:57.217

首先，您应该将 View 绑定到 ViewModel，而不是 Model。至少这就是 MVVM 的全部意义所在。此外，如果您希望在属性更改时发生某些事情，那么一种方法是订阅`PropertyChanged`ViewModel 中的事件（我假设您知道应该实现`INotifyPropertyChanged`接口）然后将您的逻辑放在属性更改应该发生的事情上。

**代码示例**

```
this.PropertyChanged += (s,e)=>{
    // Your code here.
    // e.g. this.MyImageSource = "http://img.com/image.jpg"
} 
```

代码示例假定调用了您的属性更改事件，`PropertyChanged`并且图像控件的源是绑定到`MyImageSource`ViewModel 中的属性的数据。希望这可以帮助。

# push - xtify 503 超出速率限制

> ID：13825176
> 
> 赞同：0
> 
> 时间：2012-12-11T17:16:10.407
> 
> 标签：push, xtify

我正在从我的 php 服务器发送推送，我收到错误 503 Rate Limit Exceeded。[我在http://developer.xtify.com/display/APIs/Push+API+2.0](http://developer.xtify.com/display/APIs/Push+API+2.0)中读到“默认服务将您在 10 秒内每个 IP 地址限制为 50 个连接”但在另一个聊天中说限制是 5 。 哪个是对的？有什么限制？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T03:33:39.840

答案是：默认服务在 10 秒内将每个 IP 地址限制为 50 个连接。

# coding-style - 两种 Underscore.js 语法有什么区别？

> ID：13825182
> 
> 赞同：1
> 
> 时间：2012-12-11T17:16:24.390
> 
> 标签：coding-style, underscore.js

使用[Underscore.js](http://underscorejs.org/)，您可以编写如下代码：

```
_.each([1,2,3], callback) 
```

...或者像这样：

```
_([1,2,3]).each(callback) 
```

有什么我应该注意的区别吗？

例如：性能有什么不同吗？两种方法之间是否存在任何“哲学”差异？Underscore 文档使用第一种样式是否有原因，或者他们只是为了保持一致性而选择了一种？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T02:42:23.613

您在问题中[链接的文档在](http://underscorejs.org/)[链接部分](http://underscorejs.org/#chaining)中说：

> 您可以在面向对象或函数式样式中使用 Underscore，具体取决于您的偏好。以下两行代码是将数字列表加倍的相同方法。

所以，这两种风格是等价的，你应该选择适合你的风格。

# c++ - 抑制 emacs 中的 c++ 命名空间缩进

> ID：13825188
> 
> 赞同：19
> 
> 时间：2012-12-11T17:16:51.630
> 
> 标签：c++, emacs, indentation

> **可能重复：**
> [Emacs - 覆盖缩进](https://stackoverflow.com/questions/2619853/emacs-override-indentation)

我想要的是 emacs 不缩进命名空间内的代码

```
namespace a_namespace{

// no indentation
int namespace_global_variable;

// no indentation
class Class {
    // comment
    Class();
    //...
};

// and so on

} 
```

当我尝试修改`innamespace`变量或使用`C-c C-o`更改感兴趣点的缩进时，我没有得到预期的效果（实际上后者消除了函数内部的所有缩进）。

我的缩进配置如下所示（从 Google emacs 配置中复制）：

```
(c-offsets-alist . ((arglist-intro vista-c-lineup-expression-plus-4)
                    (func-decl-cont . ++)
                    (member-init-intro . +)
                    (inher-intro . ++)
                    (comment-intro . 0)
                    (arglist-close . c-lineup-arglist)
                    (topmost-intro . 0)
                    (block-open . 0)
                    (inline-open . 0)
                    (substatement-open . 0)
                    (statement-cont
                     .
                     (,(when (fboundp 'c-no-indent-after-java-annotations)
                         'c-no-indent-after-java-annotations)
                      ,(when (fboundp 'c-lineup-assignments)
                         'c-lineup-assignments)
                      ++))
                    (label . /)
                    (case-label . +)
                    (statement-case-open . +)
                    (statement-case-intro . +) ; case w/o {
                    (access-label . /)
                    (innamespace . -)))) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-11T17:35:55.683

```
(defconst my-cc-style
  '("cc-mode"
    (c-offsets-alist . ((innamespace . [0])))))

(c-add-style "my-cc-mode" my-cc-style) 
```

来自[Jason Zhang](https://stackoverflow.com/users/1043032/jason-zhang)的[回答](https://stackoverflow.com/questions/2619853/emacs-override-indentation)。在这里工作。

# python - Django - 更新用户/帐户管理

> ID：13825190
> 
> 赞同：0
> 
> 时间：2012-12-11T17:16:52.503
> 
> 标签：python, django, django-forms, views

我正在尝试通过表单更新我的用户帐户信息。我有一个 ok 表单，它只显示一个密码/电子邮件字段并清理电子邮件字段。我的观点有问题。这是我得到的错误：无法通过用户实例访问管理器。这是我的看法：my_account 函数。

```
def my_account(request):
    user = request.user
    if request.method == 'POST':
        form = MyAccountForm(request.POST)
        if form.is_valid():
            user = user.objects.get(username=username),
            password = user.set_password('password2'),
            email = forms.cleaned_data['email']
            user.save()
            return HttpResponseRedirect('/')
    else:
        form = MyAccountForm()
    variables = RequestContext(request, {
        'form': form,
    })
    return render_to_response(
        'my_account.html',
        variables
    ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:19:05.187

你在哪里

`user.objects.get`

你要

`User.objects.get`

`objects`是错误消息中引用的管理器，并且`user`是引用的实例（的实例`User`，实际类）

# jquery - jQueryUI 滑块在 WordPress 上不起作用

> ID：13825191
> 
> 赞同：5
> 
> 时间：2012-12-11T17:16:55.777
> 
> 标签：jquery, wordpress, jquery-ui, slider, jquery-ui-slider

我无法让 jQueryUI 滑块在 Wordpress 上工作。我得到了以下 HTML 结构：

```
<input type="text" name="TPSP[numberOfPosts]" id="numberOfPosts" value="<?php $args['options']['numberOfPosts']; ?>" />
<div id="NOP_slider"></div>​​​​​​​​​​ 
```

以及以下 jQuery 函数：

```
jQuery(function($) {
    var numberOfPosts = AdminPageOptions.numberOfPosts;
    $( "div#NOP_slider" ).slider({
        value:numberOfPosts,
        min: 0,
        max: 10,
        step: 1,
        slide: function( event, ui ) {
            $( "#numberOfPosts" ).val( ui.value );
        }
    });
    $( "#numberOfPosts" ).val( $( "#NOP_slider" ).slider( "value" ) );
})​ 
```

但是 Wordpress 不显示`div#NOP_slider`为滑块，我不能使用它。我还尝试注销 WordPress 拥有的 jQueryUI 并注册我从 jQueryUI 网站下载的自定义版本，但没有任何改变。有没有办法让它正常工作？

提前致谢。

# c#-2.0 - 当 IDENTITY_INSERT 设置为 OFF 时，无法在表“OS_Mailinglist1”中插入标识列的显式值

> ID：13825198
> 
> 赞同：1
> 
> 时间：2012-12-11T17:17:19.210
> 
> 标签：c#-2.0

谁能帮助我为什么会收到此错误？提前致谢..

> *当 IDENTITY_INSERT 设置为 OFF 时，无法在表“OS_Mailinglist1”中插入标识列的显式值。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 异常详细信息：
> System.Data.SqlClient.SqlException：当 IDENTITY_INSERT 设置为 OFF 时，无法在表“OS_Mailinglist1”中插入标识列的显式值。*
> 
> 源错误：
> 
> 第 312 行：cmd.ExecuteNonQuery();
> 第 313 行：ClientScript.RegisterStartupScript(this.GetType(), "alert", "alert('Successfully Registered your Email ID and Area of​​ interest.');", true);

显示错误的页面后面的代码：

```
else
{
        Util.SetConnection();
        Util.sql_con.Open();
        cmd = new SqlCommand("insert into offsale.OS_Mailinglist1(UserName,Area_Of_Interest,Mail_Pwd)values('" + txtEmail.Text.ToString() + "' ,'" + arrvalues + "','" + ViewState["pwd"].ToString () + "')", Util.sql_con);
       // cmd = new SqlCommand("insert into offsale.OS_Mailinglist1(UserName,Area_of_interest,Mail_Pwd)values('" + txtEmail.Text.ToString() + "' ,'" + arrvalues + "','" + passwrd.Text.ToString () + "')", Util.sql_con);

        cmd.ExecuteNonQuery();

        ClientScript.RegisterStartupScript(this.GetType(), "alert", "alert('Successsfully Registered your Email ID and Area of interest.');", true);

      Util.sql_con.Close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:20:41.867

您正在尝试将值插入标识列。要明确允许这样做，您必须打开全局 IDENTITY_INSERT 会话值。

# css - 在 Phonegap 中设置 iFrame 高度

> ID：13825201
> 
> 赞同：0
> 
> 时间：2012-12-11T17:17:45.037
> 
> 标签：css, cordova, iframe, height

我正在开发一个需要使用 iframe 的 Phonegap 项目。

iframe 加载正常，但是在 Safari Developer Inspector 的“计算样式”中设置高度（通过 height 属性或 CSS 内联）被覆盖。相反，高度会自动设置为匹配包含内容的高度（因此永远不会滚动）。当我在 iframe 中导航不同的链接时，高度会主动变化。

有没有已知的解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T03:32:53.130

我曾经使用 javascript / jQuery 做过一次。这对你有用吗？[jsFiddle](http://jsfiddle.net/JXrKA/)

HTML

```
<iframe id="iframeId" marginheight="0" marginwidth="0" align="top" frameborder="0" scrolling="no"></iframe>​ 
```

CSS

```
#iframeId {
  overflow: hidden !important;
 -ms-zoom: 0.4; 
 -moz-transform: scale(0.4); 
 -moz-transform-origin: 0px 0; 
 -o-transform: scale(0.4); 
 -o-transform-origin: 0 0; 
 -webkit-transform: scale(0.4); 
 -webkit-transform-origin: 0 0;
} 
```

jQuery

```
$('#iframeId').attr('src', "http://webpage.com").width("1105").height("627"); 
```

不确定这是您要尝试做的，但[在此示例](http://jsfiddle.net/JXrKA/)中，iFrame 的尺寸**由 jQuery** / javascript 设置，并允许将**完整框架的站点**显示在较小的容器中，从而进行缩放。

希望这可以帮助。​</p>

# php - 使用php登录Facebook的两种方式？

> ID：13825213
> 
> 赞同：1
> 
> 时间：2012-12-11T17:18:25.033
> 
> 标签：php, facebook

我真的对登录 facebook 感到困惑。似乎有两种登录方式，一种是在 facebook [howtos 页面](https://developers.facebook.com/docs/howtos/login/server-side-login/)上显示的方式：

另一种是使用以下代码：

```
require_once('facebook.php');
session_start();
$config = array(
    'appId' => "xxxxxxx",
    'secret' => "xxxxxxxxxxxxx"
);

$facebook = new Facebook($config);
$user_id = $facebook->getUser();

if ($user_id) 
{
   try 
   {
        echo $user_id;
   }
   catch (FacebookApiException $e) 
   {
         $login_url = $facebook->getLoginUrl();
          echo 'Please <a href="' . $login_url . '">login.</a>';
    }
} 
else 
{
   $login_url = $facebook->getLoginUrl();
   echo 'Please <a href="' . $login_url . '">login.</a>';
} 
```

哪一个是最好的？每种方法的优缺点是什么？如果我使用第一个，我可以实例化一个 facebook 对象以执行我的图形 api 调用，而不必在图形 url 上附加访问令牌？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:31:40.723

您所说的两种“方式”是相同的。差不多吧。

在您上面提到的代码中，是访问 Facebook 的一种旧方式。它仍然有效的原因是因为 Facebook 接听了你所做的许多电话，并使它们更容易访问他们身边的功能。

因此，这些方法的质量基本相同，但如果 X 年后发生任何重大 API 更改，我仍然建议采用新方法。

如果您使用新方式，则必须附加访问令牌才能使用 Graph API。

您可以实例化一个 Facebook 对象，但其参数与上述相同。X年后可能无法工作

# excel - Excel 2007：Outlook 2007 中的电子邮件地址格式

> ID：13825214
> 
> 赞同：3
> 
> 时间：2012-12-11T17:18:38.607
> 
> 标签：excel, vba, outlook

我在 Excel 中有一个名字和姓氏的列表，我想利用该列表使用 Visual Basic 在 Outlook 中查找电子邮件地址。

我正在使用以下 VB 代码：

```
 Private Sub GetAddresses()
    Dim o, AddressList, AddressEntry
    Dim c As Range, r As Range, AddressName As String
    Set o = CreateObject("Outlook.Application")
    Set AddressList = o.Session.AddressLists("Global Address List")
    Set r = Range("a1:a3")
    For Each c In r
        AddressName = Trim(c.Value) & ", " & Trim(c.Offset(0, 1).Value)
        For Each AddressEntry In AddressList.AddressEntries
            If AddressEntry.Name = AddressName Then
                c.Offset(0, 2).Value = AddressEntry.Address
                Exit For
            End If
        Next AddressEntry
    Next c
    End Sub 
```

在实际检索电子邮件地址之前，该代码似乎运行良好。在它匹配一个名称后，它返回以下而不是地址。有谁知道我做错了什么。

```
/O=Compnay/OU=Company/cn=Recipients/cn=shs 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T17:37:47.057

我假设这些是域用户。您想从 exchangeUser 对象中获取 SMTP 地址。我已经更新了您的代码以显示这一点。

```
Private Sub GetAddresses()
    Dim o, AddressList, AddressEntry
    Dim c As Range, r As Range, AddressName As String
    'added variable for exchange user object
    Dim exchangeUser As Outlook.exchangeUser

    Set o = CreateObject("Outlook.Application")
    Set AddressList = o.Session.AddressLists("Global Address List")
    Set r = Range("a1:a3")
    For Each c In r
        AddressName = Trim(c.Value) ' & ", " & Trim(c.Offset(0, 1).Value)
        For Each AddressEntry In AddressList.AddressEntries
            If AddressEntry.Name = AddressName Then
            'set the exchange user object
            Set exchangeUser = AddressEntry.GetExchangeUser
            'get the smtp addresss
            c.Offset(0, 2).Value = exchangeUser.PrimarySmtpAddress
            'release
            Set exchangeUser = Nothing
                Exit For
            End If
        Next AddressEntry
    Next c
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T00:00:19.413

哎哟! 为什么要遍历地址列表中可能包含数十个条目的所有项目？使用 Aplication.Sesssion.CreateRecipient，然后调用 Recipient.Resolve。如果成功，您可以从 Recipient.AddressEntry 检索 AddressEntry 对象。
如果您需要确保仅针对 GAL 解析名称（顺便说一下，您不应该对 GAL 名称进行硬编码，它会因语言环境而异），您可以使用[Redemption](http://www.dimastr.com/redemption)及其 AddreessList.ResolveName 方法 - 您需要做的就是是调用[RDOSession.AddressBook.GAL.ResolveName](http://www.dimastr.com/redemption/RDOAddressList.htm)

# django - 如何正确加载 Django 南迁移中的固定装置？

> ID：13825216
> 
> 赞同：4
> 
> 时间：2012-12-11T17:18:43.403
> 
> 标签：django, django-south

我正在使用 Django 1.5b1 和南迁移，生活一般都很棒。我有一些创建我的数据库的架构更新，其中包括一个用户表。`ff.User`然后我为（我的自定义用户模型）加载一个夹具：

```
def forwards(self, orm):
        from django.core.management import call_command
        fixture_path = "/absolute/path/to/my/fixture/load_initial_users.json"
        call_command("loaddata", fixture_path) 
```

在我向我的`ff.User`模型中添加另一个字段之前，一切都运行良好，在迁移线的更下方。我的夹具负载现在中断：

```
DatabaseError: Problem installing fixture 'C:\<redacted>create_users.json':
Could not load ff.User(pk=1): (1054, "Unknown column 'timezone_id' in 'field list'") 
```

时区是我添加到我的用户模型中的字段 (ForeignKey)。

ff.User 与数据库中的不同，因此 Django ORM 放弃了数据库错误。不幸的是，我无法在我的夹具中将我的模型指定为`orm['ff.User']`，这似乎是南方的做事方式。

我应该如何使用南正确加载固定装置，以便在修改这些固定装置的模型后它们不会损坏？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-24T12:23:26.653

我找到了一个可以完成这项工作的 Django 片段！

[https://djangosnippets.org/snippets/2897/](https://djangosnippets.org/snippets/2897/)

它根据固定在夹具中的模型而不是应用程序代码中的实际模型定义来加载数据！非常适合我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-07T15:44:07.600

我提出了一个您可能也会感兴趣的解决方案：

[https://stackoverflow.com/a/21631815/797941](https://stackoverflow.com/a/21631815/797941)

基本上，这就是我加载我的夹具的方式：

```
from south.v2 import DataMigration
import json

class Migration(DataMigration):

    def forwards(self, orm):
        json_data=open("path/to/your/fixture.json")
        items = json.load(json_data)
        for item in items:
            # Be carefull, this lazy line won't resolve foreign keys
            obj = orm[item["model"]](**item["fields"])
            obj.save()

        json_data.close() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-12T19:40:32.350

这对我来说也是使用固定装置的一个令人沮丧的部分。我的解决方案是制作一些辅助工具。一种通过从数据库中采样数据来创建夹具并在夹具中包含南迁移历史的方法。

还有一个工具可以将南迁移历史添加到现有的装置中。

第三个工具在修改此夹具时检查提交，加载夹具，然后检查最近的提交并进行南迁移并将迁移的数据库转储回夹具。这是在一个单独的数据库中完成的，因此您的默认数据库不会被踩到。

前两个可以被认为是 beta 代码，第三个可以被视为可用的 alpha，但它们已经对我很有帮助。

希望从其他人那里得到一些反馈：git@github.com:JivanAmara/django_fixture_tools.git 目前，它只支持使用 git 作为 RCS 的项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-27T20:51:52.570

我发现的最优雅的解决方案是[在这里](http://foothold.ru/knowledge/detail/proper-fixtures-loading-in-south-data-migrations.html)，您的应用程序模型的`get_model`功能被切换为从提供的 orm 提供模型。然后在应用夹具后将其设置回来。

```
from django.db import models
from django.core.management import call_command

def load_fixture(file_name, orm):
    original_get_model = models.get_model

    def get_model_southern_style(*args):
        try:
            return orm['.'.join(args)]
        except:
            return original_get_model(*args)

    models.get_model = get_model_southern_style
    call_command('loaddata', file_name)
    models.get_model = original_get_model 
```

`load_fixture('my_fixture.json', orm)`你从你的转发定义中调用它。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-11T18:06:09.557

`forwards()`通常 South 使用和`backwards()`函数处理迁移。在您的情况下，您应该：

*   更改夹具以包含正确的数据，或
*   在迁移之前导入夹具会破坏它（或在同一迁移中，但在更改架构之前），

在第二种情况下，在迁移添加（或在您的情况下，删除）列之前，您应该执行将显式加载固定装置的迁移，类似于此（[文档](http://south.readthedocs.org/en/latest/fixtures.html#fixtures-from-migrations)）：

```
def forwards(self, orm):
    from django.core.management import call_command
    call_command("loaddata", "create_users.json") 
```

我相信这是完成您需要的最简单的方法。还要确保在应用旧迁移之前不要犯一些简单的错误，例如尝试使用新结构导入数据。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-12T12:07:20.780

阅读以下两篇文章帮助我想出了一个解决方案：

[http://andrewingram.net/2012/dec/common-pitfalls-django-south/#be-careful-with-fixtures](http://andrewingram.net/2012/dec/common-pitfalls-django-south/#be-careful-with-fixtures)

[http://news.ycombinator.com/item?id=4872596](http://news.ycombinator.com/item?id=4872596)

具体来说，我重写了我的数据迁移以使用[“dumpscript”的输出](http://code.google.com/p/django-command-extensions/wiki/Dumpscript)

我需要稍微修改生成的脚本以与南一起使用。而不是做

```
from ff.models import User 
```

我愿意

```
User = orm['ff.User'] 
```

这完全像我想要的那样工作。此外，它还具有不硬编码 ID 的好处，就像固定装置需要的那样。

# excel - 在 vba excel 中通过 CDO 获取 gmail 收件箱邮件

> ID：13825223
> 
> 赞同：2
> 
> 时间：2012-12-11T17:19:24.080
> 
> 标签：excel, gmail, cdo.message, vba

我想在 VBA 中使用 CDO 访问 gmail 帐户中的收件箱。我已经设法发送了一封邮件，但不知道如何将收件箱消息提取到 Excel 表中。如果可能的话，我也希望能够识别每条消息的标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-04T17:25:58.063

虽然该问题特别要求 CDO，但从[这个类似的 SO 问题](https://stackoverflow.com/questions/21342902/is-it-possible-to-fetch-gmail-emails-using-vba)看来，这似乎不可能直接使用 CDO。

作为获取收件箱邮件消息的另一种方法，谷歌最近发布了一个可以与 Excel 一起使用的 Gmail API。以下是使用[VBA-Web](https://github.com/VBA-tools/VBA-Web)的示例：

```
' Setup client and authenticator (cached between requests)
Private pGmailClient As WebClient
Private Property Get GmailClient() As WebClient
    If pGmailClient Is Nothing Then
        ' Create client with base url that is appended to all requests
        Set pGmailClient = New WebClient
        pGmailClient.BaseUrl = "https://www.googleapis.com/gmail/v1/"

        ' Use the pre-made GoogleAuthenticator found in authenticators/ folder
        ' - Automatically uses Google's OAuth approach including login screen
        ' - Get API client id and secret from https://console.developers.google.com/
        ' - https://github.com/timhall/Excel-REST/wiki/Google-APIs for more info
        Dim Auth As New GoogleAuthenticator
        Auth.Setup "Your client id", "Your client secret"
        Auth.AddScope "https://www.googleapis.com/auth/gmail.readonly"
        Auth.Login
        Set pGmailClient.Authenticator = Auth
    End If

    Set GmailClient = pGmailClient
End Property

' Load messages for inbox
Function LoadInbox() As Collection
    Set LoadInbox = New Collection

    ' Create inbox request with userId and querystring for inbox label
    Dim Request As New WebRequest
    Request.Resource = "users/{userId}/messages"
    Request.AddUrlSegment "userId", "me"
    Request.AddQuerystringParam "q", "label:inbox"

    Dim Response As WebResponse
    Set Response = GmailClient.Execute(Request)

    If Response.StatusCode = WebStatusCode.Ok Then
        Dim MessageInfo As Dictionary
        Dim Message As Dictionary

        For Each MessageInfo In Response.Data("messages")
            ' Load full messages for each id
            Set Message = LoadMessage(MessageInfo("id"))
            If Not Message Is Nothing Then
                LoadInbox.Add Message
            End If
        Next MessageInfo
    End If
End Function

' Load message details
Function LoadMessage(MessageId As String) As Dictionary
    Dim Request As New WebRequest
    Request.Resource = "users/{userId}/messages/{messageId}"
    Request.AddUrlSegment "userId", "me"
    Request.AddUrlSegment "messageId", MessageId

    Dim Response As WebResponse
    Set Response = GmailClient.Execute(Request)

    If Response.StatusCode = WebStatusCode.Ok Then
        Set LoadMessage = New Dictionary

        ' Pull out relevant parts of message (from, to, and subject from headers)
        LoadMessage.Add "snippet", Response.Data("snippet")

        Dim Header As Dictionary
        For Each Header In Response.Data("payload")("headers")
            Select Case Header("name")
            Case "From"
                LoadMessage.Add "from", Header("value")
            Case "To"
                LoadMessage.Add "to", Header("value")
            Case "Subject"
                LoadMessage.Add "subject", Header("value")
            End Select
        Next Header
    End If
End Function

Sub Test()
    Dim Message As Dictionary
    For Each Message In LoadInbox
        Debug.Print "From: " & Message("from") & ", Subject: " & Message("subject")
        Debug.Print Message("snippet") & vbNewLine
    Next Message
End Sub 
```

# android - 在一个小的 LinearLayout 中对齐 TextView 中心

> ID：13825224
> 
> 赞同：1
> 
> 时间：2012-12-11T17:19:32.040
> 
> 标签：android, android-layout

这似乎是一个微不足道的问题，但我发现在小布局中对齐 TextView 很痛苦。这是xml：

 `````
<LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/button_bg_phone"
                android:gravity="center_vertical"
                android:orientation="horizontal">

                <ImageView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/icon_phone" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="match_parent"
                    android:layout_marginLeft="4dp"
                    android:shadowColor="#88FFFFFF"
                    android:shadowDx="0"
                    android:shadowDy="1"
                    android:shadowRadius="0.2"
                    android:textColor="#6d5013"
                    android:textSize="24sp" />
</LinearLayout> 
````  `背景图是9patch，所以有padding，但是文字没有居中，被截掉了。我会发布输出图像，但显然这被认为是垃圾邮件。我已经尝试了多种方法，但仍然存在。较小的文本确实可以改善图像的居中，但只有非常小的文本才能正确居中。知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:26:24.597

试试这样

```
<LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:background="@drawable/button_bg_phone">
<TextView
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:scaleType="fitCenter"
                android:shadowColor="#88FFFFFF"
                android:shadowDx="0"
                android:shadowDy="1"
                android:shadowRadius="0.2"
                android:textColor="#6d5013"
                android:textSize="24sp" /> 
`````

# vhdl - 用于心跳传感器的 Vhdl 计数器

> ID：13825225
> 
> 赞同：1
> 
> 时间：2012-12-11T17:19:38.010
> 
> 标签：vhdl

我想在 vhdl 中为我的心跳传感器做一个计数器。我有一个传感器，每次心跳时都会亮起，我想计算 LED 亮了多少次，但代码缺少一些节拍。

我的代码

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
USE IEEE.STD_LOGIC_UNSIGNED.ALL;

entity pulse is port(
    heartin : in std_logic;
    clk : in std_logic;
    reset : in std_logic;
    F : out std_logic_vector ( 6 downto 0)
);
end pulse;

architecture Behavioral of pulse is

    component clkdivider is Port (
        clkin: in std_logic;
        clkout:out std_logic
    );
    end component;
    signal x : std_logic_vector (3 downto 0):= "0000";
    signal y : std_logic_vector (6 downto 0);
    signal wire: std_logic;

begin
    L2:clkdivider port map (clkin=>clk, clkout=>wire);

    process(wire) 
    begin
        if rising_edge (wire) then
            if reset = '1' then
                x <= "0000";
            elsif heartin = '1' then
                x <= (x + "0001");
            end if;
        end if;
    end process;

    process(x,y)
    begin
        case x is
            when "0000"=> y<="1000000";  -- '0'
            when "0001"=> y<="1111001";  -- '1'
            when "0010"=> y<="0100100";  -- '2'
            when "0011"=> y<="0110000";  -- '3'
            when "0100"=> y<="0011001";  -- '4' 
            when "0101"=> y<="0010010";  -- '5'
            when "0110"=> y<="0000010";  -- '6'
            when "0111"=> y<="1111000";  -- '7'
            when "1000"=> y<="0000000";  -- '8'
            when "1001"=> y<="0010000";  -- '9'
            when "1010"=> y<="0001000";  -- 'A'
            when "1011"=> y<="0000011";  -- 'b'
            when "1100"=> y<="1000110";  -- 'C'
            when "1101"=> y<="0100001";  -- 'd'
            when "1110"=> y<="0000110";  -- 'E'
            when others=> y<="0001110";  -- 'F'     

        end case;   
    end process;

    F <= y;

end Behavioral; 
```

时钟分频器代码：

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.STD_LOGIC_ARITH.ALL;
use IEEE.STD_LOGIC_UNSIGNED.ALL;

entity clkdivider is Port (
    clkin: in std_logic;
    clkout:out std_logic
);
end clkdivider;

architecture Behavioral of clkdivider is
    signal int_clock:std_logic;
begin
    clkout<=int_clock;
    process(clkin)
        variable var:integer range 0 to 2200000 :=0;
    begin
        if (clkin'event and clkin = '1') then
            if var = 2200000 then
                int_clock <= not int_clock;
                var := 0;
            else
                var := var+1;
            end if;
        end if;
    end process;
end Behavioral; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:41:06.663

这是我的想法：

*   您的时钟分频器将占用一些每隔 8ns 转换一次的时钟，而转换频率要低得多。
*   如果`heartin = 1`在 a `rising_edge`of 上`clk_in`，但不在 a `rising_edge`of上，会发生什么`wire`？
*   我不清楚你为什么首先要划分时钟。你的心跳以什么速度发生？

我不清楚为什么您的代码看起来与当前所做的不相似，而是一起跳过 clkdivider，并通过更快的时钟运行您的计数器逻辑。

# objective-c - 启用 iCloud - 在应用程序启动时停止显示打开的文件？

> ID：13825228
> 
> 赞同：11
> 
> 时间：2012-12-11T17:19:41.070
> 
> 标签：objective-c, cocoa, icloud, nsdocument

我刚刚为我正在开发的应用程序添加了 iCloud 支持。它工作得很好，除了当我打开应用程序而没有聚焦文档时，会出现 iCloud 打开文件对话框，我不希望它出现！

在我的应用程序委托中，我有：

```
- (BOOL) applicationShouldOpenUntitledFile:(NSApplication *)sender
{
    [mainWindowController.window makeKeyAndOrderFront:self];
    return NO;
} 
```

我用它来显示我自己的自定义窗口。但是现在，iCloud 打开文件对话框和我自己的对话框都显示了。关于如何摆脱 iCloud 对话框的任何想法？

![默认窗口](../Images/238250fcc1191f4f7cb3f9dae9f25924.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-01-27T22:51:09.070

[https://developer.apple.com/library/prerelease/content/releasenotes/AppKit/RN-AppKitOlderNotes/index.html](https://developer.apple.com/library/prerelease/content/releasenotes/AppKit/RN-AppKitOlderNotes/index.html)

> 对 iCloud 的 NSDocument 支持
> 
> 在 10.8 中，具有 ubiquity-container-identifiers 权利的基于 NSDocument 的应用程序获得了新的功能和 UI，以促进 iCloud 文档管理。
> 
> 当启用 iCloud 并且第一次启动或重新激活应用程序并且没有可见或正在恢复的窗口时，NSDocumentController 将显示一个显示用户的 iCloud 库的非模态打开面板，而不是创建一个新的无标题文档。
> 
> ...
> 
> 不想为任何或所有 NSDocument 子类使用这些功能的应用程序可以覆盖 +[NSDocument usesUbiquitousStorage] 并返回 NO。如果所有应用程序声明的 NSDocument 子类都从此方法返回 NO，则 NSDocumentController 将永远不会显示新的非模态打开面板。

因此，如果您可以放弃使用本发行说明中列出的功能，请`return NO`访问`+[NSDocument usesUbiquitousStorage]`. 我确认您仍然可以从正常对话框打开/保存文件到 iCloud 存储中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-19T21:50:33.500

在您的 App Delegate 中放置以下代码可以让您绕过 iCloud 弹出的新文档屏幕。经过高山脉测试。

```
-(void)applicationDidFinishLaunching:(NSNotification *)notification
{
    // Schedule "Checking whether document exists." into next UI Loop.
    // Because document is not restored yet. 
    // So we don't know what do we have to create new one.
    // Opened document can be identified here. (double click document file)
    NSInvocationOperation* op = [[NSInvocationOperation alloc]initWithTarget:self selector:@selector(openNewDocumentIfNeeded) object:nil];
    [[NSOperationQueue mainQueue] addOperation: op];
}

-(void)openNewDocumentIfNeeded
{
    NSUInteger documentCount = [[[NSDocumentController sharedDocumentController] documents]count];

    // Open an untitled document what if there is no document. (restored, opened).       
    if(documentCount == 0){
        [[NSDocumentController sharedDocumentController]openUntitledDocumentAndDisplay:YES error: nil];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T11:13:56.847

```
- (BOOL) applicationShouldOpenUntitledFile:(NSApplication *)sender
{
    [mainWindowController.window makeKeyAndOrderFront:self];
    return NO;
} 
```

这部分是正确的。我刚刚测试过了。

只要确保你的这个类真的是你的应用程序代表。

1.  **创建一个名为prefixAppDelegate**的新类
***   在您的`MainMenu.xib`中，将一个新对象拖到一边并将其自定义类设置为应用委托类*   右键单击**Application并从****Delegate**向下拖动到您的应用程序委托对象。*   现在只需将上面的代码粘贴到您的应用委托类中**

 **如果这仍然没有帮助，请尝试登录`applicationShouldOpenUntitledFile:`.

另外，我建议不要`[mainWindowController.window makeKeyAndOrderFront:self];`在此方法中设置。您应该使用应用程序委托方法`applicationDidFinishLaunching:`方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-05T02:56:30.727

`NSDocumentClass`我的观察和修复：除非您从 *-info.plist中删除 Key，否则不会执行 [applicationShouldOpenUntitledFile:] 。但如果您的应用程序是基于文档的应用程序，这是有害的，它不会打开您链接的文档类型。

我的解决方法是直接在`-(void)applicationWillFinishLaunching:(NSNotification *)notification` 方法中打开我的自定义窗口（应用程序委托）

```
ETDocumentWindowController *windowController =  (ETDocumentWindowController*)get your own window controller here...;
[windowController.window makeKeyAndOrderFront:nil]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-18T13:45:10.387

我想我会分享我对这个问题的解决方案，因为我看到其他人仍在寻找答案。它不是一个很好的解决方案，但它可以解决问题。

1.  子类 NSDocumentController 并添加以下内容：

```
 + (void) setCanOpenUntitledDocument: (BOOL) _canOpenUntitledDocument
{
    canOpenUntitledDocument = _canOpenUntitledDocument;
} // End of setCanOpenUntitledDocument:

- (void) openDocument: (id) sender
{
    // With iCloud enabled, the app keeps trying to run openDocument: on first launch (before apphasfinishedlaunching gets set.
    // This method lets us check and see if the app has finished launching or not. If we try to open a document before
    // its finished, then don't let it.
    if(!canOpenUntitledDocument)
    {
        return;
    } // End of appHasFinishedLaunching not set

    [super openDocument: sender];
} // End of openDocument: 
```

将以下内容添加到您的应用委托中：

```
 - (void) applicationDidFinishLaunching: (NSNotification *) aNotification
{
    // Finished launching. Let us open untitled documents.
    [SQLProDocumentController setCanOpenUntitledDocument: true];

    ...
} 
```

和推理 - 通过设置断点，`openDocument`我发现它在之前调用或被调用`applicationDidFinishLaunching`，这意味着添加这些方法是无用的。同样，这不是很好的代码，但它可以工作并且可以解决问题。（没有其他解决方案对我有用）。`applicationShouldOpenUntitledFile``applicationShouldHandleReopen:hasVisibleWindows:`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-02T06:07:52.040

我遇到了类似的问题——事实证明，在我的情况下，我必须`NSDocumentClass`从数组中的 Info.plist 中删除键和值`CFBundleDocumentTypes`。只有这样，该`applicationShouldOpenUntitledFile:`方法才会被调用，从而允许我阻止 iCloud/Document 窗口打开。**

# asp.net - ASP.NET/SQL Server：从字符串转换为唯一标识符时转换失败

> ID：13825229
> 
> 赞同：1
> 
> 时间：2012-12-11T17:19:42.603
> 
> 标签：asp.net, sql-server-2008, sqldatasource, uniqueidentifier, parameterized-query

我正在为此使用参数化查询。我将一个逗号分隔的唯一标识符字符串传递给该查询的拆分参数。使用几个唯一标识符可以正常工作，但我认为我达到了大约 2000 个字符的最大值。

我有大约 150 个 areaID，选择一些查询可以正常工作。选择查询失败并返回的所有区域

> *从字符串转换为唯一标识符时转换失败。*

有什么建议可以让更多的值进入查询而不遇到这个问题？

```
Area.AreaID IN (SELECT CONVERT(UNIQUEIDENTIFIER, Value) FROM dbo.Split(@AreaIDs,',')) 
```

/

```
USE [Triton2]
GO
/****** Object:  UserDefinedFunction [dbo].[Split]    Script Date: 12/11/2012 11:39:39         AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER FUNCTION [dbo].[Split]
(
    @List nvarchar(2000),
    @SplitOn nvarchar(5)
)  
RETURNS @RtnValue table 
(

    Id int identity(1,1),
    Value uniqueidentifier
) 
AS  
BEGIN 
    While (Charindex(@SplitOn,@List)>0)
    Begin

        Insert Into @RtnValue (value)
        Select 
            Value = ltrim(rtrim(Substring(@List,1,Charindex(@SplitOn,@List)-1)))

        Set @List = Substring(@List,Charindex(@SplitOn,@List)+len(@SplitOn),len(@List))
    End

    Insert Into @RtnValue (Value)
    Select Value = ltrim(rtrim(@List))

    Return
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:34:28.323

正如@DigitalID 所提到的，您似乎应该使用`@List nvarchar(max)`，并且我会说在这种情况下这样做，而不管性能特征如何。可以肯定的是，您的应用程序现在只是发送了 2000 多个字符，并且假设您在不久的将来某个时候发送的字符数不会超过 4k，这似乎是定时炸弹编码。不过，您最了解自己的应用程序。

通常，性能问题是因为 BLOB 的存储，SQL Server 通常只有在它们[超过 8kB 限制](https://stackoverflow.com/questions/2091284/varcharmax-everywhere)时才会这样做。您似乎没有存储这些数据，至少在这个函数中。在计划缓存方面也可能会出现一些[性能下降](http://sqlblogcasts.com/blogs/simons/archive/2009/07/11/String-concatenation-with-max-types-stops-plan-caching.aspx)，但同样，如果您需要 max，请使用它。

# ruby-on-rails - 将参数传递给另一个控制器的“新”操作

> ID：13825232
> 
> 赞同：0
> 
> 时间：2012-12-11T17:19:49.153
> 
> 标签：ruby-on-rails

假设我有 2 个模型：

```
FoodOrder
Sales
SalesMeeting 
```

销售人员经常在开会时订购食物，因此我们希望将特定的 FoodOrder 与 SalesMeeting 相关联。

我可以通过调用：

```
new_food_order_path(@sales_meeting) 
```

并通过

```
params[:format] 
```

获取我想要链接到的对象的 id。

但是，假设程序员嫉妒了，他们想在参加黑客马拉松时订购食物。

如果我能传入就好了：

```
 new_food_order_path(@hackathon, "Hackathon") 
```

和

```
 new_food_order_path(@sales_meeting, "SalesMeeting") 
```

但是当我试图告诉我有一个

```
undefinded method gsub for Nil::NilClass 
```

有没有办法做到这一点？

编辑：实际上，我可以传入一个哈希值...我在写问题时想通了...我想知道 Rails 是否这样做...

也许还有一种方法可以通过重定向来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:19:49.153

你可以只传递一个哈希！

```
<%= link_to "New Food Order", new_food_order_path({ id: @sales_meeting, model: "SalesMeeting" }) %>

<%= link_to "New Hackathon", new_food_order_path({ id: @hackathon, model: "Hackathon" }) %> 
```

# memory - WP7 我们是否应该将 Visibility 设置为 Collapsed 以释放内存

> ID：13825234
> 
> 赞同：0
> 
> 时间：2012-12-11T17:19:54.877
> 
> 标签：memory, windows-phone-7, visibility

我的页面 A 包含`Pivot`许多数据透视项目。在每个枢轴是一个列表框。导航到页面 B 时，我应该将`Visibility`页面 A 设置`Collapsed`为释放一些内存吗？

然后当我再次导航到页面 A 时，我将其设置为`Visible`.

根据[windowsphonegeek](http://www.windowsphonegeek.com/articles/Performance-Tips-when-creating-WP7-apps)

> Visibility 属性 - 当您将元素重新显示在屏幕上时，通过将 Visibility 设置为 Visible，必须再次绘制可视树的内容。元素被完全重绘

“重绘”是否意味着“再次创建 UI”？

我应该这样做吗？或者有没有更好的方法来释放内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T01:34:37.297

你绝对不应该这样做。这是不必要的，只是增加了你必须管理的更多状态和你必须编写的更多代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:45:14.933

将可见性设置为折叠不会触发与您的元素关联的任何事件。将可见性设置为折叠不会占用 UIElements 的空间，因此从性能（内存）来看，我会假设它是可取的。

# java - 显示和处理帧android相机

> ID：13825235
> 
> 赞同：1
> 
> 时间：2012-12-11T17:19:54.627
> 
> 标签：java, android, opencv, android-camera

我有一个应用程序处理来自相机的帧并显示在布局上，捕获和管理相机帧的类如下：

```
package org.opencv.face;

import java.io.IOException;
import java.util.List;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.ImageFormat;
import android.hardware.Camera;
import android.hardware.Camera.PreviewCallback;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;

public abstract class SampleViewBase extends SurfaceView implements SurfaceHolder.Callback, Runnable {
private static final String TAG = "Sample::SurfaceView";

public Camera              mCamera;
private SurfaceHolder       mHolder;
private int                 mFrameWidth;
private int                 mFrameHeight;
private byte[]              mFrame;
private boolean             mThreadRun;
private byte[]              mBuffer;

public SampleViewBase(Context context) {
    super(context);
    mHolder = getHolder();
    mHolder.addCallback(this);
    Log.i(TAG, "Instantiated new " + this.getClass());
}

public int getFrameWidth() {
    return mFrameWidth;
}

public int getFrameHeight() {
    return mFrameHeight;
}

public void setPreview() throws IOException {
        mCamera.setPreviewDisplay(null);
}

public boolean openCamera() {
    Log.i(TAG, "openCamera");
    releaseCamera();
    mCamera = Camera.open();
    if(mCamera == null) {
        Log.e(TAG, "Can't open camera!");
        return false;
    }

    mCamera.setPreviewCallbackWithBuffer(new PreviewCallback() {
        public void onPreviewFrame(byte[] data, Camera camera) {
            synchronized (SampleViewBase.this) {
                System.arraycopy(data, 0, mFrame, 0, data.length);
                SampleViewBase.this.notify(); 
            }
            camera.addCallbackBuffer(mBuffer);
        }
    });
    return true;
}

public void releaseCamera() {
    Log.i(TAG, "releaseCamera");
    mThreadRun = false;
    synchronized (this) {
        if (mCamera != null) {
            mCamera.stopPreview();
            mCamera.setPreviewCallback(null);
            mCamera.release();
            mCamera = null;
        }
    }
    onPreviewStopped();
}

public void setupCamera(int width, int height) {
    Log.i(TAG, "setupCamera");
    synchronized (this) {
        if (mCamera != null) {
            Camera.Parameters params = mCamera.getParameters();
            List<Camera.Size> sizes = params.getSupportedPreviewSizes();
            mFrameWidth = width;
            mFrameHeight = height;

            // selecting optimal camera preview size
            {
                int  minDiff = Integer.MAX_VALUE;
                for (Camera.Size size : sizes) {
                    if (Math.abs(size.height - height) < minDiff) {
                        mFrameWidth = size.width;
                        mFrameHeight = size.height;
                        minDiff = Math.abs(size.height - height);
                    }
                }
            }

            params.setPreviewSize(getFrameWidth(), getFrameHeight());

            List<String> FocusModes = params.getSupportedFocusModes();
            if (FocusModes.contains(Camera.Parameters.FOCUS_MODE_CONTINUOUS_VIDEO))
            {
                params.setFocusMode(Camera.Parameters.FOCUS_MODE_CONTINUOUS_VIDEO);
            }            

            mCamera.setParameters(params);

            /* Now allocate the buffer */
            params = mCamera.getParameters();
            int size = params.getPreviewSize().width * params.getPreviewSize().height;
            size  = size * ImageFormat.getBitsPerPixel(params.getPreviewFormat()) / 8 * 2;
            mBuffer = new byte[size];
            /* The buffer where the current frame will be copied */
            mFrame = new byte [size];
            mCamera.addCallbackBuffer(mBuffer);

            try {
                setPreview();
            } catch (IOException e) {
                Log.e(TAG, "mCamera.setPreviewDisplay/setPreviewTexture fails: " + e);
            }

            /* Notify that the preview is about to be started and deliver preview size */
            onPreviewStarted(params.getPreviewSize().width, params.getPreviewSize().height);

            /* Now we can start a preview */
            mCamera.startPreview();
        }
    }
}

public void surfaceChanged(SurfaceHolder _holder, int format, int width, int height) {
    Log.i(TAG, "surfaceChanged");
    setupCamera(width, height);
}

public void surfaceCreated(SurfaceHolder holder) {
    Log.i(TAG, "surfaceCreated");
    (new Thread(this)).start();
}

public void surfaceDestroyed(SurfaceHolder holder) {
    Log.i(TAG, "surfaceDestroyed");
    releaseCamera();
}

/* The bitmap returned by this method shall be owned by the child and released in onPreviewStopped() */
protected abstract Bitmap processFrame(byte[] data);

/**
 * This method is called when the preview process is being started. It is called before the first frame delivered and processFrame is called
 * It is called with the width and height parameters of the preview process. It can be used to prepare the data needed during the frame processing.
 * @param previewWidth - the width of the preview frames that will be delivered via processFrame
 * @param previewHeight - the height of the preview frames that will be delivered via processFrame
 */
protected abstract void onPreviewStarted(int previewWidtd, int previewHeight);

/**
 * This method is called when preview is stopped. When this method is called the preview stopped and all the processing of frames already completed.
 * If the Bitmap object returned via processFrame is cached - it is a good time to recycle it.
 * Any other resources used during the preview can be released.
 */
protected abstract void onPreviewStopped();

public void run() {
    mThreadRun = true;
    Log.i(TAG, "Starting processing thread");
    while (mThreadRun) {
        Bitmap bmp = null;

        synchronized (this) {
            try {
                this.wait();
                bmp = processFrame(mFrame);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }

        if (bmp != null) {
            Canvas canvas = mHolder.lockCanvas();
            if (canvas != null) {
                canvas.drawBitmap(bmp, (canvas.getWidth() - getFrameWidth()) / 2, (canvas.getHeight() - getFrameHeight()) / 2, null);
                mHolder.unlockCanvasAndPost(canvas);
            }
        }
    }
} 
```

}

屏幕不显示任何内容，但将方法“setPreview（）”替换为以下内容：

```
@TargetApi(11)
public void setPreview() throws IOException {
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
        mSf = new SurfaceTexture(10);
        mCamera.setPreviewTexture( mSf );
    }
    else
        mCamera.setPreviewDisplay(null); 
```

现在可以正常工作，但仅适用于 3.0 以上的 Android 版本，而我想要的是适用于任何版本。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T08:57:51.773

如果你想接收预览回调，你*必须*显示预览，使用`setPreviewDisplay()`非空参数。该 API 旨在强制您在屏幕上显示此预览。任何让您创建从不渲染的虚拟 SurfaceView 的解决方法可能无法在某些设备上或在下次升级后工作。

在 Honeycomb 之前，可以在屏幕外创建预览 SurfaceView（使其位置偏右），因此不会显示预览。这个错误后来被修复了。

幸运的是，您可以使用 3+ `setPreviewTexture()`，并且平台无法强迫您实际显示纹理。

# c++builder-xe - C++ Builder XE 调试器如何影响我的代码？

> ID：13825240
> 
> 赞同：0
> 
> 时间：2012-12-11T17:20:05.327
> 
> 标签：c++builder-xe

使用 C++ builder XE

我在带有 2 个面板的表单上使用 TStatusBar。第一个面板只是文本。第二个设置为 OwnerDraw 并应指示一个红色或绿色面板，显示是否连接了 comport。这是从表单上的 TTimer 更新的，间隔为 500 毫秒。似乎发生的事情是，当我从 IDE（使用调试器）中运行程序时，它可以正常工作，但是当我从目标文件夹中的 .exe 文件运行它时，或者从没有调试器的 IDE 中运行它时，它不更新状态栏。

这真的很烦人，因为只要我在调试器下运行它来调试它，它就不会出错！当我不使用调试器时，似乎没有调用 OnDrawPanel 事件处理程序。任何人有任何想法为什么，或者解决这个问题？

# cocoa - 当 NSMenu 删除所有项目时得到通知

> ID：13825246
> 
> 赞同：0
> 
> 时间：2012-12-11T17:20:32.617
> 
> 标签：cocoa, nsmenu

当 NSMenu 实例中的菜单项被删除时，我需要得到通知。特别是因为我在课堂上持有一个 NSMenuItem *selectedItem 实例。如果这个 selectedItem 从我的 NSMenu 实例中删除，我想将 selectedItem 设置为 nil；

当您从菜单中删除单个项目时，有一个名为“NSMenuDidRemoveItemNotification”的 NSMenu 通知。但是，当您调用 [myNSMenu removeAllItems] 时，它不会被调用。

有任何想法吗？, 我需要继承 NSMenu 吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:43:52.627

是的，你是对的，removeAll 没有通知。

你说得对，你需要子类化

或者，需要一些技巧（可能是 hacky 工作）

甚至您也可以使用 as 方法创建一个类别`removeEachItem`。

如果菜单只剩下一项您可以跟踪`NSMenuDidRemoveItemNotification`的上次调用的项目，那么您就完成了您的要求。

# python - Python中的字典属性

> ID：13825253
> 
> 赞同：0
> 
> 时间：2012-12-11T17:20:41.150
> 
> 标签：python

> **可能重复：**
> [像 Python 中的属性一样访问字典键？](https://stackoverflow.com/questions/4984647/accessing-dict-keys-like-an-attribute-in-python)

有没有办法在python中实现这个

```
foo = {'test_1': 1,'test_2': 2}
print foo.test_1
>>> 1 
```

也许如果我扩展 dict，但我不知道如何动态生成函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:22:42.700

怎么样：

```
class mydict(dict):
  def __getattr__(self, k):
    return self[k]

foo = mydict({'test_1': 1,'test_2': 2})
print foo.test_1 
```

您可能还想覆盖`__setattr__()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:10:47.867

[您可以使用namedtuple](http://docs.python.org/2/library/collections.html#collections.namedtuple)实现类似的行为。但唯一的缺点是，它不可变

```
>>> bar = namedtuple('test',foo.keys())(*foo.values())
>>> print bar.test_1
1
>>> print bar.test_2
2 
```

# android - 从 Fragment 调用 startActivityForResult 不会调用 onActivityResult

> ID：13825254
> 
> 赞同：15
> 
> 时间：2012-12-11T17:20:41.833
> 
> 标签：android, android-intent, android-fragments, android-activity

我有一个`DialogActivity`从 a 调用的`Fragment`用于显示`Dialog`带有两个图像按钮的自定义。

在`DialogActivity.onCreate`

```
final Dialog dialog = new Dialog(this, R.style.DialogTheme);
dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
dialog.setContentView(R.layout.dialog_pause); 
dialog.getWindow().setBackgroundDrawable(new ColorDrawable(android.graphics.Color.TRANSPARENT));
dialog.show(); 
```

在`DialogActivity.onClick`

```
 @Override
        public void onClick(View v) {
            Log.d(LOGTAG, "onClick CONTINUE");

            Intent resultData = new Intent();
            resultData.putExtra("TEST", "return data");
            setResult(666, resultData);
            dialog.cancel();
        } 
```

在调用的片段中`startActivityForResult`：

```
Intent dialogActivityIntent = new Intent(getActivity(), DialogActivity.class);
startActivityForResult(dialogActivityIntent, 999); 
```

`Activity`并`Fragment`调用`startActivityForResult`：_

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {

    super.onActivityResult(requestCode, resultCode, data);
} 
```

当我单击按钮时，我只会取消对话框并显示后台活动（片段）。

没有任何对`onActivityResult`, `onResume`, ... 的调用`Fragment`或`Activity`包含`Fragment`.

## 我尝试过的事情：

要`onActivityResult`在两者中实现，`Fragment`并且`Activity`包含我的`Fragment`.

## 要知道的事情：

`noHistory=true`我在每个`Activity`我拥有的属性中设置了属性。

如果我`finish()`在`onClick`那个`Activity/Fragment`调用`DialogActivity`也关闭了，并且应用程序返回到之前的`Activity`.

**这可能是问题所在，我不打电话`finish()`......但如果我打电话`finish()`，它会退出到另一个`Activity`，而不是`Activity`那个调用`startActivityForResult`。**

## 我检查的链接：

[startActivityForResult() 不调用 onActivityResult(int requestCode, int resultCode, Intent data)？](https://stackoverflow.com/questions/10867495/startactivityforresult-dont-call-to-onactivityresultint-requestcode-int-resu)

[无法触发 onActivityResult() android？](https://stackoverflow.com/questions/13017281/cannot-get-to-trigger-onactivityresult-android)

[startActivityForResult 似乎没有调用 onActivityResult](https://stackoverflow.com/questions/7645489/startactivityforresult-doesnt-seem-to-call-onactivityresult)

[onActivityResult 从未调用过](https://stackoverflow.com/questions/5302085/onactivityresult-never-called)

[Android onActivityResult 从未调用](https://stackoverflow.com/questions/7812120/android-onactivityresult-never-called)

[Activity 从 Fragment 启动时未调用 onActivityResult()](https://stackoverflow.com/questions/8839434/onactivityresult-not-called-when-activity-started-from-fragment)

* * *

我希望一切都清楚地解释了^^。

提前致谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-03T00:14:33.117

启动新的via时，具有该属性的活动`noHistory=true`将永远不会被调用。正如[文档](http://developer.android.com/guide/topics/manifest/activity-element.html#nohist)中提到的，当属性设置为时，当用户离开时调用.`onActivityResult()``Activity``startActivityForResult()``noHistory``true``finish()``Activity``Activity`

因此，当`startActivityForResult()`被调用时，`Activity`被导航离开，导致它`finish()`被调用并使其永远不会收到对 的调用`onActivityResult()`。如果您从that's calling中删除该`noHistory=true`属性，然后在您的 's中调用，那么您仍然应该看到that 启动它，并收到对 的调用。`Activity``startActivityForResult()``finish()``DialogActivity``onClick()``Activity``onActivityResult()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-25T09:00:08.683

完成结果后关闭所有活动。例如，在您覆盖的 onActivityResult 中，您可以添加 finishActivity（活动 1..N）。不要忘记将每个放在 try catch 下。

# ios - 无法使用 Google Admob 中介在 iPad 上显示 Mobfox 广告

> ID：13825258
> 
> 赞同：2
> 
> 时间：2012-12-11T17:20:49.967
> 
> 标签：ios, admob, mobfox

我能够在 iPhone 上使用 Google Admob Mediation (v6.2.1) 集成 Mobfox (Adapter v4.1.0)（广告显示，我可以点击它）。但是在 iPad 上，没有出现任何内容，因为我收到以下错误：

```
Error Domain=com.google.ads Code=9 "Request Error: No ad to show from all configured ad networks."UserInfo=0x1ddd37c0 {NSLocalizedDescription=Request Error: No ad to show from all configured ad networks., NSLocalizedFailureReason=Request Error: No ad to show from all configured ad networks.} 
```

这似乎意味着没有可供 Google 中介显示的 Mobfox 广告。有人遇到过同样的问题吗？

注意：我对两个不同的 Admob 中介应用使用相同的 Mobfox 应用 ID。

# delphi - 向 TabSheet 上的所有动态 TColorButtons 发送 OnClick 命令

> ID：13825259
> 
> 赞同：3
> 
> 时间：2012-12-11T17:20:53.657
> 
> 标签：delphi, delphi-7

我正在使用 PingTool，并且我有一个动态创建按钮的 TabSheet（根据用户输入从 1-150 任意位置），我希望能够将 OnClick 命令传递给给定 TabSheet 上的所有按钮。我的单个按钮单击成功运行了我的 ping 代码，但是单击我的 PingAll 按钮时我收到了 EStackOverflow 消息。任何帮助将不胜感激。代码摘录如下：

用于按钮创建的代码：

```
begin
  For x := 0 to CheckListBox1.Items.Count -1 Do
  Begin
  If CheckListBox1.Checked[x]=true then
    begin
      GLCount := (GLCount +1);
      theIP :=(CheckListBox1.Items.Strings[x]);
        if GLcount < 10 then begin
          B := TColorButton.Create(Self);
          B.Name:= ('BTN'+intToStr(GLCount+1));
          B.Caption := theIP;
          B.Parent := TabSheet2;
          B.Height := 25;
          B.Width := 97;
          B.Left := 0 + GLCount * 96;
          B.Top := 8;
          B.BackColor := clBtnFace;
          B.ForeColor := clBtnText;
          B.OnClick := CustomButtonClick;
         end; 
```

自定义按钮点击代码：

```
Procedure TForm1.CustomButtonClick(Sender: TObject);
begin
  GlobalIP:=TColorButton(Sender).caption;
  IdIcmpClient1.Host := GlobalIP;
  IdIcmpClient1.ReceiveTimeout := 500;
  IdIcmpClient1.Ping();

case IdIcmpClient1.ReplyStatus.ReplyStatusType of
  rsEcho:
    TColorButton(Sender).BackColor := clGreen;
  rsTimeOut:
    TColorButton(Sender).BackColor := clRed;
end;
end; 
```

PingAll 代码（不工作）：

```
procedure TForm1.PingAllClick(Sender: TObject);
var
i: integer;

begin
  For i := 0 to TabSheet2.ControlCount -1 do
    if TabSheet2.Controls[i] is TColorButton then
    begin
    TColorButton(Sender).Click;
end;
end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T18:13:29.807

您正在调用递归方法 PingAllClick... 看起来您调用的是 TColorButton(Sender).Click

```
....
Control := tabSheet2.Controls[i]
if Control  is TColorButton then
  TColorButton(Control ).Click()
.... 
```

# java - 缓存修改通知？

> ID：13825261
> 
> 赞同：2
> 
> 时间：2012-12-11T17:20:57.343
> 
> 标签：java, guava

我正在寻找类似于 RemovalListener/RemovalNotification 的东西 - 但通知缓存中的值何时被修改。通知将包括旧值以及刚刚添加的新值。

[更新] 我只通过 CaceLoader 填充缓存（加载和重新加载）。缓存元素的“来源”有时是 flakey（远程缓存）。因此，使用替换元素的两个主要原因是：

1.  调试日志以指示从远程源实际检索到的值/时间。这可以在进行远程检索的类中完成。

2.  生成差异，然后可以主动推送到（远程）客户端。例如，通过 blazeDS 发布更改，而不是要求客户端不断“获取”。

应该可以在没有额外通知的情况下通过 reload 方法实现这一点，并在开始获取新值之前获取当前缓存内容，然后比较新值和以前的值 - 然后采取额外的行动。我一直在寻找一种更通用的方法来解耦修改通知。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:02:07.680

您可以提交 Guava 功能请求，要求将方法添加到 RemovalNotification，当原因被替换时，该方法将返回替换值。但请尽可能详细地说明您的问题以及为什么这是一个很好的解决方案。

# c# - 导出大型报告时 SSRS 崩溃并出现 OutOfMemoryExceptions

> ID：13825264
> 
> 赞同：0
> 
> 时间：2012-12-11T17:21:03.377
> 
> 标签：c#, reporting-services, export, sql-server-express, ram

我们有 SQL 2012 Express 的 SSRS 报告。我们需要以 OPENXML 格式导出报告。有一个 C# 控制台应用程序将所需的参数传递给 SSRS，检索导出的报告并将其保存到文件中。我们的报告有一些参数在生成报告之前是未知的。

使用 HttpWebRequest 导出报告。当我们有大约 50,000 行的中型报表时，一切正常。但是当我们有 500,000 行的报告时，eportingServicesService.exe 开始消耗服务器上所有可用的 RAM，并且 SSRS 经常因 OutOfMemory 异常而崩溃。我们还尝试了 ReportServer 组件来导出报告，但这没有任何区别。

有什么方法可以告诉 SSRS 它不应该尝试一次生成整个报告，而是分块发送或通过 HttpWebResponse 流式传输？生成的文件只有大约 40MB，所以我真的不清楚为什么 SSRS 服务在生成此报告时使用超过 500MB 的 RAM 和 100% 的 CPU。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:24:31.800

我在 SSRS 导出到 Excel 300000 行时遇到了同样的问题；在我的情况下，解决方案是在 sql server 中构建一个 clr 存储过程并在我的 Web 应用程序中调用它。

# c# - 如何在 Visual C# Express 2010 中加载 DLL 的调试符号？

> ID：13825269
> 
> 赞同：1
> 
> 时间：2012-12-11T17:21:30.210
> 
> 标签：c#, visual-studio

我正在用 Visual C# 2010 Express 编写一个应用程序。我想单步执行 DLL 中的一些代码来调试它。DLL 及其整个源代码树都在我的同一台 PC 上。如何为其加载符号？

谷歌搜索答案说在运行或调试模式下使用 Debug > Windows > Modules。但我没有看到任何模块选项， http: [//msdn.microsoft.com/en-us/library/4c8f14c9%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/4c8f14c9%28v=vs.100%29.aspx)表明 Express 没有模块窗口。那么我应该如何加载符号以便我可以进入我的 DLL 呢？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:41:42.793

我找到了一种解决方法，在这种情况下有效，即 DLL 构建项目在我的 PC 上。. .

*   打开工具 > 选项的窗口
*   选中左下角标有“显示所有设置”的复选框
*   从树视图中展开调试 > 符号窗口
*   有一个带有标签“符号文件（.pdb）位置：”的多行文本框
*   在该标签的右侧有一排图标
*   单击看起来像新文件夹图标的图标；这将产生一个带有复选框的空编辑行
*   键入要找到 .PDB 文件的文件夹的完整路径 选中复选框并退出选项。

    有了这个，我就能够单步执行 DLL 中的代码并查看变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:44:02.167

调试 -> 附加到进程并找到已加载您的 .dll 的进程

# sql - 从 SQL Server CE 迁移到 SQL Server Express

> ID：13825270
> 
> 赞同：2
> 
> 时间：2012-12-11T17:21:35.110
> 
> 标签：sql, sql-server-ce, sql-server-express

刚刚用SQL Server Express写了一个大程序，很开心，难的是客户很难安装SQL Server来测试程序。

我研究了 SQL Server CE，它看起来非常适合小型客户端和试用软件。但是 SQL Server CE 使用`System.Data.SqlCeServer`而不是`System.Data.SqlClient`

有没有办法制作一个使用 SQL Server CE 的应用程序，然后如果需要，客户端可以升级到 SQL Server Express？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:56:51.480

不，它们是不同的平台。CE 用于精简版，因此与 SQL Server 相比，它旨在用于有时断开连接且资源有限的设备。CE 应该具有 Express 功能的一个子集。

# java - Android 共享首选项更新

> ID：13825275
> 
> 赞同：1
> 
> 时间：2012-12-11T17:21:57.933
> 
> 标签：java, android

我有两个项目/包属于同一应用程序。应用程序的主要项目几乎完成了应用程序上的所有事情。但是，我们使用了第二个项目来管理应用程序的更新。我们正在使用从 sqlite3 数据库更新并在主应用程序中应用的共享首选项

```
 editor.putString("string", sString).apply(); 
```

我们还使用以下逻辑来查看它是否是新版本，如果是则重新启动自动更新包

```
 if (!sCurrentVersion.equals(ver)) {
        Intent intent1 = new Intent(Intent.ACTION_MAIN);
        PackageManager manager = getPackageManager();
        intent1 = manager.getLaunchIntentForPackage("com.pack.autoupdate");
        intent1.addCategory(Intent.CATEGORY_LAUNCHER);
        startActivity(intent1);
    } 
```

然后在自动更新包中，我们只需使用 getSharedPreferences()。我们在共享首选项中需要的值是自动更新包需要检查的更新 url。

我们的问题是我们更新了数据库中的这些 url，但是我们仍然得到一些在自动更新检查中使用旧 url 的设备。我是否需要确保并重新启动自动更新，或者我在共享首选项方面做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T18:51:16.687

您是否确实调用了 .commit() 方法来更新您的 SharedPreference 值？

**更新 ：**

有关 .commit() 和 .apply() 之间区别的更多信息[这里](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html#apply%28%29)

# android - 如何从android获得联系

> ID：13825277
> 
> 赞同：0
> 
> 时间：2012-12-11T17:21:58.360
> 
> 标签：android, android-intent

> **可能重复：**
> [从 android 联系人选择器获取联系人信息](https://stackoverflow.com/questions/3044545/get-contact-info-from-android-contact-picker)

您好，我正在尝试从我的应用程序中的 android 联系人列表中获取联系人号码，其中我给出了一个按钮 onclick，我正在调用该按钮来调用联系人，我还在清单文件中添加了 read_contact 权限，但我得到了结果代码值 -1 ....wat 是错误的？？？任何人都可以帮助我...

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.friendinvite);

    Button btnFriend=(Button)findViewById(R.id.btnFriend);
    btnFriend.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            Intent contact = new Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI);
            startActivityForResult(contact, 1);        

        }
    });

}
    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (data != null) {

                ContentResolver cr = getContentResolver();

                Uri contactData = data.getData();

                Cursor c = managedQuery(contactData,null,null,null,null);
                String id=null;
                String name=null;
                String phone=null;

                if(c.moveToFirst()){
                        id = c.getString(c.getColumnIndex(ContactsContract.Contacts._ID));
                        name = c.getString(c.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));

                    if (Integer.parseInt(c.getString(c.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
                            Cursor pCur = cr.query(Phone.CONTENT_URI,null,Phone.CONTACT_ID +" = ?", new String[]{id}, null);

                      while(pCur.moveToNext()){
                          phone = c.getString(c.getColumnIndex(Phone.NUMBER));

                      }
                  }

                }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:34:07.400

您看过[Contacts Provider Api](http://developer.android.com/guide/topics/providers/contacts-provider.html)吗？似乎他们不像你那样做。我建议从 Uri 信息开始。

**编辑：**似乎活动使用两种方式来调用`startactivityforresult()`. 也许在阅读了[活动指南](http://developer.android.com/reference/android/app/Activity.html#StartingActivities)之后，您会有更好的洞察力。

# python - 带有身份验证的python请求（access_token）

> ID：13825278
> 
> 赞同：103
> 
> 时间：2012-12-11T17:22:02.973
> 
> 标签：python, authentication, curl, access-token

我正在尝试将 API 查询放入 python 中。命令行

```
curl --header "Authorization:access_token myToken" https://website.com/id 
```

给出一些 json 输出。myToken 是一个始终保持不变的十六进制变量。我想从 python 进行这个调用，以便我可以遍历不同的 id 并分析输出。有任何想法吗？在需要身份验证之前，我已经使用 urllib2 完成了此操作。我还查看了 requests 模块，但不知道该怎么做。

非常感谢。

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2012-12-11T19:27:54.310

[requests](https://requests.kennethreitz.org/en/master)包有一个非常好的用于 HTTP 请求的API，添加自定义标头的工作方式如下（[来源：官方文档](https://requests.kennethreitz.org/en/master/user/quickstart/#custom-headers)）：

```
>>> import requests
>>> response = requests.get(
... 'https://website.com/id', headers={'Authorization': 'access_token myToken'}) 
```

如果您不想使用外部依赖项，使用标准库的 urllib2 相同的东西看起来像这样（[来源：缺失的手册](http://www.voidspace.org.uk/python/articles/urllib2.shtml#headers)）：

```
>>> import urllib2
>>> response = urllib2.urlopen(
... urllib2.Request('https://website.com/id', headers={'Authorization': 'access_token myToken'}) 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2017-12-04T16:28:35.413

尝试在 Github 中使用令牌时，我遇到了同样的问题。

在 Python 3 中对我有用的唯一语法是：

```
import requests

myToken = '<token>'
myUrl = '<website>'
head = {'Authorization': 'token {}'.format(myToken)}
response = requests.get(myUrl, headers=head) 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2020-01-21T09:02:58.430

```
>>> import requests
>>> response = requests.get('https://website.com/id', headers={'Authorization': 'access_token myToken'}) 
```

如果上述方法不起作用，请尝试以下操作：

```
>>> import requests
>>> response = requests.get('https://api.buildkite.com/v2/organizations/orgName/pipelines/pipelineName/builds/1230', headers={ 'Authorization': 'Bearer <your_token>' })
>>> print response.json() 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2021-04-22T09:07:06.143

```
import requests

BASE_URL = 'http://localhost:8080/v3/getPlan'
token = "eyJhbGciOiJSUzI1NiIsImtpZCI6ImR"

headers = {'Authorization': "Bearer {}".format(token)}
auth_response = requests.get(BASE_URL, headers=headers)

print(auth_response.json()) 
```

> 输出 ：

```
{
"plans": [
    {
        "field": false,
        "description": "plan 12",
        "enabled": true
    }
  ]
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-10-30T15:42:32.003

你试过这个`uncurl`包（[https://github.com/spulec/uncurl](https://github.com/spulec/uncurl)）吗？您可以通过 pip 安装它，`pip install uncurl`. 您的 curl 请求返回：

```
>>> uncurl "curl --header \"Authorization:access_token myToken\" https://website.com/id"

requests.get("https://website.com/id",
    headers={
        "Authorization": "access_token myToken"
    },
    cookies={},
) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-10-12T05:44:01.017

我将添加一点提示：您作为标头的键值传递的内容似乎取决于您的授权类型，在我的情况下是`PRIVATE-TOKEN`

```
header = {'PRIVATE-TOKEN': 'my_token'}
response = requests.get(myUrl, headers=header) 
```

# c# - 如何通知开发者外部框架约束？

> ID：13825283
> 
> 赞同：0
> 
> 时间：2012-12-11T17:22:28.013
> 
> 标签：c#, .net

我们有由外部框架[ARDEN](http://www.openclinical.org/gmm_ardensyntax.html)调用的代码。缺少评论（很容易被忽略），我如何才能有效地通知开发人员与该框架的关联？具体来说，将 CLASS、NAMESPACE 和 METHOD 与所述框架结合在一起。

```
namespace MyCompany//changing namespace for this class is NOT SAFE
{
public class MyClass//changing class name is NOT SAFE
{
   [TiedToArdenAttribute]//maybe an attribute?
   public void MethodCalledByArden() {}//adding params, changing name is NOT SAFE

   public void NotCalledByArden() {}//changing this method signature, name, params is OK
}
} 
```

在正常情况下，例如当我`MyClass`通过 Visual Studio 在程序集中更改名称时，如果不修复对所述类的引用，我将无法编译。如果命名空间、类名或方法名发生变化......应该有一个警告说“最好修复 Arden 来处理这个变化”。我考虑过一个错误，但由于无法验证 Arden 是否已修复，我认为这不会奏效。

有没有办法为这个外部框架实现类似的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T17:28:30.233

我认为其他开发人员可以撤消您所做的任何事情——他们可以重命名类、删除注释、删除属性。

尝试将此类移动到单独的库中。并在您的项目中添加对已编译程序集的引用。这将使您的项目中的类名固定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:45:07.017

如果其他人正在使用该代码，则最好根据合同而不是通过接口的类实例来讨论。通过允许消费者使用接口将指示主要更改，例如属性更改......但内部类名更改等内容不会影响消费者。另外，您可以对类进行版本控制，在开发新类时，消费者仍然可以使用旧类，直到工厂内部发布它，而消费者不知道正在使用该类的 V2。

# c++ - Python：更改变量的数据类型

> ID：13825284
> 
> 赞同：0
> 
> 时间：2012-12-11T17:22:29.933
> 
> 标签：c++, python, c

我是 Python 新手，我发现这很奇怪（而且很神奇）。有人可以解释吗？

```
a = 2.0
b = 3.1
if b==3.1:
    print "%f"%a
    a = "Hi!"
    print "%s"%a
print "%s"%a

Output:
2.000000
Hi!
Hi! 
```

从到的类型如何`a`变化？如何在 C/C++ 中完成类似的操作？`float``string`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T17:27:03.250

Python 是一种[**动态类型**](http://en.wikipedia.org/wiki/Dynamically_typed#Dynamic_typing)语言，这意味着相同的变量可以引用不同类型的对象。C、C++ 和 Java 等语言是[静态类型](http://en.wikipedia.org/wiki/Dynamically_typed#Static_typing)的，这意味着类型是在编译时确定的。

在支持面向对象编程的静态类型语言中，如 C++，您可以使用继承和多态（基类指针）来引用不同子类类型的多个对象，但它不如您的“[鸭子类型](http://en.wikipedia.org/wiki/Duck_typing)”灵活进入 Python。

在 C 和 C++ 中，您还可以使用泛型`void*`指针指向任何类型的对象，但您会失去编译器提供的[类型安全性。](http://en.wikipedia.org/wiki/Type_safety)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T17:25:56.893

Python 是动态类型的。没有类型声明，任何名称都可以随时引用任何值。

像 C 和 Java 这样的静态类型语言将类型分配给变量，将错误类型的值分配给名称是错误的。Python 没有这样的限制。

# java - Spring MVC WARNING: No mapping found for HTTP request with URI

> ID：13825289
> 
> 赞同：0
> 
> 时间：2012-12-11T17:22:44.503
> 
> 标签：java, spring-mvc, spring-annotations

我的`web.xml`内容是：

```
<servlet>
        <servlet-name>springDispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>springDispatcher</servlet-name>
        <url-pattern>*.htm</url-pattern> <!-- Why not put / instead of *.html? -->
    </servlet-mapping>

    <!-- ContextLoader -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/conf/applicationContext.xml
            /WEB-INF/conf/applicationContext-data.xml
            /WEB-INF/conf/applicationContext-service.xml

        </param-value>
    </context-param> 
```

我`applicationContext.xml`的是：

```
<!-- Default ViewResolver -->
<bean
    class="org.springframework.web.servlet.view.InternalResourceViewResolver"
    p:prefix="/WEB-INF/jsp/" p:suffix=".jsp" />
<bean id="multipartResolver"
    class="org.springframework.web.multipart.commons.CommonsMultipartResolver" />

<context:annotation-config />

<context:component-scan base-package="com.lftechnology.controller" />

<!-- <bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping" 
    /> -->

<bean
    class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter" />

<bean class="com.lftechnology.controller.EmployeeController">
    <property name="employeeService" ref="employeeService" />
    <property name="departmentService" ref="departmentService"></property>
</bean> 
```

最后控制器是：

```
@Controller
public class EmployeeController {

    EmployeeService employeeService;
    DepartmentService departmentService;

    //getters setters    

    @RequestMapping("/deleteEmployee.htm")
    public String deleteEmployee(HttpServletRequest request,
            HttpServletResponse response) throws Exception {
        //
        return "redirect:viewEmployee";
    }

    @RequestMapping("/viewEmployee.htm")
    public ModelAndView viewEmployee(HttpServletRequest request,
            HttpServletResponse response) throws Exception {

        Map<String, Object> model = new HashMap<String, Object>();
        //
        return new ModelAndView("viewEmployee", "model", model);
    }

} 
```

**例外：**

```
 org.springframework.web.servlet.DispatcherServlet noHandlerFound
WARNING: No mapping found for HTTP request with URI [/springEmployeeAnotations/viewEmployee.htm] in DispatcherServlet with name 'springDispatcher' 
```

我不知道这段代码有什么问题。至少在我看来一切都是正确的。尝试进入`viewEmployee`控制器的方法时导致异常。有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:56:58.420

尝试这个：

```
<servlet-mapping>
<servlet-name>springDispatcher</servlet-name>
<url-pattern>/WEB-INF/jsp/*.htm </url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-11T18:28:54.653

您是否将您的控制器类映射到传入请求？

使用 @RequestMapping("/springEmployeeAnotations") 做到这一点

```
@Controller
@RequestMapping("/springEmployeeAnotations")
public class EmployeeController { ..... 
```

TP

# ruby-on-rails - Active_admin + Composite_primary_keys

> ID：13825291
> 
> 赞同：2
> 
> 时间：2012-12-11T17:22:47.297
> 
> 标签：ruby-on-rails, activeadmin, composite-primary-key

我正在使用复合主键 gem 和 active_admin，但我遇到了索引页面的问题。我可以以某种方式自定义 index.html.arb 文件吗？或者更改belongs_to 关联？

我的模型：

```
 class Vehicle < ActiveRecord::Base
 self.table_name = "vehicle"
 self.primary_key = "vehicle_id"
 belongs_to :operator, :foreign_key => :operator_id
 **belongs_to :orgunit, :foreign_key => [:operator_id, :run_code]** 
```

* * *

应用程序/管理员/车辆.rb

```
ActiveAdmin.register Vehicle do
  index do
  id_column
  column  :version
  column  :description
  default_actions 
```

结尾

* * *

索引页错误：

```
NoMethodError in Admin/vehicles#index
Showing /home/dev/.rvm/gems/ruby-1.9.3-p125@global/gems/activeadmin-
0.5.0/app/views/active_admin/resource/index.html.arb where line #1 raised:

undefined method `to_sym' for [:operator_id, :run_code]:Array
Extracted source (around line #1):

1: insert_tag renderer_for(:index) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:23:53.337

我相信 active_admin 不接受复合键。=/（导轨）

不管怎样，看看下面的这个链接，它可能会对你有所帮助，并解释为什么 active_admin 查询索引页面中的所有 belongs_to 关联。

[https://github.com/gregbell/active_admin/wiki/Preventing-Extra-Queries-on-Index-Pages](https://github.com/gregbell/active_admin/wiki/Preventing-Extra-Queries-on-Index-Pages)

# python - Python：递归计算大小为 n 的数组

> ID：13825294
> 
> 赞同：0
> 
> 时间：2012-12-11T17:22:54.053
> 
> 标签：python, recursion

我正在为一个递归问题而苦苦挣扎，这应该不会太难，但由于某种原因，我没有想出一个解决方案。

我有一个大小为“n”的数组，我想以一种获得每个可能组合的方式将每个元素从 0 计数到 n。

```
n = 3
[0,0,0]
[0,0,1]
[0,1,0]
[1,0,0]
[...  ]
[3,3,3] 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T17:28:19.087

如果您必须自己编写代码，并且必须使用递归：

```
def gen(n, l, prefix=()):
  if l == 0:
    print prefix
  else:
    for i in range(n):
      gen(n, l - 1, prefix + (i,))

gen(4, 3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T17:29:58.150

不需要（显式）递归：

```
import itertools
for comb in itertools.product(range(4), repeat=3):
    print comb 
```

产生：

```
(0, 0, 0)
(0, 0, 1)
(0, 0, 2)
(0, 0, 3)
(0, 1, 0)
(0, 1, 1)
...
(3, 3, 2)
(3, 3, 3) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T17:29:04.267

这是一种使程序非常明确的方法：

```
def combinations(n, elements = None):
    if elements == 0: return [[]]

    if not elements: elements = n

    result = []
    for v in range(n + 1):
        for subcombination in combinations(n, elements - 1):
            result.append([v] + subcombination)

    return result 
```

有更多的 Pythonic 方法可以做到这一点，可能有更好的性能，包括理解或生成器，但听起来你正在寻找一个显式的实现。

# python - 在子网中使用 ip 地址获取主机名

> ID：13825295
> 
> 赞同：0
> 
> 时间：2012-12-11T17:22:56.110
> 
> 标签：python, ip, hostname, subnet

我在一个针对不同建筑物具有不同“子网”（如果这就是他们的意思）的研究所。

我的建筑物的 IP 地址形式为 10.3.3.*

当我使用

```
socket.gethostbyaddr('10.3.3.x') 
```

在python中......我得到了主机名

但是在尝试使用 10.3.1.x 或 10.3.7.yi 之类的其他软件时没有得到结果？

我在这里想念什么？是否可以使用任何其他功能或任何东西来获得它？

这些地址大多属于 Windows Pcs...

请帮忙

# asp.net-mvc - 如何强制 MVC 4 包呈现具有完整域地址的链接

> ID：13825299
> 
> 赞同：0
> 
> 时间：2012-12-11T17:23:31.873
> 
> 标签：asp.net-mvc, asp.net-mvc-4, bundle

是否可以强制 ASP.NET MVC 4 包呈现具有完整域地址的链接？我的意思是这样的包：`~/bundle/jquery`渲染到`http://domain.com/bundle/jquery`而不是这个：`/bundle/jquery`。

**更新：**

我想我应该多解释一下。*`render`*我的意思是呈现的 url，而不是页面。例如，我有一个带有此键的捆绑包：`~/bundle/jquery`. 好的。它将呈现为

```
<script src="/bundle/jquery" type="text/javascript"></script> 
```

正确的？好吧，我想要这个：

```
<script src="http://sub.domain.com/bundle/jquery" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-11T17:29:31.613

你真的说它“渲染”吗？是的，然后 ASP.NET MVC 4 会按照您的要求呈现它们。您可以通过转到由 ASP.NET MVC 4.0 中的视图呈现的页面的源代码来注意到这一点。

你不必强迫它，它会自动为你做......！

**已编辑：** 您可以通过删除`Bundle.cs`中的文件`App_Start folder`并从中删除该 `BundleConfig.RegisterBundles(BundleTable.Bundles);`行来做到这一点`Global Application Class`。但是您必须手动添加所需文件的路径。这很麻烦。此外，这会降低应用程序的性能，因为您将在 View Page 上添加纯 HTML。

# mysql - 面向对象的数据库设计

> ID：13825305
> 
> 赞同：-2
> 
> 时间：2012-12-11T17:24:07.833
> 
> 标签：mysql, database-design

我是数据库设计领域的新手，所以我有一些非常基本的问题。我想创建一个数据库，每个人都可以参加零次或多次测试。每个测试都有一个描述、一个分数和一个与之相关的日期。来自面向对象的背景，这听起来微不足道，但是我在使用 mySQL（或任何其他数据库语言/平台）找到类似场景的任何提及时遇到了一些麻烦。

这里的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:31:22.953

创建三个表：用户、测试、提交。

“用户”表将保存有关每个人的信息。

“测试”表将保存有关每个测试的信息。

'submissions' 表会将其他两个表联系在一起。当用户参加测试时，您需要将用户 ID、测试 ID 和时间戳添加到“提交”表中。通过这样做，您可以查询哪些用户在什么时间参加了哪些测试。

这有意义吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T17:41:38.723

MySQL 是一个[关系数据库](http://en.wikipedia.org/wiki/Relational_database)。这意味着对象被表示为表格。这些表通过键值关联。

[Jerad 的回答](https://stackoverflow.com/a/13825410/300257)给出了 Person 和 Test 对象的关系表示的细节。关键值是用户 ID 和测试 ID。在关系数据库中，对象的实例（表中的行）由键值标识。

Jerad 的 Submission 表定义了 User 表和 Test 表之间的关系。一个用户可以参加多个测试，一个测试可以由多个用户参加。

# activemq - 为什么 ActiveMQ 会自动重启，我该如何防止呢？

> ID：13825306
> 
> 赞同：1
> 
> 时间：2012-12-11T17:24:08.917
> 
> 标签：activemq, restart, broker

几个月来，我们一直在生产环境中使用 AMQ 5.5.1。有时，我们观察到代理决定在没有外部触发的情况下刷新自己。发生这种情况时，我们的队列发送者会失败，直到代理在大约 10 分钟后重新联机。我找不到任何会导致这种行为的信息或设置......让我来控制它。

经纪人这样自行回收正常吗？如果是这样，是什么原因造成的？

```
2012-12-11 11:02:11,603 | INFO  | Refreshing   org.apache.activemq.xbean.XBeanBrokerFactory$1@f6ac0b: startup date [Tue Dec 11 11:02:11 EST 2012]; root of context hierarchy | org.apache.activemq.xbean.XBeanBrokerFactory$1 | WrapperSimpleAppMain
 2012-12-11 11:02:13,806 | WARN  | destroyApplicationContextOnStop parameter is deprecated, please use shutdown hooks instead | org.apache.activemq.xbean.XBeanBrokerService | WrapperSimpleAppMain
 2012-12-11 11:02:13,821 | INFO  | PListStore:D:\Tools\ActiveMQ\apache-activemq-5.5.1\bin\win32\..\..\data\localhost\tmp_storage started | org.apache.activemq.store.kahadb.plist.PListStore | WrapperSimpleAppMain
 2012-12-11 11:02:13,868 | INFO  | Using Persistence Adapter: KahaDBPersistenceAdapter[D:\Tools\ActiveMQ\apache-activemq-5.5.1\bin\win32\..\..\data\kahadb] | org.apache.activemq.broker.BrokerService | WrapperSimpleAppMain 
 2012-12-11 11:02:16,618 | INFO  | KahaDB is version 3 | org.apache.activemq.store.kahadb.MessageDatabase | WrapperSimpleAppMain
 2012-12-11 11:02:16,697 | INFO  | Recovering from the journal ... | org.apache.activemq.store.kahadb.MessageDatabase | WrapperSimpleAppMain 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:49:57.247

我发现包装器 exe 进程正在强制重启。

我能够在 wrapper.log（Windows 服务）中看到该进程正在重新启动，因为 JVM 没有响应。因此，这不是代理自动重启本身的问题。这是代理 JVM 以某种方式挂起的问题（单独的问题）。

以下是感兴趣的人的包装器日志条目：

```
ERROR  | wrapper  | 2012/12/11 11:01:58 | JVM appears hung: Timed out waiting for signal from JVM.
ERROR  | wrapper  | 2012/12/11 11:01:58 | JVM did not exit on request, terminated
STATUS | wrapper  | 2012/12/11 11:02:04 | Launching a JVM... 
```

# c++ - 紧贴 - 防止在数据管道中退出

> ID：13825314
> 
> 赞同：1
> 
> 时间：2012-12-11T17:24:22.980
> 
> 标签：c++, cling

我正在向我的 makefile 添加一个`repl:`使用[cling](http://root.cern.ch/drupal/content/cling)的选项，这将使我进入一个 repl 以玩弄我当前的项目。我创建了一个`cling_init.cpp`包含所有标题并进行一些基本设置的文件。

然后在我的`Makefile`：

```
repl:
    cat cling_init.cpp | cling -std=c++11 // etc ... 
```

问题是当我输入内容时，在评估它后，紧贴退出。我一直在寻找将文件传递给 cling 的选项，但我似乎找不到任何东西。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:54:11.807

知道了！您可以像传递库一样传递源文件`-l`。

```
repl:
    cling -std=c++11 -lcling_init.cpp -llibpq.so -lliblog4cxx.so //etc ... 
```

仅供参考，您还需要输入整个库名称才能使其正常工作。

为了进行额外的设置，我不得不使用一个静态块：

```
#include <iostream>

struct ClingInitialize {
  ClingInitialize () {
    std::cout << "initialize" << std::endl;
  }
};

static ClingInitialize staticBlock; 
```

# vb.net - Listview列标题名称，可堆叠？

> ID：13825318
> 
> 赞同：3
> 
> 时间：2012-12-11T17:24:45.737
> 
> 标签：vb.net, listview

我只是好奇列名是否可以堆叠在一起，换句话说：

原来的

```
|test|testing test1|testing test32|test3| 
```

新的

```
|test|testing|testing|test
       test1  test32 
```

我知道可以在网格视图中进行操作，但我喜欢在有机会时远离它们。我目前有大约 10 列，如果不需要的话，我希望不必实现水平滚动条。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T15:20:24.683

使用默认的 ListView 是不可能的，

我发现了另一篇文章，其中 Grammarian 分享了一个指向自定义列表视图控件的链接，您可以将其用于您的目的。当我通过屏幕截图查看它可能符合您的要求时，请检查一下：

[http://www.codeproject.com/Articles/16009/A-Much-Easier-to-Use-ListView](http://www.codeproject.com/Articles/16009/A-Much-Easier-to-Use-ListView)

我得到它的帖子是：

[https://stackoverflow.com/questions/2461601/setting-height-of-listview-row](https://stackoverflow.com/questions/2461601/setting-height-of-listview-row)

祝你好运 ！

# gwt - GWT 客户端：发送带有 multipart/form-data 发布请求的文件

> ID：13825320
> 
> 赞同：4
> 
> 时间：2012-12-11T17:24:51.153
> 
> 标签：gwt, cordova, post, http-post, multipartform-data

我已经尝试了很多方法来在客户端使用 GWT 将 xml 文件作为字符串 + 图片和 POST 请求发送。我可以成功发送字符串，但我不知道如何使用 RequestBuilder 发送文件（图片），我只能发送字符串。

有人知道如何使用 GWT 客户端（RequestBuilder）发送带有 multipart/form-data POST 请求的文件吗？

PS：因为我不想上传文件，所以我不需要上传器或类似的东西。我正在使用 Phonegap 开发一个移动应用程序，并制作图片，这些图片应该通过 POST 请求发送到服务器（第三方服务）。

提前致谢！

这里有一些代码：

```
public void sendPost() throws RequestException {
        String boundary = createBoundary();
        String xml = "<note> <to>Müller</to> <from>Jani</from> <heading>Erinnerung</heading> <body>Ich wohne in der Leipzigerstraße</body> </note>";
        String requestData = getRequestData(boundary, xml);

    RequestBuilder builder = new RequestBuilder(RequestBuilder.POST, "http://localhost:8080/xxx/yyy");
    builder.setHeader("Content-Type", "multipart/form-data; charset=UTF-8; boundary=" + boundary);
    builder.setHeader("Content-Length", Long.toString(requestData.length()));
    try {
      builder.sendRequest(requestData, new RequestCallback() {
        public void onResponseReceived(Request request, Response response) {

        }
        public void onError(Request request, Throwable exception) {
          exception.printStackTrace();
        }
      });
    } catch (RequestException e) {
      e.printStackTrace();
    }

}

private String getRequestData(String boundary, String xml) {
    String s = "";

    s += "--" + boundary + "\r\n";
    s += getRequestParameter("xml", xml + "");
    s += "--" + boundary + "--\r\n"; // end
    return s;
}

private String getRequestParameter(String key, String value) {
    return "Content-Disposition: form-data; name=\"" + key + "\"\r\n\r\n"
            + value + "\r\n";
}
private String createBoundary() {
    return "----GoneVerticalBoundary" + getRandomStr() + getRandomStr();
}

private String getRandomStr() {
    return Long.toString(random.nextLong(), 36); //random -> DEFINED IN THE CLASS BODY
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:36:06.517

如果您正在寻找纯 gwt 解决方案，那么您需要使用[FileUpload](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/user/client/ui/FileUpload.html)

如果您不介意使用第三方开源 jar，那么您可以尝试[gwtupload](http://code.google.com/p/gwtupload/)

对于语言环境问题，只需确保您使用的是 UTF-8 和 GWT 语言环境 cookie 和语言环境设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T23:42:31.080

如果您使用的是 gwt + phonegap，您应该使用 gwt-phonegap，对吗？

我在我的应用程序中所做的是将 gwtupload 用于桌面版本，并在移动设备中使用 phonegap 文件传输。对于这两种情况，我都在服务器端使用 gwtupload servlet。

这是我使用 gwt-phonegap 的代码：

```
 FileUploadOptions options = new FileUploadOptions();
  options.setFileKey("file");
  options.setFileName("my_file.txt");
  options.setMimeType("text/plain");

  phonegap.getFile().createFileTransfer().upload(
   "file:///my_path/my_file.txt", 
   "http://my-gwtupload-servlet/servlet.gupld", 
   options, 
   new FileUploadCallback() {
    @Override
    public void onSuccess(FileUploadResult result) {
      if (result.getResponseCode() == 200) {
      } else {
      }
    }
    @Override
    public void onFailure(FileTransferError error) {
      Window.alert("Error sending the file, error-code: " + error.getCode());
    }
  }); 
```

我使用延迟绑定来选择适当的实现`phonegap.env`：

```
<replace-with class="...UploadFilePhoneGap">
  <when-type-is class="....UploadFile" />
  <when-property-is name="phonegap.env" value="yes" />
</replace-with> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T20:55:28.173

对于所有想要在客户端管理文件和图片的人，在将它们发送到服务器之前，正如 Manolo 建议的那样，我建议使用[lib-gwt-file](http://www.vectomatic.org/libs/lib-gwt-file)。

对于使用 PhoneGap 的人，我建议使用 Base64 对图片进行编码，并在服务器端进行解码（参见[Base64Util](http://code.google.com/p/gwt-examples/wiki/gwt_hmtl5)类）

# .net - 使用 ConfigurationManager.OpenMappedExeConfiguration 时如何从定义为 NameValueSectionHandler 的 ConfigSection 中获取值

> ID：13825323
> 
> 赞同：6
> 
> 时间：2012-12-11T17:25:09.597
> 
> 标签：.net, configuration, configurationmanager

当您使用应用程序的当前配置文件时，从使用由 System.Configuration.NameValueSectionHandler 定义的部分的配置文件中获取值很容易。

示例配置文件。

```
<configuration>
  <configSections>
    <section name="MyParams" type="System.Configuration.NameValueSectionHandler" />
  </configSections>

  <MyParams>
    <add key="FirstParam" value="One"/>
    <add key="SecondParam" value="Two"/>
  </MyParams>
</configuration> 
```

易于阅读的示例代码。

```
NameValueCollection myParamsCollection =
   ConfigurationManager.GetSection("MyParams") as NameValueCollection; 
```

这是不起作用的代码。

```
NameValueCollection collection =
  ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None)
  .GetSection("MyParams") as NameValueCollection; 
```

这在编译时失败并出现以下错误。

无法通过引用转换、装箱转换、拆箱转换、包装转换或空类型转换将类型“System.Configuration.ConfigurationSection”转换为“System.Collections.Specialized.NameValueCollection”。

ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None) 返回 System.Configuration.Configuration，Configuration.GetSection 返回 ConfigurationSection。

ConfigurationManager.GetSection 返回对象。

那么，当我必须使用 OpenExeConfiguration 时，如何取回我的 NameValueCollection？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-11T17:25:09.597

我从两年前遇到了自己的答案。

[NameValueSectionHandler - 我可以使用这个部分类型来写回应用程序配置文件吗？](https://stackoverflow.com/a/2194763/26877)

这是我解决当前问题的方法。

```
ExeConfigurationFileMap configFileMap = new ExeConfigurationFileMap() { 
   ExeConfigFilename = "path to config here" 
    };

Configuration config = ConfigurationManager.OpenMappedExeConfiguration(
   configFileMap, ConfigurationUserLevel.None);

ConfigurationSection myParamsSection = config.GetSection("MyParams");

string myParamsSectionRawXml = myParamsSection .SectionInformation.GetRawXml();
XmlDocument sectionXmlDoc = new XmlDocument();
sectionXmlDoc.Load(new StringReader(myParamsSectionRawXml ));
NameValueSectionHandler handler = new NameValueSectionHandler();

NameValueCollection handlerCreatedCollection = 
   handler.Create(null, null, sectionXmlDoc.DocumentElement) as NameValueCollection;

Console.WriteLine(handlerCreatedCollection.Count); 
```

适用于任何传统 IConfigurationSectionHandler 类型 NameValueSectionHandler、DictionarySectionHandler、SingleTagSectionHandler 的方法。

```
public static object GetConfigurationValues(string configFileName, string sectionName)
{
    ExeConfigurationFileMap configFileMap = new ExeConfigurationFileMap() { ExeConfigFilename = configFileName };
    Configuration config = ConfigurationManager.OpenMappedExeConfiguration(configFileMap, ConfigurationUserLevel.None);
    ConfigurationSection section = config.GetSection(sectionName);
    string xml = section.SectionInformation.GetRawXml();
    XmlDocument doc = new XmlDocument();
    doc.Load(XmlReader.Create(new StringReader(xml)));
    string type = section.SectionInformation.Type;
    string assemblyName = typeof(IConfigurationSectionHandler).Assembly.GetName().FullName;
    ObjectHandle configSectionHandlerHandle = Activator.CreateInstance(assemblyName, section.SectionInformation.Type);
    if (configSectionHandlerHandle != null)
    {
        IConfigurationSectionHandler handler = configSectionHandlerHandle.Unwrap() as IConfigurationSectionHandler;
        return handler.Create(null, null, doc.DocumentElement);
    }
    return null;
} 
```

# jquery - 自动滚动 div

> ID：13825327
> 
> 赞同：0
> 
> 时间：2012-12-11T17:25:31.117
> 
> 标签：jquery, html, css

我有一个`div`包含聊天框的内容。每当有新消息到达时，它都会附加到框中 - 我想自动将框滚动到底部（以显示新消息）。我怎样才能做到这一点？

```
<div  id="chatting" style="overflow: auto; background-color: #fff; border: solid 2px #dedede; width: 600px;  height: 500px; padding: 10px;">
  hello<br/>
  hello<br/>
  hello<br/>
  hello<br/>
  hello<br/>
  hello<br/>
  hello<br/>
  hello<br/>
  hello<br/>
  hello<br/>
  hello<br/>
  hello<br/>
  hello<br/>
  hello<br/>
  hello<br/>
  hello<br/>
  hello<br/>
  hello<br/>
  hello<br/>
  hello<br/>
  hello<br/>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T17:34:33.917

您可以通过设置`scrollTop`聊天窗口的属性来完成此操作`div`。要滚动到 div 的底部，请设置`scrollTop`为`scrollHeight`：

```
var chatWindow = document.getElementById('chating');
chatWindow.scrollTop = chatWindow.scrollHeight;​ 
```

[http://jsfiddle.net/Ln8Hd/](http://jsfiddle.net/Ln8Hd/)

或者，使用 jQuery：

```
var chatWindow = $("#chating");
chatWindow.scrollTop(chatWindow[0].scrollHeight); 
```

每次将聊天消息添加到 div 时，您都需要调用它。

# php - 结合facebook和个人登录的评论框

> ID：13825328
> 
> 赞同：1
> 
> 时间：2012-12-11T17:25:38.777
> 
> 标签：php, facebook, facebook-comments, comments

我想将评论框集成到我的网站。我已经搜索了几个小时，现在我真的很困惑。

是否可以使用我的网站已经存在的 facebook 评论框插件和登录系统？

有这两个优点就好了。一方面，Facebook 用户墙上的直接帖子。另一方面，对于没有 Facebook 帐户或不想以真实姓名发帖的用户来说，这是一种替代方案。

如果有结合这些东西的第三方替代品也很好

最好的问候，谢谢你的回答马丁

# android - 如何检测小应用程序是否处于活动状态？

> ID：13825336
> 
> 赞同：0
> 
> 时间：2012-12-11T17:26:22.530
> 
> 标签：android, tablet, sony

如何检测小应用程序是否处于活动状态？

小程序包名 com.sony.nfx.app.plusone.calculator 就是。

在getRunningTasks中，相信你可以得到你已经启动的应用列表。

但是，小程序不受此限制。

在getRunningTasks中，一直无法获取到你已经启动的小程序的包名。

我想检测迷你应用程序。如果有什么好的方法，请告诉我。

**

> 我不是简单地获取进程列表。我想检测用户已经开始操作的事实。

**

谢谢你。

**索尼平板电脑 S 安卓 4.0.3**

**安卓java代码**

```
public void run_task_log(){

       ArrayList<String> appList = new ArrayList<String>();
        ActivityManager activityManager = (ActivityManager)getSystemService(ACTIVITY_SERVICE);

        List<RunningAppProcessInfo> processList = activityManager.getRunningAppProcesses();
        for(RunningAppProcessInfo process : processList) {
            //Log.i(TAG,"pid:"+process.pid);
            //Log.i(TAG,"processName:"+process.processName);
            appList.add(   (String) "" + process.pid + ":" +process.processName);
        }

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, appList);
        setListAdapter(adapter);

        List<RunningTaskInfo> taskList = activityManager.getRunningTasks(10);
        for(RunningTaskInfo task : taskList) {
            Log.d("ActivityManager","task.topActivity.getPackageName():"+task.topActivity.getPackageName());
        }
        List<RunningServiceInfo> serviceList = activityManager.getRunningServices(30);
        for(RunningServiceInfo serv : serviceList) {
            Log.d("ActivityManager","PID:"+serv.pid+":serv.getPackageName():"+serv.service.getPackageName());
            Log.d("ActivityManager","PID:"+serv.pid+":serv.clientPackage():"+serv.clientPackage);
        }

        PackageManager packageManager = getPackageManager();
        ActivityManager activityManager1 = ((ActivityManager) getSystemService(ACTIVITY_SERVICE));
        List<RunningTaskInfo> runningTask = activityManager1.getRunningTasks(100);
        ArrayList<CharSequence> activityNameList = new ArrayList<CharSequence>();
        if (runningTask != null) {
            for (RunningTaskInfo task : runningTask) {
                try {
                    Log.d("ActivityManager","packageManager.getApplicationLabel():"+packageManager.getApplicationLabel(packageManager.getApplicationInfo(task.topActivity.getPackageName(), 0)));
                } catch (NameNotFoundException e) {
                    Log.e("ERROR", e.toString());
                }
            }
        }

        ActivityManager activityManager2 = (ActivityManager) getSystemService(Service.ACTIVITY_SERVICE);
        String className = activityManager.getRunningTasks(3).get(0).topActivity.getClassName();
        Log.d("ActivityManager","className:"+className);

} 
```

**Logcat 日志**

```
 12-11 16:53:36.360: D/T2MDMService(3775): ////// ID Service Timer Start ///
12-11 16:53:36.370: D/ActivityManager(3775): task.topActivity.getPackageName():com.sony.nfx.app.launcher2
12-11 16:53:36.370: D/ActivityManager(3775): task.topActivity.getPackageName():com.anetm.www.apprunlist
12-11 16:53:36.380: D/ActivityManager(3775): PID:434:serv.getPackageName():com.android.smspush
12-11 16:53:36.380: D/ActivityManager(3775): PID:434:serv.clientPackage():null
12-11 16:53:36.380: D/ActivityManager(3775): PID:2996:serv.getPackageName():com.sony.nfx.app.plusone.calculator
12-11 16:53:36.380: D/ActivityManager(3775): PID:2996:serv.clientPackage():null
12-11 16:53:36.380: D/ActivityManager(3775): PID:3174:serv.getPackageName():com.android.providers.media
12-11 16:53:36.380: D/ActivityManager(3775): PID:3174:serv.clientPackage():null
12-11 16:53:36.380: D/ActivityManager(3775): PID:3534:serv.getPackageName():com.sony.nfx.hwmonitorservice
12-11 16:53:36.390: D/ActivityManager(3775): PID:3534:serv.clientPackage():null
12-11 16:53:36.390: D/ActivityManager(3775): PID:313:serv.getPackageName():com.google.android.location
12-11 16:53:36.390: D/ActivityManager(3775): PID:313:serv.clientPackage():null
12-11 16:53:36.390: D/ActivityManager(3775): PID:0:serv.getPackageName():com.google.android.talk
12-11 16:53:36.390: D/ActivityManager(3775): PID:0:serv.clientPackage():null
12-11 16:53:36.390: D/ActivityManager(3775): PID:3522:serv.getPackageName():com.sony.nfx.app.wappushdbinit
12-11 16:53:36.390: D/ActivityManager(3775): PID:3522:serv.clientPackage():null
12-11 16:53:36.390: D/ActivityManager(3775): PID:249:serv.getPackageName():com.android.systemui
12-11 16:53:36.390: D/ActivityManager(3775): PID:249:serv.clientPackage():null
12-11 16:53:36.390: D/ActivityManager(3775): PID:3508:serv.getPackageName():com.sony.automagic.blservice
12-11 16:53:36.390: D/ActivityManager(3775): PID:3508:serv.clientPackage():null
12-11 16:53:36.390: D/ActivityManager(3775): PID:313:serv.getPackageName():com.google.android.location
12-11 16:53:36.390: D/ActivityManager(3775): PID:313:serv.clientPackage():null
12-11 16:53:36.390: D/ActivityManager(3775): PID:2984:serv.getPackageName():com.sony.smallapp.plusoneservice
12-11 16:53:36.390: D/ActivityManager(3775): PID:2984:serv.clientPackage():null
12-11 16:53:36.390: D/ActivityManager(3775): PID:328:serv.getPackageName():com.sony.nfx.inputmethod
12-11 16:53:36.400: D/ActivityManager(3775): PID:328:serv.clientPackage():android
12-11 16:53:36.400: D/ActivityManager(3775): PID:375:serv.getPackageName():com.android.stk
12-11 16:53:36.400: D/ActivityManager(3775): PID:375:serv.clientPackage():null
12-11 16:53:36.400: D/ActivityManager(3775): PID:167:serv.getPackageName():com.google.android.backup
12-11 16:53:36.400: D/ActivityManager(3775): PID:167:serv.clientPackage():null
12-11 16:53:36.400: D/ActivityManager(3775): PID:375:serv.getPackageName():com.android.phone
12-11 16:53:36.400: D/ActivityManager(3775): PID:375:serv.clientPackage():null
12-11 16:53:36.400: D/ActivityManager(3775): PID:375:serv.getPackageName():com.mbm.mbmservice
12-11 16:53:36.400: D/ActivityManager(3775): PID:375:serv.clientPackage():null
12-11 16:53:36.400: D/ActivityManager(3775): PID:249:serv.getPackageName():com.android.systemui
12-11 16:53:36.400: D/ActivityManager(3775): PID:249:serv.clientPackage():android
12-11 16:53:36.400: D/ActivityManager(3775): PID:3495:serv.getPackageName():com.sony.automagic.ui
12-11 16:53:36.400: D/ActivityManager(3775): PID:3495:serv.clientPackage():null
12-11 16:53:36.400: D/ActivityManager(3775): PID:313:serv.getPackageName():com.google.android.gsf
12-11 16:53:36.400: D/ActivityManager(3775): PID:313:serv.clientPackage():null
12-11 16:53:36.400: D/ActivityManager(3775): packageManager.getApplicationLabel():ホーム
12-11 16:53:36.400: D/ActivityManager(3775): packageManager.getApplicationLabel():AppRunList
12-11 16:53:36.410: D/ActivityManager(3775): className:com.android.launcher2.Launcher
12-11 16:53:36.410: D/T2MDMService(3775): ////// ID Service Timer End /// 
```

# sql - 为什么左连接没有给出明显的结果？

> ID：13825338
> 
> 赞同：0
> 
> 时间：2012-12-11T17:26:31.787
> 
> 标签：sql, sql-server, sql-server-2008

我有以下 sql 查询，我的左连接没有给我明显的结果，请帮助我追踪。

```
 SELECT  DISTINCT
                    Position.Date,
                    Position.SecurityId,
                    Position.PurchaseLotId,
                    Position.InPosition,
                    ISNULL(ClosingPrice.Bid, Position.Mark) AS  Mark
        FROM
                Fireball_Reporting.dbo.Reporting_DailyNAV_Pricing POSITION WITH (NOLOCK, READUNCOMMITTED)
                LEFT JOIN Fireball.dbo.AdditionalSecurityPrice ClosingPrice WITH (NOLOCK, READUNCOMMITTED) ON
                            ClosingPrice.SecurityID = Position.PricingSecurityID AND
                            ClosingPrice.Date = Position.Date AND
                            ClosingPrice.SecurityPriceSourceID = @SourceID AND
                            ClosingPrice.PortfolioID IN (5,6)  

 WHERE
        DatePurchased > @NewPositionDate AND
        Position.Date = @CurrentPositionDate AND
        InPosition = 1 AND

        Position.PortfolioId IN ( 
                                SELECT 
                                    PARAM 
                                FROM 
                                    Fireball_Reporting.dbo.ParseMultiValuedParameter(@PortfolioId, ',') 
                                ) AND
        (
        Position > 1 OR
        Position < - 1
        ) 
```

现在在上面我使用 LEFT JOIN`ISNULL(ClosingPrice.Bid, Position.Mark) AS Mark`和 LEFT JOIN 时，它给了我更多没有具有多个投资组合 ID 的记录，例如。(5,6)

如果我把portfolioID =5 给出结果为`120 records`

如果我把portfolioID =6 给出结果为`20 records`

当我输入投资组合 ID = (5,6) 时，它应该给我`140 records` ，但它给出的结果`350 records`是错误的。:(

发生这种情况是因为当我使用 LEFT JOIN 时，没有 PurchaseLotID 的条件，因为表 `Fireball.dbo.AdditionalSecurityPrice ClosingPrice`没有列`PurchaseLotID`，所以它给了我其他记录也有相同的 purchaseLotID 和不同的价格。

但我不想要那些记录

> 我怎样才能消除这些记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T17:31:26.640

您每获得一个参赛作品`DailyLoanAndCashPosition.PurchaseLotId = NAVImpact.PurchaseLotId`

这意味着您必须有更多具有相同 PurchaseLotId 的条目

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T17:41:37.530

最可能的原因是左连接产生重复的 PurchaseLotIds。了解是否在内部连接的左侧执行 select distinct(PurchaseLotId) 的最佳方法。

# matlab - 用日期标记一个数字（一天只有一次），matlab

> ID：13825339
> 
> 赞同：1
> 
> 时间：2012-12-11T17:26:37.997
> 
> 标签：matlab

我正在尝试在 matlab 中绘制值。

我的 csv 文件看起来像这样，

```
> 15.12.2012 11:27; 0.9884753
> 15.12.2012 11:12; 10.670.642
> 15.12.2012 10:57; 114.455.145
> 15.12.2012 10:42; 101.301.446
> 14.12.2012 10:27; 0.99031037
> 14.12.2012 10:12; 104.594.388
> 14.12.2012 09:57; 0.97192177
> 14.12.2012 09:42; 0.8925
> 14.12.2012 09:27; 0.8985693
> 14.12.2012 09:12; 0.955
> 14.12.2012 08:57; 0.95103529
> 13.12.2012 08:42; 0.95203444
> 13.12.2012 08:27; 0.955
> 13.12.2012 08:12; 0.95970876
> 13.12.2012 07:57; 0.95929422
> 13.12.2012 07:42; 0.95578656
> 13.12.2012 07:27; 0.955
> 12.12.2012 07:12; 0.955
> 12.12.2012 06:57; 0.95342687
> 12.12.2012 06:42; 0.955
> 12.12.2012 06:27; 0.955
> 12.12.2012 06:12; 0.95930485
> 11.12.2012 05:57; 0.95530825
> 11.12.2012 05:42; 0.96452381
> 10.12.2012 05:27; 0.9675
> 10.12.2012 05:12; 0.98778061
> 10.12.2012 04:57; 102.982.993 
```

我正在阅读“2012 年 11 月 12 日 04:57”；作为字符串，然后使用 datvec。

> [Y, M, D, H, MN, S] = datevec('String')

只是为了再清楚一点

```
Col1=String  % [Y, M, D, H, MN, S]
Col2= number % [0.9884753;...;102.982.993] 
```

现在我想相对于第一个 Col1 ([Y, M, d].

```
plot (Col2) 
```

有用 。在我的示例数据中，我在同一天有多个***值***。如何用***每天只出现一次***的日期标记我的情节。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:35:38.470

设置一组自定义刻度，如下所示：

```
startTicks=find([false diff(D)~=0]); % This is a bit of a hack, but will show you anytime the day has changed. Might be confused if you jump a month at a time.
plot(Col2)
set(gca,'XTick',startTicks)
set(gca,'XTickLabel',Col1(startTicks)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T18:51:46.530

您可以执行下列操作。由于日期字符串不是那么短，因此将它们旋转（使用[rotateticklabel](http://www.mathworks.com/matlabcentral/fileexchange/8722-rotate-tick-label)）看起来会更好。

```
str = {
  '15.12.2012 11:27';
  '15.12.2012 11:12';
  ...
  '10.12.2012 04:57'
};

num = [
  0.9884753;
  10.670642;
  ...
  102.982993
];

% find first occurrence of dates
[y,m,d,h,mn] = datevec(str,'dd.mm.yyyy HH:MM');
dn = datenum(y,m,d);
[~,ind] = unique(dn,'first');
ind = sort(ind);

% plot it nicely
plot(num);
ax = gca;
dstr = cellstr(datestr(dn,'dd.mm.yyyy'));
set(ax, 'XTick',ind, 'XTickLabel',dstr(ind), 'Position',[0.1,0.15,0.8,0.75]);
rotateticklabel(ax, 30); 
```

这就是你能得到的： ![在此处输入图像描述](../Images/a18aae12da2acfaaa2cdaab2953cc60e.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T18:15:06.017

[http://www.mathworks.de/de/help/matlab/ref/timeseries.plot.html](http://www.mathworks.de/de/help/matlab/ref/timeseries.plot.html)

您正在寻找时间序列图，请查看第一个示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T18:32:56.143

您想使用`datenum`代替`datevec`来获取一组日期值，绘制它们然后使用`datetick`. 例如取上面的最后三点：

```
date_str = {'10.12.2012 05:27' '10.12.2012 05:12' '10.12.2012 04:57'};
y = [0.9675 0.98778061 102.982];

x = datenum(date_str, 'dd.mm.yyyy HH:MM');

plot(x,y);
datetick x 
```

注意：第二列中有两个点的数字（例如“10.670.642”和“114.455.145”）。不确定它们是什么（可能有数千个分隔符？）但您需要处理这些。上面的代码不适用于这些。

# jsf - 使用专门的 ExceptionHandlerWrapper 类检测呈现响应阶段抛出的异常时出现问题

> ID：13825353
> 
> 赞同：3
> 
> 时间：2012-12-11T17:27:17.623
> 
> 标签：jsf, primefaces, mojarra

我正在尝试通过抽象类`ExceptionHandlerWrapper`和`ExceptionHandlerFactory`. 但是，当在 JSF 生命周期的渲染响应阶段抛出异常时，它不会被堆叠（从不调用***Phase.queueException***），因此不会在专门化的类的***handle***`ExceptionHandlerWrapper`方法中捕获。

以下代码片段总结了出现上述问题的情况。

JSF：

```
<h:form id="formManterLider">
    <h:selectOneMenu>
        ...
        <p:ajax update=":formManterLider" listener="#{MB.atualizarListaLideresInstituicao}" />
        ...
    </h:selectOneMenu>

    <p:dataTable value="#{MB.lazyModel}" ... />
</h:form> 
```

爪哇：

```
@ManagedBean
@ViewScoped
public class MB {
    ...
    private LazyDataModel<LiderVO> lazyModel = new LazyDataModel<LiderVO>() {
        @Override
        public List<LiderVO> load(int first, int pageSize, String sortField, SortOrder sortOrder, Map<String, String> filters) {
            ...
            List<LiderVO> lista = consultarLideresCandidatos(getInstituicaoSelecionada(), first, pageSize); // throws a RuntimeException
            return lista;
        }
    };
} 
```

通过 AJAX 请求更改`h:selectOneMenu`组件中的选择值会触发该问题，因为该语句`update=":formManterLider"`会导致`load`在渲染响应阶段调用该方法`consultarLideresCandidatos`，而在该方法中调用的`load`方法会抛出一个`RuntimeException`.

我想知道如何使用专门的类来检测渲染响应阶段抛出的异常`ExceptionHandlerWrapper`。

注意：我使用的是 Mojarra 2.1.12 和 Primefaces 3.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:31:22.323

我遇到了完全相同的问题（渲染阶段的 LazyDataModel + 异常）。尝试 Mojarra 2.1.16 或更高版本。见[http://java.net/jira/browse/JAVASERVERFACES-2179](http://java.net/jira/browse/JAVASERVERFACES-2179)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:51:37.717

> 我想知道如何使用专门的 ExceptionHandlerWrapper 类来检测渲染响应阶段抛出的异常。

没有线索，但服务器的日志是否足够，因为这是转储堆栈跟踪的地方？

为了防止抛出异常（并且您只想更新数据表），您可以直接更新数据表：

```
<h:form id="formManterLider">
    <h:selectOneMenu>
        ...
        <p:ajax update=":formManterLider:datatable" listener="#{MB.atualizarListaLideresInstituicao}" />
        ...
    </h:selectOneMenu>

    <p:dataTable id="datatable" value="#{MB.lazyModel}" ... />
</h:form> 
```

# django - django-ckeditor：不包括ckeditor js文件

> ID：13825355
> 
> 赞同：1
> 
> 时间：2012-12-11T17:27:34.627
> 
> 标签：django, ckeditor

我正在尝试从这里使用 ckeditor 包：[https](https://github.com/shaunsephton/django-ckeditor) ://github.com/shaunsephton/django-ckeditor 。我已按照说明进行操作，但我似乎无法弄清楚包含 ckeditor.js 文件的路径是什么。

每次我进入带有 ckeditor 小部件/字段的页面时，我都会收到一个 javascript 错误，因为：

未捕获的 ReferenceError：CKEDITOR 未定义

我确实运行了 collectstatic 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:46:02.747

再看看提供静态文件的[文档](https://docs.djangoproject.com/en/dev/howto/static-files/)。

如果您正在开发和使用`runserver`，您需要将以下内容添加到您的 url conf -

```
from django.contrib.staticfiles.urls import staticfiles_urlpatterns

# ... the rest of your URLconf goes here ...

urlpatterns += staticfiles_urlpatterns() 
```

[具体参见文档](https://docs.djangoproject.com/en/dev/howto/static-files/#serving-static-files-in-development)的这一部分。

# c# - 如何在 WP7 C# 中解析以下 XML 以放入自定义 Observable？

> ID：13825359
> 
> 赞同：0
> 
> 时间：2012-12-11T17:27:50.207
> 
> 标签：c#, xml, windows-phone-7

我正在创建一个 WP7.1 应用程序，该应用程序将从 Web API 接收数据并将其转换为可用的东西。

我想解析以下 XML，以便可以将其放在以下列表中。

列表：

```
public class Image
{
    public string Name;
    public string Location;
    public string minDisk;
    public string minRam;
    public string OS_Distro;
    public string OS_Version;
    public string ID;
}

List<Image> _Images = new List<Image>(); 
```

应用程序通过 WebClient 调用获取数据，该调用返回普通的旧 XML，如下所示：

XML 文件：[http ://www.sendspace.com/file/uiy557](http://www.sendspace.com/file/uiy557)

我想循环浏览每个图像并执行以下操作：

```
_Images.Add(new Image() { Name = tName, Location = "ORD", minDisk = tminDisk, minRam = tminRam, OS_Distro = tOS_Distro, OS_Version = tOS_Version, ID = tID }); 
```

其中 tVARIABLE 是从 XML 返回的值。

我已经为此搜索了高低，但似乎每次都出错。

我尝试了以下方法：

```
 StringReader stream = new StringReader(e.Result);
            XmlReader reader = XmlReader.Create(stream);

            while (reader.Read())
.... 
```

# php - 使用 PHP 加载的数据的 jQuery 分页

> ID：13825366
> 
> 赞同：0
> 
> 时间：2012-12-11T17:28:24.393
> 
> 标签：php, jquery, mysql

我正在尝试为从 PHP/MySQL 生成的数据合并一个 jQuery 分页插件。

我的问题是关于页面加载和哪个先执行。jQuery 全部在一个中`$(document).ready(function()`，它似乎没有与从 PHP/mySQL 加载的内容进行交互。

哪个先加载，PHP/MySQL 还是 jQuery？有没有更好的 AJAX 方式来完成分页？

这是插件的小提琴

[http://jsfiddle.net/jzqu8/3/](http://jsfiddle.net/jzqu8/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:40:50.900

您可以在设置 jquery 分页之前在页面上使用 php/mysql（第 1 页）加载您的第一个数据集，或者您可以放弃数据加载的初始页面 1，然后从 init ajax 调用加载第一页。

相关：[使用 Jquery、PHP、Mysql 进行 Ajax 分页](https://stackoverflow.com/questions/2178297/ajax-pagination-with-jquery-php-mysql)

# html - 表 TD 上的 CSS 精灵

> ID：13825376
> 
> 赞同：4
> 
> 时间：2012-12-11T17:29:09.023
> 
> 标签：html, css, menu, interactive, sprite

我想用 CSS 精灵制作一个菜单，但地球上没有一个浏览器可以读取它。我的问题可以在[这里](http://jocolina.com)找到。

我的 CSS 是：

```
#menuMusica{
  width:340px;
  height:190px;
  background:url('images/menuMusic.png') 0px 0px;
}

#menuMusica a:hover{
  background: url('images/menuMusic.png') 0px -190px;
} 
```

还有我的 HTML：

```
<div id="menu">
  <table cellspacing=100px>
    <tr>
        <td id="menuMusica" onmouseover="soundGuitar();">
        <a href="javascript:;" onclick="alerter('This site is under construction! Come back soon. You can always follow me on Facebook and Twitter!');"><img  src="images/menuP.png" border=0></a>
      </td>
        <td id="menuPhoto" onmouseover="soundPhoto();">
        <a href="photo/index.html"><img src="images/menuP.png" border=0></a>
      </td>
    </tr>
  </table>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:43:09.783

更改`#menuMusica a:hover {`为`#menuMusica:hover {`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:41:56.233

问题是“mouseout”背景应用于您的`td`元素，但您的“鼠标悬停”背景应用于其中的`a`元素。由于`a`元素没有填满所有可用的垂直空间，因此您看不到翻转。

最快的解决方案是为您的元素添加`display: block;`样式。`a`

如果要保持一致，还应该将`background`CSS 属性从`#menuMusica`移至`#menuMusica a`.

# xml - 从 Zoho Creator API 获取 XML 数据

> ID：13825378
> 
> 赞同：1
> 
> 时间：2012-12-11T17:29:12.003
> 
> 标签：xml, xmlhttprequest, zoho

我正在尝试使用 Zoho Creator API 来获取一个 XML 文件，其中包含可以在新 HTML 文档中访问的记录，并且插入了 XML 文件中的特定值。请参阅 jsfiddle [http://jsfiddle.net/vm5m6/中的代码](http://jsfiddle.net/vm5m6/)

```
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
xmlhttp=new XMLHttpRequest();
}
else
{// code for IE6, IE5
 xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
     xmlhttp.open("GET","https://creator.zoho.com/api/xml/uownrealestate/view/Agent_Roster_View?    authtoken=***scope=creatorapi",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML; 
  document.write("<table border='1'>");
var x=xmlDoc.getElementsByTagName("record");
for (i=0;i<x.length;i++)
 { 
document.write("<tr><td>");
document.write(x[i].getElementsByTagName("value")[0].childNodes[0].nodeValue);
document.write("</td><td>");

}
document.write("</table>"); 
```

我也在考虑使用 Google Fusion Tables 来执行此操作。如果有人对从易于组织的外部数据库中提取非常简单的数据有任何建议，请告诉我。

我也试过这个，但在某处读到如果 xml 在另一个域上它将不起作用

```
 $(function() {
   var xml =     'https://creator.zoho.com/api/xml/uownrealestate/view/Agent_Roster_View?authtoken==creatorapi'
   $(xml).find("record").each(function() {
  var stateName = $(this).find("Agent_Name").text();

  alert("State: " + stateName );
   })}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T20:15:43.490

首先，不要在公共论坛上发布您的 authtoken。请用星号替换它。它非常敏感。

其次，视图似乎返回了正确的响应。我试图查询视图并得到 XML 响应。我想你需要一些专家关于迭代 XML 响应的建议

有一些帮助链接供您参考。

1.  [https://forums.zoho.com/topic/unleash-your-zoho-creator-html-views-using-zcml](https://forums.zoho.com/topic/unleash-your-zoho-creator-html-views-using-zcml)
2.  [https://github.com/srhyne/ZCML/](https://github.com/srhyne/ZCML/)

还有一种方法可以将视图数据存储在 JSON 对象中。下面的示例网址

```
<script src="https://creatorexport.zoho.com/userName/appName/json/Agent_Roster_View/privateKey/variable=myData"></script> 
```

上面的脚本会将视图数据存储在 JSON 对象中。要生成 Views 的私钥，您可以参考我在[https://kbase.creator.zoho.com/views/how-to-generate-feed-url-for-views#json的帖子](https://kbase.creator.zoho.com/views/how-to-generate-feed-url-for-views#json)

# ios - iOS 游戏中心 GKErrorCanceled

> ID：13825386
> 
> 赞同：1
> 
> 时间：2012-12-11T17:29:44.453
> 
> 标签：ios, ios6, game-center

我在沙盒模式下在我的应用程序中实现游戏中心。当我登录 gameCenter 时出现问题，在某些设备上运行良好，在另一些设备上我得到一个 GKErrorCanceled，甚至没有显示界面。

此设备没有任何用户登录 gameCenter，因此与登录非沙盒帐户无关。我的代码是：

```
 GKLocalPlayer *localPlayer = [GKLocalPlayer localPlayer];

    //First we try the new iOS6 authentification method for gamekit, if it's not implemented we will use the deprecated one
    if ([localPlayer respondsToSelector:@selector(setAuthenticateHandler:)]) {
        if (localPlayer.isAuthenticated) {
            this->setState(connectionLoged);
            this->getDelegate().socialConnectionDidSucceedLogin(*this);
            return;
        }
        else if(!localPlayer.isAuthenticated && localPlayer.authenticateHandler){
            this->setState(connectionClosed);
            this->getDelegate().socialConnectionDidFailToLogin(*this, std::string("The user already resign to login"));
            return;
        }

        else{
            localPlayer.authenticateHandler = ^(UIViewController* viewController, NSError* error){
                if (localPlayer.isAuthenticated)
                {
                    _name = [localPlayer.displayName UTF8String];
                    _userId = [localPlayer.playerID UTF8String];

                    [GKPlayer loadPlayersForIdentifiers:localPlayer.friends withCompletionHandler:^(NSArray *players, NSError *error) {
                        for (GKPlayer* player in players) {
                            if ([player isFriend]) {
                                NSDictionary* dict =
                                @{@"displayName" : player.displayName,
                                @"alias" : player.alias,
                                @"playerID" : player.playerID};

                                AttrDictionary* playerInfo = [dict hydraAttrDictionary];
                                SocialFriend* socialfriend = this->getNewFriendInstance(*playerInfo);

                                this->addFriend(socialfriend);

                                delete playerInfo;
                            }
                        }

                        this->getDelegate().socialConnectionDidSucceedLogin(*this);
                        this->setState(connectionLoged);

                    }];
                }
                else if(viewController){
                   UIViewController* rootViewController = (UIViewController*) [UIApplication sharedApplication].keyWindow.rootViewController ;
                    [rootViewController presentModalViewController:viewController animated:YES];
                }
                else{
                    if(error){
                        this->getDelegate().socialConnectionDidFailToLogin(*this, std::string([error.description UTF8String]));
                    }
                    else{
                        this->getDelegate().socialConnectionDidFailToLogin(*this, std::string("User cancelled login"));
                    }
                }

            };
        }
    }
//deprecated at IOs 6 authentification method
else
    [localPlayer authenticateWithCompletionHandler:^(NSError *error) {
        if (localPlayer.isAuthenticated)
        {
            _name = [localPlayer.displayName UTF8String];
            _userId = [localPlayer.playerID UTF8String];

            [GKPlayer loadPlayersForIdentifiers:localPlayer.friends withCompletionHandler:^(NSArray *players, NSError *error) {
                for (GKPlayer* player in players) {
                    if ([player isFriend]) {
                        NSDictionary* dict =
                        @{@"displayName" : player.displayName,
                        @"alias" : player.alias,
                        @"playerID" : player.playerID};

                        AttrDictionary* playerInfo = [dict hydraAttrDictionary];
                        SocialFriend* socialfriend = this->getNewFriendInstance(*playerInfo);

                        this->addFriend(socialfriend);

                        delete playerInfo;
                    }
                }

                this->getDelegate().socialConnectionDidSucceedLogin(*this);
                this->setState(connectionLoged);

            }];

        }
        else{
            NSString* errorString = [error localizedDescription];

            this->getDelegate().socialConnectionDidFailToLogin(*this, std::string([errorString UTF8String]));
            this->setState(connectionClosed);
        }
    }]; 
```

我需要与 iOS 6 和 iOS 5 兼容的代码，所以你会看到我有两个实现。对于 iOS 6，完成处理程序返回 UIViewController null 和我所说的错误。恐怕在生产中也会发生同样的情况。在模拟器中一切正常。

PS-你会发现一些 c++ 代码，这是因为我为 GameCenter 实现了一个 c++ 包装器，因为我的游戏是用 cocos2dx 编写的......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T23:22:52.467

当有人取消界面登录游戏中心时，它会给你GKErrorCanceled。他们连续第三次取消，它会警告他们它将禁用游戏中心。

如果他们确实选择禁用游戏中心，那么它将不再显示界面，它只会给你 GKErrorCanceled 。

禁用游戏中心后，登录的唯一方法是进入实际的游戏中心应用程序。

连续 3 次可以在任何使用游戏中心的应用程序或任何应用程序组合中，并且所有使用游戏中心的应用程序都将禁用游戏中心。每次登录游戏中心时，连续 3 次都会重新开始。

这适用于沙盒和非沙盒。

这适用于 ios 5 和 ios 6。

# vb.net - 我刚刚在 Visual Basic 中运行的 COM 对象的 CLSID 是什么

> ID：13825388
> 
> 赞同：2
> 
> 时间：2012-12-11T17:29:56.277
> 
> 标签：vb.net, com

我需要知道我刚刚运行的 COM 对象的 CLSID`CreateObject("xxx.xxx")`如何获取它？

蒂亚！拉法尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:33:55.950

我不认为您可以直接从 VB 本身获取该信息（例如，作为调用的副作用或次要结果`CreateObject`），但您可以读取[注册表项](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd542719%28v=vs.85%29.aspx)，`HKEY_LOCAL_MACHINE\SOFTWARE\Classes\xxx.xxx`然后查看它的[`CLSID`键](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms688628%28v=vs.85%29.aspx)。

# ruby-on-rails - simple_form 和即时转换

> ID：13825391
> 
> 赞同：0
> 
> 时间：2012-12-11T17:30:19.617
> 
> 标签：ruby-on-rails, ruby-on-rails-3, simple-form

我正在编写一个 Rails 应用程序，其中有一个模型可以采取某些措施（身高、体重、颈围等）

我希望它适用于公制和英制测量系统。

我的模型有一个 measure_unit 属性，可以是公制或英制。所有的度量都将存储在公制数据库中。

我使用 simple_form gem，我不知道如何实现视图，以便如果用户使用英制系统，他的数据会即时转换。

```
<% if @customer.measure_unit.eql? "metric" %>                                                            
  <%= f.input :height %></br>                                
<% else %>
  ...
<% end %> 
```

我如何填空？

**编辑——找到一个可行的解决方案**

我最终使用了诸如“height_in_cm”和“height_in_in”之类的虚拟属性，将数据库中的条目存储在 mm 中。

这是模型的代码：

```
 def height_in_cm
    height / 10
  end

  def height_in_cm=(height)
    self.height = height.to_f  * 10
  end

  def height_in_in
    height * 0.039370
  end

  def height_in_in=(height)
    self.height = height.to_f / 0.039370
  end 
```

以及视图的代码：

```
 <% if @customer.measure_unit.eql? "imperial" %>
    <%= f.input :height_in_in %></br>
  <% else %>      
    <% if @customer.measure_unit.eql? "metric" %>
      <%= f.input :height_in_cm %></br>
    <% end %>     
  <% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:30:35.233

一种解决方案是将隐藏字段传递回控制器，指示传递的值是英制的，需要转换为数据库存储的度量。

因此，您可以简单地使用默认为公制的单个输入，而不是为公制和英制测量提供不同的输入，并且您必须检测非默认（英制）：

```
<%= f.input :height %></br>                                
<%= f.hidden_field :imperial, :value => (@customer.measure_unit.eql? "imperial" ? true : false) %> 
```

现在在您保存测量属性之前的控制器操作中：

```
if params[:imperial] == true
  #convert imperial measurement to metric (replace @foo with your object)
  @foo.height = convert_to_metric(params[:height]) 
end 
```

# java - 将具有复合主键的 PK 类传递给 REST 资源

> ID：13825392
> 
> 赞同：1
> 
> 时间：2012-12-11T17:30:21.750
> 
> 标签：java, rest, key, composite

我正在开发一个 Java Web 项目，它使用 NetBeans 的自动机制从实体类（NetBeans 7.2，服务器 GlassFish 3.1.2）创建 RESTful Web 服务。当我创建具有复合主键的实体类时，会创建两个类：`EntityClass`and ，用and`EntityClassPK`注释。我尝试从资源中使用它。`@Embeddable``@EmbeddedId``GET``REMOVE REST`

应用程序部署正常，但是当我在 NetBeans 中尝试操作`"Test RESTful Web Services"`时，WADL 无法打开并附加此 server.log：

```
SEVERE: The following errors and warnings have been detected with resource and/or provider classes: SEVERE: Missing dependency for method public void service.ColocacionesbyMadFacadeREST.remove(entity.ColocacionesbyMadPK) at parameter at index 0 
SEVERE: Method, public void service.ColocacionesbyMadFacadeREST.remove(entity.ColocacionesbyMadPK), annotated with DELETE of resource, class service.ColocacionesbyMadFacadeREST, is not recognized as valid resource method. 
SEVERE: Missing dependency for method public entity.ColocacionesbyMad service.ColocacionesbyMadFacadeREST.find(entity.ColocacionesbyMadPK) at parameter at index 0 
SEVERE: Method, public entity.ColocacionesbyMad service.ColocacionesbyMadFacadeREST.find(entity.ColocacionesbyMadPK), annotated with GET of resource, class service.ColocacionesbyMadFacadeREST, is not recognized as valid resource method. 
```

任何想法？？谢谢！！

# apache - Apache 别名目录

> ID：13825393
> 
> 赞同：1
> 
> 时间：2012-12-11T17:30:22.550
> 
> 标签：apache, webserver, alias, directory

如何将别名目录用作子域，例如，当我使用子域[http://subdomain.domain.com](http://subdomain.domain.com)并单击链接时，我会转到[http://subdomain.domain.com/new-link](http://subdomain.domain.com/new-link)但是当我使用别名[http://domain.com/Alias](http://domain.com/Alias)并单击链接我转到[http://domain.com/new-link](http://domain.com/new-link)我想转到[http://domain.com/Alias/new-链接](http://domain.com/Alias/new-link)这意味着我想维护[http://domain.com/Alias/](http://domain.com/Alias/)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T23:34:52.553

将您的子域迁移到子目录（我假设永久外部重定向，谷歌喜欢那些，也有书签的人）：

```
RewriteCond %{HTTP_HOST} client.domain.com 
RewriteRule (.*) http://domain.com/client$1 [L,R=301,QSA] 
```

如果您的意思是多个子域，这也可以：

```
#do not rewrite www.
RewriteCond %{HTTP_HOST} !^www.
#rewrite al other subdomains
RewriteCond %{HTTP_HOST} (.*).domain.com 
RewriteRule (.*) http://domain.com/%1$1 [L,R=301,QSA] 
```

# actionscript-3 - 将 CSV 中的每个数字加一？

> ID：13825394
> 
> 赞同：1
> 
> 时间：2012-12-11T17:30:24.870
> 
> 标签：actionscript-3, actionscript

这对某些人来说可能很明显，但我有 CSV 数据，我将其存储为字符串，其中每个数字都偏离 -1。我想编写一个函数（在 ActionScript 3 中），在其中我将每个值都增加 +1。我怎样才能做到这一点？

我的 CSV 字符串如下所示：

```
public static const CSV_DATA:String = "14,15,16,8,9,8,9,8,9,8,9,264,265,266,267,268,269,8,9,260,261,262,263,8,9,1,2,3\n" +
"32,33,34,26,27,26,27,26,27,26,27,282,283,284,285,286,287,26,27,278,279,280,281,26,27,19,20,21\n" +
... etc 
```

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T18:10:12.450

在您的情况下，只需使用`String.split()`. 主分割字符串由 '\n'，二级分割由 ','。在结果数组中，每个带有数字的字符串都带有`parseInt`函数。之后，您可以将数字加一。

但是如果你需要读取真正的 CSV 文件，你可以为此编写类或使用[开源](https://github.com/NeoPhi/AS3CSV)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T20:50:48.030

干得好：

```
var CSV_DATA:String = "14,15,16,8,9,8,9,8,9,8,9,264,265,266,267,268,269,8,9,260,261,262,263,8,9,1,2,3,32,33,34,26,27,26,27,26,27,26,27,282,283,284,285,286,287,26,27,278,279,280,281,26,27,19,20,21";

var UPDATED_CSV_DATA:String = addOne(CSV_DATA);

function addOne(CSV:String):String
{
 var CSVArr:Array = CSV.split(",");

 for(var i=0;i<CSVArr.length;i++)
 {
     CSVArr[i] = Number(CSVArr[i]) + 1 ;

 }
 return CSVArr.toString();
} 
```

# plugins - 校对浏览器插件

> ID：13825395
> 
> 赞同：2
> 
> 时间：2012-12-11T17:30:27.223
> 
> 标签：plugins, browser, edit

作为我们网站部署流程的一部分，我们通常会让校对人员在流程的各个阶段检查网站上的内容。对于在到达站点之前进行的编辑，有很多工具可以跟踪编辑，但是一旦内容出现在站点上，我们就没有一个好的方法。我在想可能有一个插件或程序可以让我们的编辑加载网站并标记页面中的内容，就像他们将跟踪更改 word 文档一样。

这似乎是一种存在的东西，但到目前为止，我还没有找到任何适用于 Chrome 或 Firefox 的神器。过去是否有人使用过他们可能推荐的此类工具。

# visual-c++ - 如何从使用 /GL 选项编译的 obj 文件制作 COFF？

> ID：13825400
> 
> 赞同：2
> 
> 时间：2012-12-11T17:30:45.230
> 
> 标签：visual-c++, linker, visual-studio-2012, static-libraries, coff

我有一个用一些旧版本的 MSVC 构建的 3d 方静态库，我成功地将它链接到我在 MSVC10 (VisualStudio2010) 中的应用程序。现在我升级到 MSVC11，我无法链接它：

> 2>链接：致命错误C1047：对象或库文件'MyLib.lib'是用比其他对象更旧的编译器创建的；重建旧对象和库

我猜这是因为 lib 是使用 /GL 选项编译的，所以目标文件实际上并不包含 COFF，而是一些中间格式。我没有要重新编译的库源代码，我不想用它制作一个 dll 来动态链接。

有没有办法——也许是一些未记录的技巧——将这些 obj 的“重新编译”到 COFF 并最终将它们链接到 MSVC11 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:52:10.763

即使这是可能的，您也不想这样做：链接针对不同版本的 CRT 构建的目标文件通常会以泪水告终。更具体地说，如果两个这样的目标文件都使用 C++ 标准库，那么几乎可以肯定您将违反单一定义规则 (ODR)。

如果无法使用 Visual C++ 2012 重新构建模块，则应将其封装在使用 Visual C++ 2010 构建的动态库中，并避免在该 DLL 的接口中使用任何 C++ 标准库类型。

# css - 使用引导程序渲染开放的无谷歌网络字体？

> ID：13825401
> 
> 赞同：8
> 
> 时间：2012-12-11T17:30:47.213
> 
> 标签：css, twitter-bootstrap, google-webfonts

我正在尝试使用带有引导程序的 google web fonts open sans。

我正在加载字体：

我有一个在引导后加载的 site-specific.css。我试过了：

```
.body { font-family: 'Open Sans', sans-serif;} 
```

并且：

```
.bootstrap-container *,    
.bootstrap-container body, 
.bootstrap-container td, 
.bootstrap-container tr, 
.bootstrap-container div, 
.bootstrap-container p, 
.bootstrap-container form, 
.bootstrap-container input, 
.bootstrap-container select, 
.bootstrap-container textarea, 
.bootstrap-container font {
font-family: 'Open Sans', sans-serif;
} 
```

但似乎无论我使用什么类选择器，字体都不会呈现，而是继承了引导字体。我不确定如何调试它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T17:37:12.913

如果您没有更改 Bootstrap 的核心文件，我会让您自己更轻松地使用它们的“自定义”功能。放入字体名称后重新下载它，并用新的引导文件替换现有的引导文件。

**您可以在此处对其进行自定义：**

[http://getbootstrap.com/customize/](http://getbootstrap.com/customize/)

这样做至少可以确保你不会错过任何东西......并且请避免`!important`按照上面的建议使用（除非你*真的*需要）。希望有帮助吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T17:32:29.807

使用 CSS`!important`

```
.bootstrap-container *,    
.bootstrap-container body, 
.bootstrap-container td, 
.bootstrap-container tr, 
.bootstrap-container div, 
.bootstrap-container p, 
.bootstrap-container form, 
.bootstrap-container input, 
.bootstrap-container select, 
.bootstrap-container textarea, 
.bootstrap-container font {
font-family: 'Open Sans', sans-serif !important; <-------- Here
} 
```

# c# - 从 WPF 中托管的 WinForms 控件创建表单 - 未设置所有者

> ID：13825402
> 
> 赞同：5
> 
> 时间：2012-12-11T17:30:46.733
> 
> 标签：c#, wpf, winforms, winforms-interop

# 设想

我有以下场景（我已将其简化为示例应用程序）：

*   一个 WPF 应用程序，其窗口 ( **MainWindow** ) 承载 WinForms UserControl ( **UserControl1** )。
    *   该控件在后面的代码中动态添加到`WindowsFormsHost`
*   **UserControl1**有一个打开表单的按钮（**Form1**）
    *   它使用`form1.Show(this)`.

问题是：

*   **Form1**的`.Owner`属性为空。
    *   在实际应用中，一些涉及`.Owner`属性的工作已经完成，这意味着我不能忽略这个问题。当然，理想情况下，这里不会有任何依赖。
    *   在实际应用程序中，我无法控制此代码的 WinForms 端。我们的 WPF 应用程序正在托管另一个团队的 WinForms 控件。
    *   笔记：
        *   当我改用 WinForms 主机时，该`.Owner`属性设置正确。
        *   **UserControl1**在所有其他方面都很好地托管——在真实的应用程序中，其他一切都很好，只是用户控件打开的表单*没有*适当的所有者。

我可以理解为什么这里会出现问题，但我希望我的下一个问题的答案可能是“是”！

**通过在等式的 WPF 方面进行更改，我可以做些什么来使其工作？**

如果做不到这一点，在 WinForms 方面可以做些什么吗？（我可以在那里进行一些更改，这并不超出可能的范围......）

# 示例代码

这是我的示例应用程序中的代码。首先是WPF方面：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:my="clr-namespace:System.Windows.Forms.Integration;assembly=WindowsFormsIntegration"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="700">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <Button Name="btnAdd" Click="btnAdd_Click" Content="Add Winform"/>

        <WindowsFormsHost Grid.Row="1" Name="host" ScrollViewer.CanContentScroll="False"/>
    </Grid>
</Window> 
```

```
public partial class MainWindow : Window
{
    private WindowsFormsHost host;

    public MainWindow()
    {
        InitializeComponent();
    }

    private void btnAdd_Click(object sender, RoutedEventArgs e)
    {
        UserControl1 uc1 = new UserControl1();
        WindowsFormsHost.EnableWindowsFormsInterop();
        this.host.Child = uc1;

    }
} 
```

而现在 WinForms 方面...

**UserControl1**只是一个带有按钮和标签的用户控件。这是代码：

```
public partial class UserControl1 : UserControl
    {
        public UserControl1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            Form1 form1 = new Form1();
            form1.Show(this);
        }

        protected override void OnLoad(EventArgs e)
        {
            base.OnLoad(e);

            this.label1.Text = "this: " + this + Environment.NewLine + "parent: " + this.Parent + Environment.NewLine + "toplevelcontrol: " + this.TopLevelControl;
        }
    } 
```

**Form1**只是一个空表单。

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    protected override void OnLoad(EventArgs e)
    {
        base.OnLoad(e);

        MessageBox.Show(" this: " + this + " owner: " + this.Owner);
    }
} 
```

`Owner`消息框中显示的`TopLevelControl`和标签中显示的`null`在 WPF 中托管时，但在另一个 WinForms 应用程序中托管时具有值。

# 进一步的调查

我想这里的问题是它`.Owner`的类型`Form`，并且 WPF 应用程序中没有这种类型的实例。很难想象在这种情况下该属性可能具有什么有效价值。因此，我似乎需要更改访问**Form1**中的 `.Owner' 属性的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:29:32.047

```
<Window
  xmlns:my="clr-namespace:System.Windows.Forms.Integration;assembly=WindowsFormsIntegration" 
>

<my:WindowsFormsHost  Name="MapHost" ScrollViewer.CanContentScroll="False"  SizeChanged="MapHost_SizeChanged" /> 
```

MapControl 继承 System.Windows.Forms.Control

```
MapHost.Child = MapControl; 
```

# java - Java - 如何让记录器在关闭挂钩中工作？

> ID：13825403
> 
> 赞同：13
> 
> 时间：2012-12-11T17:30:48.150
> 
> 标签：java, logging, shutdown-hook

我有一个使用该类的专门记录器`java.util.logging.Logger`类。我希望能够在另一个类的关闭挂钩中使用这个记录器。但是，它似乎没有在关机时登录。根据我的阅读，可能已经为记录器本身激活了一个关闭挂钩，这导致了问题。

我怎样才能让它工作？理想情况下，我希望在日志文件中看到我实际上在进程终止时执行了关闭挂钩。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-11T17:41:57.267

再次查看源代码，解决方案似乎是定义一个系统属性`java.util.logging.manager`，它是 LogManager 的子类，它覆盖该`reset();`方法，因此 Loggers 继续在关闭时工作。

```
import java.util.logging.LogManager;
import java.util.logging.Logger;

public class Main {
    static {
        // must be called before any Logger method is used.
        System.setProperty("java.util.logging.manager", MyLogManager.class.getName());
    }

    public static class MyLogManager extends LogManager {
        static MyLogManager instance;
        public MyLogManager() { instance = this; }
        @Override public void reset() { /* don't reset yet. */ }
        private void reset0() { super.reset(); }
        public static void resetFinally() { instance.reset0(); }
    }

    public static void main(String... args) {
        Logger logger1 = Logger.getLogger("Main1");
        logger1.info("Before shutdown");
        Runtime.getRuntime().addShutdownHook(new Thread(new Runnable() {
            @Override
            public void run() {
                try {
                    Logger logger2 = Logger.getLogger("Main2");
                    logger2.info("Shutting down 2");

                } finally {
                    MyLogManager.resetFinally();
                }
            }
        }));
    }
} 
```

印刷

```
Dec 11, 2012 5:56:55 PM Main main
INFO: Before shutdown
Dec 11, 2012 5:56:55 PM Main$1 run
INFO: Shutting down 2 
```

* * *

从 LogManager 的这段代码中，您可以看到有一个关闭钩子，它可以拆除处理程序并关闭它们。记录器仅在之前未使用过的情况下才能在关闭时工作，因此不会运行此代码。

```
// This private class is used as a shutdown hook.
// It does a "reset" to close all open handlers.
private class Cleaner extends Thread {

    private Cleaner() {
        /* Set context class loader to null in order to avoid
         * keeping a strong reference to an application classloader.
         */
        this.setContextClassLoader(null);
    }

    public void run() {
        // This is to ensure the LogManager.<clinit> is completed
        // before synchronized block. Otherwise deadlocks are possible.
        LogManager mgr = manager;

        // If the global handlers haven't been initialized yet, we
        // don't want to initialize them just so we can close them!
        synchronized (LogManager.this) {
            // Note that death is imminent.
            deathImminent = true;
            initializedGlobalHandlers = true;
        }

        // Do a reset to close all active handlers.
        reset();
    }
}

/**
 * Protected constructor.  This is protected so that container applications
 * (such as J2EE containers) can subclass the object.  It is non-public as
 * it is intended that there only be one LogManager object, whose value is
 * retrieved by calling Logmanager.getLogManager.
 */
protected LogManager() {
    // Add a shutdown hook to close the global handlers.
    try {
        Runtime.getRuntime().addShutdownHook(new Cleaner());
    } catch (IllegalStateException e) {
        // If the VM is already shutting down,
        // We do not need to register shutdownHook.
    }
} 
```

根据我自己的测试

```
Runtime.getRuntime().addShutdownHook(new Thread(new Runnable() {
    @Override
    public void run() {
        try {
            Logger logger2 = Logger.getLogger("Main2");
            logger2.info("Shutting down 2");
        } catch (Throwable t) {
            t.printStackTrace();
        }
    }
})); 
```

印刷

```
Dec 11, 2012 5:40:15 PM Main$1 run
INFO: Shutting down 2 
```

但如果你添加

```
Logger logger1 = Logger.getLogger("Main1"); 
```

在这个街区之外，你什么也得不到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:35:38.027

关闭挂钩有什么好处吗？

您最好在 main 的最后一行添加 Log 输出：finally 块将在所有情况下执行，除非 VM 崩溃但随后也不会执行关闭挂钩。

```
static void main(String[] argv) {

  try {
    startApp();
  } finally {
    LOGGER.info("shudown");
  }
} 
```

# javascript - this.parse(属性); 在主干的模型源代码中

> ID：13825405
> 
> 赞同：1
> 
> 时间：2012-12-11T17:30:50.397
> 
> 标签：javascript, oop, backbone.js

在阅读骨干网的源代码时，我只是想知道一些 OO。 [http://backbonejs.org/docs/backbone.html](http://backbonejs.org/docs/backbone.html)（搜索“this.parse(attributes);”）

```
 Backbone.Model = function(attributes, options) {
var defaults;
attributes || (attributes = {});
console.log('attributes : ', attributes);
if (options && options.parse) {
  //LOOK HERE
  attributes = this.parse(attributes);
}
if (defaults = getValue(this, 'defaults')) {
  attributes = _.extend({}, defaults, attributes);
}
if (options && options.collection) this.collection = options.collection;
this.attributes = {};
this._escapedAttributes = {};
this.cid = _.uniqueId('c');
if (!this.set(attributes, {silent: true})) {
  throw new Error("Can't create an invalid model");
}
delete this._changed;
this._previousAttributes = _.clone(this.attributes);
this.initialize.apply(this, arguments); 
```

};

parse 是如何在原型中使用的？该方法稍后在 _.extend(Backbone.Model.prototype, Backbone.Events, {

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:34:23.480

即使稍后在源代码中将该方法添加到原型中，当`Backbone.Model`从构造函数实际创建 a 时，它仍然可用（与原型的其余部分一起）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T17:34:12.097

您在函数中看到的代码将在某人正在执行时执行

```
new Backbone.Model 
```

到那时，`Backbone.Model.prototype`也将被定义。所以属性查找将找到`parse`方法`this.constructor.prototype`（其中`this`将指向刚刚创建的实例`Backbone.Model`）。

# php - Paypal 购物车项目总金额与订单金额不匹配

> ID：13825408
> 
> 赞同：0
> 
> 时间：2012-12-11T17:31:12.147
> 
> 标签：php, paypal

我从 PayPal doExpressPayment 请求中收到此响应。

谁能指出请求的错误在哪里？

```
Array
(
    [errors] => Array(
    [TIMESTAMP] => 2012-12-11T16:58:29Z
    [CORRELATIONID] => 6fc8ed447aeb7
    [ACK] => Failure
    [VERSION] => 63.0
    [BUILD] => 4181146
    [L_ERRORCODE0] => 10413
    [L_SHORTMESSAGE0] => Transaction refused because of an invalid argument. See additional error messages for details.
    [L_LONGMESSAGE0] => The totals of the cart item amounts do not match order amounts.
    [L_SEVERITYCODE0] => Error
    )
)

[request] => PAYMENTREQUEST_0_ITEMAMT=43.99
             &PAYMENTREQUEST_0_SHIPPINGAMT=5.30
             &PAYMENTREQUEST_n_TAXAMT=2.46
             &PAYMENTREQUEST_0_AMT=51.75
             &PAYMENTREQUEST_0_INSURANCEAMT=0
             &PAYMENTREQUEST_0_PAYMENTACTION=Sale
             &L_PAYMENTREQUEST_0_NAME0=Six+Snowmen+at+Your+Hipline
             &L_PAYMENTREQUEST_0_QTY0=1
             &L_PAYMENTREQUEST_0_DESC0=Six+Snowmen+at+Your+Hipline
             &L_PAYMENTREQUEST_0_AMT0=43.99
             &VERSION=63.0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:34:17.507

```
&PAYMENTREQUEST_n_TAXAMT=2.46 
```

我认为这应该是：

```
&PAYMENTREQUEST_0_TAXAMT=2.46 
```

# android - 显示地图 Android api V2

> ID：13825411
> 
> 赞同：0
> 
> 时间：2012-12-11T17:31:22.800
> 
> 标签：android, google-maps

我正在尝试使用新的 api 在我的应用程序中显示地图，但我得到的只是：

“Google Play 服务的未知问题”

这是我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.monitoringsensors"
android:versionCode="1"
android:versionName="1.0" 
>

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16"/>

<uses-permission android:name="android.permission.INTERNET"/> 

<permission
      android:name="com.example.monitoringsensors.MAPS_RECEIVE"
      android:protectionLevel="signature"/>

<uses-permission android:name="com.example.monitoringsensors.permission.MAPS_RECEIVE"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

 <uses-feature android:glEsVersion="0x00020000"
               android:required="true"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" 

    >

    <activity
        android:name="com.example.monitoringsensors.Title"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name="com.example.monitoringsensors.HttpExample"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.HTTPEXAMPLE" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

     <activity
        android:name="com.example.monitoringsensors.TakeSomeData"
        android:label="@string/app_name" 
        android:theme="@android:style/Theme.Dialog">
        <intent-filter>
            <action android:name="android.intent.action.TAKESOMEDATA" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

     <meta-data android:name="com.google.android.maps.v2.API_KEY"
           android:value="AIzaSyCW3iv83siHrkWM6Q2qV4YcXk27CZWwmqc"></meta-data>

</application>

</manifest> 
```

这是 XML 文件：

```
 <?xml version="1.0" encoding="utf-8"?>
    <fragment xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.SupportMapFragment"/> 
```

这个类是这样调用的：

```
 public class HttpExample  extends android.support.v4.app.FragmentActivity {...} 
```

谢谢小伙伴们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:49:25.973

您需要验证地图可用性 在与 GoogleMap 对象交互之前，您需要确认对象可以被实例化，并且 Google Play 服务组件已正确安装在目标设备上。您可以通过调用 MapFragment.getMap() 或 MapView.getMap() 方法并检查返回的对象是否为空来验证 GoogleMap 是否可用。 [https://developers.google.com/maps/documentation/android/map#verify_map_availability](https://developers.google.com/maps/documentation/android/map#verify_map_availability)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T22:00:13.760

我个人使用此代码来检查 Google Play 服务，我在运行 2.3.3 的真实设备和各种版本的操作系统上的模拟器上进行测试，它可以防止模拟器崩溃，因为它们没有附带更新的 Google Play 服务启用 v2 的 Android 谷歌地图。 `protected boolean readyToGo() {`

 ````
String TAG_ERROR_DIALOG_FRAGMENT="errorDialog";

int status= GooglePlayServicesUtil.isGooglePlayServicesAvailable(this);
    if (status == ConnectionResult.SUCCESS) {
      return(true);
    }
    else if (GooglePlayServicesUtil.isUserRecoverableError(status)) {
      ErrorDialogFragment.newInstance(status)
                         .show(getSupportFragmentManager(),
                               TAG_ERROR_DIALOG_FRAGMENT);
    }
    else {
      Toast.makeText(this, "no maps", Toast.LENGTH_LONG).show();
      finish();
    }

    return(false);
  } 
```` 

`如果它能够显示地图，则返回 true，这意味着设备具有所需的 Google Play 服务；如果没有，则返回 false，Eclipse 中的标准模拟器等现在就是这种情况。`

# javascript - 加载或导航时控制器加载顺序不同

> ID：13825419
> 
> 赞同：0
> 
> 时间：2012-12-11T17:31:39.550
> 
> 标签：javascript, angularjs

所以我的控制器的结构可能是罪魁祸首。在这里您可以看到[父](https://github.com/tyrsius/recall/blob/e41f48d5e0afc74a2f4e8e39e89d3600dc7ed8ac/app/coffee/controllers/peopleController.coffee)控制器和[子](https://github.com/tyrsius/recall/blob/e41f48d5e0afc74a2f4e8e39e89d3600dc7ed8ac/app/coffee/controllers/childAssociationController.coffee)控制器，但重要的部分在这里：

**父控制器**

```
//Load version
$scope.person = People.people.get({ id: $routeParams.id}, function(person) {
     var associations = {
         events: person.events || [],
         people: person.people || [],
         places: person.places || []
     };
     $scope.$broadcast('setAssociations', associations);
});
//Event version
$scope.$on('getAssociations', function(e, args) {
  var associations = {
    events: $scope.person.events || [],
    people: $scope.person.people || [],
    places: $scope.person.places || []
  };
  $scope.$broadcast('setAssociations', associations);
}); 
```

**儿童控制器**

```
$scope.$on('setAssociations', function(event, args) {
    $scope.parentEvents = args.events;
});

$scope.$emit('getAssociations', {}); 
```

这个想法是我需要`events`从父`person`对象到子控制器。问题是，`setAssociations`从父母那里抚养的每种方法都只适用于一种情况。

`load`如果页面是从应用程序内导航到的（哈希、导航），则该版本有效。但是，当从外部重新加载或导航（完全加载）时，子事件永远不会引发，大概是因为它还没有注册它的侦听器。

`event`如果页面被刷新或从应用程序外部导航到（任何导致页面完全加载的任何内容），则该版本有效。导航到时，`$scope`虽然是空的，但此方法失败。

因此，当“深度链接”或刷新以及进行内部导航时，应用程序加载控制器的顺序是不同的。**如何从具有父子关系的角度控制器获得一致的负载行为？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T16:06:16.520

Looking at the problem from a different perspective, since child scopes prototypically inherit from parent scopes, this means that any properties we define on a parent scope are immediately accessible in the child scope... even if you add properties to the parent scope later, after the child scope is created. In other words, you might not have to use an event to get the information you want to the child.

If your problem is simply that the child scope needs some information from the parent scope, just assign that data to a new parent $scope property, and have your child view access it. When it becomes defined, it will appear in the child view. Instead of `var associations`, try `$scope.associations`.

这是一个[人为的小提琴](http://jsfiddle.net/mrajcok/cjh5w/)，它使用 ng-click 将一些数据添加到父范围，然后在子视图中变得可见。

这能解决你的问题吗？

# objective-c - 收藏 在枚举时发生了突变

> ID：13825422
> 
> 赞同：-1
> 
> 时间：2012-12-11T17:31:40.663
> 
> 标签：objective-c, ios

我意识到这已经被问过很多次了，但我只是不知道我的代码的错误在哪里，抱歉我很愚蠢。

我确实知道错误来自这种方法：

```
-(void)getDataFromDatabase {
    UIActivityIndicatorView *indicator = [[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
    indicator.frame = CGRectMake(0.0, 0.0, 40.0, 40.0);
    indicator.center = self.view.center;
    [indicator bringSubviewToFront:self.view];
    [UIApplication sharedApplication].networkActivityIndicatorVisible = TRUE;
    [indicator startAnimating];

    CGRect screenRect = [[UIScreen mainScreen] bounds];

    UIView *overlay = [[UIView alloc] initWithFrame:CGRectMake(0, 0, screenRect.size.width, screenRect.size.height)];

    overlay.backgroundColor = [UIColor whiteColor];

    [self.view addSubview:overlay];
    [self.view addSubview:indicator];

    NSString *listingurl;

    listingurl = [NSString stringWithFormat:@"http://www.herefordshire-tourism-guide.co.uk/app/query.php?getlisting=1&listingname=%@", rowSelectedName];

    listingurl = [listingurl stringByReplacingOccurrencesOfString:@" " withString:@"%20"];

    NSURL *url = [NSURL URLWithString:listingurl];

    NSError *error = nil;
    NSStringEncoding encoding;

    NSString *jsonreturn = [[NSString alloc] initWithContentsOfURL:url usedEncoding:&encoding
                                                             error:&error];

    NSData *jsonData = [jsonreturn dataUsingEncoding:NSUTF32BigEndianStringEncoding];

    // In "real" code you should surround this with try and catch
    NSDictionary * dict = [[CJSONDeserializer deserializer] deserializeAsDictionary:jsonData error:&error];
    if (dict)
    {
        rows = dict[@"listings"];
    }
    dict = rows[0];

    self.photos.font = [UIFont fontWithName:@"ProximaNova-Regular" size:18.0];
    self.likes.font = [UIFont fontWithName:@"ProximaNova-Regular" size:18.0];
    self.businessName.font = [UIFont fontWithName:@"ProximaNova-Extrabld" size:20.0];
    self.address.font = [UIFont fontWithName:@"ProximaNova-Regular" size:16.0];

    self.navigationItem.title = dict[@"business"];

    NSString *favdb = [NSString stringWithFormat:@"%@", dict[@"favs"]];

    if ([favdb isEqualToString:@""]) {
        NSString *fav = [NSString stringWithFormat:@"0 Likes"];
        self.favourites.text = fav;
    } else {
        NSString *fav = [NSString stringWithFormat:@"%@ Likes", dict[@"favs"]];
        self.favourites.text = fav;
    }

    if ([favdb isEqualToString:@"1"]) {
        NSString *fav = [NSString stringWithFormat:@"1 Like"];
        self.favourites.text = fav;
    }

    self.businessName.text = dict[@"business"];
    self.address.text = dict[@"location"];

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,
                                             (unsigned long)NULL), ^(void) {

        UIActivityIndicatorView *indicator = [[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
        indicator.frame = CGRectMake(140, 85, 40.0, 40.0);
        [indicator bringSubviewToFront:self.view];
        [indicator startAnimating];
        [self.view addSubview:indicator];

        UIImage *img = [[UIImage alloc] initWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:dict[@"image1"]]]];

        self.image.image = img;

        [UIApplication sharedApplication].networkActivityIndicatorVisible = FALSE;
        [indicator stopAnimating];
    });

    listingLoc = [[CLLocation alloc] initWithLatitude:[dict[@"lat"] doubleValue] longitude:[dict[@"lon"] doubleValue]];

    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    float kilometers = [appDelegate.currentLoc distanceFromLocation:listingLoc] / 1000;

    int milesint = kilometers * 0.621371192;

    NSString *milesOut = [NSString stringWithFormat:@"%i miles", milesint];

    self.distance.text = milesOut;

    networkImages = [[NSMutableArray alloc] init];

    if (dict[@"image1"] != @"") {
        [networkImages addObject:dict[@"image1"]];
    }

    [indicator stopAnimating];
    [overlay removeFromSuperview];
} 
```

我在 viewWillAppear 方法中调用该方法...

`[self performSelectorInBackground:@selector(getDataFromDatabase) withObject:nil];`

任何提示，我的代码可能有点粗制滥造，非常感谢任何帮助！

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T17:45:04.240

您在这里遇到了几个问题，主要与在后台线程上修改 UI 有关，您绝对不能这样做。例如：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,
                                         (unsigned long)NULL), ^(void) {

    UIActivityIndicatorView *indicator = [[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
    indicator.frame = CGRectMake(140, 85, 40.0, 40.0);
    [indicator bringSubviewToFront:self.view];
    [indicator startAnimating];
    [self.view addSubview:indicator];
    ... 
```

在这里，您正在后台线程上修改当前视图的子视图列表。那是不合法的。大多数 UIKit 方法必须在主线程上运行（从 GCD 的角度来看，这是主队列）。

`viewWillAppear:`这条线在内部（或大多数地方）也非常危险：

```
[self performSelectorInBackground:@selector(getDataFromDatabase) withObject:nil]; 
```

您的视图可能会在期间多次出现和消失`getDataFromDatabase`（旁注：您应该称之为`fetchDataFromDatabase`.“get”在 Cocoa 中具有特殊含义）。如果视图多次出现，您可能会导致许多线程同时运行，这当然不是您的意思。

你几乎不应该使用`performSelectorInBackground:withObject:`. 使用`NSOperationQueue`或调度队列来管理后台操作。

# javascript - 使用键事件时 Tab 键事件不起作用

> ID：13825425
> 
> 赞同：0
> 
> 时间：2012-12-11T17:31:57.247
> 
> 标签：javascript, jquery, keyboard

我正在使用以下功能检查按键上的数字

```
function only_numeric(e)
    {
        var keynum;
        var keychar;
        var numcheck;
        if(window.event) // IE
        {
            keynum = e.keyCode;
        }
        else if(e.which) // netscape/Firefox/opera
        {
            keynum = e.which;
        }
        //condition for backspace(music) Key
        if(keynum != 8)
        {
            keychar = String.fromCharCode(keynum);
            //numcheck = /\d/;
            numcheck = /[.0-9]/;
            return numcheck.test(keychar);
        }
        else
        {
            return true;
        }
    } 
```

我在输入框中调用了上述函数，

```
<input required="" onkeypress='return only_numeric(event,this.id)' type="text" name="test1" id="test1"  />

<input required="" onkeypress='return only_numeric(event,this.id)' type="text" name="test2" id="test2"  /> 
```

验证号码功能工作正常。我需要使用 tabkey 代码（9），就像退格键代码 8 一样。如果我在`only_numeric`函数中使用下面的代码

```
...

    if(keynum != 8 || keynum != 9)
                {

.... 
```

选项卡功能不起作用。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:36:21.447

你需要修改你的条件来逃避`backspace`和`tab`。使用`&&`代替`||`

```
if(keynum != 8 && keynum != 9) 
```

另外，我将简单地重新排序您的状况，如下所示，

```
 if(keynum == 8 || keynum == 9) /* and more keys to escape*/
    {
         return true;
    }
    else
    {
        keychar = String.fromCharCode(keynum);
        //numcheck = /\d/;
        numcheck = /[.0-9]/;
        return numcheck.test(keychar);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:42:36.900

是的。我终于得到了输出，我修改了我的函数，如下所示，

```
function only_numeric(e)
    {
        var keynum;
        var keychar;
        var numcheck;
        if(window.event) // IE
        {
            keynum = e.keyCode;
        }
        else if(e.which) // netscape/Firefox/opera
        {
            keynum = e.which;
        }

         var tabkey = e.keyCode;

         if( keynum == 8 || tabkey == 9 || tabkey == 37 || tabkey == 39)
        {
                  return true;
        }        

        else
        {
             keychar = String.fromCharCode(keynum);
            //numcheck = /\d/;
            numcheck = /[.0-9]/;
            return numcheck.test(keychar);
        }
    } 
```

# jquery - 使用 zurb 基础下拉 div

> ID：13825426
> 
> 赞同：0
> 
> 时间：2012-12-11T17:32:04.867
> 
> 标签：jquery, zurb-foundation

我正在尝试实现一个下拉 div，类似于我们访问 zurb 基金会网站[http://foundation.zurb.com](http://foundation.zurb.com)并单击基金会品牌旁边的叉号。这样做时，会在导航栏和面板之间插入一个 div。

我怎样才能使用基础做类似的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:09:30.753

这不是特定于基础的功能，而是 jQuery 效果，即`slideDown`.

您可以将其应用于任何元素，假设您最初使用隐藏的*基础行*`display:none;`之一。

像这样的东西：

```
$('#actionBtn').bind('click', function() {
    $('#hiddenRow').slideDown();
}); 
```

[jQuery - 向下滑动](http://api.jquery.com/slideDown/)

[W3Schools - jQuery - slideDown](http://www.w3schools.com/jquery/eff_slidedown.asp)

# google-chrome-extension - 编写 Gmail Chrome 扩展程序

> ID：13825428
> 
> 赞同：0
> 
> 时间：2012-12-11T17:32:16.283
> 
> 标签：google-chrome-extension, gmail

我对开发 Gmail 的 Chrome 扩展很感兴趣。不幸的是，我找不到有关此主题的任何教程（演示添加按钮的简单操作）。我正在寻找向撰写工具栏添加一个按钮，并在 gmail 帐户中创建一个新标签/文件夹。

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T08:42:03.947

[您应该在https://github.com/joscha/gmailr](https://github.com/joscha/gmailr)查看这些 API ，它是[https://github.com/jamesyu/gmailr](https://github.com/jamesyu/gmailr)的一个分支，但原作者一直忙于更新它。

# php - 使用 upgrade.php 的 PHP 5.1.6 和 Facebook SDK 仍然无法正常工作

> ID：13825429
> 
> 赞同：1
> 
> 时间：2012-12-11T17:32:16.390
> 
> 标签：php, facebook

我已经为客户端编写了一个 Facebook 应用程序，它在我自己的运行 PHP5.2 的服务器上运行良好。在客户端服务器上安装时，我们发现它运行的是 PHP5.1.6 所以没有 json_de/encode 库。

客户端被他们的服务器供应商阻止升级到 PHP5.2，并且考虑到他们网站的黑客和状态（古老的被黑死的 Joomla v1.0）可能有风险。

环顾四周，我发现了 upgradephp（我用过的 v1.7）。它同时提供 json_encode 和 decode

我遇到的问题是代码处于永久循环中，试图获取 Facebook 用户 ID：

```
$options = array("scope" => "user_birthday",
                 "redirect_uri" => "https://apps.facebook.com/".$nameSpace."/");
$loginUrl = $facebook->getLoginUrl($options);
// Get User ID
$user = $facebook->getUser();
if (!$user) {
    // Require user to authenticate the app
    echo '<script>top.location.href = "' . $loginUrl . '"</script>';
} 
```

这段代码在我自己的服务器上运行良好，只是在客户端上运行良好。所以我想知道从哪里开始调试以及如何开始调试？任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:24:14.470

答案只是我为之工作的客户端导致的 Facebook 应用程序面板中的配置问题。他们错误地输入了自己的网站 URL，省略了前面的“www”。当应用程序运行时，它试图转到没有 www 的域名并被重定向到 www.domainname。不仅如此，而且在重定向中为 http 删除了 https。这导致了重定向的无限循环，因为 facebook 不允许非 https 请求。

# php - PHP 和 Postgresql，默认不工作

> ID：13825430
> 
> 赞同：-1
> 
> 时间：2012-12-11T17:32:27.463
> 
> 标签：php, postgresql, default

我正在尝试在使用值 DEFAULT 的地方进行插入，因为我有一个带有 ID 序列（整数）的表设置，所以它会自动递增。

如果我手动执行查询，它会完美运行：

```
INSERT INTO myTable VALUES (DEFAULT, 'Name T', 35, 9, 0); 
```

但是，当我从 PHP 执行它时，它不起作用：

```
$query = "INSERT INTO myTable VALUES (DEFAULT, '$name', $age, $type, 0)";
pg_query($query); 
```

我知道 DEFAULT 的问题，因为如果我用数字替换它，它也会从 PHP 中很好地插入。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:34:53.320

根本不要为该字段插入任何值，而是为您填充序列的默认值。当然，这意味着您需要在插入查询中专门命名您的字段。

# windows - 为什么这个简单的 DLL 在 WM_ACTIVATEAPP 到达之前会崩溃？

> ID：13825433
> 
> 赞同：0
> 
> 时间：2012-12-11T17:32:36.343
> 
> 标签：windows, debugging, dll, mdi

下面的最小 DLL 仅使用 Win32 API，它试图做的只是创建一个 MDI 框架/客户端窗口和一个子窗口，并在 DLL 卸载时销毁框架窗口。DLL 在 Windows XP 上崩溃，但在 USER32 中执行 INT x2B 指令时出现异常。

为了测试，DLL 由调用 LoadLibrary('badcode.dll') 的单行应用程序简单地调用。

崩溃发生在最终的“DestroyWindow(framewindowhandle)”内，就在 DLL 完成之前，**在**FrameWindowProc 接收到 WM_ACTIVATE 之后但**在**它接收到 WM_ACTIVEAPP 之前。

DLL 代码已从更大的原始文件中尽可能地减少，以隔离错误。尽管**不**破坏框架窗口也会使当前的崩溃消失，但大约 12 年前，确定在 NT 上运行的 Visual Basic 等工具会崩溃，除非在卸载 DLL 之前调用“DestroyWindow(framewindowhandle)”。然而，就在最近，突然发现为测试某些 DLL 入口点而编写的新小程序在 XP 上崩溃，如上所述。

虽然是用 Delphi 6 编写的，但代码只依赖于 vanilla Win32 API。

```
库错误代码；// 如果重写为程序而不是 DLL 则有效

{$R *.RES} // 删除它可以避免崩溃

使用窗口、消息；// 只进行 win32 调用

// 3 个 MDI 窗口句柄
var framewindowhandle, clientwindowhandle, childwindowhandle: hwnd;

函数 framewindowproc(windowhandle: hwnd; 消息: word; wparam, lparam: longint): longint; 标准调用；
var ccs: tclientcreatestruct;
begin // 框架窗口已收到消息
如果消息 = WM_CREATE 那么
  begin // 创建客户端窗口
  ccs.hwindowmenu := 0; ccs.idfirstchild := 0;
  clientwindowhandle := createwindow('MDICLIENT', '', ws_child + ws_clipchildren + ws_visible, 10, 10, 50, 50, windowhandle, 0, hinstance, @ccs);
  结果：= 0；// 我们处理了消息
  结尾
else // 做默认处理
  结果：= defframeproc（窗口句柄，客户端窗口句柄，消息，wparam，lparam）；
结尾;

函数 childwindowproc(windowhandle: hwnd; 消息: word; wparam, lparam: longint): longint; 标准调用；
begin // 子窗口收到消息，做默认处理
结果：= defmdichildproc（窗口句柄，消息，wparam，lparam）；
结尾;

程序 DLLHandler（原因：整数）；
开始
if reason = DLL_PROCESS_DETACH then // 卸载 dll
  销毁窗口（框架窗口句柄）；// 导致崩溃，永不返回
结尾;

var wc: twndclass; mcs：tmdicreatestruct；

begin // DLL 加载时间
DLLProc := @DLLHandler; // 所以我们可以检测卸载
wc.hinstance := hinstance;
wc.lpfnwndproc := @framewindowproc;
wc.style := 0; wc.cbclsextra := 0; wc.cbwndextra := 0;
wc.hicon := loadicon(0, IDI_ASTERISK);
wc.hcursor := loadcursor(0, IDC_ARROW);
wc.hbr背景：= 0；
wc.lpszmenuname := '菜单栏'; // 更改为 '' 避免崩溃
wc.lpszclassname := 'BAD';
注册类（厕所）；//注册框架窗口

wc.lpfnwndproc := @childwindowproc;
wc.lpszmenuname := '';
wc.lpszclassname := '数据';
注册类（厕所）；//注册子窗口

framewindowhandle := createwindow('BAD', 'frame', WS_OVERLAPPEDWINDOW + WS_CLIPCHILDREN, 100, 100, 400, 600, 0, 0, hinstance, nil);

mcs.szclass := '数据'; mcs.sztitle := '孩子'; mcs.howner := 障碍；
mcs.x := 50; mcs.y := 50; mcs.cx := 50; mcs.cy := 50; mcs.style := WS_MINIMIZE; // 改变样式避免崩溃
childwindowhandle := sendmessage(clientwindowhandle, WM_MDICREATE, 0, longint(@mcs));
发送消息（客户端窗口句柄，WM_MDIRESTORE，子窗口句柄，0）；// 跳过这个可以避免崩溃
结尾。

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T02:34:18.220

使用出色的[dependencywalker](http://www.dependencywalker.com/)工具，我发现我机器上的一些旧扫描仪软件已将 USER32 配置为在执行**任何**程序时挂钩与 OCR 相关的 DLL，并且该 DLL 正在进行一些看起来有问题的调用，包括被加载两次原因。卸载扫描仪软件使崩溃消失，所有 O/S DLL 加载/卸载看起来更加合理。不过，我将修改我的 DLL，使其在附加/分离期间不执行任何操作，并包含用于启动/停止的新入口点。

# php - 如何在 HTML/Javascript 的 Windows 帮助中创建树形结构

> ID：13825435
> 
> 赞同：3
> 
> 时间：2012-12-11T17:32:38.293
> 
> 标签：php, javascript, html

我目前正在做一个项目，我想创建一个 HTML 帮助页面，为我的用户提供有关如何使用该应用程序的帮助和建议。

我想要实现的是树形布局，因此在左侧它的所有标题旁边都有一个加号。然后，当用户单击加号按钮或文本时，它会扩展该部分的相关内容。如果用户然后再次单击它，那么现在显示的所有项目都将重新隐藏。

我还没有找到任何关于如何做到这一点的像样的教程。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:39:18.877

您可以使用 jquery、mootools 或其他 js 库来完成。

但如果你想自己做，试试这个：

假设您有一些这样的列表：

```
 <div><a id="cat1" onclick="toggle(this.id)">first cat</a>
    <ul id="content1">
        <li>text1</li><li>text2</li>
    </ul></div>

    <div><a id="cat2" onclick="toggle(this.id)">second cat</a>
    <ul id="content2">
        <li>text1</li><li>text2</li>
    </ul></div> 
```

这是js：

```
function toggle(obj)
{
    var con = document.getElementById("content"+obj.substr(3));
    if (con.style.display=="none") con.style.display="block"; else con.style.display="none";
} 
```

这是一个非常简单的代码，如果你尝试，你可以做得更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T20:59:25.143

正如你所描述的，我花了一些时间来建立一个快速的树系统。有趣的小运动。复制粘贴，在浏览器中打开（我使用的是 FireFox）。如果您愿意，可以将 DIV 标签中的 +/- 符号更改为图像。调整 CSS 边距和内边距，使其无缝衔接。希望这可以帮助。

祝你好运。

```
<html>
<head>
  <style type="text/css">

    div#tree ul { margin:0 0 0 20px; padding:0; list-style-type:none; }
    div#tree ul { display:none; }
    div#tree li>div { display:inline; margin-right:5px; cursor:pointer; }
    div#tree label:hover { text-decoration:underline; cursor:pointer; }
    div#tree>ul { display:block; }

  </style>

  <script src="http://code.jquery.com/jquery-latest.js"></script>

  <script>
    $(document).ready(function () {
        //Set plus sign for all sub menus
        $('li:has("ul")>div').html('&plus;');

        //Handle plus/minus tree expansion
        $('li>div').on('click', function (e) {
            if($(this).parent('li').hasClass('selected')) {
                $(this).siblings('ul').slideUp();
                $(this).parent('li').removeClass('selected');
                $(this).html('&plus;');
            } else {
                $(this).siblings('ul').slideDown();
                $(this).parent('li').addClass('selected');
                $(this).html('&minus;')
            }
        })

        //Handle tree item link stored as LI data attribute
        $('li>label').on('click', function (e) {
            //This is your URL, URI, Link, Location, etc
            alert($(this).parent('li').attr('data-location'))
        })

    });
  </script>

</head>
<body>

    <div id="tree">
        <ul>
            <li data-location=""><div>&lfloor;</div><label>First Level Item1</label></li>
            <li data-location=""><div>&lfloor;</div><label>First Level Item2</label></li>
            <li data-location=""><div>&lfloor;</div><label>First Level Item3</label></li>
            <li data-location=""><div>&lfloor;</div><label>First Level Item4</label></li>
            <li data-location=""><div>&lfloor;</div><label>First Level Item5</label>
                <ul>
                    <li data-location=""><div>&lfloor;</div><label>Second Level Item1</label></li>
                    <li data-location=""><div>&lfloor;</div><label>Second Level Item2</label></li>
                    <li data-location=""><div>&lfloor;</div><label>Second Level Item3</label></li>
                    <li data-location=""><div>&lfloor;</div><label>Second Level Item4</label></li>
                    <li data-location=""><div>&lfloor;</div><label>Second Level Item5</label>
                        <ul>
                            <li data-location=""><div>&lfloor;</div><label>Third Level Item1</label></li>
                            <li data-location=""><div>&lfloor;</div><label>Third Level Item2</label></li>
                            <li data-location=""><div>&lfloor;</div><label>Third Level Item3</label></li>
                            <li data-location=""><div>&lfloor;</div><label>Third Level Item4</label></li>
                            <li data-location=""><div>&lfloor;</div><label>Third Level Item5</label></li>
                            <li data-location=""><div>&lfloor;</div><label>Third Level Item6</label></li>
                            <li data-location=""><div>&lfloor;</div><label>Third Level Item7</label></li>
                        </ul>
                    </li>
                    <li data-location=""><div>&lfloor;</div><label>Second Level Item6</label></li>
                </ul>
            </li>
            <li data-location=""><div>&lfloor;</div><label>First Level Item6</label></li>
            <li data-location=""><div>&lfloor;</div><label>First Level Item7</label></li>
            <li data-location=""><div>&lfloor;</div><label>First Level Item8</label></li>
            <li data-location=""><div>&lfloor;</div><label>First Level Item9</label></li>
            <li data-location=""><div>&lfloor;</div><label>First Level Item10</label></li>
            <li data-location=""><div>&lfloor;</div><label>First Level Item11</label></li>
        </ul>
    </div>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T21:14:18.993

有很多框架都内置了这些组件。检查 ExtJS、Dojo 或任何其他 RIA 框架，看看它是否可以在您的项目中工作。有一点学习曲线，但是一旦你学会了，你的代码库就会更易于管理。

[http://www.sencha.com/products/extjs/examples/](http://www.sencha.com/products/extjs/examples/) http://cdn.sencha.com/ext-4.1.1a-gpl/examples/tree/treegrid.html

# grid - 带有 jQ uery 版本的 Kendo UI 错误

> ID：13825437
> 
> 赞同：0
> 
> 时间：2012-12-11T17:32:45.403
> 
> 标签：grid, window, filtering, kendo-ui

我在同一页面上有一个 Kendo UI 网格和一个 Kendo UI 窗口。该窗口包含用于记录插入的表单元素，记录由网格中的一行表示。但是由于我不知道的原因，当我打开窗口并再次将其关闭然后重新打开时，Kendo UI 将其缩小了 100 倍。我不想破解窗口，所以我一直在寻找替代解决方案。

我用过 jQuery 1.7.2。我已将 jQuery 更新到 1.8.0 版。和窗口打开，关闭和重新打开工作。我很高兴，直到我意识到现在网格过滤器不起作用。当我单击网格过滤器时，什么也没有发生，没有弹出窗口，什么都没有。造成这种情况的原因是什么，解决方案是什么？

编辑：

这是我的代码（我已经替换了 Urls 的值）。网格过滤器适用于 jQuery 1.7.2。并且窗口重新打开适用于新版本的 jQuery。此外，如果我删除排序技巧，网格过滤器弹出窗口仍然不会出现。

```
 var hshflt = {};
    var addWindow;
    var editWindow;
    var init = false;
    //Sort Hack

    /*
    Changes all dataSources to case insensitive sorting (client side sorting).
    This snipped enable case insensitive sorting on Kendo UI grid, too.

    The original case sensitive comparer is a private and can't be accessed without modifying the original source code.
    tested with Kendo UI version 2012.2.710 (Q2 2012 / July 2012).
    */

    var CaseInsensitiveComparer = {

        getterCache: {},

        getter: function (expression) {
            return this.getterCache[expression] = this.getterCache[expression] || new Function("d", "return " + kendo.expr(expression));
        },

        selector: function (field) {
            return jQuery.isFunction(field) ? field : this.getter(field);
        },

        asc: function (field) {
            var selector = this.selector(field);
            return function (a, b) {

                if ((selector(a).toLowerCase) && (selector(b).toLowerCase)) {
                    a = selector(a).toLowerCase(); // the magical part
                    b = selector(b).toLowerCase();
                }

                return a > b ? 1 : (a < b ? -1 : 0);
            };
        },

        desc: function (field) {
            var selector = this.selector(field);
            return function (a, b) {

                if ((selector(a).toLowerCase) && (selector(b).toLowerCase)) {
                    a = selector(a).toLowerCase(); // the magical part
                    b = selector(b).toLowerCase();
                }

                return a < b ? 1 : (a > b ? -1 : 0);
            };
        },

        create: function (descriptor) {
            return this[descriptor.dir.toLowerCase()](descriptor.field);
        },

        combine: function (comparers) {
            return function (a, b) {
                var result = comparers[0](a, b),
        idx,
        length;

                for (idx = 1, length = comparers.length; idx < length; idx++) {
                    result = result || comparers[idx](a, b);
                }

                return result;
            };
        }
    };

    kendo.data.Query.prototype.normalizeSort = function (field, dir) {
        if (field) {
            var descriptor = typeof field === "string" ? { field: field, dir: dir} : field,
    descriptors = jQuery.isArray(descriptor) ? descriptor : (descriptor !== undefined ? [descriptor] : []);

            return jQuery.grep(descriptors, function (d) { return !!d.dir; });
        }
    };

    kendo.data.Query.prototype.sort = function (field, dir, comparer) {

        var idx,
length,
descriptors = this.normalizeSort(field, dir),
comparers = [];

        comparer = comparer || CaseInsensitiveComparer;

        if (descriptors.length) {
            for (idx = 0, length = descriptors.length; idx < length; idx++) {
                comparers.push(comparer.create(descriptors[idx]));
            }

            return this.orderBy({ compare: comparer.combine(comparers) });
        }

        return this;
    };

    kendo.data.Query.prototype.orderBy = function (selector) {

        var result = this.data.slice(0),
comparer = jQuery.isFunction(selector) || !selector ? CaseInsensitiveComparer.asc(selector) : selector.compare;

        return new kendo.data.Query(result.sort(comparer));
    };

    kendo.data.Query.prototype.orderByDescending = function (selector) {

        return new kendo.data.Query(this.data.slice(0).sort(CaseInsensitiveComparer.desc(selector)));
    };
    //Sort Hack

    $("#refresh-btn").click(function () {
        refreshGrid();
    });

    var grid;

    function getPageIndex() {
        if (!(grid)) {
            return 0;
        }
        return grid.pager.page() - 1;
    }

    function getPageSize() {
        if (!(grid)) {
            return 10;
        }
        return grid.pager.pageSize();
    }

    function getFilters() {
        if (!(grid)) {
            return "";
        }
        return grid.dataSource.filter();
    }

    function getSorts() {
        if (!(grid)) {
            return "";
        }
        var arr = grid.dataSource.sort();
        if ((arr) && (arr.length == 0)) {
            return "";
        }
        var returnValue = "";
        for (var index in arr) {
            var type = "";
            for (var col in grid.columns) {
                if (grid.columns[col].field === arr[index].field) {
                    type = grid.columns[col].type;
                }
            }
            returnValue += ((returnValue.length > 0) ? (";") : ("")) + arr[index].field + "," + (arr[index].dir === "asc") + "," + type;
        }
        return returnValue;
    }

    function getColumns() {
        if (!(grid)) {
            return "";
        }
        var columns = "";
        for (var col in grid.columns) {
            if (columns.length > 0) {
                columns += ";";
            }
            columns += grid.columns[col].field + "," + grid.columns[col].type;
        }
        return columns;
    }

    var initGrid = true;
    var grid2Data;

    function getDataSource() {
        $.ajax({
            type: 'POST',
            url: 'mydsurl' + getParams(),
            data: "filter=" + JSON.stringify(getFilters()) + "&columns=" + getColumns(),
            success: function (param) { grid2Data = param; },
            //dataType: dataType,
            async: false
        });
        return grid2Data.Data;
    }

    var shouldClickOnRefresh = false;
    function refreshGrid() {
        shouldClickOnRefresh = false;
        $.ajax({
            type: 'POST',
            url: 'mydsurl' + getParams(),
            data: "filter=" + JSON.stringify(getFilters()) + "&columns=" + getColumns(),
            success: function (param) { grid2Data = param; },
            //dataType: dataType,
            async: false
        });
        grid.dataSource.total = function () {
            return grid2Data.Total;
        }
        for (var col in grid.columns) {
            if ((grid.columns[col].type) && (grid.columns[col].type === "Date")) {
                for (var row in grid2Data.Data) {
                    grid2Data.Data[row][grid.columns[col].field] = new Date(parseInt((grid2Data.Data[row][grid.columns[col].field] + "").replace("/Date(", "").replace(")/", "")));
                }
            }
        }
        grid.dataSource.data(grid2Data.Data);
        shouldClickOnRefresh = true;
    }

    function getParams() {
        return getPageSize() + "|" + getPageIndex() + "|" + getSorts();
    }

    function bindGrid() {
        var editUrl = 'myediturl';
        if (!(editWindow)) {
            editWindow = $("#edit-window");
        }
        $(".k-button.k-button-icontext.k-grid-edit").each(function (index) {
            $(this).click(function () {
                if (!editWindow.data("kendoWindow")) {
                    editWindow.kendoWindow({
                        title: "Edit User",
                        width: "60%",
                        height: "60%",
                        close: onClose,
                        open: onEditOpen,
                        content: editUrl + $("#grid").data().kendoGrid.dataSource.view()[index]["ID"]
                    });
                }
                else {

                    editWindow.data("kendoWindow").refresh(editUrl + $("#grid").data().kendoGrid.dataSource.view()[index]["ID"]);
                    editWindow.data("kendoWindow").open();
                }
                editWindow.data("kendoWindow").center();
                return false;
            })
        });
        $(".k-button.k-button-icontext.k-grid-delete").each(function (index) {
            $(this).click(function () {

                var r = confirm("Are you sure you want to delete this user?");
                if (r == true) {
                    $.ajax({
                        type: 'POST',
                        url: 'mydelurl' + $("#grid").data().kendoGrid.dataSource.view()[index]["ID"],
                        success: function (param) { refreshGrid(); },
                        async: false
                    });
                }
                return false;
            });
        });
    }

    function onDataBound() {
        if (!(shouldClickOnRefresh)) {
            shouldClickOnRefresh = true;
            bindGrid();
        }
        else {
            refreshGrid();
        }
    }

    $(function () {
        $("#grid").kendoGrid({
            dataBound: onDataBound,
            dataSource: {
                autoSync: true,
                data: getDataSource(),
                serverPaging: true,
                schema: {
                    model: {
                        fields: {
                            Email: { type: "string" },
                            FullName: { type: "string" },
                            LogCreateDate: { type: "date" },
                            RoleName: { type: "string" },
                            UserName: { type: "string" }
                        }
                    },
                    total: function (response) {
                        return grid2Data.Total;
                    }
                },
                pageSize: 10
            },
            toolbar: ["create"],
            scrollable: true,
            sortable: true,
            filterable: true,
            pageable: {
                input: true,
                numeric: false,
                pageSizes: true
            },
            columns: [
                    {
                        command: ["edit", "destroy"],
                        title: "&nbsp;"
                    },
                    {
                        field: "Email",
                        title: "Email",
                        type: "String"
                    },
                    {
                        field: "FullName",
                        title: "Full Name",
                        type: "String"
                    },
                    {
                        field: "LogCreateDate",
                        title: "Created",
                        type: "Date",
                        template: '#= kendo.toString(LogCreateDate,"MM/dd/yyyy") #'
                    },
                    {
                        field: "RoleName",
                        title: "Role",
                        type: "Custom"
                    },
                    {
                        field: "UserName",
                        type: "String"
                    }
                ],
            editable: "popup"
        });
        grid = $("#grid").data("kendoGrid");

        function onAddOpen() {
        }

        addWindow = $("#add-window");
        $(".k-button.k-button-icontext.k-grid-add").click(function () {
            if (!addWindow.data("kendoWindow")) {
                addWindow.kendoWindow({
                    title: "Add User",
                    width: "60%",
                    height: "60%",
                    close: onClose,
                    open: onAddOpen,
                    content: 'myaddurl'
                });
            }
            else {
                addWindow.data("kendoWindow").open();
            }
            addWindow.data("kendoWindow").center();
            addWindow.data("kendoWindow").refresh();
            return false;
        });

    });

    function onClose() {
        $("#refresh-btn").click();
    }

    function onEditOpen() {
        //editWindow.data("kendoWdinow").center();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T19:41:36.863

我已经第二次破解了 Kendo UI，这次我解决了它与 jQuery 1.8.3 的不兼容问题。使用以下技巧：

```
$(".k-grid-filter").each(function(index) {
    $(this).click(function() {
        $($(".k-filter-menu.k-popup.k-group.k-reset")[index]).offset({
            left: $($(".k-grid-filter")[index]).offset().left - $($(".k-filter-menu.k-popup.k-group.k-reset")[index]).width(), 
            top: $($(".k-grid-filter")[index]).offset().top + $($(".k-grid-filter")[index]).height()})
        })
    }); 
```

我已将此 hack 放入页面的文档加载事件中，瞧，它可以工作。这个hack肯定看起来很丑，但是在设计之后它看起来就像新的一样。我很高兴我找到了解决方法，但我很不高兴我不得不两次破解 Kendo UI。这是一个非常好的工具，除了错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T17:39:47.790

jQuery 1.8.# 仅与 Kendo UI - Q2 2012 SP1 (2012.2 913) 或更高版本兼容。

如果您的剑道 UI 版本较早，您应该更新它。

# android - LibGDX 中 Table 内的 LinearLayout 模拟

> ID：13825439
> 
> 赞同：7
> 
> 时间：2012-12-11T17:32:47.373
> 
> 标签：android, layout, libgdx, scene2d

我想在 LibGDX 中使用带有以下布局的 scene2d 包创建游戏菜单屏幕

```
|    label    |
| btn btn btn |
|    label    | 
```

我的代码如下所示：

```
Table table = getTable();
table.add(label1);
table.row();
table.add(button1);
table.add(button2);
table.add(button3);
table.row();
table.add(label2);
table.row(); 
```

但是我得到的不是我想要的，而是这样的：

```
| label       |
| btn btn btn |
| label       | 
```

原因是因为每个`table.add()`方法调用都会创建一个新的单元格。但我想将我所有的 3 个按钮放在一个单元格中。我怎样才能达到预期的结果，可能在 LibGDX 中存在类似的东西`LinearLayout`或其他东西？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T17:58:41.450

调用 `colspan(3)`时返回给您的单元格`add(label);`

前任。

```
Cell cell = table.add(label1);
cell.colspan(3); 
```

顾名思义，这设置单元格将跨越多少列。您可能还需要通过调用在单元格上设置对齐方式`cell.center();`

您可以将这些调用串在一起，因为它们都返回相同的单元格对象..

```
table.add(label1).colspan(3).center(); 
```

似乎没有为 libgdx 记录 Cell 类。我只是继续阅读[此处找到的源代码](http://gazbot-decal.googlecode.com/git-history/e8881262d18232b900a2de6a088a0a879f103a70/gdx-shared-libs/libs/docs/api/com/badlogic/gdx/scenes/scene2d/ui/tablelayout/Cell.html)

现在可以在[此处](http://gazbot-decal.googlecode.com/git-history/e8881262d18232b900a2de6a088a0a879f103a70/gdx-shared-libs/libs/docs/api/com/badlogic/gdx/scenes/scene2d/ui/tablelayout/Cell.html)找到单元类文档。官方文档中似乎确实缺少它。

# r - 来自 data.frames 列表的样本

> ID：13825440
> 
> 赞同：3
> 
> 时间：2012-12-11T17:32:48.667
> 
> 标签：r, list

我有以下`list1`和`list2`：

```
df1   <- data.frame(x=(1:3),Q=(3:5))
df2   <- data.frame(x=(1:3),Q=(3:5))
df3   <- data.frame(x=(1:3),Q=(3:5))
list1 <- list(df1,df2,df3)
list2 <- list(2,3,6) 
```

我想根据中的相应值从`Q`每个元素中随机抽样`list1` `list2`

因此，我将从`Q`2 次中对第一对列表元素进行采样。

到目前为止，我已经成功：

```
df1   <- data.frame(x=(1:3),Q=(3:5))
z <- 2
sapply(1:z,function(i) sample(df1$Q,1)) 
```

但我正在努力尝试`mapply`在两个列表中的所有元素对中做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T17:41:06.683

这是一种`mapply`方法：

```
mapply(function(x, y) sample(x[["Q"]], y, replace = TRUE), list1, list2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:40:22.087

不确定这是否是您所追求的，但它可能会有所帮助：

```
FUN <- function(x, z) sapply(1:z,function(i) sample(x[["Q"]], 1))
lapply(seq_along(list1), function(i) FUN(list1[[i]], list2[[i]])) 
```

# c# - 正则表达式 [] 在运行时抛出异常

> ID：13825441
> 
> 赞同：1
> 
> 时间：2012-12-11T17:32:50.910
> 
> 标签：c#, regex

以下代码抛出

> 'ConsoleApplication1.Program' 的类型初始化程序引发了异常。

在线上

```
public static Regexp[] keepers = { ... }; 
```

为什么这是错误的，我该如何解决？

```
namespace ConsoleApplication1
{
    class Program
    {
        public static String output = "";
        public static Regex[] keepers = { 
                                            new Regex(@"using(?<everythingElse> [a-zA-Z.]+;)"),
                                            new Regex(@"namespace(?<everythingElse> [a-zA-Z._]+)"),
                                            new Regex(@"class(?<everythingElse> [a-zA-Z._]+)"),
                                            new Regex(@"(public|private)? ?(static)? ?(?<type> String|void|int|Double)(" + Regex.Escape("[") + "?" + Regex.Escape("]") + "?" + "(?<functionName> [a-z_]+)(?<params> [^\r\n]+)")
                                        };
        [STAThread]
        static void Main(string[] args)
        {}}} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T17:36:21.947

**始终**查看完整的异常。这是您的情况（稍微重新格式化）：

```
Unhandled Exception: System.TypeInitializationException: The type initializer for
'ConsoleApplication1.Program' threw an exception. ---> System.ArgumentException:
 parsing "(public|private)? ?(static)? ?(?<type> String|void|int|Double)(\[?]?
 (?<functionName> [a-z_]+)(?<params> [^]+)" - Not enough )'s.
   at System.Text.RegularExpressions.RegexParser.ScanRegex()
   at System.Text.RegularExpressions.RegexParser.Parse(String re, RegexOptions op)
   at System.Text.RegularExpressions.Regex..ctor(String pattern, RegexOptions options, TimeSpan matchTimeout, Boolean useCache)
   at System.Text.RegularExpressions.Regex..ctor(String pattern)
   at ConsoleApplication1.Program..cctor()
   --- End of inner exception stack trace ---
   at ConsoleApplication1.Program.Main(String[] args) 
```

所以你可以看到：

*   它在第四个正则表达式中
*   你的括号有问题

接下来，我会尝试将那个大的正则表达式分解成小的正则表达式，并找出*为什么*你有一个无与伦比的括号。我怀疑这一点：

```
"(" + Regex.Escape("[") + "?" + Regex.Escape("]") + "?" 
```

应该：

```
"(" + Regex.Escape("[") + "?" + Regex.Escape("]") + ")?" 
```

...但你应该检查一下。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T17:39:01.680

4\. 正则表达式中

```
@"(public|private)? ?(static)? ?(?<type> String|void|int|Double)( 
```

打开一个 ( 最后。这不是被关闭的！

# opencv - opencv中的瞳孔检测

> ID：13825444
> 
> 赞同：4
> 
> 时间：2012-12-11T17:33:23.080
> 
> 标签：opencv, iris-recognition

我正在为我最后一年的项目做虹膜识别。现在，我能够通过使用霍夫圆变换来检测虹膜，但它不适用于检测瞳孔，尽管我将网络摄像头修改为 IR 网络摄像头。尝试使用 HSV 颜色检测虹膜中的黑色，但仍然无法正常工作，那么我应该参考哪些算法？

```
IplImage *capturedImg = cvLoadImage("template.jpg",1);
  IplImage* imgHSV = cvCreateImage(cvGetSize(capturedImg), 8, 3);
cvCvtColor(capturedImg, imgHSV, CV_BGR2HSV);

  IplImage* imgThreshed = cvCreateImage(cvGetSize(capturedImg), 8, 1);
       cvInRangeS(imgHSV, cvScalar(0, 0,0, 0), cvScalar(179, 200, 50,77), imgThreshed);
       cvShowImage("HSV",imgThreshed); 
```

![在此处输入图像描述](../Images/e9e863adca03673416bcc865c02d67bb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:02:14.570

如果您想找到黑色，它将出现在值接近零的位置。您可以将 cvInRangeS 命令更改为以下内容：

```
cvInRangeS(imgHSV, cvScalar(0,0,0) , cvScalar(255, 255,27), imgThreshed); 
```

这样，如果像素的值大于 27，您就可以排除它们。您可能想要使用色调和饱和度值来查看最适合的像素。另外，因为图像中的每个像素都有三个通道，所以我认为在使用 cvInRangeS 时使用 4 通道标量没有意义。

无论如何，当我在我的计算机上运行这段代码时，结果如下：

![不能完全隔离左虹膜](../Images/a7a014462c70dab2e1251940525028bc.png)

您可以使用斑点检测来隔离此图像中的左侧虹膜。你可能想看看这个库：[http ://code.google.com/p/cvblob/](http://code.google.com/p/cvblob/)

# ruby-on-rails - 捆绑安装不起作用

> ID：13825448
> 
> 赞同：1
> 
> 时间：2012-12-11T17:33:31.707
> 
> 标签：ruby-on-rails, ruby, bundler

在过去的几天里，我的捆绑安装一直没有工作。每次我给出一个捆绑命令（捆绑更新、捆绑安装和捆绑）时，我都会收到此错误：

```
sh: /c/Program Files/ruby-1.9.2/bin/bundle: "c:/Program: bad interpreter: No such file or directory 
```

哪个红宝石： `/c/RailsInstaller/Ruby1.9.3/bin/ruby`

哪个捆绑包：`/c/Program Files/ruby-1.9.2/bin/bundle`

万一有人感到困惑，我在窗户上。并且捆绑包应该在 railsinstaller 文件夹中，甚至不存在哪个捆绑包文件夹。不知道为什么这个错误突然开始，但它只发生在最近几天。Bundle 在此之前运行良好。不确定是什么原因造成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:46:03.600

第一行`bundle`命令可能是`#! /c/Program Files/ruby-1.9.2/bin/ruby`. 在这种情况下，`/c/Program`被视为解释器。没有办法逃脱空间。尝试将 ruby​​ 重新安装到不包含任何空格的其他目录。（例如`C:\ruby`）

# modx - MODX - 登录用户创建的获取资源

> ID：13825449
> 
> 赞同：0
> 
> 时间：2012-12-11T17:33:33.597
> 
> 标签：modx

*   MODX 革命 2.2.5-pl
    *   获取资源
    *   新闻出版商

想知道是否可以显示属于当前登录用户的资源。

这个想法是在用户配置文件中有一个选项，列出他创建的所有资源。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T19:11:29.080

您需要按`createdby`字段过滤资源，例如：

```
[[!getResources? 
    &parents=`[[*id]]` 
    &where=`{"createdby:=":[[!+modx.user.id]]}` 
    &tpl=`myRowTpl`
]] 
```

# matlab - 读取csv文件内容中的逗号，matlab

> ID：13825451
> 
> 赞同：1
> 
> 时间：2012-12-11T17:33:44.780
> 
> 标签：matlab

我有一个 csv 文件，其中包含逗号。

% 带点

```
15.12.2012 11:27;   0.9884753
11.12.2012 11:12;   10.670.642
11.12.2012 10:57;   114.455.145

Gdata= textscan(fid, '%s %f') 
```

它运作良好。

% 但如何处理点

```
15.12.2012 11:27;   0,9884753
11.12.2012 11:12;   10,670.642
11.12.2012 10:57;   114,455.145 
```

我怎么读它。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:43:43.163

不幸的是，`textscan`不尊重语言环境设置，因此无法通过修改当前语言环境将逗号解释为小数点。作为一种解决方法，您可以读入整行，用点替换逗号，然后用于`textscan`解析该行。

```
line = fgetl( fid );
line = strrep( line, ',', '.' );
Gdata = textscan( line, '%s %f' ); 
```

如果该行可能包含您不想替换的逗号，您可能不得不求助于`regexp`或其他比简单的更高级的方法。`strrep`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T18:05:39.933

这可以解决由于“，”和“。”的存在而可能出现的不均匀性。

```
fid = fopen('data.d','r');
Gdata= textscan(fid, '%s %s','delimiter', ';' )

% // cancels '.' and sets ',' as '.'
f = @(i) str2double(regexprep(regexprep(i,'\.',''),',','\.'));

Num = cellfun(f,Gdata(2),'UniformOutput' , false);

Num{:}

         ans =

       0.9885
       10.6706
       114.4551 
```

# jquery-ui - Bootstrap Carousel - 图像太小

> ID：13825452
> 
> 赞同：1
> 
> 时间：2012-12-11T17:33:51.533
> 
> 标签：jquery-ui, twitter-bootstrap

我正在使用 Bootstrap 和 carousel 插件。这是我的代码：

```
<div id="myCarousel" class="carousel slide">
                <div class="carousel-inner">
                    <div class="active item"><img src="img/tree.jpg"></img></div>
                </div>
                <!-- Carousel nav -->
                <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
                <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
</div> 
```

但是图像显示太小。我想把它填满整个旋转木马。

这是一张图片（是的，图片比图片中显示的要大）： ![在此处输入图像描述](../Images/d3a1df16c8d90e913b6612dd6d27f1df.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T03:13:19.243

```
<div id="myCarousel" class="carousel slide" style="width: 400px; margin: 0 auto">
    ...
</div> 
```

The question is answered [here](https://stackoverflow.com/questions/14590792/twitter-bootstrap-carousel-size)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-14T19:08:45.697

在 bootstrap 3 中添加 responsive 和 center 类：

```
 <img class="img-responsive center-block" src="img/....jpg" alt="First slide"> 
```

我相信这是一个重复的问题。

# php - 将会话与 Silex 和 cUrl 一起使用

> ID：13825460
> 
> 赞同：0
> 
> 时间：2012-12-11T17:34:20.230
> 
> 标签：php, session, curl, sessionid, silex

我正在制作一个应用程序，我需要使用 POST cUrl 调用对用户进行身份验证：

```
$app = new Silex\Application();

$app->register(new Silex\Provider\SessionServiceProvider());

$app['debug'] = true;

$app->post('/api/auth/login', function (Request $request) use ($app) {
    if ($request->get('username') === 'admin' && $request->get('password') === 'admin') {
        return $app->json(array('sessionId' => $app['session']->getId()));
    } else {
        $error = array('message' => 'Authentication failed');
        return $app->json($error, 404);
    }
}); 
```

当我使用：

```
curl -X POST -d username=admin -d password=admin http://app.local/api/auth/login 
```

每次我的应用程序返回一个不同的会话标识符！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:02:33.163

PHP代码：

```
<?php

    require_once __DIR__ . '/../vendor/autoload.php';

    use Symfony\Component\HttpFoundation\Response;
    use Symfony\Component\HttpFoundation\Request;

    $app = new Silex\Application();
    $app['debug'] = true;

    $app->register(new Silex\Provider\SessionServiceProvider());

    $app->before(function ($request) {
        $request->getSession()->start();
    });

    $app->post('/api/auth/login', function (Request $request) use ($app) {
        if ($request->get('username') === 'admin' && $request->get('password') === 'admin') {
            return $app->json(array('sessionId' => $app['session']->getId()));
        } else {
            $error = array('message' => 'Authentication failed');
            return $app->json($error, 404);
        }
    });

    $app->run();

?> 
```

卷曲命令：

```
curl -X POST -d username=admin -d password=admin http://app.local/api/auth/login --cookie-jar ./cookie --cookie ./cookie 
```

上述命令将在当前工作目录中写入一个“cookie”文件。请检查目录是否可写或用户具有正确的权限。

# asp.net-mvc-3 - 编辑/添加表单上的 mvc3 jqgrid 只读字段

> ID：13825462
> 
> 赞同：0
> 
> 时间：2012-12-11T17:34:26.147
> 
> 标签：asp.net-mvc-3, jqgrid, readonly

我有一个使用表单编辑的 jqGrid。我希望某些字段在“编辑”模式下是只读的，而不是在“添加”模式下。我已经尝试了一些我在其他地方找到的建议来解决这个问题（见下面的例子），但仍然无法让它工作！

如果有人可以提供帮助，我将不胜感激！

在下面的网格中，我试图在“编辑”模式下将“登录名”设置为只读，而不是在“添加”模式下。

```
$('#jpgCustomers').jqGrid({
     url: '@Url.Action("Customers")',
     datatype: 'json',
     mtype: 'POST',
     colNames: ['Name', 'FullName', 'Description'],
     colModel: [
                { name: 'LogonName', index: 'LogonName', align: 'left', width:80, editable:true, search:true, stype:'text',editrules:{required:true}},
                { name: 'FullName', index: 'FullName', align: 'left',width: 200, editable:true, search:true, stype:'text',editrules:{required:true}},
                { name: 'Description', index: 'Description', align: 'left', width: 300, editable:true, search:true, stype:'text'}
               ]

    //..

$("#jpgCustomers").jqGrid('navGrid', '#jpgpCustomers', 
        { add: true, del: true, edit: true, search: false},
        //edit form
        { width: '500', 
          editCaption: 'Edit Customer',
          url: '@Url.Action("EditCustomer")', 
          reloadAfterSubmit: true, 
          closeAfterEdit: true,
          //always start from a new form
          recreateForm: true,
          beforeShowForm: function(form) {
                  //center the edit dialog on screen
                  var dlgDiv = $("#editmod" + jpgCustomers.id);
                  CenterDialog(dlgDiv);
                  $("#jpgCustomers").jqGrid('setColProp','LogonName',{editoptions: {readonly:'readonly'}});
              }
        },
        //Add form
        { width: '500', 
          addCaption: 'Add Customer',
          url: '@Url.Action("CreateCustomer")', 
          reloadAfterSubmit: true, 
          closeAfterEdit: true,
          beforeShowForm: function(form) {
                  var dlgDiv = $("#editmod" + jpgCustomers.id);
                  CenterDialog(dlgDiv);
                  $("#jpgCustomers").jqGrid('setColProp','LogonName',{editoptions: {readonly:false}});
           }
        },
        //Delete form
        { width: '250', 
          url: '@Url.Action("DeleteCustomer")',
          beforeShowForm: function(form) {
          //center the delete dialog on screen
          var dlgDiv = $("#delmod" + jpgCustomers.id);
          CenterDialog(dlgDiv);
          //change the Delete confirmation message
          var sel_id = $("#jpgCustomers").jqGrid('getGridParam','selrow')
          $("td.delmsg", form).html("Delete User <b>" + $("#jpgCustomers").jqGrid('getCell', sel_id,'LogonName') + "</b>?");
        }
     }
 ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:17:04.773

好的，经过数小时的测试和重新测试，并尝试了各种方法，我偶然发现了解决方案！

我对上面的代码进行了一些更改，并不确定哪个是问题的最重要答案，但这是我所做的：

**1)**将对“SetColProp”的调用从*beforeShowForm*移到*beforeInitData*函数中

**2）**将 beforeInitData 放在 beforeShowForm 之前 - 我不认为这实际上有任何区别，但它有效，所以我把它留在那里！

**3）**在添加表单部分包含一个*recreateForm:true*（我已经在编辑部分有一个）

我认为第 1 点和第 3 点有所不同，但我不能；不告诉你为什么！

**继承自 The Question**的工作 navGrid 部分：****

 **```
$("#jpgCustomers").jqGrid('navGrid', '#jpgpCustomers', 
    { add: true, del: true, edit: true, search: false},
    //edit form
    { width: '500', 
      editCaption: 'Edit Customer',
      url: '@Url.Action("EditCustomer")', 
      reloadAfterSubmit: true, 
      closeAfterEdit: true,
      //always start from a new form
      recreateForm: true,
      beforeInitData: function(form) {
          $("#jpgCustomers").jqGrid('setColProp','LogonName',{editoptions: {readonly:'readonly'}});
      },
      beforeShowForm: function(form) {
              //center the edit dialog on screen
              var dlgDiv = $("#editmod" + jpgCustomers.id);
              CenterDialog(dlgDiv);
      }
    },
    //Add form
    { width: '500', 
      addCaption: 'Add Customer',
      url: '@Url.Action("CreateCustomer")', 
      reloadAfterSubmit: true, 
      closeAfterEdit: true,
      recreateForm: true,
      beforeInitData: function(form) {
           $("#jpgCustomers").jqGrid('setColProp','LogonName',{editoptions: {readonly:false}});
      },
      beforeShowForm: function(form) {
           var dlgDiv = $("#editmod" + jpgCustomers.id);
           CenterDialog(dlgDiv);
      }
    },
    //Delete form
    { width: '250', 
      url: '@Url.Action("DeleteCustomer")',
      beforeShowForm: function(form) {
      //center the delete dialog on screen
      var dlgDiv = $("#delmod" + jpgCustomers.id);
      CenterDialog(dlgDiv);
      //change the Delete confirmation message
      var sel_id = $("#jpgCustomers").jqGrid('getGridParam','selrow')
      $("td.delmsg", form).html("Delete User <b>" + $("#jpgCustomers").jqGrid('getCell', sel_id,'LogonName') + "</b>?");
    }
 } 
```

);**

# android - 选择器将更改应用于所有视图而不是单击视图

> ID：13825463
> 
> 赞同：2
> 
> 时间：2012-12-11T17:34:28.700
> 
> 标签：android, android-custom-view, viewgroup

我正在为 Android 的拖放网格中的视图添加 onClick 突出显示。该项目位于[GitHub 上](https://github.com/lkorth/PagedDragDropGrid)（开发分支包含使用选择器的代码）。

当我将 onClick 选择器设置为视图的背景时，我遇到的问题是在适配器中，当我单击视图时，选择器不会更改该视图的背景，而是更改所有视图的背景。

我很确定这是 ViewGroup 中 onTouch 处理点击的方式（如下）。我不确定我是否应该以不同的方式返回 true/false 或以不同的方式触发 onClick 侦听器以防止突出显示所有视图。

任何想法/帮助表示赞赏，谢谢。

```
@Override
public boolean onTouch(View v, MotionEvent event) {
    int action = event.getAction();
    switch (action & MotionEvent.ACTION_MASK) {
    case MotionEvent.ACTION_DOWN:
        touchDown(event);
        break;
    case MotionEvent.ACTION_MOVE:
        touchMove(event);
        break;
    case MotionEvent.ACTION_UP:
        touchUp(event);
        break;
    }
    if (aViewIsDragged())
        return true;
    return false;
}

private void touchUp(MotionEvent event) {
    if(dragged == -1) {
        if(onClickListener != null) {
            View clickedView = getChildAt(getTargetAtCoor((int) event.getX(), (int) event.getY()));
            if(clickedView != null)
                onClickListener.onClick(clickedView);
        }
    } else {
        manageChildrenReordering();
        hideDeleteView();
        cancelEdgeTimer();

        movingView = false;
        dragged = -1;
        lastTarget = -1;
        container.enableScroll();
        cancelAnimations();
    }
} 
```

编辑：查看 ViewGroup 文档[android:addStatesFromChildren](http://developer.android.com/reference/android/view/ViewGroup.html#attr_android%3aaddStatesFromChildren)听起来像我正在寻找的东西，但它似乎没有任何效果。

> 机器人：addStatesFromChildren
> 
> 设置此 ViewGroup 的可绘制状态是否还包括其子级的可绘制状态。例如，这用于使一个组在其子 EditText 或按钮获得焦点时显示为焦点。
> 
> 必须是布尔值，“真”或“假”。
> 
> 这也可能是对包含此类型值的资源（形式为“@[package:]type:name”）或主题属性（形式为“?[package:][type:]name”）的引用.
> 
> 这对应于全局属性资源符号 addStatesFromChildren。

**更新**

我找到了解决这个问题的方法。拉取请求在[这里](https://github.com/mrKlar/PagedDragDropGrid/pull/12)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T16:51:24.113

**编辑**

添加`layout.setClickable(true);`到视图函数（在第 133 行和第 156 行之间）以使每个项目都可点击。这是他们拥有自己的可选择状态所必需的。没有它，网格将接收触摸，并且该状态将传递给每个孩子。这会破坏您的 onTouch 功能，但这将是一个单独的问题。

如果您不想更改 onTouch 的功能，您可以手动更改不同触摸功能中所选项目的背景，而不是使用选择器

* * *

错过了重点的原文：

*也许我遗漏了一些东西，但我认为您可以从 onTouch 传递视图“v”并将其用作 clickedView，而不是试图根据位置确定它是哪个视图。*

# java - java.util.InvalidPropertiesFormatException：SAXParseException

> ID：13825464
> 
> 赞同：2
> 
> 时间：2012-12-11T17:34:29.380
> 
> 标签：java, xml, qpid

我正在尝试将 Apache Qpid 实现到我们的架构中，但在读取属性文件时遇到了问题。

> 属性 props = new Properties(); props.loadFromXML(this.getClass().getResourceAsStream("hello.properties"));

loadfromxml 给我一个错误，这是堆栈跟踪：

```
> java.util.InvalidPropertiesFormatException:
> org.xml.sax.SAXParseException: Content is not allowed in prolog.  at
> java.util.XMLUtils.load(XMLUtils.java:56)     at
> java.util.Properties.loadFromXML(Properties.java:852)     at
> com.irad.message.system.HelloTest.runTest(HelloTest.java:29)  at
> com.irad.message.system.HelloTest.main(HelloTest.java:23) Caused by:
> org.xml.sax.SAXParseException: Content is not allowed in prolog.  at
> com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:195)
>   at
> com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.fatalError(ErrorHandlerWrapper.java:174)
>   at
> com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:388)
>   at
> com.sun.org.apache.xerces.internal.impl.XMLScanner.reportFatalError(XMLScanner.java:1427)
>   at
> com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:1036)
>   at
> com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:647)
>   at
> com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
>   at
> com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
>   at
> com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
>   at
> com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
>   at
> com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:232)
>   at
> com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:284)
>   at java.util.XMLUtils.getLoadingDoc(XMLUtils.java:82)   at
> java.util.XMLUtils.load(XMLUtils.java:54)     ... 3 more 
```

这是 hello.properties 文件：

```
java.naming.factory.initial=org.apache.qpid.jndi.PropertiesFileInitialContextFactory
connectionfactory.qpidConnectionfactory= amqp://guest:guest@clientid/test?brokerlist='tcp://localhost:5672'
destination.topicExchange = amq.topic 
```

我究竟做错了什么？我从 Qpid 的文档页面复制了代码片段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T17:41:56.243

您正在使用 Properties.loadFromXML 将 TEXT 文件加载为 XML，它告诉您您提供的 XML 文件格式错误。

下次当您遇到此类错误时，请在 Google 上搜索“java loadfromxml”。它将带您到 javadocs 手册，了解如何使用它，您会看到您输入的参数不正确：

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Properties.html#loadFromXML%28java.io.InputStream%29](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Properties.html#loadFromXML%28java.io.InputStream%29)

上面的链接说：

XML 文档必须具有以下 DOCTYPE 声明：

```
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd"> 
```

将您的属性文件更改为正确的格式，然后您就可以找出下一个错误。

# asp.net-mvc-3 - ASP.NET MVC 3 将 URL 重定向/路由回子域

> ID：13825468
> 
> 赞同：2
> 
> 时间：2012-12-11T17:34:41.260
> 
> 标签：asp.net-mvc-3, iis-7, asp.net-mvc-routing, url-routing

我在子域 (www.website.com/foobar) 上有一个站点，它会拉取默认页面视图。由于 MVC 应用程序的性质，此默认页面视图也可以通过默认内容 (www.website.com/foobar/{controller}) 和 (www.website.com/foobar) 的“控制器/操作”URL /{控制器}/{动作}）。

为了分析和跟踪，除了原始短网址 (www.website.com/foobar) 之外，我希望这些其他网址中的任何一个重定向回这个较短的网址。

所以... www.website.com/foobar/{controller}，当输入或点击书签链接时，应该重定向到 www.website.com/foobar

我尝试过使用路由，但实际上无法更改 URL 本身。我不确定是否可以通过映射进行更改。

编辑：有人在 IIS7 中使用过 HTTP 重定向吗？我可以从顶层重定向，但似乎无法让重定向在任何视图上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T22:12:48.637

通过使用 HTTP Redirect 模块，我能够解决 IIS 7 中的问题。因为它是一个 MVC 应用程序，所以在视图上设置重定向有点棘手，但这是可能的。我使用了本教程：[在 IIS7 中创建重定向](http://ajrawson.com/creating-a-redirect-in-iis7)

编辑：虽然上述解决方案有效，但它往往是不可预测的。我最终通过读取用户在 Quote 控制器的 Index 操作中输入的 URL 来解决它，然后如果我正在寻找的关键字在 URL 中，则重定向。只是 Index 操作开始处的一个简单 if 语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T19:47:04.467

我认为您不能单独使用路由来重定向域。我有一个类似的问题，经过几天的搜索和询问，我最终使用重定向本身来解决这个问题。希望这可以帮助。

# bash - 如何让 LaTeX 像格式化一样显示“ls”的输出？

> ID：13825469
> 
> 赞同：0
> 
> 时间：2012-12-11T17:34:42.480
> 
> 标签：bash, shell, latex, ls

我正在尝试编写一个 shellscript，它使用 LaTeX、ls 和其他一些命令来导出给定目录中的文件和目录列表，以及给定目录中所有 bash 脚本的完整打印输出。到目前为止，这是我的脚本：

```
#!/bin/bash

# Script to export directory with pdflatex

# Generate .tex file
# Directory Listing
echo "\documentclass[11pt,a4paper,oneside]{article}" > tmp.tex
echo "\usepackage{fullpage}" >> tmp.tex
echo "\begin{document}" >> tmp.tex
echo "\section{Listing}" >> tmp.tex
ls $1 >> tmp.tex

echo "\end{document}" >> tmp.tex

# ShellScript printout

# Generate .pdf file
pdflatex tmp.tex

#Cleanup
rm tmp.tex 
```

然而，问题是“ls”命令确实在终端中起作用，但是当它被输入到 LaTeX 时，它被打印为一个空格分隔的行而不是一个列表。我该如何解决？

关于shellscript打印输出；如果您对如何打印这些有任何想法..

非常感谢，杰拉德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T17:38:47.543

```
echo '\begin{verbatim}' >> tmp.tex
ls "$1" >> tmp.tex
echo '\end{verbatim}' >> tmp.tex 
```

`\end{verbatim}`除非列出的目录中有一个名为 ' ' 的文件（是的，这是可能的），否则应该做你想做的事。如果这是您需要担心的事情，您需要两个文件和`\VerbatimInput`来自[fancyvrb](http://www.ctan.org/pkg/fancyvrb)附加包的命令。

# spree - 大礼包安装未初始化常量 ActiveSupport::CoreExtensions

> ID：13825472
> 
> 赞同：0
> 
> 时间：2012-12-11T17:34:54.820
> 
> 标签：spree

我正在尝试按照他们的指南安装 Spree：http: [//guides.spreecommerce.com/getting_started.html](http://guides.spreecommerce.com/getting_started.html)

我遇到了一个奇怪的问题：

```
 /usr/lib/ruby/vendor_ruby/active_support/inflector.rb:407: uninitialized constant ActiveSupport::CoreExtensions (NameError)
    from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
    from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `require'
    from /usr/lib/ruby/vendor_ruby/active_support/core_ext/string/inflections.rb:1
    from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
    from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `require'
    from /usr/lib/ruby/vendor_ruby/active_support/core_ext/string.rb:3
    from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
    from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `require'
    from /var/lib/gems/1.8/gems/spree_cmd-1.2.2/lib/spree_cmd/installer.rb:2
    from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
    from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `require'
    from /var/lib/gems/1.8/gems/spree_cmd-1.2.2/lib/spree_cmd.rb:13
    from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:55:in `gem_original_require'
    from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:55:in `require'
    from /var/lib/gems/1.8/gems/spree_cmd-1.2.2/bin/spree:2
    from /usr/local/bin/spree:19: 
```

我正在使用 Ubuntu Server 12.04 和 Rails 3.2.9。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:33:01.060

I would recommend uninstalling the version of Ruby that was installed using apt-get, and instead install it with [this guide](http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:10:25.450

正如@RyanBigg 建议的那样，这是rails 的版本问题。解决方案是卸载 APT 的 rails 版本并通过 gem 安装它，同时专注于设置[spree 安装指南](http://guides.spreecommerce.com/getting_started.html)中提到的**确切版本**：

```
sudo aptitude remove
gem install rails -v 3.2.3 
```

与您可能认为 APT 版本“太新”（3.2.9）相反。

# android - 唤醒屏幕后Android游戏崩溃

> ID：13825474
> 
> 赞同：0
> 
> 时间：2012-12-11T17:35:00.140
> 
> 标签：android, opengl-es, android-activity, lifecycle, wakeup

我在 Android 上玩游戏时遇到问题：当我在游戏活动中按电源按钮停用屏幕然后唤醒手机时，我黑屏大约一分钟，然后应用程序崩溃。当我通过按主页按钮暂停活动然后返回游戏时，一切看起来都很好。

这是我在醒来后发现的关于我的应用程序的日志中唯一的入口：

```
12-11 18:27:18.187: WARN/InputConnectionWrapper.ICC(19863): Timed out waiting on IInputContextCallback
12-11 18:27:18.442: WARN/WindowManager(19653): App freeze timeout expired.
12-11 18:27:18.442: WARN/WindowManager(19653): Force clearing freeze: AppWindowToken{40f140c8 token=Token{412d25e8 ActivityRecord{40eb01a0 pl.priv.robertszuba/pl.priv.mallwar.game.GameActivity}}}
12-11 18:27:20.212: WARN/InputConnectionWrapper.ICC(19863): Timed out waiting on IInputContextCallback
12-11 18:27:20.512: WARN/ActivityManager(19653): Activity idle timeout for ActivityRecord{40eb01a0 pl.priv.robertszuba/pl.priv.mallwar.game.GameActivity}
12-11 18:27:20.737: DEBUG/dalvikvm(19653): GC_EXPLICIT freed 1532K, 46% free 9743K/17735K, paused 13ms+7ms
12-11 18:27:22.237: WARN/InputConnectionWrapper.ICC(19863): Timed out waiting on IInputContextCallback
12-11 18:27:24.262: WARN/InputConnectionWrapper.ICC(19863): Timed out waiting on IInputContextCallback
12-11 18:27:26.337: WARN/InputConnectionWrapper.ICC(19863): Timed out waiting on IInputContextCallback
12-11 18:27:28.457: WARN/InputConnectionWrapper.ICC(19863): Timed out waiting on IInputContextCallback
12-11 18:27:54.107: DEBUG/dalvikvm(20893): GC_CONCURRENT freed 1788K, 32% free 6141K/8967K, paused 3ms+5ms
12-11 18:28:06.597: DEBUG/dalvikvm(19653): GC_CONCURRENT freed 1832K, 45% free 9805K/17735K, paused 3ms+5ms 
```

当我尝试调试我的应用程序时，我看到它已正确暂停，并且在唤醒之后`onResume`被调用并且一切`onResume`都做得很好，但是没有`onSurffaceCreate`调用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:54:11.207

当应用程序暂停时，OpenGL 上下文在恢复时无效。您需要再次将数据、对象和纹理上传到驱动程序内存中。我在每次 onPause/onResume 时卸载和重新加载数据，这样更安全。

此链接包含更多信息：http: [//developer.android.com/reference/android/opengl/GLSurfaceView.html](http://developer.android.com/reference/android/opengl/GLSurfaceView.html)

> 当活动暂停和恢复时，必须通知 GLSurfaceView。GLSurfaceView 客户端需要在活动暂停时调用 onPause() 并在活动恢复时调用 onResume()。这些调用允许 GLSurfaceView 暂停和恢复渲染线程，还允许 GLSurfaceView 释放和重新创建 OpenGL 显示。

查看此 repo 以获取有关如何处理它的一些提示：[https](https://github.com/TraxNet/ShadingZen) ://github.com/TraxNet/ShadingZen （所有引擎资产都从 Resource 类扩展，并包含在应用程序暂停/恢复时加载和卸载数据的逻辑）。

# asp.net - 将构建/调试配置设置为在“任何 CPU”上运行而不是仅在 x86 上运行是个好主意吗？

> ID：13825476
> 
> 赞同：1
> 
> 时间：2012-12-11T17:35:05.833
> 
> 标签：asp.net, build, x86, configurationmanager, anycpu

包含我的 MVC 应用程序的解决方案有近 20 个不同的项目（其中一个是 MVC，少数是 WCF 服务应用程序，其余的是类库。

它们都可以工作，并且构建良好..但问题是他们在构建时会发出与平台相关的警告。我在配置管理器中检查了其中一些设置为“x86”平台，其中一些设置为“任何 CPU”，我觉得因此收到了警告。

作为开发人员，为了支持跨平台，我想我需要将这个解决方案下的所有项目都设置为以“AnyCPU”为目标。

我想知道这是否是更安全的方法？或者在部署过程中是否涉及任何风险？

对此的任何输入，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:42:16.680

AnyCPU 限制最少，应该没问题。x86 将限制为 32 位进程，并要求在 64 位平台上以 WOW64 模式运行。x64 会将其限制为 64 位。AnyCPU 创建可以在当前加载的进程（无论是 32 位还是 64 位）中运行的 DLL。除非您有某种限制或优化要求您针对特定平台，否则这应该是一个选项。

# ms-query - MS QUERY 语法修正

> ID：13825480
> 
> 赞同：-3
> 
> 时间：2012-12-11T17:35:22.133
> 
> 标签：ms-query

目前我正在为我运行这个查询

```
SELECT `Sheet1$`.ACCT_CODE, `Sheet1$`.ACCTG_DATE, `Sheet1$`.AGENT_NO, `Sheet1$`.BAL_BOOK_CODE, `Sheet1$`.JRNL_ID_NO, `Sheet1$`.PRODUCT_CODE, `Sheet1$`.SOURCE_SYSTEM_ID, `Sheet1$`.`SUM(DR_CR_AMOUNT)`
FROM `Sheet1$` `Sheet1$`
WHERE (`Sheet1$`.BAL_BOOK_CODE='5092') AND (`Sheet1$`.ACCT_CODE Not Like '%H%') AND (`Sheet1$`.AGENT_NO='943776') OR (`Sheet1$`.BAL_BOOK_CODE='509A') AND (`Sheet1$`.ACCT_CODE Not Like '%H%') AND (`Sheet1$`.AGENT_NO='943776')
ORDER BY `Sheet1$`.ACCT_CODE 
```

该查询给出的结果限于 AGENT_NO='943776'

而我想要显示的结果

1.  ACCT_CODE 不像 '%H%' 和
2.  如果 AGENT_NO='943776' 那么 BAL_BOOK_CODE='509A' 或 BAL_BOOK_CODE='5092'
3.  显示所有其他 AGENT_NO

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:36:22.917

选择`Sheet1$`.ACCTG_DATE、`Sheet1$`.JRNL_ID_NO、`Sheet1$`.ACCT_CODE、`Sheet1$`.SOURCE_SYSTEM_ID、`Sheet1$`.AGENT_NO、.PRODUCT_CODE `Sheet1$`、`Sheet1$`.BAL_BOOK_CODE、. 从。 WHERE ( .ACCT_CODE 不像' **__H** ') AND ( .AGENT_NO<>'943776')`Sheet1$``SUM(DR_CR_AMOUNT)``C:\Documents and Settings\Amit Joshi\Desktop\Book1.xlsx``Sheet1$` `Sheet1$``Sheet1$`**`Sheet1$`**

 **联合所有

选择`Sheet1$`.ACCTG_DATE、`Sheet1$`.JRNL_ID_NO、`Sheet1$`.ACCT_CODE、`Sheet1$`.SOURCE_SYSTEM_ID、`Sheet1$`.AGENT_NO、.PRODUCT_CODE `Sheet1$`、`Sheet1$`.BAL_BOOK_CODE、. 从。 WHERE ( .BAL_BOOK_CODE='5092') AND ( .AGENT_NO='943776') OR ( .BAL_BOOK_CODE='509A') AND ( .AGENT_NO='943776')`Sheet1$``SUM(DR_CR_AMOUNT)``C:\Documents and Settings\Amit Joshi\Desktop\Book1.xlsx``Sheet1$` `Sheet1$``Sheet1$``Sheet1$``Sheet1$``Sheet1$`**

# c# - 如何在 Windows 应用商店应用程序中使用 SQLite 过滤查询结果？

> ID：13825485
> 
> 赞同：1
> 
> 时间：2012-12-11T17:35:36.813
> 
> 标签：c#, sqlite, windows-8, windows-store-apps

我只想检索查询的前三个结果并将它们显示在 ListView 中，但是如何过滤我的结果？

这是我的代码：

```
var dbpath = Path.Combine(Windows.ApplicationModel.Package.Current.InstalledLocation.Path, "guessndraw.db");
using (var db = new SQLite.SQLiteConnection(dbpath))
{
    ListaParole.ItemsSource = db.Table<wordlist_it>();
} 
```

wordlist_it 类：

```
public class wordlist_it
{
    public string word { get; set; }

    public override string ToString()
    {
        return string.Format("{0}",word);
    }
} 
```

这样，它给了我表的所有记录，但我只想要前 3 条记录。你能解释一下如何使用 c# 和 sqlite 在 Windows 商店应用程序中设置查询吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:17:09.900

这是凭记忆，但您可以尝试：

```
ListaParole.ItemsSource = db.Table<wordlist_it>().Take(3); 
```

# php - Symfony 添加捆绑包并让我的“CoreBundle”实现它

> ID：13825486
> 
> 赞同：0
> 
> 时间：2012-12-11T17:35:39.217
> 
> 标签：php, symfony, symfony-2.1

我目前有`Test\CoreBundle`打算包含基本功能以使我的网站上线（例如启动页面和基本管理面板）。

我想要做的是能够加入`Test\UserBundle`并`CoreBundle`意识到我已经添加了一个新包，因此它可以将它包含在管理员面板中。我想我也许可以做类似的事情：

在我的`Test\UserBundle`我添加了一个 config.yml 文件，例如：

```
include_admin:
    directory: "users"
    name: "User Management" 
```

（然后我会将它添加到 AppKernel.php 中）

在我的管理面板索引中：

```
$bundles = $this->container->getParameter('kernel.bundles');
foreach($bundles as $bundle){
  if(strpos($bundle,'Test') !== false){
    // access the config.yml file somehow for this bundle?
  }
} 
```

在我看来，我可以做这样的事情：

```
<a href="/admin/{{ directory }}">{{ name }}</a> 
```

由于对科幻一无所知，我不知道我是否会完全草率地处理这件事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T23:46:20.290

您可以在 CoreBundle 中创建一个侦听器来侦听其他 Bundle 的“参与”。我在下面做了类似的事情，为我希望的任何捆绑包构建基于菜单项的导航。您可以修改下面的事件和事件侦听器以传递您需要的任何数据。

基本上，您在 CoreBundle 中创建一个事件和事件侦听器，并让彼此独立的捆绑包在 CoreBundle 调度事件时注册 EventListener。

例如，在您的 CoreBundle 中，创建一个事件：

```
use Symfony\Component\EventDispatcher\Event;

class BundleEvent extends Event
{
    const EVENT = "core.bundle.find_bundles";

    private $bundles;

    public function addBundle($bundle)
    { 
         $this->bundles[] = $bundle;
    }

    public function getBundles()
    {
         return $this->bundles;
    }
} 
```

然后在你的 CoreBundle 中创建一个事件监听器：

```
use Acme\CoreBundle\BundleEvent;

class BundleListener
{ 
    private $bundle_path;

    public function __construct($bundle_path)
    { 
         $this->bundle_path= $bundle_path;
    }

    public function addBundle(BundleEvent $event)
    {
         $event->addBundle($this->bundle_path);
    }
} 
```

然后，在您希望 CoreBundle 了解的每个 Bundle 的 services.xml 中，使用以下命令：

```
<service id="acme.user.bundle_listener" class="Acme\CoreBundle\BundleListener">
    <argument>Acme\UserBundle</argument>
    <tag name="kernel.event_listener" event="core.bundle.find_bundles" method="addBundle" />
</service> 
```

最后，在您的 CoreBundle（或您需要获取此列表的其他任何地方）中，当您想要获取您正在寻找的所有捆绑包时，通过事件调度程序运行事件：

```
$bundles = $this->container->get('event_dispatcher')->dispatch(BundleEvent::EVENT, new BundleEvent())->getBundles();

foreach($bundles as $bundle_path) {
    // .. do something
} 
```

如果其他人有更简单的方法来实现这一点，我很想知道一种更简单/更清洁的方法！

# python - python float相加后小数点后有冒号

> ID：13825487
> 
> 赞同：4
> 
> 时间：2012-12-11T17:35:45.970
> 
> 标签：python, floating, decimal-point, colon

`-2901.0, -200.0`在我的 python 程序中，我在某个过程中得到了两个浮点数。当我尝试直接添加它们时，我得到了`-3100.:`（如果我将其转换为`str`，它将是`"-3100.:"`）

Python 没有说程序中有任何错误。但是结果总是在小数点后带有冒号并且不正确（我期待`-3101.0`）。

我无法通过简单地输入`-2901.0-200.0`python 命令行来重现它。但是，如果我继续添加其他非零值，它会通过 ( `-3100.:-1`，它给出`-3102.0`)。但我希望正确输出/解释`-3100.:`

我在 Python2.7 32 位上运行。我已经安装了 numpy、scipy 和其他一些软件包。有人知道这里有什么问题吗？当我期望一个数字时，为什么我得到一个冒号？

*   Windows 服务器 2008 64 位。
*   `sys.version`：2.7.3（默认，2012 年 4 月 10 日，23:31:26）
*   MSC v.1500 32 位（英特尔）

非常感谢。

# c# - 从 web.config 获取 URL

> ID：13825489
> 
> 赞同：4
> 
> 时间：2012-12-11T17:35:54.460
> 
> 标签：c#, javascript, asp.net

我正在尝试将 URL 存储在配置文件中，但是当我从文件中检索 URL 时它不起作用

下面是我的代码

在 web.config 中，我有

```
 <add key="URL" value="/NG/Viewer/ViewerSummary.aspx"/> 
```

在我的 aspx.cs 页面中，我有以下代码

```
string url = ConfigurationManager.AppSettings["URL"];

string strScript = "window.open(url?QueryID=" + QueryId + "', '_blank','height=650, center:yes, width=800, status=no, resizable= yes, menubar=no, toolbar=no, location=yes, scrollbars=yes, status=no');";
    ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "strScript", strScript, true); 
```

如果我编写上面的代码，窗口不会打开，但是如果我在下面的代码中这样做，窗口就会打开。

```
string strScript = "window.open('/NG/Viewer/ViewerSummary.aspx?QueryID=" + QueryId + "', '_blank','height=650, center:yes, width=800, status=no, resizable= yes, menubar=no, toolbar=no, location=yes, scrollbars=yes, status=no');";
    ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "strScript", strScript, true); 
```

如何通过将值放入配置文件中来打开窗口？
任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T17:38:25.060

可能是您粘贴的代码有几个错误。第一个错误是您在对 window.open 的调用中缺少开头的单引号。另一个错误是您实际上并未使用该`url`变量。

尝试这个：

```
string strScript = "window.open('" + url + "?QueryID=" + QueryId + "', '_blank','height=650, center:yes, width=800, status=no, resizable= yes, menubar=no, toolbar=no, location=yes, scrollbars=yes, status=no');"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:39:32.993

有关使用 URLEncode 方法的信息，请参阅下面列出的文章。

[http://msdn.microsoft.com/en-us/library/zttxte6w.aspx](http://msdn.microsoft.com/en-us/library/zttxte6w.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T17:38:30.657

```
string strScript = "window.open('" + url + "?QueryID=" + QueryId + "', '_blank','height=650, center:yes, width=800, status=no, resizable= yes, menubar=no, toolbar=no, location=yes, scrollbars=yes, status=no');";
ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "strScript", strScript, true); 
```

# content-management-system - 我怎样才能将我的模板上传到concrete5？

> ID：13825493
> 
> 赞同：-1
> 
> 时间：2012-12-11T17:36:07.650
> 
> 标签：content-management-system, concrete5

我将 c5 用于我的成员的社交网络。对于首页，我有自己的模板，其中涉及我所有的 css/images/javascript 文件。如何上传模板并更改主题。我只想使用我的主题。如何连接所有这些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T04:41:48.123

你为什么不创建一个主题。在您的 root/themes/ 中，创建一个文件夹并将其命名为您想要的任何名称，只要它与其他主题之一的名称不同即可。在该文件夹中，创建一个 default.php 和 view.php，以及一个“元素”文件夹，您可以在其中存储主题的 header.php 和 footer.php，其示例可以在您的 root/concrete/themes/ 中找到绿色的沙拉。

您可以将 greensalad 文件夹从 root/concrete/themes/ 复制到 root/themes/，然后将该文件夹的名称更改为您的自定义主题的唯一名称——例如 root/themes/my_custom_theme。之后，根据需要修改新文件夹的内容。这就是我要做的。

一旦你创建了一个包含所需的 default.php 和 view.php 以及 header.php 和 footer.php 的主题，你可以在 root/themes/my_custom_theme 中创建文件夹来存储你的 root/themes/my_custom_theme/ js、root/themes/my_custom_theme/css、root/themes/my_custom_theme/images 等。

最后，您必须安装新主题。您可以在 yoursite.com/dashboard/pages/themes/ 的仪表板上执行此操作，或者，如果您没有启用漂亮的 url，请访问 yoursite.com/index.php/dashboard/pages/themes/。

之后，您应该在 yoursite.com/dashboard/pages/themes/ 的“已安装主题”下看到您的自定义主题。

你可以从你的 root/themes/my_custom_theme/js/ 获取你的 .js 文件，并从你的 root/themes/my_custom_theme/css/ 获取你的 .css 文件，方法是在自定义主题的 header.php、页脚中包含以下内容。 php 或 default.php。

```
<link rel="stylesheet" href="<?php  echo $this->getThemePath(); ?>/css/my_custom_style.css" />
<script type="text/javascript" src="<?php  echo $this->getThemePath(); ?>/js/my_custom_script.js"></script> 
```

# c# - 实体框架 - 打印 EntityValidationErrors 以记录

> ID：13825495
> 
> 赞同：19
> 
> 时间：2012-12-11T17:36:14.047
> 
> 标签：c#, entity-framework, logging, entity-framework-4

打印日志时出现以下错误

```
Message: Validation failed for one or more entities. See 'EntityValidationErrors'  
property for more details.; Stack Trace:    at 
System.Data.Entity.Internal.InternalContext.SaveChanges() 
```

EntityValidationErrors 对象包含不同节点中的完整详细错误。打印它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-09-11T07:59:07.787

更简洁的语法：

```
catch (System.Data.Entity.Validation.DbEntityValidationException ex)
{
     Logger.WriteError("{0}{1}Validation errors:{1}{2}", ex, Environment.NewLine, ex.EntityValidationErrors.Select(e => string.Join(Environment.NewLine, e.ValidationErrors.Select(v => string.Format("{0} - {1}", v.PropertyName, v.ErrorMessage)))));
     throw;
} 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-01-24T09:39:59.517

## 以下是一些扩展方法：

```
/// <summary>
///     A DbEntityValidationException extension method that formates validation errors to string.
/// </summary>
public static string DbEntityValidationExceptionToString(this DbEntityValidationException e)
{
    var validationErrors = e.DbEntityValidationResultToString();
    var exceptionMessage = string.Format("{0}{1}Validation errors:{1}{2}", e, Environment.NewLine, validationErrors);
    return exceptionMessage;
}

/// <summary>
///     A DbEntityValidationException extension method that aggregate database entity validation results to string.
/// </summary>
public static string DbEntityValidationResultToString(this DbEntityValidationException e)
{
    return e.EntityValidationErrors
            .Select(dbEntityValidationResult => dbEntityValidationResult.DbValidationErrorsToString(dbEntityValidationResult.ValidationErrors))
            .Aggregate(string.Empty, (current, next) => string.Format("{0}{1}{2}", current, Environment.NewLine, next));
}

/// <summary>
///     A DbEntityValidationResult extension method that to strings database validation errors.
/// </summary>
public static string DbValidationErrorsToString(this DbEntityValidationResult dbEntityValidationResult, IEnumerable<DbValidationError> dbValidationErrors)
{
    var entityName = string.Format("[{0}]", dbEntityValidationResult.Entry.Entity.GetType().Name);
    const string indentation = "\t - ";
    var aggregatedValidationErrorMessages = dbValidationErrors.Select(error => string.Format("[{0} - {1}]", error.PropertyName, error.ErrorMessage))
                                           .Aggregate(string.Empty, (current, validationErrorMessage) => current + (Environment.NewLine + indentation + validationErrorMessage));
    return string.Format("{0}{1}", entityName, aggregatedValidationErrorMessages);
} 
```

**用例 1：**

```
catch(DbEntityValidationException e) {
    Logger.WriteError(e.DbEntityValidationExceptionToString());
    throw;      
} 
```

应该输出：

```
StackTrace
Validation errores:
[EntityName]
    - [Property - ErrorMessage]
    - [Property - ErrorMessage]
[EntityName2]
    - [Property - ErrorMessage]
    - [Property - ErrorMessage] 
```

**用例 2：**

```
catch(DbEntityValidationException e) {
    Logger.WriteError(e.DbEntityValidationResultToString());
    throw;      
} 
```

应该输出：

```
[EntityName]
    - [Property - ErrorMessage]
    - [Property - ErrorMessage]
[EntityName2]
    - [Property - ErrorMessage]
    - [Property - ErrorMessage] 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-11T17:40:48.220

你可以试试这样的

```
 foreach (var failure in ex.EntityValidationErrors)
    {
       string validationErrors="";

        foreach (var error in failure.ValidationErrors)
        {
           validationErrors+=error.PropertyName+"  "+error.ErrorMessage;
        }
    } 
```

# java - 从向量创建的 JButton 上的 actionListener

> ID：13825500
> 
> 赞同：2
> 
> 时间：2012-12-11T17:36:20.820
> 
> 标签：java, swing, vector, jbutton, actionlistener

我一直在网上搜索我的特定基本问题的答案，但找不到。我必须说我是编程新手，我必须为学校做这件事。我创建了一个 6/49 彩票的界面，您必须在其中单击 6 个 JButton，创建您的“幸运”号码。在我的界面 .java 中，我以这种方式创建了我的按钮：

```
JButton b;
        for (i = 1; i <= 49; i ++)
        {           
            String  s = String.valueOf(i);
            b = new JButton(s); 
            if (i % 2 == 0)            
                b.setForeground(new Color(3, 121, 184));
            else
                b.setForeground(new Color(228, 44, 44));            

         choixNumero.add(b); 
```

注意：“choixNumero”是一个 gridLayout ( 7 x 7 )

在另一个 .java 中，我正在为我的 JButton b 创建一个 actionListener，但这似乎不起作用。这是我写它的方式：

```
intProjet.b.addActionListener(new EcouteurCombinaison()); // where "intProjet" is my interface.java 
```

这是我的 EcouteurCombinaison 的代码：

```
private int []  nums;
private int    nbRestant = 6;
private class EcouteurCombinaison implements ActionListener
{
    @Override
    public void actionPerformed(ActionEvent e)
    {
        if (nbRestant > 0)
        {
            //nums[nbRestant] = indexOf(e)); //will have to find a way to get index of the button pressed
            nbRestant --;
            intProjet.valNbRestant.setText("" + nbRestant);
        }
        else
        {
            JOptionPane.showMessageDialog(null, "Vous avez choisis vos 6 numéros\n Cliquer sur Soumettre pour valider", "Information", JOptionPane.INFORMATION_MESSAGE);   
        }    
    }
} 
```

所以基本上，每次按下按钮时，我都会尝试将 JButton 的索引或值添加到向量中。然后我会将它发送到另一个 .java

我已经在我的代码中实现了其他 actionListener 并且它们工作正常（ JButton、RadioButton、JComboBox ）。我不明白为什么单击按钮时什么也没有发生。

我试图在不粘贴所有代码的情况下尽可能清楚地说明这一点。

**编辑：** ActionListener 仅适用于**最后一个**按钮（ 49 ）。我怎样才能让它听所有**b**按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:06:52.717

您不断地重新分配该`b`循环中的值。当循环完成时，最后一个`JButton`被创建的被分配给它。然后，您将一个 ActionListener 绑定到该按钮，但不绑定其他按钮。我不确定您为什么希望一次调用将`intProjet.b.addActionListener()`其添加到所有 JButton。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T20:07:34.453

`intProjet.b`指在循环中创建的*最后一个*按钮，因此结果是预期的。[相反，您可以为每个按钮提供其自己的侦听器实例，如此处](https://stackoverflow.com/a/7706684/230513)所示。

# bash - bash 脚本中出现奇怪的“语法错误：文件意外结束”

> ID：13825504
> 
> 赞同：0
> 
> 时间：2012-12-11T17:36:38.390
> 
> 标签：bash

我无法弄清楚以下脚本有什么问题。

```
#!/bin/bash 
if [ "$1" = "x" ] 
then
  echo Pushing web on sharada to origin.
else if [ "$1" = "y" ] 
then 
  echo Pulling web on sharada from origin.
else 
  echo "Usage : arg x to push or y to pull."
fi 
```

我在`xterm`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T17:46:42.883

你最后错过了关闭“fi”。`else if`构造实际上不是`elif`延续，而是新的生活`if`在前一个的`else`子句中`if`。

所以，正确格式化你应该有：

```
#!/bin/bash 
if [ "$1" = "x" ] 
then
  echo Pushing web on sharada to origin.
else 
  if [ "$1" = "y" ] 
  then 
    echo Pulling web on sharada from origin.
  else 
    echo "Usage : arg x to push or y to pull."
  fi
fi # <-- this closes the first "if" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T17:47:17.533

它应该是`elif`，而不是`else if`，如下所示：

```
if [ "$1" = "x" ] 
then
  echo Pushing web on sharada to origin.
elif [ "$1" = "y" ] 
then 
  echo Pulling web on sharada from origin.
else 
  echo "Usage : arg x to push or y to pull."
fi 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T17:46:44.773

你有两个`if`s，因此你需要两个`fi`s。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-16T06:14:07.827

问题中描述的问题已经解决。我只是想在这里分享我的经验，因为我得到的错误消息是相同的，即使原因和解决方案略有不同。

```
#!/bin/bash

echo "a"

if [ -f x.txt ]; then \
    echo "b" \
fi;

echo "c" 
```

该脚本产生了相同的错误消息，解决方案是将缺少的分号添加到`echo "b"`行尾：

```
#!/bin/bash

echo "a"

if [ -f x.txt ]; then \
    echo "b" ; \
fi;

echo "c" 
```

直接原因与原问题相同。`if`没有关闭`fi`对子。然而，原因是由于缺少分号，该`fi`行混入了前一行。`;`

# solr - Amazon Cloudsearch（或 Solr、ElasticSearch）结果内容的最佳实践？

> ID：13825505
> 
> 赞同：3
> 
> 时间：2012-12-11T17:36:39.130
> 
> 标签：solr, amazon-web-services, elasticsearch, amazon-cloudsearch

我读过最好的做法是在查询结果时只返回一个 ID，然后从数据库中填充元数据。这是真的？我担心性能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T23:14:05.653

在我看来，存储和返回尽可能少的字段几乎总是最好的——最好只返回 ID，除非您明确需要高亮等功能。

随着索引的增长，在索引中存储大量数据会对搜索性能产生负面影响。没有比没有数据加载更快的数据。此外，在您选择的主数据存储中，通过 ID 查找对象应该是一项非常便宜的操作。

最重要的是，如果您的应用程序使用 ORM 与其数据存储进行交互，那么在整个应用程序中一致地重用所有域建模的纯粹实用性将很难夸大。

直接从您的搜索引擎返回值可能很有用。但是，如果不使用搜索引擎作为主要数据存储，我需要一个*非常有*说服力的理由来通过前面的 ORM 来分割我的域逻辑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T06:44:31.900

IMO，如果您可以在单个调用中检索搜索结果和数据，与仅获取 id 并进行数据库调用以检索相同的元数据相比，将大大提高性能。
此外，Solr/ES 提供内置缓存解决方案，因此后续查询的响应速度会更快。对于 DB，您可能必须使用解决方案或其他一些选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T10:00:51.410

这一切都取决于您的具体情况。

在某些情况下，你说的可能是真的。例如，Etsy 就是这样做的（或者至少曾经这样做过），他们的理由是他们有一个非常强大的 mysql 集群，他们非常了解如何管理它，而且速度非常快，所以 Solr 只返回 id 是对他们来说足够了。

但是，您可能处于完全不同的场景中，并且调用 db 可能会比在 Solr 中存储所需的所有内容并仅点击 Solr 花费更长的时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T07:51:38.320

根据我的经验，当您突出显示或检索的字段非常大并且网络序列化/反序列化传输开销增加时，Solr 在检索结果时表现不佳。如果是这种情况，最好从数据库中异步检索这些字段。

# php - APNS 通知已正确发送，但一段时间后未收到。为什么？

> ID：13825507
> 
> 赞同：4
> 
> 时间：2012-12-11T17:36:40.643
> 
> 标签：php, objective-c, apple-push-notifications, apns-php

现在已经一周了，我正在寻找我遇到的问题的答案，但我找不到任何东西，所以我要在这里问这个问题！

我制作了一个可以向用户发送通知的 iPhone 应用程序。所以，我有一个通知服务器，用 PHP 编码，它使用 apns-php (http://code.google.com/p/apns-php/)

我的服务器可以随时发送通知，所以我有一个无限期运行的工作人员，每次它收到要发送的通知（要发送的通知在队列中）时，它都会发送通知。为了尽可能快，worker 有 10 个可以发送通知的线程。

当我启动工作人员时，我会收到我应该收到的通知。

问题是一段时间后（我不知道是在特定时间或特定数量的通知发送后......还是其他！），我没有收到任何新通知。当我查看 apns-php 的日志时，什么也没有：所有消息似乎都发送到了 APNS 服务，没有错误（apns-php 使用增强格式）。一旦我重新启动工作人员，我会再次收到通知（但只是一段时间）。

我在 stackoverflow 和 Google 上搜索过这个问题，到目前为止，我看到的唯一回复是：

*   使用的证书/配置文件有问题。我知道这不是问题，因为我在启动工作人员时会收到通知
*   我们的数据库中有一些开发设备令牌，这使得 APNS 关闭了连接。实际上，我们的数据库中可能存在一些开发设备令牌，但是当我查看 apns-php 代码时，如果连接关闭，则会打开一个新设备。所以我不明白这会如何影响在坏设备令牌之后发送的所有通知。

这个问题真的让我抓狂，因为通知对我们的服务非常重要。因此，如果有人知道这里可能存在什么问题，那真的可以挽救生命！

PS：我没有发布任何代码，因为我没有做任何具体的事情。我只是使用 apns-php 的 send() 函数来发送每个通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:12:15.920

我终于找到了问题的根源：如果在 2 小时内打开的与 APNS 的连接没有任何活动，则连接超时，APNS 将关闭连接。

我还是不明白为什么apns-php没有检测到连接关闭。但是我通过在 30 分钟不活动后每次发送通知时自动重新连接到 APNS 来解决它（我本可以选择 2 小时，但我只是想确保没有问题）。

# c# - 在 C# 中使用 SetFilePointer 使堆栈不平衡

> ID：13825511
> 
> 赞同：1
> 
> 时间：2012-12-11T17:37:07.893
> 
> 标签：c#, .net-4.0, pinvoke, dllimport, signature

好的，我在 .NET 4.0 中使用 C# 中的 SetFilePointer 函数。下面是我用来调用这个函数的 dllimports：

```
[DllImport("Kernel32.dll", SetLastError = true, CharSet = CharSet.Auto, CallingConvention = CallingConvention.Cdecl)]
static extern uint SetFilePointer([In] SafeFileHandle hFile, [In] long lDistanceToMove, [Out] out int lpDistanceToMoveHigh, [In] EMoveMethod dwMoveMethod); 
```

每当我在调试器中运行使用 SetFilePointer 函数的代码时，都会出现以下异常：

`PInvokeStackImbalance was detected Message: A call to PInvoke function 'MyDiskStuff!MyDiskStuff.HardDisk::SetFilePointer' has unbalanced the stack. This is likely because the managed PInvoke signature does not match the unmanaged target signature. Check that the calling convention and parameters of the PInvoke signature match the target unmanaged signature.`

每当我在调试器之外运行相同的代码时，我都不会得到上述异常。

下面是我用来调用 SetFilePointer 的代码：

```
public enum EMoveMethod : uint
    {
        Begin = 0,
        Current = 1,
        End = 2
    }

uint retvalUint = SetFilePointer(mySafeFileHandle, myLong, out myInt, EMoveMethod.Begin); 
```

我的 dllimport 签名有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:48:33.547

您的 P/Invoke 签名有点偏离：

这是 Win32 的定义：

```
DWORD WINAPI SetFilePointer(
  _In_         HANDLE hFile,
  _In_         LONG lDistanceToMove,
  _Inout_opt_  PLONG lpDistanceToMoveHigh,
  _In_         DWORD dwMoveMethod
); 
```

这是指定枚举的 P/Invoke：

```
[DllImport("kernel32.dll", EntryPoint="SetFilePointer")]
static extern uint SetFilePointer(
      [In] Microsoft.Win32.SafeHandles.SafeFileHandle hFile, 
      [In] int lDistanceToMove, 
      [In, Out] ref int lpDistanceToMoveHigh, 
      [In] EMoveMethod dwMoveMethod) ; 
```

编辑：哦，还有一些测试代码：

```
var text = "Here is some text to put in the test file";
File.WriteAllText(@"c:\temp\test.txt", text);
var file = File.Open(@"c:\temp\test.txt", FileMode.OpenOrCreate);
int moveDistance = 10;
int moveDistanceHighBits = 0;
uint retvalUint = SetFilePointer(file.SafeFileHandle, moveDistance, ref moveDistanceHighBits, EMoveMethod.Begin);
Debug.Assert(Encoding.ASCII.GetBytes(text)[moveDistance] == file.ReadByte()); 
```

另请注意文档：

**lDistanceToMove [in]**

有符号值的低 32 位，指定要移动文件指针的字节数。如果 lpDistanceToMoveHigh 不为 NULL，则 lpDistanceToMoveHigh 和 lDistanceToMove 形成一个 64 位有符号值，指定要移动的距离。如果 lpDistanceToMoveHigh 为 NULL，则 lDistanceToMove 是 32 位有符号值。lDistanceToMove 的正值将文件指针在文件中向前移动，负值将文件​​指针向后移动。

**lpDistanceToMoveHigh [输入，输出，可选]**

指向要移动的有符号 64 位距离的高 32 位的指针。如果不需要高位 32 位，则必须将此指针设置为 NULL。当不为 NULL 时，该参数还接收文件指针新值的高位 DWORD。有关详细信息，请参阅本主题中的备注部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:51:25.220

可能。 [pinvoke.net](http://pinvoke.net/default.aspx/kernel32/SetFilePointer.html)让 CallingConvention 默认为 StdCall（而不是您的 Cdecl 设置），并且因为 SetFilePointer 被声明为 WINAPI（即 __stdcall）。不正确的调用约定会损坏您的堆栈。

# java - Java矩形碰撞检测混淆

> ID：13825515
> 
> 赞同：4
> 
> 时间：2012-12-11T17:37:15.440
> 
> 标签：java, swing, collision-detection

我使用 Bucky 的光滑 Java 教程制作了一个简单的 2D 状态更改游戏，我修改了这个游戏，现在想在地图上设置碰撞，这样我的玩家就不能穿过地图上的房子。我想我对碰撞的工作原理有所了解：

您使用以下代码制作 2 个矩形：

```
public Rectangle getBounds() {
 return new Rectangle(x, y, width, height); 
```

}

1 代表玩家，1 代表障碍物，我将如何将其放入我的代码中，以及如何告诉 java 障碍物的矩形与玩家矩形不同？

然后在制作了 2 个矩形之后，我会设置一个 if 语句，说类似 if intersects do this...

希望在此之后，我认为它会起作用。关于游戏的更多信息，它是一个状态改变游戏，它有一些方法，比如 init、render 和 update（我在哪里放置我的矩形和 if 语句，在更新方法中？），它也是一个俯视图游戏有点像口袋妖怪，如果有帮助的话。如果您需要我的代码，请询问，我不想现在放它来过度拥挤这篇文章。

编辑1：

```
package javagame;

import org.newdawn.slick.*;
import org.newdawn.slick.state.*;

public class Play extends BasicGameState{

    Animation bucky, movingUp, movingDown, movingLeft, movingRight, movingBL, movingBR, movingFL, movingFR;
    Image worldMap;
    boolean quit = false;//gives user to quit the game
    int[] duration = {200, 200};//how long frame stays up for
    float buckyPositionX = 0;
    float buckyPositionY = 0;
    float shiftX = buckyPositionX + 320;//keeps user in the middle of the screem
    float shiftY = buckyPositionY + 160;//the numbers are half of the screen size

    public Play(int state){
    }   
    public void init(GameContainer gc, StateBasedGame sbg) throws SlickException{
          worldMap = new Image("res/world.png");
          Image[] walkUp = {new Image("res/b.png"), new Image("res/b.png")}; //these are the images to be used in the "walkUp" animation
          Image[] walkDown = {new Image("res/f.png"), new Image("res/f.png")};
          Image[] walkLeft = {new Image("res/l.png"), new Image("res/l.png")};
          Image[] walkRight = {new Image("res/r.png"), new Image("res/r.png")};
          Image[] walkBL = {new Image("res/bl.png"), new Image("res/bl.png")};
          Image[] walkBR = {new Image("res/br.png"), new Image("res/br.png")};
          Image[] walkFL = {new Image("res/fl.png"), new Image("res/fl.png")};
          Image[] walkFR = {new Image("res/fr.png"), new Image("res/fr.png")};

    movingUp = new Animation(walkUp, duration, false);
    movingDown = new Animation(walkDown, duration, false);  
    movingLeft = new Animation(walkLeft, duration, false);  
    movingRight = new Animation(walkRight, duration, false);
    movingBL = new Animation(walkBL, duration, false);
    movingBR = new Animation(walkBR, duration, false);
    movingFL = new Animation(walkFL, duration, false);
    movingFR = new Animation(walkFR, duration, false);
    bucky = movingDown;//facing screen initially on startup
    }

    public void render(GameContainer gc, StateBasedGame sbg, Graphics g) throws SlickException{
    worldMap.draw(buckyPositionX, buckyPositionY);//position 0,0
    bucky.draw(shiftX, shiftY);//makes him appear at center of map
    g.drawString("Suraj's X: "+buckyPositionX+"\nSuraj's Y: "+buckyPositionY,400,20);//tells us the position

    if(quit==true){
        g.drawString("Resume(R)", 250, 100);
        g.drawString("Main(M)", 250, 150);
        g.drawString("Quit Game(Q)", 250, 200);
        if(quit==false){
            g.clear();//wipe off everything from screen
        }
    }
    }

    public void update(GameContainer gc, StateBasedGame sbg, int delta)throws SlickException{
    Input input = gc.getInput();
    //up
    if(input.isKeyDown(Input.KEY_UP)){
        bucky = movingUp;//changes the image to his back
        buckyPositionY += 10;;//increase the Y coordinates of bucky (move him up)
        if(buckyPositionY>162){//if I reach the top 
            buckyPositionY -= 10;//stops any further movement in that direction
        }
    }

    //down
    if(input.isKeyDown(Input.KEY_DOWN)){
        bucky = movingDown;
        buckyPositionY -= 10;
        if(buckyPositionY<-600){
            buckyPositionY += 10;//basically change the direction if + make -
    }}
    //left
    if(input.isKeyDown(Input.KEY_LEFT)){
        bucky = movingLeft;
        buckyPositionX += 10;
        if(buckyPositionX>324){
            buckyPositionX -= 10;//delta * .1f
    }}
    //right
    if(input.isKeyDown(Input.KEY_RIGHT)){
        bucky = movingRight;
        buckyPositionX -= 10;
        if(buckyPositionX<-840){
            buckyPositionX += 10;
    }}

    //2 key combos start here
    if(input.isKeyDown(Input.KEY_RIGHT) && input.isKeyDown(Input.KEY_UP)){
        bucky = movingBR;
        buckyPositionX -= delta * .1f;
        if(buckyPositionX<-840){
            buckyPositionX += delta * .1f;
            if(buckyPositionY>162){
                buckyPositionY -= delta * .1f;
            }}}
    if(input.isKeyDown(Input.KEY_LEFT) && input.isKeyDown(Input.KEY_UP)){
        bucky = movingBL;
        buckyPositionX -= delta * .1f;
        if(buckyPositionX>324){
            buckyPositionX -= delta * .1f;
            if(buckyPositionY>162){
                buckyPositionY -= delta * .1f;
            }}}
    if(input.isKeyDown(Input.KEY_RIGHT) && input.isKeyDown(Input.KEY_DOWN)){
        bucky = movingFR;
        buckyPositionX -= delta * .1f;
        if(buckyPositionY<-600){
            buckyPositionY += delta * .1f;
            if(buckyPositionX<-840){
                buckyPositionX += delta * .1f;
            }}}
    if(input.isKeyDown(Input.KEY_LEFT) && input.isKeyDown(Input.KEY_DOWN)){
        bucky = movingFL;
        buckyPositionX -= delta * .1f;
        if(buckyPositionY<-600){
            buckyPositionY += delta * .1f;
            if(buckyPositionX>324){
                buckyPositionX -= delta * .1f;
            }}}

     //escape
    if(input.isKeyDown(Input.KEY_ESCAPE)){
        quit=true;
    }
    //when the menu is up
    if(quit==true){//is the menu on the screen
        if(input.isKeyDown(Input.KEY_R)){
            quit = false;//resumes the game, makes menu dissapear
        }
        if(input.isKeyDown(Input.KEY_M)){
            sbg.enterState(0);//takes you to the main menu
        }
        if(input.isKeyDown(Input.KEY_Q)){
            System.exit(0);//quits the game
        }
    }

}

    public int getID(){
        return 1;
    }
} 
```

这是我的 Play 课程，我仅有的另外 2 个课程是主课程和菜单，我无法想象在主课程或菜单课程中制作的矩形方法，所以唯一剩下的就是 Play，但我不明白如何制作到目前为止我所做的代码中有 2 个不同的矩形（一个用于玩家，另一个用于房屋）。如果您需要我的主菜和菜单课程，请告诉我。

编辑3：

我已经尝试了您所说的并制作了一个 Rectanglebase 类，并将您发布的 if sattement 放在那里但出现错误，它要求我在我的播放器类中为 getX 和 getY 制作一个方法，并且在 fornt 的公共构造函数也有错误：

```
public Rectanglebase{}//the public is saying syntax error 
```

我也像你说的那样做了一个 Home 和 Player 类，但对我需要在里面放什么有点困惑，我把它放在 Home 类下：

```
return Rectangle(100,100,100,100); 
```

但是我遇到了错误，我不确定我这样做是否正确。此外，在 x,y 位置的播放器类中，我将如何从我的播放类中为我的播放器设置浮点变量？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T20:06:02.633

这是一个*游戏循环*/*游戏逻辑*和通过方法进行*碰撞检测的示例。*`Rectangle2D#intersects(..)`

它用于`JPanel`绘制所有内容并`Rectangle2D`用于`Entity`类（这是需要绘制的任何对象，`GamePanel`这是我们绘制所有内容的 JPanel）。

该`updateGame()`方法是您可以找到碰撞检查的地方：

```
 private void updateGame() {

        if (entities.get(0).intersects(entities.get(1))) {
            System.out.println("Intersecting");
        }
         ....
    } 
```

您是*玩家 1*并使用`W`, `A`, `S`,移动`D`。当您与*Player 2*相交时， a`println()`将确认相交。

![在此处输入图像描述](../Images/cde8f5691a479fcef250aecb239503bf.png)

游戏逻辑.java：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.awt.event.ActionEvent;
import java.awt.geom.Rectangle2D;
import java.awt.image.BufferedImage;
import java.util.ArrayList;
import java.util.concurrent.atomic.AtomicBoolean;
import javax.swing.AbstractAction;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.KeyStroke;
import javax.swing.SwingUtilities;

/**
 *
 * @author David Kroukamp
 */
public class GameLogic {

    public GameLogic() {
        initComponents();
    }
    final GamePanel gp = new GamePanel(500, 500);

    private void initComponents() {

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        Entity entity1 = new Entity(100, 100, 100, 100, createWhiteImage());
        Entity entity2 = new Entity(300, 200, 100, 100, createBlackImage());

        gp.addEntity(entity1);
        gp.addEntity(entity2);//just a standing still JPanel

        setGamePanelKeyBindings(gp, entity1);

        frame.add(gp);

        frame.pack();
        frame.setVisible(true);

        //start the game loop which will repaint the screen
        runGameLoop();
    }
    //Starts a new thread and runs the game loop in it.

    public void runGameLoop() {
        Thread loop = new Thread(new Runnable() {
            @Override
            public void run() {
                gp.running.set(true);
                gp.gameLoop();
            }
        });
        loop.start();
    }

    private void setGamePanelKeyBindings(GamePanel gp, final Entity entity) {
        gp.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("D"), "D pressed");
        gp.getActionMap().put("D pressed", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                entity.RIGHT = true;
            }
        });

        gp.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("A"), "A pressed");
        gp.getActionMap().put("A pressed", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                entity.LEFT = true;
            }
        });

        gp.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("W"), "W pressed");
        gp.getActionMap().put("W pressed", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                entity.UP = true;
            }
        });

        gp.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("S"), "S pressed");
        gp.getActionMap().put("S pressed", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                entity.DOWN = true;
            }
        });
        gp.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("released D"), "D released");
        gp.getActionMap().put("D released", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                entity.RIGHT = false;
            }
        });

        gp.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("released A"), "A released");
        gp.getActionMap().put("A released", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                entity.LEFT = false;
            }
        });

        gp.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("released W"), "W released");
        gp.getActionMap().put("W released", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                entity.UP = false;
            }
        });

        gp.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("released S"), "S released");
        gp.getActionMap().put("S released", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                entity.DOWN = false;
            }
        });
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new GameLogic();
            }
        });
    }

    private BufferedImage createWhiteImage() {
        BufferedImage img = new BufferedImage(100, 100, BufferedImage.TYPE_INT_ARGB);
        Graphics2D g2 = img.createGraphics();
        g2.setColor(Color.WHITE);
        g2.fillRect(0, 0, img.getWidth(), img.getHeight());
        return img;
    }

    private BufferedImage createBlackImage() {
        BufferedImage img = new BufferedImage(100, 100, BufferedImage.TYPE_INT_ARGB);
        Graphics2D g2 = img.createGraphics();
        g2.setColor(Color.BLACK);
        g2.fillRect(0, 0, img.getWidth(), img.getHeight());
        return img;
    }
}

class Entity extends Rectangle2D.Double {

    private int speed = 5;
    public boolean UP = false,
            DOWN = false,
            LEFT = false,
            RIGHT = false;
    private final BufferedImage image;

    public Entity(int x, int y, int width, int height, BufferedImage image) {
        super(x, y, width, height);
        this.width = width;
        this.height = height;
        this.image = image;
    }

    public BufferedImage getImage() {
        return image;
    }

    public void move() {
        if (UP) {
            y -= speed;
        }
        if (DOWN) {
            y += speed;
        }
        if (LEFT) {
            x -= speed;
        }
        if (RIGHT) {
            x += speed;
        }

    }
}

class GamePanel extends JPanel {

    private int width, height;
    private int frameCount = 0;
    private int fps = 0;
    public static AtomicBoolean running = new AtomicBoolean(false), paused = new AtomicBoolean(false);
    final ArrayList<Entity> entities = new ArrayList<>();

    GamePanel(int w, int h) {
        super(true);
        setIgnoreRepaint(true);//mustnt repaint itself the gameloop will do that
        setLayout(null);
        width = w;
        height = h;
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(width, height);
    }

    public void addEntity(Entity e) {
        entities.add(e);
    }

    //Only run this in another Thread!
    public void gameLoop() {
        //This value would probably be stored elsewhere.
        final double GAME_HERTZ = 30.0;
        //Calculate how many ns each frame should take for our target game hertz.
        final double TIME_BETWEEN_UPDATES = 1000000000 / GAME_HERTZ;
        //At the very most we will update the game this many times before a new render.
        //If you're worried about visual hitches more than perfect timing, set this to 1.
        final int MAX_UPDATES_BEFORE_RENDER = 5;
        //We will need the last update time.
        double lastUpdateTime = System.nanoTime();
        //Store the last time we rendered.
        double lastRenderTime = System.nanoTime();

        //If we are able to get as high as this FPS, don't render again.
        final double TARGET_FPS = 60;
        final double TARGET_TIME_BETWEEN_RENDERS = 1000000000 / TARGET_FPS;

        //Simple way of finding FPS.
        int lastSecondTime = (int) (lastUpdateTime / 1000000000);

        while (running.get()) {
            double now = System.nanoTime();
            int updateCount = 0;

            if (!paused.get()) {
                //Do as many game updates as we need to, potentially playing catchup.
                while (now - lastUpdateTime > TIME_BETWEEN_UPDATES && updateCount < MAX_UPDATES_BEFORE_RENDER) {
                    updateGame();
                    lastUpdateTime += TIME_BETWEEN_UPDATES;
                    updateCount++;
                }

                //If for some reason an update takes forever, we don't want to do an insane number of catchups.
                //If you were doing some sort of game that needed to keep EXACT time, you would get rid of this.
                if (now - lastUpdateTime > TIME_BETWEEN_UPDATES) {
                    lastUpdateTime = now - TIME_BETWEEN_UPDATES;
                }

                drawGame();
                lastRenderTime = now;

                //Update the frames we got.
                int thisSecond = (int) (lastUpdateTime / 1000000000);

                if (thisSecond > lastSecondTime) {
                    System.out.println("NEW SECOND " + thisSecond + " " + frameCount);
                    fps = frameCount;
                    frameCount = 0;
                    lastSecondTime = thisSecond;
                }

                //Yield until it has been at least the target time between renders. This saves the CPU from hogging.
                while (now - lastRenderTime < TARGET_TIME_BETWEEN_RENDERS && now - lastUpdateTime < TIME_BETWEEN_UPDATES) {
                    //allow the threading system to play threads that are waiting to run.
                    Thread.yield();

                    //This stops the app from consuming all your CPU. It makes this slightly less accurate, but is worth it.
                    //You can remove this line and it will still work (better), your CPU just climbs on certain OSes.
                    //FYI on some OS's this can cause pretty bad stuttering. Scroll down and have a look at different peoples' solutions to this.
                    //On my OS it does not unpuase the game if i take this away
                    try {
                        Thread.sleep(1);
                    } catch (Exception e) {
                    }

                    now = System.nanoTime();
                }
            }
        }
    }

    private void drawGame() {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                repaint();
            }
        });
    }

    private void updateGame() {

        if (entities.get(0).intersects(entities.get(1))) {
            System.out.println("Intersecting");
        }

        for (Entity e : entities) {
            e.move();
        }
    }

    @Override
    protected void paintComponent(Graphics grphcs) {
        super.paintComponent(grphcs);
        Graphics2D g2d = (Graphics2D) grphcs;

        applyRenderHints(g2d);

        g2d.setColor(Color.GREEN);
        g2d.fillRect(0, 0, getWidth(), getHeight());

        for (Entity e : entities) {
            g2d.drawImage(e.getImage(), (int) e.getX(), (int) e.getY(), null);
        }

        g2d.setColor(Color.BLACK);
        g2d.drawString("FPS: " + fps, 5, 10);

        frameCount++;
    }
    private final static RenderingHints textRenderHints = new RenderingHints(RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON);
    private final static RenderingHints imageRenderHints = new RenderingHints(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
    private final static RenderingHints colorRenderHints = new RenderingHints(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);
    private final static RenderingHints interpolationRenderHints = new RenderingHints(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);
    private final static RenderingHints renderHints = new RenderingHints(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);

    public static void applyRenderHints(Graphics2D g2d) {
        g2d.setRenderingHints(textRenderHints);
        g2d.setRenderingHints(imageRenderHints);
        g2d.setRenderingHints(colorRenderHints);
        g2d.setRenderingHints(interpolationRenderHints);
        g2d.setRenderingHints(renderHints);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:49:42.693

`if(house.getBounds().contains(player.getX(),player.getY()){//do something}`

只要你的房子和你的播放器矩形定义在不同的类中，java就能分辨出来

首先创建一个类，它是处理矩形的基类：

```
public class Rectanglebase{

public void getBounds(){//write method}

//write other methods you will need to use for both rectangles here

public Rectanglebase{//default constructor}

}//end class definition 
```

现在为房子和玩家编写类：

```
public class House extends Rectanglebase{
//getBounds() is inherited, so just write stuff to do with the graphics of the house here
} 
```

当您在主代码中生成房屋时，您可以自己制作：

`House house = new House();`

然后以类似的方式为播放器生成类，然后在您的主代码中构建：

`Player player = new Player()`

`house`并且`player`是不同的变量，这就是java如何区分你的房子和玩家

# kendo-ui - KendoUI PanelBar 记住扩展项

> ID：13825519
> 
> 赞同：3
> 
> 时间：2012-12-11T17:37:34.257
> 
> 标签：kendo-ui, remember-me, panelbar

我尝试实现 Kendo UI PanelBar（参见[http:](http://demos.kendoui.com/web/panelbar/images.html) //demos.kendoui.c​​om/web/panelbar/images.html ）如果我打开一些项目（高尔夫、游泳）然后单击“视频记录”，我已经展开了项目。但是当我刷新页面（单击某个链接）时，所有扩展结构都丢失了。

在 KendoUI 论坛上我发现，我只能获得所选项目的位置，并且在重新加载页面后我必须计算所有节点。有什么办法，我怎样才能在我的情况下扩展项目？如果不需要，我不想使用 html 框架。

最好的问候，彼得

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T19:53:26.867

谢谢你的回答，很有用。我在这里添加了 jQuery 的骨架代码，它现在记住了 1 个选定的项目。需要添加 jquery.cookie.js [https://github.com/carhartl/jquery-cookie]

```
function onSelect(e) {
    var item = $(e.item),
        index = item.parentsUntil(".k-panelbar", ".k-item").map(function () {
            return $(this).index();
        }).get().reverse();

    index.push(item.index());

    $.cookie("KendoUiPanelBarSelectedIndex", index);
    //alert(index);
}

var panel = $("#panelbar").kendoPanelBar({
    select: onSelect
}).data("kendoPanelBar");

//$("button").click(function () {
//    select([0, 2]);
//});

function select(position) {
    var ul = panel.element;
    for (var i = 0; i < position.length; i++) {
        var item = ul.children().eq(position[i]);
        if (i != position.length - 1) {
            ul = item.children("ul");
            if (!ul[0])
                ul = item.children().children("ul");
            panel.expand(item, false);
        } else {
            panel.select(item);
        }
    }
}

// on page ready select value from cookies
$(document).ready(function () {
    if ($.cookie("KendoUiPanelBarSelectedIndex") != null) {
        //alert($.cookie("KendoUiPanelBarSelectedIndex"));
        var numbersArray = $.cookie("KendoUiPanelBarSelectedIndex").split(',');
        select(numbersArray);
    }
    else {
        // TEST INIT MESSAGE, ON REAL USE DELETE 
        alert("DocumenReadyFunction: KendoUiPanelBarSelectedIndex IS NULL");
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T18:58:42.190

面板的打开发生在客户端。刷新页面时，浏览器将呈现提供的标记，其中不包含所选面板的任何附加标记。

为了实现这一点，您需要以某种方式存储一个指示已打开面板的值。完成此操作的最简单方法是使用 cookie（由 JavaScript 设置或对服务器进行 AJAX 调用）。

然后，当 panelBar 被渲染时，它将使用 cookie 中的值将正确的选项卡设置为选定的选项卡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-09T12:36:13.977

您可以使用此块来处理所选内容。在这个例子中，我只是扩展面板项。您可以做其他事情，例如将面板项目保存在您的 dom 中以供以后使用，或者可能将其保存在某处以供以后使用：

```
var panelBar =  $("#importCvPanelbar").data("kendoPanelBar");
                panelBar.bind("select", function(e) {
                var itemId = $(e.item)[0].id;

                panelBar.expand(itemId);// will expand the selected one
            }); 
```

# sql - 将连接右侧的多条记录连接到左侧的 1 条记录

> ID：13825521
> 
> 赞同：0
> 
> 时间：2012-12-11T17:37:48.823
> 
> 标签：sql, sql-server, sql-server-2008

我有一个查询，它返回有关工作委员会的分析风格信息以及申请人来自以下结构的位置：

![查询数据格式](../Images/bdcaf241bb8002fbf2c6d04ddc733f5c.png)

要访问的查询是：

```
SELECT   g.name AS [Source]
        ,SUM(CASE WHEN v.cost = 0 THEN 1 ELSE 0 END) AS [Organic Clicks]
        ,SUM(CASE WHEN v.cost <> 0 THEN 1 ELSE 0 END) AS [Paid Clicks]
        ,COUNT(v.id) AS [Total Clicks]
        ,SUM(CASE WHEN a.applicant = 1 AND v.cost = 0 THEN 1 ELSE 0 END) AS [Organic Applicants]
        ,SUM(CASE WHEN a.applicant = 1 AND v.cost <> 0 THEN 1 ELSE 0 END) AS [Paid Applicants]
        ,SUM(CASE WHEN a.applicant = 1 THEN 1 ELSE 0 END) AS [Total Applicants]
        ,SUM(v.cost/100.0) AS [Spend]
FROM a_views v
LEFT OUTER JOIN a_views a
    ON v.viewerid = a.viewerid
    AND v.sessionsourceid = a.sessionsourceid
    AND a.applicant = 1
JOIN a_sources s
    ON v.sourceid = s.id
JOIN a_sourcegroups g ON s.fk_sourcegroup = g.id
--JOIN jobs j ON v.jobid = j.anal_id AND j.featured = 1
WHERE v.hostName = @jobboard
    AND v.viewed_at >= @start AND v.viewed_at <= @end
GROUP BY g.name 
```

唯一的问题是在`LEFT OUTER JOIN a_views`块中可能返回多条记录。我需要做的是只在`Click`总和中跟踪一次记录，但每次都为`Applicant`总和找到它。

我确实在[这个问题上发现了一个类似的问题](https://stackoverflow.com/a/916426/526895)，但回答者实际上并没有提供太多信息。

为了恢复我需要的内容，连接右侧的每个记录实例，但左侧只有一个记录实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:51:22.920

出于某种原因，我认为您不希望通过自我加入来回答这个问题。也许只是聚合 a_views 一次就​​可以解决问题，首先是申请人，然后是游戏。

我发现很难从查询中确定您的意图，但是作为第一个聚合，如下所示：

```
select g.name, valuationDups.viweerid, v.sessionsourceid,
       SUM(CASE WHEN v.cost = 0 THEN 1 ELSE 0 END) AS [Organic Clicks],
       SUM(CASE WHEN v.cost <> 0 THEN 1 ELSE 0 END) AS [Paid Clicks],
       COUNT(v.id) AS [Total Clicks],
       SUM(CASE WHEN a.applicant = 1 AND v.cost = 0 THEN 1 ELSE 0 END) AS [Organic Applicants],
       SUM(CASE WHEN a.applicant = 1 AND v.cost <> 0 THEN 1 ELSE 0 END) AS [Paid Applicants],
       SUM(CASE WHEN a.applicant = 1 THEN 1 ELSE 0 END) AS [Total Applicants],
       SUM(v.cost/100.0) AS [Spend]       
FROM a_views v JOIN
     a_sources s
     ON v.sourceid = s.id JOIN
     a_sourcegroups g
     ON s.fk_sourcegroup = g.id
WHERE v.hostName = @jobboard and
      v.viewed_at >= @start AND
      v.viewed_at <= @end
group by g.name, valuationDups.viweerid, v.sessionsourceid 
```

然后通过 g.name 再次聚合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:55:48.783

您可以在不完全更改查询的情况下执行此操作的一种方法是将点击总和和申请人总和分成两个单独的查询，`UNION`将它们放在一起，然后再次对它们进行分组/求和。

像这样的东西（伪代码）：

```
SELECT
        Source
        ,SUM([Organic Clicks])
        ,.....
FROM
(
SELECT   g.name AS [Source]
        ,SUM(CASE WHEN v.cost = 0 THEN 1 ELSE 0 END) AS [Organic Clicks]
        ,SUM(CASE WHEN v.cost <> 0 THEN 1 ELSE 0 END) AS [Paid Clicks]
        ,COUNT(v.id) AS [Total Clicks]
        ,0 AS [Organic Applicants]
        ,0 AS [Paid Applicants]
        ,0 AS [Total Applicants]
        ,SUM(v.cost/100.0) AS [Spend]
FROM
        ClickOnlyTables

UNION ALL

SELECT   g.name AS [Source]
        ,0 AS [Organic Clicks]
        ,0 AS [Paid Clicks]
        ,0 AS [Total Clicks]
        ,SUM(CASE WHEN a.applicant = 1 AND v.cost = 0 THEN 1 ELSE 0 END) AS [Organic Applicants]
        ,SUM(CASE WHEN a.applicant = 1 AND v.cost <> 0 THEN 1 ELSE 0 END) AS [Paid Applicants]
        ,SUM(CASE WHEN a.applicant = 1 THEN 1 ELSE 0 END) AS [Total Applicants]
        ,0 AS [Spend]
FROM
        ApplicantTables
)
GROUP BY
        Source 
```

# winsock - 在winsock2下，select()有什么替代方法？

> ID：13825522
> 
> 赞同：1
> 
> 时间：2012-12-11T17:37:48.920
> 
> 标签：winsock, winsock2

我有一个在裸winsock2 上用C++ 构建的多客户端、单线程TCP/IP 服务器应用程序。它的核心是`select()`等待新的工作去做。我正在考虑将同时客户端的数量扩展到数百或数千个，实际上所有这些都是空闲的。我的架构为连接的空闲客户端使用了很少的内存。

在每一个之前`select()`，我构建了一个`fd_set`处于读取状态的客户端套接字，以及我的监听套接字（用于接受新连接）；和另一个`fd_set`处于写入状态的套接字。然后，在 之后`select()`，我扫描这些以从套接字号重建我的客户是哪一个。这种`fd_set`构建和扫描，虽然客观上不是当前的 CPU 瓶颈，但让我感到不安：每个事务的工作量随着客户端数量线性增长；虽然我看到了如何超越默认的 64-sockets 限制`fd_set`，但我不愿意走那条路。

我隐约看到如何使用两个线程，一个处理少数最活跃的客户端，另一个处理大量空闲客户端。这似乎可行，但有点复杂。

那么：`select()`winsock2下的替代方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:12:40.027

如您所见，`select()`它在一次调用中可以处理的套接字数量有一个最大限制。如果可伸缩性对您来说是个问题，那么您应该改用重叠 I/O 或 I/O 完成端口。这样，您可以在需要时对单个套接字发出读/写操作，并且操作系统会在工作完成时通知您，无需轮询。

# java - 如何确定tomcat的堆大小和permgen空间的分配？

> ID：13825524
> 
> 赞同：1
> 
> 时间：2012-12-11T17:37:49.593
> 
> 标签：java, tomcat, liferay

我的应用程序托管在 liferay 5.2.3 的 tomcat 6.0 中。我已将堆大小分配为 --JvmMx 512 和 permgen -XX:MaxPermSize=512m。但是我很困惑如何确定我的应用程序运行的最小堆和 permgen。谁能指定如何找到它？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:39:54.210

使用**jconsole**来分析您的应用程序。

实际上很难确定合适的堆大小。如果值太低，则 GC 循环的频率会很高，如果值太高，则 GC 将花费更长的时间。我们应该避免这两种极端情况。

您可以通过保留多个堆值来使用 jconsole 运行您的应用程序和配置文件。这样，您将更好地了解堆配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:40:17.673

您可以附加一个分析器以图形方式查看您的`heap`空间是如何使用的。[Visualvm](http://visualvm.java.net/)是一个不错的 java profiler，你可以试试。

# entity-framework - VS 2012 中的 EntityFramework 5 安装失败

> ID：13825525
> 
> 赞同：8
> 
> 时间：2012-12-11T17:37:52.843
> 
> 标签：entity-framework, visual-studio-2012, nuget

我正在尝试从 Visual Studio 2012 中的程序管理器控制台安装最新版本的 EntityFramework。运行 install-package 命令会产生以下错误：

```
PM> install-package EntityFramework
You are downloading EntityFramework from Microsoft, the license agreement to which is available at http://go.microsoft.com/fwlink/?LinkId=253898&clcid=0x409\. Check the package for additional dependencies, which may come with their own license agreement(s). Your use of the package and dependencies constitutes your acceptance of their license agreements. If you do not accept the license agreement(s), then delete the relevant components from your device.
    Successfully installed 'EntityFramework 5.0.0'.
    Successfully uninstalled 'EntityFramework 5.0.0'.
    Install failed. Rolling back...
    install-package : Failed to add reference to 'System.Data.Entity'. Please make sure that it is in the Global Assembly Cache.
    At line:1 char:1
    + install-package EntityFramework
    + ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        + CategoryInfo          : NotSpecified: (:) [Install-Package], InvalidOperationException
        + FullyQualifiedErrorId : NuGetCmdletUnhandledException,NuGet.PowerShell.Commands.InstallPackageCommand 
```

因此，我在 Google 上进行了一些探索，并想出了以下内容以输入 Web.Config 文件。我再次尝试使用以下条目安装 EntityFramwork：

```
<section name="entityFramework" type="EntityFramework.dll, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" /> 
```

这导致了同样的错误。我的问题是：

*   我怎样才能安装这个包？开箱即用，这应该可以与其他软件包一起使用，这似乎很愚蠢，因为无法快速轻松地安装该软件包。

*   此软件包的文档以及某种形式的常见问题解答存在于哪里？不存在有关安装问题的文档似乎也很愚蠢。

提前致谢！

：：编辑：：

我忘了添加我也在 web.config 文件中尝试了以下条目：

```
<assemblies>
    <add assembly="System.Data.Entity, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
  </assemblies> 
```

...产生了同样的错误。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-30T12:24:18.407

对我们来说，这个错误是由错误的 .NET 版本引起的——我们不小心创建了面向 .NET 2 的项目。将目标框架版本更改为 .NET 4 解决了问题，并允许我们添加 NuGet 包实体框架。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-17T12:41:41.033

我有一个类似的错误。从 4.5 回到 .NET 4.0 后，EF 安装正常。（用于 Web 的 Visual Studio Express 2012）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-11T17:48:55.997

删除您对该`web.config`文件所做的所有条目。只是`Right Click on your project name in the solution`，点击`Manage Nuget Packages`在你的左手点击`Online`和右手只是把实体框架放在搜索框中。点击`Install`

这将自动为您完成所有事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-20T05:03:22.090

我发现我只需要再次尝试在 NuGet 中添加它；它第二次起作用了。可能安装脚本中存在错误。

# objective-c - 从我自己的包中加载笔尖？

> ID：13825531
> 
> 赞同：2
> 
> 时间：2012-12-11T17:38:18.303
> 
> 标签：objective-c, ios, nib, nsbundle

我正在尝试将 NIB/XIB 文件放在我称为 Configuration.bundle 的包中。当我尝试从我的包中加载 xib 时，应用程序崩溃，因为它找不到 xib 文件。

```
NSBundle *bundle = [NSBundle bundleWithPath:[[NSBundle mainBundle]
pathForResource:@"Configuration" ofType:@"bundle"]];
[bundle load];
NSLog(@"bundle: %@", bundle); 
```

我得到输出

> 捆绑包：NSBundle（尚未加载）

“尚未加载”部分让我有点害怕。为什么没有加载？

最后，当我尝试用视图控制器加载我的笔尖时

```
ConfigViewController *configViewController = [[ConfigViewController alloc] initWithNibName:@"ConfigViewController" bundle:bundle]; 
```

我得到输出

> ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无法在包中加载 NIB：“NSBundle（尚未加载）”，名称为“ConfigViewController.xib”

我已经尝试过使用和不使用 .xib。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:44:23.757

load 方法用于加载可执行代码，例如框架之类的东西。
您的捆绑包不包含您要加载的任何可执行文件，因此您无需调用*[bundle load]*。*如果包的名称正确，那么除了[bundle load]*
之外，您编写的所有内容都可以。无论如何检查路径是否正确，不要嵌套太多说明：

 *```
NSString* path=[ [NSBundle mainBundle] pathForResource: @"Configuration" ofType: @"bundle"]; 
```

如果此字符串是正确的路径，那么您可以确定捆绑包将被正确加载，而无需调用*[bundle load]*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-28T12:58:28.593

首先，如果未正确创建捆绑包，它将不会被加载。因此，为了创建正确的包，以下是创建包的步骤：
1\. 通过在 OS X -> Framework & Libraries 下选择名为 bundle 的模板来添加新目标。

2.  选择新创建的目标并将 BaseSDK 从 OSX 更改为最新的 iOS。

3.  从 Build Phrases -> Copy Bundle Resources 中的 bundle 添加 .xibs、图像或其他要使用的资源。

4.  在 Build Phrases -> Link binary with Libraries 中添加 CoreFoundation 框架。

5.  编译目标选择 iOS 设备。

6.  将新创建的捆绑包从 Products 目录保存到某个位置。

现在将该包复制到您的主项目中。使用以下代码加载捆绑包：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"BundleName" ofType:@"bundle"];

NSBundle *bundle = [NSBundle bundleWithPath:path];" 
```

您现在已设置好新捆绑包。*

# java - In-App Billing v3 可靠性缺陷

> ID：13825533
> 
> 赞同：4
> 
> 时间：2012-12-11T17:38:29.200
> 
> 标签：java, android, security, in-app-purchase, in-app-billing

首先，感谢 Google 提供了新的 IAB API，与以前的相比，它似乎更容易使用。与旧示例相比，新示例也是一个巨大的飞跃，到目前为止，`MainActivity.onDestroy()`由于缺少`super.onDestroy()`.

但是我不太明白一个说法：

> 您必须先发送消费请求，然后才能将消耗品应用内购买的好处提供给用户。

遵循此指南，如果应用程序在执行消费请求后立即死亡，似乎购买的物品将会丢失。以前的实现提供了定期 IN_APP_NOTIFY 广播，直到确认购买，但新的实现缺少它。我看不出如何可靠地提供项目，除非实现自己的购买流程跟踪，这将被永久存储并且肯定会使代码复杂化。那么，新方法看起来像是实施中的缺陷还是我遗漏了什么？

此外，在我的情况下，配置（包括验证）是在服务器端完成的。我在想我是否应该忽略引用的指南并在提供之前进行消费。使用这种方法，我不必担心购买完成后物品会丢失。如果应用程序崩溃，项目将保留为“拥有”，直到我进行服务器端配置然后消费。从安全角度来看会好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T06:26:02.633

我同意。我会在服务器上处理事务（成功或验证失败），然后将其标记为已使用。

# sql - Postgres NOT IN 不工作

> ID：13825535
> 
> 赞同：0
> 
> 时间：2012-12-11T17:38:30.747
> 
> 标签：sql, postgresql, notin

如果我使用：

```
SELECT *
  FROM "moves"
 INNER
  JOIN "move_conditions"
    ON "move_conditions"."move_id" = "moves"."id"
 INNER
  JOIN "conditions"
    ON "conditions"."id" = "move_conditions"."condition_id"
 WHERE "conditions"."id" IN (29, 3) 
```

这将返回条件 ID 为 29 或 3 的正确表。

但是，如果我尝试：

```
SELECT *
  FROM "moves"
 INNER
  JOIN "move_conditions"
    ON "move_conditions"."move_id" = "moves"."id"
 INNER
  JOIN "conditions"
    ON "conditions"."id" = "move_conditions"."condition_id"
 WHERE "conditions"."id" NOT IN (29, 3) 
```

结果不正确。结果中包含 id 为 29 或 3 的条件。他们不应该。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:42:39.917

你的意思是，如果它的*任何*条件是 29 或 3，你想取消它的资格吗？我会为此尝试一个子查询。

```
SELECT *
  FROM "moves"
WHERE moves.id
NOT IN 
    (SELECT /* Don't know if PG infers or would be faster
                 with the DISTINCT that is implied by NOT IN */
      moves.id FROM 
      move_conditions 
      INNER JOIN
      conditions
    ON move_conditions.condition_id=conditions.id
    WHERE conditions.id IN (29,3)
    ) 
```

或者你可以试试

```
SELECT *
  FROM moves
EXCEPT
SELECT *
  FROM "moves"
INNER
JOIN "move_conditions"
   ON "move_conditions"."move_id" = "moves"."id"
INNER
JOIN "conditions"
ON "conditions"."id" = "move_conditions"."condition_id"
WHERE "conditions"."id" IN (29, 3) 
```

尽管我希望这会慢得多。

您可以将第一个版本转换为 use`NOT EXISTS`而不是`NOT IN`; 不同版本的 PG 对它们进行了不同的优化，一个可能比另一个更快。

# node.js - 在 MongoDB 中搜索 - NodeJS

> ID：13825540
> 
> 赞同：-3
> 
> 时间：2012-12-11T17:38:48.083
> 
> 标签：node.js, mongodb

我正在我的 Node.js 应用程序中实现搜索功能，作为启用文本搜索的一部分我希望有一些类似于

```
{ title : "this is fun" ,
  _keywords : [ "this" , "is" , "fun" ]
} 
```

如何从 Node.Js 中获取 _keywords 字段？有没有办法让 _keywords 对应于标题，如上所示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:42:19.577

好吧，据我从您的问题中可以看出，我猜您希望`title`将`_keywords`.

您可以通过执行类似的操作在 node.js 中实现这一点。

```
_keywords = title.split(" "); 
```

# ckeditor - 如何在 CKEditor 4 中启用表格调整大小？

> ID：13825542
> 
> 赞同：1
> 
> 时间：2012-12-11T17:38:48.890
> 
> 标签：ckeditor

在他们的[演示页面上](http://ckeditor.com/demo#table-resizer)，他们展示了如何单击和拖动表格边框来调整列的大小。如何启用此功能？

我在文档中找不到它，找不到它的插件，在源代码中找不到对“resize”的任何引用，并且配置的源代码没有显示在演示页面本身（查看源代码大多不可读）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:05:01.950

默认情况下，三个可用预设（基本、标准、完整）中的任何一个都不提供表格调整大小插件。

您必须将[Table Resize](http://ckeditor.com/addon/tableresize)插件添加到[您自己](http://ckeditor.com/builder)的 CKEditor 构建中。它将默认启用，因此您不必使用`extraPlugins`配置设置。

您可以在此处找到更多信息：[插件 - CKEditor 4 文档](http://docs.ckeditor.com/#!/guide/dev_plugins)。

# asp.net - 验证器导致双击检查的不当行为

> ID：13825543
> 
> 赞同：0
> 
> 时间：2012-12-11T17:38:58.203
> 
> 标签：asp.net

我有以下脚本`prevent a button from submitting twice`通过双击。它工作正常。

但是当我添加一个`Required Field validator`. 如果我尝试在文本框中使用空白值提交，验证器会触发。但是当我在文本框中输入值并尝试再次提交时，它不会进行回发。

我理解原因，在第一个按钮单击本身中，变量 isActionInProgress 设置为“是”，而与验证错误无关。

克服这一挑战的最佳方法是什么？

**标记**

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.8.1.js"></script>
<script type="text/javascript">

    $(document).ready(function () {

        var isActionInProgress = 'No';

        $('.myButton').click(function (e) {

            if (isActionInProgress == 'No') {
                isActionInProgress = 'Yes';
            }
            else {
                e.preventDefault();
                //alert('STOP');
            }

        });

    });

</script>
</head>
<body>
<form id="form1" runat="server">
<div>
    <asp:TextBox ID="txtEmpName" runat="server"></asp:TextBox>
    <asp:Button ID="Button1" CssClass="myButton" runat="server" Text="Submit" ValidationGroup="ButtonClick"
        OnClick="Button1_Click" />

    <asp:RequiredFieldValidator ID="RequiredFieldValidator1" ControlToValidate="txtEmpName"
        runat="server" ErrorMessage="RequiredFieldValidator" ValidationGroup="ButtonClick" Text="*"></asp:RequiredFieldValidator>
</div>
</form>
</body> 
```

参考

1.  [Page_ClientValidate 正在验证多次。](https://stackoverflow.com/questions/969465/problem-with-page-clientvalidate)
2.  [在 ASP.Net ValidationSummary 中隐藏冗余错误消息](https://stackoverflow.com/questions/13565718/hide-redundant-error-message-in-asp-net-validationsummary)
3.  [MSDN - ASP.NET 深度验证](http://msdn.microsoft.com/en-us/library/aa479045.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:44:31.453

我想像这样：

```
 $('.myButton').click(function (e) {
        if(Page_IsValid){
        if (isActionInProgress == 'No') {
            isActionInProgress = 'Yes';
        }
        else {
            e.preventDefault();
            //alert('STOP');
        }
      }

    }); 
```

# java - 更快的哈希函数

> ID：13825546
> 
> 赞同：0
> 
> 时间：2012-12-11T17:39:05.177
> 
> 标签：java, hashtable

我正在尝试实现自己的哈希函数，我使用 java 将每个字符串的 ASCII 数字相加。我通过查找哈希表大小和总和的 mod 来找到哈希码。大小%总和。我想知道在搜索字符串时是否有办法使用相同的过程但减少冲突？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T18:05:36.693

我会查看 String 和 HashMap 的代码，因为它们的冲突率很低，并且不使用`%`和处理负数。

来自字符串的来源

```
public int hashCode() {
    int h = hash;
    if (h == 0 && value.length > 0) {
        char val[] = value;

        for (int i = 0; i < value.length; i++) {
            h = 31 * h + val[i];
        }
        hash = h;
    }
    return h;
} 
```

来自 HashMap 的来源

```
/**
 * Retrieve object hash code and applies a supplemental hash function to the
 * result hash, which defends against poor quality hash functions.  This is
 * critical because HashMap uses power-of-two length hash tables, that
 * otherwise encounter collisions for hashCodes that do not differ
 * in lower bits. Note: Null keys always map to hash 0, thus index 0.
 */
final int hash(Object k) {
    int h = 0;
    if (useAltHashing) {
        if (k instanceof String) {
            return sun.misc.Hashing.stringHash32((String) k);
        }
        h = hashSeed;
    }

    h ^= k.hashCode();

    // This function ensures that hashCodes that differ only by
    // constant multiples at each bit position have a bounded
    // number of collisions (approximately 8 at default load factor).
    h ^= (h >>> 20) ^ (h >>> 12);
    return h ^ (h >>> 7) ^ (h >>> 4);
} 
```

由于 HashMap 的大小始终是 2 的幂，因此您可以使用

```
 hash = (null != key) ? hash(key) : 0;
        bucketIndex = indexFor(hash, table.length); 
```

和

```
/**
 * Returns index for hash code h.
 */
static int indexFor(int h, int length) {
    return h & (length-1);
} 
```

使用比长度`&`快得多，`%`并且只返回正数，因为长度是正数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-11T17:57:02.947

Java [String.hashcode()](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#hashCode%28%29)在成为一个非常好的哈希函数和尽可能高效之间进行权衡。简单地将字符串中的字符值相加并不是可靠的哈希函数。

例如，考虑两个字符串`dog`和`god`。由于它们都包含“d”、“g”和“o”，因此任何仅涉及加法的方法都不会产生不同的哈希码。

[Joshua Bloch实现了 Java 的一个重要部分，他在他的《](http://en.wikipedia.org/wiki/Joshua_Bloch) [Effective Java](https://rads.stackoverflow.com/amzn/click/com/0321356683)》一书中讨论了 String.hashCode() 方法，并讨论了在 1.3 之前的 Java 版本中，String.hashCode() 函数如何仅考虑 16 个字符在给定的字符串中。这比当前的实现运行得快一些，但结果是在某些情况下性能非常差。

一般来说，如果您的特定数据集定义非常明确，并且您可以利用其中的一些独特性，您可能会制作出更好的散列函数。对于通用字符串，祝你好运。

# java - JAVA是在线会议系统（音频/视频）的正确选择吗？

> ID：13825547
> 
> 赞同：-8
> 
> 时间：2012-12-11T17:39:10.243
> 
> 标签：java, project, voip, jmf

我正在**在线会议系统（独立桌面应用程序）**上做一个项目。为此，我选择了**JAVA**作为语言。当我想使用**JMF**打开捕获设备时，它不能给出异常

> “无法初始化捕获设备”。

我搜索这个问题，很多用户都面临这个问题。为此，我认为

我是否通过使用 JAVA 做出了正确的决定？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T18:14:35.663

如果您想访问网络摄像头，Java 可能不是解决方案。大多数 Java WebCam 库都已关闭，JMF 也已过时。

您可能会发现其他图书馆，例如几年前著名的 FMJ，但它们也已过时。

我知道的唯一没有过时的库是**Xuggler**。**VLCJ**似乎也已过时，但有人声称它适用于大多数网络摄像头。

如果您只需要音频/视频流，那么 JavaFX 可能会有所帮助。[http://docs.oracle.com/javafx/2/media/overview.htm](http://docs.oracle.com/javafx/2/media/overview.htm)

另一个最好的库是**JavaCV**，我可以保证。但情况是它是 C++ OpenCV 的包装器，因此您需要在那里做很多工作，以使其与 Java 一起使用。而且，它目前没有或只有更少的文档。

# voip - 如何对 JTAPI 应用程序进行可伸缩性测试

> ID：13825552
> 
> 赞同：1
> 
> 时间：2012-12-11T17:39:32.360
> 
> 标签：voip, jtapi, cisco-jtapi

我有一个现有的 JTAPI 应用程序，我将对其进行增强和重构。首要问题之一是新的增强功能是否能够很好地扩展到更多数量的 IP 电话。我已经通过使用线程模拟 Web 服务客户端来完成 Web 服务的可伸缩性测试，这种方法可以很好地确定 Web 服务是否可以伸缩。

现在我正试图想出一种方法来模拟网络上越来越多的 IP 电话，因为我显然不想用成百上千的 IP 电话构建一个真实的网络。

我将从简单的 JTAPI 操作开始，例如查询网络上的每个设备以确定哪些设备忙，但还必须测试更复杂的操作。

我可以构建一个由 10 部 IP 电话组成的网络，并通过对每部电话重复每个 JTAPI 操作 N 次来“扩展”该网络。我会用 N = 1, 3, 7, 10, 30, 70, 100, 300, ... 这种方法的一个潜在问题是结果可能会因 IP 电话响应时的延迟而严重扭曲多个 JTAPI 操作，而不是显示响应单个 JTAPI 操作的更大 IP 电话网络的可扩展性。

另一种方法是设置 IP 软电话网络并将其扩展，但我认为 IP 软电话在延迟和响应 JTAPI 操作方面不会像真正的 IP 电话。

其他人如何测试其 JTAPI 应用程序的可扩展性？

谢谢。

# php - 在下拉列表中显示结果并选择在 php mysql 中执行查询

> ID：13825553
> 
> 赞同：0
> 
> 时间：2012-12-11T17:39:33.257
> 
> 标签：php, mysql, macos

我有一个名为 Data 的数据库，其中有一个表，其中它们是产品的不同名称、ID 和价格，我想使用 php 创建一个网页，以便我可以编辑、添加网页中的项目并将其保存到数据库并相应地搜索名称。

```
 <html>
  <head>
 <title>Products store</title>
  </head>
  <body>
  <p  style="font-size:20px" align="center"> <b>Product Database Editor</b> </p>
  <p>
  <form method="post">
   Enter Product Name: <input type="text" name="pname" id="pname" size="70">
 <input type="submit">
  </p>
 <form method="post">
<select id="opt" name="opt">
   <?php
$pname = $_REQUEST['pname'];

// $pname= mysql_real_escape_string($_POST['pname']);

 $con = mysql_connect("localhost","root","");
 if (!$con)
    {
     die('Could not connect: ' . mysql_error());
      }
     mysql_select_db("Dataentry", $con);

      $result = mysql_query("SELECT * FROM products where name like '%$pname%'");
      $result_rows = mysql_num_rows($result);

      if($pname==NULL)
        {
        echo "Please enter a product name!";
          }
      else if($result_rows==0)
        {
      echo "Product Name does not exist!";
        }
     else
        {
        while($row = mysql_fetch_array($result))
         {

     $name = $row['name'];

     echo "<option value='$name_selected'>$name</option>";

   //echo ("<option value = '" . $row['name'] . "'>" . $row['id'] . "</option>");

      echo $name_selected;  

 echo "<br />";
 }
 }
 mysql_close($con);

  ?>
 </select>
  </form>

  </body>
   </html> 
```

当我运行此代码时，我在下拉列表中获得名称列表，但是在我选择任何名称后，什么都没有发生，我应该如何修改我的代码，以便我可以从下拉列表中选择任何名称，然后能够获取该特定名称的价格名称来编辑它。请帮忙，编码会很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:47:46.783

要获取输入的值（在这种情况下，从下拉列表中）`on the fly`，您需要使用客户端脚本语言`javascript`（或 jquery）并将`ajax`其发送到代码在 PHP 中的服务器端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:28:09.907

假设您在下拉菜单中有这样的问题。

`Q - How many colors does the US flag has?`

现在，据我了解，您希望下拉菜单中的选择立即出现..

好吧，这是一个简单的选择表单。

```
<form method="post">
<select id="opt" name="opt">
    <option value="four">four</option>
    <option value="five">five</option>
     <option value="two">two</option>
     <option value="million">million</option>
</select>​ 
```

并且，JS代码：

```
$(document).ready(function() {
    $("#opt").change(function() {
        alert($(this).val());
    });
});​ 
```

现在，单击她的jsFiddle[演示](http://jsfiddle.net/qzYuL/)，向您展示它是如何工作的。您可以复制/粘贴代码并将它们包含在您的站点中，这是一个简单的代码，但如果您对 Javascript 了解不多，您可以按照您需要的方式操作数据。.

# c - C - 找出所有不同的数字

> ID：13825554
> 
> 赞同：-5
> 
> 时间：2012-12-11T17:39:35.173
> 
> 标签：c, arrays, numbers

> **可能重复：**
> [打印给定元素排列的程序](https://stackoverflow.com/questions/9148543/program-to-print-permutations-of-given-elements)

所以，我有数字 153，我的程序需要输出 - 135、153、315、351、513、531。换句话说，所有可能的数字。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:57:44.740

这是一小块足迹，它可以帮助你

```
#include <stdio.h>

int main(int argc, char** argv){
  int a,b,c;

  for(a=1; a<4; a++){
    for(b=1; b<4; b++){
      for(c=1; c<4; c++){
      if(!(a==b || a==c || b==c))
        printf("%d%d%d\n",a,b,c);
      }
    }
  }

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:42:18.923

从 int 更改为 string，然后更改为字符数组。然后使用嵌套循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T17:53:36.327

```
#include<iostream>
#include<vector>

void swap(int& a, int& b)
{ int x=a;
a=b;
b=x;
}

void printVector(std::vector<int>& theVector)
{ for (unsigned int i=0; i<theVector.size(); i++)
std::cout << theVector[i] << ",";
std::cout << "\n";
}

void generateAllPermutations(std::vector<int>& toBePermuted, unsigned int nextIndex)
{ if (nextIndex==toBePermuted.size())
{ printVector(toBePermuted);
return;
}
for (unsigned int i=nextIndex; i<toBePermuted.size(); i++)
{ swap(toBePermuted[i], toBePermuted[nextIndex]);
generateAllPermutations(toBePermuted, nextIndex+1);
swap(toBePermuted[i], toBePermuted[nextIndex]);
}
}

void generateAllPermutations(std::vector<int>& toBePermuted)
{ generateAllPermutations(toBePermuted, 0);
}

int main()
{ std::vector<int> theVector;

theVector.push_back(1);
theVector.push_back(3);
theVector.push_back(5);
generateAllPermutations(theVector);
//note: you will have to print out the vector yourself
} 
```

# java - Hsqldb驱动程序随机为空

> ID：13825561
> 
> 赞同：0
> 
> 时间：2012-12-11T17:40:13.817
> 
> 标签：java, persistence, hsqldb

我参与编写一个需要 servlet-> 数据库连接的项目。我正在与另一个使用 HyperSQL (hsqldb) 设计数据库的人合作，我现在正试图通过将他的代码添加到我的代码中来将我的项目与他的项目合并。

不过，关于我的问题。当我复制代码时，它通常可以工作。我几乎没有使用数据库中的数据并将它们与用户输入进行比较的方法。

尝试连接数据库时，我会随机成功或失败，出现以下错误；

`Unable to acquire a connection from driver [null]`

我当然初始化了一个驱动程序； `Class.forName("org.hsqldb.jdbcDriver").newInstance();`

现在，当运行我的方法时，有时会成功，有时会失败，这是数据库的 XML 文件；

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- 
Creates both the HyperSQL databases using hibernate. No password or username is set.
-->
<persistence version="1.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
  <persistence-unit name="monsters" transaction-type="RESOURCE_LOCAL">
    <class>databaseManagement.Monster</class>
    <exclude-unlisted-classes>true</exclude-unlisted-classes>
    <properties>
      <property name="hibernate.connection.driver_class" value="org.hsqldb.jdbcDriver"/>
      <property name="hibernate.connection.username" value=""/>
      <property name="hibernate.connection.password" value=""/>
      <property name="hibernate.connection.url" value="jdbc:hsqldb:monsters"/>
      <property name="hibernate.dialect" value="org.hibernate.dialect.HSQLDialect"/>
      <property name="hibernate.hbm2ddl.auto" value="update"/>
    </properties>
  </persistence-unit>
  <persistence-unit name="users" transaction-type="RESOURCE_LOCAL">
    <class>databaseManagement.User</class>
    <exclude-unlisted-classes>true</exclude-unlisted-classes>
    <properties>
      <property name="hibernate.connection.driver_class" value="org.hsqldb.jdbcDriver"/>
      <property name="hibernate.connection.username" value=""/>
      <property name="hibernate.connection.password" value=""/>
      <property name="hibernate.connection.url" value="jdbc:hsqldb:users"/>
      <property name="hibernate.dialect" value="org.hibernate.dialect.HSQLDialect"/>
      <property name="hibernate.hbm2ddl.auto" value="update"/>
    </properties>
  </persistence-unit>
</persistence> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:41:25.067

可能试图在只读目录中打开数据库。

1.  您需要为两个持久性单元指定用户名。默认用户名是“SA”。

2.  您在 URL 中指定的数据库的文件路径是相对的。它解析为执行目录。在开发 Web 应用程序时，您需要指定一个可以写入的目录。

一种方法是在路径中包含一个变量，例如“jdbc:hsqldb:file:{$directorypath}/monsters”，其中目录路径是 Web 应用程序数据目录的名称，如 web.xml 中所指定文件。

# java - 将数据放入另一个类中的构造函数

> ID：13825562
> 
> 赞同：-1
> 
> 时间：2012-12-11T17:40:14.670
> 
> 标签：java, list, vector

我有一个类调用 ClientIdBandwidth.java 如下所示

```
public class ClientIdBandwidth
{
private int clientID;
private int bandwidth;

public ClientIdBandwidth(int clientID , int bandwidth)
{
    this.clientID = clientID;
    this.bandwidth = bandwidth;
}

public int getClientID()
{
    return clientID;
}

public int getBandwidth()
{
    return bandwidth;
}
} 
```

我想调用 ClientIdBandwidth 构造函数并将数据放入构造函数？下面是我到目前为止所做的代码：

```
public class connectNode
{
private List[] connection;
private int totalClients;
totalClients = clientList.size(); //get the size from another class 
connection = new Vector[totalClients]; //  

for(int i = 0; i<totalClients; i++) 
    {
        connection[i] = new Vector(); 
    } 
for(int i = 0; i<totalClients; i++)
    {       
        int ID = (int)clientList.get(i);
        ClientIdBandwidth cib = new ClientIdBandwidth(ID,'0');
            } 
```

在那之后，我不知道如何继续。谁能教我？提前致谢

**更新**

抱歉，我没有说清楚。

我现在正在做一个 p2p 模拟器。我有一个文本文件：

0;2;100; // 节点 0 以 100kbps 连接到节点 2

1;5;200; // 节点 1 以 200kbps 连接到节点 5

我有将读取 txt 文件的课程。并且它已经将总共多少个节点（在上面的示例中为 4，即节点 0、2、1、5）放入一个列表中。现在我想设置节点 0 连接到节点 2，并将带宽连接到向量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:58:48.427

在大多数情况下，您的代码将以意想不到的方式运行。您的构造函数需要 2 个整数参数，但您传递的是一个整数和一个 'char' 类型。这可能是您被卡住/代码不工作/结果不正确等的原因（您没有说出确切的问题）。

否则，您的`ClientBandwith`对象将在 for 循环中创建。它是在 for 循环中创建和销毁的。最后，当 for 循环完成时，将没有实例。所以在 for 循环之后，`ClientBandwith`类将保持原样，没有 EXISTING 对象，所以你不能使用 getter 得到任何东西。在这种情况下，您甚至不会注意到发生了什么。所以您抱怨您不能“将数据放入构造函数”，因为实例正在被破坏？

除此之外，

1.  “向量”缓慢且过时。使用`ArrayList`.

2.  如果您知道向量的确切大小，我认为选择数组是一个不错的选择

3.  您正在向量中创建向量。这里真的有用吗？

4.  使用泛型

5.  您正在使用 2 个 for 循环。但是正如你所看到的，你的工作可以通过 1 个 for 循环来完成。

6.  遵循 Java 命名标准。你的第二节课从一个简单的字母开始

7.  如果您希望将 Vector 中的所有数据加载到构造函数中，您的系统将无法工作。接受`List`类型作为参数

8.  **当您提出问题时，请告诉我们您真正想做什么**

# javascript - 为什么即使不满足 HTML5 所需属性，我的表单也会发布

> ID：13825565
> 
> 赞同：0
> 
> 时间：2012-12-11T17:40:17.900
> 
> 标签：javascript, html

我确信对此有一个非常简单的答案，但现在我无法弄清楚。我是 HTML 5 验证的新手，并在几个字段上使用所需的验证器，包括输入元素和选择元素。选择元素一切都很好，但是当我没有在输入元素中输入数据时，我会收到验证弹出错误消息，但表单会继续并发布。这是我的代码：

```
 <script type="text/javascript" src="@Url.Content("~/Scripts/knockout-2.1.0.js")"></script>

@using (Html.BeginForm())
{
    <table id="addFixture" border="0" cellpadding="3">
        <tr>
            <td>Season</td><td><input type="text" id="txtSeason" required /></td>
        </tr>
        <tr>
            <td>Week</td><td><select id="ddlWeek" required /></td>
        </tr>
        <tr>
            <td>Away Team</td><td><select id="ddlAwayTeam" required /></td>
        </tr>
        <tr>
            <td>Score</td><td><input type="text" id="txtAwayTeamScore" /></td>
        </tr>
        <tr>
            <td>Home Team</td><td><select id="ddlHomeTeam" required /></td>
        </tr>
        <tr>
            <td>Score</td><td><input type="text" id="txtHomeTeamScore" /></td>
        </tr>
    </table>

    <input type="submit" onclick=" addFixture() "/>
}

<script type="text/javascript">

    $(document).ready(function () {
        populateTeams();
        populateWeeks();
    });

    function populateTeams() {

        $.ajax({
            type: 'GET',
            url: '/api/team/',
            contentType: "application/json; charset=utf-8",
            dataType: 'json',
            success: function (results) {
                var $subType = $("#ddlAwayTeam");
                $subType.empty();
                $subType.append($('<option></option>').attr("value", "").text("--Please select--"));
                $.each(results, function () {
                    $subType.append($('<option></option>').attr("value", this.TeamId).text(this.TeamName));
                });

                var $subType = $("#ddlHomeTeam");
                $subType.empty();
                $subType.append($('<option></option>').attr("value", "").text("--Please select--"));
                $.each(results, function () {
                    $subType.append($('<option></option>').attr("value", this.TeamId).text(this.TeamName));
                });
            }
        });
    }

    function populateWeeks() {

        var numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16];

        $('<option/>').val("").html("--Please select--").appendTo('#ddlWeek');

        for (i = 0; i < numbers.length; i++) {
            $('<option/>').val(numbers[i]).html(numbers[i]).appendTo('#ddlWeek');
        }
    }

    function addFixture() {

        var season = $("#txtSeason").val();
        var week = $("#ddlWeek").val();
        var awayTeam = $("#ddlAwayTeam").find(":selected").text();
        var awayTeamScore = $("#txtAwayTeamScore").val();
        var homeTeam = $("#ddlHomeTeam").find(":selected").text();
        var homeTeamScore = $("#txtHomeTeamScore").val();

        $.ajax({
            type: 'POST',
            url: '/api/fixture/',
            data: JSON.stringify({ Season: season, Week: week, AwayTeamName: awayTeam, HomeTeamName: homeTeam, AwayTeamScore: awayTeamScore, HomeTeamScore: homeTeamScore }),
            contentType: "application/json; charset=utf-8",
            dataType: 'json',
            success: function(results) {
                alert('Fixture Added !');
            }
        });
    }

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:51:24.843

It's probably because you're manually creating a POST request when the submit button is `clicked` (i.e. not `submitted`). Using inline Javascript is bad practice anyway. Try removing the inline `onclick` and doing this instead:

```
var ele = document.getElementById('id-of-the-form');
if(ele.addEventListener){
    ele.addEventListener("submit", addFixture, false);  //Cool modern browser!
else if (ele.attachEvent){
    ele.attachEvent('onsubmit', addFixture);          //The evil IE needs extra
} 
```

Or, if you're using jQuery, this is even easier:

```
$('#id-of-the-form').submit(function(e) {
    e.preventDefault();
    addFixture(); // Or you could simply put the addFixture contents here
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:45:48.363

我不知道这是否有帮助，但 html 不是实验版本吗？所以你可能与你的浏览器有兼容性问题？您是否尝试了几种不同的浏览器？

如果验证错误被抛出，也许你应该设置像 die/exit 这样的东西，这样脚本就不会继续？我认为投掷''; 是语法。

我不太了解，只是想提供帮助：D

# thymeleaf - Thymeleaf - 格式化时检查 NULL 的最佳实践（即日期）

> ID：13825570
> 
> 赞同：26
> 
> 时间：2012-12-11T17:40:40.033
> 
> 标签：thymeleaf

我有一个 Thymeleaf 模板代码来**格式化日期**。有时该日期将`null`在返回的对象中。`null`在这种情况下，在 Thymeleaf 中检查的最佳方法是什么？当前模板抛出以下错误：

```
Caused by: java.lang.IllegalArgumentException: Cannot apply format on null
    at org.thymeleaf.util.Validate.notNull(Validate.java:37)
    at org.thymeleaf.util.DateUtils.format(DateUtils.java:182)
    at org.thymeleaf.expression.Dates.format(Dates.java:164) 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-12-13T20:42:08.033

您还可以在对象上使用条件表达式，以便仅在对象不为 null 时应用格式化方法：`th:text="${myDate} ? ${#dates.format(myDate,...)}"`

请注意，上面的表达式中没有“else”部分，在这种情况下，表达式将简单地返回 null（使`th:text`属性不写任何内容）。

*（StackOverflow 要求的免责声明：我是 thymeleaf 的作者）*

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-11T17:49:57.277

您可以使用 thymeleafs 对象实用程序类[Objects](http://www.thymeleaf.org/apidocs/thymeleaf/2.0.2/org/thymeleaf/expression/Objects.html)或在将对象传递给模板之前对其进行验证。

我更喜欢预验证，因为您通常不想在模板中随意修改。同样，您可以使数据与视图松散耦合。

# javascript - 如何根据一定的标准输出元素的数量？

> ID：13825576
> 
> 赞同：0
> 
> 时间：2012-12-11T17:40:54.223
> 
> 标签：javascript

我想计算特定汽车的数量并输出汽车，我可以计算萨博的数量，但是当我尝试排除 2 辆萨博汽车时，我得到“sa”

更新

```
<!DOCTYPE html>
<html>
<body>

<script>
cars=["BMW","Volvo","Saab","Ford","Saab"];
var count=0;
var totalSuccessArray= new Array();
for (var i=0;i<cars.length;i++)
{
    document.write(cars[i] + "<br>");
    if(cars[i]=="Saab") {   
      totalSuccessArray.push(cars[i]);

        count++;
    }   

}

alert(count);
 document.write(count + "<br>");

for (var a=0;a<count;a++)  {
            document.write("totalssuccess"+totalSuccessArray[a] + "<br>");
}

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T17:47:55.183

在您的第一个 for 循环中，您设置`totalSuccessArray`为`"Saab"`（保存在 中的值`cars[i]`）。

这意味着当您`totalSuccessArray[a]`在第二个 for 循环中引用时，它的值是一个字符串。字符串是一个字符数组，所以第二个 for 循环所做的是输出前两个元素，`"Saab"`即字符`"S"`和`"a"`。

你需要换行

```
totalSuccessArray = cars[i]; 
```

到

```
totalSuccessArray.push(cars[i]); 
```

这样您就可以将值“Saab”添加到现有`totalSuccessArray`数组中。

除此之外，您还应该将声明移到`totalSuccessArray`代码顶部，在 for 循环之外。

您还可以对此代码进行许多其他优化，但这超出了具体问题的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T17:45:45.283

您正在更改`totalSuccessArray`为字符串，然后遍历其中的字母。字符串上使用的括号返回该位置的字符。我认为您的意思是将新车添加到阵列中：

```
cars=["BMW","Volvo","Saab","Ford","Saab"];
var count=0;
var totalSuccessArray= new Array();
for (var i=0;i<cars.length;i++) {
    document.write(cars[i] + "<br>");
    if(cars[i]=="Saab") {
        totalSuccessArray[count] = cars[i];
        count++;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T17:46:02.980

尝试将你的`totalSuccessArray`定义移到你的 for 循环之外，然后`push()`像这样将元素添加到它上面：

```
cars=["BMW","Volvo","Saab","Ford","Saab"];
var count=0;
var totalSuccessArray= new Array();
for (var i=0;i<cars.length;i++)
{
    document.write(cars[i] + "<br>");
    if(cars[i]=="Saab") {
        totalSuccessArray.push(cars[i]);
        count++;
    }   
} 
```

在您的原始代码中，您`totalSuccessArray`每次都在重新创建。此外，您设置的值`totalSuccessArray`是一个字符串，而不是将字符串推入数组。

# windows-8 - 没有 GridView 的语义缩放

> ID：13825577
> 
> 赞同：0
> 
> 时间：2012-12-11T17:40:58.820
> 
> 标签：windows-8, microsoft-metro, winrt-xaml, semantic-zoom

我想知道，如何在没有 GridView 控件的情况下实现自己的 SemanticZoom。

我在主页上有自己的自定义控件，但结构类似于分组的 GridView，我想在用户对组进行缩放手势后打开详细信息。

但似乎 SemanticZoom 控件只能与 GridView 一起使用。

有任何想法吗？

干杯，托马斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:46:20.247

SemanticZoom 控件中包含的控件可以是任何实现**ISemanticZoomInformation**接口的控件 - [ISemanticZoomInformation 接口](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.isemanticzoominformation.aspx)

[Semantic Zoom](http://blogs.msdn.com/b/going_metro/archive/2012/07/18/semantic-zoom-only-supports-gridview-and-listview.aspx)的简单示例仅支持 GridView 和 ListView？

# java - JPA 和 EclipseLink：检查 XXXtoMany 关系中的成员资格的最佳策略

> ID：13825581
> 
> 赞同：0
> 
> 时间：2012-12-11T17:41:21.260
> 
> 标签：java, jpa, eclipselink

有时在 ORM（如 EclipseLink）中，当两个实体之间存在关系时

```
public class ContactGroup {

    @ManyToMany(fetch=FetchType.LAZY)
    private List<User> members = new ArrayList<User>();
} 
```

如果用户是 ContactGroup 的成员，则需要进行简单的检查（我在示例的上下文中讨论）。我想在不加载所有成员的情况下做到这一点

boolean isMemeber = contactGroup.getMembers().contains(user);

我做了下一个：

```
SELECT contactGroup FROM ContactGroup contactGroup " + 
"WHERE contactGroup.id = ?1 " +
"AND ?2 MEMBER OF contactGroup.users" 
```

并在我的 DAO 层检查 contactGroup 是 NULL 还是 NO。在这种情况下，我避免加载所有用户只是为了进行简单的检查。

我的问题是：你认为这是一个很好的策略吗？如果没有，您能否提供更多信息或其他策略？

我在谷歌上搜索，但没有找到好的结果。

在此先感谢，西蒙

# java - 尝试使用 drawString 方法打印名称

> ID：13825582
> 
> 赞同：2
> 
> 时间：2012-12-11T17:41:24.293
> 
> 标签：java, graphics, drawstring

我现在只是在浏览一些基本教程。现在的人想要一个能把你的名字画成红色的图形程序。我试图创建一个扩展 JComponent 的 NameComponent 类，并使用 drawString() 方法来执行此操作：

```
import java.awt.Graphics2D;
import java.awt.Graphics;
import java.awt.Color;
import javax.swing.JComponent;

public class NameComponent extends JComponent {

    public void paintMessage(Graphics g) {

    Graphics2D g2 = (Graphics2D) g;

    g2.setColor(Color.RED);
    g2.drawString("John", 5, 175);

    }
} 
```

并使用使用 JFrame 的 NameViewer 类来显示名称：

```
import javax.swing.JFrame;

public class NameViewer {

public static void main (String[] args) {

    JFrame myFrame = new JFrame();
    myFrame.setSize(400, 200);
    myFrame.setTitle("Name Viewer");
    myFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    NameComponent myName = new NameComponent();
    myFrame.add(myName);

    myFrame.setVisible(true);
    }
} 
```

...但是当我运行它时，框架出现空白！谁能让我知道我在这里做错了什么？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:50:58.173

You need to override the method `paintComponent` rather than `paintMessage`. Adding the `@Override` annotation over the method will show that `paintMessage` is not a standard method of `JComponent`. Also you may want to reduce the y-coordinate in your `drawString` as the text is currently not visible due to the additional decoration dimensions of the `JFrame`. Finally remember to call `super.paintComponent` to repaint the background of the component.

```
@Override
public void paintComponent(Graphics g) {
   super.paintComponent(g);
   Graphics2D g2 = (Graphics2D) g;
   g2.setColor(Color.RED);
   g2.drawString("John", 5, 100);
} 
```

See: [Painting in AWT and Swing](http://www.oracle.com/technetwork/java/painting-140037.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:44:35.100

您需要在之后添加此行`public void paintMessage(Graphics g){`：

`super.paint(g);`

这告诉 Java 使用超类 (JComponent) 来绘制消息。

您还需要调用您的方法`paintComponents()`而不是`paintMessage()`

# sharepoint-2010 - 如何更改 SharePoint 2010 外部内容类型中的编辑器类型

> ID：13825583
> 
> 赞同：0
> 
> 时间：2012-12-11T17:41:29.497
> 
> 标签：sharepoint-2010, external-contenttype

在我们的 SP2010 站点中，我们有一个 peoplesoft 数据库的外部内容类型。其中一种类型是字符串，在编辑列表中的项目时显示为单行文本。我们需要能够在此数据字段中存储超过 254 个字符，但不知道在哪里进行更改。任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:39:08.843

我不是通过更改字段类型来修复它，而是通过在 editform 文件中添加一些 javascript 来更改文本框的 maxlen 属性。

# struts2 - s：来自请求的文本标记属性名称

> ID：13825591
> 
> 赞同：1
> 
> 时间：2012-12-11T17:41:57.943
> 
> 标签：struts2

我想为我的 i18n 做这样的事情，

```
<s:text name="#request.delements.get(positionId).element.i18n"></s:text> 
```

但是打印的是请求对象中的值，而不是属性文件中定义的相应属性。

这可以通过任何其他方式实现吗？

问候， 阿尤什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T18:59:48.153

在标签属性中使用`%{}`符号。`<s:text>``name`

```
<s:text name="%{#request.delements.get(positionId).element.i18n}"></s:text> 
```

# google-app-engine - 没有索引的 Google App Engine 查询

> ID：13825596
> 
> 赞同：1
> 
> 时间：2012-12-11T17:42:28.637
> 
> 标签：google-app-engine, app-engine-ndb

我有一个部署的 GAE 应用程序，我注意到我有这个简单的查询：

```
MBObject.query(MBObject.groupId == group.id).fetch() 
```

`groupId`是一个`ndb.StringProperty(indexed=True)`

查看我的 index.yaml 文件，甚至我的 GAE 仪表板（在 appengine.google.com）中的数据存储索引，无论如何都没有列出此属性的索引。这通常意味着我在上传之前没有在开发模式下测试整个应用程序，所以我必须手动插入索引。

但是，查询工作得很好。它成功返回了我想要的所有对象。我想知道这怎么可能？为什么即使通过 groupId 的查询也没有在我的 index.yaml 和仪表板中列出？它不应该引发一些错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T17:55:22.853

GAE 自动索引所有实体，并且您的查询不需要特定的索引定义，`index.yaml`因为您只查询一个属性（即使您查询多个属性，它也不会创建任何属性）。

如果您要订购此查询，可以通过`date`属性说它会创建一个索引定义，`index.yaml`如果您将在 SDK 中运行它，或者您可以手动编写它们。

来自[文档](https://developers.google.com/appengine/docs/python/config/indexconfig#Automatic_and_Manual_Indexes)：

> 应用程序进行的每个数据存储查询都需要相应的索引。自动创建简单查询的索引，例如对单个属性的查询。复杂查询的索引必须在名为 index.yaml 的配置文件中定义。此文件与应用程序一起上传，以在数据存储中创建索引。

# mysql - 在查询中使用最新记录的值

> ID：13825597
> 
> 赞同：0
> 
> 时间：2012-12-11T17:42:31.043
> 
> 标签：mysql

我有一个包含以下 3 个表的数据库：

## 重大的

```
id_major 
major_name 
```

## 主要年份

```
id_major 
id_year 
```

## 年

```
id_year 
year 
```

我正在使用以下 select 语句来检索相关数据：

```
SELECT * FROM major m
     JOIN major_year mj
       ON m.id_major=mj.id_major
     JOIN year y
       ON mj.id_year=y.id_year
WHERE y.id_year="?" 
```

我想自动指定最新的`y.id_year`，那么我应该`?`在查询中使用什么来代替？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:54:04.353

假设您的新 id_year 是基于 MAX(id_year)。尝试这个

```
select top 1 from major m 
    join major_year mj 
      on m.id_major=mj.id_major 
    join year y 
      on mj.id_year=y.id_year 
order by y.id_year desc 
```

# c# - Application ErrorSystem.InvalidOperationException：渲染线程上发生未指定的错误

> ID：13825598
> 
> 赞同：2
> 
> 时间：2012-12-11T17:42:32.217
> 
> 标签：c#, .net, wpf, .net-4.0

我们的 Framework 3.5 sp1，WPF 应用程序在 XP 和 win 7 机器上随机挂起，但出现以下异常。我们有数百名用户，这对任何人来说都是随机发生的，我们没有看到任何异常发生的模式。我们进行了很多搜索，MS 发布了一个 3.5 补丁，它也包含在 3.5 sp1 中，应该可以解决这个问题，但正如你所见，它仍然发生在我们身上。

```
错误 2012-12-10 08:56:12,348[UI]：主机：应用程序 ErrorSystem.InvalidOperationException：渲染线程上发生未指定的错误。
   在 System.Windows.Media.MediaContext.NotifyPartitionIsZombie（Int32 failureCode）
   在 System.Windows.Media.MediaContext.NotifyChannelMessage()
   在 System.Windows.Interop.HwndTarget.HandleMessage（Int32 消息，IntPtr wparam，IntPtr lparam）
   在 System.Windows.Interop.HwndSource.HwndTargetFilterMessage（IntPtr hwnd，Int32 msg，IntPtr wParam，IntPtr lParam，Boolean& 处理）
   在 MS.Win32.HwndWrapper.WndProc（IntPtr hwnd，Int32 msg，IntPtr wParam，IntPtr lParam，Boolean& 处理）
   在 MS.Win32.HwndSubclass.DispatcherCallbackOperation（对象 o）
   在 System.Windows.Threading.ExceptionWrapper.InternalRealCall（委托回调，对象参数，布尔 isSingleParameter）
   在 System.Windows.Threading.ExceptionWrapper.TryCatchWhen（对象源，委托回调，对象 args，布尔 isSingleParameter，委托 catchHandler）

```

我们在日志中看到，在`Renderthread`引发上述异常之前，重复记录了 10-15 次以下异常。在异常开始出现之前，我们还注意到日志中有一段时间不活动（10-15 分钟）

```
错误 2012-12-04 10:38:30,854[UI]：主机：应用程序 ErrorSystem.Runtime.InteropServices.COMException（0x88980406）：HRESULT 异常：0x88980406
   在 System.Windows.Media.Composition.DUCE.Channel.SyncFlush()
   在 System.Windows.Media.Composition.DUCE.CompositionTarget.UpdateWindowSettings（ResourceHandle hCompositionTarget，RECT windowRect，颜色 colorKey，单个常量 Alpha，MILWindowLayerType windowLayerType，MILTransparencyFlags 透明度模式，布尔 isChild，布尔 isRTL，布尔 renderingEnabled，Int32 disableCookie，通道通道）
   在 System.Windows.Interop.HwndTarget.UpdateWindowSettings（布尔 enableRenderTarget，Nullable`1 channelSet）
   在 System.Windows.Interop.HwndTarget.UpdateWindowSettings（布尔 enableRenderTarget）
   在 System.Windows.Interop.HwndTarget.UpdateWindowPos（IntPtr lParam）
   在 System.Windows.Interop.HwndTarget.HandleMessage（Int32 消息，IntPtr wparam，IntPtr lparam）
   在 System.Windows.Interop.HwndSource.HwndTargetFilterMessage（IntPtr hwnd，Int32 msg，IntPtr wParam，IntPtr lParam，Boolean& 处理）
   在 MS.Win32.HwndWrapper.WndProc（IntPtr hwnd，Int32 msg，IntPtr wParam，IntPtr lParam，Boolean& 处理）
   在 MS.Win32.HwndSubclass.DispatcherCallbackOperation（对象 o）
   在 System.Windows.Threading.ExceptionWrapper.InternalRealCall（委托回调，对象参数，布尔 isSingleParameter）
   在 System.Windows.Threading.ExceptionWrapper.TryCatchWhen（对象源，委托回调，对象 args，布尔 isSingleParameter，委托 catchHandler）

```

重新启动应用程序可解决此问题。然而，这正迅速成为我们优先考虑的问题。非常感谢任何有助于解决此问题的指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T16:56:45.900

这是一种红鲱鱼。工程团队解决了这个问题。我们的用户正在使用虚拟机并使用 citrix 连接到机器。citrix 支持使用客户端计算机 cpu/gpu 卸载图形和渲染的反向无缝设置导致了此问题。

# git - 如何同步 git 遥控器

> ID：13825599
> 
> 赞同：1
> 
> 时间：2012-12-11T17:42:41.873
> 
> 标签：git, github

我设法弄乱了我的遥控器，并希望与原点恢复同步。我之前删除了所有遥控器并手动重新添加了它们。

我的遥控器是：

```
$ git remote -v show
origin  https://github.com/rapid7/metasploit-framework (fetch)
origin  https://github.com/rapid7/metasploit-framework (push)
truekonrads     git@github.com:truekonrads/mriv-metasploit.git (fetch)
truekonrads     git@github.com:truekonrads/mriv-metasploit.git (push) 
```

我想将 origin/master 更新到最新版本，然后将 truekonrads/mirv-events 分支合并到 master 中。我该怎么做？

是否有可能以 github 跟踪来源的方式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:40:00.073

要“将源/主更新到最新版本”：

```
git fetch origin master 
```

要将 truekonrads/mirv-events 分支合并到 master 中：

```
git checkout master
git merge truekonrads/mirv-events 
```

不知道 github 跟踪来源是什么意思。您的本地存储库正在跟踪`origin`. 您可以`git remote add github <URL>; git push github origin/master:latest_origin_master`将副本推`origin/master`送到 github 以保存在 name 下`latest_origin_master`，但不清楚这是否是您想要的，特别是因为两者`origin`都`truekonrads`已经在 github 上。

鉴于您上面的输出，似乎`origin`和`truekonrads`定义相同，这是多余的。

# javascript - 如何将脚本实现到 html 文件中的按钮中？

> ID：13825604
> 
> 赞同：0
> 
> 时间：2012-12-11T17:42:52.623
> 
> 标签：javascript, button

我有一个可以在 Firebug 控制台中运行的操作脚本，但我想使用 html 按钮启动它。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:45:46.550

如果你想从其他框架访问属性，你可以用类似的模式来做：

```
// This is our frame 1
function doSomething() {
    // ...
}

// This is our frame 2
parent.frames[0].doSomething(); 
```

# objective-c - Objective C基本内存问题

> ID：13825605
> 
> 赞同：1
> 
> 时间：2012-12-11T17:42:55.930
> 
> 标签：objective-c, memory

我最近开始学习Objective C，我对一些基本的内存问题感到困惑。例如在一个教程中，我看到了这个：

```
- (void) setVin: (NSNumber*)newVin {  
    [vin release];  
    vin = [[NSNumber alloc] init];  
    vin = newVin;  
} 
```

首先，我为 vin 分配空间，然后将其分配给 newVin。那么为 vin 分配一个新的空间有什么意义呢？分配后，它不会泄漏吗？

另一件事是

```
NSString* s1 = [[NSString alloc] init];
NSString* s2 = [[NSString alloc] init]; 
```

当我打印这两个字符串的地址时，我看到这两个指针拥有相同的地址值。是因为它们拥有相同的值（我认为是空字符串），编译器决定将它们分配给相同的地址吗？或者是另一个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T17:50:17.530

这是非常糟糕的教程，因为那里肯定存在内存泄漏。正确的变体是

```
-(void) setVin: (NSNumber*)newVin {  
    if( newVin != vin ) {
         [vin release];
         vin = [newVin retain];
    }
} 
```

至于第二种情况 NSString 是不可变的，可能一些值在内部缓存。因此返回相同的值并增加保留计数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T17:52:52.193

您的第一个示例来自 ARC 之前的教程（即禁用自动引用计数）。在 ARC 中，您不需要调用`release`重新分配。

绝对没有理由`vin`像这样分配，ARC 与否。没有ARC，这是一个泄漏；使用 ARC，这是一个不必要的操作。

`NSString`您的第二个示例说明了s 是不可变的事实。由于两个调用都创建了空字符串，Cocoa 返回相同的对象，知道该对象不能被修改。

# android - Android Sqlite 不像多条件问题

> ID：13825609
> 
> 赞同：2
> 
> 时间：2012-12-11T17:43:09.237
> 
> 标签：android, sqlite, android-sqlite

我想选择与传递的*eta*、*category*和*class*、 属性匹配但不包含传递的 use1 和 use2 属性的行，所以我写了这段代码

```
public Cursor getData(String use1, String use2, String eta, String category,
            String class) {
        try {
            Cursor c;
                c = mDb.rawQuery(
                        "SELECT * FROM dbtable "
                                + "WHERE Use NOT LIKE ? AND Use NOT LIKE ? AND Eta LIKE ? AND Language LIKE ? ORDER BY Name",
                        new String[] { "%" + use1 + "%", "%" + use2 + "%", "%" + eta + "%",
                                "%" + language + "%" });
            if (c != null) {
                c.moveToNext();
            }
            return c;

        } catch (SQLException mSQLException) {
            Log.e(TAG, "getDataCar >>" + mSQLException.toString());
            throw mSQLException;
        }

    } 
```

不幸的是，它不起作用，并且不排除包含属性*use1*和*use2*的行，如果我删除两个 NOT LIKE 条件，则工作正常......所以两个 NOT LIKE 条件存在语法错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:46:43.243

```
WHERE Use NOT LIKE ? AND Use NOT LIKE (NOTHING HERE) AND Eta LIKE ? AND Language LIKE ? ORDER BY Name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:12:26.393

已解决，问题是由数据库列中的空格引起的......语法是正确的。

# vb.net - 无法下载 test.xlsx - EPPlus

> ID：13825610
> 
> 赞同：3
> 
> 时间：2012-12-11T17:43:12.700
> 
> 标签：vb.net, epplus

当我尝试打开由下面的代码创建的 test.xlsx 时，我得到“无法下载 test.xlsx”。也就是说，如果我选择保存文件，我可以很好地保存和打开文件。

请让我知道我做错了什么。

谢谢！

```
 Dim pack As New ExcelPackage
    Dim ws As ExcelWorksheet = pack.Workbook.Worksheets.Add("Sheet1")
    Dim ms As New MemoryStream
    Dim dt As New DataTable

    ws.Cells(1, 1).Value = "Test"

    pack.SaveAs(ms)

    ms.WriteTo(Context.Response.OutputStream)

    Context.Response.Clear()
    Context.Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
    Context.Response.AddHeader("Content-Disposition", "attachment;filename=test.xlsx")
    Context.Response.StatusCode = 200
    Context.Response.End() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-26T13:59:08.370

以下示例代码应该可以完成这项工作：

```
Using pkg = New ExcelPackage()
    Dim ws = pkg.Workbook.Worksheets.Add("Sheet 1")
    ws.Cells(1, 1).Value = "Hello"

    Dim buf = pkg.GetAsByteArray()

    Response.Clear()
    Response.AddHeader("Content-Disposition", "attachment;filename=test.xlsx")
    Response.ContentType = MimeMapping.GetMimeMapping("*.xlsx")
    Response.BinaryWrite(buf)
    Response.Flush()
    Response.[End]()
End Using 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T19:07:47.920

我可能错了，但是您将文件写入`Response.OutputStream`然后 call `Response.Clear`，所以我认为您的响应标头发送时没有内容（没有文件），这就是为什么它说“无法下载”。

尝试将`ms.WriteTo`移至之前`Response.End`

# android - 不同版本之间的Android应用服务内存使用差异

> ID：13825611
> 
> 赞同：3
> 
> 时间：2012-12-11T17:43:16.240
> 
> 标签：android, android-service, android-memory

我有一个 Android 应用程序，它启动一个侦听传入短信的服务，并通过弹出窗口通知用户..

当我在 2.3 android 设备上安装并试用该应用程序时，它使用 4 到 5 mb 的内存，而在从 android 3.0 到 4.2 的某些设备上尝试它使用 11 mb 的内存。

你能解释这是为什么吗？或者可能是什么原因..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-15T04:39:43.910

您所看到的很可能只是位图在 2.x 与 3.x-4.x 上的存储方式不同。

在 2.x 中，位图存储在本机内存而不是 dalvik 堆上，因此您实际上无法使用 Android 内存分析工具（MAT 等）正确测量它们，因为它只查看 Dalvik 堆。请参阅此处的第二个要点：[内存管理](http://developer.android.com/training/displaying-bitmaps/manage-memory.html)

在 3.x-4.x 中，Bitmap 内存存储在 Dalvik Heap 上，因此很容易使用常用的内存工具进行跟踪。因此，您在 3.x-4.x 上的内存大小包括在 2.3 端未考虑的位图内存。

如果没有有关您的应用程序的更多信息，很难说还有什么可能导致这种情况。3.x/4.x 设备可能比 2.x 设备具有更大的堆，因此开销可能更大。太多变数无法推测。老实说，只要您的应用程序不泄漏内存并且内存不呈指数增长，您就不必太在意每个平台的差异。

希望有帮助。

# ios - Dropbox 修订

> ID：13825613
> 
> 赞同：1
> 
> 时间：2012-12-11T17:43:26.710
> 
> 标签：ios, xcode, dropbox

我想同时将 3 个文件恢复到之前的版本。使用您在下面看到的方法，适用于 1 个文件，但不适用于 3：

我打电话：

```
[[self restClient] loadRevisionsForFile:filename3 limit:10]; 
```

进而：

```
- (void)restClient:(DBRestClient*)client loadedRevisions:(NSArray *)revisions forFile:(NSString *)path{ 

for (DBMetadata *file in revisions) 
{ 
if (segmentSwitch.selectedSegmentIndex == 0) { 

NSString *title = [[NSUserDefaults standardUserDefaults]objectForKey:@"Folder3"]; 
PhotoViewController* sharedSingleton = [PhotoViewController sharedManager]; 

NSString *destDir = [[NSUserDefaults standardUserDefaults]objectForKey:@"Folder2"]; 
NSString *filename3 = [NSString stringWithFormat:@"%@%@photofile.png.%ld", destDir, title, (long)sharedSingleton.tagNumber]; 

[[self restClient] restoreFile:filename3 toRev:file.rev]; 

[[self restClient] restoreFile:filename4 toRev:file.rev]; 

[[self restClient] restoreFile:filename5 toRev:file.rev]; 

NSLog(@"MetaData's Revisions \t%@", file.rev); 

} 
} 
```

我必须这样做：

```
[[self restClient] loadRevisionsForFile:filename1 limit:10];, [[self restClient] loadRevisionsForFile:filename2 limit:10];... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:01:46.210

这个问题比我想象的要容易解决。我发现当你运行代码时

```
[[self restClient] loadRevisionsForFile:filename1 limit:10]; 
```

你正在传递的路径上。

解决方案：

```
- (void)restClient:(DBRestClient*)client loadedRevisions:(NSArray *)revisions forFile:(NSString *)path{ 

for (DBMetadata *file in revisions) 
{ 
if (segmentSwitch.selectedSegmentIndex == 0) { 

[[self restClient] path toRev:file.rev]; 

NSLog(@"MetaData's Revisions \t%@", file.rev); 

} 
} 
```

# performance - Windows 商店游戏：用于游戏的 DirectX 和用于丰富 UI 的 XAML

> ID：13825617
> 
> 赞同：1
> 
> 时间：2012-12-11T17:43:37.147
> 
> 标签：performance, xaml, windows-8, directx, windows-store-apps

可以使用 XAML 在 DirectX Windows Store 游戏中构建矢量（可缩放）丰富的 UI（带有包含按钮、列表框等的表单）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:52:10.803

Yes, you can use XAML and DirectX together in a Windows Store app. Here is an article explaining [DirectX and XAML interop](http://technet.microsoft.com/en-us/subscriptions/hh825871.aspx) and [another article from the Windows 8 app developer blog](http://blogs.msdn.com/b/windowsappdev/archive/2012/03/15/combining-xaml-and-directx.aspx).

In summary, your options are:

1.  You can use the [SurfaceImageSource](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.imaging.surfaceimagesource.aspx) XAML type to add areas of DirectX content to a Metro style XAML app.
2.  You can use [VirtualSurfaceImageSource](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.imaging.virtualsurfaceimagesource.aspx) for large-scale DirectX content + XAML UI.
3.  You can use [SwapChainBackgroundPanel](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.swapchainbackgroundpanel.aspx) for DirectX with a XAML overlay.

# c++ - 为什么这个程序不起作用？

> ID：13825618
> 
> 赞同：-1
> 
> 时间：2012-12-11T17:43:38.123
> 
> 标签：c++, jgrasp

这是我的语法。我正在尝试显示这些值的平均值。它一直给我一个错误，上面写着：错误 C2064：术语不计算为函数。

这是我的代码：

```
#include <iostream.h>

int main()

{
  double value;
  double sumofvalue = 0;
  int numberofvalues = 0;
  const int sentinel = 0;
  while(value!=sentinel){
    cout << "Enter a value (0 to quit): ";
    cin >> value;
    numberofvalues++;
    sumofvalue+=value;
  }
  cout << "Average is "((sumofvalue)/(numberofvalues));

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-11T17:45:17.490

你错过`<<`了

```
cout << "Average is " << ((sumofvalue)/(numberofvalues));
                      ^^ HERE 
```

# ios - UILabel、UIFont 和 UTF-8 三角形

> ID：13825620
> 
> 赞同：5
> 
> 时间：2012-12-11T17:43:42.730
> 
> 标签：ios, cocoa-touch, unicode, nsstring, uilabel

我想使用“黑色右指向三角形”（U+25B6）作为我`UILabel`的文本的一部分。标签使用系统字体 ( `UIFont`'s `systemFontOfSize:`)。问题是我的三角形被渲染为精美的图像，而不是“黑色的右三角形”。可以看纯版吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-12T08:55:04.370

基于：

[iOS5 中 Unicode 字符的绘制方式不同](https://stackoverflow.com/questions/8335724/unicode-characters-being-drawn-differently-in-ios5/8412044#8412044)

iOS 6 支持**Unicode 6.1 的变体选择器**，在这种情况下`\U0000FE0E`。回答我自己的问题：

```
@"\U000025B6" // a fancy triangle (mapped to Emoji)
@"\U000025B6\U0000FE0E" // black right-pointing triangle 
```

有关更多信息，请查看：[http ://www.unicode.org/versions/Unicode6.1.0/](http://www.unicode.org/versions/Unicode6.1.0/)

感谢@martin-r 和@ACB，如果没有您的提示，我将无法解决这个问题！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T18:46:29.877

如果有人无权访问该开发论坛，下面提到的行是 Apple 的回复。

> “借助我们在 iOS 中发布的字体集，Hiragino Kaku Gothic ProN 拥有您正在寻找的字形。”

尝试使用该特定字体。这是现在唯一可用的方法。

# facebook - .htaccess 允许 Facebook 访问 PHP 文件

> ID：13825622
> 
> 赞同：0
> 
> 时间：2012-12-11T17:43:47.173
> 
> 标签：facebook, .htaccess

我有一个 Facebook 应用程序在我的服务器上的 iframe 中运行 php 脚本，并且希望保护 PHP 文件不被 Facebook 应用程序以外的任何人访问，因此我使用了以下 .htaccess：

```
<Files *.php>
Order Deny,Allow
Deny from all
allow from facebook.com
</Files> 
```

它不起作用，我只收到消息“禁止您无权访问此服务器上的 /xxxxx/”。当我尝试在 Facebook 中使用我的应用程序时。

我需要什么才能允许 Facebook 访问以在 iframe 中运行脚本但阻止其他任何人访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:01:11.080

检查是否存在`$_REQUEST['signed_request']`。做类似的事情

```
if( !isset($_REQUEST['signed_request']) )
  exit('Permission denied'); 
```

更多信息：[https ://developers.facebook.com/docs/howtos/login/signed-request/](https://developers.facebook.com/docs/howtos/login/signed-request/)

# php - 在 PHP 中将日期从任何格式转换为任何格式的库？

> ID：13825626
> 
> 赞同：-1
> 
> 时间：2012-12-11T17:44:01.747
> 
> 标签：php, cakephp, date

有一个 PHP 库，我可以在其中将日期通知为字符串、字符串中使用的当前格式以及将输出格式转换为某些函数/方法以转换日期？

例子：

```
convertDate('d/m/Y', 'y.m.d', '11/03/1991') # will output 91.03.11 
```

我没有找到仅使用 PHP 函数执行此操作的简单方法，因为它们需要特定格式的日期（例如：）`MM/DD/YYYY`而不是任何格式。

我可以通过一些特定格式的编码来做到这一点，但我正在寻找更广泛的东西，因为我认为它在几个项目中都会有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:49:12.057

DateTime 对象 - 在手册中阅读它们：[http](http://www.php.net/manual/en/book.datetime.php) : //www.php.net/manual/en/book.datetime.php，特别是 createFromFormat() 方法[http://www.php.net/manual/en/ datetime.createfromformat.php](http://www.php.net/manual/en/datetime.createfromformat.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:14:16.190

通过将“/”替换为“-”，strtotime 会生成您想要的日期：

```
$myTime = "11/03/1991";
$theDate = date('Y-m-d', strtotime(str_replace('/', '-', $myTime)));
echo $theDate; //displays 1991-03-11 
```

据说它这样做是因为：

> 连字符表示 ISO 日期格式，圆点表示欧洲，斜线表示美国。

# perl - Perl，将变量设置为整个命令行“字符串”而不是参数

> ID：13825631
> 
> 赞同：0
> 
> 时间：2012-12-11T17:44:30.733
> 
> 标签：perl, command-line-arguments, argv

我需要允许用户在运行我的 perl 脚本时输入任何内容，因为我的脚本正在以不同的增量将所有数据发送到另一个非自定义脚本。

理论上，我希望这会发生：

```
perlscript "this is" -t stuff\n4^./q% 
```

然后，在 perlscript 中，有：

```
print "Full: $full_command"; 
```

这导致：

```
Full: "this is" -t stuff\n4^./q% 
```

这有任何意义吗？我尝试过的任何事情都没有完全符合我正在寻找的 argv 或类似的东西。

感谢您的帮助，蒂姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T18:18:59.833

外壳做的事情相当于

```
exec('perlscript', 'this is', '-t', 'stuff'.chr(0x0A).'4&^./q%'); 
```

没有办法`perl`从中产生原始的 shell 命令。如果你想让 Perl 接收

```
"this is" -t stuff\n4^./q% 
```

你需要告诉 shell 使用类似的东西

```
perlscript '"this is" -t stuff\n4^./q%' 
```

（好吧，至少对于 Borne 壳或衍生物而言。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T17:57:17.317

不幸的是，您的 shell 很可能在参数到达 Perl 脚本之前就对其进行了操作。在您的具体示例中，像 bash 这样的 shell 将删除引号，将`\n`视为`n`，并在到达 时停止处理该行`&`。在 Unixy 系统中，最好的办法可能是将所有参数用单引号括起来

```
perlscript '"this is" -t stuff\n4&^./q%' 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-11T18:10:36.817

假设您为您的操作系统正确引用，如上所述，也许以下内容对您有用：

```
print join(" ", map { / / ? "\"$_\"" : $_ } @ARGV); 
```

请注意，当您运行 perl 时，您需要使用“--”标记将用于 perl 本身的参数与用于您的程序的参数分开。例如：

```
perl -- -t 'stuff...' 
```

这将防止参数被 perl 本身错误地使用。

# php - 如何从 PHPSECLIB $sftp->put 获取错误信息

> ID：13825636
> 
> 赞同：8
> 
> 时间：2012-12-11T17:44:45.987
> 
> 标签：php, sftp, phpseclib

我正在使用 PHPseclib 将文件从本地文件服务器传输到远程文件服务器。我能够连接到服务器，对本地文件服务器上的目标文件拥有 0777 权限，但 $sftp->put 失败。现在它返回布尔值，但有没有办法可以提取实际的错误消息或至少一个错误代码？

我试过 $sftp->error，但该值为空。我正在运行 PHP5.1（无法升级到最新版本 b/c，它实际上不是我的服务器）。

* * *

解决方案：

使用 $sftp->getSFTPErrors() 返回一个包含 sftp 错误的数组。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T17:59:44.057

您可以尝试`$ssh->getErrors()`，这将返回错误。你也可以这样做`$ssh->getSFTPErrors()`。

失败的日志可能会提供一些见解，但让我们先看看错误给你带来了什么。

# visual-studio - 使用 Visual Studio 2012 以 .NET 3.5 为目标

> ID：13825638
> 
> 赞同：1
> 
> 时间：2012-12-11T17:44:50.173
> 
> 标签：visual-studio, .net-3.5, visual-studio-2012, c++-cli

我发现其他参考资料说我需要做的就是将 .vcxproj 文件中的 TargetFrameworkVersion 从 4.0 更改为 3.5。

但是，这不起作用。

我的代码仍然可以编译。但是当我尝试从 3.5 代码中引用它时，它说它来自错误的框架版本。我可以通过 Reflector 确认它仍然以 4.0 运行时为目标。

任何想法这里可能有什么问题？

# php - Codeigniter ajax发布数据错误

> ID：13825644
> 
> 赞同：-1
> 
> 时间：2012-12-11T17:45:31.383
> 
> 标签：php, jquery, ajax, codeigniter

为什么我的 ajax 不执行？我检查了控制器和模型，它们都很好。问题是主要的ajax是：

```
function updateTable()  {
var count = document.getElementsByName('chk[]').length;
var academic = document.getElementById('cb_AcademicYear').value;
var acyear = academic.substr(0,4);
var sem = "SE00"+academic.substr(5);
var yearlevel = document.getElementById('cb_Yearlevel').value;
var acstart = "";
var acend = "";
var atstart = "";
var atend = "";
var status = "";
var successCount =0;
var ele = "";
var data = "";
for (i=0;i<count;i++)
{
    if(document.getElementById('chk_'+i).checked)
    {
        ele = i+"[]";
        acstart = document.getElementById('acstart_'+i).value;

        acend = document.getElementById('acend_'+i).value;

        atstart = document.getElementById('atstart_'+i).value;

        atend = document.getElementById('atend_'+i).value;

        status = document.getElementById('cmb_'+i).value;

        var postData = {
            'acyear' : acyear,
            'sem' : sem,
            'yearlevel' : yearlevel,
            'acstart' : acstart,
            'acend' : acend,
            'atstart' : atstart,
            'atend' : atend,
            'status' : status
        };

        $.ajax({
        url: '<?php echo base_url()?>academicCalendar_entry/update', 
        data: postData ,
        type: 'POST',
        success: function (data){
            successCount++;
        }
        });
    }
}
alert("Successfully inserted ("+successCount+") data(s) including: "+count+ele+acstart+acend+atstart+atend+status+"\n"+academic+acyear+sem+yearlevel+"\n\nand this is the link for the jquery : <?php echo base_url()?>academicCalendar_entry/update/"); 
```

}

我把 postdata 作为一个数组，这应该没问题。但我没有把它作为 json 数据类型。我是否必须将其作为 json 数据类型？在错误控制台中，我没有看到任何错误消息，但它仍然没有执行到数据库。

任何人都可以解决这个问题吗？

2012 年 12 月 12 日编辑：这是我的控制器中的 update() 函数：

```
function update()
    {
        $academic_year = $_POST['acyear'];  //trim($this->input->post('acyear'));
        $semester = $_POST['sem'];          //trim($this->input->post('sem'));
        $yearlevel = $_POST['yearlevel'];       //trim($this->input->post('yearlevel'));
        $acstart = $_POST['acstart'];           //trim($this->input->post('acstart'));
        $acend = $_POST['acend'];               //trim($this->input->post('acend'));
        $atstart = $_POST['atstart'];           //trim($this->input->post('atstart'));
        $atend = $_POST['atend'];               //trim($this->input->post('atend'));
        $status = $_POST['status'];         //trim($this->input->post('status'));
        $auditname = "Admin";
        $auditactivity = "U";
        $audittime = date("Y-m-d");
        $this->load->model('calendar_Model','cm');
        $this->cm->updateAcademicEntry($academic_year,$semester,$yearlevel,$acstart,$acend,$atstart,$atend,$status,$auditname, $auditactivity, $audittime);
        return true;
    } 
```

我尝试过使用 $this->input->post、trim 和 $_POST()，但它们都没有解决它。

这就是我放置 updateTable() 函数的地方：

```
<input type="submit" name="btn_save" id="btn_save" value="Save" onclick="updateTable()"/> 
```

这是我在 Model 中的 updateAcademicEntry() 函数：

```
function updateAcademicEntry($academic_year,$semester,$yearlevel,$acstart,$acend,$atstart,$atend,$status,$auditname, $auditactivity, $audittime)
{
    $data = array(
                'Tahun_Akademik'=>$academic_year,
                'Tanggal_Mulai_Akademik'=>$acstart,
                'Tanggal_Akhir_Akademik'=>$acend,
                'Tanggal_Mulai_Kehadiran'=>$atstart,
                'Tanggal_Akhir_Kehadiran'=>$atend,
                'Status'=>$status,
                'NamaAudit'=>$auditname,
                'AktivitasAudit'=>$auditactivity,
                'TanggalAudit'=>$audittime,
                'ID_Semester'=>$semester,
                'ID_Level_Year'=>$yearLevel
                );
    $this->db
            ->where('Tahun_Akademik',$academic_year)
            ->where('ID_Level_Year',$yearLevel)
            ->where('ID_Semester',$semester)
            ->update('trkalenderakademik',$data);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:11:11.830

有2个可能的问题：

1.  您的控制器中有错误。在这种情况下，您必须更改它。

2.  您的意思是在回调中添加警报。当前，如果该功能有效或无效，警报就会运行。此外，由于 ajax 与警报异步运行，因此警报不会有更新值`successcount`

    ```
    $.ajax({
      url: '<?php echo base_url()?>academicCalendar_entry/update', 
      data: postData ,
      type: 'POST',
      success: function (data){
         successCount++;
         alert("Successfully inserted ("+successCount+") data(s) including: "+count+ele+acstart+acend+atstart+atend+status+"\n"+academic+acyear+sem+yearlevel+"\n\nand this is the link for the jquery : <?php echo base_url()?>academicCalendar_entry/update/");`

       }
    });` 
    ```

# java - 我们可以在作业的 LHS 上构建和使用字符串吗？

> ID：13825645
> 
> 赞同：2
> 
> 时间：2012-12-11T17:45:33.917
> 
> 标签：java, variables, syntax

我知道这是一个有趣的问题。我想知道这是否可以完成？

```
Class foo {

public static void main(String [] args){
for (int i=0; i<5; i++)

//build string obji where i =0..5
//use the built string using stringbuilder and use the built string in this experssion
foo <built string> = new foo();

System.out.println(obj1.somemethod(i));

}
}

public somemethod(i){

return ("I am objet"+i)

}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T17:46:41.750

不，变量不是在执行时动态创建的。只需创建一个`Map<String, Foo>`，或者可能只是一个`Foo[]`.

目前尚不清楚为什么在这种情况下你甚至想要多个变量......但它*只是*伪代码......

# r - nlstools 方法不接受 nls 对象

> ID：13825648
> 
> 赞同：0
> 
> 时间：2012-12-11T17:45:43.467
> 
> 标签：r

我在 R 中使用 nlstools 包。我为我的数据拟合了一个模型并很好地绘制了它。我不确定我做错了什么，但我似乎无法从 nlstools 调用方法，因为我收到“找不到对象”的错误。这是代码，错误行已注释：

```
Y=y_coll
X=x_ntips
d=data.frame(X,Y)

thisfit=nls(Y ~ a*X^b,data=d, start = list(a = .1, b = .1)) 

### Error in eval(expr, envir, enclos) : object 'd' not found
#a=nlsBoot (thisfit, niter = 999)
#cr= nlsConfRegions(thisfit, exp = 2, length = 200) 

#plotting   
res= data.frame(X, pred = predict(thisfit)) 
points(res[order(X),], type='l', col="grey40", lty=1) 
```

关于发生了什么的任何想法？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T15:38:01.687

好的，这就是我发现的：问题是当对 nlsBoot 的调用在函数内部时。下面的代码应该会复制问题（nlsBoot 找不到变量 d）：

```
library(nlstools)

call_thisFunction <- function(){

        X=c(69, 36, 135, 66, 10, 6, 15, 18)
        Y=c(0.10008780, 0.20840336, 0.08147234, 0.12500000, 0.19444444, 0.60000000, 0.21978022, 0.29411765)
        d<- data.frame(X=X,Y=Y)
        print(d)
        thisfit<- nls(Y ~ a*X^b,data=d, start = list(a = .1, b = .1)) 
        print("done NLS")
        a= nlsBoot(thisfit, niter = 50) #FAIL - Error in eval(expr, envir, enclos) : object 'd' not found

}

call_thisFunction() 
```

我还注意到，如果我将变量 d 设为全局：

```
d<<- data.frame(X=X,Y=Y) 
```

或者在调用之前在函数之外定义它：

```
(...)
d=c()
call_thisFunction() 
```

一切正常。如果有人知道原因，请发布。谢谢！

这是一个修复（注释掉的行来自原始行，并被它们后面的行替换）：

```
# nlsBoot <- function(nls, niter = 999)
nlsBoot <- function (nls, niter = 999, envir = parent.frame())
{
    if (!inherits(nls, "nls")) 
        stop("Use only with 'nls' objects")

    # data2 <- eval(nls$data, sys.frame(0))
    data2 <- eval(nls$data, envir)
    fitted1 <- fitted(nls)
    resid1 <- resid(nls)
    var1 <- all.vars(formula(nls)[[2]])
    l1 <- lapply(1:niter, function(i) {
        data2[, var1] <- fitted1 + sample(scale(resid1, scale = FALSE), 
            replace = TRUE)
        nls2 <- try(update(nls, start = as.list(coef(nls)), data = data2), 
            silent = TRUE)
        if (inherits(nls2, "nls")) 
            return(list(coef = coef(nls2), rse = summary(nls2)$sigma))
    })
    if (sum(sapply(l1, is.null)) > niter/2) 
        stop(paste("Procedure aborted: the fit only converged in", 
            round(sum(sapply(l1, is.null))/niter), "% during bootstrapping"))
    tabboot <- sapply(l1[!sapply(l1, is.null)], function(z) z$coef)
    rseboot <- sapply(l1[!sapply(l1, is.null)], function(z) z$rse)
    recapboot <- t(apply(tabboot, 1, quantile, c(0.5, 0.025, 
        0.975)))
    colnames(recapboot) <- c("Median", "2.5%", "97.5%")
    estiboot <- t(apply(tabboot, 1, function(z) c(mean(z), sd(z))))
    colnames(estiboot) <- c("Estimate", "Std. error")
    serr <- sum(sapply(l1, is.null))
    if (serr > 0) 
        warning(paste("The fit did not converge", serr, "times during bootstrapping"))
    listboot <- list(coefboot = t(tabboot), rse = rseboot, bootCI = recapboot, 
        estiboot = estiboot)
    class(listboot) <- "nlsBoot"
    return(listboot)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T20:32:30.137

我无法重现该错误（作为答案发布，而不是为体面的代码格式发表评论）。

```
set.seed(101)
d <- data.frame(X=rlnorm(100),Y=runif(100))
thisfit=nls(Y ~ a*X^b,data=d, start = list(a = .1, b = .1)) 
library(nlstools)
a=nlsBoot (thisfit, niter = 999)
cr= nlsConfRegions(thisfit, exp = 2, length = 200) 
## 100%
##  Confidence regions array returned 
res= data.frame(X, pred = predict(thisfit)) 
```

下一行将失败，因为您尚未创建绘图：

```
## points(res[order(X),], type='l', col="grey40", lty=1) 
## Error in plot.xy(xy.coords(x, y), type = type, ...) : 
##    plot.new has not been called yet 
```

`plot(cr)`似乎确实有效；也一样`plot(res[order(X),])`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-22T23:54:25.453

我在这里发布这个是因为我发现了同样的问题并且答案似乎并不明确。像 nlsJack 和 nlsBoot 这样的 nlstools 需要访问原始数据集，因为传递给函数的只是 nls 对象，它不包含指向原始数据的链接，只是它的标签。因此，当您将数据集作为全局对象提供时，nlsBoot（或 nlsJack）将找到它并运行分析。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-02T20:08:50.443

我在使用包含`NA`'s 的数据时遇到了同样的问题。一旦我删除了`NA`'s，代码就可以正常工作。

# volume - 按住键而不是重新按下

> ID：13825652
> 
> 赞同：1
> 
> 时间：2012-12-11T17:45:52.620
> 
> 标签：volume, modifier

我正在使用这个脚本来改变我电脑上的音量

# Q::发送 {Volume_Up 6}

# A::发送 {Volume_Down 6}

这几乎完全符合我的要求，但是我想按住 windows 键并按 Q 或 A 来反复提高或降低音量，而不是像现在这样每次都重新按下 windows 键。

任何帮助表示赞赏！

# jquery - 访问 jquery colorbox 中的另一个外部链接

> ID：13825659
> 
> 赞同：0
> 
> 时间：2012-12-11T17:46:29.360
> 
> 标签：jquery, colorbox

我打开一个 jquery 颜色框。href 将我带到一个有很多外部链接的页面。我希望能够点击链接并在打开的颜色框中打开链接。那可能吗？？

该链接是 Facebook 登录名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:52:50.477

如果您查看站点示例，您会发现可以将其作为 iframe 打开。

```
$('#myLink').colorbox({iframe:true, width:"80%", height:"80%"}); 
```

*参考资料*：

*   [演示](http://www.jacklmoore.com/colorbox/example4/)
*   [http://www.jacklmoore.com/colorbox](http://www.jacklmoore.com/colorbox)

# r - 如何删除 EPS 文件的设备边距

> ID：13825660
> 
> 赞同：0
> 
> 时间：2012-12-11T17:46:29.840
> 
> 标签：r, plot

我正在将一些图导出到 EPS 文件。我的代码是

```
setEPS()
postscript("test.eps")
par(mar=c(0,0,0,0))
plot(1:10)
dev.off() 
```

但我发现绘图区域周围有（设备）边距。如何删除它们？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T18:04:23.587

那不是边际。请注意代码生成的 EPS 中没有轴、刻度线或图框。没有空间来绘制这些，并且图框将恰好位于 EPS 的边缘。

您看到的是 R 添加到轴限制的额外填充，以确保绘图字符位于绘图区域内，而不是在其边缘。IIRC 这个填充是 4%。

您可以分别使用 x 轴和 y 轴的`xaxs`和绘图参数来关闭它；`yaxs`看`?par`

```
 ‘xaxs’ The style of axis interval calculation to be used for the
      x-axis.  Possible values are ‘"r"’, ‘"i"’, ‘"e"’, ‘"s"’,
      ‘"d"’.  The styles are generally controlled by the range of
      data or ‘xlim’, if given.
      Style ‘"r"’ (regular) first extends the data range by 4
      percent at each end and then finds an axis with pretty labels
      that fits within the extended range.
      Style ‘"i"’ (internal) just finds an axis with pretty labels
      that fits within the original data range.
      ** editted for brevity **
      (_Only ‘"r"’ and ‘"i"’ styles have been implemented in R._) 
```

默认是`"r"`，而是使用：

```
setEPS()
postscript("test.eps")
par(mar=c(0,0,0,0), xaxs = "i", yaxs = "i")
plot(1:10)
dev.off() 
```

# c# - Assert.AreEqual 以相同的类型失败

> ID：13825663
> 
> 赞同：1
> 
> 时间：2012-12-11T17:46:37.633
> 
> 标签：c#, asp.net, .net, unit-testing, assert

我正在测试两个对象（以及它们的集合），但即使它们具有相同的类型，它也会失败：

![在此处输入图像描述](../Images/f5fd69748e37aab79fd4e81684ceabfa.png)

我做了一些研究，这可能是因为参考文献可能有所不同。但是，它仍然是同一类型，我不知道要使用什么 Assert 方法。（CollectionAssert.AreEquivalent 也失败了）。

**已编辑**

我也在尝试检查每个字段的值是否相同，在这种情况下，我应该为每个字段执行 Assert.AreEqual 吗？

- 谢谢，所有的答案都有帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T17:48:37.970

您应该比较对象的类型。正如您正确识别的那样，对象的内容可能不同，因此它们不能被视为相等。

尝试类似的东西

`Assert.AreEqual(typeof(ObjectA), typeof(ObjectB))`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T17:49:28.720

`Assert.AreEqual`检查两个对象是否相同，而不是它们只是同一类型。要做到这一点，你会这样做：

```
Assert.AreEqual(A.GetType(), B.GetType()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T17:56:04.233

如果要比较 dto 对象的值，则必须覆盖`Equals`和`GetHashCode`方法。

例如给定类：

```
public class DTOPersona
{
    public string Name { get; set; }
    public string Address { get; set; }
} 
```

如果您认为具有相同名称（但不是地址）的 DTOPersona 类的两个对象是等效对象（即同一个人），您的代码可能如下所示：

```
public class DTOPersona
{
    public string Name { get; set; }
    public string Address { get; set; }

    protected bool Equals(DTOPersona other)
    {
        return string.Equals(Name, other.Name);
    }

    public override bool Equals(object obj)
    {
        if (ReferenceEquals(null, obj))
        {
            return false;
        }
        if (ReferenceEquals(this, obj))
        {
            return true;
        }
        if (obj.GetType() != this.GetType())
        {
            return false;
        }
        return Equals((DTOPersona) obj);
    }

    public override int GetHashCode()
    {
        return (Name != null ? Name.GetHashCode() : 0);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T17:57:13.493

如果不添加一些比较逻辑，您将无法从数据的角度知道您的类实例是否与另一个相同。

为了检查所有字段是否具有相同的值，您可以覆盖[Object.GetHashCode](http://msdn.microsoft.com/es-es/library/system.object.gethashcode%28v=vs.80%29.aspx) 和[Object.Equals](http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx)方法。

逐个字段进行比较也可以。

# ruby-on-rails - ruby on rails 的小时（分钟）选择

> ID：13825670
> 
> 赞同：0
> 
> 时间：2012-12-11T17:46:48.003
> 
> 标签：ruby-on-rails, time

嗨，我在我的视图（_form.html.erb）上有这个命令，当我编辑客户端时显示时间很好，但在分钟显示每小时的 60 分钟我只需要显示 0 分钟和 30 分钟小时。

```
 <div class="field">
       <%= f.label "Hora inicio" %><br />
       <%= f.time_select :hora_inicio, {:ampm => true}%>
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T18:00:16.583

您可以`:minute_step`作为选项传递给`time_select()`.

```
f.time_select :hora_inicio, {:minute_step => 30, :ampm => true} 
```

这将为您提供 0 分钟和 30 分钟。

# spring - 我无法解决春季异常

> ID：13825671
> 
> 赞同：0
> 
> 时间：2012-12-11T17:46:50.390
> 
> 标签：spring

我正在我的eclipse中使用spring和hibernate进行一个项目。我将 application-context.xmls 放在 src/main/resources 和我的测试类中：@ContextConfiguration({"/UserServicesImplTest-context.xml"}) 但它说：java.io.FileNotFoundException：类路径资源 [ir /cms/service/user/impl/UserServicesImplTest-context.xml] 无法打开，因为它不存在它还说：

`2012-12-11 21:02:40,108 ERROR [org.springframework.test.context.TestContextManager] - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@625dcec6] to prepare test instance [ir.cms.service.user.impl.UserServicesImplTest@7cb25b9d] java.lang.IllegalStateException: Failed to load ApplicationContext at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157) at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109) at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75) at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321) at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211) at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288) at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15) at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:290) at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231) at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50) at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193) at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52) at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191) at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42) at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184) at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61) at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71) at org.junit.runners.ParentRunner.run(ParentRunner.java:236) at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174) at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50) at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:30:06.727

试试看`@ContextConfiguration({"classpath:/UserServicesImplTest-context.xml"})`

希望有帮助。

# asp.net-mvc - MVC4 页面在 IE8 中提前停止加载

> ID：13825673
> 
> 赞同：0
> 
> 时间：2012-12-11T17:46:52.517
> 
> 标签：asp.net-mvc, asp.net-mvc-4, internet-explorer-8

我在加载 IE8 中的特定页面时遇到问题，对此我感到很困惑。它似乎在特定数量的模型调用后停止。这是我发生问题的部分代码。使用回调加载内容。

```
<div style="overflow: visible; height: 600px">
<div style='float:left; width: 680px; margin: 0; padding: 0; font-size: 20px; font-family: "OpenSansSemibold"; color: #404040'>@Model.xblack </div>
<div style='float:left; width: 680px; margin: 0; padding: 0; font-size: 19px; font-family: "OpenSansSemibold"; color: #439467'>@Model.xgreen </div>
<div style='float:left; width: 680px; margin: 0; padding: 0; font-size: 17px; font-family: "OpenSansSemibold"; color: #b61c1c'>@Model.xred</div>
<div style='float:left; width: 680px; margin: 0; padding: 0; font-size: 16px; font-family: "OpenSansSemibold"; color: #094ab2'>@Model.xblue</div>
<div class='detailsheading'>Description</div>
<div style='float:left; width: 680px; margin: 0; padding: 0; font-size: 12px'>@Model.desc</div>
<div class='detailsheading'>Description in laymans terms</div>
<div style='float:left; width: 680px; margin: 0; padding: 0; font-size: 12px'>@Model.cdesc</div>
<div class='detailsheading'>Guidelines</div>
<div style='float:left; width: 680px; margin: 0; padding: 0; font-size: 12px'>@Model.guideline</div>
<div class='detailsheading'>Coverage</div>
<div style='float:left; width: 680px; margin: 0; padding: 0; font-size: 12px'>@Model.coverinst</div>
<div class='detailsheading'>Reference</div>
<div style='float:left; width: 680px; margin: 0; padding: 0; font-size: 12px'>@Model.reference</div> 
```

在 Model.cdesc 之后页面停止加载。如果我查看源代码。在那个领域之后什么都没有。

但不是这个字段，如果我用另一个字段替换该字段，该字段将是最后显示的。

我什至不知道如何开始尝试解释这一点。我试过让它在兼容模式和IE7模式下显示，但它不起作用。

该页面在 IE7、IE9、IE10、Chrome 和 Firefox 中加载良好。

有谁知道会发生什么。我相信您可能需要更多信息。问，我会尽我所能给你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:51:22.630

我建议使用[Fiddler](http://www.fiddler2.com/fiddler2/)来查看是否有任何 HTTP 错误。然后你可以根据这些信息工作。还要比较来自 Firefox 和 IE8 的请求和回复——这可以给你一些提示和开始调试的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T20:30:41.637

该问题似乎源于将 fox pro 中的备注字段导入我从中提取数据的 SQL 数据库。通过复制备忘录字段的内容，我能够让它工作。我不确定为什么会这样，但我认为它与文本类型有关。

# scala - 在 Lift 中，如何在重复（自动复制）CssSel 变换中选择顶级元素

> ID：13825677
> 
> 赞同：2
> 
> 时间：2012-12-11T17:47:34.617
> 
> 标签：scala, lift

我有以下html结构：

```
<div class="top_level">
   ... other elements ...
</div> 
```

我希望输出产生一系列 DIV：

```
<div id="1" class="top_level">
   ... other elements ...
</div>
<div id="2" class="top_level">
   ... other elements ...
</div>
<div id="3" class="top_level">
   ... other elements ...
</div> 
```

我试图通过 CssSel 转换来做到这一点，其中嵌套元素本身将被循环（div 内有一个表），所以我有类似的东西：

```
".top_level *" #> groups.map(group =>
  ".top_level [id]" #> group.id & // WHAT CSS Selector can I use? 
  ".the_row *" #> group.rows.map( ... )
  ) 
```

一切正常，除了没有设置ID。我可以看到我的选择器“.top_level [id]”是嵌套的，因此它不起作用是有道理的，但我想不出还有什么可以放在那里以获得我正在寻找的结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T00:48:06.643

这是一种重复 .top_level 元素的方法，同时为每个节点添加一个 id 并进一步处理内容。您可以将其剪切并粘贴到 REPL 中以使用它。

```
scala> import net.liftweb.util.Helpers._
import net.liftweb.util.Helpers._

scala> val html = <div class="top_level">
     |   <table>
     |     <tr>
     |       <td>Cell</td>
     |     </tr>
     |   </table>
     | </div>
html: scala.xml.Elem = 
<div class="top_level">
  <table>
    <tr>
      <td>Cell</td>
    </tr>
  </table>
</div>

scala> val data = List(("id1", "cell 1"), ("id2", "cell 2"))
data: List[(java.lang.String, java.lang.String)] = List((id1,cell 1), (id2,cell 2))

scala> val sel = ".top_level" #> {
     |   data map { d =>
     |     ".top_level [id]" #> d._1 &
     |     "td *" #> d._2
     |   }
     | }
sel: net.liftweb.util.CssSel = CssBind(Full(.top_level), Full(ClassSelector(top_level,Empty))) 

scala> sel.apply(html)
res0: scala.xml.NodeSeq = 
NodeSeq(<div class="top_level" id="id1">
  <table>
    <tr>
      <td>cell 1</td>
    </tr>
  </table>
</div>, <div class="top_level" id="id2">
  <table>
    <tr>
      <td>cell 2</td>
    </tr>
  </table>
</div>) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:04:24.913

另一个答案是重组代码如下：

```
def listXform(itemTemplate : NodeSeq) : NodeSeq = {
  val iterableXform = for(t <- list;
      a <- t.optionalElement;
      b <- a.optionalElement
     ) yield {
     (".top_level [id]" #> a.id &
     // other bits
     ).apply(itemTemplate)
  }

  iterableXform.foldLeft(NodeSeq.Empty)( (a,b) => a ++ b)
}

def render(seq : NodeSeq) : NodeSeq = listXform(seq) 
```

但鉴于我之前的误解，这是不太理想的。

# arrays - 不使用 la 在 MIP 中打印字符串

> ID：13825682
> 
> 赞同：1
> 
> 时间：2012-12-11T17:47:49.090
> 
> 标签：arrays, mips

好吧，我有一个任务是创建一个 int 数组，将它们相加，然后打印平均值。一直不使用 la。好吧，我已经很好地完成了主要结构，但我遇到的一件事是为提示打印我的字符串。

我需要知道的是，我需要移动我必须访问我在 .data 部分中的字符串的指针。下面是我的数据部分...

```
 .data
size: .word 10
nums: .word 0, 0, 0, 0, 0, 0, 0, 0, 0, 0

prompt: .asciiz "\nEnter ten integers : "

theaverage : .asciiz "\nThe average is "
greaterthan : .asciiz "\nThese integers are greater than the average   \n----------------------------------------- "
lessthan : .asciiz "\nThese integers are less than the average \n-------------------------------------- " 
```

我的问题是我必须增加 $t0 多远才能访问我的变量提示、平均值、大于和小于。我能够自己完美地通过阵列。我从 $t0 在 .data 部分的基地址开始，就像这样......

```
main :
        lui $t0, 0x1001 # Base address of .data segment 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T01:20:05.820

您需要知道存储在数据部分中的每个元素的大小。

例如，每个`.word`消耗 4 个字节，每个字符消耗 1 个字节。

您还必须考虑到`.asciiz`字符串以空字节结尾。

因此，例如，要知道您的起始地址，`prompt`必须将基地址加上 4 ( `size`) 加上 40 (`nums`数组)。

然后，`theaverage`从`prompt`地址加 17 开始（`\n`计为 1 个字节，结尾`null`都计入）；其他标签以此类推。

另请注意， .data 段更有可能从地址 0x1000 开始，而不是您所说的 0x1001 。

# php - php 创建模块化管理功能

> ID：13825683
> 
> 赞同：0
> 
> 时间：2012-12-11T17:47:53.293
> 
> 标签：php, html, sql, web, admin

我正在尝试在我的网站上创建模块化管理功能，并且我有几个关于如何轻松查找对特定页面具有管理员权限的问题（我想要它以便我可以更改特定部分的管理员权限网站，以免给任何人太多控制权）。

我最初考虑白名单，但认为它会变得很难处理，所以我开始考虑构建一个 SQL 表来保存成员 ID 号和他们拥有管理控制权的页面（也许他们在多大程度上拥有管理员权限在该页面上）。

为了做到这一点，我考虑了 3 列，第一列是 ID，第二列是用逗号分隔的页面，第三列是带有标记位的字节，用于特定的管理功能。当用户登录时，它会将信息存储在他们拥有“快速访问”管理权限的页面的会话中，以便某些内容出现在页面上（例如创建新新闻、修改帖子、删除帖子等...)

这是一种可行/有效的方法吗？是否有关于如何授予和检查管理员权限的标准？

[编辑] 我正在寻找，并且我认为对每个操作进行检查/查找可能比在会话中保存信息要好，但是前提的其余部分是否合理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T20:00:53.607

这是我们几年前在课堂活动中所做的事情。
**使用数据库管理用户角色**

```
Table user::
  username      password      Role
    1             123          REGULAR
    2             123          MOD
    3             123          ADMIN

Table Role::
  Role-Name      Permissions
   ADMIN           WRITE,DELETE, APPEND
   MOD             WRITE,APPEND
   REGULAR        WRITE 
```

然后是所有人共有的读取权限。还有一个特殊的访客用户，只能阅读。我们使用全文搜索来检查用户角色是否具有博客中的特定权限。

例如，如果用户是管理员，他可以在他的面板上看到所有三个按钮。它是使用 PHP 完成的，并且权限在拆分后保存在数组中`,`。

```
$sql = "Select Permissions from ROLE where Role-name = (select ROLE from user where username = '1')"
$permission[] = split(mysql_query($sql), ',');

<div id = command_bar>
        <a> ...
            some common buttons..</a>
         foreach values in $permission[]
            { <a href='url?option=permission'> permission </a> } 
```

上面创建了类似的东西`<a href="url/?option=APPEND">APPEND</a>`，让用户能够扮演角色。这不是一个实际的项目，而是一个学习的课堂活动。

# python - 以与 Python 不同的用户身份运行进程

> ID：13825689
> 
> 赞同：18
> 
> 时间：2012-12-11T17:48:01.153
> 
> 标签：python, linux, popen

我正在运行一个`userA`具有 root 访问权限的脚本，我想从这个脚本进行`popen()`调用并运行一个不同的进程作为`userB`.

os.setuid() 似乎对此不起作用（除非我做错了？），我想避免使用基于 linux 的解决方案，例如`su -userB -c <command>`

`userB`在脚本运行时是否有运行进程的pythonic方式`userA`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-11T18:43:58.747

以下答案对此有一个非常好的方法：[https ://stackoverflow.com/a/6037494/505154](https://stackoverflow.com/a/6037494/505154)

那里有一个工作代码示例，但摘要是`subprocess.Popen()`与 a一起使用`preexec_fn`来设置子进程的环境，以便它作为另一个用户执行。

# r - ddply in r - 如何按列索引引用变量

> ID：13825692
> 
> 赞同：2
> 
> 时间：2012-12-11T17:48:22.260
> 
> 标签：r, plyr

假设我有一个包含许多列的数据框和一个我希望应用的特定摘要过程。可能有几列我有兴趣总结，例如`baseball`数据集的第 2、3 和 4 列：

```
 ddply(baseball, .(year), "nrow")
   ddply(baseball, .(stint), "nrow")
   ddply(baseball, .(team), "nrow") 
```

当然，我可能希望应用更复杂的摘要并有更多的输出列，但让我们坚持假设摘要将由单个列完成，并且我可能希望通过几列进行汇总。因此，让我们为摘要编写一个函数，这样我就可以轻松地更改用于 .(var) 的列：

```
 baseballByCol <- function(col) {
       ddply(baseball, .(baseball[,col]), "nrow")
   } 
```

这几乎可以工作：`baseballByCol(2)`与输出相同，`ddply(baseball, .(year), "nrow")`除了while`colnames(baseballByCol(2))`是所需的。`c("baseball[, col]", "nrow")``colnames(ddply(baseball, .(year), "nrow"))``c("year", "nrow")`

当然我们可以解决这个问题：

```
 baseballByCol <- function(col) {
       df <- ddply(baseball, .(baseball[,col]), "nrow")
       colnames(df)[1] <- colnames(baseball)[col]
       return(df)
   } 
```

现在 `baseballByCol(2)`与 的输出完全相同，`ddply(baseball, .(year), "nrow")`按我可以使用的时间来总结`baseballByCol(3)`等等。

但这闻起来有点难看。真的没有更好的方法来通过列索引而不是名称来引用“by”变量，而不是`.(baseball[,col]), "nrow")`把列名弄乱？

是否有更简洁的解决方案，其中函数将变量名作为参数而不是列索引？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T18:07:10.673

```
baseballByCol <- function(col) {
    ddply(baseball, col, "nrow")
} 
```

适用于索引和列名。

# c++ - 如何累积 3D 三角形网格的边缘？c++中计算网格边缘的算法？

> ID：13825693
> 
> 赞同：0
> 
> 时间：2012-12-11T17:48:26.463
> 
> 标签：c++, algorithm, math, computational-geometry, mesh

我想积累三角形模型/网格的边缘。例如，一个三角形立方体有 18 条边。

它看起来如此简单和容易，但实际上它太复杂了。我有一个三角形的所有相邻信息。例如，我有相邻的顶点和三角形，我知道哪些三角形有共同边，但问题是如何提取两个三角形之间的共同边。

需要考虑的一件事是边的点/顶点不应该有任何重复的索引。

首先是如何计算边的总数。记住一个立方体有 18 条边。

我尝试了很多，但现在放弃了。：） 任何想法？.

***更新1：***

好的，我有一个三角形 T[i]（索引 v1，索引 v2，索引 v3），它具有三个边 v1v2、v2v3、v3v1。

我有一个所有边缘的邻居三角形。

```
T[i].index_of_sharedTri1_with_edge_v1v2, 
T[i].index_of_sharedTri2_with_edge_v2v3, 
T[i].index_of_sharedTri3_with_edge_v3v1; 
```

现在我需要制作哪个循环才能提取独特的边缘？我需要比较哪些信息？我需要比较边顶点、共享三索引还是什么？我尝试了很多方法，但它太复杂了。

**更新 2：**

```
GLTris *e = new GLTris[nb_Tris*3];
int n = getTotalEdges_Sorted(indices, nb_Tris, e);
cout<<n<<endl;
int ne = RemoveDublicatesFromAnSortedEdgeArray(e, n);
for(int i=0; i<ne; i++)
   e[i].Cout(); 
```

我已经尝试过了，效果很好，但我需要弄清楚它是否适用于所有类型的网格，这是一种有效的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:53:18.653

如果你有三角形的数量，以及每个三角形的邻接信息，那么边的数量就是：

3 * num_triangles - num_shared_edges

其中 num_shared_edges 可以通过迭代每个三角形并将相邻三角形的数量相加来累积。然后除以 2，因为您将把它们都数了两次（这显然是假设每条边的三角形不超过两个）

如果你想建立一个独特的边缘列表，你需要跟踪它们，最好是在一些容易索引的结构中，比如地图。

流程大致如下：

1.  将边定义为两个索引 (i1, i2)。对这些索引进行排序，使 i1 < i2。现在共享边保证匹配。
2.  制作某种可以容纳这些边缘的列表结构。您需要能够通过其索引快速找到现有边，因此您需要一个可搜索的结构，例如某种树。如果您使用的是 c++，我建议使用以 i1,i2 对作为键的映射。
3.  遍历所有三角形，为每个三角形添加 3 条边。如果边缘已经存在，请不要添加它。

这里的所有都是它的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T23:56:25.023

If surface is simple and closed than by [Euler characteristic](http://en.wikipedia.org/wiki/Euler_characteristic) number of edges is `E = F + V - 2`. Cube in your example has `V=8`, `F=12`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T01:34:47.530

我学会了一个简单的技巧。
首先，您定义一个结构，它是一对无序的顶点索引（例如，`struct{int i,j}`保证的 a `i<j`）。然后创建一个`std::set<UnorderedPair>`. 最后，每次遇到边缘时，只需将其插入此集合即可。最后，该集合中的元素数量将为您提供唯一边的数量。

# android - Android：背景图块不覆盖整个区域

> ID：13825694
> 
> 赞同：1
> 
> 时间：2012-12-11T17:48:30.440
> 
> 标签：android

我试图在后台应用那个交叉线，因为我已经应用了这个代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="fill_parent"
android:background="@drawable/tiles"
android:orientation="vertical" >

<Button
    android:id="@+id/Button1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="left"
    android:layout_marginTop="@dimen/dp50"
    android:alpha="0.8"
    android:background="#99cc00"
    android:gravity="left|center_vertical"
    android:paddingLeft="@dimen/dp5"
    android:text="Login"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="@android:color/white" />

<Button
    android:id="@+id/Button2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="@dimen/dp2"
    android:alpha=".8"
    android:background="#99cc00"
    android:gravity="left|center_vertical"
    android:paddingLeft="@dimen/dp5"
    android:text="Register"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="@android:color/white" />

<Button
    android:id="@+id/Button3"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="@dimen/dp2"
    android:alpha=".8"
    android:background="#99cc00"
    android:gravity="left|center_vertical"
    android:paddingLeft="@dimen/dp5"
    android:text="Policies"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="@android:color/white" />

</LinearLayout> 
```

输出是

![在此处输入图像描述](../Images/4dd068138500748627a0bed408de6aff.png)

我也试过 android:layout_height="match_parent" & android:layout_height="wrap_content"

但这没有帮助..

有人可以告诉我我做错了什么吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:02:28.900

我猜这个布局是和 a `Fragment`inside a一起使用的`ViewPager`，对吧？该`ViewPager`集合是否填充其父级？

# matlab - 生成matlab regstats交互模型

> ID：13825696
> 
> 赞同：1
> 
> 时间：2012-12-11T17:48:35.467
> 
> 标签：matlab, regression

我在 MATLAB 中进行多元回归。我正在使用带有“交互”模型类型的 regstats，并且我有大约 12 个预测变量。我的理解是“交互”将使用所有交互项执行回归。我假设新回归变量的顺序是一个常数，然后是所有线性项，然后是所有交互项，但我不知道交互项的顺序是什么。

我知道我可以使用带有“交互”的 x2fx 来生成实际值，但是我有 66 个交互变量，我不知道哪个是哪个。

有什么简单的方法可以解决这个问题吗？当您选择“交互”时，有没有办法生成 x2fx 使用的模型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:57:31.843

> 如果 X 有 n 列，则完全二次模型的 D 的列顺序为：
> 
> 1.  常数项
> 2.  线性项（X 的列，顺序为 1、2、...、n）
> 3.  **交互项**（X 列的成对乘积，顺序**为 (1, 2), (1, 3), ..., (1, n), (2, 3), ..., (n–1 , n)** )
> 4.  平方项（按 1、2、...、n 的顺序）

[资源](http://www.mathworks.com/help/stats/x2fx.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T21:52:47.510

您还可以使用**[anovan](http://www.mathworks.com/help/stats/anovan.html)**函数，如果您指定交互模型和连续变量，它会执行相同类型的回归。然后，如果您使用三个参数作为返回值调用它，即 [p,table,stats] = anovan(...)，您可以简单地键入**stats.coeffnames**并整齐地显示它们。还需要注意的是**stats.coeffs**将显示系数的实际值。

# maven - Maven ant 任务部署到公共关系存储库而不是指定的 url

> ID：13825701
> 
> 赞同：4
> 
> 时间：2012-12-11T17:48:47.150
> 
> 标签：maven, ant, nexus, maven-ant-tasks

我难住了。我正在使用 ant 和 maven-ant-tasks 构建快照工件（非 maven）并将其部署到远程 nexus 存储库。构建过程指定存储库的 url。这是运行的 ant 目标：

```
<target name="shared_resources_war_deploy" depends="shared_resources_war">
    <artifact:pom id="sharedResourcesPom" file="${resourcesdir}/shared-resources-pom.xml" />
    <echo message="**************************${nexus.url}*************************" />
    <artifact:deploy file="${resourcesdir}/shared-resources.war">
        <remoteRepository url="${nexus.url}">
            <authentication username="${nexusUserName}" password="${nexusUserPassword}" /> 
        </remoteRepository>
        <pom refid="sharedResourcesPom"/>
    </artifact:deploy>
</target> 
```

结果：

```
shared_resources_war_deploy:
     [echo] **************************http://${nexusIP}:8081/nexus/content/repositories/snapshots*************************
[artifact:deploy] Deploying to http://${nexusIP}:8081/nexus/content/groups/public
[artifact:deploy] [INFO] Retrieving previous build number from nexus
[artifact:deploy] Uploading: com/xactsites/shared-resources/13.1.19-SNAPSHOT/shared-resources-13.1.19-20121211.172831-28.war to repository nexus at http://${nexusIP}:8081/nexus/content/groups/public
[artifact:deploy] Transferring 2K from nexus
[artifact:deploy] An error has occurred while processing the Maven artifact tasks.
[artifact:deploy]  Diagnosis:
[artifact:deploy]
[artifact:deploy] Error deploying artifact 'com.xactsites:shared-resources:war': Error deploying artifact: Failed to transfer file: http://${nexusIP}:8081/nexus/content/groups/public/com/xactsites/shared-resources/13.1.19-SNAPSHOT/shared-resources-13.1.19-20121211.172831-28.war. Return code is: 400
[artifact:deploy]

BUILD FAILED
C:\Users\11_1_15\build.xml:561: The following error occurred while executing this line:
C:\Users\11_1_15\build.xml:551: Error deploying artifact 'com.xactsites:shared-resources:war': Error deploying artifact: Failed to transfer file: http://${nexusIP}:8081/nexus/content/groups/public/com/xactsites/shared-resources/13.1.19-SNAPSHOT/shared-resources-13.1.19-20121211.172831-28.war. Return code is: 400 
```

由于某些超出我理解的原因，maven 正试图部署到公共存储库（nexus 不允许）而不是指定的快照存储库（注意 nexus.url 变量）。构建文件中没有指定公共 URL。

更奇怪的是，在一台机器上，相同的构建脚本成功地部署了相同的工件，结果如下：

```
shared_resources_war_deploy:
     [echo] **************************http://${nexusIP}:8081/nexus/content/repositories/snapshots*************************
[artifact:deploy] Deploying to http://${nexusIP}:8081/nexus/content/repositories/snapshots
[artifact:deploy] [INFO] Retrieving previous build number from remote
[artifact:deploy] Uploading: com/xactsites/shared-resources/13.1.19-SNAPSHOT/shared-resources-13.1.19-20121211.172031-27.war to repository remote at http://${nexusIP}:8081/nexus/content/repositories/snapshots
[artifact:deploy] Transferring 2K from remote
[artifact:deploy] Uploaded 2K
[artifact:deploy] [INFO] Retrieving previous metadata from remote
[artifact:deploy] [INFO] Uploading repository metadata for: 'snapshot com.xactsites:shared-resources:13.1.19-SNAPSHOT'
[artifact:deploy] [INFO] Uploading project information for shared-resources 13.1.19-20121211.172031-27
[artifact:deploy] [INFO] Retrieving previous metadata from remote
[artifact:deploy] [INFO] Uploading repository metadata for: 'artifact com.xactsites:shared-resources'

BUILD SUCCESSFUL 
```

实际使用指定 URL 的位置。在比较两台机器时，ant（1.8.1 版）和 maven-ant-tasks（2.1.3）都是同一个版本。关系日志表明传入的请求在两者之间是不同的（其中一个指定快照存储库，另一个指定公共存储库），所以我想将此错误固定在 Maven 上。但是，我无法确定会导致这种情况的任何差异。

这是怎么回事？！

**更新：**

在嗅探数据包后，我们发现来自 maven 的请求被发送到：/nexus/content/groups/public/com/xactsites/shared-resources/13.1.19.2/shared-resources-13.1.19.2.war HTTP/1.1，在发送请求之前确认 maven 正在更改 URL。因此，解决此问题的任何努力都可以集中在 maven（而不是 nexus）上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T00:15:18.627

经过一些痛苦的研究和一位同事的侥幸错字开辟了一条新的探索途径，我们找到了原因。本质上，如果 M2/M2_HOME 环境变量按照[此处](http://maven.apache.org/download.html#Installation)指定的方式设置，那么远程存储库 url 将被我们的 settings.xml 文件中的内容覆盖，并使用为 nexus 设置的镜像（因此使用了错误的只读 URL用于部署）。

这似乎是 pom 中使用`<distributionManagement>`元素以及使用`<remoteRepository>`ant 文件中的元素的问题。已经[为此提交了一个错误](http://jira.codehaus.org/browse/MANTTASKS-174)。

**决议：**

我们将其范围缩小到具有`<mirrorOf>*</mirrorOf>`“*”导致此问题的集合。将 * 替换为特定存储库（例如“中央”）可解决此问题。

同样，不设置 M2 环境变量也可以解决此问题，因为它无法访问 settings.xml 文件来获取 URL。当然，如果您在运行部署时依赖于 settings.xml 中的一些其他内容，那么您不会希望采用这种方法。

ugh，这是一个令人痛苦的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-24T18:12:54.237

这似乎在 2.1.4-SNAPSHOT 版本中得到解决。

# android - 如何使 onOverScrolled 向后兼容？

> ID：13825702
> 
> 赞同：0
> 
> 时间：2012-12-11T17:48:46.557
> 
> 标签：android, android-listview

我正在尝试更新应用程序，而 onOverScrolled 方法正是我所需要的。但是，我的应用程序现在的最低 api 版本为 8，而 onOverScrolled 需要 9。

我已经进行了一些搜索，但无法找到在 API 级别 8 上重新创建此功能的任何方法。有什么东西可以让我复制此方法吗？有关重新创建其功能的任何提示？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:58:58.220

您可以做的一件事是获取 ScrollView 的源代码，并将其放置在您的应用程序中并将其用作自定义小部件。

或者，您可以跳过 API v8，而直接使用 API v9，因为 Gingerbread 是最突出的 Android 版本，而 ICS 仍在追赶。

但是，如果您决定这样做，让我警告您不要在默认 ScrollView 上使用 OnOverScrolled()。三星至少在 Galaxy S3 上的 ScrollViews 中定制了这个功能（我没有检查过他们的任何其他 ICS 设备，但它适用于 2.3 设备）。OnOverScrolled 事件永远不会被触发，因为它们在内部使用该事件。

# facebook - 以前工作的查询出现错误 803 -“您请求的某些别名不存在”

> ID：13825707
> 
> 赞同：1
> 
> 时间：2012-12-11T17:49:05.280
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-fql

我曾经调用这个函数来获取 facebook 朋友...

`FB.api('/fql&q=SELECT uid FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) AND is_app_user = 0', function(response) {`

但是突然，今天早上..它不再起作用了，我收到了这个错误消息....

```
FB.ApiServer._callbacks.f507d012c({"error":{"message":"(#803) Some of the aliases you requested do not exist: fql&q=SELECT uid, name, pic_square FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) AND is_app_user = 1","type":"OAuthException","code":803}}); 
```

发生了什么？facebook刚刚删除了这个功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T18:11:36.663

您的代码中有错误。

您的 API 调用以 开头`/fql&q=QUERY`，应该是`/fql?q=QUERY`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T19:57:18.440

SDK的正确用法是：

```
FB.api('fql', { q: 'SELECT uid FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) AND is_app_user = 0' }, function(response) { /* ... */ }); 
```

通常，您指定的路径在其当前状态下无效。不允许使用空格和 () 等字符。URL 查询字符串必须正确编码。您可能很幸运，您的 FQL 将正确地进行 URL 编码，但您不应该碰运气。像我上面所做的那样使用 SDK 的正确接口。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-11T18:32:33.980

我检查了 doc form facebook 官方网站.. 它与我有完全相同的 api 调用.. 仍然不知道为什么会发生这个错误

```
 FB.api('/fql&q=SELECT uid, name, is_app_user, pic_square FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) AND is_app_user = 1', 
```

功能（响应）{ ...

[https://developers.facebook.com/docs/guides/games/custom-muti-friend-selector/](https://developers.facebook.com/docs/guides/games/custom-muti-friend-selector/)

# jquery - jquery每个背景图像不工作

> ID：13825712
> 
> 赞同：-4
> 
> 时间：2012-12-11T17:49:13.577
> 
> 标签：jquery, background-image, each

```
$(".slide li").each(function () {
    $(this).css("background-image", "url(images/slider/" & $(this).attr("id") & ".jpg)");
}); 
```

不工作请帮忙..！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:50:42.183

您需要`+`连接而不是`&`

```
{
    $(".slide li").each(function () {
      $(this).css("background-image", "url(images/slider/" + $(this).attr("id") + ".jpg)");
     });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:51:17.107

使用 + 而不是 &

```
$(".slide li").each(function () {
   $(this).css("background-image", "url(images/slider/" + $(this).attr("id") + ".jpg)");
        }); 
```

# telerik - Telerik numerictextbox 和 Telerik 日期选择器在 asp 页面中的样式

> ID：13825713
> 
> 赞同：0
> 
> 时间：2012-12-11T17:49:19.157
> 
> 标签：telerik, datepicker, numeric-textbox

Telerik numerictextbox 和 Telerik 日期选择器在 asp 页面中的样式。我想更改背景颜色，telerik rad 文本框的边框颜色，rad datepicker。请帮助我，我尝试使用 style="....." 但不工作。提前致谢

```
<telerik:RadNumericTextBox ID="RadNumericTextBox3" width="145px" runat="server"></telerik:RadNumericTextBox>

<telerik:RadDatePicker ID="RadDatePicker1" runat="server"></telerik:RadDatePicker> 
```

请帮我............

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:47:50.953

您是否尝试过使用控件的属性？

```
<telerik:RadNumericTextBox ID="myNumTextBox" runat="server" 
            BackColor="Yellow" BorderColor="Red">
</telerik:RadNumericTextBox>
<telerik:RadDatePicker ID="myDatePicker" runat="server"
            BackColor="Yellow" BorderColor="Red"
            Calendar-CalendarTableStyle-BorderColor="Red"
            Calendar-CalendarTableStyle-BackColor="Yellow"
            Calendar-DayStyle-BorderColor="Red"
            Calendar-DayStyle-BackColor="Yellow"
            Calendar-FastNavigationStyle-BorderColor="Red"
            Calendar-FastNavigationStyle-BackColor="Yellow"
            DateInput-BorderColor="Red"
            DateInput-BackColor="Yellow">
</telerik:RadDatePicker> 
```

对于 DatePicker，我假设您想要输入字段的`BackColor`and `BorderColor`，所以使用`DateInput-`属性。

# eclipse - 处理uml digram的xml信息

> ID：13825715
> 
> 赞同：3
> 
> 时间：2012-12-11T17:49:23.547
> 
> 标签：eclipse, uml, papyrus

# 我正在尝试在以 Papyrus 建模的类图中手动向类添加新属性

我打算在类图的 xml 文件中添加，但我不知道如何管理类图模型，因为 Papyrus 中的每个模型都包含三个文件：

*   1 *-.uml**   *2-* .notation*   3-*.di

    仅将与属性相关的信息添加到 *.uml 文件是不够的

    我的问题是如何管理这三个文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-03T16:58:27.020

我不确定您所说的“管理类图模型”是什么意思。

但是，您不应该直接管理这些文件，而应让该工具为您执行此操作。

为了您的利益：

“di”文件只是指向其他两个文件的指针。

“符号”文件包含有关图表的所有信息，例如布局、显示的元素等。

“uml”文件包含有关语义模型的所有信息，例如，作为模型一部分的 UML 元素、它们的属性和它们的链接，但没有关于图表表示的信息。

除非您是这些文件的序列化专家，否则我建议您**不要直接编辑它们**！让工具为您做到这一点。

# javascript - 使用 JS SDK 创建新的 Soundcloud 播放列表 ( set ) 返回 422

> ID：13825716
> 
> 赞同：0
> 
> 时间：2012-12-11T17:49:28.080
> 
> 标签：javascript, api, soundcloud

我试图让与 Soundcloud 连接的用户能够使用他们的 SC 帐户创建存储在 Soundcloud 上的新播放列表（集）。很基础。作为一个测试用例，我正在测试的示例几乎完全取自[Soundcloud 开发文档](http://developers.soundcloud.com/docs/api/#uploading)，除了我添加了不同的声音 ID。

```
<script src="http://connect.soundcloud.com/sdk.js"></script>
<script>
// initialize client with app credentials
SC.initialize({
  client_id: 'MY_CLIENT_ID',
  redirect_uri: 'http://localhost.local/~****/sc/callback.html'
});

// initiate auth popup and create new playlist
SC.connect(function() {
    SC.get('/me', function(me) {
        console.log(me.username);
    });

    var tracks = [12573606].map(function(id) { return { id: id }; });
    SC.post('/playlists', {
        playlist: { title: 'My Playlist', tracks: tracks }
    });
}); 
```

SC.post 的副本及其回复如下：

```
POST https://api.soundcloud.com/playlists 422 (Unknown Error) sdk.js:1
window.SC.SC.Helper.merge._xhrRequest sdk.js:1
window.SC.SC.Helper.merge._request sdk.js:1
window.SC.SC.Helper.merge._apiRequest sdk.js:1
window.SC.SC.Helper.merge.post sdk.js:1

(anonymous function) localhost.local:21
(anonymous function) sdk.js:1
f.onreadystatechange sdk.js:1

XHR finished loading: "https://api.soundcloud.com/playlists". sdk.js:1
window.SC.SC.Helper.merge._xhrRequest sdk.js:1
window.SC.SC.Helper.merge._request sdk.js:1
window.SC.SC.Helper.merge._apiRequest sdk.js:1
window.SC.SC.Helper.merge.post sdk.js:1
(anonymous function) localhost.local:21
(anonymous function) sdk.js:1
f.onreadystatechange sdk.js:1

Uncaught TypeError: object is not a function sdk.js:1
(anonymous function) sdk.js:1
f.onreadystatechange 
```

我尝试了几种不同的解决方案，并自己创建了 url 请求并将其与我的 client_id 一起发布，但没有任何成功。

我也注意到开发文档中的不一致。我注意到在开发文档中有一个创建播放列表 JS SDK 示例，但是在 APIGEE ( API ) 控制台中没有引用 post /playlists 请求，只是 /playlists 用于获取...这不是吗甚至存在于当前的 Soundcloud api 比？

我想到的另一件事是，由于这是一个 422 错误，您只能在用户最初使用 sdk 上传曲目时将曲目添加到播放列表吗？

有没有其他人遇到过这个问题？有没有人找到任何解决方案？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T18:09:49.893

我正在通过 Cocoa/Objective C 使用 SoundCloud API，并且在尝试更新播放列表时遇到了同样的问题，即出现错误 422。我的解决方案是理解参数值必须是轨道“id”字符串的数组，并且参数键是“playlist[tracks][][id]”。

因此，对于 Objective C，代码是：

```
NSMutableDictionary *parameters = [NSMutableDictionary dictionary];
NSString *trackList = @"60832750,61311756,60832782"; // for example
NSArray *tracks = [self.trackList componentsSeparatedByString:@","];
[parameters setObject:tracks forKey:@"playlist[tracks][][id]"]; 
```

当然，您的确切代码将取决于您使用的语言。对我来说，诀窍是让所有括号都正确的密钥。

# python - Python：如何将文件保存在不同的目录中？

> ID：13825719
> 
> 赞同：4
> 
> 时间：2012-12-11T17:49:30.567
> 
> 标签：python, filesystems

所以现在 - 我的 Python 程序（在 UNIX 环境中）可以保存文件。

```
fig.savefig('forcing' + str(forcing) + 'damping' + str(damping) + 'omega' + str(omega) + 'set2.png') 
```

如何在不切换目录的情况下将其保存在新目录中？我想将文件保存在 Pics2/forcing3damping3omega3set2.png 之类的目录中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T17:53:53.757

通过使用完整或相对路径。您只指定一个文件名，没有路径，这意味着它将保存在当前目录中。

要将文件保存在`Pics2`相对于当前目录的目录中，请使用：

```
fig.savefig('Pics2/forcing' + str(forcing) + 'damping' + str(damping) + 'omega' + str(omega) + 'set2.png') 
```

`os.path.join()`或者更好的是，使用和字符串格式构建路径：

```
fig.savefig(os.path.join(('Pics2', 'forcing{0}damping{1}omega{2}set2.png'.format(forcing, damping, omega))) 
```

最好是使用绝对路径：

```
path = '/Some/path/to/Pics2'
filename = 'forcing{0}damping{1}omega{2}set2.png'.format(forcing, damping, omega)
filename = os.path.join(path, filename)
fig.savefig(filename) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-11T17:55:18.867

您可以使用完整路径加入文件名，以便将其保存在特定位置而不是当前目录中：

```
import os

filename = "name.png"
path = "/path/to/save/location"
fullpath = os.path.join(path, filename) 
```

Using`os.path.join`将以独立于平台的方式正确处理分隔符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T18:15:45.830

我假设您正在使用`pylab`( `matplotlib`)。

您可以使用完整路径作为 的`fname`参数`savefig(fname, ...)`，它可以是绝对路径，也可以是`/path/to/your/fig.png`相对路径`relative/path/to/fig.png`。您应该确保保存文件的目录已经存在。如果不使用`os.makedirs`先创建它：

```
import os

... # create the fig

dir = 'path/to/Pics2'
if not os.path.isdir(dir): os.makedirs(dir)
fname = 'forcing' + str(forcing) + 'damping' + str(damping) + 'omega' + str(omega) + 'set2.png'
fig.savefig(os.path.join(dir, fname)) 
```

# php - 如何从 HTML 块中删除链接及其文本？

> ID：13825720
> 
> 赞同：0
> 
> 时间：2012-12-11T17:49:37.697
> 
> 标签：php, html-parsing

说我有以下文字

..（事件描述内容）............（事件描述内容）............

```
<A HREF="http://event.com/content" > blah blah blah </A> 
```

此文本从 mysql 查询中显示。该文本在两个地方使用，一个是谈论事件并具有注册链接。然后我想重用这个相同的文本，但在注册页面本身没有注册链接的内容。我想删除链接、标签和中间的文本。我已经看到了 strip_tags() 函数，但这会将文本保留在两者之间。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:20:42.863

尝试这个：

```
preg_replace("/<a href=.*?>(.*?)<\/a>/", "", $text); 
```

`$text`你的内容在哪里。

例子：

```
$text = 'Its <a href="google.com">Google</a>';
echo preg_replace("/<a href=.*?>(.*?)<\/a>/", "", $text); 
```

将简单地输出：`Its`

# .net - 如何从 NBoilerPipe 获取 HTML 输出？

> ID：13825722
> 
> 赞同：1
> 
> 时间：2012-12-11T17:49:41.310
> 
> 标签：.net, html, mono, boilerpipe

NBoilerPipe 是 BoilerPipe Java 库的 Mono 端口。我已经设法在 .NET 4 中正常工作，没有太多麻烦（一些库引用需要修复/等）。但是，通过代码搜索，我找不到任何用于 HTML 输出的“钩子”。例如，GetText() 方法只有一个输入参数，我看不到任何其他方法。如何从 NBoilerPipe 获取 HTML 输出？

这是在 .NET4 中工作的示例 NBoilerPipe 代码：

> ```
>  String url = "http:// <etc> ";
>         String page = String.Empty;
>         WebRequest request = WebRequest.Create (url);
>         HttpWebResponse response = (HttpWebResponse)request.GetResponse ();
>         Stream stream = response.GetResponseStream ();
>         using (StreamReader streamReader = new StreamReader (stream, Encoding.UTF8)) {
>             page = streamReader.ReadToEnd ();
>         }           
>         String text = ArticleExtractor.INSTANCE.GetText (page);
>         Console.WriteLine ("Text: \n" + text); 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T10:12:31.537

我遇到过同样的问题。我设法通过使用以下方法解决了它。

[http://boilerpipe-web.appspot.com/](http://boilerpipe-web.appspot.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-14T12:22:35.323

我知道这是一个老问题，而且我不熟悉 .Net（尽管它对我来说看起来像 Java），而且我也不是一个专业的程序员，但我认为这可能会帮助其他有类似情况的人问题。

`INSTANCE`您使用的方法仅返回文本。如果你想获得 HTML，你需要创建一个`BoilerpipeExtractor`和一个 `HTMLHighlighter`. 然后你可以使用它的`process`方法来得到你正在寻找的东西。

```
final BoilerpipeExtractor extractor = CommonExtractors.ARTICLE_EXTRACTOR;
final HTMLHighlighter hh = HTMLHighlighter.newExtractingInstance(); 
```

`.newExtractingInstance()`是只为您提供相关 HTML 的那个。另一个选项是`.newHighlightingInstance()`，它突出显示正文但保持整个 HTML 文档完整。

之后您需要做的就是调用`HTMLHighlighter`'`process` 方法：

```
System.out.println(hh.process(url, extractor)); 
```

`process`也可以是`process(TextDocument doc, InputSource is)`or `process(TextDocument doc, String origHTML)`。

查看[Github repo](https://github.com/kohlschutter/boilerpipe/blob/2c78035a830282e2435c466f3f14d6d4104d0a94/boilerpipe-demo/src/main/java/com/kohlschutter/boilerpipe/demo/Oneliner.java "Boilerpipe Github 仓库")中的源代码。关于每件事的作用都有注释。我查找了 Javadocs，但再也找不到它们了。

在同一个 repo 中的[HTMLHighlightDemo](https://github.com/kohlschutter/boilerpipe/blob/2c78035a830282e2435c466f3f14d6d4104d0a94/boilerpipe-demo/src/main/java/com/kohlschutter/boilerpipe/demo/HTMLHighlightDemo.java "Github 上的 HTMLHighlightDemo.java")中找到几乎完全一样的演示 。

# ruby - 如何根据其子元素之一的值删除 XML 元素？

> ID：13825725
> 
> 赞同：2
> 
> 时间：2012-12-11T17:49:50.583
> 
> 标签：ruby, xml, nokogiri

我有一个看起来像这样的 xml 元素：

```
<Description>
    <ID>1234</ID>
    <SubDescription>
        <subID>4501</subID>
    </SubDescription>
    <SubDescription>
        <subID>4502</subID>
    </SubDescription>
</Description> 
```

如何根据其“ID”子元素的值删除整个“描述”元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:02:57.530

您可以使用以下 xpath 选择包含值为 1234 的 ID 节点的描述节点：

```
//Description[./ID[text()='1234']] 
```

因此，要删除节点，您可以执行以下操作：

```
doc.xpath("//Description[./ID[text()='1234']]").remove 
```

例子：

```
require 'nokogiri'

str = %q{
<root>
    <Description>
        <ID>2222</ID>
        <SubDescription>
        <subID>4501</subID>
        </SubDescription>
        <SubDescription>
        <subID>4502</subID>
        </SubDescription>
    </Description>
    <Description>
        <ID>1234</ID>
        <SubDescription>
        <subID>4501</subID>
        </SubDescription>
        <SubDescription>
        <subID>4502</subID>
        </SubDescription>
    </Description>
</root>
}
doc = Nokogiri::XML(str)
doc.xpath("//Description[./ID[text()='1234']]").remove
puts doc
#=> <root>
#=> <Description>
#=>     <ID>2222</ID>
#=>     <SubDescription>
#=>     <subID>4501</subID>
#=>     </SubDescription>
#=>     <SubDescription>
#=>     <subID>4502</subID>
#=>     </SubDescription>
#=> </Description>
#=></root> 
```

如您所见，所需的描述节点已被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T07:59:02.953

我个人会使用@JustinKo 的解决方案，尽管使用更简单的 XPath：

```
doc.xpath("//Description[ID='1234']").remove 
```

但是，如果编写 XPath 不是您的乐趣，而编写 Ruby 是，您可以更加依赖 Ruby（如果效率稍低一些）：

```
doc.css('ID').select{ |el| el.text=="1234" }.map(&:parent).each(&:remove) 
```

说的是：

*   找到所有命名的元素`<ID>`
*   但是只做那些文本是`"1234"`
*   将其映射为`<Description>`节点（调用`.parent`每个节点的结果）
*   然后调用`.remove`其中的每一个。

如果您知道只有一场比赛，您可以通过以下方式使其更简单：

```
doc.css('ID').find{ |el| el.text=="1234" }.parent.remove 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-12-11T18:18:54.700

要查找 ID，请执行以下操作：

```
id = doc.xpath("//ID").text 
```

其中 doc 是通过加载 xml 文档创建的 Nokogiri 对象

要检查元素 id 是否是您想要的，请尝试：

```
if id == "1234" 
```

从您的 xml 文件中，这应该返回 true

最后删除整个描述使用：

```
doc.xpath("//Description").remove 
```

你要找的是这个：

```
doc = Nokogiri::XML(File.open("test.xml"))    #create Nokogiri object from "test.xml"
id = doc.xpath("//ID").text    #this will be a string with the id
doc.xpath("//Description").remove if id == "1234"    #returns true with your xml document and remove the entire Description element." 
```

# jaxb - JAXB xjc：如果值为空，如何为返回空的字符串生成代码？

> ID：13825726
> 
> 赞同：8
> 
> 时间：2012-12-11T17:49:50.807
> 
> 标签：jaxb

给定以下示例 xsd 片段：

```
< xs:attribute name="SEGMENT"  default="" use="optional" type="xs:string"/ > 
```

当 xjc 生成包含`SEGMENT`bean 属性的类时，会自动生成以下 getter：

```
public String getSEGMENT() {
    if (segment == null) {
        return "";
    } else {
        return segment;
    }
} 
```

我的问题是你如何让它对`xs:element`物体做同样的事情？换句话说，给定以下 xsd 片段：

```
< xs:element name="NAME" default="" type="xs:string"/ > 
```

我想知道是否可以让 xjc 生成以下内容：

```
public String getNAME() {
    if (name == null) {
        return "";
    } else {
        return name;
    }
} 
```

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T18:11:12.440

JAXB 不会为具有默认值的元素生成与具有默认值的属性相同的代码，因为[XML 模式区分元素和属性的默认值](http://www.w3.org/TR/xmlschema-0/#OccurrenceConstraints)：

> 属性和元素的默认值都使用默认属性声明，尽管此属性在每种情况下的结果略有不同。当使用默认值声明属性时，该属性的值是在实例文档中作为属性值出现的任何值；如果该属性没有出现在实例文档中，则模式处理器为该属性提供一个等于默认属性的值。请注意，属性的默认值仅在属性本身是可选的情况下才有意义，因此同时指定默认值和可选值以外的任何值都是错误的。
> 
> 模式处理器对默认元素的处理略有不同。当使用默认值声明元素时，该元素的值是在实例文档中作为元素内容出现的任何值；如果该元素出现时没有任何内容，则模式处理器为该元素提供一个等于默认属性的值。但是，如果该元素没有出现在实例文档中，则模式处理器根本不提供该元素。总之，元素默认值和属性默认值之间的区别可以表述为：当属性缺失时应用默认属性值，当元素为空时应用默认元素值。

您总是可以依靠缺少属性的默认值（从这里特殊的 getter），但是有一个缺少元素值的问题。

尽管如此，当您解组一个实例时，解组器知道如何处理默认值。有关详细信息，请参见此处：

*   [元素默认值和编组](http://jaxb.java.net/2.2.5/docs/ch03.html#marshalling-element-default-values-and-marshalling)
*   [元素默认值和解组](http://jaxb.java.net/2.2.5/docs/ch03.html#unmarshalling-element-default-values-and-unmarshalling)

XJC不会添加getter代码或使用默认值初始化字段，因此如果您需要“null安全检查”，您可以在XJC生成代码后自己*手动*添加或尝试使用一些插件来做自动地：

*   [JAXB 2 默认值插件](http://java.net/projects/jaxb2-commons/pages/Default-Value)
*   [CXF XJC 默认值插件](http://cxf.apache.org/cxf-xjc-dv.html)

# oracle11g - oracle 触发器执行 DBMS_AQ 获取权限不足错误

> ID：13825728
> 
> 赞同：0
> 
> 时间：2012-12-11T17:49:59.443
> 
> 标签：oracle11g, oracle-aq

我正在使用 oracle 11.2。

数据库用户：

1.  **AQADM**：用户拥有队列，并拥有*AQ_ADMINISTRATOR_ROLE*
2.  **SCOTT**：jms 用户，具有以下权限。

我有以下存储过程，它编译好。它是从表上的触发器调用的。

```
CREATE OR REPLACE PROCEDURE scott.PROC_JMS_ENQUEUE (NAME      VARCHAR,
                                          MESSAGE      IN VARCHAR)
AS
  msg                  SYS.AQ$_JMS_TEXT_MESSAGE;
  queue_options        DBMS_AQ.ENQUEUE_OPTIONS_T;
  msg_props            DBMS_AQ.MESSAGE_PROPERTIES_T;
  msg_id               RAW (16);
  no_consumers_error   EXCEPTION;
  PRAGMA EXCEPTION_INIT (no_consumers_error, -24033);
BEGIN
-- Ensure what is sent will be a JMS message
 msg := SYS.AQ$_JMS_TEXT_MESSAGE.CONSTRUCT ();
 msg.set_text (MESSAGE);

 --ENQUEUE
 DBMS_AQ.ENQUEUE (queue_name           => 'aqadm.my_queue',
                enqueue_options      => queue_options,
                message_properties   => msg_props,
                payload              => msg,
                msgid                => msg_id);
  -- Without the following, the procedure will die if none
  -- Is listening for cache control
 EXCEPTION
 WHEN no_consumers_error
 THEN
  -- Output it in case, but otherwise swallow
  DBMS_OUTPUT.PUT_LINE (
     'No interested parties are listening to messages');
 END;
 / 
```

我有以下 GRANT 给用户

```
GRANT EXECUTE ON AQ_USER_ROLE TO scott;
GRANT EXECUTE ON SYS.DBMS_AQ TO scott;
GRANT EXECUTE ON SYS.DBMS_AQIN TO scott;
--GRANT EXECUTE ON SYS.DBMS_AQJMS_INTERNAL TO scott;
--GRANT EXECUTE ON SYS.DBMS_TRANSFORM TO scott;
GRANT EXECUTE ANY PROCEDURE TO scott; 
```

当我执行上述存储过程或更新触发触发器代码的表时，出现以下错误：

```
exec PROC_JMS_ENQUEUE('Test Message','Dam');

ORA-01031: insufficient privileges
ORA-06512: at "SYS.DBMS_AQ", line 169
ORA-06512: at "SCOTT.PROC_JMS_ENQUEUE", line 19
ORA-06512: at line 1 
```

**编辑：** 这是特权视图，所有都被授予 SYS 作为 SYSDBA ![在此处输入图像描述](../Images/dc67991169d636cf552f43d20b28ea78.png)![在此处输入图像描述](../Images/c7ceeea42bf3daaed3b4a02b010cb9a5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:46:48.850

当我授予以下权限时它起作用了

```
GRANT ENQUEUE ANY QUEUE TO SCOTT; 
```

[Oracle 糟蹋了一份综合文档！](http://docs.oracle.com/cd/B10501_01/appdev.920/a96587/qmanage.htm)

此外，出于某种原因，GRANT 必须“直接”而不是通过“角色”才能通过 PL/SQL 触发器或过程执行！！！！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:09:58.007

通常，当某些代码在从 sqlplus 执行时对您有用，但在从触发器执行时却不起作用时，是由相同的原因引起的：

用户有权限。直接授予（类型=特权）或间接授予（类型=角色）。当代码作为触发器执行时，只能直接 priv。可用。IE。您没有来自 AQ_USER_ROLE 的任何授权。检查 AQ_USER_ROLE 定义（我认为这个角色无论如何都已弃用）并将这些权限直接授予 SCOTT。

# c++ - C++ 指针或引用

> ID：13825730
> 
> 赞同：-4
> 
> 时间：2012-12-11T17:50:04.187
> 
> 标签：c++, pointers

My Class`PlaylistTrack`是`Track`（扩展该类）的子类：

```
 #include "track.h"
 #include "album.h"

 class PlaylistTrack : public Track //extends Track Class
 {
   private:
           Album & newAlbum; //or
           Album * newAlbum; //?

   public:
       PlaylistTrack(void);
      ~PlaylistTrack(void);

 }; 
```

我希望我有正确的语法。您如何为出现特定曲目的专辑添加引用或指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:56:47.893

我不太明白你在问什么，但听起来你想有一种方法从 PlaylistTrack 中获取专辑。

```
class PlaylistTrack : public Track
{
 public:
     PlaylistTrack(Album * owner){ m_owner = owner; }
     Album* getAlbum(){return m_owner;}
 private:
     Album* m_owner;

}

int main()
{

Album albumA;
PlaylistTrack newTrack(&albumA);

//Now the track knows what album it belongs to, but the album does not own the track    yet.
std::cout << "New Track's Album: " << newTrack.getAlbum.getTitle() << std::endl;

//Now the album owns this track
albumA.addTrack(newTrack);

//The PlaylistTrack constructor could add itself to the album if you wanted to I think.

return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:56:49.313

添加这样的引用：

```
class PlaylistTrack : public Track //extends Track Class
{
   private:
       Album &album;
   public:
       PlaylistTrack(void);
      ~PlaylistTrack(void);

}; 
```

或这样的指针：

```
class PlaylistTrack : public Track //extends Track Class
{
   private:
       Album *album;
   public:
       PlaylistTrack(void);
      ~PlaylistTrack(void);

}; 
```

当然，您可能想要修改您的构造函数，以便它采用专辑和曲目编号（或类似的东西），或者至少为专辑和曲目编号添加访问器。

# signalr.client - SignalR + 未捕获的类型错误：对象# has no method 'sending' I was previously using an older ver of the signalR.js and everything is fine except it is intermittently causing my page to hang therefore I want to test it out with a newer ver from 问问题 问问题 2012-12-11T17:50:21.600 1447 次 This question shows research effort; it is useful and clear 3 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I was previously using an older ver of the signalR.js and everything is fine except it is intermittently causing my page to hang therefore I want to test it out with a newer ver from downloaded from the SignalR github site. I tried following the client side example of SignalR but I get this error when inspecting element in chrome, Uncaught TypeError: Object # has no method 'sending'. Anyone came across this error? var hub = $.connection.testHub; hub.showMessage = function() { $("#inboxcount").show(); }; $.connection.hub.start() .done(function() { hub.subscribe($('#<%= hdnUserId.ClientID %>').val()); }) .fail(function() { alert("Could not Connect!"); }); TestHub.cs: using System.Threading; { /// <summary>/// Test Hub used to demonstrate the key concepts of SignalR ///</summary> [SignalR.Hubs.HubName("testHub")] public class TestHub : SignalR.Hubs.Hub { /// <summary>/// Broadcast the message to all clients ///</summary> /// <param name="message">message to be broadcasted public void Broadcast(string message) { this.Clients.showMessage(message); } /// <summary> /// Return a string with the formate, Hello [current user name] /// </summary> ///  public string SayHello() { //Context property can be used to retreive HTTP attributes like User return "Hello " + Context.User.Identity.Name; } /// <summary> /// Simulates a long running process that updates its progress /// </summary> public void LongRunningMethod() { Thread.Sleep(1000); this.Caller.showMessage("25% Completed"); Thread.Sleep(1000); this.Caller.showMessage("50% Completed"); Thread.Sleep(1000); this.Caller.showMessage("75% Completed"); Thread.Sleep(1000); this.Caller.showMessage("Done"); } /// <summary> /// Subscribe to a given message category /// </summary> /// <param name="category">the category to subscribe public void Subscribe(string category) { //Add current connection to a connection group with the name 'category' this.AddToGroup(category); } /// <summary> /// Publish a message to the given mmessage category /// </summary> /// <param name="category">the category to send the message /// <param name="message">the message to be sent public void Publish(string category, string message) { //Broadcast the message to all connections registered under the group 'category' this.Clients[category].showMessage(message); } } Submit two forms to the same page I have been on this site all day and can't seem to find what I need - no duplicate post intended. I have a form containing a link which calls a modal popup containing a different form. ###### PARENT PAGE ############# <form...> ... [link](php_page.php?id=<?php echo $id; ?>&sect=<?php echo $sect; ?>) ... **** MODAL POPUP **** <form...> ...  **** END MODAL POPUP **** ### END PARENT PAGE ############# When I submit the form in the modal popup, the parent page is refreshed to show the updated info in the corresponding section of the page; except that the first form is not submitted and when the page refreshes to update the necessary section, the contents of the first form is lost. I have tried using ajax to refresh only the necessary section of the page but that doesn't work as the sections that need refreshing use php variables with contents from mysql. The system does what it needs to do and I don't mind the refresh. But I need a way to keep the user data entered into the first form. Is it possible to submit the first form at the same time as the second to the same php page or any other way of preserving the user data in the first form on page reload without submitting it. signalr.client 4 2 回答 2 This answer is useful 0 Add server or client in hub call hub.server.subscribe 于 2013-06-12T12:35:31.650 回答 This answer is useful 0 你可能应该使用  代替  如果这没有帮助，你应该检查你的项目中是否没有任何旧的 SignalR 库：所以删除每个 SignalR dll，并添加： Microsoft.AspNet.SignalR.Core Microsoft.AspNet.SignalR.Hosting.AspNet Microsoft.AspNet.SignalR.Hosting.Common 这对我有用:) 于 2012-12-21T15:07:26.550 回答 Related 4 c# - 将数字添加到日期中的日、月或年 3 android - 图像未在 Android 中下载 1 mysql - 将多行转换为表中的列 1 ibm-mq - 通过 MQ runmqckm 创建证书请求的问题 5 selenium - WebDriver findElement by xPath，如果找不到元素，则没有 TIMEOUT，屏幕就挂在那里。 1 twitter - 通过代理使用 twitter oauth 登录 2 iphone - iPhone通过滑动表格视图来滚动UITableview 2 cakephp - 将数据保存在多个表中 3 php - php命令行更改文本输出 1 delphi - Firebird SQL 脚本命令字符串限制 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</form...></form...>

> ID：13825732
> 
> 赞同：3
> 
> 时间：
> 
> 标签：signalr.client

I was previously using an older ver of the signalR.js and everything is fine except it is intermittently causing my page to hang therefore I want to test it out with a newer ver from downloaded from the SignalR github site.

I tried following the client side example of SignalR but I get this error when inspecting element in chrome,

Uncaught TypeError: Object # has no method 'sending'. Anyone came across this error?

```
 <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"> </script> 
  <script src="/Scripts/jquery.signalR.js" type="text/javascript"> </script>    
  <script src="signalr/hubs" type="text/javascript"> </script>

        var hub = $.connection.testHub;
        hub.showMessage = function() {
                    $("#inboxcount").show();
                };

        $.connection.hub.start()
            .done(function() {
                hub.subscribe($('#<%= hdnUserId.ClientID %>').val());
            })
            .fail(function() {
                alert("Could not Connect!");
            }); 
```

TestHub.cs:

```
using System.Threading;

{
    /// <summary>
    /// Test Hub used to demonstrate the key concepts of SignalR
    /// </summary>
    [SignalR.Hubs.HubName("testHub")]
    public class TestHub : SignalR.Hubs.Hub
    {
        /// <summary>
        /// Broadcast the message to all clients
        /// </summary>
        /// <param name="message">message to be broadcasted</param>
        public void Broadcast(string message)
        {
            this.Clients.showMessage(message);
        }

        /// <summary>
        /// Return a string with the formate, Hello [current user name]
        /// </summary>
        /// <returns></returns>
        public string SayHello()
        {
            //Context property can be used to retreive HTTP attributes like User
            return "Hello " + Context.User.Identity.Name;
        }

        /// <summary>
        /// Simulates a long running process that updates its progress
        /// </summary>
        public void LongRunningMethod()
        {
            Thread.Sleep(1000);
            this.Caller.showMessage("25% Completed");
            Thread.Sleep(1000);
            this.Caller.showMessage("50% Completed");
            Thread.Sleep(1000);
            this.Caller.showMessage("75% Completed");
            Thread.Sleep(1000);
            this.Caller.showMessage("Done");
        }

        /// <summary>
        /// Subscribe to a given message category
        /// </summary>
        /// <param name="category">the category to subscribe</param>
        public void Subscribe(string category)
        {
            //Add current connection to a connection group with the name 'category'
            this.AddToGroup(category);
        }

        /// <summary>
        /// Publish a message to the given mmessage category
        /// </summary>
        /// <param name="category">the category to send the message</param>
        /// <param name="message">the message to be sent</param>
        public void Publish(string category, string message)
        {
            //Broadcast the message to all connections registered under the group 'category'
            this.Clients[category].showMessage(message);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T12:35:31.650

Add server or client in hub call hub.**server**.subscribe

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T15:07:26.550

你可能应该使用

```
 <script src="@Url.Content("~/signalr/hubs")" type="text/javascript"> </script> 
```

代替

```
 <script src="signalr/hubs" type="text/javascript"> </script> 
```

如果这没有帮助，你应该检查你的项目中是否没有任何旧的 SignalR 库：所以删除每个 SignalR dll，并添加：

*   Microsoft.AspNet.SignalR.Core
*   Microsoft.AspNet.SignalR.Hosting.AspNet
*   Microsoft.AspNet.SignalR.Hosting.Common

这对我有用:)

# c# - 代码优先的 LINQ NotSupportedOperation 异常

> ID：13825733
> 
> 赞同：0
> 
> 时间：2012-12-11T17:50:22.253
> 
> 标签：c#, linq, entity-framework, code-first

我有一个 DbSet 联系人，我正在尝试执行以下查询：

```
from contact in Context.Contacts 
where contact.Equals("given contact") 
select contact; 
```

我得到一个`NotSupportedOperationException`系统无法创建非标量类型，如整数、字符串或 GUID。
如何在不从数据库中检索所有记录的情况下有效地执行相同的查询（例如，在 SQL 服务器数据库上执行过滤操作）？

**注意：**我已经覆盖了 Contact 类型中的 Equals 方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T17:53:05.733

实体框架无法将调用转换为 SQL 代码中的 Equals。只需手动比较属性：

```
from contact in Context.Contacts 
where contact.Id == givenContact.Id
select contact; 
```

另一个（非常慢）选项 - 从数据库中获取所有联系人并在内存中进行比较：

```
Context.Contacts.ToList().Where(contact.Equals(givenContact)); 
```

# php - 将两个表单提交到同一页面

> ID：13825736
> 
> 赞同：0
> 
> 时间：2012-12-11T17:50:37.373
> 
> 标签：php, jquery, ajax, forms

我整天都在这个网站上，似乎找不到我需要的东西——没有重复的帖子。

我有一个包含链接的表单，该链接调用包含不同表单的模式弹出窗口。

```
###### PARENT PAGE #############
<form...>
...
<a href="php_page.php?id=<?php echo $id; ?>&sect=<?php echo $sect; ?>">link</a>
...
</form>

**** MODAL POPUP ****
<form...>
...
<input type="submit" />
</form>
**** END MODAL POPUP ****

### END PARENT PAGE ############# 
```

当我在模态弹出窗口中提交表单时，父页面会刷新以在页面的相应部分显示更新的信息；除了第一个表单没有提交并且当页面刷新以更新必要的部分时，第一个表单的内容会丢失。

我曾尝试使用 ajax 仅刷新页面的必要部分，但这不起作用，因为需要刷新的部分使用带有 mysql 内容的 php 变量。

系统做了它需要做的事情，我不介意刷新。但是我需要一种方法来将用户数据输入到第一个表单中。

是否可以将第一个表单与第二个表单同时提交到同一个 php 页面，或者以任何其他方式在页面重新加载时保留第一个表单中的用户数据而不提交它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:12:01.467

你不能用纯 php 做到这一点。您将需要 javascript 并以这样的方式编写它，即当您在模式上点击提交时，它会将信息“放入”回父表单中。

一种方法是使模态表单提交按钮不是实际的提交按钮。

您甚至可以将模态中已填充的部分 dom 元素注入到父表单中。一些 jquery 插件已经这样做了。例如 [彩盒](http://www.jacklmoore.com/colorbox)

[这是一个](http://jsbin.com/olalam/1/edit)仅使用 ONE`<form>`标签和 jquery colorbox 的工作示例。[http://jsbin.com/olalam/1/edit](http://jsbin.com/olalam/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:57:34.893

我不是 php 开发人员，所以我会建议另一种方法。

在刷新页面之前，您可以序列化表单并将数据存储在本地（例如在 cookie 中），然后将数据恢复到表单中。当然，这将需要更多的 JS 代码，但应该可以得到你想要的。

**更新：**既然你提到你可能需要一些 JS 方面的帮助，这里有一些指导：

1.  [在此处](https://github.com/carhartl/jquery-cookie)获取`jquery.cookie`插件。
2.  [在此处](https://github.com/maxatwork/jquery.deserialize)获取`jquery.deserialize`插件。
3.  使用以下代码作为起点。

.

```
// the name of the cookie
var cookieName = 'myCookieName';

function beforeSubmit() {
    // serialize the form into a variable
    var serializedForm = $('#id-of-form').serialize();
    // store the serialized form
    $.cookie(cookieName, serializedForm, { path: '/' });
}

function afterRefresh() {
    // read the cookie
    var serializedForm = $.cookie(cookieName);
    // de-serialize the form
    $('#id-of-form').deserialize(serializedForm, true);
} 
```

高温高压

# eclipse - WindowBuilder Pro encoding situation

> ID：13825739
> 
> 赞同：5
> 
> 时间：2012-12-11T17:50:49.897
> 
> 标签：eclipse, windowbuilder

We recently moved a big Visual Editor project to Eclipse Juno (4.2) and WindowBuilder Pro and the transition went smoothly besides one little and weird encoding problem.

Heres how it looks on the design page of WB when I use some kind of accentuation (Im talking about Brazilian Portuguese here...):

![the normal labels](../Images/fb5c23ef2c2e28b5ce2ba261278d7d3e.png)

and now how it ends up on the source code:

![and heres the bugged one](../Images/dadbd0f83ced01ebbdee5f8d5757dceb.png)

It seems to be a problem with the WindowBuilder encoding itself or something like that, but on the eclipse preferences I could only find the workspace encoding wich is setup to the default:

![our default encoding](../Images/3ed27fd059694884dfb264661b0d317b.png)

Changing the encoding of the workspace to UTF-8 or ISO resolves the problem on the source, but messes with the designer... Anyone know where can I fix this?

# php - Improve performance for reading CSV file from ZIP?

> ID：13825745
> 
> 赞同：0
> 
> 时间：2012-12-11T17:50:58.183
> 
> 标签：php, fgetcsv

Do you have any idea how to improve the performance by reading CSV file from a zip file?

Firstly it open the zip file, then put the data into a memory and then read it by `fgetcsv`

```
$zip = new ZipArchive();
if ($zip->open($fileName)) {
    $info = $zip->statIndex(0);
    $fp = $zip->getStream($info['name']);
    if(!$fp) exit("failed\n");

    while (!feof($fp)) {
        $contents .= fread($fp, 2);
    }
        fclose($fp);
        $zip->close();
}

$temp = fopen("php://memory", "rw");
fwrite($temp, $contents);
fseek($temp, 0);

while (($data = fgetcsv($temp, 0)) !== false) {
  ....
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T17:57:40.673

使用 php 手册快速检查表明这应该有效：

```
<?php

    $fp = fopen('zip://test.zip#test', 'r'); // test  name of file in archive
    if (!$fp) {
        exit("cannot open\n");
    }
    while (($data = fgetcsv($fp, 0)) !== false) {
        ...
    }

    fclose($fp); 
```

# php - How does foreach traverse array?

> ID：13825747
> 
> 赞同：2
> 
> 时间：2012-12-11T17:51:05.597
> 
> 标签：php, arrays

From what I have found `foreach` traverses array in the order of adding elements. See this code:

```
$array = array();
$array[0] = "me0";
$array[1] = "me1";
$array[2] = "me2";
$array[4] = "me4";
$array[5] = "me5";

//changing
$array[3] = "me3Changed";

foreach($array as $item)
{
    echo $item.'<br />';
}

echo '<br />';
ksort($array);

foreach($array as $item)
{
    echo $item.'<br />';
} 
```

which outputs:

```
me0
me1
me2
me4
me5
me3Changed

me0
me1
me2
me3Changed
me4
me5 
```

This shows that the array is not traversed in a way `for($i;$i<$arrayLength;$i++)` how is it traversed than? Assuming that php is written in C++ it should be using some c++ functions that do it this way. **Can anyone explain to me how does `foreach` traverse arrays?**

* * *

C++ example of traversing array by index:

```
std::string arr[10]; 
arr[0] = "me0";
arr[1] = "me1";
arr[2] = "me2";
arr[4] = "me4";
arr[5] = "me5";

//changing
arr[3] = "me3Changed";

for(int x = 0; x < 6;x++)
{
    std::cout << arr[x] << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T18:12:04.713

PHP 数组是*有序*的键值存储。这意味着键有一个顺序，即它们被添加到数组中的顺序（或拼接在一起或排序或任何确定顺序）。`foreach`以这种固有的内置顺序遍历数组。

我不知道这是否与 C 中的任何内容相比。PHP 的数组是其更独特的功能之一。大多数语言都有键值存储（字典/哈希）*或*有序数组（列表）。PHP 已将*键值存储*作为其唯一的数组类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:54:43.437

该数组是在您添加键/值对时形成的，请看[这里](http://codepad.org/3XxcUwUR)。因此，`foreach`也按该顺序遍历。

`for($i;$i<$arrayLength;$i++)`然而，您正在将它与您指定的循环进行比较`index`，因此，它总是会搜索该键，然后打印其相应的值。

**编辑：** 解释上述内容的[示例。](http://codepad.org/qH7jLJ9W)

# ruby-on-rails - PostgreSQL always creates records with an even ID?

> ID：13825748
> 
> 赞同：1
> 
> 时间：2012-12-11T17:51:13.633
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql

my PostgreSQL 9.2 database for some reason skips an ID with every record. Example:

User

```
1258930
1258932
1258934
1258936 
```

What would cause this? Any pointer in the right direction to resolve this issue is appreciate. Thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T01:52:17.683

评论充分涵盖了可能的原因：

*   多个`nextval`电话，一个接一个`default`，一个明确的；
*   多个表使用相同的序列
*   正在回滚的事务

> 任何指向正确方向以解决此问题的指针表示赞赏

您的主要错误是将此视为一个*问题*。间隙出现在生成的序列中是完全正常的。如果您的数据库崩溃并重新启动，则会在序列中出现间隙。如果事务在分配 ID 后回滚，则序列中会出现间隙。

*您的应用程序必须能够处理此问题*。它不应该关心 ID 是什么，只关心它是唯一的。

有关详细信息和提示，如果您需要真正的无间隙序列，请参阅[此答案](https://stackoverflow.com/a/9985219/398670)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T14:54:47.480

添加到克雷格的观点，我认为你会发现的关键罪魁祸首是`DO ALSO` `rule`将 new.id 插入另一个表。这将导致`RULES`重写查询时双倍递增，因此 new.id 最终成为“我们上次为计算 new.id 所做的一切”（这意味着再次递增序列）。

如果它是一致的，最可能的原因是 IMO 是有人在没有完全理解陷阱的情况下创建 DO ALSO 规则。

# javascript - Adding HTML code with Single Quotes inside jQuery

> ID：13825756
> 
> 赞同：4
> 
> 时间：2012-12-11T17:52:03.130
> 
> 标签：javascript, jquery

I am trying to add this HTML/JavaScript code into a jQuery variable. I've managed to insert double quotes by writing is with a backshlash `\"`, however the same tactic didn't work for the single quotes:

```
ajaxData += '<div class=\"menu-item-' + $(this).attr('div') + 'onclick=\"alert('Jquery Function');\"></div>'; 
```

Specifically, this part `onclick=\"alert('Jquery Function');`

Anyone know how I can go around this?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T17:54:47.800

看到这个，很漂亮：

```
ajaxData += '<div class="menu-item-' + $(this).attr('div') + ' onclick="alert(\'Jquery Function\');"></div>'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T18:01:30.147

这是你想做的吗？

```
$var = "ajaxData += '<div class=\"menu-item-' + \$(this).attr('div') + '" onclick=\"alert(\'Jquery Function\');\"></div>';" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T17:54:24.880

肮脏的逃生pheeww ...试试这个

```
ajaxData += '<div class="menu-item-' + $(this).attr('div') + 'onclick="alert(\'Jquery Function\');"></div>'; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-11T17:55:44.380

```
ajaxData += '<div class="menu-item-' + $(this).attr('div') + 'onclick="alert('Jquery Function');"></div>'; 
```

为单引号添加转义 \。如果您的字符串在单引号内，那么您可以使用双引号而无需转义，但如果在单引号内使用单引号，则必须插入转义字符

# javascript - 通过jquery在头部附加脚本

> ID：13825759
> 
> 赞同：0
> 
> 时间：2012-12-11T17:52:20.320
> 
> 标签：javascript, jquery, dom

`script`如果正文中有标签，我想在头部附加`<script>`，我尝试如下但它不起作用，怎么办？

**演示：http:** [//jsfiddle.net/rYXJx/](http://jsfiddle.net/rYXJx/)

JS：

```
var TAREA = $('body').find('textarea').length;

if(TAREA > 0){ 
    $('head').append('<script type="text/javascript" src="files/js/nicEdit.js"></script><script type="text/javascript">bkLib.onDomLoaded(function() { nicEditors.allTextAreas() });</script>');
    }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T18:14:11.087

您可以使用 jquery getScript 函数：

[http://api.jquery.com/jQuery.getScript/](http://api.jquery.com/jQuery.getScript/)

所以正确的代码如下所示：

```
 $.getScript('files/js/niceEdit.js'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T18:23:38.920

脚本中的问题之一是`</script>`字符串文字内部实际上破坏了外部`<script>`标记。您可能会注意到页面中的这些字符似乎无处不在：

> ');};

其次，虽然仍然可以`<script>`在头部注入标签，但没有直接/简单/跨浏览器的方式知道脚本何时完成加载。在脚本完全加载之前，您不能使用它。

最好的解决方案是使用[`jQuery.getScript()`](http://api.jquery.com/jQuery.getScript/)提供回调的方法。使用回调调用`nicEditors.allTextAreas()`函数：

```
$(document).ready(function () {
    if ($("textarea").length > 0) {
        $.getScript("files/js/nicEdit.js", function () {
            // no need for onDomLoaded -- DOM is loaded at this point!
            nicEditors.allTextAreas();
        });
    }
}); 
```

# c# - 为什么我们应该使用 xsd 而不是 c# 类

> ID：13825760
> 
> 赞同：1
> 
> 时间：2012-12-11T17:52:20.603
> 
> 标签：c#, xml, xsd

在我们的项目中，我们有 xsd 模式文件，我们正在为 xsd 自动生成 c# 类并使用它们。每次，如果我们需要进行修改，我们都会被要求在 xsd 文件中进行修改，然后将其生成为 c# 代码。

我的问题是，为什么我们首先需要 xsd，为什么我们不能直接创建可序列化的 c# 类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T18:02:43.080

我假设对类的更改是应用程序支持的某些 XML 数据结构更改的结果。有了这个假设，以下是保持 XSD 同步的几个原因：

1.  如果您曾经从 XSD 重新生成类文件，所有对类的更改都将丢失
2.  XSD 可用于验证任何可以使用这些类进行（反）序列化的 XML 文档。

# php - PHP数组导航

> ID：13825762
> 
> 赞同：0
> 
> 时间：2012-12-11T17:52:24.847
> 
> 标签：php, arrays

我得到了一个具有这种结构的数组，我试图从中获取一个元素：

```
Array
(
[0] => Array
    (
        [description] => 
        [idProduct] => Array
            (
                [id1] => 7227
                [idProduct] => 3
            )

        [idSite] => 2592
        [name] => Parcela Azul
        [picture] => 
    )

[1] => Array
    (
        [description] => 
        [idProduct] => Array
            (
                [id1] => 7227
                [idProduct] => 8
            )

        [idSite] => 2592
        [name] => Apartamento 2 pax
        [picture] => 
    )
) 
```

所以，我得到了一个存储数组的变量。我的问题是：

为什么这样有效：

```
$test = $categorias[0];
$test2 = $test['name'];
echo "<pre>";
print_r($test2);
echo "</pre>"; 
```

结果：Parcela Azul

这不会：

```
$test = $categorias[0]['name'];
echo "<pre>";
print_r($test);
echo "</pre>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:09:55.693

在这里我得到了什么

```
$test = array
                    (
                        array(
                              'name'=>'Rohit'  
                        ),
                        array(
                            'name'=>'go'
                        )
                    );
        echo $test[1]['name']; 
```

如果您正在使用系统索引，那么它会产生一些问题。您应该删除系统索引值。

# node.js - 无法使用 Node.js + Expressjs 连接到 MongoHQ

> ID：13825763
> 
> 赞同：0
> 
> 时间：2012-12-11T17:52:24.830
> 
> 标签：node.js, mongodb, heroku

我最近一直在尝试同时学习 Node.js 和 Mongo。我在 Heroku 上设置了一个帐户，让一个简单的 Node.js 应用程序正常运行，然后潜入 Mongo。我在 MongoHQ 上添加了，但从那以后一直无法将应用程序连接到数据库。每次我运行应用程序时它都会崩溃。在这一点上，我只想弄清楚我的数据库连接或我对 mongoskin 的使用有什么问题。这是我当前的代码：

```
var express = require('express');
var mongo = require('mongoskin');

var app = express.createServer(express.logger());

var conn = mongo.db(process.env.MONGOHQ_URL);

app.get('/', function(request, response) {
    conn.collection('facts').find().toArray(function(err, facts){
            if(err) throw err;
            response.send(facts);
    });

});

var port = process.env.PORT || 5000;
app.listen(port, function() {
  console.log("Listening on " + port);
}); 
```

和我的包文件：

```
{
    "name": "app1",
    "version": "0.0.4",
    "dependencies": {
            "express": "3.x",
            "mongoskin" : "0.1.x"
    },
    "engines": {
            "node": "0.8.x",
            "npm": "1.1.x"
    }
} 
```

最后是错误代码：

```
2012-12-11T17:42:32+00:00 app[web.1]:     at Module.load (module.js:356:32)
2012-12-11T17:42:32+00:00 app[web.1]:     at Module._compile (module.js:449:26)
2012-12-11T17:42:32+00:00 app[web.1]:     at Object.<anonymous> (/app/node_modules/mongoskin/lib/mongoskin/db.js:162:28)
2012-12-11T17:42:32+00:00 app[web.1]:     at Db.Object.defineProperty.get [as state] (/app/node_modules/mongoskin/node_modules/mongodb/lib/mongodb/db.js:2125:31)
2012-12-11T17:42:32+00:00 app[web.1]:     at Module.require (module.js:362:17)
2012-12-11T17:42:32+00:00 app[web.1]:     at Module._compile (module.js:449:26)
2012-12-11T17:42:32+00:00 app[web.1]: TypeError: Cannot read property '_serverState' of undefined
2012-12-11T17:42:32+00:00 app[web.1]:     at Function.Module._load (module.js:312:12)
2012-12-11T17:42:32+00:00 app[web.1]:     at Object.<anonymous> (/app/node_modules/mongoskin/lib/mongoskin/index.js:2:10)
2012-12-11T17:42:32+00:00 app[web.1]: 
2012-12-11T17:42:32+00:00 app[web.1]:     at Object.Module._extensions..js (module.js:467:10)
2012-12-11T17:42:32+00:00 app[web.1]:     at require (module.js:378:17)
2012-12-11T17:42:33+00:00 heroku[web.1]: Process exited with status 1
2012-12-11T17:42:33+00:00 heroku[web.1]: State changed from starting to crashed 
```

任何可能导致问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T23:37:14.420

您只需要更新`mongoskin`库。替换这一行：

`"mongoskin" : "0.1.x"`

和

`"mongoskin" : ">= 0.3.6"`

更多细节[在这里](https://github.com/kissjs/node-mongoskin/issues/50)

# c# - 修改主题资源而不复制控制模板？

> ID：13825766
> 
> 赞同：1
> 
> 时间：2012-12-11T17:52:43.700
> 
> 标签：c#, silverlight, xaml, themes, upgrade

问题是我们正在使用第 3 方控件，并且它有一个由他们提供的主题文件。他们曾经在其中一个控件（GridView）中使用中心颜色（未选择焦点），并在他们的文件中定义。但不是他们改变了主题文件中的颜色，所以我们所有的颜色也改变了。

所以我们想恢复颜色，我想到了两个解决方案：

1.  编辑他们的主题文件，重新编译并放入我们的项目中。

2.  抽象出主题 xaml 并应用于我们所有的控件。

但是当我们升级我们的 3rd 方控制库时，这两种解决方案都可能有问题或需要重做。

**因为我想要更改的只是主题文件中的两个 SolidColorBrush 资源，有没有什么好的方法可以在运行时或无论如何覆盖颜色？**

注意：在 ControlTemplate 的 VisualState 中使用的 SolidColorBrush。

在主题文件中：

```
 <ResourceDictionary
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
                    ......              
                >
        <telerik:Windows7Theme x:Key="Theme" />

.....
    <SolidColorBrush x:Key="ItemBackground_SelectedUnfocused" Color="White" />
    <SolidColorBrush x:Key="ItemInnerBorder_SelectedUnfocused" Color="White" />
.... 
```

控制模板：

```
<ControlTemplate x:Key="GridViewRowTemplate" TargetType="grid:GridViewRow">
.......
    <VisualStateGroup x:Name="SelectionStates">
    .....
         <VisualState x:Name="SelectedUnfocused">
                    <Storyboard>
                        <ObjectAnimationUsingKeyFrames Duration="0" Storyboard.TargetName="Background_Over" Storyboard.TargetProperty="(UIElement.Visibility)">
                            <DiscreteObjectKeyFrame KeyTime="0">
                                <DiscreteObjectKeyFrame.Value>
                                    <Visibility>Visible</Visibility>
                                </DiscreteObjectKeyFrame.Value>
                            </DiscreteObjectKeyFrame>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Background_Over"
                                                       Storyboard.TargetProperty="BorderBrush">
                            <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                    Value="{StaticResource ItemOuterBorder_SelectedUnfocused}" />
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BackgroundInner_Over"
                                                       Storyboard.TargetProperty="Background">
                            <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                    Value="{StaticResource ItemBackground_SelectedUnfocused}" />
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BackgroundInner_Over"
                                                       Storyboard.TargetProperty="BorderBrush">
                            <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                    Value="{StaticResource ItemInnerBorder_SelectedUnfocused}" />
                        </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
                </VisualState> 
```

# javascript - 从父元素以外的元素获取偏移量？

> ID：13825767
> 
> 赞同：1
> 
> 时间：2012-12-11T17:52:46.750
> 
> 标签：javascript, jquery, position

使用`element.offset().left`获取元素相对于其父元素的偏移位置。有没有办法从另一个元素获取偏移位置？例如，这是我的 html：

```
<div id="tile_id_579" class="product_tile">  
<div class="selectContainer">
    <table style="width:100%;">
        <tbody>
            <tr>
                <td>        
                <div id="select-undefined" class="tzSelect">
                    <div id="options-undefined" class="tzOptions" style="max-height: 500px; width: 250px; display: none; min-width: 118px;">
                        <ul class="dropDown" id="dropdown-undefined">
                            <li><div class="header">Hand-Tossed Style Pizza</div>
                                <div class="subheader">The crowd-pleasing pizza that everyone can agree on.</div>
                                <div class="optkey">0</div>
                            </li>
                            <li><div class="header">Pan Pizza</div>
                                <div class="subheader">Our Pan Pizza is America's favorite!</div>
                                <div class="optkey">1</div>
                            </li>
                        </ul>
                    </div>
                </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</div> 
```

它是从数据库生成的。使用`offset().left`让我得到了 div 的偏移量`#selecct-undefined`，但我需要得到 div 离`#options-undefined`div 的距离`.selectContainer`。这可能吗？

**编辑添加**

尝试了这两种方法，并且都返回相同的内容：顶部：381，左侧：0。但是相对于文档，左侧不是 0；不可能。

```
var tip = $('#tile_id_579 #options-undefined .header');
tip.first().position(); 
```

和

```
var tip = $('#tile_id_579 #options-undefined .header');
tip.first().offset(); 
```

当这是 div 所在的位置时，left 怎么可能是 0？0 left 不是意味着它一直在浏览器窗口的左侧吗？

![在此处输入图像描述](../Images/c46631a6b1e8e32d39f7abf0e9e1795b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:09:29.390

由于您的元素确实在您指定的父元素中，您可以使用 .position() 而不是 .offset()。但是，如果 .selectContainer 不是最近的相对父级，您将需要获取元素和“其他”元素的位置并计算差异。

```
var myPos = $('#options-undefined').offset();
var otherPos = $('#options-undefined').closest('.selectContainer').offset();//if #options-undefined wasn't a child of .selectContainer you would do $('.selectContainer').offset();

var _offset = {
    top: otherPos.top - myPos.top,
    left: otherPos.left - myPos.left
} 
```

# javascript - 单击表“检查”复选框中的行？

> ID：13825768
> 
> 赞同：0
> 
> 时间：2012-12-11T17:52:48.320
> 
> 标签：javascript, jquery, asp.net-mvc

我希望这是正确的领域，因为它比其他任何东西都更具理论性。我目前正在处理一个页面，用户可以通过单击最左侧列中的复选框并单击`Edit`按钮来选择要编辑的一行或多行。我还没有决定是否要尝试编程此功能，但是否可以有效地**隐藏**复选框并使用某种 javascript 或 jquery 来使单击表中的行等同于检查相应行的复选框？我刚刚开始使用 javascript 和 jquery，我对它的强大程度感到困惑。请告知我这种类型的功能是否可行，如果可以，实现这种行为的一般方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:04:10.227

是的，这是完全可以实现的，尽管您可能想考虑在有人在他们的浏览器中禁用 JavaScript 的情况下的可访问性影响。

您可以采取多种方法。例如，您可以使用`click`类似以下的处理程序（未经测试）：

```
$(document).on('click', '#yourtable tr', function(evt) {
    $(this).toggleClass('selected');
}); 
```

这将为`tr`您的表中的每个（使用 id `#yourtable`）提供类`selected`，然后您可以通过 CSS 设置样式和/或通过另一段 jQuery 读取。

在事件处理程序中，您还可以执行其他操作来记录选择，例如更新隐藏的输入字段、直接发送回服务器或选中现有的复选框（如果您愿意，可以选择隐藏）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T18:17:55.423

可行的。就是这样：

[jsbin链接](http://jsbin.com/etejog/3/edit)

HTML

```
<table border=1>
    <tr><td><input type="checkbox"></td><td>Something 1</td><td>Something else 1</td></tr>
    <tr><td><input type="checkbox"></td><td>Something 2</td><td>Something else 2</td></tr>    
    <tr><td><input type="checkbox"></td><td>Something 3</td><td>Something else 3</td></tr>    
    <tr><td><input type="checkbox"></td><td>Something 4</td><td>Something else 4</td></tr>
</table> 
```

jQuery

```
$('input[type=checkbox]').parent('td').hide(); // If JS disabled, checkboxes are still visible

$('table tr').click( function() {
    var $chk = $(this).find('input[type=checkbox]');
    $chk.prop('checked',!$chk.prop('checked'));
    $(this).toggleClass('selected'); // To show something happened
}); 
```

CSS

```
tr.selected{
   background-color:#ccc;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T18:09:51.780

这是请求功能的[简单实现：](http://jsfiddle.net/PM6JX/)

```
$(document).ready(function() {
    $('tr').click(function(e) {
        var $checkbox = $(this).find('input');
        var isChecked = $checkbox.prop('checked');

        if (isChecked) {
            $checkbox.removeProp('checked');
        }
        else {
            $checkbox.prop('checked', 'checked');
        }
    });
});​ 
```

# java - Spring Transaction 如果此重复键给出异常，但它不执行回滚（更新代码以更好地检测错误）

> ID：13825771
> 
> 赞同：2
> 
> 时间：2012-12-11T17:52:57.780
> 
> 标签：java, spring, jakarta-ee, spring-transactions

在事务中，如果密钥重复出现异常，则发生在第二个持久化中，第一个持久化并且不执行回滚，并且这个仍然记录在数据库中。**（使用更多代码更新问题以更好地检测错误）**

```
 public interface TemperaturesDao {
        @Transactional (rollbackFor=Throwable.class)
    // @Transactional (rollbackFor=Exception.class) // changed
        void save(JavaTemperatures jT);
    }

    @Repository
    public class TemperaturesDaoImp implements TemperaturesDao{
        @Autowired
        private SessionFactory sf;
        @Transactional (rollbackFor=Throwable.class)
        // @Transactional (rollbackFor=Exception.class) // changed
        public void save(JavaTemperatures jT) {
            Session session = sf.getCurrentSession();
            session.save(jT);
        }
    }

    public interface TemperaturesService {
        @Transactional (rollbackFor=Throwable.class)
    // @Transactional (rollbackFor=Exception.class) // changed
        void saveService();
    }

    @Service("temperaturesServiceImp")
    public class TemperaturesServiceImp implements TemperaturesService{
        @Autowired
        TemperaturesDao tempeDao;

        @Transactional (rollbackFor=Throwable.class)
    // @Transactional (rollbackFor=Exception.class) // changed
        public void saveService() {
            JavaTemperatures jT = new JavaTemperatures();
            jT.setKey("key2");
            tempeDao.save(jT); // This is registered in the database at the end of the veService

            jT = new JavaTemperatures();
            jT.setKey("key1"); // This key exists in the database
            tempeDao.save(jT); // This record gives exception at the end of the saveService
        }
    }

    public class BaseBeanImp implements Serializable{
        ...
    }

    @Controller
    @Scope("session")
    public class ComparaBean extends BaseBeanImp implements Serializable {
        private static final long serialVersionUID = 1L;
        @Autowired
        private TemperaturesService tempeService;

        public String doSave() {
            tempeService.saveService() ;
            return null;
        }
    }

    **index.xhtml**
    <h:commandButton value="Save" action="#{comparaBean.doSave}" /> 
```

**应用程序上下文.xml**

```
<beans xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd" xmlns="http://www.springframework.org/schema/beans" xmlns:tx="http://www.springframework.org/schema/tx" xmlns:context="http://www.springframework.org/schema/context" xmlns:aop="http://www.springframework.org/schema/aop" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 

<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close" >
<property name="driverClassName" value="com.mysql.jdbc.Driver" > </property>
<property name="url" value="jdbc:mysql://redhada.org:3306/db" > </property>
<property name="username" value="username" > </property>
<property name="password" value="password" ></property>
<property name="testOnBorrow" value="true" > </property>
<property name="validationQuery" value="SELECT 1" ></property>
<property name="timeBetweenEvictionRunsMillis" value="1200000" ></property>
</bean>

<bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean" >
<property name="dataSource" ref="dataSource" > </property>
<property name="annotatedClasses" >
    <list>
    <value>com.redhada.model.JavaTemperatures</value>
    </list>
</property>
<property name="hibernateProperties">
<props><prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop></property>
</bean>
<context:annotation-config></context:annotation-config>
<context:component-scan base-package="com.redhada"></context:component-scan>
<tx:annotation-driven transaction-manager="transactionManager" />
<bean id="transactionManager"
 class="org.springframework.orm.hibernate3.HibernateTransactionManager" >
<property name="sessionFactory" ref="sessionFactory" > </property> 
```

**安慰：**

```
263194 [http-8080-Processor23] WARN org.hibernate.util.JDBCExceptionReporter - SQL Error: 1062, SQLState: 23000
263194 [http-8080-Processor23] ERROR org.hibernate.util.JDBCExceptionReporter - Duplicate entry 'clave31' for key 1
263195 [http-8080-Processor23] ERROR org.hibernate.event.def.AbstractFlushingEventListener - Could not synchronize database state with session org.hibernate.exception.ConstraintViolationException: Could not execute JDBC batch update
...
Caused by: java.sql.BatchUpdateException: Duplicate entry 'key1' for key 1
...
Caused by: com.mysql.jdbc.exceptions.MySQLIntegrityConstraintViolationException: Duplicate entry 'key1' for key 1
... 
```

**但它保存了记录**

**如果第二个 tempeDao.save 给出异常，为什么会持续存在？**

**为什么不做回滚？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:04:35.657

改变了你的`@Transactional (rollbackFor=Exception.class)`

至

```
@Transactional (rollbackFor=Throwable.class) 
```

并检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T19:07:18.527

您没有显示实际运行的调用`saveService()`. 调用很可能来自已经位于事务代理后面的位置，因此 Spring 无法“看到”注释以在该级别启动事务。如果您添加代码，将能够判断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-26T17:18:59.717

显然 tempeDao.save 每次调用都会启动一个新事务。所以第一次调用 save 方法成功提交，但第二次调用失败，出现重复条目​​异常和回滚。

尝试将propagation= Propagation.MANDATORY 添加到DAO 事务方法中。

```
@Transactional (propagation= Propagation.MANDATORY, rollbackFor=Throwable.class) 
```

这迫使 dao 使用服务的相同事务。然后回滚将应用于所有。

我认为最新版本的spring不会有这个问题，

# c# - 如何将 DataTable 行移动到其 DataTable 的第一个位置

> ID：13825772
> 
> 赞同：13
> 
> 时间：2012-12-11T17:53:03.343
> 
> 标签：c#, asp.net, linq, datatable, dataset

`column1`我想在 asp.net DataTable 上获取特定行，并根据列值将其移动到此 DataTable 上的第一行。我的数据表`dt1`是通过数据库查询填充的，而要搜索的值是通过来自另一个数据库的另一个查询，所以我当时不知道要搜索的值`dt1 select`。

```
// I use this variable to search into
// DataTable
string valueToSearch = "some value"; 
```

所以我需要将值搜索`some value`到我的 DataTable 列中`column1`。然后将整行移动到第一个位置。

谢谢你。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-12T12:20:31.913

我们必须先克隆行数据：

```
 DataRow[] dr = dtable.Select("column1 ='" + valueToSearch +"'");
            DataRow newRow = dtable.NewRow();
            // We "clone" the row
            newRow.ItemArray = dr[0].ItemArray;
            // We remove the old and insert the new
            ds.Tables[0].Rows.Remove(dr[0]);
            ds.Tables[0].Rows.InsertAt(newRow, 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T18:20:04.873

您必须对此进行性能测试，但一种方法是在查询本身中进行。首先在顶部获取您想要的行，然后将其与其余行结合起来。

由于我对您的数据库一无所知，因此这是一种通用的方法：

```
SELECT Column1, Column2, Column3
FROM MyTable
WHERE Column1 = 'some value'

UNION

SELECT Column1, Column2, Column3
FROM MyTable
WHERE Column1 <> 'some value' 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-11T18:05:23.213

如果该列只有一条搜索值的记录，请尝试此操作

```
DataRow[] dr = dtEmp.Select("column1 ='" + valueToSearch +"'");
myDataTable.Rows.InsertAt(dr[0], 0); 
```

# java - Java 在从文件中读取字符时忽略 EOF

> ID：13825773
> 
> 赞同：2
> 
> 时间：2012-12-11T17:53:04.707
> 
> 标签：java

我尝试逐字符读取文件字符。不幸的是，Java 在从文件中读取字符时会忽略 EOF。

```
FileReader fileReader = new FileReader(fileText);
char c;
String word = "";
List<String> words = new ArrayList<String>();

while ((c = (char) fileReader.read()) != -1) {
    System.out.println(c);
    if (c != ' ') {
        word = word + c;
    }
    else {
        words.add(word + " ");
        word = "";
    }
} 
```

它应该在读取文件后分解，但它永远不会停止运行....

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T17:55:51.137

在 Java 中，`char`是无符号的，不能等于`-1`。您应该在进行演员表之前进行比较。

```
int ch;
while ((ch = fileReader.read()) != -1) {
    char c = (char)ch;
    System.out.println(c);
    ...
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T17:56:08.797

发生这种情况是因为`char`不能等于`-1`，即使您分配`-1`给它：

```
char c = (char)-1;
System.out.println(c == -1); // prints false 
```

制作`c`,`int`并`char`仅在您连接时将其转换为：

```
word = word + (char)c; 
```

更好的是，用于`StringBuilder`在运行时构建字符串：否则，您会在循环中创建大量临时字符串对象，而这些对象会被丢弃。

```
StringBuilder word = new StringBuilder();
List<String> words = new ArrayList<String>();
int c;
while ((c = fileReader.read()) != -1) {
    System.out.println((char)c);
    word.append((char)c);
    if (c == ' ') {
        words.add(word.toString());
        word = new StringBuilder();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T18:00:08.897

你应该试试下面的代码

```
public static void main(String[] args) throws IOException {
    FileReader fileReader = new FileReader(fileLocation);
    int c;
    String word = "";
    List<String> words = new ArrayList<String>();

    while ((c = (int) fileReader.read()) != -1) {
        System.out.println((char)c);
        char ch = (char)c;
        if (ch != ' ') {
            word = word + ch;
        } else {
            words.add(word + " ");
            word = "";
        }
    }
    System.out.println(word);
} 
```

# ruby - 在 Heroku 上部署 Schnitzelpress - 错误

> ID：13825777
> 
> 赞同：1
> 
> 时间：2012-12-11T17:53:32.510
> 
> 标签：ruby, git, heroku, master

我是一名 CSS 设计师，现在正在学习通过 Ruby 进行编程。今天，我正在安装（或者更确切地说是尝试安装）Schnitzelpress，这是 Heroku 上的一个 Ruby 博客平台——

[http://schnitzelpress.org/manual/setup/](http://schnitzelpress.org/manual/setup/)

我按照上面的 T 指南。一切都很好，直到我到达这个 -

git push heroku 大师

它给了我一个`src refefspec master does not match`错误和`error: failed to push some refs to...`错误。

我在 Stackoverflow 中读到了类似的错误，但徒劳无功。

我是编程的初学者，所以你能用外行的话来帮助我。我知道机器没有错。是我。我只是不知道我做错了什么。

非常感激！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-12T08:45:23.080

尝试：

```
git add .
git commit -m 'committing..'
git push 
```

如果有问题尝试`git pull`重复

# c# - 如何在 ASP.NET MVC 4 中实现自动保存

> ID：13825780
> 
> 赞同：0
> 
> 时间：2012-12-11T17:53:40.507
> 
> 标签：c#, ajax, asp.net-mvc-4

在填写表格时，GMail 等一些网站提供了自动保存功能，可将目前填写的表格自动保存到数据库中。

如果我必须在我的 MVC 4 应用程序中实现它，我该怎么做？

我正在考虑选项，但除了自己编写一些 JavaScript 代码来进行 Ajax 调用并以 JSON 格式将数据发送到服务器，在服务器端，我找不到任何其他方法，通过控制器上的操作接受响应JSON数据，将其反序列化并将不完整的数据保存到数据库中。

但这一切似乎需要做很多工作。我假设应该有一个更简单的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T17:55:52.947

你可以试试[Sisyphus.js jQuery Autosave 插件](http://simsalabim.github.com/sisyphus/)。它通过将表单状态保存在 LocalStorage 中来工作，以便用户可以检索部分填写的表单。它的优点是不需要对服务器代码进行任何修改，因此它应该适用于*任何*现有的 ASP.NET MVC 应用程序。

在此处从 Github 下载：[https ://github.com/simsalabim/sisyphus](https://github.com/simsalabim/sisyphus)

# eventbrite - 可以通过api添加与会者吗？

> ID：13825785
> 
> 赞同：3
> 
> 时间：2012-12-11T17:54:08.150
> 
> 标签：eventbrite

在制作 elance 招聘广告之前，我希望确认可以通过 eventbrite api 将参与者添加到活动中。作为非程序员，在阅读 dev eventbrite 网站时根本不清楚这实际上是可能的。这是我想做的事情：

1.  在 Eventbrite 中创建一个事件（并获取事件 ID 或所需的任何内容）

2.  在 Infusionsoft 中创建产品（使用来自 eventbrite 的事件 ID）

3.  在 Infusionsoft 中销售产品时，请发布包含以下信息的 http 帖子：

[http://eventbrite-api-sample.com/](http://eventbrite-api-sample.com/)（添加与会者命令）？（事件 ID 命令）？（客户名称、电子邮件等）

1.  很高兴让 eventbrite 在提醒、检查、跟进方面做这件事！

如果我的问题很明显，我深表歉意！谢谢你的帮助！如果这看起来可行，我希望制作一个 elance 招聘广告并为 eventbrite 提供开发者资源页面！

瑞安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-08T18:54:01.903

根据我的研究和使用 API 的尝试，Eventbrite 似乎不太可能打开该选项。导入与会者和使用 API 添加与会者被削弱了，很可能没有人使用他们自己的网站/支付处理来规避 Eventbrite 费用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T16:56:47.657

目前这不是 API 提供的功能，但可以选择通过 UI 手动添加与会者。说明在这里：[http ://help.eventbrite.com/customer/en_us/portal/articles/428370-add-attendees-manually](http://help.eventbrite.com/customer/en_us/portal/articles/428370-add-attendees-manually)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T22:36:09.083

似乎无法通过 API 创建新的与会者。他们的工作流程页面也表明了这一点：

[http://developer.eventbrite.com/doc/workflows/#orders](http://developer.eventbrite.com/doc/workflows/#orders)

# vba - 删除未更新的文件

> ID：13825787
> 
> 赞同：0
> 
> 时间：2012-12-11T17:54:16.080
> 
> 标签：vba, delete-file

有谁知道是否可以删除某个时间未更新的文档。我正在尝试在每天晚上 12:01 AM 重新填写一张空白检查表，如果没有人输入当天的检查信息，则删除当天的表格，这样我就不会保存多余的空白检查表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:02:26.693

对的，这是可能的。这是基本代码。您需要更改 if 语句以反映正确的时间段。

```
Dim oFileObj
Set oFileObj = Wscript.CreateObject("WScript.FileSystemObject")
oFileObj.GetFile("File.Name")  
if oFileObj.DateLastModified < NOW then
    oFileObj.DeleteFile("File.Name")
end if
Set oFileObj = Nothing 
```

# php - 当标签不活动时，如何使此保持运行？

> ID：13825791
> 
> 赞同：1
> 
> 时间：2012-12-11T17:54:25.690
> 
> 标签：php, javascript, timer

```
function timer(time,max) {
   if(time-1>=0) {
     --time;
       $("#timer2").html(Math.ceil(time/100));
          pix = Math.round((time/max)*100);
   document.getElementById('timer').style.width = pix+"%";
  setTimeout("timer("+time+","+max+")",10);
  }
 } 
```

那是Javascript。

```
 You have <font style='color: #ff0' id='timer2'><?PHP echo $time; ?></font> seconds left until you can skill again<br>
<div style='background-color: black; width: 100px;'>
    <div style='background-color: #ffd700; text-align: center; width: 100%' id='timer'>&nbsp;
    </div>
</div>
<script>
    timer(<?PHP echo $time*100; ?>,<?PHP echo $time*100; ?>);
</script> 
```

基本上，时间可以是 X 秒。计时器每 10 毫秒运行一次，因此条形图看起来很平滑。问题是，当您离开该选项卡时，它会停止移动。有没有办法治愈这段代码来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:53:05.717

In modern browsers, timeouts and intervals are throttled when the tab is inactive, so your timer function is only firing once per second instead of 100 times per second while the tab is inactive.

要解决这个问题，您需要存储动画开始的时间`Date.now()`（自开始以来经过的时间量。

示例（[jsfiddle](http://jsfiddle.net/Gz3Hb/2/)）

```
timer = function(max) {
    if (timer.start === undefined) timer.start = Date.now();
    if (timer.max === undefined) timer.max = max;

    var max = timer.max,
        elapsed = Date.now() - timer.start,
        left = Math.max(max - elapsed, 0),
        pctLeft = Math.min(left/max, 1);

    $('#timer2').html(Math.ceil(left/1000));
    $('#timer').css('width', pctLeft * 100 + '%');

    if (left > 0) setTimeout(timer, 30);
    else timer.start = timer.max = undefined;
 }

timer(5000);
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T18:41:05.103

如果您已经在使用 jQuery，请查看[jQuery 计时器](http://code.google.com/p/jquery-timer/)插件。

# python - python代码在完成内循环后不执行外循环，而仅针对第一个元素

> ID：13825793
> 
> 赞同：0
> 
> 时间：2012-12-11T17:54:37.080
> 
> 标签：python, nested-loops

背景：我有一个哈希，我正在迭代它以一种很好的格式打印它。

**样本哈希**

```
Final = {
    'sf_market_flash_subscribers': [
        {'38': './BLMetricsSql.sql'}
    ], 
    'vw_owner_product_bls_only': [
        {'31': './BLMetricsSql.sql'}, 
        {'39': './BLMetricsSql.sql'}, 
        {'62': './BLMetricsSql.sql'}, 
        {'64': './BLMetricsSql.sql'}
    ]
} 
```

**我的代码**

```
def printFinal(final):
    for key, value in final.iteritems():
        print key
        print value
        line_num=""
        path=""
        uniqueTables=[]
        for line_and_path in value:
            path=line_and_path.values()[0]
            uniqueTables.append(path)
            print uniqueTables
    print uniqueTables
    uniqueTables=list(set(uniqueTables))
    print uniqueTables
    for unique_path in uniqueTables:
        print unique_path
        for line_and_path in value:
            if line_and_path.values()[0]==unique_path.rstrip():
                line_num = line_and_path.keys()[0]
                print line_num 
```

**上述代码的输出**

```
sf_market_flash_subscribers
[{'38': './BLMetricsSql.sql'}]
['./BLMetricsSql.sql']
vw_owner_product_bls_only
[{'31': './BLMetricsSql.sql'}, {'39': './BLMetricsSql.sql'}, {'62': './BLMetricsSql.sql'}, {'64': './BLMetricsSql.sql'}]
['./BLMetricsSql.sql']
['./BLMetricsSql.sql', './BLMetricsSql.sql']
['./BLMetricsSql.sql', './BLMetricsSql.sql', './BLMetricsSql.sql']
['./BLMetricsSql.sql', './BLMetricsSql.sql', './BLMetricsSql.sql', './BLMetricsSql.sql']
['./BLMetricsSql.sql', './BLMetricsSql.sql', './BLMetricsSql.sql', './BLMetricsSql.sql']
['./BLMetricsSql.sql']
./BLMetricsSql.sql
31
39
62    
64 
```

查看前 4 行输出

循环分别在第 1 行和第 2 行打印键和值然后它打印循环内唯一表的当前状态之后，BOOM 所有剩余的代码都没有被执行，它继续循环最后的第二个元素哈希 vw_owner_product_bls_only 然后开始执行它。但是，对于这个元素，内部循环之后的所有代码都被执行，我得到了所需的输出。

那么，为什么其余的代码不仅仅针对最终哈希中的第一个元素运行呢？是因为散列中的值只有一个元素吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:01:51.497

因为你的缩进不正确。如果您希望代码在循环内运行，那么它必须比启动循环的语句缩进更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:18:34.777

每次循环时都初始化 uniqueTables，因此循环外的代码只能看到最近的值，即第二个元素。初始化需要在最外层：

```
def printFinal(final):
    uniqueTables = []
    for key, value in final.iteritems():
        # etc
    print uniqueTables
    uniqueTables=list(set(uniqueTables))
    # etc 
```

# hibernate - Hibernate concat 函数/运算符让其他函数转换为 concat 运算符

> ID：13825795
> 
> 赞同：0
> 
> 时间：2012-12-11T17:54:39.720
> 
> 标签：hibernate, hql

我对 Hibernate 有点陌生，找不到这个问题的原因。

这是我的 HQL：

```
update MyEntity set field1 = :value1 || substr(field1, :pos, 100) where ... 
```

这转化为：

```
update MY_TABLE set field1=(?||substr(field1||?||100) where ... 
```

所以，我的猜测是每个逗号（`,`）都被翻译成`||`重叠括号内的连接运算符（）。我错过了什么吗？

# javascript-intellisense - jscript IntelliSense 不工作，并且 jscript 在 VS2008 中未列为文本编辑器语言

> ID：13825796
> 
> 赞同：1
> 
> 时间：2012-12-11T17:54:40.603
> 
> 标签：javascript-intellisense

我使用的是 VS2008 版本 3.5 SP1，而 IntelliSense 不适用于 JScript。此外，JScript 甚至没有被列为工具-> 选项-> 文本编辑器下的一种语言。我需要做一些特殊的事情来将 JScript 定义为 VS2008 下的语言吗？

# google-maps - 谷歌将自动完成限制在特定区域

> ID：13825806
> 
> 赞同：10
> 
> 时间：2012-12-11T17:55:43.513
> 
> 标签：google-maps, google-maps-api-3, google-places-api, google-places

我的要求是只为班加罗尔的地点获取谷歌地点自动完成建议，但我并没有只为班加罗尔或提到的纬度经度范围内获取地点。

我只想在自动完成文本字段中的图像位置下方退休。

![在此处输入图像描述](../Images/a3d7de057cb67a23c9f86660a2af22c4.png)

有人可以建议如何实现相同的目标以及我哪里出错了。

Javascript：

```
<script type="text/javascript">

   function initialize1() {

    var southWest = new google.maps.LatLng( 12.97232, 77.59480 );
    var northEast = new google.maps.LatLng( 12.89201, 77.58905 );
    var bangaloreBounds = new google.maps.LatLngBounds( southWest, northEast );

    var options = {
        bounds: bangaloreBounds,
        types: ['(cities)'],
        componentRestrictions: {country: 'in'}
    };

     var input = document.getElementById('searchTextFieldTo');
     var autocomplete = new google.maps.places.Autocomplete(input, options);
   }
   google.maps.event.addDomListener(window, 'load', initialize1);
</script> 
```

文本域：

```
<input type="text" id="searchTextFieldTo" class="ui-timepicker-hour" style="width:350px;text-align:left;font-style:italic;" placeholder="Enter To location" autocomplete="on" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-04-07T05:57:08.227

Google 提供了两种方法来实现这一点。***如果您不满意，因为在印度这样的国家它效果不佳，因为这里的州和规定没有矩形或结构边界。***

**1.LatLngBounds（LatLng西南，LatLng东北）：**在这里可以给经纬度组成一个矩形。

**2\. Location (Lat,Lng) & Radius:**你可以在哪里给出纬度和经度来形成一个圆圈。

但是，如果您来自印度等国家/地区，这些方法的问题是它们无法提供预期的结果，这些国家和规定不像美国那样采用结构化形状（矩形）。

如果您面临同样的问题，那就是黑客攻击。使用 jQuery/Jacascript，您可以附加在文本输入中始终保持城市名称的函数，该文本输入与 Places API 的自动完成对象绑定。

这里是：

```
<script>
    $(document).ready(function(){
        $("#locality").val(your-city-name)  //your-city-name will have city name and some space to seperate it from actual user-input for example: “Bengaluru | ”
        });

    $("#locality").keydown(function(event) { //locality is text-input box whixh i supplied while creating Autocomplete object
    var localeKeyword = “your-city-name”
    var localeKeywordLen = localeKeyword.length;
    var keyword = $("#locality").val();
    var keywordLen = keyword.length;

    if(keywordLen == localeKeywordLen) {
        var e = event || window.event;  
        var key = e.keyCode || e.which; 

        if(key == Number(46) || key == Number(8) || key == Number(37)){
            e.preventDefault(); 
            }//Here I am restricting user to delete city name (Restricting use of delete/backspace/left arrow) if length == city-name provided

        if(keyword != localeKeyword) {
            $("#locality").val(localeKeyword);
            }//If input-text does not contain city-name put it there
        }

    if(!(keyword.includes(localeKeyword))) {
        $("#locality").val(localeKeyword);
        }//If keyworf not includes city name put it there
    });
</script> 
```

（图片：）在此黑客之前

[![在此处输入图像描述](../Images/2537eb0d2210de888430e33f97d090fd.png)](https://i.stack.imgur.com/1jICN.png)

（图片：）在这次黑客攻击之后

[![在此处输入图像描述](../Images/2413605e86cc7733263929c60b5aeb6a.png)](https://i.stack.imgur.com/KssEP.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T05:19:01.740

正如我[在这里](https://stackoverflow.com/questions/13702720)的回答中提到的：

目前无法将结果限制在特定位置。您可以像上面那样使用边界来将结果偏向于，但不限于包含在指定边界内的位置。

如果您认为地域限制是一项有用的功能，请提交[Places API - 功能请求](http://code.google.com/p/gmaps-api-issues/issues/entry?template=Places%20API%20-%20Feature%20Request)。

编辑：根据 2018-07，可以定义要检索的地点*类型，例如**城市*（根据 API 是 locality 或 Administrative_area3）。[在此处](https://stackoverflow.com/questions/13825806/google-places-autocomplete-restrict-to-particular-area#answer-54279881)查看完整答案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-13T04:08:53.737

我想你可以试试这个。

```
var bangaloreBounds = new google.maps.LatLngBounds(
    new google.maps.LatLng(12.864162, 77.438610),
    new google.maps.LatLng(13.139807, 77.711895));

var autocomplete = new google.maps.places.Autocomplete(this, {
  bounds: bangaloreBounds,
  strictBounds: true,
});

autocomplete.addListener('place_changed', function () {

}); 
```

注意 xomena: [strictBounds 选项](https://developers.google.com/maps/documentation/javascript/3.exp/reference#AutocompleteOptions)是在 Maps JavaScript API 3.27 版中添加的，目前（2017 年 1 月）是实验版本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-21T09:06:18.307

```
function initialize() {

 var bangaloreBounds = new google.maps.LatLngBounds(
    new google.maps.LatLng(12.864162, 77.438610),
    new google.maps.LatLng(13.139807, 77.711895));

    var options = {
        bounds: bangaloreBounds,

        componentRestrictions: {country: 'in'},
        strictBounds: true,
    };

     var input = document.getElementById('autocomplete');
     var autocomplete = new google.maps.places.Autocomplete(input, options);
   }
   google.maps.event.addDomListener(window, 'load', initialize); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-20T18:58:42.963

[与此处](https://developers.google.com/maps/documentation/javascript/places-autocomplete#add_autocomplete)的 Google javascript Places API 的当前文档一样，您可以定义要检索的地点*类型*数组。在下面的示例中，我将其设置为仅检索城市（根据 API，它们是 locality 或 Administrative_area3）。您也可以将其设置为检索区域、地址、机构和地理编码。

```
function initMap() {
        var input = document.getElementById('my-input');
        var options = {
               types: ['(cities)']
                       };
        var autocomplete = new google.maps.places.Autocomplete(input, options);
        // the rest of the code ...
 } 
```

# visual-studio-2010 - 如何在构建后事件中使用 OR 语句？

> ID：13825811
> 
> 赞同：11
> 
> 时间：2012-12-11T17:55:49.990
> 
> 标签：visual-studio-2010, post-build-event

我正在尝试在 Post-Build 事件中使用带有 OR 的条件，但到目前为止，我还没有运气。以下不起作用：

`if not "$(ConfigurationName)" == "Debug" or not "$(ConfigurationName)" == "Release" (`

但这有效：

`if not "$(ConfigurationName)" == "Debug" (`

对于第一个，我得到一个存在代码 4。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-28T13:07:14.140

似乎在 Pre-Post Build 事件的条件中没有 OR/AND 的规定，至少根据这里缺乏文档：[http ://technet.microsoft.com/en-us/library/bb490920.aspx](http://technet.microsoft.com/en-us/library/bb490920.aspx)

您将不得不重新编写您的 IF 语句来做您想做的事情。

```
if not "$(ConfigurationName)" == "Debug" (
   rem do something
) else if not "$(ConfigurationName)" == "Release" (
   rem do the same thing as above
) 
```

希望这会有所帮助，尽管您的条件对我来说没有意义。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-04T21:24:40.450

如果要在 ConfigurationName 不是“Debug”或“Release”的 Post-Build 事件中执行某些逻辑，请尝试以下操作：

`if not "$(ConfigurationName)" == "Debug" (if not "$(ConfigurationName)" == "Release" (***ADD LOGIC HERE - ConfigurationName is not "Debug" or "Release"***))`

# jenkins - 尽管设置了 1 分钟的间隔，但 Jenkins 再次轮询存储库

> ID：13825820
> 
> 赞同：0
> 
> 时间：2012-12-11T17:56:36.660
> 
> 标签：jenkins

我已经设置了 Jenkins 作业并将轮询间隔设置为 1 分钟（我使用了这种语法 0 * * * *）。

查看轮询日志，我可以看到它报告说，一旦我保存了对作业的更改，就会进行轮询。但不到 10 分钟后，它还没有进行任何其他民意调查。

有什么建议我可以继续确定问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T22:03:01.743

您正在寻找 ”* * * * *”。

Jenkins 会发出警告，因为每分钟都可能有点过分，但您的版本控制服务器在处理负载时应该没有任何问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-11T18:00:28.923

您的 cron 语法设置为每小时轮询一次，时间为每小时零分钟。来自 Jenkins 帮助文本：

该字段遵循 cron 的语法（有细微差别）。具体来说，每一行由 5 个字段组成，由 TAB 或空格分隔：

MINUTE HOUR DOM MONTH DOW

MINUTE 小时内的分钟数 (0-59)

HOUR 一天中的小时 (0-23)

DOM 月份中的某一天 (1-31)

月份 月份 (1-12)

DOW 星期几 (0-7)，其中 0 和 7 是星期日。

# jquery - JQuery 数据表不工作

> ID：13825821
> 
> 赞同：2
> 
> 时间：2012-12-11T17:56:37.163
> 
> 标签：jquery, jsp, datatables

我是 JQuery 的新手。我正在尝试创建一个数据表，但它不起作用。除数据表功能外，所有功能均有效。也就是说，表格正在显示正确的数据，但排序、分页等不起作用。我已经从我的 webapp 文件夹中下载的插件代码中复制了媒体和脚本文件夹。请让我知道可能出了什么问题。我已经从这个链接 [http://www.codeproject.com/Articles/359750/jQuery-DataTables-in-Java-Web-Applications下载了 Datatable 插件](http://www.codeproject.com/Articles/359750/jQuery-DataTables-in-Java-Web-Applications)

下面是我的jsp文件

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<%@ include file="/jsp/common/include.jsp"%>
<%@ page import ="java.util.Date" %>
<html>
<head>
<title>Subscriptions List</title>
<link href="${RESOURCE_ROOT}/css/usersubs.css" rel="stylesheet" type="text/css" />
<link href="/media/dataTables/demo_page.css" rel="stylesheet" type="text/css" />
<link href="/media/dataTables/demo_table.css" rel="stylesheet" type="text/css" />
<link href="/media/dataTables/demo_table_jui.css" rel="stylesheet" type="text/css" />
<link href="/media/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" media="all" />
<link href="/media/themes/smoothness/jquery-ui-1.7.2.custom.css" rel="stylesheet" type="text/css" media="all" />

<script src="/scripts/jquery.js" type="text/javascript" ></script>
<script src="/scripts/jquery.dataTables.min.js" type="text/javascript"></script>

<script type="text/javascript">
$(document).ready(function () {
    $("#subscriptionlist").dataTable({
        "sPaginationType": "full_numbers",
        "bJQueryUI": true
    });
});
</script>
</head>
<body>
<div id="subscriptionsList">
<table id="subscriptionlist">
    <thead>
        <tr>
            <th>Subscription Name</th>
            <th>Type</th>
            <th>Last Updated</th>
            <th>Creation Date</th>
            <th>Delete</th>
        </tr>
    </thead>
    <tbody>
    <c:forEach var="subscription" items="${subList}">
        <tr>
            <td>${subscription.name}</td>
            <td>${subscription.type}</td>
            <td>${subscription.lastUpdateDt}</td>
            <td>${subscription.createDt}</td>
            <td><a href="${CONTEXT_ROOT}subscription/delete/id/${subscription.id}/${subscription.user.id}" class="show-hand-cursor">Delete</a></td>
        </tr>       
    </c:forEach>
    </tbody>        
</table>
<div style="width:100%; margin-top:0px;">
    <table border="0px">
        <tr>
            <td style="padding-top:25px"; align="right" class="noborder"> <button >Add Subscription</button></td>
        </tr>
    </table>
</div>
<div>

</div>
</div>
</body>
</html> 
```

我得到的 HTML 如下

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<?xml version="1.0" encoding="UTF-8" ?>
<html>
<head>
<title>Subscriptions List</title>
<link href="/cv-subscription-web/resources/css/usersubs.css" rel="stylesheet" type="text/css" />
<link href="/media/dataTables/demo_page.css" rel="stylesheet" type="text/css" />
<link href="/media/dataTables/demo_table.css" rel="stylesheet" type="text/css" />
<link href="/media/dataTables/demo_table_jui.css" rel="stylesheet" type="text/css" />
<link href="/media/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" media="all" />
<link href="/media/themes/smoothness/jquery-ui-1.7.2.custom.css" rel="stylesheet" type="text/css" media="all" />

<script src="/scripts/jquery.js" type="text/javascript" ></script>
<script src="/scripts/jquery.dataTables.min.js" type="text/javascript"></script>

<script type="text/javascript">
$(document).ready(function () {
    $("#subscriptionlist").dataTable({
        "sPaginationType": "full_numbers",
        "bJQueryUI": true
    });
});
</script>
</head>
<body>
<div id="subscriptionsList">
<table id="subscriptionlist">
    <thead>
        <tr>
            <th>Subscription Name</th>
            <th>Type</th>
            <th>Last Updated</th>
            <th>Creation Date</th>
            <th>Delete</th>
        </tr>
    </thead>
    <tbody>

        <tr>
            <td>EQ549_author3</td>
            <td>EqWireArticle</td>
            <td>Wed Nov 07 02:46:20 EST 2012</td>
            <td>Wed Nov 07 02:46:20 EST 2012</td>
            <td><a href="/cv-subscription-web/subscription/delete/id/50c0b59781ce4dd6efab7e14/dd32261" class="show-hand-cursor">Delete</a></td>
        </tr>       

        <tr>
            <td>EQ549_author4</td>
            <td>EqWireArticle</td>
            <td>Wed Nov 07 02:46:20 EST 2012</td>
            <td>Wed Nov 07 02:46:20 EST 2012</td>
            <td><a href="/cv-subscription-web/subscription/delete/id/50c5f96581ce1243814edb11/dd32261" class="show-hand-cursor">Delete</a></td>
        </tr>       

        <tr>
            <td>EQ_author7</td>
            <td>EqWireArticle</td>
            <td>Wed Nov 07 02:46:20 EST 2012</td>
            <td>Wed Nov 07 02:46:20 EST 2012</td>
            <td><a href="/cv-subscription-web/subscription/delete/id/50c64dc181ce1243814edb14/dd32261" class="show-hand-cursor">Delete</a></td>
        </tr>       

        <tr>
            <td>EQ_author6</td>
            <td>EqWireArticle</td>
            <td>Wed Nov 07 02:46:20 EST 2012</td>
            <td>Wed Nov 07 02:46:20 EST 2012</td>
            <td><a href="/cv-subscription-web/subscription/delete/id/50c64dc481ce1243814edb15/dd32261" class="show-hand-cursor">Delete</a></td>
        </tr>       

        <tr>
            <td>EQ_author8</td>
            <td>EqWireArticle</td>
            <td>Wed Nov 07 02:46:20 EST 2012</td>
            <td>Wed Nov 07 02:46:20 EST 2012</td>
            <td><a href="/cv-subscription-web/subscription/delete/id/50c64dc981ce1243814edb16/dd32261" class="show-hand-cursor">Delete</a></td>
        </tr>       

    </tbody>        
</table>
<div style="width:100%; margin-top:0px;">
    <table border="0px">
        <tr>
            <td style="padding-top:25px"; align="right" class="noborder"> <button >Add Subscription</button></td>
        </tr>
    </table>
</div>
<div>

</div>
</div>

</body>
</html> 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:54:21.557

[我在这里](http://jsfiddle.net/wBWgq/)建立了一个很好的小提琴——我在任何地方都看不到`dataTables.css`你的代码，但这不应该损害功能。

最可能的原因是`dataTables.min.js`找不到您的文件。如果您在解决此问题时遇到问题，您可以尝试链接到 Microsoft CDN for dataTables：http: [//datatables.net/blog/Microsoft_CDN](http://datatables.net/blog/Microsoft_CDN)

# email - 在单个电子邮件中使用不同编码方案编码的附件

> ID：13825823
> 
> 赞同：0
> 
> 时间：2012-12-11T17:56:43.210
> 
> 标签：email, encoding, email-attachments

可以对电子邮件中的附件进行编码。

1.  附件编码有哪些可用的方法/技术？

2.  在包含多个附件的单个电子邮件中，我们可以通过不同的编码技术（使用任何电子邮件客户端或某些编程）对不同的附件进行编码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:29:30.957

在这三个中，只有 MIME 得到了适当的标准化和广泛的支持。遗留编码（BinHex 和 uuencode）主要是为了向后兼容。他们曾经有过竞争（xxencode 等），但由于在 MIME 之前不存在官方标准，因此不可能提供详尽的答案。

我不知道该怎么称呼这些东西-您链接到的文档将它们称为“方法”，而不是“编码”。

现代用法中的术语“编码”主要是指内容传输编码，即在 MIME 中，base64 或引用打印。

我不会在一条消息中混合这些“方法”；事实上，我发现很难想象你会选择 MIME 以外的任何东西，除非你背负着支持过时系统的沉重负担。较旧的方法基本上只是其他文本/纯文本数据中间的无类型文本/纯文本数据，因此可以理解，uudecode 应用程序可能会获取 BinHex 数据并抱怨、崩溃和/或产生不正确的输出，反之亦然。

# javascript - 将一个单词中的所有字母替换为js中的*

> ID：13825829
> 
> 赞同：10
> 
> 时间：2012-12-11T17:56:53.963
> 
> 标签：javascript, regex, replace

我需要创建一个 javascript 函数，将单词的所有字母替换为星号。`*`它应该将单词替换`hello123`为`********`. 如何才能做到这一点 ？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-11T17:58:36.170

使用`str.replace(...)`.

互联网上有很多例子:-D

例如：

```
str.replace('foo', 'bar'); 
```

或者在你的情况下：

```
str.replace(/./g, '*'); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-11T18:00:20.573

你可以这样做：

```
'hello123'.replace(/./g, '*'); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-11T18:04:05.733

试试这个链接 [How to replace all characters in a string using JavaScript for this specific case: replace 。经过 _](https://stackoverflow.com/questions/3103056/how-to-replace-all-characters-in-a-string-using-javascript-for-this-specific-cas)

```
var s1 = s2.replace(/\S/gi, '*'); 
```

它将替换除空格或

```
var s1 = s2.replace(/./gi, '*'); 
```

这会将每个字符替换为`*`均匀的空格

# asp.net-mvc - 数据注释和 MVC 4

> ID：13825833
> 
> 赞同：2
> 
> 时间：2012-12-11T17:57:05.680
> 
> 标签：asp.net-mvc, asp.net-mvc-4

两年前我做了 MVC 2。我现在正在使用 MVC 4 并想确认一些事情。

1) 在 MVC 4 中，我们不需要创建 ModelMetadata 类来使用数据注解进行注解来进行数据验证。我们可以简单地注释模型类本身。

换句话说，如果我们使用 EDM 生成器为我们生成模型和相应的类，那么我们可以创建一组具有相同名称的新部分类，并在这些部分类本身上使用数据注释属性。

我们不需要创建新类型的模型元数据类并用数据注释/属性装饰该类，如下所示：*http* [://www.asp.net/mvc/tutorials/older-versions/models-%28data%29 /validation-with-the-data-annotation-validators-cs](http://www.asp.net/mvc/tutorials/older-versions/models-%28data%29/validation-with-the-data-annotation-validators-cs)

2) 为了使数据注释起作用，我们只需要引用 System.ComponentModel.DataAnnotations 而不是 Microsoft.Web.Mvc.DataAnnotations。

3) 我们不需要在 Global.asax 文件的 Application_Start 事件中实例化默认模型绑定器。

您能否确认我的理解是否正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T17:56:42.187

1.  我记得，在这方面，MVC 2 和 MVC 4 没有区别。您不必`MetadataType`在 MVC 2 中使用，您可以使用部分类来生成模型。
2.  我无法在 上找到任何 MSDN 文档`Microsoft.Web.Mvc.DataAnnotations`，但要让数据注释与 MVC 一起使用，您需要`System.ComponentModel.DataAnnotations`并且`System.Web.Mvc`（它包含一些额外的属性，例如`HiddenInputAttribute`）。
3.  不，你没有，它是由框架实例化的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:33:47.707

实际上，对于问题 1，您需要使用元数据类来注释模型优先 EF 类的属性，方法与之前使用 MVC2 的方式相同。当您使用代码优先的 EF 类时，您可以直接对它们进行注释 - 注释将用于生成数据库以及为视图搭建脚手架。

# shell - 在表单中调用带有参数的脚本

> ID：13825838
> 
> 赞同：0
> 
> 时间：2012-12-11T17:57:21.530
> 
> 标签：shell, vb6, vbscript

我有一个应该在按下按钮时调用脚本的表单。我正在尝试通过命令行调用它。我在命令行中测试了脚本，它工作正常。我无法获得在命令 shell 中运行脚本的表单。有任何想法吗？

这是我需要由 shell 自主运行的命令行字符串：

```
cscript.exe proc_image.vbs 170.191.XXX.XXX picName C:\PicStorage 
```

这是我目前在按钮的 On_Click() 操作中拥有的内容：

```
 ShellEx "cscript.exe C:\Scripts\proc_image.vbs" & " 170.191.XXX.XXX" & " picName" & " PicStorage" 
```

我的目标是调用脚本并传递 3 个参数：IP 地址、图片名称和最终存储目标。我的问题是让表单在 shell 中执行上述命令行。谢谢

编辑：这是 ShellEx 代码：

```
 Private Declare Function ShellExecute Lib "shell32.dll" Alias "ShellExecuteA" _
(ByVal hWnd As Long, ByVal lpOperation As String, _
ByVal lpFile As String, ByVal lpParameters As String, _
ByVal lpDirectory As String, ByVal nShowCmd As Long) As Long

Private Declare Function ShellExecuteForExplore Lib "shell32.dll" Alias "ShellExecuteA" _

(ByVal hWnd As Long, ByVal lpOperation As String, ByVal lpFile As String, lpParameters  As Any, _
lpDirectory As Any, ByVal nShowCmd As Long) As Long

 Public Enum EShellShowConstants
essSW_HIDE = 0
essSW_MAXIMIZE = 3
essSW_MINIMIZE = 6
essSW_SHOWMAXIMIZED = 3
essSW_SHOWMINIMIZED = 2
essSW_SHOWNORMAL = 1
essSW_SHOWNOACTIVATE = 4
essSW_SHOWNA = 8
essSW_SHOWMINNOACTIVE = 7
essSW_SHOWDEFAULT = 10
essSW_RESTORE = 9
essSW_SHOW = 5
End Enum

 Private Const ERROR_FILE_NOT_FOUND = 2&
 Private Const ERROR_PATH_NOT_FOUND = 3&
 Private Const ERROR_BAD_FORMAT = 11&
 Private Const SE_ERR_ACCESSDENIED = 5        ' access denied
 Private Const SE_ERR_ASSOCINCOMPLETE = 27
 Private Const SE_ERR_DDEBUSY = 30
 Private Const SE_ERR_DDEFAIL = 29
 Private Const SE_ERR_DDETIMEOUT = 28
 Private Const SE_ERR_DLLNOTFOUND = 32
 Private Const SE_ERR_FNF = 2                ' file not found
 Private Const SE_ERR_NOASSOC = 31
 Private Const SE_ERR_PNF = 3                ' path not found
 Private Const SE_ERR_OOM = 8                ' out of memory
 Private Const SE_ERR_SHARE = 26

 Public Function ShellEx( _
    ByVal sFIle As String, _
    Optional ByVal eShowCmd As EShellShowConstants = essSW_SHOWDEFAULT, _
    Optional ByVal sParameters As String = "", _
    Optional ByVal sDefaultDir As String = "", _
    Optional sOperation As String = "open", _
    Optional Owner As Long = 0 _
 ) As Boolean
 Dim lR As Long
 Dim lErr As Long, sErr As Long
If (InStr(UCase$(sFIle), ".EXE") <> 0) Then
    eShowCmd = 0
End If
On Error Resume Next
If (sParameters = "") And (sDefaultDir = "") Then
    lR = ShellExecuteForExplore(Owner, sOperation, sFIle, 0, 0, essSW_SHOWNORMAL)
Else
    lR = ShellExecute(Owner, sOperation, sFIle, sParameters, sDefaultDir, eShowCmd)
End If
If (lR < 0) Or (lR > 32) Then
    ShellEx = True
Else
    ' raise an appropriate error: *ERROR CODES GO HERE*
           End If

  End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T06:17:50.940

看起来您`C:\`在 PicStorage 字符串之前的 ShellEx 命令中丢失了？

# r - 在自己的包中对 ggplot 的参数

> ID：13825840
> 
> 赞同：0
> 
> 时间：2012-12-11T17:57:32.857
> 
> 标签：r, ggplot2

这些行在 R 脚本中的函数中工作正常：

```
hline_DL <- 22
p <- p + geom_hline(aes(yintercept=hline_DL), color="red", linetype=2) 
```

但是当我创建一个内部具有相同功能的包时（复制粘贴！），运行该功能时出现此错误：

```
"Error in eval(expr, envir, enclos) : object 'hline_DL' not found" 
```

如果我去掉上面的行，那么函数的其余部分在包中运行良好（绘制我想要的，但在 处没有水平虚线`y=22`）。

为什么它作为独立功能而不是在包中工作？我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T18:29:58.670

显然，我的建议奏效了。即放在 ,`yintercept = hline_DL`之外`aes()`，避免出现不规范的评价。

一般来说，设置为单个值的美学`aes()`无论如何都不应该设置在里面。

# symfony - 具有重复关系的多对多（表中的第三个键）

> ID：13825845
> 
> 赞同：0
> 
> 时间：2012-12-11T17:57:50.407
> 
> 标签：symfony, doctrine

在 Doctrine2 中可以使用第三个键管理多对多关系以添加多个相同的关系吗？

我有一个“用户”表和另一个“计划”表，我做了正常的多对多关系，产生带有两个主键（user_id 和 plan_id）的 user_plan 表，但我需要在我的应用程序中添加相同的计划用户不止一次。例如：user_plan(generated_id, user_id, plan_id)

我当前的用户 yml 定义：

```
Entity\FosUser:
type: entity
table: fos_user
fields:
    id:
        id: true
        type: integer
        unsigned: false
        nullable: false
        generator:
            strategy: IDENTITY
manyToMany:
    plans:
        targetEntity: Plan
        inversedBy: users
        joinTable:
            name: user_plan
            joinColumns:
                plan_id:
                    referencedColumnName: id
            inverseJoinColumns:
                user_id:
                    referencedColumnName: id

lifecycleCallbacks:
  prePersist: [ setUserValue ]
  preUpdate: [] 
```

我目前的计划 yml 定义：

```
Entity\Plan:
type: entity
table: plan
fields:
    id:
        id: true
        type: integer
        unsigned: false
        nullable: false
        generator:
            strategy: IDENTITY
    planName:
        type: string
        length: 50
        fixed: false
        nullable: false
        column: plan_name
manyToMany:
    users:
        targetEntity: FosUser
        mappedBy: plans
LifecycleCallbacks:
  prePersist: [ setCreatedAtValue ]
  preUpdate: [ setUpdatedAtValue ] 
```

有人知道symfony2是否可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:26:19.957

我不知道第三把钥匙，但我看到了另一种解决方案。您可以添加另一个模型 PlantBed。用户 has_many PlantBeds（PlantBed has_one 用户）。PlantBed has_one Plant (Plant has_many PlantBeds) 和数量OfPlantsInBed。

# javascript - $scope 不与 AngularJS 中控制器的其他部分一起过滤

> ID：13825848
> 
> 赞同：0
> 
> 时间：2012-12-11T17:58:09.477
> 
> 标签：javascript, angularjs

我有一个控制器，它几乎是 AngularJS 演示的精确副本。我想添加一个函数来从项目中的数组中获取一些项目。

我遇到的问题是结果没有与控制器的主要部分一起过滤。

这是控制器的原始部分。

```
function EmployerListCtrl($scope, Employer) {
    $scope.employers = Employer.query();
    $scope.orderProp = 'age';
    $scope.getEmployerCount = function () {
        return $scope.employers.length;
    }; 
```

我添加了这个功能。

```
$scope.getSkillsList = function () {
    var employerArray = this.employers;
    var skillsArray = new Array();
    for (var i = 0; i < employerArray.length; i++) {
        if (employerArray[i].software != undefined || employerArray[i].software != null) {
            for (var j = 0; j < employerArray[i].software.length; j++) {
                skillsArray.push(employerArray[i].software[j]);
            }
        }
    }
    return skillsArray;
}; 
```

我还尝试使用与控制器的主要部分相同的 $scope，但是它也只显示了初始结果。

```
$scope.getSkillsList2 = function () {
    var employerArray = $scope.employers;
    var skillsArray = new Array();
    for (var i = 0; i < employerArray.length; i++) {
        if (employerArray[i].software != undefined || employerArray[i].software != null) {
            for (var j = 0; j < employerArray[i].software.length; j++) {
                skillsArray.push(employerArray[i].software[j]);
            }
        }
    }
    return skillsArray;
}; 
```

这是 HTML 页面的内容。ng-model="query" 是我用来过滤 ng-repeat 的。

```
<div class="container-fluid">
    <p>Set One: {{getSkillsList()}}</p>
    <p>Set Two: {{getSkillsList2()}}</p>
    <div class="row-fluid">
        <div class="span2">
            <!--Sidebar content-->
            Search: <input ng-model="query">
            Sort by:
            <select ng-model="orderProp">
                <option value="name">Alphabetical</option>
                <option value="age">Newest</option>
            </select>
            <p>Number of employers in list: {{getEmployerCount()}}</p>
        </div>
        <div class="span10">
            <!--Body content-->
            <ul class="employers">
                <li ng-repeat="employer in employers | filter:query | orderBy:orderProp" class="thumbnail">
                    <a href="#/employers/{{employer.id}}" class="thumb"><img ng-src="{{employer.imageUrl}}"></a>
                    <a href="#/employers/{{employer.id}}">{{employer.name}}</a>
                    <p>{{employer.snippet}}</p>
                </li>
            </ul>
        </div>
    </div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T23:11:20.463

我认为您希望 SkillArray 基于 ng-repeat 过滤器自动缩小或增长。那是行不通的。在这一行：

```
<li ng-repeat="employer in employers | filter:query | orderBy:orderProp" ...> 
```

过滤器的结果不会被父作用域看到，而只能被 ng-repeat 作用域看到。换句话说，过滤器不会改变 $scope.employers，因此您的技能函数将继续在从服务器接收到的完整雇主数组上运行。

完成您想要的一种方法是定义自己的过滤器函数，然后将其与查询过滤器一链接：

```
angular.module('myApp', []).
filter('skills', function() {
   return function(filteredEmployers) {
      var skillsArray = [];
      ... do your filtering here ...
      return skillsArray;
   }
}); 
```

然后在您的 HTML 中：

```
<li ng-repeat="skills in employers | filter:query | skills">
   {{skill}}
</li> 
```

另请参阅[创建 Angular 过滤器](http://docs.angularjs.org/guide/dev_guide.templates.filters.creating_filters)。

# android - 如何使用“选项卡”将（已弃用）TabActivity 写入片段？

> ID：13825849
> 
> 赞同：2
> 
> 时间：2012-12-11T17:58:22.747
> 
> 标签：android, android-fragments, android-tabactivity

所以我有一个运行在一个 Android 应用程序中的应用程序，它`TabActivity`通过它的选项卡分隔 6 个不同的活动。自`TabActivity`HoneyComb 以来已弃用，并且据我所知，我必须使用片段。

如果我想使用`action bar`with `tabs`，我是否必须将所有 6Activities 转换为片段，对吗？我应该从哪里开始将所有活动重写为片段？

# json - 雅虎邮件 JSON API 无效 JSON

> ID：13825855
> 
> 赞同：1
> 
> 时间：2012-12-11T17:58:47.830
> 
> 标签：json, api, yahoo, scribe

我正在尝试使用 Java Scribe Library 与 Yahoo Web Service 集成。我能够完成 OAuth 集成。

现在我正在尝试使用此处的示例请求调用 ListMessages JSON API [http://developer.yahoo.com/mail/docs/user_guide/JSON-RPCEndpoint.html#](http://developer.yahoo.com/mail/docs/user_guide/JSON-RPCEndpoint.html#)

我的代码如下所示：

```
Token requestToken = buildTokenFromDB();
OAuthService service = new ServiceBuilder().provider(YahooApi.class).apiKey(API_KEY).apiSecret(API_SECRET).build();
 OAuthRequest request = new OAuthRequest(Verb.GET,
                "http://mail.yahooapis.com/ws/mail/v1.1/jsonrpc");
String str = getFilesAsString("msg.json");
request.addPayload(str);            
request.addHeader("Content-Type", "application/json");
request.addHeader("Accept", "application/json");            
service.signRequest(accessToken, request);
Response response = request.send(); 
```

我收到以下错误：

{"result":null,"error":{"code":"Client.InvalidRequest","message":"Invalid Json.","detail":null}}

看起来我只能使用 GET，但我不确定是否需要为有效负载使用一些参数或 scribe 自动执行。谢谢。格思

# java - neo4j - 独立服务器还是嵌入式服务器？

> ID：13825859
> 
> 赞同：1
> 
> 时间：2012-12-11T17:59:04.103
> 
> 标签：java, neo4j, graph-theory

我目前有一个每天更新 neo4j 数据库的 Java 应用程序。

然后我有另一个应用程序，它通过创建具有相同存储路径的嵌入式数据库来使用遍历查询数据库。

每次查询 java 应用程序运行时，我应该如何保持服务器运行并将查询定向到已经运行的实例？我不确定如何在不每次都创建嵌入式服务器实例的情况下做到这一点。

我可以保留我目前的方法，问题是每次用户发出查询请求时它都必须加载数据库，这很昂贵。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T21:06:19.883

您可以在嵌入式数据库之上运行服务器：http: [//docs.neo4j.org/chunked/milestone/server-embedded.html](http://docs.neo4j.org/chunked/milestone/server-embedded.html)

因此，您可以保持嵌入式应用程序运行并使用计时器任务导入数据，同时提供服务器的 web-ui。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:19:06.113

它不仅昂贵，而且如果我正确理解了您的应用程序概念，您可能会遇到锁存储错误。

如果您的更新应用程序正在数据库中执行某些操作，因此有一个嵌入式数据库实例正在运行，同时您的其他应用程序正试图创建一个嵌入式数据库的实例来执行查询，您会遇到锁店。

我不知道您是否采取了任何预防措施来防止这种情况发生，或者到目前为止您是否幸运地没有同时发生这些动作，但我会调查一下。

# amazon-ec2 - 我真的需要 RPC 和 NETBIOS 来在本地服务器和 Amazon EC2 之间使用事务性 NServiceBus 队列吗？

> ID：13825861
> 
> 赞同：2
> 
> 时间：2012-12-11T17:59:09.477
> 
> 标签：amazon-ec2, msmq, nservicebus, msdtc, netbios

我们一直在尝试 - 没有成功 - 在 Amazon EC2 中让本地服务器和我们的云服务器之间的事务消息队列工作。

我们正在使用 NServiceBus，并且已经在本地和 EC2 之间运行了 pub/sub 示例和各种其他琐碎的应用程序，但是尝试启动我们实际应用程序的组件被证明是……无理取闹。

据我所知，为了允许本地服务器（DYLAN-PC）通过 Amazon EC2 实例上的队列以事务方式发送消息，我需要：

1.  在两端启用 NETBIOS 名称解析（例如，通过 /etc/lmhosts 文件）
2.  允许从任一端启动 RPC 连接（因此为 RPC 开放端口 135 以及其他各种端口）
3.  在两个系统上配置 MSTDC，启用远程连接和入站/出站连接

我错过了什么吗？特别是，在所有东西（包括 Active Directory！）都在 DNS 上运行的时代允许 NetBIOS 的要求似乎特别过时。我们是否在做一些愚蠢的事情，试图在这样的站点之间使用 MSMQ？这是我们尝试这种分布式架构的第一个大项目，部署/配置开始受到很大伤害感激不尽！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T08:09:34.050

如果您希望构建一个地理分布式系统，而您无法在这些站点之间安排 VPN，您应该使用 NServiceBus 的网关功能在这些站点之间通过替代传输（如 HTTP）进行通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:36:37.333

从远程队列读取需要 RPC。如果您推送到远程队列并从本地队列中提取，您将不会使用 RPC。

# objective-c - NSTextField 奇怪的左边距

> ID：13825867
> 
> 赞同：0
> 
> 时间：2012-12-11T17:59:54.663
> 
> 标签：objective-c, cocoa, margin, nstextfield

我整天都在寻找解决方案。

我有 4 个 NSTextFields（实际上是一些自定义操作的子类），它们都共享相同的 X 位置。

问题是，有些有不同的风格（浅色、常规、粗体）并且可能有不同的尺寸。

发生的情况是，即使 X 原点相同，第一个字母总是有一点（始终不同）左边距。

请看图片：[https ://dl.dropbox.com/u/1977230/Screen%20Shot%202012-12-11%20at%2017.55.58.png](https://dl.dropbox.com/u/1977230/Screen%20Shot%202012-12-11%20at%2017.55.58.png)

我想确保所有行都从同一点开始，比如从左边开始 100px。

知道如何覆盖那个奇怪的填充吗？

干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T08:38:55.523

您所说的边距我很确定是`lineFragmentPadding`.`NSTextContainer``NSTextField`

请参阅 NSTextContainer 参考：

[http://developer.apple.com/library/Mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSTextContainer_Class/Reference/Reference.html](http://developer.apple.com/library/Mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSTextContainer_Class/Reference/Reference.html)

这是文本布局教程中的一个页面：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/TextLayout/Concepts/CalcTextLayout.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/TextLayout/Concepts/CalcTextLayout.html)

在那篇文章中指出：

> 排版机在将文本实际放入矩形时进行最后一次调整。这种调整是由 NSTextContainer 对象固定的一个小量，称为线片段填充，它定义了线片段矩形每一端留空的部分。文本以该数量插入线片段矩形内（矩形本身不受影响）。填充允许在边缘和任何孔周围对文本容器的区域进行小规模调整，并防止文本直接邻接该区域附近显示的任何其他图形。您可以使用 setLineFragmentPadding: 方法从默认值更改填充。请注意，行片段填充不是表示边距的合适方法；

不幸的是，它看起来像`NSTextField`'s`NSTextContainer`并且`NSLayoutManager`是私有且不可访问的，但似乎它们可以在 中访问`NSTextView`：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSTextView_Class/Reference/Reference.html#//apple_ref/occ/cl/NSTextView](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSTextView_Class/Reference/Reference.html#//apple_ref/occ/cl/NSTextView)

因此，如果您想对此类功能进行细微控制，那么这可能是您需要子类化的类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T18:59:31.677

你看过CoreText吗？我认为它可能会提供设施来做你正在寻找的东西。从文档...

> Core Text 布局引擎专门设计用于使简单的文本布局操作易于执行并避免副作用。

您可以访问“字体指标”，这使您能够（从文档中）...

> 对于每种字体，字形设计者都会提供一组测量值，称为度量，用于描述字体中每个字形周围的间距。排版机使用这些指标来确定字形位置。字体度量是诸如上升、下降、前导、大写高度、x 高度等参数。

编辑：这可能`NSTextField`不是为您想要做的事情而设计的。`NSTextField`除了`NSLayoutManager`. 您可能需要升级到`NSTextView`始终具有专用`NSLayoutManager`附件的 . Apple 有一些示例项目，您可以使用`NSLayoutManager`和搜索`NSTextView`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T16:32:41.403

如果您使用 NSTextField 来绘制简单的静态文本，请查看[AppKit 对 NSString 的添加](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSString_AppKitAdditions/Reference/Reference.html.)。用于`sizeWithAttributes:`获取“文本”图像的大小。然后使用大小来计算绘制的矩形。最后使用其中一种`draw`方法来实际绘制文本。不要忘记“四舍五入”的结果`sizeWithAttributes`！它不是像素对齐的。

但是，如果您需要绘制比简单标签更复杂的东西，请使用 Core Text。[您可以在twui 源代码](https://github.com/twitter/twui/blob/master/lib/UIKit/TUITextRenderer.m)中找到如何使用它的非常好的示例。

# php - 无法通过PHP连接MYSQL，但通过phpMyAdmin工作

> ID：13825873
> 
> 赞同：0
> 
> 时间：2012-12-11T18:00:27.173
> 
> 标签：php, mysql, phpmyadmin, connect

通过我的 php 脚本，脚本完全没问题：

```
<?
function conecta() // Esta função faz a conexão com o banco de dados MySQL
    {

$dbhostname = "localhost"; // Hostname of our MySQL server
$dbase = "marketing"; //Logical database name on that server
$dbuser = "root"; // User for login
$dbpass = ""; // Password for login

mysql_connect($dbhostname, $dbuser, $dbpass) or die("Não foi possível conectar à base de dados");
mysql_select_db($dbase) or die("Não foi possível selecionar a base de dados");
    }
?> 
```

但是通过 phpMyAdmin 我使用相同的数据，并且可以漂亮地登录。

PS：我刚刚安装了我的zend主机。但似乎真的很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:16:11.160

```
 <?
    function conecta() // Esta função faz a conexão com o banco de dados MySQL
        {

    $dbhostname = "localhost"; // Hostname of our MySQL server
    $dbase = "marketing"; //Logical database name on that server
    $dbuser = "root"; // User for login
    $dbpass = ""; // Password for login

    $res = mysql_connect($dbhostname, $dbuser, $dbpass) or die("Não foi possível conectar à base de dados" . mysql_error());
    mysql_select_db($dbase) or die("Não foi possível selecionar a base de dados" . mysql_error());

     return $res;    
    }

    $conn = conecta();

    if($conn):
     echo "connection established";
    else:
     echo "Connection failed";
    endif;

    ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:09:49.933

试试这样：

```
 <?php #Please use full open tag!
      function conecta() // Esta função faz a conexão com o banco de dados MySQL
                       {

      $dbhostname = 'localhost'; // Hostname of our MySQL server
      $dbase = 'marketing'; //Logical database name on that server
      $dbuser = 'root'; // User for login
      $dbpass = ''; // Password for login

      mysql_connect($dbhostname, $dbuser, $dbpass) or die('Não foi possível conectar à base de dados'.mysql_error());
      mysql_select_db($dbase) or die('Não foi possível selecionar a base de dados'.mysql_error());
      }
      ?> 
```

并让我们知道当您致电`conecta()`

# android - 文本视图内的滚动视图（速率片段）

> ID：13825876
> 
> 赞同：0
> 
> 时间：2012-12-11T18:00:34.087
> 
> 标签：android

我发现剪断了自己的应用程序：[http ://www.androidsnippets.com/prompt-engaged-users-to-rate-your-app-in-the-android-market-appirater](http://www.androidsnippets.com/prompt-engaged-users-to-rate-your-app-in-the-android-market-appirater)

个性化此代码我无法在由剪切创建的文本视图中插入滚动视图（没有 xml，但使用 java 代码）：

```
 LinearLayout ll = new LinearLayout(mContext);
    ll.setOrientation(LinearLayout.VERTICAL);

    TextView tv = new TextView(mContext);
    tv.setText("If you enjoy using " + APP_TITLE + ", please take a moment to rate it. Thanks for your support!");
    tv.setWidth(240);
    tv.setPadding(4, 0, 4, 10);
    ll.addView(tv); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:17:19.713

您可以将 TextView 包装在另一个布局中（就像您所做的那样），然后将所有内容包装在 ScrollView 中。为此：

```
ScrollView sc = new ScrollView(mContext);
sc.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
sc.setFillViewport(true);

sc.addView(ll); 
```

# c# - 在用户按下 Enter/Return 键时调用服务器端操作

> ID：13825878
> 
> 赞同：0
> 
> 时间：2012-12-11T18:00:48.437
> 
> 标签：c#, javascript, jquery, asp.net-mvc, asp.net-mvc-4

**更新**

既然我这么快就得到了你对这个问题非常有帮助的答案，我已经重新考虑了这个问题。我想我需要把它分解成两个小要求，所以我正在更新这个问题。

在我的 ASP.NET MVC 4 应用程序中，当用户在焦点位于特定文本框中时按下键盘上的 enter 键时，我需要它：

*场景 1：必须调用适当的服务器端操作。如果用户在光标位于不同文本框中时按下回车键，则必须调用另一个操作。*

*场景 2：如果用户在焦点位于当前页面上任一表单的**任何**文本框时按下键盘上的 Enter 键，则必须将表单连同所有表单数据 (HttpPost) 一起回发到控制器上的操作在 that 的 action 属性中指定`<form>`。*

我如何完成这两个场景？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T18:02:48.860

```
$('#idOfTextbox').keypress(function(e) {
    if(e.which == 13) {
        $.ajax({
        //.. Your values go here...
        });
    }
}); 
```

如果要截取提交的表单，可以使用[ajaxForm 插件](http://jquery.malsup.com/form/)。这样，您可以在页面上拥有多个表单，并且在提交表单时，它将对表单的 action 属性中指定的 action 方法进行 AJAX 调用。然后，您将能够处理 ajax 调用的“成功”回调中的响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T18:02:29.760

您可以使用 javascript 或简单地将每个输入放在一个不同的输入中，其中`<form>`包含一个按钮 type="submit"。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T18:02:40.180

```
element.onkeydown = function(event) {
    //do something on keydown (enter is keyCode === 13)
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T18:23:05.717

你可以这样做：

```
$('#idOfTextbox').keypress(function(e) {
    if(e.which == 13) {
       $.ajax({

       url: './savedata',//Your method name, that is to be called
       type: 'POST',
       contentType: 'application/json',//Type of data you want to post
       data: JSON.stringify({ obj: sampleobject }),//object of post-object i.e. data being posted
       success: function(result) {
       //Logic to handle success
        }  
       error: function(){}//Handle error here  
     }
}); 
```

我已经给出了一个示例来调用一个方法，该方法位于您当前正在使用其视图的同一控制器上。

# java - 获取 jUnit:s @BeforeClass 的过去静态字段

> ID：13825881
> 
> 赞同：0
> 
> 时间：2012-12-11T18:00:52.577
> 
> 标签：java, static, junit, load-order

有没有办法解决经典问题

```
public class SomeClass implements SomeOtherInterface {

  private static SomeInterface some;

  public SomeClass(SomeInterface someInterface) {
    some = someInterface;
  }

  @BeforeClass
  public static void doSomethingWithInterface() {
    System.out.println(someInterface.someValue()); // prints null
  }
} 
```

除了交换

```
System.out.println(someInterface.someValue()); // prints null 
```

和

```
System.out.println(SomeInterface.someValue()); 
```

如果 someValue 是静态的。问题是这是针对框架（扩展）的，并且 SomeInterface 的实现将由用户提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:10:33.267

您`static`只需在构造函数中设置成员的值。因此，在没有该类的至少一个对象之前，您将无法访问`someValue()`. 在 Junit 中，`@Before`注释可能很有用，它在每次测试之前执行而不是`static`.

# mysql - 在 Windows 7 中安装 RMySQL：“RMySQL 是使用 MySQL 5.5.28 编译的，但加载的是 MySQL 6.0.0”

> ID：13825883
> 
> 赞同：2
> 
> 时间：2012-12-11T18:01:05.777
> 
> 标签：mysql, r, windows-7, installation, rmysql

[我正在尝试按照http://biostat.mc.vanderbilt.edu/wiki/Main/RMySQL](http://biostat.mc.vanderbilt.edu/wiki/Main/RMySQL)上的说明在 Windows 7（64 位）上安装 RMySQL 。我正在使用 R 2.15.1、RTools 2.15，以及最新的 MySQL 5.5.28 和 Connector C 6.0.2 的完整安装，并完成了复制 lib 和 dll 文件的额外步骤。当我运行 install.packages('RMySQL',type='source') 时，它会构建但带有警告：

```
 RMySQL was compiled with MySQL 5.5.28 but loading MySQL 6.0.0 instead!
   This may cause problems with your database connections.

   Please install MySQL 5.5.28.

   If you have already done so, you may need to set your environment
   variable MYSQL_HOME to the proper install directory. 
```

这让我很困惑，因为我相信我正在使用基于 MySQL 安装程序（我也重新运行以检查更新）的一致且最新的 MySQL 安装。我的 MYSQL_HOME 变量设置为“C:/PROGRA~1/MySQL/MYSQLS~1.5/”，所以看起来也是正确的。

我不确定警告中的 6.0.0 版本号来自哪里。根据搜索，这似乎是旧的 32 位版本的 MySQL。

有人能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:02:22.450

RMySQL 似乎**不是**用您正在使用的最新版本的 MySQL 编译的。如错误消息所述：安装与 RMySQL 兼容的 MySQL 版本。

# python - 如何批量获取/放置雅虎联系人

> ID：13825884
> 
> 赞同：2
> 
> 时间：2012-12-11T18:01:14.753
> 
> 标签：python, api, contacts, yahoo, bulk

[我正在使用Yahoo REST API](http://developer.yahoo.com/social/rest_api_guide/contacts-resource.html#contacts-json_syntax_put)和 Python逐一添加联系人。联系人集可能相对较大（大约 500 个），但是 API 没有提供任何方法可以在一个请求中添加我的联系人的较大部分（例如一次 100 个项目）。也许有人知道一次添加多个联系人的其他方法？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:24:38.673

查看问题中链接[的页面](http://developer.yahoo.com/social/rest_api_guide/contacts-resource.html#contacts-json_syntax_put)，请求 URL 有一个计数参数。你试过这个吗？

# java - 在java中正确使用actionListener

> ID：13825888
> 
> 赞同：1
> 
> 时间：2012-12-11T18:01:35.070
> 
> 标签：java, user-interface

我是 Java 新手，我试图用几个按钮和下拉菜单构建一个简单的 GUI。我设法获得了一个工作 GUI，但真正的问题是关于正确使用 actionListener 方法。为了给一个按钮分配一个动作，我在自己的类中插入了每个 actionListener，代码如下：

```
public class GUI implements something
{
    public static ClientGUI App;
    private JFrame chatWin;
    private JMenuBar menubar;
    private JMenu x;
    private JMenu y;
    private JMenuItem exit;
    private JMenuItem about;

    public GUI()
    {

               /* 
                * some code and parameters
                */

            //creating the menu bar
            JMenuBar menubar = new JMenuBar();
            chatWin.setJMenuBar(menubar);

            JMenu x= new JMenu("menu1");
            menubar.add(x);
            JMenuItem exit = new JMenuItem("menu2");
            x.add(exit);

            JMenu y= new JMenu("Help");
            menubar.add(help);
            JMenuItem about = new JMenuItem("inner menu1");
            y.add(about);

            //action listener for the exit button 
            class exitaction implements ActionListener
            {
                public void actionPerformed(ActionEvent e)
                {
                    System.exit(0);
                }
            }
            exit.addActionListener(new exitaction());

            //action listener for the about button
            class aboutaction implements ActionListener
            {
                public void actionPerformed(ActionEvent e)
                {
                    //some code
                }

            }
        }

    public static void main (String args[])
    {
        EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                App = new GUI();
            }
        });
    }

} 
```

该代码是否被认为是整洁和正确的？有什么我可以改进或需要改变的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T18:24:39.040

我遵守规则：

如果动作实现很棒，我会放入一个内部类。

```
 public MyFrame extends JFrame {

       // componentes creating, etc

        private static class MyShortAction implements ActionListener {

            @Override
            public void actionPerformed(ActionEvent e){
                // some big implementation
            }

        }

    } 
```

简短时，我参加了一个匿名课程。

```
myButton.addActionListener(new ActionListener() {

    @Override
    public void actionPerformed(ActionEvent e){
        // some small code
    }

}); 
```

如果它被其他组件使用，我会提取到顶级类。

```
public class MyAction implements ActionListener {

    @Override
    public void actionPerformed(ActionEvent e){
        // some small code
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:05:42.813

它会起作用，但你可以在一个单独的类甚至主类中实现它，而不是为每个按钮创建一个嵌套类......

```
public class GUI implements something,ActionListener
{
    //...
    public GUI()
    {
        //...
        exit.setActionListener(this);
        about.setActionListener(this);
        //...
    }
    public void actionPerformed(ActionEvent e)
    {
        Object source = e.getSource();
        if(source == exit)
        {
            System.exit(0);
        } else if(source == about)
        {
            //action
        }
    }
} 
```

您还可以为项目设置操作命令并比较字符串而不是对象。

```
public class GUI implements something,ActionListener
{
    //...
    public GUI()
    {
        //...
        exit.setActionCommand("exit");
        exit.addActionListener(this);

        about.setActionCommand("about");
        about.addActionListener(this);
        //...
    }
    public void actionPerformed(ActionEvent e)
    {
        String action = e.getActionCommand();
        if("exit".equals(action))
        {
            System.exit(0);
        } else if("about".equals(action))
        {
            //action
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T18:09:39.407

将动作侦听器添加到按钮的简单直接方法：

```
//Create the button
JButton button_save = new JButton("Save");
add(button_save);

// Create the listener
button_save.addActionListener(new ActionListener() {
  public void actionPerformed(ActionEvent arg0) {
    //do your stuff when button clicked
    //ex: disable the button
    button_save.setEnabled(false);
  }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T20:22:35.887

恕我直言，您的代码已经正确（我的意思是它正在工作，不是吗）。其余的主要是品味问题（以及代码的可用性）。例如，您可能希望稍后重用您的代码，或者向您的程序中添加您尚未考虑的功能和其他按钮。因此，请尝试以下经验法则：

*   **避免内部类**——你永远不知道何时要在其他地方实例化该类的对象。因此，为每个类使用一个文件（顺便说一下，类应该以大写字母开头）
*   将ActionListener的**每个实现****放在它自己的类**中。我知道这会破坏您的项目，但您的所有代码都会被清楚地安排，您甚至可以重用这些功能。例如您的退出按钮。也许您决定在程序的其他地方设置第二个退出按钮，然后您可以为这两个按钮提供相同的 ActionListener，从而获得相同的功能。

对于编译器来说，它不会有任何区别，但是对于你来说，当你的项目开始增长并且变得越来越复杂时。

# java - 使用 SQL 和 Java 上传图像

> ID：13825893
> 
> 赞同：0
> 
> 时间：2012-12-11T18:02:05.010
> 
> 标签：java, sql, oracle, dao

我坚持尝试使用我的 Java 代码上传图像。我正在使用数据访问对象并拥有 ojdbc5 和 ordim 库。我遇到的主要问题是尝试使用以下代码行插入图像： stmtInsert.setImage(8, ORDSYS.ORDImage.init());

我多年来一直被困在这一点上。

```
public void createImageInfo(           
                                     final String user_ID,
                                     final int photo_ID,
                                     final int num_views,
                                     final double price,
                                     final String photo_Name,
                                     final String imageCategory,
                                     final Calendar dateUploaded,
                                     final ORDSYS.ORDImage.init(image))
{

    PhotoSysDAO result = null;
    PreparedStatement stmtInsert = null;

    Connection conn = null;
    try
    {
    conn = DriverManager.getConnection(
                    "jdbc:oracle:thin:@oracle server",
                    "username", "password"); 
                    //open a connection to db...needs your account and password

        //int ratingID = RatingsDAO.getUniqueRatingId(conn);

        StringBuilder sbInsert = new StringBuilder();

        sbInsert.append("INSERT INTO ");
        sbInsert.append("Photos");
        sbInsert.append(" VALUES (");

        sbInsert.append("SequenceSet.seq_photo_id.nextval, ?, ?, ?, ?, ?, ?, ?, ?)");
                    Calendar date =  Calendar.getInstance();

                    stmtInsert.setInt(1, photo_ID);
        stmtInsert.setString(2, user_ID);
        stmtInsert.setInt(3, num_views);
                    stmtInsert.setDouble(4, price);
                    stmtInsert.setString(5, photo_Name);
                    stmtInsert.setString(6, imageCategory);
                    stmtInsert.setString(7, new SimpleDateFormat("dd/MMM/yyyy").format(date));
                    //stmtInsert.setImage(8, photo.ORDSYS.ORDIMGB);
                    stmtInsert.setImage(8, ORDSYS.ORDImage.init()); 
        int rows = stmtInsert.executeUpdate();

        if (rows != 1)
        {
            throw new SQLException("executeUpdate return value: " + rows);
        }

    }
    catch (SQLException ex)
    {   
        System.out.println("There was an error in connecting to the database");
    }
    finally
    {
        PhotoSysDAO.closeStatement(stmtInsert);
        PhotoSysDAO.closeJDBCConnection(conn);
    }
    //return result;
} 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-11T18:07:37.613

我对你的建议，不要将图像存储在数据库中，你会损害你的数据库存储和性能。将您的照片存储在文件夹位置并将路径存储在数据库中。

# html - Nokogiri 如何将 HTML 格式的字符串解析为 DOM

> ID：13825895
> 
> 赞同：1
> 
> 时间：2012-12-11T18:02:09.883
> 
> 标签：html, ruby, html-parsing, nokogiri

我一直在研究 Nokogiri 源代码，但不知道 Nokogiri 如何将字符串解析为 Elements。源代码可以在这里找到：

[https://github.com/sparklemotion/nokogiri/tree/master/lib/nokogiri](https://github.com/sparklemotion/nokogiri/tree/master/lib/nokogiri)

例如：我有一个字符串：

```
raw = "<html> <body> body <div>this is div </div> </body> <html>"

Nokogiri::HTML(raw)
=> 
#(Document:0x4d0c786 {
  name = "document",
  children = [
    #(DTD:0x4d0bc6e { name = "html" }),
    #(Element:0x4cfa46e {
      name = "html",
      children = [
        #(Element:0x4cf9bfe {
          name = "body",
          children = [
            #(Text "body"),
            #(Element:0x4cf9348 {
              name = "div",
              children = [ #(Text "this is div")]
              })]
          })]
      })]
  }) 
```

我调查了一下`nokogiri / lib / nokogiri / xml / sax`，我看不到它是如何解释 html 字符串的。当我尝试阅读源代码时，我意识到在上面的输出中，有数据类型`Element`，但我在源代码中没有看到声明`class Element`.

一般来说，谁能帮我解释一下 Nokogiri 如何将字符串解析为上面的数据结构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:19:13.363

如前所述，Nokogiri 使用 libxml2 来处理实际的解析。这是使用本机（阅读：用 C 编码）Ruby 扩展来完成的。Ruby 有一个用于构建原生扩展的[有据可查的标准接口。](http://www.ruby-doc.org/docs/ProgrammingRuby/html/ext_ruby.html)[这是一个很好的指南](http://blog.jcoglan.com/2012/07/29/your-first-ruby-native-extension-c/)。

# barcode - 没有人类可读文本的 FPDF 条码

> ID：13825898
> 
> 赞同：1
> 
> 时间：2012-12-11T18:02:18.020
> 
> 标签：barcode, fpdf, code39

使用 FPDF 和 FPDI 库，是否可以在没有人类可读文本的情况下打印条形码？我正在使用 Code39 库，但我找不到任何地方来禁用文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-23T18:50:26.917

如果将颜色设置为背景颜色，则不会显示文本。这是我找到的唯一解决方案。$pdf->SetTextColor(255, 255, 255);//白色文字

# c# - 为什么 IQueryable Select 对 DTO 有无效参数但对对象有效？

> ID：13825913
> 
> 赞同：1
> 
> 时间：2012-12-11T18:03:12.597
> 
> 标签：c#, linq

我有一个特定的 LINQ 查询，它按匿名类型进行分组，然后通过投影选择对象。选择对象时，查询工作正常。我现在正在尝试更改查询的用法以进入包含投影到对象的所有属性的 DTO，但是当我将类型从 Object 切换到 DTO 时，查询开始给我一个错误，即IQueryable.Select 具有无效参数。

```
IQueryable<type> result = from o in blah where some_conditions
                          orderby o.Name
                          group o by new {o.Value1, o.Value2, o.Value3} into groupedO
                          select new type 
                          {
                               Value1=groupedO.Key.value1,
                               Value2=groupedO.Key.value2,
                               Value3=groupedO.Key.value3
                          } 
```

当“类型”是我的原始对象时工作正常，但当我将其设为具有属性 Value1、Value2 和 Value3（适当类型）的 DTO 时会失败。

我意识到这可能不足以找到问题的信息，但我也接受任何关于寻找可能导致问题的方向的指示。我不知道可能有什么不同。此外，如果我删除组，查询工作正常，所以它是特定于组中的匿名类型的。

确切的错误是

> `System.Linq.IQueryable<System.Linq.IGrouping<AnonymousType#1,someDalClass>>' does not contain a definition for 'Select' and the best extension method overload 'System.Linq.Enumerable.Select<TSource,TResult>(System.Collections.Generic.IEnumerable<TSource>, System.Func<TSource,TResult>)' has some invalid arguments.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:32:30.130

当您使用 GroupBy 时，结果是 IGroupable。所以你应该使用这样的东西：

```
IQueryable<type> result = from o in blah where some_conditions
                          orderby o.Name
                          group o by new {o.Value1, o.Value2, o.Value3} into groupedO
                          select new type 
                          {
                               Value1=groupedO.Key.value1,
                               Value2=groupedO.Key.value2,
                               Value3=groupedO.Key.value3
                          } 
```

因为您的值 o.Value1、o.Value2、o.Value3 在 IGroupable 的键中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T18:45:01.723

为混乱道歉，但作为概念验证，以下在 LINQPad 中编译和运行。因此，使用匿名类型和分组都不是问题。

```
public class MyBlah
{
    public string Name;
    public int Value1;
    public int Value2;
    public int Value3;
}

public class MyDTO
{
    public int Value1;
    public int Value2;
    public int Value3;
}

void Main()
{
    MyBlah o1 = new MyBlah
    {
        Name = "asdf",
        Value1 = 2,
        Value2 = 3,
        Value3 = 4
    };

    MyBlah o2 = new MyBlah
    {
        Name = "fdsa",
        Value1 = 3,
        Value2 = 4,
        Value3 = 5
    };

    MyBlah o3 = new MyBlah
    {
        Name = "HI",
        Value1 = 3,
        Value2 = 4,
        Value3 = 5
    };

    List<MyBlah> lst = new List<MyBlah>();
    lst.Add(o1);
    lst.Add(o2);
    lst.Add(o3);

    IEnumerable<MyBlah> result = from o in lst
                                 orderby o.Name
                                 group o by new {o.Value1, o.Value2, o.Value3} into groupedO
                                 select new MyBlah
                                 {
                                     Value1 = groupedO.Key.Value1,
                                     Value2 = groupedO.Key.Value2,
                                     Value3 = groupedO.Key.Value3
                                 };

    IEnumerable<MyDTO> resultDTO = from o in lst
                                   orderby o.Name
                                   group o by new {o.Value1, o.Value2, o.Value3} into groupedO
                                   select new MyDTO
                                   {
                                       Value1 = groupedO.Key.Value1,
                                       Value2 = groupedO.Key.Value2,
                                       Value3 = groupedO.Key.Value3
                                   };
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T18:48:22.423

掌心时刻。问题是 DTO 在字段名称中有拼写错误并且没有编译，但是它在错误日志中丢失了。修复 DTO 中的错字使类型正确匹配，现在一切正常。谢谢。

# java - 无法移动 libgdx OrthographicCamera

> ID：13825915
> 
> 赞同：0
> 
> 时间：2012-12-11T18:03:42.170
> 
> 标签：java, android, opengl-es, libgdx

我遇到了 libGDX 中的 Camera 类的问题，即使它的位置发生变化，我也无法在视觉上移动它。

这就是我设置相机的方式：

```
camera = new OrthographicCamera(frustumWidth, frustumHeight); 
```

这就是我改变其位置的方式：

```
world.onUpdate(deltaTime, camera);
    renderer.render(world);
    camera.position.set(MathUtils.random(0, 800), MathUtils.random(0, 480), 0);
    //camera.position.set(
        //  world.dynamicObjects.get(GameWorld.MainPgID).pos.x * GameWorld.frustumToWorldRatio,
            //world.dynamicObjects.get(GameWorld.MainPgID).pos.y * GameWorld.frustumToWorldRatio, 0); 
```

我在 .render 函数的开头提交了更改：

```
camera.update();
        batcher.setProjectionMatrix(camera.combined);
        batcher.begin();
        polygonBatcher.begin(); 
```

正如我所说的那样，位置确实发生了变化，但在我尝试过的许多组合中，都没有奏效。也许我误解了相机的工作原理，我需要移动物体而不是相机？对我来说似乎很愚蠢，毕竟它被称为相机是有原因的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T19:54:02.323

您必须在希望它影响的每个批次/渲染器上应用组合投影矩阵。

但除此之外，它似乎还不错。尝试逐步调试它。设置一个只有`new OrthographicCamera(Gdx.graphics.getWidth(), Gdx.graphics.getHeight());`一些线条（ShapeRenderer）或精灵（SpriteBatch）的简单项目，将投影矩阵设置为`camera.combined`，更改`camera.position`和`update()`相机。那应该这样做。

然后，当您`camera.position`使用相机的平截头体更改所有渲染器时，应该相应地偏移而不改变精灵/几何的偏移量。

顺便提一句。视口不是 0 - 800，而是 x 和 y 分别为 -400 - 400；

# regex - 基于正则表达式的 Perl 参数切换

> ID：13825917
> 
> 赞同：0
> 
> 时间：2012-12-11T18:03:58.767
> 
> 标签：regex, perl, arguments, pcre

我有一个接受参数的 Perl 脚本。当我有单值参数时，以下代码就足够了：

```
 switch ($ARGV[0]) {

                    case "--cmd1" {
                            $action = "cmd1";
                    }

                    case "--cmd2" {
                            $action = "cmd2";
                    } 
```

现在，我有一个命令`cmd3`有一个参数的情况，如`--cmd3=SOMETHING`. 由于`SOMETHING`可以变化，简单的开关/外壳不再起作用。基本上，我需要在命令本身上做一个 switch/case。我想我可以使用一个正则表达式，第一个匹配组是命令，第二个是可选的等号。以下内容不起作用，但它说明了我正在尝试做的事情。

```
 $ARGV[0] =~ m/(.*?)(=.*){0,1}/;
                    my $cmd = $1;
                    my $equals = $2;

                    switch ($cmd) {

                    case "--cmd1" {
                            $action = "cmd1";
                    }

                    case "--cmd2" {
                            $action = "cmd2";
                    }

                    case "--cmd3" {
                            $action = "cmd3";
                            print $equals;
                    } 
```

：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：：编辑：：：：：：：：：：：：：： ::::::::::::::::::::::::::::::::::::::::

我想通了，但无论如何我都会给回答赞成票的人并接受。我不能使用 if ，因为这意味着重组一切。这是解决方案。

```
 switch ($ARGV[0]) {

                    case "--cmd1" {
                            $action = "cmd1";
                    }

                    case "--cmd2" {
                            $action = "cmd2";
                    }

                    case m/--cmd3(=.*)?/ {
                            $ARGV[0] =~ m/--cmd3(=.*)?/;
                            $action = "cmd3";
                            print $1;
                    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T18:35:07.057

你为什么不使用[Getopt::Long](http://search.cpan.org/perldoc?Getopt::Long)？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T18:10:25.427

这样的事情怎么样？

```
my $cmd = "";
my $equals = "";

if($ARGV[0] =~ m/^\-\-cmd1$/){$cmd="cmd1"}
if($ARGV[0] =~ m/^\-\-cmd2$/){$cmd="cmd2"}
if($ARGV[0] =~ m/^\-\-cmd3=(.*)$/){$cmd="cmd3";$equals=$1} 
```

# php - var_dump() is outputting string(0) "", why is this?

> ID：13825922
> 
> 赞同：2
> 
> 时间：2012-12-11T18:04:22.443
> 
> 标签：php, mysqli

Below is a php/mysqli code where it is suppose to insert the courseid and module id into the database, then perform a query to select the course details to find the course details of the inserted course and it then finally runs a final query to ensure the courseid and moduleid which was inserted is in the database.

```
<?php
    error_reporting(E_ALL);
    ini_set('display_errors', 1);
     // connect to the database
     include('connect.php');

      /* check connection */
      if (mysqli_connect_errno()) {
        printf("Connect failed: %s\n", mysqli_connect_error());
        die();
      }

    $courseid = (isset($_POST['courses'])) ? $_POST['courses'] : ''; 
    $moduleid = (isset($_POST['moduleid'])) ? $_POST['moduleid'] : '';  
    $moduleno = (isset($_POST['moduleno'])) ? $_POST['moduleno'] : '';  
    $modulename = (isset($_POST['modulename'])) ? $_POST['modulename'] : '';    

    var_dump($courseid);

    $insertsql = "
    INSERT INTO Course_Module
    (CourseId, ModuleId)
    VALUES
    (?, ?)
    ";
    if (!$insert = $mysqli->prepare($insertsql)) {
    // Handle errors with prepare operation here
    }                                           

    $insert->bind_param("ii", $courseid, $moduleid);

    $insert->execute();

    if ($insert->errno) {
    // Handle query error here
    }

    $insert->close();

    $coursequery = "
    SELECT DISTINCT CourseNo, CourseName 
    FROM Course c 
    INNER JOIN Course_Module cm 
    ON
    c.CourseId = cm.CourseId
    WHERE cm.CourseId = ?";
    // prepare query
    $coursestmt=$mysqli->prepare($coursequery);
    // You only need to call bind_param once
    $coursestmt->bind_param("i", $courseid);
    // execute query
    $coursestmt->execute(); 
    // get result and assign variables (prefix with db)
    $coursestmt->bind_result($dbCourseNo, $dbCourseName);

    $query = "SELECT CourseId, ModuleId FROM Course_Module WHERE CourseId = ? AND ModuleId = ?";
    // prepare query
    $stmt=$mysqli->prepare($query); //line 58 error
    // You only need to call bind_param once
    $stmt->bind_param("ii", $courseid, $moduleid); //line 60 error
    // execute query
    $stmt->execute(); 
    // get result and assign variables (prefix with db)
    $stmt->bind_result($dbCourseId, $dbModuleId);
    //get number of rows
    $stmt->store_result();
    $numrows = $stmt->num_rows();

    if ($numrows == 1){

    echo "<span style='color: green'>The following Module has been added into Course:" . $dbCourseNo . " - " . $dbCourseName . ":<br/>" . $moduleno . " - " . $modulename . "</span>";

    }else{

    echo "<span style='color: red'>An error has occured, Module has not been added into the Course</span>";

    }

            ?> 
```

Ok the problem I am getting with the code above is that it does not perform the insert in both CourseId and ModuleId fields. It just inserts the value 0 for both fields. My question is why is it doing this:

Below are both forms:

```
$addmodule = "
<form id='detailsForm'>

    <p><strong>Module Details</strong></p>
    <table>
    <tr>
    <th></th>
    <td><input type='hidden' id='idmodule' name='moduleid' value='' /> </td>
    </tr>
    <tr>
    <th>Module ID:</th>
    <td><input type='text' id='nomodule' name='moduleno' readonly='readonly' value='' /> </td>
    </tr>
    <tr>
    <th>Module Name:</th>
    <td><input type='text' id='namemodule' name='modulename' readonly='readonly' value='' /> </td>
    </tr>
    </table>

    </form>
";

$moduleForm = "
<form action='".htmlentities($_SERVER['PHP_SELF'])."' method='post' id='moduleForm'>
{$outputcourse}
{$hiddencourse}
<p><strong>Add Module</strong></p>
<p><strong>Module:</strong> {$moduleHTML} </p>   
</form>"; 
```

Below is the code where it uses ajax to navigate to the php code right above the UPDATE to perform the insert into database:

```
 function submitform() {    

    $.ajax({
        type: "POST",
        url: "insertmoduletocourse.php",
        data: { detailsForm: $('#detailsForm').serialize(), moduleForm : $('#moduleForm').serialize() },
        success: function(html){
            $("#targetdiv").html(html);
            $('#targetdiv').show();

        }
     });        
} 
```

When I perform `var_dump($courseid) and var_dump($moduleid)`, it outputs this: `string(0) "" string(0) ""`.

Below is the code where it displays Courses and Modules in their respective drop down menus:

```
$courseactive = 1;

    $sql = "SELECT CourseId, CourseNo, CourseName FROM Course WHERE CourseActive = ? ORDER BY CourseNo"; 

    $sqlstmt=$mysqli->prepare($sql);

    $sqlstmt->bind_param("i",$courseactive);

    $sqlstmt->execute(); 

    $sqlstmt->bind_result($dbCourseId, $dbCourseNo, $dbCourseName);

    $courses = array(); // easier if you don't use generic names for data 

    $courseHTML = "";  
    $courseHTML .= '<select name="courses" id="coursesDrop">'.PHP_EOL; 
    $courseHTML .= '<option value="">Please Select</option>'.PHP_EOL;  

    $outputcourse = ""; 
    $hiddencourse = ""; 

    while($sqlstmt->fetch()) 
    { 
    $course = $dbCourseId;
    $courseno = $dbCourseNo;
    $coursename = $dbCourseName; 
    $courseHTML .= "<option value='".$course."'>" . $courseno . " - " . $coursename . "</option>".PHP_EOL;  

    if (isset($_POST['courses']) && ($_POST['courses'] == $course)) {
    $outputcourse .= "<p><strong>Course:</strong> " . $courseno .  " - "  . $coursename . "</p>";
    $hiddencourse .= "<p><input type='hidden' id='hiddencourse' value='". $courseno . " - " . $coursename ."'></p>";
}

    } 

    $courseHTML .= '</select>';  

    $moduleInfo = array();

    //get the form data 
$coursesdrop = (isset($_POST['courses'])) ? $_POST['courses'] : ''; 
$moduleactive = 1;  

$modulequery = "
SELECT
m.ModuleId, m.ModuleNo, m.ModuleName, m.Credits
FROM
Module m
WHERE
m.ModuleId NOT IN (
SELECT cm.ModuleId
FROM Course_Module cm
WHERE cm.CourseId = ?
) AND m.ModuleActive = ?
ORDER BY m.ModuleNo
";

$moduleqrystmt=$mysqli->prepare($modulequery);
// You only need to call bind_param once
$moduleqrystmt->bind_param("ii",$coursesdrop, $moduleactive);
// get result and assign variables (prefix with db)

$moduleqrystmt->execute(); 

$moduleqrystmt->bind_result($dbModuleId,$dbModuleNo,$dbModuleName,$dbCredits);

$moduleqrystmt->store_result();

$modulenum = $moduleqrystmt->num_rows();     

$moduleHTML = '<select name="module" id="modulesDrop">'.PHP_EOL;
$moduleHTML .= '<option value="">Please Select</option>'.PHP_EOL;           

while ( $moduleqrystmt->fetch() ) {

$moduleHTML .= sprintf("<option value='%s'>%s - %s</option>", $dbModuleId, $dbModuleNo, $dbModuleName) . PHP_EOL;   

$moduleData = array();
$moduleData["ModuleId"] = $dbModuleId;
$moduleData["ModuleNo"] = $dbModuleNo;
$moduleData["ModuleName"] = $dbModuleName;
$moduleData["Credits"] = $dbCredits;

array_push($moduleInfo, $moduleData);

}

$moduleHTML .= '</select>'; 
```

**- UPDATE:**

Ajax/jquery below:

```
 function submitform() {    

        $.ajax({
            type: "POST",
            url: "insertmoduletocourse.php",
            data: { 
        courses:    $('#coursesDrop').val(),
        moduleid:   $('#idmodule').val(),
        moduleno:   $('#nomodule').val(),
        modulename: $('#namemodule').val()
    },
            success: function(html){
                $("#targetdiv").html(html);
                $('#targetdiv').show();

                var selectedOption = jQuery("#modulesDrop option:selected");
                selectedOption.appendTo($("#moduleselect"));

                    //Clear fields
                    jQuery("#idmodule").val("");
                    jQuery("#nomodule").val("");
                    jQuery("#namemodule").val("");
                    jQuery("#credits").val("");
            }
         });        
    } 
```

Below is the $courseHTML echo:

```
<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post" onsubmit="return validation();">
<table>
<tr>
<th>Course: <?php echo $courseHTML; ?></th>
</tr>
</table>
<p><input id="courseSubmit" type="submit" value="Submit Course" name="courseSubmit" /></p>
<div id="courseAlert"></div>
<div id="targetdiv"></div>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:03:52.480

In place of `var_dump($courseid);` put `print_r($_POST);` and check there
1- if you have a value for **courses** something like `[courses] => 'theCoursesValue'`
2- it is not "indented" under other array(key)

```
// this is a print_r($_POST) plus my comments
Array
(
    [courses] => theCoursesValue                // access this value by $_POST['courses']
                                                // in your case may be empty or inexistent
    [otherkey] => otherValue
    [indented] => Array
        (
            [internalKey] => internalValue
            [courses] => thisOneIsNotDirect     // access this value by $_POST['indented']['courses']
        )

) 
```

**update**
You can do this way:

```
$.ajax({
    type: "POST",
    url: "insertmoduletocourse.php",
    data: { 
        // an html field must exist for each one of this, with matching id='...blabla...'
        // may be textbox(text), textarea, hidden.
        // be sure that they were generated using "view source code" on the browser
        // again use print_r($_POST) to check
        courses:    $('#coursesDrop option:selected').val(),   // for selects
        moduleid:   $('#moduleid').val(),
        moduleno:   $('#moduleno').val(),
        modulename: $('#modulename').val()
    },
    success: function(html){
        $("#targetdiv").html(html);
        $('#targetdiv').show();
    }
 }); 
```

# audio-processing - 如何在 VSTGUI 上处理 VUMeter？

> ID：13825926
> 
> 赞同：1
> 
> 时间：2012-12-11T18:04:24.960
> 
> 标签：audio-processing, vst

我在 Xcode 4.5 上，无法在 VSTGUI 上使用简单的 VU Meter。我没有找到有关如何将值从流程循环发送到 CVuMeter 函数的文档。

我前段时间在KVR开了一个帖子： [VUMETER and GUI](http://www.kvraudio.com/forum/viewtopic.php?t=367440)

我使用的代码运行良好，构建时没有问题或错误。但是：我不能让它工作到现在。这段代码有什么问题？VU Meters 不会更新....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:09:44.700

我的猜测是您没有告诉 VSTGUI 在设置值后更新编辑器。您可能想查看VSTGUI 附带的另一个[示例代码。](http://read.pudn.com/downloads119/sourcecode/multimedia/audio/506335/vstsdk3/public.sdk/samples/vst/again/source/againeditor.cpp__.htm)vmeter 的东西在那个类的底部。

# javascript - 试图将 SVG 绘制到画布上，但它被缩短了

> ID：13825927
> 
> 赞同：3
> 
> 时间：2012-12-11T18:04:26.073
> 
> 标签：javascript, html, canvas, svg, drawing

[http://jsfiddle.net/NV6Cr/1/](http://jsfiddle.net/NV6Cr/1/)

如果单击“创建画布”，它会将页面底部的 SVG 文本绘制到画布上。唯一的问题是它只占用文本的左上角部分。知道发生了什么吗？

 `* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T18:31:14.033

更改 SVG 使其大小与画布匹配，并且它适用于我的 Firefox，例如

`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="layer" id="layer_text" width="778" height="544">``

# .net - 无会话 HTTPHandler

> ID：13825928
> 
> 赞同：1
> 
> 时间：2012-12-11T18:04:31.300
> 
> 标签：.net, session, httphandler, ashx, serial-processing

在任何地方都找不到这个。

是否可以使 HTTPHandler 无会话？

有时我会导出需要一些时间来构建的大文件。等待 ashx 完成会阻塞我其余的 webmethod 调用。

有谁知道如何使 ashx 无会话？

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:45:24.137

'ashx's 默认是无会话的。

我的问题是，当我不需要向会话写入任何内容时，我有“IRequiresSessionState”，所以我只需要“IReadOnlySessionState”，它显然只拍摄会话的快照。

# javascript - 数组更改监听器

> ID：13825929
> 
> 赞同：9
> 
> 时间：2012-12-11T18:04:34.943
> 
> 标签：javascript, arrays, listener, extending

> **可能重复：**
> [Javascript - 如何扩展 Array.prototype.push()？](https://stackoverflow.com/questions/572604/javascript-how-to-extend-array-prototype-push)

如何通知（运行预定义函数）注册数组的任何更改（或至少添加或删除元素）？我尝试使用原型。我不想因为没有提供我自己的一些代码示例而被责骂。所以这就是我想*使用*它的方式。

```
var myArray = [];
myArray.bind(function() {
    console.log('wtf'); // Wed Thu Fri and what were you thinking?
}); 
```

我不需要矫枉过正。我基本上知道我将使用的 Array 函数作用域（push、pop、splice 和其他几个）。这是一种使用主干 MVC 的方法。我想在数组上运行逻辑，然后相应地突出显示视图。但是视图已经附加到一个集合中。对该集合的任何更改都会重新呈现视图中的实际 DOM。我不想要那个。我只是想为 CSS 目的在视图中的相应 DOM 中添加或删除一个类。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-11T18:06:42.353

我所做的是我创建了自己的“数组”类型，它只是扩展了原型数组，然后我添加了自己的处理程序。

例如：

```
var MyArray = function() {
    var arr = [];
    arr.push = function() {
        console.log("PUSHING", arguments);
        return Array.prototype.push.apply(this, arguments);
    }

    return arr;
}; 
```

用法：

```
var arr = new MyArray;
arr.push(12, 3, 45);
... 
```

小提琴：http: [//jsfiddle.net/maniator/vF659/](http://jsfiddle.net/maniator/vF659/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T18:29:23.033

您正在寻找`Object.observe`，但它尚未广泛使用。在 Chrome Canary 中，在 about:flags 上启用“Experimental JavaScript”后，您可以尝试以下操作：

```
​var arr = [];

​Object.observe(arr, function(changes) {
    console.log("The array changed. Changes:", changes);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T18:17:02.433

像这样的东西将设置数组 push() 的全局监控。

```
(function() {
  var _push = Array.prototype.push;
  Array.prototype.push = function() {
    console.log("push");
    return _push.apply(this, arguments);
  }
})(); 
```

否则，正如尼尔建议的那样，您可以创建另一个类。

```
var MonitoredArray = function() {
  var rv = [];
  var _push = rv.push;
  rv.push = function() {
    console.log("push()");
    console.log(arguments);
    return _push.apply(this, arguments);
  }
  return rv;
} 
```

一次设置N 个函数调用的**基本**监控。

```
var MonitoredArray = function() {
  var rv = [];

  // the names of the functions we want to log:
  var logged_fns = ["push", "pop"];

  for (var i in logged_fns) { (function() {
    var name = logged_fns[i]
    var fn = rv[name];

    rv[name] = function() {
      console.log(name + "()");
      console.log(arguments);
      return fn.apply(rv, arguments);
    }
  })()}

  return rv;
} 
```

类似的改编也应该适用于第一个示例。

# java - 解释来自 jboss 实例的 GC 日志

> ID：13825934
> 
> 赞同：0
> 
> 时间：2012-12-11T18:04:45.590
> 
> 标签：java, jboss, garbage-collection, heap-dump

我们在生产中出现内存泄漏，我的 GC 日志如下。很明显，您可以看到这是一个问题。但是，我无法获得堆转储，因为当我们发现它有问题时为时已晚并且堆转储失败（即使使用 -F force 选项）。所以我试图找到一种方法来知道它什么时候会下降，这样我就可以进行堆转储。从这些日志中我能看到什么告诉我它几乎要崩溃了吗？谢谢！

```
Desired survivor size 134217728 bytes, new threshold 19 (max 31)

2430254K->1903326K(2490368K), 0.1973860 secs]
235738.331: [GC
Desired survivor size 134217728 bytes, new threshold 18 (max 31)
 2427614K->1901667K(2490368K), 0.1901241 secs]
235752.709: [GC
Desired survivor size 134217728 bytes, new threshold 17 (max 31)
 2425955K->1915547K(2490368K), 0.2188464 secs]
235761.054: [GC
Desired survivor size 134217728 bytes, new threshold 16 (max 31)
 2439835K->1908633K(2490368K), 0.2318097 secs]
235772.360: [GC
Desired survivor size 134217728 bytes, new threshold 15 (max 31)
 2432921K->1911872K(2490368K), 0.2773868 secs]
235785.063: [GC-- 2436160K->2479951K(2490368K), 1.1930829 secs]
235786.257: [Full GC 2479951K->1648025K(2490368K), 14.7565160 secs]
235802.763: [GC
Desired survivor size 134217728 bytes, new threshold 14 (max 31)
 2172313K->1732187K(2490368K), 0.1365330 secs]
235813.227: [GC
Desired survivor size 134217728 bytes, new threshold 13 (max 31)
 2256475K->1707125K(2490368K), 0.1693956 secs]
235825.499: [GC
Desired survivor size 134217728 bytes, new threshold 12 (max 31)
 2231413K->1701399K(2490368K), 0.1122006 secs]
235837.714: [GC
Desired survivor size 134217728 bytes, new threshold 11 (max 31)
 2225687K->1719535K(2490368K), 0.1651736 secs]
235852.926: [GC
Desired survivor size 134217728 bytes, new threshold 10 (max 31)
 2243823K->1710722K(2490368K), 0.1077586 secs]
235868.371: [GC
Desired survivor size 134217728 bytes, new threshold 9 (max 31)
 2235010K->1714245K(2490368K), 0.1573498 secs]
235887.277: [GC
Desired survivor size 134217728 bytes, new threshold 8 (max 31)
 2238533K->1707476K(2490368K), 0.1199396 secs]
235900.744: [GC
Desired survivor size 134217728 bytes, new threshold 7 (max 31)
 2231764K->1706693K(2490368K), 0.2301796 secs]
235917.022: [GC
Desired survivor size 134217728 bytes, new threshold 6 (max 31)
 2230981K->1708947K(2490368K), 0.1099928 secs]
235927.712: [GC
Desired survivor size 134217728 bytes, new threshold 5 (max 31)
 2233235K->1729423K(2490368K), 0.1288758 secs]
235944.467: [GC
Desired survivor size 134217728 bytes, new threshold 4 (max 31)
 2253711K->1713068K(2490368K), 0.1224733 secs]
235957.965: [GC
Desired survivor size 134217728 bytes, new threshold 3 (max 31)
 2237356K->1721180K(2490368K), 0.1311912 secs]
235973.956: [GC
Desired survivor size 134217728 bytes, new threshold 2 (max 31)
 2245468K->1735845K(2490368K), 0.1293705 secs]
235988.761: [GC
Desired survivor size 134217728 bytes, new threshold 1 (max 31)
 2260133K->1725458K(2490368K), 0.0830605 secs]
236009.097: [GC
Desired survivor size 134217728 bytes, new threshold 1 (max 31)
 2249746K->1723956K(2490368K), 0.1006387 secs]
236021.587: [GC
Desired survivor size 134217728 bytes, new threshold 1 (max 31)
 2248244K->1732905K(2490368K), 0.1065915 secs]
236039.245: [GC
Desired survivor size 130154496 bytes, new threshold 2 (max 31)
 2257193K->1747624K(2494336K), 0.1222832 secs]
236048.721: [GC
Desired survivor size 124583936 bytes, new threshold 3 (max 31)
 2275880K->1748480K(2490368K), 0.1463785 secs]
236060.974: [GC
Desired survivor size 120127488 bytes, new threshold 4 (max 31)
 2276736K->1743277K(2504128K), 0.3267914 secs]
236067.175: [GC
Desired survivor size 134217728 bytes, new threshold 3 (max 31)
 2290733K->1926829K(2499776K), 0.2225210 secs]
236067.398: [Full GC 1926829K->1896112K(2499776K), 12.3642659 secs]
236081.066: [Full GC 2382464K->1961344K(2499776K), 13.0067024 secs]
236095.026: [Full GC 2382463K->1972662K(2499776K), 12.6296210 secs]
236108.585: [Full GC 2382463K->1891859K(2499776K), 14.3240448 secs]
236123.974: [Full GC 2382463K->1958937K(2499776K), 13.2175196 secs]
236138.415: [Full GC 2382463K->2004901K(2499776K), 13.5869753 secs]
236153.869: [Full GC 2382463K->2034151K(2499776K), 14.5268706 secs]
236169.379: [Full GC 2382463K->1981368K(2499776K), 17.8114037 secs]
236188.164: [Full GC 2382463K->2019591K(2499776K), 17.3729262 secs]
236206.151: [Full GC 2382464K->2054701K(2499776K), 17.2837183 secs]
236224.275: [Full GC 2382464K->2086992K(2499776K), 18.0917252 secs]
236242.927: [Full GC 2382464K->2007157K(2499776K), 18.8760425 secs]
236262.701: [Full GC 2382463K->2088662K(2499776K), 18.0601789 secs]
236281.380: [Full GC 2382463K->2120933K(2499776K), 19.5213884 secs]
236301.719: [Full GC 2382463K->2142691K(2499776K), 19.8563379 secs]
236322.349: [Full GC 2382463K->2093867K(2499776K), 23.5206669 secs]
236346.683: [Full GC 2382464K->2141437K(2499776K), 21.5340729 secs]
236368.895: [Full GC 2382464K->2165122K(2499776K), 20.9653757 secs]
236390.663: [Full GC 2373194K->2187083K(2499776K), 21.7935591 secs]
236413.582: [Full GC 2382464K->2162963K(2499776K), 22.9974370 secs]
236437.187: [Full GC 2382463K->2209939K(2499776K), 21.7474342 secs]
236459.506: [Full GC 2382463K->2208399K(2499776K), 21.1459454 secs]
236481.136: [Full GC 2382463K->2211743K(2499776K), 20.7020540 secs]
236502.553: [Full GC 2382463K->2174831K(2499776K), 23.5576392 secs]
236527.434: [Full GC 2382464K->2210273K(2499776K), 21.3455734 secs]
236549.321: [Full GC 2382464K->2220642K(2499776K), 20.4743578 secs]
236570.593: [Full GC 2382464K->2226068K(2499776K), 19.7456885 secs]
236590.796: [Full GC 2382464K->2170462K(2499776K), 22.6452983 secs]
236614.818: [Full GC 2382463K->2198514K(2499776K), 18.0114350 secs]
236633.619: [Full GC 2382463K->2224056K(2499776K), 20.3950715 secs]
236654.872: [Full GC 
```

这是我的 JVM 选项，我们使用的是 java 1.6。这是针对每月访问量约为 1500 万的高流量电子商务网站。想法？

```
 Xmx2560m -Xms2560m -Xss512k -XX:NewSize=768m -XX:MaxNewSize=768m -XX:MaxPermSize=512m -    XX:ParallelGCThreads=20 -XX:+UseParallelGC -XX:SurvivorRatio=4 -XX:TargetSurvivorRatio=90 -XX:MaxTenuringThreshold=31 -Dsun.rmi.dgc.c
lient.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 - Dsun.lang.ClassLoader.allowArraySyntax=true 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T18:24:39.970

您可以将`-XX:+HeapDumpOnOutOfMemoryError`其用作 JBoss 启动的 Java 选项。当发生内存不足错误时，这将转储堆。此外，您可能还想指定`-XX:HeapDumpPath`转储文件的去向（例如`-XX:HeapDumpPath=/disk2/dumps`）

最后，考虑使用 HPjmeter 之类的工具[来](http://www.hp.com/go/hpjmeter)可视化您粘贴在问题中的 loggc 数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T21:27:41.667

您还可以尝试打印 Class Histograms 以查看哪些类占用了堆。打印直方图比转储整个堆要轻。

1.  比较 Full GC 之前/之后的实例数。这可以告诉您是否有任何实例未被完整 GC 收集。使能够 ：

    > -XX:+PrintClassHistogramBeforeFullGC -XX:+PrintClassHistogramAfterFullGC

2.  然后，您可以在 Full GC 袭击您之前拍摄直方图快照，以查看在应用程序运行期间是否有任何可疑的类实例继续增长：

    > jmap -histo $pid

**更新**：您还可以使用 jstat 收集`stats`每个堆内存区域，也许您将能够检测到一些分配模式：

> `jstat -gcutil -t <pid> <interval> <number_of_samples>`

# c# - MonoMac - AVAudioPlayer 崩溃

> ID：13825935
> 
> 赞同：2
> 
> 时间：2012-12-11T18:04:46.747
> 
> 标签：c#, .net, avaudioplayer, monomac

`AVAudioPlayer`我们在 MonoMac上使用时遇到问题。

我们在控制台上收到此警告：

```
Class AVAudioPlayer is implemented in both ?? and /System/Library/Frameworks/AVFoundation.framework/AVFoundation. One of the two will be used. Which one is undefined. 
```

紧随其后的`Segmentation fault: 11`是立即崩溃。

我假设我的 MonoMac 应用程序正在以某种方式加载 iOS 库`AVAudioPlayer`。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T06:42:41.120

Xamarin 刚刚发布了 Xamarin.Mac，它修复了这个问题。

# android - Android 中错误的 UncaughtExceptionHandler

> ID：13825936
> 
> 赞同：2
> 
> 时间：2012-12-11T18:04:53.220
> 
> 标签：android, exception-handling

我正在开发一个具有远程异常处理功能的应用程序。也就是说，如果发生意外的异常，应用程序会正常关闭，并在我们服务器的日志中生成报告。我为此使用了 UncaughtExceptionHandler 接口，它运行良好，只是它似乎没有捕获实际上是错误的 Throwable。

显然，最好的解决方案是一开始就处理所有事情和/或不允许任何事情引发错误。但是，为了彻底处理错误，我希望能够捕获意外错误和异常。我在 Android 中找不到像 UncaughtErrorHandler 这样的东西，有人知道这样的事情是否可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:06:36.977

通常没有办法捕获错误：通常一旦发生错误，您实际上无法拦截它。据我所知，Java 语言中没有完全支持的机制来捕捉这些，Android 上也没有任何机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:11:18.087

您可能想查看几个 SDK，例如[Crittercism](http://www.crittercism.com/features.html)。实现您想要的基本方法是使用`Thread.setDefaultUncaughtExceptionHandler()`.

# c# - 自定义 WPF 控件以将 int 属性添加到 TextBox

> ID：13825937
> 
> 赞同：0
> 
> 时间：2012-12-11T18:04:53.610
> 
> 标签：c#, wpf, custom-controls

我想要一个额外的 WPF 控件，它将`int`向 TextBox 类添加一个属性。我已经尝试过项目 > 添加新项目 > 自定义控件（WPF）。这给了我一个新控件的新 cs 文件。我尝试让这个新类继承`TextBox`类，然后`public int number { get; set; }`在里面添加，`static CustomTextBox()`但显然这不是正确的语法。

我需要的`TextBox`s 是在代码中动态创建的，而不是在 XAML 中。

这是我尝试实施[John Gardner](https://stackoverflow.com/users/13687/john-gardner)的答案：

```
public static readonly DependencyProperty Number = DependencyProperty.RegisterAttached(
        "number",
        typeof(TextBox),
        typeof(int),
        new PropertyMetadata(false)
        );
    public static void SetNumber(UIElement element, TextBox value)
    {
        element.SetValue(Number, value);
    }
    public static TextBox GetNumber(UIElement element)
    {
        return (TextBox)element.GetValue(Number);
    } 
```

我在 MainWindow 类中添加了这个。它似乎没有给 my `TextBox`s 额外的 Number 属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:07:24.150

你*需要*一个新的控件吗？您最好改用附加属性。然后根本没有新的控制。

[http://msdn.microsoft.com/en-us/library/cc265152(v=VS.95).aspx](http://msdn.microsoft.com/en-us/library/cc265152(v=VS.95).aspx)

**更新：** 附加属性不会直接向文本框添加属性，您可以像访问它一样

```
YourClass.SetNumber( textbox, value );
int value = YourClass.GetNumber( textbox ); 
```

或在 xaml 中，

```
 <TextBox YourClass.Number="1"/> 
```

您的属性在其字符串定义中也应该是“数字”，您有“数字”。你的 Get/Set 调用应该有一个 int 值，而不是一个文本框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T22:04:26.303

您可以只创建 TextBox 的子类并向其添加单个 int 属性。我猜应该这样做。

查看此代码以查看如何执行此操作的示例：

```
public partial class Window1 : Window
{
    public Window1()
    {
        InitializeComponent();

        panel.Children.Add(new MyTextBox { Number = 123 });
        panel.Children.Add(new MyTextBox { Number = 321 });
        panel.Children.Add(new MyTextBox { Number = 456 });
        panel.Children.Add(new MyTextBox { Number = 654 });
    }

    private void click(object sender, RoutedEventArgs e)
    {
        var myTextBoxes = panel.Children.OfType<MyTextBox>();
        var numbers = string.Empty;
        myTextBoxes.ToList().ForEach(p => numbers += p.Number + Environment.NewLine);
        MessageBox.Show(numbers);
    }
}

//Subclass of TextBox that just adds one property
public class MyTextBox : TextBox
{
    public int Number { get; set; }
} 
```

..XAML 只有面板和一个按钮：

```
<StackPanel Name="panel">
    <Button Content="Show numbers" Click="click" />
</StackPanel> 
```

# java - sdk捆绑安装java错误

> ID：13825949
> 
> 赞同：0
> 
> 时间：2012-12-11T18:05:54.353
> 
> 标签：java, sdk, bundle

我试图在 windows 8 64 位和 windows 7 64 位机器上安装 sdk 包。

解压到 c:\development 目录后，我尝试从 \adt-bundle-windows\eclipse 运行 te eclispe.exe，但两者都出现相同的错误：

```
![error message][1]
"a java runtime enviroment JRE or JDK must be available to run eclipse. No java virtual machine found in c:\development\adt-bundle-windows\eclipse\jre..." 
```

安装中没有 jre 目录，`c:\development...`因此 error.op

我尝试手动将 java 安装到 eclipse 目录，但它没有创建 jre 目录，所以出现了同样的错误。

我从安装说明中的理解是“捆绑”中提供了所需的一切！

我错过了什么？为什么java的东西不存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T06:34:53.817

如果您的机器上安装了 JRE，请转到我的计算机的属性 > 高级选项卡 > 选择环境变量

然后在系统变量部分中，查找变量“路径”并对其进行编辑，并在其中添加带有分号的 JRE 路径。

喜欢

";C:\Program Files\Java\jre7\bin"

# plugins - Intellij Idea 插件 - 可以点击类/文件的链接来打开它

> ID：13825952
> 
> 赞同：0
> 
> 时间：2012-12-11T18:06:07.243
> 
> 标签：plugins, intellij-idea

您能否建议如何实现下一件事：当用户单击文件名/行号时，编辑器将切换到该文件。

![在此处输入图像描述](../Images/0aa272883a6f9965c9705892d34e0f8c.png)

PS 源代码可[在此处](https://github.com/stkiller/IntellijIdeaReviewPlugin)获得。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T00:05:29.613

检查以下类/方法：

*   [com.intellij.execution.filters.TextConsoleBuilder#addFilter](https://github.com/JetBrains/intellij-community/blob/master/platform/lang-api/src/com/intellij/execution/filters/TextConsoleBuilder.java#L26)
*   [com.intellij.execution.filters.RegexpFilter](https://github.com/JetBrains/intellij-community/blob/master/platform/lang-api/src/com/intellij/execution/filters/RegexpFilter.java#L34)

使用示例：

*   [org.intellij.lang.xpath.xslt.run.CustomRegexpFilter](https://github.com/JetBrains/intellij-community/blob/master/plugins/xpath/xpath-lang/src/org/intellij/lang/xpath/xslt/run/CustomRegexpFilter.java#L50)
*   [org.intellij.lang.xpath.xslt.run.XsltRunConfiguration#getState](https://github.com/JetBrains/intellij-community/blob/master/plugins/xpath/xpath-lang/src/org/intellij/lang/xpath/xslt/run/XsltRunConfiguration.java#L119)

另请参阅[输出过滤器对话框](http://www.jetbrains.com/idea/webhelp/output-filters-dialog.html)帮助部分。

# vba - 访问屏幕提示文本

> ID：13825956
> 
> 赞同：2
> 
> 时间：2012-12-11T18:06:15.973
> 
> 标签：vba, ms-word

我有一个很长的 MS Word 文档，里面有很多书签/超链接。书签的唯一目的是能够使用屏幕提示查看有关已添加书签的附加信息。

有没有办法访问这个屏幕提示文本，并将其存储在一个变量中？

最终，我将使用它来创建一个宏，该宏将更改显示的文本以包含屏幕提示文本（以便在必要时打印信息）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T01:22:26.220

以下是如何将文档中的所有超链接屏幕提示打印到控制台：

```
Sub printScreenTips()
    Dim link As Hyperlink
    For Each link In ThisDocument.Hyperlinks
        Debug.Print link.ScreenTip
    Next
End Sub 
```

注意：我不知道将屏幕提示添加到*书签*的方法，但您可以将屏幕提示添加到指向书签的超链接。

# c# - GPS计算windows phone 7上两点之间的距离

> ID：13825963
> 
> 赞同：3
> 
> 时间：2012-12-11T18:06:43.067
> 
> 标签：c#, windows-phone-7, gps, windows-phone-7.1, windows-phone

我正在使用 GPS 来计算两点之间的距离，即我使用 windows phone 作为卷尺但是当我开始时我没有得到正确的值事实上即使我站着不动它给了我数百米

这是我的代码

```
 myWatcher.StatusChanged += new EventHandler<GeoPositionStatusChangedEventArgs>(myWatcher_StatusChanged);
        myWatcher.PositionChanged += new EventHandler<GeoPositionChangedEventArgs<GeoCoordinate>>(myWatcher_PositionChanged);
        myWatcher.MovementThreshold = 1;   

void myWatcher_PositionChanged(object sender, GeoPositionChangedEventArgs<GeoCoordinate> e)
    {
        double tempf = e.Position.Location.Latitude;
        double temps = e.Position.Location.Longitude;
        if (count2 == 0)
        {
            FirstLocation = new GeoCoordinate(tempf, temps);
            count2++;
        }
        else
        {
             double distanceInMeter;
            GeoCoordinate currentLocation;
                currentLocation = new GeoCoordinate(tempf, temps);
                distanceInMeter = currentLocation.GetDistanceTo(FirstLocation);                   

                if (App.flag == 0)
                {
                    textBlock1.Text = distanceInMeter.ToString() + " m";
                    double distanceInCm = distanceInMeter * 100;
                    textBlock2.Text = distanceInCm .ToString() + " cm";
                }
                else if (App.flag == 1)
                {
                    double distanceInInch = distanceInMeter * 39.3701;
                    textBlock1.Text = distanceInInch.ToString() + " in";
                    double distanceInFoot = distanceInMeter * 3.28084;
                    textBlock2.Text = distanceInFoot.ToString() + " ft";
                }
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:24:58.640

到目前为止，准确性不是问题。我运行这个应用程序，当前位置的读数不断变化，而我将运动阈值设置为 1 意味着需要覆盖 1 米的距离才能调用 PositionChanged 事件，但即使我还在，读数也会不断变化

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T18:19:19.147

GPS 最多只能[精确](http://www.gps.gov/systems/gps/performance/accuracy/)到 3 米。更可能的错误是 5 - 10 米。

您将不得不[增加](http://www.gps.gov/systems/augmentations/)GPS 读数以获得更好的准确性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T18:32:11.643

这里的其他海报通常是正确的：GPS 不会为您提供所需的准确性。至少不是一个人！

假设您确实有一个良好的卫星定位，您可以获得厘米的精度，但这需要使用来自特殊固定站的信息或来自此类站的实时数据进行后处理。这里的流行语是“实时相位差分”、“实时运动学”、“相位差分后处理”。

[这个网站](http://www.geod.nrcan.gc.ca/edu/rtk_e.php)有一些细节。

因此，如果您可以访问提要，则有*可能*。但这不会像您希望的那么容易。

# jquery - 修改应用于悬停状态的 CSS

> ID：13825964
> 
> 赞同：0
> 
> 时间：2012-12-11T18:06:44.137
> 
> 标签：jquery, html, css

我想知道如何修改通过 jQuery 应用于元素悬停状态的现有样式。

例如：

```
.button { color:red; }
.button:hover { color:blue; } 
```

我想将样式`font-size:14px;`应用于`.button:hover`. font-size 的值将根据用户之前与页面上的哪些其他元素进行交互而有所不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T18:09:55.243

您不能`:hover`使用 JavaScript 修改样式（或任何其他伪类），因为从技术上讲，它们不是 DOM 的一部分。

您需要做的是将这些样式添加到 CSS 中的不同类，然后使用 JavaScript/jQuery 添加/删除该类。

CSS：

```
.button.bigger { font-size:14px; } 
```

jQuery：

```
$('.button').on('hover', function(e) {
    $(this).toggleClass('bigger');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T18:17:47.077

这与 css 有什么关系：

```
.button:hover { color:blue; font-size:14px;} 
```

并使用 jQuery：

```
 $('.button').hover(function(){
    $(this).css({"font-size":"14px"}); // increases on mouseover
 },function(){
    $(this).css({"font-size":"12px"}); // decreases on mouseout
 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T18:12:05.677

将一些类或 id 添加到您的按钮..使用 jquery 定位它并添加 css 到它。

例如

```
$('.buttonToBeChanged').on('hover',function(){
    $(this).css('font-size',14);
}); 
```

应该这样做。请参阅此内容以供参考。[http://api.jquery.com/css/](http://api.jquery.com/css/)

编辑：之后代码会将字体设置为 14px。即使在悬停之后。要给它一个切换效果，请使用@Blazemonger 的答案。那很好。或者你可以使用**mouseenter**和**mouseout**事件

再次编辑 - CSS 也将像@Jai 提到的那样单独完成这项工作。

```
.button:hover { color:blue; font-size:14px;} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T18:16:28.643

您需要在 jQuery 中创建一个事件处理程序，或者在 CSS 中创建一个特定于类的悬停。

这是两者的工作示例：

[http://jsfiddle.net/dboots/GHzSs/](http://jsfiddle.net/dboots/GHzSs/)

JS：

```
$('#large').hover(function(e) {
        var t = $(this);
        t.css('fontSize', '14px');
}, function(e) {
        var t = $(this);
        t.css('fontSize', '11px');
});​ 
```

HTML：

```
<div class="button">Regular Button</div>
<div class="button large">Large Button (by class/css)</div>
<div class="button" id="large">Large Button (by id/jquery)</div>​ 
```

CSS：

```
.button {
    padding: 5px;
    border: 1px solid #999999;
    width: 250px;
    margin: 5px 0;
}

.button:hover {
    border: 1px solid #000000;
}

.large:hover {
    font-size: 14px;
} 
```

# c++ - WINHTTP_CURRENT_USER_IE_PROXY_CONFIG 默认初始化

> ID：13825965
> 
> 赞同：0
> 
> 时间：2012-12-11T18:06:46.637
> 
> 标签：c++, constructor, initialization, default-value

我在我的应用程序中使用 WINHTTP_CURRENT_USER_IE_PROXY_CONFIG 进行 IE 代理配置。

我在我的构造函数中初始化这个
memset( &proxyConfig, 0, sizeof(WINHTTP_CURRENT_USER_IE_PROXY_CONFIG) );

但是，当我运行内存分析器时，我面临“未初始化的内存访问”。

我进入 msdn 并获得了 WINHTTP_CURRENT_USER_IE_PROXY_CONFIG 的结构，甚至尝试了以下实现。仍然没有用。

```
//proxyConfig.fAutoDetect = false;<br>
//proxyConfig.lpszAutoConfigUrl = NULL;<br>
//proxyConfig.lpszProxy = NULL;<br>
//proxyConfig.lpszProxyBypass = NULL;<br> 
```

有没有人建议在代码中初始化 WINHTTP_CURRENT_USER_IE_PROXY_CONFIG 的最佳实践。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-30T14:12:47.497

您可以使用 ：

```
WINHTTP_CURRENT_USER_IE_PROXY_CONFIG ieProxyConfig = {0}; 
```

可能还有其他错误，不是因为初始化。

# html - 高度 css 在 IE 和 Firefox 中不起作用

> ID：13825966
> 
> 赞同：0
> 
> 时间：2012-12-11T18:06:54.990
> 
> 标签：html, css

所以问题是对象标签。它只是拒绝在高度上缩放。铬完美。IE 和 firefox 保持默认高度。我很难找到跨浏览器的代码。从我从其他线程和站点中发现的是，父容器需要设置一个高度。这就是为什么您会在 html 和 body 以及`<div id="calendar">`. 虽然我理解了这个理论，但它仍然不起作用。

旁注：内联 css 的原因是因为我在那里进行 css 测试。而且我没有制作小提琴，因为该对象就像 80 多个文件，而且我不知道如何很好地使用 jsfiddle，而且有点感觉无法在其中获取日历。

```
<!DOCTYPE html>
<html style="height: 100%" >
<body style="height: 100%" >
    <form >
    <div id="calendar" style="height: 70%">
        <object data="calendar.php" width="50%" style="height: 100%"/>
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:11:12.903

所以问题是`object tag`标签在哪里？对于你问为什么需要这个的问题

```
html, body {
   height: 100%;
   width: 100%;
} 
```

是因为当您使用`height: 70%;`子元素时，会出现`70%`什么问题？因此，当您将高度定义为父级时，`%`它定义`70%`了`100%`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T19:43:19.493

您的代码在 Safari 中也被破坏了，但我的解决方案似乎已经解决了这个问题。

此版本验证：

[**http://jsfiddle.net/zu9cL/**](http://jsfiddle.net/zu9cL/)

也许它会为你工作。一般来说，Explorer 讨厌无效代码。

我相信你有两个根本问题。

*   `50%`在属性中使用`width`且未正确关闭的`<object>`标签（无效的 HTML）

*   未能`height`在父元素上定义`<form>`

我在演示中没有使用内联 CSS，但如果您愿意，可以随意将您的 CSS 放回“内联”，它仍然可以工作。

**HTML：**

```
<!DOCTYPE html>
<html>
    <head>
        <title></title>
    </head>
    <body>
        <form>
            <div id="calendar">
                <object data="calendar.php"></object>
            </div>
        </form>
    </body>
</html> 
```

**CSS：**

```
html, body, form {
    height: 100%;
}
#calendar {
    height: 70%;
}
object {
    height: 100%;
    width: 50%;
} 
```

* * *

这一切都与放置“内联”的 CSS 相同。

[jsFiddle 演示](http://jsfiddle.net/zu9cL/1/)

**HTML：**

```
<!DOCTYPE html>
<html style="height: 100%;">
    <head>
        <title></title>
    </head>
    <body style="height: 100%;">
        <form style="height: 100%;">
            <div id="calendar" style="height: 70%;">
                <object data="calendar.php" style="height: 100%; width: 50%;"></object>
            </div>
        </form>
    </body>
</html> 
```

# java - 如果方法收到来自并发客户的购买请求，则每 10 个客户打折

> ID：13825967
> 
> 赞同：0
> 
> 时间：2012-12-11T18:06:58.193
> 
> 标签：java, rmi

我正在编写一个简单的分布式程序。buy 方法使用 RMI 为并发客户提供服务。我想给每 10 个客户打折。购买请求的排序基于他们的时间戳来选择第 10 个客户。实施购买方法的最佳方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T18:13:21.187

有很多方法可以做到这一点。如果时间戳足够随机，您可以使用它，但您也可以使用。

```
static final AtomicInteger COUNTER = new AtomicInteger();

if (COUNTER.getAndIncrement() % EVERY_NTH_USER == 0) {
   // give offer
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:54:19.930

嗯，这是作业问题吗？你坚持使用时间戳，这样你就不会给错误的客户打折，以防他们被乱序处理。但“每 10 个客户”听起来像是一个非常武断的规则。谁在乎您是否在订单到达服务器时而不是在下订单时经过？

如果我们假设它必须通过下订单时分配的时间戳来完成，但决定折扣的服务器不一定会按顺序接收订单，那么......在下订单之前是否存在已知的最大延迟到达服务器，我们可以在应用折扣之前至少等待那么长时间吗？如果没有，问题是无法解决的。如果服务器查看订单上的时间戳并确定某个订单是 10 号，它如何知道没有另一个订单，时间戳介于 9 和 10 之间，仍在运输中且尚未到达?

为了确定“每 10 个订单”，我认为根据定义，必须有一些中央服务器正在计算订单，所以所有订单都必须通过这个单一的服务器，或者至少在这个单一的服务器上“注册”。因此，计数的逻辑方法是在订单到达时对其进行计数。

我们可以拒绝在最长等待时间后到达的订单吗？或者，例如，如果 90% 的时间订单将在 3 秒内到达，我们是否可以说如果订单未在 3 秒内到达我们接受我们可能不符合严格的每 10 次订单规则？如果答案是否定的，那么问题是不可能的。

如果问题的定义是它必须基于独立并发服务器分配的时间戳来完成，那么我认为可以完成的唯一方法是有一个已知的最大时间，即订单到达中央来自卫星服务器的服务器。然后按时间戳对订单进行排序，并在获得最后一次折扣后数十。如果该订单上的时间戳小于 maxium-wait-time 前，那么我们必须等待，然后再决定是否可以授予折扣。然后返回并再次尝试该过程，这次包括自上次尝试以来到达的所有新订单。就像是：

```
(pseudo-code)
loop forever
  select order_id, timestamp from orders where prcoessed=0 order by timestamp
  count to tenth record
  if timestamp<now-max_wait then
    award discount to number 10
    mark numbers 1 to 10 as processed
  else
    do nothing
  endif
endloop 
```

具体来说，考虑到时间戳规则，不可能在您收到订单的那一刻就给予折扣，因为您无法知道没有另一个具有更早时间戳的订单正在送达。

我们必须就如何处理在最长等待时间后到达的订单、是否被拒绝、是否允许在到达时进行处理等做出一些决定。

如果您希望在客户下订单时通知他们他们正在收到折扣，那是不可能的，因为您不知道。好吧，如果最长等待时间足够短，比如不超过几秒钟，您可以推迟对客户的回复，直到时间过去。如果最长等待时间是几分钟，我认为您不能将响应拖延那么久。但我想这取决于其他要求。

# ruby-on-rails - JW-Player 和 Rails 3.2

> ID：13825970
> 
> 赞同：3
> 
> 时间：2012-12-11T18:07:11.480
> 
> 标签：ruby-on-rails, media-player, jwplayer

我正在尝试在我的应用程序中使用 JW-Player。稍微研究一下这个问题，似乎有几个放弃了生产宝石的努力，最新的没有记录。所以，这就是我要做的事情：

我下载了 JW-Player 版本 6，解压缩并复制了 /app/assets/javascripts 目录中的文件，如下所示：

```
app/assets/javascripts/jwplayer/jwplayer.js
app/assets/javascripts/jwplayer.html5.js
app/assets/javascripts/jwplayer.flash.swf 
```

在我的 app/views/layouts/application.html.erb 中，我有以下内容：

```
<head>
    <%= javascript_include_tag "/assets/javascripts/jwplayer/" %>
</head> 
```

在 app/views/pages/about.html.erb 中，我有以下内容：

```
<%= jw_player("http://xxxxx/video.mp4",
            :width => 200, :height => 110) %> 
```

当我单击“关于”页面链接时，会发生以下情况：

```
Showing xxxxxxxx/app/views/pages/about.html.erb where line #10 raised:

undefined method `jw_player' for #<#<Class:0x007fe77e37c018>:0x007fe780c1f678> 
```

JW-Player 的第一次用户。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-14T05:05:34.703

在实现 JWPlayer 6.6 时，我们选择将 jwplayer.flash.swf 文件放入 public 文件夹，以使 flash 模式工作，但这样分离文件似乎很混乱。我最终使它在开发和生产中都起作用的方法是：

*   将所有 3 个文件放入 vendor/assets/javascripts/jwplayer
*   将 jwplayer.js 重命名为 jwplayer.js.erb
*   在 jwplayer.js.erb 中，像这样更新 flash 文件路径配置（html5 文件路径配置的第一行仅供参考）

    ```
    j={type:"html5",src:e.base+"jwplayer.html5.js"},
    b={type:"flash",src:"<%= asset_path('jwplayer/jwplayer.flash.swf') %>"}; 
    ```

    （请注意，flash 文件路径之前的“e.base+”已被删除 - 这是允许在开发环境中使用相对路径的技巧）

据我了解，JWPlayer 许可允许进行如下修改：“改编出版商应被允许为行使本服务条款下的权利而合理必要地进行改编，例如将产品整合到出版商网站或其他财产中的改编。出版商创建的所有改编作品均严格供其使用，出版商不得分发其创建的任何改编作品。公司保留自行决定禁止使用任何改编作品的权利。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-10T17:52:48.263

我刚刚完成了一个由 choix 启动并由[mattherick](http://github.com/choix)改进的名为 jwplayer-rails 的 gem，它可能适用于旧版本的 rails [。](http://github.com/mattherick)它不适用于资产管道，但 mattherick 在修复它方面做得很好，我继续将 JWPlayer 更新到最新版本。

您可以在[此处](https://github.com/dutgriff/jwplayer-rails)查看存储库。

以下说明就在上面的 repo 中。

要将此 gem 添加到您的 rails 应用程序，只需将此行添加到应用程序的 Gemfile：

```
gem 'jwplayer-rails', :git => 'git://github.com/dutgriff/jwplayer-rails.git' 
```

要使用它首先在页面上包含资产

```
<%= jwplayer_assets %> 
```

然后用 JW Player 放置一个 div

```
<%= jwplayer %> 
```

您可以将选项传递给 jwplayer 助手以对其进行自定义：

```
<%= jwplayer({width: 500, height: 200}) %> 
```

更多关于定制的信息可以在[这里](http://www.longtailvideo.com/support/jw-player/28839/embedding-the-player)找到。

[到目前为止它对我很有用，但如果你发现问题，请在此处或github](http://github.com/dutgriff)上告诉我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-23T18:46:21.003

我找到了解决方案。

您需要解决的主要问题是 jwplayer.js 想要根据 jwplayer.js 的路径获取 jwplayer.flash.swf 和 jwplayer.html5.js。

您可以在 jwplayer.js 的 Chrome 开发人员工具栏中看到它（带有漂亮的打印）：

```
(h.embed.config = function(b) {
    var e = {fallback: !0,height: 270,primary: "html5",width: 480,base: b.base ? b.base : j.getScriptPath("jwplayer.js"),aspectratio: ""};
    b = j.extend(e, h.defaults, b);
    var e = {type: "html5",src: b.base + "jwplayer.html5.js"}, 
    g = {type: "flash",src: b.base + "jwplayer.flash.swf"}; 
```

您可以将该`base`属性用作未记录的 api 来告诉 jwplayer 在哪里可以找到 jwplayer.flash.swf 和 jwplayer.html5.js。

例子：

```
jwplayer("player-id").setup({
    width: 640,
    height: 480,
    file: "www.w3schools.com/html/movie.mp4",
    base: "http://cloudfront.net/assets/vendor/jwplayer/"
}; 
```

然后它会寻找`http://cloudfront.net/assets/vendor/jwplayer/jwplayer.flash.swf`. 注意：jwplayer 没有资产管道指纹文件名的概念，因此请确保将文件与 md5 同步和不同步。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T18:59:05.933

下载播放器并将其包含在布局中后，您是否重新启动了服务器。这可能是失败的原因之一。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-29T15:08:15.340

[从http://www.longtailvideo.com/jw-player/download/](http://www.longtailvideo.com/jw-player/download/)下载 jwplayer

将这些文件放入特定目录：-

*   应用程序/资产/jwplayer/jwplayer.flash.swf
*   供应商/资产/javascripts/jwplayer.js
*   供应商/资产/javascripts/jwplayer.html5.js

**然后在application.js**中添加这些行

 **```
//= require jwplayer
//= require jwplayer.html5 
```

在您正在播放视频的页面上，添加这些行

```
<script type="text/javascript">jwplayer.key="YOUR_JWPLAYER_KEY";</script>
<div id="video">Loading the player ...</div>
<script type="text/javascript">
jwplayer("video").setup({
    flashplayer: "<%=asset_path('jwplayer.flash.swf')%>",
    file: "<%= file_path %>",
    height: 360,
    width: 640,
    analytics: {
        enabled: false,
       cookies: false
   }
}); 
```

[http://account.longtailvideo.com/#/home](http://account.longtailvideo.com/#/home)在这里您可以从**获取您的许可证密钥**部分注册时获得免费的自托管密钥。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-11T16:43:50.010

这对我有用：

*   *公开*放置*jwplayer*文件夹（从长尾视频下载）
**   像外部脚本一样包含它，而不使用资产管道 (HAML)。

    ```
    %script{:src => '/jwplayer/jwplayer.js'} 
    ```

    *   在您的视频部分 (ERB)

    ```
    <script type="text/javascript">
    jwplayer.key="Your key here";
    $(document).ready(function(){
        jwplayer("video").setup({
            height: 360,
            width: 640,
            playlist: [
            <% videos.each do |v| %>
                {
                    image: "<%= v.poster %>",
                    sources: [
                        { file: "<%= v.url %>" },
                    ]
                },
            <% end %>
            ]
        });
     })
    </script>

    <video id="video">Video Loading... Ensure JavaScript is enabled...</video> 
    ```* 

 ** * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-16T12:43:38.543

我也选择了JWplayer。

这是我的步骤。

我正在使用[https://github.com/choix/jwplayer-rails](https://github.com/choix/jwplayer-rails) gem。

添加

```
 gem 'jwplayer-rails', '1.0.1' 
```

到我的 Gemfile。

从上面的页面做了所有的事情；在 show.html.slim 视图文件中包含以下几行：

```
 = jwplayer_assets
   br
   br
   = jwplayer({file:@lesson.media_file}) 
```

course.media_file 属性包含文件位置。对于视频文件 *project/public/videos/videoclip.webm*， media_file 包含字符串“/videos/videoclip.webm”。

希望这会有用。***

# android - 如何通过intent直接打开Youtube App

> ID：13825972
> 
> 赞同：1
> 
> 时间：2012-12-11T18:07:22.400
> 
> 标签：android, android-intent, youtube

> **可能重复：**
> [Android YouTube 应用播放视频意图](https://stackoverflow.com/questions/574195/android-youtube-app-play-video-intent)

我想知道如何使用意图直接在 Android 上打开 Youtube 应用程序。

我有的：

```
 @Override
        public void onClick(View v) {
        String video_path = "http://www.youtube.com/user/videoslusofona";
        Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(video_path));
        startActivity(intent);
        } 
```

我不想要的是安卓问我要打开什么应用程序，我想直接点击打开 Youtube 应用程序。

谢谢你的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:11:04.120

你可以试试：

```
String videoId = "VideoIDGoesHere";
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("vnd.youtube:" + videoId)); 
intent.putExtra("VIDEO_ID", videoId); 
startActivity(intent); 
```

你可能想看看使用

```
Intent lVideoIntent = new Intent(null, Uri.parse("ytpl://"+YOUTUBE_PLAYLIST_ID), this, OpenYouTubePlayerActivity.class);
startActivity(lVideoIntent); 
```

从[wiki](http://code.google.com/p/android-youtube-player/wiki/OpenYouTubePlayerActiviyInstructions)，您需要拥有播放列表 ID，但似乎这应该可以工作。

# asp.net - 我可以提取 google 自定义搜索结果以确定 .NET 站点中的输出吗？

> ID：13825975
> 
> 赞同：1
> 
> 时间：2012-12-11T18:07:29.720
> 
> 标签：asp.net, google-search-api, google-custom-search

我正在处理一个列出 asp.NET 网站的属性，而当前的搜索功能非常糟糕。我想知道我是否可以使用 Google 自定义搜索 API 来提取结果，但仍然以与现在相同的方式呈现它们（带有定价、图像等的综合列表项。这是当前的外观：[http://temporadaplus。 com/Aluguel-Por-Temporada.aspx?pais=Brasil](http://temporadaplus.com/Aluguel-Por-Temporada.aspx?pais=Brasil) )。每个列表项都是通过 .NET 项类型创建的。所以基本上我所需要的就是知道如何在不改变任何视觉效果的情况下使用谷歌更好的结果。

[我在这里](https://stackoverflow.com/questions/8040824/how-can-i-do-a-search-with-google-custom-search-api-for-net)遇到了这个问题，但我不确定它到底是我要找的。任何想法或意见表示赞赏。

# ios5 - IBOutlets 设置和正常工作突然全部显示为“！” 在界面生成器中

> ID：13825980
> 
> 赞同：0
> 
> 时间：2012-12-11T18:07:46.380
> 
> 标签：ios5, properties, interface-builder, xcode4.5, iboutlet

在更新 UIViewController 时，我所有的 IBOutlets 都突然没有向 Interface builder 注册。（注意：我没有更改 .m 文件中的任何这些出口）

身份检查器中的类是正确的，IBOutlets 在 .m 文件中显示为已连接，并且应用程序仍然运行良好。

但是，我不能添加任何新的或编辑当前的。这里发生了什么，我该如何纠正它？

![InterfaceBuilder 连接](../Images/1e8a761b61849e7c1daa2739ccac5740.png)![文件](../Images/4c08685e676eff4dbe4e90fd9a8b81bd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:49:05.803

我遇到了解决方案。就像关闭 x 代码并再次打开它一样简单。不知道为什么会发生这种情况，可能是一个错误，但如果有人遇到问题，请先尝试。

# c# - 有人用过 Ninject 和 MS Enterprise Caching 应用程序块吗？

> ID：13825981
> 
> 赞同：0
> 
> 时间：2012-12-11T18:07:51.187
> 
> 标签：c#, asp.net-mvc, ninject, unity-container, enterprise-library

我正在组合一个报告服务，该服务基于与支持（我敢说是遗留）数据存储的非常慢的连接。我对数据存储的唯一访问是通过用 java 编写的 Web 服务 SDK。

`Ninject`我有一个用于 DI的 MVC3 C# 前端。预设报告列表和参数提示不太可能经常更改。有一些提示我需要更好地控制新鲜度和安全性（用户列表）。

我已经使用 完成了概念验证，`System.Web.Caching.Cache`但它没有提供我需要的对缓存中数据的控制。我想使用 MS Enterprise Application Caching Block，因为它确实提供了控制。我不想将 Unity 添加到应用程序中（句号，'nuff 说）。

有没有人用来`Ninject`解决`ICacheManager`/ `CacheManager`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:57:02.910

似乎我让这种方式（方式，方式）变得比它需要的更复杂。

**在没有 Unity 和没有 Instrumentation 的情况下实现应用程序块缓存的说明。**

将以下内容添加到您的配置文件中：

```
<section name="cachingConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Caching.Configuration.CacheManagerSettings, Microsoft.Practices.EnterpriseLibrary.Caching" requirePermission="true" />
...
<cachingConfiguration defaultCacheManager="Default">
  <cacheManagers>
    <add name="Default" expirationPollFrequencyInSeconds="60" maximumElementsInCacheBeforeScavenging="10000" numberToRemoveWhenScavenging="100" backingStoreName="NullBackingStore" type="Microsoft.Practices.EnterpriseLibrary.Caching.CacheManager, Microsoft.Practices.EnterpriseLibrary.Caching" />
  </cacheManagers>
  <backingStores>
    <add type="Microsoft.Practices.EnterpriseLibrary.Caching.BackingStoreImplementations.NullBackingStore, Microsoft.Practices.EnterpriseLibrary.Caching" name="NullBackingStore" />
  </backingStores>
</cachingConfiguration> 
```

需要缓存声明的地方：

```
ICacheManager _cache = CacheFactory.GetCachemanager(); 
```

然后，您可以使用缓存块的完整宽度和深度。

# c++ - SetConsoleCtrlHandler 等效于 Unix/Linux C++

> ID：13825985
> 
> 赞同：1
> 
> 时间：2012-12-11T18:08:10.810
> 
> 标签：c++, linux, winapi

有人知道[`SetConsoleCtrlHandler`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms686016%28v=vs.85%29.aspx)Linux/UNIX 操作系统的等效 Windows 功能吗？（特别是对于 wxWidgets 应用程序。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T18:09:57.737

您可以使用[“信号（）”功能](http://www.cplusplus.com/reference/csignal/)。

这是一个例子：

```
#include <signal.h>

bool stop = false;

void app_stopped(int sig)
{
   // function called when signal is received.
   stop = true;
}

int main()
{
   // app_stopped will be called when SIGINT (Ctrl+C) is received.
   signal(SIGINT, app_stopped);

   while(false == stop)
      Sleep(10);
} 
```

正如评论中提到的，[`sigaction()`](http://pubs.opengroup.org/onlinepubs/009695399/functions/sigaction.html)避免了一些常见的陷阱，`signal()`应该首选..

# javascript - 在 chrome 中，使用 window.Clipboard 对象，有没有办法捕获粘贴的文本？

> ID：13825987
> 
> 赞同：9
> 
> 时间：2012-12-11T18:08:15.990
> 
> 标签：javascript, google-chrome, copy, clipboard, paste

[您可以捕获图像](http://joelb.me/blog/2011/code-snippet-accessing-clipboard-images-with-javascript/)。我想弄清楚如何捕获文本。出于安全原因，我猜没有，但我想确定一下。

还有这个东西的参考吗？`window.Clipboard`object 不是 v8 引擎的一部分，它是 chrome 浏览器的一部分，我找不到它的官方文档。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-11T19:05:09.630

在您链接的代码中，有一个`pasteHandler`具有以下功能的函数：

```
// Get the items from the clipboard
        var items = e.clipboardData.items;
        if (items) {
            // Loop through all items, looking for any kind of image
            for (var i = 0; i < items.length; i++) {
                if (items[i].type.indexOf("image") !== -1) {
                    // We need to represent the image as a file,
                    var blob = items[i].getAsFile();
                    // and use a URL or webkitURL (whichever is available to the browser)
                    // to create a temporary URL to the object
                    var URLObj = window.URL || window.webkitURL;
                    var source = URLObj.createObjectURL(blob);

                    // The URL can then be used as the source of an image
                    createImage(source);
                }
            }
        } 
```

Chrome 开发者框架告诉我 items[i] 是一个`DataTransferItem` [（参考）](http://api.dartlang.org/docs/bleeding_edge/dart_html/DataTransferItem.html "（参考）")

在参考页面上，我看到了一个`kind`属性和一个`getAsString()`方法。后者似乎需要一个接收文本作为参数的回调函数。因此，要使用上述脚本处理文本值，您可以修改我链接的部分，如下所示：

```
// Get the items from the clipboard
        var items = e.clipboardData.items;
        if (items) {
            // Loop through all items, looking for any kind of image
            for (var i = 0; i < items.length; i++) {
                if (items[i].type.indexOf("image") !== -1) {
                    // We need to represent the image as a file,
                    var blob = items[i].getAsFile();
                    // and use a URL or webkitURL (whichever is available to the browser)
                    // to create a temporary URL to the object
                    var URLObj = window.URL || window.webkitURL;
                    var source = URLObj.createObjectURL(blob);

                    // The URL can then be used as the source of an image
                    createImage(source);
                } 
                if (items[i].kind === "string"){
                    items[i].getAsString(function(s) {
                        alert(s);
                    });
                }
            }
        } 
```

# java - 休眠触发不必要的更新。为什么？

> ID：13825989
> 
> 赞同：3
> 
> 时间：2012-12-11T18:08:30.327
> 
> 标签：java, hibernate, evict

我有三层，即Action、Service、DAO 层。我已经使用 ID 为 123 的休眠从 DB 加载了一个对象（雇员类）。我对雇员对象进行了一些修改。后来，我创建了休眠业务对象并对其进行了一些修改。

```
Employee e = service.getEmp(123);
e.setName("Ashok");

Order o = new Order
o.setNumber(567);

service.saveOrUpdate(o); 
```

在这种情况下，为什么它试图更新员工对象，即使我没有说要保存它？如何从会话中分离它？我不希望休眠更新员工对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T18:27:39.857

> 在这种情况下，为什么它试图更新员工对象，即使我没有说要保存它？

我引用[休眠文档](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#objectstate-modifying)：

> 事务性持久实例（即由 Session 加载、保存、创建或查询的对象）可以由应用程序操作，并且在刷新 Session 时，对持久状态的任何更改都将被持久化。[...]。无需调用特定方法（如具有不同目的的 update()）来使您的修改持久化。

和

> 如何将其与会话分离？

用 标记集合`cascade="evict"`。然后在刷新对象之前[Session.evict(Object)](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/Session.html#evict%28java.lang.Object%29)对象（如果您已经`FlushMode.AUTO`将其设置为，`MANUAL`直到您完成了您想要的操作）。

# macos - CIFilterGenerator 因 CIColorMap 而失败

> ID：13825991
> 
> 赞同：0
> 
> 时间：2012-12-11T18:08:40.220
> 
> 标签：macos, cocoa, core-image, cifilter

我正在尝试`CIFilterGenerator`使用以下代码创建一个用于 CALayer 的：

```
CIFilterGenerator *generator = [[CIFilterGenerator alloc] init];

CIFilter *colorFilter = [CIFilter filterWithName:@"CIConstantColorGenerator"];
[colorFilter setDefaults];
[colorFilter setValue:[CIColor colorWithRed:0.0 green:1.0 blue:0.0 alpha:0.5] forKey:kCIInputColorKey];

CIFilter *cropFilter = [CIFilter filterWithName:@"CICrop"];
[cropFilter setDefaults];
[cropFilter setValue:[CIVector vectorWithX:0.0 Y:0.0 Z:1.0 W:1.0] forKey:@"inputRectangle"];
[generator connectObject:colorFilter withKey:kCIOutputImageKey toObject:cropFilter withKey:kCIInputImageKey];

CIFilter *colorMap = [CIFilter filterWithName:@"CIColorMap"];
[colorMap setDefaults];
[generator connectObject:cropFilter withKey:kCIOutputImageKey toObject:colorMap withKey:kCIInputGradientImageKey];

CIFilter *blur = [CIFilter filterWithName:@"CIGaussianBlur"];
[blur setDefaults];
[blur setValue:@10.0 forKey:kCIInputRadiusKey];
[generator connectObject:colorMap withKey:kCIOutputImageKey toObject:blur withKey:kCIInputImageKey];

[generator exportKey:kCIInputColorKey fromObject:colorFilter withName:nil];
[generator exportKey:kCIInputImageKey fromObject:colorMap withName:nil];

[generator exportKey:kCIOutputImageKey fromObject:blur withName:nil]; 
```

但是，当我尝试将其附加到图层时，出现异常：

```
/SourceCache/CoreImage/CoreImage-8.2.2/API/CIFilter.mm:588: CIColorMap apply:: Caught exception: CIColorMap: colorMap: nil value for argument #0 (src) 
```

这很奇怪，因为我正在导出颜色映射输入图像。更奇怪的是，如果我将导出的输出图像更改为颜色图，它会按预期工作（当然减去模糊）。

# svn - 使用 svn 让 CommitTicketUpdater 在 trac 中工作

> ID：13825992
> 
> 赞同：2
> 
> 时间：2012-12-11T18:08:41.513
> 
> 标签：svn, trac, post-commit

我使用 trac 作为我的问题跟踪系统，以及 svn。最近我发现，从 trac 0.12（我使用的版本）开始，提交消息也可以使用分布式 CommitTicketUpdater（出现在 tracopt 中）修改票证（添加评论，关闭它们）。

这是安装在 ubuntu 12.04 上的。我的提交后代码就这么简单：

```
REV="$2"
/usr/bin/trac-admin /var/trac/proj changeset added robo $REV 
```

其中 'robo' 是我的存储库的名称，如 trac 中所定义。这实际上效果很好；变更集与 svn 提交期间写入的提交消息一起出现在 trac 中。问题不在这里。

插件 (http://trac.edgewall.org/wiki/CommitTicketUpdater) 应在提交消息中查找诸如“see #22”或“fix #23”之类的字符串，并更新/关闭相关票证。这在语法上非常灵活。我已经从管理 web 选项卡启用了插件（并应用了更改），甚至尝试升级（虽然，不需要升级）。

我已经在我的 trac.ini 文件中的 [ticket] 下配置了插件，因此：

```
commit_ticket_update_envelope =
commit_ticket_update_commands.close = close closed closes fix fixed fixes
commit_ticket_update_commands.refs = <ALL>
commit_ticket_update_check_perms = false
commit_ticket_update_notify = false 
```

但我尝试了许多其他变体，包括评论其中一些行。我也尝试将 [] 放入信封选项中，但这并没有改变。

底线是，虽然添加了变更集，但工单中没有任何变化。

我在想这可能是一个权限问题。因此，我已将 TRAC_ADMIN 添加到匿名中，但这并没有改变任何东西。我意识到我不确定 trac 如何处理 linux 用户；他们不会以任何方式对 Web 服务器进行身份验证......但是还能做到这一点吗？

所以我已经用root提交了，它奏效了。所以这都是关于linux权限的。虽然，我的用户属于“svn”组，但在我的项目文件夹中都具有写入权限。但是，这还不够，使用 root 提交**确实**有效。

我的下一个方向是将我自己（和任何其他提交者）添加到 sudoers 中，并且没有操作该钩子的密码。

这是这样做的：我添加了 'hansz debi = NOPASSWD: /usr/bin/trac-admin' （其中 debi 是服务器名称，hansz 是我的用户名），并将提交后行修改为：

```
sudo -u root /usr/bin/trac-admin /var/trac/proj changeset added robo $REV 
```

这也没有帮助。以 root 身份提交工作，作为我自己 - 不是。

这是我停止尝试的地方，并寻求您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:04:00.233

`CommitTicketUpdater`将变更集的作者用于权限检查（并且您无论如何都禁用了权限检查）。它不使用 UNIX 用户做任何事情。

给予`TRAC_ADMIN`也`anonymous`不会做任何事情，因为经过身份验证的用户继承了 的权限`authenticated`，而不是`anonymous`.

当您`trac-admin $ENV changeset added`以 root 身份运行时更新票证的工作确实指向（文件系统）权限问题。为什么它不起作用`sudo`有点神秘。请注意，运行的用户`trac-admin`需要对所有 Trac 环境具有读写权限。

您是在为您的存储库使用存储库类型`svn`，还是`svn-direct`？在后一种情况下，即使您没有写入环境的权限，变更集也会出现在 Trac 中。

我建议将您的日志记录级别提高到`DEBUG`并查看日志是否告诉您任何信息。我还建议加入 trac-users 邮件列表并在那里询问。您将接触到更多熟悉 Trac 设置的人。此外，SO 是一个很好的提问平台，但它并不适合调试安装。

# passenger - Phusion 乘客禁止许可被拒绝

> ID：13825993
> 
> 赞同：2
> 
> 时间：2012-12-11T18:09:27.673
> 
> 标签：passenger, redmine, phusion

我正在尝试使用 Apache 运行 Phusion Passenger，当我启动乘客时，我收到以下错误：

```
=============== Phusion Passenger Standalone web server started ===============
PID file: /root/passenger.3000.pid
Log file: /root/passenger.3000.log
Environment: development
Accessible via: http://0.0.0.0:3000/

You can stop Phusion Passenger Standalone by pressing Ctrl-C.
===============================================================================
    2012/12/11 18:01:36 [error] 3188#0: *4 "/root/public/index.html" is forbidden (1
3: Permission denied), client: 127.0.0.1, server: _, request: "HEAD / HTTP/1.1", host: "0.0.0.0" 
```

我看过其他人对此的评论，但他们的答案集中在 Nginx 而不是 Apache 上。任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T18:26:43.247

出于安全原因，Phusion Passenger Standalone 将拒绝以 root 身份运行。当你跑的时候`passenger start`，它要求你提供`--user`，不是吗？好吧，Phusion Passenger Standalone 正在以该用户身份运行，并且该用户可能无权访问 /root 下的任何内容。

您可以放宽 /root 的权限，也可以将应用程序目录移动到该用户可以访问的位置。