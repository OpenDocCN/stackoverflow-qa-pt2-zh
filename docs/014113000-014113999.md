# StackOverflow 问答 14113000-14113999

# vb.net - 在 VB.NET 中播放 MIDI 文件

> ID：14113003
> 
> 赞同：1
> 
> 时间：2013-01-01T18:20:48.597
> 
> 标签：vb.net, playback, midi

如何使用 VB.NET 播放 MIDI 文件？我尝试使用 WAV，但它们太大了。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:11:22.757

看看这篇我以前用过的文章，它可以工作。

[http://www.codeproject.com/Articles/8506/Simple-VB-NET-MIDI-Wave-Play-Class](http://www.codeproject.com/Articles/8506/Simple-VB-NET-MIDI-Wave-Play-Class)

只需将该代码复制粘贴到您的项目中即可。创建保存你的 midi 的变量并调用 play 方法。

你也可以试试这个。（不确定。） [http://support.microsoft.com/kb/141756](http://support.microsoft.com/kb/141756)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T23:24:52.283

就大小而言，使用 MIDI 文件可能是一个好主意，但对于实际声音（或缺少 :)）而言，IMO 是一个可怕的主意。您可以找到也做音乐的用户，并且有更好的替代设置或连接到他们的系统，但是让用户启动他们的 MIDI 乐器等以在软件中收听 MIDI 轨道可能是个坏主意如果出乎意料。

大多数用户仍然坚持使用 Microsoft 的内置波形合成器，这是一种折磨工具（双关语），可能不应该使用；）

为什么不考虑使用 MP3 或其他一些出色的压缩器（例如 AAC、Ogg Vorbis）来压缩您的波形数据？

这会将原始数据量减少到原始大小的至少 1/10，除非您提供整张专辑，否则应该可以克服。

您可以找到各种方法来执行此操作，从[简单的方法，例如](http://www.daniweb.com/software-development/vbnet/threads/119460/playing-mp3-file-with-vb.net)使用媒体播放器的方法，或者更[底层的方法，例如](http://whenimbored.xfx.net/2011/01/an-mp3-decoder-written-in-vb/)解码 MP3 文件的方法。

也看看[SlimDX](http://code.google.com/p/slimdx/)。

# php - 0-250 之间的随机数，但借助外部数字？没有那么多的 PHP，更多的数学哲学？

> ID：14113004
> 
> 赞同：-6
> 
> 时间：2013-01-01T18:20:51.507
> 
> 标签：php, math, random

好吧，不要问我为什么需要这样做，但我需要这样做。哈哈！这可能不是一个php问题，但我不知道那是什么？数学问题？当我将如何做到这一点的理论得到解决时，它就变成了一个更多的 PHP 问题，然后我可能需要代码方面的帮助，如果它不仅仅是简单的话！

我会尽力解释这一点！我想要一个介于`0-250`. 此随机数`0-250`必须仅在随机数 betwnn 的帮助下生成`0-5000`。

所以。

```
RandomNumber1 = 1-250\. 
```

`RandomNumber1`只能在`RandomNumber2`.

```
RandomNumber2 = 1-5000\. 
```

我不知道除了我以外的其他人是否可以理解，但这就是我**必须**这样做的方式。

**只能**是 1,4,24,124 等数字。不能是 1.4、2,5 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T18:23:22.847

将其除以`RandomNumber2`20，这会将可能的范围缩小到`RandomNumber1`.

换句话说，当我们`RN2`把它除以 时`20`，我们得到一个同样可能是范围内任何东西的数字`[RN2_min / 20, RN2_max / 20)`——在这种情况下，这将`[0 / 20, 5000 / 20]`是`[0, 250]`所希望的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T18:24:26.693

```
$RandomNumber2 = rand()%5000;
srand($RandomNumber2);
$RandomNumber1 = rand()%250; 
```

# php - PHP & mySQL - 将单个 HTML 字段文本解析/分离为 2 个变量

> ID：14113007
> 
> 赞同：2
> 
> 时间：2013-01-01T18:21:09.200
> 
> 标签：php, html, mysql, database, html-parsing

提前感谢您抽出宝贵时间解决我的问题。

我正在使用 PHP 脚本来查询 mySQL 数据库。不幸的是，产品描述、成分和附加信息（最后的段​​落）都与名称一起存储在一个字段中（名称是多余的，可以忽略）。所有文本都包含在 HTML 代码中。我不想保留或存储任何 HTML 代码，但它可能用作分隔符。

**重要提示：** HTML 是编码存储的，所以

```
<p> 
```

存储为

```
&lt;p&gt; 
```

下面是一个存储在 mySQL 数据库中的 HTML 代码示例（这正是它的存储方式。正如我之前提到的，HTML 是经过编码的。）：

```
&lt;table border=&quot;0&quot; cellpadding=&quot;2&quot; cellspacing=&quot;2&quot;&gt;
&lt;tbody&gt;
    &lt;tr valign=&quot;top&quot;&gt;
        &lt;td&gt;
            Item:&lt;/td&gt;
        &lt;td&gt;
            Olive Loaf - Baked - &lt;b&gt;Gluten Free!&lt;/b&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr valign=&quot;top&quot;&gt;
        &lt;td&gt;
            Description:&lt;/td&gt;
        &lt;td&gt;
            A blend of beef and pork along with our unique spices to create a base mix. To this mix we add plenty of olives and form it into a loaf, we then smoke this over natural hardwoods for a unique Koegel flavor.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr valign=&quot;top&quot;&gt;
        &lt;td&gt;
            Ingredients:&lt;/td&gt;
        &lt;td&gt;
            Beef and Pork, Water, Spanish Olives (Olives, Pimentos, Sodium Alginate, Guar Gum, Calcium Chloride, Water, Salt, Lactic Acid), Nonfat Dry Milk, Corn Syrup, Salt, Red Sweet Peppers (bell peppers, water, citric acid.), Spices, Dextrose, Dehydrated Onions.&lt;/td&gt;
    &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;
    &lt;strong&gt;Each loaf weighs approximately 6 lbs.&lt;/strong&gt;&lt;/p&gt; 
```

这是与 HTML 解码相同的代码片段（这不是它在 mySQL 数据库中的存储方式。我提供这个只是为了视觉。）：

```
<table border="0" cellpadding="2" cellspacing="2">
<tbody>
    <tr valign="top">
        <td>
            Item:</td>
        <td>
            Olive Loaf - Baked - <b>Gluten Free!</b></td>
    </tr>
    <tr valign="top">
        <td>
            Description:</td>
        <td>
            A blend of beef and pork along with our unique spices to create a base mix. To this mix we add plenty of olives and form it into a loaf, we then smoke this over natural hardwoods for a unique Koegel flavor.</td>
    </tr>
    <tr valign="top">
        <td>
            Ingredients:</td>
        <td>
            Beef and Pork, Water, Spanish Olives (Olives, Pimentos, Sodium Alginate, Guar Gum, Calcium Chloride, Water, Salt, Lactic Acid), Nonfat Dry Milk, Corn Syrup, Salt, Red Sweet Peppers (bell peppers, water, citric acid.), Spices, Dextrose, Dehydrated Onions.</td>
    </tr>
</tbody>
</table>
<p>
    <strong>Each loaf weighs approximately 6 lbs.</strong></p> 
```

基本上，我想忽略名称，将描述和附加信息（描述下方的最后一段）保存为$productDescription（可能在描述后添加两个换行符以分隔附加信息），并将成分保存为$productIngredients。我**不想**包含文本“描述：”或“成分：”......只是紧随其后的信息。**如上所述，我只对原始文本感兴趣——我不想保存任何 HTML 代码。将信息存储到 2 个变量中时，应忽略所有 HTML 代码。**

任何帮助都将不胜感激！

谢谢，

-杰夫

**编辑**

发生的事情是 mySQL 数据库连接到一个 opencart 网站。在网站的管理方面，没有单独的成分、描述等字段。还有其他所有内容（重量、尺寸、SKU、型号等）。这是因为 opencart 网站并非专门用于食品。它可以用于电子产品，在这种情况下，不需要这些领域。店主（不是我）将所有这些信息输入到描述入口点。HTML 可能会泄露这一点。该网站由另一个人管理（如果需要，我可以直接与他联系）。我不希望他或我自己更改 opencart 代码以添加额外的字段，除非它可以轻松完成。

向 opencart 网站添加其他字段是否容易？这样，描述字段可以是独占的。感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:20:06.637

这个问题很简单。我觉得骂做这个设计的人是错误的。他只是在数据库字段中存储了一段实体化的 HTML。现在您正尝试从中提取特定信息。

显然，您在检索其中一个项目时要做的第一件事就是去实体化它（`&lt;`变成`<`等）。html_entity_decode 就是这样做的。

现在看起来您拥有的 html 格式正确。即，`<p>`and`</p>`元素等匹配正确。这很好，因为您可以使用 XML 库来操作它。

这是示例代码，来自我的一个项目。我还没有尝试在你的项目中调试它。

```
 $xml= simplexml_load_string("<?xml version='1.0'?>\n" . html_entity_decode($mydata);
 $ns = $xml->getNamespaces(true);
 foreach ($ns as $key => $val) {
    $xml->registerXPathNamespace($key, $val);
 }
 unset($ns); 
```

现在您有了一个包含您的小文章的 simpleXML 对象。您可以使用各种 API 来提取您需要的数据。看看这里的一些例子。

[http://php.net/manual/en/simplexml.examples-basic.php](http://php.net/manual/en/simplexml.examples-basic.php)

我怀疑您将能够相当轻松地使用这种材料。

请注意，在评论中有些人说您应该尝试从这些 HTML 节中提取有趣的信息并将其放入专门的列中。这可能是真的，特别是如果您必须搜索这些数据或即时更新它。

但也可以将内容存储在 XML/HTML 中。如果需要搜索，可以使用 FULLTEXT 搜索。

### 编辑

您可能需要将 XML 内容包装在一个`<article> ... </article>`节中，就像这样。最后一项，关于面包重量的段落，有可能被认为是额外的而被拒绝。

```
 $xml= simplexml_load_string("<?xml version='1.0'?>\n<article>\n" .
    html_entity_decode($mydata) . "\n</article>\n"; 
```

处理 XML 需要花点功夫，至少对我来说是这样。

# c - 将“th”、“nd”或“rd”添加到 C 中的日期

> ID：14113010
> 
> 赞同：5
> 
> 时间：2013-01-01T18:22:06.110
> 
> 标签：c

我正在为我的键盘修改一些驱动程序软件，其中一部分是一个将日期输出到我的键盘屏幕的插件。目前它说的是 1 月 1 日，但我真的希望它说 1 日、2 日、3 日或 4 日或其他什么。

我一直在到处寻找某种代码，这些代码会给我一些关于如何做到这一点的想法，但我只能找到 C# 的示例，而且我正在使用 C。

编辑：

```
const char *ordinals[] = {"", "1st", "2nd", "3rd", "4th", "5th", "6th", "7th", "8th", "9th", "10th", "11th", "12th", "13th", "14th", "15th", "16th", "17th", "18th", "19th", "20th", "21st", "22nd", "23rd", "24th", "25th", "26th", "27th", "28th", "29th", "30th", "31st"};

sprintf(date, "%s %s", ordinals[t->tm_mday], mon); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-01T18:25:17.673

由于您只需要`1`通过的数字`31`，因此最简单的方法是定义一个序数数组，如下所示：

```
const char *ordinals[] = {"", "1st", "2nd", "3rd", "4th"..., "31st"};
...
printf("%s of %s", ordinals[dayNumber], monthName); 
```

这比通过算法进行更好，因为它更具可读性，并且更容易国际化，如果您以后遇到这个问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-01T18:37:49.273

这适用于所有非负数`n`：

```
char *suffix(int n)
{
  switch (n % 100) {
    case 11: case 12: case 13: return "th";
    default: switch (n % 10) {
      case 1: return "st";
      case 2: return "nd";
      case 3: return "rd";
      default: return "th";
    }
  }
}

printf("%d%s\n", n, suffix(n)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T18:24:05.973

你可以有条件地做到这一点。

```
#include <stdio.h>

const char *suff;

switch (day)
{
case 1: /* fall-through */
case 21: /* fall-through */
case 31:
  suff = "st";
  break;
case 2: /* fall-through */
case 22:
  suff = "nd";
  break;
case 3: /* fall-through */
case 23:
  suff = "rd";
  break;
default:
  suff = "th";
  break;
}

printf("%d%s\n", day, suff); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-01T18:36:12.233

```
void day_to_string(int day, char *buffer)
{
     char *suff = "th";
     switch(day)
     {
         case 1:
         case 21:
         case 31:
           suff = "st";
           break;

         case 2:
         case 22:
           suff = "nd";
           break;

         case 3:
         case 23:
            suff = "rd";
            break;      
     }
     sprintf(buffer, "%d%s", day, suff);
 } 
```

应该这样做。但是请注意，如果您想将您的程序翻译成另一种语言，您可能需要遵循 dasblinkenlight 的建议，因为您可能会发现某些语言的规则与英语的规则不同。

# sql-server-2005 - 使用 C# 在数据库中检索 lisbox 值

> ID：14113012
> 
> 赞同：0
> 
> 时间：2013-01-01T18:22:15.640
> 
> 标签：sql-server-2005, ado.net

实际上，当用户选择一个值时，我正在使用一个具有多个值的列表框，列表框中的项目被插入数据库，如“Abc，xyz，gkl”类型现在我想从表单前面的数据库中检索这个值，并且选择我该怎么做这是我的代码

```
ds = new DataSet();

              if (ds.Tables[0].Rows.Count > 0)
              {

                  string[] arr_Electro_Therapy = ds.Tables[0].Rows[0]["Electro_Therapy"].ToString().Trim().Split(',');
                  for (int i = 0; i < arr_Electro_Therapy.Length; i++)
                {
                    for (int k = 0; k < listBox1.Items.Count; k++)
                      {

                         if (listBox1.Items[k].Value.ToString().Trim() == arr_Electro_Therapy[i].ToString().Trim())
                          {

                              listBox1.Items[k].Selected = true;
                              hdSelected.Value = hdSelected.Value + ", " + listBox1.Items[k].;
                          }
                      }
                  } 
```

# iphone - 无法将 sqlite 数据库从应用程序的 mainbundle 复制到用户文档

> ID：14113015
> 
> 赞同：3
> 
> 时间：2013-01-01T18:22:25.863
> 
> 标签：iphone, ios, database, sqlite, ios-simulator

我无法将我的 sqlite 数据库复制到用户文档文件夹，数据库始终为 0 字节，但应该有 322 kb。

我还检查了数据库是否包含在目标成员中。

问题是我无法正确复制数据库。

这是我的代码：

```
-(void)initDatabase
{
// Create a string containing the full path to the sqlite.db inside the documents folder
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *databasePath = [documentsDirectory stringByAppendingPathComponent:@"wine.sqlite"];

// Check to see if the database file already exists
bool databaseAlreadyExists = [[NSFileManager defaultManager] fileExistsAtPath:databasePath];

// Open the database and store the handle as a data member
if (sqlite3_open([databasePath UTF8String], &databaseHandle) == SQLITE_OK)
{

    // Create the database if it doesn't yet exists in the file system
    if (!databaseAlreadyExists)
    {
        // Get the path to the database in the application package
        NSString *databasePathFromApp = [[NSBundle mainBundle] pathForResource:@"wine" ofType:@"sqlite"];
        //NSString *databasePathFromApp = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"wine.sqlite"];

        // Copy the database from the package to the users filesystem
        [[NSFileManager defaultManager] copyItemAtPath:databasePathFromApp toPath:databasePath error:nil];

        NSLog(@"Database created");
    }
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T18:38:38.223

有逻辑错误，你检查`databaseAlreadyExists`里面

```
if (sqlite3_open([databasePath UTF8String], &databaseHandle) == SQLITE_OK) { ... } 
```

堵塞。

你可能的意思是

```
// Check to see if the database file already exists
bool databaseAlreadyExists = [[NSFileManager defaultManager] fileExistsAtPath:databasePath];

// Create the database if it doesn't yet exists in the file system
if (!databaseAlreadyExists)
{
    // Get the path to the database in the application package
    NSString *databasePathFromApp = [[NSBundle mainBundle] pathForResource:@"wine" ofType:@"sqlite"];

    // Copy the database from the package to the users filesystem
    [[NSFileManager defaultManager] copyItemAtPath:databasePathFromApp toPath:databasePath error:nil];

    NSLog(@"Database created");
}

// Open the database and store the handle as a data member
if (sqlite3_open([databasePath UTF8String], &databaseHandle) == SQLITE_OK)
{
   ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T18:40:24.343

你打开一个数据库（如果它不在那里使用，则制作一个新的 0 字节`sqlite3_open`，然后将运送的一个复制到新数据库应该在的位置。

*   你检查 DB_docs 是否存在
*   但是无论如何你都用 sqlite 打开 DB_docs
*   然后你尝试将它从包中复制到打开的文件路径中

* * *

```
-(void)initDatabase
{
    // Create a string containing the full path to the sqlite.db inside the documents folder
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *databasePath = [documentsDirectory stringByAppendingPathComponent:@"wine.sqlite"];

    // Check to see if the database file already exists
    BOOL databaseAlreadyExists = [[NSFileManager defaultManager] fileExistsAtPath:databasePath];

    // Create the database if it doesn't yet exists in the file system
    if (!databaseAlreadyExists)
    {
        // Get the path to the database in the application package
        NSString *databasePathFromApp = [[NSBundle mainBundle] pathForResource:@"wine" ofType:@"sqlite"];

        // Copy the database from the package to the users filesystem
        [[NSFileManager defaultManager] copyItemAtPath:databasePathFromApp toPath:databasePath error:nil];

        NSLog(@"Database created");
    }

    // Open the database and store the handle as a data member
    if (sqlite3_open([databasePath UTF8String], &databaseHandle) == SQLITE_OK)
    {
        NSLog(@"db opened");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-22T19:20:26.657

我只是使用了下面用 AppDelegate 写的方法，（看起来方法体很大，其实不然，把所有的评论都删掉，看评论后看清楚）：

```
#pragma mark - SQLite DB
// SQLite Copy the Database.
-( void ) checkAndCreateDatabase
{
// Check if the SQL database has already been saved to the users phone, if not then copy it over
BOOL success;

NSString *databasePath = [LIBRARY_DIR_PATH stringByAppendingPathComponent:DATABASE_NAME];
NSLog(@"%@",databasePath);

// Create a FileManager object, we will use this to check the status
// of the database and to copy it over if required
NSFileManager *fileManager = [NSFileManager defaultManager];

// Check if the database has already been created in the users filesystem
success = [fileManager fileExistsAtPath:databasePath];
// If the database already exists then return without doing anything
if(success) return;

NSLog(@"DB WASN'T THERE! SO GONNA COPY IT!");

// If not then proceed to copy the database from the application to the users filesystem
// Get the path to the database in the application package
NSString *databasePathFromApp = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:DATABASE_NAME];
success = [fileManager fileExistsAtPath:databasePathFromApp];
if (success) {
    NSLog(@"SIMULATOR FOUND DB FROM APP, GONNA COPY IT");
} else {
    NSLog(@"SIMULATOR COULDN'T FIND DB\nIT SHOULD BE IN : %@\nPlease check if you have added the DB file and selected its target", databasePathFromApp);
}

// Copy the database from the package to the users filesystem
[fileManager copyItemAtPath:databasePathFromApp toPath:databasePath error:nil]; 
```

}

并在其中调用该方法

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

如下：

```
//Copy the SQLite3 DB File
[self checkAndCreateDatabase]; 
```

**提示：**请记住，当您将 db 文件拖放到 XCode 项目中时，您需要将 SQLite DB 文件添加到正确的目标成员中。

# c# - 如何将数据库中的数据显示到文本框中，并更新它

> ID：14113025
> 
> 赞同：4
> 
> 时间：2013-01-01T18:23:11.620
> 
> 标签：c#, asp.net, sql-server-2008

从 sql 数据库中检索数据后，我可以在我的文本框、下拉列表中显示我的数据，但是当我继续使用更新按钮时，在文本框或下拉列表中编辑的信息不会更新到数据库中。我试图在页面加载中删除代码，并手动重新键入所有数据，它可以更新。我想要的只是从数据库中检索数据并将其显示在文本框中，并且可以在从文本框中进行一些更改后将其更新到数据库中。有人可以帮我吗？谢谢。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.SqlClient;
using System.Configuration;
using System.Data;
public partial class UpdateCustomerDetails : System.Web.UI.Page
{

protected void Page_Load(object sender, EventArgs e)
{
    SqlConnection con1 = new SqlConnection("Data Source=USER-PC;Initial Catalog=webservice_database;Integrated Security=True");
    DataTable dt = new DataTable();
    con1.Open();
    SqlDataReader myReader = null;  
    SqlCommand myCommand = new SqlCommand("select * from customer_registration where username='" + Session["username"] + "'", con1);

    myReader = myCommand.ExecuteReader();

    while (myReader.Read())
    {
        TextBoxPassword.Text = (myReader["password"].ToString());
        TextBoxRPassword.Text = (myReader["retypepassword"].ToString());
        DropDownListGender.SelectedItem.Text = (myReader["gender"].ToString());
        DropDownListMonth.Text = (myReader["birth"].ToString());
        DropDownListYear.Text = (myReader["birth"].ToString());
        TextBoxAddress.Text = (myReader["address"].ToString());
        TextBoxCity.Text = (myReader["city"].ToString());
        DropDownListCountry.SelectedItem.Text = (myReader["country"].ToString());
        TextBoxPostcode.Text = (myReader["postcode"].ToString());
        TextBoxEmail.Text = (myReader["email"].ToString());
        TextBoxCarno.Text = (myReader["carno"].ToString());
    }
    con1.Close();
}
protected void Button1_Click(object sender, EventArgs e)
{
    SqlConnection con = new SqlConnection("Data Source=USER-PC;Initial Catalog=webservice_database;Integrated Security=True");
    SqlCommand cmd = new SqlCommand("UPDATE customer_registration SET password = @password, retypepassword = @retypepassword, gender = @gender, birth = @birth, address = @address, city = @city, country = @country, postcode = @postcode, email = @email, carno = @carno where username='" + Session["username"] + "'", con);
    con.Open();

    cmd.Parameters.AddWithValue("@password", TextBoxPassword.Text);
    cmd.Parameters.AddWithValue("@retypepassword", TextBoxRPassword.Text);
    cmd.Parameters.AddWithValue("@gender", DropDownListGender.Text);
    cmd.Parameters.AddWithValue("@birth", DropDownListDay.Text + DropDownListMonth.Text + DropDownListYear.Text);
    cmd.Parameters.AddWithValue("@address", TextBoxAddress.Text);
    cmd.Parameters.AddWithValue("@city", TextBoxCity.Text);
    cmd.Parameters.AddWithValue("@country", DropDownListCountry.Text);
    cmd.Parameters.AddWithValue("@postcode", TextBoxPostcode.Text);
    cmd.Parameters.AddWithValue("@email", TextBoxEmail.Text);
    cmd.Parameters.AddWithValue("@carno", TextBoxCarno.Text);

    cmd.ExecuteNonQuery();
    con.Close();
    if (IsPostBack)
    {
        Response.Redirect("UpdateSuccess.aspx");
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T18:26:25.890

`!IsPostBack`在页面加载时将所有语句包装起来。

```
protected void Page_Load(object sender, EventArgs e)
{
   if(!IsPostBack)
   {
      // all statements
   }
} 
```

这将解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T18:30:33.077

答案`.IsPostBack`正如@Kundan Singh Chouhan 所建议的那样。只是为了添加它，将您的代码移动到 Page_Load 的单独方法中

```
private void PopulateFields()
{
  using(SqlConnection con1 = new SqlConnection("Data Source=USER-PC;Initial Catalog=webservice_database;Integrated Security=True"))
  {
    DataTable dt = new DataTable();
    con1.Open();
    SqlDataReader myReader = null;  
    SqlCommand myCommand = new SqlCommand("select * from customer_registration where username='" + Session["username"] + "'", con1);

    myReader = myCommand.ExecuteReader();

    while (myReader.Read())
    {
        TextBoxPassword.Text = (myReader["password"].ToString());
        TextBoxRPassword.Text = (myReader["retypepassword"].ToString());
        DropDownListGender.SelectedItem.Text = (myReader["gender"].ToString());
        DropDownListMonth.Text = (myReader["birth"].ToString());
        DropDownListYear.Text = (myReader["birth"].ToString());
        TextBoxAddress.Text = (myReader["address"].ToString());
        TextBoxCity.Text = (myReader["city"].ToString());
        DropDownListCountry.SelectedItem.Text = (myReader["country"].ToString());
        TextBoxPostcode.Text = (myReader["postcode"].ToString());
        TextBoxEmail.Text = (myReader["email"].ToString());
        TextBoxCarno.Text = (myReader["carno"].ToString());
    }
    con1.Close();
  }//end using
} 
```

然后在您的 Page_Load 中调用它

```
protected void Page_Load(object sender, EventArgs e)
{

    if(!Page.IsPostBack)
    {
       PopulateFields();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-09T08:34:33.263

```
protected void Page_Load(object sender, EventArgs e)

    {

        DropDownTitle();
    }

protected void DropDownTitle()
{
    if (!Page.IsPostBack)
    {

        string connection = System.Configuration.ConfigurationManager.ConnectionStrings["AuzineConnection"].ConnectionString;

        string selectSQL = "select DISTINCT ForumTitlesID,ForumTitles from ForumTtitle";
        SqlConnection con = new SqlConnection(connection);
        SqlCommand cmd = new SqlCommand(selectSQL, con);
        SqlDataReader reader;
        try
        {

            ListItem newItem = new ListItem();
            newItem.Text = "Select";
            newItem.Value = "0";
            ForumTitleList.Items.Add(newItem);
            con.Open();
            reader = cmd.ExecuteReader();

            while (reader.Read())
            {
                ListItem newItem1 = new ListItem();
                newItem1.Text = reader["ForumTitles"].ToString();
                newItem1.Value = reader["ForumTitlesID"].ToString();
                ForumTitleList.Items.Add(newItem1);

            }
            reader.Close();
            reader.Dispose();
            con.Close();
            con.Dispose();
            cmd.Dispose();

        }
        catch (Exception ex)
        {
            Response.Write(ex.Message);
        }

    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-07T07:04:40.403

在 Page Init 事件中填充文本框值，而不是使用回发。

```
protected void Page_Init(object sender, EventArgs e)
{
    DropDownTitle();
} 
```

# jquery - jQuery 的 .clone(true, true) 不克隆子事件绑定

> ID：14113029
> 
> 赞同：3
> 
> 时间：2013-01-01T18:23:58.690
> 
> 标签：jquery, clone

我正在使用 clone(true, true) 来复制选择和一些按钮来克隆和删除。我认为第二个真正的参数应该确保将事件处理程序传递给克隆的子按钮。

这是标记：

```
<div id="clone-container">
    <div class="clone">
        <label for="select1">Select 1</label>
        <select id="select1" name="select1" class="">
            <option>Select One:</option>
            <option value="1">1</option>
        </select>
        <span class="controls">
            <a href="#" class="btn add">+</a>
            <a href="#" class="btn remove">−&lt;/a>
        </span>
    </div>
</div>​ 
```

和js：

```
var $cloned = $('.clone').clone(true, true);
var $addButton = $(".btn.add");
$addButton.on("click", function(e) {
    e.preventDefault();
    var $cloner = $(this).closest(".clone");    
    $cloned.clone().insertAfter($cloner);
});​ 
```

这是一个 js 小提琴：http: [//jsfiddle.net/cjmemay/yXA4R/](http://jsfiddle.net/cjmemay/yXA4R/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-03-08T02:42:52.453

> 您可以使用 jQuery.detach() 代替 .clone(true,true);
> 
> 那将是带有事件和所有内容的复制元素

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T18:28:01.273

这是一个工作示例：http: [//jsfiddle.net/aT5mV/1/](http://jsfiddle.net/aT5mV/1/)

我已经修改了`on`事件以捕获所有点击`.btn.add`，包括动态创建的元素。

```
var $cloned = $('.clone').clone();

$('#clone-container').on("click", '.btn.add', function(e) {
    e.preventDefault();
    var $cloner = $(this).closest(".clone");    
    $cloned.clone().insertAfter($cloner);
});
​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T18:34:08.377

您的代码有两个问题：

1.  原始克隆 ( `$cloned`) 没有绑定到按钮的事件侦听器
2.  您的第二次调用`clone`不会保留事件

将事件侦听器附加到按钮*后*，您需要克隆容器。此外，您需要将`true`参数传递给第二次调用`clone`：

```
var $addButton = $(".btn.add");
$addButton.on("click", function(e) {
    e.preventDefault();
    var $cloner = $(this).closest(".clone");    
    $cloned.clone(true, true).insertAfter($cloner);
});
var $cloned = $('.clone').clone(true, true); 
```

这是一个演示：http: [//jsfiddle.net/3hjfj/](http://jsfiddle.net/3hjfj/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T18:28:30.193

尝试克隆第二次使用`.clone(true,true)`too

# ruby-on-rails - 在单击标签名称时 Rails best_in_place gem

> ID：14113045
> 
> 赞同：4
> 
> 时间：2013-01-01T18:25:54.610
> 
> 标签：ruby-on-rails, best-in-place

我正在使用最好的宝石 - 这很棒。唯一的问题是，我希望用户不仅能够单击最佳位置元素以对其进行编辑，还能够单击标签。可以说我有这个最好的元素：

```
<b>Open Hours</b>
<%= best_in_place @provider, :open_hours, :type => :select, :collection => Provider::PROVIDERS_HOURS %> 
```

我希望能够单击 Open Hours 以打开编辑元素。是否可以？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T19:57:01.793

对于一个类的单个实例，您可以简单地

```
<b id='edit-open-hours'>Open Hours</b>
<%= best_in_place @provider, :open_hours, type: :select, collection: Provider::PROVIDERS_HOURS, activator: '#edit-open-hours' %> 
```

如果您想使用列表视图执行此操作，您需要使用 ID 使每个 id-identifier 唯一

```
<b id='edit-<%= @provider.id %>'>Open Hours</b>
<%= best_in_place @provider, :open_hours, type: :select, collection: Provider::PROVIDERS_HOURS, activator: '#edit-' + @provider.id.to_s %> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-06T06:58:55.043

这很有帮助，但有一个小修正：您必须在激活器 DOM 元素前加上相关符号（# 代表 id，. 代表类）。

所以第二个例子是

```
<%= best_in_place @provider, :open_hours, type: :select, collection: Provider::PROVIDERS_HOURS, activator: '#edit-' + @provider.id.to_s %> 
```

# jquery - “非此即彼”验证具有相同错误消息的多个输入

> ID：14113046
> 
> 赞同：1
> 
> 时间：2013-01-01T18:26:08.153
> 
> 标签：jquery, jquery-validate, unobtrusive-validation

我的表单有四个字段。我需要：
- 如果至少填充了一个字段，则验证成功
- 对所有字段使用相同的错误“请输入电话或电子邮件”

下面的代码在条件基础上不起作用 - 即使我使用该函数一次检查所有字段，所有字段也会单独验证。我究竟做错了什么？

```
var rule = function (el) {
//return                                        <-- old
  return (                                    //<-- new
    ($("#CustomerEmail").val() === "") &&
    ($("#CustomerMobile").val() === "") &&
    ($("#CustomerWork").val() === "") &&
    ($("#CustomerHome").val() === "")
  //;                                         <-- old
    );                                      //<-- new
  };

$("#CustomerEmail").rules("add", { required: rule });
$("#CustomerMobile").rules("add", { required: rule });
$("#CustomerWork").rules("add", { required: rule });
$("#CustomerHome").rules("add", { required: rule }); 
```

*更新：*

事实证明我的代码毕竟没问题，但那`return`是独立的，这让 JS 爆炸了。

仍然想知道如何将单个错误消息附加到组，而不是在验证失败时显示四个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T18:32:35.830

> 如果填充了至少一个字段，则验证成功

**仅当所有**字段都有值时，您的规则才会成功（因为您使用的是 AND 运算符）。如果一个就足够了，请使用 OR 运算符

```
var rule = function (el) {
  return
    $("#CustomerEmail").val() ||
    $("#CustomerMobile").val() ||
    $("#CustomerWork").val() ||
    $("#CustomerHome").val();
  }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T21:29:37.257

这是一个解决方案，首先涉及为`Must_Have_One`. 该方法`name`是添加到组中每个元素的匹配类，或者您可以使用`rules`对象来定义该方法。

HTML

```
<input name="name" class="must_have_one" /> 
```

JS

```
var $form_group=$('.must_have_one')

$.validator.addMethod("must_have_one", function() {
    var must_have_els=$form_group.filter(function(){
        return this.value !='';
    });

    if (must_have_els.length) {
        return true;
    } else {
        return false;
    }
}, 'Must have one of .....');

var myFormValidator = $("form").validate({
    groups: {
         must_have_one : "name email"
    },
    errorPlacement: function(error, element) {       
        if (myFormValidator.groups[element.attr("name")]) {
            /* determine placement for message for group*/
            error.insertAfter($form_group.last());
        }
        else error.insertAfter(element);
    }
}) 
```

演示：http: [//jsfiddle.net/UzjZM/1/](http://jsfiddle.net/UzjZM/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T00:05:59.013

尽管@charlietfl 的代码有效，但这是我原始代码的修改版本，它有效：

```
var eitherors = $("#CustomerEmail, #CustomerMobile, #CustomerWork, #CustomerHome");
var message  = "Please enter either a phone number or email address";

// define the required validation rule
// will return true when all inputs are blank
var requiredRule = function (el) {
  return eitherors
    .filter(function () { return $(this).val() !== "" })
    .length === 0;
};

// define the required validation error message
// returns the error message when 1) all inputs are
// blank, and 2) only for one of the fields (I chose the first one)
var requiredMessage = function (arg, el) {
  return (requiredRule() && eitherors.first().is(el))
    ? message
    : "";
};

// use same rule and message on all the "either-or" inputs
eitherors.each(function () {
  $(this).rules("add", {
    required: requiredRule,
    messages: { required: requiredMessage }
    });
  }); 
```

这是通用的，因此只需更改 jQuery 数组和错误消息即可处理任何元素组。

# hex - 如何通过给定地址范围计算内存大小？

> ID：14113051
> 
> 赞同：12
> 
> 时间：2013-01-01T18:26:58.773
> 
> 标签：hex, memory-address

我有一个无法解决的练习，我有 3 个内存范围：

```
 First @      Last @ 
```

范围 1：FD00 0000 到 FDFF FFFF

range2 : D000 0000 到 DFFF FFFF

range3 : FA00 0000 到 FBFF FFFF

问题是：给出每个范围（兆字节）的内存大小？

我所知道的是，我应该计算范围的大小 = 最后一个地址 - 第一个地址，所以第一个范围的结果是：00FF FFFF。这是正确的吗？那我该怎么办？我在互联网上搜索了我没有找到示例

请帮忙

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-01T18:29:15.667

在您的范围 1 示例中，您是正确的。这是内存的大小，以十六进制表示，以字节为单位。

您可以通过首先将 00FF FFFF 转换为十进制数，然后将该字节数转换为兆字节来获得最深入的了解。

要将字节转换为兆字节，请使用关系

```
1 MB = 1 Megabyte = 1024 * 1 KB = 1,048,576 bytes. 
```

有大量的在线十六进制到十进制转换器。Windows 内置的计算器也可以进行转换。

对于其他范围，您再次希望进行减法以确定范围的大小，然后应用上述步骤，例如

```
 FBFF FFFF
-
 FA00 0000
 ---------
 01FF FFFF 
```

完成这些步骤以更好地掌握正在发生的事情后，以下关系将使您能够更快地回答此类问题：

```
0010 0000 = 1,048,576 
```

所以 1MB 与 0010 0000 相同（有时称为 0x100000）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-22T03:18:11.573

抱歉，用另一个问题回答一个问题...

**在规定范围内可用的地址数量是否也包括那些范围限制器？** 例如（用十进制来说明我的观点）起始地址为 5，结束地址为 10。仅通过减法，即结束地址减去起始地址 (10-5)，我们得到的范围为 5。但实际上有六个唯一地址在 5,6,7,8,9,10 的范围内（所以我们应该在 Julie 的原始问题中的减法结果中加 1？）

此外，**内存地址大小**与**实际内存大小**。我们是在谈论单个内存位置的数量还是可用于存储数据的内存大小（应该考虑每个位置的大小）？

如果它只是内存位置，那么我们就差不多完成了（我认为这被称为内存地址大小）。只需要解决问题的MB部分（我会在最后谈到这个问题）

如果它是可用的存储空间，这应该包括内存的每个可寻址部分的大小，例如每个地址位置保存一个大小未知的数据块。假设它是每个内存位置 1 字节 (1B) 的数据，而不是我上面的示例，则意味着内存大小为：6（内存位置）乘以 1 字节（每个内存位置的容量），总内存大小为 6B

所以根据我的逻辑，**范围 1 的原始问题的答案**应该是 01000000hex (range1 = FDFF FFFF-FD00 0000 + 1 = **01000000h** )。

至于该范围的内存大小，这是我真正感到困惑的地方......它是特定数量的内存位置，即 1000000h，每个位置的大小未定。那么为什么要以 MB 或 GB 表示呢。如果您确实知道每个内存位置的大小（并将位置数乘以每个位置的大小，那么您就有该范围的内存大小，并且可以用数字形式表示。

虽然我们在这里，但我真正感到困惑的是 MB、GB 等的使用。它经常被引用为每个前缀等于 1024 的倍数，例如 1KB = 1024Bytes、1MB = 1024kB 等，但 IEC 首选约定是基于 ISO 标准（根据我刚才的谷歌搜索），它说 Kilo (kB) = 1000，Mega (MB) = 1000000 等。

因此，将每个位置的未知大小放在一边，并将 1000000h 转换为十进制即 16,777,216，答案是：

*   **16MB** (16777216/1024/1024=16)**我怀疑这是老师要的答案**
*   16.777216MB（根据ISO标准）
*   16 MB（根据联合 IEC/ISO 标准 - IEC 80000-13）

顺便说一句，谷歌搜索只是教育了我（可能被认为是最近和部分）关于千字节和兆字节......如果你有兴趣，请查看[https://en.wikipedia.org/wiki/Kilobyte](https://en.wikipedia.org/wiki/Kilobyte)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-22T18:31:37.563

方程是

```
second_add - first_add + 1 
```

例子

```
fdff ffff - fd00 0000 + 1 = 0100 0000 = 2^24 = 2^4 * 2^20 = 16Mbyte [2^20 byte = 1 Mbyte] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-08-21T03:46:37.070

简单的类比，从 0 到 9 的数量范围（地址）是多少？答案是 10，而不是 9，因为范围/地址 0 被计算在内。

因此，容量 = 最后地址 - 第一个地址 + 1。

range1 的容量：FD00 0000 到 FDFF FFFF 将为 FDFF FFFF - FD00 000 + 1 = FF FFFF + 1 = 100 0000（十六进制）或 16777216（十进制）（16MB）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-16T11:36:44.957

```
range1: FD00 0000 to FDFF FFFF:
  FD FF FFFF 
- FD 00 0000
------------
  FF FFFF +1 = 1MB (0x100 0000)

range2 : D000 0000 to DFFF FFFF = 256MB (0x1000 0000)

range3 : FA00 0000 to FBFF FFFF = 32MB (0x200 0000)
It should be noted that +1 is added since both number are exclusive here 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-19T11:01:08.907

我认为公式

> 大小 = 结束 - 开始

总是可以使用（与其他尺寸没有区别，即裤子的腰围）

由于 HEX 和 DEC，内存大小使其变得更难，其中十进制易于人类阅读，并且通常使用 B(Bytes)。

为方便起见，如果您安装了 bc，您可能想尝试一下

```
echo 'ibase=16;yourendhex-yourbeginhex' | bc 
```

在你的情况下

```
echo 'ibase=16;FDFFFFFF-FD000000' | bc
echo 'ibase=16;DFFFFFFF-D0000000' | bc
echo 'ibase=16;FBFFFFFF-FA000000' | bc
16777215  #16MB
268435455 #268MB
33554431  #34MB 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-25T09:03:59.153

为了方便大家理解，我只是把问题改成如下，2-9范围内的内存大小是多少？

答案是8，如下2、3、4、5、6、7、8、9。公式是最高地址-最低地址+1。

对于您的第一个问题范围1：FD00 0000 到 FDFF FFFF，答案是 00FF FFFF+1=0100 0000H=1 X 16^6= 1 X (2^4)^6=2^24=2^4 x 2^20 . 对于二进制系统 2^10= 1024=1K 和 2^20=1K x 1 K = 1M 然后 2^4 x 2^20=16 M。对于第二个和第三个问题，请做同样的事情。祝你好运。

# php - 未从 javascript 函数调用 PHP 文件

> ID：14113052
> 
> 赞同：0
> 
> 时间：2013-01-01T18:26:58.730
> 
> 标签：php, javascript, forms, cookies

我正在尝试从 javascript 函数调用表单和 php 文件，但它不起作用。它可能与 cookie 有关，它不调用“frmSubdeptChainDailyHL”表单，也不调用“subdeptclass_reportHL.php”文件，代码如下：

```
function submitClassChainDaily()
{
    var store = readCookie('storeAccess');
    var clss = readCookie('classAccess');
    var subdept = readCookie('subDeptAccess');
  var period = readCookie('period');
  if (period == null || period == '') {
    period = 'CUR';
  }
  document.frmClassChainDaily.period.value = period;

    var storePref = readCookie('storePref');

  if (storePref == null || storePref == '') {
    if (store == null || store == '') {
        storePref = 'ALL';

    } else {
        storePref = store;

    }
  }
    if ((storePref.length) > 3 && storePref != 'ALL100') {
        document.setStore.submit();
    } else {
    document.frmClassChainDaily.store.value = storePref;
    if (clss == null || clss == '') {
        clss = 'ALL';
    }
      document.frmClassChainDaily.clss.value = clss;
    if (subdept == null || subdept == '') {
        subdept = 'ALL';
    }
      document.frmClassChainDaily.subdept.value = subdept;

    ";

      if ($_REQUEST['storePref']=='099')
    {    
    echo "document.frmSubdeptChainDailyHL.submit();";
} else {
    echo "document.frmSubdeptChainDaily.submit();";
}   
 echo "

  }
}

Here is the form code:

if ($_REQUEST['storeCode'] == '099') {
        echo"
<li>
    <!--   SubDept Daily Sales - Chain -->
    <form name=\"frmSubdeptChainDailyHL\" action=\"subdeptclass_reportHL.php\">
        <input type=hidden value=\"\" name=\"store\">
        <input type=hidden value=\"\" name=\"subdept\">
        <input type=hidden value=\"\" name=\"clss\">
        <input type=hidden value=\"\" name=\"period\">
    </form>
      <a style=\"display: block; text-decoration: none; color: #000\" href=\"javascript: submitSubDeptChainDaily();\">
        <h3 class=\"longfield\">
            <img src=\"content/images/icons/US_dollar_icon.png\" alt=\"icon\" class=\"icon\"/>
            <span>Sales</span>
        </h3>
      </a>
      </li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T18:37:26.623

您不能直接从 javascript 调用 php 函数。利用一些ajax调用

# ruby-on-rails - 如何有一个下拉轨道形式的字段？我正在创建一个脚手架 - rails g scaffold Contact email:string email_provider:string 但我希望电子邮件提供商是一个下拉列表（以 gmail/yahoo/msn 作为选项）而不是文本字段。我怎样才能做到这一点 ？请看这里 你可以使用 rails 标签 或者使用纯 HTML 标签 Rails tag <%= select("Contact", "email_provider", Contact::P

> ID：14113057
> 
> 赞同：82
> 
> 时间：2013-01-01T18:27:49.350
> 
> 标签：ruby-on-rails, ruby-on-rails-3, drop-down-menu, input, selectlist

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-01-01T18:39:29.677

You can take a look at [the Rails documentation](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select) . Anyways , in your form :

```
 <%= f.collection_select :provider_id, Provider.order(:name),:id,:name, include_blank: true %> 
```

As you can guess , you should predefine email-providers in another model -`Provider` , to have where to select them from .

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2015-07-05T02:12:59.557

或用于自定义选项

```
<%= f.select :desired_attribute, ['option1', 'option2']%> 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-01-01T19:42:08.123

您在`Contact`控制器中创建集合 -

```
app/controllers/contacts_controller.erb 
```

添加

```
@providers = Provider.all.by_name 
```

到新的，创建和编辑方法，使用模型`by_name`中的范围- 用于按名称排序`Provider``app/models/provider.rb`

```
scope by_name  order(:name) 
```

然后在视图中`app/views/contacts/_form.html.erb`——你使用

```
<%= f.collection_select :provider_id, @providers, :id, :name, include_blank: true %> 
```

对于 rails 表单，我还强烈建议您查看 simple_form 之类的表单构建器 - [https://github.com/plataformatec/simple_form](https://github.com/plataformatec/simple_form) - 它将完成所有繁重的工作。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-11-01T11:53:36.893

这是一个漫长的过程，但如果您还没有实现，那么您最初可以通过这种方式创建模型。下面的方法描述了更改现有数据库。

1) 为电子邮件提供商创建一个新模型：
`$ rails g model provider name`

2）这将使用名称字符串和时间戳创建您的模型。它还创建了我们需要添加到架构中的迁移：
`$ rake db:migrate`

3) 添加迁移以将提供者 ID 添加到联系人中：
`$ rails g migration AddProviderRefToContacts provider:references`

4）检查迁移文件以检查它是否正常，并且也迁移它：
`$ rake db:migrate`

5）好的，现在我们有了provider_id，我们不再需要原来的email_provider字符串：
`$ rails g migration RemoveEmailProviderFromContacts`

6) 在迁移文件中，添加如下所示的更改：

```
class RemoveEmailProviderFromContacts < ActiveRecord::Migration
  def change
    remove_column :contacts, :email_provider
  end
end 
```

7) 完成后，迁移更改：
`$ rake db:migrate`

8) 让我们借此机会更新我们的模型：
联系人：`belongs_to :provider`
提供者：`has_many :contacts`

9) 然后，我们在视图的 _form.html.erb 部分中设置下拉逻辑：

```
 <div class="field">
    <%= f.label :provider %><br>
    <%= f.collection_select :provider_id, Provider.all, :id, :name %>
  </div> 
```

10) 最后，我们需要自己添加提供者。一种最好的方法是使用种子文件：

```
Provider.destroy_all

gmail = Provider.create!(name: "gmail")
yahoo = Provider.create!(name: "yahoo")
msn = Provider.create!(name: "msn") 
```

`$ rake db:seed`

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-04-15T21:42:52.900

`<%= f.select :email_provider, ["gmail","yahoo","msn"]%>`

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-01-01T18:33:21.137

请看[这里](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#M001593)

*您可以使用 rails 标签或使用纯 HTML 标签*

**导轨标签**

```
<%= select("Contact", "email_provider", Contact::PROVIDERS, {:include_blank => true}) %> 
```

***上面的代码行会变成 HTML 代码（HTML Tag），在下面找到它 ***

**HTML 标记**

```
<select name="Contact[email_provider]">
  <option></option>
  <option>yahoo</option>
  <option>gmail</option>
  <option>msn</option>
</select> 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-05-24T10:32:32.070

Rails 使用文章和类别的 has_many 关联下拉：

```
has_many :articles

belongs_to :category

<%= form.select :category_id,Category.all.pluck(:name,:id),{prompt:'select'},{class: "form-control"}%> 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-10-16T20:33:59.783

在你的模型中，

```
class Contact
  self.email_providers = %w[Gmail Yahoo MSN]
  validates :email_provider, :inclusion => email_providers
end 
```

在你的表格中，

```
<%= f.select :email_provider, 
    options_for_select(Contact.email_providers, @contact.email_provider) %> 
```

options_for_select 的第二个参数将选择任何当前的 email_provider。

# android - SGS III 上的指南针读数

> ID：14113058
> 
> 赞同：1
> 
> 时间：2013-01-01T18:27:58.710
> 
> 标签：android, galaxy, android-sensors, samsung-mobile, digital-compass

我的应用程序需要使用指南针显示设备的当前方位。我正在使用的代码（如下）在我的 Galaxy Nexus 和 Galaxy One 上运行良好，但指南针在三星 Galaxy S III 上疯狂旋转。我已经尝试做一个图 8 来重新校准设备，但这并没有改变任何东西。奇怪的是，从 Google Play 下载的其他指南针应用程序在 SIII 上运行良好。这里可能是什么问题？

```
float[] mGravity;
float[] mGeomagnetic;

public void onSensorChanged( SensorEvent event ) {
    float azimuth = 0f;
    if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER)
        mGravity = event.values;
    if (event.sensor.getType() == Sensor.TYPE_MAGNETIC_FIELD)
        mGeomagnetic = event.values;
    if (mGravity != null && mGeomagnetic != null) {
        float R[] = new float[9];
        float I[] = new float[9];
        boolean success = SensorManager.getRotationMatrix(R, I, mGravity, mGeomagnetic);
        if (success) {
            float orientation[] = new float[3];
            SensorManager.getOrientation(R, orientation);
            azimuth = orientation[0]; // orientation contains: azimut, pitch and roll
        }
     }

    //Discard 0.0-values
    if(azimuth == 0.0) { return; }

    //Convert the sensor value to degrees
    azimuth = (float) Math.toDegrees(azimuth); //same as azimuth = -azimuth*360/(2*3.14159f);

    //Smooth the sensor-output
    azimuth = smoothValues(azimuth);
}

//From http://stackoverflow.com/questions/4699417/android-compass-orientation-on-unreliable-low-pass-filter
//SmoothFactorCompass: The easing float that defines how smooth the movement will be (1 is no smoothing and 0 is never updating, my default is 0.5).
//SmoothThresholdCompass: The threshold in which the distance is big enough to turn immediately (0 is jump always, 360 is never jumping, my default is 30).
static final float SmoothFactorCompass = 0.5f;
static final float SmoothThresholdCompass = 30.0f;
float oldCompass = 0.0f;
private float smoothValues (float newCompass){
    if (Math.abs(newCompass - oldCompass) < 180) {
        if (Math.abs(newCompass - oldCompass) > SmoothThresholdCompass) {
            oldCompass = newCompass;
        }
        else {
            oldCompass = oldCompass + SmoothFactorCompass * (newCompass - oldCompass);
        }
    }
    else {
        if (360.0 - Math.abs(newCompass - oldCompass) > SmoothThresholdCompass) {
            oldCompass = newCompass;
        }
        else {
            if (oldCompass > newCompass) {
                oldCompass = (oldCompass + SmoothFactorCompass * ((360 + newCompass - oldCompass) % 360) + 360) % 360;
            } 
            else {
                oldCompass = (oldCompass - SmoothFactorCompass * ((360 - newCompass + oldCompass) % 360) + 360) % 360;
            }
        }
    }
    return oldCompass;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T18:59:53.470

目前我正在研究 Android 上的指南针机制，我建议您从低通滤波器开始。您需要做的是对 ACCELEROMETER 和 MAGNETIC_FIELD 传感器数据应用低通滤波器。这是我如何实现的：

```
private float[] accel;
private float[] geomagnetic;
float R[] = new float[9];
float I[] = new float[9];
float orientation[] = new float[3];

@Override
public void onSensorChanged(SensorEvent event)
{
    synchronized (this)
    {
        float azimuth = -1f;

        if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER)
            accel = lowPass( event.values.clone(), accel );

        if (event.sensor.getType() == Sensor.TYPE_MAGNETIC_FIELD)
            geomagnetic = lowPass(event.values.clone(), geomagnetic);

        if (accel != null && geomagnetic != null)
        {

            boolean success = SensorManager.getRotationMatrix(R, I,
                    accel, geomagnetic);

            SensorManager.remapCoordinateSystem(R,
                    SensorManager.AXIS_X, SensorManager.AXIS_Z, R);

            if (success)
            {
                SensorManager.getOrientation(R, orientation);
                azimuth = orientation[0]; // orientation contains:
                                         // azimuth, pitch
                                         // and roll
                float newHeading = azimuth * 360 / (2 * 3.14159f);

                //do what you need to do with new heading
            } 
        }
    }
}

/*
 * time smoothing constant for low-pass filter 0 ≤ alpha ≤ 1 ; a smaller
 * value basically means more smoothing See:
 * http://en.wikipedia.org/wiki/Low-pass_filter#Discrete-time_realization
 */
static final float ALPHA = 0.15f;

/**
 * @see http
 *      ://en.wikipedia.org/wiki/Low-pass_filter#Algorithmic_implementation
 * @see http
 *      ://developer.android.com/reference/android/hardware/SensorEvent.html
 *      #values
 */

protected float[] lowPass(float[] input, float[] output)
{
    if (output == null)
        return input;

    for (int i = 0; i < input.length; i++)
    {
        output[i] = output[i] + ALPHA * (input[i] - output[i]);
    }
    return output;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-25T09:21:35.057

可能你应该先克隆传感器读数中的值，然后如果这不起作用，则低通滤波器，我知道 SONY XPeria 手机非常敏感，不像三星非常稳定。

在我看来，在 android OS 4.3 下 S3 阅读是相当不错的

```
event.values.clone; 
```

我最近的经验夫妇数据反馈迫使我在装有 Invesense 传感器的 SONY 手机上应用旋转矢量逻辑，它似乎正在工作，虽然我仍然不喜欢波涛汹涌的响应，但我已经接受了 SONY android 4.3 OS 上的这种响应. 在我看来，任何加载了 invensense 传感器的手机都需要应用旋转矢量才能正常工作

# android - 来自硬件键盘的输入失去焦点

> ID：14113062
> 
> 赞同：5
> 
> 时间：2013-01-01T18:28:13.313
> 
> 标签：android, keyboard, android-edittext

我在 TabHost 中有一个片段，其中包含多个文本字段。虚拟键盘可以很好地使用 inputType 集输入文本，但硬件键盘（在 Droid、Droid 2 等上）不起作用。

从我开始在硬件键盘上打字的测试中，EditText 失去焦点，“打字”似乎去了应用程序的其他地方。我已经尝试了以下两种配置：

```
<EditText
     android:id="@+id/editTextPlusFat"
     android:layout_width="match_parent"
     android:layout_height="wrap_content"
     android:layout_weight="0.15"
     android:background="@drawable/textfield_default_holo_light"
     android:digits="0123456789."
     android:ems="10"
     android:hint="@string/str_CalcHintFat"
     android:inputType="number" > 
```

和

```
<EditText
     android:id="@+id/editTextPlusFat"
     android:layout_width="match_parent"
     android:layout_height="wrap_content"
     android:layout_weight="0.15"
     android:background="@drawable/textfield_default_holo_light"
     android:ems="10"
     android:hint="@string/str_CalcHintFat"
     android:inputType="numberDecimal" > 
```

有谁知道为什么会发生这种情况？谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T13:33:21.333

我的解决方案是将 onTouchListener() 添加到每个片段中的所有 EditTexts - 见下文。

```
OnTouchListener foucsHandler = new OnTouchListener() {
    @Override
    public boolean onTouch(View arg0, MotionEvent event) {
        // TODO Auto-generated method stub
        arg0.requestFocusFromTouch();
            return false;
    }
};

currentActivity.findViewById(R.id.editTextPlusServings).setOnTouchListener(foucsHandler);
currentActivity.findViewById(R.id.editTextPlusFoodName).setOnTouchListener(foucsHandler); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-11T20:48:11.713

与[重复问题](https://stackoverflow.com/questions/11277491/edittext-losing-focus-using-hard-keyboard-when-tabhost-is-present-in-activity)一样，更好的答案是通过覆盖 TabHost 的 onTouchModeChanged() 来消除焦点切换。

添加一个扩展 TabHost 的新类：

```
package net.lp.collectionista.ui.views;

import android.content.Context;
import android.util.AttributeSet;
import android.widget.TabHost;

public class BugFixedTabHost extends TabHost {

    public BugFixedTabHost(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public BugFixedTabHost(Context context) {
        super(context);
    }

    @Override
    public void onTouchModeChanged(boolean isInTouchMode) {
        // leave it empty here. It looks that when you use hard keyboard,
        // this method would have be called and the focus will be taken.
    }
} 
```

In your Fragment (or Activity) replace the TabHost type with BugFixedTabHost.

Finally, assuming you use TabHost in layout xmls too, change it to your custom view (full package name):

```
<net.lp.collectionista.ui.views.BugFixedTabHost
    android:id="@android:id/tabhost" ... 
```

I'm not sure why this did not work for @mattdonders, but this is the right way to go. And it is cheaper than attaching listeners to every EditText. By the way, have we figured out yet why mCurrentView.hasFocus() is False or so?

# jquery - 为具有相同名称的所有元素创建具有不同内容的 JQuery 弹出框

> ID：14113063
> 
> 赞同：1
> 
> 时间：2013-01-01T18:28:19.527
> 
> 标签：jquery, html

我想让 JQuery 弹出框的内容依赖于元素的值。弹出框已创建，但没有内容。这就是我正在尝试的（并且它没有为内容产生任何东西）JQuery：

```
 $("[name=teacher]").popover({
    title: 'Teacher',
    content: $(this).attr('value'),
    trigger: "hover"
  }); 
```

HTML：

```
<div name="teacher" value="foo1">Bar1</div>
<div name="teacher" value="foo2">Bar2</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T18:38:55.843

首先，value 和 name 不是 div 元素的有效属性。您应该改用数据属性和类名：

```
<div class="teacher" data-value="foo1">Bar1</div> 
```

您可以像这样访问数据属性：

```
$(this).data('value'); 
```

关于弹出框的东西。$(this) 用于弹出框，而不是您单击的当前元素，这就是内容为空的原因。您需要先手动触发悬停功能，然后显示弹出框：

```
$(".teacher").hover(function () {
    $(this).popover({
        content: $(this).data('value')
    }).popover('show');
}, function () {
    $(this).popover('hide');
}); 
```

​ 演示：http: [//jsfiddle.net/LjmrG/](http://jsfiddle.net/LjmrG/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T18:40:59.733

尝试使用 val() 函数......像这样......

```
$(this).val(); 
```

可能工作...

# mysql - SQL 查询 Ruby On Rails

> ID：14113067
> 
> 赞同：1
> 
> 时间：2013-01-01T18:28:46.463
> 
> 标签：mysql, sql, ruby-on-rails, ruby, select

我有两个模型`team`和`fixture`. 该`fixture`模型有两列`home_team_id`，`away_team`其中包含`team`主键的外键。

我正在尝试进行选择查询，我可以在其中使用夹具表中的`home_team_id`and获取团队名称。`away_team_id`

```
class Fixture < ActiveRecord::Base
    attr_accessible :away_score, :away_team_id, :home_score, :home_team_id, :result, :week
    belongs_to :team, :class_name => Team
end

class Team < ActiveRecord::Base
    attr_accessible :form, :name
    has_many :fixtures, :class_name => Fixture, :foreign_key => :home_team_id
    has_many :fixtures, :class_name => Fixture, :foreign_key => :away_team_id
end 
```

我是否需要在 Fixtures 控制器中执行 SQL 查询，然后如何在我的`fixture`视图中显示它？

这是我尝试查询但没有运气。在我的灯具秀中，我有：

```
<p>
  <b>Home team:</b>
  <%= Team.find_by_sql("SELECT name FROM teams WHERE team.id = fixtures_home_team_id")     %>
</p> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-01T18:39:17.747

Rewrite your models like this:

```
class Fixture < ActiveRecord::Base
  attr_accessible :away_score, :away_team_id, :home_score, :home_team_id, :result, :week
  belongs_to :home_team, :class_name => 'Team'
  belongs_to :away_team, :class_name => 'Team'
end

class Team < ActiveRecord::Base
  attr_accessible :form, :name
  has_many :home_fixtures, :class_name => 'Fixture', :foreign_key => :home_team_id
  has_many :away_fixtures, :class_name => 'Fixture', :foreign_key => :away_team_id
end 
```

Now you can do this in your controller:

```
@fixture = Fixture.find(params[:id]) 
```

And this in your view:

```
<p>Away Team: <%= @fixture.away_team.name %></p>
<p>Home Team: <%= @fixture.home_team.name %></p> 
```

# asp.net-mvc - 缺少 Visual Studio 2012 MVC 本地 DB 添加表菜单选项

> ID：14113069
> 
> 赞同：2
> 
> 时间：2013-01-01T18:28:52.437
> 
> 标签：asp.net-mvc, visual-studio

通常连接到外部数据库，但我想摆弄使用本地数据库创建项目。我使用的是 SQLServer Express 本地数据库，而不是 CE。

我可以使用 EF 添加表，但如果我在服务器资源管理器中右键单击表，我仅有的选项是刷新和属性，即没有添加表菜单选项。同样，如果我右键单击 EF 创建的表之一，我也只会获得刷新和属性菜单选项，因此我无法添加行等。存储过程存在同样的问题；我无法添加任何内容（如果我想使用 EF 和存储过程进行一些测试），因为我只有 Refresh 和 Properties 菜单选项。

跟进：我已将此问题隔离到 VS2012 Professional。当我使用 VS2010 时，它完全按预期工作：我可以添加表和存储过程。执行与 VS2012 相同的步骤会导致没有菜单选项可以添加表或存储过程。我使用 SQLServer 2012 LocalDB 生成了这些测试结果。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-03T01:35:32.963

如果在服务器资源管理器中右键单击表时只看到刷新和属性，则可能需要从[http://msdn.microsoft.com/en-us/data/hh297027](http://msdn.microsoft.com/en-us/data/hh297027)安装 SQL Server Data Tools 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T11:47:03.910

我在使用 Visual Studio 2012 Express for Web 以及 www.asp.net 上的“ASP.Net MVC3 入门”之后遇到了类似的问题。本教程使用了 Sql Server Compact 版本，但我使用的是 SQL Express 2012，因此我更改了连接字符串以使数据源指向我的本地实例 .\SQLExpress2012。该应用程序运行良好，并且能够读取和写入数据库。但是，我无法在 Visual Studio Express 数据库资源管理器中编辑数据库（除了“刷新”和“属性”之外，所有上下文菜单选项都丢失了）。

我发现将连接字符串中的数据源更改为“ **Data Source=(LocalDB)\v11.0;** ”解决了这个问题。我在某处读到，如果您使用 LocalDb 而不是 SQL Server 实例名称，那么它将在您的用户帐户下访问 - 一定是某种权限问题。

整个（工作）连接字符串是：“Data Source=(LocalDB)\v11.0;AttachDBFilename=|DataDirectory|Movies.mdf;Integrated Security=True;”

希望这可以节省一些人拉头发的时间，我现在几乎秃了:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-20T11:18:21.020

我发现在安装 Visual Studio 2013 时，我没有请求“SQL Server Data Tools”功能。

通过从“控制面板”>“程序和功能”重新运行安装程序，使用“修改”选项，我可以添加缺少的功能。完成后，“添加新表”菜单项可用。

# .net - 装饰 System.Console.Out 以添加颜色

> ID：14113070
> 
> 赞同：4
> 
> 时间：2013-01-01T18:29:10.317
> 
> 标签：.net, f#, console-application

我有简单的功能

```
let OutputDebugToConsole () =
    new System.Diagnostics.TextWriterTraceListener(System.Console.Out)
        |> System.Diagnostics.Debug.Listeners.Add |> ignore 
```

将调试输出重定向`Debug.WriteLine`到控制台。

我希望调试输出具有不同的颜色，`Console.ForegroundColor`例如设置为灰色。显然，每次书写后都需要重新设置颜色，以便以标准颜色书写普通文本。我的想法是传递一个不同`TextWriter`的装饰`Write`方法。

首先，这是一种明智的思考问题的方式吗？其次，要做到这一点，我需要重写我的所有方法`TextWriter`还是有不同的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T18:52:00.550

Console.ForegroundColor 具有属性 getter 和 setter，因此在*技术上*可以简单地存储旧颜色、分配、写入和恢复旧颜色。

然而，这样做不是线程安全的。另一个线程也可以使用 Console.Write 并分配 ForegroundColor 属性来获得它自己的首选颜色。这是一场竞赛，您的记录器可能最终会使用其他线程选择的颜色进行书写。反之亦然。有一个锁可以防止两个线程将文本写入控制台并使它们的输出混合在一起，但是为时已晚。没有简单的方法可以解决这个问题，除了让您的记录器使用 pinvoke 以便它根本不需要使用 ForegroundColor。

如果有的话，那只是一个小细节。这就是为什么最好使用处理这些讨厌的小细节的日志库。以 NLog 为例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T21:08:11.413

您可以使用该函数以相当简单的方式实现这一点`Printf.kprintf`，如本博客文章所示：[Colored printf](https://blogs.msdn.com/b/chrsmith/archive/2008/10/01/f-zen.aspx?Redirected=true)

基本上，`Printf.kprintf`接受应用格式化字符串的延续；我链接的博客文章显示了如何传递设置控制台颜色的延续，打印字符串，然后在返回之前恢复原始颜色。

正如 Hans Passant 在他的回答中所写，设置/恢复控制台颜色存在线程安全问题，因此您应该确保相应地设计您的应用程序（如果您使用多线程或 F#`async`工作流程）。

# media-queries - 三星 Galaxy Tab 7'' 媒体查询？

> ID：14113072
> 
> 赞同：1
> 
> 时间：2013-01-01T18:29:24.880
> 
> 标签：media-queries, galaxy-tab

这适用于视频，不适用于图像。你知道一些更好的查询吗？

```
@media (max-device-width: 1024px)
and (min-device-width: 600px)
and (orientation: landscape) { ... } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T01:10:24.010

如果您希望视频、图像、其他媒体具有响应性，则需要添加

```
video, embed, object, iframe, img {
width: 100%;
max-width: 100%;
} 
```

另外，为了确保您的视频大小成比例，您应该查看[http://fitvidsjs.com/](http://fitvidsjs.com/)

# directx - Direct2D Direct3d11 互操作 - 设备会丢失吗？

> ID：14113073
> 
> 赞同：3
> 
> 时间：2013-01-01T18:29:29.483
> 
> 标签：directx, direct2d, direct3d11

在我的应用程序中，我使用 direct2d 写入共享 (d3d11/d3d10) 纹理。这是我的应用程序中使用的唯一一种渲染目标。由于设备可能会在 direct2d (D2DERR_RECREATE_RENDER_TARGET) 中丢失，因此存在大量代码来抽象和/或重新创建设备相关资源。但是，我还没有看到这种情况实际发生，并且很好奇我是否在浪费精力。在这种情况下，渲染目标是否真的会丢失，或者我是否受到保护，因为纹理是通过 d3d11 创建的（尽管与 d3d10 共享）？如果是这样，是否有人知道导致渲染目标丢失的可重现、简单的方法，以便我至少可以测试处理这种情况的代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T16:03:13.820

这不是白费力气。很多场景都可能导致设备丢失。出于测试目的，一种简单的方法是更新您的图形驱动程序。您的应用程序应该优雅地处理这个问题。如果您的图形驱动程序崩溃或 Windows 更新在后台安装新版本，它也可能在幕后发生。还有其他情况，但这些可能是最常见的。

您可以使用设备管理器快速回滚和更新驱动程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T12:51:01.300

当另一个程序使用任何版本的 D3D API 来全屏和返回时，D2D 窗口渲染目标总是会丢失（独占模式，而不是自 D3D10/11 以来支持的新窗口模式）。在 D3D11 中，我认为您必须更改分辨率才能使 D2D 渲染目标丢失。

因此，如果您在这种情况下没有获得 D2DERR_RECREATE_RENDER_TARGET HRESULT，那么在向您的纹理渲染目标呈现时，您可能不需要重新创建渲染目标，但我仍然会处理 D2DERR_RECREATE_RENDER_TARGET。要对其进行测试，您可以在开发过程中将纹理渲染目标替换为窗口渲染目标。

# asp.net-mvc - 使用 Ajax.BeginForm 的 MVC4 不将 ViewModel 发送到控制器？

> ID：14113074
> 
> 赞同：0
> 
> 时间：2013-01-01T18:29:29.630
> 
> 标签：asp.net-mvc, asp.net-mvc-4, unobtrusive-javascript

这是发送到服务器的内容：

```
http://localhost:3182/Admin/UserAdmin/Save?Count=0&Keys=System.Collections.Generic.Dictionary%602%2BKeyCollection%5BSystem.String%2CSystem.Object%5D&Values=System.Collections.Generic.Dictionary%602%2BValueCollection%5BSystem.String%2CSystem.Object%5D 
```

我正在使用不显眼的 jquery.unobtrusive-ajax，它在我项目的其他页面上运行良好。我没有对 BeginForm 助手做任何花哨的事情。实际上这很简单。如果有帮助，我可以发布它，但没有太多。

我认为另一个库可能会干扰我的代码，所以我删除了其他脚本，它仍然做同样的事情。这很奇怪。有没有人见过这个并且知道如何解决它？

这是整个视图：

```
@using YogaDiVita.Ui.Helpers
@model YogaDiVita.Domain.YogaDiVitaContext.Model.User
@{
    ViewBag.Title = "Profile";
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
    var isInstructor = (bool)ViewBag.IsInstructor;

}

<link href="@Url.ContentArea("~/Scripts/plugins/fineUploader/fineuploader.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Scripts/plugins/jCrop/css/jquery.Jcrop.min.css")" rel="stylesheet"
    type="text/css" />
<div class="row-fluid">
    <div class="span12">
        <h3 class="heading">User Profile</h3>
        <div class="row-fluid">
            <div class="span8">
                @using (Ajax.BeginForm("Save",new RouteValueDictionary(), new AjaxOptions
               {
                   HttpMethod = "POST",                       
                   OnSuccess = "OnSuccess",
                   OnFailure = "OnFailure"
               }, new { @class = "form-horizontal well" }))
                {
                    @Html.HiddenFor(u => u.Id)
                    @Html.HiddenFor(u => u.CreatedById)
                    @Html.HiddenFor(u => u.ModifiedById)
                    @Html.HiddenFor(u => u.Username)
                    @Html.Hidden("isInstructor", isInstructor)
                    <fieldset>
                        <div class="control-group formSep">
                            <label class="control-label">
                                Username</label>
                            <div class="controls text_line">
                                <strong>@Model.Username</strong> <a href="/Admin/UserAdmin/ResetPassword/@Model.Id" class="btn resetPasswordWindow">Reset Password</a>
                            </div>
                        </div>
                        <div class="control-group formSep">
                            <label for="fileinput" class="control-label">
                                User avatar</label>
                            <div class="controls">
                                <div data-fileupload="image" class="fileupload fileupload-new">
                                    <div style="width: 80px; height: 80px;" class="fileupload-new thumbnail">
                                        <img src="http://www.placehold.it/108x108/EFEFEF/AAAAAA " alt="" id="userAvatar">
                                    </div>
                                    <a href="/Admin/UserAdmin/ImageUpload/@Model.Id" class="btn avatarUpload">Upload New
                                        Image</a>
                                </div>
                            </div>
                        </div>
                        <div class="control-group formSep">
                            <label for="FirstName" class="control-label">
                                First Name</label>
                            <div class="controls">
                                @Html.TextBoxFor(u => u.FirstName, new { @class = "input-xlarge" })
                            </div>
                        </div>
                        <div class="control-group formSep">
                            <label for="FirstName" class="control-label">
                                Last Name</label>
                            <div class="controls">
                                @Html.TextBoxFor(u => u.LastName, new { @class = "input-xlarge" })
                            </div>
                        </div>
                        <div class="control-group formSep">
                            <label for="u_email" class="control-label">
                                Email Address</label>
                            <div class="controls">
                                @Html.TextBoxFor(u => u.EmailAddress, new { @class = "input-xlarge" })
                            </div>
                        </div>
                        <div class="control-group formSep">
                            <label for="u_email" class="control-label">
                                Telephone Number</label>
                            <div class="controls">
                                @Html.TextBoxFor(u => u.TelephoneNumber, new { @class = "input-xlarge" })
                            </div>
                        </div>
                        <div class="control-group formSep">
                            <label for="u_email" class="control-label">
                                Mobile Number</label>
                            <div class="controls">
                                @Html.TextBoxFor(u => u.MobileTelephoneNumber, new { @class = "input-xlarge" })
                            </div>
                        </div>
                        <div class="control-group formSep">
                            <label for="u_email" class="control-label">
                                Mobile Number</label>
                            <div class="controls">
                                @Html.TextBoxFor(u => u.MobileTelephoneNumber, new { @class = "input-xlarge" })
                            </div>
                        </div>
                        <div class="control-group formSep">
                            <label for="u_email" class="control-label">
                                Is Instructor</label>
                            <div class="controls">
                                @Html.CheckBox("cbIsInstructor", isInstructor)
                            </div>
                        </div>
                        <div class="control-group">
                            <div class="controls">
                                <button class="btn btn-gebo" type="submit">
                                    Save changes</button>

                            </div>
                        </div>
                    </fieldset>

                }
            </div>
        </div>
    </div>
</div>

<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.js"
    type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/plugins/jcrop/jquery.Jcrop.min.js")" type="text/javascript"></script>
<script src="@Url.ContentArea("~/Scripts/plugins/fineUploader/util.js")"></script>
<script src="@Url.ContentArea("~/Scripts/plugins/fineUploader/button.js")"></script>
<script src="@Url.ContentArea("~/Scripts/plugins/fineUploader/handler.base.js")"></script>
<script src="@Url.ContentArea("~/Scripts/plugins/fineUploader/handler.form.js")"></script>
<script src="@Url.ContentArea("~/Scripts/plugins/fineUploader/handler.xhr.js")"></script>
<script src="@Url.ContentArea("~/Scripts/plugins/fineUploader/uploader.basic.js")"></script>
<script src="@Url.ContentArea("~/Scripts/plugins/fineUploader/dnd.js")"></script>
<script src="@Url.ContentArea("~/Scripts/plugins/fineUploader/uploader.js")"></script>
<script src="@Url.ContentArea("~/Scripts/plugins/fineUploader/jquery-plugin.js")"></script>

<script>
    $(function () {

        loadUserAvatar();
        $('.avatarUpload').colorbox({
            initialHeight: '520',
            initialWidth: '650',
            iframe: false,
            opacity: 0.45,
            onClosed: function () {
                loadUserAvatar();
            }
        });

        $('.resetPasswordWindow').colorbox({
            initialHeight: '0',
            initialWidth: '0',
            iframe: false,
            opacity: 0.45,
            onClosed: function () {

            },
            onComplete: function () {

                $.validator.addMethod("passwordsMustMatch", function (value, element) {
                    return $('#validatePassword').val() == $('#password').val();
                }, "The passwords do not match");

                $('.resetPasswordForm').validate({
                    onkeyup: false,
                    errorClass: 'error',
                    validClass: 'valid',
                    errorPlacement: function (error, element) {
                        error.appendTo(element.closest("div.controls"));
                    },
                    highlight: function (element) {
                        $(element).closest("div.control-group").addClass("error f_error");
                        var thisStep = $(element).closest('form').prev('ul').find('.current-step');
                        thisStep.addClass('error-image');
                    },
                    unhighlight: function (element) {
                        $(element).closest("div.control-group").removeClass("error f_error");
                        if (!$(element).closest('form').find('div.error').length) {
                            var thisStep = $(element).closest('form').prev('ul').find('.current-step');
                            thisStep.removeClass('error-image');
                        };
                    },
                    rules: {
                        password: { required: true, minlength: 6, passwordsMustMatch: true },
                        validatePassword: { required: true, minlength: 6, passwordsMustMatch: true }
                    },
                    invalidHandler: function (form, validator) {
                        $.sticky("There are some errors. Please corect them and submit again.", { autoclose: 5000, position: "top-right", type: "st-error" });
                    }
                });
            }
        });

    });

    function loadUserAvatar(parameters) {
        $.ajax({
            url: '/Admin/Avatar/AvatarLoad/@Model.Id',
            type: 'POST',
            cache: false,
            timeout: 100000,
            error: function (xhr, status, error) {
                alert(error + " " + status);
            },
            success: function (data) {
                $("#userAvatar").attr("src", data.Image.ThumbNailRelativePath);
            }

        });
    }

    function OnSuccess(parameters) {
        $.sticky("The user profile has been updated successfully.", { autoclose: 5000, position: "top-right", type: "st-error" });
    }
    function OnFailure(parameters) {
        $.sticky("There was an error saving the profile. </br>" + parameters.message, { autoclose: 5000, position: "top-right", type: "st-error" });
    }
</script> 
```

**更新：**

在对发生的事情进行了一些研究之后，我在发布后收到了这个错误：`An item with the same key has already been added`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T23:15:17.357

您不能直接绑定到集合 - 请参阅[ASP.NET Wire Format for Model Binding to Arrays, Lists, Collections, Dictionaries](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)，了解如何完成您正在尝试做的事情的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:15:17.047

嗯，我发现了这个问题。真的有点傻。问题是我的模型上有一个界面。属性用户名有 2 个版本。一个命名为 UserName（大写 N），另一个命名为 Username（小写 n）。[这篇博文有帮助](http://www.roxinnet.com/roxin/post/2010/05/02/ASPNET-MVC-2-An-item-with-the-same-key-has-already-been-added.aspx)。

# android - 应用两个连续 setContentView 时第一个视图不可见

> ID：14113080
> 
> 赞同：1
> 
> 时间：2013-01-01T18:30:14.433
> 
> 标签：android

在加载我的 android 应用程序期间，我想在启动的前 2.3 秒内显示一个徽标，我认为它比在启动后看到一个 UI 更难看。因此，在我的代码中，我首先制作了一个带有徽标（飞溅）的 setContentView，然后是带有 UI（主）的 setContentView。pb 没有看到徽标屏幕，而是看到了黑屏。我在主线程中这样做，所以我不明白。你有问题的解释，如果可能的话，有解决方法吗？

Activity 的 onCreate() 不能正常工作如下（黑屏 5 秒后可以看到 UI，没有异常抛出）：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash); //doesn't work
    Log.i(TAG, Thread.currentThread().getName());
    //this.r
    try {
        Thread.sleep(5000);
    } catch (InterruptedException e) {
        Log.i(TAG, Thread.currentThread().getName() + e.toString() );
    }
    setContentView(R.layout.main); //work OK
} 
```

}

如果我只是用下面的代码离开课堂，没有问题，我可以看到“第一个”并且只有视图：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash); //work OK 
```

} }

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T18:34:51.247

> pb 没有看到徽标屏幕，而是看到了黑屏。

`Thread.sleep()`是错误的方法。您正在阻止*一切*发生，包括显示您的启动画面。

> Activity 的 onCreate() 不能正常工作如下（黑屏 5 秒后可以看到 UI，没有异常抛出）

布局仅在调用*后* `onResume()`显示，因此通过阻塞 UI 线程，`onCreate()`您创建了空白屏幕。然后当线程恢复时，两个布局都被绘制，但你永远不会看到启动屏幕，因为下一个`setContentView()`是在几毫秒后调用的。

* * *

虽然使用闪屏的想法值得商榷，但您应该在五秒后使用回调来更改布局。使用 Handler 和 Runnable 来改变屏幕。

插入我的个人意见，我会拒绝任何需要 5 秒才能加载的应用程序。每次打开应用程序时，我都有比看徽标甚至 2-3 秒更好的事情要做。

* * *

虽然我喜欢 ρяσѕρєя K 的回答，但我会扮演魔鬼的拥护者。我更喜欢使用根视图的内置处理程序：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);
    findViewById(android.R.id.content).postDelayed(new Runnable() {
        @Override
        public void run() {
            setContentView(R.layout.main);
        }
    }, 1000);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-01T18:35:20.453

您可以在主 UI 线程中使用`TimerTask`而不是使用`Thread.sleep`for 在主 UI 线程中进行等待：

```
new Timer().schedule(new TimerTask() {
    @Override
    public void run() {
        // use runOnUiThread for Updating Ui elements
        Your_Activity.this.runOnUiThread(new Runnable() {
            @Override
            public void run() {
                 // set Activity Next layout Here
                setContentView(R.layout.main);
            }
        });
    }
}, 5000); 
```

# php - Ajax 文件上传在 Chrome 中有效，但在 Firefox 中无效

> ID：14113082
> 
> 赞同：3
> 
> 时间：2013-01-01T18:30:16.453
> 
> 标签：php, javascript, jquery, xmlhttprequest-level2

使用 XMLHttpRequest Level 2 我想上传一个文件。我正在使用 jQuery，所以我想优先使用 jQuery。

所以我写了以下代码（咖啡脚本，但任何熟悉 javascript 的人都应该很容易阅读）

```
fileToUpload = event.currentTarget.files[0]

data = new FormData()
data.append("uploadedfile", fileToUpload) 

$.ajax({
    type: 'POST',
    url: url,
    data: data,
    contentType: false,
    processData: false,
    mimeType: 'multipart/form-data',
}) 
```

使用该代码，在服务器端使用 PHP 我做一个`

使用 Firefox 17.0.1 我什么也得不到。$_FILES 为空，使用 Chromium 22.0 我得到了上传的文件（格式很奇怪，但至少有一些）

```
Array
(
    [uploadedfile] => Array
        (
            [name] => filename.txt
            [type] => application/octet-stream
            [tmp_name] => /tmp/phpWwenhc
            [error] => 0
            [size] => 189
        )

) 
```

有谁知道这是否是 Firefox 的错误？有解决方法吗？难道我做错了什么？我搜索了一个类似的问题，但我发现的所有建议答案都不适用于我（不适用于 Firefox，没有使用 xhr 2 级等）

提前致谢。

***请：***我不关心 IE 或旧版本。iframe 解决方案和插件都不是。只是 XmlHttpRequest 级别 2。对于那些没有听说过的人，请查看： [https ://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData/Using_FormData_Objects](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData/Using_FormData_Objects)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T22:24:06.380

删除该`mimeType`参数，浏览器将生成具有所需边界的正确 mime 类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T19:11:51.877

我刚刚成功了。真的没有办法通过 AJAX 上传文件。最好直接参考`.php`文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T23:12:23.650

您可能需要将文件视为一个数组才能让 Firefox 和 PHP 理解。尝试更改上传字段的名称：

```
data.append("uploadedfiles[]", fileToUpload); 
```

# apache - 配置 apache 别名和子域 vhost

> ID：14113089
> 
> 赞同：1
> 
> 时间：2013-01-01T18:31:14.987
> 
> 标签：apache

我有 mydomain.com，我创建了 2 个网站，一个使用 wymfony2，另一个使用 wordpress。

```
admin.mydomain.com => symfony2 website
www.mydomain.com => wordpress website
mydomain.com => redirect on www.mydomain.com 
```

我的 wordpress 有一个 iframe，由于安全原因，admin.mydomain.com 无法与 www.mydomain.com 对话。这给我带来了严重的问题（对于好奇的人，当您共享链接时，我会使用 gmail 之类的 url 锚点转到此 iframe 中的特定页面）

symfony2 的优点是它不关心 url。它无处不在。我如何为以下内容创建别名：

```
www.mydomain.com/administration => symfony2 website 
```

我尝试了很多东西，但我得到的最好结果是这个新网址上的 403error。

# javascript - IntelliSense 不适用于 JavaScript

> ID：14113095
> 
> 赞同：2
> 
> 时间：2013-01-01T18:32:18.377
> 
> 标签：javascript, visual-studio-2010, intellisense

键入时，IntelliSense 通常会为我提供匹配函数和变量的列表。选择最匹配的那个 - 例如，如果我点击空格键，则插入函数/变量名称的其余部分。
不幸的是，这似乎不适用于 JavaScript。IntelliSense 确实为我提供了函数/变量列表，但我必须点击 [enter] 才能插入完整的单词。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T18:32:18.377

您必须打开“工具”=>“选项”。在打开的对话框中，从左栏中选择“文本编辑器”=>“JScript”=>“杂项”。现在禁用“仅使用 Tab 或 Enter 提交”选项。

# r - 从 r 中的第 3 列开始，每隔一列添加矩阵

> ID：14113100
> 
> 赞同：4
> 
> 时间：2013-01-01T18:33:15.810
> 
> 标签：r

我想在以下形式的矩阵中为每第二列添加每一行的值：

```
1  1  100 2 104 4 200
2  1  100 2 103 3 203
3  1  100 3 101 3 304
4  1  100 4 105 2 201 
```

在这里，我想添加第三列，然后每隔一列，产生以下输出：

```
404
406
505
406 
```

这可以在没有 for 循环的情况下完成吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T18:38:44.217

假设您的数据框名为`df`.

```
 apply(df,1,function(x) sum(x[seq(3,length(x),2)]))
[1] 404 406 505 406 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-01T20:04:00.770

你可以做：

```
rowSums(df[,-c(1,2)][, c(TRUE, FALSE)])
# [1] 404 406 505 406 
```

where`[, -c(1,2)]`丢弃前两列并`[, c(TRUE, FALSE)]`保留每隔一列。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T09:54:11.270

```
rowSums(df[,seq(from=3, to=ncol(df), by=2)]) 
```

# c# - 使用 glLoadIdentity 后没有纹理

> ID：14113106
> 
> 赞同：0
> 
> 时间：2013-01-01T18:33:39.747
> 
> 标签：c#, opengl, tao-framework

我使用Tao Framework，但使用时出现问题 `glLoadIdentity()`，我正在`gluDisk`成功将图片加载到a，我可以看到图片，然后当我尝试使用`gluLookAt`已加载的图片更改相机的位置时`gluDisk`消失了，而是，我看到的只是一种颜色，提醒我加载的图片的背景颜色，在使用调试后我看到它是因为`glLoadIdentity()`功能而发生的。

这是重绘磁盘的函数：

```
Gl.glClearColor(0F, 0F, 0F, 1.0F);

while (true)
{
    world.drawWorld();
    Application.DoEvents();
    Thread.Sleep(20);
} 
```

这是我更改外观的代码：

```
Gl.glClear(Gl.GL_COLOR_BUFFER_BIT | Gl.GL_DEPTH_BUFFER_BIT);
Gl.glMatrixMode(Gl.GL_MODELVIEW); //Switch to the drawing perspective
Gl.glLoadIdentity(); 
switch (Convert.ToInt32(e.KeyChar))
{
    //down arrow
    case 76:
        rotAngle -= 0.5f;
        rotY -= 0.1f;
        //rotX = 0;
        break;
    //up arrow
    case 82:
        rotAngle += 0.5f;
        rotY += 0.1f;
        //rotX = 0;
        break;
    // left arrow
    case 85:
        rotAngle -= 0.5f;
        //rotY = 0;
        rotX -= 0.1f;
        break;
    //right arrow
    case 68:
        rotAngle += 0.5f;
        //rotY = 0;
        rotX += 0.1f;
        break;

    case 'a':
        xMove -= 1;
        Glu.gluLookAt(xMove, yMove, zMove, xMove + 2, yMove + 2, zMove + 2, 0, 1, 0);
        break;

    case 'd':
        xMove += 1;
        Glu.gluLookAt(xMove, yMove, zMove, xMove + 2, yMove + 2, zMove + 2, 0, 1, 0);
        break;

    case 'w':
        yMove +=1;
        Glu.gluLookAt(xMove, yMove, zMove, xMove + 2, yMove + 2, zMove + 2, 0, 1, 0);
        break;

    case 's':
        yMove -= 1;
        Glu.gluLookAt(xMove, yMove, zMove, xMove + 2, yMove + 2, zMove + 2, 0, 1, 0);
        break;

    case 'z':

        zMove += 1F;
        Glu.gluLookAt(xMove, yMove, zMove, 0, 0, 0, 0, 1, 0);
        break;

    case 'x':
        zMove -= 1F;
        Glu.gluLookAt(xMove, yMove, zMove, 0, 0, 0, 0, 1, 0);
        break;

    case '0':
        //zMove -= 1F;
        Glu.gluLookAt(1, 1, 1, 0, 0, 0, 0, 1, 0);
        break; 
```

这是我的绘图代码：

```
Gl.glClear(Gl.GL_COLOR_BUFFER_BIT);

Gl.glEnable(Gl.GL_TEXTURE_2D);
LoadTexture();
Glu.GLUquadric qobj = Glu.gluNewQuadric();
Glu.gluQuadricTexture(qobj, Gl.GL_TRUE);
//Glut.glutSetCursor(Glut.GLUT_CURSOR_NONE);
Gl.glPushMatrix();
Gl.glRotatef(80f, 1.0f, 0.0f, 0.0f);
Glu.gluDisk (qobj,0, 800, 900, 300);
Gl.glPopMatrix(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T18:58:00.680

***从不（！）将 OpenGL 状态更改函数放入事件处理程序中！***现在你有这个。在您的按键处理程序中更改一些变量，然后发出一个重绘事件并使用它来适当地设置绘图函数中的矩阵。

glLoadIdentity 仅与此有关，即您在不属于它的地方调用它。OpenGL 是绘图 API 而不是场景图。

# php - 如何获取从 mysql 获取的图像作为正文的背景？

> ID：14113108
> 
> 赞同：-1
> 
> 时间：2013-01-01T18:33:54.890
> 
> 标签：php, html, mysql, css

> **可能重复：**
> [如何像在 Twitter 上一样在后台显示存储在数据库中的重复图像？](https://stackoverflow.com/questions/14109295/how-to-display-a-repeated-image-stored-in-database-on-background-as-on-twitter)

我想以与 twitter 上相同的方式在背景上显示图像（通过使用 CSS 重复），但问题是我从 MySql 数据库中检索它并且 CSS 无法处理背景上的 src 标记，我使用了以下代码和链接

```
body{
    background:url(<?php $lastid=$_SESSION['lastid']; echo "get_test.php?id=$lastid";?>)     repeat;

   } 
```

[http://www.webdeveloper.com/forum/showthread.php?210964-Set-CSS-Background-Image-with-PHP](http://www.webdeveloper.com/forum/showthread.php?210964-Set-CSS-Background-Image-with-PHP)

[http://net.tutsplus.com/tutorials/php/supercharge-your-css-with-php-under-the-hood/](http://net.tutsplus.com/tutorials/php/supercharge-your-css-with-php-under-the-hood/)

我在主站点上的整个代码

```
<html>
<head>
<?php
$temp = tmpfile();
?>
<style>
  body{
    background:url(<?php $lastid=$_SESSION['lastid']; echo "get_test.php?id=$lastid"; ?>) repeat;

   }

</style>
</head>
<body>
<form action="" method="POST" enctype="multipart/form-data">
File:<br>
<input type="file" name="image">

<input type="submit" name="submit" value="Upload">

</form>

<?php

mysql_connect("host", "nam", "database") or die(mysql_error());
mysql_select_db("database") or die(mysql_error());

$file= $_FILES['image']['tmp_name'];

$image = addslashes(file_get_contents($_FILES['image']['tmp_name']));
$image_name = addslashes($_FILES['image']['name']);
$image_size = addslashes(getimagesize($_FILES['image']['tmp_name']));

if($image_size==FALSE)
{
echo "thats not an image";
}

else
{

mysql_query("INSERT INTO image_store VALUES ('','$image_name','$image')") or die(mysql_error());
 $lastid=mysql_insert_id();

$_SESSION['lastid']=$lastid;
 echo "the image is"."<image src=get_test.php?id=$lastid>";

}

?>
</body> 
```

get_test.php 上的代码是

```
<?php
mysql_connect("host", "nam", "database") or die(mysql_error());
mysql_select_db("database") or die(mysql_error());

$id = addslashes($_REQUEST['id']);

$image=mysql_query("SELECT * FROM image_store WHERE id=$id ");
$image = mysql_fetch_assoc($image);
$image = $image['image'];

header("Content-Type: image/jpeg");
echo $image;

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T18:49:42.843

要回答这个问题：

1：在最后一个分号后加一个空格。这在以前引起了人们的问题。

2：要停止背景重复，请使用该`background-repeat`属性，并将其设置为`no-repeat`，如下所示：

```
background-repeat: no-repeat; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T20:24:37.480

为了设置/使用`$_SESSION`变量（即`$_SESSION['lastid']`，您需要在每个页面上启动一个会话-

```
<?php
session_start();
?>
<html>
<head>
<?php
$temp = tmpfile();
?>
<style>
  body{
    background:url(<?php $lastid=$_SESSION['lastid']; echo "get_test.php?id=$lastid"; ?>) repeat;
   }
</style>
</head>
<body>
...
</body> 
```

# html - 鼠标悬停子菜单

> ID：14113109
> 
> 赞同：0
> 
> 时间：2013-01-01T18:33:56.200
> 
> 标签：html, css, menu, hover

当鼠标悬停在父“MON PROGRAMME”的链接上时，如何使子菜单“PROGRAMMATION”和“RÉSEAUTIQUE”可见？

这是html代码：

```
<div class="menu">          
<ul>            
    <li><a href="Index.html">ACCUEIL</a></li>
    <div class="sousMenu">
        <li><a>MON PROGRAMME</a>
            <ul>
                <li><a href="Programmation.html">PROGRAMMATION</a></li>
                <li><a href="Reseautique.html">RÉSEAUTIQUE</a></li>
            </ul> 
        </li>
    </div>
    <li><a href="College.html">MON COLLÈGE</a></li>
    <li><a href="Apropos.html">À PROPOS</a></li>                
</ul>           
</div> 
```

这是我的 CSS 代码：

```
.sousMenu:hover li a  > li ul li
{
    display: block;
}

.sousMenu li ul li
{
    position: absolute;
    top: 40px;
    display: none;
    list-style-type: none;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T18:46:20.647

将您的 HTML 更改为：

```
<div class="menu">          
<ul>            
    <li><a href="Index.html">ACCUEIL</a></li>
    <li class="sousMenu"><a>MON PROGRAMME</a>
        <ul>
            <li><a href="Programmation.html">PROGRAMMATION</a></li>
            <li><a href="Reseautique.html">RÉSEAUTIQUE</a></li>
        </ul>
    </li>
    <li><a href="College.html">MON COLLÈGE</a></li>
    <li><a href="Apropos.html">À PROPOS</a></li>                
</ul>
</div>​ 
```

而你的CSS：

```
.sousMenu:hover ul {
    display: block;
}
.sousMenu ul {
    top: 40px;
    display: none;
    list-style-type: none;
}​ 
```

你可以在这里看到它的工作原理：http: [//jsfiddle.net/AuJeF/](http://jsfiddle.net/AuJeF/)

# sql - Magento 自定义模块中的完整性约束违规

> ID：14113116
> 
> 赞同：4
> 
> 时间：2013-01-01T18:34:53.490
> 
> 标签：sql, magento, exception, referential-integrity

我有一个与[在 Magento 中创建产品的完整性约束违规](https://stackoverflow.com/questions/13113019)类似的问题（未回答），但我正在创建一个自定义观察者，该观察者挂钩到 catalog_product_save_after 事件 - 基于本教程： http: [//fishpig.co.uk/blog/custom-tabs -magento-product-admin.html](http://fishpig.co.uk/blog/custom-tabs-magento-product-admin.html)

但是，每当保存新产品时，我都会收到此错误：

```
SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '22-1' for key 'UNQ_CATALOGINVENTORY_STOCK_ITEM_PRODUCT_ID_STOCK_ID' 
```

config.xml 如下所示：

```
<adminhtml>
    <events>
        <catalog_product_save_after>
            <observers>
                <a1web_save_product_data>
                    <type>singleton</type>
                    <class>metricimperial/observer</class>
                    <method>saveProductData</method>
                </a1web_save_product_data>
            </observers>
        </catalog_product_save_after>
    </events>
</adminhtml> 
```

类的大纲是这样的：

```
<?php

class A1web_MetricImperialConverter_Model_Observer
{
    /**
     * Flag to stop observer executing more than once
     *
     * @var static bool
     */
    static protected $_singletonFlag = false;

     * @param Varien_Event_Observer $observer
     */
    public function saveProductData(Varien_Event_Observer $observer)
    {
        if (!self::$_singletonFlag) {
               self::$_singletonFlag = true;

                $product = $observer->getEvent()->getProduct();

                //Custom updates made to product object here

                $product->save();
            }
            catch (Exception $e) {
                Mage::getSingleton('adminhtml/session')->addError($e->getMessage());
            }
        }
    }

    /**
     * Retrieve the product model
     *
     * @return Mage_Catalog_Model_Product $product
     */
    public function getProduct()
    {
        return Mage::registry('product');
    }

    /**
     * Shortcut to getRequest
     *
     */
    protected function _getRequest()
    {
        return Mage::app()->getRequest();
    }
} 
```

使用我添加的自定义产品数据正确保存了产品 - 一旦保存了产品，该错误就不会在后续保存相同产品时发生。仅在首次创建产品时才会发生错误。

提前致谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-04T07:11:17.380

而不是使用`$product->save()`资源模型尝试使用 la `$product->getResource()->save($product)`。

原因是`$product->save()`将重新触发所有保存事件，因此运行保存 cataloginventory_stock 并引发错误的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-10T15:23:32.320

在这种情况下，我建议**不要**使用该`catalog_product_save_after`事件。相反，尝试使用 *在*将 POST 数据应用到产品之后、但*在*调用之前`catalog_product_prepare_save`触发的 which 。这样你就不必纠结于储蓄或丑陋的事情了！ **`->save()``$_singletonFlag`**

 **此外，您还可以在观察者事件中`catalog_product_prepare_save`获得**HTTP 请求对象。**不需要`Mage::app()->getRequest()`。哇！**

# windows-8 - 有没有办法查看物理键盘是否连接到 Windows 8 设备？

> ID：14113118
> 
> 赞同：9
> 
> 时间：2013-01-01T18:35:12.850
> 
> 标签：windows-8

我正在编写一个 Windows 8 游戏。该游戏可在 Windows 7、Windows Phone 和 XBox 上运行。

如果连接了键盘，我想显示键盘提示（例如“按 Esc 退出”）

由于 Windows 8 可以是台式机、笔记本电脑或平板电脑，因此可能会或可能不会连接物理键盘。有没有办法以编程方式确定这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-01T23:10:30.587

当然，请[在此处阅读此快速入门](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh868250)

```
private void GetKeyboardProperties()
{
    KeyboardCapabilities keyboardCapabilities = new Windows.Devices.Input.KeyboardCapabilities();
    KeyboardPresent.Text = keyboardCapabilities.KeyboardPresent != 0 ? "Yes" : "No";
} 
```

或者，如果您是 html5/js 开发人员，请查看[此处](http://msdn.microsoft.com/en-us/library/windows/apps/Hh465379)。

# iphone - 如何测试 Geoloqi 推送通知是否有效？

> ID：14113121
> 
> 赞同：1
> 
> 时间：2013-01-01T18:35:31.507
> 
> 标签：iphone, objective-c, ios, location, push-notification

对于普通推送通知，当向站点添加新内容时，会向设备发送推送通知。因此，如果我想测试推送通知是否有效，我该怎么做？

我尝试使用我在 iPhone 上收到的当前位置在控制台上创建触发器和 Geonotes。然后尝试运行触发器希望收到推送通知，但不幸的是我没有收到任何推送通知。

我究竟做错了什么？

我希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T18:33:58.847

您可以使用[message/send](https://developers.geoloqi.com/api/message/send)方法测试直接向设备发送消息。

最简单的方法是从您的应用程序中登录您自己的 Geoloqi 帐户，然后使用[API 控制台](https://developers.geoloqi.com/api/console?method=message/send)向您的设备发送消息。您当然也可以向其他帐户发送消息，只需查看消息/发送的文档页面即可。

# php - 数组中的php未设置键使脚本失败

> ID：14113122
> 
> 赞同：0
> 
> 时间：2013-01-01T18:35:32.723
> 
> 标签：php, arrays, key, unset

我在数组键上调用 unset 时遇到问题，这里是非工作代码

```
 $updatedcontact = $_POST;

 unset($updatedcontact['_id']; 
```

我知道 _id 键存在（即使它不会我猜我的脚本仍然可以工作），因为当我评论未设置行和 var_dump 数组时，我得到了这个：

```
 array (size=9)
 '_id' => string '50e1aff66d2a0fcf48000000' (length=24) 
```

当未设置的行没有被评论时，我只是得到一个空白页

我阅读了 php 手册并进行了搜索，但该死的看起来我做的对我来说是正确的（并且它在我编写的测试脚本中有效），希望有人会发现我的初学者的错误。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T18:37:50.487

您缺少右`unset()`括号

```
$updatedcontact = $_POST;

unset($updatedcontact['_id']);
                          --^-- 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T18:38:32.420

语法错误，关闭）丢失

```
unset($updatedcontact['_id']; 
```

应该

```
unset($updatedcontact['_id']); 
```

# php - 为不同的数据库引擎实现数据映射器时如何防止重复？

> ID：14113123
> 
> 赞同：3
> 
> 时间：2013-01-01T18:35:51.410
> 
> 标签：php, sql, oop, datamapper, data-mapping

在我的项目中，我想构建对多个数据库引擎的支持。我通过放置在模型层中的数据映射器来实现这一点。一个简单的例子看起来像（对不起代码墙，如果你想了解要点，请跳到最后）：

**用户**

```
namespace Application\Model;

use Application\Model\Mapper;

class User
{
    private $mapper;

    private $id;

    public function __construct(Mapper $mapper, $id)
    {
        $this->mapper = $mapper;
    }

    public function setPassword($password)
    {
        $this->mapper->updatePassword($this->id, $password);
    }
} 
```

**映射器接口**

```
namespace Application\Model;

interface UserMapper
{
    public function updatePassword($id, $password);
} 
```

**MySQL 映射器**

```
namespace Application\Model;

use Application\Model\Mapper;

class UserMysqlMapper implements Mapper
{
    private $connection;

    public function __construct(\PDO $connection)
    {
        $this->connection = $connection;
    }

    public function updatePassword($id, $password)
    {
        $stmt = $this->connection->prepare('UPDATE user SET password = :password WHERE userid = :userid');
        $stmt->execute(['password' => $password, 'userid' => $id]);
    }
} 
```

**PostgreSQL 映射器**

```
namespace Application\Model;

use Application\Model\Mapper;

class UserPgsqlMapper implements Mapper
{
    private $connection;

    public function __construct(\PDO $connection)
    {
        $this->connection = $connection;
    }

    public function updatePassword($id, $password)
    {
        $stmt = $this->connection->prepare('UPDATE user SET password = :password WHERE userid = :userid');
        $stmt->execute(['password' => $password, 'userid' => $id]);
    }
} 
```

**加载东西**

```
$connection = new \PDO(dsn stuff);
$mapper = \Application\Model\UserPgsqlMapper($connection);
$user = \Application\Model\User($mapper, 1);
$user->setPassword('new password'); 
```

如您所见，我有两个基本上带有重复代码的映射器（两个引擎的查询相同）。这有点“强奸” DRY 原则，但是我只是看不到防止这种情况的好/干净/正确的方法。请注意，这当然只是一个简单的示例，通常在不同的数据库引擎中会有不同的查询。

我曾考虑让映射器使用基本查询扩展一些映射器，但这感觉更脏，因为根本不可能有某事的基本查询。

我昨天也在 PHP 聊天中问过这个问题，结论基本上是“伪造重复并继续你的生活”，我越想越觉得这是我唯一真正的选择。

但为了确保我没有错过一些干净而聪明的解决方案，我想我会在这里发布一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T22:52:50.867

如果示例代码具有代表性，则重复是真正的代码气味。您不仅在复制查询，而且 PHP 代码也是相同的；你在这里写了很多重复的代码，而且它没有得到保留。

我会考虑将查询视为资源，而不是代码。

例如，创建一个名为“queries.php”的文件，并将每个查询设置为一个变量：

```
$update_password= ["default" => "UPDATE user SET password = :password WHERE userid = :userid"]
$create_user = ["default" => "insert into blabla"
                "mysql"   => "insert into wibble"] 
```

执行查询时，检查是否有特定于数据库的版本，否则使用默认值。

您可能还会考虑映射器类是否真的赢得了他们的支持 - 如果他们所做的只是执行稍微不同的 SQL 语句，您可能能够摆脱它们，或者至少将大量代码提取到超类中。

例如，您可以创建一个具有默认行为的数据映射器类而不是接口，并拉入适合当前数据库的查询。如果特定数据库确实需要方法的不同实现，您可以在特定于数据库的子类中覆盖该方法。

就像是：

```
namespace Application\Model;

use Application\Model\Mapper;

class UserDefaultMapper
{
    private $connection;

    public function __construct(\PDO $connection)
    {
        $this->connection = $connection;
    }

    public function updatePassword($id, $password)
    {
        $query = getQueryForDB("updatePassword", $connection);

        $stmt = $this->connection->prepare(query);
        $stmt->execute(['password' => $password, 'userid' => $id]);
    }
    public function createUser($name){
    ...
    }
} 
```

如果“createUser()”需要特定于数据库的实现（例如检索用户 ID），您将创建一个覆盖：

```
namespace Application\Model;

use Application\Model\Mapper;

class UserMySQLMapper extends UserDefaultMapper
{
    public function createUser($name){
    ...
    }
} 
```

这为您提供更少的代码、更少的重复代码（连接管理、语句执行等），允许通过资源文件而不是继承来管理最常见的变体（针对不同引擎的不同查询），但仍然赋予您覆盖的能力当你需要的时候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T09:58:48.117

> 我曾考虑让映射器使用基本查询扩展一些映射器，但这感觉更脏，因为根本不可能有某事的基本查询。

从 PHP 5.4.0 开始，PHP 实现了一种称为[Traits](http://php.net/manual/en/language.oop5.traits.php)的代码重用方法。Trait 旨在通过使开发人员能够在生活在不同类层次结构中的多个独立类中自由地重用方法集来减少单继承的一些限制。

此外，[Flourish](http://flourishlib.com/) PHP Unframework 能够在不同的数据库（MySQL、PostgreSQL、SQLite、MSSQL、Oracle、DB2）上运行。它包括对所有数据库类型的[一种 SQL 方言的支持。](http://flourishlib.com/docs/FlourishSql)你可以直接在你的项目中使用它，或者借鉴它的通用 SQL 方言的想法。

最后，您甚至可以将这两种方法（特征和 SQL 方言）结合起来。对于简单查询，使用 SQL 的子集，而对于高级查询，“混合”来自不同特征的查询。

顺便说一句，我在 MySQL、PostgreSQL、SQLite 和 MS SQL Server 等数据库上的许多重要项目中都使用了 Flourish。我建议直接使用它。

* * *

**更新：**您也可以参考 MediaWiki 中的[数据库抽象层](http://www.mediawiki.org/wiki/Manual%3aDatabase_access#Wrapper_functions)。它为不同的后端构建 SQL 查询，但为应用程序使用保持相同的接口。

# javascript - 将文本上传到 javascript 中的 asp.net 通用处理程序

> ID：14113124
> 
> 赞同：0
> 
> 时间：2013-01-01T18:35:51.943
> 
> 标签：javascript, asp.net, web-services, webrequest

如何将用户编写的文本上传到 asp.net 通用处理程序？文字很长。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T20:44:45.960

查看您评论中的代码（感谢分享），似乎包含您的文本的参数`data`在您的 JavaScript 中被调用，并且您正在处理程序中寻找`file`。

尝试：`context.Request.Form["data"]`在您的处理程序中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T20:46:14.230

试试这样的 jQuery 代码：

```
jQuery(document).ready(function($){
    $('#button-id-to-submit-info-to-the-handler').on('click', function(ev) {
        ev.preventDefault();

        //Wrap your msg in some fashion
        //in case you want to end other things
        //to your handler in the future
        var $xml = $('<root />')
            .append($('<msg />', { 
                text: escape($('#id-of-your-textarea-that-has-the-text').val()) 
            }
        ));

        $.ajax({
            type:'POST',
            url:'/path/to-your/handler.ashx',
            data: $('<nothing />').append($xml).html(),
            success: function(data) {
                $('body').prepend($('<div />', { text: $(data).find('responsetext').text() }));
            }
        });
    });
}); 
```

在你的处理程序中：

```
public class YourHandler : IHttpHandler
{
   public void ProcessRequest(HttpContext ctx)
   {
       //Response with XML
       //Build a response template
       ctx.Response.ContentType = "text/xml";
       String rspBody = @"<?xml version=\""1.0\"" encoding=\""utf-8\"" standalone=\""yes\""?>
<root>
    <responsetext>{0}</responsetext>
</root>";

      //Get the xml document created via jquery
      //and load it into an XmlDocument
      XmlDocument xDoc = new XmlDocument();
      using (System.IO.StreamReader sr = new StreamReader(ctx.Request.InputStream))
      {
         String xml = sr.ReadToEnd();
         xDoc.LoadXml(xml);
      }

      //Find your <msg> node and decode the text
      XmlNode msg = xDoc.DocumentElement.SelectSingleNode("/msg");
      String msgText = HttpUtility.UrlDecode(msg.InnerXml);
      if (!String.IsNullOrEmpty(msgText))
      {
          //Success!!
          //Do whatever you plan on doing with this
          //and send a success response back
          ctx.Response.Write(String.Format(rspBody, "SUCCESS"));
      }
      else
      {
          ctx.Response.Write(String.Format(rspBody, "FAIL: msgText was Empty!"));
      }
   } 
} 
```

# if-statement - 编写VHDL优先级编码器的捷径

> ID：14113125
> 
> 赞同：6
> 
> 时间：2013-01-01T18:36:04.250
> 
> 标签：if-statement, vhdl, encoder

您能否告诉我是否有比仅使用 if-else 语句更好的方法在 VHDL 中编写优先级编码器？我的意思是，我有这个代码并且它可以工作，但它可以写得更短吗？Switch 是一个 std_logic_vector。

谢谢你的帮助！

```
shifting : PROCESS(CLK_IN, new_length_ready, switch)

    VARIABLE highest_switch :      INTEGER RANGE 0 TO 15 := 15;

BEGIN

    -- priority encoder, changes the length of the snake track 
    -- ( i.e., number of leds for the snake to move )

    IF switch(15) = '1' THEN
        highest_switch := 15;
    ELSIF switch(14) = '1' THEN
        highest_switch := 14;
    ELSIF switch(13) = '1' THEN
        highest_switch := 13;
    ELSIF switch(12) = '1' THEN
        highest_switch := 12;
    ELSIF switch(11) = '1' THEN
        highest_switch := 11;
    ELSIF switch(10) = '1' THEN
        highest_switch := 10;
    ELSIF switch(9) = '1' THEN
        highest_switch := 9;
    ELSIF switch(8) = '1' THEN
        highest_switch := 8;
    ELSIF switch(7) = '1' THEN
        highest_switch := 7;
    ELSIF switch(6) = '1' THEN
        highest_switch := 6;
    ELSIF switch(5) = '1' THEN
        highest_switch := 5;
    ELSIF switch(4) = '1' THEN
        highest_switch := 4;
    ELSIF switch(3) = '1' THEN
        highest_switch := 3;
    ELSIF switch(2) = '1' THEN
        highest_switch := 2;
    ELSIF switch(1) = '1' THEN
        highest_switch := 1;
    ELSIF switch(0) = '1' THEN
        highest_switch := 0;
    ELSE
        highest_switch := 15;
    END IF 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-01T23:25:50.410

在进程中，您可以使用循环。

```
type Switches is range 0 to 15;

shifting : PROCESS(switch)
   VARIABLE highest_switch : Switches := 15;
begin
   for i in Switches loop
      if switch(i) = '1' then 
         highest_switch := i;
      end if;
   end loop
...
end process; 
```

请注意，如果设置了多个开关，则会多次分配变量。但是，随着循环按递增顺序执行，最后（最高）分配获胜。

顺便说一句，这个过程，就像你的一样，是组合的，但我从敏感度列表中删除了不必要的信号。最好是同步的；

```
shifting : PROCESS(clk)
begin
   if rising_edge(clk) then
      for i in ...
   end if;
end process; 
```

# zend-framework2 - 如何在zend框架2中跨子域共享zfcuser

> ID：14113129
> 
> 赞同：3
> 
> 时间：2013-01-01T18:37:33.167
> 
> 标签：zend-framework2, zfcuser

我在我的应用程序中安装了 zfcuser 模块，一切正常。我配置了主机名路由器，在这里我的问题开始了，当我登录主域（http://example.com）时一切正常，但是当我转到任何子域（[http://test.example.com，http: //anysubdomain.example.com](http://anysubdomain.example.com)）我正在失去登录状态，并且在每个子域上我都必须再次登录。如何跨子域共享登录状态？在 ZF1 中我只是设置了 'cookie_domain' 并且它可以工作，但是如何在 ZF2 中实现呢？当然我也在使用 Bjyauthorize 并且我想在子域上保留 bjyauthorize 警卫......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T17:37:33.827

好的，我找到了解决方案，在 ZfcUser Module.php 中我添加了：

```
use Zend\Session\Config\SessionConfig;
use Zend\Session\SessionManager;
use Zend\Session\Container;
use Zend\EventManager\EventInterface;

public function onBootstrap(EventInterface $e)
{
   $config = $e->getApplication()
              ->getServiceManager()
              ->get('Configuration');

   $sessionConfig = new SessionConfig();
   $sessionConfig->setOptions($config['session']);
   $sessionManager = new SessionManager($sessionConfig);
   $sessionManager->start();

   Container::setDefaultManager($sessionManager);
} 
```

在 ZfcUser module.config.php 中：

```
return array(
  'session' => array(
    'use_cookies' => true,
    'cookie_domain'=>'example.com',
  )
); 
```

希望它会帮助某人。

# android - 在操作栏中显示进度条而不是刷新菜单项

> ID：14113133
> 
> 赞同：1
> 
> 时间：2013-01-01T18:37:54.127
> 
> 标签：android

我正在尝试在操作栏中显示进度条而不是刷新菜单项。但是，当我当前按下刷新按钮时，它会消失，但进度条会替换操作栏标题，而不是出现在刷新按钮所在的位置。

这是我的两个 .xml 文件：

*   菜单项：

    ```
    <item android:id="@+id/menu_refresh"
        android:icon="@drawable/ic_menu_refresh"
        android:visible="true"
        android:orderInCategory="0"
        android:showAsAction="ifRoom|collapseActionView"
        android:actionLayout="@layout/action_progress_bar"
        android:title="@string/refresh"
        android:titleCondensed="@string/refresh"/> 
    ```

*   进度条布局：

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <ProgressBar xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="32dp"
        android:layout_height="32dp" >
    </ProgressBar> 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T00:17:22.853

我发现了问题所在。为了显示进度条而不是菜单项，它不能有 collapseActionView 标志。删除它，并将逻辑移动到代码中（以及使用简单的 setActionView 方法），成功了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T20:10:33.980

这是默认的 actionLayout 行为，AFAIK 您无法更改它。相反，您可以尝试处理按钮单击并从代码中替换栏项。

更新：

查看 ActionBarCompat 示例项目。（新项目/Android 示例项目）。

# php - 自动帐户每 24 小时检查一次会员到期时间

> ID：14113135
> 
> 赞同：1
> 
> 时间：2013-01-01T18:38:01.957
> 
> 标签：php

我的游戏服务器有一个用户控制面板 (UCP)。
我提供不同的会员资格（金/银/铜等）来赚钱。
但是，我想每 24 小时运行一次 PHP 脚本，以检查“用户”数据库并查看 30 天是否已过。我知道如何创建该功能，但我不知道如何使其自动工作。我的主机使用的是 Windows Server 2008 R2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T18:49:51.863

## Linux / Unix / OS X

计划作业在 linux 下称为[cron作业。](http://en.wikipedia.org/wiki/Cron)

配置 cronjobs 通常需要您使用[shell](http://linuxcommand.org/learning_the_shell.php)（通过 SSH）。有时，托管服务提供商可能会通过他们的控制面板来安排作业。

[这是关于如何添加 cronjob](http://www.cyberciti.biz/faq/how-do-i-add-jobs-to-cron-under-linux-or-unix-oses/)的精彩文章。

## 视窗

在windows下，可以使用task schedular来定时执行一个job。阅读[此操作指南](http://www.7tutorials.com/how-create-task-basic-task-wizard)。

# c++ - Qt QGraphicsScene 原点

> ID：14113136
> 
> 赞同：6
> 
> 时间：2013-01-01T18:38:05.950
> 
> 标签：c++, qt

每当我向 a 添加新项目时`QGraphicsScene`，`QGraphicsScene`我刚刚添加的项目的位置似乎都会改变。

如何使`QGraphicsScene`原点固定？

我是否需要先在 QGraphicsScene 中添加项目，然后为项目指定位置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T18:46:59.200

好吧，默认情况下，场景的内容将以`QGraphicsView`. 图形场景的原点不会随机变化。

您可能希望使用[setSceneRect()](http://doc.qt.digia.com/qt/qgraphicsscene.html#sceneRect-prop)来定义场景的大小，以便`QGraphicsView`始终以固定方式在视图中居中场景。（如果你不手动设置，rect会根据场景中的item来计算，如果你添加更多会改变。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T23:36:57.223

大约一年前，我回答了一个可能有帮助的相关问题：

[如何在 QGraphicsScene 上绘制一个点（鼠标点击）？](https://stackoverflow.com/questions/7830054/how-to-draw-a-point-on-mouseclick-on-a-qgraphicsscene)

同上什么坏猫。

有很多控件可用于调整或操纵指向场景的视口。场景设置了舞台上的东西。视图就是你看待它的方式。确保使用or或or从类`sceneRect`间接设置 or 设置它。`centerOn``fitInView``scale``translate``QGraphicsView`

[http://qt-project.org/doc/qt-4.8/graphicsview.html](http://qt-project.org/doc/qt-4.8/graphicsview.html)

[http://qt-project.org/doc/qt-4.8/qgraphicsview.html](http://qt-project.org/doc/qt-4.8/qgraphicsview.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T18:47:46.140

QGraphicsScene::setSceneRect ( const QRectF & rect ) 将使其成为绝对值。

见[http://doc.qt.digia.com/qt/qgraphicsscene.html#sceneRect-prop](http://doc.qt.digia.com/qt/qgraphicsscene.html#sceneRect-prop)

# python-2.7 - 将 while 循环插入 for 循环

> ID：14113139
> 
> 赞同：1
> 
> 时间：2013-01-01T18:38:31.270
> 
> 标签：python-2.7

我想将此 while 循环应用到下面的 for 循环中。我尝试在每个 if 语句中将 while 循环放在 if 语句之前。当我将它放在 if 语句之前（在 for 循环中）时，它会询问用户一次，然后为整个范围（1,8）返回相同的输入。我希望这个 while 循环适用于每个问题，即 2 到 8 的七个项目我如何实现它。谁能帮忙，谢谢

```
def valid_entry ():
    price = 110
    invalid_input = 1
    while price< 0 or price> 100:
        if invalid_input >=2:
            print "This is an invalid entry"
            print "Please enter a number between 0 and 100"
        try:
            price= int(raw_input("Please enter your price  : "))
        except ValueError:
            price = -1   
        invalid_input +=1 
```

while循环结束

```
def prices ():   
    x = range (1,8)
    item=2
    price=0
    for item in x:
        item +=1
        print "\n\t\titem",item
        price = int(raw_input("Enter your price : "))
        if price <10:
            price=1
            print "This is ok"

        if price >9 and price <45:
            price +=5
            print "This is great"

        if price >44 and price <70:
            price +=15
            print "This is really great"

        if price >69:
            price +=40
            print "This is more than i expected"

    print "\nYou now have spent a total of ",price

prices () 
```

没有回应是否表明这是一个愚蠢的问题，还是不可能做到？

这是否使它更清楚？

```
def prices ():   
    x = range (1,8)
    item=2
    price=0
    for item in x:
        item +=1
        print "\n\t\titem",item
        valid_entry ()#should it go here
        price = int(raw_input("Enter your price : "))
        valid_entry ()#should it go here
        if price <10:
           valid_entry ()#should it go here and so on for the following 3 if conditions
            price=1
            print "This is ok"

        if price >9 and price <45:
            price +=5
            print "This is great"

        if price >44 and price <70:
            price +=15
            print "This is really great"

        if price >69:
            price +=40
            print "This is more than i expected"

    print "\nYou now have spent a total of ",price 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T20:45:38.760

你可以尝试这样的事情（如果这不是你想要的，请道歉）。很高兴解释任何没有意义的事情 - 总体思路是它循环遍历 8 个项目，每次询问有效价格并继续询问输入的值是否不是数字或不在指定范围内. 由于这可能是一项作业，我试图使其与您已经证明的您知道的概念保持紧密一致（这里唯一的例外可能是`continue`）：

```
def valid_entry():
    # Here we define a number of attempts (which is what I think
    # you were doing with invalid_input). If the person enters 10
    # invalid attempts, the return value is None. We then check to
    # see if the value we get back from our function is None, and if
    # not, proceed as expected.
    num_attempts = 0
    while num_attempts < 10:
        # Here we do the input piece. Note that if we hit a ValueError,
        # the 'continue' statement skips the rest of the code and goes
        # back to the beginning of the while loop, which will prompt
        # again for the price.
        try:
            price = int(raw_input("Enter your price : "))
        except ValueError:
            print 'Please enter a number.'
            num_attempts += 1
            continue

        # Now check the price, and if it isn't in our range, increment
        # our attempts and go back to the beginning of the loop.
        if price < 0 or price > 100:
            print "This is an invalid entry"
            print "Please enter a number between 0 and 100"
            num_attempts += 1
        else:
            # If we get here, we know that the price is both a number
            # and within our target range. Therefore we can safely return
            # this number.
            return price

    # If we get here, we have exhausted our number of attempts and we will
    # therefore return 'None' (and alert the user this is happening).
    print 'Too many invalid attempts. Moving to the next item.'
    return None

def prices():
    # Here we go from 1-8 (since the upper bound is not included when
    # using range).
    x = range(1,9)

    # Here we use a variable (total) to store our running total, which will
    # then be presented at the end.
    total = 0

    # Now we iterate through our range.
    for item in x:
        print "\n\t\titem",item

        # Here is the important part - we call our valid_entry function and
        # store the result in the 'price' variable. If the price is not
        # None (which as we saw is the return value if the number of attempts
        # is > 10), we proceed as usual.
        price = valid_entry()
        if price is not None:
            if price <10:
                # Note this should probably be += 1
                total += 1
                print "This is ok"

            elif price >= 10 and price < 45:
                total += 5
                print "This is great"

            elif price >= 45 and price < 70:
                total += 15
                print "This is really great"

            # We know that price >= 70 here
            else:
                total += 40
                print "This is more than i expected"

    # Now print out the total amount spent
    print "\nYou now have spent a total of ", total

prices() 
```

# freebase - 具有多个唯一子项的 Freebase 查询

> ID：14113145
> 
> 赞同：1
> 
> 时间：2013-01-01T18:39:00.443
> 
> 标签：freebase, mql

假设我想获得所有至少有两个（不同）演员叫“约翰”的电影：

[示例查询](http://www.freebase.com/queryeditor/?q=%5B%7B%22type%22%3a%22/film/film%22,%22name%22%3anull,%22limit%22:3,%22/film/film/initial_release_date%22%3a%221935%22,%22starring%22%3a%5B%7B%22a%3aactor%22%3a%5B%7B%22type%22%3a%22/film/actor%22,%22name%22%3anull,%22name~=%22%3a%22John%22%7D%5D,%22b%3aactor%22%3a%5B%7B%22type%22%3a%22/film/actor%22,%22name%22%3anull,%22name~=%22%3a%22John%22%7D%5D%7D%5D%7D%5D&env=%7B%22extended%22:1%7D)：

```
[{
  "type":"/film/film",
  "name":null,
  "limit":10,
  "/film/film/initial_release_date":"2005"
  "starring":[{
    "a:actor": [{
       "type": "/film/actor",
       "name": null,
       "name~=": "John",
    }],
    "b:actor": [{
       "type": "/film/actor",
       "name": null,
       "name~=": "John",
    }]
  }]
}] 
```

如果您运行示例查询，您将看到它将列出仅包含一个“约翰”的电影。如何修复我的查询以排除这些带有重复子项的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T22:47:47.583

通常，您必须在客户端进行过滤；MQL 中的查询是“树状”的，因为查询的一部分不能引用另一部分，而不是通用图。

在这种情况下，您可以寻找有多个“约翰”在其中表演的电影；但是，MQL 不允许您对派生属性（如“count”）进行过滤，因此您可以做的最好的事情是[根据计数进行反向排序](http://tinyurl.com/akhr5d7)，然后在您使用“count”点击第一个条目时立即停止处理: 1\. 但是，如果您删除 1935 年的固定发布日期，该查询会超时（在 MQL 中排序会降低性能），因此您可能会被简单的客户端过滤所困。

# c# - 为什么 ExportAsFixedFormat 中的 param paramIgnorePrintAreas 不起作用？

> ID：14113151
> 
> 赞同：0
> 
> 时间：2013-01-01T18:39:29.703
> 
> 标签：c#, excel

我正在尝试导出`excel`到`pdf`.
我正在使用 C#。

我有一个问题`ExportAsFixedFormat`。我的文档有打印区域（在 Excel 应用程序中设置，如果手动发送打印它们可以工作）。但它在我的程序中不起作用。我将 param 设置`paramIgnorePrintAreas`为 false，它没有帮助。

```
public void createXls(){
    ApplicationClass excelApplication = new ApplicationClass();
    Workbook excelWorkBook = null;
    //Worksheet excelWorksheet = null;
    excelApplication.ScreenUpdating = false;
    excelApplication.Visible = false;

    string paramSourceBookPath = @"C:\Temp\Test.xlsx";
    object paramMissing = Type.Missing;
    string paramExportFilePath = @"C:\Temp\Test.pdf";
    XlFixedFormatType paramExportFormat = XlFixedFormatType.xlTypePDF;
    XlFixedFormatQuality paramExportQuality = XlFixedFormatQuality.xlQualityStandard;
    bool paramOpenAfterPublish = false;
    bool paramIncludeDocProps = true;
    bool paramIgnorePrintAreas = false;
    object paramFromPage = Type.Missing;
    object paramToPage = Type.Missing;
    try
    {
        // Open the source workbook.
        excelWorkBook = excelApplication.Workbooks.Open(paramSourceBookPath,
         false, paramMissing, paramMissing, paramMissing,
         paramMissing, paramMissing, paramMissing, paramMissing,
         paramMissing, paramMissing, paramMissing, paramMissing,
         paramMissing, paramMissing);

    // Save it in the target format.
        if (excelWorkBook != null)
        {
            Worksheet excelWorksheet = (Worksheet) excelWorkBook.ActiveSheet;
            excelWorksheet.ExportAsFixedFormat(paramExportFormat,
             paramExportFilePath, paramExportQuality,
             paramIncludeDocProps, paramIgnorePrintAreas, paramFromPage,
             paramToPage, paramOpenAfterPublish,
             paramMissing);
        }
    } catch (Exception ex)
    {
    //richTextBox1.Text=ex.Message.ToString();
    }
    finally
    {
        // Close the workbook object.
        if (excelWorkBook != null)
        {
            excelWorkBook.Close(false, paramMissing, paramMissing);
            excelWorkBook = null;
        }

        // Quit Excel and release the ApplicationClass object.
        if (excelApplication != null)
        {
            excelApplication.Quit();
            excelApplication = null;
        }

        GC.Collect();
        GC.WaitForPendingFinalizers();
        GC.Collect();
        GC.WaitForPendingFinalizers();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T16:05:35.230

只需在导出之前再次尝试设置打印区域：

```
excelWorksheet.PageSetup.PrintArea = "Print_Area"; 
```

我认为，我遇到了类似的问题，因为它是 Excel 的国际版本，并且此命令修复了输出格式。

# android - 奇怪的 Android Spinner 行为

> ID：14113164
> 
> 赞同：0
> 
> 时间：2013-01-01T18:41:18.160
> 
> 标签：android, spinner

这是填充我的微调器的代码。

编码：

```
String[] rcs = new String[review_cycles.length];
for (int i = 0; i < review_cycles.length; i++)
    rcs[i] = review_cycles[i].ReviewCycleName;
ArrayAdapter<String> rc_spinnerAdapter = new ArrayAdapter<String>(
        ActivityManagementReview.this,
        R.layout.simple_spinner_item, 
        rcs);
sp_review_cycle.setAdapter(rc_spinnerAdapter);
sp_review_cycle.setOnItemSelectedListener(new OnItemSelectedListener() {
    @Override
    public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id) {
        DtoMrReviewCycleVersion selected_review_cycle_version = review_cycles[position];
        if (selected_review_cycle_version != latest_review_cycle_version) {
            latest_review_cycle_version = selected_review_cycle_version;
            int mr_version_id = latest_review_cycle_version.MrdVersionId;
            _URL_version = _url_base + "MrVersion/" + Integer.toString(mr_version_id);
            new GetMrVersionInfoAsyncTask().execute();
        }
    }

    @Override
    public void onNothingSelected(AdapterView<?> parentView) {
        return;
    }
}); 
```

当我从微调器中选择一个值时，代码会执行两次。一旦我做出选择，然后立即执行，列表中的第一项将再次执行，使我回到开始的位置。

我怎样才能防止这种情况发生？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T22:37:05.690

> 当我从微调器中选择一个值时，代码会执行两次。

正如我在评论中提醒你的那样，微调`onItemSelected()`器在加载默认值时会调用。当您了解此功能时，此功能很有用，但由于它不是普通开发人员所期望的，因此也存在问题。

当用户重新选择当前值时，Spinner 也会调用`onItemSelected()`......当我想避免这两种误报时，我会使用这样的东西：

```
spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
    int previous = -1;
    @Override
    public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
        if(previous != position && previous < -1) {
            Log.v("Example", "Selected: " + position);
            // Do something
        }
        previous = position;
    }

    @Override
    public void onNothingSelected(AdapterView<?> parent) {}
}); 
```

# ruby-on-rails - How can I enable customized action with CanCan?

> ID：14113165
> 
> 赞同：0
> 
> 时间：2013-01-01T18:41:28.743
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cancan

I have actions called 'follow' and 'unfollow' in my controller.
Obviously, CanCan won't recognize those actions so that it shows access denied when those actions are executed.

```
alias_action :follow, :unfollow :to => :read 
```

I added this line to **ability.rb** then it works fine now.
But the problem is when the user is not logged in it shows error like this

```
syntax error, unexpected ':', expecting keyword_end
    alias_action :follow, :unfollow :to => :read 
```

I only enable those actions when user is logged in.
How can I? What should I add to **ability.rb**?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T18:48:17.650

看来您缺少逗号：

```
alias_action :follow, :unfollow, :to => :read 
```

看[这里](https://github.com/ryanb/cancan/wiki/Action-Aliases)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T18:51:29.657

假设你的控制器是用户控制器，你可以在你的能力.rb 文件中做到这一点

```
def initialize(user)
  user || = User.new
  if user.roles.include?('tweeple')    #Assuming the user with role tweeple can follow/ unfollow
    can [:follow, :unfollow], User
  end
end 
```

# git - Rebase Git commit history

> ID：14113167
> 
> 赞同：1
> 
> 时间：2013-01-01T18:41:42.503
> 
> 标签：git, git-rebase

My current git history looks like this:

```
develop:  A -- B -- C
                     \
feature1:             D -- E
                            \
feature2:                    G -- H -- I 
```

But, I would prefer this, instead:

```
feature2:             G' -- H' -- I'
                     /
develop:  A -- B -- C
                     \
feature1:             D -- E 
```

Can someone help me with such a rebase, as well as explain the rebase command used for me, if possible?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T18:56:35.887

好的。阅读手册，发现：

```
git rebase --onto develop feature1 feature2 
```

# c++ - Replace the character with two other

> ID：14113173
> 
> 赞同：0
> 
> 时间：2013-01-01T18:43:04.213
> 
> 标签：c++, replace, stdstring

I have a `std::string`, how can i replace `:` character with `%%`?

`std::replace( s.begin(), s.end(), ':', '%%' );` this code above doesn't work:

> error no instance matches the arguement list

Thanks!

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-01T18:52:51.000

不幸的是，没有办法`:`一次性替换所有角色。但是您可以循环执行，如下所示：

```
string s = "quick:brown:fox:jumps:over:the:lazy:dog";
int i = 0;
for (;;) {
    i = s.find(":", i);
    if (i == string::npos) {
        break;
    }
    s.replace(i, 1, "%%");
}
cout << s << endl; 
```

该程序[打印](http://ideone.com/t81bWx)

```
quick%%brown%%fox%%jumps%%over%%the%%lazy%%dog 
```

如果您只需要替换第一个冒号，则单独使用循环体，不要在其周围使用循环。

# usb - Is it possible to determine usb protocol from an installed driver?

> ID：14113174
> 
> 赞同：0
> 
> 时间：2013-01-01T18:43:06.990
> 
> 标签：usb, arduino, webcam, drivers

Just as the question states, the goal is to reverse engineer the protocol used by a device.

Let's say you have a webcam, an Arduino and an Arduino USB Host shield. You want to talk to that webcam, from which you don't know the protocol. Can it be done by monitoring USB data packets and by analyzing the driver installed for that device?

It would be a really interesting project.

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T18:47:13.457

我经常使用串行间谍程序来查看两个设备之间的对话。在 Windows 中，您可以付费... [http://www.sinnovations.com/htdocs/serial-port-monitor.htm](http://www.sinnovations.com/htdocs/serial-port-monitor.htm) 在 Linux 中它是免费的... [http://www.cyberciti.biz/faq/howto-监控-数据-on-a-serial-port-in-linux/](http://www.cyberciti.biz/faq/howto-monitor-data-on-a-serial-port-in-linux/)

# c++ - NVIDIA Unhandled exception at 0x002a2da2 in 0xC0000005: Access violation reading location 0x00000000

> ID：14113176
> 
> 赞同：1
> 
> 时间：2013-01-01T18:43:22.597
> 
> 标签：c++, visual-studio-2010, nvidia

I am currently trying to make two arms on a character and use NxRevoluteJoint for their movement. I have these working perfectly in another program that has been given as an example and I have used the same code in this new project however I am getting an error (the one in the title) and I am struggling how to fix it. I understand that the pointers is reference to NULL at some place but I can't see how to sort it out.

The variables are set globally:

```
NxRevoluteJoint* playerLeftJoint= 0;
NxRevoluteJoint* playerRightJoint= 0; 
```

This is the code in the seperate function where the player is being built as a compound object:

```
NxVec3 globalAnchor(0,1,0);     
NxVec3 globalAxis(0,0,1);       

playerLeftJoint= CreateRevoluteJoint(0,actor2,globalAnchor,globalAxis);
playerRightJoint= CreateRevoluteJoint(0,actor2,globalAnchor,globalAxis);

//set joint limits
NxJointLimitPairDesc limit1;
limit1.low.value = -0.3f;
limit1.high.value = 0.0f;
playerLeftJoint->setLimits(limit1);

NxJointLimitPairDesc limit2;
limit2.low.value = 0.0f;
limit2.high.value = 0.3f;
playerRightJoint->setLimits(limit2);    

NxMotorDesc motorDesc1;
motorDesc1.velTarget = 0.15;
motorDesc1.maxForce = 1000;
motorDesc1.freeSpin = true;
playerLeftJoint->setMotor(motorDesc1);

NxMotorDesc motorDesc2;
motorDesc2.velTarget = -0.15;
motorDesc2.maxForce = 1000;
motorDesc2.freeSpin = true;
playerRightJoint->setMotor(motorDesc2); 
```

The line where I am getting the error is at the `playerLeftJoint->setLimits(limit1);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T18:52:22.080

`CreateRevoluteJoint`返回一个空指针，就这么简单。错误消息清楚地表明指针的值为`0`。当然，你没有发布那个功能，所以这是我能给你的最好的信息。因此，这条线；

```
playerLeftJoint->setLimits(limit1); 
```

取消引用指针`playerLeftJoint`，这是一个无效的指针。您需要初始化您的指针。我看不到你的整个程序结构，所以在这种情况下，最简单的修复是这样的；

```
if(!playerLeftJoint)
    playerLeftJoint = new NxRevoluteJoint();

// same for the other pointer, now they are valid 
```

* * *

此外，由于这是 C++ 而不是 C，请使用智能指针为您处理内存，即

```
#include <memory>

std::unique_ptr<NxRevoluteJoint> playerLeftJoint;

// or, if you have a custom deallocater...
std::unique_ptr<NxRevoluteJoint, RevoluteJointDeleter> playerLeftJoint;

// ...

playerLeftJoint.reset(new NxRevoluteJoint(...)); 
```

# android - Android create a triangle based on user input

> ID：14113177
> 
> 赞同：0
> 
> 时间：2013-01-01T18:43:31.263
> 
> 标签：android

I have an xml layout that has 3 input boxes and a 'generate' button. When the user puts in there values there I'd like to draw a triangle underneath it

I know how to create a new view and go to it, but I'm not sure how to draw it on the same view being that I'm working with an xml view.

Below is a screenshot of what I want to do. Thank you

[http://i.stack.imgur.com/9oBJV.png](http://i.stack.imgur.com/9oBJV.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:10:10.113

您可以创建一个自定义视图类。

```
class Triangle extends View {

      private int vertexA, vertexB, vertexC;

      public Triangle(Context ctx){
          this(ctx,null);
      }

      public Triangle(Context ctx, AttributeSet attrs){
          this(ctx,attrs,0);
      }

      public Triangle(Context ctx, AttributeSet attrs, int defStyle){
          super(ctx,attrs,defStyle);
      }

      public void setSides(int a, int b, int c){
          this.vertexA = a;
          this.vertexB = b;
          this.vertexC = c;
          this.invalidate();
      }

      @Override
      protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {

          // Try for a width based on our minimum
          int minw = getPaddingLeft() + getPaddingRight() + getSuggestedMinimumWidth();
          int w = resolveSizeAndState(minw, widthMeasureSpec, 1);

          // Whatever the width ends up being, ask for a height that would let the triangle
         // get as big as it can
          int minh = MeasureSpec.getSize(w) - (int)mTextWidth + getPaddingBottom() + getPaddingTop();
          int h = resolveSizeAndState(MeasureSpec.getSize(w) - (int)mTextWidth, heightMeasureSpec, 0);

          setMeasuredDimension(w, h);
      }

      @Override
      protected void onDraw(Canvas canvas) {

          super.onDraw(canvas);

          Paint paint = new Paint();
          Path path = new Path();

          paint.setStyle(Paint.Style.FILL);
          paint.setColor(Color.TRANSPARENT);

          c.drawPaint(paint);

          // start the path at the "origin"
          path.MoveTo(10,10); // origin
          // add a line for side A
          path.lineTo(10,this.vertexA);
          // add a line for side B
          path.lineTo(this.vertexB,10);
          // close the path to draw the hypotenuse
          path.close();

          paint.setStrokeWidth(3);
          paint.setPathEffect(null);
          paint.setColor(Color.BLACK);
          paint.setStyle(Paint.Style.STROKE);

          c.drawPath(path, paint);

     } 

} 
```

请注意，我已经硬编码了原点（左下角 - 直角）并且只绘制了两条边，因为斜边是由闭合路径绘制的（这样可以节省任何额外的数学运算）。您需要使用 onMeasure 并根据需要缩放三角形。像这样的东西：

```
path.lineTo(10, this.vertexA * yScale);
path.lineTo(this.vertexB * xScale ,10); 
```

您的活动应该检查 3 个值确实代表直角三角形的边，然后调用 setSides()。我已经添加了所有 3 面，尽管我们只使用 a 和 b。如果您愿意，可以删除 c。

请注意，这不是复制/粘贴代码。您将需要对其进行调整，但它应该让您领先一步。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T19:04:30.093

只需将您的自定义视图放入按钮下方的布局中。要使用的确切 xml 取决于您的顶级视图容器的类型（可能是 a `RelativeLayout`）。

要使其一开始不可见，您可以将其可见性设置为`INVISIBLE`。当它应该出现时，将可见性设置为`VISIBLE`。

# java - 嵌入式码头中的异步 servlet 似乎在高负载下写入错误响应

> ID：14113178
> 
> 赞同：4
> 
> 时间：2013-01-01T18:43:36.507
> 
> 标签：java, asynchronous, jetty, servlet-3.0

当我发送手动请求时，下面给出的代码可以正常工作。如果我使用 siege ( ) 生成请求`siege -c 500 -r 100 'http://localhost:8080/?name=Chandru&age=560'`，我开始在 jetty 的日志中看到这些消息：

```
2013-01-02 00:06:55.761:WARN:oejh.HttpGenerator:Ignoring extra content {name: "
2013-01-02 00:07:56.393:WARN:oejh.HttpGenerator:Ignoring extra content Chandru
2013-01-02 00:07:56.393:WARN:oejh.HttpGenerator:Ignoring extra content ", age: 
2013-01-02 00:07:56.393:WARN:oejh.HttpGenerator:Ignoring extra content 560
2013-01-02 00:07:56.393:WARN:oejh.HttpGenerator:Ignoring extra content } 
```

我在 Java 1.7.0_10 上使用 Jetty 8.1.8.v20121106。我做错了什么？

```
public class Main {

    public static void main(String[] args) throws Exception {
        final Server server = new Server(8080);
        final ServletContextHandler context = new ServletContextHandler(server, "/");
        final ServletHolder servlet = new ServletHolder(new RequestHandler(new Responder()));
        servlet.setAsyncSupported(true);
        context.addServlet(servlet, "/");
        server.start();
    }
}

class RequestHandler extends HttpServlet {

    private final Responder responder;

    public RosterHandler(Responder responder) {
        this.responder = responder;
    }

    @Override
    public void doGet(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {
        responder.process(request.startAsync());
    }
}

class Responder {

    private final ExecutorService pool;

    public Responder() {
        this.pool = Executors.newFixedThreadPool(100);
    }

    public void process(final AsyncContext ctx) {
        pool.execute(new Runnable() {
            @Override
            public void run() {

                final String name = ctx.getRequest().getParameter("name");
                final int age = Integer.parseInt(ctx.getRequest().getParameter("age"));

                ctx.getResponse().setContentType("application/json");
                try (final PrintWriter w = ctx.getResponse().getWriter()) {
                    w.printf("{name: \"%s\", age: %d}", name, age);
                } catch (IOException e) {
                    e.printStackTrace(System.err);
                }
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:47:06.283

你应该调用 context.complete() 来表示你的工作已经完成并且异步连接可以被认为已经完成。

# objective-c - 如何在 NSTextView 中统一缩放富文本？

> ID：14113179
> 
> 赞同：12
> 
> 时间：2013-01-01T18:43:36.233
> 
> 标签：objective-c, cocoa, nstextview, appkit

**上下文**：

我有一个普通的基于文档的 Cocoa Mac OS X 应用程序，它使用`NSTextView`富文本输入。用户可以在`NSTextView`.

基础 SDK：10.7
部署目标：10.6

* * *

**问题：**

我想`NSTextView`在用户编辑文本时以编程方式（包括 ）实现整个 UI 的缩放。缩放框架`NSTextView`是没有问题的。但我不知道如何缩放视图内的可编辑文本，该文本可能在整个文本运行的不同子部分中包含多个不同的点大小。

如何将统一的比例因子应用于显示在 中的富文本`NSTextView`？

这应该与“富文本”很好地配合使用，从而保留用户的字体系列、颜色**，尤其是磅值**（在文本运行的不同点可能不同），但统一/相对地缩放。

考虑到我的基本 SDK 和部署目标，这可能吗？是否可以使用更新的 Base SDK 或部署目标？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-01T20:23:10.137

如果目的是缩放视图（而不是实际更改字符串中的属性），我建议使用 scaleUnitSquareToSize: 方法：以及 ScalingScrollView （可通过 TextEdit 示例代码获得）以获得正确的滚动条行为。

ScalingScrollView 的核心部分是：

```
- (void)setScaleFactor:(CGFloat)newScaleFactor adjustPopup:(BOOL)flag
{
CGFloat oldScaleFactor = scaleFactor;
    if (scaleFactor != newScaleFactor)
    {
        NSSize curDocFrameSize, newDocBoundsSize;
        NSView *clipView = [[self documentView] superview];

        scaleFactor = newScaleFactor;

        // Get the frame.  The frame must stay the same.
        curDocFrameSize = [clipView frame].size;

        // The new bounds will be frame divided by scale factor
        newDocBoundsSize.width = curDocFrameSize.width / scaleFactor;
        newDocBoundsSize.height = curDocFrameSize.height / scaleFactor;
    }
    scaleFactor = newScaleFactor;
    [scale_delegate scaleChanged:oldScaleFactor newScale:newScaleFactor]; 
} 
```

这`scale_delegate`是您可以调整`NSTextView`对象的委托：

```
- (void) scaleChanged:(CGFloat)oldScale newScale:(CGFloat)newScale
{
    NSInteger     percent  = lroundf(newScale * 100);

    CGFloat scaler = newScale / oldScale;   
    [textView scaleUnitSquareToSize:NSMakeSize(scaler, scaler)];

    NSLayoutManager* lm = [textView layoutManager];
    NSTextContainer* tc = [textView textContainer];
    [lm ensureLayoutForTextContainer:tc];
} 
```

该`scaleUnitSquareToSize:`方法相对于其当前状态进行缩放，因此您可以跟踪缩放因子，然后将绝对缩放请求 (200%) 转换为相对缩放请求。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-07T20:06:19.477

适用于 iOS 和 Mac OS

```
@implementation NSAttributedString (Scale)

- (NSAttributedString *)attributedStringWithScale:(double)scale
{
    if(scale == 1.0)
    {
        return self;
    }

    NSMutableAttributedString *copy = [self mutableCopy];
    [copy beginEditing];

    NSRange fullRange = NSMakeRange(0, copy.length);

    [self enumerateAttribute:NSFontAttributeName inRange:fullRange options:0 usingBlock:^(UIFont *oldFont, NSRange range, BOOL *stop) {
        double currentFontSize = oldFont.pointSize;
        double newFontSize = currentFontSize * scale;

        // don't trust -[UIFont fontWithSize:]
        UIFont *scaledFont = [UIFont fontWithName:oldFont.fontName size:newFontSize];

        [copy removeAttribute:NSFontAttributeName range:range];
        [copy addAttribute:NSFontAttributeName value:scaledFont range:range];
    }];

    [self enumerateAttribute:NSParagraphStyleAttributeName inRange:fullRange options:0 usingBlock:^(NSParagraphStyle *oldParagraphStyle, NSRange range, BOOL *stop) {

        NSMutableParagraphStyle *newParagraphStyle = [oldParagraphStyle mutableCopy];
        newParagraphStyle.lineSpacing *= scale;
        newParagraphStyle.paragraphSpacing *= scale;
        newParagraphStyle.firstLineHeadIndent *= scale;
        newParagraphStyle.headIndent *= scale;
        newParagraphStyle.tailIndent *= scale;
        newParagraphStyle.minimumLineHeight *= scale;
        newParagraphStyle.maximumLineHeight *= scale;
        newParagraphStyle.paragraphSpacing *= scale;
        newParagraphStyle.paragraphSpacingBefore *= scale;

        [copy removeAttribute:NSParagraphStyleAttributeName range:range];
        [copy addAttribute:NSParagraphStyleAttributeName value:newParagraphStyle range:range];
    }];

    [copy endEditing];
    return copy;
}

@end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T19:45:20.330

在这里。

我找到了一种可行的解决方案，而且实施起来并不难。但是，我不确定这是最佳/理想的解决方案。我仍然有兴趣寻找其他解决方案。但这是一种方法：

在显示之前手动缩放源文本的*字体点大小*和*行高多个*属性`NSAttributedString`，然后在存储为源之前取消缩放显示的文本。

此解决方案的问题在于，在缩放时，系统**字体面板**将在编辑时显示所选文本的实际缩放显示点大小（而不是“真实”源点大小）。这是不可取的。

* * *

这是我的实现：

```
- (void)scaleAttributedString:(NSMutableAttributedString *)str by:(CGFloat)scale {
    if (1.0 == scale) return;

    NSRange r = NSMakeRange(0, [str length]);
    [str enumerateAttribute:NSFontAttributeName inRange:r options:0 usingBlock:^(NSFont *oldFont, NSRange range, BOOL *stop) {
        NSFont *newFont = [NSFont fontWithName:[oldFont familyName] size:[oldFont pointSize] * scale];

        NSParagraphStyle *oldParaStyle = [str attribute:NSParagraphStyleAttributeName atIndex:range.location effectiveRange:NULL];
        NSMutableParagraphStyle *newParaStyle = [[oldParaStyle mutableCopy] autorelease];

        CGFloat oldLineHeight = [oldParaStyle lineHeightMultiple];
        CGFloat newLineHeight = scale * oldLineHeight;
        [newParaStyle setLineHeightMultiple:newLineHeight];

        id newAttrs = @{
            NSParagraphStyleAttributeName: newParaStyle,
            NSFontAttributeName: newFont,
        };
        [str addAttributes:newAttrs range:range];
    }];    
} 
```

这需要在显示之前缩放源文本：

```
// scale text
CGFloat scale = getCurrentScaleFactor();
[self scaleAttributedString:str by:scale]; 
```

然后在存储为源之前反向缩放显示的文本：

```
// un-scale text
CGFloat scale = 1.0 / getCurrentScaleFactor();
[self scaleAttributedString:str by:scale]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-06T06:48:21.107

我要感谢 Mark Munz 的回答，因为它让我免于在充满 NSScrollView 放大疯狂和 NSLayoutManagers 的黑暗森林中徘徊。

对于仍在寻找的人，这是我的方法。此代码位于 NSDocument 中。所有文本都被插入到一个固定宽度和居中的容器中，并且这里的缩放使自动换行等保持不变。它创建了一个漂亮的“页面视图”外观，而不需要复杂的布局管理。

你需要在你的类中设置`CGFloat _documentSize`和常量，这个例子才能工作。`NSTextView textView`

```
- (void) initZoom {
    // Call this when the view has loaded and is ready
    // I am storing a separate _scaleFactor and _magnification for my own purposes, mainly to have the initial scale to be higher than 1.0
    _scaleFactor = 1.0;
    _magnification = 1.1;
    [self setScaleFactor:_magnification adjustPopup:false];

    [self updateLayout];
    // NOTE: You might need to call updateLayout after the content is set and we know the window size etc.
}

- (void) zoom: (bool) zoomIn {
    if (!_scaleFactor) _scaleFactor = _magnification;

    // Arbitrary maximum levels of zoom
    if (zoomIn) {
        if (_magnification < 1.6) _magnification += 0.1;
    } else {
        if (_magnification > 0.8) _magnification -= 0.1;
    }

    [self setScaleFactor:_magnification adjustPopup:false];
    [self updateLayout];
}

- (void)setScaleFactor:(CGFloat)newScaleFactor adjustPopup:(BOOL)flag
{
    CGFloat oldScaleFactor = _scaleFactor;
    if (_scaleFactor != newScaleFactor)
    {
        NSSize curDocFrameSize, newDocBoundsSize;
        NSView *clipView = [[self textView] superview];

        _scaleFactor = newScaleFactor;

        // Get the frame.  The frame must stay the same.
        curDocFrameSize = [clipView frame].size;

        // The new bounds will be frame divided by scale factor
        //newDocBoundsSize.width = curDocFrameSize.width / _scaleFactor;
        newDocBoundsSize.width = curDocFrameSize.width;
        newDocBoundsSize.height = curDocFrameSize.height / _scaleFactor;

        NSRect newFrame = NSMakeRect(0, 0, newDocBoundsSize.width, newDocBoundsSize.height);
        clipView.frame = newFrame;
    }
    _scaleFactor = newScaleFactor;
    [self scaleChanged:oldScaleFactor newScale:newScaleFactor];
}
- (void) scaleChanged:(CGFloat)oldScale newScale:(CGFloat)newScale
{
    CGFloat scaler = newScale / oldScale;
    [self.textView scaleUnitSquareToSize:NSMakeSize(scaler, scaler)];

    NSLayoutManager* lm = [self.textView layoutManager];
    NSTextContainer* tc = [self.textView textContainer];
    [lm ensureLayoutForTextContainer:tc];
}

- (void) updateLayout {
    CGFloat width = (self.textView.frame.size.width / 2 - _documentWidth * _magnification / 2) / _magnification;    self.textView.textContainerInset = NSMakeSize(width, TEXT_INSET_TOP);
    self.textView.textContainer.size = NSMakeSize(_documentWidth, self.textView.textContainer.size.height);
} 
```

# php - How to Perform SQL Injection making a SELECT statement UPDATE or INSERT rows?

> ID：14113180
> 
> 赞同：-1
> 
> 时间：2013-01-01T18:43:37.970
> 
> 标签：php, mysql, sql-injection

> **Possible Duplicate:**
> [MySQL Injection - Use SELECT query to UPDATE/DELETE](https://stackoverflow.com/questions/5759603/mysql-injection-use-select-query-to-update-delete)

So I have found in my site bug that allows to perform sql injection `http://mysite.com/script.php?id=1 union select 1,2,3` will output all fields that has Id property equal to one plus one additional row with 1,2,3\. I know that I have to validate user input to close my bug.

However my question is quite another. Is it possible to perform update query or insert query? I am able to comment query using --, however I cannot use multiple statements that are delimited by `;`. So is it possible to perform update query in my case. I can show PHP code and SQL query if needed.

```
$sql    = "SELECT id, title, text from table where cId=$val";
$result = mysql_query($sql);
$array  = mysql_fetch_array($result);
//echo rows in table 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T18:59:21.097

从[MySQL 注入来看 - 使用 SELECT 查询来更新/删除](https://stackoverflow.com/questions/5759603/mysql-injection-use-select-query-to-update-delete) 所有**保护你的是 mysql_query 的限制**。我不会依赖这一点，尤其是不会随着时间的推移保持这种状态。您永远不应依赖默认禁用的功能。**也许下一个版本**已经允许诸如。

```
SELECT id, title, text from table where cId=1; DROP table table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T18:45:39.847

不，这是不可能的。很可能您正在运行**mysql_query**，这不允许一次运行多个查询。因此，如果您的查询以 SELECT 开头（因为它确实如此），它将不允许任何 UPDATE 注入

编辑： 即使在你的输入上使用**mysql_real_escape_string**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T18:54:28.227

默认情况下，这应该是不可能的。尽管`mysql_query`从 MySQL 5.0 开始有在一个字符串中运行多个语句的选项，但您必须使用`mysql_set_server_option`.

请考虑像这样更改您的语句命令以使用`mysql_real_escape_string`：

```
$q = mysql_fetch_array(mysql_query("SELECT id, title, text from table where cId = " . mysql_real_escape_string($val))); 
```

最好将代码更改为使用[PDO](http://php.net/manual/de/ref.pdo-mysql.php)，因为所有 mysql_* 函数都已正式弃用。

# webserver - 有没有办法让服务器上的文本文件只能由浏览器读取？

> ID：14113182
> 
> 赞同：0
> 
> 时间：2013-01-01T18:44:06.177
> 
> 标签：webserver

我的 Web 服务器上有几个页面，它们从每个包含 JSON 字符串的文本文件中提取数据。页面使用 $.get

有没有办法只允许服务器/网页访问文件？我不希望人们去文件路径并将 JSON 数据保存到他们的计算机。

如果我将权限设置为拒绝访问默认的 IUSR，那么访问该站点的人将无法加载它们。

这有什么技巧吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T18:56:01.103

我将这些文件放在网络服务器可以看到的目录树中。例如，浏览器可访问的 html 页面进入 /var/www/public_html/filename.php，但不应该看到的文件进入 /var/privateFiles/anotherfile.txt。Web 服务器根目录是 /var/www - 因此 Web 服务器无法看到 anotherfile.txt，但 filename.php 可以使用完整路径名包含它。

# python - 如何根据数据类型在 python 中设置条件？

> ID：14113187
> 
> 赞同：41
> 
> 时间：2013-01-01T18:45:00.237
> 
> 标签：python, types, conditional

这个问题看起来很简单，但我想不通。我知道您可以在 python 中检查数据类型，但是如何根据数据类型设置条件？例如，如果我必须编写一个对字典/列表进行排序并将所有整数相加的代码，我如何隔离搜索以仅查找整数？

我想一个简单的例子看起来像这样：

```
y = []
for x in somelist:
    if type(x) == <type 'int'>:  ### <--- psuedo-code line
    y.append(x)
print sum(int(z) for z in y) 
```

那么对于第 3 行，我将如何设置这样的条件？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-01-01T18:46:08.317

怎么样，

```
if isinstance(x, int): 
```

但更清洁的方法就是

```
sum(z for z in y if isinstance(z, int)) 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2018-03-02T10:31:16.367

TLDR：

*   `if isinstance(x, int):`除非您有理由不使用，否则请使用。
*   如果`if type(x) is int:`您需要精确的类型相等而不需要其他任何东西，请使用。
*   如果`try: ix = int(x)`您可以转换为目标类型，请使用。

* * *

Python 中的类型检查有一个很大的“取决于”。处理类型的方法有很多种，各有利弊。随着 Python3，出现了更多。

# 显式类型相等

类型是一流的对象，您可以像对待任何其他值一样对待它们。因此，如果您希望某物的类​​型等于`int`，只需对其进行测试：

```
if type(x) is int: 
```

这是最严格的测试类型：它需要*精确的*类型相等。通常，这不是您想要的：

*   它排除了替代类型：a`float`是无效的，即使它`int`在许多方面表现得像 an。
*   它排除了子类和抽象类型：打印漂亮的`int`子类或`enum`将被拒绝，即使它们在逻辑上是整数。
    *   这严重限制了可移植性：Python2 字符串可以*是* `str`or `unicode`，而整数可以*是* `int`or `long`。

请注意，显式类型相等*可*用于低级操作：

*   某些类型*不能*被子类化，例如`slice`. 一个明确的检查在这里更明确。
*   一些低级操作，例如序列化或 C-API，需要特定类型。

### 变体

也可以对`__class__`属性进行比较：

```
if x.__class__ is int: 
```

请注意，如果一个类定义了一个`__class__`属性，这与`type(x)`.

当有多个类要检查时，使用 a`dict`来调度动作比显式检查更具可扩展性并且可以更快（≥5-10 种类型）。这对于转换和序列化特别有用：

```
dispatch_dict = {float: round, str: int, int: lambda x: x}
def convert(x):
    converter = self.dispatch_dict[type(x)]  # lookup callable based on type
    return converter(x) 
```

# 显式类型的实例检查

惯用类型测试使用`isinstance` [内置](https://docs.python.org/3/library/functions.html#isinstance)：

```
if isinstance(x, int): 
```

此检查既准确又高效。这通常是人们*想要*检查类型的内容：

*   它正确处理子类型。一个漂亮的打印`int`子类仍然可以通过这个测试。
*   它允许一次检查多种类型。在 Python2 中，doing`isinstance(x, (int, long))`会为您提供所有内置整数。

最重要的是，大多数时候缺点可以忽略不计：

*   它仍然接受行为怪异的时髦子类。由于*任何东西*都可以以奇怪的方式表现，因此防范是徒劳的。
*   它很容易*过于*严格：许多人检查`isinstance(x, list)`任何序列（例如`tuple`）甚至可迭代（例如 a `generator`）何时也可以。与脚本或应用程序相比，通用库更需要关注这一点。

### 变体

如果您已经有一个类型，`issubclass`则行为相同：

```
if issubclass(x_type, int): 
```

# 抽象类型的实例检查

Python 有一个[抽象基类](https://docs.python.org/3/glossary.html#term-abstract-base-class)的概念。粗略地说，这些表达了类型的含义，而不是它们的层次结构：

```
if isinstance(x, numbers.Real):  # accept anything you can sum up like a number 
```

换句话说， type(x) 不一定*继承*自它，`numbers.Real`但必须*表现*得像它。尽管如此，这是一个非常复杂和困难的概念：

*   如果您正在寻找基本类型，这通常是矫枉过正。`int`大多数时候，整数只是一个。
*   来自其他语言的人经常混淆它的概念。
    *   将它与例如 C++ 区分开来，重点是*抽象基*类而不是*抽象*基类。
    *   ABC 可以像 Java 接口一样使用，但仍可能具有具体功能。

但是，它对于泛型库和抽象非常有用。

*   许多函数/算法不需要显式类型，只需要它们的行为。
    *   如果您只需要按键查找内容，则将您`dict`限制为特定的内存类型。相比之下，`collections.abc.Mapping`还包括数据库包装器、大型磁盘支持的字典、惰性容器，... - 和`dict`.
*   它允许表达部分类型约束。
    *   没有严格的基类型实现迭代。但是如果你检查对象`collections.abc.Iterable`，它们都在一个`for`循环中工作。
*   它允许创建显示为相同抽象类型的单独、优化的实现。

虽然一次性脚本通常不需要它，但我强烈建议将它用于除了几个 python 版本之外的任何东西。

# 暂定转换

处理类型的惯用方式不是测试它们，而是假设它们是兼容的。如果您已经预料到输入中有一些错误的类型，只需跳过所有不兼容的内容：

```
try:
    ix = int(x)
except (ValueError, TypeError):
    continue  # not compatible with int, try the next one
else:
    a.append(ix) 
```

这实际上不是类型检查，但通常具有相同的目的。

*   它*保证*您的输出中有预期的类型。
*   它在转换错误类型方面有一些有限的回旋余地，例如专门转换`float`为`int`.
*   它可以在您不知道哪些类型符合`int`.

主要的缺点是它是一个显式的转换。

*   您可以默默地接受“错误”值，例如转换`str`包含文字的 a。
*   它不必要地转换甚至足够好的类型，例如当你只`float`需要`int`数字时。

转换是某些特定用例的有效工具。如果您大致了解您的输入是什么，并且必须对您的输出做出保证，则效果最好。

# 函数调度

有时类型检查的目标只是选择一个合适的函数。在这种情况下，函数调度例如[`functools.singledispatch`](https://docs.python.org/3/library/functools.html#functools.singledispatch)允许针对特定类型专门化函数实现：

```
@singledispatch
def append_int(value, sequence):
    return

@append_int.register
def _(value: int, sequence):
    sequence.append(value) 
```

这是`isinstance`和`dict`调度的结合。它对于大型应用程序最有用：

*   无论分派类型的数量如何，它都会使使用站点保持较小。
*   它允许以后注册其他类型的特化，即使在其他模块中也是如此。

尽管如此，它并非没有缺点：

*   许多 Python 程序员起源于函数式和强类型语言，不熟悉单调度甚至多调度。
*   调度需要单独的功能，因此不适合在使用现场定义。
    *   创建函数和“预热”调度缓存需要显着的运行时开销。调度函数应该定义一次并经常重复使用。
    *   即使是预热的调度表也比手写的 if/else 或`dict`查找要慢。

# 控制输入

最好的做法是确保您一开始就不必检查类型。这是一个元主题，因为它在很大程度上取决于用例。

在这里，来源不`somelist`应该将非数字放入其中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-02T05:52:55.617

您可以像这样简单地使用类型和相等运算符

```
if (type(x) == int): 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-10T09:34:21.817

让我声明 int 类型的变量 x

```
x = 2
if type(x) == type(1) or isinstance(x, int):  
    # do something 
```

两者都工作正常。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-01T19:39:03.747

易于使用的类型。

```
import types
k = 5
if(type(k)==types.IntType):
   print "int" 
```

这是一个快速目录（类型）：

```
['BooleanType', 'BufferType', 'BuiltinFunctionType', 'BuiltinMethodType', 'ClassType', 'CodeType', 'ComplexType', 'DictProxyType', 'DictType', 'DictionaryType', 'EllipsisType', 'FileType', 'FloatType', 'FrameType', 'FunctionType', 'GeneratorType', 'GetSetDescriptorType', 'InstanceType', 'IntType', 'LambdaType', 'ListType', 'LongType', 'MemberDescriptorType', 'MethodType', 'ModuleType', 'NoneType', 'NotImplementedType', 'ObjectType', 'SliceType', 'StringType', 'StringTypes', 'TracebackType', 'TupleType', 'TypeType', 'UnboundMethodType', 'UnicodeType', 'XRangeType', '__builtins__', '__doc__', '__file__', '__name__', '__package__'] 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-01T19:49:11.560

您可以在运算符的两侧使用 type 函数。像这样：

```
if type(x) == type(1): 
```

# javascript - javascript数组值在函数外不可用

> ID：14113188
> 
> 赞同：-1
> 
> 时间：2013-01-01T18:45:12.527
> 
> 标签：javascript, arrays, google-maps, asynchronous, variable-declaration

很抱歉问这个问题，但我到处都看过，无法理解。
我正在尝试重新设计一个 v2 谷歌地图示例以使其进入 v3。我在中心点的行驶距离内有一组“端点”，我想在周围绘制一个多边形。Tese 被写入一个数组（代码中有三个应该工作：driveMarkersArray - 当前的一个，或 drivePolyPoints 或 markersArray）在执行此操作的函数 process1direction(from,to) 中，它们肯定在那里，（尽管有趣的是萤火虫控制台在最后报告它们，在所有处理完成后？）但是当在另一个函数 draw_DrivePolygon() 中处理以绘制多边形时，数组显示为空。这只是声明吗（我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T18:52:02.847

在 JavaScript 中变量有它的作用域函数级别。不是块级。

在这里查看 JavaScript 中的变量范围

***[javascript-变量范围](https://stackoverflow.com/questions/500431/javascript-variable-scope)***

***[变量范围和 var 关键字。](http://www.mredkj.com/tutorials/reference_js_intro_ex.html)***

# sql - 基于 sysdate 的事件

> ID：14113190
> 
> 赞同：5
> 
> 时间：2013-01-01T18:45:27.787
> 
> 标签：sql, database, oracle, plsql, triggers

> **可能重复：**
> [基于 sysdate 触发](https://stackoverflow.com/questions/14110433/trigger-based-on-sysdate)

1.我有一张桌子，我必须在每天 12:00（24 小时格式）在其上执行更新操作。

我应该如何做到这一点？

表架构：

```
CREATE TABLE CHARGES   
(
    total NUMBER(30),
    admitdate TIMESTAMP(6),
    dischargedate TIMESTAMP(30)
) 
```

更新算法：

```
if 
{
   dischargedate="null" 
   then total=admitdate-sysdate=difference in days * Total
   Do this every day at 12:00(24 Hr. Format)
}
else
{  
  do nothing.    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T18:55:26.963

每 24 小时运行一次作业的标准是使用系统包在此时间间隔运行一次作业[`DBMS_SCHEDULER`](http://www.oracle.com/pls/db112/search?remark=quick_search&word=dbms_scheduler)。

例如：

```
BEGIN
  DBMS_SCHEDULER.create_job (
    job_name        => 'update_charges',
    job_type        => 'PLSQL_BLOCK',
    job_action      => 'BEGIN my_procedure; END;',
    start_date      => TRUNC(SYSDATE) + 0.5,
    repeat_interval => 'freq=daily;',
    end_date        => NULL,
    enabled         => TRUE,
    comments        => 'Update the discharged date in charges.');
END;
/ 
```

然后，您创建一个要运行的过程：

```
create or replace PROCEDURE my_procedure is

begin

  update charges
     set total = admitdate - sysdate
   where dischargedate is null;

end;
/ 
```

`admitdate`这会将列总计更新为和 SYSDATE之间的天数。

**但是**，我质疑是否有必要这样做。这听起来很像古老的“我应该存储年龄”问题。[我相信答案是否定的。](https://stackoverflow.com/questions/9788542/how-to-store-birthdate-and-age-so-that-age-can-be-updated-daily-in-php-mysql/9788624#9788624)您在某些时候绝对是错误的，并且有许多可能导致作业手动运行不正确。当您从数据库中提取数据时，我会即时计算此列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T18:55:35.937

Oracle 没有内置调度程序。有几种不同的方法可以解决这个问题。这里有两个：

1) 创建一个通过服务器调度机制运行的 sql 脚本。对于 Unix/Linux，这将是一个 cron 作业。对于 Windows，这将是计划任务。

2) 使用 CREATE_JOB 语法创建计划作业：

```
BEGIN
DBMS_SCHEDULER.CREATE_JOB (
    job_name           =>  'update_charges',
    job_type           =>  'STORED_PROCEDURE',
    job_action         =>  'MYSCHEMA.SOME_PKG.UPDATE_CHARGES',
    start_date         =>  '28-APR-08 12.00.00 PM Australia/Sydney',
    repeat_interval    =>  'FREQ=DAILY;INTERVAL=1', /* every other day */
    end_date           =>  '20-NOV-13 12.00.00 PM Australia/Sydney',
    job_class          =>  'batch_update_jobs',
    comments           =>  'My new job');
END; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T18:56:21.183

用SQL表示，我认为你的算法是在`UPDATE`下面的语句中实现的。`total`每次算法运行时，您似乎都想乘以自己；我假设这是我的误解或你的错字。`total`简单地等于承认日期和当前日期之间的差异似乎更有意义。

```
UPDATE CHARGES
   SET Total = DATEDIFF(d, GETDATE(), AdmitDate)
 WHERE DischargeDate IS NULL; 
```

为确保此查询高效运行，您需要在`DischargeDate`列上创建索引。

要每天在特定时间执行此操作，您有几个选择。

如果您有自己的服务器代码在运行，一种方法是让该代码安排工作并在您愿意时执行它。如果您在服务器端架构中内置了良好的监控和管理。

另一种方法是运行一个`chron`或`at`作业，具体取决于您使用的操作系统。

# jquery - 结合点击功能和其他东西

> ID：14113195
> 
> 赞同：2
> 
> 时间：2013-01-01T18:46:00.723
> 
> 标签：jquery, jquery-mobile

我可以用更少的代码编写这个吗，也是 .click( 移动设备首选的功能还是我应该使用其他东西？

```
 $('.myclass a').removeClass('class1');
        $('.myclass a').click(function() {
            return false;
        }); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T18:47:33.793

您可以链接方法：

```
$('.myclass a').removeClass('class1').click(function(event) {
     return false; // event.preventDefault();
}); 
```

如果你正在为移动设备开发，你可以考虑使用 jQuery Mobile，它支持`tap`和`vclick`.

[http://jquerymobile.com/demos/1.2.0/docs/api/events.html](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T18:47:45.160

您可以使用[链接](http://tobiasahlin.com/blog/quick-guide-chaining-in-jquery/)。此外，.click 在移动设备上也可以正常工作，但您应该始终对其进行测试。有一些例外。

```
$('.myclass a').removeClass('class1').click(function() {
        return false;
    }); 
```

不要将 jQuery Mobile 仅仅用于点击处理，仅仅点击的过多开销是不值得的。仅在您需要更多移动集成时才使用它，如果这样做，请尝试仅在移动需要时才加载它。

# javascript - ZKOSS 处理 setAttr 失败 无法调用方法 'set' of null (TypeError)

> ID：14113196
> 
> 赞同：1
> 
> 时间：2013-01-01T18:46:05.200
> 
> 标签：javascript, zk

我正在拉扯我的头发。

我有 ZK 网格，然后在网格内还有另一个网格。两者都绑定到单独的视图模型。

将其视为社交网络墙。

Outer Grid 是一个渲染帖子的 ViewModel。然后对于每个帖子，使用一个内部网格，该网格绑定到另一个 ViewModel 以呈现评论。

好的，问题是**“无法处理 setAttr 无法调用 null 的方法 'set' (TypeError)”**

**如何调试此错误**。根本没有服务器端错误。顺便说一句，代码工作正常，但我时不时地开始得到这个错误。

我正在使用**ZK 6.5.1.1**最新版本。

注意：我知道没有代码会更难分析问题。但对我来说，发布一部分工作或有用的代码片段并不是一件容易的事。因此，如果有人知道如何调试这条可怕的消息，我将不胜感激。**我还看到其他类型的类似消息：挂载失败：无法调用 null 等的 replaceWidget 等。**

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T14:37:18.263

关于调试此类问题，您可以尝试以下操作：

.1。打开调试模式（参见 ref）

**zk.xml**

```
<zk>
    <client-config>
        <debug-js>true</debug-js>
    </client-config>
    <library-property>
        <name>org.zkoss.web.classWebResource.cache</name>
        <value>false</value>
    </library-property>
</zk> 
```

.2\. 尝试重现此问题，这里我创建了一个示例，通过手动取消绑定组件来重现类似问题，如下所示（单击“测试”按钮查看类似错误）

**测试.zul**

```
<zk>
    <textbox id="tbx" />
    <button label="test">
        <attribute name="onClick"><![CDATA[
            String uuid = tbx.getUuid();
            Clients.evalJavaScript("zk.Widget.$('$tbx').unbind();");
            tbx.setValue("abc");
        ]]></attribute>
    </button>
</zk> 
```

![已加载 test.zul](../Images/6ff3fa10d0f76c56ec9b6ebec65cd971.png)

.3\. 查看 chrome 的开发人员工具中的错误消息，然后单击源链接：

![chrome 控制台中的错误消息](../Images/e1075fc6654cefd8a8a31bd92eb93747.png)

![点击源链接后](../Images/1dc1d5e9ce3b41caa59b1dce4ad4065a.png)

.4\. 左键单击 setAttr 下的第一行以添加断点。

![添加断点](../Images/8b14c58279ebaeeb47019af68c39feeb.png)

.5\. 刷新页面，再次点击“测试”按钮，我们可以看到右侧的“wgt”为空，wgt通常表示一个小部件（客户端的组件）。

![断点重试](../Images/62b75f3f5b795914d33ec03ebe55f293.png)

.6\. 现在我们知道一个widget变为null，然后ZK执行它的setAttr命令，为了调试它，我们可以简单地在调用bind_时记录每个uuid和className（bind_是widget生命周期的函数，基本上实例化了所有dom元素一个小部件）由客户端编程，并在单击按钮时再次记录所有小部件。

例如，

**test.zul（更新）**

```
<zk>
    <script><![CDATA[
        var allUuids = [];
        zk.afterLoad("zul", function () {
            var _wgt = {};
            // override zk.Widget,
            // basically zk.Widget is the
            // root of all widget classes
            zk.override(zk.Widget.prototype, _wgt, {
                bind_: function (a, b, c) {
                    // call original function
                    _wgt.bind_.apply(this, arguments);

                    // each widget has a uuid and className
                    allUuids.push({uuid: this.uuid, ele: this.className});
                }
            });
        });
        function showAllUuids () {
            var info,
                wgt;
            for (var i = 0; i < allUuids.length; i++) {
                info = allUuids[i];
                // get widget by uuid
                wgt = zk.Widget.$('#'+info.uuid);
                // show the old className and current status
                // you can also try record some more information as needed
                // e.g., parent, previousSibling, sclass, etc
                zk.log(info.uuid + ' was ' + info.ele + ' now ' + (wgt? wgt.className : wgt));
            }
        }
    ]]></script>
    <textbox id="tbx" />
    <button label="test">
        <attribute name="onClick"><![CDATA[
            String uuid = tbx.getUuid();
            Clients.evalJavaScript("zk.Widget.$('$tbx').unbind();");
            tbx.setValue("abc");
            Clients.evalJavaScript("showAllUuids();");
        ]]></attribute>
    </button>
</zk> 
```

.7\. 现在我们将在单击“测试”按钮后收到下面带有更新的 zul 页面的日志消息，并让我们知道客户端的文本框小部件变为空，您还可以在 chrome 开发者工具网络中检查响应值。

![带有更新的 test.zul 的消息](../Images/4e5b72f279f0b40cdfc74db2cbed2a65.png)

![响应值](../Images/d414ca07f385c47ccc4719fa2fbdd0bd.png)

希望这可以帮助

**参考 ：**

[ZK 客户端编程](http://books.zkoss.org/wiki/Small_Talks/2010/April/Client_Side_Programming)

[打开调试模式](http://books.zkoss.org/wiki/ZK_Client-side_Reference/Introduction/Debugging)

[zk.Widget 中的 bind_](https://github.com/zkoss/zk/blob/master/zk/src/archive/web/js/zk/widget.js#L2798)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T02:30:55.087

此特定错误似乎是由于更新了已从 ZK 桌面分离/删除的组件。换句话说，在服务器端，您有一个对缓存但不再附加到组件树的组件的引用。当您尝试更新它时，ZK 可能会尝试将其状态与客户端相应的 Widget 同步。但是，由于它已分离，因此它不再存在于客户端，因此在 null 小部件上调用 setAttr 会给您此错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-07T20:17:28.767

尽管已经提供了可能的最佳答案，但我想补充一下，我遇到了这个错误，调试后发现网格组件中有一个 hflex="min"。我将其更改为 hflex="1" 并且错误消失了。这个错误是在一次更新 zk 版本几个版本后开始的，所以我不确定这个更改发生在哪个版本之间，但很难识别。希望简单地在您的代码库中搜索 hflex="min" 可能会节省一些时间......我认为垂直弯曲也是如此。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-07-25T12:41:26.283

当我们将某些内容设置为之前已经设置的元素时，它就会出现。

像

```
OFCchart chart = new OFCchart;
chart.setJSONScript("somedata");

//----- Some other place setting to the same---

chart.setJSONScript("somedata"); 
```

# iphone - NSDictionary 包含 从 plist 文件读取时的值

> ID：14113207
> 
> 赞同：1
> 
> 时间：2013-01-01T18:48:11.293
> 
> 标签：iphone, objective-c, ios

我目前正在尝试读取 plist 文件并尝试在 UITableView 中显示数据，但是在读取 plist 文件时我得到了 nil 数据。

**编辑**

plist文件结构：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
    <dict>
        <key>Title</key>
        <string>Mr</string>
        <key>First Name</key>
        <string>xxxxxx</string>
        <key>Last Name</key>
        <string>yyyyyyy</string>
        <key>Designation</key>
        <string>Senior Engineer</string>
    </dict>
</array>
</plist> 
```

现在在代码中

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"Data" ofType:@"plist"];

NSDictionary *dict = [[NSDictionary alloc] initWithContentsOfFile:path];

NSArray *valueArray = [dict allKeys];

/*
Printing description of path:
/Users/rock/Library/Application Support/iPhone Simulator/6.0/Applications/2567D2B3-56D4-4464-9EFC-CAB923ABE955/PlistTableView.app/Data.plist
Printing description of dict:
<nil>
Printing description of valueArray:
<nil>
*/ 
```

现在字典和数组都不包含数据这是什么原因？如何在表格视图中同时显示键和值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T18:59:15.970

您的 plist 文件包含一个数组*内的字典。*所以要么使用

```
NSArray *array = [[NSArray alloc] initWithContentsOfFile:path];
NSDictionary *dict = [array objectAtIndex:0]; 
```

或将 plist 文件的结构更改为

```
<plist version="1.0">
<dict>
    <key>Title</key>
    <string>Mr</string>
    <key>First Name</key>
    <string>xxxxxx</string>
    <key>Last Name</key>
    <string>yyyyyyy</string>
    <key>Designation</key>
    <string>Senior Engineer</string>
</dict>
</plist> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T19:00:59.140

在顶部你有一个`<array>`而不是`<dict>`。所以它应该是这样的......

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"Data" ofType:@"plist"];
NSArray *array = [[NSArray alloc] initWithContentsOfFile:path];
NSDictionary *dict=[array objectAtIndex:0];
NSArray *valueArray = [dict allKeys]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-01T18:52:32.253

在文件开头试试这个：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0"> 
```

# excel - EXCEL VBA 跳过空白行

> ID：14113217
> 
> 赞同：0
> 
> 时间：2013-01-01T18:49:13.580
> 
> 标签：excel, vba, rows, cells

```
Private Sub CommandButton1_Click()
Dim rng As Range
Dim cell As Variant

Set rng = Range("C8:C12")

For Each cell In rng
    Sheets("Sheet1").Range("A1:H7").Copy Destination:=Sheets("Quantity").Range("XFD4").End(xlToLeft).Offset(-3, 3)
    Sheets("Quantity").Range("XFD1").End(xlToLeft).Offset(0, 1).Value = cell.Offset(1, -1).End(xlUp).Value
    Sheets("Quantity").Range("XFD2").End(xlToLeft).Offset(0, 1).Value = cell.Value
    Sheets("Quantity").Range("XFD3").End(xlToLeft).Offset(0, 1).Value = cell.Offset(0, 1).Value  
Next
End Sub 
```

我想在这里完成的是`skip blank cell/row`. 因为它会将空数据复制到工作表中。是否有任何方法，例如 Not isEmpty 或 isBlank `For loop`？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T18:52:39.503

您应该能够检查`IsEmpty(cell)`单元格是否为空。

例如（未经测试）：

```
For Each cell In rng
    If Not IsEmpty(cell) Then
        Sheets("Sheet1").Range("A1:H7").Copy Destination:=Sheets("Quantity").Range("XFD4").End(xlToLeft).Offset(-3, 3)
        Sheets("Quantity").Range("XFD1").End(xlToLeft).Offset(0, 1).Value = cell.Offset(1, -1).End(xlUp).Value
        Sheets("Quantity").Range("XFD2").End(xlToLeft).Offset(0, 1).Value = cell.Value
        Sheets("Quantity").Range("XFD3").End(xlToLeft).Offset(0, 1).Value = cell.Offset(0, 1).Value 
    End If 
Next 
```

# android - 在预定时间以编程方式发送 SMS

> ID：14113218
> 
> 赞同：3
> 
> 时间：2013-01-01T18:49:30.733
> 
> 标签：android

有没有办法在预定时间以编程方式发送短信？不检查每秒的当前时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T18:51:16.183

使用 Android Timer 类的[schedule 方法](http://developer.android.com/reference/java/util/Timer.html#schedule%28java.util.TimerTask,%20java.util.Date%29)来调度要发送的短信，在调度[TimerTask](http://developer.android.com/reference/java/util/TimerTask.html#run%28%29)的 run() 方法中使用如下内容：

```
SmsManager sms = SmsManager.getDefault();
sms.sendTextMessage(phoneNumber, null, message, null, null); 
```

对于格式化的日期字符串，要获取函数的`when`参数`schedule()`，请使用`SimpleDateFormat`类' [`parse() method`](http://developer.android.com/reference/java/text/SimpleDateFormat.html#parse%28java.lang.String,%20java.text.ParsePosition%29)。如果您的日期字符串是“12/31/2013-12:12”，那么您可以使用以下方法获取日期对象：

```
SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy-HH:mm");
Date when = sdf.parse(yourDateString, 0); 
```

SimpleDateFormat[的其他选项在此处](http://developer.android.com/reference/java/text/SimpleDateFormat.html)。

# tooltip - 工具提示从数据库中获取值的新行

> ID：14113219
> 
> 赞同：0
> 
> 时间：2013-01-01T18:49:39.977
> 
> 标签：tooltip

```
$price = mysql_result($result, $num, "drinks_shot"); $price2 = mysql_result($result, $num, "drinks_bottle");

$append = $clean_name.'<br> Per shot: Php'.$price.'<br> Per bottle: Php'.$price2.'.00'; $description = mysql_result($result, $num, "drinks_image"); echo "<td class='label'><img src='". mysql_result($result, $num, 'drinks_image')."' onclick='addtocart(". mysql_result($result, $num, 'drinks_id').")'  class='masterTooltip' title= '".$append."'<br>"; 
```

如果我能让它显示出来就好了

```
hennessy
price1
price2 
```

我发现了关于我的问题的类似帖子，但没有一个真正有效。请帮忙。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T14:41:06.853

你想在`title=""`工具提示中换行吗？而不是使用`<br>`，使用`\n`并确保它在双（`"`）引号内而不是单引号内。像这样：

```
$append = $clean_name . "\n Per shot: Php" . $price . "\n ..."; 
```

# c# - 在选项卡控件中时，ListViewItem 未选择“GUI”

> ID：14113224
> 
> 赞同：0
> 
> 时间：2013-01-01T18:49:58.913
> 
> 标签：c#, winforms

我有一个`ListView`内一个`TabControl`。添加和选择项目时，代码明智：

```
ListViewItem item = new ListViewItem();
item.Text = "LV1";
listView1.Items.Add(item);

listView1.Items[0].Selected = true; 
```

它确实被选中，但它不会**变成**蓝色（如在 GUI 中选择的那样）。选择后我已经尝试过`listView1.Focus();`，但无济于事。

有没有办法让它正常工作？此“错误”仅在`ListView`内部 a时发生`TabControl`，当它不是正常工作时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:03:26.893

```
listView1.Select();
listView1.Items[0].Selected = true; 
```

# c# - 从 Windows 窗体运行控制台应用程序

> ID：14113225
> 
> 赞同：-2
> 
> 时间：2013-01-01T18:50:04.983
> 
> 标签：c#, console

> **可能重复：**
> [从其他控制台应用程序运行控制台应用程序](https://stackoverflow.com/questions/2366168/run-console-application-from-other-console-app)

在我的程序中有一个`TextBox`用户应该编写我要求他做的程序（简单）。

如何运行他的程序以确保他已经完成了我告诉他的事情？很高兴知道我已经对程序进行了自动编译并确保没有语法错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T18:57:03.113

[C# 编译器 - codeproject](http://www.codeproject.com/Articles/1931/C-Compiler)描述了使用[CodeDom 编译器](http://msdn.microsoft.com/en-us/library/system.codedom.compiler.aspx)API 获得 C# 编译器的步骤：

1.  创建 CSharpCodeProvider 的实例（VBCodeProvider for Visual Basic）
2.  获取 ICodeCompiler 的接口
3.  为编译器选项提供 CompilerParameters
4.  使用 ICodeCompiler 接口的 CompileAssemblyFromSource 方法编译源代码
5.  进程编译器结果
6.  如果没有错误，则执行生成的应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T18:58:09.650

如果编译的程序只是从标准输入和输出中读写，使用[`ProcessStartInfo`](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.aspx)with`RedirectStandardInput`和`RedirectStandardOutput`set。开始这个过程[`Process.Start(ProcessStartInfo)`](http://msdn.microsoft.com/en-us/library/0w4h05yb.aspx)

有关示例，请参阅[使用进程类重定向标准输入/输出。](http://www.c-sharpcorner.com/UploadFile/edwinlima/SystemDiagnosticProcess12052005035444AM/SystemDiagnosticProcess.aspx)

# hbase - Hbase Shell ValueFilter 错误 - “java.lang.IllegalArgumentException：不正确的过滤器字符串 ValueFilter(=, '723270266')”

> ID：14113229
> 
> 赞同：0
> 
> 时间：2013-01-01T18:51:01.550
> 
> 标签：hbase

我正在尝试扫描 hbase 表并按列值过滤行。

我正在使用的 shell 命令：

```
scan 'audit', {COLUMNS => 'cf1:n_id', LIMIT => 1, FILTER => "ValueFilter(=, '723270266')"} 
```

但是，出现以下错误：

```
Caused by: java.lang.IllegalArgumentException: Incorrect comparator
at org.apache.hadoop.hbase.filter.ParseFilter.parseComparator(ParseFilter.java:815)
at org.apache.hadoop.hbase.filter.ParseFilter.createComparator(ParseFilter.java:789)
at org.apache.hadoop.hbase.filter.CompareFilter.extractArguments(CompareFilter.java:134)
at org.apache.hadoop.hbase.filter.ValueFilter.createFilterFromArguments(ValueFilter.java:68)
... 212 more

ERROR: java.lang.IllegalArgumentException: Incorrect filter string ValueFilter(=, '723270266') 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T11:48:41.600

问题在于您申请扫描的查询。

```
{ FILTER => "SingleColumnValueFilter('f1', 'col_a', >, 'binary:1')" } 
```

是在 shell 中使用过滤器的示例。字符串数据以外的类型需要类型前缀。需要指定族和限定符。

如果您只需要查看数据，应用一些过滤器，您可以使用我构建的这个简单工具 [Hbase Manager](https://sourceforge.net/projects/hbasemanagergui/files/latest/download)。您可以将此工具用于 0.90.4 和 0.92 版本的 Hbase。

# android - 适配器上的双 AddView

> ID：14113249
> 
> 赞同：0
> 
> 时间：2013-01-01T18:52:52.077
> 
> 标签：android, adapter

我做了线性布局并在上面添加了视图，但是，视图出现了两次，我不知道为什么会这样。有人可以修复它吗？我有关于适配器的问题，我看了几次，我发现这里没有什么奇怪的。但是我删除了 addView 的语句，它不会出现我之前添加的任何视图。

```
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    if(convertView == null)
    {
        LayoutInflater inflater = LayoutInflater.from(parent.getContext());
    //  inflater.inflate(R.layout. parent,false);
        convertView = inflater.inflate(R.layout.exerciseui_item,parent,false);

    }
    Exercise question = exercises.get(position);
    TextView question_view = (TextView) convertView.findViewById(R.id.exercise_question);
    String question_test = question.getOrder() + " " + question.getText()  ;
    question_view.setText(question_test);
    int answer_num = question.getAnswer().size();

    LinearLayout linear = (LinearLayout) convertView.findViewById(R.id.exercise_answer);
        ExerciseAnswer answer = question.getAnswer().get(0);
        int answer_order = answer.getOrder();
        String answer_text = answer.getText();
        String answer_final = answer_order + " " + answer_text;
        TextView answer_view = new TextView(linear.getContext());
        answer_view.setPadding(20, 5, 5, 5);
        answer_view.setTextSize(30);
        answer_view.setText(answer_final);
        linear.addView(answer_view);

    return convertView;
} 
```

以下是executiveui_item的xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:id="@+id/exercise_answer" >

<TextView
    android:id="@+id/exercise_question"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"

    android:textSize="13dp"
    ></TextView>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T03:00:33.093

听起来视图回收可能是这背后的原因。您的适配器负责创建数据集中每个项目的视图（这是 getView 方法的目的）。Android为了节省资源，会循环使用views。这就是为什么 getView 方法被传递一个 View 的原因。如果传入的视图是非空的，这意味着它已经被用来显示这个列表中的数据。

因此，适配器负责“清理”视图。在您的情况下，这意味着您必须考虑到您可能已经将 TextView 元素动态添加到此视图中（在之前的 getView 调用中）。未能“清理”您的视图意味着每次重新循环视图时，您的方法都会向布局中添加另一个 TextView。

在您的情况下，我建议在 LinearLayout 中搜索答案 TextEdit。（给这个 TextEdit 一个 id 以便您可以使用 findViewById() 找到它）。如果它已经存在，那么您不需要添加它。

另一种方法是在您的 XML 布局中包含第二个 TextEdit。我不清楚为什么需要动态添加它。

# html - 跨到一个里的右边

> ID：14113250
> 
> 赞同：1
> 
> 时间：2013-01-01T18:52:56.620
> 
> 标签：html, css

我正在尝试将一个文本项跨越到`li`列表的右侧，以在文本框旁边显示一条消息。

```
<li class="name">
    <label for="name">Name:</label>
    <input type="text" name="name" id="name" />
    <span id="nameInfo"></span>
</li> 
```

消息仅显示在文本框的底部。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T19:07:41.243

使用 CSS 分配足够的宽度来*命名*类

```
.name{
    width:300px;
}​ 
```

尝试将宽度设置为 60 像素，例如它必须以有序行呈现。

# node.js - 节点 JS 服务器到服务器连接

> ID：14113254
> 
> 赞同：9
> 
> 时间：2013-01-01T18:54:00.817
> 
> 标签：node.js, client, socket.io

是否可以从另一台服务器连接到 NodeJS 服务器？两个 NodeJS 服务器相互通信？

```
//Server Code
var io = require('socket.io').listen(8090);

io.sockets.on('connection', function (socket) {
io.sockets.emit('this', { will: 'be received by everyone'});

socket.on('private message', function (from, msg) {
   console.log('I received a private message by ', from, ' saying ', msg);
});

socket.on('disconnect', function () {
   io.sockets.emit('user disconnected');
  });
});

//Client Code in Server Code. Connecting to another server.
io.connect( "http://192.168.0.104:8091" );  //Connect to another server from this one.

//ETC... 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-01T23:01:00.073

这是一个创建服务器和连接到该服务器的客户端的简单示例。请记住，您发送的内容必须是缓冲区（字符串会自动转换为缓冲区）。客户端和服务器相互独立工作，因此可以放在同一个应用程序或完全不同的计算机上。

**服务器（server.js）：**

```
const net = require("net");

// Create a simple server
var server = net.createServer(function (conn) {
    console.log("Server: Client connected");

    // If connection is closed
    conn.on("end", function() {
        console.log('Server: Client disconnected');
        // Close the server
        server.close();
        // End the process
        process.exit(0);
    });

    // Handle data from client
    conn.on("data", function(data) {
        data = JSON.parse(data);
        console.log("Response from client: %s", data.response);
    });

    // Let's response with a hello message
    conn.write(
        JSON.stringify(
            { response: "Hey there client!" }
        )
    );
});

// Listen for connections
server.listen(61337, "localhost", function () {
    console.log("Server: Listening");
}); 
```

**客户端（client.js）：**

```
const net = require("net");

// Create a socket (client) that connects to the server
var socket = new net.Socket();
socket.connect(61337, "localhost", function () {
    console.log("Client: Connected to server");
});

// Let's handle the data we get from the server
socket.on("data", function (data) {
    data = JSON.parse(data);
    console.log("Response from server: %s", data.response);
    // Respond back
    socket.write(JSON.stringify({ response: "Hey there server!" }));
    // Close the connection
    socket.end();
}); 
```

和对象都实现了`conn`接口。`socket`[`Stream`](http://nodejs.org/api/stream.html#stream_stream)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:19:10.997

检查[Substrack 的 dnode](https://github.com/substack/dnode)。它自动将文字对象从第一个环境映射到第二个环境。您获得了一种开箱即用的 RPC。它也适用于浏览器......

# java - 未生成密钥哈希

> ID：14113255
> 
> 赞同：4
> 
> 时间：2013-01-01T18:54:02.487
> 
> 标签：java, android, facebook, keytool, android-keystore

我试图从我的 Android 应用程序中获取密钥哈希。Facebook SDK 3.0 给出了以下代码：

```
keytool -exportcert -alias androiddebugkey -keystore %HOMEPATH%\.android\debug.keystore | openssl sha1 -binary | openssl base64 
```

当我运行它时，它首先说`binary:no error`；然后它会询问我输入的密码`android`。按回车后，它会在我期望密码的地方返回空白。

[我使用了这里](https://stackoverflow.com/questions/4347924/key-hash-for-facebook-android-sdk)提到的解决方案；这确实给了我一个密钥哈希，但是当我使用它时，没有一个会话打开。

我的 java keytool 存储在：

```
C:\Program Files\Java\jre7\bin 
```

OpenSSL 存储在：

```
F:\openssl\bin 
```

当我在 Windows 的 MD 中运行它时，我给出了正确的文件路径。

请帮我解决这个问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T19:56:48.720

Windows 获取 keytool 总是有点麻烦和棘手，我建议替代方案。`onCreate`在您的应用程序的方法中运行以下代码：

```
 try {
        PackageInfo info = getPackageManager().getPackageInfo(
            "COM.YOUR.PACKAGE.NAME", 
            PackageManager.GET_SIGNATURES);
        for (Signature signature : info.signatures) {
            MessageDigest md = MessageDigest.getInstance("SHA");
            md.update(signature.toByteArray());
            Log.d("My Keyhash", Base64.encodeToString(md.digest(), Base64.DEFAULT));
        }
    } catch (Exception e) {
        Log.e("My Keyhash", e.toString());
    } 
```

并观察 logcat 中的日志输出以获取您的 keyhash。确保将上面的包名称替换为您自己的。

编辑：

> 密钥哈希已正确上传，但会话仍未打开...登录到 Facebook 时，它首先通过应用程序请求我的许可，然后在我接受弹出窗口后显示“com.facebook.facebookexception：会话提供给未打开状态的请求”

确保您的片段/活动中有此代码：

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    uiHelper.onActivityResult(requestCode, resultCode, data);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T20:46:49.433

你可能弄错了密码。

看看我的回答[这里](https://stackoverflow.com/a/17732453/2476453)。

希望有帮助

# php - 根据php中的键对数组值进行分组？

> ID：14113256
> 
> 赞同：19
> 
> 时间：2013-01-01T18:54:10.973
> 
> 标签：php, arrays, merge, grouping

我有一个这样的数组：

```
$str=
   Array
(
    [No] => 101
    [Paper_id] => WE3P-1
    [Title] => "a1"
    [Author] => ABC
    [Aff_list] => "University of South Florida, Tampa, United States"
    [Abstracts] => "SLA"

)

Array
(
    [No] => 101
    [Paper_id] => WE3P-1
    [Title] => "a2"
    [Author] => DEF
    [Aff_list] => "University of South Florida, Tampa, United States"
    [Abstracts] => "SLA "

)

Array
(
    [No] => 104
    [Paper_id] => TU5A-3
    [Title] => "a3"
    [Author] => GHI
    [Aff_list] => "University of Alcala, Alcala de Henares, Spain"
    [Abstracts] => "Microwave"

) 
```

我想根据“否”作为主键对数组中的元素进行分组。输出应如下所示：

```
 array(6) {
  ["No"]=>
  string(6) "101"
  ["Paper_id"]=>
  string(6) "WE3P-1"
  ["Title"]=>
  string(80) ""a-1"
  ["Author"]=>
  string(14) "ABC"
  ["Aff_list"]=>
  string(51) ""University of South Florida, Tampa, United States""
  ["Abstracts"]=>
  string(5) ""(SLA)"
"
}
array(6) {
  ["No"]=>
  string(3) "104"
  ["Paper_id"]=>
  string(6) "TU5A-3"
  ["Title"]=>
  string(40) "a2"
  ["Author"]=>
  string(20) "DEF"
  ["Aff_list"]=>
  string(48) ""University of Alcala, Alcala de Henares, Spain""
  ["Abstracts"]=>
  string(9) ""Microwave"
"
} 
```

请注意，作者的值已与主键“否”合并。有人可以帮我解决这个问题吗？

我试过这样做：

```
foreach($paper_info as $element) {
    foreach($element as $v) {
        $id = $element['No'];
        if (!isset($out[$id])) {
            $out[$id] = [
                'No' => $element['No'],
                'Paper_id' => $element['Paper_id'],
                'Title' => $element['Title'],
                'Authors' => [],
                'Aff_list' => $element['Aff_list'],
                'Abstracts' => $element['Abstracts']
            ];
        }
        $out[$id]['Authors'][] = ['Authors' => $element['Author']];
    }
} 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-02-27T00:41:11.413

您可以使用通用函数：

```
function _group_by($array, $key) {
    $return = array();
    foreach($array as $val) {
        $return[$val[$key]][] = $val;
    }
    return $return;
} 
```

我添加了一些示例代码来测试

```
<?php

$list= [
[   'No' => 101,
    'Paper_id' => 'WE3P-1',
    'Title' => "a1",
    'Author' => 'ABC',
    'Aff_list' => "University of South Florida, Tampa, United States",
    'Abstracts' => "SLA"
] ,
[   'No' => 101,
    'Paper_id' => 'WE3P-1',
    'Title' => "a2",
    'Author' => 'DEF',
    'Aff_list' => "University of South Florida, Tampa, United States",
    'Abstracts' => "SLA"
] ,
[    'No' => 104, 
    'Paper_id' => 'TUSA-3',
    'Title' => "a3",
    'Author' => 'GH1',
    'Aff_list' => "University of Alcala, Alcala de Henares, Spain",
    'Abstracts' => "Microwave"
] ];

print_r(_group_by($list, 'No')); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-01T19:19:51.080

您问题中的数据格式不明确，但假设结构`$paper_info`如下所示，这应该可以为您提供所需的输出。

```
$paper_info = array(
    array(
        'No' => "101",
        'Paper_id' => "WE3P-1",
        'Title' =>"An Electrically-Small, 3-D Cube Antenna Fabricated with Additive Manufacturing",
        'Author' => "Ibrahim Nassar",
        ...
    ),
    array(
        'No' => "101",
        ...
        'Author' => "Thomas Weller",
        ...
    )
);

$out = array();
foreach($paper_info as $paper) {
    $id = $paper['No'];
    if (!isset($out[$id])) {
        $out[$id] = $paper;
        $out[$id]['Author'] = array();
    }
    $out[$id]['Author'][] = $paper['Author'];
} 
```

您还应该在开发环境中打开警告并显示错误。我有一种感觉，它会帮助你。在开发过程中，您可以配置您的 php.ini，或者在您的 php 脚本的开头插入此代码。只需确保在投入生产之前将其删除即可。

```
error_reporting(E_ALL);
ini_set('display_errors', '1'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-21T11:33:15.167

感谢crafter 的超棒功能，如果有人需要为多个键分组，我将crafter 功能编辑为：

```
function _group_by($array, $keys=array()) {
    $return = array();
    foreach($array as $val){
        $final_key = "";
        foreach($keys as $theKey){
            $final_key .= $val[$theKey] . "_";
        }
        $return[$final_key][] = $val;
    }
   return $return;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-26T08:12:20.030

感谢火山口和法比奥的回答。我更新了代码以检查密钥的大小是否不大于一 (1)，不会附加下划线。

```
function _group_by($array, $keys=array()) {
    $return = array();
    $append = (sizeof($keys) > 1 ? "_" : null);
    foreach($array as $val){
        $final_key = "";
        foreach($keys as $theKey){
            $final_key .= $val[$theKey] . $append;
        }
        $return[$final_key][] = $val;
    }
    return $return;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-18T11:54:31.050

我写了另一个版本的 Crafter 答案，即从实际数组中删除给定的键。可以帮助某人。

```
 public function _group_by($array, $key) {
        $return = array();
        foreach($array as $val) {
            $return[$val[$key]] = $val;
            unset($return[$val[$key]][$key]);
        }
        return $return;
    } 
```

# javascript - gapi.client.load 与 google.load

> ID：14113257
> 
> 赞同：11
> 
> 时间：2013-01-01T18:54:13.133
> 
> 标签：javascript, google-api, google-api-js-client

我对如何正确加载 Google 的 API 感到困惑。我看到提到了两种不同的方法：

**首先**：谷歌 API 加载器（[https://developers.google.com/loader](https://developers.google.com/loader)）。我在 html 文档中看到了这样的用法：

```
<script src="https://www.google.com/jsapi"></script> 
```

然后在一个 JS 文件中，它会像这样使用：

```
google.load('visualization', '1.0', {'packages':['corechart']}) 
```

**第二**：Google API Javascript 客户端（[http://code.google.com/p/google-api-javascript-client/](http://code.google.com/p/google-api-javascript-client/)）。这个加载如下：

```
<script src="https://apis.google.com/js/client.js"></script> 
```

然后稍后使用，如：

```
gapi.client.load('fusiontables', 'v1') 
```

如果您查看这两个 API 中的每一个的文档，我会觉得第二种方法是当前的“现代”方法，而第一种方法较旧。旧方法支持的 API 比新方法少，但它们并不相同。我想在我的应用程序中同时使用 Fusion Tables 和 Google Charts。据我所知，我认为我需要加载这两个 API。

**我的问题：**这两个 API 是否确实不同且彼此独立？我将“google.load”方法解释为较旧的“遗留”方法是否正确？如果我需要同时使用这两个 API，它们之间是否存在冲突？

感谢您的任何想法！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T16:28:28.613

你的评估是正确的。这些 API 彼此不同，在加载它们时不应该有冲突（尽管您应该在执行任何工作之前验证它们的两个“加载时”方法都已被触发）。但是，我不会将 google.load API 描述为“遗留”；google.load 是加载某些 Google JS 客户端的通用机制，并不反映底层客户端库的状态。

# java - 等待 JTextField "SPACE" 事件

> ID：14113258
> 
> 赞同：0
> 
> 时间：2013-01-01T18:54:23.580
> 
> 标签：java, swing, jtextfield, keyevent

我有一个带有 JTextField 的 JPanel，我想实现`waitForTextFieldSpace`. 我认为制作自定义 JTextField 将是最优雅的解决方案，但我并不完全确定。

```
public class MyPanel {
   JTextField textField;

   //...constructor, methods, etc

   public void waitForTextFieldSpace() {
      //...don't return until the user has pressed space in the text field
   }
} 
```

我确实有一些代码有一个 JFrame 等待空格键。但我不确定如何执行上面的文本字段任务。

```
public void waitForKey(final int key) {
        final CountDownLatch latch = new CountDownLatch(1);
        KeyEventDispatcher dispatcher = new KeyEventDispatcher() {
            public boolean dispatchKeyEvent(KeyEvent e) {
                if (e.getID() == KeyEvent.KEY_PRESSED && e.getKeyCode() == key) {
                    latch.countDown();
                }
                return false;
            }
        };
        KeyboardFocusManager.getCurrentKeyboardFocusManager().addKeyEventDispatcher(dispatcher);
        try {
            //current thread waits here until countDown() is called (see a few lines above)
            latch.await();
        } catch (InterruptedException e1) {
            e1.printStackTrace();
        }  
        KeyboardFocusManager.getCurrentKeyboardFocusManager().removeKeyEventDispatcher(dispatcher);

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T20:19:33.867

*   永远不要使用`Keylistener`（没有真正的理由，例如确定 3 个或更多按键是按下）用于`JTextComponets`, 使用`Document`, `DocumentListener`,`DocumentFilter`

*   使用 KeyBinding 作为标准键，注意 - 必须检查 API 中是否实现了不需要的键（key_shortcut）

*   在这种情况下，将 [DocumentFilter](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/DocumentFilter.html)与[Patern一起使用](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)

简单的例子

```
import java.awt.*;
import java.util.ArrayList;
import java.util.List;
import java.util.regex.Pattern;
import javax.swing.*;
import javax.swing.event.*;
import javax.swing.text.*;

public class TextAreaTest extends JFrame {

    private static final long serialVersionUID = 1L;
    private JTextArea textArea;

    public TextAreaTest() {
        textArea = new JTextArea();
        textArea.setPreferredSize(new Dimension(60, 32));
        textArea.setOpaque(true);
        textArea.setLineWrap(true);
        textArea.setWrapStyleWord(true);
        ((AbstractDocument) textArea.getDocument()).setDocumentFilter(new DocumentFilter() {

            @Override
            public void insertString(FilterBypass fb, int offset, String string, AttributeSet attr) throws BadLocationException {
                //string = string.replaceAll("\\{", "\\{}");
                super.insertString(fb, offset, string, attr);
            }

            @Override
            public void replace(FilterBypass fb, int offset, int length, String text, AttributeSet attrs) throws BadLocationException {
                if (Pattern.compile("\\p{Space}").matcher(text).find()) {
                    System.exit(0);
                }
                //text = text.replaceAll("\\{", "\\{}");
                super.replace(fb, offset, length, text, attrs);
            }
        });

        textArea.getDocument().addDocumentListener(new DocumentListener() {

            @Override
            public void changedUpdate(DocumentEvent e) {
                update(e);
            }

            @Override
            public void insertUpdate(DocumentEvent e) {
                update(e);
            }

            @Override
            public void removeUpdate(DocumentEvent e) {
                update(e);
            }

            private void update(DocumentEvent e) {
                List<String> lines = getLines(textArea);
                String lastLine = lines.get(lines.size() - 1);
                int tabbedTextWidth = Utilities.getTabbedTextWidth(new Segment(
                        lastLine.toCharArray(), 0, lastLine.length()), textArea.getFontMetrics(textArea.getFont()), 0, null, 0);
                int lineHeight = getLineHeight(textArea);
                if (lines.size() * lineHeight > textArea.getHeight() || tabbedTextWidth > textArea.getWidth()) {
                    System.out.println("Too big! Should refuse the update!");
                }
            }
        });
        getContentPane().add(textArea);
    }

    private static List<String> getLines(JTextArea textArea) {
        int lineHeight = getLineHeight(textArea);
        List<String> list = new ArrayList<String>();
        for (int num = 0;; num++) {
            int i = textArea.viewToModel(new Point(0, num * lineHeight));
            int j = textArea.viewToModel(new Point(0, (num + 1) * lineHeight));
            if (i == 0 && j == 0) {
                continue;
            }
            if (textArea.getDocument().getLength() == i && i == j) {
                break;
            }
            String s = removeTrailingNewLine(textArea.getText().substring(i, j));
            list.add(s);
            //System.out.println(i + " " + j + " = " + s);
        }
        return list;
    }

    private static int getLineHeight(JTextArea textArea) {
        return textArea.getFontMetrics(textArea.getFont()).getHeight();
    }

    private static String removeTrailingNewLine(String s) {
        if (s.endsWith("\n")) {
            return s.substring(0, s.length() - 1);
        } else {
            return s;
        }
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                TextAreaTest test = new TextAreaTest();
                test.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                test.pack();
                test.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T19:44:18.667

您是否考虑过使用关键事件侦听器？您可以将其添加到您的文本字段或区域并检查它的特定键。我将它用于诸如 enter 或 tab 之类的东西，因此当用户按下一个时，它会启动一个差异操作。

[Java 键监听器](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)

文档侦听器会为您工作吗？每次文本字段中的值更改时都会进行检查。

[文档监听器](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)

这是我对文本字段所做的一些示例代码，以便在按下某个键时采取行动。

```
textField.addKeyListener(new java.awt.event.KeyAdapter() {
    public void keyPressed(final java.awt.event.KeyEvent evt) {
        textFieldKeyPressed(evt);
    }
});

private void textFieldKeyPressed(final java.awt.event.KeyEvent evt) {
    final int key = evt.getKeyCode();
    if (key == KeyEvent.VK_ENTER || key == KeyEvent.VK_TAB) {
        if (!textField.getText().equals("Updating")) {
            loadTable();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T20:15:15.130

正确的解决方案是创建一个自定义 JTextField 如下

```
public class MyTextField extends JTextField {

    private static final long serialVersionUID = 1833734152463502703L;

    public MyTextField() {

    }

    public void waitForKey(final int key) {
        final CountDownLatch latch = new CountDownLatch(1);
        KeyEventDispatcher dispatcher = new KeyEventDispatcher() {
            public boolean dispatchKeyEvent(KeyEvent e) {
                if (e.getID() == KeyEvent.KEY_PRESSED && e.getKeyCode() == key) {
                    latch.countDown();
                }
                return false;
            }
        };
        KeyboardFocusManager.getCurrentKeyboardFocusManager().addKeyEventDispatcher(dispatcher);
        try {
            //current thread waits here until countDown() is called (see a few lines above)
            latch.await();
        } catch (InterruptedException e1) {
            e1.printStackTrace();
        }  
        KeyboardFocusManager.getCurrentKeyboardFocusManager().removeKeyEventDispatcher(dispatcher);

    }

} 
```

然后在原始方法中，只需在 MyTextField 对象上调用 waitForKey()

# symfony - 如何在 Symfony2 中向 SonataAdminBundle 仪表板添加自定义链接或按钮

> ID：14113259
> 
> 赞同：20
> 
> 时间：2013-01-01T18:54:27.010
> 
> 标签：symfony, sonata-admin

我是 symfony2 和 SonataAdminBundle 的新手。

我已将 3 个实体添加到 SonataAdminBundle 仪表板，它们成功显示。

实体出现时带有默认链接 - “添加新”和“列表”按钮。

我希望能够做到以下几点

1.  我想向仪表板上的一个实体添加第三个链接。
2.  我希望能够在默认列表页面中添加指向位于网格上方的按钮的链接。
3.  我希望能够添加/自定义出现在编辑或创建新页面的表单下的链接

我一直无法找到一种方法来完成上述任何一项，一直在寻找几个小时，任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-01T21:50:36.320

要**在 dashbord Sonata Admin 中显示自定义元素，请**使用 Sonata Block Bundle。要添加自定义链接或按钮，您需要使用 Sonata Block Bundle 创建一个新块。Admin Bundle 的核心模板 (dashboard.html.twig) 迭代配置为运行的块（在应用程序的 config.yml 中）。尽管如此，Admin Bundle 仍会迭代模板 block_admin_list.html.twig 中的所有实体块。创建您的自定义块模板，您可以从这里进行布局来包装您的自定义组（部分）和按钮，以便它们具有与实体组相同的感觉。

好的，这是介绍。

例如，我们要制作自定义时事通讯部分。

有以下步骤：

1.  创建实现 BlockBundleInterface 的新块类
2.  创建新的块模板
3.  创建块服务（阅读并了解 Symfony 2 库中的服务是什么）
4.  将新创建的服务添加到 Sonata Block Bundle 配置
5.  将新创建的服务添加到 Sonata Admin Bundle 配置
6.  进入仪表板并享受新的组/按钮/链接/whatever-stuff-you-put-in-your-block-template :)

Ad1)**创建新的块类**

一般说明如下：[http ://sonata-project.org/bundles/block/master/doc/reference/your_first_block.html](http://sonata-project.org/bundles/block/master/doc/reference/your_first_block.html)

我的文件如下所示：

```
<?php

namespace InstitutoStorico\Bundle\NewsletterBundle\Block;

use Symfony\Component\HttpFoundation\Response;

use Sonata\AdminBundle\Form\FormMapper;
use Sonata\AdminBundle\Validator\ErrorElement;

use Sonata\BlockBundle\Model\BlockInterface;
use Sonata\BlockBundle\Block\BaseBlockService;

class NewsletterBlockService extends BaseBlockService
{
    public function getName()
    {
        return 'My Newsletter';
    }

    public function getDefaultSettings()
    {
        return array();
    }

    public function validateBlock(ErrorElement $errorElement, BlockInterface $block)
    {
    }

    public function buildEditForm(FormMapper $formMapper, BlockInterface $block)
    {
    }

    public function execute(BlockInterface $block, Response $response = null)
    {
        // merge settings
        $settings = array_merge($this->getDefaultSettings(), $block->getSettings());

        return $this->renderResponse('InstitutoStoricoNewsletterBundle:Block:block_my_newsletter.html.twig', array(
            'block'     => $block,
            'settings'  => $settings
            ), $response);
    }
} 
```

我添加了一些读取 Sonata Media Bundle 代码文件的行。

Ad2)**创建新的块模板**

我从 Sonata Admin 包的 block_admin_list.html.twig 中获取的布局。

我的文件如下所示：

```
{% extends 'SonataBlockBundle:Block:block_base.html.twig' %}

{% block block %}
<table class="table table-bordered table-striped sonata-ba-list">
    <thead>
        <tr>
            <th colspan="3">Newsletter - inviare</th>
        </tr>
    </thead>

    <tbody>
        <tr>
            <td>
                <div class="btn-group" align="center">
                    <a class="btn btn-small" href="#">Servizio Newsletter</a>
                </div>
            </td>
        </tr>
    </tbody>
</table>
{% endblock %} 
```

Ad3)**创建屏蔽服务**

在您的包中有一个文件，您可以在其中声明服务（services.yml 或 admin.yml）。任何。但重要的是它被插入到您的应用程序的“导入”部分的 config.yml 中。

我的服务声明如下所示：

```
sonata.block.service.newsletter:
    class: InstitutoStorico\Bundle\NewsletterBundle\Block\NewsletterBlockService
    arguments: [ "sonata.block.service.newsletter", @templating ]
    tags:
        - { name: sonata.block } 
```

Ad4) 将新创建的服务添加到 Sonata **Block Bundle 配置**

此配置被放入应用程序的 config.yml 中。

我的配置如下所示：

```
#Sonata Block Bundle
sonata_block:
    default_contexts: [cms]
    blocks:
        sonata.admin.block.admin_list:
            contexts:   [admin]
        sonata.block.service.text: ~
        sonata.block.service.action: ~
        sonata.block.service.rss: ~
        sonata.block.service.newsletter: ~ 
```

Ad5) 将新创建的服务添加到**Sonata Admin Bundle 配置**

此配置被放入应用程序的 config.yml 中。

我的配置如下所示：

```
# Sonata Admin Generator
sonata_admin:
    ...
    dashboard:
        blocks:
            # display a dashboard block
            - { position: left, type: sonata.admin.block.admin_list }
            - { position: left, type: sonata.block.service.newsletter} 
```

Ad6)**进入仪表板并享受**

就这样。看起来很复杂，但说实话并不复杂。重要的是，它是一种修改仪表板页面的简洁方式，无需重写整个模板。所有这些我都学会了阅读 Admin Bundle 的源代码 :) 全天

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-20T21:15:26.707

我在执行方法时遇到了麻烦（我使用的是 Sonata 2.3.x ）。这是对我有用的代码。

*注意 BlockContextInterface 和 $blockContext->getBlock() ：*

```
 public function execute(BlockContextInterface $blockContext, Response $response = null)
{
    // merge settings
    $settings = array_merge($this->getDefaultSettings(), $blockContext->getSettings());

    return $this->renderResponse('bundleName:Block:templateName.html.twig', array(
        'block'     => $blockContext->getBlock(),
        'settings'  => $settings
        ), $response);
} 
```

# c++ - WinSock 分块数据编码

> ID：14113262
> 
> 赞同：2
> 
> 时间：2013-01-01T18:54:47.933
> 
> 标签：c++, sockets, winsock2, http-chunked

当我连接到某些网站时，它给了我：

```
Content-Type: text/html; charset=ISO-8859-1

Connection: close

Transfer-Encoding: chunked

Date: Tue, 01 Jan 2013 18:49:53 GMT   

fff8 
```

在文件的末尾，它看起来像：

```
</script><!-- vBadvanced 1-3-9-4-8-0 -->

</body>
</html

1

>

0 
```

但是，当我执行 stackoverflow.com 时，它的打印效果非常好.. 源代码中可能有额外的空白行，但没关系.. 为什么其他站点会添加数字？

我该如何解决？另外，如何将该标头与 html 本身分开？

我的代码如下：

```
#define _WIN32_WINNT 0x501

#include <iostream>
#include <winsock2.h>
#include <ws2tcpip.h>
#include <stdio.h>
#include <fstream>
#include <vector>

using namespace std;

void Get(string WebPage)
{
    WSADATA wsaData;
    string Address;
    struct addrinfo *result;
    struct sockaddr_in  *sockaddr_ipv4;

    char Buffer[99000];

    string Header = "GET / HTTP/1.1\r\n";
    Header += "Host: " + WebPage + "\r\n";
    Header += "Connection: close\r\n";
    Header += "\r\n";

    if (WSAStartup(MAKEWORD(2,2), &wsaData) != 0) return;

    SOCKET Socket = socket(AF_INET,SOCK_STREAM,IPPROTO_TCP);

    getaddrinfo(WebPage.c_str(), NULL, NULL, &result);
    if (result->ai_family == AF_INET)
    {
        sockaddr_ipv4 = (struct sockaddr_in *) result->ai_addr;
        Address = inet_ntoa(sockaddr_ipv4->sin_addr);
    }
    freeaddrinfo(result);

    SOCKADDR_IN SockAddr;
    memset(&SockAddr, 0, sizeof(SockAddr));
    SockAddr.sin_port = htons(80);
    SockAddr.sin_family = AF_INET;
    SockAddr.sin_addr.s_addr = inet_addr(Address.c_str());

    if(connect(Socket,(SOCKADDR*)(&SockAddr),sizeof(SockAddr)) == SOCKET_ERROR) return;

    if (send(Socket, Header.c_str(), Header.size(), 0) == SOCKET_ERROR) return;
    shutdown(Socket, SD_SEND);

    std::string Response;

    int bytes = 1;
    while (bytes > 0)
    {
        bytes = recv(Socket, Buffer, sizeof(Buffer), 0);
        Buffer[bytes] = '\0';
        Response.append(Buffer, bytes);
    };

    closesocket(Socket);
    WSACleanup();
}

int main()
{
    Get("google.com");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T19:05:24.170

请参阅此 wiki 页面：[http ://en.wikipedia.org/wiki/Chunked_transfer_encoding](http://en.wikipedia.org/wiki/Chunked_transfer_encoding)

这些十六进制数字（块长度）中的每一个后面都是指定大小的实际块数据（有效负载），紧接着是另一个块长度。如果块长度为零，则后面不再有数据字节 (eof)。这些元素由换行符分隔。我不确定您发布的内容是否可以正确连接，看来您需要处理多个连续的换行符。只需在浏览器中查看页面及其来源即可。

编辑：

刚刚找到了这个嗅探工具，它显示了我想在你的情况下知道的所有细节：

[http://web-sniffer.net/](http://web-sniffer.net/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-18T02:15:31.257

此功能将“分解”您的 HTTP 数据 - 在 VB6 中，但您会明白的（真的是旧代码）

```
Private Function UnChunk(Indata As String) As String
  If InStr(LCase(Indata), "transfer-encoding:") = 0 And InStr(LCase(Indata), "chunked") = 0 Then
    'not chunked, so return the input
    UnChunk = Indata
    Exit Function
  End If
  'can't let this crash
  On Error GoTo returnInData

  Dim crlfstart As Long
  Dim crlfend As Long
  Dim chunksize As Long

  'first, get header, which ends with 2 line feeds
  crlfstart = InStr(Indata, vbCrLf & vbCrLf)
  If crlfstart = 0 Then
    'invalid http
    UnChunk = Indata
    Exit Function
  End If
  UnChunk = Left(Indata, crlfstart + 2)

  'start looking for vbCrLf
  crlfstart = InStr(crlfstart + 2, Indata, vbCrLf)
  Do While crlfstart > 0
    'find the next vbCrLf
    crlfend = InStr(crlfstart + 1, Indata, vbCrLf)

    If crlfend > crlfstart And crlfend - crlfstart < 10 Then
      'convert the HEX string to the chunksize
      chunksize = Val("&h" & Mid(Indata, crlfstart + 2, crlfend - (crlfstart + 2)))
      'by spec, if 0 then no more data
      If chunksize > 0 Then
        'there's more data
        'this should be unnecessary, but one more test
        If Mid(Indata, crlfend + 2 + chunksize, 2) = vbCrLf Then
          UnChunk = UnChunk & Mid(Indata, crlfend + 2, chunksize)
        Else
          'oops, failed
          Exit Do
        End If
      Else
        'there's no more data so return what we have
        Exit Function
      End If
    End If
    'look again
    crlfstart = InStr(crlfstart + 1, Indata, vbCrLf)
  Loop
  'just in case this fails, return the input data
returnInData:
  UnChunk = Indata
End Function 
```

# mysql - SQL 仅选择存在确切多个关系的行

> ID：14113267
> 
> 赞同：10
> 
> 时间：2013-01-01T18:55:27.510
> 
> 标签：mysql, sql

这与[this question](https://stackoverflow.com/questions/14098243/sql-select-only-rows-where-multiple-relationships-exist)密切相关，但增加了另一个要求。

给定一个父表'parent'

```
╔════════════╦════════╗
║ PARENT_ID  ║ NAME   ║
╠════════════╬════════╣
║         1  ║ bob    ║
║         2  ║ carol  ║
║         3  ║ stew   ║
╚════════════╩════════╝ 
```

以及父级和（此处未指定）属性表之间的多对多关系表“rel”

```
╔════════════╦══════════╗
║ PARENT_ID  ║ PROP_ID  ║
╠════════════╬══════════╣
║         1  ║       5  ║
║         1  ║       1  ║
║         2  ║       5  ║
║         2  ║       4  ║
║         2  ║       1  ║
║         3  ║       1  ║
║         3  ║       3  ║
╚════════════╩══════════╝ 
```

如何选择具有*所有*且*仅*具有一组指定关系的所有父母？例如，使用样本数据，我如何找到与属性 5 和 1 有关系的所有父母？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-01T19:00:37.657

```
SELECT PARENT_ID
FROM rel
GROUP BY PARENT_ID
HAVING SUM(PROP_ID NOT IN (5,1)) = 0
   AND SUM(PROP_ID = 1) = 1 
   AND SUM(PROP_ID = 5) = 1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-28T19:40:04.390

这种替代方案具有恒定语句结构和只有一个参数的好处，与您正在寻找的关系数量无关：

```
SELECT parent_id FROM rel 
GROUP BY parent_id 
HAVING GROUP_CONCAT(prop_id ORDER BY prop_id ASC SEPARATOR ",") = '1,5'; 
```

缺点：

*   您需要预先准备一个有序的、逗号分隔的 prop_ids 字符串。
*   这适用于 MySQL，但不适用于所有数据库服务器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-01T19:09:28.857

如果要选择*至少*为 5 和 1 的所有父母，可以使用：

```
SELECT PARENT_ID
FROM rel
GROUP BY PARENT_ID
HAVING SUM(PROP_ID = 1)
       AND SUM(PROP_ID = 5)
       AND SUM(PROP_ID NOT IN (5,1)) = 0 
```

如果您*恰好*需要一个 5 和一个 1，请参阅[此](https://stackoverflow.com/a/14113307/1726343)答案

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-01T19:08:50.487

有两个嵌套的子查询，像这样..

```
 Select pa.Id
 From parents pa
 Where not exists -- This ensures that all specifies properties exist
    (Select * From property y
     Where propertyId In (1,5)
         And Not Exists
             (Select * From parentProperty
              Where parentId = pa.parentId 
                  And propertyId = y.propertyId ))
   And not exists -- This ensures that only specified list of properties exist
    (Select * From parentProperty
     Where parentId = pa.parentId 
        And propertyId Not In (1,5) ) 
```

第一个内容为“显示指定属性列表中***没有***属性且不在指定父级的父级属性表中的所有父级......”

第二个子查询显示：“还要确保在 parentProperties 表中不存在任何***不在***指定列表中的属性的父属性的记录。”

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-01T19:48:17.490

```
SELECT PARENT_ID
FROM rel
GROUP BY PARENT_ID
HAVING
  COUNT(PROP_ID)=2 AND
  COUNT(DISTINCT case when PROP_ID IN ( 1, 5 ) then PROP_ID end)=2 
```

这将选择所有`PARENT_ID`恰好有两行的所有行，并且恰好有两个不重复`PROP_ID`的匹配。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-01T18:58:18.857

假设 (PARENT_ID, PROP_ID) 是唯一的：

```
SELECT r1.PARENT_ID
FROM rel r1
INNER JOIN rel r2 ON r1.PARENT_ID = r2.PARENT_ID AND r2.PROP_ID = 5 
INNER JOIN rel r3 ON r1.PARENT_ID = r3.PARENT_ID AND r3.PROP_ID = 1
GROUP BY r1.PARENT_ID
HAVING COUNT(*) = 2 
```

或者，

```
SELECT parent.PARENT_ID
FROM parent
INNER JOIN
(
    SELECT PARENT_ID
    FROM rel
    WHERE PROP_ID IN (1,5)
    GROUP BY PARENT_ID
    HAVING COUNT(*) = 2
) good ON parent.PARENT_ID = good.PARENT_ID
LEFT OUTER JOIN rel bad ON parent.PARENT_ID = bad.PARENT_ID 
    AND bad.PROP_ID NOT IN (1,5)
WHERE bad.PARENT_ID IS NULL 
```

甚至，

```
SELECT DISTINCT parent.PARENT_ID
FROM parent
INNER JOIN rel r2 ON parent.PARENT_ID = r2.PARENT_ID AND r2.PROP_ID = 5 
INNER JOIN rel r3 ON parent.PARENT_ID = r3.PARENT_ID AND r3.PROP_ID = 1
LEFT OUTER JOIN rel r0 ON parent.PARENT_ID = r0.PARENT_ID 
    AND r0.PROP_ID NOT IN (1,5)
WHERE r0.PARENT_ID IS NULL 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-01T20:57:53.723

如果 MySql 支持`minus`，查询可能如下所示：

```
select parent_id
from rel
where prop_id in (5,1)
group by parent_id
having count(distinct prop_id)=2 and count(prop_id)=2
minus
select parent_id
from rel
where prop_id not in (5,1); 
```

将`not in`删除那些超过 (5,1) 的关系，例如 (5,1,3)。

我知道您正在使用 MySql，因此我的回答是错误的。只是把它当作另一个想法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-03T06:15:25.850

即使 (PARENT_ID, PROP_ID) 不是唯一的，此查询也是正确的：

```
SELECT PARENT_ID FROM rel WHERE
PROP_ID IN (5,1) AND 
PARENT_ID NOT IN (SELECT DISTINCT PARENT_ID FROM rel WHERE PROP_ID NOT IN (5,1))
GROUP BY PARENT_ID HAVING COUNT(DISTINCT PROP_ID) = 2 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-01-01T19:14:01.457

希望对你有帮助：

```
SELECT p.PARENT_ID , r.PROP_ID FROM rel r LEFT JOIN parent p ON p.PARENT_ID = r.PARENT_ID WHERE r.PROP_ID = 5 OR r.PROP_ID = 1 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2013-01-01T18:59:43.613

您可以通过 group by 执行此操作。

SELECT PARENT_ID FROM link_tbl WHERE PROP_ID IN (5,1) GROUP BY PARENT_ID HAVING COUNT(*) = 2

# geolocation - 地理定位 - 它是如何工作的？

> ID：14113268
> 
> 赞同：2
> 
> 时间：2013-01-01T18:55:32.860
> 
> 标签：geolocation, ip-geolocation

我正在使用从 Code Canyon 购买的脚本（天气脚本），该脚本使用[MaxMind GeoIP Javascript Web 服务](http://www.maxmind.com/en/javascript)来确定我的用户当前位置。我的问题是 MaxMind（或其他地理定位服务）如何确定位置？

当它确定我的位置时，它平均距离我的实际城市大约 30 英里。为什么以及如何确定位置在那里而不是更近？我认为这与我的 ISP 和我的 ISP 路由有关。这个对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T18:58:16.367

它向您显示的位置是您的 Internet 服务器的位置。

如果您使用的地理位置代码使用您的 IP 地址来获取当前位置，那么它将显示您的主机服务器的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T18:58:24.457

连接时，您的 ISP 会为您分配一个 IP。显然，ISP 曾经购买过该 IP，而您使用的地理定位服务有一个入口，在这种情况下，是您的 ISP 的数据中心。

# html - 带有 html 字符串替换的 sed 命令问题

> ID：14113270
> 
> 赞同：1
> 
> 时间：2013-01-01T18:55:36.893
> 
> 标签：html, command-line, sed, command-line-interface

我很困惑为什么这个 sed 命令不起作用：

```
sed 's/<script id="live-reload"[\s\S]*?<\/script>/test/g' www_public/index.html > www_public/index.html.temp 
```

它应该将以下 HTML 的 live-reload 脚本标记替换为“test”：

```
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>

        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>AssembleJS</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">

        <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
        <link rel="stylesheet" href="assets/css/main.css">

    </head>

    <body>

        <script id="require-lib" data-main="src/config" src="src/libs/require.js"></script>

        <script id="live-reload">document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1"></' + 'script>')</script>

        <script id="test"> bla bla bla </script>

    </body>

</html> 
```

这是正则表达式的工作：

[http://regexr.com?339ga](http://regexr.com?339ga)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T19:25:10.703

您需要使用`-r`for，`?`因为它是扩展的正则表达式：

```
$ sed -r 's/<script id="live-reload".*?<\/script>/test/g' file 
```

或逃避它：

```
$ sed 's/<script id="live-reload".*\?<\/script>/test/g' file 
```

输出：

```
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>

        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>AssembleJS</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">

        <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
        <link rel="stylesheet" href="assets/css/main.css">

    </head>

    <body>

        <script id="require-lib" data-main="src/config" src="src/libs/require.js"></script>

        test

        <script id="test"> bla bla bla </script>

    </body>

</html> 
```

*笔记：*

*   也更改`[\s\S]*?`为，`.*?`因为它们是免费团体。

*   该`g`标志仅对单行上的多个匹配项是必需的。

*   如果您正在运行 Mac，请检查扩展的正则表达式选项`-r`。`-E``sed --help`

*   强制不要使用解析器解析带有正则表达式[警告的 [x]html。](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)

# javascript - 为离线 Web 应用程序存储图像数据（客户端存储数据库）

> ID：14113278
> 
> 赞同：112
> 
> 时间：2013-01-01T18:56:52.823
> 
> 标签：javascript, html, web-applications, indexeddb, leaflet

我有一个使用应用缓存的离线 Web 应用程序。我需要为它提供大约 10MB - 20MB 的数据，它将保存（客户端）主要由 PNG 图像文件组成。操作如下：

1.  Web 应用程序在 appcache 中下载和安装（使用清单）
2.  来自服务器 PNG 数据文件的 Web 应用程序请求（如何？ - 请参阅下面的替代方案）
3.  有时，Web 应用程序与服务器重新同步，并对 PNG 数据库进行小部分更新/删除/添加
4.  仅供参考：服务器是一个 JSON REST 服务器，可以将文件放在 wwwroot 以供拾取

这是我目前对处理二进制 blob 存储的基于客户端的“数据库”的分析

# 请参阅底部的更新

*   **AppCache**（通过清单添加所有 PNG，然后按需更新）

    *   缺点：PNG 数据库项目的任何更改都将意味着清单中所有项目的完整下载（真是个坏消息！）
*   **网络存储**

    *   缺点：专为 JSON 存储而设计
    *   CON：只能通过base64编码存储blob（由于解码成本可能是致命缺陷）
    *   缺点： webStorage 的硬限制为 5MB [http://htmlui.com/blog/2011-08-23-5-obscure-facts-about-html5-localstorage.html](http://htmlui.com/blog/2011-08-23-5-obscure-facts-about-html5-localstorage.html)
*   **PhoneGap & SQLLite**

    *   CON：赞助商将拒绝它作为需要认证的原生应用程序
*   **压缩文件**

    *   服务器创建一个 zip 文件，将其放在 wwwroot 中，并通知客户端
    *   用户必须手动解压缩（至少我是这样看的）并保存到客户端文件系统
    *   Web 应用使用 FileSystem API 来引用文件
    *   CON：ZIP 可能太大（zip64？），创建时间长
    *   CON：不确定 FileSystem API 是否总是可以从沙箱中读取（我想是的）
*   **USB 或 SD 卡**（回到石器时代......）

    *   用户在离线之前将在服务器本地
    *   所以我们可以让他插入一张 SD 卡，让服务器用 PNG 文件填充它
    *   然后用户将其插入笔记本电脑、平板电脑
    *   Web 应用程序将使用 FileSystem API 来读取文件
    *   CON：不确定 FileSystem API 是否总是可以从沙箱中读取（我想是的）
*   **WebSQL**

    *   缺点：w3c 已经放弃了它（很糟糕）
    *   我可能会考虑使用 IndexedDB 和 WebSQL 作为后备的 Javascript 包装器
*   **文件系统 API**

    *   Chrome 支持 Blob 的读/写
    *   CON：不清楚IE和FireFox（IE10，有非标准的msSave）
    *   caniuse.com 报告 IOS 和 Android 支持（但同样，这只是 JSON 的 r/w，还是包含用于编写的完整 blob API？
    *   CON：FireFox 的人不喜欢 FileSystem API，不清楚他们是否支持保存 blob：[https ://hacks.mozilla.org/2012/07/why-no-filesystem-api-in-firefox/](https://hacks.mozilla.org/2012/07/why-no-filesystem-api-in-firefox/)
    *   PRO：根据 jsperf http://jsperf.com/indexeddb-vs-localstorage/15（第 2 页），对于 blob 的索引*比*[IndexedDB](http://jsperf.com/indexeddb-vs-localstorage/15)快得多
*   **索引数据库**

    *   对 IE10、FireFox 的良好支持（保存、读取 blob）
    *   比文件系统（删除、更新）速度快、管理更容易
    *   PRO：见速度测试：http: [//jsperf.com/indexeddb-vs-localstorage/15](http://jsperf.com/indexeddb-vs-localstorage/15)
    *   请参阅这篇关于在 IndexedDB 中存储和显示图像的文章：[https ://hacks.mozilla.org/2012/02/storing-images-and-files-in-indexeddb/](https://hacks.mozilla.org/2012/02/storing-images-and-files-in-indexeddb/)
    *   CON：我确认 Chrome 尚不支持 blob 写入（当前错误，但不清楚何时修复）
    *   更新：[2014 年 6 月的一篇博文](https://developers.google.com/web/updates/2014/07/Blob-support-for-IndexedDB-landed-on-Chrome-Dev)建议 Chrome 现在支持 blob`IndexedDB`
    *   更新：[此 caniuse/indexeddb](https://caniuse.com/#search=indexeddb)确认：“Chrome 36 及更低版本不支持 Blob 对象作为 indexedDB 值。”；建议 >Chrome36 支持 Blob 对象。
*   **LawnChair** JavaScript 包装器[http://brian.io/lawnchair/](http://brian.io/lawnchair/)

    *   PRO：非常干净的 IndexedDB、WebSQL 或您拥有的任何数据库的包装器（想想 polyfill）
    *   CON：不能存储二进制 blob，只能存储 data:uri（base64 编码）（由于解码成本，可能是致命缺陷）
*   **IndexedDB JQUERY** polyFill [https://github.com/axemclion/jquery-indexeddb](https://github.com/axemclion/jquery-indexeddb)

    *   Parashuram 为原始 IndexedDB 接口编写了一个不错的 JQUERY 包装器
    *   PRO：大大简化了 IndexedDB 的使用，我希望为 Chrome FileSystemAPI 添加一个 shim/polyfill
    *   CON：它应该处理 blob，但我无法让它工作
*   **idb.filesystem.js** [http://ericbidelman.tumblr.com/post/21649963613/idb-filesystem-js-bringing-the-html5-filesystem-api](http://ericbidelman.tumblr.com/post/21649963613/idb-filesystem-js-bringing-the-html5-filesystem-api)

    *   Eric Bidelman @ Google 编写了一个经过良好测试的 PolyFill 文件系统 API，它使用索引数据库作为后备
    *   PRO：FileSystem API 非常适合存储 blob
    *   PRO：在 FireFox 和 Chrome 上运行良好
        *   PRO：非常适合与基于云的 CouchDB 同步
    *   CON：不清楚原因，但它不适用于 IE10
*   **PouchDB** JavaScript 库[http://pouchdb.com/](http://pouchdb.com/)

    *   非常适合将 CouchDB 与本地数据库同步（使用 WebSQL 或 IndexedDB（虽然不是我的问题）
    *   CON：没有缺点，PouchDB 现在支持所有最新浏览器（IE、Chrome、Firefox、移动版 Chrome 等）以及许多旧浏览器的二进制 blob。当我第一次写这篇文章时，情况并非如此。

注意：要查看 PNG 的 data:uri 编码，我在以下位置创建了一个示例：http: [//jsbin.com/ivefak/1/edit](http://jsbin.com/ivefak/1/edit)

**所需/有用/不需要的功能**

*   客户端上没有本机（EXE、PhoneGap、ObjectiveC 等）应用程序（纯 Web 应用程序）
*   只需要在笔记本电脑上运行最新的 Chrome、FireFox、IE10
*   强烈希望为 Android 平板电脑提供相同的解决方案（IOS 也不错），但只需要一个浏览器即可工作（FF、Chrome 等）
*   快速初始数据库填充
*   要求：Web 应用程序从存储（数据库、文件）中快速检索图像
*   不适合消费者。我们可以限制浏览器，并要求用户进行特殊的设置和任务，但让我们尽量减少

**IndexedDB 实现**

*   有一篇关于 IE、FF 和 Chrome 如何在内部实现这一点的优秀文章：[http ://www.aaron-powell.com/web/indexeddb-storage](http://www.aaron-powell.com/web/indexeddb-storage)
*   简而言之：
    *   IE 使用与 Exchange 和 Active Directory 相同的数据库格式用于 IndexedDB
    *   Firefox 正在使用 SQLite，因此在 SQL 数据库中实现了 NoSQL 数据库
    *   Chrome（和 WebKit）正在使用具有 BigTable 传统的 Key/Value 存储

**我目前的结果**

*   我选择使用 IndexedDB 方法（并使用 FileSystemAPI for Chrome 进行 polyfill，直到他们提供 blob 支持）
*   为了获取瓷砖，我遇到了两难境地，因为 JQUERY 的人正在努力将其添加到 AJAX
*   我选择了 Phil Parsons 的 XHR2-Lib，它非常像 JQUERY .ajax() [https://github.com/pmp/xhr2-lib](https://github.com/p-m-p/xhr2-lib)
*   100MB 下载的性能（IE10 4s、Chrome 6s、FireFox 7s）。
*   我无法让任何 IndexedDB 包装器为 blob 工作（lawnchair、PouchDB、jquery-indexeddb 等）
*   我推出了自己的包装器，性能是（IE10 2s、Chrome 3s、FireFox 10s）
*   对于 FF，我假设我们看到了将关系数据库 (sqllite) 用于非 sql 存储的性能问题
*   注意，Chrome 具有出色的调试工具（开发人员选项卡、资源）来检查 IndexedDB 的状态。

**最终结果发布在下面作为答案**

# 更新

PouchDB 现在支持所有最新浏览器（IE、Chrome、Firefox、移动版 Chrome 等）以及许多旧版浏览器的二进制 blob。当我第一次写这篇文章时，情况并非如此。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-23T17:14:04.520

结果 PNG 滑图的离线 blob 缓存

**测试**

*   171 个 PNG 文件（共 3.2MB）
*   测试平台：Chrome v24、FireFox 18、IE 10
*   也应该适用于 Android 的 Chrome 和 FF

**从网络服务器获取**

*   使用 XHR2（几乎所有浏览器都支持）从 Web 服务器下载 blob
*   我使用了 Phil Parsons 的 XHR2-Lib，它非常类似于 JQUERY .ajax()
    *   [https://github.com/pmp/xhr2-lib](https://github.com/p-m-p/xhr2-lib)

**贮存**

*   用于 IE 和 FireFox 的 IndexedDB
*   Chrome：Polyfill（使用 FileSystem API 存储的 blob，参考保存在 IndexedDB 中）
*   关于“浏览器如何存储 IndexedDB 数据”的必读文章
    *   [http://www.aaron-powell.com/web/indexeddb-storage](http://www.aaron-powell.com/web/indexeddb-storage)
*   注意：FireFox 对 NOSQL IndexedDB 使用 SQLlite。这可能是性能缓慢的原因。（blob 单独存储）
*   注意：Microsoft IE 使用可扩展存储引擎：
    *   [http://en.wikipedia.org/wiki/Extensible_Storage_Engine](http://en.wikipedia.org/wiki/Extensible_Storage_Engine)
*   注意：Chrome 使用 LevelDB [http://code.google.com/p/leveldb/](http://code.google.com/p/leveldb/)

**展示**

*   我正在使用 Leaflet [http://leafletjs.com/](http://leafletjs.com/)来显示地图图块
*   我使用了 Ishmael Smyrnow 的功能性瓦片层插件从数据库中获取瓦片层
    *   [https://github.com/ismyrnow/Leaflet.functionaltilelayer](https://github.com/ismyrnow/Leaflet.functionaltilelayer)
*   我将基于 DB 的切片层与纯本地 (localhost://) 存储进行了比较
*   **性能没有明显差异！在使用 IndexedDB 和本地文件之间！**

**结果**

*   Chrome：获取（6.551s），存储（8.247s），总运行时间：（13.714s）
*   FireFox：获取（0.422s），存储（31.519s），总经过时间：（32.836s）
*   IE 10：获取（0.668s），存储：（0.896s），总运行时间：（3.758s）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-01T21:38:12.900

对于您的要求，我建议基于其他两个开发新的 polyfill： *[FileSystem API 到 IndexedDB](https://github.com/ebidel/idb.filesystem.js)*和*IndexedDB 到 WebSQL* — 是最好的选择。

前者将支持在 Chrome (FileSystem API) 和 Firefox (IndexedDB) 中存储 blob，而后者应提供对 Android 和 iOS ( [WebSQL](http://caniuse.com/sql-storage) ) 的支持。所需要的只是让这些 polyfill 一起工作，我想这并不难。

**注意：**由于我在网上找不到任何关于此的信息，您应该测试使用 WebSQL polyfill 存储 blob 是否适用于 iOS 和 Android。看起来它应该可以工作：

```
var sql = ["CREATE TABLE", idbModules.util.quote(storeName), "(key BLOB", createOptions.autoIncrement ? ", inc INTEGER PRIMARY KEY AUTOINCREMENT" : "PRIMARY KEY", ", value BLOB)"].join(" ") 
```

[来源](https://github.com/axemclion/IndexedDBShim/blob/master/src/IDBDatabase.js)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-24T09:16:45.663

我有地图缓存[示例](https://github.com/tbicr/OfflineMap)（打开示例，发现区域和缩放，离线切换和发现区域可用）。

有`map.js`- 离线瓦片的地图层，`storage.js`- 基于 IndexedDb 和 WebSQL 的存储实现（但这只是性能较差的测试实现）。

*   对于站点文件（html、css、js 等），我更喜欢使用应用程序缓存。
*   对于存储，我更喜欢使用 Indexed DB（支持 blob）、Web SQL（仅 base64）、FileWriter（支持 blob，但仅 chrome）。坦率地说，存储对此是个大问题。您需要将它们全部混合的最快的键值解决方案。我认为使用现有解决方案是一个不错的决定。
*   为了获取，我使用了带有 CORS 的画布。但是我在考虑 WebWorkers 和 XHR2，这可能会更好，而不是 canvas，因为 canvas 在不同的浏览器和其他浏览器中存在一些与 CORS 相关的问题（例如，[这个标题](http://tile.openstreetmap.org/14/9445/5267.png)[在 opera](http://habrastorage.org/storage2/d7a/129/0b9/d7a1290b9987e3703ce7f4c3f10d573e.png)中存储错误）。

[有关 20 亿城市（明斯克](http://www.openstreetmap.org/index.html?lat=53.902&lon=27.555&zoom=11)）规模的其他信息：

*   缩放 - 9，图块 - 2，大小 - 52 kb，前一个 - 52 kb；
*   缩放 - 10，图块 - 3，大小 - 72 kb，前一个 - 124 kb；
*   缩放 - 11，图块 - 7，大小 - 204 kb，前一个 - 328 kb；
*   缩放 - 12，图块 - 17，大小 - 348 kb，上一个 - 676 kb；
*   缩放 - 13，图块 - 48，大小 - 820 kb，前一个 - 1.5 mb；
*   缩放 - 14，瓷砖 - 158，大小 - 2.2 mb，以前 - 3.7 mb；
*   缩放 - 15，瓷砖 - 586，大小 - 5.5 mb，以前 - 9.3 mb；
*   缩放 - 16，瓷砖 - 2264，大小 - 15 mb，以前 - 24.3 mb；

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-01T19:18:18.620

几年前（不完全是石器时代），我正在使用一个签名的 Java 小程序，它会查询其服务器的同步/更新要求，从服务器下载适当的文件并将它们保存在用户的文件系统（而不是数据库）上。该解决方案可能对您有用，尽管您需要有人编写小程序并对其进行签名。对于数据库解决方案，这样的小程序可以使用适用于大多数数据库的 jdbc，在合适的端口（例如，3306 用于 MySQL）上使用 localhost。我相信小程序标签在 Html5 中已被弃用，但它仍然有效。没有Android平板电脑的经验，所以不能评论那部分。

# windows-runtime - 一行多列 WinJS 布局

> ID：14113281
> 
> 赞同：2
> 
> 时间：2013-01-01T18:57:06.147
> 
> 标签：windows-runtime, winjs

我是 WinJS 开发的新手，找不到类似于以下布局的任何好的示例：

![一排 WinJS 布局](../Images/72db248303efaabb9f216cfa21f05a6c.png)

理想情况下，每个项目都是基于百分比的，这样我就可以有一个包含 3 或 4 个“列”的布局。谁能指出我正确的方向？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:02:37.737

如果您想要选择、分组、排序等丰富的功能，请使用@Louis_PIG 回答的解决方案。如果您需要像这样非常基本的水平布局，请使用`disply:-ms-flexbox`CSS 显示属性。如果您创建一个 div 并设置它，那么它的所有子级都将水平布局。然后，您可以对孩子及其大小和位置进行各种控制。您可以设置它们的相对宽度、平均分配它们、拉伸它们等等。有关flexbox 的大量信息，请参阅[此内容。](http://msdn.microsoft.com/en-us/library/windows/apps/hh453474.aspx)

这是一个示例 flexbox...

```
<!-- HTML snippet -->    
<div class="flex">
    <div></div>
    <div></div>
    <div></div>
</div

/* CSS snippet */
.flex {
    display: -ms-flexbox;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T05:44:20.663

您可能正在寻找`GridLayout.maxRow`房产。

* * *

```
<!-- This doesn't work, see NOTE below -->
<div data-win-control="WinJS.UI.ListView"
 data-win-options="{layout: {type: WinJS.UI.GridLayout, maxRows: value}}">
</div> 
```

参考：http: [//msdn.microsoft.com/en-us/library/windows/apps/br211750.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br211750.aspx)

**注意：**上面的代码段不起作用，但更新后的`Javascript`代码应该可以用于相同的目的。

* * *

假设您正在尝试显示更多项目，但您只想`viewport`容纳 3 或 4 个项目，具体取决于屏幕的宽度。然后您可以使用 CSS Media Query 将不同的样式应用于不同的屏幕宽度。或者，您可以在运行时根据屏幕大小计算项目的大小并更新`ListView.itemTempalte`. 您能否提供更多关于您正在寻找什么的信息？

不过，在我自己看来，`WinJS.UI.ListView`控件引入了“全景”视图，通常故意留下一些“还有更多要滚动”的迹象。因此，在 中显示“固定”数量的项目`ListView`可能不是可取的，因为用户可能不知道在`viewport`.

***更新***：

正如@rattrick1 指出的那样，上面的`HTML`代码片段不起作用，即使它与 MSDN 上的代码相同。我修改了由创建的默认应用程序中的代码，`Visual Studio`它仍然显示 2 行。如果有人能指出上面的问题是什么，那就太好了！

所以我尝试设置属性`Javascript`，它对我有用：

在`App1\pages\groupedItems\groupedItems.js`

```
 _initializeLayout: function (listView, viewState) {
            listView.itemDataSource = Data.items.dataSource;
            listView.groupDataSource = Data.groups.dataSource;
            listView.layout = new ui.GridLayout();
            // limit the List View to display only 1 row
            listView.layout.maxRows = 1;
    } 
```

如果这不起作用，请告诉我。

# java - 方法不会覆盖或实现超类型错误中的方法

> ID：14113285
> 
> 赞同：0
> 
> 时间：2013-01-01T18:57:28.793
> 
> 标签：java, interface, singleton, stack, abstract

我正在尝试为我的国际象棋游戏设计一个撤消/重做机制。我决定使用将在 ArrayList 上构建的堆栈数据结构。我还希望我的 UndoStack 和 RedoStack 类应该是单例的。但是我得到

```
method does not override or implement a method from a supertype

pop() in UndoStack cannot implement pop() in IStackable
  return type Move is not compatible with cgas5.Move
  where Move is a type-variable:
    Move extends Object declared in class UndoStack 
```

错误..

这是我的 IStackable 接口：

```
package cgas5;

public interface IStackable {

    abstract public Move pop();

    abstract public void push(Move m);

} 
```

和我的 UndoStack 课程

```
package cgas5;

import java.util.ArrayList;

public class UndoStack<Move> extends ArrayList<Move> implements IStackable {

    UndoStack undoStack;

    private UndoStack() {
        undoStack = new UndoStack();
    }

    public UndoStack getUndoStack() {
        if (undoStack == null) {
            undoStack = new UndoStack();
        }
        return undoStack;
    }

    @Override
    public Move pop() {
        Move m = get(size() - 1);
        remove(size() - 1);
        return m;

    }

    @Override
    public void push(Move m) {
        add(m);
    }
} 
```

如果有必要，我的 Move 课程：

```
package cgas5;

public class Move {
    private Piece pieceToMove;
    private Square currentSquare;
    private Square targetSquare;
    private Piece capturedPiece;
    private Piece promotedPiece;

    public Move(){

    } 

    public Move(Piece pieceToMove, Square currentSquare, Square targetSquare){
        this.pieceToMove = pieceToMove;
        this.currentSquare = currentSquare;
        this.targetSquare = targetSquare;
    }

    public Piece getPieceToMove() {
        return pieceToMove;
    }

    public void setPieceToMove(Piece pieceToMove) {
        this.pieceToMove = pieceToMove;
    }

    public Square getCurrentSquare() {
        return currentSquare;
    }

    public void setCurrentSquare(Square currentSquare) {
        this.currentSquare = currentSquare;
    }

    public Square getTargetSquare() {
        return targetSquare;
    }

    public void setTargetSquare(Square targetSquare) {
        this.targetSquare = targetSquare;
    }

    public Piece getCapturedPiece() {
        return capturedPiece;
    }

    public void setCapturedPiece(Piece capturedPiece) {
        this.capturedPiece = capturedPiece;
    }

    public Piece getPromotedPiece() {
        return promotedPiece;
    }

    public void setPromotedPiece(Piece promotedPiece) {
        this.promotedPiece = promotedPiece;
    }

} 
```

提前致谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T19:00:13.897

这就是问题：

```
public class UndoStack<Move> extends ArrayList<Move> 
```

那是`Move`用作*泛型类型参数*，而实际上您根本不想要泛型类型 - 您只想用作的`Move`类型*参数*。`ArrayList<E>`你要：

```
public class UndoStack extends ArrayList<Move> 
```

这应该可以解决问题 - 尽管我个人强烈建议在这里使用组合而不是继承。（换句话说，让你的`UndoStack`类型*包含*一个`ArrayList<Move>`- 或类似的东西 - 而不是子类化它。）

此外，这永远不会起作用：

```
UndoStack undoStack;

private UndoStack() {
    undoStack = new UndoStack();
} 
```

这意味着要创建一个`UndoStack`，您需要创建另一个`UndoStack`...您如何期望会发生这种情况？你现在会得到一个堆栈溢出异常......你为什么需要这个变量？

# javascript - 计算 Animate() 向上/向下滑动

> ID：14113287
> 
> 赞同：2
> 
> 时间：2013-01-01T18:57:41.070
> 
> 标签：javascript, jquery, animation, slide

我有一个 DIV 标签，它是 hover() 触发器。但是，我无法更改此 div 的设置、cs​​s 等。

在这种情况下，如果我想要动画效果，请从这个触发器 div 标签的底部向下滑动。我该怎么做？

我尝试在触发器 Div 的顶部创建一个 Div 绝对区域，它没有工作。请帮助和建议。

HTML

```
<div id="trigger" style="width:100px; height:100px; border:#000 solid 1px;"></div> //This is the trigger div
<div id="target" style="width:100px; height:100px; background-color:#000; position:absolute;"></div> // This is the thing I gonna slide down 
```

JS

```
$('#trigger').hover(function(){
    target = $('#target');
    trigger = $('#trigger');

  ///create a area can hide Target before slide down
    target.wrapAll('<div style="border:#000 solid 1px; position: absolute; top: '+ trigger.offset().top + trigger.height() +'; left:" '+ trigger.offset().left  +'; width: '+trigger.width() +'; height: '+ trigger.height()  +'; ">')  
     .css({ top: -target.height(), left: 0  })
     .animate({top: 0 });

      }, function(){}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:43:29.070

这是你想要的？（我为触发器 div 添加了三个属性，一个相对位置和一个 z-index，它强制它位于黑盒的顶部。然后我给 div 一个背景颜色，这样它就可以遮住黑盒。）

我不禁认为有一种更清洁的方法可以做到这一点。

[http://jsfiddle.net/bUcZg/](http://jsfiddle.net/bUcZg/)

代码：

HTML

```
<div id="trigger" style="width:100px; height:100px; background-color:#FFF; position:relative; z-index:1; border:#000 solid 1px;position:relative;"></div> 
<div id="target" style="width:100px; height:100px; background-color:#000; position:absolute;"></div> 
```

JAVASCRIPT

```
target = $('#target');
trigger = $('#trigger');

///create a area can hide Target before slide down
target.wrap('<div style="border:#000 solid 1px; position: absolute; top: ' +     trigger.offset().top + trigger.height() + '; left:" ' + trigger.offset().left + '; width: ' + trigger.width() + '; height: ' + trigger.height() + '; ">').css({
top: -target.height(),
left: 0
})

trigger.hover(function() {
    target.animate({
        top: 0
    });

}, function() {})​ 
```

# c# - C#：OpenFileDialog 复制文件

> ID：14113288
> 
> 赞同：-3
> 
> 时间：2013-01-01T18:57:54.237
> 
> 标签：c#, image, path, openfiledialog, file-copying

嗨，我有一个带有此代码的按钮：

```
 OpenFileDialog ofd = new OpenFileDialog();
        string percorso = Environment.CurrentDirectory;
        percorso += @"\img\Articoli";
        ofd.InitialDirectory = percorso;
        ofd.Filter = "File JPEG/JPG (*.jpeg *.jpg)|*.jpg;*.jpeg|File PNG (*.png)|*.png;|Tutti i files (*.*)|*.*"; 
        if (ofd.ShowDialog() == DialogResult.OK)
        {
            tPercorso.Text = System.IO.Path.GetFileName(ofd.FileName);
            Refresh_Image();
        } 
```

我需要当我在 OpenFileDialog 中选择一个文件时，如果他的路径不等于“percorso”，则会出现一个 MessageBox：“你想复制默认路径中的文件吗？” 是 | 否，如果 DialogResult == YES 我需要将此文件复制到路径“percorso”并仅像我正在做的那样选择文件名。你能帮助我吗？问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:05:15.060

如果您只关心复制文件，那么[`File.Copy`](http://msdn.microsoft.com/en-us/library/system.io.file.copy%28v=vs.110%29.aspx). 如果您想使用标准 shell 进度对话框复制文件，请查看[此相关问题](https://stackoverflow.com/questions/6687443/how-to-bring-up-the-built-in-file-copy-dialog)。

你也应该检查一下[`Path.Combine`](http://msdn.microsoft.com/en-us/library/fyy7a5kt%28v=VS.80%29.aspx)。

# c - 过滤掉 END OF MEDIUM 控制字符

> ID：14113298
> 
> 赞同：2
> 
> 时间：2013-01-01T18:59:05.480
> 
> 标签：c, parsing, special-characters, control-characters

我正在使用 C 解析文本，并在终端中得到 0019 框的输出。经过一些研究，我发现这些是 END OF MEDIUM 控制字符：

“旨在作为在纸或磁带上指示已到达磁带可用部分末端的方法。” - 维基百科

我如何查找它们而不将它们包含在输出中？例如寻找它们的 if 语句。他们没有实际的角色，所以我不确定我将如何实际寻找他们。是否可以使用它们的十六进制值（0x0019）来找到它们？

编辑：我正在通过 html 进行解析，所以我认为没有理由让那个角色在那里..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T19:03:17.820

您可以使用 eg[`isprint`](http://en.cppreference.com/w/c/string/byte/isprint)或 it 兄弟函数。

# r - 在R中添加矩阵的每一行

> ID：14113301
> 
> 赞同：-1
> 
> 时间：2013-01-01T18:59:28.670
> 
> 标签：r

我知道这是一个基本问题，但我根本找不到答案。

我有一个矩阵，想添加每一列来得到它的总和。

应该为每一行添加。

我已经尝试过rowsums，但这仅适用于数组。

有没有一种简单的方法可以对矩阵执行此操作？

一个例子：

```
1  2 
1  4
3  4
4  5
5  5 
```

期望的输出：

```
3
4
7
9
10 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T19:18:55.843

```
# download and read in your file from dropbox
dropbox.data <- url("http://dl.dropbox.com/u/22681355/a.csv")

# import the data into R
mat <- read.csv( dropbox.data )

# look at the class of each column
sapply( mat , class )
# all columns are numeric for sure
sapply( mat , is.numeric )

# both of these work fine
colSums( mat )

rowSums( mat ) 
```

# c++ - 原始输入设备 RAWMOUSE 用法

> ID：14113303
> 
> 赞同：1
> 
> 时间：2013-01-01T18:59:44.077
> 
> 标签：c++, c, winapi, mingw

我正在使用 winapi 的原始输入设备进行鼠标输入，看来我的 RAWMOUSE 结构中没有得到正确的值。

当我得到 RAWMOUSE 结构时，我得到了我期望的**lLastX**和**lLastY**的值，但由于某种原因，**ulRawButtons**始终为 0。msdn 文档说 ulRawButtons 是*“鼠标按钮的原始状态”*所以我把它当我按下鼠标按钮时应该会改变。

这是我创建原始输入设备的代码（为了便于阅读，我删除了错误检查）：

```
RAWINPUTDEVICE rid;
rid.usUsagePage = 0x01;
rid.usUsage     = 0x02;
rid.dwFlags     = RIDEV_INPUTSINK;
rid.hwndTarget  = myWindowHandle;
RegisterRawInputDevices(&rid, 1, sizeof(rid)); 
```

在**WM_INPUT**消息之后，我调用：

```
void handleRawInput(HWND window, UINT, WPARAM wParam, LPARAM lParam)
{
    RAWINPUT input;
    UINT szData = sizeof(input), szHeader = sizeof(RAWINPUTHEADER);
    HRAWINPUT handle = reinterpret_cast<HRAWINPUT>(lParam);

    GetRawInputData(handle, RID_INPUT, &input, &szData, szHeader);
    if (input.header.dwType == RIM_TYPEMOUSE)
    {
        // Here input.data.mouse.ulRawButtons is 0 at all times.
    }
} 
```

我正在使用 mingw32 (4.7) 并且我已经定义了**WIN32_LEAN_AND_MEAN**、**WINVER=0x0501**和**WIN32_WINNT=0x0501**。

任何想法为什么我没有得到 ulRawButtons 的正确值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T19:44:29.093

[`RAWMOUSE`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645578%28v=vs.85%29.aspx)Windows用鼠标驱动程序通过结构告诉它的内容填充[`MOUSE_INPUT_DATA`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff542403%28v=vs.85%29.aspx)结构。

您会注意到[MSDN 页面](http://msdn.microsoft.com/en-us/library/windows/hardware/ff542403%28v=vs.85%29.aspx)`MOUSE_INPUT_DATA`声明如下：

> **原始按钮**
> 
> > 指定鼠标按钮的原始状态。Win32 子系统不使用该成员。

MSDN 页面没有说的是，Win32 不仅不使用`RawButtons`/ `ulRawButtons`，而且它附带的鼠标驱动程序也没有填充它们。因此，除非您有来自第 3 方供应商的鼠标驱动程序，否则您永远无法设置此字段。

我认为您要使用的是：`input.data.mouse.usButtonFlags`鼠标单击和`input.data.mouse.usButtonData`滚轮增量。

# java - 完全迷路了试图调用网络服务

> ID：14113304
> 
> 赞同：0
> 
> 时间：2013-01-01T19:00:07.797
> 
> 标签：java, android, android-service

在过去的几天里，我问过这个问题的变体。我不理解或建立正确的联系等，所以我真的很沮丧，不知道我应该走哪条路。

我开发了一个 XAMLX WCF 工作流服务，我的 Windows 客户端与之交互得很好。我是 android 和 java 的新手，因此基本上是 NOOB。我的服务使用 BasicHttpBinding 并期望请求中有几个字符串值（uid 和 pwd）。响应只是一个字符串。

现在在android上我完全迷路了。我已阅读使用 AsyncTask，听说它存在重大问题并使用 RoboSpice。看着 RoboSpice，它看起来非常稳固但学习曲线非常僵硬。我听说使用 LoopJ 的学习曲线比较僵硬，因为刚开始使用它会更容易。把那些希望你使用 JSON 的人扔进去，是的。我肯定迷路了。

所以我被拉向了很多不同的方向。我知道我需要它是异步的，这样它就不会锁定 ui 线程，我想获得一个可靠的强大解决方案，但现在，即使是同步地与服务进行交互，这也是令人鼓舞的一步。

这是我的基础知识： 向服务发送请求。让应用程序暂停/循环等。进度条会很棒，但现在一个不会挂起的简单循环就可以了。接收响应并继续处理。

这对我来说在 .NET 中非常简单，我认为它会很简单。只是表明骄傲是在堕落之前到来的。

TIA JB

* * *

**直接问题**

如前所述，我的 OP 中有几个隐含的问题。那是因为我不知道该问什么。所以现在让我们使用 AsynchTask。让我们称之为我的婴儿步。以下是我的问题： **如何**关联值以填充请求？在 .NET 中，我将创建一个与请求所期望的匹配的对象。所以我的对象会有一个 UserName 属性和 Password 属性。我会给他们分配他们的值，比如 obj.UserName = "Joe"; 然后我会调用服务操作并将其传递给 obj。

**如何**确保我使用正确的库？我读过 AsyncTask 使用 Apache Http Client 库。好的，我用谷歌搜索得到罐子，显然它已经结束了。但仍然可用，所以我下载了最新版本并将其放在我的 lib 文件夹中......但我不必这样做，因为我可以在没有它的情况下导入 org.apache.http.HttpResponse 所以我当时使用哪个版本，我应该使用较旧的或最新的。

**最后我如何让应用程序暂停，因为此代码执行某些操作（尽管它从未显示在我的服务机器的日志中）并且当它停止执行某些操作时，我的代码继续执行并在到达它的点时崩溃需要来自服务的数据.....但它不存在。进度条是蜜蜂的膝盖。

这是我的实现代码：

```
public class AsyncHttpRequestManager extends AsyncTask<String, Boolean, String>
{
private static final String serviceUrl = "http://www.serviceurl.com/service.xamlx";

@Override
protected String doInBackground(String... params) 
{

    try 
    {
        DefaultHttpClient client = new DefaultHttpClient();
        HttpPut putRequest = new HttpPut(serviceUrl);
        putRequest.setHeader("Content-type", "text/plain");
        putRequest.setHeader("Accept", "text/plain");
            putRequest.setEntity(new StringEntity(params[0])); //This one is connected to my first question. How do I get the proper associations for the operations contract.
            HttpResponse response = client.execute(putRequest);
            InputStream content = response.getEntity().getContent();
        BufferedReader buffer = new BufferedReader(new InputStreamReader(content));
        String result = "";
        String s = "";
        while ((s = buffer.readLine()) != null) 
        {
            result += s;
        }
        return result;

    }
    catch (UnsupportedEncodingException e) 
    {
        Log.e("AsyncOperationFailed", e.getMessage());
        e.printStackTrace();
    } catch (ClientProtocolException e) 
    {
        Log.e("AsyncOperationFailed", e.getMessage());
        e.printStackTrace();
    } catch (IOException e) 
    {
        Log.e("AsyncOperationFailed", e.getMessage());
        e.printStackTrace();
    }
    return null;

}

protected void onPostExecute(String result) 
{
    Log.d("MESSAGE", result);
} 
```

}

我这样称呼它：

```
new AsyncHttpRequestManager().execute("joe","asdf"); 
```

如果需要更多信息，我很乐意发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T20:50:22.257

您应该一次问一个问题，即 SO 是如何设计和策划的，以使其发挥作用。

对于 HTTP 身份验证

[http://developer.android.com/reference/org/apache/http/auth/UsernamePasswordCredentials.html](http://developer.android.com/reference/org/apache/http/auth/UsernamePasswordCredentials.html)

例如

```
HttpClient client = new HttpClient();
client.getParams().setAuthenticationPreemptive(true);
Credentials defaultcreds = new UsernamePasswordCredentials("username", "password");
client.getState().setCredentials(new AuthScope("myhost", 80, AuthScope.ANY_REALM), defaultcreds); 
```

Asynctask 不需要任何外部库，它是 Android 平台的一部分。不要对 HTTPClient 和 Asynctask 感到困惑。Asyntask 是一个*通用*类，旨在在与主 UI 线程不同的线程上调用后台处理以避免阻塞。碰巧您正在考虑使用 Asynctask 来处理您的 Web 请求，但它们没有以任何方式链接。

您关于“如何将数据返回到我的应用程序”的问题最好单独提出，但本质上，您是按顺序思考的。您的应用不应暂停。有很多方法可以正确处理这个问题，进度对话框就是其中之一。

# algorithm - 页面替换算法

> ID：14113309
> 
> 赞同：3
> 
> 时间：2013-01-01T19:01:24.573
> 
> 标签：algorithm, operating-system, fault

我有一个问题，我不确定。如果有人可以提供帮助，我将不胜感激。问题是这样的：

以下程序请求序列取自 460 字节程序：10, 11, 104, 170, 73, 309, 185, 245, 246, 434, 458, 364 ((即内存中有一个程序长度为 460 字节，它在其文本中引用字节，10 表示引用程序的第 10 个字节，其中 10 是相对地址）。主存储器总共可以容纳该程序的 200 字节。指示哪些请求结果在页面错误中，使用 FIFO（先进先出）和 50 字节页面大小的最佳页面替换算法的页面错误数量是多少。

这是我的想法。首先，由于内存中没有任何内容，因此第一个请求 (10) 会导致页面错误。然后当字节 10 到 60 被加载到内存时，因为页面大小是 50 字节。当第二个请求到来时（11），它不是页面错误，因为它已经在内存中。然后 104 导致页面错误，并将 104-154 之间的字节加载到内存中。170 也会导致页面错误，并且 170-220 被加载到内存中，等等等等。就是这样。我的逻辑是真的吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T19:15:20.997

不会。第三个请求会导致字节 100-149 被加载到内存中，因为二进制实际上被划分为 50 个字节的块，而字节 104 将落入第三个块。

您还应该考虑物理内存只能容纳 4 页。在某个时刻，您可能需要丢弃页面并在加载页面时重新触发页面错误。

# webbrowser-control - 在 WP8 WebBrowser 控件中注入/提供自定义 CSS

> ID：14113311
> 
> 赞同：0
> 
> 时间：2013-01-01T19:01:39.747
> 
> 标签：webbrowser-control, windows-phone, windows-phone-8

> **可能重复：**
> [如何在 WP7 WebBrowser 控件中注入 Javascript？](https://stackoverflow.com/questions/8348503/how-to-inject-javascript-in-the-wp7-webbrowser-control)

我的 MainPage.xaml 中有一个 WebBrowser 控件，用于提供外部网页。

```
<phone:WebBrowser 
    Name="TravelPlanner" 
    Source="http://URL-HERE.com" 
    IsScriptEnabled="True"/> 
```

我是否有可能以某种方式注入或提供我自己的 CSS（或 JavaScript）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T00:21:33.627

是的。[通过在WebBrowser.LoadCompleted](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.controls.webbrowser.loadcompleted%28v=vs.105%29.aspx)之后调用[WebBrowser.InvokeScript](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402855%28v=vs.105%29.aspx) ，您可以在 webbrowser 控件中执行任意 javascript 代码。然后，Web 应用程序可以使用[WebBrowser.ScriptNotify](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.controls.webbrowser.scriptnotify%28v=vs.105%29.aspx)与 C# 对话。

查看更多@[如何在 WP7 WebBrowser 控件中注入 Javascript？](https://stackoverflow.com/questions/8348503/how-to-inject-javascript-in-the-wp7-webbrowser-control)

# java - 我可以使用android助手学习java吗

> ID：14113313
> 
> 赞同：-3
> 
> 时间：2013-01-01T19:01:43.577
> 
> 标签：java, android

好的，所以这次我将使其更具体。

我只想学习Java。所以我给自己买了一本关于 Java 编程的书，并想按照书中的例子进行学习。为了在旅途中执行此操作（因为我并不总是可以访问我的 PC），我下载了[AIDE](https://play.google.com/store/apps/details?id=com.aide.ui&hl=en)，它基本上是用于 Android 手机的 IDE。

但这个应用程序似乎只适用于安卓开发。我可以用它来练习Java吗？因为现在当我用 Java 编写任何东西并对其进行编译时，它只会输出布局 XML 中的内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-01T19:09:14.793

如果您想学习 Java，请使用 PC，而不是移动设备。

虽然 Android 应用程序是用 Java 编写的，但 Android 不支持全套 Java API。例如，任何使用 awt 类的程序都不会在 Android 上运行，因为 Android 的 UI 框架是完全不同的。

我强烈建议您在开始 Android 应用程序开发之前使用 PC 和 Eclipse 或 IntelliJ 等 IDE 至少学习核心 Java。如果您在尝试 Android 开发之前就了解 Java 语法和该语言的基本核心，这将使您的生活变得更加轻松。

以下是您 PC 上标准 Java 中包含的 Java 包列表，但不是 Android API 的一部分（它可能有点过时，但它应该让您了解不同之处）：

```
java.applet
java.awt (except for the font classes)
java.beans
java.lang.management
java.rmi
javax.accessibility
javax.activity
javax.imageio
javax.management
javax.naming
javax.print
javax.rmi
javax.security.auth.kerberos
javax.security.auth.spi
javax.security.sasl
javax.swing
javax.transaction
javax.xml (except javax.xml.parsers)
org.ietf.*
org.omg.*
org.w3c.dom.* (sub-packages) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T19:10:28.910

您要求的可能是可能的，但不建议这样做。

Android 编程需要大量专门关于如何为 Android 编程的专业知识，而当您尝试学习基本 Java 时，这一要求将成为您的障碍。

首先学习 Java，然后，如果需要，学习如何将这些知识应用到 Android 编程中。

# android - 如何使用名称中的特定字符串启动另一个应用程序

> ID：14113314
> 
> 赞同：0
> 
> 时间：2013-01-01T19:01:45.380
> 
> 标签：android, android-intent

我需要按以下顺序从我的另一个应用程序开始：

1.  检查设备上所有已安装的应用程序，找到名称中有特定字符串的应用程序并列出它们，以便可以选择和启动它们（例如检查名称中包含“计时器”的所有应用程序，例如“完美计时器”， “你的计时器”等）

2.如果没有可用的应用程序，启动 Google Play 并搜索名称（例如“计时器”）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:10:35.897

如果它包含特定字符串，您将需要`PackageManager`用于获取所有已安装的应用程序名称并用于启动应用程序：`getLaunchIntentForPackage`

```
PackageManager pm = getPackageManager();
  List<ApplicationInfo> packages = 
                  pm.getInstalledApplications(PackageManager.GET_META_DATA);

  for (ApplicationInfo packageInfo : packages) {
   if(packageInfo.packageName.toLowerCase().
                   contains(""perfect timer".toLowerCase())){

     Intent intent = 
                pm.getLaunchIntentForPackage(packageInfo.packageName);   
      if (intent != null)  {
         intent.addCategory(Intent.CATEGORY_LAUNCHER);
         startActivity(intent);  
      }  
  } else{
            // Launch google play app here
            String apppackname = "com.example.appname";
             Intent intentapp=new (Intent.ACTION_VIEW, 
                Uri.parse("market://search?q="+apppackname)));
             startActivity(intentapp);
      }       
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T19:12:31.143

首先你需要阅读所有已安装的应用程序在这里阅读更多内容[http://www.androidsnippets.com/get-installed-applications-with-name-package-name-version-and-icon](http://www.androidsnippets.com/get-installed-applications-with-name-package-name-version-and-icon)，

找到所需的应用程序后，您可以简单地触发该应用程序的意图，或者通过像这样的过滤器搜索打开市场

```
 Intent i = new Intent(Intent.ACTION_VIEW);
   i.setData(Uri.parse("market://search?q=com.amazon.kindle"));
   startActivity(i); 
```

# php - 从 PHP MVC 中的控制器调用控制器？

> ID：14113315
> 
> 赞同：0
> 
> 时间：2013-01-01T19:01:55.153
> 
> 标签：php, oop, model-view-controller, controller

我可以从帐户控制器调用管理面板控制器吗？我的意思是在帐户控制器中我设置了管理面板的可访问部分，并且我想将该变量与可访问的位置转移到管理面板控制器。

现在我可以这样做吗：

```
<?php

// Code here

$this->panel = new Admin_Panel();
$this->panel->accessibleparts = $this->data['accessible'];

?> 
```

还是在 mvc 规则中不允许？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T19:21:11.037

像这样的东西：

```
public function connect(){
    try {
        $db = new PDO('mysql:host=localhost;dbname=radiolev_db', 'radiolev_user', 'ceowwyso1'); 
```

一切都很好而且很花哨，但是您实际上并没有将该数据库连接对象存储在对象中的任何位置。它只是该特定方法中的局部变量，将在函数退出时被销毁。例如，您正在连接，然后一旦您的 connct() 方法返回，局部`$db`变量就会超出范围，并且您全新的数据库连接将关闭并销毁。

您需要将该 $db 存储在您的**OWN**对象中，以便将其保留以供以后使用，例如：

```
 $this->db = new PDO(...); 
```

反而。

正如上面其他人所说，您不能将 mysql_ *()、mysqli_* () 和 PDO 连接相互混合。每个都是一个完全不同且独立的库（即使它们都使用相同的底层 mysql 低级库）。在其中一个库中建立的连接与其他库完全不同/独立/无法使用。由于您使用 PDO 进行连接，因此不能使用 mysql_ 函数，因为 mysql_ 不知道 PDO 中发生的任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T19:06:11.823

您的问题是`mysql_real_escape_string()`需要连接（您已经建立了连接，只是没有使用 mysql_* 命令子集）。

使用 PDO 和实际准备好的语句，而不是你现在正在做的任何事情。

```
$pdo = $conn->prepare('SELECT * FROM myTable WHERE theColumn = :myParam');
$pdo->bindParam(':myParam', $_GET['data']);
$pdo->execute(); 
```

通过“呼叫”，我假设您的意思是使用它。

只需添加一个返回值，`return $db;`-- 这将在您的 connect() 的末尾，在设置错误模式之后。

现在

```
$db = new mysql();
$conn = $db->connect();
$conn->prepare('SELECT * FROM myTable WHERE myColumn = ?');
$conn->execute(array('test')); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T19:08:11.987

答案在手册中阅读了它的工作原理：http: [//php.net/oop5](http://php.net/oop5)

> ***回答你之前的问题：***

您会收到以下错误：

> 警告：mysql_real_escape_string() [function.mysql-real-escape-string]：/home/radiolev/public_html/top/toplist.class.php 中的用户 'radiolev'@'localhost' 访问被拒绝（使用密码：否）第 10 行
> 
> 警告：mysql_real_escape_string() [function.mysql-real-escape-string]：无法在第 10 行的 /home/radiolev/public_html/top/toplist.class.php 中建立到服务器的链接

然后你问：

> 我不明白为什么它会出现，因为 mysql 密码很好。

不用担心。你只是犯了一个小错误。错误是您`mysql_real_escape_string`在不使用扩展连接的情况下使用了该`mysql_*`功能（注意：扩展，而不是数据库服务器）。

如果您在没有建立`mysql_*`扩展数据库连接的情况下调用该函数，PHP 将根据 php.ini 中提供的设置自动创建一个。这通常只是主机设置为*localhost* - 但没有用户名和密码。

这就是为什么您看到第一个错误是连接失败而第二个错误是连接失败的结果 - 没有指向数据库的链接，所以？`mysql_real_escape_string`不能工作。

要解决这个问题，请不要`mysql_real_escape_string`在使用 mysql via 时使用`PDO`。准备好的报表就是您所需要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T19:06:22.477

替换`mysql_real_escape_string`为 PDO 的[报价](http://php.net/manual/en/pdo.quote.php)或[bindValue](http://php.net/manual/en/pdostatement.bindvalue.php)

您会收到一堆错误，因为`mysql_real_escape_string`正在尝试使用最后一个打开的连接`mysql_connect`（如[PHP 手册](http://us1.php.net/mysql_real_escape_string)中所述）。由于您使用的是 PDO 而不是 mysql_* 函数，因此没有连接并`mysql_real_escape_string`引发错误。

# web-services - 高效构建 Web 服务的架构？

> ID：14113316
> 
> 赞同：0
> 
> 时间：2013-01-01T19:01:56.413
> 
> 标签：web-services, web-applications, architecture

我最近在做一个 Web 服务项目，并意识到我选择的架构效率极低。

我以一种非常程序化的方式编写了这篇文章，带有一点 OOP 和使用 Python 的标准异常处理的提示。基本上，它将按程序逐步检查数据，验证预期数据的存在，根据正则表达式验证数据，根据数据库验证一些数据，执行一些特定逻辑，检查错误，然后最终返回响应。提到所有数据都是使用 JSON 交换的，这可能会有所帮助。

我试图回顾代码，找到任何重复的异常，并将它们的处理推到逻辑链的顶部。这并不像我希望的那样容易，而且实际上花费了更多时间。它还使我的代码更容易出现错误，因为它的单元可测试性更低且更难阅读。

我注意到这种用于处理用户数据的程序代码范式很容易与 Web 开发相结合。例如，在 PHP 中处理表单时，可能会对数据运行一系列连续的 isset() 和 !empty() 方法。我对这种编码风格的问题是我觉得我花费了大量的时间来为错误事件编码，并且很难为这个特定目的概括和重用代码。

各种框架通过使用表单类（例如 Django）提供了很好的解决方法。但是，我注意到虽然您通过减少验证逻辑的重复来节省时间，但您仍然需要为每个预期输入“构建”一个表单。在处理软件即服务时，可能有数百个 API 方法需要您编写代码。OOP 在这里提供了一个好处，但有时客户可能会设置一个奇怪的要求，从而消除所获得的任何效率。

Web 应用程序可以从遵循 MVC 等范例/架构中受益匪浅。以我个人的经验，MVC（以及使用其原理的框架）并不能很好地解决这类问题。我考虑过使用函数式语言，但还没有尝试过。

**是否有任何特定的语言、架构/范式、约定，甚至是非常适合开发自定义 SASS 或 Web 服务项目的示例框架？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T20:58:33.757

作为从事大量此类工作的人，我会说您的 OOP 和 PHP 问题的部分原因是因为最初 PHP 不是 OOP 语言。OOP 后来被添加到该语言中。因此，当您查看代码示例时，它们通常会有一种程序化的感觉。

近年来，我对 Spring (Java) 或 WCF (C#) 最满意。这两种语言都是强类型的 OO 语言。从概念的角度来看，这导致了一个适用于我的项目的范例。这是概述：

1.  端点（REST 或 WSDL）——类似于 MVC 中的视图
2.  服务——这些服务提供端点并根据需要协调 DAO。围绕您的业务逻辑组织这些
3.  数据访问对象——将数据转换为本机对象，反之亦然。围绕您的数据源组织这些。
4.  模型/API——支持应用程序并自动为您的服务提供文档的原生对象。

希望有帮助

# eclipse - Eclipse 迫使一切都是静态的

> ID：14113317
> 
> 赞同：1
> 
> 时间：2013-01-01T19:01:56.510
> 
> 标签：eclipse, function, static, call

由于某种原因，在我从代码中添加和删除了一个静态变量之后，eclipse 开始在我调用的所有函数上给我错误，说这些函数必须是静态的。但是，如果我让程序运行时出现这些错误，程序就会按照我的预期运行。我的代码：

```
package main;

public class Main implements Runnable {

    public void start() {

        Thread thread = new Thread(this);
        thread.start();
        System.out.println("Running...");

        Ball.test(); <--- Giving me an error

    }

    public void run() {

    }

    public void stop() {
        System.out.println("Exiting...");
    }

} 
```

当我在球中创建一个名为 test 的方法时，它给了我：

```
public static void test() {
    // TODO Auto-generated method stub  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T19:03:19.813

是的 - 你调用该方法就好像它是一个静态方法：

```
Ball.test() 
```

如果要调用*实例*方法，则需要在实例上调用它，例如

```
Ball ball = new Ball();
ball.test(); 
```

了解静态成员和实例成员之间的区别很重要。您是否阅读过[Java 教程的相应章节](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)？你有一本好的 Java 书籍可以帮助你吗？（Stack Overflow 非常适合解决特定问题，但不适合从头开始学习语言。很好地解释语言概念需要大量的空间和时间。）

# c++ - 如何为dll制作调用图？

> ID：14113318
> 
> 赞同：0
> 
> 时间：2013-01-01T19:02:36.680
> 
> 标签：c++, dll, visual-studio-2012, profiler, call-graph

我有一个本地 C/C++ x64 dll，我想对其进行分析以进行静态代码分析。

在 Linux 中，我使用 callgrind/valgrind 和 KCachegrind 在我的工作流程中执行此步骤。

我想为 Windows dll 做这样的事情。

不幸的是，我无法在 VS 中使用 dll 进行分步调试（请参阅[https://stackoverflow.com/questions/14086693/how-to-setup-debugging-for-a-native-dll-in -ac-sharp-项目](https://stackoverflow.com/questions/14086693/how-to-setup-debugging-for-a-native-dll-in-a-c-sharp-project)）。

是否有人知道任何工具可以帮助生成从 C# gui 以独立于 C# 调用程序程序的方式调用的 Windows dll 的调用图？

**编辑**

我想制作一个与此类似的图表：http: [//python.rk.edu.pl/site_media/resources/python.rk.edu.pl/images/djangoprof2.png](http://python.rk.edu.pl/site_media/resources/python.rk.edu.pl/images/djangoprof2.png)

# python - 在 Python 中按字母顺序排列多行值列表？

> ID：14113319
> 
> 赞同：1
> 
> 时间：2013-01-01T19:02:41.200
> 
> 标签：python, list, sorting, tuples

我有一个按以下格式组织的姓名和地址列表：

```
Mr and Mrs Jane Doe  
Candycane Lane  
Magic Meadows, SC 
```

我有几个这样写的数据块，我希望能够按姓氏（Doe，在这种情况下）按字母顺序排列每个块。在做了一些挖掘之后，我能想到的最好的办法是我需要制作一个“列表列表”，然后使用姓氏作为按字母顺序排列块的键。然而，由于对 python 的新鲜度和缺乏谷歌技能，我能找到的最接近的是[这个](http://wiki.python.org/moin/HowTo/Sorting/). 我对将每个块转换为列表然后对其进行切片感到困惑；我似乎无法找到一种方法来做到这一点，但仍然能够正确地按字母顺序排列。非常感谢任何和所有指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T19:16:29.023

If I understood correctly, what you want basically is to sort values by "some computation done on the value", in this case the extracted last name.

For that, use the `key` keyword argument to `.sort()` or `sorted()`:

```
def my_key_function(original_name):
    ## do something to extract the last name, for example:
    try:
        return original_name.split(',')[1].strip()
    except IndexError:
        return original_name

my_sorted_values = sorted(my_original_values, key=my_key_function) 
```

The only requirement is that your "key" function is deterministic, i.e. always return the same output for each given input.

You might also want to sort by last name and then first name: in this case, just return a tuple `(last, first)`: if `last` si the same for two given items, `first` will be used to further sort the two.

## Update

For your specific case, this function should do the trick:

```
def my_key_function(original_name):
    return original_name.splitlines()[0].split()[-1] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T19:20:31.317

您想创建一个新列表，其中每个条目都是一个元组，其中包含您想要的排序键和整个内容。对该列表进行排序，然后获取排序中每个条目的第二个组成部分：

```
def get_sort_name (address):
    name, address, city = address.split('\n')
    return (name.split(' ')[-1] , address) # last item of first line & whole thing as tulle

keyed_list = map (get_sort_name, addresses)
keyed_list.sort()
sorted_addresses = [item[1] for item in keyed_list] 
```

当然，使用 lambdas 可以更紧凑，但可读性更好:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-01T19:24:23.433

假设您已经在列表中有数据

```
l = ['Mr and Mrs Jane Smith\nCandycane Lane\nMagic Meadows, SC',
     'Mr and Mrs Jane Doe\nCandycane Lane\nMagic Meadows, SC',
     'Mr and Mrs Jane Atkins\nCandycane Lane\nMagic Meadows, SC'] 
```

您可以指定要排序的键。

```
l.sort(key=lambda x: x.split('\n')[0].split(' ')[-1]) 
```

`.split(' ')[-1]`在这种情况下，获取第一行 ( ) 上的最后一个单词 ( `.split('\n')[0]`)

# javascript - javascript firefox 抛出操作不安全错误

> ID：14113321
> 
> 赞同：0
> 
> 时间：2013-01-01T19:03:03.517
> 
> 标签：javascript, html, blob

我正在尝试调整上传图像的大小，在提交之前将其设置回输入元素。

```
 $("#upload_button").click(function(){
            var imgToUpload = document.getElementById('id_picture').files;
            for (var x = 0; x < imgToUpload.length; x ++){
                var getImg = imgToUpload[x];
                console.log(typeof getImg);
                if (! imgToUpload[x].type.match(/image.*/)){
                    alert("not an image");
                    return false;
                }

                var img = document.createElement("img");
                img.src = window.URL.createObjectURL(getImg);

                var canvas = document.createElement("canvas");
                canvas.width  = 20;
                canvas.height = 20; 
                var ctx = canvas.getContext("2d");
                ctx.drawImage(img, 0, 0, 20, 20);

                var resizedUrl = canvas.toDataURL("image/jpeg",0.7);
                var byteString = atob(resizedUrl.split(",")[1]);

                var ab = new ArrayBuffer(byteString.length);
                var ia = new Uint8Array(ab);
                for (var index = 0; index < byteString.length; index++){
                    ia[index] = byteString.charCodeAt(index);
                }

                var bob =  new Blob([ab], {"type": getImg.type});

                var p = document.getElementById('id_picture');
                p.value = bob;

                $("#upload_form").submit();

            }
        }); 
```

当我到达时`p.value = bob`，我会遇到提到的问题。我做错了吗？

（我读到我可以简单地使用`canvas.toDataURL`并将其设置为另一个隐藏输入，但我正在尝试看看这是否可能）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T19:23:55.797

您可以使用 toDataURL

```
var canvas  = document.getElementById("ex1");
var dataUrl = canvas.toDataURL(); 
```

客户端示例： [http ://tutorials.jenkov.com/html5-canvas/todataurl.html](http://tutorials.jenkov.com/html5-canvas/todataurl.html)

服务器（PHP）示例[http://html5stars.com/?p=99](http://html5stars.com/?p=99)

# javascript - 这里的微妙错误是什么？

> ID：14113328
> 
> 赞同：1
> 
> 时间：2013-01-01T19:03:37.863
> 
> 标签：javascript, html

我放弃。这似乎微不足道，但在我尝试过的任何浏览器（IE8、Firefox 17）中始终不起作用。我可以证明 javascript 已启用并且在使用它的其他页面上工作正常，但 4 秒后，这总是表现得好像 javascript 被禁用，并重定向到“nojava.html”页面。为什么？

```
<html>
<head>
<meta http-equiv="refresh" content="4;url=nojava.html">
<title>Test Page</title>

<script language="JavaScript">
function CheckJava() {
  timerID = setTimeout("after3sec", 3000);
}

function after3sec() {
  window.location="intro1.html";
}
</script>
</head>

<body onload="CheckJava()">
<p>Test text</p>
</body>
</html> 
```

我完全希望对答案感到尴尬......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T19:20:02.157

微妙的错误是，如果您将字符串传递给[`setTimeout`](https://developer.mozilla.org/en/docs/DOM/window.setTimeout)，它将将该字符串评估为 JavaScript 代码。现在，

```
after3sec 
```

*是*有效的 JS 代码，但它只返回对命名函数的引用`after3sec`（然后丢弃它，因为您没有对它做任何事情），而不是实际调用该函数。

要修复它，只需在函数名称后附加一对括号：

```
setTimeout( "after3sec()", 3000 ); 
```

或者，更好的是，按照 gdoron 的建议进行操作，直接将函数引用传递给`setTimeout`：

```
setTimeout( after3sec, 3000 ); 
```

事实上，你甚至可以完全不使用单独的函数来做到这一点：

```
function CheckJava() {
    timerID = setTimeout( function () {
        window.location = "intro1.html";
    }, 3000 );
} 
```

或者，使用 stringy 样式：

```
function CheckJava() {
    timerID = setTimeout( 'window.location = "intro1.html";', 3000 );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T19:05:43.787

在使用之前不要使用字符串`setTimeout`并定义函数。
改成：

```
function after3sec() {
  window.location="intro1.html";
}

function CheckJava() {
  timerID = setTimeout(after3sec, 3000);
} 
```

顺便说一句，有很多更好的方法来检查是否启用了 javascript，例如`alert('TEST')`.

另请阅读有关[Meta refresh 的缺点](http://en.wikipedia.org/wiki/Meta_refresh#Drawbacks)

# macos - OS X Cocoa：基于 NSDocument 的应用程序未保存

> ID：14113330
> 
> 赞同：1
> 
> 时间：2013-01-01T19:04:53.517
> 
> 标签：macos, cocoa, nsdocument

我正在编写的基于 NSDocument 的应用程序有一个奇怪的问题。当我第一次创建文档并保存它时，一切正常。但是，当我重新打开文档（效果很好）时，主菜单中的“保存”、“另存为”和“恢复为保存”似乎都没有任何效果。方法

```
- (NSData *)dataOfType:(NSString *)typeName error:(NSError **)outError 
```

永远不会被调用。主菜单的“关闭”行为也很奇怪：它关闭了主文档窗口，但没有关闭任何辅助窗口。同样，只有在打开文档时才会观察到这种不规则行为；新创建文档时，单击主菜单中的“关闭”按预期工作。其他菜单项，“打开”项和我自己的自定义项都可以正常工作。

这是在 Snow Leopard 和 Lion 中开发的应用程序，当时没有任何问题。我最近升级到 Mountain Lion，但我不确定问题是从那里开始的，还是我对项目做了什么导致这种行为。当前用于编译应用程序的 SDK 是 10.7。

任何信息将不胜感激，并在此先感谢，

C。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T18:06:45.030

好吧，如果您的应用程序允许，您可以使用 Core Data。这肯定会消除错误并让您仅使用绑定来构建您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T04:26:01.097

好吧，看来我已修复它，但我不知道如何修复它。调试后我意识到 WindowController 确实被实例化了，所以不是那样的。我最终将项目的旧版本与一些最初显示相同行为的新代码组合在一起，但在某些时候它不再存在。我希望我知道我做了什么来破坏它并修复它，但我很高兴它现在可以工作了！

感谢 Moray，我认为是时候转向 Core Data。

谢谢大家，

C。

# python-3.x - 仅当不是 None 时才通过函数调用构造具有列表理解的集合

> ID：14113331
> 
> 赞同：1
> 
> 时间：2013-01-01T19:05:10.800
> 
> 标签：python-3.x, list-comprehension

接听电话

```
set(self.oid_to_path(oid, entries_parents) for oid in modified_by_one_parent_oids) 
```

这有效，但如果函数返回，也会添加`None`到列表中`None`

所以修改为

```
set(self.oid_to_path(oid, entries_parents) for oid in modified_by_one_parent_oids if None != self.oid_to_path(oid, entries_parents)) 
```

也可以，没有`None`s。

然而，这有两次调用该函数的缺点。如何只调用一次，然后使用一些记忆？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T19:11:56.047

在生成器表达式上使用集合推导...

```
g = (self.oid_to_path(oid, entries_parents) for oid in modified_by_one_parent_oids)
result = {el for el in g if el is not None} 
```

请注意，您的代码中实际上没有列表理解。您正在`set`使用生成器表达式调用构造函数，这可以更简单地完成 - 使用集合推导，如上所示。

# sql - 优化 linq 查询的性能（现在需要 12-15 秒，需要 3 秒）

> ID：14113336
> 
> 赞同：3
> 
> 时间：2013-01-01T19:05:54.083
> 
> 标签：sql, performance, tsql, linq-to-entities, query-optimization

编辑：我需要帮助将这些 linq 查询重写为 SQL 查询以获得尽可能高的性能。

我有一张大约有 1000 万行的表。它由 7 列组成，包括 Id。首先是 Id，然后是“TradeObjectModel”的三个键，最后是保持不同 TradeObjectModels 评级值的三个整数。像这样： ![在此处输入图像描述](../Images/a85cd2306bdc4ce263b62fecd9dcd0cf.png)

当用户，例如 To1Id (TradeObjectModel1 所有者) 使用键 71 处理她对其他贸易对象的评级时，只有一行足以满足当前视图。

我解决这个问题的尝试看起来像这样（代码示例下面的解释）：

```
IEnumerable<RatingListTriangleModel> allTriangleModels1 =
                this._ratingListTriangleRepository.All.Where(
                    ratingListRow =>
                    ratingListRow.To1Id == myTradeObject.TradeObjectId);
            var filteredallTriangleModels1 = from row in allTriangleModels1
                                             group row by row.To2Id into g
                                             select g.First();

            IEnumerable<RatingListTriangleModel> allTriangleModels2 =
                this._ratingListTriangleRepository.All.Where(
                    ratingListRow =>
                   ratingListRow.To2Id == myTradeObject.TradeObjectId);
            var filteredallTriangleModels2 = from row in allTriangleModels2
                                             group row by row.To3Id into g
                                             select g.First().

            IEnumerable<RatingListTriangleModel> allTriangleModels3 =
                this._ratingListTriangleRepository.All.Where(
                    ratingListRow =>
                   ratingListRow.To3Id == myTradeObject.TradeObjectId);

            var filteredallTriangleModels3 = from row in allTriangleModels3
                                             group row by row.To1Id into g
                                             select g.First();

            var fileredallTriangleModels =
                filteredallTriangleModels1.Union(filteredallTriangleModels2).Union(filteredallTriangleModels3).ToList();

            ViewBag.TriangleCount = fileredallTriangleModels.Count();

            foreach (var ratingListRow in fileredallTriangleModels)
            {
                //Find which one is my ad and set me as setter and their object as receiver
                if (ratingListRow.To1Id == customer.TradeObjectId)
                {
                    var ri = new TriangleViewModel(
                        customer.TradeObjectId,
                        this._customerRepository.FindTradeObjectId(ratingListRow.To2Id),
                        ratingListRow,
                        this._tradeobjectRepository.Find(ratingListRow.To2Id));

                    model.Models3.Add(ri);
                    continue;
                }

                if (ratingListRow.To2Id == customer.TradeObjectId)
                {
                    var ri = new TriangleViewModel(
                        customer.TradeObjectId,
                        this._customerRepository.FindTradeObjectId(ratingListRow.To3Id),
                        ratingListRow,
                        this._tradeobjectRepository.Find(ratingListRow.To3Id));

                    model.Models3.Add(ri);
                    continue;
                }

                if (ratingListRow.To3Id == customer.TradeObjectId)
                {
                    var ri = new TriangleViewModel(
                        customer.TradeObjectId,
                        this._customerRepository.FindTradeObjectId(ratingListRow.To1Id),
                        ratingListRow,
                        this._tradeobjectRepository.Find(ratingListRow.To1Id));
                    model.Models3.Add(ri);
                }
            } 
```

首先，我得到我的对象在第一列的所有行，将它们分组以仅选择一个，然后在第二列和第三列继续对我做同样的事情。这里的 ToList() 只是临时的，让 med 能够在它们上运行秒表，每个都需要 0-12 秒。然后我加入他们并运行所有这些以在前端代码中创建 webgrid 使用的模型。

这会导致两个问题： 1\. 需要很长时间。和 2\. 如果我的贸易对象 ID 位于不止一列，我将获得不止一行，显示不止一个我感兴趣的贸易对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:49:23.670

尝试使用[数据库引擎优化顾问](http://msdn.microsoft.com/en-gb/library/hh231122.aspx)来查看添加/删除/更改表上的索引是否显着提高了 LINQ 查询提供的工作负载的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T11:02:57.053

尝试使用分析器捕获您的查询并隔离前 3 个运行时间最长的查询。将它们复制到 SSMS 中并执行它们。寻找实际的执行计划。查找表扫描或估计记录数与实际记录数之间的巨大差异。从这里开始，要么统计信息关闭，要么您可以考虑放置一个索引来覆盖查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T19:30:33.447

从性能的角度来看，使用某种存储过程可能会更好。LINQ 往往会通过这些类型的查询/查找来减慢速度。但是，如果存储过程还不够，您可以做一些事情。

首先，您可能想看看[Incremental Search](http://msdn.microsoft.com/en-us/magazine/cc721610.aspx)，它基本上是通过保持搜索继续或“延迟”执行给定时间而编写的。这应该适用于任何 IEnumerable。

我建议的下一件事是看看您是否可以潜在地集成类似于上面的增量搜索的东西（通过使用添加函数等），以便为任何适用于您的程序的东西进行类似的实现。

不过说真的 - 我过去已经看到存储过程的巨大改进，这肯定会提高速度（在我的例子中，一个查询减少了近 10 倍！）

# forms - Excel VBA代码理解

> ID：14113340
> 
> 赞同：1
> 
> 时间：2013-01-01T19:06:31.530
> 
> 标签：forms, vba, excel

我正在尝试构建一个基于 excel 的输入表单，我在网上找到了一些东西，我正在尝试理解这些代码：

```
Dim Hsheet,Isheet As Worksheet
Dim NextRow, oCol As Long
Dim MyRng, MyCell As Range
Dim MyCopy, ClearCells As String

Set Hsheet = Worksheet("InputForm")
Set ISheet = Worksheet("Database") 
```

**这是我不明白的部分，有人可以给我解释一下吗？**

* * *

```
With Hsheet
     nextRow = .Cells(.Rows.Count, "A").End(xlUp).Offset(1, 0).Row
End With 
```

* * *

```
With Isheet
    Set myRng = .Range(MyCopy)

    If Application.CountA(myRng) <> myRng.Cells.Count Then
        MsgBox "Please fill in all the cells!"
        Exit Sub
    End If
End With 
```

**还有这部分，有人可以向我解释一下吗？**

```
With Hsheet
    .Cells(nextRow, "a").Value = Application.UserName
    oCol = 1
    For Each myCell In MyRng.Cells
        Hsheet.Cells(NextRow, oCol).Value = myCell.Value
        oCol = oCol + 1
    Next myCell
End With 
```

提前致谢 ：）

```
With Isheet
  On Error Resume Next
     With .Range(ClearCells).Cells.SpecialCells(xlCellTypeConstants)
          .ClearContents
          Application.Goto .Cells(1) ', Scroll:=True
     End With
  On Error GoTo 0
End With 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T19:35:19.440

我可以解释代码的作用，但我想提的很少:)

**一种**

```
Dim Hsheet,Isheet As Worksheet
Dim NextRow, oCol As Long
Dim MyRng, MyCell As Range
Dim MyCopy, ClearCells As String 
```

这不是声明变量/对象的正确方法例如，如果您考虑这一行

```
Dim Hsheet,Isheet As Worksheet 
```

在这里， only`Isheet`被声明为**工作表**，而不是`Hsheet`. `Hsheet`自动成为一个**变**体。正确的方法是

```
Dim Hsheet As Worksheet, Isheet As Worksheet
Dim NextRow As Long, oCol As Long
Dim MyRng As Range, MyCell As Range
Dim MyCopy As String, ClearCells As String 
```

**乙**

```
With Hsheet
     nextRow = .Cells(.Rows.Count, "A").End(xlUp).Offset(1, 0).Row
End With 
```

这段代码的作用是尝试找到在 Col A 中有数据的最后一行，然后向下偏移一行以获得下一个空行，以便您可以写入它。

[这里](https://stackoverflow.com/questions/11169445/error-finding-last-used-cell-in-vba)提到了另一种写相同东西的方法所以上面的代码也可以写成

```
With Hsheet
     nextRow = .Range("A" & .Rows.Count).End(xlUp).Row + 1
End With 
```

**C**

```
With Isheet
    Set myRng = .Range(MyCopy)

    If Application.CountA(myRng) <> myRng.Cells.Count Then
        MsgBox "Please fill in all the cells!"
        Exit Sub
    End If
End With 
```

我相信`MyCopy`应该保持一些我在你的代码中看不到的价值。假设它拥有一个有效的单元格地址，代码试图做的是通过比较单元格计数与填充的单元格数来确保所有单元格都被填满。

**D**

```
With Hsheet
    .Cells(NextRow, "a").Value = Application.UserName
    oCol = 1
    For Each myCell In MyRng.Cells
        Hsheet.Cells(NextRow, oCol).Value = myCell.Value
        oCol = oCol + 1
    Next myCell
End With 
```

这也很简单。该代码将 存储`UserName`在 Col A 中的下一个可用单元格中，然后将 Range MyRng 中的值存储在 Sheet`Isheet`中的 Col A 中`Hsheet`

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T19:21:52.090

您的一段代码似乎从一张纸复制到另一张纸，将用户名添加到一个范围的顶部。
但是字符串变量`MyCopy`似乎没有被初始化，因此我认为按原样运行这个宏不会产生任何期望的结果（除非`Range`函数在使用空字符串调用时返回一些单元格？我不知道它的规格）。

我不完全记得 Excel VBA，但我认为：

`Cells(.Rows.Count, "A")`选择位于最后一行“A”列的单元格。
`End(xlUp)`将选择移动到连续非空单元格范围的顶部（`CTRL + UP`我认为就像在 Excel 中按下一样）。
`Offset(1, 0)`将所选内容移动到底部的一个单元格。 `Row`返回该单元格的行号。

因此，您的第一个代码块将 A 列中最后一个非空单元格范围的第二行的行号设置为变量`nextRow`.

您可以按照相同的推理来理解所有其他代码块的用途。我建议您搜索 MSDN 的 VBA for Excel 文档网站，以获取有关您还不了解的每个功能的含义的更多信息。

# java - 需要 http 407 代理身份验证：如何在 java 代码中处理

> ID：14113341
> 
> 赞同：19
> 
> 时间：2013-01-01T19:06:59.140
> 
> 标签：java, proxy, proxy-server

```
System.setProperty("http.proxySet", "true");
System.setProperty("java.net.useSystemProxies", "true");
System.setProperty("http.proxyHost", "192.168.1.103");
System.setProperty("http.proxyPort", "3128");
System.setProperty("http.proxyUser", "user123");
System.setProperty("http.proxyPassword", "passwD123");

url = new URL("http://www.google.co.in"); 
```

每次我使用此代码时，IOException 都会抛出 HTTP 响应代码 407。HTTP 407 表示需要代理身份验证。为什么在我设置 proxyUser 和 proxyPassword 时会出现这个问题。 ![在此处输入图像描述](../Images/29cf3f35d308b4693fecb734e2d99e5c.png)
如果我输入错误的密码会出现 http 401，但它总是给我 407，这意味着我的代码不使用用户名和密码。在上面的代码中，user123 是用户名，passwD123 是代理认证的密码。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-01T20:57:56.650

[http://blog.vinodsingh.com/2008/05/proxy-authentication-in-java.html](http://blog.vinodsingh.com/2008/05/proxy-authentication-in-java.html)

感谢 Vinod Singh 先生，我找到了解决方案。

Java中的代理身份验证

通常的公司网络通过代理服务器提供互联网访问，有时它们也需要身份验证。可能应用程序确实会打开与公司 Intranet 外部的服务器的连接。所以必须以编程方式进行代理身份验证。幸运的是，Java 提供了一种透明的机制来进行代理身份验证。

创建一个简单的类，如下所示 -

```
import java.net.Authenticator;

class ProxyAuthenticator extends Authenticator {

    private String user, password;

    public ProxyAuthenticator(String user, String password) {
        this.user = user;
        this.password = password;
    }

    protected PasswordAuthentication getPasswordAuthentication() {
        return new PasswordAuthentication(user, password.toCharArray());
    }
} 
```

并在您的代码打开 URLConnection- 之前放置这些代码行

```
Authenticator.setDefault(new ProxyAuthenticator("user", "password"));
System.setProperty("http.proxyHost", "proxy host");
System.setProperty("http.proxyPort", "port"); 
```

现在所有调用都将成功通过代理身份验证。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-12-01T09:24:43.077

对于一般情况，使用 an 的答案`Authenticator`是正确的。[但是， Java 8u111](http://www.oracle.com/technetwork/java/javase/8u111-relnotes-3124969.html)及更高版本中 HTTP 407 的另一个原因是您对代理使用 BASIC 身份验证。

在这种情况下，添加此系统属性：

```
-Djdk.http.auth.tunneling.disabledSchemes= 
```

我发现了这一点：[https ://confluence.atlassian.com/kb/basic-authentication-fails-for-outgoing-proxy-in-java-8u111-909643110.html](https://confluence.atlassian.com/kb/basic-authentication-fails-for-outgoing-proxy-in-java-8u111-909643110.html)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-07-29T16:08:19.217

@GauravDS你提到：

[http://blog.vinodsingh.com/2008/05/proxy-authentication-in-java.html](http://blog.vinodsingh.com/2008/05/proxy-authentication-in-java.html) 感谢 Vinod Singh 先生，我找到了解决方案。Java 中的代理身份验证 通常的公司网络通过代理服务器提供 Internet 访问，有时它们也需要身份验证。可能应用程序确实会打开与公司 Intranet 外部的服务器的连接。所以必须以编程方式进行代理身份验证。幸运的是，Java 提供了一种透明的机制来进行代理身份验证。创建一个简单的类，如下所示 - 。
.
.
并在您的代码打开 URLConnection 之前放置这些代码行 - `Authenticator.setDefault(new ProxyAuthenticator("user", "password")); System.setProperty("http.proxyHost", "proxy host"); System.setProperty("http.proxyPort", "port");` 现在所有调用都将成功通过代理身份验证。

如果您要连接的站点也需要用户名/密码才能允许您使用，该怎么办。设置默认身份验证器（Authenticator.setDefault）将失败我猜当外部站点将寻找经过身份验证的用户时。

有什么意见吗？....有人吗？

**编辑：1** 之前使用此代码并收到错误（407）需要代理身份验证。我相信这是因为不同的主机请求了身份验证。并且当您为一台主机设置一个用户/通行证的默认身份验证器时，其他请求主机的身份验证将失败。我昨天对 SimpleAuthenticator 类进行了以下更改，现在它就像一个魅力。

```
 protected PasswordAuthentication getPasswordAuthentication()
   {
    String requestingHost = getRequestingHost();
    if (requestingHost == proxyHost){
        System.out.println("getPasswordAuthentication() request recieved from->" + requestingHost );
        return new PasswordAuthentication(proxyuser,proxypass.toCharArray());
    }
    else{
        System.out.println("getPasswordAuthentication() request recieved from->" + requestingHost );
        return new PasswordAuthentication(sharepointusername,sharepointpassword.toCharArray());
    }

   } 
```

更多信息在这里：[http ://blog.ashwani.co.in/blog/2013-07-29/access-sharepoint-webservices-from-java-behind-proxy/](http://blog.ashwani.co.in/blog/2013-07-29/access-sharepoint-webservices-from-java-behind-proxy/)

# xml - xsl 到 pdf - 空白页

> ID：14113343
> 
> 赞同：0
> 
> 时间：2013-01-01T19:07:10.537
> 
> 标签：xml, xslt, xsl-fo

我正在使用 xsl 和 pdf 输出。我有一个这样的xml文件：

```
<?xml version="1.0" encoding="utf-8" ?>
  <document>
    <header>
      <author>my name</author>
    </header>
    <body>
      <text>some text</text>
    </body>
  </document> 
```

我的 xsl 文件如下所示：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0" xmlns:fo="http://www.w3.org/1999/XSL/Format">

<xsl:template match="/">
  <fo:root>

    <fo:layout-master-set>
      <fo:simple-page-master
        master-name="_title"
        page-height="29.7cm"
        page-width="21cm"
        margin="3cm">
        <fo:region-body/>
      </fo:simple-page-master>

      <fo:simple-page-master
        master-name="_body"
        page-height="29.7cm"
        page-width="21cm"
        margin="3cm">
        <fo:region-body/>
      </fo:simple-page-master>

      <fo:page-sequence-master master-name="titlepage">
        <fo:single-page-master-reference master-reference="_title"/>
      </fo:page-sequence-master>

      <fo:page-sequence-master master-name="body">
        <fo:repeatable-page-master-reference master-reference="_body"/>
      </fo:page-sequence-master>

    </fo:layout-master-set>

    <fo:page-sequence master-reference="titlepage">
      <fo:flow flow-name="xsl-region-body" font-family="Courier" font-size="12pt">
        <fo:block>
          <xsl:apply-templates select="header"/>
        </fo:block>
      </fo:flow>
    </fo:page-sequence>

    <fo:page-sequence master-reference="body">
      <fo:flow flow-name="xsl-region-body" font-family="Courier" font-size="12pt">
        <fo:block>
          <xsl:apply-templates select="body"/>
        </fo:block>
      </fo:flow>
    </fo:page-sequence>
    </fo:root>
  </xsl:template>

  <xsl:template match="header">
    <xsl:apply-templates />
  </xsl:template>

  <xsl:template match="body">
    <xsl:apply-templates />
  </xsl:template>
</xsl:stylesheet> 
```

我希望有两个 pdf 页面，第一页带有“我的名字”，第二页带有“一些文字”。相反，我得到两个空页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T09:00:20.540

查看您的 XSLT，您有以下模板

```
<xsl:template match="/"> 
```

这与 XML 文档的“文档节点”匹配。这与 XML 文档的顶级元素不同，在您的情况下是**文档**。/ 实际上是顶级元素的父元素。

这意味着稍后在您的模板中，当您执行以下应用模板时，就像这样

```
<xsl:apply-templates select="header"/>
<xsl:apply-templates select="body"/> 
```

**它们分别有效地寻找标题**和**正文**的顶级元素。但是，您的**header**和**body**元素是顶级**文档**元素的子元素。

为了解决这个问题，你有几个选择。你可以用这些替换你的应用模板：

```
<xsl:apply-templates select="document/header"/>
<xsl:apply-templates select="document/body"/> 
```

或者，您可以更改初始模板以匹配以下内容（而不仅仅是`<xsl:template match="/">`）

```
<xsl:template match="/document"> 
```

同样值得注意的是，正如 Dimitre 在他的评论中提到的，在你的**header**和**body**模板中，你正在做`<xsl:apply-templates />`. **但是，您没有与header**或**body**的任何子元素匹配的模板。这意味着默认模板将启动，并且只输出元素的文本。

# c# - 如何确定用户是否点击了 ContextMenuStrip？

> ID：14113345
> 
> 赞同：0
> 
> 时间：2013-01-01T19:07:27.913
> 
> 标签：c#, winforms

我正在构建没有显示任何表单的 winform 应用程序（表单的不透明度为 0，ShowInTaskbar 属性为 false）。它只能从托盘通知图标访问。当用户用鼠标左键单击它时，将显示 contextMenustrip 菜单。因为我想检测鼠标左键单击，所以不能使用 NotifyIcon 的 ContextMenu 属性。

我想，如果用户在菜单外点击，它应该隐藏。我不知道我该怎么做...

如果我显示了表单，我可以检测到停用表单事件，然后隐藏我的菜单，但在所描述的情况下它看起来更难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T19:14:35.883

1) Instead of setting opacity to 0 better set `WindowState = FormWindowState.Minimized`

2) You cant detect mouse clicks outside of your program as they are controlled by other programs or your OS, but handling `Leave` or `MouseLeave` event should help you

# objective-c - NSClassFromString() 安全问题

> ID：14113353
> 
> 赞同：1
> 
> 时间：2013-01-01T19:08:46.173
> 
> 标签：objective-c, cocoa

我正在尝试创建一个工厂类结构，其中我的抽象基类 PDObject 根据在 NSDictionary 中传递给它的信息将实例实例化为适当的子类。这是我的 PDObject 初始化方法：

```
- (id)initWithDictionary:(NSDictionary *)dictionary inEnvironment:(PDEnvironment *)environment {
    NSString *className = [dictionary objectForKey:@"objectType"];
    if (className) {
        Class objectClass = NSClassFromString(className);
        if ([objectClass isSubclassOfClass:[PDObject class]]) {
            self = [[objectClass alloc] initWithDictionary:dictionary inEnvironment:environment];
        } else {
            NSLog(@"tried to instantiate an object of the wrong object type");
            self = nil;
        }
    } else {
        NSLog(@"tried to instantiate an object without an object type");
    }
    return self;
} 
```

我想知道是否有人知道这种模式的任何安全问题。我担心字典中可能会传入一些恶意的东西并实例化一些意想不到的东西。我检查以确保它是 PDObject 的正确子类。这里有什么我应该担心的，还是我只是偏执？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T19:14:50.747

It is unlikely to be a security hole, but passing potentially random strings to runtime functions isn't really something the runtime is hardened against. The risk isn't instantiating random classes, but causing the app to potentially crash or execute random code.

In general, I wouldn't go beyond minimal effort. To that ends, I would suggest using `NSScanner` to scan the class name to see if it has any characters that are obviously out of bounds. I would think scanning for `alphanumericCharacterSet` would be sufficient.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T19:25:31.470

活力很好，我认为这里没有什么特别危险的地方。如果要避免崩溃，可以检查特定对象 a。不是`nil`（以防万一）和b。响应您要发送的任何选择器。另请注意，无论您使用哪种保护，想要使用您的应用程序模拟的人总是能够使用库插入（遇到臭名昭著的`DYLD_INSERT_LIBRARIES`环境变量）和 Objective-C 运行时来做到这一点。

# wcf - 关于 WCF Session、InstanceContextMode、ConcurrencyMode 等的一些基本查询

> ID：14113355
> 
> 赞同：1
> 
> 时间：2013-01-01T19:09:06.560
> 
> 标签：wcf

我是 WCF 的新手。经常凝视 wcf 代码和文章。在查看了许多代码后，我经常坚持非常基本的事情，并且没有对以下问题进行详细讨论。所以这是我的几个基本问​​题....并寻找示例情况和示例代码的详细讨论。

## 问题一

```
if we do not write anything like SessionMode=SessionMode.Required 
then what will be default nature of WCF service. there will be no session

a) SessionMode.Required
b) SessionMode.Allowed
c) SessionMode.NotAllowed 
```

简单说说SessionMode.Required,SessionMode.Allowed是什么意思，SessionMode.Required,SessionMode.Allowed有什么区别？

什么是默认会话模式？

我见过人们开发 wcf 服务，但没有指定任何类似 session 的东西。所以只要告诉我什么时候应该打开 SessionMode.Required 或 SessionMode.Allowed ？

## 问题 B

```
what is InstanceContextMode? 
many people use InstanceContextMode Single or PerCall or PerSession ? 
```

当我应该选择 InstanceContextMode Single 或 PerCall 或 PerSession 时，我只需要深入了解？

简要告诉我何时打开 Single 会发生什么，或者在 PerCall 或 PerSession 的情况下会发生什么？Single 或 PerCall 或 PerSession 有什么区别

什么是默认 InstanceContextMode ？

## 问题 C

```
what is ConcurrencyMode ??
actually what ConcurrencyMode  does.....what it determines??
there are few ConcurrencyMode available and those 
are Multiple,Reentrant and Single

which concurrent mode one should use in what kind of situation. 
what will be the best    choice 
```

## 问题 D

```
what is the meaning of UseSynchronizationContext=false 
when one should turn on UseSynchronizationContext=true 
or when one should go for UseSynchronizationContext=false ? 
```

## 问题 E

关于运营合同

```
[OperationContract(IsInitiating=false, IsOneWay=false)]
bool Add_Contact(int sessionkey, string Newusrname); 
```

IsInitiating=false 或 true 是什么意思。我什么时候应该设置它为真或假？IsOneWay=false 或 true 的含义是什么。我什么时候应该设置它为真或假？

我相信我的问题是非常基本的，每次监控这个论坛时都有很多学者。我希望我能在很多情况下得到最好的答案，比如当一个人应该选择哪个选项而不是其他选项时，只需要很少的示例代码来模拟情况。谢谢

# iphone - 仅将图像保存到自定义相册

> ID：14113361
> 
> 赞同：8
> 
> 时间：2013-01-01T19:09:44.810
> 
> 标签：iphone, ios, xcode

我一直在关注本教程[http://www.touch-code-magazine.com/ios5-saving-photos-in-custom-photo-album-category-for-download/](http://www.touch-code-magazine.com/ios5-saving-photos-in-custom-photo-album-category-for-download/)将图像保存到自定义相册。这工作正常，但它保存到相机胶卷和我的自定义相册。

查看代码，这似乎是一个必要的步骤，因为在将图像保存到相机胶卷后，我们有一个 ALAsset 可以与 ALAssetsGroup addAsset: 方法一起使用。

有没有一种方法可以将图像添加到自定义相册而不将其添加到相机胶卷？

当前使用此代码：

```
-(void)saveImage:(UIImage*)image toAlbum:(NSString*)albumName withCompletionBlock:(SaveImageCompletion)completionBlock
{

 //write the image data to the assets library (camera roll)
    [self writeImageToSavedPhotosAlbum:image.CGImage orientation:(ALAssetOrientation)image.imageOrientation 
                        completionBlock:^(NSURL* assetURL, NSError* error) {

                      //error handling
                      if (error!=nil) {
                          completionBlock(error);
                          return;
                      }

                      //add the asset to the custom photo album
                      [self addAssetURL: assetURL 
                                toAlbum:albumName 
                    withCompletionBlock:completionBlock];

                  }];
}

-(void)addAssetURL:(NSURL*)assetURL toAlbum:(NSString*)albumName withCompletionBlock:(SaveImageCompletion)completionBlock
{
__block BOOL albumWasFound = NO;

//search all photo albums in the library
[self enumerateGroupsWithTypes:ALAssetsGroupAlbum 
                    usingBlock:^(ALAssetsGroup *group, BOOL *stop) {

                        //compare the names of the albums
                        if ([albumName compare: [group valueForProperty:ALAssetsGroupPropertyName]]==NSOrderedSame) {

                            //target album is found
                            albumWasFound = YES;

                            //get a hold of the photo's asset instance
                            [self assetForURL: assetURL 
                                  resultBlock:^(ALAsset *asset) {

                                      //add photo to the target album
                                      [group addAsset: asset];

                                      //run the completion block
                                      completionBlock(nil);

                                  } failureBlock: completionBlock];

                            //album was found, bail out of the method
                            return;
                        }

                        if (group==nil && albumWasFound==NO) {
                            //photo albums are over, target album does not exist, thus create it

                            __weak ALAssetsLibrary* weakSelf = self;

                            //create new assets album
                            [self addAssetsGroupAlbumWithName:albumName 
                                                  resultBlock:^(ALAssetsGroup *group) {

                                                      //get the photo's instance
                                                      [weakSelf assetForURL: assetURL 
                                                                    resultBlock:^(ALAsset *asset) {

                                                                        //add photo to the newly created album
                                                                        [group addAsset: asset];

                                                                        //call the completion block
                                                                        completionBlock(nil);

                                                                    } failureBlock: completionBlock];

                                                  } failureBlock: completionBlock];

                            //should be the last iteration anyway, but just in case
                            return;
                        }

                    } failureBlock: completionBlock];

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-03T17:52:28.903

事实证明没有 - 默认情况下，图像将始终写入相机胶卷。

# excel - 第一次迭代后执行循环

> ID：14113368
> 
> 赞同：0
> 
> 时间：2013-01-01T19:11:12.843
> 
> 标签：excel, vba

这个脚本在踢我的屁股。前进一步后退三步。:)

我有一个指定的文件夹，我的文件存放在那里，脚本一次一个地遍历它们。它查找以 N 或 V 开头的文件名，然后根据文件类型确定要复制/粘贴的单元格范围。

我在第一次迭代后基于第一列的脚本行为。在脚本确定将数据粘贴到 A 列中的位置后，B 列数据应根据“firstRange”变量位置跟随，并使用 .Offset(-1,1) 将其粘贴到它旁边。

我需要脚本首先与顶部对齐，因此这段代码：

```
.Range("A" & .Rows.Count).End(xlUp).Offset(1, 0).PasteSpecial xlPasteValues 
```

在第一次迭代之后，我需要它从 A 列开始，以下列结束在同一行中，这是我使用的地方：

```
If fileName Like "V*.xls" > 1 Then 
```

但是 - 我不知道该语法是否正确。我试图让它在第一次迭代后开始运行。

这是 A 列和 B 列的代码片段：

```
fileName = Dir(folderPath & "*.xls")
    Do While fileName <> ""
Application.ScreenUpdating = False
    Set wbkCS = Workbooks.Open(folderPath & fileName)

If fileName Like "V*.xls" Then
    wbkCS.Worksheets("Cut Sheet").Range("S4:S2000").Copy
With wbkVer.Worksheets("Cutsheets")
    Set firstRange = .Range("A" & .Rows.Count).End(xlUp).Offset(1, 0)
        firstRange.PasteSpecial xlPasteValues
End With
ElseIf fileName Like "N*.xls" Then
    wbkCS.Worksheets("PON Cut Sheet").Range("AV3:AV2000").Copy
        With wbkVer.Worksheets("Cutsheets")
    Set ponRange = .Range("A" & .Rows.Count).End(xlUp).Offset(1, 0)
        ponRange.PasteSpecial xlPasteValues
End With
End If

If fileName Like "V*.xls" > 1 Then
    wbkCS.Worksheets("Cut Sheet").Range("AA4:AA2000").Copy
        With wbkVer.Worksheets("Cutsheets")
            firstRange.Offset(-1, 1).PasteSpecial xlPasteValues
End With
ElseIf fileName Like "V*.xls" Then
     wbkCS.Worksheets("Cut Sheet").Range("AA4:AA2000").Copy
    With wbkVer.Worksheets("Cutsheets")
       .Range("B" & .Rows.Count).End(xlUp).Offset(1, 0).PasteSpecial xlPasteValues
End With
ElseIf fileName Like "N*.xls" > 1 Then
    wbkCS.Worksheets("PON Cut Sheet").Range("AA3:AA2000").Copy
    With wbkVer.Worksheets("Cutsheets")
      firstRange.Offset(-1, 1).PasteSpecial xlPasteValues
End With
ElseIf fileName Like "N*.xls" Then
    wbkCS.Worksheets("PON Cut Sheet").Range("AA3:AA2000").Copy
    With wbkVer.Worksheets("Cutsheets")
      .Range("A" & .Rows.Count).End(xlUp).Offset(1, 0).PasteSpecial xlPasteValues
End With
End If 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T19:32:50.553

不，这不是正确的语法。

Infact`fileName Like "N*.xls"`永远是真或假。所以它永远不会是`> 1`IE`fileName Like "N*.xls" > 1`总是评估为假。

您可能想要做的是使用一个布尔值作为执行代码的标志。例如：

```
fileName = Dir(folderPath & "*.xls")
dim hasRun as boolean
Do While fileName <> ""
...
    If fileName Like "V*.xls" AND hasRun Then 'This will never run the first time
...
hasRun = true
loop 
```

代表了很多我没有显示的`...`代码，因为我想让重要的部分更清楚。

# c# - WinForms 解决方案中多个项目的通用 log4net 配置文件和可配置记录器名称的最佳实践

> ID：14113377
> 
> 赞同：3
> 
> 时间：2013-01-01T19:12:57.350
> 
> 标签：c#, log4net

> **可能重复：**
> [在 WinForms 应用程序中引用 log4net DLL 的正确方法](https://stackoverflow.com/questions/14112559/correct-way-to-reference-log4net-dll-in-winforms-application)

我的 WinForms 解决方案有 2 个项目：1 个用于项目特定代码，另一个用于可重用代码。我从两个项目中引用 log4net.dll。我将 dll 保存在主解决方案文件夹下的 libs 文件夹中，并从两个项目中引用此 DLL。注意：这是一个物理文件夹，而不是解决方案文件夹。

我想在两个项目都可以读取的单个 xml 文件中指定 log4net 配置设置。

1.  我在哪里保存这个 xml 文件？
2.  如何指向 log4net XmlConfigurator 来读取这个 xml 文件？
3.  如果我不想硬编码 xml 文件名和路径，有哪些选项？

4.  （可选问题）假设我不想遵循使用完全限定类名作为记录器名称的约定；而是在运行时，我想从 xml 文件中读取每个类的记录器名称（目的是隔离外部文件中的父子记录器关系并稍后决定）；那么有哪些选择呢？

我正在使用 C# 2.0。

虽然这些听起来像是很多问题，但对于经验丰富的 log4net 开发人员来说应该很简单，我猜！

编辑 1：我不想在 app.config 文件本身中混合 log4net 配置。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T21:43:12.607

我想我找到了解决方案。

1.  我现在将 XML 文件保存在项目的项目文件夹中，该文件夹标记为启动项目。在项目的文件属性中，我已将“复制到输出目录”设置为“如果较新则复制”

2.  我使用程序集级别属性将 log4net XmlConfiguration 指向此 XML 文件：

    [程序集：log4net.Config.XmlConfigurator(ConfigFile="LogConfig.xml",Watch = true)]

3.  目前我已经在上面的属性中硬编码了文件名。如果以后我不想硬编码，我可以在 app.config 文件的 appSettings 部分插入一个 log4net.Config 键。

4.  如果我想从 xml 文件中读取每个类的记录器名称，我可以在 app.config 文件中为每个完全限定的类名称插入适当的键，然后从那里读取。

如果有人有其他想法，请发布。

# javascript - 使用 Morris.js 图表舍入 y 值标签

> ID：14113378
> 
> 赞同：4
> 
> 时间：2013-01-01T19:12:59.347
> 
> 标签：javascript, morris.js

我使用 Morris.js 绘制了一些 JSON 数据。该图工作正常，但是我试图在折线图中沿 y 轴调整标签。

目前，yLabels 由 morris.js 使用 JSON 数据的值范围（其中 x 轴是时间）自动生成。在我的示例 JSON 中，值的范围从 54 到 -47，因此生成的 yLabel 是 54、29、4、-22、-47。但是，我希望将这些值四舍五入为 -50、-25、0、25 和 50。我还希望“0”线突出，希望有不同的颜色。

当我动态创建数据时，这些不会被修复，在另一个图表中，值可能介于 -2.5 和 +2.5 之间（在这种情况下，我希望沿 y 轴的标签为 -2.5、-1.25 , 0, 1.25, 2.5)。

我将如何舍入 morris.js 正在创建的标签并使“0”行变为红色？

我曾尝试创建一个 yLabels ( `yLabels: ['-50','-25','0','25','50'],`) 数组，但它不起作用，即使它有我也不想“硬编码”值，因为正如我所说，每个图表都会不同并且是动态生成的。

任何帮助是极大的赞赏。

# 更新

在第一个示例中，我已经能够得到我想要的 ymin 和 ymax 分别为 -50 和 50，但就像我提到的，我不想硬编码这些值，因为 ymin/max 会根据正在解析的 JSON。有没有一种方法可以始终确保中线始终为 0，并且 morris 确定它上方和下方的两个 y 值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:54:18.360

我不能使用莫里斯选项来完成。您必须进入源代码并更改*morris.grid.coffee*文件中的 drawGrid() 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-23T15:35:48.983

我在 morris.js 中增加了 gridDefaults 的 numLines 属性，并且能够显示我的 Y 轴中的所有内容。也许您可以使用该属性来以不同的方式显示您的 Y 轴。

# php - 如何计算从用户加载页面/表单到提交的时间？

> ID：14113379
> 
> 赞同：0
> 
> 时间：2013-01-01T19:12:57.850
> 
> 标签：php, javascript, jquery, mysql

我有一个包含一些问题的测验页面（多项选择，真假）。在提交页面后的结果中，我想显示如下内容：

```
Started on  Tuesday, 1 January 2013, 04:09 AM
Completed on    Tuesday, 1 January 2013, 04:10 AM
Time taken  47 secs
Grade   7 out of a maximum of 10 (65%) 
```

我不知道如何计算开始时间和结束时间以显示上述结果，以及如何计算从用户加载页面到提交表单的时间。

我是新来的，我需要你的建议。如果问题用 php 或 javascript 或 jquery 解决，我没有问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T19:17:51.603

您可以这样做，开始和结束时间戳将与表单一起提交。然后，您可以使用 PHP 进行计算。

```
var form = document.getElementById("form");

window.onload = function() {
    var start = document.createElement("input");
        start.type = "hidden";
        start.name = "start";
        start.value = +new Date()/1000; //unix timestamp

    form.appendChild(start);
};

form.onsubmit = function() {
    var stop = document.createElement("input");
        stop.type = "hidden";
        stop.name = "stop";
        stop.value = +new Date()/1000;

    form.appendChild(stop);
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T19:16:38.593

我会把开始的时间放在一个 cookie 或会话中，然后一旦他们完成它，只需从当前时间中减去那个时间——这就是所花费的时间！

它可能看起来像这样：

测验页面：

```
session_start();
$_SESSION['startTime'] = time();
// This is where the quiz would be displayed 
```

测验结果页面：

```
session_start();
$totalTime = time() - $_SESSION['startTime'];
echo $totalTime; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T19:25:31.827

好的，这是我的解决方案：

1-用户开始测验，你把时间放在 $_SESSION var

```
 $_SESSION['quiztime']=date("Y-m-d H:i:s"); 
```

2-用户完成测试并检查经过的时间（此示例以分钟为单位，如果需要秒，则不必将其除以 60）

```
 $to_time = strtotime(date("Y-m-d H:i:s"));
 $from_time = strtotime($_SESSION['quiztime']);
 echo round(abs($to_time - $from_time) / 60,2). " minutes"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-01T19:32:48.807

我的“防弹”解决方案是将开始时间存储在服务器上，（在会话中）与执行表单生成的唯一 ID 相关联并保存在隐藏字段中。

这样您就可以防止用户篡改它（他可能会更改唯一 ID，但在这种情况下表单将无效）并且您不依赖于启用 javascript 的客户端。

```
<?php
$form_uuid = uniqid();
$_SESSION['quiz_start_time'][$form_uuid] = time(); 
```

然后，在您的表格中，输入如下内容：

```
<input type="hidden" name="form_id" value="<?php print $form_uuid; ?>"> 
```

并在表单提交处理程序中：

```
<?php
$form_uuid = $_POST['form_id'];
if (!isset($_SESSION['quiz_start_time'][$form_uuid])) {
    // The user is trying to do something nasty (or the session just expired)
    // Return something like a 400 error
}
else {
    $start_time = $_SESSION['quiz_start_time'][$form_uuid];
    // Do other form processing here..
} 
```

# c++ - 使用 Dev C++ 执行 C++ 程序是否需要 iostream.h？

> ID：14113380
> 
> 赞同：1
> 
> 时间：2013-01-01T19:13:30.597
> 
> 标签：c++, compilation

我尝试使用`Dev c++`. 它给了我疯狂的错误，打开头文件，如`stddef.h`. 我之前在尝试包含时遇到了一个问题，`iostream.h`但在我将其更改为`iostream`.

```
#include<iostream> //header files
#include<conio.h>
#include<stdio.h>
#include<process.h>
struct flight //structures
{
    int flino;
    char source[20];
    char destination[20];
    float price;
};
void input(flight flight1[],int num) //inputing details
{
    for(int i=0;i<num;i++)
    {
        cout<<"Enter the flight number: ";
        cin>>flight1[i].flino;
        cout<<"Enter the source: ";
        cin >> flight1[i].source;
        cout<<"Enter the destination: ";
        cin >> flight1[i].destination;
        cout<<"Enter the price: ";
        cin>>flight1[i].price;
    } 
}

void deletion(flight flight1[],int num) //deletion
{
    int pos=0,search,flag=0;
    cout<<"Enter the element to be deleted: ";
    cin>>search;
    for(int i=0;i<num;i++)
    {
        if(search==flight1[i].flino)
        {
            flag =1;
            cout<<"Element found at "<<i+1;
            pos++;
            break;
        }
    } 
    if(flag==0)
    {
        cout<<"Element not found, no deletion!!  ";
        exit(0);
    }
    for(int i=pos;i<num;i++)
    {
        flight1[i-1]=flight1[i];
    }
    num=num-1;
}
void sort(flight flight1[],int num) //sorting
{
    flight min,temp;
    int pos=0;
    for(int i=0;i<=(num-1);i++)
    {
        min=flight1[i];
        pos=i;
        for(int j=(i+1);j<=num;j++)
        {
            if(flight1[j].flino<min.flino)
            {
                min=flight1[j];
                pos=j;
            }
        }
        temp=min;
        min=flight1[i];
        flight1[pos]=temp;
    }
}

void display(flight flight1[],int num) //displaying
{
    for(int i=0;i<num;i++)
    {
        cout<<"The flight number is: ";
        cout<<flight1[i].flino;
        cout<<"The source: ";
        puts(flight1[i].source);
        cout<<"The destination: ";
        puts(flight1[i].destination);
        cout<<"The price is: ";
        cout<<flight1[i].price;
    } 
} 
int main()
{
    flight f[30];
    int n;
    cout<<"Enter the no. of flights: ";
    cin>>n;
    input(f,n);
    deletion(f,n);
    sort(f,n);
    display(f,n);
    getch();
} 
```

每当我尝试编译此代码时，都会出现以下错误：

```
Compiler: TDM-GCC 4.6.1 64-bit
Executing  g++.exe...
g++.exe "C:\Users\admin\Desktop\new  2.cpp" -o "C:\Users\admin\Desktop\new  2.exe"  -ansi -ansi  -I"E:\Dev-Cpp\MinGW64\x86_64-w64-mingw32\include"  -L"E:\Dev-Cpp\MinGW64\x86_64-w64-mingw32\lib" -static-libgcc
In file included from e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/stddef.h:1:0,
                from e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../include/wchar.h:26,
                from e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/cwchar:46,
                from e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/bits/postypes.h:42,
                from e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/iosfwd:42,
                from e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/ios:39,
                from e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/ostream:40,
                from e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/iostream:40,
                from C:\Users\admin\Desktop\new  2.cpp:1:
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../x86_64-w64-mingw32/include/stddef.h:20:3: error: 'errno_t' does not name a type
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../x86_64-w64-mingw32/include/stddef.h:21:3: error: 'errno_t' does not name a type
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../x86_64-w64-mingw32/include/stddef.h:26:18: error: 'uintptr_t' does not name a type

e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../x86_64-w64-mingw32/include/stddef.h:218:1: error: '__MINGW_EXTENSION' does not name a type
In file included from e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/cwchar:46:0,
                from e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/bits/postypes.h:42,

                from e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/iosfwd:42,
                from e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/ios:39,
                from e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/ostream:40,
                from e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/iostream:40,
                from C:\Users\admin\Desktop\new  2.cpp:1:

e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../include/wchar.h:105:59: error: 'size_t' has not been declared
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../include/wchar.h:108:60: error: 'size_t' has not been declared
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../include/wchar.h:146:50: error: 'size_t' has not been declared
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../include/wchar.h:147:51: error: 'size_t' has not been declared
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../include/wchar.h:178:80: error: 'size_t' has not been declared
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../include/wchar.h:207:9: error: 'size_t' does not name a type
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../include/wchar.h:222:9: error: 'size_t' does not name a type
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../include/wchar.h:224:9: error: 'size_t' does not name a type
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../include/wchar.h:225:77: error: 'size_t' has not been declared

e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../include/wchar.h:226:77: error: 'size_t' has not been declared
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../include/wchar.h:227:76: error: 'size_t' has not been declared
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../include/wchar.h:230:9: error: 'size_t' does not name a type

e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../include/wchar.h:233:9: error: 'size_t' does not name a type
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../include/wchar.h:298:1: error: 'size_t' does not name a type
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../include/wchar.h:300:1: error: 'size_t' does not name a type
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../include/wchar.h:302:1: error: 'size_t' does not name a type

e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../include/wchar.h:304:1: error: 'size_t' does not name a type
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../include/wchar.h:306:1: error: 'size_t' does not name a type
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../include/wchar.h:320:62: error: 'size_t' has not been declared
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../include/wchar.h:321:67: error: 'size_t' has not been declared
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../include/wchar.h:322:46: error: 'size_t' has not been declared
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../include/wchar.h:325:5: error: 'size_t' has not been declared
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../include/wchar.h:326:73: error: 'size_t' has not been declared
In file included from e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/bits/postypes.h:42:0,
                from e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/iosfwd:42,
                from e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/ios:39,
                from e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/ostream:40,
                from e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/iostream:40,
                from C:\Users\admin\Desktop\new  2.cpp:1:
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/cwchar:151:11: error: '::mbrlen' has not been declared
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/cwchar:152:11: error: '::mbrtowc' has not been declared
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/cwchar:154:11: error: '::mbsrtowcs' has not been declared
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/cwchar:176:11: error: '::wcrtomb' has not been declared
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/cwchar:181:11: error: '::wcscspn' has not been declared
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/cwchar:182:11: error: '::wcsftime' has not been declared
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/cwchar:183:11: error: '::wcslen' has not been declared
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/cwchar:187:11: error: '::wcsrtombs' has not been declared
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/cwchar:188:11: error: '::wcsspn' has not been declared
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/cwchar:196:11: error: '::wcsxfrm' has not been declared
In file included from e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/ios:41:0,
                from e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/ostream:40,
                from e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/iostream:40,
                from C:\Users\admin\Desktop\new  2.cpp:1:
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/bits/char_traits.h: In static member function 'static std::size_t std::char_traits<wchar_t>::length(const char_type*)':
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/bits/char_traits.h:332:26: error: 'wcslen' was not declared in this scope

In file included from C:\Users\admin\Desktop\new  2.cpp:3:0:
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../include/stdio.h: At global scope:
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../include/stdio.h:191:65: error: 'size_t' has not been declared
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../include/stdio.h:207:54: error: 'size_t' has not been declared

e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../include/stdio.h:211:55: error: 'size_t' has not been declared
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../include/stdio.h:319:55: error: 'size_t' has not been declared
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../include/stdio.h:320:56: error: 'size_t' has not been declared
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../include/stdio.h:331:47: error: 'size_t' has not been declared
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../include/stdio.h:332:48: error: 'size_t' has not been declared
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../include/stdio.h:412:9: error: 'size_t' does not name a type
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../include/stdio.h:413:9: error: 'size_t' does not name a type
C:\Users\admin\Desktop\new  2.cpp: In function 'void input(flight*, int)':
C:\Users\admin\Desktop\new  2.cpp:16:3: error: 'cout' was not declared in this scope
C:\Users\admin\Desktop\new  2.cpp:16:3: note: suggested alternative:
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/iostream:62:18: note:   'std::cout'
C:\Users\admin\Desktop\new  2.cpp:17:3: error: 'cin' was not declared in this scope
C:\Users\admin\Desktop\new  2.cpp:17:3: note: suggested alternative:
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/iostream:61:18: note:   'std::cin'

C:\Users\admin\Desktop\new  2.cpp: In function 'void deletion(flight*, int)':
C:\Users\admin\Desktop\new  2.cpp:30:2: error: 'cout' was not declared in this scope
C:\Users\admin\Desktop\new  2.cpp:30:2: note: suggested alternative:
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/iostream:62:18: note:   'std::cout'
C:\Users\admin\Desktop\new  2.cpp:31:2: error: 'cin' was not declared in this scope
C:\Users\admin\Desktop\new  2.cpp:31:2: note: suggested alternative:
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/iostream:61:18: note:   'std::cin'
C:\Users\admin\Desktop\new  2.cpp:45:9: error: 'exit' was not declared in this scope
C:\Users\admin\Desktop\new  2.cpp: In function 'void display(flight*, int)':
C:\Users\admin\Desktop\new  2.cpp:79:3: error: 'cout' was not declared in this scope
C:\Users\admin\Desktop\new  2.cpp:79:3: note: suggested alternative:
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/iostream:62:18: note:   'std::cout'
C:\Users\admin\Desktop\new  2.cpp: In function 'int main()':
C:\Users\admin\Desktop\new  2.cpp:93:2: error: 'cout' was not declared in this scope
C:\Users\admin\Desktop\new  2.cpp:93:2: note: suggested alternative:
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/iostream:62:18: note:   'std::cout'
C:\Users\admin\Desktop\new  2.cpp:94:2: error: 'cin' was not declared in this scope
C:\Users\admin\Desktop\new  2.cpp:94:2: note: suggested alternative:
e:\dev-cpp\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.6.1/include/c++/iostream:61:18: note:   'std::cin'

Execution terminated 
```

有人可以帮助我并告诉我我能做些什么来解决这个问题吗？请尽可能尽快回复。

编辑：我解决了上述问题。它现在只给我一些警告：

```
Compiler: Default compiler
Building Makefile: "C:\Users\admin\Documents\Coding\Makefile.win"
Executing  make...
make.exe -f "C:\Users\admin\Documents\Coding\Makefile.win" all
g++.exe -c main.cpp -o main.o -I"E:/Dev-Cpp/lib/gcc/mingw32/3.4.2/include"  -I"E:/Dev-Cpp/include/c++/3.4.2/backward"  -I"E:/Dev-Cpp/include/c++/3.4.2/mingw32"  -I"E:/Dev-Cpp/include/c++/3.4.2"  -I"E:/Dev-Cpp/include"   

In file included from E:/Dev-Cpp/include/c++/3.4.2/backward/iostream.h:31,
                from main.cpp:1:
E:/Dev-Cpp/include/c++/3.4.2/backward/backward_warning.h:32:2: warning: #warning This file includes at least one deprecated or antiquated header. Please consider using one of the 32 headers found in section 17.4.1.2 of the C++ standard. Examples include substituting the <X> header for the <X.h> header for C++ includes, or <iostream> instead of the deprecated header <iostream.h>. To disable this warning use -Wno-deprecated.

g++.exe main.o  -o "Test.exe" -L"E:/Dev-Cpp/lib"  

Execution terminated
Compilation successful 
```

那不是关于我使用 iostream.h 而不是 iostream 的吗？

**更新：**我了解到这`using namespace std;`将解决与此相关的所有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T19:16:27.073

你读过错误吗？ `cout`并`cin`驻留在命名空间中，特别是命名空间`std`，所以......

```
cin >> whatever; // incorrect

std::cin >> whatever; // correct 
```

或者，您*可以*使用语句将整个`std`命名空间（或任何命名空间）带入全局命名空间。`using`但是，永远不要在标头中执行此操作，因为它会污染全局命名空间，并且出于同样的原因，请注意在实现文件中执行此操作。在这里使用您的最佳判断。

```
using namespace std;

// ...

cin >> whatever; // ok! 
```

* * *

顺便说一句，如果你正在使用一本告诉你写作的书`#include <iostream.h>`……把它扔掉，买一本新书。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T19:30:56.580

如果您使用 C++ 编程，请不要使用这些标头：

```
#include<conio.h>
#include<stdio.h>
#include<process.h> 
```

在标题之后，添加：`using namespace std;` 最后，而不是`getch();`使用：

```
system("pause");
return 0; 
```

它现在可以工作了:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T19:17:12.660

我已经编译了代码并看到了。它的工作完美。请立即编译并查看。

```
#include<iostream.h>
#include<stdio.h>

using namespace std;

struct flight //structures
{
    int flino;
    char source[20];
    char destination[20];
    float price;
};
void input(flight flight1[],int num) //inputing details
{
    for(int i=0;i<num;i++)
    {
        cout<<"Enter the flight number: ";
        cin>>flight1[i].flino;
        cout<<"Enter the source: ";
        cin >> flight1[i].source;
        cout<<"Enter the destination: ";
        cin >> flight1[i].destination;
        cout<<"Enter the price: ";
        cin>>flight1[i].price;
    } 
}

void deletion(flight flight1[],int num) //deletion
{
    int pos=0,search,flag=0;
    cout<<"Enter the element to be deleted: ";
    cin>>search;
    for(int i=0;i<num;i++)
    {
        if(search==flight1[i].flino)
        {
            flag =1;
            cout<<"Element found at "<<i+1;
            pos++;
            break;
        }
    } 
    if(flag==0)
    {
        cout<<"Element not found, no deletion!!  ";
        exit(0);
    }
    for(int i=pos;i<num;i++)
    {
        flight1[i-1]=flight1[i];
    }
    num=num-1;
}
void sort(flight flight1[],int num) //sorting
{
    flight min,temp;
    int pos=0;
    for(int i=0;i<=(num-1);i++)
    {
        min=flight1[i];
        pos=i;
        for(int j=(i+1);j<=num;j++)
        {
            if(flight1[j].flino<min.flino)
            {
                min=flight1[j];
                pos=j;
            }
        }
        temp=min;
        min=flight1[i];
        flight1[pos]=temp;
    }
}

void display(flight flight1[],int num) //displaying
{
    for(int i=0;i<num;i++)
    {
        cout<<"The flight number is: ";
        cout<<flight1[i].flino;
        cout<<"The source: ";
        puts(flight1[i].source);
        cout<<"The destination: ";
        puts(flight1[i].destination);
        cout<<"The price is: ";
        cout<<flight1[i].price;
    } 
} 
int main()
{
    flight f[30];
    int n;
    cout<<"Enter the no. of flights: ";
    cin>>n;
    input(f,n);
    deletion(f,n);
    sort(f,n);
    display(f,n);
    return 0;
} 
```

# c# - 在 c# 应用程序和 c++ exe 文件之间传递参数和返回

> ID：14113384
> 
> 赞同：4
> 
> 时间：2013-01-01T19:14:27.617
> 
> 标签：c#, c++

我想在我的 c# 应用程序中调用一个 c++ exe 文件，它接受一个命令行参数并返回结果，以便我可以在我的 c# 应用程序中使用它，但我不知道该怎么做。

这是我尝试过但失败的简单示例：c++ 代码：returner.exe

```
#include<iostream>
#include<cstdlib>
using namespace std;
int main(string argc , string argv)
{
    int b= atoi(argv.c_str());
    return b;
} 
```

c#代码：

```
 private void button1_Click(object sender, EventArgs e)
        {
            ProcessStartInfo stf = new ProcessStartInfo("returner.exe", "3");
            stf.RedirectStandardOutput = true;
            stf.UseShellExecute = false; 
            stf.CreateNoWindow = true;

            using (Process p = Process.Start(stf))
            {
                p.WaitForExit();
                int a = p.ExitCode;
                label1.Text = a.ToString();
            }
        } 
```

我希望在标签中看到 3。但它总是 0 。我该怎么办 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T19:41:47.833

你的签名`main`不正确，应该是：

```
int main(int argc, char *argv[])
{
    // you are better to verify that argc == 2, otherwise it's UB.
    int b= atoi(argv[1]);
    return b;
} 
```

# android - AVD（Android 虚拟设备）是否写入日志？如果是在哪里？

> ID：14113398
> 
> 赞同：10
> 
> 时间：2013-01-01T19:16:01.777
> 
> 标签：android, avd

大约 3 天前，在进行了一系列 AVD 更新、SDK 更新、Eclipse 更新、Windows 更新、年终备份之后……我使用 AVD 管理器创建的所有**新**AVD 在加载时似乎都崩溃了。Windows 会弹出一个带有以下消息的框。

*   Emulator-arm.exe 已停止工作
*   一个问题导致程序停止正常工作；
*   Windows 将关闭程序并通知您是否有可用的解决方案 [关闭程序]

一周前创建的 AVD 似乎仍然运行良好。给我可以检查的 AVD 写入日志以尝试找出发生了什么（我是一个好奇的人，喜欢弄清楚发生了什么，而不是只是卸载/重新安装 AVD 并希望最好。）？我的问题是：

1 - ADV 和/或 ADV 管理器在遇到问题时会写入日志吗？

2 - 我在哪里可以找到这些日志？/ 我应该如何阅读它们？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-01T19:25:20.797

您可以从终端内运行模拟器以获取所有输出（包括错误）。

运行“emulator.exe -help”以获取可能参数的完整列表。

# ruby-on-rails - 如果我想限制嵌套记录的数量，我该如何编码？

> ID：14113408
> 
> 赞同：0
> 
> 时间：2013-01-01T19:16:41.973
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有 2 个模型。

*   社区
*   社区话题

**社区**has_many **CommunityTopics**

但是，如果我想限制一个社区拥有的 CommunityTopics**的数量怎么办？**我想将其限制为最多 1000 条可以由一个社区拥有的记录。

如何在控制器的新操作中使用 Flash 错误消息对其进行编码？我应该在 models/community_topics.rb 中编码什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T19:23:01.083

您需要在`CommunityTopic`模型中添加验证，它可以命名为`check_limits`

```
def check_limits
  if self.community.communitytopics.count == 1000
    self.errors.add("can't create more topics for this community")
    false
  else
    true
  end
end 
```

我建议使用常量而不是只写 1000，以防您以后需要更改它。

# css - Why is the column width of tables in wordpress behaving this way?

> ID：14113414
> 
> 赞同：0
> 
> 时间：2013-01-01T19:17:19.523
> 
> 标签：css, wordpress

I'm creating a wordpress site, with which I don't have much experience. I'm using a plugin called wp-table-reloaded. I'd like to be able to edit the column width of the columns on this page: [http://zangkoor.netii.net/het-koor/het-bestuur-2/](http://zangkoor.netii.net/het-koor/het-bestuur-2/). I know that the cells have classes `.column-1`and so on, so I know I could edit the styles for these, but what I don't get, is why the first column is much wider than the second. I've been looking at the styles using the chrome inspector, but I can't find what's causing it. Also, I'm making the site for my dad, so if I could give him an easier way to edit column widths, without fiddling with css, that'd be awesome.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:55:07.137

该插件足够智能，并且已为渐进式增强而设计。如果您开始尽可能多地为第三列添加内容，您会看到前两列的大小缩小。您现在看到的歧义是因为您在第三列中有空单元格。一旦你开始在这些单元格中填充内容，一切都应该到位。也就是说，您可以通过给出 CSS 声明 display:none; 来完全隐藏第三列。对于第 3 列，如

```
.column-3{display:none;} 
```

# jquery - jQuery如何识别父类

> ID：14113418
> 
> 赞同：0
> 
> 时间：2013-01-01T19:17:53.517
> 
> 标签：jquery, class

我有一个 jQuery click 函数，它设置为在`<div>`使用类属性定义的 's 内工作。我需要根据父类来控制 click() 行为，如下所示：

示例 HTML

```
<div class="rightContentBlock test">
    <img src="../themes/simple/images/close.png" alt="close button" class="closeButton" />
    <h3>Column Header</h3>
    <p>Column Content A</p>
</div> <!-- end rightContentBlock1 -->

<div class="rightContentBlock">
    <h3>Column Header</h3>
    <p>Column Content B</p>
</div> <!-- end rightContentBlock2 -->

<div class="rightContentBlock">
    <h3>Column Header C</h3>
        <p>Column Content</p>
</div> <!-- end rightContentBlock3 --> 
```

jQuery 代码

```
// toggle hidden block in profileBlock on page header
$('img.closeButton').click(function(){
    $('div.test').hide();
});
// end toggle hidden block 
```

我可以通过对`test`课程进行硬编码来实现这一点。我想偶尔通过我的页面使用关闭按钮。有没有办法`<div class="rightContentBlock">`单独识别每个块的不硬编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:20:15.813

您正在寻找 jQuery 的[`closest()`](http://api.jquery.com/closest/)方法：

```
$('img.closeButton').click(function(){
    $(this).closest('.rightContentBlock').hide();
}); 
```

# php - Handling new lines in php

> ID：14113419
> 
> 赞同：3
> 
> 时间：2013-01-01T19:18:07.637
> 
> 标签：php, arrays, textarea, line-breaks, explode

I have form in html where user can put the text in text area.
I save the content of text area into MySQL database (in field of type TEXT).
Then I somewhere in my aplication I need load that text and put it into array where in each index will be one line of the text.

```
<textarea rows="10" cols="80">
Row one
Row two
Row tree
</textarea>

array (output in "php pseudocode"):
$array = array();
$array[0] = Row one;
$array[1] = Row two;
$array[2] = Row tree; 
```

How I do it: I save it to db then I load it and use:

```
$br = nl2br($string,true);
$array = explode("<br />", $br); 
```

The reason why I use **nl2br** is I want to avoid problems with end of lines of the text from different platforms. I mean /n or /r/n.
But in my solution must be an error somewhere cause it doesn't work (an array $array is empty).

Better solution would be probably somehow split it into array using explode or something like that with pattern for line breaks but here is again the problem from beginning with line breaks which I don't know how to solve (**problems with \n or \r\n**).

Can anybody give me an advice? Thanks.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T19:25:49.827

我建议您跳过，`nl2br`直到您准备好将数据实际发送给客户端。要解决您的问题：

```
// $string = $get->data->somehow();
$array = preg_split('/\n|\r\n/', $string); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-01T19:21:30.333

当您在脚本中收到输入时，在将数据存储到数据库之前将*行尾字符规范化为 PHP_EOL。*这对我来说是正确的。这只是“过滤输入”过程中的又一步。您可能会发现其他 EOL 字符串，但这些是最常见的。

```
<?php // RAY_temp_user109.php
error_reporting(E_ALL);

if (!empty($_POST['t']))
{
    // NORMALIZE THE END-OF-LINE CHARACTERS
    $t = str_replace("\r\n", PHP_EOL, $_POST['t']);
    $t = str_replace("\r",   PHP_EOL, $t);
    $t = str_replace("\n",   PHP_EOL, $t);
    $a = explode(PHP_EOL, $t);
    print_r($a);
}

$form = <<<FORM
<form method="post">
<textarea name="t"></textarea>
<input type="submit" />
</form>
FORM;

echo $form; 
```

在 PHP_EOL 上展开并跳过 nol2br() 部分。您可以使用 var_dump() 查看生成的数组。

# php - What is cookie with key "ebNewBandWidth"? Where is it set?

> ID：14113422
> 
> 赞同：2
> 
> 时间：2013-01-01T19:18:29.383
> 
> 标签：php, codeigniter, cookies, session-cookies

Over the past 3 days I've been getting the "Disallowed Key Characters" error from CodeIgniter's Input class. I've found that this is resulting from CI checking for valid global cookie keys in the $_COOKIE array. The particular keys tripping the alert are below (where asianfanfics.com is the site I'm working on):

ebNewBandWidth__www_asianfanfics_com=277%3A1357053922099;expires=Wed,_01_Jan_2014_15:25:24_GMT;_path=/;_domain=_www_asianfanfics_com

ebPanelFrequency__www_asianfanfics_com=\"\";expires=Tue,_01_Jan_2013_15:43:39_GMT;_path=/;_domain=_www_asianfanfics_com

So if `$_COOKIE[$key] = $value`, `$key` is not passing CI's check and `$value` is always empty. When inspecting that cookie on Chrome's cookie inspector, I see that it is set for the www subdomain and under expires, instead of a date, it says "session".

The only other question on SO relating to this is due to someone using the jQuery Tabs plugin which I'm not using.

**Does anyone know what could be setting this cookie?**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:22:30.457

通过 cookie 的名称（以*`ebNewBandWidth`* 和开头*`ebPanelFrequency`*），您可能想询问 LinkedIn 他们的服务器是否已将一些代码注入到您的服务器提供的客户端资源中，或者以其他方式连接到创建这些 cookie 的网站或域名：

> LinkedIn Corporation
> Attn: Privacy Policy Issues
> 2029 Stierlin Court
> Mountain View,CA 94043
> USA
> 
> [http://www.linkedin.com/static?key=privacy_policy](http://www.linkedin.com/static?key=privacy_policy)

可能是因为通常每个人都可以将所有被浏览器接受为有效 cookie 名称的东西设置为使用此类 cookie 请求标头进行请求。

*该cookie中的会话*意味着，当浏览器关闭时它将过期。

其余的看起来 Codeigniter 出于某种原因正在删除该 cookie。可能只是一个预防措施。

任何 HTTP 客户端都可以向您的服务器发送任何类型的 cookie 请求标头，因此您无能为力。

cookie 始终由用户代理设置，至少是请求中导致错误的 cookie（进入 的内容`$_COOKIE`）。

仅凭 cookie 的名称不能说最初是哪个进程设置了这个特定的 cookie。任何进程都可以创建任何类型的 cookie 标头，并且 cookie 似乎至少有效到足以让浏览器将其与请求一起发送。

可能 Codeigniter 需要在这里进行一些修复或设置，以便您可以使用这些键，例如，您可能想要禁用它（在您的情况下没用？）检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T16:35:44.777

我相信 MediaMind 以前的 EyeBlaster（因此 eb 前缀为 cookie）是这些 cookie 的背后。他们的服务被横幅广告服务广泛使用，因此您的网站使用的服务很可能间接涉及他们。上面提到的 infiniti cookie 页面将它们链接到 ebNewBandWidth。

# homebrew - Brew update failed: untracked working tree files would be overwritten by merge

> ID：14113427
> 
> 赞同：208
> 
> 时间：2013-01-01T19:19:03.380
> 
> 标签：homebrew

Trying to update Homebrew with `brew update` I got the following error

```
error: The following untracked working tree files would be overwrittenby merge:     
 Library/Formula/argp-standalone.rb
 Library/Formula/cocot.rb 
Please move or remove them before you can merge. 
Aborting 
Updating e088818..5909e2c 
Error: Failed while executing git pull  origin refs/heads/master:refs/remotes/origin/master 
```

I found a blog post by someone who experienced a similar problem after having installed Mountain Lion (which I did this week too). He explains how he removed the files referred to in the error message

```
I removed these files:
$ cd $(brew --prefix)
$ rm cocot.rb
However, removing these files didn't help with the brew update. Instead I had to manually update brew through git:
$ cd $(brew --prefix)
$ git fetch origin
$ git reset --hard origin/master
$ brew update
Already up-to-date. 
```

Assuming those instructions are correct (which I maybe shouldn't assume), I tried to follow these instructions and do

```
 $ cd $(brew --prefix)
    $ rm cocot.rb 
```

However, it said 'file doesn't exist' when I tried to rm cocot.rb

One thing I'm not sure about is the `cd $(brew --prefix)` Are those the exact words I type or do I have to replace prefix with something? the cd was successful, so I'm assuming it was correct -- it moved me into /usr/local, but there was no file to remove. Contents of /usr/local are

```
Cellar              clamXav             git             mysql               var Library             doc             heroku              mysql-5.5.15-osx10.6-x86_64 README.md           etc             include             rvm bin             foreman             lib             share 
```

At any rate, do you know how I can fix the 'brew update'

Update: After removing the files according to favoretti's instructions and trying `chown -R <your_username> $(brew --prefix)/.git`, I got the following error running `brew update`

```
error: The following untracked working tree files would be overwritten by merge:
    Library/Aliases/gperftools
    Library/Aliases/hashdeep
    Library/Aliases/htop
    Library/Aliases/nodejs
    Library/Aliases/ocio
    Library/Aliases/oiio
    Library/Aliases/pgrep
    Library/Aliases/pkill
    Library/Aliases/qt4
    Library/Aliases/twolame
    Library/Aliases/wxwidgets
    Library/Contributions/cmds/brew-aspell-dictionaries
    Library/Contributions/cmds/brew-beer.rb
    Library/Contributions/cmds/brew-dirty.rb
    Library/Contributions/cmds/brew-graph
    Library/Contributions/cmds/brew-grep
    Library/Contributions/cmds/brew-leaves.rb
    Library/Contributions/cmds/brew-linkapps.rb
    Library/Contributions/cmds/brew-ls-taps.rb
    Library/Contributions/cmds/brew-man
    Library/Contributions/cmds/brew-md5-to-sha1
    Library/Contributions/cmds/brew-mirror-check.rb
    Library/Contributions/cmds/brew-pull.rb
    Library/Contributions/cmds/brew-readall.rb
    Library/Contributions/cmds/brew-server
    Library/Contributions/cmds/brew-services.rb
    Library/Contributions/cmds/brew-switch.rb
    Library/Contributions/cmds/brew-test-bot.rb
    Library/Contributions/cmds/brew-tests.rb
    Library/Contributions/cmds/brew-unpack.rb
    Library/Contributions/cmds/brew-which.rb
    Library/Contributions/cmds/git
    Library/Contributions/cmds/svn
    Library/ENV/4.3/apr-1-config
    Library/ENV/4.3/bsdmake
    Library/ENV/4.3/c++
    Library/ENV/4.3/c89
    Library/ENV/4.3/c99
    Library/ENV/4.3/cc
    Library/ENV/4.3/clang
    Library/ENV/4.3/clang++
    Library/ENV/4.3/cpp
    Library/ENV/4.3/g++
    Library/ENV/4.3/gcc
    Library/ENV/4.3/git
    Library/ENV/4.3/i686-apple-darwin11-llvm-g++-4.2
    Library/ENV/4.3/i686-apple-darwin11-llvm-gcc-4.2
    Library/ENV/4.3/ld
    Library/ENV/4.3/llvm-g++
    Library/ENV/4.3/llvm-g++-4.2
    Library/ENV/4.3/llvm-gcc
    Library/ENV/4.3/llvm-gcc-4.2
    Library/ENV/4.3/make
    Library/ENV/4.3/mig
    Library/ENV/4.3/sed
    Library/ENV/4.3/svn
    Library/ENV/4.3/xcrun
    Library/ENV/libsuperenv.rb
    Library/ENV/pkgconfig/leopard/libcrypto.pc
    Library/ENV/pkgconfig/leopard/libcurl.pc
    Library/ENV/pkgconfig/mountain_lion/libcurl.pc
    Library/ENV/pkgconfig/mountain_lion/libexslt.pc
    Library/ENV/pkgconfig/mountain_lion/libxml-2.0.pc
    Library/ENV/pkgconfig/mountain_lion/libxslt.pc
    Library/Formula/abcl.rb
    Library/Formula/abcmidi.rb
    Library/Formula/aiccu.rb
    Library/Formula/akka.rb
    Library/Formula/alac.rb
    Library/Formula/alure.rb
    Library/Formula/appledoc.rb
    Library/Formula/arangodb.rb
    Library/Formula/argp-standalone.rb
    Library/Formula/argtable.rb
    Library/Formula/autopano-sift-c.rb
    Library/Formula/avian.rb
    Library/Formula/avidemux.rb
    Library/Formula/avro-cpp.rb
    Library/Formula/aws-cloudsearch.rb
    Library/Formula/aws-sns-cli.rb
    Library/Formula/backupninja.rb
    Library/Formula/bact.rb
    Library/Formula/bam.rb
    Library/Formula/basex.rb
    Library/Formula/berkeley-db4.rb
    Library/Formula/bind.rb
    Library/Formula/blazeblogger.rb
    Library/Formula/bochs.rb
    Library/Formula/boost149.rb
    Library/Formula/bsdconv.rb
    Library/Formula/bsdmake.rb
    Library/Formula/buildapp.rb
    Library/Formula/bup.rb
    Library/Formula/byacc.rb
    Library/Formula/cadubi.rb
    Library/Formula/camellia.rb
    Library/Formula/casperjs.rb
    Library/Formula/ccextractor.rb
    Library/Formula/cconv.rb
    Library/Formula/cdo.rb
    Library/Formula/cdpr.rb
    Library/Formula/cgvg.rb
    Library/Formula/checkstyle.rb
    Library/Formula/chordii.rb
    Library/Formula/chruby.rb
    Library/Formula/cifer.rb
    Library/Formula/clhep.rb
    Library/Formula/cntlm.rb
    Library/Formula/cocot.rb
    Library/Formula/cogl.rb
    Library/Formula/collada-dom.rb
    Library/Formula/crash.rb
    Library/Formula/crossroads.rb
    Library/Formula/crosstool-ng.rb
    Library/Formula/css-crush.rb
    Library/Formula/csync.rb
    Library/Formula/ctemplate.rb
    Library/Formula/curlftpfs.rb
    Library/Formula/cutter.rb
    Library/Formula/cvsutils.rb
    Library/Formula/darkstat.rb
    Library/Formula/darner.rb
    Library/Formula/dart.rb
    Library/Formula/dasm.rb
    Library/Formula/debianutils.rb
    Library/Formula/dfc.rb
    Library/Formula/dgtal.rb
    Library/Formula/dhcping.rb
    Library/Formula/di.rb
    Library/Formula/dmtx-utils.rb
    Library/Formula/drip.rb
    Library/Formula/dsniff.rb
    Library/Fo
Aborting
Updating e088818..c1fbc29
Error: Failed while executing git pull  origin refs/heads/master:refs/remotes/origin/master 
```

* * *

## 回答 #1

> 赞同：360
> 
> 时间：2013-01-01T19:23:17.753

您需要执行以下操作：

```
cd $(brew --prefix)
rm Library/Formula/argp-standalone.rb
rm Library/Formula/cocot.rb 
```

然后做

```
git fetch origin
git reset --hard origin/master
brew update 
```

基本上，解释一下：

```
cd $(brew --prefix) 
```

告诉`cd`将目录更改为`brew --prefix`将输出的任何内容。如果您尝试执行`brew --prefix`命令，您应该会看到以下内容：

```
brew --prefix
/usr/local 
```

因此，在这种情况下，该命令相当于`cd /usr/local`. 较新`brew`的版本在其安装前缀和 下具有公式`Library/Formula/`，因此您需要在其中查找那些过时/更改的文件。

请注意，如果您出于特定原因（例如固定版本）自己更改了这些公式，则此操作会将它们恢复为默认值，并且可能会产生不良影响。

@TedPennings 在评论中指出这对他有用，但他的顺序是：

1.  chown 一切`my_username:admin`，即，`sudo chown -R ted:admin $(brew --prefix)`
2.  运行上面的两个 git 命令，`git fetch origin`然后`git reset --hard origin/master`

* * *

## 回答 #2

> 赞同：280
> 
> 时间：2013-03-13T20:08:40.970

```
cd $(brew --prefix)
git reset --hard HEAD
brew update 
```

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2014-01-14T03:55:43.937

这是由`update`很久以前修复的代码中的旧错误引起的。但是，该错误的性质要求您执行以下操作：

```
cd $(brew --repository)
git reset --hard FETCH_HEAD 
```

如果`brew doctor`仍然抱怨未提交的修改，请运行以下命令：

```
cd $(brew --repository)    
git clean -fd 
```

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2014-05-17T17:01:28.417

```
$ cd $(brew --prefix)
$ git clean -fd
$ git reset --hard
$ sudo chown -R `whoami` `brew --prefix`
$ brew update 
```

注意：第 2 步和第 3 步对我有用，因为我在收到错误之前在第 4 步之前执行了第 5 步。更改文件夹所有者之前的*brew 更新导致了整个问题。*

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-05-24T02:42:52.287

我有一个类似的问题，我的 brew 包库以 root 用户身份下载，然后我无法运行 brew update 因为 git 会抱怨无法合并文件。

解决方案是： -

```
sudo chown -R <user> /usr/local/Library 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-12-22T02:28:43.080

如果您不介意放弃对您可能已应用的公式的潜在修改，则重置 brew 存储库应该是最有效的方法：

```
$ cd `brew --prefix`
$ git fetch origin
$ git reset --hard origin/master
$ brew cleanup --force
$ brew update 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-12-20T18:33:49.197

通过在这些路径中添加管理员组写入（和 setgid 位）权限，我能够在我的机器上解决此问题：

```
sudo chmod -R g+ws /usr/local /Library/Caches/Homebrew 
```

s 在执行时设置组 ID，以便下次不同的管理员用户更新或升级 Homebrew 时不会丢失写权限。

这个答案有些不完整，因为当我尝试这样做`brew cleanup --force`时，Homebrew 尝试删除 /usr/local/Cellar/ 中的内容时会出现权限问题。（不幸的是，我目前无法进一步调查。）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-02-24T01:51:27.257

另一种选择是只使用`git stash`.

brew update 命令执行 a `git pull`，所以如果有任何更改的文件（甚至是文件属性，当我递归更改目录中的权限时发生在我身上）你必须以某种方式解决冲突。使用`git stash`是一种方式；它需要任何更改并将它们放在一边，以便您有效地恢复到上次更新的 repo 版本。Homebrew 的“位置”是默认的`/usr/local`，它作为 git 存储库安装。你可以`.git`自己找一个文件夹看看。我正在编写一个自制卸载脚本，很快就会在我的 GitHub 个人资料上发布更多信息。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-11-10T08:23:28.460

```
sudo chown -R USER /usr/local/bin 
```

注意 - 供用户使用命令，即您的用户名

```
sudo brew doctor 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-11-15T00:00:14.993

这种方法可能比某些方法更简单。它涉及：

*   修复 git 问题，以便您可以再次将更改的管理委派给它。
*   无需手动移动文件或目录。
*   无需手动调整文件或目录权限。

步骤（为需要解释的人提供注释）：

```
cd $(brew --repository)                              // see Note 1 below
git remote add brew https://github.com/Homebrew/brew // see Note 2 below
git pull brew master                                 // promising fast-forward report!
brew update                                          // see Note 3 below 
```

概述：
据我所知，这个问题的实际原因是 repo url 发生了变化。现在`brew`和过去`brew.git`。（完整的最新网址：[https](https://github.com/Homebrew/brew) ://github.com/Homebrew/brew ）

注意 1：第一个命令将您从文件结构中的任何位置带到正确的目录。对我来说，目录结构与上面显示的其他人（Mac OS 10.11.16）不同，但是使用此命令，这些差异应该无关紧要。

注意 2：第二个命令将正确的远程 url 添加到新别名；我这样做是为了以防这种方法没有完成我想要的并且我再次需要以前的地址。由于新的遥控器工作正常，我会邀请其他人评论简单地更改以来源为别名的 url。我很乐意更新答案以反映对您有用的方法。

注意 3：这第四条命令完全符合预期的结果：它报告了大量更新，包括“==> Migrated HOMEBREW_REPOSITORY to /usr/local/Homebrew!”的特别好的报告。（强调他们的）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-10-31T20:08:35.533

[这篇文章](http://digitizor.com/2015/10/01/fix-homebrew-permissions-osx-el-capitan/)在更新到 El Capitan 后帮助了我。在我的情况下，`chown`没有工作（“zsh：找不到命令：chown”），所以第 1 步是将这一行添加到我的 .zshrc 中：

`export PATH="$PATH:/usr/sbin"`

我已经尝试了上面几个更受欢迎的答案，所以我很确定`git status`当我粘贴博客文章中的关键命令时，这些答案已经很清楚了：

`sudo chown $(whoami):admin /usr/local && sudo chown -R $(whoami):admin /usr/local`

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-10-31T06:54:09.580

这应该有效。

```
1\. cd `brew --prefix`
2\. git fetch origin
3\. git reset --hard origin/master
4\. sudo brew update 
```

# html - 调整两个跨度元素之间的高度

> ID：14113429
> 
> 赞同：1
> 
> 时间：2013-01-01T19:19:09.880
> 
> 标签：html, css, stylesheet

我正在尝试调整 div 内两个 span 元素之间的垂直空间。我正在努力实现我从中获得的一半`<br/>`。

`line-height`,`vertical-align`或`margin-top`. 没有一个对我有用。这是[jsfiddle](http://jsfiddle.net/himanshuy/xnYPH/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T19:22:08.547

`<span>`元素是内联的。您不能将`<p`> 等块级元素放在内联元素中。

使用`<div>`s 而不是`<span>`s 你的 CSS 就可以正常工作：

```
<div class="signupEmailBox">
    <div class="tag"><p>test data goes here</p></div>
    <div class="smallTextEmail">
                    <p>blah blah blah</p>
                    <p>some text goes here...</p>
                    <p>here some more text data</p>
                    <p>some more text</p>
    </div>
</div>
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T19:26:02.157

有一个名为[display](http://www.w3schools.com/cssref/pr_class_display.asp)的属性会影响边距的应用。此属性的值默认`inline`为 span 元素。因此没有应用保证金。

要么使用具有另一个默认值的元素，例如 div 框，要么更改 span 元素的 display 属性的值。我建议使用`inline-block`，因为这保留了 span 元素的文本流功能。

```
span
{
    display:inline-block;
} 
```

# valgrind - valgrind 无法在 OS X 10.8 上运行

> ID：14113430
> 
> 赞同：7
> 
> 时间：2013-01-01T19:19:16.080
> 
> 标签：valgrind, osx-mountain-lion

每次我尝试`valgrind`在我的 OS X 10.8 笔记本上运行时，我都会得到：

```
bad executable (no stack)
valgrind: ./a.out: cannot execute binary file 
```

问题是什么？我怎样才能解决这个问题？在 Linux 上一切正常，所以并​​不是我在以某种方式滥用`valgrind`. 我正在使用的确切行是`valgrind --tool=memcheck --leak-check=full ./a.out`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T19:33:01.403

我遇到了同样的错误，但我刚刚将 valgrind 升级到`3.8.1`（`brew upgrade valgrind`为我使用 HomeBrew），并且它可以工作，尽管运行 Valgrind 会打印以下警告：

```
WARNING: Support on MacOS 10.8 is experimental and mostly broken.
WARNING: Expect incorrect results, assertions and crashes.
WARNING: In particular, Memcheck on 32-bit programs will fail to
WARNING: detect any errors associated with heap-allocated data. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T11:00:31.180

我在使用 valgrind 和 macports 时遇到了这个问题。事实证明我需要安装

```
sudo port install valgrind +universal 
```

我试图 valgrind 一个 32 位可执行文件，我相信没有 +universal，32 位支持不会被编译。

# c# - 使用 BackgroundWorker 打开不同的线程

> ID：14113434
> 
> 赞同：-1
> 
> 时间：2013-01-01T19:19:53.413
> 
> 标签：c#, winforms

我构建了一个应用程序，如何获取 Pcap 文件（wireshark 文件）并播放数据包，播放操作是使用 exe 文件获取文件路径和接口 int。

```
private void btnStart_Click(object sender, EventArgs e)
{
    shouldContinue = true;
    btnStart.Enabled = false;
    btnStop.Enabled = true;
    groupBoxAdapter.Enabled = false;
    groupBoxRootDirectory.Enabled = false;
    string filePath = string.Empty;

    ThreadPool.QueueUserWorkItem(delegate
    {
        for (int i = 0; i < lvFiles.Items.Count && shouldContinue; i++)
        {
            this.Invoke((MethodInvoker)delegate { filePath = lvFiles.Items[i].Tag.ToString(); });
            pcapFile = new PcapFile();
            pcapFile.sendQueue(filePath, adapter);
        }

        this.Invoke((MethodInvoker)delegate
        {
            btnStart.Enabled = true;
            btnStop.Enabled = false;
            groupBoxAdapter.Enabled = true;
            groupBoxRootDirectory.Enabled = true;
        });
    });
} 
```

发送队列代码：

```
public void sendQueue(string filePath, int deviceNumber)
        {
            ProcessStartInfo processStartInfo = new ProcessStartInfo(@"D:\Downloads\SendQueue\sendQueue.exe");
            processStartInfo.Arguments = string.Format("{0} {2}{1}{2}", (deviceNumber).ToString(), filePath, "\"");
            processStartInfo.WindowStyle = ProcessWindowStyle.Hidden;
            processStartInfo.RedirectStandardOutput = true;
            processStartInfo.RedirectStandardError = true;
            processStartInfo.CreateNoWindow = true;
            processStartInfo.UseShellExecute = false;
            processStartInfo.ErrorDialog = false;

            using (Process process = Process.Start(processStartInfo))
            {
                process.WaitForExit();
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:30:36.140

看起来你不需要后台工作人员。

```
 List<string> tags = new List<string>();
     foreach (object item in lvFiles.Items)
     {
        tags.Add(item.tag.ToString());
     }

     ThreadPool.QueueUserWorkItem(delegate
     {
       for (int i = 0; i < tags.Count && shouldContinue; i++)
       {
           sendQueue(tags[i], adapter);
       }

        //...
     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T19:31:00.550

您的 UI 线程很可能被阻塞，因为 pcapFile.sendQueue 是同步的。这意味着即使您的异步循环将播放文件排入队列，UI 线程 99.99% 的时间都在忙于播放文件的内容。这可能是也可能不是，因为您还没有发布 PcapFile 的源代码。

让你的 UI 响应的任务有点复杂，你需要重组 PcapFile 以一次加载一个帧（音频？视频？），让 UI 线程在其余时间运行，甚至完全在背景。

表单设计还应该依赖来自 PcapFile 的事件，而不是尝试在 BackgroundWorker 中运行它

# objective-c - Objective C 对象到方法

> ID：14113439
> 
> 赞同：1
> 
> 时间：2013-01-01T19:20:29.217
> 
> 标签：objective-c, object, methods

2013 年快乐。

我对 2 个矩形的交集方法有点问题，但我遇到了一个问题，即它不允许我在这个主题上前进。

我正在使用 4 个对象、2 个点和 2 个矩形。Point1 是 rectangle1 的原点，point2 是 rectangle2 的原点。

然后我调用 rectangle1 的 intersect 方法并发送 rectangle2 对象以查看是否有交集。

这里的问题是，在方法内部，两个矩形的原点最终是相同的坐标，因此，如果我没有不同的原点，我将无法获得好的信息。

这是我的 .h 文件：

```
@interface XYPoint : NSObject

@property int x,y;

-(void) setX:(int)xVal andY: (int) yVal;

@end

@interface Rectangle: graphicObject

@property float width, height;

- (void) setWidth:(float)w andHeight: (float) h;
- (void) setOrigin: (XYPoint *) pt;
- (bool) containsPoint: (XYPoint *) aPoint;
- (void) intersect: (Rectangle *) rect;

@end 
```

这是我的 .m 文件：

```
@implementation XYPoint

@synthesize x,y;

-(void) setX:(int)xVal andY:(int)yVal;
{
    x = xVal;
    y = yVal;
}

@end

@implementation Rectangle

@synthesize width, height;

XYPoint *origin;

- (void) setWidth:(float) w andHeight: (float) h;
{
    width = w;
    height = h;
}
- (float) area
{
    return width * height;
}
- (float) perimeter
{
    return (2*width) + (2*height);
}
-(void) setOrigin: (XYPoint *) pt
{
    if (! origin)
    {
        origin = [[XYPoint alloc]init];
    }
    origin.x = pt.x;
    origin.y = pt.y;
}

- (XYPoint *) origin

{
    return origin;
}

-(void) intersect: (Rectangle *) rect // 
{
    int pointCount;
    pointCount = 0;

    /*  R1o           R2o                   R1F             R2F */
    /* origin.x       rect.origin.x      origin.x+w       rect.origin.x+w */

    if (    (origin.x <= rect.origin.x) && (rect.origin.x <= (origin.x + width) )  )
        pointCount = pointCount +1;
    NSLog(@"width = %g height = %g origin  = (%d,%d)", width, height, origin.x, origin.y);

    NSLog(@"rect.width = %g rect.height = %g rect.origin  (%d,%d)", rect.width, rect.height, rect.origin.x, rect.origin.y);

    if (    (rect.origin.x <= ( origin.x + width ) ) && (origin.x + width <= rect.origin.x + rect.width)       )
        pointCount = pointCount + 1;

    if (    (origin.y <= rect.origin.y) && (rect.origin.y <= (origin.y + height) ) )
        pointCount = pointCount + 1;

    if (    (rect.origin.y <= (origin.y + height) && ( origin.y + height <= rect.origin.y + rect.height)) )
        pointCount = pointCount +1;

    if (pointCount == 4)
        NSLog (@"the rectangles intersect!");
    else
        NSLog (@"The rectangles don't intersect.");
}

@end 
```

这是我的主文件：

```
int main(int argc, const char * argv[])
{

    @autoreleasepool {

        Rectangle * myRectangle1 = [[Rectangle alloc] init];

        XYPoint * myPoint1 = [[XYPoint alloc]init];
        [myPoint1 setX: 0 andY: 0];
        [myRectangle1 setWidth: 3 andHeight: 3];
        [myRectangle1 setOrigin : myPoint1];

        Rectangle * myRectangle2 = [[Rectangle alloc] init];
        XYPoint * myPoint2 = [[XYPoint alloc]init];
        [myPoint2 setX: 2 andY: 2];
        [myRectangle2 setWidth: 4 andHeight: 4];
        [myRectangle2 setOrigin : myPoint2];

        [myRectangle1 intersect: myRectangle2];

    }
    return 0;
} 
```

我上次运行它时，我得到了这个：

宽度 = 3 高度 = 3 原点 = (2,2)

rect.width = 4 rect.height = 4 rect.origin (2,2)

矩形相交！

看？两个矩形具有相同的原点，即使它们的设置不同。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T19:28:30.790

您`origin`在矩形类 .m 文件中声明为文件级全局变量，这意味着每个 Rectangle 实例将使用相同的变量实例用于 .m 文件`origin`。您需要在 .h 文件内的接口中将其声明为成员变量。

更新了来自@Chuck 的更正。（谢谢）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T19:52:15.633

您目前拥有：

```
@implementation Rectangle

@synthesize width, height;

XYPoint *origin; 
```

这声明`origin`为*全局*变量而不是*实例*变量；因此，不是每个矩形都有一个变量，而是所有矩形共享一个变量。将这些行更改为：

```
@implementation Rectangle
{
   XYPoint *origin;
}

@synthesize width, height; 
```

这使得`origin`一个实例变量。

*[注意：较旧的编译器要求您`@interface`在`@implementation`. 从设计的角度来看，这要好得多。]*

# sql - Django 确定“最受欢迎”

> ID：14113447
> 
> 赞同：0
> 
> 时间：2013-01-01T19:21:36.450
> 
> 标签：sql, django, django-models, django-queryset

鉴于我的应用程序模型的这种稍微简化的表示，我的问题是*如何在全球范围内找到最流行的`MyModel`*？即，那些`MyModel`s 是 s 最喜欢`MyUser`的。

我遇到过关于如何找到最喜欢的*标签*的类似博客文章，但我认为这些文章不适用于这种特殊情况。

```
class MyUser(models.Model):
  favorite_models = models.ManyToManyField(MyModel)
  ...

class MyModel(models.Model):
  name = models.CharField(...)
  ... 
```

这可以在单个查询中完成吗？还是我需要遍历每个`MyUser`并`MyModel`确定最受欢迎的？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:48:48.920

我懒得从头开始创建一个 django 项目，但是这个应该可以完成这项工作：

```
from django.db.models import Count
MyModel.objects.annotate(Count('myuser')) 
```

（或这个）

```
MyModel.objects.annotate(Count('myuser_set')) 
```

如果没有，试试这个：

```
class MyUser(models.Model):
    favorite_models = models.ManyToManyField(MyModel, related_name='myuser') 
```

进而

```
MyModel.objects.annotate(Count('myuser_set')) 
```

（让我知道它是否有效，无论如何，此页面应包含您需要执行的操作：[https](https://docs.djangoproject.com/en/dev/topics/db/aggregation/) ://docs.djangoproject.com/en/dev/topics/db/aggregation/ ）

# python - 使用 AxisGrid 绘图时更改 MinorLocator

> ID：14113448
> 
> 赞同：0
> 
> 时间：2013-01-01T19:21:47.987
> 
> 标签：python, graph, matplotlib

我正在使用文档中的这个函数来用 matplotlib 制作一个漂亮的图。

```
def demo_grid_with_single_cbar(fig):
    """
    A grid of 2x2 images with a single colorbar
    """
    grid = AxesGrid(fig, 132, # similar to subplot(132)
                    nrows_ncols = (2, 2),
                    axes_pad = 0.0,
                    share_all=True,
                    label_mode = "L",
                    cbar_location = "top",
                    cbar_mode="single",
                    )

    Z, extent = get_demo_image()
    for i in range(4):
        im = grid[i].imshow(Z, extent=extent, interpolation="nearest")
    #plt.colorbar(im, cax = grid.cbar_axes[0])
    grid.cbar_axes[0].colorbar(im)

    for cax in grid.cbar_axes:
        cax.toggle_label(False)

    # This affects all axes as share_all = True.
    grid.axes_llc.set_xticks([-2, 0, 2])
    grid.axes_llc.set_yticks([-2, 0, 2]) 
```

我想更改次要定位器。但我真的不知道在哪里更改代码。如果它只有一个图形，我会操纵轴对象。但是有了 AxesGrid，我迷路了。

```
majorLocator   = MultipleLocator(50)
majorFormatter = FormatStrFormatter('%d')
minorLocator   = MultipleLocator(10)
ax.yaxis.set_major_locator(majorLocator)
ax.yaxis.set_major_formatter(majorFormatter)
ax.yaxis.set_minor_locator(minorLocator) 
```

问题解决后编辑。结果应该如下图所示，注意小勾号！

结果应如下图所示
![1](../Images/19df24266e639895e3d7364284238aa1.png)

也许其他人可以附加它。我不能，因为我的声誉信用还不够。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T20:49:07.423

[注意主页](http://matplotlib.org/mpl_toolkits/axes_grid/index.html)上的警告。如果您有足够新的版本，`matplotlib`则可以使用。

```
from mpl_toolkits.axes_grid1 import ImageGrid

def get_demo_image():
    import numpy as np
    from matplotlib.cbook import get_sample_data
    f = get_sample_data("axes_grid/bivariate_normal.npy", asfileobj=False)
    z = np.load(f)
    # z is a numpy array of 15x15
    return z, (-3,4,-4,3)

def demo_grid_with_single_cbar(fig):
    """
    A grid of 2x2 images with a single colorbar
    """
    grid = ImageGrid(fig, 132, # similar to subplot(132)
                    nrows_ncols = (2, 2),
                    axes_pad = 0.0,
                    share_all=True,
                    label_mode = "L",
                    cbar_location = "top",
                    cbar_mode="single",
                    )

    Z, extent = get_demo_image()
    for i in range(4):
        im = grid[i].imshow(Z, extent=extent, interpolation="nearest")
    #plt.colorbar(im, cax = grid.cbar_axes[0])
    grid.cbar_axes[0].colorbar(im)

    for cax in grid.cbar_axes:
        cax.toggle_label(False)

    # This affects all axes as share_all = True.
    grid.axes_llc.set_xticks([-2, 0, 2])
    grid.axes_llc.set_yticks([-2, 0, 2])

    for i in range(4):
        ax = grid[i]
        ax.yaxis.set_minor_locator(MultipleLocator(.5)) 
```

# assembly - x64 组装程序

> ID：14113452
> 
> 赞同：-1
> 
> 时间：2013-01-01T19:22:17.667
> 
> 标签：assembly, 64-bit, procedure, masm

假设 x64 程序集程序中的入口代码是：

```
push  rsi
push  r12
sub   rsp,48 
```

现在，我怎样才能在PROC的**主体**中找到这些值：

> 1）第 1 参数 2）第 3 参数 3）第 5 参数 4）第 7 参数

如果您可以为我绘制或描述堆栈，那对我来说更好理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T21:15:00.840

从[Windows x64 调用约定](http://msdn.microsoft.com/en-us/library/zthk2dkh%28v=vs.80%29.aspx)：

`RCX`前四个整数或指针参数在、`RDX`、`R8`和中从左到右传递`R9`。一旦这些寄存器被填满，其他所有内容都将在堆栈上（前四个浮点参数除外）。

由于我们看不到代码是如何调用的，因此无法从该序言中推断出参数。您需要查看调用它的代码以找出其中的内容，这两个`push`es 可能只是保存了被破坏的寄存器。

# javascript - 为什么 IE9 会返回语法错误，而 chrome 和 mozilla 不会

> ID：14113454
> 
> 赞同：-1
> 
> 时间：2013-01-01T19:22:32.963
> 
> 标签：javascript, internet-explorer, cross-browser

为什么 IE 9 控制台返回语法错误，而 chrome 和 mozilla 控制台解析代码

```
 var browserDetect={
 init:function  () {
    this.Osystem()
    this.browserFeatures()
    },
  Osystem:function  () {
    console.log(navigator.platform);
    },
  browserFeatures:function  () {
    if (navigator.appName=="Netscape") {
        var Net=parseInt(navigator.appVersion);
        console.log(Net)
    }
    else if (navigator.appName=="Microsoft Internet Explorer"){
        var IE=parseInt(navigator.appVersion);
        console.log(IE)
    }
    else{
        console.log(navigator.appName)
    }
         },
     };
  browserDetect.init(); 
```

返回的错误是`SCRIPT1028: Expected identifier, string or number line 22 character 1`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T19:24:55.837

提示：如果您在特定行上有错误，那么准确显示是哪一行会很有帮助。特别是如果您正在处理代码片段并且没有显示所有开头的行。

问题在这里：

```
}
     },   <---dangling comma
 }; 
```

特别是 IE 对这些事情非常愚蠢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T19:25:07.960

您正在使用 console.log() ，除非开发人员工具打开，否则它不受支持：

[IE9是否支持console.log，它是一个真正的功能吗？](https://stackoverflow.com/questions/5472938/does-ie9-support-console-log-and-is-it-a-real-function)

# python - 错误：没有名为 [文件名] 的模块

> ID：14113459
> 
> 赞同：2
> 
> 时间：2013-01-01T19:23:13.383
> 
> 标签：python, django, postgresql, heroku, module

我正在构建一个 Django 应用程序，并且正在迁移到 Heroku 和 Heroku Postgres。当我运行“python manage.py runserver”甚至“heroku run python manage.py runserver”时，终端返回错误“错误：没有名为文件名的模块” - 文件名是位于我的主项目文件夹中的应用程序文件夹，其中包含我的models.py 和 views.py 文件等。请参阅下面的文件结构。

我的 INSTALLED APPS 中列出了 app 文件夹，当我为 projectname 运行“ls”时它会显示出来，所以我很困惑为什么找不到它。

我已经使用 startapp 启动了一个新应用程序，并将旧应用程序的内容移过来只是为了查看它是否异常。这似乎只是在尝试让 Heroku 工作之后才发生的。

这是我这个项目的文件结构：

```
projectname/
      manage.py
      requirements.txt
      Procfile
      projectname/
           templates/
           __init__.py
           settings.py
           urls.py
           wsgi.py
      filename/
           __init__.py
           admin.py
           models.py
           tests.py
           urls.py
           views.py
      static/
      venv/ 
```

我已经为此苦苦挣扎了一天多，因此对于如何克服它的任何帮助将不胜感激！

编辑：这是我在代码中提到文件名的所有地方：

*   在 admin.py 中作为 'from projectname.filename.models import *'
*   在 URLconf 下的 projectname/urls.py 中作为 include('filename.urls',
    'namespace=filename')
*   在文件名/urls.py 中为 'from filename import *' 和在 URLconf 下为 'urlpatterns = patterns('filename.views' ...)
*   在views.py 中作为'from filename.models import *'

我也在 venv 中运行了“heroku run python manage.py syncdb”，但它仍然返回错误“错误：没有名为文件名的模块”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:16:02.253

我认为这条线

```
In admin.py as 'from projectname.filename.models import *' 
```

正在给出问题。`projectname`恕我直言部分不应该在那里，所以该行应该只是阅读

```
from filename.models import * 
```

**[编辑]**

而且，两者`projectname`和`filename`都应该在`INSTALLED_APPS`.

并更多地解释我的思路。您`projectname.filename`指的是内部`projectname`文件夹，所以我认为它正在尝试查找`projectname/projectname/filename.py`不存在的文件。只需添加`filename`to`INSTALLED_APPS`将使范围全局可用，因此可以按原样引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T20:08:49.543

我有一个例程用来转储整个 Django 模块路径。那里只是为了`re.sub()s`缩短一些路径并更容易看到什么在哪里。

```
import sys, re, os

def ModuleList():
    ret = []
    dir_project = os.path.dirname(os.path.dirname(os.path.realpath(__file__)))
    project_name = os.path.basename(dir_project)

    for k,v in sys.modules.items():

        x = str(v)
        if 'built-in' in x:
            ret.append((k, 'built-in'))
            continue

        m = re.search(r"^.*?'(?P<module>.*?)' from '(?P<file>.*?)'.*$", x)
        if m:
            d = m.groupdict()
            f = d['file']
            f = re.sub(r'/usr/local/lib/python[.0-9]*/site-packages/django/', 'system django >> ', f)
            f = re.sub(r'/usr/local/lib/python[.0-9]*/site-packages/', 'site-packages >> ', f)
            f = re.sub(r'/usr/local/lib/python[.0-9]*/', 'python >> ', f)
            f = re.sub(dir_project+'.*django/', 'local django >> ', f)
            f = re.sub(dir_project+r'(/\.\./)?', project_name + ' >> ', f)
            ret.append((d['module'], f))
    ret.sort( lambda a,b: cmp(a[0].lower(), b[0].lower()) )
    return ret
# ModuleList

if __name__ == "__main__":
    for x in ModuleList():
        print "%s\t%s" % (x[0], x[1]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T05:31:37.900

你在 /venv 吗？忘记进入虚拟环境后，我也遇到过类似的错误。要从终端执行此操作，请尝试：

`$ source venv/bin/activate`

# json - 我想用spring创建一个接受json作为参数的休息服务

> ID：14113462
> 
> 赞同：1
> 
> 时间：2013-01-01T19:23:18.883
> 
> 标签：json, spring, rest

我想使用接受 json 作为参数的 spring rest 服务创建一个服务。

例如：

```
@RequestMapping(value = "/setAppData/{appId}/", method = RequestMethod.POST)
public void setAppData(@PathVariable String appId,
                       @RequestParam Category appCategory,
                       @RequestParam AppMetadata appMetaData) {
} 
```

我希望客户端将 appCategory 和 appMetadata 作为 json 发送，spring（或我将编写的拦截器）将其转换为对象。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T19:53:23.917

这个怎么样

**控制器**

```
@RequestMapping(value = "/setAppData/{appId}/", method = RequestMethod.POST)
public void setAppData(@PathVariable String appId,
                       @RequestBody AppData appData) {
} 
```

**POJO**

```
public class AppData {
    private Category appCategory;
    private AppMetadata appMetaData;

    //getters/setters
} 
```

然后客户端发送`AppData`以 JSON 格式发送。您需要 Jackson 在 CLASSPATH 上可用。

旧但有价值的参考：http: [//blog.springsource.org/2010/01/25/ajax-simplifications-in-spring-3-0/](http://blog.springsource.org/2010/01/25/ajax-simplifications-in-spring-3-0/)

# postgresql - 在 PostgreSQL 中生成两个日期之间的时间序列

> ID：14113469
> 
> 赞同：114
> 
> 时间：2013-01-01T19:23:43.687
> 
> 标签：postgresql, date, time-series, postgresql-9.1, generate-series

我有一个这样的查询，可以很好地在两个给定日期之间生成一系列日期：

```
select date '2004-03-07' + j - i as AllDate 
from generate_series(0, extract(doy from date '2004-03-07')::int - 1) as i,
     generate_series(0, extract(doy from date '2004-08-16')::int - 1) as j 
```

它在我想要的和`2004-03-07`之间生成 162 个日期。`2004-08-16`这段代码的问题在于，当两个日期来自不同年份时，它不会给出正确的答案，例如当我尝试`2007-02-01`和`2008-04-01`.

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：213
> 
> 时间：2013-01-01T19:40:39.317

可以在不转换到/从 int 的情况下完成（而是转换到/从时间戳）

```
SELECT date_trunc('day', dd):: date
FROM generate_series
        ( '2007-02-01'::timestamp 
        , '2008-04-01'::timestamp
        , '1 day'::interval) dd
        ; 
```

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2017-09-30T05:33:11.260

要生成一系列***日期***，这是***最佳***方式：

```
SELECT t.day::date 
FROM   generate_series(timestamp '2004-03-07'
                     , timestamp '2004-08-16'
                     , interval  '1 day') AS t(day); 
```

*   `date_trunc()`不需要额外的。转换为`date`( `day::date`) 隐含地做到了这一点。

*   但是将日期文字转换`date`为输入参数也没有意义。Au contraire，**`timestamp`是最好的选择**。性能上的优势很小，但没有理由不拿下。而且您不必涉及 DST（夏令时）规则以及来回`date`转换。`timestamp with time zone`见下文。

等效的，不太明确的简短语法：

```
SELECT day::date 
FROM   generate_series(timestamp '2004-03-07', '2004-08-16', '1 day') day; 
```

或者使用列表中的 set-returning 函数`SELECT`：

```
SELECT generate_series(timestamp '2004-03-07', '2004-08-16', '1 day')::date AS day; 
```

在最后一个变体中*需要*`AS`关键字，否则 Postgres 会误解列别名。而且我*不*建议在 Postgres 10 之前使用该变体 - 至少在同一个列表中没有一个以上的 set-returning 函数：*`day`*`SELECT`**

 ***   [SELECT 子句中多个集合返回函数的预期行为是什么？](https://stackoverflow.com/questions/39863505/what-is-the-expected-behaviour-for-multiple-set-returning-functions-in-select-cl/39864815#39864815)

（除此之外，最后一个变体通常以微弱的优势最快。）

### 为什么`timestamp [without time zone]`？

有许多重载的[**`generate_series()`**](https://www.postgresql.org/docs/current/functions-srf.html#FUNCTIONS-SRF-SERIES). 目前（Postgres 11）：

> ```
> SELECT oid::regprocedure   AS function_signature
>      , prorettype::regtype AS return_type
> FROM   pg_proc
> where  proname = 'generate_series'; 
> ```
> 
> ```
> 函数签名 | 返回类型                
> :------------------------------------------------ ------------------------------------------- | :----------------------------
> generate_series(整数，整数，整数) | 整数                    
> 生成系列（整数，整数）| 整数                    
> 生成系列（大整数，大整数，大整数） | 大整数                     
> 生成系列（大整数，大整数） | 大整数                     
> generate_series(数字,数字,数字) | 数字                    
> 生成系列（数字，数字）| 数字                    
> generate_series(时间戳不带时区,时间戳不带时区,间隔) | 没有时区的时间戳
> generate_series(timestamp with time zone,timestamp with time zone,interval) | 带时区的时间戳
> 
> ```

（`numeric`Postgres 9.5 添加了变体。）相关的是最后两个**以粗体**取和返回`timestamp`/ `timestamptz`。

没有**变体采取或返回`date`**。需要显式强制转换才能返回`date`。带`timestamp`参数的调用直接解析为最佳变体，而无需下降到函数类型解析规则，也无需对输入进行额外的强制转换。

`timestamp '2004-03-07'`是完全有效的，顺便说一句。省略的时间部分默认为`00:00`ISO 格式。

感谢[**函数类型解析**](https://www.postgresql.org/docs/current/typeconv-func.html)，我们仍然可以通过`date`. 但这需要 Postgres 做更多的工作。有一个***隐式*转换**from `date`to`timestamp`和一个 from `date`to `timestamptz`。会模棱两可，但在“日期/时间类型”中`timestamptz`是**“首选”。**所以[比赛是在步骤*4d 决定的。*](https://www.postgresql.org/docs/current/typeconv-func.html)：

> 遍历所有候选对象并将那些接受首选类型（输入数据类型的类型类别）的候选对象保留在需要类型转换的大多数位置。如果没有人接受首选类型，则保留所有候选人。如果只剩下一个候选人，请使用它；否则继续下一步。

除了函数类型解析中的额外工作之外，这还增加了额外的强制转换`timestamptz`——这不仅增加了成本，而且还可能引入 DST 问题，在极少数情况下导致意外结果。（DST 是一个愚蠢的概念，顺便说一句，不能强调这一点。）相关：

*   [如何在 PostgreSQL 中生成日期系列？](https://dba.stackexchange.com/q/175963/3684)
*   [如何在 PostgreSQL 中生成时间序列？](https://dba.stackexchange.com/q/158907/3684)

我在小提琴中添加了演示，显示了更昂贵的查询计划：

*db<>[在这里摆弄](https://dbfiddle.uk/?rdbms=postgres_11&fiddle=2750de77507cb4bd3ed2b7cf972e4bc6)*

有关的：

*   [有没有办法在 Postgres 中禁用函数重载](https://stackoverflow.com/questions/28698641/is-there-a-way-to-disable-function-overloading-in-postgres/28710225#28710225)
*   [生成一系列日期 - 使用日期类型作为输入](https://stackoverflow.com/questions/21045909/generate-series-of-dates-using-date-type-as-input/21051215#21051215)
*   [Postgres 数据类型转换](https://stackoverflow.com/questions/13676816/postgres-data-type-cast/13676871#13676871)

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2015-02-25T17:06:08.480

您可以直接使用日期生成系列。无需使用整数或时间戳：

```
select date::date 
from generate_series(
  '2004-03-07'::date,
  '2004-08-16'::date,
  '1 day'::interval
) date; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-10-31T11:52:35.910

你也可以使用这个。

```
select generate_series  ( '2012-12-31'::timestamp , '2018-10-31'::timestamp , '1 day'::interval) :: date 
```**

# d - 检查字符串是否以 D / phobos 中的子字符串开头？

> ID：14113470
> 
> 赞同：3
> 
> 时间：2013-01-01T19:23:46.757
> 
> 标签：d, phobos

到目前为止，我还没有找到最容易检查字符串是否以 D 中的某个字符开头的方法。

我想要类似的东西：

```
if (my_str.startswith("/")) {
    // Do something
} 
```

我找到的最接近的是“chompPrefix”（[这里](http://dlang.org/phobos/std_string.html)），但这并不是我真正想要的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T19:25:15.603

std.algorithm 中有一个startsWith 可以像那样工作。

```
import std.algorithm;
import std.stdio;
void main() {
    string my_str = "/test";
    if(my_str.startsWith("/"))
        writeln("cool");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-28T18:18:35.970

我想这也有效：

```
string temp = "sometemp";
assert(temp[0..2] == "so") 
```

# dynamic - Qcube/Qcodo 动态输入字段

> ID：14113474
> 
> 赞同：4
> 
> 时间：2013-01-01T19:24:20.067
> 
> 标签：dynamic, input, field, qcodo

有人有示例如何在我的 qcubed 项目中添加动态输入字段吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:21:55.750

您可以利用 QPanel 控件即时添加控件。只需将其 AutoRenderChildren 属性设置为 true，并将动态控件父级设置为 QPanel。

```
// Instantiate our QPanel - this will render a div to contain our dynamic controls
// Note that the parent is $this. You will need to call render in your template
$this->pnl = new QPanel($this);
// Setting AutoRenderChildren so that the Panel will handle Rendering our dynamic
// controls.
$this->pnl->AutoRenderChildren = true;
// Creating a button with an Ajax action to create our dynamic controls
$this->btn = new QButton($this);
$this->btn->Text = "Add Control";
$this->btn->AddAction(new QClickEvent(), new QAjaxAction('btn_Click'));

protected function btn_Click($strFormId, $strControlId, $strParameter) {
    // create the control and set its parent to the QPanel 
    $ctl = new QTextBox($this->pnl);        
} 
```

您可以在 QCubed 示例网站上获得有关使用 QPanel 的更多信息。

[QCubed QPanel 示例](http://examples.qcu.be/assets/_core/php/examples/multiple_qform/intro.php)

# jquery - 你如何在 JQuery 弹出窗口中添加换行符

> ID：14113476
> 
> 赞同：14
> 
> 时间：2013-01-01T19:24:27.067
> 
> 标签：jquery, twitter-bootstrap

如何在弹出框内容中添加换行符？换行标记和换行符都不起作用。这就是我正在尝试的：

```
$(".foo").hover(function () {
    $(this).popover({
        title: "Bar",
        content: "Line 1 <br /> Line 2 \n Line 3"

    }).popover('show');
}, function () {
    $(this).popover('hide');
}); 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-01-01T19:29:46.750

`html: true`初始化弹出框时需要传递选项。然后`<br />`和其他html标签应该可以工作：

```
$(".foo").hover(function () {
    $(this).popover({
        title: "Bar",
        content: "Line 1 <br /> Line 2 <br /> Line 3",
        html: true
    }).popover('show');
}, function () {
    $(this).popover('hide');
}); 
```

[https://groups.google.com/forum/?fromgroups=#!topic/twitter-bootstrap/bhtpERLYCo4](https://groups.google.com/forum/?fromgroups=#!topic/twitter-bootstrap/bhtpERLYCo4)

# jquery - 这在这种情况下指的是什么

> ID：14113478
> 
> 赞同：0
> 
> 时间：2013-01-01T19:24:56.693
> 
> 标签：jquery, jquery-ui-sortable

通常我在 Jquery 中使用*这个*关键字来引用一个元素，但是在我当前的代码中它的行为并不像预期的那样。

这是我的代码（相关部分）

```
 $("#myTable tbody").on('sortstart', 'tr', function(event, ui) {
    $(this).children("td").css({'background-color': '#313131'});
  }); 
```

在这种情况下，我希望*这*意味着 tr ，但事实并非如此。它指的是什么？

整个事情，如果有人想看看：

[http://jsbin.com/ucopun/102/edit](http://jsbin.com/ucopun/102/edit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T19:30:57.663

它确实指的是`tr`，但问题是该事件`sortstart`永远不会触发。尝试将事件更改为例如`click`，它工作得很好。

该`sortstart`事件不会被触发，因为您将处理程序绑定到`tr`子项，而不是`tbody`已初始化为可排序的处理程序。可排序对象的子对象不会触发事件。

# c# - 如何从“设置”浮出控件更新页面控件

> ID：14113479
> 
> 赞同：2
> 
> 时间：2013-01-01T19:25:06.087
> 
> 标签：c#, windows-8, microsoft-metro

我正在构建一个地铁风格的应用程序。我设计了一个“设置”弹出窗口，用户可以在其中更改应用程序 HomePageView 页面中包含的文本块的字体。

通过列出所有系统字体的组合框选择字体。一旦选择了字体（在设置弹出的组合框中），必须更新 HomePageView 页面中的所有文本块。

这是要更新的样式（位于standardstyles.xaml 中）：

```
 <Style x:Key="timeStyle" TargetType="TextBlock">
        <Setter Property="FontWeight" Value="Bold"/>
        <Setter Property="FontSize" Value="333.333"/>
        <Setter Property="FontFamily" Value="Segoe UI"/>
    </Style> 
```

这是我用来更新文本块样式和访问 SetTextBlockFont 属性以更新文本块外观的代码：

```
private void fontBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {
            var res = new ResourceDictionary()
            {
                Source = new Uri("ms-appx:///Common/StandardStyles.xaml", UriKind.Absolute)

            };
            var style = res["timeStyle"] as Style;

            style.Setters.RemoveAt(2);
            style.Setters.Add(new Setter(FontFamilyProperty, new FontFamily("Arial")));

            HomePageView homePageViewReference = new HomePageView();
            homePageViewReference.SetTextBlockFont = style;
        } 
```

这是 HomePageView.xaml.cs 中更新文本块 (timeHour) 的 SetTextBlockFont 属性：

```
public Style SetTextBlockFont
        {
            set
            {
                timeHour.Style = value;
            }
        } 
```

该应用程序编译没有错误，但是当我单击组合框中的字体时，没有任何反应。我想是因为我必须加载 HomePageView 页面 homePageViewReference 的新实例，或者因为我必须重新加载页面或类似的东西。

我指出我不能使用 Frame 对象或 NavigationService 类，因为这是一个地铁应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:23:17.907

您需要在视图中实现 INotifyPropertyChanged，或者您可以直接使用 LayoutAwarePage 给出的 DefaultViewModel。

```
Class A:INotifyPropertyChanged
{

    #region EventHandler
    public event PropertyChangedEventHandler PropertyChanged;

    public void RaisePropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
        {
            this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    #endregion
    public Style SetTextBlockFont
    {
        set
        {
            timeHour.Style = value;
            RaisePropertyChanged("SetTextBlockFont");
        }
    }
} 
```

# ios - IOS 6中的MapView区域缩放级别不同

> ID：14113482
> 
> 赞同：1
> 
> 时间：2013-01-01T19:25:10.377
> 
> 标签：ios, annotations, mkmapview, mkcoordinateregion

我有一个使用 MapKit 来布局带有注释的地图的应用程序。我有一个创建 MKCoordinateRegion 的方法，我将它分配给 setRegion 以适当地调整地图的缩放级别。但是 IOS 6 中的缩放级别低于 IOS 5。当我在 IOS 5 上运行时，注释的间距很好，但在 IOS 6 中它们正好在边缘。如果我调高比例因子，我可以在 IOS 6 中获得正确的间距，但在 IOS 5 中，它们都被卡在了中间。

```
- (MKCoordinateRegion)calculateRegion
{
    MKCoordinateRegion region;

    double scaleValue = 1.5

    //set an initial value for coordinates from any annotation
    MyAnnotation *annotation = [self.annotations lastObject];
    CLLocationCoordinate2D max = annotation.coordinate;
    CLLocationCoordinate2D min = max;
    double latitude, longitude;

    for (MyAnnotation *annotation in self.annotations) {
        latitude = annotation.coordinate.latitude;
        longitude = annotation.coordinate.longitude;
        if (latitude > max.latitude) max.latitude = latitude;
        else if (latitude < min.latitude) min.latitude = latitude;
        if (longitude > max.longitude) max.longitude = longitude;
        else if (longitude < min.longitude) min.longitude = longitude;
    }

    // set the center of the mapview
    region.center.latitude = (max.latitude + min.latitude) / 2;
    region.center.longitude = (max.longitude + min.longitude) / 2;

    // set the span to be larger than the max values to add some padding around pins
    region.span.latitudeDelta = (max.latitude - min.latitude) * scaleValue;
    region.span.longitudeDelta = (max.longitude - min.longitude) * scaleValue;

    MKCoordinateRegion regionThatFits = [self.mapView regionThatFits:region];
    region = regionThatFits;

return region;
} 
```

将 scaleFactor 设置为 2.0 以上适用于 IOS 6，1.3 适用于 IOS 5。奇怪的是 IOS 6 模拟器以与 IOS 5 中相同的方式显示注释。它只是在我用于测试的 iPhone 4S 上它显示不正确。IOS 6 中是否发生了会影响缩放级别的更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:25:48.763

我发现在 Xcode 4.6.1 的模拟器中缩放级别有所提高，但在真正的 iOS 6 设备上仍然受限。直到我将这些设备更新到 iOS 6.1.3，现在缩放似乎回到了每个 iOS 6 级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T20:30:14.577

是的，他们更改了 iOS 6 中的最大缩放级别。我听说如果您下载 Xcode 4.6 DP1，生成的构建将使它们更接近相同（在 iOS 5 和 iOS 6 之间）。

# ruby-on-rails - Heroku 和 Rails 上的响应式图像

> ID：14113485
> 
> 赞同：1
> 
> 时间：2013-01-01T19:25:20.097
> 
> 标签：ruby-on-rails, heroku, responsive-design

在 Heroku 上托管的 Rails 应用程序中实现响应式图像的推荐方法是什么？

我想使用[filamentgroup 的 Responsive-Images](https://github.com/filamentgroup/Responsive-Images)但我在 Heroku 上没有 htaccess。

# sql-server-2008 - 从多个表中选择 microsoft sql server 中的相同列名

> ID：14113487
> 
> 赞同：0
> 
> 时间：2013-01-01T19:25:24.463
> 
> 标签：sql-server-2008, select

是否可以编写查询：

```
SELECT * from table1, table 2, table 3 ... 
```

`table1.column`名字和名字`table2.column`一样的地方`table3.column`

我们不知道我们列的名称，我们说我们在 table1 中的任何列。**列名，如**table2。 像 table3.column 名称中的**列名**

例如：`employee id`maybe是3个表共有的列，或者`publisher id`是3个表共有的列。

我可以在我的数据库中找到带有图表的外键或主键，但我想编写一个查询，只显示与列名具有相同标题的列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:42:21.303

不知道为什么要这样做，所以有点难以驾驭，但是数据库中有许多表和视图来描述数据库。

Information_Schema.Columns 可能是您应该开始的地方。请注意，这是元数据，如果您想要实际表的内容，则必须更进一步，并构建一些动态 sql 或等效的。

`Select Column_Name,Count(*) As NumberOfOccurences From Information_Schema.Columns` 例如，将为您提供列名以及您使用它们的频率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-14T12:00:38.397

如果您知道列名并且想知道在哪个不同的表中使用了相同的列名，那么将 SQL 查询编写为

选择 schema_name(t.[schema_id]) + '.' + t.[name] AS Tables FROM sys.tables t INNER JOIN sys.columns c on t.[object_id] = c.[object_id] WHERE c.[name] = 'Your_Common_Column_Name'

您将获得所有表格列表及其各自的架构

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T19:40:07.757

获取列名：

```
select sc.name
from sysobjects so inner join syscolumns sc on so.id = sc.id
where so.name = 'tableName' 
```

# floating-point - 计算机如何区分浮点数和整数

> ID：14113490
> 
> 赞同：1
> 
> 时间：2013-01-01T19:25:41.110
> 
> 标签：floating-point

我想这只是 this 的[扩展](https://stackoverflow.com/questions/10893232/how-computer-distinguish-an-integer-is-signed-or-unsigned)。

现在，编译器将数据类型定义为整数、有符号和无符号以及浮点数，以便处理器可以适当地使用它们。

但是说，处理器有一个地址。现在，RTN 中一个非常基本的添加指令就像
`ADD R1, R2`ie `R1 <- R1 + R2`。现在说 register`R1`刚刚加载了一个包含 32 位浮点并`R2`具有整数的内存地址。

我想知道，处理器如何以及何时准确知道，以及程序在哪里（以指令格式？）告诉它究竟`R1`是一个浮点数，并且`R2`是一个整数？

还有一个，假设我随机给出一个允许访问的内存地址，并要求处理器获取它的内容。现在，处理器如何知道该位置是浮点数还是整数。那么，它究竟是如何处理内容的呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T19:30:52.240

它知道，因为你告诉它。在 ia32 处理器上，该`ADD`指令将整数相加。`FADD`添加浮点数（参见[指令参考](http://www.posix.nl/linuxassembly/nasmdochtml/nasmdoca.html)）。要将浮点数添加到整数，必须将浮点数转换为整数，或者将整数转换为浮点数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T19:29:25.590

它没有。处理器只是在指定的寄存器或内存地址上执行指令。

# ruby-on-rails - 如何显示儿童模型的记录数？

> ID：14113493
> 
> 赞同：0
> 
> 时间：2013-01-01T19:25:50.683
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我应该在视图中编写这样的代码吗？

> **<%= @childrens.count %>**

或者

**控制器**

> **@children = Parent.children
> @children_count = @children.count**

**看法**

> **<%= @children_count%>**

或者我应该在 Parent 表中添加一个名为“count”的列，并且每次用户创建新的 CommunityTopic 记录时，我应该重新计算记录数并将数字保存到“count”列吗？同时，我想在创建新的 CommunityTopic 时更新父表的“at_modified(TimeStamp)”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T19:51:13.093

您应该在控制器中执行数据库请求，而不是在视图中。在您的情况下，可以像这样计算孩子数：

```
@children_count = Parent.children.count 
```

然后`@children`在您的视图中显示：

```
<%= @children_count %> 
```

顺便说一句，检查这个链接：[http](http://web.archive.org/web/20100210204319/http://blog.hasmanythrough.com/2008/2/27/count-length-size) ://web.archive.org/web/20100210204319/http://blog.hasmanythrough.com/2008/2/27/count-length-size它会给你更多关于何时使用`count`,`size`或`length`.

# java - java项目中的所有包

> ID：14113497
> 
> 赞同：4
> 
> 时间：2013-01-01T19:26:49.067
> 
> 标签：java, class, project

我希望打印出我的 Java 项目中所有包中的所有类。例如，假设项目包含

```
Package1.Class1
Package1.Class2
Package1.Class3
Package2.Class1
Package2.Class2 
```

我想打印出所有这些包和类。使用以下代码，我可以列出它们，但只有当我以以下方式引用时`Package.Class c = new Package.Class();`

这是我尝试使用的代码：

```
Package[] pa = Package.getPackages();
for (int i = 0; i < pa.length; i++) {
    Package p = pa[i];
    System.out.print("\"" + p.getName() + "\", ");
} 
```

关于我如何做到这一点的任何想法？

谢谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T19:38:36.367

由于类加载器的动态特性，没有简单的方法。

但是您可以查看反射库：[http ://code.google.com/p/reflections/](http://code.google.com/p/reflections/)

这将允许您在当前类路径中查找类。

使用该库，您可以尝试以下操作：

```
 Reflections reflects = new Reflections("my.project.prefix");

 Set<Class<? extends Object>> allClasses = 
 reflects.getSubTypesOf(Object.class); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T19:42:38.243

使用`reflections`或解析类路径，将其拆分为单独的文件夹和/或 jar 文件，遍历每个文件夹并列出包。但这比使用反射库要复杂得多。

# iphone - XML Parse 未显示带有 & 符号的元素

> ID：14113499
> 
> 赞同：1
> 
> 时间：2013-01-01T19:27:12.250
> 
> 标签：iphone, ios, xml, xml-parsing, nsxmlparser

我试图在我的应用程序中解析一个 xml 提要... xml 文件在这个 url 中

feeds.feedburner.com/blogspot/TUvAW?format=xml

问题是当我访问描述段时，它会显示不同的特殊符号，例如引号。这是我试图从我的 xml 中解析的描述段之一：

```
<description>Este es mi blog 3&lt;img src="http://feeds.feedburner.com/~r/blogspot/TUvAW/~4/URCV9ModTR0" height="1" width="1"/&gt;</description> 
```

我用 NSXMLParser 解析它，这些是我在我的中使用的方法：

XMLParser.m

```
- (void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    currentNodeContent = (NSMutableString *) [string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
}

- (void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementname namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    if ([elementname isEqualToString:@"item"])
    {
        currentFeed = [Feed alloc];
        isStatus = YES;
    }
    if ([elementname isEqualToString:@"author"])
    {
        isStatus = NO;
    }
}

- (void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementname namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if (isStatus)
    {
        if ([elementname isEqualToString:@"description"])
        {
            currentFeed.description = currentNodeContent;
            NSLog(@"%@",currentNodeContent);

        }
        if ([elementname isEqualToString:@"title"])
        {
            currentFeed.content = currentNodeContent;
            NSLog(@"%@",currentNodeContent);

        }
        if ([elementname isEqualToString:@"link"])
        {
            currentFeed.WVUrl = currentNodeContent;
            NSLog(@"%@",currentNodeContent);
        }
    }
    if ([elementname isEqualToString:@"item"])
    {
        [self.feeds addObject:currentFeed];
        currentFeed = nil;
        currentNodeContent = nil;
    }
} 
```

我使用这些 NSLogs 来跟踪我从解析中获得的字符串，但我的描述节点内容总是显示如下： > 标题和链接节点显示完美。

我想从描述节点中获取所有字符串以供以后使用，但我不能，我不知道这有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T23:11:05.093

Abhishek、Rob 和我已经概述了这些问题。但我认为值得总结并展示正确的解决方案。

主要问题是标签`parser:foundCharacters:`被多次`<description>`调用，每次调用都提供一段描述。

解决方案是将这些片段连接起来：

**XMLParser.h：**

```
NSMutableString* currentNodeContent; 
```

**XMLParser.m：**

```
- (void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    if (currentNodeContent == nil)
        currentNodeContent = [[NSMutableString alloc] initWithCapacity: 20];
    [currentNodeContent appendString: [string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]];
}

- (void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementname namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    if ([elementname isEqualToString:@"item"])
    {
        currentFeed = [Feed alloc];
        isStatus = YES;
    }
    if ([elementname isEqualToString:@"author"])
    {
        isStatus = NO;
    }
}

- (void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementname namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if (isStatus)
    {
        if ([elementname isEqualToString:@"description"])
        {
            currentTweet.description = currentNodeContent;
            NSLog(@"%@",currentNodeContent);

        }
        if ([elementname isEqualToString:@"title"])
        {
            currentTweet.content = currentNodeContent;
            NSLog(@"%@",currentNodeContent);

        }
        if ([elementname isEqualToString:@"link"])
        {
            currentFeed.WVUrl = currentNodeContent;
            NSLog(@"%@",currentNodeContent);
        }
    }
    if ([elementname isEqualToString:@"item"])
    {
        [self.feeds addObject:currentFeed];
        currentFeed = nil;
        [currentNodeContent release];
        currentNodeContent = nil;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T19:42:11.040

Xml 文件中的问题是使用“&”字符。

这样做只需在一个字符串中获取 xml 数据，然后用任何唯一字符串替换“&”，然后解析您的 xml。

在显示或使用 xml 数据时，只需检查您获得的字符串是否包含相同的唯一字符串，然后用“&”替换该字符串。

# jquery - 使用Jquery保持一个div的不透明度，减少悬停时的不透明度

> ID：14113504
> 
> 赞同：0
> 
> 时间：2013-01-01T19:28:35.010
> 
> 标签：jquery, html, hover, opacity

我有点坚持这个。这是我的设置的基本概述：

```
<div id="shell">
  <div class="subelement">One</div>
  <div class="subelement">One</div>
  <div class="subelement">One</div>
  <div class="subelement">One</div>
</div> 
```

我希望在 .subelement 悬停时降低具有子元素类的剩余 div 的不透明度。我知道如何在 jQuery 中使用悬停效果，只是不知道在为未悬停的剩余 div 设置动画时从哪里开始。感谢任何人的建议。

**更新：最终解决方案 - [http://jsfiddle.net/yqPFH/](http://jsfiddle.net/yqPFH/)**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T19:32:21.643

我会改用 CSS

[**演示**](http://jsfiddle.net/Yw8yD/)

[**带动画的演示**](http://jsfiddle.net/Yw8yD/1/)

HTML

```
<div id="shell">
  <div class="subelement">One</div>
  <div class="subelement">One</div>
  <div class="subelement">One</div>
  <div class="subelement">One</div>
</div> 
```

CSS

```
#shell:hover {
    color: rgba(0,0,0,.5);
}

.subelement:hover {
    color: rgba(0,0,0,1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T19:31:52.640

```
$("#shell .subelement").hover(function() {
    $(this).css("opacity", 1).siblings().css("opacity", 0.6);
}); 
```

[http://jsfiddle.net/EV833/1](http://jsfiddle.net/EV833/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T19:58:22.497

虽然这个问题已经有了答案，但提供了一个额外的答案，我对其进行了调整并已被删除。这里它使用 jQuery，当没有悬停时会失去悬停状态。简单的。

[http://jsfiddle.net/kKHt4/3/](http://jsfiddle.net/kKHt4/3/)

```
$(".subelement").hover( function() {
    $(this).siblings().stop().fadeTo("fast", 0.5);
}, function() {
    $(this).siblings().stop().fadeTo("fast", 1.0);
});​​​​​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-02T00:02:42.303

两部分问题：

1）你如何只保留第一行不透明度：1 并休息在 0.5 2）一旦选择或悬停，你如何保持不透明度：1，直到你悬停/选择另一行？

# android - 按钮单击不起作用。视图正在按钮上发布消息

> ID：14113515
> 
> 赞同：-1
> 
> 时间：2013-01-01T19:30:38.713
> 
> 标签：android, button, view

现在我在调试代码时遇到问题，我的应用程序中的按钮没有响应单击操作。我在单击视图方法上保留断点，但在单击视图方法上没有响应。

我在 Click 方法中所做的是，如果我单击第一个按钮，然后将值与空按钮值交换。但单击时没有响应。

这是我要检查的完整代码。

```
public class Play extends Activity implements OnClickListener
{   
private ArrayList<Integer> m_buildButtonsIDs;
private ArrayList<Integer> m_gameButtonsIDs;

public static Character UserWords;
public static Character RemainingWords;
public static Character OpenCard;

static ArrayList<Character> ShuffledCards = new ArrayList<Character>();
static ArrayList<Character> UserBuildWords = new ArrayList<Character>();
static ArrayList<Character> RemainingBuildWords = new ArrayList<Character>();
static ArrayList<Character> RemainingBuildWordsAfterShowCard = new ArrayList<Character>();
static ArrayList<Character> DroppedCards = new ArrayList<Character>();

static Stack<Character>UserDroppedCards = new Stack<Character>();

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.play);

    InitializeBoard();  
}

public void InitializeBoard() 
{      
  m_buildButtonsIDs = new ArrayList<Integer>();

  m_buildButtonsIDs.add(R.id.Button1);
  m_buildButtonsIDs.add(R.id.Button2);
  m_buildButtonsIDs.add(R.id.Button3);
  m_buildButtonsIDs.add(R.id.Button4);
  m_buildButtonsIDs.add(R.id.Button5);
  m_buildButtonsIDs.add(R.id.Button6);
  m_buildButtonsIDs.add(R.id.Button7);
  m_buildButtonsIDs.add(R.id.Button8);
  m_buildButtonsIDs.add(R.id.Button9);

  m_gameButtonsIDs = new ArrayList<Integer>();

  m_gameButtonsIDs.add(R.id.pickButton);
  m_gameButtonsIDs.add(R.id.showButton);
  m_gameButtonsIDs.add(R.id.emptyButton);

  String random = RandomAlphabetGenerator.Random();

  for(int i = 0;i<random.length();i++)
  {
    char randomcards = random.charAt(i);            

    ShuffledCards.add(randomcards);
  }

  for(int i = 0;i < 9;i++)
  { 
    UserWords = ShuffledCards.get(i);
    UserBuildWords.add(UserWords);

        if(i == 8)
        {
            for(int j = 9;j < 52;j++)
            {   
                RemainingWords = ShuffledCards.get(j);
                RemainingBuildWords.add(RemainingWords);
            }
        }
    }   

    OpenCard = RemainingBuildWords.get(0);

    DroppedCards.add(OpenCard);

    RemainingBuildWords.remove(0);
    RemainingBuildWordsAfterShowCard.addAll(RemainingBuildWords);

    FillUserBuildButtons(ShuffledCards);
    StackingDroppedButtons(DroppedCards);
    StackingPickButtons(RemainingBuildWordsAfterShowCard);
}   

private void FillUserBuildButtons(ArrayList<Character> shuffledCards)
{       
    for (int i=0 ; i<m_buildButtonsIDs.size() ; i++) 
    {
        Button BuildButton = (Button)findViewById(m_buildButtonsIDs.get(i));
        BuildButton.setText(UserBuildWords.get(i).toString());          
    }
}

private void StackingDroppedButtons(ArrayList<Character> droppedCards)
{       
    Button ShowButton = (Button)findViewById(m_gameButtonsIDs.get(1));
    ShowButton.setText(DroppedCards.get(0).toString());     
}

private void StackingPickButtons(ArrayList<Character> remainingBuildWordsAfterShowCard)
{       
    Button ShowButton = (Button)findViewById(m_gameButtonsIDs.get(0));
    ShowButton.setText(RemainingBuildWordsAfterShowCard.get(0).toString());     
}

public void onClick(View v)
{       
    CharSequence text;

    switch(v.getId())
    {
      case R.id.Button1:

          Button FirstButton = (Button)findViewById(m_buildButtonsIDs.get(0));
          text = FirstButton.getText().toString();
          FirstButton.setText(SwapValue(text)); 
          break;

      case R.id.emptyButton:              
          break;
    }   
}

private CharSequence SwapValue(CharSequence k) 
{
    CharSequence empty = null;

    Button EmptyButton = (Button)findViewById(m_buildButtonsIDs.get(0));
    empty = EmptyButton.getText().toString();
    EmptyButton.setText(k);

    return empty;
}           

} 
```

这是我用于检查的 xml 代码：

```
<TableLayout
android:id="@+id/MainLayout"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="fill"
android:layout_marginTop="50dp"
android:layout_marginLeft="115dp">

<LinearLayout
android:layout_width="40dp"
android:layout_height="40dp" >

<Button
android:id="@+id/Button1"
android:layout_width="40dp"
android:layout_height="40dp"
android:layout_marginBottom="72dp"
android:text="@string/button_label"
android:textSize="15dp" />

<Button
android:id="@+id/Button2"
android:layout_width="40dp"
android:layout_height="40dp"
android:layout_marginBottom="72dp"
android:text="@string/button_label"
android:textSize="15dp" />

<Button
android:id="@+id/Button3"
android:layout_width="40dp"
android:layout_height="40dp"
android:layout_marginBottom="72dp"
android:text="@string/button_label"
android:textSize="15dp" />

<Button
android:id="@+id/Dummy"
android:layout_width="40dp"
android:layout_height="40dp"
android:layout_marginBottom="72dp"
android:clickable="false"
android:visibility="invisible" />

<Button
android:id="@+id/Button4"
android:layout_width="40dp"
android:layout_height="40dp"
android:layout_marginBottom="72dp"
android:text="@string/button_label"
android:textSize="15dp" />

<Button
android:id="@+id/Button5"
android:layout_width="40dp"
android:layout_height="40dp"
android:layout_marginBottom="72dp"
android:text="@string/button_label"
android:textSize="15dp" />

<Button
android:id="@+id/Button6"
android:layout_width="40dp"
android:layout_height="40dp"
android:layout_marginBottom="72dp"
android:text="@string/button_label"
android:textSize="15dp" />
</LinearLayout>

<LinearLayout
android:layout_width="40dp"
android:layout_height="40dp" 
android:layout_marginBottom="30dp">

<Button
android:id="@+id/Dummy2"
android:layout_width="40dp"
android:layout_height="40dp"
android:layout_marginBottom="72dp"
android:clickable="false"
android:visibility="invisible" />

<Button
android:id="@+id/Dummy3"
android:layout_width="40dp"
android:layout_height="40dp"
android:layout_marginBottom="72dp"
android:clickable="false"
android:visibility="invisible" />

<Button
android:id="@+id/Button7"
android:layout_width="40dp"
android:layout_height="40dp"
android:layout_marginBottom="72dp"
android:text="@string/button_label"
android:textSize="15dp" />

<Button
android:id="@+id/Button8"
android:layout_width="40dp"
android:layout_height="40dp"
android:layout_marginBottom="72dp"
android:text="@string/button_label"
android:textSize="15dp" />

<Button
android:id="@+id/Button9"
android:layout_width="40dp"
android:layout_height="40dp"
android:layout_marginBottom="72dp"
android:text="@string/button_label"
android:textSize="15dp"/>

<Button
android:id="@+id/Dummy4"
android:layout_width="40dp"
android:layout_height="40dp"
android:layout_marginBottom="72dp"
android:clickable="false"
android:visibility="invisible" />

<Button
android:id="@+id/Dummy5"
android:layout_width="40dp"
android:layout_height="40dp"
android:layout_marginBottom="72dp"
android:clickable="false"
android:visibility="invisible" />

</LinearLayout>

<LinearLayout
android:layout_width="40dp"
android:layout_height="40dp" 
android:layout_marginLeft="20dp">

<Button
android:id="@+id/pickButton"
android:layout_width="40dp"
android:layout_height="40dp"
android:layout_marginBottom="72dp"
android:text="@string/button_label"
android:textSize="15dp"/>

<Button
android:id="@+id/showButton" 
android:layout_width="40dp"
android:layout_height="40dp"
android:layout_marginBottom="72dp"
android:text="@string/button_label"
android:textSize="15dp"/>

<Button
android:id="@+id/emptyButton"
android:layout_width="40dp"
android:layout_height="40dp"
android:layout_marginBottom="72dp"
android:text="@string/empty"
android:textSize="15dp" />

<Button
android:id="@+id/emptyButton1"
android:layout_width="40dp"
android:layout_height="40dp"
android:layout_marginBottom="72dp"
android:text=""
android:textSize="15dp" />

<Button
android:id="@+id/dropButton"
android:layout_width="40dp"
android:layout_height="40dp"
android:layout_marginBottom="72dp"
android:text="@string/drop"
android:textSize="15dp"/>

<Button
android:id="@+id/declareButton"
android:layout_width="40dp"
android:layout_height="40dp"
android:layout_marginBottom="72dp"
android:text="@string/declare"
android:textSize="15dp"/>

</LinearLayout>
</TableLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T20:55:52.740

你应该添加一个`onClickListener`到你的`Button`：

```
btn.setOnClickListener(Play.this); 
```

# c - 创建没有 -fms-extensions 的“嵌套结构”？

> ID：14113522
> 
> 赞同：1
> 
> 时间：2013-01-01T19:31:10.423
> 
> 标签：c, struct, c11

我有一个具有一些属性的结构：

```
struct a {
    char* id;
    int a;
    int b;
    int c;
} 
```

我也有一个具有相同属性的结构，但没有`id`.

```
struct b {
    int a;
    int b;
    int c;
} 
```

我知道 C11 支持匿名结构，所以我可以这样做：

```
struct a {
    char* id;
    struct {
        int a;
        int b;
        int c;
    }
} 
```

但是，如果我给内部结构一个标签，它就会失败。是否可以在不使用非标准编译器选项的情况下创建这样的嵌套结构`-fms-extensions`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:33:15.080

您可以在 C11 中为内部结构命名或标记或两者兼而有之（即，不使用任何扩展名）。

没有标签也没有名字，你的内部结构是一个 C11 匿名结构：

```
struct a {
    char* id;
    struct {
        int a;
        int b;
        int c;
    };
 }; 
```

如果你给内部匿名结构一个名字，它就不再是一个匿名结构。它是一个常规的 C89/C99/C11 结构成员，您不能像使用匿名结构一样直接访问内部结构成员。

如果你给内部匿名结构一个标签（但仍然没有名字），它只是一个 C89/C99/C11 结构声明。没有添加成员，声明`struct a`同：

```
struct a {
    char* id;
}; 
```

# java - Java 反映 getConstructor NoSuchMethodException 错误

> ID：14113523
> 
> 赞同：1
> 
> 时间：2013-01-01T19:31:47.810
> 
> 标签：java, reflection, getconstructor

我有一个名为`ICwsTransactionProcessing_Capture_CWSInvalidOperationFaultFault_FaultMessage`如下定义的类

```
public class ICwsTransactionProcessing_Capture_CWSInvalidOperationFaultFault_FaultMessage
        extends java.lang.Exception {

    private static final long serialVersionUID = 1354218639401L;

    public ICwsTransactionProcessing_Capture_CWSInvalidOperationFaultFault_FaultMessage() {
        super("ICwsTransactionProcessing_Capture_CWSInvalidOperationFaultFault_FaultMessage");
    }

    public ICwsTransactionProcessing_Capture_CWSInvalidOperationFaultFault_FaultMessage(
            java.lang.String s) {
        super(s);
    }

    public ICwsTransactionProcessing_Capture_CWSInvalidOperationFaultFault_FaultMessage(
            java.lang.String s, java.lang.Throwable ex) {
        super(s, ex);
    }

    public ICwsTransactionProcessing_Capture_CWSInvalidOperationFaultFault_FaultMessage(
            java.lang.Throwable cause) {
        super(cause);
    }
} 
```

我正在尝试做

```
java.lang.String exceptionClassName = (java.lang.String)faultExceptionClassNameMap.get(new org.apache.axis2.client.FaultMapKey(faultElt.getQName(),"Capture"));
                    LOGGER.debug("ExceptionClassName"+exceptionClassName);
                    java.lang.Class exceptionClass = java.lang.Class.forName(exceptionClassName);
                    java.lang.reflect.Constructor constructor = exceptionClass.getConstructor(String.class); 
```

从哪里来`exceptionClass`的`ICwsTransactionProcessing_Capture_CWSInvalidOperationFaultFault_FaultMessage`日志。

我越来越`NoSuchMethodException`。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:41:45.750

This was a Axis2 bug in the client stub code generated by wsdl2java .

[https://issues.apache.org/jira/browse/AXIS2-5420](https://issues.apache.org/jira/browse/AXIS2-5420)

The String class used in the generated code should have been java.lang.String but since the WSDL import was using microsoft serialized types, Axis2 had generated an inner class by name String.

The correct code generation should have used `java.lang.String` for the constructor reflection parameters.

It was a bit difficult to spot because the generated stub has 200k+ lines.

The bug is fixed in the unreleased Axis2 1.6.3 and 1.7 branches.

Thank you all for the help.

# date - 使用单独的日、月和年框选择日期

> ID：14113525
> 
> 赞同：0
> 
> 时间：2013-01-01T19:31:52.547
> 
> 标签：date, jsf-2, drop-down-menu, custom-component

我正在制作一个 Java EE + EJB + JSF Web 应用程序，我想在我的注册表中使用 3 个选择框来选择出生日期（1 天，1 月和 1 年），就像在 Facebook 上一样。

当然，选择的日期必须是有效的，例如，如果有人选择 2009 年 2 月，则选择的天数范围只能是 1-28。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T20:23:55.833

为此，我会考虑使用组件库。为了避免自己实施所有验证检查。主要的 jsf 组件库具有与您想要的类似的东西。

[这](http://www.primefaces.org/showcase/ui/calendarTime.jsf)是一个接近您想要的组件的 primefaces 示例。

[这](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=calendar&skin=blueSky)是一个丰富的例子

# javascript - 从另一个数组创建一个新数组

> ID：14113529
> 
> 赞同：3
> 
> 时间：2013-01-01T19:32:53.820
> 
> 标签：javascript, jquery, arrays, loops, multidimensional-array

我有两个数组。第一个包含地点和一些关于它们的信息。它是一个多维数组，分三步：

*   第 1 步：类别（例如标题、日期等）。
*   第二步：实际地点
*   第三步：经纬度（类别坐标下）

    ```
    places[0][0] = 'Stockholm';     // Header
    places[0][1] = 'Karlstad';
    places[0][2] = 'Borgholm';
    places[1][0] = '2012-05-25';    // Date
    places[1][1] = '2012-06-12';    
    places[1][2] = '2012-05-14'
    places[2][0] = 'Lorum ipsum lorum ipsum lorum ipsum';       // Description
    places[2][1] = 'Ipsum lorum lorum ipsum lorum ipsum';
    places[2][2] = 'Forum Lorum Porum';
    places[3][0][0] = '56,123342';      // Latitude
    places[3][0][1] = '49,123123';      // Longitude
    places[3][1][0] = '23,543231';
    places[3][1][1] = '45,955432';
    places[3][2][0] = '34,123459';
    places[3][2][1] = '45,325198';
    ...and so on... 
    ```

第二个数组包含搜索结果，即匹配搜索的地点。我想要做的是使用第一个数组中的信息创建一个新数组，但仅限于第二个数组中的元素（因此在上面的示例中，只有地方 [1] ('Karlstad') 应该在新的大批。

我还希望新数组具有新结构。而不是第一级的类别，我想要第一级的位置（参见下面的示例）。

```
results = [1, 15, 17, 19, 32, 91, 102, 103];

newPlaces[0][0] = 'Karlstad';
newPlaces[1][0] = 'Kalmar';
newPlaces[2][0] = 'Luleå';
newPlaces[3][0] = 'Överkalix';
newPlaces[4][0] = 'Malmö';
newPlaces[5][0] = 'Ystad';
newPlaces[6][0] = 'Linköping'
...and so on... 
```

最好和最简单的方法是什么？我想我应该使用 for 循环，如下所示（这不起作用）？

```
for (var i = 0; i < results.length; i++) {
    newPlaces[i][0] = places[0][results[i]];
    newPlaces[i][1] = places[1][results[i]];
    newPlaces[i][2] = places[2][results[i]];
    newPlaces[i][3] = places[3][results[i]];
} 
```

提前非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T19:52:24.907

要添加到@Levi 的答案，您还可以使用 ES5 地图：

**使用原生 Array.prototype.map：**

```
newPlaces = results.map(function(result) {
    return [
        places[0][result],
        places[1][result],
        places[2][result],
        places[3][result]
    ];
}); 
```

**使用手工地图：**

感谢 Marcus 在下面的评论中指出了原生地图的性能问题。

显然，对此的替代方案是一个自定义版本的映射，它掩盖了 for 循环。到目前为止，它似乎比简单地使用 for 循环做得好一点，但我没有解释为什么，也没有关系。

```
// Custom map function
function map(arr, func) {
    var newArr = [];
    var cnt = arr.length;
    var arrLen = arr.length;
    for (; cnt; cnt--) {
       newArr.push(func(arr[arrLen - cnt]));    
    }
    return newArr;
}

newPlaces = map(results, function(result) {
    return [
        places[0][result],
        places[1][result],
        places[2][result],
        places[3][result]
    ];
}); 
```

显然，代码仍然和使用原生地图一样干净，但性能提升了十倍。它也比 for 循环稍微快一点。

这是一个使用各种方法执行 1M 次迭代的小提琴：

[http://jsfiddle.net/6wArq/3/](http://jsfiddle.net/6wArq/3/)

编辑：

顺便说一句，对于那些甚至没有 的浏览器`Array.prototype.map`，您可以使用[ES5 shim](https://github.com/kriskowal/es5-shim)来添加此功能。

编辑2：

查看MDN 上的[文档。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)`Array.prototype.map`

编辑3：

好的，自定义地图并不比 for 循环快，所以假设它的性能也一样好。

编辑4：

自定义地图的最终版本使其执行速度始终比增加计数器的常用 for 循环更快。我假设递减计数器的 for 循环的性能与最终的自定义映射函数一样好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T19:44:53.183

考虑到您拥有的多维结构，for 循环可能是最简单的。你只需要声明你的变量，并添加一些简写，以便于阅读代码。这应该这样做：

```
var newPlaces = [];
for (var i = 0; i < results.length; i++) {
    var id = results[i]
    newPlaces[i] = [
        places[0][id], 
        places[1][id],
        places[2][id],
        places[3][id],
        places[4][id]
    ];
} 
```

由于您使用 jQuery 标记了它，因此您可以使用[jQuery.each](http://api.jquery.com/jQuery.each/)使您的代码更简单一些（但不像@Marcus Ekwall 提到的那样性能降低 > 90%）：

```
var newPlaces = [];
$.each(results, function(i, id) {
    newPlaces[i] = [
        places[0][id], 
        places[1][id],
        places[2][id],
        places[3][id],
        places[4][id]
    ];
}); 
```

重要时请牢记性能。jQuery 非常方便，可以让您更快/更轻松地编写代码，但如果您不小心，它确实会降低您的网站/应用程序的速度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T19:52:10.247

这个怎么样：

```
var places = [ ];

...

var newPlaces = [ ];
var placesArray;

for (var i = 0; i < places[0].length; i++) // loop through the headers first
{
  placesArray = [ ];

  for (var j = 0; j < places.length; j++) // make sure we loop through the other properties too
  {
    placesArray.push(
      places[j][i]
    );
  }

  newPlaces.push(
    placesArray
  );
}

console.log(places, placesArray); 
```

至少通过这种方式，您将不受阵列大小的限制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T20:29:11.297

我怀疑您可能遇到困难的原因在于您滥用数组。很简单，这里使用的数据结构不正确。信息可以用 JSON 更合乎逻辑地表示。

```
var places = [
    {
        "Header": "Stockholm",
        "Date": "2012-05-25",
        "Description": "Lorum ipsum lorum ipsum lorum ipsum",
        "Latitude": "56,123342",
        "Longitude": "49,123123"
    },
    {
        "Header": "Karlstad",
        "Date": "2012-06-12",
        "Description": "Lorum ipsum lorum ipsum lorum ipsum",
        "Latitude": "23,543231",
        "Longitude": "45,955432"
    }
];​ 
```

然后你的`for`循环很简单：

```
var newPlaces = [];
for (var i = 0; i < results.length; i++) {
    newPlaces[i] = places[results[i]];
} 
```

它产生了一个简单的地点对象集合，与上面的形式相同。

# php - 如何将 GET 链接到 GET？

> ID：14113532
> 
> 赞同：0
> 
> 时间：2013-01-01T19:33:02.187
> 
> 标签：php

我有以下代码：

```
 <?php echo "<a href='".get_permalink()."'>get_the_title()"' /></a>";}?> 
```

我正在尝试将 get_the_title() 链接到 .get_permalink() GET。我究竟做错了什么？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:40:42.607

假设您的 2 个函数返回有效的内容：

```
<?php
    $plink = get_permalink();
    $title = get_the_title();
    echo "<a href='{$plink}'>{$title}</a>";
 ?> 
```

我认为这就是你想要的，保存变量比匿名保存更好。您的语句末尾还有一个“}”。也许分享 php 运行时错误或者这是一个逻辑错误？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T19:34:46.400

```
echo '<a href="'.get_perma_link().'">'.get_the_title().'</a>'; 
```

输出 HTML 时使用单引号！

# arrays - 具有恒定负载因子的尝试与存储桶数组的预期性能

> ID：14113533
> 
> 赞同：3
> 
> 时间：2013-01-01T19:33:06.180
> 
> 标签：arrays, performance, complexity-theory, trie

我知道如果我有均匀分布的整数键或可以映射到均匀分布的整数的键，我可以简单地将桶数组用于关联容器。如果我可以创建足够大的数组以确保某个负载因子（假设集合不是太动态），那么键的预期冲突次数将是有限的，因为这只是具有身份哈希函数的哈希表。

**编辑：**我认为字符串等同于 [0..1] 范围内的位置分数。因此，它们可以通过乘法和取结果映射到任何整数范围。

我也可以有效地进行前缀查询，就像尝试一样。我假设（不知道证明）与给定前缀相对应的空槽的预期数量必须在到达具有至少一个元素的第一个桶之前按顺序跳过也将受到常数的限制（再次取决于选择的负载系数）。

当然，我可以在最坏情况下的常数时间内进行 stabbing 查询，并在仅输出敏感的线性预期时间的范围内查询（如果上一段中的密集猜想确实是真的）。

那么尝试的好处是什么？

如果分布是均匀的，我看不到任何尝试做得更好的东西。但我可能错了。

如果分布具有较大的未补偿偏斜（因为我们没有先验概率或仅查看最坏情况），则桶数组的性能很差，但尝试也会变得严重不平衡，并且可以在任意长度的字符串中具有线性的最坏情况性能。因此，对您的数据使用任何一种结构都是值得怀疑的。

所以我的问题是 -*在可以正式证明的桶数组上尝试的性能优势是什么？什么样的分布会带来这些优势？*

我正在考虑在不同尺度上具有自相似结构的分布。我相信那些被称为分形分布，我承认对此一无所知。可能是这样，如果分布倾向于在每个规模上聚集，尝试可以提供卓越的性能，通过保持每个节点的负载因子相似，根据需要在密集区域添加级别 - 这是桶阵列无法做到的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T19:59:18.083

如果您的字符串共享公共前缀，则尝试很好。在这种情况下，前缀只存储一次，并且可以在输出字符串长度中以线性性能进行查询。在存储桶数组中，具有相同前缀的所有字符串最终会在您的键空间中靠得很近，因此您的负载非常倾斜，其中大多数存储桶是空的，有些是巨大的。

`t`更一般地说，如果特定模式（例如字母和`h`一起）经常出现，尝试也很好。如果有很多这样的模式，则 trie 的树节点的顺序通常会很小，并且几乎不会浪费存储空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T23:00:26.033

我能想到的尝试的优点之一是插入。桶数组可能需要在某些时候调整大小，这是一项昂贵的操作。所以最坏情况下插入 trie 的时间比插入桶数组要好得多。

另一件事是您需要将字符串映射到要与桶数组一起使用的分数。所以如果你有短键，理论上trie会更高效，因为你不需要做映射。

# cakephp - 使用 Session 的 CakePHP 保存模型

> ID：14113544
> 
> 赞同：1
> 
> 时间：2013-01-01T19:35:05.847
> 
> 标签：cakephp, cakephp-2.0, session-variables

我将表单数据保存在会话中，并尝试使用会话数组保存到名为 Property 的模型中。请看下面的数组。我认为这与 Session 数组有关，但我不确定。

当我尝试像这样保存时，它不会保存：

```
$this->Property->save($propertyData)  where $propertyData is the property array. 
```

sql_dump：

```
INSERT INTO `fra`.`properties` (`type`, `address`, `city`, `state`, `zip`, `price`, `bed_rooms`, `bath_rooms`, `lot_size_sq_ft`) 
VALUES ('0', '2720 Acapulco way', 'modesto', 'ca', '95355', 310000, 4, 3, 6040) 
```

会话数组是：

```
Array
(
[house_details] => Array
    (
        [form] => Array
            (
                [section] => house_details
            )

        [Property] => Array
            (
                [type] => 0
                [address] => 2720 Acapulco way
                [city] => modesto
                [state] => ca
                [zip] => 95355
                [price] => 310000
                [prop_year_build] => 2007
                [prop_year_remodel] => 
                [bed_rooms] => 4
                [bath_rooms] => 3
                [garage_spaces] => 3
                [lot_size_sq_ft] => 6040
                [house_size_sq_ft] => 3720
                [stories] => 2
                [condition_rating] => 8
            ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:15:57.197

您应该能够非常简单地做到这一点。您可能会遇到`$propertyData`设置为错误的问题，因此它没有为模型保存提供有效值。

如果你这样做，你会得到什么`debug($propertyData)`？

这行得通吗？

```
$propertyData = $this->Session->read('house_details.Property');
$this->Property->save(propertyData); 
```

# cuda - cufft-fftw 复杂到实际转换的周期性差异问题

> ID：14113549
> 
> 赞同：2
> 
> 时间：2013-01-01T19:35:21.430
> 
> 标签：cuda, fft, c99, fftw

对于我的论文，我必须使用 CUDA 优化一个特殊的 MPI-Navier Stokes-Solver 程序。原始程序使用 FFTW 求解多个偏微分方程。详细地说，几个上三角矩阵在二维中进行了傅立叶变换，但作为一维数组处理。目前，我正在努力处理部分原始代码：（N 始终设置为 64）

原来的：

```
//Does the complex to real in place fft an normalizes
void fftC2R(double complex *arr) {
  fftw_execute_dft_c2r(plan_c2r, (fftw_complex*)arr, (double*)arr);
  //Currently ignored: Normalization
  /*  for(int i=0; i<N*(N/2+1); i++)
arr[i] /= (double complex)sqrt((double complex)(N*N));*/
}

void doTimeStepETDRK2_nonlin_original() {
      //calc velocity
      ux[0] = 0;
      uy[0] = 0;

      for(int i=1; i<N*(N/2+1); i++) {
         ux[i] =  I*kvec[1][i]*qvec[i] / kvec[2][i];
         uy[i] = -I*kvec[0][i]*qvec[i] / kvec[2][i];
      }

      fftC2R(ux);
      fftC2R(uy);

      //do some stuff here...
      //...
      return;
} 
```

其中 ux 和 uy 被分配为（双复数数组）：

```
ux = (double complex*)fftw_malloc(N*(N/2+1) * sizeof(double complex));
uy = (double complex*)fftw_malloc(N*(N/2+1) * sizeof(double complex)); 
```

fft 计划创建为：

```
plan_c2r = fftw_plan_dft_c2r_2d(N, N,(fftw_complex*) qvec, (double*)qvec, FFTW_ESTIMATE); 
```

其中 qvec 的分配方式与 ux 和 uy 相同，并且数据类型为 double complex。

以下是 CUDA 代码的相关部分：

```
NN2_VecSetZero_and_init<<<block_size,grid_size>>>();
cudaSafeCall(cudaDeviceSynchronize());
cudaSafeCall(cudaGetLastError());

int err = (int)cufftExecZ2D(cu_plan_c2r,(cufftDoubleComplex*)sym_ux,(cufftDoubleReal*)sym_ux);

if (err != CUFFT_SUCCESS ) {
    exit(EXIT_FAILURE);
    return;
}

err = (int)cufftExecZ2D(cu_plan_c2r,(cufftDoubleComplex*)sym_uy,(cufftDoubleReal*)sym_uy);

if (err != CUFFT_SUCCESS ) {
    exit(EXIT_FAILURE);
    return;
}

//do some stuff here...
//...
return; 
```

其中 sim_ux 和 sim_uy 分配为：

```
cudaMalloc((void**)&sym_ux, N*(N/2+1)*sizeof(cufftDoubleComplex));
cudaMalloc((void**)&sym_uy, N*(N/2+1)*sizeof(cufftDoubleComplex)); 
```

相关袖带部分的初始化看起来像

```
if (cufftPlan2d(&cu_plan_c2r,N,N, CUFFT_Z2D) != CUFFT_SUCCESS){
    exit(EXIT_FAILURE);
    return -1;
}

if (cufftPlan2d(&cu_plan_r2c,N,N, CUFFT_D2Z)  != CUFFT_SUCCESS){
    exit(EXIT_FAILURE);
    return -1;
}

if ( cufftSetCompatibilityMode ( cu_plan_c2r , CUFFT_COMPATIBILITY_FFTW_ALL) != CUFFT_SUCCESS ) {
    exit(EXIT_FAILURE);
    return -1;
}

if ( cufftSetCompatibilityMode ( cu_plan_r2c , CUFFT_COMPATIBILITY_FFTW_ALL) != CUFFT_SUCCESS ) {
    exit(EXIT_FAILURE);
    return -1;
} 
```

所以我使用完整的 FFTW 兼容性，并使用 FFTW 调用模式调用每个函数。当我运行这两个版本时，我收到的 ux 和 uy（sim_ux 和 sim_uy）的结果几乎相同。但是在数组的周期性位置，Cufft 似乎忽略了这些元素，其中 FFTW 将这些元素的实部设置为零并计算复杂部分（数组太大，无法在此处显示）。发生这种情况的步数为 N/2+1。所以我相信，我并不完全理解 Cufft 和 FFTW 之间的 fft-padding 理论。在调用 Cufft-executions 之前，我可以排除这些数组之间的任何以前的差异。所以上面代码的任何其他数组在这里都不相关。
我的问题是：我是否过于乐观地使用几乎 100% 的 FFTW 调用方式？我必须在 ffts 之前处理我的数组吗？Cufft 文档说，我必须调整数据输入和输出数组的大小。但是，当我运行就地转换时，我该怎么做呢？我真的不想离原始代码太远，我不想为每个 fft 调用使用更多的复制指令，因为内存是有限的，并且数组应该尽可能长时间地在 gpu 上保留和处理。

我感谢每一个提示、批判性陈述或想法！

我的配置：

*   编译器：gcc 4.6（C99 标准）
*   MPI-Package：mvapich2-1.5.1p1（不应该发挥作用，因为减少了单处理调试模式）
*   CUDA 版本：4.2
*   GPU：CUDA-arch-compute_20（NVIDIA GeForce GTX 570）
*   FFTW 3.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:13:34.607

一旦我不得不使用CUFFT，我唯一的解决方案就是独家使用“cu_plan_c2c”——实数和复数数组之间有简单的转换：

- 用 0 填充复杂部分以模拟 cu_plan_r2c

- 在复杂结果上使用 atan2（不是 atan）来模拟 cu_plan_c2r

很抱歉没有为您指出任何更好的解决方案，但这就是我最终解决此问题的方式。希望你不会陷入低内存 cpu 方面的任何困难......

# node.js - 我的摩卡测试单独工作，但一次运行时失败

> ID：14113550
> 
> 赞同：5
> 
> 时间：2013-01-01T19:35:30.683
> 
> 标签：node.js, coffeescript, mongoose, mocha.js

这可能与异步代码有关，但我不确定是什么。当我将它们分开运行时，两者都通过了：`mocha test/models.coffee`和`mocha test/login.coffee`

但是`describe 'saving another user with same username', ->`当我与`npm test`. 我想数据库在运行该步骤时会被清除，因此它会保存而不是产生错误，因为它应该是一个唯一值。

另外：我对这个软件测试非常陌生，如果有人有任何提示，或者想批评我的公然错误，请随时给我发电子邮件（查看我的个人资料）

谢谢！！

这是我的两个测试文件（coffeescript）：

`/test/models.coffee`

```
should = require 'should'
{User} = require '../models'

# function to find our test user, John Egbert
findJohn = (cb) ->
  User.findOne {'public.username': 'john'}, (err, john) ->
    throw err if err
    cb(john)

before (done) ->

  # Drop all users from database
  User.collection.drop()

  # Create our test user, his username is John Egbert
  User.create
    password: 'test123'
    public: {username: 'john'}, done

describe 'create user', ->
  it 'should create a document that can be found', (done) ->
    findJohn (user) ->
      should.exist user
      done()

describe 'user password', ->
  it 'should NOT be stored in plaintext', (done) ->
    findJohn (user) ->
      user.password.should.not.eql 'test123'
      done()

  it 'should return true for matching password', (done) ->
    findJohn (user) ->
      user.comparePassword 'test123', (err, isMatch) ->
        isMatch.should.eql true
        done()

  it 'should return false for non-matching password', (done) ->
    findJohn (user) ->
      user.comparePassword 'wrong_password', (err, isMatch) ->
        isMatch.should.not.eql true
        done()

describe 'saving another user with same username', ->
  it 'should produce an error', (done) ->
    User.create public: {username: 'john'}, (err) ->
      should.exist err
      done() 
```

`/test/login.coffee`：

```
should = require 'should'
{User} = require '../models'
login = require '../services/login'

before (done) ->

  # Drop all users from database
  User.collection.drop()

  # Create our test user, his username is John Egbert
  User.create
    password: 'test123'
    public: {username: 'john'}, done

describe 'login', ->
  it 'should return true for an existing username/password combo', (done) ->
    login username: 'john', password: 'test123', (err, loggedIn) ->
      should.not.exist(err)
      loggedIn.should.be.true
      done()

  it 'should return false for a bad username/password combo', (done) ->
    login username: 'john', password: 'wrong_pass', (err, loggedIn) ->
      should.not.exist(err)
      loggedIn.should.be.false
      done() 
```

和`/models.coffee`

```
fs = require 'fs'
path = require 'path'
mongoose = require 'mongoose'

#Connect to mongodb
#TODO: env variable to choose production/development/testing databases
mongoose.connect 'localhost', 'siglr'

models = {}

for file in fs.readdirSync './schemas'
  if path.extname(file) is '.coffee'
    modelName = path.basename file, '.coffee'
    schema = require "./schemas/#{modelName}"
    models[modelName] = mongoose.model modelName, schema

# key is model name, value is actual mongoose model
module.exports = models 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T21:16:43.217

这是一件事，它可能会创造出让你发疯的比赛条件。删除用户集合时，您没有传递回调。我不能确定这是否会导致问题，例如在删除集合之前插入测试用户，但是这种未能正确使用回调来等待异步操作完成的模式是您的程序的秘诀以难以调试的方式行为不端。试试这个：

```
before (done) ->

    # Drop all users from database
    User.collection.drop (err) ->

        # Create our test user, his username is John Egbert
        User.create
            password: 'test123'
            public: {username: 'john'}, done 
```

第二个建议：在调用之前将`console.log`语句放在每个和另一个语句的开头（第一个语句），看看它们是否完全按照您期望的顺序出现。`describe/before/it``done()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T22:39:34.900

我发现由于某种原因，在`public.username`与`npm test`. 但是在单独运行每个测试时保持不变。

我更改了以下内容`test/models.coffee`：

```
 # Create our test user, his username is John Egbert
  User.create
    password: 'test123'
    public: {username: 'john'}, done 
```

到以下：

```
 # Create our test user, his username is John Egbert
  User.create
    password: 'test123'
    public: {username: 'john'}, ->
      User.collection.ensureIndex { 'public.username': 1 }, { unique: true }, (err) ->
        throw err if err
        done() 
```

...它调用[ensureIndex](http://mongoosejs.com/docs/api.html#collection_Collection-ensureIndex)一个内部猫鼬函数，该函数[在模型最初编译时](http://mongoosejs.com/docs/2.7.x/docs/indexes.html)被调用，但在测试的生命周期中由于某种原因被删除。

使用猫鼬 3.5.4

# memory-leaks - 自定义 ClassLoader 没有被垃圾收集

> ID：14113554
> 
> 赞同：1
> 
> 时间：2013-01-01T19:36:26.337
> 
> 标签：memory-leaks, garbage-collection, classloader, openjpa, glassfish-2.x

为了解决[这个问题](https://stackoverflow.com/questions/13778822/classloader-is-not-garbage-collected-even-without-gc-roots)，我构建了一个（非常）小的[项目](http://dev.sai-erp.net/classloader-leak.zip)来复制它的一部分。这是一个使用 Glassfish v2.1.1 和 OpenJpa-1.2.2 的 NetBeans 项目。

在全球范围内，目标是能够动态地重新加载一些业务代码（称为“任务”），而无需（重新）进行完整部署（例如通过 asadmin）。在项目中有两个：PersonTask 和 AddressTask，它们只是简单地访问一些数据并将它们打印出来。

为了做到这一点，我实现了一个自定义类加载器，它读取类文件的二进制文件并通过`defineClass`方法注入它。基本上，这个 CustomClassLoader 是一个单例，实现如下：

```
public class CustomClassLoader extends ClassLoader {
    private static CustomClassLoader instance;
    private static int staticId = 0;
    private int id; //for debugging in VisualVM
    private long threadId; //for debugging in VisualVM

    private CustomClassLoader(ClassLoader parent) {
        super(parent);
        threadId = Thread.currentThread().getId();
        id = staticId;
        ++staticId;
    }

    private static CustomClassLoader getNewInstance() {
        if (instance!=null) {
            CustomClassLoader ccl = instance;
            instance = null;

            PCRegistry.deRegister(ccl); //https://issues.apache.org/jira/browse/GERONIMO-3326
            ResourceBundle.clearCache(ccl); //found some references in there while using Eclipse Memory Analyzer Tool
            Introspector.flushCaches(); //http://java.jiderhamn.se/category/classloader-leaks/

            System.runFinalization();
            System.gc();
        }

        ClassLoader parent = Thread.currentThread().getContextClassLoader();
        instance = new CustomClassLoader(parent);
        return instance;
    }

    //...
 } 
```

```
//this class is included in the EAR like a normal class
public abstract class AbstractTask {
    protected Database database; /* wrapper around the EntityManager, filled when instance is created */
    public abstract void process(Integer id);
}

//this one is dynamically loaded by the CustomClassLoader
public class PersonTask extends AbstractTask {
    @Override
    public void process(Integer id) {
        //keep it empty for now
    }
} 
```

在我的 EJB 外观 (EntryPointBean) 中，我只需查找类，创建它的新实例并调用它的`process`方法。项目中的代码略有不同，但思路大同小异：

```
CustomClassLoader loader = CustomClassLoader.getNewInstance();
Class<?> clazz = loader.loadClass("ch.leak.tasks.PersonTask");
Object instance = clazz.newInstance();
AbstractTask task = (AbstractTask)instance;

/* inject a new Database instance into the task */

task.process(...); 
```

到现在为止，一切都很好。如果此代码多次运行（通过`ch.leak.test.Test`），则在完成堆分析时将只有一个 CustomClassLoader 实例，这意味着之前的实例已成功收集。

现在，这是触发泄漏的行：

```
public class PersonTask extends AbstractTask {
    @Override
    public void process(Integer id) {
        Person p = database.getEntity("SELECT p FROM Person p WHERE p.personpk.idpk=?1", new Long(id));
        //...
    }
} 
```

这种对数据库的简单访问有一个奇怪的结果：*第*一次运行代码时，所使用的 CustomClassLoader 永远不会被垃圾收集（即使没有任何 GC 根）。但是，所有进一步创建的 CustomClassLoader 都不会泄漏。

正如我们在下面的转储中看到的（使用 VisualVM 完成），实例 id 为 0 的 CustomClassLoader 永远不会被垃圾收集...... ![CustomClassLoader 没有被垃圾收集](../Images/cef0e46535259aef8b9e7de946d82b32.png)

最后，我在探索堆转储时看到的另一件事：我的实体在 PermGen 中声明了两次，其中一半没有实例，也没有 GC 根（但它们没有链接到 CustomClassLoader）。 ![在此处输入图像描述](../Images/6aadc1ad4041b6c333b6a00487434d46.png)

似乎 OpenJPA 与这些泄漏有关......但我不知道在哪里可以搜索关于我做错了什么的更多信息。我还将堆转储直接放入项目的 zip 中。有人有想法吗？

谢谢 ！

# ruby - Ramaze 相当于 Sinatra 的 Sinatra::NotFound 是什么？

> ID：14113555
> 
> 赞同：2
> 
> 时间：2013-01-01T19:36:29.330
> 
> 标签：ruby, ramaze

换句话说，我如何在 Ramaze 中抛出“404 - not found”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T20:49:03.990

您可以使用包含在控制器中的`Innate::Helper::Redirect#respond`( [source](https://github.com/Ramaze/innate/blob/master/lib/innate/helper/redirect.rb) ) 方法来返回任何响应：

```
def my_action    
  respond("Response body", 404)
end 
```

# ram - 如何通过给定的地址范围计算内存的容量？

> ID：14113556
> 
> 赞同：1
> 
> 时间：2013-01-01T19:36:43.060
> 
> 标签：ram, memory-address

我有另一个我无法解决的练习，

由两个内存模块（RAM）组成的中央存储器。归属于中央存储器的总地址范围为：FROM 0000 0000H TO 3FFF FFFFH

1/给出中央存储器的总容量（兆字节和千兆字节）

2/给出每个内存模块的容量（RAM）

3/给出每个内存模块（RAM）的首尾地址

抱歉翻译不好，练习是法语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T19:40:18.937

嗯，1 很简单。从 0000 0000H 到 3FFF FFFFH 的范围包含 4000 0000H 地址。（就像 0 到 3 是四个地址，0、1、2 和 3。） 4000 0000H 是十进制的 1,073,741,824，即 1GB。1,024 MB。

2没有问题。如果两个内存模块给 1GB，那么每个模块必须是 512MB。

3是不可能的。我们不知道内存模块是连续的还是交错的。但是如果我们假设它们是连续的，我想这是练习要我们做的，那么第一个必须是 0000 0000H 到 1FFF FFFFH，第二个必须是 2000 0000H 到 3FFF FFFFH。

请注意，连续映射内存模块通常被认为是愚蠢的。这意味着在内存模块带宽是限制因素的典型情况下，如果应用程序只使用前半部分内存，那么它只使用两个模块中的一个，浪费了一半的可用内存带宽。（不过，在内存与 CPU 或其内存总线一样快或更快的不太常见的情况下，这并不重要。）

# mysql - 获取数据库中的最后 5 行并按 ASC 排序

> ID：14113557
> 
> 赞同：0
> 
> 时间：2013-01-01T19:36:54.570
> 
> 标签：mysql, sql, codeigniter, limit

如何获取数据库中的最后 5 行并将其升序排序？这是我的代码：

```
$this->query("
    SELECT  `chat`.`message`,
            `users`.`username`,
            `users`.`user_id`
    FROM    `chat`
    JOIN    `users`
    ON      `chat`.`user_id` = `users`.`user_id`
    ORDER BY `chat`.`timestamp`
    DESC
    LIMIT 5
"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T19:44:38.740

```
select * from (
    SELECT  `chat`.`message`,
            `users`.`username`,
            `users`.`user_id`,
            `chat`.`timestamp`
    FROM    `chat`
    JOIN    `users`
    ON      `chat`.`user_id` = `users`.`user_id`
    ORDER BY `chat`.`timestamp`
    DESC
    LIMIT 5
) 
order by timestamp asc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T19:48:44.917

我认为这是codeigniter，所以检索数组中的数据并向后循环。否则修改您的查询以选择升序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T20:33:09.820

如果您使用 CodeIgniter Active Record，请更改：

```
$this->query 
```

至

```
$this->db->query 
```

# c# - 您要在 c# 中获取 Windows 安装 SID？

> ID：14113558
> 
> 赞同：4
> 
> 时间：2013-01-01T19:37:08.000
> 
> 标签：c#, windows, sid

我知道这个问题在 SO 上已经被问过很多次了，但没有一个回答我的问题。我从 Comptiat A+ 的研究中了解到，在使用自动（无人值守）安装时，技术人员总是必须返回并更改 MACHINE SID，然后才能在每台机器上激活操作系统。似乎有很多关于如何通过网络获取 SID 等问题，但我知道还有一个机器 SID 无法更改。对于那些使用过 Fix-It Utilities 启动盘的人来说，有一个按钮，“更改 SID”，如果它已经激活，它将导致 Windows 无法启动。

我的问题与[此](http://www.vistax64.com/net-general/219735-how-do-i-get-machine-sid-c.html)类似，但他的问题从未真正得到回答。我的问题是，如何使用 c# 获取 MACHINE Windows 安装 SID。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-01T19:41:05.830

好吧，这取决于您想要哪个计算机 SID（说真的！）。有本地计算机自己使用的SID...为此，您只需要获取本地Administrator用户的SID，并从末尾删除“-500”即可获取计算机的SID。

**在 .NET 3.5 上的 C# 中：**

```
using System;
using System.Security.Principal;
using System.DirectoryServices;
using System.Linq;
public static SecurityIdentifier GetComputerSid()
{
    return new SecurityIdentifier((byte[])new DirectoryEntry(string.Format("WinNT://{0},Computer", Environment.MachineName)).Children.Cast<DirectoryEntry>().First().InvokeGet("objectSID"), 0).AccountDomainSid;
} 
```

另一方面，Active Directory 使用 SID 来识别每台域成员计算机……您通过获取域中机器帐户的 SID 来获取该 SID - 以美元符号结尾的那个。

# jekyll - 如何在 Jekyll 中调整特定页面/帖子的布局？

> ID：14113559
> 
> 赞同：24
> 
> 时间：2013-01-01T19:37:19.753
> 
> 标签：jekyll

我想对 Jekyll 的布局进行一些更改。变化很小而且不同。例如，链接附加的 CSS 或 JavaScript 文件。或者在标题中添加一些信息。或调整页面标题。 *重要*的是，这些更改取决于页面/帖子。

由于变化小而多样，为每个变化创建一个特殊的布局似乎太昂贵了。

我试图创建自己的解决方案，但[无法在包含指令中使用变量](https://github.com/mojombo/jekyll/issues/176)。

有没有人解决过类似的问题？例如，将特殊的 CSS 链接到特定的帖子？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-04T17:49:35.537

您可以使用[YAML 前端](http://jekyllrb.com/docs/frontmatter/)来为任何帖子/页面调整您想要的任何内容。您在那里提供的任何信息都可以通过布局访问，并包括在`page`变量或任何列表中的特定帖子下。

这听起来像是您的案例的解决方案：您可以像这样使用 YAML 前端：

```
---
extra_css:
  - foo.css
  - dir/bar.css
  - /s/baz.css
--- 
```

然后在布局的标题中使用它，如下所示：

```
{% for css_name in page.extra_css %}
    <link rel="stylesheet" href="{{ css_name }}">
{% endfor %} 
```

通过这种方式，您可以根据您在 YAML 前端中的帖子中提供的数据添加任何逻辑。

如果您想将其中一些逻辑抽象到模块中，您可以对包含使用 hack，在包含之前分配一个变量，然后在内部使用它。[这是一个链接](http://jekyllbootstrap.com/api/bootstrap-api.html)，其中描述了它是如何在 Jekyll Bootstrap 项目中制作的（顺便说一句，它的网站上有很多关于 Jekyll 的好信息）。

而且，是的，Jekyll 不允许在包含中使用变量，因此，如果您想有条件地包含某些内容，则需要在某处列出所有可用包含的列表，然后创建所有条件以在您插入时插入一个或另一个会需要它们。

* * *

另一种解决方案是将布局中的所有内容划分为包含，并制作具有不同复杂程度的布局 - 这样您可以为发布设置任何这些基本布局，然后编写任何额外的代码，其中包含您需要的任何基本块布局，因此您发布的内容可能如下所示：

```
---
layout: custom
---
<aside class="sidebar">
    {% include comments.html %}
    {% include sidebar.html %}
</aside>
<div class="content" role="main">
    Foo bar baz
</div> 
```

在那里，您可以使用不包含页面基本布局且不包含侧边栏和评论的自定义布局，因此您可以根据帖子决定所需的布局级别，然后重新定义需要重新定义的任何内容。

此外，如果您需要调整不同的地方但内容未知，您可以使用带有块的 YAML 前端，例如

```
extra_head: |
    <style>
    * {background: red}
    </style> 
```

然后您可以从 head: 调用此类变量`{{ page.extra_head }}`并获取您放置在那里的任何内容。但是，您不能在 YAML 中使用任何液体标签，但是您可以在此类变量上使用任何 YAML 标签，因此您可以对它们进行降价或通过简单的替换过滤器将其中的任何字符串替换为其他任何内容。

如果这些都不适合你，那么 Jekyll 就不适合你——正如我在评论中所写的，Jekyll 只是一个博客引擎，你不应该等待它变得像 XSLT 一样复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-26T23:26:38.797

我曾经尝试在 jekyll-bootstrap 静态站点中创建一个独立的页面。例如`my_cv.html`需要独立的 css 样式。我没有用 gh-pages（对不起 GitHub）创建一个新的 github 存储库，而是简单地将所有最终的 html 内容填充到一个帖子中`my_cv.md`，因为`markdown`格式实际上与`html`我认为是兼容的，幸运的是它可以工作。

# android - Android 后退定时器按钮

> ID：14113561
> 
> 赞同：-1
> 
> 时间：2013-01-01T19:37:49.490
> 
> 标签：android, text, timer

我想做一个60秒的简单计时器。当我点击按钮时，我的计时器开始。当 time=0 时，将 text 设置为某个字符串。帮助我如何在 Activity 中为 android 执行此操作：

```
package com.example.gameprocess;

public class GameProcess extends Activity {

private static int rez = 0;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.gameprocess);

 final TextView Textkolvo = (TextView)findViewById(R.id.kolvo);
 final TextView Texttime = (TextView)findViewById(R.id.texttime);
 final Button Butklik = (Button)findViewById(R.id.klik); 
```

当我点击这个按钮时，我的时间必须开始......

```
 Butklik.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        //Textkolvo.setText(String.valueOf(rez));
    }
});
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T21:48:17.097

为秒定义一个成员变量

```
int secondsLeft = 0; 
```

并将其放入`onCreate`：

```
final Handler handler = new Handler();

final Runnable updateTimeTask = new Runnable() {
    public void run() {
        secondsLeft--;
        textTime.setText(String.valueOf(secondsLeft));
        if (secondsLeft == 0) {
            textKolvo.setText("Game over.");
        } else {
            handler.postDelayed(this, 1000);
        }
    }
};

butKlik.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        if (secondsLeft == 0) {
            secondsLeft = 60;
            textTime.setText(String.valueOf(secondsLeft));
            handler.postDelayed(updateTimeTask, 1000);
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-02T12:39:09.663

您可以做什么使 TimerReceiver 扩展 BroadCastRecevier 并能够接收这些意图接收：

**在Manifest**文件中定义它 以接收以下**Intents**：

```
<receiver android:name=".TimerReceiver" exported="false" >

    <intent-filter >
        <action android:name="com.yourpackagename.starttimer"/>
        <action android:name="com.yourpackagename.endtimer"/>
        <action android:name="com.yourpackagename.restarttimer"/>
    </intent-filter>

</receiver> 
```

在应用程序中编写广播接收器需要什么

```
public class TimerReceiver extends BroadcastReceiver {

public static final String START_TIMER  =  "com.tcs.starttimer";
public static final String END_SESSION  =  "com.tcs.endsession";
public static final String RESTART_SESSION="com.tcs.restartsession";

private int sessionTimer=10*60*1000; //your time of counter in miliseconds
private int tickTime=1000; //tick time to decrease the counter in one milisecond

@Override
public void onReceive(Context contextdata, Intent intent) {

String actionString=intent.getAction();

    if(actionString.equals(TimerReceiver .START_TIMER)){

     timerStart();
}
    } else if(actionString.equals(TimerReceiver .END_SESSION)){

     //write what you want on ending the session

    }

 }

  void timerStart(){

     try{
         cTimer.cancel();
     }catch(Exception e){

     }

     cTimer=new CountDownTimer(sessionTimer,tickTime) {

    @Override
    public void onTick(long millisUntilFinished) {
    counter++;

    }

      @Override
      public void onFinish() {
        //Log.d("counter","finish.counter: "+counter);
        int timeout=(sessionTimer/1000)-(tickTime/1000);
        if(counter==timeout){
        Toast.makeText(context, "Session Timeout",Toast.LENGTH_LONG).show();            
        context.sendBroadcast(new Intent(END_SESSION));
        }

      }
       }.start();
    }

 } 
```

如果需要，您可以再添加一项操作，例如重新启动计时器。

点击按钮，您的 Activity 需要做什么：

```
 context.sendBroadcast(new Intent((TimerReceiver .START_TIMER)); 
```

在我的情况下，我正在增加你也可以反过来做。享受为我工作，希望对您有所帮助。

# google-maps - 当我使用 Phonegap 和 jquerymobile 关闭我的应用程序时，如何查看我的位置

> ID：14113562
> 
> 赞同：0
> 
> 时间：2013-01-01T19:37:50.437
> 
> 标签：google-maps, cordova, jquery-mobile, onresume, onpause

我正在使用 phonegap、jquerymobile 和 googlemap API 来获取我的当前位置并查看我的位置。

为此，当我午餐我的地图页面时，我的位置会用一个标记显示，并且当我移动时标记会移动。即使当我关闭我的应用程序（onPause）时它可以正常工作。

这是我的代码（你可以告诉我如何完善它：o））

```
$('#home').live("pagebeforeshow", function() {

    if($('#googleAPI').length != 0){

        navigator.geolocation.getCurrentPosition(function(position){

            //showMap('mapHome',position.coords.latitude, position.coords.longitude);// Canvas, lat, long

            var latLng = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);

            // Google Map options
            var myOptions = {
                zoom: 17,
                //zoomControl   : 1,
                center: latLng,
                mapTypeId: google.maps.MapTypeId.ROADMAP////ROADMAP, SATELLITE, HYBRID and TERRAIN
            };      

            // Create the Google Map, set options
            Tracking.mapy = new google.maps.Map(document.getElementById('mapHome'), myOptions);

            //addMarker(position.coords.latitude,position.coords.longitude);

        }, 
        showError, 
        {

                enableHighAccuracy  : true,
                maximumAge          : 2000
                //maximumAge:Infinity
        });

    }
})  

    $('#home').live("pageshow", function() {

        // Place and move the marker regarding to my position and deplacement
    if($('#googleAPI').length != 0){

        //var track_id = "me";
        Tracking.watch_id = navigator.geolocation.watchPosition(
        // Success
        function(position){

            var lat = position.coords.latitude;
            var long = position.coords.longitude;

            var latLng = new Array();
            latLng[0] = lat;
            latLng[1] = long;

            //Tracking.myCoordinates.push(lat,long);
            Tracking.myCoordinates.push(latLng);

            addMarker(lat, long);

        },
        // Error
        showError,
        { 
            frequency: 1000

        });

        console.log('HW : WatchPosition called. Id:' + Tracking.watch_id);

    }else{
        Alert.show('The map API has not been loaded. Check for connection and try again. (pagebeforeshow)');
    }

})

$('#home').live("pagebeforehide", function() {

    if($('#googleAPI').length != 0){

        //track_id = "me";

        // Stop tracking the user

        if (Tracking.watch_id != null) {
            navigator.geolocation.clearWatch(Tracking.watch_id);
        console.log('HW : WatchPosition cancelled Id:' + Tracking.watch_id);
            Tracking.watch_id = null;
        }

        //navigator.geolocation.clearWatch(Tracking.watch_id);

        //Tracking.watch_id = null;
        Tracking.myCoordinates = new Array();

    }else{
        Alert.show('The map API has not been loaded. Check for connection and try again. (pagebeforeshide)');
    }

}); 
```

问题是当我关闭我的应用程序时，因为当我走出地理围栏时我仍然需要保持警惕。然后，尽管我不会停下来观察我的仓位，但即使我平仓或午餐另一个应用程序，我也需要它来观察。

然后当我打电话给那个Phonegap时我什至不知道该怎么做：

```
document.addEventListener('pause', onPause, false);
function onPause(){} 
```

我应该简单地用不同的 watch_id 重新启动我的手表代码吗？

有什么建议吗？

非常感谢和新年快乐

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T23:14:52.410

我认为您要尝试的是使用 phonegap 运行后台进程。此链接中的讨论似乎表明只有编写插件来执行该功能才有可能。PhoneGap 没有开箱即用的 API。

[使用phonegap在后台执行javascript](https://stackoverflow.com/questions/7585796/executing-javascript-in-background-using-phonegap)

# javascript - 在 Google Chrome 中禁用 Alt 功能（快捷方式）

> ID：14113563
> 
> 赞同：1
> 
> 时间：2013-01-01T19:37:53.377
> 
> 标签：javascript, jquery, html, google-chrome, keyboard-shortcuts

我使用以下代码（作为快捷方式）在我的反馈页面上重定向用户。

```
<a href='/feedback/' accesskey='f'>feedback</a> 
```

但是此代码在 Google Chrome 中不起作用，因为当用户按下`Alt + F`它时，它将打开 Google Chrome 菜单栏。

如何禁用这些“快捷方式”？

它可以是 jQuery、javascript...

注意：我编写了一个重定向的 javascript 代码，但它首先打开 Chrome 菜单栏，然后​​完成它的工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T19:41:18.050

有一些特殊的键是保留的，并且`Alt+F`是其中之一，但它在浏览器和操作系统之间确实会有所不同。这是一个[`good article`](http://webaim.org/techniques/keyboard/accesskey#browserconflicts).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T20:07:39.823

理论上允许这样做的浏览器会暴露一个安全漏洞。如果可以覆盖“系统”行为，则可以劫持用户浏览器。它将能够弹出一个模拟真实菜单的虚假“文件”菜单，让用户认为他们正在与自己的本地机器而不是网站进行交互。

因此，在大多数现代浏览器中这是不可能的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-05T08:51:52.533

在 Google Chrome（在 V44 中测试）中，访问`accesskey`键盘快捷键的修饰键是`Alt`.

但是，如果该键**与浏览器快捷方式冲突**，则使用`Alt``Shift`. 因此，您发布的解决方案有效，但仅使用`Alt``Shift`.

例子：

*   第一个链接使用`Alt``Shift`+f 访问（与菜单快捷方式冲突）
*   使用 +a 访问第二个链接`Alt`（无冲突）

```
<h1>Links with accesskey attribute</h1>

<a href='http://www.example.org/' accesskey='f'>
Link to www.example.org (accesskey: f)
</a>
<p/>
<a href='http://apache.org/' accesskey='a'>
Link to apache.org (accesskey: a)
</a>
```

顺便说一句，我更喜欢 Firefox 使用的解决方案，即始终`Alt``Shift`用于这些快捷方式。这对用户来说比 Chrome 的行为更一致（尽管 Chome 开发者可能有他们的理由）。

* * *

*注意：*以上内容在 Windows 和 Linux 上有效。AFAIK，Mac OS X 上的 Chrome 使用不同的快捷方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-18T20:03:31.240

正如其他人所说，这可能不是一个好主意。

但是如果你是一个疯子，并且你喜欢做你想做的事，那么这实际上会起作用：

```
document.addEventListener('keydown', (e) => {
  e.preventDefault();
  if (e.altKey) {
    console.log('yay');
  }
}) 
```

`e.preventDefault()`需要放置在事件处理程序的顶部。这可以防止浏览器的默认行为（即打开菜单）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T11:35:10.197

我刚刚找到了一种如何在用户按下时禁用浏览器功能的方法`Alt + other button`。Javascript 可以通过在函数末尾写入来禁用此快捷方式`return false`

例子

```
function function1(){/* code goes here */; return false} 
```

# file-upload - php move_uploaded_file 的严重错误无法正常工作

> ID：14113569
> 
> 赞同：-1
> 
> 时间：2013-01-01T19:39:13.963
> 
> 标签：file-upload

我对 php 文件上传有一个严重的问题。问题是文件没有从 tmp 移动到目标目录这是我的 html 页面

```
<form name="f1" method="post" action="handleUpload.php"  enctype="multipart/form-data">
<input type="file" name="htmlfile">
<input type="submit">
</form> 
```

这是我的 PHP 页面 handleUpload.php，

```
if(isset($_POST) and $_SERVER['REQUEST_METHOD'] == "POST")
{

    $arrayKeys=array_keys($_FILES['htmlfile']);
    foreach($arrayKeys as $s)
        echo $s ." : ".$_FILES['htmlfile'][$s]." <br>";
    $name = $_FILES['htmlfile']['name'];
    $size = $_FILES['htmlfile']['size'];        
    $tempName= $_FILES['htmlfile']['tmp_name'];
    list($filePureName, $ext) = explode(".", $name);
    $valid_formats = array("jpg","png", "gif", "bmp","rar","zip");
    $fileObject=fopen($tempName,"r") ;
        echo "test Text" . fgets($fileObject) ."</br>";
    fclose($dstFile) ;
    if($_FILES["htmlfile"]["error"] != 0 ) {
        echo "file error with code " .$_FILES["htmlfile"]["error"];
    }
    if( is_uploaded_file($tempName)){
        echo "<br> upladed to the tmp directory ";
        move_uploaded_file($_FILES["htmlfile"]["tmp_name"],"./".$_FILES["htmlfile"]["name"]) ;
        //move_uploaded_file($_FILES["htmlfile"]["tmp_name"],"upload/".$_FILES["htmlfile"]["name"])
    }

}
else{

    echo "you must visit the HTML upload page first";

} 
```

我得到的输出是

```
name : numerical_hw1.rar 
type : application/octet-stream 
tmp_name : /tmp/phpK7Gmmf 
error : 0 
size : 34642 
test TextRar!Ïs WÅt K„Á &–Gá@3& numerical_hw1\hw1_q1\numerical_hw1.cpp°¸ EÌÌý•½¦~g†¡¹[•Í…Àk#€Qu{Q|0a®'#ÆàM¹%_ûánšF“Q‘Á®ÞÛÅ€ÁEq'‰\—ç9yq%Páðà;áy¹‰ùLx_,Xrh»qüÙ‰ÐO‰ †3JI²†Žc÷“4ˆ ‰‡oÉ²E³*[â¦†sÓè¤Í~·Ö”?ø‘ŒK6"Á¦æF,¼JÇ1rê¼´…BžT5$_sôJäÄ¼†Å$ýË¦A:`ë5kÎ­'3_„}ªœRÄ³Å3ÎÜøsÛV:÷5ËÎ°ãÚÓžõÌÚK¦œñÕ÷ÚßýT­vÙäÓ 

upladed to the tmp directory 
```

问题是文件没有移动到当前目录，也没有移动到“上传”目录——当然，当它是单独的并且没有评论时——！！如您所见，文件已成功上传到 tmp 目录，我已经打开它，并从中读取一行。而且我已经用 is_uploaded_file 函数检查了它，它通过了检查。

我已经仔细阅读了许多站点的 php 文件上传主题，发现 php 和 html 都没有丢失任何内容！文件夹权限是 755。我应该在这里提一下，文件上传最近还在工作，我确信没有人更改或修改 php.ini 文件。

**请问有什么帮助吗？？我应该怎么办？**

**仔细浏览服务器后发现我的网站被黑了，黑客上传了一个hack文件！** 但我真的不知道现在该怎么办，而且我也无法估计那个黑客造成的损害大小，所以有什么建议吗？！！！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T19:58:18.230

试试看：

```
$pathDestino=$_SERVER['DOCUMENT_ROOT'] . "\\xxx\\upload\\" . $_FILES["htmlfile"]["tmp_name"];
$tmp_name=$_FILES["htmlfile"]["tmp_name"];
move_uploaded_file($tmp_name, $pathDestino); 
```

# ruby-on-rails - 对于管理整个学校区域的大型系统，关系数据库还是非关系数据库？

> ID：14113571
> 
> 赞同：2
> 
> 时间：2013-01-01T19:39:17.990
> 
> 标签：ruby-on-rails, database-design, relational-database, non-relational-database

我正在构建一个大型网络应用程序，它将帮助“区域经理”管理多个地区的多所学校。

总共有大约400,000名学生和教师。

除了管理成绩等显而易见的事情之外，我们还必须管理出勤率（每天）。

我习惯于以较小的规模构建 Web 应用程序，并将其部署到 Heroku。鉴于这种规模的系统，我应该考虑从现在开始使用非关系数据库，还是应该坚持使用 PostgreSQL 并进行特定优化以确保高速和数据完整性？

如果不清楚，主要问题是系统在管理这么多表中的这么多记录时速度太慢 - 在关系数据库系统中。

另外，如果建议使用关系数据库，我可以做哪些常见的优化来确保速度？最大、最明显的一个是对最常访问的信息使用索引......其他类似的东西将不胜感激。

谢谢。

PS 我的团队在我们应该做什么方面存在分歧，所以你们会发出有用的声音来帮助平衡:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T19:42:47.537

坚持使用postgresql。为什么别的东西会更好？

根据您提供的少量信息，我猜您的表现可能会归结为两件事：

1.  正确的列上的正确[索引](http://www.postgresql.org/docs/9.2/static/sql-createindex.html)
2.  使用 rails 和[redis](http://redis.io/)[缓存](http://guides.rubyonrails.org/caching_with_rails.html)

* * *

Postgresql 在磁盘上提供数据存储。使用 redis 缓存页面允许将数据库查询和渲染的 HTML 部分缓存在内存中，以避免接触磁盘。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T20:01:18.027

设计适当的索引是性能架构的重要组成部分，但您不是为*信息*设计索引，而是为*查询*设计索引。而且它与关系数据库和非关系数据库之间的选择关系不大，因为两者都要求您设计“适当的”索引。有关更多详细信息，请参阅我的演示文稿[如何设计索引，真的](http://www.slideshare.net/billkarwin/how-to-design-indexes-really)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T19:47:01.210

除了性能之外，请务必考虑安全问题。并不是说 NoSql 数据库一定不好，但它是*不同*的。保护非敏感数据的方法可能不同。

如果您要存储任何个人身份信息，请仔细权衡您的选择，如果您不确定差异是什么，请使用您知道如何保护的内容。

此外，考虑隔离数据可能没有坏处——有些是关系型的，有些不是。如果您可以灵活地从头开始构建系统，那么最适合您的情况就是最适合您的。

推荐阅读：

*   [http://www.darkreading.com/blog/232600288/a-response-to-nosql-security-concerns.html](http://www.darkreading.com/blog/232600288/a-response-to-nosql-security-concerns.html)
*   [http://www.darkreading.com/database-security/167901020/security/news/232400214/does-nosql-mean-no-security.html](http://www.darkreading.com/database-security/167901020/security/news/232400214/does-nosql-mean-no-security.html)
*   [http://www.bigdatarepublic.com/author.asp?section_id=2759&doc_id=256043](http://www.bigdatarepublic.com/author.asp?section_id=2759&doc_id=256043)

建议观看：

*   [http://www.youtube.com/watch?v=YEhy_SuCrYQ](http://www.youtube.com/watch?v=YEhy_SuCrYQ) （我喜欢 OWASP！）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-01T20:08:03.043

Facebook 运行[MySQL](https://www.facebook.com/MySQLatFacebook)。我不知道 400K 人是否意味着这个系统的 400K 用户：我不这么认为，但 Facebook 的数量级仍然高出几个数量级，并且使用 MySQL。

事实是：扩展很难。如果 NoSQL 后端足以轻松扩展，那么现在没有人会真正从关系数据库开始，你不觉得吗？我知道这并不是您问题的真正*答案*，但我认为对此*没有简单的答案*。

使用任何你觉得舒服的东西，使用最让你兴奋的东西，使用你认为你将在未来几年使用的东西，或者使用你认为很容易购买支持的东西。不要在意这种选择的账户*可扩展性*，因为在你遇到问题之前你不知道如何解决。你甚至无法知道它是否完全存在。

顺便说一句，与 SQL 和 NoSQL 相比，容错、缓存和其他对性能产生更大影响的因素有很多考虑因素。顺便说一句，并非所有关系数据库引擎都是相同的（所有 NoSQL 数据存储都不是......）

# php - PHP应用程序没有超过require_once

> ID：14113577
> 
> 赞同：0
> 
> 时间：2013-01-01T19:39:55.253
> 
> 标签：php

我很难让 PHP 应用程序通过 require_once 语句。我的 PHP 代码位于 HTML5 文档的正文中。我正在尝试在我的密码散列代码中包含 PHpass 框架。PHP 代码开始了这样的效果：

```
<?php
require_once("./includes/PasswordHash.php");
echo "test.";
?> 
```

echo 语句永远不会运行，并且 echo 语句下面的任何内容都不会运行。如果我注释掉 require 语句，那么 echo 语句运行良好。我没有收到任何错误消息，我只收到一个空白文档。

我在搞什么鬼？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:43:20.780

您加载的文件不存在或您没有读取它的权限。

打开显示错误：`error_reporting(E_ALL);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T19:44:56.920

要么您`require_once`失败并且您看不到输出，要么包含的脚本失败不可恢复。我认为您仍然应该能够在 Apache 错误日志中看到堆栈跟踪，但您应该始终在开发机器上打开错误*报告*。

顺便说一句， PHP 脚本中的*当前目录*有些棘手。当你想引用一个相对于脚本`require`出现的路径的文件时，我建议像

```
<?php
// Use DIRECTORY_SEPARATOR instead of forward slash for OS independence
require_once (dirname(__FILE__) . '/path/to/included.php');
// or you can replace dirname(__FILE__) with __DIR__ 
```

注意魔术常数的使用[`__FILE__`](http://php.net/manual/en/language.constants.predefined.php)

# unit-testing - 如何摩尔或起订量在静态函数中被调用的特定函数

> ID：14113582
> 
> 赞同：2
> 
> 时间：2013-01-01T19:40:48.203
> 
> 标签：unit-testing, c#-4.0, delegates, moles

我想测试一个特定的功能。该函数调用了受保护的不同类的静态方法，因此无法从外部访问。当我在做组件级测试时，我不想访问数据库。如果它在静态函数中，是否可以模拟对数据库的特定调用。

```
//I want to test this function
public void testing
{
    Abc.instance.Add();
}

class Abc
{
    public static readOnly instance = new Abc();

    Abc()
    {
        createInstance();
    }  

    public void createInstance()// I want to mock this function
    {
        //calls to the database
    }

    public void Add()
    {
        //...
    }
} 
```

但即使我使用委托来模拟`createInstance()`，甚至在去委托线之前，静态块被调用，从而命中数据库并引发异常。

# iphone - 将网站保存到 iPhone 上的主屏幕与直接进入 - 区别？

> ID：14113584
> 
> 赞同：1
> 
> 时间：2013-01-01T19:40:58.927
> 
> 标签：iphone, ios, mobile, mobile-safari

当我输入[http://pattern.dk/sun/](http://pattern.dk/sun/)（网络移动应用程序）时，它要求我将其添加到 iPhone 的主屏幕。否则我只会看到“添加到主屏幕”消息，而不是实际应用程序。将其添加到主屏幕并从那里运行使其显示应用程序。

但我想在 Chrome 中打开该应用程序。在 Chrome 中设置“iPhone iOS5”用户代理使其显示相同的“添加到主屏幕”消息，而不是应用程序本身。

我想知道添加到iPhone主屏幕的应用程序和Safari入口之间有什么区别？我可以以任何方式在 Chrome 中查看该应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:48:28.653

可以使用 JavaScript 进行区分：

```
if (window.navigator.standalone) {
    // Web app on the homescreen
} else {
    // Mobile Safari
} 
```

# html - 带导航栏的引导全屏谷歌地图

> ID：14113586
> 
> 赞同：6
> 
> 时间：2013-01-01T19:41:00.500
> 
> 标签：html, css, google-maps, twitter-bootstrap

我有一个顶部有导航栏的全屏谷歌地图应用程序。

所以我有这样的设置：

```
<div class="navbar">
    <nav bar stuff......>
</div>
<div id="mapcanvas"></div> 
```

mapcanvas 元素的高度和宽度为 100%。

但是，mapcanvas 似乎溢出了页面，整个页面可以向下滚动页面导航栏的数量。

我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-01T19:54:05.763

也许尝试添加`navbar-fixed-top`到您的导航栏类。

```
<div class="navbar navbar-fixed-top">
    <nav bar stuff......>
</div> 
```

如果您不希望导航栏位于地图上方，请设置`#mapcanvas`为这样（直到 IE7 - 还没有尝试过 ie6）

```
html,body {width:100%;height:100%;margin:0;padding:0;}

#mapcanvas {
    background:red;display: block;
    position:absolute;
    height:auto;
    bottom:0;
    top:0;
    left:0;
    right:0;
    margin-top:50px; /* adjust top margin to your header height */
}
```

```
<div id="mapcanvas">asdf</div>
```

# jquery - 如何将数据从可拖动项目传递到连接的可排序列表

> ID：14113587
> 
> 赞同：3
> 
> 时间：2013-01-01T19:41:03.550
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable, jquery-ui-draggable

请看一下[这个 jsFiddle。](http://jsfiddle.net/arasbm/ghMaP/3/)

我想要实现的是允许用户将三个项目之一拖放到排序列表中。我添加了一个自定义助手，它现在是一个占位符，将用于显示该项目的外观预览。

为了便于讨论，假设三个可拖动元素是*源项*，而最终在可排序列表中的是*目标项*。我遇到的困难是将正确的内容传递给`stop`可排序列表中的函数并将该内容插入列表而不是源项目的默认克隆。我还想将一些附加信息与源项目一起传递。例如，我想在停止函数中知道元素是否来自可拖动的源项目之一，或者它只是正在重新排序的目标项目之一。

如果您检查控制台，您可以看到我所做的一些不成功的尝试。我尝试设置值，`event.data`但我进入`TypeError: event.data is null`了可排序列表的启动和停止功能。所以我想我在这里遗漏了一些东西。

重申我的问题，我面临两个相关问题：

1.  我如何传递一些数据，从源项目被拖动到它被拖放到可排序列表中，这似乎触发了可排序列表的功能`start`和`stop`功能？
2.  如何在列表中插入自定义 div 而不是源项的默认克隆？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T20:53:17.873

这是一个棘手的问题。

主要问题是`sortable`和`draggable`小部件一起工作使用元素的克隆而不是元素本身。

由于[JQuery`data`](http://api.jquery.com/jQuery.data/)方法存储元素的数据，由于上面描述的克隆创建行为，因此不容易带来信息。

一种解决方法可能是使用简单`div`的方法在事件回调中存储和检索数据。它之所以有效，是因为始终只有一个元素被拖动。

这是代码和小提琴：http: [//jsfiddle.net/ghMaP/4/](http://jsfiddle.net/ghMaP/4/)

```
<ul id="draggable">
    <li class="ui-state-default">Button</li>
    <li class="ui-state-default">Text Field</li>
    <li class="ui-state-default">Image</li>
</ul>

<ul id="sortable" class="ui-state-highlight">
</ul>

<!-- New div used to store and retrieve data of dragged element -->
<div id="tmp"></div> 
```

​</p>

```
$(document).ready(function() {

    //Shortcut on the temp div
    $tmp = $("#tmp").get(0);

    $("#sortable").sortable({
        start: function(event, ui) {
        },
        stop: function(event, ui) { 
            //Here, we retrieve data from the temp div
            console.log("isNew : ", jQuery.data($tmp, "isNew"));
            console.log("resultHTML : ", jQuery.data($tmp, "resultHTML"));
        }
    });

    $("#draggable li").draggable({
        connectToSortable: "#sortable",
        start: function(event, ui) {    

            //Store info in a tmp div         
            jQuery.data($tmp, "isNew", true);
            jQuery.data($tmp, "resultHTML", "<b>Here I will add some custom html to EVENT data</b>");

        },
        helper: function(event) {
            return "<div class='custom-helper'>Custom helper for " + $(this).context.innerHTML + "</div>";   
        },
        revert: "invalid"
    });
});​ 
```

# core-data - 为什么我的核心数据对象中有无关的对象？

> ID：14113590
> 
> 赞同：0
> 
> 时间：2013-01-01T19:41:37.770
> 
> 标签：core-data, xcode4.5

我有一个使用核心数据的应用程序。我已经多次定义实体及其各自的属性。现在，我几乎已经完成了，看起来像这样： ![在此处输入图像描述](../Images/bbbc956b59dd7ad134357387c4e2114b.png)

我删除了旧的 sqlite d/b，重新运行了创建新 Sqlite d/b 的程序，它看起来像这样（使用 SQLite 数据库浏览器）。以黄色突出显示的区域是不属于那里的区域（恕我直言）......当从核心数据重建 Sqlite d/b 时，如何清除那里的旧垃圾？

![在此处输入图像描述](../Images/28ae559827c3e36a4b4d7891c936571e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T21:20:32.127

动机很简单。

当您使用**实体继承**时，Core Data 在后台创建一个（关系）表，其中包含父实体及其子实体的所有属性。

尽管此功能非常有用，但您应该了解这种机制以避免性能损失。

无论如何，您不应该使用为您创建的数据库。您应该只考虑对象图。你会简化你的生活。

希望有帮助。

# php - PATH_TRANSLATED 中的 redirect:// 是什么？

> ID：14113593
> 
> 赞同：3
> 
> 时间：2013-01-01T19:42:03.230
> 
> 标签：php, apache, mod-rewrite

我有一个**.htaccess规则，它将对****/category/category-slug/**的请求传递给**category.php**。但是，当我检查`$_SERVER`超全局时，我得到了这个条目：

```
Array
(
    [PATH_TRANSLATED] => redirect://
) 
```

那是什么？我以前从未见过**重定向：//**。

这是相关的**.htaccess**规则：

```
RewriteRule ^category/([^/]+)/?(.*) /category.php?cat=$1&page=$2 [L,QSA] 
```

结果，我没有在我的脚本中获取`$_GET['cat']`或`$_GET['page']`填充，因为它似乎来自重定向并且没有简单地重写请求。这是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T20:23:50.730

我发现了一份关于似乎是同一问题的[Apache 错误报告 (40781) 。](https://issues.apache.org/bugzilla/show_bug.cgi?id=40781)引用[Bob Ionescu 的评论](https://issues.apache.org/bugzilla/show_bug.cgi?id=40781#c4)：

> “问题是主请求的 uri=path_info 的子请求（为了获得 path_translated，即 path_info 的物理路径视图）再次命中每个目录上下文中的 RewriteRule 并匹配；因此没有物理路径。
> 
> 为什么在 Apache 2.0 中不会出现这种情况？答案很简单：mod_rewrite 不会在 2.1 之前的每个目录上下文中的子请求中起作用。NS 标志阻止处理子请求中的 RewriteRules。”

该评论建议您应该能够通过在您的 s 中包含[`[NS]`标志](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_ns)`RewriteRule`来解决此问题，除非您明确*希望*它们也适用于子请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T19:46:47.537

`PATH_TRANSLATED`in是服务器的环境变量，PHP按照一些标准规则`$_SERVER`将其导入到超全局中。`$_SERVER`因此，环境变量的名称相似（如果名称不同）。

仅通过环境变量的名称不能说究竟是什么设置了这个值，但是你的问题的上下文表明它是由 Aapache HTTPD 网络服务器设置的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T20:11:48.303

[PHP 文档](http://php.net/ini.core#ini.cgi.fix-pathinfo)说明如下：

> PHP 以前的行为是设置`PATH_TRANSLATED`为`SCRIPT_FILENAME`，并且不了解 PATH_INFO 是什么。[..] 您应该修复您的脚本以使用`SCRIPT_FILENAME`而不是`PATH_TRANSLATED`.

另请参阅[`$_SERVER`](http://php.net/reserved.variables.server)略有不同的注释：

> 在服务器完成任何虚拟到真实的映射之后，当前脚本的基于文​​件系统（不是文档根目录）的路径。
> 
> **注意：**从 PHP 4.3.2 开始，PATH_TRANSLATED 在 Apache 2 SAPI 下不再隐式设置，这与 Apache 1 中的情况不同，在 Apache 1 中，当它没有被 Apache 填充时，它被设置为与 SCRIPT_FILENAME 服务器变量相同的值。进行此更改是为了符合 CGI 规范，即 PATH_TRANSLATED 只有在定义了 PATH_INFO 时才应该存在。Apache 2 用户可以在*httpd.conf中使用****AcceptPathInfo = On***来定义 PATH_INFO。

 *所有`$_SERVER`变量都是从环境中读取的。在 Apache + mod_php 的情况下，此环境由 Apache 服务器定义。

老实说`redirect://`，到目前为止我也没有看到。您确定您的请求符合此重写规则，而不是之前的另一个吗？

我认为 mod_rewrite 是您必须查找错误的地方。

[您可以通过启用日志](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#logging)来调试 mod_rewrite 的功能*

# twitter-bootstrap - 引导折叠菜单不起作用

> ID：14113605
> 
> 赞同：4
> 
> 时间：2013-01-01T19:42:42.357
> 
> 标签：twitter-bootstrap

我是新手，我正在尝试创建一个折叠导航栏，我设法显示了 btn-navbar，但是当我单击它时，什么也没有发生。这是我的头代码：

```
<script type="text/javascript" src="/resources/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="/resources/bootstrap/bootstrap.min.js"></script> 
```

这是我的导航栏代码：

```
 <!-- por si el dispositivo que esta visualizando es de resolucion pequenya, se colapsara y lo que hay dentro del elemento nav-collapse collapse sera lo que se colapse  -->
                  <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                  </a>
                    <a class="brand" href="#">QR Sensations</a>
                    <div class="nav-collapse">
                        <ul class="nav">                             
                          <li class="divider-vertical"></li>
                          <li><a href="http://www.qrsensations.com/" ><i class="icon-home icon-white"></i></a></li>
                          <li class="divider-vertical"></li>
                          <li class="active">
                            <a href="http://www.qrsensations.com/collections">Collections</a>                               
                          </li>

                          <li class="divider-vertical"></li>
                          <li><a href="#">Access</a></li>
                          <li class="divider-vertical"></li>
                        </ul>

                        <form class="form-search" >
                          <div class="input-append">
                            <input  type="text" class="span2 search-query">
                            <button type="submit" class="btn"><i class="icon-search icon-white"></i></button>
                          </div>
                        </form>
                    </div>
              </div>
        </div> 
```

知道发生了什么吗？在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:54:49.460

为我工作：http: [//jsfiddle.net/xUTJt/](http://jsfiddle.net/xUTJt/)

你记得放

```
<div class="navbar">
  <div class="navbar-inner">
    <div class="container"> 
```

最重要的是？之后它将起作用。如果没有，您可能没有正确引用 Bootstrap JS/CSS。请检查控制台是否有任何错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:45:48.193

我遇到了同样的问题，您的问题的解决方案是“只需删除 li 元素的分隔符-垂直类”。

崩溃将起作用。

# ios - 在 viewDidLoad 中模拟按钮点击

> ID：14113610
> 
> 赞同：1
> 
> 时间：2013-01-01T19:43:35.697
> 
> 标签：ios, xcode, uiviewcontroller, uibutton, uitextview

我正在做一个论文应用程序，当用户按下一个按钮时，它会显示一个引用列表。问题是，当应用程序加载时，应该显示引号的 UITextView 是空的，只有在点击按钮时才会填充。

有没有办法填充那个 UITextView？就像调用当用户点击按钮或类似的东西时执行的方法？

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:49:03.903

> 就像调用当用户点击按钮或类似的东西时执行的方法？

绝对地。您将按钮连接到一个看起来像这样的方法：

```
-(void)buttonPressed:(id)sender 
```

您可以像调用任何其他方法一样调用它：

```
[self buttonPressed:nil]; 
```

我将`nil`作为 sender 参数传递，以防您在此方法中对按钮执行操作。

# android - Android使用settext方法显示浮动

> ID：14113613
> 
> 赞同：-1
> 
> 时间：2013-01-01T19:44:26.357
> 
> 标签：android, textview, floating

iam allmoust 完成了我的应用程序，但 iam 卡在这个东西上，我有两个 int 称为“正”和“负”，当我在它下面处理源时显示 0.0

```
 total = positive + negative;
     float rate = positive/total;
     rate*=100;
     TextView analitycs = (TextView)v.findViewById(R.id.app_scores_analitycs);
     analitycs.setText(String.valueOf(rate)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:50:33.200

是正数和总浮点数/双打吗？

如果没有，那么 int/int 会给你一个 int。

解决方案是将正数或负数转换为浮点数。

尝试以下操作：

```
float rate = ((float)(positive))/total; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T19:58:47.247

维克多说的是真的。

此外，您可能希望使用`String.valueOf(rate)`与设置文本视图的文本不同的东西，因为这种方法可能会给您带来丑陋的数字表示。

您可能应该`String.format("%.2f", rate)`根据您的需要使用广告调整。

# java - Java Android SQLite 重复值

> ID：14113622
> 
> 赞同：1
> 
> 时间：2013-01-01T19:45:19.510
> 
> 标签：java, android, sql, database, sqlite

我想知道如何通过更新来检查数据库中的重复字段。如果另一行中的日期和时间相同，则它必须给出错误。

数据库助手：

```
package me.wouter.schoolwork;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class Schedule {

public static final String KEY_ROWID = "_id"; //Row Id 
public static final String KEY_HOUR = "schedule_hour"; 
public static final String KEY_DAY = "schedule_day";
public static final String KEY_LOCATION = "schedule_location";
public static final String KEY_SUBJECT = "schedule_subject";
public static final String KEY_START = "schedule_start";
public static final String KEY_END = "schedule_end"; 

private static final String DATABASE_NAME = "PlanYourDay";
private static final String DATABASE_TABLE = "schedule";
private static final int DATABASE_VERSION = 1;

private dBHelper classHelper;
private final Context classContext;
private SQLiteDatabase classDatabase;
public Cursor c;

private static class dBHelper extends SQLiteOpenHelper {

    public dBHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);

    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" +
                KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                KEY_HOUR + " TEXT NOT NULL, " +
                KEY_DAY + " TEXT NOT NULL, " +
                KEY_LOCATION + " TEXT NOT NULL, " +
                KEY_SUBJECT + " TEXT NOT NULL, " +
                KEY_START + " TEXT NOT NULL, " +
                KEY_END + " TEXT NOT NULL);"

        );

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
        onCreate(db);
    }

}

public Schedule(Context c){
    classContext = c;
}

public Schedule open() throws SQLException{
    classHelper = new dBHelper(classContext);
    classDatabase = classHelper.getWritableDatabase();
    return this;
}
public Schedule close(){
    classHelper.close();
    return this;
}

public long createEntry(String subject, String day, String hour,
        String location, String start, String end) {
    ContentValues cv = new ContentValues();
    cv.put(KEY_SUBJECT, subject);
    cv.put(KEY_DAY, day);
    cv.put(KEY_HOUR, hour);
    cv.put(KEY_LOCATION, location);
    cv.put(KEY_START, start);
    cv.put(KEY_END, end);
    return classDatabase.insert(DATABASE_TABLE, null, cv);

}

public String getData() {
    String[] columns = new String[]{KEY_ROWID, KEY_SUBJECT, KEY_HOUR, KEY_DAY, KEY_LOCATION, KEY_START, KEY_END};
    c = classDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
    String result = "";

    int iRow = c.getColumnIndex(KEY_ROWID);
    final int iSubject = c.getColumnIndex(KEY_SUBJECT);
    int iHour = c.getColumnIndex(KEY_HOUR);
    int iDay = c.getColumnIndex(KEY_DAY);
    int iLocation = c.getColumnIndex(KEY_LOCATION);
    int iStart = c.getColumnIndex(KEY_START);
    int iEnd = c.getColumnIndex(KEY_END);

    for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
        result = result + c.getString(iRow) + " " + c.getString(iSubject) + " " + c.getString(iHour) + " "
                + c.getString(iDay) + " " + c.getString(iLocation) + " " + c.getString(iStart) + " "
                + c.getString(iEnd) + "\n";
    }

    return result;
}

    } 
```

数据库插入器：

```
package me.wouter.schoolwork;

import android.app.Activity;
import android.app.Dialog;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

    public class ScheduleTest extends Activity implements OnClickListener {
// object variables
Button bLoadSql, bSaveSql;
TextView viewSubject, viewDay, viewHour, viewLocation, viewStart, viewEnd;
EditText editSubject, editDay, editHour, editLocation, editStart, editEnd;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.sql);
    allTheVariables();
    bLoadSql.setOnClickListener(this);
    bSaveSql.setOnClickListener(this);

}

private void allTheVariables() {
    // defines variables in xml file
            // buttons
            bLoadSql = (Button) findViewById(R.id.bLoadSql);
            bSaveSql = (Button) findViewById(R.id.bSaveSql);
            // textviews
            viewSubject = (TextView) findViewById(R.id.viewSubject);
            viewDay = (TextView) findViewById(R.id.viewDay);
            viewHour = (TextView) findViewById(R.id.viewHour);
            viewLocation = (TextView) findViewById(R.id.viewLocation);
            viewStart = (TextView) findViewById(R.id.viewStart);
            viewEnd = (TextView) findViewById(R.id.viewEnd);
            // edittext
            editSubject = (EditText) findViewById(R.id.editSubject);
            editDay = (EditText) findViewById(R.id.editDay);
            editHour = (EditText) findViewById(R.id.editHour);
            editLocation = (EditText) findViewById(R.id.editLocation);
            editStart = (EditText) findViewById(R.id.editStart);
            editEnd = (EditText) findViewById(R.id.editEnd);

}

@Override
public void onClick(View arg0) {
    switch (arg0.getId()) {
    case R.id.bLoadSql:
        Intent i = new Intent("me.wouter.schoolwork.SCHEDULEVIEW");
        startActivity(i);
        break;
    case R.id.bSaveSql:

        boolean didItWork = true;
        try{
        String subject = editSubject.getText().toString();
        String day = editDay.getText().toString();
        String hour = editHour.getText().toString();
        String location = editLocation.getText().toString();
        String start = editStart.getText().toString();
        String end = editEnd.getText().toString();

        Schedule entry = new Schedule(this);
        entry.open();
        entry.createEntry(subject, day, hour, location, start, end);
        entry.close();
        }catch (Exception e){
            didItWork = false;
            String error = e.toString();
            Dialog d = new Dialog(this);
            d.setTitle("Failed");
            TextView tv = new TextView(this);
            tv.setText(error);
            d.setContentView(tv);
            d.show();

        }finally{
            if(didItWork){
                Dialog d = new Dialog(this);
                d.setTitle("Inserted");
                TextView tv = new TextView(this);
                tv.setText("Succes");
                d.setContentView(tv);
                d.show();
            }
        }

        break;
    }

}

  } 
```

和查看器/加载器：

```
package me.wouter.schoolwork;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class ScheduleView extends Activity {

TextView subject;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.sqlview);
    subject = (TextView) findViewById(R.id.subject);
    Schedule info = new Schedule(this);
    info.open();
    String data =  info.getData();
    subject.setText(data);
    info.close();
}

    } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T20:03:59.017

在我看来，您需要的是对数据库模式的多列唯一性约束，并带有合适的[冲突子句](http://sqlite.org/lang_conflict.html)：

```
public void onCreate(SQLiteDatabase db) {
    db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" +
            KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
            KEY_HOUR + " TEXT NOT NULL, " +
            KEY_DAY + " TEXT NOT NULL, " +
            KEY_LOCATION + " TEXT NOT NULL, " +
            KEY_SUBJECT + " TEXT NOT NULL, " +
            KEY_START + " TEXT NOT NULL, " +
            KEY_END + " TEXT NOT NULL, " +
            "UNIQUE (" + KEY_DAY + ", " + KEY_HOUR + ") ON CONFLICT ROLLBACK);"
    ); 
```

如果日/小时组合不是唯一的，这将生成约束违规错误，而无需编写显式检查。

# objective-c - UIImagePIckerController 出现但相机不启动

> ID：14113627
> 
> 赞同：0
> 
> 时间：2013-01-01T19:47:28.153
> 
> 标签：objective-c, uiviewcontroller, uiimagepickercontroller, xcode4.5

是的，这可能是一个重复的[问题](https://stackoverflow.com/questions/8283063/uiimagepickercontroller-appears-but-camera-doesnt-start-on-ios-5)。但由于没有得到答案，我将更具体的案例和代码：

我有3个参与`UIViewControllers`：

1.  `WelcomeView`- 第一个
2.  `TakePhotoViewController`- 第二个是 OverlayviewController 的代表
3.  `OverlayViewController`- 相机的自定义视图。

设想：

1.  用户输入`WelcomeView`并单击要使用 segue 转移到的按钮`TakeView`。
2.  `UIImageViewController`正在打开拍照。
3.  用户单击取消按钮 -`didCancelCamera`方法 in`TakePhotoViewController` 被调用，他返回`WelcomeView`
4.  用户离开应用程序。
5.  用户重新打开应用程序并再次执行步骤 1。

图像选择器未打开。我可以拍张照片，没关系 - 但用户看不到他在拍什么。

```
OverlayViewController.h

@interface OverlayViewController : BaseViewController<UIImagePickerControllerDelegate,UINavigationControllerDelegate>
@property (nonatomic,weak) id<OverlayViewControllerDelegate> delegate;
@property (nonatomic,retain) UIImagePickerController *imagePickerController;
@end

OverlayViewController.m:

- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    if (self) {
        self.imagePickerController = [[UIImagePickerController alloc] init];
        self.imagePickerController.delegate = self;
    }
    return self;
}

- (void)viewDidLoad
{   
    [super viewDidLoad];
    self.view.backgroundColor = [UIColor clearColor];
}

- (IBAction)takePicture:(id)sender {
    [self.imagePickerController takePicture];
}

- (IBAction)cancelImagePicker:(id)sender {
    [self.delegate didCancelCamera];
}

- (void) setupImagePicker:(UIImagePickerControllerSourceType) sourceType
{
    self.imagePickerController.sourceType = sourceType;
    if (sourceType == UIImagePickerControllerSourceTypeCamera)
    {
        self.imagePickerController.showsCameraControls = NO;
        if ([[self.imagePickerController.cameraOverlayView subviews] count] ==0)
        {
            CGRect overlayViewFrame = self.imagePickerController.cameraOverlayView.frame;
            CGRect newFrame = CGRectMake(0.0, CGRectGetHeight(overlayViewFrame)-self.view.frame.size.height-10.0, CGRectGetWidth(overlayViewFrame), self.view.frame.size.height + 10.0);
            self.view.frame = newFrame;
            [self.imagePickerController.cameraOverlayView addSubview:self.view];
        }
    }
}

- (void)finishAndUpdate
{
    [NSThread detachNewThreadSelector:@selector(threadStartAnimating:) toTarget:self withObject:nil];
    [self.delegate didFinishWithCamera];  // tell our delegate we are done with the camera
}

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    [self finishAndUpdate];
}

TakePhotoViewController.h

@interface TakePhotoViewController : BaseViewController<UIImagePickerControllerDelegate,UINavigationControllerDelegate,OverlayViewControllerDelegate>
@property (nonatomic, retain) OverlayViewController *overlayViewController;
@end

TakePhotoViewController.m

- (void)viewDidLoad
{
    [super viewDidLoad];
    UIStoryboard *sb = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    // Insert the overlay
    self.overlayViewController = (OverlayViewController *)[sb instantiateViewControllerWithIdentifier:@"Overlay"];
    self.overlayViewController.delegate = self;   
}
- (void)viewDidUnload
{
    self.overlayViewController = nil;
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}
- (void)openImagePicker {
   if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]){
       [self showImagePicker:UIImagePickerControllerSourceTypeCamera];
   }
   else{
       [self showImagePicker:UIImagePickerControllerSourceTypePhotoLibrary];
   }
}

- (void)viewDidAppear:(BOOL)animated{
    if (appDelegate.shouldOpenPicker){
      [self openImagePicker];
    }
}
- (void)showImagePicker:(UIImagePickerControllerSourceType)sourceType
{

    if ([UIImagePickerController isSourceTypeAvailable:sourceType])
    {
       [self.overlayViewController setupImagePicker:sourceType];
       [self presentViewController:self.overlayViewController.imagePickerController animated:YES completion:nil];
    }
}
-(void)didCancelCamera{
    [[self.overlayViewController.imagePickerController presentingViewController] dismissViewControllerAnimated:NO completion:^ {
        [self performSegueWithIdentifier:@"fromTakeToWelcome" sender:self];
    }];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:57:27.080

我发现了这个错误。

方法

`-(void)didCancelCamera``TakePhotoViewController`当用户点击`- (IBAction)cancelImagePicker:(id)sender`in时调用from `OverlayViewController`。

但是，不知何故，代码中的代码`didCancelCamera`会再次调用并重新打开图像选择器`viewDidAppear`。`TakePhotoViewController`

我不知道为什么

```
[[self.overlayViewController.imagePickerController presentingViewController] dismissViewControllerAnimated:NO completion:^ {
        [self performSegueWithIdentifier:@"fromTakeToWelcome" sender:self];
    }]; 
```

导致再次调用该视图 (TakePhoto) 的 viewDidAppear 方法。

希望它会帮助某人

# php - php 中的类树构建

> ID：14113628
> 
> 赞同：-1
> 
> 时间：2013-01-01T19:47:42.420
> 
> 标签：php, codeigniter, hierarchical-data

我正在为网站制作目录，并且正在构建类别树。这是我的第一个主要 php 项目。使用 codeigniter 框架，我正在尝试使用本教程[http://www.phpbuilder.com/articles/databases/mysql/handling-hierarchical-data-in-mysql-and-php.html](http://www.phpbuilder.com/articles/databases/mysql/handling-hierarchical-data-in-mysql-and-php.html)因为它很简单。

我把它分解成 MVC 并创建了这个模型：

```
<?php 
```

ini_set('display_errors', 1); 错误报告（~0）；室内装潢类扩展 CI_Model{

```
function get_path($category_id)
{
    // look up the parent of this node
    $result = mysql_query("SELECT c1.parent_id,c2.category_name AS parent_name FROM category AS c1 LEFT JOIN category AS c2 ON c1.parent_id=c2.category_id WHERE c1.category_id='$category_id' ");
    $row = mysql_fetch_array($result);

   // save the path in this array
    $path = array();

    //continue if this node is not the root node
    if ($row['parent_id']!=NULL)
    {
        // the last part of the path to node

        end($path);
        $last_key = key($path);
        $key = $last_key==0 ? 0 : $last_key+1;

        $path[$key]['category_id'] = $row['parent_id'];
        $path[$key]['category_name'] = $row['parent_name'];

        $path = array_merge(get_path($row['parent_id']), $path);
    }

   return $path;
}

function get_children($category_id, $level)
{
    $html = "";
    // retrieve all children
        //$result = mysql_query("SELECT * FROM category WHERE parent_id='$category_id'");
        //return $query->result();
        //$query = $this->db->get_where("products", array("productname" => $productname));

    $query = $this->db->get_where("category", array("parent_id" => $category_id));

            while ($row = $query)
            {
                // indent and display the title of this child
               // if you want to save the hierarchy, replace the following line with your code
                $html = $html . str_repeat('  ',$level) . $row['category_name'] . "<br/>";

               // call this function again to display this child's children
               get_children($row['category_id'], $level+1);
            }
        return $html;
}
} 
```

这个控制器：

```
<?php
ini_set('display_errors', 1); error_reporting(~0);
class Pages extends CI_Controller {

public function index()
{
$this->home();
}

public function home()
{
    $this->load->view('header');
    $this->load->view('nav');
    $this->load->view('home/left_menu');
    $this->load->view('home/home_content');
//      $this->load->view('footer');
}
public function upholstery()
    {
    //load path for bread crumb
    $this->load->model("upholstery_get");
    $data["pathData"] = $this->upholstery_get->get_path("182 Davenport");
    $HTMLdata = $this->upholstery_get->get_children("182 Davenport", 3);

    //load product model
    $this->load->model("model_get");
    $data["productData"] = $this->model_get->getData("182 Davenport");

    $this->load->view('header');
    $this->load->view('nav');
    $this->load->view('upholstery/upholstery_menu');
    $this->load->view('upholstery/upholstery_content', $data);
//      $this->load->view('footer');
    }   
public function fabrics()
{
    $this->load->view('header');
    $this->load->view('nav');
    $this->load->view('fabric/fabric_menu');
    $this->load->view('fabric/fabric_content');
//      $this->load->view('footer');
}   

public function contact()
{
    $this->load->view('header');
    $this->load->view('nav');
    $this->load->view('contact/left_menu');
    $this->load->view('contact/contact_content');
//      $this->load->view('footer');
}

public function about()
{
    $this->load->view('header');
    $this->load->view('nav');
    $this->load->view('about/left_menu');
    $this->load->view('about/about_content');
//      $this->load->view('footer');
}
} 
```

这个观点：

```
<div id="menu">

<strong><font size="3"><font color="#9a141b"><font style="font-size: 20px;" color="#ac7643" face="Palatino Linotype, Book Antiqua, Palatino, serif">Upholstery<br></font><b><font face="Palatino Linotype, Book Antiqua, Palatino, serif" size="5"><br>

    // display generated HTML
    <?php echo $HTMLdata?>

</div> 
```

我的数据库：

```
CREATE TABLE `category` (
`category_id` int(10) NOT NULL AUTO_INCREMENT,
`category_name` varchar(50) NOT NULL,
`parent_id` int(10) DEFAULT NULL,
PRIMARY KEY (`category_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=4 ;

INSERT INTO `category` (`category_id`, `category_name`, `parent_id`) VALUES
(1, 'Upholstery', NULL),
(2, 'Sofes', 1),
(3, '182 Davenport', 2); 
```

这是我将其击倒的错误。由于我是初学者，如果有人可以帮助我解决错误，将不胜感激。

```
 Fatal error: Cannot use object of type CI_DB_mysql_result as array in /Users/Home/Sites/application/models/upholstery_get.php on line 46 
```

我相信我的问题在视图中。我确定没有正确分解，但是这段代码会去哪里？进入控制器？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:56:05.633

> *这是一个比答案更冗长的评论：*
> 
> * * *
> 
> 当我访问我的网站时，页面完全变成白色，并且没有源代码。因此，我很难解决问题。如果有人可以帮助我解决错误，将不胜感激。

这就是所谓的白屏死机 (WSOD)，您可以在网站上的 PHP 错误参考中找到如何处理此问题：

*   [**参考 - 这个错误在 PHP 中是什么意思？**](https://stackoverflow.com/q/12769982/367456)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-12T06:42:51.567

试试这个：

```
public function get_catagory($parent_id=0)
    { 
        $this->db->where('parent_id', $parent_id);

        $result = $this->db->get('catagory')->result();

        foreach ($result as $row){

            $i = 0;
            if ($i == 0) echo '<ul>';
            echo '<li>' .$row->catagory;

            $this->get_catagory($row->id);
            echo '</li>';
            $i++;
            if ($i > 0) echo '</ul>';

        }

    } 
```

# python - 当 python 列表迭代是和不是参考时

> ID：14113641
> 
> 赞同：3
> 
> 时间：2013-01-01T19:49:25.463
> 
> 标签：python, reference

有人可以简要解释这两个 Python 操作在修改列表方面的区别吗？

```
demo = ["a", "b", "c"]

for d in demo:
    d = ""

print demo
#output: ['a', 'b', 'c']

for c in range(len(demo)):
    demo[c] = ""

print demo
#output: ['', '', ''] 
```

换句话说，为什么第一次迭代不修改列表？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T19:58:51.513

循环变量`d`始终是对可迭代对象元素的引用。这个问题实际上并不是何时或何时不是参考的问题。它与您使用循环执行的分配操作有关。

在第一个示例中，您将对象中元素的原始引用与另一个空字符串的引用重新绑定。这意味着您实际上并没有对**value**做任何事情。您只需为符号分配一个新的引用。

在第二个示例中，您正在执行索引操作并为该索引处的值分配新引用。`demo`保持相同的引用，并且您正在替换容器中的值。
该作业实际上相当于：`demo.__setitem__(c, "")`

```
a = 'foo'
id(a)  # 4313267976
a = 'bar'
id(a)  # 4313268016

l = ['foo']
id(l)  # 4328132552
l[0] = 'bar'
id(l)  # 4328132552 
```

请注意在第一个示例中，对象 ID 发生了怎样的变化。它是对新对象的引用。在第二个中，我们索引列表并替换容器中的值，但列表仍然是同一个对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-01T19:52:07.793

在第一个示例中，`d`可以将变量视为列表中元素的副本。这样做时`d = ""`，您实际上是在修改列表中任何内容的副本，这自然不会更改列表。

在第二个示例中，通过`range(len(demo))`对列表中的元素进行操作和索引，您可以直接访问和更改列表中的元素。因此，doing`demo[c]`会修改列表。

如果您确实想从循环内部直接修改 Python 列表，则可以复制该列表并对其进行操作，或者最好使用列表推导式。

所以：

```
>>> demo = ["a", "b", "c"]
>>> test = ["" for item in demo]
>>> print test
["", "", ""]

>>> demo2 = [1, 5, 2, 4]
>>> test = [item for item in demo if item > 3]
>>> print test
[5, 4] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T20:18:21.297

当你这样做时，`d = <something>`你正在使变量`d`引用`<something>`. 这样您就可以`d`像使用`<something>`. 但是，如果您这样做`d = <something else>`，则`d`现在指向`<something else>`和不再指向`<something>`（`=`符号用作赋值运算符）。在 的情况下`demo[c] = <something else>`，您正在分配`<something else>`给`(c+1)th`列表中的项目。

但是，要注意的一件事是，如果该项目`d`具有要调用的自修改方法，则可以执行

```
for d in demo:
    d.<some method>() 
```

因为列表`demo`包含那些对象（或对对象的引用，我不记得了），因此如果修改了这些对象，列表也会被修改。

# java - Java - 全局的、可重用的加载对话框

> ID：14113644
> 
> 赞同：1
> 
> 时间：2013-01-01T19:50:24.917
> 
> 标签：java, swing, dialog, loading, global

我正在尝试实现一个全局加载对话框...我想调用一些静态函数来显示对话框和一些静态函数来关闭它。与此同时，我正在主线程或子线程中做一些工作......

我尝试关注，但对话框没有更新......最后一次，在再次隐藏之前，它更新......

```
 private static Runnable getLoadingRunable()
{
    if (loadingRunnable != null)
    {
        loadingFrame.setLocationRelativeTo(null);
        loadingFrame.setVisible(true);  
        return loadingRunnable;
    }

    loadingFrame = new JFrame("Updating...");
    final JProgressBar progressBar = new JProgressBar();
    progressBar.setIndeterminate(true);
    final JPanel contentPane = new JPanel();
    contentPane.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));
    contentPane.setLayout(new BorderLayout());
    contentPane.add(new JLabel("Updating..."), BorderLayout.NORTH);
    contentPane.add(progressBar, BorderLayout.CENTER);
    loadingFrame.setContentPane(contentPane);
    loadingFrame.pack();
    loadingFrame.setLocationRelativeTo(null);
    loadingFrame.setVisible(true);  

    loadingRunnable = new Runnable() {
        public void run() {

            try {
                while (running) {
                    Thread.sleep(100);
                }
            } catch (InterruptedException e) {
                e.printStackTrace();
            }

            SwingUtilities.invokeLater(new Runnable() {
                public void run() {
                    loadingFrame.setVisible(false);
                }
            });
        }
    };
    return loadingRunnable;
}

public static void showLoadingBar() {
    System.out.println("showLoadingBar");
    running = true;

    threadLoadingBar = new Thread(getLoadingRunable());
    threadLoadingBar.start();
}

public static void hideLoadingBar() {
    System.out.println("hideLoadingBar");
    running = false;
    threadLoadingBar = null;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-01T22:04:50.203

Swing 使用单线程模型进行事件分派（包括绘制更新），因此，您永远不应该在事件分派线程 (EDT) 中执行任何长时间运行或阻塞的操作。

Swing 也不是线程安全的，这意味着您永远不应该从 EDT 之外创建或修改任何 UI 组件。

全局进度对话框的基本概念是提供一个不依赖于需要执行的工作的框架，这将责任区域分开，进度对话框负责显示进度，工作人员/引擎负责做实际工作。

最简单的解决方案是使用`SwingWorker`. 这提供了在单独的线程中执行长时间运行的任务、状态更改和进度通知的机制。

![在此处输入图像描述](../Images/f8907449aa61ea1367339ae3c2e06f1b.png)

```
public class TestProgressDialog {

    public static void main(String[] args) {
        new TestProgressDialog();
    }

    public TestProgressDialog() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                SwingWorker worker = new SwingWorker() {
                    @Override
                    protected Object doInBackground() throws Exception {
                        for (int index = 0; index < 100; index++) {
                            Thread.sleep(50);
                            setProgress(index);
                        }
                        return null;
                    }

                };

                ProgressDialog.showProgress(null, worker);

                System.exit(0);

            }

        });
    }

    public static class ProgressDialog extends JDialog {

        private JLabel message;
        private JLabel subMessage;
        private JProgressBar progressBar;

        public ProgressDialog(Component parent, SwingWorker worker) {

            super(parent == null ? null : SwingUtilities.getWindowAncestor(parent));
            setModal(true);

            ((JComponent)getContentPane()).setBorder(new EmptyBorder(8, 8, 8, 8));

            message = new JLabel("Doing important stuff");
            subMessage = new JLabel("Go make you're self a cup of coffee...");
            progressBar = new JProgressBar();

            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.insets = new Insets(2, 2, 2, 2);
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.anchor = GridBagConstraints.WEST;
            add(message, gbc);

            gbc.gridy++;
            add(subMessage, gbc);

            gbc.gridy++;
            gbc.weightx = 1;
            gbc.fill = GridBagConstraints.HORIZONTAL;
            add(progressBar, gbc);

            pack();

            worker.addPropertyChangeListener(new PropertyChangeHandler());
            switch (worker.getState()) {
                case PENDING:
                    worker.execute();
                    break;
            }

        }

        public static void showProgress(Component parent, SwingWorker worker) {

            ProgressDialog dialog = new ProgressDialog(parent, worker);
            dialog.setLocationRelativeTo(parent);
            dialog.setVisible(true);

        }

        public class PropertyChangeHandler implements PropertyChangeListener {

            @Override
            public void propertyChange(PropertyChangeEvent evt) {
                if (evt.getPropertyName().equals("state")) {
                    SwingWorker.StateValue state = (SwingWorker.StateValue) evt.getNewValue();
                    switch (state) {
                        case DONE:
                            dispose();
                            break;
                    }
                } else if (evt.getPropertyName().equals("progress")) {
                    progressBar.setValue((int)evt.getNewValue());
                }
            }

        }

    }

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-01T20:39:17.733

如果它没有动画，则表示您在显示加载帧时正在事件调度线程中工作。这个后台工作应该在另一个线程中完成。

这是一个无效的示例：

```
public static void main(String[] args) throws Exception {
    SwingUtilities.invokeLater(
        new Runnable() {
            @Override
            public void run() {
                try {
                    showLoadingBar();
                    Thread.sleep(10000L); // doing work in the EDT. Prevents the frame from animating
                    hideLoadingBar();
                }
                catch (InterruptedException e) {
                }
            }
        }
    );
} 
```

这是一个工作示例：

```
public static void main(String[] args) throws Exception {
    showLoadingBar();
    Thread.sleep(10000L); // doing work outside of the EDT. Everything works fine
    hideLoadingBar();
} 
```

旁注：实例化、填充和使加载框架可见的代码应该包装到`SwingUtilities.invokeLater()`中，因为它必须在 EDT 中运行。

# php - 选择使用双引号字符串时，mysql 上出现错误 1064 <42000>

> ID：14113648
> 
> 赞同：0
> 
> 时间：2013-01-01T19:50:35.043
> 
> 标签：php, mysql, zend-framework2

Zend Framework 2 产生的查询：

```
SELECT "uc".*, "c".* FROM "user_contacts" AS "uc" INNER JOIN "contacts" AS "c" ON "uc"."contact_id" = "c"."contact_id" WHERE "uc"."user_id" = '2' AND "c"."user_id" = '1'; 
```

导致此错误（在命令行上运行时）：

```
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '.*, "c".* FROM "user_contacts" AS "uc" INNER JOIN "contacts" AS "c" ON "uc"."con' at line 1 
```

此查询（完全相同的查询减去双引号）运行良好：

```
SELECT uc.*, c.* FROM user_contacts AS uc INNER JOIN contacts AS c ON uc.contact_id = c.contact_id WHERE c.user_id = 2 AND uc.user_id = 1;

+---------+------------+------------+---------+
| user_id | contact_id | contact_id | user_id |
+---------+------------+------------+---------+
|       1 |          7 |          7 |       2 |
+---------+------------+------------+---------+
1 row in set (0.00 sec) 
```

为什么会这样，我该如何解决？

在 Ubuntu 12.10 上使用 AMP 堆栈。

表格如下所示：

```
CREATE TABLE `contacts` (
    `contact_id` int(11) NOT NULL AUTO_INCREMENT,
    `user_id` int(11) NOT NULL,
    PRIMARY KEY (`contact_id`),
    UNIQUE KEY `contact_id_UNIQUE` (`contact_id`)
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8

CREATE TABLE `user_contacts` (
    `user_id` int(11) NOT NULL,
    `contact_id` int(11) NOT NULL,
    PRIMARY KEY (`user_id`,`contact_id`),
    KEY `user_contacts_user_id_fkey_idx` (`user_id`),
    KEY `user_contacts_contact_id_idx` (`contact_id`),
    CONSTRAINT `user_contacts_contact_id_fkey` FOREIGN KEY (`contact_id`) REFERENCES    `contacts` (`contact_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
    CONSTRAINT `user_contacts_user_id_fkey` FOREIGN KEY (`user_id`) REFERENCES `user` (`user_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

Zend db 适配器代码：

```
return array(
    'db' => array(
        'driver'         => 'Pdo',
        'dsn'            => 'mysql:dbname=' . $dbName . ';host=' . $host,
        'driver_options' => array(
            PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''
        ),
    ),
    'service_manager' => array(
        'factories' => array(
            'Zend\Db\Adapter\Adapter'
                => 'Zend\Db\Adapter\AdapterServiceFactory',
        ),
    ),
); 
```

选择代码：

```
public function checkIfFriends($currentUserId,$requestedUserId) {
    $currentUserId      = (int) $currentUserId;
    $requestedUserId    = (int) $requestedUserId;

    $sql = new Sql($this->tableGateway->getAdapter());

    $select = $sql->select();
    $select->from(array('uc' => $this->tableGateway->getTable()))
        ->join(array('c' => 'contacts'), 'uc.contact_id = c.contact_id');

    $where = new Where();
    $where
        ->equalTo('uc.user_id', $currentUserId)
        ->equalTo('c.user_id', $requestedUserId);
    $select->where($where);

    //echo $select->getSqlString();
    $rowSet = $this->tableGateway->selectWith($select);
    $row = $rowSet->current();
    return ($row) ? true: false;  
} 
```

为什么这被作为一个完全重复的副本关闭？不是。我知道问题可能是相同的，但 ZF2 正在生成一个由于引用而无法运行的查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T20:32:49.593

[此 Zend Framework 论坛帖子中的](http://zend-framework-community.634137.n4.nabble.com/ZF2-PDO-mysql-quoting-problem-td4656047.html)解决方案：

工作，但不是一个真正可以接受的解决方案，一个更好的解决方案将不胜感激。

```
public function checkIfFriends($currentUserId,$requestedUserId) {
    $currentUserId      = (int) $currentUserId;
    $requestedUserId    = (int) $requestedUserId;

    $sql = new Sql($this->tableGateway->getAdapter());

    $select = $sql->select();
    $select->from(array('uc' => $this->tableGateway->getTable()))
        ->join(array('c' => 'contacts'), 'uc.contact_id = c.contact_id');

    $where = new Where();
    $where
        ->equalTo('uc.user_id', $currentUserId)
        ->equalTo('c.user_id', $requestedUserId);
    $select->where($where);

    $dbAdapter = $this->tableGateway->getAdapter();
    $string = $sql->getSqlStringForSqlObject($select);
    $rowSet = $dbAdapter->query($string, $dbAdapter::QUERY_MODE_EXECUTE);

    $row = $rowSet->current();
    return ($row) ? true: false;  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-19T11:47:40.933

我通过关闭操作系统中的死键设置解决了这个问题。如何在 Linux Mint 中执行此操作： http://forums.linuxmint.com/viewtopic.php?f=55&t= [97812](http://forums.linuxmint.com/viewtopic.php?f=55&t=97812)

# php - 回显数据库内容时，PHP脚本关闭文本字段

> ID：14113650
> 
> 赞同：-2
> 
> 时间：2013-01-01T19:50:48.687
> 
> 标签：php, mysql, echo, textfield

我正在尝试将数据库行的内容加载到文本字段中，我遇到的问题是我要加载到文本字段框中的内容里面有文本字段代码，所以不是将行加载到文本字段中正在发生的是将所有行内容加载到文本字段中，直到达到结账税，然后关闭文本字段并在页面本身上回显剩余的代码。

![在此处输入图像描述](../Images/e73cd66b3a90de0e97154b6d9caa3a0c.png)

我正在使用的代码如下所示>>

```
 <?php
  $result = mysql_query("SELECT * FROM u5b0y_chronoforms WHERE id='4'");

 while($row = mysql_fetch_array($result))
  {$content = $row['content'];
   }

   echo '<textarea style="width:800px; height:500px;" name="" cols=""                 rows="">'.$content.'</textarea>';

   ?> 
```

正在加载的内容如下所示，它到达文本字段结束标记，然后关闭文本字段，而不是将其全部加载到文本字段中。

![在此处输入图像描述](../Images/6afac3a4a600a466df3f9d738d2caa51.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:54:37.907

您需要在标签之间回显内容，例如

```
<?php
  $fetch_content = mysqli_fetch_array(mysqli_query($connection, "SELECT * FROM table_name"));
?>
<textarea><?php echo $fetch_content['column_name']; ?></textarea> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T20:01:37.223

如果您想在 HTML 中输出 HTML 而不实际让浏览器将其呈现（显示）为 HTML，则需要对其进行编码，使其看起来仍然像 HTML（在浏览器中），但只是作为文本的 HTML：

```
$text = htmlspecialchars($content); 
```

然后，您可以将其回显到 textarea 中：

```
echo '<textarea style="width:800px; height:500px;" name="" cols="" rows="">', 
      $text, '</textarea>'; 
```

或类似的。见[http://php.net/htmlspecialchars](http://php.net/htmlspecialchars)

另外注意你的括号。

# android - Galaxy s iii AsyncTask 未正确执行

> ID：14113653
> 
> 赞同：0
> 
> 时间：2013-01-01T19:51:44.823
> 
> 标签：android, android-asynctask, android-4.0-ice-cream-sandwich

我正在使用 asynctask 进行蓝牙套接字通信。它在galaxy s ii（android 2.3.3）上运行良好，但有时不适用于galaxy s iii（android 4.0.4）。

```
class MyTask extends AsyncTask<Void, long[], Void> {
     long[] d = new long[40];

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        Log.e("BTtest", "MyTask preexecute");
    }

    @Override
    protected Void doInBackground(Void... v) {
        int count = 0;
        Log.e("BTtest", "Mytask background start " );
            *******creting socket and streams*******
                    *********logic*******
                    publishProgress(d);
            }

    @Override
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);
        **logic**           
    }

    @Override
    protected void onProgressUpdate(long[]... data) {
        super.onProgressUpdate(data);
                    *******logic***
        }

} 
```

来自 onCreate 按钮功能：

```
mt = new MyTask();
mt.execute( ); 
```

有时在galaxy s iii 上调用onPreExecute 方法而doInBackground 方法未启动。但其他时候调用后台方法。它看起来像随机的。

有任何想法吗？

wildhemp 建议只在一个线程中执行哪些异步任务。我在一个活动中编写了这 3 个异步任务的测试应用程序：

```
public class MainActivity extends Activity {

 MyTask mt1, mt2, mt3;
  TextView tvInfo;

  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    tvInfo = (TextView) findViewById(R.id.tvInfo);
  }

  public void onclick(View v) {
        mt1 = new MyTask();
        mt1.execute("file_path_1", "file_path_2", "file_path_3", "file_path_4");
        mt2 = new MyTask();
        mt2.execute("file_path_1", "file_path_2", "file_path_3", "file_path_4");
        mt3 = new MyTask();
        mt3.execute("file_path_1", "file_path_2", "file_path_3", "file_path_4");
  }

  class MyTask extends AsyncTask<String, Integer, Void> {

    @Override
    protected void onPreExecute() {
      super.onPreExecute();
      tvInfo.append("Begin \n");
    }

    @Override
    protected Void doInBackground(String... urls) {
      try {
        int cnt = 0;
        for (String url : urls) {
          downloadFile(url);
          publishProgress(++cnt);
        }

      } catch (InterruptedException e) {
        e.printStackTrace();
      }
      return null;
    }

    @Override
    protected void onProgressUpdate(Integer... values) {
      super.onProgressUpdate(values);
      tvInfo.append("Downloaded " + values[0] + " files \n");
    }

    @Override
    protected void onPostExecute(Void result) {
      super.onPostExecute(result);
      tvInfo.append("End\n");
    }

    private void downloadFile(String url) throws InterruptedException {
      int i=0;
      while (i<100000000){
          i+=1;
      }
    }
  }
} 
```

它在 sgs2、sgs3 和模拟器上运行良好。应用程序在 sgs3 上以 75%（4 个内核上的 3 个线程）加载 cpu。sgs2 加载 100%（2 个内核上的 3 个线程）。这意味着每个异步任务在单独的线程中执行。

问题解决了。谢谢。我已经更改了项目目标构建版本。现在执行代码：

```
 mt = new MyTask();

                    if (Build.VERSION.SDK_INT >= 11){
                        mt.executeOnExecutor( AsyncTask.THREAD_POOL_EXECUTOR); //work on sgs3 android 4.0.4
                    }
                    else {
                        mt.execute(); // work on sgs2 android 2.3
                    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T19:59:18.897

这可能会发生，因为 4.0.4 上的 doInBackground 默认使用 1 个线程来运行所有异步任务，所以如果另一个 doInBackground 仍在工作，它将阻止执行，我认为在这种情况下会调用 onPreExecute，因为它是在主线程上运行。在 2.3.3 中，asynctask 使用更多线程（AFAIK 为每个任务一个新线程）。

更新：这是android[文档](http://developer.android.com/reference/android/os/AsyncTask.html)所说的：

> 首次引入时，AsyncTask 在单个后台线程上串行执行。从 DONUT 开始，这被更改为允许多个任务并行运行的线程池。从 HONEYCOMB 开始，任务在单个线程上执行，以避免并行执行导致的常见应用程序错误。
> 
> 如果你真的想要并行执行，你可以使用 THREAD_POOL_EXECUTOR 调用 executeOnExecutor(java.util.concurrent.Executor, Object[])。

# c++ - std::unordered_map::insert 的更简单形式？

> ID：14113654
> 
> 赞同：6
> 
> 时间：2013-01-01T19:51:55.527
> 
> 标签：c++, stl, c++11

`std::unordered_map::insert`有没有比编写这个庞大的代码块更简单的方法来检查调用是否成功？

```
std::pair< T1, T2 > pair(val1, val2);
std::pair< std::unordered_map< T1, T2 >::const_iterator, bool> ret =
 _tileTypes.insert(pair);
if(!ret.second) {
    // insert did not succeed
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-01T19:54:35.820

怎么样：

```
if(!_tileTypes.insert(std::make_pair(val1, vla2)).second) {
    // insert did not succeed
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-01T19:54:22.580

```
if (!_tileTypes.insert(pair).second) 
```

?

或者，typedef 可以用来整理这类事情。

此外，如果您使用的是 C++11，那么您可以使用`auto`关键字来推断类型：

```
auto ret = _tileTypes.insert(pair); 
```

# winapi - 如何判断 Office 剪贴板收藏是否已打开？

> ID：14113663
> 
> 赞同：0
> 
> 时间：2013-01-01T19:53:13.750
> 
> 标签：winapi, ms-office, reverse-engineering

我想知道 Office 剪贴板集合是否已打开。这是保存最后 24 个剪贴板数据的剪贴板窗格。在 Office 2007 和 2010 上，您可以通过展开主页功能区上的剪贴板区域来获得它，而在 Office 2003 中，您可以从任务窗格区域打开它，然后从菜单中选择剪贴板。

我有一个 Office 插件。

虽然我正在做各种 API 挂钩（使用 IAT），但我正在寻找最简单的解决方案。

1.  我最初的想法是寻找一个标题为“收集并粘贴 2.0”的窗口（使用 Spy++ 自行检查），并带有各种 Windows 类（例如，在 Word 中它是 bosa_sdm_msword）。但是，用户可以选中“收集而不显示 Office 剪贴板”，然后重新启动 Office。此时，Office 将在没有任何迹象的情况下收集数据到 Window。

2.  我正在查看注册表项：Software\Microsoft\Office\%d.0\Common\General\AcbOn。这很酷，但是在用户退出 Office 之前不会保存此条目。因此，用户可以打开不同的应用程序，打开收藏，关闭窗口。

3.  Office 剪贴板在通知区域中创建一个图标。查看问题：[如何获取通知区域图标列表？](https://stackoverflow.com/q/3893360/341971). 不幸的是，这个问题没有得到有效的答案。如果您知道此问题的答案，请在此处或在该问题上回复（您将获得两次 +1！）

正如我所说，我在应用程序的进程中，我能够拦截任何具有导出符号的东西，但我想尽量减少对应用程序的影响。例如，拦截发送消息或子类化 Window 将对 Office 应用程序的性能（在某些情况下：稳定性）产生影响。

在 Office 2003 中有一个名为 ('ActiveClipboard') 的类的窗口，但我在 2007 年和 2010 年找不到它。另一方面，我看到 WM_USER+2304，我不知道它是什么。

有没有人走过那条路？有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:41:20.380

回答我自己的问题：

据我所知，Office 在对象模型中没有任何事件或 API 来告诉您 Office 是否正在收集剪贴板。但是，这两种方法的组合对我有用：

1.  枚举系统中的所有窗口，并搜索具有以下属性（分别为类名/标题）的窗口：

    Word 2010：“bosa_sdm_msword”、“收集和粘贴 2.0” Word 2003：“bosa_sdm_Microsoft Office Word 11.0”、“收集和粘贴 2.0” Word 2007：“bosa_sdm_Microsoft Office Word 12.0”、“收集和粘贴 2.0” Excel（全部）： bosa_sdm_XL9", "收集和粘贴 2.0" PowerPoint (all): "bosa_sdm_Mso96", L"收集和粘贴 2.0"

    如果存在此类窗口，则表示 Office 正在收集剪贴板数据。

2.  搜索注册表项：HKCR\Software\Microsoft\Office\14.0\Common\General\AcbOn (REG_DWORD)。值 1 表明 Office 正在收集数据。

# azure - Azure 网站上的 SQLite

> ID：14113665
> 
> 赞同：24
> 
> 时间：2013-01-01T19:53:23.577
> 
> 标签：azure, sqlite

我一直在尝试让 SQLite 在 Azure 网站上运行。我已成功部署所有内容，但我需要将其指向数据库的文件名。我已经研究过创建 Blob 存储，但我不确定如何将其转换为 SQLite 将接受的文件名。

我确信这已经完成，因为我可以看到与 Azure 上的 SQLite 相关的其他问题的参考。

我已阅读[http://www.sqlite.org/whentouse.html](http://www.sqlite.org/whentouse.html)。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-02T00:34:38.347

根据我的经验，如果您想将 SQLite 与 Azure 网站一起使用，您可以将数据库文件保存在您的部署包中，这样它将与您的网站所在的服务器保持一致。Azure 网站提供 1GB 的应用程序存储空间，足以存储数据库文件。您在网站上的内容将持续存在，并且对 SQLite DB 的访问将很快。这非常简单，您可以非常轻松地使用 ASP.NET Web 应用程序或任何其他应用程序。

选择 Azure Blob 存储的问题是，如果数据库文件存储在 Azure Blob 存储中，则没有 SQLite 可以写入该文件的 API。因此，您可以选择的一种选择是先在本地写入，然后来回同步到 Azure Blob 存储，而 SO 上的其他人可能还有其他选择。如果您出于任何原因想将数据库文件备份到 Azure Blob 存储，您肯定可以单独执行此操作，但我认为如果您选择拥有 SQLite，最好将数据库文件与网站一起保存以使其简单。

# javascript - KineticJS 的继承模型是如何工作的？

> ID：14113667
> 
> 赞同：3
> 
> 时间：2013-01-01T19:53:32.877
> 
> 标签：javascript, html, inheritance, kineticjs

我对 JavaScript 有点陌生，我知道可以使用不同的继承模型。我有一个使用 KineticJS 的项目，我在他们的变更**[日志](http://webscripts.softpedia.com/scriptViewChangelog/KineticJS-Changelog-74338.html)**中注意到，他们随着项目 v3.10.3 的发布改变了继承模型，这样我们就可以`'more easily extend or add custom methods to Kinetic classes'`

我已经对此进行了一些搜索，但我似乎无法在任何地方找到一个明确的例子。我想知道是否有人可以告诉我将属性和方法添加到 Kinetic 类的正确方法是什么，以及如何扩展它们以创建自己的自定义类？KineticJS 中使用的继承模型是 javascript 中常见的继承模型吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T20:35:01.827

我建议遵循**KineticJS**源代码中的方法。[这篇博客文章](http://blog.chronos-technology.nl/2013/07/extending-kineticjs-shapes/#fullcodeexample)解释了如何但有点过时，因此我将包含一个最新示例，该示例还展示了如何向自定义形状添加属性。

下面的代码给出了一个创建新`Shape.Arc`对象的例子。此示例显示如何添加新函数和属性。

```
var Shape = {};
(function () {
    Shape.Arc = function (config) {
        this.initArc(config);
    };
    Shape.Arc.prototype = {
        initArc: function (config) {
            Kinetic.Shape.call(this, config);
            this._setDrawFuncs();
            this.shapeType = 'Arc;'
            drc.ui.utils.setupShape(this);
        },
        drawFunc: function (context) {
            context.beginPath();
            context.arc(0,0, this.getRadius(), this.getStartAngle(), 
                this.getEndAngle(), true);
            context.fillStrokeShape(this);
        }
    };
    Kinetic.Util.extend(Shape.Arc, Kinetic.Shape);

    //Add properties to shape.
    //The code below adds the getRadius(), getStartAngle() functions above.
    Kinetic.Factory.addGetterSetter(Shape.Arc, 'radius', 0);
    Kinetic.Factory.addGetterSetter(Shape.Arc, 'startAngle', 0);
    Kinetic.Factory.addGetterSetter(Shape.Arc, 'endAngle', 180);
})(); 
```

重要的是它被包装在一个匿名函数中，这样就可以创建多个实例。

要创建圆弧：

```
var arc = new Shape.Arc({
                radius: radius,
                x: centreX,
                y: centreY,
                startAngle: 0,
                endAngle: Math.PI * 2
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T10:47:16.590

您可以使用不同的方式。

1 Kineticjs 方式。来自 kineticjs 来源的示例：

```
Kinetic.Circle = function(config) {
    this._initCircle(config);
};

Kinetic.Circle.prototype = {
    _initCircle: function(config) {
        this.createAttrs();
        // call super constructor
        Kinetic.Shape.call(this, config);
        this.shapeType = 'Circle';
        this._setDrawFuncs();
    },
    drawFunc: function(canvas) {
      /*some code*/
    }
    /* more methods*/
};
Kinetic.Global.extend(Kinetic.Circle, Kinetic.Shape); 
```

2 你也可以用coffeescript继承它：[coffeescript Class](https://stackoverflow.com/questions/14530450/coffeescript-class) 但是在js中看起来不太好：

```
var Gallery,
 __hasProp = {}.hasOwnProperty,
 __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Gallery = (function(_super) {

__extends(Gallery, _super);

function Gallery(config) {
  Kinetic.Stage.call(this, config);
}

Gallery.prototype.add = function(item) {
  console.log(item);
  return Gallery.__super__.add.call(this, item);
};

Gallery.prototype.method = function() {
  return console.log('test');
};

return Gallery;

})(Kinetic.Stage); 
```

# c++ - Berkeley Socket Send 在成功的非阻塞发送上返回 0

> ID：14113669
> 
> 赞同：0
> 
> 时间：2013-01-01T19:54:00.943
> 
> 标签：c++, networking, berkeley-sockets

我正在编写一个非阻塞聊天服务器，到目前为止服务器工作正常，但我不知道如何纠正部分发送，如果它们发生。发送(int, char*, int); 函数总是在发送成功时返回 0，在发送失败时返回 -1。我读过的每个文档/手册页都说它应该返回实际馈送到网络缓冲区的字节数。我已经检查以确保我可以发送到服务器并重复接收数据而不会出现问题。

这是我用来调用发送的函数。我都尝试先将返回数据打印到控制台，然后尝试在 return ReturnValue 上换行；调试时。结果相同，ReturnValue 始终为 0 或 -1；

```
int Connection::Transmit(string MessageToSend)
{         
    // check for send attempts on a closed socket
    // return if it happens.
    if(this->Socket_Filedescriptor == -1)
        return -1;

    // Send a message to the client on the other end
    // note, the last parameter is a flag bit which 
    // is used for declaring out of bound data transmissions.
    ReturnValue  = send(Socket_Filedescriptor,
                         MessageToSend.c_str(),
                         MessageToSend.length(),
                         0); 

    return ReturnValue;        
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T00:17:30.270

为什么不尝试循环发送？例如：

```
int Connection::Transmit(string MessageToSend)
{         
    // check for send attempts on a closed socket
    // return if it happens.
    if(this->Socket_Filedescriptor == -1)
        return -1;

    int expected = MessageToSend.length();
    int sent     = 0;

    // Send a message to the client on the other end
    // note, the last parameter is a flag bit which 
    // is used for declaring out of bound data transmissions.
    while(sent < expected) {
      ReturnValue  = send(Socket_Filedescriptor,
                         MessageToSend.c_str() + sent, // Send from correct location
                         MessageToSend.length() - sent, // Update how much remains
                         0); 
      if(ReturnValue == -1)
        return -1; // Error occurred
      sent += ReturnValue;
    }

    return sent;        
} 
```

这样，您的代码将不断尝试发送所有数据，直到发生错误或成功发送所有数据。

# javascript - 锁定表格单元格宽度，不指定它

> ID：14113671
> 
> 赞同：0
> 
> 时间：2013-01-01T19:54:10.047
> 
> 标签：javascript, jquery, css, html-table

我正在尝试从 js 动态创建一个表格，虽然我知道表格的确切宽度和高度，但我不知道表格单元格的实际宽度。我知道可以找到每个单元格的宽度，但我想知道您是否可以在不指定单元格宽度的情况下实际锁定它。

链接到 jsfiddle：

[http://jsfiddle.net/j3TEz/21/](http://jsfiddle.net/j3TEz/21/)

我的.js文件：

```
window.addEventListener('load',init,false);
function init(){
var table = document.getElementById('myTable');
var tr = 3;
var td=5;

var innerTable = '';

for(var trCounter=0;trCounter<tr;trCounter++){
    innerTable+='<tr>';

    for(var tdCounter=0;tdCounter<td;tdCounter++){
       var id=(trCounter*td)+tdCounter;
       innerTable+='<td id="'+id+'" onclick="addText('+id+')"></td>';                         
    }

    innerTable+='</tr>';
}

table.style.width="600px";
table.style.height="300px";
table.style.border="1px solid black";
table.innerHTML=innerTable;
}

function addText(id){
    document.getElementById(id).innerHTML="Lorem Ipsum";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T21:41:03.977

css table-layout 设置为固定将保持列宽固定，大小将由第一行列确定。希望这有帮助。

# android - Android 签名概念

> ID：14113672
> 
> 赞同：1
> 
> 时间：2013-01-01T19:54:15.763
> 
> 标签：android, sign

我知道如何签署我的申请并做那些实用的事情。但我曾经向我的朋友展示过，却陷入了概念中。有什么区别：1- 密钥库 2- 密钥 3- 证书

什么是用来生成什么的？什么用于签名过程？细节是什么？这件事有链接吗？我试过[http://developer.android.com/tools/publishing/app-signing.html](http://developer.android.com/tools/publishing/app-signing.html)但我没有得到完整的想法：S

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T21:05:28.627

我终于在[了解密钥库、证书和别名中找到了答案](https://stackoverflow.com/questions/5724631/understanding-keystore-certificates-and-alias)

一个很好的参考是：[http ://docs.oracle.com/javase/1.5.0/docs/tooldocs/solaris/keytool.html](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/solaris/keytool.html)

# css - 在 100% 视口的 div 内垂直居中高度可变的 div

> ID：14113676
> 
> 赞同：6
> 
> 时间：2013-01-01T19:54:38.130
> 
> 标签：css, height, vertical-alignment

我知道这看起来像是一个已经被问过很多次的问题，但我就是找不到针对这种非常具体情况的解决方案。

这是我的布局的基本线框：

![在此处输入图像描述](../Images/9ee7ae2928c4a57edc69ae42e9d70c64.png)

基本上，我有几个具有不同背景的 div，它们占据了浏览器窗口的 100% 宽度和 100% 高度。在它们中的每一个中都有另一个 div，它占用其父级的 50% 宽度，但具有可变高度，具体取决于其内容。

我希望所有这些 divs-within-a-div 都垂直对齐。现在，我已经读到在父级上放置一个 display:table-cell 和一个 vertical-align:middle 应该可以工作，但在这种情况下，它似乎只是把事情搞砸了。：-/

我的代码：

```
<head>
<style>
     html, body {
            height: 100%;
        }
        body > div {
            width: 100%;
            height: 100%;
            background-size: cover;
        }

        .centered {
            width: 50%;
            margin: 0 auto;
            background: rgba(0,0,0,0.4);
            padding: 50px 0 30px 0;
        }
</style>
</head>
        <body>

            <div id="pic_1">
                    <div class="centered">content</div>
            </div>

            <div id="pic_2">
                    <div class="centered">content</div>
            </div>

            <div id="pic_3">
                    <div class="centered">content</div> 
            </div>  

        </body> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T20:02:53.120

将祖父元素设置为`display:table; height:100%`，将父元素设置为`display:table-cell; vertical-align:middle`。

有关示例，请参见[此处](http://blog.themeforest.net/tutorials/vertical-centering-with-css/)的“方法 1” 。

[*另外，请注意您的标记[不应使用`class="centered"`](http://phrogz.net/css/HowToDevelopWithCSS.html#semanticselector); 改用语义类名。*]

# foxpro - 在 Visual Fox Pro 数据库中搜索字符串

> ID：14113679
> 
> 赞同：1
> 
> 时间：2013-01-01T19:54:53.213
> 
> 标签：foxpro, visual-foxpro

嗨，我已经搜索了这个，也许这是不可能的，因为我没有找到任何东西。

我需要通过命令行在整个 Visual FoxPro 数据库中查找一个字符串，这可行吗？不是一桌一桌。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:40:24.360

您可以下载 FoxPro 的 GoFish 搜索应用程序并使用它来搜索任何 DBF。

[http://vfpx.codeplex.com/wikipage?title=GoFish](http://vfpx.codeplex.com/wikipage?title=GoFish)

默认情况下不启用 DBF 搜索，因为如果表很大并且有很多行和列，它可以创建一个 loooong 搜索，但是您可以在高级选项页面上的 FileTypes ares 中将 DBF 添加到文件扩展名列表中。

它从 VFP IDE 内部运行。

网站上有一个视频，还有一个用户组链接，您可以加入其中提问。您还可以从应用程序下载完整的源代码。

如果您需要更多帮助，请告诉我。（我是作者）

# javascript - 使用 Dojo 解析器查找模块的子节点

> ID：14113680
> 
> 赞同：0
> 
> 时间：2013-01-01T19:54:57.907
> 
> 标签：javascript, dojo

我们在我们的应用程序上使用 dojo/parser 来解析由我们的服务器端模板语言使用 dojo-data-type 属性生成的 html。

我们需要做的一件常见事情是访问作为模块 domNode 一部分的节点来做某事。我们提出了一种独特的 id 方法来标识我们想要的节点，但这让我因各种原因感到不安。

_templated mixin 允许您在附加到对象实例的模板中定义“附加点”。解析器是否存在类似的东西，因此可以通过模块代码轻松识别节点？

如果不是，那么解析模块的 domNode 以找到这些重要的子节点的最佳方法是什么，尤其是避免属于另一个（子）模块的 domNode 的子节点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T23:25:44.740

不，解析器不支持附加点。那是 Dijit 模板的东西。

使用 ID 是可行的，但这会冒重复 ID 的风险，并且事情会中断。我建议使用 classNames 并使用 dojo.query 查找您的节点。

如果可附加项是其他 Dijit，您可以使用 widget.getChildren() 访问它们；

如果您没有使用 dojo.parser 的所有功能（有很多我没有使用），您可以构建自己的。我建造了一个，与 Dojo 相比，它是如此之小令人震惊。请注意，我的刚刚创建并进行了很少的测试，因此仅供参考。[https://github.com/clubajax/dx-ui/blob/master/util/parser.js](https://github.com/clubajax/dx-ui/blob/master/util/parser.js)

# asp.net-mvc-4 - asp.net web api在发送对象时遇到问题

> ID：14113684
> 
> 赞同：0
> 
> 时间：2013-01-01T19:55:24.133
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我刚刚切换到使用适用于 MVC 4 的新 Web api，并且在反序列化来自我的 Web 服务的响应时遇到了很大的困难。

这是我的服务器代码：

```
IEnumerable<Fish> myList = GetFish();

return Request.CreateResponse(HttpStatusCode.OK, myList,"application/xml"); 
```

这被序列化为：

`<ArrayOfFish xmlns:i=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://schemas.datacontract.org/2004/07/MySolution.NameSpace.Resources\" />`

因为没有返回结果。

当我尝试使用 解析这个时`XmlMediaTypeFormatter`，我收到一个错误，说它没有预料到它会得到什么。

我的反序列化代码在我开始使用 web api 之前没有改变，只是：

`return content.ReadAsAsync<T>(formatters).Result;`

formatters 是一个`List`格式化程序，只包含`XmlMediaTypeFormatter`

T 是一个通用列表`Fish`

如果我省略了`"application/xml"`类型，那么它似乎以 JSon 发送（因为结果是 []）但是客户端需要 xml，并且由于某种原因不会在其上使用 JSon 序列化程序，即使我明确地将类型设置为`text/json`.

反序列化对象应该相当简单，因为这正是我之前所做的，我只是稍微更改了我的服务器以`CreateResponse`用于制作 a`HttpResponseMessage`而不是`HttpResponseMessage<T>`直接使用，因为不再支持通用版本。我在网上找不到一个将结果解码为令人沮丧的对象的单个客户端/服务器示例。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:30:54.580

我最终发现 web api 使用的序列化方法与以前的标准方法略有不同。我将此添加到我的`global.asax`并解决了问题：

`GlobalConfiguration.Configuration.Formatters.Insert(0, new XmlMediaTypeFormatter() { UseXmlSerializer = true });`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T23:11:09.447

XmlSerializer 无法序列化接口 (IEnumerable)。返回之前转换为列表。

```
return Request.CreateResponse(HttpStatusCode.OK, myList.ToList(),"application/xml"); 
```

这里有参考的类似问题 - [XmlSerializer 不会序列化 IEnumerable](https://stackoverflow.com/questions/9102234/xmlserializer-in-c-sharp-wont-serialize-ienumerable)

# html - 可滚动链接列表 HTML CSS

> ID：14113685
> 
> 赞同：2
> 
> 时间：2013-01-01T19:55:44.370
> 
> 标签：html, css, scroll

我需要为 中的几个列表项添加更多功能`ul`，并且我想知道如何使用滚动功能来上下滚动，因为项目的数量。

这是我的清单：

```
<ul>
<li>Page 1</li>
<li>Page 2</li>
<li>Page 3</li>
<li>Page 4</li>
<li>Page 5</li>
<li>Page 6</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T20:03:58.323

我不确定这是否是您要搜索的内容，但您可以使用具有定义高度的元素来包装列表。

```
<div id="wrapper">
    <ul>
    <li>Page 1</li>
    <li>Page 2</li>
    <li>Page 3</li>
    <li>Page 4</li>
    <li>Page 5</li>
    <li>Page 6</li>
    </ul>
</div> 
```

...和CSS：

```
#wrapper {
    overflow:auto;
    height:200px;
} 
```

因此，如果列表长于/高于 200 像素（或您指定的任何值），则会显示一个垂直滚动条。

# c - STM32微控制器和SIM20模块与USART设备之间的通信

> ID：14113686
> 
> 赞同：1
> 
> 时间：2013-01-01T19:55:56.270
> 
> 标签：c, embedded, stm32

我正在尝试使 STM32f1 微控制器与 SIM20 模块通信。我希望所有硬件设置都做得很好。说到软件，我的 C 程序由以下组件组成：

1.  碾压混凝土配置
2.  GPIO配置
3.  USART 配置
4.  发送字符串“AT+SRDFIRM”
5.  将接收到的缓冲区存储在文件“test.txt”中
6.  打开 LED3

然而，SIM20 没有收到任何信息。文件中没有存储任何内容，LED3 没有打开。

我的 C 代码如下：

```
/* Includes ------------------------------------------------------------------*/
#include "stm32f10x.h"
#include "stm32_eval.h"
#include <stdio.h>
#include <stdlib.h>

/* Private typedef -----------------------------------------------------------*/
typedef enum { FAILED = 0, PASSED = !FAILED} TestStatus;

/* Private define ------------------------------------------------------------*/
#define USARTy                   USART1
#define USARTy_GPIO              GPIOA /* PORT name*/
#define USARTy_CLK               RCC_APB2Periph_USART1
#define USARTy_GPIO_CLK          RCC_APB2Periph_GPIOA
#define USARTy_RxPin             GPIO_Pin_10/* pin Rx name*/ 
#define USARTy_TxPin             GPIO_Pin_9 /* pin Tx name*/

#define USARTz                   USART2
#define USARTz_GPIO              GPIOA/* PORT name*/
#define USARTz_CLK               RCC_APB1Periph_USART2
#define USARTz_GPIO_CLK          RCC_APB2Periph_GPIOA
#define USARTz_RxPin             GPIO_Pin_3/* pin Rx name*/
#define USARTz_TxPin             GPIO_Pin_2/* pin Tx name*/

#define TxBufferSize   (countof(TxBuffer))

/* Private macro -------------------------------------------------------------*/
#define countof(a)   (sizeof(a) / sizeof(*(a)))

/* Private variables ---------------------------------------------------------*/
USART_InitTypeDef USART_InitStructure;
uint8_t TxBuffer[] = "AT+SRDFIRM";
uint8_t RxBuffer[TxBufferSize];
__IO uint8_t TxConteur = 0, RxConteur = 0;
uint8_t Bin[16];
/* Private function prototypes -----------------------------------------------*/
void RCC_Configuration(void);
void GPIO_Configuration(void);
void Delay(__IO uint32_t);
TestStatus Buffercmp(uint8_t* pBuffer1, uint8_t* pBuffer2, uint16_t BufferLength);
__IO uint8_t index = 0;
volatile TestStatus TransferStatus = FAILED;  

GPIO_InitTypeDef GPIO_InitStructure;

int main(void)
{
  STM_EVAL_LEDInit(LED1);
  STM_EVAL_LEDInit(LED2);
  STM_EVAL_LEDInit(LED3);
  STM_EVAL_LEDInit(LED4);
    int i;
  /*TxBuffer[0] = 'B';
  RxBuffer[0] ='\0';*/

/* System Clocks Configuration */
 RCC_Configuration();
/* Configure the GPIO ports */
GPIO_Configuration();

USART_InitStructure.USART_BaudRate = 115200;      // configuration vitesse
USART_InitStructure.USART_WordLength = USART_WordLength_8b; // configuration longueur mot
USART_InitStructure.USART_StopBits = USART_StopBits_1;  // bit de stop
USART_InitStructure.USART_Parity = USART_Parity_No; // bit de parite
USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_None; // hardware control
USART_InitStructure.USART_Mode = USART_Mode_Rx | USART_Mode_Tx; // half duplex

  /* Configure USARTy */
  USART_Init(USART1,&USART_InitStructure);

  /* Enable the USARTy */
  USART_Cmd(USART1,ENABLE);
  uint16_t reciv;

    /*********************************************************/
        FILE* fichier = NULL; 
         fichier = fopen("test.txt", "w");
    while(TxConteur < TxBufferSize)
  {  
    /* Send one byte from USARTy to USARTz */
      USART_SendData(USARTy, TxBuffer[TxConteur++]);
  } 
    /* Loop until USARTy DR register is empty */ 
    while(USART_GetFlagStatus(USART1, USART_FLAG_RXNE) == RESET);

      while(TxConteur < TxBufferSize)
  { 
    RxBuffer[RxConteur] = USART_ReceiveData(USARTy) & 0xFF;
    RxConteur++;
  }

   fprintf(fichier,"%s","RxBuffer");  
  fclose(fichier); // On ferme le fichier qui a été ouvert
   TransferStatus = Buffercmp(TxBuffer, RxBuffer, TxBufferSize);
 STM_EVAL_LEDOn(LED3);

  while (1)
  {
  }
}

void RCC_Configuration(void)
{    

  RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA , ENABLE);

  RCC_APB2PeriphClockCmd(RCC_APB2Periph_USART1 , ENABLE);
  RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOC , ENABLE);
}

void GPIO_Configuration(void)
{
  GPIO_InitTypeDef GPIO_InitStructure1,GPIO_InitStructure2;

  /* Configure USARTy Rx as input floating */
  GPIO_InitStructure1.GPIO_Pin =GPIO_Pin_10;
  GPIO_InitStructure1.GPIO_Speed = GPIO_Speed_50MHz;
  GPIO_InitStructure1.GPIO_Mode = GPIO_Mode_IN_FLOATING;
  GPIO_Init(GPIOA, &GPIO_InitStructure1);
  /* Configure USARTy Tx as alternate function push-pull */
  GPIO_InitStructure2.GPIO_Pin =GPIO_Pin_9;
  GPIO_InitStructure2.GPIO_Speed = GPIO_Speed_50MHz;
  GPIO_InitStructure2.GPIO_Mode = GPIO_Mode_AF_PP;
  GPIO_Init(GPIOA, &GPIO_InitStructure2); 
}

TestStatus Buffercmp(uint8_t* pBuffer1, uint8_t* pBuffer2, uint16_t BufferLength)
{
  while(BufferLength--)
  {
    if(*pBuffer1 != *pBuffer2)
    {
      return FAILED;
    }

    pBuffer1++;
    pBuffer2++;
  }

  return PASSED;  
} 
```

* * *

@H2CO3：这是包含问题的程序部分：

```
 while(TxConteur < TxBufferSize-1)
  {  
    /* Send one byte from USARTy to USARTz */
      USART_SendData(USARTy, TxBuffer[TxConteur++]);
    while(USART_GetFlagStatus(USART1, USART_FLAG_IDLE) == RESET);
  } 
RxConteur=0;
    /* Store the received byte in RxBuffer */
      while(RxConteur < TxBufferSize-1)
  { 
    RxBuffer[RxConteur] = USART_ReceiveData(USARTy) & 0xFF;
    RxConteur++;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T17:41:55.750

有些事情要看：

*   UART 是否处于复位状态？

如果STM32默认让UART处于复位状态，我不记得了。您启用时钟，但不要明确将其从复位中取出。如果它仍然处于复位状态，那么当您旋转等待设置 RXNE 标志时，它可能总是读为复位。这将停止执行，您将无法达到 LED 启用。

*   检查数据寄存器的`USART_SendData`状态？`USART_ReceiveData`

如果这些功能不检查数据寄存器的状态，那么您的传输可能无法正常输出。在 115200 处传输一个字符需要 80 微秒。第一次写入 DR 将被快速加载到移位寄存器中，第二次写入 DR 将被保持，但除非在`USART_SendData`进一步尝试发送时检查 DR 状态踩在之前加载的字节上。传输的最终结果可能会在串行线路上以`AM`.

类似地，`USART_ReceiveData`可能会用相同字节的重复来填充接收缓冲区，直到下一个字节进入（尽管 STM32 可能会在读取值后清除 DR）。

*   文件。您使用的是什么编译器和运行时？

由于这是您的`main()`函数，我们可以看到启动时正在初始化的内容。我没有看到文件系统的任何初始化。它可能在 main 之前发生，具体取决于运行时。您使用什么工具来构建它，它是否支持文件访问？我知道 IAR 的运行时支持标准文件调用，但默认情况下它们会返回失败，除非您实现低级函数。您没有检查文件是否成功打开，并且写入`fprintf`可能会崩溃。

确保您的运行时支持文件访问并对调用执行有意义的操作，并将错误检查添加到文件调用中。

# r - r中的图表

> ID：14113691
> 
> 赞同：14
> 
> 时间：2013-01-01T19:56:44.543
> 
> 标签：r, graph, plot, image, figure

我正在尝试开发图形图表。是否可以在 R 中开发这样的图表？ ![在此处输入图像描述](../Images/048a903f9bd7bab5314951150bf3053a.png)

```
 myd <- data.frame (categories = c("Planes", "Ships", "Cars", "Trains"), 
values = c(15, 18, 22, 11)) 
```

组件图标在这里：

![在此处输入图像描述](../Images/7864789eedf27169da295a95fae29a5a.png) ![在此处输入图像描述](../Images/3fdb7d9a6aba42ac7b781856444c5a99.png) ![在此处输入图像描述](../Images/dda42e3502a6159e62e00d9ee394cebb.png) ![在此处输入图像描述](../Images/2f5c5c76d8c1b07e5d17382fa6ffe9ec.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T07:16:48.657

希望这对你的房子/议会楼层有帮助

编辑：我忘记提及我的[参考](http://journal.r-project.org/archive/2011-1/RJournal_2011-1_Murrell.pdf)，并添加了一些解释。 ![在此处输入图像描述](../Images/ec5088a245bbaba9975e016f7c9d2e24.png)

```
library(lattice)
library(grid)

imgs.names <- c('WNinq','7dqJM','9E3Wj','tStmx')
library(png)
images <- lapply(imgs.names, function(x) 
     readPNG(paste(mypath,x,'.png',sep=''),native=TRUE))
## I generate some data because we don't give a reproducible example
x <- c(rep(0,4),rep(10,9),rep(20,3),rep(5,8),rep(4,8),rep(15,4),rep(13,8))
barchart(1:4~x, origin=0, col="yellow",xlim=c(0,30),
             xlab ='values',ylab='categories',title = 'Pictorial',
             scales = list(
               y = list(cex=2,col='blue', at = 1:4,labels = c('Trains','Cars','Ships','Planes')),
               x = list(cex=2,col='blue',at=seq(0,30,by=10))
               ),
             panel=function(x, y, ...) {
                panel.fill(col = rgb(1,1,205/255))    ## I had to pick up the same yellow color!!
                panel.grid()
                lapply(1:4,function(id){
                grid.raster(images[[id]], x=x[which(y==id)],  y=y[which(y==id)],
                           default.units="native",
                           just="left",
                           width =unit(2, "native"),
                           height=unit(0.7, "native"))
                }
            )
          }
         ) 
```

# java - 如何在 Java 中从 X.509 读取扩展？

> ID：14113710
> 
> 赞同：1
> 
> 时间：2013-01-01T19:59:27.430
> 
> 标签：java, x509certificate, x509, verify

我创建了一个`X.509`带有 的证书`openssl`，该证书有一个自定义扩展名，我需要能够在 Java 代码中读取该扩展名。我使用以下代码创建了证书：

```
openssl req -new -x509 -key myCA.key -out mtCA.csr -days 1000 -config openssl.cfg 
```

现在，在 Java 代码中读取证书中扩展值的最简单方法是什么？或者更一般地说，解析`x509`证书的最简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-21T13:05:45.507

使用 java.security.cert.CertificateFactory 和[java.security.cert.X509Certificate](http://docs.oracle.com/javase/7/docs/api/java/security/cert/X509Certificate.html)

```
private void read(File file) throws Exception {
    InputStream in = new FileInputStream(file);
    CertificateFactory factory = CertificateFactory.getInstance("X.509");
    X509Certificate certificate = (X509Certificate) factory.generateCertificate(in);
    // read X509Certificate
} 
```

# python - 如何在python的HTML代码中解码变量名

> ID：14113713
> 
> 赞同：1
> 
> 时间：2013-01-01T20:00:16.787
> 
> 标签：python

我在下面的代码中收到以下编译错误，发生错误的地方是正在解码变量名的代码？如何解码 HTML 代码中的变量名？

```
 File "test.py", line 33
    """)(% hostname,change,pwd,changeref,changeref)
         ^
SyntaxError: invalid syntax 
```

以下是代码：-

```
from email.mime.text import MIMEText
from subprocess import Popen, PIPE
import socket
import os

def email (body,subject):
    msg = MIMEText("%s" % body)
    msg["Content-Type"] = "text/html"
    msg["From"] = "test@company.com"
    msg["To"] = "test@company.com"
    msg["Subject"] = '%s' % subject
    p = Popen(["/usr/sbin/sendmail", "-t"], stdin=PIPE)
    p.communicate(msg.as_string())
def main ():
    change="2009"
    pwd=os.getcwd()
    changeref="refs/changes/59/206059/2"
    subject=change + "Test subject"
    hostname=socket.gethostname()
    body = ("""\
        <html>
         <head></head>
         <body>
          <p>%s<br>
            change - https://company/#/c/%s \n.<br>
            change Directory - %s for details \n.<br>
            Instructions: cd to the change Directory on hostname and execute the following commands \n.<br>
            git checkout %s<br>
            git fetch ssh://username@company:29418/platform/vendor/company-proprietary/code %s && git cherry-pick FETCH_HEAD".
         </p>
         </body>
        </html>
""")(% hostname,change,pwd,changeref,changeref)
    email(body,subject)

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T20:02:35.093

你想要的是

```
"""
your HTML stuff here
""" % (hostname, change, pwd, changeref, changeref) 
```

请注意，% 符号位于元组之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T20:05:58.220

将百分号从括号中去掉：

```
 </body>
        </html>
""") % (hostname,change,pwd,changeref,changeref) 
```

# c++ - Visual Studio 中的 C++ 数组错误

> ID：14113717
> 
> 赞同：0
> 
> 时间：2013-01-01T20:00:51.083
> 
> 标签：c++, arrays, visual-studio-2012

我正在重新学习 C++，但在类中的数组方面遇到了一些问题。这是我正在使用的简化版本

```
class Class
{
private:
    string array[2];
public:
    Class()
    {
        array[2] = {"Hello", "World"};
    }
    void printOut(int x)
    {
        cout << array[x];
    } 
```

Visual Studio 在构造函数的数组初始化中的第一个大括号上有错误（即**{** "Hello", "World"}; 表示“错误：预期的表达式。”但是，当我初始化任何其他时，不会出现此问题变量（不是数组）。

当我在类的私有部分声明数组时，我会简单地初始化数组值，如下所示。

```
class Class
{
private:
    string array[2] = {"Hello", "World"}; 
```

但是 Visual Studio 在等号上给出一个错误，说“错误：现在允许数据成员初始化”。每当我尝试在类的私有部分中声明变量的同时初始化变量时，都会发生此错误。

任何帮助或建议将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T20:02:13.597

数组只能使用该语法进行初始化，而不是分配。您必须在构造函数的初始化列表中对其进行初始化：

```
Class() : array{"Hello", "World"} {} 
```

或者，`std::array`可以分配使用。

```
std::array<string, 2> array;

 Class()
 {
    array = {{ "Hello", "World" }};
 } 
```

* * *

其他：

```
Class()
{
    array[0] = "Hello";
    array[1] = "World";
} 
```

# c# - ToString 方法并返回静态字符串

> ID：14113719
> 
> 赞同：2
> 
> 时间：2013-01-01T20:01:04.387
> 
> 标签：c#, string, tostring

类示例：

```
public class SomeType
{
    private int type;

    // some code...

    public override string ToString ()
    {
       if (type == 1) return "One";
       if (type == 2) return "Two";
    }
} 
```

现在想象一下应用程序在一秒钟内调用一千次`ToString()`方法。

我的问题是：当我在代码中使用内联创建的字符串时，就像`something = myClass.ToString()`在每次调用中创建一个新字符串或编译器以某种方式对其进行优化？（因为字符串是不可变的，所以只能返回对静态字符串的引用）。

如果没有，`ToString`出于性能原因，我是否应该制作静态私有字符串字段并在方法中返回它们？

当然我会用秒表测试它，但无论如何我需要一个专家的答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T20:02:59.193

您正在使用字符串文字 - 这意味着您每次都返回对同一字符串的引用。这是由语言规范*保证的。*从 C# 5 规范的第 2.4.4.5 节：

> 当根据字符串相等运算符（第 7.10.7 节）等效的两个或多个字符串文字出现在同一程序中时，这些字符串文字引用相同的字符串实例。

所以作为一个更简单的例子：

```
string x = "One";
string y = "One";
Console.WriteLine(object.ReferenceEquals(x, y)); // Prints True 
```

在您的代码中，该`ToString()`方法仍将被调用 - 但它不会每次都创建一个新的字符串对象。顺便说一句，您可能会考虑使用`switch`语句而不是所有这些`if`语句。

请注意，即使它每次都创建一个新字符串，每秒创建*数千个**字符串*也不会让现代 CPU 出汗。分配器和垃圾收集器都非常高效，现代计算机可以在一秒钟内完成大量工作。

# c++ - 如何使从函数返回的数字用于定义数组中的元素数量？

> ID：14113723
> 
> 赞同：0
> 
> 时间：2013-01-01T20:01:31.360
> 
> 标签：c++, opencv, constants

我正在使用 Opencv/C++。我使用该函数获取视频中的帧数 `int noOfFrames = cvGetCaptureProperty( capture, CV_CAP_PROP_FRAME_COUNT );`

我还声明了一个数组`int Entropy[noOfFrames];`。但是由于该变量`noOfFrames`是非常量的，因此会出错。

我什至用过`const_cast`这个，但它仍然给出了一个错误。我希望数组的长度等于视频的帧数。

我该怎么做 ？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T20:03:53.423

您不能声明具有动态大小的静态数组。你需要一个动态数组：

```
int* Entropy = new Entropy[noOfFrames];

// use here, same as array

delete[] Entropy; 
```

但是使用向量更容易：

```
std::vector<int> Entropy(noOfFrames);

// use here, same as array and more

// no need to clean up, std::vector<int> cleans itself up 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-01T20:03:40.523

在 C++ 中，您不能这样做，因为 c 样式数组的大小应该是编译时常量¹。

无论如何，你有一个更好的选择：使用`std::vector`

```
std::vector<int> Entropy(noOfFrames); 
```

* * *

^(即使您有编译时常量，我也不建议您使用`int arr[size]`哪个是 c 样式的数组。相反，我建议您使用`std::array<int,size> arr;`这又是一个更优越的解决方案。)

# opengl - 随时随地开发 OpenGL 应用程序

> ID：14113726
> 
> 赞同：5
> 
> 时间：2013-01-01T20:02:03.660
> 
> 标签：opengl, g++, cygwin, portability, freeglut

我正在学习 OpenGL，我通常在我大学的实验室学习。

我的问题是大学里的电脑没有安装我学习程序所需的库，而且我在这些电脑上只有用户权限，所以我无法安装任何需要管理员权限的东西。

通常我是在 linux 环境下开发的，但是实验室的电脑都是运行 Windows XP 或 Windows 7 的。我使用 g++ 编译我的程序、freeglut 和 opengl 库。例如，我还使用 OpenGL 扩展能够使用顶点数组对象，以及更新版本的 OpenGL 的其他功能。

我在想这是否是一种将我需要的所有东西放在我的随身碟中并在我去的每台计算机上执行它的方法，而无需安装任何东西。也许像把所有带有 cygwin 的库和一个 notepad++ 可移植到 pendrive 中，并使用 pendrive 上的 cygwin 编译我的程序。

但是我怎样才能做到这一点，我需要对我的代码做哪些修改？

## 编辑：

为了解决我的问题，我做了以下事情：

在我的电脑上安装了带有 MSYS 的 MinGW；

在 MinGW 文件夹中使用以下代码创建一个名为 startMinGW 的批处理文件 (.bat)：

```
@echo off
mode con:cols=130 lines=50
path=%path%;%CD%\bin
path=%path%;%CD%\lib
path=%path%;%CD%\msys\1.0\bin
title MinGW Compiler
echo Ready!
cmd.exe /K 
```

执行批处理文件编译以下内容；

使用 MinGW 编译 freeglut 2.8.0，进入 freeglut 的根文件夹并执行：

```
sh configure
make 
```

使用 MinGW 编译 glew 1.9.0，进入 freeglut 的根文件夹并执行：

```
make 
```

将freeglut和glew的include文件夹中本地化的.h文件复制到MinGW的include文件夹中

将freeglut和glew的lib文件夹中本地化的.a、.dll、.la、.lai（不知道是否需要拷贝.la和.lai文件）文件复制到MinGW的lib文件夹中

将文件夹 C:\MinGW 复制到我的随身碟。

现在要编译一个 OpenGL 程序，我只需要从 pendrive 执行 startMinGW 并执行

```
g++ file.cpp -lopeng32 -lglu32 -lglut -lglew 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T20:18:13.107

glut（或freeglut）库是跨平台的。为什么不在 Windows 上编译它？使用构建生成器（如 CMake）在每个平台上轻松创建您的 makefile，您就完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T08:26:09.883

[Qt OpenGL API](http://doc.qt.digia.com/qt/qtopengl.html)可能最适合您的情况。

# php - 如果数据库失败，如何保留动态创建的输入字段值？

> ID：14113729
> 
> 赞同：3
> 
> 时间：2013-01-01T20:02:21.440
> 
> 标签：php, jquery, forms, validation

我有一个大约 70 个输入字段的大表单，表单中有可以创建其他输入字段的按钮。我的问题是，如果服务器在提交表单时出现问题，例如数据库插入失败，我该如何保留这些输入字段及其值？我有动态验证，但如果提交时出现问题怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T20:06:12.320

你有很多选择。

1.  您可以使用 ajax 发布您的表单，如果成功则重定向到新页面，或者如果失败则提醒用户（最简单！）
2.  您可以从 post 变量在服务器端重新创建 from（使用复杂的形式更难）
3.  服务器可以在失败时发回表单值，您可以编写 JS 来重新创建表单（如果您已经有 JS 来管理表单可能很容易）。
4.  您可以将表单的实际 HTML 与表单值一起传递，并让服务器使用它来重新创建表单（您可能会丢失 JS 事件，具体取决于您如何连接它们，而不是一般的最佳选择）。

还有更多不太有用的选项。我会推荐＃1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T20:04:36.823

**对于一个非常简单的解决方案：**

您可以将值存储在一个对象中，并且只有在您确认数据库插入后才将其清除。如果插入失败，您可以重试几次，如果反复失败，您可以将值写入 CSV 日志文件以手动处理。

**更复杂的解决方案**

队列。使用 Zend Jobserver、RabbitMQ 或 Gearman 让所有插入请求进入作业队列。然后创建一个工作进程以在队列的另一端运行插入。这将允许您重新运行/重试失败的作业。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T20:07:26.723

为什么一个页面上有这么多字段？我会重新考虑这样做。无论如何，如果您有服务器端验证并且它失败了，您可以设置页面让每个字段使用基于发送到服务器的帖子值的默认值......所以只需将它们发送回同一页面并将输入字段值设置为 post 值。

这是一个例子。

```
$username = array(
                            'name'        => 'username',
                            'id'          => 'username',
                            'maxlength'   => '255',
                            'size'        => '28',
                            'title'             => 'username is required.',
                            'class'       => 'form-text required',
                            'value' => $this->input->post('username'),
                          );
<?php echo form_input($username); ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T20:12:45.393

这里有几个函数可以用来在会话中存储表单值：

```
 //save form inputs
    function Hold_Form_Input()
        {
        $FormPost = array();
            foreach ($_POST as $key => $entry)
                {
                    $FormPost[''.$key.'']= $entry;
                }
         $_SESSION['post_form']= $FormPost;           
        }
    //Clear form values upon success
     function Clear_Form_Input()
        {
           if (isset($_SESSION['post_form']))
               {
                   unset($_SESSION['post_form']);
                 return true;
                }
           return false;
        }

//Reprint form values as needed
    function Keep_on_error($fieldname)
        {
            if(isset($_SESSION['post_form']) && strlen($_SESSION['post_form'][$fieldname]) > 0)
                {
                    $fill = $_SESSION['post_form'][$fieldname];
                    return $fill;
                }
            return false;
        } 
```

# r - R从data.frame中选择一定间隔的行

> ID：14113730
> 
> 赞同：1
> 
> 时间：2013-01-01T20:02:22.033
> 
> 标签：r, select, row, dataframe, intervals

我试图通过谷歌找到解决方案，但 5 小时后我希望我能从社区中找到答案，所以已经谢谢你了。

我有一个data.frame：

```
 > out.allpheno["MAP2K2"]
            MAP2K2
c1m2      5.55e-02
c1.loc42  4.32e-02
c1.loc52  6.04e-02
c1m10     3.19e-01
c1.loc103 6.12e-01
c1.loc107 8.65e-01
c1m12     1.03e+00
c1.loc113 1.04e+00
c1.loc117 1.07e+00
c1.loc128 7.91e-01
c1m14     4.92e-01
c1.loc134 5.65e-01
c1.loc135 6.10e-01
c1.loc157 3.63e-01
c1m16     1.81e-01
c1.loc177 5.61e-02
c1m18     9.03e-02
c1.loc182 1.08e-01
c1m19     2.38e-01
c1m22     9.20e-02
c1.loc219 1.03e-01
c1m24     1.62e-01
c1.loc236 3.83e-01
c1.loc240 7.45e-01
c1.loc262 2.00e+00
c1.loc267 2.41e+00
c1.loc268 2.48e+00
c1.loc269 2.53e+00
c1.loc270 2.56e+00
c1m28     2.57e+00
c1.loc272 2.52e+00
c1.loc273 2.46e+00
c1.loc274 2.37e+00
c1.loc276 2.12e+00
c1m30     9.63e-01
c1m31     1.89e+00
c2m1      5.85e-01
c2.loc11  5.27e-01
c2m5      5.51e-01
c2m6      5.15e-01
c2.loc52  6.56e-01
c2m7      1.05e+00
c2.loc59  1.07e+00
c2.loc62  1.05e+00
c2.loc72  4.90e-01
c2.loc91  3.63e-01
c2m11     3.63e-01
c2.loc103 3.08e-01
c2.loc114 8.62e-02
c2m14     2.99e-02
c2.loc129 3.15e-02
c2.loc151 2.95e-02
c2.loc167 2.21e-01
c2.loc199 1.49e+00
c2.loc200 1.53e+00
c2.loc201 1.56e+00
c2.loc203 1.61e+00
c2.loc204 1.63e+00
c2m21     1.63e+00
c2.loc214 1.32e+00
c2.loc218 1.16e+00
c2.loc229 3.23e-01
c2.loc237 7.70e-03
c2.loc241 2.57e-02
c2m25     3.81e-02
c3.loc1   8.17e-01
c3.loc4   6.51e-01
c3.loc32  2.95e-01
c3.loc35  3.14e-01
c3m6      8.02e-01
c3.loc54  9.58e-01
c3.loc71  1.48e+00
c3.loc73  1.47e+00
c3m9      1.00e+00
c3.loc89  2.55e-01
c3m10     1.47e-01
c3.loc94  2.84e-01
c3m14     2.37e-01
c3m15     9.24e-04
c3.loc152 2.47e-02
c3m16     4.88e-02
c3.loc175 3.69e-05
c3.loc180 6.16e-02
c3m20     4.87e-01
c3.loc199 4.08e-01
c3m25     8.00e-02
c3.loc248 1.60e-01
c3m26     2.66e-01
c3.loc268 1.53e+00
c3.loc271 1.85e+00
c3.loc273 1.95e+00
c3m28     1.97e+00
c3m29     1.01e+00
c4m4      8.34e-03
c4.loc39  3.94e-03
c4m5      2.81e-03
c4.loc48  1.92e-02
c4.loc57  2.08e-02
c4m7      8.11e-03
c4.loc67  5.92e-03
c4m9      6.74e-02
c4m10     5.28e-01
c4m12     8.52e-01
c4.loc121 2.97e-01
c4m17     5.38e-02
c4m20     1.88e-02
c4m22     3.58e-01
c4m24     1.66e-02
c4.loc236 1.68e-02
c4.loc288 1.62e-01
c4.loc295 1.72e-01
c4m31     1.72e-01
c4.loc313 4.18e-03 
```

我想检索从 c1m2 到 c2m25 的行。是否有任何内置功能来实现这一点，或者我是否需要创建一个循环并检查每一行是否有我想要包含的元素？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T20:08:36.703

有序因子允许您使用`>=`和`<=`比较字符值，定义自定义顺序（即，不同于字母顺序）。

这是比您要求的更短的子集，但您可以使用任何值作为边界：

```
f <- factor(rownames(out.allpheno), levels=rownames(out.allpheno), ordered=TRUE)
out.allpheno[f >= 'c1m14' & f <= 'c1m16', ,drop=FALSE]

##           MAP2K2
## c1m14      0.492
## c1.loc134  0.565
## c1.loc135  0.610
## c1.loc157  0.363
## c1m16      0.181 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T20:06:31.957

如果你已经把它们都整理好了，那么，假设你`data.frame`是`df`

```
idx1 <- which(row.names(df) == "c1m2")
idx2 <- which(row.names(df) == "c1m25")
df[idx1:idx2, ] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T23:02:31.917

另一个潜在的解决方案，使用正则表达式：

```
my_regex <- "^c[12]"
matched_rownames <- grep( my_regex, rownames(df), value=TRUE )
df[ rownames(df) %in% matched_rownames, , drop=FALSE ] 
```

如果您确定行名称确实遵循常规结构但它们可能是无序的，并且您知道您只想获取任何以`c1` or开头的行，这将很方便`c2`。

# node.js - Node.JS + MongoDB 用于现实世界的企业级应用程序？

> ID：14113732
> 
> 赞同：2
> 
> 时间：2013-01-01T20:02:32.060
> 
> 标签：node.js, mongodb

我是 .NET 开发人员，一直在使用 .NET 桌面（C# Win Forms、WPF）和 Web 技术（ASP.NET Web Forms、MVC、Silverlight）和 SQL Server 来开发企业应用程序。

现在对于 Web 开发，每个人都在谈论 Node.js 和 NoSql 数据库（MongoDB），我也看到了一些例子，Node.js 与 MVC 和 SQL Server 与 MongoDB 之间的一些非常令人印象深刻的性能比较......显然 Node.js +MongoDB 正在摇摆不定……

但我的问题是这些技术对于现实世界的企业应用程序有多可靠......我所看到的只是一些看起来不错的小例子......但是当你开发现实世界的网络应用程序时你知道......事情会有所不同...... ASP。 NET MVC 为您提供了很多（安全性、IoC、缓存管理等，具有完整的 OOP 支持和经过验证的设计模式开发支持）来开发企业级应用程序......这一切都可以用 Node.js 实现吗？

那么 MongoDB 呢……它是否准备好用作一个可靠/可扩展的数据库，具有 SQL Server 中开箱即用的所有安全要求？

所以简而言之，Node.js + mongoDB 的组合已经准备好用来代替 MVC 4 + Sql Server 了吗？

谢谢，瓦西姆

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T21:36:26.153

是的，是的，是的！Node.js 已经部署在许多大型企业应用程序中并且得到很好的支持，甚至在[Windows Azure](http://www.windowsazure.com/en-us/develop/nodejs/)上也是如此。这是一篇关于节点企业价值的好文章：http: [//blog.appfog.com/node-js-is-taking-over-the-enterprise-whether-you-like-it-or-not/](http://blog.appfog.com/node-js-is-taking-over-the-enterprise-whether-you-like-it-or-not/)

至于mongodb，如果你担心的话，看看他们的生产部署： [http ://www.mongodb.org/display/DOCS/Production+Deployments](http://www.mongodb.org/display/DOCS/Production+Deployments)

设计模式和方法不同，但底线是您可以使用 node.js 和 MongoDB 构建高度可扩展和高性能的企业应用程序。

# css - 使用 CSS 在 Drupal 7 中排列字段显示

> ID：14113736
> 
> 赞同：0
> 
> 时间：2013-01-01T20:02:54.203
> 
> 标签：css, drupal, html, field

我在 Drupal 7 中显示字段时遇到问题。

我有 3 个字段，希望在第一行显示其中两个，并在第二行显示另一个，正好在第一行的第二个字段下方。

我搜索了大约 3 个小时但找不到解决方案:(

这是一个截图：

[http://i45.tinypic.com/12190l1.jpg](http://i45.tinypic.com/12190l1.jpg)

我的字段显示像 Number 1 ，但我想像 Number 2 一样显示它们。和数字字段可能有超过 4 位数字。所以我不能使用边距:(

我怎样才能解决这个问题 ？

非常感谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T20:19:49.693

您可以在内容 div 中使用表格布局。这是一个让您入门的[示例。](http://jsfiddle.net/bKWLf/)您显然会删除边框并添加一些间距，但您可以在[此处](http://www.w3schools.com/html/html_tables.asp)找到更多信息。

```
<div class="content">
 <table border="1">
  <tr>
   <td>1234</td>
   <td colspan="2">Heading</td>
  </tr>
  <tr>
   <td ></td>
   <td colspan="2">Info</td>
  </tr>
 </table>​
</div> 
```

# c++ - C++ createObject() 工厂

> ID：14113741
> 
> 赞同：2
> 
> 时间：2013-01-01T20:03:37.217
> 
> 标签：c++, templates, boost-mpl

我想用简单的 C++ 语法创建一个简单的工厂方法：

```
void *createObject(const char *str,...)
{
  if(!strcmp("X",str))
     return new X(...);
} 
```

我无法弄清楚这个的语法。我一直在研究模板元编程并使用 mpl::vectors，但我不确定如何传递这种语法。如果可能的话，我想真正避免使用 C va_lists 并使用像上面那样的干净语法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-01T20:08:23.413

这将是*C++11*的更好方法：

```
template< typename ...Args >
std::shared_ptr<void> createObject( std::string const& name, Args&& ...args )
{
    if( name == "X" )
    {
        return try_make_shared< X >( std::forward< Args >( args )... );
    }
    /* other cases here*/

    return nullptr;
}

template< typename T, typename ...Args >
typename std::enable_if<
    std::is_constructible< T, Args >::value
  , std::shared_ptr< T >
>::type try_make_shared( Args&&... args )
{
    return std::make_shared< X >( std::forward< Args >( args )... );
}
template< typename T, typename ...Args >
typename std::enable_if<
    !std::is_constructible< T, Args >::value
  , std::shared_ptr< T >
>::type try_make_shared( Args&&... args )
{
    throw std::invalid_argument( "The type is not constructible from the supplied arguments" );
    return nullptr;
} 
```

与您的代码的区别是

*   它使用可变参数模板函数而不是省略号参数，因此参数的数量和类型在编译时仍然可用（您不会放松类型检查）。*此外，您可以使用非 POD*类型调用此函数。

*   它返回 a`shared_ptr<void>`而不是 plain `void*`。这使您可以在工厂内控制对象的所有引用都消失后应该如何清理它。用户不需要知道或关心他是否应该调用标准`delete`，或者可能是`deleteObject`您工厂的方法。

**更新：**对于那些建议的人`unique_ptr`，您可以[在此处](http://www.pokeback.com/reblog/index.php?n=ReCode.MoreOnSharedPtr)`shared_ptr`阅读 a带来的可能性。只返回指向`new`-ly 分配对象的指针的受限工厂可以并且应该使用`unique_ptr`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T20:26:05.343

除了有关*如何使用漂亮的 C++11 可变参数模板创建对象*的代码（如 K-ballo 的答案中所见）之外，此答案还显示了我将如何处理*项目中的一组类*。这种方法是一个大技巧，只有在您知道自己在做什么时才推荐使用，但是，在向项目添加新类时，您只需将它们添加到列出所有类的单个文件中，因此如果项目变得庞大，它有助于保持概览。

*仅*在必须多次列出类时使用这种方法，例如，如果您还想要一个`std::string className()`函数，例如，在不使用 C++ 运行时类型信息的情况下返回类的名称。需要列出项目中所有类的每个此类功能都可以以与以下类似的方式实现。

**类.h**

```
/* For every class in your project which should be creatable through your
 * factory, add a line here. */
CLASS(Foo)
CLASS(Bar)
CLASS(Baz) 
```

**工厂.cpp**

```
template< typename ...Args >
std::shared_ptr<void> createObject( std::string const& name, Args&& ...args )
{
    // Define what code to insert for every class:
#define CLASS(T) \
    else if(name == #T) \
        return std::make_shared<T>(std::forward(args)...);

    // List all cases:
    if(0) /*do nothing*/;  // <-- needed because the macro uses else if
#include "classes.h"
#undef CLASS

    return nullptr;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T21:21:29.537

如果您*不能*使用可变参数模板，并且*不想*使用 C 风格的可变参数，那么您唯一的选择是为参数提供一些通用表示。

```
boost::shared_ptr<void> createObject(const char *str,
                                     int argc, const char *argv[])
{
  if(!strcmp("X",str))
     return new X(argc, argv);
  if(!strcmp("Y",str))
     return make_Y(argc, argv);
} 
```

如上所示`Y`，将参数处理拆分为工厂函数而不是将构造函数耦合到选项格式可能是明智的。例如，您可能想要切换到属性映射或 Boost 程序选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T12:58:39.250

我最终使用的解决方案是使用模板化参数创建 0、N 个单例。它在 N = 8 时工作得很好。有点难看，但只需要完成一次。

# c# - 选择未锁定的行 oracle

> ID：14113744
> 
> 赞同：0
> 
> 时间：2013-01-01T20:03:56.530
> 
> 标签：c#, database, oracle, oracle11g

我有一个使用 Oracle 数据库的 C# 应用程序。我需要一个查询来从 oracle 数据库中的表中获取未锁定的行。如何选择所有未锁定的行？

是否有任何“翻译器”可以将此 T-SQL（MS SQL Server）查询翻译成 Oracle 方言？

```
SELECT TOP 1 * FROM TableXY WITH(UPDLOCK, READPAST); 
```

我对 Oracle 缺少这样的功能有点失望。他们想让我使用 AQ 还是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T21:08:57.910

[Oracle 确实有这个特性，特别是SELECT 语句](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_10002.htm#SQLRF01702)的 SKIP LOCKED 部分。去引用：

> SKIP LOCKED 是处理锁定某些感兴趣行的竞争事务的另一种方法。指定 SKIP LOCKED 以指示数据库尝试锁定 WHERE 子句指定的行并跳过发现已被另一个事务锁定的任何行。

文档继续说它是为在多消费者队列中使用而设计的，但这并不意味着您*必须*在这种环境中使用它。尽管文档说这是有一个很大的警告。您不能要求接下来的 N 行解锁 - 只有接下来的 N 行，其中解锁的行将被返回。

```
SELECT * 
  FROM TableXY 
 WHERE ROWNUM = 1
   FOR UPDATE SKIP LOCKED 
```

请注意，如果您选择的表被锁定为独占模式，即您已经指示数据库不要让*任何*其他会话锁定该表，那么在释放独占锁之前您将不会获得任何返回的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:39:54.893

我最近遇到了同样的问题，在解决之后，我写了这篇博文：

[http://nhisawesome.blogspot.com/2013/01/how-to-lock-first-unlocked-row-in-table.html](http://nhisawesome.blogspot.com/2013/01/how-to-lock-first-unlocked-row-in-table.html)

欢迎发表评论！感谢您的意见。

简短的总结：我选择了一堆记录，而不是选择第一个解锁的记录并锁定它，然后循环遍历这些记录并**尝试**使用 SKIP LOCKED 提示获取对它的锁定。如果所选的一个不可锁定，则继续进行下一个，直到获得锁定或没有锁定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T23:10:59.437

如果您选择锁定的行，select for update nowait 将出错。那是你要的吗？我很好奇您要解决什么问题。除非您有长时间运行的事务，否则行上的锁从一个时刻到下一个时刻都是短暂的。

例子：

创建表测试（COL1 NUMBER(10) NOT NULL，COL2 VARCHAR2(20 BYTE) NOT NULL）；

CREATE UNIQUE INDEX TEST_PK ON TEST (COL1);

ALTER TABLE TEST ADD (CONSTRAINT TEST_PK PRIMARY KEY (COL1) USING INDEX TEST_PK);

SQL 会话 #1: SQL> 插入测试值(1,'1111'); 创建了 1 行。SQL> 插入测试值(2,'2222'); 创建了 1 行。SQL>提交；提交完成。SQL> 更新测试集 col2='AAAA' where col1=1; 更新了 1 行。

SQL 会话 #2：尝试读取锁定的行，得到错误：

SQL> select * from test where col1=1 for update nowait; select * from test where col1=1 for update nowait * ERROR at line 1: ORA-00054: resource busy and acquire with NOWAIT specified or timeout expired

# .net - 在 VS C++ 中打开新窗口

> ID：14113749
> 
> 赞同：-3
> 
> 时间：2013-01-01T20:04:32.130
> 
> 标签：.net, visual-studio, visual-c++, window

我编写了一个小工具。现在我想做一个信息窗口。为此，我通过单击它在我的成员条中创建了一个单独的成员我有这样的方法，例如单击信息...我现在要做的是，如果用户单击我的按钮，它必须打开新的窗口信息。 h 我也设计并完成了...

我试过这样但它不起作用：

```
private: System::Void versionToolStripMenuItem_Click(System::Object^  sender, System::EventArgs^  e) {
         Application::Run(gcnew Info()); // Info is the Name of my window

     } 
```

感谢您的帮助。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T20:19:04.203

`Application::Run`是消息调度循环，你不想再开始一个。

试试吧`gcnew Info()->Show()`。

# php - 如何循环遍历多个 MySQL 列并在单行中返回结果？

> ID：14113751
> 
> 赞同：0
> 
> 时间：2013-01-01T20:04:49.900
> 
> 标签：php, mysql, function, subquery

我正在使用 MySQL 进行查询以显示团队记录了两个或更多 DD 的游戏。

结果如下所示：

![在此处输入图像描述](../Images/383680a590e3342ecaf848ae1cf554a8.png)

我的问题是，当（正如我所说，两个或更多玩家有 DD）时，我只能让一个玩家出现在“玩家”列中。

这是我的代码：

```
 SELECT * FROM 

        (SELECT game_Date, 
        game_GameID,
        game_SeasonID,
        game_TeamCode,
        teams_Name,
                    ........ other PTS/AST/REB stats too!
        stats1_GameID,
        Sum(stats1_DD) AS 'TotGameDD'

        FROM game INNER JOIN teams INNER JOIN stats1
        ON 
        teams_TeamCode = game_TeamCode
        AND
        game_GameID = stats1_GameID
    AND
    game_PlayerID = player_PlayerID

        GROUP BY game_GameID
        HAVING Sum(stats1_DD) >1
        ORDER BY Sum(stats1_DD) desc) t

    FROM game INNER JOIN teams INNER JOIN stats1
    ON 
    teams_TeamCode = game_TeamCode
    AND
    game_GameID = stats1_GameID

    GROUP BY game_GameID, stats1_DD
    HAVING Sum(stats1_DD) >1
    ORDER BY Sum(stats1_DD) desc

  FROM game INNER JOIN teams INNER JOIN stats1
    ON 
    teams_TeamCode = game_TeamCode
    AND
    game_GameID = stats1_GameID

    GROUP BY game_GameID, stats1_DD
    HAVING Sum(stats1_DD) >1
    ORDER BY Sum(stats1_DD) desc 
```

这就是我卡住的地方。我过去也遇到过这类问题。我想我需要一个循环来遍历所有有 DD 的球员，然后返回球员姓名，加上他们的 PTS / AST 和 TOTREB 统计数据。

我只是似乎无法鼓起勇气让它继续下去。

非常感谢任何帮助或指导。

谢谢，

肯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T20:30:53.320

DD 我假设你的意思是双双。

您可以尝试使用 group_concat ，它会为您提供一个以逗号分隔的列值列表： [http ://sqlite.awardspace.info/syntax/examples/group_concat.htm](http://sqlite.awardspace.info/syntax/examples/group_concat.htm)

# java - 远程方法调用（RMI） - 服务器如何知道客户端调用了什么？

> ID：14113752
> 
> 赞同：0
> 
> 时间：2013-01-01T20:05:03.660
> 
> 标签：java, rmi, remoteobject

我有一个程序，其中有这些类：
RMIServer、
RMIClient、
RMIImplementation、
RMIInterface

如下：

RMI服务器：

```
public static void main ( String args[] ) throws Exception
{
  System.out.println( "RMI Server started" ) ;

  String codebase = "http://localhost:8080/rmi/" ; 
  String name     = "RMIInterface"               ;

  System.setProperty ( "java.rmi.server.codebase" , codebase  ) ;

  RMIImplementation obj  = new RMIImplementation()                                    ;
  RMIInterface      stub = (RMIInterface) UnicastRemoteObject.exportObject( obj , 0 ) ;

  LocateRegistry.getRegistry().bind( name , stub ) ;

  System.out.println( "Done!" ) ;

} 
```

RMI客户端：

```
public static void main ( String args[] ) throws Exception
{
    String host = "localhost"    ;
    String name = "RMIInterface" ;

    Registry     registry = LocateRegistry.getRegistry( host )     ;
    RMIInterface i        = (RMIInterface) registry.lookup( name ) ;

    System.out.println("RMI service call result:");
    for(Candidate c : list){
        if(c.status == Candidate.Eligibility.ELIGIBLE ){
            System.out.println( "  Issued a license to " + i.issueLicense(c.name, c.age) ) ;   
        }
    } 

    System.out.println( "License Server finished" ) ;
} 
```

RMI接口：

```
public interface RMIInterface extends Remote
{
  String issueLicense ( String name , int age ) throws RemoteException ;
} 
```

RMII实现：

```
public class RMIImplementation implements RMIInterface {

    public RMIImplementation() {
        System.out.println("RMIImplementation instance created and ready to serve");
    }

    @Override
    public String issueLicense(String name, int age) {
        return name + " (" + age + ")";
    }
} 
```

（此程序用于测试目的。测试在一台机器上完成。）

好吧，客户端调用远程对象，发送一些参数。

我希望 RMIServer 打印出从客户端到远程对象的调用摘要。我应该怎么做才能访问这些信息？

我希望输出看起来像这样：

```
RMI Server started
RMIImplementation instance created and ready to serve
RMI service called for : 
  tonny (30)
  john (26) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T22:12:44.507

你的问题到处都是，但你的实际目标可以得到满足

`-Djava.rmi.server.logCalls=true`

在服务器上。

# javascript - 为什么我不能调用 Javascript 命名空间中的公共函数

> ID：14113753
> 
> 赞同：0
> 
> 时间：2013-01-01T20:05:14.613
> 
> 标签：javascript, function

我想调用方法`setupCanvas.Draw();`来绘制矩形。

由于某种原因，我无法`Draw();`从 scop `game.setupCanvas();` [Demo jsfiddle中调用函数](http://jsfiddle.net/centerwow/dAvtS/8/)

```
window.game = window.game|| {};
game.main = function() {};      
game.setupCanvas = function(){

        var w = $(window).outerWidth();
        var h = $(window).outerHeight();
        myCanvas = document.createElement('canvas');
        document.body.appendChild(myCanvas);
        myCanvas.id     = "playground";
        myCanvas.width  = w * 0.8;
        myCanvas.height = h * 0.8;
        myCanvas.style.left= (w - myCanvas.width )/2 + 'px' ;
        myCanvas.style.top= (h -  myCanvas.height )/2 + 'px' ;     
        myCanvas.style.zIndex   = 10;
        myCanvas.style.position = "absolute";
        myCanvas.style.border   = "1px solid green ";
        this.ctx= $('#playground').get(0).getContext('2d');

       this.Draw  = function(){
         ctx.fillStyle="#0000FF";
         ctx.fillRect(150,75,150,75);
         ctx.fillStyle="#F0F0FF";
         ctx.fillRect(0,0,150,75);
    };
}();    
    game.setupCanvas.Draw();

​ 
```

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T20:08:52.327

您需要创建一个新实例：

```
var x = new game.setupCanvas();

x.Draw(); 
```

另外，这部分是错误的：

```
 };
}(); // <--

game.setupCanvas.Draw(); 
```

您正在立即调用该函数，这是您不应该这样做的。它返回`undefined`到`game.setupCanvas`。把它拿走，你的代码应该可以工作。

此外，当您`ctx`在方法中引用属性时`Draw`，您需要使用`this.ctx`.

[***jsFiddle 演示***](http://jsfiddle.net/eEfJ7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T20:19:59.723

您的分配`game.setupCanvas`无效，因为自调用函数不返回任何内容，因此`game.setupCanvas`将是未定义的。确保使用这样的公共方法返回一个对象。

```
return {
    Draw: function(){
      ctx.fillStyle="#0000FF";
      ctx.fillRect(150,75,150,75);
      ctx.fillStyle="#F0F0FF";
      ctx.fillRect(0,0,150,75);
    },
    DrawSomethingElse: function(){
      ctx.fillStyle="#0000FF";
      ctx.fillRect(150,75,150,75);
      ctx.fillStyle="#F0F0FF";
      ctx.fillRect(0,0,150,75);
    }
}; 
```

这是您的小提琴[http://jsfiddle.net/dAvtS/11/的更新](http://jsfiddle.net/dAvtS/11/)

# compiler-construction - CUDA 编译器是否根据传递的参数优化内核？

> ID：14113755
> 
> 赞同：0
> 
> 时间：2013-01-01T20:05:18.200
> 
> 标签：compiler-construction, parameters, cuda, gpu, nvcc

我有一个简单的 CUDA 内核，它计算一个非常大的字符串的 1000 字节片段中的 A 数。数据库的布局是为了合并内存访问。从内核返回后，我的 main 函数将设备数组复制`results`到主机上的一个以供进一步分析。

```
__global__ void kernel(unsigned int jobs_todo, char* database, float* results ) {

  unsigned int id = threadIdx.x + blockIdx.x * blockDim.x;
  float A = 0; int i; char ch;
  if(id < jobs_todo) {
    for(i = 0; i < 1000; i += 1){
     ch = database[jobs_todo*i + id];
     if(ch == 'A') A++;
   }
  results[id] = A;
} 
```

内核运行良好。但是，如果我`results[id]=A`用一些琐碎的东西 替换`results[id]=10`或只是注释掉该行，它会运行得更快（10 倍）并且使用更少的寄存器，如`--ptxas-options=-v`. 如果我注释掉该行，内核将无济于事。CUDA 编译器是否通过查看传递的参数知道这一点？所以它选择什么都不做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T20:32:14.693

您看到的是编译器优化的结果。编译将修剪“死”代码，即不直接导致内存写入的代码。所以你的内核

```
__global__ void kernel(unsigned int jobs_todo, char* database, float* results ) {

  unsigned int id = threadIdx.x + blockIdx.x * blockDim.x;
  float A = 0; int i; char ch;
  if(id < jobs_todo) {
    for(i = 0; i < 1000; i += 1){
     ch = database[jobs_todo*i + id];
     if(ch == 'A') A++;
   }
   results[id]=10;
} 
```

被有效地优化为

```
__global__ void kernel(unsigned int jobs_todo, char* database, float* results ) {

  unsigned int id = threadIdx.x + blockIdx.x * blockDim.x;
  results[id]=10;
} 
```

显然，缩减代码的寄存器占用空间和执行时间远低于完整代码。您可以通过将代码编译为 PTX 并检查发出的代码来确认这一点。

# javascript - 有什么方法可以快速轻松地将标准网站加载转换为整个网站上的 AJAX？

> ID：14113760
> 
> 赞同：1
> 
> 时间：2013-01-01T20:06:10.093
> 
> 标签：javascript, ajax, html, html5-history

也许这不是一个好问题，但我想知道它是否会以某种方式轻松快速（也许只有 1 个功能？）可以将网站上的所有链接从刷新网页更改为加载用户通过 AJAX 单击的 URL？

我的网站到处都有标准链接，但是如果您想从中获得适用于 iPhone 的移动应用程序，则需要到处使用 AJAX（可能还有 HTML5 History API），因为任何链接都会打开 Safari 浏览器。

您认为有什么方法可以快速转换每个链接以删除当前源代码并加载全新的页面而无需刷新浏览器窗口？或者它是否需要为每组链接手动编码和单独的功能？

例子：

```
jQuery(document).on('a', 'click', function(){
// STEP1: AJAX call that will make PHP download page from link
// STEP2: Delete current source code and load new one (in this case including deletion of this function itself)
}); 
```

你认为这是可能的还是这里有什么陷阱？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T20:22:29.557

我做过类似的事情。这是可能的，但您可能必须在服务器端更改一些内容。就我而言，我有一些与 的链接`href = #`，其中一些有点击触发器，所以我想将它们排除在外。

在这个函数中，我检查每个没有 的链接`href = #`，如果它们没有点击事件，我绑定 ajax。

```
bindAjaxLinks: function() {
   $('a[href!="#"]').each(function() {
            var eventObj = $(this).data('events');
            if (!eventObj || !eventObj.click) {
                // not a javascript link, do your thing
                var link = $(this).attr('href');
                if (link) {
                    $(this).click(function(event) {
                        event.preventDefault();
                        // do your ajax calling here.
                    });
                }
            }
    }); 
```

一些注意事项：在我的情况下，我添加了一个额外的参数，类似于`isAjax`我使用此函数发出的每个请求，并且在后端我只发送了整个页面的一部分（没有头部和其他一些标记）。后来我用这个新的 html 替换了用户可见的内容。

这导致了一个问题：如果服务器响应重定向，我得到了我不想要的整个页面，所以我确保`isAjax`在重定向后保留这个参数，这就解决了这个问题。

# c# - 在 C# 中的列表列表中获取所有 [x] 索引中的最大值

> ID：14113762
> 
> 赞同：0
> 
> 时间：2013-01-01T20:06:16.417
> 
> 标签：c#, .net, linq, list, max

如果我`List<List<double>>`在 C# 项目中有一个对象，如何获得该对象中每个 List 中所有 [x] 索引的最大值？

为了澄清我的想法，如果我有对象：

```
List<List<double>> myList = ...... 
```

如果 myList 中每个列表中的 [10] 索引的值为：

```
myList[0][10] = 5;
myList[1][10] = 15;
myList[2][10] = 1;
myList[3][10] = 3;
myList[4][10] = 7;
myList[5][10] = 5; 
```

所以，我需要得到**15**的值，因为它是它们中的最大值。

感谢和问候。绫

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-01T20:07:21.833

使用以下获取最大索引值

```
List<List<double>> list = ...
var maxIndex = list.Max( innerList => innerList.Count - 1); // Gets the Maximum index value. 
```

如果你想要最大值，你可以使用

```
 var maxValue = list.Max ( innerList => innerList.Max()); 
```

另请参见[Enumerable.Max](http://msdn.microsoft.com/en-us/library/bb549404.aspx)

* * *

**根据评论**编辑****

 **> 我需要每个列表中特定索引中的最大值。

未优化的解决方案是使用以下查询。

```
var index = 10;
var maxAtIndex10 = list.Max ( innerList => innerList[index]); 
```

以下查询是在所有索引处查找最大值。

```
var maxIndex = list.Max( innerList => innerList.Count);
var listMaxAtAllIndexes = Enumerable.Range(0,maxIndex).Select ( index => list.Max(innerList => index < innerList.Count ? innerList[index] : 0)); 
```**

# mysql - max_allowed_pa cket 考虑了什么？

> ID：14113769
> 
> 赞同：5
> 
> 时间：2013-01-01T20:06:58.287
> 
> 标签：mysql, sql

如果我在`;`我的 MySQL 查询中添加一个，这是否计入`max_allowed_packet`长度？加空格怎么办？这算不算？`;`如果不存在，MySQL 会自动添加吗？

IE。

就`max_allowed_packet`长度而言，以下内容是否相同？：

```
INSERT INTO table_name (col_name) VALUES ( 1 ) , ( 2 );
INSERT INTO table_name (col_name) VALUES (1),(2) 
```

如果它们相同，我如何以编程方式知道 MySQL 认为查询需要多长时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:52:36.603

**max_allowed_pa​​cket**指定一条 SQL 语句在被服务器接收和预处理后执行的最大长度；例如，包括创建插入值列表（如果有）。所以，到那个时候，没有尾随空格之类的东西。我不确定“;”，但我最好的猜测是，如果它不存在，它会在预处理您的语句时添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T05:46:59.833

不，空格与`max_allowed_packet`服务器变量无关。正如您可以检查机器上的 MySQL 客户端将接收到的字符串转换为正确的数据类型一样，同时它会删除额外的无关空格，您的 MySQL 连接器也是如此。

> *这意味着两个查询都被视为相同*

所以你应该只关心 SQL 查询的可读性而忘记空格。

**去检查**

*   使用 WIRESHARK，捕获 mysql 数据包。

*   如果对深潜感兴趣。浏览您正在使用的 MySQL 客户端或 MySQL 连接器的源代码。

# image - 改变颜色通道是什么意思？

> ID：14113772
> 
> 赞同：-1
> 
> 时间：2013-01-01T20:07:14.367
> 
> 标签：image, colors, color-space, color-channel

这是否意味着根据使用的颜色空间（RGB、RGBA、CMYK、Lab、灰度、HSL、HSLA）来控制图像和应用到它的颜色覆盖之间的组合？或者是否意味着改变与其他层组合使用的颜色层以形成最终图像？（如果是这样，在什么方面可以改变什么？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T20:14:34.180

`RGB`是三个颜色通道（红色、绿色和蓝色）的缩写。它们代表特定频率的光。每个颜色通道内部都有一系列强度和饱和度。这种颜色模型通常在学校教授，并且是大多数人理解颜色和混合颜色的方式。表示颜色的另一种方式是`HSL`色相、饱和度和色阶。这里的 Hue 是颜色的频率，而 Saturation 可以像对比度级别，Level 是黑色的量。HSL（A 代表 Alpha 或透明度）实际上是一种以程序员为中心的处理颜色的方式（尽管大多数程序员似乎都在学习颜色的 RGB Hex 值）。有一个很棒的网站叫[Mothereffing HSL](http://mothereffinghsl.com/)这使您可以使用 HSL 值来更好地理解它们。CMYK 用于颜料（与光的混合方式不同），可在打印机上找到。与 RGB 相同的基本概念，只是带有青色洋红色黄色和黑色。现在因为光和颜料的混合方式不同，所以有很多工作致力于将一种颜色系统转换为另一种颜色系统（这样您就可以在屏幕上看到最终会从打印机输出的内容）。然而，这些系统并不完全一致，因此目标是接近可接受性。

![这是RGB和CYMK之间的比较](../Images/42140bab68c67080af592f396a575dec.png)

当呈现在图形上时，所有这些颜色都称为[颜色空间](http://en.wikipedia.org/wiki/Color_space)。

# arduino - Arduino循环和警报

> ID：14113778
> 
> 赞同：3
> 
> 时间：2013-01-01T20:07:43.607
> 
> 标签：arduino

我正在使用 arduino 进行我的第一个物理计算项目，实际上是 seduino stalker 2.1。我正在构建一个设备来记录一段时间内的集水率。

设置和运行项目并没有那么难，直到今天才如此。在主循环中，我调用了处理日志记录的方法。我现在还有一个警报延迟来处理我需要的计时器重复，以便汇总数据并通过 SMS 将其发送到收件人号码。

问题在于，当 alarm.repeat() 处于活动状态时，它会抢占数据的记录。问题是：当alarm.delay 存在时，为什么循环内的日志记录方法不起作用？

```
void setup() {
  Serial.begin(9600);
  Wire.begin();
  setTime(1,17,0,1,1,13); // set time
  Alarm.timerRepeat(60, Repeats); //set repeater

}

void loop(){
  logging(); //call logging
  Alarm.delay(1300); //for repeater
}

void Repeats(){
  Serial.println("the repeater fired"); // just to see it working
} 

void logging(){

   val = digitalRead(Sensor_Pin);  // read Sensor_Pin
  if (val == HIGH) {         
    // If Sensor N.C. (no with magnet) -> HIGH : Switch is open / LOW : Switch is closed 
    // If Sensor N.0\. (nc with magnet) -> HIGH : Switch is closed / LOW : Switch is open 
    digitalWrite(Led_Pin, LOW);  //Set Led low
    //Serial.print("status -->");
    //Serial.println("low");
    //delay(500);
  } else {
    digitalWrite(Led_Pin, HIGH);  //Set Led high
      logdata();
  } 
}

void logdata(){

    // open the file. note that only one file can be open at a time,
    // so you have to close this one before opening another.
    File myFile = SD.open("datalog.txt", FILE_WRITE);

    // if the file opened okay, write to it:
    if (myFile) {

      //DateTime now = RTC.now();
      //String myString = readTimestamp(now);
      time_t t = now();
      String aDate = String(year(t))+"/"+String(month(t))+"/"+String(day(t))+" "+String(hour(t))+":"+String(minute(t))+":"+String(second(t));
      myFile.println(aDate);
    // close the file:
      myFile.close();
      Serial.println(aDate);
      delay(500); } else {
      // if the file didn't open, print an error:
      // Serial.println("error opening DATALOG.TXT");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:51:33.233

> 问：为什么我必须使用 Alarm.delay() 而不是 delay()？A：任务调度在 Alarm.delay 函数中处理。任务在 Alarm.delay 调用中被监控和触发，因此只要你的草图需要延迟，就应该调用 Alarm.delay。如果您的草图等待外部事件（例如，传感器更改），请确保在检查传感器时重复调用 Alarm.delay。

来自警报库的常见问题解答。所以看起来 Alarm.Delay 就像标准延迟一样，但可以被预定事件打断。您的日志调用没有安排，它只是在循环开始时发生。..您的日志记录根本没有发生吗？看起来应该在每个循环开始时调用它，然后在延迟期间触发 1300 延迟并触发中继器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-08T23:23:44.897

在您调用的 logdata() 函数上，`delay(50)`而不是`Alarm.delay(50)`.

正如考德所指出的，当需要延迟时，您必须使用 Alarm.delay ，否则延迟会弄乱警报。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-08T12:39:23.270

我认为您可以使用计时器库以其他方式完成。如果您说数据必须每秒记录一次，那么通过计时器更容易完成。示例代码

```
#include <SimpleTimer.h>

// the timer object
SimpleTimer timer;

// a function to be executed periodically
void repeatMe() {
    Serial.print("Uptime (s): ");
    Serial.println(millis() / 1000);
}

void setup() {
    Serial.begin(9600);
    timer.setInterval(1000, repeatMe);
}

void loop() {
    timer.run();
} 
```

# javascript - setTimeOut 为 jQuery ToolTip 制作替代文本

> ID：14113781
> 
> 赞同：0
> 
> 时间：2013-01-01T20:08:22.740
> 
> 标签：javascript, jquery, settimeout

在尝试学习一些客户端编程时，我正在实现一个备用工具提示，在 a`span`内`div`，我在使用 java 脚本 for-loop 进行切换时遇到了一点问题

什么是正确的方法？

***html***

```
<p id="TargetP">some initial text</p>
<br />
<input type="button" id="turnOn" value="hit it"> 
```

***javascript***

```
var texts = [];

texts.push("text one");
texts.push("text two");

$('#turnOn').on("click", function() {
    myTimer();
});

function myTimer() {
    var m = 0;
    for (i = 0; i < 10; i++) {
        m = (i % 2);
       setTimeOut(function() {
            alternateTT(m)
        }, 1000);
    }
}

function alternateTT(itemNo) {
    var target = $('#TargetP');

    $(target).text(texts[itemNo]);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T20:35:47.313

这部分代码将无法按预期工作：

```
for (i = 0; i < 10; i++) {

  m = (i % 2);
  setTimeOut(function() {
    alternateTT(m)
  }, 1000);

} 
```

当你的超时函数被调用时，它将在最终循环的上下文中。因此在每次通话中`m`都是平等的。`10 % 2`

您想将显式变量传递给 timeOut 函数，您可以这样做：

```
var param = 1;
setTimeOut(function(param) {
  alternateTT(param)
}, 1000, param); 
```

# c# - 检查文件是否可读的标准方法？

> ID：14113785
> 
> 赞同：2
> 
> 时间：2013-01-01T20:08:48.517
> 
> 标签：c#, file

我知道您可以检查它是否是只读的，然后执行 try-catch 语句以查看它是否可读，但是是否有内置的方法来检查文件是否已被使用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-01T20:12:00.667

使用该[`FileSystemInfo.Attributes`](http://msdn.microsoft.com/en-us/library/system.io.filesysteminfo.attributes.aspx)属性，并检查[`FileAttributes.ReadOnly`](http://msdn.microsoft.com/en-us/library/system.io.fileattributes.aspx)：

```
var file = new FileInfo(path);
if ((file.Attributes & FileAttributes.ReadOnly) != 0)
{
    // Do whatever you want for a read-only file
} 
```

请注意，这与您*是否*可以写入文件不同。如果它已经在使用中，那么您很可能无法写入它。即使它*确实*表明您是否可以在调用该属性时对其进行写入，也不会告诉您之后是否可以立即写入该文件。

基本上，如果要处理尝试写入可能失败的文件，则必须使用 try/catch *。*我会`IOException`专门捕获（或者可能是更具体的异常），而不是捕获所有异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T20:12:47.203

[`FileShare.None`](http://msdn.microsoft.com/en-us/library/system.io.fileshare.aspx)打开文件时使用。如果任何其他进程拥有该文件的句柄，则调用将失败。

例如：检查文件是否可写且未使用：

```
bool isWritableAndFree = false;
try {
    using (new FileStream(name, FileMode.Open, FileAccess.ReadWrite, FileShare.None))
    {
        isWritableAndFree = true;
    }
} catch { }
return isWritableAndFree; 
```

但是请注意，这种类型的代码容易受到[TOCTOU](http://en.wikipedia.org/wiki/Time_of_check_to_time_of_use)错误的影响。通常最好在使用时捕获异常。

# smalltalk - 如何在 Squeak 中加载 Metacello？

> ID：14113788
> 
> 赞同：2
> 
> 时间：2013-01-01T20:09:03.227
> 
> 标签：smalltalk, squeak, repository, metacello

众所周知，Metacello 的第一个或主要目标是 Pharo，但现在似乎[支持 Squeak 4](https://github.com/dalehenrich/metacello-work/blob/master/docs/MetacelloScriptingAPI.md)。我已经尝试过，但由于缺少方法而失败。从成绩单：

```
Starting atomic load
    Loaded -> OSProcess-dtl.65 --- http://www.squeaksource.com/OSProcess --- cache
Finished atomic load
BaselineOf>>projectClass (MetacelloMCBaselineProject is Undeclared) 
ConfigurationOf>>versionNumberClass (MetacelloSemanticVersionNumber is Undeclared) 
Loaded -> Metacello-Base-dkh.103 --- http://seaside.gemstone.com/ss/metacello --- cache
MetacelloProjectRegistration>>version (MetacelloMCBaselineProject is Undeclared) 
MetacelloBaselineSpecGenerator>>projectSpecCreationBlock (MetacelloMCBaselineProject is Undeclared) 
Loaded -> Metacello-Core-dkh.667 --- http://seaside.gemstone.com/ss/metacello --- cache
Loaded -> Metacello-MC-dkh.666 --- http://seaside.gemstone.com/ss/metacello --- cache
Loaded -> Metacello-ToolBox-dkh.131 --- http://seaside.gemstone.com/ss/metacello --- cache
Loaded -> Metacello-FileTree-dkh.29 --- http://seaside.gemstone.com/ss/metacello --- cache
Loaded -> Metacello-GitHub-dkh.22 --- http://seaside.gemstone.com/ss/metacello --- cache
Evaluated -> 1.0-beta.32 [ConfigurationOfMetacello] >> metacelloPrimeRegistry
...finished 1.0-beta.32
...RETRY->ConfigurationOfMetacelloPreview
...RETRY->ConfigurationOfMetacelloPreview
gofer repository error: 'GoferRepositoryError: My subclass should have overridden #downloadFile:to:'...ignoring
...FAILED->ConfigurationOfMetacelloPreview 
```

我正在使用 Squeak 4.4-12327 图像。对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-22T17:30:00.893

上述解决方案不再有效

你需要使用下面的代码来获取它

```
(Installer monticello http:'http://seaside.gemtalksystems.com/ss')
project: 'metacello';
install: 'ConfigurationOfMetacello'. 

((Smalltalk at: #ConfigurationOfMetacello) project 
  latestVersion) load. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T22:02:50.237

我刚刚在 4.4 中运行了这个（如 Github 上的安装文档所建议的）并且没有任何问题：

```
Installer gemsource
project: 'metacello';
install: 'ConfigurationOfMetacello'. 

((Smalltalk at: #ConfigurationOfMetacello) project 
  version: '1.0-beta.32') load. 
```

你用的是什么代码？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-12T19:00:41.863

FWIW，到目前为止，Metacello 安装已集成到 Squeak 中，因为 Squeak 5.3（可能更早）。

要通过 UI 加载 Metacello，请打开主停靠栏中的应用程序菜单，然后选择首选项向导。按 Done，然后在下一个视图中，选择 Metacello 进行安装。

要从代码中加载 Metacello，请评估`Metacello new`或`Installer ensureRecentMetacello`在任何工作区/CodeHolder 中。

# java - 不能用 /（斜杠）做 matcher.replaceAll(...)

> ID：14113790
> 
> 赞同：0
> 
> 时间：2013-01-01T20:09:09.720
> 
> 标签：java, regex, pattern-matching

我收到来自其他程序的消息，其中某些字符已更改：

`\n`（输入）->`#`

（哈希）`#`->`\#`

`\`->`\\\\`

当我试图用我的代码来扭转这些变化时，它不起作用，可能就是这样

> 请注意，替换字符串中的反斜杠 () 和美元符号 ($) 可能会导致结果与将其视为文字替换字符串时的结果不同。如上所述，美元符号可以被视为对捕获的子序列的引用，并且反斜杠用于转义替换字符串中的文字字符。

这是我的代码：

```
public String changeChars(final String message) {

    String changedMessage = message;

    changedMessage = changePattern(changedMessage, "[^\\\\][#]", "\n");
    changedMessage = changePattern(changedMessage, "([^\\\\][\\\\#])", "#");
    changedMessage = changePattern(changedMessage, "[\\\\\\\\\\\\\\\\]", "\\\\");

    return changedMessage;
}

private String changePattern(final String message, String patternString, String replaceString) {
    Pattern pattern = Pattern.compile(patternString);
    Matcher matcher = pattern.matcher(message);
    return matcher.replaceAll(replaceString);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T21:03:05.830

我假设您的编码方法是这样工作的。

1.  全部替换`\`为`\\\\`
2.  标记最初放置`#`为`\#`
3.  现在，既然我们知道所有最初放置`#`的都`\`在它之前，我们可以用它来标记新`\n`行`#`。

代码可能类似于

```
data = data.replace("\\", "\\\\\\\\");
data = data.replace("#", "\\#");
data = data.replace("\n", "#"); 
```

要反转此操作，我们需要从头开始（形成最后替换）

*   我们将用新的行标记替换它之前`#`没有的所有内容（如果我们从第二个替换开始->我们以后不会知道哪个ware 替换）。`\``\n``\#``#``#``\n`
*   之后我们可以安全地替换`\#`为`#`（这样我们将摆脱`\`原始字符串中没有的其他内容，并且不会打扰我们最后的替换步骤）。
*   最后我们替换`\\\\`为`\`.

这是我们如何做到的。

```
//your previous regex [^\\\\][#] describes "any character that is not \ and #
//but since we don't want to include that additional non `\` mark while replacing 
//we should use negative look-behind mechanism "(?<!prefix)"
data = data.replaceAll("(?<!\\\\)#", "\n");

//now since we got rid of additional "#" its time to replace `\#` to `#`
data = data.replace("\\#", "#");

//and lastly `\\\\` to `\`
data = data.replace("\\\\\\\\", "\\"); 
```

# mysql - mysql查询顺序和连接字符串的联合

> ID：14113793
> 
> 赞同：-1
> 
> 时间：2013-01-01T20:09:47.957
> 
> 标签：mysql, union

我有这个查询：

```
SELECT 
  CONCAT(users.id, '#_#', users.nickname, '#_#', users.avatar, '#_#',
         questions.datetime,'#_#',questions.question,'#_#',0000) as summary
FROM
  `questions` join users
  on users.id = questions.id_user 
WHERE
  questions.id = 12 
UNION 
SELECT
  CONCAT(users.id, '#_#', users.nickname, '#_#', users.avatar, '#_#',
         answers.datetime,'#_#',answers.answer,'#_#',answers.id) as summary 
FROM
  answers join users
  on users.id = answers.id_user where id_question = 12 
```

此查询必须包含一列（带有连接数据），我需要按 answers.datetime 排序，但我自己无法找到解决方案......

一些mysql大师可以帮助我吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T20:15:28.593

```
SELECT * FROM (
  SELECT datetime,
    CONCAT(users.id,'#_#',users.nickname,'#_#',users.avatar,'#_#',questions.datetime,'#_#',questions.question,'#_#',0000) as summary 
  FROM `questions` 
  join users on users.id = questions.id_user 
  WHERE questions.id = 12 
  union 
  select datetime,
    CONCAT(users.id,'#_#',users.nickname,'#_#',users.avatar,'#_#',answers.datetime,'#_#',answers.answer,'#_#',answers.id) as summary 
  from answers 
  join users on users.id = answers.id_user where id_question = 12
) A ORDER BY datetime 
```

假设您的意思是 sort on `datetime`，而不是`answers.datetime`。

# android - 解析为 Double 时捕获 numberformatException

> ID：14113796
> 
> 赞同：0
> 
> 时间：2013-01-01T20:10:22.717
> 
> 标签：android, exception, number-formatting

我想在某些条件下验证输入集。在这里，我`NumberFormatException`在传递号码时得到了。`InvalidInputException`如果在文本框中输入的数字包含除数字以外的任何内容，我想抛出。现在，如果我只输入数字，那么我也会得到`NumberFormatException`. 这是示例代码。调用`validateInput`如下

```
 try {
                    if (true == validateInput(name.getText().toString(), number
                            .getText().toString())) {
                        // do something
                    }
                } catch (InvalidInputException iie) {
                    Log.d("@gaurav", "not a valid input" + iie);
                    Toast.makeText(this, "Invalid input set", Toast.LENGTH_LONG)
                    .show();
                } catch (Exception ex) {
                    Toast.makeText(this, "Problem while cerating contact", Toast.LENGTH_LONG)
                    .show();
                    Log.d("@gaurav", "Problem while cerating contact", ex);
                } finally {
                 // do something    
                } 
```

`ValidateInput()`如下：

```
 * Name is valid if it starts with an alphabet otherwise not valid Number is
 * valid if the entered text is integer only, 
 * if not valid number/name throws InvalidInputException, otherwise true
 * */
private boolean validateInput(String name, String number)
        throws InvalidInputException {
    InvalidInputException iie = new InvalidInputException();
    try {
        if (name.isEmpty() || number.isEmpty()) {
            Log.d("@gaurav.exception", "input field empty");
            iie.addDescription("Input field is empty");
            throw iie;
        } else {
            if (false == Character.isLetter(name.charAt(0))) {
                Log.d("@gaurav.exception", "first letter of name is not a letter");
                iie.addDescription("first letter of the name is not character");
                throw iie;
            }
            Log.d("@gaurav.exception", "checking number");
        Log.d("@gaurav.exception","number is :"+number+":");                  
            Double.parseDouble(number);
        }
    } catch (NumberFormatException e) {
        Log.d("@gaurav.exception", "In numberFormatexception, adding description, re-throwing iie");
        iie.addDescription("Number field should contain integer only");
        throw iie;
    }
    catch (Exception e) {
        Log.d("@gaurav.exception", "Exception, re-throwing iie");
        throw iie;
    }
    iie = null;
    return true;
} 
```

`MyCustomException`如下_

```
package com.gaurav.contactmanager.model;

public class InvalidInputException extends Exception {
    /**
     * 
     */
    private static final long serialVersionUID = 5585822470459144546L;
    String description;

    public InvalidInputException() {
        super();
    }

    public InvalidInputException(String desc) {
        this.description = desc;
    }

    public void addDescription(String desc) {
        description = desc;
    }

    @Override
    public String toString() {
        return description + "\n\n" + super.toString();
    }

} 
```

Logcat 显示如下内容：

```
01-02 02:11:59.310: D/@gaurav.exception(408): checking number
01-02 02:11:59.321: D/@gaurav.exception(408): number is :６６６６:
01-02 02:11:59.330: D/@gaurav.exception(408): In numberFormatexception, adding description, re-throwing iie
01-02 02:11:59.330: D/@gaurav(408): not a valid inputNumber field should contain integer only
01-02 02:11:59.330: D/@gaurav(408): com.gaurav.contactmanager.model.InvalidInputException 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T20:25:17.307

你正在尝试做

```
 Double.parseDouble(number); 
```

除了可以解析为 Double 的输入之外，它不适用于任何输入。

你可能想做类似的事情

```
try{
     Double.parseDouble(number);
}catch(NumberFormatException e)
{
    throw iie;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T17:44:37.660

我输入的数字的类型/格式存在一些问题，这是问题的根本原因。尝试在其他设备上运行相同的代码确认它是输入类型/格式问题。

# css - 按 id 突出显示 rails 3 中的当前页面

> ID：14113798
> 
> 赞同：1
> 
> 时间：2013-01-01T20:10:27.040
> 
> 标签：css, ruby-on-rails, uinavigationbar, background-color, highlight

我在 Rails 3 中循环渲染我的主要顶部导航：

```
<ul>
<% Placement.all.each do |placement| %>
  <li><%= link_to placement.placementname, placement_path(placement.id)%> </li>
<%end%>
</ul> 
```

如何根据 url 中的 id 突出显示当前展示位置的背景？网址如下所示：
localhost:3000/placements/1
localhost:3000/placements/2
...

一旦用户单击其中一个选项卡，左侧就会出现第二个导航栏。这就是我渲染它的方式：

```
<% @placement.ads.all.each do |ad| %>
    <li><%= link_to ad.adname, placement_ad_path(@placement, ad) %> </li>
<%end%> 
```

如何根据 url 中的 id 突出显示当前广告的背景？网址如下所示： localhost:3000/placements/1/ads/1
localhost:3000/placements/2/ads/3
...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:03:27.523

```
<ul>
 <% Placement.all.each do |placement| %>
   <li class=<%= "highlighted" if placement.id==params[:id].to_i %>>
       <%= link_to placement.placementname, placement_path(placement.id)%> </li>
 <%end%>
</ul> 
```

和

```
<% @placement.ads.all.each do |ad| %>
  <li class=<%= "highlighted" if ad.id==params[:id].to_i %>>
    <%= link_to ad.adname, placement_ad_path(@placement, ad) %> </li>
<%end%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T20:16:56.760

使用样式表和选择性地应用类名。假设您已经设置`@placement`并`@ad`在您的控制器中，我会做这样的事情：

```
<ul class="placements">
<% Placement.all.each do |placement| %>
    <li class="placement <%= 'selected' if placement == @placement %>">
        <%= link_to placement.name, placement %>
    </li>
<% end %>
</ul>

<ul class="ads">
<% @placement.ads.each do |ad| %>
    <li class="ad <%= 'selected' if ad == @ad %>">
        <%= link_to ad.name, [@placement, ad] %>
    </li>
<% end %> 
```

然后你可以把这样的东西放到你的样式表中。（这里我假设 SCSS 或 LESS。）

```
.placements {
    .placement {
        // Normal styling goes here

        &.selected {
            // Extra styles for selected items go here
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T20:17:35.523

您可以使用 params 哈希来检索 id，比较它们并将 css 类附加到 lis：

```
<ul>
<% Placement.all.each do |placement| %>
  <li class="<%= 'highlighted' if placement.id==params[:id] %>"><%= link_to placement.placementname, placement_path(placement.id)%> </li>
<%end%>
</ul> 
```

和

```
<% @placement.ads.all.each do |ad| %>
    <li class="<%= 'highlighted' if ad.id==params[:id] %>"><%= link_to ad.adname, placement_ad_path(@placement, ad) %> </li>
<%end%> 
```

然后在您的样式表中声明 CSS 类：

```
.highlighted{ background-color: #f00;} /* Whatever color fits your needs */ 
```

# sql - 如何在 READ_COMMITTED 隔离下阻止 INSERT？

> ID：14113804
> 
> 赞同：1
> 
> 时间：2013-01-01T20:11:42.710
> 
> 标签：sql, transactions, sql-insert

给定两个表：

*   `Company`[ `id, name, balance`]
*   `Employee`[ `id, name, company_id`]

我想删除一家公司及其依赖项，但我不能原子地这样做，因为在我的实际项目中，一家公司有多个级别的依赖项，这太复杂而无法压缩到单个 SQL 语句中。此外，查看[https://stackoverflow.com/a/5598275/14731](https://stackoverflow.com/a/5598275/14731)我不确定单个 SQL 语句是否是原子的。

相反，我这样做：

1.  `SELECT ... FOR UPDATE`与公司相关的所有员工（锁定他们以防止在交易中进行修改）
2.  一个一个地删除每个员工
3.  删除母公司。

有一个问题：**如何防止在第 1 步和第 2 步之间插入引用公司的新记录？**根据[https://stackoverflow.com/a/3602125/14731](https://stackoverflow.com/a/3602125/14731) `SELECT ... FOR UPDATE`不阻止插入。理想情况下，我想在 Company 上加一把锁，而不是每一种可能指向它的依赖项都加一把锁。

**更新**：我有一个想法，但我不确定它是否有意义。

如果有人想插入指向公司的新记录，他们可能需要查找它以确保它存在。如果我`SELECT ... FOR UPDATE`在第 1 步之前就连上了，就应该阻止他们的读取，从而延迟随后的插入。我有两个问题：

1.  会`SELECT ... FOR UPDATE`阻止正常`SELECT`查询吗？如果没有，我必须确保`SELECT ... FOR UPDATE`在查找公司时始终使用插入线程。
2.  这种方法行得通吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T03:01:45.267

这是一种可能的解决方案：

1.  插入新关联的线程应该在公司上建立一个读锁（使用`REPEATABLE_READ`隔离或`SELECT ... FOR SHARE`）
2.  删除 Company 的线程应使用 写锁定行`SELECT ... FOR UPDATE`。
3.  写锁将等待所有未完成的读锁被释放，并在`DELETE`操作完成之前阻止建立新的读锁。

# c - 函数在可执行文件中的位置

> ID：14113809
> 
> 赞同：4
> 
> 时间：2013-01-01T20:12:24.957
> 
> 标签：c, compiler-construction, linker

C 标准中是否有要求编译（和链接）二进制文件中的函数将按照它们在 C 文件中写入的顺序出现？

> 请假设在下面的示例中编译器没有删除/内联任何函数，并且它们都存在于二进制文件中。问题不在于编译器可能对空函数做什么，而在于函数的顺序。

例如，如果我编译 example.c：

```
void bar() {  }
void foo() {  bar();  }
int main() {   foo();  } 
```

我可以确定它`foo`会`bar`在输出文件中出现吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T20:18:49.770

不，C 标准中没有这样的要求。在编译和链接方面，仅明确提到了函数的特定属性，例如外部或静态链接等，但即使这些属性也大多以独立于实现的方式进行描述。到目前为止，任何标准文档中都没有条款（据我所知）对可执行文件中的符号顺序施加期望。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T20:16:29.687

语言中对此没有规定。通常，它们确实按照您查看代码时所期望的顺序出现，但没有什么说编译器不能构建函数堆栈，并以完全相反的顺序输出它们——当然，一个没有被调用的函数可以删除，类似地，可以删除内联函数并且编译器可以确定它不需要外部引用的原始形式。

您可以通过 找到函数的位置`char *ptr = (char *)bar;`。

编辑：请注意，通过获取函数的地址，您可能会更改函数的内联，因此不要指望这是确定编译器“在正常情况下”做什么的好方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T12:55:30.697

*仅*通过编译器开关是无法控制的。你需要一个两步的过程；在这里为 ELF（UN*X 对象文件格式）说明了这一点，但对于 Windows PE 对象，它可以与此类似。

1.  指示编译器为您必须严格控制其代码位置的函数生成单独的/特定的目标文件[ELF 节](http://wiki.osdev.org/ELF#File_Structure)。这可以在 GCC 中通过[函数属性](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)或[命令行开关](https://stackoverflow.com/questions/4274804/query-on-ffunction-section-fdata-sections-options-of-gcc)来完成。
    根据您想要实现的放置类型，GCC 的某些功能属性（`hot`, `cold`, ...）可能已经满足您的需求，但如果没有，并且特定的排序/特定位置是绝对必要的，那么...
2.  指示*链接器*以特定方式将输入部分排序/重新排列/合并/定位到输出中。

实际的代码/数据放置发生在*链接时*——链接器可以控制“组成对象”的目标代码放置——源对象的 ELF 部分——在生成的目标“复合对象”内，即生成的可执行文件/库。这通过*链接器脚本*发生。*如果使用自定义链接器脚本*指示这样做，链接器将把输入部分放在用户指定的位置/以用户指定的顺序到输出对象中。请参阅有关链接器脚本的[GNU binutils (ld) 手册。](http://sourceware.org/binutils/docs/ld/SECTIONS.html)

结果（反映链接器实际将输入的各个部分放入输出的位置）您可以请求生成[链接器映射文件](https://stackoverflow.com/questions/755783/whats-the-use-of-map-files-the-linker-produces)；如果您使用非默认/自定义链接器脚本来严格控制代码放置，那么您应该指示链接器执行此操作，以便您可以交叉检查它是否符合您的要求。否则，如果您使用链接器的默认值，映射文件会告诉您在没有特定覆盖的情况下做了什么——这可能是也可能不是您想要的，但它至少是一种检查方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T20:17:56.477

没有这样的要求。但是，在您的示例中，如果 bar() 出现在 foo() 之后，则 foo 将认为 bar() 是一个返回整数的尚未定义的函数。

# c# - 选中 CheckBox 后在 C# 中运行时创建按钮？

> ID：14113810
> 
> 赞同：-1
> 
> 时间：2013-01-01T20:12:27.370
> 
> 标签：c#, javascript, jquery, asp.net

我在实现以下功能时遇到了问题：

我需要在 C# 中为我的 ASP.NET 项目添加一个功能：

a）当 CheckBox 被选中时，我需要在我的表单上动态生成一个 Button，当单击 Web 表单上的按钮时，它应该再次取消选中 CheckBox。

检查 CheckBox 后，我无法生成按钮。请帮忙。

PS - 我是大型机开发人员，也是 .NET 世界的新手。请多多包涵！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T20:49:07.290

您可以使用 JQuery 来解决您的问题。

```
<input type="checkbox" id="something"></input>
<div id="Buttons">
</div>

<script type="text/javascript">
$(document).ready(function() {
$("#something").click( function(){
if ($(this).is(':checked')) {
    var $MyButton =  $('<button/>', {
        text: 'button1',
        id: 'button1',
        click: function() { alert('hi'); }
    });
    $("#Buttons").append($MyButton);
  }
 });
});
</script> 
```

**希望能帮助到你**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T20:16:05.117

如果您想在服务器端进行更新，您可以使用更新面板，或者在单击复选框时使用一些客户端 javascript 将按钮注入 DOM。

我会选择 javascript 解决方案，除非您在单击复选框时特别需要在服务器端执行某些操作。

# javascript - 如何使用所选行中的数据？

> ID：14113816
> 
> 赞同：0
> 
> 时间：2013-01-01T20:12:48.700
> 
> 标签：javascript, event-handling, event-delegation

如何从我选择的表中收集行上的数据并在结果中使用它？

这是我用来显示数据输入屏幕的javascript，一旦通过选择行调用了函数。现在我只需要在 PHP 中设计一个表单，其中将包括 (1) 所选行中的一些数据和 (2) 将收集的一些新数据。

## 这是选择行并调用数据输入表单的 Javascript

```
$(document).ready(function () {
    $("tr").live('click',function(){
        $.post('data_entry_form.php', function(data) {
            $('#section2').html(data);
        });
    });
}); 
```

## 这是PHP脚本

```
<?php
require_once "config.php";
$dbh = new PDO($dsn, $dbuser, $dbpass);
$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$dbh->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);

$result = $dbh->query("SELECT aif_id, fee_source_id, company_name_per_sedar, document_filing_date FROM a_aif ORDER BY aif_id DESC");
$result->setFetchMode(PDO::FETCH_ASSOC);

echo "<table id=\"all_aifs\">";
echo "<tr>";
echo "<th><b>Document ID</b></th>";
echo "<th><b>Pubco Name</b></th>";
echo "<th><b>Filing Date</b></th>";
echo "<th><b>PDF</b></th>";
echo "</tr>";

foreach($result as $index => $row) {
echo "<tr>";
echo "<td>$row[fee_source_id]</td>";
echo "<td>$row[company_name_per_sedar]</td>";
echo "<td>$row[document_filing_date]</td>";
echo "<td>Placeholder</td>";
echo "</tr>";
}

echo "</table>";
echo "<br>";
$dbh = NULL;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T21:16:58.320

在事件处理程序中， this 和 $(this) 引用您选择的行：

```
$("tr").live('click',function(){
    // this.cells[1] is the cell that contains Pubco Name
    // You can also use $(this).children("td")[1]
    ...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T21:19:20.477

这个问题的“正确”答案不是从 DOM 中读取。从来不是一个好主意。我建议您将记录 id 传递给 ajax 调用，并让 ajax 调用返回一个已经填充的表单。

```
//PHP
//place the data attribute in the tr
echo "<tr data-recordId='".$row['id']."'>";

//JS
$(document).ready(function () {
    $("tr").live('click',function(){

        //Get the ID from the row clicked
        var id = $(this).data('recordId'); 

        //short-hand
        $('#section2').load('data_entry_form.php?id='+id);

    });
}); 
```

然后，您的 ajax 页面只会读取`$_REQUEST['id']`以获取正在编辑的表单的 id。

```
//Ajax side PHP
$id = (int)$_REQUEST['id'];
//Fetch data and use it to pre-populate form item 
```

你会像这样预先填充你的输入

```
<input type="text" value="<?php  echo $row['value']; ?>" /> 
```

或者

```
echo '<input type="text" value="'.$row['value'].'" />'; 
```

注意：如果您的值包含引号，您需要用代码替换它们`&quot;`

```
echo '<input type="text" value="'.str_replace('"', '&quot;', $row['value']).'" />'; 
```

# c# - 用正则表达式匹配字符串，以特定字符串开头和结尾，并且不包含在两者之间

> ID：14113817
> 
> 赞同：2
> 
> 时间：2013-01-01T20:12:58.220
> 
> 标签：c#, regex

是否可以匹配“aa”和点（。）之间的字符串，其中匹配的字符串不包含“aa”？即，在字符串“ab8aabaa8”中。正则表达式应匹配“aa8”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T20:33:45.930

是的。使用负前瞻：

```
aa(?!.*aa).*\. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T20:30:00.670

在您的示例中，匹配的字符串确实包含 aa。在示例中，进行匹配的正则表达式是“aa(.+).”，matcher.group(1) 会告诉您它匹配字符串“8”（语法取决于您使用的语言）。我没有测试那个 RE，但应该很容易测试。

# node.js - Node.js 文件下载被“require”语句截断

> ID：14113818
> 
> 赞同：0
> 
> 时间：2013-01-01T20:13:01.290
> 
> 标签：node.js

我正在尝试使用 node.js 脚本下载并需要一个 .js 文件，但只下载了部分文件。

具体来说，这似乎是导致问题的部分：

```
response.on('data', function (chunk) {
    out.write(chunk);
    var theModule = require(__dirname + "/" + filename);
    //less than half of the file is downloaded when the above line is included.
}); 
```

这是完整的源代码：

```
var http = require('http');
var fs = require('fs');

downloadModule("functionChecker.js");

function downloadModule(filename) {
    var google = http.createClient(80, 'www.google.com');
    var request = google.request('GET', '/svn/' + filename, {
        'host': 'javascript-modules.googlecode.com'
    });
    request.end();
    out = fs.createWriteStream(filename);
    request.on('response', function (response) {
        response.setEncoding('utf8');
        response.on('data', function (chunk) {
            out.write(chunk);
            var theModule = require(__dirname + "/" + filename);
            //less than half of the file is downloaded when the above line is included.
            //If the import statement is omitted, then the file is downloaded normally.
        });
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T20:17:44.450

`data`可以多次调用该事件。您需要等到所有数据都被写入。

```
response.setEncoding('utf8');
response.on('data', function (chunk) {
    out.write(chunk);
});
response.on('end', function(){
    out.end();
    var theModule = require(__dirname + "/" + filename);
}); 
```

此外，如[docs](http://nodejs.org/api/http.html#http_http_createclient_port_host)`createClient`中所述，已弃用。我还建议使用来简化您的逻辑。`pipe`

```
function downloadModule(filename) {
  http.get({
    hostname: 'javascript-modules.googlecode.com',
    path: '/svn/' + filename
  }, function(res){
    var out = fs.createWriteStream(filename);
    out.on('close', function(){
      var theModule = require(__dirname + "/" + filename);
    });

    res.pipe(out);
  });
} 
```

# html - 如何在rails中的simple_form中将两个div与CSS放在同一行？

> ID：14113819
> 
> 赞同：7
> 
> 时间：2013-01-01T20:13:00.973
> 
> 标签：html, css, ruby-on-rails, erb, simple-form

将两个 div 放在同一行是一个老问题。但是在 rails 中使用 simple_form 时我找不到解决方案。我想要做的是在同一行显示内容及其标签。标签的宽度为 125px ( `.left`)，内容在右侧 ( `.right`)。标签中的文本右对齐，内容中的文本左对齐。

这是HTML：

```
<form id="new_production" class="simple_form new_production" novalidate="novalidate" method="post" action="/projects/1/productions" accept-charset="UTF-8">
    <div style="margin:0;padding:0;display:inline">
        <input type="hidden" value="✓" name="utf8">
        <input type="hidden" value="2UQCUU+tKiKKtEiDtLLNeDrfBDoHTUmz5Sl9+JRVjALat3hFM=" name="authenticity_token">
    </div>
    <div class="left">Proj Name：&lt;/div>
    <div class="right">must have a name</div>
    <div class="input string required"> 
```

这是CSS：

```
.simple_form div.left {
  float: left;
  width: 125px;
  text-align: right;
  margin: 2px 10px;
  display: inline;
}

.simple_form div.right {
  float: left;
  text-align: left;
  margin: 2px 10px;
  display: inline;
} 
```

但是，在结果中，有一个换行符，如下所示：

```
Proj Name：
must have a name 
```

简单形式的erb代码为：

```
<div class="left">Proj Name：&lt;/div><div class="right"><%= @project.name %></div> 
```

我不想使用表格，但 CSS 仅用于解决问题。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-02T07:50:46.270

你的css很好，但我认为它不适用于div。只需编写简单的类名，然后尝试。您可以在[Jsfiddle](http://jsfiddle.net/atinder123/h25Kb/)检查它。

```
.left {
  float: left;
  width: 125px;
  text-align: right;
  margin: 2px 10px;
  display: inline;
}

.right {
  float: left;
  text-align: left;
  margin: 2px 10px;
  display: inline;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T00:10:55.670

您不能浮动或设置内联元素~~的宽度。~~`display: inline;`从两个类中删除，您的标记应该可以正常显示。

编辑：您可以设置宽度，但它会导致元素呈现为块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-11T10:25:18.700

为什么不使用弹性盒？所以像这样将它们包装到另一个div中

```
.flexContainer { 

  margin: 2px 10px;
  display: flex;
} 

.left {
  flex-basis : 30%;
}

.right {
  flex-basis : 30%;
}
```

```
<form id="new_production" class="simple_form new_production" novalidate="novalidate" method="post" action="/projects/1/productions" accept-charset="UTF-8">
    <div style="margin:0;padding:0;display:inline">
        <input type="hidden" value="✓" name="utf8">
        <input type="hidden" value="2UQCUU+tKiKKtEiDtLLNeDrfBDoHTUmz5Sl9+JRVjALat3hFM=" name="authenticity_token">
    </div>
    <div class="flexContainer">
      <div class="left">Proj Name：&lt;/div>
      <div class="right">must have a name</div>
    </div>
    <div class="input string required"> </div>
 </form>
```

随意使用弹性基础百分比以获得更多自定义空间。

# sql - 表变量批量插入的这条 SQL 语句有什么问题

> ID：14113820
> 
> 赞同：11
> 
> 时间：2013-01-01T20:13:14.223
> 
> 标签：sql, sql-server, tsql

我正在尝试将 CSV 插入临时表，但此 SQL 语句似乎不起作用。

```
DECLARE @TempTable TABLE (FName nvarchar(max),SName nvarchar(max),
                          Email nvarchar(max));
BULK INSERT @TempTable 
FROM 'C:\52BB30AD694A62A03E.csv' 
WITH (FIELDTERMINATOR = ',',ROWTERMINATOR = '\n') 
```

收到以下错误....

`Incorrect syntax near '@TempTable'.`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-01T20:17:32.107

您不能将 BULK INSERT 插入到表变量中。所以这一行：

```
BULK INSERT @TempTable 
```

是什么导致了错误。

* * *

仅供参考，最简单的解决方法可能只是使用#Temp 表而不是表变量。所以你的 SQL 代码会变成这样：

```
CREATE TABLE #TempTable (FName nvarchar(max),SName nvarchar(max),
                          Email nvarchar(max));
BULK INSERT #TempTable 
FROM 'C:\52BB30AD694A62A03E.csv' 
WITH (FIELDTERMINATOR = ',',ROWTERMINATOR = '\n') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-01T20:27:03.250

使用时不能使用表变量`BULK INSERT`

你可以试试这个

```
DECLARE @TempTable TABLE (FName nvarchar(max),SName nvarchar(max),
                          Email nvarchar(max));
INSERT INTO @TempTable
select * FROM OPENROWSET('Microsoft.ACE.OLEDB.12.0','Text;Database=C:\Users\Administrator\Dropbox\Personal\testing.vineup.com\admin\imported;HDR=Yes;FORMAT=Delimited(,)', 'SELECT * FROM [52BB30AD694A62A03E.csv]') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T04:55:51.023

您不能对表变量使用批量插入。为此，您创建了如下所示的临时表。

```
CREATE TABLE #TEMPtbl 
(
    [FNAME] [nvarchar](MAX) ,
    [SNAME] [nvarchar](MAX) ,
    [EMAIL] [nvarchar](MAX) 
)
GO 
BULK INSERT #TEMPtbl FROM 'C:\FileName.csv' 
WITH (FIRSTROW = 1, FIELDTERMINATOR = ',', ROWTERMINATOR = '\n') 
```

你可以试试这个。它可能对你有帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-01T20:17:48.410

我想你想做这样的事情：

```
DECLARE @sql NVARCHAR(8000)
SET @sql = 
'
BULK INSERT #TempTable ...' ; 
```

您正在做的是试图将变量强制转换为非动态 sql 语句。所以编译器/解释器（不确定哪个是 SQL 的正确术语）因为无法正确解析它而崩溃。

# html - 标签或标签？

> ID：14113821
> 
> 赞同：-1
> 
> 时间：2013-01-01T20:13:14.847
> 
> 标签：html, label

考虑这两个例子：

```
<label>Label:<input /></label>

<label for="inp">Label:</label><input id="inp" /> 
```

它们之间有什么区别吗？我应该使用其中一个吗？是否存在任何性能或兼容性问题？

# php - 使用 PHP 的可降级 jquery ajax 表单 - 代码重复

> ID：14113824
> 
> 赞同：0
> 
> 时间：2013-01-01T20:13:33.163
> 
> 标签：php, jquery, ajax, pdo, graceful-degradation

假设我有一个我想提交的表格。我已经建立了它和表格`action=""`。因此，我可以通过以下方式访问发布的数据`if(isset($_POST['something']))`

示例 form.php（代码未检查，只是为了说明点）：

```
<?php
    $result = '';

    if (isset($_POST['something']) {
        $sql = 'SELECT * FROM aTable WHERE Name = :name';
    $stmt = $db->prepare($sql); 
    $stmt->execute(array(':name' => $_POST['something']);   
    $result = $stmt->fetchAll(PDO::FETCH_ASSOC);    
    }
?>

<form action="" method="post">
    <input type="text" name="something" />
    <input type="submit" value="post" />
</form>

<div id="result">
    <pre>
    <?php echo $result; ?>
    </pre>
</div> 
```

现在，如果用户启用了 js，我希望使用 jquery/js 处理表单。

我知道该怎么做。但是，我在访问数据库时遇到问题，例如在 2 个 php 文件中运行相同的查询。我的原始表单页面中的一个，当 js 关闭并返回关联的数据数组时使用。然后我有一个 ajaxData.php 它返回 json 但基本上是相同的 sql 查询。

示例 AJAXDATA.php

```
<?php
    $result = '';

    if (isset($_POST['something']) {
        $sql = 'SELECT * FROM aTable WHERE Name = :name';
    $stmt = $db->prepare($sql); 
    $stmt->execute(array(':name' => $_POST['something']);   
    $result = $stmt->fetchAll(PDO::FETCH_ASSOC);    

    echo json_encode($result);
    }

?> 
```

在我看来，这是低效的，因为我正在编写相同的代码、相同的数据访问等......两次 - 一次用于 form.php，一次用于 ajaxdata.php。

我应该如何构建我的表单/文件，以便 ajax 使用与普通表单提交相同的数据库访问和 sql 代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T05:53:29.777

对于 html 更改
添加`onSubmit`事件以处理`js`启用/禁用

```
 <form action="" method="post" onSubmit="return process_ajax();">
       <input type="text" name="something" />
       <input type="submit" value="post" />
     </form> 
```

在`precess_ajax()`返回 false 以便不会提交表单，如果`js`禁用表单将被提交。所有参数必须与表单发布时相同。如果 post 是通过表单发送的，请发送一个额外的参数以在服务器`AJAX`端进行测试或`ajaxForm``AJAX`

现在对于服务器端 PHP 代码检查额外的参数`ajaxForm`是否已设置或具有您在`AJAX` 发送`JSON`响应中发送的值，否则发送 HTML 页面。您的代码将如下所示

```
 if (isset($_POST['something']){
        $sql = 'SELECT * FROM aTable WHERE Name = :name';
        $stmt = $db->prepare($sql); 
        $stmt->execute(array(':name' => $_POST['something']);   
        $result = $stmt->fetchAll(PDO::FETCH_ASSOC);    
        if(isset($_POST['ajaxForm'])){
          //send JSON response
        }
        else{
          //show html page here
        }   
      }

    ?> 
```

# jquery - jquery animate 在 Chrome/IE 上向左而不是向右调整大小

> ID：14113825
> 
> 赞同：1
> 
> 时间：2013-01-01T20:13:34.023
> 
> 标签：jquery, jquery-animate

我有四个角，当单击一个角时，它会扩展以从它所属的任何角填充屏幕到对角。我看过很多答案，大多数要么建议更改边距，这严重扰乱了我的布局，要么为左边缘设置动画，就像这样

```
$("#topRightBG").click(function() {
    $(this).css({
        "zIndex": 20,
        "cursor": "default"
    }).stop(false, true).animate({
        "height": outUp,
        "width": outSide,
        "left": 0
    }, {
        duration: speed_out,
        easing: style_out
    });
}); 
```

唯一的问题是，向左移动没有动画，它只是跳跃，正如我[在这里](http://jsfiddle.net/XfeGN/6/)演示的那样。

我觉得改变左边缘是我想要做的，但我不知道如何让它正常工作。任何人都可以帮忙吗？

**意识到它至少适用于 Firefox，但不适用于 Chrome 和 IE。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T22:21:45.970

我发现我需要做的就是分别为左侧的运动设置动画。

```
$("#topRightBG").click (function () {
    $(this).css({
        "zIndex": 20,
        "cursor": "default"
    }).stop(false, true).animate({
        "height": outUp,
        "width": outSide
    }, {
        duration: speed_out,
        easing: style_out
    }).animate({
        "left": 0
    }, {
        duration: speed_out,
        easing: style_out
    });
}); 
```

# android - Parcelable 的变量在 Parcel 之后的值始终为 0.0

> ID：14113831
> 
> 赞同：1
> 
> 时间：2013-01-01T20:14:28.263
> 
> 标签：android, parcelable, parcel

在我打包我的 Parcelable 对象并想要返回它之后，变量的值都是 0.0！任何想法为什么？

这是我的 Parcelable 类：

```
public class ParcelData implements Parcelable {

public byte mapIsSelected; 
public byte carIsSelected;
public byte gameIsPaused;
public float positionX ;
public float positionY ;
public float angle;
public int whichMap; 
public int whichCar;

public ParcelData(byte mapIsSelected, byte carIsSelected, byte gameIsPaused, float positionX, float positionY, float angle, int whichMap, int whichCar){

    this.mapIsSelected = mapIsSelected;
    this.carIsSelected = carIsSelected;
    this.gameIsPaused = gameIsPaused;
    this.positionX = positionX;
    this.positionY = positionY;
    this.angle = angle;
    this.whichCar = whichCar;
    this.whichMap = whichMap;
}

public int describeContents() {

    return 0;
}

public void writeToParcel(Parcel dest, int flags) {

    dest.writeByte(mapIsSelected);
    dest.writeByte(carIsSelected);
    dest.writeByte(gameIsPaused);
    dest.writeFloat(positionX);
    dest.writeFloat(positionY);
    dest.writeFloat(angle);
    dest.writeInt(whichCar);
    dest.writeInt(whichMap);

}

private ParcelData(Parcel in) {

    mapIsSelected = in.readByte();
    carIsSelected = in.readByte();
    gameIsPaused = in.readByte();
    positionX = in.readFloat();
    positionY = in.readFloat();
    angle = in.readFloat();
    whichMap = in.readInt();
    whichCar = in.readInt();
}

 public static final Parcelable.Creator<ParcelData> CREATOR = new Parcelable.Creator<ParcelData>() {

        public ParcelData createFromParcel(Parcel in) {
            return new ParcelData(in);
        }

        public ParcelData[] newArray(int size) {
            // TODO Auto-generated method stub
            return new ParcelData[size];
        }
    };
} 
```

以下是我创建 Parcel 并返回 Parcelable 的方法：

```
data = new ParcelData((byte)1, (byte)1, (byte)1, 4.0f, 4.0f, 4.0f, 2, 2);
final Parcel parcelData  = Parcel.obtain();
data.writeToParcel(parcelData, 0);

recievedData = ParcelData.CREATOR.createFromParcel(parcelData); 
Log.d ("test", "test: "+ recievedData.positionY);  // always 0.0 ?!?!!? 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T20:55:41.397

好的，我终于有了解决方案:)

在我使用 ParcelData.CREATOR.createFromParcel 之前，我需要将 Parcel 的数据位置设置回 0

```
data = new ParcelData((byte)1, (byte)1, (byte)1, 4.0f, 4.0f, 4.0f, 2, 2);
final Parcel parcelData  = Parcel.obtain();
data.writeToParcel(parcelData, 0);

parcelData.setDataPosition(0) //<----- Solution

recievedData = ParcelData.CREATOR.createFromParcel(parcelData); 
```

# javascript - JavaScript 调用变量作为对象和函数，如 jQuery

> ID：14113833
> 
> 赞同：3
> 
> 时间：2013-01-01T20:14:39.230
> 
> 标签：javascript, jquery, prototype

我正在尝试为移动设备创建一个库，并且我希望能够像 jquery 那样将对象作为函数和对象调用。

例子：

```
var test = function(elm) {

    this.ajax = function(opt) { ... }
    if ( elm ) {
       var elms = document.querySelectorAll(elm);
    }
} 
```

我希望能够这样称呼它：

```
test("#id"); 
```

像这样：

```
test.ajax(opts); 
```

LE： **谢谢你们的快速反应！**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T20:28:54.897

在 JavaScript 中，函数实际上只是一个附有代码的对象。

所以不是一个普通的对象：

```
var test = {};
test.ajax = function() { /* ajax */ }; 
```

...使用一个功能：

```
var test = function() { /* test */ };
test.ajax = function() { /* ajax */ }; 
```

在这两种情况下，您都可以访问`test.ajax`. 该函数的额外之处在于您可以调用`test`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T21:56:22.827

或者可能是这样的：

```
Object.prototype.Test = function( method ) {
    var method = method || null;
    var elms   = null;

    /* Methods */
    this.ajax = function(opt){
        console.log('You called ajax method with options:');
        console.log(opt);
    }
    /* Logic */
    if (method in this) this[method].apply( this, Array.prototype.slice.call( arguments, 1 ));
    else {
        try {
            elms = document.querySelectorAll(method);
        }
        catch(e) {
            console.log(e.message);
        }
    }

}
window.onload = function() {
    Test('ajax', {'url':'testurl.com'});
    Test('#aid');  
} 
```

# php - 加密锚标记内的查询字符串

> ID：14113835
> 
> 赞同：0
> 
> 时间：2013-01-01T20:14:54.687
> 
> 标签：php

```
echo '<a class="bigbtn" href="'.'videoview.php?song_id='.$video['song_id'].'&'.'title='.$video['VideoTITLE'].'&'.'group='.$video['GroupName'].'&'.'artist='.$video['ByArtist'].'"></a>' ; 
```

当浏览器中出现用户无法篡改的链接时，加密链接的最佳方法是什么？这不是关键任务链接。但想让它更安全一点。

我正在尝试使用 urlencode 并使用 base64 进行解码，但我尝试将值分配给这样的变量。

```
 $song_id = urldecode(base64_decode($_Get['song_id'])); 
```

但转换没有发生。

，解码并没有像我想象的那样发生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T20:27:55.740

Base64 是一种以 ASCII 字符串格式表示二进制数据的方法，它与加密无关。

假设加密/解密发生在服务器端：

加密：[mcrypt-encrypt](http://php.net/manual/en/function.mcrypt-encrypt.php)。然后，解密：[mcrypt-decrypt](http://php.net/manual/en/function.mcrypt-decrypt.php)

一个实现示例：

```
<?php
    $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB);
    $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);
    $key = "secret";
    $text = "Keep it secret, keep it safe";

    //encrypt
    $crypttext = mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $key, $text, MCRYPT_MODE_ECB, $iv);

    //decrypt
    $originaltext = mcrypt_decrypt (MCRYPT_RIJNDAEL_256, $key ,$crypttext ,  MCRYPT_MODE_ECB, $iv);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T20:42:43.257

混淆变量或 id 几乎永远不会得到回报：如果您想保护资源，请使用[授权](http://symfony.com/doc/current/book/security.html)。

如果您想防止大量下载被抓取，请使用 IP 监控来监视访问/配额。

但在我看来，简单的查询/网址混乱是一种廉价的解决方案，不会长期支付。

# mysql - VB、MySQL 和 API 连接 - Visual Studio 2012

> ID：14113838
> 
> 赞同：-3
> 
> 时间：2013-01-01T20:15:20.937
> 
> 标签：mysql, database, visual-studio

好吧，我正在 Visual Studio 2012 中创建一个程序，它在 VB 中。我有一个登录系统，我希望它连接到具有用户名和密码的数据库。我确实希望这个安全。此外，在数据库和程序中有 3 个级别。级别 1 可以访问程序 1 级别 2 可以访问程序 1 和 2 级别 3 可以访问程序 1、2 和 3。

我也想要数据库中的数字 1、2 和 3；或任何变化。

细节将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T20:47:13.820

我想登录系统有一个单独的表，您正在从中检索数据以检查登录的用户输入（用户名和密码）。在该表中添加另一个名为“权限”的列。根据需要添加 1、2、3。当您检索数据以检查登录时，检索用户权限级别。当用户尝试根据他的权限访问任何程序（程序 1、程序 2、程序 3）时，您可以限制访问。

考虑表，

```
userid | username | password | permission
  1          xyz     1234         3
  2          abc     12332        1 
```

现在，您已登录系统，该系统使用“ `SELECT permission FROM table WHERE username=[textboxvalue] and password=[textboxvalue];`”在每个程序中都有一个 if 条件为

```
if (permission == 3) then
{
 //let user to use the program
}
else
{
  //redirect the user to another page
  Response.Redirect("http://www.microsoft.com");
} 
```

# php - SQL语法错误，自己找不到

> ID：14113846
> 
> 赞同：-1
> 
> 时间：2013-01-01T20:16:13.887
> 
> 标签：php, html, mysql, forms

> **可能重复：**
> [MySQL - 何时使用单引号、双引号和反引号？](https://stackoverflow.com/questions/11321491/mysql-when-to-use-single-quotes-double-quotes-and-backticks)

我对此视而不见。并且需要一些帮助来定位错误。

html:

```
 <b>Navn:</b> 
        <input type="text" name="navn" id="navn">

        </br>
        </br>

        <b>K&oslash;n:</b>
        <input type="radio" name="køn" value="mand" id="radio">Mand
        <input type="radio" name="køn" value="kvinde">Kvinde

        </br>
        </br>

        <b>Alder:</b> 
        <select name="alder" id="selecta">
        <option value="blank"></option>
        <option value="10til15">10 til 15 &aring;r</option>
        <option value="15til20">15 til 20 &aring;r</option>
        <option value="20til25">20 til 25 &aring;r</option>
        <option value="25til30">25 til 30 &aring;r</option>     
        </select>

        </br>
        </br>

        <b>V&aelig;gt:</b>  
        <select name="vægt" id="selectv">
        <option value="blank">Vægt</option> 
        <option value="30til40">30 til 40 kg</option>
        <option value="40til50">40 til 50 kg</option>
        <option value="50til60">50 til 60 kg</option>
        <option value="60til70">60 til 70 kg</option>       
        </select>

        </br>
        </br>

        <b>B&aelig;lte:</b>
        <select name="bælte" id="selectb">
        <option value="blank">vægt</option>
        <option value="hvid">Hvid</option>
        <option value="grøn">Gr&oslash;n</option>
        <option value="blå">Bl&aring;</option>
        <option value="sort">Sort</option>      
        </select> 
```

php:

```
$navn = $_POST['navn'];
$køn = $_POST['køn'];
$alder = $_POST['alder'];
$vægt = $_POST['vægt'];
$bælte = $_POST['bælte'];

$con = mysql_connect("...", "...", "...") or die(mysql_error());
echo "Connected to MySQL<br />";

mysql_select_db("...", $con) or die(mysql_error());
echo "Connected to Database<br />";

mysql_query("INSERT INTO Tilmeldinger 
(column 2, column 3, column 4, column 5, column 6)
VALUES ($navn, $køn, $alder, $vægt, $bælte)") or die(mysql_error());

mysql_query("SELECT * FROM Tilmeldinger ORDER BY column 3, column 4, column 5, column 6") or die(mysql_error());

mysql_close;

echo "Tak for din tilmelding! Du bliver viderstillet om et kort øjeblik";

header("Refresh: 5; URL=http://www.casperwmn.dk/tilmelding.php");
exit; } 
```

我得到输出：

```
Connected to MySQL
Connected to Database
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'column 2, column 3, column 4, column 5, column 6) VALUES (Casper, mand, 20til25,' at line 2 
```

我已经完成了宝贵的 &vægt 但我似乎无法找到问题所在？

提前，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T20:18:08.287

而不是第 2 列 try ``column 2``。在列名周围添加反引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T20:18:26.163

大概应该是：

```
mysql_query("INSERT INTO Tilmeldinger 
(column2, column3, column4, column5, column6)
VALUES ($navn, $køn, $alder, $vægt, $bælte)") or die(mysql_error()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T20:19:10.067

在您的 SQL 语句中，列名不能有空格，除非您引用它们。例如：

```
INSERT INTO (`column 2`, `column 3`, ...) VALUES ( ... ) 
```

同样在 SELECT 中，列名必须在 ORDER BY 子句中引用，因为它们包含空格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T20:26:12.447

正如你的错误所说

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'column 2, column 3, column 4, column 5, column 6) VALUES (Casper, mand, 20til25,' at line 2 
```

-->**在**第 2 行的“第 2 列、第 3 列、第 4 列、第 5 列、第 6 列）值（Casper、mand、20til25）**附近**

我猜，问题是，你没有将列名转义为'-字符，比如`'column n'`

试试看...

# javascript - 使用按钮隐藏/显示 iframe

> ID：14113850
> 
> 赞同：3
> 
> 时间：2013-01-01T20:16:33.527
> 
> 标签：javascript, html, css

我有一个包含 2 个 iframe 的网页，1 个位于另一个下方。当用户第一次点击网页时，我希望隐藏两个 iframe。将有 2 个按钮，每个 iframe 上方有 1 个，用户必须单击按钮才能显示 iframe。我也想要它，所以如果按下 iframebutton1 则 iframe2 将被隐藏（如果它正在显示），反之亦然。

这是我的代码：

jsfiddle.net/darego/Z62P7/

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T20:28:24.553

这是我建议使用的代码：

```
function hideToggle(button, elem) {
  $(button).toggle( function () {
    $(elem).hide();
  },function () {
    $(elem).show();
  });
}

hideToggle(".button1", ".iframe1");
hideToggle(".button2", ".iframe2"); 
```

这是更新的工作小提琴：[单击此处](http://jsfiddle.net/Z62P7/1/)

这只是使用了一个简单的隐藏/显示功能，因此您可以一次又一次地重复使用它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-01T20:34:15.527

要显示或隐藏 iframe：

```
document.getElementById("yourIFrameid").style.display = "none"; //hides the frame
document.getElementById("yourIFrameid").style.display = "block"; //shows the frame 
```

# iphone - 通过 iPhone 5 的自定义 URL 启动屏幕

> ID：14113863
> 
> 赞同：2
> 
> 时间：2013-01-01T20:18:07.833
> 
> 标签：iphone, ios, cocoa-touch, iphone-5, default.png

根据 Apple [docs](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/App-RelatedResources/App-RelatedResources.html)，当我的应用程序通过自定义 url 方案启动时，我可以使用不同的启动图像。我已经能够为 3.5 英寸标准和视网膜图像实现这一点。

我应该使用

```
<basename>-<url_scheme><scale_modifier><device_modifier>.png 
```

这会产生 Default.png -> default-customURL.png 和 Default@2x.png -> Default-customURL@2x.png

但我不能完全正确

默认 568h@2x.png -> ???

我应该如何格式化这个文件名？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T20:20:45.270

正确的格式是：

```
Default-customURL-568h@2x.png
Default-customURL-667h@2x.png
Default-customURL-756h@3x.png 
```

...适用于 4"、4.7" 和 5.5" Retina 显示屏

# active-directory - 我可以在 Active Directory 中使用现有名称创建新的全局安全组吗？

> ID：14113865
> 
> 赞同：1
> 
> 时间：2013-01-01T20:18:16.710
> 
> 标签：active-directory, active-directory-group

如何创建一个名为 的全局安全组`finance`，因为我在 Active Directory 中已经有一个具有该名称的用户。可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T20:53:41.087

您**不能**在同一个容器中拥有两个同名的对象 - 因此您不能`Finance`在用户所在的同一个容器 (OU) 中创建一个名为的组`Finance`。用户和组都将由

```
OU=Finance,OU=YourOU,OU=YourOtherOU,dc=YourCompany,dc=com 
```

这行不通 - 每个对象的完全区分的祸根（FQDN）必须是唯一的。

除此之外，还要求对象必须具有唯一的**SAM 帐户名称**- 默认情况下与“显示”名称 ( `Finance`) 相同 - 但可以设置为其他名称。

因此，如果您的用户被调用`Finance`并且 SAM 帐户名称为`Finance`- 那么您应该能够通过将其 SAM 帐户名称设置为 eg或类似`Finance`的名称来创建一个名为（在不同的 OU/Container 中）的全局组。`FinanceGroup`

您没有指定您使用的语言/编程系统 - 如果您尝试在 C# / .NET 3.5 或更高版本中创建此组，您可以使用如下代码：

```
using(PrincipalContext ctx = new PrincipalContext(ContextType.Domain))
{
    GroupPrincipal finGroup = new GroupPrincipal(ctx);
    finGroup.DisplayName = "Finance";
    finGroup.SamAccountName = "FinanceGroup";

    finGroup.Save();
} 
```

# google-drive-api - Google Drive Api - PHP - Upload word doc - 400 Bad request

> ID：14113867
> 
> 赞同：1
> 
> 时间：2013-01-01T20:18:22.527
> 
> 标签：google-drive-api

我的最终目标是允许用户将一些内容上传到他们个人帐户中的 google drive word 文档中。

我正在使用[https://developers.google.com/drive/v2/reference/files/insert#examples](https://developers.google.com/drive/v2/reference/files/insert#examples)上提供的 PHP 示例。上传简单的文本文件时，它工作正常。

然后（在使用 mimetype application/msword 浪费了将近 8 个小时之后。不知道为什么文档不能更容易地找到这些常见的细节。）我将 mimetype 更改为**application/vnd.google-apps.document**并使用空数据，并且它工作得很好。

然后，我在 google drive web 界面上创建了一个 doc 文件，然后将其导出到我的机器上。它被保存为 docx。然后在示例中，此文件用作数据源，我不断收到**Error calling POST [https://www.googleapis.com/upload/drive/v2/files?uploadType=multipart](https://www.googleapis.com/upload/drive/v2/files?uploadType=multipart) : (400) Bad Request**错误。

错误消息甚至没有提供有关请求有什么问题的更多详细信息。

```
[responseBody:protected] => {
  "error": {
    "errors": [
      {
        "domain": "global",
        "reason": "badRequest",
        "message": "Bad Request"
      }
    ],
    "code": 400,
    "message": "Bad Request"
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:50:20.690

您可能必须将 Word 文件的内容作为字符串放入 $request['content']

如果是 .DOCX，则正确的 MIME 类型是：

```
application/vnd.openxmlformats-officedocument.wordprocessingml.document 
```

参考：[MSDN 库](http://blogs.msdn.com/b/vsofficedeveloper/archive/2008/05/08/office-2007-open-xml-mime-types.aspx)

那么，如何通过响应而不是产生它的请求来判断出什么问题呢？

你可能只是写了“HTTP400 - 废话不工作”，而不是，

这将提供大约等量的信息。

HTTP Response-Code #400 一般意味着，

*HTTP 请求格式不正确（例如缺少参数、未正确转义等）。*

^ ...这当然是正确的答案 - 根据**示例响应**。

这正是提供的信息不足以为您提供直接答案的原因。我还希望 API 在响应中包含更多详细信息（尤其是在偶尔出现文件验证错误时）——因为有时人们只能猜测“另一边”出了什么问题。

最佳实践是从一个非常简单的工作版本开始，然后增加一些复杂性。

如果您希望审查/解决问题，您应该添加一个**示例请求**。

甚至代码看起来如何都无关紧要 - 当请求明显格式错误时。

普通我提供网络脚本作为服务，只是目前有点资源不足。

# java - Android SQLlite 按数字字段选择

> ID：14113869
> 
> 赞同：0
> 
> 时间：2013-01-01T20:18:29.363
> 
> 标签：java, android, sql, sqlite

我有一张桌子：

```
_id  Data         Number
1    somestring     25
2    somestring     36
3    somestring     75 
```

我需要通过数字（数字字段）获取数据字符串。我在做什么：

```
 Cursor cursor = myDataBase.query("tablename", new String[] {"_id", "Data", "Number"}, "Number" + "=75", null, null, null, null);
 if(cursor != null){
        cursor.moveToFirst();
        return cursor.getString(1);
        } 
```

我从来没有使用过 SQL 数据库，所以你能帮帮我吗？我知道我做错了什么。我只需要按数字获取数据字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T20:32:29.087

```
Cursor cur = _db.rawQuery("SELECT * FROM <tablename> WHERE Number=?;", new String[] { String.valueOf(<number>) });

String result = "";

if(cur.moveToFirst()) {
    result = cur.getString(cur.getColumnIndex("Data"));
    cur.close(); // remember to close cursor object
}

return result; 
```

# php - PHPExcel - 使用示例读取过滤器

> ID：14113870
> 
> 赞同：3
> 
> 时间：2013-01-01T20:18:33.890
> 
> 标签：php, filter, spreadsheet, phpexcel

我刚刚开始使用 PHPExcel。我的非常大的电子表格无法全部加载到内存中（内存故障）。为了只加载我需要的工作表的部分，我正在尝试使用文档中提供的 MyReadFilter 代码，但代码有点高于我，我希望有人能帮助我理解它。

在 PHPExcel 文档中，函数如下：

```
class ReadFilter implements PHPExcel_Reader_IReadFilter 
    { 
    private $_startRow = 0; 
    private $_endRow   = 0; 
    private $_columns  = array(); 

    /**  Get the list of rows and columns to read  */ 
    public function __construct($startRow, $endRow, $columns) { 
        $this->_startRow = $startRow; 
        $this->_endRow   = $endRow; 
        $this->_columns  = $columns; 
        } 

    public function readCell($column, $row, $worksheetName = '') { 
    // Only read the rows and columns that were configured 
    if ($row >= $this->_startRow && $row <= $this->_endRow) { 
        if (in_array($column,$this->_columns)) { 
        return true; 
        } 
    } 
    return false; 
    } 
} 
```

我正在使用以下几行来调用 PHPExcel

```
//  Get the selected Excel file, passed from form
$testFile = $_FILES['upload_test']['tmp_name'];     
//  Identify the file type of the selected file
$inputFileType = PHPExcel_IOFactory::identify($testFile);
//  Create a reader object of the correct file type 
$objReader = PHPExcel_IOFactory::createReader($inputFileType);
//  Instantiate the filter class and apply it to the reader object
$filterSubset = new ReadFilter(1,1000,range('A','Z'));
$objReader->setReadFilter($filterSubset);       
//  Load the selected file into the reader
$objWorkbook = $objReader->load($testFile); 
```

我正在使用以下语法从生成的工作表对象中检索数据：

```
$someValue= $objWorkbook->getSheet($idx)->getCell('B11')->getCalculatedValue(); 
```

我敢肯定，我还会有其他问题，但我的第一个问题是关于调用该函数。如果我将上面的行从：

```
$filterSubset = new ReadFilter(1,1000,range('A','Z')); 
```

至：

```
$filterSubset = new ReadFilter(1,1000,range('A','AA'));  //Last column changed 
```

整个读取失败。我实际上只需要 B 列的计算值，但该列的引用远至 AS 列，所以我也需要阅读它们。有人可以告诉我如何使用这个函数来阅读过去的 Z 列，或者修改它吗？理想情况下，我只想阅读从 B 到 AS 分布的大约十几个列的内容，但我也无法弄清楚。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T21:04:35.720

`range('A','AA');`无效尝试创建您自己的自定义范围

例子

```
echo "<pre>";
print_r(xrange('AA', 'ZZ')); 
```

使用的功能

```
function xrange($start, $end, $limit = 1000) {
    $l = array();
    while ($start !== $end && count($l) < $limit) {
        $l[] = $start;
        $start ++;
    }
    $l[] = $end;
    return $l;
} 
```

[观看现场演示](http://eval.in/5742)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T20:23:57.400

range('A','AA) is not a valid range.... PHP 的 range 函数不假定 AA 跟随 Z。尝试使用列号，使用 PHPExcel 的 columnIndexFromString() 和 stringFromColumnIndex() 静态方法PHPExcel_Cell 类将 27 转换为 AA，反之亦然（注意基值 0 或 1）。

# asp.net-mvc - 如何在 .NET Web 应用程序中创建用户身份验证？

> ID：14113877
> 
> 赞同：2
> 
> 时间：2013-01-01T20:19:45.020
> 
> 标签：asp.net-mvc, authentication

我正在创建 ASP.NET MVC Web 应用程序。我有数据模型用户：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace Knihovna.Models
{
    public class User
    {
        public int UserId { get; set; }
        public string Name { get; set; }
        public string Login { get; set; }
        public string Password { get; set; }
        public List<Book> Books { get; set; }
    }
} 
```

我需要创建用户注册和用户登录。应用程序需要知道用户是否登录。

是否有一些最佳实践如何做到这一点？在会话中保存登录用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T23:16:53.863

没有必要弄乱`Session`对象。

由于您已经在使用 ASP.NET MVC，因此您`AccountController`的 Controllers 文件夹中可能有一个。该控制器具有基本的身份验证方法。

我建议您看一下 ASP.NET 团队的本教程，该教程解释并展示了如何在 ASP.NET MVC 中使用身份验证 + 授权。

> 创建新的 ASP.NET MVC 应用程序时，ASP.NET MVC 的默认 Visual Studio 项目模板会自动启用表单身份验证。它还会自动向项目添加一个预构建的帐户登录页面实现——这使得在站点中集成安全性变得非常容易。

[NerdDinner 第 9 步：身份验证和授权](http://nerddinnerbook.s3.amazonaws.com/Part9.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T21:32:57.400

我会使用 ASP.NET 成员资格和角色提供者模型。如果您想使用自定义表来执行此操作，您可以创建一个从 Membership Provider 继承的类。您可以实施多种方法来支持更改密码、忘记密码等操作……但用于登录的方法是 ValidateUser

```
public sealed class MyMembershipProvider : MembershipProvider
{
    public override bool ValidateUser(string username, string password)
    {
        bool isValid = false;
        // your authentication logic here
        var ticket = new FormsAuthenticationTicket(
                    1,
                    YOUR_USER_ID_HERE,
                    DateTime.Now,
                    DateTime.Now.AddMinutes(30),
                    false,
                    name,
                    FormsAuthentication.FormsCookiePath);

                var authCookie = new HttpCookie(FormsAuthentication.FormsCookieName, FormsAuthentication.Encrypt(ticket));
                HttpContext.Current.Response.Cookies.Add(authCookie);

        return isValid;
    }
} 
```

如果您希望有不同级别的用户，您还需要创建一个角色提供者。为此，您将从 RoleProvider 类继承。

```
public sealed class MyRoleProvider : RoleProvider
{
   // Implement logic here
} 
```

要授权应用程序的某些区域，您将使用 Authorize 属性。

```
public class MyController : Controller
{
     [Authorize(Roles="Role1,Role2")]
     public ActionResult Index()
     {
         // Implement your code
     }
} 
```

最后，您必须在 web.config 中进行一些配置才能使其使用您的提供程序。

```
<authentication mode="Forms">
  <forms loginUrl="~/Login" timeout="2880"/>
</authentication>
<membership defaultProvider="MyMembershipProvider" userIsOnlineTimeWindow="20">
  <providers>
    <clear/>
    <add name="MyMembershipProvider" type="Your.NameSpace.MyMembershipProvider" enablePasswordRetrieval="false" enablePasswordReset="false" requiresQuestionAndAnswer="false" writeExceptionsToEventLog="false"/>
  </providers>
</membership>
<roleManager enabled="true" defaultProvider="MyRoleProvider" cacheRolesInCookie="true">
  <providers>
    <clear/>
    <add name="MyRoleProvider" type="Your.NameSpace.MyRoleProvider"/>
  </providers>
</roleManager> 
```

您可以在 MSDN 上找到有关 memberhsip 和角色提供者的更多信息

*   [http://msdn.microsoft.com/en-us/library/f1kyba5e(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/f1kyba5e(v=vs.100).aspx)
*   [http://msdn.microsoft.com/en-us/library/8fw7xh74(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/8fw7xh74(v=vs.100).aspx)

# sql-server - 使用 SQL Server 中的多个表从一个表中删除数据

> ID：14113882
> 
> 赞同：2
> 
> 时间：2013-01-01T20:20:10.110
> 
> 标签：sql-server, tsql

我正在尝试使用多个表从一个表中删除一些数据。我在这个查询中遇到的问题是它正在删除不应该删除的数据。我只想删除两个表中 ID 不同的数据。换句话说，我想保持两个表中的 ID 相同。这是我的查询：

```
delete  Tabel1
from Table1 r join
Table2 w on r.ID <> w.ID
and w.Date_Assigned is not null 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T20:23:29.317

你可能想做：

```
delete Tabel1 where Id not in (select Id from Table2) 
```

您的语句可能会从中删除所有记录`Tabel1`，因为对于每条记录，它都会找到至少一个`Tabel2`具有不同的`ID`.

要对此进行测试，只需运行

```
select r.ID
from Table1 r join
Table2 w on r.ID <> w.ID
and w.Date_Assigned is not null 
```

你就会明白问题出在哪里。

# c++ - 保护 C++ 程序不被反编译

> ID：14113884
> 
> 赞同：3
> 
> 时间：2013-01-01T20:20:19.967
> 
> 标签：c++, windows, obfuscation, decompiling, source-code-protection

> **可能重复：**
> [是否可以反编译 C++ Builder exe？C++ Builder exe安全吗？](https://stackoverflow.com/questions/11156104/is-it-possible-to-decompile-c-builder-exe-is-c-builder-exe-safe)

我使用 Microsoft Visual C++ 2010 Express 编写程序。当我想分发我的程序时，我使用“发布”配置对其进行编译，并将链接器设置为不添加调试信息。所以我的问题是，我的可执行文件是否安全，或者任何人都可以反编译它并查看源代码？如果它不安全，我该如何防止它被反编译？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-01T20:22:57.013

所有程序都可以在一定程度上进行反编译。但是，源代码中的大量有用信息在编译过程中会被删除。反编译器生成的源代码是对原始代码的苍白模仿。

反编译后变量名、函数名、类名等将不可用。所以反编译器能做的最好的事情就是把你的函数变成这样：

```
double CalculateWidgetStrength(int WidgetType, int WidgetFrobishness); 
```

变成这样毫无意义的代码：

```
double Function85(int p1, int p2); 
```

对于反编译器来说，即使成功地做到这一点也非常困难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T20:24:55.910

任何人都可以反编译它以查看原始源代码吗？不太可能，但原始源代码并不那么重要。例如：

```
int x = 1 - 1; 
```

和

```
int x = 0; 
```

在二进制文件中将是等效的，但这并不重要，不是吗？

对于一个足够大的项目，反编译并不是一个真正的问题，因为你不能真正利用生成的代码。考虑到您从知识转移、文档和正确命名中受益，即使是大型项目的一小部分，也需要数年时间才能了解。我想仅使用反编译器是不可能的。

对于特定功能，是的，我想这是有风险的，但不能完全，100% 取出。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-01T20:35:46.217

您无法完全保护代码。

恕我直言，您花在保护代码上的时间最好花在使您的产品功能丰富且无错误上，然后再频繁发布。以一种或另一种方式对代码进行混淆可能会引入难以发现的错误，这些错误变得非常难以修复。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-01T20:32:39.640

以你暗示的方式保持它“安全”的唯一方法是不部署它，即你做一个网络服务或类似的东西。如果不让执行它的人无法执行它，你就不能让它免受执行它的人的影响。

鉴于您已经完成的反编译需要付出大量的努力，我的问题是。为什么会有人打扰，因为它可能需要更多的努力而不是简单地“自己动手”

# ios - 没有导航控制器的按钮

> ID：14113888
> 
> 赞同：0
> 
> 时间：2013-01-01T20:20:53.647
> 
> 标签：ios, button, tabs, uinavigationcontroller

我几乎完成了我的应用程序，创建了所有视图和功能，但按钮仍然存在问题。我希望当我按下一个按钮时，视图会变成另一个视图。为此，我已按 Ctrl+Cliked 按钮并将蓝色条拖到我希望出现的视图中。当黑框弹出时，我选择“Segue - Push”。但是当我运行我的应用程序进行测试时，当我点击按钮时，应用程序崩溃并且在“所有输出”中我看到错误消息“由于未捕获的异常'NSGenericException'而终止应用程序，原因：'Push segues can only be used当源控制器由 UINavigationController 的实例管理时。'" 我的应用程序是基于选项卡的，那么是否可以仅使用情节提要（无需编写大量代码）在没有导航控制器的情况下导航视图？再次感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T20:52:49.550

好吧，正如您发现的那样，您不能使用推送——推送转场仅适用于嵌入在导航控制器中的控制器（您不知道这一点的事实告诉我，您还没有研究过“视图Controller Programming Guide for iOS”或“View Controller Catalog for iOS”文档——你真的应该这样做）。您可以在没有导航控制器的情况下使用模态 segues，当然您也可以使用选项卡进行导航，但是使用应用程序的正确方法取决于您的结构。您需要提供更多关于您尝试在哪些视图控制器之间导航的信息。您是在谈论要从同一选项卡导航到的两个或多个控制器吗？

# php - 创建自定义打印就绪图像

> ID：14113889
> 
> 赞同：2
> 
> 时间：2013-01-01T20:20:55.380
> 
> 标签：php, javascript

我正在寻找一个小应用程序，允许用户为一本书创建自定义封面。客户不希望只提供客户选择的内容，而是提供可打印的 300dpi JPEG 或 PDF。

我知道 PHP 可以处理其中的大部分。但是自定义似乎有点难以正确。我曾尝试使用画布创建客户端预览，效果还不错。

只是想看看我是否在浪费时间尝试重新创建轮子，有谁知道我需要的东西是否已经存在？

[基本上它与此](http://codecanyon.net/item/fancy-product-designer-jquery-plugin/3581183)类似，但用于创建可打印的图像。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T21:05:57.587

如果您使用 Canvas 构建编辑器，为了获得最佳效果，我建议您使用 PHP 中适合您需要的任何技术在服务器上重新渲染自定义，而不是尝试拍摄他们正在查看的图像和通过将其发送到服务器使其以某种方式工作。如果您以标准方式使用 Canvas，DPI 将是错误的（它将在屏幕 DPI 处）。

例如，如果他们能够放置图像，则只需记下坐标并将图像放置在 Web 服务器创建的 300 DPI 图像中。文本，相同的东西等。是的，这将是额外的工作，但它应该具有更高的质量和更好的一致性。

这意味着有一个简单的序列化格式用于表示发送到 Web 服务器的自定义封面。

您也许可以使用 SVG，但您必须引入可靠的 SVG 到 PDF 的转换并处理字体。也许是[这样](http://www.fpdf.org/)的？（我不确定构建 SVG 编辑器是否比基于 Canvas 的更容易）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T22:39:32.497

从您的“工作足够预览”开始，[jsPDF](https://github.com/MrRio/jsPDF)将能够轻松地从浏览器中生成 PDF。

*   将画布转换为图像/jpeg（toDataURL 将是您最好的朋友）
*   实例化一个 jsPDF 对象，[添加图像](http://jspdf.com/)
*   输出 jsPDF 对象

## 棘手的细节：

*   请注意您的屏幕显示的内容为 72dpi，但打印预计为 300dpi。因此，您可以放大画布，然后在 pdf PDF 中绘制图像
*   当心跨域资源：如果您在域外使用图像，那么您注定要失败（或者您将需要代理）

# asp.net-mvc - 如何让 ValidationSummary 出现在我的 MVC4 网页上？

> ID：14113890
> 
> 赞同：0
> 
> 时间：2013-01-01T20:21:01.933
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

当我像这样编写 Razor HTML 时：

```
@using (Html.BeginForm(new { ReturnUrl = ViewBag.ReturnUrl })) {
   @Html.ValidationSummary()
} 
```

我得到以下正是我想要的：

```
<div class="validation-summary-valid" data-valmsg-summary="true">
<ul>
<li style="display:none"></li>
</ul>
</div> 
```

但是我需要的表格如下：

```
<form class="form" data-href="/User/Account/Register" id="registerForm">
   @Html.ValidationSummary()
</form> 
```

使用上面的代码，我没有得到 validation-summary-valid 类。有人可以解释为什么会这样，或者可能建议我如何编码 HTML.BeginForm 以便我可以获得所需的表单定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T21:27:09.947

使用重载的 BeginForm 来包含 HtmlAttributes：

```
@using (Html.BeginForm("action", "controller", new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, new { @class = "form", @id = "registerForm", data_href = "/User/Account/Register" }))
{
    ....
} 
```

视图引擎不会解析“data-href”，因此您必须使用下划线而不是连字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T22:32:07.993

在您的视图顶部尝试以下操作

ViewContext.FormContext = new FormContext();

# google-chrome - 每个 chrome 用户的唯一 ID？

> ID：14113892
> 
> 赞同：2
> 
> 时间：2013-01-01T20:21:07.000
> 
> 标签：google-chrome, google-chrome-extension

每个 Chrome 用户都有唯一的 ID 吗？这样我就可以在我的扩展程序上将信息保存在我的数据库中，每个用户都有自己的唯一 ID？

以某种方式存在吗？

编辑：或者我可以在用户机器上本地存储信息吗？这将使我可以做我想做的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T20:28:13.383

我相信[这](http://productforums.google.com/forum/#!topic/chrome/uEJWWYJ5QXs)回答了你的问题。对于您的更新，是的，您可以使用 localstorage 在客户端计算机上存储信息。希望这可以帮助 ：）

> 为了跟踪您的扩展程序的安装次数，您可以在 Chrome 扩展程序库的管理区域中将 Google Analytics ID 添加到您的扩展程序中。这将跟踪安装和更新。谷歌分析甚至具有跟踪使用情况，因此您可以根据特定指标（点击、日志记录）等添加跟踪信息。
> 
> 如果您的意思是针对每个“用户”跟踪，不，扩展程序不会识别每个单独的用户，唯一独特的是扩展程序本身及其扩展程序 ID。您可以通过第三方服务（例如 OAuth、OpenID 或一些自定义内容）使用其他方式来唯一地识别用户。然后您可以将您的身份验证与本地的某些内容相关联

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-01T04:15:56.030

虽然在没有用户实际登录应用程序的情况下不支持识别用户，但您可以跟踪安装或机器。有关详细信息，请参阅我的此回复。

[在 Google Chrome 扩展中识别机器/用户的最佳方法是什么？](https://stackoverflow.com/questions/5051224/what-is-the-best-to-identify-machine-user-in-google-chrome-extention/17714453#17714453)

# django - django 在模板中显示来自模型的特定数据

> ID：14113898
> 
> 赞同：1
> 
> 时间：2013-01-01T20:21:57.473
> 
> 标签：django, django-models, django-templates, django-views

模型：

```
class Exercise (models.Model):
    name_e = models.CharField(max_length=50)

class Subject (models.Model):
    name_s = models.CharField(max_length=50)
    exercise = models.ForeignKey(Exercise) 
```

看法：

```
exercise_all = Exercise.objects.all()
subject_all = Subject.objects.all() 
```

我的 SQL 表包含通过 ForeignKey 连接的主题和练习

我将视图变量作为上下文传递给模板：

```
{% for e_field in exercise_all %}
<table>
<tr><th>Header</th></tr>
    {% for s_field in subject_all %}
    <tr><td>{{ e_field.name_e }}</td></tr>
    {% endfor %}
</table>
{% endfor %} 
```

如果我有 3 种类型的练习和 10 个与练习相关的主题（subject1->exercise1、subject2->exercise1、subject3->exercise1、subject4->exercise2 等），我想在模板中显示 3 个表格并每个表格将仅显示与表格/练习相对应的 tr/subjects。我尝试使用 {% if ... in ... %} 但也许我应该在视图中执行一些功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T02:35:09.763

在这种情况下，您应该可以说：

```
{% for e_field in exercise_all %}
<table>
<tr><th>Header</th></tr>
    {% for s_field in e_field.subject_set.all %}
    <tr><td>{{ e_field.name_e }}</td></tr>
    {% endfor %}
</table>
{% endfor %} 
```

# python - wxPython 自定义对话框加载不正确

> ID：14113899
> 
> 赞同：2
> 
> 时间：2013-01-01T20:22:19.260
> 
> 标签：python, user-interface, wxpython, modal-dialog

我正在尝试创建一个自定义对话框来显示信息。它在按下按钮时被激活，并且该机制运行良好。但是，对话框本身已损坏。任何帮助表示赞赏。

```
import wx

class ForgotPass(wx.Dialog):

    def __init__(self, *args, **kwargs):
         super(ForgotPass, self).__init__(*args, **kwargs) 

        self.InitUI()

    def InitUI(self):
        self.panel = wx.Panel(self)
        self.sizer = wx.BoxSizer(wx.VERTICAL)

        self.title = wx.StaticText(self.panel, label='Forgotten Your Password?', style=wx.ALIGN_CENTER)
        self.title.SetFont(wx.Font(8, wx.DEFAULT, wx.NORMAL, wx.BOLD, underline=True))  # Underlined & Bold
        self.sizer.Add(self.title)

        self.text = wx.StaticText(self.panel, label="Contact 'TheHiguty' via ingame PM to have your password reset!", style=wx.ALIGN_CENTER)
        self.sizer.Add(self.text)

        self.SetSizer(self.sizer)
        self.SetSize((200, 150))
        self.SetTitle('Forgotten Your Password')
        self.Center()
        self.Show(True)

def main():
    app = wx.App(False)
    ForgotPass(None)
    app.MainLoop()

if __name__ == "__main__":
    main() 
```

但是，我没有正确显示文本，而是得到了这个：

[![在此处输入图像描述](../Images/1b60650b729901d49fbf63cfd9a06f3f.png)](https://i.stack.imgur.com/mM4Sy.jpg)

非常感谢任何解决此问题的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T20:43:32.587

添加`self.sizer.Fit(self.panel)`之后`self.SetSizer(self.sizer)`以解决问题。但是，如果这样做，您会发现水平宽度太小，因此您可能需要扩展它。带有修复的完整代码：

```
import wx

class ForgotPass(wx.Dialog):

    def __init__(self, *args, **kwargs):
        super(ForgotPass, self).__init__(*args, **kwargs) 

        self.InitUI()

    def InitUI(self):
        self.panel = wx.Panel(self)
        self.sizer = wx.BoxSizer(wx.VERTICAL)

        self.title = wx.StaticText(self.panel, label='Forgotten Your Password?', style=wx.ALIGN_CENTER)
        self.title.SetFont(wx.Font(8, wx.DEFAULT, wx.NORMAL, wx.BOLD, underline=True))  # Underlined & Bold
        self.sizer.Add(self.title)

        self.text = wx.StaticText(self.panel, label="Contact 'TheHiguty' via ingame PM to have your password reset!", style=wx.ALIGN_CENTER)
        self.sizer.Add(self.text)

        self.SetSizer(self.sizer)
        self.sizer.Fit(self.panel)
        self.SetSize((400, 150))
        self.SetTitle('Forgotten Your Password')
        self.Center()
        self.Show(True)

def main():
    app = wx.App(False)
    ForgotPass(None)
    app.MainLoop()

if __name__ == "__main__":
    main() 
```

虽然，有一种方法可以创建看起来更干净的对话框，并且对于运行程序的任何操作系统看起来都更加原生：使用[wx.MessageBox](http://zetcode.com/wxpython/dialogs/)

这是一个简单的例子：

```
import wx

class MainWindow(wx.Frame):
    def __init__(self, parent):
        super(MainWindow, self).__init__(parent)

        self.sizer = wx.BoxSizer(wx.VERTICAL)

        self.button = wx.Button(self, wx.ID_ANY, label="Test")
        self.sizer.Add(self.button)
        self.Bind(wx.EVT_BUTTON, self.password_dialog, self.button)

        self.SetSizer(self.sizer)
        self.sizer.Fit(self)
        self.SetTitle('Test')
        self.SetSize((100, 100))
        self.Centre()
        self.Show(True)

    def password_dialog(self, event):
        wx.MessageBox(
            'Contact `TheHiguty` blah blah blah',
            'Forgotten your password?',
            wx.OK|wx.ICON_ERROR)

if __name__ == '__main__':
    app = wx.App()
    MainWindow(None)
    app.MainLoop() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T03:00:35.690

我知道这是一个较旧的问题，但我想注意我用于自定义对话框的内容并且没有“噪音/图标”（至少在我看来）。这适用于 wxPython 2.9.5.0。

这是我使用的代码：

```
from wx.lib.pubsub import pub

def showConfirmDlg(message, caption, flag=wx.OK|wx.ICON_NONE):
    msg = wx.MessageDialog(None, message=message,
                       caption=caption, style=flag)
    msg.ShowModal()
    msg.Destroy()

pub.subscribe(showConfirmDlg, 'dialog.confirm') 
```

正如您在代码片段中看到的那样，我可以对各种消息重复使用此函数，并且无需多个函数定义。要在示例中显示带有文本的对话框，我会这样做：

```
def onButtonPress(self, event):
    pub.sendMessage('dialog.confirm',
        message="Forgot your password?\n Contact 'TheHiguty' (rest of text)",
        caption="Forgot Password?") # Could even just put caption="" 
```

对于进一步的可重用性选项，您可以将“flag=wx.OK|wx.ICON_NONE”替换为“flag”，并将“flag=wx.OK|(whatever style)”添加到您的函数调用中。

有关 Python 和 wxPython 的更多示例，我强烈推荐 Mike Driscoll 的博客站点[The Mouse vs The Python。](http://www.blog.pythonlibrary.org/ "鼠标与 Python")我发现它的信息量惊人，并且从 Driscoll 先生那里学到了很多关于 wxPython 的知识。

希望这对您和其他人有所帮助！

--EDIT-- 我应该提到我在尝试自己从消息框中删除图标时偶然发现了 wx.ICON_NONE。

# google-maps-api-3 - 删除谷歌地图的 X 轴平铺

> ID：14113902
> 
> 赞同：1
> 
> 时间：2013-01-01T20:22:36.420
> 
> 标签：google-maps-api-3

在给定的谷歌地图实例中......

有没有办法关闭地图的其他实例，这些实例平铺在初始中央地图的右侧和左侧？

我已经看到了限制地图平移能力的方法......但它使用 lat + lng 来确定何时重新居中地图......因此使用在不同的缩放级别上分崩离析。

例如：[https ://google-developers.appspot.com/maps/documentation/javascript/examples/map-simple](https://google-developers.appspot.com/maps/documentation/javascript/examples/map-simple)

如果一直放大，您可以看到地球地图是如何沿 x 轴平铺的。

我想要地图的单个实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:08:57.727

您可以将观察者添加到**zoom_changed**事件，并在显示超过 90 度的地图时设置**minZoom 。**第二条语句在已知限制之前递归地将缩放减少到可接受的限制。

```
var zoomObserver = function () {
    width = Math.abs(map.getBounds().getNorthEast().lat() - 
        map.getBounds().getSouthWest().lat());
    if (width > 90){
            var opt = { minZoom: map.getZoom()};
            map.setOptions(opt);
    }
    if (width > 179){
        map.setZoom(map.getZoom() + 1);
    }
};
google.maps.event.addListener(map,'zoom_changed', zoomObserver ); 
```

这个简单的解决方案适用于大多数用例，不考虑通过调整浏览器窗口大小将地图宽度加倍，因此在这种情况下您可能需要将观察者添加到另一个事件。

# ruby - Ruby：创建“attr_accessor :arg1, :arg2, :arg3”功能

> ID：14113904
> 
> 赞同：-2
> 
> 时间：2013-01-01T20:22:57.927
> 
> 标签：ruby, metaprogramming, attr-accessor

所以我希望能够像这样定义一个类：

```
class MyHouse < Home
  things :bed, :lamp, :chair
end 
```

Home 负责将这些“东西”放入数组中，如下所示：

```
class Home
  attr_accessor :things

  def things(*things)
    @things = []
    things.each { |thing| @things << thing }
  end
end 
```

问题是我得到：

```
NoMethodError: undefined method `things' for MyHouse:Class 
```

我知道有办法做到这一点。帮助表示赞赏，

谢谢，

帕春

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T20:30:53.413

`def things`应该`def self.things`

这使它成为类方法而不是实例方法。

# python - 如何从任何目录中的终端执行 python 命令行实用程序

> ID：14113906
> 
> 赞同：0
> 
> 时间：2013-01-01T20:23:12.477
> 
> 标签：python, macos, command-line

我刚刚编写了一个 python 脚本来执行一些批处理文件操作。我想知道如何将它保存在一些通用路径中，例如 cd、ls、grep 等其他命令行实用程序。

我期望从任何目录中完成这样的事情 -

$ script.py arg1 arg2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T20:25:19.023

只需将脚本目录放入 PATH 环境变量中，或者将脚本放入已经在 PATH 中的位置。在 Unix 系统上，您通常使用`/home/<nick>/bin`自己的脚本并将其添加到 PATH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T20:26:03.640

将存储它的目录添加到您的 PATH 变量中？根据您的提示，我猜您正在使用类似 sh 的外壳，并且从您的标签中，我进一步假设 OS X。进入您的 .bashrc 并进行必要的更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-20T21:55:00.973

另一种方法是创建一个带有入口点的 python 包并安装程序，而不是更改`$PATH`（使用`setuptools`in `setup.py`）。这有一些优点：

*   在贝壳外工作
*   减少系统范围的配置量，或者至少将它们全部放在包中。

请参阅[解释 Python 入口点？](https://stackoverflow.com/questions/774824/explain-python-entry-points)和[python：带有一个文件源文件的 python 鸡蛋的简单示例？](https://stackoverflow.com/questions/2852413/python-simple-example-for-a-python-egg-with-a-one-file-source-file)详情。

这样做的好处是可以将所有设置保存在一个地方。

您可以使用该`--develop`选项，以便您仍然可以在适当的位置编辑您的代码，并使用该`--user`选项来避免将 python 弄乱其他用户。

# ruby - 红宝石 sort_by 方法

> ID：14113909
> 
> 赞同：25
> 
> 时间：2013-01-01T20:23:19.000
> 
> 标签：ruby

我刚开始学习红宝石。我有一个哈希数组。我希望能够根据哈希中的元素对数组进行排序。我想我应该能够使用 sort_by 方法。有人可以帮忙吗？

```
#array of hashes
array = []
hash1 = {:name => "john", :age => 23}
hash2 = {:name => "tom", :age => 45}
hash3 = {:name => "adam", :age => 3}
array.push(hash1, hash2, hash3)
puts(array) 
```

这是我的 sort_by 代码：

```
# sort by name
array.sort_by do |item|
    item[:name]
end
puts(array) 
```

数组没有任何反应。也没有错误。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-01T20:24:45.093

您必须存储结果：

```
res = array.sort_by do |item|
    item[:name]
end 
puts res 
```

或者修改数组本身：

```
array.sort_by! do |item| #note the exclamation mark
    item[:name]
end 
puts array 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-27T09:30:25.813

您可以在一行中使用排序方法：

```
array.sort_by!{|item| item[:name]} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-27T09:37:16.160

您也可以通过正常的**排序**方法来做到这一点

```
array.sort { |a,b| a[:name] <=> b[:name] } 
```

以上是升序，降序用b替换a。要修改数组本身，请使用**排序！**

# php - 在数据库中存储密码和用户名；从 PHP 散列到 SQL 并返回

> ID：14113912
> 
> 赞同：0
> 
> 时间：2013-01-01T20:23:43.360
> 
> 标签：php, sql

我正在尝试拓宽我对 SQL 和 PHP 的了解，因此我正在尝试弄清楚如何在我正在处理的项目中为用户凭据创建散列数据库条目。现在在规划阶段，我将所有内容存储到会话 cookie 中，但在最终产品中，我希望将所有内容存储在我的服务器上。我有一些关于加盐/散列字符串的文档，但我不确定如何存储然后检查存储的散列是否正确。

```
<?php
    $username = $_GET["$us"];
    $password = $_GET["$pa"];
    $expire = time()+60*60*24*14; //Cookies expire in two weeks
    setcookie("username", $username, $expire);
    setcookie("password", $password, $expire);
?> 
```

现在我有一个登录页面，使用上面的代码将 $us 和 $pa 发布到 login-submit.php 页面。如果我使用 md5 或类似方法对其进行哈希处理，我将如何将其存储在我的数据库中，当从登录页面拉出时，检查密码是否正确？我在想：

```
<?php
    $userhash = md5($us);
    $passhash = md5($pa);
    $rows = $db->query("
        INSERT INTO credentials
        VALUES ($passhash, $userhash);"
    );
?> 
```

这一切都好吗？顺便说一句，我将如何检查数据库中是否存在用户，如果存在，将 md5 哈希反转回纯文本以便我可以使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T20:28:16.097

1.  不要使用cookies。使用[会话](http://us3.php.net/manual/en/book.session.php)。（会话自动将内容存储在服务器上，只需使用 cookie 来检索它）。

2.  其次，MD5 对密码不安全。它有碰撞，很容易受到暴力攻击。请参阅此问题的第一个答案：[如何安全地存储用户的密码？](https://stackoverflow.com/questions/1581610/how-can-i-store-my-users-passwords-safely)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T21:34:32.363

它们不使用 cookie，而是使用[会话](http://php.net/manual/en/book.session.php)，它们将数据存储在服务器端。对于密码加密，请使用使用[crypt()](http://php.net/manual/en/function.crypt.php)的非常安全的河豚算法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-01T21:36:12.993

这可能是我发现散列密码的最佳脚本。所有好的用户站点都应该首先从登录脚本开始，而不是稍后。

[散列密码](http://crackstation.net/hashing-security.htm#phpsourcecode)

我用它来创建一个类来准备数据库插入的密码，它工作得很好。

这是课程：

```
 <?php
/**
* User Login Class
*
* LICENSE:      (http://www.gnu.org/licenses/old-licenses/gpl-2.0.html GNU Public License version 2)
*
* COPYRIGHT:    Finley Designs
* CONTACT:      ffrinfo@yahoo.com
* DESIGNED BY:  Roy Finley
* VERSION:  1.0
* Password hashing with PBKDF2.
* This class uses the pdkdf2 functions designed by : havoc AT defuse.ca : www: https://defuse.ca/php-pbkdf2.htm
* 
*/
class PasswordProcessor
{
//CREATE HASH FROM USER PASSWORD FOR NEW USER OR LOST PASSWORD
public function create_hash($password)
{
    // format: algorithm:iterations:salt:hash
    $salt = base64_encode(mcrypt_create_iv(24, MCRYPT_DEV_URANDOM));
    return  "sha256:1000:" .  $salt . ":" . 
        base64_encode($this->pbkdf2(
            "sha256",
            $password,
            $salt,
            1000,
            24,
            true
        ));
}
//VALIDATE USER PASSWORD
public function validate_password($password, $good_hash)
{
    $params = explode(":", $good_hash);
    if(count($params) < 4)
       return false; 
    $pbkdf2 = base64_decode($params[3]);
    return $this->slow_equals(
        $pbkdf2,
        $this->pbkdf2(
            $params[0],
            $password,
            $params[2],
            (int)$params[1],
            strlen($pbkdf2),
            true
        )
    );
}

// COMPARE TWO STRINGS IN LENGTH-CONSTANT TIME.
private function slow_equals($a, $b)
{
    $diff = strlen($a) ^ strlen($b);
    for($i = 0; $i < strlen($a) && $i < strlen($b); $i++)
    {
        $diff |= ord($a[$i]) ^ ord($b[$i]);
    }
    return $diff === 0; 
}
//HASHING ALGORITHM
private function pbkdf2($algorithm, $password, $salt, $count, $key_length, $raw_output = false)
{
    $algorithm = strtolower($algorithm);
    if(!in_array($algorithm, hash_algos(), true))
        die('PBKDF2 ERROR: Invalid hash algorithm.');
    if($count <= 0 || $key_length <= 0)
        die('PBKDF2 ERROR: Invalid parameters.');

    $hash_length = strlen(hash($algorithm, "", true));
    $block_count = ceil($key_length / $hash_length);

    $output = "";
    for($i = 1; $i <= $block_count; $i++) {
        // $i encoded as 4 bytes, big endian.
        $last = $salt . pack("N", $i);
        // first iteration
        $last = $xorsum = hash_hmac($algorithm, $last, $password, true);
        // perform the other $count - 1 iterations
        for ($j = 1; $j < $count; $j++) {
            $xorsum ^= ($last = hash_hmac($algorithm, $last, $password, true));
        }
        $output .= $xorsum;
    }

    if($raw_output)
        return substr($output, 0, $key_length);
    else
        return bin2hex(substr($output, 0, $key_length));
}
}//CLOSE PasswordProcessor CLASS
?> 
```

请记住，这是验证您的用户的一小部分.....搜索谷歌并阅读，阅读，阅读 **其他要点**

*   您的数据库需要两个用户 - 一个只能读取用于登录，另一个可以读取和写入用于注册脚本。

*   在注册表单上使用验证码

*   永远不要告诉用户登录的哪个部分失败了，只是它确实失败了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-01T20:28:02.027

将输入的 (password+salt) 的哈希值与存储的 (password+salt) 的哈希值进行比较。您还需要将盐存储在数据库中。

编辑：不需要散列用户名。您将无法从哈希中提取它。但是，您可以对其进行加密。

# python - 如何使用 python 在这段代码中循环 Rock、Paper、Scissors？

> ID：14113913
> 
> 赞同：-2
> 
> 时间：2013-01-01T20:23:49.007
> 
> 标签：python, python-3.x

这是代码...

```
import random
Rock = '1'
Paper = '2'
Scissors = '3'
print('Welcome to Rock, Paper Scissors! The game of all kids to decide on something. \nIn this game you will have to beat the computer once. \n(Psst if it\'s a draw the start the program again! ;D)\nSo how to play. Well, it\'s simple. Pick 1 for Rock, 2 for Paper and 3 for Scissors. \nSo Rock beats Scissors. Scissors cuts Paper and Paper covers Rock. Got it Lets play')
player=int(input('Please enter number 1 = Rock, 2 = Paper, 3 = Scissors: '))
if player<1 or player>3 except player==9:
   player=int(input('Invalid number. Please enter number 1 = Rock, 2 = Paper, 3 = Scissors: '))
   if player<1 or player>3:
       print('Well, now you can\'t play this game because you are mucking around. Next time DON\'T!')
elif player==9:
    exit()
else:
   computer=random.randint(1, 3)
   print(player,computer)
   print('Remember Rock = 1, Paper = 2 and Scissors = 3')
   if player==1 and computer==1 or player==2 and computer==2 or player==3 and computer==3:
       print('It\'s a draw. =l Restart the game if you want to.')
   if player==1 and computer==2 or player==2 and computer==3 or player==3 and computer==1:
       print('Computer wins! You lose. Sorry. =(')
   if player==1 and computer==3 or player==2 and computer==1 or player==3 and computer==2:
       print('You have won. Well done. =D') 
```

我需要循环它，以便当用户输入错误的数字时再次询问它，直到用户正确回答。另外我需要循环播放程序，直到用户按 9 退出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T20:32:38.783

使用循环可以控制游戏何时结束。

```
game_over = False
while not game_over:
    do_stuff()
    if some_condition:
        game_over = True 
```

在循环结束时，它会检查游戏是否结束。如果是，则循环退出并运行循环之后的任何代码。那么程序就存在了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T20:34:09.900

你可以做的最小的改变，让这个保持循环只是添加一个`while True`语句，并将你的游戏的其余部分嵌套在它下面。我也会像这样修复你的出口案例测试......

```
...
print('Welcome to Rock, Paper Scissors! ...')
while True:  # loop forever
  player=int(input('Please enter number 1 = Rock, 2 = Paper, 3 = Scissors: '))
  if player==9:  # but exit if 9
      exit()
  elif player<1 or player>3:
     ...
  else:
     ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T20:35:31.567

它应该像这样的循环一样简单。

```
while True:
  while player not in (1,2,3,9):
    keep_asking_for_input()
  if player == 9:
    break
  pass 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T21:52:17.343

使用定义和类重写你的代码。这会容易得多。你需要你 while 循环。

我已经从头开始为您编写了完整的游戏。这里：[http ://codepad.org/Iy6YFW0H](http://codepad.org/Iy6YFW0H)

阅读代码并了解它是如何工作的。随意使用它。顺便说一句，它在 Python 2.x 中（对不起，我不使用 Python 3）。

# iphone - UITableView 单元格在编辑单元格后重新排序

> ID：14113917
> 
> 赞同：0
> 
> 时间：2013-01-01T20:24:03.020
> 
> 标签：iphone, uitableview

在我的应用程序中，您可以点击一个单元格，它会显示一个新视图。您可以编辑 tableviewCell 的 textLabel，并保存它。但是当您切换视图并返回 tableView 时，单元格的顺序不同。这可能是什么原因？

这是我的代码：

```
-(UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

static NSString * identifier = @"identifier";

self.cell = [tableView dequeueReusableCellWithIdentifier:identifier];

h = [self.tableArray objectAtIndex:indexPath.row];

NSString *brandModel = [[h.brand stringByAppendingString:@" "] stringByAppendingString:h.model];

self.cell.mainLabel.text = brandModel;

self.cell.nicknameLabel.text = handguns.nickname;   

return self.cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T05:45:45.400

如果您在保存 UITableView 单元格后重新加载 tableView，那么它将重新排序为初始值，因为您设置单元格数据的数组是原样的。您只能更改表格视图单元格而不是数组中的数组数据位置。

下面我编写了一个 UITableView 代码来移动单元格，它在推送视图后工作正常。如果我从 viewWillAppear**中删除 reload 方法：**

```
#import "MoveCellViewController.h"

@interface MoveCellViewController ()

@end

@implementation MoveCellViewController

- (void)viewDidLoad
{
 UIBarButtonItem *left=[[UIBarButtonItem alloc] initWithTitle:@"Edit" style:UIBarButtonItemStyleBordered target:self action:@selector(edit)];
 self.navigationItem.leftBarButtonItem=left;

 myArray=[[NSMutableArray alloc]init];  //mutable array;
 myArray=[NSMutableArray arrayWithObjects:@"Aman",@"Ankit",@"Sumit",@"Hercules",@"Jackie Chan", nil];

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

-(void)edit
{
 if (self.navigationItem.leftBarButtonItem.title==@"Edit") {
    self.navigationItem.leftBarButtonItem.title=@"Done";
    [_tableView setEditing:YES];
 }else
 {
  [_tableView setEditing:NO];
  self.navigationItem.leftBarButtonItem.title=@"Edit";
 }
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
 return [myArray count];
}
// Row display. Implementers should *always* try to reuse cells by setting each cell's reuseIdentifier and querying for available reusable cells with dequeueReusableCellWithIdentifier:
// Cell gets various attributes set automatically based on table (separators) and data source (accessory views, editing controls)

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
 static NSString *cellIdentifier=@"cellIdentifier";
 UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:cellIdentifier];

 if (cell==nil) {
  cell=[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
 }

 cell.userInteractionEnabled=YES;
 cell.textLabel.text=[myArray objectAtIndex:indexPath.row];
 return cell;
}

- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
 return YES;
}

- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath{
 return UITableViewCellEditingStyleNone;
}

- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)sourceIndexPath toIndexPath:(NSIndexPath *)destinationIndexPath{
 id ob = [myArray objectAtIndex:destinationIndexPath.row];

 [myArray replaceObjectAtIndex:destinationIndexPath.row withObject:[myArray objectAtIndex:sourceIndexPath.row]];
 [myArray replaceObjectAtIndex:sourceIndexPath.row withObject:ob];
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
 NextViewController *nx=[[NextViewController alloc] init];
 [self.navigationController pushViewController:nx animated:YES];
}
@end 
```

这是工作代码，在推送视图控制器后不会更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T20:28:04.193

```
-(UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
     static NSString *CellIdentifier = @"Cell";

     cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

     if (cell == nil)
     {

         cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue2     reuseIdentifier:nil];
     }

     Write rest of the code here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T04:56:20.803

```
-(UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

 NSString *CellIdentifier = [NSString stringWithFormat:@"S%1dR%1d",indexPath.section,indexPath.row];
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
        cell.selectionStyle = UITableViewCellSelectionStyleNone; 
   }
h = [self.tableArray objectAtIndex:indexPath.row];

NSString *brandModel = [[h.brand stringByAppendingString:@" "] stringByAppendingString:h.model];

self.cell.mainLabel.text = brandModel;

self.cell.nicknameLabel.text = handguns.nickname;   

return self.cell;
} 
```

# c++ - RapidXML 打印头有未定义的方法

> ID：14113923
> 
> 赞同：24
> 
> 时间：2013-01-01T20:24:48.523
> 
> 标签：c++, undefined-reference, rapidxml

我一直在搞乱在我的一个项目中使用 RapidXML。一切都很顺利，直到我决定用它来写出 xml。我的代码或多或少如下：

```
//attempt to open the file for writing
std::ofstream file(fileName.c_str());
if (!file.is_open())
    return false; //the file didn't open

xml_document<> doc;
//creates the contents of the document...
//...
//...

//write the document out to the file
file << doc; //if I remove this line it compiles...but I kinda need this line to output to the file
file.close(); 
```

在编译时，我收到以下错误：

```
In file included from ../Engine/xmlfileloader.cpp:12:0:
../Engine/include/rapidxml_print.hpp: In instantiation of 'OutIt rapidxml::internal::print_node(OutIt, const rapidxml::xml_node<Ch>*, int, int) [with OutIt = std::ostream_iterator<char, char, std::char_traits<char> >; Ch = char]':
../Engine/include/rapidxml_print.hpp:390:57:   required from 'OutIt rapidxml::print(OutIt, const rapidxml::xml_node<Ch>&, int) [with OutIt = std::ostream_iterator<char, char, std::char_traits<char> >; Ch = char]'
../Engine/include/rapidxml_print.hpp:403:9:   required from 'std::basic_ostream<Ch>& rapidxml::print(std::basic_ostream<Ch>&, const rapidxml::xml_node<Ch>&, int) [with Ch = char]'
../Engine/include/rapidxml_print.hpp:414:31:   required from 'std::basic_ostream<Ch>& rapidxml::operator<<(std::basic_ostream<Ch>&, const rapidxml::xml_node<Ch>&) [with Ch = char]'
../Engine/xmlfileloader.cpp:400:13:   required from here
../Engine/include/rapidxml_print.hpp:115:17: error: 'print_children' was not declared in this scope, and no declarations were found by argument-dependent lookup at the point of instantiation [-fpermissive]
../Engine/include/rapidxml_print.hpp:169:22: note: 'template<class OutIt, class Ch> OutIt rapidxml::internal::print_children(OutIt, const rapidxml::xml_node<Ch>*, int, int)' declared here, later in the translation unit
../Engine/include/rapidxml_print.hpp:120:17: error: 'print_element_node' was not declared in this scope, and no declarations were found by argument-dependent lookup at the point of instantiation [-fpermissive]
../Engine/include/rapidxml_print.hpp:242:22: note: 'template<class OutIt, class Ch> OutIt rapidxml::internal::print_element_node(OutIt, const rapidxml::xml_node<Ch>*, int, int)' declared here, later in the translation unit
../Engine/include/rapidxml_print.hpp:125:17: error: 'print_data_node' was not declared in this scope, and no declarations were found by argument-dependent lookup at the point of instantiation [-fpermissive]
../Engine/include/rapidxml_print.hpp:208:22: note: 'template<class OutIt, class Ch> OutIt rapidxml::internal::print_data_node(OutIt, const rapidxml::xml_node<Ch>*, int, int)' declared here, later in the translation unit
../Engine/include/rapidxml_print.hpp:130:17: error: 'print_cdata_node' was not declared in this scope, and no declarations were found by argument-dependent lookup at the point of instantiation [-fpermissive]
../Engine/include/rapidxml_print.hpp:219:22: note: 'template<class OutIt, class Ch> OutIt rapidxml::internal::print_cdata_node(OutIt, const rapidxml::xml_node<Ch>*, int, int)' declared here, later in the translation unit
../Engine/include/rapidxml_print.hpp:135:17: error: 'print_declaration_node' was not declared in this scope, and no declarations were found by argument-dependent lookup at the point of instantiation [-fpermissive]
../Engine/include/rapidxml_print.hpp:298:22: note: 'template<class OutIt, class Ch> OutIt rapidxml::internal::print_declaration_node(OutIt, const rapidxml::xml_node<Ch>*, int, int)' declared here, later in the translation unit
../Engine/include/rapidxml_print.hpp:140:17: error: 'print_comment_node' was not declared in this scope, and no declarations were found by argument-dependent lookup at the point of instantiation [-fpermissive]
../Engine/include/rapidxml_print.hpp:321:22: note: 'template<class OutIt, class Ch> OutIt rapidxml::internal::print_comment_node(OutIt, const rapidxml::xml_node<Ch>*, int, int)' declared here, later in the translation unit
../Engine/include/rapidxml_print.hpp:145:17: error: 'print_doctype_node' was not declared in this scope, and no declarations were found by argument-dependent lookup at the point of instantiation [-fpermissive]
../Engine/include/rapidxml_print.hpp:339:22: note: 'template<class OutIt, class Ch> OutIt rapidxml::internal::print_doctype_node(OutIt, const rapidxml::xml_node<Ch>*, int, int)' declared here, later in the translation unit
../Engine/include/rapidxml_print.hpp:150:17: error: 'print_pi_node' was not declared in this scope, and no declarations were found by argument-dependent lookup at the point of instantiation [-fpermissive]
../Engine/include/rapidxml_print.hpp:361:22: note: 'template<class OutIt, class Ch> OutIt rapidxml::internal::print_pi_node(OutIt, const rapidxml::xml_node<Ch>*, int, int)' declared here, later in the translation unit 
```

对我来说没有意义的是为什么它会以这种方式打破。查看`rapidxml_print.hpp`标题，我看到上面提到的所有函数都在 print_node 函数中引用。后来定义了print_children、print_element_node等函数，一看就ok了。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-01-01T21:15:21.143

对于那些来这里寻找相同问题的解决方案的人，我有一个解决方案。在“名称查找更改”下查看[http://gcc.gnu.org/gcc-4.7/porting_to.html](http://gcc.gnu.org/gcc-4.7/porting_to.html)（根据 nm 的建议）后，我将 rapidxml_print.hpp 标头更改为在声明 print_node 函数之前具有以下权利（在我的文件中，我在第 104 行之后插入了这个）：

```
template<class OutIt, class Ch>
inline OutIt print_children(OutIt out, const xml_node<Ch> *node, int flags, int indent);

template<class OutIt, class Ch>
inline OutIt print_attributes(OutIt out, const xml_node<Ch> *node, int flags);

template<class OutIt, class Ch>
inline OutIt print_data_node(OutIt out, const xml_node<Ch> *node, int flags, int indent);

template<class OutIt, class Ch>
inline OutIt print_cdata_node(OutIt out, const xml_node<Ch> *node, int flags, int indent);

template<class OutIt, class Ch>
inline OutIt print_element_node(OutIt out, const xml_node<Ch> *node, int flags, int indent);

template<class OutIt, class Ch>
inline OutIt print_declaration_node(OutIt out, const xml_node<Ch> *node, int flags, int indent);

template<class OutIt, class Ch>
inline OutIt print_comment_node(OutIt out, const xml_node<Ch> *node, int flags, int indent);

template<class OutIt, class Ch>
inline OutIt print_doctype_node(OutIt out, const xml_node<Ch> *node, int flags, int indent);

template<class OutIt, class Ch>
inline OutIt print_pi_node(OutIt out, const xml_node<Ch> *node, int flags, int indent); 
```

它现在可以很好地使用 GCC 编译，并带有一个警告，因为`int flags`print_attributes 函数中显然没有使用它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-03-29T00:08:21.020

如果您需要使用大于或等于 4.7 的 gcc 版本，并且您在构建期间正在克隆 rapidxml 存储库。

代替：

```
#include "rapidxml.hpp"
#include "rapidxml_print.hpp" 
```

有了这个：

```
#include "rapidxml_ext.h" 
```

rapidxml_ext.h：

```
#ifndef RAPIDXML_EXT_H_
#define RAPIDXML_EXT_H_
#include "rapidxml.hpp"
/* Adding declarations to make it compatible with gcc 4.7 and greater */
namespace rapidxml {
namespace internal {
    template <class OutIt, class Ch>
    inline OutIt print_children(OutIt out, const xml_node<Ch>* node, int flags, int indent);

template <class OutIt, class Ch>
inline OutIt print_attributes(OutIt out, const xml_node<Ch>* node, int flags);

template <class OutIt, class Ch>
inline OutIt print_data_node(OutIt out, const xml_node<Ch>* node, int flags, int indent);

template <class OutIt, class Ch>
inline OutIt print_cdata_node(OutIt out, const xml_node<Ch>* node, int flags, int indent);

template <class OutIt, class Ch>
inline OutIt print_element_node(OutIt out, const xml_node<Ch>* node, int flags, int indent);

template <class OutIt, class Ch>
inline OutIt print_declaration_node(OutIt out, const xml_node<Ch>* node, int flags, int indent);

template <class OutIt, class Ch>
inline OutIt print_comment_node(OutIt out, const xml_node<Ch>* node, int flags, int indent);

template <class OutIt, class Ch>
inline OutIt print_doctype_node(OutIt out, const xml_node<Ch>* node, int flags, int indent);

template <class OutIt, class Ch>
inline OutIt print_pi_node(OutIt out, const xml_node<Ch>* node, int flags, int indent);
}
}
#include "rapidxml_print.hpp"

#endif /* RAPIDXML_EXT_H_ */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-21T14:17:00.390

为了消除 print_attributes 函数中未使用的标志，删除该函数原型中的标志字

```
template<class OutIt, class Ch>
inline OutIt print_attributes(OutIt out, const xml_node<Ch> *node, int); 
```

并在其声明中

```
template<class OutIt, class Ch>
inline OutIt print_attributes(OutIt out, const xml_node<Ch> *node, int)
{ 
```

# mysql - 有 2 个表或 1 个更大的表 MySQL？

> ID：14113925
> 
> 赞同：0
> 
> 时间：2013-01-01T20:24:59.613
> 
> 标签：mysql, database-design, optimization

我在 Internet 上阅读了很多关于优化 MySQL 的不同内容。

我有一张关于朋友的桌子。我区分了两种朋友：专业和“社交”（非专业）朋友。

我的问题是：

假设我有超过 1000 万行（500 万专业和 500 万社交）朋友。将它们全部放在一个有 3 列的表中会更好吗

-idFriend1，-idFriend2，-isProfessional

或者最好有 2 个表（专业和非专业朋友）只有 2 列（并且只有一半的行数）？

顺便说一句，我将不得不在这张桌子上做一些加入，所以加入和不加入过程哪个最好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T20:31:03.320

“最佳”的评估取决于您在模型的其余部分中如何使用这些实体，以及您想编写什么样的查询。

如果专业和社交朋友真的是一样的（除了他们的专业或社会地位），那么我只会做一张桌子。如果事实证明专业朋友有一些不同的属性——比如职位、工作单位、公司名称——不同于社交朋友（可能有最喜欢的饮料、最喜欢的运动等），你可能会发现这两个不同的子集表是按顺序排列的。

实际上，您可能会发现三个表是按顺序排列的：一个朋友表，其中列出了 FriendID 和所有公共属性（姓名、年龄、地址）；专业朋友表（列出 FriendID 的专业属性）；和一个社交好友表（其中列出了 FriendID 的社交属性）。这样，您就有了一个用于验证的超集，作为具有所有公共属性以及子表的实体。然后，您还可以决定一个朋友是否可以同时是社交和专业朋友，具有这种灵活性。

不过，就目前而言，“最好”是一项艰巨的任务，因为我们不知道您计划如何使用这些表或它们将如何与您的数据模型的其余部分相关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T20:30:09.440

我想我误解了你的问题，你既关心朋友是谁，又需要定义他们之间的关系网络。在这种情况下，我会将朋友信息放入一个表中，包括他们的姓名等，并在另一个表中包含它们之间的链接。

```
CREATE TABLE FRIEND (
  id int auto_increment primary key,
  name varchar(20)
);

INSERT INTO FRIEND (name)
VALUES 
('Andrew')
('John')
('Sally')

CREATE TABLE RELATIONSHIP (
  relationshipId int auto_increment primary key,
  friendId1 int,
  friendId2 int,
  isProfessional boolean
);

INSERT INTO RELATIONSHIP (friendId1, friendId2, isProfessional)
VALUES
(1, 2, TRUE),
(1, 3, FALSE); 
```

友谊是互惠的，因此在搜索特定人的朋友时，您需要在朋友 1 和朋友 2 中查找他们的 id 并进行联合查询。

否则，以两种方式将所有关系都输入到表格中，这会使表格的大小加倍，但会避免联合，这在我的经验中是缓慢的。

# c# - 代码进入无限循环

> ID：14113929
> 
> 赞同：0
> 
> 时间：2013-01-01T20:25:24.387
> 
> 标签：c#, list, infinite-loop

我试图创建一个函数，该函数基本上创建一些二进制数据/转换它并根据方程式对其进行修改，并将其存储并将输出导出为 HTML。这是截断的代码：

```
 /*
         * Initialising list/list of list to store data strings.
         */

        List<string> BitValues = new List<string>();
        List<List<string>> DataList = new List<List<string>>();

        /*
         * Some Code.
         */

            /*
             * +=+=+=+=+=+=+=+=+=+=+=+=+=++=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=
             * Mathematical Code Begins.
             * =+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=
             */

                List<string> strVal = new List<string>();
                double avgVal = 0;
                for (; ; )
                {
                    foreach (string randBit in BitValues)
                    {
                        double decVal = Convert.ToDouble(Conversions.ToDecimal(randBit));
                        /*
                         * Implementing mathematical equation.
                         */
                        double eqnValue = (0.52359) + (((1.04719) / Math.Pow(2.0, Convert.ToDouble(txtBitSize.Text)) * decVal));
                        avgVal += Math.Sin(eqnValue);
                        strVal.Add(Convert.ToString(Math.Sin(eqnValue)));
                    }

                    /*
                     * Calculating average value. Adding list to list.
                     */

                    avgVal /= Convert.ToDouble(txtPopSize.Text);
                    DataList.Add(strVal);
                    List<string> NewStrVal = new List<string>();
                    if (GlobalVar.Extrema == 2)
                    {
                        for (int i = 0; i < BitValues.Count; i++)
                        {
                            if (avgVal <= Convert.ToDouble(strVal[i]))
                            {
                                NewStrVal.Add(BitValues[i]);

                            }

                            else
                            {
                                BitValues[i] = Conversions.ToComplement(Convert.ToInt32(BitValues[i]));
                                NewStrVal.Add(BitValues[i]);
                            }                            
                        }

                        DataList.Add(NewStrVal);
                    }

                    /*
                     * +=+=+=+=+=+=+=+=+=+=+=+=+=++=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=
                     * File Writing Code Begins
                     * =+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=
                     */

TextWriter tw = new StreamWriter("OUT.html");
foreach (IList<string> name in DataList)
                    {
                        tw.WriteLine(tableOuterStart);
                        tw.WriteLine(tableInnerOpen);
                        foreach (string listVal in name)
                        {
                            tw.WriteLine(DataInnerOpen);
                            tw.WriteLine(listVal);
                            tw.WriteLine(DataInnerClose);
                        }
                        tw.WriteLine(tableInnerClose);
                        tw.WriteLine(tableOuterClose);
                    }

                    tw.WriteLine(pageEnd);

                    /*
                     * Close stream
                     */

                    tw.Close(); 
```

这是适当方法的类。

```
public class Conversions
    {    
        public static string ToDecimal(string BitValue) 
        {
            string ConvertedToDecimal = Convert.ToInt32(BitValue, 2).ToString();
            return ConvertedToDecimal;
        }

        public static string ToBinary(int DecimalValue) 
        {
            string ConvertedToBinary = Convert.ToString(DecimalValue, 2);
            return ConvertedToBinary;
        }

        public static string ToComplement(int n)
        {
            char[] b = new char[32];
            int pos = 31;
            int i = 0;

            while (i < 32)
            {
                if ((n & (1 << i)) != 0)
                    b[pos] = '1';
                else
                    b[pos] = '0';
                pos--;
                i++;
            }
            return new string(b);
        }
    } 
```

每当我尝试运行此代码时，我都会陷入无限循环，并且我的代码永远不会结束。我哪里错了？谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T20:26:37.220

您编写了一个无限循环：

```
for (; ; ) 
```

你为什么对它无限运行感到惊讶？

要么删除它，要么让它成为非无限的，要么`break`在需要时将其移除。

# c# - C#从数据库中的表填充一个组合框

> ID：14113931
> 
> 赞同：7
> 
> 时间：2013-01-01T20:25:49.373
> 
> 标签：c#, winforms, visual-studio-2010

我有一个名为 的组合框`combobox1`，我想用它`id`作为值和`Name`显示名称填充它。我搜索并阅读了一些教程，发现此代码可在表单加载事件中使用，但它没有填充列表。我看到一个空的下拉菜单。关于我错在哪里的任何想法？

在我的数据库类中，我有这个功能。

```
public static void FillDropDownList(string Query, System.Windows.Forms.ComboBox DropDownName)
{
   SqlDataReader dr;

   SqlConnection myConnection = new SqlConnection(CONNECTION_STRING);
   try
   {
      myConnection.Open();
   }
   catch (Exception e)
   {
      Console.WriteLine(e.ToString());
   }

   // Check whether the Drop Down has existing items. If YES, empty it.
   if (DropDownName.Items.Count > 0)
      DropDownName.Items.Clear();

   SqlCommand cmd = new SqlCommand(Query, myConnection);
   dr = cmd.ExecuteReader();

   while (dr.Read())
      DropDownName.Items.Add(dr[0].ToString());

   Console.Write(DropDownName.Items.Add(dr[0].ToString()));
   dr.Close();
} 
```

在我的表格中，我称之为

```
private void sales_record_Load(object sender, EventArgs e)
{
    SqlConnection con = new SqlConnection(DBUtils.CONNECTION_STRING);
    DBUtils.FillDropDownList("select id,Name from Farms", comboBox1);
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-01T22:59:17.217

这应该可以满足您的需求。从设计的角度来看，我看到的问题是任何为此编写查询的人都需要注意返回的前两列需要分别反映 ID 和显示项。除此之外，实际的列名无关紧要，因为 ValueMember 和 DisplayMember 属性（DataSource 中每个相应列的字符串名称）是通过对 Column[0] 和 Column[1] 的序号引用获得的。

请注意，我已将每个 DataAccess 对象（SQLConnection 实例和 SQLCommand 实例包装在 using 块中。这是数据访问对象的推荐做法，这些对象往往会消耗非托管资源并需要处置。using 块处理处置每个对象都适合你。请注意，每个 using 块都包含自己的范围。

希望有帮助！

更新：@Neolisk 在我作曲时发布了他的答案。虽然它们不是重复的，但它们涵盖了很多相同的领域。在他的回答和这个之间，你应该有你需要的！

```
public void FillDropDownList(string Query, ComboBox DropDownName)
{
    // If you use a DataTable (or any object which implmenets IEnumerable)
    // you can bind the results of your query directly as the 
    // datasource for the ComboBox. 
    DataTable dt = new DataTable();

    // Where possible, use the using block for data access. The 
    // using block handles disposal of resources and connection 
    // cleanup for you:
    using (var cn = new SqlConnection(CONNECTION_STRING))
    {
        using(var cmd = new SqlCommand(Query, cn))
        {
            cn.Open();

            try
            {
                dt.Load(cmd.ExecuteReader());
            }
            catch (SqlException e)
            {
                // Do some logging or something. 
                MessageBox.Show("There was an error accessing your data. DETAIL: " + e.ToString());
            }
        }
    }

    DropDownName.DataSource = dt;
    DropDownName.ValueMember = dt.Columns[0].ColumnName;
    DropDownName.DisplayMember = dt.Columns[1].ColumnName;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-01T22:35:13.550

我的建议 - 尽可能使用 .NET 内置功能，不要手动处理数据绑定（这是您在代码中尝试执行的操作）：

1.  使用 ExecuteQuery 从数据库中提取数据表。
2.  设置 DropDownName.DataSource = yourDataTable。
3.  设置 DropDownName.ValueMember = "id"。
4.  设置 DropDownName.DisplayMember = "名称"。

因此，您的代码将类似于以下内容：

```
public static void FillDropDownList(string Query, System.Windows.Forms.ComboBox DropDownName)
{
  DataTable dt;

  using (var cn = new SqlConnection(CONNECTION_STRING))
  {
    cn.Open();

    try
    {
      SqlCommand cmd = new SqlCommand(Query, cn);
      dt = cmd.ExecuteQuery();
    }
    catch (SqlException e)
    {
      Console.WriteLine(e.ToString());
      return;
    }
  }

  DropDownName.DataSource = dt;
  DropDownName.ValueMember = "id";
  DropDownName.DisplayMember = "Name";
} 
```

请注意我如何将异常类型更改为`SqlException`，因此我们只查找数据库错误。其他一切都会爆炸。我不记得什么时候`myConnection.Open();`会抛出异常，所以你的 try 块不是很有用。请注意我的 try 子句 - 它`ExecuteQuery`在其中，这很可能会失败。

**编辑：使用**[结构](https://stackoverflow.com/questions/376068/does-end-using-close-an-open-sql-connection)时[无需关闭`finally`块`using`](https://stackoverflow.com/questions/376068/does-end-using-close-an-open-sql-connection)中的连接。所以它可以被删除 - 结果你的代码变得更加紧凑。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-02T07:38:38.660

我能够使用@Neolisk 的代码使其工作。仅对代码进行了一些小的更改，如下所示。

```
public static void FillDropDownList(string Query, System.Windows.Forms.ComboBox DropDownName)
        {
            using (var cn = new SqlConnection(CONNECTION_STRING))
            {
                cn.Open();
                DataTable dt = new DataTable();
                try
                {
                    SqlCommand cmd = new SqlCommand(Query, cn);
                    SqlDataReader myReader = cmd.ExecuteReader();
                    dt.Load(myReader); 
                }
                catch (SqlException e)
                {
                    Console.WriteLine(e.ToString());
                    return;
                }
                DropDownName.DataSource = dt;
                DropDownName.ValueMember = "id";
                DropDownName.DisplayMember = "Name";
            }

        } 
```

# javascript - Backbone.js 集合视图在控制台中正确格式化但未在 Dom 中显示

> ID：14113936
> 
> 赞同：0
> 
> 时间：2013-01-01T20:26:11.003
> 
> 标签：javascript, jquery, backbone.js

我正在处理我的第一个backbone.js 问题，并且在使用集合时遇到了困难。从控制台来看，问题似乎出在将集合视图输出到 dom 中。收集数据在控制台中正确格式化，只是没有显示在浏览器中。我不知道我做错了什么：

```
var RegisterModel = Backbone.Model.extend({
    urlRoot: 'api/process.php'
});

var RegisterView = Backbone.View.extend({
    el: "#register",
    template: _.template('<label for="<%= inputName %>"><%= label %></label><input name="<%= inputName %>" type="text" />'),
    render: function() {
        this.$el.html(this.template(this.model.toJSON()));
        return this;
    }
});

var RegisterCollection = Backbone.Collection.extend({ 
    model: RegisterModel
});

var RegisterCollectionView = Backbone.View.extend({
    initialize: function(){
        this.collection.on('add', this.addOne, this);
        this.collection.on('reset', this.addAll, this);
    },  
    addOne: function(registerModel){
        var registerView = new RegisterView({model: registerModel});
        this.$el.append(registerView.render().el);  
    },
    addAll: function(){
        this.collection.forEach(this.addOne, this);
        this.$el.empty();   
    },
    render: function(){
        this.addAll();
        return this;
    }
});

var registerCollection = new RegisterCollection();
var todos = [{inputName: "first_name", label: "First Name"}, {inputName: "last_name", label: "Last Name"}];
registerCollection.reset(todos);

var registerCollectionView = new RegisterCollectionView({collection: registerCollection});
registerCollectionView.render(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T20:37:03.343

这里：

```
addAll: function(){
    this.collection.forEach(this.addOne, this);
    this.$el.empty();   
}, 
```

您`empty()`在渲染每个项目后调用。我假设您的意思是要交换这两行。

```
addAll: function(){
    this.$el.empty();   
    this.collection.forEach(this.addOne, this);
}, 
```

还有这个：

```
el: "#register", 
```

是错的。您有多个 RegisterView，因此在其上使用 ID 是没有意义的。此外，这将导致您的逻辑不是为视图创建一个新元素，而是在页面中查找一个已经存在的元素。您应该完全删除该行。

你想要的是一个`el`on `RegisterCollectionView`。现在你没有将该视图附加到任何东西上，所以它被渲染但不可见。

你应该可以添加这个：

```
el: 'body' 
```

# objective-c - 如何随机化单词

> ID：14113938
> 
> 赞同：-2
> 
> 时间：2013-01-01T20:26:11.783
> 
> 标签：objective-c, ios, cocoa-touch, arc4random

我试图在我的数组中的一个动作上显示一个随机选择的单词

我看过[Randomize words](https://stackoverflow.com/questions/10574073/randomize-words)但仍然没有让它工作。

我的标签文字是`_answer`

在我看来DidLoad：

```
NSArray *words = [NSArray arrayWithObjects: @"Blue", @"Green", @"Red", nil ];
NSString *str=[words objectAtIndex:arc4random()%[words count]]; 
```

在我的操作方法下：

```
 [_answer setText:[NSString stringWithFormat:@"%d", arc4random()%[words count]]; 
```

我收到一个未使用的字符串错误`str`

在我的操作方法中我有一个错误`use of undeclared identifier "words"`，但它在 viewDidLoad

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T20:29:37.147

范围。您在 viewDidLoad 方法 (words, str) 中创建的变量仅在该方法内有效（即它们的范围）。如果您想在其他方法中使用它们，例如您的“操作”方法，则需要在类范围内将它们声明为成员变量/属性。

例如，在您的 .h 文件中：

```
@interface ExampleViewController : UIViewController
    @property(nonatomic) NSString *answer;
    // ... your other stuff ...
@end 
```

在您的 .m 文件中：

```
@synthesize answer;
- (void)viewDidLoad
{
    NSArray *words = [NSArray arrayWithObjects: @"Blue", @"Green", @"Red", nil ];
    self.answer = [words objectAtIndex:arc4random()%[words count]];
    [super viewDidLoad];
} 
```

最后，仍然在 .m 中，您的操作：

```
[_answer setText:self.answer]; 
```

您也可以将其标记为成员变量（而不是属性）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T20:31:53.593

在方法中声明的变量是该方法的本地变量。要在同一类中的方法之间共享变量，请将它们设为实例变量，最好将它们设为`@property`s。

您会收到未使用的字符串错误，`str`因为它在设置后未使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T20:32:02.043

将对象 str 分配给您的标签。[字数] 包含数组的计数而不是值。

使 str 对象成为全局对象，然后使用该对象将值分配给标签。

# ruby - 获取水豚中元素的所有类？

> ID：14113944
> 
> 赞同：15
> 
> 时间：2013-01-01T20:26:59.670
> 
> 标签：ruby, capybara

使用 capybara，有没有办法获得一个元素的所有 css 类？查看文档，我没有看到任何简单的方法。

此外，给定一个元素 elem 和一个 css 类 someclass，应该`elem.has_css?('.someclass')`等价于 jquery`$(elem).hasClass('someclass')`吗？

这个特殊的测试使用 Selenium，因为它涉及到 javascript。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-01T21:23:48.097

[Element#[]](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Element#%5B%5D-instance_method)对我来说看起来很容易：

```
find('div')[:class] 
```

> 此外，给定一个元素 elem 和一个 css 类 someclass，elem.has_css?('.someclass') 是否应该等同于 jquery $(elem).hasClass('someclass')？

[元素#has_css？](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Matchers#has_css?-instance_method)在调用该方法的元素中检查具有指定 CSS 选择器的元素。Jquery 的[hasClass](http://api.jquery.com/hasClass/)检查元素是否具有指定的类。

**更新：** [Capybara 匹配器](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Matchers)在当前元素中查找元素/文本。`Element#has_css?`检查元素是否包含具有指定 css 选择器的元素。如果要检查元素是否存在，请使用`page.has_css?`. 也许[expect(page).to have_css('div')](https://github.com/jnicklas/capybara#querying)形式的匹配器对你来说会更好。

# c++ - '.colorBet' 左边必须有类/结构/联合

> ID：14113947
> 
> 赞同：0
> 
> 时间：2013-01-01T20:27:10.310
> 
> 标签：c++, class, struct, compiler-errors

尝试访问 Hand 类中的结构成员，但出现以下错误：错误：C2228：'.colorBet' 左侧必须有类/结构/联合

手.h

```
 #ifndef HAND_H
#define HAND_H

#include"deck.h"
#include <QVector>
#include <QString>

struct street
{
    QString colorBet;
    int colorBetSize;
    int payout;
};

class Hand
{
    QVector<card> cardVector;

public:

    Hand(QVector<card> vCards);

    bool isFlush();
    bool isAllRed();
    bool isAllBlack();

    street street1;
    street street2;
    street street3;

};

#endif // HAND_H 
```

mainwindow.cpp（底部附近的错误）

```
#include "mainwindow.h"
#include "ui_mainwindow.h"
#include "hand.h"

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::build_radios(){
    street1BetBlack = new QRadioButton("Black");
    connect(street1BetBlack, SIGNAL(clicked()),
              this, SLOT(street1BetBlackClicked()));
    street2BetBlack = new QRadioButton("Black");
    connect(street2BetBlack, SIGNAL(clicked()),
              this, SLOT(street2BetBlackClicked()));
    street3BetBlack = new QRadioButton("Black");
    connect(street3BetBlack, SIGNAL(clicked()),
              this, SLOT(street3BetBlackClicked()));

    street1BetRed = new QRadioButton("Red");
    connect(street1BetRed, SIGNAL(clicked()),
              this, SLOT(street1BetRedClicked()));
    street2BetRed = new QRadioButton("Red");
    connect(street2BetRed, SIGNAL(clicked()),
              this, SLOT(street2BetRedClicked()));
    street3BetRed = new QRadioButton("Red");
    connect(street3BetRed, SIGNAL(clicked()),
              this, SLOT(street3BetRedClicked()));

    st1bg = new QButtonGroup;
    st2bg = new QButtonGroup;
    st3bg = new QButtonGroup;

    // button groups
    st1bg->addButton(street1BetBlack);
    st1bg->addButton(street1BetRed);
    st1bg->setExclusive(true);

    st2bg->addButton(street2BetBlack);
    st2bg->addButton(street2BetRed);
    st2bg->setExclusive(true);

    st3bg->addButton(street3BetBlack);
    st3bg->addButton(street3BetRed);
    st3bg->setExclusive(true);

}
void MainWindow::street1BetRedClicked()
{
    Hand::street1.colorBet="Red";        //error on every line similar to this
}
void MainWindow::street2BetRedClicked()
{
    Hand::street2.colorBet="Red";
}
void MainWindow::street3BetRedClicked()
{
    Hand::street3.colorBet="Red";
}
void MainWindow::street1BetBlackClicked()
{
    Hand::street1.colorBet="Black";
}
void MainWindow::street2BetBlackClicked()
{
    Hand::street2.colorBet="Black";
}
void MainWindow::street3BetBlackClicked()
{
    Hand::street3.colorBet="Black";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T20:43:00.010

`Hand::street1.colorBet="Red";`＆其他人是非法的，因为`Hand::street1`它不是`static`类成员（我不是说它应该，拥有`static`成员应该是一个逻辑决定，而不是你为了使代码编译而做的事情）。

`Hand`例如，您试图修改什么对象`street1BetRedClicked`？你有*对象* `Hand`吗？你需要什么`Hand`物品吗？你用那种方法创建它们吗？外部？

我指出了错误，但在我看来，这里的重要问题不是代码无法编译，而是：

1.  您似乎对 C++ 没有牢牢掌握，也许您应该从更简单的东西开始。

2.  您没有明确的逻辑设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T21:07:39.033

当你`street1`这样访问时，`street1`应该是`Hand`.

如果每个都`Hand`可以有自己的`street1`对象，您应该访问对象的`street1`字段而不是静态字段。如果您希望 的所有实例`Hand`共享相同的`street1`，则应设为`street1`静态。

您不了解这些概念并且通过阅读您的其他问题（[示例](https://stackoverflow.com/a/14079817/319611)），我可以看出您对 C++ 的了解不足以编写这个程序。我建议你在开始自己的项目之前先阅读一本关于 C++ 的书或以其他方式学习 C++。

例子：

```
Hand hand1 = getRandomHand();
Hand hand2 = getRandomHand();

hand1.street1.colorBet="Red";
hand2.street1.colorBet="Black"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T20:38:26.637

你必须声明一个 Hand 类型的对象：

```
Hand hand;
hand.street1;
... 
```

您还可以将街道字段声明为静态。

# android - AndEngine画线onSceneTouchEvent

> ID：14113951
> 
> 赞同：4
> 
> 时间：2013-01-01T20:27:52.713
> 
> 标签：android, line, andengine

我是*AndEngine*`onSceneTouchEvent`的新手，我想用我的手指坐标画一条线t 检测到问题：/

```
 private Scene scene;
float startX;
float startY;
float lastX;
float lastY;
int lineUsageCount = 0;

@Override
    public boolean onSceneTouchEvent(Scene pScene, TouchEvent pSceneTouchEvent) {
        switch (pSceneTouchEvent.getAction()) {
        case MotionEvent.ACTION_DOWN:

            startX = pSceneTouchEvent.getX();
            startY = pSceneTouchEvent.getY();
            lineUsageCount = 0 ;

        break;
        case MotionEvent.ACTION_MOVE:

            lineUsageCount++;
            lastX = pSceneTouchEvent.getX();
            lastY = pSceneTouchEvent.getY();

        break;
        case MotionEvent.ACTION_UP:

            if (lineUsageCount <= 5) {
                final Line line = new Line(startX, startY, lastX,
                                lastY, this.getVertexBufferObjectManager());

                line.setLineWidth(1);
                line.setColor(255, 255, 255);
                scene.attachChild(line);

        }

        break;
    }   
    return true;
    }
}; 
```

它应该得到第一个坐标`startX, startY`，然后`Action_Move`它得到`lastX, lastY`并画线，但它似乎不起作用：|

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T07:23:26.137

问题出在这行代码中：`if (lineUsageCount <= 5) {` 当您移动手指时，`lineUsageCount`将超过 5。调试此变量，然后在“IF”中更改它或从代码中删除此“IF”。

# django - 如何让 Django 识别自定义模板标签？

> ID：14113957
> 
> 赞同：0
> 
> 时间：2013-01-01T20:28:16.223
> 
> 标签：django, django-templates

我的项目目录如下所示。 `settings_value.py`有一个模板标签，名为“settings_value”。在我的 settings.py 中，我将 'itslogical.templatetags' 添加到`INSTALLED_APPS`. 我尝试在 中使用它`logicalhp/home.html`，但它说标签不存在。我正在使用[此答案](https://stackoverflow.com/a/5235614/1074592)中的代码（我将名称从“value_from_settings”更改为“settings_value”）。

```
.
├── internetparse
│   └── ...
├── itslogical
│   ├── settings.py
│   ├── templates
│   │   └── itslogical
│   │       └── base.html
│   └─── templatetags
│       ├── __init__.py
│       └── settings_value.py
├── logicalhp
│   ├── templates
│   │   └── logicalhp
│   │       └── home.html
│   └── views.py
└── manage.py 
```

需要帮助请叫我。我在这里想念什么？

编辑：添加代码和更新错误。这是基于@Dan 的回答。

```
500 ERROR:
'settings_value' is not a valid tag library: Template library settings_value not found
Template library settings_value not found, tried django.templatetags.settings_value ... 
```

```
#!/usr/bin/env python

from django import template
from django.conf import settings

# Include settings from here in templates
register = template.Library()

# settings value
@register.tag
def settings_value(parser, token):
    try:
        # split_contents() knows not to split quoted strings.
        tag_name, var = token.split_contents()
    except ValueError:
        raise template.TemplateSyntaxError, "%r tag requires a single argument" % token.contents.split()[0]
    return ValueFromSettings(var)

class ValueFromSettings(template.Node):
    def __init__(self, var):
        self.arg = template.Variable(var)

    def render(self, context):
        return settings.__getattr__(str(self.arg)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T20:36:10.073

您不应将 templatetags 目录添加到已安装的应用程序中。您应该将 templatetags 目录放在现有应用程序中，并将其添加到已安装的应用程序中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T20:46:32.670

尝试将 templatetags 文件夹移动到logicalhp

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T21:01:01.303

部分问题是我的 settings.py 中的拼写错误（在 'itslogical' 中写了 'logicalhp.templatetags'）。更大的问题是它试图`"STATIC_URL"`从我的设置中获取属性。它包括引号，所以它是有效的`settings.__getattr__('"STATIC_URL"')`。

为了解决这个问题，我加了一条。

```
return settings.__getattr__(str(self.arg)) #before
return settings.__getattr__(str(self.arg).strip('"')) #after 
```

（顺便说一句，你不能省略模板中的引号；否则它认为它是一个变量。）

# php - json 调用的 PHP Header

> ID：14113963
> 
> 赞同：-1
> 
> 时间：2013-01-01T20:29:13.493
> 
> 标签：php, json, header

我遇到了这个脚本的问题，没有调用标头重定向，但 MySQL 查询调用了。

当 MySQL 查询被调用而标题没有被调用时，这对我来说看起来很奇怪？

应该重定向的 PHP 脚本：

```
if (array_key_exists('pic',$_FILES) && $_FILES['pic']['error'] == 0 ) {

    $pic = $_FILES['pic'];

    if (!in_array(get_extension($pic['name']),$allowed_ext)) {
        exit_status('Only '.implode(',',$allowed_ext).' files are allowed!');
    }   

    // Move the uploaded file from the temporary 
    // directory to the uploads folder:

    if (move_uploaded_file($pic['tmp_name'], $upload_dir.$key.'-'.$pic['name'])) {
        $name = $key.'-'.$pic['name'];
    $query = "INSERT INTO `uploads` (id, file_name, up_date, rm_date) VALUES ('$id', '$name', '$up_date', '$rm_date')"; 
    mysql_query($query) or die(mysql_error()); // **Get called**
    header("Location: download.php?id=$id"); // **Does not get called**
    exit();

    }

} 
```

和调用 PHP 脚本的 Javascript

```
$(function(){

    var dropbox = $('#dropbox'),
        message = $('.message', dropbox);

    dropbox.filedrop({
        // The name of the $_FILES entry:
        paramname:'pic',

        maxfiles: 1,
        maxfilesize: 25,
        url: 'upload.php',

        uploadFinished:function(i,file,response){
            $.data(file).addClass('done');
            // response is the JSON object that upload.php returns
        },

        error: function(err, file) {
            switch(err) {
                case 'BrowserNotSupported':
                    showMessage('Your browser does not support HTML5 file uploads!');
                    break;
                case 'TooManyFiles':
                    alert('Too many files! Only one at same time is allowed.');
                    break;
                case 'FileTooLarge':
                    alert(file.name+' is too large! Please upload files up to 25mb.');
                    break;
                default:
                    break;
            }
        },

        // Called before each upload is started
        beforeEach: function(file) {
            if(!file.type.match(/^image\//)) {
                alert('Only images are allowed!');

                // Returning false will cause the
                // file to be rejected
                return false;
            }
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T20:41:18.467

我假设您希望将调用客户端重定向到另一个页面？好吧，您必须在这里通过 JavaScript 执行此操作，根据您从服务器收到的响应进行操作。由于您的浏览器实际上并没有*“转到”*您通过 JS 请求的页面，因此重写的标头不会影响您客户端的位置。

您可以使用

```
window.location = "http://www.example.com/" 
```

通过 JavaScript 重定向。

希望有帮助。

# php - 如何检查给定的 URL 是否是图像？

> ID：14113964
> 
> 赞同：1
> 
> 时间：2013-01-01T20:29:21.777
> 
> 标签：php, image

我想过使用`getimagesize($url);`，但仍有很多情况下我可以通过浏览器访问图像，但同一张图像没有返回任何内容`getimagesize($url);`

```
$url = 'http://lp.hm.com/hmprod?set=key[source],value[/model/2012/P01 06826 05102 04 0026 4.jpg]&set=key[rotate],value[]&set=key[width],value[]&set=key[height],value[]&set=key[x],value[]&set=key[y],value[]&set=key[type],value[STILL_LIFE_FRONT]&call=url[file:/product/large] '; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T20:31:58.260

只需检查字符串的 Content-Type 标头即可`image`。

只需使用该功能`get_headers()`： http: [//php.net/manual/en/function.get-headers.php](http://php.net/manual/en/function.get-headers.php)

你也可以使用 curl 如果它在你的系统上可用，这里有详细信息：[Get mime type of external file using cURL and php](https://stackoverflow.com/questions/2610713/get-mime-type-of-external-file-using-curl-and-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T20:34:16.813

要使用 getimagesize() 您需要下载 url 并将其保存为本地文件。然后将本地存储的文件名字符串传递给getimagesize()。

# data-structures - 给定父节点数组，打印出树的前序遍历

> ID：14113968
> 
> 赞同：2
> 
> 时间：2013-01-01T20:29:59.177
> 
> 标签：data-structures, tree, preorder

给定一个未排序的节点数组，其中节点定义为：
`Node { int id; int parent_id; string label; }`

每个节点都有自己唯一的 id。`parent_id`在树中识别其父项。问题是如何对树进行前序遍历？（不一定是二叉树）

这是一个困扰我好几天的面试题。我能想到的是使用一个哈希映射`map<int,list<node> >`，其中 key 是 parentid。那我就不能更进一步了。我应该从地图构建树并进行前序遍历，还是有直接从地图中进行的好方法？那怎么办？任何提示表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T20:54:19.827

所以你需要：

```
map<int, list<Node> > childMap;
map<int, Node> nodeMap; 
```

你会发现一个没有父节点（parent_id = -1 或其他）的节点，这显然是根节点。在设置上面的地图后，您可以为该节点调用以下函数。

```
preOrder(int id)
{
  process(nodeMap[id]);
  foreach (Node node: childMap[id])
    preOrder(node);
} 
```

# objective-c - iOS：UITableView 选择性触摸

> ID：14113972
> 
> 赞同：2
> 
> 时间：2013-01-01T20:30:15.570
> 
> 标签：objective-c, ios, uitableview, didselectrowatindexpath

我有一个`UITableView`具有不同高度的某些单元格。如果单元格中的触摸低于某个点，我希望有一种方法，无需向每个单元格添加按钮，就不会收到对 didSelectedRowAtIndexPath 的响应。

例如，假设我有两个单元格，一个高度为 100，另一个高度为 150。有没有办法不接收对`didSelectRowAtIndexPath:`低于 100 的触摸的响应，但仍接收单元格上的触摸输入？

我想覆盖单元格中的触摸方法并将委托中的接触点返回到控制器/表并使用该输入来确定我是否会忽略`didSelectRowAtIndexPath:`响应，但我担心突出显示和其他调用以及它是否可能不够快以阻止这些。这对我来说似乎真的很可疑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T20:51:34.863

我认为如果不对单元进行子类化，这是不可能的。

我的建议是这样做：

1.  创建细胞的子类
2.  向单元格添加额外的布尔 iVar，例如 didTapOutside
3.  `touchesBegan`根据方法中的 Y 位置抽头，将布尔值设置为 True 或 False
4.  在`didSelectRowAtIndexPath`读取 didTapOutside 布尔变量并根据它的设置执行您的操作

示例如下：

```
@interface MyCustomCell : UITableViewCell {
    BOOL didTapOutside;
}
@property (atomic, readwrite) BOOL didTapOutside; 
```

和实施：

```
@implementation MyCustomCell

@synthesize didTapOutside;

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    CGPoint location = [touch locationInView:touch.view];

    didTapOutside =  (location.y>100);

    [super touchesBegan:touches withEvent:event];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T20:45:02.213

您可以创建自定义`UITableViewCell`，例如：

```
CustomCell *cell = [[CustomCell alloc] initWithFrame:rect reuseIdentifier:identifier]; 
```

您可以覆盖 CustomCell 中的 touchesBegan 方法并执行以下操作来获取触摸的位置：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *aTouch = [touches anyObject];
    CGPoint point = [aTouch locationInView:self];
    // point.x and point.y have the coordinates of the touch

    // based on where the touch is... your custom code

    [super touchesBegan:touches withEvent:event];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T20:58:39.807

对不起，我一开始读错了这个问题。对此没有简单的解决方案。

如果您不想使用子类，您唯一可以做的就是在要检测触摸的区域上添加一个透明视图或按钮，并在其上创建一个事件，而不是使用表格视图单元格方法。

# r - 您如何找到计算 r 时使用的样本量？

> ID：14113973
> 
> 赞同：1
> 
> 时间：2013-01-01T20:30:19.857
> 
> 标签：r, summary, sample-size

我正在运行变量之间的相关性，其中一些变量缺少数据，因此每个相关性的样本量可能不同。我尝试了打印和摘要，但这些都没有显示我的 n 对于每个相关性有多大。这是一个相当简单的问题，我无法在任何地方找到答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T23:54:26.427

像这样..？

```
x <- c(1:100,NA)
length(x)
length(x[!is.na(x)]) 
```

你也可以像这样获得自由度......

```
y <- c(1:100,NA)
x <- c(1:100,NA)

cor.test(x,y)$parameter 
```

但我认为最好显示代码以了解如何估计相关性以获得确切帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T04:07:15.840

这是一个如何在矩阵的列中查找成对样本大小的示例。如果要将其应用于数据框的（某些）数字列，请相应地组合它们，将结果对象强制转换为矩阵并应用该函数。

```
# Example matrix:
xx <- rnorm(3000)
# Generate some NAs
vv <- sample(3000, 200)
xx[vv] <- NA
# reshape to a matrix
dd <- matrix(xx, ncol = 3)
# find the number of NAs per column
apply(dd, 2, function(x) sum(is.na(x)))
# tack on some column names
colnames(dd) <- paste0("x", seq(3))

# Function to find the number of pairwise complete observations 
# among all pairs of columns in a matrix. It returns a data frame
# whose first two columns comprise all column pairs

pairwiseN <- function(mat)
{
    u <- if(is.null(colnames(mat))) paste0("x", seq_len(ncol(mat))) else colnames(mat)
    h <- expand.grid(x = u, y = u)

    f <- function(x, y)
           sum(apply(mat[, c(x, y)], 1, function(z) !any(is.na(z))))
    h$n <- mapply(f, h[, 1], h[, 2])
    h
}

# Call it
pairwiseN(dd) 
```

功能很容易改进；例如，您可以设置`h <- expand.grid(x = u[-1], y = u[-length(u)])`减少计算次数，可以返回一个 nxn 矩阵而不是三列数据框等。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-01T23:55:07.723

如果您的变量是名为`a`and的向量`b`，那么会有什么`sum(is.na(a) | is.na(b))`帮助吗？

# linq - LINQ：使用匿名类型

> ID：14113974
> 
> 赞同：1
> 
> 时间：2013-01-01T20:30:22.340
> 
> 标签：linq, entity-framework-4, anonymous-types

我确信这对于知道答案的人来说是基本的。但我被困住了。我试图查找答案无济于事。如何在代码后面引用 fbRegistered 值？

```
using (kvEntities ent = new kvEntities())
    {           
        var user = from u in ent.kvUsers
                   where u.fbID == id
                   select new { u.fbID, u.fbRegistered};

        if (user.fbRegistered)   // < ???
        {
            // so how do I reference fbRegistered just above? 
            // this gives me an error.
        }
  } 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T20:33:21.290

`user`包含集合。用途`First`或`Single`方法：

```
if (user.First().fbRegistered) ... 
```

# android - android SupportMapFragment 错误膨胀片段类

> ID：14113987
> 
> 赞同：2
> 
> 时间：2013-01-01T20:32:19.080
> 
> 标签：android, google-maps, android-fragmentactivity

祝大家新年快乐，

在 Android 中实现 Fragments 的新功能（我看过类似的帖子，但我无法为我的问题找到答案），所以这里是：

我希望使用 SupportMapFragment（从支持库 v4 引用）并且我创建了一个扩展 FragmentActivity 的类，称为 TripSummary.java：

```
package com.project.locationapp;

import com.google.android.gms.common.GooglePlayServicesUtil;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.SupportMapFragment;
import android.os.Bundle;
import android.content.Intent;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.Toast;

public class TripSummary extends android.support.v4.app.FragmentActivity {

private GoogleMap mMap;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Intent intent = new Intent(this, LocationService.class);
    stopService(intent);
    setContentView(R.layout.activity_trip_summary);

    createMap();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_trip_summary, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    //Content?
    return super.onOptionsItemSelected(item);
}

private void createMap(){
    //if a map has not already been instantiated it'll return null
    if(mMap == null){
        //instantiate map
        mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap();
        //check it has been instantiated
        if(mMap != null){
            Toast.makeText(this, "map done", Toast.LENGTH_SHORT)
            .show();
            //Manipulate map here (add coordinates/polylines from trip etc etc.)
        }
    }
} 
```

}

从 activity_trip_summary.xml 获取布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:id="@+id/tripSummary"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:text="@string/trip_summary"
    tools:context=".Start" />

<TextView
    android:id="@+id/tripDetails"
    android:layout_below="@id/tripSummary"
    android:layout_alignParentLeft="true"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:text="@string/awaiting_location"
    tools:context=".Start" />

<Fragment
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:map="http://schemas.android.com/apk/res-auto"
    android:id="@+id/map"
    android:layout_below="@id/tripDetails"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:name="com.google.android.gms.maps.SupportMapFragment" />

</RelativeLayout> 
```

AndroidManifest.xml 如下：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
   package="com.project.locationapp"
   android:versionCode="1"
   android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />
<permission
      android:name="com.project.locationapp.permission.MAPS_RECEIVE"
      android:protectionLevel="signature"/>
<uses-permission android:name="com.project.locationapp..permission.MAPS_RECEIVE"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <activity
        android:name="com.project.locationapp.Start"
        android:label="@string/title_activity_start" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <service android:name="com.project.locationapp.LocationService" />

    <activity
        android:name="com.project.locationapp.TripSummary"
        android:label="@string/title_activity_trip_summary" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.project.locationapp.Start" />
    </activity>
    <activity
        android:name="com.project.locationapp.ViewTrips"
        android:label="@string/title_activity_view_trips" >
    </activity>
    <activity
        android:name="com.project.locationapp.TripDetail"
        android:label="@string/title_activity_trip_detail" >
    </activity>
    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="<-- My Key -->"/>
</application>

</manifest> 
```

每次我尝试加载活动 TripSummary 时，我遇到的问题是“对不起！意外停止”对话框，应用程序崩溃。

日志猫：

```
java.lang.RuntimeException: Unable to start activity                   ComponentInfo{com.project.locationapp/com.project.locationapp.TripSummary}:     android.view.InflateException: Binary XML file line #24: Error inflating class Fragment 
```

我正在引用 google-play-services_lib 库（也在我的工作区中），并且在我的项目的 /libs 目录中也有一个 android-support-v4.jar 的副本。

如果您知道我的问题的答案，请分享！

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T20:35:45.670

请更换：

```
<Fragment 
```

和：

```
<fragment 
```

此外，您可以摆脱该元素中多余/不正确的命名空间声明。

另外，将来，发布*完整的堆栈跟踪*，而不仅仅是一行的一部分，以便人们更容易地帮助你。