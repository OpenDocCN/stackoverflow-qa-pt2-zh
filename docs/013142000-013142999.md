# StackOverflow 问答 13142000-13142999

# c# - 线程调试窗口中没有显示线程

> ID：13142000
> 
> 赞同：7
> 
> 时间：2012-10-30T15:12:46.610
> 
> 标签：c#, winforms, visual-studio-2010, visual-studio, backgroundworker

我正在尝试按照[本文](http://devpinoy.org/blogs/jakelite/archive/2009/01/10/5-tips-on-debugging-multi-threaded-code-in-visual-studio-net.aspx)中的描述跟踪我的 BackgroundWorker 线程，线程调试窗口为空：

![在此处输入图像描述](../Images/ff21e88ab2c1d7917244507428807111.png)

是的，[我正在调试](https://stackoverflow.com/a/799551/869501)。

我错过了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-30T15:13:48.170

您需要先暂停您的应用程序；当您的代码运行时，调试器不会显示任何内容。

您可以设置断点并等到它被击中，或者单击“暂停”按钮立即中断。

# javascript - 用鼠标旋转轮盘

> ID：13142004
> 
> 赞同：0
> 
> 时间：2012-10-30T15:13:10.033
> 
> 标签：javascript, jquery, html, css, canvas

我正在看这个例子（[jsfiddle](http://jsfiddle.net/MZxgp/)）。这几乎是我所需要的，但我需要用户用鼠标“抓住”轮盘赌，然后旋转它，就像你用手操作真正的轮盘一样。

就像，您单击并按住滚轮，它“粘”在您的鼠标上，然后您将鼠标向左或向右移动，然后松开按钮，滚轮开始旋转直到它停止。

另一个问题是，即使用户这样做，我可以选择一个预定的顺序来停止轮子吗？

这是 jsFiddle：

```
$(function(){

            var overWheel = false;
            var mouseDown = false;
            var lastMousePos = 0;

            $('.wheel').on('mouseover', function(){
                overWheel = true;
            }).on('mouseout', function(){
                overWheel = false;
            });

            $(document).on('mousedown', function(e){
                if(overWheel){
                    lastMousePos = e.offsetY;
                    mouseDown = true;
                }
            }).on('mouseup', function(){
                mouseDown = false;
            });

            $(document).on('mousemove', function(e){
                if(overWheel && mouseDown){
                    handleWheel(e);
                }
            });

            function handleWheel(e) {

                var yPos = e.offsetY;
                var direction = 0;

                var deg = getRotationDegrees($('.wheel'));

                if(yPos < lastMousePos){ // mouse is going up, move against the clock
                    console.log(yPos);
                    direction = -2;

                } else { //mouse is going down, move with the clock

                    direction = 2;

                }

                $('.wheel').css({'-webkit-transform': 'rotate(' + (deg + (direction)) + 'deg)'});
            }

            function getRotationDegrees(obj){
                var matrix = obj.css("-webkit-transform");
                if(matrix !== 'none') {
                    var values = matrix.split('(')[1].split(')')[0].split(',');
                    var a = values[0];
                    var b = values[1];
                    var angle = Math.round(Math.atan2(b, a) * (180/Math.PI));
                } else { var angle = 0; }
                return angle;
            }

        });​ 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-13T20:06:50.523

我已经成功地工作了。我使用了[jQuery Rotate](http://code.google.com/p/jqueryrotate/)库。

谢谢！

# objective-c - 列出 Documents 文件夹中的所有文件

> ID：13142009
> 
> 赞同：0
> 
> 时间：2012-10-30T15:13:14.760
> 
> 标签：objective-c

我需要列出 Documents 文件夹中的所有文件并获取它们的名称......因为我不知道文件的名称......那么我不能使用：

```
 NSString* documentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

 NSString* foofile = [documentsPath stringByAppendingPathComponent:@"filename" ];
 BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:foofile]; 
```

我能怎么做？

恢复：我需要 Documents 文件夹中 .png 文件的名称

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T15:51:47.047

**NSFileManager 类参考**

> contentsOfDirectoryAtPath:error：对指定目录执行浅搜索并返回任何包含项目的路径。
> 
> *   (NSArray *)contentsOfDirectoryAtPath:(NSString *)path error:(NSError ** )error 参数 path 要枚举其内容的目录的路径。error 输入时，指向错误对象的指针。如果发生错误，则将此指针设置为包含错误信息的实际错误对象。如果您不想要错误信息，您可以为此参数指定 nil。返回值 NSString 对象数组，每个对象标识路径中包含的文件、目录或符号链接。如果目录存在但没有内容，则返回一个空数组。如果发生错误，此方法返回 nil 并将适当的错误对象分配给错误参数
> 
> 讨论此方法执行目录的浅搜索，因此不遍历符号链接或返回任何子目录的内容。此方法也不返回当前目录（“.”）、父目录（“..”）或资源分支（以“._”开头的文件）的 URL，但它确实返回其他隐藏文件（以“._”开头的文件）带有句点字符）。如果您需要执行深度枚举，请改用 enumeratorAtURL:includePropertiesForKeys:options:errorHandler: 方法。
> 
> 返回数组中文件的顺序未定义。
> 
> 可用性 适用于 iOS 2.0 及更高版本。

那应该可以满足您的需求

# java - 反序列化许多子节点以添加对对象xStream java的引用

> ID：13142025
> 
> 赞同：0
> 
> 时间：2012-10-30T15:13:57.887
> 
> 标签：java, xstream

嗨，我正在对以下图表进行反序列化：

```
<grafo>
 <nodo id="1">
   <child id="2"/>
 </nodo>
 <nodo id="2">
   <child id="3"/>
   <child id="4"/>
 </nodo>
 <nodo id="3">
   <child id="4"/>
 </nodo>
 <nodo id="4">
   <child id="1"/>
 </nodo> 
```

我需要将子节点与图表列表中其他节点的引用链接起来，这意味着在解组过程中我不能只创建一个新节点并将它的 id 设置为给我读者的属性，我需要它与图上已经存在的节点共享它的属性，以便能够做到这一点，我在 GraphConverter 类中尝试使用以下函数：

```
public Object unmarshal(HierarchicalStreamReader reader,UnmarshallingContext arg1) {
    Grafo graph= new Grafo();
    ArrayList<ArrayList<String>> handlechilds= new ArrayList<ArrayList<String>>();
     while (reader.hasMoreChildren()) 
     {
         reader.moveDown();
         Nodo node= new Nodo(reader.getAttribute("id"));
         graph.nodos.add(node);
         reader.moveDown();
         //reader.getAttribute("id") ->> this just gives me the value of the fisrt node but not the anothers!!
         reader.moveUp();
         reader.moveUp();
     }
    return graph;
} 
```

我正在考虑保存边的值并在另一个中添加引用以迭代图形，但我意识到当读者只返回一个孩子时，我需要所有这些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:24:12.070

阅读XStream 中的[对象引用](http://xstream.codehaus.org/graphs.html)。

```
xstream.setMode(XStream.ID_REFERENCES); 
```

# boost - 谷歌测试和提升::变体

> ID：13142026
> 
> 赞同：1
> 
> 时间：2012-10-30T15:13:58.593
> 
> 标签：boost, googletest, c++98

我希望在我的单元测试中迭代我的 boost::variant 中的类型。这可以按如下方式完成：

```
TEST_F (MyTest, testExucutedForIntsOnly)
{
    typedef boost::variant<int, char, bool, double> var;
    boost::mpl::for_each<SyntaxTree::Command::types>(function());
    ...
} 
```

其中函数是函子。我只是想确保变体中的一种类型相对于所有其他类型的特定操作发生不同。但是，我不喜欢现在在另一个函数中完成测试——如果我希望从函子访问 MyTest 的成员怎么办？看起来真的很乱。

关于更好的方法的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T03:43:36.693

那么，您想在与类型相关的 boost::variant 上调用函数吗？

尝试这个：

```
template<typename T>
struct RunOnlyOnType_Helper
{
  std::function<void(T)> func;
  template<typename U>
  void operator()( U unused ) {}
  void operator()( T t ) { func(t); }
  RunOnlyOnType_Helper(std::function<void(T)> func_):func(func_){}
};

template<typename T, typename Variant>
void RunOnlyOnType( Variant v, std::function< void(T) > func )
{
  boost::apply_visitor( RunOnlyOnType_Helper<T>(func), v );
} 
```

这个想法是 RunOnlyOnType 是一个函数，它从变体中获取一个变体和一个特定类型的函子，并且当且仅当变体的类型与函子匹配时才执行函子。

然后你可以这样做：

```
typedef boost::variant<int, char, bool, double> var;
var v(int(7)); // create a variant which is an int that has value 7
std::string bob = "you fool!\n";
RunOnlyOnType<int>( v, [&](int value)->void
{
  // code goes here, and it can see variables from enclosing scope
  // the value of v as an int is passed in as the argument value
  std::cout << "V is an int with value " << value << " and bob says " << bob;
}); 
```

那是你要的吗？

免责声明：我以前从未接触过`boost::variant`，以上内容尚未编译，这是基于快速阅读 boost 文档。此外，`std::function`上面的使用是次优的（您应该能够一直使用模板化函子——哎呀，您可能可以从函子的类型签名中提取类型 T）。

# jquery - jquery幻灯片效果在重新启动循环图像时不起作用

> ID：13142028
> 
> 赞同：2
> 
> 时间：2012-10-30T15:14:10.337
> 
> 标签：jquery, jquery-ui

我有一段代码循环遍历命名 div 中的图像。每个图像依次显示，并调用 jquery 幻灯片效果以使幻灯片更有趣。幻灯片效果完成后，我会隐藏之前显示的图像，以便稍后再次滑动。

一切都很好，除非我返回显示 div 中的第一张图像，此时幻灯片效果不显示。此模式在循环中的每次迭代中重复。

页面的 css 将 img 设置为 display:none 以便所有图像最初都被隐藏。

代码如下：

```
$(function()
{
    // Sort out the handling of the slider (if it exists)
    if ($('#slider').length != 0)
    {
        var allImgs = $('#slider img');
        var $active = allImgs.eq(0);

        $active.show(0, function()
        {
            var $next = $active.next();
            var timer = setInterval(function() 
            {
                // Make the effect happen on the next one in the list
                $next.show("slide", { direction: "left" }, "slow", function()
                {
                    $active.hide(0, function()
                    {
                        $active = $next;
                        $next = (allImgs.last().index() == allImgs.index($active)) ? 
                                allImgs.eq(0) : $active.next();
                    });
                });
            }, 5000);
        });
    }
}); 
```

对我来说，代码看起来应该可以工作 - 我缺少什么明显的东西？

**编辑**

感谢**mccannf**，我更改了我的 CSS 以便 #slider img 具有 z-index:100; 然后将我的代码更改如下：

```
$next.show("slide", { direction: "left" }, "slow", function()
{
    $next.css("z-index", 99);
    $active.hide(0, function()
    {
        $active.css("z-index", 100);
        $active = $next;
        $next = (allImgs.last().index() == allImgs.index($active)) 
                ? allImgs.eq(0) : $active.next();
     });
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T17:39:18.167

图像的 z-index 控制着什么重叠什么。

幻灯片中的第一张图像可能具有最低的 z-index，因此当它滑过幻灯片中的最后一张图像时，它实际上是在最后一张图像的下方滑动。仅当您隐藏最后一张图像时才会显示。您需要使滑动动画具有更高的 z-index，例如

```
.ui-effects-wrapper {
        z-index: 100 !important;
} 
```

# c++ - CGImage：支持的图像格式列表

> ID：13142032
> 
> 赞同：0
> 
> 时间：2012-10-30T15:14:20.730
> 
> 标签：c++, image, macos, qt, cgimage

我想查询 Mac OS X 中所有支持的图像格式（和文件扩展名）的列表，以便我可以在 Qt“打开图像”对话框中包含这些文件扩展名。我使用 CGImage 加载图像。

目前我使用静态列表，但我想动态查询用户系统上的格式和扩展名列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T04:32:56.323

用于编写 CGImageRef 的最常见支持的图像类型在 UTCoreTypes.h 中声明

有关更多详细信息，请参阅图形内容的统一类型标识符 [http://developer.apple.com/library/mac/#documentation/MobileCoreServices/Reference/UTTypeRef/Reference/reference.html](http://developer.apple.com/library/mac/#documentation/MobileCoreServices/Reference/UTTypeRef/Reference/reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:29:20.177

`QImageReader::supportedImageFormats()`返回格式列表：http: [//qt-project.org/doc/qt-4.8/qimagereader.html#supportedImageFormats](http://qt-project.org/doc/qt-4.8/qimagereader.html#supportedImageFormats)

我不知道您如何获得文件扩展名，但拥有一个静态扩展名列表并在运行时仅选择受支持的扩展名应该很容易。

PS。很抱歉，我没有正确阅读您的问题。您需要 CGImage 支持的格式，而不是 QImage 支持的格式。请忽略这个答案。

# string - Pascal - 字符串到 LongWord

> ID：13142037
> 
> 赞同：0
> 
> 时间：2012-10-30T15:14:46.983
> 
> 标签：string, integer, pascal

我有数字作为字符串。如何将该字符串转换为 LongWord？

我知道如何将其转换为整数。但是整数对我来说太小了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:00:43.147

实际上你可以使用 StrToInt。

结果值将溢出（即，对于高于 $7fffffff 的值变为负数，您可能希望禁用溢出检查），但是当它转换为 longword 时，您将获得正确的值。

尽管低水平的 Val 可能更安全：

```
var
  x: longword;
  e: word;
begin
  Val('$9fffffff', x, e);

  writeln(x);
end. 
```

# python - 构建最大堆和迭代

> ID：13142041
> 
> 赞同：2
> 
> 时间：2012-10-30T15:15:01.260
> 
> 标签：python, iteration

我有两个问题：

**1）**最近我正在尝试建立一个[最大堆](http://en.wikipedia.org/wiki/Binary_heap)。即使我阅读了[CLRS](http://en.wikipedia.org/wiki/Introduction_to_Algorithms)，我在运行它时也找不到错误。以下是我的代码...

```
def maxHeapify(list, index):
    int = index
    left = (int+1) * 2 - 1
    right = (int+1) * 2
    largest = 0
    if left < len(list):
        if (left <= len(list)) & (list[left] >= list[int]):
            largest = left
        else: 
            largest = int
    if right < len(list):
        if (right <= len(list)) & (list[right] >= list[largest]):
            largest = right
    else:
        pass
    if largest != int:
        listNew = swapWithinList(list, int, largest)
        listNew = maxHeapify(listNew, largest)
    else:
        return listNew

def swapWithinList(list, id1, id2):
    num1 = list[id1]
    num2 = list[id2]
    listNew = list[:id1]
    listNew.append(num2)
    listNew = listNew + list[(id1+1):id2]
    listNew.append(num1)
    listNew = listNew + list[(id2+1):]
    return listNew 
```

我提供输入，但控制台只是说：

```
UnboundLocalError: local variable 'listNew' referenced before assignment 
```

这是否意味着我将 return 语句放在错误的行上或者我没有提到的东西？

**2）**什么是迭代？

当我问这个问题时，我有点尴尬。但什么是迭代？维基说这个过程的每次重复都意味着它，那么它是循环给每一轮的结果吗？

而迭代器似乎是Python中的一个基本元素，迭代器和迭代有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T15:18:40.643

1：

无需进一步评论，以下是改编自[Wikipedia](http://en.wikipedia.org/wiki/Binary_heap)的代码：

```
def max_heapify(A, i):
    left = 2 * i + 1
    right = 2 * i + 2
    largest = i
    if left < len(A) and A[left] > A[largest]:
        largest = left
    if right < len(A) and A[right] > A[largest]:
        largest = right
    if largest != i:
        A[i], A[largest] = A[largest], A[i]
        max_heapify(A, largest)

def build_max_heap(A):
    for i in range(len(A) // 2, -1, -1):
        max_heapify(A, i) 
```

例子：

```
def ptree(A, i=0, indent=0):
    if i < len(A):
        print '  ' * indent, A[i]
        ptree(A, i * 2 + 1, indent + 1)
        ptree(A, i * 2 + 2, indent + 1)

A = range(9) 
build_max_heap(A)
ptree(A) 
```

结果：

```
 8
   7
     3
       1
       0
     4
   6
     5
     2 
```

如果你有问题就告诉我们。

2：

从技术上讲，python 中的迭代是一个重复调用某个对象的`next()`方法直到引发`StopIteration`异常的过程。拥有此`next`方法的对象称为迭代器。能够为调用代码提供 Iterator 的对象称为 Iterable。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:19:36.267

问题在这里：

```
if largest != int:
        listNew = swapWithinList(list, int, largest)
        listNew = maxHeapify(listNew, largest)
    else:
        return listNew 
```

如果 if 语句为假，则尝试返回 listNew，但此时 listNew 可能不存在（仅当 if 语句为真时才分配给它）。

一次迭代只是通过一个循环，或者一般来说，一次通过一些更大的东西。迭代器是遍历数据结构的对象，或者一次遍历一个元素。

# gwt - 是否有与 GWT 兼容的队列实现？

> ID：13142048
> 
> 赞同：4
> 
> 时间：2012-10-30T15:15:26.273
> 
> 标签：gwt

GWT (2.5) 模拟[AbstractQueue](http://docs.oracle.com/javase/6/docs/api/java/util/AbstractQueue.html)但不提供实现。[Google Guava](https://code.google.com/p/guava-libraries/) (13.0.1) 提供了[Queues](http://docs.guava-libraries.googlecode.com/git-history/v13.0.1/javadoc/com/google/common/collect/Queues.html)类，但它不是[GwtCompatible](http://docs.guava-libraries.googlecode.com/git-history/v13.0.1/javadoc/com/google/common/annotations/GwtCompatible.html)。

在我继续实现自己的 GWT 队列之前，我是否在某处缺少可用的实现？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-30T15:28:31.473

[LinkedList](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html)类由 GWT 模拟，实现了Queue[接口](http://docs.oracle.com/javase/6/docs/api/java/util/Queue.html)。GWT 模拟了所有的关键队列方法，包括`add()`and `remove()`，因此可以完美地用作队列。

# multithreading - Qt 线程停止 UI 响应

> ID：13142051
> 
> 赞同：0
> 
> 时间：2012-10-30T15:15:29.723
> 
> 标签：multithreading, qt

我想我可能误解了 Qt 线程中的几个概念，

在我的窗口类中，它是从 QWidget 派生的：

```
class Widget 
{
   Q_OBJECT
public:
   Widget::Widget (QObject *parent = 0) : QObject(parent)
   {
     moveToThread(&th); // still stuck
     connect (&th, SIGNAL(started()), SLOT(doWork())); 
     th.start();
   }
private:
   QThread th;
private slots:
  void doWork () 
  { 
     // hmm, this stuck the UI
     while (1) 
     { 
       qDebug() << "Sleeping"; 
     } 
  };
}; 
```

永远的循环卡住了 UI，它不应该，因为它是由 QThread 调用的。谁能指出这段代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:30:01.240

`Widget::dowork()`在主线程（运行 GUI）上执行，这就是它阻塞的原因。它被 QThread 调用并不重要。

在另一个线程上执行代码的正确方法是首先使用 将 QObject 实例移动到 QThread `QObject::moveToThread()`，然后将`started()`QThread 的信号连接到要执行的 QObject 实例的槽。

如果您想了解更多：[https ://www.qt.io/blog/2010/06/17/youre-doing-it-wrong](https://www.qt.io/blog/2010/06/17/youre-doing-it-wrong)

您的代码的另一个问题是您试图将 QWidget 派生的对象移动到另一个线程。这是不允许的。QWidget 实例必须保留在主线程上。相反，您应该从 QObject 继承。

代码的另一个问题是您在构造函数中执行此操作。在对象尚未完全构造时将其移动到另一个线程只是自找麻烦。

# c# - 从 VB 到 C# 的正则表达式（LIKE 到正则表达式）

> ID：13142052
> 
> 赞同：3
> 
> 时间：2012-10-30T15:15:30.883
> 
> 标签：c#, regex, vb.net

所以，VB6/VB.NET 有一个`Like`关键字，有点像正则表达式。

我知道这是在做什么，但我不是正则表达式的专家，希望有人能提供帮助（我想使用正则表达式而不是字符串特定的东西，如 IndexOf/get the last char）：

VB代码：

```
If (someDataStr Like "[*]??????????????8") Then
 ...
end if 
```

所以我专注于这个：

`"[*]??????????????8"`

就正则表达式而言，这将是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T15:24:35.697

根据 Damien_The_Unbeliever 的链接，我假设您的模式匹配一​​个 literal `*`、14 个任意字符，然后是一个 literal `8`。

那么这将是你的正则表达式：

```
@"^\*.{14}8$" 
```

请注意，`.`通常不会匹配换行符。如果需要，请设置该`SingleLline`选项。

```
Match match = Regex.Match(input, @"^\*.{14}8$", RegexOptions.Singleline)

if (match.Success)
{
    // string has valid format
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-21T19:09:57.907

基于 Martin Büttner 的回答，这就是我将 VB`Like`运算符转换为 C# 的方法`Regex`。由于`Like`Visual Studio 2013 中的运算符支持一些额外的正则表达式等功能，因此需要做一些额外的工作来转换模式。

```
// escape RegEx special characters
var pattern = Regex.Escape(likePattern);
// convert negative character lists into RegEx negative character classes
pattern = Regex.Replace(pattern, @"\\\[!(?<c>[^\]]*)\\\]", @"[^${c}]", RegexOptions.Compiled | RegexOptions.Singleline | RegexOptions.ExplicitCapture);
// convert positive character lists into RegEx positive character classes
pattern = Regex.Replace(pattern, @"\\\[(?<c>[^\]]*)\\\]", @"[${c}]", RegexOptions.Compiled | RegexOptions.Singleline | RegexOptions.ExplicitCapture);
// convert asterisks into RegEx pattern for zero or more characters
pattern = Regex.Replace(pattern, @"(?<!\[[^\]]*)\\*(?![^\]*\])", @".*", RegexOptions.Compiled | RegexOptions.Singleline | RegexOptions.ExplicitCapture);
// convert question marks into RegEx pattern for any single character
pattern = Regex.Replace(pattern, @"(?<!\[[^\]]*)\\?(?![^\]*\])", @".", RegexOptions.Compiled | RegexOptions.Singleline | RegexOptions.ExplicitCapture);
// convert hash/number sign into RegEx pattern for any single digit (0 - 9)
pattern = Regex.Replace(pattern, @"(?<!\[[^\]]*)#(?![^\]*\])", @"[0-9]", RegexOptions.Compiled | RegexOptions.Singleline | RegexOptions.ExplicitCapture);
// make pattern match whole string with RegEx start and end of string anchors
pattern = @"^" + pattern + @"$";

// perform "like" comparison
return Regex.IsMatch(input, pattern, RegexOptions.IgnoreCase | RegexOptions.Singleline); 
```

警告：此代码未经测试！

# xcode - 如何从一台 Mac 连接到同一网络中的另一台 Mac 的 SVN？

> ID：13142053
> 
> 赞同：1
> 
> 时间：2012-10-30T15:15:37.920
> 
> 标签：xcode, macos, svn

我已经在 Mac 机器上设置了一个 SVN 存储库，比如说 Mac1。在这台机器上，我可以像这样在 xcode 中本地访问它：file:///user/MyProject

我也这样做来添加用户： [如何在 SVN 中设置访问控制？](https://stackoverflow.com/questions/81361/how-to-setup-access-control-in-svn)

一切都在 Mac1 上运行。现在，在我同事的机器 Mac2 上，他也需要连接到 Mac1 上的存储库。我应该怎么办？

我可以使用 file://192.168.10.xxx/user/MyProject 或类似的东西吗？我必须设置网络服务器吗？（我们真的不希望流量通过http），我是否必须设置另一个不同的帐户信息？

谢谢

# php - 使用 PHP 在两个页面之间传递变量的最安全方法

> ID：13142054
> 
> 赞同：6
> 
> 时间：2012-10-30T15:15:40.133
> 
> 标签：php, security, variables

我需要一种以安全方式在两个页面之间传递变量的方法。

我知道我可以使用 POST / GET / Cookie / Session 或隐藏字段，但我认为这些方式都不够安全，因为：

get 可以在 url 中看到
cookies 是一个客户端，因此它可以从客户端
会话中更改，可以对抗 Session ID 劫持和...

现在我想知道有没有比这些方法更好的方法，如果没有这些方法，是安全传递变量的最佳方法；

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-30T15:18:00.817

会话是您可用的最安全的方法。

会话 id 重新生成将有助于防止会话劫持，但通过 https 的 SSL 将真正防止它。

顺便说一句：如果会话被劫持并且您正在向客户端显示用户数据，那么无论您如何将数据带到第二页，劫持者都会看到它。如果您仅在服务器端使用它，则劫机者将看不到它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T15:18:15.323

使用会话在页面之间传递变量值是最安全的

[`session_regenerate_id`](http://in2.php.net/session_regenerate_id)并在安全级别更改（例如登录）时重新生成会话 ID 。如果您愿意，您甚至可以在每个请求中重新生成会话 ID。

好读

[**PHP 安全指南：会话**](http://phpsec.org/projects/guide/4.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T15:40:17.083

由于会话是服务器端，它是传递变量和防止会话劫持的最安全方法，您可以在 php 手册中使用 session_regenerate_id 函数：http: [//php.net/manual/en/function.session-regenerate-id。 php](http://php.net/manual/en/function.session-regenerate-id.php)

但这并不意味着您总是使用会话来传递变量，您仍然可以使用 cookie，但在将数据存储到 cookie 之前对其进行加密。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T15:19:48.433

使用 GET 没有任何问题 - 只要它们被正确清理......你总是可以将 get 与参数的哈希结合起来以降低它被篡改的风险，同时使用会话来确保它们也是合法的.

# android - 为什么我不能运行 keytool.exe？

> ID：13142055
> 
> 赞同：-1
> 
> 时间：2012-10-30T15:15:40.853
> 
> 标签：android, md5, api-key

我开始 android 编程，但我找不到 api 密钥:( 我想在我的程序中找到显示地图的 apiKey。我将 debug.keystore 复制到 C 驱动器的 andoid 文件夹中，当我点击 jdk 文件夹中的 keytool.exe 时，这个快速关闭，我无法阅读页面中的消息。为什么？我应该为查找 api 密钥做其他工作吗？我阅读了[https://developers.google.com/maps/documentation/android/mapkey](https://developers.google.com/maps/documentation/android/mapkey)但我不明白什么是 MD5 ! :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:18:55.613

您需要从命令行运行“keytool”，并传入一对多的可用参数。它不是基于 GUI 的应用程序。尝试“keytool -h”查看可用参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:22:39.807

`keytool`是基于命令行的程序，您不能将其作为 GUI 应用程序运行。尝试打开 CMD 并使用：

```
keytool -list -alias <your_alias_name> -keystore <path_to_your_key.keystore> 
```

然后将要求您输入密钥和别名的密码。输入这些后，您将获得一个[MD5 哈希](http://en.wikipedia.org/wiki/MD5)作为输出。

# memcached - ServiceStack ICacheClient 增量不起作用

> ID：13142056
> 
> 赞同：5
> 
> 时间：2012-10-30T15:15:50.227
> 
> 标签：memcached, servicestack

我对 ServiceStack.CacheAccess.Memcached 有疑问。`MemcachedClientCache`. 该`Increment`方法没有按预期工作。

对于测试，我使用的是常规控制台应用程序和`ICacheClient`界面。

根据方法文档：

> 必须先将项目插入缓存，然后才能对其进行更改。
> 该项目必须作为`System.String`.
> 该操作仅适用于`System.UInt32values`，因此 -1 始终表示未找到该项目。

所以我们开始：

```
ICacheClient client = new MemcachedClientCache();
string key = "test";
bool result = client.Remove(key);
Console.WriteLine("{0} removed: {1}", key, result);

//The item must be inserted as a System.String.   
result = client.Add(key, "1");
Console.WriteLine("added {0}", result);

long v = client.Increment(key, 1);
Console.WriteLine("first increment : {0}", v);

string o = client.Get<string>(key);
Console.WriteLine("first read: {0}", o);

v = client.Increment(key, 1);
Console.WriteLine("second increment: {0}", v);

o = client.Get<string>(key);
Console.WriteLine("second read: {0}", o); 
```

结果 ：

*   测试已删除：真
*   添加真
*   第一个增量：0
*   初读：1
*   第二个增量：0
*   二读：1

如您所见，增量不起作用。

enyim 的配置：

```
<enyim.com>
  <memcached protocol="Binary">
    <servers>
      <!-- make sure you use the same ordering of nodes in every configuration you have -->
      <add address="memcached-dev1" 
            port="11211" />
    </servers>
    <socketPool minPoolSize="10" 
                maxPoolSize="100" 
                connectionTimeout="00:00:10" 
                deadTimeout="00:02:00" />
  </memcached>
</enyim.com> 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-31T21:56:14.017

您无法以这种方式读取计数器的值，在 Enyim 项目的一个已关闭问题中解释了原因（[此处](https://github.com/enyim/EnyimMemcached/issues/86)）。相反，只需将计数器增加 0。

```
var v = cacheClient.Increment(key, 0); 
```

# java - java创建一个在数组中搜索字长的类方法

> ID：13142059
> 
> 赞同：0
> 
> 时间：2012-10-30T15:15:56.347
> 
> 标签：java, arrays

所以我已经创建了一个搜索特定单词的类方法，但是（就像大多数时候我发现自己在这里！）我的大脑出现了故障，不知道如何修改它来做我需要的事情. 这是我到目前为止所得到的：

```
private static int findFourLetterWord(String[] strings, String key) {
   for (int i = 0; i < strings.length; i++)
      if (strings[i].equals(key))
      return i;
   return -1;
} 
```

所以这会在一个数组中搜索“key”，如果找到，则返回它的位置。我试图让它做的是在一个字符串数组中搜索它遇到的第一个 4 个字母单词并返回该单词。我会将第一个返回更改为`System.out.println(strings[i]);`我相信，但我不确定如何让它搜索它找到的第一个 4 个字母的单词。尝试使用一堆复杂的子字符串，但没有奏效。任何建议或指导都会很棒。先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:19:43.000

您当前的方法很接近；您只需要更改 for 循环中的条件以使用[`String#length()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#length%28%29)而不是等于键参数来检查 4 的长度。

```
private static String findFourLetterWord(String[] strings) {
    for (String str : strings) {
        if (str.length() == 4) {
            return str;
        }
    }
    return null;
} 
```

当您发现自己不确定哪些方法可以为您提供方便时，请不要忘记查阅[JavaDocs 。](http://docs.oracle.com/javase/7/docs/api/overview-summary.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T15:19:27.420

我理解你的问题吗？

```
private static String findFourLetterWord(String[] strings) {
   for (int i = 0; i < strings.length; i++)
      if (strings[i].length()==4)
          return strings[i];
   return null;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T15:20:53.440

使用`substring`函数获取键和字符串的前 4 个字符，如下所示：

```
 private static int FindFourLetterWord(String[] strings, String key) {
   //Assuming key length is 4 or more
   String keyWithFourChars = key.substring(0,4); 

   for (int i = 0; i < strings.length; i++){
     if(strings[i].length() > 3){
        if (strings[i].substring(0,4).eqauls(keyWithFourChars)){
         return i;
        }
      }
    }
    return -1;
 } 
```

如果您只想查找 4 个字符的字符串，则只需检查以下长度：在这种情况下，您不需要`key`作为参数传递。

```
 private static int FindFourLetterWord(String[] strings) {
   for (int i = 0; i < strings.length; i++){
       if(strings[i].length() == 4){
         return i;
       }
    }
    return -1;
 } 
```

# javascript - 如何识别 HTTP GET 请求是否由控制台/firebug/IE9 F12 发出？

> ID：13142062
> 
> 赞同：0
> 
> 时间：2012-10-30T15:16:02.417
> 
> 标签：javascript, internet-explorer-9, firebug, google-chrome-devtools

我想知道是否有一种方法可以识别对服务器的 HTTP 请求是通过以下方式发出的：

*   浏览器控制台
*   在客户端运行的 JavaScript 代码

我能够进行 API 调用来发送类似`getJSON`. 我还尝试通过浏览器控制台进行 Google Analytics 调用。

有没有办法找出是否通过控制台发出请求，如果是，我们可以在服务器上阻止它们吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:21:31.240

不，HTTP 请求是 HTTP 请求，无法判断来源是什么。

（此外，“浏览器控制台”只是触发“在客户端运行的 JavaScript 代码”的一种方式）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:23:14.843

检测到这一点的唯一方法是用户代理标头，但客户端可以[更改](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#setRequestHeader%28%29)标头。

# ios - 如何在ios6中卸载视图？

> ID：13142063
> 
> 赞同：1
> 
> 时间：2012-10-30T15:16:07.450
> 
> 标签：ios, xcode, uiview, ios6

如何在ios6中卸载视图？

在 ios6 中发布视图的最佳方式是什么  

```
previously used - (void) viewDidUnload 
```

但现在我很困惑

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T15:19:29.537

您可以将它们从他们的超级视图中删除：

```
 [view removeFromSuperview]; 
```

`viewDidUnload`是一种被称为卸载视图效果的方法；它不会使视图卸载。

糟糕，现在我意识到您的意思可能不同……也许您的问题是指`viewDidUnload`在 iOS6 下不再调用的事实，您想知道在收到内存警告时如何恢复内存。

在这种情况下，我认为唯一可用的选择是按照`didReceiveMemoryWarning`您过去在`viewDidUnload`.

# javascript - 导航到页面时触发“后退按钮”事件

> ID：13142067
> 
> 赞同：0
> 
> 时间：2012-10-30T15:16:24.410
> 
> 标签：javascript, android, cordova, jquery-mobile

我正在使用 jQM/Phonegap 并试图控制 Android 的后退按钮。这是我构建的函数的简化版本：

```
var currFunc = undefined;
function setButton () {
    var func = arguments[0];

    document.removeEventListener('backbutton', currFunc, false);
    currFunc = func;
    document.addEventListener('backbutton', currFunc, false);
} 
```

我现在调用`setButton()`每个`pagebeforeshow`事件来取消设置任何处理程序。在页面 B 上，我现在调用`setButton(function() { alert(1); });`. 首先，这似乎可行：页面 A 上没有任何反应，单击页面 B 上的按钮将导致警报。到现在为止还挺好。但是现在，当我回到页面 A 并单击一个让我再次进入页面 B 的按钮时，它已经触发了警报。

我很困惑。侦听器应该 a) 无论如何都未设置，并且 b) 仅在按下手机的后退按钮时触发，而不是在简单地在应用程序中导航时触发。

有没有人有这方面的信息或想法？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T20:01:32.240

仍然不知道为什么原始代码不起作用，但使用评论中提到的方法有效。

# c# - DateTime 解析复杂的字符串 C#

> ID：13142069
> 
> 赞同：6
> 
> 时间：2012-10-30T15:16:29.833
> 
> 标签：c#, datetime

我正在尝试使用以下格式将日期字符串解析为 DateTime 对象：

> 2012 年 10 月 30 日星期二 09:51:20 +0000

到目前为止，我尝试过的是 DateTime.ParseExact() 的许多不同变体。

我努力了：

```
DateTime.ParseExact("Mon, 29 Oct 2012 12:13:51 +0000", 
                    "ddd, dd MM yyyy hh':'mm':'ss zzz", 
                     CultureInfo.InvariantCulture); 
```

使用数千种不同的格式作为第二个参数，使用 null 而不是 InvarantCulture 作为第三个参数等等。我无法让它工作。我应该如何解析这样的字符串？

非常感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-30T15:20:07.450

怎么样

```
var s = "Tue, 30 Oct 2012 09:51:20 +0000";
DateTime.ParseExact(s, "ddd, dd MMM yyyy hh:mm:ss zzz", CultureInfo.InvariantCulture) 
```

* * *

月份 ( `Oct`) 实际上是`MMM`，不是`MM`，时间 ( `09:51:20`) 应该是`hh:mm:ss`而不是`hh':'mm':'ss`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T15:24:08.013

正确的解析是

```
DateTime.ParseExact("Mon, 29 Oct 2012 12:13:51 +0000", "ddd, dd MMM yyyy HH:mm:ss K", CultureInfo.InvariantCulture); 
```

看看[这里](https://stackoverflow.com/questions/3601636/parsing-a-strangely-formatted-datetime-anyone-fancy-stepping-up)

# c# - 如果 SqlDataAdapter 内部使用数据读取器，为什么人们说使用 SqlDataReader 更快？

> ID：13142070
> 
> 赞同：7
> 
> 时间：2012-10-30T15:16:28.850
> 
> 标签：c#, .net, design-patterns, ado.net

我一直在读到 SqlDataReaders 比 SqlDataAdapters 快得多，因为它们具有快进、只读、一次一行连接的特性，并且在填充 DataTable 对象（SqlDataAdapter.填充（数据表））。

然而，到处有人会提到“它可能不会影响你使用什么，因为 SqlDataAdapter 在内部使用数据读取器来填充它的表。” 如果这是真的，那么如果适配器通过使用内部数据读取器与数据库进行通信，它到底怎么会慢这么多呢？

我知道我可以设置一些测试并分析每个测试的性能，但我真正希望有人能够阐明所谓的性能差异，如果我们基本上以任何一种方式处理相同的过程。

我知道您通常会使用阅读器来创建强类型 POCO 列表，这与仅填充表格的数据适配器不同。但是，我的问题完全是关于两者之间性能差异的细节，而不是 O/RM 问题......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T15:27:33.923

如果您使用的是 DataReader，您可以在读取第一行时对某些信息做出反应，甚至可以忽略其余的读数。

如果您使用的是 DataAdapter，则必须首先加载整个表，*然后*读取第一行才能对相同的信息做出反应。

# c# - System.IO.Directory.Move(tempPath, newFolder) 抛出异常访问被拒绝

> ID：13142071
> 
> 赞同：1
> 
> 时间：2012-10-30T15:16:31.007
> 
> 标签：c#, windows, asp.net-mvc-3, rights

我正在尝试使用此将文件夹从一个目录移动到另一个目录

```
System.IO.Directory.Move(tempPath, newFolder); 
```

我是计算机上的管理员，所以我应该拥有完全访问权限。我无法弄清楚为什么每两次尝试一次就会出现此异常。

`Access to the path 'D:\<myDirectory>' is denied.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:19:21.167

仅仅因为您是管理员并不意味着您可以访问所有内容。您不一定可以访问的内容包括：

*   SYSTEM 拥有的不明确允许管理员的文件/目录（例如 C:\System Volume Information）
*   文件被其他进程锁定的“共享”设置阻止您访问

# ruby-on-rails - ruby rails 从位于目录中的多个部分文件中打印特定元素

> ID：13142076
> 
> 赞同：0
> 
> 时间：2012-10-30T15:16:38.590
> 
> 标签：ruby-on-rails, ruby, parsing, partials

我有一个充满部分的目录。我希望仅列出每个部分中的第一个 h1 标签。完成此任务的方法可能也可以修改为抓取其他元素。

现在我使用 ruby​​ 打开每个文件，打印出前几个字符，关闭文件，然后重复。我的 ruby​​ 文件解析技能限制了我。这是我目前拥有的代码：

```
 <% Dir["app/views/partials/show/*.html.erb"].each do |f1| %>
        <% aFile = File.open(f1, "r") %>
        <% if aFile %>
            <% content = aFile.sysread(20) %>
            <p><%= content %></p>
        <% else %>
            <%= "Unable to open file!" %>
        <% end %>
    <% end %> 
```

我还认为我要在内存中打开整个部分？想知道我是否可以阅读直到找到我的 h1 标签然后关闭文件并继续？同样，我只阅读前 20 个字符，因为我还没有掌握搜索第一个 h1 标签的方法。

我将在完成开放、解析、片段的工作时进行编辑......我感谢您提供的任何指导和指导。谢谢！

**编辑：** 根据下面的评论，可能有更好的方法来完成我的任务。因此，我提供了一些额外的背景知识来指导其他解决方案。

这是基于目录中的部分的幻灯片放映。幻灯片放映由导航元素控制，我想通过部分中的 h1 标签填充该导航元素。我不会在每次进行更改时手动输入这些内容！我希望最终用户只需将部分内容拖放到目录中（具有特定的名称约定和用于导航的 h1 标记描述），然后让幻灯片放映完成其他所有操作。

我可以在 h1 标签“forNavigation”和内容“sliderContent”上强加一个类，然后使用 jquery 创建一个后加载`<ul>`，但这似乎不正确。另外，它们都将成为同一个渲染 div 的一部分。

我想我不清楚为什么读取部分的前 50 个字符、复制 h1 标签中的内容并将其放入 a 不是最优雅的解决方案？

就像我说的那样，除了复制和打印第一个 h1 标签之间的内容之外，上面做了所有需要的事情......使用 xml 解析器或一些正则表达式就可以完成。我只是不擅长解析文件。

请让我知道解决此问题的其他方法。现在我仍然认为最好解析部分（有或没有渲染）并根据需要将我需要的东西放在我想要的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:46:11.920

部分并不意味着“解析”，而是要在其他部分和模板中呈现。如果您需要获取部分的一部分，您可能应该将该部分提取为进一步的部分，并在“列出”部分和“聚合”视图中使用该内部部分。

# c - 链表不通过递归调用传播

> ID：13142077
> 
> 赞同：3
> 
> 时间：2012-10-30T15:16:40.960
> 
> 标签：c, bison, yacc

涉及 yacc、bison 等的这个问题有很多开销，它本质上是构建一个用于计算字符串的关键元素的解析树。但是，所有这些都正常工作，我相当有信心，问题在于一个唠叨的链表。

正如我所提到的，我正在使用各种“计算器”，但这个计算器应该接受已存储在链接列表中的变量。像 (add 1 4) 这样的短语工作得很好，但棘手的部分是如果你尝试类似 ((let (firstvar 2)) (add firstvar 4)) 现在，它应该通过一个符号列表（1在这种情况下）并找到 firstvar 的值（在 add 语句之前使用 let 语句创建、实例化和分配）并将其放入链中。

话虽如此，问题是当我尝试将“symbolList”传递给各种操作数时，它会以奇怪和令人困惑的方式覆盖结构。

首先，来自 .h 的主要联合体：

```
typedef struct
{
    double value;
} NUMBER_AST_NODE;

typedef struct
{ 
    char *name;
} SYMBOL_AST_NODE;

typedef struct
{
   char *name;
   struct ast_node *op1;
   struct ast_node *op2;
} FUNCTION_AST_NODE;

typedef struct ast_symbol
{
    char *name; //symbol name
    struct ast_node *data;

    struct ast_symbol *next;
    struct ast_symbol *parent;
} AST_SYMBOL;

typedef struct ast_node
{
    AST_NODE_TYPE type;
    union
    {
        NUMBER_AST_NODE number;
        FUNCTION_AST_NODE function;
        SYMBOL_AST_NODE symbol;
    } data;

    AST_SYMBOL *symbolList;    
} AST_NODE; 
```

好的，现在，假设树已经部分创建，问题是“symbolList”仅附加到树的最高成员......所以我需要将它传递给孩子（即操作数 1 &操作数 2) 以便他们可以访问符号列表，从而能够正确翻译任何传递给其函数的变量。

所以，我正在做一个这样的递归调用：

```
void translate(AST_NODE *p)
{
  //recursive infix traversal.
  if(p->type == NUM_TYPE){
      printf("%6f",(double) p->data.number.value);
  }
  else if (p->type == SYM_TYPE){
      resolveSymbol(p->symbolList, p->data.symbol.name); //this goes and finds the variable, and it does it correctly IF it has the symbolList!
  }
  else if(p->type == FUNC_TYPE){
          printf("( ");

          p->data.function.op1->symbolList = p->symbolList; //passing the symbolList onward

          translate(p->data.function.op1);
          printf( " %c ",resolveOp(resolvdfunc)); //ignore this, it's just displaying the char like '+' for add

          p->data.function.op2->symbolList = p->symbolList; //passing the symbolList onward
          translate(p->data.function.op2);
          printf(" )");
    }
  }

   if (!p)
      return;
} 
```

好吧，举个例子。假设我注释掉了第二个操作数的 symbolList 传递。然后，像 ((let (a 2)) (add a 4)) 这样的语句就可以正常工作了。但是，显然，如果我尝试 ((let (a 2)) (add 4 a)) 它将不起作用，因为第二个操作数无法访问“a”变量。

问题是，目前，如果没有注释掉第二个传递的符号列表，它会覆盖我的第一个操作数，并且它无法再访问符号列表了！

我希望这是有道理的……这让我发疯了。

谢谢。

编辑：9:22 - 这是 resolveSymbol 代码（根据要求）......

```
void resolveSymbol(AST_SYMBOL *p, char *name)
{
    if (p == NULL)
        yyerror("No such symbol exists");
    else if (strcmp(p->name, name) == 0) {
        translate(p->data);
    }
    else
        resolveSymbol(p->next, name);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:38:22.573

可能与您的问题无关（但可能更容易解决），通常将参数作为参数传递给递归函数而不是将它们挂在不相关的数据结构上更有意义：

```
void translate(AST_NODE *p, AST_SYMBOL *symbols) {
  if(p->type == NUM_TYPE) {
    printf("%6f",(double) p->data.number.value);
  } else if (p->type == SYM_TYPE) {
    resolveSymbol(symbols, p->data.symbol.name);
  } else if(p->type == FUNC_TYPE) {
    printf("( ");
    translate(p->data.function.op1, symbols);
    printf( " %c ", resolveOp(resolvdfunc)); //ignore this, it's just displaying the char like '+' for add
    translate(p->data.function.op2, symbols);
    printf(" )");
  }
} 
```

这样您就可以完全摆脱 symbolList 字段，并且无需修改即可遍历 AST 数据结构。

# wcf-data-services - 通过app.config配置Odata服务

> ID：13142081
> 
> 赞同：1
> 
> 时间：2012-10-30T15:16:56.900
> 
> 标签：wcf-data-services, odata

我正在自托管 OData 应用程序。这目前涉及很多硬编码：在我的 DataService 类本身中：

```
public static void InitializeService(
           DataServiceConfiguration config)
        {
            // Provide read-only access to all entries and feeds. 
            config.SetEntitySetAccessRule(
               "*", EntitySetRights.AllRead);
            config.SetServiceOperationAccessRule("*", ServiceOperationRights.AllRead);

            config.UseVerboseErrors = true;
            config.DataServiceBehavior.MaxProtocolVersion = System.Data.Services.Common.DataServiceProtocolVersion.V2;
        } 
```

初始化时：

```
 Type servicetype = typeof(MessageDataService);
 Uri baseaddress = new Uri("http://localhost:8000/messageData");
 Uri[] baseaddresses = new Uri[] { baseaddress };
 using ( DataServiceHost dshost = new DataServiceHost(servicetype, baseaddresses))
 {
   dshost.Open();
   //blah
 } 
```

我认为这可以用“yuk”来充分概括。现在我可以通过`App.config`. 数据服务也有什么开箱即用的东西，还是我应该推出自己的配置类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T07:45:19.987

您可以在 app.config 中进行所有配置。只是有点尴尬……：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.serviceModel>
    <bindings>
      <webHttpBinding>
        <binding name="MyBindingName" >
          <security mode="Transport">
            <transport clientCredentialType="Windows" />
          </security>
        </binding>
      </webHttpBinding>
    </bindings>
    <services>
      <service name="{you service type name including the namespace i.e. myapplication.myservice}">
        <endpoint address="" binding="webHttpBinding" bindingConfiguration="MyBindingName" contract="System.Data.Services.IRequestHandler">
        </endpoint>
      </service>
    </services>
  </system.serviceModel>
</configuration> 
```

然后在您的代码中实例化没有任何特定 url 的主机。它会像往常一样从配置中选择它：

```
var host = new DataServiceHost(typeof(YourServiceType), new Uri[0]); 
```

有关详细答案，请参阅[此问题](https://stackoverflow.com/a/2543719/80941 "详细答案见这个问题")。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T20:43:49.833

WCF 数据服务当前不从配置文件中读取任何配置。所以滚动你自己的解决方案是要走的路。

# ruby-on-rails - gmaps4Rails - json 被返回为空

> ID：13142085
> 
> 赞同：3
> 
> 时间：2012-10-30T15:17:12.490
> 
> 标签：ruby-on-rails, gmaps4rails

我在我的应用程序中安装了 gmaps4rails。

与视图相关的东西似乎正在工作，因为出现了一个空的谷歌地图。所以我认为我安装正确。

我按照 github 页面上的快速入门：

我的控制器：

```
def map
    @businesses = Business.all
    @json = @businesses.to_gmaps4rails

    respond_to do |format|
      format.html
      format.json {render json:@businesses}
    end
  end 
```

我的观点：

```
=gmaps4rails(@json)
=@json 
```

我打印`@json`并意识到该值为空，即`[]`

我的 business.rb 模型：

```
class Business < ActiveRecord::Base
  belongs_to :city
  belongs_to :category
  has_many :reviews

  attr_accessible :address, :description, :name, :phone, :urbanization, :url, :city_id

  include FriendlyId
  friendly_id :name, :use => :slugged

  acts_as_gmappable

  def gmaps4rails_address
    # "#{self.address}, #{self.urbanization}, #{self.city.name}"
    "619 Johnson Street, Kingston, ON"
  end
end 
```

我硬编码了地址以进行测试...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T21:58:18.300

出于性能考虑，Gmaps4rails 不会即时进行地理编码。

`to_gmaps4rails`如果对象没有纬度或经度，则返回空 json。

您应该预处理您的对象（只需保存它们）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T20:15:39.370

如果您需要为所有对象添加经度和纬度，您可以在 rails 控制台中运行它以获取所有坐标。

```
Venue.all.each do |venue|
  geo_data = Gmaps4rails.geocode(venue.gmaps4rails_address)
  venue.update_attributes(latitude: geo_data[0][:lat], longitude: geo_data[0][:lng])
  sleep(1)
end 
```

# google-app-engine - Google App Engine 分配实体组/父键，唯一约束

> ID：13142088
> 
> 赞同：1
> 
> 时间：2012-10-30T15:17:19.100
> 
> 标签：google-app-engine, unique-constraint, entity-groups

我有一种“客户”。当即将插入新的“客户”时，我想运行一个锁定整个 Kind 的事务。事务将首先查询以检查新的“客户”名称是否不存在，然后事务的第二部分在未找到匹配项时运行插入。通过这种方式，我强制执行唯一约束（并将操作限制为每秒大约 1 次插入）。

将我的所有“客户”实体放在同一个实体组中，我不满意的解决方案是创建一个名为“EntityGroups”的种类，其中包含一条名为“CustomersGroup”的记录。每次都将这一记录用作新创建的“客户”实体的父级，从而将整个种类分组到一个实体组中。

我的问题是：我担心使用诸如“客户组”之类的虚拟记录，因为如果发生任何事情并且丢失或删除，我无法将任何新的“客户”实体分配给同一组！我想最好为每个“客户”实体的父级分配一个静态的任意父级，例如“1111111”？我认为术语是“虚拟根实体”，我该怎么做？

请就我如何最好地处理这个问题提供任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T16:30:34.283

为什么不使用：NDB 的 get_or_insert：以事务方式检索现有实体或创建新实体。

[https://developers.google.com/appengine/docs/python/ndb/modelclass#Model_get_or_insert](https://developers.google.com/appengine/docs/python/ndb/modelclass#Model_get_or_insert)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T18:31:49.197

您的`CustomerGroup`记录**不需要存在**就可以作为父母。只需手动创建它的键并将其作为父项分配给相关记录。

如果它不存在，您不必担心它会被删除！

当您创建一个模型并将另一个模型设置为其父模型时，系统不会检查（也不需要）该模型是否确实存在。

例如：

```
rev_key = ndb.Key('CustomerGroup', '11111', 'Customer', 'New_Customer_Name') 
```

然而，键为：的模型`('CustomerGroup', '11111')`实际上并不存在，但它仍然可以在祖先链中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T20:27:08.853

GrantsV，您可以通过为每个唯一约束创建代理实体并使用跨组事务通过正常写入提交约束来实现此目的。

```
class UniqueConstraint(db.Model):
  # Consider adding a reference to the owner of the constraint.
  @db.transactional(propagation=db.MANDATORY, xg=True)
  @classmethod
  def reserve(cls, kind, property, value):
    key = cls.__get_key(kind, property, value)
    if db.get(key):
      raise Exception  # Already exists
    cls(key=key).put()

  @db.transactional(propagation=db.MANDATORY, xg=True)
  @classmethod
  def release(cls, kind, property, value):
    db.delete(cls.__get_key(kind, property, value))

  @classmethod
  def __get_key(cls, kind, property, value):
    # Consider using a larger entity group.
    return db.Key.from_path(cls.kind(), '%s:%s:%s' % (kind, property, value))
    # To restrict to 1 insert per second per kind, use:
    # return db.Key.from_path(cls.kind(), kind, cls.kind(), '%s:%s' % (property, value)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T15:44:11.370

您可以创建一个父实体，如下所示：

```
class CustomerParent(ndb.Model):
    pass 
```

然后你实例化并存储你的父实体：

```
customers_parent = CustomerParent()
customers_parent.put() 
```

最后，当您创建所有客户实体时，指定父实体：

```
a_customer = Customer(parent=customers_parent.key, ...)
a_customer.put() 
```

希望这可以帮助！

# c++ - SDL 图像不显示

> ID：13142091
> 
> 赞同：2
> 
> 时间：2012-10-30T15:17:23.860
> 
> 标签：c++, sdl

我目前正在尝试创建一个如下所示的按钮类。

```
void Button::apply_image(std::string path) {

    SDL_Surface* loaded_image = NULL;
    loaded_image = IMG_Load(path.c_str());
    m_button_image = SDL_DisplayFormat(loaded_image);
    SDL_FreeSurface(loaded_image);

}

void Button::show(SDL_Surface* screen) {
    SDL_BlitSurface(m_button_image, NULL, screen, &m_box);
} 
```

使用该类时，我执行以下操作：

```
Button button1(0,0,50,50);
button1.apply_image("images/cards/1.png");

SDL_Surface* screen = NULL;

screen = SDL_SetVideoMode(640,480,32,SDL_SWSURFACE);
SDL_WM_SetCaption("House Of Cards", NULL);

button1.show(screen);
SDL_Flip(screen); 
```

我的问题是，当我使用时不显示图像`SDL_DisplayFormat(loaded_image);` 但是当我摆脱那条线和`SDL_FreeSurface(loaded_image);`. 然后我更改`loaded_image = IMG_load(path.c_str());`为`m_button_image = IMG_Load(path.c_str());`图像将显示。我是不是做错了什么，因为路径显然是正确的，因为当我不调用 DisplayFormat() 时图像会显示。通过使用gdb，m_button_image 为NULL，我不明白为什么，因为gdb 还显示loaded_image 指向一个SDL_Surface*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:42:14.140

所以我弄清楚了问题所在。我在初始化屏幕之前调用了 SDL_DisplayFormat。因为我的函数顺序错误，所以 SDL_DisplayFormat 没有将图像转换为的表面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:37:38.413

来自[http://sdl.beuc.net/sdl.wiki/SDL_DisplayFormat](http://sdl.beuc.net/sdl.wiki/SDL_DisplayFormat)：'如果转换失败或内存不足，则返回 NULL'

所以看起来对 SDL_DisplayFormat 的调用由于某种原因失败了，在调用 SDL_DisplayFormat 之后检查 m_button_image==NULL 可能很有用，如果它是 NULL 则使用 SDL_GetError() 查看错误是什么

如果那没有帮助，那么我不确定会发生什么，尽管您可以通过将未转换的图像blitting到显示格式的表面并将其用作图像来进行较慢的转换（几乎相同，但更多令人费解，实际上只是避免调用 SDL_DisplayFormat）

# macos - 使用 NSSharingService 定义邮件主题

> ID：13142093
> 
> 赞同：6
> 
> 时间：2012-10-30T15:17:32.407
> 
> 标签：macos, cocoa, email, osx-mountain-lion, sharing

您如何定义由 NSSharingService 组成的 Mail 消息的主题？

我已经通过[NSSharingService 类参考](https://developer.apple.com/library/mac/#documentation/AppKit/Reference/NSSharingService_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40012270)，但没有看到它在任何地方定义。以下成功启动邮件应用程序，但主题只是与文本一起被推入邮件正文。

```
NSAttributedString *text = [self.noteSynopsisView attributedString];
NSString *subject = @"My Subject";
NSArray *shareItems = [NSArray arrayWithObjects:text, subject, nil];
NSSharingServicePicker *sharingServicePicker = [[NSSharingServicePicker alloc] initWithItems:shareItems];
sharingServicePicker.delegate = self;
[sharingServicePicker showRelativeToRect:[self.shareButton bounds] ofView:self.shareButton preferredEdge:NSMaxYEdge]; 
```

在 iOS 中，您通常会执行以下操作来为 MailComposer 定义主题

```
[sharingServicePicker setSubject:@"My Subject"]; 
```

但是SharingServicePicker 不支持setSubject。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-28T11:22:59.973

从 OS X 10.9 开始，您可以使用`NSSharingService`一个属性。[`subject`](https://developer.apple.com/library/mac/documentation/AppKit/Reference/NSSharingService_Class/Reference/Reference.html#//apple_ref/occ/instp/NSSharingService/subject)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-01T17:50:42.677

实现下一个方法：

```
-(id<NSSharingServiceDelegate>)sharingServicePicker:(NSSharingServicePicker *)sharingServicePicker delegateForSharingService:(NSSharingService *)sharingService{
    sharingService.subject=@"Subject";
    return self;
} 
```

# android - 如何更改我的 Android 应用程序中所有文本的默认颜色？

> ID：13142098
> 
> 赞同：19
> 
> 时间：2012-10-30T15:17:51.927
> 
> 标签：android, colors, android-edittext, android-button, android-theme

我想更改我的应用程序中的所有颜色文本。所以我写了这段代码，并在清单中设置了我的主题：

```
<style name="AppTheme" parent="android:Theme.Holo.Light.DarkActionBar">
    <item name="android:textColor">@color/white</item>
</style> 
```

但只有 TextView 文本是白色的。我也希望 Button 和 EditText 也是白色的。

谁能帮我？先感谢您。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-30T15:31:41.093

你的主题：

```
 <style name="AppTheme" parent="android:Theme.Holo.Light.DarkActionBar">
     <item name="android:textColor">@color/white</item>
     <item name="android:buttonStyle">@style/ButtonTheme</item>
  </style> 
```

这就是设置按钮主题的方法：

```
<style name="ButtonTheme" parent="android:style/Widget.Button">
     <item name="android:textColor">@color/white</item>
</style> 
```

并且还可以使用 EditTexts 等执行此操作。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-10-30T15:34:26.983

我认为大多数小部件样式都建立在这些基础之上：

```
 <item name="android:textColorPrimary">@android:color/primary_text_dark</item>
    <item name="android:textColorSecondary">@android:color/secondary_text_dark</item>
    <item name="android:textColorTertiary">@android:color/tertiary_text_dark</item>
    <item name="android:textColorPrimaryInverse">@android:color/primary_text_light</item>
    <item name="android:textColorSecondaryInverse">@android:color/secondary_text_light</item>
    <item name="android:textColorTertiaryInverse">@android:color/tertiary_text_light</item>
    <item name="android:textColorPrimaryDisableOnly">@android:color/primary_text_dark_disable_only</item>
    <item name="android:textColorPrimaryInverseDisableOnly">@android:color/primary_text_light_disable_only</item>
    <item name="android:textColorPrimaryNoDisable">@android:color/primary_text_dark_nodisable</item>
    <item name="android:textColorSecondaryNoDisable">@android:color/secondary_text_dark_nodisable</item>
    <item name="android:textColorPrimaryInverseNoDisable">@android:color/primary_text_light_nodisable</item>
    <item name="android:textColorSecondaryInverseNoDisable">@android:color/secondary_text_light_nodisable</item>
    <item name="android:textColorHint">@android:color/hint_foreground_dark</item>
    <item name="android:textColorHintInverse">@android:color/hint_foreground_light</item>
    <item name="android:textColorSearchUrl">@android:color/search_url_text</item> 
```

根据需要覆盖这些值。

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-10-30T15:31:06.323

为按钮文本分配颜色

```
<Button android:textColor="#FFFFFF"></Button> 
```

# c# - 充分利用 .NET 任务并行库

> ID：13142099
> 
> 赞同：2
> 
> 时间：2012-10-30T15:17:57.230
> 
> 标签：c#, .net, performance, task-parallel-library

**问题 1。**

*使用 Parallel.For 和 Parallel.ForEach 是否更适合处理有序或无序的任务？*

我问的原因是我最近更新了一个串行循环，其中 StringBuilder 用于根据各种参数生成 SQL 语句。结果是，与使用标准 foreach 循环相比，SQL 有点混乱（以至于它包含语法错误），因此我的直觉是 TPL 不适合执行数据必须出现在特定的顺序。

**问题2。**

*TPL 是否自动使用我必须在执行之前提供任何东西的多核架构？*

我提出这个问题的原因与我之前提出的一个与 TPL 操作的性能分析有关的问题有关。对这个问题的回答让我意识到，TPL 并不总是比标准串行循环更有效，因为应用程序可能无法访问多个内核，因此创建额外线程和循环的开销会导致性能下降到一个标准的串行环路。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:26:50.760

*我的直觉是 TPL 不适合执行数据必须以特定顺序出现的任务。*

正确的。如果您期望事情井井有条，那么您可能会对“并行化”循环时会发生什么产生误解。

*TPL 是否自动使用我必须在执行之前提供任何东西的多核架构？*

请参阅 msdn 杂志上的以下文章：http: [//msdn.microsoft.com/en-us/magazine/cc163340.aspx](http://msdn.microsoft.com/en-us/magazine/cc163340.aspx)

> 使用该库，您可以方便地在现有顺序代码中表达潜在的并行性，其中公开的并行任务将在所有可用处理器上同时运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:27:07.673

1.  如果必须对结果进行排序，那么为了使循环并行化，您需要能够以任何顺序执行实际工作，然后对结果进行排序。这可能会或可能不会比首先按顺序执行工作更有效，具体取决于情况。如果并行化可以按任何顺序完成的工作的好处大于排序结果的成本，那么它就是净收益。如果该任务不够复杂，您的硬件不允许大量并行化，或者如果它不能很好地并行化（即，由于数据依赖性，您有很多等待时间），那么对结果进行排序可能需要更多时间时间比你从并行化循环中获得的时间要长（或者更糟糕的是，即使没有排序，并行化循环也需要更长的时间，见问题二），所以你不应该并行化它。

    请注意，如果实际工作单元需要按特定顺序运行，而不是只需要按特定顺序运行结果，那么您要么无法并行化它，要么无法并行化它几乎同样有效。如果您没有正确同步对共享资源的访问，那么您实际上会得到错误的结果（就像您的情况一样）。为此，您需要记住，如果您实际上无法得出正确的结果，那么性能优化将毫无意义。

2.  使用 TPL，您真的不需要太担心您的硬件。您无需显式添加或限制任务。虽然有几种方法*可以*做到，但几乎任何时候你做这样的事情都会损害性能。当你做这样的事情时，你是在给 TPL*添加*限制，所以它不能做它想做的事。通常它比你更清楚。

    您还谈到了这里的另一点，那就是并行化循环通常需要更长的时间（您只是没有给出导致这种行为的可能原因）。通常需要完成的实际工作非常小，以至于创建线程、管理线程、处理上下文转换和根据需要同步数据的工作可能比并行工作所获得的工作要多。这就是为什么在决定并行化某些工作以确保它真正从中受益时实际进行大量测试很重要的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T15:25:15.500

在第 1 点，如果使用 TPL，您不知道哪个任务运行的顺序。这就是并行与顺序的美妙之处。有一些方法可以控制事物的顺序，但是你可能会失去并行的好处。

On 2：TPL 使用开箱即用的多核。但是使用多个线程确实总是有开销。调度程序的负载增加，线程（上下文）切换不是免费的。为了保持数据同步以避免竞争条件，您可能需要一些锁定机制，这也会增加开销。

使用 TPL 制作快速并行算法变得容易得多，但仍然是某种艺术。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T15:27:11.570

1.  *对于无序列表来说，这并没有好坏*之分*-*您在 #1 中的问题是您对 a 有共享依赖关系，这就是并行查询失败的原因。*TPL 在独立*的工作单元上表现出色。即使这样，您也可以使用一些简单的技巧来强制评估并行查询，并在并行操作全部完成后保持结果的原始顺序。*`StringBuilder`*

***   TPL 和 PLINQ 在技术上是截然不同的东西。PLINQ 使用 TPL 来实现它的目标。也就是说，PLINQ 尝试检查您的体系结构并尽其所能构建集合的执行。TPL 只是任务架构的包装器。由您决定创建任务的开销（类似于 1MB 内存）以及执行任务的上下文切换开销是否大于简单地串行运行任务。** 

 *** * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T15:44:11.380

显然，TPL 不是构建像查询这样的有序集的好工具。

如果您有一系列任务要对一组项目执行，那么您可以使用 BlockingCollection。这些任务可以并行执行，但保持集合的顺序。

[BlockingCollection 类](http://msdn.microsoft.com/en-us/library/dd267312.aspx)**

# actionscript-3 - flash：从一半播放电影

> ID：13142100
> 
> 赞同：1
> 
> 时间：2012-10-30T15:17:58.303
> 
> 标签：actionscript-3, flash, h.264

是否可以在中途播放 MP4/H.264 电影？

目前无法弄清楚如何寻找尚未缓冲的时间。反正有没有让闪光灯开始缓冲到电影的一半？

编辑：

moov atom 已经设置在 MP4 文件的开头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:02:15.917

使用**伪流**

通常你需要使用一个成本为$$$的流媒体服务器，但你可以使用伪流媒体。

伪流使用服务器端脚本/模块，您可以在其中让服务器从您想要开始的点开始对电影进行切片并将其包装为 mp4。

[使用标准 HTTP 服务器流式传输您的视频](http://flash.flowplayer.org/plugins/streaming/pseudostreaming.html)

[伪流（另一篇文章）](http://codeblog.palos.ro/2008/11/13/pseudo-streaming-mp4h264-video-from-php/)

哦，是的，我忘记了 red5，如下面的评论中提到的。这是用于真正流媒体的免费媒体服务器选项。

[red5.org](http://www.red5.org/)

# android - 在android中的facebook墙上显示资源文件夹中的图像

> ID：13142102
> 
> 赞同：-1
> 
> 时间：2012-10-30T15:18:05.530
> 
> 标签：android

我正在尝试将我的资源文件夹中的图像发布到 Facebook 墙上。一切正常。如果我使用图像的 URL，它会发布在我的 Facebook 墙上。我想知道的是如何将我的资源文件夹中的图像保存到 facebook 墙上。这是我的代码片段。任何帮助将不胜感激。

```
Bundle params = new Bundle();
    Context ctx = null;
    @SuppressWarnings("null")
    Bitmap bitmap = BitmapFactory.decodeResource(ctx.getResources(),R.drawable.bestbuy_deal);
    ByteArrayOutputStream stream = new ByteArrayOutputStream();
    bitmap.compress(Bitmap.CompressFormat.JPEG, 100, stream);
    byte[] bitMapData = stream.toByteArray();
    params.putString("name","ICE App");
    params.putString("caption", "Bestbuy Deal for SONY Action Cam");
    params.putString("description", "Checkout SONY ICE For exciting deals!!");
    params.putString("link", "http://www.sony.com");
    params.putByteArray("picture", bitMapData);
//  params.putString("picture", "R.drawable.sony");

    facebook.dialog(this, "me/feed",params, new DialogListener() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:37:56.197

根据[Facebook API 文档](https://developers.facebook.com/docs/reference/dialogs/feed/)，“图片”参数必须是图片的 URL，而不是字节数组。我想这是因为 facebook 对话框使用 a`WebView`来显示提要帖子，因此图像必须在网络上可用。

您可以尝试使用[本地资源 URI](http://androidbook.blogspot.com/2009/08/referring-to-android-resources-using.html)，但这可能无法完全正常工作，因为 Facebook API 需要足够聪明才能从本地 URI 中提取数据并将其放在自己的服务器上。不过，我很想知道它是否有效！

# xerces - 转码功能无法转换希伯来语字符串

> ID：13142113
> 
> 赞同：1
> 
> 时间：2012-10-30T15:18:32.050
> 
> 标签：xerces

我有两台机器具有相同的本地页面设置。
在一台机器上，该`transcode`函数转换希伯来语字符串，而在另一台机器上，它在转换时返回一个空字符串。

有任何想法吗？

# c# - 在 SQL Server 身份验证中执行存储过程所需的角色

> ID：13142114
> 
> 赞同：3
> 
> 时间：2012-10-30T15:18:34.753
> 
> 标签：c#, .net, sql-server

我需要从 C# 应用程序连接到 SQL Server 2008 R2 数据库。我需要使用 SQL Server 身份验证进行连接。

用户需要哪些**角色**和架构，以便用户能够创建/执行存储过程？

注意：存储过程将在 dbo 模式中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T16:30:12.630

Permissions for creating and executing procedures are documented under [`CREATE PROCEDURE`](http://msdn.microsoft.com/en-us/library/ms187926%28v=sql.105%29.aspx) and [`EXECUTE`](http://msdn.microsoft.com/en-us/library/ms188332%28v=sql.105%29.aspx), respectively.

One important consideration is that users [do not need](http://msdn.microsoft.com/en-us/library/ms191436%28v=sql.105%29.aspx) to have permissions on the objects referenced in the procedure. You can read this in the documentation, but it's faster to test it yourself:

```
create table dbo.TestTable (col1 int)
go

create procedure dbo.TestProc
as select col1 from dbo.TestTable
go

grant execute on dbo.TestProc to UserWithNoPermissions
go

execute as user = 'UserWithNoPermissions';

-- this gives error 229 (SELECT permission denied)
select * from dbo.TestTable;

-- this works
execute dbo.TestProc;

revert; 
```

Note that there are some exceptions: dynamic SQL executes in its own scope, so if your procedure uses it then the executing user will indeed need permission on the underlying objects.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T15:35:13.777

如果您想更细致地授予角色权限，请在“安全”文件夹（数据库下）下，您可以配置对给定 stroed proc 的执行权限。

即，在管理工作室的对象资源管理器中，[Database] -> Security -> [YourRole] -> Rightclick for properties -> Securables 部分

在这里，您可以添加特定的对象类型及其权限等。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T15:24:35.407

这取决于在存储过程中执行的操作。

如果您只是执行`SELECT`语句，则该`db_datareader`角色应该适合执行您的存储过程。`db_datawriter`是有资格创建它们的角色。

# jquery - 如何使用 JQuery 克隆包含没有事件的数据的元素

> ID：13142118
> 
> 赞同：20
> 
> 时间：2012-10-30T15:18:49.570
> 
> 标签：jquery

我想`<select>`用它的数据属性克隆一个标签，但没有它的事件。

在[JQuery Official .clone() api](http://api.jquery.com/clone/)之后，我知道我可以通过调用克隆没有数据和事件 `$('#grolsh').clone()`，或者执行

`$('#grolsh').clone(true)`这将复制数据和事件。

我想保留数据但清除与原始项目关联的事件。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-30T15:19:36.063

从 1.7 版开始，[`off()`](http://api.jquery.com/off/)是解除绑定的首选方法：

```
$('#grolsh').clone(true).off(); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-30T15:23:59.117

只需使用

`$('#grolsh').clone();`//**复制元素结构**

`$('#grolsh').clone(true)`//**复制数据和事件以及结构**

`$('#grolsh').clone(true).off()`//**复制数据和事件并删除处理程序**

使用;绑定`.on()`和删除的事件`.off()`

使用;绑定`.bind()`和删除的事件`.unbind()`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T15:18:49.570

通过添加**[.off()](http://api.jquery.com/off/)**：

```
$('#grolsh').clone(true)
    .attr({'id': 'newGrolsh'})
    .off()
    .appendTo('#target'); 
```

**更新：** 正如 Adrian 所建议的， **.off**将是比**.unbind更好的解决方案**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-02T05:06:09.620

从 jQuery 版本 1.5 开始，您可以传递第二个参数（参见：[.clone( [withDataAndEvents ] [, deepWithDataAndEvents ] )](http://api.jquery.com/clone/#clone-withDataAndEvents-deepWithDataAndEvents)）而不是复制事件处理程序：

```
$('#grolsh').clone(true,false); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-14T22:00:39.723

如果您真的只想复制该`.data()`方法附加的数据，**请不要滥用事件（取消）绑定**，只需执行以下操作：

```
var $original = $(".originalSelector");
var $clone = $original.clone().data( $original.data() ); 
```

因为当您将对象传递给`.data()`方法时，它会用它扩展当前数据。

**！重要的提示！**
如果您要使用存储 DOM 引用并使用它的东西，例如**jQuery UI 可拖动**等...
=> 仅用于“纯”数据/基本类型，则不能这样做

# iphone - 在 UICollectionView 中设置边框

> ID：13142124
> 
> 赞同：12
> 
> 时间：2012-10-30T15:19:08.217
> 
> 标签：iphone, objective-c, ios

这是我第一次想创建一个 UICollectionView。这就是我希望它的样子：

![在此处输入图像描述](../Images/06f6ff0ef65afb87c572c3b43d380aec.png)

我阅读了一些教程，我知道它是如何工作的。正如您在图像中看到的那样，UICollection 单元格具有从上、下、左和右的边框。你知道如何在 Collection View 中设置这些边框吗？

如您所见，其中两个项目是用红色选择的。UICollectionView 中是否可以有多个选定项目？如果是的话，请给我一些教程。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-04T00:09:06.340

这里的小示例项目：[https ://github.com/erikt/ETMultiSelect](https://github.com/erikt/ETMultiSelect)

首先，您必须能够在`UICollectionView`. 这是通过在集合视图上设置`allowsMultipleSelection`属性来完成的。`YES`

视图控制器看起来像这样：

```
#import "ETViewController.h"
#import "ETCellView.h"

@implementation ETViewController

static NSString *cellIdentifier = @"cvCell";

- (void)viewDidLoad {
    [super viewDidLoad];

    // Register our custom collection view cell
    [self.collectionView registerClass:ETCellView.class forCellWithReuseIdentifier:cellIdentifier];

    // Make it possible to select multiple cells
    self.collectionView.allowsMultipleSelection = YES;
}

#pragma mark - UICollectionViewDataSource
- (NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView {
    return 1;
}

- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section {
    return 10;
}

#pragma mark - UICollectionViewDelegate
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {
    ETCellView *cell = [collectionView dequeueReusableCellWithReuseIdentifier:cellIdentifier forIndexPath:indexPath];
    return cell;
}

@end 
```

由`UICollectionViewCell`几个视图组成。它有一个内容视图、一个背景视图和一个选定的背景视图。

有很多方法可以实现与您的图片类似的效果，但我在选定的背景图层上设置了边框，并将子视图添加到插入的内容视图中，以便背景边框可见：

```
#import "ETCellView.h"
#import <QuartzCore/QuartzCore.h>

@implementation ETCellView

- (id)initWithFrame:(CGRect)frame {
    self = [super initWithFrame:frame];
    if (self) {
        self.restorationIdentifier = @"cvCell";
        self.backgroundColor = [UIColor clearColor];
        self.autoresizingMask = UIViewAutoresizingNone;

        CGFloat borderWidth = 3.0f;
        UIView *bgView = [[UIView alloc] initWithFrame:frame];
        bgView.layer.borderColor = [UIColor redColor].CGColor;
        bgView.layer.borderWidth = borderWidth;
        self.selectedBackgroundView = bgView;

        CGRect myContentRect = CGRectInset(self.contentView.bounds, borderWidth, borderWidth);

         UIView *myContentView = [[UIView alloc] initWithFrame:myContentRect];
         myContentView.backgroundColor = [UIColor whiteColor];
         myContentView.layer.borderColor = [UIColor colorWithWhite:0.5f alpha:1.0f].CGColor;
         myContentView.layer.borderWidth = borderWidth;
         [self.contentView addSubview:myContentView];
     }
     return self;
}

@end 
```

结果是这样的：

![iPhone 屏幕截图](../Images/f05d7aebb805a89fd977c18774eb97c1.png)

克隆并使用[示例项目](https://github.com/erikt/ETMultiSelect)。

在实际项目中，您可能希望通过将选定的数据模型实体添加到协议方法`NSMutableArray`中的某个结构（如 a ）来跟踪用户在视图控制器中选择的内容。`– collectionView:didSelectItemAtIndexPath:``UICollectionViewDelegate`

# cookies - 永久更改 cookie 的路径

> ID：13142126
> 
> 赞同：-1
> 
> 时间：2012-10-30T15:19:11.227
> 
> 标签：cookies, tomcat6

如果我想对我的网站的 cookie-path 值进行永久性更改，我可以在哪里进行更改。将在 context.xml 或 web.xml 中，还是仅使用 newCookie.setPath() 方法？服务器是Tomcat 6.0。我确实在网上查了一下，但没有找到任何东西。

只是会话跟踪存在一些问题，管理员认为这需要将我的会话 cookie 的路径从 /site-folder 更改为 /。他错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T03:56:31.160

这可能不是什么好的编程技巧，但要更改 sessioncookiepath 值，web-app>METAINF>context.xml 文件就可以了。特别是我的问题，放置以下代码有帮助： Context sessionCookiePath="" 这可能是由于我的网站结构。

# javascript - Kinetic JS func不是返回对象

> ID：13142131
> 
> 赞同：1
> 
> 时间：2012-10-30T15:19:23.783
> 
> 标签：javascript

```
function create(x,y,imagePath,imageWidth,imageHeight) {

return new Kinetic.QImage({
        x: x,
        y: y,
        image: images.Grid,
        width: imageWidth,
        height: imageHeight,
});

}

var a = create(100,100,images.Grid,96,96); 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:24:20.523

看起来您收到有关名为 images 的未定义变量的错误...

而是这样做：

```
function create(x,y,images,imageWidth,imageHeight) {

return new Kinetic.QImage({
    x: x,
    y: y,
    image: images.Grid,
    width: imageWidth,
    height: imageHeight,
});

}

var a = create(100,100,images,96,96); 
```

# javascript - 从本地运行的 JS 访问文件

> ID：13142132
> 
> 赞同：0
> 
> 时间：2012-10-30T15:19:25.653
> 
> 标签：javascript, jquery, ajax, http, google-chrome

我需要从 JS 加载一个简单的 .CSV 文件（这不是这里的问题），但“脚本”需要是可移植的（我将把它用作比赛的屏幕），并且分数数据将插入 CSV , JS 将根据 CSV 更新它的数据。

但我的问题是：我需要在没有 apache 或服务器的情况下运行它，因为我无法让使用它的人拥有 apache 和 Internet ......它需要从一个文件夹中打开（只是一个 HTML与 JS，以及与 .CSV 位于同一文件夹中的文件）

当我尝试从 jQuery (`$.get(..., ..., "jsonp")`和`$.get()`) 访问文件时，Chrome 输出此错误：

`XMLHttpRequest cannot load file:PATHTOTHEFILE Origin null is not allowed by Access-Control-Allow-Origin.`

发生这种情况是因为浏览器阻止了它的内容（出于安全原因）。

我该如何“处理”这个问题，或者您知道更好的解决方案，以保存一些简单的数据并从 JS 读取它而不会出现安全问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:23:22.737

您需要将 --allow-file-access-from-files 添加到 chrome 启动命令行

制作一个 BAT 文件并让您的用户单击该文件以启动您的应用程序

```
%LOCALAPPDATA%\Google\Chrome\Application\chrome.exe ^
--allow-file-access-from-files ^
http://bing.co.uk 
```

将 http:// 换成你的文件 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T03:36:26.280

您可以使用 html5 FileReader。但是这样你必须选择文件。

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>
<label for="files">Path to file: </label><input type="file" id="files" name="files[]"/>
<script>
function handleFileSelect(evt) {
        var files = evt.target.files;
        var f;
        for (var i = 0; f = files[i]; i++) {
            if (!f.type.match('text.*')) {
                continue;
            }
            var reader = new FileReader('test.html');
            reader.onloadend = (function () {
                return function(e) {
                  alert(e.target.result);
                };
            })();
            reader.readAsText(f);
        }
    }

    var fileSerf= document.getElementById('files');
    if (fileSerf){
        fileSerf.addEventListener('change', handleFileSelect, false);
    }
</script>
</body>
</html> 
```

示例：http: [//jsbin.com/ozeyag/293/](http://jsbin.com/ozeyag/293/)

# mysql - MySQL中使用多个ON条件的LEFT JOIN

> ID：13142137
> 
> 赞同：6
> 
> 时间：2012-10-30T15:19:34.733
> 
> 标签：mysql

我知道如何在 MySQL 中使用单个条件或使用 WHERE key IS NULL 来执行 LEFT JOIN，但是当您的 ON 语句中有多个条件时如何执行？我有一个包含订单号和发票日期的发票表。我还有一个包含订单号和发货日期的发货表。我想从发货表中没有相应记录的发票表中返回任何项目。例如...

```
invoice table:

InvoiceNum  OrderNum  InvoiceDate
106433        136365      2011-10-03
111888        136365      2012-06-19

ship table:

OrderNum   ShipDate
136365       2012-06-19 
```

我想编写一个查询，从发票表中只返回发票号 106433。有人知道如何最好地做到这一点。我正在将其他表加入到查询中，但这是我无法弄清楚的表。感谢任何人都可以提供的任何帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-30T15:21:17.140

您可以使用,等在子句中包含[多个条件。](http://dev.mysql.com/doc/refman/5.0/en/join.html)`ON``AND``OR`

```
select i.InvoiceNum
from invoice  i
left outer join ship s on i.OrderNum = s.OrderNum  
    and i.InvoiceDate = s.ShipDate
where s.OrderNum is null 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!2/b71df/5)

# expressionengine - 表达式引擎：从邮件列表中删除成员

> ID：13142146
> 
> 赞同：6
> 
> 时间：2012-10-30T15:19:56.670
> 
> 标签：expressionengine, mailing-list

我确定有办法做到这一点，但我一直无法找到它：

我有一个带有电子邮件通讯注册表单（使用 EE 的邮件列表模块）以及会员注册的网站。

如果用户注册了电子邮件，然后又成为了会员，那么除了手动将其从电子邮件列表中删除之外，确保他们不会收到重复电子邮件的最佳方法是什么？

理想情况下，我希望他们在确认注册后从电子邮件列表中删除。有没有直接的方法可以做到这一点？

提前致谢！

泰

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T15:29:34.703

好问题。

我刚刚在我的沙箱中设置了一个测试，并订阅了邮件列表，并使用相同的电子邮件设置了一个成员。当我通过 Communicate 模块发送邮件时，我确实收到了两份副本。

我个人认为这确实是 EE 中的一个错误，因为理想情况下它应该只发送到唯一地址。

我猜是[http://expressionengine.com/developers/extension_hooks/member_member_register](http://expressionengine.com/developers/extension_hooks/member_member_register)挂钩的扩展，用于对 Mailing List DB 表进行检查？

# tcl - 安装了 BLT 但尝试使用 hierbox 给出“无法读取文件 hierbox.tcl：没有这样的文件或目录”

> ID：13142152
> 
> 赞同：3
> 
> 时间：2012-10-30T15:20:19.343
> 
> 标签：tcl

我已经使用 rpm 为 tcl 安装了 BLT，它看起来安装正确。

从内部希望我可以成功执行“package require BLT”但是，如果我尝试这样做：

```
blt::hierbox .h 
```

我收到以下消息：

> 无法读取文件“hierbox.tcl”：没有这样的文件或目录

我已经查看`/usr/lib64/blt2.4`并`heirbox.tcl`在那里并且似乎没有任何不寻常的权限。

我想那`pkgIndex.tcl`一定没问题，否则 package require 命令会失败。

有趣的是，来自 BLT 的图形小部件似乎工作正常：`blt::graph .g`工作正常。

我对 tcl 了解不多（我只是想让一些遗留软件工作）所以任何帮助将不胜感激。

**更新**我已经从源代码构建了 BLT（这也需要从源代码构建 tcl 和 tk 8.4），这似乎有效。但只有当我使用它附带的 bltwish 时。我看到其他人抱怨的 BLT 的 rpm 版本似乎没有 bltwish exe。也许这是问题的一部分。

无论如何，我现在可以解决它，所以除非其他人也在受苦，否则不要努力诊断我以前的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T21:27:05.747

在我的 Debian 系统上，我同时使用 Tcl 8.6 和 8.5（前者为默认），我使用标准 debs 安装了 BLT2.4，如果我运行相同的代码，它会工作并创建`hierbox`对象。

```
$ wish
% package require BLT
2.4
% blt::hierbox .h
.h
% 
```

BLT安装在`/usr/lib/blt2.4`目录中，包含`pkgIndex.tcl`文件和`hierbox.tcl`文件，所以看起来和你的情况一样（除了结果）。

我查看了该`pkgIndex.tcl`文件，它选择了要加载的二进制库（位于 中`/usr/lib`），并使用 Tcl`load`命令加载它。包的声明是由共享对象完成的，所以如果`package require BLT`有效，它需要`.so`正确加载。

尝试查看该`graph.tcl`文件是否与`hierbox.tcl`.

我在 BTL 源代码中看到，脚本有一个`--with-blt`选项可以`configure`告诉您将 BLT 脚本放在哪里。我认为它`/usr/lib/blt2.4`在我的系统上，但也许在你的系统上已经改变了；然后，如果 rpm 错误，它可能会将`graph.tcl`文件安装在配置选项给出的正确位置，但是安装`hierbox.tcl`在错误的位置，因此它不再工作。

也试试其他小部件，看看相应的`.tcl`文件在哪里。

我不能说更多了，对不起：）

# ffmpeg - 将mp4转换为质量较低的mpt

> ID：13142155
> 
> 赞同：-1
> 
> 时间：2012-10-30T15:20:27.247
> 
> 标签：ffmpeg, mp4, mencoder

我需要将视频从 .mp4 转换为 .mp4（仅限质量和大小不成比例的视频），我尝试过使用 ffmpeg 和 mencoder，但无法使用 fwplayer，有什么想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:40:09.657

Try using MeGUI, it has presets for low quality exporting for Flash and such.

# javascript - 在网页上循环移动文本

> ID：13142157
> 
> 赞同：7
> 
> 时间：2012-10-30T15:20:29.180
> 
> 标签：javascript, html, css, flash

我正在设计网页，我需要将文本从显示器屏幕左侧移动到屏幕右侧。我试过用`<marquee>`标签。它工作正常，没有任何错误。

我的要求是每当文本即将在网页右侧消失时，它应该从页面左侧开始出现。它不应该等待所有文本消失然后从左侧开始。

直到现在我一直在使用它`<html>`。也请建议其他方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:36:13.690

可以使用 Javascript：

将滚动的文本的两个副本分开容器的宽度。从（左侧副本可见）动画到（右侧副本可见），然后跳回并重复。

类似于（未经测试，使用 jQuery）：

```
<div class="outer">
  <div class="inner">
     some text
  </div>
</div> 
```

CSS：

```
.outer, .inner {
  width: 100%;
}
.outer {
  position: relative;
  overflow: hidden;
}
.inner {
  position: absolute;
} 
```

js：

```
(function rerun(){
  var time = 10000 //ms

  $(".inner").slice(0,-1).remove()
  $i1=$(".inner")
  $i2=$i1.clone()

  $i1.css({left:0}).animate({left:"-100%"}, time)
  $i2.insertAfter($i1).css({left:"100%"}).animate({left:0}, time, rerun)
})() 
```

这样，一旦文本开始在右侧消失，文本就应该开始出现在右侧。修改相对宽度以获得不同的效果。

# php - jQuery tubeplayer - 链接以停止页面中的任何视频

> ID：13142158
> 
> 赞同：0
> 
> 时间：2012-10-30T15:20:28.950
> 
> 标签：php, jquery, jquery-plugins, youtube-javascript-api

使用[jQuery tubeplayer](http://www.tikku.com/jquery-youtube-tubeplayer-plugin)，如何设置一个按钮来停止任何视频嵌入？

我尝试使用 php 渲染多个视频：

```
echo '
<div class="video_frame">
<script type="text/javascript">
$(".video_frame").tubeplayer({
width: 960, // the width of the player
height: 390, // the height of the player
allowFullScreen: "true", // true by default, allow user to go full screen
initialVideo: "'.$destaque_g['video'].'", // the video that is loaded into the player
preferredQuality: "default",// preferred quality: default, small, medium, large, hd720
onPlay: function(id){}, // after the play method is called
onPause: function(){}, // after the pause method is called
onStop: function(){}, // after the player is stopped
onSeek: function(time){}, // after the video has been seeked to a defined point
onMute: function(){}, // after the player is muted
onUnMute: function(){} // after the player is unmuted
});
</script>
<div>'; 
```

并在 head 文档标签中调用它：

```
$('.stripe_bottom').find('a').click(function() {
$('.video_frame').tubeplayer('stop');
}); 
```

我希望任何带有“stripe_bottom”类的div内的标签“a”都可以停止任何带有“video_frame”类的div内的视频。

当我单击“stripe_bottom”内的链接时，第一个视频会停止，但另一个视频不会停止。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:25:59.773

尝试这个：

```
$('.stripe_bottom').find('a').click(function() {
    $('.video_frame').each(function(){$(this).tubeplayer('stop');});
}); 
```

# sql - 使用 VS 2010 安装程序使用 SQL 2012 LocalDb 部署 VS2010 WinForms 应用程序的方法

> ID：13142160
> 
> 赞同：1
> 
> 时间：2012-10-30T15:20:40.217
> 
> 标签：sql, installation, localdb

是否有关于为使用 SQL 2012 LocalDb 的 WinForms 应用程序创建 Visual Studio 2010 安装程序项目的参考？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T23:50:53.700

我不知道有什么好的参考，但这很容易。ClickOnce 包在 Visual Studio 2010 和 2012 之间兼容，因此您需要做的就是在某处安装 Visual Studio 2012 以获取 LocalDB 引导程序（免费的 VS 2012 Express for Desktop）并将`SqlLocalDB2012`文件夹复制`C:\Program Files (x86)\Microsoft SDKs\Windows\v8.0A\Bootstrapper\Packages`到`C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bootstrapper\Packages`（取决于您的 Windows安装位置可能略有不同，但应该很容易找到）。

现在需要注意的是，要从 .NET 连接到 LocalDB，您需要 .NET 4.0.2 或更高版本。我认为任何地方都没有 .NET 4.0.2 的引导程序。因此，您要么需要自己实现它，要么以 .NET 4.5 为目标。您应该能够从 VS 2012 复制 .​​NET 4.5 引导程序，就像您可以复制 LocalDB 一样。

# drag-and-drop - 可排序/可排序列表 - 可拖动的 reset() 功能

> ID：13142165
> 
> 赞同：2
> 
> 时间：2012-10-30T15:20:57.263
> 
> 标签：drag-and-drop, sencha-touch, draggable

我正在使用 Sencha Touch 2.0 实现可排序/可排序列表功能。我正在尝试使用[Ext.util.Sortable](http://docs.sencha.com/touch/1-1/#!/api/Ext.util.Sortable)类复制 Sencha Touch 1.1 中的功能。

通过拖动和移动其他列表项，我几乎成功地获得了类似的功能。然而，在 Sencha 1.1 中，有一个 draggable.reset() 功能主要更新边界以及重置偏移量。我无法使用 Sencha 2.0 可拖动行为复制此重置功能。

任何想法如何实施？以下是 Sencha 1.1 中的代码：

```
// We reset the draggable (initializes all the new start values)
    draggable.reset();

// Move the draggable to its current location (since the transform is now 
// different)
    draggable.moveTo(region.left, region.top); 
```

我用这个改变了 moveTo() 函数：

```
draggable._element.setXY([region.left, region.top]); 
```

但不是 reset() 功能。我试图将`-webkit-transform`直接设置为可拖动元素，但不知何故，该样式并未添加到该元素中。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:33:16.120

修复了问题。不再需要 reset() 函数 - 只需更改 Dataview 存储中的记录索引并在“dragend”事件中刷新数据视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T14:52:38.167

您也可以按照此示例中所示进行操作。

[http://druckit.wordpress.com/2013/04/08/tap-and-drag-animation-domination-part-3-of-3-implementing-drag-and-drop-in-sencha-touch-2/](http://druckit.wordpress.com/2013/04/08/tap-and-drag-animation-domination-part-3-of-3-implementing-drag-and-drop-in-sencha-touch-2/)

# php - 从简单 XML 数组中获取单个结果

> ID：13142169
> 
> 赞同：-1
> 
> 时间：2012-10-30T15:21:10.290
> 
> 标签：php, xml

好的，我正在使用一个简单的 XML 函数从远程数据库获取一些信息，这工作正常，但是它以 xml 格式返回所有信息，而我想要做的只是显示一个字段的结果，所以对于下面的示例是我要显示的结果

```
 <product id="9" name="Computer screwdriver" datasheet="" packshot=""/> 
```

下面是我的代码

```
$file = 'http://computers.mysite.co.uk/vrm.xml?apikey=**********&vid=Check&vrm='.$reg;
if(!$xml = simplexml_load_file($file))
 exit('Failed to open '.$file);
 print_r($id); 
```

更新

好的，所以我现在将代码更改为：

```
 $data  = simplexml_load_file("http://test.mysite.co.uk/test.xml?   apikey=********&vid=app&vrm='.$reg;");

 print $data->computers->computer->products->product->name; 
```

xml结构在这里：

```
<computers sid="1234">
  <computer id="253406" name="computer name)" model_group="Microsofth" start_year="2005" end_year="2009">
    <system id="969623" capacity="3.4"/>
      <developer id="64" name="intel"/>
      <machine id="8" name="P" etype="P"/>
    <products>
      <product id="9" name="computer screwdriver" datasheet="" packshot=""/>
      <product id="16" name="Screwdriver Crosshead" datasheet="" packshot=""/>
    </products>
  </computer>
 </computers 
```

我想要做的是仅在第一行产品中返回产品名称，在本例中为 id = 9。

目前，代码没有显示任何结果的方式，但如果我将其更改为显示它所做的所有结果，那么问题只是试图过滤掉那个结果。

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T17:40:53.253

$data->xpath("you_selector") 并且不要忘记 header("Content-Type:text/xml");

# python - 正则表达式替换以特定字符开头的文本中的行

> ID：13142170
> 
> 赞同：-4
> 
> 时间：2012-10-30T15:21:13.330
> 
> 标签：python, regex

我正在研究一个正则表达式，但我无法让它工作。

用这样的文字：

```
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc ultricies congue feugiat. 

Tom wrote:
> blablabla
> this is very interesting 
> blabla blabla
> I ate a apple yesterday
> this is very interesting 
> blabla blabla

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc ultricies congue feugiat. 
```

我想匹配以“汤姆写道：”开头并以“>”开头的最后一行结尾的整个文本部分，以便将其删除并仅获得 2 个 lorem ipsum 句子。

我不知道我是否足够清楚...

编辑：我正在考虑一个正则表达式，它匹配以“\w 写：”开头的所有内容，并且当它匹配换行符后跟一个不是“>”的字符时停止

Edit2：找到了解决方案：

```
\w+ wrote:(\n>[^\n]*)* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:42:15.460

看起来这就是您想要的（根据系统需要调整换行符）

```
\w+ wrote:\n(>.*\n)*(>.*) 
```

[http://regexr.com?32l21](http://regexr.com?32l21)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:33:55.217

跨多行匹配正则表达式需要指定多行匹配。

有关详细信息，请参阅此答案： [正则表达式匹配多行文本块](https://stackoverflow.com/questions/587345/python-regular-expression-matching-a-multiline-block-of-text)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T15:27:05.377

[在这样](http://gskinner.com/RegExr/)的工具中练习您的正则表达式。可以很容易地可视化您的正则表达式正在做什么。

试一试，并根据需要进行调整：

`Tom wrote:(.|\s)*>.*`

# c# - DynamicDataDisplay ChartPlotter 删除所有绘图

> ID：13142173
> 
> 赞同：4
> 
> 时间：2012-10-30T15:21:17.323
> 
> 标签：c#, wpf, charts, dynamic-data-display

在我的 WPF 应用程序中，我有一个 D3 ChartPlotter，我可以在其中绘制 4 个 LineGraphs。这是 XAML 代码：

```
<d3:ChartPlotter Name="plotter">
    <d3:ChartPlotter.HorizontalAxis>
        <d3:HorizontalAxis Name="timeAxis" />
    </d3:ChartPlotter.HorizontalAxis>
    <d3:ChartPlotter.VerticalAxis>
        <d3:VerticalAxis Name="accelerationAxis" />
    </d3:ChartPlotter.VerticalAxis>
</d3:ChartPlotter> 
```

DinamicDataDisplay`d3`的命名空间在哪里，这是后面的代码（相关部分）。

```
var x = new List<int>();
var y = new List<int>();
for (var t = 0; t <= 10; t = t + 1) { 
    x.Add(t);
    y.Add(Math.Pow(t,2));
}

var xCoord = new EnumerableDataSource<int>(x);
xCoord.SetXMapping(t => t);
var yCoord = new EnumerableDataSource<int>(y);
yCoord.SetYMapping(k => k);

CompositeDataSource plotterPoints = new CompositeDataSource(xCoord, yCoord);

plotter.AddLineGraph(plotterPoints, Brushes.Red.Color , 2, "MyPlot"); 
```

我现在要做的是删除此图并使用一组不同的点重新绘制它。不幸的是，我在 D3 的（糟糕的）文档和网络中都找不到任何朝着这个方向发展的东西。

关于做什么或在哪里看的任何建议？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T19:04:08.273

我发现做到这一点的最佳方法是在您的代码中包含一个表示 DataSource 的属性并将图表的 DataSource 绑定到该属性。每次更新或重新分配数据源时，让您的代码实现 INotifyPropertyChanged 并调用 OnPropertyChanged。这将迫使绘图仪观察绑定并重新绘制图表。

例子：

```
EnumerableDataSource<Point> m_d3DataSource;
public EnumerableDataSource<Point> D3DataSource {
    get {
        return m_d3DataSource;
    }
    set {                
        //you can set your mapping inside the set block as well             
        m_d3DataSource = value;
        OnPropertyChanged("D3DataSource");
    }
}     

protected void OnPropertyChanged(PropertyChangedEventArgs e) {
    PropertyChangedEventHandler handler = PropertyChanged;
    if (handler != null) {
        handler(this, e);
    }
} 

protected void OnPropertyChanged(string propertyName) {
    OnPropertyChanged(new PropertyChangedEventArgs(propertyName));
} 
```

如果您需要更多信息，我能找到的最佳资源是 D3 所在的 CodePlex 讨论： [讨论](http://dynamicdatadisplay.codeplex.com/discussions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-07T09:43:16.523

有一个简单的方法可以做到这一点。如果您的目的是删除绘图仪中的每个图形，只需执行以下操作：

```
plotterName.Children.RemoveAll((typeof(LineGraph)); 
```

希望这对你有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-27T14:39:55.347

我有一个类似的问题。D3 中有几种不同的 Graph 类型。例如，当您使用 ElementMarkerPoints 时，您必须 RemoveAll((typeof(MarkerPointGraph))。

找出您正在使用的图表类型，然后您可以删除所有图。

编辑：

不要从绘图仪中删除图形。当您需要清除绘图仪时，使用 ObservableDataSource 并删除这些值。当我没记错的时候，否则你会冒内存泄漏的风险，因为这些图不是垃圾收集的。ObservableDataSource 有一个名为 Collection 的属性，只需调用 Clear 方法就可以了：）

# c# - WCF 路由自定义绑定会话错误

> ID：13142175
> 
> 赞同：1
> 
> 时间：2012-10-30T15:21:26.517
> 
> 标签：c#, wcf, session, soap

我目前正在尝试针对 WSDL 编写一个小的 WCF-Routing 应用程序。但是当我尝试访问 SVC 文件时，出现以下错误：

> 合同需要 Session，但 Binding 'BasicHttpBinding' 不支持它或未正确配置以支持它。

由于我使用的是 SOAP12 的自定义绑定，因此我不理解此错误消息。我已经在这里搜索过了，但唯一的其他相关线程只有一条对我没有帮助的评论。（[https://stackoverflow.com/questions/9896593/wcf-4-routing-service-and-configuration-error](https://stackoverflow.com/questions/9896593/wcf-4-routing-service-and-configuration-error)）

我的 web.config 如下：

```
<?xml version="1.0"?>

<configuration>
    <appSettings/>
    <connectionStrings/>
    <system.web>
        <compilation debug="false" targetFramework="4.0">
        </compilation>
        <authentication mode="Windows"/>
        <pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID"/></system.web>
    <system.serviceModel>

        <services>
            <service name="RoutingService" behaviorConfiguration="RoutingServiceBehavior">
                <host>
                    <baseAddresses>
                        <add baseAddress="http://localhost/FrontendSoap/Routingservice.svc"/>
                    </baseAddresses>
                </host>
                <endpoint name="RequestReplyBinding" binding="customBinding" bindingConfiguration="AnfragenBulk" contract="System.ServiceModel.Routing.IRequestReplyRouter"/>
            </service>
        </services>
        <behaviors>
            <serviceBehaviors>
                <behavior name="RoutingServiceBehavior">
                    <serviceMetadata httpsGetEnabled="True"/>
                    <routing filterTableName="routingFilterTable"/>
                </behavior>
            </serviceBehaviors>
        </behaviors>

        <client>
            <endpoint name="VerfuegbarkeitAnfragenBulkPort" address="http://localhost/BackendSoap/BackendBulkService.svc" binding="customBinding" bindingConfiguration="AnfragenBulk" contract="VerfuegbarkeitAnfragenBulkService.VerfuegbarkeitAnfragenBulk"/>
        </client>
        <routing>
            <filters>
                <filter name="WebIFFilter" filterType="EndpointName" filterData="RequestReplyBinding"/>
            </filters>
            <filterTables>
                <filterTable name="routingFilterTable">
                    <add filterName="WebIFFilter" endpointName="VerfuegbarkeitAnfragenBulkPort"/>
                </filterTable>
            </filterTables>
        </routing>

        <serviceHostingEnvironment multipleSiteBindingsEnabled="true"/>
        <bindings>
      <customBinding>
        <binding name="AnfragenBulk">
          <textMessageEncoding maxReadPoolSize="64" maxWritePoolSize="16"
              messageVersion="Soap12" writeEncoding="utf-8">
            <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          </textMessageEncoding>
          <httpTransport manualAddressing="false" maxBufferPoolSize="524288"
              maxReceivedMessageSize="65536" allowCookies="false" authenticationScheme="Anonymous"
              bypassProxyOnLocal="true" decompressionEnabled="true" hostNameComparisonMode="StrongWildcard"
              keepAliveEnabled="true" maxBufferSize="65536" proxyAuthenticationScheme="Anonymous"
              realm="" transferMode="Buffered" unsafeConnectionNtlmAuthentication="false"
              useDefaultWebProxy="true" />
        </binding>
      </customBinding>
        </bindings>
    </system.serviceModel>
</configuration> 
```

和 RoutingService.svc：

```
<%@ ServiceHost Language="C#" Debug="true" Service="System.ServiceModel.Routing.RoutingService, System.ServiceModel.Routing, version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" %> 
```

任何帮助和想法将不胜感激。

# subquery - 带有 sphinx 和 mysql 的子查询

> ID：13142178
> 
> 赞同：0
> 
> 时间：2012-10-30T15:21:30.960
> 
> 标签：subquery, sphinx

[链接到类似线程](https://stackoverflow.com/questions/12666322/mixed-mysql-and-sphinx-queries)

假设我有一个这样的查询：

```
'SELECT * FROM blabla WHERE id IN (SELECT id FROM bla WHERE name ='Mr.Anderson')' 
```

通常你在 sphinx.config 中编写查询的主要部分，它获取数据并对其进行索引......然后你使用 php sphinx api ，设置不同的过滤器来获得你想要的......

正如我已经理解的那样，狮身人面像不能与子查询一起使用......像 SphinxSE 这样的东西就是为此目的而存在的，或者至少它可以处理子查询，但是

**（**SphinxSE 只是一个通过网络与 searchd 对话的普通客户端。当您的语言没有本机 API 并且想要通过 MySQL 工作时，您需要它。或者如果您想要优化某些拉大 Sphinx 结果的工作负载直接设置到 MySQL 并在那里额外处理它们（并避免将 Sphinx 设置拉到应用程序然后立即将其推送到 MySQL 的开销。**）**

所以我的问题是，如果我将开始使用 sphinxSE，我仍然可以使用 php sphinx api 以及这些子查询吗？**如果您能提供有关整个故事的示例的教程或文章**，我将非常感激，如何做到这一点..

第二个问题是，如果我不使用 SphinxSe，我还有什么其他选择......

例如，我编写了 2 个不同的源和索引，一个用于子查询，另一个用于主查询，然后通过过滤器将子查询结果插入到通过 php sphinx api 的查询中...。这样的开销是否很大？

提前谢谢...

# php - Xbox PHP API 调用

> ID：13142179
> 
> 赞同：1
> 
> 时间：2012-10-30T15:21:31.600
> 
> 标签：php, json, xbox

这是演示的链接：http: [//davidwalsh.name/xbox-api](http://davidwalsh.name/xbox-api)

我创建了一个包含以下内容的 php 文件..

```
<?php
// Settings
$gamertag = 'RyanFabbro';
$profileUrl = 'http://www.xboxleaders.com/api/profile/'.$gamertag.'.json';

// Get information about me
$info = file_get_contents($profileUrl);

// To JSON
$json = json_decode($info);
$user = $json->user;
?> 
```

这是我加载文件时的样子（除了我的玩家代号数据）

```
{
  "status": {
    "is_valid": "yes",
    "is_cheater": "no",
    "tier": "gold"
  },
  "profile": {
    "gamertag": "dwalsh83",
    "gamerscore": 300,
    "reputation": 20,
    "gender": "male",
    "motto": "Watch your head.",
    "name": "David Walsh",
    "location": "Madison, WI, US",
    "bio": "There is, and only can be, Call of Duty.",
    "url": "http:\/\/live.xbox.com\/en-US\/Profile?gamertag=dwalsh83",
    "avatar_tile": "http:\/\/image.xboxlive.com\/global\/t.fffe07d1\/tile\/0\/2000b",
    "avatar_small": "http:\/\/avatar.xboxlive.com\/avatar\/dwalsh83\/avatarpic-s.png",
    "avatar_large": "http:\/\/avatar.xboxlive.com\/avatar\/dwalsh83\/avatarpic-l.png",
    "avatar_body": "http:\/\/avatar.xboxlive.com\/avatar\/dwalsh83\/avatar-body.png",
    "launch_team_xbl": "no",
    "launch_team_nxe": "no",
    "launch_team_kin": "no"
  }
} 
```

但它没有显示任何东西，我做错了什么？

当我去[http://www.xboxleaders.com/api/profile/ryanfabbro.json](http://www.xboxleaders.com/api/profile/ryanfabbro.json)时，它显示得很好。

日期*

我尝试在 php 文件中执行此操作

```
<?php
// Settings
$gamertag = 'RyanFabbro';
$profileUrl = 'http://www.xboxleaders.com/api/profile/'.$gamertag.'.json';

// Get information about me
$info = file_get_contents($profileUrl);

// To JSON
$json = json_decode($info);
$user = $json->user;
$user = $json->profile;
$user = $json->data;
$profile = $json->data;
?>

<img src="<?php echo $profile->avatar_body; ?>" alt="<?php echo $profile->gamertag; ?>" class="avatar" /> 
```

这导致页面仍然是空白的，所以当我查看源代码时，它返回的只是

```
<img src="" alt="" class="avatar" /> 
```

更新 2 @ae14 & 2g

我也试过（都在 1 个 php 文件中）

```
<?php
// Settings
$gamertag = 'RyanFabbro';
$profileUrl = 'http://www.xboxleaders.com/api/profile/'.$gamertag.'.json';

// Get information about me
$info = file_get_contents($profileUrl);

// To JSON
$json = json_decode($info);
$user = $json->data;
?>

<?php echo $user->name ?> 
```

仍然导致空白页，这就是你的意思我应该做的吗？我也用 2g 建议尝试了同样的方法，但无济于事

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:25:15.610

看起来你需要使用

```
$user = $json->Data 
```

获取用户信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T16:02:48.603

这是我的 PHP 文件：

```
<?php
// Settings

$gamertag = urlencode('yourgamertagwithspaceetcetc..');

$profileUrl = 'http://www.xboxleaders.com/api/profile/'.$gamertag;

// Get information about me
$info = file_get_contents($profileUrl);

echo $info;

// To JSON
$json = json_decode($info);
$user = $json->Data;

echo $user->Gamertag;

?> 
```

我必须使用 urlEncode 因为我的玩家代号里面有一个空格。我建议你在启动 php 文件之前在浏览器上测试最终的 url。

对于测试使用 $user->Gamertag 因为名称的属性它总是空白的。我不知道为什么。

这是从服务返回的 JSON 数据

```
 "Data": {
    "Tier": "gold",
    "IsValid": 1,
    "IsCheater": 0,
    "IsOnline": 0,
    "OnlineStatus": "Last seen 11\/10\/2012 playing Modern Warfare&#174; 3",
    "XBLLaunchTeam": 0,
    "NXELaunchTeam": 0,
    "KinectLaunchTeam": 0,
    "AvatarTile": "https:\/\/avatar-ssl.xboxlive.com\/avatar\/xxxxxxxx\/avatarpic-l.png",
    "AvatarSmall": "http:\/\/avatar.xboxlive.com\/avatar\/xxxxxx\/avatarpic-s.png",
    "AvatarLarge": "http:\/\/avatar.xboxlive.com\/avatar\/xxxxxx\/avatarpic-l.png",
    "AvatarBody": "http:\/\/avatar.xboxlive.com\/avatar\/xxxxxxx\/avatar-body.png",
    "Gamertag": "xxxxxxxxxxxxxxxxx",
    "GamerScore": 4165,
    "Reputation": 20,
    "Name": "",
    "Motto": "",
    "Location": "",
    "Bio": ""
  },
  "Stat": "ok",
  "In": 2.273,
  "Authed": "false",
  "AuthedAs": null 
```

您可以使用相同的方法访问 Gamertag... simpy 调用

```
$user->AvatarSmall 
```

我的机器上没有安装 php，所以首先我下载了​​适用于 Windows 的 PHP 5.4.8，并使用了此版本的内置 Web 服务器[Here](http://php.net/manual/en/features.commandline.webserver.php) more info。

希望能帮到你

# objective-c - iOS5：如何计算最短的汽车路线

> ID：13142180
> 
> 赞同：1
> 
> 时间：2012-10-30T15:21:32.643
> 
> 标签：objective-c, xcode, ios5

我正在构建一个计算油耗的应用程序，我想知道计算两个地点之间最短汽车路线的最佳方法是什么。我只需要公里或英里的距离，不需要地图界面。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:41:47.323

最简单的方法可能是与 Google Maps API 集成。

见这里：[https ://developers.google.com/maps/documentation/directions/#DirectionsRequests](https://developers.google.com/maps/documentation/directions/#DirectionsRequests)

总之，您将向包含您的开始/结束位置的 URL 发出 HTTP 请求，接收返回详细说明路线的 JSON 或 XML。如果您只对距离感兴趣，您可以轻松地从中获取总距离或时间。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-30T15:28:54.110

就用这个

```
CLLocation *loc = [[CLLocation alloc] initWithLatitude:someLatitude longitude:someLongitude];
CLLocation *loc2 = [[CLLocation alloc] initWithLatitude:anotherLatitude longitude:anotherLongitude];
CLLocationDistance dist = [loc distanceFromLocation:loc2];
float fMiles = dist/1600; 
```

# wso2 - 在 Synapse VFS 传输中配置基于 FTP 的隐式 TLS

> ID：13142181
> 
> 赞同：1
> 
> 时间：2012-10-30T15:21:36.357
> 
> 标签：wso2, ssl, ftps, vfs, synapse

我们需要连接到一个 ftp-server，它只允许在端口 990 上通过 FTP 进行隐式 TLS。我们使用的是 WSO2 ESB 4.5.0，它支持 ftps，并且基于[Synapse 项目](http://synapse.apache.org)构建。

可以[在此处找到](http://wso2.org/library/articles/2012/01/wso2-esb-example-file-exchanging-hub-part-1#read-ftps)WSO2 中用于 ftps 的示例配置。

我们无法找到将客户端配置为通过 FTP 使用隐式 TLS 的方法。我们从 VFS 文档中了解到，[配置默认为显式模式](http://commons.apache.org/vfs/apidocs/org/apache/commons/vfs2/provider/ftps/FtpsFileSystemConfigBuilder.html#getFtpsType%28org.apache.commons.vfs2.FileSystemOptions%29)。

有谁知道如何设置隐式模式？

# sql - 为销售代表选择区域

> ID：13142183
> 
> 赞同：0
> 
> 时间：2012-10-30T15:21:38.230
> 
> 标签：sql, ruby-on-rails, ruby, activerecord

我有一个适用于销售代表的应用程序。我正在尝试根据两件事提取不同的机构信息

1.  如果他们是客户
2.  如果他们处于用户（销售代表）结束的状态。

因此，我想显示 current_user（销售代表）区域中所有作为客户的机构。我怎样才能做到这一点？

由于我以前没有这样做过，而且我对 Rails 比较陌生，所以我不知道该怎么做。

这是我的模型（我已经缩短了代码）：

**用户（销售代表）**

```
class User < ActiveRecord::Base
  has_many :states, :through => :rep_areas
  has_many :institutions, :through => :company_reps
  has_many :rep_areas
  has_many :company_reps
end 
```

**状态**

```
class State < ActiveRecord::Base
  has_many :users, :through => :rep_areas
  has_many :rep_areas
  has_many :institutions

  attr_accessible :code, :name
end 
```

**机构**

```
class Institution < ActiveRecord::Base
  attr_accessible :company, :phone, :clientdate, :street, :city, :state_id, :zip, :source, :source2, :demodate1, :demodate2, :demodate3, :client, :prospect, :notcontacted
  belongs_to :state
  has_many :users, :through => :company_reps
  has_many :company_reps
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:34:17.917

我建议以这种方式进行：

```
states = current_user.states.to_a

# the following are all the Institution record in all the user's areas
inst_in_states = Institution.where(state_id: states)
# it will take an array and make an "IN" query

# the following are all the user's own clients, additionally on the states
# the user is in.
clients_in_states = current_user.institutions.where(state_id: states)
# as above, but additionally use the :company_reps join 
```

# asp.net - 使用 Active Directory 身份验证构建页面的步骤

> ID：13142186
> 
> 赞同：1
> 
> 时间：2012-10-30T15:21:47.187
> 
> 标签：asp.net, active-directory

在活动目录身份验证方面需要指导和帮助 我想构建一个网页，该网页能够通过将活动目录电子邮件字段与我们的应用程序联系人表中的电子邮件字段进行比较来识别访问该网页的人，并显示必要的功能。

我需要遵循哪些步骤才能实现上述目标

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:24:51.570

[这篇](http://www.codeproject.com/Articles/94612/Windows-Authentication)关于 CodeProject 的文章对我帮助很大

# tsql - t-sql WITH 上 WITH

> ID：13142189
> 
> 赞同：14
> 
> 时间：2012-10-30T15:21:51.757
> 
> 标签：tsql, select, nested

我必须对 WITH 查询进行查询，例如

```
; WITH #table1  
(  
SELECT id, x from ... WHERE....  
UNION ALL  
 SELECT id, x from ... WHERE...  
)  

WITH #table2  
(  
 SELECT DISTINCT tbl_x.*,ROW_NUMBER() OVER (order by id) as RowNumber  
WHERE id in ( SELECT id from #table1)  
)  

SELECT * FROM #table2 WHERE RowNumber > ... and ... 
```

所以我必须在 WITH 上使用 WITH，然后在第二个 WITH 上使用 SELECT，我该怎么做？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-30T15:24:41.677

您可以在关键字之后定义多个 CTE，方法是`WITH`用逗号分隔每个 CTE。

```
WITH T1 AS
(
    SELECT id, x from ... WHERE....
    UNION ALL
    SELECT id, x from ... WHERE...
)
, T2 AS
(
    SELECT DISTINCT tbl_x.*, ROW_NUMBER() OVER (order by id) as RowNumber
    WHERE id in ( SELECT id from T1 )
)
SELECT * FROM T2 WHERE RowNumber > ... and ... 
```

[http://www.4guysfromrolla.com/webtech/071906-1.shtml](http://www.4guysfromrolla.com/webtech/071906-1.shtml)

# iphone - NSOperation 和 NSOperationQueue 不起作用

> ID：13142194
> 
> 赞同：0
> 
> 时间：2012-10-30T15:22:02.490
> 
> 标签：iphone, objective-c, ios

我有以下代码，但它不起作用。背后有什么东西在起作用。

```
[operationQueue addOperationWithBlock:^{
        imageData =  [NSData dataWithContentsOfURL:imageURL];
        [[NSOperationQueue mainQueue] addOperationWithBlock:^{
            UIImage *image = nil;

            if(imageData){
                UIImage *image = [UIImage imageWithData:imageData];
                cell.imageView.image = image;
            }
        }];
    }]; 
```

即使我创建了一个 NSOperation 的子类，然后对其进行分配初始化，它也无法按照我的想法工作。我总是必须调用 NSOperation 子类的启动才能运行，但我想向 NSOperation 发送启动消息会在主线程中运行它，而不是在后台线程中运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:58:49.320

我想使用 GCD 添加替代解决方案：

```
backgroundQueue = dispatch_queue_create("com.razeware.imagegrabber.bgqueue", NULL);
dispatch_async(backgroundQueue, ^{
                          /* put the codes which makes UI unresponsive like reading from network*/ 
                         imageData =  [NSData dataWithContentsOfURL:imageURL];
                         .....   ;
                         dispatch_async(dispatch_get_main_queue(),^{
                                         /* do the UI related work on main thread */
                                         UIImage *image = [UIImage imageWithData:imageData];
                                         cell.imageView.image = image;
                                         ......;   });
                                  });
dispatch_release(backgroundQueue); 
```

让我知道这个是否对您有所帮助；）

[参考](http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial)

# php - 将特定表列导出到 Excel

> ID：13142196
> 
> 赞同：0
> 
> 时间：2012-10-30T15:22:12.413
> 
> 标签：php, sql, database, excel

我正在尝试将特定列数据（即票证编号、公司/客户名称、问题主题、关闭日期）从我的 SQL 数据库表导出到 Excel（.xls），我已经编写了代码，但它正在导出我的整个数据库表. （见下面的代码）

需要导出的具体列数据：

*   票号
*   姓名
*   公司
*   主题
*   关闭

还有什么方法可以添加一个只导出特定范围的函数（即日期范围从 2012 年 10 月 1 日到 2012 年 10 月 31 日）？

```

`<?PHP

//EDIT YOUR MySQL Connection Info:
$DB_Server = "localhost";        //your MySQL Server
$DB_Username = "root";                 //your MySQL User Name
$DB_Password = "";                //your MySQL Password
$DB_DBName = "my_databse";                //your MySQL Database Name
$DB_TBLName = "my_table";                //your MySQL Table Name

//$DB_TBLName,  $DB_DBName, may also be commented out & passed to the browser
//as parameters in a query string, so that this code may be easily reused for
//any MySQL table or any MySQL database on your server

//DEFINE SQL QUERY:
//edit this to suit your needs
$sql = "Select * from $DB_TBLName";

//Optional: print out title to top of Excel or Word file with Timestamp
//for when file was generated:
//set $Use_Titel = 1 to generate title, 0 not to use title
$Use_Title = 1;
//define date for title: EDIT this to create the time-format you need
$now_date = DATE('m-d-Y H:i');
//define title for .doc or .xls file: EDIT this if you want
$title = "Dump For Table $DB_TBLName from Database $DB_DBName on $now_date";
/*

Leave the connection info below as it is:
just edit the above.

(Editing of code past this point recommended only for advanced users.)
*/
//create MySQL connection
$Connect = @MYSQL_CONNECT($DB_Server, $DB_Username, $DB_Password)
     or DIE("Couldn't connect to MySQL:<br>" . MYSQL_ERROR() . "<br>" . MYSQL_ERRNO());
//select database
$Db = @MYSQL_SELECT_DB($DB_DBName, $Connect)
     or DIE("Couldn't select database:<br>" . MYSQL_ERROR(). "<br>" . MYSQL_ERRNO());
//execute query
$result = @MYSQL_QUERY($sql,$Connect)
     or DIE("Couldn't execute query:<br>" . MYSQL_ERROR(). "<br>" . MYSQL_ERRNO());

//if this parameter is included ($w=1), file returned will be in word format ('.doc')
//if parameter is not included, file returned will be in excel format ('.xls')
IF (ISSET($w) && ($w==1))
{
     $file_type = "msword";
     $file_ending = "doc";
}ELSE {
     $file_type = "vnd.ms-excel";
     $file_ending = "xls";
}
//header info for browser: determines file type ('.doc' or '.xls')
HEADER("Content-Type: application/$file_type");
HEADER("Content-Disposition: attachment; filename=MDT_DB_$now_date.$file_ending");
HEADER("Pragma: no-cache");
HEADER("Expires: 0");

/*    Start of Formatting for Word or Excel    */

IF (ISSET($w) && ($w==1)) //check for $w again
{
     /*    FORMATTING FOR WORD DOCUMENTS ('.doc')   */
     //create title with timestamp:
     IF ($Use_Title == 1)
     {
         ECHO("$title\n\n");
     }
     //define separator (defines columns in excel & tabs in word)
     $sep = "\n"; //new line character

     WHILE($row = MYSQL_FETCH_ROW($result))
     {
         //set_time_limit(60); // HaRa
         $schema_insert = "";
         FOR($j=0; $j<mysql_num_fields($result);$j++)
         {
         //define field names
         $field_name = MYSQL_FIELD_NAME($result,$j);
         //will show name of fields
         $schema_insert .= "$field_name:\t";
             IF(!ISSET($row[$j])) {
                 $schema_insert .= "NULL".$sep;
                 }
             ELSEIF ($row[$j] != "") {
                 $schema_insert .= "$row[$j]".$sep;
                 }
             ELSE {
                 $schema_insert .= "".$sep;
                 }
         }
         $schema_insert = STR_REPLACE($sep."$", "", $schema_insert);
         $schema_insert .= "\t";
         PRINT(TRIM($schema_insert));
         //end of each mysql row
         //creates line to separate data from each MySQL table row
         PRINT "\n----------------------------------------------------\n";
     }
}ELSE{
     /*    FORMATTING FOR EXCEL DOCUMENTS ('.xls')   */
     //create title with timestamp:
     IF ($Use_Title == 1)
     {
         ECHO("$title\n");
     }
     //define separator (defines columns in excel & tabs in word)
     $sep = "\t"; //tabbed character

     //start of printing column names as names of MySQL fields
     FOR ($i = 0; $i < MYSQL_NUM_FIELDS($result); $i++)
     {
         ECHO MYSQL_FIELD_NAME($result,$i) . "\t";
     }
     PRINT("\n");
     //end of printing column names

     //start while loop to get data
     WHILE($row = MYSQL_FETCH_ROW($result))
     {
         //set_time_limit(60); // HaRa
         $schema_insert = "";
         FOR($j=0; $j<mysql_num_fields($result);$j++)
         {
             IF(!ISSET($row[$j]))
                 $schema_insert .= "NULL".$sep;
             ELSEIF ($row[$j] != "")
                 $schema_insert .= "$row[$j]".$sep;
             ELSE
                 $schema_insert .= "".$sep;
         }
         $schema_insert = STR_REPLACE($sep."$", "", $schema_insert);
         //following fix suggested by Josue (thanks, Josue!)
         //this corrects output in excel when table fields contain \n or \r
         //these two characters are now replaced with a space
         $schema_insert = PREG_REPLACE("/\r\n|\n\r|\n|\r/", " ", $schema_insert);
         $schema_insert .= "\t";
         PRINT(TRIM($schema_insert));
         PRINT "\n";
     }
}

?>` 

            回答 #1

赞同：1

时间：2012-10-30T15:27:32.350

更改 SQL：

```
//DEFINE SQL QUERY:
//edit this to suit your needs
$sql = "Select ticketID, name, company, subject, closed  from $DB_TBLName"; 
```

```

# php - SQL查询不同的表并显示所有

> ID：13142202
> 
> 赞同：0
> 
> 时间：2012-10-30T15:22:37.700
> 
> 标签：php, mysql, sql

在我的 php 网站上，我将 3 种内容类型保存在具有不同列数的不同表中

例如：

```
Type 1 (X columns) (example: table_products)
Type 2 (Y columns) (example: table_customers)
Type 3 (Z columns) (example: table_posts) 
```

我正在制作一个搜索系统，在同一个 Select 中搜索每种类型，最终显示所有结果。

例子：

```
I search: foo

System searchs on: Type 1, type 2 and type 3 "foo" and shows:

- Product foo1
- Product foo2
- Customer foo1
- Customer foo2
- Customer foo3
- Post foo1
 (It's only an example) 
```

现在我有三个不同的函数来对每种类型进行查询，但我不喜欢这样，因为我无法对其进行分页。

**我需要进行一次搜索三个表的查询。**

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:25:14.440

这将在找到文本的位置显示 tableName。

```
SELECT 'Product' tableName, type1
FROM table_product
WHERE type1 LIKE '%foo%'
UNION
SELECT 'Customer' tableName, type2
FROM table_Customer
WHERE type2 LIKE '%foo%'
UNION
SELECT 'posts' tableName, type3
FROM table_posts
WHERE type3 LIKE '%foo%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:24:28.433

使用`UNION`（隐式不同）或`UNION ALL`类似：

```
SELECT Name FROM table_products  WHERE Name LIKE '%Foo%'
UNION ALL
SELECT Name FROM table_customers WHERE Name LIKE '%Foo%'
UNION ALL
SELECT Name FROM table_posts     WHERE Name LIKE '%Foo%'
-- This is only an example too. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T15:40:48.943

你也可以这样做：

```
SELECT *
FROM(
  SELECT 1 AS Type, MyColumn FROM table_product
  UNION ALL
  SELECT 2 AS Type, MyColumn FROM table_customers
  UNION ALL
  SELECT 3 AS Type, MyColumn FROM table_posts
) AllResults
WHERE AllResults.MyColumn LIKE '%foo%' 
```

# jquery - 过滤函数总是返回 null

> ID：13142204
> 
> 赞同：2
> 
> 时间：2012-10-30T15:22:39.697
> 
> 标签：jquery

我有一个选择，我想用它来根据数据属性过滤表行。

例如：

```
<select>
    <option value="0">View all</option>
    <option value="1">Foo1</option>
    <option value="2">Foo2</option>
    <option value="3">Foo3</option>
</select>

<table>
    <tr data-foo="1">
        <td>Foo</td>
        <td>Foo</td>
    </tr>
    <tr data-foo="2">
        <td>Foo2</td>
        <td>Foo2</td>
    </tr>
    <tr data-foo="1">
        <td>Foo</td>
        <td>Foo</td>
    </tr>
    <tr data-foo="2">
        <td>Foo2</td>
        <td>Foo2</td>
    </tr>
    <tr data-foo="3">
        <td>Foo3</td>
        <td>Foo3</td>
    </tr>
</table> 
```

我有这个，但`filter`不工作不显示任何行。

```
$("select").change(function() {
    $("tr").hide().filter(function(index){
        return ($(this).data("foo") == this.value || this.value == 0);
    }).show();
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T15:24:27.263

`this`在`filter`函数中，不引用您的选择元素。

```
$("select").change(function() {
    var val = this.value;
    $("tr").hide().filter(function(index){
        return ($(this).data("foo") == val || val == 0);
    }).show();
}); 
```

# objective-c - 在objective-c中，超类如何触发子类中的动作？

> ID：13142208
> 
> 赞同：1
> 
> 时间：2012-10-30T15:22:59.603
> 
> 标签：objective-c, uitableview, superclass

所以我有一个标签栏控制器，其中每个标签都是从我创建的超类扩展的 UITableView。这个超类（显然）扩展了 UITableViewController。

每个 UITableViewController 代表一个选项卡式视图，并有自己的模型来提取特定于每个 TableView 的数据，因此我需要将这些方法和变量与超类分开。

但是，我已经在我的超类中实现了“pull-to-refresh”，并希望从 pull-to-refresh 时调用的 update 方法刷新子类保存的数据。

我是否基本上必须减少我的损失并在我的标签栏中的每个 UITableViewController 中单独实施拉动刷新，或者有没有办法让更新命令在我的标签栏中的每个 UITableViewController 中调用固有的方法（但实现方式不同）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:29:29.587

在您的公共超类中，创建一个方法

```
-(void)onRefresh {
} 
```

那什么也没做。当您需要触发子类中的操作时调用此方法。

在您的每个子类中，实现一个具有相同签名的方法。这些方法会在超类调用时被调用

```
[self onRefresh]; 
```

# php - Memcache 使用 php 进行优化

> ID：13142215
> 
> 赞同：3
> 
> 时间：2012-10-30T15:23:39.133
> 
> 标签：php, optimization, memcached

好的，所以我有一些关于 Memcache 的奇怪问题。我的缓存技术的整个基本思想是将我的 PHP 脚本请求的数据保存在 Memcached 服务器中。我和我的团队面临的主要问题是，有时保存大量数据有时会超过 Memcached 中项目数据大小的 1MB 限制。为了进一步解释该方法，请想象以下情况：我们有大量数据来配置某个对象，并且这些数据包含大量文本和数字……等等。我们需要保存这些对象中的近 200 个项目，因此我们采用的第一种方法是将整个 200 个对象缓存到 Memcached 中的一个大项目中。该项目可能会超过 1Mb 的限制，因此我们认为我们可以采用一种新方法。我们采用的新方法是将配置对象的数据分解成更小的构建块（因为我们没有

问题如下：当你得到更大的数据时，GET速度会改变吗？或者，Memcached 服务器并行处理的请求数量的限制是否会妨碍第二种方法，因为我们将使用多重 GET 来获取配置对象的多个构建块？

我知道这是一个奇怪的问题，但它对我们正在采用的新方法至关重要，因为它将决定我们将使用的构建块的大小，以及是否在需要时向其中添加数据。

编辑 1：请记住，我们可以在第二种方法中使用 MULTIGET 函数，因此我们不必连接到 Memecached 并等待我们获得的每一位数据的响应。因此将使用并行请求来获取多个密钥。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:28:59.713

无需深入了解“您在 memcache 中存储的到底是什么以及为什么不使用其他解决方案（例如带有内存表存储引擎的数据库）......

我想说多个请求的成本确实是一个问题——尤其是在远程节点/主机上运行 memcached 的情况下。对大型对象的单个请求很可能总体上更快——您仍然需要传输相同数量的数据，但与 200 件相比，不会有额外的单独请求开销。

顺便说一句...如果您使用 APC 并且没有很多这些大项目，则可以使用它而不是 memcache 来执行本地用户级内存缓存——最大大小可以通过 php 配置设置轻松调整。您不会获得跨主机的分布式访问/共享的好处，但它既快速又简单。

# acl - 控制器级别权限

> ID：13142218
> 
> 赞同：2
> 
> 时间：2012-10-30T15:23:47.623
> 
> 标签：acl, phalcon

考虑以下代码：

```
$acl = new Phalcon\Acl\Adapter\Memory();

$acl->setDefaultAction(Phalcon\Acl::DENY);

//Register roles
$acl->addRole(new Phalcon\Acl\Role('guest'));
$acl->addRole(new Phalcon\Acl\Role('member', 'guest'));
$acl->addRole(new Phalcon\Acl\Role('admin', 'user'));

$acl->addResource(new Phalcon\Acl\Resource('user'));
$acl->addResource(new Phalcon\Acl\Resource('index'));

$acl->allow('member', 'user', array());
$acl->allow('guest', 'index', array());

$acl->isAllowed('guest','index','index'); //returns false 
```

我想在控制器级别授予权限，我的意思是写时： $acl->allow('member', 'user'); 它授予用户控制器的操作成员，我不想手动添加用户控制器的所有操作。我怎样才能实现这个想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T19:20:56.793

在名为[INVO](https://github.com/phalcon/invo)的示例应用程序中有一个很好的实现 Acl 的示例，[Security](https://github.com/phalcon/invo/blob/master/app/plugins/Security.php)插件实现了一个 Acl 列表，有关公共区域的资源使用“*”作为通配符来为控制器中的每个操作添加规则：

```
<?php

$publicResources = array(
    'index' => array('index'),
    'about' => array('index'),
    'session' => array('index', 'register', 'start', 'end'),
    'contact' => array('index', 'send')
);
foreach($publicResources as $resource => $actions){
    $acl->addResource(new Phalcon\Acl\Resource($resource), $actions);
}

//Grant access to public areas to both users and guests
foreach($roles as $role){
    foreach($publicResources as $resource => $actions){
        $acl->allow($role->getName(), $resource, '*');
    }
} 
```

# jquery - .js.erb 文件中的 JSON::GeneratorError

> ID：13142221
> 
> 赞同：0
> 
> 时间：2012-10-30T15:23:49.960
> 
> 标签：jquery, ajax, ruby-on-rails-3, ruby-on-rails-3.2, erb

我不明白我在做什么错..

我正在尝试捕获未经授权的 401 并在使用提交按钮之前插入带有消息的 div

```
$(function() {
  return $("a").ajaxError(function(event, jqXHR, ajaxSettings, thrownError) {
    if (jqXHR.status === 401) {
      $(".submit").before(<%=j content_tag :div, "Does not compute" %> );
    }
  });
}); 
```

文件名是 home.js.erb

甚至在页面加载之前我得到

```
JSON::GeneratorError in Pages#home

Showing H:/project/app/views/layouts/application.html.erb where line #6 raised:

only generation of JSON objects or arrays allowed
  (in H:/project/app/assets/javascripts/home.js.erb) 
```

第 6 行是指

```
5:   <%= stylesheet_link_tag    "application.css", :media => "all" %>
6:   <%= javascript_include_tag "application" %> 
```

显然出了点问题..但是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:39:09.523

solved by removing the j..

which I don't understand... shouldn't j make it so I can put it in javascript?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-17T07:40:47.480

May be a bug of execjs that time:

[https://github.com/sstephenson/execjs/issues/129](https://github.com/sstephenson/execjs/issues/129)

Just update your execjs version to fix.

# java - On（双击）单击表格单元格

> ID：13142228
> 
> 赞同：-2
> 
> 时间：2012-10-30T15:24:18.667
> 
> 标签：java, jtable, cell

我一直碰到关于这个的javascript问题，找不到关于java的任何东西。

双击 jTable 中的单元格时如何触发某些内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:53:59.123

您可以`MouseListener`在单元格上实现 a 并制作一个`mouseClicked`- 方法，如下所示：

```
@Override
public void mouseClicked(MouseEvent e) {
    if(e.getClickCount()==2){
        doSomething();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:32:25.617

我用过这个： http: [//www.binpress.com/app/doubleclickdetector/345](http://www.binpress.com/app/doubleclickdetector/345)

我认为它可以免费用于非商业用途。

# alignment - 如何让 x 轴刻度更接近 jqPlot 中的轴？

> ID：13142232
> 
> 赞同：0
> 
> 时间：2012-10-30T15:24:23.313
> 
> 标签：alignment, jqplot

我是 jqPlot 的新手，并决定尝试一下。

我面临一个我无法解决的问题。

![在此处输入图像描述](../Images/29b6190fbf4cdf387ffaa4962d50850e.png)

月份的刻度（'Jul' 等）在 x 轴下方太远。有没有办法让刻度更靠近轴？

轴的选项如下：

```
axesDefaults: {
            labelRenderer: $.jqplot.CanvasAxisLabelRenderer
        },
        axes: {
            xaxis: {
                renderer: $.jqplot.CategoryAxisRenderer,
                rendererOptions: {
                    tickRenderer: $.jqplot.AxisTickRenderer, 
                    tickOptions: {
                        size: 2
                    }},
                ticks: ticks,
                label: xAxisTitle,
                min: 0
            },
            yaxis: {
                label: yAxisTitle,
                pad: 1.05
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T06:56:00.203

默认情况下，刻度靠近图表。

应该是容器大小问题。尝试减少它，移动你的标签（也许在你的桌子里面见[图例位置](http://www.jqplot.com/docs/files/jqplot-core-js.html#Legend.location)）

[勾选文档](http://www.jqplot.com/docs/files/jqplot-axisTickRenderer-js.html#%24.jqplot.AxisTickRenderer)

# c++ - 已删除的堆分配项评估为真

> ID：13142233
> 
> 赞同：0
> 
> 时间：2012-10-30T15:24:25.220
> 
> 标签：c++, delete-operator

```
struct Set
{
    int a;
    Set() : a(30){};
    bool operator>( const Set& ref ) const
    {
        return ref.a > this->a;
    };
};

int _tmain(int argc, _TCHAR* argv[])
{   
    vector<Set>m_set;
    m_set.push_back( (*(new Set)) );
    cout << m_set.at(0).a;
    delete &(m_set.at(0));
    if( &(m_set.at(0).a) )
        cout << "valid" << endl;

    return 0;
} 
```

为什么会输出`valid`，使用此方法删除无效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:26:40.413

当您访问已删除的对象时，行为未定义。任何事情都有可能发生。

编辑：而且，更重要的是，当您删除一个不是用 new 创建的对象时，行为是未定义的。任何事情都有可能发生。这就是这里的代码所做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:49:00.040

*您永远不会拥有指向您*分配的对象的引用或指针。矢量将*复制*对象，但您已经丢失了原始对象本身的所有轨迹，因此无法恢复或删除它。

您需要执行以下操作之一：

```
T * p = new T;
delete p;

T & r = *new T;
delete &r; 
```

不要使用第二个版本。

# ios - 此类 Mac 不支持此应用

> ID：13142234
> 
> 赞同：1
> 
> 时间：2012-10-30T15:24:26.243
> 
> 标签：ios, xcode, macos, build, compilation

我有一个 Xcode 项目，其中包含不同版本的游戏：iOS（iPhone 和 iPad）和 OS X。

我对每个设备、平台都有不同的目标。每个应用程序都可以在模拟器、设备等上正常运行。我什至目前在 iOS AppStore 中有一些构建。

我的问题是 OS X 构建，它在从 Xcode 启动时运行得很好，但是在常规应用程序图标之上有这个禁止图标。

![带有禁止标志的图标](../Images/9681a5ea10932b7becb34a701361f39d.png)

问题是，当我尝试导出/存档此构建时，导出的应用程序仍然有这个禁止标记。当我从 Finder 启动它时，我收到以下消息。

```
You can’t open the application “Foo bar” because it is not supported on this type of Mac. 
```

我确实尝试运行以下命令：

```
file Contents/MacOS/Foobar 
```

哪个输出：

```
Contents/MacOS/Foobar: Mach-O 64-bit executable x86_64 
```

我认为它应该在我的 Macbook Air 上运行良好，而且从 Xcode 调试命令启动时运行良好。

有人有想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T17:47:28.570

我忘记从我的 OS X Info.plist 文件中删除此设置：

```
Application requires iPhone environment --> YES 
```

感谢米歇尔的大力帮助！旗帜引导我找到解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:02:53.157

从 Xcode 启动时，编译器使用 Debug 构建配置。在构建存档时，它使用发布（或分发或您在方案定义中选择的内容）。在您的 OS X 目标中，检查 Build Settings 中的 Architectures 和 Valid Architectures 标志，它们应该在 Debug 和 Release（或 Distribution 或您所拥有的）之间有所不同。

# ruby - 从 XML 中获取属性值

> ID：13142243
> 
> 赞同：2
> 
> 时间：2012-10-30T15:24:43.393
> 
> 标签：ruby, nokogiri

我有这块 XML：

```
<show name="Are We There Yet?">
  <sid>24588</sid>
  <network>TBS</network>
  <title>The Kwandanegaba Children's Fund Episode</title>
  <ep>03x31</ep>
  <link>
    http://www.tvrage.com/shows/id-24588/episodes/1065228407
  </link>
</show> 
```

我试图得到“我们到了吗？” 通过[Nokogiri](http://nokogiri.org)。它实际上是“show”的“name”属性。我正在努力弄清楚如何解析这个。

`xml.at_css('show').value`是我最好的猜测，但不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T20:45:19.693

您可以使用以下内容：

```
xml.at('//show/@name').text 
```

这是从元素返回`name`属性的XPath 表达式。`show`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T15:41:33.050

采用：

```
require 'nokogiri'

xml =<<EOT
<show name="Are We There Yet?">
  <sid>24588</sid>
  <network>TBS</network>
  <title>The Kwandanegaba Children's Fund Episode</title>
  <ep>03x31</ep>
  <link>
    http://www.tvrage.com/shows/id-24588/episodes/1065228407
  </link>
</show>
EOT

xml = Nokogiri::XML(xml)
puts xml.at('show')['name']
=> Are We There Yet? 
```

`at`接受 CSS 或 XPath 表达式，因此请随意使用它。如果您知道需要将表达式分别声明为 CSS 或 XPath，请使用`at_css`or 。返回一个节点，因此您可以像引用哈希一样简单地引用节点的参数。`at_xpath``at`

# javascript - 通过 AJAX 提交表单不起作用

> ID：13142244
> 
> 赞同：1
> 
> 时间：2012-10-30T15:24:43.660
> 
> 标签：javascript, jquery, ajax, forms, submit

我的表单不会通过 AJAX 提交来显示 PHP 页面的返回，“myscript.php”。

这是我正在使用的 HTML：

```
<form name="myform" id="myform" method="post" action="#" enctype="multipart/form-data" accept-charset="utf-8" class="taxonomy-drilldown-dropdowns">

<ul>

    <li>
    <label>Destination:</label>
    <select name="city" id="city">
        <option class="level-0" value="atlanta">Atlanta</option>
        <option class="level-0" value="miami">Miami</option>

    </select>
    </li>

</ul>

<input class="srch_btn" type="button" value="{{submit-text}}" />

</form> 
```

这是页面前面的javascript：

```
jQuery(document).ready(function($) {
   $('#city').change(function() {
  $(this).parents("form").submit();
   });
$('#myform').submit(function() { 
  $.post(
     'myscript.php',
     $(this).serialize(),
     function(data){
        $("#mydiv").html(data)
     }
  );
  return false;   
   });
}); 
```

这是 myscript.php：

```
<?php
   if ($_POST['city'] == "atlanta") {
  echo "Div contents 1";
   }
   if ($_POST['city'] == "miami") {
  echo "Div contents 2";
   }
?> 
```

此时提交按钮不会响应或尝试访问“myscript.php”文件。帮助表示赞赏。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:40:37.363

最好使用`.closest()`而不是`.parents()`在这种情况下使用。作为父母选择器获取与选择器匹配的所有祖先。

```
$('#city').change(function() {
  $(this).closest("form").submit();
}); 
```

并停止使用默认操作`e.preventDefault`，而不是`return false`

```
$('#myform').submit(function(e) { 

     e.preventDefault();
     // Your code here
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:49:14.850

在您的 HTML 代码中，我认为您应该更改`input type=button`为`input type=submit`

```
<input class="srch_btn" type="submit" value="{{submit-text}}" /> 
```

然后，当您单击该按钮时，表单将提交到您的 php 页面。

另外，关于 jQuery 代码中的选择更改事件，我认为您可以尝试以下选择器，因为您的 HTML 中有 name/id 属性。

```
$('#city').change(function() {
  $('#myform').submit();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T15:32:33.323

您的代码的一个问题是它实际上并没有阻止提交表单。`return false;`在 jQuery 中并不像您认为的那样完全有效。相反，要停止默认操作，您必须执行类似的操作。

```
$('#myform').submit(function(event) {
   event.preventDefault(); 
```

[http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

最重要的是，如果你不希望表单提交发生，并且你想用你自己的 AJAX 提交替换它，你为什么在这段代码中调用表单提交呢？为什么不直接将 AJAX 放入您的更改代码中？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T16:01:24.457

dqhendricks 是对的——当您可以直接访问 ajax 时，为什么还要使用表单提交？在下面的示例中，我在表单下方添加了一个 div (#responder) 以显示输出。试一试——你会发现它工作得很好。

你真的不需要按钮，虽然我把它留在那里，因为数据是在下拉列表更改的那一刻发送/接收的。您将看到您的消息出现在表单下方的 div 中。

修改后的 HTML：

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<form name="myform" id="myform" method="post" action="#" enctype="multipart/form-data" accept-charset="utf-8" class="taxonomy-drilldown-dropdowns">
    <ul>
        <li>
            <label>Destination:</label>
            <select name="city" id="city">
                <option class="level-0" value="atlanta">Atlanta</option>
                <option class="level-0" value="miami">Miami</option>
            </select>
        </li>
    </ul>
    <input class="srch_btn" type="button" value="Go" />
</form>

<div id="responder"></div> 
```

修订的 JAVASCRIPT/JQUERY：

```
$(document).ready(function() {

    $('#city').change(function() {
        //var cty = $('#city').val();
        $.ajax({
            type: "POST",
            url: "myscript.php",
            data: "city=" + $(this).val(),
            success:function(data){
                $('#responder').html(data);
            }
        });
    });
}); 
```

# python - 如何为 Pytables EArray 创建定义 atom

> ID：13142245
> 
> 赞同：3
> 
> 时间：2012-10-30T15:24:45.167
> 
> 标签：python, numpy, pytables

尝试基于 numpy recarray 中的一列在运行时创建 Pytables EArray。如果我使用 createArray，这似乎可行，因为我可以简单地将从 recarray 中提取的 numpy 数组传递给它。但是，对于 createEArray 我需要定义原子 - 这会导致问题

在示例中，MyRecArray 是一个记录数组，其中包含一维列数组，Myhdf5 是一个预定义的 Pytables 文件，而 Mynode 是该文件中的一个预定义组，EArray 将挂起该组。

```
 Myfield = MyRecArray[Colname]
     afieldtype = Myfield.dtype  
     Myatom = tables.atom.Atom(afieldtype, (1,), -9999) 
     MyEarray = Myhdf5.createEArray(Mynode, Colname, Myatom, (0,))
     MyEarray.append(Myfield )          
     MyEarray.flush()
     MyEarray.close() 
```

使用此代码给出错误：

```
 NotImplementedError: ``Atom`` is an abstract class; 
     please use one of its subclasses 
```

我可能可以使用基于数组时间的 case 语句编写一个子例程并传回一个原子，但我只是想知道是否有一种通用方法可以通过将要创建的数组类型传递给它来创建这样一个原子，而不必调用针对不同数据类型的特定函数，例如“tables.atom.FloatAtom(....)”

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-18T13:59:13.533

我相信使用该功能：

```
tables.Atom.from_dtype(afieldtype, dflt=-9999) 
```

将允许您在不走子程序路线的情况下创建原子。形状包含在数据类型“afieldtype”中（例如`dtype([('col1', '<f8', (10,))])`）

# jboss7.x - 暂停 MDB 消息处理，直到 @StartupBean 完成初始化

> ID：13142246
> 
> 赞同：5
> 
> 时间：2012-10-30T15:24:47.617
> 
> 标签：jboss7.x, ejb-3.1

在将 JBoss 5 应用程序迁移到 JBoss AS 7 (7.1.1.FINAL) 时，我遇到了新的 JMS 消息驱动 EJB 的问题。在消息处理中，必须检查一些主数据字段。为提高性能，该主数据应使用`@Singleton @Startup`EJB 预加载到缓存结构中，加载数据大约需要 30 秒。

我的问题是，即使缓存没有完全初始化，队列消息处理也会开始，导致消息验证错误。

我试图定义 MDB 和启动 EJB 之间的依赖关系，但据我了解，`@DependsOn`注释仅适用于`@Singleton`EJB。所以很明显我的解决方案不起作用;-)

启动bean代码：

```
@Singleton
@Startup
public class StartupBean {

    @PostConstruct
    void atStartup() {
        // TODO load master data cache (takes about 30 seconds)
    }

    @PreDestroy()
    void atShutdown() {
        // TODO free master data cache
    }
} 
```

注意：我从示例中删除了真实代码以使其更易于阅读:-)

消息驱动的bean代码：

```
@MessageDriven(name="SampleMessagingBean", activationConfig = {
        @ActivationConfigProperty(propertyName="destinationType", propertyValue="javax.jms.Queue"),
        @ActivationConfigProperty(propertyName="destination", propertyValue="jms/SampleQueue"),
        @ActivationConfigProperty(propertyName = "acknowledgeMode", propertyValue = "Auto-acknowledge")
    })
    @DependsOn("StartupBean")
    public class SampleMessagingBean implements MessageListener {

    public void onMessage(Message message) {
        // TODO validate message using master data cache
    }
} 
```

**问题：**如何在启动 bean 完成加载缓存之前暂停消息处理？

任何建议都非常感谢:-)！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T16:35:58.980

首先，我认为在 mdb 中注入单例 EJB 足以延迟消息消耗但是不，有时它会在单例-ejb 的 @PostConstruct 完成之前开始消耗消息。所以也添加了一个方法调用，它开始工作

这适用于 glassfish，但我看不出它不应该适用于 jboss 的原因

单例-Ejb：

```
@Singleton
@Startup
public class SingletonBean {
    private Logger logger = Logger.getLogger(getClass().getName());

    private boolean init = false;

    public boolean isInit() {
        return init;
    }

    @PostConstruct
    public void init() {
        logger.error("singleton init start");

        //Do something that takes time here

        init = true;
        logger.error("singleton init end ");
    }
} 
```

和 mdb：

```
@MessageDriven(...)
public class SomeMdb implements MessageListener {
    private Logger logger = Logger.getLogger(getClass().getName());

    @EJB
    SingletonBean sb;

    @PostConstruct
    public void init() {
        logger.error("mdb init start");
        if (!sb.isInit()) {
            logger.error("never happens");
        }
        logger.error("mdb init complete");
    }

    public void onMessage(Message message) {
        logger.error("onMessage start");
    }
} 
```

现在它总是在 mdb 完成 init 之前等待 SingletonBean 完成 init（如日志中所示）

```
19:51:51,980 [ad-pool-1; w: 3] ERROR SomeMdb       - mdb init start
19:51:52,122 [ad-pool-4848(4)] ERROR SingletonBean - singleton init start
19:51:56,316 [ad-pool-4848(4)] ERROR SingletonBean - singleton init end 
19:51:56,317 [ad-pool-1; w: 3] ERROR SomeMdb       - mdb init complete
19:51:56,317 [ad-pool-1; w: 3] ERROR SomeMdb       - onMessage start 
```

# ios - iOS：如何创建一对一或一对多的视频聊天

> ID：13142247
> 
> 赞同：3
> 
> 时间：2012-10-30T15:24:47.467
> 
> 标签：ios, videochat

我必须创建一个应用程序，用户应该能够与一个联系人（一对一）或多个（一对多）开始视频聊天。我几乎一整天都在谷歌上搜索，但没有发现任何有用的东西。我只找到了[TokBox](http://www.tokbox.com/opentok/ios/docs/index.html) API。

我记得我的 Apple 上有一个名为 cam（或类似的东西）的应用程序，我在想是否有任何公共 API 可以用于此。

非常感谢任何帮助。

肿瘤坏死因子

# ios - 通过 XCode 安装应用程序时推送通知有效，但通过 iTunes 安装时推送通知不一致

> ID：13142250
> 
> 赞同：1
> 
> 时间：2012-10-30T15:24:48.823
> 
> 标签：ios, xcode

摘要：如果我的应用程序是通过 XCode 安装的，推送通知*总是*可以正常工作，但如果通过 iTunes 安装，那么它们是否工作取决于用于签署分发的配置文件。但是一些曾经有效的配置文件组合不再有效，而有些现在无效。

我的主要问题是应该使用哪种配置文件组合来签署使用推送通知的临时分发，次要问题是为什么我观察到随着时间的推移行为不一致。

详细信息：我正在开发一个使用 APNs 的应用程序，并且当应用程序作为临时应用程序分发并通过 iTunes 安装时，在获取通知到达时遇到问题。这些问题显然与它没有使用正确的配置文件签名有关，但过去几周的一些观察让我对我应该使用哪些配置文件来签署分发感到困惑。

我一直认为在需要签名的两个阶段都应该使用 ad-hoc 配置文件 - 首先在构建存档时将其设置为 XCode 中的代码签名身份，然后对分发进行签名。我一直在这样做并且它一直在工作 - 设备已经能够接收推送通知。

几周前，设备停止接收推送通知，尽管如果构建使用我的开发配置文件签名并通过 XCode 安装，则能够接收它们，但只有 ad-hoc 发行版停止接收它们。经过几天的尝试，我最终删除了推送和临时配置文件并创建了新的配置文件，一切都恢复正常了……直到几天前发生了同样的事情。

我再次创建了一个新的临时配置文件，但我仍然无法让临时分发接收推送通知（尽管如果应用程序是通过 XCode 安装的，设备仍会再次接收它们）。最终，我从使用 ad-hoc 配置文件签署发行版更改为使用 Apple 推送配置文件，事情又开始工作了。所以现在我很困惑：

```
- am I supposed to sign ad-hoc distrubtions using a) the ad-hoc profile for the archive and then ad-hoc profile again when signing the distribtion of the archive or b) the ad-hoc profile for the archive and the push profile when signing the distribution of the archive? 
```

对于 XCode 安装，我将代码签名身份设置为我的开发配置文件。对于临时分发，我将存档的代码签名身份设置为临时配置文件，然后在存档的分发部分再次使用临时或推送对其进行签名。OR 的存在是因为有时一种组合有效，有时另一种组合有效，因此我的整个问题是它应该是哪种组合以及为什么我观察到哪种组合有效而哪种无效的不一致。

谢谢

编辑：这是一个配置文件列表，即如果我登录到 Apple 配置门户，然后单击配置选项卡，然后单击开发选项卡，它会列出这些：

1) Apple Push Profile - 需要启用 APNs

2) NNN Development profile（其中NNN是项目名称）

3) iOS 开发简介

4) iOS 团队配置文件

如果我单击配置选项卡，然后在分发选项卡上列出这些：

1) 临时

在我几个月来对书籍、文档、论坛的所有广泛搜索中，我还没有找到*明确*的解释，说明在什么情况下应该使用上述哪些组合*以及哪些考虑推送通知*。一个问题是大多数文档和示例都没有考虑推送通知，这是一个关键的遗漏，因为如果没有以正确的顺序正确组合配置文件，应用程序可以安装到设备上，但永远不会收到推送通知。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T02:24:56.817

我也有过类似的痛苦。

我回应如下：

> *   我是否应该使用 a) 存档的 ad-hoc 配置文件，然后在签署存档的分发时再次使用 ad-hoc 配置文件或 b) 存档的 ad-hoc 配置文件和推送配置文件签署档案的分发？

使用 ad-hoc 或开发对归档构建进行签名并不重要。不同之处在于 Organizer-Archives 中分发按钮时的签名。

**使用开发供应标识对其进行签名。不是临时的。**

我发现签名令人困惑，因为有 2 个以上的地方可以定义签名操作。但是在这种特定情况下，我已经完成了受控测试，并发送了临时分发，我什至不知道是否有可能在应用正式发布之前将远程通知发送到这些应用中，并且可以使用生产网关推送.

尽管如此，我相信在应用商店发布之前推动临时分发应该是可能的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-26T23:29:44.533

两天后试图找出同样的问题出了什么问题，我发现当通过xcode安装时，通知与开发（gateway.sandbox.push.apple.com）url一起工作。将其导出为 ipa (ad-hoc) 并手动安装需要从生产 url gateway.push.apple.com 发送通知（包括生产密钥）。因此，在创建了这两个密钥之后，我设法在处理 xcode 时使用开发 url 发送通知，并在从导出的 ipa 安装时使用生产发送通知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T15:32:44.913

如果您处于使用开发应用程序证书和配置的开发阶段，您还应该为 PUSH 通知生成开发证书，该证书必须安装在服务器上以通过 Apple 测试 APNS 进行身份验证。
如果处于预生产或生产阶段，您应该使用分发证书和 ADHOC 或 APPSTORE 配置为您的应用程序签名，您还应该生成一个分发 PUSH 证书，该证书必须安装在与苹果 APNS 通信的服务器上。我可以建议您密切注意防火墙阻止的端口（这种痛苦也是因为苹果的 apns 具有广泛的 ip 范围）并注意您的应用程序的苹果 ID 必须与曾经用于生成推送证书的 ID 匹配。希望这会有所帮助，
安德里亚

# php - Shell 和 sed：将数组元素添加到 PHP 文件

> ID：13142254
> 
> 赞同：0
> 
> 时间：2012-10-30T15:24:59.043
> 
> 标签：php, bash, shell

我有一个 php 文件：

```
<?php
return array(
    'modules' => array(
        'Application',
        'DoctrineModule',
        'DoctrineORMModule'
    ),
); 
```

由于我很懒，我正在编写一个脚本，通过一个简单的调用将一个元素添加到“模块”数组中：

```
$ sh myscript.sh 'NewModule' 
```

NewModule 应该添加在最后一个 'modules' 元素之后。

我尝试使用“sed”命令执行此操作，但还没有成功。欢迎任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:40:33.670

这是一种使用方法`GNU sed`：

```
sed '/modules..=>.array/,/),/ { /[^(,]$/ s//&,\n        '\''NewModule'\''/ }' file.php 
```

结果：

```
<?php
 return array(
    'modules' => array(
        'Application',
        'DoctrineModule',
        'DoctrineORMModule',
        'NewModule'
    ),
); 
```

如果您愿意，可以使正则表达式更加严格。但我会把这份工作留给你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T17:25:06.337

正如我在评论中建议的那样，我认为更简单的方法是使用 读取新数据[`file()`](http://php.net/file)，这已经将事物转换为数组。

```
<?php

$thing=array(
    'modules' => array(
        'Application',
        'DoctrineModule',
        'DoctrineORMModule'
    )
);

foreach(file("modules.txt") as $new) {
  $thing['modules'][]=trim($new);
}

print_r($thing); 
```

结果：

```
[ghoti@pc ~]$ cat modules.txt
foo
bar
[ghoti@pc ~]$ echo "snerkle" >> modules.txt 
[ghoti@pc ~]$ php -f myphpfile.php 
Array
(
    [modules] => Array
        (
            [0] => Application
            [1] => DoctrineModule
            [2] => DoctrineORMModule
            [3] => foo
            [4] => bar
            [5] => snerkle
        )

)
[ghoti@pc ~]$ 
```

使用的唯一理由`foreach(){}`是让你`trim()`每个元素。如果您不介意`['modules']`末尾有换行符的元素，您可以简单地将循环替换为：

```
$thing['modules']=array_merge($thing['modules'], file("modules.txt")); 
```

我不确定你`return`是关于什么的。也许您问题中的代码是函数的摘录。无论如何，这应该足以让这个想法得到理解。

# c++ - std::condition_variable::wait_for 和 std::condition_variable::wait_until 有什么区别？

> ID：13142255
> 
> 赞同：33
> 
> 时间：2012-10-30T15:25:00.273
> 
> 标签：c++, multithreading, c++11, condition-variable

[我使用](http://en.cppreference.com/w/cpp/thread/condition_variable)的参考通过以下方式解释了这两者：

*   `wait_for`“阻塞当前线程，直到条件变量被唤醒或在指定的超时持续时间之后”

*   `wait_until`“阻塞当前线程，直到条件变量被唤醒或到达指定的时间点”

有什么不同？将`wait_until`自旋，以便线程在收到信号时可以准确地（或多或少地）继续，而`wait_for`只是在那时将线程重新添加到调度中？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-30T15:28:07.733

不同之处在于等待持续时间的表示方式：`wait_for`需要一个相对时间（“等待最多 10 秒”），而`wait_until`需要一个绝对时间（“等到 2012 年 10 月 30 日 12:00”）。

比较时间参数的声明：

```
// wait_for:
const std::chrono::duration<Rep, Period>& rel_time

// wait_until:
const std::chrono::time_point<Clock, Duration>& abs_time 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-10-30T15:36:46.197

您的问题和其他答案都重复了差异；`wait_for`等待指定的时间并一直`wait_until`等到指定的时间点，但没有说明其含义。

A`time_point`有一个关联的时钟，该时钟用于确定是否到了适当的时间。这意味着该功能会考虑时钟调整`wait_until`。`wait_until(..., system_clock::now() + std::chrono::seconds(10))`如果时钟恰好在等待结束前一小时调回，则可能会等待一个小时零 10 秒。

持续时间没有任何关联的时钟，因此`wait_for`选择自己的时钟。该标准规定它使用std::steady_clock，它不能被调整并且以相对于实时的稳定速率前进。这意味着`wait_for`无论对任何时钟进行任何调整，都会等待指定的时间。`wait_for(..., std::chrono::seconds(10))`保证等待 10 秒（+ 一些时间让实现工作和调度问题）。

旋转与休眠线程没有区别；as`wait_for`被指定为表现得好像它调用`wait_until`了`steady_clock::now() + duration`.

* * *

这是标准中详细说明的部分：

### [thread.req.timing] 30.2.4/2-4

> ²实现在从超时返回时必然会有一些延迟。中断响应、函数返回和调度中的任何开销都会导致“实现质量”延迟，表示为持续时间*D* [i]。理想情况下，此延迟为零。此外，任何对处理器和内存资源的争用都会导致“管理质量”延迟，表示为持续时间*D* [m]。延迟持续时间可能因超时而异，但在所有情况下，越短越好。
> 
> ³名称以结尾的成员函数`_for`采用指定持续时间的参数。这些函数产生相对超时。实现应该使用稳定的时钟来测量这些功能的时间。给定一个持续时间参数*D* [t]，超时的实时持续时间是*D* [t]  +  *D* [i]  +  *D* [m]。
> 
> ⁴名称以结尾的成员函数`_until`采用指定时间点的参数。这些函数产生绝对超时。实现应使用时间点中指定的时钟来测量这些功能的时间。给定一个时钟时间点参数*C* [t] ，当在超时期间没有调整时钟时，从超时返回的时钟时间点应该是 *C* [t] + *D* [i] + *D* [m 。]如果在超时期间将时钟调整到时间*C* [a]，则行为应如下所示：
>          — 如果*C* [a] > *C* [t]，等待函数应该尽快唤醒，即*C* [a] + *D* [i] + *D* [m]，因为超时已经满足。[*注意：*当针对稳定时钟测量时，此规范可能会导致等待的总持续时间减少。*—尾注* ]
> 
>         — 如果*C* [a] <= *C* [t]，等待函数不应该超时，直到 `Clock::now()`返回时间*C* [n] >= *C* [t]，即在*C* [t] + *D* [i] + *D* [m唤醒]. [ *注意：*当时钟向后调整时，此规范可能会导致在针对稳定时钟测量时等待的总持续时间增加。当时钟向前调整时，此规范可能会导致在针对稳定时钟测量时等待的总持续时间减少。*—结束注释*]
> 
> 实现应在上述指定时间的任何时间点从此类超时返回到它将从*C* [t]与调用 `_until`函数的时间点之间的差值的稳定时钟相对超时返回的时间。[*注意：*当时钟向前调整时，实现应该减少等待的持续时间。*——尾注*]

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-30T15:28:03.207

*   `wait_for`将等待一定的时间。例如，它将等待两秒钟。
*   `wait_until`将等到某个时间到达。例如，它将等到时钟到达 2013 年 7 月 23 日晚上 11:22:34。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-09-23T18:32:35.220

[正如 Anthony Williams 的书中](https://rads.stackoverflow.com/amzn/click/com/1933988770)所解释的，这是它们用法上的一个重要区别：

考虑以下示例，其中条件变量等待超时：

```
std::condition_variable cv;
bool done;
std::mutex m;

bool wait_loop()
{
    auto const timeout= std::chrono::steady_clock::now()+
    std::chrono::milliseconds(500);
    std::unique_lock<std::mutex> lk(m);
    while(!done)
    {
       if(cv.wait_until(lk,timeout)==std::cv_status::timeout)
          break;
    }
    return done;
} 
```

> 如果您没有将谓词传递给等待，这是等待具有时间限制的条件变量的推荐方法。这样，循环的总长度是**有界**的。正如您在 4.1.1 节中看到的，如果您不传入谓词，则在使用条件变量时需要循环，以处理虚假唤醒。如果您 `wait_for()`在循环中使用，您可能会在虚假唤醒之前等待几乎全部时间，并且下一次等待时间再次开始。这可以重复任意次数，使总等待时间**无界**。

`wait_for`IMO，这是一种无法轻易更换的场景`wait_until`，因为它具有重置性质。

# c++ - 字符到运算符 C++

> ID：13142270
> 
> 赞同：7
> 
> 时间：2012-10-30T15:26:05.007
> 
> 标签：c++, char, operators

嘿，我想知道如何将字符“+”变成运算符。例如，如果我有

```
char op = '+'
cout << 6 op 1; 
```

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T15:29:10.633

简单的方法是使用 switch 语句

```
switch (op)
{
case '+':
  res = x + y;
  break;
case '-':
  res = x - y;
  break;
case '*':
  res = x * y;
  break;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T15:29:32.190

我不认为有一种方法，就像你在那里写的那样，但你可以做一些 hacky 之类的事情

```
int do_op(char op, int a, int b)
{
    switch(op)
    {
    case '+':
       return a+b;
    break;
    case '-':
       return a-b;
    break;
    case '*':
       return a*b;
    break;
    case '/':
       return a/b;
    break;
    default:
        throw std::runtime_error("unknown op")
    }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T16:35:31.513

您可以使用老式的#define：

```
#define op +
std::cout << 6 op 1; 
```

然而，它的用途有限。

如果您想在纯 C++ 中执行此操作，则必须显式或在外部库中使用 switch 语法（如 tetzfamily.com/temp/EvalDoc.htm 或 codeproject.com/Articles/7939/C-based-Expression-评估库））。

另一种方法是使用外部程序，例如 bc：

```
char op = '+';
std::string s;
s += "6";
s += op;
s += "4";
system(("echo " + s + "|bc").c_str()); 
```

如果您想稍后使用结果，请检查[popen](http://www.cplusplus.com/forum/beginner/28982/)函数或[C++ 等效](http://pstreams.sourceforge.net/)项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-27T17:58:04.097

```
public class ArithmeticOps {

   static int testcase11 = 11;
   static int testcase12 = 3;
   static char testcase13 = '/';

   public static void main(String args[]){
        ArithmeticOps testInstance = new ArithmeticOps();
        int result = testInstance.compute(testcase11,testcase12,testcase13);
        System.out.println(result);
   } 

public int compute(int a, int b,char operator){
    int i=0;
    switch(operator)
    {

    case '+' :
        i= a+b;
        break;
    case '-' :
        i= a-b;
        break;
    case '*' :
        i= a*b;
        break;
    case '/' :
        i= a/b;
        break;
    case '%' :
        i= a%b;
        break;
    case '^' :
        i= a^b;
        break;
    default:
        i=0;
    }
    return i;

} 
```

}

# performance - R和Matlab速度之间的差异

> ID：13142273
> 
> 赞同：2
> 
> 时间：2012-10-30T15:26:21.070
> 
> 标签：performance, r, matlab

> **可能重复：**
> [为什么循环在 R 中很慢？](https://stackoverflow.com/questions/7142767/why-are-loops-slow-in-r)

考虑以下任务。一个数据集有 20,000 个“用户”的 40 个变量。每个用户有 1 到 150 个观察值。所有用户都堆叠在一个称为数据的矩阵中。第一列是用户的 id，用于标识用户。所有 id 都存储在称为 userid 的 20,000 X 1 矩阵中。

考虑以下 R 代码

```
useridl = length(userid)
itime=proc.time()[3]    
for (i in 1:useridl) {
temp =data[data[,1]==userid[i],]
   }
 etime=proc.time()[3]
 etime-itime 
```

这段代码只经过 20,000 个用户，每次都创建临时矩阵。使用属于 userid[i] 的观察子集。在 MacPro 中大约需要 6 分钟。

在 MatLab 中，同样的任务

```
tic
for i=1:useridl
temp=data(data(:,1)==userid(i),:);
end
toc 
```

需要 1 分钟。

为什么R这么慢？这是标准任务，我在这两种情况下都使用矩阵。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T16:04:57.767

正如@joran 评论的那样，这是不好的 R 实践。`lapply`无需重复对原始矩阵进行子集化，只需将子集放在列表中一次，然后使用或类似方法遍历列表。

```
# make example data
set.seed(21)
userid <- 1:1e4
obs <- sample(150, length(userid), TRUE)
users <- rep(userid, obs)
Data <- cbind(users,matrix(rnorm(40*sum(obs)),sum(obs),40))

# reorder so Data isn't sorted by userid
Data <- Data[order(Data[,2]),]
# note that you have to call the data.frame method explicitly,
# the default method returns a vector
system.time(temp <- split.data.frame(Data, Data[,1])) ## Returns times in seconds
#    user  system elapsed 
#    2.84    0.08    2.92 
```

我的猜测是垃圾收集器正在减慢你的 R 代码，因为你不断地覆盖`temp`对象。

# ckeditor - 有没有办法在 CKEditor 中设置默认字体和字体大小？

> ID：13142277
> 
> 赞同：7
> 
> 时间：2012-10-30T15:26:24.643
> 
> 标签：ckeditor

我一直在寻找解决方案一段时间，我发现的唯一修复只影响文本在编辑器本身中的显示方式，而不影响生成的文本在发送/保存到其他地方时的外观。我说的是 CSS 修复和类似的东西。

我正在使用 CKEditor 通过我们的 Web 应用程序撰写和发送电子邮件，虽然 css 修复更改了编辑器本身显示的字体，但收到的电子邮件仍显示在 TNR 或从电子邮件客户端继承的任何内容中。当然，除非我从插件中更改每个段落的字体和大小。

从我在插件中设置字体和大小时所注意到的情况来看，CKEditor 使用新更改的样式（例如`<span style="font: Arial"><span style="font-size: 12"></span></span>`）创建了一个跨度（实际上是两个，一个带有字体，一个带有大小），我认为我可以用我想要的字体和大小样式将整个结果包装在 span 或 div 中，但这可能会干扰用户的模板和样式。

有没有办法从插件本身设置默认文本样式（如电子邮件收件人所见），或者我必须想出一个破解它的方法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T15:59:09.783

这是我发现强制 ck 编辑器创建默认字体的唯一方法。IE 即使没有选择字体，它也会将输入的文本包装在（默认）字体范围内，因此将输出格式化文本。如果您希望更改具有通用性，请将以下内容添加到 config.js。否则，也应该可以将其添加到一个实例中。虽然我没试过。

```
config.font_defaultLabel = 'Arial'; 
```

这将使下拉菜单默认为“Arial”。尽管即使这样也不能像我希望的那样工作。首先，编辑器必须被激活（不仅仅是加载）才能将下拉菜单设为默认值。然后与手动选择不同，该值不会在下拉框中突出显示。它只是显示。

然后将其添加到您的默认配置选项下方：

```
CKEDITOR.on( 'instanceReady', function( ev ) {
     ev.editor.setData('<span style="font-family:Arial, Verdana, sans-serif;">&shy;</span>');
}); 
```

这将使用您需要的跨度预先填充文本区域。但是，您必须在 span 标签中包含一些字符才能强制此“hack”工作。所以你会在你的输出中遇到你并不真正想要的东西。我在网上某处找到的原始版本使用：

```
&shy; 
```

这似乎相对无害。

我一直在寻找并寻找更好的方法（如果有人知道，我会很高兴）。大多数人只是说捕获输出并重新格式化它。这对我来说真的不是一个选择。也可以使用自定义插件来完成此操作。这对我来说也不太可行。

希望这可以帮助某人至少节省一些时间。

PS 原件来自 CK editor 的支持板。这是链接：[论坛](http://ckeditor.com/forums/Support/Default-Font-0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T22:19:14.860

如果您想在编辑器之外更改文本的样式，那么您必须对其进行样式设置......外部编辑器:)。电子邮件样式表中的 AFAIK 无法使用，因此剩下的就是使用`div`内联样式进行包装。

要在 CKEditor 中获得相同的结果，您应该编辑`contents.css`和设置与包装器`body`相同的样式。`div`

下一步是从工具栏中删除格式组合，因为它基于标记。对于电子邮件，最好使用样式组合，因为您可以定义适用于每种样式的内联样式、标签和属性。检查`styles.js`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-08T11:59:32.170

将此添加到您的 config.js 文件中

```
 CKEDITOR.config.font_defaultLabel = 'Arial';
 CKEDITOR.config.fontSize_defaultLabel = '20'; 
```

然后当你的 CKEditor 被触发时它会被改变。

# bash - 命令行菜单选项

> ID：13142284
> 
> 赞同：0
> 
> 时间：2012-10-30T15:26:42.410
> 
> 标签：bash, scripting

我一直试图让我的菜单工作，但似乎它一次只接受一个参数/选项，我怎样才能让它接受多个选项？

```
#!/bin/bash

##### Main

function usage
{
    echo "
usage: infinidb [[-f file ] [-i] | [-h]]  name ...
}

        while [ "$1" != "" ]; do
        case $1 in
            -f | --file )           shift
                                    filename=$1
                                    ;;
            -i |  )                 filename2=$2
                                    ;;
            -h | --help )           usage
                                    exit
                                    ;;
            * )                     usage
                                    exit 1
        esac
        shift
    done

            echo $filename 
            echo $filename2 
```

运行脚本时

以下输出显示显示

./script.sh -f 苹果 -i 树

苹果树

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:34:21.003

这对我有用

```
#!/bin/bash

    while [ "$1" != "" ]; do
    case $1 in
        -f | --file )           shift
                                filename=$1
                                ;;
        -i )                 filename2=$2
                                ;;
    esac
    shift
done

        echo $filename 
        echo $filename2 
```

只有一个问题`-i | )`

# android - 使用 gradle 构建 android 项目失败

> ID：13142289
> 
> 赞同：4
> 
> 时间：2012-10-30T15:26:57.293
> 
> 标签：android, build, gradle

我无法使用 Gradle 构建一个简单的 android 项目。我的构建文件如下：

```
buildscript {
    repositories {
      mavenCentral()
      // To use a development snapshot version of the plugin, add the
      // Sonatype Snapshots repository.
      maven {
        url "https://oss.sonatype.org/content/repositories/snapshots"
      }
    }

    dependencies {
      classpath 'org.gradle.api.plugins:gradle-android-plugin:1.2.1'
    }
  }

  apply plugin: 'android'

  repositories {
      mavenCentral()
  }

  // Sets the package version
  version = "1.0.0"

  // Signing configuration, valid for all builds (1)
  androidSignAndAlign {
    keyStore = "path/to/my/keystore"
    keyAlias = "my-key-alias"
    keyStorePassword = "mystorepass"
    keyAliasPassword = "myaliaspass"
  }

  // Configure the filtering of resources with properties from the Gradle's project scope (2)
  processResources {
    expand (project.properties)
  }

  // Configure a dedicated debug build (3)
  task configureDebug << {
    jar.classifier = "debug"
  }

  // Configure a dedicated release build (4)
  task configureRelease << {
    proguard.enabled = true
  } 
```

我得到的错误是这样的：

```
 11:08:24.812 [ERROR] [org.gradle.BuildExceptionReporter] FAILURE: Build failed with an exception.
11:08:24.822 [ERROR] [org.gradle.BuildExceptionReporter]
11:08:24.829 [ERROR] [org.gradle.BuildExceptionReporter] * Where:
11:08:24.834 [ERROR] [org.gradle.BuildExceptionReporter] Build file 'C:\Users\Work\AndroidProjects\RssUnified\build.gradle' line: 114
11:08:24.840 [ERROR] [org.gradle.BuildExceptionReporter]
11:08:24.845 [ERROR] [org.gradle.BuildExceptionReporter] * What went wrong:
11:08:24.850 [ERROR] [org.gradle.BuildExceptionReporter] A problem occurred evaluating root project 'RssUnified'.
11:08:24.855 [ERROR] [org.gradle.BuildExceptionReporter] > For input string: "21 rc11"
11:08:24.864 [ERROR] [org.gradle.BuildExceptionReporter]
11:08:24.870 [ERROR] [org.gradle.BuildExceptionReporter] * Exception is:
11:08:24.875 [ERROR] [org.gradle.BuildExceptionReporter] org.gradle.api.GradleScriptException: A problem occurred evaluating root project 'RssUnified'.
11:08:24.880 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.groovy.scripts.internal.DefaultScriptRunnerFactory$ScriptRunnerImpl.run(DefaultScriptRunnerFac
tory.java:54)
11:08:24.885 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.configuration.DefaultScriptPluginFactory$ScriptPluginImpl.apply(DefaultScriptPluginFactory.jav
a:127) 
```

使用 gradle 1.2

编辑：这是我的布局 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

</RelativeLayout> 
```

这是活动

```
public class RssListActivity extends Activity {

    /*
     * (non-Javadoc)
     * @see android.app.Activity#onCreate(android.os.Bundle)
     */
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.list_activity_layout);
    }

} 
```

项目结构如下：

```
├───.gradle
│   └───1.2
│       └───taskArtifacts
├───assets
├───bin
│   ├───classes
│   │   └───com
│   │       ├───jr
│   │       │   ├───screenLogic
│   │       │   └───screens
│   │       └───richy
│   │           └───rssunified
│   └───res
├───build
│   └───gen
│       └───com
│           └───richy
│               └───rssunified
├───gen
│   └───com
│       └───richy
│           └───rssunified
├───res
│   ├───drawable-hdpi
│   ├───drawable-ldpi
│   ├───drawable-mdpi
│   ├───drawable-xhdpi
│   ├───layout
│   ├───values
│   ├───values-v11
│   └───values-v14
└───src
    └───com
        └───jr
            ├───screenLogic
            └───screens 
```

这是项目根文件夹中的内容

```
AndroidManifest.xml  assets  bin  build  build.gradle  gen  gradle.properties  ic_launcher-web.png  local.properties  project.properties  res  src 
```

最后是android清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.richy.rssunified"
    android:versionCode="1"
    android:versionName="1.0">

    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="15" />

    <application android:label="@string/app_name"
        android:icon="@drawable/ic_launcher"
        android:theme="@style/AppTheme">

    </application>

</manifest> 
```

本地属性

```
sdk.dir = C:/Program Files (x86)/Android/android-sdk 
```

项目属性

```
# This file is automatically generated by Android Tools.
# Do not modify this file -- YOUR CHANGES WILL BE ERASED!
#
# This file must be checked in Version Control Systems.
#
# To customize properties used by the Ant build system edit
# "ant.properties", and override values to adapt the script to your
# project structure.
#
# To enable ProGuard to shrink and obfuscate your code, uncomment this (available properties: sdk.dir, user.home):
#proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt

# Project target.
target=android-15 
```

编辑：

我已经恢复到旧版本的 adt/sdk 插件并设法解决了上述问题，但是在我这样做之后，我现在收到以下错误：

```
15:24:24.558 [LIFECYCLE] [org.gradle.TaskExecutionLogger] :androidProcessResources FAILED
15:24:24.571 [ERROR] [org.gradle.BuildExceptionReporter]
15:24:24.575 [ERROR] [org.gradle.BuildExceptionReporter] FAILURE: Build failed with an exception.
15:24:24.582 [ERROR] [org.gradle.BuildExceptionReporter]
15:24:24.588 [ERROR] [org.gradle.BuildExceptionReporter] * What went wrong:
15:24:24.597 [ERROR] [org.gradle.BuildExceptionReporter] Execution failed for task ':androidProcessResources'.
15:24:24.602 [ERROR] [org.gradle.BuildExceptionReporter] > Unexpected internal error near index 1
15:24:24.607 [ERROR] [org.gradle.BuildExceptionReporter]   \
15:24:24.613 [ERROR] [org.gradle.BuildExceptionReporter]    ^
15:24:24.621 [ERROR] [org.gradle.BuildExceptionReporter]
15:24:24.626 [ERROR] [org.gradle.BuildExceptionReporter] * Exception is:
15:24:24.631 [ERROR] [org.gradle.BuildExceptionReporter] org.gradle.api.tasks.TaskExecutionException: Execution failed for task ':androidProcessResources'.
15:24:24.636 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecu
ter.java:68) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T21:04:00.343

如中所述：
[http ://tools.android.com/tech-docs/new-build-system/using-the-new-build-system#TOC-Working-with-and-Customizing-SourceSets](http://tools.android.com/tech-docs/new-build-system/using-the-new-build-system#TOC-Working-with-and-Customizing-SourceSets)

> 默认源集位置在`src/<sourceset>`

你的`sourceset`名字是`main`如此的位置是`src/main`

此外，`manifest`还描述了属性：

> manifest，输入 AndroidSourceFile，默认位置`src/<sourceset>/AndroidManifest.xml`

我猜想清单声明：

```
 manifest {
                srcFile 'AndroidManifest.xml'
            } 
```

与默认值相同，并以位置结束：

```
src/main/AndroidManifest.xml 
```

这在异常消息中列出。

我认为这就是 gradle android 插件的工作原理。
如果我错了，请纠正我，我不知道 Gradle。

## 编辑

好的，现在我知道出了什么问题。您的构建脚本混合了来自两个不同插件的设置。

改变：

```
classpath 'com.android.tools.build:gradle:0.1' 
```

到

```
classpath 'org.gradle.api.plugins:gradle-android-plugin:1.2.1' 
```

删除`android`块，但保留身体。

用身体移除`sourceSets`块。

然后它应该可以工作，我这次测试了它。

## 编辑 2

这是 Windows 相关的错误，已在 6 天前修复：

[https://github.com/jvoegele/gradle-android-plugin/pull/89](https://github.com/jvoegele/gradle-android-plugin/pull/89)

你可以做的是下载最新的插件版本

```
git clone git://github.com/jvoegele/gradle-android-plugin.git 
```

并将其安装在本地 Maven 存储库中：

```
gradle install 
```

然后添加`mavenLocal()`到存储库：

```
repositories {
    mavenCentral()
    mavenLocal()
} 
```

并将插件版本更改为快照：

```
dependencies {
    classpath 'org.gradle.api.plugins:gradle-android-plugin:1.2.2-SNAPSHOT'
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:47:59.077

在我看来，好像您正试图错误地转义您的一个 Android 资源文件中的反斜杠，如 task 所示`androidProcessResources`。请检查您的资源文件或在此处发布它们，以便我们查看它们。

# java - 克隆整个 JTree/TreeModel 的最简单方法？

> ID：13142290
> 
> 赞同：0
> 
> 时间：2012-10-30T15:27:04.017
> 
> 标签：java, swing, clone, jtree, treemodel

我真的必须自己实现深度克隆，还是有任何库方法来获得 JTree 或其 TreeModel 的深度克隆？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T22:05:33.907

正如@SteveKuo 所说，为什么需要克隆 a `TreeModel`？`TreeModel`可以在不同的实例之间共享`JTree`。

这是两个共享同一模型的 JTree 的示例演示。或者，您可以创建两次相同的`TreeModel`：

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTree;
import javax.swing.SwingUtilities;
import javax.swing.Timer;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.DefaultTreeModel;

public class Test2JTree {

    private void initUI() {
        final JFrame frame = new JFrame(Test2JTree.class.getSimpleName());
        final DefaultTreeModel model = getTreeModel();
        final JTree tree1 = new JTree(model);
        final JTree tree2 = new JTree(model);
        frame.add(new JScrollPane(tree1), BorderLayout.WEST);
        frame.add(new JScrollPane(tree2), BorderLayout.EAST);
        frame.pack();
        frame.setSize(frame.getWidth() + 50, frame.getHeight() + 140);
        frame.setVisible(true);
        Timer t = new Timer(2000, new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                DefaultMutableTreeNode root = (DefaultMutableTreeNode) model.getRoot();
                root.add(new DefaultMutableTreeNode("A new node"));
                model.nodesWereInserted(root, new int[] { root.getChildCount() - 1 });
                tree1.expandRow(0);
                tree2.expandRow(0);
                frame.revalidate();
            }
        });
        t.start();
    }

    private DefaultTreeModel getTreeModel() {
        return new DefaultTreeModel(new DefaultMutableTreeNode("Root object"));
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new Test2JTree().initUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-03T11:35:15.653

```
public IndigoMutableTreeNode cloneNode(IndigoMutableTreeNode node){
		IndigoMutableTreeNode newNode = new IndigoMutableTreeNode(node.getUserObject());
        for(int iChildren=node.getChildCount(), i=0;i<iChildren; i++){
                newNode.add((IndigoMutableTreeNode)cloneNode((IndigoMutableTreeNode)node.getChildAt(i) ) );
        }
        return newNode;
    }
```

只需传递根节点并获得完整的不同根节点并将其传递给新树的新模型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T15:35:42.007

为什么需要同时克隆`JTree`和`TreeModel`. `JTree`是视图，它显示支持所`TreeModel`代表的任何内容。如果要创建第二个相同的树，那么您将复制/克隆树模型，并创建一个`JTree`指向复制的`TreeModel`.

# mysql - 我可以用 MySQL Join 做一个 COUNT 吗？

> ID：13142299
> 
> 赞同：0
> 
> 时间：2012-10-30T15:27:11.540
> 
> 标签：mysql, join, count, inner-join

这是我的数据

```
newCatCols
=====
id      sku     name
---------------
1           4001    Black
2           4031    Red
3           4021    Black
4           4041    Blush

products
=====
id      sku     Price
---------------
1           4001    123
2           4031    232
3           4021    453
4           4041    233 
```

这是我的查询

```
SELECT COUNT( * ) AS numTotal
FROM `products`
INNER JOIN `colors` ON `products`.`sku` = `colors`.`sku`
WHERE (
`name` = 'Apple_Black'
OR `name` = 'Black'
OR `name` = 'Black_Aubergine'
OR `name` = 'Black_Blush'
OR `name` = 'Black_Slate'
OR `name` = 'Black_Turquoise'
OR `name` = 'Red_Black'
OR `name` = 'Sapphire_Black'
OR `name` = 'Multi Apple'
)
AND `status` = '1'
AND `category` = 'sig'
GROUP BY `products`.`sku`
ORDER BY `products`.`rank` ASC 
```

理想情况下，如果我只是改变这条线会是完美`SELECT COUNT( * ) AS numTotal`的，只是修改它以使其工作？数据当前返回行值为 1 的产品列表，因此它只是循环而不计算所有行的总值。

它应该只显示返回的总数，例如应该显示 4

```
Output
 =====
 numTotal
 ---------------
 4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:33:51.507

这将返回符合您的条件的不同产品 SKU 的数量：

```
SELECT COUNT(distinct `products`.`sku`) AS numTotal
FROM `products`
INNER JOIN `colors` ON `products`.`sku` = `colors`.`sku`
WHERE `name` in ('Apple_Black'
        ,'Black'
        ,'Black_Aubergine'
        ,'Black_Blush'
        ,'Black_Slate'
        ,'Black_Turquoise'
        ,'Red_Black'
        ,'Sapphire_Black'
        ,'Multi Apple'
    )
    AND `status` = '1'
    AND `category` = 'sig' 
```

# image - 图像处理 - 可重用代码

> ID：13142301
> 
> 赞同：1
> 
> 时间：2012-10-30T15:27:10.183
> 
> 标签：image

我将开始从事图像处理项目，并想了解一些有关从图像中识别基本字符的信息，就像从图像中读取数字一样简单。我所寻找的只是逻辑和一些可重用的代码也会很棒。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:37:13.030

我在我的业余项目中使用了这个很长的时间。希望这是您正在寻找的东西[http://www.aforgenet.com/](http://www.aforgenet.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T14:36:45.887

如果您需要从图像中读取字符，则需要使用光学字符识别 (OCR)。在 stackoverflow 和 codeproject 上有很多关于这个主题的问题，您可以查看如下：

[https://stackoverflow.com/questions/870280/ocr-for-net](https://stackoverflow.com/questions/870280/ocr-for-net)

[http://www.codeproject.com/Questions/451321/Read-text-from-image-file-in-vb-net.aspx#answer1](http://www.codeproject.com/Questions/451321/Read-text-from-image-file-in-vb-net.aspx#answer1)

[http://www.codeproject.com/Articles/41709/How-To-Use-Office-2007-OCR-Using-C](http://www.codeproject.com/Articles/41709/How-To-Use-Office-2007-OCR-Using-C)

# facebook-graph-api - Facebook 预定帖子和 Twitter

> ID：13142307
> 
> 赞同：1
> 
> 时间：2012-10-30T15:27:22.803
> 
> 标签：facebook-graph-api, twitter

我链接了我的 Facebook 页面和 Twitter。当我通过 API 发布消息时，它们会同时发布到我的 Facebook 和 Twitter。

**但是，当我尝试预定**的 Facebook 帖子时，它不起作用。在预定时间，Facebook 帖子正在发布，但不会将它们发送到 Twitter。

这是一个已知问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T08:29:59.513

我也遇到了同样的问题，但不幸的是，谷歌搜索给了我一个答案，即 Facebook 的预定帖子不会与 Twitter 集成。

**这是我找到的链接（阅读 #5）： http:** [//www.socialmediaexaminer.com/facebook-scheduled-posts/](http://www.socialmediaexaminer.com/facebook-scheduled-posts/)

# webkit - WebKit 在带有跳过链接的 URL 中丢失参数

> ID：13142309
> 
> 赞同：0
> 
> 时间：2012-10-30T15:27:30.213
> 
> 标签：webkit, url-parameters

我们有一些生成的页面，其 URL 包含参数，例如[http://example.com/page.do?param1=hello](http://example.com/page.do?param1=hello)。这些页面内部包含命名锚点，<a name="here">like this</a>。并且有相应的链接引用了命名的锚点，<a href="#here">like this</a>。今天大多数人称这些为“跳过链接”。

单击跳过链接应导致浏览器创建并遵循与原始 URL 匹配的 URL，并在末尾添加命名的锚点： [http ://example.com/page.do?param1=hello#here](http://example.com/page.do?param1=hello#here)

在 Firefox 和 IE 上，这可以正常工作。在 Chrome、Safari 和其他基于 WebKit 的浏览器上，参数丢失，导致[http://example.com/page.do?#here](http://example.com/page.do?#here)对我们的站点无效，只会导致 404 错误。

有趣的是，如果您手动将完整链接放入地址栏中并按 Enter，它的行为正常。

我用谷歌搜索了一段时间，看到很多关于 WebKit 存在跳过链接问题的讨论，但没有一个与这里丢失参数的情况相匹配。

这种参数丢失是一个已知的错误吗？有没有人看到解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T10:17:26.360

我遇到了同样的问题。据我所知，这与使用这样的元标记有关：`<base href="http://example.com" />`. 一旦设置好我的链接指向`example.com#foo`而不是`example.com?foo=bar#foo`.

知道我发现了这个问题。所以锚标记行为是一个已知的事情： [是否推荐使用 <base> html 标记？](https://stackoverflow.com/questions/1889076/is-it-recommended-to-use-the-base-html-tag)

由于我无法删除基本标记，我将尝试使用 JavaScript 来处理它。

# python - 无法更改多维 Python bool-list 的单个元素

> ID：13142314
> 
> 赞同：0
> 
> 时间：2012-10-30T15:27:38.733
> 
> 标签：python, multidimensional-array, boolean

我已经苦苦挣扎了好几个小时，试图弄清楚为什么我在我的应用程序中不断得到非常奇怪的结果。当他们当然不应该这样做时，事情就一直在“开启”。我将其缩小到与以下非常相似的代码段：

```
test=[[False]*28]*24

print(test[5][7])
print(test[6][7])
test[5][7]=True
print(test[5][7])
print(test[6][7]) 
```

在这种特殊情况下，我只想更改第 5 个索引的第 7 个索引的值，但是，其他各种索引也会发生变化。运行它会让我：

> > 错误的
> > 
> > 错误的
> > 
> > 真的
> > 
> > 真的

虽然我希望得到：

> > 错误的
> > 
> > 错误的
> > 
> > 真的
> > 
> > 错误的

有人明白为什么会这样吗？我忽略了什么吗？它与我如何初始化我的列表有关吗？我真的只想要一个 24*28 的列表，里面装满`bools = False`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T15:29:35.567

该行`test=[[False]*28]*24`创建了对同一 28 个`False`值列表的 24 个引用。你可能想要这样的东西：

```
test = [ [False]*28 for _ in range(24) ] 
```

这会强制创建 24 个独立的`False`.

* * *

作为旁注 - 你应该考虑`numpy`。

```
import numpy as np
test = np.zeros((24,28),dtype=bool) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:29:27.687

因为它都是相同的列表。

为了说明我的观点，我使用了内置函数 id：

```
id(test[x]) 
```

这将为 x 的所有合法值返回相同的值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T15:30:42.100

那么问题是，当您发出一个语句时，例如`a = list[[0]] ]`您没有得到一个包含其他十个较小列表的列表，每个列表中都包含一个“0”。你得到一个列表，里面有十个**相同** `[0]`列表的实例，改变“一个”将改变“全部”——实际上，在这种情况下，所有的都是一样的。

# c# - 简单而高级的布局

> ID：13142318
> 
> 赞同：4
> 
> 时间：2012-10-30T15:27:54.517
> 
> 标签：c#, winforms, layout

我目前正在用 C# 开发一个应用程序，它将有两种布局：简单和高级。

简单布局有 4 个对象（2 个按钮和 2 个文本控件），高级布局有 8 个对象。

最好的方法是什么？有两种形式？或者将 设置`button.visible`为 true/false（并且对于每个对象？）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:30:08.757

如果您遵循允许分离模型、视图和控制器（例如 MVVM 或 MVC）的 UI 模式，您会发现拥有两个可以根据需要随时间演变的独立表单非常简单，只需对其余的代码。

随着用户需求的发展，尝试为两个不同的演示文稿制作一个表单会随着时间的推移而变得复杂（与仅制作两个共享相同模型和控制器的表单的替代方案相比）。

**更新**

根据您的评论...您也可以使用 WinForms 进行 MVC

[http://www.codeproject.com/Articles/383153/The-Model-View-Controller-MVC-Pattern-with-Csharp](http://www.codeproject.com/Articles/383153/The-Model-View-Controller-MVC-Pattern-with-Csharp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:31:11.520

我会提出第三种选择，让两个用户控件共享相同的表单。然后您所要做的就是将适当的用户控件设置为可见。而且您可以在两者之间共享任何代码。

# javascript - 加载 javascript

> ID：13142320
> 
> 赞同：0
> 
> 时间：2012-10-30T15:27:58.447
> 
> 标签：javascript, optimization

我们的主页是 800kb，我知道这很大。我们使用社交引擎，它有一个我假设使用 Javascript 的小部件系统目前页面是空白的几秒钟.. 在整个页面加载之前没有任何显示。我的问题是：我们可以先加载主小部件..& 显示页面的其余部分（和其他 Javascript）正在加载吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:30:02.237

将其他 JavaScript 放在`body`标记的末尾 - 就在`</body>`. 如果它在标签中（我假设它是你的情况），`head`那么加载、解析和执行脚本很可能会阻止下面的 HTML 被呈现。

如果这没有帮助，请参阅[加速网站的最佳实践](http://developer.yahoo.com/performance/rules.html)并使用 Firefox 的[YSlow](http://developer.yahoo.com/yslow/)插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:34:14.380

有一些最佳实践可以更快地加载您的页面（如此[处](http://developer.yahoo.com/performance/rules.html)）。首先，您应该将 JavaScript 加载标签放在正文的末尾。

# ios - 从图像中生成 2D 斜角。

> ID：13142323
> 
> 赞同：0
> 
> 时间：2012-10-30T15:28:04.437
> 
> 标签：ios, core-graphics, core-image

目前我正在对图像应用蒙版以创建该图像的拼图。

![拼图图片](../Images/0ca460a991d1bff5b70da0102301312b.png)+ ![拼图面具](../Images/669a0d9fcddfacaab9670b5740963204.png)=![一块拼图](../Images/c9cc7345e4548a91d6c0431510055421.png)

在缩短的 obj-c 代码中

```
CGImageRef mask = CGImageMaskCreate(...);
CGImageRef puzzlePiece = CGImageCreateWithMask([puzzle CGImage], mask); 
```

我现在想制作具有深度感的拼图。类似于[本文](http://parmanoir.com/A_2D_Bevel_Technique)中描述的内容。基本上，它使用两个核心图像过滤器[CIHeightFromMask](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CoreImageFilterReference/Reference/reference.html#//apple_ref/doc/filter/ci/CIHeightFieldFromMask)和[CIShadedMaterial](https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CoreImageFilterReference/Reference/reference.html#//apple_ref/doc/filter/ci/CIShadedMaterial)来生成 2D 斜角图像。不幸的是，这些过滤器要么不适用于 iOS，要么仅适用于 iOS 6 设备。

有没有其他方法可以为用户选择的图像创建具有深度感的拼图？即未与应用程序捆绑在一起的图像。

谢谢，艾尔。

# ruby-on-rails - <%== %> 在 rails erb 中做了什么？

> ID：13142326
> 
> 赞同：57
> 
> 时间：2012-10-30T15:28:08.437
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, erb

最近看到这个，觉得很有意思。但我真的不明白它的作用是什么？

前任。我有一个 Rails 应用程序，我想引导一些 json，这样我就不必提出第二个请求。通常我会写这样的东西。

`<%= raw @model.to_json %>` 或者 `<%= @model.to_json.html_safe %>`

我必须发送消息`raw`，否则`html_safe`json 将被 html 转义，因此无法正确解析。但是，这似乎也有效。

`<%== @model.to_json %>`

但我找不到任何文档。

有谁知道这到底是做什么的？`html_safe`即它与调用或完全相同`raw`吗？或者还有更多？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-10-30T15:49:04.500

`<%==`相当于`raw`。

来自[Ruby on Rails 指南](http://edgeguides.rubyonrails.org/active_support_core_extensions.html#output-safety)：

> 要逐字插入内容，请使用`raw`助手而不是调用 `html_safe`：
> 
> ```
> <%= raw @cms.current_template %> <%# inserts @cms.current_template as is %> 
> ```
> 
> 或者，等效地，使用`<%==`：
> 
> ```
> <%== @cms.current_template %> <%# inserts @cms.current_template as is %> 
> ```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-30T15:40:39.313

Rails 实际上使用[Erubis](http://www.kuwata-lab.com/erubis/)而不是 ERB，后者支持各种其他东西。

`<%==`完全符合您的预期：[它发出未转义的值](http://www.kuwata-lab.com/erubis/users-guide.03.html#escape-enhancer)

# sharepoint - 无法运行基本的 sharepoint powershell 脚本

> ID：13142327
> 
> 赞同：2
> 
> 时间：2012-10-30T15:28:20.557
> 
> 标签：sharepoint, powershell

我有一个用于操作 Sharepoint 2010 的简单 powershell 脚本。我已将其精简到最低限度以说明问题。

```
Add-PSSnapin Microsoft.SharePoint.PowerShell -erroraction SilentlyContinue
$siteURL = "http://intranet/"
$site = Get-SPSite($siteURL)

foreach ($web in $site.AllWebs) {
    Write-Host "Inspecting " $web.Title
} 
```

当我引入“foreach”循环时它失败了（因此管理单元加载正常并且 Get-SPSite($siteURL) 似乎不会导致错误）。

错误信息是

```
C:\temp\sp_dm.PS1 : Exception has been thrown by the target of an invocation.
At line:1 char:12
+ .\sp_dm.PS1 <<<<
    + CategoryInfo          : NotSpecified: (:) [sp_dm.PS1], TargetInvocationExceptio
    + FullyQualifiedErrorId : System.Reflection.TargetInvocationException,sp_dm.PS1 
```

问题不在于脚本的 line:1，消息指的是我键入运行它的命令的 line:1（我更改了脚本的名称，并且 char:12 相应地更改了）。但是正如我所说，错误是由 foreach 循环生成的，并且代码出现在网络上的许多示例中，因此我的本地 SharePoint 有一些问题。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T21:09:52.963

这是一个迟到的答案，但我是通过谷歌搜索来到这里的，我想为任何未来的访问者解决这个问题。

此处描述了完全相同的问题/原因：[https ://sharepoint.stackexchange.com/questions/17247/spsite-allwebs-returns-error](https://sharepoint.stackexchange.com/questions/17247/spsite-allwebs-returns-error)

基本上，这是一个权限问题。如果您添加了正在运行脚本的帐户，以了解相关网站集的权限，则此错误应该会消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:31:57.650

试试这个改变：

```
$siteURL = "http://intranet/"
$site = Get-SPWeb($siteURL)

    foreach ($web in $site.Site.AllWebs) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-29T00:40:37.837

通过使用提升的权限块为我解决了问题。另外，不要忘记处理 sharepoint SPSite 和 SPWeb 对象。

```
[Microsoft.SharePoint.SPSecurity]::RunWithElevatedPrivileges({
$Site = Get-SPSite $siteUrl
Foreach ($web in $Site.AllWebs)
{
    #do something..
    $web.Dispose()
}   
$Site.Dispose()
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-30T20:07:15.933

也许错误消息中的**FullyQualifiedErrorId提示了问题的根本原因？**

这似乎表明 $siteURL 需要包含 FQDN。也许而不是`$siteURL = "http://intranet/"`你需要**`$siteURL = "http://intranet.yourdomain.com"`**.

# objective-c - 选择所有玩家对象ObjectiveC

> ID：13142332
> 
> 赞同：1
> 
> 时间：2012-10-30T15:28:49.103
> 
> 标签：objective-c, object, selector

我刚开始使用Objective C，我想知道选择所有其他玩家将isActive属性设置为NO的正确语法是什么。谢谢！

```
- (void) playerBuzzedIn: (XGPlayer *) activePlayer
{
    if (activePlayer) {
        activePlayer.isActive = YES;
    }
    else
       //set all other isActive = NO
    self.currentGameState = results;
} 
```

我在想这样的事情，对吗：

```
for (XGPlayer *player in self.players) {
player.isActive = NO;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:46:50.683

首先你需要一份所有玩家的名单；让我们假设它是这样的：

```
NSMutableArray *_allplayers = ...; 
```

然后在您的方法中，您可以将所有玩家设置为非活动状态，除了刚刚加入的玩家：

```
- (void) playerBuzzedIn: (XGPlayer *) activePlayer
{
    if (activePlayer)
    {
        for (XGPlayer *player in _allPlayers)
        {
            player.isActive = activePlayer == player;   // Or perhaps [activePlayer isEqual:player] ?
        }
    }
    self.currentGameState = results;
} 
```

另一种方法是保留一个指向当前活跃玩家的指针：

在 .h 文件中：

```
@interface Whatever : NSObject
{
    XGPlayer *_activePlayer = nil;
}

@property (retain, nonatomic, readonly) XGPlayer *activePlayer;

@end 
```

在 .m 文件中：

```
// Private Methods
@interface Whatever ()
- (void)setActivePlayer:(XGPlayer *)activePlayer
@end

@implementation Whatever

@synthesize activePlayer = _activePlayer;

// Private setter method
- (void)setActivePlayer:(XGPlayer *)activePlayer
{
    [activePlayer retain];     // If not using ARC
    [_activePlayer release];   // If not using ARC
    _activePlayer = activePlayer;
}

- (void) playerBuzzedIn: (XGPlayer *) activePlayer
{
    self.activePlayer.isActive = NO;
    activePlayer.isActive = YES;
    self.activePlayer = activePlayer;
    self.currentGameState = results;
} 
```

# android - batt_attr_text 文件在 Android 中与供应商无关

> ID：13142333
> 
> 赞同：0
> 
> 时间：2012-10-30T15:28:50.867
> 
> 标签：android, battery, batterylevel

我想知道在 Android 中，batt_attr_text 文件的位置和内容是否相同，无论供应商如何？（顺便说一句。相同的内容意味着它现在列出了相同的“属性”......）

我问这个的原因是因为[这里](https://stackoverflow.com/questions/2439619/getting-the-battery-current-values-for-the-android-phone)的另一个帖子。在提到的问题中，提问者想知道电压和电流。他/她得到一个答案，表明该信息可以在依赖于供应商的文件中找到。

然而，我正在寻找的是电池的 mAh 容量。我发现 /sys/class/power_supply/battery/batt_attr_text 包含我需要的内容，但我不确定是否可以在每个 Android 设备上以相同的形式和相同的位置找到该文件。

感谢每一个建设性的答案。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T00:43:51.793

它是特定于设备的，因此取决于制造商。看看这个项目：[https ://code.google.com/p/currentwidget/](https://code.google.com/p/currentwidget/)

# apache-flex - 有没有办法制作一个可绑定的 mxml 对象？

> ID：13142339
> 
> 赞同：0
> 
> 时间：2012-10-30T15:29:04.173
> 
> 标签：apache-flex, binding, mxml

我有一个 MXML 对象，我希望它在每次更新其属性之一时触发其绑定：

```
<fx:Object id="myObject">
    <fx:prop1>{myButton.selected}</fx:prop1>
    <fx:prop2>value</fx:prop2>
    <fx:prop3>value</fx:prop3>
</fx:Object>

<Button id="myButton" toggle="true" />
<myComponent obj="{myObject}" /> 
```

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:58:56.280

你不能真正做你想做的事。我知道如何描述它的最好方法是绑定只有一个层次。而您正在尝试使绑定​​更深两个级别。

这段代码：

```
<myComponent obj="{myObject}" /> 
```

告诉 Flex 查看变量 myObject 并且每当 myObject 更改时，myComponent 上的 obj 属性也将更改。查看 myObject 指向的变量。

这段代码：

```
<fx:prop1>{myButton.selected}</fx:prop1> 
```

更改 myObject 上的属性；但不会改变 myObject。myObject 仍然指向相同的内存空间/变量空间。

每当 myObject 上的属性发生变化时，让 myComponent 发生变化；我会使用完全不同的方法。我会将 myObject 创建为 ActionScript 类。每当属性更改时，使用 get/set 属性和调度事件。

在 myComponent 内部，您可以将 obj 实现为 get/set 方法。在您的 set 方法中，将事件侦听器添加到您在 myObject 中设置的属性更改。在您的事件侦听器方法中；实施适当的改变。

与您正在做的事情相比，这不是微不足道的改变；但这也不应该太难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:00:20.510

使用[ObjectProxy](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/utils/ObjectProxy.html)。

示例：[使用 Flex ObjectProxy 类检测对象的更改](http://blog.flexexamples.com/2007/09/27/detecting-changes-to-an-object-using-the-flex-objectproxy-class/)

```
private var object:Object = {};
private var objectProxy:ObjectProxy;

objectProxy = new ObjectProxy(object);
objectProxy.addEventListener(PropertyChangeEvent.PROPERTY_CHANGE, updateChange); 
```

然后，直接对代理进行分配：

```
objectProxy.name = "My Object"; 
```

# javascript - 如果我重复输入，则停止传播

> ID：13142340
> 
> 赞同：0
> 
> 时间：2012-10-30T15:29:06.950
> 
> 标签：javascript, jquery, stoppropagation

我正在为一个网站构建一个自定义搜索引擎，搜索是通过 AJAX 在 keyup 事件上完成的，所以当你开始输入时（如果你输入了两个以上的字符并且在字符串被修剪之后），对服务器的 AJAX 调用就完成了.

它工作得很好，但是我正在考虑一种情况，当您开始连续输入四个或任意数量的字符时，您输入的字符就会有多少个调用。好吧，例如，如果您键入 10 个字符，那将会发出很多请求。

在这种情况下，我在想是否有一种简单的方法可以停止发生这种行为之前开始的所有事情，并在您完成疯狂输入后继续搜索（：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:32:03.173

> 只需通过 Ajax 延迟调用，直到他们在 0.5 到 1 秒内没有输入任何内容。然后你可以简单地取消一个 setTimeout 等。

--@Tejs

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:32:14.010

您可以为此使用[下划线去抖动](http://underscorejs.org/#debounce)。让 key up 事件调用 undersocre 的函数而不是你的函数，这样下划线就会知道*何时*调用你的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T15:57:43.843

如前所述，这里有一个示例，它在某个指定的延迟后执行一个函数，如果在延迟未超过时再次调用该方法，则清除原始超时并重新设置一个新超时。

这是一个干净的解决方案，它不需要 jQuery，只需更改用法即可。

[如何延迟 .keyup() 处理程序直到用户停止输入？](https://stackoverflow.com/questions/1909441/jquery-keyup-delay)

# overloading - 这是 mpf_class 类型中的错误吗？

> ID：13142342
> 
> 赞同：0
> 
> 时间：2012-10-30T15:29:12.010
> 
> 标签：overloading, complextype, mpf

我今天在玩更高精度的数据类型 mpf_class 时遇到了一件奇怪的事情：似乎任何类型的对象多次*预*乘都是有问题的，但是单次预乘很好，就像 post - 这些对象乘以几个对象：`complex <mpf_class>``mpf_class``mpf_class`

```
#include <stlib.h>
#include <complex>
#include <gmpxx.h>

typedef  mpf_class my_float;
const my_float two("2.0",150);  //150 bit prec float

int main( int argc , char **argv )
{      
  mpf_set_default_prec(150); //default prec in bits

  complex<my_float> q1(my_float("5.268E-10"),my_float("8.789541E2"));
  complex<my_float> q2=two*q1;          //no problems
  complex<my_float> q3=q1*two;          //no problems
  complex<my_float> q3b=two*two*two;    //no problems
  complex<my_float> q4=two*q1*two;      //no problems
  complex<my_float> q5=q1*two*two;      //no problems
  //complex<my_float> q6=two*two*q1;    //!doesn't like!
  //complex<my_float> q7=(two*two)*q1;  //!doesn't like!
  complex<my_float> q8=-two*q1;         //!doesn't like!       

return 0;

} 
```

似乎如果你不止一次地*预乘*`complex`这些对象中的一个，你就会遇到麻烦。`mpf_class`然而，后乘法多次都很好。同样，将对象之间相乘`mpf_class`也可以任意多次。

这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T22:41:54.523

std::complex< T > 仅对 T = float、double 或 long double 显示明确定义的行为。如果您使用其他类型，则行为未定义。

# internet-explorer - 样式表在 Internet Explorer 中被解释为 cookie

> ID：13142344
> 
> 赞同：1
> 
> 时间：2012-10-30T15:29:16.450
> 
> 标签：internet-explorer, cookies

早上好，

我有以下问题： .css 和 javascripts 等网页的某些元素在 Internet Explorer 中被视为 cookie（该网页适用于 Firefox 和 Chrome）。然后这些元素被屏蔽，它们出现在因隐私问题而被屏蔽的网站中。

如果我使用它的 IP 地址访问该网站，它运行良好。但是，如果我使用域，我会遇到这些元素的问题。使用来自其他网站的链接访问该网站。

该网站是使用 Icefaces 开发的。

我认为问题的原因是主页及其链接位于不同的服务器中并具有不同的名称。我没有太多权限来修改服务器设置。

我还没有配置隐私策略（p3p），但我已经检查了下划线等域名的问题。

您能否就如何解决问题提出一些建议？对我来说，仅仅降低隐私设置以使 IE 接受内容并不是一个合适的解决方案。

问候，

# c# - C# 中的异步套接字 - 了解您的客户端

> ID：13142345
> 
> 赞同：0
> 
> 时间：2012-10-30T15:29:17.560
> 
> 标签：c#, sockets, asynchronous, client-server

我确信这有一个简单的解决方法，但现在我似乎无法找到一个优雅的解决方案。我已经构建了一个异步 C# 服务器应用程序，它接受多个客户端并很好地处理它们，但要继续，我需要能够确定哪些客户端连接到我的服务器（只有两个客户端都做不同的事情）。

当我的程序接受这些客户端时，我希望服务器知道客户端地址并指示哪个客户端可能存储在一个小列表中。

所以我想我要问的是，是否有一种简单的方法可以在客户端连接时向服务器发送预定义的消息，让它知道客户端应用程序去往哪个地址？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:35:13.137

您可以通过套接字自由发送各种数据。

为了解决这个问题，在客户端和服务器之间发明了某种协议。

例如，在连接时发送第一条消息以识别客户端到服务器。从那里继续这两个之间的正常对话。

服务器可以接受消息并存储显示它，甚至在第一条消息不包含约定信息时拒绝客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:34:38.320

有很多方法。

最简单的方法之一是为每个客户端应用程序设置不同的端口。另一种方式是为了“连接”（在 TCP 握手之后）是在交换任何数据之前发送一条标识应用程序的消息。另一种选择是为每个请求/回复添加标头，说明应用程序并存储它。

# python - 如何删除字符串中的前导零和尾随零？Python

> ID：13142347
> 
> 赞同：148
> 
> 时间：2012-10-30T15:29:20.693
> 
> 标签：python, string, trailing, chomp, leading-zero

我有几个像这样的字母数字字符串

```
listOfNum = ['000231512-n','1209123100000-n00000','alphanumeric0000', '000alphanumeric'] 
```

**删除尾随**零的所需输出将是：

```
listOfNum = ['000231512-n','1209123100000-n','alphanumeric', '000alphanumeric'] 
```

**前导**尾随零的所需输出将是：

```
listOfNum = ['231512-n','1209123100000-n00000','alphanumeric0000', 'alphanumeric'] 
```

删除前导零和尾随零的期望输出将是：

```
listOfNum = ['231512-n','1209123100000-n', 'alphanumeric', 'alphanumeric'] 
```

现在我一直在做以下方式，如果有，请提出更好的方法：

```
listOfNum = ['000231512-n','1209123100000-n00000','alphanumeric0000', \
'000alphanumeric']
trailingremoved = []
leadingremoved = []
bothremoved = []

# Remove trailing
for i in listOfNum:
  while i[-1] == "0":
    i = i[:-1]
  trailingremoved.append(i)

# Remove leading
for i in listOfNum:
  while i[0] == "0":
    i = i[1:]
  leadingremoved.append(i)

# Remove both
for i in listOfNum:
  while i[0] == "0":
    i = i[1:]
  while i[-1] == "0":
    i = i[:-1]
  bothremoved.append(i) 
```

* * *

## 回答 #1

> 赞同：315
> 
> 时间：2012-10-30T15:30:35.647

基本的怎么办

```
your_string.strip("0") 
```

删除尾随和前导零？如果您只对删除尾随零感兴趣，请`.rstrip`改用（并且`.lstrip`仅用于前导零）。

[文档](https://docs.python.org/3.9/library/stdtypes.html?highlight=split#str.strip)中的更多信息。

您可以使用一些列表理解来获取您想要的序列，如下所示：

```
trailing_removed = [s.rstrip("0") for s in listOfNum]
leading_removed = [s.lstrip("0") for s in listOfNum]
both_removed = [s.strip("0") for s in listOfNum] 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-10-30T15:33:28.383

删除前导 + 尾随 '0'：

```
list = [i.strip('0') for i in listOfNum ] 
```

删除前导“0”：

```
list = [ i.lstrip('0') for i in listOfNum ] 
```

删除尾随的“0”：

```
list = [ i.rstrip('0') for i in listOfNum ] 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-03-05T12:58:56.740

你可以简单地用一个 bool 来做到这一点：

```
if int(number) == float(number):

   number = int(number)

else:

   number = float(number) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-30T15:33:11.117

您是否尝试过[strip()](http://docs.python.org/2/library/string.html#string.strip)：

```
listOfNum = ['231512-n','1209123100000-n00000','alphanumeric0000', 'alphanumeric']
print [item.strip('0') for item in listOfNum]

>>> ['231512-n', '1209123100000-n', 'alphanumeric', 'alphanumeric'] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-10-24T20:03:40.003

假设您的列表中有其他数据类型（而不仅仅是字符串），请尝试此操作。这会从字符串中删除尾随和前导零，并保持其他数据类型不变。这也处理特殊情况 s = '0'

例如

```
a = ['001', '200', 'akdl00', 200, 100, '0']

b = [(lambda x: x.strip('0') if isinstance(x,str) and len(x) != 1 else x)(x) for x in a]

b
>>>['1', '2', 'akdl', 200, 100, '0'] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-08-23T17:59:22.627

`str.strip`是这种情况的最佳方法，但[`more_itertools.strip`](https://more-itertools.readthedocs.io/en/latest/api.html#more_itertools.strip)也是从可迭代中去除前导元素和尾随元素的通用解决方案：

**代码**

```
import more_itertools as mit

iterables = ["231512-n\n","  12091231000-n00000","alphanum0000", "00alphanum"]
pred = lambda x: x in {"0", "\n", " "}
list("".join(mit.strip(i, pred)) for i in iterables)
# ['231512-n', '12091231000-n', 'alphanum', 'alphanum'] 
```

* * *

**细节**

`"0"`请注意，这里我们在满足谓词的其他元素中去除了前导和尾随s。此工具不限于字符串。

另请参阅文档以获取更多示例

*   [`more_itertools.strip`](https://more-itertools.readthedocs.io/en/latest/api.html#more_itertools.strip): 剥去两端
*   [`more_itertools.lstrip`](https://more-itertools.readthedocs.io/en/latest/api.html#more_itertools.lstrip): 剥离左端
*   [`more_itertools.rstrip`](https://more-itertools.readthedocs.io/en/latest/api.html#more_itertools.rstrip): 剥离右端

[`more_itertools`](https://github.com/erikrose/more-itertools)是一个第三方库，可通过`> pip install more_itertools`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-14T16:18:45.533

`pandas`还提出一个方便的方法：

```
listOfNum = pd.Series(['000231512-n','1209123100000-n00000','alphanumeric0000', '000alphanumeric'])

listOfNum.str.strip("0")
listOfNum.str.ltrip("0")
listOfNum.str.rtrip("0") 
```

第一个会给出，例如：

```
0           231512-n
1    1209123100000-n
2       alphanumeric
3       alphanumeric
dtype: object 
```

这在使用时可能更方便`DataFrames`

# jquery - jQuery on click change div上的切换类

> ID：13142352
> 
> 赞同：2
> 
> 时间：2012-10-30T15:29:31.277
> 
> 标签：jquery, html, css, class

我有 4 个 href，点击它时我需要更改 div 的类。

例如： - 点击链接 1 = div 类将变为 s1， - 点击链接 2 = div 类将变为 s2， - 点击链接 3 = div 类将变为 s3，

依此类推，我在下面有一些代码，但不确定在 jQuery 上，因为我刚刚学习它

[http://jsfiddle.net/Nh7tn/1/](http://jsfiddle.net/Nh7tn/1/)

```
<div class="vehicleJourney">
    <div id="progress">
        <div id="complete" class="s2"><!--need class to change -->
            <div id="marker"></div>
        </div>
    </div>

    <div class="buttons">
      <ul>
        <li class="s1"><a  class="showSingle" data-target="1">s1</a></li>
        <li class="s2"><a  class="showSingle selected" data-target="2">s2</a></li>
        <li class="s3"><a  class="showSingle" data-target="3">s3</a></li>
        <li class="s4"><a  class="showSingle" data-target="4">s4</a></li>
      </ul>
    </div>

</div>​ 
```

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:31:59.610

如果您想将链接文本中的类应用于 div，您可以这样做：

```
$('a.showSingle').click(function(){
   $('#complete').attr('class', $(this).text()); 
}); 
```

[示范](http://jsfiddle.net/wuHrJ/)

如果您想将链接父级的类应用于 div，您可以这样做：

```
$('a.showSingle').click(function(){
   $('#complete').attr('class', $(this).parent().attr('class')); 
}); 
```

[示范](http://jsfiddle.net/CTQBC/)

如果你想对 div 应用一个根据链接数计算的类，你可以这样做：

```
$('a.showSingle').click(function(){
   $('#complete').attr('class', 's'+($(this).parent().index()+1)); 
}); 
```

[示范](http://jsfiddle.net/CTQBC/)

当您在您的真实应用程序中（即不在 jsfiddle 中）时，代码应该嵌入到您正文末尾的脚本中的就绪回调中：

```
<script>
    $(function(){
       $('a.showSingle').click(function(){
          $('#complete').attr('class', 's'+($(this).parent().index()+1)); 
       });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:33:49.473

尝试这个：

```
$(document)​.ready(function() {
    $('.showSingle').click(function() {
        $('#complete').attr('class', '').addClass('s' + $(this).data('target'));
    });
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T15:34:06.967

查看更新的[jsfiddle](http://jsfiddle.net/Nh7tn/2/)

```
$('.showSingle').click(function(){$('#complete').attr('class',$(this).html());}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T15:34:17.073

那应该工作

```
$("li a").click(function(){
  var classname=$(this).text();
  $("#complete").attr("class",classname);
}); 
```

# javascript - 数组在初始化时“粘合”

> ID：13142358
> 
> 赞同：3
> 
> 时间：2012-10-30T15:29:42.470
> 
> 标签：javascript, arrays, google-chrome

当我使用几个相关的数组时，我发现了一种疏离效应。在打破我的思想寻找错误之后，我终于找到了解决方案。但我想知道你们中的任何人是否可以向我解释为什么会发生这种情况。

我的代码是这样的：

```
var closed =['closed', 'closed', ..., 'closed'];
sunday = closed;
...
saturday = closed; 
```

在此之后，如果我这样做：

```
sunday[2] = 'open'; 
```

我得到 sunday[2] = 'open'，monday[2] = 'open'，tuesday[2] = 'open'，...，saturday[2] = 'open'。就像所有变量都被“粘合”或链接在一起，因为无论您更改哪个，它们都以相同的方式更改。

我以这种方式修复了它：

```
var closed1 =['closed', 'closed', ..., 'closed'];
...
var closed7 =['closed', 'closed', ..., 'closed'];
sunday = closed1;
...
saturday = closed7; 
```

现在我得到了自变量。但我不喜欢这个解决方案，所以如果有人知道这个问题，我将不胜感激。我在谷歌浏览器上运行 JavaScript。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T15:32:39.073

数组是对象，对象是引用类型。

每个变量`sunday, monday, tuesday, etc...`都持有对同一个数组的引用，因此每个变量都能够观察到该数组的变化。

* * *

查看您的代码，我有一种直觉，也许您应该使用对象而不是数组。

```
var closed = {
    sunday:    'closed',
    monday:    'open',
    tuesday:   'open',
    wednesday: 'open',
    thursday:  'open',
    friday:    'open',
    saturday:  'closed'
}; 
```

不过只是预感。以为我会把它扔在那里。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T15:33:38.187

问题是在 JavaScript 中，对象类型（包括`closed`您的示例中的数组）是对实际对象的[引用（](http://en.wikipedia.org/wiki/Reference_%28computer_science%29)[相关问题](https://stackoverflow.com/questions/518000/is-javascript-a-pass-by-reference-or-pass-by-value-language)）。这意味着 if`x`是一个变量，并且它的值是对象类型，`y = x`不会将副本`x`放入`y`; 它只是意味着您可以使用这两个名称来引用同一个对象。

您在这里真正想要的是创建`closed`（“克隆”它）的副本。因为它是一个数组，你可以很容易地做到这一点

```
sunday = closed.slice(0); // etc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T15:43:17.433

要获取副本而不是对原始数组的引用，请使用`slice`：

```
var closed = ['closed', 'closed', ... ];
var sunday = closed.slice();
var monday = closed.slice(); 
```

# matlab - 将逗号转换为点

> ID：13142359
> 
> 赞同：4
> 
> 时间：2012-10-30T15:29:43.297
> 
> 标签：matlab

我有一个像这个专栏一样的文本文件：

```
0,472412
0,455627
0,439148
0,421753
...
0,116577
0,086670
0,057373
0,027161 
```

matlab中如何将逗号转换为点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T15:53:04.323

Matlabs 网站上的[这篇文章建议：](http://www.mathworks.com/matlabcentral/newsreader/view_thread/241937)

```
function comma2point_overwrite( filespec )
% replaces all occurences of comma (",") with point (".") in a text-file.
% Note that the file is overwritten, which is the price for high speed.
    file = memmapfile( filespec, 'writable', true );
    comma = uint8(',');
    point = uint8('.');
    file.Data( transpose( file.Data==comma) ) = point;
    delete(file)
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T17:11:13.303

...或者你可以这样做：

```
wholefile = fileread('yourfile.txt')       % read in entire file
newfiledata = strrep(wholefile,',','.')    % replace commas with full stops
fileid = fopen('yourfile.txt','w')         % open file to write
fprintf(fileid,'%s',newfiledata)           % print to file
fclose(fid2) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T16:13:10.983

另一种选择，（因为您想将文件打开到 matlab 的工作区）是：

*   使用加载文件

    ```
     a=load('filename.txt'); 
    ```

因为逗号是默认分隔符，所以您会得到一个 2xN 矩阵，例如：

```
a =

       0      472412
       0      455627
       0      439148
       0      421753 
```

*   找到有效的位数以获得正确的小数点位置：

    ```
     d = 10.^(1+floor(log10(abs(a(:,2))))); 
    ```

*   然后：

    ```
     v=a(:,2)./d 
    ```

将产生您想要的向量。现在您可以将其保存回文件，或执行任何操作...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-24T08:16:05.237

> > a='0,00445'

**a = 0,00445**

> > b=strrep(a,',','.')

**b = 0.00445**

# c# - 将 GridControl 中的一些 ObservableCollection 项推送到另一个 ObservableCollection XAML

> ID：13142364
> 
> 赞同：1
> 
> 时间：2012-10-30T15:29:55.420
> 
> 标签：c#, wpf, xaml, devexpress, multi-select

我想将 ObservableCollection 绑定到 DevExpress GridControl，但它不起作用......

我的 XAML 代码：

```
 <dxg:GridColumn Header="Categorie" FieldName="SelectetProgrammCategorieIds">
                    <dxg:GridColumn.EditSettings>
                        <dxe:ComboBoxEditSettings ItemsSource="{Binding AlleCategorien, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" ValueMember="ID" DisplayMember="Name">
                            <dxe:ComboBoxEditSettings.StyleSettings>
                                <dxe:CheckedComboBoxStyleSettings/>
                            </dxe:ComboBoxEditSettings.StyleSettings>
                        </dxe:ComboBoxEditSettings>
                    </dxg:GridColumn.EditSettings>
                </dxg:GridColumn> 
```

SelectetProgrammCategorieIds 是 OBC，AlleCategorien 是我的所有类别列表。我想将 AlleCategorien 中的一些标记项目分开并加载到 SelectetProgrammCategorieIds

问候文森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:48:03.447

当然，我在两个不同的位置使用它是最小的：

```
<UserControl x:Class="Unattended_Tool.View.UserControls.Admin.UserControls.Detail"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 

         xmlns:dxc="http://schemas.devexpress.com/winfx/2008/xaml/core"   
         xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid" 
         xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors" 
         xmlns:dxlc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol" 

         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">

<dxlc:GroupBox MinimizeElementVisibility="Visible" IsManipulationEnabled="True" >
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*"/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <dxg:GridControl Name="GridControlUser" ItemsSource="{Binding AlleICTSUser, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" AutoExpandAllGroups="True" ShowBorder="True" Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="2">

            <dxg:GridControl.View>
                <dxg:TableView Name="tableViewGrid" FocusedRow="{Binding SelecetetUser, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" >
                    <dxg:TableView.InputBindings>
                        <KeyBinding Key="Del" Modifiers="Control" Command="{Binding RemoveICTSUserCommand}"/>
                        <KeyBinding Key="N" Modifiers="Control" Command="{Binding AddICTSUserCommand}"/>
                    </dxg:TableView.InputBindings>
                </dxg:TableView>
            </dxg:GridControl.View>

            <dxg:GridControl.Columns>
                <dxg:GridColumn FieldName="Name" Header="Name"/>
                <dxg:GridColumn FieldName="Password" Header="Password" AllowEditing="{Binding SelecetetUser.CanEditPassword, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}">
                    <dxg:GridColumn.EditSettings>
                        <dxe:PasswordBoxEditSettings IsEnabled="{Binding CanEditPassword}" />
                    </dxg:GridColumn.EditSettings>
                </dxg:GridColumn>
                <dxg:GridColumn FieldName="CanEditPassword" Header="CanEdit">
                    <dxg:GridColumn.EditSettings>
                        <dxe:CheckEditSettings />
                    </dxg:GridColumn.EditSettings>
                </dxg:GridColumn>

                <dxg:GridColumn Header="Categorie" FieldName="SelectetProgrammCategorieIds">
                    <dxg:GridColumn.EditSettings>
                        <dxe:ComboBoxEditSettings ItemsSource="{Binding AlleCategorien, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" ValueMember="ID" DisplayMember="Name">
                            <dxe:ComboBoxEditSettings.StyleSettings>
                                <dxe:CheckedComboBoxStyleSettings/>
                            </dxe:ComboBoxEditSettings.StyleSettings>
                        </dxe:ComboBoxEditSettings>
                    </dxg:GridColumn.EditSettings>
                </dxg:GridColumn>

            </dxg:GridControl.Columns>
        </dxg:GridControl>

    </Grid>
</dxlc:GroupBox> 
```

好的，我找到了一种方法，但它不是真正的事情，它是一个“小”脏我希望有另一种方法。我的目标类必须如下所示：

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.ComponentModel;
    using Unattended_Tool.View.DataStore;
    using System.Collections.ObjectModel;
    using System.Xml.Serialization;

    namespace Unattended_Tool
    {
public class ICTSPrinter : IDataErrorInfo
{
    string _name;
    string _versionsname;
    string _location;
    ObservableCollection<int> _categorie;

    public ObservableCollection<int> Categorie
    {
        get { return _categorie; }
        set { _categorie = value; }
    }

    [XmlIgnore]
    public object SelectetProgrammCategorieIds
    {
        get { return (Object)Categorie; }
        set {                 Categories = new ObservableCollection<int>((value as IEnumerable<Object>).ToObservableCollection<int>()) { };
    }

    public string Location
    {
        get { return _location; }
        set { _location = value; }
    }

    public string VersionsName
    {
        get { return _versionsname; }
        set { _versionsname = value; }
    }

    public string Name
    {
        get { return _name; }
        set { _name = value; }
    }

    public string Error
    {
        get;
        set;
    }

    public string this[string columnName]
    {
        get
        {
            Error = string.Empty;
            switch (columnName)
            {
                case "Name":
                    if (string.IsNullOrEmpty(Name))
                    {
                        Error = "Error";
                    }

                    break;

                case "SelectetProgrammCategorieId":
                    if (DataStoreSingelton.Instance.AlleCategories.FirstOrDefault(S => ((List<int>)SelectetProgrammCategorieIds).FirstOrDefault(s => s == S.ID) == S.ID) != null)
                    {
                        Error = "Please enter a vaild programm categorie";
                    }

                    break;
                default: break;
            }
            return Error;
        }
    }
}
    } 
```

似乎 DevExpress 只接受绑定中的对象......我可以使用转换器，但这只是一种解决方法

我使用的是 12.1.5 版本

# java - 数据库单元应忽略行的顺序

> ID：13142365
> 
> 赞同：5
> 
> 时间：2012-10-30T15:29:58.993
> 
> 标签：java, database, testing, dbunit

有没有办法告诉 DB-Unit 忽略应该比较行的顺序？我的问题是，我不知道行将按什么顺序写入数据库，但是 DB-Unit 强制我给出一个有序列表。

我想要 dbunit 做的是：

*   检查数据库中的行数和预期的数据集匹配（已解决：开箱即用
*   检查每行是否只会在结果集中找到一次。（未解决）

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-31T06:27:44.503

为我解决了这个问题。我正在对实际表和预期表的行进行排序。因此，我使用了可以在预期表中找到的所有列。如果您要检查的表很大，这种方法可能会导致问题，但在我的情况下它不是。:-)

```
Column[] expectedColumns = expectedTable.getTableMetaData().getColumns();
ITable sortedExpected = new SortedTable(expectedTable, expectedColumns);
ITable sortedActual = new SortedTable(actualTable, expectedColumns);
Assertion.assertEquals(sortedExpected, sortedActual); 
```

# netbeans - 从 NetBeans 生成的 Griffon 视图脚本未显示

> ID：13142371
> 
> 赞同：0
> 
> 时间：2012-10-30T15:30:19.430
> 
> 标签：netbeans, groovy, griffon, swingbuilder

我在 NetBeans 中开发了一个 UI，我想在我的 Griffon 应用程序中使用它。我选择这样做是因为我没有足够的时间来弄清楚如何使用 SwingBuilder 正确布置屏幕。根据 Griffon in Action 一书，我基本上只需要将 NetBeans 中创建的 .java 文件放在我的 Griffon 项目的 src 目录中的相应包下，并`griffon generate-view-script`使用 .java 类的完全限定类名运行命令（它我花了一段时间才弄清楚如何做到这一点）。然后它会在 views 目录中生成一个 .groovy 文件，其中包含一些包装 .java 类的代码，以使其与 SwingBuilder 一起工作。当我尝试按原样运行时，什么也没有出现。没有抛出异常，但也没有任何显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:30:19.430

事实证明，.java 类包含一个 Main() 方法，其中类的可见属性（它是 JFrame 的子类）设置为 true。SwingBuilder 不会调用 Main() 方法，因此 visible 属性从未设置为 true。为了纠正这个问题，我只需将`visible: true`参数添加到生成的小部件节点，如下所示。

```
widget(new package.path.MyClass(), id: 'MyClass', visible: true) 
```

一旦我这样做了，它就很好了。

# c++ - C++关于将数组复制到向量并调用其变量/函数

> ID：13142378
> 
> 赞同：0
> 
> 时间：2012-10-30T15:30:37.213
> 
> 标签：c++

我有一个这样的数组

```
VehicleTwoD *vehicletwod[100]; 
```

然后我创建这个向量

```
vector<VechicleTwoD*> sortVector; 
```

然后我做了这个

```
//arrayCounter is an integer that record the element count of array vehicletwod
sortVector.assign(vehicletwod, vehicletwod+ arrayCounter); 
```

但现在我尝试通过使用调用 vehicletwod 的功能

```
sortVector->getName(); 
```

它不起作用，错误消息是 sortVector 没有这样的功能。我怎样才能找回它或它不可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:32:10.627

`sortVector`是类型`vector<VehicleTwoD*>`（我假设这就是你的意思），所以它没有那个方法。您可能想在向量中的元素上调用该方法，在这种情况下，您可以执行以下操作：

```
sortVector[0]->getName(); 
```

这将在向量的第一个元素上调用该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:33:01.020

你的意思是调用函数`sortVector[0]`吗？（或聚合的任何其他成员？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T15:37:27.217

您可能只需要说出要调用的向量的哪个元素。

```
sortVector[i]->getName(); 
```

# ssrs-2008 - 根据第一个参数禁用/忽略第二个参数

> ID：13142381
> 
> 赞同：0
> 
> 时间：2012-10-30T15:30:47.043
> 
> 标签：ssrs-2008, reporting-services

我的报告中有 2 个多值参数。当我们只使用其中一个生成报告时，就会出现问题。如果我为参数 1 选择一个值并保持未选择参数 2，则会收到错误消息：

> 请为参数 Param2 选择一个值

即使我在参数的属性中选中“允许空白值”，也会发生这种情况。

另外：有没有办法根据另一个参数的值来设置要启用/禁用的参数？例如：

*   如果我创建另一个具有值 Param1、Param2 的参数；
*   如果我为 Param1 选择一个值，则将仅基于在 Param1 中选择的值生成报告，禁用或忽略 Param2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T02:50:37.920

最简洁的答案是不。

对于这种情况，我的解决方法是摆弄驱动 Param2 的可用值列表的数据集。您需要对其进行设置，以便在选择特定的 Param1 值时，唯一匹配的行将是一个虚拟行（例如“N/A”）。这可能涉及 UNION ALL 来生成该虚拟行。

我对默认值使用相同的数据集，以便在选择 Param1 值时自动选择虚拟行。

然后，您需要在引用 Param2 的其他数据集中满足该虚拟 Param2 值，例如 SELECT ... WHERE (@Param2 = 'N/A' OR Column2 = @Param2)。

# javascript - 如何使用 Websockets 启动 HTML5 多人游戏（1 对 1 游戏）

> ID：13142384
> 
> 赞同：0
> 
> 时间：2012-10-30T15:30:54.513
> 
> 标签：javascript, html, websocket

可能已经有这些问题一千次了。

对于一个学校项目，我想制作一个 HTML5 游戏，您可以在其中挑战某人并与之对抗。现在我对游戏开发很陌生。我现在不知道从哪里开始。网络上有太多的信息/技术，我不知道该使用哪个。我更喜欢在已知环境 (.NET) 中执行此操作

我发现了这些：

*   [http://kaazing.com/](http://kaazing.com/)
*   [http://xsockets.net/](http://xsockets.net/)

我还检查了 Node.js、socket.io、HTML5 画布等

这对我来说有点压倒性。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:47:24.627

由于您在 .NET 环境中工作，请查看 SignalR，[http](http://signalr.net) ://signalr.net 。这是一个非常好的围绕 websockets 的 API（可以回退到旧服务器和浏览器的其他方法），它可以让您进行客户端到服务器和服务器到客户端的通信。

客户端上的代码可以调用 Javascript 函数，该函数又会调用服务器上的方法。然后，该服务器方法可以将消息向下发送到一个或所有连接的客户端。Alnitak 的回答是正确的；您的通信将是从客户端到服务器到客户端，而不是直接从客户端到客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:33:51.723

您将需要一个中央服务器在两个玩家之间中继消息。

WebSockets（以及您可能会发现插入浏览器的任何其他东西）不适合直接的点对点通信。

# c# - WatiN 和隔断线

> ID：13142388
> 
> 赞同：0
> 
> 时间：2012-10-30T15:31:09.803
> 
> 标签：c#, watin

我想用断线在文本字段中输入值来检查应用程序的某些功能。像这样：

```
value1
value2 
```

我使用 Environment.NewLine, "\r\n" 但 WatiN 将它们转换为空格：

```
MyField.Value=("value1"+Environment.NewLine+"value2");
MyField.Value=("value1"+"\r\n"+"value2"); 
```

手动一切正常。有没有办法真正模仿在 WatiN 中输入断线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:32:01.913

两种解决方案都适用于设置为超过 1 行的文本区域：

```
textArea.SetAttributeValue("value", "abc" + Environment.NewLine + "123");

textArea.TypeText("abc" + Environment.NewLine + "123"); 
```

确保将字段设置为支持多行。

# emacs - 如何在 emacs org-mode 中配置depend.el？

> ID：13142391
> 
> 赞同：3
> 
> 时间：2012-10-30T15:31:12.520
> 
> 标签：emacs, org-mode

[http://orgmode.org/worg/org-contrib/org-depend.html](http://orgmode.org/worg/org-contrib/org-depend.html)

在网页底部，“高级触发示例”——

```
{(defun mm/org-insert-trigger ()
"Automatically insert chain-find-next trigger when entry becomes NEXT"
(cond ((equal org-state "NEXT")
     (unless org-depend-doing-chain-find-next
       (org-set-property "TRIGGER" "chain-find-next(NEXT,from-current,priority-up,effort-down)")))
    ((not (member org-state org-done-keywords))
     (org-delete-property "TRIGGER"))))

(add-hook 'org-after-todo-state-change-hook 'mm/org-insert-trigger)`} 
```

我想配置`org-mode`上面类似的样式，但我不知道如何。

`mm/org-insert-trigger`怎么样`mm`？我将代码放在 .emacs 中。当我将状态更改为“下一个”时，它会出现`symbol's value as variable is void.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T02:47:29.223

将（需要'org-depend）放入您的.emacs

# c# - PresentationFontCache 使用 50% CPU，如何编写代码来防止这种情况

> ID：13142395
> 
> 赞同：1
> 
> 时间：2012-10-30T15:31:33.483
> 
> 标签：c#, .net, wpf, xaml

我编写了一个 XAML/C# 程序来进行一些简单的数学计算并在屏幕上显示结果。

它使用了一些故事板和简单的颜色变化，这就是为什么我不明白为什么`PresentationFontCache`有时会发疯并占用 CPU。

有没有办法防止`PresentationFontCache`在代码中运行？我只使用了大约 3 种不同的字体，所以我真的不需要它来运行。

需要基于代码的解决方案，因为我无法通过服务访问每个用户的机器来禁用它。

# c++ - 链接静态库两次会导致重复吗？

> ID：13142399
> 
> 赞同：7
> 
> 时间：2012-10-30T15:31:51.470
> 
> 标签：c++, visual-studio, static-libraries, static-linking

我有一个链接到 OpenCV 和 cvBlob 的项目，但 cvBlob 也链接到 OpenCV。OpenCV 和 cvBlob 都是作为静态库构建的。

我的可执行文件是否有我的代码和 cvBlob 使用的所有 OpenCV 函数的 2 个副本，或者链接器是否检测到这一点并删除冗余？

cvBlob 和我的代码链接到相同的 OpenCV 库文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T15:38:47.177

如果它们都链接到相同的 .lib 文件，则最终可执行文件中只有一个副本。

# iphone - 我无法获取使用 MGTwitterEngine(iPhone) for Twitter API 1.1 检索的值

> ID：13142400
> 
> 赞同：1
> 
> 时间：2012-10-30T15:31:51.670
> 
> 标签：iphone, objective-c, json, mgtwitterengine, yajl

我使用 MGTwitterEngine(iPhone)。但我无法获取使用 MGTwitterYAJLParser 检索到的值……以下描述了 [https://dev.twitter.com/docs/api/1.1/get/search/tweets](https://dev.twitter.com/docs/api/1.1/get/search/tweets)。

这是我的代码…… MGTwitterSearchYAJLParser.m

```
 - (void)addValue:(id)value forKey:(NSString *)key
{
    //if for some reason there are no dictionaries, exit here
    if (!_dictionaries || [_dictionaries count] == 0)
    {
        return;
    }

    NSMutableDictionary *lastDictionary = [_dictionaries lastObject];
    if([[lastDictionary objectForKey:key] isKindOfClass:[NSArray class]]){
        NSMutableArray *array = [lastDictionary objectForKey:key];
        [array addObject:value];
    }else{
        [lastDictionary setObject:value forKey:key];
    }

#if DEBUG_PARSING
    NSLog(@"parsed item: %@ = %@ (%@)", key, value, NSStringFromClass([value class]));
#endif
}

- (void)startDictionaryWithKey:(NSString *)key
{
#if DEBUG_PARSING
    NSLog(@"status: dictionary start = %@", key);
#endif

    if (!_dictionaries)
    {
        _dictionaries = [[NSMutableArray alloc] init];
    }

    if (!_dictionaryKeys)
    {
        _dictionaryKeys = [[NSMutableArray alloc] init];
    }

    //add a new dictionary to the array
    NSMutableDictionary *newDictionary = [[NSMutableDictionary alloc] initWithCapacity:0];
    [_dictionaries addObject:newDictionary];
    [newDictionary release];

    //add a key for the above dictionary to the array
    [_dictionaryKeys addObject:(key) ? key : @""];
}

- (void)endDictionary
{
    if (_dictionaries && _dictionaryKeys && [_dictionaries count] > 0 && [_dictionaryKeys count] > 0)
    {
        //is this the root dictionary?
        if ([_dictionaries count] == 1)
        {
            //one dictionary left, so it must be the root
            NSMutableDictionary *rootDictionary = [_dictionaries lastObject];

            //set the request type in the root dictionary
            [rootDictionary setObject:[NSNumber numberWithInt:requestType] forKey:TWITTER_SOURCE_REQUEST_TYPE];

            //send the root dictionary to the super class
            [self _parsedObject:rootDictionary];
            [parsedObjects addObject:rootDictionary];
        }
        else
        {
            //child dictionary found
            //add the child dictionary to its parent dictionary
            NSMutableDictionary *parentDictionary = [_dictionaries objectAtIndex:[_dictionaries count] - 2];
            [parentDictionary setObject:[_dictionaries lastObject] forKey:[_dictionaryKeys lastObject]];
        }

        //remove the last dictionary since it has been joined with its parent (or was the root dictionary)
        //also remove the corresponding key
        [_dictionaries removeLastObject];
        [_dictionaryKeys removeLastObject];
    }
#if DEBUG_PARSING
    NSLog(@"status: dictionary end");
#endif
}

- (void)startArrayWithKey:(NSString *)key
{
    arrayDepth++;

    NSMutableArray *newArray = [NSMutableArray array];
    [self addValue:newArray forKey:key];

#if DEBUG_PARSING
    NSLog(@"status: array start = %@", key);
#endif
}

- (void)endArray
{
#if DEBUG_PARSING
    NSLog(@"status: array end");
#endif

    arrayDepth--;
    [self clearCurrentKey];
}

- (void)dealloc
{
    [_dictionaries release];
    [_dictionaryKeys release];
    [_status release];
    [super dealloc];
} 
```

# sql - ASP.NET 角色和成员管理

> ID：13142403
> 
> 赞同：0
> 
> 时间：2012-10-30T15:31:58.073
> 
> 标签：sql, asp.net, stored-procedures

我在我的网站上使用 asp.net 的内置角色和成员管理工具。我目前正在升级站点的功能，以便站点管理员可以添加/删除角色，并从站点页面内部管理不同角色的访问。但是，当我执行

```
System.Web.Security.Roles.CreateRole(roleName); //Where roleName is a string value of the role that I am creating, and it is not a duplicate name. 
```

我收到错误消息

```
System.Data.SqlClient.SqlException: Conversion failed when converting from a character string to uniqueidentifier. 
```

该站点在共享主机上运行，​​我正在使用 ASP.NET 表、触发器和存储过程。奇怪的是，使用内置方法将用户更新为角色、创建用户、删除用户、重置密码等都没有问题。系统为我创建的存储过程是否有可能存在某种缺陷，并且没有返回它需要执行的所有数据？如果不是，那么还有什么可能是问题的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:45:31.107

你的代码不正确。

您首先通过传入该用户的参数（用户名、密码、电子邮件等）来创建用户。

然后，您[使用角色提供者将该用户添加到角色](http://msdn.microsoft.com/en-us/library/system.web.security.roleprovider.adduserstoroles.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T17:01:36.460

这是创建角色 SP：

```
CREATE PROCEDURE [dbo].[aspnet_Roles_CreateRole]
@ApplicationName  nvarchar(256),
@RoleName         nvarchar(256) 
```

AS BEGIN DECLARE @ApplicationId uniqueidentifier SELECT @ApplicationId = NULL

```
DECLARE @ErrorCode     int
SET @ErrorCode = 0

DECLARE @TranStarted   bit
SET @TranStarted = 0

IF( @@TRANCOUNT = 0 )
BEGIN
    BEGIN TRANSACTION
    SET @TranStarted = 1
END
ELSE
    SET @TranStarted = 0

EXEC dbo.aspnet_Applications_CreateApplication @ApplicationName, @ApplicationId OUTPUT

IF( @@ERROR <> 0 )
BEGIN
    SET @ErrorCode = -1
    GOTO Cleanup
END

IF (EXISTS(SELECT RoleId FROM dbo.aspnet_Roles WHERE LoweredRoleName = LOWER(@RoleName) AND ApplicationId = @ApplicationId))
BEGIN
    SET @ErrorCode = 1
    GOTO Cleanup
END

INSERT INTO dbo.aspnet_Roles
            (ApplicationId, RoleName, LoweredRoleName)
     VALUES (@ApplicationId, @RoleName, LOWER(@RoleName))

IF( @@ERROR <> 0 )
BEGIN
    SET @ErrorCode = -1
    GOTO Cleanup
END

IF( @TranStarted = 1 )
BEGIN
    SET @TranStarted = 0
    COMMIT TRANSACTION
END

RETURN(0) 
```

清理：

```
IF( @TranStarted = 1 )
BEGIN
    SET @TranStarted = 0
    ROLLBACK TRANSACTION
END

RETURN @ErrorCode 
```

结尾

# extjs - 用静态数据填充 Extjs 组合框

> ID：13142407
> 
> 赞同：5
> 
> 时间：2012-10-30T15:32:03.157
> 
> 标签：extjs, extjs4

我的基类中有一个组合框，我只配置“字段”属性。像这样：

```
items: [
      comboText = Ext.create('Ext.form.ComboBox', {
                width: 150,
                padding: '0 20 0 0',
                displayField: 'label',
                store: Ext.create('Ext.data.Store', {
                    fields: [
                        {type: 'string', name: 'label'},
                        {type: 'string', name: 'fieldName'}
                    ]
                })
            }),
...] 
```

如何仅将数据属性传递给此组合？我尝试了下面的代码但不起作用：

```
comboTest.store.loadData(value); 
```

其中 value 包含这样的数组：

```
 [
    {"label":"First name", "fieldName":"firstname"},
    {"label":"Birth date", "fieldName":"birthdate"}
 ] 
```

没有错误，但组合框什么也不打开。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-04-11T14:48:32.093

我得到这个工作使用：

```
 xtype:'combo',
   fieldLabel:'Division',
   name:'division',
   valueField: 'division',
   queryMode:'local',
   store:['A','B','C'],
   displayField:'division',
   autoSelect:true,
   forceSelection:true 
```

我知道这个问题真的很老了，但以防万一有人来寻找开箱即用的答案；对我来说就是这样。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-30T17:11:39.653

试试这个配置：

```
 xtype:'combo',
       fieldLabel:'Division',
       name:'division',
       queryMode:'local',
       store:['A','B','C'],
       displayField:'division',
       autoSelect:true,
       forceSelection:true 
```

另一种选择[在 ComboBox 的文档中](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.ComboBox)列出：

```
 // The data store containing the list of states
    var states = Ext.create('Ext.data.Store', {
        fields: ['abbr', 'name'],
        data : [
            {"abbr":"AL", "name":"Alabama"},
            {"abbr":"AK", "name":"Alaska"},
            {"abbr":"AZ", "name":"Arizona"}
            //...
        ]
    });

    // Create the combo box, attached to the states data store
    Ext.create('Ext.form.ComboBox', {
        fieldLabel: 'Choose State',
        store: states,
        queryMode: 'local',
        displayField: 'name',
        valueField: 'abbr',
        renderTo: Ext.getBody()
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-09T19:28:17.950

`valueField`是强制性的`combobox`。尝试`valueField`在您的组合框中设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-03T12:07:16.923

有用：

```
{
    name: 'sample',
    xtype: 'combobox',
    allowBlank: false,
    emptyText: 'select ...',
    queryMode: 'local',
    itemId: 'sample',
    id: 'sample',
    displayField: 'name',
    valueField: 'name',
    forceSelection:true,
    store: ['B','C', 'A'],
    typeAhead: true
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-05T08:16:40.817

而不是使用 loadData();

```
comboTest.store.loadData(value); 
```

使用 loadRawData();

```
comboTest.store.loadRawData(value); 
```

如果混乱试试这个[小提琴](https://fiddle.sencha.com/#view/editor&fiddle/2nam)

# c# - 如何使图片的背景不可见？

> ID：13142408
> 
> 赞同：-1
> 
> 时间：2012-10-30T15:32:02.153
> 
> 标签：c#, winforms

我想在按钮上添加图片。但是背景颜色与按钮颜色不同。如何更改背景使透明/不可见？

此按钮图片的背景颜色必须更改...

![在此处输入图像描述](../Images/13ca65ef1fd8da06f6f899ee7f13240e.png)

...到这个

![在此处输入图像描述](../Images/6d1b20eaa3c6db1771c3a23301bb8ae4.png)

谢谢，韦斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:01:56.737

在 WinForms 中：

选择 PictureBox -> 属性 -> BackColor -> web -> 透明

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:41:04.050

图像类型是什么？如果它是一个位图对象，您可能有一个 24 位 bgr 图像。要使其透明，您需要将其设为 32 位 bgra 图像并将具有背景颜色的每个像素更改为 a 通道​​中的 0。如果它是 8 位颜色映射图像，您可以将背景颜色的调色板条目更改为 a 通道​​中为 0 的颜色。

# linux - Shell 脚本错误

> ID：13142410
> 
> 赞同：0
> 
> 时间：2012-10-30T15:32:09.570
> 
> 标签：linux, shell

我有这个 shell 脚本，但我不断收到奇怪的错误。其中一个是需要做的。另一个是 config.txt 没有找到，但我在 .sh 脚本的目录中有它。

这是错误打印输出：

```
jmgreen@jdev:~/citigetbash$ sh citiget.sh
: not found 2: clear
CITIGET
config.txt: No such file or directory

citiget.sh: 17: Syntax error: word unexpected (expecting "do") 
```

这是目录的LS：

```
jmgreen@jdev:~/citigetbash$ ls
citiget.sh  config.txt  docs 
```

这是我的shell脚本

```
#!/bin/bash
clear
strTitle="CITIGET"
echo $strTitle
#=====CONFIGURATION=============================================================
strLocalDir="/home/jmgreen/citigetbash/"
intMode=1
intTry=5
#===============================================================================
#
# ===== Read in all the URLs
strDir=$(pwd)
URLS=$(cat $strLocalDir"config.txt")
echo $URLS
# ===== Get the file 
if [ $intMode = 1 ]; then
    for u in $URLS;
        do 
            # ===== Get the datestamp ready
            ts=$(date +%Y%m%d%H%M%S);
            echo "Trying..."$u
            wget $u --no-check-certificate -t$intTry -a logfile.txt -O $strLocalDir"downloaded/"$ts".csv";
    done
else
    for u in $URLS;
        do 
            # ===== Get the datestamp ready
            ts=$(date +%Y%m%d%H%M%S);
            wget $u -q --no-check-certificate -t$intTry -a logfile.txt -O $strLocalDir"downloaded/"$ts".csv";
    done
fi
# ===== Clear Screen?
if [ $intMode = 1 ]; then
    clear
fi
echo "===== DONE ====="
exit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:38:05.540

首先，替换`cat $strLocalDir"config.txt"`为`cat "${strLocalDir}config.txt"`。

然后，检查 config.txt 包含什么？这将被移至 $URLS 变量，可能它的格式不正确。

当您遇到此类问题时，请尝试插入调试语句，例如 print。每次需要时测试变量的值，您会更准确地知道代码在哪里出错。

# git - Git 子树 - 保持资源代码同步

> ID：13142414
> 
> 赞同：1
> 
> 时间：2012-10-30T15:32:11.840
> 
> 标签：git, sync, git-submodules, git-subtree

让我们调用 2 个项目 A 和 B。这是每个项目的结构：

```
/
|- Foo
|   |- core
|   |    |- bar.txt
|   |    |- ...
|   |- specific
|          |- ...
|- ... 
```

**/Foo/core/**的内容应该在 A 和 B 中本地存在并同步。这意味着，如果我在项目 A 中编辑 bar.txt，我应该能够在同一台机器上在项目 B 中获得该更改，反之亦然。

我尝试创建一个名为“Core”的项目，并将其作为 A 和 B 的子模块。问题是，如果我编辑 bar.txt，将其推送到远程，然后推送 A，显然我无法获得代码在项目 B 上进行子模块更新。这不是同一个项目。

我也尝试过子树合并。问题是，“核心”并不意味着是一个独立的项目，我不能像现在这样开发它。它只是资源文件和更大的通用功能。因此，我希望能够在 A 和 B 中编辑我的 bar.txt，在**该项目中专门**对其进行测试，然后以某种方式在另一个项目中对其进行测试。

在 Git Book 的关于[子树合并](http://git-scm.com/book/ch6-7.html)的章节中，说：

> 您可以 [...] 在 master 分支的 rack 子目录中进行更改，然后稍后将它们合并到您的 rack_branch 分支中，以将它们提交给维护者或将它们推送到上游。

但是没有解释我应该如何做，也没有解释我如何让我的 2 个本地文件夹保持同步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T17:33:14.813

子模块将起作用。当您在处理项目 A 时对核心项目进行更改时，您会在这两个项目中推送更改。要更新项目 B 中的核心，您只需将项目 B 中的核心中的更改拉取。CD 到项目 B，`git add -A && git commit -m "updated core"`以将项目 B 更新到最新的核心。

# c# - 用于广泛搜索的架构

> ID：13142415
> 
> 赞同：2
> 
> 时间：2012-10-30T15:32:12.730
> 
> 标签：c#, sql-server, search, architecture

我们现在正在构建的其中一件事是寻找人的搜索功能。

从简单开始，我们使用 Linq to 实体进行搜索，如下所示：`Entities.People.Where(z=>z.Birthdate < birthdate).ToList()`

然后，当添加新的 searchcriteria 时，linq 语句不断增长，现在我们必须重构它，因为没有人再理解它了。

此时，我们必须方便搜索 8 个相关项，例如“你在这里工作吗”、“你会说这种语言吗”、“从这 6 项技能中，你掌握了哪些”等。

所有这些项目都是 SqlServer 中的 1:N 或 N:N 关系，我们正在搜索多个项目，我们想知道你有“多少匹配”。

例如：我们寻找说法语和/或英语和/或德语的人，我们希望得到所有至少有 1 个匹配项的人，对于这些人，我们想知道有多少匹配项（即 3 个中的 1 个或2 / 3) 每个人都有。

此时的问题是：做什么是明智的（数据库中大约有 10.000 人）。

头脑风暴使我们有以下选择：

1.  在数据库中进行最快的搜索（因此您检索有限数量的记录）并在代码中对其余部分进行排序
2.  继续使用 Linq 构建
3.  在 SqlServer 中执行整个操作

有什么提示可以帮助我们入门吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:36:31.660

如果 Linq to Entities 表达式变得过于复杂，这对我来说意味着您的需求正在迅速发展。

鉴于您的数据库的总大小很小（10K 记录非常小），您可能会发现编写返回所有可能匹配的人的 SQL（或 Linq to Entities）语句最有效，并在业务层应用排序.

我说“高效”是因为不过滤数据库端的一些记录不会损失太多（如果数据库包含 10M 条记录并且您返回了相当大的一部分，那将不太正确），并且因为我从方式上感觉到你写了你的问题，你的团队可能更愿意在代码中工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:51:49.907

就速度而言，只要您使用已编译的查询，您的`select`性能就不太可能有太大的不同。[Rico Mariani](http://blogs.msdn.com/b/ricom/archive/2007/06/22/dlinq-linq-to-sql-performance-part-1.aspx)有一篇很棒的文章，他详细介绍了他们为使 LINQ 相对于 SQL 更快所做的所有工作。妙语是，如果您使用的是已编译的 select 语句（就像您应该使用的那样），那么您的运行速度几乎与存储过程一样快 -实际上[是原始 SQL 的 93% 。](http://blogs.msdn.com/b/ricom/archive/2007/07/05/dlinq-linq-to-sql-performance-part-4.aspx)如果您没有使用已编译的选择，那么您应该阅读[这篇文章](http://www.codeproject.com/Articles/76861/Linq-to-SQL-Performance-Considerations-Part-2)，让您深入了解如何制作它们。未编译的选择查询大约是普通 SQL 的一半，因此可能会有不错的收获。

如果速度不是什么大问题，并且您指的是保持这个听起来复杂的数据库模式一致的组织任务，那么这完全是另一回事。如果是这种情况，那么您可能希望从 SQL 级别开始，至少确保您拥有所有想要的匹配项。这很容易测试，并且 SQL 针对这种搜索进行了优化。当您可以从服务器获得或多或少的即时反馈时，您还会发现更容易确认您的工作，而不必编译和运行您的程序来测试场景。

在你确定你拥有你想要的一切并且没有你不想要的一切之后，你可以处理简单得多的任务，即在 C# 中简单地组织它，使用任何规则来确定候选人的优先级。

编辑：哎呀，我没有看到埃里克的答案与我的非常相似。那好吧。

# c++ - 解决错误的一般方法：变量“x”周围的堆栈已损坏

> ID：13142419
> 
> 赞同：25
> 
> 时间：2012-10-30T15:32:18.033
> 
> 标签：c++, visual-studio-2010, debugging

我有一个程序在调试时提示我 VS2010 中的错误：

```
Error: Stack around the variable 'x' was corrupted 
```

这给了我可能发生堆栈溢出的函数，但我无法直观地看到问题出在哪里。

有没有用VS2010调试这个错误的通用方法？是否有可能确定哪个写操作覆盖了不正确的堆栈内存？谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-30T16:08:05.603

> 有没有用VS2010调试这个错误的通用方法？

不，没有。您所做的是以某种方式调用未定义的行为。这些行为未定义的原因是一般情况很难检测/诊断。有时证明是不可能的。

但是，通常会导致您的问题的事情很少：

*   内存处理不当：
    *   删除两次，
    *   使用错误的删除类型（`free`对于分配有的东西`new`等），
    *   在内存被删除后访问某些东西。
*   返回指向本地的指针或引用。
*   读取或写入超出数组末尾。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-30T15:34:14.940

这可能是由几个通常很难看到的问题引起的：

*   双重删除
*   `delete`分配有的变量`new[]`或`delete[]`分配有的变量`new`
*   `delete`分配给的东西`malloc`
*   `delete`自动存储变量
*   通过引用返回本地

如果不是很清楚，我会使用内存调试器（我可以想到 Rational Purify for windows）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-30T15:35:38.400

此消息也可能是由于数组边界违规。确保您的函数（以及它调用的每个函数，尤其是基于堆栈的对象的成员函数）遵守可能使用的任何数组的边界。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-30T16:32:57.750

实际上，您所看到的信息量很大，您应该在 x 变量位置附近检查可能导致此错误的任何活动。

以下是如何重现此类异常：

```
int main() {
    char buffer1[10];
    char buffer2[20];
    memset(buffer1, 0, sizeof(buffer1) + 1);
    return 0;
} 
```

将生成（VS2010）：

运行时检查失败 #2 - 变量“buffer1”周围的堆栈已损坏。

显然 memset 比它应该写的多 1 个字符。带有选项 \GS 的 VS 允许检测此类缓冲区溢出（您已启用），有关更多信息，请在此处阅读：http: [//msdn.microsoft.com/en-us/library/Aa290051](http://msdn.microsoft.com/en-us/library/Aa290051)。

例如，您可以使用调试器并逐步执行代码，每次查看变量的内容，它们如何变化。你也可以试试数据断点的运气，当一些内存位置改变并且调试器在那一刻停止时设置断点，可能会向你显示问题所在的调用堆栈。但这实际上可能不适用于 \GS 标志。

要检测堆溢出，您可以使用 gflags 工具。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-07T13:31:50.350

我对这个错误困惑了好几个小时，我知道可能的原因，并且在前面的答案中已经提到过，但是我不分配内存，不访问数组元素，不返回指向局部变量的指针.. .

然后终于找到了问题的根源：

```
*x++; 
```

目的是增加指向的值。但是由于优先级`++`是第一位的，向前移动`x`指针然后`*`什么都不做，`*x`如果参数来自堆栈，那么写入将破坏堆栈金丝雀，使 VS 抱怨。

改变它来`(*x)++`解决问题。

希望这可以帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-30T16:04:25.567

这是我在这种情况下所做的：

在可以看到相关变量的（正确）值但在错误发生之前的位置设置断点。您将需要堆栈被破坏的变量的内存地址。有时我必须添加一行代码才能让调试器轻松地给我地址 (int *x = &y)

此时可以设置内存断点（Debug->New Breakpoint->New Data Breakpoint）

点击播放，当内存被写入时调试器应该停止。查找堆栈（我的通常会在一些汇编代码中中断）以查看被调用的内容。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-16T15:48:50.607

*我通常在抱怨变量之前*跟踪变量，这通常可以帮助我解决问题。但这有时可能非常复杂，没有任何线索，正如您所见。您可以启用“调试”菜单>>“异常”并勾选“Win32 异常”以捕获所有异常。这仍然不会捕获此异常，但它可以捕获可能间接指向问题的其他内容。

就我而言，这是由我正在使用的库引起的。结果是我在项目中包含的头文件与该库中的实际头文件不完全匹配（一行）。

还有一个不同的错误也相关：

> 0xC015000F：被停用的激活上下文不是最近激活的。

当我厌倦了在没有调试信息的情况下在我的计算机上收到神秘的堆栈损坏消息时，我在另一台计算机上尝试了我的项目，它给了我上面的消息。有了新的例外，我能够解决问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-09T05:50:16.440

当我创建一个包含 13 个项目的指针数组，然后尝试设置第 14 个项目时，我遇到了这个问题。将数组更改为 14 个项目解决了这个问题。希望这可以帮助一些人^_^

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-02-01T09:36:03.293

“围绕变量'x'的堆栈已损坏”问题的一个相对常见的来源是错误转换。有时很难发现。这是发生此类问题的功能示例和修复方法。在函数中`assignValue`，我想为变量分配一些值。该变量位于作为参数传递给函数的内存地址：

```
using namespace std;

template<typename T>
void assignValue(uint64_t address, T value)
{
    int8_t* begin_object = reinterpret_cast<int8_t*>(std::addressof(value));
    // wrongly casted to (int*), produces the error (sizeof(int) == 4)
    //std::copy(begin_object, begin_object + sizeof(T), (int*)address);  
    // correct cast to (int8_t*), assignment byte by byte, (sizeof(int8_t) == 1)
    std::copy(begin_object, begin_object + sizeof(T), (int8_t*)address); 
}

int main()
{
    int x = 1;
    int x2 = 22;
    assignValue<int>((uint64_t)&x, x2);
    assert(x == x2);
} 
```

# android - Android - GPS 和网络提供商冲突

> ID：13142423
> 
> 赞同：2
> 
> 时间：2012-10-30T15:32:31.427
> 
> 标签：android, networking, gps, location

我正在创建应用程序来监听位置变化，`onResume()`我调用这两种方法：

```
_locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 10,locationListenerGps);
_locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 1000, 10, locationListenerNetwork); 
```

当我这样做时，我永远不会从 获得位置`GPS_PROVIDER`，只有从`NETWORK_PROVIDER`。

更重要的是，当我从 NETWORK 获得位置并且它到达方法`onStatusChanged()`（导致`TEMPORARILY_UNAVAILABLE`）应用程序被卡住并且没有任何事情发生时。在我重新启动应用程序之前，根本没有位置更新。

我会感谢任何帮助发现它为什么不像我想象的那样工作......

# sql - SQL 中递归层次结构数据的表

> ID：13142433
> 
> 赞同：0
> 
> 时间：2012-10-30T15:32:49.210
> 
> 标签：sql, sql-server, database, tsql

> **可能重复：**
> [在 SQL Server 中进行递归自联接的最简单方法？](https://stackoverflow.com/questions/1757260/simplest-way-to-do-a-recursive-self-join-in-sql-server)

我必须在 SQL 中创建一个包含项目/产品组的表。每个新组将在**预定义**组之一或先前形成的组下进行。我想将所有这些数据保存在 SQL 表中。到目前为止，我已经创建了一个这样的表：

*   组 ID
*   组的名字
*   Group Under（这将存储该组所属的组的ID

但这只能指下一个层次，我怎么知道谁是这个组的超级家长。

例如：

*   我有团体`A, B, C`。
*   `A`有更多的子群`A1, A2, A3`。
*   `A1`有进一步的子群，`A11, A12, A13`。

我将获得有关超级父母组的信息，即`A`来自`A11`或`A22`或`A33`？

如果问题不清楚，请告诉我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:20:50.393

假设 T-SQL 和 MSSQLServer（你没有指定），并且你的`Group`表应该看起来像这样：

```
Id | Name | ParentId
---+------+---------
 1 | A    | NULL
 2 | B    | NULL
 3 | C    | NULL
 4 | A1   | 1
 5 | A2   | 1
 6 | A3   | 1
 7 | A11  | 4
 8 | A12  | 4
 9 | A13  | 4 
```

您可以使用以下递归 CTE 来查找给定组的顶层，例如“A12”：

```
WITH [Group](Id, Name, ParentId) AS
(
    SELECT 1, 'A'  , NULL UNION
    SELECT 2, 'B'  , NULL UNION
    SELECT 3, 'C'  , NULL UNION
    SELECT 4, 'A1' , 1    UNION
    SELECT 5, 'A2' , 1    UNION
    SELECT 6, 'A3' , 1    UNION
    SELECT 7, 'A11', 4    UNION
    SELECT 8, 'A12', 4    UNION
    SELECT 9, 'A13', 4

), q AS 
(
    SELECT  
        *
    FROM    
        [Group]
    WHERE
        [Name] = 'A12' -- Given 'A12' as the child
    UNION ALL
    SELECT  
        g.*
    FROM
        [Group] g
    JOIN    
        q
        ON      
        q.ParentId = g.Id
    )
SELECT  
    *
FROM
    q
WHERE
    ParentId IS NULL 
```

此查询返回：

```
Id | Name | ParentId
---+------+---------
 1 | A    | NULL 
```

# powershell - 在远程机器上传递数据并执行远程powershell脚本（可能是telnet？）

> ID：13142435
> 
> 赞同：0
> 
> 时间：2012-10-30T15:32:55.967
> 
> 标签：powershell

我有一个脚本`Machine A`可以检查端口是否打开`Machine B`。我想要做的是以某种方式传递到将要测试`Machine B`的端口。`Machine A`我已经研究过诸如调用命令和 telnet 之类的东西，但我很好奇你们认为在这两个服务器之间进行通信的最佳方式是什么。同一个网络，不同的域。我在两个盒子上都有管理员权限

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:46:00.360

如果您只是想将具有值 ($testport) 的变量“传入”到远程会话，那么您可以这样完成：

```
invoke-command -session $session -scriptblock {param($testport)
  #create variable and assign it a value
  set-variable -name:"testport" -value:$testport -force  -erroraction silentlycontinue;
} 
```

要一次发送多个变量（例如，使用父会话中的所有全局变量初始化远程会话），请将它们收集到 $hash 中并使用如下内容：

```
invoke-command -session $session -scriptblock {param($hash, $setAsGlobal)
#create global variable and assign value for each hash table entry
if ($setAsGlobal -eq $true) {
  foreach ($key in $hash.keys) {
      set-variable -name:$key -value:$hash.$key -scope:'global' -force  -erroraction silentlycontinue;
  }
} else {
  foreach ($key in $hash.keys) {
    set-variable -name:$key -value:$hash.$key -force  -erroraction silentlycontinue;
  }
} 
```

要从远程会话中取回变量并分配给 $result：

```
 $varname = "testport";
 $result = invoke-command -session $session -scriptblock {param($varname)
    get-variable -name $varname -valueonly
 } -argumentlist $varname 
```

# android - Android：setOnClickListener 不会在所有其他点击时触发

> ID：13142438
> 
> 赞同：0
> 
> 时间：2012-10-30T15:33:00.607
> 
> 标签：android, button, click

我有一个带有 setOnClickListener 事件处理程序的按钮。当我点击按钮时，事件处理程序不会触发。当我再次点击它时，它会触发。如果我再次点击它，它不会触发。再次点击它，它就会触发。什么可能导致这种交替触发？这是我的代码以及 UI 标记：

```
Button btnDownload = (Button) this.viewSpecGeneral.findViewById(R.id.btnDownload);

btnDownload.setOnClickListener(new OnClickListener()
{
  @Override
  public void onClick(View v)
  {
  }
} 
```

XML:

```
<Button
    android:id="@+id/btnDownload"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignTop="@id/lblFileSize"
    android:layout_marginLeft="15dp"
    android:layout_marginTop="-2dp"
    android:background="@drawable/button_gradient_green"
    android:ellipsize="marquee"
    android:focusable="true"
    android:focusableInTouchMode="true"
    android:marqueeRepeatLimit="marquee_forever"
    android:minWidth="110dp"
    android:padding="10dp"
    android:scrollHorizontally="true"
    android:singleLine="true"
    android:text="@string/lbl_Download"
    android:textColor="#486b3f"
    android:textSize="18sp"
    android:textStyle="bold" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:48:13.787

我刚刚删除了 focusable 和 focusableInTouchMode ，问题就消失了。

# python - Python regex：在字符范围内包括空格

> ID：13142440
> 
> 赞同：7
> 
> 时间：2012-10-30T15:33:06.350
> 
> 标签：python, regex, python-2.7

我有一个匹配字母、数字、_ 和 - 的正则表达式（具有最小和最大长度）。

```
^[a-zA-Z0-9_-]{3,100}$ 
```

我想在该组字符中包含空格。

根据 Python 文档：

> 集合内也接受诸如 \w 或 \S 之类的字符类。

所以我尝试了：

```
^[a-zA-Z0-9_-\s]{3,100}$ 
```

但它给出了错误的字符范围错误。如何在上述集合中包含空格？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-30T15:34:27.110

问题不在于指示字符范围的，`\s`而是`-`指示字符范围的，除非它位于类的末尾或开头。用这个：

```
^[a-zA-Z0-9_\s-]{3,100}$ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T15:36:00.733

`^[-a-zA-Z0-9_\s]{3,100}`

`_-\s`被解释为一个范围。代表自身的破折号必须是 [...] 中的第一个或最后一个字符

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-05-27T02:29:25.487

你在正确的轨道上，添加第二个反斜杠来转义斜杠，因为反斜杠是一个转义字符。

```
^[a-zA-Z0-9_\\-\\s]{3,100}$ 
```

# xcode - ios 5 上的 UIActivityViewController 等效项

> ID：13142446
> 
> 赞同：1
> 
> 时间：2012-10-30T15:33:16.880
> 
> 标签：xcode, ios5, twitter, uiactivityviewcontroller

我正在尝试从应用程序中共享一些文本。如果用户安装了 ios 6，我会调用 UIActivityViewController 来分享。但是，如果用户有 ios 5，是否有任何类似的我可以调用的有按钮可以共享到邮件和推特......？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-24T11:31:03.557

在 ios 5 中使用 OWActivityViewController 而不是 UIActivityViewController 你可以[在这里查看](https://github.com/brantyoung/OWActivityViewController)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:41:26.603

没有内置的方法可以做到这一点。最简单的方法是为`UIActionSheet`您需要的每个服务使用带有按钮，然后根据需要调用各种 API。

# ruby-on-rails - Beanstalkd 服务器未运行其作业

> ID：13142448
> 
> 赞同：0
> 
> 时间：2012-10-30T15:33:19.267
> 
> 标签：ruby-on-rails, ruby, beanstalkd

我正在尝试启动 beanstalk 服务器，并做了一项工作来测试它，但我什么也没得到。这是我的代码：

```
require 'stalker'
include Stalker

job 'test.job' do
  somefile = File.new("somefile")

end 
```

我使用 stalker gem 连接 ruby​​ 和 beanstalkd。任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:37:11.100

除非您打开文件并在其中写入一些内容或其他内容，否则很难观察到工作在做什么。将某些内容记录到 STDOUT，将某些内容写入文件或其他任何内容，然后您将能够看到正在执行的作业...

# regex - 如何查找具有单个字符不同的行

> ID：13142453
> 
> 赞同：-1
> 
> 时间：2012-10-30T15:33:46.630
> 
> 标签：regex

示例文本文件：

```
\文件夹_0
\文件夹-0
\文件夹-1
\文件夹'2
\文件夹-3
\文件夹_3
\文件夹'3
\文件夹，3
\文件夹,4

```

您如何找到与一个字符相同的行。例如：

```
\文件夹_0
\文件夹-0
\文件夹-3
\文件夹_3
\文件夹'3
\文件夹，3

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:52:06.423

不要使用正则表达式。

首先定义一个函数，给定两个字符串（文件中的行）返回 true，它们仅相差一个字符。

然后使用关联数组来收集基于该函数仅由单个字符不同的行组。

处理文件后，关联数组中包含多行的任何条目都是您想要的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T19:04:59.443

一种可能的方式如何...（在 Perl 中）...

```
@m = (m/[\s\S]*?(?:^|\n)(?=(.*?)(.)(.*?)(?:\n|$)(?:[\s\S]*?\n|)(\1.\3)(?:\n|$))/g);
@p = ();
while ($#m > 0) {
  ($a, $b, $c, $d) = (shift(@m), shift(@m), shift(@m), shift(@m));
  push(@p, ("$a$b$c", $d));
}
@p = keys %{{map{$_ => 1} @p}}; 
```

**[在此处](http://ideone.com/hjWAd7)**测试此代码。

# android - 在 Android 应用程序的扩展 ListActivity 中重用布局

> ID：13142464
> 
> 赞同：0
> 
> 时间：2012-10-30T15:34:08.423
> 
> 标签：android, android-layout, listactivity

我正在开发一个 Android 应用程序。所有屏幕都需要有一个带有徽标和帮助按钮的页眉和一个带有按钮的页脚，以便在屏幕之间导航。为了重用代码，我将应用我们在 ASP.Net 中的“母版页”概念，如下所述：

[http://jnastase.alner.net/archive/2011/01/08/ldquomaster-pagesrdquo-in-android.aspx](http://jnastase.alner.net/archive/2011/01/08/ldquomaster-pagesrdquo-in-android.aspx)

我将有两个屏幕，其中包含对象列表（用户组列表和组成员列表），我认为我需要使用扩展 ListActivity 的活动。

做这个的最好方式是什么？我尝试创建一个扩展 Activity 类的 BaseActivity 和一个扩展 ListActivity 类的 BaseListActivity，然后在两者中使用相同的 XML 布局文件，但是当我调用 setContentView 方法时出现“找不到源错误”：

```
super.setContentView(R.layout.activity_base); 
```

# objective-c - 如何在 iOS 6 中使用属性文本向 UILabel 添加可点击链接

> ID：13142465
> 
> 赞同：7
> 
> 时间：2012-10-30T15:34:08.213
> 
> 标签：objective-c, ios6

我使用[DTCoreText](https://github.com/Cocoanetics/DTCoreText/)在我的应用程序中显示格式化文本。DTAttributedTextView 也支持可点击的链接。
从 iOS6 开始，我们可以使用 setAttributedText 函数在 UILabel 中显示属性字符串。
但是如何显示可点击的链接？有没有办法在按下链接时调用委托函数等？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T13:16:44.637

iOS 6.0 UILabel 仍然无法显示可点击的链接。

但是，您可以改用 UITextView。textview 可以检测链接，但链接检测仅在禁用文本编辑时才有效。限制是你不能在 BBCode [url=www.apple.com]Apples Website[/url] 中做这样的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-26T10:11:50.397

这是超链接 UILabel 的示例代码：来源：[http ://sickprogrammersarea.blogspot.in/2014/03/adding-links-to-uilabel.html](http://sickprogrammersarea.blogspot.in/2014/03/adding-links-to-uilabel.html)

```
#import "ViewController.h"
#import "TTTAttributedLabel.h"
@interface ViewController ()

@end

@implementation ViewController
{
UITextField *loc;
TTTAttributedLabel *data;
}

- (void)viewDidLoad
{
[super viewDidLoad];
UILabel *lbl = [[UILabel alloc] initWithFrame:CGRectMake(5, 20, 80, 25) ];
[lbl setText:@"Text:"];
[lbl setFont:[UIFont fontWithName:@"Verdana" size:16]];
[lbl setTextColor:[UIColor grayColor]];
loc=[[UITextField alloc] initWithFrame:CGRectMake(4, 20, 300, 30)];
//loc.backgroundColor = [UIColor grayColor];
loc.borderStyle=UITextBorderStyleRoundedRect;
loc.clearButtonMode=UITextFieldViewModeWhileEditing;
//[loc setText:@"Enter Location"];
loc.clearsOnInsertion = YES;
loc.leftView=lbl;
loc.leftViewMode=UITextFieldViewModeAlways;
[loc setDelegate:self];
[self.view addSubview:loc];
[loc setRightViewMode:UITextFieldViewModeAlways];
CGRect frameimg = CGRectMake(110, 70, 70,30);
UIButton *srchButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
srchButton.frame=frameimg;
[srchButton setTitle:@"Go" forState:UIControlStateNormal];
[srchButton setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
srchButton.backgroundColor=[UIColor clearColor];
[srchButton addTarget:self action:@selector(go:) forControlEvents:UIControlEventTouchDown];
[self.view addSubview:srchButton];
data = [[TTTAttributedLabel alloc] initWithFrame:CGRectMake(5, 120,self.view.frame.size.width,200) ];
[data setFont:[UIFont fontWithName:@"Verdana" size:16]];
[data setTextColor:[UIColor blackColor]];
data.numberOfLines=0;
 data.delegate = self;
data.enabledTextCheckingTypes=NSTextCheckingTypeLink|NSTextCheckingTypePhoneNumber;
[self.view addSubview:data];
}
- (void)attributedLabel:(TTTAttributedLabel *)label didSelectLinkWithURL:(NSURL *)url
{
NSString *val=[[NSString alloc]initWithFormat:@"%@",url];
if ([[url scheme] hasPrefix:@"mailto"]) {
          NSLog(@" mail URL Selected : %@",url);
    MFMailComposeViewController *comp=[[MFMailComposeViewController alloc]init];
    [comp setMailComposeDelegate:self];
    if([MFMailComposeViewController canSendMail])
    {
        NSString *recp=[[val substringToIndex:[val length]] substringFromIndex:7];
        NSLog(@"Recept : %@",recp);
        [comp setToRecipients:[NSArray arrayWithObjects:recp, nil]];
        [comp setSubject:@"From my app"];
        [comp setMessageBody:@"Hello bro" isHTML:NO];
        [comp setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
        [self presentViewController:comp animated:YES completion:nil];
    }

}
else{
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:val]];
}
}
-(void)mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error{
if(error)
{
    UIAlertView *alrt=[[UIAlertView alloc]initWithTitle:@"Erorr" message:@"Some error occureed" delegate:nil cancelButtonTitle:@"" otherButtonTitles:nil, nil];
    [alrt show];
    [self dismissViewControllerAnimated:YES completion:nil];
}
else{
    [self dismissViewControllerAnimated:YES completion:nil];
}
}

- (void)attributedLabel:(TTTAttributedLabel *)label didSelectLinkWithPhoneNumber:(NSString *)phoneNumber
{
NSLog(@"Phone Number Selected : %@",phoneNumber);
UIDevice *device = [UIDevice currentDevice];
if ([[device model] isEqualToString:@"iPhone"] ) {
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:[NSString stringWithFormat:@"tel:%@",phoneNumber]]];
} else {
    UIAlertView *Notpermitted=[[UIAlertView alloc] initWithTitle:@"Alert" message:@"Your device doesn't support this feature." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [Notpermitted show];
}
}
-(void)go:(id)sender
{
[data setText:loc.text];
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
NSLog(@"Reached");
[loc resignFirstResponder];
} 
```

# xml - 在 C# .NET 4.0 中使用 XSLT 作为字符串将 XML 转换为字符串 - 路径中的字符无效

> ID：13142469
> 
> 赞同：1
> 
> 时间：2012-10-30T15:34:15.707
> 
> 标签：xml, asp.net-mvc, c#-4.0, xslt

我有一个 XML 文件定义为：

```
<?xml version="1.0" encoding='UTF-8'?>
<contentlets>
<content>
  <entry>
    <string>link</string>
    <string>http://www.myLink.com</string>
  </entry>
  <entry>
    <string>stInode</string>
    <string>0b4f59c1-6dee-4c1e-a0fb-353c34c8d372</string>
  </entry>
  <entry>
    <string>linkType</string>
    <string>Category Title</string>
  </entry>
  <entry>
    <string>linkText</string>
    <string>Title</string>
  </entry>
</content>
</contentlets> 
```

和一个 XSLT 定义为：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
>
    <xsl:output method="html" omit-xml-declaration="yes" indent="yes"/>
    <xsl:template match="@* | node()">
        <div id="content" data-role="content">
            <ul data-role="listview" data-inset="true" data-filter="false">
                <li data-role="list-divider">Category Title</li>
                <xsl:for-each select="content">
                    <li data-inline="false" data-icon="arrow-r" data-iconpos="right">
                        <a target="_blank">
                        <xsl:for-each select="entry">
                            <xsl:if test="string='link'">
                                <xsl:attribute name="href">
                                    <xsl:value-of select="string[2]"/>
                                </xsl:attribute>
                            </xsl:if>
                            <xsl:if test="string='linkText'">
                                <h3>
                                    <xsl:value-of select="string[2]"/>
                                </h3>
                            </xsl:if>
                        </xsl:for-each>
                        </a>
                    </li>
                </xsl:for-each>
            </ul>
        </div>
    </xsl:template>
</xsl:stylesheet> 
```

我成功地在 Visual Studio 2010 中应用了这个转换，但是，我想应用这个转换并将生成的 HTML 存储在一个字符串中。我正在使用定义如下的自定义类来执行此操作：

```
public class XsltTransformer
{
    private readonly XslCompiledTransform xslTransform;

    public XsltTransformer(string xsl)
    {
        try
        {
            xslTransform = new XslCompiledTransform();

            using (var stringReader = new StringReader(xsl))
            {
                using (var xslt = XmlReader.Create(stringReader))
                {
                    xslTransform.Load(xslt);
                }
            }
        }
        catch (Exception ex)
        {
            Log.WriteLine(ex.ToString());
        }
    }

    public string Transform(string strXml)
    {
        try
        {
            string output = String.Empty;
            using (StringReader sri = new StringReader(strXml))
            {
                using (XmlReader xri = XmlReader.Create(sri))
                {
                    using (StringWriter sw = new StringWriter())
                    using (XmlWriter xwo = XmlWriter.Create(sw, xslTransform.OutputSettings))
                    {
                        xslTransform.Transform(xri, xwo);
                        output = sw.ToString();
                    }
                }
            }

            return output;
        }
        catch (Exception ex)
        {
            Log.WriteLine(ex.ToString());
            return String.Empty;
        }
    }
} 
```

然后我调用以下命令来实际应用转换：

```
string strXslt = String.Empty;
string strXml = String.Empty;

using (StreamReader xsltReader = new StreamReader(Server.MapPath("~/Content/xsl/test.xslt")))
{
    strXslt = xsltReader.ReadToEnd();
}

using (StreamReader xmlReader = new StreamReader(Server.MapPath("~/Content/xml/test.xml")))
{
    strXml = xmlReader.ReadToEnd();
}

XsltTransformer transformer = new XsltTransformer(strXslt);
return transformer.Transform(strXml); 
```

应用转换时，我得到“路径中的非法字符”。错误。我知道我的 XML 和 XSLT 文件作为字符串正确通过我只是无法弄清楚为什么在应用转换时会出现此错误。

关于导致此错误的任何想法？

**编辑：** 这是堆栈跟踪：

```
[ArgumentException: Illegal characters in path.]
System.IO.Path.CheckInvalidPathChars(String path) +126
System.IO.Path.Combine(String path1, String path2) +38
System.Web.Compilation.DiskBuildResultCache.GetPreservedDataFileName(String cacheKey) +27
System.Web.Compilation.DiskBuildResultCache.GetBuildResult(String cacheKey, VirtualPath virtualPath, Int64 hashCode, Boolean ensureIsUpToDate) +14
System.Web.Compilation.BuildManager.GetBuildResultFromCacheInternal(String cacheKey, Boolean keyFromVPP, VirtualPath virtualPath, Int64 hashCode, Boolean ensureIsUpToDate) +200
System.Web.Compilation.BuildManager.GetVPathBuildResultFromCacheInternal(VirtualPath virtualPath, Boolean ensureIsUpToDate) +51
System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate) +68
System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate) +111
System.Web.Compilation.BuildManager.GetVirtualPathObjectFactory(VirtualPath virtualPath, HttpContext context, Boolean allowCrossApp, Boolean throwIfNotFound) +125
System.Web.Compilation.BuildManager.GetObjectFactory(String virtualPath, Boolean throwIfNotFound) +35
System.Web.Mvc.BuildManagerWrapper.System.Web.Mvc.IBuildManager.FileExists(String virtualPath) +9
System.Web.Mvc.BuildManagerViewEngine.FileExists(ControllerContext controllerContext, String virtualPath) +41
System.Web.Mvc.VirtualPathProviderViewEngine.GetPathFromGeneralName(ControllerContext controllerContext, List`1 locations, String name, String controllerName, String areaName, String cacheKey, String[]& searchedLocations) +150
System.Web.Mvc.VirtualPathProviderViewEngine.GetPath(ControllerContext controllerContext, String[] locations, String[] areaLocations, String locationsPropertyName, String name, String controllerName, String cacheKeyPrefix, Boolean useCache, String[]& searchedLocations) +304
System.Web.Mvc.VirtualPathProviderViewEngine.FindView(ControllerContext controllerContext, String viewName, String masterName, Boolean useCache) +136
System.Web.Mvc.<>c__DisplayClassc.<FindView>b__b(IViewEngine e) +24
System.Web.Mvc.ViewEngineCollection.Find(Func`2 lookup, Boolean trackSearchedPaths) +127
System.Web.Mvc.ViewEngineCollection.FindView(ControllerContext controllerContext, String viewName, String masterName) +181
System.Web.Mvc.ViewResult.FindView(ControllerContext context) +138
System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context) +129
System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult) +13
System.Web.Mvc.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19() +23
System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) +260
System.Web.Mvc.<>c__DisplayClass1e.<InvokeActionResultWithFilters>b__1b() +19
System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult) +177
System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +343
System.Web.Mvc.Controller.ExecuteCore() +116
System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97
System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10
System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +37
System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +21
System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +12
System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +50
System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60
System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8836913
System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T23:34:40.883

代替：

```
<a target="_blank">
    <xsl:for-each select="entry">
        <xsl:if test="string='link'">
            <xsl:attribute name="href">
                <xsl:value-of select="string[2]"/>
            </xsl:attribute>
        </xsl:if>
        <xsl:if test="string='linkText'">
            <h3>
                <xsl:value-of select="string[2]"/>
            </h3>
        </xsl:if>
    </xsl:for-each>
</a> 
```

和：

```
<xsl:element name="a">
    <xsl:attribute name="target">
        <xsl:text>_blank</xsl:text>
    </xsl:attribute>
    <xsl:if test="./entry/string[1]/text()[.='link']">
        <xsl:attribute name="href">
            <xsl:value-of select="(./entry[./string[1]/text()='link']/string[2]/text())[1]"/>
        </xsl:attribute>
    </xsl:if>
    <xsl:if test="./entry/string[1]/text()[.='linkText']">
        <xsl:element name="h3">
            <xsl:value-of select="(./entry[./string[1]/text()='linkText']/string[2]/text())[1]"/>
        </xsl:element>
    </xsl:if>
</xsl:element> 
```

附言。我也会改变

```
using (StringWriter sw = new StringWriter())
using (XmlWriter xwo = XmlWriter.Create(sw, xslTransform.OutputSettings))
{
    xslTransform.Transform(xri, xwo);
    output = sw.ToString();
} 
```

至

```
using (StringWriter sw = new StringWriter())
{
    using (XmlWriter xwo = XmlWriter.Create(sw, xslTransform.OutputSettings))
    {
        xslTransform.Transform(xri, xwo);
    }
    output = sw.ToString();
} 
```

# php - PHP - 任何 PHP 变量的默认数据类型是什么？

> ID：13142476
> 
> 赞同：1
> 
> 时间：2012-10-30T15:34:29.160
> 
> 标签：php

PHP 是松散类型的语言，但有人可以告诉我，任何 PHP 变量的默认数据类型是什么？它的隐含数据类型是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T15:35:28.900

PHP 的变量是动态的，并且会根据其中的数据而变化。所以默认情况下它们没有数据类型。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-30T15:36:34.360

从[变量手册](http://www.php.net/manual/en/language.variables.basics.php)：

> 没有必要在 PHP 中初始化变量，但这是一个非常好的做法。未初始化的变量具有其类型的默认值，具体取决于使用它们的上下文 - 布尔值默认为 FALSE，整数和浮点数默认为零，字符串（例如在 echo 中使用）设置为空字符串，数组变为空大批。

所以，它们就是你对它们的看法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T16:18:31.470

OP 知道 PHP 是一种松散类型的语言，因此任何初始化变量的类型都取决于它所保存的数据；所以这样读，问题就变成*了未初始化变量的类型是什么？*- 答案是`null`

PHP 通常不允许您在*不*初始化变量的情况下声明变量，没有直接等价于：

```
Dim SomeVar 
```

*因此，查看*“默认”数据类型的唯一方法是评估尚未设置的变量或不包含数据的类成员。

1：未设置的变量

```
echo $someVar === null ? "NULL" : "NOT NULL"; //outputs NULL (and triggers a Warning) 
```

2：声明的类成员不包含任何数据

```
class Test {
  public static $someVar;
}

var_dump(Test::$someVar); // outputs NULL 
```

所以：

*   任何初始化变量的类型都由它保存的数据决定

*   任何未初始化变量的类型是`null`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-30T15:48:23.033

**类型杂耍**

PHP 不需要（或支持）在变量声明中显式定义类型；变量的类型由使用变量的上下文决定。也就是说，如果给变量$var赋值一个字符串值，那么$var就变成了一个字符串。如果将一个整数值分配给 $var，它就会变成一个整数。

PHP 自动类型转换的一个示例是加法运算符“+”。如果任一操作数是浮点数，则这两个操作数都被计算为浮点数，结果将是浮点数。否则，操作数将被解释为整数，结果也将是整数。请注意，这不会改变操作数本身的类型；唯一的变化是如何计算操作数以及表达式本身的类型。

来源：[http ://www.php.net/manual/en/language.types.type-juggling.php](http://www.php.net/manual/en/language.types.type-juggling.php)

# cocoa - 如何以编程方式启用服务？

> ID：13142480
> 
> 赞同：1
> 
> 时间：2012-10-30T15:34:43.950
> 
> 标签：cocoa, system-preferences

我有一个应用程序提供修改当前选定文本的服务。但是，它必须首先由用户通过系统偏好设置的键盘快捷键部分启用。

我有办法为用户启用它吗？

# sql - Oracle 用逗号连接列

> ID：13142481
> 
> 赞同：5
> 
> 时间：2012-10-30T15:34:49.900
> 
> 标签：sql, database, oracle, concatenation, string-aggregation

> **可能重复：**
> [如何在 Oracle 中将多行组合成逗号分隔的列表？](https://stackoverflow.com/questions/468990/how-can-i-combine-multiple-rows-into-a-comma-delimited-list-in-oracle)

有人可以告诉我如何实现以下目标吗？

桌子：

```
efforts_id        cycle_name      release_name 
123               quarter         march 
123               half            april 
123               full            april
124               quarter         may 
```

我的预期输出：

```
efforts_id        cycle_name            release_name 
123               quarter,half,full     march,april
124               quarter               may 
```

我是甲骨文的初学者，所以不知道该怎么做。任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T15:45:42.783

您需要的是“字符串聚合”。Tim Hall 的优秀网站显示了您拥有的替代方案，具体取决于您拥有的 Oracle 的确切版本：[http ://www.oracle-base.com/articles/misc/string-aggregation-techniques.php](http://www.oracle-base.com/articles/misc/string-aggregation-techniques.php)

在 11gR2（撰写本文时当前版本）中，您应该使用 listagg 函数：

```
select
  efforts_id,
  listagg(cycle_name, ',') within group (order by cycle_name) as cycle_name,
  listagg(release_name, ',') within group (order by release_name) as release_name
from my_table
group by efforts_id; 
```

请注意，Oracle 不支持使用 wm_concat 函数...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-30T16:06:54.473

您将要使用[`LISTAGG()`](http://docs.oracle.com/cd/E14072_01/server.112/e10592/functions087.htm)来执行此任务。其他答案不会删除任何重复值，要删除重复项，您可以使用类似于以下的内容：

```
select c.efforts_id, 
  c.cycle_name,
  listagg(r.release_name, ', ') within group (order by c.efforts_id) as release_name
from
(
  select efforts_id,
    listagg(cycle_name, ', ') within group (order by efforts_id) as cycle_name
  from yourtable
  group by efforts_id
) c
inner join
(
  select distinct efforts_id, release_name
  from yourtable
) r
  on c.efforts_id = r.efforts_id
group by c.efforts_id, c.cycle_name 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/5bb00/46)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T15:48:03.867

如果您有 Oracle 11g R2，那么 LISTAGG 是首选方法：

```
SELECT efforts_id,
    LISTAGG(cycle_name) WITHIN GROUP(ORDER BY cycle_name),
    LISTAGG(release_name) WITHIN GROUP(ORDER BY cycle_name)
FROM MY_TABLE
GROUP BY efforts_id 
```

如果没有，[本文](http://www.oracle-base.com/articles/misc/string-aggregation-techniques.php)将展示替代方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T15:42:48.680

通过[WM_concat](http://psoug.org/definition/WM_CONCAT.htm)函数（`GROUP BY`当然还有）

```
SELECT efforts_id, wm_concat(cycle_name), wm_concat(release_name)
FROM MY_TABLE
GROUP BY efforts_id 
```

嗯，刚找到这个：

> 请注意，**WM_CONCAT**未*记录且不受*Oracle 支持，这意味着不应在生产系统中使用**[LISTAGG](http://psoug.org/definition/LISTAGG.htm)****函数，它可以产生与WM_CONCAT**相同的输出， Oracle已记录并支持它。

# excel - Microsoft 一键式安装程序 - 用户从不提示信任

> ID：13142482
> 
> 赞同：1
> 
> 时间：2012-10-30T15:34:49.557
> 
> 标签：excel, add-in, trust, oneclick

我为一个为 5 个用户做一些自定义事情的客户端编写了一个 Excel 插件。我用 VS2012 和 Excel 2010 的互操作程序集编写了它。我用 MS 一键发布器发布了加载项，压缩了内容，并将其发送给这 5 个用户。他们（似乎）只能随机安装加载项。一些用户成功了，而另一些用户则收到错误消息。更多信息：

*   永远不会提示未成功安装的用户信任安装。它使他们正确地看到错误消息。
*   我只用本地开发证书签署了代码。我没有使用威瑞信证书或类似的东西。我没想到它会做任何事情，因为他们的本地文件系统永远不允许它到达提示符。
*   首先，我制作了一个批处理文件来[配置注册表的包含列表安全性](http://msdn.microsoft.com/en-us/library/vstudio/bb772070.aspx)。这什么也没做。
*   我无法在任何其他 PC 上复制该错误，无论它是否在我的本地网络上。

我的猜测是，他们的安全策略中有一些内容禁止访问这些一键式安装程序文件。有什么想法吗？

这是错误消息：

```
System.Security.SecurityException: Customized functionality in this application will not work because the certificate used to sign the deployment manifest for ThisAddin or its location is not trusted. Contact your administrator for further assistance.
at Microsoft.VisualStudio.Tools.Applications.Deployment.ClickOnceAddInTrustEvaluator.VerifyTrustPromptKeyInternal(ClickOnceTrustPromptKeyValue promptKeyValue, DeploymentSignatureInformation signatureInformation, String productName)
at Microsoft.VisualStudio.Tools.Applications.Deployment.ClickOnceAddInTrustEvaluator.VerifyTrustUsingPromptKey(Uri manifest, DeploymentSignatureInformation signatureInformation, String productName)
at Microsoft.VisualStudio.Tools.Applications.Deployment.ClickOnceAddInDeploymentManager.VerifySecurity(ActivationContext context, Uri manifest, AddInInstallationStatus installState)
at Microsoft.VisualStudio.Tools.Applications.Deployment.ClickOnceAddInDeploymentManager.InstallAddIn() The Zone of the assembly that failed was:MyComputer 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T06:03:46.910

当域 A 通过证书问题开发和签署加载项时，我们遇到了类似的问题，并且域中的任何用户都能够安装它。加载项发布在网站上：http: [//host.org/apps/addin/setup.exe](http://host.org/apps/addin/setup.exe)

后来来自域 B 的人也决定使用加载项，但他们看到的唯一内容是有关受信任位置和联系您的管理员的消息。

解决方案很简单：打开 Internet Explorer，将[http://host.org](http://host.org)添加到受信任的站点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T17:45:19.287

我时间紧迫，所以我导出了开发人员证书并让他们将其安装在他们的机器上。

# azure - Azure SDK 1.7 存储模拟器 - 队列存储无法启动 - 将存储客户端与开发环境自定义端口一起使用

> ID：13142483
> 
> 赞同：0
> 
> 时间：2012-10-30T15:35:04.517
> 
> 标签：azure, azure-storage

问题：Azure 存储模拟器可以启动 Blob 和表存储，但队列存储无法启动，显示错误对话框：“文件正在被另一个进程使用”找到解决该问题的方法，但现在我的开发遇到问题环境存储客户端。这就是我所做的...

端口 10001 是队列存储的默认端口，因此根据我所做的一些相关文章（输出中的最后一列是进程的 PID）：

```
 c:\...> netstat -p tcp -ano | findstr :1000
  TCP    0.0.0.0:10001          0.0.0.0:0              LISTENING       2628
  TCP    127.0.0.1:10000        0.0.0.0:0              LISTENING       4
  TCP    127.0.0.1:10002        0.0.0.0:0              LISTENING       4 
```

这里最大的问题是在 10001 上收听的是 McAfee，我无法改变它。

下一步是将队列存储重新配置为不使用 10001：重新配置存储模拟器以侦听可用端口。打开：

```
%PROGRAMFILES%\Microsoft SDKs\Windows Azure\Emulator\devstore\DSServiceLDB.exe.config 
```

在您最喜欢的文本编辑器中并更改队列存储的绑定...在我的情况下，10003 可用：

```
<?xml version="1.0"?>
<configuration>
  <configSections>    
    <section name="developmentStorageConfig" type="Microsoft.ServiceHosting.DevelopmentStorage.Utilities.DevelopmentStorageConfigurationHandler, DevelopmentStorage.Common"/>
  </configSections>

  <developmentStorageConfig>
    <services>
      <service name="Blob" url="http://127.0.0.1:10000/"/>
      <service name="Queue" url="http://127.0.0.1:10003/"/> <!-- this line here -->
      <service name="Table" url="http://127.0.0.1:10002/"/>
    </services>
... 
```

关闭并启动存储模拟器，一切都应该很好：

```
c:\...netstat -p tcp -ano | findstr :1000
  TCP    0.0.0.0:10001          0.0.0.0:0              LISTENING       2628
  TCP    127.0.0.1:10000        0.0.0.0:0              LISTENING       4
  TCP    127.0.0.1:10002        0.0.0.0:0              LISTENING       4
  TCP    127.0.0.1:10003        0.0.0.0:0              LISTENING       4 
```

现在，尝试在 VS2012 中配置我的客户端不起作用...我已使用以下设置修改了我的配置文件：ServiceConfiguration.Cloud.cscfg：

```
<Setting name="StorageConnectionString" value="BlobEndpoint=http://127.0.0.1:10000/devstoreaccount1;QueueEndpoint=http://127.0.0.1:10003/devstoreaccount1;TableEndpoint=http://127.0.0.1:10002/devstoreaccount;AccountName=devstoreaccount;AccountKey=key copied from storage config file" /> 
```

但是当我尝试连接到队列并调用 create（如果不存在）时得到 404：

```
 storageAccount = CloudStorageAccount.Parse(CloudConfigurationManager.GetSetting("StorageConnectionString"));
    queueClient = storageAccount.CreateCloudQueueClient();
    queue = queueClient.GetQueueReference("testqueue");
    queue.CreateIfNotExist(); 
```

所以经过一段时间的调整... 我还注意到我的队列命名很糟糕（一旦我让客户端连接，它就会返回 400 错误）：

```
if (System.Diagnostics.Debugger.IsAttached)
        {
            var blobEndpoint = new Uri("http://127.0.0.1:10000/devstoreaccount1");
            var queueEndpoint = new Uri("http://127.0.0.1:10003/devstoreaccount1");
            var tableEndpoint = new Uri("http://127.0.0.01:10002/devstoreaccount1");
            var storageCreds = new StorageCredentialsAccountAndKey("devstoreaccount1", "Eby8vdM02xNOcqFlqUwJPLlmEtlCDXJ1OUzFT50uSRZ6IFsuFq2UVErCz4I6tq/K1SZFPTOtr/KBHBeksoGMGw==");

            _storageAccount = new CloudStorageAccount(storageCreds, blobEndpoint, queueEndpoint, tableEndpoint);
        }
        else
        {
            _storageAccount = CloudStorageAccount.Parse(CloudConfigurationManager.GetSetting("StorageConnectionString"));
        }
        _queueClient = _storageAccount.CreateCloudQueueClient();
        /* Queue naming rules:
         *  1\. A queue name must start with a letter or number, and can only contain letters, numbers, and the dash (-) character. 
            2\. The first and last letters in the queue name must be alphanumeric. The dash (-) character cannot be the first or last character. Consecutive dash characters are not permitted in the queue name.
            3\. All letters in a queue name must be lowercase.
            4\. A queue name must be from 3 through 63 characters long.
         */
        _queue = _queueClient.GetQueueReference("myqueuename");
        _queue.CreateIfNotExist(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T22:31:56.463

查看此目录 (C:\Program Files\Microsoft SDKs\Windows Azure\Emulator\devstore) 并更改 DSServiceLDB.exe.config 中的端口配置：

```
<services>
<service name="Blob" url="http://127.0.0.1:10000/"/>
<service name="Queue" url="http://127.0.0.1:10003/"/>
<service name="Table" url="http://127.0.0.1:10002/"/>
</services> 
```

我对 10001 也有同样的问题。

# java - 在 Java 中创建数组数组

> ID：13142490
> 
> 赞同：0
> 
> 时间：2012-10-30T15:35:16.903
> 
> 标签：java, arrays, object, multidimensional-array, poker

假设我有一个 Player 类，例如：

```
public class Player {

String name;
int chips;
int betVal;

} 
```

以下代码对于创建玩家数组是否正确？

```
public static void main(String[] args) {
    int playerCount;
    int startingChip;
    out.print("How many players? ");
    playerCount = myScanner.nextInt();
    Player[] aPlayer = new Player[playerCount + 1];

    for (int i = 0; i < playerCount + 1; i++){
        aPlayer[i] = new Player();
    }

    out.print("Enter starting chip amount: ");
    startingChip = myScanner.nextInt();

} 
```

如果是这样，我将如何为每个玩家分配姓名、筹码金额和下注值？以后如何在代码中访问和更改它们？

编辑：将播放器作为对象或数组（名称，筹码，betVal）以便以后访问它会更容易吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:44:05.787

首先，您的变量需要是私有的（有一部分程序员更喜欢公共变量，但大多数人更喜欢私有）。

您可以通过重载的构造函数或通过 setter 设置 Player 对象的值。

```
public class Player {

    private String name;
    private int chips;
    private int betVal;

    public Player(){
    //default constructor to initialize without any parameters
    }

    public Player(String name, int chips, int betVal){
        this.name=name;
        this.chips=chips;
        this.betVal=betVal;

    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getChips() {
        return chips;
    }

    public void setChips(int chips) {
        this.chips = chips;
    }

    public int getBetVal() {
        return betVal;
    }

    public void setBetVal(int betVal) {
        this.betVal = betVal;
    }
} 
```

在这种情况下，您的初始化可能是

```
aPlayer[i] = new Player("Jason", 5,1000); 
```

或使用设置器，如

```
for (int i = 0; i < playerCount + 1; i++){
        aPlayer[i] = new Player();
 }

 aPlayer[i].setName("Jason");
 aPlayer[i].setChips(5);
 aPlayer[i].setBetVal(1000); 
```

考虑到您的示例程序，我猜选项 2 效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:40:38.140

为什么不在创建任何东西之前询问所有用户的输入？举个例子 ：

```
public static void main(String[] args) {
    int playerCount;
    int startingChip;

    out.print("How many players? ");
    playerCount = myScanner.nextInt();
    out.print("Enter starting chip amount: ");
    startingChip = myScanner.nextInt();

    Player[] aPlayer = new Player[playerCount];

    for (int i = 0; i < playerCount; i++){
        aPlayer[i] = new Player();
        aPlayer[i].setChips(startingChip);
    }
} 
```

您还应该使用列表。最后，如果您想询问每个玩家的姓名，请直接在循环中执行：

```
for (int i = 0; i < playerCount; i++){
    aPlayer[i] = new Player();
    aPlayer[i].setChips(startingChip);

    out.print("What's the player " + i + " name? ");
    aPlayer[i].setName(myScanner.next());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T15:40:12.403

您可以通过告诉数组您要访问哪个播放器来访问每个播放器。

```
`aPlayer[0].name = "JAG";` 
```

例如会工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T10:55:11.387

尝试这样的事情......在循环本身中询问个人玩家信息。

```
 System.out.println("How many players? ");
    Scanner myScanner = new Scanner(System.in);;
    playerCount = myScanner.nextInt();
    Player[] aPlayer = new Player[playerCount];

    for (int i = 0; i < playerCount; i++){
        aPlayer[i] = new Player();

        System.out.println("Enter Name for Player " + i+1);
        String name = myScanner.next();

        System.out.println("Enter chips for Player " + i+1);
        int chips = myScanner.nextInt();

        System.out.println("Enter betVal for Player " + i+1);
        int betVal = myScanner.nextInt();

        aPlayer[i].name = name;
        aPlayer[i].chips = chips;
        aPlayer[i].betVal = betVal;
    } 
```

还将 Player 类的实例变量设为私有，并使用 getter 和 setter 访问它们。

# magento - Magento：将所有可配置产品设置为有库存的最有效方法是什么？

> ID：13142491
> 
> 赞同：0
> 
> 时间：2012-10-30T15:35:19.400
> 
> 标签：magento

用库存水平更新所有产品后，将所有可配置产品设置为有库存的最佳方法是什么？最好的方式，我的意思是最快的，服务器上的负载最少。

**编辑：**

我忘了说，如何以编程方式执行此操作！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T17:00:02.077

在您`Catalog > Manage Products`看来：

**从网格的下拉列表中选择“可配置”：**

![订单网格视图配置选择](../Images/8129e66cc37e9488582c0d59fac5f4c3.png)

**单击网格表标题中的“全选”：**

![全选](../Images/29b7466b3d18382353378348da9f81bd.png)

**从网格顶部的下拉菜单中选择“更新属性”，然后单击“提交”：**

![在此处输入图像描述](../Images/2ada705b5a069338dc854c1a14f1061f.png)

**最后，您可以从下一个屏幕执行批量库存更新。单击屏幕左侧的“库存”选项卡，并将它们全部设置为“有货”和“已启用”。**

![在此处输入图像描述](../Images/cff044de5e15cbbdf328e56c07207abd.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T16:59:10.603

根据您的版本，您可以从管理界面选择所有可配置类型的产品，然后选择`Actions -> Update Attributes -> Inventory`.

示例（参见最后一个选项）：http: [//i.imgur.com/x03YN.png](http://i.imgur.com/x03YN.png)

要么是这样，要么是编写自己的脚本，这很可能会做同样的事情（如果忘记验证调用或其他东西不会降低效率，天堂禁止它错误地留下孤立的数据库条目，这会导致你进入一个世界在负载/时间和有效性方面的某个点或另一个疼痛）。**老实说，除非您的可配置产品数量**达到数万，或者您的服务器规格非常差，否则我无法想象它需要很长时间，在这种情况下，它可能一开始就不会运行 Magento。

**编辑：**
这应该让你以编程方式进行。**但请注意**，“Stock Item”的 Magento 工具在其整个生命周期内发生了很大变化，因此请务必在您的版本上进行测试以确保它首先工作。

```
// Get all products with a type_id of configurable                                                                                                                                                                                          
$configurable_products = 
Mage::getModel('catalog/product')->getCollection()                                                                                                                                                                                                                           
                                 ->addAttributeToFilter('type_id', 'configurable');                                                                                                                                                                                          

foreach ($configurable_products as $configurable_product) {                                                                                                                                                                                 
  $configurable_product->load();                                                                                                                                                                                                            

  // Set is in stock attribute to 1                                                                                                                                                                                                         
  $configurable_product->getStockItem()->setIsInStock(1);                                                                                                                                                                                   

  try {                                                                                                                                                                                                                                     
    $configurable_product->getStockItem()->save();                                                                                                                                                                                                          
  } catch (Exception $e) {                                                                                                                                                                                                                  
    // Failed to save for some reason...                                                                                                                                                                                                    
  }                                                                                                                                                                                                                                         
} 
```

# delphi - 确定将哪个帮助上下文 ID 发送到帮助文件？

> ID：13142493
> 
> 赞同：2
> 
> 时间：2012-10-30T15:35:32.613
> 
> 标签：delphi, delphi-xe2, helpfile, helpcontext

我正在开发一个包含数百个表单和一个包含 2,000 多个主题的相应帮助文件的应用程序。我有一个特殊的表单，我正在分配一个上下文 ID，但是当我按下“F1”时，帮助文件会在其默认页面上打开（这意味着未找到传递给它的 ID）。我需要找出传递给帮助文件的 ID 以进一步调试为什么它没有提出正确的主题。我如何找到这个号码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T15:35:32.613

我在写这个问题时发现了解决方案，所以我正在回答这个问题问答风格......

该`Application`组件有一个`OnHelp`在打开帮助文件时触发的事件。将处理函数分配给此事件，然后读取`Data`参数以获取此上下文 ID。

```
procedure TForm1.FormCreate(Sender: TObject);
begin
  Application.OnHelp:= AppHelp;
end;

function TForm1.AppHelp(Command: Word; Data: THelpEventData; var CallHelp: Boolean): Boolean;
begin
  ShowMessage(IntToStr(Data));
end; 
```

另外一点，您可以将`CallHelp`参数更改为`False`以使您的应用程序在打开之前取消对帮助文件的调用。

# tridion - Tridion UI 2012 - 呈现所需的页面对象时发生错误 424：'SiteEdit

> ID：13142497
> 
> 赞同：4
> 
> 时间：2012-10-30T15:35:37.637
> 
> 标签：tridion, tridion-2011

我的一个应用程序已从 SiteEdit 1.3 SP2 升级到 SiteEdit 2009。现在我再次将其升级到 Tridion UI 2012。我恢复了 DLL 的 cm_SiteEdit.dll 和 cc_SiteEdit2.dll。在模板内的代码中，可以访问对象“SiteEdit”和“SiteEdit2”。对象“SiteEdit2”已正确初始化，对象“SiteEdit”抛出以下错误 -

> 呈现所需的页面对象时出现错误 424：“SiteEdit”。

是否可以使用此实现来节省开发工作？如果是，请帮助解决问题。否则您的宝贵建议/意见将受到欢迎。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T15:57:03.267

通常会引发此错误，因为您尚未在 SDL Tridion Content Manager 配置中将“SiteEdit”注册为脚本扩展。根据您的描述，我认为它应该指向 1.3 脚本扩展。

完成后，请务必重新启动 Tridion COM+ 包以使更改生效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T01:45:34.807

彼得已经回答了你的问题，我还是建议不要使用旧的 SiteEdit 对象。您应该按照 Tridion UI 2012 更新模板代码。

# c# - 创建我自己的“网址管理器”

> ID：13142502
> 
> 赞同：2
> 
> 时间：2012-10-30T15:36:07.640
> 
> 标签：c#, asp.net

我正在编写一个 http API，我需要比我在 asp.net 中习惯的更多的灵活性。这是我遇到的非常简单的问题，只需要一些帮助才能走上正轨。

我的问题是，我想根据请求创建一个响应对象。Fx 用户在请求时可以获得 xml 文档：“myapi/images/5/xml”。或者如果它以 json 结尾，则将其作为 json 获取。创建正确的响应对象没有问题。我只需要一种方法来收集某个对象中的所有请求，然后使用正则表达式解析 URL 并在其上创建正确的响应。

但是如何收集 Web 应用程序上的所有请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:51:37.750

您可能*不想*使用正则表达式解析整个 URL。挂接到 ASP.NET 的路由引擎可能会更容易：-

```
routes.MapHttpRoute(
  name: "MyApi",
  routeTemplate: "myapi/{controller}/{id}/{responseType}",
  defaults: new
  {
    id = RouteParameter.Optional, responseType = RouteParameter.Optional
  }); 
```

然后您的操作方法可以接受`responseType`来自 url 的参数。

不过，我同意 steven 的上述评论，您可能应该从请求标头而不是从 url 中获取响应类型。

# php - SugarCRM REST API set_relationship 在 Quote 和 ProductBundles 之间

> ID：13142505
> 
> 赞同：2
> 
> 时间：2012-10-30T15:36:12.207
> 
> 标签：php, sugarcrm

我正在使用 SugarCRM Pro 6.5.5

我需要创建一个报价并使用 REST API 向其中添加产品。所有捆绑包 > Prof the`set_entry`的工作，并且`set_relationship`for ProductBoducts 工作正常。但是，`set_relationship`对于 Quotes > ProductBundles 不起作用。

这是我对 ProductBundles > Products 的输入：**这很好用**

```
{
   "session":"5qklti658f0ooou135vt8fkbi4",
   "module":"ProductBundles",
   "module_id":"50b71673-b555-9d68-04c9-508ef9582f47",
   "link_field_name":"products",
   "related_ids":[
      "a9615ab1-cd89-1549-f9b8-508f00c6fa84"
   ]
} 
```

这是我对 Quotes > ProductBundles 的输入：**这不起作用**

```
{
   "session":"jqodi1pu8u2l8basca1hhcbt27",
   "module":"Quotes",
   "module_id":"bc01a88a-35c9-25ed-dfac-508ef206a264",
   "link_field_name":"product_bundles",
   "related_ids":[
      "50b71673-b555-9d68-04c9-508ef9582f47"
   ]
} 
```

**但它仍然返回：**

```
{
   "created":1,
   "failed":0,
   "deleted":0
} 
```

但是，表中没有创建记录*`product_bundle_quote`*。

我已经深入研究了 Sugar 代码，发现了一些有趣的东西。

在`service/core/SoapHelperWebService.php`第 735 行，是这样的：

```
$mod->$link_field_name->add($related_ids, $name_value_pair); 
```

它在第 118 行调用`add`文件`data/Relationships/M2MRelationship.php`中的方法。有趣的`$lhsLinkName`是，它是 NULL，这会导致方法返回 false。这是一个片段：

```
public function add($lhs, $rhs, $additionalFields = array())
{
    $lhsLinkName = $this->lhsLink;
    $rhsLinkName = $this->rhsLink;

    if (empty($lhs->$lhsLinkName) && !$lhs->load_relationship($lhsLinkName))
    {
        $lhsClass = get_class($lhs);
        $GLOBALS['log']->fatal("could not load LHS $lhsLinkName in $lhsClass");
        return false;
    }
    if (empty($rhs->$rhsLinkName) && !$rhs->load_relationship($rhsLinkName))
    {
        $rhsClass = get_class($rhs);
        $GLOBALS['log']->fatal("could not load RHS $rhsLinkName in $rhsClass");
        return false;
    } 
```

它在第一个`if()`块中返回 FALSE，这意味着永远不会创建记录。

此外，这显示在我的日志中： `[2139][1][FATAL] could not load LHS in ProductBundle`

所以，是的，我被困在这里。我尝试搜索所有我能找到的东西，包括错误，但我没有发现任何有用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-23T03:51:25.027

您还必须将报价链接到产品。确保在您的报价 vardef 中有以下内容：

```
'products' =>
    array (
      'name' => 'products',
      'type' => 'link',
      'relationship' => 'quote_products',
      'vname' => 'LBL_PRODUCTS',
      'source'=>'non-db',
), 
```

并在您的网络服务中，设置报价和产品之间的关系

```
{
    "session":$session_id,
    "module":"Quotes",
    "module_id":$quote_id,
    "link_field_name":"products",
    "related_ids":[
       $product_id 
    ]
} 
```

这个对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T17:36:28.817

这确实是一个糖虫，但不是另一个答案中的那个。它实际上与这个错误有关：[Bug 32064](http://www.sugarcrm.com/support/bugs.html#issue_32064 "错误 32064")。他们能够为我提供一个自定义模块，我可以在 6.7 版之前上传并激活该模块以解决该问题，届时该问题将正式解决。您可能需要直接联系 SugarCRM 以获取此解决方法，具体取决于您的时间范围。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T14:26:08.717

这是一个 Sugar 错误，将在 6.7 版本中修复。同时，请查看此论坛帖子以获取代码修复。

[http://forums.sugarcrm.com/f6/create-quote-line-items-web-service-api-83183/](http://forums.sugarcrm.com/f6/create-quote-line-items-web-service-api-83183/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-05T10:08:16.483

我遇到了同样的问题，为了解决这个问题，我在产品包 vardef 中添加了下面提到的代码，它开始正常工作。

```
'quotes' =>
    array (

     'name' => 'quotes',
     'type' => 'link',
     'vname'=>'LBL_PRODUCT_BUNDLES',
     'relationship' => 'product_bundle_quote',
     'source'=>'non-db',

), 
```

谢谢！

# javascript - 在 FabricJS 中，更改图像元素的 src 会更改该对象的所有属性

> ID：13142509
> 
> 赞同：5
> 
> 时间：2012-10-30T15:36:20.750
> 
> 标签：javascript, canvas, html5-canvas, fabricjs

在 Fabric.js 画布中，我试图将图像对象的 src 替换为高分辨率图像，以便在`canvas.toDataURLWithMultiplier`使用时保持图像质量。

当我更改图像对象的 src 时，它的所有属性也会发生变化。图像对象会自动缩放到不同的大小，并且所有状态属性都会更改。

这发生在版本 0.9.15 中。当我使用 0.8.32 版时，它可以工作。0.8.32 版没有这个问题。

这是代码：

```
<body>
    <button id="click" onclick="changeImage()">Change Image</button>

    <canvas id="canvas" width="300px" height="300px" style="border:2px solid #000;">
<script>

    canvas = new fabric.Canvas('canvas');
    fabric.Image.fromURL("http://timeplusq.com/dakshin/clip03.png", function(obj) {

    canvas.add(obj.scale(1).rotate(-15).set({ 
        left: 80, top: 95 
    }));

    });

    function changeImage(){
     var tmp=canvas.item(0).getElement();
     var src = tmp.src;      

     tmp.setAttribute("src", 'http://timeplusq.com/dakshin/clip03original.png'); 

    //Its a 106KB size image

    canvas.renderAll();
    canvas.calcOffset();               
    }​

    </script>  
</body> 
```

我试图获取图像对象的初始状态属性，然后设置更改后的图像对象的值。但它没有用。

这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T15:46:15.667

如果`.width`和`.height`属性没有*明确*设置，它们将从图像中加载它们的值，并且每次图像改变时都会这样做。

如果您随后显式设置这些值，它们将在加载下一个图像时保留这些值：

```
var img = new Image();

img.onload = function() {
    this.width = this.width;
    this.height = this.height;

    // subsequent image loads will be forced to this first image's size
    img.src = 'image2.jpg';
}

img.src = 'image1.jpg'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-20T05:52:22.990

//使用 setSRC 函数，对我有用！！！

```
var ancho_original= item_Activo_canvas.width;
var alto_original= item_Activo_canvas.height;

item_Activo_canvas.setSrc(base64Img  , function(img) {

            item_Activo_canvas.set({width: ancho_original, height: alto_original});
            canvas.renderAll();
            item_Activo_canvas.setCoords();
			 console.log('cargado onload'); 
        });
```

# maven - 使用 maven 解压缩依赖项并重新打包类？

> ID：13142511
> 
> 赞同：4
> 
> 时间：2012-10-30T15:36:30.157
> 
> 标签：maven, jar

我正在尝试解压缩 maven 工件 A 并将其重新打包到 maven 项目 B 中的新 jar 文件中。

将工件 A 中的类文件解压缩到：

```
 <my.classes.folder>${project.build.directory}/staging</my.classes.folder> 
```

使用这个可以正常工作：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <executions>
                <execution>
                    <id>unpack</id>
                    <phase>generate-resources</phase>
                    <goals>
                        <goal>unpack</goal>
                    </goals>
                    <configuration>
                        <artifactItems>
                            <artifactItem>
                                <groupId>com.test</groupId>
                                <artifactId>mvn-sample</artifactId>
                                <version>1.0.0-SNAPSHOT</version>
                                <type>jar</type>
                                <overWrite>true</overWrite>
                                <outputDirectory>${my.classes.folder}</outputDirectory>
                                <includes>**/*.class,**/*.xml</includes>
                            </artifactItem>
                        </artifactItems>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

在同一个 pom 中，我现在想生成一个额外的 jar，其中包含刚刚解包的类：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jar-plugin</artifactId>
            <version>2.4</version>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>jar</goal>
                    </goals>
                    <configuration>
                    <classesdirectory>${my.classes.folder}</classesdirectory>
                        <classifier>sample</classifier>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

创建了一个新 jar，但它不包含以下类中的类：

```
 ${my.classes.folder} 
```

它只是默认项目 jar 的副本。有任何想法吗？

我试图遵循本指南：

[http://jkrishnaraotech.blogspot.dk/2011/06/unpack-remove-some-classes-and-repack.html](http://jkrishnaraotech.blogspot.dk/2011/06/unpack-remove-some-classes-and-repack.html)

但它不工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T16:58:57.443

我建议你[`maven-shade-plugin`](http://maven.apache.org/plugins/maven-shade-plugin/examples/includes-excludes.html)改用。

这将使 unpack-repack 在同一个调用中。

例如，您可以执行以下操作：

```
<plugins>
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-shade-plugin</artifactId>
    <version>2.0</version>
    <executions>
      <execution>
        <phase>package</phase>
        <goals>
          <goal>shade</goal>
        </goals>
        <configuration>
          <filters>
            <filter>
              <artifact>com.test:mvn-sample:1.0.0-SNAPSHOT</artifact>
              <includes>
                <include>**/*.class</include>
                <include>**/*.xml</include>
              </includes>
            </filter>
          </filters>
        </configuration>
      </execution>
    </executions>
  </plugin>
</plugins> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T17:23:57.317

在您拥有的示例中`<classesdirectory>`，[文档](http://maven.apache.org/plugins/maven-jar-plugin/jar-mojo.html)将元素作为`<classesDirectory>`. 我认为区分大小写很重要。

# android - android makefile 中的额外信息

> ID：13142516
> 
> 赞同：3
> 
> 时间：2012-10-30T15:37:00.083
> 
> 标签：android, android-ndk, makefile

我正在尝试获取有关我的 Android Makefile 的一些信息，但 echo 不适用于打印消息。

有没有办法打印变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:39:11.607

我总是忘记如何做这种事情。

试试这个：

```
$(warning LOCAL_PATH is '$(LOCAL_PATH)') 
```

我总是在我的 makefile 中使用一些注释：

```
# include $(CLEAR_VARS) change PATH! If you use it, before save PATH
# Extra info using ndk-build V=1
# Debug info using ndk-build -d
# Echo variables $(warning LOCAL_PATH is '$(LOCAL_PATH)')
# SRC_FILES := $(wildcard $(LOCAL_PATH)/../../Android/jni/*.cpp)
# Execute ndk-build NDK_LOG=1 to extra info before compilation 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T22:15:17.147

如果目标是`DUMP_xxx`ndk-build 转储变量`xxx`而不是构建任何东西，例如

```
ndk-build APP_ABI=mips DUMP_LOCAL_CFLAGS 
```

这将打印变量`$(LOCAL_CFLAGS)`并停止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-15T16:59:21.880

`$(info $(LOCAL_PATH))`更通用

# java - Play框架无法将#{set}标签分配的变量读入#i{if}标签？

> ID：13142521
> 
> 赞同：1
> 
> 时间：2012-10-30T15:37:12.553
> 
> 标签：java, if-statement, playframework, global-variables, scope

我对 PlayFramework 1.2.5 有疑问，我的问题是：

如何使用由 #set{.../} 标签分配的变量到 #{if .../} 标签？

这是我的java代码 - （它有效）：

```
...
renderArgs.put("blockInsert", true);
... 
```

这是我的 htm 代码 - （它有效）：

```
...
#{set allowInsert:"${!blockInsert}" /}
... 
```

使用 ${} 和 #{get/} 读取变量 - （有效）：

```
blockInsert == ${blockInsert}<br/>
allowInsert == #{get 'allowInsert' /}<br/> 
```

在 #{if/} 标签上使用变量 - （效果不好）：

```
using variable from renderArgs - (it works) 
#{if blockInsert}
    cant't insert
#{/if}
#{else}
    can insert
#{/else} 
<br/>

using variable from #{set} tag - (it not works) 
#{if allowInsert}
    can insert
#{/if}
#{else}
    cant't insert
#{/else}
... 
```

当我运行此页面时，输出为：

```
blockInsert == true
allowInsert == false 

using variable from renderArgs - (it works) cant't insert 
using variable from #set} tag - (it not works) can insert 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:52:50.510

采用

```
%{allowInsert=!blockInsert}% 
```

而不是设置。设置标签的结果是一个字符串。或者你调整 if 语句：

```
#{if allowInsert == "true"}
    can insert
#{/if}
#{else}
    cant't insert
#{/else} 
```

# ocean - 无法创建目标文件夹构建 PIP 项目

> ID：13142523
> 
> 赞同：0
> 
> 时间：2012-10-30T15:37:16.447
> 
> 标签：ocean, petrel

我正在尝试在 VS 2010 中构建 PIP 项目。我正在使用 Ocean SDK 2012。当我创建 PIP 项目时，我使用了向导，但我注意到预构建事件首先具有 DeployList.xml应该在参数列表中排在第二位。现在，当尝试进行构建时，会出现
“无法创建目标文件夹”的错误消息。

我不确定这个目标文件夹应该是什么或在哪里。有没有人做过PIP项目并且可以提供任何提示......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:37:34.773

仅供参考：我们通过 Ocean Developers Portal (http://www.ocean.slb.com) 遇到了几个类似的问题，可能一个来自您 :)，在这种情况下，您可以忽略以下答案：

我们发现 csproj 文件有问题，您可以检查是否有相同的问题：在记事本/文本板中打开文件并检查 PropertyGroup 条件的这两个标签：

<PropertyGroup Condition="'$(Configuration)|$(Platform)' = = 'Release|x64'">
<PropertyGroup Condition="'$(Configuration)|$(Platform)' == 'Debug|x64'">

这里的问题是 DeployCopier 解析器会跳过这些节点，因为它与具有以下属性的节点不匹配：
“'$(Configuration)|$(Platform)' =='Release|x64'”
请注意前导和尾随空格！
DeployCopier 使用它来比较：
string.Format(" '$(Configuration)|$(Platform)' == '{0}|{1}' ", data.Config, data.Platform);
（带有前导和尾随空格）

将来，它将在 DeployCopier 中修复以忽略空格。如果语句在文件中开始双引号之后和结束双引号之前没有单个空格，请尝试在 PropertyGroup 属性值之前和之后添加空格，例如：
<PropertyGroup Condition=" '$(Configuration)|$(Platform) ' == 'Release|x64' ">
<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|x64' ">

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:09:08.770

将 SDK 2012 中的 PIP builder 与 VS2010 一起使用没有问题。请确保您的 PIP 项目与您的插件在同一解决方案下，并且您只有一个插件将打包在 PIP 中。正确的 PIP 项目的事件如下所示：

预建：

rmdir "$(ProjectDir)\obj\copytemp" /s /q "$(ProjectDir)DeployCopier.exe" "$(ProjectDir)DeployList.xml" "$(ProjectDir)\obj\copytemp" /config:$(ConfigurationName) /平台：“$（平台名称）”

构建后：

"%Ocean2012Home%\PluginPackager.exe" /p "$(ProjectDir)\obj\copytemp\DeployPlugin1testBuild.dll" "$(TargetDir)$(TargetName).pip"

可能您需要从解决方案中删除以前的 PIP 项目并重新创建它。

# string - 解析带有数字的字符串列表

> ID：13142525
> 
> 赞同：-2
> 
> 时间：2012-10-30T15:37:22.763
> 
> 标签：string, list, scheme

我有一个单词列表。每个单词都有一个数值。

```
 '(("Home" 15)("Baby" 20) ("Mother" 28)...)). 
```

我必须编写一个程序，它得到类似的东西：

```
(function-name "[Home (Baby3) 2] Mother")) 
```

并计算它们的价值。

*   每个单词都以大写字母开头，单词中的所有其他单词都是小写字母。
*   每个单词都从上面的列表中获取其值。
*   每个单词都需要乘以下面的数字。如果没有数字，则为 1。

在上面的例子中：

```
"[Home (Baby3) 2] Mother" =  Home*1 + (Baby*3)*2 +Mother*1=15*1+20*3*2+28=163 
```

我不知道如何开始。有任何想法吗？

我开始写代码。但是，我不知道如何处理 2 个括号 [ ，例如 [Home [Baby3] 2]。我怎么知道 ] 是关闭第一个还是第二个？（不使用计数器和设置之类的东西！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T17:12:08.327

考虑将问题分解为多个阶段。一种可能的分解是：

1.  弄清楚如何获取任意字符串并将它们**解析**为数据结构。例如给定`"[Home (Baby3) 2] Mother"`，编写一个解析函数，将其转换为更易于消化的结构化值`'((Home (Baby 3) 2) Mother)`或它的一些变体。

2.  给定这样一个结构化值，编写一个函数来根据您在问题中描述的规则来**解释它。**

你知道怎么做这些吗？

# node.js - 反向代理 websockets (SSL)，通过 Stunnel 到许多 node.js 应用程序的流量

> ID：13142528
> 
> 赞同：4
> 
> 时间：2012-10-30T15:37:32.473
> 
> 标签：node.js, ssl, proxy, nginx, websocket

我正在寻找一些想法...

我有一系列强大的`node.js`应用程序需要交付给特定用户（身份验证后），几乎没有文件服务，只有索引的初始交付。其余的通信都是通过 socket.io 完成的。

*   ClientA（登录）需要连接到应用程序让我们说：90001
*   ClientB（登录）：90002
*   ClientC（登录）：90003

*所有 HTTP/1.1 ws 都需要是安全的

我尝试了一些配置：

*   stunnel/清漆/nginx
*   stunnel/haproxy
*   隧道/nginx

我在想一个好的方法是以某种方式使用 redis 来存储会话并针对 cookie 进行验证，但是这很可能通过（使用节点）在前端公开 node.js 来完成。

问题：

`node-http-proxy`用作前片有什么风险？

这是我应该认为可能的吗（拥有一个“安全”重定向ws流量并将特定会话管理到许多独立/专有后端的部分）。

我知道 nginx 1.3（在开发中）是为了支持 ws，这值得坚持吗？

`tcp_proxy`有没有人对 yao 的nginx 模块（可靠性/可扩展性）有任何全面的经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T02:22:12.310

我不能说我以前做过，但我可以提供一些想法：

1 个节点身份验证服务器，它获取登录详细信息并设置特定于用户应连接到的服务器的 cookie。然后它重定向到索引页面，此时 haproxy 可以根据 cookie 引导请求。看到这个问题[https://serverfault.com/questions/75385/is-there-a-way-to-configure-haproxy-to-send-traffic-based-on-a-cookie](https://serverfault.com/questions/75385/is-there-a-way-to-configure-haproxy-to-send-traffic-based-on-a-cookie)

或者，您可以在所有服务器上进行上述身份验证，而不仅仅是一个。如果没有相关的 cookie 标头，则必须将 Haproxy 配置为在所有节点之间保持平衡。每个节点都会执行 set-cookie + 重定向，随后的请求应该以特定的节点实例结束。

bts，haproxy 1.5 dev 现在已经内置了对 SSL 的支持，所以不再需要 stunnel。

# django - Django Admin中的多对多关系

> ID：13142531
> 
> 赞同：0
> 
> 时间：2012-10-30T15:37:51.580
> 
> 标签：django, admin

**楷模：**

```
class Detail(models.Model):
    def __unicode__(self):
            return self.title
    title = models.CharField(max_length=32)

class Cars(models.Model):
    def __unicode__(self):
            return self.name
    name = models.CharField(max_length=32, unique=True)
    details = models.ManyToManyField(Detail) 
```

所以，每辆车都有很多细节——车轮、引擎等。如何做到这一点：在 Django Admin 中的 Cars 菜单中，在该菜单中我们有很多细节（如[教程](https://docs.djangoproject.com/en/1.4/intro/tutorial02/)中所示）。在**管理员**中我使用：

```
class DetailInline(admin.TabularInline):
    model = Detail
    extra = 6
class CarsAdmin(admin.ModelAdmin):
    inlines = [DetailInline] 
```

但它有错误：**Detail has no ForeignKey to Cars**。如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:17:38.483

Django 本身不允许您添加反向内联。即，您可以让详细信息页面包含所有包含该特定详细信息的外键的汽车的内联管理员。然而，反过来是不可能的。

不过有一个解决方法，您必须稍微覆盖管理模板。这里有一个关于此问题的先前 SO 问题：[Inline-like solution for Django Admin where Admin contains ForeignKey to other model](https://stackoverflow.com/questions/6419248/inline-like-solution-for-django-admin-where-admin-contains-foreignkey-to-other-m)

# javascript - 停止 div 动画越过容器边缘

> ID：13142533
> 
> 赞同：0
> 
> 时间：2012-10-30T15:37:57.037
> 
> 标签：javascript, jquery, html

我一直在涉足一个 javascript 图像平移器，我已经从这里的代码中破解并切碎了它......我现在已经放弃了这个更简单的方法，但需要关于如何做几件事的建议。

我有左右按钮的代码。

```
<div id="wrap">

<div class="entrance-hall pan-image">

</div>
</div>

<input type="button" value="Move Left" class="nav-left" onclick="pan_animate('-=20%')"  />
<input type="button" value="Move Right" class="nav-right"  onclick="pan_animate('+=20%')" /> 
```

这适用于javascript。

```
function pan_animate(px) {
$('.pan-image').animate({
    'marginLeft' : px
});
} 
```

它在包装 div 内将图像向左或向右平移 20% 但是我想...

1.  使其平滑滚动，而不是按百分比递增
2.  停止越过左右容器的边缘
3.  从图像的中心开始。

要求不高吧？希望这是有道理的，有人可以提供帮助！

干杯。

添加了CSS

```
#wrap {
margin-bottom:60px;
border:4px solid white;
overflow:hidden;
}

 .pan-image {
position:relative;
width:2106px; 
height:395px;
left:50%;
margin-left:-1053px;
 }

 /* -- ===entrance hall=== -- */

.entrance-hall { 
background:url(/staging/kennawayhouse.org.uk/images/1-entrance-hall.jpg);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:52:15.317

*   使其平滑滚动，而不是按百分比递增

实现这一点的一种方法是简单地使用`easing`函数。来自 jQuery 动画 API：

> 缓和
> 
> .animate() 的剩余参数是一个字符串，用于命名要使用的缓动函数。缓动函数指定动画在动画中不同点的进展速度。jQuery 库中唯一的缓动实现是默认的，称为摇摆，以及以恒定速度进行的一种，称为线性。使用插件可以使用更多的缓动功能，尤其是 jQuery UI 套件。

然后，您的代码可以更改为：

```
function pan_animate(px) {
    $('.pan-image').animate({'marginLeft' : px}, 'linear'); // Swing and Linear comes in jQuery, but swing is the default value.
} 
```

并且会感觉到**一些平滑。**

*   停止越过左右容器的边缘

这个需要一些`css`技巧，但`position:absolute;left:5x;top:5px` **可能会**解决您关于内部元素的问题。**如果您想要一个比可能**更准确的答案，您可以发布您的 css 代码。

**编辑**

根据您的 css 代码，我已经实现了一个功能，如果您的边距在移动时超出了其父级的限制，则会发出警报：

```
function pan_animate(px) {

    $marginLeftCss = $(".pan-image").css("marginLeft").replace(/[^-\d\.]/g, '');
    $n = px.replace(/[^-\d\.]/g, '');
    $x = (px.indexOf("-")==0) ? 1 - ($n/100):($n/100);

    $marginLeft = $marginLeftCss * $x;

    $width = $(".pan-image").width();
    $width += $(".pan-image").parent().width();

    if($marginLeft > - $width && $marginLeft < $width) //4212 = width*2
        $('.pan-image').animate({'marginLeft' : px}, 'linear');
    else
        alert("pan image reached it\'s end "  + $marginLeft);
} 
```

你可以检查一下小提琴：http: [//jsfiddle.net/brunovieira/3wHn3/7/](http://jsfiddle.net/brunovieira/3wHn3/7/)

*   从图像的中心开始。

为了使您的`$(".pan-image")`元素居中，您可以使用两种方法，一种 css 方法：`position:relative;margin-left:auto;margin-right:auto`，或者，如果不能选择相对位置，您可以使用 jQuery 将您的元素居中**，例如**：

```
$parentHeight = $(".pan-image").parent().height();
$parentWidth = $(".pan-image").parent().width();

$panImageHeight = $(".pan-image").height();
$panImageWidth = $(".pan-image").width();

$(".pan-image").css('position','absolute','top',($parentHeight - $panImageHeight)/2 + 'px', 'left',($parentWidth - $panImageWidth)/2+'px'); 
```

同样，根据您的编码，上述回答的条件可能不起作用。

# javascript - 在网站后台固定时间播放音频文件

> ID：13142535
> 
> 赞同：1
> 
> 时间：2012-10-30T15:37:59.050
> 
> 标签：javascript, html, audio, alarm

我想在网站后台的固定时间播放音频文件。比如我想在 15:20:30(Hour/Min/Sec) 播放音频/mp3 文件。为此，我也编写了一个脚本，但没有工作。剧本：

```
<script language="JavaScript" type="text/javascript">
<!--
function sivamtime() {
now=new Date();
hour=now.getHours();
min=now.getMinutes();
sec=now.getSeconds();
var song = "1.mp3"; 
if (hour == 15 && min == 20 && sec == 30) { document.write("<embed src='" + song + "' hidden='true' border='0' autostart='true' loop='true'>") }
}
sivamtime()
// -->
</script> 
```

我认为我的错在以下几行：

```
 if (hour == 15 && min == 20 && sec == 30) { document.write("<embed src='" + song + "' hidden='true' border='0' autostart='true' loop='true'>") }
} 
```

请提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:43:02.067

```
<script language="JavaScript" type="text/javascript">
<!--
function sivamtime() {
now=new Date();
hour=now.getHours();
min=now.getMinutes();
sec=now.getSeconds();
var song = "1.mp3"; 
if (hour == 15 && min == 20 && sec == 30) { document.write("<embed src='" + song + "' hidden='true' border='0' autostart='true' loop='true'>") }
}
setTimeOut("sivamtime()",1000);
// -->
</script> 
```

这将使函数 sivamtime() 每 1000 毫秒 - 每秒运行一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:43:14.280

我建议使用[MediaElement.js](http://mediaelementjs.com/)库。这将使您的代码更容易和可移植。

# php - 奇怪的行为三元运算符

> ID：13142538
> 
> 赞同：2
> 
> 时间：2012-10-30T15:38:10.097
> 
> 标签：php

来自 C# 我必须用 PHP 做一个项目。

我正在使用这段代码：

```
$transport = 'T';

$vehicle = (
 ( $transport == 'B' ) ? 'bus' :
 ( $transport == 'A' ) ? 'airplane' :
 ( $transport == 'T' ) ? 'train' :
 ( $transport == 'C' ) ? 'car' :
 ( $transport == 'H' ) ? 'horse' :
 'feet' );

echo $vehicle; 
```

我希望它能够打印`train`，但我得到了`horse`。键盘示例：[http ://codepad.org/rWllfrht](http://codepad.org/rWllfrht)

谁能解释这种奇怪的行为？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-30T15:53:06.650

在其他答案中没有看到任何关于*为什么*您的代码被破坏的解释，所以这里有一个快速的总结。

这里的问题更明显的是你添加了括号以使评估的隐含顺序更加明确。

这是您的代码的精简版本，它仍然会产生“马”的错误结果：

```
 $t = 'T';

 ( $t == 'T' ) ? 'train' : 
 ( $t == 'C' ) ? 'car' : 
 ( $t == 'H' ) ? 'horse' : 'feet'; 
```

首先，让我们展开它：

```
( $t == 'T' ) ? 'train' : ( $t == 'C' ) ? 'car' : ( $t == 'H' ) ? 'horse' : 'feet'; 
```

接下来，我将在已经存在隐式括号的地方添加显式括号：

```
((($t == 'T') ? 'train' : ($t == 'C')) ? 'car' : ($t == 'H')) ? 'horse' : 'feet'; 
```

接下来，我们可以解决您的比较：

```
((true ? 'train' : false) ? 'car' : false) ? 'horse' : 'feet'; 
```

您应该开始了解*为什么*会出现这种情况。第一个三元计算`true ? 'train' : 'false'`为`'train'`：

```
('train' ? 'car' : false) ? 'horse' : 'feet'; 
```

因为`'train'`当转换为布尔值时为真，所以现在的结果是`'car'`：

```
'car' ? 'horse' : 'feet'; 
```

同样，因为非空字符串是“真”，所以结果现在是“马”。因此，当 a 第一次`true`出现在你可怕的嵌套 case 语句中时，结果将级联所有剩余的语句，为下一个运算符的“true”分支抛出先前的值。

解决方案是避免使用此代码。这是一种过于聪明的尝试，结果是一个破碎的、难以理解的混乱。绝对没有理由使用它。选择一个`switch`声明，它是*专*为您想要做的事情而设计的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T15:49:28.340

由于 PHP 语言语法中的错误，这不能按预期工作，如下所示：[http ://en.wikipedia.org/wiki/%3F:#PHP](http://en.wikipedia.org/wiki/%3F:#PHP)

这是一个可以工作的简单版本：

```
$transport = 'T';

$vehicle = (
 ( $transport == 'B' ? 'bus' :
 ( $transport == 'A' ? 'airplane' :
 ( $transport == 'T'  ? 'train' :
 ( $transport == 'C'  ? 'car' :
 ( $transport == 'H'  ? 'horse' :
 'feet' ))))));

echo $vehicle; 
```

但正如其他人所说，我同意这不是最好的方法。您可以使用 switch case、if else if 或关联数组，并且更具可读性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T15:48:45.673

这是 PHP 的一种“按预期工作，即使它显然是错误的”行为。它不会以这种方式关联，因此虽然此代码适用于大多数其他语言，但它会在 PHP 中失败。课？学会在不寻常的关联范式上使用括号。第二课？三元不是灵丹妙药，虽然它既美观又紧凑，但只能在可读时使用。恕我直言，嵌套的三元语句很丑陋。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T15:40:24.270

我不确定您为什么选择使用这种形式的语法，正如[评论](https://stackoverflow.com/questions/13142538/strange-behaviour-ternary-operator#comment17876032_13142538)中提到的那样，这将是调试的噩梦……开关盒在这里可能是更好的选择-

```
$vehicle = '';
switch($transport){
  case 'B' :
    $vehicle = 'bus';
  break;
  case 'A' :
    $vehicle = 'airplane';
  break;
  ...
  default:
   // undefined cases
  break;
} 
```

参考 -

*   [`switch statement`](http://php.net/manual/en/control-structures.switch.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T15:42:22.427

如果您想做这样的事情，请学会爱上括号：

```
$vehicle =     ( ( $transport == 'B' ) ? 'bus' : 
                    (( $transport == 'A' ) ? 'airplane' :
                       (( $transport == 'T' ) ? 'train' :
                         (( $transport == 'C' ) ? 'car' :
                           (( $transport == 'H' ) ? 'horse' :'feet')))) ); 
```

[由于 PHP 对三元的操作顺序http://php.net/manual/en/language.operators.comparison.php](http://php.net/manual/en/language.operators.comparison.php)，需要清楚地包含三元的每个右侧。

顺便说一句，从那个页面他们明确建议不要像这样堆叠它们......

> 注意：建议您避免“堆叠”三元表达式。在单个语句中使用多个三元运算符时 PHP 的行为并不明显：

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-30T15:48:37.883

我不建议您使用此类代码，但出于教育目的，它应该是

```
$transport = 'T';
$vehicle = (
        ($transport == 'B') ? 'bus' : 
            (($transport == 'A') ? 'airplane' : 
                (($transport == 'T') ? 'train' : 
                        (($transport == 'C') ? 'car' : 
                                (($transport == 'H') ? 'horse' : 'feet'))))
        );

echo $vehicle; 
```

更好的代码应该是

```
$transport = 'T';
switch ($transport) {
    case 'A' :
        $vehicle = 'airplane';
        break;
    case 'B' :
        $vehicle = 'bus';
        break;
    case 'C' :
        $vehicle = 'car';
        break;
    case 'H' :
        $vehicle = 'horse';
        break;
    case 'T' :
        $vehicle = 'train';
        break;
    default :
        $vehicle = 'teleportation';
        break;
}

echo $vehicle; 
```

或者更好：

```
$transport = 'T';
$array = array('A'=>'airplane','B'=>"bus","C"=>"car","H"=>"horse","T"=>"train");
echo isset($array[$transport]) ? $array[$transport] : null; 
```

或者，使用数据库：

```
 SELECT name FROM transpotationTable WHERE someKey = '$transport' 
```

# video - 提取视频文件中每个摄像机变化的缩略图

> ID：13142541
> 
> 赞同：4
> 
> 时间：2012-10-30T15:38:27.117
> 
> 标签：video, ffmpeg, h.264

有没有办法检测和提取视频文件（最好是 h264）的每个突然变化（相机变化、幻灯片变化、场景变化，明白了吗？）的缩略图。

比较关键帧并寻找大于某个给定常数的差异。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T17:21:28.540

接缝像

`ffmpeg -i video.mp4 -vf select="eq(pict_type\,I)" -vsync 0 -an keyframes%03d.png`

会做的事情。这是一个只选择**I-Frames**的视频过滤器，基本上是每次发生重大变化时出现的参考帧。

更多信息：http: [//ffmpeg.org/ffmpeg.html#select](http://ffmpeg.org/ffmpeg.html#select)

对于基于 MPEG 的压缩尤其如此，不知道其他编解码器的行为如何。

编辑：正如 LordNeckbeard 所指出的，`scene`选项，如`ffmpeg -i video.mp4 -vf select='gt(scene\,0.9)' -vsync 0 -an keyframes%03d.jpg`，更适合我的意图。

# javascript - techfoobar 自动完成 JSfiddle

ID：13142543

赞同：1

时间：2012-10-30T15:38:33.077

标签：javascript, autocomplete, keyup, getcaretpos

# string - 在 MSBuild 中计算字符串中的字符出现次数

> ID：13142544
> 
> 赞同：1
> 
> 时间：2012-10-30T15:38:36.113
> 
> 标签：string, msbuild, msbuild-4.0

使用 MSBuild 计算字符（在我的情况下为“\”）出现在字符串中的次数的最简单方法是什么？我尝试使用 Split( `\`) 无济于事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T17:13:47.540

MsBuild 4.0 允许使用属性函数[http://msdn.microsoft.com/en-us/library/dd633440.aspx](http://msdn.microsoft.com/en-us/library/dd633440.aspx)

您可以使用它来拆分字符串。然后，您必须将长度减去 1 以获得出现次数。

```
<Target Name="SplitCount">
    <PropertyGroup>
        <path>test\document\home</path>
    </PropertyGroup>

    <PropertyGroup>
        <test>$(path.Split('\').length)</test>
    </PropertyGroup>

    <Message Text="occurrence count: $([MSBuild]::Subtract($(test), 1))"><Message>        
</Target> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:59:51.073

在[MSBuild Community Tasks](http://msbuildtasks.tigris.org/)中，有一个 RegexMatch 任务可以为您提供一个列表，然后您可以计算该列表。

另一种选择是编写您自己的自定义任务。然后像这样添加一些Linq：

```
string input = "This \\ is \\ a \\ test";
var items = (from c in input where c == '\\' select c).ToList();
var count = items.Count; 
```

# c# - Changing the current time zone on Ubuntu with C#/Mono

> ID：13142553
> 
> 赞同：3
> 
> 时间：2012-10-30T15:39:00.283
> 
> 标签：c#, datetime, mono

I'm modifying the time zone by replacing the file `/etc/locatime` by one in `/usr/share/zoneinfo` in a C#/Mono application, it nearly works.

Here is my code:

```
Console.WriteLine("a) Current Time zone: {0}", TimeZoneInfo.Local.StandardName);
Console.WriteLine("a) Now: {0}", DateTime.Now);

// Changing /etc/locatime from CET to PST ...

TimeZoneInfo.ClearCachedData();

Console.WriteLine("b) Current Time zone: {0}", TimeZoneInfo.Local.StandardName);
Console.WriteLine("b) Now: {0}", DateTime.Now); 
```

And here is the ouput:

```
a) Current Time zone: CET
a) Now: 10/20/2012 2:00:26 PM
b) Current Time zone: PST
b) Now: 10/20/2012 2:00:26 PM 
```

As you can see the time zone is correct but `DateTime.Now`, which should return the local time, doesn't work and returns twice the same value.

Here is the version of mono I'm using:

```
user@ubuntu:~$ mono -V
Mono JIT compiler version 2.10.8.1 (Debian 2.10.8.1-1ubuntu2.2)
    TLS:           __thread
    SIGSEGV:       altstack
    Notifications: epoll
    Architecture:  x86
    Disabled:      none
    Misc:          softdebug 
    LLVM:          supported, not enabled.
    GC:            Included Boehm (with typed GC and Parallel Mark) 
```

Does someone have an idea about this issue?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T23:12:28.623

正如 Celada 指出的那样——大多数 C 库只读取一次。 在 Linux 上`DateTime.Now`调用。`gettimeofday()`

在 Windows 上也是如此，您甚至不需要任何 .NET 应用程序，只需打开 Windows Power Shell ，键入`date`，然后在控制面板中更改时区并`date`在同一个 Power Shell 窗口中再次键入。它不接受时区更改。只有新启动的进程才能获得新的时区。

# sql-server - X 行到 X 列

> ID：13142554
> 
> 赞同：1
> 
> 时间：2012-10-30T15:39:01.527
> 
> 标签：sql-server, sql-server-2008, tsql, pivot

我再次需要您的帮助以完成以下工作。请注意，我使用的是 SQL SERVER 2008。我有一个表（如下），其中我们得到了从“Pickup”到“Dropoff”完成的作业数。要求是（下面提到的输出格式）。1) 获取所有唯一的邮政编码，无论它们是下车还是上车。这将为我们提供所有邮政编码。2) 将从 PICKUP 完成的作业计数呈现给相应的 DROPOFF。例如，我们从 SE18 邮政编码接客两次，并带他们去 SE18 一次和 SE19 一次。它将从 REQUIRED OUTPUT 表中清除。

```
TABLE:
JobID        Pickup       Dropoff
====================================
1            SE18         SE18
2            SE18         SE19
3            SE2          SE18
4            SE28         SE2
5            AL1          SE7
6            BR1          SE10
7            NW1          TW16
8            AL1          SE18
9            BR6          AL1
10           E6           BR1
.            .            .
.            .            .
.            .            . 
```

要求输出如下：

```
REQUIRED OUTPUT

     SE18   SE2   SE28   AL1   BR1   NW1   BR6   E6   SE19  SE7  SE10  TW16 ..
     =========================================================================
SE18   1     -      -     -     -     -     -     -     1    0    0     0
SE2    1     -      -     -     -     -     -     -     -    -    -     -         
SE28   -     1      -     -     -     -     -     -     -    -    -     -          
AL1    1     -      -     -     -     -     -     -     -    1    -     -       
BR1    -     -      -     -     -     -     -     -     -    -    1     -        
NW1    -     -      -     -     -     -     -     -     -    -    -     1      
BR6    -     -      -     1     -     -     -     -     -    -    -     -       
E6     -     -      -     -     1     -     -     -     -    -    -     -       
SE19   -     -      -     -     -     -     -     -     -    -    -     -        
SE7    -     -      -     -     -     -     -     -     -    -    -     -       
SE10   -     -      -     -     -     -     -     -     -    -    -     -      
TW16   -     -      -     -     -     -     -     -     -    -    -     -      
.
.
. 
```

提前谢谢了。亲切的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T22:12:46.883

听起来这就是你要找的东西。如果您想对值进行硬编码，您的查询将如下所示：

```
select *
from
(
  select pickup, 
    dropoff,
    dropoff d
  from yourtable
) x
pivot
(
  count(d) 
  for dropoff in ([SE18], [SE2], [SE28], [Al1], [BR1],
              [NW1], [BR6], [E6], [SE19], [SE7],
              [SE10], [TW16])
) p 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/31111/3)

如果您有未知数量的值，那么您可以对`pivot`这些值使用动态 sql：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(Dropoff) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT pickup, ' + @cols + ' from 
             (
                select pickup, dropoff, 
                  dropoff as countdropoff
                from yourtable
            ) x
            pivot 
            (
                count(countdropoff)
                for dropoff in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/44fc1/1)

# jquery - jquery ajax post never completes

> ID：13142561
> 
> 赞同：2
> 
> 时间：2012-10-30T15:39:23.853
> 
> 标签：jquery, ajax, post

One of Nine uses consistently does not fire, as in Firebug the break at "return false;" never catches a completed execution, on this one call. The best part, the exact same call (the jquery ajax) works fine in a stand alone web page.

I have read many excellent suggestions and have gleaned a great deal from the collective talent out there. This particular issue has me perplexed and I'm hoping that someone out there has come across this, and specifically, I'm hoping that it turns out to be something truly simple.

The following function works on 8 out of 9 defined calls. The data used is consistent with the successful calls. The parameters for "posturl" and "postdata" are constructed prior to any of the calls.

"posturl" contains a uri for an asp.net proxy and a uri destination.

"postdata" has been used as both a reference object such as { Command : 1, ...}, or if your prefer { Command : "1", ...}, and as a string as in "Command=1&..." - my preference is as a reference object (cleaner, simpler, ...). The "Command" element data is actually in the Web Services class as an int and it has been passed as both string and int successfully in other service calls. All other data elements are strings to the Services classes.

```
function PostTheCall(posturl, postdat) {

    $.ajax({ url: posturl,
        data: postdat,
        type: 'POST',
        contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
        cache: false,
        dataType: 'json',
        error: OnPostAccessError,
        success: OnPostAccessSuccess,
        complete: OnPostAccessComplete,
        beforeSend: OnPostAccessBeforeSend
    });

    return false;
}; 
```

In addition, I have also used the following without any effect on the nine service calls - just something else I have already tried:

```
 accept: 'application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png;q=0.5,OPTIONS,POST', 
```

So have at it folks, wake me from this weird journey into the rabbit hole...

Thanks in advance, Chuck

# ios - IOS: viewcontroller transition

> ID：13142562
> 
> 赞同：0
> 
> 时间：2012-10-30T15:39:26.087
> 
> 标签：ios, uiview, uiviewcontroller

In my app I want open a UIViewController but with a zoom transition; I have an image and when I touch it, it should enalarge itself and go fullscreen. Should I use a UIViewController or a simple UIView?

# tfs - Integrate kayako and tfs

> ID：13142563
> 
> 赞同：0
> 
> 时间：2012-10-30T15:39:30.580
> 
> 标签：tfs

I am in need of replicating all kayako helpdesk tickets into TFS. This includes creation of the ticket, updates of the ticket, and closure of the ticket. I've looked around and I can't seem to find any elegant solution to this. Can any of you point me int he right direction?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:11:45.270

[您可以在TFS 集成平台](http://tfsintegration.codeplex.com/)上构建您自己的集成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T17:20:33.597

Kayako 是否支持 webhook？webhook 允许您在发生数据时发送数据，例如当创建票证或解决票证时 - 然后您可以让您的应用程序处理该数据。这比必须重复调用 API 以查看系统是否发生更改要好得多。

# emacs - 如何在不添加新段落的情况下添加换行符

> ID：13142564
> 
> 赞同：5
> 
> 时间：2012-10-30T15:39:31.843
> 
> 标签：emacs, org-mode

一个简单的 org-mode 文档，一个`*`标题行，一个`- Q:`带有预期行的`A:`行。导出为html后，为什么Q:和A:在同一行？

```
* Header line
- Q: questions
  A: answers 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T18:56:14.420

根据[手册](http://orgmode.org/manual/Paragraphs.html)：

> 段落由至少一个空行分隔。如果您需要在段落中强制换行，请在行尾使用“\”。

因此你应该写

```
* Header line
- Q: questions\\
  A: answers 
```

按预期出口到

```
<ul>
<li>Q: questions<br/>
  A: answers
</li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-12T09:21:57.947

在我看来，Emacs / org-mode 在这里不一致，有时它让我发疯。比较标题行和项目：

```
* Header line
Text 
```

导出为标题和正文，因此 2 个段落。

```
 * item1
  Text 
```

导出为一个段落，一行。

```
 * item1\\
    Text 
```

导出为一个段落，中间有一个换行符（htmltag 'br'）。

```
 * item1

    Text 
```

导出为 2 个段落。因此，这应该是您编写问题和答案的首选方式。

但是，如果您现在在 Text 和 items 之间使用空行对所有列表进行编码并使用折叠视图，那么您的 emacs 视图看起来很难看。

```
 * item1

    Text

  * item2
  * item3 
```

在折叠视图中，Emacs 在 '* item2' 之前添加了一个空行，但没有在 '* item 3' 之前添加一个空行，所以它没有像它可能的那样折叠：

```
 * item1...

  * item2
  * item3 
```

如果您在 '* Header line' 之前留下一个空行，Emacs*不会显示空行。*

顺便说一句：如果您在项目后的下一行添加任何格式（“：”、“#+BEGIN_QUOTE”或类似内容），您将获得 2 个段落。

# c# - Detect current volume level while a file is playing using Naudio

> ID：13142569
> 
> 赞同：0
> 
> 时间：2012-10-30T15:39:46.897
> 
> 标签：c#, c#-4.0, naudio

So I have

```
 IWavePlayer waveOutDevice;
    WaveStream mainOutputStream;
    WaveChannel32 volumeStream;

    private WaveStream CreateInputStream(string fileName)
    {
        WaveChannel32 inputStream;
        if (fileName.EndsWith(".mp3"))
        {
            WaveStream mp3Reader = new Mp3FileReader(fileName);
            inputStream = new WaveChannel32(mp3Reader);
        }
        else
        {
            throw new InvalidOperationException("Unsupported extension");
        }
        volumeStream = inputStream;
        return volumeStream;
    }

    private void Stop()
    {
        if (waveOutDevice != null)
        {
            waveOutDevice.Stop();
        }
        if (mainOutputStream != null)
        {
            // this one really closes the file and ACM conversion
            volumeStream.Close();
            volumeStream = null;
            // this one does the metering stream
            mainOutputStream.Close();
            mainOutputStream = null;
        }
        if (waveOutDevice != null)
        {
            waveOutDevice.Dispose();
            waveOutDevice = null;
        }
    }

    private void Play(string was)
    {
        waveOutDevice = new WaveOut();
        mainOutputStream = CreateInputStream(was);
        waveOutDevice.Init(mainOutputStream);
        waveOutDevice.Play();

    }

    private void Form1_Load(object sender, EventArgs e)
    {
        Play(@"E:\Eigene Audiodateien\Musik\Alben\Pur\Abenteuerland\ -  - .mp3");
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Stop();
    } 
```

There is a Stop-Button ( button1 ), which stops playback. When the form is loaded, the file is played. While the file is playing I want to get the current volume of the file by running a function. So what does a function like this has to look like at "...."?

```
private int currentVolumeLevel(...some suitable parameters...)
{
  int currentVolumeLevelValue = 0;
  //....
  return currentVolumeLevelValue;
} 
```

I am not talking about the volume level you can adjust with windows' sound controls. I am talking about the currently played sound file's volume at this very position it is playing right now, based on something like a byte[] array.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:34:37.223

NAudioDemo 展示了如何做到这一点。查看`AudioPlaybackPanel.cs`如何将 a`MeteringSampleProvider`添加到播放管道中。`MeteringSampleProvider`将定期引发`StreamVolume`事件，告诉您在过去 100 毫秒内收到的最大样本值（这是可配置的）。您需要决定是否要放置`MeteringSampleProvider`在任何软件音量调整之前或之后（对于波形绘制，通常在之前，对于音量测量，通常在之后）

这是一个有效的 WindowsForms 演示，将流卷写入控制台：

```
var player = new WaveOut();
var file = new AudioFileReader(@"test.mp3");
var meter = new MeteringSampleProvider(file);
meter.StreamVolume += (s,e) => Console.WriteLine("{0} - {1}", e.MaxSampleValues[0],e.MaxSampleValues[1]);
player.Init(new SampleToWaveProvider(meter));

var form = new Form();
form.Load += (s,e) => player.Play();
form.FormClosed += (s,e) => player.Dispose();
form.ShowDialog(); 
```

# android - 在 TextView 的子类中使用 onDraw() 在 Honeycomb 中不起作用

> ID：13142571
> 
> 赞同：0
> 
> 时间：2012-10-30T15:39:57.080
> 
> 标签：android, textview

我有一个从`TextView`.

`onDraw()`当我的 custom 方法中的变量为真时，我试图画一条蓝线`TextView`。

**我的代码**

```
 if (this._selected) {
            this.bluePaint.setColor(getResources().getColor(R.color.actionBlue));
            float pix = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 6, getResources().getDisplayMetrics());
            this.bluePaint.setStrokeWidth(pix);
            canvas.drawLine(0,this.getHeight()-(pix/2),this.getWidth(),this.getHeight()-(pix/2),this.bluePaint);
            Log.d("CCTab","Tab Height:"+this.getHeight()+" Width:"+this.getWidth()+" StrokeWidth:"+pix);
        } 
```

现在这适用于 Eclair（2.1，API 级别 7），但它不适用于 Gingerbread（2.6 和 2.7，API 级别 9 和 10）。

**我的问题**

为什么？

**提前致谢**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:07:03.740

我从来没有找到解决这个问题的方法。然而，作为一种解决方法，而不是使用 TextView 来扩展我的类，我使用了 View 并手动实现了文本的绘制以及绘制这条线，这已经奏效了。

# java - unable to instantiate activity component info

> ID：13142572
> 
> 赞同：0
> 
> 时间：2012-10-30T15:39:59.220
> 
> 标签：java, android

when I run the programme I get a runtime error. Unable to instantiate activity component info.

Here is the code I use, I tried to write a listner for spinner.

```
public void addListenerlist() {

        spinner1.setOnItemSelectedListener(new OnItemSelectedListener() {

            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {

                String s = arg0.getItemAtPosition(arg2).toString();

                if (s.equals("Malaysia")) {
                    message = getResources().getString(R.string.listdesc1);
                } else if (s.equals("United States")) {
                    message = getResources().getString(R.string.listdesc1);
                } else if (s.equals("Sri Lanka")) {
                    message = getResources().getString(R.string.listdesc2);
                } else if (s.equals("Indonesia")) {
                    message = getResources().getString(R.string.listdesc3);
                } else if (s.equals("France")) {
                    message = getResources().getString(R.string.listdesc4);
                } else if (s.equals("Italy")) {
                    message = getResources().getString(R.string.listdesc5);
                } else if (s.equals("Singapore")) {
                    message = getResources().getString(R.string.listdesc6);
                } else if (s.equals("New Zealand")) {
                    message = getResources().getString(R.string.listdesc7);
                } else if (s.equals("India")) {
                    message = getResources().getString(R.string.listdesc8);
                } else {
                    message = getResources().getString(R.string.listdesc9);
                }

                String listtitle1 = getResources().getString(
                        R.string.listtitle1);
                // String message =
                // getResources().getString(R.string.listdesc1);

                // txtview.setText(message);
                // txtview2.setText(listtitle1);
                Toast.makeText(Page5SubActivity.this,
                        "OnClickListener : " + message , Toast.LENGTH_SHORT)
                        .show();

            }

            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

            }

        });

    } 
```

I am new to java, another problem is that , can't I use message as local variable instead of a class variable. I have use message varable as a Class variable since using it as a local variable shows errors.

```
 10-31 05:18:04.605: E/AndroidRuntime(854): FATAL EXCEPTION: main
    10-31 05:18:04.605: E/AndroidRuntime(854): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.xxx.xx/com.xxx.xx.Page5SubActivity}: java.lang.NullPointerException
    10-31 05:18:04.605: E/AndroidRuntime(854):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
    10-31 05:18:04.605: E/AndroidRuntime(854):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
    10-31 05:18:04.605: E/AndroidRuntime(854):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
    10-31 05:18:04.605: E/AndroidRuntime(854):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
    10-31 05:18:04.605: E/AndroidRuntime(854):  at android.os.Handler.dispatchMessage(Handler.java:99)
    10-31 05:18:04.605: E/AndroidRuntime(854):  at android.os.Looper.loop(Looper.java:123)
    10-31 05:18:04.605: E/AndroidRuntime(854):  at android.app.ActivityThread.main(ActivityThread.java:3683)
    10-31 05:18:04.605: E/AndroidRuntime(854):  at java.lang.reflect.Method.invokeNative(Native Method)
    10-31 05:18:04.605: E/AndroidRuntime(854):  at java.lang.reflect.Method.invoke(Method.java:507)
    10-31 05:18:04.605: E/AndroidRuntime(854):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    10-31 05:18:04.605: E/AndroidRuntime(854):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    10-31 05:18:04.605: E/AndroidRuntime(854):  at dalvik.system.NativeStart.main(Native Method)
    10-31 05:18:04.605: E/AndroidRuntime(854): Caused by: java.lang.NullPointerException
    10-31 05:18:04.605: E/AndroidRuntime(854):  at android.app.Activity.findViewById(Activity.java:1647)
    10-31 05:18:04.605: E/AndroidRuntime(854):  at com.meegua.zakat.Page5SubActivity.<init>(Page5SubActivity.java:17)
    10-31 05:18:04.605: E/AndroidRuntime(854):  at java.lang.Class.newInstanceImpl(Native Method)
    10-31 05:18:04.605: E/AndroidRuntime(854):  at java.lang.Class.newInstance(Class.java:1409)
    10-31 05:18:04.605: E/AndroidRuntime(854):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
    10-31 05:18:04.605: E/AndroidRuntime(854):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
    10-31 05:18:04.605: E/AndroidRuntime(854):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T20:02:23.190

在花了几个小时后，我可以找到问题所在。我没有正确声明类变量。这是错误的原因`"unable to instantiate activity component info"`

```
private Spinner spinner1; 
private TextView txtv ; 
```

我没有声明 private 关键字。认为这会对某人有所帮助。

# javascript - How to pause an event in jQuery?

> ID：13142574
> 
> 赞同：4
> 
> 时间：2012-10-30T15:40:02.837
> 
> 标签：javascript, jquery

I have a question regarding events.

Basically, I want to run a jquery method when the user clicks a link to leave the page. In this method I want to check a few things before they leave, so I know I can call:

```
e.preventDefault(); 
```

But what if I want the event to continue after I prevent the event?

Any suggestions how to approach this?

Thank you!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T15:41:49.090

如果方法是同步的，您可以从事件处理程序中调用它。在处理程序返回之前不会执行默认操作，因此您有尽可能多的时间来决定是否要阻止它。

如果方法是异步的，事情会变得更加复杂。由于无法等待该方法，因此您必须无条件地阻止默认操作并在异步方法完成后有条件地再次触发它 - 可能使用[`.trigger()`](http://api.jquery.com/trigger/)or 。[`.triggerHandler()`](http://api.jquery.com/triggerHandler/)

# c# - How can I extend an existing NLog target?

> ID：13142576
> 
> 赞同：1
> 
> 时间：2012-10-30T15:40:07.323
> 
> 标签：c#, nlog

I'm looking to extend NLog's `MailTarget` because we wish to hide our user name and password from the `NLog.config` file because it is distributed to all of our clients.

Here is what I have:

```
[Target("HiddenPasswordMail")]
public class HiddenPasswordMailTarget : MailTarget
{
    public HiddenPasswordMailTarget()
    {
        SmtpUserName = "USERNAME";
        SmtpPassword = "PASSWORD";
        SmtpServer = "SMTPSERVER";
    }
} 
```

`NLog.config`

```
<target xsi:type="HiddenPasswordMail"
    name="EmailLog"
    subject="${level} on ${machinename}"
    to="TOADDRESS"
    from="FROMADDRESS"
    body="${longdate}|${level:uppercase=true}|${logger}|${message}" /> 
```

The issue is that while I can see that my username, password and server address have all been set, no email is actually sent. How can I debug this?

Are there perhaps any alternatives to this? I've tried configuring NLog through code but there appears to be missing features that are available with the XML configuration.

# javascript - d3.select 方法不起作用

> ID：13142591
> 
> 赞同：14
> 
> 时间：2012-10-30T15:40:35.847
> 
> 标签：javascript, d3.js

我是 datavis 和 D3 库的新手，我正在尝试在这里遵循 tut [http://mbostock.github.com/d3/tutorial/bar-1.html](http://mbostock.github.com/d3/tutorial/bar-1.html)

当我运行代码时，我的网页上没有显示任何内容，有人能指出问题吗？

我认为这与 d3.select 方法有关。当我运行代码并检查它时，主体是空的，所以我假设没有创建任何内容。任何帮助将不胜感激！！！

```
<title>3Dtut - 1</title>
<script type="text/javascript" src="http://mbostock.github.com/d3/d3.js?2.4.5">   </script>

<script type="text/javascript">
var data = [4, 8, 15, 16, 23, 42];  

//container for the bar chart
var chart = d3.select("body").append("div")
.attr("class", "chart");

//adding div elements to the bar chart
 chart.selectAll("div")
     .data(data)
     .enter().append("div")
     .style("width", function(d) { return d * 10 + "px"; })
     .text(function(d) { return d; });
</script>

<STYLE type="text/css">
.chart div {
   font: 10px sans-serif;
   background-color: steelblue;
   text-align: right;
   padding: 3px;
   margin: 1px;
   color: white;
 }
 </STYLE>
</head>
<body>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-30T17:21:57.607

问题与您`<script> .. </script>`在 html 文档中的位置有关。

`body`在您的脚本正在执行的那一刻，尚不存在任何元素。这意味着`d3.select("body")`它将是空的，并且没有`div.chart`被附加。

尝试移动你的`<script> .. </script>`内部`<body> .. </body>`部分。这将保证`body`在执行代码时元素存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T06:32:09.737

使用主体内部使其不仅可用于标签或任何标签，而且可以更快地执行它。同样，由于 div 是标签，您可以创建一个类，例如。一个，然后将其用作 d3.select(".one") 以使其不重合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-05T17:03:34.560

如果您不希望将`<script>`标签放在`<body>`元素中，您还可以告诉浏览器在 DOM 准备好后执行您的 d3 代码（或任何其他 JavaScript 代码）。

使用 jQuery 等库，您可以使用：

```
$( document ).ready(function() {
  // Your d3 code here
}); 
```

这将确保您的脚本在整个 DOM 准备好之后执行，包括`<body>`元素。

有关 jQuery 就绪函数的参考、示例和较短版本，请参阅[http://learn.jquery.com/using-jquery-core/document-ready/](http://learn.jquery.com/using-jquery-core/document-ready/)。

# actionscript-3 - AS3 As3IsoLib 添加精灵

> ID：13142592
> 
> 赞同：0
> 
> 时间：2012-10-30T15:40:36.460
> 
> 标签：actionscript-3

我正在尝试将图像添加到精灵然后将其添加到网格中。图像的原始尺寸为 276x202。然而，当它被添加到网格中时，它的大小会增加。

[http://i.imgur.com/P1Jlq.png](http://i.imgur.com/P1Jlq.png)

结果是

[http://i.imgur.com/0UPBH.png](http://i.imgur.com/0UPBH.png)

```
public class main extends MovieClip
{

    public function main() 
    {
        var view:IsoView = new IsoView();
        view.setSize((stage.stageWidth), stage.stageHeight);
        view.clipContent = true;
        addChild(view);

        var gridHolder:IsoScene = new IsoScene();
        view.addScene(gridHolder);
        var scene:IsoScene = new IsoScene();
        view.addScene(scene);

        graphics.beginFill(0x000000, 1);
        graphics.drawRect(0, 0, 800, 600);graphics.endFill();

        var grid:IsoGrid = new IsoGrid();
        grid.cellSize = 40;
        grid.setGridSize(20, 20, 0);
        gridHolder.addChild(grid);
        gridHolder.render();

        //var box:IsoBox = new IsoBox();
        //box.setSize(40, 40, 40);
        //box.moveTo(80, 80, 0);
        //scene.addChild(box);

        var player:IsoSprite;
        var myLoader:Loader;

        myLoader=new Loader();
        myLoader.load(new URLRequest('imgs/DesertTankNE.png'));
        //myLoader.width = 5; //Makes image disappear no matter what value is set.
        //myLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, OnComplete); //Doesn't change anything if we say on completion of loading image add it to the sprite.

        player = new IsoSprite();
        player.sprites = [myLoader];

        //player.setSize(1,1,0); //Doesn't seem to affect anything no matter what size specified.
        //player.width = 2; //Same as above

        scene.addChild(player);
        scene.render();

    }

} 
```

我尝试在加载图像时设置图像的宽度和高度，并尝试设置精灵的大小。无论设置什么值，前者都会使图像不出现，而后者似乎没有任何影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T22:01:59.933

您的代码绝对没有问题`as3isolib`，并且图像不会以任何方式通过代码调整大小。将坦克图像与网格单元的大小（应该是 20 像素宽 x 20 像素高）进行比较，您应该会看到它们的相对大小是可以的。

唯一的问题是**整个闪存阶段正在调整大小**。**您是否正在浏览器**上测试您的 Flash 电影？确保您没有将 Flash 影片的宽度和高度设置为 HTML 中其容器的 100%。如果 flash 电影在一个 div 中，并且告诉 flash 的宽度和高度为 100%，那么它将伸展到 div 的任何大小。

看到你的代码我想你希望你的舞台尺寸是 800x600；**使用元标记SWF**将您的 Flash 电影设置为这些尺寸，例如：

```
[SWF(width="800", height="600", frameRate="30", backgroundColor="#FFFFFF")] 
```

如果您使用的是 Flash Builder，则可能需要多次清理项目（项目 -> 清理）以清除以前的编译器设置。**在浏览器之外**测试您的 SWF 电影（双击 SWF 文件以在本地 Flash 播放器上打开它）并确保它具有正确的尺寸。您现在应该看到大小合适的水箱和网格单元。

如果您想在浏览器中对其进行测试，请不要使用由 Flash Builder（或 Flash Pro）生成的 HTML 包装器。[使用swfobject](http://code.google.com/p/swfobject/)制作自己的 html并设置正确的宽度和高度，例如：

```
<script type="text/javascript">
    swfobject.embedSWF("myIsoTank.swf", "flash_container_div", "800", "600", "10", "expressInstall.swf");
</script> 
```

这应该可以解决您的问题。

# windows - 我需要将我的应用程序放在 Windows 应用商店中才能使用 WNS 服务吗？

> ID：13142597
> 
> 赞同：0
> 
> 时间：2012-10-30T15:40:37.780
> 
> 标签：windows, winrt-xaml

设想：

我正在构建 Windows 应用商店之外的 Windows 8 应用程序。在这里，我希望使用 WNS 接收通知。我有一个发布者，它将根据用户界面上的用户操作生成事件（例如：像上传文件一样，一旦文件上传完成，就会生成事件）。我创建了一个内部 WCF 服务（端点），它将订阅发布者并监听发布者发送的通知。我将我的监听器依次集成到 WNS 服务，一旦监听器接收到通知，就会依次发送到 WNS 服务以处理并传递到特定设备。

我的问题是为了使用 WNS 服务，我需要将我的应用程序保留在 Windows 商店中吗？是强制性的吗？？？

他们有什么方法可以在不使用 WNS 服务的情况下在 Windows 8 中实现推送通知？？？？

请就此澄清一下。

任何帮助表示赞赏

谢谢

卡尔提克·瓦德拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:39:04.447

需要使用 Windows 推送通知服务 (WNS) 的应用程序也需要出现在商店中。应用要使用 WNS，需要在应用商店门户注册，该门户为应用提供包安全标识符 (SID) 和密钥，这是通过 WNS 进行身份验证和使用 WNS 所必需的。

需要推送通知的 Windows 应用商店应用只能使用 WNS。

传统的桌面应用程序无法使用 WNS，尽管它们可以实现自己的推送通知版本。

# c# - 如何从 Visual Studio 手动终止特定（正在运行的）线程

> ID：13142599
> 
> 赞同：5
> 
> 时间：2012-10-30T15:40:45.640
> 
> 标签：c#, .net, multithreading, visual-studio-2010, visual-studio

出于测试的目的，我需要从 Visual Studio 或任何其他允许我这样做的工具**手动终止命名线程（在调试会话中）？**

但是`Threads`Visual Studio 2010 中的 Debug Window 只`Freeze`在线程的上下文菜单中有一个选项，而 Sysinternal 的[ProcessExplorer](http://en.wikipedia.org/wiki/Process_Explorer)只列出进程，而不是线程。

有没有办法手动杀死一个特定的（正在运行的）线程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:43:09.390

仅仅杀死一个线程并不容易，因为该语言的设计者希望避免以下问题：您的线程获取一个锁，然后在它释放它之前杀死它......现在任何需要该锁的人都会卡住。

您要做的是使用一些全局变量来告诉线程停止。您必须在线程代码中手动检查该全局变量，如果看到它表明您应该停止，则返回。

# wpf - 使用 DisplayDateStart 绑定时带有 WPF 日历的 Stackoverflow

> ID：13142600
> 
> 赞同：0
> 
> 时间：2012-10-30T15:40:46.090
> 
> 标签：wpf

我有一个小问题。

当我尝试使用 `DisplayDateStart="{Binding DisplayDate.Date.Date.Now, ElementName=MeinCalendar, Mode=OneWay}"`Binding 时，我的带有普通日历的小型 WPF 项目会出现 System.StackOverflowException 异常。

我可以在没有任何错误的情况下启动我的项目，但是当我单击“后退”和“下一步”按钮几次时。日历会引发`System.StackOverflowException`异常。

当我在没有绑定的情况下启动项目时，这个异常就不再存在了。

我该如何修复这个错误？

```
<Window x:Class="WpfMVVMtest.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Calendar  x:Name="calendar" DisplayDateStart="{Binding DisplayDate.Date.Now, ElementName=calendar, Mode=OneWay}" ></Calendar> 
```

# vbscript - 防止 VBscript 应用程序显示控制台窗口

> ID：13142603
> 
> 赞同：7
> 
> 时间：2012-10-30T15:40:57.223
> 
> 标签：vbscript

我有一个创建符号链接的 VBScript 应用程序。

```
Set wshell = CreateObject("WScript.Shell")
.....
linkcmd = "mklink /D """ & linkFolderPath & "\" & linkName & """ """ & libfolder & "\" & folderName & """"
    cmd = "cmd /C " & linkcmd
    wshell.Run cmd, 4, true 
```

这很好并且有效，但是当我创建大量链接时，每次执行`wshell.Run`命令都会导致出现一个短暂的控制台窗口并立即消失。

有没有办法阻止控制台窗口被如此明显地创建？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-30T15:44:20.880

您可以使用此 VBScript 隐藏运行 cmd 命令，只需将其合并到您的脚本中即可：

```
Set objShell = WScript.CreateObject("WScript.Shell")
objShell.Run "cmd /c yourcommands", 0, True 
```

# php - PHP 类数组

> ID：13142605
> 
> 赞同：0
> 
> 时间：2012-10-30T15:41:01.560
> 
> 标签：php, arrays, class

嘿，我是 php 中的类和数组的新手，但需要了解如何从此类函数数组中获取正确的值

```
class theCart {
    public static $DISTANCE = array(
      '0'  => '0 - 75',
      '10' => '76 - 125',
      '20' => '126 - 175',
      '30' => '176 - 225',
      '40' => '226 - 275',
      '50' => '276 - 325'
    );
} 
```

我试图匹配的输出如下所示：**76 - 125**

我只是这样称呼它吗

```
 $distanceNum = '76 - 125';
 $tmpDistanceTotal = $DISTANCE($distanceNum); 
```

那么**$tmpDistanceTotal**的值应该是**10**吗？我在想数组中只有值**0,10,20,30,40,50**？

我有另一个数组：

```
public static $STEPS = array(
    '0' => 0,
    '1' => 0,
    '2' => 0,
    '3' => 25,
    '4' => 50,
    '5' => 75,
    '6' => 100,
    '7' => 125
); 
```

我试图与上面匹配的输出是**3**我不确定它是否在寻找字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:43:09.860

这应该清楚一点：

```
foreach (theCart::$DISTANCE as $k => $v) {
    if ($v == '76 - 125') {
        echo $k;
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T15:51:39.100

要使 $tmpDistanceTotal 获得值 10，您可以执行以下操作：

```
$tmpDistanceTotal = array_search($distanceNum, theCart::DISTANCE); 
```

或者你可能希望得到这样的结果：

```
class theCart {
    public static $DISTANCE = array(
      '0'  => '0 - 75',
      '10' => '76 - 125',
      '20' => '126 - 175',
      '30' => '176 - 225',
      '40' => '226 - 275',
      '50' => '276 - 325'
    );

    public function getTotalDistance($distanceNum)
    {
         return array_search($distanceNum, self::DISTANCE);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T15:44:47.707

您的问题实际上只是关于数组，您应该从此处删除这些类以使事情更容易理解：

```
$DISTANCE = array(
  '0'  => '0 - 75',
  '10' => '76 - 125',
  '20' => '126 - 175',
  '30' => '176 - 225',
  '40' => '226 - 275',
  '50' => '276 - 325'
);

$variable = $DISTANCE[10]; 
```

在上面的示例中，变量将等于 76-125。您正在使用关联数组，因此您需要稍微阅读一下它们，因为您的问题表明您并不真正了解数组的工作原理。一旦你把它弄下来，继续前进，像你上面提到的那样进入一个类上下文。

您可以在此处查看 PHP 手册：http: [//php.net/manual/en/language.types.array.php](http://php.net/manual/en/language.types.array.php)

对于一个简短而快速的答案，您可以使用

```
 $tempVar = 10;
 $tmpDistance = $this->DISTANCE[$tempVar]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T15:46:45.310

不确定您要做什么，但您可以使用[array_search](http://php.net/manual/en/function.array-search.php)：

```
$distanceNum = '76 - 125';
$key = array_search($distanceNum, theCart::$DISTANCE); 
```

`$key`现在是10。

# ios - 在 Tumblr 上发布的 API

> ID：13142608
> 
> 赞同：0
> 
> 时间：2012-10-30T15:41:24.130
> 
> 标签：ios, asihttprequest, tumblr

一段时间以来，我一直在尝试从我的 iOS 应用程序将图像上传到 Tumblr，但我无法让我的方法正常工作。

根据[本指南](http://hytgbn.net/2012/02/tip-of-uploading-images-to-tumblr-using-oauth-on-ios/)，我当前的方法使用 ASIHTTPRequest 和 OAuthConsumer 。但是，我最终收到 401 错误（需要身份验证）。[你可以在这里](https://groups.google.com/forum/#!topic/tumblr-api/ksfOzYctCXM)找到我的问题的解释。

但我的问题是：在 Tumblr for iOS 上发布任何其他平均/API 吗？我看到 OAuthConsumer 在这方面没有完全发挥作用，而且我没有发现任何与 GTM 相关的东西。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:20:34.837

前几天终于找到了解决我问题的方法。我一开始以为它有点老了，而且它不起作用，但最后，实现[TumblrUploadr](https://github.com/vvanhee/TumblrUploadr)做到了。

总而言之，我使用 GTM-OAuth 登录并使用 TumblrUploadr 上传。对于那些寻求 Tumblr API 解决方案的人。

**更新**：关于 GTMOAuth 的一些信息，如果你想使用回调，你必须在 GTMOAuthAuthentication.m > +(NSArray*)tokenAuthorizeKeys 中添加一个标志：在数组中添加 kOAuthCallbackKey 以便将其考虑在内。否则，您没有回调。

# ios - heightForRowAtIndexPath：当字符串包含换行符时计算不正确\n

> ID：13142614
> 
> 赞同：1
> 
> 时间：2012-10-30T15:41:41.877
> 
> 标签：ios, uitableview, nsstring, heightforrowatindexpath

我在分组中插入了以下字符串`UITableViewCell`：

```
NSString = @"In 1879, Steve Dancy sells his New York shop and ventures west to explore and write a journal about his adventures. Though he's not looking for trouble, Dancy's infatuation with another man's wife soon embroils him in a deadly feud with Sean Washburn, a Nevada silver baron.\n\nInfuriated by the outrages of two hired thugs, the shopkeeper kills both men in an impulsive street fight. Dancy believes this barbarian act has closed the episode. He is wrong. He has interfered with Washburn's ambitions, and this is something the mining tycoon will not allow.\n\nPinkertons, hired assassins, and aggrieved bystanders escalate the feud until it pulls in all the moneyed interests and power brokers in Nevada. Can the former city slicker settle accounts without losing his life in the process?" 
```

请注意，它包含 \n。当字符串包含新行时，我的`heightForRowAtIndexPath:`方法中返回了不正确的高度：

```
#define FONT_SIZE 14.0f
#define CELL_CONTENT_MARGIN 14.0f

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath; {
    CGSize constraint = CGSizeMake(CGRectGetWidth(self.view.frame) - (CELL_CONTENT_MARGIN * 2), 20000.0f);
    CGSize size = [self.giftProduct.productDescription sizeWithFont:[UIFont systemFontOfSize:FONT_SIZE] constrainedToSize:constraint lineBreakMode:NSLineBreakByWordWrapping];
    CGFloat height = MAX(size.height, 44.0f);
    return height + (CELL_CONTENT_MARGIN * 2);
} 
```

其他不包含新行的字符串也可以正常工作。是否有理由在计算高度时不考虑新线并返回太短的高度给我？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:56:37.800

发布的代码可以正常工作并提供正确的结果。问题必须在其他地方。

也许`self.view.frame`宽度与您`UITableView`的边界不同？或者您忘记补偿分组单元格的边距或附件？我必须更多地了解你的`UITableViewCell`和布局才能更具体。

![UITableViewCell 分组填充](../Images/dac129b815260da1defe05f384d9df18.png)

一个单元格，其文本用于单元格`textLabel.text`，其高度由以下代码计算：

```
#define FONT_SIZE 14.0f
#define CELL_CONTENT_MARGIN 10.0f  // label padding
#define CELL_MARGIN 10.0f  // cell margin for "grouped" style

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath; {
    CGSize constraint = CGSizeMake(CGRectGetWidth(tableView.bounds) - (2 * CELL_MARGIN) - (CELL_CONTENT_MARGIN * 2), 20000.0f);
    CGSize size = [self.testString sizeWithFont:[UIFont systemFontOfSize:FONT_SIZE] constrainedToSize:constraint lineBreakMode:NSLineBreakByWordWrapping];
    CGFloat height = MAX(size.height, 44.0f);
    return height + (CELL_CONTENT_MARGIN * 2);
} 
```

# php - 在 PHP 中使用 Meetup Stream 导入新事件

> ID：13142619
> 
> 赞同：0
> 
> 时间：2012-10-30T15:41:57.800
> 
> 标签：php, codeigniter, curl, stream, get

聚会 API 允许您获取推送的数据更新。如下所示的`CURL`请求：

```
http://stream.meetup.com/2/open_events 
```

将返回不断更新的事件流。这个导入的流会随着新数据的推送而不断更新。我正在尝试想出使用此流的最佳方法，但我不确定什么是标准的。我想只`CURL`在一个while循环中运行一个请求，但这只会永远运行，并且从我的codeigniter项目中的控制器函数运行它似乎不切实际。与这样看似无限的事件流交互的正确方法是什么？有没有比从控制器功能运行进程更好的方法？运行一个经常醒来的 chron-job 以从之前停止的地方继续处理是否更明智？

更新：进一步调查表明，从该流导入数据使用分块传输编码。令我困惑的是，这条流似乎是无限的。它只是不停地输出数据。我仍然不明白如何从这样的数据流中导入数据。cron 作业似乎也不是将这样的流导入我的 mysql 数据库的答案。

这是记录会议流的资源的链接： [http ://www.meetup.com/meetup_api/docs/stream/2/open_events/](http://www.meetup.com/meetup_api/docs/stream/2/open_events/)

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T17:19:05.077

我很好奇你的解决方案最终是什么。我才刚刚开始，所以如果有适当的解决方案，它将对我有很大帮助。此外，我认为持久应用程序是通过 cron 的方法。

```
 $url= 'http://stream.meetup.com/2/open_events?since_mtime=1326077000';
    $fp = fopen($url, 'r');
    $data="";
    $string="";
    while ($data !="")
    {
    $data = fread($fp, 45);
        $string .= $data;   
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T16:05:23.430

如果不仔细查看 meetup.com 文档，听起来您可能希望使用 javascript 和 ajax 以固定的时间间隔调用您的控制器（它调用 meetup Web 服务）。然后，您的 Ajax 响应将包含您更新的数据，您可以在 ajax 回调函数中相应地更新您的页面。

查看 javascript setInterval() 方法

# javascript - 在 google script web 应用程序中使用 javascript 提示

> ID：13142623
> 
> 赞同：1
> 
> 时间：2012-10-30T15:42:07.863
> 
> 标签：javascript, web-applications, google-apps-script

再会。我正在尝试使用下面列出的一些 JavaScript 方法在浏览器的用户端制作弹出窗口，但作为一名业余开发人员，我不知道如何让 google 脚本识别它们，并且 browser.msgBox 只能在文档中使用，而不是在浏览器中。

```
window.alert()
window.confirm()
window.prompt() 
```

非常感谢您提供任何快速帮助。

# php - 另一个文件夹中的 Symfony 布局

> ID：13142627
> 
> 赞同：0
> 
> 时间：2012-10-30T15:42:17.983
> 
> 标签：php, symfony-1.4

是否可以将布局文件放在模块/模板（或其他）目录中而不是一般的应用程序/模板中？

我试图把路径放进去，`view.yml`但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:48:03.187

刚刚找到了一个解决方法，所以我可以保留`layout.php`在模块/模板文件夹中：

```
public function preExecute()
{
    $template = $this->getContext()->getConfiguration()->getTemplateDir('MODULE', 'layout.php');
    $this->setLayout($template . '/layout');
} 
```

# sql-server - 为什么自定义 SSIS 日志提供程序不会显示在提供程序下拉列表中？

> ID：13142631
> 
> 赞同：3
> 
> 时间：2012-10-30T15:42:31.240
> 
> 标签：sql-server, ssis

我正在尝试为 SSIS 创建一个自定义日志记录提供程序，但是在部署 dll 时，它没有显示在提供程序列表中。

SSIS 版本是 11.0.2100.60。我尝试了 .NET Framework 2.0 和 3.5。我安装在 GAC 中，并复制到下面的两个文件夹中：

```
C:\Program Files\Microsoft SQL Server\110\DTS\LogProviders
C:\Program Files (x86)\Microsoft SQL Server\110\DTS\LogProviders 
```

完成此操作后，我打开了 Visual Studio [Shell]，并创建了一个简单的 SSIS 包。打开`SSIS\Logging...`菜单时，新的自定义日志提供程序不存在。

我现在使用的代码是 Microsoft ( *HTMLLogProviderCS* ) 从 Codeplex 提供的示例包，没有运气。

有什么我可能错过的想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-30T19:06:37.660

以下是我使用 Visual Studio 2010 在 .NET 4.0 框架中创建自定义日志提供程序所执行的步骤。这些步骤还显示了提供程序在 SQL Server Data Tools 2010 中的显示方式。

首先，我使用的是 Microsoft SQL Server Integrations Services Designer 版本 11.0.2100.60

![SSIS 设计器版本](../Images/cfda0729685615bf6db228d019744416.png)

创建一个类库项目。我选择了 C# 和 .NET Framework 4，将项目命名为 CS40.CustomLogProvider。

![创建类库](../Images/7445e08ebde5b17297f621dd494f3b65.png)

将类文件名更改为`SSISCustomLogProvider`. 右键单击引用并导航`C:\Program Files\Microsoft SQL Server\110\SDK\Assemblies`到添加 DLL的路径`Microsoft.SQLServer.ManagedDTS.dll`

将以下代码粘贴到类中：

```
using Microsoft.SqlServer.Dts.Runtime;

namespace CS40.CustomLogProvider
{
    [DtsLogProvider(
        DisplayName = "Custom log provider created by Siva",
        Description = "A simple log provider.",
        LogProviderType = "Custom")]
    public class SSISCustomLogProvider : LogProviderBase
    {
        // TODO: Override the base class methods.
    }
} 
```

![添加参考](../Images/056f96ab5bcb559a8cebb47bc12b9969.png)

双击项目下的*属性*节点。单击属性页面上的*签名选项卡以使用强密钥对程序集进行签名。*检查签署程序集并选择*从*选择一个强名称密钥文件*。*

 *![签署大会](../Images/bb0f2511a999fb246d626aad3cfca420.png)

输入密钥文件名，例如 SampleKey。如果您愿意，可以输入密码。

![强名称键](../Images/cbff04f39320da96da603f77d189f737.png)

将创建强名称密钥并将其添加到项目中。

![已创建强键](../Images/0dd3574f0211e995c001842390d22a16.png)

构建项目。我在发布模式下构建了项目。DLL 将在`C:\temp\CS40.CustomLogProvider\bin\Release`. 现在，是时候将 DLL 注册到 GAC 了。我在路径中找到了 gacutil`C:\Program Files\Microsoft SDKs\Windows\v8.0A\bin\NETFX 4.0 Tools`

在以管理员身份运行模式下打开命令提示符。依次输入以下命令并回车。

将命令提示符路径更改为可以找到 gacutil 的位置。

```
cd C:\Program Files\Microsoft SDKs\Windows\v8.0A\bin\NETFX 4.0 Tools 
```

输入以下命令将 DLL 添加到 GAC。

```
gacutil -i C:\temp\CS40.CustomLogProvider\bin\Release\CS40.CustomLogProvider.dll 
```

![海关总署注册](../Images/8f18d580c37677c236ee6a3f1d4b02a7.png)

将 DLL 复制到`CS40.CustomLogProvider.dll`location`C:\temp\CS40.CustomLogProvider\bin\Release`并将其粘贴到`C:\Program Files\Microsoft SQL Server\110\DTS\LogProviders`. 路径中的值`110`是指 SQL Server 2012。

![已复制 DLL](../Images/a47623a8c4996876749c99a142f6757b.png)

使用 SQL Server Data Tools 创建一个新的 SSIS 包。

![SSIS项目](../Images/09c4205aa387465c4eede33e80333255.png)

在新创建的 SSIS 包上，单击`SSIS --> Logging...`以访问日志记录选项

![日志记录](../Images/860a1dd2e0c6a30dd4f5ba1b6be7fbe2.png)

您会注意到新创建的 SSIS 日志提供程序。您可以看到它显示了 DisplayName 属性上使用的值。

希望有帮助。

![SSIS 日志提供程序](../Images/ab0fdd98c70f3751b5df90c8716f102e.png)*

# typescript - 如何根据 TypeScript 中的接口文件定义创建对象？

> ID：13142635
> 
> 赞同：444
> 
> 时间：2012-10-30T15:42:44.540
> 
> 标签：typescript

我已经定义了一个这样的接口：

```
interface IModal {
    content: string;
    form: string;
    href: string;
    $form: JQuery;
    $message: JQuery;
    $modal: JQuery;
    $submits: JQuery;
 } 
```

我定义了一个这样的变量：

```
var modal: IModal; 
```

但是，当我尝试设置 modal 的属性时，它会给我一条消息说

```
"cannot set property content of undefined" 
```

是否可以使用接口来描述我的模态对象，如果可以，我应该如何创建它？

* * *

## 回答 #1

> 赞同：588
> 
> 时间：2012-10-30T15:52:59.560

如果您在别处创建“模态”变量，并想告诉 TypeScript 这一切都会完成，您可以使用：

```
declare const modal: IModal; 
```

如果你想在 TypeScript 中创建一个实际上是 IModal 实例的变量，你需要完全定义它。

```
const modal: IModal = {
    content: '',
    form: '',
    href: '',
    $form: null,
    $message: null,
    $modal: null,
    $submits: null
}; 
```

或者撒谎，使用类型断言，但您将失去类型安全性，因为您现在将在意想不到的地方得到未定义，并且可能在访问时出现运行时错误`modal.content`等等（合同规定的属性将在那里）。

```
const modal = {} as IModal; 
```

**示例类**

```
class Modal implements IModal {
    content: string;
    form: string;
    href: string;
    $form: JQuery;
    $message: JQuery;
    $modal: JQuery;
    $submits: JQuery;
}

const modal = new Modal(); 
```

你可能会想“嘿，这真的是界面的重复”——你是对的。如果 Modal 类是 IModal 接口的唯一实现，您可能希望完全删除该接口并使用...

```
const modal: Modal = new Modal(); 
```

而不是

```
const modal: IModal = new Modal(); 
```

* * *

## 回答 #2

> 赞同：243
> 
> 时间：2014-06-16T19:37:54.633

如果你想要一个接口的空对象，你可以这样做：

```
var modal = <IModal>{}; 
```

使用接口代替类来结构化数据的优点是，如果您在类上没有任何方法，它将在编译的 JS 中显示为空方法。例子：

```
class TestClass {
    a: number;
    b: string;
    c: boolean;
} 
```

编译成

```
var TestClass = (function () {
    function TestClass() {
    }
    return TestClass;
})(); 
```

这没有任何价值。另一方面，接口根本不会出现在 JS 中，同时仍然提供数据结构化和类型检查的好处。

* * *

## 回答 #3

> 赞同：83
> 
> 时间：2016-06-14T03:32:38.133

如果您使用 React，解析器将阻塞传统的强制转换语法，因此引入了替代方案以在*.tsx*文件中使用

```
let a = {} as MyInterface; 
```

[https://www.typescriptlang.org/docs/handbook/jsx.html](https://www.typescriptlang.org/docs/handbook/jsx.html)

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2017-12-03T10:26:25.077

你可以做

```
var modal = {} as IModal 
```

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2015-12-13T17:59:23.680

我认为您基本上有**五种不同的选择**。根据您想要实现的目标，在其中进行选择可能很容易。

大多数情况下**使用类并实例化它**的最佳方式，因为您使用 TypeScript 来应用类型检查。

```
interface IModal {
    content: string;
    form: string;
    //...

    //Extra
    foo: (bar: string): void;
}

class Modal implements IModal {
    content: string;
    form: string;

    foo(param: string): void {
    }
} 
```

即使其他方法提供了从接口创建对象的更简单方法，您也应该考虑**将接口**分开，如果您将对象用于不同的事情，并且不会导致接口过度隔离：

```
interface IBehaviour {
    //Extra
    foo(param: string): void;
}

interface IModal extends IBehaviour{
    content: string;
    form: string;
    //...
} 
```

另一方面，例如在对代码进行单元测试期间（如果您可能不经常应用关注点分离），为了提高生产力，您可能能够接受这些缺点。您可以应用其他方法来创建主要用于大型第三方 *.d.ts 接口的模拟。总是为每个巨大的接口实现完全匿名的对象可能会很痛苦。

在此路径上，您的第一个选择是**创建一个空对象**：

```
 var modal = <IModal>{}; 
```

其次要**充分实现你界面的必修部分**。无论您是否调用 3rd 方 JavaScript 库，这都会很有用，但我认为您应该创建一个类，就像以前一样：

```
var modal: IModal = {
    content: '',
    form: '',
    //...

    foo: (param: string): void => {
    }
}; 
```

第三，您可以只创建**界面的一部分**并创建一个**匿名对象**，但这样您有责任履行合同。

```
var modal: IModal = <any>{
    foo: (param: string): void => {

    }
}; 
```

总结一下我的回答，即使接口是可选的，因为它们没有被转译成 JavaScript 代码，TypeScript 可以提供一个新的抽象级别，如果使用得当的话。我认为，仅仅因为您可以在大多数情况下从您自己的代码中忽略它们，您不应该这样做。

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2019-08-31T04:50:20.517

这是另一种方法：

**您可以像这样简单地创建一个 ESLint 友好对象**

```
const modal: IModal = {} as IModal; 
```

**或者基于接口和合理默认值的默认实例（如果有）**

```
const defaultModal: IModal = {
    content: "",
    form: "",
    href: "",
    $form: {} as JQuery,
    $message: {} as JQuery,
    $modal: {} as JQuery,
    $submits: {} as JQuery
}; 
```

**然后简单地通过覆盖一些属性来改变默认实例**

```
const confirmationModal: IModal = {
    ...defaultModal,     // all properties/values from defaultModal
    form: "confirmForm"  // override form only
} 
```

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2018-01-23T09:23:38.077

因为我没有在顶部找到一个相同的答案，所以我的答案是不同的。我愿意：

```
modal: IModal = <IModal>{} 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-11-05T20:25:06.033

迄今为止发布的许多解决方案都使用类型断言，因此**如果在实现中省略了所需的接口属性，则不会引发编译错误。**

对于那些对其他一些**强大、紧凑的解决方案**感兴趣的人：

选项1：实例化一个实现接口的匿名类：

```
new class implements MyInterface {
  nameFirst = 'John';
  nameFamily = 'Smith';
}(); 
```

选项 2：创建效用函数：

```
export function impl<I>(i: I) { return i; }

impl<MyInterface>({
  nameFirst: 'John';
  nameFamily: 'Smith';
}) 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2021-03-18T12:47:49.393

由于问题包括 TypeScript 的使用，因此替换

```
var modal: IModal; 
```

经过

```
let modal: IModal = {} as IModal; 
```

应该回答这个问题。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2020-06-19T00:11:30.200

您可以使用 设置默认值`Class`。

### 没有类构造函数：

```
interface IModal {
  content: string;
  form: string;
  href: string;
  isPopup: boolean;
};

class Modal implements IModal {
  content = "";
  form = "";
  href: string;  // will not be added to object
  isPopup = true;
}

const myModal = new Modal();
console.log(myModal); // output: {content: "", form: "", isPopup: true} 
```

### 使用类构造函数

```
interface IModal {
  content: string;
  form: string;
  href: string;
  isPopup: boolean;
}

class Modal implements IModal {
  constructor() {
    this.content = "";
    this.form = "";
    this.isPopup = true;
  }

  content: string;

  form: string;

  href: string; // not part of constructor so will not be added to object

  isPopup: boolean;
}

const myModal = new Modal();
console.log(myModal); // output: {content: "", form: "", isPopup: true} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2021-12-02T20:15:16.243

有 5 种方法可以使用该界面。

```
interface IStudent {
      Id: number;
      name: string;
    }

    Method 1\. all fields must assign data.
     const  obj1: IStudent = { Id: 1, name: 'Naveed' };  

    Method 2\. my favorite one
    const obj2 = { name: 'Naveed' } as IStudent ;

    Method 3.
    const obj3 = <IStudent >{name: 'Naveed'}; 

    Method 4\. use partial interface if all fields not required.
    const  obj4: Partial<IStudent > = { name: 'Naveed' };  

    Method 5\. use ? Mark with interface fields if all fields not required.
    const  obj5: IStudent = {  name: 'Naveed' }; 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-04-13T10:39:49.060

使用您的界面，您可以做到

```
class Modal() {
  constructor(public iModal: IModal) {
   //You now have access to all your interface variables using this.iModal object,
   //you don't need to define the properties at all, constructor does it for you.
  }
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-10-26T13:40:22.787

这是我经常使用的另一种解决方案。但是我不确定是否是好的做法，如果不是，请在下面评论。

```
/// Interface
export default interface BookInterface {
  title: string,
  author: string,
  id: any
}

/// Creating Class
export class BookClass implements BookInterface {
  title: string;
  author: string;
  id: any;

  constructor(title: string, author: string, id: any) {
    this.title = title;
    this.author = author;
    this.id = id;
  }
}

/// How to use it
let book: BookInterface = new BookClass(title, author, id); 
```

谢谢 ：）

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-03-15T16:32:08.033

您实际上不需要类来创建对象。你可以直接这样做：

```
interface IModal {
    content: string;
    form: string;
}

onButtonSaveClick() {
    let myModalClass: IModal = {
        content: 'foo content',
        form: 'foo form'
    }
} 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2021-12-07T09:15:00.410

```
let deletedQuestionsDto = { examId: this.examId, questionId: q.id } as DeletedQuestionsDto; 
```

# sql - 如何加入 3 个表格并按所有 3 个日期排序？

> ID：13142637
> 
> 赞同：4
> 
> 时间：2012-10-30T15:42:49.563
> 
> 标签：sql, join

我有3张桌子，

专辑、视频和故事。

所有 3 个都有一个日期列，每个都与 subject_id 列连接。

我想选择按日期排序的 subject_id 的所有专辑、视频和故事，我该怎么做？

现在我有这个查询：

```
SELECT albums.*, videos.*, stories.*
FROM albums
LEFT JOIN videos
ON videos.subject_id = albums.subject_id
RIGHT JOIN stories
ON stories.subject_id = albums.subject_id
ORDER BY albums.date 
```

这会奏效还是我错过了什么？因为我希望日期不只是按专辑排序，所以故事可能有较旧的条目，然后是专辑等等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:47:18.293

你会想要更换

```
ORDER BY albums.date 
```

和

```
ORDER BY albums.date, videos.date, stories.date 
```

这将首先按专辑日期排序，然后是其中的视频日期，以及其中的故事日期。我认为这会让你得到你正在寻找的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T16:42:09.720

如果我理解正确，假设您总是想按集合中最早的日期按升序排序，您可以这样做：

```
ORDER BY LEAST(albums.date, videos.date, stories.date) 
```

“LEAST”是一个Oracle 函数，它返回集合中的最小值（即最早的）。如果您在没有类似命令的数据库上，则可以使用 CASE 语句：

```
ORDER BY CASE
    WHEN albums.date <= videos.date AND albums.date <= stories.date THEN albums.date
    WHEN videos.date <= albums.date AND videos.date <= stories.date THEN videos.date
    ELSE stories.date 
```

虽然我不确定这也是你想要的。您将在一行中放置一大排所有专辑、视频和故事信息。如果您想为每个不同的专辑、视频或故事设置一行，那么您可能需要一个 UNION 而不是一组 JOIN，尽管您必须确保使用相同的字段。例如，如果您想查看每个表中的标题字段，则可以使用：

```
SELECT * FROM (
    SELECT 'Album' as RowType, album_title as title, subject_id, date from albums
    UNION
    SELECT 'Video' as RowType, video_title as title, subject_id, date from videos
    UNION
    SELECT 'Story' as RowType, story_title as title, subject_id, date from stories
    )
ORDER BY subject_id, date 
```

这将给出我认为你想要的排序顺序（或者如果你愿意，你可以将 subject_id 从 ORDER BY 中取出）。UNION 唯一的问题是您必须在每个基础查询中返回相同的列，因此如果您想要从专辑中获取与视频中截然不同的信息，这将变得很棘手。

# javascript - 是否可以点击标题栏中显示的标题？

> ID：13142639
> 
> 赞同：14
> 
> 时间：2012-10-30T15:42:53.703
> 
> 标签：javascript, html, css, browser, title

可以打标题吗

```
<title><s>My Title</s></title> 
```

像这样，这样标题栏就会显示~~My Title~~？或者有没有办法用css解决这个问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-30T15:44:42.850

来自[MDN 上的`<title>`元素](https://developer.mozilla.org/en-US/docs/HTML/Element/title)：

> HTML 标题元素定义文档的标题，显示在浏览器的标题栏或页面的选项卡上。*它只能包含文本，并且不会解释任何包含的标签。*

所以不，不能那样做。

**更新：**

其他答案建议使用 unicode 字符的各种组合来完成删除，尽管这可能是可能的并且可以产生不错的结果，但我相信它有一个很大的缺点。

我不是 SEO 方面的专家，但据我所知，根据 Google的[搜索引擎优化入门指南](http://static.googleusercontent.com/external_content/untrusted_dlcp/www.google.com/sv//webmasters/docs/search-engine-optimization-starter-guide.pdf)，在搜索引擎优化`<title>`方面非常重要。他们的指南建议**您应该避免**：

*   选择与页面内容无关的标题
*   使用默认或模糊的标题，如“无标题”或“新页面 1”

我的解释是，在你的标题中使用晦涩的字符将直接违反这一点，因此我强烈建议你避免使用它。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-30T15:49:32.133

这**可以**通过使用内置罢工的角色来实现。但这是唯一的方法。使用 HTML 标记或 CSS 不会产生您想要的结果。

使用此示例：http: [//blog.imthy.com/2008/06/strikethrough-strikethrough-text.html](http://blog.imthy.com/2008/06/strikethrough-strikethrough-text.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-30T15:44:32.473

不，我知道没有浏览器支持直接在标题栏中呈现 HTML，只会`<title>`显示标签内的纯文本。您最希望做的是使用一些晦涩的字符，其中行是每个字符的一部分 - 一些非常具体的东西，我不想调查。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T18:13:26.027

`title`如果标题栏中显示元素内容，则无法更改其呈现方式。这不取决于规范，而是取决于实现：浏览器使用自己的例程来显示标题，而 HTML 标记或 CSS 设置不会影响这一点。

没有什么能阻止我们对`title`元素进行样式设置，例如

```
title { text-decoration:line-through; } 
```

但这默认情况下没有可见效果，因为该元素不是显示的文档内容的一部分。添加

```
head, title { display: block; } 
```

使其可见，并且您可以（在现代浏览器中）在页面上看到内容过度。但这不会影响标题栏（也不是特别有用）。

在元素内容中使用特殊字符，您可以创建覆盖，如其他答案所示。然而，这将产生相当大的混乱风险，因为浏览器用于显示标题栏的例程通常使用有限的字符库，将不受支持的字符显示为小框。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-30T18:56:28.430

您可以使用[Unicode 组合字符](http://en.wikipedia.org/wiki/Combining_character)来添加它们。它在很大程度上取决于操作系统/浏览器在标题栏中使用的字体，但它的外观如何。

```
function strike(text) {
    var output = '';
    for (var i = 0; i < text.length; i++) {
        output += '\u0336' + text[i];
    }
    return output;
}

function strikeTitle() {
   document.title = strike(document.title);
} 
```

编辑：我个人最喜欢 \u0337 。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-30T15:59:44.537

浏览器允许通过两个选项自定义文档的标题

1.  最喜欢的图标 2\. 标题

任何带有标签或 css 的自定义都将被忽略，标题上只会显示文本和收藏图标。

因此，如果您想玩转标题，您仍然可以使用 javascript，您可以创建可能适合您的动画。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-30T15:45:20.833

恐怕这是不可能的。“标题”标签不允许在其内容中使用任何格式。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-30T15:49:27.493

这是不可能的，你不能`<title>`用 CSS 控制浏览器窗口标题的标签。

# javascript - 如何防止 Iphone 上显示键盘时的任何触摸？

> ID：13142649
> 
> 赞同：1
> 
> 时间：2012-10-30T15:43:15.553
> 
> 标签：javascript, jquery, jquery-mobile

我正在使用 Jquery mobile 和 Java 脚本在 .NET 项目中工作，我想防止用户在打开键盘时进行任何点击，这意味着我想在键盘打开时禁用触摸外部键盘。

# java - 方法二叉树

> ID：13142652
> 
> 赞同：-2
> 
> 时间：2012-10-30T15:43:18.220
> 
> 标签：java, binary-tree

我不得不做一些关于 BinaryTree 的方法（没有搜索二叉树）。我不能做 3 种方法：反射（反射树，我的代码不起作用，因为只反射树的一部分），cut 和 cut2。代码是：

```
public class BinaryTree {

    protected class Node {

        Integer element;
        Node left;
        Node right;

        Node(int element) {
            this.element = element;
            left = right = null;
        }

        Node(int element, Node left, Node right) {
            this.element = element;
            this.left = left;
            this.right = right;
        }

            // is leaf?
        boolean isLeaf() {
            return left == null && right == null;
        }
    }

    protected Node root;

    public BinaryTree() {
        root = null;
    }

    /* doesn't work */
    public void reflect() {
        if (root == null)
            return;
        reflect(root);
    }

    protected void reflect(Node node) {
        reflect(node.left);
        reflect(node.right);
        Node temp = new Node(node.left.element);
        node.left.element = node.right.element;
        node.right.element = temp.element;
    }

    /* this method had to trim the tree at level h,
       if h=0, it cut the whole tree. It change the original tree */
    /* doesn't work */
    public void cut(int h) {

    }

    /* i can change parameters */
    protected void cut(Node node, int h) {

    }

    /* this method had to trim the tree at level h,
       if h=0, it cut the whole tree. It doesn't change the original tree, 
       it returns a new tree */
    /* doesn't work */
    public BinaryTree cut2(int h) {

    }

    /* i can change parameters */    
    protected BinaryTree cut2(Node node, int h) {

    }

   }
} 
```

我无法使用反映 cut 和 cut2 的方法。请帮帮我，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:52:46.113

你几乎是`reflect`对的。只需避免创建新的 Node 对象：

```
protected void reflect(Node node) {
    if (node != null) {
        reflect(node.left);
        reflect(node.right);
        Node temp = node.left;
        node.left = node.right;
        node.right = temp;
    }
} 
```

至于`cut`：

```
public void cut(int h) {
    if (h == 0) {
        root = null;
    } else {
        cut(root, h - 1);
    }
} 
```

然后你可以写`cut(Node, int)`：

```
protected void cut(Node node, int h) {
    if (node != null) {
        if (h == 0) {
            node.left = node.right = null;
        } else {
            cut(node.left, h - 1);
            cut(node.right, h - 1);
        }
    }
} 
```

看看您是否可以`cut2`使用上述内容作为开始自己锻炼。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:53:08.267

这闻起来像家庭作业，即使标记被修剪，我不认为我们编写完整的二叉树实现是正确的。

话虽如此，您能解释一下实现这两种方法的不清楚之处吗？除了`cut2`. 我将通过`cutInternal(Node n, int currLevel, int h)`传入我们当前所在的级别号的递归私有方法来实现它。然后，当`currLevel == h`我们只修剪两个节点并返回时。

# weblogic - WebLogic12c 中的 ServiceLoader 问题

> ID：13142656
> 
> 赞同：8
> 
> 时间：2012-10-30T15:43:29.257
> 
> 标签：weblogic, cdi, serviceloader

我一直在尝试将我们的 Activiti 实现重构为使用 CDI，但遇到了许多问题。我已经花了太多时间试图解决这个问题，但我就是不能放手......我想我现在已经解决了这个问题，在不涉及 Activiti 的情况下建立了一场干净的结构化战争，并且已经能够重现我认为的主要问题。

基本上我有 jar1 和 jar2，这两个 CDI 都通过包含 META-INF/beans.xml 启用。两个 jar 都在 META-INF/services/test.TheTest 中指定了一个类，指向各自 jar 的本地实现。jar1 依赖于 jar2。此外，两个 jar 都指向 javax.enterprise.inject.spi.Extension 的实现，从而触发场景。在 Extension 的每个实现中，我都有一个类似的方法：

```
public void afterDeploymentValidation(
        @Observes AfterDeploymentValidation event, BeanManager beanManager) {

    System.out.println("In jar1 extension"); 
    ServiceLoader<TheTest> loader = ServiceLoader.load(TheTest.class);
    Iterator<TheTest> serviceIterator = loader.iterator();
    List<TheTest> discoveredLookups = new ArrayList<TheTest>();
    while (serviceIterator.hasNext()) {
        TheTest serviceInstance = (TheTest) serviceIterator.next();
        discoveredLookups.add(serviceInstance);
        System.out.println(serviceInstance.getClass().getName());
    }
} 
```

现在，我的问题是`ServiceLoader`在运行 WebLogic12c 时在这两种情况下都看不到任何实现。相同的代码在 Jboss 7.1.1 和 Glassfish 中都可以正常工作，列出了 test.TheTest 接口的两个实现。

假设这确实是 WebLogic 12c 中的一个问题，还是我做错了什么？请记住，我只是想模拟我们在整合 Activiti 时使用的生产设置。

问候，/彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:24:54.017

WLS 提供了一个类加载器分析工具，您是否看到这是否有助于诊断您的问题。

您可以通过访问 ip:port/wls-cat/index.jsp 访问此工具，其中 port 将是部署应用程序的托管服务器的端口。

# java - 同一项目的多个不同变体的 Git 流程

> ID：13142659
> 
> 赞同：2
> 
> 时间：2012-10-30T15:43:48.570
> 
> 标签：java, git, version-control

假设有一个遗留 Java 项目 A。无论出于何种原因，该项目中都有一些机密的东西（例如密码、加密密钥、电子邮件）和/或特定于环境的东西（例如硬编码路径、服务器名称、电子邮件）。由于涉及的复杂性，似乎不可能将项目更改为不包含源代码中的信息。

在某个时候，一个新的外包团队加入了开发。鉴于上述情况，外包团队无法逐字访问项目源代码。他们有一个单独的开发环境，因此可以在他们的 VCS 中制作一个单独的项目副本，以解决问题（即所有需要的东西都被清理/更新，以便在他们的环境中工作）。我们称该版本为 A2。

工作流程通常包括与 A 和 A2 相关的两件事：

*   代码两边都可以改（即A和A2都可以改，A由原团队改，A2由外包团队改），包括有源代码变更冲突
*   有必要使这两个项目保持同步。不需要让它们一直保持同步，但重要的是要有一种相对轻松的方式来做到这一点。假设当有冲突需要解决时，这必须是一个手动过程

这个工作流程可以通过手动保留两个项目并在它们之间合并来实现。

相关问题：

*   如何使用 git 管理这两个版本，即与手动合并相比有哪些选项？
*   这是最好的设置还是有更好的选择？
*   对于新项目，将机密/特定于环境的事情排除在源代码控制之外的首选方式是什么（从某种意义上说——如果你有类似的情况，你会怎么做？）无论如何，这是一件好事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:27:41.240

这种方法会给你带来痛苦。您需要做的是使用`git filter-branch`消除服务器名称、密码并用非工作的通用形式替换 - 即，它不应该在任何地方运行！

接下来，设置涂抹/清理脚本以更改包含该信息的文件，以将值填充为您的解决方案仅在该本地系统上运行所需的值。与您的开发环境相比，您的生产环境中会有不同的参数。关键是要抽象出这些信息。

现在，与外包团队共享同一个存储库应该没有问题。在一个 repo 中管理分支与在 repo 之间清理提交要容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-24T11:50:33.530

@icyrock.com：这似乎是一场灾难的秘诀。

我的建议是将源代码与敏感数据分开。
请注意，这是一个更一般的建议，您可能希望安全地存储敏感数据并限制访问。

步骤：
1\. 从源代码中删除所有敏感数据，
2\. 创建一个包含该敏感数据的新 git 存储库
3\. 从原始源代码中引用敏感数据（这取决于编程语言，Java 不是我的专业领域)

此时，“清理”的源代码可以安全地与外包团队共享，他们将无法访问“敏感数据”存储库，但他们可能有一个类似的存储库，其中包含他们自己版本的敏感数据（即“演示”或“试用”或“非生产”路径、服务器名称、电子邮件）。
当然，如果外包团队应该能够在测试环境中测试他们的更改，则需要上述内容，我强烈认为这是必须的。他们在做测试，不是吗？

这将大大减少（如果不能从整体上消除）与正在并行积极开发的相同内容的 2 个副本之间的大混乱合并相关的任何问题。

# javascript - 是否允许多个元素都带有 addEventListener？

> ID：13142664
> 
> 赞同：0
> 
> 时间：2012-10-30T15:44:12.593
> 
> 标签：javascript, event-handling, delegation

我希望仅在单击正确的按钮时才调用指定的函数。

```
function callback(func){
func();
} 
```

主要功能及其结果：

尝试A：

```
document.addEventListener('DOMContentLoaded', function () {

document.getElementById('num1').addEventListener('click', callback(function1));
document.getElementById('num2').addEventListener('click', callback(function2));

}); 
```

结果：打开页面并单击任何按钮将运行 function1

尝试 B：

```
document.addEventListener('click', function () {

document.getElementById('num1').addEventListener('click', callback(function1));
document.getElementById('num2').addEventListener('click', callback(function2));

}); 
```

结果：单击页面上的任意位置将运行 function1

尝试 C：

```
document.getElementById('num1').addEventListener('click', callback(function1));
document.getElementById('num2').addEventListener('click', callback(function2)); 
```

结果：打开页面并点击按钮将运行function1并重新加载页面

尝试 D：

```
document.addEventListener('click', function () {

//The first ID doesn't exist
document.getElementById('imaginaryNum1').addEventListener('click', callback(function1));
document.getElementById('num1').addEventListener('click', callback(function1));
document.getElementById('num2').addEventListener('click', callback(function2));

}); 
```

结果：单击页面上的任意位置将运行 function1

尝试 E：

```
//The first ID doesn't exist
document.getElementById('imaginaryNum1').addEventListener('click', callback(function1));
document.getElementById('num1').addEventListener('click', callback(function1));
document.getElementById('num2').addEventListener('click', callback(function2)); 
```

结果：打开页面并点击按钮将运行function1并重新加载页面

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T15:51:01.717

当然，为什么不呢。但是，查看您的代码，您可能会更好地*委派事件*：[这并不难](http://www.sitepoint.com/javascript-event-delegation-is-easier-than-you-think/)。基本上，在 dom 中包含每个单独元素的级别上侦听所需的事件，并编写处理程序以检查触发事件的元素是否感兴趣，如果是：处理事件，如果没有，就返回。
您还缺少第三个参数，它`addEventListener`期望：一个布尔值，指示您要在捕获阶段或冒泡阶段处理事件的天气，[阅读有关 quirksmode 的几篇文章](http://www.quirksmode.org/blog/archives/2008/04/delegating_the.html)，特别是关于[不同阶段的文章](http://www.quirksmode.org/js/events_order.html)

我还注意到您正在使用处理程序函数做一些奇怪的事情，您会遇到一些问题。基本上，`addEventListener`作为第二个参数的期望是*对函数的引用*，您正在传递函数的返回值（在您的情况下未定义）。

```
function clickHandler(e)//accept event argument
{
    e = e || window.event;
    var target = e.target || e.srcElement;
    if (!target.id.match(/num[0-9]/))
    {//the clicked element doesn't have num1, num2, num3... as id, no need to handle this event
        return e;
    }
    //handle event. target is a reference to the clicked element
}
document.body.addEventListener('click',clickHandler,false);//<-- just the function name, no parentheses 
```

这就是您所需要的，一个可以处理所有点击事件的侦听器。

这是我发布的几个与事件委托有关的 JS 问题，看看代码，阅读我链接到的文章，你很快就会解决的。
[在 IE 中委派更改事件](https://stackoverflow.com/questions/11331203/javascript-how-to-simulate-change-event-in-internet-explorer-delegation)——在 IE<9 中使用[监听器来](https://stackoverflow.com/questions/11186750/memory-leak-risk-in-javascript-closures)
[避免内存泄漏`onload`](https://stackoverflow.com/questions/11186750/memory-leak-risk-in-javascript-closures)：我对使用委派增强 IE<9 中
[的事件原型](https://stackoverflow.com/questions/10617014/javascript-event-prototype-in-ie8)的问题的回答

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T15:50:42.680

`callback`立即执行传递给它的函数 - 所以它永远不会传递给`addEventListener`- 相反，`undefined`被传递。

`.addEventListener('someEvent', callback(functionN), false)`本质上是`.addEventListener('someEvent', (function(){ functionN() })(), false)`.

更改`.addEventListener('someEvent', functionN, false)`并查看会发生什么 - 如果您仍然收到错误，请查看 Web 浏览器的脚本面板并查看正在生成的错误。

# sas - 由于在 SAS 中滥用 %sysrput 导致的奇怪错误

> ID：13142665
> 
> 赞同：-2
> 
> 时间：2012-10-30T15:44:17.167
> 
> 标签：sas

我正在使用带有 SAS 9.1.3 的 AIX 6.1
我有一个在 PC SAS 9.1 中运行的
程序 该程序将重新提交给 unix。
现在，我将程序转换为完全在 AIX 6.1 中运行
该程序非常奇怪地失败了。
经查，是由于 %sysrput 造成的，
下面是简化版的程序：

```
options mPrint mLogic symbolGen ; 
%macro combine( startdate= , fullprefix= );
  data _null_ ;   
       call symput( 'plength',compress(length(compress("&fullprefix."))));
  run;  
  data _null_ ;   
       length balance 8\. ;  
              balance= 1 + &plength.; 
  run;  
%mEnd;  
data _null_ ;
     call symput( 'refdate', put(today(),date9.));   
run;
%put &refdate.;   
* -- If I forget to comment out the sysrput, the plength cannot be resolved -- ;
%sysrput refdate=&refdate.; 
%put &refdate.;   
%combine( startdate= "&refdate."d, fullprefix=a_filename_prefix ); 
```

（对不起，措辞没有意义，我只是想做一个演示。）

实际上，在 AIX 中，我不应该使用 %sysrput
我只是忘记将其注释掉。
但是，如果我忘记了这一点，那么 balance= 语句中的 plength 宏变量就会出错。这很奇怪。

要解决，只需将 %sysrput 注释掉即可。

但是，有谁知道为什么 %sysrput 会导致宏中的宏变量失败？

阿尔文·萧

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T17:29:32.480

从您的问题的简化版本中很难看出，但是如果您问为什么`plength`宏执行后宏变量不存在，那是因为您必须在宏代码本身中将其定义为**全局**。换句话说：

```
%macro combine( startdate= , fullprefix= );
%global plength;
...
%mend; 
```

是的，如果您使用`%SYSRPUT`不受 SAS/CONNECT 控制的 SAS 会话中的命令，您将收到 SAS 错误；并且得到一个 SAS 错误将使您的非交互式会话进入“语法检查”模式，在这种情况下，您程序中的其余语句将不会完全执行。

在将代码从 SAS/CONNECT 环境转换为“普通旧 SAS”时，最后一点是一个常见的误解。当您使用 SAS/CONNECT 时，连接的“服务器”端使用“-NOSYNTAXCHECK”选项启动。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-31T13:24:48.430

经过一些小测试的调查。也许这就是答案。

实际上，我将在所有批处理 SAS 程序中使用 OPTIONS ERRORABEND 来停止 SAS 以防出错。这非常适用于许多错误和功能。

%SYSRPUT 语句确实给出了错误消息，说... options DMR ...
但是程序并没有异常停止。
它没有给出任何消息说... OBS = 0 ...
它只是继续。所以，我只是“认为”这是一些小错误，就像 LIBNAME 一个不存在的目录一样，SAS 将“正常”继续。
（顺便说一句，我认为 SYSRPUT 错误已经默默地打开了 SYNTAX CHECK 模式，没有任何通知或提示。）

下一个 %PUT 语句是正常的，与前一个相同的值。
这误导我程序运行正常。

接下来的语句也是正常的。有许多 SYMBOLGEN、MPRINT 和 MLOGIC 消息。
所以，这进一步误导了我，程序运行得非常非常正常。

在调用 symput plength 语句之后，有一条 NOTE: Numeric values have been converted ...
这进一步误导了我程序运行正常。

直到现在（经过这么多看似正常的消息之后），还有一个 NOTE 说 SAS set option OBS=0 ...
（也许这个 NOTE 只会出现在 RUN 语句之后。）

这个 OBS=0 消息实际上是告诉 SAS 正在使用 SYNTAX CHECK 模式的提示。
也许这个 OBS=0 是由 SYSRPUT 错误引起的。但是，因为在 SYSRPUT 错误之后有很多看起来像正常的消息，我只是忽略了这个 OBS=0 消息。
实际上，调用符号非常简单，不应该导致任何错误。
这只会使情况更加复杂。

由于 SAS 处于 SYNTAX CHECK 模式，这就是为什么会在 balance 语句中的 plength 变量中出现类似错误的原因。

这就是整个故事。

无论如何，为了防止进入这种复杂和误导的情况，只要记住注释掉所有 %SYSRPUT 会做的事情。

# mysql - MySQL：对于每个项目，在不匹配的项目上返回 NULL 的所有子项目

> ID：13142670
> 
> 赞同：0
> 
> 时间：2012-10-30T15:44:30.380
> 
> 标签：mysql, null, subquery, row, parent

这个想法是：“想象一本字典”。

我有词和定义。我有语言和活动语言。

例如，这意味着我可以拥有 5 种语言，但其中只有三种处于活动状态。

所以我需要为字典中的每一个单词，3行，它的定义。

所以我需要这个：

```
word BLABLA -> ES: bla
            -> EN: brabra
            -> FR: bleh

word BLIBLI -> ES: NULL
            -> EN: blig
            -> FR: NULL 
```

...

如您所见，ES 和 FR 中的单词 BLIBLI 没有定义，我尝试过的每一种 JOIN 都给了我类似的东西：

```
word BLABLA -> ES: bla
            -> EN: brabra
            -> FR: bleh

word BLIBLI -> EN: blig 
```

所以，并不是所有的结果。我已经尝试了 RIGHT 和 LEFT JOINS，但没有任何效果......

我严格需要为每个匹配的单词获取尽可能多的行数：

就像是：

```
SELECT *
FROM active_languages al
LEFT JOIN word_definitions wd ON(al.language_id = wd.language_id); 
```

结果是第二个例子。

但是，如果我只是稍微修改一下最后一个查询：

```
SELECT *
FROM active_languages al
LEFT JOIN word_definitions wd ON(al.language_id = wd.language_id AND wd.word_id = 1); 
```

这基本上在连接上添加了一个单词 ID，然后会发生这样的事情：

```
word BLABLA -> ES: bla
            -> EN: brabra
            -> FR: bleh 
```

但当然，仅适用于单词 qith ID 1。

然后我需要遍历所有单词（实际上将是一组匹配的单词）。我知道这可能可以通过父查询来完成，该查询使用 WHERE 过滤处理所有单词，并将最后一个查询作为子查询，ID 单词与父查询链接。但我不知道该怎么做。它总是给我错误“MySQL 错误 #1054 - 未知列错误”...

请问我能做什么？

谢谢！

# python - IPython notebook 目录遍历

> ID：13142676
> 
> 赞同：4
> 
> 时间：2012-10-30T15:44:39.790
> 
> 标签：python, ipython

上一个问题“IPython Notebook 会话中的多个目录和/或子目录”询问了目录遍历。给出的答案是该功能即将推出。我还看到了一个命令行标志，它在特定目录中启动服务器。我再也找不到这个帖子了。官方文档中没有提到该标志。

设置工作目录的命令行标志是什么？

我们什么时候可以在 IPython Notebook 中看到目录功能？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T17:32:00.140

我相信您正在寻找的标志是`--notebook-dir=/home/foo/wherever`. 我通过运行发现了这一点`ipython notebook --help`。

不幸的是，在服务器运行时导航目录仍然“即将到来”。这是需要以正确方式完成的事情之一，而能够做到这一点的人（不包括我）相当忙碌。

# java - 重置搜索小部件 (SearchView) 值

> ID：13142678
> 
> 赞同：32
> 
> 时间：2012-10-30T15:44:40.690
> 
> 标签：java, android, kotlin, android-widget

我有 2 个活动：第一个`HomepageActiviy`，有一个搜索小部件，它使用另一个活动搜索数据，`SearchActivity`.

我想要做的是当我从`SearchActiviy`to返回时`HomepageActivity`，搜索小部件会折叠并带有空文本。

我试图做以下事情：

```
public class HomepageActivity extends Activity {
    @TargetApi(11)
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.projectslist, menu);

        if(Build.VERSION.SDK_INT >= 11) {
            SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
            SearchView searchView = (SearchView) menu.findItem(R.id.homepage_search).getActionView();
            ComponentName component = new ComponentName(this, SearchActivity.class);
            searchView.setSearchableInfo(searchManager.getSearchableInfo(component));
            searchView.setIconifiedByDefault(true);
            searchView.setQuery("", false);

        }

        return super.onCreateOptionsMenu(menu);
    }

    […]

    @TargetApi(11)
    @Override
    protected void onRestart() {
        super.onRestart();
        if(Build.VERSION.SDK_INT >= 11)
            invalidateOptionsMenu();
        launchAsynchronousImageDownload();
    }
} 
```

如果小部件很好地显示为折叠状态，小部件中的文本仍会记住搜索过的文本（在我重新打开小部件后）。如何重置小部件的文本？

谢谢你的帮助！;)

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-05-30T20:33:34.283

您还可以尝试以下方法：

```
searchView.setQuery("", false);
searchView.clearFocus(); 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2014-06-05T10:57:35.513

**这就是魔法**

`searchView.setQuery("", false);` **// 清除文本**

`searchView.setIconified(true);` **// 关闭搜索编辑器并重新制作搜索图标**

在**HomepageActivity**中，在 oncreate 函数之后插入 onSaveInstanceState 函数

每次打开新活动时都会触发此功能， **在打开新活动之前它将重置 Search Widget 的值**

```
 protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
         searchView.setQuery("", false);
        searchView.setIconified(true);
    } 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-04-17T01:44:51.840

这对我有用：

首先，我在活动顶部声明了菜单项变量：

```
private MenuItem mSearchMenuItem; 
```

我在 OnCreateOptionsMenu() 中定义了变量：

```
mSearchMenuItem = menu.findItem(R.id.action_search); 
```

我在 onResume() 中声明了 invalidateOptionsMenu()：

```
@Override
protected void onResume() {
    invalidateOptionsMenu();
    super.onResume();
} 
```

最后，我在 onPrepareOptionsMenu() 中的菜单项上调用了 collapseActionView()。

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    mSearchMenuItem.collapseActionView();

    return super.onPrepareOptionsMenu(menu);
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-08-21T20:15:48.087

```
searchView.setQuery("", false);
searchView.setIconified(false); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-04-15T18:57:22.120

我也有这个问题，如果我把它放在 onPrepareOptionsMenu 中它就可以了。

```
@Override
public boolean onPrepareOptionsMenu (Menu menu) {
     SearchView searchView = (SearchView) menu.findItem(R.id.action_search).getActionView();
     searchView.setQuery("", false);
     // rest of code...
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-10-19T11:29:31.950

## 科特林

这是一个更清洁的解决方案，它修复了以下问题：

1.  屏幕旋转后显示过滤列表的问题。
2.  当用户切换到其他应用程序并返回时显示过滤列表的问题。
3.  用户返回时搜索菜单向左移动的问题。

如果您无效，则无需图标化，它会自动完成。

* * *

```
override fun onSaveInstanceState(outState: Bundle) {
    super.onSaveInstanceState(outState)
    searchView.setQuery("", false)
    (activity as YourActivity).invalidateOptionsMenu()
} 
```

确保更改`YourActivity`为您拥有 Fragment 的 Activity 名称。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-30T17:37:52.027

刚刚找到了一种丑陋的方法来使其工作（阅读评论以查看差异）：

```
public class HomepageActivity extends Activity {
    // Declaring SearchView as an instance object
    private SearchView searchView;

    @TargetApi(11)
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.projectslist, menu);

        if(Build.VERSION.SDK_INT >= 11) {
            SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
            // Using instance var instead of local var
            searchView = (SearchView) menu.findItem(R.id.homepage_search).getActionView();
            ComponentName component = new ComponentName(this, SearchActivity.class);
            searchView.setSearchableInfo(searchManager.getSearchableInfo(component));
            searchView.setIconifiedByDefault(true);
            // Setting query is not anymore required
            //searchView.setQuery("", false);
        }

        return super.onCreateOptionsMenu(menu);
    }

    […]

    @TargetApi(11)
    @Override
    protected void onRestart() {
        super.onRestart();
        // Do not need to recreate menu
        /*if(Build.VERSION.SDK_INT >= 11)
            invalidateOptionsMenu();*/
        if(Build.VERSION.SDK_INT >= 11) {
            // Calling twice: first empty text field, second iconify the view
            searchView.setIconified(true);
            searchView.setIconified(true);
        }
        launchAsynchronousImageDownload();
    }
} 
```

我认为这很丑陋，所以如果有人有更好的主意，请告诉我:)

# php - 在 PHP 中处理可变数量的表单字段

> ID：13142681
> 
> 赞同：0
> 
> 时间：2012-10-30T15:44:43.217
> 
> 标签：php, arrays, forms, variables

我目前正在开发一个最小的商店（-ish）脚本，该脚本必须处理可变数量的表单输入字段（下拉列表）。

每个“文章”都有一个标准选项列表，如尺寸、颜色和材料。除此之外，每篇文章都可以有不定数量的“附加”。每个附加功能都有一个单独的名称。

例如，文章 A 的页面将从数据库中创建，并具有尺寸、颜色、材料、长度和材料（电镀）选项。文章 B 的文章页面可以显示选项尺寸、颜色、材料和版本。最后，文章 C 的页面可能只显示四个标准/最小选项。

现在我需要一种使用中央/单个脚本读取和处理所有选项的方法。它应该创建一个选项名称和选定值的简单列表。所以可以这样显示：

```
Article B
- size: huge
- color: hot pink
- material: cardboard
- edition: Super Hyper Special Awesome Edition 
```

我知道有一种方法可以使用字段数组来“捕获”所有值，但是如果我理解正确，我会丢失选项的名称（因为它们都会被命名为相同的名称来创建数组）？所以我只有“巨大”而不是“大小：巨大”？

如果有人能指出我正确的方向，那将对我有很大帮助。（我觉得我应该看到正确的方法，但我现在太盲目了......或者太愚蠢了）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:56:02.470

只需遍历 $_POST (或 $_GET) ：

```
foreach($_POST as $name => $value)
{
   echo "$name : $value <br />";
} 
```

然后你可以做不同的事情，如果`$name`知道与否

# .net - Application.Restart VS2010 中的 ClickOnce VB.net 应用程序，重新启动与调试器分离

> ID：13142684
> 
> 赞同：1
> 
> 时间：2012-10-30T15:44:56.013
> 
> 标签：.net, vb.net, visual-studio, clickonce, visual-studio-debugging

我有一个在 VS2010 IDE 中调试的 ClickOnce winforms 应用程序。我有一个包罗万象的未处理异常处理程序，它还为用户提供了重新启动执行的选项。调用 Application.Restart() 工作正常，但在调试时，它会重新启动，与调试器分离。

有没有办法让VS在重启时自动附加它？如果是这样，怎么做？如果不是，为什么不呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:49:52.700

根据我之前对`Application.Restart` [此处](https://stackoverflow.com/a/12551703/256431)的评论，它在再次启动应用程序时并没有做任何特别的事情，因此您只需确保将 Visual Studio 配置为调试“子”进程。（这可能不是托管调试的选项。）

# caching - 从内核空间映射未缓存的缓冲区

> ID：13142688
> 
> 赞同：3
> 
> 时间：2012-10-30T15:45:04.530
> 
> 标签：caching, mmap

我正在为嵌入式 linux 机器编写设备驱动程序，我有下一个问题：是否可以通过设备驱动程序在内核空间中分配缓冲区，而不是通过应用程序来分配 mmap() 以便在读取时不会有任何缓存/从驱动程序和程序写入缓冲区，即程序将立即看到驱动程序写入该缓冲区的内容，反之亦然。

据我所知 - 打开带有 O_DIRECT 标志的设备文件不是用于 mmap（它用于 read() 和 write() 系统调用），我在一个电子邮件列表中注意到标志 MAP_UNCAHED 可能很有用 - 但它不是为我定义的拱。

出于性能目的，我需要未缓存的缓冲区 - 来自硬件的数据被放置到缓冲区，然后程序使用它一次 - 缓冲区中的旧数据将不会被使用，所以缓存在那里没有用。

# php - jQuery AJAX返回变量+值可能吗？

> ID：13142693
> 
> 赞同：0
> 
> 时间：2012-10-30T15:45:14.617
> 
> 标签：php, jquery, ajax, variables

我正在通过 jQuery.ajax() 提交表单

现在我的**PHP**脚本正在检查特定输入字段是否为空，例如：

```
$is_error = $user->is_error;

if($is_error !=0)
 { 
    echo $is_error;
 } 
```

回到我的 jQuery.ajax() ，我想在 jQuery.ajax() 调用的 sucess *:*部分检查 $error 的值是否为真。

```
 jQuery.ajax({
           type: "POST",
           url: "edit.php", 
           data: jQuery("#idForm").serialize(),
           success: function(data)
       {   

        // show response from the php script if there is an error message
        // like:
        //         if(is_error) {show specific error message}
        //         else {show everything positive message}

       }
    }); 
```

是否可以在那里检查 PHP 变量的值？像如果/否则？

最好的祝福！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:47:41.870

```
if($_POST['name'] == "") 
  {
    $error = 1;
  }
else 
  {
    $error = 0;
  }
echo $error; 
```

此代码将回显该值。

```
 jQuery.ajax({
           type: "POST",
           url: "edit.php", 
           data: jQuery("#idForm").serialize(),
           success: function(data)
       {   

        // show response from the php script if $error == 0 or $error == 1.
        if(data==1)
....
       }
    }); 
```

然后检查返回的值是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:46:38.667

使用您的变量数据，您可以从 PHP 中返回值。在您的范围内成功后，您可以检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T15:48:01.853

您必须回显错误，以便它可以作为数据返回。ajax 只返回在 html 中创建的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T15:49:31.427

在这种情况下，我会使用以下内容：

```
if($_POST['name'] == "") 
  {
    $error = 1;
  }
else 
  {
    $error = 0;
  }

echo $error; 
```

jQuery.ajax({ type: "POST", url: "edit.php", data: jQuery("#idForm").serialize(), success: function(response) {

```
 if(response == 1){
        alert('Error');
    }else{
        alert('No error');
    }

   }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T15:49:42.850

我认为您应该在 php 脚本中尝试以下操作

```
echo $error; 
```

然后在 jquery.ajax() 中做

```
success: function(data){
 //data is $error
} 
```

# java - 从文本文件中读取数据并将其保存到二维数组中

> ID：13142696
> 
> 赞同：0
> 
> 时间：2012-10-30T15:45:22.707
> 
> 标签：java, jsp

我是 Java 编程新手...我正在尝试从文本文件中读取数据并将其保存到二维数组中。所以基本上，程序将接收参数（IP）并寻找具有相同IP号的文件。程序将读取每一行并存储到二维数组中。

我的尝试：

```
String ipNum = request.getParameter("ipNum");
String root = getServletContext().getRealPath("/");
String dailyPath = root + "\\" + ipNum +".txt";
int[][] myarray = new int[3][6];
    BufferedReader br = new BufferedReader(new FileReader(dailyPath));   
    String line = " ";
    String [] temp;
    while ((line = br.readLine())!= null){ 
        temp = line.split(" "); 
        for(int i = 0; i<myarray.length; i++) {
            for (int j = 0; j<myarray.length; j++) {    
                myarray[i][j] = Integer.parseInt(temp[i]);
            }
        }
    } 
```

数据：

```
CPU 30 30 30 30 30 30
RAM 70 70 70 70 70 70
HAR 80 80 80 80 80 80
NET 100 100 100 100 100 100 
```

我遇到的问题是，当我调用数组时，我总是得到 100 或 0（假设为空）

所以例如 myarray[1][2] 应该输出 30 但我得到 100 myarray [2][4] = 70 但我得到 100...

在过去的几个小时里，我试图玩弄代码，但我无法弄清楚......我的整个代码是错误的还是什么？

感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:57:31.170

是的，你迭代了两次，因此用最后一个值填充你的数组......试试这个代码：

```
int i = 0;
while ((line = br.readLine())!= null){ 
    temp = line.split(" "); 
    for (int j = 0; j<myarray[i].length; j++) {    
        myarray[i][j] = Integer.parseInt(temp[j]);
    }
    i++;
} 
```

希望这可以帮助...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T16:01:29.020

除了 Joshs 的话，您还错误地设置了终止条件。

```
for(int i = 0; i< myarray.length; i++) {
    for (int j = 0; j< myarray[i].length; j++) {    
         myarray[i][j] = Integer.parseInt(temp[i]);
    }
} 
```

这样，您可以遍历数组，但不能用它来解决您的问题。相反，您需要使用 1 个 while 循环和 1 个 for 循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T15:50:55.330

您的“while”循环和您的第一个“for”循环正在执行类似的任务——对于您读取的每一行，您都在遍历数组中的每一行并用正在读取的行填充它的列。每个值都是 100，因为您读取的最后一行是 100。

我建议删除第一个'for'循环，声明'int i = 0;' 在'while'循环之前，以及在底部（但在内部）的'i++' for 循环。

@Vivek 提出了一个很好的观点，即您需要为您的 j 计数器测量 'myArray[ i ].length' 。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T15:56:55.293

在我看来，您正在阅读每一行文本，然后将该行解析为二维数组。这并不完全正确，因为每一行都可以视为一行。也许你可以为你在循环中读取的每一行使用一个计数器，`while ((line = br.readLine())!= null)`然后只在计数器索引处读入你的二维数组的行......就像这样：

```
int rowCounter = 0;
while ((line = br.readLine())!= null) {
    for(int i = 0; i<myarray.length; i++)
        myarray[rowCounter][i] = Integer.parseInt(temp[i]);
    rowCounter++;
} 
```

附带说明一下，如果您确实想索引到多维数组，那么您也会遇到一个问题。在您的两个循环中，您都在迭代，直到达到最大行数。对于遍历列的 j 循环，这可能会导致问题。相反，当使用 2D 循环时，请尝试：

```
for(int i = 0; i < array.Length; i++)
    for(int j = 0; j < array[0].Length; j++)
        //Do some stuff 
```

# jquery - 带有 if/else 语句的 ESCAPE 键 - jQuery

> ID：13142697
> 
> 赞同：1
> 
> 时间：2012-10-30T15:45:28.720
> 
> 标签：jquery, function, if-statement, key

我想让我的“esc”键根据当前情况做一些不同的事情。例如，我有一个显示工具栏的按钮，我想要“esc”键隐藏它，但我也想要“esc” '-key 打开一个用于关闭当前页面的框，如果再次按下 'esc'-键，它应该隐藏关闭框。

我以为会是这样，但它只打开了关闭框。当我再次输入“esc”时它不会关闭它，它也不会在显示工具箱时隐藏它。它只是打开顶部的关闭框。

```
function esc_key_command() {
    if (toolboxIsShown) {
        $('.tool_box').hide();
        var toolboxIsShown = false;
    } else if (CloserIsShown) {
        $('.closer').stop().fadeOut(200);
        var CloserIsShown = false;
    } else {
        $('.closer').stop().fadeIn(200);
        var CloserIsShown = true;
    }
} 
```

我知道这与调用“esc”键无关，因为它至少在键入键时会返回一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:48:12.693

`var`声明是问题所在。变量的范围是本地的，所以每次调用函数时，它们都会被*重置*。

如果你想用变量来做，你需要将它们设置在函数范围之外。

为什么在可以检查状态时使用变量

```
function esc_key_command() {
    var tools = $('.tool_box');
    var closer = $('.closer');
    if (tools.is(":visible")) {
        $('.tool_box').hide();
    } else if (closer.is(":visible")) {
        $('.closer').stop().fadeOut(200);
    } else {
        $('.closer').stop().fadeIn(200);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:51:30.603

它看起来像一个范围问题。该变量`CloserIsShown`是在`esc_key_command`函数内部创建的，因此在您运行比较时它还不存在。尝试在函数外部设置变量并在函数`var`内部重新分配值时删除命令。

# c# - 对接封装控件

> ID：13142701
> 
> 赞同：1
> 
> 时间：2012-10-30T15:45:36.630
> 
> 标签：c#, winforms, controls, windows-forms-designer, docking

我在派生中有一个封装的控件`TabPage`，我无法将它停靠到`MainForm`包含派生的表单`TabPage`。

我已经`TabPage`正确添加了 和 控件，并且它们显示在`MainForm`. 但是，控件未正确停靠（样式：填充）。您可以通过调整表单大小来验证这一点。

我已经在派生的构造函数`_control.Dock = System.Windows.Forms.DockStyle.Fill`中设置了属性。`_control.Anchor = Left | Right | Top | Bottom``TabPage`

以下是代码示例：

```
public class DerivedTab : TabPage {
    public DerivedTab(){
        ...
        _control= new BrightIdeasSoftware.TreeListView();
        this.Controls.Add(this._control);
        _control.Anchor = System.Windows.Forms.AnchorStyles.Left | System.Windows.Forms.AnchorStyles.Right | System.Windows.Forms.AnchorStyles.Top | System.Windows.Forms.AnchorStyles.Bottom;
        _control.Dock = System.Windows.Forms.DockStyle.Fill;
        ...
    }
} 
```

在 中`MainForm`，这是在运行时创建派生选项卡的函数：

```
 private DerivedTab CreateTab(string name)
    {
        DerivedTab tab = new DerivedTab(this, name);
        tab.SuspendLayout();

        MainTab.Controls.Add(tab);
        return tab;
    } 
```

无论如何，我使用 Visual Studio Designer 生成了这段代码，并且控件正确停靠。然后，我为标签页创建了一个类（因为我需要许多不同数量的这些标签）并将与标签页相关的所有内容复制到`CreateTab`函数中。我将任何与标签页属性相关的内容移到了它的构造函数中。我将控件封装在派生中`TabPage`，并在派生标签页中移动与控件相关的所有内容。

那么，我错过了什么？是否可以在不实现事件处理函数的情况下对接封装的控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T13:55:46.337

我找到了解决我自己问题的方法。在 TabControl 添加 TabPage 后，必须调用 ResumeLayout 才能使 TabPage 正确停靠。

```
private DerivedTab CreateTab(string name)
{
    DerivedTab tab = new DerivedTab(this, name);
    tab.SuspendLayout();

    MainTab.Controls.Add(tab);
    tab.ResumeLayout();
    return tab;
} 
```

# javascript - 脚本不适用于 chrome，仅适用于 ie 和 firefox

> ID：13142712
> 
> 赞同：1
> 
> 时间：2012-10-30T15:46:15.930
> 
> 标签：javascript, html, browser

我寻找了一个 javascript 脚本，它将改变 iframe 的高度，根据其中加载的页面，我找到了一个代码，但它仅适用于 IE 和 FireFox.. 我应该改变什么？

```
 <SCRIPT type="text/javascript" LANGUAGE="javascript">
    function reSize()
    {
        try{    

        var oBody   =   ifrm.document.body;
        var oFrame  =   document.getElementById("ifrm");

        oFrame.style.height = oBody.scrollHeight + (oBody.offsetHeight - oBody.clientHeight);

        }
        //An error is raised if the IFrame domain != its container's domain
        catch(e)
        {
        window.status = 'Error: ' + e.number + '; ' + e.description;
        }
    }

</SCRIPT> 
```

iframe 代码：

```
<iframe width=940px onload=reSize() src="html/guides.html" id="ifrm" name="iframe_main" frameborder="0"></iframe> 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:52:17.803

对于初学者： `document.all`已经过时了很长一段时间。

您应该使用[getElementById](http://www.w3schools.com/jsref/met_doc_getelementbyid.asp)。

此外，如果 iframe 不在您的域中（例如，您在 www.mydomain.com 并且 iframe 从 www.someotherdomain.com 加载内容），您将无法使用正常的安全设置获取 iframe 的 document.body大多数现代浏览器...[有关详细信息，请参见此处](https://stackoverflow.com/questions/6170925/get-dom-content-of-cross-domain-iframe)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:55:09.853

尝试`var oBody = ifrm.contentDocument.body || ifrm.contentWindow.document.body;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T16:00:25.787

给你的 iframe 一个 id。我给了“myIframe”，然后在你的函数中使用这一行而不是你的。它无处不在：

```
document.getElementById("myIframe").setAttribute("height",600)​; 
```

# html - 用远程文件填充 Html 表

> ID：13142715
> 
> 赞同：0
> 
> 时间：2012-10-30T15:46:35.903
> 
> 标签：html, linux, remote-access

我想创建一个 HTML 页面，该页面将包含一个表格，该表格将使用来自远程 Linux 服务器上的 2 个 .txt 文件的信息填充自身。或者使用来自这两个 .txt 文件的相同信息填充该远程服务器上的 html 页面，然后使用 apache 的网络服务器访问该 html 页面。

尽可能基本的东西会很好，但我可以理解使用 html 是否复杂

老实说，任何帮助都会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:03:03.983

我会亲自在`PHP`. 您可以将文件读取`echo`到表格中。然后，您可以将文件的行用于您想要的任何内容。我在解释每个步骤时都发表了评论。您所要做的就是更改`$filepath`指向您的文本文件：

**已编辑**：编辑代码以添加 OG 海报在评论中提到的约束。可能有一种更优化的方式来执行您的任务，但是如果您是 PHP 新手，这很有效，并且应该向您介绍一些新概念

```
<?php
    $filepath = 'files/the_file.txt';
    if (file_exists($filepath)) {
        $file = fopen($filepath, 'r');
        echo '<table border=1>';
        while (!feof($file)) {
            $line = fgets($file);
            $first_char = $line[0];
            if ($first_char != '*' && $first_char != '^' && trim($line) != '') {
                if (strstr($line, '|')) {
                    $split = explode('|', $line);
                    echo '<tr>';
                    foreach($split as $line) {
                        echo '<td>'.$line.'</td>';
                    }
                    echo '</tr>';
                } else {
                    echo '<tr><td>'.$line.'</td></tr>';
                }
            }
        }
        echo '</table>';
    } else {
        echo 'the file does not exist';
    }
?> 
```

我会尽力逐行解释它，而不是用评论淹没脚本：

1.  设置你的文件路径
2.  如果文件存在，请继续。如果不是，则抛出位于脚本底部的错误
3.  打开文件
4.  创建表 (' `<table>`')
5.  在读取文本文件时，执行一系列操作：首先，获取行。如果该行的第一个字符是 * 或 ^，或者当该行被修剪时没有字符，则完全跳过它。否则，继续
6.  如果该行包含一个 | 字符，拆分 ( `explode`) 行中的所有 | 人物。使用此拆分内容数组，并为每条内容`echo`在现有行中使用当前内容创建一个新列。否则没有| 找到，您可以正常地将行回显到一行
7.  完成后，结束表格（' `</table>`'）

**编辑#2：**我发布的原始解决方案：

```
<?php
    $filepath = '/var/www/files/the_file.txt';
    if (file_exists($filepath)) {
        $file = fopen($filepath, 'r');
        echo '<table border=1>';
        while (!feof($file)) {
            $line = fgets($file);
            echo '<tr><td>'.$line.'</td></tr>';
        }
        echo '</table>';
    } else {
        echo 'the file does not exist';
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:53:14.640

HTML 无能为力，HTML 是一种表示格式。

PHP、Javascript、BASH 可以以非常不同的方式完成这项工作：

*   PHP：服务器调用2个远程文件，将组装好的html文件输出到网页中，然后发送给客户端

*   Javascript：页面本身调用 2 个文件并自行添加它们。

*   Bash + CURL：一个 BASH（或 PHP、Python...）脚本创建一个 .html 文件，其中包含 2 个文件的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T17:24:00.547

如果您可以预先创建 HTML 而不是动态地创建 HTML，其中之一可能会对您有所帮助。这些脚本将 CSV 作为输入并输出 HTML 表格：

[http://stromberg.dnsalias.org/svn/to-table/](http://stromberg.dnsalias.org/svn/to-table2/)

[http://stromberg.dnsalias.org/svn/to-table2/](http://stromberg.dnsalias.org/svn/to-table2/)

# reflection - Quartz.NET 作为在 GAC 中具有依赖关系的 Windows 服务

> ID：13142718
> 
> 赞同：1
> 
> 时间：2012-10-30T15:46:41.867
> 
> 标签：reflection, gac, quartz.net, quartz.net-2.0

我已经将 Quartz 设置为 Windows 服务（如果重要，则使用 AdoJobStore）并设法通过远程添加/调度位于我自己的项目 Company.Project 中的自定义 IJob 与 ASP.NET 站点进行通信。服务层。

这花了我一段时间，但只要在 Windows 服务文件夹和网站 bin 文件夹中都存在 Company.Project.ServiceLayer.dll，我的开发机器上一切正常。但是在生产环境中，需要将 Company.Project.ServiceLayer.dll 添加到 GAC。我试图在我的开发机器上模拟这个，从服务文件夹中删除 Company.Project.ServiceLayer.dll 并使用 gacutil 将其添加到 GAC 中。不幸的是，现在当服务启动并尝试实例化我的 IJob 实例时，它无法从 GAC 加载程序集并抛出异常“无法加载文件或程序集”（下面的详细信息）。

我猜 Quartz 在 [QRTZ_JOB_DETAILS].[JOB_CLASS_NAME] 字段中使用反射和 DB 值来尝试加载类？我可能完全错了，但因为这个值（“Company.Product.ServiceLayer.SchedulerJobs.QuintilesEasyJob, Company.Product.ServiceLayer”）只是类的部分描述（它缺少版本和公钥令牌）不是意味着.NET在进行反射时不会查看GAC，因为只有强命名的dll才能存在？这就是我的 GAC 设置现在失败的原因吗？Quartz Windows 服务可以与 GAC 中的 dll 一起使用吗？

非常感谢任何帮助。

* * *

```
2012-10-30 11:20:20,203 [4560] ERROR Topshelf.Model.ServiceCoordinator.OnServiceFault(:0) - Fault on quartz.server: Topshelf.Exceptions.ServiceControlException
Service Start Exception: quartz.server (IQuartzServer)
   at Topshelf.Builders.LocalServiceBuilder`1.StartService(T service)
   at Topshelf.Model.LocalServiceController`1.CallAction[TBefore,TComplete](String text, Action`1 callback, Func`1 before, Func`1 complete)
HelpLink:

Quartz.SchedulerConfigException
Failure occured during job recovery.
   at Quartz.Impl.AdoJobStore.JobStoreSupport.SchedulerStarted() in c:\Work\OpenSource\quartznet\src\Quartz\Impl\AdoJobStore\JobStoreSupport.cs:line 591
   at Quartz.Core.QuartzScheduler.Start() in c:\Work\OpenSource\quartznet\src\Quartz\Core\QuartzScheduler.cs:line 440
   at Quartz.Server.QuartzServer.Start()
   at Topshelf.Builders.LocalServiceBuilder`1.StartService(T service)
HelpLink:

Quartz.JobPersistenceException
Couldn't store trigger 'default.remotelyAddedTrigger' for 'default.remotelyAddedJob' job: Could not load file or assembly 'Company.Product.ServiceLayer' or one of its dependencies. The system cannot find the file specified.
   at Quartz.Impl.AdoJobStore.JobStoreSupport.StoreTrigger(ConnectionAndTransactionHolder conn, IOperableTrigger newTrigger, IJobDetail job, Boolean replaceExisting, String state, Boolean forceState, Boolean recovering) in c:\Work\OpenSource\quartznet\src\Quartz\Impl\AdoJobStore\JobStoreSupport.cs:line 1064
   at Quartz.Impl.AdoJobStore.JobStoreSupport.DoUpdateOfMisfiredTrigger(ConnectionAndTransactionHolder conn, IOperableTrigger trig, Boolean forceState, String newStateIfNotComplete, Boolean recovering) in c:\Work\OpenSource\quartznet\src\Quartz\Impl\AdoJobStore\JobStoreSupport.cs:line 876
   at Quartz.Impl.AdoJobStore.JobStoreSupport.RecoverMisfiredJobs(ConnectionAndTransactionHolder conn, Boolean recovering) in c:\Work\OpenSource\quartznet\src\Quartz\Impl\AdoJobStore\JobStoreSupport.cs:line 814
   at Quartz.Impl.AdoJobStore.JobStoreSupport.RecoverJobs(ConnectionAndTransactionHolder conn) in c:\Work\OpenSource\quartznet\src\Quartz\Impl\AdoJobStore\JobStoreSupport.cs:line 760
   at Quartz.Impl.AdoJobStore.JobStoreSupport.<>c__DisplayClass74.<ExecuteInNonManagedTXLock>b__73(ConnectionAndTransactionHolder conn) in c:\Work\OpenSource\quartznet\src\Quartz\Impl\AdoJobStore\JobStoreSupport.cs:line 3411
   at Quartz.Impl.AdoJobStore.JobStoreSupport.ExecuteInNonManagedTXLock(String lockName, Func`2 txCallback) in c:\Work\OpenSource\quartznet\src\Quartz\Impl\AdoJobStore\JobStoreSupport.cs:line 3481
   at Quartz.Impl.AdoJobStore.JobStoreSupport.SchedulerStarted() in c:\Work\OpenSource\quartznet\src\Quartz\Impl\AdoJobStore\JobStoreSupport.cs:line 581
HelpLink:

System.IO.FileNotFoundException
Could not load file or assembly 'Company.Product.ServiceLayer' or one of its dependencies. The system cannot find the file specified.
   at System.RuntimeTypeHandle.GetTypeByName(String name, Boolean throwOnError, Boolean ignoreCase, Boolean reflectionOnly, StackCrawlMarkHandle stackMark, IntPtr pPrivHostBinder, Boolean loadTypeFromPartialName, ObjectHandleOnStack type)
   at System.RuntimeTypeHandle.GetTypeByName(String name, Boolean throwOnError, Boolean ignoreCase, Boolean reflectionOnly, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean loadTypeFromPartialName)
   at System.Type.GetType(String typeName, Boolean throwOnError)
   at Quartz.Simpl.SimpleTypeLoadHelper.LoadType(String name) in c:\Work\OpenSource\quartznet\src\Quartz\Simpl\SimpleTypeLoadHelper.cs:line 51
   at Quartz.Impl.AdoJobStore.StdAdoDelegate.SelectJobDetail(ConnectionAndTransactionHolder conn, JobKey jobKey, ITypeLoadHelper loadHelper) in c:\Work\OpenSource\quartznet\src\Quartz\Impl\AdoJobStore\StdAdoDelegate.cs:line 788
   at Quartz.Impl.AdoJobStore.JobStoreSupport.StoreTrigger(ConnectionAndTransactionHolder conn, IOperableTrigger newTrigger, IJobDetail job, Boolean replaceExisting, String state, Boolean forceState, Boolean recovering) in c:\Work\OpenSource\quartznet\src\Quartz\Impl\AdoJobStore\JobStoreSupport.cs:line 1041 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T05:40:01.080

StdAdoDelegate 上有一个可用的扩展点，方法 GetStorableJobTypeName 可以被覆盖以包含版本和强名称信息。目前没有配置开关来改变行为，因此您需要扩展 SqlServerDelegate（如果使用 SQL Server）。

因此，您的派生类中的新版本将类似于以下内容：

```
protected override string GetStorableJobTypeName(Type jobType)
{
    return jobType.AssemblyQualifiedName;
} 
```

默认情况下，Quartz 仅使用仅包含类型和程序集名称的程序集限定名称来减少版本控制问题。但请注意它们，当类型中包含版本信息时，如果 dll 版本号发生更改，您需要手动修复数据库数据或创建程序集版本重定向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T16:44:25.030

我终于自己搞定了这个。通过将部分名称添加到 app.config 中的完整/强名称映射，我能够让服务在 GAC 中查找，如下所示：

```
 <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <qualifyAssembly partialName="Company.Product.ServiceLayer" fullName="Company.Product.ServiceLayer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=125c3f237e3350e4"/>
    </assemblyBinding>
  </runtime> 
```

# oracle - Oracle 11g 升级后无法运行自动优化器统计信息收集作业

> ID：13142721
> 
> 赞同：2
> 
> 时间：2012-10-30T15:46:46.153
> 
> 标签：oracle, oracle11g, scheduler

我们最近将 10g 服务器升级到 11g (11.2.0.3.0)，我发现应该通过自动维护任务功能来处理统计信息收集 - 特别是“自动优化器统计信息收集”作业。

但是，自从我们升级（5 天前）以来，我还没有看到任何这些作业在调度程序中运行，并且 OEM 中的自动维护任务界面没有显示已运行的作业。DBA_AUTOTASK_JOB_HISTORY 没有行，我看不到调度程序选项卡或 OEM 中运行的任何统计作业的历史记录，但据我所知，系统配置正确：

```
 SELECT col
         , val
      FROM ( SELECT *
               FROM DBA_AUTOTASK_CLIENT
              WHERE CLIENT_NAME = 'auto optimizer stats collection'
           )
   UNPIVOT (    val                            
            FOR col                              
             IN ( CLIENT_NAME
                , STATUS
                , CONSUMER_GROUP
                , CLIENT_TAG
                , PRIORITY_OVERRIDE
                , ATTRIBUTES
                , WINDOW_GROUP
                , SERVICE_NAME
                )
           );

  COL               VAL
  ----------------- ---------------------------------------
  CLIENT_NAME       auto optimizer stats collection
  STATUS            ENABLED
  CONSUMER_GROUP    ORA$AUTOTASK_STATS_GROUP
  CLIENT_TAG        OS
  PRIORITY_OVERRIDE INVALID
  ATTRIBUTES        ON BY DEFAULT, VOLATILE, SAFE TO KILL
  WINDOW_GROUP      ORA$AT_WGRP_OS

  SQL> select * from DBA_AUTOTASK_WINDOW_CLIENTS;

  WINDOW_NAME                    WINDOW_NEXT_TIME                                                            WINDO AUTOTASK OPTIMIZE SEGMENT_ SQL_TUNE HEALTH_M
  ------------------------------ --------------------------------------------------------------------------- ----- -------- -------- -------- -------- --------
  MONDAY_WINDOW                  01-NOV-12 10.00.00.000000 AM AMERICA/NEW_YORK                               FALSE ENABLED  ENABLED  DISABLED ENABLED  DISABLED
  TUESDAY_WINDOW                 01-NOV-12 10.00.00.000000 AM AMERICA/NEW_YORK                               FALSE ENABLED  ENABLED  DISABLED ENABLED  DISABLED
  WEDNESDAY_WINDOW               01-NOV-12 10.00.00.000000 AM AMERICA/NEW_YORK                               FALSE ENABLED  ENABLED  DISABLED ENABLED  DISABLED
  THURSDAY_WINDOW                01-NOV-12 10.00.00.000000 AM AMERICA/NEW_YORK                               FALSE ENABLED  ENABLED  DISABLED ENABLED  DISABLED
  FRIDAY_WINDOW                  01-NOV-12 10.00.00.000000 AM AMERICA/NEW_YORK                               FALSE ENABLED  ENABLED  DISABLED ENABLED  DISABLED
  SATURDAY_WINDOW                01-NOV-12 10.00.00.000000 AM AMERICA/NEW_YORK                               FALSE ENABLED  ENABLED  DISABLED ENABLED  DISABLED
  SUNDAY_WINDOW                  01-NOV-12 10.00.00.000000 AM AMERICA/NEW_YORK                               FALSE ENABLED  ENABLED  DISABLED ENABLED  DISABLED 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-16T21:07:48.480

# 原因

只是想为所有将来面临这个问题的人分享解决方案。

当您关闭数据库以进行维护等时，当调度程序窗口之一处于活动状态并且相应的自动维护作业正在运行时，会导致此问题。因此，当数据库关闭时，相应的作业被维护窗口保持活动状态杀死。

这可以通过以下查询来确认。

```
SQL> select window_name,active from DBA_SCHEDULER_WINDOWS;

WINDOW_NAME                    ACTIV
------------------------------ -----
WEEKNIGHT_WINDOW               FALSE
WEEKEND_WINDOW                 FALSE
MONDAY_WINDOW                  FALSE
TUESDAY_WINDOW                 FALSE
WEDNESDAY_WINDOW               FALSE
THURSDAY_WINDOW                FALSE
FRIDAY_WINDOW                  FALSE
SATURDAY_WINDOW                TRUE         <-- This is still active.
SUNDAY_WINDOW                  FALSE 
```

以下查询显示当前没有自动统计作业正在运行。

```
SQL> select CLIENT_NAME,JOB_NAME,JOB_SCHEDULER_STATUS
  2  from DBA_AUTOTASK_CLIENT_JOB
  3  where client_name = 'auto optimizer stats collection'; 
```

未选择任何行

# 解决方案

关闭活动窗口。

```
SQL> EXECUTE DBMS_SCHEDULER.CLOSE_WINDOW ('SATURDAY_WINDOW'); 
```

PL/SQL 过程成功完成。

```
SQL> select window_name,active from DBA_SCHEDULER_WINDOWS;

WINDOW_NAME                    ACTIV
------------------------------ -----
WEEKNIGHT_WINDOW               FALSE
WEEKEND_WINDOW                 FALSE
MONDAY_WINDOW                  FALSE
TUESDAY_WINDOW                 FALSE
WEDNESDAY_WINDOW               FALSE
THURSDAY_WINDOW                FALSE
FRIDAY_WINDOW                  FALSE
SATURDAY_WINDOW                FALSE
SUNDAY_WINDOW                  FALSE 
```

下次你的工作会运行得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T04:54:03.107

请参阅以下 My Oracle Support (MOS) 文章：计划的维护自动任务在 11.2.0.3 升级后不起作用 [ID 1452836.1]

# javascript - $().trigger 从控制台工作但不在代码中

> ID：13142728
> 
> 赞同：2
> 
> 时间：2012-10-30T15:47:11.213
> 
> 标签：javascript, jquery, jquery-selectors

我有一个 html 模板，可以修改 html 选择框的外观。

```
 <select id='floorinput' class='select multiple-as-single easy-multiple-selection check-list allow-empty' multiple style="width:100px"></select> 
```

该模板使用类来美化选择框。选择框的选项由 ajax 调用的结果填充，并且工作正常。选择框最终在浏览器上呈现如下：

```
<span class="select multiple-as-single easy-multiple-selection check-list allow-empty replacement" style="width: 97px; " tabindex="0">
    <span class="select-value alt">All</span>
    <span class="select-arrow"></span>
    <span class="drop-down custom-scroll" style="">
    <span class="selected"><span class="check"></span>Floor-1</span>
    <span class="selected"><span class="check"></span>Floor-2</span>
    .....
    <div class="custom-vscrollbar" style="display: none; ">
       <div></div>
    </div></span>
    <select id="floorinput" class="" multiple="" style="width: 100px; display: none; " tabindex="-1">
       <option value="Floor-1" selected="selected">Floor-1</option>
       <option value="Floor-2" selected="selected">Floor-2</option>
    </select>
</span> 
```

该模板通过隐藏实际的选择框并呈现一个花哨的选择框来工作。

我想模拟鼠标点击这个选择框。目的是取消选择已经选择的选项。模板代码无法处理对#floorInput 选项的编程点击（实际的 html 输入）。所以我决定点击像这样的跨度：

```
var j = 0;
//DEselect selected floors programtically
$("#floorinput option").each(function () {
    if ($(this).attr("selected") == "selected") {
        console.log('should deselect this:' + $(this).text());
        $('.select-value.alt').click();//simulate click to open dropdown
        $('.drop-down.custom-scroll span.check')[j].click();//perform click. ERROR here
    }
    else {
        console.log('already selected :' + $(this).text());
    }
    j++;
}); 
```

我在 Windows 7 上使用 chrome 版本 22.0.1229.94 m。代码引发如下错误：

```
Uncaught TypeError: Cannot call method 'click' of undefined 
```

但是当我通过 Chrome 的控制台调用相同的方法时，它会按预期工作：

```
$('.select-value.alt').click();
$('.drop-down.custom-scroll span.check')[0].click();//select or deselect first option 
```

问题的可能原因可能是在调用 $('.select-value.alt').click(); 后选择框的标记不可用。但是我尝试通过几种方法延迟第二个方法调用，但它不起作用。

jquery方法通过控制台工作但在实际执行期间没有工作的任何场景？请帮忙。PS：垃圾邮件预防不允许我上传屏幕截图:(。

# java - 创建DTO的正确方法

> ID：13142732
> 
> 赞同：-1
> 
> 时间：2012-10-30T15:47:28.230
> 
> 标签：java

当我创建一个用于将用户输入数据存储到管理层的数据传输对象 (DTO) 时，我怀疑我是否以正确的方式进行操作。

例如

方案一

```
public class Person{

    private String name;
    private int age;  // primitive type
    private double weight; // primitive type

} 
```

方案 2

```
public class Person{

    private String name;
    private Integer age;
    private Double weight;

} 
```

在这种情况下，我可以使用的最佳方案是什么，以及在决定每种方案时应该考虑哪些因素。请给我建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T15:49:23.833

如果你可以使用原始类型，我会使用原始类型。不仅仅是出于性能原因，而是为了明确这`null`不是一个有效值。

如果您有一个可以是的值`null`，请使用包装器。

此外，如果您可以创建字段`final`，我会这样做，这样可以避免可变性和线程安全性问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:49:30.120

就个人而言，我更喜欢原语以避免`null`陷阱。

# security - Grails 在部署到云时获得客户端 IP？

> ID：13142733
> 
> 赞同：2
> 
> 时间：2012-10-30T15:47:29.013
> 
> 标签：security, grails, ip, cloud, jelastic

我有一个 Grails 应用程序，我希望通过 ip 将其锁定，以便只有一些 IP 范围可以访问该应用程序。我在 Config 中使用了 Spring Security 命令来实现这一点：

```
grails.plugins.springsecurity.ipRestrictions 
```

然后在云中运行应用程序（Jelastic）时，即使我在我列出的 IP 之一上，它也不允许我访问我想要的区域。然后我在下面显示的应用程序中放置了一些代码来拉回客户端的地址，它显示了可能是云代理服务器的地址，而不是使用应用程序的客户端：

```
request.getRemoteAddr() 
```

我认为它不会让我访问我想要的区域，因为它会将我的 IP 读取为云代理的 IP，我还尝试运行以下命令以查看它们中是否有任何返回我的实际 IP，但是它们都是 null ：小号

```
request.getHeader("X-Forwarded-For");  

request.getHeader("Proxy-Client-IP");  

request.getHeader("WL-Proxy-Client-IP") 

request.getHeader("HTTP_CLIENT_IP")

request.getHeader("HTTP_X_FORWARDED_FOR") 
```

我只需要知道是否有某种方法可以通过客户端 IP 而不是使用云代理的 IP 在云中限制此应用程序？提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T10:58:09.747

对 Jelastic 实例的所有请求都通过基础设施全局解析器发出。

所以，你是对的，`request.getRemoteAddr()`返回解析器的 IP 并且它不被你的允许列表识别。

解决方法是在 Jelastic 中为您的应用服务器购买[外部 IP 。](http://jelastic.com/docs/Public-IPv4)在这种情况下，所有请求都将直接发送到您的实例。

我还建议您加入专门的[Jelastic 社区](http://community.jelastic.com/)，以分享您的经验并获得他人的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:31:22.040

你有没有在你的tomcat前面配置一个nginx实例？我不确定是否有任何 jelastic 细节，但您必须配置 nginx 以便它将 ip 传递给代理服务，请参阅[http://wiki.nginx.org/HttpRealIpModule](http://wiki.nginx.org/HttpRealIpModule)

如果您不想覆盖默认值，您可以设置自定义标题：

```
proxy_set_header X-Real-IP $remote_addr; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T19:13:26.693

您是否尝试过转储您在应用程序中实际获得的标头？

在 Cloudfoundry.com 上，我可以看到我得到了“x-forwarded-for”

```
class HeaderController {

def headerTest = {

    def headerNames = request.headerNames.collect{ it }

    headerNames.each {
        render "$it : ${request.getHeader(it)}\n"
    }

    render "Remote addr : ${request.getRemoteAddr()}\n"
    render "Forward addr : ${request.getHeader('x-forwarded-for' )}\n"

}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T15:50:11.593

在[Jelastic 云](http://jelastic.com/)中，“x-forwarded-for”也会显示您的 IP。

作为跟进，我建议您查看[Jelastic Community上的相关主题](http://community.jelastic.com/index.php/topic/208-access-restriction-question/)

因此，假设您必须以检查“x-forwarded-for”值的方式设置您的 IP 限制配置。

# php - 如何在 Codeigniter 中为多个 url 定义函数

> ID：13142735
> 
> 赞同：0
> 
> 时间：2012-10-30T15:47:29.510
> 
> 标签：php, codeigniter, url, url-rewriting

我希望我的 Codeigniter 调用函数 export(...) 时

```
domain.com/foo/bar/show/122.export 
```

如果也有同样的功能

```
domain.com/boo/for/show_all/172.export
domain.com/goo/par/detail/122.export 
```

所以我想我可以只定义一次函数 export(...) 并将相应页面的 HTML 代码传递给导出函数，或者至少是调用的源。

如何为我的整个 CI 页面定义这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:49:24.637

你可以使用 CI 的 URI 路由

像这样的东西应该可以工作（比如你的导出功能在导出控制器中）

```
$route['([a-z]+)/([a-z]+)/([a-z]+)/(\d+)\.(export)'] = "exports/export/$1/$2/$3/$4"; 
```

所以你的导出方法会有源信息。

# iphone - NSCache 在 setObjectForKey 上驱逐对象

> ID：13142738
> 
> 赞同：1
> 
> 时间：2012-10-30T15:47:33.837
> 
> 标签：iphone, ios, xcode, cocoa-touch, nscache

NSCache 每次我设置一个对象时都会驱逐对象！这是疯了。

这是我添加对象的方式：

```
 [self.inMemoryCache setObject:@{@"data" : data, @"filePath" : filePath} forKey:filePath]; 
```

这是我的委托方法 willEvictObject：

```
-(void)cache:(NSCache *)cache willEvictObject:(id)obj
{
    NSLog(@"evicted obj %@",[obj description]);
    if ([obj isKindOfClass:[NSDictionary class]]) {
        NSData *data = [obj objectForKey:@"data"];
        NSString *filePath = [obj objectForKey:@"filePath"];
        [data writeToFile:filePath atomically:YES];
    }else if ([obj isKindOfClass:[NSArray class]]){
        NSArray *viewControllerNames = obj;
        [viewControllerNames writeToFile:[UINavigationController pathToData] atomically:YES];
    }
} 
```

每次我将对象添加到缓存时，它都会驱逐它。真的很奇怪。

有任何想法吗？这是我分配它的方式：

```
 navigationController.inMemoryCache = [[NSCache alloc] init];
    navigationController.inMemoryCache.delegate = navigationController; 
```

谢谢！

# wpf - 无法在 Windows XP 中播放 MedialElement

> ID：13142739
> 
> 赞同：2
> 
> 时间：2012-10-30T15:47:35.857
> 
> 标签：wpf, windows, windows-xp, mediaelement

我有一个具有 MediaElement 控件的 WPF 应用程序。该软件在 Windows 7 中运行良好，但当我尝试在 Windows XP 中运行时遇到问题。在 Windows XP 中，软件运行但不会播放媒体文件。起初我以为这是编解码器问题，但是 XP 中的媒体播放器可以播放文件。顺便说一句，我将 Debug 文件夹复制到 Windows XP 并从那里执行应用程序。

*我有点卡在这里。如果您能分享您的想法/解决方案，将不胜感激。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:40:27.290

我面临同样的问题。看看这是否有帮助

[C# WPF MediaElement 无法在 XP 中打开视频](https://stackoverflow.com/questions/3714507/c-sharp-wpf-mediaelement-not-opening-video-in-xp) [http://msdn.microsoft.com/en-us/library/system.windows.controls.mediaelement.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.mediaelement.aspx)

# facebook-graph-api - 与 facebook 应用程序共享大图片

> ID：13142740
> 
> 赞同：2
> 
> 时间：2012-10-30T15:47:38.950
> 
> 标签：facebook-graph-api, image

如何共享应用程序的大图？

我们有一个带有琐事测验的应用程序，但我们只能分享小图片。

可以分享原始尺寸的图片吗？

这是测试应用程序的链接：

[https://www.facebook.com/LeChampionDeBlueExorcistCommunity?sk=app_374441249291232](https://www.facebook.com/LeChampionDeBlueExorcistCommunity?sk=app_374441249291232)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:00:54.783

使用 Open Graph 与（大）用户生成的动作照片分享故事。

文档在这里：[https ://developers.facebook.com/docs/opengraph/usergeneratedphotos/](https://developers.facebook.com/docs/opengraph/usergeneratedphotos/)

与 Open Graph 操作帖一起使用，这样的东西会起作用。

```
https://graph.facebook.com/me/yournamespace:cook?
  recipe=http://www.yourdomain.com/pizza.html&
  image[0][url]=http://www.yourdomain.com/images/my_camera_pizza_pic.jpg&
  image[0][user_generated]=true 
```

[您还可以使用https://developers.facebook.com/docs/reference/api/photo/](https://developers.facebook.com/docs/reference/api/photo/) API将照片发布到用户的相册

您选择使用哪个部分取决于您想到的用例。

# voip - 使用星号和 Linksys SPA2102 或 3102 将 voip 路由/重定向到固定电话

> ID：13142742
> 
> 赞同：0
> 
> 时间：2012-10-30T15:47:54.277
> 
> 标签：voip, asterisk, routes

我有一个固定电话，我希望能够将 voip 路由/重定向到和通过固定电话。

我是这个主题的新手，但我阅读[了使用 Android 手机作为 Asterisk 扩展](http://kwlug.org/node/812)，这基本上是我想做的，但我想：

1.  将我的座机连接到星号
2.  使用 android 连接到星号并通过固定电话重新路由呼叫

我希望能够在我的 Android 手机上使用 CSIPSimple 或其他一些 VoIP 应用程序通过固定电话从 Android 呼叫。

我想念的是将我的座机连接到星号的方式。我有一个在旧笔记本上运行的 debian 服务器，我没有办法在其中放置一些 PCI 卡。

我在 ebay 上找到了一些便宜的 Linksys SPA2012 设备，我不确定是否可以使用该设备重定向到固定电话。如果不是这样，什么是便宜的解决方案？

编辑：SPA3102 看起来像是一个正确的解决方案，因为它有电话和线路输入端口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T02:45:57.840

我认为最好的选择是获取一些虚拟 pbx（基于星号）并将您的 SPA 设置为该 pbx。之后，您将能够使用浏览器控制转发并使用 android 上的任何 sip 应用程序接听电话。我认为没有 pbx 没有简单的方法可以完成，除了选项给 spa3012 公共 ip 并控制设备 web 上的重定向。

SPA2XXX 没有 FXO 端口，所以不能用于固定电话（PSTN）

# jquery - $(elements).not() 和 $(elements).filter() 有什么区别

> ID：13142747
> 
> 赞同：2
> 
> 时间：2012-10-30T15:48:09.397
> 
> 标签：jquery

只是出于兴趣，使用其中任何一个有什么主要优点/缺点吗？

直接从文档中说：

1.  `not()`= 从匹配元素集中删除元素。

2.  `filter()`= 将匹配元素集减少为匹配选择器或通过函数测试的元素。

例如，当我传递一个函数时，它们都具有相同的结果？在这种情况下哪个最好？

```
$("select").change(function() {
    var val = this.value;
    $("tr").hide().filter(function(index){
        return ($(this).data("foo") == val || val == 0);
    }).show();
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T15:50:52.987

区别只是句法方法。

使用`not()`，您可以指定**不**想要的内容；使用`filter()`你指定你**想要**什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T15:51:02.123

`filter()`=>一个包含选择器表达式的字符串，用于匹配当前的元素集。

`not()`=> :not() 中接受所有选择器，例如：:not(div a) 和 :not(div,a)。

根据性能观点过滤器更快

`filter()`>>`not()`

# git - gitignoring 特定文件夹

> ID：13142749
> 
> 赞同：1
> 
> 时间：2012-10-30T15:48:13.407
> 
> 标签：git, gitignore

我正在尝试使用 .gitignore 文件来忽略顶级 /assets 目录，所以我的文件说：

资产/

这是有效的 - 但是我的应用程序较低级别的其他文件夹也被忽略了 - 任何名为 assets 的文件夹都被忽略了。例如。/样式/img/资产。

那么如何指定我只希望忽略顶层的 /assets 目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:51:49.670

要仅忽略根文件夹，请尝试：

```
/assets/ 
```

# python - 使用 SOCK_STREAM 代理处理 https 请求

> ID：13142751
> 
> 赞同：1
> 
> 时间：2012-10-30T15:48:21.770
> 
> 标签：python, sockets, ssl, https

我正在开发一个允许用户通过代理重定向浏览的项目。系统是这样工作的——用户在远程 PC 上运行这个代理，然后也在他的笔记本电脑上运行这个代理。然后，用户将笔记本电脑上的浏览器设置更改为使用 localhost:8080 来使用该本地代理，这反过来将所有浏览器流量转发到远程 PC 上运行的代理。

这就是我遇到HTTPS的地方。我能够让正常的 HTTP 请求正常工作，但只要我点击 google.com，Firefox 就会跳过我的代理并直接连接到[https://google.com](https://google.com)。

我的想法是观察浏览器请求说*CONNECT host:443*然后使用 python ssl 模块来包装该套接字。这将为我提供外部代理和目标服务器之间的安全连接。但是，当我在 ssl 启动之前运行 wireshark 以查看浏览器请求的样子时，它已经存在，这意味着浏览器看起来直接连接到端口 443，这解释了为什么它省略了我的本地代理。

我希望能够处理 HTTPS，因为这样可以提供完整的浏览体验。

我真的很感激任何可以朝着正确方向发展的提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T23:39:29.580

好吧，在对代理进行了大量阅读之后，我发现我对这个问题的理解还不够。

对于可能最终与我处于同一位置的其他任何人，请知道 HTTP、HTTPS 和 SOCKS 代理之间存在很大差异。

**HTTP**代理通常会快速查看 HTTP 标头以确定将整个数据包转发到哪里。使用一些基本的套接字知识，您可以很容易地自行编写这些代码。

**另一方面，**HTTPS代理必须以不同的方式工作。**他们应该能够为客户端完成整个 SSL 魔术，或者他们可以尝试在不改变的情况下传递流量，但是如果选择后一种解决方案，用户 IP 将是已知的。这在编码方面要求更高。**

 ****SOCKS**代理是完全不同的，尽管非常酷，野兽。他们在 OSI 模型的第 5 层工作，老实说，我什至不知道从哪里开始创建一个。他们实现了安全性和匿名性。但是，我知道有人可以使用 SSH 在他们的机器上启动 SOCKS 代理，只需阅读此[http://www.revsys.com/writings/quicktips/ssh-tunnel.html](http://www.revsys.com/writings/quicktips/ssh-tunnel.html)即可。该链接还提供了一个想法，即应该可以从 Python 脚本中使用 SSH 以使其更加方便。

希望这可以帮助任何与我有同样问题的人。祝你好运！**

# asp.net - ASP.NET 中的日历

> ID：13142753
> 
> 赞同：0
> 
> 时间：2012-10-30T15:48:25.483
> 
> 标签：asp.net

我想建立一个包含未来 6 个月（包括当月）日历的网页。

用户可以查看日历并单击一天，以链接到预订表格。

这可能使用 ASP.NET 吗？

截屏：

![在此处输入图像描述](../Images/5daed710eaff10dc4203b836cbcfb156.png)

# javascript - 强制 websocket 活着

> ID：13142756
> 
> 赞同：0
> 
> 时间：2012-10-30T15:48:30.040
> 
> 标签：javascript, websocket

我有一个行为奇怪的 websocket。当我发送一些简单的东西（例如非常简单的字符串）时，websocket 会按预期工作，并且接收器会接收到字符串。但是现在我正在尝试发送一些更复杂的数据类型：准确地说，我正在发送`canvas.get()[0].toDataURL('image/png')`（应该是数据 URI 方案）的结果。显然 websocket 不喜欢该数据类型，因为即使包装它也会导致 websocket 将其`readyState`属性从`1`(connected) 更改为`3`(connection closed)。该`.onerror()`函数不会触发，因此没有错误。要么做这个`.onclose()`功能，所以我想连接没有被关闭，但它会以某种方式自动关闭。

更重要的是，我有一个超时，每秒调用该`.send()`方法将数据发送到某处。我注意到`bufferedAmount`每次尝试发送某些东西时，websocket 属性都会增加。

我真的无法弄清楚是什么导致了所有这些混乱，只是我试图发送的那种特定类型的数据（之前也抛出了`INVALID_STATE_ERR`异常，但现在显然不是），所以我的问题是：有没有办法强制这个连接要保持活动状态并继续发送我想发送的东西吗？

谢谢

编辑：很抱歉没有提到它：我总是将我想要作为字符串发送的整个对象通过`JSON.stringify()`. 即使我发送简单的字符串，我也会将它包装在一个对象中并对其进行字符串化，它工作正常。只有这种数据类型才会出现问题。

# javascript - 在jQuery中发生事件之前触发的事件处理程序

> ID：13142757
> 
> 赞同：1
> 
> 时间：2012-10-30T15:48:31.833
> 
> 标签：javascript, jquery, event-handling

我正在做一个大型下拉菜单，用户单击一个项目以显示扩展名。我想要一个项目的两个结果：

1.  要显示的扩展名
2.  要为菜单项更改的背景颜色（被点击的那个）

但我很难过，这两个结果都发生在 onclick 事件发生之前。

到目前为止，所有其他事情都很好，下面是我的代码

```
//call the showMenu function to toggle menu items display   
showMenu("#market", "#marketDrop");
showMenu("#jobs", "#jobsDrop");
showMenu("#career", "#careerDrop");
showMenu("#tech", "#techDrop");
showMenu("#estate", "#estateDrop");
showMenu("#fair", "#fairDrop");
showMenu("#leisure", "#leisureDrop");
showMenu("#exclusive", "#exclusiveDrop");

//the showMenu function
function showMenu(listItem, dropDown){
  //first hide the main drop down containers
  $(dropDown).hide();   
  $(listItem).click(function() {
    $(dropDown).fadeToggle();
  });

  $(listItem).click().css("background-color", "#000");      
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T16:14:40.823

您的最后一行是立即*触发*点击，而不是*绑定*点击处理程序。

尝试这个：

```
function showMenu(listItem, dropDown){
    //first hide the main drop down containers
    $(dropDown).hide();   

    // register the click handler
    $(listItem).click(function() {
        $(dropDown).fadeToggle();
        $(this).css("background-color", "#000");
    });
} 
```

注意：现代 jQuery 使用`.on('click', ...)`而不是`.click(...)`. 它有助于避免与`.click`用于触发和绑定处理程序的混淆，具体取决于参数列表。我没有修改你的代码来使用它，以防你还在使用旧版本的 jQuery。

# spring - 为什么休眠刷新选择查询（EmptyInterceptor）？

> ID：13142765
> 
> 赞同：1
> 
> 时间：2012-10-30T15:49:04.407
> 
> 标签：spring, hibernate, readonly, interceptor, flush

我想了解我看到的一种反直觉的休眠行为。我一直认为“刷新”意味着休眠在内存中有一个必须写入数据库的数据结构。这不是我所看到的。

我创建了以下拦截器：

```
public class FeedInterceptor extends EmptyInterceptor
{
    @Override
    public void postFlush(Iterator entities)
    {
          System.out.println("postFlush");          
    }
} 
```

在我的 ApplicationContext 中注册它

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
   <property name="entityInterceptor">
      <bean class="interceptor.FeedInterceptor"/>
   </property>
</bean> 
```

但是，奇怪的是，我看到从我的 DAO 中从数据库中检索到的每一行都写入控制台的“postFlush”：

```
Session session = sessionFactory.getCurrentSession();
Query query = session.createQuery("from Feed feed");
query.list(); 
```

这是为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T17:11:45.003

假设 Hibernate 不会刷新会话，那么您可能会遇到以下情况：

```
Person p = new Person();
p.setName("Pomario");
dao.create(p);
Person pomario = dao.findPersonByName("Pomario")
//pomario is null? 
```

当通过名字查找一个人时，hibernate 会向数据库发出一个 select 语句。如果它没有先发送之前的语句，那么返回的结果可能与之前在会话中所做的更改不一致，这里dababase还没有收到create语句，所以它返回一个空的结果集。

# php - php 使用图像 url 更新数据库，但不覆盖现有值？

> ID：13142780
> 
> 赞同：0
> 
> 时间：2012-10-30T15:49:37.950
> 
> 标签：php, if-statement

> **可能重复：**
> [PHP 图像替换？](https://stackoverflow.com/questions/13125580/php-image-replacement)

我正在编写一个允许在数据库中更新行的编辑脚本。

它首先导入该行，然后我将输入框包裹在可以编辑和更新的文本区域周围。

这很好用。

有两个 url 存储在数据库中，`http://www.mysite.com/images/image1.jpg`并且`http://www.mysite.com/images/image2.jpg`

检查编辑表单上是否没有新上传的图像的最佳方法是不更新数据库中的此字段？

我试过使用：

```
if ($image1new !="") { $image1==$image1new; } else { $image1 = $_POST['image1'];}
if ($image2new !="") { $image2==$image2new; } else { $image2 = $_POST['image2'];} 
```

但这总是传递一个空白字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:52:09.923

使用`$image1 = $image1new;` 而不是`$image1 == $image1new;`. 当你想给一个变量赋值时，你应该只使用**一个** `=`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:07:17.327

如果我理解，您想检查输入文件是否已上传文件，并将其存储在数据库中，对吗？

首先，您需要检索并将行的 ID 存储在一个变量中，假设您将该值存储在一个名为 $id 的变量中...

所以我想你可以试试：

```
if (isset($_FILES["input_file_name"]) {
$file = $_FILES["input_file_name"];

mysql_connect("server","user","pass") or die("Cannot access DB");

$sql_cmd = "UPDADE `database`.`table` SET `column` = '".$file."' WHERE `id` = ".$id.";";
mysql_query($sql_cmd);

}

else {
echo 'No images to store.';
} 
```

希望这能有所帮助。

# mysql - MySQL替换字符以匹配where子句

> ID：13142784
> 
> 赞同：1
> 
> 时间：2012-10-30T15:49:44.513
> 
> 标签：mysql, database, string, where-clause

我有一个表，其中有一列名为“名称”。

例子：

```
ID   Name       Other      Field
1    that's      x           y
2    o-k         x           y 
```

我希望能够执行以下操作：

```
Select * FROM table WHERE Name like %thats% 
```

并将 ID 为 1 的行作为结果，或执行：

```
 Select * FROM table WHERE Name like %ok% 
```

并将 ID 为 2 的行作为结果。

到目前为止，我只设法执行：

```
SELECT *, REPLACE( Name , '.', '' ) AS Name FROM table 
```

那个返回整个表，其中的点被替换为 Name 列。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:01:21.153

您可以清理子句`Name`中的字符串：`WHERE`

```
SELECT * FROM table
 WHERE REPLACE(
           REPLACE( Name, "-", "" ), "'", ""
       ) LIKE "%ok%" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:57:04.963

不确定我是否理解您要执行的操作。好像您想搜索替换的表？

```
SELECT Name FROM twinkle
WHERE Name EXISTS
    (SELECT Name FROM twinkle WHERE Name Like %thats%) 
```

# wpf - 将标签与停靠面板的中间对齐

> ID：13142787
> 
> 赞同：14
> 
> 时间：2012-10-30T15:49:55.107
> 
> 标签：wpf

我有一个停靠面板，中间有一个标签，最右边有另一个按钮。

由于按钮的原因，当窗口最大化时，标签无法与中间对齐。

WPF：

```
<DockPanel Height="40" HorizontalAlignment="Stretch" Margin="-1,-2,0,0" Name="dockPanel1" VerticalAlignment="Stretch" Width="Auto" OpacityMask="{x:Null}">
            <Label FontSize="18" Content="Sales" FontWeight="Bold" FontFamily="Arial" Width="883" Height="42" HorizontalAlignment="Center" HorizontalContentAlignment="Center" Foreground="White" DockPanel.Dock="Left" VerticalAlignment="Center" VerticalContentAlignment="Center"></Label>
            <Button FontSize="18" Height="47" Width="123" Name="btnStart" Foreground="White" BorderBrush="{x:Null}" FlowDirection="LeftToRight" HorizontalContentAlignment="Center" FontFamily="Arial Rounded MT" ClickMode="Press" DockPanel.Dock="Right" HorizontalAlignment="Right" VerticalAlignment="Center" Padding="0" Content="Start" BorderThickness="0" Focusable="False">
        </DockPanel> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-30T16:02:58.123

使用 a`Grid`而不是 a`DockPanel`

网格允许将对象放置在彼此的顶部，因此您可以将标签放置在中间，将按钮放置在右侧

```
<Grid>
    <Label HorizontalAlignment="Center" VerticalAlignment="Center" />
    <Button HorizontalAlignment="Right" />
</Grid> 
```

此外，如果您是 WPF 布局的新手，我建议您通读[WPF 布局：快速可视化入门](http://www.codeproject.com/Articles/30904/WPF-Layouts-A-Visual-Quick-Start)，以便了解可用的布局并选择最适合您的布局

# ruby - 测试我的简单 Rack 应用程序的更简单方法？

> ID：13142788
> 
> 赞同：3
> 
> 时间：2012-10-30T15:50:07.947
> 
> 标签：ruby, testing

我有一个这样的机架应用程序：

```
app = Rack::Builder.new do

    map '/' do
        # ...
    end

    map '/edit' do
        # ...
    end

end.to_app 
```

如果没有长尾安装/设置/学习过程，我将如何测试它。

RSpec 和 minitest 真的很棒，但我不想学习也不想设置它们。

有什么东西我只是插入并立即用普通的 Ruby 编写/运行测试吗？

我想编写像我在上面编写应用程序一样简单的测试，没有高级技术和陷阱。

在吻我信任！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T16:06:21.953

最简单的？[`Rack::Test`](https://github.com/brynary/rack-test#examples)与 一起使用`Test::Unit`。`gem install rack-test`并运行`ruby filename.rb`

```
require "test/unit"
require "rack/test"

class AppTest < Test::Unit::TestCase
  include Rack::Test::Methods

  def app
    Rack::Builder.new do
      map '/' do
        run Proc.new {|env| [200, {'Content-Type' => 'text/html'}, "foo"] }
      end

      map '/edit' do
        # ...
      end
    end.to_app
  end

  def test_index
    get "/"
    assert last_response.ok?
  end
end 
```

**更新**：请求 RSpec 样式 - `gem install rspec`；运行`rspec filename.rb`

```
require 'rspec'
require 'rack/test'

describe 'the app' do
  include Rack::Test::Methods

  def app
    Rack::Builder.new do
      map '/' do
        run Proc.new {|env| [200, {'Content-Type' => 'text/html'}, "foo"] }
      end

      map '/edit' do
        # ...
      end
    end.to_app
  end

  it 'says foo' do
    get '/'
    last_response.should be_ok
    last_response.body.should == 'foo'
  end
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T16:15:39.957

你可以试试[`Specular`](https://github.com/slivu/specular)+[`Sonar`](https://github.com/slivu/sonar)捆绑。

`Specular`用于在您需要的任何地方编写测试。

`Sonar`是一个模拟“浏览器”，可以与您的应用程序进行通信，就像它一样`rack-test`，但具有一些独特的功能和更简单的工作流程。

使用它们很简单：

```
...
app.to_app

Spec.new do
  include Sonar
  app(app)

  get
  check(last_response.status) == 200
  # etc...
end
puts Specular.run 
```

所以你把你的规范放在你的应用程序旁边，用纯 Ruby 快速编写测试，而无需学习任何东西。

查看[CIBox 上运行的完整示例](http://cibox.org/slivu/stackoverflow?lang=ruby&file=simpler-way-to-test-my-simple-rack-app.rb&run=true)

（如果没有自动运行，点击运行按钮）

PS：以这种方式编写 Rack 应用程序有点痛苦。

您可以尝试一个映射器，比如[`Appetite`](https://github.com/slivu/appetite)一个。

所以你的应用可能看起来像这样：

```
class App < Appetite
  map :/

  def index
    'index'
  end

  def edit
    'edit'
  end
end 
```

查看相同的示例，但使用[此处](http://cibox.org/slivu/stackoverflow?lang=ruby&file=simpler-way-to-test-my-simple-rack-app-appetite.rb&run=true)[构建的应用程序`Appetite`](http://cibox.org/slivu/stackoverflow?lang=ruby&file=simpler-way-to-test-my-simple-rack-app-appetite.rb&run=true)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T15:53:51.873

您可以使用 rack-test 但这又需要使用 minitest/unit test，但这是测试 Rack 应用程序的最常见方式。

# android - 一次使用 soundPool 的 VideoView

> ID：13142790
> 
> 赞同：0
> 
> 时间：2012-10-30T15:50:15.483
> 
> 标签：android, android-videoview, soundpool

我怎样才能意识到它？VideoView 工作正常，但 soundPool 没有声音。

```
 soundPool = new SoundPool(4, AudioManager.STREAM_MUSIC, 100);
            soundsMap = new HashMap<Integer, Integer>();
                soundsMap.put(SOUND1, soundPool.load(this, R.raw.water1, 1));
                soundsMap.put(SOUND2, soundPool.load(this, R.raw.water2, 1));

            AudioManager mgr = (AudioManager)getSystemService(Context.AUDIO_SERVICE);

                float streamVolumeCurrent = mgr.getStreamVolume(AudioManager.STREAM_MUSIC);
                float streamVolumeMax = mgr.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
                float volume = streamVolumeCurrent / streamVolumeMax;  

            soundPool.play(SOUND1, volume, volume, 1, 0, 1);
            .
            .
            .
            VideoView.start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:41:21.433

```
soundPool.play(SOUND1, volume, volume, 1, 0, 1); 
```

试试这个而不是上面的代码

```
soundPool.play(soundsMap.get(SOUND1), volume, volume, 1, 0, 1); 
```

我猜你使用地图来存储你所有的音乐文件

# sharepoint - Sharepoint 母版页实施

> ID：13142791
> 
> 赞同：0
> 
> 时间：2012-10-30T15:50:38.097
> 
> 标签：sharepoint, master-pages

我有一个同事已经创建的母版页，如何在 SharePoint 中实现这个母版页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T23:29:13.590

如果要使用 Visual Studio 2010 创建和部署新的母版页，请参阅以下步骤。

1\. 在 Visual Studio 中右键单击 SharePoint 项目，选择添加新项目。

2.选择模块模板并将其命名为MasterPageModule。单击添加。

3.将Sample.txt重命名为Sample.master

4.打开Elements.xml，删除现有文本并替换为以下代码

```
<?xml version="1.0" encoding="utf-8"?>
<Elements xmlns="http://schemas.microsoft.com/sharepoint/">
  <Module Name="MasterPageModule" List="116" Url="_catalogs/masterpage">
    <File Path="MasterPageModule\Sample.master" Url="MasterPageModule/Sample.master" Type="GhostableInLibrary" IgnoreIfAlreadyExists="false" />
  </Module>
</Elements> 
```

5.使用 SharePoint Designer 打开现有网站。

6.转到站点对象-> 母版页并复制 v4.master

7.重命名并选择新文件。

8.要编辑文件，选择自定义 -> 编辑。

9\. 为“您要检查吗？”选择“是”。信息。

10.从复制的母版页中选择所有代码并复制到 Sample.master 文件中。

11.修改代码（也可以在SP Designer中修改文件，然后复制）

12.构建和部署解决方案。

13.转到 http:///_catalogs/masterpage/Forms/AllItems.aspx

14.打开 MasterPageModule 文件夹。

您将看到已部署的 Sample.master 页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:58:54.777

您可以使用多种方法来更改 SharePoint 网站的母版页。这里有一些[http://sharepointmagazine.net/articles/deploying-the-master-page](http://sharepointmagazine.net/articles/deploying-the-master-page)，[http://office.microsoft.com/en-us/sharepoint-designer-help/change-the-current-master-page -HA010167165.aspx](http://office.microsoft.com/en-us/sharepoint-designer-help/change-the-current-master-page-HA010167165.aspx)。我希望它有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T18:37:07.670

使用 SharePoint 设计器连接到您的网站并将母版页文件复制到母版页库中。然后在 SP Designer 中右键单击母版页文件并选择“设置为默认母版页”。

# javascript - 如何使用 jquery-load-json 插件加载外部 JSON 文件

> ID：13142800
> 
> 赞同：0
> 
> 时间：2012-10-30T15:51:12.513
> 
> 标签：javascript, jquery, jsonp

我正在使用 jquery-load-json [http://code.google.com/p/jquery-load-json/wiki/WorkingWithFormElements](http://code.google.com/p/jquery-load-json/wiki/WorkingWithFormElements)插件来使用 json 数据填充 html 表单字段。

我尝试将 json 加载到示例中所示的表单中，但是当我尝试获取未定义的数据时。将数据从外部文件加载到表单中的正确方法是什么？

// 外部 json 文件 data.json

```
data = {
            "ID":17,
            "Name":"Emkay Entertainments",
            "Address":"Nobel House, Regent Centre",
            "Town":"Lothian",
            "Contact":"Phone"
} 
```

//html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Filling the form with the single JSON object

JQuery loadJSON plugin can be used for filling the form elements.</title>
</head>

<body>

<form name="form_simple" id="form-simple" action="details.html" method="get">

    <input type="hidden" id="ID" name="ID" />

    <label for="Name">Name</label>

    <input name="Name" id="Name" type="text" />

    <label for="Address">Address</label>

    <textarea name="Address" id="Address" rows="5" cols="20"></textarea>

    <label for="Country">Country</label>
    <select name="Country" multiple="multiple">
        <option value="">-</option>
        <option value="UK">United Kingdom</option>
        <option value="SRB">Serbia</option>
        <option value="USA">United States of America</option>
        <option value="FRA">France</option> 
    </select>

    <label for="IsFeatured">Is Featured</label>
    <input name="IsFeatured" id="IsFeatured" type="checkbox" value="true"/>

    <label for="Town">Town</label>
    <select name="Town" id="Town">
        <option value="" selected="selected">-</option>
        <option value="London">London City</option>
        <option value="Liverpool">Liverpool City</option>
        <option value="Lothian">Lothian City</option>
        <option value="Newcastle">Newcastle City</option>
        <option value="Buckinghamshire">Buckinghamshire City</option>
        <option value="Essex">Essex City</option> 
    </select>

    <label for="Contact">Contact</label>
        <input name="Contact" type="radio" value="Email"/> Email
        <input name="Contact" type="radio" value="Phone" /> Phone
        <input name="Contact" type="radio" value="Post" /> Post

    <input type="submit" value="Details" class="submit-button" />
</form>

<!-- Load jQuery and the minified plugin -->
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
 <script type="text/javascript" src="js/jquery.validate.js"></script>
<script src="http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js"></script>
 <script language="javascript" type="text/javascript">

        $(document).ready(function () {
         //   var id = window.location.href.match("(ID=|id=|/)[0-9]+")[0].match("[0-9]+");
            $('form').loadJSON(data);
        });
    </script>
</body>
</html> 
```

# windows - 如果您使用内核驱动程序来确保您的驱动程序是第一个加载的库，那么从 DllMain 调用 LoadLibrary 是否安全？

> ID：13142801
> 
> 赞同：0
> 
> 时间：2012-10-30T15:51:15.587
> 
> 标签：windows, loadlibrary, dll-injection

我一直在研究一些挂钩代码，它们有选择地将库加载到某些进程中，然后挂钩某些本机 API 函数（使用 Detours）。事件链如下所示：

*   内核驱动程序将**A.dll**加载到每个进程中。
*   **A.dll** ::`DllMain()`决定是否加载包含实际 Detours 钩子的**B.dll** ( )。`LoadLibraryEx`
*   **B.dll**在挂钩所述功能的过程中运行。

此处的第二个项目符号似乎违反了[此处](http://msdn.microsoft.com/en-us/windows/hardware/gg487379.aspx)指定的 DllMain 规则，但我正在尝试确定驱动程序加载的方式是否`A.dll`可以解决限制。具体来说，内核驱动程序用于`PsSetLoadImageNotifyRoutine`在每个进程启动时获取通知，然后将要调用的 APC 排队`LoadLibraryEx`，`A.dll`这意味着它几乎是进程启动时加载的第一个 DLL。这是否规避了调用 inside 的`LoadLibrary`问题`DllMain`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:58:38.253

不管怎么`LoadLibraryEx`触发。一旦触发，DLL 加载过程是相同的，并且适用相同的规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T16:03:58.890

[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682583%28v=vs.85%29.aspx)非常明确地说不要在DllMain 中调用 LoadLibrary。即使在极少数情况下您找到了使其工作的安全方法，它也可能无法在 Windows 的下一个版本（甚至下一个服务包）中工作。

# objective-c - 窗口排序和 XIB

> ID：13142803
> 
> 赞同：3
> 
> 时间：2012-10-30T15:51:20.137
> 
> 标签：objective-c, xcode, macos, cocoa

我正在设置 OSX 开发的第一步，但遇到了一些问题。我有相当多的 iOS 开发经验，但 OSX 程序的窗口系统是另一回事。

我正在为 twitter 之类的社交网络创建一个客户端，需要 2 个单独的窗口控制器来首次启动应用程序，如果您已登录则显示您的时间线，如果您尚未登录，则需要一个用于登录。在信息中.plist 你需要给它一个 main.xib。为此，我做了一个空的 xib，我在应用程序启动的第二个地方隐藏了它。这不是一个很好的解决方案IMO，有什么更好的解决方案？我想让窗口与 appdelegate 分开，因为这样我可以让我的代码分开。

这给了我一个问题，当我打开“第二个”窗口进行登录时，它会显示但未激活。我已经尝试了所有的东西，比如 orderFront:、activateIgnoringOtherApps:、makeKeyAndOrderFront: 等等。但这一切都行不通。。

所以：首先，是否有更好的方法来处理 info.plist 中所需的 main.xib，如果没有，是否有解决焦点问题的方法？我正在使用 osx 10.7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T17:01:04.603

不止一次，您真的应该将您的应用程序委托与您的窗口控制器分开。继续并从模板创建一个新的 Cocoa 应用程序。在`MainMenu.xib`中，删除窗口。在`AppDelegate.h`删除`IBOutlet`到`NSWindow`. 用s--perhaps和.创建几个新的`NSWindowController`complete子类。 `XIB``LoginWindowController``TimelineWindowController`

对于“最终”`NSWindowController`子类（即那些不会被子类化的子类），指定初始化器的最佳实践是

```
//for our example class LoginWindowController
- (id)init
{
    self = [super initWithWindowNibName:@"LoginWindowController"];
    if (self) {
        //....
    }
    return self;
} 
```

现在在您的应用程序委托中，您应该拥有`@properties`两个不同的窗口控制器实例：

```
//Within AppDelegate.m

#import "AppDelegate.h"
#import "LoginWindowController.h"
#import "TimelineWindowController.h"

@interface AppDelegate ()
@property (nonatomic) LoginWindowController *loginWindowController;
@property (nonatomic) TimelineWindowController *timelineWindowController;
//For the sake of this demo, add a property for the loggedIn state:
@property (nonatomic) BOOL loggedIn;
@end 
```

你应该在你的应用程序委托中有某种方法来呈现正确的窗口控制器。让我们称之为`-updateWindowVisibility`：

```
- (void)updateWindowVisibility
{
    BOOL isLoggedIn = self.loggedIn;

    BOOL loginWindowVisible = self.loginWindowController.window.isVisible;
    BOOL showLoginWindow = !isLoggedIn;

    BOOL timelineWindowVisible = self.timelineWindowController.window.isVisible;
    BOOL showTimelineWindow = isLoggedIn;

    if (!loginWindowVisible && showLoginWindow) {
        if (!self.loginWindowController) self.loginWindowController = [[LoginWindowController alloc] init];
        [self.loginWindowController showWindow:nil];
    } else if (loginWindowVisible && !showLoginWindow) {
        [self.loginWindowController close];
        self.loginWindowController = nil;
    }

    if (!timelineWindowVisible && showTimelineWindow) {
        if (!self.timelineWindowController) self.timelineWindowController = [[TimelineWindowController alloc] init];
        [self.timelineWindowController showWindow:nil];
    } else if (timelineWindowVisible && !showTimelineWindow) {
        [self.timelineWindowController close];
        self.timelineWindowController = nil;
    }
} 
```

上面实现的这种方法比当前设置所需的工作要多一点，但是当您需要显示/隐藏其他窗口时应该更容易修改。此时剩下要做的就是调用`-updateWindowVisibility`from `-applicationDidFinishLaunching:`。

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    self.isLoggedIn = NO;
    [self updateWindowVisibility];
} 
```

我已经在[github](https://github.com/natechan/MultiWindowDemo)上发布了一个示例应用程序来演示这种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T16:54:47.317

在结构方面（你的第一个问题），我会推荐这个：

1.  创建一个带有一个空白窗口和一个覆盖它的大 NSView（例如，称为 megaView）的 XIB。在 AppDelegate 中为您的大 NSView 创建一个 IBOutlet。将应用设置为在加载时使用此 XIB。
2.  创建两个单独的 NSView XIB：一个用于登录状态，一个用于注销状态。把你的布局放在这些里面。
3.  创建两个 NSViewController 子类：一个控制您刚刚创建的每个 NSView 的逻辑。我们称它们为**LoggedOutViewController**和**LoggedInViewController**。
4.  跳回您创建的两个 NSView。将登录的 NSView 的文件所有者设置为 LoggedInViewController，将注销的 NSView 的文件所有者设置为 LoggedOutViewController。将每个文件所有者的视图（右键单击文件所有者以找到它）连接到相应的 NSView。
5.  在您的应用委托中，以您需要的任何方式确定用户的身份验证状态。

如果已登录，请执行以下操作：

```
NSViewController *loggedInController = [[NSViewController alloc] initWithNibName:@"NibNameGoesHere" bundle:nil];
[[self megaView] addSubview:[loggedInController view]]; 
```

否则，使用您的 loggedOutController 执行上述过程：

```
NSViewController *loggedOutController = [[NSViewController alloc] initWithNibName:@"OtherNibNameGoesHere" bundle:nil];
[[self megaView] addSubview:[loggedOutController view]]; 
```

这应该会让你得到你想要的，并且可能会在这个过程中解决你的第二个问题。我的答案和 Nate 的不同之处在于我使用了相同的窗口。有条件地实例化视图控制器并将它们的视图加载到超级视图中可能是我学到的 Cocoa 中最重要的方面。

# ios - iOS - 将一个对象拖放到另一个对象中

> ID：13142808
> 
> 赞同：-1
> 
> 时间：2012-10-30T15:51:28.217
> 
> 标签：ios, drag-and-drop, uiimageview

我有 2 `UIImageView`。冷杉可以由用户移动，并且必须被拖到另一个中。我必须检测第一个图像视图何时“进入”另一个。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:59:15.323

只需控制框架是否`UIImageView`相互包含。

```
UIImageView * a;
UIImageView * b;

if (CGRectContainsRect(a.frame, b.frame)) {
     NSLog(@"a is over b");
} 
```

# android - 在 Android xml 中交替 Listview

> ID：13142811
> 
> 赞同：1
> 
> 时间：2012-10-30T15:51:34.073
> 
> 标签：android

我想创建一个交替背景图像的列表视图。例如，第一项将具有背景图像 a，第二项将具有背景图像 b，第三项将具有背景图像 a。在基本术语中，我希望帮助创建一个列表视图，该列表视图对于每个奇数项目（鸡蛋第一、第三、第五个）都有一个与那些偶数列表视图项目（鸡蛋第二、第四和第六个列表视图项目）不同的特定背景图像。这是一个例子。

[http://www.gadgetreview.com/wp-content/uploads/2011/10/SIRI-Reminders.jpg](http://www.gadgetreview.com/wp-content/uploads/2011/10/SIRI-Reminders.jpg)

在此示例中，气泡是背景图像，每个不同的背景图像是不同的列表视图项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:04:38.337

上次我尝试没有找到 xml 参数来执行此操作，但您可以尝试使用此问题中使用的相同解决方法：

[Stack Overflow：如何在 Listview 之间交替颜色？](https://stackoverflow.com/questions/6990595/how-do-i-alternate-colors-in-between-listviews)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T16:14:26.597

在 getView 方法中的列表适配器中，将发送到该方法的位置属性除以 2。如果剩余数字为 0，则您在列表视图的偶数行中。根据此，您可以更改列表视图项的布局。

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {

if(position % 2 = 0)
//set layout for even row
}else{
//set layout for odd row
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T16:10:59.963

您必须制作自己的自定义适配器，然后使用以下方法：

```
public View getView(int position, View convertView, ViewGroup parent) {

} 
```

如果位置是奇数，您可以使用位置来更改背景

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T15:56:13.667

列表视图中有 SetEmptyView 方法使用它

```
 listView.setEmptyView( findViewById( R.id.empty_list_view ) ); 
```

# xpath - 如何在 Soap UI 中使用 Query_Match

> ID：13142815
> 
> 赞同：7
> 
> 时间：2012-10-30T15:51:41.660
> 
> 标签：xpath, mocking, soapui

我在 Soap UI 中使用 MockOperation 编辑器时遇到问题。

我有这个要求：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Body>
    <methodName xmlns="http://tempuri.org/" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
      <dataAreaId>error</dataAreaId>
      <pInvoiceList>
      <dataAreaId>NOTTHESAME</dataAreaId>
        ...
      </pInvoiceList>
    </methodName>
  </s:Body>
</s:Envelope> 
```

我尝试了几乎所有 XPATH 表达式，但我总是得到“请求中缺少匹配”

在 Xpath 框中填写什么？

我试过：

*   //dataAreaId/text()
*   //dataAreaId/
*   //dataAreaId
*   /dataAreaId/文本（）
*   /dataAreaId
*   /methodName/dataAreaId/text()
*   /方法名/dataAreaId/
*   /methodName/dataAreaId

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-31T07:29:26.977

我终于设法根据user1740631的回答得到它

看来我毕竟与命名空间有关。

正确的语法：

```
declare namespace tem='http://tempuri.org/';
//tem:methodName/tem:dataAreaId[1] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T05:21:30.537

像这样写

第一个

//方法名[1]/dataAreaId[1]

对于第二个

//方法名[1]/pInvoiceList[1]/dataAreaId[1]

*如果您在 Xml 中有多个具有相同名称的节点，那么您应该使用数字来定位该特定节点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-21T08:50:28.463

如果您不关心命名空间，可以使用以下语法：

**XPath1.0**

```
//*[local-name() = 'methodName']/*[local-name() = 'dataAreaId'][1] 
```

**XPath2.0**

```
//*:methodName/*:dataAreaId[1] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-15T09:38:40.510

有一个很好的提示：当为测试用例（或者也可能在模拟窗口中）定义断言时，XPath-Expression-Field 上方有一个“声明”按钮。它看起来并不像一个按钮，直到你用鼠标指针指向它，所以我一开始并没有意识到它。

只需单击按钮，SoapUI（实际上我使用 5.2.1）将为您添加声明语句，您可以使用。

我偶然发现了该功能，因为它并不真正可见。也许这也可以帮助...

# performance - Cassandra 缩放备忘单

> ID：13142819
> 
> 赞同：0
> 
> 时间：2012-10-30T15:51:51.587
> 
> 标签：performance, cassandra, scaling

当然，您只能通过......实际实现它来了解您的系统性能以及您的用例负载！除此之外，在着手制作原型之前，我正在寻找一些关于 Cassandra 性能的粗略估计。

对于节点和数据中心的各种配置，以及各种读写一致性级别，读取过时值的机会有多大？你希望每秒维持什么样的关键读写，每次读写会有什么样的延迟？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:36:56.230

今年早些时候在 VLDB 上展示的 Cassandra 基准测试：http: [//vldb.org/pvldb/vol5/p1724_tilmannrabl_vldb2012.pdf](http://vldb.org/pvldb/vol5/p1724_tilmannrabl_vldb2012.pdf)

性能/一致性权衡：[http ://www.datastax.com/dev/blog/your-ideal-performance-consistency-tradeoff](http://www.datastax.com/dev/blog/your-ideal-performance-consistency-tradeoff)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T21:14:08.517

我们运行一个应用程序，每个 Web 节点每秒发布 500 个数据点（我们有 6 个 cassandra 节点）。如果我们在客户端缓存 100M 的数据以避免读取，我们可能会在每个节点每秒获得 1000 个数据点。

其配置文件是在每个请求上使用带有一个 findAll(List keys) 和一个 putAll(Listentities) 的 PlayOrm，其中该列表中的每个键都是单个数据点，因为客户端通过 http 发送一批数据点，所以我们不有尽可能多的 http 开销....也许这至少会给你一些想法，但不确定。

我们尚未测试 Web 节点与 cassandra 节点的正确比例，但我怀疑它就像我的最后一个客户端一样，在这个项目中它几乎是一对一的，尽管它会随着配置文件而变化。

我们现在运行 4 个 Web 节点并每秒获得 2000 个数据点。

# .htaccess - 自菜单更改以来重写一些网址

> ID：13142820
> 
> 赞同：0
> 
> 时间：2012-10-30T15:51:51.447
> 
> 标签：.htaccess, mod-rewrite

我很难得到

site.com/member-videos

进入

site.com/videos

或在现实中

```
#RewriteCond %{HTTP_HOST} !^/community/member-videos/
#RewriteRule (.*) http://site.com/community/videos/$1 [R=301,L] 
```

这似乎循环！

对我来说，上面说找到'/community/member-videos/'的匹配项，然后将类似的内容发送到网址......我现在在这个典型的问题上浪费了太多时间，并且看了很多类似的在线，但没有什么很适合这种情况..谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T18:34:07.877

You almost had it. The variable your condition matches against *is a host, and **not** a URI*. If you need to check the host, it must only be the hostname (not URI path at all), e.g. `site.com`. You need to use a `%{REQUEST_URI}` variable for what you are matching against:

```
RewriteCond %{HTTP_HOST} ^(www\.)?site\.com$ [NC]
RewriteCond %{REQUEST_URI} !^/videos/
RewriteRule ^/?member-videos(.*)$ /videos$1 [L,R=301] 
```

The example you gave doesn't have the `community` part in the URI at all, if it's not in the URL, it won't appear in the string sent to the rewrite engine. But your rules has `/community` in them, so if in fact you need that path, then:

```
RewriteCond %{HTTP_HOST} ^(www\.)?site\.com$ [NC]
RewriteCond %{REQUEST_URI} !^/community/videos/
RewriteRule ^/?community/member-videos(.*)$ /community/videos$1 [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:56:38.023

```
RewriteRule (.*) http://site.com/community/videos/$1 [R=301,L] 
```

这是错误的，它会让你陷入无限循环。

试试这个：

```
RewriteRule http://site.com/community/member-videos/$1 ^community/videos/(.*)$ [R=301,L] 
```

# ios - 分配 UIButton 和 UILabel 时收到内存警告

> ID：13142821
> 
> 赞同：1
> 
> 时间：2012-10-30T15:51:59.900
> 
> 标签：ios, uibutton, automatic-ref-counting, didreceivememorywarning

情况就是这样：我有一个水平滚动的`UIScrollView`（称为）。`A`对于此滚动视图，该属性`pagingEnabled`设置为`YES`。在屏幕的右侧，我有一个`UIButton`，它附加到`self.view`滚动视图并且不滚动。

![在此处输入图像描述](../Images/d1bbec510bfddedd4295a8efed3662e5.png)

轻按时，此按钮会显示 a `UIView`，其中包含另一个`UIScrollView`（称为`B`）并垂直滚动。此滚动视图包含`UIButton`和的列表`UILabel`。每个`UIButton`作为`UIImage`背景图像。我`UIButton`改用`UIImageView`这种方式是因为这样很容易管理图像上的触摸事件。包含每个图像的`UILabel`描述。

![在此处输入图像描述](../Images/e7f9b799325372b0aa81b41441b2fd70.png)

问题：对于 中的每个页面`A scroll view`，我都需要更改 中`UIButton`包含的内容`B scroll view`，因为每个页面都有不同的图像列表。因此，在`scrollView:didEndScrollingAnimation`滚动视图委托方法中，我从视图中删除了旧`UIButton`的和旧`UILabel`的，并且还从`NSArray`包含它们的位置中删除。我创建了一个新列表`UIButton`and `UILabel`，我添加`self.view`并插入到数组中， with `[array addObject:]`。

在可变数量的滚动后，应用程序会收到一条**内存警告消息**，并且会从系统中终止。

我使用 ARC，因此几乎不可能理解旧对象是否已解除分配（无论如何都会非常困难，因为它们是系统对象）。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:10:38.917

在您的情况下，我会做的与我向其他人推荐的相同：

*   使用 profile 并分析堆之间的差异。通过这种方式，您可以在每次滑动之间检查应用程序的内存占用情况。

有关如何执行此操作的基本教程，您可以查看[此](http://useyourloaf.com/blog/2011/03/08/using-heapshots-to-find-abandoned-memory.html)。我知道这有点含糊，您会想要一个客观的答案，但问题是，您认为现在的问题可能与您的应用程序中的实际问题不对应。如果您在分析堆后需要进一步的帮助，只需编辑您的问题并告诉我们。

这是我[使用](http://www.friday.com/bbum/2010/10/17/when-is-a-leak-not-a-leak-using-heapshot-analysis-to-find-undesirable-memory-growth/)的原始文章，来自[bbum 先生](https://stackoverflow.com/users/25646/bbum)。

# nuget - 应如何从 NuGet 包更新 Bin 可部署程序集？

> ID：13142829
> 
> 赞同：0
> 
> 时间：2012-10-30T15:52:17.017
> 
> 标签：nuget, nuget-package, bin

我刚刚为 ASP.NET MVC4 DisplayModes 应用了 Nuget 补丁，随之而来的是一堆从 2.0.20505.0 到 2.0.20710.0 的 web dll 依赖更新，这些更新在我的解决方案树中的包文件夹中更新得很好， packages.config 文件和 .csproj 文件。

麻烦的是，构建和部署不会选择新版本，而只是从 GAC 中复制旧的 20505 版本。关于如何引用包，我有什么遗漏吗？这是 VS2010 SP1 和 MVC4。

谢谢

马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T21:29:23.773

NuGet 包本身可能与您看到的行为几乎没有关系。package.config 文件确实有每个包的版本号，如果该信息是最新的，则 NuGet 将在被询问时恢复这些版本的包。

问题更可能出在您正在使用的部署设置上，我对此知之甚少。当然，我应该指出，构建 20505（您在 GAC 中拥有的构建）是 MVC 4 的候选发布版本，继续升级到最终构建可能符合您的利益，从那时起被释放。

HTH，粘土

# python - 对不同的图像进行分类

> ID：13142830
> 
> 赞同：4
> 
> 时间：2012-10-30T15:52:24.937
> 
> 标签：python, image

我有许多来自中国家谱的图像，我希望能够以编程方式对它们进行分类。一般来说，一种类型的图像主要具有逐行文本，而另一种类型可能是网格或图表格式。

示例照片

*   “所需”类型：[http ://www.flickr.com/photos/63588871@N05/8138563082/](http://www.flickr.com/photos/63588871@N05/8138563082/)

*   “其他”类型：[http ://www.flickr.com/photos/63588871@N05/8138561342/in/photostream/](http://www.flickr.com/photos/63588871@N05/8138561342/in/photostream/)

问题：有没有（相对）简单的方法来做到这一点？我有使用 Python 的经验，但对图像处理知之甚少。对其他资源的指导也受到赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T16:51:22.683

假设至少有一些网格线完全或几乎完全垂直，一个相当简单的方法可能会奏效。

我使用[PIL](http://www.pythonware.com/products/pil/)来查找图像中超过一半的像素比某个阈值暗的所有列。

## 代码

```
import Image, ImageDraw # PIL modules

withlines = Image.open('withgrid.jpg')
nolines   = Image.open('nogrid.jpg')

def findlines(image):
    w,h, = image.size
    s = w*h
    im = image.point(lambda i: 255 * (i < 60))   # threshold
    d = im.getdata()      # faster than per-pixel operations

    linecolumns = []

    for col in range(w):
        black = sum( (d[x] for x in range(col, s, w)) )//255
        if black > 450:
            linecolumns += [col]

    # return an image showing the detected lines
    im2 = image.convert('RGB')
    draw = ImageDraw.Draw(im2)        
    for col in linecolumns:
        draw.line( (col,0,col,h-1), fill='#f00', width = 1)

    return im2

findlines(withlines).show()
findlines(nolines).show() 
```

## 结果

以红色显示检测到的垂直线以进行说明

![图 1](../Images/4183db51263ae0c6a52dc1046cb04ac0.png)![在此处输入图像描述](../Images/1f63336846bf2584aaf59ab54b11d1a6.png)

如您所见，检测到了四个网格线，并且经过一些处理以忽略书的左右两侧和中心，在所需类型上应该没有误报。

这意味着您可以使用上面的代码来检测黑色列，丢弃靠近边缘或中心的那些。如果仍有任何黑色列，则将其归类为“其他”不受欢迎的图片类别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:58:53.980

AFAIK，没有简单的方法可以解决这个问题。您将需要大量的图像处理和一些基本的机器学习来对这些类型的图像进行分类（甚至可能不会 100% 成功）

另一个注意事项：

虽然这只能通过使用机器学习技术来解决，但我建议您首先开始搜索一些图像处理技术，并尝试将您的图像转换为两种图像都有相当大差异的形式。为此，您最好开始阅读有关[fft](http://en.wikipedia.org/wiki/Fast_Fourier_transform)的信息。之后看看一些[数字图像处理](http://en.wikipedia.org/wiki/Digital_image_processing)技术。当您觉得自己对这些有很好的理解时，您可以阅读[模式识别](http://en.wikipedia.org/wiki/Pattern_recognition)。

这只是一种建议的方法，还有更多方法可以实现这一点。

# javascript - 使用普通的 JavaScript/Ajax，如何访问 VB.Net Web 服务返回的 Sql DataTable 对象中的行和列？

> ID：13142831
> 
> 赞同：0
> 
> 时间：2012-10-30T15:52:20.590
> 
> 标签：javascript, sql, web-services, datatable

假设您有一个具有以下原型的 VB.Net Web 方法：

```
Public Function HelloWorld() As DataTable 
```

假设您在普通的 JavaScript/Ajax 中返回给您。您将如何从中获取单个行，以及如何从这些行中获取单个字段（至少假设它来自 SQL 查询 - 我不确定它是否有所作为）？在将其传递给成功函数之前，我不会将其转换为任何特定类型。为了说明我在说什么，这有点像在 AS3 中这样做：

```
for each (var table:Object in pEvent.result.Tables) {
    for each (var row:Object in table.Rows) {
        ac.addItem(row["id"]);
    }
} 
```

除了我不一定要像那样循环遍历它们——我只是想要某种方式从它们中获取信息。谢谢！

编辑：例如，假设您在 VB.Net Web 服务中具有以下功能：

```
<WebMethod()> _
Public Function Test() As DataTable
    Return DBA.OneTimeQuery("SELECT id FROM visits WHERE id = 13")
    // returns a one-row, one-column DataTable with the id field being set to 13
End Function 
```

一旦它进入调用 web 方法的 JavaScript，你怎么能从中取出 13 个呢？我尝试的一切都只是说“[object]”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:22:11.773

您不想在 Web 方法中返回 DataTable 对象。最好的方法是开发一个 REST Web 方法，该方法返回代表您想要返回的数据的 JSON，因为 JavaScript 将能够直接使用 JSON。 [这是一个 QA](https://stackoverflow.com/questions/1830459/how-to-return-json-from-wcf-service)，指导您如何执行此操作。这是如果您使用的是 WCF，看起来您就是这样。我发现将[ASP.NET Web API](http://www.asp.net/web-api)用于 RESTful Web 服务会更好。

# postgresql - 在 PostgreSQL 中使用“游标”进行分页

> ID：13142834
> 
> 赞同：26
> 
> 时间：2012-10-30T15:52:31.997
> 
> 标签：postgresql, pagination

> **可能重复：**
> [如何为 API 客户端提供 1,000,000 个数据库结果？](https://stackoverflow.com/questions/13144005/how-to-provide-an-api-client-with-1-000-000-database-results)

[想知道游标](http://www.postgresql.org/docs/9.2/static/plpgsql-cursors.html)的使用是使用 PostgreSQL 实现“分页”的好方法。

用例是我们希望向 API 客户端提供超过 100,000 行。我们认为实现这一点的一个好方法是允许客户端批量（页面）请求信息。客户端一次可以请求 100 行。我们将返回 100 行以及一个游标，然后当客户端准备好时，他们可以使用我们发送给他们的游标请求接下来的 100 行。

但是，我对游标的工作方式以及应该如何以及何时使用游标有点模糊：

*   游标是否要求数据库连接保持打开状态？
*   游标是否在事务中运行，锁定资源直到它们“关闭”？
*   还有其他我不知道的“陷阱”吗？
*   是否有另一种更好的方法来处理这种情况？

非常感谢！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-30T23:41:48.623

在处理大型数据集的小型 Intranet 应用程序中，游标是分页的合理选择，但您需要准备好在超时后丢弃它们。用户喜欢闲逛、去吃午饭、去度假两周等，然后让他们的应用程序继续运行。如果它是一个基于网络的应用程序，甚至还有什么是“正在运行”以及如何判断用户是否还在附近的问题。

它们不适合具有大量客户端的大型应用程序以及几乎随机进出的客户端，例如基于 Web 的应用程序或 Web API。我不建议在您的应用程序中使用游标，除非您的客户端数量相当少且请求率非常高......在这种情况下发送小批量的行将非常低效，您应该考虑允许范围请求等。

光标有几个成本。如果光标不是`WITH HOLD`，您必须保持事务打开。打开的事务可能会阻止 autovacuum 正常工作，从而导致表膨胀和其他问题。如果声明了游标`WITH HOLD`并且事务未保持打开状态，则您必须支付实现和存储可能很大的结果集的成本——至少，我认为保持游标是这样工作的。另一种方法同样糟糕，保持事务隐式打开直到游标被破坏并防止行被清理。

此外，如果您使用游标，则无法将连接交回连接池。每个客户端需要一个连接。这意味着更多的后端资源仅用于维护会话状态，并为您可以使用基于游标的方法处理的客户端数量设置了一个非常真实的上限。

与具有限制和偏移的无状态连接池方法相比，管理有状态的、基于游标的设置也存在复杂性和开销。您需要让您的应用程序在超时后使游标过期，否则您将面临服务器上潜在的无限资源使用，并且您需要跟踪哪些连接具有哪些游标针对哪些结果集针对哪些用户......

一般来说，尽管它可能效率很低，但`LIMIT`可能`OFFSET`是更好的解决方案。[不过](https://stackoverflow.com/a/13149320/398670)[，搜索主键通常比使用 更好`OFFSET`](https://stackoverflow.com/a/13149320/398670)。

顺便说一句，您正在查看 PL/pgSQL 中游标的文档。您需要此作业[的普通 SQL 级游标](http://www.postgresql.org/docs/current/static/sql-declare.html)。

* * *

> 游标是否要求数据库连接保持打开状态？

是的。

> 游标是否在事务中运行，锁定资源直到它们“关闭”？

是的，除非它们是`WITH HOLD`，在这种情况下它们会消耗其他数据库资源。

> 还有其他我不知道的“陷阱”吗？

是的，正如上面应该解释的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:00:31.457

对于 HTTP 客户端，不要使用游标来实现分页。为了可扩展性，您不希望服务器资源在请求之间被占用。

相反，请在查询中使用 LIMIT 和 OFFSET；请参阅[`LIMIT`和`OFFSET`在 Pg 文档](http://www.postgresql.org/docs/current/interactive/queries-limit.html)中。

但请确保您的表上的索引将支持这种形式的高效查询。

设计一个 RESTful API，以便客户端可以调用“next_url”（也在响应中传递）来获取下一组行。

# apache - 在 easyphp 上安装 openSSL 以开发 Facebook 应用程序

> ID：13142838
> 
> 赞同：0
> 
> 时间：2012-10-30T15:52:54.663
> 
> 标签：apache, ssl, https, openssl, easyphp

我一直在尝试开发一个 facebook 应用程序。但自 2012 年 10 月 1 日起，facebook 需要安全 (https / SSL) 连接。在我启动真正的应用程序并使用 SSL 获得服务器之前，我真的想测试创建一个 facebook 应用程序。

所以我找到了openSSL，并认为我可以将它安装在我的easyphp（apache）本地服务器上。

唯一的问题是找出方法有点棘手。我不是服务器/apache/ssl pro。我创建网络应用程序。那么有没有人有一些关于如何做到这一点的信息。

或者也许是其他（更好的）建议。

提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T17:23:52.307

好的，我找到了一种无需使用 SSL 的服务器即可测试构建 facebook 应用程序的方法。只需使用公共保管箱链接。Dropbox 是安全的。可以在这里找到简单的教程：http: [//www.wpcode.net/fb-app-dropbox.html/](http://www.wpcode.net/fb-app-dropbox.html/) 不过我必须添加一件事。Facebook 需要文件夹而不是文件。要作弊，请将 yourfile.html?fakevar=1 添加到您的保管箱公共链接。ps dropbox 无法解析 php/asp，因此它仅用于 js 和基本测试。我希望这可以节省一些时间；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-11T22:02:07.757

虽然现在回答为时已晚，但在 facebook 应用程序中使用 Open SSL 并不是一个好主意。那里有许多便宜的 SSL，您可以购买其中之一。例如，我以 9 美元的价格购买了 Positive SSL（仅适用于一个域或子域）。

您尝试[Heroku](http://heroku.com/)来部署和测试您的应用程序

# c# - 将现有列表项添加到另一个列表

> ID：13142839
> 
> 赞同：-1
> 
> 时间：2012-10-30T15:52:55.257
> 
> 标签：c#, list, oop

好的，为了解释这一点，我将尝试总结我在做什么

在某些时候，我在“供应商”类中创建了一个项目列表。在此示例中，将零件列表添加到主类中存在的供应商列表中。

在某些时候，我想选择一个特定的部分添加到作业（作业类），这个部分已经创建，我只是想把它添加到作业中。

该部分已使用以下内容添加：“在此之前，已选择供应商”

```
Class Supplier
public void AddParts( int PartNum, string PartName, string PartDescription, decimal      Cost, decimal CostWithVAT, decimal Price, short Quantity)
{          
    m_partUsed.Add(new Part(PartNum, PartName, PartDescription, Cost, Price, Quantity));         
} 
```

这是我打算如何实现的：

```
 private void btnAddJobPart_Click(object sender, EventArgs e)
    {
        //Select the job that the part is to be added too
        string selectedJob = cboJobPartRef.Text;
        List<Job> foundJob = Program.AuspexDo.SelectJob(selectedJob);

        //For the job found
        foreach (Job j in foundJob)
        {
            //Select the supplier
            string selectedSupplier = cboJobSupplier.Text;
            List<Supplier> foundSup = Program.AuspexDo.SelectSupplier(selectedSupplier);

            //For the supplier found, find the part to be added
            foreach (Supplier s in foundSup)
            {
                string selectedPart = cboJobParts.Text;
                List<Part> foundPart = s.SelectPart(selectedPart);

                //Get those part details

                //Add those details to the job

                j.AddParts //the part item here from the supplier list;

            }                   
        }
    } 
```

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:58:58.747

我认为您正在寻找[List.AddRange](http://msdn.microsoft.com/en-us/library/z883w3dc.aspx)

```
m_partUsed.AddRange(foundPart) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:58:52.070

该方法`AddParts`创建一个新零件。我将更改此方法，使其采用 Part 参数，然后将其添加到列表中。

```
public void AddParts(Part p)
{          
    m_partUsed.Add(p);         
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T16:05:27.143

为什么不将`AddParts`方法更改为（并调用它，`AddPart`因为它一次只添加一个部分）：

```
public void AddPart(Part part)
{          
    m_partUsed.Add(part);         
} 
```

然后，您可以添加一个部分

```
j.AddPart(somePart); 
```

或使用对象初始化器

```
j.AddPart(new Part{Num=PartNum, Name=PartName, Description=PartDescription,
                   Cost=Cost, Price=Price, Quantity=Quantity}); 
```

或使用构造函数

```
j.AddPart(new Part(PartNum, PartName, PartDescription,
                   Cost, Price, Quantity)); 
```

* * *

如果您希望保留原始实现，您可以`AddPart`并排使用两种方法。这称为方法重载。然后，您可以选择添加零件对象或单个零件值。

```
public void AddPart(Part part) { ... }
public void AddPart(int PartNum, string PartName,
                    string PartDescription, decimal Cost,
                    decimal CostWithVAT, decimal Price, short Quantity) { ... } 
```

只要参数列表不同，您就可以拥有任意多个具有相同名称的方法。参数的数量必须不同，或者参数类型必须不同。不考虑参数名称。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T16:06:41.650

您还可以执行以下操作：

```
j.AddParts(foundSup.SelectMany(s => s.SelectPart(selectedPart))) 
```

虽然 AddParts 看起来像 Alexei 的答案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-08T00:39:10.543

如果我正确理解 OP，他想将列表添加到列表中，...

好吧，我不了解 C#，但我了解 Unity C#

我很快就给你做了：

```
using UnityEngine;
using System.Collections;
using System.Collections.Generic; // THIS one is very important since it contains the List

public class TestScript : MonoBehaviour {
    List<int> ListOfIntegers = new List<int>();
    List<int> ListOfIntegers1 = new List<int>();
    List<List<int>> ListOfLists = new List<List<int>>();

    void Start(){
        ListOfIntegers.Add(1);
        ListOfIntegers1.Add(10);
        ListOfLists.Add(ListOfIntegers1);
        ListOfLists.Add(ListOfIntegers);
        Debug.Log((ListOfLists[0])[0]); // you get debug 10
    }
} 
```

allso 它读取正确我检查了;)

我希望这很有用。到非 Unity C#

# javascript - 如果用户不输入信息，我可以做些什么来防止默认文本在 Web 表单中提交？

> ID：13142846
> 
> 赞同：0
> 
> 时间：2012-10-30T15:53:12.447
> 
> 标签：javascript, html

我有一个表格，要求输入名字/姓氏、电子邮件和电话。我不想使用“占位符”，因为 IE 缺乏这种能力。我已经尝试了很多事情，但对脚本编码知之甚少，当有人提交他们的信息时，我如何将默认文本从字段中剥离出来。

我需要找到一种方法，让下面的代码只向我发送输入字段的数据，而不是像“电话”这样的表单中的 txt

```
<form action="{SUBMIT_FORM}" method="post">

<input type="text" class="input-field"  onblur="if (this.value == '') {this.value = '*First Name : (Required Field)';}" onfocus="if (this.value == '*First Name : (Required Field)') {this.value = '';}" name="{lead_first_name}" id="{lead_first_name}" value="*First Name : (Required Field)"/>
<input type="text" class="input-field"  onblur="if (this.value == '') {this.value = 'Last Name :';}" onfocus="if (this.value == 'Last Name :') {this.value = '';}" name="{lead_last_name}" id="{lead_last_name}" value="Last Name :"/>
<input type="text" class="input-field"  onblur="if (this.value == '') {this.value = '*Email : (Required Field)';}" onfocus="if (this.value == '*Email : (Required Field)') {this.value = '';}" name="{lead_email}" id="{lead_email}" value="*Email : (Required Field)"/>
<input type="text" class="input-field" onblur="if (this.value == '') {this.value = 'Phone :';}" onfocus="if (this.value == 'Phone :') {this.value = '';}" name="{lead_home_phone}" id="{lead_home_phone}" value="Phone :"/>
<input type="submit" class="sbt-btn" value="Submit"  onclick="{SUBMIT_SCRIPT}" />

{VALIDATE_SCRIPT}
</form>
<small>*We promise to never share, rent or sale your personal information.</small> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:54:36.883

在您的表单验证器中，如果[`preventDefault()`](https://developer.mozilla.org/en-US/docs/DOM/event.preventDefault)表单包含您不想提交的占位符数据，您可以使用它来阻止表单被提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:11:44.787

这是我在简单的文本输入上的操作方法。HTML：

```
<form id="myemailform">
  <input class="text email" type="text" name="email" value="Enter e-mail address"/>
  <input type="submit" value="Submit">
</form 
```

查询：

```
<script src="http://code.jquery.com/jquery-1.8.2.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function() {
    $('input.text').each(function() {
        $.data(this, 'default', this.value);
    }).focus(function() {
        if (!$.data(this, 'edited')) {
            this.value = "";
        }
    }).change(function() {
        $.data(this, 'edited', this.value != "");
    }).blur(function() {
        if (!$.data(this, 'edited')) {
            this.value = $.data(this, 'default');
        }
    });

    $('#myemailform').submit(function() {
        if($(".email").val() == "Enter e-mail address") {$(".email").val("");}
        return true;
    });
});
</script> 
```

javascript 查找 input.text 元素并删除焦点、模糊或更改的占位符文本。如果表单在提交时带有占位符文本，它会在提交之前先删除占位符文本。

# jquery-ui - 引导 jquery ui 滑块

> ID：13142852
> 
> 赞同：2
> 
> 时间：2012-10-30T15:53:33.033
> 
> 标签：jquery-ui, twitter-bootstrap, slider

一直在尝试将 jquery 滑块宽度调整到正确的大小，并将其拖动限制在其区域之外。我知道字体大小使滑块正确缩放；但是设置 font-size 会导致宽度看起来很奇怪。如何将滑块框缩小为小方块而不滑出？

jsfiddle / 在这里编辑 [http://jsfiddle.net/EkkKG/](http://jsfiddle.net/EkkKG/)

```
 <div class="navbar navbar-fixed-top">
     <div class="navbar-inner">
       <div class="container">
        <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </a>
    <a href="#" class="brand">Project name</a>
    <div class="nav-collapse">
      <ul class="nav">
         <li class="dropdown">
          <a data-toggle="dropdown" class="dropdown-toggle" href="#">Dropdown <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a href="#">
                <p>
                                <label for="amount">Price range:</label>
                                <input type="text" id="amount" style="border: 0; color: #f6931f; font-weight: bold;" />
                            </p>

                <!--div style="font-size:10px;"-->
                   <div id="slider-range"></div>
              <!--/div-->
                </a></li>

            <li><a href="#">Another action</a></li>

          </ul>
        </li>
      </ul>
    </div><!-- /.nav-collapse -->
  </div>
</div><!-- /navbar-inner -->
  </div>​ 
```

jQuery

```
 $( "#slider-range" ).slider({
            range: true,
            min: 0,
            max: 500,
            values: [ 75, 300 ],
            slide: function( event, ui ) {  $( "#amount" ).val( "$" + ui.values[ 0 ] + " -   $" + ui.values[ 1 ] );
            }
  });
   $( "#amount" ).val( "$" + $( "#slider-range" ).slider( "values", 0 ) + " - $" + $(  "#slider-range" ).slider( "values", 1 ) ); 
```

​</p>

![在此处输入图像描述](../Images/a0077270f2364d5230749e0aca52b287.png)

chrome中“隐身”模式下的这个小提琴给了我想要的结果，但在我的实际情况下它仍然没有

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T20:37:25.437

指向引导程序的 2.2 版 css

# python - Python cElementTree 占用 2gb RAM 迭代解析大文件

> ID：13142854
> 
> 赞同：1
> 
> 时间：2012-10-30T15:53:41.343
> 
> 标签：python, file-io, xml-parsing

我正在尝试迭代解析一个大的（186MB）XML 文件。该文件本身只是复杂 MyNodeType 节点的列表。例如，

```
<MyNodeTypeList>
    <MyNodeType>
        ...
    </MyNodeType>
    <MyNodeType>
        ...
    </MyNodeType>
    <MyNodeType>
        ...
    </MyNodeType>
</MyNodeTypeList> 
```

我试图通过迭代解析文件来保持较低的内存使用率，但它似乎会严重减慢大约 30k 的记录，并在 92k 时停止。该过程也占用了大约 2gb 的内存，即使使用像下面这样的简单代码也是如此：

```
import xml.etree.cElementTree as ET

def main(argv):
    it = ET.iterparse(argv[0])
    count = 0
    for (ev, el) in it:
        if (ev == "end" and el.tag == "MyNodeType"):
            count += 1
    print count

if __name__ == "__main__":
   main(sys.argv[1:]) 
```

就内存使用而言，有什么方法可以将处理代码保持在最低限度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T16:38:46.937

这种行为`iterparse`被[记录在案](http://effbot.org/zone/element-iterparse.htm#incremental-parsing)：

> 请注意，iterparse 仍然会构建树，就像 parse 一样，但是您可以在解析时安全地重新排列或删除树的某些部分

为避免将整个树保留在内存中，请使用示例中提供的方法：

```
# get an iterable
context = iterparse(source, events=("start", "end"))

# turn it into an iterator
context = iter(context)

# get the root element
event, root = context.next()

for event, elem in context:
    if event == "end" and elem.tag == "record":
        ... process record elements ...
        root.clear() 
```

# iphone - 将已发布的 iPhone/iPad 应用程序转换为通用

> ID：13142855
> 
> 赞同：2
> 
> 时间：2012-10-30T15:53:45.247
> 
> 标签：iphone, ios, ipad, app-store

我有一个应用程序已在应用程序商店发布，iPhone 和 iPad 有单独的版本。现在我希望将应用程序转换为通用版本，但我有一个不确定是否可以解决的问题。

两个版本的应用程序都使用不同的包标识符（例如 com.mycompany.app.iphone 和 com.mycompany.app.ipad）。我希望新（通用）版本在从应用商店下载时覆盖任一旧版本。更复杂的是，需要保留为该应用程序存储的核心数据。

我不确定它是否可能，也许协议是在新的捆绑标识符下发布通用版本并让用户重新开始，但如果有可用的解决方法，那将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:40:14.410

你的选择：

```
1: Update both your iPhone and iPad apps with this universal binary (with respective bundleIDs and app names)
2: Create a way to sync data between apps by creating a web service. one of the apps I have used extensively - Gas Cubby, does this for transferring data from its free app to paid app. You could implement it in a similar way
3: Nuke one of the apps, update the other app with the universal binary 
```

选项 1 是最简单的。2 需要更长的时间。3脏了。

（如果我遇到任何选项，将使用更多选项更新此答案）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:19:40.200

据我所知以及我之前读过的内容，您无法更改在应用商店中发布的应用的捆绑标识符。

由于沙盒，从新应用程序访问旧应用程序的数据也是不可能的。

您可以通过多种方式解决此问题，具体取决于哪种方式最适合您。您可以创建一个新的通用应用程序，并放弃希望用户更改其偏好的旧应用程序，或者您可以将相同的更新推送到两个应用程序，本质上，以两个不同的名称拥有相同的应用程序。我不确定苹果对第二种选择的立场是什么，但无论哪种方式都会很麻烦。祝你好运！

# jquery-mobile - 可以在 document.ready() 事件中了解设备的方向吗？

> ID：13142858
> 
> 赞同：0
> 
> 时间：2012-10-30T15:53:48.587
> 
> 标签：jquery-mobile, device-orientation

我在 jQuery 的 window.load 事件中检索移动设备的方向。当然，问题是在所有图像等都加载到浏览器中之前不会触发此事件。因此，我的应用程序的反应时间变慢了。

我通过调用 $.event.special.orientationchange.orientation() 来检索加载事件中的方向，这对于加载和方向更改事件都非常有用。但是，我没有看到任何事件参数传递到 document.ready()，所以我当时似乎无法了解设备的方向。

是否可以这样做，在 document.ready() 中找出设备的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:36:48.927

最好使用 jQueryMobile 事件`pageinit`而不是`document.ready()`. 请参阅文档中的参考：http: [//jquerymobile.com/demos/1.2.0/docs/api/events.html](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)

# facebook - “报告的上次移动安装”字段在哪里？

> ID：13142861
> 
> 赞同：3
> 
> 时间：2012-10-30T15:53:55.567
> 
> 标签：facebook

[facebook 移动应用安装广告教程](https://developers.facebook.com/docs/tutorials/mobile-app-ads/)说：

> [...] 转到应用程序摘要页面，有一个“报告的上次移动安装”字段提供您的应用程序上次报告安装的时间戳。

我在我的应用摘要页面上找不到该字段。假设应用程序摘要页面是我可以通过单击 facebook 开发人员门户标题栏中的“应用程序”访问的页面。

我在哪里可以找到那个字段？它是可选的吗？

**编辑/回答：**

它仅在应用发布至少一个安装后才会出现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T18:11:40.963

您的应用程序是否正确配置为本机移动应用程序并使用最新版本的 SDK？

对我来说，页面加载良好并包含该信息，即 `https://developers.facebook.com/apps/<APP ID>`页面，该字段位于顶部，以及应用程序描述、支持电子邮件地址等：

![在此处输入图像描述](../Images/76ecca98cbddb7511edd8e8f67f9aa31.png)

# sql-server - SQL Server 数据工具和 Visual Studio 问题

> ID：13142868
> 
> 赞同：7
> 
> 时间：2012-10-30T15:54:19.620
> 
> 标签：sql-server, visual-studio-2010, sql-server-data-tools

我刚刚安装了vs2010 sp1 Ultimate、sqlserver 2012和最新版的sqlserver数据工具。我已经从源代码管理中打开了一个解决方案，并在尝试构建数据库项目时收到了一堆错误，如下所示。

SQL71566：不能在 Microsoft.Data.Tools.Schema.Sql.SchemaModel.SqlTable 和群集 Microsoft.Data.Tools.Schema.Sql.SchemaModel 上设置 Microsoft.Data.Tools.Schema.Sql.SchemaModel.SqlFilegroup。 SqlPrimaryKeyConstraint。

在 Windows 7 专业版 64 位上运行

这对团队的其他成员来说工作得很好，他们似乎都和我有相同的设置。

我已经尝试卸载并重新安装 vs2010 和 ssdt

有什么想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T14:32:17.827

我在 2012 年 11 月的 SSDT 版本中收到了这个错误，但只有当我将项目从 32 位 vista 机器移动到 64 位 vista 机器时。我能够通过启用项目设置“为常见对象启用扩展 Transact-SQL 验证”来构建我的项目。过去启用此设置会导致其他问题，因此我不确定这是否会在此环境中出现其他问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T15:57:30.843

这似乎是 MS 尚未提供修复的错误：

[http://connect.microsoft.com/VisualStudio/feedback/details/765217/when-compiling-vs2010-database-project-in-vs2012-i-receive-error-sql71566](http://connect.microsoft.com/VisualStudio/feedback/details/765217/when-compiling-vs2010-database-project-in-vs2012-i-receive-error-sql71566)

# jquery-mobile - 使用 jquery 移动滑块控制画架符号

> ID：13142870
> 
> 赞同：1
> 
> 时间：2012-10-30T15:54:27.970
> 
> 标签：jquery-mobile, slider, timeline, easeljs, createjs

我是 createjs 和 jquery mobile 的新手。这可能是一个简单的问题，但我不知道该怎么做，也没有在网上找到任何答案。

我使用用于 CreateJS 的 Flash 工具包创建了一个画布对象。我想用一个 jQuery Mobile 滑块来控制它。

这是我的html代码：

```
<canvas id="canvas" width="200" height="200" style="background-color:#ffffff"></canvas>
<input type="range" name="slider-1" id="slider-1" value="1" min="1" max="6" data-highlight="true" /> 
```

我要控制的实例名称是 squareB1，它的时间线有 6 帧，请看下面的代码~~片段~~。请注意，滑块有 6 个值，帧数相同。

```
(function (lib, img, cjs) {

var p; // shortcut to reference prototypes

// stage content:
(lib.squareB = function() {
this.initialize();

// Layer 1
this.instance = new lib.squareB1();
this.instance.setTransform(100,100,1,1,0,0,0,19.4,60.5);

this.addChild(this.instance);
}).prototype = p = new cjs.Container();
p.nominalBounds = new cjs.Rectangle(80.6,39.5,38.9,121);

// symbols:
(lib.squareB1 = function(mode,startPosition,loop) {
this.initialize(mode,startPosition,loop,{thiner:0,thin:1,mean:2,thick:3,thicker:4},true);

// timeline functions:
this.frame_0 = function() {
    this.stop();
}

// actions tween:
this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(4));

// Layer 1
this.shape = new cjs.Shape();
this.shape.graphics.f("rgba(71,31,7,0.2)").s("#1A1A1A").ss(1,1,1).p("ADCpcIAAS5ImDAAIAAy5IGDAA").cp();
this.shape.setTransform(19.5,60.5);

this.shape_1 = new cjs.Shape();
this.shape_1.graphics.f("rgba(71,31,7,0.2)").s("#1A1A1A").ss(1,1,1).p("Ak3pcIJvAAIAAS5IpvAAIAAy5").cp();
this.shape_1.setTransform(19.4,60.5);

this.shape_2 = new cjs.Shape();
this.shape_2.graphics.f("rgba(71,31,7,0.2)").s("#1A1A1A").ss(1,1,1).p("AmtpcINbAAIAAS5ItbAAIAAy5").cp();
this.shape_2.setTransform(19.4,60.5);

this.shape_3 = new cjs.Shape();
this.shape_3.graphics.f("rgba(71,31,7,0.2)").s("#1A1A1A").ss(1,1,1).p("AojpcIRHAAIAAS5IxHAAIAAy5").cp();
this.shape_3.setTransform(19.4,60.5);

this.shape_4 = new cjs.Shape();
this.shape_4.graphics.f("rgba(71,31,7,0.2)").s("#1A1A1A").ss(1,1,1).p("AKaJdI0zAAIAAy5IUzAAIAAS5").cp();
this.shape_4.setTransform(19.4,60.5);

this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.shape}]}).to({state:[{t:this.shape_1}]},1).to({state:[{t:this.shape_2}]},1).to({state:[{t:this.shape_3}]},1).to({state:[{t:this.shape_4}]},1).wait(1));

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(-35.3,0,109.7,121);

})(lib = lib||{}, images = images||{}, createjs = createjs||{});
var lib, images, createjs; 
```

然后，我在 jQuery 中做这样的事情，这是另一个 JS 文件的一部分：

```
var canvas, stage, exportRoot;

function init() {
canvas = document.getElementById("canvas");
exportRoot = new lib.squareB();

stage = new createjs.Stage(canvas);
stage.addChild(exportRoot);
stage.update();

createjs.Ticker.setFPS(24);
createjs.Ticker.addListener(stage);
}

$('#slider-1').live('change', function(){
    var slider_value = $(this).slider().val();
    if(slider_value==1){
    }   
    else if(slider_value==2){
        //here is the issue, squareB1 is the symbol instance
        exportRoot.squareB1.gotoAndStop(1);
    }
    else if...
} 
```

我的问题是如何使用滑块转到画布对象中的特定实例框架。
我很感激任何答案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:11:45.870

toolkit 的 flash 阶段通常是您的 FLA 的名称，它是生成的 JavaScript 文件中的第一个库定义。通常它是在 Toolkit 创建的 HTML 中作为“exportRoot”为您创建的。在您的情况下，它可能是“SquareB”的一个实例（请注意“舞台内容”注释）。

```
 var exportRoot = new lib.SquareB();
    exportRoot.instance.gotoAndStop(1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T21:28:24.733

[随时在支持论坛http://community.createjs.com](http://community.createjs.com)上发布 CreateJS 问题

这看起来像用于 CreateJS 输出的 Toolkit。这不起作用的可能原因是，除非您创建了一个名为“canvas”的变量，它是 Flash 的导出根，否则 squareB1 没有定义。Flash 中舞台上的元素将作为 exportRoot 的子项导出，您可以在生成的 HTML 引导文件中看到该子项。squareB1 孩子可能生活在该范围内。

您能否发布更多代码来显示创建导出根目录的位置，或者更多地描述您的设置？

# ajax - 提交后传输 AJAX 数据

> ID：13142875
> 
> 赞同：0
> 
> 时间：2012-10-30T15:54:53.017
> 
> 标签：ajax, jquery

我使用下面的代码在不重新加载页面的情况下提交我的表单，但是当 data.a="a" 或 "b" 等在 AJAX 的成功部分时，我仍然想按照传统方式提交表单没有jQuery的php。

所以在这种情况下，目的是将 AJAX 数据（“data:myForm.serialize()+”&id_town="+id_town,"）传输到表单的“action”html 属性中指定的 url。

你有什么主意吗 ？

html代码：

```
<form id="inscription_form_home" action="index.php?module=membres&action=inscription" method="post" >
...
</form> 
```

jQuery代码：

```
$("#inscription_form_home").submit(function() { 
var myForm = $(this);

$.ajax({
    dataType: 'json',
    type: "POST",
    url: "traitement_profil.php",
    data:myForm.serialize()+"&id_town="+id_town,
    success: function(data){
        if (data.a == "a" || data.a == "b" ){
            // Transmit the data part to the form url
        }else{                  
            alert("Inscription OK.");
        }
    }
});

return false;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:17:52.583

正如已经说过的，您可以在

评论后的版本，：

试试这个...

```
<form id="inscription_form_home" action="index.php?module=membres&action=inscription" 

    method="post" >
    ...
    <button id="mButton">Submot<button>
    </form> 

$(document).ready(function() {$("#mButton").bind('click', mysubmit($));});

   function mysubmit()
   {    
    $.ajax({
        dataType: 'json',
        type: "POST",
        url: "traitement_profil.php",
        data:myForm.serialize()+"&id_town="+id_town,
        success: function(data){
            if (data.a == "a" || data.a == "b" ){
                //do your new call here, or you can also submit the form
            }else{                  
                alert("Inscription OK.");
            }
        }
    });    
    return false;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:09:50.600

你可以这样：

```
$(location).attr('href',YOUR URL); 
```

# xml - 括号前的空格

> ID：13142876
> 
> 赞同：0
> 
> 时间：2012-10-30T15:55:03.917
> 
> 标签：xml, coding-style

据我所知，虽然这对处理文件没有影响，但我一直想知道在元素标记的右括号之前使用空格的传统方法是什么。在我的时间里，我已经看过数百甚至数千个 XML 文档，但还没有看到真正的模式。

因此，如果存在这样的共识，我想知道以下两种表示法中的哪一种更受欢迎。

`<element attribute1="value1" attribute2="value2">`

`<element attribute1="value1" attribute2="value2" >`

我意识到这可能是一个微不足道的问题，但它会帮助我在 XML 文档中达到某种一致性。我注意到我多年来创建的文档倾向于在这两种风格之间切换。每当我创建一个新文档时，我通常最终会浪费一分钟来决定使用哪种样式，所以我欢迎输入我最终应该选择哪种样式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:59:51.440

就个人而言，我很好

```
<element attribute1="value1" attribute2="value2"> 
```

但是当它是时`/>`，我更喜欢

```
<element attribute1="value1" attribute2="value2" /> 
```

可能是为了让它更显眼，更有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T16:08:33.470

不要手动格式化 XML。

例如：[http ://www.xmltoolbox.com/](http://www.xmltoolbox.com/)

实际上，不要手动格式化任何源代码。计算机擅长重复性任务，并且可以 100% 一致地格式化 XML。决定你喜欢的风格，然后对计算机进行编程来做到这一点。

也就是说，您很少`<element attribute="value" >`在 XML 文档中看到。作为另一个例子，大多数浏览器会收紧 XHTML 源代码的右尖括号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T16:21:12.913

我个人更喜欢没有空白。

```
<element attribute1="value1" attribute2="value2" > 
```

原因是末尾的空白会造成不平衡的外观，因为开始标签与文本没有间隔。同样，任何一种方式都对您有用，但以对称的名义使用：

```
<element attribute1="value1" attribute2="value2"> 
```

或者只是为了让它更加混乱，请使用以下选项：

```
< element attribute1="value1" attribute2="value2" > 
```

# jquery - 使用jquery水平滑动带有控件的ul li列表

> ID：13142878
> 
> 赞同：2
> 
> 时间：2012-10-30T15:55:08.633
> 
> 标签：jquery, list

抱歉，如果这是之前发布的，我正在寻找一个使用控件水平滚动 ul 列表的脚本，大多数示例都被破坏了，因为 li itens 应该具有相同的固定宽度，而文本的长度不同。

```
<div id="slidelist">
<span class="nav-prev"><a href="#">&laquo;</a></span>
<div class="listarea">
<ul id="submen">
<li>Home</li>
....
</ul>
</div>
<span class="nav-next"><a href="#">&raquo;</a></span>
</div> 
```

CSS：

```
#slidelist #submen ul  {display:block; height:20px; position:absolute}

#slidelist #submen ul li {display:inline; border:none; margin-right:20px}

#slidelist .listarea {width:90%;float:left;}

#slidelist .nav-prev {float:left;width:20px;}
#slidelist .nav-next {float:right;width:20px;} 
```

单击上一个滚动或在 div 内滑动列表。

![带滑块的菜单](../Images/87fc4dfc0425d7cee39863f0acc9489d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:57:29.097

尝试类似的东西

```
$(".nav-prev").click(function(){$(this).show('slide', { direction: 'left' }, 1000);})
$(".nav-next").click(function(){$(this).show('slide', { direction: 'left' }, 1000);}) 
```

# r - 从 R 脚本中将作业提交到从节点？

> ID：13142882
> 
> 赞同：14
> 
> 时间：2012-10-30T15:55:27.917
> 
> 标签：r, parallel-processing, hpc, qsub, torque

`myscript.R`使用作业调度程序（特别是[PBS](http://en.wikipedia.org/wiki/Portable_Batch_System)）在集群从节点上运行

目前，我使用以下命令将 R 脚本提交到从节点

```
qsub -S /bin/bash -p -1 -cwd -pe mpich 1 -j y -o output.log ./myscript.R 
```

R 中是否有允许我在头节点上运行 myscript.R 并将单个任务发送到从节点的函数？就像是：

```
foreach(i=c('file1.csv', 'file2.csv', pbsoptions = list()) %do% read.csv(i) 
```

* * *

更新： qsub 命令的替代解决方案是`#/usr/bin/Rscript`从第一行中删除`myscript.R`并直接调用它，正如@Josh 所指出的那样

```
qsub -S /usr/bin/Rscript -p -1 -cwd -pe mpich 1 -j y -o output.log myscript.R 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-14T14:29:09.300

如果您想从 R 脚本中提交作业，我建议您查看“BatchJobs”包。这是DESCRIPTION文件中的引用：

> 提供 Map、Reduce 和 Filter 变体以在 PBS/Torque、LSF、SLURM 和 Sun Grid Engine 等批处理计算系统上生成作业。

BatchJobs 似乎比以前的类似软件包（例如 Rsge 和 Rlsf）更复杂。有用于注册、提交和检索作业结果的功能。这是一个简单的例子：

```
library(BatchJobs)
reg <- makeRegistry(id='test')
batchMap(reg, sqrt, x=1:10)
submitJobs(reg)
y <- loadResults(reg) 
```

您需要配置 BatchJobs 以使用您的批处理排队系统。submitJobs “resource” 参数可用于为作业请求适当的资源。

如果您的集群不允许长时间运行的作业，或者它严重限制了长时间运行的作业的数量，这种方法非常有用。BatchJobs 允许您通过将工作分解为多个作业来绕过这些限制，同时隐藏与手动执行相关的大部分工作。

文档和示例可在[项目网站上](https://github.com/tudo-r/BatchJobs)获得。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T11:17:57.200

对于我们的大部分工作，我们确实使用 qsub（而不是）并行运行多个 R 会话。

如果是针对多个文件，我通常会这样做：

```
while read infile rest
do
qsub -v infile=$infile call_r.sh 
done < list_of_infiles.txt 
```

call_r.sh：

```
...
R --vanilla -f analyse_file.R $infile
... 
```

分析文件.R：

```
args <- commandArgs()
infile=args[5]
outfile=paste(infile,".out",sep="")... 
```

然后我把所有的输出组合起来......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-15T13:15:16.353

R 包 Rsge 允许将作业提交到 SGE 托管集群。它基本上将所需的环境保存到磁盘，构建作业提交脚本，通过 qsub 执行它们，然后整理结果并将它们返回给您。

因为它基本上包装了对 qsub 的调用，所以它也应该与 PBS 一起工作（尽管由于我不了解 PBS，所以我不能保证）。您可以通过更改 Rsge 关联的全局选项（`options()`输出中的前缀 sge.）来更改 qsub 命令和使用的选项

它不再在 CRAN 上，但可以从 github 获得：[https](https://github.com/bodepd/Rsge) ://github.com/bodepd/Rsge ，尽管它看起来不再像维护了。

要使用它，请使用随包提供的应用类型函数之一：sge.apply、sge.parRapply、sge.parCapply、sge.parLapply 和 sge.parSapply，它们是 apply、rapply、rapply(t(x) ,...), lapply 和 sapply 分别。除了传递给非并行函数的标准参数之外，还需要几个其他参数：

```
njobs:             Number of parallel jobs to use

global.savelist:   Character vector giving the names of variables
                   from  the global environment that should be imported.

function.savelist: Character vector giving the variables to save from
                   the local environment.

packages:          List of library packages to be loaded by each worker process
                   before computation is started. 
```

这两个 savelist 参数和 packages 参数基本上指定了在执行代码之前应该将哪些变量、函数和包加载到在集群机器上运行的新 R 实例中。X 的不同组件（列表项或 data.frame 行/列）在 njobs 不同的作业之间划分，并作为作业数组提交给 SGE。每个节点启动一个 R 实例，加载指定的变量、函数和包，执行代码，保存并将结果保存到 tmp 文件。控制 R 实例检查作业何时完成，从 tmp 文件加载数据并将结果重新连接在一起以获得最终结果。

例如计算基因列表的随机样本的统计数据：

```
library(Rsge)
library(some.bioc.library)

gene.list <- read.delim(“gene.list.tsv”)

compute.sample <- function(gene.list) {
   gene.list.sample <- sample(1000, gene.list)
   statistic <- some.slow.bioc.function(gene.list.sample)
   return (statistic)

}

results <- sge.parSapply(1:10000, function(x) compute.sample,
                         njobs = 100,
                         global.savelist = c(“gene.list”),
                         function.savelist(“compute.sample”),
                         packages = c(“some.bioc.library”)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-11T08:15:35.137

如果您想在头节点上使用脚本时将任务发送到从节点，我相信您的选择如下：

1.  预先分配所有从节点和它们，并在不需要它们时让它们处于待机状态（正如我在第一个答案中所建议的那样）。
2.  当需要从节点时启动新作业，并让它们将结果保存到磁盘。暂停主进程，直到从属完成任务，然后组装它们的输出文件。

选项 2 绝对是可能的，但需要更长的时间来实现（实际上我自己已经做过好几次了）。@pallevillesen 的回答非常准确。

### 原始答案，带有误解的问题

我自己从未与 PBS 合作过，但您似乎可以使用它来提交 MPI 作业。在执行 R 脚本之前，您可能需要加载 MPI 模块，将这些行的 shell 脚本发送到`qsub`.

```
#!/bin/bash
#PBS -N my_job
#PBS -l cput=10:00:00,ncpus=4,mem=2gb

module load openmpi
module load R
R -f myscript.R 
```

然后，您应该能够使用并行`doSNOW`执行`foraech`循环。

```
n.slaves <- 4

library(doSNOW)
cl <- makeMPIcluster(n.slaves)
registerDoSNOW(cl)

foreach(i=c('file1.csv', 'file2.csv'), pbsoptions = list()) %dopar% read.csv(i) 
```

# ruby-on-rails - 从 rails 参数获取第一行

> ID：13142884
> 
> 赞同：0
> 
> 时间：2012-10-30T15:55:29.377
> 
> 标签：ruby-on-rails, arrays, object, param

我有一个要保存到数据库中的对象/参数。但是当我这样做时，我想获得该对象中的第一行来做一些 Javascript 的事情。因此，如果我这样做，我会从 Javascript 对象（由 AJAX 请求发送）中收到什么：

```
<% @markers.each do |marker| %>
  <%= marker%>
<% end %> 
```

这是记录吗：

```
["triplocations_attributes", {"0"=>{"latlng"=>"53.20192541983673, 5.535024029052693", "title"=>"first", "description"=>"first"}, "1"=>{"latlng"=>"53.18896756239149, 5.536568981445271", "title"=>"2nd", "description"=>"2nd"}}] 
```

现在，我想要的是从第一（0）行获取 latlng。谁能告诉我怎么做？

到目前为止我尝试过的没有奏效：

```
<%= marker.triplocations_attributes %>
<%= marker[0].title %>
<%= marker.title %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:07:22.260

假设你有类似的东西似乎是合理的

```
class Marker < ActiveRecord::Base
  has_many :triplocations
  ...
end 
```

在这种情况下，您需要访问

```
marker.triplocations[0].title
marker.triplocations[0].description
... 
```

# html - 如何根据表格及其在 Dart 中的行填充列表？

> ID：13142889
> 
> 赞同：3
> 
> 时间：2012-10-30T15:55:45.733
> 
> 标签：html, list, html-table, dart

我想根据 HTML 表填充对象列表。假设我有以下课程：

```
class Employee
{
  String name;
  String department;
  num salary;

  ...methods
} 
```

在我的 HTML 中，我有下表：

```
<table class="table" id="employeeTable">
   <thead>
   <tr>
     <th>Name
     <th>Departament
     <th>Salary  
     <tbody id="employeeTableBody">
   <tr>
     <td> John
     <td> 1
     <td> 1500
   <tr>
     <td> Mary
     <td> 2
     <td> 2500
              ...etc    

</table> 
```

那么，如何查询表，获取其行，然后获取其单元格以填充我的员工列表（在本例中）？

我尝试使用类似的东西：

```
 TableElement table = query("#employeesTable");
    Element tableBody = query("#employeesTableBody"); 
```

但是我在 TableElement 或 Element 中找不到合适的方法来返回 TableRowElement，或者它的单元格。我也尝试获取子节点，但没有成功。

完成此任务的伪算法将是这样的：

```
1\. Get the table
2\. For each row of the table
2.a Create a new Employee object based on the value of each cell of the row.
2.b Append this object to the Employee List.
3\. End 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T20:22:10.877

这里的HTML：

```
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    <title>Scratchweb</title>
    <link rel="stylesheet" href="scratchweb.css">
  </head>
  <body>
    <table id="employeeTable">
      <tr>
        <th>Name</th>
        <th>Departament</th>
        <th>Salary</th>
      </tr>
      <tr>
        <td>John</td>
        <td>1</td>
        <td>1500</td>
      </tr>
      <tr>
        <td>Mary</td>
        <td>2</td>
        <td>2500</td>
      </tr>    
    </table>

    <script type="application/dart" src="web/scratchweb.dart"></script>
    <script src="https://dart.googlecode.com/svn/branches/bleeding_edge/dart/client/dart.js"></script>
  </body>
</html> 
```

这是飞镖：

```
import 'dart:html';
import 'dart:math';

class Employee {
  String name;
  String department;
  num salary;

  Employee({this.name, this.department, this.salary});
  String toString() => '<employee name="$name" department="$department" salary="$salary">';
}

void main() {
  var employees = new List<Employee>();
  var table = query("table#employeeTable");
  for (TableRowElement row in table.rows) {
    if (row.cells.length != 3) {
      print("Malformed row: $row");
      continue;
    }
    if ((row.cells[0] as TableCellElement).tagName == "TH") {
      print("Skipping header");
      continue;
    }
    var cells = row.cells;
    var employee = new Employee(
        name: cells[0].text,
        department: cells[1].text,
        salary: parseDouble(cells[2].text));
    employees.add(employee);
  }
  print(employees);
} 
```

如果您同意这个答案，请记住接受它。每次我成功回答问题时，我的老板都会喂我一片培根；）

# javascript - 将徽标和面板添加到 extjs 中的消息框

> ID：13142893
> 
> 赞同：0
> 
> 时间：2012-10-30T15:55:53.353
> 
> 标签：javascript, extjs4

我是 extjs 的新手，我正在尝试使用 Extjs4 创建自定义警报但我没有成功，主要思想基本上是在窗口左侧添加公司徽标，以及类型的图标消息和消息文本对齐到窗口的右侧。我尝试了不同的方法但不起作用，我尝试创建一个新窗口并添加面板，我尝试自定义常规 Ext.Msg.show 将项目添加到其属性但它们从未显示，谁能给我一个想法如何完成这项工作或最好的方法是什么？我已经尝试了 2 天，但我无法让它发挥作用，而且我的想法已经不多了。我附上了我现在做的代码，非常感谢！！：

```
 Ext.Msg.show({
                    title:title,
                    msg: msg,
                    height: 200,
                    width: 300,
                    layout: 'fit',
                    items: {
                        xtype: 'panel',                           
                        html: '<img src="http://localhost:8080/anylogo/companylogo.gif" />' 
                    },
                    buttons: Ext.Msg.OK,
                    icon: Ext.Msg.WARNING
                }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:02:14.907

这是[风格](http://www.w3.org/Style/CSS/Overview.en.html)问题。您可以通过`cls`配置为消息框分配一个 CSS 类：

```
Ext.Msg.show({
    cls: 'alignright-with-logo'
}); 
```

# java - 结构数组总是比数组结构快？

> ID：13142896
> 
> 赞同：4
> 
> 时间：2012-10-30T15:55:59.477
> 
> 标签：java, c, performance, caching, data-structures

我想知道数据布局`Structs of Arrays`( **SoA** ) 是否总是比`Array of Structs`( **AoS** ) 或`Array of Pointers`( **AoP** ) 快于只适合`RAM`编程输入的问题`C/JAVA`。

几天前，我正在改进分子动力学算法（用 C 语言）的性能，总结在这个算法中，它是根据粒子的力和位置计算粒子之间的力相互作用。

原始粒子由包含 9 个不同双精度值的结构体表示，3 个表示粒子力 (Fx,Fy,Fz) ，3 个表示位置，3 个表示速度。该算法有一个数组，其中包含指向所有粒子 ( **AoP** ) 的指针。我决定将布局从**AoP**更改为**SoA**以改善缓存使用。

所以，现在我有一个包含 9 个数组的 Struct，其中每个数组存储每个粒子的力、速度和位置 (x,y,z)。每个粒子都通过它自己的数组索引来访问。

**我获得了大约1.9x**的性能增益（对于仅适合 RAM 的输入），所以我想知道通常从**AoP**或**AoS**更改为**SoA**是否总是会表现更好，如果不是在哪种类型的算法中这样做不会发生。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T16:02:18.880

很大程度上取决于所有领域的有用程度。如果您有一个数据结构，其中使用一个字段意味着您可能会使用所有字段，那么结构数组会更有效，因为它将您可能需要的所有东西放在一起。

假设您有时间序列数据，您只需要选择一小部分可能的字段。你可能有关于一个事件或时间点的各种数据，但你只需要说其中的 3-5 个。在这种情况下，数组结构更有效，因为 a) 你不需要缓存你不使用的字段 b) 你经常按顺序访问值，即缓存一个字段，它的下一个值和它的下一个是有用的。

出于这个原因，时间序列信息通常存储为列的集合。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T16:09:03.363

这将取决于您访问数据的方式。试着想象一下，当您在 SoA 或 AoS 中访问数据时，硬件中究竟发生了什么。

要推理您的问题，您必须考虑以下事项 -

1.  如果没有缓存，性能应该是相同的，假设所有数据元素的内存访问延迟是相等的。
2.  现在有了缓存，如果你访问连续的地址位置，你肯定会得到性能提升。这在您的情况下完全有效。当你有 AoS 时，这些位置在内存中是不连续的，所以你必须在那里失去一些性能。
3.  您必须在 for 循环中访问您的数据，例如`for(int i=0;i<1000000;i++) Fx[i] = 0`. 因此，如果数据量很大，您将很容易看到小的性能优势。如果您的数据很小，这无关紧要。
4.  最后，您也不知道您正在使用的 DRAM。当您访问连续数据时，它将有一些好处。例如，要了解为什么会这样，您可以参考[wiki](http://en.wikipedia.org/wiki/DDR_SDRAM)。

# kendo-ui - 在 Kendo Grid 中隐藏列，但显示其过滤器

> ID：13142901
> 
> 赞同：1
> 
> 时间：2012-10-30T15:56:10.193
> 
> 标签：kendo-ui

我希望在 Kendo Grid 上创建一堆过滤器，但这些过滤器用于隐藏列。

我想显示过滤器（也许用 jQuery 将它移到网格区域之外）但保持整个列隐藏。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T20:27:50.167

使用数据源。[该实现的过滤](http://docs.kendoui.com/api/framework/datasource#fetch)方法。

```
 $('#GridName').data().kendoGrid.dataSource.filter({field:"hiddenColumnName",operator:"gt",value:42}); 
```

如果出于某种原因您想从 Grid 中提取这些过滤器描述符，您可以使用不带参数的过滤器方法。将返回一个对象，该对象将包含 Grid 的过滤方式。

请注意，这种方法甚至不需要隐藏列（您可以完全跳过声明它们）。默认情况下，整个对象（包含所有字段）在客户端上可用。

# vim - 检测从普通 :map 调用的函数内部的模式

> ID：13142903
> 
> 赞同：2
> 
> 时间：2012-10-30T15:56:13.283
> 
> 标签：vim

是否可以`:map`使用可以检测到调用它的模式的函数？这就是我所拥有的：

```
func! s:ShowModeFunction()
    echomsg mode(1)
endfunc

noremap <expr> <Plug>ShowMode <SID>ShowModeFunction()

map \m <Plug>ShowMode 
```

map`\m`最终调用 top 函数，该函数回显一个字符串，指示正常模式、操作员挂起模式或任何可视模式。

不过，这只适用`<expr>`于中间地图；任何冒号命令都会使最终`mode()`调用无效，因为它总是会返回“正常模式”。不幸的是，`<expr>`严格要求右侧有一个表达式，并且由于该函数不返回任何内容，因此`0`使用了隐式返回值，它将光标移动到第一列。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T16:18:11.297

只需让函数不返回任何内容，这就是表达式映射中的无操作：

```
func! s:ShowModeFunction()
    echomsg mode(1)
    return ''
endfunc 
```

如果 map-expr 有任何其他限制，只需在其中设置一个变量，并在“正常”映射中进行实际工作（包括评估变量），或者`:call`您可以附加到您的`<Plug>ShowMode`映射（或另一个中间映射，以保持可定制性）。

# android - 是否存在“Push To Beam”解决方法？

> ID：13142904
> 
> 赞同：0
> 
> 时间：2012-10-30T15:56:15.583
> 
> 标签：android, nfc

我目前正在尝试在 Nexus 7 上实现一个基本的 NFC 应用程序。

我已经能够使用 Beam SDK 传输 NDEF 记录（Web Url），但我被困在“Tap to Beam” UI 中，就像这里的许多其他人一样。

我知道没有办法禁用此屏幕或自动按下它，但是，还有其他可能的解决方法吗？

例如，一位同事刚刚建议将 Nexus 7 放入`tag writer mode`，然后将其他应用程序放入`tag read mode`.

或者我是否正确地说Android中的NFC只能用于读取/写入NFC标签并使用beam共享项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T00:51:36.993

NFC 芯片在读/写模式和点对点模式（以及卡模拟，如果您安装了 Google 钱包）之间不断切换。在读写器模式下，它可以与 NFC 标签通信。Reader/Writer 模式下的两台设备无法相互通信；这就是点对点模式的发明目的。对等模式是用于 Android Beam 的。

也不能在一台设备上使用卡模拟模式。首先，Android 设备不会检测到另一台 Android 设备上的卡模拟（它更喜欢做点对点）。其次，您的应用程序需要特殊权限才能从操作系统访问安全元素（进行卡模拟）。第三，即使您设法解决了这些障碍，仍然无法将数据写入安全元件，因为您没有必要的访问控制密钥来执行此操作。

所以回答你原来的问题：没有办法通过切换到其他 NFC 模式来绕过 Android Beam UI。对不起。

**更新：**

从 Android 4.4 Kitkat 开始，应用程序可以使用所谓的[主机卡模拟 (HCE)](http://developer.android.com/guide/topics/connectivity/nfc/hce.html)来模拟卡。对于另一个 Android NFC 设备上的应用程序要与这样的模拟标签进行通信，它需要使用新的[NFC 阅读器模式](https://developer.android.com/reference/android/nfc/NfcAdapter.html#enableReaderMode%28android.app.Activity,%20android.nfc.NfcAdapter.ReaderCallback,%20int,%20android.os.Bundle%29)（完全禁用 Android Beam 以防止它妨碍它）。

# android - Android 更改为不同的strings.xml

> ID：13142905
> 
> 赞同：1
> 
> 时间：2012-10-30T15:56:19.727
> 
> 标签：android, xml, string, settings, system

我有一个小问题需要解决。
在我的应用程序中，我将有一个设置，我将我的应用程序的语言从英语更改为瑞典语并返回。所以我想知道我应该怎么做？

当用户想要更改语言时，我可以更改为不同的 strings.xml 文件还是必须手动更改 strings.xml 中的所有文本？

请提供提示和示例我应该如何解决这个问题！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T16:05:09.110

你可以这样做：

```
String languageToLoad  = "your language code";
Locale locale = new Locale(languageToLoad); 
Locale.setDefault(locale);
Configuration config = new Configuration();
config.locale = locale;
getBaseContext().getResources().updateConfiguration(config, 
getBaseContext().getResources().getDisplayMetrics()); 
```

有了这个，你基本上只是改变你的语言环境，因此你的语言

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T16:01:21.493

您将需要在本地更改语言环境：

```
Resources res = context.getResources();
// Change locale settings in the app.
DisplayMetrics dm = res.getDisplayMetrics();
Configuration conf = res.getConfiguration();
conf.locale = new Locale('fr');
res.updateConfiguration(conf, dm); 
```

[在 Android 中以编程方式更改语言](https://stackoverflow.com/questions/2900023/change-language-programatically-in-android)

# javascript - When do I initialize variables in JavaScript with null or not at all?

> ID：13142912
> 
> 赞同：43
> 
> 时间：2012-10-30T15:56:52.637
> 
> 标签：javascript, variables, null, undefined

I have seen different code examples with variables declared and set to undefined and null. Such as:

```
var a; // undefined - unintentional value, object of type 'undefined'
var b = null; // null - deliberate non-value, object of type 'object' 
```

If the code to follow these declarations assigns a value to a or to b, what is the reason for using one type of declaration over another?

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-30T16:00:18.000

The first example doesn't assign anything to the variable, so it implicitly refers to the `undefined` value (see [10.5 in the spec](http://es5.github.com/#x10.5) for the details). It is commonly used when declaring variables for later use. There is no need to explicitly assign anything to them before necessary.

The second example is explicitly assigned `null` (which is actually of type `null`, but due to a quirk of the JavaScript specification, claims to have type "object"). It is commonly used to clear a value already stored in an existing variable. It could be seen as more robust to use `null` when clearing the value since it is possible to overwrite `undefined`, and in that situation assiging `undefined` would result in unexpected behaviour.

As an aside, that quirk of `null` is a good reason to use a more robust form of type checking:

```
Object.prototype.toString.call(null); // Returns "[object Null]" 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-30T16:03:46.683

I just saw this link which clarified my question. [What reason is there to use null instead of undefined in JavaScript?](https://stackoverflow.com/questions/6604749/what-reason-is-there-to-use-null-instead-of-undefined-in-javascript?rq=1)

Javascript for Web Developers states "When defining a variable that is meant to later hold an object, it is advisable to initialize the variable to null as opposed to anything else. That way, you can explicitly check for the value null to determine if the variable has been filled with an object reference at a later time."

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-10-30T16:11:42.180

I don't think there's a particular better way of doing things, but I'm inclined to avoid undefined as much as possible. Maybe it's due to a strong OOP background.

When I try to mimic OOP with Javascript, I would generally declare and initialize explicitly my variables to null (as do OOP languages when you declare an instance variable without explicitly initializing it). If I'm not going to initialize them, why even declare them in the first place? When you debug, if you haven't set a value for a variable you watch, you will see it as undefined whether you declared it or not...

I prefer keeping `undefined` for specific behaviours:

*   when you call a method, any argument you don't provide would have an undefined value. Good way of having an optional argument, implementing a specific behaviour if the argument is not defined.
*   lazy init... in my book undefined means "not initialized: go fetch the value", and null means "initialized but the value was null (eg maybe there was a server error?)"
*   arrays: myArray[myKey] === null if there is a null value for this key, undefined if a value has never been set for this key.

Be careful though, that `myVar == null` and `myVar == undefined` return the same value whether myVar is undefined, null or something else. Use `===` if you want to know if a variable is undefined.

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-05-31T07:41:39.750

I would explicitly choose null, to not create an object whose id is later overwritten anyway:

```
var foo = {}; // empty object, has id etc.
var foo2 = null; // good practice, // filled with an object reference at a later time
var foo3;// undefined, I would avoid it
console.log(typeof foo);
console.log(typeof foo2);
console.log(typeof foo3); 
```

Setting `null` also ensures good readability to identify the datatype (object), results in

```
object
object
undefined 
```

Source (Professional JavaScript for Web Developers 3rd Edition):

> When defining a variable that is meant to later hold an object, it is advisable to initialize the variable to null as opposed to anything else. That way, you can explicitly check for the value null to determine if the variable has been filled with an object reference at a later time, such as in this example:

```
if (foo2 != null){
    //do something with foo2
} 
```

> The value undefined is a derivative of null, so ECMA-262 defines them to be superficially equal as follows:

```
console.log(null == undefined); // prints true
console.log(null === undefined);// prints false 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T16:06:29.323

null is an object.. When something is undefined it is nothing.. it is not an object, neither a string, because it hasn't been defined yet.. obviously.. then it is simply a property with no function..

example:

You declare a variable with var but never set it.

```
var foo; 
alert(foo); //undefined. 
```

You attempt to access a property on an object you've never set.

```
var foo = {};
alert(foo.bar); //undefined 
```

You attempt to access an argument that was never provided.

```
function myFunction (foo) {
  alert(foo); //undefined.
} 
```

# glib - 在 Gobject 中获取父类

> ID：13142913
> 
> 赞同：0
> 
> 时间：2012-10-30T15:56:54.560
> 
> 标签：glib, gobject

我是 GObject 的新手。我对获取一个类的父亲的指针感到困惑。例如，在 Gobject Spec 中，我们有一个类：

```
struct _MamanBarClass {
  GObjectClass parent;

  /* class members */
}; 
```

有什么区别：

```
MamanBarClass klass;
GObjectClass parent_class=G_OBJECT_CLASS(g_type_class_peek_parent (klass)); 
```

和

```
MamanBarClass klass;
GObjectClass g_object_class=G_OBJECT_CLASS(klass); 
```

**g_object_class**和**parent_class**有什么区别

 **还有一个问题：铸造 **MamanBarClass(klass)**和**MAMANBARCLASS(klass)**之间的区别 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T16:26:42.050

在 GObject 中，任何新类型都会在寄存器中保存一个类结构，以保存运行时信息、虚拟方法和私有类数据。

转换 ( `G_OBJECT_CLASS(klass)`) 用于检索 klass 的 GObjectClass，同时`G_OBJECT_CLASS(g_type_class_peek_parent(klass))`返回klass**父**级的 GObjectClass 。在您的示例中，前者仅返回 MamanBarClass 的 GObjectClass 结构，而后者返回在寄存器中找到的 GObjectClass 结构（ MamanBarClass 的父级）的 GObjectClass 结构。在实践中：

```
klass = G_OBJECT_CLASS(maman_bar_class);
/* This will override MamanBar::dispose */
klass->dispose = my_dispose;
/* Now my_dispose will be called by g_object_dispose(object) when object is a MamanBar object */

klass = G_OBJECT_CLASS(g_type_class_peek_parent(klass));
/* This will override GObject::dispose */
klass->dispose = my_dispose
/* Now my_dispose will be called by g_object_dispose(object) when object is a GObject (the parent class of MamanBar) object */ 
```

`(MamanBarClass *) klass`和`MAMAN_BAR_CLASS(klass)`是等价的，但后者执行运行时类型检查（如果 klass 不是 MamanBarClass *，则发出 g_critical）。**

# android - 自定义布局在用作 ListView 项时不会调整子项的大小

> ID：13142915
> 
> 赞同：3
> 
> 时间：2012-10-30T15:56:54.977
> 
> 标签：android, android-layout

我有一个`View`我试图从中派生的自定义聚合`RelativeLayout`：

```
public class CheckableView extends RelativeLayout implements Checkable {

TextView        mTextView;
boolean         mIsChecked = false;
int             mId = 0;

public CheckableView(
        Context context, 
        AttributeSet attrs, 
        int defStyle,
        int resource, 
        int textViewResourceId) throws Exception {

    super(context, attrs, defStyle);
    LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    if (inflater != null) {
        inflater.inflate(resource, this);
        this.setLayoutParams(new AbsListView.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
        mTextView = (TextView) findViewById(textViewResourceId);
        if (mTextView == null) {
            throw new Exception("The specified TextView resource Id was not found.");
        }
    }
}
} 
```

`resource`参数是我希望聚合的`id`布局的 id，是我要以图形方式指示状态的 id（通过在其上绘制复选标记）`CheckableView``textViewResourceId``TextView``checked`

这个xml定义为：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content">

<TextView
    android:id="@+id/itemslist_categoryName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:layout_alignParentLeft="true"
    android:text="@string/app_name" />

<LinearLayout
    android:id="@+id/category_details_price"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toLeftOf="@+id/addedit_category_check"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/addedit_category_price"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="right|center_vertical"
        android:text="@string/app_name" />

    <TextView
        android:id="@+id/addedit_category_price_label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="right|center_vertical"
        android:text="@string/app_name" />

</LinearLayout>

</RelativeLayout> 
```

我想将此自定义视图用作适配器`ListView`中其他特定位置的每一行，我执行以下操作：`ListView``getView`

```
 public View getView(int position, View convertView, ViewGroup parent) {

        CheckableView view = null;

        if (convertView == null) {
            try {
                view = new CheckableView(getContext(), 
                                                   null, 
                                                   0, 
                                                   R.layout.addedit_group_budget, 
                                                   R.id.addedit_category_check);
            } catch (Exception e) {
                e.printStackTrace();
            }
        } else {
            view = (CheckableView) convertView;
        }

        ...
        return view;
    } 
```

的每一行`ListView`都有不同长度的文本。首次创建视图时，一切似乎都很好，但是当视图开始被回收时（即当我向上/向下滚动时）。`TextViews`即使我已经`wrap_content`指定了宽度，它似乎也没有调整大小以适应文本的大小。

我会错过什么？下面的示例屏幕截图。请注意，有些文本是椭圆形的，即使显然还有更多文本的空间。

![文本省略号，即使有更多空间](../Images/4443bbc4a70fc5ddbbc52d3f79757c81.png)

如果我从类定义中删除`implements Checkable`，事情会按预期工作，表明这与它有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T18:56:40.173

发现真正的罪魁祸首是`setCompoundDrawablesWithIntrinsicBounds`我在其中一个 TextView 上制作的 API。调用这个 API 似乎会破坏父布局中 View 的测量值。这个问题很好地表达了@ [在具有相同背景的多个视图上调用 setCompoundDrawablesWithIntrinsicBounds 给出不一致的大小](https://stackoverflow.com/questions/10592621/calling-setcompounddrawableswithintrinsicbounds-on-multiple-views-with-the-same)

我能够通过使用 ImageView 来解决该问题，在该 ImageView 中我设置了适当的图标以指示“已检查”状态。

# django - Django App URL模型未导入

> ID：13142921
> 
> 赞同：0
> 
> 时间：2012-10-30T15:57:08.727
> 
> 标签：django, django-templates, django-urls

我确定这只是我忽略的事情，但我太烦了，无法单独解决，所以提前感谢。

**项目目录结构** **更新**

```
myproject/
  manage.py
  myproject/
    apps/
      geo/
        urls.py
    settings.py
    urls.py 
```

**网址.py**

```
from django.conf import settings
from django.conf.urls.defaults import *
from django.views.generic.simple import direct_to_template

from django.contrib.gis import admin

admin.autodiscover()

from pinax.apps.account.openid_consumer import PinaxConsumer

handler500 = "pinax.views.server_error"

urlpatterns = patterns("",
url(r"^$", direct_to_template, {'template' : 'home.html' }, name="home"),
url(r"^admin/invite_user/$", "pinax.apps.signup_codes.views.admin_invite_user", name="admin_invite_user"),
url(r"^admin/", include(admin.site.urls)),
url(r"^about/", include("apps.about.urls")),
url(r"^account/", include("pinax.apps.account.urls")),
url(r"^openid/", include(PinaxConsumer().urls)),
url(r"^profiles/", include("idios.urls")),
url(r"^notices/", include("notification.urls")),
url(r"^announcements/", include("announcements.urls")),
url(r"^products/", include("products.urls")),
url(r"^locate/", include("geo.urls")),
url(r"^sectors/", include("sectors.urls")),
)

if settings.SERVE_MEDIA:
    urlpatterns += patterns("",
        url(r"", include("staticfiles.urls")),
) 
```

**设置.py**

```
INSTALLED_APPS = [
# project
"tulsa-site.apps.about",
"tulsa-site.apps.profiles",
"tulsa-site.apps.geo",
"tulsa-site.apps.sectors",
] 
```

当我转到 url 路径“http://127.0.0.1:8000/locate/”时收到错误消息：我收到异常值“没有名为 geo.urls 的模块”。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:09:02.397

`include("geo.urls")`告诉 Django 查找`geo.urls`相对于`manage.py`文件的内容。所以它本质上是在寻找这个文件：

```
myproject/
  manage.py
  myproject/
    apps/
    settings.py
    urls.py
  geo/
    urls.py <- this file 
```

这是从 Django 1.4 开始的新目录结构，它鼓励应用程序独立于 Django 项目。但是，如果您仍然遵循应用程序文件夹位于项目文件夹中的旧布局，那么您必须更改导入以反映这一点：

```
include("myproject.geo.urls") 
```

**编辑**

按照您更新的布局：

```
include("myproject.apps.geo.urls") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:14:49.950

```
url(r"^locate/", include("tulsa-site.apps.geo.urls")) 
```

# java - 使用 SWT 使用 StyledText 在插入符号位置插入文本

> ID：13142925
> 
> 赞同：2
> 
> 时间：2012-10-30T15:57:17.113
> 
> 标签：java, swt, caret, styledtext

如何在 SWT 中 StyledText 的插入符号位置插入文本？

我的意思的一个例子如下：

我有一个带有“Hello, world!”的 StyledText。插入符号的位置在空格和 w 之间，就像这样（竖线/竖线“|”是我的闪烁光标）：

```
Hello, |world! 
```

我需要某种方式来插入文本，所以如果我做了类似 myMethodThatInsertsText("beautiful") 的操作，它会将文本更改为（垂直条仍然是光标）：

```
Hello, beautiful |world! 
```

我必须手动执行此操作，还是有一种我还没有找到的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T16:21:40.110

该方法[`StyledText#insert(String)`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/custom/StyledText.html#insert%28java.lang.String%29)完全符合您的要求。

如果在 中选择文本`StyledText`，`insert`将替换该文本。但是，如果未选择任何内容，则文本将插入到插入符号位置。

# sql - 如何在sql中转置

> ID：13142930
> 
> 赞同：0
> 
> 时间：2012-10-30T15:57:33.110
> 
> 标签：sql, sql-server

假设我有

```
select *
from A a
     left outer join B b on b.ID in (1,2,3/*and possibly any numbers*/) 
```

所以我得到（`Ax - A's xth row, Bx - B's xth row`）：

```
A1 B1
A1 B2
A1 B3
A2 B1
... 
```

我想要的是这样的：

```
A1 B1 B2 B3
A2 B1 B2 B3 
```

这样就有动态的列数。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:00:36.190

可以使用[Pivots](http://msdn.microsoft.com/en-us/library/ms177410%28SQL.105%29.aspx)。以下链接可能对您有所帮助。它包含 4-5 种不同的解决方案。

[SQL Server 中的转置](http://www.codeproject.com/Questions/318546/Transpose-Rows-in-SQL-Server)

# java - 在游戏中的多个线程之间共享对象

> ID：13142934
> 
> 赞同：3
> 
> 时间：2012-10-30T15:57:45.600
> 
> 标签：java, multithreading, attributes

编程语言：JAVA/Android

# 主题“结构”

主线程（启动其他线程）

---（多个属性）

---人工智能线程

---TouchListener线程

---脚本线程

---渲染线程

# 描述

属性的一个示例是脚本线程指示的参与者；它的路线是由 AI 线程计算出来的，而 3D 坐标是由渲染器改变的。

所有线程都不是可以访问属性的私有内部类，而是实现 Runnable 的简单类

# 问题

如何在那些无休止运行的线程之间共享对象（属性）？每个线程都必须有权访问主线程的所有资源。（问题不在于如何同步它们，我已经知道“同步”和锁的概念）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:01:34.020

您可以创建一个由主线程/类实例化的类 SimulationModel，并由 setter 或其构造函数提供给其他人。

此类包含所有数据并拥有锁以保持一致性。

关于数据操作的逻辑也可能发生在这里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:00:26.987

如果您不是在询问是否对对象进行线程安全的访问，那么您是否只是在询问如何在其他线程中访问它们？如果是这样，只需通过构造函数将它们传递给那些可运行的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T16:04:43.637

一种选择是让你的“属性”[静态变量在一个类中全局使用它们](https://stackoverflow.com/a/4646591/505154)：

该答案的示例：

> ```
> public class Global {
> 
> public static int a;
> public static int b;
> } 
> ```
> 
> 现在您可以通过调用从任何地方访问 a 和 b
> 
> ```
> Global.a;
> 
> Global.b; 
> ```

# php - PHP电子邮件脚本的一些问题

> ID：13142937
> 
> 赞同：0
> 
> 时间：2012-10-30T15:57:53.183
> 
> 标签：php, mysql

我的脚本有一些问题，基本上我希望脚本做的是获取表单数据并发布到数据库（它做得很好）然后我希望它发送一封感谢电子邮件，这就是'不工作，它只是没有通过。另外据我所知，即使脚本无法执行脚本，脚本也会发送电子邮件，我该如何解决这个问题。

我对 PHP 还很陌生，只是发现它可以做什么，所以我非常感谢你的帮助。

```
<?php 

error_reporting(E_ALL & ~E_NOTICE);
ini_set('display_errors', TRUE);
ini_set('display_startup_errors', TRUE);

$name = $_POST['name'];
$email = $_POST['email'];

require_once('Connections/connection.php');
mysql_select_db($database_connection);

$query = "INSERT INTO mailing_list ( name, email)
        VALUES ( '$name', '$email');";
mysql_query($query);

mysql_close();

if(IsInjected($visitor_email))
{
    echo "Bad email value!";
    exit;
}

 $email_from = 'mailinglist@myemail.com';
    $email_subject = "Welcome to our mailinglist";
    $email_body = "
$name,

Welcome to our mailing list, we will now keep you updated on whats going on here.

To unsubscribe go to.".

  $to = "$email";
  $headers = "From: $email_from \r\n";
  $headers .= "Reply-To: $email \r\n";
  mail($to,$email_subject,$email_body,$headers);
//done. redirect to thank-you page.
header('Location: thank-you.php');

// Function to validate against any email injection attempts
function IsInjected($str)
{
  $injections = array('(\n+)',
              '(\r+)',
              '(\t+)',
              '(%0A+)',
              '(%0D+)',
              '(%08+)',
              '(%09+)'
              );
  $inject = join('|', $injections);
  $inject = "/$inject/i";
  if(preg_match($inject,$str))
    {
    return true;
  }
  else
    {
    return false;
  }
}

 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:15:44.917

这是您使用 PDO 重新编写的代码。我还删除了回复值，因为我不知道您可以使用用户电子邮件作为回复，电子邮件客户端可能会阻止它。

```
<?php 

error_reporting(E_ALL & ~E_NOTICE);
ini_set('display_errors', TRUE);
ini_set('display_startup_errors', TRUE);

$name = $_POST['name'];
$email = $_POST['email'];

//I recommend rewriting this to NOT use mysql_* functions and instead use PDO
//The documentation is located at http://www.php.net/manual/en/book.pdo.php
/*
require_once('Connections/connection.php');
mysql_select_db($database_connection);
*/
$host = 'host_name';
$dbname = 'database_name';
$user = 'user_name';
$pass = 'user_pass';
try
{
    $DB = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass); 
}
catch(PDOException $e)
{  
    echo $e->getMessage();  
}

$query = "INSERT INTO mailing_list ( name, email) VALUES ( '?', '?');";

$sth = $DB->prepare($query);

//This way only a success will send an email
if($sth->execute(array($name, $email)))
{
    if(IsInjected($email))
    {
        echo "Bad email value!";
        exit;
    }

    $email_from = 'mailinglist@myemail.com';
    $email_subject = "Welcome to our mailinglist";
    $email_body = "
    $name,

    Welcome to our mailing list, we will now keep you updated on whats going on here.

    To unsubscribe go to.".

    $to = $email;
    $headers = "From: $email_from \r\n";
    //I don't know that you can use the to email as the reply-to,
    //most emails will probably block that.
    mail($to,$email_subject,$email_body,$headers);
    //done. redirect to thank-you page.
    header('Location: thank-you.php');
}else{
    echo "Failed to insert into database.";
    exit;
}

// Function to validate against any email injection attempts
// Stole this from w3schools, because it is well done. link is at the bottom
    function spamcheck($field)
    {
        //filter_var() sanitizes the e-mail
        //address using FILTER_SANITIZE_EMAIL
        $field=filter_var($field, FILTER_SANITIZE_EMAIL);

        //filter_var() validates the e-mail
        //address using FILTER_VALIDATE_EMAIL
        if(filter_var($field, FILTER_VALIDATE_EMAIL))
        {
            return TRUE;
        }
        else
        {
            return FALSE;
        }
    }

 ?> 
```

从 W3Schools 获得邮件清理功能：

[http://www.w3schools.com/php/php_secure_mail.asp](http://www.w3schools.com/php/php_secure_mail.asp)

# codeigniter - 教义未定义函数 apc_fetch

> ID：13142938
> 
> 赞同：17
> 
> 时间：2012-10-30T15:58:03.577
> 
> 标签：codeigniter, doctrine, doctrine-orm, doctrine-odm

我正在使用[本教程](http://www.joelverhagen.com/blog/2011/05/setting-up-codeigniter-2-with-doctrine-2-the-right-way/)，它详细解释了如何设置 CodeIgniter 和 Doctrine。我正在使用 CodeIgniter 2.1.0 和 Doctrine 2.2.1，但我收到此错误：

> 致命错误：在第 52 行调用`Doctrine\Common\Cache\apc_fetch()`/Applications/XAMPP/xamppfiles/htdocs/emma_watson_shrine/application/libraries/Doctrine/Common/Cache/ApcCache.php中的未定义函数

你能帮我吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-31T15:02:24.630

您需要为 PHP 启用 APC 扩展。

遵循[本](http://www.php.net/manual/en/apc.installation.php)指南。

或者，您可以使用不同的缓存驱动程序，例如 memcache，并据此更改 Doctrine 配置。

检查备用缓存驱动程序的[原则文档](http://docs.doctrine-project.org/projects/doctrine-common/en/latest/reference/caching.html)。也许最简单的解决方案是在开发中使用**ArrayCache**。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-02-12T21:41:27.967

由于不再使用 php 5.5 apc。你应该安装apcu。

例如

`apt install php5.6-apcu`

更多信息在这里：

[http://php.net/manual/en/opcache.installation.php](http://php.net/manual/en/opcache.installation.php)

对于那些使用 php 7 的人来说，有一个向后兼容模块：

```
apt-get install php7.0-apcu
apt-get install php7.0-apcu-bc 
```

此外，您可能需要添加此存储库：

```
apt-add-repository ppa:ondrej/php
apt-get update 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-26T02:15:31.853

如果您不安装 APC 并且只想运行它，请在第 6 行的教义-cli.php 中更改模式：

```
define('ENVIRONMENT', 'production'); 
```

至

```
define('ENVIRONMENT', 'development'); 
```

打开 Doctrine.php 文件，在第 36 ~ 43 行，你会明白为什么！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-09T05:01:10.317

您需要安装 apc 扩展才能使用缓存。所以只需下载扩展并安装它。

这将帮助您在 apache 上安装 APC 扩展。

[http://kvcodes.com/2014/06/solution-call-undefined-function-apc_fetch/](http://kvcodes.com/2014/06/solution-call-undefined-function-apc_fetch/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-01T13:15:33.947

在 OSX 上我必须运行：

```
pecl channel-update pecl.php.net
pecl install apcu-4.0.11 
```

为 PHP 5.6 安装

[https://getgrav.org/blog/macos-mojave-apache-mysql-vhost-apc](https://getgrav.org/blog/macos-mojave-apache-mysql-vhost-apc)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-20T15:04:45.167

对于在 Mac 上获得此功能的任何人，只需`apcu`使用[Homebrew](https://brew.sh/)安装：

`brew install php56-apcu`

（并根据需要启用扩展）。

# excel - 在一行中查找和替换数据并更改列中包含该数据的所有行

> ID：13142947
> 
> 赞同：-1
> 
> 时间：2012-10-30T15:58:30.000
> 
> 标签：excel

> 我想更改“I”行中的数据，这些数据在相应列中的“D”行中具有匹配的文本。
> 
> 自从高中二年级的基础编程以来，我就没有接触过excel。
> 
> 我可以详细说明-谢谢。

编辑：

我在“D”行的所有列中都填写了数据。

这些项目有一个文本字符串，可以在 Excel 的查找和替换工具中找到。

当 Excel 找到文本时 - 我想做一件事：

将所有行“I”数据从“活动”替换为“已删除”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:12:31.703

*   选择您的数据
*   数据\自动过滤器（或 Alt AT）
*   在搜索框中输入您的文本字符串
*   证实
*   选择您的 I 列
*   输入`active`，使用`ctrl`+验证`Enter`

# c# - WPF：如何限制 DataGrid 中组合的所有列的宽度？

> ID：13142948
> 
> 赞同：1
> 
> 时间：2012-10-30T15:58:36.297
> 
> 标签：c#, .net, wpf

我有一个从 sql 表中获取数据的 DataGrid。我已将 AutoGenerateColumns 设置为 true。

当我单击一个按钮时，DataGrid 中的数据将导出为 pdf 文件。

但是，当 DataGrid 中组合的所有列的宽度大于约 800 时，表格大于 pdf 中的页面。

我已将 DataGrid 的 MaxWidth-Property 设置为 800。当我调整列的大小时，我可以将光标拖到 DataGrid 之外并出现一个水平滚动条。

有没有办法将所有列的最大大小限制为 800，这样我就不能使列大于 DataGrid？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T17:44:27.033

简单的解决方案是通过简单地设置 ColumnWidth 属性来使 DataGrid 对其列使用星型大小，如下所示：

```
<DataGrid Width="800" ColumnWidth="*" /> 
```

然而，问题在于这使得所有列都一样宽，这可能是不希望的。

所以我要做的是首先像现在一样以默认方式创建所有列，然后将每列设置为星大小。这样，可以为新宽度计算一个值，使列保持其初始大小。

我写了一小段代码来说明我的意思..

XAML

```
<Window x:Class="WpfApplication2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication2"
        Title="MainWindow" Height="350" Width="850">
    <StackPanel>
        <DataGrid x:Name="dgTest" Width="800" Loaded="dgTest_Loaded" />
    </StackPanel>
</Window> 
```

代码隐藏

```
public partial class MainWindow : Window
{
    public class Test
    {
        public string P1 { get; set; }
        public string P2 { get; set; }
        public string P3 { get; set; }
    }

    public MainWindow()
    {
        InitializeComponent();

        var t = new List<Test>(new[] { 
            new Test{ P1="på,dsl", P2="234234", P3="asdasdasd"},
            new Test{ P1="asasaspå,dsl", P2="23sadasd asf afasdasdasd4234", P3="asdasdasd" }, 
            new Test{ P1="på,ds1231l", P2="234", P3="1ddsdasd" },
        });

        dgTest.ItemsSource = t;
    }

    private void dgTest_Loaded(object sender, RoutedEventArgs e)
    {
        //Make the columns use starsizing so their combined width
        //can't be bigger than the actual datagrid that contains them.
        foreach (var column in dgTest.Columns)
        {
            var starSize = column.ActualWidth / dgTest.ActualWidth;
            column.Width = new DataGridLength(starSize, DataGridLengthUnitType.Star);
        }
    }
} 
```

# objective-c - 滚动到表格视图中的某个点

> ID：13142951
> 
> 赞同：0
> 
> 时间：2012-10-30T15:58:41.733
> 
> 标签：objective-c, ios, uitableview, scroll

我有一个充满日期的表格视图。我的部分标题是月份名称。你可以在[这里](http://www.flickr.com/photos/74322780@N08/8136337410/)看到我的表格视图。

我想要的是它滚动到那一刻的月份部分。为了设置我的部分标题，我使用这种方法。

```
 id <NSFetchedResultsSectionInfo> theSection = [[self.fetchedResultsController sections] objectAtIndex:section];

        static NSArray *monthSymbols = nil;
        NSArray *dutchMonths = [[NSArray alloc]initWithObjects:@"Januari",@"Februari",@"Maart",@"April",@"Mei",@"Juni",@"Juli",@"Augustus",@"September",@"Oktober",@"November",@"December", nil];
        if (!monthSymbols) {
            NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
            [formatter setCalendar:[NSCalendar currentCalendar]];
            [formatter setMonthSymbols:dutchMonths];
            monthSymbols = [formatter monthSymbols];

        }
        NSLog(@"%@",monthSymbols);
        NSInteger numericSection = [[theSection name] integerValue];

        NSInteger year = numericSection / 1000;
        NSInteger month = numericSection - (year * 1000);

        NSString *titleString = [NSString stringWithFormat:@"%@", [monthSymbols objectAtIndex:month-1]];
        label.text = titleString; 
```

我已经知道我必须使用这种方法。

```
[sampleListTableView scrollToRowAtIndexPath:indexPath atScrollPosition:UITableViewScrollPositionMiddle animated:YES]; 
```

但是如何获得正确行的索引路径？

有什么帮助吗？如果您需要更多详细信息。请帮忙。

亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:37:02.890

看起来您可以通过遍历您的sections数组（来自self.fetchedResultsController）并将从相关对象获得的月份与当前日期的月份进行比较来获取索引。如果您有匹配项，那么您的 indexPath 将是：

```
NSIndexPath *path = [NSIndexath indexPathForRow:0 inSection:foundIndex]; 
```

您还应该将 dutchMonths 数组设为静态，这样就不会在每次调用该方法时都创建它。此外，如果您不使用 ARC，它会泄漏（除非未发布发布代码）。一般的经验法则是将日期格式化程序也设为静态，或以某种方式管理它的一个实例，因为这是一项昂贵的操作。我知道这段代码只创建一次，因为您只使用它来填充monthSymbols 数组，但是如果您需要在其他代码中使用相同的格式化程序，那么您需要重写它。

为此，您应该提取此方法中的逻辑并将其放入更小的、可重用的方法中，例如

```
- (NSInteger)monthFromSection:(id<NSFetchedResultsSectionInfo>)section; 
```

然后你可以写：

```
NSIndexPath *path = nil;
NSInteger currentMonth = // Calculate month from date returned by [NSDate date]
NSArray *sections = [self.fetchedResultsController sections];
for (int i = 0; i < sections.count; i++)
{
    if (currentMonth = [self monthFromSection:[sections objectAtIndex:i]])
    {
        path = [NSIndexPath indexPathForRow:0 inSection:i];
        break;
    }
} 
```

# java - Arraylist作为方法中的参数并在多个Arraylist中添加数据

> ID：13142952
> 
> 赞同：0
> 
> 时间：2012-10-30T15:58:49.277
> 
> 标签：java, jakarta-ee

我有一个java程序：

```
 public class Faculty 
    {
    String facultyName;
    Double gemavailable; 
    }

    public class Session
   {
    String coursename;
    float noofhours;
    ArrayList<Faculty> faculty=new ArrayList<>();
    }

    public class TrainingInstitute 
   {
   ArrayList<Faculty> faculty=new ArrayList<>();
   ArrayList<Session> session=new ArrayList<>();

   public void takeASession(String coursename,float hours,ArrayList<Faculty> faculty)
   {
    Session s=new Session(coursename, hours, faculty);
    session.add(s);
   } 
```

我的主课看起来像：

```
 public class TrainingController 
    {

    public static void main(String[] args) 
    {
        TrainingInstitute t=new TrainingInstitute();

        t.takeASession("java", 5,f1);
    } 
```

我的主要动机是通过设置课程名称、参加课程的教师和课程持续时间来创建一个会话对象。并将会话对象添加到培训学院的 sessionTaken 列表中。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:10:38.613

为了能够实例化您的`Session`对象，如下所示：

```
Session s = new Session(coursename, hours, faculty); 
```

你需要在你的`Session`类中定义一个这样的构造函数

```
public class Session {
    private String courseName;
    private float noOfHours;
    private List<Faculty> faculties;

    public Session(String courseName, float noOfHrs, List<Faculty> faculties) {
        this.courseName = courseName;
        this.noOfHours = noOfHrs;
        this.faculties = faculties;
    } 
```

您应该使用`List`（接口）而不是`ArrayList`（实现）作为列表的类型。此外，您应该封装类中的字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T16:09:47.207

有两种方法可以做到这一点

要么你可以在`Session`类上有一个重载构造函数，然后推入一个教员开始，然后使用该`addFaculty`方法逐步添加教员。

```
 public class Session {

    private String coursename;
    private float noofhours;
    private ArrayList<Faculty> faculty=new ArrayList<Faculty>();

    public Session(String courseName, float noOfHours, Faculty faculty){
        this.coursename=courseName;
        this.noofhours=noOfHours;
        this.faculty.add(faculty);

    }

    public Session(String courseName, float noOfHours, ArrayList<Faculty> faculty){
        this.coursename=courseName;
        this.noofhours=noOfHours;
        this.faculty=faculty;

    }

    public void addFaculty(Faculty faculty){
        this.faculty.add(faculty);

    }

} 
```

否则你可以做一个

```
 t.takeASession("java", 5,new ArrayList(){{add(f1);}}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T16:38:14.040

这就是我要做的

```
public class TrainingController {

    public static void main(String[] args) {
        Faculty faculty1 = new Faculty("NY", 200.0);
        List<Faculty> faculties = new ArrayList<Faculty>();
        faculties.add(faculty1);

        TrainingInstitute training=new TrainingInstitute();
        training.takeASession( new Session("java", 5, faculties) );
        training.takeASession( new Session("php", 4, faculties) );
        System.out.println(training);
    }
}

class Faculty {
    String facultyName;
    double gemavailable;
    public Faculty(String facultyName, Double gemavailable) {
        this.facultyName = facultyName;
        this.gemavailable = gemavailable;
    }
    public String toString(){
        return facultyName+" "+gemavailable;
    }
}

class Session {
    String coursename;
    float noofhours;
    List<Faculty> faculties;
    public Session(String coursename, float noofhours,
            List<Faculty> faculties) {
        this.coursename = coursename;
        this.noofhours = noofhours;
        this.faculties = faculties;
    }
    public List<Faculty> getFaculties() {
        return faculties;
    }
    public String toString(){
        return coursename+" "+noofhours+" "+faculties;
    }
}

class TrainingInstitute {
    Set<Faculty> faculties = new HashSet<Faculty>();
    List<Session> sessions = new ArrayList<Session>();
    public void takeASession(Session session) {
        sessions.add(session);
        faculties.addAll(session.getFaculties());
        for (Faculty faculty: faculties){
            faculty.gemavailable -= session.noofhours;
        }
    }
    public String toString(){
        return "faculties: " + faculties + "\nsessions:" + sessions;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T04:02:02.640

很抱歉发布晚了，但这就是我运行prorram的方式：public class TrainingInstitute {

```
private ArrayList<Faculty> faculty1=new ArrayList<Faculty>();
private ArrayList<Session> session1=new ArrayList<Session>();

public void takeASession(String facname,String cname,float noOfhours)
{

        Session s=new Session(cname, noOfhours,new Faculty(facname));
        session1.add(s);
        System.out.println("The session for"+""+facname+"is added and the size is:"+session1.size());
} 
```

# c# - asp.net c# 以粗体显示工具提示

> ID：13142954
> 
> 赞同：1
> 
> 时间：2012-10-30T15:58:45.773
> 
> 标签：c#, asp.net, tooltip

我试图在我的代码隐藏中显示一个工具提示。（我正在使用 ASP.NET C#）我喜欢用粗体显示部分工具提示：我有以下内容：

```
 header["Emp"].ToolTip = "Employee<b>Number</b>"; 
```

它似乎不像它所显示的那样工作：

```
 Employee<b>Number</b> 
```

先感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T16:09:59.357

您不能以您尝试的方式显示粗体工具提示。

`Tooltip`属性呈现为[`title`](http://www.w3schools.com/tags/tag_title.asp)HTML 元素上的属性，[不支持格式化](https://stackoverflow.com/questions/484137/is-it-possible-to-format-an-html-tooltip)。

如果您希望格式化您的工具提示，您应该使用 javascript 工具提示替代方案。

这是一个流行的工具提示 jQuery 插件的链接，我对此有很好的体验：

[http://bassistance.de/jquery-plugins/jquery-plugin-tooltip/](http://bassistance.de/jquery-plugins/jquery-plugin-tooltip/)

* * *

为了让您的客户端可以访问这些数据，我将其添加为 HTML5[`data-*`](http://html5doctor.com/html5-custom-data-attributes/)属性，并从中读取：

```
header["Emp"].Attributes["data-tooltip"] = "Employee<b>Number</b>"; 
```

# spring - ModelMap、Session 属性和 Spring Portlet MVC

> ID：13142955
> 
> 赞同：2
> 
> 时间：2012-10-30T15:58:43.573
> 
> 标签：spring, session, spring-mvc, portlet

ModelMap 在 Spring Portlet MVC 中的真正作用是什么？我已经在 WebSphere Portal 7 中使用 Spring Portlet MVC 3.0 测试了一些 Portlet，似乎ModelMap 中设置的**每个属性都存储在 PortletSession 中。**

如果是这样，那么 Session Attributes 的作用是什么？（顺便说一句，有几个错误，包括清除这些家伙）。如果我想存储仅持续到当前请求的属性怎么办？（例如，确认消息）。如果我将此消息放在 ModelMap 中，它会存储在会话中，并且每次用户进入 Portal 时我都必须手动清除它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T05:41:39.817

如果您`@SessionAttributes`在控制器类中添加了注释并且具有相同的`@ModelAttribute`值，那么就有可能将您的 ModelMap 存储到 PortletSession。但理想情况下，ModelMap 不会默认存储在 PortletSession 中。

# eclipse - Eclipse Package Explorer：隐藏部分长包名？

> ID：13142960
> 
> 赞同：60
> 
> 时间：2012-10-30T15:59:06.223
> 
> 标签：eclipse

我一直在寻找一个让我烦恼了一段时间的“问题”（但没有任何运气）。

我正在开发一个包名相当长的 Android 应用程序`com.kennethbrodersen.simplecaster`。

该项目包含许多子包。问题是所有这些包都在包资源管理器中显示为完整的包标识符。结果是这个视图必须非常宽，或者我必须水平滚动才能真正查看名称中有趣的部分。该问题在下面的屏幕截图中非常清晰可见。

你们中有人知道“隐藏”标识符部分的方法吗（在这种情况下`com.kennethbrodersen.simplecaster`）？

![Eclipse 包资源管理器](../Images/605821f2f4a106ad260c990cd0d6077a.png)

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-10-30T16:07:14.853

您可以在 Helios (3.6) 或更高版本中配置包名称缩写。转到**Window > Preferences > Java > Appearance**以设置缩写规则。

例如，`com.kennethbrodersen.simplepod`可以配置为`{KBsimple}`与规则一样显示`com.kennethbrodersen.simplepod={KBsimple}`。

# android - 如何处理 HTML 和 Linkify 的 textview

> ID：13142962
> 
> 赞同：8
> 
> 时间：2012-10-30T15:59:10.250
> 
> 标签：android, textview, linkify

我正在尝试获取一个文本视图来处理超链接以及电话号码。说我的文字是：

```
"555-555-555, www.google.com, <a href="www.google.com">Google!</a>" 
```

如果我在这个字符串上运行 Html.fromHtml()，那么 TextView 会显示 Google！正确地作为可点击的链接，但不是其他两个。

如果我在 TextView 上运行 Linkify.addLinks(TextView, Linkify.All)，那么前两个被正确识别为电话号码和 url，但最后一个中没有处理 html。

如果我同时运行它们，那么其中一个或另一个将受到尊敬，但不能同时运行。（Html.fromHtml 将删除那里的 html 标签，但如果在之后调用 linkify，它将不是链接）

关于如何让这两个功能同时工作的任何想法？那么所有的链接都被正确处理了吗？谢谢！

编辑：此外，文本是动态更改的，因此我不确定如何为此设置 Linkify 模式。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-19T21:04:57.140

这是因为在处理文本`Html.fromHtml`之前`Linkify.addLinks`删除了以前的跨度。

使用此代码使其工作：

```
public static Spannable linkifyHtml(String html, int linkifyMask) {
    Spanned text = Html.fromHtml(html);
    URLSpan[] currentSpans = text.getSpans(0, text.length(), URLSpan.class);

    SpannableString buffer = new SpannableString(text);
    Linkify.addLinks(buffer, linkifyMask);

    for (URLSpan span : currentSpans) {
        int end = text.getSpanEnd(span);
        int start = text.getSpanStart(span);
        buffer.setSpan(span, start, end, 0);
    }
    return buffer;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T23:13:25.603

尝试在您的 textview 上设置移动方法，而不是使用 Linkify：

```
textView.setMovementMethod(LinkMovementMethod.getInstance()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T15:01:15.983

在 TextView 的 xml 布局中，您应该添加以下内容：

```
android:autoLink="all"
android:linksClickable="true" 
```

然后你应该在 Java 中删除你的 Linkify 代码。

它以某种方式工作，但我不知道为什么。我添加了一个问题，看看是否有人可以解释这种行为：[Using Linkify.addLinks combine with Html.fromHtml](https://stackoverflow.com/questions/14538113/using-linkify-addlinks-combine-with-html-fromhtml)

# drupal - Javascript：cookie不会过期

> ID：13142966
> 
> 赞同：1
> 
> 时间：2012-10-30T15:59:23.077
> 
> 标签：drupal, cookies

由于英国和荷兰的 cookielaw 限制，我正试图在 cookie 设置后立即使其过期。这是我现在使用的代码：

```
(function ($) {

$(document).ready(function(){

    if (!CookieControl.maySendCookies()) {

        var now = new Date();
        var expirationDate = new Date();
        expirationDate.setDate(now.getDate() - 7);
        alert(getCookieValue('has_js'));
        document.cookie='has_js=1;expires=' + expirationDate.toGMTString();
        alert(getCookieValue('has_js'));
    }

});

})(jQuery); 
```

该`getCookieValue`函数是来自另一个文档的函数，用于检查 cookie 是否真的消失了。在我使 cookie 过期之前，`1`它的值应该是 。但是，当我使用 cookie 过期时，我`document.cookie='has_js=1;expires=' + expirationDate.toGMTString();`再次检查该值，它仍然存在。

我真的无法弄清楚为什么它没有被删除。我不能等待会话或其他任何内容过期，这不符合 NL 法律。

有人有什么建议吗？

CMS：Drupal / 域：本地主机

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:08:10.937

它可能与路径有关，我不知道，但您可以使用以下脚本：

```
function getCookieValue(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ')
            c = c.substring(1, c.length);
        if (c.indexOf(nameEQ) == 0)
            return unescape(c.substring(nameEQ.length, c.length));
    }
    return null;
}

function setCookieValue(name, value, days) {
    var date = new Date();
    date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
    var expires = "; expires=" + date.toGMTString();
    document.cookie = name + "=" + escape(value) + expires + "; path=/";
}

function delCookieValue(name) {
    Set_Cookie(name, '', -1);
}

$(document).ready(function(){
    if (!CookieControl.maySendCookies()) {
       delCookieValue("has_js");
    }
}); 
```

# javascript - 对象/数组的深度比较

> ID：13142968
> 
> 赞同：32
> 
> 时间：2012-10-30T15:59:37.460
> 
> 标签：javascript, arrays, object, comparison

> **可能重复：**
> [如何确定两个 JavaScript 对象的相等性？](https://stackoverflow.com/questions/201183/how-do-you-determine-equality-for-two-javascript-objects)
> [JavaScript 中的对象比较](https://stackoverflow.com/questions/1068834/object-comparison-in-javascript)

如果我有两个数组或对象并想比较它们，例如

```
object1 = [
 { shoes:
   [ 'loafer', 'penny' ]
  },
  { beers:
     [ 'budweiser', 'busch' ]
  }
]

object2 = [
 { shoes:
   [ 'loafer', 'penny' ]
  },
  { beers:
     [ 'budweiser', 'busch' ]
  }
]

object1 == object2 // false 
```

如果您从服务器获得响应并尝试查看它是否已更改，这可能会很烦人

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-30T16:04:04.897

*更新：*
为了回应围绕原始建议的评论和担忧（比较 2 个 JSON 字符串），您可以使用此函数：

```
function compareObjects(o, p)
{
    var i,
        keysO = Object.keys(o).sort(),
        keysP = Object.keys(p).sort();
    if (keysO.length !== keysP.length)
        return false;//not the same nr of keys
    if (keysO.join('') !== keysP.join(''))
        return false;//different keys
    for (i=0;i<keysO.length;++i)
    {
        if (o[keysO[i]] instanceof Array)
        {
            if (!(p[keysO[i]] instanceof Array))
                return false;
            //if (compareObjects(o[keysO[i]], p[keysO[i]] === false) return false
            //would work, too, and perhaps is a better fit, still, this is easy, too
            if (p[keysO[i]].sort().join('') !== o[keysO[i]].sort().join(''))
                return false;
        }
        else if (o[keysO[i]] instanceof Date)
        {
            if (!(p[keysO[i]] instanceof Date))
                return false;
            if ((''+o[keysO[i]]) !== (''+p[keysO[i]]))
                return false;
        }
        else if (o[keysO[i]] instanceof Function)
        {
            if (!(p[keysO[i]] instanceof Function))
                return false;
            //ignore functions, or check them regardless?
        }
        else if (o[keysO[i]] instanceof Object)
        {
            if (!(p[keysO[i]] instanceof Object))
                return false;
            if (o[keysO[i]] === o)
            {//self reference?
                if (p[keysO[i]] !== p)
                    return false;
            }
            else if (compareObjects(o[keysO[i]], p[keysO[i]]) === false)
                return false;//WARNING: does not deal with circular refs other than ^^
        }
        if (o[keysO[i]] !== p[keysO[i]])//change !== to != for loose comparison
            return false;//not the same value
    }
    return true;
} 
```

但在许多情况下，IMO 不必那么困难：

```
JSON.stringify(object1) === JSON.stringify(object2); 
```

如果字符串化的对象相同，则它们的值是相似的。
为了完整起见：`JSON`简单地忽略函数（好吧，将它们一起删除）。它的意思是代表*数据*，而不是*功能*。
尝试比较仅包含函数的 2 个对象将导致`true`：

```
JSON.stringify({foo: function(){return 1;}}) === JSON.stringify({foo: function(){ return -1;}});
//evaulutes to:
'{}' === '{}'
//is true, of course 
```

对于对象/函数的深度比较，您必须求助于库或编写自己的函数，并克服 JS 对象都是引用的事实，因此在比较`o1 === ob2`时只有两个变量指向相同时才会返回 true目的...

正如@aj 在评论中指出的那样：

```
JSON.stringify({a: 1, b: 2}) === JSON.stringify({b: 2, a: 1}); 
```

是`false`，因为两个 stringify 分别调用 yield`"{"a":1,"b":2}"`和`"{"b":2,"a":1}"`。至于为什么会这样，你需要了解 chrome 的 V8 引擎的内部结构。我不是专家，没有过多的细节，这就是它归结为：

创建的每个对象，以及每次修改它时，V8 都会创建一个新的隐藏 C++ 类（有点）。如果对象 X 具有一个属性`a`，而另一个对象具有相同的属性，则这两个 JS 对象都将引用一个隐藏类，该隐藏类继承自定义该属性的共享隐藏类`a`。如果两个对象都共享相同的基本属性，那么它们都将引用相同的隐藏类，并且`JSON.stringify`在两个对象上的工作方式完全相同。这是给定的（如果您有兴趣，请在[此处](https://stackoverflow.com/questions/21382811/does-chrome-retain-each-objects-constructor/21551377#21551377)了解有关 V8 内部结构的更多详细信息）。

但是，在 aj 指出的示例中，两个对象的字符串化方式不同。怎么会？好吧，简单地说，这些对象永远不会同时存在：

```
JSON.stringify({a: 1, b: 2}) 
```

这是一个函数调用，一个表达式需要先解析为结果值，然后才能与右侧的操作数进行比较。第二个对象字面量还没有放在桌面上。
对象被字符串化，并且外显被解析为字符串常量。对象文字没有在任何地方被引用，并被标记为垃圾回收。
在此之后，右手操作数（`JSON.stringify({b: 2, a: 1})`表达式）得到相同的处理。

一切都很好，但还需要考虑的是，现在的 JS 引擎比以前复杂得多。再说一次，我不是 V8 专家，但我认为 aj 的代码片段被大量优化是合理的，因为代码被优化为：

```
"{"b":2,"a":1}" === "{"a":1,"b":2}" 
```

基本上省略了`JSON.stringify`所有调用，只是在正确的位置添加引号。也就是说，毕竟，效率要高得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T15:59:37.460

作为下划线混合：

在咖啡脚本中：

```
_.mixin deepEquals: (ar1, ar2) ->

    # typeofs should match
    return false unless (_.isArray(ar1) and _.isArray(ar2)) or (_.isObject(ar1) and _.isObject(ar2))

    #lengths should match
    return false if ar1.length != ar2.length

    still_matches = true

    _fail = -> still_matches = false

    _.each ar1, (prop1, n) =>

      prop2 = ar2[n]

      return if prop1 == prop2

      _fail() unless _.deepEquals prop1, prop2

    return still_matches 
```

在javascript中：

```
_.mixin({
  deepEquals: function(ar1, ar2) {
    var still_matches, _fail,
      _this = this;
    if (!((_.isArray(ar1) && _.isArray(ar2)) || (_.isObject(ar1) && _.isObject(ar2)))) {
      return false;
    }
    if (ar1.length !== ar2.length) {
      return false;
    }
    still_matches = true;
    _fail = function() {
      still_matches = false;
    };
    _.each(ar1, function(prop1, n) {
      var prop2;
      prop2 = ar2[n];
      if (prop1 !== prop2 && !_.deepEquals(prop1, prop2)) {
        _fail();
      }
    });
    return still_matches;
  }
}); 
```

# python - 在 python 中的 os.environ 上使用 copy.deepcopy 似乎已损坏

> ID：13142972
> 
> 赞同：4
> 
> 时间：2012-10-30T15:59:43.470
> 
> 标签：python, environment-variables, deep-copy

我可能只是错过了一些关于 os.environ 或 copy.deepcopy 如何工作的文档，但似乎 copy.deepcopy 在 os.environ 上不起作用。但是，如果我将 os.environ 重建成一个新字典，它就可以正常工作。这是我的示例代码：

```
import copy
import os

tcsh_loc = '/bin/tcsh'
safe_dict = {}
for key in os.environ.keys():
    safe_dict[key] = os.environ[key]

safe_dict['SAFE_ENV'] = 'non-leaked-var'
os.spawnv(os.P_WAIT, tcsh_loc, [tcsh_loc, '-c', 'echo $SAFE_ENV'])
os.spawnve(os.P_WAIT, tcsh_loc, [tcsh_loc, '-c', 'echo $SAFE_ENV'], safe_dict)

unsafe_dict = copy.deepcopy(os.environ)
unsafe_dict['UNSAFE_ENV'] = 'leaked-var'
os.spawnv(os.P_WAIT, tcsh_loc, [tcsh_loc, '-c', 'echo $UNSAFE_ENV'])
os.spawnve(os.P_WAIT, tcsh_loc, [tcsh_loc, '-c', 'echo $UNSAFE_ENV'], unsafe_dict) 
```

我期望得到的是：

```
SAFE_ENV: Undefined variable.
non-leaked-var
UNSAFE_ENV: Undefined variable.
leaked-var 
```

但我得到的是：

```
SAFE_ENV: Undefined variable.
non-leaked-var
leaked-var
leaked-var 
```

这意味着该`unsafe_dict['UNSAFE_ENV'] = 'leaked-var'`分配以某种方式“泄漏”到 os.environ 中，大概是来自 os.environ 没有像我预期的那样被深度复制。

我认为这是某种已知的行为，但这对我来说似乎真的很奇怪，至少在使用 os.spawnev() 之类的东西方面是这样。我有一个笨拙的解决方法，但我很想了解发生了什么以及是否有比 for 循环更优雅的解决方案......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T16:04:53.157

`os.environ`是 type `os._Environ`，而不是列表或字典。一个实例的副本也`os._Environ`将修改环境是合乎逻辑的。

见`os._Environ.__setitem__()`功能。它将值存储在**2 个位置**，一次使用`putenv()`，一个用于分配`self._data`字典中的键。

```
def __setitem__(self, key, value):
    key = self.encodekey(key)
    value = self.encodevalue(value)
    self.putenv(key, value)
    self._data[key] = value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-27T12:00:07.980

您可以更轻松地重建它：只需使用`dict(os.environ)`.

简单测试：

```
import os
a=os.environ
b=dict(os.environ)

print type(a), type(b)
# -> <type 'instance'> <type 'dict'>

print a['PWD'], b['PWD']
# -> /home/max /home/max

b['PWD']='/fooo'
print a['PWD'], b['PWD']
# -> /home/max /fooo 
```

# jquery - 使用 jQuery 为多个背景位置设置动画

> ID：13142974
> 
> 赞同：1
> 
> 时间：2012-10-30T15:59:46.657
> 
> 标签：jquery, jquery-animate, background-position

我正在为我的 wordpress 主题的侧边栏小部件创建一个切换下拉效果。

`h2`小部件内的标签有两个背景位置不同的背景图像。

这个背景的 CSS 是这样的：

```
background-image: url(images/h2bg.png), url(images/button.png);
background-position: center left, bottom right;
background-repeat: no-repeat,no-repeat; 
```

我想要做的是当用户单击 h2 元素时，将第一个背景（h2bg.png）从元素框中设置为动画，然后将第二个背景图像的位置更改为`top left`. （这是一个很小的精灵图像）

而我的 jQuery 脚本是这样的：（你不需要通过它）

```
$(document).ready(function() {
    $('#sidebar div.widget').each(function(i) {
        height = $(this).css('height');
        $(this).attr('data-height',height);
        $(this).attr('data-animate','ON');
    });
    $('.widget h2').click(function() {
        if ($(this).parent('div.widget').attr('data-animate') == 'OFF') {
            $(this).parent('div.widget').attr('data-animate','ON');
            height = $(this).parent('div.widget').attr('data-height');
            $(this).parent('div.widget').animate({
                height: height
            },500);
            $(this).animate({
                'background-position-x': '0%, 100%'
            },500,function() {
                $(this).css('background-position-y','50%, 100%');
            });
        } else {
            $(this).parent('div.widget').attr('data-animate','OFF');
            $(this).parent('div.widget').animate({
                height: '29px'
            },500);
            $(this).animate({
                'background-position-x': '-100%, 100%'
            },500,function() {
                $(this).css('background-position-y','50%, 0%');
            });
        }
    });
}); 
```

长话短说..我注意到javascript返回`background-position-x`和`background-position-y`作为百分比，中间有分号。

所以我在动画中使用了百分比，它适用于一张背景图片。但是当涉及到多个背景时，它就不起作用了！我用分号试过..​​....没有分号和像素值，但没有运气！

如何使用 jQuery 处理多个背景位置属性？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:20:14.310

您可能需要在 .css/.animate 方法中重新定义图像 URL。

```
'background-image' : 'url("image1.png"), url("image2.png")',
'background-position' : 'right 50px left 50px' (or whatever) 
```

CSS 使用 image-url 声明的序列来确定哪些属性适用于哪个图像，因此可能只是浏览器没有参考点的情况（由于样式是内联而不是在样式表中应用的）。

此外，坚持“背景位置”声明。不确定 background-position-x, background-position-y 是否适用于多个图像。

# 更新

jQuery 不能为背景图像设置动画。为了获得相同的效果，您必须通过在目标元素下使用堆叠的 div来*伪造它并调整它们的大小。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T18:09:42.277

只需使用`'background-position' : 'value px value px'`或`'left top'`任何适合你的东西。

# java - 十进制转换错误

> ID：13142977
> 
> 赞同：3
> 
> 时间：2012-10-30T16:00:06.267
> 
> 标签：java, decimal, octal

我正在编写一个将八进制数转换为小数的程序。它编译正确，但我的转换代码有一些主要问题。对我来说这似乎是完全合乎逻辑的，但是当我运行程序时，转换错误（即 1 转换为 36）有人能指出发生了什么问题吗？

```
 public static int convert(int octal)
{
    int d1=0,d2=0,d3=0,d4=0,d5=0,d6=0,d7=0,d8=0;

    if(octal >=9999999){
    d8 = (octal-(octal%10000000));}
    if(octal >=999999){
    d7 = (octal-(octal%1000000));}
    if(octal >=99999){
    d6 = (octal-(octal%100000));}
    if(octal >=9999){
    d5 = (octal-(octal%10000));}
    if(octal >= 999){
    d4 = (octal-(octal%1000));}
    if(octal >= 99){
    d3 = (octal-(octal%100));}
    if(octal >= 9){
    d2 = (octal-(octal%10));}
    if(octal >= 0){
    d1 = (octal-(octal%1));}

    octal = (d8 * 8^7) + (d7 * 8^6) + (d6 * 8^5) + (d5 * 8^4) + (d4 * 8^3) + (d3 * 8^2) + (d2 * 8^1) + (d1 * 8^0);

    return octal;

} 
```

这只是我的转换方法，我的主要方法是收集 int 八进制；

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T16:01:06.603

这就是问题：

```
8^7 
```

[`^`操作员](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.22.1)不会按照您的想法去做。它进行二进制异或...

但是，我想说整个设计显然是可疑的。一个`int`值不是“in”八进制或任何其他基数 - 它只是一个整数。数字 10 就是数字 10，无论是十进制的“10”、十六进制的“A”还是八进制的“12”。如果您有一个要解析为八进制数字的字符序列，则该方法的输入应该是 a `String`，而不是 a `int`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T16:50:11.847

由于您的方法接受整数（通常以字符串表示形式表示为十进制），并且您输出的也是整数，因此您并没有真正变成“八进制整数”，而是将其更改为其他整数完全地。您正在尝试将整数正确转换为八进制，然后将该八进制错误地解释为十进制。

如果希望将整数转换为八进制字符串表示，您可以简单地使用以下方法：

```
public static String convert(int number) {
    Integer.toOctalString(number);
} 
```

而且，如果您真的想返回一个 int 来表示该八进制字符串被解析为十进制，您可以简单地执行以下操作：

```
public static int convert(int number) {
    return Integer.parseInt(Integer.toOctalString(number));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T16:18:52.497

如果您有重复的代码，您可能会考虑使用循环。

```
public static void main(String... args) {
    for (long i = 7, j = 7; i > 0; i = i * 10 + 1, j = j * 8 + 1) {
        long c = convert(i);
        if (c != j)
            throw new AssertionError(i + ": " + c + " != " + j);
        System.out.println(i + " = > " + j);
    }
}

public static long convert(long octal) {
    long ret = 0;
    for (long i = 1000000000000000000L, j = 1L << (3 * 18); i > 0; i /= 10, j >>= 3)
        ret += j * (octal / i % 10);
    return ret;
} 
```

印刷

```
7 = > 7
71 = > 57
711 = > 457
7111 = > 3657
71111 = > 29257
711111 = > 234057
7111111 = > 1872457
71111111 = > 14979657
711111111 = > 119837257
7111111111 = > 958698057
71111111111 = > 7669584457
711111111111 = > 61356675657
7111111111111 = > 490853405257
71111111111111 = > 3926827242057
711111111111111 = > 31414617936457
7111111111111111 = > 251316943491657
71111111111111111 = > 2010535547933257
711111111111111111 = > 16084284383466057
7111111111111111111 = > 128674275067728457 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T22:49:00.270

你有一个潜在的误解，会一直把你搞得一团糟。

本身没有“八进制数”这样的东西。An`int`不是十进制、罗马数字或八进制——它只是一个数字。

“八进制数”实际上意味着“包含数字的八进制表示的字符串”。

# windows - Win32 堆栈段基地址

> ID：13142981
> 
> 赞同：1
> 
> 时间：2012-10-30T16:00:17.147
> 
> 标签：windows, stack, portable-executable, internals

我知道要查找文本（代码）部分的基地址，应该查找 .text 部分的虚拟地址（除非启用了 ASLR），但是堆栈呢？

堆栈内存是否与堆一起存储在 .data 部分中？如果是这样，我应该查找 .data 部分虚拟地址以了解堆栈基地址

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T19:24:17.787

堆栈不是一个部分。堆栈是为每个线程动态分配的。（如果它是一个部分，那么每个进程只能有一个线程。）

# c++ - CDT 在“设置索引器”期间发生内部错误

> ID：13142983
> 
> 赞同：4
> 
> 时间：2012-10-30T16:00:18.013
> 
> 标签：c++, eclipse, eclipse-cdt, indexer

我使用带有 CDT 的 Eclipse 来构建 C++ 代码。加载我的工作区后，我收到以下消息：

```
An internal error occurred during: "Setting up indexer". 
```

这是日志：

```
eclipse.buildId=I20110613-1736
java.version=1.6.0_24
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=linux, ARCH=x86, WS=gtk, NL=en_US
Command-line arguments:  -os linux -ws gtk -arch x86

!ENTRY org.eclipse.core.jobs 4 2 2012-10-30 16:46:09.940
!MESSAGE An internal error occurred during: "Setting up indexer".
!STACK 0
java.lang.ArrayIndexOutOfBoundsException: 18
    at org.eclipse.cdt.internal.core.pdom.db.Database.getChunk(Database.java:274)
    at org.eclipse.cdt.internal.core.pdom.db.Database.getRecPtr(Database.java:477)
    at org.eclipse.cdt.internal.core.pdom.dom.PDOMLinkage.getLinkageID(PDOMLinkage.java:119)
    at org.eclipse.cdt.internal.core.pdom.PDOM.readLinkages(PDOM.java:351)
    at org.eclipse.cdt.internal.core.pdom.PDOM.loadDatabase(PDOM.java:334)
    at org.eclipse.cdt.internal.core.pdom.PDOM.<init>(PDOM.java:310)
    at org.eclipse.cdt.internal.core.pdom.WritablePDOM.<init>(WritablePDOM.java:57)
    at org.eclipse.cdt.internal.core.pdom.WritablePDOM.<init>(WritablePDOM.java:52)
    at org.eclipse.cdt.internal.core.pdom.PDOMManager.getOrCreatePDOM(PDOMManager.java:370)
    at org.eclipse.cdt.internal.core.pdom.PDOMManager.createIndexer(PDOMManager.java:554)
    at org.eclipse.cdt.internal.core.pdom.PDOMSetupJob.run(PDOMSetupJob.java:58)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54) 
```

我该如何修复/重置这个？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-31T09:39:43.277

从 .metadata/.plugins/org.eclipse.cdt.core/ 中删除 *.pdom 文件解决了问题

# jquery - 替换项目 在静态列表中 通过拖动的项目 来自可排序列表

> ID：13142989
> 
> 赞同：2
> 
> 时间：2012-10-30T16:00:30.237
> 
> 标签：jquery, drag-and-drop, replace, jquery-ui-sortable

我正在努力结合 jQuery UI 可排序的 jQuery 拖放功能。我想用拖动的另一个项目（也是一个 li 标签）替换 HTML 列表中的一个项目（ li 标签）。

**所以在项目上，而不是在清单上！**它必须放在特定的位置，而不是添加到列表的末尾。**我不想附加它。**

我拖动的项目来自另一个可排序的列表。（我不知道这是否重要。）

这是我的代码：

HTML：

```
<div id="source" class="listBlock">            
    <ul class="Sortable">
        <li class="ui-state-default" id="item1">Item 1</li>
        <li class="ui-state-default" id="item2">Item 2</li>
        <li class="ui-state-default" id="item3">Item 3</li>
        <li class="ui-state-default" id="item4">Item 4</li>
    </ul>
</div>                            

<div id="target" class="listBlock">            
    <ul class="DropTrue">
        <li class="ui-state-default slot" id="slot1">SLOT 1</li>
        <li class="ui-state-default slot" id="slot2">SLOT 2</li>
        <li class="ui-state-default slot" id="slot3">SLOT 3</li>
        <li class="ui-state-default slot" id="slot4">SLOT 4</li>
    </ul>
</div> 
```

Javascript（使用 jQuery 1.7.2 和 jQuery UI 1.8.18）：

```
$(function() {
        $("ul.Sortable").sortable({
            connectWith: 'ul',
            opacity: 0.6,
        });
    }); 
```

你能帮我吗，最好是一些示例代码？非常感激。

[2014年12月3日编辑]

一个完整的工作实现：

```
var maxFieldLength = 30;

$(document).ready(function () {

    $(".detailsBlock").find("tbody").show();
    $(".showDetails").addClass("active");

    InitializeHeaderMap();

    $('#ResetButton').click(function () {
    $('span.headerText img').each(function (index) {
        $(this).click();
    });
    });

    $("ul.SourceList li").draggable({
    opacity: 0.6,
    revert: true
    });

    $("ul.TargetList li").droppable({
    drop: function (event, ui) {
        PlaceInSlot(ui.draggable, $(this));
    }
    });
});

function OnNextClick() {
    CreateHeaderMap();
    return true;
}

function OnPreviousClick() {
    CreateHeaderMap();
    return true;
}

function InitializeHeaderMap() {
    var map = [];
    var headerMap = $('input[name=HeaderMap]').val();

    if ((headerMap !== null) && (headerMap !== undefined) && (headerMap.length > 0)) {
    try {
        map = JSON.parse(headerMap);
    } catch (err) {
        map = '';
    }
    }

    $.each(map, function (key, mapObject) {
    if (mapObject.HeaderIndex != -1) {
        var header = $("ul.SourceList li:icontains(" + mapObject.Header + ")");
        // Only place in slot when the header text is found
        if (header.text().length > 0) {
        var slot = $("ul.TargetList li[id=" + mapObject.Item + "]");
        PlaceInSlot(header, slot);
        }

    }
    });
}

function CreateHeaderMap() {

    var map = [];

    $("li.item").each(function () {

    var obj = {};
    obj['Item'] = $(this).attr('id');
    var position = $(this).find('span.headerText input').val();
    if ((position === 'undefined') || (position === null)) {
        position = -1;
    }
    obj['HeaderIndex'] = position;
    if (position !== 'undefined') {
        obj['Header'] = $(this).children('span.headerText').text().trim();
    } else {
        obj['Header'] = '';
    }

    map.push(obj);
    });

    $('input[name=HeaderMap]').val(JSON.stringify(map));
}

function PlaceInSlot(element, slot) {
    $(slot).children("span.slotText").hide();

    var revertImg = '<img name="image" src="https://dl.dropbox.com/s/z4cehkuhv2mj502/Prullie_1_12.png" width="12" height="12" />';

    $(slot).children("span.headerText").html($(element).html()).append(revertImg);

    $(slot).parent().addClass("ui-state-default");

    $(slot).removeClass("validation-error");

    $(slot).droppable({
    disabled: true
    });

    var importRowFile = $(element).val();

    $(slot).attr("value", importRowFile);

    $(element).hide();

    $(slot).find("span.headerText img").click(function () {
    $(element).show();

    $(slot).children("span.slotText").show();
    $(slot).children("span.headerText").html('');
    $(slot).addClass("slot");
    $(slot).droppable({
        disabled: false
    });
    $(slot).off('click');
    });
} 
```

见小提琴：http: [//jsfiddle.net/RWCH/9DPCW/](http://jsfiddle.net/RWCH/9DPCW/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T07:52:10.703

I believe one could make each of the individual items "droppable", by their class name, e.g. "ui-item-droppable" and then on the drop event you can perform the swap then.

The JQuery example has it so the containing item is the droppable container, but there is no reason why you can't change that to be all the contained items.

You won't have any performance hit because you are only stating that the class is droppable, not each and every item in the target container.

# c# - 没有序列化的深度克隆实体

> ID：13142992
> 
> 赞同：0
> 
> 时间：2012-10-30T16:00:33.023
> 
> 标签：c#, wpf, entity-framework, serialization

我需要深度克隆一个实体（使用现有实体作为新实体的模式）。我找到了几种方法，但都包括序列化。由于我们的实体派生自不可序列化的 MVVM 工具包的 ObservableObject，我们不能使用这些方法。

最好的方法是什么？

我们正在使用 .net 4.5 和 EF5 和 WPF。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:06:58.680

1.  一种方法是简单地编写将为您执行克隆的自定义代码。给定一个对象，新建一个实例，然后为每个属性编写一些代码，这些代码将为您提供该属性的深层副本，也许递归地链接您的对象图以获得复杂的属性。

2.  另一种选择是创建一个模型来存储您的重要数据，对其进行序列化，然后从该临时可序列化模型中反序列化并将数据恢复到一个新的实体对象中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-01T12:02:14.433

您可以使用一些库进行深度克隆。它比手动实现要慢（通过手动实现，您可以通过仅复制所需的属性来优化您的任务），但一般来说，这个库对于*一般*复制很有用。

我最喜欢的是[DeepCloner](https://www.nuget.org/packages/DeepCloner/)，你也可以在[CloneExtensions看到](https://www.nuget.org/packages/CloneExtensions/)

# asp.net-mvc - IIS 站点上的高 CPU

> ID：13142993
> 
> 赞同：4
> 
> 时间：2012-10-30T16:00:34.927
> 
> 标签：asp.net-mvc, iis, io, cpu

我有一个网络服务器，其中包含我创建的 10 个 mvc 站点。所有站点都“链接”到文件夹中的相同代码。所以所有 10 个站点都运行在相同的代码上。这样做在网站上有不同的语言。

我的问题是 1 个站点在几分钟内使用 40-60% 的 CPU。然后它下降，另一个站点的 CPU 上升。通常网站在 w3wp 进程中使用 300mb，但有时会上升到 8-900mb！

有 20GB 内存，18,9 经常使用。还有一个运行需要 13GB 的 SQL 服务器。

该站点是 MVC 3 站点。对 SQL 数据使用缓存。

每个站点都有自己的游泳池。

我知道这是一个非常模糊的问题。但是任何人都可以看到这个设置有任何明显的问题吗？

为什么CPU会周期性上升？

网站上大约有 100-150 个用户。

任何想法或想法将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T15:02:40.093

CPU 利用率是 Web 应用程序的结果，因此应用程序开发人员最清楚问题出在哪里。如果应用程序开发人员不是“内部”，您作为管理员将不得不发现设置（不太可能）或应用程序（我认为更有可能）存在问题。

由于 IIS**需要**Microsoft 的[IIS Tracer](http://iismonitor.motobit.com/)等工具，因此使用“DebugDiag 和朋友”调试高 CPU 利用率需要大量知识和努力。

这是[一篇不错的文章如何解决高 CPU 使用率问题](http://www.iis.net/learn/troubleshoot/performance-issues/troubleshooting-high-cpu-in-an-iis-7x-application-pool)

您的网络应用程序使用缓存吗？

```
OutputCache duration="180" varybyparam="*" 
```

抱歉，如果这没有帮助，但我是管理员，当 IIS 服务器在 95% 的情况下 CPU 使用率很高时，问题在于 SQL 查询不佳或编程错误，我们在分析**源代码**后修复了这些问题。

# codeigniter - CURLOPT_FILE 使用 Curl 库

> ID：13142995
> 
> 赞同：0
> 
> 时间：2012-10-30T16:00:38.680
> 
> 标签：codeigniter, curl

可以使用带有 Curl (Philip Sturgeon) 库的 CURLOPT_FILE 下载文件吗？

现在我正在使用，它可以工作，但我想用 Curl 库来做：

```
set_time_limit(0);
ini_set('display_errors',true);//Just in case we get some errors, let us know....

$fp = fopen ('/Users/tony/labs/store/'. 'a.mp4', 'w+');//This is the file where we save the information
$ch = curl_init($previewUrl);//Here is the file we are downloading
curl_setopt($ch, CURLOPT_TIMEOUT, 50);
curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_exec($ch);
curl_close($ch);
fclose($fp); 
```

我想要这样的东西：

```
$file = fopen($to, 'w');
$this->curl->create($url);
$this->curl->option('file', $file);
$this->curl->execute();
fclose($file); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:03:22.867

我认为使用一个包装 curl 的库，它本身已经非常简单，只是矫枉过正。

如果它不支持它，该库只是一个 single.php 文件，您可以轻松地在其中添加一行代码，它就会支持它。

# svn - 相对于父级的 Maven SCM URL

> ID：13142998
> 
> 赞同：6
> 
> 时间：2012-10-30T16:00:44.270
> 
> 标签：svn, maven

我们在 SVN 中有以下项目结构，其父（非聚合器）项目定义了通用配置。父级是单独管理和释放的。

```
trunk
    +parent
        pom.xml
    +project1
        pom.xml
        +project1_1
            pom.xml
        +project1_2
            pom.xml
    +project2
        pom.xml 
```

所以基本上每个真实项目（project1，project2）都被用作其子项目的聚合器。`parent`通用配置设置（Java 编译器版本、其他插件）保存在父级中，在所有项目（项目 1、项目 2）中用作 Maven 。

我想在父级中定义的设置之一是 Subversion 的 SCM URL，例如`http://svnhost/base/trunk/parent`在父级 pom.xml 中。

当我这样做时，单个项目会继承此设置，但当然不会反映路径的相对性质。在*project1*中，这已解决`http://svnhost/base/trunk/parent/`- 我已经用`mvn help:effective-pom`.

有没有办法指定 SCM 连接，以便相对于父级解决？还是我必须在每个单独的项目中提供 SCM URL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T17:42:37.863

如果您使用`${svn.host}`和`${svn.path}`构建 scm.url 之类的属性应该是可能的。发布插件有一个错误，其中属性在发布期间被替换：http: [//jira.codehaus.org/browse/MRELEASE-128](http://jira.codehaus.org/browse/MRELEASE-128)但自 2.3 版以来似乎已修复。所以你的孩子 poms 只定义属性，而不是 scm url。

我不知道这是否有帮助。您没有在 pom.xml 中保存太多行，并且引入了人们不更改属性的危险。

如果您在父项中定义了 parent.scm.url 的属性，然后在子项中使用该属性添加相对 url ( `<scm.url>${parent.scm.url}/../myproject</scm.url>`) 如果您基于该属性在 scm.url 中执行相对路径，您仍然不会节省太多配置？

我认为确实想要你想要你需要编写一个插件来读取父 url，然后从当前工作副本中读取 url（因为 maven 不知道在哪里可以找到该项目 url，因为它没有配置) 然后从中计算相对路径。与在每个 pom 中重复 scm.url 配置相比，我认为这很奇怪。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T16:27:35.010

在多模块构建中，您只需在项目的根级别定义 scm 连接。但是您的项目布局看起来并不正确。你为什么不把你的 parent/pom.xml 直接放在树干文件夹下？如果您需要单独释放父级，这表明父级确实是一个独立的在线 maven 项目。