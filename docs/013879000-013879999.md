# StackOverflow 问答 13879000-13879999

# php - mysql_fetch_array 和 mysql_fetch_assoc

> ID：13879005
> 
> 赞同：-5
> 
> 时间：2012-12-14T12:47:21.920
> 
> 标签：php, mysql

`mysql_fetch_array`和 有什么不同`mysql_fetch_assoc`？

我从我的数据库中进行了测试。

$a 回显第一行两次，我使用 count() 进行检查，它从我的列中打印出两倍 $b 回显第二行一次。

谁能告诉我为什么？

```
$connect=mysql_connect("localhost", "root", "");
$database=mysql_select_db("phplogin", $connect);

$SQL=mysql_query("SELECT * FROM users");

$a=implode(mysql_fetch_array($SQL));
$b=implode(mysql_fetch_assoc($SQL));

echo $a . "<HR/>";
echo $b; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T12:50:16.937

1.  [`mysql_fetch_assoc`](http://in2.php.net/mysql_fetch_assoc)— 获取结果行作为关联数组
2.  [`mysql_fetch_array`](http://in2.php.net/mysql_fetch_array)— 以关联数组、数值数组或两者的形式获取结果行

`mysql_fetch_array()`本质上返回两个数组，一个带有数字索引，一个带有基于关联的键索引。因此，`mysql_fetch_array()`在不指定您想要的方法（`MYSQL_NUM`或）的情况下使用总是返回一个双精度数组，与or`MYSQL_ASSOC`相比，它的效率要低得多。`mysql_fetch_row()``mysql_fetch_assoc()`

# qt - 如何使用从串口接收的数据在 Qt 中绘制图形？

> ID：13879010
> 
> 赞同：0
> 
> 时间：2012-12-14T12:47:42.903
> 
> 标签：qt, qt4, qwt

我已经通过 Qt 中的串行端口使用`qextserialport`.

现在我有数据了。我想用它来绘制图形（实时绘图），所以，有人能告诉我怎么做吗？

如果可能，请提供示例示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T12:50:44.427

我想你要找的是这个 [http://www.workslikeclockwork.com/index.php/components/qt-plotting-widget/](http://www.workslikeclockwork.com/index.php/components/qt-plotting-widget/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T16:26:05.437

Qwt 提供了一些优化如何实现实时绘图 - fe 与它提供增量绘图的所有其他 Qt 绘图包相反。

您可以查看示波器示例，看看在几乎没有 CPU 使用的情况下有什么可能。

最坏的情况是必须为每个传入的样本从头开始重新绘制，但即便如此，也有一些策略可以加快重新绘制的速度。但是可能的优化取决于您的具体情况，一般无法回答。

但是，如果您需要对 Qwt 库的支持，那么在您可以在 Qwt 项目页面上找到的官方 Qwt 支持渠道上询问任何地方都没有多大意义！

# android - 请告诉我如何在 sqllite 数据库中添加图像视图字段

> ID：13879011
> 
> 赞同：-2
> 
> 时间：2012-12-14T12:47:44.507
> 
> 标签：android, sqlite

> **可能重复：**
> [如何将图像保存在 sqllite 数据库中？](https://stackoverflow.com/questions/13876116/how-to-save-image-in-sqllite-database)

我遵循[本教程](http://vimaltuts.com/android-tutorial-for-beginners/android-sqlite-database-example)，我只想在此代码中添加 1 个新字段来浏览和上传图像。

请问我该怎么做？

```
 import android.os.Bundle;
     import android.provider.MediaStore;
     import android.view.View;
     import android.view.View.OnClickListener;
     import android.widget.Button;
     import android.widget.EditText;
     import android.widget.ImageView;
     import android.widget.Toast;

      public class AddEditCountry extends Activity {

     private long rowID; 
     private EditText nameEt;
     private EditText capEt;
     private EditText codeEt;

     private EditText Donedate;
     private EditText Notes;
     private EditText Person;
     private  ImageView imageView1;
     Bitmap yourSelectedImage;

     String img;
     @Override
     public void onCreate(Bundle savedInstanceState) 
     {
      super.onCreate(savedInstanceState); 
      setContentView(R.layout.add_country);

      nameEt = (EditText) findViewById(R.id.Address);
      capEt = (EditText) findViewById(R.id.Stage);
      codeEt = (EditText) findViewById(R.id.Dueby);

      Donedate = (EditText) findViewById(R.id.Donedate);

      Notes = (EditText) findViewById(R.id.Notes);
      Person = (EditText) findViewById(R.id.Person);

      imageView1 = (ImageView) findViewById(R.id.imageView1);
      Button Browse = (Button) findViewById(R.id.Browse);

      Browse.setOnClickListener(new View.OnClickListener() 
        {
            public void onClick(View v) 
            {               
                Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
                intent.setType("image/*");
                startActivityForResult(intent, 0);
            }
        });        

       Bundle extras = getIntent().getExtras(); 

       if (extras != null)
       {
         rowID = extras.getLong("row_id");
         nameEt.setText(extras.getString("name"));  
         capEt.setText(extras.getString("cap"));  
         codeEt.setText(extras.getString("code"));  
         Donedate.setText(extras.getString("Location"));  
         Notes.setText(extras.getString("Notes")); 
         Person.setText(extras.getString("Person")); 

         img=extras.getString("image");
         imageView1.setImageBitmap(yourSelectedImage);
       }

       Button saveButton =(Button) findViewById(R.id.saveBtn);
       saveButton.setOnClickListener(new OnClickListener() {

          public void onClick(View v) 
          {
             if (nameEt.getText().length() != 0)
             {
                AsyncTask<Object, Object, Object> saveContactTask = 
                   new AsyncTask<Object, Object, Object>() 
                   {
                      @Override
                      protected Object doInBackground(Object... params) 
                      {
                         saveContact();
                         return null;
                      }

                      @Override
                      protected void onPostExecute(Object result) 
                      {
                         finish();
                      }
                   }; 

                saveContactTask.execute((Object[]) null); 
             }

             else
             {
                AlertDialog.Builder alert = new AlertDialog.Builder(AddEditCountry.this);
                alert.setTitle(R.string.errorTitle); 
                alert.setMessage(R.string.errorMessage);
                alert.setPositiveButton(R.string.errorButton, null); 
                alert.show();
             }
          } 
      });
     }

      private void saveContact() 
      {

         ByteArrayOutputStream stream = new ByteArrayOutputStream();
         yourSelectedImage.compress(Bitmap.CompressFormat.JPEG, 100, stream);
        byte[] imageInByte = stream.toByteArray();

      DatabaseConnector dbConnector = new DatabaseConnector(this);

      if (getIntent().getExtras() == null)
      {
          dbConnector.insertContact(nameEt.getText().toString(),
                  capEt.getText().toString(),
                  codeEt.getText().toString(),
                  Donedate.getText().toString(),
                  Notes.getText().toString(),
                  Person.getText().toString(), 
                  imageInByte.toString()

                  );
      }
      else
      {
         dbConnector.updateContact(rowID,
            nameEt.getText().toString(),
            capEt.getText().toString(), 
            codeEt.getText().toString(), 
            Donedate.getText().toString(),
         Notes.getText().toString(),
          Person.getText().toString(), null

         );
      }
     }

      protected void onActivityResult(int requestCode, int resultCode, Intent  
      imageReturnedIntent) {
       super.onActivityResult(requestCode, resultCode, imageReturnedIntent);

       switch(requestCode) {
       case 0:
           if(resultCode == RESULT_OK){
               Uri selectedImage = imageReturnedIntent.getData();
               String[] filePathColumn = {MediaStore.Images.Media.DATA};

                Cursor cursor = getContentResolver().query(selectedImage, filePathColumn,  
      null, null, null);
               cursor.moveToFirst();

               int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
               String filePath = cursor.getString(columnIndex); // file path of selected  
      image
               cursor.close();
                       //  Convert file path into bitmap image using below line.
               yourSelectedImage = BitmapFactory.decodeFile(filePath);

                       // put  bitmapimage in your imageview
               imageView1.setImageBitmap(yourSelectedImage);
           }
       }
      }

     }

          import android.content.ContentValues;
      import android.content.Context;
       import android.database.Cursor;
      import android.database.SQLException;
     import android.database.sqlite.SQLiteDatabase;

      public class DatabaseConnector {

     private static final String DB_NAME = "WorldCountries";
     private SQLiteDatabase database;
     private DatabaseOpenHelper dbOpenHelper;

     public DatabaseConnector(Context context) {
    dbOpenHelper = new DatabaseOpenHelper(context, DB_NAME, null, 1);
    }

      public void open() throws SQLException 
       {
      //open database in reading/writing mode
      database = dbOpenHelper.getWritableDatabase();
    } 

     public void close() 
     {
      if (database != null)
         database.close();
     }       

      public void insertContact(String name, String cap, String code, String  
       LocationEd, String Notes, String Person,byte[] image) 
           {
              ContentValues newCon = new ContentValues();
              newCon.put("name", name);
              newCon.put("cap", cap);
              newCon.put("code", code);

              newCon.put("Location",LocationEd);
              newCon.put("Notes",Notes);
              newCon.put("Person",Person);
              newCon.put("Image", image);

              open();
              database.insert("country", null, newCon);
              close();
           }

           public void updateContact(long id, String name, String  
        cap,String code,String LocationEd, String Notes, String Person ,byte[] image) 
           {
              ContentValues editCon = new ContentValues();
              editCon.put("name", name);
              editCon.put("cap", cap);
              editCon.put("code", code);
              editCon.put("Location", LocationEd);
              editCon.put("Notes", Notes);
              editCon.put("Person", Person);
              editCon.put("Image", image);

              open();
              database.update("country", editCon, "_id=" + id, null);
              close();
           }

           public Cursor getAllContacts() 
           {
              return database.query("country", new String[] {"_id",  
      "name"}, 
                 null, null, null, null, "name");
           }

           public Cursor getOneContact(long id) 
           {
              return database.query("country", null, "_id=" + id, null,  
     null, null, null);
           }

           public void deleteContact(long id) 
           {
              open(); 
              database.delete("country", "_id=" + id, null);
              close();
           }
      }

               import android.content.Context;
      import android.database.sqlite.SQLiteDatabase;
      import android.database.sqlite.SQLiteDatabase.CursorFactory;
      import android.database.sqlite.SQLiteOpenHelper;

      public class DatabaseOpenHelper extends SQLiteOpenHelper {

    public DatabaseOpenHelper(Context context, String name,
        CursorFactory factory, int version) {
     super(context, name, factory, version);
     }

     @Override
      public void onCreate(SQLiteDatabase db) {
    String createQuery = "CREATE TABLE country (_id integer primary key  
    autoincrement,name text,cap text,code text,Location double,Notes text,Person  
    text,Image Blob);";              
     db.execSQL(createQuery);        
      }

     @Override
      public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

     }

     }

            import android.os.AsyncTask;
      import android.os.Bundle;
     import android.app.ListActivity;
    import android.content.Intent;
     import android.database.Cursor;
    import android.view.Menu;
    import android.view.MenuInflater;
     import android.view.MenuItem;
    import android.view.View;
    import android.widget.AdapterView;
    import android.widget.CursorAdapter;
     import android.widget.ListView;
    import android.widget.SimpleCursorAdapter;
    import android.widget.AdapterView.OnItemClickListener;

    public class CountryList extends ListActivity {

    public static final String ROW_ID = "row_id";
    private ListView conListView;
    private CursorAdapter conAdapter;

     @Override
     p ublic void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     conListView=getListView();
     conListView.setOnItemClickListener(viewConListener);

    // map each name to a TextView
     String[] from = new String[] { "name" };
     int[] to = new int[] { R.id.countryTextView };
     conAdapter = new SimpleCursorAdapter(CountryList.this, R.layout.country_list,  
      null, from, to);
     setListAdapter(conAdapter); // set adapter
     }

     @Override
     protected void onResume() 
      {
     super.onResume();  
     new GetContacts().execute((Object[]) null);
     } 

     @Override
      protected void onStop() 
     {
     Cursor cursor = conAdapter.getCursor();

     if (cursor != null) 
      cursor.deactivate();

     conAdapter.changeCursor(null);
     super.onStop();
     }    

      private class GetContacts extends AsyncTask<Object, Object, Cursor> 
    {
       DatabaseConnector dbConnector = new DatabaseConnector(CountryList.this);

      @Override
      protected Cursor doInBackground(Object... params)
      {
      dbConnector.open();
       return dbConnector.getAllContacts(); 
      } 

      @Override
       protected void onPostExecute(Cursor result)
       {
       conAdapter.changeCursor(result); // set the adapter's Cursor
      dbConnector.close();
      } 
    } 

     @Override
      public boolean onCreateOptionsMenu(Menu menu) 
     {
     super.onCreateOptionsMenu(menu);
      MenuInflater inflater = getMenuInflater();
     inflater.inflate(R.menu.country_menu, menu);
     return true;
     }   

     @Override
     public boolean onOptionsItemSelected(MenuItem item) 
     {
     Intent addContact = new Intent(CountryList.this, AddEditCountry.class);
     startActivity(addContact);
      return super.onOptionsItemSelected(item);
     }

     OnItemClickListener viewConListener = new OnItemClickListener() 
     {
     public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,long arg3) 
     {         
      Intent viewCon = new Intent(CountryList.this, ViewCountry.class);
      viewCon.putExtra(ROW_ID, arg3);
      startActivity(viewCon);
      }
     };    

      }

         import android.app.Activity;
     import android.app.AlertDialog;
      import android.content.DialogInterface;
     import android.content.Intent;
     import android.database.Cursor;
     import android.os.AsyncTask;
     import android.os.Bundle;
    import android.view.Menu;
    import android.view.MenuInflater;
    import android.view.MenuItem;
    import android.view.View;
    import android.widget.Button;
    import android.widget.ImageView;
    import android.widget.TextView;

     public class ViewCountry extends Activity {

     private long rowID;
     private TextView nameTv;
     private TextView capTv;
     private TextView codeTv; 

    private TextView Locationlb; 
    private TextView Noteslb; 
    private TextView Personlb; 

     byte[] byteImage2 = null;

    private  ImageView imageView2;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.view_country);

       setUpViews();
       Bundle extras = getIntent().getExtras();
       rowID = extras.getLong(CountryList.ROW_ID); 
     }

       private void setUpViews() {
       nameTv = (TextView) findViewById(R.id.nameText);
       capTv = (TextView) findViewById(R.id.capText);
       codeTv = (TextView) findViewById(R.id.codeText);

       Locationlb = (TextView) findViewById(R.id.Location_lbl);

       Noteslb = (TextView) findViewById(R.id.Notes_lbl);
       Personlb = (TextView) findViewById(R.id.Person_lbl);

       imageView2= (ImageView) findViewById(R.id.imageView2);
          Button Browse2 = (Button) findViewById(R.id.Browse2);

          Browse2.setOnClickListener(new View.OnClickListener() 
            {
                public void onClick(View v) 
                {               
                    Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
                    intent.setType("image/*");
                    startActivityForResult(intent, 0);
                }
            });        

    }

     @Override
      protected void onResume()
     {
       super.onResume();
       new LoadContacts().execute(rowID);
    } 

     private class LoadContacts extends AsyncTask<Long, Object, Cursor> 
     {
       DatabaseConnector dbConnector = new DatabaseConnector(ViewCountry.this);

      @Override
      protected Cursor doInBackground(Long... params)
      {
         dbConnector.open();
         return dbConnector.getOneContact(params[0]);
      } 

        @Override
        protected void onPostExecute(Cursor result)
        {
         super.onPostExecute(result);

         result.moveToFirst();
         // get the column index for each data item
         int nameIndex = result.getColumnIndex("name");
         int capIndex = result.getColumnIndex("cap");
         int codeIndex = result.getColumnIndex("code");

         int LocationIndex = result.getColumnIndex("Location");
         int NotesIndex = result.getColumnIndex("Notes");
         int PersonIndex = result.getColumnIndex("Person");

         byteImage2=result.getBlob(result.getColumnIndex("Image"));

         nameTv.setText(result.getString(nameIndex));
         capTv.setText(result.getString(capIndex));
         codeTv.setText(result.getString(codeIndex));
         Locationlb.setText(result.getString(LocationIndex));

         Noteslb.setText(result.getString(NotesIndex));
         Personlb.setText(result.getString(PersonIndex));

         imageView2.setImageURI(byteImage2);

         result.close();
         dbConnector.close();
      }
     } 

     @Override
      public boolean onCreateOptionsMenu(Menu menu) 
     {
      super.onCreateOptionsMenu(menu);
      MenuInflater inflater = getMenuInflater();
      inflater.inflate(R.menu.view_country_menu, menu);
      return true;
     }

    @Override
      public boolean onOptionsItemSelected(MenuItem item) 
     {
      switch (item.getItemId())
      {
         case R.id.editItem:
            Intent addEditContact =
               new Intent(this, AddEditCountry.class);

            addEditContact.putExtra(CountryList.ROW_ID, rowID);
            addEditContact.putExtra("name", nameTv.getText());
            addEditContact.putExtra("cap", capTv.getText());
            addEditContact.putExtra("code", codeTv.getText());

            addEditContact.putExtra("Location", Locationlb.getText());

            addEditContact.putExtra("Notes", Noteslb.getText());

            addEditContact.putExtra("Person", Personlb.getText());

            addEditContact.putExtra("Image", (CharSequence)  
            imageView2.getDrawable());

            startActivity(addEditContact); 
            return true;

         case R.id.deleteItem:
            deleteContact();
            return true;

         default:
            return super.onOptionsItemSelected(item);
      } 
       }

     private void deleteContact()
    {

      AlertDialog.Builder alert = new AlertDialog.Builder(ViewCountry.this);

      alert.setTitle(R.string.confirmTitle); 
      alert.setMessage(R.string.confirmMessage); 

      alert.setPositiveButton(R.string.delete_btn,
         new DialogInterface.OnClickListener()
         {
            public void onClick(DialogInterface dialog, int button)
            {
               final DatabaseConnector dbConnector = 
                  new DatabaseConnector(ViewCountry.this);

               AsyncTask<Long, Object, Object> deleteTask =
                  new AsyncTask<Long, Object, Object>()
                  {
                     @Override
                     protected Object doInBackground(Long... params)
                     {
                        dbConnector.deleteContact(params[0]); 
                        return null;
                     } 

                     @Override
                     protected void onPostExecute(Object result)
                     {
                        finish(); 
                     }
                  };

               deleteTask.execute(new Long[] { rowID });               
            }
         }
      );

      alert.setNegativeButton(R.string.cancel_btn, null).show();
       }
           } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:59:47.610

1.Image首先转换为base64，然后将此字符串存储到数据库 [中此链接将为您提供帮助](http://blog.sptechnolab.com/2011/03/09/android/android-upload-image-to-server/)

```
Bitmap bitmapOrg = BitmapFactory.decodeResource(getResources(),
    R.drawable.a1);
    ByteArrayOutputStream bao = new ByteArrayOutputStream();
    bitmapOrg.compress(Bitmap.CompressFormat.JPEG, 90, bao);
    byte [] ba = bao.toByteArray();
    String ba1=Base64.encodeBytes(ba); 
```

以及当您想要获取图像和背景图像时使用

```
 Bitmap bitmap = BitmapFactory.decodeByteArray(image, 0,image.length);
 imag_view.setImageBitmap(bitmap); 
```

# c++ - C++链表数据Struc中的删除挂起

> ID：13879012
> 
> 赞同：1
> 
> 时间：2012-12-14T12:47:49.120
> 
> 标签：c++, singly-linked-list

我对以下代码有问题。我需要先搜索记录然后删除它：

它总是删除最后一条记录。即使我想删除中间的第一个任何 rcord

```
string NameForSearch1;

                     cout<<"Enter Your Friend's Name:      "<<endl;
                     cin>>NameForSearch1;

                     tempRec->namePerson=NameForSearch1;

                     if (tempRec==firstRec){//delete the head

                                      tempRec->next=firstRec;
                                      firstRec=tempRec->next;
                                      delete tempRec;
                                      DisplayRec();
                                      }

                     else if (tempRec->next==NULL ){//delete the last record

                                      tempRec2=firstRec->next;
                                      while(tempRec2->next!=tempRec){
                                            tempRec2 = tempRec2->next;
                                      }
                                      tempRec2->next=NULL;                                         
                                      delete tempRec;

                                      }
                     else {
                          //delete anyrecord
                                          tempRec2=firstRec->next;
                                          while(tempRec2->next!=tempRec){
                                                                         tempRec2 = tempRec2->next;
                                                                         }             
                                          tempRec2->next=tempRec->next;
                                          delete tempRec;

                                          } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T12:53:20.277

问题在这里：

```
tempRec2=firstRec->next;
while(tempRec2->next!=tempRec){
  tempRec2 = tempRec2->next;
} 
```

要查找要删除的节点，您正在比较节点的地址。因为`tempRec`是一个不同的对象，你永远不会在链表中找到它。

相反，您应该将`NameForSearch1`与每个节点中的数据进行比较。

此外，您的 while 循环条件构造不佳，因为它允许您超出列表的末尾。您需要确保您没有到达列表的末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T00:54:06.507

经过数小时的调试，我终于能够得到正确的代码：

```
string NameForSearch1;

                     cout<<"Enter Your Friend's Name:      "<<endl;
                     cin>>NameForSearch1;

                     tempRec=firstRec;

                     if (tempRec->namePerson==NameForSearch1){//delete the head

                                      firstRec=tempRec->next;
                                      delete tempRec;
                                      DisplayRec();
                                      }

                     else 
                     {
                          while (tempRec!=NULL && tempRec->namePerson!=NameForSearch1){
                                               tempRec2=tempRec;
                                               tempRec=tempRec->next;
                                       }

                                       if (tempRec==NULL)
                                       {
                                                         cout<<"NO RECORD FOUND";
                                       }
                                       else if (tempRec->namePerson==NameForSearch1)
                                       {
                                            tempRec2->next=tempRec->next;
                                            delete tempRec;     
                                        }
                       } 
```

# ruby-on-rails - nil:NilClass 的未定义方法“链接”

> ID：13879016
> 
> 赞同：1
> 
> 时间：2012-12-14T12:48:06.673
> 
> 标签：ruby-on-rails

我已将我的项目上传到 heroku，但出现此错误：`NoMethodError in Items#hype_item`并且`undefined method "link" for nil:NilClass`. 当我使用 localhost 时，它可以在我的计算机上运行。

我已经这样做了：

1.  heroku 运行 rake db:create
2.  herouk 运行 rake db:migrate
3.  heroku 重启

...并阅读了很多关于这个问题的帖子，但它并没有解决它。

有什么建议么？

这是日志

```
2012-12-14T11:54:02+00:00 app[web.1]: Processing by ItemsController#hype_item as HTML
2012-12-14T11:54:03+00:00 app[web.1]:   Rendered items/hype_item.html.erb within layouts/application (75.2ms)
2012-12-14T11:54:03+00:00 app[web.1]: Completed 500 Internal Server Error in 405ms
2012-12-14T11:54:03+00:00 app[web.1]: 
2012-12-14T11:54:03+00:00 app[web.1]: ActionView::Template::Error (undefined method `link' for nil:NilClass):
2012-12-14T11:54:03+00:00 app[web.1]:     6:        <p><div id="abc"><%= raw @item.link %></div></p>
2012-12-14T11:54:03+00:00 app[web.1]:     8: </div>
2012-12-14T11:54:03+00:00 app[web.1]:     3: 
2012-12-14T11:54:03+00:00 app[web.1]:   app/views/items/hype_item.html.erb:6:in `_app_views_items_hype_item_html_erb___686068816707788662_29579640'
2012-12-14T11:54:03+00:00 app[web.1]: 
2012-12-14T11:54:03+00:00 app[web.1]:     4: <div class="modal hide" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="tr">
2012-12-14T11:54:03+00:00 app[web.1]:     5:    <div class="modal-body">
2012-12-14T11:54:03+00:00 app[web.1]:     7:    </div>
2012-12-14T11:54:03+00:00 app[web.1]: 
2012-12-14T11:54:03+00:00 app[web.1]:   Rendered vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.erb (18.7ms)
2012-12-14T11:54:03+00:00 heroku[router]: at=info method=GET path=/ host=enigmatic-tor-2280.herokuapp.com fwd=84.48.62.139 dyno=web.1 queue=0 wait=0ms connect=16ms service=773ms status=500 bytes=26039
2012-12-14T11:54:03+00:00 app[web.1]:   Rendered vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (29.9ms)
2012-12-14T11:54:03+00:00 app[web.1]:   Rendered vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms) 
```

...和gemfile

```
source 'https://rubygems.org'

gem 'rails', '3.2.6'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'
gem "less-rails", "~> 2.2.6"
gem 'therubyracer'
gem 'bcrypt-ruby', :require => 'bcrypt'

group :assets do
  gem 'sass-rails',   '~> 3.2.3' #mulig denne må flyttes ut av asset group for å virke
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
  gem 'twitter-bootstrap-rails'
end

group :production do
  gem 'pg'
end
group :development, :test do
  gem 'sqlite3'
end

gem 'thin'
gem 'jquery-rails' 
```

hype_item.html.erb

```
<div id="counter"></div>
<div id="play_button"> <a id="play" role="button"><%= image_tag("Play.png")%></a></div>

<div class="modal hide" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="tr">
    <div class="modal-body">
        <p><div id="abc"><%= raw @item.link %></div></p>
    </div>
</div> 
```

如果您需要查看更多文件，请告诉我，我不确定什么是相关的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:31:47.793

As Baldrick pointed out the problem was that @item was nil.

So I changed from (in this in hype_item.html.erb):

```
<p><div id="abc"><%= raw @item.link %></div></p> 
```

to:

```
<p><div id="abc"><% if @item %> <%= raw @item.link %> <% end %></div></p> 
```

This might not be the best solution, but it worked.

Feel free to give a better solution, maybe this could be done in the controller.

Thanks for all the feedback!

# javascript - 使用不同类型的 angularjs 范围绑定有什么优势？

> ID：13879017
> 
> 赞同：0
> 
> 时间：2012-12-14T12:48:12.893
> 
> 标签：javascript, angularjs

在声明指令的范围时，我遇到了符号“@”、“=”。

我很好奇什么时候会出现'='绑定优于'@'的情况，反之亦然。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T13:28:46.280

# jquery - 如何在 jQuery Mobile 中使用 `paginit` 加载外部 Javascript 文件？

> ID：13879021
> 
> 赞同：1
> 
> 时间：2012-12-14T12:48:36.807
> 
> 标签：jquery, jquery-mobile

除非我点击刷新，否则滚动条不会加载。我认为这可以使用 jQuery Mobile 的`pageinit`. 这是我尝试过的：

```
$('#summaryPage').live('pageinit', function(){
$.getScript('cubiq-iscroll-bad88fb/src/iscroll.js');
}); 
```

没有骰子。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:16:37.143

```
var jsonp = document.createElement("script");
            jsonp.type = "text/javascript";
            jsonp.src = "cubiq-iscroll-bad88fb/src/iscroll.js";
            document.getElementsByTagName("body")[0].appendChild(jsonp); 
```

这应该可以正常工作。如果 .js 工作没有错误。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:17:15.067

因为 .live 将被弃用，你也可以

```
$(document).on('pageinit', '#summaryPage', function(){
    //append head element and custom script 
}); 
```

也可能是你加载脚本太晚了，如果我是你，我会在文档和/或设备准备好后立即执行，然后在页面初始化时检查元素是否存在，如果不存在，触发创建。您还可以在 jquery 移动 API 中收听一些事件，例如 pagebeforecreate

或者更好的是仍然将代码放在没有名称的全局函数中：

```
function(){
//append your script here  
} 
```

您可以在 API 中阅读 jquery.com 上的文档

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T12:59:53.493

你可以试试：

```
<script>
$('#summaryPage').live('pageinit', function(){
   var oHead = document.getElementsByTagName('HEAD').item(0);
   var oScript= document.createElement("script");
   oScript.type = "text/javascript";
   oScript.src="other.js";
   oHead.appendChild( oScript);
});
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-23T04:08:35.343

Try to run it before page shows:

```
$('div:jqmData(role="page")').live('pagebeforeshow',function(){
    $.getScript('cubiq-iscroll-bad88fb/src/iscroll.js');
}); 
```

[jQuery mobile $(document).ready equivalent](https://stackoverflow.com/questions/5622581/jquery-mobile-document-ready-equivalent)

# javascript - ajax调用后再次运行jquery函数

> ID：13879024
> 
> 赞同：4
> 
> 时间：2012-12-14T12:48:50.107
> 
> 标签：javascript, jquery, ajax, run-script

有没有办法在ajax调用后再次运行脚本？

我有一个 photoswipe (lightbox) jquery 插件，我这样调用：

```
jQuery(document).ready(function($){

    if( $('.img-frame a').length > 0 ){

        var myPhotoSwipe = $(".img-frame a").photoSwipe();

     }
}); 
```

我还有一个 ajax '加载更多帖子' 功能，显然 photoswipe 不针对在第一页加载后加载的图像。

我没有太多的ajax知识，对此有什么帮助吗？谢谢

更新：这是“加载更多”脚本：

```
jQuery(document).ready(function($) {

    // The number of the next page to load (/page/x/).
    var pageNum = parseInt(djwd_load_posts.startPage) + 1;

    // The maximum number of pages the current query can return.
    var max = parseInt(djwd_load_posts.maxPages);

    // The link of the next page of posts.
    var nextLink = djwd_load_posts.nextLink;

    /**
     * Replace the traditional navigation with our own,
     * but only if there is at least one page of new posts to load.
     */
    if(pageNum <= max) {
        // Insert the "More Posts" link.
        $('#content')
            .append('<div class="lp-placeholder-'+ pageNum +'"></div>')
            .append('<p id="lp-load-posts" class="long-button"><a href="#">Load More Posts<i class="icon-chevron-down icon-large"></i></a></p>');

        // Remove the traditional navigation.
        $('#nav-below').remove();
    }

    /**
     * Load new posts when the link is clicked.
     */
    $('#lp-load-posts a').click(function() {

        // Are there more posts to load?
        if(pageNum <= max) {

            // Show that we're working.
            $(this).text('Loading posts...');

            $('.lp-placeholder-'+ pageNum).load(nextLink + ' .post',
                function() {

                    $( this ).hide().fadeIn(700);

                    // Update page number and nextLink.
                    pageNum++;
                    nextLink = nextLink.replace(/\/page\/[0-9]?/, '/page/'+ pageNum);

                    // Add a new placeholder, for when user clicks again.
                    $('#lp-load-posts')
                        .before('<div class="lp-placeholder-'+ pageNum +'"></div>')

                    // Update the button message.
                    if(pageNum <= max) {
                        $('#lp-load-posts a').text('Load More Posts');
                    } else {
                        $('#lp-load-posts a').text('No more posts to load.');
                    }
                }
            );
        } else {
            $('#lp-load-posts a').append('.');
        }   

        return false;
    });
}); 
```

我在 Wordpress functions.php 中这样称呼它：

```
 function djwd_ajax_load_init() {
    global $wp_query;

    if( !is_singular() ) {
        wp_enqueue_script('ajax-load-posts', get_template_directory_uri() . '/js/ajax-load-posts.js', array('jquery'), true );

        $max = $wp_query->max_num_pages;
        $paged = ( get_query_var('paged') > 1 ) ? get_query_var('paged') : 1;

        wp_localize_script(
            'ajax-load-posts',
            'djwd_load_posts',
            array(
                'startPage' => $paged,
                'maxPages' => $max,
                'nextLink' => next_posts($max, false)
            )
        );
    }
 }
 add_action('template_redirect', 'djwd_ajax_load_init'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T13:00:15.893

插件没有委托，由作者的插件来合并它。为什么不作弊：（抱歉，无法测试代码并且不确定它是否与 photoSwipe 插件相关）

```
jQuery(document).ready(function($){

    $(this).on('mousedown','.img-frame a',function(){ //document or better parent container// mousedown or any relevent event use by photoSwipe
          if(!$(this).data('swiped')) {
              $(this).data('swiped',true).photoSwipe();
          }
    });

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T12:54:28.293

把它放在一个函数中，在页面加载和你的ajax调用中调用。

```
function setMyPhotoSwipe() {
    var $targets = $('.img-frame a').not('.photo-swipe');

    if($targets.length > 0 ){
        $targets.addClass('photo-swipe').photoSwipe();
    };
};

jQuery(document).ready(function($){
    setMyPhotoSwipe();
}); 
```

顺便说一句，如果不需要变量 myPhotoSwipe，那么您不必设置它。你也使用`$('.img-frame a')`了两次，所以缓存结果。

你的负载调用：

```
$('.lp-placeholder-'+ pageNum).load(nextLink + ' .post',
            function() {

                $( this ).hide().fadeIn(700);

                // Update page number and nextLink.
                pageNum++;
                nextLink = nextLink.replace(/\/page\/[0-9]?/, '/page/'+ pageNum);

                // Add a new placeholder, for when user clicks again.
                $('#lp-load-posts')
                    .before('<div class="lp-placeholder-'+ pageNum +'"></div>')

                // Update the button message.
                if(pageNum <= max) {
                    $('#lp-load-posts a').text('Load More Posts');
                } else {
                    $('#lp-load-posts a').text('No more posts to load.');
                }

                // New content has been loaded and insertet, so set up photo swipe
                setMyPhotoSwipe();
            }
        ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T12:56:52.543

```
$.ajax({
    url: 'url/test.php',
    success: function(data) { // also gets response from php and can be manipulated if required!
        setMyPhotoSwipe();
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-03T07:49:30.710

对不起，我是 jquery 的新手......如何使用 ajaxComplete()

[http://api.jquery.com/ajaxcomplete/](http://api.jquery.com/ajaxcomplete/)

一旦我不得不在 ajax 调用之后执行一个函数......并且 ajaxComplete() 成功了......

```
$(document).ready(function(){

  function some_function()
  {
  //---- this function to be called after ajax request...
  }

  $( document ).ajaxComplete(function() {

    some_function();

  });
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T12:55:09.103

我建议以下

```
 jQuery(document).ready(InitializeSettings); 
```

在ajax调用中也调用相同的

```
 ajax_success_function(){ // depends on your ajax call
   InitializeSettings();
  }

  function InitializeSettings(){

    if( $('.img-frame a').length > 0 ){
       var myPhotoSwipe = $(".img-frame a").photoSwipe();
     }
  } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-14T12:55:14.890

正如墨菲斯所说。

创建一个单独的函数，将您的代码放入其中。

您可以在您的内部调用该函数`$(document).ready()`

然后在您的 ajax 成功路径中使用相同的函数（查看文档：[http](http://api.jquery.com/jQuery.ajax/) ://api.jquery.com/jQuery.ajax/ ）。

或者你可以使用这个：[http ://api.jquery.com/ajaxStop/](http://api.jquery.com/ajaxStop/)

当您的每个 Ajax 调用停止时，它将方便您使用相同的功能。

# objective-c - 使用另一个表达式作为 sum 的参数从 NSManagedObject 获取聚合数据：表达式

> ID：13879025
> 
> 赞同：3
> 
> 时间：2012-12-14T12:48:52.483
> 
> 标签：objective-c, ios, core-data, nsexpression

是否可以使用表达式作为表达式的参数`sum:`？

我有具有属性的实体（`NSManagedObject`类）和.`Drink``costPerDrink``numberOfDrinks``drinkingDate`

我想在一段时间内获得总成本的总和（`numberOfDrinks`乘以）。`costPerDrink`虽然我在单个属性上获得总和（例如，`numberOfDrinks`时间段内的总和）没有问题，但当我尝试在另一个（乘法）表达式上使用 sum 表达式时出现错误：

```
NSInvalidArgumentException, reason: Unsupported argument to sum : 
(
    "costPerDrink * numberOfDrinks" 
) 
```

见代码：

```
// Init fech
NSFetchRequest *request = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Drink" inManagedObjectContext:[Service appContext]];
[request setEntity:entity];

// Return dictionary
[request setResultType:NSDictionaryResultType];

// Set conditions
[request setPredicate:[NSPredicate predicateWithFormat:@"(drinkingDate>=%@) AND (drinkingDate<=%@)", self.startDate, self.endDate]];

// Set 1st column to be returned - count of drinks
NSExpression *drinksExpression = [NSExpression expressionForKeyPath:@"numberOfDrinks"];
NSExpression *sumDrinksExpression = [NSExpression expressionForFunction:@"sum:" arguments:[NSArray arrayWithObject:drinksExpression]];
NSExpressionDescription *sumDrinksResultDescription = [[NSExpressionDescription alloc] init];
[sumDrinksResultDescription setName:@"sumDrinks"];
[sumDrinksResultDescription setExpression:sumDrinksExpression];
[sumDrinksResultDescription setExpressionResultType:NSInteger32AttributeType];

// Set 2nd column to be returned - total cost
NSExpression *costExpression = [NSExpression expressionForKeyPath:@"costPerDrink"];
NSExpression *totalExpression = [NSExpression expressionForFunction:@"multiply:by:"
                                                            arguments:[NSArray arrayWithObjects:costExpression,
                                                                                          drinksExpression, nil]];
NSExpression *sumCostExpression = [NSExpression expressionForFunction:@"sum:" arguments:[NSArray arrayWithObject:totalExpression]];
NSExpressionDescription *sumCostResultDescription = [[NSExpressionDescription alloc] init];
[sumCostResultDescription setName:@"sumCost"];
[sumCostResultDescription setExpression:sumCostExpression];
[sumCostResultDescription setExpressionResultType:NSDecimalAttributeType];

// Add expressions to fetch
[request setPropertiesToFetch:[NSArray arrayWithObjects: sumDrinksResultDescription, sumCostResultDescription, nil]];

// Execute fech
NSError *error;
NSArray *result = [[Service appContext] executeFetchRequest:request error:&error]; 
```

我完全理解可以通过`totalCost`向实体添加自动计算的属性`Drink`然后`sum:`在没有表达式的情况下使用 in fetch来解决特定问题，`multiply:by:`但问题仍然存在 - 是否可以使用表达式作为表达式的参数`sum:`？

# c# - 尝试从 COM 组件传递 BSTR* 时 C# 中的 MarshlDirectiveException

> ID：13879038
> 
> 赞同：2
> 
> 时间：2012-12-14T12:49:29.810
> 
> 标签：c#, c++, com, bstr

如果我用这样的东西调用我的 COM 方法

```
d.someMethod(string, doule, ref string); 
```

我收到上面提到的错误。被调用的方法是这样的

```
STDMETHODIMP SomeClass::someMethod(BSTR, DOUBLE, BSTR*) 
```

只要我不为 BSTR* 分配一些值，它就可以正常工作。

编辑：IDL 描述

```
interface IDistanceClass : IDispatch{
    [id(1), helpstring("some helpstring")] HRESULT someMethod([in] BSTR firstarg, [in] DOUBLE secondarg, [in,out] BSTR* returnme);
}; 
```

EDIT2：只要我只传递 1 个像 *returnme = "T" 这样的字符，它就可以正常工作。但是当它需要是一个它抛出的字符串时，即使我将一个指针分配给一个字符串，我也会得到一个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:43:56.863

在你们帮助我之后，解决方案非常简单:-)事实证明我需要做这样的事情：

```
string someString = "TestME";
_bstr_t s(someString.c_str());
*returnme = SysAllocString((BSTR)s); 
```

对我来说效果很好。

我自己回答这个问题，这样可能有这个问题的其他人就不需要再搜索了。希望这对其他人也有帮助。

# if-statement - Sass 中的 @if 语句中的 @import

> ID：13879042
> 
> 赞同：37
> 
> 时间：2012-12-14T12:49:37.147
> 
> 标签：if-statement, import, sass, dependencies, mixins

我只想加载登录页面所需的 css 以提高性能。在我的其他页面上，我想要一个分组的 css 文件，该文件将缓存在包含我所有 css 的每个页面上。

我有以下文件：

```
minifiedcssforloginpage.scss
grouped-pages.scss 
```

在 minifiedcssforloginpage.scss 我声明 $load-complete-css:false。之后我导入 myproject.scss ，其中包含我的模块、布局、核心的所有导入......在 myproject.scss 我想做类似的事情

```
@if $load-complete-css {
     @import module1;
     @import module2;
     @import module3;
} 
```

因此，minifiedcssforloginpage.scss 将生成 minifiedcssforloginpage.css，其 css 少于 grouped-pages.css（将 var $load-complete-css 设置为 true）。

但我得到一个错误，这是不可能的“导入指令可能不能在控制指令或混合中使用”。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-14T13:11:09.357

这是不允许的事情之一。您唯一能做的就是将这些导入转换为混合（将文件导入外部`@if`并在适当的情况下调用混合）。

澄清：

_partial.scss

```
@mixin partial {
    .test { color: red }
    // other styles here
} 
```

样式.scss

```
@import "partial";
@if $someval == true {
    @include partial;
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-03-30T12:28:39.053

核心开发团队不愿意实现这个特性，尽管他们正在考虑实现一个全新的依赖系统。

* * *

### 请参阅以下 Github 问题：

*   [在 @if 中允许 @import (#451)](https://github.com/nex3/sass/issues/451)
*   [在控制指令或 mixins 中使用 @import 语句 (#779)](https://github.com/sass/sass/issues/1194)
*   [允许可选的 @imports (#779)](https://github.com/sass/sass/issues/779)
*   [动态依赖 (#739)](https://github.com/sass/sass/issues/739)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-01-15T21:41:54.943

以对您有意义的方式将您的样式放入各种[部分文件中。](http://sass-lang.com/guide#4)然后，您可以为您的登录页面创建一个单独的 SASS 文件，该文件仅导入具有相关样式的文件。

引用[我](https://stackoverflow.com/a/21148587/445295)对另一个问题的回答：

> 目前无法使用 SASS 动态包含文件。 `@import`不能在控制指令（例如`@if`）或混合中使用，在导入指令中使用变量是错误的语法，并且没有用于提前结束文件执行的指令（这 [实际上](https://github.com/nex3/sass/issues/1013#issuecomment-28405022)将允许条件导入）。但是，您可以通过更改样式规则的结构来解决您的问题。
> 
> ...如果您有 [应该] 有条件地包含的样式 [它们] 应该封装在 mixins、“模块”或“库”文件中。...主要思想是*导入一个这样的文件不会输出任何 css*。这样，您可以冗余地导入这些文件，以便您可以在任何需要的地方使用 mixin。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-08-19T16:58:46.110

不幸的是，目前没有办法在 if 块中放置 import 语句。

我知道的最接近的替代方法是使用该`additionalData`字段将预处理器功能添加到您的 webpack`sass-loader`配置中：

```
{
    loader: "sass-loader",
    options: {
        sassOptions: {
            includePaths: [...],
        },
        additionalData: (content: string, loaderContext)=>{
            // More info on available properties: https://webpack.js.org/api/loaders
            const {resourcePath, rootContext} = loaderContext;

            const finalPath = someCondition ? path1 : path2;
            return content.replace(/SomeDynamicPathPlaceholder/g, finalPath);
        },
    },
}, 
```

`additionalData`有关该字段的更多信息： [https ://webpack.js.org/loaders/sass-loader/#additionaldata](https://webpack.js.org/loaders/sass-loader/#additionaldata)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-09-14T21:02:46.870

我知道这是一个非常古老的问题，但我们最近在我们自己的微型 UI 框架中实现了这个，如下所示：

*ui-framework/config.scss*

```
$components: (
    "component-a": true,
    "component-b": false
) !default;

// A bunch of other default config 
```

*ui-framework/main.scss*

```
@import "component-a";
@import "component-b"; 
```

*ui-framework/component-a.scss*

```
@if (map-get($components, "component-a") {
    .component-a {
        // Bunch of code here
    }
} 
```

*ui-framework/component-b.scss*

```
@if (map-get($components, "component-b") {
    .component-b {
        // Bunch of code here
    }
} 
```

然后在每个项目中：

*一个项目/main.scss*

```
// NOTE: We only want component b in this project
$components: (
    "component-a": false,
    "component-b": true
);

@import "ui-framework/config.scss";
@import "ui-frameowrk/main.scss"; 
```

我们不会对每个单独的组件都这样做，而是对那些并不总是在使用的巨大组件（如幻灯片、对话框、表单相关代码等）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-02T11:56:24.947

老问题，我知道；只是觉得我会根据我正在做的事情提供一个替代方案和扩展示例。

我遇到了这个问题，因为我希望将一个 SCSS 文件用于较小的屏幕，而将一个 SCSS 文件用于较大的屏幕（桌面上的顶部菜单导航和手机的汉堡菜单）。

在没有 Bootstrap 的情况下使用 Blazor，我想根据实际的 html 使用一个菜单结构，然后使用 SCSS 在相关大小的两者之间切换。我为导航的桌面版本创建了一个 SCSS 文件，并开始为移动版本创建一个。在我意识到这个绊脚石之前，我的计划是根据 mixin（恰当地命名为`mobileOrDesktop`）中的媒体查询选择性地导入 SCSS。

我的想法是使用这个 mixin 来对媒体大小进行所有基本结构操作。像这样的东西：

```
@mixin mobileOrDesktop {
    @media (min-width: 961px) {
        @import 'desktopNavbar.scss';

        .container-fluid {
            margin-top: 70px;
            height: calc(100% - calc(60px + 70px));
        }

        //show the footer, maybe tweak the font size, etc
    }

    @media (max-width:960px) {
        @import 'moblieNavbar.scss';

        .container-fluid {
            height: 100%;
        }
        //hide the footer, maybe tweak font sizes, etc
    }
} 
```

不幸的是，由于 SCSS 的工作方式，我们无法做到这一点。因此，我不只是在媒体查询中转储所有 CSS（我想让它相对分开，以便调试/更改更易于管理），而是寻找替代方案。

与 Cinnamon 类似，我发现最可行的解决方案是将 SCSS 导入到 mixin 之外，然后简单地将其包含在 mixin 中：

```
@import 'desktopNavbar.scss';
@import 'mobileNavbar.scss';

@mixin mobileOrDesktop {
    @media (min-width: 961px) {
        @include desktopNavbar;

        .container-fluid {
            margin-top: 70px;
            height: calc(100% - calc(60px + 70px));
        }
    }

    @media (max-width:960px) {
        @include moblieNavbar;

        .container-fluid {
            height: 100%;
        }
    }
} 
```

导入的 SCSS 文件本身就是一个 mixin，即`desktopNavbar.scss`变为：

```
@import 'siteVariables.scss';

@mixin desktopNavbar {
    #navbar {
        .burgerIcon {
            display: none;
        }

        .nav {
            overflow: hidden;
            background-color: $navy;
            vertical-align: middle;
            height: 70px;
            line-height: 70px;
            color: $blizzard;
            position: fixed;
            top: 0;
            width: 100%;
            display: block;
            z-index: 99999999;

            .leftBlock, .midBlock, .rightBlock {
                display: inline-block;
                vertical-align: middle;
                height: 70px;
                padding: 0px;
                margin: 0px;
                line-height: 70px;
            }

            .leftBlock {
                width: 20%;

                .imgLogo {
                    margin-left: 10px;
                    margin-top: 5px;
                    max-width: 120px;
                }
            }

            .midBlock {
                width: 60%;
                text-align: center;

                .navbar-nav {
                    display: inline-flex;
                    flex-wrap: nowrap;
                    flex-grow: 2;
                    flex-shrink: 2;
                    list-style: none;
                    vertical-align: middle;
                    margin: 0px;
                    padding: 0px;

                    .nav-item {
                        max-width: 175px;
                        color: $white;
                        display: inline-block;
                        vertical-align: middle;
                        height: 70px;

                        .btn-link {
                            font-size: 16px;
                            text-align: right;
                            color: $white;
                            padding: 14px;
                            line-height: 20px;
                            text-decoration: none;
                            vertical-align: middle;

                            span {
                                font-family: 'Font Awesome Solid';
                                line-height: 60px;
                                height: 60px;
                                vertical-align: middle;
                                padding: 5px;
                            }
                        }

                        &.dropdown {
                            font-size: 16px;
                            text-align: right;
                            line-height: 20px;
                            text-decoration: none;
                            vertical-align: middle;

                            .dropbtn {
                                font-size: 16px;
                                text-align: right;
                                line-height: 20px;
                                text-decoration: none;
                                vertical-align: middle;

                                span {
                                    font-family: 'Font Awesome Solid';
                                    line-height: 60px;
                                    height: 60px;
                                    vertical-align: middle;
                                    padding: 5px;
                                }
                            }

                            .dropdown-content {
                                display: none;
                                position: fixed;
                                top: 68px;
                                text-align: center;
                                background-color: $star-command;
                                min-width: 160px;
                                box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
                                z-index: 99999999999;

                                .dropdown-header {
                                    color: $blizzard;
                                }

                                .dropdown-item {
                                    color: $powder;
                                    padding: 12px 16px;
                                    text-decoration: none;
                                    display: block;

                                    &:hover {
                                        background-color: $blizzard;
                                        color: $navy;
                                    }
                                }
                            }

                            &:hover {
                                background-color: $star-command;

                                .dropdown-content {
                                    display: block;
                                }
                            }
                        }
                    }
                }
            }

            .rightBlock {
                width: 20%;
            }
        }
    }
} 
```

站点 SCSS 可以简单地是：

```
@import '../../FontAwesome/scss/fontawesome.scss';
@import '../../FontAwesome/scss/regular.scss';
@import '../../FontAwesome/scss/solid.scss';

@import 'siteVariables.scss';
@import 'mixins.scss';

//import other stuff here

html, body {
    height: 100%;
    overflow: hidden;
    width: 100%;
    font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif !important;
    margin: 0px;
    @include mobileOrDesktop;

    .container-fluid {
        overflow: auto;

        main {
            padding: 15px;
        }
    }

    #blazor-error-ui {
        background: lightyellow;
        bottom: 0;
        box-shadow: 0 -1px 2px rgba(0, 0, 0, 0.2);
        display: none;
        left: 0;
        padding: 0.6rem 1.25rem 0.7rem 1.25rem;
        position: fixed;
        width: 100%;
        z-index: 1000;

        .dismiss {
            cursor: pointer;
            position: absolute;
            right: 0.75rem;
            top: 0.5rem;
        }
    }
} 
```

# vb.net - 部署后 MVC3 将无法工作

> ID：13879049
> 
> 赞同：1
> 
> 时间：2012-12-14T12:50:16.287
> 
> 标签：vb.net, asp.net-mvc-3, iis, deployment

我目前正在开发一个 MVC3 应用程序（Win XP IIS 5.4），它可以在我的本地主机上使用 IIS 正常工作。

现在，我在 IIS 5.4 上的 Win XP 嵌入式 PC 上发布并部署了该应用程序，但出现此错误：

```
 Error executing child request for handler   'System.Web.Mvc.HttpHandlerUtil+ServerExecuteHttpHandlerAsyncWrapper'. 
```

完整的跟踪：

```
at System.Web.HttpServerUtility.ExecuteInternal(IHttpHandler handler, TextWriter writer, Boolean preserveForm, Boolean setPreviousPage, VirtualPath path, VirtualPath filePath, String physPath, Exception error, String queryStringOverride)    
at System.Web.HttpServerUtility.Execute(IHttpHandler handler, TextWriter writer, Boolean preserveForm, Boolean setPreviousPage)     
at System.Web.HttpServerUtility.Execute(IHttpHandler handler, TextWriter writer, Boolean preserveForm) at System.Web.HttpServerUtilityWrapper.Execute(IHttpHandler handler, TextWriter writer, Boolean preserveForm)     
at System.Web.Mvc.Html.ChildActionExtensions.ActionHelper(HtmlHelper htmlHelper, String actionName, String controllerName, RouteValueDictionary routeValues, TextWriter textWriter)     
at System.Web.Mvc.Html.ChildActionExtensions.RenderAction(HtmlHelper htmlHelper, String actionName, String controllerName)    
at ASP._Page_Views_Home_Index_vbhtml.Execute() in C:\Documents and Settings\Administrator\Desktop\publish\Views\Home\Index.vbhtml:line 45    
at System.Web.WebPages.WebPageBase.ExecutePageHierarchy()     
at System.Web.Mvc.WebViewPage.ExecutePageHierarchy()     
at System.Web.WebPages.StartPage.RunPage()     
at System.Web.WebPages.StartPage.ExecutePageHierarchy()    
at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)     
at System.Web.Mvc.RazorView.RenderView(ViewContext viewContext, TextWriter writer, Object instance)     
at System.Web.Mvc.BuildManagerCompiledView.Render(ViewContext viewContext, TextWriter writer)     
at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)     
at System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)    
at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()     
at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)    
at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1c.<>c__DisplayClass1e.<InvokeActionResultWithFilters>b__1b()     
at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)     
at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) 
```

在我的 Home/index.vbhtml 的第 45 行，我呈现了其他类似这样的操作：

```
@Code
   Html.RenderAction("MobileCollection", "Setting")
   Html.RenderAction("MobileCollection", "Teaching")
   'Html.RenderAction("MobileCollection", "IO")
   Html.RenderAction("MobileCollection", "Home")
End Code 
```

我不知道为什么这在其他系统上不起作用...

# java - 如何从 quickfixj FIX.4.2 执行报告中检索标签值

> ID：13879051
> 
> 赞同：0
> 
> 时间：2012-12-14T12:50:19.623
> 
> 标签：java, quickfix, fix-protocol

我想通过检索每个标签的值将**fix4.2消息持久化到数据库。**我有修复消息的**ExecutionReport**对象。我正在使用*exec.getString(1)*检索帐户的标记值，并且该标记值不存在于消息中，因此它会引发 FieldNotFound 异常。在 Fiximate 中，我发现 account 不是必填字段。

我也尝试过*exec.getAccount().getValue()*但遇到了同样的异常。我发现所有这些方法都会引发 FieldNotFound 异常。

如果修复消息中不存在该非强制性字段，是否有任何方法可以将标记值检索为**null 。**

任何帮助将不胜感激。

提前致谢。

问候，沙达布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:09:54.110

您没有说您使用的是哪个 QuickFIX 端口（例如 C++ 的原始 QF、Java 的 QF/J、C# 的 QF/n）。

如果某个字段不是必需的，您只需先测试其是否存在。

**C++：** `exec.isSetField(1)`或`exec.isSetField(field)`
（可能还有一个`exec.isSetAccount()`，不确定）

**爪哇：** `exec.isSetField(1)`或`exec.isSetAccount()`或`exec.isSetField(field)`

**C#：** `exec.IsSet(1)`或`exec.IsSetAccount()`或`exec.IsSetField(field)`

# android - 片段和活动之间的通信

> ID：13879052
> 
> 赞同：1
> 
> 时间：2012-12-14T12:50:27.783
> 
> 标签：android, android-fragments, android-activity

我正在我的应用程序中实现片段。参考这个[文档](http://developer.android.com/guide/components/fragments.html#CommunicatingWithActivity)，我应该使用它`getActivity()`来访问活动方法，而且（在下一段中）我应该在片段中声明一个接口并让活动实现它。现在，第二种方式用于事件之类的回调方法，但我也可以使用`getActivity().onSomeEventHappened()`，不是吗？

有人可以解释我的区别吗？因为我看不出它们之间的差异。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T03:38:47.000

如果您知道 getActivity() 将始终返回您期望的 Activity 类型，则最终结果没有区别。

但是，使用接口是一种很好的做法，因为它将您的 Fragment 与 Activity 的特定实现分离。因此，以后如果您决定将片段与不同的活动一起使用，您所要做的就是让该活动实现您的片段接口以提醒任何片段事件。

如果您想要一个易于扩展而没有副作用的应用程序，您应该始终努力使组件解耦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T12:56:50.407

你不能总是简单地调用`getActivity().onSomeEventHappened()`。想象一下这种情况：您有两个片段，一个带有 ListView，另一个显示基于所选 listItem 的图像。在第二个片段中，您不能只调用`getActivity().onListItemClicked()`，因为您的活动没有这样的方法，但如果活动实现接口并从第一个片段中捕获这些事件，那么您可以将有关事件的信息传递给第二个片段以及正确的图像。

# wpf - WPF 打印 UIElement / Scroller 多页总是打印相同的页面

> ID：13879067
> 
> 赞同：1
> 
> 时间：2012-12-14T12:51:25.830
> 
> 标签：wpf, printing, uielement

我正在尝试打印一个滚动条 a`UIelement`或任何多页的东西。

我继承自`DocumentPaginator`，它打印，它甚至打印正确数量的页面。

问题是它会一遍又一遍地打印第一页。

这是我的分页器：

```
 public class MyPaginator : DocumentPaginator {
    ScrollViewer _printStuff;

    public MyPaginator(ScrollViewer document, PaperSize pageSize) {
        _printStuff = document;
        _pageSize.Height = 100; //pageSize.Height;
        _pageSize.Width = 100; //pageSize.Width;
    }

    public override DocumentPage GetPage(int pageNumber) {
        _printStuff.ScrollToVerticalOffset((PageSize.Height * pageNumber));
        _printStuff.UpdateLayout();
        DocumentPage dp = new DocumentPage(_printStuff);
        return dp;
    }

    public override bool IsPageCountValid {
        get { return true; }
    }

    private int _pageCount;
    public override int PageCount {
        get {
            if (_pageCount == 0) {
                this.ComputePageCount();
            }
            return _pageCount;
        }
    }
    private Size _pageSize;
    public override Size PageSize {
        get {
            return _pageSize;
        }
        set {
            _pageSize = value;
        }
    }

    public override IDocumentPaginatorSource Source {
        get { return null; }
    }

    public override void ComputePageCount() {
        //base.ComputePageCount();

        var totalHeight = 0d;

        if (totalHeight == 0) {
            totalHeight = _printStuff.DesiredSize.Height;
        }

        var pc = (totalHeight / PageSize.Height);
        _pageCount = (int)Math.Ceiling(pc);

    }

} 
```

这是我的调用代码：

```
 PrinterSettings ps = new PrinterSettings();
        var printDialog = new PrintDialog();
        var paginator = new MyPaginator(scroller, ps.DefaultPageSettings.PaperSize);

        printDialog.PrintDocument(paginator, "My Receipt"); 
```

这是我的用户控件：

```
<UserControl x:Class="TestVBS.Views.PrintTest2"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300" Name="myBox">

<ScrollViewer Name="scroller">
    <Grid Name="layout">

       <StackPanel>
            <Button Content="Button" HorizontalAlignment="Left" Margin="94,31,0,0" VerticalAlignment="Top" Width="75" Click="Button_Click_1"/>

            <TextBlock>HEllow </TextBlock>

            <TextBlock>adsfas</TextBlock>
            <TextBlock>HEllow</TextBlock>

            <TextBlock>adsfas</TextBlock>
            <TextBlock>HEllow</TextBlock>

            <TextBlock>adsfas</TextBlock>
            <TextBlock>HEllow</TextBlock>

            <TextBlock>adsfas</TextBlock>
            <TextBlock>HEllow</TextBlock>

            <TextBlock>adsfas</TextBlock>
            <TextBlock>HEllow</TextBlock>

            <TextBlock>adsfas</TextBlock>
            <TextBlock>HEllow</TextBlock>

            <TextBlock>adsfas</TextBlock>
            <TextBlock>HEllow</TextBlock>

            <TextBlock>adsfas</TextBlock>
            <TextBlock>HEllow</TextBlock>

            <TextBlock>adsfas</TextBlock>
            <TextBlock>HEllow</TextBlock>

            <TextBlock>adsfas</TextBlock>
            <TextBlock>HEllow</TextBlock>

            <TextBlock>adsfas</TextBlock>
            <TextBlock>HEllow</TextBlock>

            <TextBlock>adsfas</TextBlock>
            <TextBlock>HEllow</TextBlock>

            <TextBlock>adsfas</TextBlock>
            <TextBlock>HEllow</TextBlock>

            <TextBlock>adsfas</TextBlock>
            <TextBlock>HEllow</TextBlock>

            <TextBlock>adsfas</TextBlock>
            <TextBlock>BBBBBBBBBBBBBBBBBBBB</TextBlock>

            <TextBlock>CCCCCCCCCCCCCCCCCCC</TextBlock>
            <TextBlock>BBBBBBBBBBBBBBBBBBBB</TextBlock>

            <TextBlock>CCCCCCCCCCCCCCCCCCC</TextBlock>
            <TextBlock>BBBBBBBBBBBBBBBBBBBB</TextBlock>

            <TextBlock>CCCCCCCCCCCCCCCCCCC</TextBlock>
            <TextBlock>BBBBBBBBBBBBBBBBBBBB</TextBlock>

            <TextBlock>CCCCCCCCCCCCCCCCCCC</TextBlock>
            <TextBlock>BBBBBBBBBBBBBBBBBBBB</TextBlock>

            <TextBlock>CCCCCCCCCCCCCCCCCCC</TextBlock>
            <TextBlock>BBBBBBBBBBBBBBBBBBBB</TextBlock>

            <TextBlock>CCCCCCCCCCCCCCCCCCC</TextBlock>
            <TextBlock>BBBBBBBBBBBBBBBBBBBB</TextBlock>

            <TextBlock>CCCCCCCCCCCCCCCCCCC</TextBlock>
            <TextBlock>BBBBBBBBBBBBBBBBBBBB</TextBlock>

            <TextBlock>CCCCCCCCCCCCCCCCCCC</TextBlock>
            <TextBlock>BBBBBBBBBBBBBBBBBBBB</TextBlock>

            <TextBlock>CCCCCCCCCCCCCCCCCCC</TextBlock>
            <TextBlock>BBBBBBBBBBBBBBBBBBBB</TextBlock>

            <TextBlock>CCCCCCCCCCCCCCCCCCC</TextBlock>
            <TextBlock>BBBBBBBBBBBBBBBBBBBB</TextBlock>

            <TextBlock>CCCCCCCCCCCCCCCCCCC</TextBlock>
            <TextBlock>BBBBBBBBBBBBBBBBBBBB</TextBlock>

            <TextBlock>CCCCCCCCCCCCCCCCCCC</TextBlock>
            <TextBlock>BBBBBBBBBBBBBBBBBBBB</TextBlock>

            <TextBlock>CCCCCCCCCCCCCCCCCCC</TextBlock>
            <TextBlock>BBBBBBBBBBBBBBBBBBBB</TextBlock>

            <TextBlock>CCCCCCCCCCCCCCCCCCC</TextBlock>
            <TextBlock>BBBBBBBBBBBBBBBBBBBB</TextBlock>

            <TextBlock>CCCCCCCCCCCCCCCCCCC</TextBlock>
        </StackPanel>

    </Grid>
</ScrollViewer> 
```

为什么它不打印第二、第三和第四页？

# c - C中的回文递归程序

> ID：13879075
> 
> 赞同：-1
> 
> 时间：2012-12-14T12:51:55.130
> 
> 标签：c, recursion, palindrome

我已经想出了如何解决这个字符串，但我似乎无法让它工作。也许是因为我正在使用的 scanf 。请指教 ：）

```
#include<stdio.h>
#include<string.h>

int do_palindrome(char *str, int offset){
int ok = 1;
int length = strlen(str);

if(length/2 > 0)
    ok = (str[0] == str[length - 1 - offset])?
            do_palindrome(++str, ++offset):0;

return ok;
}
int main(){
int i = 0;
int ok = 0;
char* str[1] ;

    scanf("%c", str[1]);
    ok = do_palindrome(str[0], 0);
    printf("%s is palindrome? : %d\n", str[0], ok);

printf("Finished!");
return 0;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:54:45.410

您正在考虑的是 struct hack：

```
typedef struct {
    char s[1];
} String;

int main()
{
    /* allocate 15 extra bytes for the string */
    String *s = malloc(sizeof *s + 15); 
```

这允许您声明一个大小为 1 的数组，然后将其用作可变长度，但您仍然必须给它一些内存（通过 malloc）才能使用它。然后您可以通过`s`.

如果你想要一个可变长度的字符串，你应该 malloc 你需要的数据量。如果你想做一些 hacky （如果你打算用 Gcc 编译）你可以这样做：

```
char * str;
scanf("%ms", str);
ok = do_palindrome(str, 0);
printf("%s is palindrome? : %d\n", str, ok);
free(str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T12:53:56.980

```
char* str[1] ; 
```

声明一个由一个字符指针组成的数组

```
scanf("%c", str[1]); 
```

读取单个字符，但尝试将其放置在数组末尾之外（C 数组从零开始）。

我想你想读取一个字符串（char 数组）。您可以使用

```
char str[20]; /* change the array size as required */
scanf("%19s", str); /* read one fewer chars than your array size */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T13:02:11.397

```
char* str[10] ;
scanf("%s", str);
ok = do_palindrome(str, 0);
printf("%s is palindrome? : %d\n", str, ok); 
```

您正在尝试将字符串读取为 char 类型，这是错误的，应该是字符串类型。此外，子例程调用`do_palindrome`应包含的基地址`str`不仅仅是字符串的第一个字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-13T15:30:59.170

```
if(length/2 > 0)
    ok = (str[0] == str[length - 1 - offset]) ?
            do_palindrome(++str, ++offset):0; 
```

该语句将运行`(length - 1)`多次。当我们检查回文时，我们只需要进行`(length / 2)`比较。所以我建议将代码更改为以下内容：

```
if (length >= 2 && (length / 2) >= offset) {
    ok = (str[0] == str[length - 1 - offset]) ?
            isPalindrome(++str, ++offset) : 0; 
```

# javascript - 对象上下文中的变量

> ID：13879077
> 
> 赞同：4
> 
> 时间：2012-12-14T12:52:00.933
> 
> 标签：javascript, jquery, variables, object

我如何`nav_items`在以下情况下工作？

```
params = {
    nav: $('.nav'),
    nav_items: params.nav.find('li')
}

ReferenceError: params is not defined (logically true) 
```

也试过这个：

```
params = {
    nav: $('.nav'),
    nav_items: nav.find('li')
}

ReferenceError: nav is not defined (what is the right way?) 
```

我知道，可以使用以下代码完成：

```
params = {
    nav: $('.nav'),
    nav_items: null
}
params.nav_items = nav.find('li'); 
```

但它很有趣，可以在没有额外代码的情况下完成吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T12:54:09.590

```
var $nav = $('.nav');
params = {
    nav: $nav,
    nav_items: $nav.find('li')
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T13:46:33.340

可能为时已晚，但无法克制：

```
params = (function(a) { 
  return {nav: a, nav_items: a.find('li')};
})($('.nav')); 
```

# iphone - 与 iPhone 5 黄色相配？

> ID：13879094
> 
> 赞同：-1
> 
> 时间：2012-12-14T12:53:42.270
> 
> 标签：iphone, ios, ios5, iphone-5

我正在构建一个应用程序，它使用一些漂亮的平静的绿色和黄色。

然而，在 iPhone 5 的“黄色屏幕”上，这些颜色失去了魅力，实际上非常锐利。

我的问题是：**iPhone 5 的黄屏是否如此普遍以至于我应该接受它并为它设计？**

那里似乎没有任何明确的答案。将不胜感激其他一些开发人员/设计师对这种情况的看法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:03:08.997

你不会得到任何关于 iPhone 有多少黄屏问题的确切信息。唯一可以拥有此信息的是苹果，他们肯定不会将其公开。

我的猜测是，有这个问题的 iPhone 相对较少，因为有问题的人会在论坛上报告，而没有问题的人不会。即使它是所有设备的 20%（我怀疑，我的猜测可能是 1-2%），我认为调整这些设备的设计是没有意义的，除非你已经想到了一个和你现在的一样好。

# android - 如何以编程方式创建滚动视图？

> ID：13879095
> 
> 赞同：0
> 
> 时间：2012-12-14T12:53:44.983
> 
> 标签：android, widget

我想以编程方式在其中创建带有文本视图的滚动视图。我的代码如下所示。它有效，但是当我在 onSizeChanged 中执行 getLayoutParams 时，我得到 InvocationTargetException。我的代码有什么问题？

```
public MyActivity extends Activity 
  {
    public void onCreate(Bundle savedInstanceState) 
    {       
        super.onCreate(savedInstanceState);
        setContentView(new MyLayout(this));
    }
    protected class MyLayout extends RelativeLayout 
     {
        TextView tv;
        public MyLayout(Context context)
        {
           super(context);
           ScrollView sv = ScrollView(context);
           tv = new TextView(context);
           tv.setText("Hello World");
           sv.addView(tv);
           addView(sv);
        }
        protected void onSizeChanged(int xNew, int yNew, int xOld, int yOld)
        {
            LayoutParams params = (LayoutParams)tv.getLayoutParams(); // I have          InvocationTargetException here. What's wrong?
        }   
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:59:30.257

您应该在该 TextView 中放置一些文本，因此：

```
public MyActivity extends Activity {
    public void onCreate(Bundle savedInstanceState) {       
        super.onCreate(savedInstanceState);
        setContentView(new MyLayout(this));
    }
    protected class MyLayout extends RelativeLayout {
    public MyLayout(Context context) {
        super(context);
        ScrollView sv = new ScrollView(context);
        TextView tv = new TextView(context);
        tv.setText("Hello World");
        sv.addView(tv);
        addView(sv);
    }
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:00:35.470

您需要`LayoutParams`为`View`s - the`ScrollView`和`TextView`. 并使用正确的类型（`FrameLayout.LayoutParams`两者）。

例如

```
...
tv = new TextView(context);
tv.setText("Hello World");
sv.addView(tv, new FrameLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T13:03:17.697

滚动视图不应使用 wrap_content 而是使用 fill_parent。

# haskell - 应用函子和左从

> ID：13879099
> 
> 赞同：8
> 
> 时间：2012-12-14T12:53:52.050
> 
> 标签：haskell, functor, either, applicative

我一直在阅读这本[很棒的](http://learnyouahaskell.com)好书，但我在 Applicative Functors 上有些挣扎。

在下面的示例`max`中应用了两个 Maybe 函子的内容并返回`Just 6`。

```
max <$> Just 3 <*> Just 6 
```

为什么在以下示例中`Left "Hello"`返回而不是 Either 仿函数的内容：`Left "Hello World"`？

```
(++) <$> Left "Hello" <*> Left " World" 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-14T12:59:40.497

这是因为`Functor`实例（`Applicative`等）中的类型参数是第二个类型参数。在

```
Either a b 
```

`a`类型和`Left`值不受函数或应用操作的影响，因为它们被视为失败案例或无法访问。

```
instance Functor (Either a) where
    fmap _ (Left x)  = Left x
    fmap f (Right y) = Right (f y) 
```

使用`Right`,

```
(++)  <$> Right "Hello" <*> Right " World" 
```

获得连接。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-14T15:13:44.950

为了补充丹尼尔的出色回答，我想提出几点：

首先，[这](http://hackage.haskell.org/packages/archive/base/latest/doc/html/src/Control-Applicative.html#%3C%2A)是 Applicative 实例：

```
instance Applicative (Either e) where
    pure             =  Right
    Left  e  <*>  _  =  Left e
    Right f  <*>  r  =  fmap f r 
```

你可以看到这是“短路”——只要它碰到 a `Left`，它就会中止并返回那个 Left。您可以通过穷人的严格分析来检查这一点：

```
ghci> (++) <$> Left "Hello" <*> undefined 
Left "Hello"                              -- <<== it's not undefined :) !!

ghci>  (++) <$> Right "Hello" <*> undefined 
*** Exception: Prelude.undefined          -- <<== undefined ... :(

ghci> Left "oops" <*> undefined <*> undefined 
Left "oops"                               -- <<== :)

ghci> Right (++) <*> undefined <*> undefined 
*** Exception: Prelude.undefined          -- <<== :( 
```

其次，你的例子有点棘手。一般来说，函数的类型和`e`in`Either e`是不相关的。这是`<*>`s 类型：

```
(<*>) :: Applicative f => f (a -> b) -> f a -> f b 
```

如果我们进行替换`f`-->> `Either e`，我们得到：

```
(<*>) :: Either e (a -> b) -> Either e a -> Either e b 
```

尽管在您的示例`e`和`a`匹配中，通常它们不会，这意味着您不能多态地实现`Either e`将函数应用于左侧参数的 Applicative 实例。

# emacs - 如何配置emacs打开一个宽大的编译窗口？

> ID：13879101
> 
> 赞同：4
> 
> 时间：2012-12-14T12:53:55.937
> 
> 标签：emacs

通常我用两个（emacs-）窗口并排编辑 emacs 中的源代码——第二个窗口通过 ' *Cx 3*打开。像这样：

```
+------------+-------------+
|            |             |
| src1       |  src2       |
|            |             |
|            |             |
|            |             |
|            |             |
|            |             |
|            |             |
|            |             |
|            |             |
+------------+-------------+
| mini-buffer              |
+------------+-------------+ 
```

当我现在开始*compile*时，例如 with `F9`，新`*compilation*`缓冲区将替换我的*src* -buffers 之一。

**相反，我希望`*compilation*`缓冲区在 mini-buffer 的顶部打开**，如果它已经不可见（如果是，当然使用它）。

```
+------------+-------------+
|            |             |
| src1       |  src2       |
|            |             |
|            |             |
|            |             |
|            |             |
+------------+-------------+
|                          |
| *compilation*            |
|                          |
+------------+-------------+
| mini-buffer              |
+------------+-------------+ 
```

-buffer的`*compilation*`高度应该是 while 窗口或 6-10 行的 30% 左右。

如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:07:02.413

实现此目的的一种方法是使用[popwin.el](https://github.com/m2ym/popwin-el)。我从未使用过它，但它看起来非常可定制，并且默认配置已经包含**编译**。

# vb.net - 运行 exe 时出现框架错误

> ID：13879106
> 
> 赞同：0
> 
> 时间：2012-12-14T12:54:15.063
> 
> 标签：vb.net, compilation, dialog, exe

我已将**Visual Basic 2010 Express**中的代码编译为**.exe**文件，它可以在我的机器（Windows 7 Home Premium 64 Bit）上完美运行。

我想在外部机器（Windows 7 Home Premium 64 Bit）上运行这个文件，并且我安装了最新版本的**Framework**（4.5）。

当我启动文件时，我没有收到错误消息。我看到的只是我的应用程序的启动画面，突然出现 windows7 对话框“**此应用程序已停止工作**”

我就是想不通问题所在...

# c++ - C 库的 C++ 包装器作为共享库

> ID：13879107
> 
> 赞同：2
> 
> 时间：2012-12-14T12:54:21.057
> 
> 标签：c++, c, wrapper

**我自己解决了这个问题**

问题是图书馆的链接。我将 libmywrapper.so（我重命名）文件复制到 /usr/lib 并与 -mywrapper 链接就是这样:-)

**原帖：**

我正在编写一个允许从 C 代码调用 C++ 函数的包装库。可惜没有链接。。。

包装器.h：

```
#ifdef __cplusplus
extern "C"
{
#endif
    extern char* (keygen) ();
#ifdef __cplusplus
 }
#endif 
```

包装器.cpp：

```
#include "wrapper.h"
#include <someincludes>
char* keygen ()
{
    urandom u; 
```

生成文件：

```
TARGET      := ./mywrapperlib.so
CXXFLAGS    := -fPIC -shared -g -Wall -std=c++0x -I../someincludes -I.
CXX         := g++
LIB         := -lsomelibs
EXT         := cpp
BUILDDIR    := build

override BUILDDIR := $(strip $(BUILDDIR))
SOURCES  := $(wildcard *.$(EXT))
OBJECTS  := $(patsubst %.$(EXT), $(BUILDDIR)/%.o, $(SOURCES))
DEPS     := $(patsubst %.$(EXT), $(BUILDDIR)/%.dep, $(SOURCES))

.PHONY: all
all: $(TARGET)

$(TARGET): $(OBJECTS) $(DEPS)
    $(CXX) $(CXXFLAGS) -o $(TARGET) $(OBJECTS) $(LIBS)

ifneq ($(MAKECMDGOALS), clean)
-include $(DEPS)
endif

$(OBJECTS): $(BUILDDIR)/%.o: %.$(EXT) $(BUILDDIR)/%.dep $(BUILDDIR)/.tag
    $(CXX) $(CXXFLAGS) -c $< -o $@

$(DEPS): $(BUILDDIR)/%.dep: %.$(EXT) $(BUILDDIR)/.tag
    mkdir -p $(dir $(@))
    $(CXX) $(CXXFLAGS) -MM $< -MT $@ -MT $(<:.$(EXT)=.o) -o $@

%.tag:
    mkdir -p $(dir $(@))
    touch $@

.PHONY: clean
clean:
    $(RM) -r $(BUILDDIR) 
```

应该使用库的测试文件：test.c：

```
#include <wrapper.h>
int main()
{
    char* test = keygen();
} 
```

当我尝试编译它时

```
gcc  -o test.a -g -Iinclude -Llib/mywrapperlib.so test.c 
```

我明白了

```
/tmp/ccB9bEot.o: In function `main':
/some/paths/test.c:7: undefined reference to `keygen' 
```

我对混合 C 和 C++ 代码和编写库非常缺乏经验。现在我卡住了，希望有人可以帮助我解决这个问题。

编辑：

我用nm检查了lib：

```
nm lib/cryptdbwrapperlib.so | grep keygen
0000000000006935 T keygen 
```

所以，我想问题是链接......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:01:08.527

这与您的标志的顺序有关`gcc`。

做这个：

```
gcc  -o test.a -g -Iinclude test.c -Llib/mywrapperlib.so
#                           ^^^^^^ ^^^^^^^^^^^^^^^^^^^^^
#                           first    second 
```

GCC 从左到右读取库和对象，并且（基本上）忽略“还”不需要的任何内容。在我提议的更改中，`test.c`首先进行，因此 GCC 知道它将寻找一个符号`keygen`；然后，当它最终看到`-Llib/mywrapperlib.so`它时，它会扫描它`keygen`，找到它，并知道这个库是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:15:55.233

**我自己解决了这个问题**

问题是图书馆的链接。我将 libmywrapper.so（我重命名）文件复制到 /usr/lib 并与 -mywrapper 链接就是这样:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T13:37:06.713

将函数的签名更改`wrapper.cpp`为

```
extern "C" char* keygen () 
```

否则，它将使用 C++ 样式名称进行编译，因此是与头文件中声明的函数不同的函数。

# windows-phone-7 - 我怎样才能使这个列表框项目垂直拉伸？

> ID：13879109
> 
> 赞同：1
> 
> 时间：2012-12-14T12:54:28.777
> 
> 标签：windows-phone-7, xaml

________________
__________
项目1____________ __________Imemnumber2_____ __________项目
3____________
__________________________

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
            <ListBox x:Name="MainListBox" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,0,-12,0" ItemsSource="{Binding Items}" SelectionChanged="MainListBox_SelectionChanged" >
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel  Margin="10">
                            <Image Source="{Binding Image}" Stretch="None"/>
                            <TextBlock Text="{Binding Title}" TextWrapping="Wrap" Style="{StaticResource PhoneTextExtraLargeStyle}"/>
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </Grid> 
```

我怎样才能做到这一点？

_______________________
___________
项目1_____________ _________Imemnumber2________ ___________项目
3_____________
____________________________

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:24:29.587

尝试设置 TextBox 的 TextAlignment 属性

```
<TextBlock Text="{Binding Title}" TextWrapping="Wrap" Style="{StaticResource PhoneTextExtraLargeStyle}" TextAlignment="Center"/> 
```

更新：

尝试固定 TextBlock 的宽度，如下所示

```
<TextBlock Text="{Binding Title}" TextWrapping="Wrap" Style="{StaticResource PhoneTextExtraLargeStyle}" TextAlignment="Center" Width="400"/> 
```

# javascript - jQuery 不会加载更新的图像

> ID：13879118
> 
> 赞同：0
> 
> 时间：2012-12-14T12:55:07.683
> 
> 标签：javascript, jquery, ajax

有没有人能够确定，如何停止 jQuery 缓存它抓取的图像，并一次又一次地显示相同的图像？

基本上，图像每 5 秒重新上传一次，因为它充当网络摄像头（如果您检查图像右下角的时间戳，您可以判断它是否已更新）

[http://colorednoise.co.uk/scripts/index.htm](http://colourednoise.co.uk/scripts/index.htm)

谢谢

（对不起，我忘了点击粘贴代码）

```
$(function(){
$(document).ready(function() {
    var imgs = ['http://www.ramseycommunityradio.co.uk/images/webcam.jpg', 'http://www.ramseycommunityradio.co.uk/images/webcam.jpg']
    $("#webcam").attr('src', imgs[1]);
    var refreshId = setInterval(function() {
        $("#webcam").fadeOut("slow", function() {
            var $el = $(this);
            $el.attr('src', $.inArray($el.attr('src'), imgs) === 0 ? imgs[1] : imgs[0]);
            $el.fadeIn("slow");
        });
    }, 2000);
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T12:59:16.793

您可以尝试将更改的查询字符串附加到 URL，如果这确实是您的问题，这应该停止缓存。我在这里看到了用时间戳完成的：[how to generate and append a random string using jquery](https://stackoverflow.com/questions/6967975/how-to-generate-and-append-a-random-string-using-jquery)

因此，每次生成图像时，您都会执行以下操作：

```
var qs = (new Date).getTime();
var url = 'http://www.example.com/images/myimage.jpg?' + qs;
$(el).attr('src',url); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T13:01:04.410

你的代码：

```
var imgs = ['http://www.ramseycommunityradio.co.uk/images/webcam.jpg', 'http://www.ramseycommunityradio.co.uk/images/webcam.jpg']
    $("#webcam").attr('src', imgs[1]);
    var refreshId = setInterval(function() {
        $("#webcam").fadeOut("slow", function() {
            var $el = $(this);
            $el.attr('src', $.inArray($el.attr('src'), imgs) === 0 ? imgs[1] : imgs[0]); 
// this condition is redundant, it will ultimately give the same result always
// because imgs[0]==imgs[1]

            $el.fadeIn("slow");
        });
    }, 2000); 
```

就 JQuery 而言，您**没有**更改 SRC 属性（JQuery 对图像的内容一无所知）。尝试在服务器端使用两个*不同*`webcam0.jpg`的名称，例如and`webcam1.jpg`并在它们之间交替使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T13:03:13.197

一个技巧是不附加一个随机查询字符串 URL，这会导致图像从服务器重新加载。代码可能类似于：

```
setInterval(function() {
    var img = $("#img").get(0);
    img.src = img.src.replace(/\?.*/, "") + "?" + Math.random();
}, 5000); 
```

# c# - 将属性值转换为 yyyy-MM-dd hh:mm:ss tt 格式

> ID：13879120
> 
> 赞同：-1
> 
> 时间：2012-12-14T12:55:13.557
> 
> 标签：c#, asp.net, .net, c#-4.0, c#-3.0

我有一个以下列方式保存日期时间信息的属性

`public string ExecutionTime{ get; set; }`

ExecutionTime 值设置为`dd-MM-yyyy hh:mm:ss tt`
如何将属性值更改为在**文本框中**`yyyy-MM-dd hh:mm:ss tt`显示和显示。

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T12:58:05.807

我不会使用`string`财产。相反，我会将它存储为`DateTime`因为它实际上似乎是一个。*当你显示它时，*你可以随意格式化它。

```
public DateTime ExecutionTime{ get; set; } 
```

例如：

```
Textbox1.Text = ExecutionTime.ToString("yyyy-MM-dd hh:mm:ss tt"); 
```

否则，您总是需要将该字符串解析为 a `DateTime`，反之亦然，您甚至可能会遇到本地化问题（将来）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T13:11:11.313

由于您的日期存储为`string`：

1.  解析字符串以获得实际的`DateTime`
2.  转换回`string`不同的格式

你需要[ParseExact](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)：

```
// Your date
string inputDate = "20-01-2012 02:25:50 AM";

// Converts to dateTime
// Do note that the InvariantCulture is used, as I've specified
// AM as the "tt" part of the date in the above example
DateTime theDate = DateTime.ParseExact(inputDate, "dd-MM-yyyy hh:mm:ss tt", CultureInfo.InvariantCulture);

// Now get the string to be displayed
// I've also specified the Invariant (US) culture, you might want something else
string yourString = theDate.ToString("yyyy-MM-dd hh:mm:ss tt", CultureInfo.InvariantCulture); 
```

但是您确实应该将日期存储为`DateTime`，而不是`string`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T13:13:47.490

```
DateTime d;
var isValid = DateTime.TryParse(ExecutionTime, out d);
if (isValid)
{
    textBox1.Text = d.ToString("dd-MM-yyyy hh:mm:ss tt");
} 
```**

# visual-studio - ReSharper 不保存和恢复单元测试会话

> ID：13879122
> 
> 赞同：3
> 
> 时间：2012-12-14T12:55:17.623
> 
> 标签：visual-studio, unit-testing, resharper, mstest

在使用 ReShaper 的测试运行器运行 MSTests 时，将此选项设置为 true

**ReSharper > 选项 > 单元测试 > 保存和恢复单元测试会话**

关闭并重新打开解决方案后，测试会话结果将完全消失。

必须再次重新运行冗长的回归测试。

任何关于如何修复此选项的预期行为的想法将不胜感激。

了解 ReSharper 如何以及在何处保存 Visual Studio 打开/关闭之间的会话数据会很有用。可以说保存和恢复功能太黑箱了。最好从会话文件中定位和恢复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:34:36.550

“保存和恢复单元测试会话”只保存单元测试的*选择*，而不是结果（红色/绿色/执行时间）。

单元测试会话存储在 sln 文件旁边的“.DotSettings.user”文件中。

**编辑：**这是过时的信息。如今，ReSharper 将会话存储在其他地方。我认为作为“解决方案缓存”的一部分。

# java - 垃圾回收演示程序无法编译

> ID：13879123
> 
> 赞同：1
> 
> 时间：2012-12-14T12:55:22.890
> 
> 标签：java, garbage-collection, finalizer

我编写了一个简单的程序来演示垃圾收集。这是代码：

```
public class GCDemo{

public static void main(String[] args){
    MyClass ob = new MyClass(0);
    for(int i = 1; i <= 1000000; i++)
        ob.generate(i);
}

/**
 * A class to demonstrate garbage collection and the finalize method.
 */
class MyClass{
    int x;

    public MyClass(int i){
        this.x = i;
    }

    /**
     * Called when object is recycled.
     */
    @Override protected void finalize(){
        System.out.println("Finalizing...");
    }

    /**
     * Generates an object that is immediately abandoned.
     * 
     * @param int i - An integer.
     */
    public void generate(int i){
        MyClass o = new MyClass(i);
    }
} 
```

}

但是，当我尝试编译它时，它显示以下错误：

```
Exception in thread "main" java.lang.Error: Unresolved compilation problem: 
    No enclosing instance of type GCDemo is accessible. Must qualify the allocation with an enclosing instance of type GCDemo (e.g. x.new A() where x is an instance of GCDemo).

    at GCDemo.main(GCDemo.java:3) 
```

有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T12:57:03.177

制作`MyClass`静态：

```
static class MyClass { 
```

没有这个，你必须有一个实例`GCDemo`才能实例化`MyClass`. 您没有这样的实例，因为`main()`它本身是`static`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T12:59:58.780

您可以大大简化您的示例。这将执行相同的操作，但您一定会看到该消息。在您的示例中，GC 可能不会运行，因此在程序退出之前您可能看不到任何内容。

```
while(true) {
  new Object() {
    @Override protected void finalize(){
      System.out.println("Finalizing...");
    }
  Thread.yield(); // to avoid hanging the computer. :|
} 
```

基本问题是您的嵌套类需要是静态的。

# php - 变量声明上的 PHP 阻塞 (w/psql)

> ID：13879127
> 
> 赞同：3
> 
> 时间：2012-12-14T12:55:44.207
> 
> 标签：php, postgresql, variables, insert

我是 PHP 的新手，但即使我认为这也不正常。

我的代码一直在以下行中：

```
$insert = 'INSERT INTO boleia VALUES ('.$nick.', '.$data_format.', '.$custo.', '.$dest_origem.', '.$dest_destino.', NULL, '.$matricula.');'; 
```

我尝试使用双引号和那些双引号内的变量，什么都没有。

任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T13:06:29.707

您的 PHP 代码在语法上是正确的，但生成的 SQL 不是因为您没有使用引号来分隔值。

你可以这样做：

```
$insert = 'INSERT INTO boleia VALUES ("'.$nick.'", "'.$data_format.'", "'.$custo.'", "'.$dest_origem.'", "'.$dest_destino.'", NULL, "'.$matricula.'");'; 
```

或这个：

```
$insert = "INSERT INTO boleia VALUES ('".$nick."', '".$data_format."', '".$custo."', '".$dest_origem."', '".$dest_destino."', NULL, '".$matricula."');'; 
```

你也可以这样做：

```
$insert = "INSERT INTO boleia VALUES ('$nick', '$data_format', '$custo', '$dest_origem', '$dest_destino', NULL, '$matricula');"; 
```

但不推荐**任何**一种方式，因为您容易受到**SQL 注入**的攻击！

## 如何防止 SQL 注入？

为了防止您必须使用适合您的数据库的函数来转义值，例如，由于您使用的是 PostgreSQL，您必须对每个值使用[pg_escape_string() ：](http://php.net/manual/en/function.pg-escape-string.php)

```
$insert = 'INSERT INTO boleia VALUES ("'.pg_escape_string($nick).'", "'.pg_escape_string($data_format).'", "'.pg_escape_string($custo).'", "'.pg_escape_string($dest_origem).'", "'.pg_escape_string($dest_destino).'", NULL, "'.pg_escape_string($matricula).'");'; 
```

另一种方法是使用[pg_prepare()](http://php.net/manual/en/function.pg-prepare.php)和[pg_execute()](http://php.net/manual/en/function.pg-execute.php)

```
pg_prepare($dbconn, "my_insert", 'INSERT INTO boleia VALUES ($1, $2, $3, $4, $5, NULL, $6);');
pg_execute($dbconn, "my_insert", array($nick, $data_format, $custo, $dest_origem, $dest_destino, $matricula)); 
```

甚至使用[pg_query_params()](http://php.net/manual/en/function.pg-query-params.php)

```
pg_query_params($dbconn, 'INSERT INTO boleia VALUES ($1, $2, $3, $4, $5, NULL, $6);',
                array($nick, $data_format, $custo, $dest_origem, $dest_destino, $matricula)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:00:56.710

插入查询中的每个值都需要用引号引起来，除非它是数字或 NULL。

```
$insert = "INSERT INTO boleia VALUES ('$nick', '$data_format', '$custo', '$dest_origem', '$dest_destino', NULL, '$matricula');"; 
```

如果您使用[PDO](http://php.net/manual/en/book.pdo.php)，则不必担心引用或转义任何内容。

此[PDO 教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)中的示例：

```
$stmt = $db->prepare("INSERT INTO table(field1,field2,field3) VALUES(:field1,:field2,:field3)");
$stmt->execute(array(':field1' => $field1, ':field2' => $field2, ':field3' => $field3));
$affected_rows = $stmt->rowCount(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-14T13:01:11.600

您最好对 SQL 字符串使用双引号，因为以后您可以更轻松地在没有用引号封装字符串的地方进行运动

```
$insert = "INSERT INTO boleia VALUES ('$nick', '$data_format', '$custo', '$dest_origem', '$dest_destino', NULL, '$matricula')"; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-14T12:58:08.590

您需要封装进入查询的字符串值。

例如

```
$insert = 'INSERT INTO boleia VALUES ("'.$nick.'", "'.$data_format.'", "'.$custo.'", etc. 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-14T17:01:16.717

人，普通。原始问题只有 1 (ONE) 行长！正是这样：

```
$insert = 'INSERT INTO boleia VALUES ('.$nick.', '.$data_format.', '.$custo.', '.$dest_origem.', '.$dest_destino.', NULL, '.$matricula.');'; 
```

我们不必在这里修复任何非转义字符串，假设他以前没有这样做过，我们也不应该仅仅因为我们在标签中看到它就假设他正在使用 PostgreSQL。他有一个简单的错误——查询中缺少字符串封装。它是固定的，以最简单的形式，如下所示：

```
$insert = 'INSERT INTO boleia VALUES (\''.$nick.'\', \''.$data_format.'\', \''.$custo.'\', \''.$dest_origem.'\', \''.$dest_destino.'\', NULL, \''.$matricula.'\');'; 
```

就是这样！当且仅当我们想添加一些额外的信息，例如如何在未完成的情况下转义字符串，或者如果我们最好使用双引号，因为在这种情况下它不太容易出现人为错误，或者如果有一个很好的 PDO 教程可供阅读.... 这要么是他的问题的确切答案之后的*附加信息*，要么是一个闲聊的话题。

干杯。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-12-14T13:09:12.297

```
$db = new mysqli( some db data );

$nick = $db->real_escape_string( $nick );
$data_format = $db->real_escape_string( $data_format ); // this is probably not needed
$dest_origem = $db->real_escape_string( $dest_origem );
$dest_destino = $db->real_escape_string( $dest_destino );
$matricula = $db->real_escape_string( $matricula );

$insert = "INSERT INTO boleia VALUES ('$nick', '$data_format', '$custo', '$dest_origem', '$dest_destino', NULL, '$matricula')"; 
```

你应该没事

# vba - PowerPoint VBA 如何设置 msoAnimEffectChangeFillColor 效果的颜色

> ID：13879136
> 
> 赞同：1
> 
> 时间：2012-12-14T12:56:21.330
> 
> 标签：vba, powerpoint, effect

我正在使用 PowerPoint 2010，我正在尝试向一堆形状添加动画，这些形状会将它们的颜色变为绿色，但我得到的只是颜色变为深红色

```
Private Sub CommandButton1_Click()
Dim oshp As Shape
Dim oslide As Slide

Set oslide = ActivePresentation.Slides(1)

'Clear all animations
For i = 1 To oslide.TimeLine.MainSequence.Count
    oslide.TimeLine.MainSequence.Item(1).Delete
Next

For i = 1 To 4
    Set oshp = oslide.Shapes(i)
    ' Assign an animation to shape
    Set oEffect = oslide.TimeLine.MainSequence.AddEffect(Shape:=oshp, effectId:=msoAnimEffectChangeFillColor, trigger:=msoAnimTriggerAfterPrevious)
    oEffect.EffectParameters.Color2.RGB = RGB(0, 255, 0)
    oEffect.Timing.SmoothEnd = msoTrue
    oEffect.Timing.Duration = 0.2
Next
End Sub 
```

# iphone - iPhone 应用程序在发布正在进行的图像并被电话中断时崩溃

> ID：13879137
> 
> 赞同：0
> 
> 时间：2012-12-14T12:56:34.597
> 
> 标签：iphone, objective-c, ios, ios6

在我的应用程序中，当我在图像视图中添加图像并开始以同步方式在服务器上发布图像时，如果我收到任何调用，那么我的应用程序将崩溃并显示以下日志：

```
2012-12-14 11:13:19 +0000 Test_Phone_Call URL : https://app.factorlab.com/mvc/media
2012-12-14 11:13:19 +0000 Test_Phone_Call Response Message : HTTP/1.1 200 OK
2012-12-14 11:13:24 +0000 Test_Phone_Call URL : https://app.factorlab.com/mvc/media
2012-12-14 11:13:24 +0000 Test_Phone_Call Response Message : HTTP/1.1 200 OK
2012-12-14 11:13:28 +0000 Test_Phone_Call URL : https://app.factorlab.com/mvc/media
2012-12-14 11:13:28 +0000 Test_Phone_Call Response Message : HTTP/1.1 200 OK
2012-12-14 11:13:32 +0000 Test_Phone_Call URL : https://app.factorlab.com/mvc/media
2012-12-14 11:13:38 +0000 backboardd Forcing crash report of Test_Phone_Call[4610]...
2012-12-14 11:13:38 +0000 backboardd com.factorlab.grow.stage failed to resume in time
2012-12-14 11:13:39 +0000 backboardd Application'UIKitApplication:com.factorlab.grow.stage[0xe310]' exited abnormally with signal 9: Killed: 9
2012-12-14 11:13:39 +0000 backboardd Finished crash reporting. 
```

我们可以修复这个崩溃还是没有办法修复它。我正在使用 iOS 6.0.1 在 iPhone 4 上进行测试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:59:15.887

如果你在主线程上发出网络请求，你肯定会遇到这类问题。您应该将您的网络请求移动到后台线程，或者异步执行它们。

# java - 修复线程不安全的 Java 代码的策略？

> ID：13879138
> 
> 赞同：1
> 
> 时间：2012-12-14T12:56:44.090
> 
> 标签：java, multithreading, static, thread-safety

我必须修复一些包含令人讨厌的错误的旧 Java 代码：

当用户登录时，代码通过查询 LDAP 服务器来检查他的权限，这需要一两秒钟。

当另一个用户在该时间范围内登录时，似乎第一个用户的权限检查继续使用第二个用户的权限，这当然是一个灾难性的错误。似乎第一个线程中的数据被第二个线程覆盖。

有很多静态变量和方法散布在整个代码中。我不知道是否有充分的理由让它们成为静态的，或者我是否可以让它们成为动态的。

你能推荐一个如何使这个代码线程安全的策略，或者一个关于这类问题的教程吗？

以下是有关发生情况的一些详细信息。先来个标准流程的例子：

```
2012-12-11 15:07:14,146 INFO [TP-Processor20] [MyListener] handleLoginEvent Login Event: username=[USER1]
2012-12-11 15:07:14,865 INFO [TP-Processor20] [MyListener] doInHibernate Group Maps Array has 3 maps inside.
2012-12-11 15:07:14,865 INFO [TP-Processor20] [MyListener] doInHibernate External Group NAME=[*] USER=[USER1] is a member? true
...
2012-12-11 15:07:16,036 INFO [TP-Processor20] [MyListener] doInHibernate External Group NAME=[ou:GROUP-A] USER=[USER1] is a member? false
...
2012-12-11 15:07:16,068 INFO [TP-Processor20] [MyListener] doInHibernate External Group NAME=[ou:GROUP-Z] USER=[USER1] is a member? false
TP-Processor20 done.

2012-12-11 15:07:33,099 INFO [TP-Processor9] [MyListener] handleLoginEvent Login Event: username=[USER1]
2012-12-11 15:07:33,677 INFO [TP-Processor9] [MyListener] doInHibernate Group Maps Array has 3 maps inside.
2012-12-11 15:07:33,677 INFO [TP-Processor9] [MyListener] doInHibernate External Group NAME=[*] USER=[USER1] is a member? true
...
2012-12-11 15:07:33,755 INFO [TP-Processor9] [MyListener] doInHibernate External Group NAME=[ou:GROUP-A] USER=[USER1] is a member? false
...
2012-12-11 15:07:33,786 INFO [TP-Processor9] [MyListener] doInHibernate External Group NAME=[ou:GROUP-Z] USER=[USER1] is a member? false
TP-Processor9 done. 
```

这是问题的日志摘录。请注意第二次登录后保存用户名的变量有何不同。

```
2012-12-11 15:07:53,082 INFO [TP-Processor9] [MyListener] handleLoginEvent Login Event: username=[USER2]
2012-12-11 15:07:53,661 INFO [TP-Processor9] [MyListener] doInHibernate Group Maps Array has 3 maps inside.
2012-12-11 15:07:53,676 INFO [TP-Processor9] [MyListener] doInHibernate External Group NAME=[*] USER=[USER2] is a member? true

note the handleLoginIvent from another user
2012-12-11 15:07:53,676 INFO [TP-Processor1] [MyListener] handleLoginEvent Login Event: username=[USER1]
...
note that the USER= value has changed to that of TP-Processor1\. Also, the "is a member" test returns now true which is incorrect for user USER1\. It is actually user USER2 who is a member of that group.
2012-12-11 15:07:53,832 INFO [TP-Processor9] [MyListener] doInHibernate External Group NAME=[ou:GROUP-A] USER=[USER1] is a member? true
...
2012-12-11 15:07:53,989 INFO [TP-Processor9] [MyListener] doInHibernate External Group NAME=[ou:GROUP-Z] USER=[USER1] is a member? false
TP-Processor9 done

2012-12-11 15:07:54,286 INFO [TP-Processor1] [MyListener] doInHibernate Group Maps Array has 3 maps inside.
2012-12-11 15:07:54,286 INFO [TP-Processor1] [MyListener] doInHibernate External Group NAME=[*] USER=[USER1] is a member? true
...
2012-12-11 15:07:54,364 INFO [TP-Processor1] [MyListener] doInHibernate External Group NAME=[ou:GROUP-A] USER=[USER1] is a member? false
...
2012-12-11 15:07:54,551 INFO [TP-Processor1] [MyListener] doInHibernate External Group NAME=[ou:GROUP-Z] USER=[USER1] is a member? false 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T13:03:00.973

尝试删除每个静态或实例变量，并将它们替换为作为参数从方法传递到方法的局部变量。您的代码将因此变得无状态，因此是线程安全的。例如，替换以下

```
private static int foo;

public void bar() {
    ...
    foo = someMethod();
    ...
    baz();
}

private void baz() {
   ...
   someOtherMethod(foo);
   ...
} 
```

经过

```
public void bar() {
    ...
    int foo = someMethod();
    ...
    baz(foo);
}

private void baz(int foo) {
   ...
   someOtherMethod(foo);
   ...
} 
```

另一个也许更好的选择是从头开始。因为使用大量静态变量的多线程代码可能不值得保留，并且可能包含许多其他错误或不良做法。

# asp.net - 在 asp.net 中使用 dday.ical 连接到 icloud 日历

> ID：13879144
> 
> 赞同：2
> 
> 时间：2012-12-14T12:57:03.247
> 
> 标签：asp.net

我正在尝试使用 DDay.iCal.iCalendar.LoadFromUri 连接到 caldav icloud 日历，但我没有看到任何结果，并且应用程序崩溃并返回空声明

数字作为新的 DDay.iCal.iCalendarCollection

```
 ical = DDay.iCal.iCalendar.LoadFromUri(New Uri("https://p04-caldav.icloud.com/"), "username", "password") 
```

# facebook-like - 将应用程序添加到业务页面（在个人帐户内）

> ID：13879145
> 
> 赞同：1
> 
> 时间：2012-12-14T12:57:03.537
> 
> 标签：facebook-like, facebook-javascript-sdk

对于客户，我们使用我们的 Facebook 工具，该工具允许在企业 facebookpage 上发布和监控。不幸的是，当我想以他们的企业帐户登录时收到错误消息：

要访问此页面，您需要从使用 Facebook 作为您的页面切换到使用 facebook 作为您自己。

见：http: [//imageshack.us/photo/my-images/233/screenshot20121214at125.png/](http://imageshack.us/photo/my-images/233/screenshot20121214at125.png/)

我当然不希望那样。我的企业和个人账户需要分开。有谁知道如何解决这个问题？删除并开始新的业务页面不是一种选择（10.000+ 喜欢）

# facebook-graph-api - Graph API Explorer 的 FQL 查询：comments_list 只有最近的评论

> ID：13879147
> 
> 赞同：3
> 
> 时间：2012-12-14T12:57:25.030
> 
> 标签：facebook-graph-api, stream, facebook-fql, facebook-comments

我目前正在尝试归档一个超过 10,700 条评论的评论线程。我正在尝试生成评论列表，所以我的搜索查询是

```
SELECT comments.comment_list FROM stream WHERE post_id = "<ThePostID>" 
```

但是，返回的唯一评论是最近的评论，即当您在群组墙中看到帖子时看到的评论。只有最新的49！即使是`LIMIT 500`黑客也没有帮助。有没有办法访问旧评论？

# windows-phone-7 - 是什么让 WP7 应用与众不同

> ID：13879150
> 
> 赞同：1
> 
> 时间：2012-12-14T12:57:38.867
> 
> 标签：windows-phone-7

我有一个应用程序，我复制了整个文件夹并继续编辑它，将其变成一个新应用程序。

现在，在测试期间，如果我调试第一个应用程序（我们称之为父应用程序），然后继续调试第二个应用程序（子应用程序），则父应用程序不再存在。它已被子应用程序取代，反之亦然。

深入研究这一点，我继续更改一些属性。我更改了装配信息以使其适合它，更改了 GUID 和所有内容。

唯一保持不变的数据是程序集名称。两个应用程序的程序集名称相同，因为更改它有点棘手，因为如果我这样做会出现调试器错误。

我的问题是是什么让一个应用程序独一无二，我如何才能同时安装这两个应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:24:33.553

Apparently, an app is considered unique based on the ProductID="{XXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX}" line found in the WPManifest.xml.

This line can't be found in the Properties, and can only be found in the mentioned xml.

# objective-c - 睡眠后可可 NSTimer

> ID：13879154
> 
> 赞同：0
> 
> 时间：2012-12-14T12:57:52.937
> 
> 标签：objective-c, cocoa, nstimer, standby

在我的 Cocoa 应用程序中，我想在 N 分钟后得到一个回调，我正在使用 NSTimer 这样做。

然而问题是，如果计算机进入睡眠状态（或时间设置为未来时间）并在定时器应该触发后唤醒，它永远不会触发。

确保在至少 N 分钟后收到回调的正确策略是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:07:39.000

使用此方法：

```
- (void)setFireDate:(NSDate *)date; 
```

**例子**

```
NSDate* fireDate= [[NSDate date] dateByAddingTimeInterval: N*60.0];
[timer setFireDate: fireDate]; 
```

# vba - 运行 VBA 代码时出现错误号 1004

> ID：13879156
> 
> 赞同：-1
> 
> 时间：2012-12-14T12:57:55.220
> 
> 标签：vba, excel, excel-2007

我在 Excel 2007 中运行 VBA 代码。我得到了上面提到的运行/应用程序错误 1004。

我的代码是

```
Public Sub LblImport_Click()
Dim i As Long, j As Long
Dim vData As Variant, vCleanData As Variant, vFile As Variant, sMarket As String
Dim wbkExtract As Workbook, sLastCellAddress As String, month As String
Dim cnCountries As New Collection

Application.ScreenUpdating = False

'   Get the name of the Dataview Extract file to transform and the market name

vFile = "D:\DRX\" & "Norvasc_Formatted.xlsx"

sMarket = "Hypertension"

ThisWorkbook.Worksheets("Control").Range("TherapeuticMarket").Value = "Hypertension"

'   Clear all existing data from this workbook

ThisWorkbook.Worksheets("RawData").Cells.ClearContents

'   Create labels in Raw Data Sheet

ThisWorkbook.Worksheets("RawData").Cells(1, 1).Value = "Therapy Market"
ThisWorkbook.Worksheets("RawData").Cells(1, 2).Value = "Country"
ThisWorkbook.Worksheets("RawData").Cells(1, 3).Value = "Brand"
ThisWorkbook.Worksheets("RawData").Cells(1, 4).Value = "Corporation"
ThisWorkbook.Worksheets("RawData").Cells(1, 5).Value = "Molecule"

'   Open Dataview extract, copy and clean data

Set wbkExtract = Workbooks.Open(vFile)
i = 2
Do While wbkExtract.ActiveSheet.Cells(1, i).Value <> ""

    If UCase(Mid(wbkExtract.ActiveSheet.Cells(1, i).Value, 1, 3)) = "TRX" Then
        month = Split(wbkExtract.ActiveSheet.Cells(1, i).Value, "/")(1)
        If Len(month) = 1 Then
            month = "0" + month
        End If
        ThisWorkbook.Worksheets("RawData").Cells(1, i + 4).Value = Mid(wbkExtract.ActiveSheet.Cells(1,     i).Value, 1, 10) + month + "/" + Mid(Split(wbkExtract.ActiveSheet.Cells(1, i).Value, "/")(2), 3, 2)
    End If
    If UCase(Mid(wbkExtract.ActiveSheet.Cells(1, i).Value, 1, 3)) = "LCD" Then
        month = Split(wbkExtract.ActiveSheet.Cells(1, i).Value, "/")(2)
        If Len(month) = 1 Then
            month = "0" + month
        End If
        ThisWorkbook.Worksheets("RawData").Cells(1, i + 4).Value = Mid(wbkExtract.ActiveSheet.Cells(1, i).Value, 1, 14) + month + "/" + Mid(Split(wbkExtract.ActiveSheet.Cells(1, i).Value, "/")(3), 3, 2)
    End If
    i = i + 1
Loop
wbkExtract.ActiveSheet.Cells(1, 1).EntireRow.Delete
vData = wbkExtract.ActiveSheet.Cells(1, 1).CurrentRegion.Value
wbkExtract.Close savechanges:=False
vCleanData = CleanRawData(vData, sMarket)
sLastCellAddress = ThisWorkbook.Worksheets("RawData").Cells(UBound(vCleanData, 1) + 1, UBound(vCleanData, 2)).Address(RowAbsolute:=False, ColumnAbsolute:=False)
ThisWorkbook.Worksheets("RawData").Range("A2:" & sLastCellAddress).Value = vCleanData

'   Get List of Unique Countries

On Error Resume Next

For i = 1 To UBound(vCleanData, 1)
    cnCountries.Add vCleanData(i, 2), vCleanData(i, 2)
Next i

On Error GoTo 0

ThisWorkbook.Worksheets("Market").Cells(1, 1).CurrentRegion.Clear
ThisWorkbook.Worksheets("Market").Cells(1, 1).Value = "Country"
ThisWorkbook.Worksheets("Market").Cells(1, 2).Value = "Group 1"
ThisWorkbook.Worksheets("Market").Cells(1, 3).Value = "Group 2"
ThisWorkbook.Worksheets("Market").Cells(1, 4).Value = "Group 3"
ThisWorkbook.Worksheets("Market").Cells(1, 5).Value = "Group 4"
ThisWorkbook.Worksheets("Market").Range("A1:G1").Font.Bold = True

For i = 1 To cnCountries.Count
    ThisWorkbook.Worksheets("Market").Cells(i + 1, 1).Value = cnCountries.Item(i)
Next i

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T21:45:33.390

听起来像是损坏的代码缓存。

我以前在旧格式 (xls) 工作簿中看到过这样的错误，这可能是整个文件存在问题的迹象。

首先尝试@Scott Holtzman 建议的编译选项。在某些情况下，我看到重新编译不起作用，如果发生这种情况，只需通过更改代码来强制编译。通常一个微不足道的改变就足够了。

如果这不起作用，那么（以帮助诊断损坏问题）尝试将代码复制到新工作簿中，看看那里会发生什么。如果它在新工作表中运行，那么我不会在它上面浪费更多时间而只是重建工作表，相信我，它会比解决你拥有的工作表更快。

# c# - 在 Windows 8 中生成地图应用程序的 URL

> ID：13879163
> 
> 赞同：1
> 
> 时间：2012-12-14T12:58:17.763
> 
> 标签：c#, windows-8, geolocation, bing-maps

我有该位置的坐标，我想在 Windows 8 中生成一个 URL / 地图请求，以便根据坐标位置显示给定位置。这可能吗，如果是的话，你有什么想法吗；）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T21:45:57.917

通过[LaunchUriAsync](http://msdn.microsoft.com/en-us/library/windows/apps/Hh701480.aspx)使用协议激活。检查[地图应用程序的 Uri 方案](http://msdn.microsoft.com/en-us/library/windows/apps/jj635237.aspx)以查看格式化 URI 的各种选项

例如，

```
await Windows.System.Launcher.LaunchUriAsync(new Uri("bingmaps:?cp=40.726966~-74.006076")); 
```

打开以纽约市为中心的地图应用程序。

# javascript - 在 Android Webview 中预加载 Javascript

> ID：13879164
> 
> 赞同：2
> 
> 时间：2012-12-14T12:58:18.913
> 
> 标签：javascript, android, android-listview, android-webview

我正在使用一个自定义列表视图，其中包含一些组件，如图像视图、文本视图和 Web 视图。我正在使用列表视图，因为数据不是固定的，并且在每次单击项目后都会更改。因此，由于我使用的是列表视图的动态数据，我为此使用了 BaseAdapter。

在 WebView 中，我正在显示一些数学表达式。为此，我需要本地 Javascript：一切正常，但在 WebView 中加载 Javascript 大约需要 4 到 5 秒。之后，它开始渲染，所以显示输出的总时间是 5 到 6 秒。

我想减少这个时间。有什么方法可以在 WebView 中预加载 Javascript？

该`GetView()`方法每次都会创建一个 WebView 和其他组件的新实例，因此每次它都在加载 Javascript。

有什么方法可以让我使用预加载的 Javascript Webview？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-29T06:56:10.980

没有初始延迟的解决方案，但是可以通过缓存由 js 动态创建的 html 页面来避免滚动列表视图时加载页面的后续延迟。

您可以将每个结果（html 结果页面）与唯一的 id（根据要呈现的结果生成）相关联，并将动态创建的 html 页面缓存在 hashmap 或 lru 缓存中（完全创建的页面可以在 onPageFinished 回调后访问）针对此 id。当列表向上或向下滚动时，无需再次通过js动态创建页面，您可以获取已创建的缓存html页面（现在为静态页面）并加载静态页面。这减少了加载页面的延迟并节省了电池

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:38:32.233

我认为你应该通过一个库 JAVA / Android 来避免使用 webview 从而提高性能。这是一个解决数学表达式问题的主题：[MathML and Java](https://stackoverflow.com/questions/1784786/mathml-and-java)

# linux - 在 shell 中将 2 个文件加入 1 个文件

> ID：13879169
> 
> 赞同：0
> 
> 时间：2012-12-14T12:58:32.100
> 
> 标签：linux, file, shell, unix, join

如何在 shell 中加入 2 个文件，例如：

文件 1 -

```
server1          monthly      25
server2          monthly      24
server3          daily        21
server4          weekly       7
server5          weekly       7 
```

文件2 -

```
server1          monthly      5
server2          monthly      4
server3          daily        1
server4          weekly       2 
```

你能帮我得到这样的输出吗：

```
server1          monthly      25     5
server2          monthly      24     4
server3          daily        21     1
server4          weekly       7      2
server5          weekly       7      0 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T13:01:13.460

这是一份工作`join`：

```
$ join -a 1 -a 2 -e 0 -o '1.1 1.2 1.3 2.3' file1 file2
server1 monthly 25 5
server2 monthly 24 4
server3 daily 21 1
server4 weekly 7 2
server5 weekly 7 0 
```

管道到`column -t`格式良好的表格：

```
$ join -a 1 -a 2 -e 0 -o '1.1 1.2 1.3 2.3' file file2 | column -t 
server1  monthly  25  5
server2  monthly  24  4
server3  daily    21  1
server4  weekly   7   2
server5  weekly   7   0 
```

使用重定向运算符将其存储到新文件：

```
$ join -a 1 -a 2 -e 0 -o '1.1 1.2 1.3 2.3' file file2 | column -t > newfile 
```

解释：

```
-a            print unpairable lines from file FILENUM, where FILENUM is
              1 or 2, corresponding to FILE1 or FILE2

-e EMPTY      replace missing input fields with EMPTY

-o FORMAT     obey FORMAT while constructing output line 
```

`-a`用于显示行，例如`server 5..`in `file1`where no such line is found in`file2` `-e 0`替换任何空字段，并`0`用于`-o`格式化输出 where和mean等。 `1.1``file1 field 1``1.3``file1 field 3`

注意：`join`确实需要首先对文件进行排序*（在这种情况下它们已经是）*，因此通常与`sort`命令的使用结合使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T13:21:13.603

这是一种使用方法`awk`：

```
awk 'FNR==NR { a[$1,$2]=$3; next } { print $0, (a[$1,$2] ? a[$1,$2] : "0") | "column -t" }' file2 file1 
```

结果：

```
server1  monthly  25  5
server2  monthly  24  4
server3  daily    21  1
server4  weekly   7   2
server5  weekly   7   0 
```

解释：

> FNR==NR { ... } 是一个仅对参数列表中的第一个文件有效的构造
> 因此，对于第一个文件，我们将第一列和第二列添加到数组中，并将第三列作为值分配。'next' 只是强制 awk 读取下一行输入（因此，它会跳过处理其余代码）
> 一旦 awk 处理完第一个文件，它将移至第二个文件
> 
> awk 现在将打印出第二个文件中的每一行。在这个打印语句的末尾附加了一个称为三元运算符的运算符，该语句的形式为： ( x ? a : b )
> 它的意思很简单： if (x) then (a) else (b)。我本来可以写：

```
awk 'FNR==NR { a[$1,$2]=$3; next } { if (a[$1,$2]!=0) print $0, a[$1,$2]; else print $0, "0" }' file2 file1 | column -t 
```

...但是三元组很性感。

# xcode - Xcode 3 和 iOS 6

> ID：13879173
> 
> 赞同：2
> 
> 时间：2012-12-14T12:58:38.630
> 
> 标签：xcode

一个新手问题。我有 Xcode 3.2.6，我的 ipad 是 iOS 6.0。这个版本的 Xcode 似乎不支持 iOS 版本。我需要将我的 Xcode 升级到什么版本才能在运行 iOS 6 的设备上测试应用程序。

而且，我的第二个问题是我必须下载 .dmg 才能升级 Xcode。目前我正在运行雪豹10.6.8。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T12:59:57.997

对于 iOS 6，您需要 Xcode 4.5 和至少 Lion (10.7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T13:05:55.120

您需要 OS X Lion 10.7.4 或更高版本才能[从 AppStore 安装最新版本的 Xcode](https://itunes.apple.com/hr/app/xcode/id497799835?mt=12)。然后，您将能够使用 iOS 6.0 为您的设备构建应用程序。

# node.js - nodeenv : 尝试启动 env 时出错

> ID：13879180
> 
> 赞同：7
> 
> 时间：2012-12-14T12:59:09.957
> 
> 标签：node.js

尝试使用 nodeenv 启动虚拟环境时出现错误：

```
$ nodeenv env

 * Install node.js (0.8.16) ..Traceback (most recent call last):
  File "/usr/local/bin/nodeenv", line 9, in <module>
    load_entry_point('nodeenv==0.6.0', 'console_scripts', 'nodeenv')()
  File "/usr/local/lib/python2.7/dist-packages/nodeenv-0.6.0-py2.7.egg/nodeenv.py", line 494, in main
    create_environment(env_dir, opt)
  File "/usr/local/lib/python2.7/dist-packages/nodeenv-0.6.0-py2.7.egg/nodeenv.py", line 410, in create_environment
    install_node(env_dir, src_dir, opt)
  File "/usr/local/lib/python2.7/dist-packages/nodeenv-0.6.0-py2.7.egg/nodeenv.py", line 332, in install_node
    callit(['make'], opt.verbose, True, node_src_dir, env)
  File "/usr/local/lib/python2.7/dist-packages/nodeenv-0.6.0-py2.7.egg/nodeenv.py", line 263, in callit
    % (cmd_desc, proc.returncode))
OSError: Command make failed with error code 2 
```

在网上没有找到有关此错误的任何信息，您能给我一点帮助吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-15T00:10:49.700

好吧，通过使用详细模式得到它：

```
$ nodeenv env -v 
```

g++ 不见了

```
sudo apt-get install build-essential g++ 
```

解决它！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-28T05:41:58.293

除了 @denis89 提到的，在我添加 '-v' 选项后，我发现 nodeenv 报告：

'g++：内部编译器错误：被杀死（程序 cc1plus）'。

谷歌搜索后，我得出结论，机器的内存不足。因为我在 Vagrant 中运行 nodeenv，所以很容易像这样更改内存：

```
config.vm.provider "virtualbox" do |v|
    v.name = "working"
    v.memory = 2048
end 
```

愿这个答案能有所帮助。

# c# - C# 中的控制台路径是什么？

> ID：13879187
> 
> 赞同：1
> 
> 时间：2012-12-14T12:59:37.417
> 
> 标签：c#, path, console-application

我正在尝试在从单击按钮启动的控制台中显示文本。我想我需要输入我放置问号 Process.Start("????") 的控制台路径。如何找到控制台路径？

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Process.Start("????");
        Console.WriteLine("Adam");
        Console.Read();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T13:04:10.443

这是一个很好的例子：[http ://cboard.cprogramming.com/csharp-programming/130369-command-prompt-use-within-csharp-class-file.html#post973331](http://cboard.cprogramming.com/csharp-programming/130369-command-prompt-use-within-csharp-class-file.html#post973331)

代码：

```
string returnvalue = "";

// Starts the new process as command prompt
ProcessStartInfo info = new ProcessStartInfo("cmd.exe");
info.UseShellExecute = false;
info.RedirectStandardInput = true;
info.RedirectStandardOutput = true;
// Makes it so the command prompt window does appear
info.CreateNoWindow = true;

using (Process process = Process.Start(info))
{
    StreamWriter sw = process.StandardInput;
    StreamReader sr = process.StandardOutput;

    // This for loop could be used if you had a string[] commands where each string in commands
    // is it's own command to write to the prompt. I chose to hardcode mine in.
    //foreach (string command in commands)
    //{
    //    sw.WriteLine(command);
    //}
    sw.WriteLine("cd " + processPath);
    sw.WriteLine("perl process.pl");

    sw.Close();
    returnvalue = sr.ReadToEnd();
}

return returnvalue; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T13:02:43.783

您需要执行应用程序`cmd.exe`。但是 using`Controle.WriteLine`不会写入该控制台，`Console.ReadLine`也不会从该控制台读取。您必须重定向进程的输入和输出流以与启动的控制台应用程序进行交互。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T13:04:29.000

这是一个包装 AllocConsole() 的类：

```
/// <summary>Simple class to allow creation and destruction of Consoles.</summary>

public static class ConsoleManager
{
    #region public static Methods

    /// <summary>
    /// Creates a console output window, if one doesn't already exist.
    /// This window will receive all outputs from System.Console.Write()
    /// </summary>
    /// <returns>
    /// 0 if successful, else the Windows API error code from Marshal.GetLastWin32Error()
    /// </returns>
    /// <remarks>See the AllocConsole() function in the Windows API for full details.</remarks>

    public static int Create()
    {
        if (AllocConsole())
        {
            return 0;
        }
        else
        {
            return Marshal.GetLastWin32Error();
        }
    }

    /// <summary>
    /// Destroys the console window, if it exists.
    /// </summary>
    /// <returns>
    /// 0 if successful, else the Windows API error code from Marshal.GetLastWin32Error()
    /// </returns>
    /// <remarks>See the FreeConsole() function in the Windows API for full details.</remarks>

    public static int Destroy()
    {
        if (FreeConsole())
        {
            return 0;
        }
        else
        {
            return Marshal.GetLastWin32Error();
        }
    }

    #endregion  // public static Methods

    #region Private PInvokes

    [SuppressMessage( "Microsoft.Security", "CA2118:ReviewSuppressUnmanagedCodeSecurityUsage" ), SuppressUnmanagedCodeSecurity]
    [DllImport("kernel32.dll",SetLastError=true)]
    [return: MarshalAs( UnmanagedType.Bool )]
    static extern bool AllocConsole();

    [SuppressMessage( "Microsoft.Security", "CA2118:ReviewSuppressUnmanagedCodeSecurityUsage" ), SuppressUnmanagedCodeSecurity]
    [DllImport("kernel32.dll",SetLastError=true)]
    [return: MarshalAs( UnmanagedType.Bool )]
    static extern bool FreeConsole();

    #endregion  // Private PInvokes
} 
```

只需调用 ConsoleManager.Create()，然后您应该能够执行 Console.WriteLine()。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T13:07:10.623

你应该有**两个**项目。第一个是具有所有功能的*Windows 应用程序*，另一个应该是类型为“*控制台应用程序*”的项目。然后您应该在按钮的单击事件中执行第二个项目（您的控制台 application.exe）的输出。

问题是你没有这样称呼“ `Console.WriteLine`”的东西。简直是行不通。我的建议是使用 .NET Remoting 在两个不同的项目之间做人员。

**.NET 远程 IPC：**

[http://www.codeguru.com/csharp/csharp/cs_syntax/remoting/article.php/c9251/NET-Remoting-Using-a-New-IPC-Channel.htm](http://www.codeguru.com/csharp/csharp/cs_syntax/remoting/article.php/c9251/NET-Remoting-Using-a-New-IPC-Channel.htm)

希望能帮助到你！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-14T13:09:34.950

您需要做的是从 Windows API 中获取控制台。这将创建一个可以输出和读取等的控制台应用程序的新实例。

```
public partial class Form1 : Form
{
    [DllImport("kernel32.dll", SetLastError = true)]
    internal static extern int AllocConsole();

    [DllImport("kernel32.dll", SetLastError = true)]
    internal static extern int FreeConsole();

    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        int alloc = AllocConsole(); // Grab a new console to write to
        if (alloc != 1)
        {
            MessageBox.Show("Failed");
            return;
            }
        Console.WriteLine("test");

        Console.WriteLine("Adam");
        string input = Console.ReadLine();
        Console.WriteLine(input);
        // Do other funky stuff

        // When done
        FreeConsole();
    }
} 
```

# java - Cassandra 处理历史数据的最佳方式？

> ID：13879191
> 
> 赞同：4
> 
> 时间：2012-12-14T12:59:44.873
> 
> 标签：java, cassandra, hector

我正在使用 Cassandra 来存储历史数据。它是各种对象的集合，它们会及时改变它的价值。

列族：对象类型
行：对象 ID
列名：时间戳
列值：给定时间的值

有时，数据会变得“旧”，而不是删除它，我想将其存储在其他地方（如另一个列族）或以某种方式“标记”而不与其余数据一起检索。

哪种方法最快？目前我正在使用 Hector 执行此操作：
1.读取数据（使用 SliceQuery） 2.
将数据写入另一个列族（使用 ColumnFamilyUpdater） 3.
删除旧数据（也使用 ColumnFamilyUpdater）

不确定这是否是最佳做法，但我对 Cassandra 很陌生……
谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:22:55.247

您的数据不仅会发生在 HDD 上，还会消耗 JVM Heap，因为行布隆过滤器总是在启动时读取 - 记住这一点很重要。

您的解决方案很好 - 您需要读取此数据并将其移动到其他地方。现在有两种选择：

1.  生成反向索引，以便您可以快速访问旧数据。
2.  查看所有数据以查找旧记录。如果您的数据集被划分为多个 Cassandra 节点，请考虑使用 Hadoop Map Reduce

第一个解决方案将提供对旧数据的快速访问，但每个插入操作都必须更新索引，这在 Cassandra 情况下仍然非常快。

第二种解决方案在日常使用期间不需要额外的插入，但在移动旧数据时需要进行全表扫描。这是完美的，如果你可以在晚上运行这样的工作。

# php - 删除 php 中第一次出现的斜杠

> ID：13879199
> 
> 赞同：0
> 
> 时间：2012-12-14T13:00:07.473
> 
> 标签：php, string, relative-path

我有这样的代码..

```
$dir['subdir']; 
```

它返回这样的值

```
/2012/12/14 
```

现在我想删除第一个斜杠..

我的意思是我需要这样

```
2012/12/14 
```

谁能帮我？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T13:00:59.700

您可以将该`ltrim`功能用作：

```
$result = ltrim( ltrim($dir['subdir']), '/'); 
```

内部 ltrim 删除前导空格，外部 ltrim 根据`/`需要删除。

# java - 骆驼拆分器返回 ExpressionNode

> ID：13879208
> 
> 赞同：2
> 
> 时间：2012-12-14T13:00:46.187
> 
> 标签：java, apache-camel, dsl

我有路线：

```
 from(SU_NAME)
        .choice()
            .when(STATUS_IS_OK)
                .to("xslt:xsl/RemoveNode.xsl")
                    .split().tokenizeXML("Event", "Header").to(XP_NAME)
            .otherwise()
                .dynamicRouter(method(router, "slip"))
    .end(); 
```

如果我删除分离器，我一切正常，但在我的路线中使用它会给我：

```
java.lang.Error: Unresolved compilation problem: 
The method otherwise() is undefined for the type ExpressionNode 
```

我需要分离器作为路线的一部分，你能帮帮我吗？我知道应该选择 ChoiceDefinition 而不是 ExpressionNode，而不是如何修改代码来获得它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T13:16:47.830

请参阅此常见问题解答 - 为什么我不能在 Java Camel 路由中使用 when/otherwise？ [http://camel.apache.org/why-can-i-not-use-when-or-otherwise-in-a-java-camel-route.html](http://camel.apache.org/why-can-i-not-use-when-or-otherwise-in-a-java-camel-route.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:39:38.990

乍一看，您的“拆分”似乎并未终止。尝试这个：

```
from(SU_NAME)
    .choice()
        .when(STATUS_IS_OK)
            .to("xslt:xsl/RemoveNode.xsl")
            .split().tokenizeXML("Event", "Header")
                .to(XP_NAME)
            .end() /* <-- explicitly end the split here, that should help */
        .otherwise()
            .dynamicRouter(method(router, "slip"))
     .end(); 
```

# ios - 如何将新的谷歌地图应用程序与 iOS 应用程序集成

> ID：13879211
> 
> 赞同：6
> 
> 时间：2012-12-14T13:00:54.063
> 
> 标签：ios, google-maps, ios6, mapkit, google-maps-sdk-ios

[谷歌地图](https://itunes.apple.com/au/app/google-maps/id585027354?mt=8)现在可以在 iOS 6 的 Appstore 中使用。我有一个应用程序，它利用 MAPKIT 和 WebView 来显示使用谷歌网络服务的行车路线。为了在 Native Apple MAP 应用程序中显示路线，我使用与此类似的代码..

```
MKMapItem *mapItem = [[MKMapItem alloc]initWithPlacemark:place];
NSDictionary *options = @{
MKLaunchOptionsDirectionsModeKey:MKLaunchOptionsDirectionsModeDriving
};
[mapItem openInMapsWithLaunchOptions:options]; 
```

我想在用户设备上安装的新谷歌地图应用程序中向用户显示路线，将其 UI 嵌入到我的应用程序的视图中。

请指导我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T13:12:34.347

Goole 发布了适用于 IOS 6.0 及更高版本的最新 API。

为此，请执行以下步骤

1.  您必须注册您的应用程序并从[Map IOS access](https://developers.google.com/maps/ios-access)获取密钥。
2.  有关更多详细信息，请参阅以下链接 [在 iOS 6 应用程序中添加谷歌地图的新方法](https://developers.google.com/maps/documentation/ios/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-14T13:10:42.097

为了在 GoogleMaps 应用程序中显示路线，使用新的 GoogleMaps URL 方案，如下所示：

```
comgooglemaps://?saddr=Google+Inc,+8th+Avenue,+New+York,+NY&daddr=John+F.+Kennedy+International+Airport,+Van+Wyck+Expressway,+Jamaica,+New+York&directionsmode=transit 
```

取自[文档](https://developers.google.com/maps/documentation/ios/urlscheme)应该对您有所帮助。从那里浏览一下，您还会注意到 Google 已经为新的 GoogleMaps 发布了一个 SDK，访问令牌正在缓慢推出。文档

*   似乎切断了我答案的结尾，但@Hi Ren 在最后填写了指向新[SDK](https://developers.google.com/maps/documentation/ios/intro)文档的链接。

# javascript - Javascript将返回的数组分配给另一个包含所有元素的数组

> ID：13879215
> 
> 赞同：0
> 
> 时间：2012-12-14T13:00:59.120
> 
> 标签：javascript, jquery

在 $(document).ready 中，我在一个函数中发出 ajax 请求，该函数返回我添加到数组中的 json 数据。我正在从该函数返回数组，但是当我尝试将返回的内容分配给另一个数组时，我的警报没有显示一个充满值的数组。

```
 function retrieveGroupNames() {
        var rows = new Array();
        $.ajax({
            type: "POST",
            url: '@Url.Action("LookUpGroupName", "UserManager")',
            dataType: "json",
            data: {},
            success: function (data) {
                for (var i = 0; i < data.length; i++) {
                    rows[i] = {
                        data: data[i],
                        value: data[i].group,
                        result: data[i].group
                    }
//                    alert(data[i].group);
                    //                    alert(data[1].group);
                } // end of for loop
                //                alert(rows[1].value);

            } // end of success
        });   // end of ajax
//        alert(rows); data here
        return rows;

    } // end of function

$(document).ready(function () {
        chkSelection();
        var rows = [];
        rows = retrieveGroupNames();
        alert(rows);
    }); 
```

请帮忙？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T13:02:24.360

AJAX 是异步的。你不能返回依赖于请求完成的东西。您需要改用回调：

```
function retrieveGroupNames(callback) {
    $.ajax({
        type: "POST",
        url: '@Url.Action("LookUpGroupName", "UserManager")',
        dataType: "json",
        data: {},
        success: function(data) {
            var rows = [];
            for(var i = 0; i < data.length; i++) {
                rows[i] = {
                    data: data[i],
                    value: data[i].group,
                    result: data[i].group
                }
            }
            callback(rows);
        }
    });
}

$(document).ready(function() {
    chkSelection();
    retrieveGroupNames(function(rows) {
        alert(rows);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T13:43:45.567

除了 ThiefMaster 的答案中提供的回调之外，另一个选项是使用[`$.Deferred`objects](http://api.jquery.com/category/deferred-object/)。使用 deferreds 可以让您控制异步处理（例如 ajax 调用）期间应该发生的时间和内容。

```
function retrieveGroupNames() {
    // create a deferred object
    var deferred = new $.Deferred();

    $.ajax({
        ...
        success: function(data) {
            var rows = [];
            for(var i = 0; i < data.length; i++) {
                rows[i] = {
                    data: data[i],
                    value: data[i].group,
                    result: data[i].group
                }
            }
            // resolve the deferred and pass the rows as data
            deferred.resolve(rows);
        }
    });

    // return a promise
    return deferred.promise();
}

$(document).ready(function () {
    // use the when...then syntax to consume the deferred function
    $.when(retrieveGroupNames()).then(function (rows) {
        // do whatever you want with rows 
    });
}); 
```

另请注意，`$.ajax`它本身已经返回了一个承诺，所以你可以`return $.ajax({...});`在你的`retrieveGroupNames`函数中说。

# spring-security - Spring Security 和 CAS

> ID：13879220
> 
> 赞同：0
> 
> 时间：2012-12-14T13:01:11.270
> 
> 标签：spring-security, single-sign-on, cas

我有一些问题取决于集成 Spring Security 3 和 CAS 技术。我知道 SS 让我能够使用一些提供程序和过滤器设置 CAS 身份验证。但我不`t see examples that describe how can I use my custom login form or page. CAS gives options to setup custom design of login page, but this solution isn`适合我。我需要在我的应用程序中实现弹出登录表单。这是要求，我不能改变任何东西。

所以，我的问题是：如何将 Spring Security 和 CAS 与我的自定义登录表单/页面集成？请给我一些关于这个问题的例子或主题链接。

或者也许我不能使用 CAS。也许一些 OpenId 技术？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:37:46.793

CAS的基本原理之一：实际应用程序对用户密码一无所知。因此，如果您绝对想拥有带有密码的登录页面，那么请考虑使用其他一些技术。例如，如果您可以为每个应用程序添加一个子域，那么基于域 coockie 的身份验证就足够了（考虑使用 docs.google.com、mail.google.com 等的 Google...）

# haskell - 为什么下面的 ReaderT String IO 会丢失一个 IO 动作？

> ID：13879225
> 
> 赞同：1
> 
> 时间：2012-12-14T13:01:29.650
> 
> 标签：haskell

```
module Main (main) where

import Control.Monad.Reader

p1 :: String -> IO ()
p1 = putStrLn . ("Apple "++)

p2 :: String -> IO ()
p2 = putStrLn . ("Pear "++)

main :: IO ()
main = do
    p1 "x"
    p2 "y"
    r "z"

r :: String -> IO ()
r = do
    p1
    p2 
```

它打印：

苹果 x 梨 y 梨 z

为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T13:12:52.217

问题出在`r`. 给定以下`Reader`monad 的定义：

```
instance Monad ((->) e) where
    return = const
    f >>= g = \x -> g (f x) x 
```

我们可以简化`r`：

```
r = p1 >> p2    
  = (>>=) p1 (\_ -> p2)    
  = (\f g x -> g (f x) x) p1 (\_ -> p2)    
  = \x -> (\_ -> p2) (p1 x) x    
  = \x -> p2 x 
```

这也表明`Reader`'s`(>>)`只是`const`一个更具体的类型。

如果要分发环境，然后执行这两个动作，则必须将应用的结果绑定`p1`到环境中，例如：

```
r = do a1 <- p1
       a2 <- p2
       return (a1 >> a2) 
```

或使用`Applicative`：

```
r = (>>) <$> p1 <*> p2 
```

* * *

扩展`Reader`部分，`Control.Monad.Reader`提供了`Reader`.

*   隐含的`(->) e`，这是函数`r`使用的
*   monad 转换`ReaderT e m`器，一个新的类型的函数包装器`e -> m a`
*   显式`Reader e`, 定义`ReaderT`为`ReaderT e Identity`

没有任何进一步的信息，将使用隐式`(->) e`。为什么？

块的整体类型`do`由最后一个表达式给出，它也被限制`Monad m => m a`为 some `m`and的形式`a`。

回头看`r`，很明显该`do`块具有由and的类型`String -> IO ()`给出的类型。它也需要是. 现在，统一这两种类型：`r``p2``String -> IO ()``Monad m => m a`

```
m = (->) String
a = IO () 
```

这通过选择匹配`(->) e`monad 实例`e = String`。

* * *

作为 monad 转换器，`ReaderT`负责内部管道以确保内部 monad 的操作正确排序和执行。要选择`ReaderT`，必须明确提及它（通常在类型签名中，但将类型固定为 的函数`ReaderT`，例如`runReaderT`，也可以使用）：

```
r :: ReaderT String IO ()
r = do ? p1
       ? p2

r' :: String -> IO ()
r' = runReaderT r 
```

这带来了另一个问题，`p1`并且`p2`有一个`String -> IO ()`与 required 不匹配的type `ReaderT String IO ()`。

临时解决方案（专为这种情况量身定制）只是应用

```
ReaderT :: (e -> m a) -> ReaderT e m a 
```

为了获得更通用的东西，`MonadIO`类型类可以将`IO`动作提升到转换器中，并且`MonadReader`类型类允许访问环境。只要变压器堆栈中的某个位置`IO`（或分别）存在，这两种类型的类就可以工作。`ReaderT`

```
lift' :: (MonadIO m, MonadReader a m) => (a -> IO b) -> m b
lift' f = do
    env <- ask     -- get environment
    let io = f env -- apply f to get the IO action
    liftIO io      -- lift IO action into transformer stack 
```

或更简洁地说：

```
lift' f = ask >>= liftIO . f 
```

* * *

关于您在评论中的问题，您可以通过这种方式实现相关实例：

```
newtype ReaderT e m a = ReaderT { runReaderT :: e -> m a }

instance Monad m => Monad (ReaderT e m) where
    return  = ReaderT . const . return
      -- The transformers package defines it as "lift . return".
      -- These two definitions are equivalent, though.
    m >>= f = ReaderT $ \e -> do
        a <- runReaderT m e
        runReaderT (f a) e

instance Monad m => MonadReader e (ReaderT e m) where
    ask        = ReaderT return
    local  f m = ReaderT $ runReaderT m . f
    reader f   = ReaderT (return . f) 
```

实际的类型类可以在`mtl`包中找到（[包](http://hackage.haskell.org/package/mtl-2.1.2)，[类型类](http://hackage.haskell.org/packages/archive/mtl/2.1.2/doc/html/Control-Monad-Reader.html)），包中的新类型和`Monad`实例`transformers`（[包](http://hackage.haskell.org/package/transformers-0.3.0.0)，[类型类](http://hackage.haskell.org/packages/archive/transformers/0.3.0.0/doc/html/Control-Monad-Trans-Reader.html)）。

* * *

至于做一个`e -> m a` `Monad`实例，你不走运。`Monad`需要 kind 的类型构造函数`* -> *`，这意味着我们正在尝试做这样的事情（在伪代码中）：

```
instance Monad m => Monad (/\a -> e -> m a) where
    -- ... 
```

其中`/\`代表类型级 lambda。然而，最接近类型级别 lambda 的东西是类型同义词（在我们可以创建类型类实例之前必须完全应用它，所以这里没有运气）或类型族（不能用作类型的参数类）。使用类似的东西再次`(->) e . m`导致`newtype`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T13:11:41.223

我们先重写一下body

```
r :: String -> IO ()
r = do
    p1
    p2 
```

使用`(>>)`,

```
r = p1 >> p2 
```

所以`p1`必须有`m a`一些类型`Monad` `m`，并且`p2`必须有`m b`相同的类型`m`。

现在，

```
p1, p2 :: String -> IO () 
```

其中的顶级类型构造函数是函数箭头`(->)`。因此`Monad`使用的 in`r`必须是

```
(->) String 
```

[aka reader monad]的`Monad`实例是`(->) e`

```
instance Monad ((->) e) where
    -- return :: a -> (e -> a)
    return = const
    -- (>>=) :: (e -> a) -> (a -> (e -> b)) -> (e -> b)
    f >>= g = \x -> g (f x) x 
```

因此，

```
p1 >> p2 = p1 >>= \_ -> p2
         = \x -> (\_ -> p2) (p1 x) x   -- apply (\_ -> p2) to (p1 x)
         = \x -> p2 x                  -- eta-reduce
         = p2 
```

所以这只是一种复杂的写作方式

```
r = p2 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T13:20:31.767

对于`r`您使用`(->) String (IO ())` which is a`Monad ((->) String)`返回类型的值`IO ()`。

您没有使用`ReaderT`任何单子变压器。你使用了一个返回不同单子的单子。它意外地编译并运行，几乎符合您的预期。

您需要使用`runReaderT`and `lift`(or `liftIO`) 来实现`r`我认为您正在尝试实现的目标。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T13:07:25.123

当您在 r 中调用 p1 和 p2 时，您省略了参数。然后，您编写的内容将被解释为无点表示法，因此只有第二个 IO 操作有参数。这有效：

```
r :: String -> IO ()
r x = do
    p1 x
    p2 x 
```

要了解为什么会发生这种情况，请考虑您最初编写的内容相当于

```
r = p1 >> p2 
```

编译器将其解释为

```
r x = (p1 >> p2) x 
```

这不是你想要的。

# python - SVG路径计算库

> ID：13879230
> 
> 赞同：6
> 
> 时间：2012-12-14T13:02:13.083
> 
> 标签：python, svg

我正在寻找一个带有 Python 绑定的库，它可以对 SVG 路径进行计算，例如计算长度，并找到路径上某个点的坐标（即，点的坐标是路径长度的 24.4% ）。

周围已经有东西了吗？

C 库也是可以接受的，因为我可以轻松地制作自己的 Python 绑定。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-20T13:23:05.953

好的，所以我写了它，并将它作为一个库发布。

[http://pypi.python.org/pypi/svg.path](http://pypi.python.org/pypi/svg.path)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T13:41:51.297

试试“Inkscape”（IMO 最好的 SVG 编辑器），看看他们的源代码，看看他们是怎么做的——也许你可以重用他们的库（他们也有一个嵌入式 Python 脚本引擎）而无需太多返工。

# string - PostgreSQL - 什么是符号 ||| 做？

> ID：13879231
> 
> 赞同：4
> 
> 时间：2012-12-14T13:02:14.540
> 
> 标签：string, postgresql, concatenation, operator-keyword

我找到了这样的代码：

```
SELECT 'a' ||| 'b'; 
```

我试图用谷歌搜索这个运算符的含义，但谷歌忽略了符号数据。SymbolHound 没有返回任何有意义的结果。

我测试了一台 PostgreSQL 8.4 服务器和 9.1 服务器。

在 PostgreSQL 8.4 中，它与字符串连接相同，但有一个区别：

```
SELECT 'a' ||| 'b'; -- 'ab'
SELECT 'a' || 'b'; -- 'ab'

SELECT 'a' ||| NULL; -- 'a'
SELECT 'a' || NULL; -- NULL 
```

在 PostgreSQL 9.1 中，没有定义这个操作符。

```
SELECT 'a' ||| 'b'; -- ERROR
SELECT 'a' || 'b'; -- 'ab'
SELECT 'a' || NULL; -- NULL 
```

这是在某处正式记录的吗？这是特定于配置的吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-14T13:25:07.080

`|||`不是 PostgreSQL 附带的标准运算符；[正如您在此处看到的，库存 8.4 中也不存在它](http://sqlfiddle.com/#!11/d41d8/20)。我会说有人[`CREATE OPERATOR`](http://www.postgresql.org/docs/current/static/sql-createoperator.html)在您的 8.4 安装中安装了它。

尝试在 8.4 DB 中使用`psql`命令`\do`（即“描述运算符”），或者执行`pg_dump`并检查转储中的运算符及其相关函数的定义。

`select * from pg_operator where oprname = '|||';`也可能有用。请注意该`oprcode`列，它显示了实现运算符的函数。

# spring - spring ws动态wsdl - 没有操作，无法更改请求响应元素名称，该怎么办？

> ID：13879232
> 
> 赞同：2
> 
> 时间：2012-12-14T13:02:18.797
> 
> 标签：spring, soap, wsdl, spring-ws

问题是，spring ws 不会生成操作，其他人无法通过该 wsdl 生成代码。我将其配置如下：

```
 <sws:dynamic-wsdl id="executeFunnyQuery"
                portTypeName="XYExecuteFunnyQuery"
                locationUri="/ws/"
                targetNamespace="http://www.namespace.eu/sch/xsd/v1/fnmessages"
                requestSuffix="XYExecuteFunnyQuery"
                responseSuffix="ZYExecuteFunnyQuery"
                >
<sws:xsd location="/XYMessagesDictionary/XYExecuteFunnyQuery.xsd"/>
<sws:xsd location="/ZYMessagesDictionary/ZYExecuteFunnyQuery.xsd"/> 
```

我知道如果我可以更改元素名称，一切都会好起来的。但我不能，它们是那样给我的，我不能修改它们。响应和请求元素名称的区别仅在于它们的前缀 - 第一个字母，因为 XYExecuteFunnyQuery 是请求，而 ZYExecuteFunnyQuery 是响应。我试图将完整的元素名称放在请求和响应后缀的地方......遗憾的是，这似乎没有奏效。

我可以在没有后缀-前缀 mambo-jambo 的情况下告诉我这是我的请求，这是响应，现在请生成！:)

# android - 将可打包对象传递给意图时丢失信息

> ID：13879235
> 
> 赞同：2
> 
> 时间：2012-12-14T13:02:29.277
> 
> 标签：android, android-intent, parcelable

我想将对象（parcelable）的数组列表传递给意图以对其进行处理。arrayList 包含 3 个对象，当我将它传递给下一个意图时，第三个对象是丢失的，所以当我尝试通读列表时我有一个空指针

```
telecharger.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

         recupParcours= new GetParcours(idLangue);
         recupParcours.start();
         try {
            recupParcours.join();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
         for(Parcours parcours: recupParcours.getListeParcours()) 
                System.out.println("Parcours: " + parcours);
         Intent intent = new Intent();
         intent.putParcelableArrayListExtra("listeParcoursADL",recupParcours.getListeParcours());

        intent.setClass(ChoiceLanguage.this,Test.class);

        startActivity(intent);

        }
    }); 
```

在 logcat 我可以显示

```
 12-14 13:53:00.395: I/System.out(10884): Parcours: com.dev.entity.Parcours@41d6f130
12-14 13:53:00.395: I/System.out(10884): Parcours: com.dev.entity.Parcours@41e05398
12-14 13:53:00.395: I/System.out(10884): Parcours: com.dev.entity.Parcours@41e07e00 
```

现在在测试班

```
public class Test extends Activity {
    @Override
    public void onCreate(Bundle icicle) {

        super.onCreate(icicle);
        setContentView(R.layout.download_parcours);
          ArrayList<Parcours>listeParcours= getIntent().getParcelableArrayListExtra("listeParcoursADL");
         for(Parcours parcours: listeParcours) 
            System.out.println("Parcours: " + parcours);
    }
} 
```

我可以在日志中显示：

```
 12-14 13:53:12.223: I/System.out(10884): Parcours: com.dev.entity.Parcours@41bf03e8
12-14 13:53:12.223: I/System.out(10884): Parcours: com.dev.entity.Parcours@41ba5310
12-14 13:53:12.223: I/System.out(10884): Parcours: null 
```

我不知道为什么会跳过最后一个对象。此外，这条线：

```
 intent.putParcelableArrayListExtra("listeParcoursADL",recupParcours.getListeParcours()); 
```

下一个意图需要大约 5 秒才能显示，没有它是瞬时的

跑酷代码

```
package com.dev.entity;

import java.util.ArrayList;

import android.os.Parcel;
import android.os.Parcelable;

public class Parcours  implements Parcelable{

 String parcours_lang_info_name;
 String parcours_lang_info_desc;
 int parcours_id;
 String parcours_image;
 int parcours_map;
 int parcours_realite_augmentee;
 int parcours_qrcode;
 int parcours_visite_manuelle;
 ArrayList<POI> listesPOI;
 public Parcours() {
    super();
    listesPOI= new ArrayList<POI>();
}

 public Parcours(String parcours_lang_info_name, String parcours_lang_info_desc,
        int parcours_id, String parcours_image, int parcours_map,
        ArrayList<POI> listesPOI, int parcours_realite_augmentee,
        int parcours_qrcode, int parcours_visite_manuelle) {
    super();
    this.parcours_lang_info_name = parcours_lang_info_name;
    this.parcours_lang_info_desc = parcours_lang_info_desc;
    this.parcours_id = parcours_id;
    this.parcours_image = parcours_image;
    this.parcours_map = parcours_map;
    this.listesPOI = listesPOI;
    this.parcours_realite_augmentee = parcours_realite_augmentee;
    this.parcours_qrcode = parcours_qrcode;
    this.parcours_visite_manuelle = parcours_visite_manuelle;
}

 public Parcours (Parcel in) {
        this();
        this.parcours_lang_info_name = in.readString();
        this.parcours_lang_info_desc = in.readString();
        this.parcours_id = in.readInt();
        this.parcours_image = in.readString();
        this.parcours_map = in.readInt();
        in.readTypedList(listesPOI,POI.CREATOR);
        this.parcours_realite_augmentee = in.readInt();
        this.parcours_qrcode = in.readInt();
        this.parcours_visite_manuelle = in.readInt();

    }

@Override
    public String toString() {

        /*return "parcours_lang_info_name: "+parcours_lang_info_name+" " + "parcours_lang_info_desc: "+parcours_lang_info_desc+" "
                +"parcours_id: " + parcours_id+" " +"parcours_image: "+parcours_image+" "+"parcours_map: "+parcours_map+" "+"parcours_realite_augmentee: "+ parcours_realite_augmentee+" "
                + "parcours_qrcode: "+ parcours_qrcode+" "+"parcours_visite_manuelle: "+parcours_visite_manuelle+" "+"listesPOI: "+listesPOI+" ";*/
    return super.toString();
    }

public String getParcours_lang_info_name() {
    return parcours_lang_info_name;
}
public void setParcours_lang_info_name(String parcours_lang_info_name) {
    this.parcours_lang_info_name = parcours_lang_info_name;
}
public String getParcours_lang_info_desc() {
    return parcours_lang_info_desc;
}
public void setParcours_lang_info_desc(String parcours_lang_info_desc) {
    this.parcours_lang_info_desc = parcours_lang_info_desc;
}
public int getParcours_id() {
    return parcours_id;
}
public void setParcours_id(int parcours_id) {
    this.parcours_id = parcours_id;
}
public String getParcours_image() {
    return parcours_image;
}
public void setParcours_image(String parcours_image) {
    this.parcours_image = parcours_image;
}
public int getParcours_map() {
    return parcours_map;
}
public void setParcours_map(int parcours_map) {
    this.parcours_map = parcours_map;
}
public int getParcours_realite_augmentee() {
    return parcours_realite_augmentee;
}
public void setParcours_realite_augmentee(int parcours_realite_augmentee) {
    this.parcours_realite_augmentee = parcours_realite_augmentee;
}
public int getParcours_qrcode() {
    return parcours_qrcode;
}
public void setParcours_qrcode(int parcours_qrcode) {
    this.parcours_qrcode = parcours_qrcode;
}
public int getParcours_visite_manuelle() {
    return parcours_visite_manuelle;
}
public void setParcours_visite_manuelle(int parcours_visite_manuelle) {
    this.parcours_visite_manuelle = parcours_visite_manuelle;
}

public ArrayList<POI> getPOI() {
    return listesPOI;
}

public void setPOI(ArrayList<POI> listesPOI) {
    this.listesPOI = listesPOI;
}

public static final Parcelable.Creator<Parcours> CREATOR = new Parcelable.Creator<Parcours>()
{
    @Override
    public Parcours createFromParcel(Parcel source)
    {
        return new Parcours(source);
    }

    @Override
    public Parcours[] newArray(int size)
    {
    return new Parcours[size];
    }
};

@Override
public int describeContents() {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public void writeToParcel(Parcel dest, int flags) {

    dest.writeString(parcours_lang_info_name);
    dest.writeString(parcours_lang_info_desc);
    dest.writeInt(parcours_id);
    dest.writeString(parcours_image);
    dest.writeInt(parcours_map);

    dest.writeInt(parcours_realite_augmentee);
    dest.writeInt(parcours_qrcode);
    dest.writeInt(parcours_visite_manuelle);
    dest.writeTypedList(listesPOI);
}

} 
```

非常感谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T13:18:52.500

您写包裹的方式与阅读包裹的方式不同：

```
in.readString();
in.readString();
in.readInt();
in.readString();
in.readInt();

in.readTypedList(listesPOI,POI.CREATOR); <-- Mistmatch from here
in.readInt();
in.readInt();
in.readInt(); 
```

但

```
dest.writeString();
dest.writeString();
dest.writeInt();
dest.writeString();
dest.writeInt();

dest.writeInt(); <-- Mistmatch from here
dest.writeInt();
dest.writeInt();
dest.writeTypedList(); 
```

# java - 尝试重建 Maven 项目时出错

> ID：13879236
> 
> 赞同：2
> 
> 时间：2012-12-14T13:02:29.500
> 
> 标签：java, maven, boofcv

我是 Maven 新手，有这样的问题。我知道 maven 在 C:\"User"\m2 文件夹中创建它的本地存储库，并且当我创建我的项目（例如在 eclipse 中）并添加依赖项时。然后我将我的 M2_Home 存储库添加到构建路径 (C:\"User"\m2) 中。

在所有这些操作之后，我打开命令行并编写`mvn package`. Maven 创建 jar 文件我启动它，一切看起来都很好。

但有时我在计算机上工作，我没有管理员规则，无法在磁盘 C 上创建文件夹：

唯一的解决方案是更改本地 repo 文件夹。我这样做并尝试重建我在家编写的项目。Maven 在命令行中向我显示所有构建都是成功的。我启动 jar 文件并看到错误，它告诉我我的应用程序找不到库（但是当我检查本地 repo 文件夹时，我找到了这个库）。

所以有人可以帮我解决这类问题。

**更新2** ![在此处输入图像描述](../Images/32a9b25c383838adce5f9d3c6ac85788.png)

```
E:\ColorCorrectLab\target>java -jar ColorCorrectLab2-1.0.jar
Exception in thread "AWT-EventQueue-0" java.lang.NoClassDefFoundError: boofcv/gui/feature/AssociationPanel
        at by.bulgak.colorcorrection.menubar.ImageFilterMenuBar$1.actionPerformed(ImageFilterMenuBar.java:87)
        at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
        at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
        at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
        at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
        at javax.swing.AbstractButton.doClick(Unknown Source)
        at javax.swing.plaf.basic.BasicMenuItemUI.doClick(Unknown Source)
        at javax.swing.plaf.basic.BasicMenuItemUI$Handler.mouseReleased(Unknown Source)
        at java.awt.Component.processMouseEvent(Unknown Source)
        at javax.swing.JComponent.processMouseEvent(Unknown Source)
        at java.awt.Component.processEvent(Unknown Source)
        at java.awt.Container.processEvent(Unknown Source)
        at java.awt.Component.dispatchEventImpl(Unknown Source)
        at java.awt.Container.dispatchEventImpl(Unknown Source)
        at java.awt.Component.dispatchEvent(Unknown Source)
        at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
        at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
        at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
        at java.awt.Container.dispatchEventImpl(Unknown Source)
        at java.awt.Window.dispatchEventImpl(Unknown Source)
        at java.awt.Component.dispatchEvent(Unknown Source)
        at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
        at java.awt.EventQueue.access$200(Unknown Source)
        at java.awt.EventQueue$3.run(Unknown Source)
        at java.awt.EventQueue$3.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
        at java.awt.EventQueue$4.run(Unknown Source)
        at java.awt.EventQueue$4.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
        at java.awt.EventQueue.dispatchEvent(Unknown Source)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.run(Unknown Source)
Caused by: java.lang.ClassNotFoundException: boofcv.gui.feature.AssociationPanel
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source) 
```

这是我的`pom.xml`：

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>ColorCorrectLab2</groupId>
    <artifactId>ColorCorrectLab2</artifactId>
    <version>1.0</version>

    <dependencies>
        <dependency>
            <groupId>org.boofcv</groupId>
            <artifactId>boofcv</artifactId>
            <version>0.12</version>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.0.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-jar-plugin</artifactId>
                <version>2.4</version>
                <configuration>
                    <archive>
                        <manifest>
                            <addClasspath>true</addClasspath>
                            <classpathPrefix>lib/</classpathPrefix>
                            <mainClass>by.bulgak.colorcorrection.main.Main</mainClass>
                        </manifest>
                    </archive>
                </configuration>
            </plugin>
        </plugins>
    </build>

</project> 
```

在[http://boofcv.org/index.php?title=Download:BoofCV](http://boofcv.org/index.php?title=Download:BoofCV)

```
 Maven

BoofCV is on Maven central repository. To add it to your project add the following to your project's pom file:

<dependency>
  <groupId>org.boofcv</groupId>
  <artifactId>boofcv</artifactId>
  <version>XXX</version>
</dependency> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T13:21:57.313

您创建的 jar 不包含您需要的依赖项。在这种情况下，您需要创建一个所谓的 ueber-jar，这可以通过使用[maven-assembly-plugin (jar-with-dependencies)](http://maven.apache.org/plugins/maven-assembly-plugin/usage.html)或通过[maven-shade-plugin来完成](http://maven.apache.org/plugins/maven-shade-plugin/)

```
<project>
  [...]
  <build>
    [...]
    <plugins>
      <plugin>
        <artifactId>maven-assembly-plugin</artifactId>
        <version>2.4</version>
        <configuration>
          <descriptorRefs>
            <descriptorRef>jar-with-dependencies</descriptorRef>
          </descriptorRefs>
        </configuration>
        <executions>
          <execution>
            <id>make-assembly</id> <!-- this is used for inheritance merges -->
            <phase>package</phase> <!-- bind to the packaging phase -->
            <goals>
              <goal>single</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      [...]
</project> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T13:46:23.857

我更`maven-shade-plugin`喜欢`maven-assembly-plugin`. 他们做几乎相同的事情，但 maven-assembly-plugin 是错误的。

`maven-assembly-plugin`有覆盖文件的习惯，这会导致文件或其内容丢失。

`maven-shade-plugin`通过简单地附加它们来解决这个问题。

# delphi - 从 Delphi REST 服务器返回图像并在浏览器中显示

> ID：13879238
> 
> 赞同：8
> 
> 时间：2012-12-14T13:02:42.870
> 
> 标签：delphi, datasnap

当您在 Delphi REST 服务器中使用文件流对象返回图像时，它不会显示在浏览器中。这是一个返回图像的示例方法：

```
function TServerClass.Image: TFileStream;
begin
  Result := TFileStream.Create('pathtofile\image.png', fmOpenRead or fmShareDenyNone);
end; 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-14T13:02:42.870

问题是 Delphi REST 服务器总是将内容类型设置为 text/html。当您发送其他类型的内容时，这会使浏览器感到困惑。这是一个错误，因为大多数响应都是 json，这意味着最明智的默认内容类型应该是 application/json。

幸运的是，有一种方法可以从服务器方法中覆盖内容类型。

您需要将 Data.DBXPlatform 添加到实现的使用列表中。

该单元包含函数[GetInvocationMetadata](http://docwiki.embarcadero.com/Libraries/XE3/en/Data.DBXPlatform.GetInvocationMetadata)，它可以访问正在构建的响应。它返回一个[TDSInvocationMetadata](http://docwiki.embarcadero.com/Libraries/XE3/en/Data.DBXPlatform.TDSInvocationMetadata)对象，该对象在各种其他有用属性中具有[ResponseContentType](http://docwiki.embarcadero.com/Libraries/XE3/en/Data.DBXPlatform.TDSInvocationMetadata.ResponseContentType)属性。

设置此属性会覆盖该方法在 http 响应中返回的 Content-Type 标头。

给定的示例变为：

```
function TServerClass.Image: TFileStream;
begin
  Result := TFileStream.Create('pathtofile\image.png', fmOpenRead or fmShareDenyNone);
  GetInvocationMetadata.ResponseContentType := 'image/png';
end; 
```

现在结果图像将在浏览器中正确显示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-09T21:35:39.647

我也发现了这个问题，试图从 DataSnap REST 服务器（Delphi XE3）下载不同的文件类型（png、pdf、xlsx、docx 等）到 JavaScript Web 客户端。一些浏览器（例如：FireFox）无论如何都会采取正确的行动，但不是全部。如果没有正确的内容类型，Internet Explorer 无法识别下载文件的正确操作。@Anders 解决方案最初似乎对我有用，因为我使用的是 PDF 和 Firefox。但是当我在 IE（和其他）上测试并使用不同的扩展名时，无法识别的文件。使用 FireBug，我看到 Content-Type 始终是“text/html”，而不是使用分配的

```
GetInvocationMetadata.ResponseContentType := '...my assigned content type ...'; 
```

发现对我有用的解决方法是：

在 ServerMethodsUnit 中

```
var
   ContentTypeHeaderToUse: string;  // Global variable

TServerMethods1.GetFile(params: JSON):TStream;
begin
   .... processing ....
   ContentTypeHeaderToUse := '...' (assign correct content type).
end; 
```

在 WebModuleUnit

```
procedure TWebModule1.WebModuleAfterDispatch(Sender: TObject;
  Request: TWebRequest; Response: TWebResponse; var Handled: Boolean);
begin
  if ContentTypeHeaderToUse<>'' then begin
    Response.ContentType := ContentTypeHeaderToUse;
    ContentTypeHeaderToUse := ''; // Reset global variable
  end;
end; 
```

我也使用了类似的解决方案来分配 Content-Disposition。这是一个有用的标题键，用于将文件名设置为下载和附件/内联模式。有了这个，代码是：

```
procedure TWebModule1.WebModuleAfterDispatch(Sender: TObject;
  Request: TWebRequest; Response: TWebResponse; var Handled: Boolean);
begin
  if ContentDispositionHeaderToUse<>'' then begin
    Response.SetCustomHeader('content-disposition',ContentDispositionHeaderToUse);
    ContentDispositionHeaderToUse := '';
  end;
  if ContentTypeHeaderToUse<>'' then begin
    Response.ContentType := ContentTypeHeaderToUse;
    ContentTypeHeaderToUse := '';
  end;
end; 
```

将 ContentDispositionHeaderToUse 分配到服务器方法实现中。

**编辑**

此解决方法在启用数据压缩的 IIS 上的 ISAPI DLL 中不起作用！没有数据压缩（本地调试 IIS），响应头是：

```
Connection  close
Content-Disposition inline; filename="Privacy-0.rtf.pdf"
Content-Length  150205
Content-Type    application/pdf; charset=ISO-8859-1
Pragma  dssession=28177.371935.39223,dssessionexpires=1200000 
```

但使用启用生产的 IIS 时，响应会附带：

```
Content-Encoding    gzip
Content-Length  11663
Content-Type    text/html
Date    Thu, 11 Sep 2014 21:56:43 GMT
Pragma  dssession=682384.52215.879906,dssessionexpires=1200000
Server  Microsoft-IIS/7.5
Vary    Accept-Encoding
X-Powered-By    ASP.NET 
```

在 DataSnap 代码中分配的内容处置和内容类型未显示。

# .htaccess - .htaccess 中给出的 php ini 设置不起作用

> ID：13879246
> 
> 赞同：0
> 
> 时间：2012-12-14T13:03:16.260
> 
> 标签：.htaccess, zend-framework, datetime

我需要为我的应用程序使用时区 PST，所以我在我的 zend 项目的 .htaccess 文件中设置了这些设置。--

```
 php_value date.timezone "America/Los_Angeles" 
```

但这并没有反映在我的项目中，当我回应它向我显示印度时间的日期时。这其中缺少什么，请帮助我知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:05:19.630

确保`.htaccess`文件有任何用途。可能是您的 httpd 甚至没有读取它（很可能）或者它确实读取了它，但忽略了您的 php_value（不太可能，因为它通常以错误 500 结尾）

# c# - Windows Mobile 6.5 上 MessageBox 上的空白对话框

> ID：13879248
> 
> 赞同：0
> 
> 时间：2012-12-14T13:03:25.623
> 
> 标签：c#, visual-studio-2008, windows-mobile, messagebox, windows-mobile-6.5

我在我的应用程序的某些时刻使用 MessageBox 或要求一些东西来提醒用户，但在某些情况下，MessageBox 出现在屏幕上而没有对话框，只显示按钮，而确定的情况只显示消息文本。该问题是间歇性的，仅在装有 Windows Mobile 6.5 的设备中出现。有谁知道是否有任何方法可以解决这个问题，或者至少是问题的根源？

错误下方的示例图像。

MessageBox 正常： [正常 http://inovaservice2.cloudapp.net/Imagens/Screen01.jpg](http://inovaservice2.cloudapp.net/Imagens/Screen01.jpg)

错误消息框： [错误 http://inovaservice2.cloudapp.net/Imagens/Screen02.jpg](http://inovaservice2.cloudapp.net/Imagens/Screen02.jpg)

# asp.net - 指数超出范围。必须是非负数且小于集合的大小。在网络方法

> ID：13879251
> 
> 赞同：-1
> 
> 时间：2012-12-14T13:03:44.547
> 
> 标签：asp.net, vb.net, web-services

这是我的网络方法

```
<WebMethod(Description:="Fetch Nested Albums", EnableSession:=True)> _
<ScriptMethod(ResponseFormat:=ResponseFormat.Json)> _
Public Function moveImages() As Object
    Dim FileCount As Integer = _
        HttpContext.Current.Request.Form(
            HttpContext.Current.Request.Form.Count - 2)
End Function 
```

当我尝试从 .aspx 页面调用 Web 服务时，我收到此错误

**“索引超出范围。必须为非负数且小于集合的大小。”**

如何访问请求对象？我无法在 web 方法中访问 session 对象，所以我必须在 web 方法中添加`EnableSession:=True`。

那么请求对象也有任何设置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:12:48.570

我认为错误很明显。在这一行中，`.Count`小于 2。

```
HttpContext.Current.Request.Form(HttpContext.Current.Request.Form.Count - 2) 
```

# git-svn - 在未从修订版 1 开始的 git-svn 克隆的 git 克隆中启用 SVN 跟踪？

> ID：13879252
> 
> 赞同：1
> 
> 时间：2012-12-14T13:03:59.693
> 
> 标签：git-svn

假设我有一个`git svn clone`这样创建的：

```
$ mkdir foo
$ cd foo
$ git svn clone -s -r 100:HEAD http://svn.example.com/project 
```

然后我`git clone`喜欢这样：

```
$ cd ..
$ git clone foo bar
$ cd bar 
```

所以现在`bar`有`foo`作为它的起源。

如何`bar`跟踪原始 SVN 服务器？`git-svn`手册页提供了一个示例，说明原始版本`git svn clone`包含完整的修订历史记录，但这似乎并未涵盖原始版本`git svn clone`不是从`r1`. 当我尝试我所描述的各种事情时，`git svn fetch`总是会从`r1`.

# php - 在 php 中找不到类

> ID：13879253
> 
> 赞同：0
> 
> 时间：2012-12-14T13:04:01.917
> 
> 标签：php, namespaces, autoload

我有一个 PHP 项目，其结构如下：

```
--root
 |--dr1
 |   |---dr2
 |        |--testclass.php
 |--start.php
 |--bootstrap.php 
```

testclass.php 包含：

```
 namespace dr1\dr2;

 class testclass { 
     ... 
 } 
```

bootstrap.php 包含：

```
define('DIR_SEP', DIRECTORY_SEPARATOR);
define('ROOT', dirname(__FILE__) . DIR_SEP);

function __autoload($class)
{
    $path = ROOT . str_replace('\\', DIR_SEP, $class);
    $file = $path . '.php';
    if( is_file($file) ) require_once($file);
}

spl_autoload_extensions('.php');
spl_autoload_register('__autoload'); 
```

和 start.php 包含：

```
$class = 'dr1\dr2\testclass.php';
$obj   = new $class(); 
```

当我运行 start.php 时，我在第 5 行收到消息`dr1\dr2\testclass.php`未找到`start.php`。我不知道为什么。有人会帮忙吗？多谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T13:11:48.587

自动加载器看起来是正确的，所以问题出在 Classname`testclass.php`上。在你的源文件中它只是`testclass`没有`.php`- 所以如果你调整你的 -`$class`变量它应该可以工作：

```
$class = 'dr1\dr2\testclass';
$obj   = new $class(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T13:06:32.450

要访问您的课程，您可以这样做

`$class = new testclass();`

# jquery - jquery selected 在 Firefox 中打开下拉列表

> ID：13879257
> 
> 赞同：1
> 
> 时间：2012-12-14T13:04:25.793
> 
> 标签：jquery, jquery-ui, jquery-plugins, jquery-chosen

我正在使用 jQuery [Chosen 插件](https://github.com/harvesthq/chosen)使选择框更加美观和可搜索。由于某种原因，它似乎无法正常工作；该框的所有选项`select`都在页面上可见。

但在其他页面上，插件似乎工作正常。我不确定为什么会在特定页面上发生这种情况。我已经尝试了所有可能的方法，比如删除其他 javascript、上下移动但仍然没有运气。关于如何解决此问题的任何指示？

示例 HTML 块

```
<tr>
    <td class="right">Site: <span class="required">*</span></td>
    <td class="left">
        <select name="tkr.site.id" id="site_id_list" class="chzn-select" style="display: block;width:200px">
            #{list items:site_list, as:'site'}                  
                #{if tkr.site && site.id == tkr.site.id}
                    <option value="${site.id}"  selected>${site.name} (${site.shortname})</option>
                #{/if}  
                #{else}                     
                    <option value="${site.id}">${site.name}  ( ${site.shortname} ) </option>
                #{/else}
            #{/list}
        </select><br/>

        <span class="error">#{error 'tkr.site' /}</span>
    </td>
</tr> 
```

这是我包含 jQuery 和 Chosen 插件的标题：

```
<link rel="stylesheet"  type="text/css" media="screen"   href="@{'/public/stylesheets/jquery.treeview.css'}" type="text/css" />  
<link rel="stylesheet" type="text/css" media="screen" href="@{'/public/stylesheets/comments.css'}">
<link rel="stylesheet" type="tdeext/css" media="screen" href="@{'/public/stylesheets/chosen.css'}">

<script src="@{'/public/javascripts/jquery-1.4.2.min.js'}" type="text/javascript" charset="utf-8"></script>
<script src="@{'/public/javascripts/chosen.jquery.js'}" type="text/javascript" charset="utf-8"></script> 
```

和 iam 调用选择的 javascript 是

```
$(document).ready(function() {   

     $("form").submit(makeDateTimeProper);

     if ($("input[name=query]").length > 0 )
     {
         $("input[name=query]").corner();
         $("input[name=query]").focus();    
     }

     $(".chzn-select").chosen();

     var sdattime  = $("#content   input[name=tkr.startdatetime1]").val();
     var edattime  = $("#content   input[name=tkr.enddatetime1]").val(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-18T17:26:52.540

我知道这是一个老问题，但万一其他人也有同样的问题：我遇到了同样的问题，并且无论我做什么，选择的选择一直保持打开状态。在我用 git 的版本替换捆绑的 selected.css 之后，我可以解决它。selected 的某些 css 版本似乎有问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T04:28:48.543

Try {des pack plugins} is very complete. [http://des.delestesoft.com:8080/?go=7](http://des.delestesoft.com:8080/?go=7)

# jquery - jQuery 使用两个选择验证 addMethod

> ID：13879259
> 
> 赞同：0
> 
> 时间：2012-12-14T13:04:29.910
> 
> 标签：jquery, validation

我想为 jQuery 验证插件编写一个新的验证方法。我有两个选择框，当两个选择框的值都为 selected 时，我想抛出错误`yes`？

我尝试了几种不同的方法，但我什么都做不了。

这是我尝试过的：

```
$.validator.addMethod('noDuplicate0', function(value, element, params) {     
      value = $.makeArray($(element).val()) || [];
      var other = $.makeArray($(input[name=nightFreeRoomOnly]).val()) || []; 
      return $.inArray('0', value) == -1 || $.inArray('0', other) == -1; },'Both options can not be set to yes');
} 
```

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:23:32.757

您必须添加自己的自定义规则。

添加`notEqual`方法

```
$.validator.addMethod("notEqual", function(value, element, params) { 
 return (value != $(param).find('option:selected').val() || value!='yes');
}, jQuery.format("Values A and B Cannot be equal")); 
```

然后从您的验证中运行此自定义方法

```
$("#myform").validate({
  rules: {
   A: "required",
   B: {
      notEqual: "#A"
   }
 }
}); 
```

其中 A 和 B 是您的 2 个选择字段 ID

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T18:50:04.323

您走在正确的轨道上...使用`addMethod`. 如果您的表单如下所示：

```
<form id="myform">
<select name="select1" id="select1">
    <option selected="selected">yes</option>
    <option>no</option>
</select>
<select name="select2" id="select2">
    <option selected="selected">yes</option>
    <option>no</option>
</select>    
<br><input type="submit">
</form>​ 
```

你可以像这样制作一个验证脚本：

```
$.validator.addMethod('notbothyes', function(val, el, param) {
    return (val != 'yes' || ('yes' != $(param).find('option:selected').val()));
}, 'These fields cannot both be yes');

$("#myform").validate({
    rules: {
        select1: {
            notbothyes: '#select2'
        },
        select2: {
            notbothyes: '#select1'
        }
    }
}); 
```

在此处查看实际操作：http: [//jsfiddle.net/ryleyb/FtUPq/1/](http://jsfiddle.net/ryleyb/FtUPq/1/)

# performance - 为什么差异列表比 Haskell 中的常规连接更有效？

> ID：13879260
> 
> 赞同：52
> 
> 时间：2012-12-14T13:04:34.260
> 
> 标签：performance, list, haskell, time-complexity, difference-lists

我目前正在在线阅读[Learn you a Haskell](http://www.learnyouahaskell.com/for-a-few-monads-more)一书，并且已经到了作者解释某些列表连接可能效率低下的章节：例如

```
((((a ++ b) ++ c) ++ d) ++ e) ++ f 
```

据说效率低下。作者提出的解决方案是使用定义为的“差异列表”

```
newtype DiffList a = DiffList {getDiffList :: [a] -> [a] }

instance Monoid (DiffList a) where
    mempty = DiffList (\xs -> [] ++ xs)
    (DiffList f) `mappend` (DiffList g) = DiffList (\xs -> f (g xs)) 
```

我很难理解为什么`DiffList`在某些情况下比简单的连接在计算上更有效。有人可以简单地向我解释一下为什么上面的例子效率如此之低，以及以什么方式`DiffList`解决了这个问题？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-12-14T13:34:35.653

问题在

```
((((a ++ b) ++ c) ++ d) ++ e) ++ f 
```

是嵌套。的应用程序`(++)`是左嵌套的，这很糟糕；右嵌套

```
a ++ (b ++ (c ++ (d ++ (e ++f)))) 
```

不会有问题。那是因为`(++)`被定义为

```
[] ++ ys = ys
(x:xs) ++ ys = x : (xs ++ ys) 
```

所以要找到使用哪个方程，实现必须深入表达式树

```
 (++)
             /  \
          (++)   f
          /  \
       (++)   e
       /  \
    (++)   d
    /  \
 (++)   c
 /  \
a    b 
```

直到它找出左操作数是否为空。如果它不是空的，它的头部被取出并冒泡到顶部，但左操作数的尾部保持不变，所以当需要连接的下一个元素时，同样的过程再次开始。

当连接是右嵌套时，左操作数`(++)`总是在顶部，并且检查空/冒泡头部是 O(1)。

但是当连接是左嵌套的，`n`层很深，到达第一个元素时，`n`必须遍历树的节点，对于结果的每个元素（来自第一个列表，`n-1`来自第二个列表等）。

让我们`a = "hello"`考虑

```
hi = ((((a ++ b) ++ c) ++ d) ++ e) ++ f 
```

我们要评估`take 5 hi`. 所以首先，必须检查是否

```
(((a ++ b) ++ c) ++ d) ++ e 
```

是空的。为此，必须检查是否

```
((a ++ b) ++ c) ++ d 
```

是空的。为此，必须检查是否

```
(a ++ b) ++ c 
```

是空的。为此，必须检查是否

```
a ++ b 
```

是空的。为此，必须检查是否

```
a 
```

是空的。呸。不是，所以我们可以再次冒泡，组装

```
a ++ b                             = 'h':("ello" ++ b)
(a ++ b) ++ c                      = 'h':(("ello" ++ b) ++ c)
((a ++ b) ++ c) ++ d               = 'h':((("ello" ++ b) ++ c) ++ d)
(((a ++ b) ++ c) ++ d) ++ e        = 'h':(((("ello" ++ b) ++ c) ++ d) ++ e)
((((a ++ b) ++ c) ++ d) ++ e) ++ f = 'h':((((("ello" ++ b) ++ c) ++ d) ++ e) ++ f) 
```

对于`'e'`，我们必须重复，对于`'l'`s 也是...

绘制树的一部分，冒泡是这样的：

```
 (++)
            /  \
         (++)   c
         /  \
'h':"ello"   b 
```

成为第一

```
 (++)
     /  \
   (:)   c
  /   \
'h'   (++)
      /  \
 "ello"   b 
```

接着

```
 (:)
      / \
    'h' (++)
        /  \
     (++)   c
     /  \
"ello"   b 
```

一直回到顶部。最终成为顶层右孩子的树`(:)`的结构与原树的结构完全相同，除非最左边的列表为空，当

```
 (++)
 /  \
[]   b 
```

节点被折叠到 just `b`。

因此，如果您有短列表的左嵌套串联，则串联变为二次，因为要获得串联的头部是 O（嵌套深度）操作。一般来说，左嵌套的串联

```
(...((a_d ++ a_{d-1}) ++ a_{d-2}) ...) ++ a_2) ++ a_1 
```

是`O(sum [i * length a_i | i <- [1 .. d]])`要全面评价。

使用差异列表（为了简单起见，没有 newtype 包装器），组合是否左嵌套并不重要

```
((((a ++) . (b ++)) . (c ++)) . (d ++)) . (e ++) 
```

或右嵌套。一旦你遍历嵌套到达`(a ++)`，它`(++)`就会被提升到表达式树的顶部，因此获取 的每个元素`a`再次是 O(1)。

实际上，只要您需要第一个元素，整个组合就会与差异列表重新关联，

```
((((a ++) . (b ++)) . (c ++)) . (d ++)) . (e ++) $ f 
```

变成

```
((((a ++) . (b ++)) . (c ++)) . (d ++)) $ (e ++) f
(((a ++) . (b ++)) . (c ++)) $ (d ++) ((e ++) f)
((a ++) . (b ++)) $ (c ++) ((d ++) ((e ++) f))
(a ++) $ (b ++) ((c ++) ((d ++) ((e ++) f)))
a ++ (b ++ (c ++ (d ++ (e ++ f)))) 
```

`(++)`之后，每个列表都是在前一个列表被消费之后的顶层的直接左操作数。

重要的是，前置函数`(a ++)`可以在不检查其参数的情况下开始生成其结果，以便重新关联

```
 ($)
             / \
           (.)  f
           / \
         (.) (e ++)
         / \
       (.) (d ++)
       / \
     (.) (c ++)
     / \
(a ++) (b ++) 
```

通过

```
 ($)---------
           /           \
         (.)           ($)
         / \           / \
       (.) (d ++) (e ++)  f
       / \
     (.) (c ++)
     / \
(a ++) (b ++) 
```

至

```
 ($)
     / \
(a ++) ($)
       / \
  (b ++) ($)
         / \
    (c ++) ($)
           / \
      (d ++) ($)
             / \
        (e ++)  f 
```

不需要知道最终列表的组合函数`f`，所以只是`O(depth)`重写。然后是顶层

```
 ($)
     / \
(a ++)  stuff 
```

变成

```
 (++)
 /  \
a    stuff 
```

并且所有元素`a`都可以在一个步骤中获得。在这个例子中，我们有纯左嵌套，只需要重写一次。如果不是（例如）`(d ++)`那个地方的函数是一个左嵌套组合, `(((g ++) . (h ++)) . (i ++)) . (j ++)`, 则顶级重新关联将保持不变，并且当它成为`($)`所有先前列表之后的顶级左操作数时，它将重新关联已被消耗。

所有重新关联所需的总工作量是`O(number of lists)`，因此串联的总成本是`O(number of lists + sum (map length lists))`。（这意味着你也可以通过插入大量的深度左嵌套来带来糟糕的性能`([] ++)`。）

这

```
newtype DiffList a = DiffList {getDiffList :: [a] -> [a] }

instance Monoid (DiffList a) where
    mempty = DiffList (\xs -> [] ++ xs)
    (DiffList f) `mappend` (DiffList g) = DiffList (\xs -> f (g xs)) 
```

只是包装它，以便抽象处理更方便。

```
DiffList (a ++) `mappend` DiffList (b ++) ~> DiffList ((a ++) . (b++)) 
```

请注意，它仅对不需要检查其参数即可开始生成输出的函数有效，如果任意函数包装在`DiffList`s 中，则没有这样的效率保证。特别是，附加 ( `(++ a)`, 是否包装) 可以创建左嵌套树，`(++)`当组合右嵌套时，因此如果构造函数被暴露，您可以创建`O(n²)`连接行为。`DiffList`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-14T13:33:29.760

查看连接的定义可能会有所帮助：

```
[]     ++ ys = ys
(x:xs) ++ ys = x : (xs ++ ys) 
```

如您所见，为了连接两个列表，您需要遍历左侧列表并创建它的“副本”，这样您就可以更改其结尾（这是因为您不能直接更改旧列表的结尾列表，由于不变性）。

如果您以正确的关联方式进行连接，则没有问题。一旦插入，列表将永远不必再次被触摸（注意 ++ 的定义如何从不检查右侧的列表），因此每个列表元素仅插入“一次”，总时间为 O(N)。

```
--This is O(n)
(a ++ (b ++ (c ++ (d ++ (e ++ f))))) 
```

但是，如果您以左关联方式进行连接，那么每次您将另一个列表片段添加到末尾时，“当前”列表都必须“拆除”和“重建”。每个列表元素将在何时迭代它被插入，并且无论何时添加未来的片段！这就像你在 C 中遇到的问题，如果你天真地连续多次调用 strcat。

* * *

至于差异列表，诀窍在于它们在最后保留了一个明确的“洞”。当您将 DList 转换回普通列表时，您会将您想要的内容传递给它，它就可以开始使用了。另一方面，普通列表总是在最后堵住这个洞，`[]`所以如果你想改变它（连接时），那么你需要撕开列表才能到达那一点。

用函数定义差异列表起初看起来很吓人，但实际上非常简单。您可以从面向对象的角度查看它们，将它们视为不透明对象“toList”方法，该方法接收您应该插入到孔中的列表，最后返回 DL 的内部前缀加上提供的尾部。它很有效，因为您只有在完成所有转换后才最终堵住“洞”。

# zeromq - 发布者处的 ZeroMQ 过滤

> ID：13879261
> 
> 赞同：6
> 
> 时间：2012-12-14T13:04:34.650
> 
> 标签：zeromq

我正在研究使用 ZeroMQ，并尝试了一些示例。但是，有一些重要的要求我无法验证 ZeroMQ 是否支持。我希望你能帮助我。

我将使用这个简单的场景来问我的问题：

出版商（比如交易所）提供（大量）股票的价格更新。N 个客户订阅了其中 1..n 股的价格更新。

我已经看到了 PUB/SUB 功能，但我无法验证过滤是发生在发布者端还是订阅者端？在像上面这样的用例中，除了在发布者端过滤之外的任何东西对我来说都是不可接受的。

但是，我的调查告诉我，过滤仅在订阅者端可用，这意味着所有数据都发送给订阅者，并在那里过滤。

我怀疑我完全弄错了，如果有任何关于如何使用 ZeroMQ 解决这种情况的指示，我将不胜感激

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T15:02:39.087

这很简单，ZeroMQ 3.x PUB/SUB 过滤是在发布者端完成的，来源：[http ://www.zeromq.org/docs:3-1-upgrade](http://www.zeromq.org/docs:3-1-upgrade)

# python - 在 MATPLOTLIB 中绘制多个子图时条形图损坏

> ID：13879263
> 
> 赞同：2
> 
> 时间：2012-12-14T13:04:35.897
> 
> 标签：python, matplotlib

我创建了一个类，允许用户将多个图表添加到 MATPLOTLIB 窗口。这些可以是折线图或条形图。它还有一个功能，当图表已经添加到窗口（从 rowID 标识）而不是绘制新图时，它将替换旧图中的数据。即它允许更新（动画）

这对于折线图很有效，但是在绘制多个条形图时会损坏。该类看起来像：

```
 import math

  class TFrmPlot():

    def __init__(self, point_lists, deleteCallback, plotType, rowID):                    
            import matplotlib 
            matplotlib.interactive( True )
            matplotlib.use( 'WXAgg' )  

            import matplotlib.pyplot as plt
            self.plt = plt
            self.fig = plt.figure()      
            self.fig.canvas.mpl_connect('close_event', self.on_close)    

            import matplotlib.axes as ax    
            self.ax = ax

            self.deleteCallback = deleteCallback
            self.chartArray = []              
            self.addChart(point_lists, plotType, rowID)

        def close(self):    
            self.plt.close('all')
            #self.fig.close()

        def replaceChartDataIfChartExists(self, point_lists, rowID):
            if rowID==0:
                pass
            for chart in self.chartArray:
                for plot in chart.plots:
                    if plot.rowID == rowID:
                        plot.points = point_lists                               
                        if plot.plotType=="Point":                         
                            plot.plotItem.set_data(point_lists[0],point_lists[1])                          
                            chart.subPlot.draw_artist(plot.plotItem)                        
                            self.fig.canvas.blit(chart.subPlot.bbox) 
                        else:                      
                            for rect, h in zip(plot.plotItem, point_lists[1]):
                                rect.set_height(h)   
                        chart.subPlot.relim()                     
                        chart.subPlot.autoscale_view(True,True,True)                                                       
                        self.plt.draw()
                        return True
            return False    

        def addChart(self, point_lists, plotType, rowID):
            self.chartArray.append(TChart(rowID,plotType,point_lists))
            self._drawAll() 

        def addPlot(self, point_lists, plotType, rowID):           
            chartNum = len(self.chartArray)
            self.chartArray[chartNum-1].plots.append(TPlot(rowID,plotType,point_lists))  
            self._drawAll()

        def on_close(self, event):
            self.deleteCallback()

        def _drawAll(self):     
            self.plt.clf()
            numSubPlots = len(self.chartArray)
            numCols = self._noCols(numSubPlots)
            IndexConverter = TIndexConverter(numCols)
            subPlot = None
            for chartIndex in range(0,numSubPlots):
                if numSubPlots==1:                
                    subPlot = self.fig.add_subplot(1,1,1)
                elif numSubPlots==2:                             
                    subPlot = self.fig.add_subplot(1,2,chartIndex+1)
                else:
                    subPlot = self.fig.add_subplot(2,numCols,IndexConverter._getSubPlotIndex(chartIndex))
                subPlot.relim()           
                subPlot.autoscale_view(True,True,True)
                self.chartArray[chartIndex].subPlot = subPlot
                self._drawSubs(self.chartArray[chartIndex])                   
            self.plt.show() 

        def _drawSubs(self, chart):
            for plot in chart.plots:
                if plot.plotType=="Point":          
                    chart.subPlot.plot(plot.points[0],plot.points[1])
                    plot.plotItem = chart.subPlot.lines[len(chart.subPlot.lines)-1]
                else:
                    kwargs = {"alpha":0.5}
                    plot.plotItem = chart.subPlot.bar(plot.points[0],plot.points[1], width=self._calculateleastDiff(plot.points[0]), **kwargs)     

        def _noCols(self, numSubPlots):
            return math.ceil(float(numSubPlots)/2.0)  

        def _calculateleastDiff(self, xValues):
            xValues2 = sorted(xValues)
            leastDiff = None
            lastValue = None
            for value in xValues2:
                if lastValue is not None: 
                    diff = value-lastValue            
                    if leastDiff is None or diff < leastDiff:
                        leastDiff = diff
                lastValue = value 
            return leastDiff 
```

这有点长，总结一下：

addChart - 基本上添加了一个新的子图

addPlot -- 向现有子图添加新线或条

replaceChartDataIfChartExists -- 如果 ID 已经存在则刷新数据

我使用的虚拟数据只是连续绘制正梯度和负梯度线。但是，我的图可能会进入一个/部分或全部条形图损坏的状态。看起来 x/y 轴几乎已经旋转，各个条形不是从 x 轴开始的。问题是间歇性的；有时我会按预期得到几个情节。一旦情节被破坏，所有未来的更新都会被破坏。

![损坏的数据图](../Images/59de0e9371dfaf8b2f66c2828fdd2f6f.png)

根据要求，剩余代码：

```
class TIndexConverter():    
    def __init__(self, numCols):                                      
        self.evenCounter = 0
        self.oddCounter = numCols

    def _getSubPlotIndex(self, arrayIndex):
        if arrayIndex%2==0:
            self.evenCounter += 1
            return self.evenCounter
        else:        
            self.oddCounter += 1
            return self.oddCounter

class TChart():
    def __init__(self, rowID, plotType, point_lists):
        self.subPlot = None
        self.plots = [TPlot(rowID, plotType, point_lists)]

class TPlot():
    def __init__(self, rowID, plotType, point_lists):                     
        self.plotItem = None        
        self.plotType = plotType  
        self.rowID = rowID           
        self.points = point_lists 
```

一些客户端代码：

```
def _updateData(self, state, data): 
    if self.plot is not None:
        if not self.plot.replaceChartDataIfChartExists(data, state.comm.rowID):
            if self.createNewChart == True:
                self.plot.addChart(data, state.setting.plotType, state.comm.rowID)    
            else:
                self.plot.addPlot(data, state.setting.plotType, state.comm.rowID) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:37:52.470

这可能相关也可能不相关，但您可以替换`_calculateleastDiff`为以下内容。

```
def _calculateleastDiff(self, xValues):
    return np.min(np.diff(sorted(xValues))) 
```

这段代码的功能*过于*复杂。我怀疑你可以同时摆脱`TChart`和`TPlot`类。我会保留一个数据列表列表（so `[ [subplot1_data1,subplot1_data2],[subplot2_data1],[...]]`）一个`axes`对象列表，以及一个用于跟踪您想要的绘图类型的列表。

另外，尽量不要使用已经在 matplotlib 中使用的名称，这会使您的代码更难阅读。

# php - 如何以编程方式获取 magento 类别排序顺序

> ID：13879270
> 
> 赞同：1
> 
> 时间：2012-12-14T13:05:06.633
> 
> 标签：php, magento

我正在使用一系列类别

```
foreach(Mage::getModel('catalog/category')->getCollection() as $category) 
```

对于这些类别中的每一个，我都需要检索排序顺序。我该怎么做呢？

我能找到的唯一在类别类中看起来相关的函数是 getDefaultSortBy()，它总是返回 news_from_date，它既不是默认的排序顺序（位置）也不是选定的排序顺序（价格），所以我不知道那在哪里从中获取价值。我还注意到，如果在 magento 后端更改可用排序顺序的列表，函数 getAvailableSortByOptions 仍然总是返回相同的数组。从这两个事实，我得出结论，类别函数必须访问某种跨类别的全局设置，这对我来说毫无用处。

我想要为每个特定类别选择特定的排序顺序。有没有办法找回这个？还是我需要编写自己的 SQL？在这种情况下，我需要查询哪个表？

我正在使用magento企业版。1.11.1.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:18:07.720

找到了答案。当然，在我发布问题后不久！

问题是 Mage::getModel('catalog/category')->getCollection() 不会自动加载所有类别属性。您必须指明要手动检索的那些。所以，我需要替换这个：

```
foreach(Mage::getModel('catalog/category')->getCollection() as $category) 
```

有了这个：

```
foreach(
    Mage::getModel('catalog/category')->getCollection()
    ->addAttributeToSelect('default_sort_by')
    ->addAttributeToSelect('available_sort_by')
    as $category
) 
```

# javascript - 编写一个迭代器来遍历二叉树

> ID：13879271
> 
> 赞同：1
> 
> 时间：2012-12-14T13:05:13.263
> 
> 标签：javascript, python, closures, binary-tree, binary-search-tree

问题是，给定一个 BST，找出是否有两个数字加起来等于一个给定的数字`k`。不应使用额外的内存。

现在，如果它是一个排序数组，我可以简单地保留两个指针，一个在开头，一个在结尾。在每一步，我都会计算指针指向的两个数字的总和，如果总和小于 k，我会增加起始指针，否则会减少结束指针，直到匹配或指针重叠。

我可以对 BST 做同样的事情，通过中序遍历将其转换为排序数组，但这需要额外的内存。所以我认为迭代器解决方案是有序的。我会保留两个迭代器，一个会以正常的中序方式遍历 BST，调用它将返回下一个更大的数字，另一个会以逆序方式遍历 BST，在每次调用时返回下一个较小的数字。

知道如何设计这样的迭代器吗？我更喜欢 Python/Javascript 的解决方案。虽然 Python 提供了类似的函数`iter`，但我想使用闭包来设计它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T13:26:38.637

This kind of iterators (using closures) are called generators in python.

Generators are functions, using 'yield' keyword instead of 'return'. When yield is encountered, the respective value is returned, but the execution state of the function is suspended, until the next value is required.

So, you can just implement a tree-traversal function, using 'yield' instead of 'return', and your goal will be accomplished.

They are very easy to design:

```
# Simple tree definition
class Tree:
    def __init__(self, data, left=None, right=None):
        self.data = data
        self.left = left
        self.right = right

# In-order lazy iterator (aka generator)
def inorder(tree):
    if tree is not None:
        for x in inorder(tree.left):
            yield x
        yield tree.data
        for x in inorder(tree.right):
            yield x

# Reverse in-order lazy iterator
def rev_inorder(tree):
    if tree is not None:
        for x in rev_inorder(tree.right):
            yield x
        yield tree.data
        for x in rev_inorder(tree.left):
            yield x

# Construct a tree
n1 = Tree(1)              
n2 = Tree(2)              
n3 = Tree(3)              #         7
n4 = Tree(4)              #       /   \
n5 = Tree(5, n1, n2)      #     5       6
n6 = Tree(6, n3, n4)      #    / \     / \
n7 = Tree(7, n5, n6)      #   1   2   3   4

for i in inorder(n7):
    print i, 
print

for i in rev_inorder(n7):
    print i, 
print 
```

Output:

```
1 5 2 7 3 6 4
4 6 3 7 2 5 1 
```

To manually iterate, use:

```
gen = rev_inorder(n7)
print gen.next()       # Output 4
print gen.next()       # Output 6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:26:40.953

我想出了一个简单的想法 ;-)：如果你不想为 BST 周围的迭代分配额外的空间，那么就需要牺牲性能。

```
var inst = new BST();
inst.Insert(-121);
inst.Insert(13);
inst.Insert(1);
inst.Insert(10);
GetAddends(inst, 55); // here we go
function GetAddends(bst, target) {
    var iter1 = bst.GetIterator();
    var iter2 = bst.GetIterator(false);

    while (iter1.IsValid() && iter2.IsValid() && (iter1.Pos() < iter2.Pos())) {
        var temp = iter1.data() + iter2.data();
        if (temp < target) iter1.Next();
        else if (temp > target) iter2.Next();
        else window.alert(iter1.data() + "+" + iter2.data() + "=" + target);
    }
    bst.ClearIterators();
}

function BST() {
    var _root, _nodeCount, _locked;
    this.Insert = function(data) { 
        if (_locked === true) throw "could not modify the BST during iteration";
        _nodeCount++;
    }
    this.Delete = function(data) {
        if (_locked === true) throw "could not modify the BST during iteration";
        _nodeCount--;
        return null;
    }
    this.GetIterator = function(isForward) { return Iter(isForward); }
    this.ClearIterators = function() { _locked = false; }

    function Iter(isForward) {
        if (isForward == null) isForward = true; // if the parameter is omitted, then true by default
        _locked = true;
        var _pos = isForward ? 0 : (_nodeCount - 1);
        var _curData;
        return function() {
            this.IsValid() {
                return (isForward ? (_pos < _nodeCount) : (_pos >= 0));
            }
            this.Next = function() {
                isForward ? _pos++ : _pos--;
                _curData = null;
            }
            this.Pos = function() { return _pos; }
            this.Data = function() {
                if (_curData == null) { /* loop the BST and find _posTH node and stored in the _curData in case we need it later */ }
                return _curData;
            }
        }
    }
} 
```

代码没有实现 BST，但想法应该很清楚。玩得开心！在这里提醒一下，我们不允许在持有迭代器的过程中修改 BST。在我们不在持有迭代器的范围内之后，我们需要调用ClearIterators()。然而，一个优雅的解决方案可能是使用 PUB/SUB 让 BST 知道有多少迭代器存在。也许这可能是另一个问题，哈。

# c# - ASP.NET：列表框数据源和数据绑定

> ID：13879275
> 
> 赞同：4
> 
> 时间：2012-12-14T13:05:30.660
> 
> 标签：c#, asp.net, listbox

我在 .aspx 页面上有一个空列表框

```
lstbx_confiredLevel1List 
```

我正在以编程方式生成两个列表

```
List<String> l1ListText = new List<string>(); //holds the text 
List<String> l1ListValue = new List<string>();//holds the value linked to the text 
```

我想`lstbx_confiredLevel1List`在 .aspx 页面上加载具有上述值和文本的列表框。所以我正在做以下事情：

```
lstbx_confiredLevel1List.DataSource = l1ListText;
lstbx_confiredLevel1List.DataTextField = l1ListText.ToString();
lstbx_confiredLevel1List.DataValueField = l1ListValue.ToString();
lstbx_confiredLevel1List.DataBind(); 
```

但它不会加载`lstbx_confiredLevel1List`with`l1ListText`和`l1ListValue`。

有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-14T13:12:05.857

为什么不使用与 相同的集合`DataSource`？它只需要具有键和值的两个属性。你可以使用一个`Dictionary<string, string>`：

```
var entries = new Dictionary<string, string>();
// fill it here
lstbx_confiredLevel1List.DataSource = entries;
lstbx_confiredLevel1List.DataTextField = "Value";
lstbx_confiredLevel1List.DataValueField = "Key";
lstbx_confiredLevel1List.DataBind(); 
```

您还可以使用匿名类型或自定义类。

假设您已经拥有这些列表并且需要将它们用作数据源。您可以`Dictionary`即时创建：

```
Dictionary<string, string> dataSource = l1ListText
           .Zip(l1ListValue, (lText, lValue) => new { lText, lValue })
           .ToDictionary(x => x.lValue, x => x.lText);
lstbx_confiredLevel1List.DataSource = dataSource; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T13:11:20.457

你最好使用字典：

```
Dictionary<string, string> list = new Dictionary<string, string>();
...
lstbx_confiredLevel1List.DataSource = list;
lstbx_confiredLevel1List.DataTextField = "Value";
lstbx_confiredLevel1List.DataValueField = "Key";
lstbx_confiredLevel1List.DataBind(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T13:17:36.487

不幸的是`DataTextField`and`DataValueField`并没有那样使用。它们是它们应该显示在数据源中数据绑定的当前项目的字段的文本表示。

如果您有一个同时包含文本和值的对象，您将列出它并将其设置为数据源，如下所示：

```
public class MyObject {
  public string text;
  public string value;

  public MyObject(string text, string value) {
    this.text = text;
    this.value = value;
  }
}

public class MyClass {
  List<MyObject> objects;
  public void OnLoad(object sender, EventArgs e) {
    objects = new List<MyObjcet>();
    //add objects
    lstbx.DataSource = objects;
    lstbx.DataTextField = "text";
    lstbx.DataValueField = "value";
    lstbx.DataBind();
  }
} 
```

# php - 我在多个目录中有多个文件（foo.php）副本，我想从单个 PHP 即时执行

> ID：13879283
> 
> 赞同：1
> 
> 时间：2012-12-14T13:05:53.903
> 
> 标签：php, linux, batch-file, cpanel

我在多个目录中有许多文件副本（foo.php），我想从单个 PHP 实例（trigger.php）执行，每次执行 foo.php 之间有固定延迟，或者等待每个 foo.php完成。

我试图避免在 CPanel 服务器上同时运行相当密集的维护脚本 foo.php 的多个副本，从而造成严重的处理器负载。

请注意，目录结构各不相同。

例子：

```
 me@my [~]# trigger.php 
```

执行

```
 home/somesub1/dir/foo.php
 home/somesub2/dir/foo.php
 home/somothersub1/somesub2/dir/foo.php
      ~~      ~~
 home/~/somesubN/dir/foo.php 
```

foo.php 有 200 多个实例，所以我想避免在脚本中单独列出目录。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:17:35.857

我能想到的解决方案是使用 find 和 awk。然后在 trigger.php 文件中运行它：

```
echo exec('find ./ -name foo.php | awk \'{print "php " $1}\' | sh'); 
```

我相信 trigger.php 位于您的 foo.php 脚本的父/根目录中。

使用 PHP5 的 DirectoryIterator 是另一种选择，但您必须遍历每个子目录并使用条件语句。

# java - Primefaces Carousel 不适用于 ScrollPanel

> ID：13879285
> 
> 赞同：0
> 
> 时间：2012-12-14T13:06:08.457
> 
> 标签：java, jsf, xhtml, primefaces

将组件放置在 . 更改下拉页码时，轮播将无法滑动甚至更改。以下是我现在正在工作的示例代码。

```
<p:scrollPanel>
<p:carousel value="#{abcBean.nameList}" var="foo"
rows="1" effect="fade">
<div>
<div style="width: 830px; margin-bottom: 10px;">
<p:outputPanel id="namePanel">
<h:outputText value="#{foo.name}"
style="margin-left:20px;color:red;" />
</p:outputPanel>
</div>
</div>
</p:carousel>
</p:scrollPanel> 
```

如果 carousel 组件在滚动面板内，它将无法工作，但如果我们将它带到外面，它将完美地工作。目前我正在使用 primefaces 3.4.1，我也尝试过使用 3.4.2，但这也有同样的问题。

Primefaces 3.4.1 JSF 2 Mojarra 实现 Tomcat 7.0.26 JDK 1.7 Win XP 32

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T14:07:24.733

无法解决问题，所以用 Jquery tiny scorll [http://baijs.nl/tinyscrollbar/](http://baijs.nl/tinyscrollbar/)替换了 Primefaces 滚动条。旋转木马运行良好。

# menu - 带有 mouseenter、mouseleave 和单击以保持打开关闭的菜单

> ID：13879286
> 
> 赞同：2
> 
> 时间：2012-12-14T13:06:16.163
> 
> 标签：menu, click, mouseenter, mouseleave

我有这个正在使用 mouseenter/mouseleave 的菜单，当单击该项目时，该项目将保持打开状态，如果我单击正文，该项目将被关闭，当单击另一个项目时，它将被打开。问题是：我想在单击他时关闭打开的项目，但是使用此代码我无法做到。我只是尝试切换和许多其他事情，但我无法实现我想要的。

```
function handler() {
$('#menu > li').on('mouseenter',function(){
    //mouseenter handler
});    
$('#menu > li').on('mouseleave',function(){
    //mouseleave handler
});}

$('#nav-outer').on('mouseenter mouseleave', handler);

$('#menu > li').on('click', function( e ) {
  e.stopPropagation();
       $('#menu > li').off('mouseenter mouseleave');
       $('#nav-outer').off('mouseenter mouseleave', handler);
        $('#overlay').show();
       });

$('body').click(function(){
  $('#overlay').hide();
  $('#nav-outer').bind('mouseenter mouseleave', handler);
  $('#menu > li').find //etc. like mouseleave handler
  $('#menu > li').bind('mouseenter',function(){ //etc. like mouseenter handler

});
});
}); 
```

# c# - HTTP 错误 500.0 - 内部服务器错误 Visual Studios 2012

> ID：13879291
> 
> 赞同：0
> 
> 时间：2012-12-14T13:06:27.463
> 
> 标签：c#, iis, visual-studio-2012

当我在 Visual Studio 中创建一个新的 asp.net 3.5 网站并运行它时，我从通过 VS 运行的 IIS express 得到上述错误。

我在网上搜索了一个解决方案，有人知道为什么会这样吗？

我的旧项目也运行良好！它只是我创造的新的！

我最近的一些项目是 .net 4.5/4.0。

谢谢尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:12:17.137

内部服务器错误意味着——请求的服务器端出现问题。它几乎可以是任何东西。检查您的事件日志（事件查看器 > Windows 日志 > 应用程序）以查找实际的异常消息。它将被列为来自 ASP.NET 的错误。

# actionscript-2 - Actionscript 2.0评分系统

> ID：13879294
> 
> 赞同：3
> 
> 时间：2012-12-14T13:06:36.153
> 
> 标签：actionscript-2, scoring

我是 Flash 新手，我需要制作一个评分系统，当您在舞台上单击一个符号（按钮）时，它会添加到分数文本框中。我有这个简单的代码：

`on(release) { _root.points++; _root.score.text = _root.points; }`

我放在按钮上并且它工作正常，问题是当我点击舞台上的另一个按钮时，分数文本框显示单词 NAN 而不是增加一个。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T05:29:05.717

您的代码没有任何问题...确保您在其他按钮中具有相同的代码...当您将 .text 设置为等于 _root.points; 时，您可能拼写错误的变量；（你忘了复数吗？我经常这样做哈哈）

# asp.net - Gridview 没有在 UpdatePanel 内部更新

> ID：13879298
> 
> 赞同：1
> 
> 时间：2012-12-14T13:07:11.500
> 
> 标签：asp.net, vb.net, gridview, updatepanel

我知道这是一个非常普遍的问题，我已经阅读了几天的文档，并且我正要为这个问题而烦恼。

**背景** 我在 UpdatePanel 中有多个 Gridview。发生了什么，有人正在导入 Excel 电子表格，我正在使用 OpenXML 来共享数据并将其存储在 VB.NET 数据表对象中。然后，我通过自定义验证（基于数据库信息）运行所有这些数据，然后根据异常将发生在 Gridview 中的异常（错误）吐出。一个 UpdatePanel 中的最大数量是 4 个 Gridview（每个 Gridview 都有自己的功能）。有两个 Gridview，我使用一个按钮来使用 Gridview 中包含的数据执行操作。这两个按钮也位于更新面板中，就在相应的 Gridview 下方。每个 Gridview 都包装在一个 AJAX 可折叠面板扩展器中。

现在，当用户单击按钮时，我在后面的代码中有一个单击事件，我在其中获取信息并根据发生的异常，更新或插入数据库。我遍历行，如果没有发生错误，我调用 datatable.ImportRow 并将当前行传递给我的“Ready”表。我使用 ScriptManager.RegisterStartupScript 来显示一个警告框，让他们知道是否发生了任何错误。然后，我重新绑定异常表和“就绪”表。我尝试添加一个 AsyncPostbackTrigger，我尝试在后面的代码中简单地调用 udpMain.Update()，并尝试了将 UpdatePanel 的 UpdateMode 属性设置为“Always”和“Conditional”的两种选项。

**HTML**

```
 <asp:UpdatePanel ID="udpMain" runat="server" UpdateMode="Always">
<ContentTemplate>
    <asp:Panel ID="pnlOwnershipDetailsHead" runat="server" Visible="false">
                <div class="windHeader" style="cursor: pointer">
                    <asp:Label id="lblOwnershipDetails" runat="server">Ownership Exceptions</asp:Label>
                    <asp:ImageButton id="btnOwnershipHead" runat="server"/>
                </div>
              </asp:Panel>
               <asp:Panel ID="pnlOwnershipDetailsBody" runat="server" Visible="false" CssClass="pnl">
                <asp:GridView ID="gvOwnershipDetails" runat="server" CssClass="wind" CellPadding="5" AutoGenerateColumns="false">
                    <HeaderStyle CssClass="windHeader" />
                    <Columns>
                        <asp:BoundField DataField="Description" HeaderText="Description" />
                        <asp:BoundField DataField="Serial Number" HeaderText="Serial Number" />
                        <asp:BoundField DataField="Facility" HeaderText="Facility" />
                        <asp:BoundField DataField="Department" HeaderText="Department" />
                        <asp:BoundField DataField="EmpID" HeaderText="EmpID" />
                        <asp:BoundField DataField="Configuration" HeaderText="Config" />
                        <asp:BoundField DataField="Error" HeaderText="Errors" />
                        <asp:TemplateField>
                            <HeaderTemplate> 
                                <asp:CheckBox ID="chkHeader" ToolTip="Select All" runat="server" onclick="changeAllCheckBoxes(this)" />
                            </HeaderTemplate>
                            <ItemTemplate>
                                <asp:CheckBox ID="chkItem" runat="server" ToolTip="Select this item" />
                            </ItemTemplate>
                        </asp:TemplateField>
                    </Columns>
                </asp:GridView>
                    <asp:Button ID="btnOwnershipDetails" Text="Change Information" runat="server" CssClass="btn editBtn" />
                    <ajax:ConfirmButtonExtender ID="cbeOwnershipDetails" runat="server" TargetControlID="btnOwnershipDetails"
                        ConfirmText="Are you sure you would like to change the ownership information for the selected items?"
                        OnClientCancel="CancelClick"  />
               </asp:Panel>
</ContentTemplate>
    <asp:UpdatePanel> 
```

**代码背后**

```
 Protected Sub btnOwnershipDetails_Click(sender As Object, e As System.EventArgs) Handles btnOwnershipDetails.Click
        Dim importdata As New ImportData
        Dim ownershipdt As Data.DataTable = Session("ownershipdt")
        Dim finalimportdt As Data.DataTable = Session("finalimportdt")
        Dim existsError As Boolean = False

        For Each Row As Data.DataRow In ownershipdt.Rows
            Dim i As Integer = 0
            Dim cb As CheckBox = CType(gvOwnershipDetails.Rows(i).Cells(7).Controls(1), CheckBox)
            If cb.Checked Then
                If importdata.CheckEmpExists(Row("EmpID").ToString) And importdata.CheckSiteExists(Row("Facility").ToString) And importdata.CheckDeptExists(Row("Department").ToString) Then
                    importdata.UpdateDBOwnership(Row("Serial Number").ToString, ClientInfo.GetEmpID(Row("EmpID").ToString), ClientInfo.GetSiteID(Row("Facility").ToString), ClientInfo.GetDeptID(Row("Department").ToString), _
                                                Row("Description").ToString, Row("Configuration").ToString, portalUser.EmployeeText)

                    finalimportdt.ImportRow(Row)
                Else
                    existsError = True
                End If
            End If
            i += 1
        Next
        If existsError = False Then 'Show alert box
            ScriptManager.RegisterStartupScript(udpMain, udpMain.GetType(), "alert", "alert('You have changed the ownership information for the selected rows.')", True)
        Else
            ScriptManager.RegisterStartupScript(udpMain, udpMain.GetType(), "alert", "alert('There was an issue changing ownership to all of the selected rows.')", True)
        End If
        bindGV(gvOwnershipDetails, ownershipdt)
        bindGV(gvImportDetails, finalimportdt)
        'udpMain.Update()
        Session("ownershipdt") = ownershipdt
        Session("finalimportdt") = finalimportdt
        btnEmail.Enabled = True
    End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:21:50.167

将您的面板代码放在 asp:UpdatePanel 下的 ContentTemplate 之间

```
<asp:UpdatePanel>
    <ContentTemplate>

    </ContentTemplate>
</asp:UpdatePanel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:12:06.523

最后！我找到了答案！[https://sites.google.com/site/arlen4mysite/full-postback-for-templatef](https://sites.google.com/site/arlen4mysite/full-postback-for-templatef)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-06T01:04:03.910

或者 Page_Load() 中的一行代码做同样的事情

```
ScriptManager.GetCurrent(this).RegisterPostBackControl(btnOwnershipDetails); 
```

# django - Django 更改当前 URL 名称和参数

> ID：13879300
> 
> 赞同：1
> 
> 时间：2012-12-14T13:07:14.933
> 
> 标签：django, django-templates, django-urls

在我的 Django URL 中，我有许多以以下结尾的 URL 模式：

```
 (redirect/(?P<redirect_to>\w+)) 
```

这意味着这些 URL 可以（或不）以 . 结尾`/redirect/TARGET/`。这些 URL 模式有其他命名参数（主要是一个 : `pk`）

现在，我希望在这些 URL 模式使用的模板中，能够更改当前页面路径，只需添加 redirect_to 参数，并保持其他参数和 URL 反向名称不变。

通过添加到当前上下文中，我能够在模板中获取 URL 反向名称，`resolve(path).url_name`然后将其与`{% url %}`模板标签一起使用。

我想知道是否有任何简单的方法可以将参数（来自`resolve(path).kwargs`）动态添加到 URL 反向标记？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:26:52.073

我认为你应该为此创建一个[自定义标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#simple-tags)（用 {% url_redirect "your_new_destination" %} 替换你的 {% url %} 标签）。

在 your_app/templatetags/my_custom_tags.py 中：

```
from django.core.urlresolvers import reverse, resolve

@register.simple_tag(takes_context=True)
def url_redirect(context, new_destination):
    match = resolve(context.request.path)
    match.kwargs['redirect_to'] = new_destination
    return reverse(match.url_name, args=match.args, kwargs=match.kwargs) 
```

在您的模板中：

```
{% load my_custom_tags %}
{% url_redirect "your_new_destination" %} 
```

请注意，您需要将“django.core.context_processors.request”添加到您的[TEMPLATE_CONTEXT_PROCESSORS](https://docs.djangoproject.com/en/dev/ref/settings/#template-context-processors)才能使此代码段正常工作。

# c++ - 跟踪 gcc 编译以及哪些代码减慢了它的速度

> ID：13879301
> 
> 赞同：18
> 
> 时间：2012-12-14T13:07:15.643
> 
> 标签：c++, linux, gcc

我想找出哪些代码导致 gcc 编译时间变慢。我以前有一个代码编译得很慢，有人告诉我命令行开关让 gcc 打印它编译的每个步骤，包括每个函数/变量/符号等。这很有帮助（我可以在控制台中看到 gcc 阻塞的地方），但我忘记了开关是什么。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-14T13:18:56.697

我找到了它（来自[gcc 手册页](http://man7.org/linux/man-pages/man1/gcc.1.html)）：

> `-Q`
> 
> 使编译器在编译时打印出每个函数名称，并在完成时打印有关每次传递的一些统计信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-14T13:35:26.347

另请参阅[this answer](https://stackoverflow.com/a/13854157/841108)到一个非常相似的问题。

您很可能希望[调用 GCC](http://gcc.gnu.org/onlinedocs/gcc/Invoking-GCC.html)`-time`或更多可能`-ftime-report`会为您提供由or `cc1`... （由or命令`cc1plus`启动的编译器）花费的时间，它显示在每个内部阶段或 GCC 编译器的传递中花费的时间。不要忘记优化、调试和警告标志（例如）；它们都会减慢编译速度。`gcc``g++``-Wall -O -g`

您将了解到，对于 C 程序，解析只是编译时间的一小部分，只要您要求进行一些优化，例如`-O1`或`-O2`. （这对于 C++ 来说不太正确，因为解析可能需要一半的时间，特别是因为模板扩展被认为是解析）。

根据经验，减慢 GCC 的是非常长的函数体。最好有 50 个 1000 行的函数，而不是一个 50000 行的函数（这可能发生在*生成*一些 C++ 代码的程序中，例如[RefPerSys](http://refpersys.org/)或可能在 2021 年春季 - [Bismon](https://github.com/bstarynk/bismon/)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T13:10:06.563

尝试 -v（详细）编译。

请参阅此链接：

[http://www.network-theory.co.uk/docs/gccintro/gccintro_75.html](http://www.network-theory.co.uk/docs/gccintro/gccintro_75.html)

编辑：

我明白。也许这会有所帮助：

gcc -fdump-tree-all -fdump-rtl-all

等等（-fdump-passes）。见这里： http: [//fizz.phys.dal.ca/~jordan/gcc-4.0.1/gcc/Debugging-Options.html](http://fizz.phys.dal.ca/~jordan/gcc-4.0.1/gcc/Debugging-Options.html)

# gcc - __USE_XOPEN2K8 的用途以及如何设置？

> ID：13879302
> 
> 赞同：6
> 
> 时间：2012-12-14T13:07:20.097
> 
> 标签：gcc, glibc

我正在尝试编译 gtk 堆栈（最后一个 gtk2 版本，2.24），我收到了一堆似乎相关的错误。即`__locale_t`从string.h 和time.h 中找不到，`LC_ALL_MASK`也找不到（应该在locale.h 中）。

我发现所有这些问题都与`__USE_XOPEN2K8`没有#defined有关。有什么`__USE_XOPEN2K8`用，我怎样才能正确设置它？

例如，我是否必须将标志传递给 ./configure 以用于 glib、gtk、...，或者我是否必须在构建 gcc 或 glib **c̲**时已经更改某些内容？我宁愿不只是`#define __USE_XOPEN2K8`在不知道它的作用的情况下散布到我的消息来源。注意我使用的是安装在非标准前缀中的 gcc-4.6.3 和 glibc-2.16.0，因为我试图让 gtk 库在只包含旧版本的旧 CentOS (5.8) 上工作。

`__locale_t`另请注意，在几个地方都提到了缺失，例如[这个](http://sourceware.org/bugzilla/show_bug.cgi?id=10456)错误报告。我可以添加`#include <xlocale.h>`一些文件，但似乎正确的解决方案`__USE_XOPEN2K8`是设置。

* * *

编辑：我发现[这个线程](http://readlist.com/lists/gcc.gnu.org/gcc-help/4/21431.html)描述了这个问题。显然，主机系统的头文件被“fixincluded”到新编译器的头文件中。链接的帖子建议编辑 features.h。有谁知道我之后是否必须重新编译 gcc / glibc（以及如何让它获取新的 features.h，而不是覆盖它）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-24T15:29:57.257

When `__USE_GNU`is defined，`__USE_XOPEN2K8`也总是被定义，除非你明确定义或取消定义这些宏，你不能这样做。在包含第一个标题之前使用`_GNU_SOURCE`, etc. 宏。`_XOPEN_SOURCE {500,600,700,...}`这是在 glibc 头文件中选择 GNU 功能集的推荐方法，同时在命令行 ( `-D_GNU_SOURCE`) 上定义它。

或者，您可以尝试通过`-std`命令行开关（`gnu89`、`gnu99`等）为 gcc 指定 GNU 扩展使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-20T14:39:42.937

在带有 gcc 4.6 的 CentOS7 上，我们必须使用 -D_XOPEN_SOURCE=700 -D__USE_XOPEN2K8

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-24T08:01:20.910

glibc `__USE_`* 宏是用于实现特征选择的内部宏。支持的设置方法是定义功能测试宏，例如`-D_GNU_SOURCE`：

*   [功能测试宏](https://www.gnu.org/software/libc/manual/html_node/Feature-Test-Macros.html)

需要这些宏是因为 glibc 支持许多标准和 GNU 扩展，而这些特性相互冲突，主要是由于 C 中缺少命名空间。例如，C 和 POSIX 允许您定义一个名为的全局变量`secure_getenv`（因为identifier 没有被这些标准保留或以其他方式使用），但是如果您使用`_GNUS_SOURCE`并包含这些程序进行编译，则此类程序将无法工作，`<stdlib.h>`因为 glibc 提供了一个名为`secure_getenv`.

`<xlocale.h>`是一个内部 glibc 头文件（头文件中的注释是这样说的）并且在 glibc 2.26 中将不再可用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-27T07:44:13.623

据我所知，当我们使用编译器时，它的行为取决于一些 ENV 宏，这些宏保存在`feature.h`. 所以你可以通过修改它来配置你的编译器。首先，您需要使用`g++ -E youfile > log`, 查看您的编译器使用哪个`feature.h`文件，然后使用`g++ -E -dM /path/to/feature.h>log`, 查找`__USE_XOPEN2K8`，如果找不到。`#define __USE_XOPEN2K8 1`在文件末尾添加。您知道安装编译器时可能做了一些配置错误。

# git - Git冲突文件

> ID：13879306
> 
> 赞同：1
> 
> 时间：2012-12-14T13:07:40.410
> 
> 标签：git, merge, rebase, git-stash

我遇到了 git merge / rebase 甚至 stash 的问题，让我解释一下发生了什么：

情况：我和其他朋友，我们在不同的分支中工作，但我们有一个我们经常修改的文件（messages.properties）。谁先完成工作，提交和推送，另一个进行提取，存储他的工作，将分支与分支的朋友合并并应用存储......在这里我们总是有问题，因为我的 messages.properties 覆盖了他的消息，他的修改将丢失。

即使我提交我的工作（而不是存储）并与他的工作重新绑定/合并，上述情况也会发生；我的信息总是覆盖他的修改。

我不知道我在这里做错了什么，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:39:19.763

从命令行执行此操作。你可以看到发生了什么变化`git log -p --graph --all -- path/to/messages.properties`

# java - 是否可以跟踪控制外部程序的线程的进度？

> ID：13879308
> 
> 赞同：2
> 
> 时间：2012-12-14T13:08:22.603
> 
> 标签：java, multithreading

我有一个 Java-Gnome GUI，它启动一个单独的线程来运行我没有代码的命令行程序。我想在 GUI 中显示一个进度条，以显示到目前为止第二个线程已完成的百分比。

鉴于我/我的程序不控制外部程序，这是可能的还是我被一个不确定的脉冲进度条卡住了？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T13:17:36.897

当命令行程序在控制台中报告其进度时，您可以在您的 java 应用程序中读取此输出。为此，您必须使用[ProcessBuilder创建一个](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)[Process](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html)对象：

```
ProcessBuilder processBuilder = new ProcessBuilder("yourCommandLineProgram");
Process process = processBuilder.start();
OutputStream outputStream = process.getOutputStream(); 
```

现在您可以读取`outputStream`对象以获取命令行程序的文本输出。

当然，这只会在命令行程序向标准输出报告其进度以及此输出可用于确定还剩多少工作时才对您有所帮助。当程序不公开这些信息时，就没有办法知道它的进度（实际上，根据[停机问题](http://en.wikipedia.org/wiki/Halting_problem)，如果不完全执行程序，就无法判断程序将运行多长时间）。

# asp.net - jQuery 刷新下拉菜单

> ID：13879312
> 
> 赞同：0
> 
> 时间：2012-12-14T13:08:40.673
> 
> 标签：asp.net, jquery, telerik

我按照示例从另一个下拉列表的选择中更新下拉列表：

```
 var pageUrl = '<%=ResolveUrl("~/Reports.aspx")%>';
    function PopulatePortfolioDropDown() {
        var ddl = document.getElementById('<%=ddlPortfolio.ClientID %>');
        ddl.options.length = 0;
        var prgyr = document.getElementById('<%= ddlProgYear.ClientID %>');
        var agy = document.getElementById('<%= ddlAgency.ClientID %>');
        $telerik.$('#<%=ddlPortfolio.ClientID %>').empty(); //.append('<option selected="selected" value="0">Please Select...</option>');
        var str = prgyr.options[prgyr.selectedIndex].text + '|' + agy.options[agy.selectedIndex].value;
        $telerik.$.ajax({
            type: "POST",
            url: pageUrl + '/LoadPortfolioDDL1',
            data: '{yearcode:"' + str + '"}',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: OnPortfolioData,
            failure: function (response) {
                alert(response.d);
            } 
        });
    }
    function OnPortfolioData(response) {
        PopulateControl(response.d, $telerik.$('#<%=ddlPortfolio.ClientID %>'));
    }
    function PopulateControl(list, control) {
         if (list.length > 0) {
            control.attr("disabled", false);
            control.empty();
            $telerik.$.each(list, function () {
                control.append($telerik.$("<option></option>").val(this['Value']).html(this['Text']));
            });
        }
        else {
            control.empty().append('<option selected="selected" value="0">Not available<option>');
        }
    } 
```

这在第一次选择 ddlAgency 时效果很好。如果我进行第二次选择，则显示的列表不会更新，并且仍会显示原始列表。但是，如果我选择第二个列表中的一个项目，则更新的项目（来自第二个调用）会正确显示。这是IE的问题吗？更多信息：我要更新的 DDL 在页面加载时没有填充任何数据。如果我选择 DDL，它不会显示任何选项。即使我在控制 DDL 中进行了选择，第二个也没有显示任何项目。如果我不单击 DDL，则会显示这些项目。就像 DDL 将保留第一次单击时的内容。这有意义吗？这到底是什么原因造成的？我知道正在清除数据并添加了新选项，但页面仍然显示旧列表或根本不显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:26:53.643

为了更新选择菜单，jquery 有一个基本的 .change 函数，它在选择选项时进行监听。

[http://api.jquery.com/change/](http://api.jquery.com/change/)

但是，如果您希望更改是动态的，则此 .quickchange 解决方法是您需要的魅力：

[iPhone上的动态选择不起作用](https://stackoverflow.com/questions/3169349/dynamic-selects-on-iphone-not-working)

您只是附加元素，而不是更新选择列表以反映选择选项时的更改。

以下是选定属性的示例：

[JQuery 在选择列表上设置选定属性](https://stackoverflow.com/questions/1311287/jquery-setting-the-selected-attribute-on-a-select-list)

# google-maps-api-3 - 无法使用 Salesforce Crypto Class for Google Maps API 生成 HMac

> ID：13879316
> 
> 赞同：2
> 
> 时间：2012-12-14T13:09:06.633
> 
> 标签：google-maps-api-3, salesforce, apex-code, hmacsha1

我的公司最近注册了 Google Maps API for business。

要使用 API，我需要生成一个 HMacSHA1 签名，并将其添加到我的 HTTP 请求中。不幸的是，不知何故，我无法生成正确的签名。

对于测试，我使用 google 提供的值来确保算法正常工作并且我得到正确的结果。这是代码：

```
string url = 'maps/api/geocode/json?address=New+York&sensor=false&client=clientID';
string privateKey = 'vNIXE0xscrmjlyV-12Nj_BvUPaw=';
privateKey = privateKey.replace('-', '+');
privateKey = privateKey.replace('_', '/');

//Blob privateKeyBlob = EncodingUtil.base64Decode(privateKey);
Blob privateKeyBlob = Blob.valueOf(privateKey);
Blob urlBlob = Blob.valueOf(url);
Blob signatureBlob = Crypto.generateMac('HMacSHA1', urlBlob, privateKeyBlob);

String signature =EncodingUtil.urlEncode(EncodingUtil.base64Encode(signatureBlob), 'UTF-8');
signature = signature.replace('+', '-');
signature = signature.replace('/', '_');

system.debug('signature is ' +signature); 
```

生成的签名应该是：KrU1TzVQM7Ur0i8i7K3huiw3MsA=

这是 Google 文档的链接，您还可以在其中找到相同的示例：[https ://developers.google.com/maps/documentation/business/webservices](https://developers.google.com/maps/documentation/business/webservices)

需要注意的几点： 1\. 我使用了 API 文档中提供的示例 Python 脚本，它给出了正确的结果。2.我认为问题是，API文档说我们应该解码privateKey，然后将其提供给函数。尽管 Crypto Class 的文档说“privateKey 的值不需要采用解码形式。”。我都试过了，有解码和没有解码，仍然没有结果。3\. 对于 Google API，一切都必须是 UTF-8 编码；我不知道这是否是 Encoding.Util 解码的方式。

我尝试了很多组合，但找不到解决方案。任何帮助将不胜感激。

谢谢， 安基特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T20:12:36.847

您需要签署*完整*路径和查询。您的字符串 url 缺少前导斜杠 (/)。

此外，不要害怕向 Google 提出此类查询的支持案例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T04:43:58.537

我们已经使用了代码，但是其中存在一些缺陷，对于打算使用此代码的人来说，实际代码将是：

```
string url = '/maps/api/geocode/json?address=New+York&sensor=false&client=clientID';
string privateKey = 'vNIXE0xscrmjlyV-12Nj_BvUPaw=';
privateKey = privateKey.replace('-', '+');
privateKey = privateKey.replace('_', '/');

Blob privateKeyBlob = EncodingUtil.base64Decode(privateKey);
Blob urlBlob = Blob.valueOf(url);
Blob signatureBlob = Crypto.generateMac('hmacSHA1', urlBlob, privateKeyBlob);

String signature = EncodingUtil.base64Encode(signatureBlob);

signature = signature.replace('+', '-');
signature = signature.replace('/', '_');

system.debug('*** Signature: ' + signature); 
```

# java - 如何将值从数据库存储到矩阵？

> ID：13879320
> 
> 赞同：0
> 
> 时间：2012-12-14T13:09:22.093
> 
> 标签：java, android, sqlite

这里我有一个goolemap项目。它有一个按钮..按钮的活动是：GiveDistance ..

这个按钮应该给我存储在数据库中的所有通过点之间的距离。为了找到它们之间的距离，我将它们保存在一个矩阵中。问题是如何从每一行获取值并保存在矩阵中。

```
public class GiveDistance extends Activity {

    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_give_distance);

        double [][] matrix = new double[100][100];

                matrix[0][0]=0;
                Context context = getApplicationContext();
                GPSDatabase myDatabase=new GPSDatabase(this);
                myDatabase.open();
                Cursor cursor=myDatabase.getAllRows();
                cursor.moveToFirst();

                int i ;
                for ( i = 1; i < cursor.getCount(); i++) {
                       for (int j = 1; j < cursor.getCount(); j++) {
                    matrix[i][j]=9999;
                cursor.moveToNext();

                       }
                          }

                //fill lat and long from database
                    cursor.moveToFirst();
                    i = 0 ;
                    for (int j = 1; j < cursor.getCount(); j++) {
                //here column 1 includes latitude and column 2 includes logitude

                    matrix[i][j]=matrix[j][i]=cursor.getInt(1);//1
                    matrix[i][j]=matrix[j][i]=cursor.getInt(2);//1

                        //String label = cursor.getString(0);

                        cursor.moveToNext();

        //how to get lat and long. from database and save them in matrix[i][j]?
                        //We want them separate!!!!

                    }

                    cursor.close();    

                    //to calc. distance
                    cursor.moveToFirst();
                    int k=0 ;int m,j; 
                    for (j = 1, m =1; j < cursor.getCount(); j++) {

                    for ( i = 0; i < cursor.getCount(); m++) {

                    distance(matrix[i][j],matrix[m][k]);

                    }         
                    } 
```

# android - 如何每天使用alarmmanager 2次？

> ID：13879321
> 
> 赞同：4
> 
> 时间：2012-12-14T13:09:27.460
> 
> 标签：android, alarmmanager

我用下面的代码每天只设置一次alarmmanager，我想设置2个不同的时间，所以每天2次。

我的代码：

```
Calendar calendar = Calendar.getInstance();
calendar.set(Calendar.HOUR_OF_DAY, 10);
calendar.set(Calendar.MINUTE, 35);
calendar.set(Calendar.SECOND, 0);    AlarmManager am = (AlarmManager)     getApplicationContext().getSystemService  (Context.ALARM_SERVICE);
PendingIntent pi = PendingIntent.getBroadcast(getApplicationContext(), 0, new Intent(getApplicationContext(),     AlarmReceiver.class),      PendingIntent.FLAG_UPDATE_CURRENT);
am.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(),     AlarmManager.INTERVAL_DAY, pi); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-14T13:17:59.703

您可以使用 AlarmManager.INTERVAL_DAY / 2 的间隔：

```
Calendar calendar = Calendar.getInstance();
calendar.set(Calendar.HOUR_OF_DAY, 10);
calendar.set(Calendar.MINUTE, 35);
 calendar.set(Calendar.SECOND, 0);    
AlarmManager am = (AlarmManager)getApplicationContext().getSystemService  (Context.ALARM_SERVICE);
Intent intent = new Intent(getApplicationContext(), AlarmReceiver.class);
 PendingIntent pi = PendingIntent.getBroadcast(getApplicationContext(), 0, intent,      PendingIntent.FLAG_UPDATE_CURRENT);
 am.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(),        AlarmManager.INTERVAL_DAY / 2, pi); 
```

但是，如果您发出警报的时间很重要，您可以使用两个日历对象：

```
Calendar cal1 = Calendar.getInstance();
cal1.set(Calendar.HOUR_OF_DAY, 12); //midday
cal1.set(Calendar.MINUTE, 00);
cal1.set(Calendar.SECOND, 00);

Calendar cal2 = Calendar.getInstance();
cal2.set(Calendar.HOUR_OF_DAY, 18);//8pm for example
cal2.set(Calendar.MINUTE, 00);
cal2.set(Calendar.SECOND, 00); 
```

并设置您的警报管理器：

```
am.setRepeating(AlarmManager.RTC_WAKEUP, cal1.getTimeInMillis(),cal2.getTimeInMillis(), pi); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-11-25T06:10:39.470

```
void alaramStart() {
    Calendar cur_cal = Calendar.getInstance();
    Intent intent = new Intent(MainActivity.this, MyBRoadcast.class);
    intent.setAction("HELLO");
    PendingIntent pintent = PendingIntent.getService(MainActivity.this, 1234567, intent, 0);
    AlarmManager alarm = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
    alarm.setRepeating(AlarmManager.RTC_WAKEUP, cur_cal.getTimeInMillis(), 5000, pintent);
} 
```

# javascript - 在画布中绘制 1px 粗线会创建 2px 粗线

> ID：13879322
> 
> 赞同：56
> 
> 时间：2012-12-14T13:09:27.820
> 
> 标签：javascript, html, html5-canvas, line

在这个 jsfiddle 中有一条 lineWidth 为 1 的线。

[http://jsfiddle.net/mailrox/9bMPD/350/](http://jsfiddle.net/mailrox/9bMPD/350/)

例如：

```
ctx.lineWidth = 1; 
```

然而，当它在画布上绘制时，线条是 2px 粗的，你如何创建一个 1px 粗的线条。

我可以画一个矩形（高度为 1px），但是我希望这条线也可以在对角线上工作。那么如何让这条线高 1px？

谢谢！

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-12-14T13:14:34.340

Canvas 从半个像素计算

```
ctx.moveTo(50,150.5);
ctx.lineTo(150,150.5); 
```

所以从一半开始会解决它

固定版本：http: [//jsfiddle.net/9bMPD/357/](http://jsfiddle.net/9bMPD/357/)

[这个答案](https://stackoverflow.com/a/7531540/719276)解释了为什么它会这样工作。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-12-14T18:36:47.903

您还可以在 X 和 Y 方向平移半个像素，然后使用整数值作为坐标（在某些情况下您可能需要将它们四舍五入）：

```
context.translate(0.5, 0.5)

context.moveTo(5,5);
context.lineTo(55,5); 
```

请记住，如果您调整画布大小，翻译将被重置 - 因此您必须再次翻译。

您可以在此处阅读有关翻译功能以及如何使用它的信息：

[https://www.rgraph.net/canvas/reference/translate.html](https://www.rgraph.net/canvas/reference/translate.html)

[这个答案](https://stackoverflow.com/a/7531540/719276)解释了为什么它会这样工作。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-14T13:15:58.593

或者正如[这个](https://stackoverflow.com/questions/7530593/html5-canvas-and-line-width)答案所说，要获得 1 的宽度，您需要从半像素开始。

```
ctx.moveTo(50.5,150.5);
ctx.lineTo(150.5,150.5); 
```

[http://jsfiddle.net/9bMPD/355/](http://jsfiddle.net/9bMPD/355/)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-07-11T22:00:57.073

对我来说，只有不同的“像素完美”技术的组合有助于存档结果：

1.  使用像素比获取和缩放画布：

    **pixelRatio = window.devicePixelRatio/ctx.backingStorePixelRatio**

2.  在调整大小时缩放画布（避免画布默认拉伸缩放）。

3.  将 lineWidth 与 pixelRatio 相乘以找到正确的“真实”像素线粗细：

    **context.lineWidth = 厚度 * pixelRatio;**

4.  检查线的粗细是奇数还是偶数。将一半的 pixelRatio 添加到奇数粗细值的行位置。

    **x = x + 像素比/2；**

奇数线将放置在像素的中间。上面的行用于移动它一点点。

```
function getPixelRatio(context) {
  dpr = window.devicePixelRatio || 1,
    bsr = context.webkitBackingStorePixelRatio ||
    context.mozBackingStorePixelRatio ||
    context.msBackingStorePixelRatio ||
    context.oBackingStorePixelRatio ||
    context.backingStorePixelRatio || 1;

  return dpr / bsr;
}

var canvas = document.getElementById('canvas');
var context = canvas.getContext("2d");
var pixelRatio = getPixelRatio(context);
var initialWidth = canvas.clientWidth * pixelRatio;
var initialHeight = canvas.clientHeight * pixelRatio;

window.addEventListener('resize', function(args) {
  rescale();
  redraw();
}, false);

function rescale() {
  var width = initialWidth * pixelRatio;
  var height = initialHeight * pixelRatio;
  if (width != context.canvas.width)
    context.canvas.width = width;
  if (height != context.canvas.height)
    context.canvas.height = height;

  context.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);
}

function pixelPerfectLine(x) {

  context.save();
  context.beginPath();
  thickness = 1;
  // Multiple your stroke thickness  by a pixel ratio!
  context.lineWidth = thickness * pixelRatio;

  context.strokeStyle = "Black";
  context.moveTo(getSharpPixel(thickness, x), getSharpPixel(thickness, 0));
  context.lineTo(getSharpPixel(thickness, x), getSharpPixel(thickness, 200));
  context.stroke();
  context.restore();
}

function pixelPerfectRectangle(x, y, w, h, thickness, useDash) {
  context.save();
  // Pixel perfect rectange:
  context.beginPath();

  // Multiple your stroke thickness by a pixel ratio!
  context.lineWidth = thickness * pixelRatio;
  context.strokeStyle = "Red";
  if (useDash) {
    context.setLineDash([4]);
  }
  // use sharp x,y and integer w,h!
  context.strokeRect(
    getSharpPixel(thickness, x),
    getSharpPixel(thickness, y),
    Math.floor(w),
    Math.floor(h));
  context.restore();
}

function redraw() {
  context.clearRect(0, 0, canvas.width, canvas.height);
  pixelPerfectLine(50);
  pixelPerfectLine(120);
  pixelPerfectLine(122);
  pixelPerfectLine(130);
  pixelPerfectLine(132);
  pixelPerfectRectangle();
  pixelPerfectRectangle(10, 11, 200.3, 443.2, 1, false);
  pixelPerfectRectangle(41, 42, 150.3, 443.2, 1, true);
  pixelPerfectRectangle(102, 100, 150.3, 243.2, 2, true);
}

function getSharpPixel(thickness, pos) {

  if (thickness % 2 == 0) {
    return pos;
  }
  return pos + pixelRatio / 2;

}

rescale();
redraw();
```

```
canvas {
  image-rendering: -moz-crisp-edges;
  image-rendering: -webkit-crisp-edges;
  image-rendering: pixelated;
  image-rendering: crisp-edges;
  width: 100vh;
  height: 100vh;
}
```

```
<canvas id="canvas"></canvas>
```

Resize 事件不会在 snipped 中触发，因此您可以尝试[github上的文件](https://github.com/ievgennaida/js-animation-timeline-control/blob/master/demo/pixel-perfect-example.html)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-07-18T09:45:41.577

Canvas 可以使用 fillRect() 绘制干净的直线。一个高度为 1 像素或宽度为 1 像素的矩形就可以完成这项工作。它不需要半像素值：

```
var ctx = document.getElementById("myCanvas").getContext("2d");

ctx.drawVerticalLine = function(left, top, width, color){
    this.fillStyle=color;
    this.fillRect(left, top, 1, width);
};

ctx.drawHorizontalLine = function(left, top, width, color){
    this.fillStyle=color;
    this.fillRect(left, top, width, 1);
}

ctx.drawVerticalLine(150, 0, 300, "green");
ctx.drawHorizontalLine(0, 150, 300, "red"); 
```

[https://jsfiddle.net/ynur1rab/](https://jsfiddle.net/ynur1rab/)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-12-14T13:14:08.963

你看到[谷歌上的第一个热门了](http://code.anjanesh.net/2009/05/1-pixel-wide-line-parallel-to-axis-in.html)吗？（搜索`canvas line width 1px`）。尽管我不得不承认这并不完全是“干净”或“精益”。[Ferry Kobus 的](https://stackoverflow.com/a/13879402/215042)解决方案要好得多。再说一遍：这很糟糕，你首先需要使用“半像素”......

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-05-21T23:58:50.817

如果这些答案都不适合您，请检查您的浏览器缩放。我的不知何故为 125%，所以每四个 1px 的线被绘制 2px 宽。

我花了几个小时试图弄清楚为什么互联网上的每一个小提琴都有效而我的却没有（缩放仅为我的开发选项卡设置）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-23T13:36:06.800

fillRect() 方法可用于在画布中绘制细的水平线或垂直线（无需在坐标上应用 +0.5 偏移）：

```
this.fillRect(left, top, 1, height);
this.fillRect(left, top, width, 1); 
```

您实际上可以通过将这段代码替换为以下代码来使线条更细：

```
this.fillRect(left, top, 0.7, height);
this.fillRect(left, top, width, 0.7); 
```

线条会更细（趋于达到 1 像素宽），但它们的颜色会稍微减弱。

[-> 工作示例](https://jsfiddle.net/Ghislain999/atzefve2/)

需要注意的是，如果我们设置 ctx.lineWidth=0.7（对于经典的 beginPath/moveTo/lineTo/stroke 序列），它在 Chrome 上不起作用（0.7 和 1 的解释方式相同）。因此对这个 fillRect() 方法很感兴趣。

# php - 使用两个相同的函数（不能重新声明类）

> ID：13879325
> 
> 赞同：0
> 
> 时间：2012-12-14T13:09:34.790
> 
> 标签：php

> **可能重复：**
> [参考 - 这个错误在 PHP 中意味着什么？](https://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php)

在下面的代码中，我创建了两个需要相同信息的函数。我正在使用[这个脚本](https://github.com/xPaw/PHP-Minecraft-Query)。

```
<?php 
function get_cbMain_Query() {
  define( 'Main_SERVER_ADDR', 'ip');
  define( 'Main_SERVER_PORT', 25565);
  define( 'Main_TIMEOUT', 1 );

  // require bloginfo('template_url') . 'inc/avatars/MinecraftQuery.class.php';
  require __DIR__ . '/mcQuery/MinecraftQuery.class.php';

  // Display everything in browser, because some people can't look in logs for errors
  Error_Reporting( E_ALL | E_STRICT );
  Ini_Set( 'display_errors', true );

  $Timer = MicroTime( true );
  $Query = new MinecraftQuery( );

  try
  {
    $Query->Connect( Main_SERVER_ADDR, Main_SERVER_PORT, Main_TIMEOUT );
  }
  catch( MinecraftQueryException $e )
  {
    $Error = $e->getMessage();
   echo 'error. <br>'. $Error;
  }
  return $Query;
}

function get_cbTekkit_Query() {
  define( 'Tekkit_SERVER_ADDR', 'ip');
  define( 'Tekkit_SERVER_PORT', 25565);
  define( 'Tekkit_TIMEOUT', 1 );

  // require bloginfo('template_url') . 'inc/avatars/MinecraftQuery.class.php';
  require __DIR__ . '/mcQuery/MinecraftQuery.class.php';

  // Display everything in browser, because some people can't look in logs for errors
  Error_Reporting( E_ALL | E_STRICT );
  Ini_Set( 'display_errors', true );

  $Timer = MicroTime( true );
  $Query = new MinecraftQuery( );

  try
  {
    $Query->Connect( Tekkit_SERVER_ADDR, Tekkit_SERVER_PORT, Tekkit_TIMEOUT );
  }
  catch( MinecraftQueryException $e )
  {
    $Error = $e->getMessage();
   echo 'error. <br>'. $Error;
  }
  return $Query;
} 
```

使用此脚本并执行以下操作来调用它（从不同的页面，此脚本包含在另一个页面中）

```
 $cbMain = get_cbMain_Query();
          $cbTekkit = get_cbTekkit_Query(); 
```

然后我得到：

```
 Cannot redeclare class MinecraftQueryException in MinecraftQuery.class.php on line 5 
```

我是 PHP 中的类广告对象的新手，不知道为什么我不能调用两个函数并同时使用它们。请帮忙？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T13:12:35.447

更改两个函数中的行

```
require __DIR__ . '/mcQuery/MinecraftQuery.class.php'; 
```

读书

```
require_once __DIR__ . '/mcQuery/MinecraftQuery.class.php'; 
```

这将确保文件被包含一次，并避免错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:13:24.230

你要么做`require_once`，要么`include_once`你可以放一个

```
if(!function_exists('get_cbMain_Query')){... }
if(!function_exists('get_cbTekkit_Query')){... } 
```

围绕每个函数，以确保它们只声明一次。

# java - Java Servlet SQL 表

> ID：13879326
> 
> 赞同：1
> 
> 时间：2012-12-14T13:09:41.080
> 
> 标签：java, sql, servlets, jdbc

我遇到的问题是我要创建一个 servlet，它将从三个表 (SQL) 中获取数据并将它们打印在 html 表中。

表的结构如下：

博客评论：

```
row id (auto increments), 
blogger id, 
entry_tstamp, 
t_stamp, 
comment, 
author_id, 
```

博客条目：

```
row id(auto increments), 
blogger_id, 
timestamp, 
entry, 
```

博主信息：

```
row id(auto increments), 
blogger_id, 
name, 
email address, 
image, 
password, 
```

博客条目是原始帖子，而 blog_comments 与该帖子相关。我正在尝试创建一个表，该表将显示博主详细信息，然后在第一行和第二行及以下显示帖子（来自 blog_entries），以及对该博客的相关评论。

我正在尝试使用 while 语句（如下所示）。我必须使用 while 语句来最初获取初始博客文章和博主 ID，然后使用第二个 while 语句来显示与此相关的评论。

我在通过第二个while循环时遇到了一些困难，它取消了第一个while循环（在一个增量之后），然后转储了第二个while循环的内容。

有谁知道是否有更好的方法来实现这一点？我应该使用比较循环吗？而且我确定我的编码是错误的。谁能告诉我哪里出错了？

谢谢你。

代码：

```
 try {
            Class.forName("org.sqlite.JDBC");
            con = DriverManager.getConnection("jdbc:sqlite:E:/My Documents/NetBeansProjects/co2509blog.sqlite");
            stmt = con.createStatement();
            //String temp = "SELECT entry, name, email, image, comment from blog_comments C, blog_entries E, blogger_info I where E.blogger_id = I.blogger_id  AND I.blogger_id = C.author_id ORDER BY E.timestamp";
            //String temp = "SELECT entry, name, email, image from blog_entries E, blogger_info I where E.blogger_id = I.blogger_id ORDER BY E.timestamp";
            //String temp = "SELECT entry, name, email, image, comment from blogger_info I JOIN blog_entries E ON I.blogger_id = E.blogger_id JOIN blog_comments C ON I.blogger_id = C.author_id WHERE  E.timestamp = C.entry_tstamp ORDER BY E.timestamp";
            String query = "SELECT name, image, email, entry FROM blogger_info I, blog_entries E WHERE I.blogger_id = E.blogger_id ORDER BY E.timestamp";
            String query2 = "SELECT name, image, email, comment FROM blogger_info I, blog_entries E, blog_comments C WHERE I.blogger_id = C.author_id AND E.timestamp = C.entry_tstamp ORDER BY E.timestamp";
            rs = stmt.executeQuery(query);

            //rs2 = stmt.executeQuery(secondQuery);
            // displaying records
            int rowCount = 0;
            int rowCount2 = 0;

            out.println("<P ALIGN='center'><TABLE BORDER=5>");
            ResultSetMetaData rsmetadata = rs.getMetaData();
            int columnCount = rsmetadata.getColumnCount();
            // table header
            out.println("<TR>");
            for (int i = 0; i < columnCount; i++) {
                out.println("<TH>" + rsmetadata.getColumnLabel(i + 1) + "</TH>");
            }
            out.println("</TR>");
            {
                while (rs.next()) {
                    rowCount++;
                    out.println("<TR>");
                    for (int i = 0; i < columnCount; i++) {
                        out.println("<TD>" + rs.getString(i + 1) + "</TD>");
                    }
                    rowCount2++;
                    rs2 = stmt.executeQuery(query2);
                    ResultSetMetaData rsmetadata2 = rs2.getMetaData();
                    int columnCount2 = rsmetadata2.getColumnCount();

                    rsmetadata2 = rs2.getMetaData();
                    out.println("</TR>");
                    while (rs2.next()) {
                        rowCount2++;
                        out.println("<TR>");
                        for (int j = 0; j < columnCount2; j++) {
                            out.println("<TD>" + rs2.getString(j + 1) + "</TD>");
                        }

                    }

                }
                out.println("</TR>");
            }
            out.println("</TABLE></P>");

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:23:21.690

以下行重用了第一个查询的语句：

```
rs2 = stmt.executeQuery(query2); 
```

作为副作用，第一个结果集 ( `rs`) 已关闭。

要修复它，您需要为内部查询创建一个单独的语句：

```
stmt2 = con.createStatement();

..

rs2 = stmt2.executeQuery(query2); 
```

但是，如果您可以将两个查询合并为一个查询，效率会更高。

# uml - 如何使用 Dia Software 在时序图上添加多个执行规范

> ID：13879327
> 
> 赞同：3
> 
> 时间：2012-12-14T13:09:44.350
> 
> 标签：uml, sequence-diagram, dia

我正在使用 Dia 制作序列图，我需要制作具有两个（或更多）执行规范的生命线，如下图所示：

![你可以看到绿色圆圈。](../Images/ecb756074af422a5278155686b4a9d60.png) （我想要的是绿色圆圈内）

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T13:58:49.583

您可以简单地将两个生命线元素堆叠在一起。第二条生命线的顶部可以连接到第一条生命线中执行的末端（灰色区域）。

# iphone - 小时 分钟 秒 到 秒 ios

> ID：13879328
> 
> 赞同：3
> 
> 时间：2012-12-14T13:09:53.897
> 
> 标签：iphone, objective-c, ios, time

我想在 ios 中将时间小时分钟秒转换为秒。有没有内置的方法呢？我怎样才能做到这一点？

```
NSCalendar *gregorianCalendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

NSDateComponents *componentsDiff = [gregorianCalendar components:NSHourCalendarUnit fromDate:[NSDate date]]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T13:29:53.387

以下代码将日期作为字符串插入，然后返回秒数。

```
- (NSNumber *)dateToSecondConvert:(NSString *)string {

    NSArray *components = [string componentsSeparatedByString:@":"];

    NSInteger hours   = [[components objectAtIndex:0] integerValue];
    NSInteger minutes = [[components objectAtIndex:1] integerValue];
    NSInteger seconds = [[components objectAtIndex:2] integerValue];

    return [NSNumber numberWithInteger:(hours * 60 * 60) + (minutes * 60) + seconds];
} 
```

愿这对很多人有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T13:35:43.443

也许我误解了这个问题，但这将为您提供 1970 年以来的当前时间（以秒为单位）

```
[[NSDate date] timeIntervalSince1970] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T13:14:48.027

很多例子，但这是你可以做的：

```
NSDate *now = [NSDate date];
NSCalendar *cal = [NSCalendar currentCalendar];
NSDateComponents *comp = [calendar components:NSHourCalendarUnit fromDate:now];
//[comp hour]
//[comp minute]
//[comp second] 
```

# backbone.js - TypeScript、Backbone 和 RequireJS - 创建集合时的公共/私人问题

> ID：13879332
> 
> 赞同：0
> 
> 时间：2012-12-14T13:10:27.397
> 
> 标签：backbone.js, requirejs, typescript

我正在尝试使用 RequireJS 开始使用 TypeScript 和 Backbone，我的所有类都在单独的文件中。我有一个模型和一个集合：

实体模型.ts：

```
/// <reference path="../modules/backbone.d.ts"/>
export class EntityModel extends Backbone.Model{
} 
```

EntityCollection.ts

```
/// <reference path="../modules/backbone.d.ts"/>
import em = module("../models/EntityModel");
export class EntityCollection extends Backbone.Collection{
   model = em.EntityModel;
} 
```

我收到一条错误消息：

导出类的公共成员“模型”已经或正在使用私有类型“em”

我只是想告诉它我的收藏要使用什么类型的模型，但似乎在第一关就掉了下来！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:50:02.740

找到答案：[http ://typescript.codeplex.com/discussions/405800](http://typescript.codeplex.com/discussions/405800)

导出您的进口！

```
export import em = module("../models/EntityModel");
export class EntityCollection extends Backbone.Collection{
   model = em.EntityModel;
} 
```

# php - 实例化 PHP 类而不分配给变量

> ID：13879333
> 
> 赞同：1
> 
> 时间：2012-12-14T13:10:28.490
> 
> 标签：php, codeigniter

我在 Codeigniter HMVC 扩展（通过 Wiredesignz）中遇到了这行代码，其中一个类被实例化而没有分配给一个变量（Base.php 中的类 CI）

编码 ：

```
class CI extends CI_Controller
{
  public static $APP;

  public function __construct() {

    /* assign the application instance */
    self::$APP = $this;

    global $LANG, $CFG;

    /* re-assign language and config for modules */
    if ( ! is_a($LANG, 'MX_Lang')) $LANG = new MX_Lang;
    if ( ! is_a($CFG, 'MX_Config')) $CFG = new MX_Config;

    parent::__construct();
  }
}

/* create the application object */
new CI; 
```

这种技术叫什么名字？有什么含义？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T13:13:55.150

这没有名字，暗示构造函数肯定做的太多了。一个人想要创建一个类的实例而不引用它的原因是，他只希望构造函数想要被执行，仅此而已。这意味着，构造函数“做”某事，但构造函数只应确保对象处于稳定/有效状态，仅此而已。

简而言之：不要认为这是一个好习惯。`global`并证实了我的`self::$APP = $this`观点，即这是一段糟糕的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:42:40.190

我想这可以看作是某种`facade design`. - 类（调用构造函数）并完成赋值，尽管是在构造函数本身中。

所以`new CI`只是扩展 Super 对象并初始化它自己的构造函数。类似于一个函数， `function somefun(){ return }; somefunc();//call somefunc`

**CI_Controller**加载运行 Codeigniter 所需的所有类，它是**SUPER 对象**

```
$ci = &get_instance() // CI_Controller 
```

# c++ - 在 C++ Builder XE2 中重命名 VCL Form 类

> ID：13879337
> 
> 赞同：4
> 
> 时间：2012-12-14T13:10:39.940
> 
> 标签：c++, ide, c++builder, vcl, c++builder-xe2

在工作中，我们有一个相当大的 C++ VCL 表单应用程序。它在 Embarcadero XE2 中编译，但可以追溯到很多年前。我需要向此应用程序添加一个新表单。

当您执行“文件 > 添加新 > VCL 表单”时，会在类名所在的位置创建一个表单`TForm1`。还创建了一个指针，如下所示：`TForm1 *Form1`

出于显而易见的原因，我想重命名表单和指针，比如`TStuffForm`and `*StuffForm`。问题是我无法让它工作！

对于任何实际的 XE2 用户：**这样做的规范方法是什么？**

我曾尝试通过仔细替换字符串来直接在代码中重命名，但它不起作用。IDE 发疯了，向我发出多个模式弹出窗口，抱怨缺少 TForm1 类。那太不愉快了，我放弃了。

我也尝试了 IDE 中的重构功能，但这也不起作用。所以现在我有点卡住了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T09:28:51.430

我还没有使用 XE2，仍在使用 RAD studio 2010。不过，以下对我有用：

*   转到新表单的设计视图。
*   从结构树中选择表单（或单击它）。
*   更改表单的名称属性。

然后应该更改单元的类和类指针名称。

不明白为什么这在 XE 和更高版本中不起作用，但正如我所提到的 - 未经测试。

**更新：经过验证的方法适用于 C++ Builder 10.1 Berlin。**

# matlab - 神经网络和反向传播，MATLAB 中 removeconstantrows 的理由

> ID：13879340
> 
> 赞同：1
> 
> 时间：2012-12-14T13:10:46.097
> 
> 标签：matlab, neural-network

我想知道，MATLAB 有一个 removeconstantrows 函数，应该应用于前馈神经网络输入和目标输出数据。此函数从数据中删除常量行。例如，如果 5 输入神经网络的一个输入向量是 [1 1 1 1 1]，则将其删除。

谷歌搜索，我能找到的最好解释是（解释）“不需要恒定行，可以通过对输出层偏差的适当调整来代替”。

有人可以详细说明吗？

谁来做这个调整？

从我的书中，简单梯度下降的权重调整是：

Δ weight_i = learning_rate * local_gradient * input_i

这意味着第一个隐藏层的神经元的所有权重都被调整了相同的量。但是他们已经调整过了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:37:21.300

我认为有一个误解。“行”不是输入模式，而是一个特征，即所有模式中的第 i 个组件。很明显，如果某个特征在所有数据集上没有大的方差，它就不能提供有价值的信息，对网络训练也没有显着的作用。

与偏差的比较是可行的（尽管我不同意，这适用于输出层（仅），因为它取决于找到常量行的位置 - 如果它在输入数据中，那么它也适用于第一个隐藏层，恕我直言）。如果你还记得的话，建议反向传播网络中的每个神经元都有一个特殊的偏置权重，连接到 1 个恒定信号。例如，如果一个训练集包含一个全为 1 的行，那么这与附加偏差相同。如果常数行有不同的值，那么偏差会产生不同的效果，但无论如何你都可以简单地消除这一行，并将该行的常数值添加到现有的偏差中。

免责声明：我不是 Matlab 用户。我在神经网络方面的背景完全来自编程领域。

# yii-events - yii 框架 - CLinkColumn 将值传递给 javascript

> ID：13879341
> 
> 赞同：0
> 
> 时间：2012-12-14T13:10:48.553
> 
> 标签：yii-events

我是 YII 框架的新手，我想创建一个带有图像的链接列。单击图像应调用 Javascript 函数，需要将 PHP 值传递给该 javascript 函数。这是代码，

```
<pre>
array(
'class'=>'CLinkColumn',
 'header'=> 'Trades',
 'imageUrl' => '/images/view_all.png',
 'htmlOptions'=>array('style'=>'text-align:justify'),
 'linkHtmlOptions'=>array("id"=>'$data["id"]','onclick'=>'viewTrades($data["id"])')
),
</pre> 
```

但是 HTML 没有正确呈现。它被错误地打印为，

```
<pre>
<a href="javascript:void(0)" onclick="viewTrades($data['id'])" id='$data['id']'><img alt="Link" src="/images/view_all.png"></a>
</pre> 
```

相反，我希望将其打印为，

```
<a href="javascript:void(0)" onclick="viewTrades(317)" id="317"><img alt="Link" src="/images/view_all.png"></a> 
```

任何帮助都非常感谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T06:04:40.870

我自己弄明白了，代码如下。希望它可能对某人有用！

```
    '名称'=>'交易',
                    'value'=>'CHtml::link("View",array("view", "id"=>$data["id"]), array("id"=>$data["id"], "class"=>"linkClass", "onclick"=>"viewTrades($data[id]); "))',
            '类型'=>'原始'，
            ),

```

# java - Hibernate：在没有多个包的情况下获取对象集合

> ID：13879342
> 
> 赞同：0
> 
> 时间：2012-12-14T13:10:50.177
> 
> 标签：java, hibernate, jpa, hibernate-mapping

当我试图获取我的`Employee`实体列表时，我收到了这个错误：

```
org.hibernate.loader.MultipleBagFetchException: cannot simultaneously fetch 
multiple bags 
```

我的`Employee`实体类有两个不同对象的列表。我想有问题。

```
@ManyToMany
@JoinTable(name = "employee_project",
        joinColumns = {@JoinColumn(name = "employee_id", referencedColumnName = "employee_id")},
        inverseJoinColumns = {@JoinColumn(name = "project_id", referencedColumnName = "project_id")})
protected List<Project> projects;

@OneToMany(cascade = CascadeType.ALL)
@JoinColumn(name = "employee_id")
protected List<EmployeeTheme> themes; 
```

我的实体`Project`目前没有`Employee`对象列表。但

```
public class EmployeeTheme implements Serializable {

    @EmbeddedId
    private EmployeeTheme PK id;

    @ManyToOne
    @JoinColumn(name = "employee_id", nullable = false, insertable = false, updatable = false)
    protected Employee employee;
} 
```

这是我的复合键类：

```
@Embeddable
public class EmployeeThemePK implements Serializable {

    @Column(name = "employee_id")
    protected Long employeeId;

    @Column(name = "theme")
    protected String theme;
} 
```

如何正确配置这些关系？

**编辑**

我已将主题和项目的列表切换为设置。我已经从我的 JSON 主题中排除了，现在我遇到了另一个例外。我还在`criteria.setFetchMode("projects", FetchMode.JOIN);`我的 DAO 类中添加了方法。

```
failed to lazily initialize a collection of role: com.package.Employee.projects,
no session or session was closed
org.hibernate.LazyInitializationException: failed to lazily initialize a 
collection of role: com.package.Employee.projects, no session or session 
was closed

Exception caught during request processing: flexjson.JSONException: Error 
trying to deepSerialize
flexjson.JSONException: Error trying to deepSerialize 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:23:22.463

触发此异常是因为您正在获取员工并急切地获取员工的主题和员工的项目。

首先，确保你真的需要两者。

其次，意识到通过这样做，你正在制作一个笛卡尔积。如果员工有 100 个项目和 100 个主题，则查询将只为该员工返回 10,000 行。也许您应该先获取员工及其项目（100 行），然后重新获取员工及其主题（再次获取 100 行）。

第三，如果笛卡尔积确实是您想要的，那么至少将其中一个集合设为 Set 而不是 List。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-15T13:48:23.967

您可以`Hibernate.initialize()`在 DAO 中使用来获取与您的主要对象相关的特定属性，这样可以避免加载数据，您可能不需要类似的东西：

```
q = this.entityManager.createQuery('SQL..');
employee= q.getSingleResult();
Hibernate.initialize(employee.themes); 
```

# java - 如何通过在 joda 中使用 id 来知道时区与 GMT 的偏移量？

> ID：13879348
> 
> 赞同：0
> 
> 时间：2012-12-14T13:11:27.180
> 
> 标签：java, mysql, jodatime

我有一个 MySQL 数据库，其中一列是类型`DATETIME`并将值存储在 IST 中（因为我的服务器时区是`IST`）。

我`EST`从用户那里得到一个两个字符串，我需要将数据库中的日期部分与该列匹配。

我正在使用这个查询：

```
SELECT * FROM my_table where date(convert_tz(`myDate`,'+05:30','-05:00'))
between  '2012-12-01' and '2012-12-02'; 
```

注意：在我的数据库`mysql.time_zone`中是空的，这意味着我不能使用`strings like`GMT `etc in my query, they instructed me to download a package, but I don't want to download it, its fine for me to use`00:05`，因为我将用 Java 构建我的查询。

这个查询运行良好，因为我已经硬编码了时区偏移量（对于`EST`.

但我担心这个查询会为属于夏令时的日期提供错误的数据，即`EDT`.

那么我如何获得时区差异（意味着它应该返回 '-05:00' 为 EST 和 '-04:00 为 EDT ）以便我可以在 java 中构建我的查询字符串时直接使用它们。

我的查询字符串可能如下所示：

```
SELECT * FROM my_table where date(convert_tz(`myDate`,'+05:30','???')) 
between '2012-12-01' and '2012-12-02'; 
```

我想要的价值在哪里？？？使用准备好的语句动态分配。

我正在使用 Joda Time API，但对它知之甚少，它是否有一些东西可以返回给我时区字符串的时区offser。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T13:15:15.750

我建议：

*   为了理智起见，您开始将值存储为 UTC。（数据不应依赖于服务器的位置。）
*   您计算 Java 中起点/终点的 UTC 值（使用`DateTime`正确时区中的集合，然后转换为 UTC）
*   您通过 SQL 参数将 UTC 开始/结束直接传递到查询中（*不要*包括 SQL 文本中的值）并避免数据库进行任何转换

如果您真的，真的不能将数据库更改为使用 UTC，则应该将“目标时区”值转换为 IST 值，然后将其传递*给*数据库。同样，查询不需要进行转换：改为预先转换您的输入。

# solr - Solr在突出显示的结果中复制单词

> ID：13879349
> 
> 赞同：0
> 
> 时间：2012-12-14T13:11:33.953
> 
> 标签：solr, double, word, highlighting, hyphen

我对 Solr 3.6.1 有一个奇怪的问题。突出显示工作正常，但搜索术语**subcontractor**时除外。

这将在结果中突出显示单词**subcontractor**，如果它有一个连字符，甚至会突出显示**subcontractor**。

但是，如果结果中确实有连字符，则突出显示的文本将按如下方式打印：

> 我们建议使用具有适当技能的分包商。

请注意**sub**一词的两倍。第一**个子**没有突出显示，但**分包商**部分突出显示。完整的未突出显示的文本可以正确读取，没有双子。

我正在使用 edismax 查询处理程序。

非常感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:22:22.670

There may be filter/tokenizer happen in the field type definition for your field.

In analyzer, the tokenizer and filter would apply on both index time & query time. So revisit your field type definition and keep the thing which is necessary. That may resolve your problem.

# php - 在类内：从函数 B 访问函数 A

> ID：13879355
> 
> 赞同：0
> 
> 时间：2012-12-14T13:11:52.610
> 
> 标签：php

我有一个问题可能不适合你们大多数人。对不起，如果这对你来说很明显......

这是我的代码：

```
class Bat
{
      public function test()
      {
        echo"ici";
        exit();
      }

      public function test2()
      {
        $this->test();
      }
} 
```

在我的控制器中：

```
bat::test2(); 
```

我有一个错误：

> 异常信息：消息：方法“test”不存在并且没有被困在 __call()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:12:59.460

Bat::test2 指的是静态函数。所以你必须声明它是静态的。

```
class Bat
{
      public static function test()
      {
        echo"ici";
        exit();
      }

      // You can call me from outside using 'Bar::test2()'
      public static function test2()
      {
        // Call the static function 'test' in our own class
        // $this is not defined as we are not in an instance context, but in a class context
        self::test();
      }
}

Bat::test2(); 
```

否则，您需要一个实例`Bat`并在该实例上调用该函数：

```
$myBat = new Bat();
$myBat->test2(); 
```

# php - 从 mysql DB 中检索多个复选框

> ID：13879358
> 
> 赞同：0
> 
> 时间：2012-12-14T13:12:07.650
> 
> 标签：php, explode, implode

我似乎无法弄清楚这一点。我有 4 个多复选框并使用 implode 存储它们......然后尝试用爆炸来抓取它们进行比较。我需要显示带有检查值的表单，因此我需要查看他们检查的内容并默认显示该框以供管理员查看。Explode 似乎没有工作，因为它将字符串存储在索引 0 上

**存储到数据库：**

```
$pulled = implode(",",$pulled); 
```

**从数据库中检索**

```
<?php          
$pulled = '{pulled}';   // (expression engine CMS field)
echo "before Explode: $pulled <br>";
  // returns:  before Explode: Tanker,End/Bottom Dump,Flatbed,Van 

$pulled = explode(",",$pulled);      
echo "after Explode: <br>";                                    
var_dump($pulled);
  // returns: after Explode: 
              array(1) { [0]=> string(8) "Tanker,End/Bottom Dump,Flatbed,Van" }  

$pos = strpos($pulled[0], 'Tanker');
if ($pos === false) {
   echo "<br><br>The string 'Tanker' was not found in the string '$pulled[0]'";
} else {
   echo "<br>The string 'Tanker' was found in the string '$pulled[0]'";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:14:47.670

它应该是：

```
if ($pulled[0] != 'Tanker') {
   echo "<br><br>The string 'Tanker' was not found in the string '$pulled[0]'";
} else {
   echo "<br>The string 'Tanker' was found in the string '$pulled[0]'";
} 
```

因为正如您在 var_dump 的结果中看到的，数组的元素 0 正是您要搜索的字符串。所以不需要做任何其他事情，只是比较它。如果这不起作用，那么你没有得到原始字符串 cvorrectly。此代码适用于我的机器：

```
$pulled = 'Tanker,End/Bottom Dump,Flatbed,Van ';
$pulled = explode(",",$pulled);      

if ($pulled[0] != 'Tanker') {
   echo "<br><br>The string 'Tanker' was not found in the string '$pulled[0]'";
} else {
   echo "<br>The string 'Tanker' was found in the string '$pulled[0]'";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:29:48.727

也许您打算在整个字符串中寻找 Tanker？

```
$pos = strpos($pulled, 'Tanker');
if ($pos === false) {
   echo "<br><br>The string 'Tanker' was not found in the string '$pulled'";
} else {
   echo "<br>The string 'Tanker' was found in the string '$pulled'";
} 
```

# git - 进行 repo 同步后如何获取源代码？

> ID：13879359
> 
> 赞同：1
> 
> 时间：2012-12-14T13:12:08.663
> 
> 标签：git, repository, gitorious, tizen

我正在使用 git 从 gitorious 下载 tizen OS 的源代码。我下载了 Repo 脚本并确保它可以通过以下命令执行：

```
 $ curl https://dl-ssl.google.com/dl/googlesource/git-repo/repo > ~/bin/repo
 $ chmod a+x ~/bin/repo 
```

然后我通过为清单指定一个 tizen-manifest URL 来运行 repo init。

```
 $ repo init -u git://gitorious.org/tizen-toys/tizen-manifest 
```

然后从我初始化的tizen-manifest中指定的存储库中将文件拉到我的工作目录中，我使用了

```
 $ repo sync 
```

我得到了 GB 的数据。但那些不是源文件。如何将其转换为源文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T06:20:09.537

repo 同步后，它将执行 checkout 以获取所有源代码。所以我们会得到源代码。这只有在完成 repo 同步后才会发生，如果 repo 同步卡在两者之间，我们可以通过执行另一个 repo 同步来恢复它。它不会从头开始

# java - 使用 SOAP Web 服务 - Java VS PHP

> ID：13879360
> 
> 赞同：2
> 
> 时间：2012-12-14T13:12:12.190
> 
> 标签：java, php, web-services, soap, servicenow

一个普遍的问题：

我们正在我们公司推出一个名为 ServiceNow 的新 ITSM 工具套件。ServiceNow 提供了很多很好的开箱即用的 Web 服务。目前我们正在实现一些与其他内部系统的接口，我们使用这些 Web 服务来使用 Servicenow 的数据。

我们是如何在**PHP**中做到的：

```
<?php
$credentials = array('login'=>'user', 'password'=>'pass');
$client = new SoapClient("https://blah.com/incident.do?WSDL", $credentials);
$params = array('param1' => 'value1', 'param1' => 'value1');
$result = $client->__soapCall('getRecords', array('parameters' => $params));
// result array stored in $result->getRecordsResult
?> 
```

就是这样！5 分钟的工作，美丽而简单——从我的角度来看。

好的，现在在**Java**中也一样：

我做了一些研究，似乎每个人都在使用 Apache Axis2 来使用 Java 中的 Web 服务。所以我决定走这条路。

1.  安装 Apache Axis
2.  打开 cygwin 或 cmd 并从 WSDL 生成类 .. WTF？做什么的？

    `$ ./wsdl2java.sh -uri https://blah.com/incident.do?WSDL`

3.  将生成的类复制到 Eclipse 中的 Java 项目。

4.  使用此类：

```
ServiceNow_incidentStub proxy = new ServiceNow_incidentStub();

proxy._getServiceClient().getOptions().setProperty(org.apache.axis2.transport.http.HTTPConstants.CHUNKED, Boolean.FALSE);
ServiceNow_incidentStub.GetRecords defectsGetRecords = new ServiceNow_incidentStub.GetRecords();
ServiceNow_incidentStub.GetRecordsResponse defectsResult = new ServiceNow_incidentStub.GetRecordsResponse();
proxy._getServiceClient().getOptions().setManageSession(true);
HttpTransportProperties.Authenticator basicAuthentication = new HttpTransportProperties.Authenticator();
basicAuthentication.setUsername("user");
basicAuthentication.setPassword("pass");
proxy._getServiceClient().getOptions().setProperty(org.apache.axis2.transport.http.HTTPConstants.AUTHENTICATE, basicAuthentication);
defectsResult = proxy.getRecords(defectsGetRecords);
com.service_now.www.ServiceNow_incidentStub.GetRecordsResult_type0[] defects = defectsResult.getGetRecordsResult();

for (int j=0; j < defects.length; j++) {
    // do something
} 
```

它的工作，但我认为这种方式非常复杂.. 每次 wsdl 中的某些内容发生变化 - 我必须使用轴重新编译它们。无法在全局范围内配置诸如 Soap-endpoint 之类的东西。

在 Java 中有没有更简单的方法来使用 WSDL 来使用 SOAP？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T08:23:07.150

首先：我完全同意。我在 Web 服务和 ServiceNow 方面做了很多工作，使用 Java 和/或 .Net 与使用脚本语言（我通常使用 Perl 编写脚本）有很大不同。固有的问题在于 WSDL 不应该经常更改，尤其是在生产中。Java 和 .Net 中的想法是让这些存根类进行编译时错误检查。

如果您目前处于 Ph1 并且尚未部署 Prod，那么您应该真正了解 WSDL 的更改频率。然后从那里决定使用哪种技术。好消息是，即使 WSDL 发生更改，将数据发布到实例 - 几乎所有字段都是可选的。因此，如果添加一个新字段，这没什么大不了的。当返回数据时（大多数情况下）会出现问题，因为如果返回的 XML 不在预期的结构中，java 和 .net 会多次抛出异常。

许多人做的一件事是将模块设置为 CMDB 中的 CI，并通过更改请求模块维护他们的 ServiceNow 实例。这样，您的 java 应用程序将成为您正在查询的任何模块/表的下游 CI，并且当放入 CR 以修改该表时，将立即知道这也会对您的内部应用程序产生影响。

不幸的是，您是对的，这是对不同语言的权衡，根据我的经验，我们几乎无法改变这一点。

我忘了添加一件事，您的另一种选择是改用 JSON 服务。这将允许您向 SNC 实例发出原始请求，然后使用 JSON 解析器“即时”为您解析该数据。它消除了编译时检查，但也消除了 SOAP 系统的许多缺陷。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T13:38:11.923

如果您使用的是 maven，请尝试使用此插件。

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>axistools-maven-plugin</artifactId>
    <version>1.4</version>
    <configuration>
        <urls>
                 <url>https://blah.com/incident.do?WSDL</url>
            </urls>
              <packageSpace>your.destination.package</packageSpace>
              <serverSide>true</serverSide>
              <outputDirectory>src/main/java</outputDirectory>
    </configuration>
    <executions>
         <execution>
            <goals><goal>wsdl2java</goal></goals>
         </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-13T21:21:58.393

我还尝试使用 Eclipse 从 Java 访问 ServiceNow，在我看来，考虑到 ServiceNow 如何设计他们的 API，Axis2 方法的限制过于严格，所以我编写了自己的包来使用 JDOM 动态生成 SOAP 调用。以下是代码的示例：

```
Instance instance = new Instance("https://blah.service-now.com", "username", "password");
GlideFilter filter = new GlideFilter("category=network^active=true");        
GlideRecordIterator iter = instance.table("incident").
    bulkFetcher().setFilter(filter).getAllRecords().iterator();
while (iter.hasNext()) {
    GlideRecord rec = iter.next();
    System.out.println(
        rec.getField("number") + " " + rec.getField("short_description"));
} 
```

关于这段代码的几件事：

1.  我使用运行时验证而不是构建时验证。如果您错误地键入 getField("shortdescription")，代码将引发 InvalidFieldNameException。
2.  查询不受 ServiceNow 的正常 250 条记录限制的约束，因为 BulkFetcher 在内部循环，根据需要进行尽可能多的 Web 服务调用以检索所有数据。

包源代码位于[https://sourceforge.net/projects/servicenowpump/](https://sourceforge.net/projects/servicenowpump/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T17:55:35.157

我在我工作的公司中使用 PHP 使用了很多 Soap 服务，并且我总是建议为请求和响应数据结构生成类。否则你很容易迷失方向——PHP 不会保留原始 XML 结构的任何残留物，它将全部转换为数组和 stdClass 对象。

在 PHP 中获取从 WSDL 描述创建的类并不是那么容易，因为只有少数几个脚本可以做到这一点 - 当涉及到 WSDL 文件时，它们都有自己的缺点，因为它们使用了 SOAP 标准中更晦涩的部分。之后，您必须以某种方式使这些类可用于您的 PHP 脚本。如果这对您来说很难，则表明代码库组织得不太好。使用自动加载功能，它就像一个魅力。

但是，是的，这一步对于 PHP 来说是完全可选的。如果只使用一种 Soap 服务，它可能没有任何区别。

# c# - MediaElement 冻结视频

> ID：13879362
> 
> 赞同：2
> 
> 时间：2012-12-14T13:12:20.743
> 
> 标签：c#, wpf

我在这段视频冻结之后应用了一些`LinearGradientBrush`动画。`MediaElement`

我尝试通过`Player1.OpacityMask = null;`但没有快乐来重置它。

顺便说一句，如果我`Opacity`对当时的视频进行动画处理，`MediaElement`那么它通常表现得很好。

有什么线索吗？`LinearGradientBrush`应用动画后如何修复视频冻结`MediaElement`？

谢谢！

```
 /// <summary>
    /// Interaction logic for WipeTransition.xaml
    /// </summary>
    public partial class WipeTransition
    {
        public WipeDirections Direction { set; get; }

        public TimeSpan Duration = TimeSpan.FromSeconds(2);

        public bool StopPrevPlayerOnAnimationStarts;

        Random rdm = new Random(1);

        bool isPlayer1;

        public WipeTransition()
        {
            InitializeComponent();

            try
            {
                Loaded += WipeTransition_Loaded;
                SizeChanged += WipeTransition_SizeChanged;

                Player1.CacheMode = new BitmapCache();
                Player1.LoadedBehavior = MediaState.Manual;

                Player2.CacheMode = new BitmapCache();
                Player2.LoadedBehavior = MediaState.Manual;

                Direction = WipeDirections.RandomDirection;

                Player1.Width = ActualWidth;
                Player2.Width = ActualWidth;

                Player1.Height = ActualHeight;
                Player2.Height = ActualHeight;

                isPlayer1 = true;
            }
            catch (Exception)
            {
            }
        }

        void WipeTransition_SizeChanged(object sender, SizeChangedEventArgs e)
        {
            Player1.Width = ActualWidth;
            Player2.Width = ActualWidth;

            Player1.Height = ActualHeight;
            Player2.Height = ActualHeight;
        }

        void WipeTransition_Loaded(object sender, RoutedEventArgs e)
        {
            Player1.Width = ActualWidth;
            Player2.Width = ActualWidth;

            Player1.Height = ActualHeight;
            Player2.Height = ActualHeight;
        }

        public void Start(Uri uri)
        {
            try
            {
                Debug.WriteLine("************** START ANIMATION ***************************************");

                Player1.Width = ActualWidth;
                Player2.Width = ActualWidth;

                Player1.Height = ActualHeight;
                Player2.Height = ActualHeight;

                // We start to Animate one of the Player is on BACK

                if (isPlayer1)
                {
                    if (StopPrevPlayerOnAnimationStarts)
                        Player2.Stop();

                    Canvas.SetZIndex(Player2, 49);

                    Canvas.SetZIndex(Player1, 50);

                    Player1.Source = uri;
                    Debug.WriteLine("Player1 - ANIMATE");

                    WipeAnimation(Player1);
                }
                else // Player2
                {
                    if (StopPrevPlayerOnAnimationStarts)
                        Player1.Stop();

                    Canvas.SetZIndex(Player1, 49);

                    Canvas.SetZIndex(Player2, 50);

                    Player2.Source = uri;
                    Debug.WriteLine("Player2 - ANIMATE");

                    WipeAnimation(Player2);
                }
            }
            catch (Exception)
            {
            }
        }

        public void WipeAnimation(FrameworkElement ObjectToAnimate)
        {
            try
            {
                LinearGradientBrush OpacityBrush = new LinearGradientBrush();

                #region Setup Wipe Direction
                switch (Direction)
                {
                    case WipeDirections.RightToLeft:
                        OpacityBrush.StartPoint = new Point(1, 0);
                        OpacityBrush.EndPoint = new Point(0, 0);
                        break;
                    case WipeDirections.LeftToRight:
                        OpacityBrush.StartPoint = new Point(0, 0);
                        OpacityBrush.EndPoint = new Point(1, 0);
                        break;
                    case WipeDirections.BottomToTop:
                        OpacityBrush.StartPoint = new Point(0, 1);
                        OpacityBrush.EndPoint = new Point(0, 0);
                        break;
                    case WipeDirections.TopToBottom:
                        OpacityBrush.StartPoint = new Point(0, 0);
                        OpacityBrush.EndPoint = new Point(0, 1);
                        break;
                    case WipeDirections.RandomDirection:
                        #region
                        int randomValue = rdm.Next(0, 3);

                        if (randomValue == 0)
                        {
                            OpacityBrush.StartPoint = new Point(1, 0);
                            OpacityBrush.EndPoint = new Point(0, 0);
                        }
                        else if (randomValue == 1)
                        {
                            OpacityBrush.StartPoint = new Point(0, 0);
                            OpacityBrush.EndPoint = new Point(0, 1);
                        }
                        else if (randomValue == 2)
                        {
                            OpacityBrush.StartPoint = new Point(0, 0);
                            OpacityBrush.EndPoint = new Point(1, 0);
                        }
                        else if (randomValue == 3)
                        {
                            OpacityBrush.StartPoint = new Point(0, 1);
                            OpacityBrush.EndPoint = new Point(0, 0);
                        }

                        #endregion
                        break;
                }

                #endregion

                GradientStop BlackStop = new GradientStop(Colors.Black, 0);
                GradientStop TransparentStop = new GradientStop(Colors.Transparent, 0);

                if (FindName("TransparentStop") != null)
                    UnregisterName("TransparentStop");
                RegisterName("TransparentStop", TransparentStop);

                if (FindName("BlackStop") != null)
                    UnregisterName("BlackStop");
                this.RegisterName("BlackStop", BlackStop);

                OpacityBrush.GradientStops.Add(BlackStop);
                OpacityBrush.GradientStops.Add(TransparentStop);
                ObjectToAnimate.OpacityMask = OpacityBrush;

                Storyboard sb = new Storyboard();
                DoubleAnimation DA = new DoubleAnimation() { From = 0, To = 1, Duration = Duration };
                DoubleAnimation DA2 = new DoubleAnimation() { From = 0, To = 1, Duration = Duration };
                sb.Children.Add(DA); sb.Children.Add(DA2);
                Storyboard.SetTargetName(DA, "TransparentStop");
                Storyboard.SetTargetName(DA2, "BlackStop");
                Storyboard.SetTargetProperty(DA, new PropertyPath("Offset"));
                Storyboard.SetTargetProperty(DA2, new PropertyPath("Offset"));

                sb.Duration = Duration;
                sb.Completed += sb_Completed;

                sb.Begin(this);

                if (isPlayer1)
                {
                    Player1.Play();
                }
                else // Player2
                {
                    Player2.Play();
                }
            }
            catch (Exception)
            {
            }
        }

        void sb_Completed(object sender, EventArgs e)
        {
            if (isPlayer1)
            {
                Player1.OpacityMask = null;
                isPlayer1 = false;
                Player2.Stop();
                Player2.Source = null;
            }
            else // Player2
            {
                Player2.OpacityMask = null;
                isPlayer1 = true;
                Player1.Stop();
                Player1.Source = null;
            }

            Debug.WriteLine("************** END ANIMATION ***************************************");
        }

        public void Stop()
        {
            if (Player1.IsEnabled)
                Player1.Stop();

            if (Player2.IsEnabled)
                Player2.Stop();
        }
    } 
```

更新：

**[应用着色器](http://wpffx.codeplex.com/)**效果后会发生同样的问题。所以视频在它之前和之后它是跳跃/冻结的。看来我们必须以某种方式重置`MedieElement`或？

```
 private void Button_Click_1(object sender, RoutedEventArgs e)
        {
            TransitionEffect[] effectGroup = transitionEffects[1];
            TransitionEffect effect = effectGroup[1];

            DoubleAnimation da = new DoubleAnimation(0.0, 1.0, new Duration(TimeSpan.FromSeconds(2.0)), FillBehavior.HoldEnd);
            da.AccelerationRatio = 0.5;
            da.DecelerationRatio = 0.5;
            da.Completed += da_Completed;
            effect.BeginAnimation(TransitionEffect.ProgressProperty, da);

            VisualBrush vb = new VisualBrush(this.Player1);
            vb.Viewbox = new Rect(0, 0, this.Player1.ActualWidth, this.Player1.ActualHeight);
            vb.ViewboxUnits = BrushMappingMode.Absolute;

            effect.OldImage = vb;
            this.Player1.Effect = effect;
        } 
```

# c - C 为包含多个 char* 的结构数组分配内存

> ID：13879371
> 
> 赞同：1
> 
> 时间：2012-12-14T13:12:58.137
> 
> 标签：c, memory-management

我在为包含 char* 的结构数组分配内存时遇到问题。

我有一个结构“人”

```
typedef struct
{
    char *name;
    char *surname;
    char *phonenumber;
} Person; 
```

我想要做的是从文件中读取一些数据并填充我必须动态分配内存的人的数组（ **Person *array ）。**

* * *

目前，我有这样的事情：

```
array = malloc(sizeof(Person) * arraysize);
Person *buff;
char   text[100];
char   *result;

for(i=0; i<arraysize; i++)
{
    buff = &array[i];
    fgets(text, 100, f );

    //Read first name
    result = strtok(text,":");
    buff->name= malloc(strlen(result));
    buff->name= result;

    //Read surname
    result  = strtok(0,":");
    buff->surname = malloc(strlen(result));
    buff->surname = result;

    //Read phone number
    result = strtok(0, ":");
    buff->phonenumber = malloc(strlen(result));
    buff->phonenumber = result;
} 
```

当我打印出整个数组时，我没有得到任何有效数据。我想知道我做错了什么。我提前感谢您的回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T13:14:33.207

```
buff->name= result 
```

将指针重置为指向`buff->name`内存中与 . 相同的位置`result`。如果要复制 的字符串内容`result`，请使用`strcpy`：

```
strcpy(buff->name, result); 
```

但请注意，您还必须在调用中为尾随 NUL 字符保留空间`malloc`：

```
buff->name = malloc(strlen(result) + 1); 
```

如果您使用的是 POSIX 系统（Linux、Mac OS X、任何 Unix），您可以替换`malloc`,`strlen`并且`strcpy`更方便`strdup`：

```
buff->name = strdup(result); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T13:15:59.010

问题是：

```
result = strtok(text,":");
buff->name= malloc(strlen(result));
buff->name= result; 
```

您需要使用 strcpy 进行复制，并且 malloced 字符串的长度应该比字符串长度大一以容纳 NUL 字符。

```
buff->name= malloc(strlen(result) + 1); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T13:16:05.160

这：

```
buff->name= malloc(strlen(result));
buff->name= result; 
```

被打破。您不能像在 C 中那样分配“字符串”，您需要复制字符。返回的指针`malloc()`被 覆盖`result`，内存泄漏。此外，您需要为终结器留出空间。

所以，这应该是：

```
buff->name= malloc(strlen(result) + 1);
strcpy(buff->name, result); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-14T13:16:55.970

`strtok`每次都覆盖指针。因此，随着迭代的进行，您会丢失指向数据的指针。

如果您希望直接分配指针，您可以执行以下操作：

```
 result = strtok(text,":");
  buff->name= strdup(result); 
```

**[strdup](http://www.kernel.org/doc/man-pages/online/pages/man3/strdup.3.html)**是 POSIX 函数。因此，如果它不可用，您可以轻松实现它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-14T13:17:11.810

您需要将结果中的文本复制到新分配的内存块中。现在您只需分配内存（将指针分配给指针），然后丢弃该指针并为其分配一个新的指针结果。您需要将结果 strncpy 到新的内存分配中。此外 strlen 不包括终止零字节，因此您在新内存块中没有足够的空间。有一个函数 strdup 可以满足您的需求。

# iphone - CAKeyframeAnimation 崩溃

> ID：13879375
> 
> 赞同：2
> 
> 时间：2012-12-14T13:13:03.877
> 
> 标签：iphone, ios, core-animation

我正在尝试使用以下代码制作一个简单的 CAKeyframeAnimation：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    CALayer *rotLayer = [CALayer layer];
    rotLayer.bounds = CGRectMake(0.0, 0.0, 100.0, 50.0);
    rotLayer.anchorPoint = CGPointMake(0.5, 0.5);
    rotLayer.position = CGPointMake(160.0, 200.0);
    rotLayer.backgroundColor = [UIColor redColor].CGColor;

    [self.view.layer addSublayer:rotLayer];

    /*
    CABasicAnimation *basic = [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
    basic.duration = 3.0;
    basic.fromValue = [NSNumber numberWithFloat:0.0];
    basic.toValue = [NSNumber numberWithFloat:2.0];

    [rotLayer addAnimation:basic forKey:@"basic"];
    */

    CAKeyframeAnimation *animation = [CAKeyframeAnimation animationWithKeyPath:@"transform.rotation.z"];
    animation.duration = 3.0;
    animation.keyTimes = @[ [NSNumber numberWithFloat:0.0], [NSNumber numberWithFloat:1.0] ];
    animation.values = @[ [NSNumber numberWithFloat:0.0], [NSNumber numberWithFloat:2.0] ];
    animation.timingFunctions = @[ [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear], [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear] ];
    animation.fillMode = kCAFillModeForwards;
    animation.removedOnCompletion = NO;

    [rotLayer addAnimation:animation forKey:@"test"];   
} 
```

如果我使用基本动画而不是关键帧之一，一切都会按预期工作，但如果我在模拟器中运行此代码，它会崩溃并显示以下消息：

```
 -[CAKeyframeAnimation _copyRenderAnimationForLayer:]: unrecognized selector sent to instance 0x7558870
 *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[CAKeyframeAnimation _copyRenderAnimationForLayer:]: unrecognized selector sent to instance 0x7558870' 
```

这是一个启用 ARC 的新项目。即使将动画设置为属性也不起作用。QuartzCore 框架也是链接。我错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T17:57:42.367

当我运行此代码时，它工作得很好（一个红色矩形围绕锚点旋转，该锚点位于矩形的中心）。

你确定你正确链接了 QuartzCore 框架吗？你导入`<QuartzCore/QuartzCore.h>`到你的实现文件中了吗？它看起来像是`_copyRenderAnimationForLayer:`一种内部的 Apple 方法，所以我不质疑它的存在。但是，如果您没有正确链接或导入文件，您的应用程序将不知道该方法存在，然后抛出您看到的异常。

# r - 循环数据框中的子组

> ID：13879377
> 
> 赞同：0
> 
> 时间：2012-12-14T13:13:11.897
> 
> 标签：r, loops, dataframe, grouping, subset

我昨天收到了答复，但有一件事不是 100% 正确的。我的数据框简短：

```
ID  IDaxis  Y   Date-Time               Tdiff  
1   1       5   2012-06-11  13:10:30    0.00    
1   1       10  2012-06-11  15:10:30    2.00    
1   1       20  2012-06-11  17:10:30    2.00    
1   3       15  2012-06-11  13:20:30    0.00    
1   3       30  2012-06-11  14:20:30    1.00    
1   3       45  2012-06-11  17:20:30    3.00    
1   6       9   2012-06-11  13:35:30    0.00        
1   6       15  2012-06-11  15:35:30    2.00    
1   6       30  2012-06-11  18:35:30    3.00    
3   2       8   2012-06-11  13:50:30    0.00  
3   2       14  2012-06-11  14:55:30    1.083   
3   2       20  2012-06-11  16:55:30    2.00    
3   2       30  2012-06-11  19:00:30    2.083   
3   5       10  2012-06-11  13:40:30    0.00    
3   5       15  2012-06-11  16:45:30    3.083 
```

ID - 植物
IDaxis - 植物叶片
Y - 叶长
Date - Time - 测量日期和时间
Tdiff - time(h) 测量间隔

我想要做：

1.  在 SHORT$Ttot 列中汇总 IDaxis 的 Tdiff
2.  计算 SHORT$Ydiff 列中 IDaxis 的 Y 行之间的差异
3.  总结 SHORT$Ytot 列中 IDaxis 的 Ydiff

代码：

1.  `SHORT$Ttot <- ave(SHORT$Tdiff, SHORT$IDaxis, FUN = cumsum)`效果很好
2.  `SHORT$Ydiff <- ave(SHORT$Y, SHORT$IDaxis, FUN = diff)`

在这里我有一个问题。Ydiff 应该看起来像这样（新 IDxais 的第一行等于=0）：

```
ID  IDaxis  Y   Ydiff
1   1       5   0
1   1       10  5
1   1       20  10
1   3       15  0
1   3       30  15
1   3       45  15
1   6       9   0 
```

但是 Ydiff 看起来像这样：

```
ID  IDaxis  Y   Ydiff
1   1       5   5
1   1       10  10
1   1       20  -5
1   3       15  15
1   3       30  15
1   3       45  15
1   6       9  -36 
```

这搞砸了所有代码：

3.`SHORT$Ytot <- ave(SHORT$Ydiff, SHORT$IDaxis, FUN = cumsum)`

如果您可以用一段代码来回答，那将非常有帮助。
*我刚刚开始使用 R，但这是我的数据框的简化版本 - 只是为了显示问题。我有三个数据框，每个 700 ID，每个都有 100 IDaxis 和 25 个变量。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:40:59.593

您必须将第二个`ave`命令中的函数更改为：

```
function(x) c(0, diff(x)) 
```

这是必要的，因为 的输出`diff`长度比原始向量短（差为 1）。只需将零添加到由`diff`. 这确保每个子组的第一个值为零。

完整代码：

```
SHORT$Ttot <- ave(SHORT$Tdiff, SHORT$IDaxis, FUN = cumsum)
SHORT$Ydiff <- ave(SHORT$Y, SHORT$IDaxis, FUN = function(x) c(0, diff(x)))
SHORT$Ytot <- ave(SHORT$Ydiff, SHORT$IDaxis, FUN = cumsum) 
```

结果：

```
 ID IDaxis  Y            Date.Time Tdiff  Ttot Ydiff Ytot
1   1      1  5 2012-06-11  13:10:30 0.000 0.000     0    0
2   1      1 10 2012-06-11  15:10:30 2.000 2.000     5    5
3   1      1 20 2012-06-11  17:10:30 2.000 4.000    10   15
4   1      3 15 2012-06-11  13:20:30 0.000 0.000     0    0
5   1      3 30 2012-06-11  14:20:30 1.000 1.000    15   15
6   1      3 45 2012-06-11  17:20:30 3.000 4.000    15   30
7   1      6  9 2012-06-11  13:35:30 0.000 0.000     0    0
8   1      6 15 2012-06-11  15:35:30 2.000 2.000     6    6
9   1      6 30 2012-06-11  18:35:30 3.000 5.000    15   21
10  3      2  8 2012-06-11  13:50:30 0.000 0.000     0    0
11  3      2 14 2012-06-11  14:55:30 1.083 1.083     6    6
12  3      2 20 2012-06-11  16:55:30 2.000 3.083     6   12
13  3      2 30 2012-06-11  19:00:30 2.083 5.166    10   22
14  3      5 10 2012-06-11  13:40:30 0.000 0.000     0    0
15  3      5 15 2012-06-11  16:45:30 3.083 3.083     5    5 
```

# c# - 当 xml 缩进时，XMLREADER 给出不同的结果

> ID：13879378
> 
> 赞同：1
> 
> 时间：2012-12-14T13:13:11.163
> 
> 标签：c#, xml, xml-parsing, xmlreader

我在两个不同的文件中有相同的 XML。在一个文件中，XML 是缩进的——另一个不是。XML如下：

```
<?xml version="1.0" encoding="utf-8" ?>
<test>
  <element1></element1>
  <element2></element2>
  <element3></element3>
</test> 
```

使用以下代码时，这两个文件得到不同的结果：

```
XmlReaderSettings settings = new XmlReaderSettings
{
   IgnoreComments = true,
   IgnoreWhitespace = false,
   IgnoreProcessingInstructions = true
};

using (XmlReader reader = XmlReader.Create(invoiceStream, settings))
{
  reader.MoveToContent();
  reader.Read();
  var prevLocalname = reader.LocalName;
  var element = XNode.ReadFrom(reader) as XElement;
  var newLocalname = reader.LocalName;
} 
```

使用缩进文件，我得到以下值：

```
prevLocalname = "";
newLocalname = "element1"; 
```

在文件未缩进的情况下，我得到以下值：

```
prevLocalname = "element1";
newLocalname = "element2"; 
```

谁能解释一下？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T13:18:13.867

当然 - 在缩进形式中，您有一个文本节点，您将获得其本地名称（为空）。然后，您将移动到下一个节点，即`element1`元素。

在非缩进形式中，没有文本节点，因此您将获得本地名称`element1`开始，而当您移动到下一个元素时，它正在读取`element2`。

如果您告诉`XmlReader`忽略不相关的空白，则差异将消失 - 但您可能会丢失您*希望*空白被视为相关的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:18:08.797

您是否设置了以下值？

```
settings.IgnoreWhitespace = true; 
```

**[编辑]**

可能您想更改`settings`：

```
XmlReaderSettings settings = new XmlReaderSettings
{
   IgnoreComments = true,
   //IgnoreWhitespace = false,
   IgnoreWhitespace = true,
   IgnoreProcessingInstructions = true
}; 
```

# asp.net-mvc - 为什么我应该将 WCF 与 MVC 一起使用？

> ID：13879379
> 
> 赞同：6
> 
> 时间：2012-12-14T13:13:19.010
> 
> 标签：asp.net-mvc, wcf

我正在测试 ASP.NET MVC 3。

对于 ajax 调用，我可以使用 MVC 控制器方法或 WCF 服务。但是，如果我可以用 MVC 做到这一点，我为什么要使用 WCF 呢？

我的问题是：我是否应该将 WCF 服务与 MVC 一起使用？为什么？在哪种情况下？

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T13:20:34.057

WCF 是用于开发 Web 服务的框架。Web 服务的理念是将用于提供原始数据的功能与用于处理数据并将其提供给最终用户的功能分离。这样做有几个好处：

*   如果您提供 API，您不知道如何使用数据。您只想将原始数据提供给一组应用程序，并让这些应用程序处理其余部分。Web 服务就是这样做的……它打开应用程序的数据层，同时关闭其余部分。
*   它可以通过强制松耦合来提高数据层的可维护性。松散耦合意味着应用程序的组件不会相互缠绕。这是一件好事，因为它可以更轻松地对应用程序的某些部分进行修改，而不会破坏其余部分。例如，如果了解给定的函数调用将返回一个设置的 JSON 对象，您可以更改为该对象提供数据的数据库的表结构，而不会干扰消费应用程序的代码。只要您通过始终以相同格式提供相同类型的数据来维护预定义的数据合同，这就会起作用。另一方面，如果数据库查询、连接字符串等都被硬编码到您的应用程序中，那么修改您的数据库逻辑就会变得更加困难。

在您的情况下，如果您只是开发一个中小型 Web 应用程序并且无意启动 API 或类似服务，则可能不需要 WCF。

但是请记住，虽然您可能不需要为您的应用程序编写 WCF 服务，但您仍应尝试像使用服务一样松散耦合您的应用程序层。您可以通过将数据访问代码或对象（实体）定义代码拆分为单独的项目来做到这一点。松耦合，无论是使用 WCF 还是仅使用 MVC 实现，都可以让您的项目维护更简单、更轻松、更实惠，总体而言，这是一个非常好的实践。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T13:18:44.947

MVC 很好，你真的不需要 WCF。MVC 创建某种 REST API（您的所有操作方法都有自己的 URL，您可以使用它来调用该方法），因此您可以使用它。

# c# - 从 Silverlight HashTable 转换为 IDictionary 的问题

> ID：13879383
> 
> 赞同：0
> 
> 时间：2012-12-14T13:13:30.103
> 
> 标签：c#, .net, silverlight, collections, dictionary

我目前正在更新一些现有的 Silverlight 代码并将帮助程序类移动到 Silverlight 5 库中，但我正在努力将 HashTable 实现更改为 IDictionary 实现，如下所示。

此功能允许对枚举进行属性化，从而允许查找字符串值。

代码编译但`stringValues.Add(value, attrs[0]);`在类中的行中失败，`ParseEnumStrings`并具有以下异常详细信息。

知道我在转换代码时做错了什么吗？

**例外**

```
The value "Today" is not of type "System.Type" and cannot be used in this generic collection.
Parameter name: key.

   at System.ThrowHelper.ThrowWrongKeyTypeArgumentException(Object key, Type targetType)
   at System.Collections.Generic.Dictionary`2.System.Collections.IDictionary.Add(Object key, Object value)
   at Silverlight.Helper.Enums.ParseEnumStrings.GetStringValue(Enum value) in Z:\Perforce\Development\Microsoft .Net\dotNet 4.0\Silverlight 5\Helper\Helper\Enums\ParseEnumStrings.cs:line 25
   at QSmartFaultsByZone.Web.Models.QSmartService.GetRTF(Int32 buID, String zones, ReportTimePeriod time) in Z:\Perforce\Development\Microsoft .Net\dotNet 4.0\Silverlight 5\QSmart Faults By Zone\QSmartFaultsByZone.Web\Models\QSmartService.cs:line 114
   at GetRTF(DomainService , Object[] )
   at System.ServiceModel.DomainServices.Server.ReflectionDomainServiceDescriptionProvider.ReflectionDomainOperationEntry.Invoke(DomainService domainService, Object[] parameters)
   at System.ServiceModel.DomainServices.Server.DomainOperationEntry.Invoke(DomainService domainService, Object[] parameters, Int32& totalCount)
   at System.ServiceModel.DomainServices.Server.DomainService.Query(QueryDescription queryDescription, IEnumerable`1& validationErrors, Int32& totalCount) 
```

**枚举**

```
public enum ReportTimePeriod 
{
    [StringValue("Today")]
    Today = 0,
    [StringValue("Twenty Four Hours")]
    TwentyFourHours = 1,
    [StringValue("Week")]
    Week = 2,
    [StringValue("Month")]
    Month = 3
} 
```

**字符串值属性**

```
public class StringValueAttribute : Attribute
{
    private readonly string value;

    public StringValueAttribute(string value)
    {
        this.value = value;
    }

    public string Value
    {
        get { return this.value; }
    }
} 
```

**旧版 HashTable 类**

```
public class ParseEnumStrings
{
    private static Hashtable _stringValues = new Hashtable();

    public static string GetStringValue(Enum value)
    {
        string output = null;
        Type type = value.GetType();

        //Check first in our cached results...
        if (_stringValues.ContainsKey(value))
            output = (_stringValues[value] as StringValueAttribute).Value;
        else
        {
            //Look for our 'StringValueAttribute' 
            //in the field's custom attributes
            FieldInfo fi = type.GetField(value.ToString());
            StringValueAttribute[] attrs =fi.GetCustomAttributes(typeof(StringValueAttribute),false) as StringValueAttribute[];
            if (attrs.Length > 0)
            {
                _stringValues.Add(value, attrs[0]);
                output = attrs[0].Value;
            }
        }

        return output;
    } 
```

**新的字典实现**

```
public class ParseEnumStrings
{
    private static IDictionary stringValues = new Dictionary<Type, StringValueAttribute>();

    public static string GetStringValue(Enum value)
    {
        string result = string.Empty;
        Type type = value.GetType();

        if (stringValues.Contains(value))
            result=(stringValues[value] as StringValueAttribute).Value;
        else
        {
            FieldInfo f = type.GetField(value.ToString());
            StringValueAttribute[] attrs = f.GetCustomAttributes(typeof(StringValueAttribute), false) as StringValueAttribute[];
            if (attrs.Length > 0)
            {
                stringValues.Add(value, attrs[0]);
                result = attrs[0].Value;
            }
        }

        return result;
    }
} 
```

**执行**

```
return (from rft in qs.spBusinessProductsRFTTodayV2(zones, buID, ParseEnumStrings.GetStringValue(time))
        select new RightFirstTimeReportDto
        {
            Builds=rft.Builds,
            BuildsWithFaults=rft.BuildsWithFaults,
            Name=rft.Name,
            RightFirstTime=rft.RFT,
            ZoneID=rft.ZoneID
        }).ToList(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:38:34.437

问题是，您的字典`TKey`是`System.Type`，但您希望将枚举的值用作键。字典的类型可能应该是`IDictionary<object, StringValueAttribute>`

（另外，您在第二个版本中使用`Contains`而不是`ContainsKey`。虽然文档确实说明`IDictionary.Contains`应该查看密钥，所以我不完全确定为什么这不能达到您的预期。）

# shell - shell:Common Startup 作为 XCOPY 的参数

> ID：13879384
> 
> 赞同：0
> 
> 时间：2012-12-14T13:13:43.893
> 
> 标签：shell, windows-7, batch-file, windows-xp

我有一个简单的批处理脚本，可以将文件复制到启动文件夹，但似乎我不能使用 shell:Common Startup 作为 xcopy 的参数。我试过这个

```
xcopy hurrdurr.exe "shell:Common Startup" 
```

和许多其他变体，但它们不起作用。顺便说一句，如果这确实有效，那么“hurrdurr.exe”将在每次启动时运行，假设我通过 uac 获得许可来执行 xcopy 操作？使用环境变量会更好吗？有问题的操作系统是 Windows XP 并继续进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:34:14.450

我不确定为什么你的 shell 命令不起作用，但如果你需要让你的程序在启动时加载，那么我更喜欢使用注册表，它更干净、更简单，这意味着你不必复制其他地方的文件，特别是如果该文件依赖于其他东西。

```
reg add HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Run /v "Hurrdurr" /d "hurrdurr.exe" /f 
```

只需以管理员身份运行 cmd 即可：)

如果你确实想使用启动文件夹，在 Win7 上你可以使用

```
"%appdata%\Microsoft\Windows\Start Menu\Programs\Startup" 
```

我还将使用@David 建议的快捷方式，而不是复制实际文件。

# apprequests - 邀请 Facebook 好友自定义 uri

> ID：13879385
> 
> 赞同：5
> 
> 时间：2012-12-14T13:13:44.703
> 
> 标签：apprequests, invite, facebook-app-requests

我想知道是否可以使用 FB.ui 邀请朋友到我的 Web 应用程序的自定义页面，但不能邀请它的索引。

Apprequests 方法似乎没有任何参数作为可自定义的 uri

```
 FB.ui({method: 'apprequests',
    message: 'yay!',
  }); 
```

如果使用 FB.ui 无法实现，我很乐意接受任何其他选项。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:48:16.843

默认情况下，邀请将始终将用户发送到您的应用程序的默认画布 URL。你应该做的是在索引页面上检测这个 URL，然后将它们重定向到你真正希望它们去的地方。

执行此操作的方法是`request_ids`在 URL ( `$_GET`) 中查找 ，然后执行 API 调用`/$request_id`来验证它。然后您可以将用户重定向到您想要的任何页面（JavaScript 重定向或 PHP 标头重定向）。

# javascript - facebook-php-sdk 是否可以在状态更新中不留下“via”的情况下发布到用户的墙上？

> ID：13879392
> 
> 赞同：2
> 
> 时间：2012-12-14T13:14:07.810
> 
> 标签：javascript, php, facebook, facebook-graph-api, facebook-php-sdk

[我的目标：]

我想在我的网站上为用户提供一个 facebook 登录按钮，让他们填写一个表格，该表格将从我的网站将状态更新发布到他们的墙上，这样他们就不必离开我的网站去访问 facebook。

【情况：】

我正在使用此处找到的 facebook php 软件开发工具包： [https ://github.com/facebook/facebook-php-sdk](https://github.com/facebook/facebook-php-sdk)

examples/with_js_sdk.php 演示脚本用于显示用户的帐户信息。

我已经对其进行了编辑，因此它通过对脚本进行以下更改，将新的状态更新发布到用户的墙上，并带有“测试此 api”：

```
$user_profile = $facebook->api('/me');

$facebook->api(
array(
'method' => 'users.setStatus'
, 'status' => 'testing this api'
, 'uid'    => $user_profile['id']
)
); 
```

登录按钮显示：

[我的问题：] 我遇到的问题是，与用户实际手动发布到他们的墙上不同，通过 api 发布包含指向发布它的 api 的链接。因此，他们在 facebook 上的帖子看起来像：

4 秒前正在通过 MyAPINameWithALinkToThePageIDontWantPeopleToKnow 测试此 API

我不希望 API 在他们墙上的用户状态更新中包含“通过”部分。

[我的问题：]

我想要的，至于省略用户帖子中的“通过”部分，可以通过facebook api吗？

[我尝试过的：] 我尝试过浏览 facebook api 文档。我试过用谷歌搜索这个问题，发现了类似的问题： [https ://stackoverflow.com/questions/12756777/remove-app-name-in-app-post-feed-using-facebook-javascript-sdk](https://stackoverflow.com/questions/12756777/remove-app-name-in-app-post-feed-using-facebook-javascript-sdk) [http://www .vbforums.com/showthread.php?658541-Facebook-omit-quot-via-app-name-quot-from-Wall-posts](http://www.vbforums.com/showthread.php?658541-Facebook-omit-quot-via-app-name-quot-from-Wall-posts) 似乎无望...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T05:44:13.450

然后我发现通过提要对话框这是不可能的。因此，我使用[Open Graph 操作](http://developers.facebook.com/docs/opengraph/)来完成此操作。

使用它来使您的应用程序更智能:)

# git - Git - .gitignore 忽略整个 repo 中的文件夹

> ID：13879394
> 
> 赞同：3
> 
> 时间：2012-12-14T13:14:12.537
> 
> 标签：git

有没有可能

```
foo/ 
```

在 .gitignore 但不要忽略

```
 bar/foo 
```

不加

```
 !bar/foo 
```

到 .gitignore

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-14T13:17:30.967

改为使用`/foo/`，`/`匹配路径的开头。从[gitignore](http://kernel.org/pub/software/scm/git/docs/gitignore.html)手册页：

> 前导斜杠匹配路径名的开头。例如，“/*.c”匹配“cat-file.c”但不匹配“mozilla-sha1/sha1.c”。

# sencha-touch - Sencha Touch 中的 AutoCreate - 为什么需要它？

> ID：13879396
> 
> 赞同：1
> 
> 时间：2012-12-14T13:14:15.953
> 
> 标签：sencha-touch, sencha-touch-2

我在 Sencha Touch 文档中看到了这段代码。如果 autoCreate 设置为 false，信息面板视图会发生什么情况？不确定我是否理解为什么必须指定 autoCreate。如果使用对象类型 ref 而不是简单类型，它是否不能在幕后执行此操作？

```
refs: {
    main: '#mainTabPanel',
    loginButton: '#loginWindow button[action=login]',

    infoPanel: {
        selector: 'infopanel',
        xtype: 'infopanel',
        autoCreate: true
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:22:56.593

我只是在我的一个项目中替换了几行代码以使用`autoCreate`.

这是我以前做的：

```
refs: {
  detailsView: 'detailsview'
},

...

var view = (!this.getDetailsView()) ? Ext.create('App.view.DetailsView') : this.getDetailsView();
nav.push(view); 
```

我曾经通过调用 getter 检查是否创建了视图`this.getDetailsView()`。如果没有创建，我创建了它，否则我只是使用了对它的引用。

现在，我正在使用 autoCreate，这就是我所做的：

```
refs: {
  detailsView: {
    selector: 'detailsview',
    xtype: 'detailsview',
    autoCreate: true
  }
},

...

var view = this.getDetailsView()
nav.push(view); 
```

调用 getter`this.getDetailsView()`将使用对已创建组件的引用或创建它。

希望这可以帮助

# wpf - WPF 状态栏，拉伸文本块以占用尽可能多的空间

> ID：13879397
> 
> 赞同：6
> 
> 时间：2012-12-14T13:14:26.140
> 
> 标签：wpf, xaml, statusbar

我用 3 个 TextBlocks 创建了自己的简单状态栏控件。现在我希望第一个 Textblock 占用尽可能多的空间。我似乎没有完成..现在只需要显示文本所需的空间。

XAML：

```
 <StatusBar Background="{StaticResource GradientBrush}">
<StatusBar.ItemsPanel>
  <ItemsPanelTemplate>
    <Grid>
      <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
      </Grid.RowDefinitions>
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="Auto" />
      </Grid.ColumnDefinitions>
    </Grid>
  </ItemsPanelTemplate>
</StatusBar.ItemsPanel>
<StatusBarItem HorizontalAlignment="Left"
               HorizontalContentAlignment="Right">
  <Border BorderThickness="1"
          BorderBrush="Black"
          Padding="5 0 5 0"
          Background="White">
    <TextBlock Text="{Binding Message, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
             Foreground="{Binding TextColorMessage}"
             Background="White"
             />
  </Border>
</StatusBarItem>
<Separator Grid.Column="1" />
<StatusBarItem Grid.Column="2"
               HorizontalAlignment="Right">
  <TextBlock Text="{Binding Path=DatabaseName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
</StatusBarItem>
<Separator Grid.Column="3" />
<StatusBarItem Grid.Column="4"
               HorizontalAlignment="Right">
  <TextBlock Text="{Binding Path=ComputerName}" />
</StatusBarItem> 
```

![我的状态栏](../Images/df1a718b9bd4f570d8fa34479aca5e1c.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-14T13:32:30.677

嗯，这很简单：您设置了 StatusBarItem Horizo​​ntalAlignment="Left"，而它应该是“strech”，对于 Horizo​​ntalContentAlignment 也是如此。还建议在边框上设置 margin=0 。这就是我所做的，所以它对我有用：

```
<StatusBarItem HorizontalAlignment="Stretch"
               HorizontalContentAlignment="Stretch">
    <Border BorderThickness="1"
            BorderBrush="Black"
            Margin="0"
            Padding="5 0 5 0"
            Background="White">
        <TextBlock Text="{Binding Message, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                   Foreground="{Binding TextColorMessage}"
                   Background="White"/>
    </Border>
</StatusBarItem> 
```

如果这有帮助，请标记为答案

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-14T13:32:25.617

尝试将 StatusBarItem 的`HorizontalAlignment`和设置`HorizontalContentAlignment`为`Stretch`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-27T08:09:26.953

将 StatusBarItem 的 Horizo​​ntalContentAlignment 设置为 Stretch，将 TextBlock 的 TextAlignment 属性设置为 Right。（只有第一个 StatusBarItem 需要第二个设置，因为您似乎尝试将文本与其中的右侧对齐。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-20T10:23:06.410

StatusBar 只有一个 Horizo​​ntalAlignment=Right 项生效，因此您只能在想要的位置获得最后一项。您可以设置 statusBar 的 FlowDirection="RightToLeft" 并以相反的顺序添加项目。细节：右边放置的物品不需要StatusBarItem包围，但左边的需要拉伸。以下代码：

```
<StatusBar VerticalAlignment="Bottom" FlowDirection="RightToLeft"><!--flow right to left cause items right aligned-->
    <!--make item's flow back left to right, avoid display disorder-->
    <TextBlock x:Name="textBlock_status_R1" Text="111.147.168.20" Grid.Column="2" Margin="10,0" FlowDirection="LeftToRight"/>
    <Separator/>
    <TextBlock x:Name="textBlock_status_R2" Text="Working" Margin="10,0" FlowDirection="LeftToRight"/>
    <Separator/>
    <!--To fill rest space，need StatusBarItem packing and default HorizontalAlignment="Stretch"-->
    <StatusBarItem FlowDirection="LeftToRight">
        <TextBlock x:Name="textBlock_status_L1" Text="Information here."/>
    </StatusBarItem>
</StatusBar> 
```

# android - 如何在相机预览上添加文字？

> ID：13879403
> 
> 赞同：2
> 
> 时间：2012-12-14T13:14:36.377
> 
> 标签：android, video, camera, audio-recording

> **可能重复：**
> [将图像叠加到相机预览 SurfaceView](https://stackoverflow.com/questions/3548666/overlay-images-onto-camera-preview-surfaceview)

您好我想创建一个自定义相机预览小部件并在预览时显示当前时间。如何在预览和录制视频上添加文本。请给我一些想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T13:22:40.893

这个问题已经回答了。参考这个线程：

[将图像叠加到相机预览 SurfaceView](https://stackoverflow.com/questions/3548666/overlay-images-onto-camera-preview-surfaceview)

这是带有示例代码的博客文章：

[http://android-er.blogspot.in/2010/12/add-overlay-on-camera-preview.html](http://android-er.blogspot.in/2010/12/add-overlay-on-camera-preview.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T13:22:33.327

您可以在 RelativeLayout 中添加您的 SurfaceView（显示视频的那个）。RelativeLayout 允许您将视图相对放置。例如，您可以定义视图 A 始终位于视图上方和父视图的右侧。由于此布局允许您将视图彼此相对放置，因此您也可以将视图放置在彼此之上。因此，您可以在此布局中放置一个 SurfaceView，该布局填充整个 RelativeLayout，然后在此布局中也放置一个 TextView，该布局始终位于父级左上角。TextView 然后将覆盖 SurfaceView，因为它与 SurfaceView 无关。

# c# - CefSharp 是多线程的吗？

> ID：13879409
> 
> 赞同：4
> 
> 时间：2012-12-14T13:15:09.183
> 
> 标签：c#, chromium-embedded, cefsharp

我在 C# 应用程序中使用 CEFSharp，我需要在至少 10 个 WebView 中一次加载多个 url。但是它不能作为多线程工作。有没有办法在多线程中运行它，否则我必须使用特定的编译选项从源代码重建？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T03:56:23.673

它有效，尽管它还不够好。基于 CefSharp.Example，更改： 1) 应用程序（或进程）仅调用一次 ExamplePresenter.Init() 或 CEF.Initialize(settings)；2) 仅当应用程序（或进程）退出时，执行“CEF.Shutdown(); System.Environment.Exit(0);”

# iphone - 不能继承NSNumber，NSNull，...，为什么？

> ID：13879413
> 
> 赞同：1
> 
> 时间：2012-12-14T13:15:29.513
> 
> 标签：iphone, objective-c, ios

为 iOS 应用程序编码，我发现有潜在的理由禁止继承 NSNumber、NSNull、...blabla。

如果我尝试这样做，编译器不会失败，但运行会立即崩溃而没有任何使用信息，有人知道原因吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T13:19:42.937

[子类化注释](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNumber_Class/Reference/Reference.html)

> 与任何类集群一样，如果创建 NSNumber 的子类，则必须覆盖其超类 NSValue 的原始方法。此外，您的 NSValue 方法 objCType 的实现可以返回一组受限的返回值，以便利用非原始方法的抽象实现。有效的返回值为“c”、“C”、“s”、“S”、“i”、“I”、“l”、“L”、“q”、“Q”、“f”和“d”。

更准确地说，我相信这是因为您实际上从未有过 NSNumber 的实例。Objective-C 有一个有趣的属性，即类的初始化程序实际上可以更改 self 指向的对象（这实际上可能适用于任何方法，但我只听说过它在 init 方法中使用）。我相信 NSNumber 就是这样做的。

另请参阅[Class Clusters](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaObjects/CocoaObjects.html#//apple_ref/doc/uid/TP40002974-CH4-SW34)上的文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T13:22:04.293

嗯……来自[NSNumber 类参考](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSNumber_Class/Reference/Reference.html)，只要您适当地对 NSValue 进行子类化，就可以进行子类化。

> ## 子类化注释
> 
> 与任何类集群一样，如果创建 NSNumber 的子类，则必须覆盖其超类 NSValue 的原始方法。此外，为了利用非原始方法的抽象实现，您的 NSValue 方法 objCType 的实现可以返回一组受限的返回值。有效的返回值为“c”、“C”、“s”、“S”、“i”、“I”、“l”、“L”、“q”、“Q”、“f”和“d”。

* * *

我在 NSValue 中没有看到任何子类化注释，但我猜你需要在 NSValue 中实现每个方法。

# c# - 无法将 [] 索引应用于表达式

> ID：13879416
> 
> 赞同：3
> 
> 时间：2012-12-14T13:15:42.663
> 
> 标签：c#, indexing, expression

```
 var dbPerson = from p in db.People 
                where p.Id == PersonId select p;
 dbPerson[0].HolidaysRemaining--; 
```

用 dbPerson[0] 向我抛出一个错误，说不能将 [] 索引应用于类型为 'system.linq.lqueryable,holidayBookingApp.model.person> 的表达式

有人可以告诉我如何解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T13:26:06.203

LINQ 查询的结果不是，而是没有索引器`List`的自定义类型。`IQueryable`您无法以该形式随机访问 LINQ 查询的结果。

如果您真的需要，您有多种选择：

*   将其转换为实现的东西`IList`，例如 call `dbPerson.ToList()`。
*   如果您真的只需要第一个元素，请`IQueryable`为此目的使用扩展方法：`dbPerson.First()`
*   如果您想要任意元素作为，请为此目的`[x]`使用扩展方法：`IQueryable``dbPerson.Skip(x).First()`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T13:23:27.203

要获取查询`dbPerson`返回的第一项，请使用

```
var firstPerson = dbPerson.First(); 
```

或者`Single`，如果您只期望一场比赛，并且希望在这种期望被打破时抛出异常。

但是，我不相信`firstPerson.HolidaysRemaining--;`会在没有进一步代码的情况下更改数据库中的任何内容：

```
var dbPeopleWithThisId = from p in db.People 
                         where p.Id == PersonId
                         select p;
var specificPerson = dbPeopleWithThisId.Single();
specificPerson.HolidaysRemaining--;
db.SaveChanges(); // Thanks to J. Steen 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T13:27:25.250

这是因为`dbPerson`IEnumerable 不支持索引概念。您可以使用一些 Linq 方法，例如`dbPerson.First()`，或者简单地将其转换为 List：

```
var list = dbPerson.ToList();
list[0].HolidaysRemaining--; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T13:42:23.317

您应该了解 Linq & IEnumerable (& IQueryable) 接口背后的想法。IEnumerable 用于延迟加载序列，因此如果您为循环创建扩展方法，如下所示：

```
public static IEnumerable<T> LazyForEach<T>(this IEnumerable<T> source, Action<T> action) //action to perform                
        {
            if (action == null) throw new ArgumentNullException("action");
            foreach (T element in source)
            {
                action(element);
                yield return element;
            }
        } 
```

并尝试在 IEnumerable-returning 方法（Linq）链中使用 LazyForEach：

```
db.People.Where(p=>p...).LazyForEach(p=>
{
   MessageBox.Show(p.ToString());
}); 
```

在您使用 ToList/ToArray/ElementAt/First/Last/Any/Take/Skip ... 强制枚举（可能是部分）之前，您在提供的操作中的代码不会执行，或者您可以创建 alt. 延期：

```
public static IEnumerable<T> ForEach<T>(this IEnumerable<T> source, Action<T> action)
        {
            if (source == null)
                return null;
            if (action == null) throw new ArgumentNullException("action");
            //var sourceList = source.ToList(); //forcing enumeration
            var sourceList = new List<T>();
            foreach (var element in source)
            {
                action(element);
                sourceList.Add(element);
            }
            return sourceList;
        } 
```

# java - 使用 Java 的 BFS 算法实现不起作用

> ID：13879419
> 
> 赞同：-2
> 
> 时间：2012-12-14T13:15:55.300
> 
> 标签：java, algorithm, breadth-first-search

我正在尝试使用 Java 实现 BFS。我从[这个问题](https://stackoverflow.com/questions/58306/graph-algorithm-to-find-all-connections-between-two-arbitrary-vertices)中得到了一个代码，我对其进行了如下修改。

我将要存储的字符串类型更改为对象类型。它不工作。如果它是一个字符串，它将起作用。谁能告诉我为什么？

我的代码如下。

```
package bfs;

import java.util.*;

/**
 *
 * @author Harikrishnan
 */
public class BFS {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        Search.execute();
    }

}

class Graph {
    private Map <Node, LinkedHashSet<Node>> map = new HashMap();

    public void addEdge(Node node1, Node node2) {
        LinkedHashSet<Node> adjacent = map.get(node1);
        if(adjacent==null) {
            adjacent = new LinkedHashSet();
            map.put(node1, adjacent);
        }
        adjacent.add(node2);
    }

    public void addTwoWayVertex(Node node1, Node node2) {
        addEdge(node1, node2);
        addEdge(node2, node1);
    }

    public boolean isConnected(Node node1, Node node2) {
        Set adjacent = map.get(node1);
        if(adjacent==null) {
            return false;
        }
        return adjacent.contains(node2);
    }

    public LinkedList<Node> adjacentNodes(Node last) {
        LinkedHashSet<Node> adjacent = map.get(last);
        if(adjacent==null) {
            return new LinkedList();
        }
        return new LinkedList<Node>(adjacent);
    }
}

class Search {

    private static final Node START = new Node("1");
    private static final Node END = new Node("4");

    public static void execute() {
        // this graph is directional
        Graph graph = new Graph();
        graph.addEdge(new Node("1"), new Node( "2"));
        graph.addEdge(new Node("2"), new Node( "1"));
        graph.addEdge(new Node("2"), new Node( "3"));
        graph.addEdge(new Node("2"), new Node( "4"));
        graph.addEdge(new Node("2"), new Node( "7"));
        graph.addEdge(new Node("3"), new Node("5"));
        graph.addEdge(new Node("3"), new Node( "6"));
        graph.addEdge(new Node("3"), new Node( "2"));
        graph.addEdge(new Node("4"), new Node( "2"));
        graph.addEdge(new Node("4"), new Node( "7"));
        graph.addEdge(new Node("4"), new Node( "8"));
        graph.addEdge(new Node("5"), new Node( "3"));
        graph.addEdge(new Node("5"), new Node( "6"));
        graph.addEdge(new Node("5"), new Node("9"));
        graph.addEdge(new Node("6"), new Node( "3"));
        graph.addEdge(new Node("6"), new Node("7"));
        graph.addEdge(new Node("6"), new Node("5"));
        graph.addEdge(new Node("6"), new Node("9"));
        graph.addEdge(new Node("7"), new Node("2"));
        graph.addEdge(new Node("7"), new Node("6"));
        graph.addEdge(new Node("7"), new Node("8"));
        graph.addEdge(new Node("7"), new Node("10"));
        graph.addEdge(new Node("8"), new Node("4"));
        graph.addEdge(new Node("8"), new Node("7"));
        graph.addEdge(new Node("8"), new Node("10"));
        graph.addEdge(new Node("9"), new Node("5"));
        graph.addEdge(new Node("9"), new Node("6"));
        graph.addEdge(new Node("9"), new Node("10"));
        graph.addEdge(new Node("10"), new Node( "9"));
        graph.addEdge(new Node("10"), new Node("7"));
        graph.addEdge(new Node("10"), new Node("8"));
        LinkedList<Node> visited = new LinkedList();
        visited.add(START);
        new Search().breadthFirst(graph, visited);
    }

    private void breadthFirst(Graph graph, LinkedList<Node> visited) {
        LinkedList<Node> nodes = graph.adjacentNodes(visited.getLast());
        // examine adjacent nodes
        for (Node node : nodes) {
            if (visited.contains(node)) {
                continue;
            }
            if (node.equals(END)) {
                visited.add(node);
                printPath(visited);
                visited.removeLast();
                break;
            }
        }
        // in breadth-first, recursion needs to come after visiting adjacent nodes
        for (Node node : nodes) {
            if (visited.contains(node) || node.equals(END)) {
                continue;
            }
            visited.addLast(node);
            breadthFirst(graph, visited);
            visited.removeLast();
        }
    }

    private void printPath(LinkedList<Node> visited) {
        for (Node node : visited) {
            System.out.print(node);
            System.out.print(" ");
        }
        System.out.println();
    }
}

class Node
{
    public String name;
    public int x;
    public int y;

    public Node(String name)
    {
        this.name = name;
    }

    @Override
    public String toString()
    {
        return name;
    }

    @Override
    public boolean equals(Object n)
    {
        return ((Node)n).name.equals(name);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:01:50.417

你的代码让我有点困惑，所以让我们看看我是怎么做的......

首先，当你已经有一个非常好的搜索实例时，为什么还要创建一个新的搜索实例？制作`execute()`构造函数。更改`new Search().execute()`为`execute()`.

其次，您是否还打算创建具有相同数量的新节点或重复使用相同的节点，因为对我来说似乎所有内容都链接到单个节点，而不是我假设您想要的并将节点相互链接和将所有内容链接到解析它。你甚至没有在任何地方包含你的根节点。

如果这是你想要的，请原谅我。正如我所说，你的代码让我感到困惑。

# excel - 在 Excel 工作簿中的所有工作表上迭代 Applescript

> ID：13879425
> 
> 赞同：2
> 
> 时间：2012-12-14T13:16:08.907
> 
> 标签：excel, applescript, automator

我已经进行了一些搜索，但似乎无法找到如何让我的 Applescript 为 Excel 工作簿中的每个工作表进行迭代。目前我只是告诉脚本无限重复并手动单击工作表，这并不理想！

这就是我想要为工作簿中的每张纸做的事情，关于如何实现这一点的任何想法？

```
tell application "Microsoft Excel"
        set rangeVoltage to value of range "A11:A110"
        set value of cell "D11:D110" to rangeVoltage        
        set value of cell "E11" to "=B11*1000"
        fill down range "E11:E110"
        set value of cell "D10" to "Voc (V)"
        set value of cell "E10" to "Isc (mA)"
end tell 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T13:31:49.413

尝试：

```
tell application "Microsoft Excel"
    set mySheets to every sheet of active workbook
    repeat with aSheet in mySheets
        tell aSheet
            set rangeVoltage to value of range "A11:A110"
            set value of cell "D11:D110" to rangeVoltage
            set value of cell "E11" to "=B11*1000"
            fill down range "E11:E110"
            set value of cell "D10" to "Voc (V)"
            set value of cell "E10" to "Isc (mA)"
        end tell
    end repeat
end tell 
```

# asp.net - Newtonsoft.Json 中的装配冲突

> ID：13879427
> 
> 赞同：5
> 
> 时间：2012-12-14T13:16:11.680
> 
> 标签：asp.net, .net, sitecore

更新 Newtonsoft.Json 后，我们遇到了程序集冲突。我无法理解错误中引用的特定版本来自何处。web.config 中没有任何内容指向特定版本。

> System.IO.FileLoadException：无法加载文件或程序集“Newtonsoft.Json，Version=3.5.0.0，Culture=neutral，PublicKeyToken=30ad4fe6b2a6aeed”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

GAC-ing 两个版本的程序集可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-03T14:11:41.850

正如[@jammykam](https://stackoverflow.com/questions/13879427/assembly-conflict-in-newtonsoft-json#comment19119374_13880173)在marto 的回答中评论的那样，您可以重定向程序集。过去我用 Newtonsoft 和 Sitecore 做过这件事，没有任何问题。您可以查看我的[Sitecore 内容即服务代码](https://github.com/HedgehogDevelopment/sitecore-content-service)，我可以在其中运行它。

您对 web.config 文件中的这些行特别感兴趣： [https ://github.com/HedgehogDevelopment/sitecore-content-service/blob/master/Sitecore/Web/Web.config#L3499](https://github.com/HedgehogDevelopment/sitecore-content-service/blob/master/Sitecore/Web/Web.config#L3499)

```
<dependentAssembly>
    <assemblyIdentity name="Newtonsoft.Json" publicKeyToken="30ad4fe6b2a6aeed" culture="neutral" />
    <bindingRedirect oldVersion="0.0.0.0-4.0.8.0" newVersion="4.5.0.0" />
</dependentAssembly> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T14:04:12.483

GAC 可能会奏效，但会造成维护噩梦。不要这样做！

我认为你有两个选择：

1.  使用 Sitecore 附带的版本，这取决于您运行的 Sitecore 版本。
2.  保持一个 sitecore 版本不变，并使用 ilmerge 将您需要的 Newtonsoft.Json 版本与您自己的程序集结合起来。

如果您不需要库的任何最新功能（例如（动态...等）），我会推荐 1

# javascript - 使用 JQuery，是否可以构建可以多次实例化的拖放对象？

> ID：13879429
> 
> 赞同：0
> 
> 时间：2012-12-14T13:16:21.400
> 
> 标签：javascript, jquery-ui, jquery, dom

再会！

我有一个页面，左侧有一个垂直菜单，右侧有一个框。目前我可以拖动一个菜单项的幽灵并放开它。它实际上并没有丢弃任何东西，因此菜单没有实际变化。当我放下幽灵时，它会调用一个方法。

我想做的是用 JQuery 或纯 javascript 或其他任何东西创建一个对象并实例化它。

该对象将具有以下属性： - 使其父对象为其放置的 div 框。- 被其父级包含，但可在其中拖动。- 当从菜单中拖入另一个相同类型的对象时，能够成为其父对象 - 具有基于从中拖动的菜单项的标题 - 存储分配给它的任何文本值。

我没有要求任何人这样做（尽管如果你愿意，你可以这样做），但我很想知道它是否可能以及是否有人可以提供指向正在构建的对象或小部件的一些示例的链接，这些示例可以被分配属性和事件。

非常感谢，卡洛斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:22:15.753

[http://jqueryui.com/sortable/](http://jqueryui.com/sortable/)

到目前为止，这确实是您的最佳选择。我见过其他人，但这正是您所描述的。大多数情况下 sortable 可以满足您的所有需求，但如果它变得非常复杂，例如您想让当前打开的项目亮起或不容易包含在一个选项中，您仍然可以使用可拖动和可放置来完成您的任务想。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:43:27.367

我发现了一些对我有用的东西。我不会重新发明轮子，而是只修改 Jquery-UI 的对话框小部件。它几乎正是我需要的开箱即用的东西。这里有一篇有趣的文章： [http ://www.erichynds.com/jquery/tips-for-developing-jquery-ui-widgets/](http://www.erichynds.com/jquery/tips-for-developing-jquery-ui-widgets/)

非常感谢大家的帮助。

# django - 在另一个应用模型中导入应用模型类

> ID：13879431
> 
> 赞同：10
> 
> 时间：2012-12-14T13:16:32.607
> 
> 标签：django, django-models

我有 2 个应用程序：**coworkers**和**services**，每个都有自己的 models.py

在同事 models.py 中，我可以“从 services.models 导入服务”。

当我尝试在 services models.py 中“从 coworkers.models 导入状态”时，我收到以下错误消息：

> Traceback（最近一次通话最后）：文件“/Users/lucas/Documents/projetos/cwk-manager/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/core/management /commands/runserver.py”，第 91 行，inner_run self.validate(display_num_errors=True) 文件“/Users/lucas/Documents/projetos/cwk-manager/lib/python2.7/site-packages/Django-1.4\. 3-py2.7.egg/django/core/management/base.py”，第 266 行，验证 num_errors = get_validation_errors(s, app) 文件“/Users/lucas/Documents/projetos/cwk-manager/lib/python2 .7/site-packages/Django-1.4.3-py2.7.egg/django/core/management/validation.py”，第 30 行，在 get_validation_errors for (app_name, error) in get_app_errors().items()：文件“/Users/lucas/Documents/projetos/cwk-manager/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/db/models/loading.py”，第 158 行，在 get_app_errors self._populate() 文件“/Users/lucas/Documents/projetos/cwk-manager/lib/python2.7/site-packages/Django- 1.4.3-py2.7.egg/django/db/models/loading.py”，第 64 行，在 _populate self.load_app(app_name, True) 文件“/Users/lucas/Documents/projetos/cwk-manager/lib /python2.7/site-packages/Django-1.4.3-py2.7.egg/django/db/models/loading.py"，第 88 行，在 load_app 模型 = import_module('.models', app_name) 文件中" /Users/lucas/Documents/projetos/cwk-manager/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/utils/importlib.py”，第 35 行，在 import_moduleegg/django/db/models/loading.py”，第 64 行，在 _populate self.load_app(app_name, True) 文件“/Users/lucas/Documents/projetos/cwk-manager/lib/python2.7/site-packages /Django-1.4.3-py2.7.egg/django/db/models/loading.py”，第 88 行，在 load_app 模型 = import_module('.models', app_name) 文件“/Users/lucas/Documents/projetos /cwk-manager/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/utils/importlib.py”，第 35 行，在 import_moduleegg/django/db/models/loading.py”，第 64 行，在 _populate self.load_app(app_name, True) 文件“/Users/lucas/Documents/projetos/cwk-manager/lib/python2.7/site-packages /Django-1.4.3-py2.7.egg/django/db/models/loading.py”，第 88 行，在 load_app 模型 = import_module('.models', app_name) 文件“/Users/lucas/Documents/projetos /cwk-manager/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/utils/importlib.py”，第 35 行，在 import_module/Users/lucas/Documents/projetos/cwk-manager/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/utils/importlib.py”，第 35 行，在 import_module/Users/lucas/Documents/projetos/cwk-manager/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/utils/importlib.py”，第 35 行，在 import_module **导入**（名称）文件“/Users/lucas/Documents/projetos/cwk-manager/cwk-manager/cwk_manager/coworkers/models.py”，第 2 行，从 services.models 导入服务文件“/Users/lucas/Documents /projetos/cwk-manager/cwk-manager/cwk_manager/services/models.py”，第 5 行，在类 Services(models.Model)：文件“/Users/lucas/Documents/projetos/cwk-manager/cwk-manager /cwk_manager/services/models.py"，第 11 行，在 Services status = models.ForeignKey(Status) NameError: name 'Status' is not defined

--

**同事模型.py**

```
from django.db import models
from services.models import Services

class Status(models.Model):
    status_name = models.CharField(max_length=50)
    status_description = models.TextField(blank=True, null=True)

    class Meta:

        verbose_name = "Status"
        verbose_name_plural = "Status"

    def __unicode__(self):
        return self.status_name 
```

**服务模型.py**

```
from django.db import models
from coworkers.models import Status

# This table contains all the information about plans and other general services provided.
class Services(models.Model):
    service_name = models.CharField(max_length=100)
    service_description = models.TextField(blank=True, null=True)
    service_price = models.DecimalField(max_digits=7, decimal_places=2, blank=True, null=True)
    creation_date = models.DateField(auto_now_add=True)
    last_update = models.DateField(auto_now=True)
    status = models.ForeignKey(Status)

    class Meta: 

        verbose_name = "Services"
        verbose_name_plural = "Services"

    def __unicode__(self):
        return self.service_name 
```

- 有人可以帮我看看我做错了什么吗？

提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-14T13:37:03.500

这是由 Python 中的循环导入引起的。您可以使用以下语法：

```
status = models.ForeignKey('coworkers.models.Status')
```

Django 将使用此路径确定模型，因此您无需导入 Status。

在您的情况下，另一个解决方案是删除 coworker.models 中的第二个导入语句，因为该文件中似乎没有使用服务。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-07-09T16:18:18.447

在 Django 1.6.5 中：

```
import coworkers
status = models.ForeignKey(coworkers.models.Status) 
```

应该是这样的：

```
import coworkers
status = models.ForeignKey(coworkers.Status) 
```

我（现在）知道 OP 正在使用 Django 1.4.3，并且某些答案可能会在该版本的 Django 中解决这个问题。但是，我花了一段时间才注意到这个版本，这些答案在 1.6.5 中不起作用。

干杯!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T13:22:22.073

它是循环导入的，会导致错误。

你可以试试，

```
import coworkers
status = models.ForeignKey(coworkers.models.Status) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-06T05:10:52.417

我在做syncdb时遇到了各种各样的错误：

```
CommandError: One or more models did not validate: parts.vehicle:
'customer' has a relation with model <class
'customers.models.Customer'>, which has either not been installed or
is abstract. 
```

我终于意识到我忘记将新应用程序添加到 settings.py。管理员也找不到。这应该是我的第一个线索。否则，我正在做 e.thompsy 为 django 1.6.5 提供的答案

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-15T12:25:56.653

只需先创建状态模型并执行同步数据库，然后创建服务模型和同步数据库。它应该工作。

问题是 python 无法找到“状态”，因为它第一次尝试创建服务模型。

# c++ - 如何在 WinCE 设备上获取供应商和产品 ID

> ID：13879438
> 
> 赞同：0
> 
> 时间：2012-12-14T13:17:12.433
> 
> 标签：c++, visual-c++, smartphone, pocketpc

我是 WinCE 上 USB HID 的新手。有人可以告诉我如何在 windowCE 环境下获取供应商和产品报告。在窗口一侧有一个名为 SetupDiGetDeviceProperty 的函数，在 windowCE 一侧是否有一个等价的术语？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:50:55.417

您可以使用：

OemInfo，来自文档：“请求 OEM 特定信息。信息字符串可以包括但不限于型号名称、型号和制造商。”

```
// Device Manufacturer 
TCHAR oemInfo[256]; 
ZeroMemory(oeminf, sizeof(oemInfo));
SystemParametersInfo( SPI_GETOEMINFO, 255, &oemInfo, false ); 
```

OemType，来自文档：“请求一个标识基于 Windows CE 的平台类型的字符串。不要本地化这个字符串。”

```
TCHAR oemType[256]; 
ZeroMemory(oemType, sizeof(oemType));
SystemParametersInfo( SPI_GETPLATFORMTYPE, 255, &oemType, false ); 
```

# azure - 不在托管服务或开发结构中运行（生产，非调试/本地）

> ID：13879443
> 
> 赞同：20
> 
> 时间：2012-12-14T13:17:37.557
> 
> 标签：azure, asp.net-mvc-4, dotnetopenauth

我刚刚开始使用 Windows Azure，并使用 Azure 模拟器在本地运行了一个小型 MVC 应用程序。我注册了免费试用版，下载了我的发布配置文件并将其导入 VS2012。发布到 Azure 并得到一些程序集引用错误。我通过将它们设置为复制 local = true 解决了这个问题，现在我得到了：

```
 Not running in a hosted service or the Development Fabric. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.InvalidOperationException: Not running in a hosted service or the Development Fabric.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.  

Stack Trace: 

[InvalidOperationException: Not running in a hosted service or the Development Fabric.]
   Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitor.GetDefaultStartupInfoForCurrentRoleInstance() +447
   Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener..ctor() +40

[ConfigurationErrorsException: Could not create Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener, Microsoft.WindowsAzure.Diagnostics, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35.]
   System.Diagnostics.TraceUtils.GetRuntimeObject(String className, Type baseType, String initializeData) +6792949
   System.Diagnostics.TypedElement.BaseGetRuntimeObject() +45
   System.Diagnostics.ListenerElement.GetRuntimeObject() +83
   System.Diagnostics.ListenerElementsCollection.GetRuntimeObject() +143
   System.Diagnostics.TraceInternal.get_Listeners() +181
   System.Diagnostics.TraceInternal.TraceEvent(TraceEventType eventType, Int32 id, String format, Object[] args) +155
   DotNetOpenAuth.Loggers.TraceLogger.Info(Object message) +26
   DotNetOpenAuth.Logger.CreateWithBanner(String name) +45
   DotNetOpenAuth.Logger..cctor() +14

[TypeInitializationException: The type initializer for 'DotNetOpenAuth.Logger' threw an exception.]
   DotNetOpenAuth.Logger.get_Library() +14
   DotNetOpenAuth.Reporting.Initialize() +410
   DotNetOpenAuth.Reporting.set_Enabled(Boolean value) +31
   DotNetOpenAuth.Reporting..cctor() +285

[TypeInitializationException: The type initializer for 'DotNetOpenAuth.Reporting' threw an exception.]
   Microsoft.Web.WebPages.OAuth.PreApplicationStartCode.Start() +41

[InvalidOperationException: The pre-application start initialization method Start on type Microsoft.Web.WebPages.OAuth.PreApplicationStartCode threw an exception with the following error message: The type initializer for 'DotNetOpenAuth.Reporting' threw an exception..]
   System.Web.Compilation.BuildManager.InvokePreStartInitMethodsCore(ICollection`1 methods, Func`1 setHostingEnvironmentCultures) +550
   System.Web.Compilation.BuildManager.InvokePreStartInitMethods(ICollection`1 methods) +132
   System.Web.Compilation.BuildManager.CallPreStartInitMethods(String preStartInitListPath) +90
   System.Web.Compilation.BuildManager.ExecutePreAppStart() +135
   System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters, PolicyLevel policyLevel, Exception appDomainCreationException) +516

[HttpException (0x80004005): The pre-application start initialization method Start on type Microsoft.Web.WebPages.OAuth.PreApplicationStartCode threw an exception with the following error message: The type initializer for 'DotNetOpenAuth.Reporting' threw an exception..]
   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +9873912
   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +101
   System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +254

-------------------------------------------------------------------------------- 
```

如果您在本地测试并已将 Web 项目设置为启动项目而不是云项目时看到此错误，但正如我所说，这在本地对模拟器工作正常，但部署到 Azure 会导致失败。

有什么想法我在这里想念的吗？

谢谢

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-12-14T15:22:20.713

尝试`Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener`删除`web.config`. 请参阅此[相关的 SO 帖子](https://stackoverflow.com/a/10204672/175679)。`DotNetOpenAuth.Logger`似乎与 WAD 冲突（*windows azure diagnostics*）。

### 从以下位置删除跟踪侦听器`web.config`：

```
<trace> 
    <listeners> 
        <add type="Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener, Microsoft.WindowsAzure.Diagnostics, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" name="AzureDiagnostics"> 
            <filter type="" /> 
        </add> 
    </listeners> 
</trace> 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-12-26T15:24:45.283

将 Windows Azure 角色项目设置为“启动”项目。这解决了我的问题。当我在与启动项目相同的解决方案中设置另一个 webapp 时，我遇到了同样的问题。

# ios - MonoTouch CorePlot 1.1 绑定错误

> ID：13879447
> 
> 赞同：1
> 
> 时间：2012-12-14T13:17:54.493
> 
> 标签：ios, binding, xamarin.ios, core-plot

CorePlot 的 monotouch[绑定](https://github.com/mono/monotouch-bindings/tree/master/CorePlot)停留在 0.9 版，而库现在已经达到[1.1 版](http://code.google.com/p/core-plot/)：

我正在尝试自己更新[makefile](https://github.com/mono/monotouch-bindings/blob/master/CorePlot/binding/Makefile)，但它不起作用。

我在 makefile 中更改了以下行：

```
VERSION=0.9 
```

和：

```
VERSION=1.1 
```

然后执行make。它很好地创建了 CorePlotiOS.dll 1.1 库，但是当我在 Monodevelop 中将它们添加到我的项目中，替换旧的 CorePlotiOS.dll 0.9 时，出现了问题。在模拟器中一切似乎都很好，但是当我在 iPhone 上运行应用程序时，我收到以下错误，然后崩溃：

```
Wrapper type 'MonoTouch.CorePlot.CPTPlainBlackTheme' is missing its native ObjectiveC class 'CPTPlainBlackTheme'. 
```

使用 0.9 dll 时没有这样的错误。有什么我想念的吗？有什么建议么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:11:39.707

我想那是因为 CorePlot 1.1 添加/修改了新的属性/方法等。

您需要更新[coreplot.cs](https://github.com/mono/monotouch-bindings/blob/master/CorePlot/binding/coreplot.cs)、[enums.cs](https://github.com/mono/monotouch-bindings/blob/master/CorePlot/binding/enums.cs)和[extras.cs](https://github.com/mono/monotouch-bindings/blob/master/CorePlot/binding/extras.cs)以准确反映从 0.9 到 1.1 所做的更改

# c# - 使用c#将excel vba代码添加到按钮

> ID：13879451
> 
> 赞同：4
> 
> 时间：2012-12-14T13:18:11.327
> 
> 标签：c#, excel, button, vba

我有一个关于创建 excel 按钮并在其上添加 vba 代码功能的问题。我已经创建了一个按钮和模块代码，但不知道如何在它们之间建立关系。谁能告诉我怎么做？

我的按钮代码：

```
 Excel.Shape btn = xlWorkSheet5.Shapes.AddOLEObject("Forms.CommandButton.1", Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, 300, 10, 150, 22);

 Excel.OLEObject sheetBtn = (Excel.OLEObject)xlWorkSheet5.OLEObjects(btn.Name);
            sheetBtn.Object.GetType().InvokeMember("Caption", System.Reflection.BindingFlags.SetProperty, null, sheetBtn.Object, new object[] { "Calculate Bus Load" }); 
```

和模块代码：

```
 String sCode = "Sub main()\r\n" +
                "   MsgBox \"Hello world\"\r\n" +
                "end Sub";

 VBA.VBComponent oModule = xlWorkBook.VBProject.VBComponents.Add(VBA.vbext_ComponentType.vbext_ct_StdModule);
            oModule.Name = "Module1";
            oModule.CodeModule.AddFromString(sCode);

            xlWorkBook.VBProject.VBComponents.Item(1).CodeModule.AddFromString(sCode); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T14:14:09.707

我在 Internet 上进行了搜索，但没有找到任何有用的东西，所以我清除了我的思绪并再次通过 c# 帮助集中注意力，我找到了如何正确执行此操作的答案。

我的代码：

```
String updateBT "...// macro code for button";   
VBA.VBComponent oModule1 = xlWorkBook.VBProject.VBComponents.Add(VBA.vbext_ComponentType.vbext_ct_StdModule);
oModule1.Name = "Update";
oModule1.CodeModule.AddFromString(updateBT);

Excel.Shape btn2 = xlWorkSheet1.Shapes.AddFormControl(Excel.XlFormControl.xlButtonControl, 150, 5, 150, 22);
btn2.Name = "Update";
btn2.OnAction = "... // name of your macro code";
btn2.OLEFormat.Object.Caption = "... // Button name"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T14:02:15.533

据我了解，当您按下按钮时，您需要中间`call`代码/宏模块。因此代码被触发并执行您希望它执行的操作。`button``click`

以通常的方式，例如

*   我们在 Excel 表中添加一个按钮
*   选择`on_click`事件
*   添加类似的代码`call mySub`

您需要在 C# 中执行此操作。

请调整您的模块和控件名称。这是一个示例。

```
//Within your above code add,

sheetBtn.Click += new MSForms.CommandButtonEvents_ClickEventHandler(sheetBtn_Click);

}

//button click event triggers

void sheetBtn_Click()
{
     call subMain
     // try a test using : MessageBox.Show("button test!");  
} 
```

**[请尝试这个教程](http://www.codeproject.com/Articles/12257/Build-Your-Own-Add-in-For-Microsoft-Office-Using-N)它几乎有你需要的东西。

根据仅从 C# 调用用 Excel 编写的工作表子或模块子的主题，您可以使用`run macro`方法。

```
//instead of this.application, you call refer to the Excel app object
this.Application.Run("yourMacroName",missing,missing........) 
```

[参考：](http://social.msdn.microsoft.com/Forums/en/vsto/thread/030b8d66-7ec8-44b4-a98d-6ebf0631e69a)

# objective-c - 如何使 UIImageView 中的图像像素透明？

> ID：13879458
> 
> 赞同：1
> 
> 时间：2012-12-14T13:18:23.917
> 
> 标签：objective-c, ios, uiimageview, uiimage

我在 ImageView 中有 Image.png（**它有一些透明像素**），但是当我在设备上运行我的应用程序时，我的图像上的**像素****不透明**（我在图像下方看不到任何东西，我在这些地方只看到灰色）。有谁知道我可以让它工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:21:31.747

使用以下方法更改 UIImageView 的背景颜色以清除颜色：

```
imageView.backgroundColor = [UIColor clearColor]; 
```

# java - 防止接口中的修饰符 final

> ID：13879460
> 
> 赞同：4
> 
> 时间：2012-12-14T13:18:38.490
> 
> 标签：java, eclipse, final, modifier

您可以在 Eclipse 中设置代码样式以尽可能使用修饰符“final”。不幸的是，这个修饰符也在接口中设置。但那里没有意义。是否可以防止在接口中为方法参数设置修饰符“final”？只是为了明确..我的意思不是字段。这些总是最终的和静态的。我的意思是像'param'这样的方法参数

```
public interface MyService {
   void aMethod(String param);
} 
```

代替

```
public interface MyService {
   void aMethod(final String param);
} 
```

'final' 不会改变代码的逻辑，但它是不必要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:03:09.257

您不能指定`interface`vs a 的行为`class`，但可以使其停止添加`final`参数。

转到`Preferences -> Java -> Code Style -> Clean Up`，编辑配置文件并选择`Code Style`选项卡。在底部的 下`Variable Declarations`，取消选中该`Parameter`复选框。

# sql - SQL 查询。由于环境非常受限。甚至可能吗？

> ID：13879464
> 
> 赞同：0
> 
> 时间：2012-12-14T13:18:42.620
> 
> 标签：sql, sql-server-2008, subquery

我有一个具体的问题。我需要从数据库中获取一些数据。我有一种从程序中检索数据的机制。我需要使用它，不能修改。原始查询是：

```
SELECT it_Symbol AS Symbol, tt_Name AS Nazwa, tt_Price AS Cena, 
       tt_Quantity AS Ilosc, tt_Id
FROM  tr__Transaction INNER JOIN  tr_Item 
                      ON tt_TransId=tr_Id LEFT OUTER JOIN  it__Item 
                      ON tt_ItemId = it_Id RIGHT JOIN  reg_Site 
                      ON tr_SiteId = rs_Id LEFT OUTER JOIN  it_ItemSite 
                      ON it_Id = is_ItemId
WHERE tt_TransId=@transId 
GROUP BY tt_Id, tt_Quantity, tr_Id, it_Name, tt_Price,it_Symbol, 
         is_Name, tt_Name, tt_ItemId, tt_Id 
```

问题是`I need to get some additional data from tr__Transaction table.` 它有一个字段`tr_Source`。我需要此字段值，但对于已在返回字段中列出的`tr__transaction`记录。`tr_Id``tt_Id`

有什么方法可以执行子查询返回取决于 tt_Id 列值的值吗？或者可能有任何其他连接组合？我已经花了整整一周的时间，并且没有更多的想法或技能来做到这一点：/任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:05:40.830

我不确定我是否正确理解了您的问题，但假设您说原始 SQL 语句无法更改（即，它处于只读视图中）。然后你可以将它包裹在另一个 SELECT 语句中。

```
SELECT  tblOriginal.*, tblExtend.tt_Source
FROM    (
        SELECT it_Symbol AS Symbol, tt_Name AS Nazwa, tt_Price AS Cena, 
               tt_Quantity AS Ilosc, tt_Id
        FROM  tr__Transaction INNER JOIN  tr_Item 
                              ON tt_TransId=tr_Id LEFT OUTER JOIN  it__Item 
                              ON tt_ItemId = it_Id RIGHT JOIN  reg_Site 
                              ON tr_SiteId = rs_Id LEFT OUTER JOIN  it_ItemSite 
                              ON it_Id = is_ItemId
        WHERE tt_TransId=@transId 
        GROUP BY tt_Id, tt_Quantity, tr_Id, it_Name, tt_Price,it_Symbol, 
                 is_Name, tt_Name, tt_ItemId, tt_Id
        ) AS tblOriginal
        INNER JOIN tr__Transaction AS tblExtend
        ON tblOriginal.tt_Id = tblExtend.tt_Id 
```

但我怀疑你的问题比你花了一个多星期的时间更复杂。在那种情况下，你能详细说明吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:56:03.883

好的，仍然不知道你需要什么，但它是一个清理问题的尝试。因此，这是答案的工作版本，因为您无法在注释中格式化代码。

请解释某些关系是否错误。

只要表具有不同的别名，您就可以在不同的条件下多次连接表。

例如：

```
SELECT c.it_Symbol AS Symbol, a.tt_Name AS Nazwa, a.tt_Price AS Cena, 
       a.tt_Quantity AS Ilosc, a.tt_Id, f.tr_Source 
FROM  tr__Transaction a 
    INNER JOIN  tr_Item b
                      ON a.tt_TransId=b.tr_Id 
    LEFT OUTER JOIN  it__Item c
                      ON a.tt_ItemId = c.it_Id 
    RIGHT JOIN  reg_Site d
                      ON a.tr_SiteId = d.rs_Id 
   LEFT OUTER JOIN  it_ItemSite e
                      ON c.it_Id = e.is_ItemId
   LEFT OUTER JOIN tr__Transaction f
                      ON c.tt_id = f.tr_id
WHERE a.tt_TransId=@transId 
GROUP BY a.tt_Id, a.tt_Quantity, a.tr_Id, c.it_Name, a.tt_Price,c.it_Symbol, 
         e.is_Name, a.tt_Name, a.tt_ItemId, a.tt_Id 
```

# javascript - 视频有时无法从 youtube 播放列表加载

> ID：13879468
> 
> 赞同：1
> 
> 时间：2012-12-14T13:18:52.293
> 
> 标签：javascript, jquery, youtube-api, youtube-javascript-api

我正在使用 YouTube API 使用 Javascript 和 Jquery 从 YouTube 播放列表中检索视频。并将视频显示到 Carousal 中。有时该视频会加载到 carousal 中，有时则不是。当我替换播放列表 ID 时它工作正常，但一段时间后我又遇到了类似的问题。

```
<script type="text/javascript"> 

        function fnGoogleFeedLoaded(){  

            fnCreateCarousal(1,"2C5A4567D2B2600B");
            fnCreateCarousal(2,"9bw4S5ePsEFtdohdvpRVwqPvPorrFTQF");
            fnCreateCarousal(3,"PL9A7F57201F1AA96B");
            fnCreateCarousal(4,"88CBC02990158C01");
            fnCreateCarousal(5,"PL0155DF7A9B0DF819");
            fnCreateCarousal(6,"3367D45095D0B592");
        }
    function fnCreateCarousal(nIndex,nPlaylistID){
            var feedUrl = "http://gdata.youtube.com/feeds/api/playlists/"+nPlaylistID+"?max-results=8";
            new google.feeds.lookupFeed(feedUrl, function (result) {
            if (result.error || !result.url) {
                $('#videocomm').hide();
                return;
            }
            // get the feed items
            var feed = new google.feeds.Feed(result.url);
            feed.setNumEntries(50);
            feed.load(function (result) {
                // write out the feed data          
                var container = $("#CarousalBase_"+nIndex);
                //var totalcount = result.feed.entries.length;
                //alert (totalcount);
                for (var i = 0; i < result.feed.entries.length; i++) {
                    var entry = result.feed.entries[i];
                    var vidhash = /=(.*)&(.*)$/.exec (entry.link)[1]; 

            /*      container.append('<div><a href="http://www.youtube.com/embed/'+vidhash+'" class="html5lightbox" title="'+entry.title+'"><img src="http://img.youtube.com/vi/'+vidhash+'/0.jpg" /><br />'+entry.title+'</a></div>\n');*/

            container.append('<div><a href="#" onClick=onYouTubeIframeAPIReady("'+vidhash+'"); title="'+entry.title+'"><img src="http://img.youtube.com/vi/'+vidhash+'/0.jpg" /><br />'+entry.title+'</a></div>\n');
                }

                // load the first video
                $(".html5lightbox:first").each(function () {
                    if(nIndex == 1){
                        loadVideo(this);
                        return false;
                    }                       
                });

                // setup the click handler for all the videso
                $(".html5lightbox").click(function () {
                    loadVideo(this);
                    return false;
                });

            });
        });     
    }

    google.setOnLoadCallback(function () {
            //alert("Hii");
            fnGoogleFeedLoaded();               
    });
    google.load("feeds", "1");

  var tag = document.createElement('script');
  tag.src = "http://www.youtube.com/iframe_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

function onYouTubeIframeAPIReady(vidhash)
{

      player = new YT.Player('light', {
      height: '390',
      width: '640',
      videoId: vidhash,
      events: {
        'onReady': onPlayerReady,
        'onStateChange': onPlayerStateChange
      }
    });

document.getElementById('light').style.display='block';
document.getElementById('fade').style.display='block';
}

function onPlayerReady(event) {
    event.target.playVideo();
  }

  var done = false;
  function onPlayerStateChange(event) {
    if (event.data == YT.PlayerState.PLAYING && !done) {
      setTimeout(stopVideo, 2000);
      done = true;
    }
  }
  function stopVideo() {
    player.stopVideo();
  } 
```

# php - 会话变量的值正在取消设置，即“-blank-”而不取消设置它

> ID：13879470
> 
> 赞同：0
> 
> 时间：2012-12-14T13:19:01.963
> 
> 标签：php, session, session-variables, unset

```
include('conection.php');
$db=new Database();
session_start();
echo "<div style=' background-color:white; border:solid white'>".$_SESSION['uid']."</div>";
if(!(isset(**$_SESSION['uid']**)))
{
    header('location:index.php');
}
if(isset($_REQUEST['admin']))
{
    if(base64_decode($_REQUEST['admin'])!=='over779656')
    {
        header('location:index.php');
    }
}
$r=explode(" ",base64_decode($_REQUEST['final']));

   **$_SESSION['uid']** 
```

这个变量的值在时间超过 2 小时或更多时间后变得未设置，为什么会这样，即使我没有取消设置任何变量，是否有任何服务器问题或任何浏览器问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T13:21:22.280

检查`session.gc_maxlifetime` 你`php.ini`并增加那里的时间

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T13:27:35.753

不要在 php.ini 中更改它，而是尝试在运行时更改超时。

`ini_set('session.gc_maxlifetime', 5*60*60); // 5 hours`

**编辑**

注意：之前使用此代码`session_start()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T13:29:27.707

如果您无权访问 php.ini 和/或不想重新启动服务器，您可以尝试以下操作。[使用http://php.net/ini_get](http://php.net/ini_get)查看 session.gc_maxlifetime 设置，如下所示：

```
 ini_get('session.gc_maxlifetime') 
```

你可以像这样用[http://php.net/ini_set设置它](http://php.net/ini_set)

```
 ini_set('session.gc_maxlifetime', 3600*24); 
```

不过要注意内存问题和长时间运行的脚本。也像另一个答案所说：在 session_start() 之前执行。

# struts2 - 更改 Struts2 拦截器错误消息

> ID：13879471
> 
> 赞同：0
> 
> 时间：2012-12-14T13:19:17.037
> 
> 标签：struts2, interceptor

我正在使用 Struts 2 + Hibernate (full-hibernate-plugin-for-struts2)，并且我有这段代码来检查要上传的图像是否为 png：

**struts.xml**

```
<struts>
    <package name="mypack" namespace="/" extends="hibernate-default">          
       ...
       <action name="myaction" class="com.actions.MyAction" >
            <interceptor-ref name="defaultStackHibernate">
                <param name="fileUpload.allowedTypes">image/png</param>
            </interceptor-ref>            
            <result name="success" type="tiles" >baseLayout</result>
            <result name="error" type="tiles" >error</result>
            <result name="input" type="tiles" >baseLayout</result>
        </action>
        ...
    </package>
</struts> 
```

如果我上传不允许的图像类型出现的错误消息是：

> 不允许的内容类型：图像“img.jpg”“上传__2988a871_13b93535e21__7fc1_00000009.tmp”图像/jpeg

如何修改该错误消息？使用类似“hibernate-messages.properties”的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:22:18.717

您可以通过为此键创建文本来覆盖此消息：

```
struts.messages.error.content.type.not.allowed 
```

# mysql - 在 Mysql 查询 DATE_SUB 未返回预期结果

> ID：13879473
> 
> 赞同：0
> 
> 时间：2012-12-14T13:19:26.207
> 
> 标签：mysql, database, date, select

这是我的 Mysql 查询

```
SELECT COUNT(*) CallCnt,ANBCnt, t2.Duration,(ANB) Number,
  ((DATE_SUB('2012-12-10 05:22:30',
              INTERVAL (SELECT CONCAT(''',t2.Duration:0,''')) MINUTE_SECOND))) Mintime,
  ('2012-12-10 05:22:30') Maxtime,
  (1) TYPE,
  (t1.CallTypeId) 
FROM cdr_temp1_check t1
  INNER JOIN cdr_temp1_check_details t2 
  ON t1.CallTypeId=t2.CallTypeId
WHERE TimeStamp1 >= DATE_SUB('2012-12-10 05:22:30',
                              INTERVAL (SELECT CONCAT(''',t2.Duration:0,''')) MINUTE_SECOND) 
  AND TimeStamp1<='2012-12-10 05:22:30'
GROUP BY ANB 
  HAVING COUNT(*) > ANBCnt 
```

返回的结果是

```
 CallCnt  ANBCnt  Duration      Number  Mintime              Maxtime                TYPE  CallTypeId
-------  ------  --------  ----------  -------------------  -------------------  ------  ----------
    267      40        25      2042011234  2012-12-10 05:20:30  2012-12-10 05:22:30       1           5
    134      20        15      9895697970  2012-12-10 05:20:30  2012-12-10 05:22:30       1           3 
```

预期结果

```
 CallCnt  ANBCnt  Duration      Number  Mintime              Maxtime                TYPE  CallTypeId
-------  ------  --------  ----------  -------------------  -------------------  ------  ----------
    267      40        25      2042011234  2012-12-10 04:57:30  2012-12-10 05:22:30       1           5
    134      20        15      9895697970  2012-12-10 04:57:30  2012-12-10 05:22:30       1           3 
```

显示问题的列是 Mintime 应该是`Maxtime minus Duration`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:35:55.253

我建议你尝试不同的方法。

鉴于 maxtime 只是您要输入查询的字符串。您可以使用 DATE_SUB 直接减去所需的间隔

```
((DATE_SUB('2012-12-10 05:22:30',
INTERVAL t2.Duration MINUTE))) Mintime 
```

所以你的整个查询将是：

```
SELECT COUNT(*) CallCnt,ANBCnt,
t2.Duration,(ANB) Number,
((DATE_SUB('2012-12-10 05:22:30',
INTERVAL t2.Duration MINUTE))) Mintime,
('2012-12-10 05:22:30') Maxtime,(1) TYPE,
(t1.CallTypeId) FROM cdr_temp1_check t1
INNER JOIN cdr_temp1_check_details t2 ON t1.CallTypeId=t2.CallTypeId
WHERE TimeStamp1>=DATE_SUB('2012-12-10 05:22:30',
INTERVAL t2.Duration MINUTE) 
AND TimeStamp1<='2012-12-10 05:22:30'
GROUP BY ANB HAVING COUNT(*)>ANBCnt 
```

# python - Scrapy hxs.select 返回 []

> ID：13879478
> 
> 赞同：1
> 
> 时间：2012-12-14T13:19:50.763
> 
> 标签：python, scrapy

我运行以下命令，它工作正常：

```
hxs.select('//h1').extract() 
```

然而这

```
hxs.select('//div[@class="ClassName"]/text()').extract() 
```

返回`[]`。

我的语法错了吗？我不确定为什么`div`课程不工作（它肯定在那里！）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:32:18.513

没有 html 很难回答这个问题。

我推荐使用 firefox + xpath addon ，我使用[firepath](https://addons.mozilla.org/en-US/firefox/addon/firepath/)来评估网页上的 xpath。检查其他允许您从 firebug 视图创建 xpath 的插件。

你的语法似乎是正确的。

# magento - 自定义产品类型的自定义选项不会出现在 view.phtml 上

> ID：13879479
> 
> 赞同：0
> 
> 时间：2012-12-14T13:20:03.370
> 
> 标签：magento

我已经定制了产品类型（酒店）。它在后端有自定义选项选项卡。

我在某些产品（酒店）中添加了一些自定义选项。我已将 html 添加到自定义主题的 view.phtml 以输出自定义选项。

```
<?php if ($this->hasOptions()):?> <?php echo $this->getChildHtml('container1','', true, true) ?> <?php endif;?> 
```

我还在我的布局中添加了块。

```
 <block type="core/template_facade" name="product.info.container1" as="container1">
                <action method="setDataByKey"><key>alias_in_layout</key><value>container1</value></action>
                <action method="setDataByKeyFromRegistry"><key>options_container</key><key_in_registry>product</key_in_registry></action>
                <action method="append"><block>product.info.options.wrapper</block></action>
                <action method="append"><block>product.info.options.wrapper.bottom</block></action>
            </block>
            <block type="core/template_facade" name="product.info.container2" as="container2">
                <action method="setDataByKey"><key>alias_in_layout</key><value>container2</value></action>
                <action method="setDataByKeyFromRegistry"><key>options_container</key><key_in_registry>product</key_in_registry></action>
                <action method="append"><block>product.info.options.wrapper</block></action>
                <action method="append"><block>product.info.options.wrapper.bottom</block></action>
            </block>

<action method="unsetCallChild"><child>container1</child><call>ifEquals</call><if>0</if>   <key>alias_in_layout</key><key>options_container</key></action>
<action method="unsetCallChild"><child>container2</child><call>ifEquals</call><if>0</if><key>alias_in_layout</key><key>options_container</key></action> 
```

但`<?php echo $this->getChildHtml('container1','', true, true) ?>`返回空。

如何显示选项块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T03:15:20.987

我已经解决了这个问题并在帮助程序中创建了函数来呈现自定义选项。代码如下：

```
 public function getHotelCustomOptionsHtml(Mage_Catalog_Model_Product $product)
{

    $blockOption = Mage::app()->getLayout()->createBlock("Mage_Catalog_Block_Product_View_Options");
    $blockOption->addOptionRenderer("default","catalog/product_view_options_type_default","catalog/product/view/options/type/default.phtml");
    $blockOption->addOptionRenderer("text","catalog/product_view_options_type_text","inchoo_catalog/product/view/options/type/text.phtml");
    $blockOption->addOptionRenderer("file","catalog/product_view_options_type_file","catalog/product/view/options/type/file.phtml");
      $blockOption->addOptionRenderer("select","catalog/product_view_options_type_select","catalog/product/view/options/type/select.phtml");

    $blockOption->addOptionRenderer("date","catalog/product_view_options_type_date","catalog/product/view/options/type/date.phtml") ;
    $blockOptionsHtml = null;
     if($product->getTypeId() =="hotel")
     {
        $blockOption->setProduct($product);
        if($product->getOptions())
        {
            foreach ($product->getOptions() as $o)
            {
                $blockOptionsHtml .= $blockOption->getOptionHtml($o);
            };
        }
     }

     return $blockOptionsHtml;
} 
```

# java - 如何在 JBoss AS 7.1.1 Final 中使用 JSF 2.1.14 Mojarra、Servlet 3.0 和 EL 2.2？

> ID：13879481
> 
> 赞同：2
> 
> 时间：2012-12-14T13:20:03.290
> 
> 标签：java, jsf-2, el, jboss7.x, servlet-3.0

在我的应用程序中，我想将 JSF 2.1.14 Mojarra 与 Servlet 3.0 和 EL 2.2 一起使用。服务器是 JBoss-AS-7.1.1-Final。

现在我已经在 pom.xml 中添加了这些依赖项：

```
<dependency>
    <groupId>com.sun.faces</groupId>
    <artifactId>jsf-api</artifactId>
    <version>2.1.14</version>
</dependency>
<dependency>
    <groupId>com.sun.faces</groupId>
    <artifactId>jsf-impl</artifactId>
    <version>2.1.14</version>
</dependency>
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>javax.servlet-api</artifactId>
    <version>3.0.1</version>
</dependency>
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>jstl</artifactId>
    <version>1.2</version>
</dependency>
<dependency>
    <groupId>javax.el</groupId>
    <artifactId>el-api</artifactId>
    <version>2.2</version>
</dependency> 
```

这些 jar 在 /WEB-INF/lib 中。在控制台的容器中部署应用程序后，我可以看到一个日志：

```
18:15:02,278 INFO  [javax.enterprise.resource.webcontainer.jsf.config] (MSC service thread 1-12) Initializing Mojarra 2.1.7-jbossorg-1 (20120227-1401) for context '/ActivityDatabase' 
```

这显然意味着 JBoss 没有使用我放在 war 文件中的 JSF 版本。

[在谷歌搜索和搜索我在这里](https://stackoverflow.com/a/10028881/576758)找到的其他 SO 线程之后，我需要告诉容器使用 WAR 文件中提供的 JSF 包。所以我补充说：

```
<context-param>
    <param-name>org.jboss.jbossfaces.WAR_BUNDLES_JSF_IMPL</param-name>
    <param-value>true</param-value>
</context-param> 
```

在我的 web.xml 中。之后，当我部署战争时，在部署时出现异常：

```
18:39:57,665 SEVERE [javax.enterprise.resource.webcontainer.jsf.config] (MSC service thread 1-8) Critical error during deployment: : com.sun.faces.config.ConfigurationException: CONFIGURATION FAILED! Class org.jboss.as.web.deployment.jsf.JandexAnnotationProvider is not an instance of com.sun.faces.spi.AnnotationProvider
        at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:376) [jsf-impl-2.1.14.jar:2.1.14]
        at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:223) [jsf-impl-2.1.14.jar:2.1.14]
        at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3392) [jbossweb-7.0.13.Final.jar:]
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:3850) [jbossweb-7.0.13.Final.jar:]
        at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_09]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_09]
        at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09]
Caused by: javax.faces.FacesException: Class org.jboss.as.web.deployment.jsf.JandexAnnotationProvider is not an instance of com.sun.faces.spi.AnnotationProvider
        at com.sun.faces.spi.AnnotationProviderFactory.createAnnotationProvider(AnnotationProviderFactory.java:78) [jsf-impl-2.1.14.jar:2.1.14]
        at com.sun.faces.config.ConfigManager$AnnotationScanTask.<init>(ConfigManager.java:808) [jsf-impl-2.1.14.jar:2.1.14]
        at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:349) [jsf-impl-2.1.14.jar:2.1.14]
        ... 9 more

18:39:57,696 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/ActivityDatabase]] (MSC service thread 1-8) Exception sending context initialized event to listener instance of class com.sun.faces.config.ConfigureListener: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: CONFIGURATION FAILED! Class org.jboss.as.web.deployment.jsf.JandexAnnotationProvi
der is not an instance of com.sun.faces.spi.AnnotationProvider
        at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:290) [jsf-impl-2.1.14.jar:2.1.14]
        at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3392) [jbossweb-7.0.13.Final.jar:]
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:3850) [jbossweb-7.0.13.Final.jar:]
        at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_09]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_09]
        at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09]
Caused by: com.sun.faces.config.ConfigurationException: CONFIGURATION FAILED! Class org.jboss.as.web.deployment.jsf.JandexAnnotationProvider is not an instance of com.sun.faces.spi.AnnotationProvider
        at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:376) [jsf-impl-2.1.14.jar:2.1.14]
        at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:223) [jsf-impl-2.1.14.jar:2.1.14]
        ... 8 more
Caused by: javax.faces.FacesException: Class org.jboss.as.web.deployment.jsf.JandexAnnotationProvider is not an instance of com.sun.faces.spi.AnnotationProvider
        at com.sun.faces.spi.AnnotationProviderFactory.createAnnotationProvider(AnnotationProviderFactory.java:78) [jsf-impl-2.1.14.jar:2.1.14]
        at com.sun.faces.config.ConfigManager$AnnotationScanTask.<init>(ConfigManager.java:808) [jsf-impl-2.1.14.jar:2.1.14]
        at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:349) [jsf-impl-2.1.14.jar:2.1.14]
        ... 9 more

18:39:57,743 ERROR [org.apache.catalina.core.StandardContext] (MSC service thread 1-8) Error listenerStart
18:39:57,758 ERROR [org.apache.catalina.core.StandardContext] (MSC service thread 1-8) Context [/ActivityDatabase] startup failed due to previous errors
18:39:57,758 SEVERE [javax.faces] (MSC service thread 1-8) Application was not properly initialized at startup, could not find Factory: javax.faces.application.ApplicationFactory. Attempting to find backup.
18:39:57,758 SEVERE [javax.enterprise.resource.webcontainer.jsf.config] (MSC service thread 1-8) Unexpected exception when attempting to tear down the Mojarra runtime: java.lang.IllegalStateException: Could not find backup for factory javax.faces.application.ApplicationFactory.
        at javax.faces.FactoryFinder$FactoryManager.getFactory(FactoryFinder.java:1010) [jsf-api-2.1.14.jar:2.1]
        at javax.faces.FactoryFinder.getFactory(FactoryFinder.java:342) [jsf-api-2.1.14.jar:2.1]
        at com.sun.faces.config.InitFacesContext.getApplication(InitFacesContext.java:136) [jsf-impl-2.1.14.jar:2.1.14]
        at com.sun.faces.config.ConfigureListener.contextDestroyed(ConfigureListener.java:328) [jsf-impl-2.1.14.jar:2.1.14]
        at org.apache.catalina.core.StandardContext.listenerStop(StandardContext.java:3489) [jbossweb-7.0.13.Final.jar:]
        at org.apache.catalina.core.StandardContext.stop(StandardContext.java:3999) [jbossweb-7.0.13.Final.jar:]
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:3917) [jbossweb-7.0.13.Final.jar:]
        at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_09]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_09]
        at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09]

18:39:57,805 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-8) MSC00001: Failed to start service jboss.web.deployment.default-host./ActivityDatabase: org.jboss.msc.service.StartException in service jboss.web.deployment.default-host./ActivityDatabase: JBAS018040: Failed to start context
        at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:95)
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_09]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_09]
        at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09]

18:39:57,821 INFO  [org.jboss.as] (MSC service thread 1-8) JBAS015951: Admin console listening on http://127.0.0.1:9990
18:39:57,836 ERROR [org.jboss.as] (MSC service thread 1-8) JBAS015875: JBoss AS 7.1.1.Final "Brontes" started (with errors) in 4446ms - Started 444 of 523 services (2 services failed or missing dependencies, 76 services are passive or on-demand)
18:39:58,039 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS015870: Deploy of deployment "ActivityDatabase.war" was rolled back with failure message {"JBAS014671: Failed services" => {"jboss.web.deployment.default-host./ActivityDatabase" => "org.jboss.msc.service.StartException in service jboss.web.deployment.default-host./ActivityDatabase: JBAS018040: Failed to start context"}}
18:39:58,179 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-16) JBAS015877: Stopped deployment ActivityDatabase.war in 145ms
18:39:58,179 INFO  [org.jboss.as.controller] (DeploymentScanner-threads - 2) JBAS014774: Service status report
JBAS014777:   Services which failed to start:      service jboss.web.deployment.default-host./ActivityDatabase: org.jboss.msc.service.StartException in service jboss.web.deployment.default-host./ActivityDatabase: JBAS018040: Failed to start context

18:39:58,179 ERROR [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) {"JBAS014653: Composite operation failed and was rolled back. Steps that failed:" => {"Operation step-2" => {"JBAS014671: Failed services" => {"jboss.web.deployment.default-host./ActivityDatabase" => "org.jboss.msc.service.StartException in service jboss.web.deployment.default-host./ActivityDatabase: JBAS01
8040: Failed to start context"}}}} 
```

我还尝试将 jsf 模块从 jboss-deployment-structure.xml 中排除为：

```
<jboss-deployment-structure>
    <deployment>
        <exclusions>
            <module name="javax.faces.api" />
            <module name="com.sun.jsf-impl" />
            <module name="javax.faces.api" />
            <module name="com.sun.jsf-impl" />
        </exclusions>
    </deployment>
</jboss-deployment-structure> 
```

但没有运气，同样的错误。我仍在网上搜索解决方案，但没有任何效果。我也不确定 JBoss 是否使用 Servlet 3.0 和 EL 2.2。虽然我已经`version="3.0"`在 web.xml 中指定了。

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app 
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    version="3.0">

    ---

</web-app> 
```

任何建议都会对我很有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T13:49:54.283

> 引起：javax.faces.FacesException：类 org.jboss.as.web.deployment.jsf.JandexAnnotationProvider 不是 com.sun.faces.spi.AnnotationProvider 的实例

这是在 JBoss 7.1.0 中首次发现并在 JBoss 7.1.3 中修复的错误，另请参见[JBoss AS 7 issue 3940](https://issues.jboss.org/browse/AS7-3940)。

因此，至少升级到 7.1.3 应该可以解决它。

# android - 使用 Ant 调试构建 Android 项目时出错

> ID：13879482
> 
> 赞同：1
> 
> 时间：2012-12-14T13:20:11.043
> 
> 标签：android, ant, apk

在进行蚂蚁构建时，我得到了

```
ERROR: Unknown option '--generate-dependencies' 
```

项目仅包含由 Android 项目`create`命令创建的默认页面。

```
 admin$ export PATH=$PATH:/Users/admin/Downloads/adt-bundle-mac/sdk/platform-tools;export PATH=$PATH:/Users/admin/Downloads/adt-bundle-mac/sdk/tools;ant debug  
    Buildfile: /Applications/MAMP/htdocs/command_test/build.xml  

    -set-mode-check:  

    -set-debug-files:  

    -check-env:  
     [checkenv] Android SDK Tools Revision 21  
     [checkenv] Installed at /Users/admin/Downloads/adt-bundle-mac/sdk  

    -setup:  
         [echo] Project Name: command_test  
      [gettype] Project Type: Application  

    -set-debug-mode:  

    -debug-obfuscation-check:  

    -build-setup:  
         [echo] Resolving Build Target for command_test...  
    [gettarget] Project Target:   Android 2.2  
    [gettarget] API level:        8  
         [echo] ----------  
         [echo] Creating output directories if needed...  
         [echo] ----------  
         [echo] Resolving Dependencies for command_test...  
    [dependency] Library dependencies:  
    [dependency] No Libraries  
    [dependency]   
    [dependency] ------------------  
    [dependency] API<=15: Adding annotations.jar to the classpath.  
         [echo] ----------  
         [echo] Building Libraries with 'debug'...  
       [subant] No sub-builds to iterate on  

    -pre-build:  

    -code-gen:  
    [mergemanifest] Merging AndroidManifest files into one.  
    [mergemanifest] Manifest merger disabled. Using project manifest only.  
         [echo] Handling aidl files...  
         [aidl] No AIDL files to compile.  
         [echo] ----------  
         [echo] Handling RenderScript files...  
    [renderscript] No RenderScript files to compile.  
         [echo] ----------  
         [echo] Handling Resources...  
         [aapt] Generating resource IDs...  
         [aapt] ERROR: Unknown option '--generate-dependencies'  
         [aapt] Android Asset Packaging Tool  
         [aapt]   
         [aapt] Usage:  
         [aapt]  aapt l[ist] [-v] [-a] file.{zip,jar,apk}  
         [aapt]    List contents of Zip-compatible archive.  
         [aapt]   
         [aapt]  aapt d[ump] [--values] WHAT file.{apk} [asset [asset ...]]  
         [aapt]    badging          Print the label and icon for the app declared in APK.  
         [aapt]    permissions      Print the permissions from the APK.  
         [aapt]    resources        Print the resource table from the APK.  
         [aapt]    configurations   Print the configurations in the APK.  
         [aapt]    xmltree          Print the compiled xmls in the given assets.  
         [aapt]    xmlstrings       Print the strings of the given compiled xml assets.  
         [aapt]   
         [aapt]  aapt p[ackage] [-d][-f][-m][-u][-v][-x][-z][-M AndroidManifest.xml] \  
         [aapt]         [-0 extension [-0 extension ...]] [-g tolerance] [-j jarfile] \  
         [aapt]         [--debug-mode] [--min-sdk-version VAL] [--target-sdk-version VAL] \  
         [aapt]         [--app-version VAL] [--app-version-name TEXT] [--custom-package VAL] \  
         [aapt]         [--rename-manifest-package PACKAGE] \  
         [aapt]         [--rename-instrumentation-target-package PACKAGE] \  
         [aapt]         [--utf16] [--auto-add-overlay] \  
         [aapt]         [--max-res-version VAL] \  
         [aapt]         [-I base-package [-I base-package ...]] \  
         [aapt]         [-A asset-source-dir]  [-G class-list-file] [-P public-definitions-file] \  
         [aapt]         [-S resource-sources [-S resource-sources ...]]         [-F apk-file] [-J R-file-dir] \  
         [aapt]         [--product product1,product2,...] \  
         [aapt]         [raw-files-dir [raw-files-dir] ...]  
         [aapt]   
         [aapt]    Package the android resources.  It will read assets and resources that are  
         [aapt]    supplied with the -M -A -S or raw-files-dir arguments.  The -J -P -F and -R  
         [aapt]    options control which files are output.  
         [aapt] 
         [aapt]  aapt r[emove] [-v] file.{zip,jar,apk} file1 [file2 ...]  
         [aapt]    Delete specified files from Zip-compatible archive.  
         [aapt]   
         [aapt]  aapt a[dd] [-v] file.{zip,jar,apk} file1 [file2 ...]  
         [aapt]    Add specified files to Zip-compatible archive.  
         [aapt]   
         [aapt]  aapt v[ersion]  
         [aapt]    Print program version.  
         [aapt]   
         [aapt]  Modifiers:  
         [aapt]    -a  print Android-specific data (resources, manifest) when listing  
         [aapt]    -c  specify which configurations to include.  The default is all  
         [aapt]        configurations.  The value of the parameter should be a comma  
         [aapt]        separated list of configuration values.  Locales should be specified  
         [aapt]        as either a language or language-region pair.  Some examples:  
         [aapt]             en  
         [aapt]             port,en  
         [aapt]             port,land,en_US  
         [aapt]        If you put the special locale, zz_ZZ on the list, it will perform  
         [aapt]        pseudolocalization on the default locale, modifying all of the  
         [aapt]        strings so you can look for strings that missed the  
         [aapt]        internationalization process.  For example:  
         [aapt]             port,land,zz_ZZ  
         [aapt]    -d  one or more device assets to include, separated by commas  
         [aapt]    -f  force overwrite of existing files  
         [aapt]    -g  specify a pixel tolerance to force images to grayscale, default 0  
         [aapt]    -j  specify a jar or zip file containing classes to include  
         [aapt]    -k  junk path of file(s) added  
         [aapt]    -m  make package directories under location specified by -J  
         [aapt]    -u  update existing packages (add new, replace older, remove deleted files)  
         [aapt]    -v  verbose output  
         [aapt]    -x  create extending (non-application) resource IDs  
         [aapt]    -z  require localization of resource attributes marked with  
         [aapt]        localization="suggested"  
         [aapt]    -A  additional directory in which to find raw asset files  
         [aapt]    -G  A file to output proguard options into.  
         [aapt]    -F  specify the apk file to output  
         [aapt]    -I  add an existing package to base include set  
         [aapt]    -J  specify where to output R.java resource constant definitions  
         [aapt]    -M  specify full path to AndroidManifest.xml to include in zip  
         [aapt]    -P  specify where to output public resource definitions  
         [aapt]    -S  directory in which to find resources.  Multiple directories will be   scanned  
         [aapt]        and the first match found (left to right) will take precedence.  
         [aapt]    -0  specifies an additional extension for which such files will not  
         [aapt]        be stored compressed in the .apk.  An empty string means to not  
         [aapt]        compress any files at all.  
         [aapt]    --debug-mode  
         [aapt]        inserts android:debuggable="true" in to the application node of the  
         [aapt]        manifest, making the application debuggable even on production devices.  
         [aapt]    --min-sdk-version  
         [aapt]        inserts android:minSdkVersion in to manifest.  If the version is 7 or  
         [aapt]        higher, the default encoding for resources will be in UTF-8\.  
         [aapt]    --target-sdk-version  
         [aapt]        inserts android:targetSdkVersion in to manifest.  
         [aapt]    --max-res-version  
         [aapt]        ignores versioned resource directories above the given value.  
         [aapt]    --values  
         [aapt]        when used with "dump resources" also includes resource values.  
         [aapt]    --version-code  
         [aapt]        inserts android:versionCode in to manifest.  
         [aapt]    --version-name  
         [aapt]        inserts android:versionName in to manifest.  
         [aapt]    --custom-package  
         [aapt]        generates R.java into a different package.  
         [aapt]    --auto-add-overlay  
         [aapt]        Automatically add resources that are only in overlays.  
         [aapt]    --rename-manifest-package  
         [aapt]        Rewrite the manifest so that its package name is the package name  
         [aapt]        given here.  Relative class names (for example .Foo) will be  
         [aapt]        changed to absolute names with the old package so that the code  
         [aapt]        does not need to change.  
         [aapt]    --rename-instrumentation-target-package  
         [aapt]        Rewrite the manifest so that all of its instrumentation  
         [aapt]        components target the given package.  Useful when used in  
         [aapt]        conjunction with --rename-manifest-package to fix tests against  
         [aapt]        a package that has been renamed.  
         [aapt]    --product  
         [aapt]        Specifies which variant to choose for strings that have  
         [aapt]        product variants  
         [aapt]    --utf16  
         [aapt]        changes default encoding for resources to UTF-16\.  Only useful when API  
         [aapt]        level is set to 7 or higher where the default encoding is UTF-8\.  
         [aapt]    --non-constant-id  
         [aapt]        Make the resources ID non constant. This is required to make an R java   class  
         [aapt]        that does not contain the final value but is used to make reusable   compiled  
         [aapt]        libraries that need to access resources.  

    BUILD FAILED  
    /Users/admin/Downloads/adt-bundle-mac/sdk/tools/ant/build.xml:645: The following error occurred while executing this line:  
    /Users/admin/Downloads/adt-bundle-mac/sdk/tools/ant/build.xml:683: null returned: 2 
```

# iphone - 目标 C 中的 JSON DELETE 方法不起作用？

> ID：13879483
> 
> 赞同：0
> 
> 时间：2012-12-14T13:20:12.433
> 
> 标签：iphone, objective-c, json, rest, ios6

我有一个 with Json Delete 方法。我在互联网上冲浪，一无所获。

这是我为 Json Delete 方法尝试过的代码。它只是返回“Json 值失败”

```
NSString *posturl=[NSString stringWithFormat:@"%@/spottings/%@/media/%@.json?auth_token=%@",_BASE_API_URL,[_spotting_id_array objectAtIndex:button.tag],[_ex_media_id_array objectAtIndex:button.tag],_ex_auth_token_str];

NSLog(@"posturl:%@",posturl);
// Prepare string request

NSURL *url=[NSURL URLWithString:[NSString stringWithFormat:@"%@",posturl]];

// Prepare URL request

NSMutableURLRequest *request =[[[NSMutableURLRequest alloc] init] autorelease];

NSOperationQueue *queue = [[NSOperationQueue alloc] init];

// Set the URL to request

[request setURL:url];

// Set the URL method

[request setHTTPMethod:@"DELETE"];

[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];

[NSURLConnection sendAsynchronousRequest:request queue:queue completionHandler:^(NSURLResponse *response, NSData *urlData, NSError *error){

    if ([urlData length] >0 && error == nil)
    {
        // Get JSON as a NSString from NSData response

        NSString *data=[[NSString alloc]initWithData:urlData encoding:NSUTF8StringEncoding];

        // parse the JSON response into an object

        // Here we're using NSArray since we're parsing an array of JSON status objects

        _results = [data JSONValue];

        NSLog(@"_results:%@",_results);

    }
    else if ([urlData length] == 0 && error == nil)
    {
        NSLog(@"Nothing was downloaded.");
    }
    else if (error != nil){
        NSLog(@"Error = %@", error);
    }
}]; 
```

错误代码 ：

-JSONValue 失败。错误跟踪是：（“错误域=org.brautaset.JSON.ErrorDomain Code=10 \"JSON 后的垃圾\" UserInfo=0x8195240 {NSLocalizedDescription=JSON 后的垃圾}"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T18:58:16.860

请求正文通常也不应包含任何数据。`DELETE`就像`GET`，只是一个发送到服务器的命令。不应有`Content-Type`随它发送的标头。尝试删除它。另外，尝试打印出 的内容`NSString *data`以查看您拥有的内容。

# c++ - 获取插入向量中的对象的索引

> ID：13879484
> 
> 赞同：17
> 
> 时间：2012-12-14T13:20:15.863
> 
> 标签：c++, stl, vector, std

如何获得我的对象实际插入的位置？

```
#include <vector>
using namespace std;

vector<SomeClass> list;
SomeClass object;
list.push_back(object);

list[...].method(); // I do not have the key 
```

不幸`push_back`的是没有返回任何东西，因为它的返回类型是`void`.

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-14T13:21:41.190

如果`v`是您的向量，以下将为您提供位置（即索引）：

```
v.push_back(object);
size_t pos = v.size() - 1; 
```

或者您可以查看`size()`调用之前的内容`push_back()`。那么你就不需要减去一个。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-14T13:22:30.280

您可以使用[back()](http://www.cplusplus.com/reference/vector/vector/back/)成员来获取对最后一个元素的引用：

```
list.push_back(object);
list.back(); 
```

或者，由于 push_back() 只是将对象添加到末尾，因此新插入元素的索引是向量大小减一：

```
list.push_back(object);
vector<my_class>::size_type object_pos = list.size() - 1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T13:27:37.547

如果您需要在拥有特定元素后定位它们，并且不想提前保存索引（以防您对向量执行排序/添加/删除/等操作），您也可以使用[找算法](http://www.cplusplus.com/reference/algorithm/find/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-22T11:13:38.533

虽然[NPE 的正确答案](https://stackoverflow.com/a/13879499/2932052)显示了一个务实的 POV，但我专注于这个简单答案的**推理**。可观察的行为[只是`push_back`成员函数](http://en.cppreference.com/w/cpp/container/vector/push_back)的目的：

> 将给定的元素值附加到容器的末尾。

所以索引总是等于`v.size()`插入前或`v.size()-1`插入后。如果无法满足此断言，则容器的容量无法增长，或者您的类在复制/移动构造函数中引发异常（请参阅文档中的[异常](http://en.cppreference.com/w/cpp/container/vector/push_back#Exceptions)部分）。

# scala - Groovy 中的 Scala 'zip' 函数是否有任何模拟？

> ID：13879489
> 
> 赞同：38
> 
> 时间：2012-12-14T13:20:40.157
> 
> 标签：scala, groovy

在 Scala 中，我可以这样写：

```
val a = List(1, 2, 3)
val b = List(4, 5)
println(a zip b) 
```

那将`List((1,4), (2,5))`作为输出产生。
现在我在 Groovy 中有两个集合，并希望以类似的方式压缩它们。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-12-14T13:37:33.300

Groovy 相当于 Scala 的`zip`is [`List#transpose`](http://groovy.codehaus.org/groovy-jdk/java/util/List.html#transpose%28%29)，可以在列表列表上调用它：

```
assert [[1, 2, 3], [4, 5]].transpose() == [[1, 4], [2, 5]] 
```

# css - 缩小浏览器宽度时更改为垂直菜单

> ID：13879490
> 
> 赞同：0
> 
> 时间：2012-12-14T13:20:45.697
> 
> 标签：css, twitter-bootstrap, navigation, responsive-design, nav

我已经开始使用 Twitter Bootstrap，并且已经实现了一个响应式导航，如果在移动设备上查看（或缩小浏览器窗口宽度），它会变为可折叠菜单。

**这是它现在的样子：**

![](../Images/0567f617c93e408c7bc3374c048d20af.png)

我想要的是在登录表单的左侧列出的菜单项，而不是现在的水平。Twitter Bootstrap 有没有简单的方法来做到这一点？

**这是我的导航代码：（我没有更改原始css）：**

```
 <div class='navbar'>
      <div class='navbar-inner'>
        <div class='container-fluid'>
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        <a class='brand'>Test</a>
        <ul class='nav nav-collapse collapse'>
            <li><a>Item 1</a></li>
            <li><a>Item 2</a></li>
            <li><a>Item 2</a></li>
            <li><a>Item 2</a></li>
        </ul>
        <ul class='nav nav-collapse collapse pull-right'>
            <li class=""><form class="navbar-search">
            <input type="text" class="span2" placeholder="Login">
            <input type="text" class="span2" placeholder="Password">
            <input type="submit" value="Login" class="btn"/>
        </form></li>
        </ul>
      </div>
    </div>
  </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:25:09.447

由于`LI`'s 可能是浮动的或定义为`inline-block`，您需要将它们的 CSS 规则分别更改为`clear:both`或`display:block`。然后您需要将整个菜单浮动到左侧，将登录表单浮动到右侧。

`resize`您可以使用 JQuery 的`css`方法使这些更改响应事件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T05:30:45.683

根据 twitter bootstrap 文档，您想要隐藏和正确格式化的所有内容都需要放入其中`<div class="nav-collapse collapse">{your nav items}</div>`

```
<div class='navbar'>
  <div class='navbar-inner'>
    <div class='container-fluid'>
      <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

    <a class='brand'>Test</a>

    <!-- ALL MY NAVIGATION IN HERE -->
    <div class='nav-collapse collapse'>
        <ul class='nav'>
            <li><a>Item 1</a></li>
            <li><a>Item 2</a></li>
            <li><a>Item 2</a></li>
            <li><a>Item 2</a></li>
        </ul>            
        <form class="navbar-search pull-right">
            <input type="text" class="span2" placeholder="Login">
            <input type="text" class="span2" placeholder="Password">
            <input type="submit" value="Login" class="btn"/>
        </form>
    </div>
  </div>
</div>
</div> 
```

只需在不添加任何 css 或 javascript 的情况下移动您的 html 即可。:) 这是一个 jsfiddle：http: [//jsfiddle.net/hajpoj/Z3wqL/3/](http://jsfiddle.net/hajpoj/Z3wqL/3/)

# jakarta-ee - 使用 Logback 时无法在部署时加载 EJB 模块错误

> ID：13879491
> 
> 赞同：3
> 
> 时间：2012-12-14T13:20:48.597
> 
> 标签：jakarta-ee, ejb, logback

我第一次玩 Java EE，我能够让一个 hello world 应用程序与调用 ejb 的 Web 客户端和控制台客户端一起工作。

在我确认代码正常工作后，我添加了一个使用 logback 进行记录的记录器。在我的代码中添加记录器后，我会收到以下错误，如果我删除 logback，错误就会消失。

**有什么办法可以让我在 EJB 上运行 logback？**

- 编辑 -

显然**是**的：[logback 演示页面](http://logback.qos.ch/demo.html)列出了一个带有 Web 应用程序的示例。

--结束编辑--

附带说明：唯一失败的部署是 Web，客户端控制台应用程序可以正常工作。

我得到的错误：

```
deploy?DEFAULT=C:\Users\roberth\Programming_Projects\NetBeans\WebInterface\build\web&name=WebInterface&contextroot=/WebInterface&force=true failed on GlassFish Server 3+ 
 Error occurred during deployment: Exception while preparing the app : Unable to load the EJB module. DeploymentContext does not contain any EJB. Check the archive to ensure correct packaging for C:\Users\roberth\Programming_Projects\NetBeans\WebInterface\build\web.
If you use EJB component annotations to define the EJB, and an ejb or web deployment descriptor is also used, please make sure that the deployment descriptor references a Java EE 5 or higher version schema, and that the metadata-complete attribute is not set to true, so the component annotations can be processed as expected. Please see server.log for more details.
C:\Users\roberth\Programming_Projects\NetBeans\WebInterface\nbproject\build-impl.xml:1060: The module has not been deployed. 
```

堆栈跟踪：

```
SEVERE: Exception while invoking class org.glassfish.ejb.startup.EjbDeployer prepare method
SEVERE: Exception while preparing the app
SEVERE: Unable to load the EJB module. DeploymentContext does not contain any EJB. Check the archive to ensure correct packaging for C:\Users\roberth\Programming_Projects\NetBeans\WebInterface\build\web.
If you use EJB component annotations to define the EJB, and an ejb or web deployment descriptor is also used, please make sure that the deployment descriptor references a Java EE 5 or higher version schema, and that the metadata-complete attribute is not set to true, so the component annotations can be processed as expected
java.lang.RuntimeException: Unable to load the EJB module. DeploymentContext does not contain any EJB. Check the archive to ensure correct packaging for C:\Users\roberth\Programming_Projects\NetBeans\WebInterface\build\web.
If you use EJB component annotations to define the EJB, and an ejb or web deployment descriptor is also used, please make sure that the deployment descriptor references a Java EE 5 or higher version schema, and that the metadata-complete attribute is not set to true, so the component annotations can be processed as expected
    at org.glassfish.ejb.startup.EjbDeployer.prepare(EjbDeployer.java:201)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.prepareModule(ApplicationLifecycle.java:871)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:410)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)

SEVERE: Exception while preparing the app : Unable to load the EJB module. DeploymentContext does not contain any EJB. Check the archive to ensure correct packaging for C:\Users\roberth\Programming_Projects\NetBeans\WebInterface\build\web.
If you use EJB component annotations to define the EJB, and an ejb or web deployment descriptor is also used, please make sure that the deployment descriptor references a Java EE 5 or higher version schema, and that the metadata-complete attribute is not set to true, so the component annotations can be processed as expected 
```

# android - TextView 只显示资源字符串的前四行

> ID：13879505
> 
> 赞同：0
> 
> 时间：2012-12-14T13:21:57.973
> 
> 标签：android, layout, textview

我无法在对话框中显示一些文本。当用户忘记他们的密码时，我使用“忘记密码”`TextView`来显示一条消息，解释当他们输入他们的电子邮件地址时会发生什么。这个布局是：

```
<TextView
    android:id="@+id/forgotpasswordtextview"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="@string/forgotpassword"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="@color/md_text_yellow"
    android:gravity="right" /> 
```

它在 a 内部`<LinearLayout></LinearLayout>`，具有以下属性：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/base_panel"
    android:orientation="vertical"
    android:padding="6dip" > 
```

它从单行视图开始，然后扩展到四行视图。

在对话框构造函数中，我有一个布局说明：

```
 mParent = LayoutInflater.from(context).inflate(R.layout.login, null);

    setContentView(mParent, new ViewGroup.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT)); 
```

我将其更改为使对话框高度为 600（它有效 - 一个垂直拉伸的对话框）并且`TextView`仍然只显示四行，因此它不会被其父级压碎。

这可能是什么原因造成的？

**编辑：**

将 更改为`TextView`在`android:textAppearance="?android:attr/textAppearanceSmall"`同一点切断字符串，显示三行。我现在想知道这是否是字符串问题而不是`TextView`问题。

原始字符串是：

`Please enter your registered email and we will send you details of how to reset your password. If you do not know your email then please contact us.`

它在以下位置中断：

`Please enter your registered email and we will send you details of how to reset your password. If you do not`

带有小文本（三行）和

`Please enter your registered email and we will send you details of how to reset your password. If you do not know`

中等文本（四行）。

我输入的新测试字符串是：

`0________ 1________ 2________ 3________ 4________ 5________ 6________ 7________ 8________ 9________ 10_______ 11_______ 12_______ 13_______ 14_______ 15_______ 16_______ 17_______`

它在以下位置中断：

`0________ 1________ 2________ 3________ 4________ 5________ 6________ 7________ 8________ 9________ 10_______ 11_______ 12_______ 13_______ 14_______`

带有小文本（五行）和

`0________ 1________ 2________ 3________ 4________ 5________ 6________ 7________ 8________ 9________ 10_______ 11_______`

中等文本（六行）。

**进一步编辑：**

*缩短*字符串表明它正在切断最后一行或两行。可能像[Android: Last line of textview cut off](https://stackoverflow.com/questions/11243867/android-last-line-of-textview-cut-off)。在字符串文件中添加换行符会给我另一行，但不是整个字符串！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T14:15:32.143

尝试为您的文本视图使用以下属性

[安卓：m​​axLines="10"](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3amaxLines)

[机器人：椭圆形=“无”](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3aellipsize)

[机器人：单行=“假”](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3asingleLine)

# cordova - 未捕获的 ReferenceError: dbb 未在 file:///android_asset/www/index.html (Phonegap) 中定义

> ID：13879507
> 
> 赞同：3
> 
> 时间：2012-12-14T13:22:13.243
> 
> 标签：cordova

我有一段用 Phonegap 编写的基本代码，它在 sql lite 表中插入值。但是，当我尝试按下此操作的按钮时，日志显示消息：“未捕获的 ReferenceError：dbb 未在文件中定义：///android_asset/www/index.html:116”。html文件中的所有代码是：

```
<!DOCTYPE HTML>
<html>
<head>
<meta name="viewport" content="width=default-width; user-scalable=no" />
   <meta http-equiv="Content-type" content="text/html;charset=utf-8">

   <title>Embedded Sql Example</title>

    <script type="text/javascript" charset="utf-8" src="cordova-2.2.0.js"></script>

        <script type="text/javascript" charset="utf-8" src="js/jquery-1.8.2.js"></script>

<!-- main scripts used in this example -->
 <script type="text/javascript" charset="utf-8">

var db;
var shortName = 'WebSqlDB';
var version = '1.0';
var displayName = 'WebSqlDB';
var maxSize = 65535;

function errorHandler(transaction, error) {
   alert('Error: ' + error.message + ' code: ' + error.code);

}

function successCallBack() {
   alert("DEBUGGING: success");

}

function nullHandler(){};

function onBodyLoad(){

alert("DEBUGGING: we are in the onBodyLoad() function");

 if (!window.openDatabase) {

   alert('Databases are not supported in this browser.');
   return;
 }

 db = openDatabase(shortName, version, displayName,maxSize);

 db.transaction(function(tx){

  // you can uncomment this next line if you want the User table to be empty each time the application runs
  // tx.executeSql( 'DROP TABLE User',nullHandler,nullHandler);

   tx.executeSql( 'CREATE TABLE IF NOT EXISTS User(UserId INTEGER NOT NULL PRIMARY KEY, FirstName TEXT NOT NULL, LastName TEXT NOT NULL)', [],nullHandler,errorHandler);
 },errorHandler,successCallBack);

}

function ListDBValues() {

 if (!window.openDatabase) {
  alert('Databases are not supported in this browser.');
  return;
 }

 $('#lbUsers').html('');

 db.transaction(function(transaction) {
   transaction.executeSql('SELECT * FROM User;', [],
     function(transaction, result) {
      if (result != null && result.rows != null) {
        for (var i = 0; i < result.rows.length; i++) {
          var row = result.rows.item(i);
          $('#lbUsers').append('<br>' + row.UserId + '. ' +
row.FirstName+ ' ' + row.LastName);
        }
      }
     },errorHandler);
 },errorHandler,nullHandler);

 return;

}

function AddValueToDB() {

 if (!window.openDatabase) {
   alert('Databases are not supported in this browser.');
   return;
 }

 db.transaction(function(transaction) {
   transaction.executeSql('INSERT INTO User(FirstName, LastName) VALUES (?,?)',[$('#txFirstName').val(), $('#txLastName').val()], nullHandler,errorHandler);
   });

 ListDBValues();

 return false;

}

</script>
</head>
<body onload="onBodyLoad();">
<h1>WebSQL</h1>
<input id="txFirstName" type="text" placeholder="FirstName">
<input id="txLastName" type="text" placeholder="Last Name">
<input type="button" value="Add record" onClick="AddValueToDB();">
<input type="button" value="Refresh" onClick="ListDBValues();"> <br>
<br>
<span style="font-weight:bold;">Currently stored values:</span>
<span id="lbUsers"></span>
</body>
</html> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:16:59.437

所以看起来你调用 openDatabase 就好了。但是，如果您查看来自 Cordova ( [http://docs.phonegap.com/en/2.2.0/cordova_storage_storage.md.html#openDatabase](http://docs.phonegap.com/en/2.2.0/cordova_storage_storage.md.html#openDatabase) ) 的示例，您会注意到该示例正在侦听 deviceready 事件而不是而不是等待身体加载。当 deviceready 事件触发时，这意味着 Cordova API 已准备好使用。当正文加载时，仅意味着 WebClient 已完成页面加载，但不保证其他一切都已准备就绪。

# java - 防止 XmlBeans 修剪空格

> ID：13879510
> 
> 赞同：2
> 
> 时间：2012-12-14T13:22:20.107
> 
> 标签：java, xmlbeans

XmlBeans 有一点问题。似乎它会自动修剪我试图添加到 XML 中的字符串的空格。例如。我有一个代码和值列表。每个代码都有一个值。

```
<code>
 <value/>
</code> 
```

有些代码可能有缺失值，在这种情况下，它们的值可能是“”。

但是，当我调用代码对象设置值方法（字符串）时，似乎 XmlBeans 会修剪空格。

```
code.setValue(" ");
=
<code>
 <value></value>
</code> 
```

我想知道是否有人知道如何在 XmlBeans 中解决这个问题，因为正确的输出应该是

```
<code>
 <value> </value>
</code> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:08:57.680

啊，所以这与我如何设置值无关，而是我如何保存文件。我使用 XmlOptions().setSavePrettyPrint() 保存了它。根据邮件列表

[http://mail-archives.apache.org/mod_mbox/xmlbeans-user/200803.mbox/%3CAB46E23AEB035C4FBCE6F5F59D56B12701A5443B@repbex01.amer.bea.com%3E](http://mail-archives.apache.org/mod_mbox/xmlbeans-user/200803.mbox/%3CAB46E23AEB035C4FBCE6F5F59D56B12701A5443B@repbex01.amer.bea.com%3E)

这是负责修剪空白的原因。

# java - Android，下载 .txt 文件并在内部保存

> ID：13879512
> 
> 赞同：0
> 
> 时间：2012-12-14T13:22:21.893
> 
> 标签：java, android, file, download

就像标题一样，我只是想下载一个 test.txt 文件，下面的 url 并将其保存在内部，最好是在 drawable 中。

我一直在尝试修改它以使其正常工作，但收效甚微，我不断收到“无法下载空”错误

```
int count;          
try {
    URL url = new URL("https://www.darkliteempire.gaming.multiplay.co.uk/testdownload.txt");
    URLConnection conexion = url.openConnection();
    conexion.connect();
    int lenghtOfFile = conexion.getContentLength();
    InputStream is = url.openStream();
    File testDirectory = new File(Environment.getExternalStorageDirectory() + "/Download");

    if (!testDirectory.exists()) {
        testDirectory.mkdir();
    }

    FileOutputStream fos = new FileOutputStream(testDirectory + "/test.txt");
    byte data[] = new byte[1024];
    long total = 0;
    int progress = 0;

    while ((count = is.read(data)) != -1) {
        total += count;

        int progress_temp = (int) total * 100 / lenghtOfFile;

        fos.write(data, 0, count);
    }

    is.close();
    fos.close();
} catch (Exception e) {
    Log.e("ERROR DOWNLOADING", "Unable to download" + e.getMessage());
} 
```

必须有一个更简单的方法来做到这一点？文件本身很小，可能只有 3 或 4 行文本，所以我不需要任何花哨的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:31:26.560

请更新您的以下代码行并编写有效的网址。

```
URL url = new URL("https://www.http://darkliteempire.gaming.multiplay.co.uk/testdownload.txt"); 
```

编写有效的 url 后，您的代码行如下所示。

```
URL url = new URL("http://www.darkliteempire.gaming.multiplay.co.uk/testdownload.txt"); 
```

它会解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:28:51.530

使用[AQuery 库](http://code.google.com/p/android-query)你会得到一些非常简单的东西。此外，您还将获得其他很酷的功能来缩短您的代码。

[http://code.google.com/p/android-query/wiki/AsyncAPI](http://code.google.com/p/android-query/wiki/AsyncAPI)

```
String url = "https://picasaweb.google.com/data/feed/base/featured?max-results=16";             

File ext = Environment.getExternalStorageDirectory();
File target = new File(ext, "aquery/myfolder/photos.xml");              
aq.progress(R.id.progress).download(url, target, new AjaxCallback<File>(){            
        public void callback(String url, File file, AjaxStatus status) {                    
                if(file != null){
                        showResult("File:" + file.length() + ":" + file, status);
                }else{
                        showResult("Failed", status);
                }
        }            
}); 
```

# url - 如何在 Drupal 6 中验证和检查输入的 URL 是否有效

> ID：13879516
> 
> 赞同：1
> 
> 时间：2012-12-14T13:22:33.407
> 
> 标签：url, drupal-6, drupal-modules

在不使用任何第三方模块的情况下，是否可以同时验证和检查文本框中输入的任何 URL 在 Drupal 6 中是否有效？一些示例代码将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T01:44:31.343

[menu.inc（Drupal Core 的一部分）中的 menu_valid_path()](http://api.drupal.org/api/drupal/includes!menu.inc/function/menu_valid_path/6)函数就是这样做的。

要回答您的具体问题：

> 在不使用任何第三方模块的情况下，是否可以同时验证和检查在文本框中输入的任何 URL 在 Drupal 6 中是否有效

**是的。**

但是，您需要创建一个简单的自定义模块。

让我们假设：

1.  您的[表单 ID](http://www.lullabot.com/articles/modifying-forms-drupal-5-and-6)是`my_form_1`
2.  有问题的字段名称是 my_path_field_1

在您的 MODULENAME.module 文件中：

```
<?php
/**
 * Modifies the existing form element 'my_path_field_1' to add
 * 'MODULENAME_path_validate' function to validation array.
 * 
 * (MYMODULE_path_validate is defined below)
 */
function MODULENAME_form_alter(&$form, $form_state, $form_id) {
  switch ($form_id) {
    case 'my_form_1' :
      $form['my_path_field_1']['#element_validate'] = array('MODULENAME_path_validate');
    break;
}
// Note, you could use hook_form_FORM_ID_alter(&$form, &$form_state)
// instead of the above to simplify things if the only thing this module
// does is validite one field for a valid path.

/**
 * Validates the my_path_field_1 using Drupal's built-in menu_valid_path()
 * function. Returns a form error if the field does not contain a valid path
 * or the current user does not have access to the path's permission.
 */
function MODULENAME_path_validate($element, &$form_state) {
  if (!menu_valid_path($element)) {
    form_error($element, t('The path entered does not exist or you do not have permission to access it.'));
  }
} 
```

# visual-studio-2010 - 配置代码片段以自动扩展？（扩展很好）

> ID：13879522
> 
> 赞同：1
> 
> 时间：2012-12-14T13:23:23.350
> 
> 标签：visual-studio-2010, visual-studio

是否可以创建一个代码片段，在我键入其“快捷方式”的最后一个字母时自动扩展（不需要我按两次 Tab 等），如果可以，我该怎么做？现在我通过为 配置一个更方便的击键来过日子`Edit.InvokeSnippetFromShortcut`，但它仍然是我觉得不需要的击键（对于一小部分片段）。

（如果需要使片段更好，我可以安装扩展程序，包括我必须购买的东西。）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-14T13:30:13.770

您正在寻找的可能是 Macro- [MSDN Info on Macro Usage](http://msdn.microsoft.com/en-us/library/a0003t62%28v=vs.80%29.aspx)。

您可以创建一个宏来键入片段并按两次 Tab，或者通过它创建片段代码。

# jquery - Ruby on Rails - 根据所选 ID 显示文本字段

> ID：13879525
> 
> 赞同：1
> 
> 时间：2012-12-14T13:23:31.940
> 
> 标签：jquery, ruby-on-rails-3.1

我为订单创建了一个输入表单，我选择`client`如下：

```
<div class="field">  
  <%= f.label :client_short, "Client Code Short" %><br />
  <%= f.collection_select(:client_short, Client.order(:shortname), :shortname, :shortname)%>
</div> 
```

的另一列`Client`是列`fullname`。现在，我想在不可编辑的文本字段中检索并显示基于短名称的全名值，以在订单输入期间进行验证。

我不知道要开始，所以有人可以帮我举个例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:34:15.123

用于`javascript`此类任务。`jQuery`我将用纯和做一个例子，而`javascript`不是使用`coffescript`. 打开您的`client.js`（以前的`client.js.coffee`，只需重命名它），然后将一个`change`事件添加到您的列表中，在另一个字段上显示全名：

```
$(function() {
  $('#list_id').change(function() {
    var client_id = $(this).val();
    $.get('/clients/get_fullname', client_id, function() { });
  });
}); 
```

现在，您必须在控制器名称上创建一个`get_fullname`响应`javascript`. 也许是这样的：

```
def get_fullname
  @full_name = Client.find(params[:client_id]).fullname
  respond_to |format|
    format.js
  end
end 
```

现在您在文件夹上创建一个`get_fullname.js.erb`文件，该文件`/views`在不可编辑字段上显示名称：

```
$('#uneditable_field_id').val("<%= @item %>") 
```

只需检查一些小的拼写错误和语法错误，就可以了。
请记住，这只是许多人执行此类操作的一种方式。

# oracle - 无法使用 PL/SQL Developer 登录

> ID：13879527
> 
> 赞同：8
> 
> 时间：2012-12-14T13:23:34.397
> 
> 标签：oracle, plsqldeveloper

我在使用 Pl/SQL Developer 登录我的数据库时遇到问题。所有连接参数都在 TNSNAMES.ORA 中定义，并与 SQL Developer 完美配合。

不幸的是，当我尝试使用 PL/SQL Developer 进行连接时，我收到一条没有内容的消息。我使用的是 9.0.6.1665 版本。

这是一个已知问题吗？我可能做错了什么？

这是这个奇怪错误的图像：

![在此处输入图像描述](../Images/fc5f083d17efb03a49ad6ccbf462d6d1.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T05:58:44.040

可能您可能已经解决了您的问题，但我想在这里添加我的解决方案。

我在尝试登录 PL/SQL Developer 时遇到了同样的空白错误屏幕问题。操作系统 Win 7 Pl/SQL Dev 7.1.3 Oracle 客户端 10g

第 1 步：我检查了“tnsping”的输出。它导致错误 - 找不到消息 3511 原因是我的环境中 ORACLE_HOME 值的设置不正确。更正 ORACLE_HOME 后，tnsping 开始工作，但在 PL/SQL Developer 中仍然出现相同的空白错误屏幕。 **编辑：**有关正确设置 ORACLE_HOME 的更多信息，请参阅[链接](https://stackoverflow.com/questions/2747462/how-to-correctly-set-the-oracle-home-variable-on-ubuntu-9-x)。

第 2 步：我使用“以管理员身份运行”选项启动 PL/SQL Developer。提供管理员密码后，我就可以通过PL/SQL Developer成功登录了

第 3 步：后来我更改了用户帐户控制设置（Win 7 控制面板 > 用户帐户 > 更改用户帐户控制设置）。我将其设置为“从不通知”并重新启动我的电脑。此后，我以普通用户身份运行 PL/SQL Developer 并没有遇到该问题。

我希望这可以帮助别人。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-11T20:30:43.447

1.  确保您已连接到网络/VPN。
2.  打开 PL/SQL 开发人员。
3.  单击工具-> 首选项。选择第一个选项：连接。
4.  从 Oracle Home 下拉列表中，选择正确的选项。如果您不确定哪个是正确的，请尝试一个接一个地选择，直到适合您的那个。
5.  重新启动 PL/SQL Developer。
6.  交叉手指并重试连接到您的数据库。如果有效，请说“Buiya”。如果没有，请尖叫“F***”，然后谷歌搜索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-18T19:43:19.773

> **PLSQL Developer 在安装后能够正常工作的 5 件事。**

1.  您需要一个 Oracle 客户端。谷歌***“Oracle 技术支持下载”***并为您的环境（w32/64 或 linux）下载合适的 Oracle 客户端。安装时，请确保您的选择包括“运行时”选项。即使您的 PL/SQL Developer 较旧，也可以获取最新的适当版本。我的是
    *   “win32_11gR2_client”。
2.  使用控制面板的**系统设置**，编辑环境变量 - 确保 Oracle 的 bin**路径**在系统路径和用户路径中，或者至少在用户路径中。我的是
    *   C:\Oracle\product\11.2.0\client_1\bin
3.  如果您仍然有登录问题，请重新安装您的 PL/SQL Developer。开发人员将打开一个空白文档，您可以在其中使用 HELP 的“注册”项**注册您的产品密钥和您的（给定序列号和密码）**。
4.  检查帮助下的“支持信息”。浏览他们的信息。编辑您的环境变量以确保信息获取所有正确的搜索路径。使用**Tools/Preferences/Connection/(Oracle Home and OCI library) Dropdown**选择所需的版本 [![图片--在注册表中查看您的选项](../Images/fa6eba6cdc06ac362596f726ae54a985.png)](https://i.stack.imgur.com/ScaaU.jpg)
5.  转到 Oracle 顶级目录。使用搜索功能在所有子目录中搜索名为**tnsnames.ora**的文件。

    一个。输入系统设置环境的路径。

    湾。按照预期的格式，提供 TNS 解析的名称。编辑文件以包含地址列表

    var1 = (DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = _____)(PORT = ____)) (CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = _____)))

    var2 = (DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = ______)(PORT = ____)) (CONNECT_DATA = (SERVER = DEDICATED)(SID = _____)))

SERVICE_NAME 和 SID 可以互换！

# linux - 大多数“vanila”linux发行版

> ID：13879528
> 
> 赞同：-2
> 
> 时间：2012-12-14T13:23:50.683
> 
> 标签：linux

请告诉我从补丁内核中最清楚的发行版。我想尝试自己编写内核模块，我想一个严重修补的内核会干扰我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:26:10.260

我所知道的最普通的发行版是 Slackware。

# search-engine - 谷歌是如何找到我的网站的？

> ID：13879530
> 
> 赞同：0
> 
> 时间：2012-12-14T13:23:59.260
> 
> 标签：search-engine, google-search

我创建了一个网站。一个星期以来，我有一个正在建设中的页面，谷歌确实找到了该页面并将其编入索引。我的问题是：谷歌是如何找到我的网站的，而没有指向该网站的链接并且该名称以前从未使用过？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T13:25:41.477

Your domain name went in a domain name server. Google probably found it there.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T13:34:18.227

有很多网站会自动收集域名的 Whois 信息以及完整的域名信息。如果您非常确定您从未向 Google 展示过您的域名，我猜这些网站就是这样做的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T13:36:15.597

您的浏览器 (Chrome) 或您的浏览器插件可能已向 Google 发送了一份关于您的浏览统计信息的匿名报告 - 您确实在浏览器中打开了您的网站，对吧？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T15:04:49.710

您没有使用阻止 Google 的 robots.txt 文件。

# installation - 将 .NET 4.0 添加到 installshield 2011

> ID：13879538
> 
> 赞同：0
> 
> 时间：2012-12-14T13:24:36.907
> 
> 标签：installation, installshield

我已将 Microsoft .NET Framework 4.0 Full 添加到我的安装程序中，并将其设置为从 setup.exe 中提取，但是当我运行安装程序时，它会开始下载，然后安装 .Net 4，而不是直接从安装程序安装而不下载。

有没有人知道为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T09:11:45.477

实际上，您还需要更改“发布”菜单中的一个选项，您可以在其中配置 setup.exe。
它选项在选项卡中调用`InstallShield Prerequisites Location`（可以有另一个但相似的名称，我使用 2012 版本）`Setup.exe`，您需要将其更改为`Follow Individual Selections`或`Extract from Setup.exe`.

# string - Bash script passing string argument containing $

> ID：13879542
> 
> 赞同：1
> 
> 时间：2012-12-14T13:24:53.367
> 
> 标签：string, bash, argument-passing

I need to pass a string argument to a bash script that may contain a $ character. I don't want to force a \ to be inserted into the string outside of the script.

I tried to do that within the script, but couldn't figure out how to do this.

I had a similar issue at a later point in the script where I read in a string using "read". I could only get it to work by forcing the user to enter \$, which is not going to work for my application.

Any suggestions ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T13:27:32.847

如果您不想`$`用反斜杠转义，那么唯一的另一种选择是将参数括在**单引号**中。无法将“naked”传递`$`到您的脚本中，因为 shell 会尝试扩展它。使用单引号可防止 shell 扩展，并将保留`$`.

例如：

```
myscript.sh '$foo' 
```

# ios - 如何下载 Vuforia 应用程序的数据集？

> ID：13879548
> 
> 赞同：2
> 
> 时间：2012-12-14T13:25:10.947
> 
> 标签：ios, xcode, download, augmented-reality

我正在使用 iOS 5.1 在 Xcode 4.2 中从 Vuforia SDK 1.5.9 开发示例应用程序。在那个版本中，我无法自己制作可跟踪的数据集——我必须使用 Qualcomm 的在线解决方案。有谁知道或尝试过从远程位置下载数据集？因此，您像往常一样生成它们，但将它们从服务器下载到应用程序中，这样我就可以例如选择要下载和使用哪一个？

昨天我快速尝试了一下：

```
-(void)setupMarkers{
    NSString *filePathX;
    //connect to the remot location
    NSURL *urlD = [NSURL URLWithString:[NSString stringWithFormat:@"%@/frames.dat",kURLServer]];
    NSData *urlData = [NSData dataWithContentsOfURL:urlD];
    if ( urlData )
    {
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];  

        NSString *filePath = [NSString stringWithFormat:@"%@/%@", documentsDirectory,@"frames.dat"];
        [urlData writeToFile:filePath atomically:YES];
    }
    NSURL *urlX = [NSURL URLWithString:[NSString stringWithFormat:@"%@/frames.xml",kURLServer]];
    NSData *urlDataX = [NSData dataWithContentsOfURL:urlX];
    if ( urlDataX )
    {
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];  

        NSString *filePath = [NSString stringWithFormat:@"%@/%@", documentsDirectory,@"frames.xml"];
        [urlDataX writeToFile:filePath atomically:YES];
        filePathX = filePath;
    }
    //put them into markersArray
    [self.markersArray addObject:filePathX];
} 
```

我知道这很丑，但正如我所说，这是一个快速尝试，但它根本没有用。我知道有带有云和东西的新 Vuforia SDK 2.0，但是我必须使用 iOS6 和 Xcode 4.5 - 这不是我现在的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:56:47.417

其实我的“快速尝试”毕竟不是那么糟糕:)这就是我所做的：

1.  写了一个方法 -(void)setupMarkers 在其中我 dwonload .dat 和 .xml 文件（如问题）
2.  在 QCARUtils.mm 我更改了 - (QCAR::DataSet *)loadDataSet:(NSString *)dataSetPath 一行：

    ```
    // Load the data set from the App Bundle
    // If the DataSet were in the Documents folder we'd use STORAGE_ABSOLUTE and the full path
    if (!theDataSet->load([dataSetPath cStringUsingEncoding:NSASCIIStringEncoding], QCAR::DataSet::STORAGE_ABSOLUTE))//STORAGE_APPRESOURCE)){
    ...
    } 
    ```

奇迹般有效 ：）

ps 我会等一会儿，如果有人能提出更好的答案；）

# c++ - Run Mac application of C++ and Qt on another Mac

> ID：13879554
> 
> 赞同：0
> 
> 时间：2012-12-14T13:25:53.053
> 
> 标签：c++, xcode, macos, qt

I am trying run a simple C++ with QT application on another mac. I am trying to avoid having to install Qt on the other mac. This application was created in Xcode with cmake.

Two notes: my application (for some reason) does not create an .app file. It just creates a file with the name of my project (and no extension). I can run this file by double clicking, but still, it is not an .app. Does this matter?

Another thing, I am linking my application to static libraries of Qt. From what I understand, this should allow to run the application even if Qt is not installed, right? The result of running my application on the other mac is simply a terminal window that says: Instruction unknown.

# ruby-on-rails-3 - 如何修复此错误：“不兼容的字符编码：UTF-8 和 ASCII-8BIT”？

> ID：13879557
> 
> 赞同：0
> 
> 时间：2012-12-14T13:25:56.377
> 
> 标签：ruby-on-rails-3, utf-8

我正在尝试使用此处记录的 rmmseg-cpp gem 的示例代码：[http ://rmmseg-cpp.rubyforge.org/#Stand-Alone-rmmseg](http://rmmseg-cpp.rubyforge.org/#Stand-Alone-rmmseg)

只是为了测试它，我把它放在 show.html.erb 中，如下所示：

```
# coding: UTF-8
<p id="notice"><%= notice %></p>

<p>
  <b>Title:</b>
  <%= @lesson.title %>
</p>

<p>
  <b>Content:</b>
  <%= @lesson.content %> # simplified chinese text
</p>

<p><% require 'rmmseg' %>
<% algor = RMMSeg::Algorithm.new(@lesson.content) %>
<% loop do %>
  <% tok = algor.next_token %>
  <% break if tok.nil? %>
  <%= "#{tok.text} [#{tok.start}..#{tok.end}]" %>
<% end %> </p>

<%= link_to 'Edit', edit_lesson_path(@lesson) %> |
<%= link_to 'Back', lessons_path %> 
```

我收到以下错误：

```
 Encoding::CompatibilityError in Lessons#show

Showing /Users/webmagnets/rails_projects/blt/app/views/lessons/show.html.erb where line #19 raised:

incompatible character encodings: UTF-8 and ASCII-8BIT

Extracted source (around line #19):

16: <% loop do %>
17:   <% tok = algor.next_token %>
18:   <% break if tok.nil? %>
19:   <%= "#{tok.text} [#{tok.start}..#{tok.end}]" %>
20: <% end %> </p>
21: 
22: <%= link_to 'Edit', edit_lesson_path(@lesson) %> |

Rails.root: /Users/webmagnets/rails_projects/blt
Application Trace | Framework Trace | Full Trace

app/views/lessons/show.html.erb:19:in `block in _app_views_lessons_show_html_erb___3831310028264182552_70339844987120'
app/views/lessons/show.html.erb:16:in `loop'
app/views/lessons/show.html.erb:16:in `_app_views_lessons_show_html_erb___3831310028264182552_70339844987120'
app/controllers/lessons_controller.rb:20:in `show'

Request

Parameters:

{"id"=>"1"}

Show session dump

Show env dump
Response

Headers:

None 
```

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T15:09:05.040

这个链接帮助了我：[https ://github.com/sinatra/sinatra/issues/559#issuecomment-7748296](https://github.com/sinatra/sinatra/issues/559#issuecomment-7748296)

我用过`<% text = tok.text.force_encoding 'UTF-8' %>`，效果很好。

感谢@zed_0xff 让我走上了正确的道路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T14:45:35.620

试试这个解决方法

```
<% text = tok.text.encode('utf-8',:invalid => :replace, :undef => :replace) %>
<%= "#{text} [#{tok.start}..#{tok.end}]" %> 
```

# asana - "No matching route for request" message when updating task using Asana API

> ID：13879560
> 
> 赞同：2
> 
> 时间：2012-12-14T13:26:04.473
> 
> 标签：asana

I am trying to update a task in Asana using the Asana API. I can create the task successfully but when I update it I get the message "No matching route for request".

I am doing an PUT to the URL [https://app.asana.com/api/1.0/tasks/2768594478959](https://app.asana.com/api/1.0/tasks/2768594478959) with the body containing:

```
{"data":{"id":2768594478959,"name":"Test 5","notes":"Test 5 Notes"}} 
```

My content type is set to `application/json`.

If I copy the [https://app.asana.com/api/1.0/tasks/2768594478959](https://app.asana.com/api/1.0/tasks/2768594478959) URL to the browser it does return the task.

Does anyone have any idea why I may be getting this error?

Thanks,

Wayne

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T02:19:54.020

我在 NetSuite 中使用其专有的 HTTP 请求功能执行此调用，结果发现它正在执行 POST，即使我告诉它执行 PUT。

我使用[http://httpbin.org](http://httpbin.org)来解决这个问题。

问候，韦恩

# iphone - Want to generate non repeating random numbers

> ID：13879563
> 
> 赞同：1
> 
> 时间：2012-12-14T13:26:19.200
> 
> 标签：iphone, objective-c, ios, random

> **Possible Duplicate:**
> [Generating non-repeating random numbers](https://stackoverflow.com/questions/8554292/generating-non-repeating-random-numbers)

Here is my code

```
NSUInteger count = 10;
for (NSUInteger i = 0; i < count; ++i) {
    NSLog(@"%d",NeedRandomNumberWithoutRepeat);
} 
```

this output should be like 8 7 9 2 1 4 6 3 5 0 Which is random and not repeating numbers

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:27:53.960

这应该有效：

```
NSUInteger count = 10;

NSMutableArray *array = [[NSMutableArray alloc]init];
for (NSUInteger i = 0; i < count; ++i) {
    [array addObject:[NSNumber numberWithInt:i]];
}

NSMutableArray *copy = [array mutableCopy];
array = [[NSMutableArray alloc]init];
while ([copy count] > 0)
{
    int index = arc4random() % [copy count];
    id objectToMove = [copy objectAtIndex:index];
    [array addObject:objectToMove];
    [copy removeObjectAtIndex:index];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:54:20.073

[这个答案](https://stackoverflow.com/questions/13640208/how-to-generate-non-repeating-random-number-objective-c/13640257#13640257)是我在 SO 中的一个答案的修改版本。

因此，您可能会在这里发现一些奇怪的东西，但是您可以使用它，因为您的要求相似。

```
int TOTAL_NUMBER=10;
NSMutableArray *alreadyGeneratedNumbers;

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification{
    alreadyGeneratedNumbers=[NSMutableArray new];
}

-(int)generateRandomNumber{
    int low_bound = 0;
    int high_bound = TOTAL_NUMBER;
    int width = high_bound - low_bound;
    int randomNumber = low_bound + arc4random() % width;

    return randomNumber;
}

- (IBAction)button:(id)sender {
    NSMutableArray *shuffle = [[NSMutableArray alloc] initWithCapacity:1];

    BOOL contains=YES;
    while ([shuffle count]<1) {
        NSNumber *generatedNumber=[NSNumber numberWithInt:[self generateRandomNumber]];

        if (![alreadyGeneratedNumbers containsObject:generatedNumber]) {
            [shuffle addObject:generatedNumber];
            contains=NO;
            [alreadyGeneratedNumbers addObject:generatedNumber];
        }
    }

    NSLog(@"shuffle %@",shuffle);
    NSLog(@"Next Batch");

    if ([alreadyGeneratedNumbers count] >= TOTAL_NUMBER) {
        NSLog(@"\nGame over, Want to play once again?");//or similar kind of thing.
        [alreadyGeneratedNumbers removeAllObjects];
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-14T13:57:29.007

您将可用数字放入一个数组中，然后将使用 arc4random() 计算的索引从 0 变为数组的大小 -1。当一个数字出现时，您将其从数组中取出：

```
NSMutableArray* availableNumbers=[NSMutableArray new];
for(NSUInteger i=0; i<10; i++)
{
    [availableNumbers addObject: @(i)];
}
for(NSUInteger i=0; i<10; i++)
{
    NSUInteger index= arc4random()%availableNumbers.count;
    NSNumber* number= availableNumbers[index];
    NSLog(@"%@",number);
    [availableNumbers removeObjectAtIndex: index];
} 
```

PS：在最后一次迭代中起诉 arc4random() 是没有用的，因为里面只有一个数字。

# javascript - countup 增量加速的二次函数

> ID：13879564
> 
> 赞同：3
> 
> 时间：2012-12-14T13:26:18.933
> 
> 标签：javascript, jquery, math, quadratic-curve

我正在编写一个 jQuery 插件，用于在页面加载时快速计数到一个值。由于 javascript 不能像我想要的那样快速运行更大的数字，我想增加增量步骤，以便它在给定的时间范围内完成，所以我需要一个通过 origo 并具有它的转折点的二次函数在 y = 目标计数值和 x = 目标持续时间，但我无法掌握这样做的数学。由于数字和持续时间都可以改变，我需要能够在 javascript 中计算它。

希望有人可以帮助我解决这个问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T13:43:04.480

让我们将声明形式化一下。

我们寻求形式的方程

`y = a*x*x + b*x + c`

其中 x 是时间轴，y 是计数轴。我们知道曲线上的一个点是 (0,0)，另一个点是 (xf, yf)，其中 xf 是最终时间，yf 是目标计数。此外，您希望该方程的导数在 (xf, yf) 处为零。

```
y' = 2*a*x + b 
```

所以我有三个方程和三个未知数：

```
(0,0) => 0 = c
(xf, yf) => yf = a*xf*xf + b*xf + c
y' = 0 @ (xf, yf) => 0 = 2*a*xf + b 
```

你应该能够从那里解决它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T14:14:29.257

```
// Create a quadratic function that passes through origo and has a given extremum.
// x and y are the coordinates for the extremum.
// Returns a function that takes a number and returns a number.
var quadratic = function (x, y) {
    var a = - (y / (x * x));
    var b = (2 * y) / x;
    return function (x) {
        return a * x * x + b * x;
    };
}; 
```

# php - 在 PHP 中解析 Python 数组

> ID：13879566
> 
> 赞同：2
> 
> 时间：2012-12-14T13:26:32.197
> 
> 标签：php, arrays, python-2.7

我的服务器上运行了一个 Python 脚本，它创建了一个像这样的 2D 列表：

```
[['Header1', 'Header2', 'Header3'], ['2012-09-10 00:11:00', '61.3', '57.0'], ...] 
```

我将它传递回运行我的网页的 PHP 脚本。这是我目前用来获取数组的 PHP。我得到了行，但显然`[[`在开始和`]]`结束时都有不需要的行。

```
exec("python weatherdata.py $stationID $startdate $enddate", $pyoutput);
$vars = explode("], [", $pyoutput[0]); 
```

为了解释我真正想要做的事情，因为肯定会有一个“正确”的解决方案（我对 PHP 一点也不熟悉），我想要做的是调整从[这里](http://code.stephenmorley.org/php/creating-downloadable-csv-files/)下载 CSV 文件的代码给用户，但使用 mySQL 来填充它。这里的设置部分工作正常。

**针对下面杰克的回答进行了编辑**

```
// Commented out my working parsing part
// remove the start and end square braces then split into rows
//$output = str_replace("[[","",$pyoutput);
//$output = str_replace("]]","",$output);
//$rows = explode("], [", $output[0]);

// output headers so that the file is downloaded rather than displayed
header('Content-Type: text/csv; charset=utf-8');
header('Content-Disposition: attachment; filename='data.csv');

// create a file pointer connected to the output stream
$output = fopen('php://output', 'w');

foreach (preg_split('/],\s*\[/', trim($pyoutput, '[]')) as $row) {
        $data= preg_split("/',\s*'/", trim($row, "'"));
        fputcsv($data);
}
// Commented out my working write to CSV part
// write rows
//foreach ($rows as $row){
//    $row = str_replace("'","",$row);
//    $row = explode(",", $row);
//    fputcsv($output, $row);
//} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T13:39:15.517

不确定这对您是否可行，但从 PHP 5.4 开始，它支持[短数组语法](http://php.net/manual/en/language.types.array.php#example-82)，例如，`[1, 2, 3]`而不是`array(1, 2, 3)`.

所以，你可以只使用邪恶......我的意思是`eval()`：

```
$vars = eval(`python weatherdata.py $stationID $startdate $enddate`); 
```

否则，如果数组语法始终采用该格式，只需用 将其分开`preg_split()`，首先在方括号中，然后在单引号中：

```
foreach (preg_split('/],\s*\[/', trim($s, '[]')) as $row) {
        $data = preg_split("/',\s*'/", trim($row, "'"));
        print_r($data);
} 
```

输出：

```
Array
(
    [0] => Header1
    [1] => Header2
    [2] => Header3
)
Array
(
    [0] => 2012-09-10 00:11:00
    [1] => 61.3
    [2] => 57.0
) 
```

# python - #!/usr/bin/python and #!/usr/bin/env python, which support?

> ID：13879569
> 
> 赞同：10
> 
> 时间：2012-12-14T13:26:43.350
> 
> 标签：python, shebang

How should the shebang for a Python script look like?

Some people support `#!/usr/bin/env python` because it can find the Python interpreter intelligently. Others support `#!/usr/bin/python`, because now in most GNU/Linux distributions `python` is the default program.

What are the benefits of the two variants?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T13:37:35.143

**[Debian Python 政策](http://www.debian.org/doc/packaging-manuals/python-policy/ch-python.html#s-interpreter)**规定：

> Python 解释器的首选规范是`/usr/bin/python`或`/usr/bin/pythonX.Y`。这可确保使用 Debian 安装的 python 并满足对其他 python 模块的所有依赖项。
> 
> 维护者不应使用`/usr/bin/env python`或覆盖 Debian Python 解释器`/usr/bin/env pythonX.Y`。这是不可取的，因为它绕过了 Debian 的依赖项检查，并且使包容易受到不完整的本地 python 安装的影响。

请注意，Debian/Ubuntu 使用替代系统来管理`/usr/bin/python`实际指向的版本。至少对我来说，这在很多 python 版本中运行得非常好（我现在一直在使用从 2.3 到 2.7 的 python），并且在更新之间具有出色的过渡。

请注意，**我从未使用过`pip`**. 我想要自动安全升级，所以我通过`aptitude`. 使用官方的 Debian/Ubuntu 软件包让我的系统比我自己安装 python更*干净。*

* * *

让我强调一件事。以上推荐是针对python应用的*系统*安装。让这些使用*系统*管理的 python 版本非常有意义。如果您实际上是在玩自己的、*不受*操作系统管理的自定义 python 安装，那么使用`env`变体可能*是*说“使用用户首选的 python”的正确方式，而不是对系统进行硬编码python 安装（可能是`/usr/bin/python`）或任何用户自定义路径。

## 如果您从例如 python virtualenv 调用它们，使用`env python`将导致您的程序表现不同。

这**可能是需要**的（例如，您正在编写一个*仅*在您的 virtualenv 中工作的脚本）。而且它**可能是有问题**的（您为自己编写了一个工具，并期望它即使在 virtualenv 中也能正常工作——它可能会突然失败，因为它当时缺少包）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-14T13:30:50.180

我的拙见是你应该使用`env`-variant。它是一个 POSIX 组件，因此几乎可以在每个系统中找到，同时`/usr/bin/python`在许多情况下直接指定中断，即[virtualenv](http://www.virtualenv.org/en/latest/)设置。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-14T13:29:37.570

我`#!/usr/bin/env python`在 OS-X 上使用的默认安装位置是*NOT* `/usr/bin`。这也适用于喜欢自定义环境的用户——`/usr/local/bin`这是另一个常见的地方，您可能会在其中找到 python 发行版。

这么说，其实也无所谓。您始终可以使用所需的任何 python 版本来测试脚本： `/usr/bin/strange/path/python myscript.py`. 此外，当您通过 setuptools 安装脚本时，shebang 似乎被替换为`sys.executable`安装该脚本的那个 - 我不知道`pip`，但我认为它的行为类似。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T13:31:26.100

正如您所注意到的，它们可能都在 linux 上工作。但是，如果有人安装了更新版本的 python 供自己使用，或者某些要求使人们在 /usr/bin 中保留特定版本，则 env 允许调用者设置他们的环境，以便通过调用不同的版本环境。

想象一下有人试图查看 python 3 是否适用于脚本。他们将首先在其路径中添加 python3 解释器，但希望在 2.x 上运行的系统上保留默认值。使用不可能的硬编码路径。

# jquery - Toggle more/less in a list using jquery

> ID：13879573
> 
> 赞同：0
> 
> 时间：2012-12-14T13:27:12.940
> 
> 标签：jquery, list, truncate

Need somebody to run an eye over this please. Sometimes it works on jsfiddle, sometimes it doesn't! Any improvements welcome.

[http://jsfiddle.net/hotdiggity/JBqB3/8/](http://jsfiddle.net/hotdiggity/JBqB3/8/)

```
<ul id="list">
 <li><a title="title" href="#">Lorem ipsum dolor sit amet</a>
 </li>
 <li>
  <a title="title" href="#">Consectetur adipiscing elit
  </a>
 </li>
 <li >
  <a title="title" href="#">Ipsum dolor sit amet</a>
 </li>
 <li>
  <a title="title" href="#">Lorem ipsum dolor sit amet</a>
 </li>
 <li>
  <a title="title" href="#">Ipsum dolor sit amet</a>
 </li>
</ul>​ 
```

Here's the jQuery bit:

```
var more = $('<li><a class="more" href="">Show more</a></li>');
var less = $('<li><a class="less" href="">Show less</a></li>');

$('ul#list').children('li:gt(2)').hide();
$('ul#list').append(more);

$('.more').click(function(){
     $(this).parent().hide().siblings('li').show();
     $('ul#list').append(less);
    return false;
});

$('.less').click(function(){
     $('ul#list').children('li:gt(2)').hide();
     $('ul#list').append(more); 
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:47:43.467

检查这个： http: [//jsfiddle.net/JBqB3/17/](http://jsfiddle.net/JBqB3/17/) 解决你的问题的另一种方法。我不是 100% 确定这是否是您要查找的内容，因为我从列表中提取了按钮（我认为让它不是 li 元素本身的更好方法。您当然也可以使用可点击的而不是那个标准按钮。html

```
<ul id="list">
 <li><a title="title" href="#">Lorem ipsum dolor sit amet</a>
 </li>
 <li>
  <a title="title" href="#">Consectetur adipiscing elit
  </a>
 </li>
 <li >
   <a title="title" href="#">Ipsum dolor sit amet</a>
 </li>
 <li>
  <a title="title" href="#">Lorem ipsum dolor sit amet</a>
 </li>
 <li>
  <a title="title" href="#">Ipsum dolor sit amet</a>
 </li>
</ul>
<button class="btn_more">show more</button>
<button class="btn_less">show less</button> 
```

​ CSS

```
.btn_less{
    display:none;
}​ 
```

JS

```
$(document).ready(function(){
    $('ul#list').children('li:gt(2)').hide();
    $('.btn_more').click(function(){
        $('ul#list').children().show();
        $('.btn_more').hide();
        $('.btn_less').show();
    });
    $('.btn_less').click(function(){
        $('ul#list').children('li:gt(2)').hide();
        $('.btn_less').hide();
        $('.btn_more').show();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T22:29:40.723

这似乎有效

```
$(document).ready(function(){
    var more = $('<li class="more"><a href="">Show more</a></li>');
    var less = $('<li class="less" ><a href="">Show less</a></li>');

    $('ul#list').children('li:gt(2)').hide();
    $('ul#list').append(more);

    $('body').on('click','.more',function(e){
        e.preventDefault();
        $(this).remove();    
        $('ul#list').children().show();
        $('ul#list').append(less);
        return false;
    });

    $('body').on('click','.less',function(e){
        e.preventDefault();
        $(this).remove();
        $('ul#list').children('li:gt(2)').hide();
        $('ul#list').append(more);
        return false;
   });
}); 
```

请注意，我更改了删除和隐藏的顺序。

`e.preventDefault();`只是停止作为链接的链接，它不是 100% 必要的，但我还是喜欢将它粘贴在那里，以防 href 中包含 # 以外的内容。有关更多信息，请阅读[http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

# php - 用php中的普通字符替换特殊字符

> ID：13879575
> 
> 赞同：-1
> 
> 时间：2012-12-14T13:27:23.313
> 
> 标签：php, switch-statement

> **可能重复：**
> [如何将特殊字符替换为它们在 PHP 中所基于的字符？](https://stackoverflow.com/questions/1890854/how-to-replace-special-characters-with-the-ones-theyre-based-on-in-php)

这是示例代码：

```
$code="CSC113α";//other codes PHY123β,MAT324δ

    ////return last character of the code
    $lastchar=substr($code, -1);

    // returns rest code without last character..
    $rest = substr($code, 0, -1);  

    //Make standard course_ID with a,ß..
    switch ($lastchar)
    {
    case '&alpha;':{
      $lastchar='A';
      $id=$rest.$lastchar ;
      $full_course_id=$id;
      break;
    }
    case '&beta;':{
      $lastchar='B';
      $id=$rest.$lastchar ;
      $full_course_id=$id;
      break;
    }
    case '&delta;':{
      $lastchar='D';
      $id=$rest.$lastchar ;
      $full_course_id=$id;
      break;
    }
    default:
      $full_course_id=$code;
    } 
```

在这里，我尝试将 α、β、δ 替换为 A、B、D ...此代码不起作用..这里的变量代码值来自另一个带有特殊字符的脚本..这里我想用普通字符替换这些字符。 .我想得到像'CSC113A'这样的最终输出......但是这个开关代码对我不起作用......请帮助我这样做......提前谢谢......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:35:13.957

为什么不简单地使用该功能`str_replace`？我做了一个测试，它对我有用！

```
<?php
$code="CSC113α";
$full_course_id = str_replace(array('α','β', 'δ'), array('A', 'B', 'D'), $code); 
```

# c# - 将带有颜色的字符串保存到 RTF 中？

> ID：13879577
> 
> 赞同：0
> 
> 时间：2012-12-14T13:27:24.987
> 
> 标签：c#, .net, richtextbox, rtf

我有一个方法，它接受一个字符串并将其转换为 rtf。
您还可以设置字体类型、样式和大小。
为此，我正在使用`RichTextBox`.
现在我有这个方法还必须将文本的颜色转换为 rtf 的问题。确实具有该属性
，但颜色似乎不在解析的 rtf 字符串中。 `RichTextBox``.ForeColor`

目前该方法如下所示：

```
private static string ConvertToRtf(string text, 
                                   string fontFamilyName, 
                                   FontStyle fontStyle, 
                                   int fontSize) {
    System.Windows.Forms.RichTextBox richTextBox = 
        new System.Windows.Forms.RichTextBox();

    richTextBox.Font = new Font(new FontFamily(fontFamilyName), 
                                fontSize, 
                                fontStyle, 
                                GraphicsUnit.Point);

        richTextBox.Text = text;
        string result = richTextBox.Rtf;

        return result;
    } 
```

如前所述，我也想转换颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:30:30.430

RichTextBox 有一个功能：[RichTextBox.SaveFile](http://msdn.microsoft.com/en-us/library/aa335487%28v=vs.71%29.aspx)

# c# - 尽管使用了调度程序，但无效的跨线程访问

> ID：13879578
> 
> 赞同：0
> 
> 时间：2012-12-14T13:27:26.830
> 
> 标签：c#, xaml, windows-phone

我已经阅读了我遇到的这个问题，但我似乎无法找到解决方案。有人建议使用调度程序将代码执行推送到 UI 线程。但是，这并不能解决我的问题。我从一个 Asyc 方法中调用此代码，该方法之前由 Guide 对象调用以显示通知。控制 UI 的代码如下：

```
public bool isDisabled
{
    set
    {
        if (value)
        {
            Deployment.Current.Dispatcher.BeginInvoke(() =>
                {
                    color = new SolidColorBrush(Colors.Gray);
                });
            enabled = false;
        }
        else
        {
            Deployment.Current.Dispatcher.BeginInvoke(() =>
                {
                    color = origionalColor;
                });
            enabled = true;
        }
    }
} 
```

它是从

```
 private void nameInputFinished(IAsyncResult ar)
    {
        int? result = Guide.EndShowMessageBox(ar);

        if (result == 0)
        {
             [...]

             JourneyPanels.getPanel(JourneyPanelTypes.integration).isDisabled = false;
        }
    } 
```

不知道为什么我得到了跨线程异常，但我很确定它与异步方法嵌套有关。

任何帮助是极大的赞赏！

编辑：完整的异常堆栈

```
 {System.UnauthorizedAccessException: Invalid cross-thread access.
  at MS.Internal.XcpImports.CheckThread()
  at MS.Internal.XcpImports.SetValue(IManagedPeerBase obj, DependencyProperty property, Boolean b)
  at System.Windows.DependencyObject.SetValue(DependencyProperty property, Boolean b)
  at System.Windows.Controls.TextBox.set_IsReadOnly(Boolean value)
  at PocketRitual.Journey.nameInputFinished(IAsyncResult ar)
  at Microsoft.Xna.Framework.GamerServices.ActionDialogHelper.Complete()
  at Microsoft.Xna.Framework.GamerServices.ActionDialogHelper.GetMessageBoxResult(Object state)
  at System.Threading.QueueUserWorkItemCallback.WaitCallback_Context(Object state)
  at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
  at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
  at System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem()
  at System.Threading.ThreadPoolWorkQueue.Dispatch()
  at System.Threading._ThreadPoolWaitCallback.PerformWaitCallback()} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T13:34:56.690

这是您需要在主 UI 线程上运行的*调用代码，例如*

```
Deployment.Current.Dispatcher.BeginInvoke(() => {
    JourneyPanels.getPanel(JourneyPanelTypes.integration).isDisabled = false;
}); 
```

无需调用`Dispatcher`您的内部属性更改，因为此时您将在 UI 线程上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T13:51:46.223

你没有包含完整的代码，让人们猜测。例如，我非常怀疑 isDisabled （顺便说一句，在 .NET 世界中，我们用大写字母命名属性）只有一个 setter。我还打赌这用于数据绑定，因此设置器有额外的代码来引发 PropertyChanged 事件。最好的猜测是在后台线程而不是 UI 线程上引发了 PropertyChanged 事件。明智的设计最好不要将其隐藏在属性中。当您不在后台线程中时，它会增加不必要的开销。当后台线程执行任何会影响 UI 的操作时，包括更改数据绑定的属性，应通过后台线程的调度程序调用该操作。

# jquery - Jquery克隆并删除div

> ID：13879579
> 
> 赞同：2
> 
> 时间：2012-12-14T13:27:31.647
> 
> 标签：jquery, html, clone

我已经实现了 jquery 克隆和删除。**单击ADD**按钮时，将克隆具有某些表单元素的**DIV A**并将其插入另一个**DIV B**。在**DIV A**中有一个隐藏的表单按钮**REMOVE**。现在我需要在单击添加按钮时仅在克隆中启用删除按钮。IE; 我想始终隐藏**DIV A中的表单元素。**

这是我的代码。

```
<div class="rule" id="rule">                        
            <div class="fm-req">
                <select name="rulefield" id="rulefield">
                    <option value="">select</option>
                </select>
            </div>
            <div class="fm-opt" >
                <input type="button" class='remove' value="-" style="display:none;"/>
            </div>
        </div>                  
    <div class="fm-rulebutton">
        <input type="button" id="addButton "class='add' value="+"/>
    </div>

        <div id='TextBoxesGroup' class="group"> 
```

这里**Div 'rule'**被克隆到**Div 'TextBoxesGroup'**

```
$(document).ready(function() {
    var id = 0;
    $('.add').click(function(){
            id++;
            $('.fm-opt').children('.remove').show();
            var prot = $(document).find(".rule").clone();
            prot.attr("class", 'rule'+id)
            prot.find(".id").attr("value", id);

            $(document).find("div .group").append(prot);
    });        

    $('.remove').live("click", function(){
            $(this).closest("#rule").remove();
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T13:32:06.167

问题是您正在调用`.show()`所有删除按钮。您需要将其限制为仅新的克隆元素。像这样：

```
$('.add').click(function(){
    id++;
    var prot = $(document).find(".rule").clone();
    prot.attr("class", 'rule'+id)
    prot.find(".id").attr("value", id);
    prot.find('input.remove').show();//<-- this is the important part

    $(document).find("div .group").append(prot);
}); 
```

此代码现在将仅调用`.show()`在新克隆元素中找到的删除按钮

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T13:33:32.630

```
$('.add').click(function(){
            id++;
            $('.fm-opt').children('.remove').show();
            var prot = $(document).find(".rule").clone();
            prot.attr("class", 'rule'+id)
            prot.find(".id").attr("value", id);

            $(document).find("div .group").append(prot);
    }); 
```

应更改为，

```
$('.add').click(function(){
            id++;
            var prot = $(document).find(".rule").clone();
            prot.attr("class", 'rule'+id)
            prot.children('.remove').show();
            prot.find(".id").attr("value", id);
            $(document).find("div .group").append(prot);
    }); 
```

您应该只显示那些已克隆的按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T13:31:58.567

克隆时为克隆的元素添加唯一的 Id="" 值。

在 remove 方法中，您可以轻松访问唯一元素并将其删除。

# java - java mysql select函数总是返回0

> ID：13879584
> 
> 赞同：0
> 
> 时间：2012-12-14T13:27:47.823
> 
> 标签：java, mysql, sql, database, select

代码：

```
public int getLastGotKill()
{
    Connection con = null;
    int last_pvp_time = 0;
    try
    {
        con = L2DatabaseFactory.getInstance().getConnection(false);
        PreparedStatement statement;
        statement = con.prepareStatement("select last_got_kill from characters where obj_Id=?");
        statement.setInt(1, getObjectId());

        ResultSet rset = statement.executeQuery();
        while(rset.next())
        {
            last_pvp_time = rset.getInt("last_got_kill");
            _log.info("last pvp time is : " + last_pvp_time);
        }
        rset.close();
        rset = null;
        statement.close();
        statement = null;
    }
    catch(Exception e)
    {
        if(Config.ENABLE_ALL_EXCEPTIONS)
            e.printStackTrace();
    }
    finally
    {
        CloseUtil.close(con);
        con = null;
    }
    return last_pvp_time;
} 
```

因此，当我调用此函数时，它会进入`while loop`内部，`try{}`但是当我尝试打印所选列的值时，它会打印 0，因此它返回 0 ...

`last_got_kill` `column`在字符表中是一种`bigint(20)`类型

我可以看到该列中有一个数字。4294967295 是

但为什么我总是得到 0 回来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T13:30:49.113

你必须得到一个 long 。因为您的数字超出了 int 范围。

`Integer.MAX_VALUE is 2147483647`这肯定小于 4294967295 `Long.MAX_VALUE however is 9223372036854775807`似乎适合您的情况。

```
 long last_pvp_time = rset.getLong("last_got_kill"); 
```

应该管用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:31:20.190

4294967295 太大而无法放入 int。尝试长：`rset.getLong("last_got_kill")`

# visual-studio-2008 - 序号 9641 不能位于 Dll 中

> ID：13879587
> 
> 赞同：0
> 
> 时间：2012-12-14T13:28:07.527
> 
> 标签：visual-studio-2008, mfc

我已经启动了 MFC 应用程序并尝试在调试模式下运行并最终收到消息“序号 9641 无法位于 Dll 中”。

我没有添加任何代码。我使用的是 VS 2008 SP1

请帮助我摆脱这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-14T18:25:40.107

我有一个类似的问题。它会在我的系统机器人中运行，而不是在其他工程师的系统中运行。我所做的更改是“配置属性->常规->在静态库中使用 MFC”和运行时库到 /MT 或 /MTd（C/C++ -> 代码生成 -> 运行时库 -> 多线程调试）。它之所以有效，是因为它只是绕过了原始 dll。它会大大增加 exe 的大小，如果它在 PC 或服务器上运行，它不会介意。

# mysql - 在 sql 查询中分配自定义行值

> ID：13879588
> 
> 赞同：0
> 
> 时间：2012-12-14T13:28:09.017
> 
> 标签：mysql

我有多个表+不同的字段，我尝试做这样的事情：

```
SELECT
   `title` as title,
   `manufacturer`+`model` as content /* I want to achieve this as well */
   `type` = 'auto_table' /* custom variable w/ value auto_table to know from where is this data*/
    FROM `auto`
    WHERE `title` LIKE '%bmw%'
    OR
    `manufacturer` LIKE '%bmw'
    OR
    `other_data` LIKE '%bmw'
UNION
    SELECT
       `title` as title,
       `content` as content
       `type` = 'news_page' /* custom variable w/ value news_page to know from where is this data*/
        FROM `news`
        WHERE `title` LIKE '%bmw%'
        OR
        `content` LIKE '%bmw' 
```

我的意思是我想在动态选择期间添加一行及其值。另一个我想将两个字段组合成一个像`manufacturer`+ `model`as`title`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:34:35.253

`CONCAT (manufacturer, model) as content`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:34:21.707

试试这个：

```
SELECT
   title,
   CONCAT(manufacturer,model) as content
   'auto_table' as type
FROM [...] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T13:37:01.507

很难得到你真正想要的东西。是要一次性插入选择吗？

```
INSERT INTO your_table
SELECT
   `title` as title,
   CONCAT(`manufacturer`,' ', `model`) as content /* I want to achieve this as well */
   `type` = 'auto_table' /* custom variable w/ value auto_table to know from where is this data*/
    FROM `auto`
    WHERE `title` LIKE '%bmw%'
    OR
    `manufacturer` LIKE '%bmw'
    OR
    `other_data` LIKE '%bmw'
UNION
    SELECT
       `title` as title,
       `content` as content
       `type` = 'news_page' /* custom variable w/ value news_page to know from where is this data*/
        FROM `news`
        WHERE `title` LIKE '%bmw%'
        OR
        `content` LIKE '%bmw' 
```

使用 CONCAT 连接值

# c# - 从同一控制器中的另一个方法调用 post 方法

> ID：13879590
> 
> 赞同：0
> 
> 时间：2012-12-14T13:28:24.427
> 
> 标签：c#, asp.net-mvc, rest

这是我想调用的方法：

```
[AcceptVerbs(HttpVerbs.Post)]
    public string MyPostMethod(int i)
    { ... } 
```

我想从同一个控制器中的另一个方法调用它：

```
[AcceptVerbs(HttpVerbs.Get)]
    public string MyOtherMethod(int i)
    { MyPostMethod(i); } 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:30:43.247

您应该将控制器方法视为类方法。（控制器只是一个类）

那你会为上课做吗？如果是，您也可以为控制器执行此操作

无论如何，我会将代码封装在一个私有方法中并在控制器的

方法。

# java - 带有 jboss7 问题的 log4j 配置

> ID：13879600
> 
> 赞同：0
> 
> 时间：2012-12-14T13:28:51.473
> 
> 标签：java, spring, log4j, jboss7.x

爪哇代码

```
 public static synchronized void init(String log4jXMLPath) //throws ServletException
   {
      try
      {
         if (!initialized) // set the global RepositorySelector
         {
            defaultRepository = LogManager.getLoggerRepository();
            RepositorySelector theSelector = new AppRepositorySelector();
            **LogManager.setRepositorySelector(theSelector, guard);**
            initialized = true;
         }
         Hierarchy hierarchy = new Hierarchy(new RootLogger(Level.DEBUG));
         //loadLog4JConfig(servletContext, hierarchy);
         loadLog4JConfig(hierarchy, log4jXMLPath);
         ClassLoader loader = Thread.currentThread().getContextClassLoader();
         repositories.put(loader, hierarchy);
      }
      catch (Exception e)
      {

         e.printStackTrace();
      }
   } 
```

**LogManager.setRepositorySelector(theSelector, guard);** java代码中的这一行抛出错误

堆栈跟踪

```
18:17:11,189 ERROR [stderr] (MSC service thread 1-2) java.lang.IllegalArgumentException: Attempted to reset the LoggerFactory without possessing the guard.
18:17:11,190 ERROR [stderr] (MSC service thread 1-2)   at org.apache.log4j.LogManager.setRepositorySelector(LogManager.java:164)
18:17:11,191 ERROR [stderr] (MSC service thread 1-2)   at com.mportal.logger.api.AppRepositorySelector.init(AppRepositorySelector.java:73)
18:17:11,192 ERROR [stderr] (MSC service thread 1-2)   at com.mportal.logger.api.MPLoggerImpl.loadLogInstance(MPLoggerImpl.java:64)
18:17:11,192 ERROR [stderr] (MSC service thread 1-2)   at com.mportal.logger.api.MPLoggerImpl.<init>(MPLoggerImpl.java:38)
18:17:11,192 ERROR [stderr] (MSC service thread 1-2)   at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
18:17:11,193 ERROR [stderr] (MSC service thread 1-2)   at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
18:17:11,194 ERROR [stderr] (MSC service thread 1-2)   at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
18:17:11,194 ERROR [stderr] (MSC service thread 1-2)   at java.lang.reflect.Constructor.newInstance(Constructor.java:513) 
```

这个怎么解决？请给出解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:47:08.800

```
LogManager.setRepositorySelector(theSelector, guard); 
```

您只能使用一个守卫，使用不同的守卫对象会导致观察者错误：

```
java.lang.IllegalArgumentException: Attempted to reset the LoggerFactory without possessing the guard. 
```

应该可以`null`作为参数传递给函数。或者简单地持有对初始设置守卫的引用。

该文档指出：

*最初守卫是空的。如果守卫为空，则调用此方法会设置记录器工厂和守卫。以下调用将抛出 IllegalArgumentException，除非先前设置的保护作为第二个参数传递。*

# jsf-2 - JSF - ViewScope - 它只适用于 AJAX 调用？

> ID：13879602
> 
> 赞同：1
> 
> 时间：2012-12-14T13:29:00.240
> 
> 标签：jsf-2, view-scope

我正在使用 JSF 2.1 和 PrimeFaces 3.5，我对 ViewScope 范围有一些疑问。

当我使用相同的页面时，这个范围应该可以工作，对吧？但是，每次我刷新页面时，容器都会创建另一个我的 ManagedBean 实例，我会丢失所有数据。为什么？顺便说一句，如果我使用 Ajax，它就可以工作。我对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:26:22.150

只要您发布到同一页面，viewscoped bean 将是相同的。AJAX 与否。

浏览器中的刷新作为新页面处理。

# c++ - C++中的递归分解

> ID：13879603
> 
> 赞同：0
> 
> 时间：2012-12-14T13:29:04.190
> 
> 标签：c++

我正在尝试学习递归。分解练习以绘制递归树时遇到问题 - 在基本案例下方的代码中包括函数 window.drawPolarLine(branchbase, length, angle)，它返回刚刚绘制的分支末端的 GPoint（x 和 y）。任何递归解决方案都必须跟踪大量 GPoint。我不知道这是否应该发生在堆栈帧中，或者我是否应该使用向量来存储它们。使用向量似乎正在走向迭代解决方案的道路？

无论如何，到目前为止，这是我非常混乱的代码；

```
/**
 * File: trees.cpp
 * ---------------
 * Draws a recursive tree as specified in the Assignment 3 handout.
 */

#include <string>    // for string
#include <iostream>  // for cout, endl
using namespace std;

#include "console.h" // required of all CS106 C++ programs
#include "gwindow.h" // for GWindow class and its setTitle, setColor, and drawPolarLine methods
#include "gtypes.h"  // for GPoint class
#include "random.h"  // for randomChance function

const static double kWindowWidth = 600;
const static double kWindowHeight = 600;
const static string kWindowTitle = "Recursive Trees";
const static double kTrunkLength  = kWindowHeight/4;
const static double kShrinkFactor = 0.70;
const static int kBranchAngleSeparation = 15;
const static int kTrunkStartAngle = 90;
const static string kLeafColor = "#2e8b57";
const static string kTrunkColor = "#8b7765";
const static double kBranchProbability = 1.0;

static GPoint drawTree(GWindow& window, int order, GPoint branchBase, double length, int angle, Vector<GPoint>& branches);

const static int kHighestOrder = 5;
int main() {
    GWindow window(kWindowWidth, kWindowHeight);
    window.setWindowTitle(kWindowTitle);
    cout << "Repeatedly click the mouse in the graphics window to draw " << endl;
    cout << "recursive trees of higher and higher order." << endl;
    GPoint trunkBase(window.getWidth()/2, window.getHeight());
    Vector<GPoint> branches;
    for (int order = 0; order <= kHighestOrder; order++) {
        waitForClick();
        window.clear();
        drawTree(window, order, trunkBase, kTrunkLength, kTrunkStartAngle, branches);
    }

    cout << endl;
    cout << "All trees through order " << kHighestOrder << " have been drawn." << endl;
    cout << "Click the mouse anywhere in the graphics window to quit." << endl;
    waitForClick();
    return 0;
}

static GPoint drawTree(GWindow& window, int order, GPoint branchbase, double length, int angle, Vector<GPoint>& branches) {
    if (order == 0) {

        GPoint base = window.drawPolarLine(branchbase, length, angle);
        branches.add(base);
        return branchbase;
    }

        window.setColor(order < 2 ? kLeafColor : kTrunkColor);

        branchbase = branches.get(order - 1);
        drawTree(window, order - 1, branchbase, length * kShrinkFactor, angle - 45, branches);
        drawTree(window, order - 1, branchbase, length * kShrinkFactor, angle - 30, branches);
        drawTree(window, order - 1, branchbase, length * kShrinkFactor, angle - 15, branches);
        drawTree(window, order - 1, branchbase, length * kShrinkFactor, angle, branches);
        drawTree(window, order - 1, branchbase, length * kShrinkFactor, angle + 15, branches);
        drawTree(window, order - 1, branchbase, length * kShrinkFactor, angle + 30, branches);
        drawTree(window, order - 1, branchbase, length * kShrinkFactor, angle + 45, branches);

        return drawTree(window, order - 1, branchbase, length * kShrinkFactor, angle, branches);
    }
    // update this function to wrap around another version of drawTree, which
    // recursively draws the tree of the specified order.... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:42:05.697

这个问题需要与经典递归示例（如排序）略有不同的方法，其中问题集在每次递归时都会减少，并且存在自然限制（问题大小 <= 1）。

有了这个问题，信息量随着树的顺序呈指数增长。这使得通过首先绘制二阶树并让函数返回给您这些分支结束的位置（以及角度）来绘制三阶树是不切实际的，因此您可以将三阶分支添加到它。

对于这类问题，编写这样的递归函数要容易得多：

```
void drawTreeOrder(GWindow& window, int curr_order, int max_order, GPoint branchBase, double length, int angle)
{
    /* Check if there is more work to do */
    if (curr_order >= max_order)
    {
        return;
    }

    /* Draw a branch */
    window.setColor(curr_order - max_order < 2 ? kLeafColor : kTrunkColor);
    GPoint end = window.drawPolarLine(branchBase, length, angle);

    /* Draw the higher-order branches starting from the current one */
    drawTreeOrder(window, order + 1, max_order, end, length * kShrinkFactor, angle - 45, branches);
    drawTreeOrder(window, order + 1, max_order, end, length * kShrinkFactor, angle - 30, branches);
    drawTreeOrder(window, order + 1, max_order, end, length * kShrinkFactor, angle - 15, branches);
    drawTreeOrder(window, order + 1, max_order, end, length * kShrinkFactor, angle, branches);
    drawTreeOrder(window, order + 1, max_order, end, length * kShrinkFactor, angle + 15, branches);
    drawTreeOrder(window, order + 1, max_order, end, length * kShrinkFactor, angle + 30, branches);
    drawTreeOrder(window, order + 1, max_order, end, length * kShrinkFactor, angle + 45, branches);
}

/* Convenience function, so the caller does not have to bother with curr_order */
void drawTree(GWindow& window, int max_order, GPoint branchbase, double length, int angle)
{
    drawTreeOrder(window, 0, max_order, branchBase, length, angle);
} 
```

# forms - symfony2 - 日期选择输入呈现时间戳而不是月份名称

> ID：13879604
> 
> 赞同：0
> 
> 时间：2012-12-14T13:29:05.813
> 
> 标签：forms, date, symfony

我最近遇到了一个问题，我的 Symfony2 应用程序呈现带有无效日期选择输入的表单。具体来说，它使用内部数字而不是月份名称呈现“月份”选择。

表单类型的定义如下：

```
$builder
        ->add('title')
        ->add('shortcut')
        ->add('description')
        ->add('category')
        ->add('release_date', 'date', array(
            'input' => 'datetime',
            'widget' => 'choice'
        )); 
```

然后，此定义（通过在 Twig 中使用 form_widget）为月份选择呈现以下内容：

```
<select id="nucleo_gamesbundle_gametype_release_date_month" name="nucleo_gamesbundle_gametype[release_date][month]" required="required">
  <option value="1">1326585600</option>
  <option value="2">1329264000</option>
  <option value="3">1331769600</option>
  <option value="4">1334448000</option>
  <option value="5">1337040000</option>
  <option value="6">1339718400</option>
  <option value="7">1342310400</option>
  <option value="8">1344988800</option>
  <option value="9">1347667200</option>
  <option value="10">1350259200</option>
  <option value="11">1352937600</option>
  <option value="12">1355529600</option>
</select> 
```

有谁知道，如何强制 Symfony 将选项文本呈现为月份名称（例如一月、二月等）？非常感谢你。

**编辑：** 树枝模板（表单部分）如下所示：

```
<form action="{{ path('game_admin_update', {'id' : entity.id}) }}" method="post" class="form" {{ form_enctype(edit_form) }}>
  <fieldset>
    <div class="widget">
        <div class="title"><img src="{{ asset('admin/images/icons/dark/list.png') }}" alt="" class="titleIcon" /><h6>Základní informace</h6></div>
        <div class="formRow">
            {{ form_label(edit_form.title, 'form.game.title'|trans({},'admin')) }}
            <div class="formRight">{{ form_widget(edit_form.title) }}</div>
            <div class="clear"></div>
        </div>
        <div class="formRow">
            {{ form_label(edit_form.shortcut, 'form.game.shortcut'|trans({},'admin')) }}
            <div class="formRight">{{ form_widget(edit_form.shortcut) }}</div>
            <div class="clear"></div>
        </div>
        <div class="formRow">
            {{ form_label(edit_form.description, 'form.game.description'|trans({},'admin')) }}
            <div class="formRight">{{ form_widget(edit_form.description, { 'attr': {'class': 'richEditor'} }) }}</div>
            <div class="clear"></div>
        </div>
        <div class="formRow">
            {{ form_label(edit_form.release_date, 'form.game.release_date'|trans({},'admin')) }}
            <div class="formRight">{{ form_widget(edit_form.release_date) }}</div>
            <div class="clear"></div>
        </div>
        {{ form_rest(edit_form) }}
        <div class="formSubmit"><input type="submit" value="{{ 'form.game.submit.edit'|trans({},'admin') }}" class="greenB" /></div>
        <div class="clear"></div>
    </div>
</fieldset> 
```

所以没什么特别的

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T20:53:37.797

当然，您可以提供格式选项将日期时间转换为您选择的格式：

```
$builder
    ->add('title')
    ->add('shortcut')
    ->add('description')
    ->add('category')
    ->add('release_date', 'date', array(
        'input' => 'datetime',
        'widget' => 'choice',
        'format' => 'yMMMMd',
    )); 
```

这将为年份打印一个选择框，例如`2012`，一个用于具有长月份名称的月份，一个用于日期，例如`21`。在[这里](http://userguide.icu-project.org/formatparse/datetime#TOC-Date-Time-Format-Syntax)查看更多格式。

# z3 - Z3 模式和内射性

> ID：13879605
> 
> 赞同：3
> 
> 时间：2012-12-14T13:29:21.867
> 
> 标签：z3, smt

在 Z3 教程的第 13.2.3 节中，有一个很好的例子，说明如何在处理内射性公理化时减少必须实例化的模式数量。在示例中，必须声明为单射的函数 f 将 A 类型的对象作为输入并返回 B 类型的对象。据我了解，A 和 B 是分离的。

我有一个 Z3 似乎没有终止的 SMT 问题 (FOL+EUF)，我正在尝试找出原因。我有一个函数 f:A->A 我断言它是单射的。问题可能是 f 的域和共域重合吗？

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T05:56:41.273

Z3 不会终止，因为它一直在尝试为问题构建解释。对于 Z3 来说，包含单射性公理的可满足问题通常是困难的。它们通常属于 Z3 无法决定的一类问题[Z3 指南](http://rise4fun.com/Z3/tutorial/guide)描述了 Z3 可以决定的大多数类。此外，Z3 可以为整数和实数等无限域生成模型。然而，在大多数情况下，Z3 产生的函数具有*有限*范围。例如，`forall x, y: x <= y implies f(x) <= f(y)`可以通过分配`f`给具有有限范围的函数来满足量词。更多信息可以在[这篇文章中找到](http://research.microsoft.com/en-us/um/people/leonardo/files/ci.pdf). 不幸的是，注入性通常需要一个与域一样“大”的范围。此外，编写只有无限宇宙才能满足的公理非常容易。例如，公式

```
(assert
   (forall ((d1 Value)(d2 Value)(d3 Value)(d4 Value))
      (! (=>
         (and (= (ENC d1 d2) (ENC d3 d4)))
         (and (= d1 d3) (= d2 d4))
      )
      :pattern ((ENC d1 d2) (ENC d3 d4)))
   )
) 
```

只有当宇宙`Value`只有一个元素或无限时才能满足。另一个问题是将函数的内射性公理`f`与形式公理结合起来`forall x: f(x) != a`。如果`f`是一个从`A`到的函数`A`，那么这个公式只有在`A`宇宙无限大的情况下才能满足。

话虽如此，我们可以通过减少 Z3 模型查找器用于量化公式的“资源”数量来防止不终止。选项

```
(set-option :auto-config false)
(set-option :mbqi-max-iterations 10) 
```

如果我们使用这些选项，Z3 将在您的示例中终止，但会返回`unknown`. 它还返回一个“候选”模型。它不是真正的模型，因为它不满足问题中的所有通用量词。选项

```
(set-option :mbqi-trace true) 
```

将指示 Z3 显示未满足的量词。

关于 13.2.3 节中的示例，函数可以使用相同的输入和返回类型。使用本节中描述的技巧只会帮助无法满足的情况。如果您使用此技巧重新编码内射性公理，Z3 也不会终止（对于可满足的公式）。

请注意，您引用的教程非常古老，并且包含过时的信息。

# iphone - ios中整数值的正则表达式 - 接受多个符号？

> ID：13879607
> 
> 赞同：0
> 
> 时间：2012-12-14T13:29:27.093
> 
> 标签：iphone, ios, regex

```
NSRegularExpression* regExp = [[NSRegularExpression alloc]
   initWithPattern:@"^[-+s]*[0-9s]+$"` options:NSRegularExpressionCaseInsensitive
    error:nil]; 
```

我用了上面的表达。但它接受`+`and`-`值。但问题是，它在整数前接受多个符号。

```
 1)+++++12
  2)--++12 
```

这些案件也被接受。

可以使用什么，它应该只接受整数前的一个符号？提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T13:32:08.410

我想你正在寻找`@"^[-+]?[0-9]+$"`.

* * *

***更新***

我认为您正在使用 's' 来匹配空格。那不管用。

`@"^\\s*[-+]?\\s*[0-9]+\\s*$"`将匹配加号/减号之前、加号/减号和数字之间以及数字之后的空格。

* * *

***注意***：a`?`匹配前面的组中的 0 个或 1 个，在本例中为 [-+]。

* * *

***更新***：感谢@ValeriyVan 建议解决一个关键问题是我的空白代码。我不知道为什么社区拒绝了您的编辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T13:38:24.243

以下代码用于检查整数值。

```
- (BOOL) validateIntegerValue: (NSString *) candidate {
    NSString *Regex = @"^[+-]{0,1}[0-9]+$";
    NSPredicate *intTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", Regex];
    return [intTest evaluateWithObject:candidate];
} 
```

# x86 - 8 个压缩的 32 位浮点数的水平总和

> ID：13879609
> 
> 赞同：3
> 
> 时间：2012-12-14T13:29:47.437
> 
> 标签：x86, sse, simd, avx

如果我有 8 个压缩的 32 位浮点数 ( `__m256`)，那么提取所有 8 个元素的水平总和的最快方法是什么？同理，如何获得水平最大值和最小值？换句话说，以下 C++ 函数的最佳实现是什么？

```
float sum(__m256 x);  ///< returns sum of all 8 elements
float max(__m256 x);  ///< returns the maximum of all 8 elements
float min(__m256 x);  ///< returns the minimum of all 8 elements 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T21:28:52.177

Quickly jotted down here (and hence untested):

```
float sum(__m256 x) {
    __m128 hi = _mm256_extractf128_ps(x, 1);
    __m128 lo = _mm256_extractf128_ps(x, 0);
    lo = _mm_add_ps(hi, lo);
    hi = _mm_movehl_ps(hi, lo);
    lo = _mm_add_ps(hi, lo);
    hi = _mm_shuffle_ps(lo, lo, 1);
    lo = _mm_add_ss(hi, lo);
    return _mm_cvtss_f32(lo);
} 
```

For min/max, replace `_mm_add_ps` and `_mm_add_ss` with `_mm_max_*` or `_mm_min_*`.

Note that this is a lot of work for a few operations; AVX isn't really intended to do horizontal operations efficiently. If you can batch up this work for multiple vectors, then more efficient solutions are possible.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-04T14:33:37.747

虽然斯蒂芬佳能的答案可能是找到水平最大值/最小值的理想选择，但我认为可以为水平总和找到更好的解决方案。

```
float horizontal_add (__m256 a) {
    __m256 t1 = _mm256_hadd_ps(a,a);
    __m256 t2 = _mm256_hadd_ps(t1,t1);
    __m128 t3 = _mm256_extractf128_ps(t2,1);
    __m128 t4 = _mm_add_ss(_mm256_castps256_ps128(t2),t3);
    return _mm_cvtss_f32(t4);        
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-11-09T19:08:18.677

我尝试编写避免混合 avx 和非 avx 指令的代码，并且包含浮点数的 avx 寄存器的水平总和可以通过*avx-only*完成

*   1x `vperm2f128`,
*   2x`vshufps`和
*   3倍`vaddps`，

产生一个寄存器，其中所有条目都包含原始寄存器中所有元素的总和。

```
// permute
//  4, 5, 6, 7, 0, 1, 2, 3
// add
//  0+4, 1+5, 2+6, 3+7, 4+0, 5+1, 6+2, 7+3
// shuffle
//  1+5, 0+4, 3+7, 2+6, 5+1, 4+0, 7+3, 6+2
// add
//  1+5+0+4, 0+4+1+5, 3+7+2+6, 2+6+3+7, 
//  5+1+4+0, 4+0+5+1, 7+3+6+2, 6+2+7+3
// shuffle
//  3+7+2+6, 2+6+3+7, 1+5+0+4, 0+4+1+5, 
//  7+3+6+2, 6+2+7+3, 5+1+4+0, 4+0+5+1
// add
//  3+7+2+6+1+5+0+4, 2+6+3+7+0+4+1+5, 1+5+0+4+3+7+2+6, 0+4+1+5+2+6+3+7,
//  7+3+6+2+5+1+4+0, 6+2+7+3+4+0+5+1, 5+1+4+0+7+3+6+2, 4+0+5+1+6+2+7+3

static inline __m256 hsums(__m256 const& v)
{
    auto x = _mm256_permute2f128_ps(v, v, 1);
    auto y = _mm256_add_ps(v, x);
    x = _mm256_shuffle_ps(y, y, _MM_SHUFFLE(2, 3, 0, 1));
    x = _mm256_add_ps(x, y);
    y = _mm256_shuffle_ps(x, x, _MM_SHUFFLE(1, 0, 3, 2));
    return _mm256_add_ps(x, y);
} 
```

`_mm256_castps256_ps128`然后使用and很容易获得该值`_mm_cvtss_f32`：

```
static inline float hadd(__m256 const& v)
{
    return _mm_cvtss_f32(_mm256_castps256_ps128(hsums(v)));
} 
```

我对其他解决方案进行了一些基本的基准测试`__rdtscp`，但没有发现在我的英特尔 i5-2500k 上的平均 CPU 周期数方面更胜一筹。

查看我发现的[Agner 指令表](http://www.agner.org/optimize/instruction_tables.pdf)（对于 Sandy-Bridge 处理器）：

```
 µops    lat.    1/tp    count

this:

vperm2f128      1       2       1       1
vaddps          1       3       1       3
vshufps         1       1       1       2

sum             6       13      6       6

Z boson:

vhaddps         3       5       2       2
vextractf128    1       2       1       1
addss           1       3       1       1

sum             8       15      6       4

Stephen Canon:

vextractf128    1       2       1       1
addps           1       3       1       2
movhlps         1       1       1       1
shufps          1       1       1       1
addss           1       3       1       1

sum             8       13      6       6 
```

对我来说（由于值非常相似）没有一个*明显*优于（因为我无法预见指令数、微操作数、延迟或吞吐量是否最重要）。 *编辑，注意：我认为以下存在的潜在问题不正确。* 我怀疑，如果在 ymm 寄存器中得到结果就足够了，my`hsums`可能很有用，因为它不需要`vzeroupper`防止状态切换惩罚，因此可以使用不同的寄存器与其他 avx 计算同时交错/执行，而无需引入某种序列点。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-06-03T19:27:30.633

```
union ymm {
    __m256 m256;
    struct {
        __m128 m128lo;
        __m128 m128hi;
    };
};

union ymm result = {1,2,3,4,5,6,7,8};
__m256 a = {9,10,11,12,13,14,15,16};

result.m256 = _mm256_add_ps (result.m256, a);
result.m128lo = _mm_hadd_ps (result.m128lo, result.m128hi);
result.m128lo = _mm_hadd_ps (result.m128lo, result.m128hi);
result.m128lo = _mm_hadd_ps (result.m128lo, result.m128hi); 
```

# node.js - 使用 ascii 编码读取文件

> ID：13879617
> 
> 赞同：4
> 
> 时间：2012-12-14T13:30:01.687
> 
> 标签：node.js

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T18:48:38.203

The quick answer is that Node doesn't do any magic when converting from a Buffer to a string, whether it is `ascii` or `utf8`. Your `utf8` string is totally invalid `ascii`, so I guess ideally it would throw an error, but obviously it doesn't. I would not expect the `è\u0081µ` since that is invalid `ascii`.

You can see [in the Node source](https://github.com/joyent/node/blob/master/src/node_buffer.cc#L249), the code for converting from a buffer to a string are the `...slice` functions. The `ascii` and `utf8` functions are identical, leading to the behavior you are seeing. These constructors don't do anything fancy, they just take a sequence of bytes and convert it into a JS string, assuming that it is valid in that encoding.

The differences between the two encodings come from the AsciiWrite and Utf8Write functions in that file, which treat things differently.

For example:

```
new Buffer("聵", 'ascii') // <Buffer 75>
new Buffer("聵", 'utf8')  // <Buffer e8 81 b5> 
```

As you saw from your tests, `binary` fits better with what you are looking for. `binary` goes through each individual byte in a buffer and returns a string where each code point has that byte value.

```
(new Buffer([0xe8, 0x81, 0xb5])).toString('binary').charCodeAt(0); // 0xe8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T13:37:26.800

It's a bug:

[https://github.com/joyent/node/pull/4379](https://github.com/joyent/node/pull/4379)

paddddiinnnnngggg

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-14T13:39:29.100

Without knowing exactly what language that is, I am guessing Japanese (correct me if I am wrong). But I believe it is purely coincidental that the characters you supplied happen to fall in the ascii standard, [Japanese character encodings](http://en.wikipedia.org/wiki/Japanese_language_and_computers#Character_encodings)

> However, Shift JIS has the unfortunate property that it often breaks any parser (software that reads the coded text) that is not specifically designed to handle it. For example, a text search method can get false hits if it is not designed for Shift JIS. EUC, on the other hand, is handled much better by parsers that have been written for 7-bit ASCII (and thus EUC encodings are used on UNIX, where much of the file-handling code was historically only written for English encodings). But EUC is not backwards compatible with JIS X 0201, the first main Japanese encoding. Further complications arise because the original Internet e-mail standards only support 7-bit transfer protocols. Thus JIS encoding was developed for sending and receiving e-mails.
> 
> In character set standards such as JIS, not all required characters are included, so gaiji (外字 "external characters") are sometimes used to supplement the character set. Gaiji may come in the form of external font packs, where normal characters have been replaced with new characters, or the new characters have been added to unused character positions. However, gaiji are not practical in Internet environments since the font set must be transferred with text to use the gaiji. As a result, such characters are written with similar or simpler characters in place, or the text may need to be written using a larger character set (such as Unicode) that supports the required character.

I would try with some more "exotic" characters, as your test will fail.

# c++ - 布尔变量。检查的逻辑

> ID：13879624
> 
> 赞同：1
> 
> 时间：2012-12-14T13:30:47.247
> 
> 标签：c++, boolean-logic

所以我有一个关于`bool`变量的问题。

这是一个检查是否按时支付到期款项的程序，如果未按时支付，则乘以 1.10。

```
#include <iostream>
using namespace std;
int main()
{
    float Dues;
    cout<<"Enter ammount: \n";
    cin>>Dues;
    cout<<"On time? (y/n)";
    char yn;
    cin>>yn;
    bool Overdue = yn !="y"; //TRUE (1) if it is late, FALSE (0) if it is on time
    float AmountDue;
    AmountDue = Overdue ? Dues*1.10 : Dues;
    cout<<"Ammount due: ";
    cout<<<<AmountDue;
    return 0;

} 
```

我不明白布尔的逻辑

我们有

`bool Overdue = yn !="y";`

现在这是***我对***布尔逻辑的理解，这是***不对的***

如果输入“n”=> N 不是 Y，这是正确的，因此 bool 为真 => 1

如果输入“y”=> Y 不是 Y，这是错误的，因此 fasle => 0

但实际上恰恰相反，我无法从逻辑上对自己进行解释。基于什么逻辑`bool Overdue = yn !="y";`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T13:33:39.370

出现意外行为的原因是您将 a`char`与字符串文字进行比较`"y"`。字符串文字的类型`const char[n]`是`n`文字的长度，包括终止 NUL 字符。

与字符文字进行比较：

`yn != 'y'`

当你这样说:`yn != "y"`时，char 被提升为，`int`字符串文字衰减为`const char*`。标准未指定这应该如何表现。

表达式的结果存储在`bool Overdue`. 当`yn`hold`'n'`时，表达式是`true`（'n' 确实不同于 'y'）所以`true`将被存储，反之亦然）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T13:47:30.097

除了 jrok 的回答之外，您遇到的问题是您*假设*小写和大写字符是同一回事。他们*不是*。'y' 和 'Y' 是两个不同的字符。'n' 和 'N' 也一样。

你写：

> 如果输入“n”=> N 不是 Y，这是正确的，因此 bool 为真 => 1

不，“n”不是“y”。

> 如果输入“y”=> Y 不是 Y，这是错误的，因此 fasle => 0

这是正确的。“y”不是“Y”。

试试这个：

```
bool Overdue = (yn != 'n') && (yn != 'N'); 
```

# php - ReflectionException“无法访问非公共成员”，但可以访问属性？

> ID：13879626
> 
> 赞同：5
> 
> 时间：2012-12-14T13:30:48.830
> 
> 标签：php, reflection

我正在以这种方式更改反射类的可访问标志：

```
protected function getBaseSubscriptionPeriodReflection()
{
    $reflection = new \ReflectionClass('Me\Project\Class');

    // Make all private and protected properties accessible
    $this->changeAccessibility($reflection, true);

    return $reflection;
}

protected function changeAccessibility(\ReflectionClass $reflection, $accessible)
{
    $properties = $reflection->getProperties(\ReflectionProperty::IS_PRIVATE
        | \ReflectionProperty::IS_PROTECTED);

    foreach($properties as $property) {
        $property->setAccessible($accessible);
    }
} 
```

但是当我尝试设置`firstDate`属性值时，我得到了异常：

> ReflectionException : 无法访问非公共成员 Me\Project\Class::firstDate。

这是异常的来源（`setValue()`方法）：

```
$reflection = $this->getBaseSubscriptionPeriodReflection();
$this->getSubscriptionPeriod($reflection)

protected function getSubscriptionPeriod(\ReflectionClass $reflection)
{
    $period = $reflection->newInstance();

    // Reflection exception here
    $reflection->getProperty('firstDate')->setValue($period, 'foo');

    return $period;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-14T13:43:46.287

好的，找到问题了。似乎`getProperty`每次调用它都会返回一个新实例。所以忘记了`changeAccessibility`方法，你应该这样做：

```
protected function getSubscriptionPeriod(\ReflectionClass $reflection)
{
    $period = $reflection->newInstance();

    $firstDateProperty = $reflection->getProperty('firstDate');
    $firstDateProperty->setAccessible(true);
    $firstDateProperty->setValue($period, 'foo');

    return $period;
} 
```

# python - Facebook/Python：获取一个没有“查看更多”按钮的页面，其中包含我所有的朋友

> ID：13879629
> 
> 赞同：-1
> 
> 时间：2012-12-14T13:31:07.617
> 
> 标签：python, facebook

我想见我或我朋友的朋友。我只得到一个显示大约 20 个的页面，当我到达底部时它会进一步加载。问题是我想通过 Python 获取这个 HTML，所以我需要一个包含完整朋友列表的页面，没有“查看更多”功能。那可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:51:16.103

考虑使用 Facebook API 而不是通过抓取来执行此操作（您似乎正在尝试这样做）。

我通常会尽可能避免解析 HTML。

请参阅此处的文档：[https ://developers.facebook.com/docs/reference/api/user/#friends](https://developers.facebook.com/docs/reference/api/user/#friends)

# javascript - 在模态弹出窗口中打开一个小尺寸的新窗口

> ID：13879631
> 
> 赞同：1
> 
> 时间：2012-12-14T13:31:17.647
> 
> 标签：javascript, modal-dialog, new-window, modal-popup

我正在开发一个社交分享按钮。抬头看[这里](http://experiments.hostzi.com/socialsharebutton/)

如果点击*“SHARE THE GOODNESS”*，则会生成一个模式弹出窗口

如果我单击其中一个社交媒体按钮来共享页面，我会尝试在生成模式弹出窗口后执行此操作，我会在同一页面内而不是在新选项卡中获得一个新的较小窗口。

换句话说，如果我单击另一个按钮蓝色示例*“CLICK HERE”* ，我想实现我在页面中实现的相同。

这是我用于按钮“*点击这里*”的脚本

```
 <script>        
        $('#openfacebookwindow').click(function(ev){
            window.open('http://www.facebook.com/sharer.php?u=http://yourwebsite.com','Title','width=200,height=400');
            ev.preventDefault();
            return false;
        });
    </script> 
```

如果我在模态弹出窗口中应用相同的技术，它不起作用，我的问题是，技术上是否可以在模态弹出窗口中做同样的事情？如果是，我必须如何解决

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-11T22:50:28.177

我看到#Manna 得到了解决方案：

```
 function popitup(url) {
        newwindow=window.open(url,'name','height=400,width=500');
        if (window.focus) {newwindow.focus()}
        return false;
    }

<a href="https://plus.google.com/share?url={URL}" class="google" onclick="return popitup(this.href)">Google +</a> 
```

# time - 如何找到钛的时差

> ID：13879642
> 
> 赞同：3
> 
> 时间：2012-12-14T13:31:59.447
> 
> 标签：time, titanium

我是钛新手。我想找到钛的时差。Ex 12.00 AM- 12.00 PM 应该给我 12 个小时。但我不知道如何在钛中找到它。

我正在努力

```
function calculatetime(chkintime,chkouttime)
{

var difference = chkintime - chkouttime;

Ti.API.info(':'+difference);

var hoursDifference = Math.floor(difference/1000/60/60); 
difference -= hoursDifference*1000*60*60 

var minutesDifference = Math.floor(difference/1000/60); 
difference -= minutesDifference*1000*60 

 Ti.API.info(':'+hoursDifference);
 Ti.API.info(':'+minutesDifference);

 var time=hoursDifference+':'+minutesDifference;

 return time;

} 
```

它有时给出正确答案，而有时给出负值。

这里 chkintime 和 chkouttime 值以毫秒为单位，例如 1355495784321

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T18:31:43.270

这与在 JavaScript 中查找时差没有什么不同。（实际上，它***是***在 JavaScript 中寻找时差。）

[检查Javascript中的时差](https://stackoverflow.com/questions/1787939/check-time-difference-in-javascript)

除此之外，计算 X 和 Y 之间天数的一个好方法是找出 MS 差异，然后将该时间添加到设定的日期，例如 2000 年 1 月 1 日。然后你可以很容易地拉出年数，月、日、小时、分钟和秒。闰年会造成一些不准确，但如果你处理的是小时期，那就没关系了。

```
var start = new Date('February, 22, 2011 2:00 PM');
var end = new Date('February, 22, 2011 4:00 PM');
var ms = end - start;
var niceDate = new Date(new Date('January 1, 2000').getTime() + ms);
var years = niceDate.getFullYear() - 2000;
var months = niceDate.getMonth();
var days = niceDate.getDate();
var hours = niceDate.getHours();
var minutes = niceDate.getMinutes();
var seconds = niceDate.getSeconds();

alert(years + ' years,\n'
    + months + ' months,\n'
    + days + ' days,\n'
    + hours + ' hours,\n'
    + minutes + ' min,\n'
    + seconds + ' sec'); 
```

# javascript - 将长的 javascript 元素代码转换为更小的元素代码

> ID：13879643
> 
> 赞同：0
> 
> 时间：2012-12-14T13:32:03.017
> 
> 标签：javascript

我一直在寻找这个（并自己尝试），但到目前为止还没有成功。

我有以下 onClick 它触发切换功能：

```
function toogle(){
    document.getElementById('id1').style.top = (document.getElementById('id1').style.top != '-130px' ? '-130px' : '0px')} 
```

它可以按我的意愿工作，但我也想让它有点短，我尝试过

```
var smalltag = document.getElementById('id1').style.top;
smalltag  = (smalltag  != '-130px' ? '-130px' : '0px')

or

var smalltag = "document.getElementById('id1').style.top";
smalltag  = (smalltag  != '-130px' ? '-130px' : '0px') 
```

但没有一个工作，我怎样才能让它工作？还想要一个简短的解释，以便我可以更好地理解它（如果可能的话）。

忘了说，我不打算使用任何 javascript 包，我正在尽我所能学习 javascript，使用这样的包将是一个不好的方法（意味着没有 jquery、mootools 等）。

感谢您的关注！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T13:34:19.247

您可以这样做以避免通过其 id 多次获取元素

```
var element = document.getElementById('id1');
element.style.top = (element.style.top != '-130px') ? '-130px' : '0px'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T13:36:39.760

您只是分配给变量，给它一个与您实际要更改`smalltag`的对象无关的新值。`StyleDeclaration`在 JavaScript 中（幸运的是？）没有指针，所以你总是需要分配一个属性：

```
var elstyle = document.getElementById('id1').style;
elstyle.top = elstyle.top != '-130px' ? '-130px' : '0px'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T13:34:18.930

您需要`smalltag`作为对 DOM 元素的引用，因此您需要这样做：

```
var smalltag = document.getElementById('id1');
smalltag.style.top  = (smalltag.style.top  != '-130px' ? '-130px' : '0px') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T13:34:20.870

您必须将实际元素存储在变量中，以便稍后更改其属性。您试图存储字符串而不是修改它，但它不会对实际元素产生影响。

```
var el = document.getElementById('id1');
el.style.top = (el.style.top != '-130px' ? '-130px' : '0px') 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-14T13:34:36.157

```
var smalltag = document.getElementById('id1').style.top;
var small  = (smalltag  != '-130px' ? '-130px' : '0px'); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-14T13:35:40.417

在您说它有效的第一个中， document.getElementById('id1').style.top 正在重置。

但是在第二次尝试中，您没有再次从 smalltag 设置 document.getElementById('id1').style.top

# specifications - APL 语言的开源规范？

> ID：13879647
> 
> 赞同：5
> 
> 时间：2012-12-14T13:32:11.677
> 
> 标签：specifications, apl

Ruby 有[Ruby Spec](http://rubyspec.org/)。

APL 是否有任何可用的东西（开源）？至少是预期输入和输出的列表？还是某种 APL 语言的核心规范？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T16:57:10.413

参见艾弗森的[APL 词典](http://www.jsoftware.com/papers/APLDictionary.htm)。尾注包含许多可能有用的参考资料。此外，jsoftware 站点也有很多与 APL 相关的资源。

# windows-phone-7 - 调用 ScrollToHorizo ntalOffset 或 ScrollToVerticalOffset 时不出现 ScrollViewer 滚动条

> ID：13879657
> 
> 赞同：0
> 
> 时间：2012-12-14T13:32:51.117
> 
> 标签：windows-phone-7, windows-phone-8

在 Windows Phone中，滚动条在调用或调用`ScrollViewer`时不会出现。`ScrollToHorizontalOffset``ScrollToVerticalOffset`

```
ScrollViewer Name="MyScroll" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" Background="{TemplateBinding Background}" 
```

滚动工作正常，但滚动条不出现。

如何使这些滚动条出现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:09:51.077

我认为您需要使用模板才能使其正常工作。看看[Jeff Wilcox 在这里做了](http://www.jeff.wilcox.name/2010/12/betterscrollviewer/)什么。您应该能够使用它或类似的东西来获得您想要的效果。

# asp.net-mvc - 在回发时更改数据后，如何使用新值填充 HTML 内容？

> ID：13879663
> 
> 赞同：0
> 
> 时间：2012-12-14T13:33:10.507
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-viewmodel

我有`MVC3 razor`申请。提交表单并`Action`更改`ViewModel`内容后，我看不到填充的新值。

有一个关于这个的话题`MVC2`，人们告诉它可能会在`MVC3` [http://aspnet.codeplex.com/workitem/5089?ProjectName=aspnet中修复](http://aspnet.codeplex.com/workitem/5089?ProjectName=aspnet)

你能告诉我是否有一个选项可以做到这一点，或者在没有 JavaScript 的情况下使用回发更新 UI 的更好方法（解决方法）是什么？

行动：

```
[HttpPost]
public ActionResult Index(MyViewModel model)
{
    model.Value = "new value"
    return View("Index", model);
} 
```

用户界面：

```
@Html.HiddenFor(x => x.Value) 
```

视图模型：

```
public class MyViewModel
{
   public string Value { get;set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:38:10.187

看起来它正在使用已发布的 ModelState 值。

如果您使用`ModelState.Clear()`您设置的新值清除 ModelState，则应该在隐藏字段中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:36:26.933

你应该用`form`它`post`来行动。

```
@model MyViewModel

@using (Html.BeginForm("Index", "Home", FormMethod.Post))
{
    @Html.HiddenFor(x=>x.Value)
    <input type="submit" value="Submit" />
} 
```

**控制器**

```
//
public ActionResult Index()
{
    MyViewModel model = new MyViewModel();
    model.Value = "old value";

    return View("Index", model);
}

[HttpPost]
public ActionResult Index(MyViewModel model)
{
    //get posted model values (changed value by view "new value")
    string changed_value = model.Value;

    // you can return model again if your model.State is false or after update
    return View("Index", model);
} 
```

# c - 透明工具提示背景

> ID：13879665
> 
> 赞同：1
> 
> 时间：2012-12-14T13:33:30.007
> 
> 标签：c, winapi, tooltip, transparency

我在一个窗口中有 2 个区域，每个区域都有自己的工具提示。
这些工具提示是通过处理 WM_PAINT 消息自定义绘制的（以防止闪烁）。

这是工具提示的创建：

```
tooltips[MAIN_GRAPH_TT].tthWnd =  CreateWindowEx(WS_EX_TOPMOST,TOOLTIPS_CLASS,0,WS_POPUP | TTS_NOPREFIX | TTS_ALWAYSTIP | TTS_NOFADE,CW_USEDEFAULT, CW_USEDEFAULT,CW_USEDEFAULT,CW_USEDEFAULT,0,0,g_hInst,0);  
tooltips[SECONDARY_GRAPH_TT].tthWnd =   CreateWindowEx(WS_EX_TOPMOST,TOOLTIPS_CLASS,0,WS_POPUP | TTS_NOPREFIX | TTS_ALWAYSTIP | TTS_NOFADE,CW_USEDEFAULT, CW_USEDEFAULT,CW_USEDEFAULT,CW_USEDEFAULT,0,0,g_hInst,0); 
```

这是工具提示的初始化：

```
if (tooltips[MAIN_GRAPH_TT].tthWnd)
{

    lpfnOldTTProc = (WNDPROC)SetWindowLong(tooltips[MAIN_GRAPH_TT].tthWnd,
        GWL_WNDPROC, (DWORD) TooltipProc);
    SetWindowLong(tooltips[MAIN_GRAPH_TT].tthWnd, GWL_EXSTYLE, WS_EX_LAYERED|WS_EX_TOOLWINDOW);
    SetLayeredWindowAttributes(tooltips[MAIN_GRAPH_TT].tthWnd,RGB(255,0,0),0,ULW_COLORKEY);
    SendMessage(tooltips[MAIN_GRAPH_TT].tthWnd,CWM_SETWNDPROC,0,(LPARAM)new WNDPROC(lpfnOldTTProc));
}

if (tooltips[SECONDARY_GRAPH_TT].tthWnd)
{

    lpfnOldTTProc = (WNDPROC)SetWindowLong(tooltips[SECONDARY_GRAPH_TT].tthWnd, GWL_WNDPROC, (DWORD) TooltipProc);
    SetWindowLong(tooltips[SECONDARY_GRAPH_TT].tthWnd, GWL_EXSTYLE, WS_EX_LAYERED|WS_EX_TOOLWINDOW);
    SetLayeredWindowAttributes(tooltips[SECONDARY_GRAPH_TT].tthWnd,RGB(255,0,0),0,ULW_COLORKEY);
    SendMessage(tooltips[SECONDARY_GRAPH_TT].tthWnd,CWM_SETWNDPROC,0,(LPARAM)new WNDPROC(lpfnOldTTProc));
} 
```

这是自定义工具提示 WNDPROC 的 WM_PAINT：

```
 case WM_PAINT:
     {

        const int FRAME_WIDTH = 1;
        const int CORNER_DIAMETER = 10;
        PAINTSTRUCT ps;
        HDC hdc = BeginPaint(hWnd,&ps);
        HDC hMemDC;
        RECT cr;
        GetClientRect(hWnd,&cr);
        hMemDC = CreateCompatibleDC(hdc);
        HBITMAP memBM = CreateCompatibleBitmap(hdc, cr.right-cr.left, cr.bottom-cr.top);
        HBITMAP hOldBM = (HBITMAP) SelectObject(hMemDC,memBM);
        //drawing start [draw to hMemDC]
        {
            FillSolidRect(hMemDC,0,0,cr.right-cr.left,cr.bottom-cr.top,RGB(255,0,0));               
            HPEN hFramePen = CreatePen(PS_SOLID,FRAME_WIDTH,BLACK);
            HBRUSH hBGBrush = GetSysColorBrush(COLOR_INFOBK);
            SetTextColor(hMemDC,GetSysColor(COLOR_INFOTEXT));
            SetBkColor(hMemDC,WHITENESS);
            SetBkMode(hMemDC,TRANSPARENT);
            HBRUSH hOldBrush = (HBRUSH) SelectObject(hMemDC,hBGBrush);
            HPEN hOldPen = (HPEN) SelectObject(hMemDC,hFramePen);
            HFONT hOldFont = SelectFont(hMemDC,g_hFonts[FONT_TOOLTIP]);
            RoundRect(hMemDC,cr.left,cr.top,cr.right,cr.bottom,CORNER_DIAMETER,CORNER_DIAMETER);
            RECT textRec = cr;
            textRec.left += FRAME_WIDTH*2;
            textRec.right -= FRAME_WIDTH*2;
            textRec.top += FRAME_WIDTH*2;
            textRec.bottom -= FRAME_WIDTH*2;
            if(hWnd == tooltips[MAIN_GRAPH_TT].tthWnd)
                DrawText(hMemDC,tttBuffer[MAIN_GRAPH_TT],sizeof(tttBuffer),&textRec,DT_LEFT|DT_TOP);
            else if(hWnd == tooltips[SECONDARY_GRAPH_TT].tthWnd)
                DrawText(hMemDC,tttBuffer[SECONDARY_GRAPH_TT],sizeof(tttBuffer),&textRec,DT_LEFT|DT_TOP);
            SelectObject(hMemDC,hOldBrush);
            SelectObject(hMemDC,hOldPen);
            SelectObject(hMemDC,hOldFont);
            DeleteObject(hFramePen);
            DeleteObject(hBGBrush);

        }
        //drawing end
        BitBlt(hdc,
                cr.left,
                cr.top,
                cr.right-cr.left, cr.bottom-cr.top,
                hMemDC,
                0,
                0,
                SRCCOPY);
        SelectObject(hdc,hOldBM);
        DeleteObject(memBM);
        DeleteDC(hMemDC);
        EndPaint(hWnd,&ps);
     }
    break; 
```

这些工具提示的问题是，角落（圆形矩形之外）应该是透明的，但我似乎无法让它们消失。
我曾尝试（天真地）使用 HOLLOW_BRUSH 绘制背景矩形，但没有奏效，正如您从示例中看到的那样，我尝试使用分层窗口方法，再次无济于事。

谁能帮我获得工具提示背景的透明度？

* * *

这是一张不透明的工具提示图片
[角落已重新着色为白色以提高可见度——这些是需要透明的部分]
（文本空白）
![没有透明度的工具提示](../Images/fa086655f778d860b5f9f1228bf77b97.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T20:26:58.183

在处理控件和透明度时，我发现 WS_EX_TRANSPARENT exStyle 可以为您节省一些时间。此外，您可能需要检查工具提示是否向主窗口发送 WM_CTLCOLORSTATIC 消息，如果是，您可能需要返回一个空心（空）画笔句柄作为响应。您可能还需要在那个时间点将背景模式设置为透明，方法是在 WM_CTLCOLORSTATIC 消息提供的 hDC 上调用 SetBkMode。

很抱歉没有对此进行任何测试，但它适用于静态和组控件。到目前为止，我证明对这种方法没有响应的唯一控件是复选框按钮，我无法为其设置背景透明度。

问候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T20:44:20.300

您可以使用`SetWindowRgn`使窗口的某些部分透明（使用创建区域`CreateRoundRectRgn`）。

或者，您可以`SetLayeredWindowAttributes`使用真正的 Alpha 混合来使窗口的某些部分透明。

# ios - UIGestureRecognizer 拖拽 UIView

> ID：13879666
> 
> 赞同：14
> 
> 时间：2012-12-14T13:33:30.857
> 
> 标签：ios, uiview, uigesturerecognizer

我正在尝试构建一个从右到左`GestureRecognizer`拖动一个。`UIView`如果用户将 View 拖到屏幕的一半，View 会自动拖到左角丢弃它，但如果用户没有拖到一半屏幕，它会返回到屏幕的右角。这里有点迷失，任何教程或什么？谢谢

**编辑：**继承一些代码，它的a `UIImageView`，在a内`UIScrollView`，我需要拖动整个滚动或只是其中的图像：

```
_myScroll = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.window.bounds.size.width, self.window.bounds.size.height)]; [_myScroll setContentSize:CGSizeMake(self.window.bounds.size.width , 1300)];

_tutorial = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, self.window.bounds.size.width, 1300)]; [_tutorial setImage:[UIImage imageNamed:@"Default"]];
_tutorial.contentMode = UIViewContentModeScaleAspectFit; [_myScroll addSubview:_tutorial];

_tutorial.userInteractionEnabled = YES;
    UIPanGestureRecognizer * recognizer = [[UIPanGestureRecognizer alloc]initWithTarget:_tutorial action:@selector(handlePan:)]; 
 [_tutorial addGestureRecognizer:recognizer];

    [self.window addSubview:_myScroll]; 
```

我尝试拖动的方法`UIImageView`

```
- (IBAction)handlePan:(UIPanGestureRecognizer *)recognizer {

    CGPoint translation = [recognizer translationInView:_myScroll];
    recognizer.view.center = CGPointMake(recognizer.view.center.x + translation.x,
                                         recognizer.view.center.y + translation.y);
    [recognizer setTranslation:CGPointMake(0, 0) inView:_myScroll];

} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-14T13:52:42.770

看看[这里](http://www.raywenderlich.com/6567/uigesturerecognizer-tutorial-in-ios-5-pinches-pans-and-more)。这是一个`UIGestureRecognizer`教程，它将为您提供处理捏合和平移手势的基础知识。一旦你学会了基础知识，就很容易实现你想要的。您只需在平移完成后检查视图的位置，以将其发送到正确的位置。看看[这个其他教程](http://www.raywenderlich.com/10518/how-to-use-uiscrollview-to-scroll-and-zoom-content)，`UIScrollViews`它可能会帮助您找到通过第二部分的方式。

两个教程都来自[raywenderlich.com](http://www.raywenderlich.com)，这可能是我所知道的最有用的 iOS 教程网站。

* * *

这是您可以使用的方法的一些代码`handlePan:`：

```
- (IBAction)handlePan:(UIPanGestureRecognizer *)recognizer {

    CGPoint translation = [recognizer translationInView:_myScroll];

    recognizer.view.center = CGPointMake(recognizer.view.center.x + translation.x,
                                         recognizer.view.center.y + translation.y);

    if (recognizer.state == UIGestureRecognizerStateEnded) {

        // Check here for the position of the view when the user stops touching the screen

        // Set "CGFloat finalX" and "CGFloat finalY", depending on the last position of the touch

        // Use this to animate the position of your view to where you want
        [UIView animateWithDuration: aDuration
                              delay: 0 
                            options: UIViewAnimationOptionCurveEaseOut 
                         animations:^{
            CGPoint finalPoint = CGPointMake(finalX, finalY);
            recognizer.view.center = finalPoint; } 
                         completion:nil];
    }

    [recognizer setTranslation:CGPointMake(0, 0) inView:_myScroll];

} 
```

我不会在这里给你完美的答案，你必须在代码上工作才能找到一种方法让它按照你的意愿工作。

这是最后一个提示。您可以使用 slideFactor 来制作某种“平滑”动画。它将帮助您的动画更加“逼真”。处理这段代码，你在“if”的开头添加：

```
CGPoint velocity = [recognizer velocityInView:self.view];
CGFloat magnitude = sqrtf((velocity.x * velocity.x) + (velocity.y * velocity.y));
CGFloat slideMult = magnitude / 200;

float slideFactor = 0.1 * slideMult; // Increase for more slide 
```

然后在 UIView 中`animateWithDuration:`，`slideFactor`用作持续时间。

# email - 如何解决“找到了测试报告，但没有一个是新的。测试运行了吗？” 在詹金斯

> ID：13879667
> 
> 赞同：47
> 
> 时间：2012-12-14T13:33:29.920
> 
> 标签：email, junit, jenkins, report

我收到错误消息“找到了测试报告，但没有一个是新的。测试运行了吗？” 尝试通过电子邮件发送单元测试结果时。原因是我有一个专门的 Jenkins 工作，它将工件从测试工作导入到它自己，并通过电子邮件发送测试结果。我这样做的原因是因为我不希望 Jenkins 在晚上向所有开发人员发送电子邮件 :) 所以我“推迟”发送电子邮件，因为 Jenkins 本身不支持延迟的电子邮件通知（很遗憾）。

但是，当“通过电子邮件发送测试结果”作业执行时，测试已经有好几个小时了，我得到了问题标题中指定的错误。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-02-05T08:20:05.253

您可以尝试将测试报告的时间戳更新为构建步骤（“执行 shell 脚本”）。例如

```
cd path/to/test/reports
touch *.xml 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-03-14T20:51:17.440

```
mvn clean test 
```

通过终端或詹金斯。这会生成新的测试报告。

另一个说**cd path/to/test/reports touch *.xml**的答案对我不起作用，但是**mvn clean test**是的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-07-07T20:05:40.133

更新最后修改日期也可以在 gradle 本身中实现是需要的：

```
task jenkinsTest{
    inputs.files test.outputs.files
    doLast{
        def timestamp = System.currentTimeMillis()
        test.testResultsDir.eachFile { it.lastModified = timestamp }
    }
}

build.dependsOn(jenkinsTest) 
```

如此处所述：http: [//www.practicalgradle.org/blog/2011/06/incremental-tests-with-jenkins/](http://www.practicalgradle.org/blog/2011/06/incremental-tests-with-jenkins/)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-07-06T08:46:35.863

*这是Jenkinsfile (Declarative Pipeline)*的更新版本：

 *```
pipeline {

    agent any

    stages {
        stage('Build') {
            steps {
                sh 'make build'
            }
        }
        stage('Test') {
            steps {
                sh 'make test'

                script {
                    def testResults = findFiles(glob: 'build/reports/**/*.xml')
                    for(xml in testResults) {
                        touch xml.getPath()
                    }
                }
            }
        }
    }

    post {
        always {
            archiveArtifacts artifacts: 'build/libs/**/*.jar', fingerprint: true
            junit 'build/reports/**/*.xml'
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-01-08T17:37:09.047

因为 gradle 缓存了以前构建的结果，所以我遇到了同样的问题。

我通过将此行添加到我的发布阶段来修复它：

```
sh 'find . -name "TEST-*.xml" -exec touch {} \\;' 
```

所以我的文件是这样的：

```
....
stage('Unit Tests') {

    sh './gradlew test'

}

stage('Publish Results') {

    // Fool Jenkins into thinking the tests results are new
    sh 'find . -name "TEST-*.xml" -exec touch {} \\;'

    junit '**/build/test-results/test/TEST-*.xml'

} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-12-20T20:46:16.707

对于重复运行的作业（每 30 分钟）有同样的问题。

对于作业，请转到配置、构建、高级并在开关部分中添加：--stacktrace --continue --rerun-tasks

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-15T06:09:10.603

确保您在 jenkins 配置下针对“测试报告 XMLs”提到了正确的路径，例如“target/surefire-reports/*.xml” 无需触摸 *.xml，因为即使测试 jenkins 也不会抱怨结果 xml 文件没有改变。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-22T09:11:30.557

如果您使用 Windows slave，您可以使用带有 powershell 的 groovy 管道阶段“触摸”结果：

```
powershell 'ls "junitreports\\*.*" | foreach-object { $_.LastWriteTime = Get-Date }' 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-01-26T17:20:00.203

如果您使用的测试报告在该运行中未被该作业修改，则会发生这种情况。

如果您正在使用已经创建的文件进行测试，那么为了测试目的，请在 Build > Execute Shell 下的 jenkins 作业中添加以下命令

```
chmod -R 775 /root/.jenkins/workspace/JmeterTest/output.xml

echo " " >> /root/.jenkins/workspace/JmeterTest/output.xml 
```

上面的命令更改文件的时间戳，因此不会显示错误。

**注意：要在****Execute Shell**而不是上面实现相同的效果，请不要尝试使用 move **mv**命令等重命名文件。它不会起作用，附加和删除相同的更改文件时间戳才有效。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-03-29T06:05:32.493

对我来说，命令喜欢`chmod -R 775 test-results.xml`或`touch test-results.xml`由于权限错误而不起作用。解决方法是在测试报告设置中设置新文件，并命令将旧的 xml 报告文件复制到新文件。

[![在此处输入图像描述](../Images/e2f08397833135844f153ef06e53f917.png)](https://i.stack.imgur.com/KiQDI.png)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-06-26T19:46:34.120

在 Jenkins 上配置作业时，您可以将以下 shell 命令添加到“预步骤”部分

```
mvn clean test 
```

这将清理测试

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-03-09T22:02:46.630

这是涉及每个测试结果文件的 gradle 任务的更新版本。从 Jenkins 管道脚本中，只需调用“testAndTouchTestResult”任务而不是“测试”任务。

下面的代码使用 Kotlin 语法：

```
tasks {
register("testAndTouchTestResult") {
    setGroup("verification")
    setDescription("touch Test Results for Jenkins")
    inputs.files(test.get().outputs)
    doLast {
        val timestamp = System.currentTimeMillis()
        fileTree(test.get().reports.junitXml.destination).forEach { f ->
            f.setLastModified(timestamp)
        }
    }
} 
```

}

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-05-24T16:00:05.433

这对我有用

1.  导航到报告目录`cd /report_directory`
2.  删除所有旧报告`rm *.xml`
3.  `junit report_directory/*.xml`在管道中添加
4.  重新运行测试脚本，导航到 Build Number → Test Result

确保你有一个成功的构建没有任何失败，只有在这之后你才能看到报告

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2018-11-30T18:38:59.927

我的解决方案是在詹金斯上删除`node_modules`和更改`node`版本（从 7.1 到 8.4）。就是这样。*

# recursion - 一个简单的 AMZI prolog 递归，但没有按预期给出正确的结果

> ID：13879670
> 
> 赞同：0
> 
> 时间：2012-12-14T13:33:34.383
> 
> 标签：recursion, prolog

所以这是我的 .pro 文件内容（AMZI PROLOG）：

```
room(kitchen).
room(office).
room(hall).
room('dining room').
room(cellar).

door(office, hall).
door(kitchen, office).
door(hall, 'dining room').
door(kitchen, cellar).
door('dining room', kitchen).

location(desk,office).
location(apple,kitchen).
location(flashlight,desk).
location('washing machine',cellar).
location(nani,'washing machine').
location(broccoli,kitchen).
location(crackers,kitchen).
location(computer,office).
location(envelope,desk).
location(stamp,envelope).
location(key,envelope).

edible(apple).
edible(crackers).

tastes_yucky(broccoli).

here(kitchen).

is_located_in(T1,T2):-location(X,T2),is_located_in(T1,X). 
```

我想要实现的是，如果我使用例如 is_located_in(X,office)，那么结果将是：

```
X=desk,
X=flashlight,
X=computer,
X=envelope,
X=stamp,
X=key,
no 
```

（没有特别的顺序）。

这样，结果将包括基本上位于办公室对象中/上的事物，而不是直接位于办公室中的事物。

这是来源：[http ://www.amzi.com/AdventureInProlog/a8recurs.php](http://www.amzi.com/AdventureInProlog/a8recurs.php)

据说代码很好，但是当我测试它时，它只是返回：

```
no 
```

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:41:11.557

试试这个（按这个顺序）：

```
is_located_in(T1,T2):-location(T1,T2).
is_located_in(T1,T2):-location(X,T2),is_located_in(T1,X). 
```

# jquery-validate - Jquery 验证现有输入

> ID：13879677
> 
> 赞同：-2
> 
> 时间：2012-12-14T13:34:03.337
> 
> 标签：jquery-validate

在表单输入中，我正在设置从服务器端接收的值。可以再次提交表单输入，但如果用户不更改输入，即替换输入并再次放置相同的值，则不应验证表单并提醒用户，不能再次设置相同的值.

- 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:13:25.790

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.10.0/jquery.validate.js"
        type="text/javascript"></script>
    <script>
        $(function () {
            var changeme = $('input[name=changeme]').val();
            $.validator.addMethod("mustchange", function (value, element) {
                if (value === changeme) {
                    return false;
                }
                else {
                    return true;
                }
            }, "you must change this value");
            $('form').validate({ debug: true });

        });
    </script>
</head>
<body>
    <form>
    <div id="main">
        <input name="changeme" type="text" value="My name is bob" class="mustchange" />
        <br />
        <input type="submit" />
    </div>
    </form>
</body>
</html> 
```

# http - php-fpm 一天停止多次

> ID：13879680
> 
> 赞同：3
> 
> 时间：2012-12-14T13:34:10.897
> 
> 标签：http, nginx, centos, php, centos6

我安装在 Centos 6 服务器上来托管 Wordpress 繁忙的博客：

CPU：Intel Xeon E3 1245v2 - 4 核 - 8 线程 RAM：32 Go DDR3

Nginx、PHP-FPM 和 APC

版本：

PHP 5.4.9 (fpm-fcgi)（构建时间：2012 年 11 月 22 日 11:33:35）

nginx版本：nginx/1.2.5

该网站在第一天工作，我使用 UNIX 套接字而不是 TCP

PHP-FPM 的错误日志：

```
[14-Dec-2012 01:33:45] WARNING: [pool www] seems busy (you may need to increase                                                                                         pm.start_servers, or pm.min/max_spare_servers), spawning 32 children, there are                                                                                         3 idle, and 205 total children
[14-Dec-2012 01:34:08] WARNING: [pool www] seems busy (you may need to increase                                                                                         pm.start_servers, or pm.min/max_spare_servers), spawning 8 children, there are 3                                                                                         idle, and 222 total children
[14-Dec-2012 01:34:35] WARNING: [pool www] seems busy (you may need to increase                                                                                         pm.start_servers, or pm.min/max_spare_servers), spawning 8 children, there are 0                                                                                         idle, and 240 total children
[14-Dec-2012 01:34:44] WARNING: [pool www] server reached pm.max_children settin                                                                                        g (250), consider raising it
[14-Dec-2012 14:21:22] NOTICE: Terminating ...
[14-Dec-2012 14:21:22] NOTICE: exiting, bye-bye!
[14-Dec-2012 14:21:23] NOTICE: fpm is running, pid 2345
[14-Dec-2012 14:21:23] NOTICE: ready to handle connections
[14-Dec-2012 14:21:30] WARNING: [pool www] seems busy (you may need to increase                                                                                         pm.start_servers, or pm.min/max_spare_servers), spawning 8 children, there are 4                                                                                         idle, and 9 total children
[14-Dec-2012 14:24:39] WARNING: [pool www] child 2354 exited on signal 7 (SIGBUS                                                                                        ) after 191.690193 seconds from start
[14-Dec-2012 14:24:39] NOTICE: [pool www] child 2510 started 
```

我增加了 pm.max_children 值但没有任何成功

PHP-FPM 配置：

```
; If this number of child processes exit with SIGSEGV or SIGBUS within the time
; interval set by emergency_restart_interval then FPM will restart. A value
; of '0' means 'Off'.
; Default Value: 0
emergency_restart_threshold = 10

; Interval of time used by emergency_restart_interval to determine when
; a graceful restart will be initiated.  This can be useful to work around
; accidental corruptions in an accelerator's shared memory.
; Available Units: s(econds), m(inutes), h(ours), or d(ays)
; Default Unit: seconds
; Default Value: 0
emergency_restart_interval = 1m

; Time limit for child processes to wait for a reaction on signals from master.
; Available units: s(econds), m(inutes), h(ours), or d(ays)
; Default Unit: seconds
; Default Value: 0
process_control_timeout = 10s 
```

默认池配置：

```
; The number of child processes to be created when pm is set to 'static' and the
; maximum number of child processes to be created when pm is set to 'dynamic'.
; This value sets the limit on the number of simultaneous requests that will be
; served. Equivalent to the ApacheMaxClients directive with mpm_prefork.
; Equivalent to the PHP_FCGI_CHILDREN environment variable in the original PHP
; CGI.
; Note: Used when pm is set to either 'static' or 'dynamic'
; Note: This value is mandatory.
pm.max_children = 250

; The number of child processes created on startup.
; Note: Used only when pm is set to 'dynamic'
; Default Value: min_spare_servers + (max_spare_servers - min_spare_servers) / 2
pm.start_servers = 5

; The desired minimum number of idle server processes.
; Note: Used only when pm is set to 'dynamic'
; Note: Mandatory when pm is set to 'dynamic'
pm.min_spare_servers = 5

; The desired maximum number of idle server processes.
; Note: Used only when pm is set to 'dynamic'
; Note: Mandatory when pm is set to 'dynamic'
pm.max_spare_servers = 70

; The number of requests each child process should execute before respawning.
; This can be useful to work around memory leaks in 3rd party libraries. For
; endless request processing specify '0'. Equivalent to PHP_FCGI_MAX_REQUESTS.
; Default Value: 0
;pm.max_requests = 500 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T21:02:13.690

PHP 进程在无限期运行时并不是特别可靠。您应该配置 php-fpm 以不时重启工作进程。尝试改变

```
 ;pm.max_requests = 500 
```

进入

```
 pm.max_requests = 500 
```

作为一个开始。这可能无法解决所有问题，因为您可能还有其他配置问题，但更改 max_requests 是一个好的开始。我的服务器已经运行了几个月，没有任何停机时间。

# android - 使用 4.0.4 android 版本或 3.2 的设备运行 GCM 通知项目有什么区别吗？

> ID：13879690
> 
> 赞同：1
> 
> 时间：2012-12-14T13:34:29.247
> 
> 标签：android, android-c2dm, google-cloud-messaging

我已经就这个问题提出了一个问题。（请参阅链接）[如何使用 GCM 接收多个通知而不替换先例？](https://stackoverflow.com/questions/13763849/how-can-i-receive-multiple-notifications-by-using-gcm-without-replacing-the-prec)

我正在开发一个从 GCM 服务器接收通知的项目。

我在两台设备上运行它。第一个是4.0.4 android 版本，第二个是3.2 Android 版本。我注意到，当我发送第一个通知时，我会同时收到两条消息。第二个不是这种情况。

```
Is it due to the version of the device? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T14:30:27.077

不，据我了解，这不是版本问题，至少不是我以前见过的版本问题。

您可能会收到两条通知，因为您在 4.0.4 设备上多次向 GCM 注册了您的应用程序。

我会检查您的服务器上的响应是否有任何可能允许您解决此问题的[规范 ID 。](http://developer.android.com/google/gcm/adv.html#canonical)您也可以尝试在 4.0.4 设备上取消注册您的应用程序，看看您是否仍然收到任何 GCM 消息。

# c# - Excel 在消息框询问我是否要保存工作簿的位置挂起

> ID：13879691
> 
> 赞同：2
> 
> 时间：2012-12-14T13:34:30.770
> 
> 标签：c#, excel-interop

我有一个 Class`report`女巫包括一个方法`RunExcelReporting`。它知道要打开什么工作簿以及通过控制表运行什么例程。

作为测试，我刚刚在控制表中错误地拼写了一个宏。
控制台应用程序创建一个实例`report`并运行该`RunExcelReporting`方法，然后在 Excel 显示询问用户是否要保存工作簿的消息框时停止。这对我来说是一个糟糕的中途休息点 - 我宁愿有某种错误消息，或者我希望关闭工作簿而不保存更改。如何修改以下代码以提供帮助？

```
private void RunExcelReporting(int x) {

    Excel.Application excelApp = null;
    Excel.Workbook book = null;       
    try {

        excelApp = new Excel.Application();
        excelApp.Visible = true;
        book = excelApp.Workbooks.Open((string)MyReportRow["XLfile" + x + "_Path"] + (string)MyReportRow["XLfile" + x + "_Name"]);//,null,true);

            //loop through the four possible macros in each book
        for (int j = 1; j <= 4; j++) {
            if (IsNull(MyReportRow["XLfile" + x + "_Macro" + j]) == false) {
                excelApp.Run((string)MyReportRow["XLfile" + x + "_Macro" + j]);
            }
        }
        book.Close(false, Type.Missing, Type.Missing);
    }
    catch (Exception ex) {
        Console.WriteLine(ex.ToString());
    }
    finally {
        if (book != null) {
            //book.Close(false, Type.Missing, Type.Missing);
            book = null;
        }
        if (excelApp != null) {
            excelApp.Application.Quit();
            excelApp.Quit();
            excelApp = null;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:45:15.117

尝试添加（之前某处`book.Close`）：

```
excelApp.DisplayAlerts = false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T17:14:11.140

似乎问题在于Excel没有将错误冒泡到控制台；该错误发生在 Excel 中，即控制台的一个单独进程。

我需要扩展应用程序来解决这个问题。

# actionscript-3 - AS3 库：我是否缺少 FileStream？

> ID：13879696
> 
> 赞同：0
> 
> 时间：2012-12-14T13:34:55.437
> 
> 标签：actionscript-3, class, filestream

我想我的图书馆里缺少一些课程。如果我输入“import fil”，FD4 会自动完成以下内容：

```
import flash.net.FileFilter
import flash.net.FileReference
import flash.net.FileReferenceList 
```

我看到人们使用 FileStream 并且想知道为什么我没有这个类可用。你们知道为什么会发生这种情况以及我如何获得图书馆吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T13:44:54.857

FileStream 仅在面向 AIR 1.0+ 时可用。

# ruby-on-rails - Rails 模型。有效吗？刷新自定义错误并错误地返回 true

> ID：13879700
> 
> 赞同：37
> 
> 时间：2012-12-14T13:35:22.787
> 
> 标签：ruby-on-rails, activerecord

我正在尝试将自定义错误添加到我的用户模型的实例中，但是当我调用有效时？它正在擦除自定义错误并返回 true。

```
[99] pry(main)> u.email = "test@test.com"
"test@test.com"

[100] pry(main)> u.status = 1
1

[101] pry(main)> u.valid?
true

[102] pry(main)> u.errors.add(:status, "must be YES or NO")
[
    [0] "must be YES or NO"
]

[103] pry(main)> u.errors
#<ActiveModel::Errors:[...]@messages={:status=>["must be YES or NO"]}>

[104] pry(main)> u.valid?
true

[105] pry(main)> u.errors
#<ActiveModel::Errors:[...]@messages={}> 
```

如果我`validate`在模型中使用该方法，那么它可以工作，但是这个特定的验证是从不同的方法中添加的（这需要传递参数）：

```
User

def do_something_with(arg1, arg2)
  errors.add(:field, "etc") if arg1 != arg2
end 
```

由于上述原因，user.valid? 即使将该错误添加到实例中，它也会返回 true。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-12-14T14:05:47.663

在 ActiveModel 中，`valid?`定义如下：

```
def valid?(context = nil)
  current_context, self.validation_context = validation_context, context
  errors.clear
  run_validations!
ensure
  self.validation_context = current_context
end 
```

因此，预期会清除现有错误。您必须将所有自定义验证放入一些`validate`回调中。像这样：

```
validate :check_status

def check_status
  errors.add(:status, "must be YES or NO") unless ['YES', 'NO'].include?(status)
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-01T08:12:46.943

如果你想强制你的模型显示错误，你可以做一些像这样**肮脏**的事情：

```
your_object = YourModel.new 
your_object.add(:your_field, "your message")
your_object.define_singleton_method(:valid?) { false }
# later on...
your_object.valid?
# => false
your_object.errors
# => {:your_field =>["your message"]} 
```

该`define_singleton_method`方法可以覆盖`.valid?`行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-22T03:23:02.197

制造新的担忧

应用程序/模型/关注/static_error.rb

```
module StaticError
  extend ActiveSupport::Concern

  included do
    validate :check_static_errors
  end

  def add_static_error(*args)
    @static_errors = [] if @static_errors.nil?
    @static_errors << args

    true
  end

  def clear_static_error
    @static_errors = nil
  end

  private

  def check_static_errors
    @static_errors&.each do |error|
      errors.add(*error)
    end
  end
end 
```

包括模型

```
class Model < ApplicationRecord
  include StaticError
end 
```

```
model = Model.new
model.add_static_error(:base, "STATIC ERROR")
model.valid? #=> false
model.errors.messages #=> {:base=>["STATIC ERROR"]} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-10T17:54:55.960

这不是使用提供的验证/框架的替代品。但是，在某些*特殊*情况下，您希望优雅地返回一个错误模型。我**只会**在无法使用其他替代方案时使用它。我不得不使用这种方法的少数场景之一是在服务对象内部创建一个模型，其中某些部分创建失败（例如解析依赖实体）。我们的域模型负责这种类型的验证是没有意义的，所以我们不将它存储在那里（这就是服务对象首先进行创建的原因）。然而，为了简化 API 设计，挂起诸如“未找到关联实体 foo”之类的域错误并通过正常的 rails 422/不可处理实体流返回会很方便。

```
class ModelWithErrors
  def self.new(*errors)
    Module.new do
      define_method(:valid?) { false }
      define_method(:invalid?) { true }
      define_method(:errors) do
        errors.each_slice(2).with_object(ActiveModel::Errors.new(self)) do |(name, message), errs|
          errs.add(name, message)
        end
      end
    end
  end
end 
```

用于`some_instance.extend(ModelWithErrors.new(:name, "is gibberish", :height, "is nonsense")`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-14T13:55:29.543

满足您需求的一种干净方法是上下文，但如果您想要快速修复，请执行以下操作：

```
#in your model
attr_accessor :with_foo_validation
validate :foo_validation, if: :with_foo_validation

def foo_validation
  #code 
end

#where you need it
your_object.with_foo_validation = true
your_object.valid? 
```

# javascript - 使用键盘切换或滚动固定高度的 HTML 表格单元格

> ID：13879703
> 
> 赞同：1
> 
> 时间：2012-12-14T13:35:29.060
> 
> 标签：javascript, html, css, browser, section508

我需要为单元格高度固定的 HTML 表格添加键盘访问。也就是说，如果单元格中出现滚动条（给出的示例），则键盘需要能够使用箭头键滚动该单元格。我怎样才能做到这一点？我需要支持 Internet Explorer 6、7 及更高版本。

非常感谢您提前提供的帮助。

表格示例：

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

    <html lang="en">
        <head>
            <title>Simplified</title>
        </head>
        <body>
        <table width="100%" cellspacing="0" cellpadding="0" border="1" BGCOLOR="#E8E8E8">
            <tr align="center">
            <td valign="top">
                <strong>List</strong>
            </td>
            </tr>
            <tr align="center">
            <td>
                <table width="100%" border="1" cellspacing="0" cellpadding="2" id="reasonList">
                    <tr>
                    <th scope="row" width="15%">
                        <span class="workArea">
                        <a href="http://www.somewhere.com/someHTML.html"><nobr>Entry Number</nobr></a>
                        </span>
                    </th>
                    <td width="20%" align="center">
                        <span class="workArea">
                        <nobr>ALL</nobr>
                        </span>
                    </td>
                    <td width="10%" align="center">
                        <span class="workArea">
                        <nobr>A</nobr>
                        </span>
                    </td>
                    <td width="10%">
                        <span class="workArea">
                            <nobr>B</nobr>
                        </span>
                    </td>
                    <td width="35%" align="left">
                        <div style="overflow:auto; width: 330px; height: 110px;">
                            <span class="workArea">
                                            Returned Customer<br>
                                            Refund Requested<br>
                                            Change of Address<br>
                                            Denied Delivery<br>
                                            Expedited processing<br>
                                            Data Entry Errors<br>
                                            Not Ready for Delivery<br>
                                            Other Notices<br>
                                            Billing Error<br>
                                            Shipping Error<br>
                                            Rejected Delivery<br>
                            </span>
                        </div>
                    </td>
                    <td width="15%">
                        <span class="workArea">
                        <nobr>07/15/2012</nobr>
                        </span>
                    </td>
                    </tr>
                </table>
            </td>
            </tr>
        </table>
        </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T18:29:03.427

您应该能够通过添加`tabindex="-1"`到有问题的单元格来赋予单元格焦点。

# tidesdk - 首次打开应用程序时禁用 TideSDK 安装程序对话框？

> ID：13879705
> 
> 赞同：1
> 
> 时间：2012-12-14T13:35:33.300
> 
> 标签：tidesdk

首次打开您的应用程序时是否有禁用 TideSDK 安装程序对话框弹出窗口。我正在向第 3 方分发站点提交一个应用程序，但它因此被拒绝。

请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:05:36.983

您可以使用潮汐builder.py 并将 -n 参数传递给它。最后的命令是：

```
./tidebuilder.py -n -d {output dir} {source project dir} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:18:46.503

如果您以捆绑模式创建应用程序。安装应用程序时不会弹出任何安装程序对话框。您可能已经创建了一个网络安装程序，并且在第一次安装和运行时，它会通过弹出安装程序对话框尝试从 Internet 获取模块。

您能否提供有关您的应用程序的更多详细信息，该应用程序使用的模块，您是在创建网络安装程序还是捆绑软件，您在哪个平台上？

此外，如果可能，请描述您用于创建应用程序的命令。这将有助于进一步调查该问题。

# postgresql - PostgreSQL - 将列数据类型从整数更改为整数数组

> ID：13879713
> 
> 赞同：14
> 
> 时间：2012-12-14T13:35:57.340
> 
> 标签：postgresql, type-conversion

请帮助将整数类型的列修改为整数数组：

`content_id`我创建了一个包含整数类型列的表。然后我尝试将其更改`content_id(integer)`为`integer[](integer array)`但其显示错误如下所示：

```
TestDatabase=# ALTER TABLE tbl_handset_content ALTER COLUMN content_id TYPE integer[];
ERROR:  column "content_id" cannot be cast to type "pg_catalog.int4[]" 
```

问候，

斯拉万

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-14T13:43:37.680

试试这个（在发生改变之前，列 test_id 的类型是 INTEGER）。PostgreSQL 8.4。

```
ALTER TABLE test.test_id
    ALTER COLUMN test_id TYPE INTEGER[]
    USING array[test_id]::INTEGER[]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-11-26T12:41:57.290

这对我来说效果更好！

```
ALTER TABLE schema.table
    ALTER COLUMN column
    DROP DEFAULT;
ALTER TABLE schema.table
    ALTER COLUMN column TYPE INTEGER[]
    USING array[column]::INTEGER[];
ALTER TABLE schema.table
    ALTER COLUMN column SET DEFAULT '{}'; 
```

# model-view-controller - 如何计算带有微风.js 扩展实体的网格中的总数？

> ID：13879716
> 
> 赞同：1
> 
> 时间：2012-12-14T13:36:03.957
> 
> 标签：model-view-controller, mvvm, knockout.js, breeze, computed-observable

我正在使用 MVVM 模式、breeze.js 和 knockout.js 开发一个 MVC Web 应用程序。这是我第一次使用这些 js 库，我仍然需要掌握它们是如何工作的。

应用程序的其中一个页面有一个网格，其中列和行都是动态生成的。我需要添加一个额外的列，其中对于每一行我都有显示在以下行单元格中的值的总数。这里有一个例子：

```
Data type |   Comment   |  Fact 1 | Fact 2 |  Total    | Value 1 | Value 2 | Value 3 | Value 4
==============================================================================================
Item 1    | any comment |  fact 1 | fact 2 | calc. sum |    10   |   20    |    30   |   40 
```

网格是通过将微风实体对象 (planningItems) 绑定到模板来生成的。该对象具有属性 DataTypeId、Comment、Member、Total、FactValues。Total 是计算的总和。

```
<script type="text/html" id="list-planning-template">
<tr data-bind="mouseOverButton: $data">
    <td style="text-align: center">
        <button class="actionbutton actionbutton-item" data-bind="selectItem: $root.selectedItems, itemId: FactId"></button>
    </td>
    <td data-bind="text: DataTypeId" />
    <td data-bind="text: Comment().Text" />
    <!-- ko foreach: FactMembers -->
    <td data-bind="text: Member().Code"></td>
    <!-- /ko -->
    <td data-bind="text: Total" />
    <!-- ko foreach: FactValues -->
    <td style="width: 50px" data-bind="text: Value"></td>
    <!-- /ko -->
</tr> 
```

我一直在尝试通过以下方式扩展微风实体对象来添加 Total 属性：

```
var FactCtor = function () {
this.Total = ko.computed({
    read: function () {
        var sum = 0;
        if (this.FactValues) {
            this.FactValues().forEach(function (fv) {
                sum += fv.Value();
            });
        }
        return sum;
    },
    deferEvaluation: true
}, this);
};

manager.metadataStore.registerEntityTypeCtor("Fact", FactCtor); 
```

本质上，这段代码应该做的是通过添加一个名为 Total 的淘汰计算 observable 和延迟评估来扩展实体。该函数遍历微风可观察数组 FactValues 并添加值。我一直在研究这段代码的不同版本，但无济于事。谁能给我这个代码有什么问题的提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:04:56.777

**更新：**

我们无法让我之前帖子中发布的代码正常工作。我们最终能够通过使用带有微风的自定义绑定来克服这个问题。这是代码：

```
 ko.bindingHandlers.getFyTotal = {
   update: function (element, valueAccessor) {
       var sum = 0;
       var fact = valueAccessor();
       if (fact.FactValues()) {
           fact.FactValues().forEach(function (fv) {
               sum += parseFloat(fv.Value());
           });
       }

       $(element).html(sum);
   }
}; 
```

然后通过以下方式在 HTML 代码中引用自定义绑定：

```
<td data-bind="getFyTotal: $data" /> 
```

希望这可以帮助其他人。

**经过修改的版本：**

我们更新了上面的代码以利用 ko.utils 函数：

```
ko.bindingHandlers.getFyTotal = {
update: function (element, valueAccessor) {
    var sum = 0;
    var fact = valueAccessor();
    if (fact.FactValues()) {
        ko.utils.arrayForEach(fact.FactValues(), function (fv) {
            sum += parseFloat(fv.Value());
        });
    }

    $(element).html(sum);
  }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T17:41:28.073

我在 Breeze 之外对您的代码进行了建模，并且可以正常工作：

[http://jsfiddle.net/DazWilkin/yGZ7g/7/](http://jsfiddle.net/DazWilkin/yGZ7g/7/)

我做了一个小调整，在你的构造函数上添加了对 FactValues (observableArray) 的引用，以克服 - 我相信 - JavaScript 中的循环/这个问题。

但是，我还没有在 Breeze 中尝试过这个并且想做类似的事情。我无法使类似的功能正常工作，并最终在我的 executeQuery 的“then”处理期间创建了总数：

```
...manager.executeQuery(....).then(function(data) {
   ...
   Fact.Total(FactValues()
      .map(function(fv){ return fv.Value(); })
      .reduce(function (total,curr) { return total+curr; });
   ...
} 
```

我将尝试回到我今天的版本，如果我找到更好的解决方案，我会报告回来。

# python - 在 Python 文档字符串中引用参数

> ID：13879717
> 
> 赞同：14
> 
> 时间：2012-12-14T13:36:08.633
> 
> 标签：python, python-sphinx, docstring

我使用 Sphinx 和 autodocs 功能来确保我们的项目中有好的文档。

所以我熟悉[信息字段列表](http://sphinx-doc.org/domains.html#info-field-lists)，也熟悉在我们的文档中使用[交叉引用。](http://sphinx-doc.org/domains.html#cross-referencing-python-objects)

但是，在为方法或函数编写文档字符串时，我发现在文本中引用它们的参数很有用。但似乎没有一种结构化的方式来做到这一点。

1.  我们可以说例如

    ```
    Use ``name`` to set the username 
    ```

    但这没有结构，需要你记住你使用的风格，如果你改变风格，你必须追捕并杀死所有不正确的风格。

2.  :param: 在信息字段列表之外不起作用，所以你不能写

    ```
    Use :param:`name` to set the username 
    ```

3.  我已经看到一些项目使用 :parm: 但这没有记录并且似乎不起作用。所以他们必须有一些定制

4.  我可以使用 generic_roles，但这似乎是我在解决我确信其他人遇到的问题。

所以希望我刚刚错过了一些非常明显的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T21:59:20.637

[您可以使用autodoc-process-docstring](http://sphinx-doc.org/ext/autodoc.html?highlight=autodoc#event-autodoc-process-docstring)编写自己的扩展- 这非常简单。

让扩展程序搜索`:param:`并用您选择的样式替换它。

# c++ - 使用擦除从“（”到“）”中删除 std::string 中的字符？

> ID：13879718
> 
> 赞同：6
> 
> 时间：2012-12-14T13:36:12.120
> 
> 标签：c++, string, std, erase

我想删除我的字符串的子字符串，它看起来像这样：

```
At(Robot,Room3) 
```

或者

```
SwitchOn(Room2) 
```

或者

```
SwitchOff(Room1) 
```

当我不知道它们的索引时，如何删除从左括号`(`到右括号的所有字符？`)`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-14T13:41:14.187

如果您知道字符串与模式匹配，那么您可以执行以下操作：

```
std::string str = "At(Robot,Room3)";
str.erase( str.begin() + str.find_first_of("("),
           str.begin() + str.find_last_of(")")); 
```

或者如果你想更安全

```
auto begin = str.find_first_of("(");
auto end = str.find_last_of(")");
if (std::string::npos!=begin && std::string::npos!=end && begin <= end)
    str.erase(begin, end-begin);
else
    report error... 
```

您还可以使用标准库`<regex>`。

```
std::string str = "At(Robot,Room3)";
str = std::regex_replace(str, std::regex("([^(]*)\\([^)]*\\)(.*)"), "$1$2"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T13:39:11.947

如果您的编译器和标准库足够新，那么您可以使用[`std::regex_replace`](http://en.cppreference.com/w/cpp/regex/regex_replace).

否则，您搜索 first `'('`，对 last 进行反向搜索`')'`，然后使用[`std::string::erase`](http://en.cppreference.com/w/cpp/string/basic_string/erase)删除其间的所有内容。或者，如果右括号后没有任何内容，则找到第一个并用于[`std::string::substr`](http://en.cppreference.com/w/cpp/string/basic_string/substr)提取要保留的字符串。

如果您遇到的麻烦实际上是*找到*括号，请使用[`std::string::find`](http://en.cppreference.com/w/cpp/string/basic_string/find)和/或[`std::string::rfind`](http://en.cppreference.com/w/cpp/string/basic_string/rfind).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T13:42:20.863

您必须搜索第一个 '(' 然后擦除直到 'str.length() - 1' （假设您的第二个括号始终位于末尾）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T14:02:37.223

简单*安全高效*的解决方案：

```
std::string str = "At(Robot,Room3)";

size_t const open = str.find('(');
assert(open != std::string::npos && "Could not find opening parenthesis");

size_t const close = std.find(')', open);
assert(open != std::string::npos && "Could not find closing parenthesis");

str.erase(str.begin() + open, str.begin() + close); 
```

永远不要多次解析一个字符，注意格式错误的输入。

# visual-studio - Visual Studio 中 ListView 和 ListBox 的区别

> ID：13879720
> 
> 赞同：19
> 
> 时间：2012-12-14T13:36:20.960
> 
> 标签：visual-studio, listview, windows-8, listbox, microsoft-metro

“Windows 8”应用程序中的“ListView”和“ListBox”有什么区别。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-14T14:52:40.533

这`ListBox`是一个较旧的控件，主要是为了与其他 xaml 框架兼容。具有用于触摸等的`ListView`内置功能。`ListView`除非您对`ListBox`

有关更多详细信息，请参见[此处](http://geekswithblogs.net/WinAZ/archive/2012/02/13/windows-8-listbox-2-listview.aspx)。

**特定事件仅适用于`ListView`：**

[DragItemsStarting](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.listviewbase.dragitemsstarting)

[项目点击](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.listviewbase.itemclick)

**方法：**

[CompleteViewChange](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.listviewbase.completeviewchange)

[竞争视图更改自](http://msdn.microsoft.com/en-US/library/windows/apps/hh702515)

[CompleteViewChangeTo](http://msdn.microsoft.com/en-US/library/windows/apps/hh702517)

[初始化视图更改](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.listviewbase.initializeviewchange)

[LoadMoreItemsAsync](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.listviewbase.loadmoreitemsasync)

[使可见](http://msdn.microsoft.com/en-US/library/windows/apps/hh702523)

[ScrollIntoView（对象，ScrollIntoViewAlignment）](http://msdn.microsoft.com/en-US/library/windows/apps/hh968031)

[StartViewChangeFrom](http://msdn.microsoft.com/en-US/library/windows/apps/hh702526)

[开始视图更改到](http://msdn.microsoft.com/en-US/library/windows/apps/hh702527)

**特性：**

[CanDragItems](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.listviewbase.candragitems)

[CanDragItems 属性](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.listviewbase.candragitemsproperty)

[可以重新订购商品](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.listviewbase.canreorderitems)

[CanReorderItems 属性](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.listviewbase.canreorderitemsproperty)

[数据提取大小](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.listviewbase.datafetchsize)

[DataFetchSizeProperty](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.listviewbase.datafetchsizeproperty)

[标题](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.listviewbase.header)

[标头属性](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.listviewbase.headerproperty)

[头部模板](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.listviewbase.headertemplate)

[标头模板属性](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.listviewbase.headertemplateproperty)

[头部转换](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.listviewbase.headertransitions)

[HeadTransitions属性](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.listviewbase.headertransitionsproperty)

[增量加载阈值](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.listviewbase.incrementalloadingthreshold)

[增量加载阈值属性](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.listviewbase.incrementalloadingthresholdproperty)

[增量加载触发器](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.listviewbase.incrementalloadingtrigger)

[IncrementalLoadingTriggerProperty](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.listviewbase.incrementalloadingtriggerproperty)

[活动视图](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.listviewbase.isactiveview)

[IsActiveView 属性](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.listviewbase.isactiveviewproperty)

[IsItemClickEnabled](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.listviewbase.isitemclickenabled)

[IsItemClickEnabled 属性](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.listviewbase.isitemclickenabledproperty)

[IsSwipeEnabled](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.listviewbase.isswipeenabled)

[IsSwipeEnabled 属性](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.listviewbase.isswipeenabledproperty)

[IsZoomedInView](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.listviewbase.iszoomedinview)

[IsZoomedInView 属性](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.listviewbase.iszoomedinviewproperty)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-01-12T17:38:40.037

**`ListBox`没有过时。**

`ListBox``ListView`与or有很多相似之处`GridView`（它们共享父类`ItemsControl`），但每个控件都面向**不同的场景**。`ListBox`最适合一般的 UI 组合，特别是当元素总是可以选择时，而`ListView`或`GridView`最适合数据绑定场景，特别是在涉及虚拟化或大型数据集的情况下。

*来源：[https ://msdn.microsoft.com/library/windows/apps/br242868](https://msdn.microsoft.com/library/windows/apps/br242868)*

# mongodb - 按 Doctrine MongoDB ODM 中的参考文档排序

> ID：13879727
> 
> 赞同：0
> 
> 时间：2012-12-14T13:36:49.540
> 
> 标签：mongodb, symfony, mongodb-php

我将 DoctrineMongoDBOBundle 与 Symfony2 一起使用。

我有一个文档产品，它有一个对其他文档价格的注释 referenceOne。

当我使用 queryBuilder 获取时，我想按价格排序。

```
$qb = $dm->createQueryBuilder('MyBundle:Product')
->field('geocoordinates')
->near('lat','lon')
->sort('hasPrice','desc') 
```

但这不起作用。也许是为了近处使用？

它取决于 Document Price 的 toString() 方法吗？

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:37:59.507

> 我有一个文档产品，它有一个对其他文档价格的注释 referenceOne。

MongoDB 中没有连接，我不相信 Doctrine 在这里进行客户端聚合和排序。因此，这无论如何都行不通。

但是排序将在`$near`命令（[http://docs.mongodb.org/manual/reference/operator/near/](http://docs.mongodb.org/manual/reference/operator/near/)）上工作，这是 Doctrine 在这种情况下应该使用的，在这里您可以看到`$near`通过命令识别的明确支持您正在使用：[https](https://github.com/doctrine/mongodb/commit/59f73cde2c15d171ff39afbf46c1a1339a51048c) ://github.com/doctrine/mongodb/commit/59f73cde2c15d171ff39afbf46c1a1339a51048c所以您的问题是链接文档，MongoDB 没有 JOIN。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T22:35:24.480

在这种情况下，`hasPrice`看起来它对应于一个方法，可能会检查`price`引用是否为空。在 ODM 查询中引用字段时，类属性的名称可能会转换为 MongoDB 字段名称（如果它们不同），但不支持方法评估。Sammaye 是正确的，Doctrine 没有客户端聚合或排序。

作为替代方案，您可以对`price.$id`字段进行排序，该字段应将结果中不存在的值组合在一起。同样，您可以使用[$exists](http://docs.mongodb.org/manual/reference/operators/#_S_exists)运算符根据文档是否被实际引用来匹配/排除。ODM 中的引用（不包括“简单”类型）存储为[MongoDBRef](http://php.net/manual/en/class.mongodbref.php)实例，这些实例转换为带有`$id`、`$ref`和`$db`字段的对象。因此，您可以像查询文档中的任何其他字段一样查询这些值。

# bash - 在屏幕上打印 bash 中的长科学变量

> ID：13879729
> 
> 赞同：1
> 
> 时间：2012-12-14T13:36:50.710
> 
> 标签：bash

我试图在 bash 中回显一个变量

```
var1=1
var2=0.25471686e+03 
```

像这样

```
echo "LHAPDF::alphasPDF($var1*$var2)"

LHAPDF::alphasPDF(1*
0.25471686e+03^2); 
```

所以，我的问题是，对于 var2 中的长科学数字，它会将结果打印成两行......我该如何避免它？

我想成为：

```
LHAPDF::alphasPDF(1*0.25471686e+03^2); 
```

# visual-studio - Parallel Nsight 2.2 不适用于 Optimus（我认为）

> ID：13879730
> 
> 赞同：0
> 
> 时间：2012-12-14T13:36:51.943
> 
> 标签：visual-studio, nvidia, nsight

这个周末我买了一个新笔记本，开始安装我所有的开发软件。我在用着：

*   视窗 8
*   英伟达 GeForce 驱动程序 306.97
*   微软视觉工作室 2010, 10.0.3
*   nVIDIA Parallel NSight 2.2.0.12313 (+ CUDA Toolkit 4.2)
*   Microsoft DirectX SDK 2010 年 6 月
*   英伟达 DirectX 11 SDK
*   英伟达 DirectX 10 SDK

当我尝试使用着色器调试器时，问题就开始了。我测试了大多数 Microsoft 的 DirectX 10 和 11 示例，它们在屏幕上出现任何窗口之前就崩溃了，nVIDIA 的例子也是如此。Windows 日志报告了这一点（抱歉是葡萄牙语）：

```
Nome do aplicativo com falha: HDAO10.1.exe, versão: 0.0.0.0, carimbo de data/hora: 0x50c75043
Nome do módulo com falha: Nvda.Graphics.Interception.100.dll, versão: 0.0.0.0, carimbo de data/hora: 0x509c20dc
Código de exceção: 0xc0000005
Deslocamento da falha: 0x006eb3f0 
```

起初我并没有怀疑 Optimus，因为这些示例在 Visual Studio 调试器上正常运行，甚至显示“GeForce GTX 660M”作为图形适配器。我还在我拥有的 cuBLAS 程序上运行了 CUDA 调试会话，一切正常，我使用 NSight Analysis 对程序进行了概要分析，也没有问题，GK 架构可用的所有可能统计数据都在那里。

当我尝试运行 DirectX 9 示例时，问题的有趣部分出现了，尽管它有效，但 NSight 监视器指责以下内容：“并非所有 NSight 功能都支持在非 NVIDIA GPU 上”，这让我相信它是相关的到集成 GPU。问题是 DirectX 9 示例和以前一样，清楚地将“GeForce GTX 660M”显示为图形适配器。

我在 NVidia 论坛和这里都看到了类似的主题，但它们没有解决并被放弃。我真的不知道问题的确切来源，如果它与 Optimus 或 Windows 8 相关，因为我找不到关于该主题的任何结论性讨论。我想知道是否有人提出了解决方案，或者至少对此问题进行了解释。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T02:02:47.377

Nsight Graphics 调试不支持 Optimus 目标。当前版本也不正式支持 Windows 8。对你来说，擎天柱就是原因。

# javascript - 标签数组Javascript Slider的语法错误

> ID：13879738
> 
> 赞同：0
> 
> 时间：2012-12-14T13:37:18.263
> 
> 标签：javascript, syntax, input, tags, slider

如果我有这个滑块的输入必须有一个数组作为 id tag ，我如何在我初始化和构建滑块的脚本上调用标签？如果输入不是数组，则此代码有效，但我需要“数量”是数组。

```
/////////////////////SLIDER !!!!!!!!!!!!!!!!!!!!!!!!!!! 

< !DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
   < script>

    var valueslider= "<?= $AnswerValue ?>";
    var mysliderdef= valueslider.split(";");
          var len = mysliderdef.length-1;
                    var i =0;
                        var qid="<?= $QuestionID ?>";
                    var answerid="<?= $AnswerID?>";
                    **$( "#amount"+qid).**val( mysliderdef[0]);//<-My tag name problem

                    $( "#slider" ).slider({ 
                    min: 1,
                    max: mysliderdef.length,                                        
                    slide: function( event, ui ) {

                    **$( "#amount"+qid).**val( mysliderdef[ui.value-1]); //<- My tag name problem                       
                                            }//end slide event
                                            });//end slider ini method builder

                });// end JavaScript document function  

< /script>

    <!--SLIDER-->   
        <?php if($row_questionset['Constructor']=="Slider"){?> 
```

< input type="text" **id="amount< ?= $row_Answer['QuestionIDFK'];?>[]"** name="amount[]" />

```
 < div id="slider" name="<?php echo $row_Answer['AnswerValue']; ?>" >< /div>
                                            <?php }  ?>     

                                            <?php }  ?> 
                        <!--/SLIDER--> 
```

我试过了

```
$( "#amount"+qid+[]).val( mysliderdef[ui.value-1]); 

$( "#amount"+qid[]).val( mysliderdef[ui.value-1]); 

 var qid="<?= $QuestionID ?>"[];
$( "#amount"+qid).val( mysliderdef[ui.value-1]); 
```

我该如何编写这种语法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:13:47.020

不要混合使用 JavaScript 和 PHP，否则你会发疯的——永远无法确定何时执行逻辑的哪一部分。

您的问题是您在一个循环中回显了许多段落和滑块 div。请注意，您为元素提供的 id 在整个文档中必须是唯一的。您已使用计数器值正确修改了输入 id：（`id="amount<?= $row_Answer['QuestionIDFK'];?>[]"`省略`[]`，顺便说一句），但没有为`id="slider"`. 也可以在那里使用问题 ID。

现在使用类似的`answervalue`。不要在 JS 代码中间直接输出问题和答案 ID，而在 JSON 配置对象中只输出一次（使用[`json_encode`](http://php.net/manual/en/function.json-encode.php)）。此配置对象应包含所有必要的值，按 questionid 排序。用 循环遍历该对象[`$.each`](http://api.jquery.com/jQuery.each/)，并使用相应的值初始化滑块（具有唯一 ID 的滑块）。

# c# - 处理未处理的异常：System.Net.WebException：请求超时？

> ID：13879739
> 
> 赞同：0
> 
> 时间：2012-12-14T13:37:19.243
> 
> 标签：c#, xamarin.android, monodevelop

我在我的应用程序中使用网络引用，但出现以下异常。

我使用了下面的代码。

`obj`是我的网络参考对象。它不`obj`直接采用这就是我为此使用变量的原因。但它仍然无法正常工作，它会自动将我带到以前的活动。

```
var url=obj.ToString();
            // Create a new WebRequest Object to the mentioned URL.
            WebRequest myWebRequest=WebRequest.Create(url);
            Console.WriteLine("\nThe Timeout time of the request before setting is : {0} milliseconds",myWebRequest.Timeout);

            // Set the 'Timeout' property in Milliseconds.
            myWebRequest.Timeout=10000;

            // This request will throw a WebException if it reaches the timeout limit before it is able to fetch the resource.
            WebResponse myWebResponse=myWebRequest.GetResponse(); 
```

> 未处理的异常：System.Net.WebException：请求
> 在 System.Net.HttpWebRequest.EndGetResponse (IAsyncResult asyncResult) [0x00000] in :0 在 System.Net.HttpWebRequest.GetResponse () [0x00000] 在 System.0 处超时。 Web.Services.Protocols.WebClientProtocol.GetWebResponse（System.Net.WebRequest 请求）[0x00000] 在：0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:46:51.953

它达到了您的超时时间，这意味着它没有及时从它调用的 URL 中得到响应。

在浏览器中检查 URL。检查它是否返回任何东西以及需要多长时间。

确保您不需要配置代理。

# android - 如何在圆弧中画一条连接中心和圆周的直线

> ID：13879744
> 
> 赞同：4
> 
> 时间：2012-12-14T13:37:30.460
> 
> 标签：android, android-canvas

我有一个自定义视图，可以在其中绘制弧线。现在我还需要画一条连接中心和圆周的线，并且应该正好在弧的中间。

现在我知道在 android canvas 中画线的代码相当简单

但它不涉及角度，弧总是使用角度来绘制自己。

所以我可以在与圆弧相同的方向上画线吗？

我在这里清楚还是需要解释更多？

请帮忙。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-14T15:23:24.190

计算起点和终点。

```
private class MView extends View {
    private Paint mPaint;
    private RectF mRect;
    private int mCenterX = 150;
    private int mCenterY = 150;

    public MView(Context context) {
        super(context);
        mPaint = new Paint();
        mPaint.setColor(Color.BLACK);
        mPaint.setStyle(Style.STROKE);
        mRect = new RectF(0, 0, mCenterX * 2, mCenterY * 2);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        float startAngle = 30;
        float sweepAngle = 60;

        canvas.drawArc(mRect, startAngle, sweepAngle, true, mPaint);
        float startX = mCenterX;
        float startY = mCenterY;
        float radius = mCenterX;
        float angle = (float) ((startAngle + sweepAngle / 2) * Math.PI / 180);
        float stopX = (float) (startX + radius * Math.cos(angle));
        float stopY = (float) (startY + radius * Math.sin(angle));

        canvas.drawLine(startX, startY, stopX, stopY, mPaint);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-26T08:04:43.943

这是我根据上面的答案得出的结论：

```
 for (int i = 0; i < numOfDividing; i++) {
        angle = i * (360 / numOfDividing);

        Point aPoint = new Point(
                (int) (x0 + (radius) * Math.cos(Math.toRadians(angle))),
                (int) (y0 + (radius) * Math.sin(Math.toRadians(angle)))
        );
        //Timber.d("Point %d : %d, %d", i, aPoint.x, aPoint.y);
        points.add(aPoint);
    } 
```

# windows-7 - USB专用设备

> ID：13879749
> 
> 赞同：0
> 
> 时间：2012-12-14T13:37:43.223
> 
> 标签：windows-7, usb

我只想让给定的设备在我的 Windows 7 USB 端口上工作。在任何 USB 端口上插入时，其他任何东西都不应该工作。

有没有人有这种需求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:42:19.297

您可以使用策略在 Windows 7 中执行此操作。

[http://blogs.catapultsystems.com/IT/archive/2010/02/07/windows-7-restricting-and-securing-usb-storage-devices.aspx](http://blogs.catapultsystems.com/IT/archive/2010/02/07/windows-7-restricting-and-securing-usb-storage-devices.aspx)

# jakarta-ee - 如何将 Servlet 的 URL 传递给 Java 类？

> ID：13879750
> 
> 赞同：0
> 
> 时间：2012-12-14T13:37:52.020
> 
> 标签：jakarta-ee

我想将 servlet (MyServlet.java) 的 URL 传递给 java 类 (Test.java)。Test.java 位于 WEB-INF 文件夹 lib 中的 Project.jar 中。所以我试图将 Servlet URL 传递给 Test.java

```
 import projct.Test;

    public class MyServlet extends HttpServlet {

        @Override
        public void init() throws ServletException {..}                

        @Override
        public void destroy() {..}

        @Override
        protected void doGet(HttpServletRequest request,
                HttpServletResponse response)
                throws ServletException, IOException {
            processRequest(request, response);
        }

        @Override
        protected void doPost(HttpServletRequest request,
                HttpServletResponse response)
                throws ServletException, IOException {
            processRequest(request, response);
        }

        protected void processRequest(HttpServletRequest request,
                HttpServletResponse response)
                throws ServletException, IOException {

             new Test().setServleturl(request.getRequestURL().toString());
             request.getRequestDispatcher("/index.html").forward(request, response);

        }
    } 
```

Test.java 类如下所示：

```
 public class Test {
        private static String var;

        public static String getVar() {
            return var;
        }

        public static void setVar(String var) {
            Test.var = var;
        }    
    } 
```

在部署之后是 var 的值仍然为空。

我究竟做错了什么？以及如何将 MyServlet.java 的 URL 写入 Test.java 的 var 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:52:08.313

我认为这`setServleturl()`实际上是`setVar()`，因为它不会编译。

当然部署后为空。`processRequest()`仅在处理请求时调用。向您的 servlet 发出 HTTP 请求，代码将被执行。

也就是说，你所拥有的似乎是一个非常糟糕的主意，而且它不是线程安全的（`setVar()`并且`getVar()`应该是同步的）。此外，这些方法应该使用`Test.setVar()`，而不是调用`new Test().setVar()`，因为它们是静态方法。你想达到什么目的？

编辑：似乎问题是在部署时从 WEB-INF 读取文件。为此，请使用[ServletContextListener](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html)，并在其`contextInitialized()`方法中从事件中获取 servlet 上下文，然后调用`servletContext.getResourceAsStream("/WEB-INF/theFileToLoad")`.

# java - 需要从java调用c库

> ID：13879751
> 
> 赞同：1
> 
> 时间：2012-12-14T13:37:53.843
> 
> 标签：java, swing, java-native-interface

我在 Swing 中开发了一个 JAVA GUI。它将从用户那里获取输入文件路径并将其发送到本机代码（C 库）。

C 函数将进行大量分析并将结果存储在缓冲位置。我的要求是从 Java 调用本机代码，并用分析过的数据填充 Swing GUI 组件（表、树等）。

我已经通过JNI，但我不明白。请就此提出建议（有关 JNI 或任何其他解决方案的更好文档）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:53:03.743

JNI 可能是要走的路，也许你只需要一个更简单的例子。试试这个：[https ://blogs.oracle.com/moonocean/entry/a_simple_example_of_jni](https://blogs.oracle.com/moonocean/entry/a_simple_example_of_jni)

# android - 在 Android 中使用 MQTT 的独特主题

> ID：13879755
> 
> 赞同：2
> 
> 时间：2012-12-14T13:38:04.313
> 
> 标签：android, mqtt

我正在尝试使用 Mosquitto Broker 和 Android 进行 MQTT。这是一个非常酷的协议，速度非常快。我现在仍在记录如何创建独特的主题。我可以有几个主题和客户来听他们，但我需要知道如何为每个主题和客户提供独特的主题和客户。我可以动态创建主题吗？现在我正在听“硬编码”的主题。如果您有链接或想法就足够了。我还在谷歌搜索..谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T23:33:15.247

MQTT 中的所有主题都设计为动态的——尽管并非所有代理都支持动态创建主题。

这些资源可能有用：

[http://mqtt.org/wiki/doku.php/mqtt_on_the_android_platform](http://mqtt.org/wiki/doku.php/mqtt_on_the_android_platform)

[http://mqtt.org/wiki/doku.php/are_topics_dynamic](http://mqtt.org/wiki/doku.php/are_topics_dynamic)

# java - Java ArrayList 内存问题

> ID：13879756
> 
> 赞同：0
> 
> 时间：2012-12-14T13:38:05.577
> 
> 标签：java, memory-management, garbage-collection

我有以下代码：

```
 result = binding.downloadData(sourceURLString.replace("{CAT_ID}", catId), Data.class);

  ArrayList<Data> mAllProducts = result.getProducts();
  cloneList(mAllProducts);
  System.gc(); 
```

这是 mAllProducts ArrayList 的深层副本

```
 static List<Data> clone;
  public static void cloneList(ArrayList<Data> list) {
    clone = new ArrayList<Data>();
    for(Data item: list){ 
        clone.add(new Data(item));
         }
 } 
```

数据构造器：

```
 public Data(Data item2) {
    this.imageUrl = item2.imageUrl;
                   *
                   *
  } 
```

我的问题是：

1.  垃圾收集器会收集到mAllProducts 数组列表吗？
2.  克隆列表是按值传递的 ArrayList 吗？
3.  如果第二个问题的答案是肯定的，这意味着克隆数组列表没有对内存的引用？
4.  最后，如果第二个问题的答案是肯定的，这意味着它只会在系统使用的时间停留在内存中，然后将被垃圾收集？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T13:41:08.160

1）无法知道，您的 gc 调用只是 JVM 尝试执行收集的建议。

2) Java 中的一切都是按值传递的。

3）我不明白你的意思。但是您的克隆，假设它为列表创建新项目，并且这些项目不共享对任何对象的引用，则与原始列表完全分开。像 int 这样的原始值是不可变的，它只是您需要担心的对象实例。看来您正在使用复制构造函数，因此要格外小心复制每个项目包含的任何对象，以及这些子项可能包含的任何项目；你的副本需要很深。

4) 我不明白你的意思。如果您没有对原始文件的任何引用，它将有资格在下次 GC 运行时进行收集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T13:43:04.823

> 垃圾收集器会收集到mAllProducts 数组列表吗？

仅当 1) 垃圾收集器决定这样做和 2) 当它超出范围时

> 克隆列表是按值传递的 ArrayList 吗？

是的

> 如果第二个问题的答案是肯定的，这意味着克隆数组列表没有对内存的引用？

绝对需要对内存中某个点的引用，否则它不能存在于逻辑系统（即计算机）中。

> 最后，如果第二个问题的答案是肯定的，这意味着它只会在系统使用的时间停留在内存中，然后将被垃圾收集？

垃圾收集器会在认为合适时再次收集它。

# jakarta-ee - 自定义@service注解

> ID：13879763
> 
> 赞同：1
> 
> 时间：2012-12-14T13:38:24.067
> 
> 标签：jakarta-ee

```
I tried with xml configuration it is working fine.I am trying to customize @service tag for RMI.I created a jar with the classes, by the below link.I got the code from the below link.
        https://github.com/JamesEarlDouglas/barebones-spring-mvc/tree/master/reference/spring-remoting-annotation. 
```

添加了客户端代码。我没有创建 httpinvoker 服务 bean，而是通过 jar 创建 bean 并使用 @service annotaion 注释类。当我启动服务器时，我没有在我的 jar 类中获取日志。所以可能是我的 jar 在运行时没有加载并给我错误。

```
 My code:
    Client side :

    1) web.xml: Code for web.xml

          <servlet>
                <servlet-name>remoting</servlet-name>
                <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
                <load-on-startup>1</load-on-startup>
            </servlet>

            <servlet-mapping>
                <servlet-name>remoting</servlet-name>
                <url-pattern>/remoting/*</url-pattern>
            </servlet-mapping>`

    2) remoting-servlet.xml: Code for remoting servlet

        <?xml version="1.0" encoding="utf-8"?>
         <beans xmlns="http://www.springframework.org/schema/beans"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
            xmlns:p="http://www.springframework.org/schema/p"
             xmlns:context="http://www.springframework.org/schema/context"
            xsi:schemaLocation="http://www.springframework.org/schema/beans ./xsd/spring-beans-3.0.xsd
                                http://www.springframework.org/schema/context ./xsd/spring-context-3.0.xsd">

                <context:component-scan base-package="com.apple.*" />  

                <bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping"></bean>
                <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter" />

                <bean id="viewResolver"
                        class="org.springframework.web.servlet.view.InternalResourceViewResolver"
                        p:prefix="/WEB-INF/jsp/" p:suffix=".jsp" />

            </beans>

    3) Bean class:Code forbean class
        package com.apple.helloClientBean;

        import java.io.Serializable;

        public class ClientBean implements Serializable{

            /**
             * 
             */
            private static final long serialVersionUID = 1L;
            private String fName;
            private String lName;

            public void setfName(String fName) {
                this.fName = fName;
            }
            public String getfName() {
                return fName;
            }
            public void setlName(String lName) {
                this.lName = lName;
            }
            public String getlName() {
                return lName;
            }
        }

    4) Interface: Code for interface

        package com.apple.helloworldService;

        import com.apple.helloClientBean.ClientBean;

        public interface HelloWorldClient {

            public ClientBean getDetails();
        }

    5) class :Code for class
        package com.apple.helloworldServiceImpl;

        import org.springframework.remoting.Service;
        import org.springframework.remoting.ServiceType;
        import org.springframework.stereotype.Component;
        import org.springframework.web.bind.annotation.RequestMapping;
        import org.springframework.web.bind.annotation.RequestMethod;

        import com.apple.helloClientBean.ClientBean;
        import com.apple.helloworldService.HelloWorldClient;

        @Component("HelloWorldClient")
        @RequestMapping("/getRmiDetails")
        @Service(serviceInterface = HelloWorldClient.class,serviceType = ServiceType.HTTP)
        public class HelloWorldClientImpl implements HelloWorldClient{

            @RequestMapping(method = RequestMethod.GET)
            public ClientBean getDetails(){
                System.out.println("I am in HelloWorldClientImpl");
                ClientBean cBean =  new ClientBean();
                cBean.setfName("MahaveerP");
                cBean.setlName("Agrawal");
                return cBean;
            }
        }

 1\. Client application context:

    <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:context="http://www.springframework.org/schema/context"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
        xmlns:p="http://www.springframework.org/schema/p"
            xsi:schemaLocation="http://www.springframework.org/schema/beans ./xsd/spring-beans-3.0.xsd
            http://www.springframework.org/schema/context ./xsd/spring-context-3.0.xsd">

            <context:component-scan base-package="com.apple.*" />  

            <bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping"></bean>
            <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter" />

            <bean id="ProxyHelloWorld" class="org.springframework.remoting.httpinvoker.HttpInvokerProxyFactoryBean">
                <property name="serviceUrl">
                <value>http://localhost:8080/HelloWorldClient/remoting/getRmiDetails</value></property>
                <property name="serviceInterface" value="com.apple.helloworldService/HelloWorldClient"/>
            </bean> 

            <bean id="viewResolver"
                    class="org.springframework.web.servlet.view.InternalResourceViewResolver"
                    p:prefix="/WEB-INF/jsp/" p:suffix=".jsp" />

    </beans>

    2\. client class:
    package com.apple.HelloWorldMTImpl;

    import org.springframework.beans.factory.annotation.Autowired;
    import org.springframework.stereotype.Component;
    import org.springframework.web.bind.annotation.RequestMapping;
    import org.springframework.web.bind.annotation.RequestMethod;

    import com.apple.HelloWorldMT.HelloWorldMT;
    import com.apple.helloClientBean.ClientBean;
    import com.apple.helloworldService.HelloWorldClient;

    @Component
    @RequestMapping("/getRMI")
    public class HelloWorldMTImpl implements HelloWorldMT{

        @Autowired
        HelloWorldClient hello = null;

        @Override
        @RequestMapping(method = RequestMethod.GET)
        public void getRmiDetails() {
            System.out.println("i am in Helloworld MT");
            ClientBean cb = hello.getDetails();
            System.out.println("fName: "+cb.getfName()+"  "+ "lName: "+cb.getlName());
        }
    }

    3\. Client web.xml
    <web-app id="WebApp_ID" version="2.4" 
        xmlns="http://java.sun.com/xml/ns/j2ee" 
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

        <context-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>
                /WEB-INF/context/applicationContext.xml
            </param-value>
        </context-param>

        <context-param>
            <param-name>webAppRootKey</param-name>
            <param-value>
                com.apple.HelloWorldMT
            </param-value>
        </context-param>

            <!-- Listeners -->
        <listener>
            <listener-class>org.springframework.web.util.WebAppRootListener</listener-class>
        </listener>

        <listener>
            <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
        </listener>

        <servlet>
            <servlet-name>ViewRendererServlet</servlet-name>
            <servlet-class>org.springframework.web.servlet.ViewRendererServlet</servlet-class>
            <load-on-startup>1</load-on-startup>
        </servlet>

        <servlet-mapping>
            <servlet-name>ViewRendererServlet</servlet-name>
            <url-pattern>/WEB-INF/servlet/view</url-pattern>
        </servlet-mapping>

        <servlet>
            <servlet-name>InitialScreenServlet</servlet-name>
            <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
            <load-on-startup>1</load-on-startup>
        </servlet>

        <servlet-mapping>
            <servlet-name>InitialScreenServlet</servlet-name>
            <url-pattern>/*</url-pattern>
        </servlet-mapping>

    </web-app>

    I am getting the below exception:

        18:59:29,829 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[localhost].[/HelloWorldMT].[InitialScreenServlet]] Servlet.service() for servlet InitialScreenServlet threw exception: java.io.IOException: Did not receive successful HTTP response: status code = 405, status message = [Method Not Allowed]
            at org.springframework.remoting.httpinvoker.SimpleHttpInvokerRequestExecutor.validateResponse(SimpleHttpInvokerRequestExecutor.java:179) [:3.1.1.RELEASE]
            at org.springframework.remoting.httpinvoker.SimpleHttpInvokerRequestExecutor.doExecuteRequest(SimpleHttpInvokerRequestExecutor.java:92) [:3.1.1.RELEASE]
            at org.springframework.remoting.httpinvoker.AbstractHttpInvokerRequestExecutor.executeRequest(AbstractHttpInvokerRequestExecutor.java:136) [:3.1.1.RELEASE]
            at org.springframework.remoting.httpinvoker.HttpInvokerClientInterceptor.executeRequest(HttpInvokerClientInterceptor.java:192) [:3.1.1.RELEASE]
            at org.springframework.remoting.httpinvoker.HttpInvokerClientInterceptor.executeRequest(HttpInvokerClientInterceptor.java:174) [:3.1.1.RELEASE]
            at org.springframework.remoting.httpinvoker.HttpInvokerClientInterceptor.invoke(HttpInvokerClientInterceptor.java:142) [:3.1.1.RELEASE]
            at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172) [:3.1.1.RELEASE]
            at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202) [:3.1.1.RELEASE]
            at $Proxy120.getDetails(Unknown Source) at com.apple.HelloWorldMTImpl.HelloWorldMTImpl.getRmiDetails(HelloWorldMTImpl.java:23) [:]
            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [:1.6.0_31]
            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [:1.6.0_31]
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [:1.6.0_31]
            at java.lang.reflect.Method.invoke(Method.java:597) [:1.6.0_31]
            at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176) [:3.1.1.RELEASE]
            at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436) [:3.1.1.RELEASE]
            at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424) [:3.1.1.RELEASE]
            at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923) [:3.1.1.RELEASE]
            at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852) [:3.1.1.RELEASE]
            at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882) [:3.1.1.RELEASE]
            at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778) [:3.1.1.RELEASE]
            at javax.servlet.http.HttpServlet.service(HttpServlet.java:734) [:1.0.0.Final]
            at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [:1.0.0.Final]
            at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:324) [:6.1.0.Final]
            at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:242) [:6.1.0.Final]
            at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [:6.1.0.Final]
            at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [:6.1.0.Final]
            at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:181) [:6.1.0.Final]
            at org.jboss.modcluster.catalina.CatalinaContext$RequestListenerValve.event(CatalinaContext.java:285) [:1.1.0.Final]
            at org.jboss.modcluster.catalina.CatalinaContext$RequestListenerValve.invoke(CatalinaContext.java:261) [:1.1.0.Final]
            at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:88) [:6.1.0.Final]
            at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:100) [:6.1.0.Final]
            at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:159) [:6.1.0.Final]
            at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [:6.1.0.Final]
            at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158) [:6.1.0.Final]
            at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [:6.1.0.Final]
            at org.jboss.web.tomcat.service.request.ActiveRequestResponseCacheValve.invoke(ActiveRequestResponseCacheValve.java:53) [:6.1.0.Final]
            at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:362) [:6.1.0.Final]
            at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [:6.1.0.Final]
            at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:654) [:6.1.0.Final]
            at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:951) [:6.1.0.Final]
            at java.lang.Thread.run(Thread.java:680) [:1.6.0_31]

        Thanks & Regards
        Mahaveer 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:34:46.237

你先检查几件事。

1.  尝试`http://localhost:8080/HelloWorldClient/remoting/getRmiDetails`通过您的浏览器访问该链接，并确保它完成了它需要做的事情。
2.  如果它有效，那么您至少可以将问题与您的客户隔离开来。

在您的客户端应用程序上下文 xml 中，您声明

`<property name="serviceInterface" value="com.apple.helloworldService/HelloWorldClient"/>`

相反，这是错误的，

`<property name="serviceInterface" value="com.apple.helloworldService.HelloWorldClient"/>`

然后对您的客户端进行类似的检查，尝试通过浏览器访问您的客户端链接。

# mysql - 查询数据库并显示

> ID：13879765
> 
> 赞同：1
> 
> 时间：2012-12-14T13:38:31.267
> 
> 标签：mysql, codeigniter, fetch

我使用`CodeIgniter 2.1.3`和。`PHP``MySQL`

您好，我想显示数据库中的数据。我总是按 显示`foreach($results as $data)`，但现在我想分几步显示所有数据。显示第一条记录，当用户单击时`next`显示数据库中的下一行。我现在必须使用 mysql_fetch_row() 但我不知道该怎么做......这是我的模型：

```
public function play($limit, $start) {
    $this->db->limit($limit, $start);
    $query = $this->db->get("quiz");
if ($query->num_rows() > 0) {
        foreach ($query->result() as $row) {
            $data[] = $row;
        }
        return $data;
    }
    return false;
} 
```

控制器：

```
public function index()
{
    $config = array();
    $config["base_url"] = base_url() . "index.php/main_menu/Quiz/index";
    $config["total_rows"] = $this->quiz_model->record_count();
    $config["per_page"] = 11;
    $config["uri_segment"] = 4;

    $this->pagination->initialize($config);
    $page = ($this->uri->segment(4)) ? $this->uri->segment(4) : 0;
$data["results"] = $this->quiz_model->play($config["per_page"], $page);
    $data["links"] = $this->pagination->create_links();
    $this->load->view('left_column/quiz_open', $data);
} 
```

分页并不重要。

并查看：

```
<form>
    <?php
    if (empty($results)) {

    }
    else {
    foreach($results as $data) { ?>

        <label style='width:450px;'> <b>  &nbsp <?php echo $data->pytanie?> </b> </label>
        <label style='width:300px;'> <input type="radio" name="Wiek" value=<?php echo $data->odp1 ?> /> <?php echo $data->odp1 ?> </label>
        <label style='width:300px;'> <input type="radio" name="Wiek" value=<?php echo $data->odp2 ?> /> <?php echo $data->odp2 ?> </label>
        <label style='width:300px;'> <input type="radio" name="Wiek" value=<?php echo $data->odp3 ?> /> <?php echo $data->odp3 ?> </label> 

        <?php }
        }?>
        <label style='width:300px;'>    <input type="submit" name="Wyslij" id="Wyslij" value="&nbsp Wyślij &nbsp"/> </label> 
        </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:18:33.590

codeIgniter 提供了一个内置的分页类。您可以在用户指南中找到它。

在函数中定义一个起始索引变量，您希望在其中使用分页为零。

```
public function pagination($start_index = 0)
{

 $result = $this->model->get_results($data); //this $data is the argument which you are passing to your model function. If you are using database to get results array.

 $items_per_page = 10;   //this is constant variable which you need to define

 $filtered_result = array_splice($result, $start_index, ITEM_PER_PAGE_USERS);

 $model['$filtered_result'] = $filtered_result;

 $total_rows = count($result);

 $model['page_links'] = create_page_links (base_url()."/controlelr_name/pagination",ITEM_PER_PAGE_USERS, $total_rows);

 $this->load->view('controller_name/view_file_name', $model);
} 
```

这是分页的通用功能。您可以将此函数保存在一个帮助文件中，您可以在其中保存所有通用函数。

```
function create_page_links($base_url, $per_page, $total_rows)
{

 $CI = & get_instance();
 $CI->load->library('pagination');

 $config['base_url'] = $base_url;
 $config['total_rows'] = $total_rows;
 $config['per_page'] = $per_page; 

 $CI->pagination->initialize($config); 

 return $CI->pagination->create_links();
} 
```

此创建页面链接功能是一个通用功能......更多解释请查看用户指南中的分页类......

# android - android.os.NetworkOnMainThreadException 和非阻塞套接字

> ID：13879767
> 
> 赞同：2
> 
> 时间：2012-12-14T13:38:35.153
> 
> 标签：android, android-asynctask, nio, networkonmainthread

我在非阻塞模式下使用 Java nio 套接字，但是当我调用 write 时，我仍然得到 NetworkOnMainThreadException。

```
java.nio.channels.SocketChannel fd = Network.createTcpSocket();
java.nio.channels.SocketChannel.open();
java.net.Socket socket = fd.socket();
socket.setTcpNoDelay(true);
socket.setKeepAlive(true);
fd.configureBlocking(false);

//.. conect the socket

int ret = fd.write(data);
if(ret == 0)
{
  // It will block.
} 
```

我希望这可以工作，因为套接字不会阻塞，并且在调用需要阻塞的情况下只返回 0。但我仍然收到 NetworkOnMainThreadException

```
12-07 18:50:25.704: W/dalvikvm(14931): threadid=1: thread exiting with uncaught exception (group=0x40c501f8)
12-07 18:50:25.834: E/AndroidRuntime(14931): FATAL EXCEPTION: main
12-07 18:50:25.834: E/AndroidRuntime(14931): android.os.NetworkOnMainThreadException
12-07 18:50:25.834: E/AndroidRuntime(14931):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
12-07 18:50:25.834: E/AndroidRuntime(14931):    at libcore.io.BlockGuardOs.sendto(BlockGuardOs.java:168)
12-07 18:50:25.834: E/AndroidRuntime(14931):    at libcore.io.IoBridge.sendto(IoBridge.java:477)
12-07 18:50:25.834: E/AndroidRuntime(14931):    at java.nio.SocketChannelImpl.writeImpl(SocketChannelImpl.java:369)
12-07 18:50:25.834: E/AndroidRuntime(14931):    at java.nio.SocketChannelImpl.write(SocketChannelImpl.java:327 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-09-22T16:34:12.020

Android 抛出 NetworkOnMainThreadException 的理由
[https://developer.android.com/reference/android/os/NetworkOnMainThreadException](https://developer.android.com/reference/android/os/NetworkOnMainThreadException)

在文档“响应性设计”中详细说明了
[https://developer.android.com/training/articles/perf-anr](https://developer.android.com/training/articles/perf-anr)

但是 Android 错误地假设所有网络 IO 都会导致 UI 无响应。

根据定义，Java 非阻塞 NIO（和 Java NIO.2）通道方法不会阻塞，因此不会导致 UI 无响应。
[https://developer.android.com/reference/java/nio/channels/SelectableChannel#bm](https://developer.android.com/reference/java/nio/channels/SelectableChannel#bm)

> 可选通道处于阻塞模式或非阻塞模式。在阻塞模式下，在通道上调用的每个 I/O 操作都会阻塞，直到完成。在非阻塞模式下，I/O 操作永远不会阻塞......

遗憾的是，Android 没有认识到这一点，因此导致开发人员在 UI 和 Java 非阻塞 NIO 网络操作之间添加了不必要的背景抽象层（AsyncTask 是最笨拙的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T13:41:02.373

这是正常的行为。我猜 Socket 类里面有一个检查，不管它是阻塞的还是非阻塞的。如果线程是 UI - 抛出 NetworkOnMainThreadException

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T13:42:06.817

[android.os.NetworkOnMainThreadException ：](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

> 当应用程序尝试在其主线程上执行网络操作时引发的异常。

使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)从 Ui Thread 制作网络相关任务

或者您正在使用**API LEVEL 9** ，然后在发出网络请求之前在方法中为 Current Activity设置[StrictMode ：](http://developer.android.com/reference/android/os/StrictMode.html)`onCreate()`

```
 StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder()
   .detectNetwork() // or .detectAll() for all detectable problems
   .penaltyDialog()  //show a dialog
   //.permitNetwork() //permit Network access 
   .build()); 
```

# assembly - mips 架构直接涉及哪些领域？

> ID：13879769
> 
> 赞同：1
> 
> 时间：2012-12-14T13:38:58.693
> 
> 标签：assembly, mips, computer-architecture

如果我们比较 MIPS 的 R 型和 I 型指令。然后，如果我们查看它并告诉在 I 型指令中哪些 R 型字段并转换为立即数，那么它们将是哪些字段？R-type 中用于存储I-type 立即数的字段是rd、shamt 和function。所以我们应该说R-type的前3个字段用于存储立即数，还是应该说R-type的后三个字段用于存储立即数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T14:04:47.163

要回答这个问题，您必须查看 I-Type 和 R-Type 指令的指令格式，以查看 I-Type 指令中的立即字段与 R-Type 中相应字段（根据位置）的字段的交集指示：

I-Type 指令具有以下格式：

*   位 31-26：操作码
*   位 25-21：源寄存器 ( `rs`)
*   位 20-16：目标寄存器 ( `rt`)
*   位 15-0：立即

和 R-Type 指令具有以下格式：

*   位 31-26：操作码
*   位 25-21：源寄存器 ( `rs`)
*   位 20-16：目标寄存器 ( `rt`)
*   位 15-11：目标寄存器 ( `rd`)
*   位 10-6 : 移位量 ( `shamt`)
*   位 5-0：功能

因此，用于存储立即数 I-Type 指令的位用于保存目标寄存器 ( `rd`)、移位量 ( `shamt`) 和`function`

# makefile - 警告：makefile.in 似乎忽略了 --datarootdir 设置

> ID：13879770
> 
> 赞同：3
> 
> 时间：2012-12-14T13:39:02.283
> 
> 标签：makefile, wxwidgets

尝试在 Windows XP（32 位）上配置 WxWidgets 2.9.1 时，配置脚本以以下方式结束：

```
...
config.status: creating Makefile
config.status: WARNING: Makefile.in seems to ignore the --datarootdir setting
config.status: error: cannot find input file: contrib/Makefile.in
configure: error: ./configure failed for src/tiff 
```

我确保提到的 Makefile.in 是它应该在的地方。我使用 MinGW32 进行制作。

我找到[了这个](https://answers.launchpad.net/ubuntu/+question/46882)，我试图以某种方式将它翻译成我的情况（从 Ubuntu 到 Windows），但它仍然返回相同的错误。

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T20:12:46.877

首先，警告是无害的，与问题无关。

其次，错误本身很神秘，因为该文件`src/tiff/contrib/Makefile.in`确实存在（或者至少应该检查它是否没有在您的安装中以某种方式消失）但我想我之前已经看到过这种情况，当您使用带有 DOS EOL 的文件时会发生类似的事情使用 Unix/Cygwin 工具。从文件中获取来源，`.tar.bz2`而不是`.zip`解决这个问题。

最后，我想你为什么要使用 2010 年发布的 2.9.1？真的没有理由不使用 2.9.4...

# c++ - VS 2012 不构建依赖项目

> ID：13879774
> 
> 赞同：0
> 
> 时间：2012-12-14T13:39:14.967
> 
> 标签：c++, visual-studio, visual-studio-2012

我在 Visual Studio 2012（版本 11.0.50727.1）中有两个 C++ 项目。项目 B 依赖于项目 A，通过**Project Properties > Common Properties > Framework and References**。

当我在 B 上进行重建时，项目 A 的库不会在输出目录中生成，因此 B 失败。日志显示 A 正在成功构建，但 lib 根本没有出现。

真正奇怪的是，当我执行“清理然后构建”而不是“重建”时，一切正常。同样，项目 A 可以自行构建并生成一个*.lib*。不幸的是，我必须使用的构建系统将进行“重建”，如果可能的话，我宁愿不改变它。

**我试过的**

我删除了框架引用并尝试将 lib 添加为 B 中的链接器依赖项。在这种情况下，A 仍然无法构建，所以我最终得到了一个缺少的引用。

我在 SO 和 google 上搜索了一段时间，但到目前为止还不够。

如果您遇到过类似的事情，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:02:11.107

看起来问题是 A 和 B 共享一个中间目录。使两者不同似乎已经解决了这个问题。

这是我对正在发生的事情的猜测：

1.  A 得到正确构建。
2.  B 通过“清洁”开始构建
3.  中间目录的内容是用来判断哪些文件需要从输出目录中清理出来，所以A.lib被错误的删除了
4.  未找到 A.lib

这在以前版本的 VS 中有效，因为我们之前没有启用并行构建项目，所以我假设所有项目都先清理，然后再构建。

# asp.net - 我可以用 ViewState 找出控件的原始值吗

> ID：13879776
> 
> 赞同：0
> 
> 时间：2012-12-14T13:39:22.783
> 
> 标签：asp.net, postback, viewstate

在我的 ASP.NET Web 表单中，假设我有这样的内容：

`<asp:Literal ID="Literal1" runat="server" Text="abc"></asp:Literal>`

现在说我更改了后面代码中的文本。该控件启用了视图状态，因此新的文本值在整个回发中持续存在，这正是我想要的。但在某些情况下，我想将控件重置回原始值（即“abc”），而不必在后面的代码中对其进行硬编码。因此，在不禁用视图状态的情况下，有什么方法可以检索第一次加载屏幕时控件的原始值？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:58:03.453

您可以尝试从`Page_Init`方法中的控件获取文本。视图状态稍后在页面处理管道中恢复到控制树。因此，如果您访问文本`Page_Init`并将值存储在某个合适的位置，您可以从标记 (aspx) 文件中获取值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:46:53.190

我不知道如何使用视图状态来做到这一点。但是您可以为您的站点创建一个基本页面，其中包含在加载页面时跟踪更改和存储默认值的选项。还有一个做实际检查的类。

例如：

更改跟踪器：

```
 /// <summary>
    /// Class to Track changes in a web page
    /// </summary>
    [Serializable]
    public class ChangeTracker : IDisposable
    {
        //- MEMBER VARIABLES --------------------------------------------------------------------------------------------------------

        #region Members

        private bool m_ChangesMade = false;
        private Dictionary<string, object> m_OriginalValues = new Dictionary<string, object>();
        private Dictionary<string, object> m_ChangedValues = new Dictionary<string, object>();
        private List<string> m_ControlsToIgnore = new List<string>();

        #endregion Members

        //- PROPERTIES --------------------------------------------------------------------------------------------------------------

        #region Properties

        /// <summary>
        /// Gets or Sets the Controls to Ignore (ClientID array)
        /// </summary>
        public List<string> ControlsToIgnore
        {
            get { return m_ControlsToIgnore; }
            set { m_ControlsToIgnore = value; }
        }

        /// <summary>
        /// Gets or Sets the Dictionay of Changed Values
        /// </summary>
        public Dictionary<string, object> ChangedValues
        {
            get { return m_ChangedValues; }
            set { m_ChangedValues = value; }
        }

        /// <summary>
        /// Gets or Sets the Dictionay of Original Values
        /// </summary>
        public Dictionary<string, object> OriginalValues
        {
            get { return m_OriginalValues; }
            set { m_OriginalValues = value; }
        }

        /// <summary>
        /// Gets or Sets Whether changes have been made to the control collection
        /// </summary>
        public bool ChangesMade
        {
            get
            {
                try
                {
                    return m_ChangesMade;
                }
                catch (Exception)
                {
                    throw;
                }
            }
            set { m_ChangesMade = value; }
        }

        #endregion Properties

        #region Constructor

        /// <summary>
        /// Constructor (required for serialization)
        /// </summary>
        public ChangeTracker()
        {

        }

        #endregion Constructor

        #region Methods

        /// <summary>
        /// Adds all relivant controls recursively to the list
        /// </summary>
        /// <param name="oControl">The control to add</param>
        private void AddControls(Control oControl)
        {
            try
            {
                if (oControl != null)
                {
                    //Check whether the control shoudl be ignored
                    if (!this.ControlsToIgnore.Contains(oControl.ClientID))
                    {
                        //loop recursively
                        foreach (Control aControl in oControl.Controls)
                        {
                            this.AddControls(aControl);
                        }

                        if (oControl is IEditableTextControl)
                        {
                            if (this.OriginalValues.ContainsKey(oControl.ClientID))
                            {
                                this.OriginalValues[oControl.ClientID] = (oControl as IEditableTextControl).Text;
                            }
                            else
                            {
                                this.OriginalValues.Add(oControl.ClientID, (oControl as IEditableTextControl).Text);
                            }
                        }

                        if (oControl is ICheckBoxControl)
                        {
                            if (this.OriginalValues.ContainsKey(oControl.ClientID))
                            {
                                this.OriginalValues[oControl.ClientID] = (oControl as ICheckBoxControl).Checked;
                            }
                            else
                            {
                                this.OriginalValues.Add(oControl.ClientID, (oControl as ICheckBoxControl).Checked);
                            }
                        }
                    }
                }
                else
                {
                    throw new ArgumentNullException("oControl");
                }
            }
            catch (Exception)
            {
                throw;
            }
        }

        /// <summary>
        /// Checks the controls for changes
        /// </summary>
        /// <param name="oControl">The control to check</param>
        private void CheckControl(Control oControl)
        {
            try
            {
                //Check the control should not be ignored
                if (!this.ControlsToIgnore.Contains(oControl.ClientID))
                {
                    //loop recursively
                    foreach (Control aControl in oControl.Controls)
                    {
                        this.CheckControl(aControl);
                    }

                    if (oControl is IEditableTextControl)
                    {
                        if (this.OriginalValues.ContainsKey(oControl.ClientID))
                        {
                            if (this.OriginalValues[oControl.ClientID].ToString() != (oControl as IEditableTextControl).Text)
                            {
                                if (!this.ChangedValues.ContainsKey(oControl.ClientID))
                                {
                                    this.ChangedValues.Add(oControl.ClientID, (oControl as IEditableTextControl).Text);
                                }
                                else
                                {
                                    this.ChangedValues[oControl.ClientID] = (oControl as IEditableTextControl).Text;
                                }
                                this.ChangesMade = true;
                            }
                        }
                    }
                    if (oControl is ICheckBoxControl)
                    {
                        if (this.OriginalValues.ContainsKey(oControl.ClientID))
                        {
                            if ((bool)this.OriginalValues[oControl.ClientID] != (oControl as ICheckBoxControl).Checked)
                            {
                                if (!this.ChangedValues.ContainsKey(oControl.ClientID))
                                {
                                    this.ChangedValues.Add(oControl.ClientID, (oControl as ICheckBoxControl).Checked);
                                }
                                else
                                {
                                    this.ChangedValues[oControl.ClientID] = (oControl as ICheckBoxControl).Checked;
                                }
                                this.ChangesMade = true;
                            }
                        }
                    }
                }
            }
            catch (Exception)
            {

                throw;
            }
        }

        /// <summary>
        /// Stores the default values
        /// </summary>
        ///<param name="oControl">The control to store</param>
        public void StoreDefaultValues(Control oControl)
        {
            try
            {
                //Reset the Original Values collection
                this.OriginalValues = new Dictionary<string, object>();

                this.ChangesMade = false;

                //Add all relevant controls
                this.AddControls(oControl);
            }
            catch (Exception)
            {
                throw;
            }
        }

        /// <summary>
        /// Checks the form for changes
        /// </summary>
        ///<param name="oControl">The control to check for changes</param>
        public void CheckForChanges(Control oControl)
        {
            try
            {
                //Instantiate changed values
                this.ChangedValues = new Dictionary<string, object>();

                //Reset changes made flag
                this.ChangesMade = false;

                //Check controls for changes
                this.CheckControl(oControl);
            }
            catch (Exception)
            {
                throw;
            }
        }

        /// <summary>
        /// Dispose of the object
        /// </summary>
        public void Dispose()
        {
            try
            {
                m_ChangedValues = null;
                m_ControlsToIgnore = null;
                m_OriginalValues = null;
            }
            catch (Exception)
            {
                throw;
            }
        }

        #endregion Methods

    } 
```

基础网页：

```
/// <summary>
/// Adds Extra functionality to a web page
/// </summary>
public class WebPage : System.Web.UI.Page
{

    #region Properties

    /// <summary>
    /// Gets or Sets the Change Tracker
    /// </summary>
    protected ChangeTracker ChangeTracker
    {
        get
        {
            if (Session[String.Format("ChangeTracker{0}", this.ClientID)] == null)
            {
                Session[String.Format("ChangeTracker{0}", this.ClientID)] = new ChangeTracker();
            }

            return Session[String.Format("ChangeTracker{0}", this.ClientID)] as ChangeTracker;
        }
        set
        {
            Session[String.Format("ChangeTracker{0}", this.ClientID)] = value;
        }
    }

    /// <summary>
    /// Gets or Sets whether changes have been made
    /// </summary>
    protected bool ChangesTracked
    {
        get
        {
            if (ViewState["ChangesTracked"] == null)
            {
                ViewState["ChangesTracked"] = false;
            }

            return (bool)ViewState["ChangesTracked"];
        }
        set
        {
            ViewState["ChangesTracked"] = value;
        }
    }

    #endregion Properties

    #region Events

    /// <summary>
    /// Stores the value of the controls after the load completes
    /// </summary>
    /// <param name="e">order</param>
    protected override void OnLoadComplete(EventArgs e)
    {
        try
        {
            base.OnLoadComplete(e);

            //Dont store on postback
            if (!Page.IsPostBack)
            {
                //Check whether to track changes
                if (this.ChangesTracked)
                {
                    //Store the default values
                    this.ChangeTracker.StoreDefaultValues(this);
                }
            }
        }
        catch (Exception)
        {
            throw;
        }
    }

    #endregion Events

} 
```

使用（例如在保存事件上）：

```
 //Check for changes
        base.ChangeTracker.CheckForChanges(this);

        //If changes have been made, flag as dirty
        if (base.ChangeTracker.ChangesMade)
        {
            //Do stuff
        } 
```

如您所见，初始值在页面加载完成时存储，因此它们都可用于比较，或者在您的情况下，可以重置为原始值。

# javascript - 哪种方法更适合在 html5 中实现画布？

> ID：13879778
> 
> 赞同：2
> 
> 时间：2012-12-14T13:39:28.030
> 
> 标签：javascript, html, canvas, performance

我想从效率或任何其他角度了解以下两种方法之间的区别：（这些代码是使用 HTML5 Canvas 编写的）

1.  第一个具有单独的函数，包括 drawScreen() 函数和事件处理函数，它们都调用 drawScreen()。

2.  另一个有一个函数 canvasApp()，其中包含所有函数，包括内部的 drawScreen() 以及用于处理事件的其他函数。这些函数再次调用自己内部的 drawScreen 函数。

代码很长，但如果解释不够清楚，我会放代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T13:48:16.480

这是一个相当宗教的问题。

Javascript 是一种编程语言，它结合了过程、函数和面向对象编程的概念，因此它允许在许多不同的编程范式中工作。

选项一是过程方法，二是面向对象的方法。我们现在可以无休止地讨论哪种编程范式是最好的，但我们永远不会得出结果。

您必须自己了解哪种编程风格最适合您并且最适合您的应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T13:44:26.907

听起来您要么想要一个带有参数的函数，该参数指示要调用哪个函数，要么您只想直接调用每个函数。如果我错了，请纠正我。

我个人会选择单独的选项。我看不出将它们封装在全局函数中会带来什么功能或简单性。只要功能明确定义并记录在案，我相信这可能是最好的方法。

我很乐意为您提供更详细的答案，但您将不得不对您的整体架构提供更多启发（也许使用一些伪代码）。

# php - 防止在拖动时显示图像

> ID：13879782
> 
> 赞同：1
> 
> 时间：2012-12-14T13:39:30.417
> 
> 标签：php, javascript, jquery, html

我想创建拖动上传器：

我已将图像用于 darg 区域：

我使用这个脚本来显示拖动通知：

```
<script type="text/javascript">

    $(document).ready(function() {

        $('.dargbar').bind('drop', function(e) {
            alert('yes');
        });

    });

</script> 
```

当我拖动图像时，它会成功显示消息，但会自动在浏览器中加载图像。如何停止加载图像？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T13:40:59.793

尽量[防止默认](https://developer.mozilla.org/en/docs/DOM/event.preventDefault)行为：

```
$('.dargbar').bind('drop', function(e) {
    e.preventDefault();
    alert('yes');
}); 
```

或者更受 jQuery 支持：

```
$('.dargbar').bind('drop', function(e) {
    e.originalEvent.preventDefault();
    alert('yes');
}); 
```

# eclipse - 使用自定义文件键上传 Servlet

> ID：13879784
> 
> 赞同：0
> 
> 时间：2012-12-14T13:39:30.287
> 
> 标签：eclipse, file, servlets, storage, identifier

我已经构建了一个服务器，您可以使用 Eclipse、servlet 和 jsp 将文件上传到和下载，这对我来说都是全新的。[（更多信息）](https://stackoverflow.com/questions/13849041/upload-download-servlet-server#comment19067080_13849041)。

目前上传系统使用文件名。我想以编程方式为每个文件分配一个随机密钥。使用该密钥，用户可以下载文件。这意味着将数据保存在配置文件或类似的文件中：test.txt(file) fdjrke432(filekey)。当用户输入文件密钥时，servlet 将传递文件以供下载。

为此，我尝试使用随机字符串生成器和 renameTo()。但它第一次不起作用，只有当我再次上传相同的文件时它才起作用。而且这个系统有缺陷，用户会收到文件“fdjrke432”而不是test.txt，它们的内容是一样的但是你可以看到问题。

对我的问题有任何想法、建议或解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T21:31:38.277

好吧，Sebek，我很高兴你问！这是一个非常有趣的方法，没有神奇的方法可以做到这一点。答案确实是重命名您上传的文件。但我建议在文件名前添加随机字符串；比如：fdjrke432test.txt。尝试这个：

```
filekey= RenameRandom();
 File renamedUploadFile = new File(uploadFolder +  File.separator+ filekey+ fileName);
                item.write(renamedUploadFile);
//remember to give the user the filekey 
```

和

```
 public String RenameRandom()  
{  
  final int LENGTH = 8;  
  StringBuffer sb = new StringBuffer();  
  for (int x = 0; x < LENGTH; x++)  
  {  
    sb.append((char)((int)(Math.random()*26)+97));  
  }  
  System.out.println(sb.toString());  
  return sb.toString();
} 
```

要从服务器删除或下载文件，您需要找到它，用户将输入密钥，您只需在上传文件夹中搜索以该密钥开头的文件：

```
filekey= request.getParameter("filekey");
File f = new File(getServletContext().getRealPath("") + File.separator+"data");
    File[] matchingFiles = f.listFiles(new FilenameFilter() {
        public boolean accept(File dir, String name) {
            return name.startsWith(filekey);
        }
    });    
    String newfilename = matchingFiles[0].getName();
// now delete or download newfilename 
```

# codeigniter - Codeigniter 和多个 postgre 模式

> ID：13879785
> 
> 赞同：2
> 
> 时间：2012-12-14T13:39:41.737
> 
> 标签：codeigniter, codeigniter-3

我正在使用 Codeigniter 3.0 的开发版本。

我可以看到 $db 配置有一个 Schema 属性。但它看起来不像将它用于任何自动取款机。因为我的脚本不会连接到多个模式。

有谁知道如何在 postgre 中使用多个模式设置 CI？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T17:23:49.880

这是 CI 开发人员的解决方案。 [https://github.com/EllisLab/CodeIgniter/commit/485a348a7a633d38f69a963e9f77e23077f75d11](https://github.com/EllisLab/CodeIgniter/commit/485a348a7a633d38f69a963e9f77e23077f75d11)

我建议您从 CI 系统/核心的此链接中仅下载文件夹“数据库”，并将该行添加到您的 application/config/database.php...

```
$db['default']['schema'] = 'NAME_OF_YOUR_SCHEMA'; 
```

或者，如果您使用的是数组列表，则如下所示：

```
$db['default'] = array('schema'=>'NAME_OF_YOUR_SCHEMA'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-13T09:22:36.220

像这样的事情让我发疯，特别是迁移。

对我有用的是：

```
$this->db->query('SET search_path TO <schema>'); 
```

例如，在 up() 方法的开始和结束处：

```
public function up()
{
    $this->db->query('SET search_path TO <custom_schema>');
    ...
    # Database stuff here
    ...
    $this->db->query('SET search_path TO public'); //where migrations table exists
} 
```

尝试这样做以避免 schema.table（语法）的 pg_query() 错误，并且关系“迁移”不存在。

# c# - x64 应用程序访问 mdb 数据库

> ID：13879789
> 
> 赞同：3
> 
> 时间：2012-12-14T13:40:07.103
> 
> 标签：c#, ms-access-2007, windows-7-x64

我有一个需要在 x64 平台下构建的应用程序。我需要访问一个**.mdb**文件。通过访问我的意思是插入、删除或更新数据库。我在使用 Jet OLE db 和 ODBC 驱动程序时遇到问题。使用 OLE db 它显示“Jet Oledb 未注册”。驱动程序和应用程序之间的 ODBC 平台不匹配。我可以在 X86 平台上做这些操作。但是在我的应用程序中，我被要求在 x64 平台下构建我的项目。任何人都可以为我提供任何解决方案。注意我不应该使用任何第三个应用程序与 x64 应用程序和数据库进行通信。

感谢您提前回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T13:44:08.897

您需要使用 Microsoft 最新的驱动程序 ACE
[在这里您可以找到下载位](http://www.microsoft.com/en-us/download/details.aspx?id=13255)

请注意为您的目标机器下载正确的集合（x64 或 x86）此外，连接字符串应使用这些驱动程序，因此您可能需要这样的连接字符串

```
Provider=Microsoft.ACE.OLEDB.12.0;Data Source=yourPathToTheMDBFile.mdb;
Persist Security Info=False; 
```

作为替代方案，您可以为 x86 平台构建应用程序，如果您与 64 位代码没有任何直接交互，它将在 64 位操作系统中正常工作。此解决方案更可取，因为您可以使用旧的 JET.OleDb.4.0

让我简单解释一下64/32位操作系统的问题，用于构建应用程序的平台和32/64位驱动程序：

*   **您为 AnyCPU 平台构建应用程序** - 您的代码在 32/64 位系统中运行良好，JIT 编译器发出的代码将具有与来宾操作系统相同的位数。但是，您不能通过 64 位应用程序使用 32 位驱动程序，反之亦然。JET.OleDB.4.0 只有 32 位。如果您为 AnyCPU 编译并在 64 位上运行，则游戏结束。您需要一个 64 位驱动程序。
*   **您为 x86 平台构建应用程序**- 您的代码在 32/64 位系统中运行良好，您可以使用 32 位驱动程序。当然，JIT 编译器发出的代码是 32 位的，因此您不能在 64 位系统上使用 64 位驱动程序。

# php - 如何更快地从 Mysql 加载图像？

> ID：13879790
> 
> 赞同：2
> 
> 时间：2012-12-14T13:40:08.273
> 
> 标签：php, html, mysql

最近我尝试将图像存储在 Mysql 数据库中（使用 BLOB 数据类型），使用 php 和 web 上传和存储它。它工作正常，除非加载足够大的图像，否则加载速度会非常慢。有什么方法可以更快地加载此图像？

注意：我的朋友建议我对此图像使用强制缓存（他说了一些关于更改图像的内容标题），但我不知道该怎么做。我怀疑它会带来更好的性能。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T13:47:52.247

图像绝对应该被缓存。我认为这可以通过确保您制作的图片网址对于同一张图片始终相同来完成。我认为您的问题是您需要更改 max_allowed_pa​​cket。如果它太小，它将无法一次通过网络发送大量数据。另外，如果图片真的那么大，我还会考虑将图片的质量更改为 70%？所有调整图像大小的功能都有办法改变它。即： http: [//php.net/manual/en/function.imagejpeg.php](http://php.net/manual/en/function.imagejpeg.php)。希望有帮助。我也会研究 YSlow。这将有助于指出导致加载缓慢的图像到底有什么问题。无论是质量、缓存、压缩还是 w/e 都可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T13:50:16.130

当图像存储在文件系统上时，可以使用缓存图像。如果它们是从数据库中动态弹出和打印的，那么每次 PHP 代码请求它们时都会获取它们。

可能是在几十毫秒内获取图像，但可以将 3MB 的图像数据下载到客户端浏览器 5 秒到 1 分钟（取决于连接速度）。与它没有多大关系（更不用说常见的共享主机了）。

我建议将图像存储在文件系统上，以便它们可以被浏览器缓存，或者您甚至可以在 Apache 服务器上设置一个内存缓存，以便在过期之前从缓存中提供它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T13:47:37.007

如果您没有任何要求将图像存储在数据库中，则图像最好放在文件夹中，并且您应该在数据库中存储每个图像的路径或名称。

这将使它们正常加载。当然，这取决于图像的大小。

这就是您在几乎所有 Web 应用程序中都会发现的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T13:45:12.327

我猜缓存可能好也可能不好。而不是我建议您将图像或其他文件上传到文件夹并仅将有关文件的信息保存在数据库中：名称、类型、大小、文件夹等......

# python - 如何让用户选择自己的功能

> ID：13879794
> 
> 赞同：0
> 
> 时间：2012-12-14T13:40:17.570
> 
> 标签：python

我目前正在学习编程，我有以下问题。

用户应该从命令行输入他想做的操作，并根据操作输入有关项目的信息。

我尝试过以下方法：

```
def stock(f):
    d={}
    f()
    return d

def add(item,amount):
    d[item]=amount
    return d 
```

或者

```
def stock(item,amount,f):
    d={}
    if f():
        d[item]=amount
    return d

def add():
    return True 
```

而且，第二个对我不起作用，因为当我想使用此代码 remove(a,b) 时，我不需要三个参数。我想说的是根据我的操作更改参数的数量。我该如何处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:44:09.327

我不确定你在这里到底要做什么，但在 python 代码中常见的一个函数定义为：

```
def foo(*args):
    print(args)  #args is a tuple
    print(len(args))  #you can inspect it's length to see how foo should behave 
```

然后你可以像这样调用这个函数：

```
foo(1)
foo(1,2)
foo(1,2,3)
foo(1,2,3,"spam") 
```

等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T14:00:07.960

如果我理解正确，您需要字典工厂模式

```
>>> class Calc(object):
    def __init__(self):
            #Initialize a dictionary of keywords and callbacks
        self.operation = {
            'add':self.add,
            'sub':self.sub,
            'mul':self.mul,
            'div':self.div,
            'neg':self.neg

            }
    #Overload the function call
    def __call__(self, *args):
        return self.operation[args[0]](*args[1:])
    # *args - variable list argument list
    def add(self,*args):
        return sum(args)
    def sub(self,*args):
        return args[1] - args[0]
    def mul(self, *args):
        if len(args) == 0:
            return 1
        elif len(args) == 1:
            return args[0]
        else:
            return args[0] * args[1]
    def div(self, *args):
        return args[0] / args[1]
    def neg(self, *args):
        return -args[0]

>>> calc = Calc()
>>> calc('add',1,2,3)
6
>>> calc('mul',10)
10
>>> calc('mul',10,4)
40
>>> calc('neg',3)
-3
>>> 
```

# navigation - Mootools 获得高度用于差异。高度

> ID：13879795
> 
> 赞同：0
> 
> 时间：2012-12-14T13:40:21.570
> 
> 标签：navigation, height, mootools

我正在寻找一个解决方案，我有一个下拉导航，并且有 3 个子菜单（第二级）我希望整个 BG ot 导航获得与开放导航相同的高度。

现在我有了。

```
window.addEvent('domready', function(){
    $$('.submenu a').addEvents({
        mouseenter: function(){
         $$('.navi').set('tween', {
            duration: 1000,
            transition: Fx.Transitions.Bounce.easeOut
          }).tween('height', '145px');
        },
        mouseleave: function(){
           $$('.navi').set('tween', {}).tween('height', '60px');
        }
      }); 
```

我希望我可以使用打开的子导航的高度作为推文高度，

像那样。

```
.tween('height', HEIGHT FROM SUBNAV+60px); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:16:46.047

这个问题很难理解，所以我从两个方面来回答

1.  在 mootools 中还有 element.measure ，您可以使用它来测量隐藏的元素。`this`将绑定到您要测量的元素。

    var size = $('hiddenElement').measure(function(){ return this.getSize(); });

请注意，Mootools 中也有`getDimensions`和`getComputedSize`，它们的测量方式都不同。

1.  如果您想测量子菜单上方/下方元素的高度，您可以使用循环来完成。

变量高度 = 0; $$('li').every(function(el){ var size = el.getSize(); height = height + size.y; // 例如

```
// return false to break 
return true; 
```

})

有了更多关于您的 HTML 的信息，就更容易回答这个问题。

# java - UML to Java 代码生成工具

> ID：13879797
> 
> 赞同：12
> 
> 时间：2012-12-14T13:40:26.850
> 
> 标签：java, uml, code-generation, class-diagram

我最近一直在寻找一种从 UML 图生成 Java 代码的工具。我已经看过 Papyrus 和 Omondo for Eclipse。我遇到的问题是，许多加载了 JPA 和 JAXB 类的项目都需要该工具。这使得 Omondo 和 Papyrus 都显得不足，因为注解和 getter/setter 相当重要。我正在寻找的是一种工具，它能够维护这些项目的图形类图，如 UML 图，然后根据需要将其转换为 Java 代码。

我正在寻找的是一个可靠的*类图*-> *Java 代码*工具，最好是基于 UML 的，它支持（尽可能多的）以下内容：

*   Java 原语（和包装器）
*   方法和属性的注释
*   类图中 Java 核心类的引用
*   简单的 getter/setter 方法生成
*   直接在定义的方法中编码

如果有人知道一个工具（它不必是 UML 类图），我非常想知道它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T13:47:21.733

对我来说，最伟大的 UML 工具是[ArgoUML](http://argouml.tigris.org/)。它非常强大。基于Java。它不断改进并成为越来越有用的工具。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T14:23:32.870

如果您使用的是[**Eclipse**](http://www.eclipse.org/)，您应该查看 JPA 图表编辑器，它是[**Dali**](http://www.eclipse.org/webtools/dali/)项目的一部分，它是[**Web 工具平台**](http://www.eclipse.org/webtools/)的一部分。这允许您以图表形式直接使用 JPA 实体。

*   [http://wiki.eclipse.org/JPA_Diagram_Editor_Project_Tutorial](http://wiki.eclipse.org/JPA_Diagram_Editor_Project_Tutorial)

Dali 项目还具有对 JAXB 的工具支持。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T13:46:24.260

为什么不看看 BoUml ......非常好而且非常快。

[链接](http://www.bouml.fr/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T13:56:53.313

我使用[Poseidon for UML](http://www.gentleware.com/products.html)和[Objecteering](http://www.objecteering.com/)从 UML 静态/结构图生成 Java 。

# mobile - SMPP-GSM数据编码

> ID：13879798
> 
> 赞同：0
> 
> 时间：2012-12-14T13:40:41.730
> 
> 标签：mobile, encoding, gsm, smpp

假设我们有一个 ESME 与 SMSC 通信，而 SMSC 与移动台通信。如果文本消息包含需要转义的字符，则将使用 ESC (0x1B) 符号。但是，我认为 ESC 是 GSM 字母表中的控制字符，因此 Latin-1 将用于编码。（根据 SMPP v3.4 规范第 8 页）。进一步假设从 SMSC 到移动台的可用编码是 GSM 默认字母表。是否可以解释 ESME 以 Latin-1 编码的转义字符 (ESC)？简而言之，在转义 GSM ESME 中可能被 SMSC 或移动站误解的文本消息字符时，是否会出现任何奇怪的字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T22:50:36.207

您需要使用的编码很大程度上取决于使用的 data_coding 值。假设您使用 data_coding=0 表示“默认字母”，那么仍然取决于 SMSC 的“默认字母”是哪个。

例如，有些 SMSC 将 Latin1 作为字符集运行，但是不属于 GSM 默认字母表的字符需要转义。

首先，您需要确定哪个是 SMSC 的默认字符集（更好的 SMPP 组件）。0x1b 序列基本上和Latin1 没有任何关系。如果您的 SMSC 正在运行 GSM 并且您想发送一个 € 符号，您可以在 submit_sm 操作的 short_message 字段中发送 0x1b0x65 作为字节序列。

最后，如果您的 SMSC 使用 GSM 而 ESME 使用 Latin1，则可能会出现奇怪的字符，因为 GSM 有例如不属于 Latin1 的希腊字符。

# java - 如何在java中的图像上添加可移动的TextArea？

> ID：13879801
> 
> 赞同：1
> 
> 时间：2012-12-14T13:40:48.990
> 
> 标签：java, swing

我正在为牙医制作 java swing 桌面应用程序。在我的应用程序中，我的图像是 16 位 tiff 灰度图像。我在 JPanel 上绘制图像。我想在 myImage 上添加或放置可移动文本区域。这样医生就可以在图像上书写并保存。这样当医生下次打开该图像时，他/她可以很容易地了解患者的图像。我在下面给出了 1 个图像示例。

![在此处输入图像描述](../Images/e06f2677e7e49b22eec88c7ae93bc0c7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T12:55:11.317

你有几个选择：

*   在可调整大小的容器中使用透明文本组件，如图[所示](https://stackoverflow.com/a/4091329/230513)。

*   使用@camickr's ，[在此处](https://stackoverflow.com/a/3049541/230513)`ComponentResizer`引用，带有透明文本组件。

*   研究现有实现，例如`ImageJ`，[在此处](https://stackoverflow.com/tags/imagej/info)引用或[在此处](https://stackoverflow.com/q/13312223/230513)`JHotDraw`引用。

*   [使用此处](https://stackoverflow.com/a/11944233/230513)说明的可拖动手柄开发您自己的实现。

尽管后者更灵活，但我更倾向于使用组件方法以便于实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:41:33.803

我会覆盖 JPanel 的绘制方法（使其将图像绘制为背景）并像往常一样向其添加 JTextArea。这样，您可以创建自己的 Graphics 对象，调用paint，然后将您的 Graphics obj 保存为图像。

```
public class MyPanel extends JPanel {

    JTextArea myTextArea = new JTextArea();

    public MyPanel {
        // ...
       add(myTextArea, new GridBagConstraints(....));
       // ...
    }

    @Override
    public void paint(Graphics g) {
        g.drawImage(.....);
        super.paint(g);
    } 
```

# pi - 如何计算另一个基数的 PI？

> ID：13879802
> 
> 赞同：2
> 
> 时间：2012-12-14T13:40:52.503
> 
> 标签：pi, radix

有很多资源可以用十进制计算 PI。我发现这个做得很快：[http](http://en.literateprograms.org/Pi_with_Machin) ://en.literateprograms.org/Pi_with_Machin 's_formula_(Python)

但是我如何在另一个基础上计算它？我可以修改该代码来做到这一点吗？

# xsd - XSD(maxOccurs=(指定大值))- java.lang.OutOfMemoryError: Java heap space

> ID：13879812
> 
> 赞同：1
> 
> 时间：2012-12-14T13:41:16.737
> 
> 标签：xsd, xerces, jaxb2

当我们在 tomcat 服务器上部署应用程序时，我一直面临 java.lang.OutOfMemoryError 问题，因为**我们在模式定义中为“maxOccurs”属性（即 maxOccurs="999999"）指定了较大的值**。请在下面找到示例片段和异常堆栈跟踪。有人可以建议优化解决方案来避免这种情况。

最初，我们将 maxoccurs 值保持为“未绑定”。但是，当我们使用 HP Fortify 静态代码分析器扫描代码库时，我们发现存在严重问题（有关该问题的更多信息，请访问：[Fortify Link](http://www.hpenterprisesecurity.com/vulncat/en/vulncat/index.html)，在左侧面板上我们有 XML-->Environment--> **Weak XML Schema: Unbounded发生**）。所以 HP Foritfy 工具**建议将 maxoccurs 限制在一个合理的数字。**我们必须解决这个问题才能从业务中注销。

```
Java version: JDK 1.6.0_30
Tomcat Version: 6.0 
```

**注意：请不要建议增加堆大小。我目前面临的情况是在开发 tomcat 应用程序服务器中，而在生产 tomcat 应用程序服务器中我没有看到这个问题（可能是生产服务器有更多空间）**

```
 Schema1.xsd  

      <xs:sequence>
           <xs:element name=" User " type=" UserType " maxOccurs="999999"/>
                          <!-- maxOccurs we specifying large number-->
      </xs:sequence> 
```

异常堆栈跟踪：

```
Caused by: java.lang.OutOfMemoryError: Java heap space
     at org.apache.xerces.impl.dtd.models.CMStateSet.<init>(Unknown Source)
     at org.apache.xerces.impl.xs.models.XSDFACM.buildDFA(Unknown Source)
     at org.apache.xerces.impl.xs.models.XSDFACM.<init>(Unknown Source)
     at org.apache.xerces.impl.xs.models.CMBuilder.createDFACM(Unknown Source)
     at org.apache.xerces.impl.xs.models.CMBuilder.getContentModel(Unknown Source)
     at org.apache.xerces.impl.xs.XSComplexTypeDecl.getContentModel(Unknown Source)
     at org.apache.xerces.impl.xs.XSConstraints.fullSchemaChecking(Unknown Source)
     at org.apache.xerces.impl.xs.XMLSchemaLoader.loadGrammar(Unknown Source)
     at org.apache.xerces.impl.xs.XMLSchemaLoader.loadGrammar(Unknown Source)
     at org.apache.xerces.jaxp.validation.XMLSchemaFactory.newSchema(Unknown Source)
     at javax.xml.validation.SchemaFactory.newSchema(SchemaFactory.java:594)
     at com.prac.app.common.xmlsupport.SchemaLoaderImpl.init(SchemaLoaderImpl.java:92)
     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
     at java.lang.reflect.Method.invoke(Method.java:597) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:22:08.637

一个简单的更改：设置`maxOccurs`为`unbounded`而不是一个大数字。（如果验证器正在构建有限状态自动机的重量级表示，那么您当前的声明需要一百万个状态；`maxOccurs="unbounded"`将其减少到一个状态。如果您当前的模式经常捕获由超过 999,999 个用户元素的文档引起的错误，则更改当然， to`unbounded`会削弱你的验证。

# javascript - 删除 contenteditable 中选择内的所有 HTML 标记

> ID：13879813
> 
> 赞同：8
> 
> 时间：2012-12-14T13:41:17.933
> 
> 标签：javascript, jquery, wysiwyg, contenteditable, rangy

我有一个`<div />`它`contenteditable`可以包含多种类型的 HTML 元素，例如`<span />`、`<a />`、`<b />`等`<u />`。

现在，当我在我的文本中选择文本时，我`contenteditable`希望有一个按钮来删除选择中的所有样式。

**示例 1：**

选择：

```
Hello <b>there</b>. I am <u>a selection</u> 
```

会成为：

```
Hello there. I am a selection 
```

**示例 2：**

选择：

```
<a href="#">I am a link</a> 
```

会成为：

```
I am a link 
```

你明白了……

我发现这个有用的功能[https://stackoverflow.com/a/3997896/1503476](https://stackoverflow.com/a/3997896/1503476)用自定义文本替换当前选择。但我只是无法先获取选择的内容，然后在替换之前去掉标签。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T15:07:04.323

我这样做的方法是遍历选择中的节点并删除内联节点（可能不理会`<br>`元素）。这是一个示例，为方便起见，使用我的[Rangy](http://code.google.com/p/rangy)库。它适用于所有主流浏览器（包括 IE 6），但并不完美：例如，它不会拆分部分选择的格式元素，这意味着完全删除了部分选择的格式元素，而不仅仅是选择的部分。要解决这个问题会更加棘手。

演示：http: [//jsfiddle.net/fQCZT/4/](http://jsfiddle.net/fQCZT/4/)

代码：

```
var getComputedDisplay = (typeof window.getComputedStyle != "undefined") ?
    function(el) {
        return window.getComputedStyle(el, null).display;
    } :
    function(el) {
        return el.currentStyle.display;
    };

function replaceWithOwnChildren(el) {
    var parent = el.parentNode;
    while (el.hasChildNodes()) {
        parent.insertBefore(el.firstChild, el);
    }
    parent.removeChild(el);
}

function removeSelectionFormatting() {
    var sel = rangy.getSelection();

    if (!sel.isCollapsed) {
        for (var i = 0, range; i < sel.rangeCount; ++i) {
            range = sel.getRangeAt(i);

            // Split partially selected nodes 
            range.splitBoundaries();

            // Get formatting elements. For this example, we'll count any
            // element with display: inline, except <br>s.
            var formattingEls = range.getNodes([1], function(el) {
                return el.tagName != "BR" && getComputedDisplay(el) == "inline";
            });

            // Remove the formatting elements
            for (var i = 0, el; el = formattingEls[i++]; ) {
                replaceWithOwnChildren(el);
            }
        }
    }
}
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:52:09.397

[http://jsfiddle.net/fQCZT/2/](http://jsfiddle.net/fQCZT/2/)

```
<div contenteditable="true">
    <p>
        Here is some <b>formatted text</b>. Please select some and watch the formatting
        <i>magically disappear</i>.
        <br>
        Look, some more <u>formatted</u> content.
    </p>
    <p>And <i>another</i> paragraph of it</p>
</div>
<button onmousedown="removeSelectionFormatting()">Change</button>​ 
```

它是上述答案之一的重复，但有一个按钮来更改文本！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T14:02:33.827

根据您建议的功能，在控制台中进行了一些实验后，我想出了这个简洁的小脚本。*虽然没有测试跨浏览器兼容性*！

```
var selection = window.getSelection().getRangeAt(0);
var selectedText = selection.cloneContents().childNodes[0]; // This is your selected text. 
```

现在，您可以从 selectedText 中去除 HTML 标记，并使用您在问题中提供的功能替换它。

例如，您可以`strip_tags()`从[php.js 项目中使用](http://phpjs.org/functions/strip_tags/)

我希望这回答了你的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T14:03:43.557

[http://jsfiddle.net/tnyWD/](http://jsfiddle.net/tnyWD/)

HTML：

```
<div class="test">
    Hello <b>there </b><a href="#">I am a link</a>
</div>
<button class="remove">Remove HTML</button>​ 
```

JS：

```
$(document).ready(function(){
    jQuery.fn.stripTags = function() { return this.replaceWith(this.html().replace(/<\/?[^>]+>/gi, '') ); };
$('.remove').click(function(){
    $('.test').stripTags();
});
});​ 
```

那是你要找的吗？

# php - 从使用 jquery load() 加载的 DIV 调用 php 函数

> ID：13879815
> 
> 赞同：0
> 
> 时间：2012-12-14T13:41:18.960
> 
> 标签：php, jquery, function, html, include

寻找一种方法来调用在原始文件中包含“functions.php”的php函数。

这就是我的 index.php 文件中的内容，因此当我单击链接时，它会将 (new.php) 加载到 (#container) div 中。

```
<?php include 'functions.php' ?>

<script type="text/javascript">
$(document).ready(function() {
  $('a').click(function(e) {
    $('#container').load(new.php).hide().fadeIn(500);
    return false;
  });
});
</script> 
```

所以在我的new.php 中，我想调用一个位于functions.php 中的函数，但显然我得到了一个未定义的错误。

```
<?php some_func() ?> 
```

**我知道您可以在 new.php 中添加另一个包含“functions.php”**

但由于functions.php包含mysql连接/查询和其他包含等。我真的不想继续重新加载它。

那么有什么办法可以将functions.php重新加载到新加载的div中并从中调用函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:46:19.393

当您在 div 中“加载”new.php 时，您只是将生成的 HTML 代码加载到 div 中。

在这种情况下，生成的 HTML 代码将是 PHP 处理 new.php 代码的结果，该代码依赖于 functions.php 中的函数。

`include 'functions.php';`在这种情况下，使用 javascript 访问文件的内容，除了放在new.php中之外，绝对没有办法做到这一点。

这两个文件将单独处理。new.php 不会在“内部”index.php 运行，因此无法访问那里定义的任何函数。

# jquery - 如何进行方法调用

> ID：13879817
> 
> 赞同：0
> 
> 时间：2012-12-14T13:41:34.673
> 
> 标签：jquery, twitter-bootstrap

我尝试使用：引导向导：[https ://github.com/gilluminate/Bootstrap-Wizard](https://github.com/gilluminate/Bootstrap-Wizard)

在它写的文档中

url() 方法更改将加载 Ajax（远程）面板的 URL。参数： :Index (number) - 要更新其 URL 的面板的从零开始的索引。:URL (string) - 加载面板内容的 URL。

我真的不明白如何调用此方法？

```
$("#myElement").bwizard( 'url'(1,  "/project/testUrl"   )); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T13:52:04.743

我认为应该是这样的：

```
$("#myElement").bwizard("url", 1, "/project/testUrl"); 
```

或这个

```
$("#myElement").data("bwizard").url(1, "/project/testUrl"); 
```

# jquery - jQuery 显示/隐藏未触发回调

> ID：13879822
> 
> 赞同：1
> 
> 时间：2012-12-14T13:41:52.103
> 
> 标签：jquery, html, jquery-ui, animation

我有4个盒子。悬停在其中一个上时，其他 3 个被隐藏，悬停的一个被展开。但是，扩展部分没有发生，因为我的回调没有被触发！

**代码：（**这里的小提琴：http: [//jsfiddle.net/CpKLk/5/](http://jsfiddle.net/CpKLk/5/)）

```
<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta charset="utf-8" />
        <title></title>
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script type="text/javascript" src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
        <script type="text/javascript">
            $(document).ready(function ()
            {
                $("div#Content div").hover(function ()
                {
                    var toShow = $(this);

                    toShow.siblings().hide("swing", null, "slow", function ()
                    {
                        //Never gets here!
                        toShow.addClass("Expanded");
                        alert("Changing class!");
                    });
                }, function ()
                {
                    var toShow = $(this);

                    toShow.siblings().show("swing", null, "slow", function ()
                    {
                        //Never gets here!
                        toShow.removeClass("Expanded");
                        alert("Changing class!");
                    });
                });
            });
        </script>
        <link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
        <style type="text/css">
            div#Content
            {
                white-space: nowrap;
            }

            div#Content div
            {
                width: 100px;
                height: 100px;
                display: inline-block;
            }

            div#Content div#Box1
            {
                background-color: red;
            }

            div#Content div#Box2
            {
                background-color: blue;
            }

            div#Content div#Box3
            {
                background-color: green;
            }

            div#Content div#Box4
            {
                background-color: pink;
            }

            div#Content div.Expanded
            {
                width: 100%;
            }
        </style>
    </head>
    <body>
        <div id="Content">
            <div id="Box1"></div>
            <div id="Box2"></div>
            <div id="Box3"></div>
            <div id="Box4"></div>
        </div>​
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T13:46:10.580

采用的参数`.hide()`必须按以下顺序排列：持续时间、缓动、回调（[http://api.jquery.com/hide/](http://api.jquery.com/hide/)）

这是您的示例的更新 jsFiddle：http: [//jsfiddle.net/CpKLk/7/](http://jsfiddle.net/CpKLk/7/)

`.hide()`调用是这样完成的：

```
hide("slow","swing", function (){ ... }); 
```

`.show()`必须以相同的方式调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:53:36.400

我玩了一下你的脚本，想出了这样的东西：

```
$("div#Content div").hover(function () {
  var toShow = $(this);                      
  toShow.siblings().hide("slow").delay(10);
  toShow.addClass("Expanded");
}, function () {
  var toShow = $(this);
  toShow.siblings().show("slow").delay(10);
  toShow.removeClass("Expanded");
});​ 
```

添加了延迟的东西，所以它不会因为鼠标和东西而发疯。

# html - HTML5 Game Arcade - 安全性

> ID：13879825
> 
> 赞同：2
> 
> 时间：2012-12-14T13:41:54.120
> 
> 标签：html, security, xss

我正在寻找创建一个简单的 html5 游戏街机，人们可以在其中提交他们的游戏，然后我托管它们。

游戏将直接在浏览器中运行。加载内容后，他们将不会访问任何服务器。很像老式的 Flash 街机网站（Miniclip 等）。不会是单人游戏。

我主要关心的游戏访问的内容将是注册/登录用户的用户会话数据。

我想知道在不审核每一行提交的代码的情况下保护这些的最佳方法是什么？

目前我在想我应该在不同的域（可能是 cdn）上托管游戏，然后 iframe 他们。

这行得通吗？我还应该做些什么来确保游戏无法访问有关用户的信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T16:52:43.907

即使不允许来自不同域的 iframe 的内容访问父级的 DOM，仍然有多种方式可能会通过在 iframe 上加载不受信任的内容来危及用户的安全性。

例如，iframe 可以重定向到不安全的站点、提供恶意软件或使用某种网络钓鱼方案，例如在 iframe 上显示“会话过期”消息以及模拟登录表单来窃取用户的密码。在所有这些情况下，由于地址栏中显示的 URL 始终是您网站的 URL，因此用户更有可能信任其内容并在出现问题时责怪您。

我不知道有任何解决方案可以自动检查提交的代码是否是恶意的，如果你找到了，我会对它的有效性非常谨慎。以网络钓鱼示例为例。在这种情况下，代码本身没有问题（因为某些游戏可能为其玩家提供真正的登录表单），它是显示它的上下文（作为您真实登录表单的模型）是什么使它是恶意的。

# asp.net - 如何自定义网站项目的构建？

> ID：13879831
> 
> 赞同：6
> 
> 时间：2012-12-14T13:42:48.350
> 
> 标签：asp.net, msbuild

*我们有一些自定义的 MS Build 脚本，它们在构建Web 应用程序项目*时生成代码和配置文件。目前，我们通过覆盖 Web 项目的 .csproj 文件中的“BeforeBuild”和“AfterBuild”目标来调用这些构建脚本。但是，在另一个解决方案中，我有一个*网站项目*，它直接从本地 IIS 打开并且没有 .csproj 文件。如何自定义此类项目的构建？

如果无法自定义网站的 MS Build 过程，调用类似 .bat 文件的内容就足够了，该文件将运行我的自定义 MS Build 脚本。我们目前正在使用 .bat 文件，但开发人员必须手动运行它，但他们有时会忘记这一点。单击构建时，我看不到一种简单的方法来自动启动它。

我想要在 Visual Studio 和 Team Build 中作为解决方案构建的一部分运行的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T02:10:00.960

请注意，与 Web 应用程序不同，Visual Studio 本身并不真正构建网站。当然，您可以从 VS 运行构建命令，但它所做的基本上是检查您的站点是否*可以*无错误地构建。关键是当您从 VS 构建网站时，它根本不会产生任何构建工件。相反，当您向站点发送 http 请求时，需要构建的所有内容都在运行时发生。

您可以通过多种方式自定义在运行时构建事物的方式（例如使用[Build Providers](http://msdn.microsoft.com/en-us/library/system.web.compilation.buildprovider.aspx)），但如果您的目标是生成 web.config 文件，那么这对您没有帮助。

作为替代方案，您可以让您的网站依赖于另一个项目（例如库），然后让*该*项目代表站点执行一些自定义构建操作（例如通过修改站点的文件）。使用项目依赖关系，您将确保其他项目始终在网站之前构建。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T15:25:06.873

我现在通过在我的解决方案中添加一个单独的 MS Build 文件并通过使用 Visual Studio 中的项目依赖项确保它在网站之前构建，我已经实现了我所需要的。

实际的构建文件非常小，名为“Configure.csproj”，位于网站的根目录中：

```
<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="4.0" DefaultTargets="Build">
  <Import Project="CodeGeneration.targets" />
  <Target Name="Build">
    <CallTarget Targets="GenerateCode" />
  </Target>
  <Target Name="Rebuild">
    <CallTarget Targets="GenerateCode" />
  </Target>
  <Target Name="Clean">
  </Target>
</Project> 
```

右键单击解决方案并选择“添加现有项目”并选择此文件。

当没有要构建的 C# 时，将其命名为 *.csproj 似乎很奇怪，但是当单击“添加现有项目”时，Visual Studio 可以识别此文件扩展名。

然后为了确保这是在网站之前构建的，右键单击解决方案并选择“项目依赖项”。从“项目”下拉列表中选择网站项目，然后选中“配置”旁边的框。

当然可以通过添加另一个项目并添加对网站的依赖项来在网站之后运行自定义构建。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-23T19:55:22.623

## Visual Studio < 2012：Web 部署项目

自 2005 年以来，Microsoft 为 Visual Studio 发布了一个单独的可安装项目类型，称为**Web 部署项目**（有时称为**WDP**）。[它是由 Scott Guthrie](http://weblogs.asp.net/scottgu/archive/2005/11/06/429723.aspx)在他的博客上首次披露的，并且多年来并没有太大变化，因此他的介绍仍然是一本很好的读物，可以详细了解 WDP 所提供的内容（或转到[MSDN 参考资料](http://msdn.microsoft.com/en-us/library/aa479568.aspx)）。

创建 WDP 时，该项目将添加到您的解决方案中，并带有对现有网站项目的内置引用。它实际上只是一个 MSBuild 文件 (.wdproj)，其内容通过添加到 Visual Studio 的设置对话框进行控制。构建此项目时，它会输出通常由服务器上的 ASP.NET 运行时生成的程序集（例如，在第一次请求每个目录的 ASP.NET 文件时）。本质上，您会得到所谓的*预编译网站*。

因为它基于 MSBuild，所以您可以轻松地将其添加到现有构建脚本中，或者将您的自定义添加到`<BeforeBuild>`and`<AfterBuild>`元素（以及`<BeforeMerge>`and `<AfterMerge>`）。这也应该适用于构建服务器，尽管某些功能可能需要安装 Windows SDK。（根据我的经验，aspnet_merge.exe 是主要问题，如果项目文件中配置了它，它负责将所有输出程序集合并到一个程序集中。）

此解决方案是 MSBuild 网站项目的“官方”方式，并且比添加具有依赖关系的空类库项目来模拟构建事件之前和之后的复杂性要低。不利的一面是，当您的网站很大时，它可能会增加构建时间。但要以积极的态度结束，为您构建预编译的网站可能会改善您的整体部署工作。

Visual Studio [2008](http://www.microsoft.com/en-us/download/details.aspx?id=25163)和[2010](http://www.microsoft.com/en-us/download/details.aspx?id=24509)的下载（抱歉，我找不到 VS2005 的下载，不过它可能是 SP1 的一部分）。

## 视觉工作室 2012

对于 Visual Studio 2012，情况发生了变化。没有计划发布 WDP（尽管有[需求](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2639368-add-web-deployment-projects-to-vs11)），但根据web 开发工具博客的[这篇博客文章](http://blogs.msdn.com/b/webdev/archive/2012/08/06/plans-regarding-website-projects-and-web-deployment-projects.aspx)，网站项目将支持新的发布功能。发布配置文件也是 MSBuild 文件，因此应该可以将它们集成到您现有的构建脚本中，就像使用 WDP 一样。另请参阅：[Visual Studio 2012 Web 部署项目已死——发布配置文件万岁](http://dotnet.dzone.com/articles/visual-studio-2012-web)。

如果您现在同时使用 Web 应用程序和网站项目，那么您可能会发现为这两种类型的项目使用相同的构建设置是有益的。~~在这种情况下，当在不久的将来~~发布对网站项目的发布配置文件支持时（现在有一个支持此功能的[ASP.NET 和 Web Tools 2012.2 RC](http://weblogs.asp.net/scottgu/archive/2012/12/14/announcing-the-asp-net-and-web-tools-2012-2-release-candidate.aspx)），您绝对应该切换到它，而不是两个单独的空类库项目。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-12-17T16:38:55.617

您可以为此创建自己的 MSBuild proj 文件。它相当简单，这里有一个演练：http: [//msdn.microsoft.com/en-us/library/dd576348.aspx](http://msdn.microsoft.com/en-us/library/dd576348.aspx)

然后，您可以将其添加到您为构建后命令创建的文件中。

```
<Target Name="AfterEndToEndIteration">
  <Exec Command="YourPath\YourCommand.bat" />
</Target> 
```

祝你好运

# mysql - mysql夏时制 - 确定是真还是假

> ID：13879842
> 
> 赞同：0
> 
> 时间：2012-12-14T13:43:17.517
> 
> 标签：mysql, datetime, select

我想确定一个日期是否在夏令时。这用于确定两个日期之间的小时数，因为这将影响成本 - 它用于护理租赁。我试图尽可能地剥离代码。我在语法上有点挣扎（is_daylight 函数不存在），但希望能够传达我想要做的事情。非常感谢任何帮助。

```
SELECT 

  -- lost an hour on pickup date so add an hour to the date
  WHEN 
   is_daylight(pickup_date)=1 AND is_daylight(dropoff_date)=0
  THEN 
    unix_timestamp(dropoff_date) - unix_timestamp(pickup_date)+3600 / 86400 as num_hours

  -- not date time
  ELSE
    unix_timestamp(dropoff_date) - unix_timestamp(pickup_date) / 86400 as num_hours 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:19:46.207

[手册](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html)指出：

> `UNIX_TIMESTAMP()`假定其参数是当前时区中的日期时间值。

因此，如果您的服务器配置正确，即使用正确的时区，那么 unix 时间戳应该已经包含任何可能需要的 dst 修改。所以首先，确保有什么要修复的，如果有，检查[时区支持](http://dev.mysql.com/doc/refman/5.6/en/time-zone-support.html)是否配置正确。

请注意，转换是有损的，因为在切换前后，本地时间可能对应于两个 UTC 时间，一个在切换之前，一个在切换之后。出于这个原因，最好始终存储 unix 时间戳，并且只转换为本地时间以供用户输出。

如果您想知道 DST 在给定日期是否有效，您可以使用[`CONVERT_TZ`](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_convert-tz). 从本地时间转换为与没有 DST 的本地时间相对应的固定偏移时间。如果结果保持不变，则 DST 未激活。如果它改变一小时，则 DST 处于活动状态。

例子：

```
SELECT CASE
 WHEN            '2013-07-24 15:00' =
      CONVERT_TZ('2013-07-24 15:00', 'EST', 'America/New_York')
 THEN 'no DST' ELSE 'DST' END AS isDST 
```

# c# - 将自定义属性添加到 UserControl

> ID：13879844
> 
> 赞同：1
> 
> 时间：2012-12-14T13:43:22.100
> 
> 标签：c#, silverlight, user-controls, expression-blend-4, custom-properties

我需要有关将自定义属性添加到 UserControl 的帮助。我创建了一个视频播放器用户控件，我想在另一个应用程序中实现它。我的 UserControl 中有一个 mediaElement 控件，我想从我的 UserControl 所在的应用程序访问 mediaElement.Source。

我试过这个：`[Player.xaml.cs]`

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;

    namespace VideoPlayer
    {
    public partial class Player : UserControl
    {
        public static readonly DependencyProperty VideoPlayerSourceProperty =
        DependencyProperty.Register("VideoPlayerSource", typeof(System.Uri), typeof(Player), null);

        public System.Uri VideoPlayerSource
        {
            get { return mediaElement.Source; }
            set { mediaElement.Source = value; }
        }

        public Player()
        {
            InitializeComponent();
        } 
```

我似乎无法在属性框中找到属性。对此有任何帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:04:57.517

您对 DependencyProperty CLR 包装器（getter/setter）使用了不正确的语法。
使用以下正确代码：

```
public static readonly DependencyProperty VideoPlayerSourceProperty = DependencyProperty.Register("VideoPlayerSource", 
    typeof(System.Uri), typeof(Player),
    new PropertyMetadata(null, (dObj, e) => ((Player)dObj).OnVideoPlayerSourceChanged((System.Uri)e.NewValue)));

public System.Uri VideoPlayerSource {
    get { return (System.Uri)GetValue(VideoPlayerSourceProperty); } // !!!
    set { SetValue(VideoPlayerSourceProperty, value); } // !!!
}
void OnVideoPlayerSourceChanged(System.Uri source) {
    mediaElement.Source = source;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:05:16.550

您需要从属性更改您的*获取*和*设置。*尝试替换这个：

```
public System.Uri VideoPlayerSource
{
    get { return mediaElement.Source; }
    set { mediaElement.Source = value; }
} 
```

有了这个：

```
public System.Uri VideoPlayerSource
{
    get { return (System.Uri)GetValue(VideoPlayerSourceProperty); }
    set { SetValue(VideoPlayerSourceProperty, value); }
} 
```

# matlab - 使用目录文件填充弹出菜单

> ID：13879846
> 
> 赞同：0
> 
> 时间：2012-12-14T13:43:26.957
> 
> 标签：matlab, matlab-guide, popupmenu

我正在尝试从我用 GUIDE 组成的 GUI 填充弹出菜单。我这样做如下：

```
TestFiles = dir([pwd '/test/*.txt']);
TestList = [];

for i = 1:length(TestFiles)
    filename = TestFiles(i).name;
    TestList = [TestList filename];
end

set(handles.popup_test,'string',TestList); 
```

我在`popup_test_CreateFcn`方法中这样做（虽然我不确定这是正确的地方）。

尝试启动 GUI 时，我不断收到以下信息：

```
??? Attempt to reference field of non-structure array.

Error in ==> init>popup_test_CreateFcn at 101
set(handles.popup_test,'string',TestList);

Error in ==> gui_mainfcn at 96
        feval(varargin{:});

Error in ==> init at 19
    gui_mainfcn(gui_State, varargin{:});

Error in ==> @(hObject,eventdata)init('popup_test_CreateFcn',hObject,eventdata,guidata(hObject))

??? Error using ==> struct2handle
Error while evaluating uicontrol CreateFcn 
```

所以由于某种原因，该`set()`方法不允许我用 TestList 填充弹出菜单。

有什么想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:51:20.063

请注意，当您运行程序时，首先调用的函数是`"create functions"`

所以当你在`set(handles.popup_test,'string',TestList);`里面做`popup_test_CreateFcn`的时候，函数不知道是什么，`handles`因为它只有在`"opening function"`. （如果您尝试在其中打印它，`"create functions"`它将是空的）。

你可以在这个函数里面做这样的事情：

```
handles.popup_test=hObject;  %pass handles the popup menu object
guidata(hObject, handles); 
```

在打开功能中`XXXX_OpeningFcn(hObject, eventdata, handles, varargin)`，您可以添加：

```
%...define TestList and other things you need
set(handles.popup_test,'string',TestList); 
```

# sql - 将姓氏与全名分开

> ID：13879851
> 
> 赞同：1
> 
> 时间：2012-12-14T13:43:39.047
> 
> 标签：sql, oracle

我想以这种格式显示我的数据：

```
First_Name  Mid_Name  Last_Name
All         Ahmad     Khan 
```

这是我的代码

```
select substr(customer_name1, 0, instr(customer_name1, ' ')-1) as first_name
     , substr(customer_name1, instr(customer_name1, ' ')+1) as mid_name 
     , ... as last_name
  from sttm_customers 
 where customer_name1 = 'ALI AHMAD KHAN' 
```

谁能帮助我如何在报告中添加姓氏？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T14:19:26.873

你不能可靠地做到这一点，因为你没有可靠的方法来知道什么是名字和什么是姓氏。上面的示例显示了对空格的拆分，但这并不可靠。

如果你有“约翰·菲茨杰拉德·肯尼迪”，那很容易。你的名字是“约翰”，中间是“菲茨杰拉德”，最后是“肯尼迪”。没问题。

如果你有“玛丽安萨默斯”怎么办？名字应该是“Mary Ann”，姓氏应该是“Summers”，但在空格上拆分并不知道这一点。在空格上拆分会给你“Mary”、“Ann”和“Summers”，这是错误的。

反之，如果你有“Eddie Van Halen”呢？“Eddie”是名字，“Van Halen”是姓氏，但是打破空格会给你“Eddie”、“Van”和“Halen”，这是错误的。

就此而言，你可以拥有“Mary Ann Van Halen”，然后你会怎么做？

底线：如果您没有将名字和姓氏作为单独的数据点捕获，则无法可靠地将它们分开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T13:57:47.547

```
SQL> select substr(customer_name1, 0, instr(customer_name1, ' ')-1) as first_name
  2       , substr(customer_name1, instr(customer_name1, ' ')+1,
  3                instr(customer_name1, ' ', -1, 1) - instr(customer_name1, ' ') - 1) as mid_name
  4       , substr(customer_name1, instr(customer_name1, ' ', -1) + 1) last_name
  5    from (select 'ALI AHMAD KHAN' customer_name1 from dual)
  6  /

FIR MID_N LAST
--- ----- ----
ALI AHMAD KHAN 
```

这可以处理具有多个中间名的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T14:11:09.933

将 -1 作为起始位置，子字符串将从末尾开始计数，然后

找到空白的instr希望它有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T13:58:57.787

这有点难看，但它会分开每一块：

```
with data(customer_name1) as
(
    select 'ALI AHMAD KHAN'
    from dual
),
first(firstname, customer_name1) as
(
    select substr(customer_name1, 0, instr(customer_name1, ' ')-1) as first_name,
        ltrim(replace(customer_name1, substr(customer_name1, 0, instr(customer_name1, ' ')-1), '')) customer_name1
    from data
),
middle(firstname, middlename, customer_name1) as
(
    select firstname, 
        substr(customer_name1, 0, instr(customer_name1, ' ')-1) middlename,
        ltrim(replace(customer_name1, substr(customer_name1, 0, instr(customer_name1, ' ')-1), '')) customer_name1
     from first
)
select firstname, middlename, customer_name1 as LastName
from middle 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/d41d8/5236)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-05T04:37:14.613

将名字、中间名、姓氏与全名分开。

它奏效了`oracle 11g`。例如，考虑具有一个字段调用**uname**的表用户名，其中包含以下名称。

```
sachin ramesh tendulkar
shiva sudharson s
shiva kumar s
shiva nandhan s
shiva selvan s 
```

要将名称拆分为名字、中间名、姓氏，以下查询有效。

```
select 
substr(uname,1, instr(uname,' ')) as firstname, 
substr(uname, instr(uname, ' '), instr(uname, ' ', 1, 2)-instr(uname, ' ')) as middlename,
substr(uname, instr(uname, ' ',1,2), length(uname)) as lastname from username; 
```

**结果将如下所示：**

```
sachin   ramesh  tendulkar
shiva    sudharson   s
shiva    kumar   s
shiva    nandhan     s
shiva    selvan  s 
```

# jquery - jQuery - 不是正文中的选择器

> ID：13879853
> 
> 赞同：2
> 
> 时间：2012-12-14T13:43:45.370
> 
> 标签：jquery, jquery-selectors

我有一个使用通常语法（页眉、主页、页脚）的网站。
我的主要部分有一个子导航。

我的问题：
子导航的 ID 为 #nav_sub。如果页面“imprint”、“contact”或“newsletter”已加载，我的 CMS (Contao) 将在 body-tag 中添加类“footerstyle”，如下所示：

```
<body class="mac chrome ch24 footerstyle"> 
```

对于子导航，我添加了一个不错的悬停效果，但我不希望在加载“footerstyle”时对子导航产生这种效果。这有可能吗？

这就是我选择子导航的方式：

```
var $subnavi = jQuery("#nav_sub #navigation"); 
```

我试过 :not 和 .not() 但它没有奏效。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T13:45:19.840

假设您现有的选择器`"#nav_sub #navigation"`是正确的（带有 id 的元素，`navigation`如果它在带有 id 的元素内`nav_sub`），那么您可以使用

```
$("#nav_sub #navigation").not("body.footerstyle #navigation") 
```

或者

```
$("body:not(.footerstyle) #nav_sub #navigation") 
```

如果您没有关于#navigation 在#nav_sub 中的特殊条件，只需使用

```
$("body:not(.footerstyle) #navigation") 
```

# svn - svn 存储库的可更新镜像，具有只读签出功能

> ID：13879855
> 
> 赞同：1
> 
> 时间：2012-12-14T13:44:02.890
> 
> 标签：svn, repository, mirror

我知道。标题不是很自我解释。但这是交易。

我在公司网络（Subversion）中有一个存储库。我们正常使用这个存储库。我想在我们的云服务器中制作这个存储库的镜像。

这里的工作流程理念是：

*   在云端做这面镜子
*   客户签出此镜像
*   我们继续向 local-server-repo 提交
*   当我们决定时，使这些更改在镜像上可用
*   客户端从镜像更新它的存储库

所以基本上，我想为客户端提供一种简单的方法来获取更新（这将是不变的），直接从我们的云存储库中获取，并且我想控制这个存储库何时从本地存储库中更新。

需要记住的一些事情： - 不，不能直接访问客户端到我们的网络（更多的是关于他们的安全策略而不是我们的） - 是的，我想通过 'svn-up' 来实现。准备一个包将“更复杂”，并且更新将是不断的。

知道怎么做吗？

我查看了 svnsync 和其他工具，但我不知道如何让它们做我想做的事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T17:03:57.430

好的。

我搜索了一下，发现 svnsync 是我想要的。

我按照这两个链接得到了我需要的东西。

[制作 subversion 存储库的本地镜像：使用 svnsync](http://cournape.wordpress.com/2007/12/18/making-a-local-mirror-of-a-subversion-repository-using-svnsync/)

[Google 代码 - 如何导入现有的 Subversion 存储库？](http://code.google.com/p/support/wiki/SubversionFAQ#How_do_I_import_an_existing_Subversion_repository?)

第一次同步需要很长时间，但以下只会更新新的修订。我的客户可以从云端结帐，并且只有当我向他们发出命令时，repos 才会同步。

# java - 如何在 Servlet 2.4 版的 init() 方法中获取 ContextPath

> ID：13879869
> 
> 赞同：7
> 
> 时间：2012-12-14T13:45:22.263
> 
> 标签：java, servlets, contextpath

我使用的是 2.4 版`Servlet`，我需要`ContextPath`通过`init()`在服务器启动时调用的方法，所以我没有任何可以调用的*Request 对象*`getContextPath()`，因为 Servlet 版本我也没有`getContextPath()`方法`ServletContext`。

有没有办法以某种方式得到这个`ContextPath()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T13:58:58.757

一个 Web 应用程序可以在多个不同*的*上下文路径上发布，因此上下文路径（单数）仅在特定请求的上下文中才有意义。Servlet 2.5 添加`getContextPath()`到`ServletContext`，指定返回此 Web 应用程序的“主要”上下文路径，但在早期规范版本中没有独立于容器的方式来访问此信息。

可能有一些技巧适用于某些容器，例如在 Tomcat 上，该`ServletContext.getResource()`方法返回带有自定义方案的 URL，格式为`jndi://hostname/context/...`. 因此，您可以使用

```
ctx.getResource("/").getPath() 
```

获取 Tomcat 上的上下文路径（或者可能`getResource("/WEB-INF/web.xml")`修剪尾部，如果您要求它提供不存在的文件，`getResource()`则指定返回）。`null`您将不得不尝试使用不同的容器来找到适用于这些容器的类似技巧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T13:51:37.427

正如这篇文章中所解释的那样，似乎只有 servlet 2.5 才有可能：[ServletContext getContextPath()](https://stackoverflow.com/questions/3120860/servletcontext-getcontextpath)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T13:58:38.993

您在 Servlet 2.4 中是对的，ServletContext 对象没有 getContextPath 方法。

我可以建议两个选项：

1.  将上下文路径设置为 servlet 的参数：

    `<servlet`>

    ```
    <servlet-name>initServlet</servlet-name>

    <servlet-class>net.cirrus-it.InitServlet`</servlet-class>

    <init-param>
            <param-name>contextPath</param-name>
            <param-value>/myApp</param-value>
    </init-param> 
    ```

    `</servlet`>

2.  尝试从方法 getRealPath() 确定上下文路径

[http://tomcat.apache.org/tomcat-5.5-doc/servletapi/javax/servlet/ServletContext.html#getRealPath(java.lang.String](http://tomcat.apache.org/tomcat-5.5-doc/servletapi/javax/servlet/ServletContext.html#getRealPath(java.lang.String) )

根据文档：

> 返回包含给定虚拟路径的真实路径的字符串。例如，路径“/index.html”返回服务器文件系统上的绝对文件路径，将由对“http://host/contextPath/index.html”的请求提供服务，其中**contextPath**是此 ServletContext的**上下文路径**.

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-14T13:50:51.360

试试这个代码：

```
class demo extends HttpServlet {
       public void init(ServletConfig config) {
             String path = config.getServletContext().getRealPath("/");
       }
} 
```

它应该工作

# rest - Netbeans 7.2 Restful 客户端脚本不起作用

> ID：13879870
> 
> 赞同：1
> 
> 时间：2012-12-14T13:45:30.500
> 
> 标签：rest, netbeans-7

我从 DB 创建了一个示例 Restful 服务，并使用**NetBeans 7.2**创建了一个测试 html 表单。虽然我可以通过 Restful Webservice 从 DB 获取和创建实体，但删除操作不起作用。

当我**分析 test-rebeans.js**时，我意识到 delete 方法尚未测试。您是否曾尝试使用 NetBeans 创建的工具测试 RESTful Web 服务？

```
delete_ : function(url) {
    window.alert(url);
    return this.httpRequest('DELETE', url, 'application/xml', true);
}, 
```

# cross-compiling - pkg-config 正在调查 /usr/local/lib/pkgconfig 即使 PKG_CONFIG_PATH 设置为另一个位置

> ID：13879871
> 
> 赞同：1
> 
> 时间：2012-12-14T13:45:44.120
> 
> 标签：cross-compiling, pkg-config

我正在使用 pkg-config 将项目交叉编译到 MIPS 平台。像往常一样，我将 PKG_CONFIG_PATH 变量设置为目标平台适合的目录（在这种情况下，类似于 /usr/local/mips_sdk/usr/local/lib/pkgconfig，但没关系）。

奇怪的是，当在 PKG_CONFIG_PATH var 指向的路径中找不到它们时，pkg-config 正在使用来自 /usr/local/lib/pkgconfig 的 .pc 文件。就像 /usr/local/lib/pkgconfig 硬编码在 pkg-config 的搜索路径中一样。

感觉有点奇怪，因为它会尝试将系统库（x86）链接到我的 mips 编译的东西。

有谁知道如何解决它？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:41:33.357

以下是我将如何调试此问题：运行

```
strace -o makelog -f -ff -v -s 9000 make 
```

这将为`makelog.<pid>`编译期间运行的所有进程创建文件。使用给定的选项，它们将包含一个完整的环境变量列表，因此您首先应该能够关注`PKG_CONFIG_PATH`并查看它是否/在哪里发生了变化。例如，您还可以找到诸如是否`/usr/local/lib/pkgconfig`从某个配置文件中读取的内容。

# google-maps - Google Maps API 动态多折线创建

> ID：13879872
> 
> 赞同：1
> 
> 时间：2012-12-14T13:45:44.790
> 
> 标签：google-maps, dynamic, google-maps-api-3, polyline, google-polyline

所以我有一个正在开发中的站点和一个用于演示的 REST 服务器，我正在检查站点中的一些设备并通过服务器上的 GET 发送名称。服务器从 mySQL DB 中找到一些地理定位数据并返回他们到站点作为对 GET 的响应。

我想为每个不同的设备动态绘制一条折线，并为每个设备添加从数据库返回的任意数量的位置。

问题是我需要创建一条折线：

--`markers`标记数组（我从数据库中获得的每个位置都有一个标记）

-- 以及`latlngs`地图上位置位置的数组

每个设备！

我检查的设备数量或我收到的每个设备的位置都不是静态的。我尝试使用创建新数组，`eval("var " + DeviceID + "_Markers = [];");`但它似乎不起作用......

基本上我现在做的是：从数据库中获取一个非常大的字符串中的结果，该字符串`$$`在不同`||`的设备之间，在设备的不同位置`#`之间以及在每个位置的字段之间！这是获取和“解码”字符串的代码：

```
var devArray = respData.split("$$");

for (i=0 ; i < devArray.length ; i++)
{
    var posArray = devArray[i].split("||");
    for (j=posArray.length-1 ; j >= 0 ; j--)
    {
        var data = posArray[j].split("#");
        var DeviceID = data[0];
        var Date = data[1];
        var Latitude = data[2];
        var Longitude = data[3];
        var Altitude = data[4];
        var Angle = data[5];
        var Speed = data[6];
        parent.ifr2.createLocationMarker(DeviceID,Date,Latitude,Longitude,Altitude,Angle,Speed);
    }
} 
```

`createLocationMarker()`调用 google maps api 所在的 htmp 页面上的特定方法，正如它所说，它为每个读取的位置创建一个新的位置标记。

```
 function createLocationMarker(DeviceID,Date,Latitude,Longitude,Altitude,Angle,Speed) {

    var newLocation =  new google.maps.LatLng(Latitude,Longitude);
    var locationMarker = new google.maps.Marker();

    locationMarker.setOptions({
      icon: locationIcon,
      shadow: newShadow,
      draggable: true,
      map: map,
      position: newLocation
    });

    if ((eval("typeof " + DeviceID + "_latlngs") === "undefined") {
        // latlngs Array
        eval("var " + DeviceID + "_latlngs = new google.maps.MVCArray();");

        // markers Array
        eval("var " + DeviceID + "_Markers = [];");

        // displayPath
        eval("var " + DeviceID + "_displayPath = new google.maps.Polyline({ map: map, strokeColor: '#" + Math.floor(Math.random()*16777215).toString(16) + "' ,strokeOpacity: 1.0, strokeWeight: 2, path: latlngs });");
    }

    eval(DeviceID + "_Markers.push(locationMarker);");
    eval(DeviceID + "_latlngs.push(newLocation);");
    eval(DeviceID + "_displayPath.setPath(" + DeviceID + "_latlngs);");

    locationMarker.setMap(map);

    var content = "<b>Device ID: </b>" + DeviceID + "</br><b>Date: </b>" + Date + "</br><b>Latitude: </b>" + Latitude + "</br><b>Longitude: </b>" + Longitude + "</br><b>Altitude: </b>" + Altitude + "</br><b>Angle: </b>" + Angle + "</br><b>Speed: </b>" + Speed + "Km/h";

    var infowindow = new google.maps.InfoWindow({
        content: content,
        disableAutoPan: true
    });

    google.maps.event.addListener(locationMarker, "dblclick", function() {
        infowindow.open(map,locationMarker);
    });

    map.setCenter(newLocation);
} 
```

这似乎`eval`在每个点上都创建了新数组，即使它们在第一次创建后应该存在......我确信必须有更好的方法来实现它，但我现在找不到任何......关于如何为每个不同的设备动态创建折线并在其中添加位置的任何想法？（或者使这项工作的一种方法，即使我知道这`eval`不是解决它的好方法..）

# iphone - 当我从 Twitter 或 facebook 成功授予权限后显示警报视图时应用程序崩溃

> ID：13879873
> 
> 赞同：-1
> 
> 时间：2012-12-14T13:45:47.437
> 
> 标签：iphone, objective-c, facebook, twitter, ios6

我正在为 iOS6 使用 Facebook 和 Twitter。它运作良好。但是当我显示警报视图时，该应用程序在 Twitter 和 Facebook 中都崩溃了。

以下是 Facebook 的代码。如果我评论这条线`[alert show];` ，它工作得很好。我不知道错误在哪里。

```
-(IBAction)signInWithTweetPresses:(id)sender
{
    if([TWTweetComposeViewController canSendTweet])
    {

        self.view.userInteractionEnabled=NO;
        self.navigationController.navigationBar.userInteractionEnabled=NO;
        [self.spinner startAnimating];

        NSLog(@"signInWithTweetPresses called");
        ACAccountStore *store = [[ACAccountStore alloc] init];
        ACAccountType *twitterType = [store accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];
        NSLog(@"store in aap delegate %@ ",store);
        NSLog(@"twittertype in aap delegate %@ ",twitterType);

        [store requestAccessToAccountsWithType:twitterType withCompletionHandler:^(BOOL granted, NSError *error) {
            if(granted) {
                // Remember that twitterType was instantiated above
                NSArray *twitterAccounts = [store accountsWithAccountType:twitterType];

                //////////////////
                if ([twitterAccounts count] > 0) {
                    // Grab the initial Twitter account to tweet from.
                    ACAccount *fbAccount = [twitterAccounts objectAtIndex:0];
                    NSLog(@"%@",fbAccount);
                    NSLog(@"accountsArray/loginWithFacebookClicked is    %@",twitterAccounts);

                    NSLog(@"username---%@\n accountDescription---%@ \n credential=====%@ \n fbAccount====%@",fbAccount.username,fbAccount.accountDescription, fbAccount.credential,fbAccount);

                    NSDictionary *tempDict = [[NSMutableDictionary alloc] initWithDictionary:[fbAccount dictionaryWithValuesForKeys:[NSArray arrayWithObject:@"properties"]]];
                    NSString *tempUserID = [[tempDict objectForKey:@"properties"] objectForKey:@"username"];
                    NSLog(@"tempUserID is  name is      %@",tempUserID);
                    self.emailStr=fbAccount.accountDescription;
                    self.nameForFacebook_String=fbAccount.username;
                    // self.fID_String=fbAccount.identifier;
                    self.fID_String = [NSString stringWithFormat:@"%@", [[fbAccount valueForKey:@"properties"] valueForKey:@"user_id"]] ;
                    NSLog(@"self.fID_String is  idd d is      %@",self.fID_String);
                    appDelegate.isForTwitterAlertBool=YES;
                    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@" " message:@"Successfully Logged in " delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil , nil];
                    [alertView show];
                }
                NSLog(@"twitter cata in aap delegate %@ ",twitterAccounts);

            }
            else{
                [self.spinner stopAnimating];
                self.view.userInteractionEnabled=YES;
                self.navigationController.navigationBar.userInteractionEnabled=YES;
            }

        }];
    }
    else
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"No Twitter Accounts" message:@"There are no Twitter accounts configured. You can add or create a Twitter account in Settings." delegate:nil                                                       cancelButtonTitle:@"OK"  otherButtonTitles:nil];
        [alert show];

    }

} 
```

脸书的代码：

```
-(IBAction)loginWithFacebookClicked:(id)sender
{
    if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook])
    {
        self.view.userInteractionEnabled=NO;
        self.navigationController.navigationBar.userInteractionEnabled=NO;
        [self.spinner startAnimating];
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(sharingStatus) name:ACAccountStoreDidChangeNotification object:nil];

        NSLog(@"loginWithFacebookClicked narrrrrrrrrr");
        accountStore = [[ACAccountStore alloc] init];
        // Create an account type that ensures Twitter accounts are retrieved.
        ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];
            NSArray * permissions = [NSArray arrayWithObjects:@"email",@"user_location", nil];
        NSDictionary * dict=[NSDictionary dictionaryWithObjectsAndKeys:@"111718528994116",ACFacebookAppIdKey,permissions,ACFacebookPermissionsKey,ACFacebookAudienceEveryone,ACFacebookAudienceKey, nil];

        [accountStore requestAccessToAccountsWithType:accountType options:dict completion:^(BOOL granted, NSError *error) {
            if(granted ) {
                NSArray *accountsArray = [accountStore accountsWithAccountType:accountType];

                // You would ideally ask the user which account they want to tweet from, if there is more than one Twitter account present.
                if ([accountsArray count] > 0) {
                    // Grab the initial Twitter account to tweet from.
                    ACAccount *fbAccount = [accountsArray objectAtIndex:0];
                    NSLog(@"%@",fbAccount);
                    NSLog(@"accountsArray/loginWithFacebookClicked is    %@",accountsArray);

                    NSLog(@"username---%@\n accountDescription---%@ \n credential=====%@ \n fbAccount====%@",fbAccount.username,fbAccount.accountDescription, fbAccount.credential,fbAccount);

                    NSDictionary *tempDict = [[NSMutableDictionary alloc] initWithDictionary:[fbAccount dictionaryWithValuesForKeys:[NSArray arrayWithObject:@"properties"]]];
                    NSString *tempUserID = [[tempDict objectForKey:@"properties"] objectForKey:@"fullname"];
                    NSLog(@"tempUserID is  name is      %@",tempUserID);
                    self.emailStr=fbAccount.username;
                    self.nameForFacebook_String=tempUserID;
                    // self.fID_String=fbAccount.identifier;
                    self.fID_String = [NSString stringWithFormat:@"%@", [[fbAccount valueForKey:@"properties"] valueForKey:@"uid"]] ;
                    NSLog(@"self.fID_String is  idd d is      %@",self.fID_String);
                    appDelegate.isForFacebookAlertBool=YES;
                    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@" " message:@"Successfully Logged in " delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil , nil];
                    [alertView show];
                }
            }
            else
            {
                [self.spinner stopAnimating];
                self.view.userInteractionEnabled=YES;
                self.navigationController.navigationBar.userInteractionEnabled=YES;
            }
        }];

    }
    else{

        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"No Facebook Accounts" message:@"There are no Facebook accounts configured. You can add or create a Facebook account in Settings." delegate:nil                                                       cancelButtonTitle:@"OK"  otherButtonTitles:nil];
        [alert show];

    }
} 
```

Facebook 的崩溃报告：CoreAnimation：警告，删除了未提交 CATransaction 的线程；在环境中设置 CA_DEBUG_TRANSACTIONS=1 以记录回溯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T19:56:09.213

使用以下代码显示警报，它应该可以工作：

```
dispatch_async(dispatch_get_main_queue(),^{

UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@" " message:@"Successfully Logged in" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];

[alertView show];

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:57:42.253

我认为您的警报视图代码导致崩溃，因为您已将 nil 放在另一个按钮标题中，请参阅此

```
UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@" " message:@"Successfully Logged in " delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil , nil];
[alertView show]; 
```

在 otherButtonTitles 你把 nil, nil

这可能是导致崩溃的原因

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-14T15:37:30.397

您的警报视图代表为零。试着做那个自己。

> UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@" " message:@"成功登录" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil , nil]; [警报视图显示]；

# objective-c - '只有在 UIUserInterfaceIdiomPad 下运行时才支持 UISplitViewController'

> ID：13879878
> 
> 赞同：1
> 
> 时间：2012-12-14T13:46:12.720
> 
> 标签：objective-c, xcode

当我尝试在我的 iPad 6.0 模拟器中使用我的应用程序时遇到问题，每次都遇到同样的问题 **由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“仅在 UIUserInterfaceIdiomPad 下运行时才支持 UISplitViewController”**

我真的不知道为什么

> -(BOOL)应用程序:(UIApplication *)应用程序 didFinishLaunchingWithOptions:(NSDictionary *)launchOptions { if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad){ UISplitViewController *spvc = (UISplitViewController* ) self.window.rootViewController; spvc.delegate = [spvc.viewControllers lastObject]; } 返回是；}

这里怎么可能是错误/或在哪里

```
- (void) :(UISplitViewController *)svc willHideViewController:(UIViewController *)aViewController withBarButtonItem:(UIBarButtonItem *)barButtonItem forPopoverController:(UIPopoverController *)pc {

barButtonItem.title = @"Master";
NSMutableArray *items = [[self.toolbar items]mutableCopy];
[items insertObject:barButtonItem atIndex:0];
[self.toolbar setItems:items animated:YES];
self.masterPopOverController = pc;}

-(void) splitViewController:(UISplitViewController *)svc willShowViewController:(UIViewController *)aViewController invalidatingBarButtonItem:(UIBarButtonItem *)barButtonItem{

NSMutableArray *items = [[self.toolbar items]mutableCopy];
[items insertObject:barButtonItem atIndex:0];
[self.toolbar setItems:items animated:YES];
self.masterPopOverController = nil;} 
```

感谢您的帮助和快速解答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-07T06:10:29.523

从 XCode 项目导航器...

1.  点击你的项目
2.  单击位于**“目标”下的应用名称**
3.  单击右上角的**“摘要”**选项卡
4.  查看标有“iPhone/iPod 部署信息”的部分**并****找到**“**主故事板”**如果主故事板在列表框中 显示类似“MainStoryboard_iPad ”的内容，这就是问题所在。

 **要修复它，请将其更改为故事板的***iPhone***版本。（例如“MainStoryboard_iPhone **”**）

**为什么？**

创建通用应用程序时，它会为 iPhone***和****iPad**创建部署信息***。如果您遇到此错误，您可能已将目标部署配置为使用错误的故事板。由于模拟器认为它是 iPhone，它使用 iPhone 部署，但问题是 iPhone 部署说使用 iPad 故事板进行初始化，而 iPad 故事板包含一个**UISplitViewController**不能在 iPhone 上运行 - 因此出现错误。**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T13:51:44.820

UISplitViewController 是一个只为 iPad 而不是 iPhone 的组件。

由于您的应用程序是通用应用程序，因此您正在谈论的条件（“UIUserInterfaceIdiomPad”之一）检查设备是 iPad 还是 iPhone。因此是必须的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T14:33:02.517

您无法使用 UISplitViewController 类来实现这一点。如果您查看[Apple 参考](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/iPadControllers/iPadControllers.html#//apple_ref/doc/uid/TP40007457-CH6-SW4)文档，它清楚地指出 UISplitViewController 是 iPad 特定的视图控制器。****

# mysql - 传值 SELECT 语句

> ID：13879882
> 
> 赞同：0
> 
> 时间：2012-12-14T13:46:20.490
> 
> 标签：mysql, vb.net

假设`sDatabase = "mytable"`字符串格式

```
cmd.CommandText = "INSERT INTO test.target SELECT * FROM '" & sDatabase & "'.source" 
```

这个查询给了我一个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:49:43.607

您不应该使用 '' 作为表名：

```
cmd.CommandText = "INSERT INTO test.target SELECT * FROM " & sDatabase & ".source" 
```

# jquery - Append() 在 IE 中不起作用

> ID：13879886
> 
> 赞同：0
> 
> 时间：2012-12-14T13:46:23.543
> 
> 标签：jquery, internet-explorer, append, innerhtml

我正在尝试在我的网站中动态加载 HTML 内容。它适用于除 IE8 之外的所有浏览器。

我的 jQuery：

```
$(document).ready(function() {  
    var mycontent14dec = '<a href="http://www.youtube.com/mtsconnects" target="_blank"><img src="../sliderbanners/nh7-livestreaming.jpg" width="589" height="309" /></a>' 
        + '<a href="../events/nh7/index.html"><img src="../sliderbanners/nh7-1.jpg" width="589" height="309" /></a>' 
        + '<a href="../events/nh7/index.html"><img src="../sliderbanners/nh7-2.jpg" width="589" height="309" /></a>' 
        + '<a href="http://www.mtsindia.in/justdongle/" target="_blank"><img src="../sliderbanners/Diwali_festival.jpg" width="589" height="309" /></a>';

    $(".addhtml").append(mycontent14dec);
}); 
```

我的 HTML：

```
<div class="addhtml"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:48:53.577

这可能是您格式化变量的方式，将 html 放在一个字符串中，全部放在一行上，如果它可以工作，那么这就是您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T04:48:00.343

问题是javascript TYPE，IE只支持type= **text/javascript**

@Matanya 感谢您指出:)

# html - Rails 命名空间路由问题

> ID：13879889
> 
> 赞同：2
> 
> 时间：2012-12-14T13:46:35.890
> 
> 标签：html, ruby-on-rails-3, ruby-on-rails-3.1, routing

我的问题很简单，我认为可以使用 Restful Style 轻松解决，但我只想以非 restful 风格来解决。

```
# Controller
class Admin::SocialFeedsController < ApplicationController
...
end

# Rotues
namespace :admin do
  resources :social_feeds do
  collection do
    post 'create'
    get 'index'
    ...
    end
  end
end

<form action="/admin/social_feeds/create" method="post">
...
</form> 
```

它希望将`social_feeds`操作映射到 Admin 控制器而不是`Admin::SocialFeedsController`'s create 操作。

我不想在这里使用 Rails 表单助手。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:00:17.007

```
# Rotues
namespace :admin do
  resources :social_feeds
end 
```

我假设您希望 /admin/social_feeds URL 工作？

# caching - Phonegap（构建）aap 与远程数据库和文件同步

> ID：13879895
> 
> 赞同：1
> 
> 时间：2012-12-14T13:47:13.060
> 
> 标签：caching, cordova, sync

情况如下。我正在为几个城镇的旅游信息开发一个应用程序。客户希望能够由 Web 内容管理员更新应用程序数据库。我已经设法用远程数据库内容更新了 sqlite 本地数据库，但是在下载图像时遇到了更多困难。

我可以下载图像，问题是，在更新远程图像时（这里重要的是要说它们都具有相同的名称：“list_img.jpg”或“detail_img.jpg”更改它们存储的目录）似乎应用程序（或者可能是服务器）将其保存在缓存中，因此它不会下载最新的图像，而是下载以前的版本。

我是对的？如果是这样，我该如何避免这种缓存？

我还想知道是否有人知道检查设备中 sqlite 本地内容的方法。我可以在 chrome 中控制它，但检索电话数据库中的内容（警报等）对我来说有点棘手。

提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:20:37.053

你已经试过这个来获取你的数据了吗？

```
 $.ajax({
        url: yoururl,
        type: 'GET',
        data: yourdata,
        cache: false,
        success: function(data){
            //Do stuff
        }
    }) 
```

# jquery - 如何将元素粘贴到页面滚动的相同位置？

> ID：13879896
> 
> 赞同：2
> 
> 时间：2012-12-14T13:47:14.650
> 
> 标签：jquery, css

我想知道当用户滚动页面时如何强制 DOM 元素保持在同一位置。比方说，在页面的右下角。无论当前页面的滚动位置是什么，我都需要该元素相同可见。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T13:48:36.243

你只需要一些 CSS：

```
#theElement {
    position: fixed;
    right: 0;
    bottom: 0;
} 
```

[**演示。**](http://jsfiddle.net/wemBK/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:48:39.410

CSS [`position:fixed`](https://developer.mozilla.org/en-US/docs/CSS/position)：

```
#myelem{
    position:fixed;
    bottom:0;
    right:0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T13:49:46.570

用于`position:fixed;`此。固定是一个规则，即使页面正在滚动，div 也需要保持在该位置

**CSS**

```
.div
{
    position:fixed;
    bottom:10px;
    right:10px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T13:49:47.030

您可能将 css position absolute 与 position fixed 混淆了。您可能想要的是固定位置。不需要 jQuery。

# java - 推特提要 API

> ID：13879901
> 
> 赞同：2
> 
> 时间：2012-12-14T13:47:34.760
> 
> 标签：java, twitter, feed

我需要构建一个应用程序来访问 Twitter 提要并使用 java 将其存储到日志文件中。

如果可能的话，应该有一些控制允许跟踪我们可以过滤日志文件中的数据的关键字。

如何开始？它像 RSS 提要吗？我没有任何想法。请帮帮我。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:53:59.707

`Twitter4J`作为开始使用怎么样。图书馆项目是开源的。

您可以在这里找到示例：[https ://github.com/yusuke/twitter4j](https://github.com/yusuke/twitter4j)

# matlab - 依赖分析的matlab函数

> ID：13879903
> 
> 赞同：3
> 
> 时间：2012-12-14T13:47:40.593
> 
> 标签：matlab, matlab-deployment

我正在寻找一种程序化的方式来运行依赖分析。分析会告诉我给定项目使用的所有工具箱。

该功能类似于“[分析 matlab 源代码的工具”和](https://stackoverflow.com/questions/9798431/tool-for-analyzing-matlab-source-codes)[此处记录](http://www.mathworks.com/help/matlab/creating_guis/dependency-analysis.html)的应用程序部署过程检查。

主要区别在于我想使用脚本而*不是 GUI*来执行此操作。最终目标是将其作为预提交挂钩运行，以防止将新的工具箱依赖项引入项目中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T13:52:21.520

看：

depfun：列出函数或 P 文件的依赖关系

[http://www.mathworks.nl/help/matlab/ref/depfun.html](http://www.mathworks.nl/help/matlab/ref/depfun.html)

和

fdep：行人函数依赖查找器

[http://www.mathworks.com/matlabcentral/fileexchange/17291-fdep-a-pedestrian-function-dependencies-finder](http://www.mathworks.com/matlabcentral/fileexchange/17291-fdep-a-pedestrian-function-dependencies-finder)

您可以使用后者作为示例，以获得灵感并围绕 depfun 构建自己的包装器，或者作为使用示例。

# http - 解压缩 gzip 压缩的 HTTP 响应（分块编码）

> ID：13879911
> 
> 赞同：2
> 
> 时间：2012-12-14T13:48:27.540
> 
> 标签：http, gzip, compression, chunked-encoding

就像标题中描述的那样，我想解压缩一个 HTTP-Resonse。这是我所做的：

1.  接收http响应
2.  检查内容编码（假设它的gzip）
3.  从 http-response 中提取内容（这一点的结果是一个包含 HTTP-Message 内容的字节数组）
4.  尝试解压缩内容字节数组

最后一点不起作用。我收到此错误：“GZip 标头中的幻数不正确。请确保您传入的是 GZip 流。”

你能告诉我我做错了什么吗？

编辑：由于还没有答案，我在这里发布我的解压缩代码：

```
 public static byte[] Decompress_GZip(byte[] gzip)
    {
        using (GZipStream stream = new GZipStream(new MemoryStream(gzip),
                                   CompressionMode.Decompress))
        {
            byte[] buffer = new byte[size];
            using (MemoryStream memory = new MemoryStream())
            {
                int count = 0;
                do
                {
                    count = stream.Read(buffer, 0, size);
                    if(count>0)
                    {
                        memory.Write(buffer, 0, count);
                    }
                }
                while (count > 0);
                return memory.ToArray();
            }
        }
    } 
```

我还想到了什么：字节序可能有什么问题吗？也许 GZip 流无法处理网络字节顺序。

编辑：至少我注意到，这个错误只发生在接收分块消息时。让我们假设一个分块消息如下所示：

```
STATUS-LINE
HEADER_1 /cr/n
...
HEADER_n /cr/n
/cr/n
CHUNK1_SIZE /cr/n
CHUNK1_DATA /cr/n
...
CHUNKn_SIZE /cr/n
CHUNKn_DATA /cr/n
0 /cr/n 
```

这就是我的猜测，我必须做些什么来解压消息：

1.  提取`CHUNK1_DATA`到`CHUNKn_DATA`（没有`/cr/n`和没有`0`，最后一个块）
2.  连接`CHUNK1_DATA`...`CHUNKn_DATA`到一个`byte-array`
3.  `byte-array`用上面的代码解压

我真的很感激一个答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:00:03.777

好吧，我只是尝试过自己，它就像我在问题中描述的那样工作。如果您对我的代码感兴趣，请推荐或给我留言。

# zend-framework2 - zf2 导航 - 'Zend\ServiceManager\ServiceManager::get 无法获取或创建导航实例'

> ID：13879915
> 
> 赞同：3
> 
> 时间：2012-12-14T13:48:38.680
> 
> 标签：zend-framework2

大家好！

我正在学习zf2，并尝试设置导航面板（基于：[Zend Framework 2: Zend_Navigation](https://stackoverflow.com/questions/11397226/zend-framework-2-zend-navigation)），但电脑的答案仍然是：

An error occurred 执行过程中发生错误；请稍后再试。附加信息：Zend\ServiceManager\Exception\ServiceNotFoundException 文件：/var/www/zf2-tutorial/vendor/zendframework/zendframework/library/Zend/ServiceManager/ServiceManager.php:453 消息：Zend\ServiceManager\ServiceManager::get 无法获取或创建导航实例

module.config.php 包含：

```
 'servicemanager' => array(
        'factories' => array(
            'navigation' => function($sm) {
                $config = $sm->get('Config');
                $navigation = new \Zend\Navigation\Navigation($config->get('navigation'));
                return $navigation;
            }
        ),
    ), 
```

我在主 config/autoload 文件夹中有一个 application.global.php，如下所示：

```
<?php

return array(
    // All navigation-related configuration is collected in the 'navigation' key
    'navigation' => array(
        // The DefaultNavigationFactory we configured in (1) uses 'default' as the sitemap key
        'default' => array(
            // And finally, here is where we define our page hierarchy
            'Album' => array(            
                    'label'      => 'Albumlista',
                    'route'      => 'album',
                    'action' => 'index',
                    'pages'      => array(
                        array(
                            'label'      => 'Add',
                            'route'      => 'album',
                            'action'     => 'add'
                            )           
                       )
               ),
            'Application' => array(            
                    'label'      => 'Alap alkalmazás',
                    'route'      => 'application',
                    'action' => 'index',

               )
        ),
    ),

); 
```

从控制器我给出这个命令：

```
$config = $this->getServiceLocator()->get('navigation'); 
```

有人可以帮我解决这个问题吗？我读到了[http://adam.lundrigan.ca/2012/07/quick-and-dirty-zf2-zend-navigation/](http://adam.lundrigan.ca/2012/07/quick-and-dirty-zf2-zend-navigation/)，我试过了，我做到了，但我想与 acl 结合，这样我写了这个问题。

感谢您的每一个帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T09:31:46.397

如果您查看 Naviagtion 类的构造函数，它需要一个 Pages 数组或一个 Traversable 对象。您正在传入一个包含页面数组的数组，试试这个：

```
'servicemanager' => array(
    'factories' => array(
        'navigation' => function($sm) {
            $navigation = new \Zend\Navigation\Service\DefaultNavigationFactory;
            $navigation = $navigation->createService($sm);

            return $navigation;
        }
    ),
), 
```

默认工厂将通过在导航配置下查找默认节点来自动找到您的配置。

您也可以保持原样，但将“默认”节点（在配置中的 Navigation 节点下）传递给 Navigation 构造函数，因为这是实际的页面定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-01T08:18:39.870

当我更改以下行时，我的问题解决了`application.config.php`

```
'config/autoload/{,*.}{global,local}.php', //[This is default setting]

config_glob_paths' => array( '<PUT_ABSOLUTE_PATH_HERE>{,*.}{global,local}.php', ), 
```

代替`'config/autoload'`完整路径而不是相对路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-09T20:24:46.940

我认为您正在使用视图助手

$this->escape($this->somevar); //这是zf1视图助手

在 zf2 中，您可以使用视图助手逃脱

$this->escapeHtml($this->somevar);

# c# - 连接语句中列的一部分的总和

> ID：13879917
> 
> 赞同：0
> 
> 时间：2012-12-14T13:48:44.327
> 
> 标签：c#, sql, ms-access

**钢铁订单**

```
OrderNumber
-----------
0000843989    
0000843124    
0000881234    
0000123456    
----------- 
```

**定稿印刷贴纸**

```
SN                  |  PanelBuildTime
-------------------------------------
0000843989-8R8-4-0  |  360
0000843989-8R8-4-1  |  200
0000843989-8R8-4-2  |  900    
0000843989-8R8-4-3  |  360
0000843989-8R8-4-4  |  460
0000843989-8S-1-0   |  220    
0000843989-8-2-0    |  360
etc..
------------------------------------- 
```

期望的**结果**是：

```
OrderNumber |  PanelBuildTime
-----------------------------
0000843989  |  2860    
etc..
----------------------------- 
```

**我尝试了什么？**

```
Select OrderNumber, Sum(PanelBuildTime) from SteelOrders 
INNER JOIN FinalizedPrintedStickers 
ON 
SteelOrders.OrderNumber = LEFT(FinalizedPrintedStickers.SN,10) 
```

不幸的是，我不知道如何`WHERE`在 steelorder 表中的每个项目上添加一个子句

另外（因为我在我的 C# 代码中使用 oledb 从钢铁订单表中读取）我已经尝试了每次读取`OleDbDataReader`Executing the `Select Sum(PanelBuildtime) where ordernumber = reader["OrderNumber"]`，但这非常慢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T13:52:37.003

您可以按订单号分组以显示构建时间的摘要

```
Select OrderNumber, Sum(PanelBuildTime) from SteelOrders 
INNER JOIN FinalizedPrintedStickers 
ON 
SteelOrders.OrderNumber = LEFT(FinalizedPrintedStickers.SN,10)
GROUP BY SteelOrders.OrderNumber 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T13:55:33.320

因为您可能经常希望不同的列具有不同的条件，所以您还应该了解以下`case`语句：

```
Select OrderNumber, Sum(case when SteelOrders.item = '0000843989' then PanelBuildTime end)
from SteelOrders INNER JOIN
    FinalizedPrintedStickers 
    ON SteelOrders.OrderNumber = LEFT(FinalizedPrintedStickers.SN,10) 
```

在 Access 中（对不起，我错过了标签），你必须使用`IIF`而不是`case`.

哦，根据您上面的评论，您想要一个`group by`：

```
Select OrderNumber, Sum(PanelBuildTime)
from SteelOrders INNER JOIN
    FinalizedPrintedStickers 
    ON SteelOrders.OrderNumber = LEFT(FinalizedPrintedStickers.SN,10)
group by OrderNumber 
```

# windows-8 - 找不到具有名称/键 AppBarButtonStyle 的资源

> ID：13879919
> 
> 赞同：4
> 
> 时间：2012-12-14T13:48:50.617
> 
> 标签：windows-8, windows-store-apps, winrt-xaml

winrt 中包含的常见样式让我例外

```
<Button Style="{StaticResource AppBarButtonStyle}" /> 
```

这个基本代码触发`Cannot find a Resource with the Name/Key AppBarButtonStyle`异常

公共资源包含在我的 app.xaml 中，我可以浏览此样式的定义。

我在这里错过了一些非常大的东西吗？

ps：我试过重启VS

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-16T02:52:27.823

我遇到的问题是在一个单独的资源分类中重新定义</p>

```
<Button Style="{StaticResource AppBarButtonStyle}" /> 
```

如果将其中的某个页面重新放在内部的 xmal 里，OK。</p>

我解决这个是在资源搜索添加问题</p>

```
<ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="Common/StandardStyles.xaml"/>
</ResourceDictionary.MergedDictionaries> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-01T14:36:41.747

在 Windows 8.1 中，包含 AppBarButtonStyle 的 StandardStyles.xaml 文件已被删除。相反，您可以使用 AppBarButton，如下所示：

```
<AppBarButton Icon="Play" Label="Play" /> 
```

查看 Tim Heuer 的这篇文章：http: [//timheuer.com/blog/archive/2013/10/29/remove-standardstyles-xaml-from-windows-8-1-winrt-projects.aspx](http://timheuer.com/blog/archive/2013/10/29/remove-standardstyles-xaml-from-windows-8-1-winrt-projects.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-08T06:35:26.953

以下是您的三个可能原因：

1.  /Common/StandardStyles.xaml 还在吗？
2.  AppBarButtonStyle 是否仍在 /Common/StandardStyles.xaml 中？
3.  App.xaml 是否仍然引用 /Common/StandardStyles.xaml ？

App.xaml 应如下所示：

```
<Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="Common/StandardStyles.xaml"/>
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources> 
```

祝你好运！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-21T11:41:44.260

我通过在扩展 AppBarButtonStyle 的自定义样式之前定义 AppBarButtonStyle 来修复它。

# java - 无法将整数对象从 C 传递到 Java

> ID：13879921
> 
> 赞同：0
> 
> 时间：2012-12-14T13:48:53.340
> 
> 标签：java, android, android-ndk, java-native-interface

我在 JNI 中面临一个微不足道的（我相信）问题，即将一个 Integer 对象从 C 传递到 Java 。

这是非常简单的代码

```
public class CallByNative {

         public CallByNative(int a )
         {
             System.out.println("Constructor caleld");
         }

          public Integer objectMethod(Integer a )
          {
              System.out.println("object method");

                return 1;
          }

} 
```

现在，当我尝试通过以下代码调用**objectMethod时，我的代码崩溃了**

jobject Java_com_example_hellojni_HelloJni_callbackJava(JNIEnv * env, jobject this) {

```
/*Initialize Class*/
jclass cls = (*env)->FindClass(env, "com/example/hellojni/CallByNative");
jmethodID methodID = (*env)->GetMethodID(env, cls, "<init>", "(I)V");
jobject thisObj=(*env)->NewObject(env,cls, methodID, 5);

jmethodID meth1 = (*env)->GetMethodID(env,cls, "objectMethod", "(Ljava/lang/Integer;)Ljava/lang/Integer;");
number=10; // can't send this to java , since this is a primitive type I.E int . 

//Construct an int object
jclass clsInt = (*env)->FindClass(env, "java/lang/Integer");
jmethodID methodID1 = (*env)->GetMethodID(env, clsInt , "<init>", "(I)V");
jobject intObject= (*env)->NewObject(clsInt, methodID1, number);

jstring str=(jstring) (*env)->CallObjectMethod(env,cls,meth1,intObject);
__android_log_print(ANDROID_LOG_DEBUG, DEBUG_TAG, "NDK: Value returned from java: [%s]", str);

return thisObj; 
```

}

当它命中时，我会受到这个无信息的堆栈跟踪的欢迎。

1

```
12-14 18:40:59.534: I/System.out(1088): Debugger has connected
12-14 18:40:59.534: I/System.out(1088): waiting for debugger to settle...
12-14 18:40:59.734: I/System.out(1088): waiting for debugger to settle...
12-14 18:40:59.934: I/System.out(1088): waiting for debugger to settle...
12-14 18:41:00.136: I/System.out(1088): waiting for debugger to settle...
12-14 18:41:00.334: I/System.out(1088): waiting for debugger to settle...
12-14 18:41:00.534: I/System.out(1088): waiting for debugger to settle...
12-14 18:41:00.734: I/System.out(1088): waiting for debugger to settle...
12-14 18:41:00.934: I/System.out(1088): waiting for debugger to settle...
12-14 18:41:01.194: I/System.out(1088): debugger has settled (1370)
12-14 18:41:01.814: D/dalvikvm(1088): Trying to load lib /data/data/com.example.hellojni/lib/libhello-jni.so 0x45ebe098
12-14 18:41:01.814: D/dalvikvm(1088): Added shared lib /data/data/com.example.hellojni/lib/libhello-jni.so 0x45ebe098
12-14 18:41:01.814: D/dalvikvm(1088): No JNI_OnLoad found in /data/data/com.example.hellojni/lib/libhello-jni.so 0x45ebe098, skipping init
12-14 18:41:01.854: I/System.out(1088): 31
12-14 18:41:01.886: I/System.out(1088): Hello. This is a test sentence.
12-14 18:41:01.904: I/System.out(1088): Hello. This is a test sentence.This is appended
12-14 18:41:01.914: I/System.out(1088): Constructor caleld
12-14 18:41:02.094: I/DEBUG(31): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
12-14 18:41:02.094: I/DEBUG(31): Build fingerprint: 'generic/sdk/generic/:2.2/FRF91/43546:eng/test-keys'
12-14 18:41:02.114: I/DEBUG(31): pid: 1088, tid: 1088  >>> com.example.hellojni <<<
12-14 18:41:02.114: I/DEBUG(31): signal 11 (SIGSEGV), fault addr 0000000a
12-14 18:41:02.114: I/DEBUG(31):  r0 0000000a  r1 00000007  r2 80886910  r3 00000088
12-14 18:41:02.114: I/DEBUG(31):  r4 0000aa50  r5 45ec5dc0  r6 00000007  r7 45ec5e68
12-14 18:41:02.114: I/DEBUG(31):  r8 42297820  r9 4208bcb4  10 0000ce04  fp 4208bcb0
12-14 18:41:02.114: I/DEBUG(31):  ip 808882a4  sp bebab848  lr 809010ef  pc 80901024  cpsr 00000030
12-14 18:41:02.204: I/DEBUG(31):          #00  pc 00001024  /data/data/com.example.hellojni/lib/libhello-jni.so
12-14 18:41:02.204: I/DEBUG(31):          #01  lr 809010ef  /data/data/com.example.hellojni/lib/libhello-jni.so
12-14 18:41:02.204: I/DEBUG(31): code around pc:
12-14 18:41:02.204: I/DEBUG(31): 80901004 1c026823 6f1e1c29 23051c20 bd7047b0 
12-14 18:41:02.204: I/DEBUG(31): 80901014 00001842 00001848 0000184c 1c0eb5f8 
12-14 18:41:02.204: I/DEBUG(31): 80901024 490c6803 699b1c04 47984479 1c054a0a 
12-14 18:41:02.214: I/DEBUG(31): 80901034 68204b0a 447a2184 447b5847 1c201c29 
12-14 18:41:02.214: I/DEBUG(31): 80901044 682347b8 1c291c02 1c206f1f 47b81c33 
12-14 18:41:02.214: I/DEBUG(31): code around lr:
12-14 18:41:02.214: I/DEBUG(31): 809010cc 682147e0 4b164a15 447a598e 447b1c29 
12-14 18:41:02.214: I/DEBUG(31): 809010dc 47b01c20 23886822 200a4680 f7ff58d6 
12-14 18:41:02.214: I/DEBUG(31): 809010ec 1c29ff99 46421c03 47b01c20 4a0e490d 
12-14 18:41:02.214: I/DEBUG(31): 809010fc 44791c03 2003447a eec0f7ff bc041c38 
12-14 18:41:02.214: I/DEBUG(31): 8090110c bdf04690 46c0e7fb 000017de 000017be 
12-14 18:41:02.214: I/DEBUG(31): stack:
12-14 18:41:02.214: I/DEBUG(31):     bebab808  42297768  /dev/ashmem/dalvik-LinearAlloc (deleted)
12-14 18:41:02.214: I/DEBUG(31):     bebab80c  80902890  /data/data/com.example.hellojni/lib/libhello-jni.so
12-14 18:41:02.214: I/DEBUG(31):     bebab810  0000ccb0  [heap]
12-14 18:41:02.214: I/DEBUG(31):     bebab814  0000ccb0  [heap]
12-14 18:41:02.214: I/DEBUG(31):     bebab818  00000063  
12-14 18:41:02.214: I/DEBUG(31):     bebab81c  80841a6d  /system/lib/libdvm.so
12-14 18:41:02.214: I/DEBUG(31):     bebab820  0000aa50  [heap]
12-14 18:41:02.214: I/DEBUG(31):     bebab824  45ec5dc0  /dev/ashmem/mspace/dalvik-heap/2 (deleted)
12-14 18:41:02.224: I/DEBUG(31):     bebab828  80902880  /data/data/com.example.hellojni/lib/libhello-jni.so
12-14 18:41:02.224: I/DEBUG(31):     bebab82c  80831d81  /system/lib/libdvm.so
12-14 18:41:02.224: I/DEBUG(31):     bebab830  00000000  
12-14 18:41:02.224: I/DEBUG(31):     bebab834  8086dd20  /system/lib/libdvm.so
12-14 18:41:02.224: I/DEBUG(31):     bebab838  bebab85c  [stack]
12-14 18:41:02.224: I/DEBUG(31):     bebab83c  bebab85c  [stack]
12-14 18:41:02.224: I/DEBUG(31):     bebab840  df002777  
12-14 18:41:02.224: I/DEBUG(31):     bebab844  e3a070ad  
12-14 18:41:02.224: I/DEBUG(31): #00 bebab848  00000088  
12-14 18:41:02.224: I/DEBUG(31):     bebab84c  0000aa50  [heap]
12-14 18:41:02.224: I/DEBUG(31):     bebab850  45ec5dc0  /dev/ashmem/mspace/dalvik-heap/2 (deleted)
12-14 18:41:02.224: I/DEBUG(31):     bebab854  80836f71  /system/lib/libdvm.so
12-14 18:41:02.224: I/DEBUG(31):     bebab858  45ec5e68  /dev/ashmem/mspace/dalvik-heap/2 (deleted)
12-14 18:41:02.224: I/DEBUG(31):     bebab85c  809010ef  /data/data/com.example.hellojni/lib/libhello-jni.so
12-14 18:41:02.234: I/DEBUG(31):     bebab860  bebab878  [stack]
12-14 18:41:02.234: I/DEBUG(31):     bebab864  bebab898  [stack]
12-14 18:41:02.234: I/DEBUG(31):     bebab868  00000004  
12-14 18:41:02.234: I/DEBUG(31):     bebab86c  4816eb43  /data/dalvik-cache/data@app@com.example.hellojni-1.apk@classes.dex
12-14 18:41:02.234: I/DEBUG(31):     bebab870  4208bcbc  
12-14 18:41:02.234: I/DEBUG(31):     bebab874  80813978  /system/lib/libdvm.so
12-14 18:41:02.234: I/DEBUG(31):     bebab878  42296af4  /dev/ashmem/dalvik-LinearAlloc (deleted)
12-14 18:41:02.234: I/DEBUG(31):     bebab87c  0000ccb0  [heap]
12-14 18:41:02.234: I/DEBUG(31):     bebab880  4816eb43  /data/dalvik-cache/data@app@com.example.hellojni-1.apk@classes.dex
12-14 18:41:02.234: I/DEBUG(31):     bebab884  bebab980  [stack]
12-14 18:41:02.234: I/DEBUG(31):     bebab888  42296bf8  /dev/ashmem/dalvik-LinearAlloc (deleted)
12-14 18:41:02.234: I/DEBUG(31):     bebab88c  00000374  
12-14 18:41:02.705: I/BootReceiver(59): Copying /data/tombstones/tombstone_07 to DropBox (SYSTEM_TOMBSTONE)
12-14 18:41:02.724: D/Zygote(33): Process 1088 terminated by signal (11)
12-14 18:41:02.724: I/ActivityManager(59): Process com.example.hellojni (pid 1088) has died. 
```

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:06:27.430

以下行是错误的：

```
jstring str=(jstring) (*env)->CallObjectMethod(env,cls,meth1,intObject); 
```

第二个参数是错误的，由于该方法返回一个*Integer*实例，因此不应将其分配给字符串变量。

正确的调用可能是：

```
jobject result = (*env)->CallObjectMethod(env, thisObj, meth1, intObject); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:52:43.180

您可以使用 SIGSEGV 中的 ndk-stack 检查转储

# php - strtotime 函数的错误消息

> ID：13879922
> 
> 赞同：-3
> 
> 时间：2012-12-14T13:49:05.590
> 
> 标签：php

我收到以下错误

```
A non well formed numeric value encountered 
```

使用此函数调用：

```
 strtotime("-7 days", 2012-12-31); 
```

但是看不出有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T13:56:53.797

利用

```
echo  strtotime("-7 days  2012-12-31"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:53:08.467

的第二个参数[`strtotime()`](http://php.net/manual/en/function.strtotime.php)是一个`INT`，而不是一个字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T13:53:16.187

`2012-12-31`不是 PHP 中的日期；你正在做减法（结果是`1969`）。您需要使用`strtotime`将日期解析为整数时间戳。

幸运的是，这可以与`-7 days`您已经使用的字符串结合使用，如下所示：

```
strtotime("2012-12-31 -7 days"); 
```

# symfony - Symfony2 对所有人的 IP 限制

> ID：13879923
> 
> 赞同：4
> 
> 时间：2012-12-14T13:49:05.327
> 
> 标签：symfony, ip

我正在尝试对 Symfony2 中的特定路由应用 IP 限制，如[Symfony2 book](http://symfony.com/doc/current/book/security.html#securing-by-ip)中所述。我没有用户身份验证，我只想让我的服务回答来自特定 IP 的请求。

但我没有成功应用限制（我在测试期间总是通过）。

这是我的security.yml

```
jms_security_extra:
    secure_all_services: false
    expressions: true

security:
    encoders:
            Symfony\Component\Security\Core\User\User: plaintext

    role_hierarchy:
        ROLE_ADMIN:       ROLE_USER
        ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

    providers:
        in_memory:
            memory:
                users:
                   user:  { password: userpass, roles: [ 'ROLE_USER' ] }
                   admin: { password: adminpass, roles: [ 'ROLE_ADMIN' ] }

    firewalls:
        secured_area:
            pattern: ^/wsoa/tests
            anonymous: ~
            # http_basic:
                # realm: "Secured Demo Area"

    access_control:
        #- { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY, requires_channel: https }
        #- { path: ^/_internal/secure, roles: IS_AUTHENTICATED_ANONYMOUSLY, ip: 127.0.0.1 }
        # THE RESTRICTION I'D LIKE (FOR EXEMPLE 127.0.0.1)
        - { path: ^/wsoa_products_tests, roles: IS_AUTHENTICATED_ANONYMOUSLY, ip: 127.0.0.1 } 
```

这是我从 routing.yml 出发的路线：

```
wsoa_products_tests:
    pattern:  /wsoa/tests
    defaults: { _controller: WsoaProductsBundle:Test:display } 
```

任何人都知道如何使它工作？我应该忘记在 Symfony2 中执行此操作并使用 htaccess 执行此操作吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-06-05T16:08:17.167

要将路径限制为仅特定 IP，您可以将以下内容添加到您的`security.yml`access_control：

```
- { path: ^/yourpath, roles: IS_AUTHENTICATED_ANONYMOUSLY, ips: [1.1.1.1, 2.2.2.2, ...]  }
- { path: ^/yourpath, roles: ROLE_NO_ACCESS } 
```

如果您想限制所有 IP，请使用 IP 网络掩码，如下所示：

```
- { path: ^/yourpath, roles: IS_AUTHENTICATED_ANONYMOUSLY, ips: [1.1.1.0/24]  }
- { path: ^/yourpath, roles: ROLE_NO_ACCESS } 
```

注意：我在这里放置的 IP 地址需要替换为您要限制的 IP 地址。也替换`^/yourpath`为您的实际路径或子路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T14:23:52.557

我认为您不能在 access_control 配置中使用路由。相反，请尝试保护子路径 IE：

```
- { path: ^/wsoa, roles: IS_AUTHENTICATED_ANONYMOUSLY, ip: 127.0.0.1 } 
```

然后应该保护的路由使用前缀。

```
wsoa_products_tests:
    pattern:  /wsoa/tests
    defaults: { _controller: WsoaProductsBundle:Test:display } 
```

编辑：

您可以尝试实现自定义选民.. ( [http://symfony.com/doc/2.0/cookbook/security/voters.html](http://symfony.com/doc/2.0/cookbook/security/voters.html) )

使用该文档中建议的类，然后您可以使用以下内容覆盖投票方法：

```
function vote(TokenInterface $token, $object, array $attributes)
{
    $request = $this->container->get('request');

    $route = $request->get('_route');

    // I suggest passing the allowed routes in the service definition instead of
    // hardcoding here, but for example sake:

    if (in_array($route, array('wsoa_product_tests'))) {
        if (in_array($request->getClientIp(), $this->blacklistedIp)) {
            return VoterInterface::ACCESS_DENIED;
        }
    }

    return VoterInterface::ACCESS_ABSTAIN;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-08T10:17:46.650

您可以使用我的捆绑包轻松阻止 IP 和 IP 范围 => [https://github.com/Spomky/SpomkyIpFilterBundle](https://github.com/Spomky/SpomkyIpFilterBundle)

# java - 带有泛型的返回类型

> ID：13879924
> 
> 赞同：1
> 
> 时间：2012-12-14T13:49:05.647
> 
> 标签：java, generics

我正在尝试使以下逻辑起作用：

```
public class Wrapper {
    public static class General {
        public void copy(General g) {
            // copy fields
        }
        // General contents.
    }

    public static class Specific extends General {
        // Specific contents.
    }

    public static class GeneralLogic<T extends General> {
        public T load(ResultSet rs) {
            General o = new General();
            // Do stuff
            return new General();
        }
    }

    public static class SpecificLogic<T extends Specific> extends GeneralLogic<T> {
        @Override
        public T load(ResultSet rs) {
            Specific o = new Specific();
            o.copy(super.load(rs));
            // Do stuff
            return new Specific();
        }
    }
} 
```

两个返回行都会导致编译错误：（`Type mismatch: cannot convert from Wrapper.General to T`对于`Wrapper.Specific to T`第二个返回）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T13:57:20.710

如果`T`是 的子类型`General`，则 的实例`General`不一定是`T`。如果要返回 a `T,`，则必须从另一个工厂方法（作为参数或抽象方法）中获取它，或者通过接受 a`Class<? extends T>`并通过反射实例化它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:51:19.987

好吧，您不能确定 T 是 General 因此编译器会抱怨。你应该做这样的事情：

```
 public  T  ResultSet (ResultSet rs){
        T t=getSomeObject();
        return t; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T14:00:31.023

当你说“T extends General”时，General 是超类，T 是子类

但是在返回类型期间，您试图返回 Parent(General) 对象，而预期的返回类型是 T（请记住，子类引用不能包含父类对象）。

像这样更改您的代码部分。

```
public static class GeneralLogic<T extends General> {
        public General load(Object rs) {
            General o = new General();
            // Do stuff
            return new General();
        }
    }

    public static class SpecificLogic<T extends Specific> extends GeneralLogic<T> {
        @Override
        public Specific load(Object rs) {
            Specific o = new Specific();
            o.copy(super.load(rs));
            // Do stuff
            return new Specific();
        }
    } 
```

**但是如果返回类型为 T 对您来说真的很重要，那么您需要创建一个 Adapter 类，它将您的 General(parent) 对象转换为 child(T) 然后返回它**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T14:08:24.143

我会这样做

```
 public static class General {
    public void copy(General g) {
        // copy fields
    }
    // General contents.
}

public static class Specific extends General {
    // Specific contents.
}

public interface Logic<T extends General>  {
    public T load(ResultSet rs);
}

public static class GeneralLogic implements Logic<General> {

    @Override
    public General load(ResultSet rs) {
        return new General();
    }

}

public static class SpecificLogic extends GeneralLogic {

    @Override
    public General load(ResultSet rs) {
        Specific o = new Specific();
        o.copy(super.load(rs));
        // Do stuff
        return o;
    }
} 
```

# html - CSS 问题 - 为什么 4 * 25% 不是 100%

> ID：13879927
> 
> 赞同：2
> 
> 时间：2012-12-14T13:49:25.157
> 
> 标签：html, css

我一直在四处寻找帖子，看到很多与我类似的讨论，但不幸的是没有确切的答案。所以让我描述一下这个案例并问你为什么会发生这种情况，这种奇怪行为的原因是什么。

因此，我有一个非常简单的 HTML 页面，其中包含一个父容器和一个无序项列表 ul 设置为 width: 100% 并由 4 个 li 项组成，每个项设置为 width: 25%; 我确实将所有可能的布局属性重置为零，但尽管如此，最终四个列表元素的总宽度超过了 100%。是什么原因让浏览器渲染 4*25% != 100% 尽管我做了所有的重置？？？

这是代码，提前感谢您的回答。

```
<!DOCTYPE html>  
<html lang="en">  
<head>  
<meta charset="utf-8" />  
<title>Test</title>  
</head>  
<body style="margin: 0; padding: 0; border: 0;">  
<div id="wrapper">  
  <header style="width: 960px;">  
      <nav>  
      <ul style="width: 100%; padding: 0 !important; margin: 0 !important; background-color: yellow; ">  
         <li style="width: 25%; border: 0 !important; background-color: #f00; display: inline-block; margin: 0 !important; padding: 0 !important;"><a href="#" id="active">Dashboard</a></li>  
         <li style="width: 25%; border: 0 !important; background-color: #0f0; display: inline-block; margin: 0 !important; padding: 0 !important;"><a href="#">Mobiel</a></li>  
         <li style="width: 25%; border: 0 !important; background-color: #00f; display: inline-block; margin: 0 !important; padding: 0 !important;"><a href="#">3</a></li>   
         <li style="width: 25%; border: 0 !important; background-color: #f0f; display: inline-block; margin: 0 !important; padding: 0 !important;"><a href="#">4</a></li>  
      </ul>  
    </nav>   
  </header>  
</div>      

</body>  
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T13:54:43.663

我认为问题在于您设置了`display: inline-block`属性，因此`<li>`元素被视为内联元素，并且每行之间的换行符引入了空白，浏览器将其呈现为“单词”之间的空格。

更改您的 HTML 以将结尾`>`放在下一行，即

```
<ul style="width: 100%; padding: 0 !important; margin: 0 !important; background-color: yellow; ">  
    <li style="width: 25%; border: 0 !important; background-color: #f00; display: inline-block; margin: 0 !important; padding: 0 !important;"><a href="#" id="active">Dashboard</a></li  
    ><li style="width: 25%; border: 0 !important; background-color: #0f0; display: inline-block; margin: 0 !important; padding: 0 !important;"><a href="#">Mobiel</a></li 
    ><li style="width: 25%; border: 0 !important; background-color: #00f; display: inline-block; margin: 0 !important; padding: 0 !important;"><a href="#">3</a></li   
    ><li style="width: 25%; border: 0 !important; background-color: #f0f; display: inline-block; margin: 0 !important; padding: 0 !important;"><a href="#">4</a></li>  
</ul> 
```

这为我解决了 Firefox 上的问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-14T13:52:05.880

放置`float:left`在**LI**将解决问题

```
li { float:left; }​ 
```

这应该注意创建的空白。

**例子**

[http://jsfiddle.net/G3Jxv/](http://jsfiddle.net/G3Jxv/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T18:41:46.233

您还可以在 <ul> 上将 font-size 和/或 line-height 设置为 0，然后在子 <li> 元素上将其重置，因为在内联元素之间会自动添加一个空格。

但其他解决方案也有效

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T14:01:40.857

您还可以使用 CSS 删除 li 元素之间的空格

```
ul {word-spacing: -1em;
    font-size: 0;
    line-height: 0;
    letter-spacing: -1px;}

li {display: inline-block;
    font: normal 13px/1.3 "Trebuchet MS", Helvetica, sans-serif;
    letter-spacing: normal;
    word-spacing: normal;
    vertical-align: top;} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T13:57:07.050

您可以尝试在元素上使用浮动`float:left`元素`li`。或者，应该避免声明之间的空格`li`：

```
<li><a>Test</a>
</li><li>
  ...
</li><li> 
```

看看这个[小提琴](http://jsfiddle.net/rdiaz/JnmEx/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-02T02:14:17.113

只是因为'li'之间有'enter'。

尝试删除 'li' 之间的所有 'enter'，如下所示：

```
<ul>
  <li>1</li><li>2</li><li>3</li><li>4</li>
</ul> 
```

**例子：**

> [https://codepen.io/baofengyv/pen/XRgJoW](https://codepen.io/baofengyv/pen/XRgJoW)

# javascript - 如果没有显示另一个 div，如何使一个 div 出现？

> ID：13879928
> 
> 赞同：-6
> 
> 时间：2012-12-14T13:49:29.070
> 
> 标签：javascript, html, css

`<div>`如果另一个`<div>`设置为，我该如何出现`display:none`？

例如，如果`<div class="side">`设置为`display:none`我希望`<div>`显示另一个，但前提`.side`是设置为`display:none`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T13:56:47.143

以下是你应该做的，

1: 用 .side 类查找 div，

2：检查是否隐藏

3：显示另一个 div，如果 2 是正确的

```
if($("body").find(".side").is(':hidden') {  // Ideally You should be finding your .side div within its parent container and not body, to improve performance
  $("youranotherdiv").css("display","block");
}) 
```

# c - 如何为我的 C 项目创建 makefile？

> ID：13879930
> 
> 赞同：0
> 
> 时间：2012-12-14T13:49:40.087
> 
> 标签：c, linux, makefile

这是我的 c 项目它是完全简单的 linux shell 我在 linux 中运行这个程序我想要为我的程序制作 makefile。我想要简单的 makefile 了解我如何制作它？

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>
#include <signal.h>
#include <sys/types.h>
#define BUFFER_SIZE 1<<16
#define ARR_SIZE 1<<16
void sig_had(int signo)
{
    puts ("This is my signal handling ..!");

}
void parse_args(char *buffer, char** args, 
                size_t args_size)
{
    char *buf_args[args_size]; 
    char **cp;
    char *wbuf;
    size_t i, j;

    wbuf=buffer;
    buf_args[0]=buffer; 
    args[0] =buffer;

    for(cp=buf_args; (*cp=strsep(&wbuf, " \n\t")) != NULL ;){
        if ((*cp != NULL) && (++cp >= &buf_args[args_size]))
            break;
    }

    for (j=i=0; buf_args[i]!=NULL; i++){
        if(strlen(buf_args[i])>0)
            args[j++]=buf_args[i];
    }
}

int main(int argc, char *argv[], char *envp[]){
    char buffer[BUFFER_SIZE];
    char *args[ARR_SIZE];

    int status;
    size_t nargs;
    pid_t child_pid;
    signal(SIGCHLD,sig_had);
    while(1){
        printf("COMMAND ");
        fgets(buffer,BUFFER_SIZE,stdin);
        parse_args(buffer, args, ARR_SIZE); 

            child_pid = fork();
        if (child_pid){

            child_pid = wait(status);

        } else {
            execvp(args[0], args);

        }
    }    
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T13:57:38.780

为此，您根本不需要任何 Makefile。假设您的源文件存储为`foo.c`，只需运行

```
make foo 
```

默认 Makefiles 将启动，执行

```
cc foo.c -o foo 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T13:54:21.803

好的......如果你想为此生成一个makefile，然后输入：

```
all: yourfilename.c
    gcc yourfilename.c -o yourexename 
```

放入与您的`.c`文件相同的名为“Makefile”（无扩展名）的文件中。然后`make`在该目录中运行。

**注意 1：** Makefile 中空格很重要，构建的命令`gcc ...`应该`<tab>`缩进1

**注意 2：**这只是一个简单的示例，您可以（应该）使用自己的标志修改构建命令。`-Wall`将是一个很好的投入。

**注意 3：** Makefile 是一个巨大的话题。确保你阅读了它们：[http ://www.gnu.org/software/make/manual/](http://www.gnu.org/software/make/manual/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T14:18:06.250

假设`make`之前没有配置设置，

```
# gcc to compile source files.
CC = gcc
# linker is also "gcc". may be something else with other compilers.
LD = gcc
# Compiler flags go here.
CFLAGS = -g -Wall
# Linker flags go here. 
LDFLAGS =
# list of generated object files.
OBJS = hello.o
# program executable file name.
EXEC = exec

all: $(EXEC)

# rule to link the program
$(EXEC): $(OBJS)
      $(LD) $(LDFLAGS) $(OBJS) -o $(EXEC)

hello.o: hello.c 
    $(CC) $(CFLAGS) -c hello.c 
```

只要您只有 .c 文件创建一个可执行二进制文件，您就不需要更多。

# game-ai - 带有objective-c代码的人工智能：要让它工作，它应该做三件事

> ID：13879938
> 
> 赞同：0
> 
> 时间：2012-12-14T13:50:17.490
> 
> 标签：game-ai

我知道人工智能应该做三件事：1.收集数据。2.处理数据。3.预测将要收集的NextData。

我相信我应该使用数据库来收集所有数据。

在iOS设备上的（井字游戏，国际象棋等）游戏中，我会让它自己对战30秒左右，并从错误中吸取教训，但在波斯王子这样的游戏中，刺客我会学习（从中）玩家的技能（从游戏的前 3 分钟开始，玩家的技能将被测试），然后让游戏适应玩家的技能，所以如果玩家是个好人游戏会带来很多乐趣，但如果玩家是初学者，我会给予更多探索，并且容易杀死“邪恶的士兵”。

“终于问题来了” 1.这种方法有效吗？还是有更好的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T06:54:57.630

免责声明：我在《波斯王子》和《刺客信条》这两个游戏上工作了 2 年多，法律上不允许我告诉你这些游戏是如何制作的，但我会尽力为你提供有关游戏 AI 的一般知识。大多数游戏不像你描述的**那样使用学习。**

`artificial intelligence`首先，您所针对的语言或平台（或设备）与您将使用的工具无关。

第二，你的第一个例子，井字棋和国际象棋是`turn-based`游戏，这与游戏完全不同`real-time`。此外，这两款游戏都在有限的棋盘上运行，而`search space`. 使用其他算法比学习（例如极小极大）更容易解决这些游戏。

对于`real-time`像您描述的那些 3D 空间中的冒险游戏，即使找到`context`或者`input`您将提供给您的学习系统的内容也很困难......哪些元素与决策相关：最近的音频刺激，视觉刺激，这些刺激在空间和时间上的相对性、周围的敌人或盟友等……那么，考虑到这些世界的复杂性以及`NPC`允许做什么，你如何定义`output`你的学习算法？此输出如何在后续查询中保持凝聚力？

请记住，您对游戏设计所做的任何更改都需要重新运行学习过程，并且可能需要重新运行`input`和`output`.

你最好走标准路线，使用众所周知的方法，如`finite state machines`, `fuzzy state machines`, `behavior trees`,`planning`等……你将对决策有更多的控制权，并且实际上能够**设计**你无法做到的`NPC`行为做学习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:01:43.740

我真的认为这是您作为开发人员想要的。如果你想要一个无与伦比的 AI，那么你的方法会有所不同，那就是从游戏中获得最大乐趣。

根据玩家的表现来调整 AI 技能。我不会说“AI”更像是一种编码方式，让玩家获得最大的乐趣。

如果它是真正的 AI，那么它将是程序员可以构建的最佳玩家。当我制作 AI 时，我要做的是构建一个初始 AI，然后构建一个可以击败该 AI 的 AI，每个版本都是必须被击败的基准。我不认为你想走人工智能从错误中“学习”的路线，因为这会带来很多开销和很长的学习曲线。作为游戏开发人员，您可能会非常清楚如何制作一个能够击败学习一切的 AI 的 AI。这只是我的看法。

# wcf - 并发用户访问 WCF 服务

> ID：13879942
> 
> 赞同：0
> 
> 时间：2012-12-14T13:50:32.997
> 
> 标签：wcf, iis-7, threadpool

我有一个使用托管在 IIS 7.0 中的 http 绑定的 wcf 服务，并且该服务需要支持说 100 个并发用户，那么 WCF 中实现这一目标的最佳设置是什么（cpu 消耗应该是最小的）。

问题2：

我已将并发模式启用为“多个”，当我使用原型模拟 100 个并发用户时，我没有看到 w3p.exe 使用了 100 个线程？IIS 是否管理 WCF 服务中的线程处理方式？为什么我无法同时看到客户端提供的 100 个线程？

提前致谢

阿比奈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:10:59.757

我现在正在进行一个大型 WCF 项目，我的任务是使用服务主机限制检查性能，这是 WCF 中的一种行为。

```
System.servicemodel.description.ServiceThrottlingBehavior 
stb.MaxConcurrentSessions = iConcurrentSessions
stb.MaxConcurrentCalls = iConcurrentCalls
stb.MaxConcurrentInstances = iConcurrentInstances 
```

使用串行应用程序创建 100 个并发用户将非常困难，因为请求的处理速度非常快。我使用专门创建的多线程应用程序运行了数十个测试，该应用程序以每秒一千的速度处理用户和请求。

我不能回答你在这里问的所有问题，但我会给你这个。我运行了几十个性能测试，首先没有限制，然后有。我可以让我的服务运行的最快速度是没有限制 - 基本上让服务管理器本身。然后我尝试了各种节流模式，将并发会话、调用和实例从高值 (1000) 设置为低值 (10)，坦率地说，在速度或资源使用情况（内存和 cpu）方面没有发现很大差异。

祝项目顺利

# php - 通过自定义测试来运行

> ID：13879943
> 
> 赞同：1
> 
> 时间：2012-12-14T13:50:36.377
> 
> 标签：php, arrays, codeigniter, function

我有一个函数可以接收传入的数据，对其进行清理，然后根据数据运行 INSERT 或 UPDATE。我需要的是能够在每次调用时将自定义数据测试逻辑传递到函数的中间。非常感谢这么棒的网站提供的帮助。

```
$tests = 'if($data[0] == '-') $data[0] = NULL';
$this->run_function($data, $table, $message, $tests);

public run_function($data, $table, $message, $tests){
if(isset($data['submit'])) unset($data['submit']);
//Other array manipulation here
echo $tests
//Pass custom testing on $data array here.
$this->db->update($data,$table);
// ETC.
} 
```

基本上，我通常会在函数中添加一个参数，但是当它是您尝试传递的 php 逻辑时，这不起作用。有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-19T23:05:42.447

我最终使用的是 php[`call_user_func_array`](http://php.net/manual/en/function.call-user-func-array.php)函数。通过这种方式，我能够保存我想要的自定义测试逻辑并将其作为参数传递给我的中心函数。很有帮助的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T06:56:49.153

我同意史蒂夫的观点——但首先，你能举个例子吗？

无论哪种方式，您都必须编写逻辑，因此您不妨在函数中编写测试，并使用 switch/case。

```
 function myTest($data, ... $test) {

        switch ($test) {
           case 'length':
               return ($data > 8) ? true : false;
               break;
           case 'foo':
               return ($data == 'foo') ? true : false;
               break;
           case 'bar':
               return ($data == 'bar') ? true : false;
               break;
           default:
        }
    }

$var = myTest('mydata', ..., 'foo'); // $var === false 
```

或者可能包括更多参数：

```
function myTest ($data, ... $test, $param1 = null, $param2 = null, $param3 = null)...

$foo = myTest('mydata', ... 'length', 8); 
```

（除非您针对正则表达式进行测试，否则您可以将其作为字符串传递）

# jquery - 如何在移动浏览器中单击时关闭下拉菜单

> ID：13879947
> 
> 赞同：1
> 
> 时间：2012-12-14T13:50:59.067
> 
> 标签：jquery, mobile, drop-down-menu

我用谷歌搜索答案太久了。我发现了很多类似的问题，但没有找到合适的答案。

我有简单的 CSS/jQuery 下拉列表，在移动浏览器中单击它外部时不会关闭。

有麻烦的片段：

```
$('html').click(function() {
    allDropDowns.hide();
    label.removeClass('down');
}); 
```

并且在 jsFiddle 上有测试版本：

[http://jsfiddle.net/supervova/tc5WS/7/](http://jsfiddle.net/supervova/tc5WS/7/)

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T13:52:38.190

尝试使用`document`而不是`html`：

```
$(document).click(function() {
    allDropDowns.hide();
    label.removeClass('down');
}); 
```

# html - 如何根据 CSS 中的文本大小动态增加圆角按钮的宽度？

> ID：13879953
> 
> 赞同：-1
> 
> 时间：2012-12-14T13:51:21.493
> 
> 标签：html, css

如何根据 CSS 中的文本大小动态增加圆角按钮的宽度？

我有 10 个具有不同文本大小基础的圆角按钮，我想要的解决方案是按钮大小应该根据文本大小动态增加....

是使用 HTML 和 CSS 的任何解决方案，还是使用脚本语言解决的任何其他方式。

帮助..，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:08:58.493

jsfiddle 来看看它的实际效果：http: [//jsfiddle.net/XAU8V/](http://jsfiddle.net/XAU8V/)

HTML：

```
<div class="container">
    <a href="#" class="button small">Small</a>
    <a href="#" class="button medium">Medium</a>
    <a href="#" class="button large">Large</a>
</div>​ 
```

CSS：

```
.button {
   border: 1px solid #96d1f8;
   background: #65a9d7;
   padding: 5px 30px;
   color: white;
   font-family: Georgia, serif;
   text-decoration: none;
   vertical-align: middle;
   -webkit-border-radius: 1em;
   -moz-border-radius: 1em;
   border-radius: 1em;
}

.small {
    font-size: 14px;
}
.medium {
    font-size: 20px;
}
.large {
    font-size: 30px;
} 
```

边界半径在“em”中，因此它与父值有关（即使在本例中它不是真正的父值）。由于继承，Em 可能会有些棘手。

# javafx - JavaFx 表单加载

> ID：13879954
> 
> 赞同：0
> 
> 时间：2012-12-14T13:51:22.417
> 
> 标签：javafx

我想将一些单选按钮分组到一个切换组中。该组是在控制器类中创建的：

```
final ToggleGroup rbtGroup = new ToggleGroup(); 
```

现在我创建了一个将这些按钮添加到组中的函数。但是我如何在所谓的表单加载上触发该功能？

在过去的几个月里，我正在为我的公司编写 Visual Basic，并且表单上有一个名为 load 的事件。因此，我可以通过简单地在流行事件中编写我的代码来处理每个事件（加载、更改等）。

我如何在 Java FX 上实现这一点？

对不起这个问题，但我发现 Java FX 文档非常混乱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T16:10:31.627

您的控制器类必须实现`javafx.fxml.Initializable`接口，并覆盖（实现）唯一的方法`initialize()`。此`initialize()`方法（Java 术语中没有`function`）是加载 FXML 文件的“表单加载函数”。因此，您可以在此方法中定义和启动控件和变量，例如：

```
...
@FXML
private ToggleGroup rbtGroup;

@Override
public void initialize(URL url, ResourceBundle rb) {

    rbtGroup = new ToggleGroup();

    ToggleButton tb1 = new ToggleButton("ToggleButton 1");
    tb1.setToggleGroup(rbtGroup);

    ToggleButton tb2 = new ToggleButton("ToggleButton 2");
    tb2.setToggleGroup(rbtGroup);
}
... 
```

注意`@FXML`注释。如果 rbtGroup 在加载的 FXML 文件中定义，则放置它。
或者在该方法中调用您的“将按钮添加到组”方法（同样不起作用）`initialize()`。

# windows-8 - KnownFolders.VideosLibrary.GetFilesAsync() 需要很长时间

> ID：13879966
> 
> 赞同：0
> 
> 时间：2012-12-14T13:52:27.397
> 
> 标签：windows-8

我正在循环播放该`awaitKnownFolders.VideosLibrary.GetFilesAsync()`方法中的视频，首先我认为我的代码有问题，但在我的带有 SSD 驱动器的机器上，获取文件需要大约 5-20 秒。该文件夹仅包含 5 个小文件。

更奇怪的是，如果我指定一个子文件夹`await KnownFolders.VideosLibrary.GetFolderAsync("subfolder")`，然后`await folder.GetFilesAsync()`从该文件夹执行 - 它会在一秒钟内循环文件！

我在图片库中有相同的症状。只有我吗？也许是因为操作系统试图从网络加载“链接”视频库（这是我最好的猜测）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:58:40.127

我想只有你。这应该有效：

```
StorageFolder videosFolder = KnownFolders.VideosLibrary;

IReadOnlyList<StorageFile> fileList = await videosFolder.GetFilesAsync();
IReadOnlyList<StorageFolder> folderList = await videosFolder.GetFoldersAsync();

var count = fileList.Count + folderList.Count;
StringBuilder outputText = new StringBuilder(videosFolder.Name + " (" + count + ")\n\n");

foreach (StorageFolder folder in folderList)
{
    outputText.AppendLine("    " + folder.DisplayName + "\\");
}

foreach (StorageFile file in fileList)
{
    outputText.AppendLine("    " + file.Name);
}

OutputTextBlock.Text = outputText.ToString(); 
```

要自己测试，请运行[文件夹枚举示例](http://code.msdn.microsoft.com/windowsapps/Folder-enumeration-sample-33ebd000)。这就是上面的代码片段的来源。

# java - 适用于 Java 的良好且有效的 CSV/TSV 阅读器

> ID：13879967
> 
> 赞同：15
> 
> 时间：2012-12-14T13:52:33.193
> 
> 标签：java, csv, large-files, opencsv

我正在尝试读取大约行或更多行的大文件`CSV`和`TSV`（制表符分隔的）文件。`1000000`现在我试图用 读取`TSV`包含`~2500000`行[`opencsv`](http://opencsv.sourceforge.net/)，但它抛出了一个`java.lang.NullPointerException`. 它适用于带有线条的较小`TSV`文件。`~250000`所以我想知道是否还有其他`Libraries`支持读取大文件`CSV`和`TSV`文件的方法。你有什么想法？

每个对我的代码感兴趣的人（我缩短了它，所以`Try-Catch`显然是无效的）：

```
InputStreamReader in = null;
CSVReader reader = null;
try {
    in = this.replaceBackSlashes();
    reader = new CSVReader(in, this.seperator, '\"', this.offset);
    ret = reader.readAll();
} finally {
    try {
        reader.close();
    } 
} 
```

编辑：这是我构造的方法`InputStreamReader`：

```
private InputStreamReader replaceBackSlashes() throws Exception {
        FileInputStream fis = null;
        Scanner in = null;
        try {
            fis = new FileInputStream(this.csvFile);
            in = new Scanner(fis, this.encoding);
            ByteArrayOutputStream out = new ByteArrayOutputStream();

            while (in.hasNext()) {
                String nextLine = in.nextLine().replace("\\", "/");
                // nextLine = nextLine.replaceAll(" ", "");
                nextLine = nextLine.replaceAll("'", "");
                out.write(nextLine.getBytes());
                out.write("\n".getBytes());
            }

            return new InputStreamReader(new ByteArrayInputStream(out.toByteArray()));
        } catch (Exception e) {
            in.close();
            fis.close();
            this.logger.error("Problem at replaceBackSlashes", e);
        }
        throw new Exception();
    } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-11-23T08:38:33.193

不要使用 CSV 解析器来解析 TSV 输入。例如，如果 TSV 具有带引号字符的字段，它将中断。

[uniVocity-parsers](https://github.com/uniVocity/univocity-parsers)带有一个 TSV 解析器。您可以毫无问题地解析十亿行。

解析 TSV 输入的示例：

```
TsvParserSettings settings = new TsvParserSettings();
TsvParser parser = new TsvParser(settings);

// parses all rows in one go.
List<String[]> allRows = parser.parseAll(new FileReader(yourFile)); 
```

如果您的输入太大而无法保存在内存中，请执行以下操作：

```
TsvParserSettings settings = new TsvParserSettings();

// all rows parsed from your input will be sent to this processor
ObjectRowProcessor rowProcessor = new ObjectRowProcessor() {
    @Override
    public void rowProcessed(Object[] row, ParsingContext context) {
        //here is the row. Let's just print it.
        System.out.println(Arrays.toString(row));
    }
};
// the ObjectRowProcessor supports conversions from String to whatever you need:
// converts values in columns 2 and 5 to BigDecimal
rowProcessor.convertIndexes(Conversions.toBigDecimal()).set(2, 5);

// converts the values in columns "Description" and "Model". Applies trim and to lowercase to the values in these columns.
rowProcessor.convertFields(Conversions.trim(), Conversions.toLowerCase()).set("Description", "Model");

//configures to use the RowProcessor
settings.setRowProcessor(rowProcessor);

TsvParser parser = new TsvParser(settings);
//parses everything. All rows will be pumped into your RowProcessor.
parser.parse(new FileReader(yourFile)); 
```

披露：我是这个库的作者。它是开源和免费的（Apache V2.0 许可证）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-14T13:56:12.660

我没有尝试过，但我之前研究过 superCSV。

[http://sourceforge.net/projects/supercsv/](http://sourceforge.net/projects/supercsv/)

[http://supercsv.sourceforge.net/](http://supercsv.sourceforge.net/)

检查这是否适合您，250 万行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T13:59:08.710

尝试按照`Satish`. 如果这没有帮助，您必须将整个文件拆分为令牌并处理它们。

认为您`CSV`的逗号没有任何转义字符

```
// r is the BufferedReader pointed at your file
String line;
StringBuilder file = new StringBuilder();
// load each line and append it to file.
while ((line=r.readLine())!=null){
    file.append(line);
}
// Make them to an array
String[] tokens = file.toString().split(","); 
```

然后你可以处理它。不要忘记在使用之前修剪令牌。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-02T12:44:40.310

我不知道该问题是否仍然有效，但这是我成功使用的问题。仍然可能需要实现更多接口，例如 Stream 或 Iterable，但是：

```
import java.io.Closeable;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStream;
import java.util.Scanner;

/** Reader for the tab separated values format (a basic table format without escapings or anything where the rows are separated by tabulators).**/
public class TSVReader implements Closeable 
{
    final Scanner in;
    String peekLine = null;

    public TSVReader(InputStream stream) throws FileNotFoundException
    {
        in = new Scanner(stream);
    }

    /**Constructs a new TSVReader which produces values scanned from the specified input stream.*/
    public TSVReader(File f) throws FileNotFoundException {in = new Scanner(f);}

    public boolean hasNextTokens()
    {
        if(peekLine!=null) return true;
        if(!in.hasNextLine()) {return false;}
        String line = in.nextLine().trim();
        if(line.isEmpty())  {return hasNextTokens();}
        this.peekLine = line;       
        return true;        
    }

    public String[] nextTokens()
    {
        if(!hasNextTokens()) return null;       
        String[] tokens = peekLine.split("[\\s\t]+");
//      System.out.println(Arrays.toString(tokens));
        peekLine=null;      
        return tokens;
    }

    @Override public void close() throws IOException {in.close();}
} 
```

# c# - 简单的事件 c#

> ID：13879974
> 
> 赞同：2
> 
> 时间：2012-12-14T13:52:47.743
> 
> 标签：c#, events, exception

我有两个班级，我必须制作一个事件来在这些班级之间进行交流。

```
Class a
{
    public delegate void delegat(int a);
    public event delegat exit;
    ...
    private void a_FormClosed(object sender, FormClosedEventArgs e)
    {
         // My event named exit should run here, but I get exception!
        exit(100);
    }
}

Class b
{
    a instance=new a();
    a.exit+=new a.delegat(my_fun);
    ...
    private void my_fun(int x)
    {
        if(x==100)
        do_smth;
        ...
    }
} 
```

但问题是我得到了异常：“对象引用未设置为对象的实例”。我不明白我做错了什么？我应该在哪里创建一个新实例？感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:01:50.827

您正在尝试将`exit`事件分配给*类*本身而不是*实例*，例如

```
a.exit += ... 
```

应该：

```
instance.exit += ... 
```

You also aren't checking whether your `exit` event has been assigned before attempting to fire it. There are other issues which you haven't taken into consideration like race conditions.

Here is a general example of a relatively safe way of handling events e.g.

```
public class A
{
    public delegate void ExitHandler(object sender, int a);
    public event ExitHandler Exit;
    ...
    private void a_FormClosed(object sender, FormClosedEventArgs e)
    {
        OnExit(100);
    }

    protected virtual void OnExit(int a)
    {
        // take a reference to the event (incase it changes)
        var handler = Exit;
        if (handler != null)
        {
            handler(this, a);
        }
    }

}

public class B
{
    private A _a;

    public B()
    {
        _a = new A();
        _a.Exit += (sender, value) => my_fun(value);
    }

    private void my_fun(int x)
    {
        if(x==100)
            do_smth;
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:59:11.737

在引发之前验证您的事件是否存在订阅者：

```
if (exit != null)
    exit(100); 
```

另一种选择 - 在 A 类中定义事件时订阅虚拟事件处理程序：

```
public event delegat exit = (_) => { }; 
```

还要对类型、事件和方法使用 PascalCase 命名。.NET 中有一个预定义的委托，它接收一个参数并返回 void：`Action<T>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T14:02:38.273

I would change "class a" code for calling the event to as follows:

```
Class a
{
  public delegate void delegat(int a);
  public event delegat exit;
  ...
  private void a_FormClosed(object sender, FormClosedEventArgs e)
    {
     if (this.exit != null)  // just in case a_FormClosed fires before assigning the event
         exit(100);//here should run my event named exit but i get exception!
     }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T14:07:19.600

Try this

```
namespace foo
    {
    public delegate void delegat(int a);
    Class a
    {
      public event delegat exit;
      private void a_FormClosed(object sender, FormClosedEventArgs e)
        {
if(exit != null)
{
         exit(100);//here should run my event named exit but i get exception!
    }
         }
     }
    }

     Class b
     {
      a instance=new a();
      instance.exit+=new delegat(my_fun);
      ...
      priavte void my_fun(int x)
      {
       if(x==100)
        do_smth;
       ...
       }
     } 
```

# php - mysqli_escape_string 我如何实现它？

> ID：13879976
> 
> 赞同：0
> 
> 时间：2012-12-14T13:52:48.507
> 
> 标签：php, mysql

嗨，我有一个关于我写入数据库的问题：

我是新来的，`mysql_escape_string`因为一个朋友告诉我的。由于我使用`mysql_escape_string`它不再写入我的数据库。

这是代码：

```
////////////////////////////////////////////////////////////////
 $iets = $_POST['aantal'] + $_POST['begin'];

 for ($i = $_POST['begin'] ; $i < $iets ; $i++){
     $rows = $rows.'a'.$i.', ';
 }

 $rows = mysql_escape_string(trim($rows, ', '));
/////////////////////////////////////////////////////////////////////
 $iets = $_POST['aantal'] + $_POST['begin'];

 for ($i = $_POST['begin'] ; $i < $iets ; $i++){
     $r = 'a'.$i;
    $values = $values.'\''.$_POST[$r].'\', ';
 }

 $values = mysql_escape_string(trim($values, ', '));

$naam = mysql_escape_string($_POST['naam']);

mysql_query("INSERT INTO $naam
(
$rows
)
VALUES 
(
$values
)");
mysql_close($con);

printf("%s<br />%s", $values, $rows); 
```

当我有 ：

```
aantal = 3
begin = 4 
```

`printf`, , `a4=abcdef`,`a5=ghijkl`的输出`a6=mnopq`为：

```
\'abcdef\', \'ghijkl\', \'mnopq\'<br />
a1, a2, a3 
```

我不明白，反冲应该不会有影响吧？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T13:55:12.103

转义的目的是阻止具有特殊含义的字符（例如`'`）具有该特殊含义。由于您正在转义包含所有引用值的 SQL 片段，因此您正在转义引号并阻止它们引用这些值。

您需要在引用*每个*值之前对其进行转义。：

```
$values = $values.'\''.$_POST[$r].'\', ';
                     //^^^^^^^^^^ Escape this 
```

然而：

Don't use `mysql_escape_string`it is broken 已替换为`mysql_real_escape_string`，但甚至不要使用，根本不要使用`mysql_*`，[它已被弃用](https://stackoverflow.com/q/12859942/19068)。

选择一个[现代替代品](http://php.net/manual/en/mysqlinfo.api.choosing.php)并使用[准备好的语句和绑定参数](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)，而不是转义字符串并通过字符串连接将它们组合到 SQL 中。

# jquery - 替换内容中的文本

> ID：13879978
> 
> 赞同：0
> 
> 时间：2012-12-14T13:53:00.827
> 
> 标签：jquery, html, css

我尝试替换`em`. 但它不起作用。这里的代码

```
 <p>
 <em>
    <a href='/'>not</a>
    yes
    yes 
    yes
  </em>
  </p> 
```

这里的输出是`not yes yes yes`
这里我想删除文本`yes`，我只需要输出文本为`not`.
我该怎么做。我正在等待您的宝贵答复。谢谢你的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:54:39.417

如果你想全部删除`yes`，你可以这样做：

```
$(function(){
   $('em').each(function(){
      $(this).html($(this).html().replace(/yes/g, ''));
   });
}); 
```

[示范](http://jsfiddle.net/EjJhv/)

如果要删除所有文本节点，可以这样做：

```
$('em').contents().filter(function() {
    return this.nodeType == 3;
}).remove();​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T13:54:39.777

如果我理解了您的问题，您需要使您使用的选择器特定于`a`元素。尝试这个：

```
alert($("em a").text()); // = not 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T14:03:33.543

您是否尝试过：

```
$('em').text($('em a').text()); 
```

无论如何，您需要加载 jquery 否则它将无法正常工作

# php - 如何使用 PHP 从完整路径中获取目录名称？

> ID：13879981
> 
> 赞同：0
> 
> 时间：2012-12-14T13:53:04.490
> 
> 标签：php, filenames, relative-path

我有这样的图像路径..

```
2012/12/14/example.jpg 
```

现在我想获取除图像名称之外的路径..

我的意思是我需要这样

```
2012/12/14/ 
```

谁能帮我？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:56:58.167

我想这就是你需要的

```
<?php
$path_parts = pathinfo('2012/12/14/example.jpg');

echo $path_parts['dirname'], "\n";
echo $path_parts['basename'], "\n";
echo $path_parts['extension'], "\n";
echo $path_parts['filename'], "\n"; 
?> 
```

输出将是..

```
 /www/htdocs/inc
    example.jpg
    jpg
    example 
```

# datagridview - 如何在 c#.net 中的 datagridview 中找出单元格为空

> ID：13879984
> 
> 赞同：0
> 
> 时间：2012-12-14T13:53:11.537
> 
> 标签：datagridview, datagridviewcellstyle

在datagridview中，当我离开单元格时如何找出单元格是空的，如果它是空的，我想处理那个单元格，即限制用户前进。如果数据填充用户可以正常前进，如何才能完成这项任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:31:02.550

如果发生`DataGridView` [`CellValidating`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellvalidating.aspx)或[`RowValidating`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.rowvalidating.aspx)

```
private void dataGridView1_CellValidating(object sender, DataGridViewCellValidatingEventArgs e)
{
    if (dataGridView1.IsCurrentCellDirty)
        if (e.ColumnIndex == 0)
        {
            if (string.IsNullOrWhiteSpace(dataGridView1[e.ColumnIndex, e.RowIndex].EditedFormattedValue.ToString()))
            {
                e.Cancel = true;
                MessageBox.Show("Please enter some text before you leave.");
            }
            else
            {
                //Some logic here
            }
        }
} 
```

# android - Java：Android：在代码中更改画布上位图的颜色

> ID：13879989
> 
> 赞同：0
> 
> 时间：2012-12-14T13:53:24.333
> 
> 标签：android, canvas, colors, bitmap

我正在尝试做一些我认为很简单但显然不是的事情！

我正在制作一个简单的应用程序来学习 Android 游戏开发。此刻，用户点击屏幕并显示一个精灵。精灵只是一个纯白色的正方形。我想在代码中更改它。

我想我被 C#/XNA 宠坏了，如果一个精灵是纯白色的，你可以在 draw 方法中设置颜色。即使我使用了绘画功能，这似乎也不起作用。我做了一些研究，但所有的解决方案似乎都不是我想要的，而且也很复杂。如果我找不到确切的解决方案，我希望找到至少更简单的东西。到目前为止，这是相关的代码：

从观点来看：

```
 private Sprite createSprite(int resouce) {
    Bitmap bmp = BitmapFactory.decodeResource(getResources(), resouce);
    return new Sprite(this, bmp, touchX, touchY); 
```

视图 onDraw 方法：

```
 if (touched == true)
    {
        canvas.drawColor(colors[nextColor]);
        lastColor = colors[nextColor];

        //add bitmap to array
        sprites.add(createSprite(R.drawable.test));
        //draw sprites
        for (Sprite sprite : sprites) {
            sprite.onDraw(canvas);
        } 
```

sprite类的相关代码：

```
 private Paint paint = new Paint();

public Sprite(DaphnyView daphView, Bitmap bmp, int positionX, int positionY) {
    width = bmp.getWidth();
    height = bmp.getHeight();
    DaphView = daphView;
    Bmp = bmp;
    PositionX = positionX;
    PositionY= positionY;
    paint.setColor(Color.GREEN);
}

public void onDraw(Canvas canvas) {
    canvas.drawBitmap(Bmp, PositionX, PositionY, paint);

} 
```

如果有人可以帮助我或至少为我指出一个好的起点，那将是一个很大的帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:00:08.360

我找到了一个解决方案，方法是创建一个新的画布来修改位图，然后将这个修改后的位图传递回原始画布。

# jquery - 回调函数 jQuery AJAX

> ID：13879994
> 
> 赞同：0
> 
> 时间：2012-12-14T13:53:44.227
> 
> 标签：jquery, callback, bind, jquery-callback

我想在使用 jQuery 的 AJAX 调用中将带参数的函数传递给成功方法，这就是我所拥有的：

```
makeAjaxReq(callbackFunction, url, xml, 'POST');

function makeAjaxReq(successMethod, url, xml, method, noAsxml) {
    var headers = { 'X-EWS-ACCEPT': 'ASXML', 'X-Requested-With': 'XMLHttpRequest' };
    var call = $j.ajax({
        type: method,
        url: url,
        data: xml,
        headers: headers,
        success: function (data) {
            if (!noAsxml) {
                var json = parseAsXML(data);
                successMethod(json);
            }
            else {
                successMethod(data);
            }
        },
        error: function (data) {
            var a = 0;
        }
    }); 
```

这样做我在我的回调函数中收到一个 JSON 作为参数，这很好但是，如果我想做这样的事情怎么办：

```
makeAjaxReq(callbackFunction(param1, param2), url, xml, 'POST'); 
```

当然，如果我这样做，callbackFunction 将在那一刻执行，而不是在 AJAX 调用完成时执行。

我曾经使用原型中的绑定函数来做到这一点，例如：

```
makeAjaxReq(callbackFunction.bind(param1, param2), url, xml, 'POST'); 
```

所以目标是在我的回调函数中接收 JSON、param1 和 param2

你知道使用 jQuery 的方法吗？

非常感谢您的时间。克鲁，何塞

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:09:59.287

您可以使用*部分功能*来做到这一点：

```
// getCallbackFunction is called immediately and returns a function
makeAjaxReq(getCallbackFunction(param1, param2), url, xml, 'POST');

// returns a function that accepts one argument and has param1 and param2 in its scope
function getCallbackFunction(param1, param2) {
    return function(json) {
        // code here has access to param1, param2, and json
    }
} 
```

或者，您可以使用匿名函数执行稍微不同的方法：

```
makeAjaxReq(function(json){ callbackFunction(json, param1, param2) }, url, xml, 'POST'); 
```

在这里，您的回调接受三个参数，第一个在 Ajax 成功时提供，最后两个在构造匿名函数时提供。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T13:56:50.850

尝试这个：

```
makeAjaxReq(function(){callbackFunction(param1, param2)}, url, xml, 'POST'); 
```

这与我对这个[问题](https://stackoverflow.com/questions/13766568/how-do-i-use-jquery-to-change-a-field-when-another-field-value-has-changed/13766702#13766702)的回答非常相似，其中包含更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T14:23:21.420

顺便说一句，使用 Jquery 中的 $.proxy 函数可以做同样的事情，但我不确定后面发生了什么......

```
makeAjaxReq($proxy(callbackFunction, param1, param2), url, xml, 'POST'); 
```

非常感谢！

# java - 我如何将“ajax-event rowDblselect”用于嵌套数据表

> ID：13879997
> 
> 赞同：1
> 
> 时间：2012-12-14T13:54:07.470
> 
> 标签：java, jsf, jakarta-ee, web-applications, primefaces

我有一个列出 submerchants 的数据表。我还有一个子数据表，列出了 submerchants 的服务。我使用“p:rowExpansion”来显示服务数据表。当用户双击父数据表行（submerchant）时，我需要显示 submerchant 详细信息。此外，当用户双击服务数据表行时，我需要显示服务详细信息。如果我将 p:ajax event=rowDblselect 用于 submerchant 表，将 ajax event=rowSelect 用于服务表，它工作正常。但是，如果我对我想要做的两个数据表都使用 ajax event=rowDblselect，它会失败。我的代码如下所示；

```
 <p:dataTable id="subMerchantsDataTable" var="subM"
             value="#{subMerchantManagement.subMerchantList}"
             rowKey="#{subM.subMerchantId}"
             selection="#{subMerchantCommon.selectedSubMerchant}"
             selectionMode="single"
             style="width:1000;border: 1px solid rgb(168, 168, 168);"
             scrollRows="20" scrollable="true" liveScroll="true"
             scrollHeight="450"
             emptyMessage="#{messagebundle.submerc_grdlabel_no_submerchant}">

           <p:ajax event="rowToggle"
              listener="#{subMerchantManagement.onRowToggle}" width="100%" />

           <p:ajax event="rowDblselect"
              listener="#{subMerchantManagement.retrieveSubmerchantDetails}"
              update=":mainTabView"  />

           <p:column width="20" disabledSelection="true">
              <p:rowToggler />
           </p:column>

           <p:column headerText="#{messagebundle.submerc_columnHeader_id}"
              width="70" sortBy="#{subM.subMerchantId}">
              <h:outputText value="#{subM.subMerchantId}" />
           </p:column>
           ...........
           ...........
           <p:rowExpansion>
              <p:dataTable id="subMerchantServicesDataTable" var="svc"
                 value="#{subM.subMerchantServices}" rowKey="#{svc.serviceId}"
                 selection="#{subMerchantCommon.selectedService}"
                 selectionMode="single"
                 style="border: 1px solid rgb(168, 168, 168);" 
                 emptyMessage="#{messagebundle.submerc_grdlabel_no_service}">

                 <p:ajax event="rowSelect"
                    listener="#{subMerchantManagement.retrieveSubmerchantDetailsByService}"
                    update=":mainTabView" />

                 <p:column width="18">
                    <h:outputText value="-" />
                 </p:column>
                 <p:column width="70">
                    <h:outputText value="#{svc.serviceId}" />
                 </p:column>
                    ...........
                    ...........
              </p:dataTable>
         </p:rowExpansion>
   </p:dataTable> 
```

当我对两个数据表使用 ajax event=rowDblselect 时。如果我双击服务数据表行，则会显示详细信息页面，但会发生我从控制台捕获的异常，如下所示；

```
`WARNING: Method not found: ........faces.bean.submerchants.SubMerchantManagement@1b0c025.retrieveSubmerchantDetailsByService(javax.faces.event.AjaxBehaviorEvent)
javax.el.MethodNotFoundException: Method not found: .........faces.bean.submerchants.SubMerchantManagement@1b0c025.retrieveSubmerchantDetailsByService(javax.faces.event.AjaxBehaviorEvent)
at com.sun.el.util.ReflectionUtil.getMethod(ReflectionUtil.java:155)
at com.sun.el.parser.AstValue.invoke(AstValue.java:231)
at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:297)
at org.primefaces.component.behavior.ajax.AjaxBehaviorListenerImpl.processAjaxBehavior(AjaxBehaviorListenerImpl.java:47)
at javax.faces.event.AjaxBehaviorEvent.processListener(AjaxBehaviorEvent.java:113)
at javax.faces.component.behavior.BehaviorBase.broadcast(BehaviorBase.java:106)
at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:760)
at javax.faces.component.UIData.broadcast(UIData.java:1071)
at javax.faces.component.UIData.broadcast(UIData.java:1093)
at javax.faces.component.UIData.broadcast(UIData.java:1093)
at javax.faces.component.UIData.broadcast(UIData.java:1093)
at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:300)
at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:26)
at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
at weblogic.servlet.internal.RequestEventsFilter.doFilter(RequestEventsFilter.java:27)
at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3715)
at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3681)
at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2277)
at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2183)
at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1454)
at weblogic.work.ExecuteThread.execute(ExecuteThread.java:209)
at weblogic.work.ExecuteThread.run(ExecuteThread.java:178)` 
```

如果我双击 submerchants 数据表行，则无法显示详细信息页面（无法调用托管 bean 方法。）并且发生了我从控制台捕获的相同异常。看起来当我双击服务数据表行时，调用了与子商数据表相关的方法，并再次抛出了相同的异常。

有没有人有解决方案的想法？任何建议将被认真考虑。我只想嵌套数据表，并在单击每个数据表的行时导航到详细信息。提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:30:53.883

尝试对其中一个数据表使用 rowDblselect，并通过 jQuery 手动侦听和触发另一个数据表的 dblClick 事件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:13:38.097

我做了一个快速测试，结果我得到了相同的结果。当 a`p:datatable`有另一个`p:datatable`嵌套了相同的事件绑定到它时，它的重复事件将不会像您期望的那样工作。

我还注意到，如果您`listener`从标签中删除该属性，`p:ajax`它基本上是“有效的”。

`null`另一个问题是，由于某种原因，选定的值会被某个值覆盖。如果选择值不为空，则“解决方法”是检查选择值的设置器。然而，这些都是肮脏的解决方法，应该报告一个错误，;-)

工作示例：

Bean（至少应该是视图范围的）：

```
public class Bean
{
    private List<String> firstList = new ArrayList<String>();
    private List<String> secondList = new ArrayList<String>();
    private String selection;

    @PostConstruct
    private void init()
    {
        firstList.add("First item");
        firstList.add("Second item");
        secondList.add("Third item");
        secondList.add("Fourth item");
    }

    public void setSelection(String selection)
    {
        if (selection != null && !selection.isEmpty())
        this.selection = selection;
    }

    // Other getters/setters omitted
} 
```

JSF：

```
<h:form>
    <p:dataTable value="#{bean.firstList}" var="first" rowKey="#{first}"
        selection="#{bean.selection}" selectionMode="single">
        <p:ajax event="rowSelect" update=":selectionPanel" />
        <p:column>
            <p:rowToggler />
        </p:column>
        <p:column>
            <h:outputText value="#{first}" />
        </p:column>
        <p:rowExpansion>
            <p:dataTable value="#{bean.secondList}" var="second"
                rowKey="#{second}" selection="#{bean.selection}"
                selectionMode="single">
                <p:ajax event="rowSelect" update=":selectionPanel" />
                <p:column>
                    <h:outputText value="#{second}" />
                </p:column>
            </p:dataTable>
        </p:rowExpansion>
    </p:dataTable>
</h:form>
<p:panel id="selectionPanel" header="Selection">
    <h:outputText value="#{bean.selection}" />
</p:panel> 
```

# flash - 当我使用抗锯齿时，带有嵌入字体的 Flash 经典文本字段停止工作

> ID：13879998
> 
> 赞同：0
> 
> 时间：2012-12-14T13:54:13.380
> 
> 标签：flash, flash-cs5, textfield

我正在使用 Flash CS5.5，处理一些图形并使用一些经典的文本字段。但是，有一天我打开了 fla，所有嵌入的文本字段都是空白的。我将其更改为其他字体并且效果很好，但不是我使用的字体（Myriad Pro）。只有当我选择“使用设备字体”时它才有效。那么，它与一些缓存或其他东西有关吗？我已经删除了所有字体，重新启动了我的计算机，再次出现同样的问题。

这不是脚本问题，可能是闪存中的错误？

更新：事实上，没有一个 OpenType CFF 在我的 Flash 中工作。如何恢复这些字体？

更新 2：它与 2012 年 13 月 12 日的 Windows XP 更新有关吗？有人有另一个有同样问题的 SO？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:04:04.207

I'm having the same problem with CS5 in Win7\. And I also got a Windows update last night.

This info may be relevant: [http://graphics-unleashed.unleash.com/2012/12/windows-update-kb2753842-will-make-some.html?showComment=1355447264092](http://graphics-unleashed.unleash.com/2012/12/windows-update-kb2753842-will-make-some.html?showComment=1355447264092)

....

Okay, I've tried it and can confirm that uninstalling KB2753842 fixes the problem for me.