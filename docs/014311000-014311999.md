# StackOverflow 问答 14311000-14311999

# ios - 下拉 UIScrollView 并保持 y 位置

> ID：14311576
> 
> 赞同：2
> 
> 时间：2013-01-14T02:19:51.520
> 
> 标签：ios, objective-c, uikit

当 UIScrollView 被下拉到某个点时，我试图触发一个动作。这就是我现在所拥有的：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    if (scrollView.contentOffset.y == -100.0) {
        NSLog(@"Trigger");

        [scrollView setContentOffset:CGPointMake(0.0, -200.0) animated:YES];
    }
} 
```

这种工作，直到我结束我的触摸事件，然后 UIScrollView 返回到它的原始位置。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T03:05:25.630

检查范围而不是单个像素，因为 scrollView 不会逐像素回滚。添加检查如下 -

```
if (scrollView.contentOffset.y < -100.0 && scrollView.contentOffset.y > -110.0)
{
     //call your method
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-17T07:17:53.080

I could not find the source For scrolling and holding the position of scrollview here is the code.

For the view where you want to set the scrollview and hold do like this ..

Viewcontroller.h
@property (weak, nonatomic) IBOutlet UIScrollView *scrollView;//from interface builder @property (weak, nonatomic) IBOutlet UIView *contentView;//from interface

Finally the interface hierarchy should be like this view-->scrollView-->contentView-->view Contents viewController.m

```
-(void)viewDidLayoutSubviews 
```

{

```
[super viewDidLayoutSubviews];

[self.scrollView layoutIfNeeded];

self.scrollView.contentSize = self.contentView.bounds.size; 
```

}

//To dismiss the scrollView when return key pressed ..you can place this code anywhere where you want

*   (BOOL)textFieldShouldReturn:(UITextField *)textField {

    self.scrollView.contentSize = self.view.frame.size;

    return YES;

}

For more info check this..[http://spin.atomicobject.com/2014/03/05/uiscrollview-autolayout-ios/](http://spin.atomicobject.com/2014/03/05/uiscrollview-autolayout-ios/) I hope this helps someone..

# objective-c - 如果我只有包含视图，如何设置 NSTextView 的 stringValue？

> ID：14311577
> 
> 赞同：1
> 
> 时间：2013-01-14T02:19:57.863
> 
> 标签：objective-c, macos, cocoa

这是问题，希望很容易回答。

我正在创建一个类，在其中你给它一个视图数组，它将所有元素保存在其中并能够读回它们。我通过使用 NSArchiver 类得到了保存，但不是阅读部分。

```
@interface preferences : NSObject

- (void)savePreferences;
- (void)readPreferences;

@property (strong) NSMutableArray *theViews;

@end
 #import "preferences.h"

@implementation preferences
- (id)init {
    self = [super init];
    if (self) {
        _theViews = [[NSMutableArray alloc]init];
    }
    return self;
}

- (void)savePreferences{
    NSLog(@"Saving Preferences...");
    [NSKeyedArchiver archiveRootObject:_theViews toFile:@"preferences.xml"];
}

- (void)readPreferences{
    NSLog(@"Reading Preferences...");
    _theViews = [NSKeyedUnarchiver unarchiveObjectWithFile:@"preferences.xml"];
}

@end 
```

这个想法是我想要一种简单的方法来保存偏好并在以后调用它们。我知道 NS_UserDefaults，并通过创建从界面构建器到我的代码的连接来手动完成，但实际上我有数千个偏好，我必须建立连接并保存。

所以我的目标是创建一个类，我说类似......

```
[preferences savePreferencesForViews:ArrayOfViews];//For Saving
[preferences readPreferencesForViews:ArrayOfViews];//For Reading 
```

我的计划是在界面生成器中为每个元素设置标识符属性。然后要从中获取一个值，我将在视图中的每个子视图中进行一个函数循环，直到它找到一个与我请求的标识符匹配的标识符，我将检查它的类类型以创建一个临时变量并使用该临时变量类 tpye 从中获取价值。

例如，假设我的 NSView 中的对象是一个 NSTextView，其 stringValue 为“hello world”

使用 NSViews 方法 subViews 我返回一个包含所有子视图的数组，其中包括上面提到的 NSTextView。

我可以使用 NSObject className 中的函数将类名返回为@“NSTextView”。

那我应该可以说... 两件事之一

```
 [subView setString:@"hey"];//compile error 
```

或者...

```
 NSTextView *temp = subView;
    [temp setString:@"test"]; 
```

编译但我得到一个警告（不兼容的指针类型初始化 'NSTextView *__strong' 与类型的表达式'NSView *const __strong'）

当我运行程序并尝试运行我的例程时，它崩溃并说 -[NSTextField setString:]:unrecognized selector sent to an instance 0X101a0cfe0

我不知道该怎么做，将不胜感激！

大家好。这是问题，希望很容易回答。

我正在创建一个类，在其中你给它一个视图数组，它将所有元素保存在其中并能够读回它们。我通过使用 NSArchiver 类得到了保存，但不是阅读部分。

```
@interface preferences : NSObject

- (void)savePreferences;
- (void)readPreferences;

@property (strong) NSMutableArray *theViews;

@end
 #import "preferences.h"

@implementation preferences
- (id)init {
    self = [super init];
    if (self) {
        _theViews = [[NSMutableArray alloc]init];
    }
    return self;
}

- (void)savePreferences{
    NSLog(@"Saving Preferences...");
    [NSKeyedArchiver archiveRootObject:_theViews toFile:@"preferences.xml"];
}

- (void)readPreferences{
    NSLog(@"Reading Preferences...");
    _theViews = [NSKeyedUnarchiver unarchiveObjectWithFile:@"preferences.xml"];
}

@end 
```

这个想法是我想要一种简单的方法来保存偏好并在以后调用它们。我知道 NS_UserDefaults，并通过创建从界面构建器到我的代码的连接来手动完成，但实际上我有数千个偏好，我必须建立连接并保存。

所以我的目标是创建一个类，我说类似......

```
[preferences savePreferencesForViews:ArrayOfViews];//For Saving
[preferences readPreferencesForViews:ArrayOfViews];//For Reading 
```

我的计划是在界面生成器中为每个元素设置标识符属性。然后要从中获取一个值，我将在视图中的每个子视图中进行一个函数循环，直到它找到一个与我请求的标识符匹配的标识符，我将检查它的类类型以创建一个临时变量并使用该临时变量类 tpye 从中获取价值。

例如，假设我的 NSView 中的对象是一个 NSTextView，其 stringValue 为“hello world”

使用 NSViews 方法 subViews 我返回一个包含所有子视图的数组，其中包括上面提到的 NSTextView。

我可以使用 NSObject className 中的函数将类名返回为@“NSTextView”。

那我应该可以说... 两件事之一

```
 [subView setString:@"hey"];//compile error 
```

或者...

```
 NSTextView *temp = subView;
    [temp setString:@"test"]; 
```

编译但我得到一个警告（不兼容的指针类型初始化 'NSTextView *__strong' 与类型的表达式'NSView *const __strong'）

当我运行程序并尝试运行我的例程时，它崩溃并说 -[NSTextField setString:]:unrecognized selector sent to an instance 0X101a0cfe0

我不知道该怎么做，将不胜感激！

我的接口实现如下

```
@implementation appController

- (IBAction)savePreferences:(id)sender {
    NSLog(@"Save Button Pressed");

    //Create an instance of the preference class.
    preferences *PreferencesObject = [[preferences alloc]init];

    //Add the views we want to sve to the PreferenceObject.
    [[PreferencesObject theViews]addObject:_preferenceView];

    //Save the actual preferences now.
    [PreferencesObject savePreferences];

}
- (IBAction)loadPreferences:(id)sender {

    //Create an instance of the preference class.
    preferences __strong *PreferencesObject = [[preferences alloc]init];

    //Read the preferences into it's internal array.
    [PreferencesObject readPreferences];

    for(NSView __strong *view in [PreferencesObject theViews]){
        if([[view identifier]isEqualTo:[_preferenceView identifier]]){
            NSLog(@"View Match Found For PreferenceView, Setting...");

            for(NSView *subView in [_preferenceView subviews]){
                if([[subView identifier]isEqualTo:@"name"]){
                    NSLog(@"Attempting to set value of name control");
                    NSTextView *temp = subView;
                    [temp setString:@"test"];
                }
            }

        }
    }

}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T02:34:33.863

看起来您的视图数组包含文本字段，而不是文本视图，也许您在 IB 中犯了绑定错误。

文本字段响应 setStringValue: ，而不是 setString: 。

**一些技巧**

*   您可以测试对象的类归属；
*   如果您确定指针指向某个类的对象，则可以强制转换该指针。在您的情况下，您将进行向下转换（从基类到子类）。

所以你会做这样的事情：

```
if ([ subview isKindOfClass: [NSTextView class]]) // until you fix that binding error or whatever, it will return NO
{
    NSTextView* temp= (NSTextView*) subview;
    [ temp setString: @"temp" ];
} 
```

# python - 事件信号每次发射两次

> ID：14311578
> 
> 赞同：6
> 
> 时间：2013-01-14T02:20:11.203
> 
> 标签：python, python-2.7, pyqt

我正在开发 GUI 应用程序。从主窗口我打开新的弹出窗口 Dialog=myDialog() （所以现在两者都打开了）。如果我按下该新弹出窗口上的按钮，并使用以下代码捕获信号：

```
class Ui_DialogCalibration(object):
def setupUi(self, DialogCalibration):
    DialogCalibration.setObjectName(_fromUtf8("DialogCalibration"))
    DialogCalibration.resize(888, 378)
    self.widget = QtGui.QWidget(DialogCalibration)
    self.widget.setGeometry(QtCore.QRect(10, 150, 641, 144))
    self.widget.setObjectName(_fromUtf8("widget"))
    self.horizontalLayout_5 = QtGui.QHBoxLayout(self.widget)
    self.horizontalLayout_5.setMargin(0)
    self.horizontalLayout_5.setObjectName(_fromUtf8("horizontalLayout_5"))
    self.radioButtonManual = QtGui.QRadioButton(self.widget)
    self.radioButtonManual.setObjectName(_fromUtf8("radioButtonManual"))
    self.horizontalLayout_5.addWidget(self.radioButtonManual)
    self.verticalLayout = QtGui.QVBoxLayout()
    self.verticalLayout.setObjectName(_fromUtf8("verticalLayout"))
    self.horizontalLayout_4 = QtGui.QHBoxLayout()
    self.horizontalLayout_4.setObjectName(_fromUtf8("horizontalLayout_4"))
    self.verticalLayout_4 = QtGui.QVBoxLayout()
    self.verticalLayout_4.setObjectName(_fromUtf8("verticalLayout_4"))
    self.pushButtonDesnoX = QtGui.QPushButton(self.widget)
    self.pushButtonDesnoX.setObjectName(_fromUtf8("pushButtonDesnoX"))
    self.verticalLayout_4.addWidget(self.pushButtonDesnoX)
    self.lineEdit = QtGui.QLineEdit(self.widget)
    self.lineEdit.setText(_fromUtf8(""))
    self.lineEdit.setObjectName(_fromUtf8("lineEdit"))
    self.verticalLayout_4.addWidget(self.lineEdit)
    self.pushButtonLijevoX = QtGui.QPushButton(self.widget)
    self.pushButtonLijevoX.setObjectName(_fromUtf8("pushButtonLijevoX"))
    self.verticalLayout_4.addWidget(self.pushButtonLijevoX)
    self.horizontalLayout_4.addLayout(self.verticalLayout_4)
    self.verticalLayout_3 = QtGui.QVBoxLayout()
    self.verticalLayout_3.setObjectName(_fromUtf8("verticalLayout_3"))
    self.pushButtonDesnoY = QtGui.QPushButton(self.widget)
    self.pushButtonDesnoY.setObjectName(_fromUtf8("pushButtonDesnoY"))
    self.verticalLayout_3.addWidget(self.pushButtonDesnoY)
    self.lineEdit_2 = QtGui.QLineEdit(self.widget)
    self.lineEdit_2.setText(_fromUtf8(""))
    self.lineEdit_2.setObjectName(_fromUtf8("lineEdit_2"))
    self.verticalLayout_3.addWidget(self.lineEdit_2)
    self.pushButtonLijevoY = QtGui.QPushButton(self.widget)
    self.pushButtonLijevoY.setObjectName(_fromUtf8("pushButtonLijevoY"))
    self.verticalLayout_3.addWidget(self.pushButtonLijevoY)
    self.horizontalLayout_4.addLayout(self.verticalLayout_3)
    self.verticalLayout_2 = QtGui.QVBoxLayout()
    self.verticalLayout_2.setObjectName(_fromUtf8("verticalLayout_2"))
    self.pushButtonDesnoZ = QtGui.QPushButton(self.widget)
    self.pushButtonDesnoZ.setObjectName(_fromUtf8("pushButtonDesnoZ"))
    self.verticalLayout_2.addWidget(self.pushButtonDesnoZ)
    self.lineEdit_3 = QtGui.QLineEdit(self.widget)
    self.lineEdit_3.setText(_fromUtf8(""))
    self.lineEdit_3.setObjectName(_fromUtf8("lineEdit_3"))
    self.verticalLayout_2.addWidget(self.lineEdit_3)
    self.pushButtoLijevoZ = QtGui.QPushButton(self.widget)
    self.pushButtoLijevoZ.setObjectName(_fromUtf8("pushButtoLijevoZ"))
    self.verticalLayout_2.addWidget(self.pushButtoLijevoZ)
    self.horizontalLayout_4.addLayout(self.verticalLayout_2)
    self.verticalLayout.addLayout(self.horizontalLayout_4)
    self.pushButtonSondaSettings = QtGui.QPushButton(self.widget)
    self.pushButtonSondaSettings.setObjectName(_fromUtf8("pushButtonSondaSettings"))
    self.verticalLayout.addWidget(self.pushButtonSondaSettings)
    self.pushButtonReset = QtGui.QPushButton(self.widget)
    self.pushButtonReset.setObjectName(_fromUtf8("pushButtonReset"))
    self.verticalLayout.addWidget(self.pushButtonReset)
    self.horizontalLayout_5.addLayout(self.verticalLayout)
    self.verticalLayout_5 = QtGui.QVBoxLayout()
    self.verticalLayout_5.setObjectName(_fromUtf8("verticalLayout_5"))
    self.labelPozition = QtGui.QLabel(self.widget)
    self.labelPozition.setObjectName(_fromUtf8("labelPozition"))
    self.verticalLayout_5.addWidget(self.labelPozition)
    self.horizontalLayout = QtGui.QHBoxLayout()
    self.horizontalLayout.setObjectName(_fromUtf8("horizontalLayout"))
    self.labelpozitionX = QtGui.QLabel(self.widget)
    self.labelpozitionX.setObjectName(_fromUtf8("labelpozitionX"))
    self.horizontalLayout.addWidget(self.labelpozitionX)
    self.lineEditPozitionX = QtGui.QLineEdit(self.widget)
    self.lineEditPozitionX.setObjectName(_fromUtf8("lineEditPozitionX"))
    self.horizontalLayout.addWidget(self.lineEditPozitionX)
    self.verticalLayout_5.addLayout(self.horizontalLayout)
    self.horizontalLayout_2 = QtGui.QHBoxLayout()
    self.horizontalLayout_2.setObjectName(_fromUtf8("horizontalLayout_2"))
    self.labelPozitionY = QtGui.QLabel(self.widget)
    self.labelPozitionY.setObjectName(_fromUtf8("labelPozitionY"))
    self.horizontalLayout_2.addWidget(self.labelPozitionY)
    self.lineEditPozitionY = QtGui.QLineEdit(self.widget)
    self.lineEditPozitionY.setObjectName(_fromUtf8("lineEditPozitionY"))
    self.horizontalLayout_2.addWidget(self.lineEditPozitionY)
    self.verticalLayout_5.addLayout(self.horizontalLayout_2)
    self.horizontalLayout_3 = QtGui.QHBoxLayout()
    self.horizontalLayout_3.setObjectName(_fromUtf8("horizontalLayout_3"))
    self.labelPozitionZ = QtGui.QLabel(self.widget)
    self.labelPozitionZ.setObjectName(_fromUtf8("labelPozitionZ"))
    self.horizontalLayout_3.addWidget(self.labelPozitionZ)
    self.lineEditPozitionZ = QtGui.QLineEdit(self.widget)
    self.lineEditPozitionZ.setObjectName(_fromUtf8("lineEditPozitionZ"))
    self.horizontalLayout_3.addWidget(self.lineEditPozitionZ)
    self.verticalLayout_5.addLayout(self.horizontalLayout_3)
    self.horizontalLayout_5.addLayout(self.verticalLayout_5)
    self.widget1 = QtGui.QWidget(DialogCalibration)
    self.widget1.setGeometry(QtCore.QRect(20, 40, 631, 91))
    self.widget1.setObjectName(_fromUtf8("widget1"))
    self.verticalLayout_6 = QtGui.QVBoxLayout(self.widget1)
    self.verticalLayout_6.setMargin(0)
    self.verticalLayout_6.setObjectName(_fromUtf8("verticalLayout_6"))
    self.radioButtonAutomatic = QtGui.QRadioButton(self.widget1)
    self.radioButtonAutomatic.setObjectName(_fromUtf8("radioButtonAutomatic"))
    self.verticalLayout_6.addWidget(self.radioButtonAutomatic)
    self.buttonBox = QtGui.QDialogButtonBox(self.widget1)
    self.buttonBox.setOrientation(QtCore.Qt.Horizontal)
    self.buttonBox.setStandardButtons(QtGui.QDialogButtonBox.Cancel|QtGui.QDialogButtonBox.Ok)
    self.buttonBox.setObjectName(_fromUtf8("buttonBox"))
    self.verticalLayout_6.addWidget(self.buttonBox)
    self.labelpozitionX.setBuddy(self.lineEditPozitionX)
    self.labelPozitionY.setBuddy(self.lineEditPozitionY)
    self.labelPozitionZ.setBuddy(self.lineEditPozitionZ)
    self.radioButtonManual.toggle()
    self.buttonBox.setEnabled(False)
    self.pushButtonDesnoX.setEnabled(False)
    self.pushButtonDesnoY.setEnabled(False)
    self.pushButtonDesnoZ.setEnabled(False)
    self.pushButtonLijevoX.setEnabled(False)
    self.pushButtonLijevoY.setEnabled(False)
    self.pushButtoLijevoZ.setEnabled(False)
    self.pushButtonReset.setEnabled(False)
    self.lineEdit.setText("1")
    self.lineEdit_2.setText("1")
    self.lineEdit_3.setText("1")
    self.X=None
    self.Y=None
    self.Z=None

    self.retranslateUi(DialogCalibration)
    QtCore.QObject.connect(self.buttonBox, QtCore.SIGNAL(_fromUtf8("accepted()")), DialogCalibration.accept)
    QtCore.QObject.connect(self.buttonBox, QtCore.SIGNAL(_fromUtf8("rejected()")), DialogCalibration.reject)
    QtCore.QMetaObject.connectSlotsByName(DialogCalibration)

 class myDialog(QtGui.QDialog,Ui_DialogCalibration):
def __init__(self,sonda, parent=None):
    super(myDialog, self).__init__( parent)
    self.toupleSonda=sonda
    self.setupUi(self)
def on_pushButtonDesnoX_clicked(self):

    value=int(self.lineEdit.text())
    self.X=self.X+value
    print self.X

def retranslateUi(self, DialogCalibration):
    DialogCalibration.setWindowTitle(QtGui.QApplication.translate("DialogCalibration", "Calibration", None, QtGui.QApplication.UnicodeUTF8))
    self.radioButtonManual.setText(QtGui.QApplication.translate("DialogCalibration", "manual", None, QtGui.QApplication.UnicodeUTF8))
    self.pushButtonDesnoX.setText(QtGui.QApplication.translate("DialogCalibration", "Desno X", None, QtGui.QApplication.UnicodeUTF8))
    self.pushButtonLijevoX.setText(QtGui.QApplication.translate("DialogCalibration", "Lijevo X", None, QtGui.QApplication.UnicodeUTF8))
    self.pushButtonDesnoY.setText(QtGui.QApplication.translate("DialogCalibration", "Naprijed Y", None, QtGui.QApplication.UnicodeUTF8))
    self.pushButtonLijevoY.setText(QtGui.QApplication.translate("DialogCalibration", "Nazad Y", None, QtGui.QApplication.UnicodeUTF8))
    self.pushButtonDesnoZ.setText(QtGui.QApplication.translate("DialogCalibration", "Gore Z", None, QtGui.QApplication.UnicodeUTF8))
    self.pushButtoLijevoZ.setText(QtGui.QApplication.translate("DialogCalibration", "Dolje Z", None, QtGui.QApplication.UnicodeUTF8))
    self.pushButtonSondaSettings.setText(QtGui.QApplication.translate("DialogCalibration", "Load", None, QtGui.QApplication.UnicodeUTF8))
    self.pushButtonReset.setText(QtGui.QApplication.translate("DialogCalibration", "Reset", None, QtGui.QApplication.UnicodeUTF8))
    self.labelPozition.setText(QtGui.QApplication.translate("DialogCalibration", "Current pozition", None, QtGui.QApplication.UnicodeUTF8))
    self.labelpozitionX.setText(QtGui.QApplication.translate("DialogCalibration", "X", None, QtGui.QApplication.UnicodeUTF8))
    self.labelPozitionY.setText(QtGui.QApplication.translate("DialogCalibration", "Y", None, QtGui.QApplication.UnicodeUTF8))
    self.labelPozitionZ.setText(QtGui.QApplication.translate("DialogCalibration", "Z", None, QtGui.QApplication.UnicodeUTF8))
    self.radioButtonAutomatic.setText(QtGui.QApplication.translate("DialogCalibration", "automatic", None, QtGui.QApplication.UnicodeUTF8)) 
```

我得到了这个输出

1

2

所以，这个方法已经执行了两次。我该如何解决这个问题？弹出窗口上发出的所有其他信号也会发生同样的情况

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-14T05:51:58.540

引用[文档](http://www.riverbankcomputing.com/static/Docs/PyQt4/html/new_style_signals_slots.html#connecting-slots-by-name)：

> [连接信号的两种变体] 也发生在带有可选参数的信号上。Qt 使用多个信号来实现这一点。例如， `QtGui.QAbstractButton`具有以下信号：
> 
> ```
> void clicked(bool checked = false); 
> ```
> 
> Qt 实现如下：
> 
> ```
> void clicked(); 
> void clicked(bool checked); 
> ```
> 
> 装饰器`pyqtSlot()`可用于指定应将哪些信号连接到插槽。

所以你的问题来自一个事实，即`clicked`a 的信号`QPushButton`有两个重载。由于 Qt 可以用较少的参数将信号`connectSlotsByName`连接到插槽，因此可以成功地将两个重载连接到您的插槽，因此每次单击都会调用插槽两次。

您需要通过以下方式指定适当的重载`pyqtSlot`：

```
@QtCore.pyqtSlot() # signal with no arguments
def on_pushButtonDesnoX_clicked(self):
    value=int(self.lineEdit.text())
    self.X=self.X+value
    print self.X 
```

# html - HTML5离线缓存附件下载页面？

> ID：14311581
> 
> 赞同：0
> 
> 时间：2013-01-14T02:20:18.867
> 
> 标签：html, offline-caching

问候小伙伴！我最近一直在使用 HTML5 应用程序缓存来创建离线 Web 应用程序。在我实现“离线附件下载”功能之前，一切都在 Chrome 上运行良好。基本上我已经将一个 servlet 缓存到应用程序缓存中。这个 servlet 实际上是一个带有以下标头的 .jpg 附件：

```
HTTP/1.1 200 OK
P3P: CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT"
Content-Type: application/octet-stream
Date: Fri, 11 Jan 2013 09:01:23 GMT
Content-Disposition: attachment; filename=MailAttachment.jpg
DownloadFileName: Snap1.jpg
Server: nginx/1.0.10
Cache-Control: private
Pragma: cache
Content-Length: 220005 
```

我试图实现的是当我离线访问这个 servlet 时，名为“MailAttachment.jpg”的图像将被下载（实际上是从应用程序缓存中）到浏览器指定的目录中。然而，当我在没有网络连接的情况下访问这个 servlet 时，浏览器尝试下载“MailAttachment.jpg”但立即取消了它。当内容长度足够小时（例如1kb），浏览器成功下载附件。我怀疑缓存的 servlet 中有一些不正确的标头。有人知道解决方案吗？首先十分感谢！

# java - 以两个日期的小时或分钟计算总持续时间

> ID：14311582
> 
> 赞同：1
> 
> 时间：2013-01-14T02:20:29.040
> 
> 标签：java, groovy

我是 groovy 的新手，目前正在处理日期。无论如何，我可以在常规中减去或添加两个日期吗？例如我有：

```
def build = Build.get(params.id)
def firstDate = build.firstDate
def secondDate = build.secondDate 
```

现在我想添加类似的日期：

```
firstDate + secondDate = (total hours or minutes) 
```

....还是需要将其转换为整数之类的东西？

更新：

例如，开始日期为 2013 年 1 月 7 日 12:00，结束日期为 2013 年 1 月 8 日 1:30。我想计算他们在这些日期之间有多少小时或分钟......对不起我的英语不好:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T02:55:10.130

> 例如，开始日期为 2013 年 1 月 7 日 12:00，结束日期为 2013 年 1 月 8 日 1:30。我想计算这些日期之间的小时数或分钟数。

以下将以毫秒为单位给出差异。

```
def diffdate = secondDate.getTime() - firstDate.getTime(); 
```

现在使用适当的数学转换为小时和分钟。

例如 diffdate / 60000 会给你分钟，diffdate / 3600000 会给你几个小时

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T03:01:13.873

使用[TimeCategory](http://groovy.codehaus.org/api/groovy/time/TimeCategory.html)：

```
use (groovy.time.TimeCategory) {
   def duration = secondDate - firstDate
   println "Days: ${duration.days}, Hours: ${duration.hours}, Hours: ${duration.minutes}"
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T03:13:09.300

该[`TimeCategory`](http://groovy.codehaus.org/api/groovy/time/TimeCategory.html)类别提供了您正在寻找的内容:)

使用这个类别时，java.util.Dates 变得更加用户友好，让您可以用很少的代码完成您希望它们完成的事情。例如，[减去两个日期](http://groovy.codehaus.org/api/groovy/time/TimeCategory.html#minus%28java.util.Date,%20java.util.Date%29)并得到 a[`TimeDuration`](http://groovy.codehaus.org/api/groovy/time/TimeDuration.html)作为结果：

```
import groovy.time.TimeCategory

// Using same dates as the question's example.
def start = Date.parseToStringDate('Mon Jan 07 12:00:00 GMT 2013')
def end = Date.parseToStringDate('Tue Jan 07 01:30:00 GMT 2013')

use (TimeCategory) {
    println start - end // Prints "10 hours, 30 minutes"
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T02:37:09.260

我将在这里做一个假设：Groovy 可以使用 Java 库。

在这种情况下，您应该查看 JodaTime 库。它有一个名为[`Duration`](http://joda-time.sourceforge.net/apidocs/org/joda/time/Duration.html). 持续时间可以上两[`DateTime`](http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html)节课。它们与 java Date 非常相似。[这是如何以漂亮的方式打印出持续时间的方法。](https://stackoverflow.com/a/3471418/61624) 为方便起见，我将在链接中内联答案：

```
Duration duration = new Duration(123456); // in milliseconds
PeriodFormatter formatter = new PeriodFormatterBuilder()
     .appendDays()
     .appendSuffix("d")
     .appendHours()
     .appendSuffix("h")
     .appendMinutes()
     .appendSuffix("m")
     .appendSeconds()
     .appendSuffix("s")
     .toFormatter();
String formatted = formatter.print(duration.toPeriod());
System.out.println(formatted); 
```

# google-chrome - 扩展在 Chrome 24 中不起作用

> ID：14311586
> 
> 赞同：1
> 
> 时间：2013-01-14T02:20:51.687
> 
> 标签：google-chrome, google-chrome-extension

我使用以下几行在Chrome 扩展中定义`BlobBuilder`对象和函数`slice`

```
 window.BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder;

Blob.prototype.slice = Blob.prototype.slice || function(start, length) {
    return this.webkitSlice(start, start + length);
} 
```

它适用于最高版本 23 的 Chrome，但对于最新版本 24，它不再识别我的定义。比如`var builder = new BlobBuilder()`会提示错误：`Uncaught TypeError: undefined is not a function`.

有谁知道这里发生了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T05:44:35.873

`BlobBuilder``WebKitBlobBuilder` Chrome 不再支持webkit 版本并且已弃用，请检查[此问题](http://trac.webkit.org/changeset/115666)

# android - 将位图从微调器（活动）传递给 CustomView

> ID：14311588
> 
> 赞同：0
> 
> 时间：2013-01-14T02:20:57.733
> 
> 标签：android, android-layout, canvas, bitmap

我在 MainActivity 的布局中实现了几个按钮、SPINNER 和 EditText，但是，我尝试了几种方法将我的位图从微调器（MainActivity 类）检索到 CustomView，但失败了。请帮帮我！任何帮助是极大的赞赏！谢谢！

文本活动.java

```
 package com.example.textdrawn2;
    import android.os.Bundle;
    import android.app.Activity;
    import android.graphics.Bitmap;
    import android.graphics.Paint;
    import android.graphics.Typeface;
    import android.view.Menu;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.AdapterView;
    import android.widget.ArrayAdapter;
    import android.widget.Button;
    import android.widget.EditText;
    import android.widget.ImageView;
    import android.widget.Spinner;
    import android.widget.TextView;
    import android.widget.AdapterView.OnItemSelectedListener;

    public class TextActivity extends Activity{

TextView tv;
ImageView iv;
EditText et;
Button b;
public static Bitmap bmap;
Paint paint;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_text);

    //Initialise editText, textView & Button
    et = (EditText) findViewById(R.id.editText1);     
    tv = (TextView) findViewById(R.id.textView1);

    //Spinner (getting texts to be displayed inside drop down box)
    Spinner fontspinner = (Spinner) findViewById(R.id.fonts_spinner);
    // Create an ArrayAdapter using the string array and a default spinner layout
    ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
         R.array.fonts_array, android.R.layout.simple_spinner_item);
    // Specify the layout to use when the list of choices appears
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    // Apply the adapter to the spinner
    fontspinner.setAdapter(adapter);

    //Initialise Spinner
    Spinner fonts_sp;
    fonts_sp = (Spinner) findViewById(R.id.fonts_spinner);
    fonts_sp.setOnItemSelectedListener(myListener);

}

OnItemSelectedListener myListener = new OnItemSelectedListener() { 

        public void onItemSelected(AdapterView<?> parent, View view, 
                int pos, long id) {

            //Initialise Button, ET and TV
            Button b = (Button) findViewById(R.id.btnText);
            et = (EditText) findViewById(R.id.editText1);
            tv = (TextView) findViewById(R.id.textView1);
            //iv = (ImageView) findViewById(R.id.imageView1);

            //To enable program to switch to a different font
            switch(pos) {

            case 0: // When user select Code 39 font
                    b.setOnClickListener(new OnClickListener() {      
                        @Override     
                        public void onClick(View view) {          
                            if (et.getText().toString().equals("")) {

                                //Clear textView
                                tv.setText("");          
                                et.setText("");
                                tv.buildDrawingCache();
                                iv.setImageBitmap(tv.getDrawingCache());

                            }
                            else { 

                                //To change to Code 39 barCode font
                                Typeface df = Typeface.createFromAsset(getAssets(),                 
                                        "fonts/IDAutomationHC39M_FREE.otf");         
                                TextView tv1 = (TextView) findViewById(R.id.textView1);         
                                tv1.setTypeface(df);

                                String editTextValue = et.getText().toString();            
                                tv.setText(editTextValue);

                                ImageView iv = (ImageView) findViewById(R.id.imageView1);
                                tv.buildDrawingCache();
                                bmap = tv.getDrawingCache();
                                iv.setImageBitmap(bmap);

                            }          
                        }
                    });
                    break;

            case 1: // When user select Code 128 font

                b.setOnClickListener(new OnClickListener() {      
                    @Override     
                    public void onClick(View view) {          
                        if (et.getText().toString().equals("")) {

                            //Clear textView
                            tv.setText("");          
                            et.setText("");
                            tv.buildDrawingCache();
                            iv.setImageBitmap(tv.getDrawingCache());
                        }
                        else { 

                            //To change to Code 128 barCode font
                            Typeface df = Typeface.createFromAsset(getAssets(),                 
                                    "fonts/code128.ttf");         
                            TextView tv1 = (TextView) findViewById(R.id.textView1);         
                            tv1.setTypeface(df);

                            String editTextValue = et.getText().toString();            
                            tv.setText(editTextValue);

                            tv.buildDrawingCache();
                            iv.setImageBitmap(tv.getDrawingCache());
                        }          
                    }
                });
                break;

            case 2: // When user select MOLOT font
                    b.setOnClickListener(new OnClickListener() {      
                        @Override     
                        public void onClick(View view) {          
                            if (et.getText().toString().equals("")) {

                                //Clear textView
                                tv.setText("");          
                                et.setText("");
                                tv.buildDrawingCache();
                                iv.setImageBitmap(tv.getDrawingCache());

                            }
                            else { 

                                //To change to Code 39 barCode font
                                Typeface df = Typeface.createFromAsset(getAssets(),                 
                                        "fonts/Molot.otf");         
                                TextView tv1 = (TextView) findViewById(R.id.textView1);         
                                tv1.setTypeface(df);

                                String editTextValue = et.getText().toString();            
                                tv.setText(editTextValue);

                                tv.buildDrawingCache();
                                iv.setImageBitmap(tv.getDrawingCache());
                            }          
                        }
                    });
                    break; 
```

Text.Java(自定义视图)

```
public class Text extends View implements OnTouchListener {

Typeface fonts ;

public Text(Context context,AttributeSet attrs) {
    super(context, attrs);

    //fonts = Typeface.createFromAsset(context.getAssets(), "Molot.otf");
    //et = (EditText) findViewById(R.id.editText1);

    }

@Override
public void onDraw(Canvas canvas) {
    super.onDraw(canvas);

    canvas.drawColor(Color.BLUE);
    //canvas.drawBitmap(bmap, 0, 100, null);

}

@Override
public boolean onTouch(View v, MotionEvent event) {

    return true;

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T03:16:32.063

您要设置的类`Bitmap`需要一个方法来执行此操作：

```
Bitmap bitmap;

public void setBitmap(Bitmap bitmap) {
    this.bitmap = bitmap;
} 
```

# git - What to do if I forgot to do a git svn rebase before merge?

> ID：14311594
> 
> 赞同：3
> 
> 时间：2013-01-14T02:22:11.467
> 
> 标签：git, git-svn

I'm using git-svn and have been working on a local topic branch for a series of commits and have run into some trouble merging my changes back into the master.

These are the steps that have gotten me to where I'm at:

```
git commit  (on topic branch)
git checkout master
git svn fetch (numerous files pulled down from origin)
git merge <topic branch> 
```

At this point I had a merge conflict which I fixed and then did a `git add <file>` to add my fixed file.

Now my `git status` reports that all of the files (included all those fetched from the server) are changes to be committed. I forgot to do a `git svn rebase` which I'm thinking is my problem.

I'm fairly new git in general so I'm not even sure if what I'm seeing is expected behavior but it seems suspect. Did my forgotten `git svn reabse` get me into trouble? What do I do to get out of this potential mess?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T03:21:15.960

Assuming you were working with trunk, discard your merge commit

```
git reset --hard remotes/trunk 
```

Catch up with any changes in Subversion

```
git svn fetch
git svn rebase 
```

Now you have two options. You could rebase the work on your topic branch and merge it:

```
git checkout <topic branch>
git rebase remotes/trunk
git checkout master
git reset --hard remotes/trunk
git merge <topic branch>
git svn dcommit 
```

You might prefer squash-merge instead, which means balling all changes on a branch into a single commit. Discard, fetch, and rebase as above and then

```
git merge --squash <topic branch> 
```

Clean merges will go to the index which you can review with

```
git diff --cached 
```

Any conflicts will be left in the work tree, and you can see them with

```
git diff 
```

Resolve any conflicts, stage them with `git add`, and then `git commit` to wrap up your new commit.

# android - 使用 GLSurfaceView.onPause() 时出错

> ID：14311597
> 
> 赞同：1
> 
> 时间：2013-01-14T02:22:31.717
> 
> 标签：android, andengine, glsurfaceview

我正在使用 AndEngine 开发 Android 游戏，并且在 logCat 中出现以下错误：

```
01-13 20:44:46.726: D/AndEngine(16843): StartActivity.onPause @(Thread: 'main')
01-13 20:44:46.726: I/GLThread(16843): onPause tid=17
01-13 20:44:46.726: I/Main thread(16843): onPause waiting for mPaused.
01-13 20:44:46.734: I/GLThread(16843): mPaused is now true tid=17
01-13 20:44:46.734: I/GLThread(16843): releasing EGL surface because paused tid=17
01-13 20:44:46.734: W/EglHelper(16843): destroySurface()  tid=17
01-13 20:44:46.734: D/BRCM_EGL(16843): eglMakeCurrent(NULL) Thread: 16858
01-13 20:44:46.734: D/BRCM_EGL(16843): eglDestroySurface() surface: 0x219018, android          window 0x2187f8, Thread: 16858
01-13 20:44:46.734: W/EglHelper(16843): finish() tid=17
01-13 20:44:46.734: D/BRCM_EGL(16843): eglDestroyContext() context: 0x266ec8, VC  context: 1, Thread 16858
01-13 20:44:46.734: E/EGL_SERVER(16843): pid mem_get_free_space before =  5ffb80
01-13 20:44:46.734: E/EGL_SERVER(16843): pid mem_get_free_space =  5ffb80
01-13 20:44:46.750: I/GLThread(16843): releasing EGL context because paused tid=17
01-13 20:44:46.750: D/AndEngine(16843): StartActivity.onPauseGame @(Thread: 'main')
01-13 20:44:46.859: I/GLThread(16843): noticed surfaceView surface lost tid=17
01-13 20:44:48.843: D/AndEngine(16843): StartActivity.onResume @(Thread: 'main')
01-13 20:44:48.843: I/GLThread(16843): onResume tid=17
01-13 20:44:48.843: I/Main thread(16843): onResume waiting for !mPaused.
01-13 20:44:48.843: I/GLThread(16843): mPaused is now false tid=17
01-13 20:44:48.851: I/GLThread(16843): noticed surfaceView surface acquired tid=17
01-13 20:44:48.851: W/EglHelper(16843): start() tid=17
01-13 20:44:48.859: D/BRCM_EGL(16843): eglCreateContext() context: 0x266ec8, VC context    1, Thread 16858
01-13 20:44:48.859: W/EglHelper(16843): createContext  com.google.android.gles_jni.EGLContextImpl@40521008 tid=17
01-13 20:44:48.859: W/GLThread(16843): egl createSurface
01-13 20:44:48.859: W/EglHelper(16843): createSurface()  tid=17
01-13 20:44:48.859: D/BRCM_EGL(16843): eglCreateWindowSurface() surface: 0x219018, VC surface: 1, Thread: 16858
01-13 20:44:48.859: D/BRCM_EGL(16843): eglMakeCurrent(0x266ec8, 0x219018, 0x219018) Thread: 16858
01-13 20:44:48.859: I/Main thread(16843): onWindowResize waiting for render complete from tid=17
01-13 20:44:48.867: W/GLThread(16843): onSurfaceCreated
01-13 20:44:48.867: D/AndEngine(16843): VERSION: OpenGL ES 2.0
01-13 20:44:48.867: D/AndEngine(16843): RENDERER: VideoCore IV HW
01-13 20:44:48.867: D/AndEngine(16843): EGLCONFIG: EGLConfig(Red=5, Green=6, Blue=5,   Alpha=0, Depth=0, Stencil=0)
01-13 20:44:48.867: D/AndEngine(16843): EXTENSIONS: GL_OES_compressed_ETC1_RGB8_texture  GL_OES_compressed_paletted_texture GL_OES_texture_npot GL_OES_depth24   GL_OES_vertex_half_float GL_OES_EGL_image GL_EXT_discard_framebuffer GL_OES_rgb8_rgba8 GL_OES_depth32
01-13 20:44:48.867: D/AndEngine(16843): MAX_VERTEX_ATTRIBS: 8
01-13 20:44:48.867: D/AndEngine(16843): MAX_VERTEX_UNIFORM_VECTORS: 128
01-13 20:44:48.867: D/AndEngine(16843): MAX_FRAGMENT_UNIFORM_VECTORS: 128
01-13 20:44:48.867: D/AndEngine(16843): MAX_TEXTURE_IMAGE_UNITS: 8
01-13 20:44:48.867: D/AndEngine(16843): MAX_TEXTURE_SIZE: 2048
01-13 20:44:48.867: D/AndEngine(16843): StartActivity.onSurfaceCreated @(Thread:    'GLThread 17')
01-13 20:44:48.867: D/AndEngine(16843): StartActivity.onReloadResources @(Thread: 'GLThread 17')
01-13 20:44:48.867: D/AndEngine(16843): StartActivity.onResumeGame @(Thread: 'GLThread 17')
01-13 20:44:48.867: W/GLThread(16843): onSurfaceChanged(480, 320)
01-13 20:44:48.867: D/AndEngine(16843): StartActivity.onSurfaceChanged(Width=480,  Height=320) @(Thread: 'GLThread 17')
01-13 20:44:49.085: E/(16843): RTOS COMMON MEM zero linear buffer allocated 1949696 0 205
01-13 20:44:49.085: E/(16843): BIG MEM OUT OF HANDLES
01-13 20:44:49.132: D/dalvikvm(16843): GC_EXTERNAL_ALLOC freed 42K, 51% free  3021K/6087K, external 696K/1208K, paused 47ms
01-13 20:44:49.289: E/(16843): Unable to Find Phys Addr for 225a98
01-13 20:44:49.289: E/(16843): RTOS COMMON MEM zero linear buffer allocated 4771840 0 205
01-13 20:44:49.289: E/(16843): BIG MEM OUT OF HANDLES
01-13 20:44:49.539: E/(16843): Unable to Find Phys Addr for 225a98
01-13 20:44:49.593: E/(16843): RTOS COMMON MEM zero linear buffer allocated 360448 0 205
01-13 20:44:49.593: E/(16843): BIG MEM OUT OF HANDLES
01-13 20:44:49.640: E/(16843): Unable to Find Phys Addr for 225a98
01-13 20:44:49.679: D/dalvikvm(16843): GC_EXPLICIT freed 260K, 51% free 3020K/6087K, external 696K/1208K, paused 42ms
01-13 20:44:49.710: E/(16843): Unable to Find Phys Addr for 225a98
01-13 20:44:49.710: E/(16843): Unable to Find Phys Addr for 225a98
01-13 20:44:49.710: E/(16843): Unable to Find Phys Addr for 225a98
01-13 20:44:49.710: E/(16843): Unable to Find Phys Addr for 225a98
01-13 20:44:49.710: E/(16843): Unable to Find Phys Addr for 225a98
01-13 20:44:49.718: E/BRCM_EGL(16843): eglSwapBuffers Error 0x505
01-13 20:44:49.726: W/EglHelper(16843): destroySurface()  tid=17
01-13 20:44:49.726: D/BRCM_EGL(16843): eglMakeCurrent(NULL) Thread: 16858
01-13 20:44:49.726: D/BRCM_EGL(16843): eglDestroySurface() surface: 0x219018, android window 0x2187f8, Thread: 16858
01-13 20:44:49.726: W/EglHelper(16843): finish() tid=17
01-13 20:44:49.726: D/BRCM_EGL(16843): eglDestroyContext() context: 0x266ec8, VC  context: 1, Thread 16858
01-13 20:44:49.734: E/EGL_SERVER(16843): pid mem_get_free_space before =  5ffb80
01-13 20:44:49.734: E/EGL_SERVER(16843): pid mem_get_free_space =  5ffb80
01-13 20:44:49.750: W/dalvikvm(16843): threadid=12: thread exiting with uncaught exception (group=0x4001c578)
01-13 20:44:49.804: E/AndroidRuntime(16843): FATAL EXCEPTION: GLThread 17
01-13 20:44:49.804: E/AndroidRuntime(16843): java.lang.RuntimeException: eglSwapBuffers failed: EGL_SUCCESS
01-13 20:44:49.804: E/AndroidRuntime(16843):    at android.opengl.GLSurfaceView$EglHelper.throwEglException(GLSurfaceView.java:1085)
01-13 20:44:49.804: E/AndroidRuntime(16843):    at   android.opengl.GLSurfaceView$EglHelper.swap(GLSurfaceView.java:1043)
01-13 20:44:49.804: E/AndroidRuntime(16843):    at   android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1369)
01-13 20:44:49.804: E/AndroidRuntime(16843):    at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1123)
01-13 20:44:49.835: D/AndEngine(16843): StartActivity.onPause @(Thread: 'main')
01-13 20:44:49.835: I/GLThread(16843): onPause tid=17
01-13 20:44:49.835: D/AndEngine(16843): StartActivity.onPauseGame @(Thread: 'main')
01-13 20:44:57.968: D/AndEngine(16843): StartActivity.onDestroy @(Thread: 'main')
01-13 20:44:57.968: D/AndEngine(16843): UpdateThread interrupted. Don't worry - this EngineDestroyedException is most likely expected!
01-13 20:44:57.968: D/AndEngine(16843): org.andengine.engine.Engine$EngineDestroyedException
01-13 20:44:57.968: D/AndEngine(16843):     at org.andengine.engine.Engine.throwOnDestroyed(Engine.java:574)
01-13 20:44:57.968: D/AndEngine(16843):     at org.andengine.engine.Engine.onTickUpdate(Engine.java:560)
01-13 20:44:57.968: D/AndEngine(16843):     at org.andengine.engine.Engine$UpdateThread.run(Engine.java:820)
01-13 20:44:57.968: D/AndEngine(16843): StartActivity.onDestroyResources @(Thread: 'main')
01-13 20:44:57.968: D/AndEngine(16843): StartActivity.onGameDestroyed @(Thread: 'main') 
```

该游戏在许多设备上运行良好，但在三星 Galaxy Ace (GT-S5830C) 上出现此错误时崩溃。它发生在我关闭/重新打开游戏几次，或切换游戏活动几次之后。

实际上，如果我在游戏退出时终止进程，则不会在加载/重新加载游戏时发生此问题。如果我在活动暂停时不调用 GLSurfaceView.onPause() 切换活动时也不会发生这种情况。两者都不是好的做法，但为我们提供了一些有关问题的线索，因为两者似乎都避免了可能是根本原因的资产重新加载。我错过了什么吗？

会不会是设备相关的问题？这种变通办法的副作用是什么？

# python - Importing Libraries Issue - "ImportError: No Module named ____"

> ID：14311601
> 
> 赞同：10
> 
> 时间：2013-01-14T02:23:15.583
> 
> 标签：python, numpy, libraries, pip, nltk

I've looked through a lot of the other question/answers for this topic but no avail.

I downloaded numpy and nltk using pip, and based on the messages I know the install location is: `Requirement already satisfied (use --upgrade to upgrade): nltk in /usr/local/lib/python2.7/site-packages`, so it looks like it's installing in the directory for version 2.7.

When I run `python` I get `Python 2.7.3 (v2.7.3:70274d53c1dd, Apr 9 2012, 20:52:43)`, so that's clearly also version 2.7.

However, when I try "import nltk" or "import numpy" in the Python console, I always get the `ImportError: No module named nltk` error. Any advice would be greatly appreciated!

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-14T02:40:33.623

Try changing the `PYTHONPATH`environment variable. If you are using BASH the below should work. Other Linux shells will be slightly different in how they assign environment variables.

```
export PYTHONPATH=$PYTHONPATH:/usr/local/lib/python2.7/site-packages 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-16T13:08:58.220

The problem is that `/usr/local/lib/python2.7/site-packages` is not in your default path list. In order to verify this, run the following commands:

```
import sys
for pth in sys.path:
    print pth 
```

You will get a list of the directories searched for modules. As you probably will not have `/usr/local/lib/python2.7/site-packages` in the list, you have the following options:

1.  Remove `nltk` and install it again in one of the directories paths (note, that e.g. on Debian, it may be `/usr/local/lib/python2.7/dist-packages`.

2.  On each run, set PYTHONPATH variable: `export PYTHONPATH=$PYTHONPATH:/usr/local/lib/python2.7/site-packages` (you can put this command in the `$HOME/.bashrc` file).

3.  Put a file `local.pth` in `/usr/lib/python2.7/site-packages` or `/usr/lib/python2.7/dist-packages` (depending on the output of the script above), which contains a single line:

    ```
    /usr/local/lib/python2.7/site-packages 
    ```

    This will add this directory to your default path list permanently.

4.  (This one is recommended only for some seldom-used non-standard packages installed in some strange location, which is probably not your case) In the beginning of your script (before `import nltk`) add the following code:

    ```
    import sys
    sys.path.append("/usr/local/lib/python2.7/site-packages") 
    ```

# jquery - error code with html jQuery

> ID：14311603
> 
> 赞同：0
> 
> 时间：2013-01-14T02:23:29.703
> 
> 标签：jquery

> **Possible Duplicate:**
> [Error changing html content with jQuery](https://stackoverflow.com/questions/14311787/error-changing-html-content-with-jquery)

What is wrong here? I want replace ul content with other content.

```
$('#carouselselectitem1').click(function() {
   $('#foo2').html('<li><div id="lines"></div><div id="tittle">2 PROGRAMEO, LONDRES</div><div id="image"></div><div id="text">LOREM IPSUM XHTML+CSS3 HTTP://WWW.url.com/</div></li>');
}); 
```

[http://jsfiddle.net/Txyse/](http://jsfiddle.net/Txyse/)

My solution so far is:

```
$('#foo2').load("content1.html"); 
```

Another solution?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:33:47.553

Use jQuery framework from left panel of the fiddle then try this code:

```
$('#carouselselectitem1').click(function() {
    $('#foo2').html("<li><div id='lines'></div><div id='tittle'>TITTLE2</div><div id='image'></div><div id='text'>TEXT2</div></li>");
}); 
```

# windows - 当两者具有相同的路径/名称时，如何首先执行 .bat 文件而不是文件 .exe？

> ID：14311606
> 
> 赞同：1
> 
> 时间：2013-01-14T02:23:57.037
> 
> 标签：windows, emacs, batch-file, cmd

我的`emacs.bat`其余部分与`emacs.exe`. 此目录包含在 PATH 变量中 (Windows)。

内容`emacs.bat`：

```
@echo off "%~dp0emacsclientw.exe" -na "%~dp0runemacs.exe" "%1" 
```

但是，每当我使用此命令时，`emacs.exe`都会执行而不是 .bat 文件。我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T02:32:54.180

看来您可以将 emacs.bat 放在另一个目录中，然后将该目录放在 PATH 的前面。注意：如果您在包含 emacs.exe 的目录中运行“emacs”，则 .exe 将优先。

*~~编辑：或者，您可以只键入`emacs.bat`而不是`emacs`在命令提示符下。~~*

*编辑 2：如[本答案](https://stackoverflow.com/questions/605101/order-in-which-command-prompt-executes-files-with-the-same-name-a-bat-vs-a-cmd#answer-605139)所示，您可以设置`PATHEXT`环境变量。类似于以下内容：*

`PATHEXT=.BAT;.COM;.EXE;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.RB;.RBW`

# opencv - 了解 openCV 中的模板匹配

> ID：14311608
> 
> 赞同：3
> 
> 时间：2013-01-14T02:24:04.913
> 
> 标签：opencv

只是想消除我的困惑。我已经测试了 openCV 模板匹配方法来匹配一些数字。首先，我有这个数字序列 0 1 2 3 4 5 1 2 3 4 5 （二值化后字符宽度可能不同）。模板匹配如何匹配数字“1”？可以;

1.  滑过所有窗口，直到找到 2 个匹配项（2 个输出），或
2.  在匹配第一个“1”后停止，或
3.  找到两个数字“1”之间的最高相关性，然后选择其中一个。

![匹配数字“1”](../Images/393edf327eba4c3a180b005af7748bbf.png)

编辑：如附件是输出。它只匹配一个数字“1”，而不匹配两个“1”。

[Q] 如何同时检测两个数字“1”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T13:40:21.873

我知道这是一个老问题，但这里有一个答案。

当你做 MatchTemplate 时，它​​会输出一个灰度图像。之后，您需要对其执行 MinMax。然后，您可以检查您要查找的范围内是否有结果。在下面的示例中，使用 EmguCV（C# 中 OpenCV 的包装器），只有当它低于 0.75（您可以根据需要调整此阈值）时，我才会在最佳查找（minValues 数组的索引 0）周围绘制一个矩形。

这是代码：

```
Image<Gray, float> result = new Image<Gray, float>(new System.Drawing.Size(nWidth, nHeight));
result = image.CurrentImage.MatchTemplate(_imageTemplate.CurrentImage, Emgu.CV.CvEnum.TM_TYPE.CV_TM_SQDIFF_NORMED);

double[] minValues;
double[] maxValues;
System.Drawing.Point[] minLocations;
System.Drawing.Point[] maxLocations;

result.MinMax(out minValues, out maxValues, out minLocations, out maxLocations);
if (minValues[0] < 0.75)
{
    Rectangle rect = new Rectangle(new Point(minLocations[0].X, minLocations[0].Y), 
        new Size(_imageTemplate.CurrentImage.Width, _imageTemplate.CurrentImage.Height));
    image.CurrentImage.Draw(rect, new Bgr(0,0,255), 1);
}
else
{
    //Nothing has been found
} 
```

***编辑***

以下是输出示例：

![输出示例](../Images/58680aacac00153352980fe08de5d6b1.png)

# android - 如何使用按钮暂停翻译动画？

> ID：14311609
> 
> 赞同：0
> 
> 时间：2013-01-14T02:24:28.627
> 
> 标签：android

我有一个带有背景音乐的翻译动画，我想用一个按钮暂停它，然后用另一个按钮恢复它（动画和音乐同时），我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T02:47:59.540

你的问题只是两个不同的问题......

*   暂停动画：[https ://stackoverflow.com/a/10028575/832776](https://stackoverflow.com/a/10028575/832776)
*   暂停音乐（取决于方法，但这是假设您正在使用媒体播放器）：[https ://stackoverflow.com/a/7634606/832776](https://stackoverflow.com/a/7634606/832776)

# php - 计算货物/堆叠物品的尺寸

> ID：14311618
> 
> 赞同：3
> 
> 时间：2013-01-14T02:26:52.803
> 
> 标签：php, math, dimensions, shipping

我正在考虑编写一个 PHP 函数，该函数使用一种方便的方法/公式来计算装载物品的包裹/托盘的尺寸。

这是一个包含项目的数组的示例。注意：有些物品被标记为单独包裹发送。有些物品可能不会倾斜。

```
$items = array(
  1 => array(
    'quantity' => 1,
    'weight' = 1,
    'dimensions' => array(80, 50, 50), // Length, Width, Height
    'separate' => true, // If the item should be sent as a separate package 
    'tiltable' => false, // False if the item has a 'this side up' sticker
  ),
  2 => array(
    'quantity' => 3,
    'weight' = 1,
    'dimensions' => array(21, 15, 10),
    'separate' => false,
    'tiltable' => true,
  ),
  3 => array(
    'quantity' => 2,
    'weight' = 1,
    'dimensions' => array(18, 19, 20),
    'separate' => false,
    'tiltable' => true,
  ),
  // ... and so on ...
); 
```

有没有人对此有一点点知识或经验？我不想重新发明轮子。

我想到的功能是这样的：*（可能会出现语法错误）*

```
 function build_packages($items, $max_weight=0, $max_length=0, $max_width=0, $max_height=0) {

    $packages = array();

  // Step through each item
    foreach ($items as $item) {

    // Twist and turn item. Longest side first ([0]=length, [1]=width, [2]=height)
      if (!empty($item['tiltable'])) {
        rsort($item['dimensions'], SORT_NUMERIC);
      } else {
        if ($item['dimensions'][0] < $item['dimensions'][1]) {
          $item['dimensions'] = array($item['dimensions'][1], $item['dimensions'][0], $item['dimensions'][2]);
        }
      }

    // Validate item
      if (!empty($max_weight) && $item['weight'] > $max_weight) return false;
      if (!empty($max_length) && $item[0] > $max_length) return false;
      if (!empty($max_width) && $item[1] > $max_width) return false;
      if (!empty($max_height) && $item[2] > $max_height) return false;

    // Step through quantities
      for ($i=0; $i<$item['quantity']; $i++) {

      // Step through packages
        $package_found = false;
        foreach (array_keys($packages) as $key) {

        // Skip to next package on certain conditions
          if ($packages[$key]['separate']) continue;
          // ...

          // Do some logic
          // ...

        // Modify package
          $package_found = true;
          $packages[$key]['num_items']++;
          $packages[$key]['weight'] += $item['weight'];
          $packages[$key]['dimensions'] = array(0, 0, 0); // <--- Replace with new dimensions

        // Twist and turn package. Longest side first ([0]=length, [1]=width, [2]=height)
          if (!empty($item['tiltable'])) {
            rsort($packages[$key]['dimensions'], SORT_NUMERIC);
          } else {
            if ($packages[$key]['dimensions'][0] < $packages[$key]['dimensions'][1]) {
              $packages[$key]['dimensions'] = array($packages[$key]['dimensions'][1], $packages[$key]['dimensions'][0], $packages[$key]['dimensions'][2]);
            }
          }

          break;
        }

        if ($package_found) continue;

      // Add to a new package
        $packages[] = array(
          'num_items' => 1,
          'weight' => $item['weight'],
          'dimensions' => $item['dimensions'],
          'separate' => $item['separate'],
          'tiltable' => $item['tiltable'],
        );
      }
    }

    return $packages;
  } 
```

愿意帮助一些代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T02:53:20.333

您所追求的是解决[装箱](http://en.wikipedia.org/wiki/Bin_packing_problem)问题。该解决方案是[NP Hard](http://en.wikipedia.org/wiki/NP-hard)，因此您可能希望找到一个“足够好”的解决方案，而不是最佳解决方案。谷歌搜索出现了这个：[一维装箱](http://www.phpclasses.org/package/6522-PHP-Implementation-of-one-dimensional-bin-packing.html)类。我没有看代码，所以我不确定它有多好，但我建议它作为一个至少开始你调查的地方。如果结果证明它足以解决一维问题，也许您可​​以创建一个解决方案，创建多个一维布局并跟踪每行的最大高度，从而知道您是否超过了总包装高度。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-26T18:57:30.030

到目前为止，我找到了这个包[https://github.com/dvdoug/BoxPacker](https://github.com/dvdoug/BoxPacker)和这个服务[https://3dbinpacking.com/可以为你做这件事。](https://3dbinpacking.com/)

# iphone - iOS plist 跨更新保存

> ID：14311619
> 
> 赞同：0
> 
> 时间：2013-01-14T02:26:59.447
> 
> 标签：iphone, ios, xcode, plist

我的应用程序中有一个 plist，它已经在 appstore 中。用户可以在该 plist 中进行保存/更改。它存储在应用程序的 Documents 文件夹中。

如果用户更新到新版本，这个 plist 是否会保留，或者它是否恢复为默认值（应用程序包中发送的内容）？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T04:00:49.890

Documents 中用户更新的 plist 应该是安全的：应用程序包中的数据（例如资源路径）会被覆盖，但用户的 Documents 和 Library 文件夹中的数据不会。这就是为什么您可以更新应用程序并保持您的文档和首选项完好无损的原因。

请注意，使用标准 iOS 调用来获取 Document 文件夹的路径很重要，而不是（例如）对路径进行硬编码。

也可以看看：

[iphone：保留用户数据以防止应用更新](https://stackoverflow.com/questions/4778284/iphone-preserve-user-data-against-app-update)

[版本升级时应用程序数据丢失](https://stackoverflow.com/questions/8459216/app-data-loss-on-version-upgrade)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T04:01:23.023

这取决于您如何编写应用程序...但是如果您的应用程序设置为仅在当前没有 plist 时将 plist 加载到您的包中，则不应覆盖它。

我今天有更新，我的 plist 数据仍然存在......

这是用户第一次启动应用程序时应将 plist 从资源文件夹复制到包中的方式：（*注意，如果用户删除应用程序然后下载更新，则数据将消失）

```
if (![fileManager fileExistsAtPath: path]) {
    NSString *bundle = [[NSBundle mainBundle] pathForResource:@"YourPLIST" ofType:@"plist"];

    [fileManager copyItemAtPath:bundle toPath: path error:&error];
} 
```

# javascript - 检测属性显示从无显示到显示块

> ID：14311622
> 
> 赞同：0
> 
> 时间：2013-01-14T02:27:38.503
> 
> 标签：javascript

我正在尝试检测元素显示属性何时更改。最初，该元素没有显示属性。我想在元素发生变化时发出警报。我已经尝试了以下代码，但没有任何警报。

```
document.getElementById('xxx').addEventListener('DOMAttrModified', function(e){
  if (e.attrName === 'style') {
    if (e.newValue === 'block') {
      alert('test!');
    }
  }
}, false);

setTimeout(function () {
  var xxx = document.getElementById('xxx');
  xxx.style.display = 'block';
  console.log(xxx);
}, 5000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T03:05:04.823

这是一个实际示例，展示了如何使用[突变观察者](https://developer.mozilla.org/en-US/docs/DOM/MutationObserver)。请注意，我使用了以 WebKit 为前缀的 MutationObserver 实现，但您提到您无论如何都在使用 Chrome，因此您至少可以对此进行测试，并在必要时对其进行调整以适应您的需求。

首先，我们创建`MutationObserver`并为其提供回调。此回调将使用 2 个参数调用 - 一个`MutationRecord`实例数组，其次是一个实例`MutationObserver`（负责调用回调的那个）。这在将单个回调附加到多个 MutationObservers 时很有用。请注意，它接收一个 MutationRecords 数组，而不是为每个 MutationRecord 调用一次。这允许将它们捆绑在一起，这是提高性能所必需的。

```
var observer = new WebKitMutationObserver(function(mutations) {
  console.log(mutations);
}); 
```

现在我们创建（一个可选的）配置对象，以指定我们感兴趣的突变类型。在这种情况下，属性的突变。

```
var config = { attributes: true }; 
```

请注意，虽然我们在这里将它定义为一个简单的对象，但这实际上将用作[MutationObserverInit 对象](https://developer.mozilla.org/en-US/docs/DOM/MutationObserver#MutationObserverInit)。

现在，最后，我们告诉观察者观察一个节点：

```
observer.observe(document.getElementById('xxx'), config); 
```

如果您有兴趣，我将您的示例改编为[jsFiddle 演示](http://jsfiddle.net/p5mFM/1/)。

# java - 如何为 gwt MVP 活动和场所项目进行测试？

> ID：14311628
> 
> 赞同：1
> 
> 时间：2013-01-14T02:29:08.567
> 
> 标签：java, gwt, junit, mgwt

有人知道如何对用 mvp、活动和地点编写的 gwt 应用程序进行测试吗？我正在从 xml 文件中读取数据并将它们呈现在单元列表中。我正在使用 gwt 2.5 和 eclipse。如果有人能给我看一个关于 eclipse junit 和 gwt 的好教程，我将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T04:42:13.780

活动和地点是浏览器历史管理的内置框架（不适用于 MVP）。因为您遵循 MVP 模型，您可以利用 MVP 的优势进行无痛 GWT 测试。请参阅[“大规模应用程序开发和 MVP”](https://developers.google.com/web-toolkit/articles/mvp-architecture)文章的[这一](https://developers.google.com/web-toolkit/articles/mvp-architecture#testing)部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T17:17:50.307

在构建单元测试之前，我们通常总是参考 GWT 单元测试。

GWT 源代码是查找 GWT 团队编写的单元测试的地方。

搜索 GWT 代码 - [http://code.google.com/p/google-web-toolkit/source/search?q=Places&origq=Places&btnG=Search+Trunk](http://code.google.com/p/google-web-toolkit/source/search?q=Places&origq=Places&btnG=Search+Trunk)

![在此处输入图像描述](../Images/c600250e1b8946a8f0e955189f57cfa1.png)

# zurb-foundation - 使用 show-for-small 时 Foundation Orbit 子弹不居中

> ID：14311629
> 
> 赞同：0
> 
> 时间：2013-01-14T02:29:16.807
> 
> 标签：zurb-foundation, orbit, bulletedlist

在移动设备上查看时，我想为滑块提供某种导航。由于方向箭头不会在移动设备上显示（如果有人能告诉他们如何制作它们，那就太棒了）我认为一个好的解决方案是使用不同的滑块，相同的图像，即“show-for-small”并且下面有子弹。

它有效，但有一个问题让我很生气。如果您使用浏览器窗口宽度（桌面）加载页面并缩放到移动宽度，滑块会切换，但项目符号不会居中。它们似乎向右移动。如果您以该移动宽度重新加载页面，它们很好，完全位于图像下方。

有没有人知道如何解决这个问题？我设置了一个页面来演示这个问题。www.jonesco.com/_foundation/bullet_problem.html

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-19T22:05:25.507

将以下内容添加到您的样式表中：

```
.orbit-bullets {
    display: table;
    text-align: center; 
} 
```

# c# - 如何为元素设置值？

> ID：14311633
> 
> 赞同：2
> 
> 时间：2013-01-14T02:29:58.150
> 
> 标签：c#, web, automation, watin

我正在学习 Watin，遇到了一段有趣的 html 代码：

```
<label class="age_label years_old" for="total_age">
<b>34</b>
<span class="placeholder">How old are you?</span>
<span class="years_old">years old</span>
<span class="years_young">years young</span>
</label> 
```

我如何达到 34？，我完全迷失了，因为我习惯于按 Id 或 Class 选择输入。但这里不是输入。它只是一个html标签。

我想使用 watin 用另一个数字**SET** /* *REPLACE * 34，但是如何？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:59:16.430

WatiN 没有您所要求的标签值的设置器。不过，它可以很容易地通过 javascript 完成。将 JS 调用与 WatiN .GetJavascriptElementReference 结合以获取 JS 元素使您尝试做的事情变得非常简单。（我确信有一种纯粹的 JS 方法可以做到这一点，但这些天我在 WatiN 中比 JS 更好）正如希望显而易见的那样，找到第一个粗体标签是一种非常非常脆弱的方法，如果有更好的方法可以用于元素定位。

而且，如果您使用这个“setter”操作进行测试 - 这是一种难闻的气味，因为您正在更改用户无法做的事情。

**示例代码**

```
var jsRef = myIE.ElementsWithTag("b")[0].GetJavascriptElementReference();
myIE.Eval(string.Format("{0}.innerHTML = 'fred'", jsRef)); 
```

以上使用 OP 的 HTML 进行了测试，Watin 2.1、IE9、Win7-64 => 按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T02:47:00.090

我想像

```
var result = browserInstance.LabelField(lf => lf.GetAttributeValue("class").Contains("age_label years_old")).Children().First().Text; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T02:51:46.050

如果这是您`<b>`页面上的唯一标签，那么这可能有效：

```
IE.ElementWithTag("b", Find.First()); 
```

祝你好运。

# iis - 如何增加 IIS 响应块大小

> ID：14311634
> 
> 赞同：0
> 
> 时间：2013-01-14T02:30:38.023
> 
> 标签：iis, iis-6, httpmodule

我们正在将我们的 sharepoint 2003 迁移到 espace。尽管用户被告知迁移，一些用户仍在使用旧链接。这可能是因为他们已将旧网址保存在收藏站点中并尝试相同。所以我们想开发 ISAPI dll，用它我们可以捕获 404 File Not found 或“Site not in content DB”错误并将用户重定向到正确的站点。

所以我用 Visual C++ 开发了一个 ISAPI dll。为了重定向用户，我将位置修改为新的 url 并将 HTTP 状态设置为**HTTP 302 Redirect**。但我在这里面临的一个挑战是，IIS 以块的形式发送响应，并且“站点不在内容数据库中”错误文本作为第二块的一部分出现。到第一个带有标题信息的块时，包括状态和位置将被传递，我将无法进一步修改。

**有什么方法可以增加 IIS 响应块的大小吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T06:57:22.330

我试过了 -

`Stsadm.exe ?o setproperty ?pn large?file?chunk?size ?pv <size in bytes>`增加块大小。

有用！！

# c++ - 在函数中填充容器以避免分段错误

> ID：14311637
> 
> 赞同：0
> 
> 时间：2013-01-14T02:31:28.900
> 
> 标签：c++, stl, scope, segmentation-fault

我来自 Java，填充容器不需要思考。我现在使用 c++ 的问题是，用在函数范围中声明的数据填充函数中的容器可能会导致错误，当我想访问它时数据不再存在。我找不到解决该问题的教程，所以我采用 Java 方式，只让容器获取用“new”声明的指针。但现在我被迫返回一个

```
std::list<Vertex<float> > 
```

从一个函数开始，并认为这可能是学习如何填充和返回这样一个东西的好点。这会

```
{
std::list<Vertex<float> > myList;
Vertex<float> v(0.0, 0.1, 0.2);
myList.push_back(v);
myList.push_back(Vertex<float>(1,0, 1.1, 1.2));
return myList;
} 
```

实际上可以作为示例函数体吗？如果是，为什么 v 仍然存在于范围之外？容器中的每次插入是否也意味着复制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T02:34:29.027

这将“正常”工作，因为那里的每个操作都会创建一个副本。

*   `myList.push_back(v);`创建一个副本，`v`这样`v`现在的可见性就无关紧要了。
*   `return myList;`将列表的副本返回给调用函数，因此 myList 的可见性现在无关紧要。调用函数应该复制此列表以将其保留在范围内，否则它将在调用此函数的行的执行结束时被销毁。

引用罚款的原因是副本通常很昂贵。在您的情况下，它们非常小，因此可能无关紧要，并且在许多情况下它们可能会被优化掉，但这仍然是需要牢记的。

**旧的 C++**优化方法是通过引用传递一个列表并使用它来构造您的列表，而不是按值返回。

```
void MakeMeAList(std::list<Vertex<float> >& aList){
    ....
}

std::list<Vertex<float> > aList;
MakeMeAList(aList); 
```

正如@billz 建议的那样，即使没有这样做，[返回值优化也应该优化掉副本。](http://en.wikipedia.org/wiki/Return_value_optimization)

**新 C++ (c++11) -**只要不再使用输入变量，
使用构造列表会比复制更有效。`emplace_back`（感谢@特洛伊）

我的 C++11 很弱，我几乎可以肯定即使按值返回也是可以的，因为 Move 语义会优化它，但我只有 95% 的把握。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T02:59:22.703

添加到 Karthik 的回复中，如果您使用的是实现 r 值引用（C++0x 标准的一部分）的相对较新的编译器，那么您的方法将完美地工作，而不会产生复制操作的负面影响。

查看[http://en.wikipedia.org/wiki/C%2B%2B11#Rvalue_references_and_move_constructors](http://en.wikipedia.org/wiki/C%2B%2B11#Rvalue_references_and_move_constructors) 以获得对 r 值的简要介绍。

请注意，在采用 r 值引用之前，许多编译器通过所谓的返回值优化消除了返回集合所涉及的“昂贵的复制操作”。同样 Wiki 有更多细节： [http ://en.wikipedia.org/wiki/Return_value_optimization](http://en.wikipedia.org/wiki/Return_value_optimization)

Visual Studio 2005（和更新版本）实现了 RVO，我相信 GCC 也有类似的特性。如此有效地，您的代码比使用参数返回值更具可读性，是正确的方法，并且如果您使用最新的编译器，应该可以很好地工作。

# internet-explorer - 为什么 IE 不使用“If-None-Match”请求？

> ID：14311638
> 
> 赞同：1
> 
> 时间：2013-01-14T02:31:31.770
> 
> 标签：internet-explorer, etag

(1)第1步：第一次请求后，Web服务器响应：

```
    HTTP/1.0 200 正常
    日期：2013 年 1 月 14 日星期一 02:20:51 GMT
    服务器：Microsoft-IIS/6.0
    X-Powered-By: ASP.NET
    X-Powered-By: PHP/5.2.8
    缓存控制：max-age=0
    ETag：“LV50F29509”
    内容类型：文本/html；字符集=UTF-8
    X-Frame-选项：拒绝
    X-Lvmi-编码：16544/51562, 33%
    变化：接受编码
    内容编码：gzip
    内容长度：16544
    X-Cache：来自 test.abc.com 的 MISS
    X-Cache-Lookup：来自 test.abc.com:80 的 MISS
    通过：1.0 test.abc.com (squid/3.0.STABLE20)
    连接：保持活动
```

(2)第2步：点击页面中的链接（链接到页面本身），IE请求：

```
    获取 /电影 HTTP/1.1
    接受：*/*
    推荐人：http ://www.test.com/film
    接受语言：zh-cn
    接受编码：gzip，放气
    用户代理：Mozilla/4.0（兼容；MSIE 7.0；Windows NT 5.1；Trident/4.0；EmbeddedWB 14.52 来自：http : //www.bsalsa.com/ EmbeddedWB 14.52；.NET4.0C；.NET4.0E；.NET CLR 1.1.4322；.NET CLR 2.0.50727；.NET CLR 3.0.4506.2152；.NET CLR 3.5.30729）
    主办方：www.test.com
    连接：保持活动
    饼干：CX=1024；CY=712; ID=测试
```

我的问题：为什么 IE(8.0) DO NOT request with "If-None-Match"？</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T08:45:30.227

这是一个相当古老的问题，但我认为指向以下 URL 可能会很有趣：[w3 - HTTP Etags and Friends](http://www.w3.org/1999/04/Editing/#2)

您引用的强 etag 似乎是 HTTP/1.1 功能。问题可能是 IE 是否因为 HTTP/1.0 响应而考虑这一点？！您在此期间解决了您的问题吗？

# c - 如何通过c程序绘制数据？

> ID：14311640
> 
> 赞同：25
> 
> 时间：2013-01-14T02:32:08.970
> 
> 标签：c, graph, plot, gnuplot, simulation

我是一名机械工程师，C 编程知识有限。我写了一些代码来进行模拟，我想可视化模拟结果。目前我正在使用它`Dev-C`来编写我的代码。使用`fopen`和`fprintf`命令我生成一个`.dat`包含结果的文件。然后我打开`GNUPLOT`程序并导入我的`.dat`文件来绘制结果。这需要时间，我必须等到模拟结束。有没有一种简单的方法可以将我的绘图仪与 连接`Dev-C`，以便我的绘图仪在模拟期间开始绘制数据？任何图书馆等？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-14T12:48:43.960

既然您已经知道 gnuplot，那么最简单的做法可能就是从您的程序中调用 gnuplot 并将数据通过管道传递给它：

```
FILE *gnuplot = popen("gnuplot", "w");
fprintf(gnuplot, "plot '-'\n");
for (i = 0; i < count; i++)
    fprintf(gnuplot, "%g %g\n", x[i], y[i]);
fprintf(gnuplot, "e\n");
fflush(gnuplot); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T02:39:50.257

好的，当您写入文件时，一种解决方案是`system()`在您写入文件时拨打电话，然后调用 gnuplot。

但是，这意味着您每次都应该更改文件名，但我担心如果您这样做，它看起来会不正确，因为您每次都发送少量数据。

[http://www.gnu.org/software/libc/manual/html_node/System-Calls.html](http://www.gnu.org/software/libc/manual/html_node/System-Calls.html)

我从未使用过 gnuplot，但如果您查看此页面 ( [http://gnuplot-tricks.blogspot.com/](http://gnuplot-tricks.blogspot.com/) )，您可能会发现一些可以使其正常工作的技巧。

但是，我认为，除非您要自己绘制所有内容并跳过 gnuplot，否则您可能只需要等待，就像您一样。

您可能会发现 gnuplot 的 C 接口可以帮助您：

[http://ndevilla.free.fr/gnuplot/](http://ndevilla.free.fr/gnuplot/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-14T05:05:36.520

我一直在使用[PLPlot](http://plplot.sourceforge.net/ "PL绘图")从 C 中绘图，发现它既有效又简单。它是跨平台的、开源的，并支持丰富的绘图功能。我建议您查看示例以开始使用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-05-06T09:59:11.280

pbPlots 非常易于使用并且适用于所有 C 编译器。

[从github 页面](https://github.com/InductiveComputerScience/pbPlots/tree/v0.1.7.1)下载 pbPlots.c/h 和 supportLib.c/h并将它们包含在您的构建中。

这是一个完整的示例，它将在 PNG 文件中生成绘图。

```
#include "pbPlots.h"
#include "supportLib.h"

int main(){

    double x [] = {-1, 0, 1, 2, 3, 4, 5, 6};
    double y [] = {-5, -4, -3, -2, 1, 0, 1, 2};

    RGBABitmapImageReference *imageRef = CreateRGBABitmapImageReference();

    DrawScatterPlot(imageRef, 600, 400, x, 8, y, 8);

    size_t length;
    double *pngData = ConvertToPNG(&length, imageRef->image);
    WriteToFile(pngData, length, "plot.png");

    return 0;
 } 
```

[![生成的图](../Images/7d2c6e85586e966ce6d3defc70d852ff.png)](https://i.stack.imgur.com/ofLDh.png)

还有更多可用的选项，这些在 github 页面上进行了描述。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T02:47:19.493

我环顾四周，看看其他人在 gnuplot 中的实时绘图方面做了什么，发现了这个：

[http://users.softlab.ntua.gr/~ttsiod/gnuplotStreaming.html](http://users.softlab.ntua.gr/~ttsiod/gnuplotStreaming.html)

有一个小的 Perl 脚本可以驱动绘图，您只需将信息输入管道即可。

由于您的数据正在写入文件，您可能希望将其传输`tail -f yourdata.dat`到实时绘图仪中。

此外，因为您正在使用 stdio 文件调用，所以您需要定期刷新（通过调用`fflush`）

显然，您的模拟将在后台或另一个 shell 中运行。这样您就可以随时退出绘图而不会中断模拟。

希望这对你有一些用处。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-06T20:23:03.210

有一个广泛的图书馆，称为 DISLIN 用于科学目的。甚至在 Fortran 语言中也可用。

您可以在官方网站上查看示例。

您可以在[DISLIN 主页免费获取](https://www.mps.mpg.de/dislin)

# php - 如何将 GET 变量添加到当前 URL？

> ID：14311643
> 
> 赞同：1
> 
> 时间：2013-01-14T02:33:12.503
> 
> 标签：php, variables, search, get

我有一个问题，我想做一些搜索页面，它需要一个 get 变量来对结果进行排序。因此，如果有人在没有该 GET 变量的情况下进入页面，请重新加载页面并使其显示，例如您输入 www.myweb.com/search 并自动重新加载并更改为 www.myweb.com/search/?sort=ascending（因为该变量是必要的）。

希望你能理解我，再见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T02:41:24.180

我认为这将适用于您想要做的事情：

```
if (empty($_GET['sort'])) {
    header('Location: ' . $_SERVER['REQUEST_URI'] . '?sort=ascending');
    exit();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T02:44:36.823

在`www.myweb.com/search`请求时执行的文件中，当 $_GET['sort'] 不可用时，您应该有一个默认设置。对于这个答案，我将使用 PHP 作为我的示例，因为您没有指定。

```
<?php
if (empty($_GET['sort'])) {
    $sort = 'ascending';
}
// the rest of your code 
```

或者，您*可以*强制重定向，但前面的示例更优雅。

```
<?php
if (empty($_GET['sort'])) {
    header('Location: www.myweb.com/search/?sort=ascending');
    exit;
} 
```

请记住，第二个解决方案会丢弃其他任何东西，即其他 $_GET，例如`item=widget`或`color=blue`

*请注意其他人`!isset`作为答案发布。这是行不通的！*例子：

```
www.myweb.com/search/?sort=&foo=bar 
```

`!isset($_GET['sort'])`=== 假的！

`empty($_GET['sort'])`是在这种情况下采取的正确途径。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-14T02:44:03.933

最好自己定义变量而不是重定向。只需检查变量是否已定义。它尚未定义，您可以自己设置如下。

```
if(!isset($_GET['sort']))
{
$_GET['sort']='ascending";
} 
```

# java - “规范化” BigDecimal 的哈希码：howto？

> ID：14311644
> 
> 赞同：18
> 
> 时间：2013-01-14T02:33:22.650
> 
> 标签：java, guava, hashcode, bigdecimal

我有一个用 Java 编写的 JSON Schema 实现，它依赖于[Jackson](http://jackson.codehaus.org)（版本 2.1.x）。出于准确性的原因，我告诉杰克逊使用`BigDecimal`浮点数。

对于 JSON Schema 的需求，有一个特殊的需求：JSON 值相等，对于数值，是通过它们的数学值相等来定义的。我需要这种检查，例如，这不是一个合法的模式（an 中的值`enum`应该是唯一的）：

```
{ "enum": [ 1, 1.0 ] } 
```

但是 JsonNodes for `1`and`1.0`是不相等的。因此，我编写了 Guava's [Equivalence](https://google.github.io/guava/releases/23.0/api/docs/com/google/common/base/Equivalence.html)的实现，并`Set<Equivalence.Wrapper<JsonNode>>`在适当的地方使用。而且这个实现应该适用于所有类型的节点，而不仅仅是数字节点。

这个实现中最困难的部分是`doHash()`数字节点：/我需要*相同的哈希码来获得等效的数学值*，无论它们是整数还是浮点数。

目前我能想到的最好的办法是：

```
@Override
protected int doHash(final JsonNode t)
{
    /*
     * If this is a numeric node, we want a unique hashcode for all possible
     * number nodes.
     */
    if (t.isNumber()) {
        final BigDecimal decimal = t.decimalValue();
        try {
            return decimal.toBigIntegerExact().hashCode();
        } catch (ArithmeticException ignored) {
            return decimal.stripTrailingZeros().hashCode();
        }
    }

    // etc etc -- the rest works fine 
```

目前，这是我能想到的最好的。

有没有更好的方法来计算这样的哈希码？

（编辑：*[此处](https://github.com/fge/json-schema-validator/blob/master/src/main/java/org/eel/kitchen/jsonschema/util/jackson/JsonNodeEquivalence.java)**等效实现的完整代码*）

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-14T04:19:54.013

转换为 Double 并使用 Double 的 hashCode，但基于 BigDecimal compareTo 顺序的相等性。

两个数值等效的 BigDecimal 将映射到相同的 Double，并获得相同的 hashCode。由于双舍入，一些略有不同的 BigDecimal 值将获得相同的哈希码，但大多数不同的值将获得不同的哈希码，这就是您所需要的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2021-01-10T20:43:47.920

使用`BigDecimal::stripTrailingZeros()`方法，它为表示相同数学数字`BigDecimal`的两个不同`BigDecimal`对象返回相同的对象，即它们具有不同数量的无意义数字，例如`3.50`（比例为二）和`3.5`（比例为一）：

```
return decimal.stripTrailingZeros().hashCode(); 
```

# matlab - 使用 Pascal 套件训练新模型

> ID：14311647
> 
> 赞同：0
> 
> 时间：2013-01-14T02:33:38.487
> 
> 标签：matlab, computer-vision, pascal, object-detection

在这方面需要一些帮助。

目前我正在做一个计算机视觉项目，需要我训练一个新模型来检测某个物体。

在这种情况下，我使用 P. Felzenszwalb、D. McAllester、D. Ramaman 和他的团队提供的系统 => 在 Matlab 中实现的判别训练可变形零件模型。

项目网页：[http](http://www.cs.uchicago.edu/~pff/latent/) ://www.cs.uchicago.edu/~pff/latent/ 。

但是，我不知道如何引导系统使用与 PASCAL 数据集不同的数据集（图像和注释的集合）来训练新模型。

通过指导，我的意思是一行代码，允许我更改系统读取的数据集，以训练模型。

例如

用于缓存模型、中间数据和结果的 % 目录

cachedir = ['/var/tmp/rbg/YOURPATH/'VOCyear'/'];

我尝试查看他们的自述文件和文档指南，但他们没有提及。如果我错了，请纠正我。

如果我的问题还不够清楚，请告诉我。

我尝试查看一些文件，例如 global.m 但不行。

非常感谢您的帮助，并在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T14:07:49.417

有很多部分需要调整才能实现这一目标。例如，必须调整 voc_config 才能从您的文件中读取。

与 pascal_train.m 函数相同。根据图像和解析它们的方式，这可能需要相当长的时间来适应此功能。

其他需要考虑的功能：

*   imreadx
*   帕斯卡测试
*   帕斯卡尔瓦尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:34:32.123

您可以尝试阅读 DPM 包（voc-release5）中的 pascal.m，在 VOC2007/2010 数据集上有类似的代码。

# ios - 可达性检测网络状态，我要删除地址

> ID：14311651
> 
> 赞同：-2
> 
> 时间：2013-01-14T02:34:28.870
> 
> 标签：ios, reachability

如果 google.com 不起作用！但是网络还可以。代码会带来错误。所以我想删除“google.com”来检测 net 的状态。

我找不到没有地址的可达性方法。

```
#import "Reachability.h"

static  ReachabilityCenter *reachCenter;
@implementation ReachabilityCenter

@synthesize reachablity;
@synthesize isConnectedNet;

+(id)shareCenter
{
    if(!reachCenter)
    {
         reachCenter = [[ReachabilityCenter alloc] init];
         reachCenter.reachablity = [Reachability reachabilityWithHostname:@"www.google.com"];
    }
    return reachCenter;
}

-(void)reachabilityChanged:(NSNotification*)note
{
    Reachability * reach = [note object];
    isConnectedNet = [reach isReachable];
}

-(void)beginListening
{
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(reachabilityChanged:)
                                                 name:kReachabilityChangedNotification
                                               object:nil];

    [reachCenter.reachablity  startNotifier];

}
@end 
```

我测试代码检测没有网站，ip 的状态。

```
-(void)detectNetStatus
{
    Reachability *r =  [Reachability reachabilityForLocalWiFi];
    isConnectedNet = [r currentReachabilityStatus];
}

-(NetworkStatus)isConnectedNet
{
    [self detectNetStatus];
    return isConnectedNet;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T03:21:17.450

您要问的实际上是不可能的，原因如下：您无法在不使用网络连接的情况下“肯定”（以您想要的方式）验证网络连接是否处于活动状态。为了使用它，您必须将它用于意味着与预期资源 X、Y 或 Z 的连接。

例如，考虑一下：如果您连接到没有外部 Internet 访问权限的本地网络怎么办？看起来连接是可用的，实际上它确实 - 这不是你的想法。

因此，您必须针对 X、Y 或 Z 进行测试，以验证您想要访问的内容是否可用。

添加信息：

您可以确定网络连接是否可用：

寻找：可达性* internetReach；

在 Apple 的示例中：http: [//developer.apple.com/library/ios/#samplecode/Reachability/Listings/Classes_ReachabilityAppDelegate_h.html#//apple_ref/doc/uid/DTS40007324-Classes_ReachabilityAppDelegate_h-DontLinkElementID_3](http://developer.apple.com/library/ios/#samplecode/Reachability/Listings/Classes_ReachabilityAppDelegate_h.html#//apple_ref/doc/uid/DTS40007324-Classes_ReachabilityAppDelegate_h-DontLinkElementID_3)

The problem is --- just because a network connection is available, and the above internetReach will --- it doesn't tell you anything about the connection. It could just be a local network. You can't find out until you try to connect something specific you expect to be available like, say, Apple.com or Google.com

# ios - 将远程数据与本地对象映射/解耦

> ID：14311654
> 
> 赞同：2
> 
> 时间：2013-01-14T02:34:41.177
> 
> 标签：ios, oop, networking

应用程序从服务器提取数据（通常是 JSON 字符串）是相当常见的场景。然后将这些数据解析并转换为原生类，如 NSString、NSArray、NSDictionary 等。

然而，大多数时候，我们希望使用自定义模型来表示这些远程数据。

例如，如果我们要提取一个 JSON 数组的博客文章，我们希望将它们映射到 BlogPost 模型对象中，例如：

```
// BlogPost.h
@interface BlogPost: NSObject
@property NSString *title;
@property NSString *body;
@property NSDate *dateCreated;
@property NSArray *comments;
@end 
```

您将“JSON”模型与本机模型解耦的方法是什么？

我经常发现自己在模型本身中编写了一个自定义初始化程序，它接受一个字典（通常来自 JSON 提要）。

例如：

```
// BlogPost.h
+ (BlogPost *)blogPostWithJSON:(NSDictionary *)jsonDictionary; 
```

然后我必须跟踪服务器上使用的密钥并将它们映射到我的属性。

这样做我总是觉得有点不安，因为应用程序中的模型不应该真的知道服务器上使用了哪些密钥。

我应该将这个 JSON 到对象的映射移到另一个类中吗？也许是工厂？或者我的网络管理员应该直接创建现成的对象并将其返回给我吗？

也许是这样的：

```
// NetworkManager.h
- (void)getBlogPostWithCompletion:(void (^)(BlogPost *blogPost))completionBlock; 
```

（当然，我在这里省略了很多细节，比如要获取哪篇博文，但这只是为了展示一种方法）。

还有其他方法吗？如何将服务器数据与本地模型分离？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:29:10.027

我已经多次遇到这个问题，并且得到了与您几乎相同的问题。最后，我发现对我有用的是：

*   创建原始模型的 OO 表示。在您的情况下，这意味着将 JSON 数组解码为它用作底层模型（字典？）的任何内容。根据您使用的服务的建模方式，您最终可能会得到一些“记录类”（即没有行为的类）。我通常更喜欢使用这些类型的类而不是数组或字典，因为随着软件的发展，这允许在需要时向它们添加行为。另一方面，如果您使用数组或字典，则不能这样做。
*   一旦你有了一个低级的 OO 模型，就可以创建一个 OO 域模型。在这个新模型中，您可以根据您的领域需要设计事物，而不是依赖于服务提供商的模型。很多时候，您会发现您的域类和提供者的类之间存在一对一的映射，但这不是强制性的。这里的重点是您应该抽象您的领域并按照您认为正确的方式进行设计。

这两个模型之间的映射可以根据其复杂性以不同的方式完成。我通常喜欢选择这三种方法中的一种并坚持下去，以便在项目中采用同质的方法：

1.  `(class)HighLevelObject>>from(aLowLevelObject)`在你的领域模型中编写一个类方法。这需要一个低级对象并自行配置。您对所有具有低级对应物的高级对象执行此操作。
2.  与前一个相反：`LowLevelObject>>createHighLevelObject()`在创建域模型实例的低级对象中编写一个实例方法。在这里，您将创建新对象的责任转移到较低层。
3.  创建一个负责整个创建过程的[工厂](http://www.oodesign.com/factory-pattern.html)或[构建器](http://www.oodesign.com/builder-pattern.html)（取决于模型的复杂性）。

如果您有简单的模型，它们之间有许多 1 对 1 映射，我会选择选项 1 或 2。选择哪一个很大程度上取决于您的口味；选项 1) 的优点是对象知道如何构建自己，但将转换过程的负担放在域模型中。第二种方法留下了一个“更干净”的域模型，但会迫使下层了解上层的细节，并且可能会迫使您打破封装。我不认为这里有灵丹妙药；恕我直言，您应该选择最适合您的需求和编程品味的方法。

高温高压

# jquery - 使用 AJAX 插入后在 Select2 中设置数据

> ID：14311657
> 
> 赞同：12
> 
> 时间：2013-01-14T02:35:25.983
> 
> 标签：jquery, ajax, jquery-select2

我正在使用带有 AJAX 的 Select2（下面的代码）：

```
$(".select2-ajax").select2({
        placeholder: "Search user",
        minimumInputLength: 1,
        ajax: {
            url: $('#url-search-client').val(),
            dataType: 'json',
            type: 'post',
            data: function (term, page) {
            return {
                filter: term
            };
            },
            results: function (data, page) {
            return {results: data};
            }
        },
        width : '50%',
        formatInputTooShort: function () {return 'Informe mais caracteres'; },
        formatResult: formatResultSelectAjax, // omitted for brevity, see the source of this page
        formatSelection: formatSelectAjaxValue, // omitted for brevity, see the source of this page
        dropdownCssClass: "bigdrop" // apply css that makes the dropdown taller
    }); 
```

好吧，如果没有找到客户端，用户可以使用一个按钮打开一个模态并添加新客户端，可以使用新客户端的返回（带有 id 和名称的 json）并将数据（如名称）放入 select2被选中？

```
$('.btn-form-client').click(function() {
        $.ajax({
            url: $('#frm-client').attr('action'),
            dataType: 'json',
            type: 'post',
            data: $('#frm-client').serialize()
        }).done(function (data) {
            $('#modal-client').modal('hide')
        });
        return false;
    }); 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2016-04-14T01:40:25.883

从 v4.x 开始，select2 不再使用隐藏`input`字段。相反，您[创建一个新的`Option`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLOptionElement/Option)并将其附加到您的`select`元素：

```
var newOption = new Option(data.name, data.id, true, true);
$(".select2-ajax").append(newOption).trigger('change'); 
```

`true`参数的组合`trigger('change')`将确保`<option>`在添加后自动选择您的新参数。

有关完整的工作示例，请参阅我的[codepen](http://codepen.io/alexweissman/pen/zremOV)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-07T18:11:12.493

我设法使它工作。在 jQuery 中发布后，我得到一个带有新数据的 JSON 并设置隐藏输入和选择（'.select2-ajax'）

```
$('#client=id').val(data.id);
$('#modal-solicitante').modal('hide'); //This is my
$(".select2-ajax").select2('data', {id: data.id, name: data.name, email: data.email}); 
```

# .htaccess - Htaccess 重写 url（缩短 url）

> ID：14311660
> 
> 赞同：0
> 
> 时间：2013-01-14T02:36:33.373
> 
> 标签：.htaccess

所以我有网址：myurl.com/projects/url/visit.php?link=fbehe 我想重写它：

myurl.com/u/fbehe

但它不起作用。到目前为止，我正在使用它：

```
RewriteEngine On
RewriteRule ^/u/([^/]*)$ visit.php?link=$1 [L] 
```

我还想指出，我将 htaccess 文件放在我的 visit.php 文件所在的目录中。所以 myurl.com/projects/url/.htaccess

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T02:47:05.717

你可以试试这个：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI}  ^/u/([^/]+)/?$    [NC]
RewriteRule .*       projects/url/visit.php?link=%1 [L] 
```

静默地图

`http://myurl.com/u/anyvalue`带或不带斜杠

到

`http://myurl.com/projects/url/visit.php?link=anyvalue`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T02:45:19.957

也尝试使用 NC。另外，不确定绝对路径是否有效。如果 .htaccess 在您网站的根目录中，请尝试使用亲戚。

```
RewriteRule ^/u/([^/]*)$ visit.php?link=$1 [L,NC] 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-14T02:40:14.520

你使用这个框架吗？也许你能有像路线这样的功能。可以重写你的网址..

像Codeigniter，蛋糕

他们有路线来改变这样的网址。

# php - PHP中有动态扩展类的选项吗？

> ID：14311662
> 
> 赞同：3
> 
> 时间：2013-01-14T02:36:49.620
> 
> 标签：php, class, inheritance, dynamic

我的意思是动态更改派生类的基类。例如有两个类`B1`和`B2`。当我使用参数运行 php 脚本时，该脚本中定义`class=b1`的类（比如）应该扩展else 如果参数是它应该扩展。`class D``class B1``class=b2``B2`

期待这样的事情

```
class B1{
    // some codes 
}

class B2{
    // some codes 
}

switch($_GET['class']){
   case 'b1': $baseclass = "B1"; break;
   case 'b2': $baseclass = "B2"; break;
}

class D extends $baseclass{
    // some codes 
} 
```

PHP中有这样的选项吗？如果有任何选项可用，请建议我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T02:58:48.290

我找到了解决我的问题的方法。伙计们请验证这是否是正确的方法。

现在我将 B1 和 B2 存储在两个单独的文件中，但类名相同并且需要动态所需的文件。

```
b1.php
class B{
    // some codes 
}

b2.php
class B{
    // some codes 
} 
```

现在像这样扩展 D

```
$baseclass = $_GET['class'];

require_once($baseclass.'.php');

class D extends B{
    // some codes 
} 
```

这个对我有用。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T03:00:56.980

我不建议动态扩展类。虽然它可能是一个非常糟糕的设计，会产生许多不需要的副作用。至少告诉一个人：您将如何为该类生成 API 文档？（知道这是最小的问题）

借助评论中的附加信息：您想构建可以与不同数据库一起使用的 ORM 之类的东西，我首先考虑的是 PDO。它允许使用相同的界面访问大量数据库。

如果您出于某种原因需要非 PDO 解决方案，您可以进行如下设计：

```
<?php

class DatabaseStorage {

    /**
     * @var DB_Mysql|DB_SQLite|DB_Postgres ...
     */
    protected $database;

    /**
     * @param DB_Mysql|DB_SQLite|DB_Postgres ... The inner database to be used
     */
    public function __construct($database) {
        $this->database = $database;
    }

    /**
     *  Connect to the database
     */
    public function connect($host, $user, $password) {
        $this->database->connect($host, $user, $password);
    }

    /**
     * Query the database
     */
    public function query($query) {
        return $this->database->query($query);
    }

    // other methods may follow
} 
```

然后像这样使用类：

```
$databaseType =$_GET['databaseType'];

// you should check the value before using it!!
/*if(!is_valid_database_type($databaseType)) {
    die('BAD input');
}*/

$databaseClass = 'Database' . $databaseType;
$database = new $databaseClass();

// use $database as argument to the storage constructor
$storage = new DatabaseStorage($database); 
```

然而，这只是一个例子。您会找到其他方法来防止动态代码生成，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T14:51:40.760

用php语言永远不可能。

# javascript - Script Code Syntax ...html 里面的注释？

> ID：14311665
> 
> 赞同：0
> 
> 时间：2013-01-14T02:37:14.517
> 
> 标签：javascript, syntax

> **可能重复：**
> [javascript 块中的 HTML 注释？](https://stackoverflow.com/questions/5780047/html-comments-in-a-javascript-block)

您好，我正在从评论和其他内容中清理网页。

我刚发现这个`<!--`，但我不明白为什么要从`<!-- and close with -->`

我用它来评论 html 上的某些内容.. 但是在这里？？看它

```
<script type="text/javascript"><!--
$("ul.menubbcl").superfish({        
    animation: {height:'show'},   // slide-down effect without fade-in 
    delay:     1000,           // 1.0 second delay on mouseout
    autoArrows : true 
}); 
//--></script> 
```

有人可以解释一下吗。请

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T02:40:14.350

这适用于不支持 Javascript 的浏览器。在它周围提供 HTML 注释标签将防止它在此类浏览器中呈现为文本。

# javascript - 在页面加载时立即停止 cookie 设置

> ID：14311666
> 
> 赞同：0
> 
> 时间：2013-01-14T02:37:25.017
> 
> 标签：javascript, jquery, cookies

某些 JS 存在问题，其中在页面加载后立即设置 cookie，而只有在我单击关闭框时才应该设置。

任何帮助，将不胜感激。下面的代码：

```
<!doctype html>
<html lang="en">
<head>
    <title></title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script type="text/javascript" src="http://resources.site.co.nz/scripts/jquerycookie.js"></script>
    <script type="text/javascript">
    $(function() {
        $('a.close').click(function() {
            $(this).parent().fadeOut(1500);
            $.cookie('hidden', 'true', { expires: null});
            alert($.cookie('hidden'));
            return false;
        });
        if($.cookie('hidden','true')){
            $('#errororganinfoinchide-this').hide();
        }
    });
    </script>
</head>
<body>
    <div id='boxes'>
        <aside class='warning' id='errororganinfoinchide-this'>
            <a href='#errororganinfoinchide-this' class='close'><img src='http://resources.site.co.nz/backgrounds/close.png' /></a>
            <img src='http://resources.site.co.nz/backgrounds/icon_warning.png' class='messageimg' />
            <h4>Warning - Organisation Info</h4>
            <p>Sorry, there was an error opening the "Organisation Info" Box. Please try again later.</p>
        </aside>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T02:42:02.600

“ `if($.cookie('hidden','true')){`”行不是设置cookie而不是读取它吗？

它可能应该是这样的......

`if($.cookie('hidden') == 'true'){`

# ruby-on-rails - Rails 中的子域安全性

> ID：14311671
> 
> 赞同：2
> 
> 时间：2013-01-14T02:38:23.407
> 
> 标签：ruby-on-rails, proxy, security

假设我正在尝试创建一个名为 Blue 的应用程序。Blue 是一个 Ruby on Rails 应用程序，可以将任何网站的背景变成蓝色。它还允许用户登录并跟踪他们访问过并变成蓝色的网站。

为了将网站的背景网站变为蓝色，我创建了一个插入`<link HREF="http://www.example.com/blue.css" type="text/css">`响应正文的网络代理。[代理被实现为机架应用程序，并使用Rails 3 Railscast 中](http://railscasts.com/episodes/222-rack-in-rails-3?view=asciicast)的 Rack 方法放置在 Rails 路由中：

```
root :to => BlueProxy, :constraints => { :subdomain => "proxy" } 
```

我非常担心这种方法的安全性。我知道默认情况下，我的应用程序中 cookie 的域是`.example.com`. 如果用户输入了恶意 URL，网站可能会操纵用户的帐户。我可以通过只允许`www`应用程序中的 cookie 的子域来解决这个问题。但是，我还希望代理能够为代理站点存储 cookie。

这是我的三个问题：

1.  这是一个不好的方法吗？有没有更好的方法来解决这个问题？
2.  在 Rails 中保持兄弟子域 cookie 分开的最佳方法是什么？
3.  还有其他我遗漏的安全问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:52:18.207

这种方法很危险，出于以下几个原因，我提醒您不要运行代理：

1.  它引发了一系列法律问题，从访问非法内容的人到为您自己的利益托管内容（并对其进行修改）。
2.  如果该网站受欢迎，您的带宽（和托管费用）将会爆炸式增长。
3.  在 iframe 中加载内容存在 ux 问题，例如浏览器后退按钮的性能不如用户想要的那样。
4.  运行代理会为您的站点打开更多攻击媒介（例如，向通过您的站点代理的恶意站点发送永久链接），您必须从安全角度考虑这些攻击媒介。

不要在你的后端运行一个开放的代理（好吧，也许它不是完全开放的，但是有人注册有多难？），考虑在前端使用浏览器扩展或greasemonkey脚本来获取它的集合您的 rails 应用程序中的规则，然后在客户端添加样式表更改。

# xna - AABB 碰撞解决方案

> ID：14311673
> 
> 赞同：0
> 
> 时间：2013-01-14T02:38:53.500
> 
> 标签：xna, collision-detection

我一直在阅读有关 AABB 碰撞的信息。我目前有一个相当粗略的实现。我现在能够检测到两个矩形何时在 X 轴和 Y 轴上相交。

要计算 X 上的相交深度，我基本上是这样做的：

```
overlapX = (Game1.p[0].boundingBox.halfWidth + Game1.p[1].boundingBox.halfWidth)
- (Math.Abs(Game1.p[0].boundingBox.center.X  - Game1.p[1].boundingBox.center.X)); 
```

现在我只是在 X 上测试深度，因为我想看看问题出在哪里。我没有考虑左或右的方向。我只是假设 p[0] 对象在 p[1] 的左侧发生碰撞。

然后进行实际的运动和碰撞检测：

```
 public void Move(float x, float y)
 {
     Position.X += x;
     Position.Y += y;

     overlapX = (Game1.p[0].boundingBox.halfWidth
              +  Game1.p[1].boundingBox.halfWidth)
              - (Math.Abs(Game1.p[0].boundingBox.center.X
              - Game1.p[1].boundingBox.center.X));

     overlapY = (Game1.p[0].boundingBox.halfHeight
              +  Game1.p[1].boundingBox.halfHeight)
              - (Game1.p[1].boundingBox.center.Y
              -  Game1.p[0].boundingBox.center.Y);

     if (Collision.testAABBAABBX(
           Game1.p[0].boundingBox, Game1.p[1].boundingBox) &&
         Collision.testAABBAABBY(
           Game1.p[0].boundingBox, Game1.p[1].boundingBox))
     {
         if (overlapX < overlapY) Position.X -= overlapX;
     }
 } 
```

现在，当我与 碰撞时`p[1]`，`overlapX`显示为 1。所以`position.X`应该`-= 1`。然而，问题就从这里开始了。这是重叠期间的图像。您可以看到确实存在由垂直黄线显示的重叠：

[![重叠](../Images/9486b4a6d8faf9d9de04e599e8fb2067.png)](https://i.stack.imgur.com/JyNvZ.png)

所以我的问题是，当我指示`position.X`按重叠值向后移动时，它不会，至少在我向上或向下移动矩形之前不会。如果我这样做，它会神奇地自我纠正：

[![无重叠](../Images/37848d9cfc03fa271980895520fd0809.png)](https://i.stack.imgur.com/UPLZZ.png)

关于发生了什么的任何线索？也许它就在我面前而我没有看到它，但反应似乎只在下一个动作之后触发。

如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T03:53:06.863

发生这种情况是因为您的碰撞解决代码被放置在您的运动代码中，除非您采取行动，否则它似乎不会运行。

解决方案是将您的冲突解决代码移到您的`Move`方法之外的一个单独的方法中，该方法由`Update`每一帧调用。

# javascript - 为 sessionStorage JavaScript 设置随机值

> ID：14311674
> 
> 赞同：1
> 
> 时间：2013-01-14T02:38:55.680
> 
> 标签：javascript

我想要做的是为`sessionStorage`对象中的不同颜色生成一个随机值，并在会话期间保持相同（直到窗口关闭）。到目前为止，这是我的代码：

```
var colorsArray = ["string", "myString", "something"];
var randomNumber = Math.floor(Math.random() * colorsArray.length);
var color = colorsArray[randomNumber];

if(typeof(Storage) !== "undefined") {
    sessionStorage.color = color;
} else {
    console.log("Session storage is not supported");
}

console.log(sessionStorage.color); 
```

因此，这可以将随机值保存到`sessionStorage`对象中，但每次都会生成一个新值。我想要做的是在加载时随机设置一个值并在会话期间保存该值。当浏览器关闭时，它会重置。

我的问题是，如何`sessionStorage`在会话期间将随机生成的值保存到对象中并在浏览器关闭时将其重置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T02:58:18.980

这段代码只有一个问题：

每次运行页面时，您都会重新设置保存在 sessionStoreage 中的颜色。

你需要这样的一行：

```
if (sessionStorage.color==null)
  sessionStorage.color = color; 
```

# javascript - 打字稿声明文件包含没有成员实现的类定义

> ID：14311675
> 
> 赞同：2
> 
> 时间：2013-01-14T02:39:02.230
> 
> 标签：javascript, typescript

当我查看 Backbone 声明文件时，我看到：

```
export class Router extends Events {
    ...
    constructor (options?: RouterOptions);
    initialize (options?: RouterOptions);
    ...
} 
```

以及类具有没有实现的方法定义的其他地方。我认为这种语法是为接口保留的。编译器允许它在声明文件中传递，而不是在我自己的 ts 文件中。

*.d.ts*与*.ts*扩展名的编译规则有区别吗？如果是这样，这些类型的类应该如何与接口不同地使用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-14T17:41:36.607

`.d.ts`文件用于描述某个类的*现有*JavaScript 或 TypeScript 实现。

a 中的类`.d.ts`（我将其称为“ `declare class`”，因为它们是等价的）与虚拟类或接口完全不同。当您声明 a`declare class`时，您是在说“还有其他一些具有这种形状的类”。当您`extend`使用该类时，编译器将假设在运行时确实存在一个具有该名称的类（或足够类类的东西）以用作原型链中的下一个指针，从而发出代码。

举个例子，这段代码（本身）**不起作用**——你会得到一个运行时错误，因为`Foo`没有在任何地方定义：

```
declare class Foo {  public bar(): void; }
class FooDerived extends Foo { } 
```

另一方面，这段代码很好：

```
interface Foo { bar(): void; }
class FooImpl implements Foo { public bar() {} } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T09:28:28.413

如果文件有`.d.ts`扩展名，则所有类都被视为前面有`declare`关键字。声明不需要实现，它们只提供类型信息。

# mysql - MySQL 查询使用 REGEXP 查找重复项以匹配前 7 个字符

> ID：14311676
> 
> 赞同：0
> 
> 时间：2013-01-14T02:39:03.437
> 
> 标签：mysql, regex

```
SELECT nl.legal_name, nl.city, c.description 'Country', it.lei, sec.sym
FROM name_loc             nl
INNER JOIN ident_tbl_tmp  it ON nl.fk_ident_id = it.id 
INNER JOIN sym_exch_cnty sec ON it.fk_sec_id   = sec.id
INNER JOIN countries       c ON nl.fk_cnty_id  = c.id
WHERE legal_name REGEXP '^For'
limit 100; 
```

使用上述查询将返回 500+ 行数据。部分输出是：

输出：

```
+------------------------------------------+--------------+----------------+----------------------+--------------+
| legal_name                               | city         | Country        | lei                  | sym          |
+------------------------------------------+--------------+----------------+----------------------+--------------+
| FOREFRONT GROUP LTD HKD0.01(SUB          | PENDING      | HONG KONG      | NA                   | 2903.HK      |
| FOREFRONT HOLDINGS                       | PENDING      | UNITED STATES  | NA                   | FFHN         |
| FOREIGN & COL INV TR                     | PENDING      | UNITED STATES  | NA                   | FLIVF        |
| Foreign & Colonial Investment Trust      | PENDING      | NEW ZEALAND    | NA                   | FCT.NZ       |
| Foreign & Colonial Investment Trust      | PENDING      | UNITED KINGDOM | NA                   | FRCL.L       |
| Foreign & Colonial Investment Trust PLC  | London       | UNITED KINGDOM | 8VHDVYVI7W11JH2PAC61 | NA           |
| Foreland                                 | PENDING      | SINGAPORE      | NA                   | E1:B0I.SI    |
| Foreland                                 | PENDING      | SINGAPORE      | NA                   | E2:B0I.SI    | 
```

我需要一个查询，当前“n”个字符匹配并且国家/地区相同时，该查询将返回结果。

这将是匹配前 7 个字符的正确结果：

```
+------------------------------------------+--------------+----------------+----------------------+--------------+
| legal_name                               | city         | Country        | lei                  | sym          |
+------------------------------------------+--------------+----------------+----------------------+--------------+
| Foreign & Colonial Investment Trust      | PENDING      | UNITED KINGDOM | NA                   | FRCL.L       |
| Foreign & Colonial Investment Trust PLC  | London       | UNITED KINGDOM | 8VHDVYVI7W11JH2PAC61 | NA           |
| Foreland                                 | PENDING      | SINGAPORE      | NA                   | E1:B0I.SI    |
| Foreland                                 | PENDING      | SINGAPORE      | NA                   | E2:B0I.SI    | 
```

这将是匹配前 14 个字符的正确结果：

```
+------------------------------------------+--------------+----------------+----------------------+--------------+
| legal_name                               | city         | Country        | lei                  | sym          |
+------------------------------------------+--------------+----------------+----------------------+--------------+
| Foreign & Colonial Investment Trust      | PENDING      | UNITED KINGDOM | NA                   | FRCL.L       |
| Foreign & Colonial Investment Trust PLC  | London       | UNITED KINGDOM | 8VHDVYVI7W11JH2PAC61 | NA           | 
```

我尝试了各种子查询，但没有运气。我认为我可能需要一个函数或过程，但我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T06:33:17.960

你可以简单地`GROUP BY Country, LEFT(legal_name, 7)`. 这将确保您只获得国家和名称前缀的每个组合的单行输出。您对将是哪一行没有影响。`COUNT(*) AS number_of_duplicates`如果您想跟踪原始行数，您甚至可以添加一列。

# python - 在 Mongoengine 中清除列表

> ID：14311678
> 
> 赞同：0
> 
> 时间：2013-01-14T02:39:22.303
> 
> 标签：python, mongodb, mongoengine

使用此架构：

```
class XSet(db.Document):
    xs = db.ListField(db.EmbeddedDocument('X'))
#   ...

class X(db.Document):
    pass 
```

然后：

```
 xset = XSet.objects(id="uniqueid").get()
 xs = xset.xs 
```

如何删除`X`存储在 中的所有实例`xs`？（如果可能的话，我非常希望留在 Mongoengine 抽象中。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:39:11.747

您可以使用`$pullall`运算符，例如：

```
XSet.objects(pk=1).update(pull_all__xs=X) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:31:53.333

我不确定效率，但这有效：

```
for x in xs:
  del x 
```

# mysql - 将字符串和外键存储在一列中

> ID：14311680
> 
> 赞同：0
> 
> 时间：2013-01-14T02:39:39.307
> 
> 标签：mysql, relational-database

我正在构建一个包含大量类别的网站，每个类别都有自己的特定表单字段。因为类别太多，我想将这些表单字段存储在数据库中。

1.  类别存储在一个`category`表中：

    ```
    id | name
    -------------
    1  | Car info 
    ```

2.  该类别的字段存储在`category_field`表中：

    ```
    id | fk_id_category | type  | label
    -------------------------------------------------------------
    1  | 1              | text  | Your name
    2  | 1              | radio | What type of car do your drive? 
    ```

3.  如果 a`category_field`有一些用户可以从中选择的预定义选项，那么这些选项将存储在一个`category_field_option`表中：

    ```
    id | fk_id_category_field | label
    -----------------------------------------
    1  | 2                    | 'Convertible'
    2  | 2                    | 'Truck'
    3  | 2                    | 'Minivan' 
    ```

现在，当用户填写表单时，我们希望在表格中保存对此的引用`form_entry`：

```
 id | fk_id_user | fk_id_category
    --------------------------------
    1  | 1          | 1 
```

该表单条目的详细信息保存在`form_entry_details`表格中。然而：

*   如果`category_field.type`是，`text`我们应该将答案保存为字符串

    ```
    id | fk_id_form_entry | fk_id_category_field | [answer]
    -------------------------------------------------------
    1  | 1                | 1                    | John Doe 
    ```

*   如果`category_field.type`是`radio`，我想将外键保存到`category_field_option`

    ```
    id | fk_id_form_entry | fk_id_category_field | [fk_id_category_field_option]
    --------------------------------------------------------------------------
    2  | 1                | 2                    | 2 
    ```

我该如何解决这个问题？我知道我可以将它存储`fk_id_category_field_option`为一个字符串，但我需要它来实际引用`category_field_option`表，因为我使用的是 ORM（Doctrine 1.2.4）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T03:40:49.873

你不能因为外键的整个想法是为了防止这种情况。您可以将其存储为一个没有强制外键的字段，或者创建两列，一列用于外键 id（可能是与“用户定义”相关的默认值），另一列采用用户定义的信息，并且可能是默认值为空。

# php - 使用 MySQLI 正确转义 | 查询准备好的语句

> ID：14311686
> 
> 赞同：4
> 
> 时间：2013-01-14T02:40:21.410
> 
> 标签：php, mysqli

我读过这个：

*将帮助您不反对注射。因为转义只是一种字符串格式化工具，绝不是注入防止器。去搞清楚。但是，转义与准备好的语句有一些共同点：如果您仅针对臭名昭著的“用户输入”使用转义，它们都不能保证您不会被注入，而不是作为构建任何查询的严格规则，尽管有数据源。如果您需要插入的不是数据，而是标识符或关键字。*

在以下帖子中：[使用 sql 转义的动态 mysql 查询是否与准备好的语句一样安全？](https://stackoverflow.com/questions/4771984/are-dynamic-mysql-queries-with-sql-escaping-just-as-secure-as-prepared-statement)

所以我的问题是使用：

```
$Var = "UserInput Data Possible SQL Injection";
$mysqli->real_escape_string($Var); 
```

不提供针对 SQL 注入的保护？

我想使用`$mysqli->query();`所以我可以使用因为坦率地说，我不知道如何在使用语句`fetch_array(MYSQLI_ASSOC);`后将结果作为数组获取。`prepared`

所以如果我的数据库连接中有这个：

```
$STD = new mysqli('localhost', 'root', 'xx', 'xx');
$STD->set_charset('utf8');

if ($STD->connect_error) {
    die("Standard Access Has Been Revoked. Please Contact Administration"); 
}elseif (!$STD){
die ("Other problem With Connecting To Database, Please Contact Administration");
} 
```

如手册中所述`real_escape_string`

[http://php.net/manual/en/mysqli.real-escape-string.php](http://php.net/manual/en/mysqli.real-escape-string.php)

以上列举：

*注意 安全性：默认字符集 字符集必须在服务器级别设置，或者使用 API 函数 mysqli_set_charset() 设置，以影响 mysqli_real_escape_string()。有关更多信息，请参阅字符集的概念部分。*

链接到： http: [//php.net/manual/en/mysqli.set-charset.php](http://php.net/manual/en/mysqli.set-charset.php)

* * *

我的整体问题可以分为三个选项，第一个是要求语句的`fetch_array()`等价物`prepared`，这将提供完整的 SQL 注入预防，因为准备好的语句将数据作为原始数据发送。

* * *

这种格式的**第一个问题**如下：

我正在使用查询作为：

```
$GetCompletedQuery = $STD->query("SELECT Status FROM UserCompletion WHERE `UserID`=' ". $STD->real_escape_string($_SESSION['UID']) ."'");
$GetCompletedArray = $GetCompletedQuery->fetch_array(MYSQLI_ASSOC); 
```

返回：

> 数组（[状态] => 1）

但是使用准备好的语句：

```
$GetCompletedQuery = $STD->prepare("SELECT Status FROM UserCompletion WHERE `UserID`=?");
$GetCompletedQuery->bind_param('i', $_SESSION['UID']);
$GetCompletedQuery->execute();

$GetCompletedArray = $GetCompletedQuery->fetch_row;

print_r($GetCompletedArray); 
```

返回：

> 致命错误：在第 17 行的 /var/www/New/API/Constants.php 中的非对象上调用成员函数 fetch_row()

当我尝试`fetch_array()`我知道不能与准备好的语句一起使用时，也会出现同样的情况。

那么使用准备好的语句有什么选择呢？

* * *

**第二个问题**

如果我使用 My Usual Query 作为：

```
$GetCompletedQuery = $STD->query("SELECT Status FROM UserCompletion WHERE `UserID`=' ". $STD->real_escape_string($_SESSION['UID']) ."'"); 
```

使我能够使用`fetch_array();` 的数据是从 SQL 注入中正确保护的吗？

* * *

**第三个问题：**

我是否应该为 a 逃避/保护 SQL 注入，`$_SESSION['UID'];`因为这是在以下庄园中分配的：

```
$InnerJoinQuery = $STD->query("
        SELECT Users.ID, Users.Username, Users.Password, UserInformation.LastName, UserInformation.Firstname, UserInformation.DOB
        FROM Users
        INNER JOIN UserInformation
        ON Users.ID = UserInformation.UserID WHERE Users.Username = '".$_SESSION['real_name']."'");
        $InnerJoinArray = $InnerJoinQuery->fetch_array(MYSQLI_ASSOC);

    $_SESSION['UID'] = $InnerJoinArray['ID'];
    $_SESSION['Password'] = $InnerJoinArray['Password'];
    $_SESSION['Firstname'] = $InnerJoinArray['Firstname'];
    $_SESSION['LastName'] = $InnerJoinArray['LastName'];
    $_SESSION['DOB'] = $InnerJoinArray['DOB']; 
```

*这个片段解释了：*

用户使用用户名和密码登录，文件从数据库中获取信息，`$_SESSION['real_name'];` 并将结果添加到 $_SESSION 数组中，将每个结果添加到不同的键中。

`$_SESSION['UID'];`这个块的问题是，当通过数据库分配时，我是否应该逃避/保护 SQL 注入`$_SESSION['real_name'];`

感谢您抽出宝贵时间阅读这一庞大的内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T04:20:07.587

1.  [http://php.net/manual/en/mysqli-stmt.get-result.php](http://php.net/manual/en/mysqli-stmt.get-result.php)
2.  是的，但这是非常糟糕的做法：
    *   在这种情况下它会帮助你，但**只有**在这种情况下才会欺骗你
    *   手动转义很傻，最好让司机帮你做
3.  是的，因为没有像 SQL 注入这样的东西，只是**格式不**正确

> 是否使用`$mysqli->real_escape_string($Var);`不提供针对 SQL 注入的保护？

我没有改变主意：**当然，它没有。**
仅当您将结果值括在引号中（并使用`mysqli_set_charset()`严格设置正确的编码）时才会这样做。

看，SQL 注入不是必需的，它本身就存在，但它只是一个结果。格式不正确的查询的结果。
创建查询时，您必须正确格式化查询的每个部分。不是因为任何“注射”，而是为了它。当你要在查询中插入一个字符串时，你必须把它放在引号中，否则你会得到一个语法错误。当你要在查询中插入一个字符串时，你必须转义这些用来分隔这个字符串的引号，否则你会得到一个语法错误。等等。你应该关心的是正确的格式，而不是关于注射的可怕故事。只要**您根据其类型正确格式化每个动态查询部分 - 就不可能进行注入**

所以，变量的来源或它的价值永远不应该是你关心的问题。但只有它位于查询中：

*   字符串必须用引号括起来并转义这些引号。
*   数字必须转换为它的类型。
*   标识符必须包含在反引号中，并将这些反引号加倍

当它用于查询的*静态*部分时，在脚本中硬编码，我们不使用如此严格的标准 - 例如，我们没有将每个标识符都包含在反引号中。
但是当它用于查询的*动态*部分时，应用格式化规则应该是严格的规则，因为我们无法确定变量内容。

By the way, there is another way to format your strings and numbers - prepared statements. It is not as convenient as it should be, but because it is using placeholders to represent your data in the query, it it recommended to use over silly manual formatting.

# php - .submit() 无需重新加载页面

> ID：14311687
> 
> 赞同：0
> 
> 时间：2013-01-14T02:40:27.357
> 
> 标签：php, jquery

我正在尝试使用 jquery 进行一些文件上传。上传框必须在对话框中。现在我只想知道单击对话框的上传按钮后。我如何提交但页面未加载。我尝试使用这个 $('#uploadForm').submit().preventDefault(); 它根本没有动作。

**html**

```
<script>
                $( "#dialog-upload" ).dialog({
                autoOpen: false,
                height: 200,
                width: 350,
                modal: true,
                buttons: {
                "Upload": function() {                  
                    var bValid = true;
                    bValid = bValid && checkCSV()
                    if(bValid){
                        **$('#uploadForm').submit().preventDefault();**

                        }
                $( "#dialog-upload" ).dialog( "close" );
                        },
            Cancel: function() {                
                allFields.val( "" ).removeClass( "ui-state-error" );
                $( this ).dialog( "close" );
            }
                },
            close: function() {
                allFields.val( "" ).removeClass( "ui-state-error" );
                $( this ).dialog( "close" );    

                }
                });
</script>

  <div id="dialog-upload" title="Upload csv file">
    <form>
    <fieldset>
        <form action='ajax.php' id = 'uploadForm' method='post' enctype='multipart/form-data'>
        <input type="text" name="file" id="fileUpload" size = 30 class="text ui-corner-all" />
        </form>
    </fieldset> 

    </form>
</div> 
```

**php**

```
if (isset($_FILES['file'])) {
echo "success";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T02:42:56.443

使用`EVENT`委托进行表单提交

```
$('#uploadForm').submit(function( e ){
  e.preventDefault(); // browser 'submit' event behavior prevented
}); 
```

比这样做：

```
"Upload": function() {                  
    var bValid = true;
    bValid = bValid && checkCSV()
    if(bValid){
       $('#uploadForm').submit();
    }
    // ...... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T02:43:40.733

您可以在提交之前将某些内容绑定到提交事件。

```
$(function() {
    $('#uploadForm').submit(function(evt) {
        evt.preventDefault();
    });
}); 
```

然后只需在原始位置调用没有 preventDefault() 的 .submit() 即可。

# python - 如何将 Theano 标志 warn.sum_div_dimshuffle_bug 设置为 False

> ID：14311688
> 
> 赞同：0
> 
> 时间：2013-01-14T02:40:27.977
> 
> 标签：python, warnings, theano

我正在使用 theano 包来查找 sigmoid 函数的导数，使用交叉熵作为成本。这是我的代码：

```
 variable = tensor.dmatrix('variable')
 y= tensor.nnet.softmax(tensor.dot(z,variable))
 cost =tensor.sum( tensor.nnet.binary_crossentropy(y,y))
 gp = tensor.grad(cost,variable)
 dlogistic = function([variable],gp) 
```

当我运行我的代码时，我收到以下错误：

```
 WARNING (theano.tensor.opt): WARNING: Your current code is fine,
 but Theano versions between rev. 3bd9b789f5e8 (2010-06-16) and 
 cfc6322e5ad4 (2010-08-03) would have given an incorrect result. 
 To disable this warning, set the Theano flag warn.sum_div_dimshuffle_bug
 to False. 
```

但我不知道该怎么做。我试过这个：

```
 warn.sum_div_dimshuffle_bug= false 
```

但它在警告时给了我一个错误，说它不被识别为变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:33:43.570

尝试

```
from theano import config
config.warn.sum_div_dimshuffle_bug = False 
```

这对我有用

# wpf - 如何在部分类中创建计算字段 - WPF

> ID：14311689
> 
> 赞同：0
> 
> 时间：2013-01-14T02:40:32.447
> 
> 标签：wpf, entity-framework, inotifypropertychanged, partial-classes, calculated-columns

我正在尝试使用计算出的列在我的网格中显示。

我有一个由 EF 代码生成器自动生成的具有三个属性的部分类：我正在尝试创建另一个部分类并在那里添加计算字段，例如

```
Public partial class Employee
{
public decimal? totalSalary
{
get

{
return salary*wagerate+bonus;
}
}
} 
```

它第一次可以正常工作，但在薪水/奖金/工时更改时不起作用。我在网格中使用这些字段

这是我由 EF 实体生成器生成的代码

```
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated from a template.
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Collections.Specialized;
using System.ComponentModel;
using System.Globalization;
using System.Runtime.Serialization;
using System.ComponentModel.DataAnnotations;

namespace Employees.Contract
{
[DataContract(IsReference = true)]
[KnownType(typeof(Department))]
[KnownType(typeof(PropertyType))]
public partial class Employee: IObjectWithChangeTracker, INotifyPropertyChanged,IDataErrorInfo
{

    [NonSerialized]
    private CLOS.Contract.Validation.DataErrorInfoSupport dataErrorInfoSupport;

    public Employee()
    {            
        dataErrorInfoSupport = new CLOS.Contract.Validation.DataErrorInfoSupport(this);
        Init();
    }

    partial void Init();

    string IDataErrorInfo.Error { get { return dataErrorInfoSupport.Error; } }

    string IDataErrorInfo.this[string memberName] { get { return dataErrorInfoSupport[memberName]; } }

    #region Primitive Properties

    [DataMember]
    public Nullable<decimal> Salary
    {
        get { return _salary; }
        set
        {
            if (_salary != value)
            {
                _salary = value;
                OnPropertyChanged("Salary");
            }
        }
    }
    private Nullable<decimal> _salary;

    [DataMember]
    public Nullable<decimal> WageRate
    {
        get { return _wageRate; }
        set
        {
            if (_wageRate != value)
            {
                _wageRate = value;
                OnPropertyChanged("WageRate");
            }
        }
    }
    private Nullable<decimal> _wageRate;

    [DataMember]
    public Nullable<decimal> Bonus
    {
        get { return _bonus; }
        set
        {
            if (_bonus != value)
            {
                _bonus = value;
                OnPropertyChanged("Bonus");
            }
        }
    }
    private Nullable<decimal> _bonus;

    #endregion
    #region Navigation Properties

    [DataMember]
    public Department Department
    {
        get { return _department; }
        set
        {
            if (!ReferenceEquals(_department, value))
            {
                var previousValue = _department;
                _department = value;
                OnNavigationPropertyChanged("Department");
            }
        }
    }
    private Borrower _department;

    [DataMember]
    public PropertyType PropertyType
    {
        get { return _propertyType; }
        set
        {
            if (!ReferenceEquals(_propertyType, value))
            {
                var previousValue = _propertyType;
                _propertyType = value;

                OnNavigationPropertyChanged("PropertyType");
            }
        }
    }
    private PropertyType _propertyType;

    #endregion
    #region ChangeTracking

    protected virtual void OnPropertyChanged(String propertyName)
    {
        if (ChangeTracker.State != ObjectState.Added && ChangeTracker.State != ObjectState.Deleted)
        {
            ChangeTracker.State = ObjectState.Modified;
        }
        if (_propertyChanged != null)
        {
            _propertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    protected virtual void OnNavigationPropertyChanged(String propertyName)
    {
        if (_propertyChanged != null)
        {
            _propertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    event PropertyChangedEventHandler INotifyPropertyChanged.PropertyChanged{ add { _propertyChanged += value; } remove { _propertyChanged -= value; } }
    private event PropertyChangedEventHandler _propertyChanged;
    private ObjectChangeTracker _changeTracker;

    [DataMember]
    public ObjectChangeTracker ChangeTracker
    {
        get
        {
            if (_changeTracker == null)
            {
                _changeTracker = new ObjectChangeTracker();
                _changeTracker.ObjectStateChanging += HandleObjectStateChanging;
            }
            return _changeTracker;
        }
        set
        {
            if(_changeTracker != null)
            {
                _changeTracker.ObjectStateChanging -= HandleObjectStateChanging;
            }
            _changeTracker = value;
            if(_changeTracker != null)
            {
                _changeTracker.ObjectStateChanging += HandleObjectStateChanging;
            }
        }
    }

    private void HandleObjectStateChanging(object sender, ObjectStateChangingEventArgs e)
    {
        if (e.NewState == ObjectState.Deleted)
        {
            ClearNavigationProperties();
        }
    }

    protected bool IsDeserializing { get; private set; }

    [OnDeserializing]
    public void OnDeserializingMethod(StreamingContext context)
    {
        IsDeserializing = true;
    }

    [OnDeserialized]
    public void OnDeserializedMethod(StreamingContext context)
    {
        dataErrorInfoSupport = new CLOS.Contract.Validation.DataErrorInfoSupport(this);
        IsDeserializing = false;
        ChangeTracker.ChangeTrackingEnabled = true;
    }

    protected virtual void ClearNavigationProperties()
    {
        Department = null;
        PropertyType = null;
    }

    #endregion
} 
```

}

如果我`OnPropertyChanged("Salary")`在 EF Generated 类中输入 Hours,Wage,Overtime 属性（这不是一个好主意），它也可以工作，因为如果类重新生成，我的代码将被清除

任何帮助表示赞赏。（对不起格式，这是我的第一个问题）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T06:09:57.420

In the partial class use the partial Init method to subscribe to the PropertyChanged event and when either the salary, wagerate or bonus property changes notify clients of the change of the totalSalary.

**This way you do not need to modify the generated code. (that is why the Init method is partial).**

```
public partial class Employee
{

    partial void Init()
    {
        _propertyChanged += PropertyChangedHandler;
    }

    void PropertyChangedHandler(object sender, PropertyChangedEventArgs args)
    {
        if(args.PropertyName == "salary" ||
           args.PropertyName == "wagerate" ||
           args.PropertyName == "bonus")
         {
             OnPropertyChanged("totalSalary");
         }
    }

    public decimal? totalSalary
    {
        get
        {
            return salary * wagerate + bonus;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T02:44:03.717

这就是为什么 MVVM 是一种流行的设计模式的原因，如果你将你的 Employee（一个模型）包装在一个新的类（一个 ViewModel）中，在你把它交给网格（视图）之前定制会更容易。

但是，让当前代码正常工作的一种巧妙方法是附加到部分类中的当前 PropertyChanged 事件，并`OnPropertyChanged("Salary")`在当前属性名称与依赖属性之一匹配时调用（注意递归！）

# django - 无法以 django 脆皮形式使用 Row

> ID：14311691
> 
> 赞同：1
> 
> 时间：2013-01-14T02:40:45.683
> 
> 标签：django, django-crispy-forms

最初我的这段代码是有效的，它显示了多列的行。

```
class testForm():

    def __init__(self, *args, **kwargs):

        self.helper = FormHelper()
        self.helper.form_method = 'POST'
        self.helper.form_class= ''
        self.helper.layout = Layout(
                Row('user', 'time', 'source'),
                Row('location', 'summary'),

            )
        save_button = Submit('save', 'Save11')
        save_button.field_classes = 'btn-primary btn-large'
        self.helper.add_input(save_button) 
```

但现在它不起作用并在单独的行中显示所有列，而不是在一行中组合列

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T05:33:48.523

我认为您需要更改代码的css。默认情况下，您不会以表格形式获得它。它们将堆叠在一起。

只需定义它们的宽度或尝试使用`float:left`

# mysql - 在特定列和行中获得最大价值

> ID：14311692
> 
> 赞同：1
> 
> 时间：2013-01-14T02:41:18.580
> 
> 标签：mysql

我有一个表，它将在一天中添加几个时间戳条目，每个条目都有一个特定的员工 ID。我很好奇如何获得当天的第一个时间戳和当天的最后一个时间戳来计算该特定员工在特定日期的工作时间。我的表格如下：

```
+----+------------+----------+---------+---------------------+-----------+------------+-----------+---------+
| id | employeeID | date     | timeIn  | jobDescription      | equipType | unitNumber | unitHours | timeOut |
+----+------------+----------+---------+---------------------+-----------+------------+-----------+---------+
|  1 |          1 | 01/13/13 | 8:17 pm | Worked in Hubbard   | Dozer     | 2D         |     11931 | 8:17 pm |
|  2 |          1 | 01/13/13 | 8:17 pm | Worked in Jefferson | Excavator | 01E        |      8341 | 8:18 pm |
+----+------------+----------+---------+---------------------+-----------+------------+-----------+---------+ 
```

到目前为止，我有一个这样的查询来检索时间值：

```
$stmt = $conn->prepare('SELECT * FROM `timeRecords` WHERE `date`= :dateToday AND `employeeID` = :employeeID ORDER BY employeeID ASC');
    $stmt->execute(array(':employeeID' => $_SESSION['employeeID'], ':dateToday' => $dateToday)); 
```

`timeOut`但我不确定如何在列中获得最大值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T02:51:45.057

真的，您只需要聚合`MAX()`并按`MIN()`. `employeeID`使用该[`TIMEDIFF()`函数](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timediff)计算两者之间的时间差。

```
SELECT 
  `employeeID`,
  MIN(`timeIn`) AS `timeIn`,
  MAX(`timeOut`) AS `timeOut`,
  TIMEDIFF(MAX(`timeOut`), MIN(`timeIn`)) AS `totalTime`
FROM `timeRecords`
WHERE
  `date` = :dateToday
  AND `employeeID` = :employeeID
/* Selecting only one employeeID you don't actually need the GROUP BY */
GROUP BY `employeeID` 
```

但是，如果员工在一天内多次上下班，则不会报告总工作时间。在这种情况下，您将需要每个输入/输出对`SUM()`的结果。`TIMEDIFF()`

就像是：

```
SELECT
  `employeeID`,
  /* Assumes no times overlap across rows */
  SEC_TO_TIME(SUM(TIME_TO_SEC(TIMEDIFF(`timeOut`, `timeIn`)))) AS `totalTime`
FROM `timeRecords`
WHERE
  `date` = :dateToday
  AND `employeeID` = :employeeID
GROUP BY `employeeID` 
```

# python - matplotlib：仅在主 x 轴上显示次要刻度标签

> ID：14311695
> 
> 赞同：4
> 
> 时间：2013-01-14T02:41:25.210
> 
> 标签：python, matplotlib

我有一个通用绘图类，它使用 matplotlib 生成可能有多个 y 轴的（png）图，但总是一个显示日期的（共享）x 轴。

这是处理 x 轴标签格式的方法：

```
def format_xaxis(self, axis, primary):
    steps = (1,2,3,4,6,12)
    step = steps[min(len(self.dates) // 1000, 5)]
    axis.set_axisbelow(True)
    axis.xaxis.grid(b=True, which='minor', color='0.90', linewidth=0.5)
    axis.xaxis.set_minor_locator(MonthLocator(bymonth=range(1,13,step)))
    axis.xaxis.set_major_locator(YearLocator())
    if primary:
        axis.xaxis.set_major_formatter(DateFormatter(fmt='%b %y'))
        axis.xaxis.set_minor_formatter(DateFormatter(fmt='%b'))
    else:
        plt.setp(axis.get_xticklabels(), visible=False) 
```

输入：

*   primary 是一个布尔值，指示这是否是主轴
*   轴是一个matplotlib轴实例

我想要（并期望从上述方法）是唯一的主轴有标签，主要标签是月-年，次要标签只有月。

发生的情况是主轴上只显示主要标签，根本不显示次要标签。

如果我将最后 6 行更改为：

```
 axis.xaxis.set_major_locator(YearLocator())
    axis.xaxis.set_major_formatter(DateFormatter(fmt='%b %y'))
    axis.xaxis.set_minor_formatter(DateFormatter(fmt='%b'))
    if not primary:
        plt.setp(axis.get_xticklabels(), visible=False) 
```

*然后在所有*轴上显示次要标签。

**如何仅在主 x 轴上显示次要 x 轴刻度标签？**

编辑：

在第二个代码块上使用 KevinG 的建议有效：

```
 axis.xaxis.set_major_locator(YearLocator())
    axis.xaxis.set_major_formatter(DateFormatter(fmt='%b %y'))
    axis.xaxis.set_minor_formatter(DateFormatter(fmt='%b'))
    if not primary:
        plt.setp(axis.get_xticklabels(minor=False), visible=False)
        plt.setp(axis.get_xticklabels(minor=True), visible=False) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T03:05:34.263

我注意到很多刻度标签的东西都有`minor=False`默认参数。现在没有方便的多轴图，我只能建议你看看那里。我想像

```
if primary:
    axis.xaxis.set_major_formatter(DateFormatter(fmt='%b %y'))
    axis.xaxis.set_minor_formatter(DateFormatter(fmt='%b'))
    plt.setp(axis.get_xticklabels(minor=True), visible=True)
else:
    plt.setp(axis.get_xticklabels(), visible=False) 
```

应该有一些效果。

# coq - 序列表的等价性

> ID：14311696
> 
> 赞同：1
> 
> 时间：2013-01-14T02:41:29.720
> 
> 标签：coq

`lequiv`Color 库 中的等价定义 ( )：http: [//color.inria.fr/doc/CoLoR.Util.List.ListUtil.html](http://color.inria.fr/doc/CoLoR.Util.List.ListUtil.html)

```
Require Import List.
Variable A : Type.
Definition lequiv (l1 l2: list A) : Prop := l1 [= l2 /\ l2 [= l1.
Infix "[=]" := lequiv (at level 70). 
```

我想证明下面的引理。这是我的证明：

```
Lemma equiv_app_equiv: forall l1 l2 l3 : list A, l1 ++ l2 [=] l3 -> 
l1 [=] l3 /\ l2 [=] l3.
Proof.
unfold lequiv in |- *; simpl in |- *. intuition.
apply incl_appr_incl in H0\. apply H0.

  A : Type
  l1 : list A
  l2 : list A
  l3 : list A
  H0 : l1 ++ l2 [=l3
  H1 : l3 [=l1 ++ l2
  ============================
   l3 [=l1 
```

在这个目标上，我不知道如何走得更远，我想知道`H1: l3 [= l1 ++ l2`它可以重写为的假设：`l3 [= l1 /\ l3 [= l2`？我在 Coq 的库（`List)`.

请你帮助我好吗？我的引理中缺少什么吗？它可以证明吗？非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:09:27.133

# mysql - 结构化或不可预测数据的 SQL 表结构

> ID：14311698
> 
> 赞同：1
> 
> 时间：2013-01-14T02:41:58.133
> 
> 标签：mysql, sql, database-design

我是 (My)SQL 的新手，很难找到有关表设计最佳实践的好信息。

我想在棋盘上保存移动序列，比如我有一个数组`$a = ['e4 e5', 'Nf3 Nc6', ...]`

作为新手，我的第一个想法是一个有 2 列的愚蠢的小桌子，一个用于游戏 ID，一个用于移动。移动（数组）将被序列化并存储在一个字符串中。我想这在技术上是可行的，但是从数据库中读取和写入潜在的巨大序列化数组 - 可能在每次页面加载时 - 对我来说似乎不是最理想的。

由于各种原因，在用户端缓存数组可能是不可能的，这不是我很好奇的事情。

我有兴趣学习如何最好地存储无法以它的格式完全预测的数据（例如，移动的数量可以从 1 到 1000 不等）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T02:50:39.617

与其将整个游戏历史存储在一行中，不如存储游戏 ID、移动和移动的序列号。

这样，您将通过执行类似的操作来检索给定游戏的整个历史记录

```
SELECT *
  FROM MovesTable
 WHERE gameID = id
 ORDER BY sequence 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T02:48:18.503

一般来说，我会使用以下形式之一的表格：

*   游戏 ID、移动编号、移动
*   GameId、MoveNumber、FromSquare、ToSquare

您使用哪一个取决于您需要查询的内容以及数据的呈现方式，但我倾向于后一种建议。

然后，您可以将其与包含 GameId 和有关游戏本身的一些数据（例如日期或玩家）的父表结合起来。

如果您只想将移动作为一个完整的块来使用 - 也就是说您总是想要整个移动链并且永远不会查询单个移动 - 您可以按照您的建议存储字符串。这有一个额外的好处，即只有一行数据要返回，这将非常快。当然，缺点是您必须在收到数据后反序列化/解析数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T02:45:40.487

我会做类似的事情

```
Game, MoveNumber, Move
----------------------
Game1, 1, e4 e5
Game1, 2, Nf3 Nc6
... 
Game2, 1, .... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T03:01:49.467

您将需要多张桌子，一张用于玩家，一张用于游戏，一张用于棋子，一张用于移动。

游戏会有玩家和颜色以及日期和时间之类的东西

一块会告诉你它是如何移动的，是骑士还是女王等。

玩家将拥有玩家的姓名等。

一个移动将有棋子、游戏、玩家、开始位置和结束位置

您将通过基于每个表中的 id 字段的关系将这些表链接在一起。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T17:08:27.493

试试两张桌子。

第一个表包含与每个游戏有关的信息。谁是玩家，他们在何时何地玩，谁赢了，以及与每场比赛相关的任何其他信息，并使每场比赛都独一无二。

**游戏**

Game_id PK

Move_id FK

黑名

白名

游戏_位置

比赛日期

游戏时间

优胜者

第二个表包含每场比赛的所有动作。这包含了每个动作的所有相关信息：被拿走的棋子，是否被其他玩家检查，这是常规动作还是他们城堡等。

**移动**

move_id PK

移动号码

Who_moved

Piece_moved

Square_from

Square_to

片断

移动类型

Check_YorN

现在 Games 表 (game) 中的每一行都连接到 Moves 表中的许多行 (moves)。

# class - 每次应用类时的 CSS3 动画（Firefox 错误？）

> ID：14311700
> 
> 赞同：0
> 
> 时间：2013-01-14T02:42:07.193
> 
> 标签：class, firefox, css, animation

我在使用 Firefox（在 v17 中尝试过）时遇到的 CSS3 原生动画存在一些问题，而 Chrome 还可以。

该示例也可在 Codepen 上找到： [http ://codepen.io/anon/pen/yxteC](http://codepen.io/anon/pen/yxteC)

代码也在下面重复。
我将某些类应用于某些元素（尝试将其与 JS 一起应用于悬停，但悬停本身的工作方式完全相同（`:hover`选择器而不是`.hover`类））。所以，问题是**在 Firefox 中动画只触发一次：第一次应用该类。**下次不会了。
这在 Chrome 中完美运行。不过我没有测试任何其他浏览器（IE 仍然没有广泛支持它，而 Opera ......嗯，它现在并没有给我带来太多困扰）。

更多细节：如果不隐藏/显示内部元素（`display:none`/ `block`），那么它在 Firefox 中可以正常工作（但这显然不是解决方案）。

*我真的会要求不要添加任何与一般清洁度和可能的代码改进相关的评论。这只是一个例子。*

HTML：

```
<div>
  <span>menu</span>
  <ul>
    <li>Item1</li>
    <li>Item2</li>
    <li>Item3</li>
  </ul>
</div> 
```

CSS：

```
ul
{
    display: none;
}

div.hover ul
{
    display: block;
}

div li
{
    position: relative;
    top: -10px;
}
div.hover li
{
    -webkit-animation: filterAppear 0.5s;
       -moz-animation: filterAppear 0.5s;

    top: 0;
    opacity: 1;

    -webkit-animation: filterItemAppear 0.1s;
       -moz-animation: filterItemAppear 0.1s;
    -webkit-animation-fill-mode: backwards;
       -moz-animation-fill-mode: backwards;
}

div.hover li:nth-child(1)
{
    -webkit-animation-delay: 0.15s;
       -moz-animation-delay: 0.15s;
}
div.hover li:nth-child(2)
{
    -webkit-animation-delay: 0.35s;
       -moz-animation-delay: 0.35s;
}
div.hover li:nth-child(3)
{
    -webkit-animation-delay: 0.55s;
       -moz-animation-delay: 0.55s;
}

@-webkit-keyframes filterItemAppear
{
    from { opacity:0; top:-25px; }
    to { opacity:1; top:0; }
}
@-moz-keyframes filterItemAppear
{
    from { opacity:0; top:-25px; }
    to { opacity:1; top:0; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:22:23.443

我有类似的问题，今天我会找到解决方案。

Firefox 必须以某种方式注意到 DOM 操作。所以我们必须添加`.width()`or `setTimeout`。宽度解决方案更清洁 IMO。

查看我为您的示例编辑的 CodePen [http://cdpn.io/yhbfB](http://cdpn.io/yhbfB)。

（有关它的更多信息，请访问[http://css-tricks.com/restart-css-animation/](http://css-tricks.com/restart-css-animation/)）

# php - PHP 空令牌

> ID：14311702
> 
> 赞同：1
> 
> 时间：2013-01-14T02:42:08.713
> 
> 标签：php, constants

```
define('EMPTY', '');
if(!empty(EMPTY))
{
if(!(boolean) _CONSTANT)
{
    print "One";
}
} 
```

上面的代码产生以下错误消息：

“解析错误：语法错误，第 3 行 C:\Users\Robert\Documents\web development\xampp\htdocs\xampp\web_development\index.php 中的意外 'EMPTY' (T_EMPTY)”

PHP 手册中没有任何地方明确声明“EMPTY”是一个标记，也没有告诉您这个陷阱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T02:58:47.103

`()`您可以声明与 PHP用来确定标记是函数还是常量声明的函数同名的常量：

```
<?php
function myfunc() {
 echo "inside myfunc()\n";
}
define('str_replace', 'my string');
echo str_replace . "\n";
echo str_replace("A", "B", "AAAA") . "\n";
define('myfunc', 'this is myfunc constant');
echo myfunc . "\n";
myfunc();

/*
Output:
my string
BBBB
this is myfunc constant
inside myfunc()
 */ 
```

这不起作用，`empty`因为`empty`它是一种[语言结构](http://php.net/manual/en/reserved.keywords.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T02:45:14.167

这不是问题......只需为您的常量选择另一个名称。

如果您愿意，可以[提交文档错误报告](https://bugs.php.net/report.php)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-14T02:46:51.793

函数名称不区分大小写。

```
$state = constant('EMPTY');
if (!empty($state)) { 
```

# java - MySQLSyntaxErrorException

> ID：14311704
> 
> 赞同：1
> 
> 时间：2013-01-14T02:42:16.710
> 
> 标签：java, mysql, jdbc, phpmyadmin

我刚刚开始学习 MySQL 和 JDBC。

我使用 phpmyadmin 创建了一个名为 testdb 的表。表只有 2 列，分别称为 first 和 last。当我尝试从我的 java 类连接数据库时，我得到 MySQLSyntaxError。但是我无法弄清楚。

这是我的课：

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

public class Main {

    public static void main(String[] args) throws ClassNotFoundException, SQLException {
        String url = "jdbc:mysql://localhost:3306/testdb";

        //Accessing driver from the JAR file.
        Class.forName("com.mysql.jdbc.Driver");

        //Creating a variable for the connection "con"
        Connection con = DriverManager.getConnection(url,"root","password");

        //Here is the query
        PreparedStatement statement = con.prepareStatement("select * from name");

        //Execute query
        ResultSet result = statement.executeQuery();

        while(result.next()) {
            System.out.println(result.getString(1) + " " + result.getString(2));
        }

    }

} 
```

这是一个例外：

```
Exception in thread "main" com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Table 'testdb.name' doesn't exist
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.Util.getInstance(Util.java:386)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1053)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4096)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4028)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2490)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2651)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2734)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2155)
    at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2322)
    at Main.main(Main.java:22) 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T02:44:26.153

```
MySQLSyntaxErrorException: Table 'testdb.name' doesn't exist 
```

错误几乎是描述性的。`testdb`架构中没有名称为“name”的表。

> 我使用 phpmyadmin创建了一个名为**testdb的表。**

如果您已经创建了表`testdb`，那么它应该是`select * from testdb`. 不是吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T02:56:11.003

您已经创建了一个名为**testdb**的表，因此您的查询应该是

```
select * from testdb 
```

不是`select * from name`

你真的应该检查你的堆栈跟踪。

# php - 使用 javascript 将文本从单个文本框中分离为 2 个 php 变量

> ID：14311706
> 
> 赞同：0
> 
> 时间：2013-01-14T02:43:00.477
> 
> 标签：php, javascript, jquery, mysql

我已经为此绞尽脑汁了几个小时。基本上我有一个显示来自数据库的用户信息的 div：

```
if (isset($_SESSION['email']) && ($_SESSION['userID'])) {

$sql = "SELECT * FROM user_accounts WHERE email='" . $_SESSION['email'] . "' AND user_id=" . $_SESSION['userID'] ;
$userRecordSet = $_dbConn->query($sql);

if ($userRecordSet != NULL) {
    $userRow = $userRecordSet->getrow();
    $firstName = $userRow['first_name'];
    $lastName = $userRow['last_name'];

    } 
```

}

然后将名字和姓氏放入 div 并显示给用户。

```
<div id="nameChange" title="Click to edit"><?=$firstName?> <?=$lastName?></div> 
```

当用户单击此 DIV 元素时，它会转换为一个文本框，并显示取自 DIV 的用户名字和姓氏的内容。这是支持上述内容的Jquery。

```
//execute when nameChange DIV is clicked
        $("#nameChange").click(function(){  

                //check if there are any existing input elements
                if ($(this).children('input').length == 0){

                    $("#save").css("display", "inline");

                    //variable that contains input HTML to replace
                    var inputbox = "<input type='text' class='inputbox' name='userName' value=\""+$(this).text()+"\">"; 
                    //insert the HTML intp the div
                    $(this).html(inputbox);         

                    //automatically give focus to the input box     
                    $("this .inputbox").focus();

                }               
        }); 
```

这样做会导致数据库出现问题，因为我希望名字和姓氏进入单独的列，但是在将其转换为文本框后，内容将放入单个变量中。现在回答这个问题。

如何解析文本框并为名字和姓氏分配 2 个单独的变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T02:48:03.440

这假设您对数据库的最终解析是使用`php`.

这是我用来从文本输入中获取名字和姓氏的两个函数：

```
//returns first name form full name input
public function FirstName($input)
    {   
        $name = explode(" ",$input);
        $howmany = count($name);
        if($howmany != '1')
            {
            if($howmany == '2')
                {   
                    $firstname = $name[0];
                    return $firstname;
                }
                    if($howmany == '3')
                {   
                    $firstname = $name[0]." ".$name[1];
                    return $firstname;
                }
            }

        return false;   
    }
//returns last name from full name input
public function LastName($input)
    {   
        $name = explode(" ",$input);
        $howmany = count($name);
        if($howmany != '1')
            {   
                $last = $howmany -1;
                $lastname = $name[$last];
                return $lastname;
            }
        return false;   
    } 
```

这考虑了有两个名字的人，例如“玛丽·林恩”

# html - JEdi torPane 中的分页符

> ID：14311707
> 
> 赞同：1
> 
> 时间：2013-01-14T02:43:17.370
> 
> 标签：html, printing, jtextarea, jeditorpane, page-break

为了一切神圣的爱，有人可以帮我做这件事吗？我一直在寻找两个小时来了解如何在 JEditorPane 中放置分页符，以防它打印无济于事。我尝试了从 HTML 样式到在随机网站上找到的粗略 API 的所有内容。

我编写的代码使用 textPaneEditor 打印数据，并使用 HTML 样式以我需要的方式对其进行格式化。所以，我需要一种方法来在我推入下一行的所有数据后添加分页符，可能带有 HTML 样式。不幸的是，“”似乎不起作用。

这是我的代码本质上的样子：

```
 String report = "<font size=\"3\">";

    report += "<b> TEST! </b><br>";

    report += "PAGE BREAK WOULD GO HERE<br>";

    report += "</font>";

    JEditorPane textArea = new JEditorPane("text/html", report);

    try{

        textArea.print(new MessageFormat(""), new MessageFormat(""), true, null, null, true);
    }catch(PrinterException e){
        e.printStackTrace();
    } 
```

TLDR；如何在打印到打印机期间使用 HTML 样式对 JTextEditorPane 进行分页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T22:51:56.660

我现在正在自己解决同样的问题。我的一个想法是发出两个打印命令，一个用于打印的每一页。不确定这是否是或将是最优雅或最有效的解决方案，但值得研究。

# .net - 为什么“新 System.Windows.Forms.Button”在我的 .net 应用程序中需要更多时间

> ID：14311715
> 
> 赞同：0
> 
> 时间：2013-01-14T02:44:25.390
> 
> 标签：.net, winforms

现在，我面临一个非常奇怪的问题。我们有一个 .net 解决方案。这是一个比较大的解决方案，包含很多项目。在一个负责 GUI 的项目中，我们在客户端应用程序启动之前使用 VB.net 创建了许多 winforms（标签、按钮、列表框等）。最近，客户问我们为什么我们的客户端应用程序需要更多时间来初始化。

当我深入研究我们的代码时，我发现只有一个“Me.BtnMenu = New System.Windows.Forms.Button”子句需要大约 10 毫秒才能完成。实际上，在初始化客户端 GUI 之前，我们有数百个 Winform 需要构建。最近，我们将解决方案从 vs2008 迁移到 vs2010。对比一下，在vs2008版本中，“新建System.Windows.Forms.Button”的开销约为0~1ms，而在vs2010版本中，“新建System.Windows.Forms.Button”的开销约为10~ 20ms，最终延迟了 GUI 的初始化。更有趣的是，其他控件如 GroupBox、Panel、RadioButton 等在两个版本中都不会花费太多时间，只有按钮 deos。

有人对此有任何想法吗？它让我困惑了好几个星期，但我仍然无法理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T00:08:34.767

It could also be the parent of the Button object that is causing this issues. Sometimes if the Panel/Form is recalculating/Redrawing the layout when a new Control is added to its collection , a simple operation like adding a simple button would take more time. If you are using a custom panel or a layout that is calculated when controls are added/removed, trying adding the form elements directly to the form.

Also check if the parent form/panel has a method that would pause the redrawing of the form or stop the layout calculations, e.g. BeingUpdate/EndUpdate (or similar ones).

# javascript - 如何使用 AngularJS 路由到子视图？

> ID：14311726
> 
> 赞同：5
> 
> 时间：2013-01-14T02:46:10.640
> 
> 标签：javascript, angularjs

我已经开始使用 AngularJS，但在处理嵌套子视图的路由时遇到了一些麻烦。

我的网站有一个基本的两列布局，如下所示：

```
[Main 1] [Main 2] [Main 3]
--------------------------------------
A | Content for A goes into this frame.
B |
C |
D |
E | 
```

当您通过主菜单 (main 1, main 2, main 3) 导航到页面时，将动态生成侧面菜单链接 (a, b, c, d, e)。

即，导航到 main1 链接将发出一个请求，`/main1`该请求将返回 JSON 链接数组。

当用户单击其中一个链接时，它将发出请求`/main1/a`并将数据加载到内容框架中。

我目前这样做的方式是：

**索引.html：**

```
<body>
    <a href="/main1">Main 1</a>

    <div ng-view></div>
</body> 
```

**应用程序.js：**

```
angular.module('test', [
    'test.controllers'
])

.config([
    '$routeProvider',

    function($routeProvider)
    {
        $routeProvider
            .when('/main1', {
                templateUrl: '/partials/main1.html',
                controller:  'Main1Ctrl'
            })
            .when('/main1/:id', {
                templateUrl: '/partials/main1.html',
                controller:  'Main1Ctrl'
            })
    }
]); 
```

这就是我卡住的地方。我的`Main1Ctrl`控制器目前看起来像：

```
angular.module('test.controllers', [])

.controller('Main1Ctrl', [
    '$scope',
    '$routeParams',
    'Data',

    function($scope, $routeParams, Data)
    {
        $scope.submenu = Data.query();
    }
]); 
```

我遇到的问题是如何分配`$scope.content`.

如果 URL 中没有指定 ID，我需要等待子菜单呈现，然后才能从列表中获取第一个 ID（如果没有请求内容，它将默认为第一个子菜单项）。

如果用户在 URL 中指定了一个 ID，我希望`/main1`和`/main1/:id`请求并行触发。用户在看到他们的内容之前不需要等待菜单加载。

这甚至是处理这种布局的好方法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-24T19:43:20.820

我利用路由提供程序和变量创建了一个可以在任何地方访问的全局对象。然后，您可以使用 ng-show/hide、ng-switch 或 ui-if 来显示或隐藏或切换应用程序的适用部分，以实现多级深度链接。

看看我建造的这个 plunker。它将向您展示如何做到这一点。

[http://plnkr.co/edit/beAm3WRomMafKzx1SoSZ?p=preview](http://plnkr.co/edit/beAm3WRomMafKzx1SoSZ?p=preview)

# c++ - If String 的起始 inc 规范值

> ID：14311734
> 
> 赞同：0
> 
> 时间：2013-01-14T02:47:17.967
> 
> 标签：c++, if-statement

我正在尝试编写一个程序来检查 15-16 位输入并查看它们属于哪个银行。我不熟悉我正在编写的语言（c++），并且想要一些指针。我知道如果没有其余代码，您将无法复制和粘贴，但是发布所有代码会很长。我只需要对几件事有一点建议。

现在我让程序检查输入的长度以及字符串的前两个值是什么。我想知道是否有比我现在更简单的方法。

```
if(cLen==15 && c[0]== 3 && c[1]==4) 
```

和

```
if(cLen==15 && c[0]== 3 && c[1]==7) 
```

因为我只需要找到前两个数字为 34 或 37 的字符串

其次，我需要检查字符串的第一个值是否为 51 到 55

最后我需要检查字符串开头是否包含 6011。

```
string validatebankcc(string c, int cLen, bool& ccOK) {
    string bankcc;
    if(cLen==15 && c[0]== 3 && c[1]==4)
        bankcc = "AmericanExpress";
    if(cLen==15 && c[0]== 3 && c[1]==7)
        bankcc = "AmericanExpress";
    if(cLen==16 && "6011 in beginning")
        bankcc = "Discover";
    if(cLen==16 && c[0]==5 && c[1]==1)
        bankcc="MasterCard";
    if(cLen==16 && c[0]==5 && c[1]==5)
        bankcc="MasterCard";
    if(c[0]==4)
        bankcc="Visa";
    else
        bankcc = "Uknown Bank"
    return bankcc; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T02:59:55.060

```
bool got_length_and_prefix(string s, int desired_length, string desired_prefix) {
  if (s.length() != desired_length) return false;
  if (s.find(desired_prefix) != 0) return false;
  return true;
}

string validatebankcc(string c, int /* cLen useless here*/, bool& ccOK) {
  ccOK = true;

  if (got_length_and_prefix(c, 15, "34")) return "AmericanExpress";
  if (got_length_and_prefix(c, 15, "37")) return "AmericanExpress";
  if (got_length_and_prefix(c, 16, "6011")) return "Discover";
  if (got_length_and_prefix(c, 16, "51")) return "MasterCard";
  if (got_length_and_prefix(c, 16, "55")) return "MasterCard";
  if (c[0] == '4') return "Visa";

  ccOK = false;
  return "Unkown Bank";
} 
```

虽然整体设计很糟糕。将银行名称作为字符串返回很麻烦（这也会导致无用的 ccOK 标志，可以用 BANK_UNKNOWN 或类似的东西代替。将字符串长度与知道它长度的字符串一起传递也闻起来很麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T02:54:46.637

```
if (c.find("6011") != string::npos && c.find("6011") == 0) //"6011" in beginning
{
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T02:55:52.407

首先，您不需要传递字符串长度 - 有一个成员函数`size()`。其次，你应该路过`const &`。最后，您可以使用它`find_first_of`来简化：

因此，您的方法将如下所示：

```
string validate_bank_cc(const string& c, bool& ccOk) 
{
    if((c.size() == 15) && (c.find_first_of("34") == 0))
        return "AmericanExpress";
    //etc...
} 
```

# php - Javascript onsubmit 事件不会更新 html 表单操作属性

> ID：14311741
> 
> 赞同：1
> 
> 时间：2013-01-14T02:48:04.470
> 
> 标签：php, javascript, html, javascript-events

我试图通过在用户按下提交按钮时调用 javascript 函数来更新表单标记的操作属性。action 属性根据在名为“proceed”的选择框中选择的内容进行更新。但是以下脚本不起作用，我不知道为什么。

Javascript：

```
<script type="text/javascript"> 
   function updateAction() {
      <?php
         if (empty($errors) && isset($_POST['submit'])) {
            echo 'document.newStudent.action = document.newStudent.proceed.value';
         } else {
            echo 'document.newStudent.action = "newStudent.php"';
         }
      ?>
   }      
</script>
<form name="newStudent" method="POST" onsubmit="updateAction()"> 
```

选择在我的代码中更靠后的框：

```
<?php //PROCEED
   echo '<tr>';
   echo '<td><p>Proceed To:</p></td>';
   echo '<td>
         <select name="proceed">
         <option value="newSchedule.php">add student\'s schedule</option>
         <option value="newStudent.php">add another student</option>
         <option value="staff.php">staff page</option></td>';
   echo '</tr>';
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T02:51:26.520

你不能在这样的 JavaScript 方法中编写 PHP 代码。您必须了解服务器端脚本和客户端脚本之间的区别。在您的场景中编写一个 JS 代码来完成您的任务。阅读此[客户端与服务器端基础知识](https://stackoverflow.com/questions/7407374/client-side-vs-server-side-basics)，[动态 HTML 页面的 PHP 与 JavaScript](https://stackoverflow.com/questions/6106402/php-vs-javascript-for-dynamic-html-pages)

Javascript 和 PHP 允许网站开发人员创建动态网页。Javascript 是一种客户端语言，因此它在读者的计算机上运行。PHP 是一种服务器端语言，因此它运行在 Web 服务器上。这两种语言结合起来为读者创建交互式网站。这些语言中的每一种都组合在一起，但它们与 Web 浏览器的交互方式不同。

在某些情况下，您可以在 Javascript 函数中编写 PHP，但不能在您的场景中编写。

[阅读更多](https://softwareengineering.stackexchange.com/questions/171203/what-are-the-difference-between-server-side-and-client-side-programming)

# javascript - 如何使用纯 Javascript（无 JQuery）将文本主体动态拆分为两个偶数列？

> ID：14311743
> 
> 赞同：2
> 
> 时间：2013-01-14T02:48:44.580
> 
> 标签：javascript, html, css

我已经尝试了两种似乎不起作用的方法：1）我测量了单词的总数并将其除以 2，但是当单词很长并且并非所有单词的长度都相同时会出现问题，等等。 2）我测量了每个字符的高度（以像素为单位），整个正文的clientHeight，并将文本的总高度除以一个字符的高度，看看一列有多少行，另一列有多少行. 这种方法非常有效，除非需要考虑图像、段落和其他 HTML 标记。

我需要想出一种将图像和其他 HTML 标记考虑在内的新方法，而且我只能使用 HTML、CSS 和 JavaScript（没有 JQuery、JSON、Ajax 等）。如果您有想法/算法，请告诉我！谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:14:10.393

[我在 JSFiddle http://jsfiddle.net/uWUBE/](http://jsfiddle.net/uWUBE/)上为您创建了一个快速而肮脏的“hack”

希望它对您有所帮助，您可以将其编辑为更具动态性。这是一些代码。它基本上循环遍历单词的数量，然后将其添加到您分配给列的字符串中，我根本不是 Javascript 策划者，所以.. 可能有更好的方法。

`

```
//  Get the text
var txt = $("p").text();
//  Split every word
var words = txt.split(" ");
//  Count the amount of words
var amount = words.length
//  Amount of columns
var columnAmount = 2

//  Amount of words in first colum 
var firstColumn = Math.floor(amount / columnAmount);

//  String for first column
var firstColumnTxt = "";
//  String for second column
var secondColumnTxt = "";

//  loop trough the words and add them to the first column
for (var i = 0; i < firstColumn; i++){
    firstColumnTxt =     firstColumnTxt + " " + words[i]; 
}
//  loop trough the words and add them to the second column
for (var i = firstColumn; i < amount; i++){
    secondColumnTxt =   secondColumnTxt + " " + words[i];
}

// Add this to your first column
console.log(firstColumnTxt);
//  Add this to your second column
console.log(secondColumnTxt); 
```

`

# php - 输入类型=“按钮”的值未添加到数据库中

> ID：14311744
> 
> 赞同：0
> 
> 时间：2013-01-14T02:48:55.160
> 
> 标签：php, html, forms, input

我在将`type="button"`表单元素的值添加到 mySql 数据库时遇到问题，我想知道我是否遗漏了什么。

**编辑-**看起来该元素的信息没有从 html 传递到 php，因为它没有回显值。我唯一的问题是这个元素，表单的其余部分正在正确提交。

我将其用于在线测验，该测验根据他们选择的图像构建用户配置文件，并将图像设置为按钮元素的背景图像，并且我试图在直接 html 中执行此操作（而不是将 javascript 与单选按钮或复选框一起使用）。

```
<input type="button" name="quiz_start" value="jeans" style="background: url(files/start1.jpg) no-repeat; width:54px;height:140px; cursor:pointer; border:none; color: transparent; font-size : 0"> 
```

为了提出问题，我已经简化了 php 代码（包括指定用户 ID 并将其限制为仅一个字段）。我还在下面包含了完整的代码。

```
<?php
//Start session & connect to database 
$user_id = 3;   

$qry = "INSERT INTO style(user_id, quiz_start) VALUES('$user_id','$_POST[quiz_start]')";
$result = @mysql_query($qry);      
header("location: page2.html");
exit(); 
?> 
```

完整的查询是：

```
$fieldlist=$vallist='';
foreach ($_POST as $key => $value) { 
 $fieldlist.=$key.',';
 $vallist.='\''.($value).'\',';
}
$fieldlist=substr($fieldlist, 0, -1);
$vallist=substr($vallist, 0, -1);
$fieldlist.=', user_id';
$vallist.=','.$user_id;
$setlist='';
foreach ($_POST as $key=>$value){
$setlist.=$key .'=\''.$value.'\',';
}
$setlist=substr($setlist, 0, -1);  
$result = mysql_query('UPDATE style SET '.$setlist.' WHERE user_id='.$user_id);
if (mysql_affected_rows()==0) {
$result = mysql_query('INSERT INTO style ('.$fieldlist.') VALUES ('.$vallist.')');
}  
header("location: page2.html");
exit();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T03:17:48.143

试试这个：

```
 <?php
//Start session & connect to database 
$user_id = 3;   

$qry = "INSERT INTO style(user_id, quiz_start) VALUES('".$user_id."','".$_POST['quiz_start']."')";
$result = @mysql_query($qry);      
header("location: page2.html");
exit(); 
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T03:32:27.827

看到您无法回显 $_POST['quiz_start'] 这意味着您的值实际上并未设置。这是因为当您在`<input type='button'>`表单中使用类按钮时，实际上并没有像`<input type='submit'>`

一种解决方案是将您的按钮更改为实际的提交和格式......或者您需要使用按钮中的 onClick 调用 javascript 函数，如下所示：

```
<input type="button" onClick="myfunction()"> 
```

有关我在说什么的参考，请查看[这篇文章](https://stackoverflow.com/questions/290215/difference-between-input-type-button-and-input-type-submit)。

如果如您所说，其余的表单值都可以正常提交，但只是按钮值不起作用，则根据您的喜好，您有几种不同的可能解决方案。

1.  使用选择字段或复选框让人们选择可以传递数据的类型。
2.  在 javascript 中提交您的表单，`<input type="button" onClick="myfunction()">`然后在 javascript 中运行您的更新查询。
3.  最后，如果您仍想在 PHP 中运行查询，您可以运行一个 javascript 函数来进行 AJAX 调用以返回 JSON 信息，您可以在页面加载后在其中定义一个 php 变量，然后您可以插入更新查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T05:41:06.533

由于 input type="button" 似乎无法捕获用户的选择，因此我想分享一个非常简单的方法，我想通过单选按钮或仅使用 html 的复选框来执行此操作。

您需要做的就是将输入元素设置为`style="display:none"`，并用标签标签包围图像和输入元素，以便用户可以单击图像上的任意位置来选择元素:-)

```
<label for="quiz_start">
<img src="files/start1.jpg" />
<input style="display:none" type="radio" id="quiz_start" name="quiz_start" value="jeans">    
</label> 
```

# java - 字节码和 ASM

> ID：14311746
> 
> 赞同：0
> 
> 时间：2013-01-14T02:49:23.460
> 
> 标签：java, bytecode, descriptor

[这](https://www.vmth.ucdavis.edu/incoming/Jasmin/ref--33.html)是关于 INVOKESPECIAL 字节码指令的参考。如果我有一个来自 ASM 框架的 AbstractInsnNode 包含 INVOKESPECIAL 指令，我的节点会包含指令的方法规范吗？例如，使用这样的代码：

```
String ins = insn.toString; 
```

如果 insn 有一个 INVOKESPECIAL 指令，我的 ins 会有一个类似“invokespecial java/lang/StringBuffer/()V”的字符串？

我想做的是从 INVOKESPECIAL 指令中获取方法规范并将其存储在字符串中，以便我的程序可以读取它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T03:14:11.240

> 如果我有一个来自 ASM 框架的 AbstractInsnNode 包含 INVOKESPECIAL 指令，我的节点会包含指令的方法规范吗？

AFAIK，是的。它应该是一个实例，[`MethodInsnNode`](http://asm.ow2.org/asm30/javadoc/user/org/objectweb/asm/tree/MethodInsnNode.html)并且该`desc`字段应该是一个方法描述符字符串。

> 如果 insn 有一个 INVOKESPECIAL 指令，我的 ins 会有一个类似“invokespecial java/lang/StringBuffer/()V”的字符串？

实际上，有三个组成部分。方法描述符字符串、方法名称和拥有（在本例中为实际）方法的类的内部名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T02:57:41.330

您想在运行时阅读课程吗？尝试这个

```
 import org.objectweb.asm.ClassReader;
    import org.objectweb.asm.util.ASMifierClassVisitor;

    ClassReader cr = new ClassReader(b);
    cr.accept(new ASMifierClassVisitor(new PrintWriter(System.out)), 0); 
```

# commonjs - 如何使用带有 FatFractal 的 BackReference 语法限制抓取包的结果？

> ID：14311747
> 
> 赞同：2
> 
> 时间：2013-01-14T02:49:40.883
> 
> 标签：commonjs, custom-backend

事实证明，我需要传入一个查询来限制从抓取包返回的结果。我在事件播放列表（grabbag）中有更多的歌曲，而不是与歌曲相关的图片。

传递给grabBagGetAllForQuery 的查询语法是什么？我基本上需要查看手提包中的特定 WNTrack 是否有反向引用。如果不是，则它没有与照片相关联，也不应该包含在返回的结果集中。

```
// FFDL SNIPPET
# 
#
# WNPhoto
#
# event: reference back to EVENT object
# owner: reference back to FFUser
# trackTag: reference back to TRACK
# accessGroup: FFUserGroup
# location: reference back to VENUE object
# image: BYTEARRAY
# previewImage: BYTEARRAY
# thumbnailImage: BYTEARRAY
#
CREATE OBJECTTYPE WNPhoto (event REFERENCE /Events, owner REFERENCE /UserProfiles, trackTag REFERENCE /Tracks, accessGroup REFERENCE /FFUserGroup, image BYTEARRAY, previewImage BYTEARRAY, thumbnailImage BYTEARRAY)

#
# WNTrack
# 
# title: "My Way"
# artist: reference to an object in /Artists
# duration: 297
# albumCover: BLOB
# album: "The Main Event - Live"
#

CREATE OBJECTTYPE WNTrack (title STRING, artist REFERENCE /Artists, duration NUMERIC, albumCover BYTEARRAY, album STRING) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:54:31.467

所以 - 如果我理解正确，你想从手提包中排除任何没有相关照片的物品？

使用：playlistForEvent = ff.grabBagGetAll(evnt.ffUrl, "playlist");

我想我要做的就是按照您目前的状态获取照片：

```
photosForEventsUri = "/ff/resources/Events/" + evnt.guid + "/photos";
photosForEvent     = ff.getArrayFromUri(photosForEventsUri); 
```

然后循环并创建一个引用的轨道数组。

```
for (var i=0;i< photosForEvent.length;i++) {
    var track  = ff.getReferredObject("trackTag", photosForEvent[i]);
    playlistForEvent.push(track);
} 
```

# php - 使用 preg_replace 清理字符串，但允许使用拉丁字符

> ID：14311748
> 
> 赞同：1
> 
> 时间：2013-01-14T02:49:48.613
> 
> 标签：php, regex, character-encoding, preg-replace

我想要做的是清理一个字符串（html标签，额外的空格，引号......），但我想承认拉丁字符，如标点符号和`ñ`字符。我试过这个，但我不知道为什么没有按预期工作：

### 代码

```
//Removing special characters
$str = preg_replace('/[^;\sa-zA-Z0-9áéíóúüñÁÉÍÓÚÜÑ]+/', '', $str);
//Deleting extra white spaces
$str = preg_replace('/\s+/', ' ', $str); 
```

### 例子

```
in:       Película; Films; @Cine; Añoranza; <html></body>foo "bar    ";
out:      pelcula; Films; Cine; Aoranza;  foo bar
expected: Película; Films; Cine; Añoranza; foo bar 
```

### 问题：

我的代码有什么问题，我该如何解决？因为拉丁字符部分是唯一不适用于表达式的部分。

**另外：**如何将两个正则表达式合并为一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T04:15:59.150

`u`如果您使用 UTF-8，则需要使用flag。

```
$str = preg_replace('/[^;\sa-zA-Z0-9áéíóúüñÁÉÍÓÚÜÑ]+/u', '', $str); 
```

确保您的数据库连接是 utf-8 并且您的 php 源文件物理编码是 utf-8 并且一切正常。不过，您的正则表达式不会神奇地成为 html 解析器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-01T21:02:41.977

你也可以使用这个（更好看的）方法：

```
$str = preg_replace('/[^\p{Latin}]+/u', '', $str); 
```

# php - 如何在 phpunit 中进行严格的等号/三等号比较？

> ID：14311750
> 
> 赞同：13
> 
> 时间：2013-01-14T02:50:04.607
> 
> 标签：php, unit-testing, phpunit, equality, triple-equals

如何在 phpunit 中进行 ===/strict 等于比较？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-14T02:50:04.607

使用[assertSame](http://www.phpunit.de/manual/current/en/writing-tests-for-phpunit.html#writing-tests-for-phpunit.assertions.assertSame)。它检查类型和值是否相同。

对于对象，这将检查它们是否“引用相同的对象”（对象标识）。

# ruby-on-rails - 在 rails 3.2.6 中设计路由错误

> ID：14311753
> 
> 赞同：1
> 
> 时间：2013-01-14T02:50:32.260
> 
> 标签：ruby-on-rails, devise, routes

我在这里查看了所有关于设计路由错误的讨论，但找不到解决我问题的解决方案。我的环境如下： - Ruby 1.9.3 - Rails 3.2.6 - Devise 2.2.0

我按照这里的所有步骤操作：[https ://github.com/plataformatec/devise](https://github.com/plataformatec/devise)

这些文件是：

路线.rb：

```
Dealzhunt::Application.routes.draw do

  devise_for :members 

  get "browse/all"

  get "home/index"

  root :to => 'browse#all'

# some other code 
```

成员.rb：

```
class Member < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
     :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me
  # attr_accessible :title, :body
end 
```

耙路线：

```
 new_member_session GET    /members/sign_in(.:format)       devise/sessions#new
              member_session POST   /members/sign_in(.:format)       devise/sessions#create
      destroy_member_session DELETE /members/sign_out(.:format)      devise/sessions#destroy
             member_password POST   /members/password(.:format)      devise/passwords#create
         new_member_password GET    /members/password/new(.:format)  devise/passwords#new
        edit_member_password GET    /members/password/edit(.:format) devise/passwords#edit
                             PUT    /members/password(.:format)      devise/passwords#update
  cancel_member_registration GET    /members/cancel(.:format)        devise/registrations#cancel
         member_registration POST   /members(.:format)               devise/registrations#create
     new_member_registration GET    /members/sign_up(.:format)       devise/registrations#new
    edit_member_registration GET    /members/edit(.:format)          devise/registrations#edit
                             PUT    /members(.:format)               devise/registrations#update
                             DELETE /members(.:format)               devise/registrations#destroy
                  browse_all GET    /browse/all(.:format)            browse#all
                        root        /                                browse#all 
```

对于以下网址：

```
http://localhost:3000/members/sign_in
http://localhost:3000/members/sign_up 
```

我收到以下错误：

```
No route matches {:controller=>"devise/browse", :action=>"all", :category=>0} 
```

我观察到的一个奇怪症状是，如果我修改 root :to => 'home#index'，消息是一样的。我认为它至少会更改为 devise/home 但它仍保留在 /browse

最奇怪的是我开始了一个新的清洁导轨项目，设计确实有效。我想知道是不是因为我运行 rails generate devise:install 时发生了一些错误

真的被这个问题困住了。有人能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:14:06.233

亲爱的主，我找到了问题的原因。Devise 的 link_to 语法有问题。一个临时的解决方案是将所有的link_to修改为

```
<%= link_to "Home", :controller => "/browse", :action => "all" %> 
```

在控制器名称前加上 /。以下是有关该问题的更多详细信息：github.com/plataformatec/devise/issues/471

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T02:59:36.833

你在哪里得到这个错误？即，您正在加载哪个页面？

似乎您有一个链接或其他东西可以路由到控制器“设计/浏览” - 相反，它应该只路由到控制器“浏览”。在 rake 路由生成的输出中

```
browse_all GET    /browse/all(.:format)            browse#all 
```

你会看到你显然有一个`browse`带有`all`方法的控制器。

# php - 在mysql中将多个数据存储到一个主ID中（审计跟踪）

> ID：14311754
> 
> 赞同：0
> 
> 时间：2013-01-14T02:50:35.343
> 
> 标签：php, mysql

![在此处输入图像描述](../Images/f1f0273d65222d5918e2f7f07e2a785b.png)

我以为我在正确的轨道上。我忘记了用户可以进行多项活动。我所做的只是一项活动。我能用这个做什么？我提出了一个可行的解决方案，提出了一个更新活动列而不覆盖文本的 sql 语句。但这似乎很愚蠢。很确定有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T03:06:30.443

[http://www.c-sharpcorner.com/uploadfile/nipuntomar/normalization-and-its-types/](http://www.c-sharpcorner.com/uploadfile/nipuntomar/normalization-and-its-types/)

您正在尝试做的事情称为数据库规范化。您需要针对一条特定记录的元数据。所以只是“瞥一眼”你的问题。制作一个用于存储的表，X，并且对要描述的数据记录有一个外键约束。在这种情况下，它看起来像 users 表，然后在这个 X 表中有字段，它存储与 users 表相关的“多数据”类型。

表

```
users -- table
id
username
password
status
updation_date
creation_date

x -- table
id
users_id -- foreign key constraint
part1_of_multiple_data -- meta log data you are wanting
part2_of_multiple_data -- meta log data you are wanting
part3_of_multiple_data -- add more fields as you need in the table.
updation_date
creation_date 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:30:05.847

我做了一些调整，但我认为这将改善您的数据库。[通过http://sqlfiddle.com/#!2/c6546/9/0](http://sqlfiddle.com/#!2/c6546/9/0)查看此操作

```
CREATE TABLE workers
    (
     id_workers int primary key, 
     username varchar(30), 
     type varchar(30)
    );

CREATE TABLE activities
    (
     id_activities int auto_increment primary key, 
     activity varchar(30)
    );

CREATE TABLE timesheet
    (
     id_timesheet int auto_increment primary key, 
     id_workers int,
     id_activities int,
     start_time datetime,
     end_time datetime
    );

INSERT INTO workers
(id_workers, username, type)
VALUES
('1','Danice', 'Administrator'),
('2','Micheal', 'Administrator');

INSERT INTO activities
(activity)
VALUES
('Edit Employee'),
('Edit Employee Information'),
('Edit Department');

INSERT INTO timesheet
(id_workers, id_activities,start_time, end_time)
VALUES
('1', '1', '2013-03-14 13:15:00','2013-03-14 13:20:00'),
('2', '2', '2013-03-14 13:00:00','2013-03-14 14:00:00'),
('1', '2', '2013-03-14 13:21:00','2013-03-14 13:23:00'),
('1', '3', '2013-03-14 13:24:00','2013-03-14 13:45:00');

SELECT a.id_activities, w.username, w.type, a.activity, t.start_time, t.end_time
FROM (timesheet AS  t  LEFT JOIN activities AS a ON t.id_activities = a.id_activities ) LEFT JOIN workers AS w ON t.id_workers = w.id_workers; 
```

顺便说一句，如果您想从数据库布局中获得良好的概览，您可以使用 MYSQL 工作台。在工作台内设置模式以供编码时参考。或者只使用笔和纸。;-)

关于您的审计跟踪，您可以通过在时间表中添加额外的列（例如审计跟踪），让工作人员可以选择从时间表中删除那里的活动。默认情况下，audittrail 列设置为 0，如果工作人员删除了他的条目，则为该列指定值 1。然后向您添加 SELECT 查询“WHERE audittrail = 0”以显示所有时间表条目。如果您需要审计跟踪，则省略 WHERE 子句。

# android - 来自应用程序的 GCM POST

> ID：14311757
> 
> 赞同：1
> 
> 时间：2013-01-14T02:51:38.217
> 
> 标签：android, google-cloud-messaging

我正在尝试使用 Google Cloud Messaging 在有新数据要从服务器接收时通知用户。使用 GCM 发送消息定义为：

`To send a message, the application server issues a POST request to https://android.googleapis.com/gcm/send.`

是否可以从 android 应用程序发送这个 HTTP POST 请求？我尝试使用我一直成功使用的方法来实现这一点，以 POST 到我由 MongoLab 托管的服务器。我的尝试如下：

```
 input_json.put("registration_ids", RegistrationIDs);
    input_json.put("data", data);
    param = new StringEntity(input_json.toString());

    HttpParams httpParams = new BasicHttpParams();
    int some_reasonable_timeout = (int) (20 * DateUtils.SECOND_IN_MILLIS);
    HttpConnectionParams.setConnectionTimeout(httpParams, some_reasonable_timeout);
    HttpConnectionParams.setSoTimeout(httpParams, some_reasonable_timeout);

    HttpClient httpClient = new DefaultHttpClient(httpParams);
    HttpPost request = new HttpPost(url);
    request.setEntity(param);
    request.setHeader("Content-type", "application/json");
    request.setHeader("Authorization", API_KEY);
    HttpResponse response = httpClient.execute(request);

    StatusLine status = response.getStatusLine();
    if (status.getStatusCode() == HttpStatus.SC_OK){
        ResponseHandler<String> responseHandler = new BasicResponseHandler();
        result = responseHandler.handleResponse(response);
    } 
```

我没有收到任何 HTTP 错误或来自 gcm 服务器的响应，所以我真的不知道从这里去哪里。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-01T15:00:06.547

是否可以从 android 应用程序发送这个 HTTP POST 请求？

这就是我在 GCMintent 类中发布有关用户注册的所有相关设备信息的方式。希望这有助于回答您的问题，我不是 100% 您正在尝试做的事情。

```
@Override
protected void onRegistered(Context ctx, String regId) {
    // send regId to your server
    sendRegistrationIdToServer(regId, "01");    
}

public void sendRegistrationIdToServer(String registrationId, String func) {
    //Send the reg info to server
    Log.d(TAG, "Sending registration ID to my application server");
    String deviceId = Secure.getString(getContentResolver(), Secure.ANDROID_ID);
    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost(URL);
    Context context = getApplicationContext();

    try {
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
        nameValuePairs.add(new BasicNameValuePair("deviceid", deviceId));
        nameValuePairs.add(new BasicNameValuePair("func", func));
        nameValuePairs.add(new BasicNameValuePair("registrationid",registrationId));
        nameValuePairs.add(new BasicNameValuePair("app", GetPackageName()));

        post.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = client.execute(post);
        BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));

        String line = "";
        while ((line = rd.readLine()) != null) {
            Log.e("HttpResponse", line);
        }

    } catch (IOException e) {
        Log.e("HttpResponse", "broke");
    }
} 
```

它可以很容易地适应发送 Json。

# assembly - 简单内核无法在 GRUB 中启动

> ID：14311761
> 
> 赞同：24
> 
> 时间：2013-01-14T02:52:25.257
> 
> 标签：assembly, kernel, qemu, osdev, grub

我正在从[OSDev.org](http://osdev.org)学习一点操作系统开发。我有一个内核，我正在尝试使用 qemu 在 GRUB Legacy (0.97) 中启动。但是，当我输入时`kernel 200+9`，我会收到消息

```
[Multiboot-elf, <0x100000:0x80:0x4008>(bad), entry=0x10000c] 
```

这是我所期望的，除了（坏的）部分。如果我`boot`现在输入 GRUB 就会挂起。

我认为数字 0x100000、0x44、0x4008 分别代表 .text 段起始地址、.bss 起始地址和 .bss 段大小。我认为这是因为`objdump -h`在内核映像上运行会给出以下输出：

```
kernel.bin:     file format elf32-i386

Sections:
Idx Name          Size      VMA       LMA       File off  Algn
  0 .text         00000044  00100000  00100000  00001000  2**4
                  CONTENTS, ALLOC, LOAD, READONLY, CODE
  1 .bss          00004008  00100044  00100044  00001044  2**2
                  ALLOC 
```

所以你可以看到我提到的数字几乎匹配。问题是 .bss 的开头不是 100044，而是 44。我认为这就是 GRUB 说不好的原因。我的内存（内存不足）中不能有低于 1 MB 的部分。但是 objdump 告诉我我的部分高于该阈值，所以我不知道出了什么问题。无论如何，我将在下面粘贴我的代码，它相对较短。尽管如果您以前做过操作系统开发，我的问题可能是非常基本的，所以代码可能是无关的。

```
;loader.s - contains the multiboot header for grub and calls the main kernel method

global loader                           ; making entry point visible to linker
global magic                            ; we will use this in kmain
global mbd                              ; we will use this in kmain

extern kmain                            ; kmain is defined in kmain.cpp

; setting up the Multiboot header - see GRUB docs for details
MODULEALIGN equ  1<<0                   ; align loaded modules on page boundaries
MEMINFO     equ  1<<1                   ; provide memory map
FLAGS       equ  0x03;MODULEALIGN | MEMINFO  ; this is the Multiboot 'flag' field
MAGIC       equ  0x1BADB002             ; 'magic number' lets bootloader find the header
CHECKSUM    equ -(MAGIC + FLAGS)        ; checksum required

section .text

loader:

align 4
    dd MAGIC
    dd FLAGS
    dd CHECKSUM

; reserve initial kernel stack space
STACKSIZE equ 0x4000                    ; that's 16k.

    mov  esp, stack + STACKSIZE         ; set up the stack
    mov  [magic], eax                   ; Multiboot magic number
    mov  [mbd], ebx                     ; Multiboot info structure

    call kmain                          ; call kernel proper

    cli
.hang:
    hlt                                 ; halt machine should kernel return
    jmp  .hang

section .bss

align 4
stack: resb STACKSIZE                   ; reserve 16k stack on a doubleword boundary
magic: resd 1
mbd:   resd 1 
```

.

```
// kernel.c - Contains the main kernel method

void kmain() {
  extern unsigned int magic;

  if (magic != 0x2BADB002) {
    // Something went wrong
  }

  volatile unsigned char *videoram = (unsigned char *) 0xB800;
  videoram[0] = 65;
  videoram[1] = 0x07;
} 
```

以下是我的自定义链接器脚本：

```
ENTRY (loader)

SECTIONS {
    . = 0x00100000;

    .text ALIGN (0x1000) : {
        *(.text)
    }

    .rodata ALIGN (0x1000) :
    {
        *(.rodata*)
    }

    .data ALIGN (0x1000) :
    {
        *(.data)
    }

    .bss :
    {
        sbss = .;
        *(COMMON)
        *(.bss)
        ebss = .;
    }

    /DISCARD/ : {
        *(.eh_frame)
        *(.comment)
    }
} 
```

最后，我使用以下几行构建内核：

```
nasm -f elf -o loader.o loader.s
gcc -c -o kernel.o kernel.c
ld -T linker.ld -o kernel.bin loader.o kernel.o
cat stage1 stage2 pad kernel.bin > floppy.img 
```

其中 stage1 和 stage2 是来自 GRUB Legacy 的文件，而 pad 是任何 750 字节的文件（因此 stage1+stage2+pad 的文件大小为 102400 字节或 200 个块，这就是我使用内核 200+9 启动的原因）。

最后，我在 qemu 中运行内核：

```
qemu-system-x86_64 -fda floppy.img 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-14T15:05:28.620

+1 for nice question with all the details, thank you.

At least on my machine the generated `kernel.bin` comes out as 4869 bytes, which only fits in 10 sectors not 9\. Also, the VGA text memory is at `0xb8000` not `0xb800` (one more zero - `0xb800` is the real mode segment, has to be multiplied by 16). With those little adjustments it works fine here.

# javascript - HTML5 Geolocation - 在特定位置显示内容

> ID：14311768
> 
> 赞同：0
> 
> 时间：2013-01-14T02:54:03.593
> 
> 标签：javascript, jquery, html, geolocation

我正在尝试掌握 HTML5 中的地理定位功能。

我看到了很多“找到你的位置”的帮助，但我正在努力让我的网站上的内容（在这种情况下是视频）只有在用户位于特定位置、特定范围内时才可用坐标

很感谢任何形式的帮助，

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:23:10.530

使用您找到的众多“找到您的位置”教程之一（例如，使用[Geolocation 找到您的位置](http://html5doctor.com/finding-your-position-with-geolocation/)），使用`watchPosition`，当它是您想要的位置时（无论如何您想弄清楚）然后显示您的内容。

哦，地理定位不是 HTML5 的一部分，它是一个单独的规范。

# php - 从字符串中删除所有实例

> ID：14311769
> 
> 赞同：1
> 
> 时间：2013-01-14T02:54:16.183
> 
> 标签：php, regex

我有一个字符串：

```
[startstring]hello = guys[endstring] hello guys [startstring]jerk = you[endstring] man this is good!!! 
```

我想删除 and 之间`[startstring]`的所有内容`[endstring]`，所有匹配项，并从字符串中删除`[startstring]`and 。`[endstring]`所以结果会是：

```
hello guys  man this is good!!! 
```

删除的内容将是：

**[startstring]hello = guy[endstring]**大家好**[startstring]jerk = you[endstring]**伙计，这很好！！！

明白了吗？

我想回显结果的东西，没有`[startstring]`and的`[endstring]`东西，如上所示。:)

希望我很清楚。:-)

我将如何在 PHP 中完成此任务？这会涉及某种形式`RegEx`吗？你能提供一个示例代码吗？

提前非常感谢！:-)

**编辑：**可以修改或使用此代码来完成任务吗？

```
preg_match_all('/\[startstring\](.*?)\[endstring\]/s', $input, $matches); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T03:08:10.237

要实现这一点，您只需要更改方法名称，您应该使用[preg_replace](http://php.net/manual/en/function.preg-replace.php)代替`preg_match_all`：

```
preg_replace ($pattern, $replacement, $subject) 
```

搜索主题以匹配模式并用替换替换它们。

### 代码

```
$input = "[startstring]hello = guys[endstring] hello guys [startstring]jerk = you[endstring] man this is good!!!";
$output = preg_replace('/\[startstring\](.*?)\[endstring\]/s', '', $input); 
```

### 输出

> 你好，伙计们，这很好！！！

# python - Python 二进制转换

> ID：14311776
> 
> 赞同：0
> 
> 时间：2013-01-14T02:54:55.107
> 
> 标签：python, binary

我正在尝试将文件中的一些二进制输出转换为不同的类型，但我一直看到奇怪的东西。

例如，我有：

```
value = '\x11' 
```

如果你这样做

```
bin(ord(value)) 
```

你得到输出

```
'0b10001' 
```

而我希望得到

```
'0b00010001' 
```

我基本上是在尝试读取 32 字节的标头，将其转换为 1 和 0，这样我就可以获取具有不同含义的各种位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T03:00:52.687

为什么不只使用位运算符？

```
def is_bit_set(i, x):
    """Check if the i-th bit in x is set"""
    return x & (1 << i) > 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T07:05:38.910

要获得所需的输出，请尝试：

```
"0b{:08b}".format(ord(value)) 
```

如果您关心效率，建议使用本机二进制表示而不是文字（字符串）二进制表示，因为按位运算更加紧凑和高效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T07:07:04.663

`format(ord('\x11'), '08b')`会得到你`00010001`，这应该足够接近你想要的。

# html - 如何在我的 html 中添加一个小数字？

> ID：14311778
> 
> 赞同：4
> 
> 时间：2013-01-14T02:55:30.473
> 
> 标签：html, css

我很难做到这一点，可能是因为我不知道该怎么称呼它。但是客户希望我在句子末尾的某些文本中放一个小数字 1 - 这表明他们应该在页面底部找到小 1 以阅读有关该特定句子的更多详细信息。你在容器和补充标签上经常看到这种类型的东西。这可以用html完成吗？如果您需要澄清，请告诉我。

有点像这样，除了一个小的，而不是一个 astrick：

*这些陈述未经食品和药物管理局评估。本产品不用于诊断、治疗、治愈或预防任何疾病。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-14T02:58:48.510

你一定在寻找上标。

```
<p>This is <sub>subscript</sub> text.</p>

<p>This is <sup>superscript</sup> text.</p> 
```

# 在实践中：

这是[下标]文本。

这是^(上标)文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T03:28:14.460

好吧，我认为这个问题与引用资源有关。您可以执行以下操作：

*   在句尾你可以写下引用的编号（引用大部分时间位于网页底部），实际上是一个 HTML 锚标记：

    ```
    The sentence goes here.<a href="#1"><sub>1</sub></a> 
    ```

*   然后在屏幕底部你可以这样写参考：

    ```
    <a name="1">The reference details go here.</a> 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T05:38:20.530

使用字符“¹” U+00B9 SUPERSCRIPT ONE。如果您不知道如何在您的创作环境中输入它（在 Windows 中，您通常可以通过 Alt 0185 输入它），您可以使用实体引用`&sup1;`。

与`<sup>1</sup>`（大多数人会使用的）不同，这意味着使用由印刷师设计的字符来适应字体。笔画宽度正确，垂直位置也正确。除其他外，使用`sup`往往会弄乱行间距。

但是，脚注引用在 HTML 文档中效果不佳。尤其是如果您想将引用作为脚注本身的链接，那么一个很小的上标将非常糟糕的可用性和可访问性。像“[1]”这样的表达式要好得多。

# javascript - (新日期('2012-12-01')).getMonth() === 10？

> ID：14311779
> 
> 赞同：6
> 
> 时间：2013-01-14T02:55:35.840
> 
> 标签：javascript, date, datetime

`(new Date('2012-12-01')).getMonth()`is`10`而不是`11`(`getMonth`是 0-indexed)。我已经在 Firefox、Chrome 和 Node.js 上进行了测试。为什么会这样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T03:31:01.987

您遇到时区问题。您的 JS 引擎将字符串解释为 UTC，因为它没有进一步指定。根据（由 使用）的[规范`Date.parse`](http://es5.github.com/#x15.9.4.2)[`new Date`](http://es5.github.com/#x15.9.3.2)：

> 根据字符串的内容，字符串可能被解释为本地时间、UTC 时间或其他时区的时间。该函数首先尝试根据日期时间字符串格式（[15.9.1.15](http://es5.github.com/#x15.9.1.15)）中调用的规则解析字符串的格式。如果字符串不符合该格式，则函数可能会退回到任何特定于实现的启发式或特定于实现的日期格式。

在您的时区，日期时间是`Nov 30 2012 19:00:00 GMT-0500`- 11 月。使用[`.getUTCMonth()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/getUTCMonth)，你会得到十二月。但是，永远不要相信`Date.parse`，每个浏览器的做法都不同。因此，如果您不在 Node.js 等受限环境中，您始终应该解析您的字符串（例如使用正则表达式）并将其提供给`new Date(Date.UTC(year, month, date, …))`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T03:15:09.803

至少对于[Firefox 的情况，](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date) [RFC2822](https://www.rfc-editor.org/rfc/rfc2822)声明[日期规范](https://www.rfc-editor.org/rfc/rfc2822#section-3.3)必须用[折叠空格](https://www.rfc-editor.org/rfc/rfc2822#section-3.2.3)分隔。尝试`(new Date('2012 12 01')).getMonth();`使用 of`-`作为分隔符似乎没有定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T03:05:23.520

错误是由于在第 01 天前加上 0 引起的。不知道为什么会这样，但是如果您删除 1 之前的零，它会为您提供正确的月份 (11)。

此外，如果这意味着什么，它会在 10 月开始给出错误的月份。

短期修复，使用 1 而不是 01。

# android - google android api V2 缓存在哪里？

> ID：14311785
> 
> 赞同：0
> 
> 时间：2013-01-14T02:56:25.560
> 
> 标签：android, caching, google-maps-android-api-2

我在冲浪时发现了 google map android api V2 保存缓存。我想知道它在设备上的位置以便重复使用。任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:42:03.910

似乎缓存位于外部 sdcard 上的目录“Android/data/yourPackageApplication/cache”中。

如果您找到管理此缓存的方法...

# image - nivo 滑块图像链接和 IE 不起作用

> ID：14311786
> 
> 赞同：-1
> 
> 时间：2013-01-14T02:56:35.900
> 
> 标签：image, internet-explorer, hyperlink, slider, nivo-slider

嗨，我已经尝试了几个小时来让滑块内的图像链接在 IE 9 中工作，它们在 Chrome 中工作正常，任何人都可以帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T17:48:03.343

是的，这是众所周知的和有记录的。我发现你的问题有同样的问题，这为我解决了这个问题：

```
.nivoSlider a {
  border:0;
  display:block;
  background-color: #fff;
  filter:alpha(opacity=0);
  opacity: 0;
  -webkit-opacity:0;
  -moz-opacity:0;
  -khtml-opacity:0;
} 
```

# jquery - 使用 jQuery 更改 html 内容时出错

> ID：14311787
> 
> 赞同：1
> 
> 时间：2013-01-14T02:56:43.077
> 
> 标签：jquery

这里有什么问题？我想用其他内容替换 ul 内容

```
$('#carouselselectitem1').click(function() {
$('#foo2').html('<li><div id="lines"></div><div id="tittle">2 PROGRAMEO, LONDRES</div><div id="image"></div><div id="text">LOREM IPSUM XHTML+CSS3 HTTP://WWW.url.com/</div></li>');
}); 
```

[http://jsfiddle.net/Txyse/](http://jsfiddle.net/Txyse/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T03:01:00.590

您的小提琴包括 mootools 而不是 jQuery。

你的小提琴中有一个换行符。删除它或`\`在字符串的第一行末尾添加 a ，如下所示：（注意下面`\`第二行代码的末尾）

```
$('#carouselselectitem1').click(function() {
  $('#foo2').html('<li><div id="lines"></div>\
                  <div id="tittle">TITTLE2</div><div id="image"></div><div id="text">TEXT2</div></li>');
                  }); 
```

[工作演示](http://jsfiddle.net/Txyse/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T03:05:32.440

试试这个，

```
$('#carouselselectitem1').click(function() {
  $('#foo2').html('<li><div id="lines"></div><div id="tittle">TITTLE2</div><div id="image"></div><div id="text">TEXT2</div></li>');
   }); 
```

[http://jsfiddle.net/Txyse/8/](http://jsfiddle.net/Txyse/8/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T03:05:17.193

你的小提琴有很多问题。

1.  未加载 jQuery
2.  您的 Javascript 在字符串中有换行符
3.  文档加载后需要附加点击事件

这个[小提琴](http://jsfiddle.net/Txyse/2/)有效

```
$(document).ready( function(){
  $('#carouselselectitem1').click(function() {
        $('#foo2').html('<li><div id="lines"></div><div id="tittle">TITTLE2</div><div id="image"></div><div id="text">TEXT2</div></li>');
  });
}); 
```

# ruby-on-rails - 编写“新”方法时不断收到“找不到没有 ID 的 Model_name”

> ID：14311789
> 
> 赞同：0
> 
> 时间：2013-01-14T02:57:22.017
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

作为背景，我目前有三个模型，`School`和`Course`，`Section`它们都是一对多的关系（学校`has_many`课程和课程`has_many`部分，对应`belongs_to`关系也建立在模型中）。我还有以下资源（稍后会设置排除项）：

```
 resources :schools do
    resources :courses
  end
  resources :sections #not part of the nest 
```

虽然`sections`可以作为嵌套资源的一部分工作，但我保留了它，因为[Rails 指南](http://guides.rubyonrails.org/routing.html)强烈建议嵌套只有一层深。

所以，我的麻烦在于创建一个新部分（In `SectionsController`），并通过`course_id`

```
 def new
    @course = Course.find(params[:id]) #this line results in an error
    @section = @course.sections.new
  end 
```

第一行总是会引发“找不到没有 ID 的课程”错误，尽管尝试了使用 :id、:course_id 等的各种不同组合，但我无法通过该错误。由于`Course`是嵌套资源，是否存在我还缺少什么？谢谢你的帮助！

运行时`rake routes`，输出如下：

```
 sections  GET    /sections(.:format)                            sections#index
                   POST   /sections(.:format)                            sections#create
      new_section  GET    /sections/new(.:format)                        sections#new
     edit_section  GET    /sections/:id/edit(.:format)                   sections#edit
          section  GET    /sections/:id(.:format)                        sections#show
                   PUT    /sections/:id(.:format)                        sections#update
                   DELETE /sections/:id(.:format)                        sections#destroy
    school_courses GET    /schools/:school_id/courses(.:format)          courses#index
                   POST   /schools/:school_id/courses(.:format)          courses#create
 new_school_course GET    /schools/:school_id/courses/new(.:format)      courses#new
edit_school_course GET    /schools/:school_id/courses/:id/edit(.:format) courses#edit
     school_course GET    /schools/:school_id/courses/:id(.:format)      courses#show
                   PUT    /schools/:school_id/courses/:id(.:format)      courses#update
                   DELETE /schools/:school_id/courses/:id(.:format)      courses#destroy
           schools GET    /schools(.:format)                             schools#index
                   POST   /schools(.:format)                             schools#create
        new_school GET    /schools/new(.:format)                         schools#new
       edit_school GET    /schools/:id/edit(.:format)                    schools#edit
            school GET    /schools/:id(.:format)                         schools#show
                   PUT    /schools/:id(.:format)                         schools#update
                   DELETE /schools/:id(.:format)                         schools#destroy
              root        / 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T03:14:25.257

由于您的课程与学校嵌套，请试试这个

你的模型应该有

```
class School < ActiveRecord::base
  has_many :courses
end

class Course < ActiveRecord::base
  belongs_to :school
end

def new
  school = School.find(params[:school_id])
  @course = school.courses.new
  #your code 
end 
```

您可以通过运行来了解有关此路由的更多信息

```
rake routes 
```

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T08:29:00.633

您需要在新部分请求中包含这些参数

```
{:School_id=> some_id, :course_id=>some_id} 
```

这样您就可以将它们与课程部分绑定

在节控制器

```
 def new
    @school = School.find(params[:school_id])
    @course = @school.courses.where(:id=>params[:course_id]).first
    @section = @course.sections.new
  end 
```

希望这会治愈:)

# php - 连接三个不同的表

> ID：14311794
> 
> 赞同：1
> 
> 时间：2013-01-14T02:57:59.817
> 
> 标签：php, mysql, sql, select

我正在尝试获取两个表的计数值并使用成员 ID 作为键来计算其他表的行数，到目前为止我有这段代码，但它为 comCount 输出一个大值，为 chatCount 输出空值。这是我的代码

```
SELECT members.*
, comments.commenter_id
, cb.user_id
, COUNT(comments.comment) AS comCount
, COUNT(cb.message) AS chatCount
FROM members 
INNER JOIN comments ON members.id = comments.commenter_id
INNER JOIN chat_box AS cb ON members.id = cb.user_id
WHERE members.id ='$profileId'` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T03:05:21.110

```
SELECT  members.* , 
        a.commenter_id , 
        b.user_id , 
        a.totalComment , 
        b.totalChat
FROM    members 
        INNER JOIN 
        (
            SELECT commenter_id, COUNT(*) totalComment
            FROM comments
            GROUP BY commenter_id
        ) a ON members.id = a.commenter_id
        INNER JOIN 
        (
            SELECT user_id, COUNT(*) totalChat
            FROM chat_box 
            GROUP BY user_id            
        ) b  ON members.id = b.user_id
WHERE   members.id = '$profileId' 
```

作为旁注，`SQL Injection`如果值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用 PreparedStatements，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T03:11:05.893

```
SELECT members.*
, comments.commenter_id
, cb.user_id
,(select  COUNT(1) from comments where commenter_id = members.id) AS comCount
,(select count(1) from chat_box where user_id = members.id) AS chatCount
FROM members 
WHERE members.id ='$profileId'` 
```

# php - 如何在magento中按大小对购物车进行排序

> ID：14311795
> 
> 赞同：0
> 
> 时间：2013-01-14T02:58:06.050
> 
> 标签：php, magento, shopping-cart

我的购物车中有以下代码

```
$cartitems = Mage::getModel('sales/quote_item')->getCollection()
    ->setQuote($quote)
    ->addFieldToSelect('*')
    ->addOrder('name', 'asc'); 
```

它对项目进行排序，但只对一半进行排序，目录中的所有产品都是使用尺寸属性的可配置产品，因此在对产品进行排序时，它们的尺寸不是，我想按名称排序，然后按大小排序（有大小，最好按他们的立场）

我试过添加`addOrder('size', 'asc')`，但说找不到该名称的字段是行不通的（我知道attribute_code是正确的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T06:17:40.763

你必须去**属性**管理，选择你的**尺寸**属性。并将“用于在产品列表中排序”设置为**是**

之后，新属性应出现在“系统配置 -> 目录 -> 前端 -> 产品列表排序方式”中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T03:32:55.497

我已经能够在我的代码中做出妥协，但我仍然不知道如何按我的尺寸属性对购物车进行排序属于简单产品的相同 sku（而名称来自可配置）

自然，如果我创建一个较小的尺寸但 sku 甚至大于最大尺寸（我的 sku 都是数字），这将打破，但这是我能做的最好的

# android - 方法无法检索值

> ID：14311798
> 
> 赞同：0
> 
> 时间：2013-01-14T02:58:26.053
> 
> 标签：android, android-adapter

我正在尝试传递我的书刊编号

```
UrlPagerAdapter pagerAdapter = new UrlPagerAdapter(this,items,issue); 
```

然后在我的 UrlPagerAdapter 类中，我在某些方法中记录了问题值，以测试我的值是否已成功通过，是的，确实如此。但是当我尝试创建自己的方法来记录值​​时，它不起作用！

```
public int getIssueNumber(){
    Log.d("issue - getIssueNumber()", String.valueOf(issue));
    return issue;
} 
```

这是我的 urlpageradapter 类

```
public class UrlPagerAdapter extends PagerAdapter {

    private List<String> mResources;
    private Context mContext;
    private int issue;

    public UrlPagerAdapter(Context context, List<String> resources, int issue){
        this.mResources = resources;
        this.mContext = context;
        this.issue = issue;
    }

    @Override
    public void setPrimaryItem(ViewGroup container, int position, Object object) {
        super.setPrimaryItem(container, position, object);
        ((GalleryViewPager)container).mCurrentView = ((UrlTouchImageView)object).getImageView();
    }

    @Override
    public Object instantiateItem(View collection, int position){
        UrlTouchImageView iv = new UrlTouchImageView(mContext);
        iv.setUrl(mResources.get(position));
        iv.setLayoutParams(new Gallery.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.FILL_PARENT));
        ((ViewPager) collection).addView(iv, 0);
        return iv;

    }

    @Override
    public void destroyItem(View collection, int position, Object view){
        ((ViewPager) collection).removeView((View) view);
    }

    @Override
    public int getCount(){
        return mResources.size();
    }

    public int getIssueNumber(){
        return issue;
    }

    @Override
    public boolean isViewFromObject(View view, Object object){
        return view.equals(object);
    }

    @Override
    public void finishUpdate(View arg0){
    }

    @Override
    public void restoreState(Parcelable arg0, ClassLoader arg1){
    }

    @Override
    public Parcelable saveState(){
        return null;
    }

    @Override
    public void startUpdate(View arg0){
    }

} 
```

在另一堂课中，我尝试测试该方法。我的应用程序崩溃了！

```
public class UrlTouchImageView extends RelativeLayout {
    protected ProgressBar mProgressBar;
    protected TouchImageView mImageView;

    protected Context mContext;
    UrlPagerAdapter pagerAdapter;
    String[] mImageIds;
    ArrayList<String>  mStringList= new ArrayList<String>();

    public UrlTouchImageView(Context ctx)
    {
        super(ctx);
        mContext = ctx;

        init();

    }
    public UrlTouchImageView(Context ctx, AttributeSet attrs)
    {
        super(ctx, attrs);
        mContext = ctx;
        init();
    }
    public TouchImageView getImageView() { return mImageView; }

    protected void init() {

        int v = pagerAdapter.getIssueNumber();
        Log.d(" v - ImageLoadTask", String.valueOf(v));

        mImageView = new TouchImageView(mContext);
        LayoutParams params = new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
        mImageView.setLayoutParams(params);
        this.addView(mImageView);
        mImageView.setVisibility(GONE);

        mProgressBar = new ProgressBar(mContext, null, android.R.attr.progressBarStyleHorizontal);
        params = new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
        params.addRule(RelativeLayout.CENTER_VERTICAL);
        params.setMargins(30, 0, 30, 0);
        mProgressBar.setLayoutParams(params);
        mProgressBar.setIndeterminate(true);
        this.addView(mProgressBar);
    }

    public void setUrl(String imageUrl)
    {
        new ImageLoadTask().execute(imageUrl);
    }
    //No caching load
    public class ImageLoadTask extends AsyncTask<String, Integer, Bitmap>
    {
        //RETRIEVES LINK FROM GALLERYACTIVITY
        //READ MNT/SDCARD/....

        @Override
        protected Bitmap doInBackground(String... strings) {
            //String url = strings[0];

            Bitmap bm = null;
            try {
            File strPath = new File(Environment.getExternalStorageDirectory() + "/issue0");
            int lists = strPath.listFiles().length; 
            Log.d("number of items in array ",String.valueOf(lists));

            File yourDir = new File(strPath, "");
            for (File f : yourDir.listFiles()) {
                if (f.isFile())
                {
                    String name = f.getName();
                    String v = strPath + "/" + name;
                    mStringList.add(v);
                }
            }

            mImageIds = new String[mStringList.size()];
            mImageIds = mStringList.toArray(mImageIds);

                bm = BitmapFactory.decodeFile(mImageIds[0]);

            } catch (Exception e) {
                e.printStackTrace();
            }

            return bm;
        }

        @Override
        protected void onPostExecute(Bitmap bitmap) {
            mImageView.setImageBitmap(bitmap);
            mImageView.setVisibility(VISIBLE);
            mProgressBar.setVisibility(GONE);
        }
    }
} 
```

这是我的 logcat 输出

```
01-14 10:59:45.130: E/AndroidRuntime(21843): FATAL EXCEPTION: main
01-14 10:59:45.130: E/AndroidRuntime(21843): java.lang.NullPointerException
01-14 10:59:45.130: E/AndroidRuntime(21843):    at com.example.touchview.UrlTouchImageView.init(UrlTouchImageView.java:67)
01-14 10:59:45.130: E/AndroidRuntime(21843):    at com.example.touchview.UrlTouchImageView.<init>(UrlTouchImageView.java:53)
01-14 10:59:45.130: E/AndroidRuntime(21843):    at com.example.gallery.UrlPagerAdapter.instantiateItem(UrlPagerAdapter.java:58)
01-14 10:59:45.130: E/AndroidRuntime(21843):    at android.support.v4.view.PagerAdapter.instantiateItem(PagerAdapter.java:110)
01-14 10:59:45.130: E/AndroidRuntime(21843):    at android.support.v4.view.ViewPager.addNewItem(ViewPager.java:801)
01-14 10:59:45.130: E/AndroidRuntime(21843):    at android.support.v4.view.ViewPager.populate(ViewPager.java:930)
01-14 10:59:45.130: E/AndroidRuntime(21843):    at android.support.v4.view.ViewPager.populate(ViewPager.java:881)
01-14 10:59:45.130: E/AndroidRuntime(21843):    at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1366)
01-14 10:59:45.130: E/AndroidRuntime(21843):    at android.view.View.measure(View.java:12723)
01-14 10:59:45.130: E/AndroidRuntime(21843):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
01-14 10:59:45.130: E/AndroidRuntime(21843):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1369)
01-14 10:59:45.130: E/AndroidRuntime(21843):    at android.widget.LinearLayout.measureHorizontal(LinearLayout.java:1017)
01-14 10:59:45.130: E/AndroidRuntime(21843):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:555)
01-14 10:59:45.130: E/AndroidRuntime(21843):    at android.view.View.measure(View.java:12723)
01-14 10:59:45.130: E/AndroidRuntime(21843):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
01-14 10:59:45.130: E/AndroidRuntime(21843):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
01-14 10:59:45.130: E/AndroidRuntime(21843):    at android.view.View.measure(View.java:12723)
01-14 10:59:45.130: E/AndroidRuntime(21843):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:812)
01-14 10:59:45.130: E/AndroidRuntime(21843):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
01-14 10:59:45.130: E/AndroidRuntime(21843):    at android.view.View.measure(View.java:12723)
01-14 10:59:45.130: E/AndroidRuntime(21843):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
01-14 10:59:45.130: E/AndroidRuntime(21843):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
01-14 10:59:45.130: E/AndroidRuntime(21843):    at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2092)
01-14 10:59:45.130: E/AndroidRuntime(21843):    at android.view.View.measure(View.java:12723)
01-14 10:59:45.130: E/AndroidRuntime(21843):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1064)
01-14 10:59:45.130: E/AndroidRuntime(21843):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
01-14 10:59:45.130: E/AndroidRuntime(21843):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-14 10:59:45.130: E/AndroidRuntime(21843):    at android.os.Looper.loop(Looper.java:137)
01-14 10:59:45.130: E/AndroidRuntime(21843):    at android.app.ActivityThread.main(ActivityThread.java:4446)
01-14 10:59:45.130: E/AndroidRuntime(21843):    at java.lang.reflect.Method.invokeNative(Native Method)
01-14 10:59:45.130: E/AndroidRuntime(21843):    at java.lang.reflect.Method.invoke(Method.java:511)
01-14 10:59:45.130: E/AndroidRuntime(21843):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-14 10:59:45.130: E/AndroidRuntime(21843):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-14 10:59:45.130: E/AndroidRuntime(21843):    at dalvik.system.NativeStart.main(Native Method) 
```

什么地方出了错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T03:06:40.143

您的方法`UrlTouchImageView.init()`（在构造函数中调用）访问`pagerAdapter`此行中字段的值：

```
int v = pagerAdapter.getIssueNumber(); 
```

但`pagerAdapter`从未设置过的值。我相信这是你 NPE 的原因。您必须将此字段设置为非`null`值。在构造函数或`init()`方法中。传入`UrlPagerAdapter`构造函数可以这样完成：

1.  在`UrlTouchImageView`构造函数中传递值：

    ```
    public UrlTouchImageView(Context ctx, UrlPagerAdapter pagerAdapter) {
        super(ctx);
        mContext = ctx;
        this.pagerAdapter = pagerAdapter;
        init();
    } 
    ```

2.  `UrlPagerAdapter.instantiateItem()`通过`this`：_

    ```
    UrlTouchImageView iv = new UrlTouchImageView(mContext, this); 
    ```

这也是未记录您的*问题编号*的原因 - 因为在调用*之前*抛出了 NPE `getIssueNumber()`，所以`Log.d()`从不调用。

# javascript - 打字稿 - 无法导入内部模块 - 意外行为

> ID：14311801
> 
> 赞同：1
> 
> 时间：2013-01-14T02:58:40.350
> 
> 标签：javascript, typescript

我有 2 个模块分布在 2 个文件中，例如：

--App.Tools.Utils.ts

```
export interface ILogger {
    log: (msg: string) => void;
}

module App.Tools.Utils {     

    export class Logger implements ILogger { ... }

    export function someFunction(){ ... }
} 
```

然后在第二个文件中导入模块：

--App.Routers.ts

```
 /// <reference path="App.Tools.Utils.ts" />
 module App.Routers { 

    import Utils = App.Tools.Utils;  //ERROR: A module cannot be aliased to a non-module type        

} 
```

我最终发现解决方案是将 ILogger 界面移动到 App.Tools.Utils 模块中以解决错误。起初它是有道理的，我认为编译器不会让我导入模块，因为 Logger 类实现了一个不包含在模块中的接口。为了测试，我将 ILogger 接口移动到模块内部（错误已解决），但随后在模块外部添加了一个任意接口（模块内部或任何地方都没有使用的接口）并且错误返回..

```
export interface INeverUsed { } //generates same error

module App.Tools.Utils {     

    export interface ILogger {
       log: (msg: string) => void;
    }

    export class Logger implements ILogger { ... }

    export function someFunction(){ ... }
} 
```

查看生成的 JS，在模块外部添加接口会生成一个`define(["require", "exports"]`包装器，当尝试在另一个文件中导入 App.Tools.Utils 模块时会导致错误。删除接口会删除`define`包装器并解决错误。

这是预期的行为吗？当我在同一个文件中但在模块外部定义接口时，为什么模块突然“关闭”对我来说毫无意义，特别是如果模块内部甚至没有使用该接口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T11:39:37.863

因为您`export`在接口上使用关键字，所以编译器将文件视为模块。

如果您删除界面上的 export 关键字，它应该可以工作：

```
interface ILogger {
    log: (msg: string) => void;
}

module App.Tools.Utils {     
    export class Logger implements ILogger { 
        log(msg: string) { }
    }

    export function someFunction(){  }
} 
```

和

```
///<reference path="game.ts" />

module App.Routers { 
    import Utils = App.Tools.Utils; // works      
} 
```

# objective-c - 操作开始前的 NSOperationQueue 回调？

> ID：14311806
> 
> 赞同：2
> 
> 时间：2013-01-14T02:59:05.967
> 
> 标签：objective-c, nsurlconnection, nsoperation

有没有一种方法可以找出操作是否/何时即将开始/执行`NSOperationQueue`？我正在使用`NSURLConnection's` `setDelegateQueue:`，我需要知道它何时触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:41:11.513

我可以知道你到底想做什么。

我不确定你想要实现什么，因为你的问题并不清楚，但你可以这样做：

```
currentConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:NO];
if (self.operationQueue) {
    [currentConnection setDelegateQueue:self.operationQueue];
}        
[currentConnection start]; 
```

一旦调用了 start 方法，NSURLConnection 就会被调用。您还可以继承 NSOperation 并覆盖 start 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T06:41:54.360

在您的 NSOperation 子类中为 willStartBlock 添加一个复制属性。在 main 的开头 - 在任何其他操作之前 - 如果已设置，则调用此块。

这样，您可以在创建操作时以及在将其放入操作队列之前设置操作开始时执行的操作。

您的具体问题中的问题是您没有创建在队列上创建的操作。您可以尝试继承 NSOperationQueue 并覆盖三个公共 addOperation* 方法。如果你很幸运，那么其中之一就是 NSURLConnection 用来将回调操作附加到你的队列的那个。

# wordpress - Wordpress - 如何在 2 个类别列表之间进行交互？

> ID：14311811
> 
> 赞同：0
> 
> 时间：2013-01-14T02:59:40.497
> 
> 标签：wordpress

我有一个类别列表，我必须通过排除类别 ID 将其分为 2 个类别列表。

有没有办法让我在 2 个列表之间进行交互，可能使用 url 参数或 cookie？

例如 -

第 1 类颜色：红色、蓝色、黑色

第 2 类形状：圆形、方形、三角形

我有其中的两个——

```
<?php wp_list_categories('exclude='.$excl_type_cat_1); ?>
<?php wp_list_categories('exclude='.$excl_type_cat_2); ?> 
```

当前 URL 转到 /category/*selection。

我需要做的是，例如，当您从下拉列表中选择“红色”时，它会显示所有红色产品，然后当您选择“三角形”时，它将过滤所有也是红色的三角形。

有人能解决这个问题吗？

# c# - 在“System.Windows.Baml2006.TypeConverterMarkupExtension”上提供值引发异常

> ID：14311812
> 
> 赞同：0
> 
> 时间：2013-01-14T02:59:53.710
> 
> 标签：c#, wpf, exception

我正在开发 wpf C#，运行应用程序时出现此错误：这是我的代码

```
 <Window x:Class="Hello.Testing"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:r="clr-namespace:Wpf.Controls;assembly=Wpf.TabControl"
    xmlns:wf="clr-namespace:System.Windows.Forms;assembly=System.Windows.Forms"
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    Title="Testing" Height="780" Width="1024" WindowStartupLocation="CenterScreen"
    MinWidth="1024" MinHeight="780"
    WindowStyle="None" AllowsTransparency="False"        
    ResizeMode="CanResizeWithGrip" Icon="Resources/Images/Icons/small_icon.ico" Loaded="Window_Loaded"> 
```

这是我得到的一个错误： `"Provide value on 'System.Windows.Baml2006.TypeConverterMarkupExtension' threw an exception"`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T03:23:32.123

似乎您正在使用某种标记扩展。该标记扩展是您自己实现的吗？我记得自定义 MarkupExtension 要求您实现一个成员方法 ProvideValue，并且似乎异常在该堆栈上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T15:28:57.853

当您在 xaml 中使用某些图像（在您的情况下为图标）但忘记包含在您的项目中时，有时会出现此错误。您必须已从外部复制该目录中的图像，但尚未将其包含在您的项目中。

# spring - 在 Spring MVC 和 Hibernate 应用程序的 JSP 页面中实现分页

> ID：14311816
> 
> 赞同：6
> 
> 时间：2013-01-14T03:00:03.250
> 
> 标签：spring, hibernate, jsp, spring-mvc, twitter-bootstrap

我正在尝试在我的 JSP 页面中实现分页。我正在使用 Spring MVC 和 Hibernate。java 代码部分没问题，但我在我的 JSP 页面中实现它时遇到了困难。我正在使用推特引导程序。

这是我到目前为止所做的：

```
<div class="container">
    <table class="table table-hover">
        <th>First Name</th>
        <th>Last Name</th>
        <th>Age</th>
        <c:forEach items="${employees}" var="emp">
        <tr>
            <td>${emp.firstName}</td>
            <td>${emp.lastName}</td>
            <td>${emp.Age}</td>
        </tr>
        </c:forEach>
    </table>

    <div class="pagination">
        <ul>
            <li class="disabled"><a href="#">First</a></li>
            <li class="disabled"><a href="#">Prev</a></li>
            <li class="active"><a href="#">1</a></li>
            <li class="active"><a href="#">2</a></li>
            <li class="active"><a href="#">3</a></li>
            <li class="active"><a href="#">4</a></li>
            <li class="active"><a href="#">5</a></li>
            <li class="active"><a href="#">Next</a></li>
            <li class="active"><a href="#">Last</a></li>
        </ul>
    </div>
</div> 
```

这是我的控制器中的相关代码：

```
@RequestMapping(value = "/list", method = RequestMethod.GET)
    public String getEmployees(ModelMap model) {
            **//I believe I should get the page number from the JSP here but how?**
        model.addAttribute("employees", this.employeeService.getEmployees(page));
        return "listing";
} 
```

这是我的服务类中的相关代码：

```
public List<Employee> getEmployees(int page) {
        return employeeDao.getEmployeeList(page);
} 
```

这是我的 DAO 类中的相关代码：

```
private static final int limitResultsPerPage = 3;

public List<Employee> getEmployeeList(int page) {
        Query q = sessionFactory.getCurrentSession().createQuery(
                "from Employee");
        q.setFirstResult(page * limitResultsPerPage); 
        q.setMaxResults(limitResultsPerPage);
        return (List<Employee>) q.list();
} 
```

我显示该表的页面是 list.jsp

以下是我应该做什么但不知道如何做的假设（如果我采取了错误的方式，请纠正我）：

修改菜单中指向 list.jsp 的链接，为 list.jsp?page=0，这样用户每次点击链接时，都会到达第一页。

当用户单击其中一个按钮时，我需要将页码传递给我的控制器，以便我可以设法通过查询返回正确的“员工”。

如您所见，第一个和上一个按钮已停用，因为我目前在第一页上。所以我的问题是，我应该如何处理这些按钮以及下一个和最后一个按钮的激活/停用？

另外，如何“刷新”列表中的数字？例如，如果用户在第 20 页，我不会显示从 1 到 19 的按钮？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T03:11:19.487

至少回答您的一个问题：

您可以使用 RequestParam 注释将页码和其他参数从 JSP 传递到控制器，如下所示：

```
 @RequestMapping(value = "/list", method = RequestMethod.GET)
  public String getEmployees(@RequestParam(value = "page", required = false) Long page, ModelMap model) {
        //now page is available.
    model.addAttribute("employees", this.employeeService.getEmployees(page));
    return "listing";
  } 
```

您的链接将如下所示：

```
 list/?page=1 
```

* * *

分页是一个相当复杂的过程，但这里有一些想法。您可以在 JSP 页面上使用 JSTL 来实现逻辑。例如：

```
 <c:if test="${page > 1}">
       <li class="active"><a href="#">First</a></li>
    </c:if> 
```

我建议您在 Action 中对要显示的页数进行一些计算。例如，假设您总是想显示十个链接。在第 1 页，您将显示第 1...10 页，在第 7 页，您将显示第 2...12 页，依此类推。在操作中，您可以确定要显示的起始页和结束页。

```
 int startpage = page - 5 > 0?page - 5:1;
      int endpage = startpage + 10; 
```

在 JSP 页面上，您可以执行一个循环：

```
 <c:forEach begin="${startpage}" end="${endpage}" var="p">
         <a href="#">${p}</a>
    </c:forEach> 
```

等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-04T21:43:12.990

文森特·拉姆丹尼的解决方案是正确的：谢谢。Dukable：我根据 Vincent Ramdhanie 的解决方案使用了这段代码，它工作得非常好：这样的东西应该在你的代码中工作。

```
@RequestMapping(value = "/list", method = RequestMethod.GET)
public String getEmployees(@RequestParam(value = "page", required = false) Long page, ModelMap model) {
    //now page is available.

    int startpage = (int) (page - 5 > 0?page - 5:1);
    int endpage = startpage + 10;

    model.addAttribute("employees", this.employeeService.getEmployees(page));

    model.addAttribute("startpage",startpage);
    model.addAttribute("endpage",endpage);

    return "listing";
} 
```

在你的jsp中：

```
<div class="pagination">
    <ul>
        <li><c:forEach begin="${startpage}" end="${endpage}" var="p"><a href="<c:url value="/list" ><c:param name="page" value="${p}"/>${p}</c:url>">${p}</a></c:forEach></li>
    </ul>
</div> 
```

您可以通过这种方式访问​​您的jsp：

```
http://localhost:8080/Project/list/?page=1 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-04-23T14:57:41.290

> ```
> `<div class="box-tools pull-right">
>                        <ul class="pagination pagination-sm inline">
>                           <c:if test="${pageCtn gt 1}">
>                              <li>
>                                 <c:choose>
>                                    <c:when test="${currentPage gt 1}">
>                                       <a
>                                          href="${pageContext.request.contextPath}/member/showmemberpage/${currentPage-1}/pagination.do">&laquo;</a>
>                                    </c:when>
>                                    <c:otherwise>
>                                       <a>&laquo;</a>
>                                    </c:otherwise>
>                                 </c:choose>
>                              </li>
>                              <li><a href="#">${currentPage} to ${pageCtn}</a></li>
>                              <li>
>                                 <c:choose>
>                                    <c:when test="${currentPage lt pageCtn}">
>                                       <a
>                                          href="${pageContext.request.contextPath}/member/showmemberpage/${currentPage+1}/pagination.do">&raquo;</a>
>                                    </c:when>
>                                    <c:otherwise>
>                                       <a>&raquo;</a>
>                                    </c:otherwise>
>                                 </c:choose>
>                              </li>
>                           </c:if>
>                        </ul>
>                     </div>` 
> ```

# python - 尝试编写一个 python 正则表达式来测试前 9 个字符是否匹配

> ID：14311818
> 
> 赞同：1
> 
> 时间：2013-01-14T03:00:23.977
> 
> 标签：python, regex

如果我的字符串“deed”在前 9 个字符中包含“数字或空白”，我正在尝试测试 True。

```
deed = "4472 0438 (N/A Online)$0" 
```

我尝试了以下几种变体，但当我在不应返回 True 的字符串上尝试它时，总是返回 True。所以我做错了什么。

```
re.search("([\. 0-9]{0,6})",deed) 
```

任何建议将不胜感激！抱歉，Regex 是全新的......但是正在学习。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T03:07:59.377

只需切片前九个字母：

```
re.search(expr, deed[:9]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T03:11:55.370

试试下面的正则表达式

```
re.search("(^[ 0-9]{9})", deed) 
```

该表达式`"(^[ 0-9]{9})"`将字符串定位在行首，并且仅当前 9 个字符是数字或空白时才匹配。

# php - 从我的 iOS 应用程序测试多部分表单 HTTP POST

> ID：14311820
> 
> 赞同：1
> 
> 时间：2013-01-14T03:00:35.473
> 
> 标签：php, ios, forms

我正在完成一个将数据作为多部分 HTTP POST 发送到服务器的应用程序。

问题是所述服务器尚不可用，我想要一种“虚拟”服务器来设置它可以接收这样的 HTTP POST 请求并存储/吐出最终结果，这样我就可以看到我正在发送的内容.

我有一个主机并且知道我在网络服务器上的方式，但我从来没有处理过这样的情况。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T03:04:53.783

考虑使用网络代理来验证您发送的内容是否正确。我用[查尔斯](http://www.charlesproxy.com)。Charles 也可以设置为返回虚假响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T03:25:32.230

您可以使用[wamp](http://www.wampserver.com/en/)在您的主机上设置服务器和任何 php 框架来获取 http 请求，例如[codeigniter](http://ellislab.com/codeigniter)

# machine-learning - 选择功能以将 Twitter 问题识别为“有用”

> ID：14311821
> 
> 赞同：11
> 
> 时间：2013-01-14T03:00:37.663
> 
> 标签：machine-learning, classification, nltk, feature-selection

我通过使用正则表达式从 Twitter 的流中收集一堆问题，以挑选任何包含以问题类型开头的文本的推文：*谁、什么、何时、何*地等，并以问号结尾。

因此，我最终在我的数据库中收到了几个无用的问题，例如：“谁在乎？”、“这是什么？” 等等，还有一些有用的，比如：“篮球比赛多久打一次？”、“北极熊有多重？” ETC

但是，我只对有用的问题感兴趣。

我有大约 3000 个问题，其中约 2000 个没有用，其中约 1000 个有用，我手动标记了它们。我正在尝试使用朴素贝叶斯分类器（NLTK 附带）来尝试自动对问题进行分类，这样我就不必手动挑选有用的问题。

首先，我尝试选择问题的前三个单词作为特征，但这并没有太大帮助。在 100 个问题中，分类器预测只有大约 10%-15% 的问题对有用的问题是正确的。它也未能从它预测无用的问题中挑选出有用的问题。

我尝试了其他功能，例如：包括所有单词，包括问题的长度，但结果没有显着变化。

关于我应该如何选择功能或继续进行的任何建议？

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-15T09:13:52.600

一些随机的建议。

### 添加预处理步骤并删除停用词，如`this`, `a`, `of`,`and`等。

```
  篮球比赛多久打一次
```

首先你删除一些停用词，你得到

```
  篮球打架的频率
```

### 计算每个单词[的 tf-idf](http://en.wikipedia.org/wiki/Tf%E2%80%93idf)分数（将每条推文视为一个文档，要计算分数，您需要整个语料库才能获得文档频率。）

对于像上面这样的句子，你计算每个单词的 tf-idf 分数：

```
 tf-idf(how)
  tf-idf(often)
  tf-idf(basketball)
  tf-idf(fight) 
```

[这](https://stats.stackexchange.com/questions/21076/tf-idf-cutoff-percentage-for-tweets)可能很有用。

### 为您的分类器尝试以下附加功能

*   平均 tf-idf 分数
*   中位 tf-idf 分数
*   最大 tf-idf 分数

### 此外，尝试一个[pos-tagger](http://nltk.googlecode.com/svn/trunk/doc/book/ch05.html)并为每条推文生成一个分类句子。

```
>>> 导入 nltk
>>> text = nltk.word_tokenize("篮球比赛多久打一次")
>>> nltk.pos_tag（文本）
[('How', 'WRB'), ('often', 'RB'), ('is', 'VBZ'), ('there', 'EX'), ('a', 'DT') , ('篮球', 'NN'), ('战斗', 'NN')]
```

然后，您可能有其他功能可以尝试与 pos-tags 相关的功能。

### 其他一些可能有用的功能，请参阅论文 - [qtweet](http://dl.acm.org/citation.cfm?id=2063576.2063996)（这是一篇用于识别推文问题的论文）以获取详细信息。

*   推文是否包含任何 url
*   推文是否包含任何电子邮件或电话号码
*   是否有强烈的感觉，如`!`以下问题。
*   推文的上下文中是否存在一元词。
*   推文是否提及其他用户的姓名
*   推文是否为转推
*   推文是否包含任何标签`#`

仅供参考，[qtweet](http://dl.acm.org/citation.cfm?id=2063576.2063996)的作者尝试了 4 种不同的分类器，即随机森林、SVM、J48 和逻辑回归。随机森林在其中表现最好。

希望他们有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T20:30:58.393

您可以尝试构建的最有可能非常强大的功能（不确定是否可能）是对相关推文的回复。

# c++ - ANE C API - 将 uint8_t 字符串转换为 MFC 虚拟键代码

> ID：14311822
> 
> 赞同：0
> 
> 时间：2013-01-14T03:00:41.633
> 
> 标签：c++, actionscript-3, mfc, air

首先，我提前道歉，因为这可能是一个有点模糊的问题，因为到目前为止我没有太多的事情要做。

我正在编写一个 ANE，它接受一个 AS3 字符串并将其传递给一个 MFC C++ dll，该 dll 使用`SendInput`

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310%28v=vs.85%29.aspx)

现在我还不太熟悉 Flash C API，但我目前的印象是，从 AS3 传递过来的字符串是`const uint8_t`在 C 端输入的，并使用`FREGetObjectAsUTF8`. 我正在使用以下代码来完成此操作：

```
uint32_t len;
cost uint8_t str;
FREGetObjectAsUTF8(argv[0], &len, &str); //string is a single char 
```

要发送我正在使用的击键

```
void KeyboardHelper::sendKeyStroke(int vk){
    INPUT input = {0};
    input.type = INPUT_KEYBOARD;
    input.ki.wScan = 0; //not scanning for hardware key
    input.ki.time = 0;
    input.ki.dwExtraInfo = 0;
    //virtual key code for the key we want to press
    input.ki.wVk = vk;
    input.ki.dwFlags = 0; //keypress
    SendInput(1, &input, sizeof(input));
} 
```

`input.ki.wVk`正在寻找要发送的密钥代码的十六进制值。MSDN 在此处列出了所有十六进制值和相关的击键：

[http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731%28v=vs.85%29.aspx)

这段代码确实有效，我可以从我的 AIR 应用程序中输入一个击键，它只是不是正确的键。由于您可以转换`uint8_t`为`int`我当前的错误代码，因此调用`sendKeyStroke`如下：

```
FREGetObjectAsUTF8(argv[0], &len, &str); //line from above
keyboardHelper->sendKeyStroke(int(str)); 
```

同样，这似乎确实有效，但我只是得到一个随机输入。

我什至不确定`str`or的值是什么，`int(str)`因为我还没有弄清楚在从 AIR 调用它时如何进入该代码。作为旁注，如果有人对调试 ANE 有任何了解，请随时告诉我:)（我使用的是 VS2012）

**我想这个问题的根源在于：**

是否可以将 a 转换`const uint8_t`为相应的虚拟键码？在这种情况下，我一次只处理一个按键。

如果不是，它似乎也`KEYBDINPUT wScan`需要一个 unicode 字符 if`dwFlags`设置为`KEYEVENTF_UNICODE`. 是否可以转换`const uint8_t`为`WORD`我可以使用的类型`wScan`？

我一直在使用以下 MSDN 文档作为参考：

KEYBDINPUT：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms646271%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646271%28v=vs.85%29.aspx)

发送输入：http : [//msdn.microsoft.com/en-us/library/windows/desktop/ms646310%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310%28v=vs.85%29.aspx)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T06:12:13.917

正如函数所暗示的，字符串被编码为 UTF-8 (Unicode)，其中 uint8_t 用于表示一个字节。为了与 MFC 交互，您应该将该字符串转换为 UTF-16（也是 Unicode）字符串。为此，win32 API 和 MFC 使用 WCHAR 作为每个 16 位字的单位。你可以使用`MultibyteToWideChar()`函数来实现，也许最近的 MFC 版本也有帮助，我相信你会找到的。

现在，关于转换为虚拟键码，恐怕你不走运。特别是，Unicode 不提供表示光标键、移位、控制等的方法，因此 UTF-8 字符串不会包含任何这些。不过，在单独的按键中发送字符串的字符可能就足够了。

还有一点注意事项：

```
uint32_t len;
cost uint8_t str;
FREGetObjectAsUTF8(argv[0], &len, &str); //string is a single char 
```

检查文档，但我敢打赌`&len`参数是输入和输出！作为输入，它应该接收 指向的缓冲区的长度`&str`。你使用它的方式，你可能有缓冲区溢出。

# jquery - 在滚动上添加一个类

> ID：14311826
> 
> 赞同：0
> 
> 时间：2013-01-14T03:00:53.663
> 
> 标签：jquery, scroll

我试图简单地`active`在窗口滚动上添加类并在不滚动时将其删除。

我尝试遵循此处的这些指示： [jQuery : add css class to menu item based on browser scroller position](https://stackoverflow.com/questions/2703086/jquery-add-css-class-to-menu-item-based-on-browser-scroller-position)

但是，我仍然必须做错什么。`myCart`滚动时id没有发生任何事情。

我有以下html：

```
<div id="myCart" class="active">
<div class="add-to-cart">
<div class="clearfix qty_ticker">
<label for="qty">Qty:</label>
<span class="marker_qty_left"> </span>
<input id="qty" class="input-text qty" type="text" title="Qty" value="1" maxlength="12" name="qty">
<span class="marker_qty_right"> </span>
</div>
<button class="button btn-cart" onclick="productAddToCartForm.submit(this)" title="Add to Cart" type="button">
<span>
<span>Add to Cart</span>
</span>
</button>
</div>
</div> 
```

以及以下 javascript 或 jquery：

```
<script type="text/javascript">
$(window).scroll(function() {    
    // find the id with class 'active' and remove it
    $("#myCart").removeClass("active");
    // get the amount the window has scrolled
    var scroll = $(window).scrollTop();
    // add the 'active' class to the correct id based on the scroll amount
    if (scroll <= 500) {
        $("#myCart").addClass("active");
    }
});
</script> 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T03:14:14.667

您在脚本末尾缺少“）”，这导致 javascript 无法编译。

代码应该是

```
<script type="text/javascript">
$(window).scroll(function() {    
    // find the id with class 'active' and remove it
    $("#myCart").removeClass("active");
    // get the amount the window has scrolled
    var scroll = $(window).scrollTop();
    // add the 'active' class to the correct id based on the scroll amount
    if (scroll <= 500) {
        $("#myCart").addClass("active");
    }
});
</script> 
```

当您同时使用 jquery 和原型时，jquery 的 $ 全局变量与原型 $ 全局变量发生冲突。解决这个问题的一种方法是使用 jquery 的 jQuery 变量

```
 <script type="text/javascript">
var $$ = jQuery;
$$(window).scroll(function() {    
    // find the id with class 'active' and remove it
    $$("#myCart").removeClass("active");
    // get the amount the window has scrolled
    var scroll = $$(window).scrollTop();
    // add the 'active' class to the correct id based on the scroll amount
    if (scroll <= 500) {
        $$("#myCart").addClass("active");
    }
});
</script> 
```

# c# - 存储整个表的数据集并在副本上进行查询，然后使用查询结果更新 GridView

> ID：14311829
> 
> 赞同：0
> 
> 时间：2013-01-14T03:01:02.750
> 
> 标签：c#, asp.net

我是 n 层企业开发的新手。我刚刚得到了一个教程，只是阅读抛出了“可能已经有你答案的问题”，但没有找到我想要的东西。我正在做一个家谱网站，从第一个在船上过来的人开始，你点击他的名字，网格里就会填满他所有的孩子，然后点击他的一个有孩子的孩子，网格就会得到住着他的孩子等等。每条记录都有一个 ID 和一个 ParentID。当您选择任何给定的人时，ID 将被存储，然后用于搜索与返回所有孩子的 ParentID 匹配的所有记录。数据永远不会更改（至少由用户更改），因此我只想进行一次数据库访问，将所有字段填充到一个数据表中，然后每次对其进行重新查询以显示记录。在 DAL 中，我将所有记录放入一个列表中，在 ObjectDataSource 中，填充 GridView 的函数只返回所有条目的列表。我想要做的是重新查询数据表，用新查询填充列表并显示在 GridView 中。我的代码在 3 个文件中[这里](http://www.hampleman.com/source)

（我无法使用反引号在此窗口中显示我的代码）我只需要弄清楚如何对现有 DataTable 进行新查询并将其复制到新 DataTable 中。希望这能很好地解释它。[编辑：每次从数据库中进行新查询会更容易，并且存储在内存中的资源密集型（将来如果数据库变得太大）会更少，但我只想知道我是否可以这样做 - 也就是说，从整个表格的 1 个副本开始工作] 任何想法......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T03:31:25.463

您的数据本质上代表树结构。显示它的网格可能不是我的首选......

可以通过使用复杂的 SP 来完成一次查询中的所有数据的查询。

但是你已经在考虑性能了。在提出设计时要牢记这一点总是一件好事。但是创造一些东西，改进它，然后才开始优化似乎更好。

由于关系数据库在分层数据上并不是很好，因此请考虑使用 nosql（图）数据库。正如您提到的，几乎没有对数据库的写入，nosql 在这里大放异彩。

# zend-framework - 如何在 Zend_Db_Table 中使用事务？

> ID：14311832
> 
> 赞同：0
> 
> 时间：2013-01-14T03:01:24.810
> 
> 标签：zend-framework, transactions

由于历史原因，所有模型都从 Zend_Db_Table 扩展而来。现在，我需要使用事务。如何？

我做了一些谷歌搜索，一些人说以下方式可以提供帮助：

1：$tableA->getAdapter()->beginTransaction(); 2：$tableA->getAdapter()->getDriver()->getConnection()->beginTransaction()；

有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-15T01:15:51.413

我通过将以下代码添加到 zend_db_table 中解决了这个问题： /** * surport transaction */

```
public function beginTransaction() {
    $this->getAdapter()->beginTransaction();
}
public function commit() {
    $this->getAdapter()->commit();
}
public function rollback() {
    $this->getAdapter()->rollback();
} 
```

这样我就可以在从 zend_db_table 扩展的模型中使用事务，如下所示：

```
public function test(){
    $this->beginTransaction();

    try {
        $this->addCourseItem('1', '1', '1', '1', '1');
        $this->fetchRow("none-exist-field = 1");
        //the following code will not execute
        echo "okay";
        $this->commit();
    } catch (exception $e) {
        $this->rollback();
        echo "error message:".$e->getMessage();
    }

} 
```

# iphone - 为什么当单元格宽度太高时我的 AQGridView 不滚动？

> ID：14311833
> 
> 赞同：2
> 
> 时间：2013-01-14T03:01:28.467
> 
> 标签：iphone, objective-c, aqgridview

我用这种方法实现了网格视图单元格大小：

```
- (CGSize)cellSize {
   return _gridMode ? CGSizeMake(100, 100) : CGSizeMake(320, 345);
} 
```

并检查

```
_gridMode 
```

用于确定显示哪个单元格（缩略图或全屏单元格）。

全屏单元格应该是 320x345。

它不绘制宽度超过 320px 的子视图。

当我绘制全屏单元格时，我无法滚动，当我切换回网格模式时，我什么也看不到（黑屏）。

当我将 cellSize 设置为 310x345 而不是 320x345 时，它可以工作——除了我的全屏 subvies 水平偏移了几个像素。

我应该怎么做才能显示全屏宽度 AQGridViewCells？

# jquery - 无法让 jQuery 手风琴为 WordPress 帖子工作

> ID：14311836
> 
> 赞同：0
> 
> 时间：2013-01-14T03:01:54.840
> 
> 标签：jquery, wordpress, accordion

我在标题中排队`jquery-ui-accordion`，并包含以下功能来激活它：

```
$(function() {
  $( "#accordion" ).accordion();
}); 
```

下面是如何设置html。输出只是没有任何手风琴功能的常规 WordPress 帖子列表。我想要它，以便标题变得可点击。有人可以帮我弄清楚我做错了什么吗？

```
 <?php get_header();?>

        <section id="content">

            <h2>Our Latest Videos</h2>

            <section id="latest-videos" class="video-archive">
                <section id="accordion">

                    <?php if (have_posts()) : while (have_posts()) : the_post(); ?>

                    <article class="entry" id="post-<?php the_ID(); ?>">
                        <section class="description">
                            <h3><?php the_title(); ?></h3>
                            <div>
                                test test test
                            </div>
                        </section>
                    </article>

                <?php endwhile; ?>

                <?php endif; ?>

                </section>

            </section>

        </section>

    <?php get_sidebar(); ?>
    <?php get_footer(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T03:09:52.200

这个的输出是什么样的？您可能希望采用浏览器中生成的标准标记，然后实现手风琴。这样，您不仅可以确认它可以按您希望的方式工作，而且您将对插件有更好的理解。之后将其移植到 wp 应该很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T03:43:28.687

如果 html 标记有点像这样：

```
<section id="accordion">
  <article>
    <section class="description">
      <h3>First header</h3>
      <div>First content panel</div>
    </section>
  </article>
  <article>
    <section class="description">
      <h3>Second header</h3>
      <div>Second content panel</div>
    </section>
  </article>
</section> 
```

然后，`accordion`将无法正常工作。为了让它工作，你只需要在下面有一对`<h3>`和`<div>`里面的`<section>`东西：

```
<section id="accordion">
 <h3>First header</h3>
 <div>First content panel</div>
 <h3>Second header</h3>
 <div>Second content panel</div>
</section> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-17T19:19:41.980

不要把它硬！它可以在包裹时有效**`<article>`**！你把它包装起来`<article>`，然后在你的**js 代码**上添加以下参数：

```
 $('#accordion').accordion({
       header: "article h3",
     }); 
```

正如您所注意到的，您只需将**标题**放在参数中的新位置！这是文章标签的**孩子**:)

# javascript - 使用 Google 电子表格更新 Fusion Table

> ID：14311840
> 
> 赞同：0
> 
> 时间：2013-01-14T03:02:37.210
> 
> 标签：javascript, google-fusion-tables

我在更新融合表的电子表格中运行的代码有问题。我运行以下代码（出于隐私考虑，省略了融合表 ID）。

```
 function updateFusion() {

    var tableIDFusion = '##############################'
    var email = UserProperties.getProperty('email'); 
    var password = UserProperties.getProperty('password');     
      if (email === null || password === null) {
        email = Browser.inputBox('Enter email');
        password = Browser.inputBox('Enter password'); 
        UserProperties.setProperty('email',email); 'email'
        UserProperties.setProperty('password', password); 
      }
      var authToken = getGAauthenticationToken(email,password); 
      deleteData(authToken, tableIDFusion); 
      updateData(authToken, tableIDFusion); 
      SpreadsheetApp.getActiveSpreadsheet().toast(Logger.getLog(), "Fusion Tables Update", 10) 
    }

    //Google Authentication API this is taken directly from the google fusion api website
    function getGAauthenticationToken(email, password) {
      password = encodeURIComponent(password);
      var response = UrlFetchApp.fetch("https://www.google.com/accounts/ClientLogin", {
          method: "post",
          payload: "accountType=GOOGLE&Email=" + email + "&Passwd=" + password + "&service=fusiontables&Source=testing"});
      var responseStr = response.getContentText();
      responseStr = responseStr.slice(responseStr.search("Auth=") + 5, responseStr.length);
      responseStr = responseStr.replace(/\n/g, "");
      return responseStr;
    } 
```

我继续收到错误：[https](https://www.google.com/accounts/ClientLogin) ://www.google.com/accounts/ClientLogin 的请求失败，返回代码 403。服务器响应：Error=BadAuthentication（第 97 行）

我了解编码，但对服务器和程序相互交互的方式知之甚少，我的 Formula Team 网站的代码已传递给我，这一切都让我有点不知所措，我不知道该怎么做。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:55:06.810

我一直在使用这个[版本](https://gist.github.com/3013360)的类似脚本。[John McGrath](https://github.com/jomcgrath2/Update-Fusion)通过 Google Fusion Tables 小组将它们整合在一起，在 Google 电子表格和 Google Fusion Table 之间创建手动“同步”。

我猜他们是相似的，但也许你错过了一些方面？

我已经根据自己的需要稍微修改了脚本，并添加了[API 密钥](https://developers.google.com/fusiontables/docs/v1/migration_guide#ownClient)和[新 Fusion Tables API 端点](https://developers.google.com/fusiontables/docs/v1/migration_guide)的使用，因为原始版本使用了 SQL API 端点，该端点正在逐步淘汰。

要使用，只需将 Fusion Table 的加密表 ID 添加到脚本顶部...

```
// Add the encrypted table ID of the fusion table here
var tableIDFusion = '17xnxY......'; 
```

并添加您的[api 密钥](https://code.google.com/apis/console/)...

```
// key needed for fusion tables api
var fusionTablesAPIKey = '17xnxY......'; 
```